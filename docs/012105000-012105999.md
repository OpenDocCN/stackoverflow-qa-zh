# StackOverflow 问答 12105000-12105999

# atg - 如何从 ATG 中的 Map 获取键和值？

> ID：12105002
> 
> 赞同：1
> 
> 时间：2012-08-24T07:33:18.507
> 
> 标签：atg

如何从 ATG 中的 Map 获取键和值？

```
<dsp:getvalueof var="omap" param="map"/>

<dsp:valueof value="${omap.key}"/> 
```

我看不到任何值，我在地图中有多个键和值

```
<dsp:valueof value="${omap}"/> 
```

工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T06:44:34.200

在您的类中使用 ServiceMap 数据类型，并在您的 JSP 中使用代码片段

```
<dsp:droplet name="/atg/dynamo/droplet/ForEach">
<dsp:param name="array" param="empployeemap"/>
<dsp:setvalue param="employee" paramvalue="element" />

<dsp:oparam name="output">
    <tr>
        <td width="10%"><dsp:valueof param="employee.empid" /></td>
        <td width="20%"><dsp:valueof param="employee.dob" /></td>
        <td width="70%"> </td>
    </tr>
</dsp:oparam>
</dsp:droplet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T06:51:54.490

由于它是一个 Map，你需要使用`ForEach`droplet 来迭代这个 Map("omap")

```
<dsp:getvalueof var="omap" param="map"/>

<dsp:droplet name="/atg/dynamo/droplet/ForEach">
<dsp:param name="array" value=${omap}/>
  <dsp:oparam name="output">
    Key:: <dsp:valueof param="key" /> <br />
   Value :: <dsp:valueof param="element" /> <br /> 
  </dsp:oparam>
</dsp:droplet> 
```

# jquery - jqgrid AfterShowForm 事件

> ID：12105003
> 
> 赞同：1
> 
> 时间：2012-08-24T07:33:20.080
> 
> 标签：jquery, jqgrid, form-editing

我在 AfterShowForm 事件中有一个带有函数“MyFunction”的 jqGrid。

```
MyFunction= function() {
 alert("#MyElementId");
 $("#MyElementId").attr("disabled", "true");
} 
```

上面的代码有效，但如果我删除警报不起作用！

为什么？

**编辑**

HTML 代码是：

```
<div id="editcntgridVisualizzazioni" class="ui-jqdialog-content ui-widget-content">
    <span>
        <form name="FormPost" id="FrmGrid_gridVisualizzazioni" class="FormGrid" onsubmit="return false;" style="width:100%;overflow:auto;position:relative;height:auto;">
            <table id="TblGrid_gridVisualizzazioni" class="EditTable" border="0" cellpadding="0" cellspacing="0">
                <tbody>
                    <tr id="FormError" style="display:none">
                        <td class="ui-state-error" colspan="2"></td>
                    </tr>
                    <tr style="display:none" class="tinfo">
                        <td class="topinfo" colspan="2"></td>
                    </tr>
                    <tr id="tr_AggregazioniDatiDesc" class="FormData" rowpos="1">
                        <td class="CaptionTD">Agrégation</td>
                        <td class="DataTD">&nbsp;
                            <select disabled="disabled" name="AggregazioniDatiDesc" id="AggregazioniDatiDesc" maxlength="128" class="FormElement" role="select">
                                <option role="option" value=""></option>
                                <option role="option" value="1">Aucune</option>
                                ....
                            </select>
                        </td>
                    </tr>
.... 
```

其中“AggregazioniDatiDesc”是 MyElementId

上面的代码是从编辑表单中的jqgrid创建的...

如果我不发出警报，则该元素没有属性 disabled="disabled"...

# html - 如何将数据库中的数据分组到具有行跨度的 HTML 表中？

> ID：12105004
> 
> 赞同：3
> 
> 时间：2012-08-24T07:33:23.223
> 
> 标签：html, html-table, asp-classic, grouping

我有一个`mytable`在我的 SQL SERVER 数据库中调用的表，我想用 ASP 将它显示到我的 HTML 表中。这是我运行时呈现的 HTML 表`SELECT * FROM mytable`： ![在此处输入图像描述](../Images/80c751221458a98f370d88379ab7d108.png)

从该数据库中，我想对它进行分组并将 HTML 表更改为如下所示： ![在此处输入图像描述](../Images/170e2b26143c95b5c7f4e5c9a30a3d97.png) 我想消除重复值并将表与`rowspan`. 如何循环它以创建`rowspan`分组的 HTML 表？

这是我到目前为止所做的：

```
<%
Set oConnection = Server.CreateObject("ADODB.Connection")
oConnection.Open Dsn

response.write "<table border='1' width='100%' cellpadding='5' cellspacing='0'>" &_
                    "<tr>" &_
                        "<td align='center' valign='middle' bgcolor='#CCCCCC'><strong>field1</strong></td>" &_
                        "<td align='center' valign='middle' bgcolor='#CCCCCC'><strong>field2</strong></td>" &_      
                        "<td align='center' valign='middle' bgcolor='#CCCCCC'><strong>field3</strong></td>" &_
                    "</tr>"

strselect = "select * from mytable"

set qdata = oConnection.execute(strselect)

If qdata.EOF then
    Response.write("NO DATA")   
Else    
    Do While Not qdata.EOF
    response.write  "<tr> " &_
                        "<td>" & trim(qdata("field1")) & "</td>"&_
                        "<td>" & trim(qdata("field2")) & "</td>"&_
                        "<td>" & trim(qdata("field3")) & "</td> " &_                            
                    "</tr>" 
    qdata.MoveNext
    Loop    
End If      

response.write "</table>"
oConnection.Close
Set oConnection = Nothing
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:54:53.247

这似乎是利用`GetRows()`ADO RecordSet 方法的好时机。 `GetRows()`将记录集转换为多维数组，然后通过该数组来比较值是相当简单的——在这种情况下，这是一个重要的特性。

以下代码适用于我的测试数据：

```
' Assuming the connection and recordset have already been created previous to this point
Response.Write "<table border='1' width='100%' cellpadding='5' cellspacing='0'>"
' Uncomment below when using the recordset
' Response.Write GetHeaderHtml(qdata)

Response.Write "<tbody>"

' Uncomment below when using the recordset
' Dim rsArray : rsArray = qdata.GetRows
' qdata.Close
' oConnection.Close
' Set qdata = Nothing
' Set oConnection = Nothing

' FOR TESTING ONLY:
Dim rsArray(2, 9)
rsArray(0, 0) = "X1"
rsArray(0, 1) = "X1"
rsArray(0, 2) = "X1"
rsArray(0, 3) = "X1"
rsArray(0, 4) = "X1"
rsArray(0, 5) = "X2"
rsArray(0, 6) = "X2"
rsArray(0, 7) = "X2"
rsArray(0, 8) = "X2"
rsArray(0, 9) = "X2"

rsArray(1, 0) = "A"
rsArray(1, 1) = "A"
rsArray(1, 2) = "A"
rsArray(1, 3) = "B"
rsArray(1, 4) = "B"
rsArray(1, 5) = "A"
rsArray(1, 6) = "A"
rsArray(1, 7) = "B"
rsArray(1, 8) = "C"
rsArray(1, 9) = "C"

rsArray(2, 0) = "12"
rsArray(2, 1) = "332"
rsArray(2, 2) = "32"
rsArray(2, 3) = "14"
rsArray(2, 4) = "10"
rsArray(2, 5) = "155"
rsArray(2, 6) = "23"
rsArray(2, 7) = "25"
rsArray(2, 8) = "32"
rsArray(2, 9) = "38"
' END TESTING DATA

Dim rowHtml, occurances, row, col
For row = LBound(rsArray, 2) To UBound(rsArray, 2)    ' the second dimension is row
  rowHtml = "<tr>"
  For col = LBound(rsArray, 1) To UBound(rsArray, 1)  ' the first dimension is column
    If row > LBound(rsArray, 2) Then
      ' previous rows written, only write out the cell if it is different than the one above.
      If rsArray(col, row) <> rsArray(col, row - 1) Then
        occurances = CountColumnOccurances(col, row, rsArray)
        ' you could probably get away writing "rowspan='1'", but I'll test for it and omit if 1
        If occurances > 1 Then
          rowHtml = rowHtml & "<td rowspan='" & CountColumnOccurances(col, row, rsArray) & "'>"
        Else
          rowHtml = rowHtml & "<td>"
        End If
        rowHtml = rowHtml & Server.HTMLEncode(rsArray(col, row))
        rowHtml = rowHtml & "</td>"
      End If
    Else
      occurances = CountColumnOccurances(col, row, rsArray)
      ' you could probably get away writing "rowspan='1'", but I'll test for it and omit if 1
      If occurances > 1 Then
        rowHtml = rowHtml & "<td rowspan='" & CountColumnOccurances(col, row, rsArray) & "'>"
      Else
        rowHtml = rowHtml & "<td>"
      End If
      rowHtml = rowHtml & Server.HTMLEncode(rsArray(col, row))
      rowHtml = rowHtml & "</td>"
    End If
  Next ' col
  rowHtml = rowHtml & "</tr>" & vbCrlf

  Response.Write rowHtml
Next ' row
Response.Write "</tbody>"
Response.Write "</table>"

Function CountColumnOccurances(curCol, curRow, arr)
  Dim occurances  : occurances = 1                  ' how many repeats
  Dim examinedRow : examinedRow = curRow + 1        ' the row we're comparing to
  Dim curValue    : curValue = arr(curCol, curRow)  ' the value were using to compare

  Do While examinedRow <= UBound(arr, 2)            ' the second dimension is row
    If arr(curCol, examinedRow) = curValue Then     ' the next row has the same value
      occurances = occurances + 1
    Else                                            ' the next row is different
      Exit Do
    End If
    examinedRow = examinedRow + 1
  Loop

  CountColumnOccurances = occurances
End Function

Function GetHeaderHtml(rsData)
  Dim strHeaders : strHeaders = "<thead><tr>"
  Dim objField

  For Each objField In rsData.Fields
    strHeaders = strHeaders & "<th align='center' valign='middle' bgcolor='#CCCCCC'><strong>" & objField.Name & "</strong></th>"
  Next
  strHeaders = strHeaders & "</tr></thead>"

  GetHeaderHtml = strHeaders
End Function 
```

# .net - CHAR 类型列上的 OracleCommand 参数

> ID：12105013
> 
> 赞同：1
> 
> 时间：2012-08-24T07:34:12.333
> 
> 标签：.net, sql, oracle

我在 Oracle 11g 数据库的选择查询中使用 OracleCommand.Parameters。以下语句适用于 number 或 varchar 类型的列。

```
string theQuery = "select * from TABLE where COLUMN = :p1";
OracleCommand Cmd = new OracleCommand(theQuery);
Cmd.Parameters.Add(new OracleParameter("p1", "2183989118"));
Cmd.Connection = Conn;
Cmd.CommandType = CommandType.Text; 
```

问题是我真的想针对 CHAR(20 BYTE) 类型的列运行该语句，而当我这样做时，我永远不会得到结果。如果我不使用参数并且直接在查询中添加“2183989118”，则查询有效。

我的 Parameters.Add 语句中是否缺少某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:42:48.110

尝试这个

```
 Cmd.Parameters.Add("p1", OracleDbType.Char); 
```

# javascript - Flickr 照片流

> ID：12105014
> 
> 赞同：1
> 
> 时间：2012-08-24T07:34:31.053
> 
> 标签：javascript, asp.net, css, flickr

我正在获取 flickr 代码以在我的 html 页面中显示照片流：

```
<!-- Start of Flickr Badge -->
<style type="text/css">
#flickr_badge_source_txt {padding:0; font: 11px Arial, Helvetica, Sans serif; color:#666666;}
#flickr_badge_icon {display:block !important; margin:0 !important; border: 1px solid rgb(0, 0, 0) !important;}
#flickr_icon_td {padding:0 5px 0 0 !important;}
.flickr_badge_image {text-align:center !important;}
.flickr_badge_image img {border: 1px solid black !important;}
#flickr_www {display:block; padding:0 10px 0 10px !important; font: 11px Arial, Helvetica, Sans serif !important; color:#3993ff !important;}
#flickr_badge_uber_wrapper a:hover,
#flickr_badge_uber_wrapper a:link,
#flickr_badge_uber_wrapper a:active,
#flickr_badge_uber_wrapper a:visited {text-decoration:none !important; background:inherit !important;color:#3993ff;}
#flickr_badge_wrapper {background-color:#ffffff;border: solid 1px #000000}
#flickr_badge_source {padding:0 !important; font: 11px Arial, Helvetica, Sans serif !important; color:#666666 !important;}
</style>
<table id="flickr_badge_uber_wrapper" cellpadding="0" cellspacing="10" border="0"><tr><td><a href="http://www.flickr.com" id="flickr_www">www.<strong style="color:#3993ff">flick<span style="color:#ff1c92">r</span></strong>.com</a><table cellpadding="0" cellspacing="10" border="0" id="flickr_badge_wrapper">
<tr>
<script type="text/javascript" src="http://www.flickr.com/badge_code_v2.gne?count=10&display=latest&size=s&layout=h&source=user&user=83420490%40N07"></script>
</tr>
</table>
</td></tr></table>
<!-- End of Flickr Badge --> 
```

但它只在一行中显示图像。我想要每行两个显示 4 个图像有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:38:10.700

```
<html> 
<head> 
<title>Flick Test</title>
<script src="http://code.jquery.com/jquery-latest.js"></script> 

<script>

$(function(){       

    var id='83420490%40N07';
    var limit ='20';

    // Flickr Photostream feed link.
    $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?id=" + id + "&lang=en-us&format=json&jsoncallback=?", 

    function(data){$.each(data.items, 

    function(i,item){

        // Number of thumbnails to show.            
        if(i < limit){

        // Create images and append to div id flickr and wrap link around the image.
        $("<img/>").attr("src", item.media.m.replace('_m', '_s')).appendTo("#flickr").wrap("<a href='" + item.media.m.replace('_m', '_z') + "' name='"+ item.link + "' title='" +  item.title +"'></a>");

        }

    }); 

    }); 

    });

</script>
<style type="text/css">
#flickr{
    width:340px;
    overflow:hidden;
    }
#flickr a{
    width:75px;
    float:left;
    margin:10px 10px 0 0;
    padding:0;
    border:0;   
    }
</style>

</head> 
<body> 
<div id="flickr"></div>
</body> 
</html> 
```

这应该够了吧。您需要将更多图像上传到您的流中。要测试将 id 更改为我的 49269824@N04

# ruby-on-rails - 使用 rails 控制台（终端）时的换行符

> ID：12105016
> 
> 赞同：6
> 
> 时间：2012-08-24T07:34:48.840
> 
> 标签：ruby-on-rails, console, terminal

当我键入大型 ActiveRecord 查询时，在完成查询之前，线路中断，我什至无法正确读取或键入命令。我正在使用 ubuntu。任何解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T11:11:54.357

最后缩小了调整终端大小的问题。通常我最大化终端以输入大命令，因此出现了问题。发现这可以通过处理 SIGWINCH 信号来调整 IRB 的大小来解决。在下面的解决方案中，我也在调整 Hirb 的大小。

**将以下行添加到 ~/.irbrc （如果不存在则创建一个）：**

```
Signal.trap('SIGWINCH', proc { y, x = `stty size`.split.map(&:to_i); Hirb::View.resize(x, y) if defined? Hirb } ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:12:49.773

更通用的方法是`\`在行尾使用 a 。

使用“肯尼格兰特”的相同示例

```
ruby> User.very.long.chain.of.arel.commands. \
      where('thing = ?', 4).very.long.chain.of.arel.commands 
```

最后一行不应有任何结尾`\`，然后将执行整个命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:13:10.100

我注意到与 irb 相同的错误，rails 控制台默认使用 irb。这就是我使用 pry 的原因，[在这里查看](http://railscasts.com/episodes/280-pry-with-rails)如何使用 rails 设置 pry。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:05:11.997

如果您的查询是这样的：

```
rails c
ruby> User.very.long.chain.of.arel.commands.where('thing = ?',4).very.long.chain.of.arel.commands 
```

你应该能够做到这一点：

```
ruby> User.very.long.chain.of.arel.commands.where('thing = ?',
          4).very.long.chain.of.arel.commands 
```

并将其拆分为条件内的任何逗号，然后当您最后按回车键时，它将执行。

# android - android中选择查询的SQLite数据库错误

> ID：12105017
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:34:49.923
> 
> 标签：android, sqlite

我将字符串传递给下面的代码，它给出了错误：

```
Error: 08-24 12:57:55.583: E/AndroidRuntime(11640): android.database.sqlite.SQLiteException:    near "RAMDEV": syntax error: , while compiling: SELECT chnno FROM EPG WHERE title = BABA RAMDEV KA YOGA 
```

我的代码在这里：

```
public String SearchChnNo(String title){

    String selectQuery = "SELECT " + chn_no + " FROM " + EPG + " WHERE " + pgm_title + " = " + title ; //error

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    String chnno = cursor.getString(1);
    return chnno;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:45:02.157

Lalit Poptani 的回答是正确的，但我建议您使用原始查询方法的选择参数，方式如下：

每次您需要在查询中写入值时，请改为写一个**问号**。

然后，您必须将值本身添加到**字符串数组中**。

在您的情况下，它将如下所示：

```
public String SearchChnNo(String title){

    String selectQuery = "SELECT " + chn_no + " FROM " + EPG + " WHERE " + pgm_title + " = ? " ;
    String selectionArgs [] = new String [] { title };

    SQLiteDatabase db = this.getReadableDatabase ();
    Cursor cursor = db.rawQuery ( selectQuery , selectionArgs );
    // The default value, if none is found
    String chnno = "N/A";
    if ( cursor.moveToFirst () )
        chnno = cursor.getString ( 1 );
    // Do not forget to close the cursor
    cursor.close ();
    cursor = null;
    return chnno;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:44:22.387

```
 public String SearchChnNo(String title){

    String chnno = null;

   String selectQuery = "SELECT " + chn_no + " FROM " + EPG + " WHERE " + pgm_title + "   = '" + title + "'" ;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        do {
            chnno = cursor.getString(cursor.getColumnIndex(chn_no));
            //chnno = cursor.getString(chn_no);
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning
    return chnno;

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:38:50.940

期望`pgm_title`是字符串，您必须放在`title`单引号中，

```
pgm_title + " = '" + title+"'" 
```

因此，您的最终查询将是，

```
String selectQuery = "SELECT " + chn_no + " FROM " + EPG + " WHERE " + 
                                             pgm_title + " = '" + title+"'" ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:12:32.840

要添加 Leeeeelo 和 Lalit 的答案，您真正应该做的是：

```
SQLiteDatabse db = this.getReadableDatabase();
Cursor cursor = db.query(EPG, new String[] {chn_no}, ""+pgm_title+"=?", new String [] { title}, null, null, null);
cursor.moveToFirst(); // that assumes there are results, you should probably make sure this returns true
String chnno = cursor.getString(1);
cursor.close();
return chnno; 
```

# android - 在不使用 SQLlite 的情况下将数组存储在 android 应用程序中的最佳方法是什么？

> ID：12105018
> 
> 赞同：0
> 
> 时间：2012-08-24T07:34:51.580
> 
> 标签：android

我正在开发一个基本的 android 应用程序，其中我有一个项目列表，每个项目都包含一个大约十个字符串的列表。

1.  如何将字符串存储在数组中以备后用？
2.  我可以只使用一项活动来显示所有数组吗？
3.  当我显示单个数组（一页文本）时，如何使用按钮并导航到列表中的下一个？

谢谢，

索米亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:40:48.267

您可以使用 Android 的 SharedPreferences。

如果要存储字符串数组，请使用[putStringSet](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#putStringSet%28java.lang.String,%20java.util.Set%3Cjava.lang.String%3E%29)

一个如何使用 SharedPrefrences 的小例子： [http ://android-er.blogspot.nl/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.nl/2011/01/example-of-using-sharedpreferencesedito.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:40:06.443

在 Java 中，诀窍是实现接口 Serializable。只要您尝试序列化的整个对象图仅包含也实现了 Serializable 的对象，默认的序列化算法就可以使用反射为您生成字节流，并且您可以将其输出到任何可以接受字节流的东西

这只是一种方法。您可以通过自定义 bean 类来执行此操作并实现`Serializable`它，所以现在当您创建`ArrayList<E`该类的 > 时，它就是`Serializable`.

例子：

```
Class dataBean implements Serializable
{
    public String name;
}

ArrayList<dataBean> dataBeanArrayList = new ArrayList(); 
```

现在`dataBeanArrayList`也是如此`Serializable`，您也可以在`Intent`.

# php - 用php格式导出csv文件

> ID：12105023
> 
> 赞同：-2
> 
> 时间：2012-08-24T07:35:08.253
> 
> 标签：php, export-to-csv

我通过从 sql 数据库中检索数据成功导出了 csv 文件。现在，我需要的是显示在 Excel 中格式化的数据，如粗体列名、字体颜色等。请问有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:38:01.457

CSV 文件无法格式化，它只是逗号分隔的值文件，位于扩展名为 . 的简单文本文件中`.csv`。想都别想。如果要格式化，请考虑导出到 excel 中。

# bing-maps - 如何在前端的 bing 地图上画一些东西？

> ID：12105029
> 
> 赞同：0
> 
> 时间：2012-08-24T07:35:37.447
> 
> 标签：bing-maps

我正在使用 bing 地图做一个项目，需要在上面画一些东西。当我连续绘制线条和多边形时，地图的反应非常缓慢。我不确定每次在地图上绘制东西时地图是否会与后端交互。如果是这样，是否可以先在前端绘制东西，当用户按下 SAVE 时，程序会一次将所有更改保存到后端？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:21:23.430

我假设您正在使用 JavaScript API。如果是这种情况，所有渲染都发生在客户端而不是服务器上。如果您需要快速开始向地图添加绘图工具，请查看此 Bing 地图模块：[http ://bingmapsv7modules.codeplex.com/wikipage?title=Shape%20Toolbox%20Module](http://bingmapsv7modules.codeplex.com/wikipage?title=Shape%20Toolbox%20Module)

# matlab - 如何将矩阵附加到matlab文件中的新行？

> ID：12105030
> 
> 赞同：0
> 
> 时间：2012-08-24T07:35:39.280
> 
> 标签：matlab

我在 matlab 中有一个 10x1整数值**矩阵**，如何将其写入**行****文本****文件**？我在一个循环中，想要**追加**500 多个这样的矩阵，**每个矩阵都在一个新行上。**

```
fileID = fopen('exp.txt','a');

[r,c] = size(newFinalTree);
for i=1:r
    j=1;
    val=newFinalTree(i,j);
    while val~=0
       temp=reprVectors(val,:); %%%write this matrix to the file
       fprintf(fileID,temp); %%%this line produces error saying invalid format
       j=j+1;
       val=newFinalTree(i,j);
    end    
end
fclose(fileID); 
```

还有什么是编写这样一个矩阵的最佳方法，以便从 ac 代码中读取文本文件变得容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:01:18.513

我认为最好的方法是将矩阵连接成一个`500x10`矩阵，然后使用`dlmwrite`.

```
input=randi(100,500,10);

dlmwrite(outputFilename,input) 
```

这比自己编写更不容易出错，而且速度也快得多。

如果格式不适合您`dlmwrite`，可以更改分隔符。

`dlmwrite`比较的另一个优点`fprintf`是`dlmwrite`自动为您的输入数据选择正确的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:56:29.250

如果 reprVectors() 正在输出你所说的 10x1，那么试试这个小改动：

```
fprintf(fileID, "%d %d %d %d %d %d %d %d %d %d", temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:02:33.110

如果你想存储真正的矩阵，`mat2str(...)`是你的朋友。你可以替换：

```
fprintf(fileID,temp); %%%this line produces error saying invalid format 
```

和：

```
fprintf(fileID,'%s\n',mat2str(temp)) 
```

或者，如果您希望文本文件中的行为 temp =（某个矩阵）：

```
fprintf(fileID,'temp = %s\n',mat2str(temp)); 
```

在 C 中读取它们应该很容易，使用 fscanf(...) 并记住矩阵定界符是`[]`，行定界符`;`是空格，列定界符是空格。

# javascript - 你如何使用 JQuery 制作这个菜单幻灯片？

> ID：12105034
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:36:01.437
> 
> 标签：javascript, jquery, html, slidetoggle

通过创建滑动菜单，我能够做到这一点，但是，我不确定我输入了什么错误，因为菜单不会为我滑动。我试图让菜单在单击“选项卡”时向右滑动，然后当再次单击“选项卡”时，我希望菜单缩回到屏幕的左侧。

简而言之，我的问题是：

# 1\. 为什么菜单不会滑动？

```
<html> <head> <meta charset="utf-8" />

<script type="text/javascript" src="js/jquery-1.4.min.js"></script> <script type="text/javascript">

 $(document).ready(function() {
    $("#tab").toggle(function() { 
        $('#menu').animate({ left: '0' }, 500px);
        $("#tab").html('-');
    }, function() {
        $('#menu').animate({ left: '-600' }, 500px);
        $("#tab").html('+');
    }); });​ </script>

<style type="text/css">

#menu{
    position:absolute;
    top:0;
    left:0;
    height:520px;
    width:100%;
    background-color:#000000;
    text-align:center;
    margin:0px;
    font-family:helvetica;
    color:#FFFFFF
    opacity:.9;  }

      a{ 
        padding-right:60px; 
        text-decoration:none;
        margin:40px;
        color:#FFFFFF
        } h1{
     font-size:20px;
     padding:40px;
     color:#FFFFFF
     text-margin:50px;
    } h2{
     font-size:60px;
     padding:70px;
     color:#FFFFFF } h3{
     font-size:15px;
     padding:50px;
     color:#FFFFFF }

 #tab{
      position:absolute;
      height:90px;
      width:90px;
      right:-6%;
      top:0px;
      background-color:#000000;
      font-family:helvetica;
      color:#FFFFFF;
      font-size:50px;
      cursor:pointer; }

</style>

</head>

<body>

<div id="menu"><h1>

                   <a class="navItem" href="url">about me</a>

                    <a class="navItem" href="url">book</a> 

            <a class="navItem" href="url">resume</a> 

                    <a class="navItem" href="url">ask</a> 

                    <a class="navItem" href="url">archive</a></h1>

<h2>title</h2>

<h3>websitetitle</h3>

<div id="tab"> +

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:09:59.417

它似乎以这种形式工作：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">

$(document).ready(function()
{
   $("#tab").toggle(function() { 
        $('#menu').animate({ left: '0' }, 500);
        $("#tab").html ('-');
    }, function() {
        $('#menu').animate({ left: '-600' }, 500);
        $("#tab").html ('+');
    });

});

</script>

</head>

<body>

<div id="menu" style="
position: absolute;
top: 0;
left: -600px;
height: 450px;
width: 600px;
background-color:#000000;
text-align:center;
margin:0px;
background-color:#000000;
text-align:center;
font-family:helvetica;
color:#FFFFFF;
font-size:20px;
opacity:.9;
">

                    <a class="navItem" href="url">about me</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                    <a class="navItem" href="url">book</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

            <a class="navItem" href="url">resume</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                    <a class="navItem" href="url">ask</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                    <a class="navItem" href="url">archive</a>

<div id="menu-body"
style=height:400px;width:100%;float:left;font-size:100px;text-align:center;">

                    <br>title name</div>

<div id="menu-footer" style="text-align:center;"> website name</div>

<div id="tab" style="
position: absolute;
top: 8px;
left: 100%;
float: right;
font-family: monospace;
background-color:#000000;
color:#FFFFFF;
font-size:250px;
cursor:pointer;
">+</div>

</body>
</html> 
```

错了，`$(".tab")`应该是`$("#tab")`。第一个会选择一个`<div class="tab">`，而第二个匹配`<div id="tab">`. CSS也可能是错误的。最好`<style>`为 css 使用标签。

# gmail - 如何从嵌套标签中获取 gmail 收件箱提要

> ID：12105036
> 
> 赞同：3
> 
> 时间：2012-08-24T07:36:03.440
> 
> 标签：gmail, feed, atom-feed, inbox

[如此处https://developers.google.com/google-apps/gmail/gmail_inbox_feed](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)指定，我可以通过简单地调用[https://mail.google.com/mail/来获取标签“工作”下的未读电子邮件提要饲料/原子/工作/](https://mail.google.com/mail/feed/atom/work/)

但是如果我有嵌套标签怎么办？即如果我有一个名为“重要”的标签嵌套在“工作”下

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T16:30:25.407

您需要用破折号替换所有斜杠：

如果您的嵌套标签是 Work/Unpleasant，则 url 为：

```
https://<user>:<pw>@mail.google.com/mail/feed/atom/Work-Unpleasant 
```

# json - 用于 WebGL 的 VRML 到 JSON 转换器

> ID：12105037
> 
> 赞同：2
> 
> 时间：2012-08-24T07:36:06.060
> 
> 标签：json, 3d, converter, vrml

我想将 VRML 3D 对象转换为 JSON 对象（自动获得数千个对象），以便将其加载到我的 HTML 端。

我用我找到的一些转换器尝试了它，但它仍然不起作用。

我尝试了 J3D.engine 但我只能使用从 Unity 导出的模型。

有人在转换和添加 3D 模型方面有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-25T10:31:03.707

如果您可以将 VRML 转换为 X3D XML，则可以使用此 XSLT 代码转换为 JSON： [http](http://www.web3d.org/x3d/stylesheets/X3dToJson.xslt) ://www.web3d.org/x3d/stylesheets/X3dToJson.xslt 请注意，它当前会将您的 VRML ECMAscripts 放在一行. 我们正在努力，但这不是优先事项。我相信样式表需要使用 XSLT 2.0 样式表运行器运行，而 Saxon-CE 并非在所有情况下都有效。Saxon-HE 似乎效果更好。我相信有一个本地 Java XSLT 运行器也可以工作。

# ruby - 以运动图像为叠加的视频

> ID：12105038
> 
> 赞同：2
> 
> 时间：2012-08-24T07:36:18.533
> 
> 标签：ruby, image, video, overlay

听说过自己吗？[http://www.youtube.com/watch?v=gerWP7imzg8](http://www.youtube.com/watch?v=gerWP7imzg8)

我不想克隆自己的精灵，但想找到一种方法来做同样的视频与运动图像的组合。

如果生成的视频可以嵌入 HTML5 并在流行的浏览器和智能手机（ios 和 android）上运行，那将是完美的。

要求：

*   Ruby 作为语言。
*   将移动对象放在现有视频上（可以使用任何工具执行此操作）。
*   让用户选择图像。
*   服务器端软件应插入用户选择的图像作为移动对象。

我能想到的最接近（不工作）的解决方案：

*   在 Flash 中嵌入视频并将移动对象创建为叠加层。
*   不知何故，让 Flash 将用户选择的图像作为参数，因此可以将图像作为移动对象插入。
*   使用 FFMPEG 将 SWF 文件转换为 mp4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:12:25.620

我这样做的方法是使用一个简单的 gstreamer 应用程序。它将在单个管道中处理覆盖和转码。将来，如果您愿意，您还可以从相同的“实时”流媒体解决方案中获得。这当然取决于您的应用程序。

Gstreamer 有一个可以覆盖 png 文件的元素 coglogoinsert。优点是您还可以允许透明度。通过一个简单的应用程序，您可以使用 logo-x 和 logo-y 参数以您想要的间隔更改图像的位置。

Gstreamer 也有足够好的红宝石绑定来做到这一点。

# android - 我可以在我的 Android 应用程序中使用 JSON 而不是 SQLite 吗？

> ID：12105047
> 
> 赞同：1
> 
> 时间：2012-08-24T07:37:18.083
> 
> 标签：android, database, json, sqlite

我正在开发一个简单的 android 应用程序，其活动显示来自在线 mySQL DB 中几个表的一些数据。我正在读取的表格并不复杂，不会超过 100 行。

我希望这个应用程序也可以离线运行，所以我想在数据以 JSON 格式更新后立即在本地保存数据，而不是进入为此类简单表创建 SQLite DB 的过程。

这有什么问题吗？为什么每个人都使用数据库，即使是简单的数据存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:44:08.470

事实是，您必须知道您的数据会受到哪些限制。正如@njzk2 在评论中所说，序列化数据（使用 JSON）要容易得多，但您不会对数据有任何保证。使用数据库可以确保您的操作的原子性（您不会同时对可能添加错误的数据进行操作），并且在主键或外键之类的帮助下，确保数据的一致性。

所以你只需要看看你是否需要这些约束来选择如何保存你的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:27:42.827

在开发软件时，您必须考虑到您的 I/O 数据未来可能发生的情况，包括其结构和大小。

即使现在您的数据很小，将来也可能不会。因此，如果您使用文件作为存储，您可能需要在以后迁移到数据库。因此，为了避免这种情况，大多数人选择立即使用 DB 并避免将来出现数据大小问题，因为 DB 将比纯文本文件工作得更快、更可靠（例如引用完整性），特别是如果数据是特定的尺寸。

此外，数据库的结构更加灵活，并且更改结构很容易（嗯，至少比使用文件更容易）。文件不是这样，如果你想改变文件的结构，你必须重写整个文件加载代码，这比重写几个SQL语句要麻烦得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:40:26.350

您可以使用 file 来存储 json o/p 并且可以从该文件本地解析 json 而无需 db

# java - getClass().getResource + Tomcat + Hibernate

> ID：12105054
> 
> 赞同：0
> 
> 时间：2012-08-24T07:37:34.303
> 
> 标签：java, hibernate, tomcat, resources

我有一个使用 Tomcat 和 Hibernate + c3p0 的完美运行的 webapp。我正在以编程方式配置休眠，使用 getClass().getResource(/a/b/model) 加载模型类并添加带注释的类。

现在，我被要求更改 c3p0 并改用 Tomcat JDBC 连接池。我关注了几篇文章，显然一切都设置正确。现在的问题是我在尝试加载模型类和配置休眠时遇到错误。

配置休眠的类 (HibernateConnector.class) 位于 webapps\MyApp\WEB-INF\lib\MyJar.jar 中的 jar (MyJar) 内。

如果我做 getClass().getResource("HibernateConnector.class") 我正确地获得了路径：jar:file:/C:/apache-tomcat-7.0.29/webapps/MyApp/WEB-INF/lib/MyJar.jar !/a/b/c/HibernateConnector.class

由于我在请求 getClass().getResource(/a/b/model) 时删除了 c3p0 并配置了 Tomcat 连接池，因此我得到了 file:/C:/apache-tomcat-7.0.29/work/Catalina/localhost/MyApp/装载机/a/b/型号

我没有触及任何关于加载的代码，所以很明显新配置发生了一些奇怪的事情。有谁知道如何解决这个问题？为什么路径会变成工作/Catalina....？

很抱歉发了这么长的帖子，并在此先感谢！

* * *

以下是我为使用 Tomcat 连接池所做的更改。在 web.xml 我添加：

```
<resource-ref>
 <description>This is a MySQL database connection</description>
 <res-ref-name>jdbc/myDb</res-ref-name>
 <res-type>javax.sql.DataSource</res-type>
 <res-auth>Container</res-auth>
</resource-ref> 
```

上下文.xml：

```
<Context antiJARLocking="true" path="MyApp">
<Resource auth="Container" driverClassName="com.mysql.jdbc.Driver" maxActive="30" maxIdle="10" maxWait="10000" name="jdbc/myDb" password="pass"
type="javax.sql.DataSource" url="jdbc:mysql://localhost/myDb" username="user"/>
</Context> 
```

并以编程方式配置 Hibernate：

```
props.put("hibernate.connection.datasource", "java:comp/env/jdbc/myDb");
props.put("hibernate.dialect", "org.hibernate.dialect.MySQLDialect"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T01:28:14.780

在浏览了有关类加载器和 tomcat 加载所有内容的方式的大量资源之后，我找不到任何对我的问题特别有用的东西（尽管我确实在这个主题上学到了很多东西）。

无论如何，我开始浏览 Tomcat 的有关我在上面的问题中列出的每个 Web 应用程序上下文 XML 文件的文档。

我将 antiJARLocking=true 切换为 antiResourceLocking=true 认为某些东西被锁定并且我需要更广泛的反锁定工作。通过该设置，我能够运行我的应用程序。但是antiResourceLocking会在启动时产生很大的负面影响，所以只是试一下我删除了这个属性（都默认为false），也成功了！！！:-D。

我的 context.xml 看起来像这样：

```
<Context path="MyApp">
   <Resource auth="Container" driverClassName="com.mysql.jdbc.Driver" maxActive="30" maxIdle="10"    maxWait="10000" name="jdbc/myDb" password="pass" type="javax.sql.DataSource" url="jdbc:mysql://localhost/myDb" username="user"/>
</Context> 
```

希望这对将来的某人有所帮助。

# linux - Linux 驱动程序 - 与用户空间共享 WaitHandle (-like)

> ID：12105057
> 
> 赞同：0
> 
> 时间：2012-08-24T07:37:45.187
> 
> 标签：linux, events, signals, driver, wait

我有一个想移植到 Linux 的 Windows 设备驱动程序。

我们的用户空间应用程序经常需要等待驱动事件。这是我们在 Windows 上使用的机制：

1.  应用程序创建一个 WaitHandle
2.  应用程序通过 ioctl 将此 WaitHandle 提供给驱动程序
3.  驱动程序可以使用 ObReferenceObjectByHandle 访问此句柄并使用 KeSetEvent 设置它

我喜欢这个：

*   WaitHandle 可以来自任何地方（可以是 AutoReset 或 ManualReset，可以是 .Net WaitHandle 等）
*   该进程不必使 ioctl 进入睡眠状态，而只需调用通常的 WaitForSingleObject。

我想在我的 Linux 驱动程序中保持相同的架构。

有谁知道我如何在 Linux 上获得相同的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:14:58.430

一个简单的想法是创建一个具有阻塞读取的字符设备。用户应用程序从设备中读取；这样的读取会阻塞，直到事件发生。

**编辑：**

另一个想法是向[用户空间应用程序发送信号，](http://people.ee.ethz.ch/~arkeller/linux/kernel_user_space_howto.html#s6)其处理程序将设置用户空间等待句柄（可能是 futex）。

# javascript - 如何将所有文本包装到唯一的跨度标签中？

> ID：12105059
> 
> 赞同：4
> 
> 时间：2012-08-24T07:37:49.600
> 
> 标签：javascript, jquery

我想将所有正文（每个单词）包装成唯一的跨度标签。

**包装前**：

```
<body>    
<div>
  <p>word word </p>
  <div>word word</div>
    <ul>
        <li>word word</li>
    </ul>
  </ul>
  <p>word word <strong>word</strong> </p>
</div>
</body> 
```

**包装后**：

```
<body>
<div>
    <p><span id="1">word</span> <span id="2">word</span> </p>
    <div><span id="3">word</span> <span id="4">word</span></div>
    <ul>
        <li><span id="5">word</span> <span id="6">word</span></li>
    </ul>
    </ul>
    <p><span id="7">word</span> <span id="8">word</span> <strong><span id="9">word</span></strong> </p>
</div>
</body> 
```

我在 jquery 中试过这个，但它没有给出我所期望的

```
$('body *').each(function(){

        var words = $(this).text().split(" ");

            $(this).empty();
            $t=$(this);
            $.each(words, function(i, v) {
                $t.append('<span>'+v+'</span>');
            });

}); 
```

提前致谢， 洛根

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T08:07:31.050

```
(function (count) {
  'use strict';
  (function wrap(el) {
    $(el).contents().each(function () {
      // Node.* won't work in IE < 9, use `1`
      if (this.nodeType === Node.ELEMENT_NODE) {
        wrap(this);
      // and `3` respectively
      } else if (this.nodeType === Node.TEXT_NODE) {
        var val = $.trim(this.nodeValue);
        if (val.length > 0) {
          $(this).replaceWith($.map(val.split(/\s+/), function (w) {
            return $('<span>', {id: count = count + 1, text: w}).get();
          }));
        }
      }
    });
  }('body'));
}(0)); 
```

[http://jsfiddle.net/LNLvg/3/](http://jsfiddle.net/LNLvg/3/)

**更新**：这个版本不会默默地杀死 whitspace ;)

```
(function (count) {
  'use strict';
  (function wrap(el) {
    $(el).filter(':not(script)').contents().each(function () {
      if (this.nodeType === Node.ELEMENT_NODE) {
        wrap(this);
      } else if (this.nodeType === Node.TEXT_NODE && !this.nodeValue.match(/^\s+$/m)) {
        $(this).replaceWith($.map(this.nodeValue.split(/(\S+)/), function (w) {
          return w.match(/^\s*$/) ? document.createTextNode(w) : $('<span>', {id: count = count + 1, text: w}).get();
        }));
      }
    });
  }('body'));
}(0)); 
```

[http://jsfiddle.net/mtmqR/1/](http://jsfiddle.net/mtmqR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:52:19.993

这是一个使用纯 javascript 的解决方案，它将单词包装在 span 中并保留文本中的空格，但将它们留在 span 之外，因此只有单词本身在 span 中：

```
function splitWords(top) {
    var node = top.firstChild, words, newNode, idCntr = 1, skipChild;
    var re = /\S/;
    while(node && node != top) {
        skipChild = false;
        // if text node, check for our text
        if (node.nodeType == 3) {
            if (re.test(node.nodeValue)) {
                newNode = null;
                words = node.nodeValue.split(" ");
                for (var i = 0; i < words.length; i++) {
                    if (words[i] === "") {
                        newNode = document.createTextNode(" ");
                        node.parentNode.insertBefore(newNode, node);
                    } else {
                        newNode = document.createElement("span");
                        newNode.id = "word" + idCntr++;
                        newNode.innerHTML = words[i];
                        node.parentNode.insertBefore(newNode, node);
                        if (i < words.length - 1) {
                            newNode = document.createTextNode(" ");
                            node.parentNode.insertBefore(newNode, node);
                        }
                    }
                }
                if (newNode) {
                    node.parentNode.removeChild(node);
                    node = newNode;
                    // don't go into the children of this node
                    skipChild = true;
                }
            }
        } else if (node.nodeType == 1) {
            if (node.tagName == "SCRIPT") {
                skipChild = true;
            }
        }        

        if (!skipChild && node.firstChild) {
            // if it has a child node, traverse down into children
            node = node.firstChild;
        } else if (node.nextSibling) {
            // if it has a sibling, go to the next sibling
            node = node.nextSibling;
        } else {
            // go up the parent chain until we find a parent that has a nextSibling
            // so we can keep going
            while ((node = node.parentNode) != top) {
                if (node.nextSibling) {
                    node = node.nextSibling;
                    break;
                }
            }
        }
    }
} 
```

还有一个工作演示：http: [//jsfiddle.net/jfriend00/3mms7/](http://jsfiddle.net/jfriend00/3mms7/)

仅供参考，我将 id 值设为“word1”、“word2”等......因为在 HTML5 之前，id 值不允许以数字开头。

# c# - Rhino 模拟，VerifyAllExpectations

> ID：12105060
> 
> 赞同：5
> 
> 时间：2012-08-24T07:37:50.930
> 
> 标签：c#, unit-testing, tdd, rhino-mocks

我想使用 Rhino Mocks 跟踪对方法的调用。假设我有这个代码：

```
public class A
{
    protected IB _b;

    public A(IB b)
    {
        _b = b;
    }

    public void Run( string name )
    {            
        _b.SomeCall(new C { Name = name });
    }
}    

public interface IB
{
    void SomeCall( C c );
}    

public class C
{
    public string Name { get; set; }
    // more attributes here
} 
```

测试看起来像：

```
// prepare
var bMock = Rhino.Mocks.MockRepository.GenerateStrictMock<IB>();
bMock.Expect(x => x.SomeCall(new C { Name = "myname" }));
var sut = new A(bMock);

// execute
sut.Run("myname");

// assert
bMock.VerifyAllExpectations(); 
```

测试失败并出现*ExpectedViolationException*，因为 Rhino Mocks 框架检测到 2 个不同的 C 类。

如果被测对象将对象参数创建到被测方法中，我如何检查调用？有机会告诉 Rhino Mocks 将参数检查为“等于”吗？

万分感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T07:59:32.870

我建议您使用更简单（且更易于维护）的 AAA 语法。在大多数情况下，严格的模拟比其他任何事情都更痛苦。

使用 比较参数`Equals`。如果`C`不覆盖`Equals`，则通过引用进行比较，并且在您的情况下不匹配。用于`Matches`以其他方式检查参数。

```
// arrange
var bMock = MockRepository.GenerateMock<IB>();
var sut = new A(bMock);

// act
sut.Run("myname");

// assert
bMock.AssertWasCalled(x => x.SomeCall(Arg<C>.Matches(y => y.Name == "myname")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:50:00.020

您需要添加 IgnoreArguments 并且可以另外添加参数约束以调用“SomeCall”：

```
bMock.Expect(x => x.SomeCall(new C { Name = "myname" }))
    .IgnoreArguments()
    .Constraints(new PropertyConstraint(typeof(C), "Name", 
        Rhino.Mocks.Constraints.Is.Equal("myname"))); 
```

# java - onActivityResult 中的操作和“错误在 onSaveInstanceState 后无法执行此操作”

> ID：12105064
> 
> 赞同：49
> 
> 时间：2012-08-24T07:38:01.403
> 
> 标签：java, android, android-fragments

实现用户可以登录的应用程序我有以下情况：如果用户已登录，则执行操作，否则启动登录活动以获得结果，如果结果是 Activity.RESULT_OK 则执行操作。

我的问题是要执行的操作是显示 DialogFragment，但调用

```
DialogFragment newFragment = MyDialogFragment.newInstance(mStackLevel);
newFragment.show(ft, "dialog") 
```

在 onActivityResult 回调中抛出异常：

```
Caused by: java.lang.IllegalStateException:  
Can not perform this action after onSaveInstanceState 
```

那么我该如何解决呢？我正在考虑在那里升旗并在 onResume 中显示对话框，但我认为这个解决方案有点脏

编辑：添加了更多代码（我按照此示例显示[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)

当用户请求操作时：

```
... 
if (!user.isLogged()){
 startActivityForResult(new Intent(cnt, Login.class), REQUEST_LOGIN_FOR_COMMENT);
} 
```

在同一个片段

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_LOGIN_FOR_COMMENT && resultCode == Activity.RESULT_OK) {
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        DialogFragment newFragment = MyDialogFragment.newInstance();
        newFragment.show(ft, "dialog")
    }
} 
```

如果用户登录登录活动调用；

```
setResult(Activity.RESULT_OK);
finish(); 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-09-17T18:11:17.680

我想出的最好的事情是不使用 .show() 而是这样做。

```
CheckinSuccessDialog dialog = new CheckinSuccessDialog();
//dialog.show(getSupportFragmentManager(), null);
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(dialog, null);
ft.commitAllowingStateLoss(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-31T14:11:45.310

这是适合我的解决方法。

```
private void alert(final String message) {
    Handler handler = new Handler(Looper.getMainLooper());
    handler.post(new Runnable() {
        public void run() {
            AlertDialogFragment alertDialogFragment = AlertDialogFragment.newInstance(message);
            alertDialogFragment.show(getFragmentManager(), ALERT_DIALOG_FRAGMENT);
        }
    });        
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-11T12:15:56.283

如果使用 DialogFragment，唯一对我有用的是使用 dissmissAllowingStateLoss() 关闭 Fragment

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-24T20:21:40.840

我只是检查一个活动是否被破坏。

```
if (!getActivity().isFinishing()) {
    DialogFragment fragment = MyFragment.newInstance();
    fragment.show(getActivity().getSupportFragmentManager(), MyFragment.TAG);
} 
```

另请参阅[https://stackoverflow.com/a/41813953/2914140](https://stackoverflow.com/a/41813953/2914140)。在`DialogFragment`写：

```
override fun show(manager: FragmentManager?, tag: String?) {
    try {
        val ft = manager?.beginTransaction()
        ft?.add(this, tag)
        ft?.commitAllowingStateLoss()
    } catch (ignored: IllegalStateException) {
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-12T07:59:21.090

通过反射`show(Fragment manager, String tag)`允许状态丢失和从原始函数更改的覆盖函数：`mDismissed = false;` `mShownByMe = true;`

```
public class DialogParent extends DialogFragment {

    @Override
    public void show(FragmentManager manager, String tag) {
        try {
            Field mDismissed = DialogFragment.class.getDeclaredField("mDismissed");
            Field mShownByMe = DialogFragment.class.getDeclaredField("mShownByMe");
            mDismissed.setAccessible(true);
            mShownByMe.setAccessible(true);
            mDismissed.setBoolean(this, false);
            mShownByMe.setBoolean(this, true);
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        FragmentTransaction ft = manager.beginTransaction();
        ft.add(this, tag);
        ft.commitAllowingStateLoss();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-13T16:19:41.763

这真的有效。

```
CheckinSuccessDialog dialog = new CheckinSuccessDialog();
//dialog.show(getSupportFragmentManager(), null);
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(dialog, null);
ft.commitAllowingStateLoss(); 
```

但仍然很糟糕，因为出现错误“活动已被破坏”</p>

```
ava.lang.IllegalStateException: Activity has been destroyed fragmentTransaction.commitAllowingStateLoss(); 
```

所以我的解决方案是添加检查`if (!isFinishing()&&!isDestroyed())`

```
CheckinSuccessDialog fragment = CheckinSuccessDialog.newInstance();

     if (fragment instanceof DialogFragment) {
                DialogFragment dialog = (DialogFragment) fragment;
                if (!dialog.isAdded()) {
                    fragmentTransaction.add(dialog, 
                          CheckinSuccessDialog.class.getName());
                    if (!isFinishing()&&!isDestroyed()) {
                        fragmentTransaction.commitAllowingStateLoss();
                    }
                } 
```

解雇时：

```
FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
        Fragment fragment = getSupportFragmentManager().findFragmentByTag(CheckinSuccessDialog.class.getName());
        if (fragment != null && fragment instanceof DialogFragment) {
            DialogFragment dialog = (DialogFragment) fragment;
            dialog.dismiss();
            if (!isFinishing()&&!isDestroyed()) {
                fragmentTransaction.commitAllowingStateLoss();
            }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-29T05:58:54.483

每当 a 在保存其状态`FragmentTrasaction`后提交时，都会引发此异常。`FragmentManager`简单而干净的方法是`FragmentManager`在显示之前检查是否已经保存状态`DialogFragment`。

```
if(!getSupportFragmentManager.isStateSaved()) {
    MyDialogFragment dialogFragment = new MyDialogFragment()
    dialogFragment.show(getSupportFragmentManager, TAG);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-24T03:31:44.083

您应该`super.onActivityResult()`在显示对话框之前调用

# ios - shouldAutorotateToInterfaceOrientation：从不调用

> ID：12105085
> 
> 赞同：2
> 
> 时间：2012-08-24T07:39:41.830
> 
> 标签：ios, iphone, orientation

我在部署信息下将支持的界面方向设置为除了纵向颠倒之外。

我想覆盖 shouldAutorotateToInterfaceOrientation: 用于自定义行为。（即根据条件支持景观）

由于约束，我只有一个视图控制器（自定义视图转换）

这就是我的 appdelegate 中的代码的样子：

```
self.viewController = [[MyController alloc]initWithNibName:nil bundle:nil];

self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES; 
```

在 myController.m 中，我覆盖了 shouldAutorotateToInterfaceOrientation：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
} 
```

应用程序自动旋转到所有方向，但纵向倒置，并且永远不会调用回调。我在运行时尝试了[从 shouldAutorotateToInterfaceOrientation: 更改返回时](https://stackoverflow.com/questions/6518961/change-return-from-shouldautorotatetointerfaceorientation-at-runtime)的建议，但没有成功。为什么？

附带说明一下，在运行时更改旋转支持的最佳方法是什么？

**更新：**

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

被调用。我试着放入

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait]; 
```

没有成功:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:48:11.207

用的是ios6

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
```

在 ios6 上已弃用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:13:27.767

它为我工作：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    NSUInteger orientations = UIInterfaceOrientationMaskPortrait;
    if ([self isKindOfClass:[YourViewController class]]) { // Your view class
        orientations |= UIInterfaceOrientationMaskPortraitUpsideDown;
    }
    return orientations;
} 
```

方向：

```
orientations |= UIInterfaceOrientationMaskLandscapeLeft;
orientations |= UIInterfaceOrientationMaskLandscapeRight; 
```

# actionscript-3 - 添加皮肤时按钮上的标签消失

> ID：12105086
> 
> 赞同：0
> 
> 时间：2012-08-24T07:39:46.957
> 
> 标签：actionscript-3, flash-builder

我设置了按钮的标签和皮肤，但是当我尝试添加代码以随机化皮肤时，皮肤工作正常，但标签消失了。如果我删除 button1.setStyle("skinClass", randomSkin()); 显示标签。

```
public function randomSkin():Class{
var randSkin:Array = new Array(Skins.Normal,Skins.Ice,Skins.Fire,Skins.Jewel,Skins.Stone);
var index:Number=Math.floor(Math.random()*randSkin.length);
return randSkin[index];
}

button1.setStyle("skinClass", randomSkin());
button1.label=tiles[0][0]; 
```

当我尝试跟踪按钮的标签时，它有一个值，但它没有显示在按钮上。

如何在按钮上显示标签？

这是我使用的皮肤代码之一

```
<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    width.down="100%" height.down="100%">
<!-- host component -->
<fx:Metadata>
    [HostComponent("spark.components.Button")]
</fx:Metadata>

<!-- states -->
<s:states>
    <s:State name="disabled" />
    <s:State name="down" />
    <s:State name="over" />
    <s:State name="up" />
</s:states>
<s:BitmapImage includeIn="disabled" left="0" right="0" top="0" bottom="0"
         source="@Embed('assets/textures/tiles/fire.png')"/>
<s:BitmapImage includeIn="down" left="0" right="0" top="0" bottom="0" blendMode="difference"
         source="@Embed('assets/textures/tiles/fire.png')"/>
<s:BitmapImage includeIn="over" left="0" right="0" top="0" bottom="0"
         source="@Embed('assets/textures/tiles/fire.png')"/>
<s:BitmapImage includeIn="up" left="0" right="0" top="0" bottom="0"
         source="@Embed('assets/textures/tiles/fire.png')"/>
<s:Group id="contentGroup" top="52" left="5" right="5"/>

</s:Skin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:42:34.827

你的皮肤上没有标签，这就是它不显示的原因。使用属性添加它`id="labelDisplay"`。您可以从 sdk 检查皮肤代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
             xmlns:s="library://ns.adobe.com/flex/spark" 
             minWidth="21" minHeight="21"
             alpha.disabled="0.5">

    <fx:Metadata>
        <![CDATA[
            [HostComponent("spark.components.Button")]
        ]]>
    </fx:Metadata>

    <s:states>
        <s:State name="up" />
        <s:State name="over" />
        <s:State name="down" />
        <s:State name="disabled" />
    </s:states>

    <s:Rect excludeFrom="over, down, disabled" left="0" top="0" right="0" bottom="0" radiusX="2" >
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xf3f4f9"
                                 ratio="0"/>
                <s:GradientEntry color="0xf3f4f9"
                                 ratio="0.16"/>
                <s:GradientEntry color="0xdee5f3"
                                 ratio="0.60"/>
                <s:GradientEntry color="0xd4dbe8"
                                 ratio="1"/>
            </s:LinearGradient>
        </s:fill>
        <s:stroke>
            <s:SolidColorStroke color="0xbbbbbb"/>
        </s:stroke>
    </s:Rect>

    <s:Rect includeIn="over, down" left="0" top="0" right="0" bottom="0" radiusX="2" >
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xffffe3"
                                 ratio="0"/>
                <s:GradientEntry color="0xfff18c"
                                 ratio="0.45"/>
                <s:GradientEntry color="0xffdd5d"
                                 ratio="0.52"/>
                <s:GradientEntry color="0xffeb92"
                                 ratio="1"/>
            </s:LinearGradient>
        </s:fill>
        <s:stroke>
            <s:SolidColorStroke color="0xbbbbbb"/>
        </s:stroke>
    </s:Rect>

    <s:Rect includeIn="disabled" left="0" top="0" right="0" bottom="0" radiusX="2" >
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xf3f4f9"
                                 ratio="0"/>
                <s:GradientEntry color="0xdddddd"
                                 ratio="0.75"/>
                <s:GradientEntry color="0xdddddd"
                                 ratio="1"/>
            </s:LinearGradient>
        </s:fill>
        <s:stroke>
            <s:SolidColorStroke color="0xbbbbbb"/>
        </s:stroke>
    </s:Rect>

    <s:Label id="labelDisplay"
             width="100%" height="100%"
             textAlign="center"
             verticalAlign="middle"
             maxDisplayedLines="1">
    </s:Label>

</s:SparkSkin> 
```

# facebook - Facebook api 消息线程 url 框架

> ID：12105088
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:40:04.150
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我想框架 url 以从我的应用程序中打开 facebook 中的消息线程。框架 url 的逻辑取自[这里](https://stackoverflow.com/questions/9051642/how-to-get-message-thread-url-knowing-the-thread-id)！

问题在于我从 facebook graph api 获得的 thread_id 值。我得到的 Thread_id 始终是一个整数值（例如 311135682316044）。所以生成的视图 url 是：

[https://www.facebook.com/messages/?action=read&tid=id.311135682316044](https://www.facebook.com/messages/?action=read&tid=id.311135682316044)

但是这个链接给出了错误“找不到消息”！
我注意到 facebook 用于同一 htread 的 url 具有 thread_id 值作为字符串（例如 da4fe83e8be749c75cb08275e95da47138）

[http://www.facebook.com/messages/?action=read&tid=da4fe83e8be749c75cb08275e95da47138](http://www.facebook.com/messages/?action=read&tid=da4fe83e8be749c75cb08275e95da47138)

知道问题出在哪里吗？

谢谢，
阿努拉格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:55:18.910

URL`http://www.facebook.com/messages/other/?action=read&tid=id.[user_id]`和`http://www.facebook.com/messages/?action=read&tid=id.[user_id]`为我工作。如果您无权访问对话/线程，您只会收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:48:58.017

在我看来，你目前无法解决这个问题，这是 Facebook 的一个错误，它已被归档。如果您知道这是一对一的对话，您可以通过重定向到`/message/(user_id)`而不是链接到 Thread URL 来处理不当行为。这对我有用。

要检测是否为 1:1，请查询 (FQL)`recipients`数组`thread`并确定其大小。

因此，通过这种变通方法，您无法完全处理该错误，但可以减少其影响！

# android - android应用中listview下方的按钮

> ID：12105093
> 
> 赞同：0
> 
> 时间：2012-08-24T07:40:16.637
> 
> 标签：android

```
 <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
                              <ListView
                                 android:id="@+id/_lv_labels"
                                 android:layout_width="wrap_content"
                                 android:layout_height="195dp"
                                 android:layout_marginLeft="50dp"
                                 android:layout_marginRight="40dp"
                                 android:layout_marginTop="1dp"
                                 android:choiceMode="multipleChoice"
                                 android:cacheColorHint="@drawable/white" />
                              </RelativeLayout>
                              <TableLayout 

  android:id="@+id/TableLayout01"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:stretchColumns="*"
  android:gravity="bottom">
  <TableRow
  android:id="@+id/TableRow01">
   <Button
                android:id="@+id/_btn_scannewitem"
                android:layout_width="90dp"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:background="@drawable/button_background"

                android:text="Scan New Item" />
  <Button
                android:id="@+id/_btn_saveNewItem"
                android:layout_width="90dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="2dp"
                android:background="@drawable/button_background"

                android:text="Save Your Item"
                android:visibility="gone" />
   <Button
                android:id="@+id/_btn_changeprofile"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="2dp"
                android:background="@drawable/button_background"

                android:text="Change Profile" />
  </TableRow>

  </TableLayout> 
```

以上是我用于显示列表视图和按钮的代码，但它不适合我提到的这种设计

我正在使用 android 应用程序，因为我想在页面底部有一个按钮。我需要列表视图来显示列表中可用的任何项目，它只显示两个项目。我想要像我在下面提到的图像。

![我需要这样的设计](../Images/dfb122edc486d7f7a9bc8cc43500af29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:49:44.737

您正在启动一个相对布局并关闭它，然后您正在启动一个表格布局，这是错误的。您的表格布局应该在相对布局的根目录内

```
<RelativeLayout
 <TableLayout >

   </TableLayout >                           
  </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:52:18.043

您需要有一个包含 xmlns:android="http://schemas.android.com/apk/res/android" 的主父容器布局，其范围仅在末尾结束

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/asda"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/TableLayout01"
    android:layout_marginLeft="50dp"
    android:layout_marginRight="40dp"
    android:layout_marginTop="1dp" >

    <ListView
        android:id="@+id/_lv_labels"
        android:layout_width="wrap_content"
        android:layout_height="318dp"
        android:layout_weight="1"
        android:choiceMode="multipleChoice" />
</LinearLayout>

<TableLayout
    android:id="@+id/TableLayout01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignRight="@+id/asda"
    android:layout_marginBottom="114dp"
    android:gravity="bottom"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/TableRow01"
        android:gravity="bottom" >

        <Button
            android:id="@+id/_btn_scannewitem"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:text="Scan New Item" />

        <Button
            android:id="@+id/_btn_saveNewItem"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:text="Save Your Item"
            android:visibility="gone" />

        <Button
            android:id="@+id/_btn_changeprofile"
            android:layout_width="80dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:text="Change Profile" />
    </TableRow>
</TableLayout>

 </RelativeLayout> 
```

# javascript - 在javascript中使用responseText有困难

> ID：12105098
> 
> 赞同：1
> 
> 时间：2012-08-24T07:40:30.280
> 
> 标签：javascript, ajax, json

我在使用 json 将变量从 php 传递到 javascript 时遇到问题，基本上问题是在我的 javascript 中我可以调试和查看 responseText 中的项目，但我无法将它们分配给变量或查看它们，我也尝试过单个项目，但没有管理任何关于为什么会发生这种情况的想法。

```
function ajaxrequestDB() {
    var AJAX = null; // Initialize the AJAX variable.

    if (window.XMLHttpRequest) { // Does this browser have an XMLHttpRequest object?
        AJAX=new XMLHttpRequest(); // Yes -- initialize it.
    } 
    else { // No, try to initialize it IE style
        AJAX=new ActiveXObject("Microsoft.XMLHTTP"); // Wheee, ActiveX, how do we format c: again?
    } // End setup Ajax.

    if (AJAX==null){ // If we couldn't initialize Ajax...
    alert("Your browser doesn't support AJAX."); // Sorry msg.
    return false // Return false, couldn't set up ajax
    }
        AJAX.onreadystatechange = function() { // When the browser has the request info..
            if (AJAX.readyState==4 || AJAX.readyState=="complete") 
            { // see if the complete flag is set.
            callback(AJAX.responseText, AJAX.status); // Pass the response to our processing function
            } // End Ajax readystate check.
        }

    var url='http://localhost/Scripts/refresh.php'; 
    //var url='http://cpdtest.zzl.org/Scripts/hidemarker.php?Name='+myname; 
    AJAX.open("GET", url, true); // Open the url this object was set-up with.
    AJAX.send(); // Send the request.       
    alert(AJAX.responseText);
    var result = AJAX.responseText;

    eval(result);
    //alert(result);
} 
```

从上面如果我对 AJAX.responseText 进行调试，我可以从我的 php 文件中看到返回的数据，但是 alert(AJAX.responseText) 我只能看到一个空白的警报窗口。

下面也是我的 php 文件，它从 db 读取并将变量发送到 javascript。

```
<?php
header('Content-type: application/json');
//$con = mysql_connect("localhost","770132_admin","admin");
$con = mysql_connect("localhost","root","");

if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("cpd", $con);

$SQL = "SELECT name from markers";
$result = mysql_query($SQL);
while ($db_field = mysql_fetch_assoc($result)){

$data[]= $db_field;

}  
echo json_encode($data);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:53:15.920

当您在以下命令中设置“true”时，您已将 ajax 请求设置为异步：

```
AJAX.open("GET", url, true);

```

这意味着只有当 AJAX.readyState==4 时，ajax 响应才会准备好。因此，您必须输入以下代码

```
    警报（AJAX.responseText）；
    var 结果 = AJAX.responseText;

    评估（结果）；

```

必须插入到这里：

```
AJAX.onreadystatechange = function() { // 当浏览器有请求信息时..
            if (AJAX.readyState==4 || AJAX.readyState=="complete")
            { // 查看是否设置了完整标志。
              //你的代码//
            回调（AJAX.responseText，AJAX.status）；// 将响应传递给我们的处理函数
            } // 结束 Ajax 就绪状态检查。
        }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:10:38.960

尝试使用下一个 javascript 代码：

```
function ajaxrequestDB(callback) {
    var AJAX; // Initialize the AJAX variable.
    if (window.XMLHttpRequest) { // Does this browser have an XMLHttpRequest object?
        AJAX=new XMLHttpRequest(); // Yes -- initialize it.
    }
    else if (window.ActiveXObject) { // No, try to initialize it IE style
        AJAX=new ActiveXObject("Microsoft.XMLHTTP"); // Wheee, ActiveX, how do we format c: again?
    } // End setup Ajax.

    if (!AJAX) { // If we couldn't initialize Ajax...
        alert("Your browser doesn't support AJAX."); // Sorry msg.
        return false; // Return false, couldn't set up ajax
    }

    AJAX.onreadystatechange = function() { // When the browser has the request info..
        if (AJAX.readyState==4) { // see if the complete flag is set.
            callback(AJAX.responseText, AJAX.status); // Pass the response to our processing function
        } // End Ajax readystate check.
    }
    var url='http://localhost/Scripts/refresh.php';
    //var url='http://cpdtest.zzl.org/Scripts/hidemarker.php?Name='+"myname";
    AJAX.open("GET", url, true); // Open the url this object was set-up with.
    AJAX.send(null); // Send the request.       
}

function showResult(text, status){
    if(status==200){
        alert(text);
        var result=JSON.parse(text);
        alert(result);
    }
    else alert("HTTP Error:" + status);
}

ajaxrequestDB(showResult); 
```

# iphone - iphone编程：UIImageView和动画的碰撞检测

> ID：12105103
> 
> 赞同：1
> 
> 时间：2012-08-24T07:40:37.273
> 
> 标签：iphone, objective-c, ios, animation, collision-detection

我在 viewDidAppear 中有一个动画，如下所示

```
-(void)viewDidAppear:(BOOL)animated
{
    for (int i = 0; i < 100; i++) {

        p = arc4random_uniform(320)%4+1; //global integer

        CGRect startFrame = CGRectMake(p*50, -50, 50, 50);
        CGRect endFrame   = CGRectMake(p*50, CGRectGetHeight(self.view.bounds) + 50,
                                       50,
                                       50);

        animatedView = [[UIView alloc] initWithFrame:startFrame];
        animatedView.backgroundColor = [UIColor redColor];

        [self.view addSubview:animatedView];

        [UIView animateWithDuration:2.f
                              delay:i * 0.5f
                            options:UIViewAnimationCurveLinear
                         animations:^{
                             animatedView.frame = endFrame;
                         } completion:^(BOOL finished) {
                             [animatedView removeFromSuperview];
                         }];
    }
} 
```

它只是从屏幕顶部创建小方块并移动到底部。我还有一个 UIImageView，它由 x 轴上的加速度计控制。目标不是触摸动画对象。就像一个简单的赛车游戏。但是我不知道如何检测 imageView 和动画之间的碰撞？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:15:48.333

首先，您需要将所有动画视图对象保存在一个数组中，以检查与图像视图的冲突。所以在你的 .h 文件中创建一个 NSArray 来保存动画视图

```
NSMutableArray animatedViews; 
```

然后在 viewDidLoad 中初始化它

```
animatedViews = [[NSMutableArray alloc] init]; 
```

然后更改您的代码 viewWillAppear 并添加一行

```
[self.view addSubview:animatedView];
[animatedViews addObject:animatedView]; 
```

然后创建一个函数来检查碰撞，它需要一个预定计时器的参数

```
-(void) checkCollision: (NSTimer *) theTimer{
    for(int i = 0; i < [animatedViews count]; i++) {
        UIView *theView = [animatedViews objectAtIndex:index];
        if (CGRectIntersectsRect(theView.frame, yourImageView.frame) {
           // the image collided
           // stop the timer and do your work here
        }
    }
} 
```

然后在 viewWillAppear 添加这一行来安排定时器每半秒调用一次来调用函数来检查碰撞

```
[NSTimer scheduledTimerWithTimeInterval: 0.5  
                             target: self  
                           selector: @selector(checkCollision:)  
                           userInfo: nil  
                            repeats: YES]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T21:03:19.737

问题出在这个测试中：`if (CGRectIntersectsRect(theView.frame, yourImageView.frame)` 您必须检查视图的presentationLayer：

```
CGRect movingFrame = [[theImage.layer presentationLayer] frame];
    if (CGRectIntersectsRect(movingFrame, panier.frame)) {           
        // the image collided            
    } 
```

# c++ - 代码块 - wx/setup：没有这样的文件或目录

> ID：12105107
> 
> 赞同：6
> 
> 时间：2012-08-24T07:40:55.897
> 
> 标签：c++, debugging, codeblocks

我正在尝试在 Windows+Code Blocks 上编写我的第一个 cpp 程序。

我已经安装了 wxwidgets。

我有一个标签和一个按钮。

当我按 F9 时，我得到错误：**error: wx/setup.h: No such file or directory**。

该错误在文件 platform.h 的第 196 行突出显示，其中包含**#include "wx/setup.h"**

我在我的硬盘上搜索了文件。它位于**c:\wxWidgets-2.8.12\wx\msw**和其他一些位置。

当我将第 196 行更改为**wx/msw/setup.h 时**，此错误消失了，但还有其他错误。

我认为我缺少一些非常基本但也很重要的东西。请有任何想法...谢谢！

编辑：我不知道这是否重要，但是当我开始一个新的 wxwidgets 项目时，我得到以下屏幕： ![在此处输入图像描述](../Images/f5757e0eb7a6cde60bf34deeee5a6eea.png) 然后我继续单击是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-18T09:39:49.657

现在是 2016 年，以上大部分都是 2012 年，所以可能是 Code::Blocks 或 Widgets 的早期版本，但我发现每当我没有选择“启用 unicode”时，它都会出现无 Setup.h 文件错误。选择“启用 unicode”没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:14:09.477

您在创建项目时选择了哪个 GUI 构建器。我认为这个错误是由于 GUI builder 的选择不正确造成的。为您的项目选择

> wxformBuilder

在首选的 GUI Builder 选项中并选择

> 基于框架

在应用程序类型选项中。您可以[**在此处**](http://codeincodeblock.blogspot.com/2011/02/setup-wxwidget-in-codeblock.html)点击此链接，该链接解释了逐步设置的每一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T01:52:51.750

遇到同样的问题。

我通过在全局变量中包含 wxWidgets 的 include 和 lib 文件夹解决了这个问题[![在此处输入图像描述](../Images/90b01561e61067e553b18b7f4b5e8540.png)](https://i.stack.imgur.com/XLr7T.png)

# css - 我怎样才能布置六 s 在两行，每行三列？

> ID：12105113
> 
> 赞同：1
> 
> 时间：2012-08-24T07:41:26.287
> 
> 标签：css

我正在建立这个网站：[http ://reprezenta.us.lt/](http://reprezenta.us.lt/)

我需要的是在主页上放置 6 个帖子，两排三排，一个在另一个之上。

我设法定位了前 3 个职位。现在我需要将另外 3 个堆叠在前 3 个帖子下方的另一行中。

关于如何实现这一目标的任何想法？请注意，220px 的第一列不是帖子。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:49:17.000

有两种方法可以做到这一点：

1.  将每组 3 个 div 包装在另一个 div 中，并根据需要应用 CSS 样式。
2.  将一个类或 id 添加到第四个 div，然后对 CSS 使用 clear:both ，这样它就会将该行放在其他 3 个 div 下方（不确定这样做后您是否会让第二组 3 个 div 正确排列，只是实验）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:51:42.950

你做得对，关于帖子的浮动，这里的问题是它们都是不同的大小，所以它们不是在干净的网格中浮动，而是填充了第二个和第三个帖子 div 创建的空间，因为第一个太高了。

您需要使用 PHP 在每三个帖子之后插入一个清除元素，或者使每个帖子 div 具有相同的高度，以便它们在干净的网格上排列。

此外，您应该将第一列 (220px) 作为自己的容器，这样它就不会干扰内容网格，或者让它足够高，以便占据整个右侧。如果您要在其下放置更多内容，那么我只会给它自己的容器。

因此，您将有两个父容器，侧栏和内容。侧栏包含属于最左侧的所有元素，然后内容包含重复的帖子网格。

要查看我的意思的示例，关于帖子 div 的高度，在 style.css 的第 1512 行添加一个固定高度，它将显示需要分隔侧栏以及如何干净地浮动帖子 div。

```
.news-widget-item {
    margin-bottom: 40px;
    height: 420px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:06:37.200

您需要为`.column, .columns`选择器更改一些 CSS。目前它的：

```
float: left;
display: inline;
margin-left: 10px;
margin-right: 10px; 
```

首先，一个元素不能内联*和*浮动显示。如果您浮动某些东西，它将适应块级显示。无论如何，在你的情况下，我会尝试`inline-block`：

```
display: inline-block;
margin-left: 10px;
margin-right: 10px;
vertical-align: top; 
```

这将使元素很好地堆叠起来。它应该适用于所有现代浏览器和 IE8+，但您可能需要一些针对旧版浏览器的 CSS 技巧。

这也将包括该`newspost`元素，如果您想在外面显示它，您可以执行以下操作：

```
.newspost.columns {
    position: absolute;
    margin-left: -230px;
} 
```

然后调整容器：

```
.container {
    padding-left: 230px;
    width: 730px;
} 
```

![在此处输入图像描述](../Images/4ea301d903d88c631ad1fd70f560f990.png)

# android - Google Maps API - 标记图像的偏移量 - 替换标记 - 不在 GeoPosition

> ID：12105122
> 
> 赞同：15
> 
> 时间：2012-08-24T07:42:01.213
> 
> 标签：android, google-maps-api-3, google-maps-markers

我有一个图像（一个圆圈），应该表示一个特定的大都市区。我也有我`GeoPosition`所有相关领域的。

如果我放置标记，则图像的底部中心位于标记的`GeoPosition`. 但是因为它是鸟瞰图，所以我想给图像一个偏移量，所以我的圆形图像的**中心**`GeoPosition`就在...

任何想法如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-24T11:49:26.480

感谢*LeJared*，我找到了解决方案。我的问题是我认为它`MarkerImage`取代了`Marker`. 但是您必须先定义图像，然后将其插入到`Marker`.

**例子：**

首先定义图像：

```
var image = new google.maps.MarkerImage("some/path/image.png",
        // This marker is 20 pixels wide by 32 pixels tall.
        null, 
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 0,32.
        new google.maps.Point(75, 35)
    ); 
```

然后将其插入常规标记中：

```
 var myMarker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: image,
        title: "My Title",
    }); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-11T21:58:22.510

从 Google API 版本 3.11 开始，[`MarkerImage`被`Icon`](https://developers.google.com/maps/documentation/javascript/markers#complex_icons). 因此，这是将标记缩放到 50px 并将其定位以使其**中心**位于地理位置的新方法：

```
var image = {
        url: '/some/path/image.png',
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(25, 25),
        scaledSize: new google.maps.Size(50, 50)
    };

var myMarker = new google.maps.Marker({
      position: position,
      icon: image,
      title: 'title',
      map: map
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T09:51:54.023

您必须指定 markerImage 中的锚点在哪里。请参阅文档：[https ://developers.google.com/maps/documentation/javascript/reference?hl=de#MarkerImage](https://developers.google.com/maps/documentation/javascript/reference?hl=de#MarkerImage)

如果未指定，谷歌假设你的 markerImage 底部边缘的中心作为锚点。

这是 API 文档中的一个示例，如何使用正确的 markerImage 构建复杂的标记：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/icon-complex?hl=de](https://google-developers.appspot.com/maps/documentation/javascript/examples/icon-complex?hl=de)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-14T11:54:26.707

这是我的看法。

```
new google.maps.Marker({
  position: pos,
  map: map,
  icon: {
    url: src,
    anchor: new google.maps.Point(25, 25),
    origin: new google.maps.Point(0, 0),
    scaledSize: new google.maps.Size(50, 50)
  }
}); 
```

# php - phpscheduleit mssql 支持

> ID：12105124
> 
> 赞同：0
> 
> 时间：2012-08-24T07:42:06.080
> 
> 标签：php, sql-server-2008

**我们如何配置和使用带有 mssql 的 phpscheduleit 预订和预订系统？请给出紧急解决方案。登录后显示以下错误。**

```
MDB2_BufferedResult_mssql Object 
```

( [db] => MDB2_Driver_mssql 对象 ( [string_quoting] => 数组 ( [start] => ' [end] => ' [escape] => ' [escape_pattern] => )

```
 [identifier_quoting] => Array
            (
                [start] => [
                [end] => ]
                [escape] => ]
            )

        [db_index] => 1
        [dsn] => Array
            (
                [phptype] => mssql
                [dbsyntax] => mssql
                [username] => cgvak
                [password] => cgvak
                [protocol] => 
                [hostspec] => 172.16.0.4
                [port] => 
                [socket] => 
                [database] => 
                [mode] => 
            )

        [connected_dsn] => Array
            (
                [phptype] => mssql
                [dbsyntax] => mssql
                [username] => cgvak
                [password] => cgvak
                [protocol] => 
                [hostspec] => 172.16.0.4
                [port] => 
                [socket] => 
                [database] => 
                [mode] => 
            )

        [connection] => Resource id #182
        [opened_persistent] => 1
        [database_name] => PhpScheduleIt
        [connected_database_name] => PhpScheduleIt
        [connected_server_info] => 
        [supported] => Array
            (
                [sequences] => emulated
                [indexes] => 1
                [affected_rows] => 1
                [summary_functions] => 1
                [order_by_text] => 1
                [transactions] => 1
                [savepoints] => 
                [current_id] => emulated
                [limit_queries] => emulated
                [LOBs] => 1
                [replace] => emulated
                [sub_selects] => 1
                [auto_increment] => 1
                [primary_key] => 1
                [result_introspection] => 1
                [prepared_statements] => emulated
                [identifier_quoting] => 
                [pattern_escaping] => 1
                [new_link] => 
            )

        [options] => Array
            (
                [ssl] => 
                [field_case] => 0
                [disable_query] => 
                [result_class] => MDB2_Result_%s
                [buffered_result_class] => MDB2_BufferedResult_%s
                [result_wrap_class] => 
                [result_buffering] => 1
                [fetch_class] => stdClass
                [persistent] => 1
                [debug] => 0
                [debug_handler] => MDB2_defaultDebugOutput
                [debug_expanded_output] => 
                [default_text_field_length] => 4096
                [lob_buffer_length] => 8192
                [log_line_break] => 

                [idxname_format] => %s_idx
                [seqname_format] => %s_seq
                [savepoint_format] => MDB2_SAVEPOINT_%s
                [statement_format] => MDB2_STATEMENT_%1$s_%2$s
                [seqcol_name] => sequence
                [quote_identifier] => 
                [use_transactions] => 1
                [decimal_places] => 2
                [portability] => 127
                [modules] => Array
                    (
                        [ex] => Extended
                        [dt] => Datatype
                        [mg] => Manager
                        [rv] => Reverse
                        [na] => Native
                        [fc] => Function
                    )

                [emulate_prepared] => 
                [datatype_map] => Array
                    (
                    )

                [datatype_map_callback] => Array
                    (
                    )

                [nativetype_map_callback] => Array
                    (
                    )

                [database_device] => 
                [database_size] => 
            )

        [sql_comments] => Array
            (
                [0] => Array
                    (
                        [start] => --
                        [end] => 

                        [escape] => 
                    )

                [1] => Array
                    (
                        [start] => /*
                        [end] => */
                        [escape] => 
                    )

            )

        [wildcards] => Array
            (
                [0] => %
                [1] => _
            )

        [as_keyword] =>  AS 
        [warnings] => Array
            (
            )

        [debug_output] => 
        [in_transaction] => 
        [nested_transaction_counter] => 
        [has_transaction_error] => 
        [offset] => 0
        [limit] => 0
        [phptype] => mssql
        [dbsyntax] => mssql
        [last_query] => SELECT user_id, password, salt, legacypassword
    FROM users 
    WHERE (username = 'admin@example.com' OR email = 'admin@example.com') AND status_id = 1
        [fetchmode] => 2
        [modules] => Array
            (
                [Datatype] => MDB2_Driver_Datatype_mssql Object
                    (
                        [valid_default_values] => Array
                            (
                                [text] => 
                                [boolean] => 1
                                [integer] => 0
                                [decimal] => 0
                                [float] => 0
                                [timestamp] => 1970-01-01 00:00:00
                                [time] => 00:00:00
                                [date] => 1970-01-01
                                [clob] => 
                                [blob] => 
                            )

                        [lobs] => Array
                            (
                            )

                        [db_index] => 1
                    )

            )

        [destructor_registered] => 1
        [_debug] => 
        [_default_error_mode] => 
        [_default_error_options] => 
        [_default_error_handler] => 
        [_error_class] => PEAR_Error
        [_expected_errors] => Array
            (
            )

        [datatype] => MDB2_Driver_Datatype_mssql Object
            (
                [valid_default_values] => Array
                    (
                        [text] => 
                        [boolean] => 1
                        [integer] => 0
                        [decimal] => 0
                        [float] => 0
                        [timestamp] => 1970-01-01 00:00:00
                        [time] => 00:00:00
                        [date] => 1970-01-01
                        [clob] => 
                        [blob] => 
                    )

                [lobs] => Array
                    (
                    )

                [db_index] => 1
            )

        [loaded_version_modules] => Array
            (
                [0] => datatype
            )

    )

[result] => Resource id #187
[rownum] => -1
[types] => Array
    (
    )

[values] => Array
    (
    )

[offset] => 0
[offset_count] => 0
[limit] => 0
[column_names] => 
```

)

错误 01

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:22:48.767

PHPSchedule 对 mssql 的支持较少。您不能使其与 mssql 即插即用，但可以在主要部分进行一些修改。

这是他们支持论坛的链接。他们可以帮助你。

[http://www.php.brickhost.com/forums/](http://www.php.brickhost.com/forums/)

谢谢，

哈利

[http://innovativewebz.com/](http://innovativewebz.com/)

# javascript - 使用外部js提交表单

> ID：12105127
> 
> 赞同：1
> 
> 时间：2012-08-24T07:42:09.890
> 
> 标签：javascript

如何使用外部 js 提交表单？使用表单名称或 id 不起作用，显示此错误 TypeError: document.forms.adminForm.submit is not a function

> document.forms["adminForm"].submit();

adminForm 是表单的名称和 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:54:06.163

> TypeError：document.forms.adminForm.submit 不是函数

表示您将提交按钮或其他元素命名为“提交”。将按钮重命名为其他名称，您的代码将起作用。

# iphone - 使用模数和指数在目标 c 中加密

> ID：12105129
> 
> 赞同：0
> 
> 时间：2012-08-24T07:42:34.920
> 
> 标签：iphone, objective-c

实际上我正在尝试调用一个使用我自己的模数和指数的方法，但是在下面给定的方法中我得到了一个无效的参数异常。

```
- (NSData *)PublicKeyItems

{      
    NSString *exp = @"010001";
    NSLog(@"Publickeyexp - %@",exp);
    NSData *publickeyexpdata= [self stringasdata:exp];
    NSLog(@"publickeyexpdata = %@",publickeyexpdata);
    NSString *mod = @"008903fb6d15f352ed3b45add3216f632f7139954a5631337aba7d645ed38482e3a810b4db26aab4d1df58c147230f0c75631a3dd0554b50de44e79f4fcf205c89fd3f80e0ff8d16c2e9f56ed3ab177953d54c9c30357d04e677cedd9912906ef8a046d7b0185b7f2022a8e435b0c6ecaef93f089fc3aa3f3677550b5d842046c7";
    NSLog(@"Publickeymod -%@",mod);
    NSData *publickeymoddata= [self stringasdata:mod];
    NSLog(@"publickeymod = %@",publickeyexpdata);

    NSMutableArray *publicarray = [[[NSMutableArray alloc] init]autorelease];
    [publicarray addObject:publickeyexpdata];
    [publicarray addObject:publickeymoddata];

    NSData *testData = [publicarray berData];
    NSLog(@"testdata = %@",testData);
    NSMutableArray *testArray2 = [testData berDecode];
    NSLog(@"testarray = %@",testArray2);

    NSData *testData2 = [testArray2 berData];
    NSLog(@"PublicKeyData using Publickeyitems = %@",testData2);
    return testData2;
} 
```

我得到的例外是

> “由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[__NSArrayM berData]：无法识别的选择器发送到实例 0x6c49050'”

. 我想公共数组无法获取 berdata。

# string - 在 Scala 中为字符串生成频率图

> ID：12105130
> 
> 赞同：28
> 
> 时间：2012-08-24T07:42:42.140
> 
> 标签：string, scala, map

假设我有一个字符串“hello”，我想生成一个字符频率图：

```
Map[Char,Int] = Map(h -> 1, e -> 1, o -> 1, l -> 2) 
```

我可以迭代地做到这一点：

```
val str = "hello"
var counts = new scala.collection.mutable.HashMap[Char,Int]
for (i <- str) {
    if (counts.contains(i))
        counts.put(i, counts(i) + 1)
    else
        counts.put(i, 1)
} 
```

通过在 REPL 中搞乱，我发现我可以做一些更简洁的事情，而不是使用可变集合：

```
> str.groupBy(_.toChar).map{ p => (p._1, p._2.length)}
scala.collection.immutable.Map[Char,Int] = Map(h -> 1, e -> 1, o -> 1, l -> 2) 
```

但我不知道 groupBy() 的性能特征，也不知道传递给 map 的块中发生了什么（比如 p 到底是什么）。

我如何使用 Scala 中的函数范式惯用地做到这一点？

* * *

作为背景，我只是第一次从 Ruby 来到 Scala。在 Ruby 中，我会使用`inject`，但我不确定在 Scala 中的并行方式是：

```
counts = str.each_byte.inject(Hash.new(0)){ |h, c| h[c] += 1; h} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-24T08:06:35.833

## 1) 是什么`p`意思？

`groupBy`接受一个将元素映射到类型键的函数`K`。当在某个集合上调用时`Coll`，它返回一个`Map[K, Coll]`包含从键`K`到映射到同一键的所有元素的映射。

因此，在您的情况下，生成从键（这是一个字符）到包含所有元素（字符）的字符串`str.groupBy(_.toChar)`的映射映射，例如. 你得到这个：`k``c``k == c.toChar`

```
Map(e -> "e", h -> "h", l -> "ll", o -> "o") 
```

A`Map`是键和值对的可迭代对象。在这种情况下，每一对都是一个字符和一串元素。调用`map`a 上的操作`Map`涉及到这些对上的映射 -`p`是一对，其中`p._1`是一个字符，并且`p._2`是关联的字符串（您可以在其上调用`length`，就像上面所做的那样）。

## 2）如何习惯性地做到这一点

以上是如何惯用地做到这一点 - 使用`groupBy`and `map`。或者，您可以使用不可变映射和字符串长度上的递归来计算频率，或者使用不可变映射和`foldLeft`.

## 3) 性能特点

最好进行[基准测试](http://docs.scala-lang.org/overviews/parallel-collections/performance.html)以查看差异。这里有几个用于高度重复字符串的微基准测试（~3GHz iMac、JDK7、Scala 2.10.0 nightly）：

```
object Imperative extends testing.Benchmark {
  val str = "abc" * 750000

  def run() {
    var counts = new scala.collection.mutable.HashMap[Char,Int]
    var i = 0
    val until = str.length
    while (i < until) {
      var c = str(i)
      if (counts.contains(c))
        counts.put(c, counts(c) + 1)
      else
        counts.put(c, 1)
      i += 1
    }

    //println(f)
  }
}

object Combinators extends testing.Benchmark {
  val str = "abc" * 750000

  def run() {
    val f = str.groupBy(_.toChar).map(p => (p._1, p._2.length))
  }
}

object Fold extends testing.Benchmark {
  val str = "abc" * 750000

  def run() {
    val f = str.foldLeft(Map[Char, Int]() withDefaultValue 0){(h, c) => h.updated(c, h(c)+1)}
  }
} 
```

结果：

*   至关重要的：`$ 103 57 53 58 53 53 53 53 53 53`

*   组合器：`$ 72 51 63 56 53 52 52 54 53 53`

*   折叠：`$ 163 62 71 62 57 57 57 58 57 57`

请注意，将命令式版本更改为使用`withDefaultValue`：

```
var counts = new scala.collection.mutable.HashMap[Char,Int].withDefaultValue(0)
var i = 0
val until = str.length
while (i < until) {
  var c = str(i)
  counts.put(c, counts(c) + 1)
  i += 1
} 
```

`put`由于转发每个呼叫，显然非常慢：

*   `withDefaultValue`：`$ 133 87 109 106 101 100 101 100 101 101`

结论：在这种情况下，字符的装箱和拆箱足够高，因此很难观察到这些方法之间的性能差异。

编辑：

更新：您可能希望使用[ScalaMeter 内联基准测试](https://scalameter.github.io/home/gettingstarted/0.7/inline/)来代替`Benchmark`trait。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-24T08:26:03.923

扩展阿克塞尔的答案。

您的`groupBy`解决方案已经可用。对其进行了微小的修正，可以使其更清洁：

```
str.groupBy(_.toChar).mapValues(_.size) 
```

Scala 的替代方案`inject`是`foldLeft`, `foldRight`, `reduce`，`reduceOption`具体取决于您如何使用它。您`inject`在 Ruby 中使用的方式不是函数式的，因为您的解决方案是基于变异的`h`，而在函数式世界中，可变性是“不行的”。以下是您如何在 Scala 中以接近您`inject`但功能风格的方式执行解决方案：

```
str.foldLeft( Map[Char, Int]() ){ (m, c) => m + (c -> (m.getOrElse(c, 0) + 1)) } 
```

显然`groupBy`看起来好多了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-24T08:26:00.693

您在 ruby​​ 上的示例几乎可以使用`foldLeft`和 immutable直接转换为 Scala `Map`。

这是可能的解决方案之一：

```
str.foldLeft(Map[Char, Int]() withDefaultValue 0){(h, c) => h.updated(c, h(c)+1)} 
```

实际上，如果你对局部可变性没问题，你可以做这样的事情：

```
def charFrequencies(str: String): collection.Map[Char, Int] = {
  val hash = collection.mutable.HashMap.empty[Char, Int] withDefaultValue 0
  str foreach { hash(_) += 1 }
  hash
} 
```

表达式`hash(_) += 1`将被脱糖到`c => hash(c) = hash(c) + 1`，然后到`c => hash.update(c, hash.apply(c) + 1)`

此解决方案应该比功能解决方案更有效，因为它不会创建中间集合。同样因为方法返回 immutable `collection.Map[Char, Int]`，结果将被视为不可变（只要没有人对其执行不安全的向下转换）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-06T10:16:37.270

从 开始`Scala 2.13`，我们可以使用[`groupMapReduce`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/WrappedString.html#groupMapReduce[K,B](key:A=%3EK)(f:A=%3EB)(reduce:(B,B)=%3EB):scala.collection.immutable.Map[K,B])（顾名思义）等效于 a和 reduce 步骤的`groupBy`方法：`mapValues`

```
"hello".groupMapReduce(identity)(_ => 1)(_ + _)
// immutable.Map[Char,Int] = Map(e -> 1, h -> 1, l -> 2, o -> 1) 
```

这：

*   `group`**s 个字符（组**MapReduce的组部分）

*   `map`s 每个分组值出现为 1（映射组**Map** Reduce 的一部分）

*   `reduce`s 值在一组值 ( `_ + _`) 中，通过对它们求和（减少 groupMap **Reduce**的一部分）。

这是一次通过以下字符序列[执行](https://github.com/scala/scala/blob/v2.13.0-M5/src/library/scala/collection/Iterable.scala#L604)的等效版本：

```
"hello".groupBy(identity).mapValues(_.map(_ => 1).reduce(_+_)) 
```

# php - 致命错误：当不在 pdo 包装类的对象上下文中时使用 $this

> ID：12105135
> 
> 赞同：0
> 
> 时间：2012-08-24T07:43:21.823
> 
> 标签：php, mysql, pdo

我在我的 php 应用程序中使用[simpleSQL - PDO](http://blog.csdn.net/btbdylq/article/details/6826225)类，
并通过以下代码使用：

```
$where['username']=$_POST['username'];
$where['password']=md5($_POST['password']);

$DB = new DB();
$res=$DB->buildQuery('tbl_admin',$where); 
```

它在 localhost 中运行良好，但在在线服务器中出现以下错误：

```
Fatal error: Using $this when not in object context in DB.php on line 230 
```

行号 DB类中的230是：

```
$ item  = $ this- > instance- > quote ($ this- > escape ($ item)); 
```

我的问题在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:24:21.297

这是课堂上的一个错误。

在`buildQuery`方法中：

```
array_walk($where,'DB::prepareDbValues'); 
```

这会静态调用该`prepareDbValues`方法（因此，不在对象上下文中 ->`$this`未定义）。要解决此问题，请将其替换为

```
array_walk($where,array($this, 'prepareDbValues')); 
```

并将错误和修复报告给班级的作者。

# iphone - 如何在 iphone 中使用 MFMailcomposer 在电子邮件中附加 m4v 视频

> ID：12105144
> 
> 赞同：0
> 
> 时间：2012-08-24T07:43:46.487
> 
> 标签：iphone

我正在使用此代码，但它没有发送带有视频的邮件，这是我的代码：

```
MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];  
        controller.mailComposeDelegate = self;  
        [controller setSubject:@"My Subject"];  
        [controller setMessageBody:@"" isHTML:NO]; if (controller) [self presentModalViewController:controller animated:YES];  
        [controller release];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:titleString];

        NSLog(@"datapath=%@",dataPath);

        NSURL *url=[[NSURL alloc] initFileURLWithPath:dataPath];

        NSLog(@"url..%@",url);

        NSData *data=[[NSData alloc]initWithContentsOfURL:url ];

  [controller addAttachmentData:data mimeType:@"video/quicktime" fileName:titleString]; 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:58:34.843

这是代码

```
-(void)displayComposerSheet 
{
  MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
  picker.mailComposeDelegate = self;

 [picker setSubject:@"Subject Name"];

// Set up recipients
NSArray *toRecipients = [NSArray arrayWithObject:emailsenderaddress]; 
NSArray *ccRecipients = [NSArray arrayWithObjects:@"", @"", nil]; 
NSArray *bccRecipients = [NSArray arrayWithObject:@""]; 

[picker setToRecipients:toRecipients];
[picker setCcRecipients:ccRecipients];  
[picker setBccRecipients:bccRecipients];

// Attach an file to the email

// Fill out the email body text
NSString *emailBody = [NSString stringWithFormat:@""];
[picker setMessageBody:emailBody isHTML:NO];

NSArray *documentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *saveDirectory = [documentPath objectAtIndex:0];

NSString *saveFileName = [NSString stringWithFormat:@"fileNmae%@.m4v",[invoiceidarray objectAtIndex:OptionView.tag]];

NSString *finalPath = [saveDirectory stringByAppendingPathComponent:saveFileName];

NSData *pdfData = [NSData dataWithContentsOfFile:finalPath];
[picker addAttachmentData:pdfData mimeType:@"application/m4v" fileName:saveFileName];
[self presentModalViewController:picker animated:YES];
[picker release]; 
```

}

# python - 我怎样才能有一个带有内联模型表单的模型表单集？

> ID：12105146
> 
> 赞同：1
> 
> 时间：2012-08-24T07:43:55.847
> 
> 标签：python, django, django-forms

假设我有一个模型：

```
class Team(models.Model):
    name = models.CharField(max_length=20)

class Game(models.Model):
    title = models.CharField(ma_length=20)
    home_team = models.ForeignKey(Team)
    away_team = models.ForeignKey(Team) 
```

然后在我看来，我有：

```
def manage_games(request):
     GameFormSet = modelformset_factory(Game, extra=1)
     game_forms = GameFormSet(request.POST or None,
                                 queryset=Game.objects.all())
     if request.method == "POST":
         if game_forms.is_valid():
            game_forms.save()
            game_forms = GameFormSet(queryset=Game.objects.all())                 

     return render(request, "admin_dashboard/manage_games.html", locals()) 
```

这可以正常工作，除了我希望能够将`home_team`and`away_team`变成 CharFields（而不是现在的下拉菜单），同时还能将它们保持为单独的模型。如何将内联模型表单集添加到模型表单集中以使其成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:48:35.550

内联模型表单集不起作用，因为 Game 有外键团队。

inlinemodelformset 可以显示通过 ForeignKey 连接到另一个模型的表单列表。例如，如果 Ab 是 B 的 FK，则可以为 B 制作 A 的内联模型形式集。

但是，您仍然可以添加几个字段来更改主/客队名称：

```
from django import forms

from models import Team, Game    

class GameUpdateForm(forms.ModelForm):
    home_team_name = forms.CharField(max_length=20)
    away_team_name = forms.CharField(max_length=20)

    def save(self):
        obj = super(GameForm, self).save()

        if not obj.home_team_id:
            obj.home_team = Team()
        obj.home_team.name = self.cleaned_data.get('home_team_name')
        obj.home_team.save()

        if not obj.away_team_id:
            obj.away_team = Team()
        obj.away_team.name = self.cleaned_data.get('away_team_name')
        obj.away_team.save()

        return obj
    class Meta:
        model = Game
        exclude = ('home_team', 'away_team') 
```

并让modelformset使用它：

```
GameFormSet = modelformset_factory(Game, form=GameForm, extra=1) 
```

您可能还想添加[CharField 自动](http://www.djangopackages.com/grids/g/auto-complete/)补全。

# git - git push " 远端意外挂断 "

> ID：12105147
> 
> 赞同：4
> 
> 时间：2012-08-24T07:43:55.977
> 
> 标签：git, branch, push, master, linode

我在本地存储库中创建了一个新分支，经过一些提交后，我想将其推送到远程存储库。

> git push origin new_branch

我有这个错误：

> $ git push origin new_branch
> 
> 计数对象：32，完成。
> 
> Delta 压缩最多使用 2 个线程。压缩对象：100% (18/18)，完成。
> 
> 写入对象：100% (18/18)，5.29 KiB，完成。总计 18 个（增量 13），重复使用 0 个（增量 0）
> 
> 写入失败：管道损坏
> 
> 致命：远端意外挂断
> 
> 致命：远端意外挂断

当我使用 $ git remote -v

> 起源 git@106.187.99.99:XXX.git (fetch)
> 
> 来源 git@106.187.99.99:XXX.git（推送）

git 分支

```
fiberead_com$ git branch -a
* new_branch
  master
  remotes/origin/HEAD -> origin/master
  remotes/origin/dev
  remotes/origin/master
  remotes/origin/online 
```

nginx.conf

```
user www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
    # multi_accept on;
}

http {
    include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
#    keepalive_timeout  65;
client_header_timeout 3m;
client_body_timeout 3m;
keepalive_timeout 175 120;
client_max_body_size 35m;

    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

有人可以帮我吗？

我的 git 服务器在 Linode 中。我使用 GITLAB 并且其他项目没有这个问题。只有一个新项目，我使用 'git clone' 来拉我的电脑。但是当我推送代码时，发生了错误。

我使用 Nginx。

而我使用'$ git push origin master'，也有同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:35:32.513

这意味着负责监听请求的 http 服务器（这里是 git push over http）未能完成。

*   要么是因为服务器上的问题：
    只有所述http服务器的日志包含根本原因（例如，消息太大而服务器无法处理，或者是正确的问题，或者......）。
    这些日志可以在`etc/httpd/httpd.conf`（Apache）或`/var/log/nginx/error.log`（[NGiNX](http://nginx.org/)）中，甚至在 gitlab 本身中。

*   或者因为它从未收到过请求，[OP jesktop](https://stackoverflow.com/users/1023020/jesktop)在这里确认是这种情况：

> 我找到了所有的日志，但错误日志是空的。
> 问题是网络。因为我在中国，这里有专门的网络。
> 所以VPN可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:27:54.097

试试这个：

```
git push origin feature/new_branch 
```

并检查连接是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-09T00:16:03.680

来自谷歌的人：六年后，这仍然会定期发生。当我无意中提交了一个非常大的二进制文件（等）时，我已经看到了这种情况。删除二进制文件并重新提交以解决问题是不够的；由于 Git 的工作方式，最初包含它的提交仍然存在，因此大小也存在。解决方案是彻底改变有问题的提交。

一旦我确定了一个错误的提交作为原因，每次发生这种情况时的解决方案都变得清晰：`git bisect`. 这对我来说可能每年出现一次或两次，并不总是因为文件很大。一旦您排除了网络问题，正如此处的其他答案正确指出的那样，我的解决方案总是相同的 - 平分，删除有问题的提交，然后您将能够推送。

# php - 为什么我引用的文字会出现“像这样”？

> ID：12105150
> 
> 赞同：0
> 
> 时间：2012-08-24T07:44:08.643
> 
> 标签：php, magic-quotes-gpc

> **可能重复：**
> [“每个引用前的斜线”问题](https://stackoverflow.com/questions/3006407/slash-before-every-quote-problem)

我使用如下代码在我的 php 应用程序的不同部分之间传递消息：

```
$msg='"'.$_REQUEST['site'].'" modified.';
header('Location: sites.php?msg='.$msg);
exit(); 
```

在另一端获取它的代码如下所示：

```
<?php if (isset($_GET['msg'])) {echo '<p><em>'.$_GET['msg'].'</em></p>';}?> 
```

在我的开发环境中，输出如下所示：`"Some site"`已修改。在我的生产环境中，输出如下所示：`\"Some site\"`已修改。

这使我相信这是`php.ini`环境之间设置的差异。我一直在寻找，直到我的眼球起泡，但我找不到区别。url 中传递的内容如下所示：

```
sites.php?msg="Some site" modified 
```

如果我把这段代码：

```
$msg=htmlspecialchars($msg); 
```

在上面的变量赋值和标头调用之间，url 如下所示：

```
sites.php?msg=&quot;Some site&quot; modified. 
```

但在这两种环境中都不会显示任何消息。`$_REQUEST['site']`如果包含＆符号，我也有类似的问题。

谁能解释这里发生了什么，以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:46:53.623

该配置称为[magic_quotes_gpc](http://www.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:49:54.117

您已`Magic Quotes`在 PHP.INI 中启用将它们设置为禁用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T07:46:19.527

使用stripslashes：[http://php.net/manual/en/function.stripslashes.php](http://php.net/manual/en/function.stripslashes.php)

```
<?php if (isset($_GET['msg'])) {echo '<p><em>'.stripslashes($_GET['msg']).'</em></p>';}?> 
```

# android - SharedPreferences 如何以编程方式添加消息或如何以编程方式在显示屏上添加文本

> ID：12105151
> 
> 赞同：1
> 
> 时间：2012-08-24T07:44:09.217
> 
> 标签：android

在 SharedPReferences 我有一些 ListPreference 与值数组。

例子：

```
<ListPreference
            android:entries="@array/list_of_languages"
            android:entryValues="@array/list_of_languages_values"
            android:key="list_of_languages"
            android:summary="@string/desc_language_specified"
            android:title="@string/title_language_specified"
            android:defaultValue="en_US" /> 
```

如果我选择不支持的语言“中国”，我可以写一些消息来显示不支持这种语言吗？或者甚至更好地将文本添加到 SharedPreference preference.xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:53:48.653

您始终可以注册一个[首选项更改侦听](http://developer.android.com/reference/android/preference/Preference.html#setOnPreferenceChangeListener%28android.preference.Preference.OnPreferenceChangeListener%29)器`ListPreference`，如果不支持，您可以在回调中将其设置回默认值。

# oop - 依赖注入容器 - 工厂模式

> ID：12105155
> 
> 赞同：7
> 
> 时间：2012-08-24T07:44:19.293
> 
> 标签：oop, design-patterns, dependency-injection, factory-pattern

我一直在尝试了解依赖注入，并且一直在阅读并尝试编写一个类似于此的小型依赖注入容器：http: [//fabien.potencier.org/article/12/do-you-need-a-dependency -注入容器](http://fabien.potencier.org/article/12/do-you-need-a-dependency-injection-container)

让我困惑的一件事是：

依赖注入容器不只是工厂模式的美化实现吗？

如果是这样，为什么不这么称呼它，为什么需要一个花哨的术语只是为了混淆事情。

如果不是，有人可以解释我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T08:00:09.950

您必须将依赖注入和控制反转分开。

**依赖注入**是将依赖注入到类中，而不是让类本身负责其依赖。

**控制反转**是指某些东西控制了对象及其生命周期。在这种情况下，由容器决定何时以及如何创建和处置对象。

**工厂模式**都是关于在每次调用时创建一个新对象。模式本身并没有说明应该如何创建依赖关系。

这就是为什么您可以配置不同的生命周期并使用子容器来控制生命周期有限的对象。

我在这里写了一篇关于这个的文章：http: [//www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci](http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci)

或者，如果您想查看更多示例： http: [//www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container](http://www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container)

# c# - xml节点父ID c#

> ID：12105161
> 
> 赞同：1
> 
> 时间：2012-08-24T07:44:50.027
> 
> 标签：c#, xml

我正在尝试从模板中复制一些 xml 节点以将它们放置在另一个 xml 中。xml的结构如下。

```
<grandparent>
    <parent>
        <children>
            <grandchildren/>
        </children>
        <children>
            <grandchildren/>
        </children>
        <children>
            <grandchildren/>
        </children>
    </parent>
    <parent>
        <children>
            <grandchildren/>
            <grandchildren/>
            <grandchildren/>
        </children>
        <children>
            <grandchildren/>
            <grandchildren/>
            <grandchildren/>
        </children>
        <children>
            <grandchildren/>
            <grandchildren/>
            <grandchildren/>
        </children>
    </parent>
</grandparent> 
```

我是否有可能遍历第二个父母和选定的孩子并抓住所有的孙子？并将所有的孙子插入另一个 xml 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:00:44.977

你可以这样做：

```
 string input = @"<grandparent>
            <parent>
                <children>
                    <grandchildren/>
                </children>
                <children>
                    <grandchildren/>
                </children>
                <children>
                    <grandchildren/>
                </children>
            </parent>
            <parent>
                <children>
                    <grandchildren id=""1""/>
                    <grandchildren id=""2""/>
                    <grandchildren id=""3""/>
                </children>
                <children>
                    <grandchildren id=""4""/>
                    <grandchildren id=""5""/>
                    <grandchildren id=""6""/>
                </children>
                <children>
                    <grandchildren id=""7""/>
                    <grandchildren id=""8""/>
                    <grandchildren id=""9""/>
                </children>
            </parent>
        </grandparent>";

        XDocument doc = XDocument.Parse(input);
        // Use XDocument.Load method to load XML content from file
        //XDocument doc = XDocument.Load(<filepath>);

        IEnumerable<XElement> elements = doc
            .Root
            .Elements("parent")
            .ElementAt(1)
            .Descendants("grandchildren");

        XElement rootElement = new XElement("rootElement");
        rootElement.Add(elements);

        rootElement.Save(@"C:\Doc2.xml"); 
```

我认为您发布的 XML 不仅仅是一个片段，而是您希望解析的整个 XML 内容。这里棘手的部分是您通过它的序号访问元素，它应该通过`parent`元素上的某种 ID 属性来完成，因此可以通过比较它的 ID 而不是使用`ElementAt`根据它的序号位置检索元素的方法来访问它. 我添加了`id`属性，`grandchildren`因此可以看到`grandchildren`元素属于第二个`parent`元素，而不是第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:12:32.643

```
 XElement doc = XElement.Load("c:\\yourXML.xml");
 XElement newdoc = new XElement("GrandChildren");
 foreach (XElement x in doc.Descendants("parent").Skip(1).Descendants("children").Descendants("grandchildren"))
 {
       newdoc.Add(x);
 } 
```

newDoc 现在包含您所需的 XML..

# java - Java Joda Time - 下载和安装 - 一步一步

> ID：12105164
> 
> 赞同：23
> 
> 时间：2012-08-24T07:44:51.577
> 
> 标签：java, jodatime

我无法让 Joda Time 安装和工作。

周围的大多数说明都假设有一定的知识。

有人可以假设我一无所知并逐步指导我将 Joda Time zip 文件放在哪里，我要提取它吗？如何使用 eclipse 正确添加它以及如何将它导入到类文件中。

非常感谢！:)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-24T08:06:32.600

1.  在eclipse中创建你的java项目
2.  下载最新的[JodaTime](https://github.com/JodaOrg/joda-time/releases) `.tar.gz`文件，并提取其内容
3.  在 Eclipse 中，在包资源管理器中查找您的项目，然后右键单击它然后调用它`New -> Folder -> libs`
4.  将 joda-time-2.1.jar 复制/拖动到新创建的 libs 文件夹中
5.  再次右键单击您的项目（在包资源管理器中）然后`Properties -> Java Build Path -> Libraries -> Add Jars -> joda-time-2.1.jar`
6.  现在您可以使用以下代码进行测试：

    `DateTime test = new DateTime();`

如果代码编译正常，你就可以走了

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T07:56:12.580

来自文档：http: [//joda-time.sourceforge.net/installation.html](http://joda-time.sourceforge.net/installation.html)

“下载将包含 joda-time jar 文件。将其添加到类路径后，您将能够使用 Joda-Time。”

意思是：

1.  您必须解压缩您下载的 zip 文件。
2.  它是无所谓的，你把 zip 的内容放在哪里
3.  您必须将 jar 文件（位于 zip 中）添加到项目的类路径中。在 Eclipse 中：右键单击项目/配置构建路径/添加 JAR

将 JAR 添加到类路径后，您可以在自己的任何类中使用它。您只需要导入您正在使用的 Joda 类。例如：

```
import org.joda.time.DateTime; 
```

保持

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T07:54:11.740

*   [下载](http://sourceforge.net/projects/joda-time/files/joda-time/2.1/)压缩文件
*   将其解压缩到选择的目录中
*   当你编译和运行你的程序时，确保`joda-time-2.1.jar`文件在你的类路径中

类路径是 Java 工具（如编译器 ( `javac`) 和启动器 ( `java`) 用于查找编译`*.class`文件的目录和 JAR 文件的集合）。如果您不知道如何操作，请参阅[设置类路径。](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/classpath.html)

对于 Eclipse：右键单击您的项目，选择 Properties。选择“Java 构建路径”。单击“添加外部 JAR...”。选择文件`joda-time-2.1.jar`，点击打开，确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T07:54:21.387

1.  解压并将主 jar 文件复制到您机器上的某个位置
2.  按照[这些说明](http://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project%27s_classpath%3F)在 Eclipse 中将库（jar 文件）添加到您的项目中
3.  `import`您可以通过在类文件的开头添加相关语句来开始使用 jodatime （或者只需键入`DateTime`例如，然后 CTRL+SPACE 和 eclipse 应该为您添加导入）。

# cron - 基本的 crontab 不工作

> ID：12105168
> 
> 赞同：0
> 
> 时间：2012-08-24T07:45:19.723
> 
> 标签：cron, crontab, cron-task

我正在尝试创建一个示例 cron 作业。

首先，我使用以下方法编辑了 crontab：

```
crontab -e 
```

然后我添加了这一行，以便每分钟在我家创建一个测试文件夹：

```
1 * * * * mkdir -p /home/<myusername>/foo/ 
```

然后我确保 cron 正在运行：

```
root       913     1  0 Aug22 ?        00:00:00 cron 
```

但是，如果我尝试重新启动它（或停止它）：

```
restart cron 
```

我收到以下错误消息：

> restart：拒绝发送消息，匹配规则1条；type="method_call", sender=":1.73" (uid=1000 pid=17887 comm="restart cron") interface="com.ubuntu.Upstart0_6.Job" member="Restart" error name="(unset)" requested_reply="0" 目的地="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init")

还有未创建的测试文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:48:22.197

这个 cronjob 每小时执行一次。第一个字段是分钟。试着在里面放一颗星星。

# java - SVN 颠覆。蚀。本地存储库

> ID：12105170
> 
> 赞同：1
> 
> 时间：2012-08-24T07:45:38.373
> 
> 标签：java, eclipse, svn, subversive

我们有一个中央 svn 存储库，我们可以在其中签入和提交新代码。但我不想将每一个小改动都提交到中央存储库。所以我想用 Subversive SVN 创建一些本地存储库，我可以用它来临时提交（一些小错误修复等）。它只是为了我，为了舒适，例如：我在 2 个实现中创建了新功能，但我仍然不知道哪个实现提交到中央仓库，但将来我会提交其中一个。所以我需要在本地保存这两种实现的代码。

那么如果可以使用颠覆性的 SVN 创建本地存储库，该怎么做呢？或者可能出于我的目的存在其他一些更优雅的解决方案？

编辑：当我使用 Mercurial 时，我从使用 Central(remote) repo 和本地 repo 中受益（这样我就可以在本地提交每个小的大修复，并将项目的每个“大”更改都提交到中央 repo）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:01:45.237

我同意 Valentin 的观点：SVN 没有提供任何机制来分离本地提交和远程提交。但 GIT 确实如此，而且完全是这样设计的。

不幸的是，您似乎在一个小组中工作，也许您对版本控制系统没有任何选择。在这种情况下，可以在同一目录上共享一个 GIT 和一个 SVN 存储库。GIT 将帮助您拥有一个本地存储库，您将能够在其中提交更改、创建分支等等......并且您将在远程 SVN 存储库上提交重大更改。

这个解决方案效果很好。您只需将 .git 目录添加到 SVN 忽略文件中，并将 .svn 目录添加到 GIT 忽略文件中。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:08:56.227

Git 非常智能，您可以将 git 连接到 svn 存储库。使用命令：

```
git-svn clone -s http://example.com/my_subversion_repo local_dir 
```

阅读详细教程：http: [//viget.com/extend/effectively-using-git-with-subversion](http://viget.com/extend/effectively-using-git-with-subversion)

# javascript - 使用javascript的反斜杠到正斜杠

> ID：12105172
> 
> 赞同：3
> 
> 时间：2012-08-24T07:46:11.530
> 
> 标签：javascript, string, replace

我想在 javascript 字符串中用“/”替换“\”。

```
var p = "D:\upload\date\csv\sample.csv"; 
```

到：

```
var p = "D:/upload/date/csv/sample.csv"; 
```

但是我在第一行本身就出错了。“SyntaxError：格式错误的 Unicode 字符转义序列”。

这该怎么做 ？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:49:07.737

第一个应该是`var p = "D:\\upload\\date\\csv\\sample.csv";`

单曲`\`是为了逃避（或其他东西）。在您的情况下，这`\upload`是一个问题，因为它`\u`会指示一个 unicode 字符。

要替换，请使用：`p = p.replace(/\\/g, '/');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:49:04.873

```
var p = 'D:\\upload\\date\\csv\\sample.csv';
p = p.replace(/\\/g, '/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:50:22.980

还

```
p=p.split("\\").join("/"); 
```

# winforms - 选择文本属性外部时，RichTextBox SelectionLength 为零

> ID：12105174
> 
> 赞同：0
> 
> 时间：2012-08-24T07:46:15.340
> 
> 标签：winforms, richtextbox

我正试图围绕 WinForms RichTextBox 中的一种行为。

当您使用 RichTextBox 并选择 RichTextBox 的右端时，可以通过按住 shift 并向右推来选择右侧的附加字符。

真正让我难以置信的是 RichTextBox 的 SelectionLength 属性为 0。如果您从视觉上看它，您似乎选择了从当前文本末尾开始的 1 个字符长度。如果您查看 curSelStart 和 curSelEnd 属性，则 curSelStart 从您的 Text 属性的末尾开始，并且 curSelEnd 超出它的一个字符。

我们正在使用我们自己的 Winforms RichTextBox 子类，该子类实现了所有特殊行为方式，其中我们假设如果按选择长度为 0 的退格键，您将删除一个字符。在这种情况下，这个假设不再成立，因为按下退格键只会删除您当前的选择。

关于它为什么会这样表现的任何想法？有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:28:00.427

当我们开始使用启用了 MultiLine 的自定义 RichTextBox 控件时，这种行为开始给我们带来麻烦。因此，这从我观察到的奇怪行为升级为我必须解决的错误。

RichTextBox 如何处理换行符似乎是一个怪癖。在每一行的末尾总会有一个 '\n' 字符。那就是我在上面的问题中描述的神秘人物。如果您尝试将其删除，它将立即被读取。

有了这个知识，我可以检查属性 SelectedText 是否以 '\n' 字符结尾，如果我插入的新文本不包含 '\n' 我会确定我需要在我的偏移量中添加一个额外的字符需要我的自定义控件。

我不敢相信我之前没有注意到'\n'。哦，好吧..问题现在解决了。

# java - 在线程中的 JDialog 中显示不确定的进度条并在另一个线程中同时运行任务

> ID：12105182
> 
> 赞同：4
> 
> 时间：2012-08-24T07:46:51.327
> 
> 标签：java, multithreading, swing, concurrency, runnable

当用户单击按钮时，将运行大约 10 秒的长任务。在此期间，我想向用户显示进度条。但是主线程必须等待工作线程完成，因为工作线程将设置一个主线程将使用的变量。如果我不等待工作线程，我会`NullPointerException`在使用变量时得到一个。所以在工作线程完成后，我也会关闭进度条对话框。

`join()`当我使用进度条对话框等待工作线程时（有趣的是没有进度条）并挂在那里。

```
Thread runnable = new Thread() {

    public void run() {
        try {
            System.out.println("thread basladi");
            threadAddSlaveReturnMessage = request.addSlave(
                ipField.getText(), passField.getText(), 
                nicknameField.getText());
            System.out.println("thread bitti");

        } catch (LMCTagNotFoundException e) {
            e.printStackTrace();
        }

    }
};

Thread runnable_progress = new Thread() {

    public void run() {

        JTextArea msgLabel;
        JDialog dialog;
        JProgressBar progressBar;
        final int MAXIMUM = 100;
        JPanel panel;

        progressBar = new JProgressBar(0, MAXIMUM);
        progressBar.setIndeterminate(true);
        msgLabel = new JTextArea("deneme");
        msgLabel.setEditable(false);

        panel = new JPanel(new BorderLayout(5, 5));
        panel.add(msgLabel, BorderLayout.PAGE_START);
        panel.add(progressBar, BorderLayout.CENTER);
        panel.setBorder(BorderFactory.createEmptyBorder(11, 11, 11, 11));

        dialog = new JDialog(Frame.getFrames()[0], "baslik", true);
        dialog.getContentPane().add(panel);
        dialog.setResizable(false);
        dialog.pack();
        dialog.setSize(500, dialog.getHeight());
        dialog.setLocationRelativeTo(null);
        dialog.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
        dialog.setAlwaysOnTop(false);
        dialog.setVisible(true);
        msgLabel.setBackground(panel.getBackground());
    }
};

runnable.start();
System.out.println("runnable start");
runnable_progress.start();
System.out.println("progress start");
runnable.join();
System.out.println("runnable join");
runnable_progress.join();
System.out.println("progress join");

if (threadAddSlaveReturnMessage.equalsIgnoreCase("OK")) {
    fillInventoryTable(inventoryTable);
    JOptionPane.showMessageDialog(this, messages.getString("centrum.addslavepanel.SUCCESS"), null, JOptionPane.INFORMATION_MESSAGE);
} 
```

> “进度加入”

没有被打印出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:10:51.390

您可以在此处使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。一个简短的例子：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.godel.nio;

import java.awt.BorderLayout;
import java.util.List;
import javax.swing.*;

/**
 *
 * @author internet_2
 */
public class Test {

    public static void main(String[] args) {
        new Test().doJob();
    }

    public void doJob() {

        JTextArea msgLabel;
        JProgressBar progressBar;
        final int MAXIMUM = 100;
        JPanel panel;

        progressBar = new JProgressBar(0, MAXIMUM);
        progressBar.setIndeterminate(true);
        msgLabel = new JTextArea("deneme");
        msgLabel.setEditable(false);

        panel = new JPanel(new BorderLayout(5, 5));
        panel.add(msgLabel, BorderLayout.PAGE_START);
        panel.add(progressBar, BorderLayout.CENTER);
        panel.setBorder(BorderFactory.createEmptyBorder(11, 11, 11, 11));

        final JDialog dialog = new JDialog();
        dialog.getContentPane().add(panel);
        dialog.setResizable(false);
        dialog.pack();
        dialog.setSize(500, dialog.getHeight());
        dialog.setLocationRelativeTo(null);
        dialog.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
        dialog.setAlwaysOnTop(false);
        dialog.setVisible(true);
        msgLabel.setBackground(panel.getBackground());

        SwingWorker worker = new SwingWorker() {

            @Override
            protected void done() {
                // Close the dialog
                dialog.dispose();
            }

            @Override
            protected void process(List chunks) {
                // Here you can process the result of "doInBackGround()"
                // Set a variable in the dialog or etc.
            }

            @Override
            protected Object doInBackground() throws Exception {
                // Do the long running task here
                // Call "publish()" to pass the data to "process()"
                // return something meaningful
                return null;
            }
        };

        worker.execute();

    }
} 
```

编辑：应该在“doInBackground()”中调用“publish()”以将数据传递给“process()” [。](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#publish%28V...%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:06:03.020

1.  你有[Concurency is Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的问题，在所有线程完成后你的 GUI 是可见的

2.  可以使用[JProgressBar](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)移动（我说的是你的代码），但你必须

    *   创建并显示[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，创建一次并重用此容器

    *   然后开始`Thread`，

    *   更好的可能来自`Runnable#Thread`

    *   Swing GUI 的输出必须包含在`invokeLater()`

3.  这正是使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)和[PropertyChangeListener的工作](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeListener.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T09:05:21.433

正如前面已经提到的答案`SwingWorker`，如果使用想要与 Swing 一起使用并发，这是要走的路。
我发现这个[SwingWorker 和 ProgressBar 教程](http://www.java2s.com/Tutorial/Java/0240__Swing/SwingWorkerandProgressBar.htm)对于理解它们如何协同工作非常有用。

回到您的实际问题：我假设您使用 GUI，因为您声明用户必须单击一个按钮。问题是，你的“主线程”在做什么？它真的必须一直运行吗？看起来不像。因为您说线程需要一个由另一个线程设置的变量，这是用户交互的结果。简而言之：如果它依赖于用户交互，为什么它需要运行？
通常的方法是首先获取您需要的所有数据，然后运行计算或其他方式。在您的情况下，要么在单个后台线程中运行所有内容（首先设置变量然后执行其余部分），由按钮的 ActionListener 启动，或者在您设置变量的线程完成**后运行另一个线程。**
例如，您可以使用`done()`提供的方法`SwingWorker`来启动下一个任务。或者如果你真的需要，你可以在循环中等待`task.isDone()`返回**true**。但也不要忘记检查`isCancelled()`。

无论如何，我认为你应该重新考虑你的设计。因为我从提供的有限信息中看到的对我来说过于复杂。

# html - HTML5 Offline Manifest 停止缓存它被声明的页面

> ID：12105185
> 
> 赞同：14
> 
> 时间：2012-08-24T07:46:59.780
> 
> 标签：html, manifest, offline, cache-manifest, html5-appcache

我一直在玩缓存清单文件并试图让它停止缓存它声明的页面。

来自[HTML5 摇滚](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

> 用户导航到的任何包含清单的页面都将被隐式添加到应用程序缓存中

高手。我希望清单文件缓存特定的工件，其中之一是我的在线单页应用程序 HTML 的离线版本，但不缓存在线版本。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T07:46:59.780

这就是我解决问题的方法。我的清单文件

```
CACHE MANIFEST
# Version 0.1

CACHE:
# Minimised Styles
/css/style.0.1.min.css

# Minimised JavaScript
/js/script.0.1.min.js

FALLBACK:
/ /offline.html

NETWORK:
* 
```

*请注意，离线时转到**mydomain.com/**的所有内容现在都将转到**/offline.html**（来自缓存）*

现在，如何只缓存清单文件中的内容，而不包括**mydomain.com/**上的在线页面。

**将以下 iframe 放在mydomain.com/**页面底部

 **```
<iframe src="/offline.html" style="display: none;"></iframe> 
```

并放入`manifest="myapp.appcache"`offline.html。

这意味着当**mydomain.com/**被加载时，它永远不会被缓存（因为页面上没有 manifest 属性）。然后浏览器通过 iframe 获取 offline.html 并使用清单文件中的说明添加您想要缓存的所有其他内容，包括由于存在 HTML 属性的 offline.html 页面。

我能看到的唯一开销是在第一页加载时，iframe 会发出一个额外的 HTTP 请求，但是一旦它被缓存，它就会从缓存中取出它，所以这不是一个大问题。**

# javascript - 如何为javascript创建自定义标签？或者这是我不知道的其他事情？

> ID：12105187
> 
> 赞同：2
> 
> 时间：2012-08-24T07:47:02.420
> 
> 标签：javascript, jquery, wordpress

我正在研究 wordpress 上的多语言功能。每篇文章或页面将包含 2 个语言版本，我需要使用标签将它们分开，并让我的 JavaScript 知道根据当前语言选项拉哪个部分。

我可能在编辑器中有这样的东西？

```
[english]
English Content
[/english]
[chinese]
中文内容
[/chinese] 
```

好的，所以我的问题是如何有一个函数让 javascript 识别 [] 和其中的文本？或者这可以在wordpress API中完成吗？因为我在文章中看到过使用这个的各种插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:17:06.283

我建议您不要创建自己的标签，而是使用带有`lang`属性的普通 html 元素：

```
<div lang="en">
   English Content
</div>
<div lang="zh">
   中文内容
</div> 
```

这样您就可以使用标准的 css 和 javascript 来处理内容，如下所示：

```
*[lang=zh]{
   display:none;
} 
```

然后你可以在选择中文时通过javascript切换显示。

^(`*`如果可能，应避免使用通用选择器，并替换为更具体的选择器。)

或者，如果您不想用 html-stuff 打扰您的客户，让他们编写这些伪标签`[english] / [chinese]`并在保存到具有相应语言标签的 div 后将它们转换。

用于捕获此类标签内容的简单正则表达式（不是防故障的！）：

```
/\[english\](.*?)\[\/english\]/  // -> content will be in first capturegroup 
```

只是为了好玩，我编写了一些小例子，这样的替换是如何工作的：

[将自定义标签替换为具有语言 ID 的 div](http://jsfiddle.net/poikl/wvJKv/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:32:53.680

这是一种 RegEx 的做法：http: [//jsfiddle.net/neuroflux/fFzJ4/17/](http://jsfiddle.net/neuroflux/fFzJ4/17/)

太多代码放在这里:)

# macos - 在 MacOS 上使用不同的解锁钥匙串启动进程

> ID：12105189
> 
> 赞同：4
> 
> 时间：2012-08-24T07:47:12.960
> 
> 标签：macos, keychain, xcodebuild

如问题[CLI: Switch keychains in order to sign an x​​codebuild](https://stackoverflow.com/questions/8535832)中所述，我遇到了必须使用两个钥匙串来运行的问题`xcodebuild`。我需要这个，因为我们的企业和应用商店身份被称为相同。

当我尝试建议的解决方案时，它工作正常，如果我`xcodebuild`一次只运行一个。但我正在使用构建服务器（hudson 或 jenkins）并行运行多个构建。每个构建作业都应该构建应用程序的企业版和应用商店版本，因此它必须使用不同的钥匙串。当按照建议更改钥匙串列表时，这总是会影响当前用户的所有正在运行的进程。因此，不同项目的并行构建会受到影响，基本上会失败或使用错误的钥匙串。

我尝试了几种解决方法来打开一个新的安全上下文，它似乎托管了钥匙串信息：

*   我曾经`login -f ...`启动一个新的登录会话，希望它会使用一个独立的安全上下文。但是当我更改会话中的钥匙串设置时，它也会影响其他登录会话。
*   我曾经`ssh localhost ...`启动一个新的登录会话，但不幸的是结果相同。

似乎，安全上下文绑定到用户而不是专用会话。不幸的是，我无法使用 Google 找到有关这些安全上下文的任何信息。

有没有办法为具有不同钥匙串活动和解锁的专用用户运行多个进程？

# facebook - 创建的 Facebook 应用程序不工作

> ID：12105195
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:47:30.433
> 
> 标签：facebook, facebook-javascript-sdk

我试图遵循 facebook 的示例教程：developers.facebook.com/docs/opengraph/tutorial/#debug

但是在我完成并单击烹饪按钮后，它显示“发生错误”。

您可以在此处查看该应用程序：[http ://www.akashbc.com/facebookapp/index.html](http://www.akashbc.com/facebookapp/index.html)

以下是应用程序的页面来源：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"> 

<head prefix="og: http://ogp.me/ns# og_recipebox: http://ogp.me/ns/apps/abcrecipelist#"> 
    <meta property="fb:app_id" content="258611890922127" /> 
    <meta property="og:type" content="abcrecipelist:recipe" /> 
    <meta property="og:title" content="Oreo Stuffed Cookies" /> 
    <meta property="og:image" content="http://1.bp.blogspot.com/-92sA7pC51pg/T9CKdHHeDzI/AAAAAAAACbg/MRq4PR2P5QQ/s1600/jQuery_Cookies.jpg" /> 
    <meta property="og:description" content="The Turducken of Cookies" /> 
    <meta property="og:url" content="http://www.akashbc.com/facebookapp/index.html"> 

    <script type="text/javascript">
    function postCook()
    {
        FB.api('/me/abcrecipelist:cook&recipe=http://www.akashbc.com/facebookapp/index.html','post',  function(response) {
            if (!response || response.error) {
                alert('Error occured');
              } else {
                alert('Post was successful! Action ID: ' + response.id);
              }
        });
    }
    </script>
</head> 

<body> 
    <div id="fb-root"></div>
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <script>
        FB.init({ 
            appId:'258611890922127', cookie:true, 
                    status:true, xfbml:true, oauth:true
        });
        </script>
        <fb:add-to-timeline></fb:add-to-timeline>>
        <h3>
            <font size="30" face="verdana" color="grey">Stuffed Cookies
            </font> 
        </h3> 
        <p>
            <img title="Oreo Stuffed Cookies" src="http://1.bp.blogspot.com/-92sA7pC51pg/T9CKdHHeDzI/AAAAAAAACbg/MRq4PR2P5QQ/s1600/jQuery_Cookies.jpg" width="550"/><br />
        </p>       

        <form>
            <input type="button" value="Cook" onclick="postCook()" />
        </form>

        <fb:activity actions="YOUR_NAMESPACE:cook"></fb:activity>
    </body> 
</html> 
```

另外这里是应用程序基本设置的截图：

![](../Images/b7d6968b854dd148a9274c3f165e2ff9.png)

请告诉我有什么问题。。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:48:35.557

您的 API 调用不正确：

```
FB.api('/me/abcrecipelist:cook&recipe=http://www.akashbc.com/facebookapp/index.html' ... 
```

应该

```
FB.api('/me/abcrecipelist:cook?recipe=http://www.akashbc.com/facebookapp/index.html' ... 
```

即*&*应该是*?* .

# sqlite - sqlite - 如何让 INSERT 或 IGNORE 工作

> ID：12105198
> 
> 赞同：74
> 
> 时间：2012-08-24T07:47:38.623
> 
> 标签：sqlite

我正在尝试将数据插入表中。如果该列还没有数据，我想插入该行 - 无论其他列如何。

```
CREATE TABLE t (
    id          INTEGER PRIMARY KEY,
    name        VARCHAR,
    other       INT
);
INSERT OR IGNORE INTO t (name) VALUES ('a');
INSERT OR IGNORE INTO t (name) VALUES ('a');
INSERT OR IGNORE INTO t (name) VALUES ('a'); 
```

使用上面的代码段，我最终得到 3 行，而不是我想象的 1 行。如果实际的 sql 发生在`INSTEAD OF INSERT`触发器内部很重要，那么这只是一个简单的测试用例。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-08-24T07:58:51.240

代替

```
CREATE TABLE t (
    id          INTEGER PRIMARY KEY,
    name        VARCHAR,
    other       INT
); 
```

和

```
CREATE TABLE t (
    id          INTEGER PRIMARY KEY,
    name        VARCHAR UNIQUE,
    other       INT
); 
```

然后你会得到

```
sqlite> CREATE TABLE t (
   ...>     id          INTEGER PRIMARY KEY,
   ...>     name        VARCHAR UNIQUE,
   ...>     other       INT
   ...> );
sqlite> INSERT OR IGNORE INTO t (name) VALUES ('a');
sqlite> INSERT OR IGNORE INTO t (name) VALUES ('a');
sqlite> INSERT OR IGNORE INTO t (name) VALUES ('a');
sqlite> select * from t ;
1|a| 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-24T07:59:55.763

这仅适用于主键字段或唯一约束：

> [可选的冲突子句允许在这个INSERT](http://www.sqlite.org/lang_insert.html)命令期间使用替代约束冲突解决算法的规范。

更远：

> [ON CONFLICT](http://www.sqlite.org/lang_conflict.html)子句适用于 UNIQUE 和 NOT NULL 约束（以及在本节中与 UNIQUE 约束相同的 PRIMARY KEY 约束）。ON CONFLICT 算法不适用于 FOREIGN KEY 约束。有五种冲突解决算法选择：ROLLBACK、ABORT、FAIL、IGNORE 和 REPLACE。默认的冲突解决算法是 ABORT。

# opencv - 来自形成立体系统的两个校准相机的 openCV 深度图

> ID：12105199
> 
> 赞同：3
> 
> 时间：2012-08-24T07:47:50.323
> 
> 标签：opencv, depth, stereoscopy

我需要一些帮助来使用 openCV 库继续我的代码，以便找到相机中看到的对象的深度值。

我已经完成了校准并找到了视差图，我找不到如何计算相机拍摄的两张照片中每个像素的深度值的明确帮助。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:54:56.113

这是您的问题的链接，包括一个简单的深度估计算法： [http ://www.epixea.com/research/multi-view-coding-thesisse13.html](http://www.epixea.com/research/multi-view-coding-thesisse13.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T08:38:37.867

您可以使用这些公式来计算点云 3D 坐标：

```
Z = fB/D
X = (col-w/2)*Z/f
Y = (h/2-row)*Z/f 
```

其中X、Y、Z是世界坐标，f——标定后相机的焦距，以像素为单位，B是基线或相机间距，D是视差；col, row 表示图像中像素的列和行坐标，尺寸为 h, w。

但是，如果您设法校准相机并获得视差图，您必须已经知道这一点。校准和视差图计算是比上述计算复杂一个数量级的任务。

# infinite - 500 内部服务器错误，在 struts 2.0 的操作中传递错误的参数

> ID：12105200
> 
> 赞同：1
> 
> 时间：2012-08-24T07:47:56.160
> 
> 标签：infinite

我的工作环境低于jsp，struts 2.0，java我的问题是当我在浏览器中的url下面触发时

(1) [https://test123.local.com/test123/test.action?id=9](https://test123.local.com/test123/test.action?id=9)

它工作正常

但是当我使用更新 9 到 9' 触发相同的 url 时

(2) [https://test123.local.com/test123/test.action?id=9](https://test123.local.com/test123/test.action?id=9) '

在控制台中给我以下异常

严重：servlet 默认的 Servlet.service() 抛出异常检测到无限递归：

并根据检查 FF fireburg 工具向我显示 500 内部服务器错误。

和 body 有防止此类错误的想法，我需要在异常中捕获此错误并希望将用户重定向到访问受限页面。

在这里，我提到了我从我身边发现的更多细节。

根据（2）中给出的url

我的 struts-admin.xml 条目如下

```
<action name="test" method="test" class="com.os.Environment.TestAction">  
            <interceptor-ref name="customStack">  
            </interceptor-ref>  
            <result>/jsp/user/tested.jsp</result>  
            <result name="passed" type="redirect-action">passed?Id=${Id}</result>  
</action>  
<interceptor-stack name="customStack">  
                <interceptor-ref name="chainStack"/>  
                <interceptor-ref name="myCustomCheck"/>  
                <interceptor-ref name="defaultStack"/>  
                <interceptor-ref name="exception">  
                    <param name="logEnabled">true</param>  
                    <param name="logLevel">ERROR</param>  
                </interceptor-ref>  
</interceptor-stack> 
```

因此我的第一个 customStack 拦截器称为

下面是我的自定义拦截器代码

```
public class myCustomCheck extends AbstractInterceptor  
{  

    private String invoke(ActionInvocation invocation) throws Exception  
    {  
        HttpServletRequest request = ServletActionContext.getRequest();  
        HttpServletResponse response = ServletActionContext.getResponse();  
        return invocation.invoke(); //this line throw the exception  
    }  

public String intercept(ActionInvocation invocation) throws Exception  
    {  
        HttpServletRequest request = ServletActionContext.getRequest();  
        HttpServletResponse response = ServletActionContext.getResponse();  
        return invoke(invocation);        
        }  

} 
```

我调试了上面的代码，我发现我的拦截器不会调用我的“已处理”名称操作并抛出异常，如下所示：

检测到无限递归：[//test!test, //handled, //handled] - [unknown location] at com.opensymphony.xwork2.ActionChainResult.execute(ActionChainResult.java:207) at com.opensymphony.xwork2.DefaultActionInvocation。 com.opensymphony.xwork2.DefaultActionInvocation.invoke（DefaultActionInvocation.java:253）处的执行结果（DefaultActionInvocation.java:348）

如果您想了解其他信息，请告诉我

# linux - 在 Linux 上安装 Mongodb C++ 驱动程序

> ID：12105202
> 
> 赞同：1
> 
> 时间：2012-08-24T07:48:01.650
> 
> 标签：linux, mongodb, boost, scons

我已经安装了这个驱动很长时间了，但是失败了。有以下相同的错误：

```
scons: Reading SConscript files ...
Checking for C++ library boost_thread-mt... (cached) no
Checking for C++ library boost_thread... (cached) yes
Checking for C++ library boost_filesystem-mt... (cached) no
Checking for C++ library boost_filesystem... (cached) yes
Checking for C++ library boost_system-mt... (cached) no
Checking for C++ library boost_system... (cached) yes
scons: done reading SConscript files.
scons: Building targets ...
g++ -o build/mongo/client/dbclient_rs.o -c -O3 -pthread -D_SCONS -DMONGO_EXPOSE_MACROS -Ibuild -Isrc -Ibuild/mongo -Isrc/mongo src/mongo/client/dbclient_rs.cpp
In file included from /usr/local/include/boost/filesystem/path.hpp:24,
                 from src/mongo/util/paths.h:26,
                 from src/mongo/db/client.h:38,
                 from src/mongo/db/curop.h:23,
                 from src/mongo/db/curop-inl.h:1,
                 from src/mongo/db/instance.h:23,
                 from src/mongo/db/dbmessage.h:25,
                 from src/mongo/client/dbclient_rs.cpp:27:
/usr/local/include/boost/filesystem/config.hpp:16:5: error: #error Compiling Filesystem version 3 file with BOOST_FILESYSTEM_VERSION defined != 3
scons: *** [build/mongo/client/dbclient_rs.o] Error 1
scons: building terminated because of erro`enter code here`rs.`enter code here` 
```

在安装之前，我已经安装了 boost 1.5， pcre8.3，我想安装 mongodb 驱动程序 2.2 有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T09:31:28.313

我和你遇到了同样的问题。
在mongodb C++驱动源码中`src/mongo/pch.h`

```
#define BOOST_FILESYSTEM_VERSION 2 
```

但在`/usr/local/include/boost/filesystem/config.hpp`：

```
# if defined(BOOST_FILESYSTEM_VERSION) && BOOST_FILESYSTEM_VERSION != 3
#   error Compiling Filesystem version 3 file with BOOST_FILESYSTEM_VERSION defined != 3
# endif 
```

这就是问题。
我`src/mongo/pch.h`改为

```
#define BOOST_FILESYSTEM_VERSION 3 
```

然后再次scons，编译正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:03:22.383

来自互联网的一些解决方案：

> 已解决：我有 v2 的 1.44 boost 库，但在我的标题中有“#define BOOST_FILESYSTEM_VERSION 3”（使用另一个版本的同事添加了它）。如果我评论这个指令，我的代码就会正确编译。看起来我们需要同步我们的库。

# wcf - 具有托管 WCF 和 Windsor 的 ASP.NET MVC 应用程序：HttpContext.Current 为 null

> ID：12105205
> 
> 赞同：2
> 
> 时间：2012-08-24T07:48:22.820
> 
> 标签：wcf, castle-windsor

我已经构建了一个托管 WCF 服务的 ASP.NET MVC 3 应用程序。执行实际工作的服务类驻留在类库中。我正在尝试使用 Windsor WCF 设施根据服务请求进行连接。

这是我的温莎集装箱工厂：

```
public class WindsorContainerFactory
{
    private static IWindsorContainer container;
    private static readonly object sync = new Object();

    public static IWindsorContainer Current()
    {
        if(container == null) {
            lock (sync)
            {
                if (container == null)
                {
                    container = new WindsorContainer();
                    container.Install(new ControllerInstaller());
                    container.Install(new NHibernateSessionInstaller());
                    container.Install(new RepositoryInstaller());
                    container.Install(new ServiceInstaller());
                }
            }
        }
        return container;
    }
} 
```

在 Global.asax 中，我调用 WindsorContainerFactory.Current() 一次以保证工厂正在建造：

```
 protected void Application_Start()
    {
        WindsorContainerFactory.Current();
        ControllerBuilder.Current.SetControllerFactory(typeof(WindsorControllerFactory));
        ... 
```

我通过以下课程安装我的服务：

```
public class ServiceInstaller : IWindsorInstaller
{
    public void Install(Castle.Windsor.IWindsorContainer container, Castle.MicroKernel.SubSystems.Configuration.IConfigurationStore store)
    {
        container.Kernel.AddFacility<WcfFacility>();
        container.Kernel.Register(
            Component
            .For<ICustomerService>()
            .ImplementedBy<CustomerService>()
            .Named("CustomerService"));
    }
} 
```

然后我在项目中添加了一个新的 WCF 服务，删除了文件后面的代码并修改了 svc 标记，如下所示：

```
<%@ ServiceHost Language="C#" Debug="true"    
Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, 
Castle.Facilities.WcfIntegration" Service="CustomerService" %> 
```

如您所见，windsor 中还安装了其他组件（存储库、控制器等），但这似乎运行良好。

我的问题是，WCF 客户端（控制台应用程序）收到错误： **HttpContext.Current 为空。PerWebRequestLifestyle 只能在 ASP.Net 中使用**

客户端代码：

```
 CustomerServiceClient c = new Services.Customers.CustomerServiceClient();
        CustomerResponse resp = c.GetCustomerBySurname("Lolman");
        c.Close(); 
```

谁能指出我正确的方向？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:02:10.387

尝试启用 AspNetCompatibility。检查此链接以获取[帮助](http://msdn.microsoft.com/en-us/library/ms752234.aspx)

# html - 在鼠标悬停上为 html 中的图像显示文本

> ID：12105214
> 
> 赞同：146
> 
> 时间：2012-08-24T07:49:05.633
> 
> 标签：html, image

当用户将鼠标悬停在图像上时，我想显示文本。

我怎样才能在 HTML/JS 中做到这一点？

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2012-08-24T07:50:59.110

您可以使用`title`属性。

```
<img src="smiley.gif"  title="Smiley face"/> 
```

您可以根据需要更改图像的来源。

正如[@Gray](https://stackoverflow.com/users/179850/gray)评论的那样：

您还可以`title`在其他事物上使用 ，例如`<a ...`锚点、`<p>`、`<div>`、`<input>`等。参见：**[this](http://w3schools.com/tags/att_global_title.asp)**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-24T07:52:16.083

您可以在此处使用 CSS 悬停
链接到 jsfiddle：http: [//jsfiddle.net/ANKwQ/5/](http://jsfiddle.net/ANKwQ/5/)

HTML：

```
<a><img src='https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcQB3a3aouZcIPEF0di4r9uK4c0r9FlFnCasg_P8ISk8tZytippZRQ'></a>
<div>text</div>
​ 
```

CSS：

```
div {
    display: none;
    border:1px solid #000;
    height:30px;
    width:290px;
    margin-left:10px;
}

a:hover + div {
    display: block;
}​ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T10:39:19.833

你也可以这样做：

HTML：

```
<a><img src='https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcQB3a3aouZcIPEF0di4r9uK4c0r9FlFnCasg_P8ISk8tZytippZRQ' onmouseover="somefunction();"></a> 
```

在 JavaScript 中：

```
function somefunction()
{
  //Do somethisg.
} 
```

​</p>

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T07:57:23.267

您可以将 CSS 悬停与图像背景结合使用。

CSS

```
 .image
{
    background:url(images/back.png);
    height:100px;
    width:100px;
    display: block;
    float:left;
}

.image  a {
    display: none;
}

.image  a:hover {
    display: block;
} 
```

HTML

```
<div class="image"><a href="#">Text you want on mouseover</a></div> 
```

# iphone - 应用加载时 iOS 内存泄漏

> ID：12105216
> 
> 赞同：0
> 
> 时间：2012-08-24T07:49:07.953
> 
> 标签：iphone, objective-c, ios, memory-leaks

我正在尝试查找我的应用程序中的内存泄漏。当应用程序加载时，我立即得到一个看起来像在仪器中的内存泄漏

![泄漏](../Images/3e97869fe3bc374f1643158e1efbba9f.png)

![循环和根](../Images/52ef16e312b2cedd2cbfc19f5b50fd01.png)

我该如何调试？无论我运行我的应用程序多久或我做什么，它都不会自我复制，只有在应用程序加载时。

这是我在委托中的代码

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
{   

    tabBarController = [[UITabBarController alloc] init];

    search = [[iPhoneView alloc] initWithNibName:@"iPhoneView" bundle:nil];
    homeNavigationController = [[UINavigationController alloc] initWithRootViewController:search];

    favouritesNavigationController = [[UINavigationController alloc] init];
    favoritesViewController = [[FavoritesViewController alloc]init];
    [favouritesNavigationController pushViewController:favoritesViewController animated:NO];

    aboutUsViewController =[[AboutUsViewController alloc] init];

    UITabBarItem *item = [[UITabBarItem alloc] initWithTitle:@"toolbox" image:[UIImage imageNamed:@"aboutus"] tag:0];
    aboutUsViewController.tabBarItem = item;
    [item release];

    UITabBarItem *item2 = [[UITabBarItem alloc] initWithTitle:@"αγαπημένα" image:[UIImage imageNamed:@"favorites"] tag:0];
    favouritesNavigationController.tabBarItem = item2;
    [item2 release];

    NSArray *tabBarControllerCollection = [NSArray arrayWithObjects:homeNavigationController,favouritesNavigationController,aboutUsViewController,nil];
    [tabBarController setViewControllers:tabBarControllerCollection animated:NO];

    [window setRootViewController:tabBarController];
    [tabBarControllerCollection release];   //added that for the leaks

    //[window addSubview:tabBarController.view]; for the warning thing about window and root view controller
    [window makeKeyAndVisible];
}

- (void)dealloc {
    [tabBarController release];
    [search release];
    [favoritesViewController release];
    [favouritesNavigationController release];
    [aboutUsViewController release];
    [window release];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:05:33.840

请使用泄漏的调用树视图，这将显示问题发生的位置并帮助您进行故障排除。还可以尝试使用真实设备，因为模拟器可能会显示误报。

![泄漏调用树](../Images/b762f1156f401f545ff7b0e29be445e6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:03:13.943

释放未释放的**homeNavigationController**并检查您是否在其他地方丢失。

# objective-c - 任何了解 iOS 框架的路线图？

> ID：12105231
> 
> 赞同：1
> 
> 时间：2012-08-24T07:50:40.867
> 
> 标签：objective-c, ios

我正在寻找显示iOS一般框架的地图。当你创建一个 viewController 时说。创建 ViewController 及其层次结构的确切对象是什么。还有，说你有self，那么super是什么？比如 super 的对象是什么，或者如何描绘超级对象。如果有的话，有人可以分享一下吗？

这是一个例子：[http ://cc.cocimg.com/cms/uploads/allimg/120515/4064_120515094512_1.jpg](http://cc.cocimg.com/cms/uploads/allimg/120515/4064_120515094512_1.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:34:45.080

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006955-CH1-SW1](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006955-CH1-SW1)

虽然图像详细介绍了直接继承的实际类层次结构；UIViewController 遵循“有”或“知道”的类型设计。这是从 UIViewController.h 中提取的界面顶部：

```
UIKIT_CLASS_AVAILABLE(2_0) @interface UIViewController : UIResponder <NSCoding, UIAppearanceContainer> {
    @package
    UIView           *_view;
    UITabBarItem     *_tabBarItem;
    UINavigationItem *_navigationItem;
    NSArray          *_toolbarItems;
    NSString         *_title;

    NSString         *_nibName;
    NSBundle         *_nibBundle;

    UIViewController *_parentViewController; // Nonretained

    UIViewController *_childModalViewController;
    UIViewController *_parentModalViewController; // Nonretained
    UIViewController *_previousRootViewController; // Nonretained    
    UIView           *_modalTransitionView;
    UIResponder      *_modalPreservedFirstResponder;
    UIResponder      *_defaultFirstResponder;
    UIDimmingView    *_dimmingView;
    UIDropShadowView *_dropShadowView;

    id                _currentAction;
    UIStoryboard     *_storyboard;
    NSArray          *_storyboardSegueTemplates;
    NSDictionary     *_externalObjectsTableForViewLoading;

    UIView           *_savedHeaderSuperview;
    UIView           *_savedFooterSuperview;

    UIBarButtonItem  *_editButtonItem;

    UISearchDisplayController *_searchDisplayController;

    UIModalTransitionStyle _modalTransitionStyle;
    UIModalPresentationStyle _modalPresentationStyle;

    UIInterfaceOrientation _lastKnownInterfaceOrientation;

    UIPopoverController*    _popoverController;
    UIView *_containerViewInSheet;
    CGSize _contentSizeForViewInPopover;
    CGSize _formSheetSize; 
```

在 Finder/Terminal 中打开此文件夹并返回到父文件夹以获取 SDK 中的更多项目：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/ 
```

# ruby-on-rails - Heroku 应用程序因内存泄漏而崩溃

> ID：12105232
> 
> 赞同：0
> 
> 时间：2012-08-24T07:50:48.693
> 
> 标签：ruby-on-rails, ruby, memory, heroku

我的 ruby​​ 应用程序内存不足，最终在 heroku 的竹林堆栈上超时。我记录了一些内存使用统计信息和 ObjectSpace 映射来尝试找出问题所在。但是，在没有 GC 的情况下导致内存增长的原因并不是很明显。这是明显的 C 级内存泄漏吗？

对此进行调试已证明是挑战的一半。当时我没有部署任何东西，Web 和后台进程都内存不足，可能是由于共享资源。我有一个数据库，redis 和 memcached 在它们之间共享，这似乎是[合理](http://shopify.com/technology/4321572-most-memory-leaks-are-good)的，但我找不到足够`Dalli#SeverConnectFailures`的理由来证明。

内存不足的两个进程也排除了任何控制器或视图对泄漏负责，如果这就是发生的情况。还有哪些其他指标可能值得关注？

```
Aug 23 22:43:55 application app/web.17:  Memory usage: 599312 | PID: 2
Aug 23 22:43:57 application app/web.17:  Memory usage: 603972 | PID: 2
Aug 23 22:44:01 application app/web.17:  Memory usage: 603972 | PID: 2
Aug 23 22:44:48 application app/web.17:  Memory usage: 608712 | PID: 2
Aug 23 22:46:12 application app/web.17:  Memory usage: 608712 | PID: 2
Aug 23 22:47:02 application app/web.17:  Memory usage: 603948 | PID: 2
Aug 23 22:47:04 application app/web.17:  Memory usage: 607140 | PID: 2
Aug 23 22:47:12 application app/web.17:  Memory usage: 607148 | PID: 2
Aug 23 22:47:14 application app/web.17:  Memory usage: 613388 | PID: 2
Aug 23 22:47:27 application app/web.17:  Memory usage: 621744 | PID: 2
Aug 23 22:47:31 application app/web.17:  Memory usage: 621744 | PID: 2
Aug 23 22:47:35 application app/web.17:  Memory usage: 622672 | PID: 2
Aug 23 22:48:16 application app/web.17:  Memory usage: 623872 | PID: 2
Aug 23 22:48:30 application app/web.17:  Memory usage: 623872 | PID: 2
Aug 23 22:48:54 application app/web.17:  Memory usage: 623872 | PID: 2 
```

* * *

```
Aug 23 22:28:50 application app/web.17:  ObjectSpace: String: 280596
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Array: 109002
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Hash: 27619
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Proc: 23485
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Regexp: 6827
Aug 23 22:28:50 application app/web.17:  ObjectSpace: MatchData: 3939
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Float: 3541
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Class: 3065
Aug 23 22:28:50 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:28:50 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Module: 1753
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:28:50 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:28:50 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:28:50 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:28:50 application app/web.17:  ObjectSpace: Range: 1199
Aug 23 22:28:50 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1138

Aug 23 22:28:54 application app/web.17:  ObjectSpace: String: 234917
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Array: 94791
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Hash: 28202
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Proc: 23167
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Regexp: 6295
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Float: 4245
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Class: 3067
Aug 23 22:28:54 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:28:54 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Module: 1751
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:28:54 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:28:54 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:28:54 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:28:54 application app/web.17:  ObjectSpace: Range: 1162
Aug 23 22:28:54 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1138

Aug 23 22:28:59 application app/web.17:  ObjectSpace: String: 269014
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Array: 107634
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Hash: 29371
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Proc: 23427
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Regexp: 6372
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Float: 5056
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Class: 3069
Aug 23 22:28:59 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:28:59 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Module: 1756
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:28:59 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:28:59 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:28:59 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Range: 1332
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:28:59 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1160
Aug 23 22:28:59 application app/web.17:  ObjectSpace: Time: 1142

Aug 23 22:29:53 application app/web.17:  ObjectSpace: String: 294645
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Array: 120647
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Hash: 30152
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Proc: 23613
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Regexp: 6434
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Float: 6272
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Class: 3070
Aug 23 22:29:53 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:29:53 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Module: 1758
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Time: 1710
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Range: 1630
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:29:53 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:29:53 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:29:53 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:29:53 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:29:53 application app/web.17:  ObjectSpace: MatchData: 1222
Aug 23 22:29:53 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1160

Aug 23 22:30:19 application app/web.17:  ObjectSpace: String: 315966
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Array: 131711
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Hash: 30602
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Proc: 23716
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Float: 7174
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Regexp: 6509
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Class: 3074
Aug 23 22:30:19 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:30:19 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Time: 1998
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Range: 1803
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Module: 1764
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:30:19 application app/web.17:  ObjectSpace: MatchData: 1587
Aug 23 22:30:19 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:30:19 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:30:19 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:30:19 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:30:19 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1188

Aug 23 22:30:22 application app/web.17:  ObjectSpace: String: 283207
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Array: 106024
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Hash: 30823
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Proc: 23815
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Float: 7253
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Regexp: 6657
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:30:22 application app/web.17:  ObjectSpace: MatchData: 3118
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Class: 3073
Aug 23 22:30:22 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:30:22 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Range: 2156
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Time: 1804
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Module: 1761
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:30:22 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:30:22 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:30:22 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:30:22 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:30:22 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1188
Aug 23 22:30:22 application app/web.17:  ObjectSpace: NewRelic::MetricSpec: 1031

Aug 23 22:30:24 application app/web.17:  ObjectSpace: String: 245422
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Array: 88415
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Hash: 29806
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Proc: 23347
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Regexp: 6615
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Float: 3239
Aug 23 22:30:24 application app/web.17:  ObjectSpace: MatchData: 3199
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Class: 3074
Aug 23 22:30:24 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:30:24 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Module: 1789
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:30:24 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:30:24 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:30:24 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:30:24 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:30:24 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1211

Aug 23 22:30:43 application app/web.17:  ObjectSpace: String: 282894
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Array: 122259
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Hash: 33899
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Proc: 23900
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Float: 8009
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Regexp: 6727
Aug 23 22:30:43 application app/web.17:  ObjectSpace: MatchData: 3790
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Class: 3075
Aug 23 22:30:43 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:30:43 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Time: 2377
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Range: 1827
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Module: 1795
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:30:43 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:30:43 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:30:43 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:30:43 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:30:43 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1211
Aug 23 22:30:43 application app/web.17:  ObjectSpace: NewRelic::MetricSpec: 1097

Aug 23 22:31:05 application app/web.17:  ObjectSpace: String: 247487
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Array: 86538
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Hash: 35635
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Proc: 23187
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Regexp: 6402
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Float: 5852
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Class: 3075
Aug 23 22:31:05 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:31:05 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:31:05 application app/web.17:  ObjectSpace: NewRelic::TransactionSample::Segment: 2200
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Module: 1777
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:31:05 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Time: 1382
Aug 23 22:31:05 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:31:05 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:31:06 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:31:06 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:31:06 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1211
Aug 23 22:31:06 application app/web.17:  ObjectSpace: ActiveRecord::Associations::BelongsToAssociation: 1116

Aug 23 22:32:22 application app/web.17:  ObjectSpace: String: 264877
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Array: 98195
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Hash: 38516
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Proc: 23305
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Regin::Character: 22918
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Float: 6633
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Regexp: 6628
Aug 23 22:32:22 application app/web.17:  ObjectSpace: NewRelic::TransactionSample::Segment: 4402
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Regin::Expression: 3514
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Class: 3075
Aug 23 22:32:22 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::CallbackChain: 2741
Aug 23 22:32:22 application app/web.17:  ObjectSpace: ActiveSupport::Callbacks::Callback: 2677
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Regin::Group: 2555
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Rack::Mount::RegexpWithNamedGroups: 2514
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Rack::Mount::GeneratableRegexp::DynamicSegment: 2399
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Bignum: 2210
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Time: 2027
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Regin::Anchor: 1918
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Module: 1777
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Regin::CharacterClass: 1602
Aug 23 22:32:22 application app/web.17:  ObjectSpace: MatchData: 1574
Aug 23 22:32:22 application app/web.17:  ObjectSpace: MIME::Type: 1533
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Gem::Version: 1509
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Rack::Mount::Route: 1350
Aug 23 22:32:22 application app/web.17:  ObjectSpace: ActionDispatch::Routing::Route: 1350
Aug 23 22:32:22 application app/web.17:  ObjectSpace: ActionDispatch::Routing::RouteSet::Dispatcher: 1346
Aug 23 22:32:22 application app/web.17:  ObjectSpace: Gem::Requirement: 1256
Aug 23 22:32:22 application app/web.17:  ObjectSpace: ActiveRecord::ConnectionAdapters::Mysql2Column: 1211
Aug 23 22:32:22 application app/web.17:  ObjectSpace: ActiveRecord::Associations::BelongsToAssociation: 1116 
```

# javascript - jQuery .html() 不会替换 javascript 图表

> ID：12105234
> 
> 赞同：1
> 
> 时间：2012-08-24T07:50:56.877
> 
> 标签：javascript, jquery, dojo

我正在使用 jQuery 的 ajax 调用从 Dojo 工具包中创建一个图表，基于他们对下拉菜单的选择。问题是它没有替换图表，而是将其向下推并显示其上方的下一个图表。如果我用文本切换图表，它将正确替换文本。

```
$('#listID').on('change',function()
{
    var input = $(this).attr("value");
    $.post("helper.php", { input: input, username: username }, function(data){
        $('#chart').html(data.chart);
    }, "json");
});
<div id="chart"></div>
<div id="chartOne" style="width: 400px; height: 240px; "></div> 
```

正在插入的图表：

```
<script>
require(["dojox/charting/Chart", "dojox/charting/axis2d/Default", "dojox/charting/plot2d/StackedAreas", "dojox/charting/themes/Wetland" , "dojo/ready"],
  function(Chart, Default, StackedAreas, Wetland, ready){
    ready(function(){
      var c = new Chart("chartOne");
  c.addPlot("default", {type: StackedAreas, tension:3})
    .addAxis("x", {fixLower: "major", fixUpper: "major"})
    .addAxis("y", {vertical: true, fixLower: "major", fixUpper: "major", min: 0})
    .setTheme(Wetland)
    .addSeries("Series A", [1, 2, 0.5, 1.5, 1, 2.8, 0.4])
    .addSeries("Series B", [2.6, 1.8, 2, 1, 1.4, 0.7, 2])
    .addSeries("Series C", [6.3, 1.8, 3, 0.5, 4.4, 2.7, 2])
    .render();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:58:45.997

发生这种情况是因为您正在渲染脚本标签（到#chart）并且脚本标签正在渲染到第二个位置（#chartOne），第二个位置永远不会被清除。

# .net - 在图片框中撤消操作以撤消 C#.net 中绘制的矩形

> ID：12105241
> 
> 赞同：0
> 
> 时间：2012-08-24T07:51:51.907
> 
> 标签：.net, visual-studio-2010, c#-4.0

在我的项目中有图片框，用户将首先通过单击查看图像按钮选择图像。此图像将根据查看图像按钮前面的文本框中的图像名称。用户现在将单击图片框，点的形状为小矩形。选择点后，用户将单击绘制曲线按钮并绘制平滑曲线，因为我使用了图形类的 Drawclosedcurve 方法。我的问题是；假设用户错误地单击了一个点并且他想撤消该点，那么解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:06:44.853

您是否考虑过使用 a`stack`来存储您的操作，例如创建一个类来存储您的操作，然后枚举您的操作类型：

```
enum ActionType
{
    DrawPoint = 1,
    DrawCurve = 2
}

public class Action
{
    public int X { get; set; }
    public int Y { get; set; }
    public ActionType Action { get; set; }
} 
```

然后，每当用户单击以提出一个点时，您就可以`Action`从中创建一个并将`push`其添加到您的`Stack`喜欢上：

```
Stack eventStack = new Stack<Action>();

// capture event either clicking on PictureBox or clicking on Curve button
// and convert to action

Action action = new Action() {
    X = xPosOnPictureBox,
    Y = yPosOnPictureBox,
    ActionType = ActionType.DrawPoint
};

eventStack.push(action); 
```

然后，您可以根据您的堆栈继续渲染您的图片框。当您只想撤消`pop`堆栈中的最新操作，然后`PictureBox`从堆栈中剩余的事件中重新绘制您的操作。

```
protected void btnUndo_Click(object sender, EventArgs e)
{
    var action = eventStack.pop();

    // ignore action as we just want to remove it

    // now redraw your PictureBox with what's left in the Stack
} 
```

这段代码显然没有经过测试，需要融入你的结构，但它应该足够了。

# c# - 如何使用代码生成实体模型？

> ID：12105243
> 
> 赞同：0
> 
> 时间：2012-08-24T07:52:07.130
> 
> 标签：c#, .net, entity-framework

我需要重新生成我的`Entity Model`使用代码。我不想去，`right click and update model from database`每次都有变化。

所以我开始研究[EdmGen](http://msdn.microsoft.com/en-us/library/bb387165.aspx)和[EdmGen2](http://archive.msdn.microsoft.com/EdmGen2)

我用来为我`EdmGen2`预生成我`Model Views`的：

```
using (System.Diagnostics.Process process = new System.Diagnostics.Process())
{
    process.StartInfo.FileName = @"C:\EdmGen2.exe";
    process.StartInfo.Arguments = @"/ViewGen cs ""C:\Project\EntityFramework\Model\ApplicationEntityModel.edmx""";
    process.StartInfo.WorkingDirectory = @"C:\Project\EntityFramework\Model";
    process.Start();
    process.WaitForExit();
} 
```

这完美地工作。

不，我正在尝试重新生成我的`Entity Model`：

```
using (System.Diagnostics.Process process = new System.Diagnostics.Process())
{
    process.StartInfo.FileName = @"C:\EdmGen2.exe";
    process.StartInfo.Arguments = String.Format(@"/ModelGen ""{0}"" ""System.Data.SqlClient"" ""ApplicationEntityModel""", ConnectionString);
    process.StartInfo.WorkingDirectory = @"C:\Project\EntityFramework\Model";
    process.Start();
    process.WaitForExit();
} 
```

这只会生成`.edmx`文件。无法指定命名空间，所以这对我不起作用。

是否有任何`tool`或`template`我可以用来完全重新生成我的`Entity Model', this includes the`.edmx `and`Designer.cs`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:18:36.637

我获得了 EntityStoreSchemaGenerator 的源代码并且能够对其进行编码。

您可以添加这些过滤器等来限制您想要的表格。还有一个疯狂的复数词可以弄清楚何时从实体集合的末尾添加/删除“S”。对于以 Status 结尾的单词的情况，它失败了，尽管单数是 Statu（我总是对此笑），但我能够告诉它 Status 的复数是 Statuses（即使这不是官方正确的) 并且 Statuses 的单数形式是 Status。

代码在这里： [http ://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/30b10ed3-b705-458d-ae1f-19d595bceb39/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/30b10ed3-b705-458d-ae1f-19d595bceb39/)

我找到了一个类的代码，它将所有文件合并到一个 edmx 中。 [http://fusioncrm.googlecode.com/svn-history/r5/trunk/Fusion.Data.Generation/ModelGenerator.cs](http://fusioncrm.googlecode.com/svn-history/r5/trunk/Fusion.Data.Generation/ModelGenerator.cs)

我编写了一个控制台应用程序，它为基于“黄金”数据库的客户端运行所有这些，我也讨厌从设计师那里运行它，因为它总是由于某种原因略有不同。这种方式似乎总是生成相同的文件，因此在签入版本控制时更清楚地知道发生了什么变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:00:29.030

这将要求您直接与 Visual Studio 交互（在后台运行它并命令它执行某些操作），因为类的自动生成由 Visual Studio 的自定义工具处理，该工具必须在 Visual Studio 中运行。

此外，这种自动生成也存在很大问题，因为可能存在需要手动修复才能使 EDMX 正常工作的更改。它们也可能会以依赖代码不会构建的方式更改您生成的类。

# android - Android：水平视图寻呼机不在主屏幕上

> ID：12105245
> 
> 赞同：0
> 
> 时间：2012-08-24T07:52:13.247
> 
> 标签：android, view, android-viewpager, pager

我最近再次开始为 android 编程，目前正在开发一个应用程序，我想实现水平视图寻呼机，以便用户在一个实例中可以在两个页面之间滑动以输入/更新信息，然后在四个页面之间滑动查看他们输入/更新的信息。我基本上是在为角色扮演游戏制作电子角色表。

我一直在研究水平视图寻呼机的这些教程：http: [//mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal -view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

[http://manishkpr.webheavens.com/android-viewpager-example/](http://manishkpr.webheavens.com/android-viewpager-example/)

我的问题是我看过的所有教程，h。视图寻呼机是在主活动屏幕上使用的，有没有办法在后续屏幕上实现水平视图寻呼机？每次我试图实现代码以在主屏幕以外的页面上工作时，它一到该页面就崩溃了。

所以，长话短说，有没有人在非主页上成功地实现了水平视图寻呼机，如果是这样，怎么做？

我希望我说得有道理，但如果您还有其他问题，请告诉我！

* * *

08-24 01:44:34.310：I/ActivityManager(144)：从 pid 15115 开始 {cmp=com.echaractersheet/.CharacterStats1} 08-24 01:44:34.360：D/AndroidRuntime(15115)：关闭 VM 08 -24 01:44:34.360: W/dalvikvm(15115): threadid=1: 线程退出未捕获异常 (group=0x40a581f8) 08-24 01:44:34.370: E/AndroidRuntime(15115): 致命异常: main 08 -24 01:44:34.370: E/AndroidRuntime(15115): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.echaractersheet/com.echaractersheet.CharacterStats1}: java.lang.NullPointerException

* * *

characterstats.xml：

```
<android.support.v4.view.ViewPager
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/characterstatspager" /> 
```

characterstats1.xml 和 characterstats2.xml 是我要在其间滑动的两个页面

CharacterStatsPagerAdapter.java: ...

```
 public class CharacterStatsPagerAdapter extends PagerAdapter {
public int getCount() {
    return 2;
}

public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId =0;
    switch (position) {
    case 0:
        resId = R.layout.characterstats1;
        break;
    case 1:
        resId = R.layout.characterstats2;
        break;
    }
    View view = inflater.inflate(resId,  null);

    ((ViewPager) collection).addView(view, 0);

    return view;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);
}

@Override
public Parcelable saveState() {
    return null;
} 
```

}

CharacterStats1.java：

```
 CharacterStatsPagerAdapter adapter = new CharacterStatsPagerAdapter();
        ViewPager myPager = (ViewPager) findViewById(R.id.characterstatspager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:22:57.917

好吧，寻呼机将使用适配器中的数据，因此只要将对象保留在适配器中，就可以了。所以也许在进入下一个屏幕之前，您应该将对象保存在适配器中（可能保存到另一个类中的静态字段，只是一会儿），当您进入新页面时，您可以检索对象并将它们放入适配器中新的 viewpager 并添加新页面。这就是我将在你的情况下做的事情。

**更新：**

这只是一个例子，这需要更多的代码行，但这是一个好的开始。

```
public class Fields {
    private String name;
    private String lastName;
    private int age;
    private boolean male;

    public Fields(){
        this.name = "";

        this.lastName = "";
    }

    public Fields(String name, String lastName, int age, boolean male) {
        this.name = name;
        this.lastName = lastName;
        this.age = age;
        this.male = male;
    }

    public View getRepresentation(Context mContext){
        /*Create the view that ViewPager will display*/
        LinearLayout layout = new LinearLayout(mContext);
        layout.addView(new TextView(mContext)); //Name
        layout.addView(new TextView(mContext)); //LastName
        layout.addView(new TextView(mContext)); //Age
        layout.addView(new CheckBox(mContext)); //Male/Female
        return layout;
    }

} 
```

视图寻呼机适配器

```
public class ViewPagerAdapter extends PagerAdapter {

    private List<Fields> pages;
    private Context mContext;

    public ViewPagerAdapter( Context mContext )
    {
        this.mContext = mContext;
    }

    public void setPages(List<Fields> pages){
        this.pages = pages;
    }

    public List<Fields> getPages(){
        return this.pages;
    }

    @Override
    public int getItemPosition(Object object) {
           return POSITION_NONE;
    }

    @Override
    public int getCount()
    {
        return pages.size();
    }

    @Override
    public Object instantiateItem( View pager, int position )
    {
        View view = pages.get(position).getRepresentation(mContext);
        view.setId(position);
        return view;
    }

    @Override
    public void destroyItem( View pager, int position, Object view )
    {
        ((ViewPager)pager).removeViewInLayout( (View) view );
    }

    @Override
    public boolean isViewFromObject( View view, Object object )
    {
        return view.equals( object );
    }

} 
```

主班

```
public class MainActivity extends Activity {

private Context mContext;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.mContext = getApplicationContext();
    setContentView(R.layout.viewpager_layout);
    final List<Fields> fields = new ArrayList<Fields>();
    fields.add(new Fields());
    ViewPager mPager = (ViewPager) this.findViewById(R.id.viewpager);
    Button nextActivity = (Button) this.findViewById(R.id.nextAct);
    ViewPagerAdapter mAdapter = new ViewPagerAdapter(mContext);
    mAdapter.setPages(fields);
    mPager.setAdapter(mAdapter);
    nextActivity.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            SecondActivity.pages = fields;
            Intent intent = new Intent(mContext, SecondActivity.class);
            startActivity(intent);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

二等舱

```
public class SecondActivity extends Activity {

    public static List<Fields> pages;
    private Context mContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.mContext = getApplicationContext();
        setContentView(R.layout.viewpager_layout);

        final List<Fields> fields = pages;
        pages = null;
        fields.add(new Fields()); //Add the new Pages
        ViewPager mPager = (ViewPager) this.findViewById(R.id.viewpager);
        Button nextActivity = (Button) this.findViewById(R.id.nextAct);
        ViewPagerAdapter mAdapter = new ViewPagerAdapter(mContext);
        mAdapter.setPages(fields);
        mPager.setAdapter(mAdapter);
        nextActivity.setVisibility(View.GONE);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

正如我所说，这只是一个示例，应该为您的对象更改字段类，ViewPagerAdapter 是您保存将传递给下一个活动的页面列表的地方。而第二个活动上的静态字段只是用作活动之间的桥梁，不应过度使用，这就是为什么在获取数据后您需要设置为 NULL 才能知道您已经获取了该值。希望能帮助到你。

**注意：**此代码不会按原样工作，需要更多代码。

# join - 优化 JOIN：与索引表的比较

> ID：12105249
> 
> 赞同：0
> 
> 时间：2012-08-24T07:52:25.353
> 
> 标签：join, left-join, inner-join, sqlperformance

假设我们有一个耗时的查询，如下所述：

```
(SELECT ...
FROM ...) AS FOO
LEFT JOIN (
    SELECT ...
    FROM ...) AS BAR
ON FOO.BarID = BAR.ID 
```

让我们假设

```
(SELECT ...
FROM ...) AS FOO 
```

返回*许多*行（比如说 10 M）。每一行都必须与 BAR 中的数据连接。

现在假设我们插入结果

```
 SELECT ...
    FROM ...) AS BAR 
```

在一个表中，并将临时索引添加到它。

**我的问题**：

使用*实时*查询的“JOIN”性能与“JOIN”对包含先前*实时*查询结果的表的性能有何不同，该表将添加临时索引？

另一种说法：

如果 JOIN 很慢，实际存储和索引我们 JOIN 到的表会有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:55:36.797

答案是“也许”。

这取决于相关数据的统计数据。您肯定会发现的唯一方法是将第一个查询实际加载到临时表中，在其上粘贴相关索引，然后运行查询的第二部分。

我可以告诉您速度是否是您想要的，如果您可以将第一个查询的结果永久加载到表中，那么您的查询当然会更快。

如果您希望它更快，根据您使用的 DBMS，您可以考虑创建一个跨两个表的索引 - 如果您使用的是 SQL Server，它们被称为“索引视图”，或者您也可以查找“Reified”其他系统的索引。

最后，如果您想要最高速度，请考虑对数据进行非规范化并消除即时发生的连接 - 基本上您以存储空间和数据一致性（您的活动表）为代价将预处理（连接）移动到离线状态根据您运行更新的频率，会稍微落后）。

我希望这有帮助。

# java - 确定 32 位与 64 位的 JRE 架构

> ID：12105253
> 
> 赞同：12
> 
> 时间：2012-08-24T07:53:02.927
> 
> 标签：java

我想知道的是我的 JRE 是用于 32 位还是 64 位。

是的，我试过`java -version / -showversion / -fullversion`了，但它没有说任何有用的东西（至少对我来说不是）。

这就是我这样做时得到的`java -version`：

```
java version "1.6.0_11"
Java(TM) SE Runtime Environment (build 1.6.0_11-b03)
Java HotSpot(TM) Client VM (build 11.0-b16, mixed mode) 
```

所以我只能访问一个压缩的 JRE 的 bin 文件夹，安装和设置了一个不同的 JRE，这不是我要检查的版本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T07:57:14.017

```
System.getProperty("sun.arch.data.model"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-11T14:29:07.483

如果您尝试从命令行执行此操作，`file`您的朋友是：

```
$ cat `which java` | file -
/dev/stdin: ELF 64-bit LSB executable, x86-64, version 1 (SYSV),
dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for
GNU/Linux 2.6.32, BuildID[sha1]=440c433f29884a88f874e6d8260f156f4b352818,
stripped 
```

（使用`cat`，因为在我的情况下`java`是一个符号链接。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:58:26.280

当我在 64 位机器上运行命令时，我得到以下信息。java -version 总是为您提供在 Environment 属性中设置的版本或从 JRE 中的 Java 图标中选择的任何内容。您的机器上可能还安装了其他软件。查找“拱门”。

```
C:\Users\nyera>java -version
java version "1.6.0_27"
Java(TM) SE Runtime Environment (build 1.6.0_27-b07)
Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode) 
```

# matlab - MATLAB中冒号操作的组合

> ID：12105271
> 
> 赞同：3
> 
> 时间：2012-08-24T07:54:57.450
> 
> 标签：matlab, syntax, vectorization, slice, colon

我有一个关于 MATLAB 中的冒号运算符和向量扩展的问题。我的问题是了解以下代码行如何扩展，以便能够将其用于其他序列。MATLAB代码行是：

```
a(1:2:5) = 1:-4:-7 
```

注意`a`扩展之前没有定义。这将返回向量

```
a = 1 0 3 0 -7 
```

我知道冒号运算符是如何工作的`{start}:{step}:{stop}`，我的问题是理解如何以及为什么组合`a(1:2:5)`和`1:-4:-7`返回一个由五个元素组成的向量，位置`2`和`5`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:06:08.220

当您定义时`a(1:2:5)`，它会创建一个大小为 5 的向量（零值），并选择奇数索引（其中 3 个存在）单元格。`1:-4:-7`创建三个值（不是五个）。最后，您选择的三个单元格填充了来自 3 个值的数据`1:-4:-7`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:44:07.873

每当 Matlab 检测到您正在下降到矩阵/数组当前边界*之外的元素时，它会自动用零填充缺失的元素：*

```
>> clear b; b(10) = 5 
b =
    0     0     0     0     0     0     0     0     0     5 
```

这个功能既**非常有用**，又**非常危险**。它对事实声明非常有用，例如您自己的情况。您可以通过发出类似的东西来创建一系列定制类

```
myClassArray(500) = myClass(1, 2); 
```

这比类似的东西要好得多

```
% cannot pre-allocate (zeros() or ones() give double/uint8/..., not myClass)
for ii = 1:499
     myClassArray(ii) = myClass; % so, growing array
end
myClassArray(500) = myClass(1,2); 
```

但是，越来越多的数组可能很难被发现：

```
a = zeros(10,1);
for ii = 1:10
    a(ii+1) = rand;
end 
```

这会使性能大幅下降。此外，当您将 Matlab 中的原型代码翻译成静态类型语言（如 C++）时，复制此代码将导致缓冲区溢出，从而导致段错误。

现在，回到你的案例：

```
clear a;   a(1:2:5) = 1:-4:-7 
```

将`1:2:5`扩展到数组`[1 3 5]`，并且`1:-4:-7`将给出值`[1 -3 -7]`。由于该变量`a`尚不存在，Matlab 将创建一个新变量并`[1 3 5]`用 values填充元素`[1 -3 -7]`。为初始化变量`a`（即`[2 4]`）而跳过的索引将自动初始化为零。

如果你熟悉 Python，这有点像将多个值分配给多个变量的语法

```
x,y = 1,2 
```

但是在您的 Matlab 案例中，这些不同的变量是不存在数组的索引，这需要“用某些东西填充孔”以使其成为有效、一致的数组。

这是否说明问题？

# c++ - C++ 自己的观察者模式

> ID：12105274
> 
> 赞同：6
> 
> 时间：2012-08-24T07:55:16.223
> 
> 标签：c++, pointers, function-pointers, observer-pattern, observers

我正在设计一个应该以这种方式工作的观察者模式：观察者调用`AddEventListener`方法`EventDispatcher`并传递一个字符串，该字符串是`event`、*PointerToItself*和*PointerToItsMemberMethod的名称*

之后`event`发生在`EventDispatcher`; 它查看订阅列表，如果有的话，分配给这个事件的`action`方法调用`observer`.

我来到了这个`EventDispatcher.h`。**CAUTION**包含一些伪代码。

有两个问题：

1.  如何定义`action`in的类型`struct Subscription`？
2.  我走对了吗？

**PS**：不，我不会使用`boost`或**任何**其他库。

```
#pragma once

#include <vector>
#include <string>

using namespace std;

struct Subscription
{
        void*                   observer;
        string                  event;
        /*  u_u  */             action;
};

class EventDispatcher
{
    private:
        vector<Subscription>    subscriptions;

    protected:
        void                    DispatchEvent ( string event );

    public:
        void                    AddEventListener ( Observer* observer , string event , /*  u_u  */ action );
        void                    RemoveEventListener ( Observer* observer , string event , /*  u_u  */ action );
}; 
```

这个头文件是这样实现的`EventDispatcher.cpp`

```
#include "EventDispatcher.h"

void    EventDispatcher::DispatchEvent ( string event )
{
    int key = 0;
    while ( key < this->subscriptions.size() )
    {
        Subscription subscription = this->subscriptions[key];
        if ( subscription.event == event )
        {
            subscription.observer->subscription.action;
        };
    };
};

void    EventDispatcher::AddEventListener ( Observer* observer , string event , /* */ action )
{
    Subscription subscription = { observer , event , action );
    this->subscriptions.push_back ( subscription );
};

void    EventDispatcher::RemoveEventListener ( Observer* observer , string event , /* */ action )
{
    int key = 0;
    while ( key < this->subscriptions.size() )
    {
        Subscription subscription = this->subscriptions[key];
        if ( subscription.observer == observer && subscription.event == event && subscription.action == action )
        {
            this->subscriptions.erase ( this->subscriptions.begin() + key );
        };
    };
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:08:53.193

您可以定义一个 Action 类或传递一个 lambda 函数 (C++11)。在后一种情况下，动作可以定义为

```
function<void (EventDispatcher*)> action; 
```

您将按如下方式注册观察者

```
Observer * me = this;
observable->AddEventListener (this, "EventName", [me] (EventDispatcher* dispatcher) {
   // code here; me is available
}); 
```

您可能应该使用智能弱指针将观察者存储在 EventDispatcher 中，这样您就不必关心取消注册。

编辑：添加了以下示例（可能只有一个订阅，但应该说明这个想法 - 您必须小心不要引用不再存在的对象）

```
struct Observable {
   std::weak_ptr<function<void (const Observable&)>> action;

   void AddEventListener (std::weak_ptr<function<void (const Observable&)>> theAction) {
      action = theAction;
   }

   void EventRaised () {
      if (!action.expired ()) {
         auto theAction = action.lock ();
         (*theAction) (*this);
      }
   }
};

struct Observer {
...
   void CallOnEvent (const Observable & observable) {
      // do something
   }

   // field to store the action as long as it is needed
   std::shared_ptr<function<void (const Observable&)>> action;

   void ... {
      auto me = this;
      action = std::make_shared<function<void (const Observable&)>> (
         [me] (const Observable& observable) {
             me->CallOnEvent (observable);
         }
      );
      // we could have as well used std::bind
      observable.AddEventListener (action);
   }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:01:34.077

最简单的形式 u_u 可以是函数指针，例如

```
typedef void (*u_u)(void*); // or whatever arguments u like 
```

那么您只需提供一个在触发事件时调用的函数。

```
void myaction(void* arg)
{
  ...
}

Subscription s;
...
s.action = myaction; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:07:26.057

也许您应该只创建一个由“用户”派生的类：

```
class Action {
   public:
      friend class EventDispatcher;

      virtual SomeResultType DoThis() = 0;

   private:
      /* Some common data */
}; 
```

只需将一些派生自类动作类型的变量传递给 AddEventListener。触发对应事件时，只需填写常用数据，调用DoThis()方法即可。

```
void EventDispatcher::DispatchEvent ( string event )
{
    int key = 0;
    while ( key < this->subscriptions.size() )
    {
        Subscription subscription = this->subscriptions[key];
        if ( subscription.event == event )
        {
            subscription->action();
        };
    };
}; 
```

对于 AddEventListener：

```
void EventDispatcher::AddEventListener ( Observer* observer , string event , Action* action )
{
    Subscription subscription = { observer , event , action );
    this->subscriptions.push_back ( subscription );
}; 
```

Action 派生类的示例：

```
class myAction: public Action {
   public:
      // Implement the DoThis() method
      void SomeResultType DoThis() {
          cout << "Hello World!";
          return SomeValue;
      }
};

// To use the action,
myAction* act = new myAction;
myEventDispatcher.AddEventListener(someObserver, "HelloWorld", act); 
```

这是实现动作（和回调）的最安全方式之一。

# internet-explorer - IE8上的CSS3奇偶行不同颜色

> ID：12105275
> 
> 赞同：2
> 
> 时间：2012-08-24T07:55:17.013
> 
> 标签：internet-explorer, css, internet-explorer-8

我有用不同颜色区分奇数行和偶数行的 Css 代码

```
.historyLog tr:nth-child(odd) td {
background-color:blue;
}
.historyLog tr.odd td{
    background-color: blue;
}
​
.historyLog tr:nth-child(even) td {
background-color:orange;
}
.historyLog tr.even td{
    background-color: orange;
} 
```

并有类 .historyLog 的表

```
<table class="historyLog">
<tr><td></td></tr>
<tr><td></td></tr>
</table> 
```

我的问题是，当我使用类属性 .historyLog i.ie 应用 Css

```
.historyLog tr:nth-child(odd) td {
background-color:blue;
} 
```

IE8 不执行它，我将得到所有行的颜色相同，无论是偶数还是奇数。但是如果我在不使用表的类属性的情况下应用 css，即

```
tr:nth-child(odd) td {
background-color:blue;
} 
```

然后IE8以不同颜色的奇偶行执行它。请帮助我回答IE8如何使用table的class属性以不同的颜色显示奇数行和偶数行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T09:24:53.703

由于 IE8 不支持 CSS3 选择器。您可以很好地使用 jQuery 的内置 :odd 或 :even 选择器来实现相同的功能。

```
$(".historyLog tr:odd").css('background-color','blue');
$(".historyLog tr:even").css('background-color','white'); 
```

或者您可以改用 css 类文件

```
$(".historyLog tr:odd").addClass("odd");
$(".historyLog tr:even").addClass("even"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T08:00:41.783

你不能，因为 IE8 不支持 CSS3。

[你可以用 jQuery 做到这一点](http://jsfiddle.net/C8kRd/)：

```
$('tr').each(function(){
    if ($(this).index()%2<1)
        $(this).addClass('even');
}); 
```

​</p>

# jsf-2 - 升级到 facelets - Myfaces 2.0、Tomahawk、ajax4jsf - Facelets 页面不呈现

> ID：12105276
> 
> 赞同：0
> 
> 时间：2012-08-24T07:55:27.187
> 
> 标签：jsf-2, primefaces, facelets, ajax4jsf, tomahawk

我将一个 jsf1 项目迁移到 jsf2。
该 web 应用程序基于 Myfaces 2.1.8 、 Tomahawk20-1.1.13 和 ajax4jsf-1.1.1 - 在 Tomcat 7 上运行。一切正常，所以我想将部分页面升级为 facelets 并插入 Primefaces。
问题是如果我使用 jsf 核心标签，facelets 页面不会呈现 - 浏览器显示空白页面，日志中也没有错误。
如果页面是纯 xhtml，它会很好地呈现。我知道如果 Faces servlet 根本不工作但使用 *.jsf 的映射它应该首先查找 .xhtml 页面时会发生这种情况，对吗？
任何帮助将不胜感激。
看来 facelets 和 ajax4jsf 不能共存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:20:43.970

如果您的页面具有`.xhtml`扩展名，则您的 web.xml 应包含以下内容：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

如果你有`*.jsf`as url-pattern 并且你的页面有`.xhtml`扩展名，那么很明显页面没有被渲染。换句话说，url-pattern 必须与要呈现的页面匹配。

# objective-c - UIWebView 的后退/前进按钮 - canGoBack 不适用于 ajax 站点

> ID：12105280
> 
> 赞同：5
> 
> 时间：2012-08-24T07:55:52.977
> 
> 标签：objective-c, ios, ajax, ios5, uiwebview

我正在使用一些工具栏按钮来返回和转发 UIWebview 中的历史网页。 ![在此处输入图像描述](../Images/0e438f7440753e4fc1b7a4f713565caf.png)

我正在使用`[webview canGoBack]`调用 at启用/禁用这些按钮`webViewDidStartLoad`。在大多数网站上都可以正常工作，但问题是，在**twitter**和**facebook**等使用 javascript/ajax 请求重新加载新页面`canGoBack`并且`canGoForward`无法识别页面更改的网站上，我的按钮不会变为活动状态。

有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:28:34.473

以我的经验，站点本身必须在其 AJAX 请求之上支持后退/转发。它需要 Web 应用程序更改每个页面导航的 URL。

有关此问题的一些讨论，请参见[http://www.devx.com/webdev/Article/35549](http://www.devx.com/webdev/Article/35549)。

所以，具体到您的问题 - 如果它是您自己的网络应用程序，那绝对是可能的（有几个 javascript 解决方案，其中一个在上面链接），但对于 3rd 方网络应用程序，我会说不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:34:32.690

[设法使用webView:shouldStartLoadWithRequest:navigationType](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a)拼凑一个解决方案：

```
- (BOOL)webView:(UIWebView *)myWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

此时我启用了后退按钮。似乎工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-11T12:09:06.523

*   (void)webViewDidStartLoad:(UIWebView *)webView{

    [SVProgressHUD showWithStatus:@"请稍候..."];

    if (webView.canGoBack) { self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:btnBack]; } else { self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] init]; } }

# javascript - 用于日期和名称规则的 JS RegEx

> ID：12105281
> 
> 赞同：1
> 
> 时间：2012-08-24T07:55:57.097
> 
> 标签：javascript, regex, date, rule

> **可能重复：**
> [通过 jQuery 验证日期字符串格式的最佳方法](https://stackoverflow.com/questions/11218181/best-way-to-validate-date-string-format-via-jquery)

日期验证：dd/mm/yyyy 或 d/m/yyyy

```
/^({|()?[0-9]{1,2}\/([0-9]{1,2}\/[0-9]{4}))+$/ 
```

但是如何设置最大日、最大月、年规则？（最大天数 = 31，最大月数 = 12，年 = 1900-2012）

* * *

名称验证：

```
/[a-zA-Zøæå]{2,40}$/ 
```

规则：字母 az AZ , Ø,Æ,Å (min=2, max=40)

你能回顾一下这个正则表达式规则吗？+ 这个剂量不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:21:23.857

[通过 jQuery 验证日期字符串格式的最佳方法](https://stackoverflow.com/questions/11218181/best-way-to-validate-date-string-format-via-jquery/11218271#11218271)

# jquery - “jQuery” “谷歌云存储”

> ID：12105289
> 
> 赞同：2
> 
> 时间：2012-08-24T07:56:42.150
> 
> 标签：jquery, google-cloud-storage

我是新来的，
有什么简单的方法可以用“jQuery ajax”访问“谷歌云存储”对象吗？

到目前为止，我所了解的是它使用 REST，我必须设置我的[请求标头](https://developers.google.com/storage/docs/reference-methods)并使用 OAuth 2.0 授权访问或生成我的[签名 URL](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)，并使用“gsutil setcors”启用“桶上的 CORS”。

我无法将这些信息拼凑在一起以获得工作样本。任何人都可以帮助将链接或样本转发到：

1）在“桶”（www.testing.com）中获取一个“对象”（比如 testing.xml），并使用 jQuery ajax 启用“公开共享”（不需要授权）？

2）在不是“公开共享”的存储桶中放置/删除/获取对象（并且需要授权）？

非常感谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:19:18.707

使用 JSON api 可能更容易做到这一点，其中包含一个 JavaScript 客户端库。看看：[https ://developers.google.com/storage/docs/json_api/](https://developers.google.com/storage/docs/json_api/)

# vim - 如何在 vim 中编写简单的脚本？

> ID：12105290
> 
> 赞同：3
> 
> 时间：2012-08-24T07:56:53.333
> 
> 标签：vim

在这里，我为熟练的 vimers 完成了简单的任务。我需要重新格式化我的 css 文件。有一些命令可以做到这一点：

```
%s/}/&\r/g
%s/  /   /g
retab!
echo "You done did it!" 
```

但是我不想每次需要格式化我的css文件时都输入这些命令（我是在通过WinLess程序转换less文件后得到的）。现在我把这些命令放到 cssformat.vim 文件中，然后把这个文件放到 vim 运行时文件夹中。在我的 vimrc 我设置：

autocmd 文件类型 css nmap :so $VIM/vim73/cssformat.vim

当然，这是有效的。但我想知道我怎样才能更好地完成这项任务？在开始时，我想将这些命令放在我的 vimrc 中（以创建一个简单的函数），但我不知道如何正确执行此操作。

ps对不起我的英语不好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:08:28.140

只需将脚本中的命令放入函数中：

```
function! ReformatCss()
    " Place your commands here.
endfunction 
```

并将这些东西移动到您的`.vimrc`. 现在您可以通过`:call ReformatCss()`.

最重要的是，让它更简单，定义你自己的命令：

```
command! ReformatCss call ReformatCss() 
```

现在您可以通过`:ReformatCss`. 瞧！

* * *

`:help usr_40.txt`您可以在和了解更多信息`:help :command`。例如，如果你只需要这个 CSS 文件，你可以把它变成一个缓冲区本地命令，`command -buffer`并将函数和命令定义移动到`~/.vim/ftplugin/css_reformat.vim`

# php - 客户管理系统 - 存储多个表格

> ID：12105295
> 
> 赞同：0
> 
> 时间：2012-08-24T07:57:11.003
> 
> 标签：php, mysql, mysqli

我目前正在为一家初创网页设计/SEO 公司编写一个非常复杂的 PHP 管理系统。该系统使我们的技术人员能够更有效地管理客户，并让客户跟踪他们的项目进度。

一项功能是我们的技术人员能够为客户分配表格以填写他们的信息，并将此表格数据存储在他们的客户管理员中以供将来参考和编辑。

当然，每个项目/提供的包都是不同的，所以一个客户可能需要的表格，另一个客户不需要，但总而言之，可能会有 8-10 种不同的表格可以分配。

我的问题是，将每个表单的数据保存在与客户特定 ID 对应的不同表中会更好，还是我应该将表单数据写入客户端/表单特定的 .txt 文件，并从中检索数据那些文件？例如：

客户端 #1132 填写 form1 -> 创建表“1132_form1” -> 插入表单数据

客户端 #1132 填写表格 2 -> 创建表“1132_form2” -> 插入表格数据

- -或者 - -

客户端 #1132 填写表单 1 -> 在“users/1132/forms”中创建 form1.txt -> 将表单数据写入 form1.txt

客户端 #1132 填写表单 2 -> 在“users/1132/forms”中创建 form2.txt -> 将表单数据写入 form2.txt

如果您有一个完全超出这些选项的更好的想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:20:48.660

你在想这一切都是错的。您应该研究关系数据库设计和规范化的基础知识。您正在寻找的是客户的**父**表和表单的**子**表。非常基本的例子：

```
**Clients** 
client_id INT(11) PRIMARY KEY
client_name TEXT

**Forms**
form_id INT(11) PRIMARY KEY
client_id INT(11) (will correspond to the client_id in the Clients table)
form_location TEXT (location of the form on disk. i.e. the location of it on your server) 
```

拥有这种数据库设计将允许您为每个客户拥有多个表单。

# c++ - 创建其他类实例的 C++ 模板类

> ID：12105296
> 
> 赞同：0
> 
> 时间：2012-08-24T07:57:12.890
> 
> 标签：c++, templates

我是 C++ 新手，我不知道模板类，但我想我可以使用模板来解决我的问题。我有两节课，

```
class Foo
{
 public:
    Foo (int a, char b);
};

class Bar
{
 public:
    Bar (int a);
}; 
```

并且这些类彼此不相关。

我的问题是，是否可以创建一个模板类来创建`Foo`and的实例`Bar`？可以这样使用的东西：

```
TemplateClass<Foo>::createClass(); 
```

但我不确定参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:02:43.590

您可以为此使用 C++11。

```
template<typename T>
class TemplateClass
{
public:
   template<class... Args>
   static T createClass(Args&&... args)
   {
      return T(std::forward<Args>(args)...);
   }
};

Foo f = TemplateClass<Foo>::createClass(1, '1');
Bar b = TemplateClass<Bar>::createClass(1); 
```

或者使用 C++03 使用不同的重载。

```
template<typename T>
class TemplateClass
{
public:
   static T createClass()
   {
      return T();
   }
   template<typename Arg1>
   static T createClass(const Arg1& arg)
   {
      return T(arg);
   }
   template<typename Arg1, typename Arg2>
   static T createClass(const Arg1& arg1, const Arg2& arg2)
   {
      return T(arg1, arg2);
   }
}; 
```

等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:10:34.190

构造函数不是普通函数，因此不能`bind`轻松地与其他函数机制一起使用。正如 ForEver 所示，使用 C++11 编写功能有限的包装器很容易，但是如果没有 C++11 并且当您需要的不仅仅是基本功能时，这可能会变得很棘手。您可以为此使用[Boost.Factory](http://www.boost.org/doc/libs/1_49_0/libs/functional/factory/doc/html/index.html)。

# c# - 是否有任何 CoolStorage for MonoTouch 活动的记录？

> ID：12105309
> 
> 赞同：1
> 
> 时间：2012-08-24T07:58:14.967
> 
> 标签：c#, xamarin.ios, coolstorage

将 CoolStorage 用作 ASP.NET 项目的一部分时，您可以在 Web.Config 中定义一个日志文件，其中 CoolStorage 活动被转储。

使用 CoolStorage for MonoTouch 时是否有类似的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:02:01.237

其实很简单：

```
var docFolder = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);

CSConfig.Logging = true;
CSConfig.LogFileName = Path.Combine(docFolder,"coolstorage.log"); 
```

这会将所有 CoolStorage 活动记录在文档文件夹中的文件“coolstorage.log”中。

# mysql - 当连接到安装在 64 位操作系统上的 MySQL 服务器时，VB.NET 无法读取 PLC 寄存器

> ID：12105312
> 
> 赞同：1
> 
> 时间：2012-08-24T07:58:28.430
> 
> 标签：mysql, vb.net, tcp, plc

这是我遇到过的最奇怪的问题。所以这是我拥有的东西：

1.  VB 应用程序通过以太网端口、一些 SNMP 陷阱、SMS 调制解调器读取 Fatek PLC 并在端口上侦听以接收一些要执行的命令。
2.  32 位操作系统上的 MySQL 服务器和 64 位操作系统上的 MySQL 服务器。

当应用程序连接到 32 位操作系统上的 MySQL 服务器时，没有问题。它每 5 秒读取一次 PLC 寄存器，没有问题。

但是当应用程序连接到 64 位操作系统上的 MySQL 服务器时，它不能每 5 秒读取一次 PLC，而是每分钟读取一次。

我已经尝试了所有其他可能的组合，它仅在连接到安装在 32 位操作系统上的 MySQL 服务器时才有效，并且在连接到安装在 64 位操作系统上的 MySQL 服务器时不起作用。

任何帮助将不胜感激。

# java - Java静态 - 方法或字段与否？

> ID：12105313
> 
> 赞同：0
> 
> 时间：2012-08-24T07:58:30.683
> 
> 标签：java, static

> **可能重复：**
> [Java 中的静态初始化程序](https://stackoverflow.com/questions/335311/static-initializer-in-java)

我想知道这个静态的东西（对不起，这是我第一次遇到这个）对一个类有什么作用，或者它的目的是什么。

```
 public class SomeClass{

           //this is a static field
           private static String someStaticStringField;
           ... //other static fields

           //what is this?
           static{
                 log.debug("Loading config file");
                 try{
                        Class cls = Class.forName("package.ClassName");  
                        properties = new Properties();

                        ...

                 } catch(Exception e){
                        log.error("Error in loading config file");
                 } 

           }

           //this is a static method
           public static String getSomeStaticStringField(){
                  return someStaticStringField;
           }

    } 
```

一般来说，这个 static{} 做什么以及它对 Class 的用途是什么？什么是正确的称呼？它是类字段、方法还是其他？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:01:08.050

这称为静态初始化器；它在第一次引用类时运行（就像静态变量的任何初始化一样，除了这允许更好的初始化，因为你有一个完整的块）。它不是一种方法，也不是一个领域

# asp.net-mvc - MVC 日期时间验证失败

> ID：12105316
> 
> 赞同：6
> 
> 时间：2012-08-24T07:58:40.377
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, asp.net-mvc-4, model-validation

我发现了很多类似的问题，但不是一个很好的干净的解决方案。我看到很多自定义代码可以让它工作，但这是为什么呢？这不应该从一开始就起作用吗？

我认为奇怪的是，它在 IE9 中有效，但在 Firefox 和 Chrome 中却失败了。每次在 Firefox 或 Chrome 中尝试时，我都会收到消息“生日字段必须是日期”。

当我在一个新的 MVC 4 RTM 项目中尝试下面的代码时，我无法让它工作。我在所有浏览器中都看到 DateTime.Now 默认为 dd-MM-yyyy（荷兰），但我无法在 Firefox 和 Chrome 中提交它。

全球化标签未在 web.config 中设置，因此它必须使用默认值。我来自荷兰，所以我猜它应该得到客户文化。

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    //[DataType(DataType.Date)]
    public DateTime Birthday { get; set; }
}

[AllowAnonymous]
    public ActionResult Register()
    {
        RegisterModel vm = new RegisterModel()
        {
            Birthday = DateTime.Now
        };
        return View(vm);
    }

    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                //WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                //WebSecurity.Login(model.UserName, model.Password);
                return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

标记

```
<!-- language: lang-none -->
@model DateTimeWithDatePicker.Models.RegisterModel
@{
   ViewBag.Title = "Register";
}

<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
    <h2>Create a new account.</h2>
</hgroup>

@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

    <fieldset>
        <legend>Registration Form</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
            </li>
            <li>
                @Html.LabelFor(m => m.Birthday)
                @Html.EditorFor(m => m.Birthday)
            </li>
        </ol>
        <input type="submit" value="Register" />
    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T17:38:29.940

我可以通过修改日期的 jQuery 验证器函数来解决这个问题：

```
 <script type="text/javascript">

  $(function () {

    var dateFormat="dd/mm/yy"; // en-gb date format, substitute your own

    $("#Birthday").datepicker({
        "dateFormat": dateFormat
    });

    jQuery.validator.addMethod(
        'date',
        function (value, element, params) {
            if (this.optional(element)) {
                return true;
            };
            var result = false;
            try {
                $.datepicker.parseDate(dateFormat, value);
                result = true;
            } catch (err) {
                result = false;
            }
            return result;
        },
        ''
    );

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T07:17:45.670

问题是 jQuery 验证和本地化。似乎有 jQuery 插件的消息和方法的本地化文件。有关该问题的详细说明以及我如何解决它，请参阅我的博客。

[http://www.locktar.nl/programming/mvc/localization-validation-in-mvc/](http://www.locktar.nl/programming/mvc/localization-validation-in-mvc/)

**编辑：** 我刚刚发布了一篇新的博客文章，其中更新了所有本地化问题以及如何为 DateTime 属性修复它。请参阅我的新帖子[MVC 本地化验证](http://www.locktar.nl/programming/mvc-localization-validation/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:02:19.083

> 全球化标签未在 web.config 中设置，因此它必须使用默认值。我来自荷兰，所以我猜它应该得到客户文化。

不，这是不正确的。您可以在荷兰完全没问题，并且已将您的浏览器配置为使用中国文化。您无法使其正常工作的原因可能是因为在 FF 和 Chrome 中您没有正确的文化。

由于您没有在 web.config 中的全球化元素中指定文化，ASP.NET MVC 将使用从浏览器发送的请求标头中的文化。例如，如果您将浏览器配置为 en-US 文化，则将在每个请求中设置以下标头：

```
Accept-Language:en-US,en;q=0.8 
```

这是在 Chrome 中的配置方式：

![在此处输入图像描述](../Images/e29779904d0c7e0348c3e1a8edcd14f2.png)

因此，请确保您已将所需语言放在列表的首位。

如果您想要一种可靠的方法来使用与模型绑定期间属性中定义的语法相同的语法，`DisplayFormat`您可以编写一个自定义模型绑定器，如下所示：[https ://stackoverflow.com/a/7836093/29407](https://stackoverflow.com/a/7836093/29407)

# html - 标签滚动不正确

> ID：12105317
> 
> 赞同：1
> 
> 时间：2012-08-24T07:58:41.213
> 
> 标签：html, css, height, hashtag

我有一个页面，它有 2 个高度相等的假列（应用负边距 -9999px 和正填充 9999px）。但是，如果我尝试通过 id 的标签跳转到页面中间，页面似乎一直向下滚动，我看不到页面的顶部。这似乎很奇怪，并且发生在所有浏览器中......

谁能帮我这个？

# ios - phonegap 插件中的 appdelegate 实现

> ID：12105320
> 
> 赞同：1
> 
> 时间：2012-08-24T07:58:56.550
> 
> 标签：ios, phonegap-plugins

我开发了一个 ios 应用程序，它可以在后台运行以频繁获取位置数据。它的实现方式是在“applicationDidEnterBackground”方法中的 appdelegate 类中操作核心功能以获取位置数据。

现在，我需要使用本机代码创建一个 phonegap 插件。而且我不确定如何在插件中包含该应用程序的 appdelegate 的实现。我已经阅读了这个插件开发的大部分教程，但我找不到关于这个问题的线索。

有人知道解决办法吗？？提前谢谢。

# xcode - 程序接收信号SIGABRT错误

> ID：12105321
> 
> 赞同：0
> 
> 时间：2012-08-24T07:58:58.463
> 
> 标签：xcode, wcf, rest

我正在开发一个 iPhone 应用程序，我必须在其中从 iPhone 调用 REST 服务。我成功地做到了，并成功地得到了回应。但后来我更改了`xib`文件，以便在标签上显示输出。然后在`xib`我运行应用程序时更改文件后，我得到以下异常：

```
Program received signal SIGABRT 
```

在下面的代码中？由于我是 iPhone 开发的初学者，我不知道如何解决这个错误。这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    self.window.rootViewController = self.viewController; ///error at this line///
    [self.window makeKeyAndVisible];
    return YES;
} 
```

如何修复此错误？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:30:25.513

在`IphonedevsdkViewController`XIB 中，您必须将最顶层的视图连接到`view`File Owner 的出口。

# perl - 如何将已编辑名称的文件（来自用户的输入）复制到同一目录？

> ID：12105326
> 
> 赞同：0
> 
> 时间：2012-08-24T07:59:57.157
> 
> 标签：perl

我想向用户请求一个 txt 文件，并复制一个完全相同的副本，其名称在同一位置的复制文件上编辑。

例如：用户提供 /file/works/done/abc.txt

复制的文件需要是 /file/works/done/ **abc_edited** .txt

我可以复制文件。但是，我不能将名称附加到我希望拥有的名称上。假设：`$file`是用户的参数，例如：`$file`是/file/works/done/abc.txt 代码如下：

```
my $a = '_edited'; 
my $duplicatedfile = $file.$a; 
copy($file,$duplicatedfile) or die "Failed to copy $file: $!\n 
```

执行后，复制的文件是 /file/works/done/abc.txt_edited 但是我希望拥有的是 /file/works/done/abc_edited.txt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:02:56.400

向我们展示一些代码和您遇到的问题，但请不要要求我们为您编写全部内容。您可能希望查看该`File::Copy`模块以了解易于使用的“复制文件”方法。

哦，好吧，在阅读了您的评论后，您似乎只需要类似的东西

```
my $new_file_name = $file;
$new_file_name =~ s/\.([^\.]+)$/_edited.$1/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:43:28.010

```
use File::Basename;

my $full_path = '/file/works/done/abc.txt';
my ($name, $path, $ext) = fileparse($full_path, qr/\.[^.]*/);
my $new_full_path = $path.$name.'_edited'.$ext;

print $new_full_path; 
```

# android - 从 array.xml 在 ListView 中使第一行变得丰富多彩

> ID：12105329
> 
> 赞同：0
> 
> 时间：2012-08-24T08:00:18.230
> 
> 标签：android

我有一个包含列表视图的应用程序，我希望列表视图的第一行是蓝色的。我从数组 xml 中做了列表视图，这里是代码和 XML：JAVA：

```
public class MainActivity extends Activity implements OnItemClickListener {
 ListView list;
 ArrayAdapter<String> adaptr;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    list = (ListView) findViewById(R.id.listView1);
    adaptr = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1
            , getResources().getStringArray(R.array.list_view));
    list.setAdapter(adaptr);
    list.setOnItemClickListener(this);
    list.setFastScrollEnabled(true);

}  

public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
    Dialog dialog1 = new Dialog(this, R.style.PauseDialog);
    dialog1.setContentView(R.layout.dialog1);
    TextView text = (TextView) dialog1.findViewById(R.id.tv1);
    dialog1.setTitle(R.string.Title);

    if(position == 1) {
        text.setText("First Dialog");
        dialog1.show();
        }
    if(position == 2) {
        text.setText("Second Dialog");
        dialog1.show();
        return;
        }   
    if(position == 3) {
        text.setText("Third Dialog");
        dialog1.show();
        return;
        }
} 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="list_view"> 
      <item>All Rights Saved to XXX</item>
      <item>Line 1</item>
      <item>Line 2</item>   
      <item>Line 3</item>
    </array> 
</resources> 
```

我想要第一个项目（“All Rghits ....”）将是蓝色（颜色）（另一个将是常规（黑色））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:17:41.507

[您可以使用listView.addheaderView](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View,%20java.lang.Object,%20boolean%29)以编程方式添加 HeaderView 。您可以将视图颜色更改为蓝色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:30:34.237

编写自己的`Adapter`扩展`ArrayAdapter`。然后你可以在你的方法实现中返回`View`你需要的任何东西。`getView()`

# opengl - 这个简单的 FxAA 是如何工作的？

> ID：12105330
> 
> 赞同：11
> 
> 时间：2012-08-24T08:00:26.887
> 
> 标签：opengl, graphics, opengl-es, shader

我遇到了这个 FxAA 着色器，它可以进行抗锯齿处理，而且似乎工作得很好。但是，莫名其妙地无法理解其中的逻辑。有人可以解释吗？

```
[[FX]]

// Samplers
sampler2D buf0 = sampler_state {
    Address = Clamp;
    Filter = None;
};

context FXAA {
    VertexShader = compile GLSL VS_FSQUAD;
    PixelShader = compile GLSL FS_FXAA;
}

[[VS_FSQUAD]]

uniform mat4 projMat;
attribute vec3 vertPos;
varying vec2 texCoords;

void main(void) {
    texCoords = vertPos.xy; 
    gl_Position = projMat * vec4( vertPos, 1 );
}

[[FS_FXAA]]

uniform sampler2D buf0;
uniform vec2 frameBufSize;
varying vec2 texCoords;

void main( void ) {
    //gl_FragColor.xyz = texture2D(buf0,texCoords).xyz;
    //return;

    float FXAA_SPAN_MAX = 8.0;
    float FXAA_REDUCE_MUL = 1.0/8.0;
    float FXAA_REDUCE_MIN = 1.0/128.0;

    vec3 rgbNW=texture2D(buf0,texCoords+(vec2(-1.0,-1.0)/frameBufSize)).xyz;
    vec3 rgbNE=texture2D(buf0,texCoords+(vec2(1.0,-1.0)/frameBufSize)).xyz;
    vec3 rgbSW=texture2D(buf0,texCoords+(vec2(-1.0,1.0)/frameBufSize)).xyz;
    vec3 rgbSE=texture2D(buf0,texCoords+(vec2(1.0,1.0)/frameBufSize)).xyz;
    vec3 rgbM=texture2D(buf0,texCoords).xyz;

    vec3 luma=vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);

    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max(
        (lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL),
        FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0/(min(abs(dir.x), abs(dir.y)) + dirReduce);

    dir = min(vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),
          max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
          dir * rcpDirMin)) / frameBufSize;

    vec3 rgbA = (1.0/2.0) * (
        texture2D(buf0, texCoords.xy + dir * (1.0/3.0 - 0.5)).xyz +
        texture2D(buf0, texCoords.xy + dir * (2.0/3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (
        texture2D(buf0, texCoords.xy + dir * (0.0/3.0 - 0.5)).xyz +
        texture2D(buf0, texCoords.xy + dir * (3.0/3.0 - 0.5)).xyz);
    float lumaB = dot(rgbB, luma);

    if((lumaB < lumaMin) || (lumaB > lumaMax)){
        gl_FragColor.xyz=rgbA;
    }else{
        gl_FragColor.xyz=rgbB;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T15:40:55.817

FxAA 是一种对图像执行抗锯齿的过滤算法。与其他 AA 技术相反，它应用于图像的像素，而不是在绘制图元时。在诸如游戏之类的 3D 应用程序中，它被用作渲染场景之上的后处理步骤。

基本思想是：寻找垂直和水平边缘。如果在边缘的末端，则在正交方向上模糊。

这是一个[很好的描述](http://www.codinghorror.com/blog/2011/12/fast-approximate-anti-aliasing-fxaa.html)和关于这个主题的[原始论文](http://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf)。

# c++ - linux中的上下文获取SIGSEGV

> ID：12105336
> 
> 赞同：0
> 
> 时间：2012-08-24T08:00:48.987
> 
> 标签：c++, linux, multithreading, scope

我对用户定义线程的上下文内容很陌生。我在上下文上写了一个简单的程序......但它给了我分割错误......

```
#include<iostream>
#include<ucontext.h>
#include<stdlib.h>
using namespace std;
void fun1()
{
cout<<"from 1";
}
void fun2()
{
cout<<"from 2";
}
int main()
{
ucontext_t a,b;
cout<<"y";
getcontext(&b);
b.uc_link=0;
b.uc_stack.ss_sp=malloc(32767);
b.uc_stack.ss_size=32767;
b.uc_stack.ss_flags=0;
makecontext(&b, fun1, 0);   
getcontext(&a);
a.uc_link=&b;
a.uc_stack.ss_sp=malloc(32767);
a.uc_stack.ss_flags=0;
makecontext(&a, fun2, 0);
setcontext(&a);
return 0;
}
`
I want to know how to allocate memory using 
```

> 新的而不是**malloc**？？有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:10:19.517

你忘记了：

```
a.uc_stack.ss_size=32767; 
```

# android - Android 的代码覆盖率 (calabash-android BDD)

> ID：12105337
> 
> 赞同：4
> 
> 时间：2012-08-24T08:00:53.983
> 
> 标签：android, code-coverage, cobertura, emma

我正在使用[calabash-android](https://github.com/calabash/calabash-android)测试我的 android 应用程序，它提供了它自己的“测试项目”，并使用一个脚本重命名它的包以反映被测应用程序，然后使用 InstrumentationTestRunner 子类：

```
adb shell am instrument -w -e class sh.calaba.instrumentationbackend.InstrumentationBackend #{ENV['TEST_PACKAGE_NAME']}/sh.calaba.instrumentationbackend.CalabashInstrumentationTestRunner 
```

我将接受任何允许我为 Android 应用程序生成类似于 Emma 或 Cobertura 的代码覆盖率报告的答案，并在 calabash-android 中进行测试时收集数据。

## 为了让艾玛工作，我...

*   尝试按照[这些说明](http://code.google.com/p/maven-android-plugin/wiki/EmmaMaven)让 Maven 构建我的项目（因为我使用 ant 已经太久了）。生成一个`coverage.em`文件`target/emma`
*   修改calabash-android脚本，增加“ `-e coverage true`”
*   当我运行 calabash-android 时，我最终看到“生成的覆盖数据到 /data/data/my.project/files/coverage.ec”
*   `adb -e pull /data/data/my.project/files/coverage.ec coverage.ec`

...所以现在我应该能够运行：

*   `java -cp $ANDROID_HOME/tools/lib/emma.jar emma report -r html -in target/emma/coverage.em,coverage.ec`

*但*我收到一个错误：

```
EMMA: processing input files...
java.io.UTFDataFormatException: malformed input around byte 107 
```

...所以我认为[android maven 插件](https://github.com/calabash/calabash-android)有问题，我试图弄清楚如何生成`coverage.em`文件。我跑了“ `android update project -p .`”和“ `ant emma`”和“ `ant emma debug`”，但**我在任何地方都找不到coverage.em** ...

...生成的 build.xml 文件似乎暗示只有在您运行“ant emma test”时才会生成coverage.em 文件，但我认为这不会起作用，因为测试应用程序由葫芦-机器人。

## 为了让 Cobertura 工作，我有...

*   谷歌搜索了各种形式的“cobertura android”，但似乎没有人有任何运气。
*   尝试在我的 Maven pom 文件中配置 cobertura 配置文件来检测类，但是（在 Maven 3 中）我得到了
    *   一大堆关于 log4j 和 ant 具有“InnerClasses”属性的警告，我应该从源代码重新编译它们
    *   com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.0:dex "ANDROID-040-001: 无法执行的错误：Command = /bin/sh -c -cd /path/ to/myproject && java -jar $ANDOID_HOME/platform-tools/lib/dx.jar --dex ..."

* * *

```
EXCEPTION FROM SIMULATION:
local variable type mismatch: attempt to set or access a value of type 
java.lang.Class using a local variable of type java.lang.reflect.Type[].  
This is symptomatic of .class transformation tools that ignore local variable information. 
```

...这可能就是为什么没有人能够让 cobertura 在 Android 上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T09:26:37.333

问题是`maven-android-plugin`使用 emma 的 2.1.5320 版本，而 Android 工具使用 2.0.5312 版本。正如[这里所讨论的](http://jira.codehaus.org/browse/SONARPLUGINS-655)，这两个版本是不兼容的。

解决方法是在这两个工具中只使用一个版本。我已经能够通过克隆`maven-android-plugin`存储库、将 emma 依赖版本设置回 2.0.5312 并将其安装到我的本地存储库来使其工作。确保您的被测项目中的 emma 依赖项也是正确的，然后您应该能够生成覆盖率。

另一种方法是确保所有工具都使用最新版本。我还没有测试过，但是如果你从 maven 生成报告，它可能会起作用，因为版本会是一样的。您还可以下载最新版本的 emma 并使用该软件包中的 jar 生成报告。

# facebook - 特定的fb页面不适用于like按钮

> ID：12105338
> 
> 赞同：0
> 
> 时间：2012-08-24T08:00:56.773
> 
> 标签：facebook, facebook-graph-api, facebook-like

一段时间以来，我已经为此特定页面设置了类似按钮/框的设置。但现在它停止了工作：

在此页面上使用生成的代码（用于 iframe）：

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

显示这个 fb 页面：

[http://www.facebook.com/JohnPurkiss](http://www.facebook.com/JohnPurkiss)

不显示/工作。如果我将 iframe 中的like button url 修改为另一个 fb 页面，它确实有效。我没有尝试使用需要应用程序的按钮/插件。只是一个简单的简单按钮。但在我看来，这个特定的 fb 页面存在问题（上面的 johnpurkiss）

非常感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:03:43.063

这里的问题是您链接到的“页面”实际上是个人用户。

你不能以同样的方式“喜欢”一个用户

*   您不能将页面添加为朋友...
*   或“戳”一个事件......
*   或订阅照片...

你会提供一个实际的**页面**来被喜欢。

正如您从下面从您提供的链接中截取的屏幕截图中看到的那样，没有找到喜欢的按钮。

只有“添加朋友”和“订阅”按钮。我不确定将您的个人资料转换为页面是否是您想要的方式，但这是可能的。 [您可以在此链接中了解如何操作](https://www.facebook.com/help?page=213602951994043)。

# android - Android：当方向从纵向更改为reversePortait时捕获事件

> ID：12105342
> 
> 赞同：2
> 
> 时间：2012-08-24T08:01:12.017
> 
> 标签：android, orientation-changes, event-capturing

我的应用程序仅支持纵向模式，包括倒置视图。因此，我在清单中有以下内容：

```
android:screenOrientation="sensorPortait" 
```

还有以下捕获方向变化事件：

```
android:configChanges="orientation|keyboardHidden" 
```

但是仅支持纵向的应用程序不会触发 onConfigurationChanged 事件。

当应用程序将方向从正常纵向更改为反向纵向时，我需要捕获该事件。任何想法？

# coronasdk - 如何在 corona sdk 中使用本机代码？

> ID：12105344
> 
> 赞同：1
> 
> 时间：2012-08-24T08:01:21.393
> 
> 标签：coronasdk

> 如何在 corona sdk 中使用本机代码？

嗨，我被困在如何在电晕中使用 android 的本机代码。任何人都解释了如何逐步附加本机代码...

* * *

感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:10:22.477

我不知道一步一步，因为我没有 Corona Enterprise。

要做到这一点，您需要 Corona Enterprise...

但是 Corona Enterprise 基本上也作为一种原生 API 工作，你可以链接到你的原生应用程序，并且要在 Corona Enterprise 中使用原生的东西，你可以编写它的原生代码版本，进行 lua 绑定并从 Corona 内部调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T04:19:43.527

[http://docs.coronalabs.com/native/index.html](http://docs.coronalabs.com/native/index.html)，您需要购买使用原生 Api 编码的 Corona 企业版：[https ://coronalabs.com/pricing/](https://coronalabs.com/pricing/)

# javascript - 无法在 javascript 中第一次读取 cookie

> ID：12105346
> 
> 赞同：2
> 
> 时间：2012-08-24T08:01:35.253
> 
> 标签：javascript, asp.net, cookies

我正在使用 Javascript 设置 cookie 并从 cookie 中读取值。我正在使用[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)上提供的代码来创建和读取 cookie 的值。页面加载时我正在检查该 cookie 是否存在。一切正常，除了当我第一次设置它并尝试在下一页加载时读取它时它没有读取 cookie。它正在设置 cookie，但不是第一次读取.

这是我的代码：-

```
function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}

//To get the cookie:-
function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
}
//to Delete the cookie:-
function cookieDelete(c_name) {
    setCookie(c_name, "delete", -1);
} 
```

在页面加载时，我像这样使用它：-

```
$(document).ready(function () {

       var aZ = getCookie("menuSave");
       if (aZ) {
           //do Some thing here 
       }
       else {
           setCookie("menuSave", "mysp", null);

       }

   }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:27:10.567

您需要为您的 cookie 添加一个“路径”。例如：

```
document.cookie = 'ppkcookie2=又一次测试；expires=2001 年 7 月 27 日星期五 02:47:11 UTC；路径=/';

```

路径代表您网站中 cookie 可读的相对路径。

`path=/`意味着它将在您的整个网站上可读。
`path=/common/`意味着它只能在 /common/ 文件夹（及其子文件夹）中读取

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:13:50.833

这可能不是您问题的答案，而是另一种更简单的解决方案，希望对您有所帮助！

保存菜单

```
localStorage.setItem("menusave","vale"); 
```

负载值

```
localStorage.getItem("menusave"); 
```

只是想帮忙！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:54:16.173

由于您已将问题标记为 asp.net，

您可以按如下方式设置 cookie：

```
HttpCookie aCookie = new HttpCookie("lastVisit");
aCookie.Value = DateTime.Now.ToString();
aCookie.Expires = DateTime.Now.AddDays(1);
Response.Cookies.Add(aCookie); 
```

并像这样读回来：

```
if(Request.Cookies["lastVisit"] != null)
    Label1.Text = Server.HtmlEncode(Request.Cookies["lastVisit"].Value); 
```

请参阅[MSDN Cookie 概述](http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T09:07:36.260

当您通过`null`到期日时，它会使您的 cookie 成为不会持续很长时间的会话 cookie。

改变这个：

```
setCookie("menuSave", "mysp", null); 
```

给它一个实际的到期日期：

```
setCookie("menuSave", "mysp", 7); 
```

如果您想从设置它的完全相同页面之外的任何页面检索 cookie，您还需要在 cookie 中设置一个路径值，以允许在不只是设置它的确切页面上检索 cookie。

# java - Javafx 2 本机开发和分发加密狗

> ID：12105350
> 
> 赞同：0
> 
> 时间：2012-08-24T08:01:48.143
> 
> 标签：java, native, dongle

1.  Javafx 2 类可以变得安全吗？本机文件，因此它们不可读？
2.  使用 oracle 方法的本机捆绑 - 代码可读吗？
3.  有没有办法使用软件或硬件（加密狗）密钥分发我们的应用程序？

谢谢

# objective-c - 在 AFNetworking 中暂停下载 - 目标 c

> ID：12105351
> 
> 赞同：0
> 
> 时间：2012-08-24T08:02:00.193
> 
> 标签：objective-c, ios, nsurlrequest, afnetworking

如何在 AFNetworking 中暂停下载？我正在使用 AFHTTPRequestOperation 下载文件，但只有取消方法。如何暂停和恢复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T19:47:11.047

您真正需要的是[AFDownloadRequestOperation](https://github.com/steipete/AFDownloadRequestOperation)，它允许您在下载期间暂停/恢复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:01:05.213

`AFURLConnectionOperation Class`有`pause`, `resume`.

看看这个：

[https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFURLConnectionOperation.h](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFURLConnectionOperation.h)

您还必须添加`#import "AFURLConnectionOperation.h"`.

AFHTTPRequestOperation 类由 AFURLConnectionOperation 类继承。

# c# - 在 SQL Server 中创建自定义程序集引发在数据库错误中找不到程序集

> ID：12105354
> 
> 赞同：5
> 
> 时间：2012-08-24T08:02:04.247
> 
> 标签：c#, sql-server, clr

我正在尝试在 SQL Server 2008 中为 CLR 过程项目的第三方 dll（在 .net 中开发）创建程序集，

```
create assembly [`XXXX.XXX.XXX.dll`]  
authorization dbo  
from 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\XXXX.XXX.XXX.dll'  
with permission_set = unsafe 
```

但是我在执行上面的脚本时遇到了这个错误：

> *程序集“XXX.XXX.XXX.XXX”引用程序集“XXX.XXX.XXXXX”，版本=0.0.0.0，文化=中性，publickeytoken=null。，当前数据库中不存在。SQL Server 试图从引用程序集所在的同一位置定位并自动加载引用程序集，但该操作失败（原因：2（系统找不到指定的文件。））。请将引用的程序集加载到当前数据库中，然后重试您的请求。*

感谢您帮助解决此问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-20T16:50:50.833

您可以将程序集添加到 CLR 使用的数据库中。

例如，我已将 System.Messaging.dll 添加到 SQL Server 2014，如下所示

```
CREATE ASSEMBLY [System.Messaging]
FROM 'C:\Windows\Microsoft.NET\Framework64\v4.0.30319\System.Messaging.dll'
WITH PERMISSION_SET = UNSAFE;
GO 
```

它将添加链接到该组件的必要的其他引用程序集。之后，我像这样添加了 Newtonsoft.Json.dll：

```
CREATE ASSEMBLY [Newtonsoft.Json]
FROM 'C:\Users\RiaanDL\Downloads\Json60r3\Bin\Net45\Newtonsoft.Json.dll'
WITH PERMISSION_SET = UNSAFE;
GO 
```

请记住在项目配置中将您的 SQLCLR 权限级别设置为不安全。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T09:38:24.630

SQL Server 中的程序集不能从 GAC 中引用程序集，除非它们在“祝福”列表中。该列表如下：

*   mscorlib.dll
*   系统数据.dll
*   系统.dll
*   System.Xml.dll
*   System.Security.dll
*   System.Web.Services.dll
*   System.Data.SqlXml.dll
*   System.Transactions.dll
*   System.Configuration.dll
*   Microsoft.VisualBasic.dll
*   Microsoft.VisualC.dll
*   CustomMarshalers.dll
*   System.Data.OracleClient.dll

任何其他程序集都需要使用该`CREATE ASSEMBLY`语法在 SQL Server 中创建——即使是来自 .NET Framework 本身但不在上面列表中的程序集。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-17T15:51:12.440

我知道很久以前就有人问过这个问题，但我想分享我的发现和解决方案，以便它可以帮助某人。

为了从 .NET Framework 创建自定义或本机程序集，您需要为数据库设置**TRUSTWORTHY** **ON**。

```
ALTER DATABASE [DATABASE NAME] SET TRUSTWORTHY ON; 
```

在此之后，您可以执行以下脚本来创建程序集。在我的示例中，我正在尝试为“System.Net.Http”创建程序集

```
CREATE ASSEMBLY [System.Net.Http]
FROM
   'C:\Windows\Microsoft.NET\Framework64\v4.0.30319\System.Net.Http.dll'
WITH PERMISSION_SET = UNSAFE; 
```

对于您的情况，您需要正确地指向您的客户程序集 (dll) 位置以使其正常工作。

注意：只有少数支持的程序集可以在[此处](https://support.microsoft.com/en-us/help/922672/support-policy-for-untested-net-framework-assemblies-in-the-sql-server)找到。如果使用了指定程序集以外的任何东西，那么您将收到如下所示的警告。在我的示例中，当我尝试为 [System.Net.Http] 创建程序集时，我得到以下警告。

> Microsoft .NET 框架程序集 'system.net.http，version=4.0.0.0，culture=neutral，publickeytoken=b03f5f7f11d50a3a，processorarchitecture=msil。' 您注册的内容未在 SQL Server 托管环境中进行全面测试，因此不受支持。将来，如果您升级或维修此程序集或 .NET Framework，您的 CLR 集成例程可能会停止工作。有关详细信息，请参阅 SQL Server 联机丛书。

希望这可以帮助。

# python - 从另一个目录的 shell 脚本调用 python 函数

> ID：12105355
> 
> 赞同：-4
> 
> 时间：2012-08-24T08:02:09.927
> 
> 标签：python, bash

我正在尝试使用 python 脚本中的函数并将其存储到另一个目录中的 shell 脚本中的变量中，这是目录的可视化表示：

```
 xxx/
        aaa.sh
    yyy/
        sample.py 
```

这是sample.py的代码

```
 import ConfigParser

    def getval(section, key):
    config = ConfigParser.RawConfigParser()
    config.read("sample.config")
    return config.get(section, key) 
```

这是 aaa.sh 的一部分

```
 #!/bin/sh

    Path = $(python -c 'import imp; lp = imp.load.source('sample', 'path/to/sample.py'), print lp.getval('section_1', 'key_1')')

    some code.......

    echo $Path 
```

我的问题是我没有得到路径的任何值，我认为我对如何调用 python 脚本函数有错误，我不知道那是什么部分。谁能帮我。提前致谢。

我结合了来自这个问题[Calling a Python function from a shell script](https://stackoverflow.com/questions/8567526/calling-a-python-function-from-a-shell-script)的 EOL 的想法和来自这个问题的 Sebastian Rittau 的想法[How to import a module given the full path?](https://stackoverflow.com/questions/67631/how-to-import-a-module-given-the-full-path) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:00:10.067

尝试：

```
Path=$(python -c 'import imp; lp = imp.load.source("sample", "path/to/sample.py"); print lp.getval("section_1", "key_1")') 
```

# matlab - 在 matlab 中绘图，增加 Xaxis 上的分割数

> ID：12105356
> 
> 赞同：3
> 
> 时间：2012-08-24T08:02:10.660
> 
> 标签：matlab

`X`我想在 Matlab Dft 图中增加 - 轴上的刻度线数量（幅度与频率）。精度还可以，但我想增加`X`-axis 上显示的值的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:18:22.340

要设置`XTick`当前轴的属性（`gca`，获取当前轴），请使用：

```
set(gca,'XTick',tickVector); 
```

是`tickVector`一个包含所需刻度位置的向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:09:32.323

您可以通过打开次要刻度线来实现此目的。

```
set(gca,'XMinorTick','on'); 
```

当您只需要更多时，这可以避免您确定明确的刻度线位置。

# c++ - 多人游戏服务器模型 - 世界复制和对象更新

> ID：12105357
> 
> 赞同：1
> 
> 时间：2012-08-24T08:02:11.737
> 
> 标签：c++, replication, real-time, multiplayer

我目前正在尝试为少数玩家（我认为少于 20 人）编写简单的快节奏游戏的多人游戏服务器（作为“作为实时客户端-服务器应用程序示例的简单多人游戏”任务的一部分）。我将 TCP 套接字用于需要保证交付的数据包（即：聊天消息、登录和注销请求、ping 数据包等），将 UDP 用于不一定需要交付的所有内容，因为只有最后一个通过的数据包是重要（即：用户输入、游戏世界和对象更新等）。

我应该在这里提一下，我的游戏世界是什么样子的。每个对象服务器端都有其 id、角色和所有者成员。Id 基本上是客户端的标识符，因此，一旦我向他们发送对象更新，他们就知道要更新哪个对象。Owner是关于对象所有者的信息，即：控制actor的玩家。一旦玩家失去连接/注销，我用它来删除孤立的对象。然而，大多数对象都将此值设置为 Server。最后角色决定对象对客户是否重要。这可以设置为 ServerSide（对于不需要复制到客户端的对象，因为它们仅用于服务器端游戏状态计算），RelevantToOwner（此对象仅复制到其所有者，即：玩家私人库存不需要复制给每个人），

当用户发送登录数据包时，我检查我是否有空闲插槽，如果有，那么我将世界复制给他（发送当前世界状态 - 每个没有将角色设置为 ServerSide 或 RelevantToList 的对象 - 除非客户端当然在列表中对于那个对象）。

然后在服务器游戏状态更新循环的每次迭代之后，我发送完全相同的东西 - 整个世界状态。

当用户发送注销数据包时，我将他从登录的客户端中删除，释放插槽，并从游戏世界中删除所有孤立对象（以该用户为所有者的对象）。

以下是我的问题：

*   这个模型适合实时多人游戏还是我做错了？
*   有没有办法减少初始世界复制后发送的数据包数量（即：仅更新自上次迭代以来状态发生变化的对象。我已经考虑过了，到目前为止我遇到了这种方法的一个巨大问题- 如果上一次迭代的 UDP 数据包丢失并且对象的状态在后续迭代中没有改变，则在播放器端不会更新对象。）
*   我如何将多个对象更新打包到一个数据包中（我目前正在发送一个效率低下且可能非常错误的对象/数据包。
*   **有人可以给我指出一些简单**的客户端/服务器游戏的工作示例（来源会很好），这样我就可以看到专业人士是如何做到的？C++ 或 C 会很好，但 Java / C# / Python 也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:31:07.860

这在很大程度上取决于您正在谈论的游戏类型 - 例如：我在基于文本的垃圾游戏中做大致相同的事情。我的更新很简单，到达时发送房间详细信息。在更改时，发送消息说人/对象来/去。完毕。

UDP 是大多数在线游戏的工作方式，只是因为它们需要处理 100k+ 的连接。UDP 丢失通常是玩家在游戏中“扭曲”的原因。如果你有 20 个人，并且可以保证这一点，那么坚持使用 tcp 会有所帮助。

do you *need* to send them the whole world? Is your world not made of zones/rooms. Normally you send the smaller area. It also depends on how much data on the objects within that you should send, for example. If a player has an inventory, no point sending that to all the other players unless they specifically ask for it - items worn (if a visual game then yes you need to or it draws them wrong)

Just because we have much faster connections these days doesnt mean we shouldnt take into consideration some people dont. You should try and send updates only and have the client maintain its own state, and then, when you change zones, and reload the area, you ensure sync.

To pack object changes in a packet, most likely Im guessing its location changes, eg co-ordinates, and availability, eg, person picks up item. Have an upate structure, item_id, update_type, update_values[], then you can send a chunk of updates.

Are you after text based or more mmorg type? text based I can say google tinymuck, or tinymush, tinymud, there are plenty, graphics ones? thats harder, you could lookup some of the old EQ code and WoW emulators maybe..

# c++ - memcpy 不复制任何东西？

> ID：12105362
> 
> 赞同：-6
> 
> 时间：2012-08-24T08:02:27.807
> 
> 标签：c++, c, visual-studio-2010

我不明白为什么数组 t1 是空的。据我所知， memcpy 不应该关心对象的底层类型。你怎么看？%)

```
cout << sizeof(float) << sizeof(int) << endl;

float *t1= (float *)malloc(20*sizeof(float));
memset(t1,0x00,20*sizeof(float)); 

int *t2= (int *)malloc(20*sizeof(int));
for (int i=0; i<20; i++) 
    t2[i]=i;  

memcpy(t1,t2,20*sizeof(int));

for (int i=0; i<20; i++) 
    printf("%f\t", (float)t1[i]); 
```

我知道类型转换是什么意思。好的，我犯了一些小错误。这是粗心！

**PS 这是了解 memcpy 工作原理的示例！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:05:46.030

该函数**逐字**`memcpy`复制位。因此，您将位从整数数组复制到浮点数组：内容与浮点表示匹配的可能性很小。所以你得到一个数组，里面装满了对你的浮点格式没有意义的东西。

 **简而言之，在最低级别，`1`看起来`1.0f`完全不同。

* * *

演员表`(float)t1[i])`并没有真正做任何事情，因为`t1[i]`已经是`float`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:09:58.267

尽管您提出抗议，但您的数组不是“空的”。它只包含一个非常非常小的值：您的机器使用 IEEE754 标准来表示浮点数。在该标准中，全零的单词表示值 0.0。下一个更大的字（即，通过将基础位加 1 获得的字）代表下一个最大的浮点值，这是一个非常小的非规范值。当您`printf`将此值设为标准精度（小数点后 6 位？）时，它只是四舍五入为零。

这是我对类似问题的[切线相关答案。](https://stackoverflow.com/a/7295097/596781)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:09:57.307

您将整数值 0、1、2、3、4、5 .. 20 强制为浮点数。浮点数和整数使用不同的底层表示，而且我认为这些值非常小，除非您更改格式以包含很多精度，否则它们将打印为 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T08:10:48.660

int 和 float 的位排列不同。即使复制得很好，您也无法理解它。

改成

```
for (int i=0; i<20; i++) 
  printf("%d\t", (int)t1[i]); 
```

你会看到复制的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T08:09:39.017

memcpy 将内存复制为字节，并不关心内存位置存储了哪些底层类型。内存中的整数以不同于浮点数的格式存储，因此基本上以 t1 结尾的可能是但不一定是有效的浮点值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T08:34:12.497

由于您使用的是 C++，因此您可以使用 C++ 功能，例如`std::vector`

```
#include <vector>
#include <iostream>
#include <algorithm>

using namespace std;
int main(){
    cout << sizeof(float) << sizeof(int) << endl;
    std::vector<float> floatVector;
    std::vector<int> intVector;

    for (int i = 0; i < 20; i++)
    {
        intVector.push_back(i);
    }
    floatVector.resize(intVector.size());

    std::copy(intVector.begin(), intVector.end(), floatVector.begin());
    for (int i = 0; i < 20; i++)
    {
        cout << "element[" << i << "]: " << floatVector[i] << std::endl;
    }
} 
```**

# maven-2 - 在 JBoss soa 平台上使用 Maven

> ID：12105363
> 
> 赞同：0
> 
> 时间：2012-08-24T08:02:29.460
> 
> 标签：maven-2, maven-3, m2eclipse

我们有一个 jboss soa 平台许可证，并希望开始将 Maven 用于我们的项目和服务。我们开始研究样本，并成功创建了简单的多模块项目。但是我看到每次 Maven 连接到中央存储库时，我从文档中的理解是，依赖的 jars 默认下载到 .m2/repository。但是，问题是我们希望我们的项目使用我们的 jboss soa 平台附带的 jars。我看到 Maven 网站页面显示了如何添加第 3 方 jar，但是添加分发附带的所有 jar 会既费时又麻烦。（尤其是为它们中的每一个找到 groupId 和 artifactIds）1.）是有一个简单的方法来做到这一点？2.) 我认为我们仍然必须去 Maven 中央仓库获取所有其他插件（如 maven-war-plugin、jar-plugin 等。

欣赏建议。它将极大地帮助我们朝着正确的方向开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:30:00.443

我不是 Maven 专家，但这应该可以通过使用`scope`并将其设置为`provided`. 有关更多信息，请参阅有关[范围的 Maven 文档。](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)它旨在表明依赖关系是由容器提供的。

# php - 错误：未定义 Tinymce

> ID：12105369
> 
> 赞同：0
> 
> 时间：2012-08-24T08:02:45.853
> 
> 标签：php, tinymce

我在 PHP 中使用 TinyMCE 编辑器已经超过 3 个月了。

从一开始，编辑器就没有加载到除 Firefox 之外的任何其他浏览器上。

即使在 Firefox 上，如果没有缓存，编辑器也不会加载。迟到的 Firefox 也给我带来了编辑器的问题。

我在 chrome 上遇到的错误是：

```
"Uncaught Exception : tinymce is not defined" 
```

所以我假设对象没有被创建。但有时对象被创建但编辑器仍然没有运气，所以我无法查看它。

任何建议将不胜感激。

这是我正在使用的初始化脚本：

```
tinyMCE.init({

        mode: "exact",
        elements: "editor",
        readonly: true,
        theme: "advanced",
        skin: "o2k7",
        plugins: "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups," + "insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable," + "visualchars,nonbreaking,xhtmlxtras,template,advlist,spellchecker",
        languages : "en",
        // Theme options - button# indicated the row# only
        theme_advanced_buttons1: "template,|,newdocument,|,bold,italic,underline,strikethrough," + "|,justifyleft,justifycenter,justifyright,justifyfull," + /*styleselect,*/
        "formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2: "pastetext,pasteword,|,search,replace,|,bullist,numlist,|," + "outdent,indent,blockquote,|,undo,redo," /*"|,link,unlink,anchor,image,cleanup,|"*/+
        ",insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,ltr,rtl,|,spellchecker,fullscreen",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: true,
        spellchecker_languages : "+English=en",
        //spellchecker_enable_learn_rpc: true,
        // Example content CSS (should be your site CSS)
        content_css: "../js/lib/tinymce/content.css",

        // Theme options - button# indicated the row# only
        theme_advanced_buttons1: "template,|,newdocument,|,bold,italic,underline,strikethrough," + "|,justifyleft,justifycenter,justifyright,justifyfull," + /*styleselect,*/
        "formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2: "pastetext,pasteword,|,search,replace,|,bullist,numlist,|,"+ "outdent,indent,blockquote,|,undo,redo," /*"|,link,unlink,anchor,image,cleanup,|"*/+
        ",insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,ltr,rtl,|,spellchecker,fullscreen",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: true,
        // Example content CSS (should be your site CSS)
        content_css: "../js/lib/tinymce/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url: "lists/template_list.js",
        external_link_list_url: "lists/link_list.js",
        external_image_list_url: "lists/image_list.js",
        media_external_list_url: "lists/media_list.js",
        // template url
        template_external_list_url: "../../dynamic/templates.php?q=list",
        // on init
        oninit: onEditorLoaded
    }); 
```

是的，我正在使用 tiny_mce_gzip.php 加载编辑器

# c++ - 静态 C++ 变量 Apple Mach-o 链接器问题

> ID：12105377
> 
> 赞同：1
> 
> 时间：2012-08-24T08:03:14.637
> 
> 标签：c++, macos, ogre3d

我正在做一个 Ogre 项目，我遇到了 Xcode 的一些问题。每当我将场景管理器指针设为静态时，程序都无法编译，并且出现以下错误：

```
Undefined symbols for architecture x86_64:
  "OgreInit::sceneManager", referenced from:
      OgreInit::initOgre() in OgreInit.o
      OgreInit::initScene() in OgreInit.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我的 OgreInit.cpp

```
#include <iostream>
#include <exception>
#include <string>

#include "OGRE/Ogre.h"
#include "OGRE/OgreException.h"
#include "OGRE/OgreRoot.h"
#include "OGRE/OgreResourceManager.h"
#include "OGRE/OgreMath.h"

#include "MainLoop.h"
#include "WorkingDirectory.h"
#include "OgreInit.h"

#if OGRE_PLATFORM == OGRE_PLATFORM_APPLE
#include "macUtils.h"
#endif

OgreInit::OgreInit()
{
    mainLoop = new MainLoop();
    mainLoop->startLoop();
    initOgre();
    initScene();
}

void OgreInit::initOgre()
{
    root = new Ogre::Root(WorkingDirectory::getResourcesDirectory() + "plugins.cfg", WorkingDirectory::getResourcesDirectory() + "window.cfg", "");
    root->showConfigDialog();

    window = root->initialise(true);
    sceneManager = root->createSceneManager(Ogre::ST_GENERIC);

    camera = sceneManager->createCamera("mainCamera");
    camera->setNearClipDistance(0.1);
    camera->setFarClipDistance(300);
    camera->setPosition(0, 0, 80);
    //camera->lookAt(Ogre::Vector3::ZERO);

    cameraNode = sceneManager->getRootSceneNode()->createChildSceneNode();
    cameraNode->attachObject(camera);

    viewport = window->addViewport(camera);
    viewport->setClearEveryFrame(true);
    viewport->setAutoUpdated(true);
    viewport->setBackgroundColour(Ogre::ColourValue(1, 0, 1));

    Ogre::ResourceGroupManager::getSingleton().addResourceLocation(WorkingDirectory::getModelDirectory(), "FileSystem");
    Ogre::ResourceGroupManager::getSingleton().initialiseAllResourceGroups();
}

void OgreInit::initScene()
{
    sceneManager->setAmbientLight(Ogre::ColourValue(0.5f, 0.5f, 0.5f));

    Ogre::Entity *ogreHead = sceneManager->createEntity("Head", "ogrehead.mesh");

    Ogre::SceneNode *headNode = sceneManager->getRootSceneNode()->createChildSceneNode("HeadNode");
    headNode->attachObject(ogreHead);
    headNode->rotate(*new Ogre::Vector3(0, 1, 0), (Ogre::Radian)Ogre::Math::DegreesToRadians(90));

    Ogre::Light *light = sceneManager->createLight("MainLight");
    light->setPosition(20.0f, 80.0f, 50.0f);
}

//init resources before scene :! and translate before attaching

OgreInit::~OgreInit()
{

} 
```

当然还有标题：

```
#ifndef __OgreTest__OgreInit__
#define __OgreTest__OgreInit__

#include <iostream>
#include <string>
#include <memory>

#include "OGRE/Ogre.h"
#include "MainLoop.h"

class OgreInit
{
public:
    OgreInit();
    ~OgreInit();
private:
    void initOgre();
    void initScene();
    MainLoop *mainLoop;
    Ogre::Root *root;
    Ogre::RenderWindow *window;
    static Ogre::SceneManager *sceneManager;
    Ogre::Viewport *viewport;
    Ogre::Camera *camera;
    Ogre::SceneNode *cameraNode;
};

#endif /* defined(__OgreTest__OgreInit__) */ 
```

我经常在 Stackoverflow 上看到这个问题，但通常是因为没有包含一些必需的库。我不认为这是这里的问题，因为如果我将：更改`static Ogre::SceneManager *sceneManager;`为：`Ogre::SceneManager *sceneManager;`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:07:13.340

除了在头文件中*声明*它之外，您还需要在实现文件中实际定义*：*`sceneManager`

```
...
#if OGRE_PLATFORM == OGRE_PLATFORM_APPLE
#include "macUtils.h"
#endif

Ogre::SceneManager *OgreInit::sceneManager = 0;

OgreInit::OgreInit()
{
    ... 
```

# matlab - 提取矩阵元素

> ID：12105378
> 
> 赞同：4
> 
> 时间：2012-08-24T08:03:20.363
> 
> 标签：matlab, octave

如果我有一个矩阵：

```
0   0   3   4  
4   3   2   0  
2   0   2   0 
```

我想将非零元素提取到一些批次中，关于一个规则：如果一个元素已经被采用，则不允许同一行/列中的另一个元素。所以提取的矩阵将是：
第一批：

```
0   0   3   0  
4   0   0   0  
0   0   0   0 
```

第二批：

```
0   0   0   4  
0   3   0   0  
0   0   2   0 
```

第三批：

```
0   0   0   0  
0   0   2   0  
2   0   0   0 
```

也接受任何其他批次组合，只要涵盖所有非零元素并且符合规则。你会如何在 MATLAB/Octave 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:55:57.500

对于行，我会这样做：

```
A = [ 0   0   3   4  ;
      4   3   2   0  ;
      2   0   2   0 ]; 
```

1.  检查数字是否非零：

    ```
    Anonzero=A~=0;
    >> Anonzero
         0     0     1     1
         1     1     1     0
         1     0     1     0 
    ```

2.  沿 的行取[cumsum](http://www.mathworks.nl/help/techdoc/ref/cumsum.html)`Anonzero`：

    ```
    Aidx=cumsum(A,[],2);
    >> Aidx
         0     0     1     2
         1     2     3     3
         1     1     2     2

    numbatches=max(Aidx(:,end)); 
    ```

3.  将零值的索引设置回零，因此它们不会被选中

    ```
    A(~Anonzero)=0; 
    ```

4.  提取批次：

    ```
    batch=cell(numbatches,1);
    for ii=1:numbatches
        batch{ii}=A.*(Aidx==ii);
    end 
    ```

导致：

```
>>batch{1}
    0     0     3     0
    4     0     0     0
    2     0     0     0

>>batch{2}
    0     0     0     4
    0     3     0     0
    0     0     2     0

>>batch{3}
    0     0     0     0
    0     0     2     0
    0     0     0     0 
```

*我认为对于行和*列规则可以做类似的事情，但我没有马上看到它。我会考虑的；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:36:24.490

冈瑟已经走在正确的轨道上。你想选择一个元素，如果

1.  非零的行 cumsum 为 1 **AND**
2.  非零的列 cumsum 为 1 **AND**
3.  元素本身不为零。

下面的代码解决了这个问题：

```
A = [0, 0, 3, 4;
     4, 3, 2, 0;
     2, 0, 2, 0];

batches = cell(0);
while any(A(:)~=0)
    selector = cumsum(A~=0, 1) .* cumsum(A~=0, 2) .* (A~=0) == 1;
    batches{end+1} = A .* selector;
    A(selector) = 0;
end 
```

但是请注意，返回的解决方案不是最优的，因为它的第二批是

```
0   0   0   4  
0   3   0   0  
2   0   0   0 
```

这意味着剩余的矩阵元素来自同一列：

```
0   0   0   0
0   0   2   0  
0   0   2   0 
```

不幸的是，您不能在同一批次中绘制它们。所以你最终得到了四批而不是三批。

**编辑：**可能，首先选择那些出现在行/列中且有很多非零的元素是个好主意。例如，可以使用这些权重

```
weight = repmat(sum(A~=0, 1), size(A, 1), 1) ...
         .* repmat(sum(A~=0, 2), 1, size(A, 2)) .* (A~=0)

weight =
     0     0     6     2
     6     3     9     0
     4     0     6     0 
```

以下算法

```
batches = cell(0);
while any(A(:)~=0)
    batch = zeros(size(A));
    weight = repmat(sum(A~=0, 1), size(A, 1), 1) ...
             .* repmat(sum(A~=0, 2), 1, size(A, 2)) .* (A~=0);
    while any(weight(:)~=0)
        [r,c] = find(weight == max(weight(:)), 1);
        batch(r,c) = A(r,c);
        A(r,c) = 0;
        weight(r,:) = 0;
        weight(:,c) = 0;
    end
    batches{end+1} = batch;
end 
```

返回这些批次。

```
batches{:}
ans =
     0     0     0     4
     0     0     2     0
     2     0     0     0

ans =
     0     0     3     0
     4     0     0     0
     0     0     0     0

ans =
     0     0     0     0
     0     3     0     0
     0     0     2     0 
```

所以它至少适用于这个小测试用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T09:02:15.583

毫无疑问，一个有趣的问题......我的猜测是@GuntherStruyf 的方法最终将成为您应该选择的方法。但是，这是一个使用循环的简单解决方案：

```
A = [
    0   0   3   4
    4   3   2   0
    2   0   2   0  ];

C = {};
nz = A ~= 0;
while any(nz(:))

    tmpNz = nz;
    tmpA  = A;
    newNz = false(size(nz));    
    while true

        [i,j] = find(tmpNz, 1);
        if isempty(i) || isempty(j), break; end

        tmpNz(i,:) = false;
        tmpNz(:,j) = false;
        newNz(i,j) = true;

    end

    tmpA(~newNz) = false;
    C{end+1} = tmpA;
    nz(newNz) = false;

end 
```

一旦你摆脱了不断增长的单元阵列，这应该会非常快，例如，通过预先分配大量初始元素，然后删除未使用的元素。

不过，我会等到@GuntherStruyf 弄清楚他的事情！

# hadoop - 蜂巢表不见了

> ID：12105381
> 
> 赞同：1
> 
> 时间：2012-08-24T08:03:30.677
> 
> 标签：hadoop, hive

我在蜂巢中创建了几个表。我对他们进行了一些查询。然后退出蜂巢，然后关闭 hadoop mapred 和 dfs。然后第二天回来却发现桌子不见了！

我的蜂巢使用本地元存储。经过大量搜索，我只看到有人发布了一个这样的问题。答案中建议，如果使用 metastore，则本地应该从同一位置启动配置单元。我也做过同样的事情。我只从主人那里运行蜂巢，甚至从未登录过奴隶。Metastore 文件夹仍然存在。那么一定是哪里出了问题？我检查了 hadoop 和 hive 元存储日志的数据节点日志。但是什么也没发现。我在哪里可以找到问题所在？请帮我解决一下这个。还有什么可以避免这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-29T06:11:31.617

如果您使用本地元存储，Hive 会在启动 hiveserver2 的目录中创建 metastore_db。因此，如果您下次从不同的目录位置启动 hiveserver2，那么将在该位置创建一个新的 metastore_db，并且此 metastore_db 将没有关于您之前的表的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:58:05.833

你第一天在哪里使用数据库？第二天在哪里用？

意义

```
hive> show databases;  
OK
default
test
Time taken: 1.575 seconds
hive> use database test;
hive> show tables;
OK
blah
Time taken: 0.141 seconds
hive use table blah; 
```

如果您忘记使用数据库或创建一个，事情可能会变得一团糟。

以下命令还返回什么？

```
sudo -u hdfs hadoop fs -ls -R \ 
```

# java - Linux 上 Java 中的 IP 地址

> ID：12105384
> 
> 赞同：1
> 
> 时间：2012-08-24T08:04:04.280
> 
> 标签：java, windows, linux, ip-address, inetaddress

到目前为止，我总是使用以下方法来获取我的 IP 地址：

```
InetAddress.getLocalHost().getHostAddress() 
```

上述方法适用于 Windows，但在 linux 上我总是得到`127.0.1.1`我的 IP 地址。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:08:12.410

我在互联网上找到了一些可以解决您的问题的代码：

```
String hostName = InetAddress.getLocalHost().getHostName();

InetAddress addrs[] = InetAddress.getAllByName(hostName);

String myIp = "UNKNOWN";
for (InetAddress addr: addrs) {
  System.out.println ("addr.getHostAddress() = " + addr.getHostAddress());
  System.out.println ("addr.getHostName() = " + addr.getHostName());
  System.out.println ("addr.isAnyLocalAddress() = " + addr.isAnyLocalAddress());
  System.out.println ("addr.isLinkLocalAddress() = " + addr.isLinkLocalAddress());
  System.out.println ("addr.isLoopbackAddress() = " + addr.isLoopbackAddress());
  System.out.println ("addr.isMulticastAddress() = " + addr.isMulticastAddress());
  System.out.println ("addr.isSiteLocalAddress() = " + addr.isSiteLocalAddress());
  System.out.println ("");

  if (!addr.isLoopbackAddress() && addr.isSiteLocalAddress()) {
    myIp = addr.getHostAddress();
  }
} 
```

来源：[http ://www.exampledepot.com/egs/java.net/Local.html](http://www.exampledepot.com/egs/java.net/Local.html)

您的代码的基本区别是检查了所有 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:16:28.887

您的应用程序是否使用安全管理器？如果 getLocalHost 无法连接到您的地址，它将返回环回地址。

# php - 如果一个 div 的类是“一二三”，那么

> ID：12105387
> 
> 赞同：1
> 
> 时间：2012-08-24T08:04:19.710
> 
> 标签：php, class, select, html

我目前正在做一个网站。而且我需要使用 PHP 来选择具有某个类的 div。例如：

```
<body>

<div class="header"></div>
<div class="other-class"></div>
<div class="one-two-three"></div>
<div class="footer"></div>

</body>

<?php
    if(div.hasClass('one-two-three'))
    {
        //function code here...
    }
?> 
```

但请记住，我想为此使用 PHP 而不是 jQuery...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T09:11:49.063

如果您想操作 DOM，在将其发送到客户端之前，Dom 对象会提供您需要的东西。它甚至具有与您可能已经从 JS 知道的方法类似的方法。

```
$htmlString = '<html>...</html>';//either generated, or loaded from a file
$dom = new DOMDocument;
$dom->loadHTML($htmlString);//or loadHTMLFile
$divs = $dom->getElementsByTagName('div');
foreach($divs as $div)
{
    if ($div->hasAttribute('class') && strstr($div->getAttribute('class'), 'one-two-three'))
    {
        //$div ~= <div class='one-two-three'>
        $div->appendChild();//check the docs to see what you can do
    }
} 
```

以下是您可以[使用的方法的概述](http://php.net/manual/en/book.dom.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:15:05.010

为此使用 simplephpdom 库。您可以像在 jquery 中一样使用选择器选择表单元素。

[http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:10:13.947

您可能会使用 php 用内容填充 div，然后您可以先处理您的内容，然后将其打印到 div 中。如果您需要在 div 已经在浏览器中时对 div 的内容进行处理，您将需要使用 javascript 来执行此操作，或者调用 php 脚本进行处理，使用 ajax 调用后端的 php 脚本并检索响应.

# python - redis和celery的实用例子

> ID：12105388
> 
> 赞同：3
> 
> 时间：2012-08-24T08:04:20.743
> 
> 标签：python, redis, celery

我是新手`redis`和`celery`。我已经完成了两者的基本教程，但我不知道如何实现`task scheduling job`

我无法从脚本部分开始。我不知道如何编写脚本来创建队列、运行工作人员等。我需要一个实际的例子

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T09:37:05.363

所以这是一个典型的例子，说明 celery 如何使用 Redis 运行（让脚本文件名为 mytasks.py）：

```
from celery import Celery

celery = Celery('tasks', broker='redis://localhost:6379/0')

@celery.task
def add(x, y):
    return x + y 
```

如您所见，代理参数设置为使用安装在本地计算机上的 Redis。接下来是启动 celery 服务器：

```
$ celery -A mytasks worker --loglevel=info 
```

由于您的任务 celery 服务器已经启动，您现在可以通过导入 mytasks 脚本来使用它来运行您的任务，例如从 Python 解释器交互模式：

```
>>> from mytasks import add
>>> add.delay(1, 1)
2 
```

一段时间后，“2”将出现在控制台中。

这是如何设置任务执行环境的基本示例。

# ruby-on-rails - 在 Heroku 上接受比特币

> ID：12105391
> 
> 赞同：6
> 
> 时间：2012-08-24T08:04:32.073
> 
> 标签：ruby-on-rails, heroku, bitcoin

根据我的阅读，传统观点是为您将要收到的每笔付款生成一个新的比特币地址。然而，由于 Heroku 的文件系统是只读的，你会将每个新地址的密钥存储在哪里？[bitpiggy.herokuapp.com](http://bitpiggy.herokuapp.com)在 Heroku 上运行，似乎接受比特币。鉴于文件系统是只读的，有人知道他们如何在 Heroku 平台上接受和处理比特币吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:01:20.503

他们似乎正在使用第三方供应商，例如 blockexplorer.com 或 blockchain.info 来提供比特币服务。查看他们为访问这些而编写的 API 的“开发人员资源”页面。

您也可以自己创建这样的服务，只需在 EC2 或租用的服务器/VPS 上运行它。

# javascript - 闭包编译器重命名类名

> ID：12105393
> 
> 赞同：2
> 
> 时间：2012-08-24T08:04:33.200
> 
> 标签：javascript, jquery, google-closure-compiler

可能很简单的问题，但我找不到解决方案。如何防止依赖 jQuery 的 SomeClassName 类被 Closure Compiler 重命名？

```
(function($) {

  /**
   * SomeClassName
   * @constructor
   */
  function SomeClassName() {

  }
  SomeClassName.prototype.someFunction = function() {
     alert('somefunction');
  };

  var a = new SomeClassName();
  a.someFunction();

})(jQuery); 
```

[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:06:48.587

导出类名。Google Closure 正在更改它，因为它不公开。

```
(function($, exports) {

  /**
   * SomeClassName
   * @constructor
   */
  function SomeClassName() {

  }
  SomeClassName.prototype.someFunction = function() {
     alert('somefunction');
  };

  var a = new SomeClassName();
  a.someFunction();

  exports.SomeClassName = SomeClassName;

})(jQuery, window); 
```

# date - 参考日期范围输入数据的公式

> ID：12105394
> 
> 赞同：1
> 
> 时间：2012-08-24T08:04:36.253
> 
> 标签：date, formula, openoffice-calc

目前我正在尝试使用 OpenOffice Calc 开发一个休假跟踪系统，所以我有两张数据：

表 1：

```
 s/n    name    date start    date end
    1      test    3 Jan 2012    3 Jan 2012  <- formatted to date format
    2      test    6 Jan 2012    8 Jan 2012 
```

而在我添加公式后，表 2 应如下所示：

```
 name   3Jan  4Jan  5Jan  6Jan  7Jan  8Jan  <- formatted to date format
    test    1                 1     1     1 
```

我的问题是如何在第二张表上的日期下使用一个公式，该公式将引用表 1，并`1`在该人当天休假时自动添加一个。如果我要从用于匹配表 1 和表 2 上的日期的单元格中获取值，日期会给我一个序列号。

使用 VLOOKUP 我能够从表 2 中获取表 1 中日期开始和结束的值：

```
 =VLOOKUP(A2;$A$2:$D$3;3;0)
    =VLOOKUP(A2;$A$2:$D$3;4;0) 
```

然后是一个 IF 语句来添加 a`1`或 a `""`：

```
 =IF(VLOOKUP(A2;$A$2:$D$3;3;0)=MID(B1;1;6);"1";"") 
```

但是，我在休假多天时遇到了这部分的问题（例如表 1 中的条目 2，休假范围为 1 月 6 日至 8 日）。

因此，如果日期大于或等于开始日期并且日期小于或等于结束日期，我尝试比较这些值，但失败了。这是我试过的公式：

```
 =IF(VLOOKUP(A2;$A$2:$D$3;3;0)>=MID(B1;1;6)<=VLOOKUP(A2;$A$2:$D$3;4;0);"1";"") 
```

任何人都可以帮助我解决这个问题或有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-08T17:02:13.510

假设`s/n`在您的工作`!st`表`Name`的 A1 和第二张工作表的 A1 中，在第二张工作表的 B2 中并复制到适合：

```
=IF(COUNTIFS(first.$B1:$B99;$A2;first.$C1:$C99;"<="&B$1;first.$D1:$D99;">="&B$1)=0;"";COUNTIFS(first.$B1:$B99;$A2;first.$C1:$C99;"<="&B$1;first.$D1:$D99;">="&B$1)) 
```

# r - 没有适用于“时间<-”的方法应用于“c（'xts'，'zoo'）”类的对象

> ID：12105396
> 
> 赞同：6
> 
> 时间：2012-08-24T08:04:42.593
> 
> 标签：r, xts, zoo

请将此数据结构放入 R 中以重现我的示例：

```
dX <- structure(c(3272.1, 3271.48, 3281.03, 3267.08, 3260.65, NA, 1616.3, 
1620.1, 1639.9, 1637.4, 1669.6, 1662.2, 528.385, 529.268, 531.022, 
532.424, NA, NA), .indexTZ = "", class = c("xts", "zoo"), .indexCLASS = c("POSIXct", 
"POSIXt"), tclass = c("POSIXct", "POSIXt"), tzone = "", index = structure(c(1345147200, 
1345406400, 1345492800, 1345579200, 1345665600, 1345752000), tzone = "", tclass = c("POSIXct", 
"POSIXt")), .Dim = c(6L, 3L), .Dimnames = list(NULL, c("M1WO.Index", 
"GC1.COMB.Comdty", "JGAGGUSD.Index"))) 
```

现在试试这段代码：

```
library(PerformanceAnalytics)
library(quantmod)
library(timeSeries)
charts.PerformanceSummary(R = dX) 
```

并得到这个错误：

```
Error in UseMethod("time<-") :
  no applicable method for 'time<-' applied to an object of class "c('xts', 'zoo')" 
```

我想这个问题是关于数据的`class = c("xts, "zoo")`，但我不明白为什么它会以那种格式读取这些数据，以及我如何将它强制转换为一个简单的`xts`对象。

我该如何解决这个问题？

我的系统：

```
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
 [1] timeSeries_2160.94           timeDate_2160.95            
 [3] quantmod_0.3-17              TTR_0.21-1                  
 [5] Defaults_1.1-1               PerformanceAnalytics_1.0.4.4
 [7] xts_0.8-6                    zoo_1.7-7                   
 [9] rcom_2.2-5                   rscproxy_2.0-5              

loaded via a namespace (and not attached):
[1] fBasics_2160.81  fGarch_2110.80.1 grid_2.15.1      lattice_0.20-6  
[5] MASS_7.3-18      stabledist_0.6-4 tools_2.15.1 
```

当我加载包时，我得到以下信息：

```
Loading required package: zoo

Attaching package: ‘zoo’

The following object(s) are masked from ‘package:base’:

    as.Date, as.Date.numeric

Loading required package: timeDate

Attaching package: ‘timeDate’

The following object(s) are masked from ‘package:PerformanceAnalytics’:

    kurtosis, skewness

Attaching package: ‘timeSeries’

The following object(s) are masked from ‘package:zoo’:

    time<- 
```

根据错误消息，我猜这个问题是在附加时出现的，`timeSeries`并且`time<-`被屏蔽了`package:zoo`，我真的不知道它是什么意思以及如何处理。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T09:50:10.910

问题是包`timeSeries`。加载它会给出以下警告：

```
Attaching package: ‘timeSeries’

The following object(s) are masked from ‘package:zoo’:

    time<- 
```

您可以分离包以供使用`charts.PerformanceSummary`，然后再次加载它：

```
detach('package:timeSeries')
detach('package:timeDate') # since it masks statistical functions
charts.PerformanceSummary(R = dX)
library(timeSeries) 
```

# vim - 如何用 Vim 中的视觉选择替换？

> ID：12105399
> 
> 赞同：2
> 
> 时间：2012-08-24T08:05:04.807
> 
> 标签：vim

我发现 vim 中的替代品有一个范围参数：

```
:[range]s/pattern/sring/[c]/[g]/[e]/[i]/[I]/[p] 
```

但我想知道让替换只发生在视觉选择中是否方便。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:13:08.773

是的，你可以这样做。

视觉选择后，按`:`会给你 `:'<,'>`，`'<,'>`是`[range]`零件。

然后像下面那样做替换，**但请注意这会影响整行**：

```
:'<,'>s/foo/bar/g 
```

如果您想更改`foo`为`bar` **仅**在视觉选择区域（即按字符或按块选择），则必须[使用`\%V`atom](https://vimhelp.org/pattern.txt.html#%2F%5C%25V)：

```
:'<,'>s/\%Vfoo/bar/g 
```

文章[Search and replace in a visual selection](https://vim.fandom.com/wiki/Search_and_replace_in_a_visual_selection) ( [archive](https://web.archive.org/web/20210402125037/https://vim.fandom.com/wiki/Search_and_replace_in_a_visual_selection) ) 包含有关该主题的更多有用信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:19:23.227

为了将范围限制在视线*范围*内，`'<,'>`范围就可以了。但是，对于按字符或按块选择，这还不够。您需要修改正则表达式或使用*vis.vim*插件；否则，选择之外的字符（但在行内）也会受到影响。

在 Vim Tips Wiki 上找到完整的讨论：http: [//vim.wikia.com/wiki/Applying_substitutes_to_a_visual_block](http://vim.wikia.com/wiki/Applying_substitutes_to_a_visual_block)

* * *

**注意**：这个答案来自 2012 年，现在可以[使用`\%V`原子](https://vimhelp.org/pattern.txt.html#%2F%5C%25V)（2021 年 4 月 2 日）将更改限制在视觉选择**内部**（按字符或按块）。请参阅文章[Search and replace in a visual selection](https://vim.fandom.com/wiki/Search_and_replace_in_a_visual_selection) ( [archive](https://web.archive.org/web/20210402125037/https://vim.fandom.com/wiki/Search_and_replace_in_a_visual_selection) )，但上面的文章也已更新。

# php - 简单的 html dom 解析器无法解析所有页面

> ID：12105405
> 
> 赞同：0
> 
> 时间：2012-08-24T08:05:42.997
> 
> 标签：php, simple-html-dom

我需要从该 [站点的中心栏中获取信息](http://vashmagazin.ua/cat/catalog/?rub=100&subrub=1)

（我需要确切的电话号码）

我正在使用 SimpleHTML dom 解析器，并且正在尝试一些 curl 方法，但它总是给我没有那个中心列的 html 源代码！

我了解使用此代码：

```
 $html = file_get_html('http://vashmagazin.ua/cat/catalog/?rub=100&subrub=1');
 $str = $html->Save();
 echo $str; 
```

我需要说我今天能不能这样做，否则我会失去这个订单。对不起我的英语不好，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:13:13.187

注意字符集转换的请求标头和 iconv。

如果您不将来自 windows-1251 的字符串转换为 utf-8，preg_match 将失败。

转换后，我使用一个简单的正则表达式从整个页面中提取电话号码。

```
<?php

    $url = 'http://vashmagazin.ua/cat/catalog/?rub=100&subrub=1';

    $ch = curl_init();
    $request_headers = array
        (
            "Accept" => "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Charset" => "windows-1251,utf-8;q=0.7,*;q=0.3",
        );

    $header = array();
    foreach ($request_headers as $key => $value)
        $header[] = "{$key}: {$value}";

    curl_setopt($ch, CURLOPT_HTTPGET, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.63 Safari/535.7');
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    $html = curl_exec($ch);
    curl_close($ch);

    $html = iconv("windows-1251", "UTF-8", $html);

    $matches = array();
    $pattern = '/\([0-9]{3}\)[0-9]{3,}\-[0-9]+/us';

    if (preg_match_all($pattern, $html, $matches))
    {
        var_dump($matches);
    }

?> 
```

上面的源代码已经过全面测试并且可以正常工作。

如果您无法安装 curl 库，请尝试将 curl 块替换为 file_get_contents($url)。

要在 google 上的操作系统搜索上安装 curl，在 Ubuntu 上使用**sudo apt-get install curl libcurl3 php5-curl**并重新启动 apache。

# perl - 使用 DateTime::Format::Strptime 将字符串转换为日期

> ID：12105406
> 
> 赞同：2
> 
> 时间：2012-08-24T08:05:45.463
> 
> 标签：perl

从[这个答案](https://stackoverflow.com/a/8218857/1084945)中，我`DateTime::Format::Strptime`用来从字符串中获取日期。

我正在使用以下模式：`%m%d%Y%n%T`. 这[应该是匹配的](http://search.cpan.org/~drolsky/DateTime-Format-Strptime-1.52/lib/DateTime/Format/Strptime.pm)：

*   `%m`：月份编号（01-12）。这也将解析单个数字。
*   `%d`: 月中的某一天 (01-31)。这也将解析单个数字。
*   `%Y`：年份，包括世纪（例如，1991）。
*   `%n`: 任意空格。
*   `%T`: 相当于`%H:%M:%S`:
    *   `%H`: 小时 (00-23)。这也将解析单个数字。
    *   `%M`: 分钟 (00-59)。这也将解析单个数字。
    *   `%S`: 秒（0-60；60 可能出现闰秒。请参阅`DateTime::LeapSecond`）。

但是，在输入时： [ `05/18/2011 14:14:05`] 它失败并出现错误：

> 您的日期时间与您的模式不匹配

据我所见，我的模式与输入模式匹配。我哪里错了？

相关代码如下：

```
 use DateTime::Format::Strptime qw( );

my $format = DateTime::Format::Strptime->new(
   pattern   => '%m%d%Y%n%T',
   time_zone => 'local',
   on_error  => 'croak',
);

my $dt = $fields->[1] ;
print "Date:[$dt]\n";
my $dateopen = $format->parse_datetime($dt); 
```

输出：

> 日期：[05/18/2011 14:14:05]
> 您的日期时间与您的模式不匹配

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:14:16.457

非模式字符也很重要。您的日期组件之间有斜线，因此该模式`'%m/%d/%Y%n%T'`有效，而您的则无效。

请注意，该模式`%D`也不起作用，因为它是一种快捷方式，`%m%d%Y`也不包括斜线。

# php - Yii zii.widgets.grid.CGridView viewButtonUrl 问题

> ID：12105410
> 
> 赞同：1
> 
> 时间：2012-08-24T08:05:52.497
> 
> 标签：php, yii

```
$rid = ""
if( isset( $_GET['rid'] ) {
    $rid = $_GET['rid'];
}

<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'guests-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'name',
        'address',
        'contact_numbers',
        'email_addresses',
        /*
        'company_name',
        'company_contact_nos',
        'person_to_notify_emergency',
        'person_to_notify_contact_no',
        */
        array(
            'class'=>'CButtonColumn',
            'viewButtonUrl' => 'Yii::app()->createUrl("guests/view",array("id"=>$data->idGuests,"rid"=>"$rid"))',

        ),
    ),
)); ?> 
```

我确定 $rid 存在，因为这是我的网址

```
http://localhost/mysite/index.php?r=guests/admin&rid=1 
```

**这是错误：** ![在此处输入图像描述](../Images/b557372274a01f430c1f9fd2227325f8.png)

该错误是由viewButtonUrl引起的，我知道$_GET['rid']之所以会出错是因为CGridView中的所有变量都应该在$model变量中。

有没有办法解决这个问题？您的帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:10:20.523

问题是您使用单引号，因此将变量提供给 CGridView 组件。

CGridView 然后尝试解析字符串。但是，在 CGridView 的上下文中，没有 variable `$rid`。

在这种情况下使用双引号并转义字符串内的双引号。

```
'Yii::app()->createUrl("guests/view",array("id"=>$data->idGuests,"rid"=>"$rid"))' 
```

变成

```
"Yii::app()->createUrl(\"guests/view\",array(\"id\"=>\$data->idGuests,\"rid\"=>\"$rid\"))" 
```

# python - 转换python请求参数的正确方法

> ID：12105414
> 
> 赞同：1
> 
> 时间：2012-08-24T08:06:12.980
> 
> 标签：python

我正在使用 Pyramid Web 框架来构建 Web 应用程序。有很多次我发现自己这样做：

```
result = request.params.get('abc', None)
if result:
  result = simplejson.loads(result)
else:
  result = {} 
```

问题是，有时，“abc”请求参数不存在，“结果”的值为无。因此，在执行操作之前，我总是必须检查它是否为 None，`simplejson.loads`否则我会遇到`TypeError: expected string or buffer`异常。

有没有更好/更“pythonic”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:08:13.847

试试这个：

```
result = simplejson.loads(request.params.get('abc', '{}')) 
```

# xcode - cocos2d 改进预加载器

> ID：12105415
> 
> 赞同：1
> 
> 时间：2012-08-24T08:06:14.497
> 
> 标签：xcode, cocos2d-iphone

我想改进预加载器，通过在一个巨大的 plist 中收集精灵、plist 和声音等所有内容来预加载我的所有资产。可能吗？或者收集服务中的所有内容，例如将来我可以从互联网加载它吗？基本上我怎样才能创建一个包含精灵、声音和其他 plist 的 plist，这样我就可以优化我的预加载场景而不是编写 100 行代码？我感谢您的时间和精力。

# c# - c# dllimport 参数 shift

> ID：12105420
> 
> 赞同：0
> 
> 时间：2012-08-24T08:06:37.490
> 
> 标签：c#, c++, parameters, marshalling, dllimport

我目前正在用 C# 开发 Excel 插件，并且正在使用与 C++ 库的互操作。两者都是我开发的。C++ 库不是一个 COM 组件，而只是一个导出一些函数的 DLL。

我有一个 C# 函数，我想将一个数字和两个字符串传递给 C++ 函数，然后 C++ 函数返回一个字符串。首先我尝试直接返回一个字符串，所以原型看起来像

```
//C#
[return: MarshalAs(UnmanagedType.LPStr)]
private static extern string Function([MarshalAs(UnmanagedType.I4)] int number,
                                      [MarshalAs(UnmanagedType.LPStr)]string str1,
                                      [MarshalAs(UnmanagedType.LPStr)] string str2);
//C++
extern "C" __declspec(dllexport) string Function(int, char*, char*); 
```

（顺便说一句，我已经在 C# 中将此函数的调用约定设置为 Cdecl）

然后当我调用C#版本，进入C++（调试时），发现参数移位了，所以整数是指向第一个字符串的指针的值，第一个字符串是第二个字符串，第二个字符串指向其他地方。我也查了内存，发现参数没有按照_cdecl约定传递，整数是最后压入栈的（没问题），但是两个字符串的位置调换了。编译器添加了许多其他信息，因此我不想更深入地了解这一点。

但是，后来我把返回字符串改成了参数，原型看起来像

```
//C#
private static extern void Function([MarshalAs(UnmanagedType.I4)]int number,
                                    [MarshalAs(UnmanagedType.LPStr)] string str1,
                                    [MarshalAs(UnmanagedType.LPStr)] string str2,
                                    [MarshalAs(UnmanagedType.LPStr), Out] StringBuilder returnStr);
//C++
extern "C" __declspec(dllexport) void Function(int, char*, char*, string&); 
```

现在参数已正确传递。

所以我的第一个问题是，这是怎么发生的？

我的第二个问题是，即使使用第二种方法，我也无法让程序正确运行，程序从C++函数返回时崩溃（实际上在C++函数中，唯一要做的就是调用一个类的另一个成员函数，所以这个函数就像是成员函数的一个包装器，而程序在返回成员函数的时候就崩溃了。由于warpper函数只是调用了成员函数，所以我不知道问题出在哪里）。

有谁知道如何做到这一点？所以这个函数的重点是取一个数字和两个字符串，然后返回另一个字符串。

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:20:17.733

[看这篇关于在非托管代码中使用stringbuilder的文章](http://limbioliong.wordpress.com/2011/11/01/using-the-stringbuilder-in-unmanaged-api-calls/)

尝试这样的事情：

```
//C#
public string Function(int number, string str1, string str2)
{
    StringBuilder sbStr1 = new StringBuilder(str1);
    StringBuilder sbStr2 = new StringBuilder(str2);
    StringBuilder sbReturnStr = new StringBuilder(1024);
    Function(number, sbStr1 , sbStr2 , sbReturnStr , sbReturnStr.Capacity);
    return sbReturnStr.ToString();
}

//C# p/invoke
private static extern void Function(int number, StringBuilder str1, StringBuilder str2, StringBuilder returnStrBuffer, int size);

//C++
extern "C" __declspec (dllexport) void __stdcall Function(int number, const char* str1, const char* str2, char* returnStrBuffer, int size)
{
     //fill the returnStrBuffer
     strncpy(returnStrBuffer, "blablalb", size); //example!!
} 
```

# shell - 在 tofrodos 上下文中“下载或创建”是什么意思？

> ID：12105421
> 
> 赞同：0
> 
> 时间：2012-08-24T08:06:40.453
> 
> 标签：shell, ssh

之后我在教程中不断[看到](https://askubuntu.com/questions/148575/how-to-install-zpanel)这个短语“下载或创建” `tofrodos`。什么是如何下载或创建的示例？我只是陷入

```
^
^
^ 
```

模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:12:54.287

> ```
> apt-get -y install tofrodos 
> ```
> 
> **下载或创建**ZPX_ubuntu_12-04_auto_installer.sh

作者的意思是您需要将“ZPX_ubuntu_12-04_auto_installer.sh”shell脚本传输到服务器，如果需要，使用`cd`命令切换到您保存脚本的目录，然后输入以下命令：

> ```
> fromdos ZPX_ubuntu_12-04_auto_installer.sh
> chmod +x ZPX_ubuntu_12-04_auto_installer.sh
> ./ZPX_ubuntu_12-04_auto_installer.sh 
> ```

他似乎指的是一个特定的脚本，该脚本包含在[一个网络论坛上发布](http://forums.zpanelcp.com/showthread.php?7277-ZPX-Auto-Installer-for-Ubuntu-12-04)的 .zip 文件中。

您可以将 .zip 文件下载到您的计算机，将其解压缩，然后使用`sftp`or`scp`程序仅将 shell 脚本传输到服务器。或者，您可以使用`wget`或`curl`将 .zip 文件下载到服务器，然后使用`unzip`命令将其解压缩。

像[FileZilla](http://filezilla-project.org/)这样的图形 SFTP 客户端可能有助于前一种方法。Firefox 插件[cliget](https://addons.mozilla.org/en-US/firefox/addon/cliget/)可能对后者有所帮助，尤其是因为该文件托管在受密码保护的网络论坛上。

`fromdos`只是一个实用程序，通过去除所有回车符将文本文件从 DOS/Windows 格式转换为 Unix 格式。也许使用这个命令是必要的，因为脚本的作者在压缩文件之前使用了 Windows 文本编辑器或 ASCII 模式的 FTP 传输。当然，如果您尝试在服务器上运行命令，则需要服务器上的文件。

# javascript - jQuery for 循环

> ID：12105422
> 
> 赞同：2
> 
> 时间：2012-08-24T08:06:41.920
> 
> 标签：javascript, for-loop

我需要在 JQuery 中从 0 循环到变量值（由用户动态输入）。我怎样才能做到这一点？现在我通过使用像这样的简单 For 循环来做到这一点。

```
for( i=1; i<=fetch; i++) {  
   var dyndivtext = document.createElement("input");
   document.body.appendChild(dyndivtext); 
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:15:52.237

要在两个值之间循环，您应该使用常规的 Javascript 循环。`each`循环遍历元素集合或数组时使用jQuery方法。

要从零开始循环，您应该将循环变量初始化为零，而不是一。要从零循环到指定值，请使用`<=`for 比较，但要从零和指定的项目数（即从 0 到 value-1）循环，则使用`<`运算符。

```
for (i = 0; i < fetch; i++) {
  $('body').append($('<input/>', { type: 'text' }));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:18:20.013

您可以循环一个空数组：

```
$.each(new Array(fetch), function(i) { 
   var dyndivtext = document.createElement("input");
   document.body.appendChild(dyndivtext); 
}); 
```

如果你经常这样做，你甚至可以伪造补丁`jQuery.each`来获取数字：

```
(function($) {
    var _each = $.each;
    $.each = function() {
        var args = $.makeArray(arguments);
        if ( args.length == 2 && typeof args[0] == 'number') {
            return _each.call(this, new Array(args[0]), args[1]);
        }
        return _each.call(this, args);
    };
}(jQuery));​

$.each(fetch, function(i) {
    // loop
}); 
```

`jQuery.each`确实有一些很棒的功能，比如回调中的不同返回值。但是对于一个简单的循环，我发现执行以下操作更方便（并且开销更少）：

```
while(fetch--) {
    // loop
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:10:23.840

你的意思是Javascript循环。来自 W3Schools：

```
for (var variable = startvalue; variable < endvalue; variable = variable + increment)
{
      //code to be executed
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:13:36.043

要从用户获取值并运行代码，您可以使用以下提示。

```
var x=prompt("Enter the value",0);
for(i=0;i<x;i++)
{
  var dyndivtext = document.createElement("input");
  document.body.appendChild(dyndivtext);
} 
```

希望这可以帮助。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T21:07:11.417

如果您想要完整的 jQuery 方式，请使用新插件 jQuery-timing。它在您的 jQuery 行中提供内联循环：

```
$('body').repeat().append('<input>').until(fetch); 
```

不错，嗯？

# ios - UIWebView 记住用户名和密码，自动填充

> ID：12105425
> 
> 赞同：0
> 
> 时间：2012-08-24T08:06:59.680
> 
> 标签：ios, uiwebview

> **可能重复：**
> [UIWebView 是否可以保存和自动填充先前输入的表单值（例如，用户名和密码）？](https://stackoverflow.com/questions/4772341/is-it-possible-for-a-uiwebview-to-save-and-autofill-previously-entered-form-valu)

在我的 ios 应用程序中，我创建了一个 UIWebView 来登录网络。我希望 webview 可以记住用户名和密码，并且下次可以自动填充到 web，所以我不需要再次输入。我注意到它可以在 safari 中完成。但我不知道如何在 UIWebView 中获得它。

# python - 如何获得具有先验断点的分段线性回归？

> ID：12105435
> 
> 赞同：2
> 
> 时间：2012-08-24T08:08:05.670
> 
> 标签：python, r, linear-regression, piecewise

我需要详细解释这一点，因为我没有统计学的基础知识可以更简洁地解释。在 SO 中询问是因为我正在寻找 python 解决方案，但如果更合适的话可能会去 stats.SE。

我有井下数据，可能有点像这样：

```
Rt      T
0.0000  15.0000
4.0054  15.4523
25.1858 16.0761
27.9998 16.2013
35.7259 16.5914
39.0769 16.8777
45.1805 17.3545
45.6717 17.3877
48.3419 17.5307
51.5661 17.7079
64.1578 18.4177
66.8280 18.5750
111.1613    19.8261
114.2518    19.9731
121.8681    20.4074
146.0591    21.2622
148.8134    21.4117
164.6219    22.1776
176.5220    23.4835
177.9578    23.6738
180.8773    23.9973
187.1846    24.4976
210.5131    25.7585
211.4830    26.0231
230.2598    28.5495
262.3549    30.8602
266.2318    31.3067
303.3181    37.3183
329.4067    39.2858
335.0262    39.4731
337.8323    39.6756
343.1142    39.9271
352.2322    40.6634
367.8386    42.3641
380.0900    43.9158
388.5412    44.1891
390.4162    44.3563
395.6409    44.5837 
```

（Rt 变量可以被认为是深度的代表，T 是温度）。我还有“先验”数据，提供了 Rt=0 时的温度，以及一些我*可以*用作断点、断点指南或至少与任何发现的断点进行比较的标记，但未显示。

这两个变量的线性关系是在某些深度区间受某些过程影响。一个简单的线性回归是

`q, T0, r_value, p_value, std_err = stats.linregress(Rt, T)`

看起来像这样，您可以清楚地看到偏差，以及对 T0 的不良拟合（应该是 15）：

![在此处输入图像描述](../Images/458995da16acac931be56c21daae4779.png)

我希望能够执行一系列线性回归（在每个段的末端加入），但我想这样做：（a）通过不指定中断的数量或位置，（b）通过指定数量和位置休息时间，以及 (c) 计算每个段的系数

我想我可以做（b）和（c），只需将数据分开并稍微小心地分别做每一位，但我不知道（a），并且想知道是否有人知道这可以做得更简单。

我看过这个：[https](https://stats.stackexchange.com/a/20210/9311) ://stats.stackexchange.com/a/20210/9311 ，我认为 MARS 可能是处理它的好方法，但这只是因为它看起来不错；我真的不明白。我以盲目剪切'n'粘贴的方式对我的数据进行了尝试，并得到了下面的输出，但我还是不明白：

![在此处输入图像描述](../Images/fc38bdd0f524f1567640f3e071016225.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T09:21:41.367

简短的回答是，我使用 R 解决了我的问题以创建线性回归模型，然后使用[`segmented`](http://cran.r-project.org/web/packages/segmented/index.html)包从线性模型生成分段线性回归。我能够使用and指定预期的断点（或结）数量`n`，如下所示。`psi=NA``K=n`

长答案是：

R 版本 3.0.1 (2013-05-16)
平台：x86_64-pc-linux-gnu (64-bit)

```
# example data:
bullard <- structure(list(Rt = c(5.1861, 10.5266, 11.6688, 19.2345, 59.2882, 
68.6889, 320.6442, 340.4545, 479.3034, 482.6092, 484.048, 485.7009, 
486.4204, 488.1337, 489.5725, 491.2254, 492.3676, 493.2297, 494.3719, 
495.2339, 496.3762, 499.6819, 500.253, 501.1151, 504.5417, 505.4038, 
507.6278, 508.4899, 509.6321, 522.1321, 524.4165, 527.0027, 529.2871, 
531.8733, 533.0155, 544.6534, 547.9592, 551.4075, 553.0604, 556.9397, 
558.5926, 561.1788, 562.321, 563.1831, 563.7542, 565.0473, 566.1895, 
572.801, 573.9432, 575.6674, 576.2385, 577.1006, 586.2382, 587.5313, 
589.2446, 590.1067, 593.4125, 594.5547, 595.8478, 596.99, 598.7141, 
599.8563, 600.2873, 603.1429, 604.0049, 604.576, 605.8691, 607.0113, 
610.0286, 614.0263, 617.3321, 624.7564, 626.4805, 628.1334, 630.9889, 
631.851, 636.4198, 638.0727, 638.5038, 639.646, 644.8184, 647.1028, 
647.9649, 649.1071, 649.5381, 650.6803, 651.5424, 652.6846, 654.3375, 
656.0508, 658.2059, 659.9193, 661.2124, 662.3546, 664.0787, 664.6498, 
665.9429, 682.4782, 731.3561, 734.6619, 778.1154, 787.2919, 803.9261, 
814.335, 848.1552, 898.2568, 912.6188, 924.6932, 940.9083), Tem = c(12.7813, 
12.9341, 12.9163, 14.6367, 15.6235, 15.9454, 27.7281, 28.4951, 
34.7237, 34.8028, 34.8841, 34.9175, 34.9618, 35.087, 35.1581, 
35.204, 35.2824, 35.3751, 35.4615, 35.5567, 35.6494, 35.7464, 
35.8007, 35.8951, 36.2097, 36.3225, 36.4435, 36.5458, 36.6758, 
38.5766, 38.8014, 39.1435, 39.3543, 39.6769, 39.786, 41.0773, 
41.155, 41.4648, 41.5047, 41.8333, 41.8819, 42.111, 42.1904, 
42.2751, 42.3316, 42.4573, 42.5571, 42.7591, 42.8758, 43.0994, 
43.1605, 43.2751, 44.3113, 44.502, 44.704, 44.8372, 44.9648, 
45.104, 45.3173, 45.4562, 45.7358, 45.8809, 45.9543, 46.3093, 
46.4571, 46.5263, 46.7352, 46.8716, 47.3605, 47.8788, 48.0124, 
48.9564, 49.2635, 49.3216, 49.6884, 49.8318, 50.3981, 50.4609, 
50.5309, 50.6636, 51.4257, 51.6715, 51.7854, 51.9082, 51.9701, 
52.0924, 52.2088, 52.3334, 52.3839, 52.5518, 52.844, 53.0192, 
53.1816, 53.2734, 53.5312, 53.5609, 53.6907, 55.2449, 57.8091, 
57.8523, 59.6843, 60.0675, 60.8166, 61.3004, 63.2003, 66.456, 
67.4, 68.2014, 69.3065)), .Names = c("Rt", "Tem"), class = "data.frame", row.names = c(NA, 
-109L))

library(segmented)  # Version: segmented_0.2-9.4

# create a linear model
out.lm <- lm(Tem ~ Rt, data = bullard)

# Set X breakpoints: Set psi=NA and K=n:
o <- segmented(out.lm, seg.Z=~Rt, psi=NA, control=seg.control(display=FALSE, K=3))
slope(o)  # defaults to confidence level of 0.95 (conf.level=0.95)

# Trickery for placing text labels
r <- o$rangeZ[, 1]
est.psi <- o$psi[, 2]
v <- sort(c(r, est.psi))
xCoord <- rowMeans(cbind(v[-length(v)], v[-1]))
Z <- o$model[, o$nameUV$Z]
id <- sapply(xCoord, function(x) which.min(abs(x - Z)))
yCoord <- broken.line(o)[id]

# create the segmented plot, add linear regression for comparison, and text labels
plot(o, lwd=2, col=2:6, main="Segmented regression", res=TRUE)
abline(out.lm, col="red", lwd=1, lty=2)  # dashed line for linear regression
text(xCoord, yCoord, 
    labels=formatC(slope(o)[[1]][, 1] * 1000, digits=1, format="f"), 
    pos = 4, cex = 1.3) 
```

![在此处输入图像描述](../Images/a0da7c214439f76823d97f076e6a60d5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:40:48.973

您想要的在技术上称为[spline interpolation](http://en.wikipedia.org/wiki/Spline_interpolation)，尤其是 order-1 spline interpolation（它将连接直线段； order-2 连接抛物线等）。

Stack Overflow 上已经有一个关于 Python 中 Spline Interpolation 的问题，它将帮助您解决问题。这是[链接](https://stackoverflow.com/questions/6238250/multivariate-spline-interpolation-in-python-scipy)。如果您在尝试这些提示后还有其他问题，请回复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-11T10:03:21.363

论文第 30-31 页提供了一个非常简单的方法（不是迭代的，没有初始猜测，没有必要指定）：[https ://fr.scribd.com/document/380941024/Regression-par-morceaux-Piecewise-Regression -pdf](https://fr.scribd.com/document/380941024/Regression-par-morceaux-Piecewise-Regression-pdf)。结果是：

[![在此处输入图像描述](../Images/304e13689e9766f2a6b8cd27093fee78.png)](https://i.stack.imgur.com/SboUm.gif)

注：该方法基于积分方程的拟合。本示例不是一个有利的情况，因为点的横坐标分布远不规则（大范围内没有点）。这使得数值积分不太准确。尽管如此，分段拟合出人意料地还不错。

# javascript - 为什么在 Firefox 中输入文本区域会导致屏幕滚动？

> ID：12105440
> 
> 赞同：8
> 
> 时间：2012-08-24T08:08:27.380
> 
> 标签：javascript, jquery, firefox, jquery-events, jquery-isotope

我只在 Firefox 中遇到了一个非常奇怪的同位素插件问题。我的每个同位素元素都有一个文本区域，当我向下滚动到底部并输入其中一个文本区域时，屏幕会跳到顶部。我在 jsfiddle 中复制了这个：

[http://jsfiddle.net/galtschul/WfTZ5/](http://jsfiddle.net/galtschul/WfTZ5/)

我已经看了好几个小时了，甚至无法弄清楚是什么导致这个卷轴被触发。希望得到一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:54:45.503

所以，问题不在于同位素。问题是在 scale3d 和/或 transform3d 发生后 firefox 如何渲染文本区域存在错误。它最终“认为” textarea 在左上角，这就是它跳到顶部的原因。以下是在 Mozilla 的 bugzilla 上提交的两个错误：

2011 年 11 月：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=703241) ://bugzilla.mozilla.org/show_bug.cgi?id= 703241 2012 年 7 月：[https ://bugzilla.mozilla.org/show_bug.cgi?id=778761](https://bugzilla.mozilla.org/show_bug.cgi?id=778761)

在应用相同的转换后，Chrome 也会出现渲染问题。即，插入符号的渲染。我提交了一个新的但在 Webkit 的 bugzilla 上，很快就得到了 Webkit 开发人员的确认。

这是一个错误示例：http: [//jsfiddle.net/galtschul/StbKg/](http://jsfiddle.net/galtschul/StbKg/)

在单击按钮之前单击任何可编辑框并查看插入符号是否正确呈现。然后单击按钮，这将缩放文本区域并观察光标不闪烁......输入几个字符，然后向左箭头观察插入符号没有移动......然后再次输入观察字符被插入到预期的位置。

这是错误报告：[https ://bugs.webkit.org/show_bug.cgi?id=94985](https://bugs.webkit.org/show_bug.cgi?id=94985)

急切期待修复！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:02:26.110

正如我所观察到的，这是由于 .isotope-item { position :absolute} 属性。尝试了很多，但真的无法找出解决方案。

# java - 如何组合 3 个 GUI

> ID：12105443
> 
> 赞同：2
> 
> 时间：2012-08-24T08:08:37.857
> 
> 标签：java, swing, user-interface, jtabbedpane

我有 3 个独立的 GUI，它们执行独立的功能：

*   转换器GUI
*   变压器GUI
*   生成GUI

我怎样才能将它们组合在一起，使它们看起来像标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T08:11:46.090

[`JTabbedPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html)有关详细信息，请参阅[如何使用选项卡式](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)窗格。

![选项卡式窗格](../Images/4daa86f31a6c6af10a9bf7a5a3808fab.png)

# prestashop - 添加新产品字段 Prestashop 1.5

> ID：12105451
> 
> 赞同：2
> 
> 时间：2012-08-24T08:09:09.033
> 
> 标签：prestashop

如何在 PRESTASHOP 1.5 上以编程方式添加新产品字段？

我在 SQL 上创建了这些字段，但我不知道如何保存？

这些字段是 3 bool，我想将其保存在单选按钮选项中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:22:20.563

您应该查看对应于 Product 类和 ObjectModel 类的 Product.php 和 ObjectModel.php。

如果要在 Product 中添加字段，则必须在类中添加属性，并通过添加您添加的属性的定义来更新类中的 $definition 变量。

关于单选按钮，它是控制器的一部分，看看 AdminProductsController.php

希望能帮助到你，

溴，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T13:21:25.637

Mayby 你会使用模块添加新字段吗？（这仅用于示例）

如果您在数据库中创建了字段（在我的示例中，我使用表“product_lang”）。

当你有skieleton模块时：

在模型/中创建“ProductField.php”

```
<?php

class ProductField extends ObjectModel
{
/** @var string Name */
public $id_product_field;

/** @var integer */
public $id_product;

/** @var string */
public $new_field;

/**
 * @see ObjectModel::$definition
 */
public static $definition = array(
    'table' => 'product_lang',
    'primary' => 'id_product',
    'multilang' => false,
    'fields' => array(
        'id_product' => array('type' => self::TYPE_INT, 'validate' => 'isInt', 'required' => TRUE),
        'new_field' => array('type' => self::TYPE_STRING, 'validate' => 'isString'),
    ),
);

public function __construct($ID_PRODUCT) {
    $result = Db::getInstance()->getRow('SELECT * FROM '._DB_PREFIX_.'product_lang WHERE id_product = '. (int) $ID_PRODUCT );
    $this->id_product = $ID_PRODUCT;
    $this->new_field = $result['new_field'];
}

public function update() {
    Db::getInstance()->update( 'product_lang', array( 'new_field' => $this->new_field ),  'id_product = ' . $this->id_product );
}

}
?> 
```

请记住在主文件中包含模型。

在模块添加方法的主文件中：

```
public function hookDisplayAdminProductsExtra($params) {
$Fields = new ProductField( Tools::getValue('id_product') );
if( !empty( $Fields ) && isset( $Fields->id_product ) ) {
    $this->context->smarty->assign(array(
        'new_field' => $Fields->new_field,
    ) );
}
return $this->display(__FILE__, 'views/admin/admin.tpl');
} 
```

创建视图/admin/admin.tpl

```
<!-- New Field MODULE -->
<input type="hidden" name="submitted_tabs[]" value="productfields" />
<h4>{l s='Additional Fields' mod='productfields'}</h4>
<div class="separation"></div>
<fieldset style="border:none;">
    <table cellspacing="0" cellpadding="5" border="0">
        <tbody>
        <tr>
            <td class="col-left">
                <label>{l s='New field' mod='productfields'}<br></label>
                <p class="product_description">{l s='description of new field' mod='productfields'}</p>
            </td>
            <td style="padding-bottom:5px;">
                <input type="text" name="new_field" value="{if isset($new_field)}{$new_field}{/if}" />
            </td>
        <tr>
        </tbody>
    </table>
</fieldset>
<div class="separation"></div>
<!-- END New Field MODULE --> 
```

我希望我没有忘记任何事情。只适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T15:19:45.130

看看这里：[https ://gist.github.com/kpodemski/21a37617b6b488590dc1](https://gist.github.com/kpodemski/21a37617b6b488590dc1)

这是 PrestaShop 1.5.4 的示例，但如果您下载 1.5.6 并将 informations.tpl 更改为较新的版本，它应该可以正常工作。

# jquery - 如何区分通过代码和用户输入的文本值的变化？

> ID：12105452
> 
> 赞同：0
> 
> 时间：2012-08-24T08:09:16.737
> 
> 标签：jquery

我正在使用[**Joel Purra 的 changePolling()**](https://gist.github.com/2944926)用于触发文本输入上的更改事件的插件。我真的很喜欢它，因为它让我摆脱了跟踪各种输入控件变化的头痛。使用该插件的原因是我的表单中几乎没有可折叠面板。当用户选择查看数据时，我通过 AJAX 调用加载数据。当用户对任何文本输入进行更改时，我将面板标记为“TOBE_SAVED”，以便当用户选择保存时，我只保存符合保存条件的面板（标记为“TOBE_SAVED”）。现在一切正常，因为即使用户复制粘贴内容，changepolling 也会触发文本输入更改事件，但问题是当我通过 AJAX 调用加载数据并将值分配给文本输入时，这会触发更改事件标记面板为“TOBE_SAVED “只在第一次。我需要知道，我该如何处理这种情况。具体来说，我会要求@Joel Purra 在他开发插件时向我推荐一些东西。

解决方法是，我会检查是否是第一次加载数据，面板不应标记为“TOBE_SAVED”，但仍想知道是否有更好的方法来处理此问题，例如挂起 changePolling 插件.

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:12:03.783

```
$(elem).on("change", function(e) {
    if (e.isTrigger) {
       //triggered through code
    }
}); 
```

# google-app-engine - GAE-NDB：如何防止投影改变结果

> ID：12105454
> 
> 赞同：0
> 
> 时间：2012-08-24T08:09:22.817
> 
> 标签：google-app-engine, app-engine-ndb

我使用了[ndb 投影](https://developers.google.com/appengine/docs/python/ndb/queries#projection)，但它确实改变了结果，结果如何不受投影的影响？

```
class T(ndb.Model):
  name = ndb.StringProperty()  
  name2 = ndb.StringProperty(repeated=True)

  @classmethod
  def test(cls):
    for i in range(0, 10):
      t = T(name=str(i))
      if i%2 == 0:
        t.name2=["zzz"]      
      t.put()

    qr = T.query()
    qo = ndb.QueryOptions(projection=['name', 'name2'])
    items, cursor, more = qr.fetch_page(20, options=qo)
    print len(items)

    qo = ndb.QueryOptions(projection=['name'])
    items, cursor, more = qr.fetch_page(20, options=qo)
    print len(items) 
```

结果是 5、10

如何使结果为 10、10 ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:39:35.263

空的列表属性 (repeated=True) 不会被索引，因为它是投影查询用来返回结果的索引，所以不会返回没有属性值的实体。您的测试用例容易受到 Tim 的评论提到的最终一致性*的*影响，但这不是唯一的问题。

# python - 为一组 3D 数据应用行主订单

> ID：12105456
> 
> 赞同：0
> 
> 时间：2012-08-24T08:09:36.233
> 
> 标签：python

好吧，我遇到了一个问题，我需要按行主要顺序编写一组数据文件。数据是 x、y 和 z 中的 3D 集中点，它们都被计算为：Pac = [Pac[0], Pac[1], Pac[2]]

所以我尝试执行以下操作以按行主要顺序读取这些数据：

```
fp = open('pac_data.dat' , 'w')
for iz in range(pac.shape[2]):
    for iy in range(pac.shape[1]):
        for ix in range(pac.shape[0]):
            fp.write(str(pac[ix,iy,iz])+'\t')
        fp.write("\n")
    fp.write("\n")
fp.close() 
```

从数据结果来看，这显然不是答案。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:23:45.853

实际上上面所说的工作......如果你在 x、y 和 z 中有数据，如果你想按行主要顺序排列数据，这工作

# wpf - 寻找具有缩放功能的 WPF 多列列表

> ID：12105462
> 
> 赞同：0
> 
> 时间：2012-08-24T08:09:58.317
> 
> 标签：wpf

我想创建一个多列的复选框列表，但这里有一个问题——当我调整窗口大小时，我希望所有内容都相应地缩放，包括文本大小。我一直在尝试使用 WrapPanel 和 ViewBox，但无法正确使用 XAML。这些控件是最佳选择还是我应该使用 ListBox（注意我不需要选择功能或滚动条）？任何关于我如何实现这一目标的建议或示例将不胜感激。我正在使用 MVVM，如果这有所不同，列表将是数据绑定的。

顺便说一句，自从开始 WPF 以来，我一直在努力了解哪些控件大小适用于他们的孩子以及哪些大小适用于他们的父母。是否有任何好的网站、备忘单或总结每个控件的行为的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:46:30.020

如果您有可变数量的子元素，您可以将[UniformGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.uniformgrid.aspx)放入 ViewBox。

如果子元素必须通过 DataTemplate 进行可视化，则必须使用 ItemsControl 并将`ItemsPanel`属性设置为这样的 UniformGrid：

```
<Viewbox Stretch="Uniform">
    <ItemsControl ItemsSource="{Binding Items}" Width="400" Height="200">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Columns="4"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border Background="AliceBlue">
                    <CheckBox Content="{Binding Label}" IsChecked="{Binding IsChecked}"
                              HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Viewbox> 
```

# php - PHP shell_execution 命令？

> ID：12105463
> 
> 赞同：0
> 
> 时间：2012-08-24T08:09:59.143
> 
> 标签：php, shell

如果我运行 shell_exec(php file) ，它会激活 shell_execution 并继续执行 php 文件，还是会尝试先完成 shell_executed php 文件中的所有内容，然后运行执行它的 php 文件的其余部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:15:00.753

它将首先完成 shell 执行，然后运行 ​​php 文件中的其余代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:14:25.450

`shell_exec()`，如[文档中所述](http://php.net/manual/en/function.shell-exec.php)，将完整输出作为字符串返回。所以它必须是一个“阻塞”功能。这意味着它将阻止其余代码的执行，直到它完成。

根据您要执行的命令，您可能希望强制进程在后台运行，并`&`在命令末尾使用字符。这当然是假设您在基于 unix 的服务器上运行。

# wcf - Wcf 服务访问错误 - HTTP 请求被禁止

> ID：12105465
> 
> 赞同：1
> 
> 时间：2012-08-24T08:10:01.293
> 
> 标签：wcf, http, authentication, iis, authorization

当尝试访问我的 WCF 服务时，它会抛出以下异常

*   客户端身份验证方案“匿名”禁止 HTTP 请求。
*   内部解释：远程服务器返回错误：（403）禁止。

其他观察：

*   它早些时候工作
*   当我在其他系统上设置时相同的应用程序没有错误。
*   从我的系统本身使用 Windows 应用程序可以正常工作。

情况：

*   WCF 服务托管在远程 DEV 服务器中，我在我的 Web 应用程序中添加为服务引用。
*   目前，使用服务的 Web 应用程序从 VS 运行，而不是通过托管在 IIS 中

真是一团糟。有没有人遇到过这样的情况？请与我分享。我在谷歌上搜索了这个问题，但没有一个是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:27:10.160

可能是在您的本地计算机上打开了 Windows 身份验证，但在 IIS 中未打开。

仔细检查您的服务正在运行的应用程序池。此外，请确保应用程序池正在运行集成模式并且版本正确。

具体看这篇[文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=487)第一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:58:09.153

检查托管服务的应用程序池。如果那里打开了 Windows 身份验证，则将其包含在清单 xml 文件中。

```
<system.web>
  <authentication mode="Windows" />
</system.web> 
```

供参考：[点击这里](http://msdn.microsoft.com/en-us/library/dd744835%28v=vs.95%29.aspx)

# objective-c - UIScrollView setContentSize 因未捕获的 NSRangeException 而崩溃

> ID：12105467
> 
> 赞同：4
> 
> 时间：2012-08-24T08:10:05.320
> 
> 标签：objective-c, ios, uiscrollview, crash, nsrangeexception

删除某些 UIScrollView 的内容后，调用 setContentSize 会使应用程序崩溃。

```
int toolbarHeight = [[[self navigationController] toolbar] frame].size.height;
int navbarHeight = [[[self navigationController] navigationBar] frame].size.height;

int totalHeight = toolbarHeight + navbarHeight;
// contentWidth is 640
CGSize contentSize = CGSizeMake(contentWidth, [scrollView frame].size.height - totalHeight);

[scrollView setContentSize:contentSize]; // Crash happens here, contentSize is perfectly valid 
```

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]”

这可能是什么原因造成的？

**编辑**：对于那些可以理解它的人来说，这是堆栈跟踪：

```
* thread #1: tid = 0x1c03, 0x34d2e32c libsystem_kernel.dylib`__pthread_kill + 8, stop reason    = signal SIGABRT
frame #0: 0x34d2e32c libsystem_kernel.dylib`__pthread_kill + 8
frame #1: 0x36c2a20e libsystem_c.dylib`pthread_kill + 54
frame #2: 0x36c2329e libsystem_c.dylib`abort + 94
frame #3: 0x308eff6a libc++abi.dylib`abort_message + 46
frame #4: 0x308ed34c libc++abi.dylib`_ZL17default_terminatev + 24
frame #5: 0x36361356 libobjc.A.dylib`_objc_terminate + 146
frame #6: 0x308ed3c4 libc++abi.dylib`_ZL19safe_handler_callerPFvvE + 76
frame #7: 0x308ed450 libc++abi.dylib`std::terminate() + 20
frame #8: 0x308ee824 libc++abi.dylib`__cxa_rethrow + 88
frame #9: 0x363612a8 libobjc.A.dylib`objc_exception_rethrow + 12
frame #10: 0x34e9050c CoreFoundation`CFRunLoopRunSpecific + 404
frame #11: 0x34e9036c CoreFoundation`CFRunLoopRunInMode + 104
frame #12: 0x3618c438 GraphicsServices`GSEventRunModal + 136
frame #13: 0x31f86e7c UIKit`UIApplicationMain + 1080
frame #14: 0x0000cb50 App`main + 152 at main.m:16 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:55:29.417

当内容偏移量超出内容大小时，似乎会引发异常。

```
I had views side by side in the scroll view and the offset was to the last view.

+------+------+------+
|      |      |offset|
+------+------+------+

Now the last view is removed and the content size changed to a smaller one.

+------+------+
|      |      |offset
+------+------+

The offset is left behind. 
```

我更改了代码，以便首先移动偏移量，然后更改内容大小。

```
+------+------+
|      |offset|
+------+------+ 
```

到目前为止没有崩溃。

# objective-c - 使用 DidSelectRowAtIndexPath 更改 NSMutableArray

> ID：12105468
> 
> 赞同：2
> 
> 时间：2012-08-24T08:10:09.610
> 
> 标签：objective-c, ios, xcode, uitableview, nsmutablearray

我以为我自己弄清楚了如何做这个问题，但它不起作用。我使用的代码：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
     //timedText = a NSString

    [timed replaceObjectAtIndex:1 withObject:timedText];
    [SpelerTable reloadData];
} 
```

有人可以告诉我我做错了什么吗？另外，我不想使用“replaceObjectAtIndex：1”，而是使用选定的单元格。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:15:00.857

为什么要索引`1`而不是`indexPath.row`？另外，您不需要重新加载整个表格；只是改变的行：

```
[timed replaceObjectAtIndex:indexPath.row withObject:timedText];
[spelerTable reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                   withRowAnimation:UITableViewAnimationAutomatic]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:15:17.180

```
[timed replaceObjectAtIndex: indexPath.row withObject:timedText]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:18:10.747

要使用单元格：

```
UITableViewCell *cell = [self tableView:self.tableView cellForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:13:56.660

试试这个代码

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
     //timedText = a NSString

    [timed replaceObjectAtIndex:indexpath.row withObject:timedText];
    [SpelerTable reloadData];
} 
```

如果您的其他代码中的所有内容都正确，那么它将起作用。

# ruby-on-rails - 获取当前操作的路径/url，包括查询字符串？（导轨）

> ID：12105472
> 
> 赞同：9
> 
> 时间：2012-08-24T08:10:20.957
> 
> 标签：ruby-on-rails, model-view-controller, url, controller, uri

简单的问题 - 如何获取当前操作的路径或完整 URL，包括查询字符串？

我希望像这样将它保存到会话变量中：

```
def show
  @thingy = Thingy.find(params[:id])

  session[:some_var] = current_url

  ...
end 
```

目前我正在执行以下操作，但似乎有点笨拙（尤其是单独指定查询字符串参数）：

```
def show
  @thingy = Thingy.find(params[:id])

  session[:some_var] = thingy_path(@thingy, :q1 => params[:q1], :q2 => params[:q2])

  ...
end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T08:25:48.277

`request.url`可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:12:48.867

访问`params`变量，它会给你查询以及`controller`和`action`。通过使用`request`对象，您可以根据需要进行更深入的挖掘。

# android - Android ActionBarSherlock 顶部图标返回

> ID：12105479
> 
> 赞同：4
> 
> 时间：2012-08-24T08:10:41.810
> 
> 标签：android, actionbarsherlock, back

我正在尝试制作顶部操作栏图标以允许用户返回上一个屏幕。我试图实现这些代码。但没有一个工作。任何人都可以请指导我。我知道这看起来很简单，我是 android 新手。以下是我的代码。

问题：当我点击图标按钮时，它只是清除了我的屏幕，而没有转到上一个屏幕。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_item);
        checkInternetConnection();

        getSupportActionBar().setDisplayHomeAsUpEnabled(true); //<--THIS

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{    
   switch (item.getItemId()) 
   {        
      case android.R.id.home:            
         Intent intent = new Intent(this, SingleViewActivity.class);            
         intent.addFlags(Intent.FLAG_ACTIVITY_TASK_ON_HOME); 
         startActivity(intent);            
         return true;        
      default:            
         return super.onOptionsItemSelected(item);    
   }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T08:15:25.443

这就是我这样做的方式：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // app icon in action bar clicked; go home
        Intent intent = new Intent(this, main.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        break;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:18:35.020

在您的资源（资源）中，转到菜单并添加这个，使您在可绘制对象中有一些按钮

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item
    android:id="@+id/back"
    android:icon="@drawable/back1"
    android:showAsAction="always|withText"
    android:title="back"/> 
```

现在在你的活动中

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        break;
    case R.id.back:
        Intent in = new Intent(this, <classname which you want to go back>.class);
        startActivity(in);
        break;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T15:17:05.267

你可以试试这个代码

```
<item
    android:id="@+id/back"
    android:icon="@drawable/btn_back"
    android:showAsAction="always|withText"
    android:title="@string/txt_back"/> 
```

>

```
@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    // TODO Auto-generated method stub
    getSupportMenuInflater().inflate(R.menu.home, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    // TODO Auto-generated method stub
    //return super.onOptionsItemSelected(item);
    switch (item.getItemId()) 
    {
        case R.id.back:
                back_action();
            return true;

        default:
            break;
    }
    return true;
} 
```

>

# php - 构造函数中的引用

> ID：12105489
> 
> 赞同：0
> 
> 时间：2012-08-24T08:11:40.050
> 
> 标签：php, joomla, joomla2.5

阿罗哈:)

是否可以有一个带有引用作为参数的构造函数，然后从另一个类中使用它？

```
 Class 1 named ABC
    function __construct( $table, $key, &$db ){

    $this->_tbl     = $table;
    $this->_tbl_key = $key;
    $this->_db      =& $db;
    $this->_pkey = $key;
} 
```

接下来我想在 XYZ 中使用 ABC。像这样：

```
 $ABC= new ABC("dummytable", "id"); 
```

但显然这缺少一个参数，当我输入一个参数时，它返回一个关于参考的错误..

我该如何解决这个问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:16:35.293

如果`$db`是对象，则不要将其作为参考传递。如果参数是可选的，则给它一个默认值。

```
function __construct( $table, $key, $db = null){
    $this->_tbl     = $table;
    $this->_tbl_key = $key;
    $this->_db      = $db;
    $this->_pkey = $key;
} 
```

# php - 我怎样才能在 symfony2 表单实体选择框中有我的自定义“类型”

> ID：12105492
> 
> 赞同：0
> 
> 时间：2012-08-24T08:11:46.403
> 
> 标签：php, symfony, doctrine-orm

这是显示选择框的正常方式

```
add('user','entity') 
```

当我想使用复选框时，我不喜欢它使用的样式。

所以我想要如果我使用我的自定义类型，即

`add('user','MYTYPE')`然后我可以定义自己的方式来显示各种实体

我正在使用`Genemuformbundle`并且我正在使用他的自定义类型`genemu_jquerychosen_entity`，例如覆盖字段的显示方式。

但我不明白，如何制作我自己的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:28:11.840

要创建自定义字段，请遵循[此](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html)食谱条目。

# java - Java 双/整数

> ID：12105494
> 
> 赞同：0
> 
> 时间：2012-08-24T08:12:13.703
> 
> 标签：java, math, int, double

> ```
> int a = 1;
> int b = 10;
> int c = 3;
> 
> int d = (1/10)*3
> 
> System.out.println(d)
> 
> Result: 0 
> ```

我如何使这个计算工作？向上还是向下取整？它应该是： (1/10)*3 = 0.1 * 3 = 0.3 = 0 和 (4/10)*3 = 0.4 * 3 = 1.2 = 1

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:14:39.053

```
1 / 10 
```

这是整数除法，整数除法结果为 0。然后 0 * 3 = 0

您可以使用双重文字：

```
1.0 / 10.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:14:27.777

> 1/10

此行返回 0.so 0*3=0。使用**double**而不是**int**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:15:36.550

尝试：

```
int d = (int) (((double)4/10)*3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:14:44.670

因为 a 和 b 都是整数，所以输出也将是 int ，这使得 1/10 为 0，然后 0*3=0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T08:15:44.413

您将需要使用浮点表示来执行计算。然后您可以将结果转换回整数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T08:17:37.550

我注意到您在问题中提到了*rounding up/down*。

[Math.round()](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)将在这里为您提供帮助。

> 返回最接近参数的 long。通过加 1/2、取结果的下限并将结果转换为 long 类型，将结果四舍五入为整数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T08:21:26.857

这将有效

```
int a = 1;
int b = 10;
int c = 3;    
int d = (1*3/10);    
System.out.println(d); 
```

# ios - 推送 ViewController 会产生 NSInvalidArgumentException

> ID：12105497
> 
> 赞同：3
> 
> 时间：2012-08-24T08:12:47.993
> 
> 标签：ios

我是一个新手iOS开发人员，最近开发了几个Android应用程序，但我不熟悉iOS术语。让我解释一下我的问题。

我想使用两个不同的`UIViewController`. 我已经为两个控制器创建了`.h`文件`.m`。我的计划是在第一个视图控制器出现在屏幕上五秒钟后将第二个视图控制器推到第一个视图控制器的顶部。我的意思是第一个视图控制器类似于闪屏或类似的东西。

这是我的贡献。在第一个视图控制器中，我定义了（当然其中一个实现了）这两种方法：

```
-(void) pushSecondController {
    SecondViewController *secondController = [[SecondViewController alloc]
                                              initWithNibName: nil
                                              bundle: NULL];
    [self.navigationController pushViewController: secondController animated: YES];
}

-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self performSelector: @selector(pushViewController:animated:)
                withObject: nil
                afterDelay: 5.0f];
} 
```

第二个视图控制器如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor whiteColor];
    self.title = @"Second Controller";
} 
```

我只改变了`viewDidLoad`方法。当我运行模拟器时，第一个视图控制器运行良好，等待 5 秒后崩溃。输出如下所示：

```
2012-08-24 10:46:34.104 NavApplication[20355:f803] -[ViewController pushViewController:]: unrecognized selector sent to instance 0x6e7f780
2012-08-24 10:46:34.107 NavApplication[20355:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController pushViewController:]: unrecognized selector sent to instance 0x6e7f780' 
```

`methodName`让我再问一个问题：我知道和之间存在差异`methodName:`。谁能解释一下有什么区别？

任何帮助，将不胜感激。

**更新：**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [self.window makeKeyAndVisible];
    [self.window addSubview: self.navigationController.view];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:22:28.777

更改`@selector(pushViewController:animated:)`为`@selector(pushSecondController)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:30:30.340

如上所述，您可能希望将`performSelector`命令更改为：

```
[self performSelector: @selector(pushSecondController)
            withObject: nil
            afterDelay: 5.0f]; 
```

因为您希望它调用您的`pushSecondController`方法，而不是`pushViewController:animated:`.

`methodName`关于您的第二个问题：和之间的区别在于`methodName:`末尾`:`的`methodName:`表示此方法带有参数。所以，你可以有以下方法：

```
- (void)listItems
{
    // ...
}

- (void)insertItem:(NSDictionary *)item
{
    // ...
} 
```

将它们的引用传递给 时`@selector`，对于第一种方法，您只需执行`@selector(listItems)`，因为它不带参数，而对于后者，您会这样做，`@selector(insertItem:)`因为它带有参数。

**更新**

刚看到你的`applicationDidLaunch`代码。您可能想要重新排列事物，以便将您添加`ViewController`到您的`UINavigationController`中，然后将 设置`UINavigationController`为窗口的 rootViewController。像这样：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

    self.window.rootViewController = self.navigationController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:32:55.817

请将您的 didFinishLaunchingWithOptions 方法更改为：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

            self.window.rootViewController = self.navigationController;

            [self.window makeKeyAndVisible];

            return YES;
    } 
```

# gwt - GXT3 文本按钮样式

> ID：12105499
> 
> 赞同：0
> 
> 时间：2012-08-24T08:12:49.880
> 
> 标签：gwt, gxt

如何更改 EXT GWT 3 中 TextButton 的样式/外观？我最感兴趣的是背景颜色。

谢谢你，霍拉修

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:46:36.663

GXT 2x 更容易......但是...... GXT 3 应该更容易维护大型项目。

Sencha 为 GXT 3 提供了不同的方法，但我想我将使用的一种方法是创建外观，然后通过构造函数将其传入。这是他们的例子：

```
ContentPanel redContentPanel = new ContentPanel(new RedContentPanelAppearance()); 
```

完整的例子在： [Sencha的解释和推理](http://www.sencha.com/blog/migrating-styles-and-themes-from-ext-gwt-2-to-gxt-3/)

认为您必须创建自己的外观（基于现有外观并更改您想要的位）这似乎并不简单。

关于外观用法的更多推理在[gxt3 外观解释](http://www.sencha.com/blog/ext-gwt-3-appearance-design)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:22:20.667

查看 ButtonCellBase.css 中定义的样式类并在您的 css 中覆盖它们。

# c++ - 将 32 位整数转换为可打印的 8 位字符

> ID：12105509
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:13:43.953
> 
> 标签：c++, visual-c++

我想将一系列 32 位整数值转换为一系列可打印的 8 位字符值。将 32 位整数映射到可打印的 8 位字符值应该会产生清晰的 ASCII 艺术图像。

我可以将整数转换为 ASCII：

```
#include <iostream>
using namespace std;
int main() {
    char ascii;
    int numeric;
    cout << "Enter Number ";
    cin >> numeric;
    cout << "The ascii value of " << numeric << " is  " << (char) numeric<<"\n\n"<<endl;
    return 0;
} 
```

我还需要打开我的号码保存到的文本文件：

```
// reading a text file
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
    string line;
    ifstream myfile ("1.txt");
    if (myfile.is_open())
    {
        while ( myfile.good() )
        {
            getline (myfile,line);
            cout << line << endl;
        }
        myfile.close();
    }
    else
        cout << "Unable to open file"; 
    return 0;
} 
```

但我的问题是，我无法打开此“文本”文件并在屏幕上打印 ASCII，也无法在“Output.txt”中打印该文件的副本

我的文本文件里面只是：

757935403 544999979 175906848 538976380 757795452 170601773 170601727

转换为 ASCII 后需要如下所示：

代表ASCII艺术图片

```
+---+
|   |
|   |
+---+ 
```

并且在我的 output.txt 中也有这个。

如果您知道如何编写此程序，请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:48:45.907

首先，您不能在不丢失信息的情况下将 32 位整数转换为 8 位 ascii。据我猜测，您应该从 32 位整数中提取 4 个 ascii 字符。

如果您的输入文件是非二进制的（这意味着整数值是人类可读的/由一些分隔符分隔），您应该做的第一件事是创建另一个文件/流并将这些值写入新文件/流，但现在处于二进制模式（在这种模式下，将没有分隔符，并且生成的文件/流将不可读）。

现在从这个新文件/流中逐个读取字符（以二进制模式打开文件），并使用非二进制模式将其写入最终输出文件。

* * *

如果您想在没有几个文件输入的情况下这样做，

读取数组中的所有整数值，然后用 char 指针指向起始内存位置，然后一一写入此 char 数组的内容。

```
int* myIntArray; //keep the size of it somewhere
char* myCharArray =(char*)myIntArray; // size for myCharArray is 4 times of the myIntArray 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:11:25.627

将这些数字转换为十六进制后，您会得到这个

```
2d2d2d2b 207c0a2b 0a7c2020 2020207C
- - - +    | lf+  lf|            | 
```

等等等等

所以基本上由于某种原因，输入文件包含存储为整数的输出字符。这完全是字节序不安全的。

你最糟糕的赌注是读取每个整数，将其转换为一个字符数组并输出这 4 个字符。

如果您使用的是 unix，我建议您尽可能使用“tee”将输出发送到 2 个文件，否则输出一次到 stdout，然后再次输出到您为 Output.txt 打开的任何文件句柄。

# android - Eclipse 中 Android 项目的 Javadoc 给出 NullPointerException

> ID：12105510
> 
> 赞同：1
> 
> 时间：2012-08-24T08:13:48.657
> 
> 标签：android, javadoc

我正在尝试在 Eclipse 中为我的 Android 项目生成 JavaDoc 注释，但我不断收到`NullPointerException`. `android.support`仅当我尝试为导入 Android 兼容性库 ( 我还参考了 Android 2.2 和几个库项目，但它们本身不会导致此错误。

```
C:\Users\workspace\fm\src\com\fm\camera\UploadSubmissionSubmitPhotoVideo.java:9: package android.content does not exist

import android.content.Intent;
                      ^
Standard Doclet version 1.6.0_19
Building tree for all the packages and classes...
java.lang.NullPointerException
    at com.sun.tools.javadoc.TypeMaker.getType(TypeMaker.java:67)
    at com.sun.tools.javadoc.TypeMaker.getType(TypeMaker.java:29)
    at com.sun.tools.javadoc.ClassDocImpl.superclassType(ClassDocImpl.java:441)
    at com.sun.tools.doclets.internal.toolkit.util.Util.getAllInterfaces(Util.java:386)
    at com.sun.tools.doclets.internal.toolkit.util.Util.getAllInterfaces(Util.java:424)
    at com.sun.tools.doclets.internal.toolkit.util.ClassTree.processType(ClassTree.java:162)
    at com.sun.tools.doclets.internal.toolkit.util.ClassTree.buildTree(ClassTree.java:114)
    at com.sun.tools.doclets.internal.toolkit.util.ClassTree.<init>(ClassTree.java:73)
    at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:104)
    at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:64)
    at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:42)
    at com.sun.tools.doclets.standard.Standard.start(Standard.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:269)
    at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:143)
    at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:340)
    at com.sun.tools.javadoc.Start.begin(Start.java:128)
    at com.sun.tools.javadoc.Main.execute(Main.java:41)
    at com.sun.tools.javadoc.Main.main(Main.java:31)
100 warnings 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T11:13:08.437

您好，我找到了这个问题的解决方案，您只需执行 2 个步骤：

(1)：生成一个javadoc.xml（新建一个txt>另存为javadoc.xml）

(2) ：在 Run > cmd > 中并转到保存 javadoc 文件的位置，触发如下命令：**ant -f javadoc.xml**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="C:\Users\workspace\fm\src\com\fm\APIClient" default="doc" name="api docs">
<target name="doc" description="my docs">
<javadoc destdir="C:\Users\workspace\fm\doc" doctitle="Testing the Title" verbose="on" 
    use="true" 
    classpath="F:\android SDK and eclipse\android-sdk-windows\platforms\android-10\android.jar;C:\Users\workspace\fm\libs

\android-query-full.0.22.10.jar;C:\Users\workspace\fm\libs\commons-httpclient-3.0.1.jar;C:\Users\workspace\fm\libs\gcm.jar;C:\Users\workspace\fm\libs\httpmime-4.1.jar;F:\android SDK and eclipse\android-sdk-windows\add-ons

\addon_google_apis_google_inc_8\libs\maps.jar"  
    sourcepath="C:\Users\workspace\fm\src;C:\Users\workspace\fm\gen"
    packagenames="com.fm.APIClient" 
    linkoffline="http://d.android.com/reference F:\android SDK and eclipse\android-sdk-windows\docs\reference"
    stylesheetfile="F:\android SDK and eclipse\android-sdk-windows\docs\assets\android-developer-docs.css"
    >
</javadoc>
</target>
</project> 
```

# javascript - 使用 JavaScript 验证多封电子邮件

> ID：12105513
> 
> 赞同：7
> 
> 时间：2012-08-24T08:13:54.780
> 
> 标签：javascript, jquery

我有这两个功能：

```
validateEmail: function(value) {
    var regex = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
return (regex.test(value)) ? true : false;
}

validateEmails: function(string) {

    var self = shareEmail;
    var result = string.replace(/\s/g, "").split(/,|;/);

        for(var i = 0;i < result.length;i++) {
            if(!self.validateEmail(result[i])) {
                return false;
            } else {               
            return true;
        }
    }
} 
```

问题是，当我像这样测试电子邮件时，我`if(!self.validateEmails(multipleEmails)) {`仅根据字符串中的第一封电子邮件得到真或假，但我想测试字符串中的任何电子邮件。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T08:18:23.460

问题是你的 if/else 块；你在这两种情况下都回来了。这意味着它在仅评估一个元素后离开函数。

我已经修改了 validateEmails 来演示您可能想要做的事情：

```
validateEmail: function(value) {
    var regex = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    return (regex.test(value)) ? true : false;
}

validateEmails: function(string) {
    var self = shareEmail;
    var result = string.replace(/\s/g, "").split(/,|;/);

    for(var i = 0;i < result.length;i++) {
        if(!self.validateEmail(result[i])) {
            return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:30:29.543

这个怎么样？

```
validateEmails: function(string) {

    var self = shareEmail;
    var result = string.replace(/\s/g, "").split(/,|;/);
    var errors = [];
    for(var i = 0;i < result.length;i++) {
        if(!self.validateEmail(result[i])) {
            errors[i] = result[i] + ' is not valid.';
        }
     }
     if (errors.length > 0) {
        alert(errors.join('\n'));
        return false;
     } else {
         return true;
     }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T15:40:10.133

如果您使用 jquery-validate 验证方法将如下所示：

```
jQuery.validator.addMethod("separated_emails", function(value, element) {
    if (this.optional(element)) {
        return true;
    }

    var mails = value.split(/,|;/);
    for(var i = 0; i < mails.length; i++) {
        // taken from the jquery validation internals
        if (!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(mails[i])) {
            return false;
        }
    }

    return true;
}, "Please specify a email address or a comma separated list of addresses"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T08:20:40.987

我发现最可维护的方法是使用变量来存储返回输出。

```
validateEmail: function(value) {
    var regex = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
return (regex.test(value)) ? true : false;
}

validateEmails: function(string) {

var self = shareEmail;
var result = string.replace(/\s/g, "").split(/,|;/);
var allOk = true;

    for(var i = 0;i < result.length;i++) {
        if(!self.validateEmail(result[i])) {
            allOk = false;
        } 
    }

return allOk;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T19:16:29.223

下面的代码非常适合使用 JQuery 验证用逗号或分号分隔的多个电子邮件地址：

```
 var emailReg = new RegExp(/^([A-Z0-9.%+-]+@@[A-Z0-9.-]+.[A-Z]{2,6})*([,;][\s]*([A-Z0-9.%+-]+@@[A-Z0-9.-]+.[A-Z]{2,6}))*$/i);
      var emailText = $('#email').val();
      if (!emailReg.test(emailText)) {
          alert('Wrong Email Address\Addresses format! Please reEnter correct format');
            return false;
        } 
```

# ruby-on-rails - Ruby on Rails 和 Active Record 关联中的多级类别

> ID：12105514
> 
> 赞同：0
> 
> 时间：2012-08-24T08:13:54.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

需要在 Ruby on Rails 中创建多级类别。所以我创建了一个模型类别，它有标题和描述并且有很多文章。

```
class Category
  has_many :articles
end 
```

然后我需要在模型中添加`parent_id`字段`Category`。此字段必须为 null（如果它是父类别）或具有某个 id（如果它是子类别）。显然，要选择任何父类别，它必须选择`Select * from Categories where parent_id=null`.

我希望你明白我的意思。

怎么可能达到？

**更新**：感谢您的建议。这是我所拥有的

```
class Category < ActiveRecord::Base
  belongs_to :parent, :class_name => "Category", :foreign_key => "parent_id"
  has_many :children,  :class_name => "Category", :foreign_key => "parent_id"
  attr_accessible :description, :title
end 
```

据我了解，`:foreign_key => "parent_id"`in`has_many :children`必须被删除，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:15:42.737

在这里阅读自加入模型：http: [//guides.rubyonrails.org/association_basics.html#self-joins](http://guides.rubyonrails.org/association_basics.html#self-joins)

# macos - 在 Cocoa 中将繁体中文转换为简体中文

> ID：12105515
> 
> 赞同：0
> 
> 时间：2012-08-24T08:14:01.317
> 
> 标签：macos, cocoa, internationalization

一位客户要求提供从繁体中文到简体中文的文本转换功能。

我做了一些研究，显然这是一种可以很容易自动化的东西，Mac OS X 甚至有一个系统范围的服务可以做到这一点.. OS X 中似乎内置了一些东西来执行这些更改，但我m 不是国际化专家..

有人知道如何创造这个奇迹吗？

最好的祝福，

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:06:49.183

我认为您要求的功能存在于 Apple 随 OS X 一起提供的应用程序中——我不知道任何内置功能。

如果您尝试实现转换，看起来 wikimedia 有一些代码可以做您想做的事情，但您必须从 PHP 转换它：

[http://svn.wikimedia.org/doc/classZhConverter.html](http://svn.wikimedia.org/doc/classZhConverter.html)

另外，可能不仅仅是转换字符的问题，虽然大部分是......在中国大陆（简体字）和其他地方（繁体字）中也有不同的短语。

# python - Python循环混乱

> ID：12105516
> 
> 赞同：1
> 
> 时间：2012-08-24T08:14:02.393
> 
> 标签：python, loops, openpyxl

我似乎将自己与循环混淆，无法修复，我希望生成一个数据集，该数据集在我的 excel 表中向右和向下移动，但由于某种原因，每个新行都会在第一行的末尾被截断，因此我的回溯错误，试图读取上面的空单元格。我希望能有一些新鲜的眼光，因为我后来的代码依赖于这个正确的输出，希望它能够解决全球经济衰退，或者不是，但会让我成为一个快乐的人。:)

```
import datetime 
import random
import numpy as np
import math
import sys
from openpyxl import Workbook
from openpyxl.cell import get_column_letter
from openpyxl import load_workbook
from tempfile import TemporaryFile
from random import normalvariate, expovariate, seed, gammavariate
from math import sqrt
from itertools import groupby

for week in CurrentWeek:
    Global_counter = week

    i = Global_counter
    j = 52 + i

    if Global_counter == 1:

        for index in range(i,j,1):
            PlanWeek = index
            EC_D = 500.0
            if  EC_D <= 0:
                EC_D = EC_D *(-1)
            EC_PlanData.append(EC_D)
            d = sheet1.cell(row = Global_counter, column = PlanWeek)
            d2 = sheet2.cell(row = Global_counter, column = PlanWeek)
            d.value = EC_D
            d2.value = EC_D

    else:
        for index in range(i,j,1):
            PlanWeek = index
            DiffWeek = PlanWeek - Global_counter
            Sigma = 1
            mu = 0
            FC_VZ = random.normalvariate(mu, Sigma)
            if FC_VZ > 0:
               FC_VZ = 1
            FC_Error = FC_Error+RemainingFCError
            fcerr = sheet5.cell(row = Global_counter, column = PlanWeek)
            fcerr.value = FC_Error

            Prev_Week = Global_counter - 1
            ECDD1 = sheet1.cell(row=Prev_Week, column=PlanWeek).value
            ECDD2 = sheet1.cell(row=Prev_Week, column=PlanWeek).value
            EC_D = ECDD1 - (ECDD2*FC_Error)

            FC_Error = 0   
            ECPD = sheet1.cell(row = Global_counter, column=PlanWeek)
            ECPD.value = EC_D
            FCAD = sheet6.cell(row = Global_counter, column=PlanWeek)
            FCAD.value = FC_Error
            IEFD = sheet2.cell(row = Global_counter, column=PlanWeek)
            IEFD.value = EC_D
            EC_D = 0
        wb.save('RHF_Loop_test4py.xlsx') 
```

我的追溯是：

```
Traceback (most recent call last):
File "C:\Python27\Darren Learning Samples\codetesting2.py", line 85, in <module>
EC_D = ECDD1 - (ECDD2*FC_Error)
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:27:18.770

I totally don't get what are you trying to compute, but here's the cause of the mentioned exception.

First of all, in your first `for` loop, in the excel file you take a row (row #1), and fill the columns in that row from column #1 to column #52 (indexing starts from 0):

Later, in the second `for` loop, when you read the values, you increase the global counter so when the exception is thrown, you are trying to read the values for the 53th week.

Solution: instead of

```
 ECDD1 = sheet1.cell(row=Prev_Week, column=PlanWeek).value
        ECDD2 = sheet1.cell(row=Prev_Week, column=PlanWeek).value
        EC_demand = ECDD1 - (ECDD2*FC_Error) 
```

you could

```
 ECDD1 = sheet1.cell(row=Prev_Week, column=DiffWeek).value
        ECDD2 = sheet1.cell(row=Prev_Week, column=DiffWeek).value
        EC_demand = ECDD1 - (ECDD2*FC_Error) 
```

You actually created the `DiffWeek` variable but forgot to use it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:51:56.530

```
import datetime 
import random
import numpy as np
import math
import sys
from openpyxl import Workbook
from openpyxl.cell import get_column_letter
from openpyxl import load_workbook
from tempfile import TemporaryFile
from random import normalvariate, expovariate, seed, gammavariate
from math import sqrt
from itertools import groupby

## Test Lists for testing code
lst_FC_error = []

## Using Lists and Excel
wb = Workbook()
dest_filename = r'RHF_Loop_test4py.xlsx'

EC_PlanData = []
sheet1 = wb.create_sheet(0)
sheet1.title = "EC_PlanData"

EC_FC_Data_original = []
sheet2 = wb.create_sheet(1)
sheet2.title = "EC_FC_Data_original"

FC_AccData = []
sheet5 = wb.create_sheet(4)
sheet5.title = "FC_Acc_Data"

EC_FC_Data_commited = []
sheet6 = wb.create_sheet(5)
sheet6.title = "EC_FC_Data_commited"

FC_Error = 0
alpha = 50
beta = 10
CurrentWeekRangeSize = 10
CurrentWeek = range(1,CurrentWeekRangeSize,1)
RemainingFCError = .2

for Global_counter in CurrentWeek:

    if Global_counter == 1:

        for index in range(Global_counter,Global_counter + 52 + CurrentWeekRangeSize,1):
            PlanWeek = index
            EC_demand = 500.0
            if  EC_demand <= 0:
                EC_demand = EC_demand *(-1)
            EC_PlanData.append(EC_demand)
            d = sheet1.cell(row = Global_counter, column = PlanWeek)
            print "hello", Global_counter, PlanWeek
            d2 = sheet2.cell(row = Global_counter, column = PlanWeek)
            d.value = EC_demand
            d2.value = EC_demand
        wb.save('RHF_Loop_test4py.xlsx')
        print "-------------"
    else:
        #this was the original logic:
        #for index in range(Global_counter,Global_counter + 52,1):
        for index in range(Global_counter,52,1):
            PlanWeek = index
            DiffWeek = PlanWeek - Global_counter
            Sigma = 1
            mu = 0
            FC_VZ = random.normalvariate(mu, Sigma)
            if FC_VZ > 0:
               FC_VZ = 1
            FC_Error = FC_Error+RemainingFCError   ## decrease demand
            fcerr = sheet5.cell(row = Global_counter, column = PlanWeek)
            fcerr.value = FC_Error

            Prev_Week = Global_counter - 1
            ECDD1 = sheet1.cell(row=Prev_Week, column=PlanWeek).value
            print Prev_Week, PlanWeek, ECDD1
            ECDD2 = sheet1.cell(row=Prev_Week, column=PlanWeek).value
            EC_demand = ECDD1 - (ECDD2*FC_Error)

            FC_Error = 0   
            ECPD = sheet1.cell(row = Global_counter, column=PlanWeek)
            ECPD.value = EC_demand
            FCAD = sheet6.cell(row = Global_counter, column=PlanWeek)
            FCAD.value = FC_Error
            IEFD = sheet2.cell(row = Global_counter, column=PlanWeek)
            IEFD.value = EC_demand
            EC_demand = 0
        wb.save('RHF_Loop_test4py.xlsx') 
```

# jquery - 如何从 Fancybox 2 中删除边框？

> ID：12105518
> 
> 赞同：2
> 
> 时间：2012-08-24T08:14:17.667
> 
> 标签：jquery, fancybox

我在那边需要一点帮助。在这里，我需要从 fancybox iframe [http://squaretwo.ru/pashokk](http://squaretwo.ru/pashokk)中删除白色边框。

您可以通过单击红色按钮调用 fancyBox。我已经阅读了以前的文章，但无法解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-08T23:07:27.283

调用花式框脚本时，您还可以将 padding:0 设置为选项。在你的 javascript 中：

```
jQuery(document).ready(function($) {
    $("a.fancybox").fancybox({
         padding: 0
    });
}); 
```

你去那里没有填充。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T08:31:17.523

您可以通过将其添加到样式表来删除它。

你的 iFrame 的结构是这样的，

```
<body style="overflow-x: hidden; ">
    <div style="max-width:550px; border: solid 15px #cc0033;" border="1">
       .
       .
       .
    </div>
</body> 
```

所以你可以像这样删除边框，

```
body div:first-child {
    border: 0 !important;
} 
```

但是，这将影响您为您的 提供的任何边框属性`#header`，因为这也是 a `div:first-child`。

`!important`为您的`div#header`边框属性做一个（如果需要）。

**编辑**

既然你想摆脱花哨的背景。

你需要添加这个，

```
.fancybox-skin {
    background: transparent;
    box-shadow: none !important;
} 
```

这是插件生成的默认类。

还，

添加以下内容

```
html{
  background: white;
} 
```

如果您只想要红色边框内的背景，则不要添加上面的`html`css，添加以下内容。

```
body div:first-child {
     background: white !important;
} 
```

# unix - 全部复制 文件到 tar.gz 文件

> ID：12105525
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:14:34.320
> 
> 标签：unix, grep, tar

在 Unix 中，如何在目录树（包括其所有子目录）中创建包含所有文件的压缩存档（tar.gz）？

像这样的东西：

```
ls -lR | grep <ext> | tar xxxx file.tar.gz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:17:26.530

你的意思是：

```
find -name '*.ext' -exec tar -rzf file.tar.gz {} + 
```

?

1.  `-name '*.ext'`查找所有带`.ext`后缀的文件，
2.  `-exec ... {} +`表示使用所有找到的文件作为参数执行命令，
3.  `tar -rzf file.tar.gz`表示将文件*附加*`file.tar.gz`到. 如果参数列表太长并且`tar`调用需要拆分，则它是“附加”。`-r`用于追加，`-z`用于 gzip-compress，`-f`用于指定存档文件名。

请注意，如果`file.tar.gz`已经存在，则需要先获取`rm`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:18:26.547

```
find your_path -type f -name "*.your_ext" | xargs tar -czf your_file.tar.gz 
```

# wordpress - wp-config.php 外部访问

> ID：12105542
> 
> 赞同：0
> 
> 时间：2012-08-24T08:15:19.963
> 
> 标签：wordpress, api, get, cpanel

我需要一个函数来获取 wp-config 数据库、用户并从另一台服务器传递。

我找到了这个，但只能在同一个 cpanel 帐户中工作。有没有办法获取这个值？

```
 $f = "/home/".$ac["user"]."/www/wp/wp-config.php";
        if(file_exists($f)) {
            $c = file_get_contents($f);

            preg_match('/define.*DB_NAME.*\'(.*)\'/', $c, $m);
            $dbname = $m[1];

            preg_match('/define.*DB_USER.*\'(.*)\'/', $c, $m);
            $dbuser = $m[1];

            preg_match('/define.*DB_PASSWORD.*\'(.*)\'/', $c, $m);
            $dbpass = $m[1];

            preg_match('/define.*DB_HOST.*\'(.*)\'/', $c, $m);
            $dbhost = $m[1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:41:39.263

wp-config 是用 PHP 编写的。PHP 是一种服务器端语言，这意味着您无法从脚本本身中获取信息，只能从其输出中获取信息。不仅如此，如果您能够对任何人的 Wordpress 安装执行此操作，这将是一个重大的安全漏洞。如果您需要该信息，唯一的方法是访问文件本身，例如通过 FTP。

# c# - 在服务类中初始化 FileStream 和 StreamWriter 字段

> ID：12105545
> 
> 赞同：2
> 
> 时间：2012-08-24T08:15:33.617
> 
> 标签：c#, static

我在方法之外编写了这段代码，因为我需要在 OnStop() 方法中关闭并处理流写入器和文件流：

```
private Timer timer = new Timer();
private FileStream fs = new FileStream(@"D:\Hello.txt", FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
private StreamWriter sw = new StreamWriter(fs);
//The fs is in red line, having error 
```

但是新的StreamWriter里面的fs提示错误“A field initializer cannot reference the non-static field, method, or property..”。所以我将 FileStream 设为静态：

```
private static FileStream fs = new FileStream(@"D:\Hello.txt", FileMode.Append, FileAccess.Write, FileShare.ReadWrite); 
```

当我运行程序时，它没有写入文本文件并得出结论，这是因为静态。[我](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)搜索并阅读：“一个类可以声明为静态，表明它只包含静态成员。使用 new 关键字无法创建静态类的实例。静态类由 .NET Framework 自动加载加载包含该类的程序或命名空间时的公共语言运行时 (CLR)。”

这是我的示例代码：

```
public partial class Service1 : ServiceBase
{
    private Timer timer = new Timer();
    private FileStream fs = new FileStream(@"D:\Hello.txt", FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
    private StreamWriter sw = new StreamWriter(fs);
//The fs is in red line, having error. Look in my description for error's details
    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        timer.Elapsed += new ElapsedEventHandler(WriteText);
        timer.Interval = 5000; //5 seconds
        timer.Start();
    }

    public void WriteText(object source, ElapsedEventArgs e)
    {
        sw.WriteLine(DateTime.Now + " Windows Service");
    }
    protected override void OnStop()
    {
        sw.Close();
        sw.Dispose();
        fs.Close();
        fs.Dispose();
        timer.Stop();
    }
} 
```

你觉得我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:21:27.630

您所做的应该可以正常工作，但这不是一个好方法，因此不值得调查为什么它不起作用。在类中拥有静态变量不会使类成为静态的。

只需声明不带初始化程序的变量，然后在要打开文件时设置变量：

```
public partial class Service1 : ServiceBase
{
    private Timer timer;
    private FileStream fs;
    private StreamWriter sw

    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        fs = new FileStream(@"D:\Hello.txt", FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
        sw = new StreamWriter(fs);
        timer = new Timer();
        timer.Elapsed += new ElapsedEventHandler(WriteText);
        timer.Interval = 5000; //5 seconds
        timer.Start();
    }

    public void WriteText(object source, ElapsedEventArgs e)
    {
        sw.WriteLine(DateTime.Now + " Windows Service");
    }
    protected override void OnStop()
    {
        timer.Stop(); // Stop the timer before closing the file
        sw.Close();
        sw.Dispose();
        fs.Close();
        fs.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:18:00.560

不要让它们成为静态的。只需将初始化代码从字段初始化程序移动到构造函数即可。并且不要忘记添加一个`Dispose`处理它们的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T08:19:10.250

您不需要静态字段，只需将初始化移动到您的构造函数：

```
private FileStream fs;
private StreamWriter sw;

public MyClass()
{
    fs = new FileStream(@"D:\Hello.txt", FileMode.Append, FileAccess.Write, FileShare.ReadWrite); 
    sw = new StreamWriter(fs);
} 
```

为了确保您的`OnStop()`方法真正被调用并且流被处理，`IDisposable`在您的类中实现并`OnStop()`在您的方法结束时调用`Dispose()`。

# c++ - 智能指针和长期运行的方法

> ID：12105561
> 
> 赞同：1
> 
> 时间：2012-08-24T08:17:15.440
> 
> 标签：c++, this, smart-pointers

有相关的问题，比如[智能指针+“this”被认为是有害的？](https://stackoverflow.com/questions/382166/smart-pointers-this-considered-harmful)但他们不处理我的案子。所有这些问题都是关于在引用计数智能指针的情况下暴露原始 this 指针。但是，我的问题不是我确实暴露`this`了，而是仅在方法中使用它，但可能会使用更长的时间。

考虑以下代码：

```
class X{
    void foo(){...} //Performs some long running task
}

shared_ptr<X> x;

void bar(){
    x->foo();
} 
```

好的，所以有些代码调用了`foo`对象 x 的方法。考虑到 x 后面的实例的唯一智能引用是 shared_ptr x。现在， foo 执行一些长时间运行的任务，调用其他函数和东西。

现在，考虑在 foo 运行时，另一个线程、信号处理程序，甚至是递归调用`foo`更改或清除引用`x`。这将触发对象的删除。现在，`this`调用堆栈上的指针指向`foo`已删除的对象。因此，进一步的代码执行`foo`将产生不可预测的结果。

如何避免这种情况？我的意思是，每当执行通过引用计数处理的对象的方法时，存在某些代码可能会清除对该对象的引用并且方法调用将失败或产生奇怪结果的危险。问题在于语义：引用计数认为不再有对该对象的引用，因此将其删除，但事实并非如此——仍然存在`this`引用，但遗憾的是，它不是智能指针。

我知道有类似的东西`enable_shared_from_this`，但是我是否应该始终重写所有可能被引用计数的对象方法，以首先从中获取共享指针`this`，然后使用该指针，以免出现此问题？这会使所有方法代码变得混乱，此外，它可能仍然会失败：如果`x`在调用 foo 之后但在方法中的第一个语句（获取共享实例）执行之前（可能是另一个线程），事件清除，然后事情会再次失败。

所以一般的问题是：当使用任何类型的智能指针时，如何在对托管对象的方法调用期间安全？如何保证`this`方法内的指针不会失效？重写所有方法以`enable_shared_from_this`在他们的第一个语句中使用是一个好的解决方案吗？

还是在引用仍在调用堆栈上时清除引用的代码只是格式错误？但如果是这样，那么一旦使用多个线程和复杂的递归调用，就很难编写非格式错误的代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:35:59.817

关于**多线程**：当您在线程之间传递数据时，您应该始终通过*复制*而不是通过引用传递共享指针。此规则将确保线程不会因另一个线程清除它所引用的共享指针而丢失。

关于**递归方法调用**：是的，您应该制定一条规则，即每当您通过共享指针调用可能导致其他指向该对象的共享指针被清除的方法时，您在本地都有一个共享指针的副本。如果您按值将共享指针传递给函数，这通常不会成为问题。

我能看到的唯一问题是它出现在您的代码中`x`是类数据成员：

```
class C {
    shared_ptr<X> x;
public:
    void method1() { x.reset; }
    void method2() {
        x->foo();
    }
}; 
```

在这种情况下，如果可以`method1`从您那里调用，`X::foo`则必须获取`x`. 这仅在您将共享指针存储在类中时*才会*出现问题，并且只会影响该类上的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:20:23.723

分享就是关怀：获得新的变量份额！

```
shared_ptr<X> x;

void bar()
{
    shared_ptr<X> my_x = x;
    my_x->foo();
} 
```

# c# - AsEnumerable 如何工作？

> ID：12105562
> 
> 赞同：0
> 
> 时间：2012-08-24T08:17:15.807
> 
> 标签：c#

`AsEnumerable`正在将某物转换为某物（通用与否）。下图有：

![在此处输入图像描述](../Images/9ce926c575337fc00b773a0f9d6fc604.png)

我想知道 AsEnumerable 如何将字符串数组转换为`string[]`but ？`DataTable``EnumerableRowCollection<DataRow>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:23:30.597

它们是不同的扩展方法。一个是[DataTableExtensions.AsEnumerable](http://msdn.microsoft.com/library/system.data.datatableextensions.asenumerable.aspx) e，另一个是[Enumerable.AsEnumerable](http://msdn.microsoft.com/library/bb335435.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:24:45.437

因为两者`AsEnumerable`不同

使用 String 数组，`AsEnumerable`返回`IEnumerable<T>`.

参考[`Enumerable.AsEnumerable`](http://msdn.microsoft.com/en-us/library/bb335435.aspx)

[DataTable.AsEnumerable](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)在 DataTableExtensions 中定义。它返回[EnumerableRowCollection < DataRow >](http://msdn.microsoft.com/en-us/library/bb907979.aspx)

# c# - 在 Visual Studio 中快速注释 /* 选定的 C# 代码 */（不是 // 整行）

> ID：12105563
> 
> 赞同：13
> 
> 时间：2012-08-24T08:17:19.763
> 
> 标签：c#, visual-studio-2010, comments, keyboard-shortcuts

Visual Studio 有一个工具栏按钮/键盘快捷方式/菜单[**项**](http://blogs.msdn.com/b/zainnab/archive/2010/04/13/comment-and-uncomment-code-vstipedit0047.aspx)[，](http://blogs.msdn.com/b/zainnab/archive/2010/04/13/comment-and-uncomment-code-vstipedit0047.aspx)[可以](http://blogs.msdn.com/b/zainnab/archive/2010/04/13/comment-and-uncomment-code-vstipedit0047.aspx)**使用`//`.**

 **是否有一个等价的使用注释掉**选定的代码**`/* ... */`？

例如

鉴于此代码

```
string s = "hello";
Console.WriteLine(s + " world"); 
```

如果你选择`+ "world"`并点击`Ctrl`+ `K`, `Ctrl`+`C`那么你最终会得到

```
string s = "hello";
//Console.WriteLine(s + " world"); 
```

不过，我想

```
string s = "hello";
Console.WriteLine(s /*+ " world"*/); 
```

当我在修复一些错误的同时对现有代码库进行一些实验性和临时性修改时，这将很有用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T08:25:06.720

[Resharper](http://www.jetbrains.com/resharper/)就是这样做的。它要花钱——但这是值得的。

它被称为“[块评论](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Comment_Uncomment_Code.html)”。

并且默认的键盘快捷键是`Ctrl`+ `Shift`+`/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:50:41.967

您可以创建一个宏，但这将是重新发明轮子，并且可能无法证明这种方法的合理性。**

# gwt - 在 Maven gwt:test 中包含文件

> ID：12105566
> 
> 赞同：0
> 
> 时间：2012-08-24T08:17:30.793
> 
> 标签：gwt, maven

当您发出“mvn gwt:test”时，Maven 会创建一个 target/www-test 目录。此目录包含基于您的包在另一个目录下运行的实际测试，例如 target/www-test/com.mydomain.test.SomeApp.JUnit

我需要在此目录中包含一个 javascript 文件，否则我的测试将失败。我该怎么做呢 ？该文档似乎没有提供在此处包含文件的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:53:41.847

子文件夹名称实际上基于您`GWTTestCase`从中返回的模块名称`getModuleName()`，并带有`JUnit`后缀（GWT 即时生成一个模块，该模块继承您的模块和`com.google.gwt.junit.JUnit`模块等）。

因此，如果您的测试需要一些特定的东西，您可以很好地创建一个继承您的“标准”模块的测试特定模块，并从中返回该新模块`getModuleName`（GWT 单元测试这样做是为了测试一些`set-property`或`set-configuration-property`值，或声明`servlet`s 用于测试 GWT-RPC、RequestFactory 或`FormPanel`，例如）。

现在，如果您只需要一个 JS 文件，您可以将它放在您的*公共路径*中（即默认情况下，您的模块描述符文件`public`旁边的文件夹）。`gwt.xml`您可以`<script>`在您`gwt.xml`的测试页面中使用自动拉取该脚本（因为测试使用*标准* `junit.html`或`junit-standard.html`网页）。如果你真的需要，你可以通过在你的*公共路径*中放置一个具有相同名称的 HTML 页面来覆盖该 HTML 页面，然后它应该覆盖来自`com.google.gwt.junit.JUnit`模块的那个（你可能必须显式继承该模块，所以它的*公共路径*在前面你的）

另请参阅：
[https ://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModules](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModules)
[http://code.google.com/p/google-web-toolkit/wiki/ResourceOracle](http://code.google.com/p/google-web-toolkit/wiki/ResourceOracle)

# javascript - jQuery Mouseover/MouseOut 在 IE 9 中不起作用

> ID：12105569
> 
> 赞同：2
> 
> 时间：2012-08-24T08:17:40.567
> 
> 标签：javascript, jquery, html, internet-explorer

我在页面上有一个小问号图像，如果用户将鼠标悬停在它上面，它会显示并隐藏一个 Div，其中包含帮助解释问号图像所在的下拉框中的选项。下面是图像和 Div 的 html - 我没有包含帮助 Div 的文本，但没有做任何花哨的事情 - 它都是纯文本，带有一些语句和一些
，然后关闭 Div。

```
<img id="QuestionMark" src='/MyWebApp/view/images/icon/QuestionMark.png' height="15" />
<div id="HelpDiv" class="ui-widget-content Rounded hidden" style="position: fixed; z-index: 9999999; width: 100; padding-left:10px; padding-top:10px;"> 
```

然后这是我的 javascript，用于隐藏或显示 Helper Div - 我正在使用 jQuery mouseover/mouseout

```
$("#QuestionMark").mouseover(function () {
    $('#HelpDiv').removeClass('hidden');
});

$("#QuestionMark").mouseout(function () {
    $('#HelpDiv').addClass('hidden');
}); 
```

如果我在 Chrome 中加载它，它工作正常。但是，当我在 IE 9 中运行时它不起作用？我在页面上尝试了 Ctrl Refresh 以确保我正在拉入我最新的 JS 文件，当我在 IE 9 中检查开发人员工具并找到我的脚本文件时，我看到它确实包含我上面的 JS 但它不起作用。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:26:23.127

尝试

```
$("#QuestionMark").mouseover(function () {
    $('#HelpDiv').show();
});

$("#QuestionMark").mouseout(function () {
    $('#HelpDiv').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:24:11.520

检查这个演示：[http ://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

它适用于我的 IE9。确保您已在页面中包含 jquery 或在控制台中查找任何错误。

# javascript - jQuery FadeIn 如何知道使用的显示模式？

> ID：12105571
> 
> 赞同：5
> 
> 时间：2012-08-24T08:17:43.217
> 
> 标签：javascript, jquery, html, animation

简单的问题：jQuery 如何知道一个元素在使用fadeIn 时应该使用什么显示模式？

我的意思是，它似乎对我淡入的任何元素使用正确的显示模式，即使我`display:none` **最初**在我的 CSS 中设置 - 图像使用内联，div 使用块等。

我查看了 GitHub 上的 jQuery 源代码，但找不到我要查找的内容。

我问的原因是因为我自己制作了一个小插件，使用淡入淡出（但使用 Animate，因为有多个属性需要动画）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T08:19:43.747

它用于[`$.data`](http://api.jquery.com/jQuery.data/)存储它：

```
console.log($._data( elem, "olddisplay" )); 
```

下划线表示它可以访问通常无法通过`$.data`或获得的数据`$.fn.data`。基本上这仅供内部使用，您不应该触摸它。

如果元素是`display:none`通过 CSS 设置的，并且您将其淡入，jQuery 仍然知道制作它`inline`等等。在这种情况下，它使用该函数

```
// Try to determine the default display value of an element
function css_defaultDisplay( nodeName ) { 
```

这会给`"inline"`一个`nodeName === "span"`

# cpanel - cPanel 错误：域由另一个用户拥有

> ID：12105572
> 
> 赞同：2
> 
> 时间：2012-08-24T08:17:45.837
> 
> 标签：cpanel

尝试在 cPanel 中创建插件域或停放域时，出现以下错误：

```
[domain name] is owned by another user. 
```

该域未被列为附加域或停放域。

并知道可能导致此错误的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:41:37.297

检查域或子域是否已为其他用户所有。

这包括检查 DNS。如果该域有任何现有的 DNS 记录，WHM 不会让您停放该域。因此，还要查看您的 DNS 区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-24T19:17:56.333

如果您具有 root 访问权限，请尝试检查域名的任何实例

> grep domain.com /etc/userdomains

用于检查 dns 区域。试试这些

> 首页 »DNS 功能 »编辑 DNS 区域

如果域的 dns 有任何实例，您需要先将其删除，然后再将域添加为插件或再次停放。

# objective-c - uiwebview 默认播放器全屏模式

> ID：12105573
> 
> 赞同：1
> 
> 时间：2012-08-24T08:17:48.403
> 
> 标签：objective-c, ios, uiwebview, fullscreen

当嵌入在 uiwebview 中的 youtube 视频以全屏模式播放时，设备不会检测到方向变化......有没有办法解决这个问题？

如果没有，当默认的 webview 媒体播放器退出全屏模式时，是否有另一种方法来获取通知？

提前致谢。

# sql - 提高 SQL 查询响应时间

> ID：12105575
> 
> 赞同：0
> 
> 时间：2012-08-24T08:18:07.287
> 
> 标签：sql, performance, ms-access

我正在使用 access 2003 并且我的项目中有一个查询非常慢（检索 3800 条记录需要 10 秒）它看起来像这样：

```
SELECT    DISTINCT tb_KonzeptDaten.DFCC, 
          tb_KonzeptDaten.OBD_Code AS Konzept_Obd,tb_bauteile.*, 
          FehlerCodes_akt_Liste.VAG_Code, 
          FehlerCodes_akt_Liste.OBD_Code,
          FehlerCodes_akt_Liste.F_Klasse_EU, 
          FehlerCodes_akt_Liste.F_Klasse_US, 
          FehlerCodes_akt_Liste.CDT AS CdtNr,
          FehlerCodes_akt_Liste.Pfad_Bezeichnung, 
          FehlerCodes_akt_Liste.
          Fehlerpfad AS PfadName, 
          FehlerCodes_akt_Liste.Fehlerunterpfad, 
          tb_bauteile_Tools.Tool AS Tool_
FROM     (
              (tb_bauteile 
                     LEFT JOIN FehlerCodes_akt_Liste 
                          ON tb_bauteile.OBD2_Plaus=FehlerCodes_akt_Liste.ID
               ) 
               LEFT JOIN tb_bauteile_Tools 
                     ON tb_bauteile.Tool=tb_bauteile_Tools.ID)
               LEFT JOIN tb_KonzeptDaten 
                      ON FehlerCodes_akt_Liste.Fehlerpfad = tb_KonzeptDaten.DFC; 
```

但

如果我删除两个第一个字段（tb_KonzeptDaten.DFCC，tb_KonzeptDaten.OBD_Code AS Konzept_Obd），那么查询工作正常

我现在的问题是：

如何更改我的第一个查询以提高性能？

# android - Android 运行时错误：无法安装包

> ID：12105577
> 
> 赞同：1
> 
> 时间：2012-08-24T08:18:12.883
> 
> 标签：android

我正在开发一个 ANDROID 应用程序（PENDROID 应用程序（1 个应用程序中的 5 个应用程序（如 1 个应用程序中的音乐播放器、记事本、绘画等））），同时运行该应用程序我的 LOG 猫显示 2 个警告和控制台显示“启动已取消"

1.  W/PackageManager(59)：无法安装，因为提供程序名称 com.google.provider.NotePad（在包 com.badlogic.androidgames.framework 中）已被 com.example.android.notepad 使用
2.  W/PackageManager(59)：无法在 /data/app/com.badlogic.androidgames.framework-1.apk 中安装包

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:20:13.333

先卸载记事本

在控制台中 `adb uninstall com.example.android.notepad`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:22:54.037

我建议您更改包含记事本应用程序的软件包名称

# servlets - HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET

> ID：12105584
> 
> 赞同：6
> 
> 时间：2012-08-24T08:18:28.877
> 
> 标签：servlets, http-get, http-status-code-405

下面的代码来自一本书，所以不会出错。但我不知道如何解决下面的错误。删除方法doGet（）时，同样的错误！

**“HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET”**

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public class PDFServlet extends HttpServlet{
private static final long serialVersionUID = 1L;
@Override 
protected void doGet(HttpServletRequest request,HttpServletResponse response) 
throws IOException,ServletException{
    this.doPost(request,response);
}
@Override 
protected void doPost(HttpServletRequest request,HttpServletResponse response) 
                                   throws IOException,ServletException{
    response.setContentType("application/pdf");
    ServletOutputStream out=response.getOutputStream();
    File pdf=null;
    BufferedInputStream buf=null;
    try{
        pdf=new File("C:\\Users\\lk\\Desktop\\Desktop\\ example.pdf");
        response.setContentLength((int)pdf.length());
        FileInputStream input=new FileInputStream(pdf);
        buf=new BufferedInputStream(input);
        int readBytes=0;
        while((readBytes=buf.read())!=-1)    out.write(readBytes);
    }catch(IOException e){
        System.out.println("file not found!");
    }finally{
        if(out!=null) out.close();
        if(buf!=null) buf.close();
    }
}
} 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
-<web-app xsi:.........." version="2.5"> 
-<servlet> 
<description>This is the description of my Java EE component</description> 
<display-name>This is the display name of my Java EE component</display-name> 
<servlet-name>PDFServlet</servlet-name> 
<servlet-class>PDFServlet</servlet-class> 
</servlet> 
-<servlet-mapping> 
<servlet-name>PDFServlet</servlet-name> 
<url-pattern>/PDFServlet</url-pattern> 
</servlet-mapping> 
-<welcome-file-list> 
<welcome-file>index.jsp</welcome-file> 
</welcome-file-list> 
-<login-config> 
<auth-method>BASIC</auth-method> 
</login-config> 
</web-app> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-28T18:20:11.137

我刚才也有同样的问题。“HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET”。我的解决方案如下：

```
public abstract class Servlet extends HttpServlet {

    protected HttpServletRequest req;
    protected HttpServletResponse resp;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        this.req = req;
        this.resp = resp;
        this.requestManager();
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        this.req = req;
        this.resp = resp;
        this.requestManager();

    }

    protected abstract void requestManager() throws IOException;
} 
```

我的构造函数有问题，因为我正在调用超级的“doGet”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-24T09:06:36.097

Servlet 代码似乎是正确的。提供`web.xml`入口和 Servlet 调用 URL。

导致此错误的主要原因有两个：

1）你没有有效的doGet()方法，当你直接在地址栏中输入servlet的路径时，像Tomcat这样的web容器会尝试调用doGet()方法。

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
throws IOException{
....
} 
```

2) 您从 HTML 表单发出 HTTP 发布请求，但您没有 doPost() 方法来处理它。doGet() 无法处理“发布”请求。

```
public void doPost(HttpServletRequest request, HttpServletResponse response)
throws IOException{
....
} 
```

阅读@BalusC 的答案以获取更多详细信息。: [Servlet 中的 doGet 和 doPost](https://stackoverflow.com/questions/2349633/servlets-doget-and-dopost)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T06:28:31.997

换行

```
pdf=new File("C:\\Users\\lk\\Desktop\\Desktop\\ example.pdf"); 
```

和

```
pdf=new File("C:/Users/lk/Desktop/Desktop/example.pdf"); 
```

然后再继续。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-09T11:15:19.000

你需要做

```
<form action="servlet name " method="post"> 
```

在你的 index.jsp 文件中

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-02T09:57:03.763

当出现上述错误时，请覆盖`doGet()`方法。

```
@Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        processRequest(req, resp); //To change body of generated methods, choose Tools | Templates.
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-14T20:39:12.583

我正在使用html文件。创建网页。所以当我遇到这个错误时。我的解决方案是：只是删除我的 web.xml 文件中的“index.html”路径。因为我的 html 文件名与“index.html”相同

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-11-20T06:40:15.177

每个 servlet 必须包含一个 doGet() 方法，该方法默认由服务器执行。所以看到你有 doGet 方法。

# microsoft-metro - 从不同路径加载字符串资源

> ID：12105586
> 
> 赞同：0
> 
> 时间：2012-08-24T08:18:33.290
> 
> 标签：microsoft-metro, windows-runtime, c++-cx

在 Windows 8 C++ 应用程序中，我想加载一个不属于项目/应用程序包的字符串资源文件。这可能吗？

不幸的是，这不起作用：（我想我已经读过`LoadPriFiles()`项目外的文件是不允许的）

```
StorageFolder^ folder = ApplicationData::Current->LocalFolder;
String^ path = folder->Path + "\\Strings\\en-US\\res.resw";
task<StorageFile^>(StorageFile::GetFileFromPathAsync(path)).then([&, this] (StorageFile^ file)
{
    Vector<IStorageFile^>^ files = ref new Vector<IStorageFile^>();
    files->Append(file);
    String^ p = files->GetAt(0)->Path;      
    Core::ResourceManager::Current->LoadPriFiles(files);
}); 
```

# android - 将套接字连接到本地服务器失败

> ID：12105589
> 
> 赞同：0
> 
> 时间：2012-08-24T08:18:45.197
> 
> 标签：android, android-networking

虽然我按照建议将 ip 地址设置为 10.0.2.2，但指令

```
Socket s = new Socket("10.0.2.2",8080); 
```

仍然给我

```
08-24 08:02:54.404: W/System.err(1030): failed to connect to localhost/127.0.0.1 (port 8080): connect failed: ECONNREFUSED (Connection refused) 
```

我确定服务器可以正常工作，因为我用另一个客户端程序尝试过它，所以模拟器有问题......你能帮帮我吗？编辑： android.permission.internet 也设置了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:27:52.907

在以下位置提出了一个类似的问题：
[setup the android emulator to access the LAN of the host](https://stackoverflow.com/questions/3010130/is-there-an-easy-way-to-setup-the-android-emulator-to-access-the-lan-of-the-host "标题")

看看你能在那里找到什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:00:14.830

检查是否有任何防火墙正在运行，并且某些防病毒软件充当防火墙，因此请停止防病毒软件并重试

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-24T09:20:58.273

解决了...这只是代码中的一个错误，与主程序无关...对不起！

# silverlight - 如何使用 Silverlight for Windows Phone（或 Silverlight）创建“局域网聊天”应用程序？

> ID：12105591
> 
> 赞同：1
> 
> 时间：2012-08-24T08:19:00.133
> 
> 标签：silverlight, windows-phone-7, sockets, chat, lan

我会创建一个聊天，将文本从我的 Windows Phone（服务器）发送到我的笔记本（客户端），两者都通过 LAN 上的 WiFi 连接。有没有办法做到这一点？我想我必须使用套接字，但我不知道该怎么做，而且在网上找到的教程并没有按照我的想法做.. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:04:10.123

为什么需要windows phone 做服务器？

如果 windows phone 可以托管 WCF 服务，这听起来像是一个很好的解决方案： [http ://channel9.msdn.com/shows/SilverlightTV/Duplex-communication-with-WCF-in-Silverlight-4-Silverlight-TV-34/](http://channel9.msdn.com/shows/SilverlightTV/Duplex-communication-with-WCF-in-Silverlight-4-Silverlight-TV-34/)

# winforms - 在外部用户设置文件中存储复选框选中状态

> ID：12105593
> 
> 赞同：0
> 
> 时间：2012-08-24T08:19:14.237
> 
> 标签：winforms, checkbox, state, application-settings, settings

我有 5 个复选框，我希望能够将用户是否已检查它们存储在设置文件中，以便当他们打开程序时，他们可以找到该文件打开它并选择相同的复选框。

在我的一生中，我无法在这个问题上找到任何对我有帮助的东西。请不要简单地将我链接到 MSDN 文章，因为我已经阅读了有关用户设置和应用程序设置的每一页，但我仍然不明白。

如果有人可以请给我一个如何做到这一点的例子，它真的会帮助我，谢谢

目前，我正在将每个复选框的 TabIndex 写入文本文件，当我选择加载文本文件时，我的程序会读取文本行并从中提取我测试的 TabIndex 并基于 chk.selected 属性。

这感觉像是存储用户设置的错误方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:33:41.743

转到项目的属性，打开设置窗格，然后创建一个设置文件。此文件将存储到 Properties->Settings.Settings，但您可以从属性的 Settings 页面轻松编辑它。

创建一行将其命名为 IsMyCheckbox1Checked，将其类型设置为 Bool，范围设置为用户。如果你想添加评论。

在您的应用程序中，您现在可以按如下方式使用它：

```
Boolean b = Properties.Settings.Default.IsMyCheckbox1Checked; //Read the Setting
Properties.Settings.Default.UsMyCheckbox1Checked = Checkbox1.Checked; //Write the Setting
Properties.Settings.Default.Save(); // Persist the Setting to the user's appData-Folder 
```

希望这可以帮助。

# java - 在调试期间重新组织列表顺序

> ID：12105599
> 
> 赞同：0
> 
> 时间：2012-08-24T08:19:52.713
> 
> 标签：java, eclipse, debugging

> **可能重复：**
> [在eclipse中调试时调用类实例方法](https://stackoverflow.com/questions/8963252/call-class-instance-method-while-debugging-in-eclipse)

有没有办法在调试期间更改列表元素的顺序？

我怎样才能在 Eclipse 上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:20:50.607

**如果您的清单很简单：**

在 Eclipse 中调试时，假设您在 Debug 透视图中，右键单击 Variables 视图中的变量并选择“更改值”。

**如果您的清单很复杂：**

只需在执行路径中的某处添加代码即可修改列表。请注意，修改后的方法执行可能会重新启动。

您还可以在断点属性的条件文本区域中添加代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:27:23.463

您可以[修改变量](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/shared/ref-changevarvalue.htm)，（[另请参阅](http://www.vasanth.in/2006/02/10/eclipse-tip-change-variable-values-while-debugging/)）。最后签出：[在 eclipse 中调试时调用类实例方法](https://stackoverflow.com/questions/8963252)。一旦您可以在调试期间调用任意方法，只需调用：

```
list.add(42, yourElement);
list.remove(7); 
```

或您想对该列表执行的任何操作。

PS：在[intellij 中](/questions/tagged/intellij "显示标记为“intellij”的问题")，您可以在断点[调试期间运行任意表达式。](http://blogs.jetbrains.com/idea/2009/09/debugger-evaluate-expression-enhancements/)

# iphone - 将 iAD 集成到 3D 游戏中

> ID：12105601
> 
> 赞同：8
> 
> 时间：2012-08-24T08:20:12.057
> 
> 标签：iphone, ios, iad, ads, appstore-approval

我正在开发第一人称射击游戏，并希望集成 iAD（也许稍后会集成 AdMob）。问题是我所知道的所有广告系统都使用简单的 UIView 并且基于点击它们。我想使用真正的 3d 游戏对象作为触发器，即当你拍摄一些特殊角色时，就会调用一个广告。用户会收到通知（因此，如果您不想要广告，请不要拍摄这些物体）。

从技术的角度来看，我知道如何做到这一点。但从广告提供商的角度（以及从 Apple 审查团队 POV 的角度来看）这样做是否合法？

ps 或者也许有人知道可以像这样集成到我的游戏中的广告系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:13:18.983

我同意 FiddleMeRagged 您可以为此目的使用 RevMob。每当用户拍摄错误的物体时，您都可以显示全屏广告。

但是，您不能将 Admob 用于相同目的。因为他们在[使用政策](http://support.google.com/adsense/bin/answer.py?hl=en&answer=2623161)中明确禁止任何此类活动。他们要求您在每个屏幕上最多放置一个横幅广告。
同样，iAd 也不允许这种广告展示。

苹果似乎对此没有任何问题，因为我们的游戏已经通过了这种功能。我将尝试找到一些有关此的文档。

编辑：刚刚在 Revmob 网站上找到[了这个链接，它建议显示多个全屏广告。](https://www.revmob.com/revenue_tips)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:45:10.633

[您可以通过使用RevMob](https://www.revmob.com/) SDK将对象连接到按钮按下来触发弹出、横幅或全屏广告。他们的广告往往是“下载免费游戏”的种类。

我不明白您如何使用 Admob 或特别是 iAd 来做到这一点，因为它们需要在屏幕上显示横幅广告，以便他们可以投放广告。像这样触发他们可能违反他们的服务条款。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:48:26.447

RevMob 有一个名为 adLink 的广告单元，它可以在您的代码中调用，并会打开带有广告游戏的 iTunes。您可以使用以下代码：

```
RevMobAds *revmob = [RevMobAds revmob];
[revmob openAdLinkWithDelegate:self]; 
```

您可以在他们的网站上找到更多文档： [RevMob API 文档](http://sdk.revmob.com/ios-api/Classes/RevMobAds.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T21:00:51.887

我认为您可能应该使用revmob，但如果您将来需要它，这里有一个关于集成 iAd 和 adMob 的链接，请查看此链接：[混合 iAd 和 AdMob](http://www.apptite.be/blog/ios/mixing-iad-and-admob/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T19:23:44.093

现有的答案基本上涵盖了这一点，但要澄清 iAd：

iAd 基于呈现 ADBannerView，并让 ADBannerView 完成获取和显示广告的工作，然后允许用户单击以获取全屏广告。

苹果关于这个主题的文档说，如果你在加载时隐藏或隐藏广告，你的应用程序接收的广告将受到影响，因此你的收入也会受到影响。（它还说 ADBannerView 本身必须符合某些特征。）

最后……我认为您无法通过游戏中的某些内容被拍摄来触发全屏 iAd，因为您将无法影响 ADBannerView 执行处理用户所需的操作-点击点击进入。（好吧，好吧，你也许可以伪造这个，但它可能会以苹果拒绝的方式涉及 ADBannerView 的胆量。）

# javascript - dojo.require() (1.4.3) - 强制刷新 js 文件

> ID：12105605
> 
> 赞同：1
> 
> 时间：2012-08-24T08:20:17.813
> 
> 标签：javascript, dojo

我正在使用版本查询参数来强制刷新我的 js 文件 (script.js?ver=)

我的问题是我不能将这种方法用于使用 dojo.require() 加载的自定义 dojo 类

使用 require() 时有没有办法强制刷新？（除非有其他方法可以包含道场课程）

- - - - -编辑 - - - - - - -

我按照建议添加了 cacheBust 并开始收到“无法加载..”

```
<script type='text/javascript' src='https://host/dev/dojolib.nsf/dojo/dojo.js' 
djConfig="cacheBust:'ver=1', baseUrl:'https://host/dev/dojolib.nsf/dojo/'">
</script> 
```

# c# - 调用者可以忽略异步 WCF 调用结果吗？

> ID：12105607
> 
> 赞同：1
> 
> 时间：2012-08-24T08:20:28.087
> 
> 标签：c#, .net, wcf, asynchronous

我敢肯定，这一定是有人问过并回答过的，但我找不到...

我有一个带有这个接口的 WCF 服务：

```
[ServiceContract(Namespace = WcfNamespace.MyNamespace)]
public interface ILogging
{
    [OperationContract(IsOneWay = true)]
    void LogInfo(string message);
} 
```

在我的（.NET 3.5）客户端应用程序中，我想忽略调用过程中发生的任何故障，`LogInfo`并且我不想阻塞，甚至在网络传输上也不想阻塞。
因此，我想我应该在我的客户端中使用其中一种异步模式。但是，我无法弄清楚“基于事件”或“开始-结束”模式的“忽略结果友好”是否有任何区别。在这个意义上有区别吗？
或者您是否总是必须实现已完成的事件或调用`End*`才能不泄漏资源？（我隐约记得读过 Skeet 或 Lippert 的类似文章）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:20:07.877

`*Completed`如果您使用基于事件的异步模式，则不需要实现任何事件，因此这是一种选择。如果您使用开始/结束模式，则应该调用该`End*`操作，如果您想真正忽略任何内容，则将其包装在 try/empty 捕获中。

# openlayers - OpenLayers - 如何验证 BBOX 策略是否成功？

> ID：12105608
> 
> 赞同：2
> 
> 时间：2012-08-24T08:20:32.047
> 
> 标签：openlayers

我想向我们的功能服务器发送请求，该服务器仅询问可视地图范围内的数据。所以我使用了 BBOX 策略和 HTTP 协议作为以下代码。

```
 mVectorLayer = new OpenLayers.Layer.Vector("Overlay", {
        strategies: [new OpenLayers.Strategy.BBOX()],
        protocol: new OpenLayers.Protocol.HTTP({
            url: 'http://localhost:56786/jlist.geojson',
            format: new OpenLayers.Format.GeoJSON({
                'read': myReadFunction,
                'internalProjection': map.baseLayer.projection,
                'externalProjection': new OpenLayers.Projection("EPSG:4326")
            })
        }),
        projection: new OpenLayers.Projection("EPSG:900913")
    }); 
```

我已将可视地图之外的功能添加到如下所示的 geojson 文件中。

```
{ "type": "FeatureCollection",
  "features": [
      { "type": "Feature",
        "geometry": {"type": "Point", "coordinates": [29.0, 41.060]},
        "properties": {"name": "IST J1", "img": "img/marker.png"}
      },
      { "type": "Feature",
        "geometry": {"type": "Point", "coordinates": [29.0, 41.100]},
        "properties": {"name": "IST J2", "img": "img/marker.png"}
      },
      { "type": "Feature",
        "geometry": {"type": "Point", "coordinates": [59.0, 41.100]},
        "properties": {"name": "IST J3", "img": "img/marker.png"}
      }
  ]
} 
```

为了验证，我向函数 myReadFunction 添加了一个警报，它显示了 json 字符串。但是警报会显示 geojson 文件中的所有功能。我想我们的功能服务器发送所有 geojson 内容而不是可视功能？如何验证或观察 BBOX 策略是否成功？

```
 function myReadFunction(json, type, filter) {
            alert("json: " + json);

            type = (type) ? type : "FeatureCollection";
            var results = null;
            var obj = null;
            if (typeof json == "string") {
                obj = OpenLayers.Format.JSON.prototype.read.apply(this, [json, filter]);
            } else {
                obj = json;
            }
            if (!obj) {
                OpenLayers.Console.error("Bad JSON: " + json);
            } else if (typeof (obj.type) != "string") {
                OpenLayers.Console.error("Bad GeoJSON - no type: " + json);
            } else if (this.isValidType(obj, type)) {
                switch (type) {
                    case "Geometry":
                        try {
                            results = this.parseGeometry(obj);
                        } catch (err) {
                            OpenLayers.Console.error(err);
                        }
                        break;
                    case "Feature":
                        try {
                            results = this.parseFeature(obj);
                            results.type = "Feature";
                        } catch (err) {
                            OpenLayers.Console.error(err);
                        }
                        break;
                    case "FeatureCollection":
                        // for type FeatureCollection, we allow input to be any type
                        results = [];
                        switch (obj.type) {
                            case "Feature":
                                try {
                                    results.push(this.parseFeature(obj));
                                } catch (err) {
                                    results = null;
                                    OpenLayers.Console.error(err);
                                }
                                break;
                            case "FeatureCollection":
                                for (var i = 0, len = obj.features.length; i < len; ++i) {
                                    try {results.push(this.parseFeature(obj.features[i]));
                                    } catch (err) {
                                        results = null;
                                        OpenLayers.Console.error(err);
                                    }
                                }
                                break;
                            default:
                                try {
                                    var geom = this.parseGeometry(obj);
                                    results.push(new OpenLayers.Feature.Vector(geom));
                                } catch (err) {
                                    results = null;
                                    OpenLayers.Console.error(err);
                                }
                        }
                        break;
                }
            }
            return results;
} 
```

非常感谢您的帮助和解释，Yasemin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:59:13.533

如果您在 Firefox 中使用 firebug 之类的东西，您可以在“网络”选项卡中看到所有页面请求。您可以查看传输了哪些参数（您的界限）并偏离结果集。这样您就可以检查您的服务器响应是否正常。

但是你应该知道BBOX是有比例的。这是扩展边界的因素，即数据边界与视口边界的比率。默认为 2！因此，如果您的测试功能只是在视口之外，它将在请求的 bbox 中。

[http://dev.openlayers.org/docs/files/OpenLayers/Strategy/BBOX-js.html#OpenLayers.Strategy.BBOX.ratio](http://dev.openlayers.org/docs/files/OpenLayers/Strategy/BBOX-js.html#OpenLayers.Strategy.BBOX.ratio)

# html - 这可以在不使用表格的情况下实现吗？动态容器中的百分比高度

> ID：12105609
> 
> 赞同：2
> 
> 时间：2012-08-24T08:20:33.413
> 
> 标签：html, css, css-tables

我很茫然！有史以来第一次，我发现了一些我认为如果不使用表格进行布局是无法实现的。

我试图在`div`无序列表之间放置一个分隔符，它会根据容器的大小自动调整其高度。

1.  我不能使用`height: x%;`，因为容器上没有设置高度，因为内容是动态的！
2.  我不能使用`position: absolute;top: 10px; bottom: 10px;`，因为 div 必须相对于无序列表放置！

通过简单地操作行来获得相同的效果，使用表格来实现这一点非常容易，但是，正如你们中的许多人会同意的那样，表格适用于 1990 年代，除非绝对必要或者我正在展示，否则我喜欢远离它们表格数据。

我在这个[jsFiddle](http://jsfiddle.net/K3zk9/)中重新创建了问题。这个fiddle里面有很多代码，大部分可以忽略。有问题的`div`'s 是子菜单（菜单上的第 2 项）的一部分，它们有一个“分隔符”类，其样式可以在 css 的末尾找到。

虽然所有代码都在 jsFiddle 中，但我提取了下面的相关片段：

**请注意，我暂时将分隔符的高度固定为 150px，以确保它们在示例中可见**

HTML：

```
<li id="shiNav"><a href="#" title="#">Item 2</a>
    <div class="subMenuHandle horizontal-sprite">
        <div class="bg-noise"></div>
    </div>
    <div class="subMenu horizontal-sprite">
        <div class="bg-noise"></div>
        <ul>
            <li><a href="#"><strong>Menu Item 1</strong></a></li>
            <li><a href="#"><strong>Menu Item 2</strong></a></li>
            <li><a href="#"><strong>Menu Item 3</strong></a></li>
            <li><a href="#"><strong>Menu Item 4</strong></a></li>
        </ul>
        <div class="separator"></div>
        <ul>
            <li class="title">Recently Opened File</li>
            <li><a href="#">File 1</a></li>
            <li><a href="#">File 2</a></li>
            <li><a href="#">File 5</a></li>
            <li><a href="#">File 20</a></li>
        </ul>
        <div class="separator"></div>
        <ul>
            <li class="title">Most Used Customers</li>
            <li><a href="#">John Smith &amp; Co</a></li>
            <li><a href="#">ManSys Limited</a></li>
            <li><a href="#">Sine Macula Limited</a></li>
            <li><a href="#">Infralobo PLC</a></li>
            <li><a href="#">Lays PLC</a></li>
        </ul>
    </div>
</li> 
```

CSS：

```
/* Navigation */
#global-nav {position:absolute;width:460px;height:27px;left:15px;top:43px;}

#global-nav ul {margin:0;padding:0;list-style-type:none;}
#global-nav ul li {position:relative;display:block;width:92px;height:27px;float:left;padding:0;margin-left:8px;z-index:10;background-image:url("http://www.mansys.net/_test/sprite.png");background-position:-173px -32px;}
#global-nav ul li:hover {background-position:-173px -59px;}
#global-nav ul li:active {background-position:-173px -86px;}
#global-nav ul li a {display:block;width:92px;height:27px;line-height:27px;text-align:center;color:#fff;font-size:12px;text-shadow:#666 0 -1px 0;}
#global-nav ul li:hover a {color:#666;text-shadow:#fff 0 1px 0;}
#global-nav ul li:active a {color:#666;text-shadow:none;}

/* Set styles for specific navigation buttons */
#homNav {width:47px !important;margin-left:0 !important;margin-right:12px;background-position:-126px -32px !important;}
#homNav a {width:47px !important;}
#homNav:hover {background-position:-126px -59px !important;}
#homNav:active {background-position:-126px -86px !important;}

/* Set hovers of sub menu buttons to active images */
#masNav:hover,
#shiNav:hover,
#repNav:hover,
#setNav:hover
{background-position:-173px -86px !important;}

/* Set the sub menu handles */
#global-nav .subMenuHandle {position:relative;display:none;width:90px;height:12px;margin-top:-1px;border-left:1px solid #666;border-right:1px solid #666;z-index:1000;background-color:#fff;background-repeat:repeat-x;}

/* Set the sub menu container */
#global-nav .subMenu {position:relative;display:none;margin-top:-1px;width:870px;padding:10px 20px;border:1px solid #666;z-index:999;background-color:#ddd;background-position:0 -12px;background-repeat:repeat-x;overflow:hidden;clear:both;border-radius:3px;}

/* Set the menu hovers to show sub menus */
#global-nav ul li:hover .subMenuHandle,
#global-nav ul li:hover .subMenu
{display:block;}

/* Set the sub menu container positions */
#masNav .subMenu {margin-left:-83px;}
#shiNav .subMenu {margin-left:-183px;}
#repNav .subMenu {margin-left:-283px;}
#setNav .subMenu {margin-left:-383px;}

/* Set the noise in the menus */
.bg-noise {position:absolute;left:0;top:0;width:100%;height:100%;background:url("https://www.mansys.net/_images/_global/bg-noise.png") repeat;}

/* Define sub menu Contents */
#global-nav .subMenu ul {display:block;float:left;overflow:hidden;}
#global-nav .subMenu ul li {display:inline;width:auto;height:25px;margin:0;float:none;background:none;}
#global-nav .subMenu ul li.title {line-height:25px;font-size:12px;color:#666;text-shadow:#fff 0 1px 0;text-align:left;}
#global-nav .subMenu ul li a {position:relative;display:block;width:auto;height:25px;line-height:25px;font-size:12px;color:#333;text-shadow:#fff 0 1px 0;text-align:left;z-index:1000;}

/* Define the sub menu separator */
#global-nav .subMenu .separator {position:relative;float:left;width:1px;background:#999;margin:20px 20px 0;height:90%} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:55:26.187

它在现代浏览器中是可以实现的，但是我没有设备可以测试这个世界上的任何*Internet Explorer*，它们将是需要注意的*（它们在位置相对奇怪或浮动问题）*。

基本上你需要依赖你的菜单容器`position:relative`，然后确保你用一个 div 包装你的分隔符，该 div 用于`float:left`将分隔符定位在正确的位置（即沿着你的 ul 列表的右侧） - 我用过`.psep`。

一旦你这样做了，你就可以使用`position:absolute; top:0; bottom:0;`你的分隔符，因为它会计算它相对于第一个定位的父级（即`#menu`not `.psep`）的高度，但会计算它相对于你的 ul 列表的水平位置。

希望这有意义吗？我在下面整理了一个例子......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<style type="text/css">

#menu {
  position: relative;
  overflow: hidden;
}

#menu ul {
  display: block;
  float: left;
  overflow: hidden;
  list-style-type: none;
  margin: 0;
  padding: 0;
} 

.psep {
  float: left;
  height: 1px;
  margin-left: 10px;
  margin-right: 10px;
}

.sep { 
  position: absolute;
  top: 0;
  bottom: 0;
  background: #000;
  width: 1px;
}

</style>
</head>
<body>
  <div id="menu">
    <ul>
      <li>This is a test with a long title</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
    </ul>
    <div class="psep"><div class="sep"></div></div>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>Another long text</li>
      <li>5</li>
      <li>6</li>
      <li>7</li>
      <li>8</li>
    </ul>
    <div class="psep"><div class="sep"></div></div>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
    </ul>
  </div>
</body>
</html> 
```

# spring - Spring 3.1 MVC - 使用 @ResponseBody 注释时出现字符编码错误

> ID：12105617
> 
> 赞同：1
> 
> 时间：2012-08-24T08:21:05.173
> 
> 标签：spring, servlets, spring-mvc, character-encoding, response

我在使用**@ResponseBody**注释时遇到字符编码问题。如果我使用**response.getWriter().write()**方法，我没有问题，我看不到像 ş、ö、ı 等土耳其语字符。（*我只看到问号而不是它们*）

我正在使用**Spring 的 CharacterEncodingFilter**和**UTF-8 encoding**。

我该如何解决这个问题？我是否必须将所有**@ResponseBody**注释使用的方法更改为**response.getWriter().write()**？

**样品方法：**

```
@RequestMapping(value = "/isScdValid.ajax")
    public @ResponseBody String isScdValid(HttpServletRequest request, HttpServletResponse response) throws IOException {
        boolean isValid = true; // for sample
        // continues...
        JSONObject jsonObj = new JSONObject();
        jsonObj.put("isValid", isValid);
        if(isValid) {
            jsonObj.put("username", scd.getUsername());
            jsonObj.put("sessionUserId", scd.getUserId());

        }
    return jsonObj.toString(); // not encoding with UTF-8
//        response.getWriter().write(jsonObj.toString()); // works right
    } 
```

**这是我的字符编码过滤器：**

```
<filter>
<filter-name>CharacterEncodingFilter</filter-name>
<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
<init-param>
    <param-name>encoding</param-name>
    <param-value>UTF-8</param-value>
</init-param>
<init-param>
    <param-name>forceEncoding</param-name>
    <param-value>true</param-value>
</init-param> 
```

```
<filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**还向 Tomcat 添加了 URIEncoding 属性：**

```
 <Connector port="9090" protocol="HTTP/1.1" connectionTimeout="20000" 
redirectPort="9443"
URIEncoding="UTF-8" compression="on" 
compressableMimeType="text/html,text/xml,text/javascript,text/json,text/css,text/plain,application/javascript,application/json,application/pdf"
/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:33:10.273

不幸的是，使用@ResponseBody 注释为控制器中返回的字符串设置编码并不是一项简单的任务，我认为您应该看到类似的问题：[谁在 Spring MVC (@ResponseBody) 中设置响应内容类型](https://stackoverflow.com/questions/3616359/who-sets-response-content-type-in-spring-mvc-responsebody)

在 Spring 3.1 配置中，您需要设置消息转换器，如[Rossen Stoyanchev answer](https://stackoverflow.com/a/7772620/241986)中所示。

# objective-c - 如何获取在情节提要中为 tableView 静态单元格设置的预设高度？

> ID：12105618
> 
> 赞同：0
> 
> 时间：2012-08-24T08:21:11.463
> 
> 标签：objective-c, ios, uitableview

试图隐藏和自定义静态单元格的高度。我知道这可能不是最好的方法。如果有人知道更好的方法，请指教。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (![Mode isEqualToString:@"HIDE"]) {
        if (indexPath.row == 2) {
            return 0.0;
        }
    }

    return "DEFAUlT_HEIGHT";

} 
```

如何从情节提要中获取默认高度？故事板中每个单元格的高度都不同。反正有更好的定制吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:29:26.677

看看这个线程：[隐藏静态单元格](https://stackoverflow.com/questions/8260267/uitableview-set-to-static-cells-is-it-possible-to-hide-some-of-the-cells-progra)

它谈到了以编程方式隐藏静态单元格。这是公认的答案：

> **1.隐藏单元格**
> 
> 没有办法直接隐藏单元格。UITableViewController 是提供静态单元格的数据源，目前没有办法告诉它“不提供单元格 x”。所以我们必须提供我们自己的数据源，它委托给 UITableViewController 以获取静态单元格。
> 
> 最简单的方法是继承 UITableViewController，并覆盖所有在隐藏单元格时需要表现不同的方法。
> 
> 在最简单的情况下（单节表，所有单元格具有相同的高度），这将是这样的：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section     {
    return [super tableView:tableView numberOfRowsInSection:section] - numberOfCellsHidden; }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Recalculate indexPath based on hidden cells
    indexPath = [self offsetIndexPath:indexPath];

    return [super tableView:tableView cellForRowAtIndexPath:indexPath]; }

- (NSIndexPath*)offsetIndexPath:(NSIndexPath*)indexPath {
    int offsetSection = indexPath.section; // Also offset section if you intend to hide whole sections
    int numberOfCellsHiddenAbove = ... // Calculate how many cells are hidden above the given indexPath.row
    int offsetRow = indexPath.row + numberOfCellsHiddenAbove;

    return [NSIndexPathindexPathForRow:offsetRow inSection:offsetSection]; } 
```

> 如果您的表格有多个部分，或者单元格的高度不同，则需要覆盖更多方法。同样的原则也适用于这里：您需要在委托给 super 之前偏移 indexPath、section 和 row。
> 
> 还要记住，didSelectRowAtIndexPath: 等方法的 indexPath 参数对于同一个单元格会有所不同，具体取决于状态（即隐藏单元格的数量）。因此，始终偏移任何 indexPath 参数并使用这些值可能是一个好主意。
> 
> **2.动画变化**
> 
> 正如 Gareth 已经说过的，如果使用 reloadSections:withRowAnimation: 方法对更改进行动画处理，则会出现重大故障。
> 
> 我发现如果你立即调用 reloadData: ，动画会得到很大改善（只剩下小故障）。动画后表格正确显示。
> 
> 所以我正在做的是：

```
- (void)changeState {
     // Change state so cells are hidden/unhidden
     ...

    // Reload all sections
    NSIndexSet* reloadSet = [NSIndexSetindexSetWithIndexesInRange:NSMakeRange(0, [self numberOfSectionsInTableView:tableView])];

    [tableView reloadSections:reloadSet withRowAnimation:UITableViewRowAnimationAutomatic];
    [tableView reloadData]; } 
```

如果这有帮助，请去那里投票 henning77 的答案。

# oop - 依赖注入容器看起来很正确

> ID：12105619
> 
> 赞同：4
> 
> 时间：2012-08-24T08:21:20.230
> 
> 标签：oop, design-patterns, dependency-injection

我有一个非常小的应用程序，我用它来学习设计模式。

目前我正在尝试实现一个依赖注入容器，但它感觉就像一个工厂。

有人可以解释容器有什么问题以及可以改进的地方。

正如我所说，它非常小，应用程序只需要几个对象：

```
class MyContainer
{
    public function getObjectA()
    {
        return new MyObjectA();
    }

    public function getObjectB()
    {
        $objectBArrayParam = array('arrparam1','arrparam2', 'arrparam3', 'arrparam4');
        $objectB = new MyObjectB('param1','param2', 'param3', 'param4', $objectBArrayParam);
        return $objectB;
    }

    public function getApplicationRunner()
    {
        $objectA = $this->getObjectA();
        $objectB = $this->getObjectB();

        $app = new ApplicationRunner($obejctA, $objectB);

        return $app;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:51:17.563

工厂可以看作是依赖注入的静态类型。您在编译时指定参数，结果对象图始终相同。

依赖注入工具会使用某种反射在运行时检查需要哪些参数。然后它将在其配置中搜索所需的类型并为您构建对象图。

如果您想构建一个简单的 DI 容器，您需要创建对注册类型和在运行时检查所需类型的支持。

就像是：

```
myDi.Register(<typeofIObectA>).To(<typeofobjectA>)
myDi.Register(<typeofIObjectB>).To(<typeofobjectB>)

MyDi.Resolve(<typofApplicationRunner>) 
```

DI 容器会看到 ApplicationRunner 需要两个参数。它将检查这些类型的配置并构造对象。

# castle-windsor - Castle WCF 客户端注册语法

> ID：12105622
> 
> 赞同：0
> 
> 时间：2012-08-24T08:21:24.640
> 
> 标签：castle-windsor

尝试使用 Castle WcfIntegration 3.0 注册 WCF 客户端；以下语法有什么问题吗？

Container.Kernel.Register( Component.For(serviceType) .AsWcfClient(new DefaultClientModel { Endpoint = WcfEndpoint .FromConfiguration( serviceType.Name. Substring(1) + "Client") }) .LifeStyle.Is(lifestyle));

我遇到的问题是在 WCF 服务操作的上下文中，ServiceSecurityContext.Current 为空。这在旧版本的 Castle (1.0.3.0) 中没有发生。试图了解这是否是我做错的事情，或者对 Castle 的某些更改是否要求进行其他更改以使 ServiceSecurityContext.Current 像以前一样填充。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:52:24.000

作为记录，这是我最终使用的语法。（鉴于需要更多 Castle 文档，我认为任何工作语法的示例都不会受到伤害）！

```
Container.Kernel.Register(Component.For(serviceType)
            .LifeStyle.Is(lifestyle)
            .DependsOn(new
            {
                clientModel = new DefaultClientModel
                {
                    Endpoint = WcfEndpoint
                    .FromConfiguration(serviceType.Name.Substring(1) + "Client")
                }
            })); 
```

另外为了记录，ServiceSecurityContext.Current 为空的问题是出于不同的原因发生的。

我对配置文件进行了更改，我认为这无关紧要（因为某些类似乎已过时），但结果却非常重要（并且非常需要这些类）。

城堡配置文件中的“组件”节点如下所示：

```
<component id="FederatedServiceHostBuilder"
           service="Castle.Facilities.WcfIntegration.IServiceHostBuilder`1[[Castle.Facilities.WcfIntegration.DefaultServiceModel, 
           Castle.Facilities.WcfIntegration, Version=3.0.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc]], Castle.Facilities.WcfIntegration"
           type="OurCustomer.Framework.Service.Security.FederatedServiceHostBuilder, OurCustomer.Framework.Service"
           lifestyle="Transient">
  <interceptors>
    <interceptor>${InstrumentationInterceptor}</interceptor>
  </interceptors>
</component> 
```

“FederatedServiceHostBuilder”类：

```
/// <summary>
/// The default implementation of <see cref="IServiceHostBuilder{M}"/>.
/// </summary>
public class FederatedServiceHostBuilder : AbstractServiceHostBuilder<DefaultServiceModel>
{
    /// <summary>
    /// Constructs a new <see cref="FederatedServiceHostBuilder"/>.
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    public FederatedServiceHostBuilder(IKernel kernel)
        : base(kernel)
    {
    }

    #region AbstractServiceHostBuilder Members
    /// <summary>
    /// 
    /// </summary>
    /// <param name="model"></param>
    /// <param name="serviceModel"></param>
    /// <param name="baseAddresses"></param>
    /// <returns></returns>
    protected override ServiceHost CreateServiceHost(ComponentModel model,
                                                     DefaultServiceModel serviceModel,
                                                     params Uri[] baseAddresses)
    {
        return CreateServiceHost(model, GetEffectiveBaseAddresses(serviceModel, baseAddresses));
    }
    /// <summary>
    /// 
    /// </summary>
    /// <param name="model"></param>
    /// <param name="baseAddresses"></param>
    /// <returns></returns>
    protected override ServiceHost CreateServiceHost(ComponentModel model,
                                                     params Uri[] baseAddresses)
    {
        return new FederatedServiceHost(model, baseAddresses);
    }
    /// <summary>
    /// 
    /// </summary>
    /// <param name="serviceType"></param>
    /// <param name="baseAddresses"></param>
    /// <returns></returns>
    protected override ServiceHost CreateServiceHost(Type serviceType,
                                                     params Uri[] baseAddresses)
    {
        return new FederatedServiceHost(serviceType, baseAddresses);
    }

    #endregion
} 
```

和（关键的）FederatedServiceHost 类：

```
public class FederatedServiceHost : Castle.Facilities.WcfIntegration.DefaultServiceHost
{
    /// <summary>
    /// 
    /// </summary>
    /// <param name="model"></param>
    /// <param name="baseAddresses"></param>
    public FederatedServiceHost(ComponentModel model, params Uri[] baseAddresses)
        : base(model, baseAddresses)
    {
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="serviceType"></param>
    /// <param name="baseAddresses"></param>
    public FederatedServiceHost(Type serviceType, params Uri[] baseAddresses)
        : base(serviceType, baseAddresses)
    {
    }

    /// <summary>
    /// <remarks />
    /// </summary>
    protected override void OnOpening()
    {
        FederatedServiceCredentials.ConfigureServiceHost(this);
        base.OnOpening();
    }
} 
```

所以最重要的是，缺少的是“FederatedServiceCredentials.ConfigureServiceHost(this)”行，因此导致我的 ServiceSecurityContext.Current 为空。

# saas - 将 NetSuite 与 JD Edwards 集成

> ID：12105628
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:21:53.357
> 
> 标签：saas, erp, netsuite, jdedwards

我想将 NetSuite 与 JD Edwards 集成。我可以知道如何实现这一目标以及我需要哪些工具？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:29:55.550

您可以使用多种选项将 NetSuite 与 JD Edwards 集成。

首先，我们需要了解，JD Edwards 和 NetSuite 是否提供了通信接口？是的——两个系统都提供了自己的 API。

1.  NetSuite API 可在此处 [获取 http://www.google.co.in/url?sa=t&rct=j&q=netsuite%20api&source=web&cd=2&cad=rja&sqi=2&ved=0CCcQFjAB&url=http%3A%2F%2Fwww.netsuite.com% 2Fportal%2Fpartners%2Fintegration%2Fdownload%2FNetSuiteWebServicesPlatformGuide_2_5_0.pdf&ei=2O86UN_gCI2zrAfozID4Ag&usg=AF](http://www.google.co.in/url?sa=t&rct=j&q=netsuite%20api&source=web&cd=2&cad=rja&sqi=2&ved=0CCcQFjAB&url=http%3A%2F%2Fwww.netsuite.com%2Fportal%2Fpartners%2Fintegration%2Fdownload%2FNetSuiteWebServicesPlatformGuide_2_5_0.pdf&ei=2O86UN_gCI2zrAfozID4Ag&usg=AF)

2.  JD Edwards API 可在此处[获得 http://docs.oracle.com/cd/E10995_01/jded/acrobat/E1_TOOLSTBF-B1007.pdf](http://docs.oracle.com/cd/E10995_01/jded/acrobat/E1_TOOLSTBF-B1007.pdf)

**集成解决** 方案 根据您可以应用的要求，有多种解决方案，下面列出了其中的几个。

**通过本地数据库集成** 1\. 将 JD Wdwards 数据以 NetSuite 输入的形式收集到您的数据库中。例如，如果您想同步销售订单数据，则将所有必填字段和您的业务字段数据收集到数据库中。

2.调用NetSuite API，将数据库中的数据推送到NetSuite。从优势的角度来看，您的系统将被解耦。

![这是解决方案](../Images/6de82886faa7cb9e1961e76b9bdbc9a6.png)

**通过集成服务工具，如 Boomi 或其他**

1.  Boomi 在其中提供了现成的连接器。JD Wdwards（不确定）
2.  您可以创建流程并同步您的数据。
3.  Boomi 还提供调度和错误处理功能。

还有其他解决方案。我希望以上内容对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:54:40.500

Netsuite 提供了一个 SOAP api，允许访问他们的大部分数据（它不完整，但每个版本都使其更完整。）。根据您希望使用的语言，Netsuite 提供了不同的工具来简化访问。就个人而言，我使用了 PHP_TOOLKIT。有一个模式浏览器提供有关可以访问哪些数据的详细信息（[2010 模式](https://system.netsuite.com/help/helpcenter/en_US/SchemaBrowser/indexv2010_2_0.html)）。如果您使用的是 php，我已经在我的博客上编写了几个[示例程序](http://www.ozonesolutions.com/programming/tag/netsuite/)，这可能是一个很好的起点。Netsuite 还提供了一个[论坛](https://usergroup.netsuite.com/)，该论坛是快速回答 API 问题的好地方。

# php - 在服务器中存储较小的 pdf 文件

> ID：12105629
> 
> 赞同：0
> 
> 时间：2012-08-24T08:21:57.310
> 
> 标签：php, algorithm, pdf, javascript

现在我正在开发需要从服务器下载一些 pdf 文件的移动应用程序。我只是想知道如何使这些 pdf 文件变小。PHP或javascript上是否有任何算法或插件或库能够使上传的pdf文件以较小的大小存储在服务器中。因此，当我的移动应用程序下载这些文件时，它不会花费太多带宽或时间。

谢谢所有的答案和回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:24:14.110

PDF 文件的问题在于，它们在组合时已经被压缩了很多，因此您不太可能从进一步压缩它们中看到任何真正的性能优势。您可以对它们进行 Zip 或 Rar，但正如我所说，不要指望有明显的好处。

# php - 使用 .htaccess 或 php.ini 更改服务器上的 PHP 版本

> ID：12105632
> 
> 赞同：13
> 
> 时间：2012-08-24T08:22:14.740
> 
> 标签：php, .htaccess, php-ini

如何使用 php.ini 文件的 .htaccess 在服务器上将 PHP 版本更改为 5.2？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T08:25:55.943

添加

```
AddHandler application/x-httpd-php52 .php .php5 .php4 .php3 
```

到您的 .htaccess 可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:26:08.410

我认为您想使用 php 3.x 处理例如 .php3 文件。

您不能像这样在 php 版本之间切换，但您可以通过设置代理服务器来实现，该代理服务器将查询分发到多个服务器之一（每个 PHP 版本一个）。

通过在 FastCGI 模式下调用 cgi-bin 模式 php 可能还会有一些 apache hack。请参阅链接的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T18:47:12.697

根据[https://www.first2host.co.uk/f/change-php-version-php-ini/](https://www.first2host.co.uk/f/change-php-version-php-ini/)，将以下行添加到您的 php.ini 文件中会将您更改为 PHP 版本 5.2：

```
AddHandler application/x-httpd-php52 .php 
```

我认为，它仅在您的主机是 first2host 时才有效。

# android - 单击另一个单元格时如何更改 GridView 单元格的图像？

> ID：12105634
> 
> 赞同：1
> 
> 时间：2012-08-24T08:22:26.537
> 
> 标签：android, android-gridview

我希望图像只出现在一个地方。当单击另一个单元格时，相同的图像会出现在那里，并从先前单击的按钮中消失。

```
public class ImageAdapter extends BaseAdapter{

        private Context mContext;

        public ImageAdapter(Context c) {
            mContext = c;
        }

        public int getCount() {
            return mThumbIds.length;
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

        // create a new ImageView for each item referenced by the Adapter
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView;
            if (convertView == null) {  // if it's not recycled, initialize some attributes
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));

                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

                imageView.setPadding(0, 0, 0, 0);
            } else {
                imageView = (ImageView) convertView;
            }

            imageView.setImageResource(mThumbIds[position]);
            return imageView;
        }

    // references to our images. Here are 16 for 4x4 grid
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,

    };

} 
```

MainActivity.java

```
public class MainActivity extends Activity {

    int i=0;
    long firstClick,secondClick;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //no title
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        // making it full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_main);

        GridView gridview = (GridView) findViewById(R.id.gridview);

        gridview.setAdapter(new ImageAdapter(this));

        gridview.setOnItemClickListener(new OnItemClickListener(){

            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position,
                    long id) {
                // TODO Auto-generated method stub

                 ImageView imageView = (ImageView) v;
                    imageView.setImageResource(R.drawable.sample_8);   
            }   
        });   
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:38:56.850

不要直接修改`ImageView`from `GridView`，而是修改适配器中的数据并调用`notifyDataSetChanged`.

```
 @Override
    public void onItemClick(AdapterView<?> parent, View v, int position,
            long id) {
         if (lastClicked != -1) {
              // we previously selected a position
              mThumbs[lastClicked] = R.drawable.default_image;                  
         }
         if (lastClicked != position) {
              mThumbs[position] = R.drawable.image_required_when_grid_selected;
         }
         lastClicked = position;
         mAdapter.notifyDataSetChanged(); // mAdapter is a reference to the GridView's adapter
    } 
```

`lastClicked`将是您班级中的一个字段，用于存储最后点击的位置：

```
int lastClicked = -1; // -1 meaning there were no selection 
```

# sql - 是否可以创建一个从表中提取列列表的视图？

> ID：12105637
> 
> 赞同：1
> 
> 时间：2012-08-24T08:22:29.497
> 
> 标签：sql, sql-server-2008

具体到 Microsoft SQL Server 2008

我想做的是：

*   **表**1：3 列`C1,C2,C3`和任意数量的行
*   **表2**：1 列`col`，最多 3 行

中的每一行`Table2`包含`C1`，`C2`或`C3`（无重复）

我想做类似的事情

```
create view v1 on 
(
    select (select col from Table2) from Table1
) 
```

因此，如果`Table2`包含`C1`and `C2`，则创建的视图显示`C1`and`C2`

如果`Table2`更新了 say`C3`添加，并重新执行查询，则视图现在将显示`C1`，`C2`并且`C3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:28:28.283

您无法创建执行此操作的视图。

但是您可以创建将返回所需结果的动态 SQL（即：在存储过程中）。

```
 declare @s varchar(500)
 select @s = ''
 select @s = ', ' + col from table2

 declare @sql nvarchar(1000)

 select @sql = 'select ' + substring(@s, 2, len(@s)) + ' from table1'

 exec sp_executesql @sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:45:33.127

找到了解决方案

使用了以下方法：

`create view v1 on (select C1,c2 from t2)`通过使用游标遍历每一行并形成正确的字符串，创建一个存储过程以生成所需的语句。

在 exec() 中使用此字符串来创建视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:29:50.040

我不认为这是可能的。

如果你真的想加入反对这样的事情，我看到了两种可能性：

*   使用动态 sql 在使用它之前创建视图。但是因为该视图也对其他用户可见（可能需要它的其他版本），所以这可能不是一个解决方案。
*   使用动态 sql 创建一个临时表，并使用它。临时表只会在当前连接中可见

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:27:54.290

尝试以下查询

```
DECLARE @coll nvarchar(100)
DECLARE @query nvarchar(4000)
set @query = 'select '
DECLARE @colcursor CURSOR
SET @colcursor = CURSOR FOR
SELECT col
FROM Table2
OPEN @colcursor
FETCH NEXT
FROM @colcursor INTO @coll
WHILE @@FETCH_STATUS = 0
BEGIN
--PRINT @coll
set @query = @query + @coll  + ','
FETCH NEXT
FROM @colcursor INTO @coll
END
CLOSE @colcursor
DEALLOCATE @colcursor
set @query = left(@query,(len(@query)-1)) + 'from Table1'
print @query
exec(@query) 
```

# c++ - C++ 非多态接口

> ID：12105638
> 
> 赞同：6
> 
> 时间：2012-08-24T08:22:30.983
> 
> 标签：c++, inheritance, polymorphism, virtual

简而言之，如何在 C++ 中为单级继承创建接口（出于简单和教学的原因）？我看到一些代码没有使用多态性，但基类包含一个虚拟抽象方法 ( `virtual void TheMethod() = 0`)。

现在从这个抽象类派生了一个类，使用纯虚方法，但是在随后的代码中，使用派生类的实例根本没有动态分配。

这是正确的方法吗？使用多态设计推断的开销如何？

我认为这是不可能的..这看起来更像是隐藏/重影基本方法，即使该方法是纯虚拟方法。

*稍后编辑*：感谢所有设法提供一些好的答案的人，我想强调一个由使用“动态分配”引起的严重错误，其含义是强调这种对象创建可能性是唯一与多态性兼容的. 很明显，这不是利用这种运行时调用行为的唯一方法（但可能是最常见的方法？），而是进一步澄清我最初的问题：

**有没有办法强制程序员在不使用纯虚拟方法的情况下实现方法？**我可能不合理的担忧是，是否打开了多态设计的大门是否在性能方面也有点沉重（讨论中的方法每秒有数千次这样的调用）。

*甚至后来的编辑*：使基础具有受保护的构造函数意味着它不能直接实例化（除了使用工厂或其他友好方式），这可以解决纯虚方法引起的影响之一的补偿。但是如何确保任何派生类仍然提供自己的方法实现呢？如果对关联的 vtable 的担心可能有点夸张真的没什么大不了的，我会坚持使用纯虚拟方法（因为 SFINAE 奇怪的重复模板模式更难被不熟悉的人阅读和理解）最少的中级 C++ 程序员 - 像我一样 :) )。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:26:23.737

您不必动态分配对象以多态地使用它：

```
struct base {
    virtual void foo() = 0;
};

struct derived : base {
    virtual void foo() {
        // do stuff
    }
};

void f(base& object) {
    object.foo();
}

int main() {
    derived object; // no dynamic allocation at all
    f(object); // polymorphism happens here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T08:43:33.043

出于教学原因，如果目标是了解如何在 C++ 中实现多态对象并测试已创建的类型，则不需要动态分配。然而，在实际应用程序中，它可能会是，因为使用多态的主要原因是因为具体类型要到运行时才能知道。

请注意，在 C++（以及几乎所有其他支持它的语言）中，多态性需要引用语义，而不是 C++ 默认使用的值语义。通常，设计用作基类的类*不*支持复制和赋值（可能通过虚`clone()`函数除外）。

关于开销：与什么相比？调用虚函数通常比调用非虚函数更昂贵。但是如果你使用虚函数，那是因为你需要运行时调度；使用其他一些机制来模拟这一点可能会更加昂贵。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T08:35:15.813

是的，正如其他人所说，您基本上使用具有纯虚拟（抽象）成员函数且没有数据成员的类。在*实现*这个接口的时候，自然要提供这些方法。

另一方面，这与动态分配无关。您是否拥有自动对象（即堆栈）或动态对象（即堆）与您如何使用它们无关，包括多态性。你的意思是动态*绑定*？

现在，说了这么多，您*可以*在不使用模板的动态绑定（即“多态性”）的情况下实现接口。基本上，您将使用 SFINAE+CRTP 通过从模板类私有继承来检查给定的成员函数是否存在。基本上，您的父类（不包含虚拟成员）`template <typename T> class FooIface;`（继承自 as ）将通过尝试调用它来`class Foo : private FooIface<Foo>`确保`T`具有成员函数。`foo`使用元编程技巧，您还可以确保`foo`具有正确的类型。

但这可能太麻烦且难以阅读。抽象基类是常用的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T08:25:54.703

C++中没有***接口***
的概念， 您只能使用**[抽象类](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr142.htm)***来模拟*行为。 抽象类是一个具有至少一个纯虚函数的类，一个不能创建抽象类的任何实例，但您可以创建指向它的指针和引用。此外，从抽象类继承的每个类都必须实现纯虚函数才能创建它的实例。

***动态分配***和***多态***无关！

***动态分配***定义***了对象将被分配到哪里***，并且与为自动变量提供的隐式内存管理不同，该对象应具有显式内存管理。

***多态性***意味着***一个事物的多种形式***。这是在类中具有不同行为的相同函数。您可以有一个指向堆栈上的对象的基类指针，并且仍然具有多态行为。

# java - 如何自定义格式化程序 JFormattedTextField 以显示 IP 地址？

> ID：12105639
> 
> 赞同：5
> 
> 时间：2012-08-24T08:22:38.013
> 
> 标签：java, swing, jformattedtextfield

我一直在尝试自定义`JFormattedTextField`显示用于输入 IP 地址的掩码。

我阅读了 javadoc，并尝试使用`###.###.###.###`，但在许多情况下它无效。

我为此找到了一些文章，他们使用正则表达式来格式化值，但他们不显示输入 IP 的掩码。

我想在文本字段中显示 3 个点来显示 IP 地址。像这样：

```
 .   .   . 
```

在很多情况下，我可以输入 IP 地址。您可以在 Windows 中的 IPv4 配置中看到。

```
 .   .   . 
```

你能帮助我吗？谢谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:22:36.757

您可以连续尝试四个`JFormattedTextField`，每个都以 . 分隔`JLabel(".")`。去掉点，这可能会使数字格式更容易正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:05:40.537

我知道这对你的家庭作业没有帮助，但对于其他正在寻找解决方案的人来说：Jidesoft Grids（我不隶属于）为此提供了一个类：[com.jidesoft.field.IPTextField](http://www.jidesoft.com/javadoc/com/jidesoft/field/IPTextField.html)。

一般来说，我认为使用 JFormattedTextField 很难实现令人满意的解决方案。

# java - 未能提交 JMS 事务，因为会话已关闭

> ID：12105640
> 
> 赞同：1
> 
> 时间：2012-08-24T08:22:46.813
> 
> 标签：java, ejb, jms, ibm-mq, mq

3 月，我们将 websphere mq 从版本 6 更新到了 7。因为我们每个月都这样做，所以当我们的应用程序尝试将消息放入 MQ 队列时，一个事务会丢失。我们得到这个错误：

> [8/1/12 11:37:53:163 MEST] 00000361 LocalTranCoor E WLTC0016E：资源 JMS$QueueConnectionFactory$JMSManagedConnection@1276 未能完成。异常堆栈跟踪如下：com.ibm.ws.LocalTransaction.LocalTranCoordImpl.complete(LocalTranCoordImpl.java:942) 处的 com.ibm.ejs.j2c.LocalTransactionWrapper.commit(LocalTransactionWrapper.java:283) 处的 javax.transaction.xa.XAException在 com.ibm.ws.LocalTransaction.LocalTranCoordImpl.complete(LocalTranCoordImpl.java:830) 在 com.ibm.ws.LocalTransaction.LocalTranCoordImpl.end(LocalTranCoordImpl.java:1424) 在 com.ibm.ejs.csi.TranStrategy.commit (TranStrategy.java:891) 在 com.ibm.ejs.csi.TranStrategy.postInvoke(TranStrategy.java:230) 在 com.ibm.ejs.csi.NotSupported.postInvoke(NotSupported.java:133) 在 com.ibm。 ejs.csi.TransactionControlImpl。JMSCC0020：此会话已关闭。一个应用程序调用了在会话关闭后不得使用的方法。确保在调用该方法之前会话未关闭。在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 在 java.lang.reflect.Constructor .newInstance(Constructor.java:513) at com.ibm.msg.client.commonservices.j2se.NLSServices.createException(NLSServices.java:313) at com.ibm.msg.client.commonservices.nls.NLSServices.createException(NLSServices .java:388) 在 com.ibm.msg.client.jms.internal.JmsErrorUtils.createException(JmsErrorUtils.java:104) 在 com.ibm。

我们的应用程序不是为处理回滚操作而设计的，因此消息会丢失。我想知道自升级以来导致此问题的原因以及我们可以做些什么。

我们使用的java代码是：

```
public void sendMessage(QueueConnectionFactory connectionFactory, Queue queue, String text, int priority) throws JMSException{
        QueueConnection connection = null;

        try {   
            connection = connectionFactory.createQueueConnection();
            connection.start();

            QueueSession session = connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
            QueueSender sender = session.createSender(queue);

            TextMessage message = session.createTextMessage(text);
            sender.send(message);

        } finally {
            if (connection!=null) 
                connection.close();
        }
    } 
```

亲切的问候，

汤姆

# javascript - jquery.gantt 插件不做任何事情

> ID：12105645
> 
> 赞同：1
> 
> 时间：2012-08-24T08:23:21.157
> 
> 标签：javascript, jquery, jquery-plugins, gantt-chart

**我正在尝试做** 的事情：安装[jquery.gantt](http://taitems.github.com/jQuery.Gantt/)插件并运行文档中给出的基本示例。

**它是如何失败** 的： javascript 不做任何事情，目标 DOM 保持不变。

**我做了什么：** 我检查了 css 文件`style.css`和 js`jquery.fn.gantt.js` 是否已安装。我检查了图像是否已安装。我查看了文档的来源。

**一些代码：**我以文档为例，但从未设法使其工作。

```
 <script type="text/javascript">
<!--
        $(".ganttdiv").gantt({
            source:  [{
                name: "Example",
                desc: "Lorem ipsum dolor sit amet.",
                values: [ {
                    to: "/Date(1328832000000)/",
                    from: "/Date(1333411200000)/",
                    desc: "Something",
                    label: "Example Value",
                    customClass: "ganttRed",
                    dataObj: foo.bar[i]
                }]
            }],
            scale: "weeks",
            minScale: "weeks",
            maxScale: "months",
            onItemClick: function(data) {
                alert("Item clicked - show some details");
            },
            onAddClick: function(dt, rowId) {
                alert("Empty space clicked - add an item!");
            }
        });

//-->
</script>
<div class="ganttdiv"></div> 
```

**我的问题：**

我想了解我做错了什么，或者只是想看看 Jquery.gantt 的工作示例的代码。任何有关如何调试此问题的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:38:39.700

好的，我设法使它工作。

默认的 css 强制你将 class='gantt' 放在目标 DOM 上，而不是像我那样放在 'ganttdiv' 上。

这是一个工作示例，我希望它对某人有用。

```
<script type="text/javascript">
<!--
    $(  function(){$(".gantt").gantt({
            source:  [{
                name: "Example",
                desc: "Lorem ipsum dolor sit amet.",
                values: [ {
                    to: "/Date(1376954000000)/",
                    from: "/Date(1375854000000)/",
                    desc: "Something",
                    label: "Example Value",
                    customClass: "ganttRed",
                }]
            }],scale: "weeks",
            minScale: "weeks",
            maxScale: "months",
            navigate:"scroll",

            onItemClick: function(data) {
                alert("Item clicked - show some details");
            },
            onAddClick: function(dt, rowId) {
                alert("Empty space clicked - add an item!");
            }
        });
});

//-->
</script>
<div class="gantt"></div> 
```

# asp.net - TreeView 使用上下文菜单编辑删除插入

> ID：12105647
> 
> 赞同：0
> 
> 时间：2012-08-24T08:23:43.083
> 
> 标签：asp.net, treeview

我的问题是我想在 Asp-web 应用程序中的 treeView 上创建一个应用程序，我想使用上下文菜单删除更新并将节点插入到树视图中，但我在鼠标左键单击时选择了 id，但我的上下文菜单是右键单击打开请在这方面帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:28:36.633

Asp:Treeview 基本上没有实现这个选项，你必须添加javascript。

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.treeview_properties](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.treeview_properties)

对于这个实现，我更喜欢 Ajax .net 控件

[http://aspnetajax.componentart.com/control-specific/treeview/features/node_contextMenus/WebForm1.aspx](http://aspnetajax.componentart.com/control-specific/treeview/features/node_contextMenus/WebForm1.aspx)

对于 Jquery - 上下文菜单

```
contextMenu('yourMenu', {
    bindings: {
        'delete': function(f) { ShowAction(f, "Delete"); }
    }
});

function ShowAction(f, a) {
    alert('Item is ' + f.id + '\nAction is' + a + "\nHtml is " + $(f).html());
} 
```

# wpf - WPF Datagrid RowValidationRules

> ID：12105650
> 
> 赞同：0
> 
> 时间：2012-08-24T08:23:51.643
> 
> 标签：wpf

我有一个带有一些可编辑列的数据网格。如果用户引入的数据是经过验证的，那么我应该根据新参数计算同一行的其他列。ValidationRules 之后有任何事件吗？一种 ValidationSucces ......或者这样做的方法是什么。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T09:04:36.577

使用 CollectionView 作为 Itemssource 并将 Predicate 类型的 Filterproperty 应用于该集合

或者您使用 CollectionViewSource 并在事件中处理过滤。

# android - 多个发送消息的广播接收器？

> ID：12105656
> 
> 赞同：1
> 
> 时间：2012-08-24T08:24:11.037
> 
> 标签：android, android-intent, broadcastreceiver

在我的应用程序中，我一次发送多条短信，效果很好。但是当我试图在广播接收器中接收确认消息时，我希望得到所有数字，但我最终收到的是相同的一个数字而不是 n 个数字。

发送短信

```
Intent intent = new Intent(SENT);
intent.putExtra("phonenumber", sms_phonenumber);
PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
SmsManager sms_man = SmsManager.getDefault();
sms_man.sendTextMessage(sms_phonenumber, null, sms_message, sentPI, null); 
```

接收发送的确认

```
private class SMSReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context arg0, Intent intent) {

        switch (getResultCode()) {
        case Activity.RESULT_OK: 
            String phoneNumber = intent.getExtras()
                    .getString("phonenumber");

            alertMessage("Request sent to " + phoneNumber + ".");

            break;

        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
            String phoneNumber1 = intent.getExtras().getString(
                    "phonenumber");

            alertMessage("Sending Failed to " + phoneNumber1 + ".");

            break;

        case SmsManager.RESULT_ERROR_NO_SERVICE:
            String phone = intent.getExtras().getString(
                    "phonenumber");

            alertMessage("No service");

            break;

        case SmsManager.RESULT_ERROR_NULL_PDU:
            alertMessage("Null PDU");
            Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT)
                    .show();
            break;

        case SmsManager.RESULT_ERROR_RADIO_OFF:
            alertMessage("Radio off");
            break;
        }
    }
} 
```

我在 Google 和 SO 中进行了很多搜索，但没有一个能解决我的问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:46:14.040

尝试始终使用唯一 id 设置待处理意图的待处理意图

PendingIntent pendingintent = PendingIntent.getService(this, uId, mIntent, PendingIntent.FLAG_ONE_SHOT);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:35:04.947

尝试一个接一个地发送消息。发送一条消息...然后从 on receive 方法发送下一条消息。

# php - 伪随机字符串

> ID：12105662
> 
> 赞同：3
> 
> 时间：2012-08-24T08:24:36.187
> 
> 标签：php, string

我需要从这封信中生成代码

```
$a = array(
    'B','C','D','F','G','H','J','K','L','M','N','O',
    'P','Q','R','S','T','V','W','X','Y','Z','1','2',
    '3','4','5','6','7','8','9','0'
); 
```

但是有两个条件：每个代码必须是唯一的，并且包含 10 个字母。我不想随机，因为效率低下。相反，我想要每个字母，例如：

1.  BBBBBBBBBB
2.  BBBBBBBBBC
3.  BBBBBBBBBD

等等..有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:49:30.810

我认为你真正想要的是一个序列号列表（因此根本不是随机的），它有一个非常规的基本系统。如此`BBBBBBBBB`，`0`虽然`BBBBBBBC`如此`1`。这并不难做到，但显然你必须自己编写代码。像这样的东西可能会起作用：

```
function generate($num) {
    $num = base_convert($num, 10, 32); // convert the number to base 32
    $num = str_pad($num, 10, "0", STR_PAD_LEFT); // pad it with zeros to the left
    $num = str_replace(array(
        '0','1','2','3','4','5','6','7','8','9','a','b',
        'c','d','e','f','g','h','i','j','k','l','m','n',
        'o','p','q','r','s','t','u','v'
    ), array(
        'B','C','D','F','G','H','J','K','L','M','N','O',
        'P','Q','R','S','T','V','W','X','Y','Z','1','2',
        '3','4','5','6','7','8','9','0'
    ), $num); // replace the normal characters with your custom array

    echo $num, "\n";
}

for ($i = 0; $i < 10; $i++) generate($i); 
```

显然，您可以`10`将语句中的 in更改为`for`您喜欢的任何内容，然后插入数据库而不是`echo`ing。显然，生成 160 万条记录需要一些时间。

上面的代码给出了以下输出：

```
BBBBBBBBBB
BBBBBBBBBC
BBBBBBBBBD
BBBBBBBBBF
BBBBBBBBBG
BBBBBBBBBH
BBBBBBBBBJ
BBBBBBBBBK
BBBBBBBBBL
BBBBBBBBBM 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:44:01.583

```
<?php

$length = 3;

$letters = str_split("ABC"); // define your dictionary here

$index = array_fill(0, $length, 0);

$key = $length - 1;
while(true) {   
    $code = "";
    for($i=0;$i<$length;$i++) {     
        $code .= $letters[$index[$i]];      
    }
    echo $code ."<br/>"; // output code

    $index[$key]++;

    while(!isset($letters[$index[$key]])) {
        $index[$key] = 0;
        $key--;
        if($key < 0) {
            break 2;
        }       
        $index[$key]++;
    }   
    $key = $length - 1; 
} 
```

例子：

*   [http://codepad.org/9XO9pKJK](http://codepad.org/9XO9pKJK)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:47:36.463

```
<?php

$a = array(
    'B','C','D','F','G','H','J','K','L','M','N','O',
    'P','Q','R','S','T','V','W','X','Y','Z','1','2',
    '3','4','5','6','7','8','9','0'
);

function key_increment (&$symbols, $position = null) 
{
    global $a;
    if ($position === null) $position = count($symbols) - 1;
    if ($position == -1) return;

    $index = $symbols[$position];
    $index ++;
    if (!isset($a[$index])) {
        $v = 0;
        key_increment ($symbols, $position-1);
    }
    $symbols[$position] = $value;
}

function generate($length, $total) 
{
    global $a;

    $symbols = array_fill(0, $length, 0);

        for ($i = 0; $i < $total; $i ++) {
            $code = '';
        foreach ($symbols as $index) {
            $code .= $a[$index];
        }
        echo $code;
        echo '<br />';

        key_increment($symbols);
    }
}

generate(3, 100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:37:16.717

最好只使用 uniqid，尤其是看到您说您将生成 160 万个代码。如果您担心这种情况，只需使用 strtoupper()

```
echo strtoupper(uniqid()); 
```

生成所有这些并插入它们将需要相当长的时间。

# python - 在 django 管理面板中无法添加和更改我的模型对象

> ID：12105667
> 
> 赞同：4
> 
> 时间：2012-08-24T08:24:52.287
> 
> 标签：python, django, django-admin

在我的 django 管理面板中有四个项目：“组”、“用户”、“站点”和我的自定义模型“广告”。所有这些都有“添加”和“更改”按钮。系统项目的按钮照常工作。我的模型按钮“添加”重定向到标题为“添加（1x1）”的空白页面，按钮“更改”重定向到标题为“广告（1x1）”的空白页面。

即使我从 Django 教程[https://docs.djangoproject.com/en/1.4/intro/tutorial01/创建项目时也会发生这种情况](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

我使用 django 的开发服务器。

## 模型.py

```
from django.db import models

class Ad(models.Model):
    text = models.TextField()  
    tel = models.CharField(max_length=12)   
    pub_date = models.DateTimeField(auto_now_add=True)  
    checked = models.BooleanField(default=False)

    def __unicode__(self):
        return self.text[0:20] 
```

## 管理员.py

```
from models import Ad
from django.contrib import admin

admin.site.register(Ad) 
```

非常简单的代码。

如何获得正常的添加和更改页面？

UPD：系统 - Windows，浏览器 - Chrome、Firefox、Opera

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T20:50:59.263

我在管理员中看到了所有模型，但没有一个是可编辑的。我没有可用的操作。我`urls.py`看起来很正常：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
)

admin.autodiscover() 
```

我移到`admin.autodiscover()`文件顶部，在`urlpatterns`声明之前，一切都开始正常工作：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T03:26:37.683

另外，在您的 admin.py 文件中，如果您有类似的内容：

```
admin.site.get_urls = {{admin_urls}} 
```

这应该是在注册您的（管理员）模型之后，否则您似乎在管理员（django 1.6）上松散了编辑/添加/删除链接

# crash-reports - TestFlight 崩溃报告

> ID：12105668
> 
> 赞同：2
> 
> 时间：2012-08-24T08:25:00.740
> 
> 标签：crash-reports, testflight

带有 TestFlight 的应用程序如何发送其崩溃报告？是否有一些立即发送报告的异常处理程序？或者应用程序的下一次启动是否会触发对崩溃日志的扫描并发送待处理的日志？由于内存使用量过多，操作系统是否也会将其杀死作为崩溃报告发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:34:10.397

从文档中：

> 未捕获的异常意味着您的应用程序处于未知状态，您无能为力，只能尝试优雅地退出。我们的 SDK 会尽最大努力在崩溃时将我们在这种情况下收集的数据提供给您，但它的设计方式是，在尝试发送数据之前，保存数据的重要操作以尽可能安全的方式发生任何事物。如果您确实使用未捕获的异常或信号处理程序，请在调用 takeOff 之前安装您的处理程序。然后，我们的 SDK 将在我们的运行时调用您的处理程序

所以它是立即发送的。

我认为内存触发的崩溃会使用相同的方法，但你永远不知道它是否能够完成。

# sql - 在 Oracle SQL 插入语句中返回参数

> ID：12105669
> 
> 赞同：1
> 
> 时间：2012-08-24T08:25:05.087
> 
> 标签：sql, oracle

我有一个插入语句，我需要从中返回一个参数以便以后使用它。我遇到了一个奇怪的错误，我似乎无法找到解决方案。任何人都可以阐明它吗？

```
set define off;
variable videoID number;

insert into VM_VIDEO (VIDEO_ID, ...)
  values (SEQ_VMMIGVIDEO_ID.NEXTVAL, ...)
  returning VIDEO_ID into :videoID;

insert into IMAGES (IMAGE_ID, ...)
  values (SEQ_IMAGE_ID.NEXTVAL, ...);

update VM_VIDEO
  set THUMB_IMAGE_ID = SEQ_IMAGE_ID.CURRVAL
  where VIDEO_ID = :videoID; 
```

**错误：**

```
Error starting at line 4 in command:
insert into VM_VIDEO (VIDEO_ID, ...) values (SEQ_VMMIGVIDEO_ID.NEXTVAL, ...) returning VIDEO_ID into :videoID
Error report:
SQL Error: Not all return parameters registered 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T08:33:03.843

您需要将其放入 PL/SQL 块中：

```
declare
  videoID number;
begin
  insert into VM_VIDEO (VIDEO_ID, ...)
    values (SEQ_VMMIGVIDEO_ID.NEXTVAL, ...)
    returning VIDEO_ID into videoID;

  insert into IMAGES (IMAGE_ID, ...)
    values (SEQ_IMAGE_ID.NEXTVAL, ...);

  update VM_VIDEO
    set THUMB_IMAGE_ID = SEQ_IMAGE_ID.CURRVAL
    where VIDEO_ID = videoID;
end; 
```

# wpf - WPF项目路径设置

> ID：12105671
> 
> 赞同：0
> 
> 时间：2012-08-24T08:25:07.357
> 
> 标签：wpf, visual-studio-2010

如何在vs2010中为项目设置路径，使其在所有系统中都能正常工作而不显示任何路径错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:37:47.660

相对路径应该相同。您可以将其设置为 ..\..\..\ （其中 .. 是父文件夹）看[这里](https://stackoverflow.com/questions/1210754/visual-studio-relative-assembly-references-paths)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:41:58.977

`subst`您可以使用包含您引用的 dll 的文件夹来制作映射驱动器。

当您在另一台 PC 上打开解决方案时，只需创建一个与包含 dll 的本地路径同名的映射驱动器

确保始终在映射驱动器上设置对 dll 的引用。

这样你只需要记住`subst`正确的路径。

# android - Android 中的 C++ 流。如何使用 std::ofstream 写入设备内存？

> ID：12105675
> 
> 赞同：1
> 
> 时间：2012-08-24T08:25:33.323
> 
> 标签：android, c++, android-ndk, filesystems

为了写入 sdcard 上的文件，在 AndroidManifest.xml中添加**android.permission.WRITE_EXTERNAL_STORAGE 。**需要添加/做什么来记录设备内存（闪存/应用程序文件夹）？

写函数：

```
bool write_to_file(const std::string & file_name, const std::string & text)
{
     bool res = false;

     std::ofstream stream (file_name.c_str (), std::ios::out);
     stream.clear();
     if (! stream.fail()) {
         res = true;
         stream << text.c_str() << std::endl;
     }
     else {
         LOGE ("std :: ofstream: wtire error");
     }
     stream.close();

     return res;
} 
```

调用示例

```
std::string file("/sdcard/text.txt");
write_to_file(file, "simple text"); // OK !!!

std::string file("./text.txt");
write_to_file(file, "simple text"); // ERROR !!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:05:53.530

诀窍是将正确的文件名传递给本机代码。在 Android 中，您用于`Context.getDir()`检索手机内存中的数据文件夹位置。像这样：

```
File Path = Ctxt.getDir("Data");
File FName = new File(Path, "MyFile.txt"); 
```

然后以某种方式传递`FName.toString()`到本机库。粘贴的代码段不能直接从 Java 调用 -缺少[胶水代码。](https://stackoverflow.com/questions/11354411/android-ndk-native-function-call-issue/11354714#11354714)

在我知道的 Android 版本中，上面的文件路径将对应于以下文件系统路径：`/data/data/com.mypackage/app_Data/MyFile.txt`. 但你不能依赖它。

操作系统权限禁止写入设备文件系统的任意路径。你有你的沙盒，去玩吧。这就是智能手机的方式。

# phpunit - Selenium2 phpunit 提交表单等待页面加载

> ID：12105677
> 
> 赞同：0
> 
> 时间：2012-08-24T08:25:44.500
> 
> 标签：phpunit, selenium-webdriver

我正在尝试在提交空白表单的情况下运行测试，等待 10 秒以确保页面已重新加载，然后检查是否出现错误消息。

我正在使用我开始使用的 Selenium2

```
java -jar /usr/local/bin/selenium-server-standalone-2.25.0.jar 
```

我有一些测试可以确保字段存在，例如

```
public function testEmailFieldIsPresentById()
{
$element = $this->byCssSelector('#email');
$this->assertEquals(1, count($element));
} 
```

我根据阅读过的不同文章尝试了不同的函数调用，但都没有工作。

到目前为止，这就是我对等待的两次尝试的评论。

```
<?php

class LoginFormSubmitTest extends PHPUnit_Extensions_Selenium2TestCase
{

    protected function setUp()
    {
        $this->setBrowser('firefox');
        $this->setBrowserUrl('http://localhost/login');
    }

    public function testWithAllBlankFields()
    {
        // Submit the form
        $this->byId('recording-form-login')->submit();
        // Wait 10 seconds
        //$this->waitForPageToLoad(10000);
        //$this->timeouts()->implicitWait(10000);
    }

} 
```

任何人都可以向我指出一些关于此问题的好的文档建议解决它的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:24:29.013

该声明

```
$this->setBrowserUrl('http://localhost/login'); 
```

实际上并没有打开网页。setBrowserUrl == 设置测试的**基本**URL。

这应该对你有用 - 注意额外的行**$this->url('http://localhost/login');**

```
protected function setUp()
{
    $this->setBrowser('firefox');
    $this->setBrowserUrl('http://localhost/');
}

public function testWithAllBlankFields()
{
    $this->url('http://localhost/login');
    // Submit the form
    $this->byId('recording-form-login')->submit();
    // Wait 10 seconds
    //$this->waitForPageToLoad(10000);
    //$this->timeouts()->implicitWait(10000);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T12:15:30.397

我找到了两个很好的教程，它们解释了需要的是一个用于 PHP 交互的 Selenium API 的包装器。

[http://testigniter.blogspot.co.uk/2012/01/running-selenium-2-webdriver-using.html](http://testigniter.blogspot.co.uk/2012/01/running-selenium-2-webdriver-using.html) http://edvanbeinum.com/using-selenium-2-phpunit-to-automate-browser-testing

从[https://github.com/facebook/php-webdriver](https://github.com/facebook/php-webdriver)下载包装器后，我的代码现在如下所示，并捕获了 tearDown 函数失败的屏幕截图

```
<?php

// Include the Facebook PHP Webdriver init file
require_once '../php-webdriver/__init__.php';

class loginFormSubmitTest extends PHPUnit_Framework_TestCase {

    /**
    * @var WebDriverSession
    */
    protected $_session;

    public function setUp()
    {
        parent::setUp();
        $web_driver = new WebDriver();
        $this->_session = $web_driver->session();
    }

    public function tearDown()
    {

        // Get the status of the test
        $status = $this->getStatus();

        // Check if the status has an error or a failure
        if ($status == PHPUnit_Runner_BaseTestRunner::STATUS_ERROR || $status == PHPUnit_Runner_BaseTestRunner::STATUS_FAILURE) {
            // Take a screenshot
            $image_data = base64_decode($this->_session->screenshot());

            file_put_contents(date('Y-m-d-H-i-s') . '.png', $image_data);
        }

        $this->_session->close();
        unset($this->_session);
        parent::tearDown();
    }

    public function test_submit_form_with_all_blank_fields()
    {

        $this->_session->open('http://localhost/login');

        $this->_session->element(
            'id',
            'recording_form_login_submit'
        )->click();

        $email_label_span_text = $this->_session->element('css selector', '#recording-form-login label[for="email"] span')->text();

        $this->assertSame(
            'Required',
            $email_label_span_text
        );

    }

} 
```

# iphone - 是否有任何用于代码审查的 Xcode 插件？

> ID：12105684
> 
> 赞同：1
> 
> 时间：2012-08-24T08:25:56.077
> 
> 标签：iphone, xcode

是否有任何用于代码审查的 Xcode 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:43:19.317

你不太可能找到一个。Xcode 的新版本（至少到 4.4）不支持插件，因此您正在寻找的那种东西将不可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T08:38:48.463

[http://www.reviewboard.org/](http://www.reviewboard.org/)

这是一个不错的免费和开放的解决方案。您可能不喜欢所有功能，但它应该为您提供可靠的基于 Web 的审查工具所需的一切。

# java - 转换 LinkedHashMap Java中的对象

> ID：12105687
> 
> 赞同：4
> 
> 时间：2012-08-24T08:26:06.183
> 
> 标签：java, json, jaxb, jax-rs

我将直接从我的问题开始，稍后我会提供更多背景信息。

**简单**：我有一个`LinkedHashMap<String, String>`，它代表一个特定的对象。将其转换为该对象的最佳方法是什么？

我知道您可以使用泛型来遍历所有元素并设置字段，但是什么是嵌套对象？

**背景**：我有一个使用 JSON 对象的 JAX-RS 服务。我的服务处理不同类型的对象，只代表一个接口。所以我不知道哪些对象来自外部，哪些程序正在使用我的服务。

在运行时，我通过`@Inject`我的界面获取信息。JAX-RS 服务将来自客户端的数据存储在无类型对象中，并自动完成（即`LinkedHashMap<String, String>`.

使用我的界面，我想提供一种方法，例如`setObject`，参数应该是该类型的对象。我可以处理所有这些，但不能处理将对象转换`LinkedHashMap<String, String>`为特定对象的部分。

**示例结构**：目标对象可能会这样

```
public class Document {
    private String title;
    private String id;
    private int version;
} 
```

`LinkedHashMap`看起来是这样的

```
{title=some title, id=1, version=1} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:03:52.777

您可以创建两个类

```
@XmlAccessorType(XmlAccessType.FIELD) 
public class Document {
    @XmlElement
    private String title;
    @XmlElement
    private String id;
    @XmlElement
    private int version;
}  

@XmlAccessorType(XmlAccessType.FIELD)
public class MapJson {
    @XmlElement
    private LinkedHashMap<String, String> documents; 
} 
```

并使用杰克逊 将对象转换为 JSON

```
new org.codehaus.jackson.map.ObjectMapper().writeValueAsString(instanceofMapJson); 
```

谷歌 JSON

```
new com.google.gson.Gson().toJson(instanceofMapJson); 
```

PS。使用 google json，您可以从类中删除 xml 注释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:42:19.077

反射是设置通用未知对象属性的唯一方法。
您可以在文档中找到所需的一切。

# oracle - 将时间戳数据类型转换为 unix 时间戳 Oracle

> ID：12105691
> 
> 赞同：12
> 
> 时间：2012-08-24T08:26:21.470
> 
> 标签：oracle, oracle10g, unix-timestamp

我在数据库中有一个时间戳数据类型，格式为 24-JuL-11 10.45.00.000000000 AM，并且想将其转换为 unix 时间戳，我该如何获得它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T08:42:28.410

这个问题几乎是[Convert Unixtime to Datetime SQL (Oracle)的反面](https://stackoverflow.com/questions/10554405/convert-unixtime-to-datetime-sql-oracle)

正如贾斯汀洞穴所说：

> 没有内置函数。但是写一个相对容易。因为 Unix 时间戳是自 1970 年 1 月 1 日以来的秒数

由于从另一个日期中减去一个日期会导致它们之间的天数，您可以执行以下操作：

```
create or replace function date_to_unix_ts( PDate in date ) return number is

   l_unix_ts number;

begin

   l_unix_ts := ( PDate - date '1970-01-01' ) * 60 * 60 * 24;
   return l_unix_ts;

end; 
```

自 1970 年以来以*秒*为单位，小数秒数无关紧要。您仍然可以使用时间戳数据类型调用它...

```
SQL> select date_to_unix_ts(systimestamp) from dual;

DATE_TO_UNIX_TS(SYSTIMESTAMP)
-----------------------------
                   1345801660 
```

* * *

针对您的评论，我很抱歉，但我没有看到这种行为：

```
SQL> with the_dates as (
  2    select to_date('08-mar-12 01:00:00 am', 'dd-mon-yy hh:mi:ss am') as dt
  3      from dual
  4     union all
  5    select to_date('08-mar-12', 'dd-mon-yy')
  6      from dual )
  7  select date_to_unix_ts(dt)
  8    from the_dates
  9         ;

DATE_TO_UNIX_TS(DT)
-------------------
         1331168400
         1331164800

SQL> 
```

有 3,600 秒的差异，即 1 小时。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-02T00:25:22.353

我意识到答案已被接受，但我认为应该明确该答案中的函数不考虑传入日期的时区偏移量。应在 GMT (+0) 计算正确的 Unix 时间戳。Oracle 的`to_date`函数假定传入的日期在本地时区，除非另有说明。夏令时是真实存在的，这一事实加剧了这个问题。我通过以下功能解决了这个问题：

```
create or replace
  function unix_time_from_date
      (
        in_date   in date,
        in_src_tz in varchar2 default 'America/New_York'
      )
    return integer
  as
    ut      integer       := 0;
    tz      varchar2(8)   := '';
    tz_date timestamp with time zone;
    tz_stmt varchar2(255);
  begin
    /**
     * This function is used to convert an Oracle DATE (local timezone) to a Unix timestamp (UTC).
     *
     * @author James Sumners
     * @date 01 February 2012
     *
     * @param in_date An Oracle DATE to convert. It is assumed that this date will be in the local timezone.
     * @param in_src_tz Indicates the time zone of the in_date parameter.
     *
     * @return integer
     */

    -- Get the current timezone abbreviation (stupid DST)
    tz_stmt := 'select systimestamp at time zone ''' || in_src_tz || ''' from dual';
    execute immediate tz_stmt into tz_date;
    select
      extract(timezone_abbr from tz_date)
    into tz
    from dual;

    -- Get the Unix timestamp
    select
      (new_time(in_date, tz, 'GMT') - to_date('01-JAN-1970', 'DD-MM-YYYY')) * (86400)
    into ut
    from dual;

    return ut;
end unix_time_from_date; 
```

我有一些配套功能，`unix_time`并且`unix_time_to_date`，可在[http://jrfom.com/2012/02/10/oracle-and-unix-timestamps-revisited/](http://jrfom.com/2012/02/10/oracle-and-unix-timestamps-revisited/)获得。如果不实施这些，我无法相信 Oracle 已经一路发展到 11g。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-16T13:36:22.137

日期：

```
 FUNCTION date_to_unix (p_date  date,in_src_tz in varchar2 default 'Europe/Kiev') return number is
begin
    return  round((cast((FROM_TZ(CAST(p_date as timestamp), in_src_tz) at time zone 'GMT') as date)-TO_DATE('01.01.1970','dd.mm.yyyy'))*(24*60*60));
end; 
```

对于时间戳：

```
FUNCTION timestamp_to_unix (p_time  timestamp,in_src_tz in varchar2 default 'Europe/Kiev') return number is
    begin
        return  round((cast((FROM_TZ(p_time, in_src_tz) at time zone 'GMT') as date)-TO_DATE('01.01.1970','dd.mm.yyyy'))*(24*60*60));
    end; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-25T14:26:15.557

我正在使用以下方法，它与其他答案略有不同，因为它使用`sessiontimezone()`函数来正确获取日期

```
 select
    ( 
      cast((FROM_TZ(CAST(in_date as timestamp), sessiontimezone) at time zone 'GMT') as date) -- in_date cast do GMT
      - 
      TO_DATE('01.01.1970','dd.mm.yyyy') -- minus unix start date
    )
    * 86400000 -- times miliseconds in day
    from dual; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-25T22:36:25.330

这就是我想出的：

```
select    substr(extract(day from (n.origstamp - timestamp '1970-01-01 00:00:00')) * 24 * 60 * 60 + 
          extract(hour from (n.origstamp - timestamp '1970-01-01 00:00:00')) * 60 * 60 + 
          extract(minute from (n.origstamp - timestamp '1970-01-01 00:00:00')) * 60 + 
          trunc(extract(second from (n.origstamp - timestamp '1970-01-01 00:00:00')),0),0,15) TimeStamp 
          from tablename; 
```

FWIW

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-16T08:26:16.350

```
SELECT (SYSDATE - TO_DATE('01-01-1970 00:00:00', 'DD-MM-YYYY HH24:MI:SS')) * 24 * 60 * 60 * 1000 FROM DUAL 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-03T09:05:41.007

对于 Oracle 时间和 Unix 时间之间的转换，我使用这些函数。他们会考虑您当前的时区。您还应该添加`DETERMINISTIC`关键字，例如，如果您想在基于函数的索引中使用此类函数。`DATE`和之间的转换`TIMESTAMP`应该由 Oracle 隐式完成。

```
FUNCTION Timestamp2UnixTime(theTimestamp IN TIMESTAMP, timezone IN VARCHAR2 DEFAULT SESSIONTIMEZONE) RETURN NUMBER DETERMINISTIC IS
    timestampUTC TIMESTAMP;
    theInterval INTERVAL DAY(9) TO SECOND;
    epoche NUMBER;
BEGIN
    timestampUTC := FROM_TZ(theTimestamp, timezone) AT TIME ZONE 'UTC';
    theInterval := TO_DSINTERVAL(timestampUTC - TIMESTAMP '1970-01-01 00:00:00');
    epoche := EXTRACT(DAY FROM theInterval)*24*60*60 
        + EXTRACT(HOUR FROM theInterval)*60*60 
        + EXTRACT(MINUTE FROM theInterval)*60 
        + EXTRACT(SECOND FROM theInterval);
    RETURN ROUND(epoche);
END Timestamp2UnixTime;

FUNCTION UnixTime2Timestamp(UnixTime IN NUMBER) RETURN TIMESTAMP DETERMINISTIC IS
BEGIN
    RETURN (TIMESTAMP '1970-01-01 00:00:00 UTC' + UnixTime * INTERVAL '1' SECOND) AT LOCAL;
END UnixTime2Timestamp; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-17T13:42:54.810

我同意[Wernfried Domscheit](https://stackoverflow.com/a/54019139/4903292)和[James Sumners](https://stackoverflow.com/a/13187536/4903292)在他们的帖子中解释的解决方案——主要是因为时区和夏季/冬季问题！

我更喜欢更短且没有动态 SQL 的函数之一：

```
-- as Date 
CAST ( FROM_TZ( TIMESTAMP '1970-01-01 00:00:00' + NUMTODSINTERVAL(input_date , 'SECOND') , 'GMT' ) AT TIME ZONE 'Europe/Berlin' AS DATE ) 
```

或者

```
-- as Timestamp
FROM_TZ( to_timestamp(Date '1970-01-01' + input_date / 86400 ), 'GMT' ) AT TIME ZONE 'Europe/Berlin' 
```

由于“时区”需要放置静态字符串（即“欧洲/柏林”）而不是 dbtimezone 或 sessiontimezone 变量，因为这可能会产生错误的偏移量，因为执行时间可能在 Summer 而 unix Timestamp 可能在冬天。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-29T10:59:50.977

以上所有都这样做： -

> ORA-01873: 区间的前导精度太小

如果您的日期是 TIMESTAMP 格式。

这是正确的答案（假设您足够聪明，可以将服务器设置为使用 UTC。）

```
select (cast(sys_extract_utc(current_timestamp) as date) - TO_DATE('1970-01-01 00:00:00','YYYY-MM-DD HH24:MI:SS')) * 86400 as gmt_epoch from dual; 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-08-05T11:57:02.370

```
SELECT 
to_char(sysdate, 'YYYY/MM/DD HH24:MI:SS') dt,
round((sysdate - to_date('19700101 000000', 'YYYYMMDD HH24MISS'))*86400) as udt 
FROM dual; 
```

# bash - Unix diff忽略以序列结尾的行

> ID：12105693
> 
> 赞同：0
> 
> 时间：2012-08-24T08:26:23.270
> 
> 标签：bash, shell, unix

我有两个文件

文件 1

```
INFO  : temp0 Directory
            created
INFO  : temp0 Directory created 
```

文件2

```
INFO  : reuse temp1 
```

因此，在区分这两个文件时，我想忽略以`Directory created`. 我写

```
diff -I 'Directory created' file1 file2 
```

所以这个语句成功地忽略了 file1 中的第二行，但它没有忽略包含`Directory created`在单独行中的第一行。

因此，如果有人知道解决方案，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:43:43.120

基本上 -I**仅在****差异块中的****所有**行都匹配的情况下才会匹配。在您描述的情况下 - 条件不成立。

 **```
diff -I "INFO" 1 2 | grep -v "Directory created" 
```

可能对你有用，但它不能正确计算差异块边界

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:24:22.120

好吧，我认为最简单的解决方案是从第一个文件中过滤掉这些行。例如，您可以使用以下 awk 脚本执行此操作：

```
# if line contains 'Directory created', just skip it.
/Directory created/ {
    had_dir = ""
    next
}

# if line contains sole 'Directory', store it and lookup next line.
/Directory/ {
    had_dir = $0
    next
}

# if line contains sole 'created' and we stored a line (which means
# it contained 'Directory'), then delete the stored one and skip
# (effectively, skip both).
/created/ && had_dir {
    had_dir = ""
    next
}

# otherwise, if we stored a line, print it.
had_dir {
    print had_dir
    had_dir = ""
}

# and print the current line.
{
    print
} 
```

如果您的输入更复杂，您可能需要稍微调整一下正则表达式。

然后，使用脚本过滤掉第一个文件：

```
$ awk -f script.awk file1 | diff - file2
0a1
> INFO  : reuse temp1 
```

请注意，您将`-`作为第一个参数传递给`diff`, 以使其读取管道输出`awk`而不是文件。

还要注意，线偏移将不再正确。**

# c# - 无法创建要从中读取的 CryptoStream - System.NotSupportedException

> ID：12105696
> 
> 赞同：0
> 
> 时间：2012-08-24T08:26:31.023
> 
> 标签：c#, tripledes, notsupportedexception, cryptostream

解密文件的代码非常简单（三重DES加密）：

```
 FileStream fin = new FileStream(FilePath, FileMode.Open, FileAccess.Read);
        TripleDES tdes = new TripleDESCryptoServiceProvider();
        CryptoStream cs = new CryptoStream(fin, tdes.CreateDecryptor(key, iv),CryptoStreamMode.Read); //<---- Exceptions 
```

它不起作用。'cs' 无效，无法从中读取。创建 CryptoStream 时有一些例外：

```
Length = 'cs.Length' threw an exception of type 'System.NotSupportedException'
base {System.SystemException} = {"Stream does not support seeking."} 
```

为什么我无法创建加密流并从中读取以及如何解决此问题？

[添加]

感谢您的回复，现在对我来说更清楚了。但是 - 仍然无法从“cs”中读取。

加密：

```
FileStream fout = new FileStream(FilePath, FileMode.OpenOrCreate, FileAccess.Write);
TripleDES tdes = new TripleDESCryptoServiceProvider();
CryptoStream cs = new CryptoStream(fout, tdes.CreateEncryptor(key, iv), CryptoStreamMode.Write);

byte[] d = Encoding.ASCII.GetBytes(Data);
cs.Write(d, 0, d.Length);
cs.WriteByte(0);

cs.Close();
fout.Close(); 
```

在其他地方定义了 iv 和 key。并且，解密 - 整个方法：

```
 FileStream fin = new FileStream(FilePath, FileMode.Open, FileAccess.Read);
    TripleDES tdes = new TripleDESCryptoServiceProvider();
    CryptoStream cs = new CryptoStream(fin, tdes.CreateDecryptor(key, iv),CryptoStreamMode.Read);

    StringBuilder SB = new StringBuilder();
    int ch;
    for (int i = 0; i < fin.Length; i++)
    {
     ch = cs.ReadByte(); //Exception - CryptographicException: Bad data
     if (ch == 0)
     break;
     SB.Append(Convert.ToChar(ch));
    }
  cs.Close();
  fin.Close(); 
```

如您所见，与加密代码中的密钥和 iv 相同。但是仍然无法从“cs”流中读取 - 抛出异常。你怎么看 - 这里有什么问题？

这是我的钥匙，我用过：

```
public static byte[] key = { 21, 10, 64, 10, 100, 40, 200, 4,
                    21, 54, 65, 246, 5, 62, 1, 54,
                    54, 6, 8, 9, 65, 4, 65, 9};

    private static byte[] iv = { 0, 0, 0, 0, 0, 0, 0, 0 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:41:15.140

在我看来，您正在查看`sc.Length`专用于检查变量的视觉工作室工具中的属性，并且您在那里遇到异常。`Length`如果是这样，请忽略它们，如果您在代码中使用它们将是相关的。流不支持需要了解内部所有数据的功能是很正常的。

编辑

首先，您假设加密文件的长度等于解密数据的长度。我想这可能是真的，但我对此表示怀疑。

尝试：

```
var textReader = new StreamReader(cs);// you might need to specify encoding 
var text = textReader.ReadToEnd(); 
```

请注意，这会将整个文件读入内存，这对于大文件来说将是一个问题。

如果我要编写这段代码，我会用它`StreamWritter`来写入`CryptoStream`和`StreamReader`读取它的代码是非常困难的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:41:19.027

您的代码在我的机器上没有错误（VS2010、.NET 4、Windows）。您在哪个客户端配置文件/平台上运行它？该错误表明您的 FileStream 是不支持查找的类型，是正常的 .NET FileStream 吗？

# ios - 未找到“GPUImage.h”

> ID：12105698
> 
> 赞同：13
> 
> 时间：2012-08-24T08:26:39.337
> 
> 标签：ios, ipad, frameworks, header, gpuimage

我正在尝试`GPUImage`在一个项目中进行设置，但我无法找到出现错误的原因：“GPUImage.h”未找到。我已经添加了框架，设置了目标依赖项，将标题搜索路径添加为：框架，并添加了其他链接器标志`-ObjC`。仍然没有运气。我在这里包含了我的超级简单的测试项目，如果有人想看一下，请在[下面链接。](http://owolf.net/uploads/StackOverflow/GPUITest.zip)

我知道这必须记录在案并且是基本的，但我在 GitHub 上进行了搜索，但没有找到对这个特定问题的参考。

谢谢阅读。

[owolf.net/uploads/StackOverflow/GPUITest.zip](http://owolf.net/uploads/StackOverflow/GPUITest.zip)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T12:13:07.620

您的路径必须相对于相对于项目文件的实际目录位置。如果你把它改成这样：

```
GPUITest3/BradLarson-GPUImage-f67cbd9/framework/** 
```

那么它会工作得很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-08T09:50:06.037

来自 github 自述文件（步骤 1 ~ 3）：

1.  首先将 GPUImage.xcodeproj 文件拖到应用程序的 Xcode 项目中，以将框架嵌入到项目中。

2.  转到应用程序的目标并将 GPUImage 添加为目标依赖项。

3.  您需要将 libGPUImage.a 库从 GPUImage 框架的 Products 文件夹拖到应用程序目标中的 Link Binary With Libraries 构建阶段。

4.  如果您遇到以下错误

    ```
    “GPUImage.h” not found 
    ```

    那么直接的方法是将目录添加到您的标题搜索路径中：

    ```
    PathToGpuFramework/frameworksource
    PathToGpuFramework/frameworksource/iOS 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-27T15:27:29.297

我在这个问题上花了两个多小时，阅读了网上几乎所有的答案，找到了最好的解决方案。

1.将 GPUImage 文件夹复制到您自己的项目文件夹中。此外，将“GPUImage.xcodeproj”拖放到 Xcode 中的项目中。

2.在Xcode里面，在选择“Search header paths”，回车/回车，输入$(PROJECT_DIR)，回车/回车，然后双击它，将“非递归”改为“递归”。

PS - $(PROJECT_DIR) 命令将自动填充 GPUImage 头文件的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T16:04:14.827

出于某种原因，我永远无法使用搜索标题路径进行这项工作。

我的解决方案：在 Prefix-pch （或任何你想导入它的地方，但 Prefix-pch 最简单），#import "framework/Source/GPUImage.h" - 也许这是你应该做的，也许不是。我真的不知道，但说明只是使用 #import "GPUImage.h"

另请注意，如果您按照自述文件中的说明进行操作，并且只是将 GPUImage 框架拖到您的项目中，那么您只是在创建一个参考。该库仍将位于您的下载文件夹或您解压缩它的任何位置。这对我不起作用，因为我所有的项目都在 Dropbox 中用于云备份并在多台机器上使用。方向的方式可能是某些人喜欢这样做的方式。据我所知，这甚至可能是一个最佳实践，但我喜欢让每个项目都是独立的。我的解决方案是将从 github 下载的 zip 文件拖到我的项目文件夹中并在那里解压缩。然后将 GPUImage 项目文件拖到 xcode 中的项目中。

希望这可以帮助。

# ruby-on-rails - 在 Rails 应用程序中难以显示字符串

> ID：12105701
> 
> 赞同：0
> 
> 时间：2012-08-24T08:26:51.127
> 
> 标签：ruby-on-rails

我正在使用一个简单的 Rails 应用程序来读取文本文件并在网页上显示信息。html代码是这样的

```
 <td><%= application.server %></td> 
```

我正在使用 mysql2 并且列服务器是文本类型。（不是字符串）当我检查数据库时，其中的数据格式为“apachetra-137.vm.micronet.net”，但在 HTML 页面上，我只得到“micronet”字符串！！为什么它只返回字符串的一部分而不是全部，因为它在数据库中是完整存储的？

# .net - Clipboard.SetText 调用延迟 5 秒

> ID：12105702
> 
> 赞同：1
> 
> 时间：2012-08-24T08:26:56.687
> 
> 标签：.net, vb6, integration, clipboard, legacy

我有来自遗留系统的简单调用，我非常简单的 .NET win 应用程序调用

```
Clipboard.SetText("small data portion") 
```

此呼叫持续 5 秒。下一个 SetText 调用工作正常。

最重要的（恕我直言）一段调用者代码（VB6）：

```
SAAttr.nLength = Len(MySAAttr)
SAAttr.bInheritHandle = 1
SAAttr.lpSecurityDescriptor = 0

CreatePipe StdOutR, StdOutW, SAAttr, 0&
SetHandleInformation StdOutR, HANDLE_FLAG_INHERIT, 0&
CreatePipe StdInR, StdInW, SAAttr, 0&
SetHandleInformation StdInW, HANDLE_FLAG_INHERIT, 0&

start.cb = Len(start)
start.hStdOutput = StdOutW
start.hStdError = StdOutW
start.hStdInput = StdInR
start.dwFlags = STARTF_USESTDHANDLES
ret = CreateProcess(0&, cmdline, 0&, 0&, 1&, NORMAL_PRIORITY_CLASS + _    
      CREATE_NO_WINDOW, 0&, 0&, start, proc)

ret = WaitForSingleObject(proc.hProcess, pTimeout)
CloseHandle StdOutW 
```

2个问题：

*   剪贴板延迟的原因是什么？

*   如何解决它（但**必须**阻止调用进程 - 来自非阻塞调用的调用工作正常）？

示例代码：

```
Dim start1 As DateTime = Now
Clipboard.SetText("simple data")
Dim start2 As DateTime = Now
Clipboard.SetText("simple data")
Dim start3 As DateTime = Now
Clipboard.SetText("simple data")
MessageBox.Show( (start2 - start1).ToString() & vbCrLf & _
   (start3 - start2).ToString() & vbCrLf & _
   (Now - start3).ToString() & vbCrLf ) 
```

结果：

00:00:05.0130000

00:00:00

00:00:00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-27T19:12:55.417

多年来，当 Outlook 和/或 Word 运行时，使用剪贴板将数据传输到 Excel 时，我在使用 VB6 时遇到了同样的问题。

问题出在Office；您需要禁用从剪贴板**复制多个项目**以加快速度。

[https://support.microsoft.com/en-ca/help/2817672/macro-takes-longer-than-expected-to-execute-many-individual-copy-and-p](https://support.microsoft.com/en-ca/help/2817672/macro-takes-longer-than-expected-to-execute-many-individual-copy-and-p)

希望这有帮助。

# javascript - JQuery 不能通过 .append() 或 .HTML() 附加 HTML

> ID：12105706
> 
> 赞同：0
> 
> 时间：2012-08-24T08:27:13.457
> 
> 标签：javascript, jquery, html

我似乎无法将 HTML 附加到 div 标签中。例如，如果我这样做：

```
$(".someDiv").dblclick(function(){
         alert("here");
         $(this).html("<b>hello!</b>");

    }); 
```

或者

```
$(".someDiv").dblclick(function(){
         alert("here");
         $(this).append("<b>hello!</b>");

    }); 
```

但是，如果我排除任何 HTML 标签，该功能就可以正常工作。我在网上搜索了一下，似乎没有人遇到这个问题……我正在使用 Chrome。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:28:47.643

你只是把你的右引号放在错误的地方。

```
$(this).append("<b>hello!</b>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:47:03.727

没有意识到我把它放到了一个 XHTML 文件中。上面的代码在 XHTML 文件中不起作用。

# python - 如何更改 DateField 格式表示

> ID：12105709
> 
> 赞同：0
> 
> 时间：2012-08-24T08:27:18.973
> 
> 标签：python, django

我在模型 DateField 中有一个字段，所以当我在网页上呈现它时，它会显示

```
12-30-2012 
```

我需要

```
30.12.2012 
```

我尝试使用内部模板

```
{{ item.pub_date.strftime("%d.%m.%Y") }} 
```

但我收到并解析错误。在控制台中它工作正常。然后我尝试在模型中制作一种新方法

```
get_pub_date(self):
    self.pub_date.strftime("%d.%m.%Y") 
```

当我在 tempalte 中调用此方法时，我收到相同的模板错误解析

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:36:08.660

使用[日期模板过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)：

```
{{ item.pub_date|date:"d.m.Y" }} 
```

另请注意：

> 不带格式字符串使用时：

```
{{ value|date }} 
```

> ...将使用 DATE_FORMAT 设置中定义的格式化字符串，而不应用任何本地化。

# ruby-on-rails - Rails：使用时从另一个模型访问一个模型

> ID：12105710
> 
> 赞同：1
> 
> 时间：2012-08-24T08:27:21.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model, cron

目前我在我的 schedule.rb 中有这个：

```
every 1.minutes do
    runner "Cronjob.cronjob"
end
set :output, File.join(path, 'log', 'cron.log') 
```

在我的 Cronjob 模型中：

```
class Cronjob
  def self.cronjob
    events=Event.find :all
  end
end 
```

我不希望有一张桌子陪这个模型，因此缺乏`< ActiveRecord::Base`

但是有人告诉我：

```
Could not find table 'events' (ActiveRecord::StatementInvalid) 
```

这是由于缺少 < ActiveRecord::Base 还是因为这是一项 cron 作业还是其他原因，例如与类和实例方法有关？

# javascript - 单击 3 次后禁用按钮

> ID：12105714
> 
> 赞同：0
> 
> 时间：2012-08-24T08:27:42.543
> 
> 标签：javascript, jquery

我有一个表单，带有一个名为添加行的按钮。我想在用户点击它三次后禁用这个按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:29:57.987

您可以在按钮上设置一个点击计数器，但是看到它被称为“添加行”，我想您可能只能计算行数，并确定是否应该以这种方式禁用它。

```
bool disabled = true;
$('#add-rows').prop('disabled', disabled); 
```

替换`true`为您最喜欢的计算行数的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:33:02.087

从谷歌[三次点击事件](http://css-tricks.com/snippets/jquery/triple-click-event/)的最佳答案：

```
$.event.special.tripleclick = {

    setup: function(data, namespaces) {
        var elem = this, $elem = jQuery(elem);
        $elem.bind('click', jQuery.event.special.tripleclick.handler);
    },

    teardown: function(namespaces) {
        var elem = this, $elem = jQuery(elem);
        $elem.unbind('click', jQuery.event.special.tripleclick.handler)
    },

    handler: function(event) {
        var elem = this, $elem = jQuery(elem), clicks = $elem.data('clicks') || 0;
        clicks += 1;
        if ( clicks === 3 ) {
            clicks = 0;

            // set event type to "tripleclick"
            event.type = "tripleclick";

            // let jQuery handle the triggering of "tripleclick" event handlers
            jQuery.event.handle.apply(this, arguments)  
        }
        $elem.data('clicks', clicks);
    }

}; 
```

像这样使用：

```
$("#mybutton").bind("tripleclick", function() {
   $(this).attr("disabled", "disabled");
} 
```

请注意，您可能想要使用`on`而不是`bind`，请参阅[`on` 和 `live` 或 `bind` 有什么区别？](https://stackoverflow.com/questions/8065305/whats-the-difference-between-on-and-live-or-bind)

# jquery - 使用 svg 而不是 jpg/png 时，加载 gif 不会消失

> ID：12105715
> 
> 赞同：0
> 
> 时间：2012-08-24T08:27:44.747
> 
> 标签：jquery, svg, prettyphoto

我只是尝试将 svg 图形（现在使用 img 标签来实现跨浏览器兼容性，而不是 gzipped 或其他东西）添加到我的漂亮照片画廊中。我注意到的第一件事：它有效。图片显示。耶！几秒钟后：D'uh，加载 gif 不再消失。嗯。

...所以，长话短说，这是我的问题。有谁知道在实际加载 svg 文件后如何让 loading-gif 消失？它适用于 png/jpg。

为了更清楚我的意思，只需查看我的测试环境并向下滚动到工作表部分（一行，3 张）： http: [//nie-wieder.net/sites/phil/pride/](http://nie-wieder.net/sites/phil/pride/)

如果你能帮助我解决这个问题，那就太好了。

问候，多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:41:03.483

可能是您的 png/jpg 不透明，因此当您将它们放在加载微调器上时，它似乎消失了。但是现在 SVG 完全是矢量并且它是透明的……所以你的微调器仍然在那里。我建议您编写一个脚本以在加载完成时删除您的微调器（div 背景）。

```
jQuery('div.view.view-first img').bind('load', function(){

   jQuery(this).parent('div.view.view-first').css('background','');

}); 
```

像这样的东西

# ms-word - 如何访问嵌套在另一个表中的范围内的表？

> ID：12105718
> 
> 赞同：0
> 
> 时间：2012-08-24T08:28:04.310
> 
> 标签：ms-word, vsto, ms-office

为了访问一个范围内的单个表（比如 rngOuter），我使用了： tblOuter = rngOuter.Tables[1]; 在我将嵌套表放置在该外部范围的表内的范围内（例如 rngInner）后，我发现： tblInner = rngInner.Tables[1]; 不工作。rngInner.Tables[1] 引用 tblOuter，而不是表本身。其实rngInner的Tables集合只有一个元素，那就是tblOuter。为了访问 tblInner，我必须访问 tblOuter.Range.Tables[1]。

有谁知道我是否犯了错误，或者就是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:07:36.770

AFAIK“就是这样”，但是您可以使用 Cell.Tables 而不是 Cell.Range.Tables 来查找包含表格的单元格。例如，在当前选择中查找包含您可以使用的表格的单元格

```
Sub listInnerTables()
Dim c As Cell
Dim r As Range
Dim t As Table
Dim tcount As Long
Set r = Selection.Range
If r.Tables.Count > 0 Then
  tcount = 0
  For Each t In r.Tables
    tcount = tcount + 1
    For Each c In t.Range.Cells
      If c.Range.InRange(r) Then
        If c.Tables.Count > 0 Then
          Debug.Print "Table: " & CStr(tcount) & _
            vbTab & " Row: " & CStr(c.RowIndex) & _
            vbTab & " Col: " & CStr(c.ColumnIndex) & _
            vbTab & " Table count: " & CStr(c.Tables.Count)
        End If
      End If
    Next
  Next
End If
Set r = Nothing
End Sub 
```

# css - 重置由父元素为模态设置使用的 CSS 属性

> ID：12105724
> 
> 赞同：0
> 
> 时间：2012-08-24T08:28:54.117
> 
> 标签：css, twitter-bootstrap

我使用 Twitter Bootstrap 的`alert`功能来根据某些状态对 HTML 表格进行注释。在每个表格单元格中，还有一个模态窗口。模态窗口继承了`<td>`元素设置的 CSS 属性，使用`alert*`特性：

```
<td class="alert alert-block alert-success">
  <a>Modal Link</a>
  <div>Modal Content<div>
</td> 
```

因此，当模态显示时，它实际上以`alert`由 parent 设置的 type 设置的颜色显示`td`。无论如何要重置 modal 的 CSS 属性`div`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:56:50.953

您可以编写一个样式`<div>`来覆盖所有为 `.alert`. 但是，我通常将模态框`<div>`放在`<table>`.

```
<table>
  ...
  <td class="alert alert-block alert-success">
    <a>Modal Link</a>
  </td>
  ...
</table>
<div>Modal Content<div> 
```

模态`<div>`不会显示在里面，`<td>`所以把它放在那里没有意义。

# html - 网页设计：可导航的大型 Flash 背景

> ID：12105725
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:28:59.390
> 
> 标签：html, css, flash, background, flashdevelop

我正在做一个项目，我想制作一个大背景，一次只显示一部分，但是当用户单击菜单项时，屏幕会滚动到大背景的不同部分。第二个区域会有另一个菜单，可以将背景移动到其他地方。我怎么做？

实际上我必须创建一个类似于这个的网站

```
http://artofflightmovie.com/ 
```

我很困惑

1）设计这样一个网站的要求是什么。（javascript？闪存？？？？）

2）我们通常如何命名此类网站？

3）我怎样才能找到这样的示例网站（我应该在谷歌上搜索什么）

如果您能解释一下如何设计这样的网站（只是基础知识），我将非常感谢您。

每一个，任何和每一种帮助将不胜感激。

-提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:34:40.047

1) 正如 tuxtimo 所说，相当肯定，绝对没有闪光灯。所以，是的，JavaScript/jQuery 足以胜任这项工作（如果不是更好的话）。可能有很多，但是，我以前见过这个：

[http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)该站点本身是您可能正在寻找的一个非常基本的示例。它有文档 - [https://github.com/JoelBesada/scrollpath](https://github.com/JoelBesada/scrollpath)。认为这是一个很好的起点。

另请查看[多向滚动站点](https://stackoverflow.com/questions/4633909/multi-directional-scrolling-site)- [http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)也可能是您需要的。

我还发现了另一个 - [http://janne.aukia.com/zoomooz/](http://janne.aukia.com/zoomooz/)，这个有一个演示，它几乎可以按照你的意愿进行操作：http: [//janne.aukia.com/zoomooz/examples/svgtree /index.html](http://janne.aukia.com/zoomooz/examples/svgtree/index.html)

2/3）我不确定，但是一个/单个[多向]滚动页面似乎对我产生了一些结果，试一试:)

# ruby - 比较计数（）没有给出正确的结果

> ID：12105726
> 
> 赞同：1
> 
> 时间：2012-08-24T08:29:26.033
> 
> 标签：ruby, comparison

我试图通过与二维数组中的对象进行比较来计算数组中的项目，但结果不正确，我不明白为什么。我能看到的唯一原因是它比较地址而不是值。

```
#@rules[0][0] contains 1
#@items contains [1,1]
@items = [1,1]
@rules = Array.new() {Array.new}
@rules.push([])
@rules[0].push(1)
actualFreq = @items.count(@rules[0][0])
puts actualFreq # should be 2 but outcome is 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:05:29.817

我使用以下方法解决了这个问题：

```
num = @rules[0][0]
actualFreq = @items.count(num[0])
puts actualFreq 
```

# android - 在android4.0中按顺序执行异步任务

> ID：12105730
> 
> 赞同：7
> 
> 时间：2012-08-24T08:29:47.697
> 
> 标签：android, concurrency, android-asynctask

我已经实现了 2 个异步任务，我使用的是 android4.0。其中一个异步任务是连续执行的，第二个是根据要求执行的（可能是多次）。例如。

```
class AsynTask1 exetends AsyncTask<Void, Bitmap, Void>{
    protected Void doInBackground(Void... params) {
        while(true){
            publishProgress(bmp);
        }
    }
}

class AsynTask2 extends AsyncTask<String, Void,Void>{
    protected Void doInBackground(String... params){
        System.out.println(params[0])
    }
} 
```

在活动课

```
class MainActivity extends Activity{
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new AsynTask1().execute();

        int i=0;
        while(i<100)
        {
            if(i%2==0)
            new AsynTask2().execute("no is even"+i);
            i++
        }
    }
} 
```

在上述情况下，不执行 AsynTask2。

如果尝试使用 executeOnExecutor(AsyncTask.THREAD_POOL_Executor,params)，那么两个 asyntask 都被执行并且我从 AsynTask2 获取打印消息，但这些消息不按顺序排列（如 0 2 6 4 10 8 12 14 ....）。

有什么方法可以连续执行 AsynTask1 并按顺序执行 AsynTask2 以防止顺序（如 0 2 4 6 8 10 12 14 ....）。

谢谢和问候迷你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:38:55.587

将[SERIAL_EXECUTOR](http://developer.android.com/reference/android/os/AsyncTask.html#SERIAL_EXECUTOR)用于 Asynctask2

```
 new AsynTask2().executeOnExecutor(AsyncTask.SERIAL_EXECUTOR ,"no is even"+i) 
```

编辑：用于 Asynctask1 ，因此不使用相同的执行器

```
 new AsynTask1().executeOnExecutor(AsyncTask.THREAD_POOL_Executor,params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:37:00.423

尝试使用回调。在 AsyncTask 类中定义接口并在主类中实现它们。使用 AsyncTask2 的 onPostExecute 上的回调来启动下一个 AsyncTask2。你会保证订单。

```
 class AsyncTask2 extends AsyncTask<String, Void,Boolean<{
        //Your code. doInBackground must now return a boolean.
        protected Void onPostExecute(final Boolean success){
            myCallback listener = (myCallback) parentActivity;
            listener.call();
        }

        public Interface myCallback{
            void call();
        }
 } 
```

然后在您的主要活动中实现 myCallback。

[编辑]

这是您可以执行的操作的示例。

```
Class MainActivity extends Activity implements myCallback{
    //Your code
    public void call(){
       new AsyncTask2().execute("no is even" + i);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:35:23.337

1.  您不应该将 AsyncTask 用于长时间运行的线程（实现 AsyncTask1 的方式）。请参阅文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。只需为 AsyncTask1 正在做的事情创建一个单独的线程。

2.  由于您需要在 AsyncTask2 中执行的操作需要串行执行，因此可以通过创建大小为 1 的 ThreadPool 来完成。

    ```
    // Creating ThreadPool
    ExecutorService service = Executors.newFixedThreadPool(1);

    // Submitting task
    service.execute(task);

    // Shutting down the thread pool when not required.
    service.shutdown(); 
    ```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-24T08:37:55.557

```
 int i=0;
    while(i<100)
    {
      new AsynTask1().execute();
        if(i%2==0)
      {
        new AsynTask2().execute("no is even"+i);
       }
        i++
    } 
```

# migration - 将代码从 OpenLaszlo 3.3 迁移到 5.0：TypeError #1007 在非构造函数上尝试实例化。

> ID：12105735
> 
> 赞同：2
> 
> 时间：2012-08-24T08:29:57.807
> 
> 标签：migration, openlaszlo, lzx

我最近将部分代码从 OL 3.3 移植到 OL 5.0。我认为一切都会正常，但是当我尝试使用 ant 脚本运行它时，我得到了这个错误。

```
 [echo] C:\Program Files\OpenLaszlo Server 5.0.x\Server\lps-5.0.x/WEB-INF/lps/server/bin/lzc.bat
 [exec] Compiling: C:\Workspace\application\client\src\TestClient.lzx to TestClient.swf10.swf
 [exec] compiler output is Loading configuration file C:\Program Files\OpenLaszlo Server 5.0.x\Server\lps-5.0.x\WEB-INF\frameworks\flex-config.xml
 [exec] C:\Documents and Settings\310773\Local Settings\Temp\lzswf9\Workspace\application\client\src\build\TestClient\app.swf (289808 bytes) 
```

所以，我拿了这个文件夹，直接在 Laszlo 中编译了它。它没有显示任何错误，但是当 swf 即将加载主页时，我收到此错误。知道为什么吗？

```
TypeError: Error #1007: Instantiation attempted on a non-constructor.
    at $lzc$class__mvz/$mvx()
    at LzNode/__LZresolveReferences()
    at LzNode/__LZcallInit()
    at LzCanvas/__LZcallInit()
    at LzCanvas/__LZinstantiationDone()
    at LzInstantiatorService/makeSomeViews()
    at LzInstantiatorService/checkQ()
    at Function/http://adobe.com/AS3/2006/builtin::call()
    at LzEvent/sendEvent()
    at LzIdleKernel$/__update() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:54:03.487

这是您尝试实例化未定义的类时收到的错误消息。这是一个例子：

```
<canvas>

  <class name="myclass">
    <handler name="oninit">
      // Instantiate a class which is not defined
      var x = new lz.missingclass();
    </handler>
  </class>

  <myclass />

</canvas> 
```

检查通过脚本实例化的类是否缺少 <includes>。您也可以随时查看[Adob​​oe Flash 运行时错误](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/runtimeErrors.html)列表，有时此处包含有用的信息。

**编辑：添加问题的解决方案**
此评论指出了问题：

> 我发现这条线导致了问题。`<attribute name="dp" value="$once{new lz.Datapointer()}" />`. 知道为什么吗？

如果您查看 5.0 的 OpenLaszlo 参考，您将看到类名（在类浏览器的左侧）使用不同的大小写；一些类使用驼峰式大小写（lz.Browser、lz.DataElement），其他类使用全部小写（lz.view、lz.datapointer）。在您的情况下，您应该使用 lz.datapointer 而不是 lz.Datapointer。

因此，此代码将毫无问题地编译和运行：

```
<canvas>

  <class name="my_class" extends="node">
      <attribute name="dp" value="$once{new lz.datapointer()}" />
  </class>

  <my_class oninit="Debug.inspect(this.dp)" />

</canvas> 
```

测试类的正确名称的一个好方法是在 DHTML 运行时的控制台中使用 JavaScript，您可以在其中为 lz 自动完成。？？？类名：

![在浏览器 JavaScript 控制台中自动完成 LZX 类名](../Images/ce5bb0b1892ebf28ce82262e2eb5691c.png)

**在 OpenLaszlo 中调试 SWF #1007 错误**
如果您在 SWF 运行时遇到 #1007 错误，我会在禁用调试器并打开 JavaScript 错误控制台的情况下为 DHTML 编译应用程序。尝试这个：

1.  将带有 $once{} 约束的行更改为

    `<attribute name="dp" value="$once{new lz.Datapointer()}" />`

2.  使用 DHTML 运行时和 debug=false 在 Chrome 中编译应用程序。您应该在 JavaScript 控制台中看到以下错误：

![JavaScript 控制台中未定义类的错误](../Images/9feec2b90d3f02eb3ecec009f9c0fe56.png)

3.  单击右侧的*error-1007.lzx:3*，您将看到生成的 JavaScript 代码，其中包含导致错误的行

![OpenLaszlo 编译器生成的代码中的 JavaScript 错误](../Images/cffb9317da5c049d53fd2523f8859414.png)

此行失败：

```
this.setAttribute("dp",new (lz.Datapointer)()) 
```

您甚至可以通过在控制台中输入*new (lz.Datapointer)来重现错误。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:38:04.323

就像一个信息点：类名的大小写在 4.0 中被“规范化”，因此实现标记的类的大小写与该标记相同。请参阅[映射类和标记名称](http://labs.openlaszlo.org/trunk-nightly/docs/developers/class-inheritance.html#d0e86492)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:29:30.807

这是问题的示例和解决方法：

1）问题：

这是演示该问题的简短 OpenLaszlo 应用程序的代码：

```
<canvas width="1000" height="584">

  <view name="myContainer" width="500" height="500">

    <handler name="oninit">
      var objCB = new lz.combobox(this);
    </handler>

  </view>

</canvas> 
```

在此示例中，应用程序中没有 <combobox> 标记，因此编译器认为它不需要在应用程序中包含 OpenLaszlo <combobox> 类代码。因此，当我们尝试使用“var objCB = new lz.combobox(this);”行来实例化一个组合框时 编译器抛出以下错误：

> 错误@test1007error.lzx≈5：TypeError：错误＃1007：在非构造函数上尝试实例化。

2）解决方法：

该问题的解决方案是在您的应用程序中为 <combobox> 添加一个包含：

```
<canvas width="1000" height="584">

  <include href="lz/combobox.lzx" />

  <view name="myContainer" width="500" height="500">

    <handler name="oninit">
      var objCB = new lz.combobox(this);
    </handler>

  </view>

</canvas> 
```

这次没有抛出错误，当我们运行它时，我们看到组合框出现在应用程序的左上角。

# objective-c - 将文本从 plist 解析为 NSAttributedString

> ID：12105736
> 
> 赞同：4
> 
> 时间：2012-08-24T08:30:07.873
> 
> 标签：objective-c, ios, plist, markdown, nsattributedstring

我正在从 plist 中加载文本并将其显示在我的应用程序中。理想情况下，我希望能够指定更复杂的格式，例如斜体、粗体和上标文本，并将其显示在自定义标签中，例如[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)。

是否有任何可用的库可以将给定格式的字符串（最好是简单的文本格式，如 Markdown 或 Textile）解析为 NSAttributedString？我知道解决方案可用于解析 RTF 和 HTML，但这对我的需要来说是多余的——而且我希望文本可以轻松地手写。

编辑：这是为 iOS/UIKit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:25:03.763

抓住了你的编辑。对于 iOS/UIKit，有一个名为 NSAttributedString+HTML 的项目，它试图模拟 OS X 上可用的功能。在 OS X 上，您只需使用一些小的 HTML 来格式化字符串，然后将其解析为 NSAttributedString（或对象，或网站，或文件等）。

我上面提到的项目试图在 iOS 上提供相同的扩展。我不知道为什么，在 iOS 的 6 个主要版本之后，它仍然缺乏如此丰富的工具，并且将所有重量都推到了 UIWebView 上（超过了 WebKit），但事实就是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:18:37.910

我刚刚向 MGBoxKit 添加了一个`NSString`轻量级[标记](https://github.com/sobri909/MGBoxKit)`NSAttributedString`解析器。它不是 Markdown 或 Textile，但它非常相似。到目前为止，它支持粗体、斜体、下划线、等宽和彩色文本。

MGMushParser类可以独立使用，并且相当容易扩展[。](https://github.com/sobri909/MGBoxKit/blob/master/MGBoxKit/MGMushParser.m)

```
NSString *markup = @"**bold**, //italics//, __underlining__, and `monospacing`, and {#0000FF|coloured text}";

UIFont *baseFont = [UIFont fontWithName:@"HelveticaNeue" size:18];
UIColor *textColor = UIColor.whiteColor;

myLabel.attributedString = [MGMushParser attributedStringFromMush:markup
                               font:baseFont color:textColor]; 
```

[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)也有一个类似的标记解析器。

# ruby-on-rails - 按最新评论帖子的顺序对帖子进行排序

> ID：12105738
> 
> 赞同：0
> 
> 时间：2012-08-24T08:30:14.637
> 
> 标签：ruby-on-rails, sorting

我有以下模型

邮政：

```
has_many :comments 
```

评论：

```
belongs_to :post 
```

和一个控制器`pages`，其中包含以下代码。

```
def home
    @posts = Post.includes(:comments)
    respond_to do |format|
        format.html
    end
end 
```

所以说如果我有 3 个帖子 P1、P2、P3；`home`最初在页面上以相同的顺序呈现。稍后，如果 P2 被评论并且我刷新页面，则顺序应该是 P2、P1、P3。因此，每当帖子被评论时，它都应该出现在顶部。所有的帖子都应该按照他们被评论的时间降序排列。我怎样才能做到这一点？

我的尝试-我尝试的效率非常低，绝对不是一个好习惯。我从评论中按降序获得唯一的 post_ids，并使用 post_ids 获取帖子。

我确信 rails 提供了最好的方法。帮助高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:52:06.213

尝试这个，

```
@posts = Post.includes(:comments).order("comments.created_at desc") 
```

# jquery - jquery remove() 函数导致跳转到页面顶部

> ID：12105741
> 
> 赞同：1
> 
> 时间：2012-08-24T08:30:20.263
> 
> 标签：jquery

```
$("#txt_catId").change(function(){

    var catId = $('#txt_catId').val();

    $(".news-row").remove();
    $("#txt_news_id").remove();

    $.ajax({
          type: "POST",
          url: 'urlExample',
          data : {cat_id : catId},
          success: function(data) {
            $('#txt_catId').parent().append(data);
          },

          statusCode: {
            404: function() {
              alert("page not found");
            }
          }

        });

}); 
```

这段代码的作用是：当用户选择一个类别时，该类别的新闻列表将显示为一个选择框。但重点是每次我选择一个类别时，它总是跳到页面顶部。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:34:03.583

听起来您正在使用链接`href="#"`作为选择类别的手段。激活链接会将您带到页面顶部，因为这就是空书签的含义。

在事件处理程序中使用`preventDefault`以阻止链接被激活：

```
$("#txt_catId").change(function(e){
  e.preventDefault();
  ... 
```

# ruby-on-rails - 似乎无法“使用” RVM Ruby 安装

> ID：12105744
> 
> 赞同：1
> 
> 时间：2012-08-24T08:30:33.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我尝试调用 rails 时出现此错误，`rails -v`或者`rails -c`：

```
/usr/lib/ruby/site_ruby/1.8/rubygems.rb:779:in `report_activate_error': Could not find RubyGem rails (>= 0) (Gem::LoadError)
    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:214:in `activate'
    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:1082:in `gem'
    from /usr/bin/rails:18 
```

我安装了 RVM，用它来安装 Ruby 1.9.3，然后切换到它`rvm use 1.9.3 --default`。

当我`ruby -v`：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

我也`gem install rails --no-rdoc --no-ri`检查了... `ls ~/ruby/gems/gems/`：

```
actionmailer-3.2.8/    journey-1.0.4/     rake-0.9.2.2/
actionpack-3.2.8/      json-1.7.5/        rdoc-3.12/
activemodel-3.2.8/     mail-2.4.4/        rubygems-bundler-1.0.7/
activerecord-3.2.8/    mime-types-1.19/   rvm-1.11.3.5/
activeresource-3.2.8/  multi_json-1.3.6/  sprockets-2.1.3/
activesupport-3.2.8/   polyglot-0.3.3/    sprockets-2.4.5/
arel-3.0.2/            rack-1.4.1/        thor-0.16.0/
builder-3.0.0/         rack-cache-1.2/    tilt-1.3.3/
bundler-1.1.5/         rack-ssl-1.3.2/    treetop-1.4.10/
erubis-2.7.0/          rack-test-0.6.1/   tzinfo-0.3.33/
hike-1.2.1/            rails-3.2.8/
i18n-0.6.0/            railties-3.2.8/ 
```

如果我`echo $GEM_PATH`：

```
/home/flackend/.rvm/gems/ruby-1.9.3-p194:/home/flackend/.rvm/gems/ruby-1.9.3-p194@global 
```

`echo $PATH`：

```
/home/flackend/.rvm/gems/ruby-1.9.3-p194/bin:/home/flackend/.rvm/gems/ruby-1.9.3-p194@global/bin:/home/flackend/.rvm/rubies/ruby-1.9.3-p194/bin:/home/flackend/.rvm/bin:/usr/local/jdk/bin:/home/flackend/perl5/bin:/usr/kerberos/bin:/usr/lib/courier-imap/bin:/usr/lib64/ccache:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/usr/local/bin:/usr/X11R6/bin:/home/flackend/.rvm/bin:/home/flackend/bin 
```

`cat ~/.bashrc`：

```
# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
    . /etc/bashrc
fi

# User specific aliases and functions

PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

`cat ~/.bash_profile`：

```
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin

export PATH

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

因此，某处有一条路径可以查看系统 Ruby 安装。有任何想法吗？谢谢！

* * *

## 编辑

好的，另外，如果我切换回系统 Ruby `rvm use system`、 和`rails -v`，我会得到：

```
Rails 2.3.8 
```

所以我完全不知道这个错误表示什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:59:28.923

您尚未完成 rvm 安装。您需要通过 .bashrc 中的命令在 /usr/bin 之前添加 ~/.rvm bin 路径：

```
[[ -s "/Users/pftg/.rvm/scripts/rvm" ]] && source "/Users/pftg/.rvm/scripts/rvm". 
```

要测试只需检查 $PATH 环境。应该类似于：

```
/.../.rvm/gems/ruby-1.9.3-p125@global/bin:/.../.rvm/rubies/ruby-1.9.3-p125/bin:/.../.rvm/bin:/usr/local/bin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:18:12.727

如果您安装了所有 ruby​​ 以及 rails 方法，您可能需要通过执行以下操作来选择“Run command as login shell”复选框，

1.  打开终端
2.  转到编辑选项卡，然后从菜单项中选择配置文件首选项。
3.  应显示配置文件首选项窗口，然后选择标题和命令选项卡。
4.  然后选中复选框 Run command as a login shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T07:09:59.680

I just used RVM to create a "gemset", switched to it, and tried installing Rails again and it works now.

[https://rvm.io/gemsets/](https://rvm.io/gemsets/)

I'm not sure why that fixed it or why it wasn't working before. I like when things work, but I would rather have figured out why it wasn't working with the `@global` gemset.

Thanks for all your help!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T09:05:57.570

我也有上面描述的确切症状，并且在这个问题上停留了很长一段时间（ruby 环境和依赖项是一团糟）。我不能说我已经走出困境，但至少我现在选择了正确版本的 rails 并克服了这个错误。

我相信这里真正的问题实际上与 zlib 有关。将系统版本的 ruby​​（可能通过 yum/apt-get 安装）与其他项目所需的其他版本或 Ruby（通过 rvm 安装）分开似乎是一个关键组件。

如果您没有安装 zlib，或者 rvm 没有正确使用它，那么有时您会拿起系统 ruby​​/rails 并出现各种奇怪的错误。

如果您确实安装了 zlib（yum/apt-get install zlib），那么我发现的窍门是我必须特别告诉 rvm 在安装 ruby​​ 时使用哪个版本的 zlib **。**

rvm 安装 1.9.3 --with-zlib-dir=$rvm_path/usr

# batch-file - 无法暂停正在运行的批处理文件以在中间等待用户输入

> ID：12105745
> 
> 赞同：3
> 
> 时间：2012-08-24T08:30:34.617
> 
> 标签：batch-file, dos, prompt

我无法暂停正在运行的批处理文件以在中间询问用户输入。我尝试了类似`PAUSE`and`SET /P aaa="Press enter to exit"`和以下的命令，但**没有任何结果**。

```
@ECHO OFF

SET /p aaa="Press enter to exit"

ECHO you typed %aaa%

PAUSE 
```

我的批处理文件在内部调用另一个批处理来构建基线根目录下的所有 Visual Studio 项目。

其中一个项目构建失败，最后它将“1”作为*BUILD FAILED*返回到主批处理文件处理器。这会立即终止 MS DOS 控制台，而不是等待用户输入。

我无法看到带有最终结果的 MS DOS 控制台窗口。

有各种步骤可以查看最终结果（将执行输出写入文本文件`C:\CurrentApp\MyBuild>ABC.bat MyApp.New.BUILD > output.txt`），但**我想在 MS DOS 控制台屏幕本身中看到闪烁的光标等待任何用户输入键**。

我的批处理文件如下所示：

```
cd C:\CurrentApp\MyBuild

ABC.bat MyApp.New.BUILD 

SET /p aaa="Press enter key to exit"

PAUSE

@ECHO OFF

SET /p aaa="Press enter key to exit"

ECHO you typed %aaa%

PAUSE 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:21:32.913

您必须调用您的第二批：`call ABC.bat MyApp.New.BUILD`. 否则控制将传递给 ABC.bat 但永远不会返回，因此您`pause`永远不会被执行。您可能会将其视为 ABC.bat 覆盖您当前的批处理内容，然后自行执行。

# sql - 如何回滚隐式 SSMS 事务（最后带有 go 的语句）？

> ID：12105751
> 
> 赞同：5
> 
> 时间：2012-08-24T08:31:03.053
> 
> 标签：sql, sql-server, sql-server-2008, transactions, ssms

问题：
通常情况下，您可以撤消带有回滚的sql命令。

```
BEGIN TRY
  BEGIN TRANSACTION
  /* run all your SQL statements */
  COMMIT TRANSACTION
END TRY
BEGIN CATCH
  ROLLBACK TRANSACTION
END CATCH 
```

我现在的问题：
如果“一个”这样做了

```
UPDATE TABLE_X SET FIELD_X = 'bla'
GO 
```

在**SSMS**中（注意最后的 go）**并忘记指定 WHERE 子句**，是否有可能（以及如何）回滚 SSMS 在其中执行此命令的隐式事务（最后带有 go 的语句在事务中隐式执行） ?

注意：
我没有这样做，但我的一个同事几天前做了（没有去）。
我解除了他造成的损坏（幸运的是，我在他这样做之前 0.5 小时做了备份），但对于未来，知道这一点会很好，因为这也发生在我身上一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:34:47.220

不，你不能，不容易。从备份恢复是最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:39:23.997

看下面的链接，我想它会帮助你

[如何从表中恢复旧数据](https://stackoverflow.com/questions/2042208/how-to-recover-the-old-data-from-table/#answer-9107323)

谢谢阿伦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T09:43:53.183

`GO`不指定隐式事务的结束，而是批处理的结束。这就是为什么您将无法（不幸地）`ROLLBACK`在.`UPDATE``GO`

从[MSDN 页面](https://msdn.microsoft.com/en-us/library/ms188037(v=sql.100))上`GO`：

> GO 不是 Transact-SQL 语句；它是 sqlcmd 和 osql 实用程序以及 SQL Server Management Studio 代码编辑器识别的命令。
> 
> SQL Server 实用程序将 GO 解释为它们应该将当前批次的 Transact-SQL 语句发送到 SQL Server 实例的信号。当前批次的语句由自上次 GO 或自特别会话或脚本开始（如果这是第一个 GO）以来输入的所有语句组成。

如果您已指定，该`UPDATE`命令只会被视为隐式事务的开始`SET IMPLICIT_TRANSACTIONS ON;`（请参见[此处](https://msdn.microsoft.com/en-us/library/ms188317(v=sql.100))）。在这种情况下，许多命令（`CREATE`、`DELETE`等）将自动启动一个新的隐式事务，并且该事务在您发出 a或 a`UPDATE`之前不会结束。`ROLLBACK``COMMIT`

（有关 SQL Server 中事务和批处理之间的区别的更多信息，请参阅 ServerFault 上的这个问题：[SQL Server: Statements vs. Batches vs. Transactions vs. Connections](https://serverfault.com/questions/127578/sql-server-statements-vs-batches-vs-transactions-vs-connections)。）

# php - 多个where子句php

> ID：12105752
> 
> 赞同：0
> 
> 时间：2012-08-24T08:31:06.920
> 
> 标签：php, mysql, select

我想知道是否有人可以帮助我。以下代码将生成 type = bus 但不会仅生成已批准 = 1 的所有用户。如果有人能指出我的错误，我将不胜感激。搜索查询是由某人通过表单在文本框中输入一个词触发的，这部分工作正常，只有在配置文件中具有搜索词的用户才会出现，并且只有 type=bus 但已批准 = 1 的用户似乎没有效果，并且退货全部批准，我真的希望有人可以提供帮助。

```
$query = "select * from users where type='bus' and approved=1 and
name like \"%$trimmed%\"  
or profile_words like \"%$trimmed%\"  
or full_name like \"%$trimmed%\"  
or tag_line like \"%$trimmed%\"  
or referral like \"%$trimmed%\"  
or profession like \"%$trimmed%\"  
order by full_name"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:35:54.080

像这样分组你的条件，

```
$query = "
select *
from users 
where  type='bus' and 
       approved = 1 and
          (
             name like \"%$trimmed%\" or 
             profile_words like \"%$trimmed%\"  or 
             full_name like \"%$trimmed%\"   or 
             tag_line like \"%$trimmed%\"  or 
             referral like \"%$trimmed%\" or 
             profession like \"%$trimmed%\
          )
order by full_name"; 
```

我有一个建议给你，请使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MySQLI](http://php.net/manual/en/book.mysqli.php)**扩展来避免 SQL 注入。

PDO 示例，

```
<?php

$query = "
select *
from users 
where  type='bus' and 
       approved = 1 and
          (
             name like ? or 
             profile_words like ?  or 
             full_name like ?   or 
             tag_line like ?  or 
             referral like ? or 
             profession like ?
          )
order by full_name";

$name = '%' . $trimmed . '%';

$stmt = $dbh->prepare($query);
$stmt->bindParam(1, $name);
$stmt->bindParam(2, $name);
$stmt->bindParam(3, $name);
$stmt->bindParam(4, $name);
$stmt->bindParam(5, $name);
$stmt->bindParam(6, $name);

$stmt->execute();

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:35:43.770

```
$query = "select * from users where type='bus' and approved=1 and
(name like \"%$trimmed%\"  
or profile_words like \"%$trimmed%\"  
or full_name like \"%$trimmed%\"  
or tag_line like \"%$trimmed%\"  
or referral like \"%$trimmed%\"  
or profession like \"%$trimmed%\")  
order by full_name"; 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:37:14.300

我认为您的批准部分很好，但我认为问题可能出在`OR`. 尝试通过分隔`AND`和`OR`语句来放置括号，如下所示：

```
$query = "select * from users where type='bus' and approved=1 and
( name like \"%$trimmed%\"  
or profile_words like \"%$trimmed%\"  
or full_name like \"%$trimmed%\"  
or tag_line like \"%$trimmed%\"  
or referral like \"%$trimmed%\"  
or profession like \"%$trimmed%\" )  
order by full_name"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:40:28.973

将您的 where 运算符括起来。目前你正在

```
where (type='bus' and approved=1)
or .... [all the other operators] 
```

# java - 复杂的休眠预测

> ID：12105757
> 
> 赞同：5
> 
> 时间：2012-08-24T08:31:23.867
> 
> 标签：java, hibernate, criteria

我想问一下，我是否有可能创建超过一层深度的查询预测和标准？我有 2 个模型类：

```
@Entity  
@Table(name = "person")  
public class Person implements Serializable {
    @Id
    @GeneratedValue
    private int personID;
    private double valueDouble;
    private int valueInt;
    private String name;
    @OneToOne(cascade = {CascadeType.ALL}, orphanRemoval = true)
    @JoinColumn(name="wifeId")
    private Wife wife;
       /*   
        *  Setter Getter    
        */
}

@Entity 
@Table(name = "wife")  
public class Wife implements Serializable {

    @Id
    @GeneratedValue     
    @Column(name="wifeId")
    private int id;
    @Column(name="name")
    private String name;
    @Column(name="age")
    private int age;            
    /*
     *  Setter Getter
     */       
} 
```

**我的标准 API：**

```
ProjectionList projections = Projections.projectionList(); 
projections.add(Projections.property("this.personID"), "personID");
projections.add(Projections.property("this.wife"), "wife");
projections.add(Projections.property("this.wife.name"), "wife.name");

Criteria criteria = null; 
criteria = getHandlerSession().createCriteria(Person.class); 
criteria.createCriteria("wife", "wife", JoinType.LEFT.ordinal()); 
criterion = Restrictions.eq("wife.age", 19);  
criteria.add(criterion); 
criteria.setProjection(projections);
criteria.setResultTransformer(Transformers.aliasToBean(Person.class)); 
return criteria.list(); 
```

我希望，我可以查询 Person，具有指定的妻子财产条件，并指定返回结果集。所以我使用 Projections 来获取指定的返回结果集

我想要返回 personID、name(Person)、name(Wife)。我必须如何使用 API，我更喜欢使用 Hibernate Criteria API。

这一次，我使用上面的代码来获得我的预期结果，但它会抛出异常并显示错误消息： `Exception in thread "main" org.hibernate.QueryException: could not resolve property: wife.name of: maladzan.model.Person`，以及我`Restrictions.eq("wife.age", 19);`是否正确获取妻子年龄为 19 岁的人？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T06:30:20.713

AFAIK 不可能用别名变压器投射超过一层的深度。你的选择是

*   创建一个扁平化的数据传输对象 (DTO)
*   自己将生成的 Person 填充到内存中
*   实现您自己的结果转换器（类似于选项 2）

选项 1 如下所示：

```
Criteria criteria = getHandlerSession().createCriteria(Person.class)
    .createAlias("wife", "wife", JoinType.LEFT.ordinal())
    .add(Restrictions.eq("wife.age", 19)); 
    .setProjection(Projections.projectionList()
        .add(Projections.property("personID"), "personID")
        .add(Projections.property("name"), "personName")
        .add(Projections.property("wife.name"), "wifeName"));
    .setResultTransformer(Transformers.aliasToBean(PersonWifeDto.class));

return criteria.list(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-11T01:05:03.083

我写的`ResultTransformer`，就是这样做的。它的名字是，在[github](https://github.com/samiandoni/AliasToBeanNestedResultTransformer.git)`AliasToBeanNestedResultTransformer`上查看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T06:27:45.377

谢谢萨米安多尼。我能够使用您的 AliasToBeanNestedResultTransformer 稍作修改以适应我的情况。我发现嵌套转换器不支持字段位于超类中的场景，因此我对其进行了增强，以在您要投影到的类的类继承层次结构中查找最多 10 级的字段：

```
 public Object transformTuple(Object[] tuple, String[] aliases) {

        ...

                if (alias.contains(".")) {
                    nestedAliases.add(alias);

                    String[] sp = alias.split("\\.");
                    String fieldName = sp[0];
                    String aliasName = sp[1];

                    Class<?> subclass = getDeclaredFieldForClassOrSuperClasses(resultClass, fieldName, 1);
...
} 
```

其中 getDeclaredFieldForClassOrSuperClasses() 定义如下：

```
private Class<?> getDeclaredFieldForClassOrSuperClasses(Class<?> resultClass, String fieldName, int level) throws NoSuchFieldException{
    Class<?> result = null;
    try {
        result = resultClass.getDeclaredField(fieldName).getType();
    } catch (NoSuchFieldException e) {
        if (level <= 10){
        return getDeclaredFieldForClassOrSuperClasses(
                resultClass.getSuperclass(), fieldName, level++);
        } else {
            throw e;
        }
    }
    return result;
} 
```

我对这个嵌套属性的 Hibernate 投影如下所示：

```
Projections.projectionList().add( Property.forName("metadata.copyright").as("productMetadata.copyright")); 
```

我投影的课程如下所示：

```
public class ProductMetadata extends AbstractMetadata {
...
}

public abstract class AbstractMetadata {
...   
   protected String copyright;
...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-23T07:54:42.773

`Data Transfer Object (DTO)`
而不是在下面创建`projectionlist`更改，它将为您工作。

```
 ProjectionList projections = Projections.projectionList(); 
    projections.add(Projections.property("person.personID"), "personID");
    projections.add(Projections.property("person.wife"), "wife");
    projections.add(Projections.property("wife.name"));

    Criteria criteria = null; 
    criteria = getHandlerSession().createCriteria(Person.class,"person").createAlias("person.wife", "wife"); 
    criterion = Restrictions.eq("wife.age", 19);  
    criteria.add(criterion); 
    criteria.setProjection(projections);
    criteria.setResultTransformer(Transformers.aliasToBean(Person.class)); 
    return criteria.list(); 
```

# c# - 在 c# 中仅将日期转换为日期和时间格式

> ID：12105758
> 
> 赞同：0
> 
> 时间：2012-08-24T08:31:26.940
> 
> 标签：c#, datetime

我想使用 for 循环从数据库中计算每天的数据。在这里，我不知道从唯一日期的值中获取一天的开始（从上午 12 点开始）和当天的结束（下午 12 点）。在下面的代码中 startDate 和 endDate 只有日期值，例如 2/11/2012。

```
for (DateTime dates = startDate; dates <= endDate; dates.AddDays(1))
{
    DateTime BeginingOfDay = begining of value variable dates; // 2/2/2012 00:00:00
    DateTime EndOfDay =  at end of value variable dates; // 2/2/2012 23:59:59
    int count = (from u in db.CDRs where (u.StartTime >= BeginingOfDay && u.StartTime <= EndOfDay) select u).Count();;

    dictionary.Add(dates.ToString("MM/dd/yyyy"), count);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:40:19.773

处理此问题的最佳方法是使用小于/大于运算符的正确组合`n`，以及当日午夜和当日午夜`n+1`

所以给了一天，例如

```
var date = new Date(2012,8,24); // today 
```

那天午夜（一天的开始）

```
var start = new Date(date.Year, date.Month, date.Day, 0,0,0); // could also be date.Date 
```

并在第二天获得午夜只需添加 1 天

```
var end = start.AddDays(1); 
```

现在使用大于或等于开始，小于结束：

```
var inRange = x.StartTime>=start && x.EndTime<end 
```

放在你的例子中就变成了：

```
for (DateTime dates = startDate; dates <= endDate; dates.AddDays(1))
{
    DateTime BeginingOfDay = new DateTime(dates.Year,dates.Month,dates.Day,0,0,0);
    DateTime EndOfDay =  BeginingOfDay.AddDays(1);
    int count = (from u in db.CDRs where (u.StartTime >= BeginingOfDay && u.StartTime < EndOfDay) select u).Count();;

    dictionary.Add(dates.ToString("MM/dd/yyyy"), count);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:57:31.513

这应该会给你你想要的结果：

```
using(var dataContext = new YourDataContext())
{
    var dictionary = dataContext.CDRs.GroupBy(u => new
    {
        u.StartTime.Year,
        u.StartTime.Month,
        u.StartTime.Day
    })
    .Select(g => new{ Date = g.Key, Count = g.Count() })
    .ToDictionary(g => new DateTime(g.Key.Year, g.Key.Month, g.Key.Day), g=>g.Count);
    return dictionary;
} 
```

# php - 网格线不打印

> ID：12105759
> 
> 赞同：1
> 
> 时间：2012-08-24T08:31:34.863
> 
> 标签：php, css, gridview, datagrid

我有网格和打印图标..如果我单击打印图标，我应该打印网格。但是打印输出中没有显示网格线。

我应该怎么办？

这是我的代码

```
<div style="float: right" id="hide_div"><a href="javascript:void(0)" onclick="printPage('pnlMainHeader','div_print');"><img src="<?=$this->baseUrl('/images/icons/small/print.png')?>" title="Print" alt="Print" /></a></div>
<div class="clear10"></div>
<div class="pnlMainHeader" id="pnlMainHeader" style="display: none; ">
    //some xyz code
</div>
<div class="clear10"></div>
<div id="div_print">
    //grid code
    <?=$this->TemplateRoles?>
</div> 
```

和.js文件中的onclick printPage代码

```
function printPage(printpage1, printpage2)
{   
var hideDiv = document.getElementById('hide_div')
hideDiv.style.display = 'none';

var headstr = "<html><head><title></title></head><body>";
var footstr = "</body>";
var newstr1 = document.getElementById(printpage1).innerHTML;
var newstr2 = document.getElementById(printpage2).innerHTML;    
var oldstr = document.body.innerHTML;
document.body.innerHTML = headstr+newstr1+newstr2+footstr;
window.print();
document.body.innerHTML = oldstr;
location.reload();
return false;
} 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:46:01.443

如果您要在标题中添加另一个 css 文件以强制打印边框怎么办？像这样的东西...

```
<link rel="stylesheet" type="text/css" href="print.css" media="print" /> 
```

然后在文件中，您可以使用该类或选择器，如下所示：

```
.gridClass /*(or "td" or whatever it is called)*/ { border:1px solid #000;} 
```

print.css 中命名的任何内容都只会在打印时出现，因为您指定了媒体。我希望这会有所帮助。

# java - 立即重定向。为什么会这样？

> ID：12105760
> 
> 赞同：0
> 
> 时间：2012-08-24T08:31:37.173
> 
> 标签：java, javascript, jsp

在让他等待 10 秒或 10000 毫秒后，我试图将用户从一个 jsp 页面重定向到另一个 jsp 页面。但是一旦在浏览器中打开页面，就会有一个重定向。为什么会这样？下面的代码有什么问题吗？我正在调用`redirectFunction`进行重定向的哪个。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP - 1</title>
    <script>
        function redirectFunction() {
            <% response.sendRedirect("jsp-2.jsp"); %>
        }
    </script>
</head>

<body>
    <h1>
        Wait while you are redirected...
    </h1>
    <script type="text/javascript"> 
        setTimeout(redirectFunc,10000); // wait for 10 seconds,then call redirectFunc
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:35:10.173

您完全从服务器发送重定向，这就是它立即触发的原因。

如果您想在 10 秒后触发重定向，则需要更改代码：

```
function redirectFunction() {
    window.location.href = "jsp-2.jsp"
} 
```

和`setTimeout(redirectFunction,10000);`

实际上，当您调用`<% response.sendRedirect("jsp-2.jsp"); %>`Java 服务器时，会将 http 代码 302 设置为您的 http 响应，并且标头 Location: jsp-2.jsp 并且浏览器会立即重定向到 Location 标头中指定的页面。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:35:59.877

scriptlet 中的代码是在服务器上执行的，它不是 javascript。用这个

```
function redirectFunction() {
            window.location.href = "jsp-2.jsp";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:36:10.347

假设您正在使用[HttpServletResponse](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)，发生的事情是您正在发送带有状态代码 302 的 HTTP 位置标头。这发生在请求页面时，而不是在 JavaScript 的客户端执行期间。

如果您希望它在 JavaScript 执行期间出现，您需要将您想要的 URL 分配给 window.location。

```
window.location = "http://google.com"; 
```

例如

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:36:36.250

这是因为

```
 <script>
        function redirectFunction() {
            <% response.sendRedirect("jsp-2.jsp"); %>
        }
 </script> 
```

被翻译并执行为

```
out.print(" <script> function redirectFunction() {");
response.sendRedirect("jsp-2.jsp");
out.print("</script>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T08:40:39.343

调用 sendRedirect 在服务器端执行，同时准备您的页面，并执行重定向。您可以使用 window.location 仅在 javascript 中进行睡眠和重定向。

# css - 溢出问题：自动

> ID：12105762
> 
> 赞同：0
> 
> 时间：2012-08-24T08:31:50.260
> 
> 标签：css, overflow

在下一页上，尽管没有真正破坏结构的任何内容，但主内容面板位于**侧边栏**`(#textAreaCont)`下方- 与站点中的任何其他页面不同。

 *****[网站链接](http://bit.ly/SuKc4u)***

如果我将`width`of减少`#textAreaCont`到大约`683px`- 它会有所帮助，但我仍然有那个`scrollbar`- 因为`"overflow: auto"`在`#container`

对此有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:14:43.233

你好现在习惯 `overflow:hidden`了`#container`

像这样

```
#container{
overflow:hidden;
} 
```**

# c - 如何处理在运行时确定类型的数组的声明和分配？

> ID：12105765
> 
> 赞同：0
> 
> 时间：2012-08-24T08:32:09.963
> 
> 标签：c, malloc, type-conversion

假设我在磁盘上有五个二进制文件。这五个文件以二进制格式对数字序列进行编码，但它们都有不同的类型。假设它们是 SHORT INT、INT、LONG、FLOAT 和 DOUBLE。我们将让文件也有不同数量的数字存储在其中。

现在假设我有一个程序在执行时询问用户

> 输入要加载的文件名：

并且用户可以选择这五个文件之一。我希望程序将这些文件加载​​到一个数组中，以便可以执行进一步的计算。

我们可以假设存在两个函数：一个返回一个整数值，该值对文件的类型（即，SHORT INT、INT、LONG、FLOAT 或 DOUBLE）进行编码（称为“getfiletype”），另一个返回文件的数量。文件中的数字（例如，1000、9338、8131、0 等）（称为“getfilesize”）。条目的实际数量可能是数十亿个数字。如果可能的话，在程序中，我想为包含用户选择的任何文件的值的数组（比如“数组”）使用相同的名称。这样我就可以拥有像

```
N=getfilesize("pickedfile.dat");
for(i=0 ; i<N ; i++ ) {
    doublearray[i]==2.0*(double)array[i]+7.12;
} 
```

可以转换数组。在这里，我引入了一个名为“doublearray”的新数组来保存转换后的值。然后，此双精度数组将以 DOUBLE 格式写入文件，或者在写入其他格式之一之前进行转换。

我该怎么做这种事情？彻底糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:56:35.237

您的程序可以创建一个静态（或全局）void* 数组，该数组将由对 getfiletype() 或 getfilesize() 的最新调用填充。然后，您必须适当地转换它（正如您在示例中专门为 double 所做的那样）。假设您已经解决了文件数据方面的加载问题。

尽管这种方法在使用方面并不是很干净（依赖静态或全局会限制您执行不同对话的选择 - 特别是目前的情况，您必须确保以顺序方式操作）。

一个更干净的 API 可能是这样的：

```
enum TypeEnum { SHORT_INT, INT, LONG, FLOAT, DOUBLE };
void* getfiledata(char *filename, unsigned int *size, TypeEnum *type);
#define GET_DATA_AND_CAST(filename, array, array_size) \
    do { \
        TypeEnum type; \
        void* arr = getfiledata(filename, array_size, &type); \
        switch(type) { \
            case SHORT_INT: \
                array = (short*)arr; break; \
            case INT: \
                array = (int*)arr; break; \
            case LONG: \
                array = (long*)arr; break; \
            case FLOAT: \
                array = (float*)arr; break; \
            case DOUBLE: \
                array = (double*)arr; break; \
            default: \
                // ASSERT \
        } \
    } while(0) 
```

然后你可以像这样使用它：

```
void process_doubles(void *array) {
    double to_conv[];
    unsigned int size;
    GET_DATA_AND_CAST("pickedfile.dat", to_conv, &size);

    for(i=0; i<size; ++i ) {
        doublearray[i] = 2.0 * to_conv[i] + 7.12;
    }
} 
```

恕我直言，C++ 会使它变得更好（因为您可以使用模板），但由于这个问题仅用 C 标记，我只是在 C 中呈现选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:45:27.207

您可以使用`void *`指针来存储指向任何数据类型的指针。

```
int num_elements = getfilesize();
size_t element_size;
switch (getfiletype()) {
    case SHORT_INT: element_size = sizeof(short int); break;
    ...
}
void *array = malloc(num_elements * element_size);

...

void process_doubles(void *array) {
    for(i=0 ; i<getfilesize("pickedfile.dat") ; i++ ) {
    doublearray[i] = 2.0 * ((double *) array)[i] +7.12;
} 
```

请注意，您需要在间接转换数组指针*之前对其进行转换。*

# c# - 如何从网页中提取动态 ajax 内容

> ID：12105766
> 
> 赞同：3
> 
> 时间：2012-08-24T08:32:22.687
> 
> 标签：c#, parsing, c#-4.0, html-parsing, web-scraping

我的要求是从网页中提取所需的内容。该页面有一个使用 ajax 填充的部分。当我在页面源中查看时，它没有显示使用 ajax 加载的内容。部分内容将根据选中的复选框而改变。如果我们选择“印度”复选框，则该部分将显示印度的所有详细信息。页面源将仅显示默认内容，而不是使用 ajax 显示的内容。选中复选框后我检查了页面源，但它仍然只显示默认值。如何获取该部分内容，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:13:36.937

在 C# 中，您可以使用 HTMLAgilityPack 来抓取数据，但如果您使用 webBrowser.DocumentText，则无法从网页加载 ajax 内容来获取 xpath。所以在 webBrowser 控件完全加载网页之后。在 Document_Complete 方法中添加以下代码：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
this.webBrowser1.Document;
IHTMLDocument2 currentDoc =(IHTMLDocument2)this.webBrowser1.Document.DomDocument;

doc.LoadHtml(currentDoc.activeElement.innerHTML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:37:03.730

在 Firefox 下使用 Firebug。在 NET 选项卡下，您将看到加载的额外内容。

# jsp - 使用 Tomcat 连接到 MS SQL 数据库的 JSP 示例

> ID：12105768
> 
> 赞同：0
> 
> 时间：2012-08-24T08:32:33.140
> 
> 标签：jsp, datasource, java-ee-5

我正在尝试使用 jsp 检索数据，但它显示 Error:org.apache.jasper.JasperException: An exception occurred processing JSP page /databaseTest.jsp at line 13

我的代码是：

```
<%@taglib  uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="java.io.*,java.util.*,java.sql.*" %>
<%@page import="javax.servlet.http.*,javax.servlet.*" %>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSTL sql:query Tag</title>
</head>
<body>
   <sql:setDataSource var="ds" driver="com.mysql.jdbc.Driver"
 url="jdbc:mysql://localhost/JSPTUTORIAL"
 user="root"  password="root"/>
    <sql:query dataSource="${ds}" var="result">
        SELECT * FROM Employees;
    </sql:query>
    <h4>Employee Table</h4>
    <table border="1" width="100%">
        <tr>
            <th>Employee ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Age</th>
        </tr>
        <c:forEach var="row" items="${result.rows}"/>
            <tr>
                <td><c:out value="${row.id}"/></td>
                <td><c:out value="${row.first}"/></td>
                <td><c:out value="${row.last}"/></td>
                <td><c:out value="${row.age}"/></td>
            </tr>
    </table>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-07T15:41:31.577

语法代码是正确的。我在IDE中过去并检查。也许这段代码和 /databaseTest.jsp 不匹配。请检查一下。

我建议不要在实际项目中使用标签。例如，在 Spring 中，您可以创建 bean 并使用依赖注入设置所有数据（登录名、密码等）。

# chef-infra - chef-solo 是否支持运行列表项中的食谱版本？

> ID：12105772
> 
> 赞同：1
> 
> 时间：2012-08-24T08:32:50.403
> 
> 标签：chef-infra, chef-solo

[文档](http://docs.opscode.com/chef_solo.html)说：

> Chef Solo 不提供：环境，用于设置食谱版本的策略。

它没有说明不支持通过[run_list](http://wiki.opscode.com/display/chef/Version+Constraints#VersionConstraints-CookbookVersionsinRunListItems)指定的食谱版本，例如：

```
{"run_list":["recipe[nginx@1.2.3]"]} 
```

但是我尝试使用 run_list 单独运行需要比可用版本更大的食谱，并且运行良好。你能确认一下，无论在哪里，solo 都不支持这些版本。不过，Solo 至少应该发出警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T23:26:09.570

据我所知，这在 Chef Solo 中是不可能的。Chef Solo 对食谱列表（“目录”）进行操作，因此同一食谱存在多个版本是相对不可能的。我同意，也许主厨 Solo 应该发出警告。也许打开一张票？

# c++ - 在 C++ 中使用脚本语言

> ID：12105775
> 
> 赞同：2
> 
> 时间：2012-08-24T08:32:57.780
> 
> 标签：c++, python, compilation

我的问题有点愚蠢，但我决定问一些像你们这样的高级程序员。所以我想制作一个“动态”的 C++ 程序。我的想法是编译它并在编译后（可能使用像 python 这样的脚本语言）来改变程序代码的一些方式。我知道您会告诉我，编译后我无法更改代码，但有办法做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:50:12.830

您可以使用外部库中的插件设计模块化架构。例如，您可以使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。这样您就可以动态加载在主程序之后生成的代码。不过，您必须修复一个界面。Windows api 中的函数`GetProcAddress`可能是一个很好的起点。

对于动态编码和快速原型设计，我建议看一下[Lua](http://www.lua.org/)。该引擎非常小，易于集成到您的 c++ 程序中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:47:46.517

在 C++ 中做到这一点的唯一方法是卸载包含要修改的代码的 DLL，修改源代码，调用编译器重新生成 DLL，然后重新加载 DLL。它的重量非常非常重，并且仅当编译器存在于要运行代码的机器上时才有效。（在 Unix 下通常是这种情况，在 Windows 下很少是这种情况。）

像 Python 这样的解释型语言更具动态性；例如，Python 有一个内置函数可以将字符串作为 Python 代码执行。如果您需要可动态修改的代码，我建议您将 Python 嵌入到您的应用程序中，并将其用于动态部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:35:10.930

就我个人而言，我从来没有在运行时重新编译 C++，我也不打算这样做。然而，我最近一直在做很多脚本语言的嵌入。

其他人提到了嵌入的明显首选：Lua。Lua 是一种非常流行的嵌入语言，你会发现一堆关于如何做到这一点的文档。将其集成到 C++ 中将允许您在运行时定义您想要的行为。

我使用的是一种很棒的语言，叫做 Squirrel。它很像 Lua，但具有原生对象（类）支持和类似 C++ 的语法。我已经设法将它嵌入到 C++ 应用程序中，并且通过使用 sqrat 绑定库，两种语言都可以轻松共享信息。

我有松鼠构建和初始化我的用户界面。因此，需要 0 编译才能为我的游戏制作和构建我的 UI。我打算更进一步并使用这个游戏方面来创建您正在寻找的类似行为（通过动态代码使用在运行时改变行为）

我建议在这里查看松鼠：[http ://www.squirrel-lang.org/](http://www.squirrel-lang.org/)

我打算写关于如何嵌入 squirrel 和安装绑定库的教程，但我还没有开始。如果我记得的话，我会在将来（可能是几个月）完成后编辑这篇文章。与此同时，自己试一试。您可能会根据自己的喜好找到它。

# ios - 使用 asihttprequest 下载/检索 pdf

> ID：12105782
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:33:26.160
> 
> 标签：ios, objective-c, cocoa-touch, download, storage

我正在尝试使用以下功能将带有 URL 的内容下载到我的 iPad (cachedDir ? ) 中的本地文件系统：

```
- (IBAction)download:(id)sender {

NSURL *url = [NSURL URLWithString:@"http:www.google.de"];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDelegate:self];
[request startAsynchronous];
[request setDownloadDestinationPath:@"/Users/ben/Desktop/my_file.pdf"]; // Which //directory??

} 
```

如果我想尽可能长时间地存储数据而不会被 Apple 拒绝，我必须为我的路径选择哪个目录，以及如何检索我保存的数据？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:37:47.700

存储您想要保留的文档的最佳位置是您的应用程序的 Documents 直接。您可以像这样找到它的路径：

```
// Returns the URL to the application's Documents directory.
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

Apple 有一份关于 iOS 文件系统和存储特定类型文件的有用文档：http: [//developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUIide/FileSystemOverview/FileSystemOverview.html](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:47:06.783

试试这个我的代码，使用下面的代码在文档中保存 pdf

```
NSString *downloadUrl=[NSURL URLWithString:@"http:www.google.de"];
 NSData *pdfData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:downloadUrl]];

  //Store the Data locally as PDF File

 NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];
  NSString *pdf1 = @"title.pdf";
  NSString *filePath = [resourceDocPath stringByAppendingPathComponent:pdf1];

 [pdfData writeToFile:filePath atomically:YES]; 
```

并使用检索您的文件

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSURL *pdfURL = [[NSBundle bundleWithPath:[paths objectAtIndex:0]] URLForResource:[NSString stringWithFormat:@"title.pdf"] withExtension:nil];
    NSLog(@"pDF URl %@", pdfURL);

    pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL); 
```

# ruby-on-rails - Rails route：将整个路径字符串拉入一个参数

> ID：12105784
> 
> 赞同：0
> 
> 时间：2012-08-24T08:33:32.307
> 
> 标签：ruby-on-rails, routes

我刚刚在我的 rails 2.2.2 应用程序中添加了一个 CMS。我想设置它，以便在我的路线的底部我有一个包罗万象的东西，它将整个路径推入一个参数，然后调用 cms 控制器，然后查找与该路径匹配的页面

例如

```
http://mysite.com/something/about/foo
=> {:controller => "cms", :action => "show", :page => "something/about/foo"} 
```

我不知道我需要添加哪些选项（如果有的话）来阻止它在斜杠上分裂。有什么想法吗？请记住，这是 rails 2。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:47:15.267

刚刚在官方 rails api 文档 (doh) 中发现了这个问题的答案：

```
4.9 Route Globbing
Route globbing is a way to specify that a particular parameter should be matched
to all  the remaining parts of a route. For example

map.connect 'photo/*other', :controller => 'photos', :action => 'unknown', 
```

就我而言：

```
map.connect   "/*page", :controller => "cms", :action => "show" 
```

意思是

```
http://mysite.com/something/about/foo
=> {:controller => "cms", :action => "show", :page => ["something", "about", "foo"]} 
```

这很好，因为我可以轻松地加入 params[:page] 以再次获取完整路径。

谢谢阅读 ：）

# javascript - toFixed javascript 函数给出奇怪的结果？

> ID：12105787
> 
> 赞同：4
> 
> 时间：2012-08-24T08:33:45.443
> 
> 标签：javascript

我正在尝试将数字固定为小数点后 2 位，为此我正在使用`toFixed`javascript 的功能。以下是我得到的奇怪结果，请检查并帮助我。

```
变数 = 11.995;
number.toFixed(2); //给我 11.99 这是正确的

变数 = 19.995;
number.toFixed(2); //给我 20.00 这是不正确的

```

谁能告诉我为什么会这样。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T08:44:41.643

这就是浮点数学的工作原理。值 19.995 不是精确的二进制（以 2 为底）。为了更清楚，请在除以 10/3 时考虑一个确切的数字。

有关更深入的解释，请阅读：[http ://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

在您的情况下，您可以改用字符串（至少看起来这是您想要的）：

```
number.toString().substr(0, n); 
```

或者定义一个这样的函数（2分钟完成，只是一个例子）：

```
Number.toFixed = function(no, n) {
    var spl = no.toString().split('.');
    if ( spl.length > 1 ) {
        return spl[0]+'.'+spl[1].substr(0,n);
    }
    return spl[0];
}

Number.toFixed(19.995, 2); // 19.99 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:42:31.450

`toFixed`对值进行四舍五入。由于 19.995 恰好在 19.99 和 20.00 之间，它必须选择其中之一。传统上，舍入更喜欢偶数结果（这可以防止偏差，因为舍入和舍入将是相等的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-13T05:28:38.430

我创建了一个为我完成所有工作的函数..

```
 function toFixed(number, precision) {
        var multiplier = Math.pow(10, precision + 1),
            wholeNumber = Math.floor(number * multiplier);
        return Math.round(wholeNumber / 10) * 10 / multiplier;
    }

   //Call this function to retrive exect value
    toFixed((+adjustmentval), 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:01:13.720

我猜大卫已经回答了你的疑问。只是在这里提供一个替代解决方案。

您可以为此使用`Math.floor()`Math 对象的方法。

像这样的东西，`Math.floor(number*100)/100`

# actionscript-3 - 访问未定义的属性？动作脚本 3

> ID：12105788
> 
> 赞同：0
> 
> 时间：2012-08-24T08:33:45.283
> 
> 标签：actionscript-3

我正在编程，当我认为一切都很好时，Flash 向我抛出了一个错误！？

一开始我是懵逼的。然后在检查了我的代码后，我看不到罪魁祸首。所以我所做的就是“简单化”，并将其更改为只是一个跟踪语句。

但是，我仍然收到错误消息。我不知道出了什么问题。

```
 package  {

     import flash.display.MovieClip;
     import src.data.DActors;

     public class DocumentClass extends MovieClip {

        public var dActors:DActors = new DActors;

        public function DocumentClass() {
        trace (dActors);
        trace ("Main");
        }

    }

} 
```

这是 DActor 类：

```
package src.data 
{
  public class DActors
   {
       public var me:int = 1;

      public function DActors();
       {    
          trace(me);
       }

  }

} 
```

一些我不知道的范围或什么？

哦，顺便说一句，它会抛出''我'没有被定义'！？

编辑：实际上，我没有意识到真正的问题，为什么我的构造函数不接受变量！

```
 package src.data 
 {
public class DActors
{
    public var actors:Array = new Array();
    public var dActor:DActor = new DActor();

    public function DActors();
    {   
        actors.push(dActor);
    }

} 
```

}

输出：

1120：访问未定义的属性参与者。

1120：访问未定义的属性 dActor。

？？？这让我非常担心。要么我的眼睛在愚弄我，要么我错过了一些非常基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:28:40.173

```
public function DActors(); 
```

构造函数不会以`;`（分号）结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:24:01.553

构造函数后的分号`DActors`会破坏您的代码。

```
public function DActors(); 
```

如果您将`DActors`课程更改为此，它将起作用：

```
package src.data
{
    public class DActors
    {
        public var me:int = 1;

        public function DActors()
        {
            trace(me);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:46:20.297

正确调用构造函数

```
public var dActors:DActors = new DActors(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:45:00.560

```
public var dActors:DActors = new DActors; 
```

应该：

```
public var dActors:DActors = new DActors(); 
```

# regex - 用正则表达式替换 CSV 文件中的数据

> ID：12105789
> 
> 赞同：1
> 
> 时间：2012-08-24T08:33:46.057
> 
> 标签：regex, csv, textmate

我有一个 CSV 文件（从 iWork Numbers 导出的数据），其中包含带有信息的用户列表。我想要做的是在所有行上替换`;;;;;;;;;`为`;`接受“上次登录”。

通过这样做并将文件再次导入 Numbers，数据将（希望）分成如下行：

```
User 1 | Points: 1 | Registered: 2012-01-01 | Last login 2012-02-02
User 2 | Points: 2 | Registered: 2012-01-01 | Last login 2012-02-02 
```

**CSV 文件的外观：**

```
;User1;;;;;;;;;
;Points: 1;;;;;;;;;
;Registered: 2012-01-01;;;;;;;;;
;Last login: 2012-02-02;;;;;;;;;
;User2;;;;;;;;;
;Points: 2;;;;;;;;;
;Registered: 2012-01-01;;;;;;;;;
;Last login: 2012-02-02;;;;;;;;; 
```

所以我的问题是我应该在查找和替换字段中输入什么正则表达式代码？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:06:26.777

查看正则表达式**[的实际操作](http://regexr.com?31u97)**：

```
Find   : ^(;(?!Last).*)(;{9})
Replace: $1; 
```

输出将是：

```
;User1;
;Points: 1;
;Registered: 2012-01-01;
;Last login: 2012-02-02;;;;;;;;;
;User2;
;Points: 2;
;Registered: 2012-01-01;
;Last login: 2012-02-02;;;;;;;;; 
```

## 解释

### 寻找：

```
^                 # Match start of the line
(                 # Start of the 1st capture group
    ;(?!Last)     # Match a semicolon (;), only if not followed by 'Last' word.
    .*            # Match everything
)                 # End of the 1st capture group
(                 # Start of the 2nd capture group
    ;{9}          # Match exactly 9 semicolons
)                 # End of the 2nd capture group 
```

### 代替：

```
$1;               # Leave 1st capture group as is and append a semicolon. 
```

# php - php while循环错误使用mysql_fetch_array

> ID：12105792
> 
> 赞同：0
> 
> 时间：2012-08-24T08:33:55.330
> 
> 标签：php, mysql, arrays, fetch

我看不到：

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource 
```

任何人都可以提供帮助，因为我的代码看起来很准确：

```
<?php
//retreive questions from database and put into question box

$query = "SELECT `QuestionId`, `Question`, `Opt1`, `Opt2`, `Opt3`, `Opt4`,`Answer` FROM `pf_questions`";

$question = mysql_query($query);

while($row = mysql_fetch_array($question)){

    $id         = $row['QuestionId'];
    $question   = $row['Question'];
    $opt1       = $row['Opt1'];
    $opt2       = $row['Opt2'];
    $opt3       = $row['Opt3'];
    $opt4       = $row['Opt4'];
    $answer     = $row["Answer"];

?>
<div id="ContainerQuestion">
    <span class="Question">Question <?php echo $id; ?>. <?php echo $question; ?></span>

        <p><input type=radio name='q<?php echo $id; ?>' value="<?php echo $opt1; ?>"> <?php echo $opt1; ?> </p>
        <p><input type=radio name='q<?php echo $id; ?>' value="<?php echo $opt2; ?>"> <?php echo $opt2; ?> </p>
        <p><input type=radio name='q<?php echo $id; ?>' value="<?php echo $opt3; ?>"> <?php echo $opt3; ?> </p>

        <p><input type=radio name='q<?php echo $id; ?>' value="<?php echo $opt4; ?>"> <?php echo $opt4; ?> </p>

</div>
<?php
} 
```

已经尝试过 mysql_error() 并且没有任何输出，所以我假设我的查询是正确的？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:36:07.583

您似乎根本没有*在*代码中的任何地方建立 mysql 连接。您确定存在与数据库的有效连接吗？

其次，最好换成比旧功能更安全、更闪亮、更好的[PDO 。](http://au.php.net/manual/en/book.pdo.php)`mysql_*`

话虽如此，您需要使用类似以下的内容来使用 oder 函数进行连接：

```
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb"); 
```

编辑：

您能否添加以下代码部分并让我知道输出？

```
$query = "SELECT `QuestionId`, `Question`, `Opt1`, `Opt2`, `Opt3`, `Opt4`,`Answer` FROM `pf_questions`";
$question = mysql_query($query);
$num_rows = mysql_num_rows($question);
echo "$num_rows Rows<br>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:36:40.860

听起来您的查询无效，因此问题变量不包含`mysql_fetch_array`正在等待的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:49:59.323

**不要使用 mysql_* 函数。**

$question = mysql_query($query);

如果查询失败会怎样？或者如果 mysql 服务器返回 0 行？来自手册：“对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。”

```
if ( !$question ) {
    //Query is failed. 
    echo mysql_error(), $query; //for developer use. if error happens - you will see what happens
    exit(); //or something else you want
}

if ($question && mysql_num_rows($question) > 0) {
    while($row = mysql_fetch_array($question)){
       .....
    }
} else {
    // mysql server return 0 rows
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:43:55.700

您的 mysql 查询中似乎缺少某些内容，请匹配数据库中实际表中的字段（也匹配小写和大写）。

有时也`` is not supported hence remove`来自所有字段和表名。可能它会解决你的问题。

# api - box.com 为签名者发送文档的 API（通过 RightSignagure 集成）

> ID：12105793
> 
> 赞同：0
> 
> 时间：2012-08-24T08:33:57.477
> 
> 标签：api, digital-signature

假设我们在 box.com 中添加了 rightsignature 应用程序，并且我们已经创建了相应的模板并将它们存储在 box.com 中，则可以通过 box.com 的 Web 界面将这些文档从 box.com 发送给签名者。这将对其进行签名并将其发送回 box.com。

我想知道我们是否可以通过 box.com 的 API 而不是 RightSignature 的 API 来做到这一点。我猜我不能，只是想知道。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:55:48.440

Box API 目前没有官方 API 可以通过编程方式使用 RightSignature。RightSignature 集成就是我们所说的文件操作 (http://developers.box.net/BoxPlatformUserExperience)。我们还没有 API 可以让应用程序通过 Box 访问这些操作。

由于我们将继续增强 API，请随时通过 api [at] box [dot] com 给我们发送电子邮件，以进一步讨论您对该 API 的兴趣。

# javascript - 如何在 JQuery animate 中设置“自动”高度

> ID：12105795
> 
> 赞同：1
> 
> 时间：2012-08-24T08:34:04.073
> 
> 标签：javascript, jquery, html, css

问题：我有一个固定宽度但未知（自动）高度的框（div）。

我需要使用 JQuery animate 函数打开/关闭该框。

问题是（在代码中也有注释）打开事件，我需要设置自动高度，这是我无法做到的。有人可以帮助将高度设置为自动吗？

JSFiddle： http: [//jsfiddle.net/7m5Qa/](http://jsfiddle.net/7m5Qa/) 代码如下：

**HTML**

```
<button id="open">open</button>
<button id="close">close</button>
<div id="textselector-body">
    a<br/>
    b<br/>
    c<br/>
</div>​ 
```

**Java 脚本**

```
$(document).ready(function(){
    $("#open").click(function(){
        $("#textselector-body").animate({
            height:'100px' //here is problem. I need it 'auto'.
        },2000);
    });
    $("#close").click(function(){
        $("#textselector-body").animate({
            height:'0'
        },2000);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T08:38:00.450

你试过 slideDown 和 slideUp 吗？：

```
$(document).ready(function(){
    $("#open").click(function(){
        $("#textselector-body").slideDown(2000);
    });
    $("#close").click(function(){
        $("#textselector-body").slideUp(2000);
    });
});​ 
```

jsfiddle：http: [//jsfiddle.net/7m5Qa/2/](http://jsfiddle.net/7m5Qa/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:49:26.927

你试过`height:'toggle'`吗？( [jQuery.animate()](http://api.jquery.com/animate/) )

它会在您单击按钮时反转转换，但如果您只想要一个按钮，它就是解决方案。

[**演示**](http://jsfiddle.net/7m5Qa/6/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:36:30.167

```
$(document).ready(function(){
    var H = $("#textselector-body").height();
    $("#open").click(function(){
        $("#textselector-body").animate({
            height:'100px'
        },2000);
    });
    $("#close").click(function(){
        $("#textselector-body").animate({
            height:H
        },2000);
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/7m5Qa/1/)

**编辑：**

不确定我的问题是对的吗？如果你只是想切换它，你可以这样做：

```
$(function(){
    $("#open, #close").click(function(e){
        $("#textselector-body")[e.target.id=='open'?'slideDown':'slideUp'](2000);
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/7m5Qa/5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T08:38:09.510

您可以将 .slideUp 和 .slideDown 方法与 jQuery 一起使用：

```
$("#open").click(function(){
        $("#textselector-body").slideDown('slow')
});

    $("#close").click(function(){
        $("#textselector-body").slideUp('slow')
}); 
```

[http://jsfiddle.net/Kyle_Sevenoaks/7m5Qa/3/](http://jsfiddle.net/Kyle_Sevenoaks/7m5Qa/3/)

# c# - 从 https 谷歌搜索中获取谷歌搜索词

> ID：12105799
> 
> 赞同：3
> 
> 时间：2012-08-24T08:34:23.183
> 
> 标签：c#, asp.net, search

我想获取用户在 Google 上输入的搜索词以访问我的长尾登录页面（并在该页面上使用它们）。

使用响应引用者（在 ASP C# 中）从查询字符串中获取“q”变量效果很好，但前提是引用的 Google 页面**未**作为 https 加载。

这显然是一个问题，因为几乎每个人都一直在他们的浏览器上登录他们的谷歌账户，如果他们登录了，所有谷歌页面将被自动加载（和重定向）以使用 https。

当用户（在**https://www.google.com**上）搜索某些内容并点击搜索结果时，Google 似乎会将用户重定向到一个中间页面，该页面会剥离其查询字符串的请求并将其替换为不同的这几乎只包含中间页面应该重定向到的 url（即指向我的长尾登录页面的 url）。

有什么方法可以让我获得在**https://www.google.com**上使用的原始搜索词吗？也许如果 JavaScript 可以访问浏览器历史或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:49:15.013

> 有什么方法可以让我获得在**https://www.google.com**上使用的原始搜索字词

不，`https`会话的全文通过 SSL 保护，包括标头、url 等。在您的场景中，出于安全原因，浏览器倾向于省略`referer`标头，因此您将无法访问它（除非目标 URL 也是安全的通过 HTTPS）。这是 HTTP 规范的一部分 - [15.1.3 在 URI 中编码敏感信息](http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html#sec15.1.3)。

您唯一能做的就是在您的网站上放置免责声明，说明它不适用于 https。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:18:19.540

要查看引荐来源数据，您需要成为付费谷歌广告客户（访问者通过广告点击而来）或者您的网站也使用 HTTPS。这些天证书很便宜，或者您可以使用 CloudFlare 之类的中介来执行 SSL 并在您的网站上拥有一个自签名证书。

无论使用何种方法，您都可以使用 Google 网站管理员工具查看查询。

我在这里写了一点：http: [//blogs.dixcart.com/public/technology/2012/03/say-goodbye-to-keyword-tracking.html](http://blogs.dixcart.com/public/technology/2012/03/say-goodbye-to-keyword-tracking.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:45:34.037

由于它是谷歌，这是不可能的，因为没有与您的网站共享链接。

一旦您使用 HTTPS - 它就*不允许*发送 REFERRER 标头。我相信您知道标头可以被操纵并且不能被信任，但是您*可以*信任 Google。但是，由于隐私政策，Google 用户在 Google 上进行的任何活动都不会被第三方共享。[关联](http://www.google.com/policies/privacy/)

同样，在服务器端语言中，您可以找到 HTTP Referrer 的功能，但不是 HTTPS referrer。那是有原因的！

除非并且直到您没有与可能在其 RFC*事物*中创建例外以允许 HTTP REFERRER 仅用于您的网站的原始服务器合作。这是不可能的。

希望有帮助！（继续前进）:)

编辑：[维基百科链接](http://en.wikipedia.org/wiki/HTTP_referer)见推荐人隐藏（倒数第二行）

# css - 按钮大小与样式不同

> ID：12105811
> 
> 赞同：3
> 
> 时间：2012-08-24T08:35:16.483
> 
> 标签：css, button

我想对按钮和链接进行样式设置，使其看起来相同，总的来说我已经这样做了。但我不能让按钮和链接看起来完全一样：

*   我将按钮的高度设置为 25px，但它没有 25px 的高度，Firebug 和 Chrome 显示为 21px；
*   宽度也一样：比我设置的小 4 个像素；
*   链接周围有一些奇怪的边距，而按钮没有，但我将边距设置为 0。

听起来微不足道，但是当按钮和链接放在一起时，很容易注意到设计中的错误（我在布局被破坏的地方添加了红线）。登录按钮是提交表单的真实按钮，注册是一个链接到注册页面的链接，看起来像一个按钮。 ![错位](../Images/1960e1704cc4a7f6006b0aa0ff645810.png)

这里登录按钮是 106x21 像素，注册链接是 110x25 像素。

以下是我的风格：

```
a.button,
button {
    display: inline-block;
    width: 110px;
    height: 25px;
    padding: 0;
    margin: 0;
    color: white;

    background: #7dbedb; /* Old browsers */
    background: -moz-linear-gradient(top,  #7dbedb 0%, #95c3ea 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#7dbedb), color-stop(100%,#95c3ea)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #7dbedb 0%,#95c3ea 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #7dbedb 0%,#95c3ea 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #7dbedb 0%,#95c3ea 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #7dbedb 0%,#95c3ea 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7dbedb', endColorstr='#95c3ea',GradientType=0 ); /* IE6-9 */

    text-shadow: 1px 1px 1px #757575;
    filter: dropshadow(color=#000000, offx=1, offy=1);

    border: 2px solid #79cee6;
    border-radius: 2px;
    text-align: center;
    text-decoration: none;
} 
```

用法：

```
<form ...>
    ...

    <button>Login</button>
    <a href="..." class="button">Register</a>
</form> 
```

简而言之：我不能让 <button> 和 <a> 看起来完全一样。

PS。我知道我可以通过 onclick 事件在任何地方使用按钮。以及将所有提交按钮作为带有 onclick 事件的链接。但我不想这样做，因此不需要 js 提交表单或点击链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T08:42:05.353

按钮（和其他输入）不遵循块模型。

为了调整按钮的大小，您可以：

*   在按钮中使用填充
*   设置`box-sizing: content-box;`为强制按钮使用标准模型

对于第二种解决方案，您可能必须使用整套等效声明：

```
a.button,
button {
    ...
    box-sizing: content-box;
    -webkit-box-sizing: content-box;
    -moz-box-sizing: content-box;
} 
```

**编辑 ：**

调整它的一个问题是不同的浏览器有不同的按钮。

所以这适用于 Chrome/ubuntu：http: [//jsfiddle.net/HAB6W/](http://jsfiddle.net/HAB6W/)

这适用于 FF/ubuntu：http: [//jsfiddle.net/Z5H5u/](http://jsfiddle.net/Z5H5u/)

我不确定尝试精确查看按钮是否是个好主意。我知道当我想要像素精确的样式时，我只对按钮使用标准元素（通常是跨度）。

**新编辑：**

这可能很有用：[在 Firefox 中输入类型=提交文本垂直对齐](https://stackoverflow.com/questions/1679952/input-type-submit-text-vertical-alignment-in-firefox/1986666#1986666)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T22:40:31.693

[例子](http://jsfiddle.net/trukof/4Fnfk/)

```
a,
input {
    font-family:arial;
    display:inline-block;
    border:1px solid black;
    background-color:blue;
    color:white;
    float:left;

    text-decoration:none;
    font-size:12px;

    **padding:2px 5px;
    height:20px;
    vertical-align:top;

    -webkit-box-sizing:content-box;
    -moz-box-sizing:content-box;
    -ms-box-sizing:content-box;
    -o-box-sizing:content-box;
    box-sizing:content-box;**
} 
```

# javascript - 使用 jQuery 替换 HTML

> ID：12105813
> 
> 赞同：1
> 
> 时间：2012-08-24T08:35:29.933
> 
> 标签：javascript, jquery, html, jquery-selectors

```
function toText()
{
    var convertHTML =$('#mainContent').html();
    var ele = $(convertHTML + " > span").each(function(){
        $(this).replaceWith($(this).text());
    });
    console.log(ele);

} 
```

我的目标是替换以下内容

```
 <div id="mainContent">
    test
<br>
    1234
<br>
    <span class="underline">test</span>
<br>
    <span class="underline">1234</span>
    </div> 
```

并希望我的功能输出测试`<br> 1234 <br> test <br> 1234`

这就是为什么我不能只使用 text() 因为它也带走了`<br>`！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:40:27.097

试试这样：

```
function toText()
{
    var ele = $("#mainContent > span").each(function(){
        $(this).replaceWith($(this).text());
    });
    console.log(ele);
} 
```

您在哪里使用整个 html 块作为 jQuery 选择器:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:40:37.727

`convertHTML`from `var convertHTML =$('#mainContent').html();`不是 jQuery 对象

你将不得不写

```
var ele = $("#mainContent > span").each(function(){
        $(this).replaceWith($(this).text());
    }); 
```

原因 ：

`$('#mainContent').html();`将返回给您工作的`string`不是 jQuery 对象`$.each`。

`var ele = $(convertHTML + " > span")`意味着

`var ele = $("test<br>1234<br><span class="underline">test</span><br><span class="underline">1234</span>" + " > span")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:45:33.443

您正在获取从返回的 html 字符串`$("#mainContent").html()`并尝试将其用作下一行的选择器的一部分，而您真正需要的选择器是`"#mainContent > span"`.

试试这个：

```
function toText()
{
    $("#mainContent > span").replaceWith(function(){ return $(this).text(); });
} 
```

您不需要`.each()`循环：如果您将函数传递给`.replaceWith()`该函数，则会为 jQuery 对象中的每个元素调用一次，并且您的返回值用作当前元素的替换。

演示：http: [//jsfiddle.net/7xKzP/](http://jsfiddle.net/7xKzP/)

# python - 得到错误distributionNotFound

> ID：12105815
> 
> 赞同：7
> 
> 时间：2012-08-24T08:35:38.640
> 
> 标签：python, celery

我已经在我的系统上安装了 celeryD 和 redis。当我使用`celery`. 我收到以下错误。

```
 Traceback (most recent call last):
  File "/usr/local/bin/celeryd", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2711, in <module>
    parse_requirements(__requires__), Environment()
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 584, in resolve
    raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: python-dateutil>=1.5,<2.0 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T08:43:42.923

有一个名为[python-dateutil](http://pypi.python.org/pypi/python-dateutil)的包没有安装。

它应该在您调用 celeryd 时处于活动状态的 PYTHONPATH 上可用。

Python dateutil 可从[PyPi](http://pypi.python.org/pypi/)安装。

假设您在系统上安装了[pip](http://pypi.python.org/pypi/pip)，您可以使用以下命令执行此操作：

```
$ pip install python-dateutil==1.5 
```

# c# - Windows 窗体在桌面上移动时创建轨迹

> ID：12105821
> 
> 赞同：0
> 
> 时间：2012-08-24T08:36:01.757
> 
> 标签：c#, winforms

我已经使用 c# 开发了一个 Windows 窗体应用程序。现在，当我在桌面上移动该表格时，会出现一条非常大的轨迹。就像我们在系统过载时移动任何窗口（如记事本）一样。但是当系统工作正常时。没有超载仍然出现线索。这看起来不太好。那么有什么办法可以避免这种情况。我的系统内存是 2GB！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:42:22.187

你在winform上使用大图吗？

你可以试试这个：尝试设置表单的 [双缓冲](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doublebuffered.aspx)属性。

或者

也许你可以用这段代码解决：

```
protected override CreateParams CreateParams {
get {
CreateParams cp = base.CreateParams;
cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
return cp;
  }
} 
```

最后，您可以尝试设置表单的此属性：[透明键](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.transparencykey.aspx)，并使用您未在表单上使用的颜色。

# highcharts - 如何更改饼图 High Chart 的 X 轴和 Y 轴名称？

> ID：12105829
> 
> 赞同：0
> 
> 时间：2012-08-24T08:36:24.387
> 
> 标签：highcharts, pie-chart

大家好，我是饼图中的一些数据...在切片悬停时，我得到了像这样的悬停

```
 [Hr Resources:x=Hr Resources,y=12] 
```

我希望我的工具提示像这样显示

```
 [ProjectName=Hr,Logged Bugs=12] 
```

我该怎么做..这是我将数据绑定到饼图的方式

```
 <script type="text/javascript">
  $(function () {
      $.getJSON('<%= Url.Action("GetData","JqueryCharts") %>', {}, function (data) {
          var json = data;
          alert(json);
          var jsondata = [];              
          for (var i in json) {
             // var serie = new Array(json[i].Projects, json[i].Bugs);
              jsondata.push([json[i].Projects, json[i].Bugs]);
          }              
      var chart = new Highcharts.Chart({
          chart: {
              renderTo: 'container',
              type: 'pie',
               plotBackgroundColor: null,
               plotBorderWidth: null,
               plotShadow: false
          },
           title: {
               text: 'Resource Reports of BugTracker'
           },              
          plotOptions: {
              pie: {
                  showInLegend: true,
                  animation: false,
                  allowPointSelect: true,
                  cursor: 'pointer'
              }
          },
          legend: {
              enabled: true
          },
          series: [{
              type: 'pie',
              name: 'Resource Reports',
              data: jsondata
          }]
      });
      });
  });
    </script> 
```

任何人都可以帮助我改变这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:12:18.220

默认情况下，Highchart 工具提示会选择工具提示中的系列名称。

您可以使用以下方式自定义工具提示：

```
tooltip: {
    formatter: function() {
          return '<b>ProjectName = '+ this.point.name +', Logged Bugs= '+ this.y + '</b>';
    }
} 
```

这是[示例](http://jsfiddle.net/mhardik/5Ne5V/1/)

Highchart 有一个非常好的文档：[http ://api.highcharts.com/highcharts#tooltip](http://api.highcharts.com/highcharts#tooltip)

# c# - 从实体框架调用复杂的存储过程？

> ID：12105832
> 
> 赞同：2
> 
> 时间：2012-08-24T08:36:30.877
> 
> 标签：c#, entity-framework, stored-procedures

我正在寻找最优雅的方式让 Entity Framework 调用我的存储过程（删除、插入和更新）。问题是我首先使用数据库，我无法更改存储过程，并且存储过程的参数比相关表中的列多。我宁愿不使用功能导入，因为它们必须由我的代码调用，而不是由框架调用。感觉不够优雅。

Linq to SQL 有一个很好的解决方案。如果我在部分类中实现它们，代码生成器为我提供了框架调用的 Insert(instance)（和 Delete、Update）部分方法。从该方法中，我只需要使用实例变量调用 this.() ，然后添加我的额外参数。

在实体框架中执行此操作的最简单和最优雅的方法是什么？

/是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:41:36.000

据我所知，你不能——如果你不能改变存储过程，那么`ExecuteFunction`函数导入是你唯一的选择。不过，我非常希望被证明是错误的。

您是否考虑过以 EF 想要的形式创建新的存储过程，并从中调用现有的 SP？

# xml - 具有命名空间的 XML 属性的 XSD 语法

> ID：12105840
> 
> 赞同：5
> 
> 时间：2012-08-24T08:37:13.783
> 
> 标签：xml, namespaces, xsd, jaxb, schema

我有一个需要编写 XSD 的 xml 片段

```
<root xmlns="http://xmlns.oracle.com/sca/1.0" xmlns:id="http://xmlns.oracle.com/id/1.0">
  <service name="Book" id:number="465"/>
</root> 
```

以下 XSD 在生成 JAXB 类时会出错。

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xmlns.oracle.com/sca/1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="service">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="name"/>
                <xs:attribute ref="ns:number" xmlns:ns="http://xmlns.oracle.com/id/1.0"/>
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  </xs:schema> 
```

错误是

C:\Program Files\Java\jdk1.7.0_06\bin>xjc -p test C:\book.xsd 解析模式... [错误] src-resolve.4.2：解析组件“ns:number”时出错。检测到“ns:number”在命名空间“http://xmlns.oracle.com/id/1.0”中，但该命名空间中的组件无法从模式文档“file:/C:/book”中引用。xsd'。如果这是不正确的命名空间，则可能需要更改 'ns:number' 的前缀。如果这是正确的命名空间，则应将适当的“import”标签添加到“file:/C:/book.xsd”。file:/C:/book.xsd 的第 10 行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T14:12:43.163

实际上，您至少需要与命名空间一样多的 XSD 文件，因为一个 XSD 文件只能针对一个命名空间，或者没有。

由于您的根元素位于一个名称空间中，而属性位于另一个名称空间中，因此您至少需要两个文件。您通过***xsd:import*** “链接”它们。

**顶级 XSD：**

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema xmlns="http://xmlns.oracle.com/sca/1.0" xmlns:id="http://xmlns.oracle.com/id/1.0" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xmlns.oracle.com/sca/1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:import schemaLocation="xsd-syntax-for-xml-attributes-with-namespace1.xsd" namespace="http://xmlns.oracle.com/id/1.0" />
  <xsd:element name="root">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="service">
          <xsd:complexType>
            <xsd:attribute name="name" type="xsd:string" use="required" />
            <xsd:attribute ref="id:number" use="required" />
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

**xsd-syntax-for-xml-attributes-with-namespace1.xsd**

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema xmlns="http://xmlns.oracle.com/id/1.0" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xmlns.oracle.com/id/1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:attribute name="number" type="xsd:unsignedShort" />
</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:13:05.007

使用以下两种模式

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://xmlns.oracle.com/sca/1.0" xmlns:id="http://xmlns.oracle.com/id/1.0" xmlns:sca="http://xmlns.oracle.com/sca/1.0">
  <xs:import namespace="http://xmlns.oracle.com/id/1.0" schemaLocation="id.xsd"/>
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="sca:service"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="service">
    <xs:complexType>
      <xs:attribute name="name" use="required" type="xs:NCName"/>
      <xs:attribute ref="id:number" use="required"/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

**身份证**

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://xmlns.oracle.com/id/1.0" xmlns:id="http://xmlns.oracle.com/id/1.0" xmlns:sca="http://xmlns.oracle.com/sca/1.0">
  <xs:import namespace="http://xmlns.oracle.com/sca/1.0" schemaLocation="Untitled2.xsd"/>
  <xs:attribute name="number" type="xs:integer"/>
</xs:schema> 
```

# iphone - 加载视图控制器的问题

> ID：12105842
> 
> 赞同：0
> 
> 时间：2012-08-24T08:37:40.800
> 
> 标签：iphone, ipad

我有两个视图控制器，第一个显示按钮的网格，第二个显示详细视图，当单击第一个视图控制器的任何按钮时，我正在加载详细视图控制器。

```
 secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:[NSBundle mainBundle]];
    [secondViewController setFrame:CGRectMake(300, 60, 430, 620)];
    [self.view addSubview:secondViewController.view]; 
```

需要出现在第一个视图控制器和设置框架上并添加到第二个视图控制器。

当我加载[添加]我的第二个视图控制器到第一个。它允许我点击其他按钮，我也需要在加载第二个视图控制器时限制点击任何按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:54:15.713

在第一个视图上添加叠加层并在其上添加第二个视图，然后您的按钮将无法访问。请参阅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:52:07.497

当第二个视图控制器添加为子视图时，然后将所有按钮设置为你认为不应该被录制的 userInteractionEnabled 为 NO：

```
 yourButton.userInteractionEnabled = NO; 
```

当删除第二个视图控制器时，不要忘记将 userInteractionEnabled 设置为 YES，这些设置为 NO：

```
 yourButton.userInteractionEnabled = YES; 
```

# android - 附加了 ORMlite 的 Javadoc，但 Eclipse 未找到

> ID：12105847
> 
> 赞同：3
> 
> 时间：2012-08-24T08:37:54.163
> 
> 标签：android, eclipse, javadoc, ormlite

我在 Eclipse 中为 Android 使用 ORMlite 4.41。似乎无法让 javadoc 在 Eclipse 中工作。我在 ORMlite jars 中使用以下内容：

*   ormlite-android-4.41.jar
*   ormlite-core-4.41.jar

我已经下载了相应的 javadoc jar，并将它们导入到项目根目录中的“javadoc”文件夹中。

*   ormlite-android-4.41-javadoc.jar
*   ormlite-core-4.41-javadoc.jar

使用“构建路径”->“库”，我将两个 jar 的 Javadoc 位置正确设置为相应 jar 的工作区实例。我什至使用了“验证”，Eclipse 说它看起来有效。

我已经清理并重建了我的项目，并开始了新的 eclipse，但是每当我将鼠标悬停在代码中的 ORMlite 对象上时，我仍然得到“这个元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc。”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:27:38.390

[试试这个问题](https://stackoverflow.com/questions/12005089/class-not-found-exception-on-android-when-i-use-extends-ormlitebaseactivitydata)

在您的项目中添加一个文件夹 libs 并在该文件夹中复制所需的 ormlite 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T13:11:42.033

你必须告诉你的 ormlite jar 文件，它的 javadoc 在哪里。

您可以如下图所示执行此操作：

*   在您的包资源管理器中：右键单击 ormlite-core-x.xx.jar
*   选择“属性”
*   转到“Javadoc 位置”选项卡
*   输入 ormlite-core-x.xx-javadoc.jar的**位置**
*   单击 [OK] -> 完成，您现在应该会在悬停时看到 javadoc

![必要属性设置的屏幕截图](../Images/bf06a3bbae93a734036db643683e8f96.png)

# makefile - 为什么每次都遵循makefile重建目标“构建”

> ID：12105853
> 
> 赞同：4
> 
> 时间：2012-08-24T08:38:20.000
> 
> 标签：makefile, gnu-make

我有以下代码来解压目录中的所有文件并将其移动到构建目录。如果我多次调用 make，即使构建目录已经存在，它也会每次尝试执行“构建”目标。有没有人遇到过这个？

我发现了这个问题，但它不一样。 [Makefile 始终运行目标](https://stackoverflow.com/questions/8289026/makefile-always-running-target)

操作系统：Ubuntu 12.04 程序：GNU Make 3.81

```
build: mkBuildDir untar 
    chmod 700 build

.PHONY: mkBuildDir untar 

mkBuildDir: 
    mkdir build 

untar: *.tar.gz
    for prefix in *.tar.gz; do \
        tar xvf $$prefix --directory=build; \
    done

clean: 
    rm -Rf build 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T11:31:18.547

这*与*您链接的问题几乎相同。你永远不会创建一个名为 的文件`mkBuildDir`，所以它总是过时的，所以`build`总是过时的。

您的`mkBuildDir`目标没有做任何有用的事情（尽管我认为这是一个精简的 makefile）。如果你这样做了

```
# it'd be better to list the TARFILES explicitly, though this will probably work
TARFILES=`ls *.tar.gz`

all: build untar

build: $(TARFILES)
    test -d build || mkdir build
    chmod 700 build
    for prefix in $(TARFILES); do \
        tar xvf $$prefix --directory=build; \
    done

clean: 
    rm -Rf build 
```

that would probably accomplish what you're looking for.

Having too many phony targets in a Makefile is usually a makefile 'code smell'. They are rarely the best/idiomatic way of doing things.

# powershell - Exchange get-mailbox 命令接受什么输入？

> ID：12105854
> 
> 赞同：0
> 
> 时间：2012-08-24T08:38:20.157
> 
> 标签：powershell, exchange-server, ems

如果这个问题听起来太愚蠢，请多多包涵。但我很困惑 Exchange get-mailbox 命令接受什么作为身份输入。根据 Microsoft 的文档，(http://technet.microsoft.com/en-us/library/aa998579(v=exchg.80).aspx) 身份参数可以是别名、smtp 或显示名称，这很有意义.

但是，我有一个队友，在不同的办公室，可以使用帐户的 SamAccountName 作为 get-mailbox 命令的身份输入！SamAccountName 与别名、smtp 和显示名称都不相似......这真的让我感到困惑。我的队友不知道为什么这对他也有效。

有没有人很好地理解 get-mailbox 如何检索信息？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:41:01.243

`-Identity`在此处查看参数的文档： [http ://technet.microsoft.com/en-us/library/bb123685.aspx](http://technet.microsoft.com/en-us/library/bb123685.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:17:41.720

我的观点是 Exchange（至少从 2003 版开始）解析`sAMAccountName`为邮箱`recipient name`，就像它在`to:`域环境中来自 Outlook 的新电子邮件中的字段一样，但我找不到来自微软的官方文档

# python - 在子进程中执行 python 脚本 - 带图形

> ID：12105855
> 
> 赞同：0
> 
> 时间：2012-08-24T08:38:31.130
> 
> 标签：python, wxpython

我已经看到很多关于在子进程或线程中运行代码的东西，并且使用`multiprocessing`and`threading`模块真的很容易。但是，在 GUI 中执行此操作会增加额外的复杂性。

据我了解，如果您尝试从多个线程（或进程）操作它们，GUI 类不喜欢它。解决方法是将数据从您创建的任何线程发送到负责图形的线程，然后在那里渲染。

不幸的是，对于我想到的场景，这不是一个选项：我创建的 gui 允许用户编写自己的绘图代码，然后执行。这意味着我无法控制它们的精确绘图方式，我也不想拥有它。（**更新**：这些图显示在单独的窗口中，不需要嵌入到主 GUI 中的任何位置。我希望它们与主 GUI 分开存在，而不共享任何底层图形库堆栈。）

所以我现在想知道的是

*是否有一些干净（ish）的方式在一个全新的解释器实例中执行一串python代码，并与窗口系统有自己的联系？*

* * *

*回应评论：*

当前应用程序设置如下： 一个简单的 python 脚本加载一个 wxPython gui（一个 wx.App）。使用此 gui 用户可以设置模拟，其中一部分涉及在普通 python 中创建一个脚本，该脚本运行模拟并对结果进行后处理（这通常涉及绘制和显示它们）。目前我通过简单地在脚本代码上调用 exec() 来做到这一点。这工作正常，但在模拟运行时 gui 冻结。我已经尝试在子进程中运行嵌入式脚本，它也可以正常工作，直到您尝试显示创建的图形（通常使用 matplotlib 的 show()）。此时，wxPython、wx、gtk 等堆栈深处的某个库开始抱怨，因为您无法从多个线程操作它。我想要的*设置*to have 大致相同，但不是嵌入式脚本与主应用程序共享 GUI，而是希望它在自己的环境中显示图形。

*只是为了澄清：*

这**不是**关于“我如何进行多线程/多处理”甚至“我如何在单个 wxpython gui 中进行多线程/多处理”的问题。问题是如何*从*加载*全新*gui 的 gui 启动脚本。如何让窗口管理器将此脚本视为一个完全独立的应用程序？

最简单的方法是在某个临时文件夹中生成它，然后对 python 解释器进行非阻塞调用，但这会使通信更加困难，并且很难知道何时可以再次删除临时文件。我希望有一种更清洁、更动态的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:49:41.657

在 Windows 上，您可以使用来自另一个进程的父窗口创建窗口，并绘制到该窗口。[请参阅CreateWindowEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspxa)的 hWndParent 参数。

如果 wxWindows 支持明确地获取/设置，那么你应该很高兴。根据您的平台，在任何 Windows 系统中都可能出现类似的情况。

因此，只要让您的用户能够找到您的应用程序窗口的句柄，就应该让他们可以选择在您的应用程序中嵌入的视图上进行绘图，同时在他们自己的进程中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:35:01.237

我对 wx 没有太多了解，我使用 jython（用 java 实现的 python，你可以使用 java）和 swing。Swing 有自己的工作线程，如果您进行 gui 更新，您可以将代码包装到可运行文件中并使用`swing.invokelater`.

你可以看看 wx 是否有类似的东西，但是如果你只被允许从你创建它的线程中操作 gui 尝试类似的东西。为您的 gui 创建一个代理对象，它将您的所有调用转发到您的线程，该线程将它们转发到 gui。

但是像这样的代理会变得一团糟。你让他们用'updateGui'函数定义类怎么样，他们应该通过队列交还给你，你将在你的gui线程中执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T09:46:30.430

你可以简单地使用[子进程](http://docs.python.org/library/subprocess.html)来运行'python.exe'并将脚本输入管道吗？

或者，如果您想将一些（可腌制的）数据移动到运行脚本的新进程中，那么[multiprocessing包就足够了。](http://docs.python.org/library/multiprocessing.html#module-multiprocessing)只需创建一个运行脚本的函数/可调用对象，然后创建一个以可调用对象为目标的[Process](http://docs.python.org/library/multiprocessing.html#multiprocessing.Process)对象。这样，您应该能够传递一些数据，而不会出现 GUI 问题。

使用任何一种捕获文本都很容易，子进程允许这样做，仅此而已。使用多进程，您可以更轻松地来回传递 python 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T13:45:17.977

在 wxPython 领域中，当您使用线程时，您必须使用它的线程安全方法与 GUI 进行通信：wx.CallAfter、wx.CallLater 或 wx.PostEvent。在您的情况下，我将在单独的线程/进程中运行任何长时间运行的代码，并在完成处理后将结果发送到 GUI。GUI 可以实例化一个新框架并使用 matplotlib 或 PyPlot 来显示绘图，具体取决于您要走的路。我听说您也可以使用 FloatCanvas 绘制情节。

无论如何，如果您正确实例化新帧，那么您可以实例化 N 帧并显示它们并没问题。请参阅 wxPython wiki，了解一些使用 wx 线程的示例：[http ://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)

# objective-c - 解析xml并保存数据

> ID：12105857
> 
> 赞同：0
> 
> 时间：2012-08-24T08:38:42.110
> 
> 标签：objective-c, ios, xml, sqlite

我有一个问题，无法真正找到直接的答案。

我有一个从 xml 文件下载所有内容的应用程序。不幸的是，当用户没有互联网连接时，应用程序就没用了。我希望我的应用程序在没有互联网的情况下也有用。

我现在要做的是检查是否有互联网，如果有，下载并解析 xml 并检索所有图像和文本。接下来，我想保存它，并且仅在用户请求时刷新数据。如果没有互联网，应用程序应直接转到其保存的 xml 文件和保存的图像等。

我需要知道如何保存图像和文本，这甚至允许吗？我在某处读到了如何将图像保存到文档文件夹，但我可以说会有大约 300 张图像，这不会很乱吗？这甚至允许吗？

此外，如何保存文本？是否可以结合使用 sqlite 和保存到文档文件夹来做到这一点？

普拉斯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:47:41.887

您可以将内容存储在 plist 而不是 xml

**将值设置为 plist**

```
 NSData * data = [NSKeyedArchiver archivedDataWithRootObject:YourDataArray];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex:0];

    NSString *Path =[NSString stringWithFormat:@"%@/%@.plist",docDir,@"Content"];
    NSLog(@"%@",Path);
    BOOL didWriteSuccessfull = [data writeToFile:Path atomically:YES];
    if (didWriteSuccessfull) {
        NSLog(@"store succsessfully");
    }
    else {
        NSLog(@"no");
    } 
```

**从 plist 中获取价值**

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [paths objectAtIndex:0];

NSString *Path =[NSString stringWithFormat:@"%@/%@.plist",docDir,@"Content"];

if ([[NSFileManager defaultManager] fileExistsAtPath:Path])
{

    NewsToDisplay=[[NSArray alloc]initWithArray:[NSKeyedUnarchiver unarchiveObjectWithData:[NSData dataWithContentsOfFile:Path]]];

} 
```

# windows - 您可以在兼容模式下运行 Windows 批处理文件吗

> ID：12105861
> 
> 赞同：1
> 
> 时间：2012-08-24T08:39:13.707
> 
> 标签：windows, batch-file

我们在 Windows 7 上以 Windows XP 兼容模式运行以 exe 形式包装的 Java 应用程序，以解决性能问题。我们还提供了一个批处理文件来运行相同的 java 应用程序，有没有办法使用相同的兼容模式运行批处理文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-31T14:22:49.870

在命令行或 bat 文件中：

```
set __COMPAT_LAYER=WINXPSP3
app_you_want_to_run_in_compatibility_mode.exe 
```

还要检查：

*   [http://www.nebev.net/blog/?p=54](http://www.nebev.net/blog/?p=54)
*   [https://social.technet.microsoft.com/Forums/windows/en-US/b04c780a-86bd-420d-9d44-86e00e7c51de/compatibility-mode-from-command-line-is-it-possible?forum=w7itproappcompat](https://social.technet.microsoft.com/Forums/windows/en-US/b04c780a-86bd-420d-9d44-86e00e7c51de/compatibility-mode-from-command-line-is-it-possible?forum=w7itproappcompat)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:44:10.397

是的。只需右键单击批处理文件，打开属性。在兼容性选项卡中，设置所需的兼容性。

注意：AFAIK，兼容性设置在 Windows 注册表中设置。因此，如果您将批处理文件移动到另一台机器，则必须重新应用设置。否则，您需要找出所涉及的注册表项并将其添加到另一台机器的注册表中。

# html - 调整窗口大小时 HTML 菜单元素移动

> ID：12105864
> 
> 赞同：2
> 
> 时间：2012-08-24T08:39:17.763
> 
> 标签：html, css

我正在尝试使用 HTML 和 CSS 创建一个菜单。菜单看起来不错，但是当我重新调整资源管理器窗口的大小时，菜单项会移动 EG：

正常大小的窗口： ![正常大小的窗口：](../Images/1f9baa1f0aa8ae055ab5e19a525aa3ea.png)

![重新调整大小的窗口：](../Images/55fcdc16286d48b93ce69a8f21ff0a64.png)

下面是CSS：

```
body{
  padding: 0px;
  margin: 0px;

}

.logo{
    float: left;
}
#menubar{
  height: 90px;
  background-color: red;
  position: relative;
}
.mblinks{
  position: relative;
  height: 90px;
  text-align: center;
}
.mblinks li{
  display: inline;
 }
.mblinks li a{
  padding: 16px 30px;
  color: #fff;
  text-decoration: none;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:43:00.700

添加一些`min-width`到你的菜单栏

改变css如下

```
#menubar{
  height: 90px;
  background-color: red;
  min-width: 900px;   /* Give the value as per your need*/
  position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:43:18.697

这是因为您`li`的 s 设置为`.mblinks li{ display: inline; }`.

这将使列表项显示为文本，因此当修改窗口宽度时，项目将移动以适应其父项的范围。

您可以通过使用来抵消这种情况，`position: absolute;`但这也会将它们从文档流中取出，并且很难将它们与周围的其他元素保持在适当的位置。

请记住，此行为是一项功能，而不是错误。

您可以`float: left;`在您`li`的 s 上使用，但元素运动将大致相同。

# javascript - 在 Javascript 和服务器中读取第三方 Cookie

> ID：12105868
> 
> 赞同：4
> 
> 时间：2012-08-24T08:39:29.287
> 
> 标签：javascript, cookies, browser

如果域`foo.com`有 cookie `bar=1`，则在作为第一方访问域时放置 cookie。（所以，假设是：cookie已经存在，不是会话cookie，不是http-only，根下的cookie“ `/`”。这个问题不是关于写入cookie，而是关于读取。）

此外，浏览器禁用了 3rd 方 cookie 并且没有其他插件，只是一个干净安装的浏览器禁用了 3rd 方。也没有 P3P 标头`foo.com`。

在上述条件下，我的问题是：

当页面`foo.com/somepage.html`被放置在不同域（第三方）下的 iframe 中时

1.  `bar=1`浏览器在读取页面时会将cookie发送到服务器吗？
2.  页面中的 JavaScript 可以读取 cookie`bar=1`吗？
3.  在以上两种情况下，我会期望浏览器有什么不同吗？

**附加问题**

我不需要答案，因为我不使用这种情况，但很想知道。

如果可以读取，浏览器是否会在上述条件下更新 cookie（很像写入）（并且旧 cookie 在那里，只需要更新（而不是新写入））？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:49:01.270

> 1.) 浏览器会在读取页面时将 cookie bar=1 发送到服务器吗？

是的。

> 2.) 页面中的 JavaScript 可以读取 cookie bar=1 吗？

这将取决于它是否是会话 cookie（使用[`HttpOnly`](http://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie)标志创建）。如果它是会话 cookie，则无法从 javascrit 中读取它。它将被发送到服务器，`foo.com`并且服务器端脚本将能够读取它。

> 3.) 在以上两种情况下，我会期望浏览器有什么不同吗？

不。

当然，以上所有内容都适用于`foo.com`iframe 内的域。包含 HTML 页面和服务器对该 cookie 的访问权限为 0。

# c# - 没有这个的控制器扩展方法

> ID：12105869
> 
> 赞同：6
> 
> 时间：2012-08-24T08:39:42.817
> 
> 标签：c#, asp.net-mvc-3

我想创建控制器扩展方法。到目前为止我得到的是下面

```
public ActionResult Foo()
{
    this.ExtensionMethod();
    return View();
}

public static void ExtensionMethod(this Controller controller)
{

} 
```

我不喜欢的是必须使用`this`关键字调用 ExtensionMethod。有可能摆脱`this`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T08:44:39.250

不。

它是`this`使该方法成为扩展方法的关键字。没有它，它只是一个静态方法。

编辑：对不起，我误读了这个问题。有两个`this`关键字：一个在扩展方法中，一个用于调用它。

调用它时需要关键字的原因`this`是您需要指定要扩展的对象。`this`除非您指定关键字，否则 C# 不会自动将本地方法调用解析为扩展方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:44:56.770

这就是来龙去脉。你不能对它做任何事情。

您可能会考虑将其放入基类中——这通常不是一个好主意（因为它会炸毁基类）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T10:04:51.783

你可以像这样使用它。

```
this.ExtensionMethod(); 
```

或者

```
ExtenstionClassName.ExtensionMethod(this); 
```

你的选择...

# java - Subclipse 同步视图中缺少文件

> ID：12105870
> 
> 赞同：1
> 
> 时间：2012-08-24T08:39:47.413
> 
> 标签：java, eclipse, svn, subclipse

我最近从 Subversion 切换到 Subclipse¹。我真的很喜欢 Snychronize 视图，因为它允许我查看所有已更改的内容并单击一下即可提交。但是，我注意到一些更改的文件丢失了。这是一个屏幕截图：

![日食截图](../Images/2e56e3b8568ad77cf79f691011157f12.png)

请注意，右下角的同步视图仅显示`src`子文件夹中已更改的文件，而可用的修改文件要多得多（例如`AndroidManifest.xml`，`lint.xml`以及下面的一堆文件`res`）。这是设计使然（如果是，我该如何更改？）还是我偶然发现了一个错误？

PS：`Commit`在 Snychronize 视图中调用只会提交 src 中的那几个文件，而`Team/Commit`从项目的上下文菜单中选择会提交*所有*更改的文件。重新启动 Eclipse 或在同步视图中重新同步并不能解决问题。

* * *

¹ ...因为[在 Subversive 中移动文件效果不佳](https://stackoverflow.com/questions/420013/conveniently-move-a-class-to-a-different-package-in-eclipse-without-borking-svn)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:03:34.623

您的同步视图仅显示文件夹 ../tablet。做一个团队 -> 与项目根目录上的存储库同步。

# javascript - 重绘/刷新/设置超时 - 数据 xmlhttp.responseText

> ID：12105872
> 
> 赞同：1
> 
> 时间：2012-08-24T08:39:51.390
> 
> 标签：javascript, jquery, xmlhttprequest

我有一个从第二个选择框上的 onchange 调用的函数。然后将这 2 个值传递给 getlog.php，它从表中的数据库返回值（使用数据表）。这一切都很棒。

我面临的问题是，对于我使用的每一行`$('a.delete').click(function(e) {})`，这会删除带有 jquery animate 的行，从数据库中删除，但也会重新计算“days_left”字段，我需要找到一种方法来刷新来自 getlog 的数据.php 一旦`$('a.delete').click`完成。

我曾尝试在 ajax 成功和使用时重绘数据表，`fnReloadAjax()`但似乎都不起作用，所以我发现 xmlhttp 设置超时，但这并不是我想要的解决方案，因为我想在其中运行重绘/刷新`$('a.delete').click(function(e) {}`

即使我使用 xmlhttp 设置超时，它也会丢失变量，所以在萤火虫中它会出现“未定义”。

有人知道我如何解决我的问题吗？希望我已经正确解释了，在此先感谢

**形式**

```
<select id="employee_user">
<option value="">--</option>
<option value="333">Test User</option>
<option value="111">Testing Testing</option>    
</select>

<select id="they" onchange="showUser(this.value, employee_user.value)">
<option value="">--</option>
<option value="20120801" class="333" title="Test User">20120801</option>
<option value="20110801" class="333" title="Test User">20110801</option>
<option value="20100801" class="333" title="Test User">20100801</option>
<option value="20120801" class="111" title="Testing Testing">20120801</option>
<option value="20110801" class="111" title="Testing Testing">20110801</option>
</select>

</form> 
```

**功能**

```
 function showlog(str, username)
     {
     if (str=="")
       {
       document.getElementById("txtHint").innerHTML="";
       return;
       } 
     if (window.XMLHttpRequest)
       {// code for IE7+, Firefox, Chrome, Opera, Safari
       xmlhttp=new XMLHttpRequest();
       }
     else
       {// code for IE6, IE5
       xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
       }
     xmlhttp.onreadystatechange=function()
       {
       if (xmlhttp.readyState==4 && xmlhttp.status==200)
         {
         document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
             var $ellttable = $('#view_employee_log_table').dataTable({
            "iDisplayLength": 30,       
            "sDom": '<"clear">t>',
            "aaSortingFixed": [[3,'desc']],
            "aoColumns": [
                { "bSortable": false },
                { "bSortable": false },
                { "bSortable": false },
                { "bSortable": false }
                ]
         });    
         var $eltable = $('#view_employee_log_table1').dataTable({
            "iDisplayLength": 30,       
            "sDom": '<"clear">t>',
            "aaSortingFixed": [[3,'desc']],
            "aoColumns": [
                { "bSortable": false },
                { "bSortable": false },
                { "bSortable": false },
                { "bSortable": false }
                ]
         });
      $('a.delete').click(function(e) {
        e.preventDefault();
        var parent = $(this).parent();
        $.ajax({
          type: 'get',
          url: 'getuser.php',
          data: 'ajax=1&delete=' + parent.attr('id').replace('record-',''),
          beforeSend: function() {
            parent.animate({'backgroundColor':'#fb6c6c'},300);
          },
          success: function() {
            parent.slideUp(300,function() {
            $ellttable.fnDraw();
            $eltable.fnDraw();
            });
          }
        });
      });

         }
       }
     xmlhttp.open("GET","getlog.php?username="+username+"&year="+str,true);
     xmlhttp.send();
     setTimeout(showlog, 1500);
    } 
```

**GETLOG.PHP**

```
<?php

$year = $_GET["year"];
$username = $_GET["username"];

$is_academic_result = mysql_query('SELECT * FROM holiday_entitlement_academic WHERE userid = \'' . $username . '\' AND academic_year = \'' . $year . '\' ');
$is_business_result = mysql_query('SELECT * FROM holiday_entitlement_business_manual WHERE userid = \'' . $username . '\' AND academic_year = \'' . $year . '\' ');

if($is_academic = mysql_fetch_array($is_academic_result)) {

echo'<div style="float:left; width:400px;">';

echo'<table width="100%">
<tr>
<td><strong>Name:</strong></td>
<td>'.$is_academic['employee'].'</td>
</tr>
<tr>
<td><strong>Entitlement:</strong></td>
<td>'.$is_academic['entitlement'].' '.$is_academic['units'].'</td>
</tr>
<tr>
<td><strong>Department / Division:</strong></td>
<td>'.$is_academic['division'].'</td>
</tr>
<tr>
<td><strong>Line Manager:</strong></td>
<td>'.$is_academic['line_manager'].'</td>
</tr>
</table>';
echo'<br/>';

echo'</div>';

echo'<div style="float:right; width:400px;">';

echo'<table width="100%">
<tr>
<td><strong>Days Left:</strong></td>
<td>'.$is_academic['days_left'].'</td>
</tr>
</table>';
echo'<br/>';

echo'</div>';

echo'<table class="dataTable" id="academic_days_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<th>Start Date</th>
<th>End Date</th>
<th>'.$is_academic['units'].' to be taken</th>
<th></th>
</thead>';

echo '<tr>';

echo '<td>-</td>';
echo '<td>-</td>';
echo '<td>-</td>';
echo '<td></td>';

echo '</tr>';

$input = $is_academic['entitlement'];
}

else if($is_business = mysql_fetch_array($is_business_result)) {

echo'<div style="float:left; width:400px;">';
echo'<table width="100%">
<tr>
<td><strong>Name:</strong></td>
<td>'.$is_business['employee'].'</td>
</tr>
<tr>
<td><strong>Entitlement:</strong></td>
<td>'.$is_business['new_entitlement'].' '.$is_business['units'].'</td>
</tr>
<tr>
<td><strong>Department / Division:</strong></td>
<td>'.$is_business['division'].'</td>
</tr>
<tr>
<td><strong>Line Manager:</strong></td>
<td>'.$is_business['line_manager'].'</td>
</tr>
</table>';
echo'<br/>';
echo'</div>';

echo'<div style="float:right; width:400px;">';
echo'<table width="100%">
<tr>
<td><strong>Days Left:</strong></td>
<td>'.$is_business['days_left'].'</td>
</tr>
</table>';
echo'<br/>';
echo'</div>';

echo'<table class="dataTable" id="business_days_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<th>Start Date</th>
<th>End Date</th>
<th>'.$is_business['units'].' to be taken</th>
<th></th>
</thead>';

echo '<tr>';

echo '<td>-</td>';
echo '<td>-</td>';
echo '<td>-</td>';
echo '<td></td>';

echo '</tr>';

$input = $is_business['new_entitlement'];
}

else {echo 'You currently dont have a record for this academic year. ';}

//$requests_result = mysql_query('
//SELECT * 
//FROM holiday_entitlement_business_manual
//LEFT JOIN requests ON holiday_entitlement_business_manual.employee = requests.employee
//WHERE employee = \'' . $username . '\' AND academic_year = \'' . $acyear . '\' ');

$requests_result = mysql_query('SELECT * FROM requests WHERE userid = \'' . $username . '\' AND approved = 1 AND academic_year = \'' . $year . '\' ORDER BY start_date ASC');

$remainder = 0;

while($requests = mysql_fetch_array($requests_result)) {

$start_date = new DateTime($requests['start_date']);
$end_date = new DateTime($requests['end_date']);

$timestamp_start_date = $start_date->getTimestamp();
$timestamp_end_date = $end_date->getTimestamp();

$formatted_start_date = date("d M Y", $timestamp_start_date);           
$formatted_end_date = date("d M Y", $timestamp_end_date);   

$remainder = ($remainder == 0) ? $input : $remainder;
$out = $remainder - $requests['days'];
if($out < 0){
      break;
}
$remainder = $out;

echo'<tr class="record" id="record-',$requests['id'],'" title="',$requests['user'],'" lang="',$requests['academic_year'],'">';
echo'<td>'.$formatted_start_date.'</td>';
echo'<td>'.$formatted_end_date.'</td>';
echo'<td>'.$requests['days'].'</td>';
echo'<td><a href="?delete=',$requests['id'],'&employee=',$requests['user'],'&acyear=',$requests['academic_year'],'" class="delete"><img src="images/cross.png"></a></td>';
echo'</tr>';
}

echo'</table>';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:42:41.563

您需要决定是命名函数`showUsers`还是`showlog`，因为您的 HTML 引用了一个，而您的 JavaScript 定义了另一个。

我建议稍微清理一下代码。例如，您的代码中有相当一部分用于重新实现 jQuery 的`$.ajax()`方法。@GregRoss 对使用`jQuery.live()`or的评论提出了一个很好的观点`jQuery.on()`。

因此，作为一个快速重构：

```
function showlog(str, username)
{
    if (!(str))
    {
        $("#txtHint").html("");
        return;
    }
    $.ajax({
        url: "getlog.php?username="+username+"&year="+str,
        type: 'GET',
        success: function (data) {
            $('#txtHint').html(data);
            var $ellttable = $('#view_employee_log_table').dataTable({
                "iDisplayLength": 30,       
                "sDom": '<"clear">t>',
                "aaSortingFixed": [[3,'desc']],
                "aoColumns": [
                    { "bSortable": false },
                    { "bSortable": false },
                    { "bSortable": false },
                    { "bSortable": false }
                ]
            });
            var $eltable = $('#view_employee_log_table1').dataTable({
                "iDisplayLength": 30,       
                "sDom": '<"clear">t>',
                "aaSortingFixed": [[3,'desc']],
                "aoColumns": [
                    { "bSortable": false },
                    { "bSortable": false },
                    { "bSortable": false },
                    { "bSortable": false }
                ]
            });
         }
     });
}

// Somewhere, maybe in document.ready:
$('body').on('click', 'a.delete', function(e) {
    e.preventDefault();
    var parent = $(this).parent();
    $.ajax({
        type: 'get',
        url: 'getuser.php',
        data: 'ajax=1&delete=' + parent.attr('id').replace('record-',''),
        beforeSend: function() {
            parent.animate({'backgroundColor':'#fb6c6c'},300);
        },
        success: function() {
            parent.slideUp(300,function() {
                $('#view_employee_log_table').dataTable('fnDraw');
                $('#view_employee_log_table1').dataTable('fnDraw');
            });
        }
    });
}); 
```

当然，我还没有测试过这个，但它至少应该和以前一样好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:08:37.353

你可以让你的函数`$('a.delete').click(function(e, callback()) {}`接受一个回调参数并传递它`fnReloadAjax()`。

更多关于回调的信息可以在这里找到（[stackoverflow](https://stackoverflow.com/questions/2190850/javascript-create-custom-callback)）

# gwt - 如何在具有相同高度的两个面板上拆分

> ID：12105874
> 
> 赞同：0
> 
> 时间：2012-08-24T08:40:23.450
> 
> 标签：gwt

你能告诉我如何使用 SplitLayoutPanel 和 UI builder 将页面拆分为两个部分吗？我想要水平线来调整两个面板的大小。

我试过了

```
<g:SplitLayoutPanel ui:field="main">
    <g:north size="50" unit="PCT">
        ...
    </g:north>
    <g:south size="50" unit="PCT">
        ...
    </g:south>
</g:SplitLayoutPanel> 
```

但我有两条线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:42:50.377

尝试`<g:center>`两个面板之一。

并在每个部分中指定单位`<g:SplitLayoutPanel unit="PCT">`（这会强制您对所有部分使用相同的单位）。

* * *

如果使用 N 和 S，它将使用剩余空间放置 N、S 和一个中心（它没有意识到 50% + 50% 占用了所有可用空间）。

如果你使用 N 和中心，它会说：使用 50% 为北，其余 (50%) 为中心。

# rpc - rpc怎么能跨局域网？

> ID：12105877
> 
> 赞同：0
> 
> 时间：2012-08-24T08:40:33.263
> 
> 标签：rpc

RPC服务器需要一个IP地址来绑定，客户端可以使用IP地址作为参数访问远程过程。

但是，如果服务器在公司的局域网中，远程客户端（不在局域网中）如何访问局域网中的 rpc 服务器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:52:08.633

**您需要将您在路由器中使用的端口转发到您服务器的 IP 地址。您还需要打开服务器上的端口。**

然后可以从以下 IP 地址访问您的服务器：[What Is My Ip.com](http://www.whatismyip.com/ "我的IP")
还有一个用于转发端口的链接：[portforward](http://portforward.com/)

# javascript - jquery .load() 外部内容后无法滚动

> ID：12105880
> 
> 赞同：3
> 
> 时间：2012-08-24T08:40:36.833
> 
> 标签：javascript, jquery, dom, scroll

我在尝试在 jQuery 加载后立即滚动浏览器窗口时遇到问题。内容加载正常，加载完成后调用的函数正在被调用。但是，如果我将超时设置为 300 毫秒，我只能让页面实际滚动：

```
frame.html("#box").load("loadedfile.php", function(){
   setTimeout(function() {
       $('html,body').animate({
          scrollTop: $("#framed").offset().top
          }, 750);
       },300);
    }); 
```

加载完成功能似乎在内容加载之后执行，但在浏览器能够滚动之前（因为承载脚本的页面最初的长度不足以激活滚动条）。

我的解决方法感觉草率，可能是。有没有更好的方法来处理这个问题？超时似乎不是处理此问题的可靠方法。

*除了 .animate 之外，我还尝试过 window.scrollTo 以及 jQuery scrollTo 插件*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:06:46.147

您可以使用 ajax 调用来加载外部页面，并且在成功后您可以使用所有滚动动画。

```
$.ajax({
        url: 'loadedfile.php',
        dataType: "html",                 // <-- set dataType to "html"
        success: function(response) {
            $("#box").html(response).fadeIn(1000); // <-- added fadeIn()
        $('html,body').animate({
            scrollTop: $("#framed").offset().top
          }, 750);
        }
    }) 
```

希望它对你有用。如果没有，请提供链接以实际查看您的问题，以便对其进行整理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T08:51:05.103

## 这段代码对我有用

```
lastElementTop = $('#id').position().top;
scrollAmount = lastElementTop  +- something;
$('html,body').animate({scrollTop: scrollAmount},1000); 
```

# android - Android 从 Activity 到 Service / Engine 的最佳通信方式

> ID：12105883
> 
> 赞同：2
> 
> 时间：2012-08-24T08:40:44.813
> 
> 标签：android, android-service

我有一个需要启动活动的 WallpaperEngine - 一个简单的选项菜单。

我需要该菜单选择的结果。从活动返回服务的最佳方式是什么，因为它没有对服务的引用，而且我不能执行 startActivityForResult。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:08:50.473

您可以使用`Binders`和`ServiceConnection`连接`Serivce`到您的`Activity`.

在你的`Activity`：

```
private YourService mService;

private ServiceConnection mConnection = new ServiceConnection() {       
    public void onServiceConnected(ComponentName name, IBinder service) {
        mService = ((YourBinder)service).getService();
    }

    public void onServiceDisconnected(ComponentName name) {
        mService = null;
    }
};

@Override
protected void onResume() {
    bindService(new Intent(this, YourService.class), mConnection, Context.BIND_AUTO_CREATE);
    super.onResume();
}

@Override
protected void onPause() {
    if(mConnection != null){
        unbindService(mConnection);
    }   
    super.onPause();
} 
```

你的`Binder`：

```
public class YourBinder extends Binder {
    private WeakReference<YourService> mService;

    public YourBinder(YourService service){
        mService = new WeakReference<YourService>(service)
    }

    public YourService getService(){
        return mService.get();
    }
} 
```

在你的`Service`：

```
@Override
public IBinder onBind(Intent intent) {
    return new YourBinder(this);
} 
```

在此之后，您可以`Service`从您的`Activity`. 请注意，绑定是异步的。当您可以与 UI 交互时`Activity`，连接已经建立，但在`onCreate()`and`onResume()`方法中，您的`Service`对象可能仍为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:03:05.967

看看这里的教程： [http ://www.ozdroid.com/#!BLOG/2010/12/19/How_to_make_a_local_Service_and_bind_to_it_in_Android](http://www.ozdroid.com/#!BLOG/2010/12/19/How_to_make_a_local_Service_and_bind_to_it_in_Android)

您将要做的是将您的活动绑定到服务，这将为活动提供参考以及对​​服务执行任何操作的能力。（本教程涵盖从活动启动服务，但您当然不需要这样做）

# java - IntentReceiverLeaked 使用 AdMob

> ID：12105884
> 
> 赞同：6
> 
> 时间：2012-08-24T08:40:46.390
> 
> 标签：java, android, android-intent, admob

出于某种原因，我在我的应用程序（冥想网络）中尝试使用 AdMob 时一直遇到此错误。

```
Activity com.tfl.tfl.tagDetailActivity has leaked IntentReceiver com.adsdk.sdk.banner.AdView$6@405940a0 that was originally registered here. Are you missing a call to unregisterReceiver()?
android.app.IntentReceiverLeaked: Activity com.tfl.tfl.tagDetailActivity has leaked IntentReceiver com.adsdk.sdk.banner.AdView$6@405940a0 that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

以下是相关的代码： OnCreate

```
 adView = new AdView(this, AdSize.BANNER, ADMOB_PUBLISHER_ID);
    LinearLayout layout = (LinearLayout) findViewById(R.id.tag_detail_ad_layout);
    layout.addView(adView);
    adView.loadAd(buildAdMobRequest()); 
```

...

```
@Override
public void onDestroy() {
    if (adView != null) {
        adView.destroy();
    }
    super.onDestroy();
} 
```

通过阅读，似乎破坏 adview 应该可以解决问题，但我仍然遇到错误。当我从包含广告的页面点击“返回”时，会出现错误。

# asp.net - 如何判断我在运行时使用的实体框架的版本？

> ID：12105892
> 
> 赞同：1
> 
> 时间：2012-08-24T08:41:29.520
> 
> 标签：asp.net, entity-framework

是否有某个 EF 类的方法或属性可以告诉我？我必须编写代码将其从 EF 程序集中提取出来吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:04:04.220

您应该导入`System.Reflection`以实现此目的。

C＃

```
var entityAssembly = Assembly.LoadWithPartialName("System.Data.Entity");
var assemblyVersion = entityAssembly != null ? entityAssembly.ImageRuntimeVersion : ""; 
```

VB.NET

```
Dim u As Assembly = Assembly.LoadWithPartialName("System.Data.Entity")
Dim assemblyVersion = IIf(entityAssembly Is Not Nothing, entityAssembly.ImageRuntimeVersion, "") 
```

免责声明：请注意，[`Assembly.LoadWithPartialName`](http://msdn.microsoft.com/en-us/library/12xc5368.aspx)它已从 ASP.NET Framework 2.0 中删除

# mysql - 获取每列值的前 N 个结果

> ID：12105893
> 
> 赞同：1
> 
> 时间：2012-08-24T08:41:33.897
> 
> 标签：mysql, greatest-n-per-group

我有一张这样的桌子：

```
+--------+--------+
|  name  |  kind  |
+--------+--------+
| cat    | animal |
| dog    | animal |
| horse  | animal |
| ant    | animal |
| bird   | animal |
| tree   | plant  |
| grass  | plant  |
| carrot | plant  |
|                 |
|     ... etc.    |
+--------+--------+ 
```

我如何获得每种**类型**的 Top N 项？例如 N=2：

```
+--------+--------+
|  name  |  kind  |
+--------+--------+
| ant    | animal |
| bird   | animal |
| carrot | plant  |
| grass  | plant  |
+--------+--------+ 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:54:20.553

这是一个[SqlFiddle 演示](http://sqlfiddle.com/#!2/b3d6f/5)：

```
select name,kind from
(

select Name,Kind,
      @i:=if(@kind=kind,@i+1,1) rn,
      @kind:=kind 
      from t, (select @i:=0,@kind:='') d 
      order by Kind,name
) t1
where t1.rn<=2
     order by Kind,name 
```

# batch-file - 使用时间戳作为文件名的批处理脚本将输出文件重定向到日志文件

> ID：12105896
> 
> 赞同：0
> 
> 时间：2012-08-24T08:41:36.337
> 
> 标签：batch-file

我们在 Windows 上有一个名为 readfile.pl 的脚本，现在我需要一个批处理脚本来执行此脚本并将输出重定向到每次运行时的新日志文件（批处理不应删除或修改以前的日志文件）和日志的名称文件应该类似于 log_date_time.txt。例如，如果 readfile.pl 脚本在 2012 年 8 月 24 日上午 10:30 执行，则日志文件必须是 log_20120824_10_30.log。有人可以帮我解决这个问题吗？

reafile 脚本位于 d:\ 并且日志文件位置是 c:\readlogs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:33:59.427

不是 100% 确定你要做什么，但试试这个。

```
command >>log_%date:~10,4%%date:~4,2%%date:~7,2%_%time:~0,2%_%time:~3,2%.log 
```

当我回显该命令时，我得到了什么。

```
log_20120922_10_33.log 
```

# xslt - ColdFusion - 非法的 HTML 字符

> ID：12105897
> 
> 赞同：1
> 
> 时间：2012-08-24T08:41:42.017
> 
> 标签：xslt, coldfusion, coldfusion-8

```
<xsl:attribute name="title">
   <xsl:value-of select="title" disable-output-escaping="yes"/>
</xsl:attribute>

<xsl:value-of select="title" disable-output-escaping="yes"/> 
```

我在 CF 8 中有上面的代码。第二行工作正常，但第一行错误。有什么理由吗？它们实际上是相邻的。我完全被难住了。

谢谢

# c# - C# 中的 MySQL 备份数据库

> ID：12105898
> 
> 赞同：1
> 
> 时间：2012-08-24T08:41:42.437
> 
> 标签：c#, mysql

我从[HERE](http://www.mediacollege.com/computer/database/mysql/backup.html)找到了一个关于如何备份数据库的查询，但它不工作并且会引发错误。请提供任何帮助。TIA

**代码：**

```
using MySql.Data.MySqlClient;
public bool BackupDatabase(string filename = "")
{
    bool _isExecuted = false;

    if (filename == "")
    {
        filename = string.Format("{0}/db_{1:MMddyyyyHHmmss}.sql", Environment.GetFolderPath(Environment.SpecialFolder.Desktop), DateTime.Now);
    }

    string _queryBackup = string.Format("mysqldump -u '{0}' -p '{1}' '{2}' > '{3}'", DatabaseUsername, DatabasePassword, DatabaseName, filename);         
    using (MySqlConnection con = new MySqlConnection(ConnectionString))
    {
        try
        {
            con.Open();
            MySqlCommand cmd = new MySqlCommand(_queryBackup, con);

            cmd.ExecuteNonQuery();
            _isExecuted = true;
        }
        catch (Exception ex)
        {
            string _x = ex.Message;
        }
    }

    return _isExecuted;
} 
```

**错误：**

**_x**包含此错误

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在 'mysqldump -u 'root' -p 'usbw' 'my_database_name' > 'C:\Users\DesktopName 附近使用正确的语法\Desktop\db_08242012164022.sql' 在第 1 行"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:44:18.960

您的 _queryBackup 不是 sql 查询字符串，而是要从系统运行的字符串，就像您从 cmd 控制台运行它一样。

这是一些从 C# 运行命令的代码，例如您的命令

```
 var startInfo = new ProcessStartInfo(command, parameterstring);
  startInfo.RedirectStandardError = true;
  startInfo.CreateNoWindow = true;
  startInfo.RedirectStandardOutput = true;
  startInfo.UseShellExecute = false;
  startInfo.ErrorDialog = false;
  Process process = Process.Start(startInfo);
  StreamReader stdoutSR = process.StandardOutput;
  string stdout = stdoutSR.ReadToEnd();
  StreamReader stderrSR = process.StandardError;
  string stderr = stderrSR.ReadToEnd(); 
```

# javascript - FileEntry.file 方法使 dataTransferItemList 为空

> ID：12105900
> 
> 赞同：0
> 
> 时间：2012-08-24T08:41:58.603
> 
> 标签：javascript, html

我正在尝试实现上传文件和文件夹的能力。我在 chrome 中删除了一些文件和文件夹，然后我得到了 dataTransferItemList 类型的条目列表，然后我想对列表中的每个条目执行一些操作。我得到一个带有 webkitGetAsEntry 函数的条目，当我尝试调用 FileEntry 对象的文件函数时，dataTransferItemList 变为空。

```
_processEntries: function () {
        //this._entries list of entries of type dataTransferItemList
        var entry = this._getNetxFileEntry(this._entries);
        if (!isNullOrUndefined(entry)) {
            if (entry.webkitGetAsEntry) {
                entry = entry.webkitGetAsEntry();
            } else {
                //TODO: code for other browsers without getAsEntry implementation
            }

            if (entry.isFile) {
                this._readAsFileEntry(entry);
            }
            else if (entry.isDirectory) {
                this._readAsDirectoryEntry(entry);
            }
        }
    },

    _readAsFileEntry: function (fileEntry) {
        fileEntry.file($.proxy(this._onFileSuccessfullyRead, this));
    },

    _onFileSuccessfullyRead: function (file) {
        //Here this._entries becomes empty so i can't read next entry
    }, 
```

为什么会发生，在这种情况下我如何处理所有实体？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:29:26.257

我也为此感到很头疼。

我这样解决了

```
afterInit : function() {

    this.uploads = [];

    this.entries = [];
    for ( var i = 0; i < this.options.items.length; i++)
        this.entries.push(this.options.items[i].webkitGetAsEntry());

    this.scan(0);

},

scan : function(i) {

    if (i >= 0 && i < this.entries.length) {

        var entry = this.entries[i];

        if (entry.isDirectory) {
            entry.createReader().readEntries(this.readEntries.bind(this, i + 1));
        } else if (entry.isFile) {
            this.manageFileEntry(entry);
            this.scan(i + 1);
        }

    } else if (this.uploads.length > 0)
        this.doUpload(0);

} 
```

请记住 .file() 和 .readEntries() 是异步的。这意味着您的方法将立即返回，并且允许 JS 引擎“释放”资源。由于它是异步的，因此有一段时间（即您的方法返回时） dataTransferItemList 超出范围，因此被释放（设置为 null）。

正如您在我的代码中看到的那样，由于对 .file() 或 .readEntries() 的异步调用，我在项目超出范围之前预防性地保存了调用 .webkitGetAsEntry() 的条目引用。

希望这会有所帮助，在找出解决方案之前，我花了 2 个小时进行调试！

# ios - Linkedin - iOS - 检测用户取消登录

> ID：12105908
> 
> 赞同：0
> 
> 时间：2012-08-24T08:42:29.260
> 
> 标签：ios, ipad, oauth, linkedin

我有`OAuthStarterKit`运行和工作的链接（网络视图很慢！）基本视图带有一些基本代码，用于检测弹出式网络视图何时关闭（参见以下函数）。

问题是，当用户看到 Linkedin 登录页面时，它无法检测到用户何时单击取消按钮。网址：`https://www.linkedin.com/uas/oauth/www.core.me`。

**我将如何过滤“已取消”页面？**

![取消视图](../Images/91830eb17c85cc3d6a911faa3e9ef642.png) ![错误](../Images/eff90ba15a0f9fd693ffe81047c48eaa.png)

## 过滤/关闭代码

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType 
{
    NSURL *url = request.URL;
    NSString *urlString = url.absoluteString;

    addressBar.text = urlString;
    [activityIndicator startAnimating];

    BOOL requestForCallbackURL = ([urlString rangeOfString:linkedInCallbackURL].location != NSNotFound);
    if ( requestForCallbackURL )
    {
        BOOL userAllowedAccess = ([urlString rangeOfString:@"user_refused"].location == NSNotFound);
        if ( userAllowedAccess )
        {            
            [self.requestToken setVerifierWithUrl:url];
            [self accessTokenFromProvider];
        }
        else
        {
            // User refused to allow our app access
            // Notify parent and close this view
            [[NSNotificationCenter defaultCenter] 
                    postNotificationName:@"loginViewDidFinish"        
                                  object:self 
                                userInfo:nil];

            [self dismissModalViewControllerAnimated:YES];
        }
    }
    else
    {
        // Case (a) or (b), so ignore it
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:50:53.373

## 回答！

这就是我最终在我的代码中使用的！希望它可以帮助某人！

```
- (void)webViewDidFinishLoad:(UIWebView *)mwebView
{
    [activityIndicator stopAnimating];
    NSString *html = [mwebView stringByEvaluatingJavaScriptFromString:
                      @"document.body.innerHTML"];

    if ([html rangeOfString:@"Page Not Found"].location != NSNotFound) {
        // This could be any string - I used "Page Not Found" 
        [[NSNotificationCenter defaultCenter]
         postNotificationName:@"loginViewDidFinish"
         object:self
         userInfo:nil];

        [self dismissModalViewControllerAnimated:YES];
    }
} 
```

# php - 从mysql中删除它喜欢数字的记录

> ID：12105912
> 
> 赞同：0
> 
> 时间：2012-08-24T08:42:47.113
> 
> 标签：php, mysql

我想使用 php 从 mysql 中删除记录

字段名称：周

周记录值如下：

```
200801
200802
200803
200804
200805
etc 
```

我创建了名为“tYear”的TextField，用户将从左侧插入前4个数字，sql语句应该删除所有以它们开头的记录，例如......如果用户插入2008年所有上述记录，因为它们从2008年开始应该被删除.

我正在使用如下的 sql 语句，但它不起作用

```
$sql= "DELETE from sites WHERE Week like '". $_POST['tYear']."'";
$results = mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:44:41.793

您的查询是：$sql="DELETE from sites WHERE Week like '"。$_POST['tYear']."'";

并且`like`在 mysql 中，您必须`like '%%' or like '%'`使用：

```
$sql= "DELETE from sites WHERE 
        Week like '%". mysql_real_escape_string($_POST['tYear'])."%'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:45:04.757

使用喜欢

```
$sql= "DELETE FROM `sites` WHERE `Week` LIKE '". (int)$_POST['tYear']."%'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:46:17.557

试试这个

```
$sql= "DELETE from sites WHERE Week like '". $_POST['tYear']."%'" 
```

# automatic-ref-counting - C++ 类“不能在 ARC 和非 ARC 代码之间共享……”

> ID：12105925
> 
> 赞同：3
> 
> 时间：2012-08-24T08:43:58.143
> 
> 标签：automatic-ref-counting, objective-c++

编译 Objective-C++，我得到以下诊断：

```
'MyClass' cannot be shared between ARC and non-ARC code; add a non-trivial copy assignment operator to make it ABI-compatible 
```

缺少复制构造函数和析构函数也会出现类似的错误。添加必要的方法很容易，但它们通常没有意义，特别是对于我想要使其不可复制的类，并且我不会混合 ARC 和非 ARC 代码（至少不是故意的）。

为什么我会收到此消息，我可以在不为所有 C++ 类编写无意义的成员函数的情况下摆脱它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T20:35:52.557

这是因为 ARC 不鼓励在[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)结构和 C++ 类中使用 Objective-C 对象，因为它们的包含使得管理它们的内存变得模棱两可。您可以通过在 Objective-C 成员前面加上`__unsafe_unretained`限定符来解决它，这告诉 ARC 保持它的粘性手指离开类，但使您处于不得不自己管理成员对象的内存的尴尬境地。此外，具有内部链接的对象不在警告范围内，因此将您的类或结构包装在不合格的`namespace { }`作品中也是如此。如果您绝对必须在碰巧将 Objective-C 对象作为类成员的文件（或多个文件）中使用 ARC，则必须提供正确的访问运算符（如警告所述），否则只需关闭 ARC 并省去麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T22:59:43.037

The restriction is mentioned in in [this section of the ARC specification](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership-qualified-fields-of-structs-and-unions):

> However, nontrivally ownership-qualified types are considered non-POD: in C++11 terms, they are not trivially default constructible, copy constructible, move constructible, copy assignable, move assignable, or destructible. It is a violation of C++’s One Definition Rule to use a class outside of ARC that, under ARC, would have a nontrivially ownership-qualified member.

The reason for it is this: In ARC, when you use an Objective-C object as a field of a C++ struct or class, ARC implicitly adds code to the default constructor, copy constructor, destructor, etc. to manage the memory for the fields. And if the struct or class doesn't have these constructors/destructors, ARC automatically adds them.

This means that if such a struct or class was considered "POD" (a C++ term meaning it has no special constructors/destructors) originally, ARC makes it non-POD by implicitly adding these special constructors/destructors. However, C++ treats POD and non-POD types differently in some places. If such an originally POD struct or class declaration was seen from both non-ARC and ARC code, then the non-ARC code might think that it is still a POD type. But this is wrong (ARC added methods to make it non-POD), and will allow the non-ARC code to do wrong things and bypass the memory management. As a result, it must be disallowed.

# nhibernate - 如何在 NHibernate hbm.xml 映射文件中映射 VARCHAR(MAX) 列

> ID：12105929
> 
> 赞同：17
> 
> 时间：2012-08-24T08:44:09.647
> 
> 标签：nhibernate, nhibernate-mapping

我们有一个带有 varchar 和 nvarchar max 列的 SQL Server 表，如下所示：

```
CREATE TABLE [dbo].[MyTable](
  :
  [MyBigUnicodeColumn] [nvarchar](max) NULL,
  [MyBigAnsiColumn]    [varchar](max) NULL,
  : 
```

创建映射 (hbm.xml) 文件时，[文档](http://nhforge.org/doc/nh/en/index.html)说使用 StringClob 作为数据库类型为 DbType.String 的大型对象的类型属性，但没有说明如果数据库类型为 DbType.AnsiString 该怎么做.

```
<class name="MyTable" table="MyTable" lazy="false">
  :
  <property name="MyBigUnicodeColumn" type="StringClob" />
  <property name="MyBigAnsiColumn" type="????" />
  : 
```

这适用于 NHibernate 3.3.1。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T09:13:24.780

您可以将它们映射为`string`或`AnsiString`。

```
<property name="MyBigUnicodeColumn" type="string" length="1000000"/>
<property name="MyBigAnsiColumn" type="AnsiString" length="1000000" /> 
```

只要长度分别大于 4000 或 8000，NH 就会创建一个 nvarchar(max) 或 varchar(max)。

我可能是该长度用于sql参数并且它被截断为指定的长度（这取决于您使用的NH版本，有一些变化）。所以最好指定它足够大。

* * *

**编辑**：不幸的是，它不适用于 AnsiString 与普通字符串一样。我阅读了一些 NH 代码，发现以下内容：

从 SQL Server 2005 开始，方言支持 varchar(max)。

MsSql2000Dialect.cs，第 205 行

```
RegisterColumnType(DbType.AnsiString, SqlClientDriver.MaxSizeForLengthLimitedAnsiString, "VARCHAR($l)"); 
```

MsSql2005Dialect.cs，第 19 行：

```
RegisterColumnType(DbType.AnsiString, SqlClientDriver.MaxSizeForAnsiClob, "VARCHAR(MAX)"); 
```

当 AnsiString 映射大于 8000 时，它将 varchar(max) 注册为 sql 类型以供选择。

在 SqlClientDriver.cs 中，您可以看到它在参数中为字符串实现了“blob”，但不是为 ansi 字符串（第 135 行）：

```
case DbType.AnsiString:
case DbType.AnsiStringFixedLength:
    dbParam.Size = MaxSizeForLengthLimitedAnsiString;
    break;
// later on
case DbType.String:
case DbType.StringFixedLength:
    dbParam.Size = IsText(dbParam, sqlType) ? MaxSizeForClob : MaxSizeForLengthLimitedString;
    break; 
```

它总是将 8000 作为 AnsiString 类型参数的限制。

由于驱动程序和方言之间的不一致，我将其称为错误。

因为该错误发生在所有 AnsiStrings 上，所以在映射中指定 sql 类型无济于事（NH 能够选择正确的 sql 类型）。您需要使用[您在 NH 论坛上启动的主题](https://groups.google.com/forum/?fromgroups=#!topic/nhusers/NyZ3GFFDW4k)中提出的解决方法：

```
<property name="MyBigAnsiColumn" type="StringClob" sql-type="VARCHAR(max)" /> 
```

* * *

我将其报告为错误：[https ://nhibernate.jira.com/browse/NH-3252](https://nhibernate.jira.com/browse/NH-3252)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T00:28:12.873

NHibernate (nhusers) 论坛上的用户 Nexus 说：

```
<property name="MyBigAnsiColumn" type="StringClob" sql-type="VARCHAR(max)" />  
Should be the most correct answer 
```

注意：我没有验证这一点，因为我决定将所有 VARCHAR(MAX) 列转换为 NVARCHAR(MAX)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-17T14:17:55.173

```
public class Role
{
    public Role() { }
    public virtual string RoleId { get; set; }
    public virtual string RoleName { get; set; }
    public virtual string RoleDescription { get; set; }
}

public class RoleMap : ClassMapping<Role>
{
    public RoleMap()
    {
        Table("nda_roles");
        Schema("dbo");
        Lazy(true);
        Id(x => x.RoleId, map => 
        { 
            map.Column("role_id");
            map.Length(12);
            map.Type((IIdentifierType)TypeFactory.GetAnsiStringType(12));
            map.Generator(Generators.Assigned); 
        });
        Property(x => x.RoleName, map =>
        {
            map.Column("role_name");
            map.NotNullable(true);
            map.Length(50);
            map.Type(TypeFactory.GetAnsiStringType(50));
        });
        Property(x => x.RoleDescription, map =>
            {
                map.Column("role_description");
                map.Length(NHibernateConfig.GetMaxLengthAnsiString());
                map.Type(TypeFactory.GetAnsiStringType(NHibernateConfig.GetMaxLengthAnsiString()));
            });
    }
}

public static class NHibernateConfig
{
    private static string driver_class;
    private static string dialect;

    public static ISessionFactory GetNHibernateSessionFactory()
    {
        var config = new Configuration().Configure(); // Read config from hibernate.cfg.xml
        var configPath = HttpContext.Current.Server.MapPath(@"~\hibernate.cfg.xml");
        config.Configure(configPath);
        driver_class = config.Properties["connection.driver_class"];
        dialect = config.Properties["dialect"];
        config.CurrentSessionContext<WebSessionContext>();

        var mapper = new ModelMapper();
        mapper.AddMappings(new Type[]
        {
            typeof(NDA.Models.RoleMap),
            typeof(NDA.Models.PermissionMap),
            typeof(NDA.Models.CompanyMap),
            typeof(NDA.Models.UserMap),
        });
        HbmMapping domainMapping = mapper.CompileMappingForAllExplicitlyAddedEntities();
        config.AddMapping(domainMapping);

        new SchemaExport(config).Execute(false, true, false);

        return config.BuildSessionFactory();
    }

    public static int GetMaxLengthString()
    {
        int maxlenght = 255;
        switch (driver_class)
        {
            case "NHibernate.Driver.SqlClientDriver":
                switch (dialect)
                {
                    case "NHibernate.Dialect.MsSql2008Dialect":
                        maxlenght = 4000;
                        break;
                }
                break;
        }
        return maxlenght;
    }

    public static int GetMaxLengthAnsiString()
    {
        int maxlenght = 255;
        switch (driver_class)
        {
            case "NHibernate.Driver.SqlClientDriver":
                switch (dialect)
                {
                    case "NHibernate.Dialect.MsSql2008Dialect":
                        maxlenght = 8000;
                        break;
                }
                break;
        }
        return maxlenght;
    }

} 
```

和 hibernate.cfg.xml 文件：

```
<hibernate-configuration  xmlns="urn:nhibernate-configuration-2.2" >
<session-factory name="NHibernate.NDA">
    <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
    <property name="connection.connection_string_name">nda_connectionstring</property>
    <property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property>
<property name="hbm2ddl.auto">validate</property>
<mapping assembly="NDA"/> 
```

# jquery - 要将相同的代码复制到多个 div 时如何使用 appendTo 代码？

> ID：12105933
> 
> 赞同：0
> 
> 时间：2012-08-24T08:44:21.563
> 
> 标签：jquery

我有一个代码，当我克隆该代码时，会发现更少的值可以自行重置。它与 appendTo() 函数一起使用，但我想将 appendTo 用于多个 div
例如：

```
<div id="allocationId"><select><option value="">Select</option><option value="A" selected>A</option></div>
<div id="modalDiv"></div>
<div id="tmpDiv"></div> 
```

我想将在 allocationId 中定义的代码附加到 modalDiv 和 tmpDiv 不起作用的
代码：

```
$('#allocationId').find('select').clone().appendTo('#tmpDiv')
//Another Code that don't works  
$('#allocationId').find('select').appendTo('#tmpDiv #modalDiv')
//Code that works but its just for only one div  
$('#allocationId').find('select').appendTo('#tmpDiv ') 
```

请提供有用的建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:53:11.050

尝试

```
var select = $('#allocationId').find('select');
select.clone().appendTo('#tmpDiv,#modalDiv'); 
```

你也缺少一个结束`</select>`标签

[演示](http://jsfiddle.net/mowglisanu/Yf8Rn/)

# iphone - 推送通知开发到分发证书问题 iOS

> ID：12105934
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:44:22.823
> 
> 标签：iphone, ios, push-notification, xcode4.3, distribution

我已将**开发证书更改为分发证书**。

但是从 xcode 启动时出现以下错误。

```
error: failed to launch '/Users/labuser/Library/Developer/Xcode/DerivedData/appname-apnhncqwnlqivrhbmcomabillpjh/Build/Products/appname-iphoneos/appname.app/appname' -- failed to send the qLaunchSuccess packet 
```

该应用程序无法从 xcode 启动。但安装在iphone中。然后我可以访问已安装的应用程序。

任何人都知道这个问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T06:28:35.953

这个错误发生在我身上，当我不小心尝试使用分发配置文件进行设备调试时。但是当切换到开发配置文件时，问题就消失了。

**您无法使用分发配置文件进行调试。**

# magento - Magento 测试自动化框架测试用例创建

> ID：12105940
> 
> 赞同：3
> 
> 时间：2012-08-24T08:44:42.090
> 
> 标签：magento

我正在使用这是我在 magento 测试自动化框架中的自定义测试用例。

公共功能 test_WithInvalidPassword($wrongPasswords, $errorMessage) {

```
 //Data
    $userData = $this->loadData('generic_admin_user', $wrongPasswords, array('email', 'user_name'));
    //Steps
    $this->adminUserHelper()->createAdminUser($userData);
    //Verifying
    $this->assertTrue($this->errorMessage($errorMessage), $this->messages);
    $this->assertTrue($this->verifyMessagesCount(), $this->messages);
}

public function data_invalidPassword()
{
    return array(
        array(array(
                'password' => '1234567890',
                'password_confirmation' => '1234567890',
            ), 'invalid_password')
    );
} 
```

在这里，它向我显示了类似“SystemStores_CreateTest::test_WithInvalidPassword() Missing argument 1 for SystemStores_CreateTest::test_WithInvalidPassword()”的错误，并且相同的功能在默认的 mtaf-testcases 中工作。

任何人都可以建议它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:05:12.193

您需要设置一个数据提供者来提供参数的值。

您需要将`@dataProvider`注释添加到测试功能的 docblock 注释中。

**您可以在此页面上找到更多信息：** ecomdev.org/2011/02/01/phpunit-and-magento-yes-you-can.html 在标题“数据提供者”下。

**PHPUnit 手册中也有一些信息：** [http](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers) ://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers 。

# javascript - 加载日期选择器时如何突出显示当前周？

> ID：12105943
> 
> 赞同：0
> 
> 时间：2012-08-24T08:44:47.837
> 
> 标签：javascript, jquery, datepicker

使用jQuery加载日期选择器时如何突出显示当前周？

例如今天是星期四，它会在加载日期选择器时突出显示星期一到星期五。

类似： http: [//jsfiddle.net/W5GMg/222/](http://jsfiddle.net/W5GMg/222/)，但我想选择星期一的星期而不是+天数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:46:21.097

在这里查看 Fiddle 中的代码行：

```
SVG.Weekpicker._dates = 
   SVG.Weekpicker.GetWeek(new Date(_currentDate.getFullYear(),
                                   _currentDate.getMonth(),
                                   _currentDate.getDate())); 
```

您必须更改`_currentDate.getDate()`为要突出显示的一周中的星期一。

[此示例 Fiddle](http://jsfiddle.net/QzQ9v/1/)突出显示从 8 月 27 日星期一开始的那一周。

# php - 如何使用 fetch(PDO::FETCH_ASSOC) 和 pdo 获取多行？

> ID：12105947
> 
> 赞同：1
> 
> 时间：2012-08-24T08:45:03.407
> 
> 标签：php, pdo, fetch, loops

testQuery() 是我用来从表 CATEGORIES 中获取所有行的方法

```
public function __construct()
 {
 self::$tdb = Database::getConnection();
 }

 #mock query to pull results from db
 public function testQuery()
  {
       $queryAA = "SELECT cat_name, cat_description, cat_id FROM CATEGORIES";
       $stmtAA = self::$tdb->prepare($queryAA);

       if ($stmtAA->execute() == true)
        {
             print("Execution was successful");
             return $stmtAA->fetch(PDO::FETCH_ASSOC);   
        }
       else
        {
            print("Warning statment did not successfully execute");
        }
     } 
```

我通常使用 fetchAll() 但我被告知使用 fetch 因为它不会占用太多内存。但是我无法使用 fetch() 和下面的代码检索多行。

```
$test = new test();
$results = $test->testQuery();

foreach ($results as $row)
 {
 print_r($row);
 } 
```

它只获取 1 行。那么如何检索和打印多行呢？之前提到过使用迭代，但我不确定是否实现它。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:51:57.463

Fetch 确实一次从数据库中提取数据，但是您需要遍历行，直到获得所有数据。

您可能希望将其弹出到循环中以获取所有数据：

```
$stmtAA->fetch(PDO::FETCH_ASSOC); 
```

这样的事情应该可以解决问题：

```
while($row=$this->prepared->fetch(PDO::FETCH_ASSOC))
{
    $this->ID=$row['id'];
    $something=$row['something'];
} 
```

取决于您是填充变量还是在对象中包含代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:56:42.643

您可以简单地返回语句对象。
或者，如果您想封装它（使其只能用于获取数据），请使用[SPL 的 IteratorIterator](http://www.php.net/manual/en/class.iteratoriterator.php)

```
return new IteratorIterator($stmtAA); 
```

那么你可以使用

```
foreach( testQuery() as $row) { ... } 
```

在你的脚本中。

# java - 当服务器使用 HttpClient-4 发送错误时中止 HTTP PUT 请求

> ID：12105950
> 
> 赞同：3
> 
> 时间：2012-08-24T08:45:20.973
> 
> 标签：java, tomcat, apache-httpclient-4.x

我正在使用 httpclient-4 使用以下代码将流的内容（在这种情况下是一个大文件）发送到我的 Tomcat 的上传 servlet：

```
HttpRequest httpRequest = new HttpPut(destination);
InputStreamEntity entity = new InputStreamEntity(inputStream, contentLength);
((HttpPut)httpRequest).setEntity(entity);
httpClient.execute(httpRequest,handler); 
```

它工作得很好。我后来添加了一个身份验证机制，以防止未经授权的用户上传文件。如果有人尝试在未经身份验证的情况下上传，则 servlet 会直接响应

```
response.sendError(HttpServletResponse.SC_FORBIDDEN) 
```

甚至不处理请求的 InputStream。

我面临的问题是，尽管请求在服务器端被拒绝，但我的客户端继续发送 InputStream 的全部内容，导致完全无用的网络使用。

我查看了 httpclient 的文档，但不幸的是没有找到任何关于这一点的信息。我还查看了 tomcat 的一面，看看是否可以中止请求，但[似乎不可能](https://mail-archives.apache.org/mod_mbox/tomcat-dev/200803.mbox/%3C47DD0A9A.1080502@knowleses.org%3E)。

有没有办法在这种情况下取​​消流的上传？

任何见解将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:48:16.860

解决此问题的适当方法是在客户端打开所谓的“期望：继续”握手。Apache HttpClient 4.x 的较新版本默认禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:43:16.677

您可以在服务器端关闭 InputStream，它将停止传输。

# ruby-on-rails - Heroku rails 应用程序保持暂存模式

> ID：12105956
> 
> 赞同：0
> 
> 时间：2012-08-24T08:45:34.040
> 
> 标签：ruby-on-rails, heroku, environment-variables

一个月前，我在 Heroku 上创建了一个暂存实例。现在我想把它重新投入生产。

这么经典的东西

```
$ heroku config:add RAILS_ENV=production RACK_ENV=production
> RACK_ENV:  production
> RAILS_ENV:  production 
```

使用“heroku config”打印配置说明一切都很好，可悲的是：

```
$ heroku run console
...
> Loading staging environment (Rails 3.2.3) 
```

如果我打印 ENV 变量，RAILS_ENV 和 RACK_ENV 仍在生产中

```
$ Rails.env
=> "staging"
$ ENV["RAILS_ENV"]
=> "production" 
```

我仔细检查了代码。在任何时候都没有强制登台环境。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:30:10.633

您是否设置了重复的 RAILS_ENV 变量？检查你所有的 vars 。我认为查看所有环境变量只是 heroku:config 。

# javascript - 将高度设置为 iFrame

> ID：12105957
> 
> 赞同：0
> 
> 时间：2012-08-24T08:45:36.020
> 
> 标签：javascript, jquery, css

我试过这个：

```
$('#my_ifr').css('height', '5px !important'); 
```

还有这个：

```
$('#my_ifr').height(5); 
```

但大小保持不变。当我写：

```
$('#my_ifr').height(); 
```

在 cosole 中，我得到 5，但是当我在 Goog 中检查元素时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:53:51.907

你必须设置他的`height`属性

```
$('#my_ifr').attr('height', '5'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:55:01.313

这工作正常

```
$('#my_ifr').css('height', '500'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:07:57.337

检查一下，它工作正常...

```
$('#iframeID').css({'height':'500px'}); 
```

[http://jsfiddle.net/smanimani/GwkRQ/98/](http://jsfiddle.net/smanimani/GwkRQ/98/)

但是，你想增加 tinymce 的高度意味着，

你这样用，

```
tinyMCE.init({
...
height : "500"
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:11:13.593

```
function checkifloaded () {
    if ($('#mce_0_ifr').length > 0) {
        $('#mce_0_ifr').css({'height': '5px'});
        window.clearInterval(intid);
    }
}

var intid = setInterval(checkifloaded, 500); 
```

[http://jsfiddle.net/GwkRQ/163/](http://jsfiddle.net/GwkRQ/163/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T09:24:35.230

两个答案（@yogi 和 @Mihai Iorga）都是正确的，但是看看你的 jsfiddle.... 有几件事要评论：

您没有触发该功能...添加：

```
$(function() {
 // Handler for .ready() called.
}); 
```

或者

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

（是一样的吗……）

现在......另一件事在你的jsfiddle中，没有**iframe#my_ifr**

* * *

试试这个更新：http: [//jsfiddle.net/GwkRQ/94/](http://jsfiddle.net/GwkRQ/94/)

```
$(function() {
    // Not Valid
    //$('#mce_0_ifr').height(5);

    // Valid - by @yogi
    $('#my_ifr').css('height', '500');

    // Valid - by @Mihai Iorga only if no attr was previulsy set
    // but be carefull because pre-defined element.style or css rule
    // will overright the atribute (attr)
    $('#my_ifr').attr('height', '5');
    // That is, the iframe will have 500 and not 5
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T10:58:28.890

嘿，您需要在设置 css 高度属性之前加载该 iframe 的内容。否则它将保持未定义，您无法更改高度属性..

工作代码

```
setInterval(function(){if(typeof($('#mce_0_ifr').css('height'))=='undefined'){}else{$('#mce_0_ifr').css('height','50px');}},0); 
```

[FIDLLE 工作演示](http://jsfiddle.net/v3ggd/)

# java - Maven - 使用surefire插件时无法在Eclipse中调试

> ID：12105958
> 
> 赞同：0
> 
> 时间：2012-08-24T08:45:39.367
> 
> 标签：java, maven, maven-2

我有一个 pom.xml，其中声明了以下内容

> 插件 - maven-surefire-plugin、groovy-maven-plugin 和 maven-jar-plugin 以及项目的这两个依赖项和几个配置文件。

当我从命令行运行以下命令时，事情会按预期移动

```
mvn clean install -P testProfile 
```

但是当我尝试从 Eclipse 运行相同的命令（用于调试目的）时，maven 运行良好（maven 尝试解决依赖关系，但由于错误而停止进一步处理）但未启动调试模式，即它确实在我指定的断点处停止.

但是当我尝试调试与 JUnit 相同的项目时，它确实会在这些断点处停止。

在使用 Maven 时，知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:56:02.903

如果通过从 Eclipse 运行相同的命令，您的意思是单击鼠标右键并选择**Run as** -> **Maven install**这将作为项目目录上的外部程序执行，而不是在 Eclipse 本身中执行。这就是为什么你的断点没有参与。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:03:30.670

好吧，我已经解决了这个问题。

> 这是由于使用了surefire-plugin。

当您使用 surefire 插件时，它会在另一个分叉的进程中运行您的测试，而不是在当前进程中，这就是您无法调试代码的原因。

如果你想调试你的代码，你需要确保 surefire 不会分叉测试。为此，在启动调试之前将以下设置放入您的 Maven 配置中

```
forkMode=never 
```

这应该为您完成这项工作。

有关更多信息，请访问[surefire 文档](http://maven.apache.org/plugins/maven-surefire-plugin/examples/debugging.html)页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:57:08.480

Eclipse 和 maven 不能很好地结合在一起。尝试按 F5 从“项目”下更新和“清理”您的项目。

# android - 如何检查软键盘是否显示在活动屏幕上？

> ID：12105959
> 
> 赞同：0
> 
> 时间：2012-08-24T08:45:54.187
> 
> 标签：android, android-softkeyboard, visible

> **可能重复：**
> [有没有办法判断软键盘是否显示？](https://stackoverflow.com/questions/5457486/is-there-a-way-to-tell-if-the-soft-keyboard-is-shown)

在一个应用程序中，我想检查软键盘是否显示在活动屏幕上。

请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:08:25.007

如果您有兴趣，有一个解决方法，您可以使用[`getCurrentFocus()`](http://developer.android.com/reference/android/app/Activity.html#getCurrentFocus%28%29)返回焦点视图并检查它是否是 EditText 的实例，如果是，那么您知道软键盘是可见的，提供软键盘而不是物理键盘中的主要输入.

```
protected boolean IsSoftKeyboardVisible(){
if(getCurrentFocus()!=null && getCurrentFocus() instanceof EditText){
        return true;
    }
return false;
} 
```

# php - 对特殊字符和目录的好奇

> ID：12105960
> 
> 赞同：0
> 
> 时间：2012-08-24T08:45:57.657
> 
> 标签：php, special-characters, directory, file-exists

我制作了一个脚本，它需要一个目录，并通过该目录为图像文件提供 scnas，然后在 jquery-gallery 上回显这些图像。

但是，其中一些目录包含特殊字符，例如 (æ,ø,å) - 即使设置了 dir 变量并使用正确的字符，它似乎也不起作用。

File_exist 是否处理特殊字符？

这段代码有效，但不是很好，因为我必须用“_”替换æ、ø 和 å。同样在我所有的文件夹上执行此操作。

```
$invalid_chars = array('æ','ø','å');

//Find the dir with the photos
$dir = 'img/products/'.str_replace($invalid_chars,'_', $category)."/".str_replace($invalid_chars,'_',$model);

//accepted filetypes
$file_display = array('jpg','jpeg','png');

if(file_exists($dir)==false){
echo "</br><center>A team of highly trained monkeys has been dispatched to deal with this situation.</center></br></br><br /><br /></br>";
}
else 
{
    $dir_contents = scandir($dir);
    foreach($dir_contents as $file){

        $file_type = explode('.',$file);
        $file_type = strtolower(end($file_type));

        if($file!=='.' && $file!=='..' && in_array($file_type, $file_display) == true) { 
        echo "<img src='".$dir."/".$file."'/>";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:06:10.397

好吧，那你为什么在发帖之前不使用你最喜欢的搜索引擎呢？

您可以在这里找到答案：[“file_exists”问题中的特殊字符 (php)](https://stackoverflow.com/questions/2685718/special-characters-in-file-exists-problem-php)

# calendar - SmartGWT 数据绑定 ListGrid -> 列标题中的 DateItem，重新加载列 onChanged

> ID：12105962
> 
> 赞同：0
> 
> 时间：2012-08-24T08:45:59.187
> 
> 标签：calendar, datepicker, title, smartgwt, listgrid

我的任务是：一个带有列的数据绑定 ListGrid。此列的标题应为“{ `infoDate`in format DD-MM-YYYY} 的信息”+ 一个 DateItem（仅限图标选择器），用户可以从中修改`infoDate`默认为当前日期的日期。根据所选日期，列中的值会发生变化。

因此，我从这个问题[How to add button in HeaderSpan of SmartGWT](https://stackoverflow.com/questions/9534554/how-to-add-button-in-headerspan-of-smartgwt)中获得了一个想法，以访问下面的代码。不幸的是，有一个问题： DateItem 似乎不可点击，它看起来就像一张图片。此外，我无法删除 TextField，它是一个文本字段或 3 个可选选项字段。

我建议采用 innerHTML 不采用选择器本身的功能，因为我尝试使用 Calendar、DateChooser 和 DatePicker 并且它有效，但问题在于视图（我只需要打开 DatePicker onClick 的日历图标）。

提前感谢您的任何帮助或想法！

进口：

```
import com.google.gwt.core.client.JavaScriptObject;
import com.google.gwt.dom.client.Element;
import com.google.gwt.dom.client.Node;
import com.google.gwt.dom.client.NodeList;
import com.smartgwt.client.widgets.events.DrawEvent;
import com.smartgwt.client.widgets.events.DrawHandler;
import com.smartgwt.client.widgets.grid.ListGrid; 
```

编码：

```
ListGrid infoTable = new ListGrid();
infoTable.setShowRecordComponents(true);
infoTable.setShowRecordComponentsByCell(true);        
infoTable.setWidth100();
infoTable.setDataSource(dataSource);
infoTable.setCanEdit(false);
infoTable.setCanCollapseGroup(false);
infoTable.setCanFreezeFields(false);
infoTable.setCanGroupBy(false);
infoTable.setCanMultiSort(false);
infoTable.setCanSort(false);
infoTable.setCanResizeFields(false);
infoTable.setAutoFetchData(false);
infoTable.addDrawHandler(new DrawHandler() { 
    public void onDraw(final DrawEvent event) { 
        for (Element element : DOMUtils.getElementsByTagName("td")) { 

            if (element.getInnerHTML().startsWith("Information for")) { 
                DOMUtils.removeAllChildNodes(element); 

                final DynamicForm cal = new DynamicForm(); 

                final DateItem infoDate = new DateItem(); 
                infoDate.setDefaultValue(new Date());
                infoDate.setTitle(“Information for ”); 
                infoDate.setTitleAlign(Alignment.LEFT); 
                infoDate.setWrapTitle(false); 
                infoDate.setDisplayFormat(DateDisplayFormat.TOEUROPEANSHORTDATE); 
                infoDate.setUseTextField(true); 
                infoDate.setAlign(Alignment.RIGHT); 
                infoDate.addChangedHandler(new ChangedHandler() { 
                    public void onChanged(final ChangedEvent event) { 
                        //fetch new data, according to the date selected); 
                    } 
                }); 

                cal.setFields(infoDate); 

                element.setInnerHTML(cal.getInnerHTML()); 

            } 
        } 

        // fetch data from DataSource class
        infoTable.fetchData(); 
    } 
}); 
```

还有DOMUtils类：

```
class DOMUtils {
public static void removeAllChildNodes(Element element) {
    NodeList<Node> childList = element.getChildNodes();
    for(int childIndex = 0; childIndex < childList.getLength(); childIndex++) {
        element.removeChild(childList.getItem(childIndex));
    }
}

public static Element[] getElementsByTagName(String tagName)
{
    JavaScriptObject elements = getElementsByTagNameInternal(tagName);
    int length = getArrayLength(elements);
    Element[] result = new Element[length];
    for (int i=0; i<length; i++)
    {
        result[i] = getArrayElement(elements, i);
    }
    return result;
}

private static native JavaScriptObject getElementsByTagNameInternal(String tagName)/*-{
return $doc.getElementsByTagName(tagName);
  }-*/;

private static native int getArrayLength(JavaScriptObject array)/*-{
return array.length;
  }-*/;

private static native Element getArrayElement(JavaScriptObject array, int position)/*-{
return (position>=0 && position<array.length?array[position]:null);
  }-*/;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:52:20.610

哇，这些都不需要。您可以使用`setShowFilterEditor(true)`“日期”类型字段的默认界面看起来就像您想要的一样，除了从日历图标启动的选择器将允许用户输入日期范围，这似乎比你想要什么。

如果您不想支持任意日期范围，请使用`setFilterEditorType()`您自己的更有限的控件替换默认控件。

如果您不想要两行标题（普通标题加上 filterEditor），只需使用`setShowHeader(false)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:30:01.770

好的，所以我找到了方法：因为我不能覆盖 Header 本身，所以我使用 HeaderSpan 和 Header 的高度，以便只有 HeaderSpan 可见。但是注意，它在 FF 上运行良好，但它会导致 IE 中应用程序的其他部分出现错误。这是代码；类 DOMUtils 可以在我的第一篇文章中找到：

```
// class MyDataSource extends com.smartgwt.client.data.DataSource
MyDataSource dataSource = MyDataSource.getInstance(); 

final HeaderSpan headerSpanCol1 = new HeaderSpan(); 
headerSpanCol1.setTitle("column 1"); 
headerSpanCol1.setFields(MyDataSource.A); 
headerSpanCol1.setHeight(26); 

final HeaderSpan headerSpanCol2 = new HeaderSpan();
// make sure not to have the same element name
headerSpanCol2.setTitle(“Information for”); 
headerSpanCol2.setFields(MyDataSource.D); 
headerSpanCol2.setHeight(26); 

final HeaderSpan headerSpanCol3 = new HeaderSpan(); 
headerSpanCol3.setTitle("column 2"); 
headerSpanCol3.setFields(MyDataSource.B); 
headerSpanCol3.setHeight(26); 

infoTable = new ListGrid() { 

  @Override 
  protected Canvas createRecordComponent(final ListGridRecord record, final Integer colNum) { 

      final String fieldName = this.getFieldName(colNum); 

    // include some icons that I need in the ListGrid here

  } 
}; 
infoTable.setShowRecordComponents(true); 
infoTable.setShowRecordComponentsByCell(true); 

infoTable.setWidth100();
// make height equal to HeaderSpan’s in order to hide header titles and show only the HeaderSpan
infoTable.setHeaderHeight(26);
infoTable.setDataSource(dataSource); 
infoTable.setCanEdit(false); 
infoTable.setCanCollapseGroup(false); 
infoTable.setCanFreezeFields(false); 
infoTable.setCanGroupBy(false); 
infoTable.setCanMultiSort(false); 
infoTable.setCanSort(false); 
infoTable.setCanAutoFitFields(false); 
infoTable.setCanResizeFields(false); 
infoTable.setCanPickFields(false); 
infoTable.setAutoFetchData(false); 
infoTable.addDrawHandler(new DrawHandler() { 
public void onDraw(final DrawEvent event) { 

   for (Element element : DOMUtils.getElementsByTagName("td")) { 
       // iterate over the elements of the page to find the HeaderSpan to replace

       if (element.getInnerHTML().equals(“Information for”)) { 
          // replace the title of this HeaderSpan with a DateItem 
          DOMUtils.removeAllChildNodes(element); 

          final DynamicForm cal = new DynamicForm(); 

         final DateItem infoDate = new DateItem(); 
         infoDate.setDefaultValue(new Date()); 
         infoDate.setTitle(“Select date”); 
         infoDate.setWrapTitle(false); 
         infoDate.setDisplayFormat(DateDisplayFormat.TOEUROPEANSHORTDATE); 
         infoDate.setUseTextField(true); 
         infoDate.setAlign(Alignment.RIGHT); 
         infoDate.addChangedHandler(new ChangedHandler() { 
             public void onChanged(final ChangedEvent event) { 
                 // reload table with newly fetched results                       
             } 
         }); // ChangedHandler

         cal.setFields(infoDate);
         element.insertFirst(cal.getElement());

 break;
} // if
    } // for

    // fetch data from DataSource class
  infoTable.fetchData(); 
} // onDraw
}); // DrawHandler

infoTable.setHeaderSpans(headerSpanCol1, headerSpanCol2, headerSpanCol3); 
```

# mysql - MYSQL Join 中的 REGEXP 工作不正常

> ID：12105964
> 
> 赞同：2
> 
> 时间：2012-08-24T08:46:03.960
> 
> 标签：mysql, regex, join

我有一个下一个 mysql 查询：

```
SELECT 
    shop_sections.title, 
    shop_sections.id, 
    shop_sections.parent_id, 
    count(shop_items.id) AS items
FROM 
    shop_sections 
LEFT JOIN 
    shop_items 
ON 
    shop_items.section_id 
        REGEXP "^" + shop_sections.parent_id + "([[.full-stop.]].*|$)" 
GROUP BY 
    shop_sections.id 
```

REGEXP 执行不正确。对于 row `shop_items.section_id`= 1，它获取所有字段`shop_items.section_id`以“1”开头的行（即 13.14 或 13.15，但它必须获取 1 或 1.*（1.1、1.2、1.2.3 等））。

我注意到如果改变

`REGEXP "^" + shop_sections.parent_id + "([[.full-stop.]].*|$)"`

到

`REGEXP "^1([[.full-stop.]].*|$)"`

比它适用于 1 （如果手动将其插入查询也适用于任何值）。但我想使用一个查询来获取所有项目。

可能是什么问题？

**UPD。**

`shop_items.section_id`包含下一种形式的值：parent_section.child_section_1.child_section_2.child_section_3 等。我需要在项目页面上进行分页。

中的值`shop_sections.parent_id`具有相同的形式。

我想要做的就是显示一个部分的树和每个部分的一些项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:11:24.053

`+`不能用于 MySQL 中的连接。你的测试应该是：

```
ON 
  shop_items.section_id 
    REGEXP CONCAT('^', shop_sections.parent_id, '([[.full-stop.]].*|$)') 
```

您得到的奇怪结果是由于断开的连接执行了加法。假设`shop_sections.parent_id`为 1，则：

```
'^' + shop_sections.parent_id + '([[.full-stop.]].*|$)' 
```

... 确实被评估`0 + 1 + 0`（转换为整数的字符串被评估为 0，除非它们以数字序列开头），用作正则表达式等同于无用的`'1'`.

# php - 将 Jquery 值传递给 PHP 脚本

> ID：12105965
> 
> 赞同：11
> 
> 时间：2012-08-24T08:46:09.437
> 
> 标签：php, ajax, json, jqgrid

我有一个 JQGRid，它显示带有双击事件的预订，如下所示：

```
ondblClickRow: function(rowid)
{
    rowData = $("#bookings").getRowData(rowid);
    var brData = rowData['bookref'];
    getGridRow(brData);
}, 
```

这被传递给 getGridRow 函数：

```
function getGridRow(brData) {

    //$.post('bookings-dialog.php', { 'rowdata': brData } );
                 //  $("#cp-bookings-dialog").load('bookings-dialog.php').dialog({ show: "slide", hide: 'slide', height: 625, width: 733, title: 'Booking Reference: - '+ brData});

    $.ajax({
      url: 'bookings-dialog.php',
      type:'POST',
      data: {'rowdata' : brData },
      dataType: 'JSON', //this is what we expect our returned data as
    error: function(){
      alert("It failed");
      $('#cp-div-error').html('');
      $('#cp-div-error').append('<p>There was an error inserting the data, please try again later.</p>');
      $('#cp-div-error').dialog('open');
    },
    success: function(data){
        alert("IT WORKED!");
        //empty our dialog so we don't end up with duplicate content
        $('.cp-booking-info').empty();
        //we have told the browser to expect JSON back, no need to do any parsing
        //the date
        $('#cp-bookings-dialog').append('<p class="pno-margin">Booking Date: '+data.bookref+'</p>');

        //now let's manipulate our dialog and open it.
        $("#cp-bookings-dialog").dialog({
          show: { effect: 'drop', direction: "up" },
          hide: 'slide',
          height: 625,
          width: 733,
          title: 'Booking Reference: - '+ brData
        });
      }

    }); 
```

这是bookings-dialog.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<?php
require_once('deployment.php');
require_once('bootstrp/all.inc.php');;

require_once('models/sql.php');
require_once('models/bookingdocket.php');

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {
           $rowdata = $_POST['rowdata'];

           $query = ("SELECT * FROM tblbookings WHERE bookref = '$rowdata'");

        $stmt = $dbh->prepare($query);

        $stmt->execute();

        $row = $stmt->fetch(PDO::FETCH_BOTH);

          /* BookingDocket::set_id($row['id']); */
           BookingDocket::set_bookref($row['bookref']);
          /* BookingDocket::set_bookdate($row['bookingdate']);
           BookingDocket::set_returndate($row['returndate']);
           BookingDocket::set_journeytype($row['journeytype']);
           BookingDocket::set_passtel($row['passengertel']);
           BookingDocket::set_returndate($row['returndate']); */

            $booking_ref = BookingDocket::get_bookref();

           return json_encode(array('bookref' => $booking_ref,
                                    )
                             );

        $stmt->closeCursor();

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
    }

    $dbh = null;

?>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title><? echo Company::get_name(); ?> :: Online Booking - Powered by</title>

</head>

<body>

<div id="cp-bookings-dialog">
  <div class="cp-tiles-wrapper-dlg">
    <div class="cp-booking-info left">
    </div>
  </div>
</div>

</body>
</html> 
```

基本上应该发生的是，预订参考 (brData) 应该被传递给 booking-dialog.php 并在查询中使用，以通过传递的参考数据从预订数据库中选择所有预订。

我目前遇到的问题是，我在预订案卷上获得的价值是“未定义的”。从服务器发回的标头有问题，还是 JSON 对象的结构有问题？

如果有人能帮我解决这个问题，我将不胜感激，我花了很长时间试图让它发挥作用，而且看起来很简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T09:17:21.077

`bookings-dialog.php`不应该显示 HTML 元素，它应该返回`JSON`编码字符串。

添加您的结果和另一个错误，然后您可以处理来自 jQuery 的错误

例如：

```
<?php
    require_once('deployment.php');
    require_once('bootstrp/all.inc.php');;
    require_once('models/sql.php');
    require_once('models/bookingdocket.php');

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {
        $rowdata = $_POST['rowdata'];
        $query = ("SELECT * FROM tblbookings WHERE bookref = :bookref");
        $stmt = $dbh->prepare($query);
        $stmt->execute(array(':bookref' => $_POST['rowdata']));
        $row = $stmt->fetch(PDO::FETCH_BOTH);

        BookingDocket::set_bookref($row['bookref']);

        echo json_encode( array('bookref' => $row['bookref'], 'date' => $row['bookingdate'], 'error' => 'no') );
        $stmt->closeCursor();
    }
    catch (PDOException $pe) {
        die(json_encode(array("error" => "Error: " .$pe->getMessage(). " Query: ".$stmt->queryString)));
    }

    $dbh = null;

?> 
```

也在您的`getGridRow`检查错误字段中：

```
success: function(data){
    if(typeof console != "undefined"){ console.log(data); } // this will prompt data in console
    if(data.error == 'no'){
        alert("IT WORKED!");
        $('.cp-booking-info').empty();
        $('#cp-bookings-dialog').append('<p class="pno-margin">Booking Date: '+data.date+'</p>');
        $("#cp-bookings-dialog").dialog({
            show: { effect: 'drop', direction: "up" },
            hide: 'slide',
            height: 625,
            width: 733,
            title: 'Booking Reference: - '+ data.bookref
        });
    } else {
        alert(data.error);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T18:11:15.297

我认为唯一要改变的是更换：

```
title: 'Booking Reference: - '+ brData 
```

经过 ：

```
title: 'Booking Reference: - '+ data.bookref 
```

`brData`查看`undefined`成功回调

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T20:51:35.827

如果您要求一个 JSON 字符串，php 应该返回那个确切的类型。Javascript 正在等待`application/json`内容类型。

所以在php中你需要添加一些头代码：

```
require_once('deployment.php');
require_once('bootstrp/all.inc.php');
require_once('models/sql.php');
require_once('models/bookingdocket.php');

header('Content-Type: application/json');

$pdo = new SQL();
$dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

try 
{
       $rowdata = $_POST['rowdata'];
       $query = ("SELECT * FROM tblbookings WHERE bookref = '$rowdata'");

       $stmt = $dbh->prepare($query);
       $stmt->execute();

       $row = $stmt->fetch(PDO::FETCH_BOTH);

      /* BookingDocket::set_id($row['id']); */
       BookingDocket::set_bookref($row['bookref']);
      /* BookingDocket::set_bookdate($row['bookingdate']);
       BookingDocket::set_returndate($row['returndate']);
       BookingDocket::set_journeytype($row['journeytype']);
       BookingDocket::set_passtel($row['passengertel']);
       BookingDocket::set_returndate($row['returndate']); */

       $booking_ref = BookingDocket::get_bookref();

       echo json_encode(array('bookref' => $booking_ref));

       $stmt->closeCursor();

}
catch (PDOException $pe)
{
    echo json_encode(array("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString));
}
finally
{
    $dbh = null;
} 
```

# intellij-idea - 在 IntelliJ 编辑器中更改“转到声明”的前景色

> ID：12105971
> 
> 赞同：0
> 
> 时间：2012-08-24T08:46:20.357
> 
> 标签：intellij-idea

按下时如何更改IntelliJ中的前景色：“CTRL + LEFT MOUSE CLICK”（转到声明）上的单词（默认颜色为深蓝色）

: 文件 | 中没有任何内容 设置 | 颜色和字体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:13:03.320

目前不可能，请[为现有的功能请求投票](http://youtrack.jetbrains.com/issue/IDEA-22469)。

# java - 为什么 ${variable} 没有被替换

> ID：12105973
> 
> 赞同：0
> 
> 时间：2012-08-24T08:46:24.867
> 
> 标签：java, jsp

我有这段小代码

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt" %>
<!DOCTYPE html>
<html>
<head>
    <title><%= request.getAttribute("index_title") %></title>
</head>
<body>
<c:out value="${request['index_title']}" />
</body>
</html> 
```

表达式`<%= request.getAttribute("index_title") %>`被正确替换，但`<c:out value="${request['index_title']}" />`不是。我也尝试过`${request['index_title']}`，`${index_title}`但没有人工作。

那是我的第一个jsp，所以我真的认为这一定是一个微不足道的错误，但我无法理解错误在哪里。

**附加问题：**

在我的 servlet 中`request.setAttribute ("index_title", "page title");`。问题是否与我添加到请求中的不是 bean 的事实有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:51:36.563

将代码更改为

```
<c:out value="${requestScope.index_title}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:54:34.157

只需使用

```
<c:out value="${index_title}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:03:19.723

您可以只使用表达式语言，而不使用 jstl 库。

直接在 html 中使用`${index_title}`（或者`${requestScope.index_title}`，不确定）：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt" %>
<!DOCTYPE html>
<html>
<head>
    <title><%= request.getAttribute("index_title") %></title>
</head>
<body>
${index_title}
</body>
</html> 
```

**编辑：**

不，您可以添加任何内容作为属性。

# xcode - ShareKit Facebook 深度链接

> ID：12105975
> 
> 赞同：1
> 
> 时间：2012-08-24T08:46:48.077
> 
> 标签：xcode, facebook, sharekit

我在我的应用程序中使用 ShareKit 2.0。我希望能够将 facebook 上的帖子链接到我的应用程序，因此当用户从我的应用程序（在移动设备上）点击发布在 facebook 上的链接时，应用程序将启动，或者，如果未安装，则会被重定向到我在 appstore 上的应用程序。这是否可以使用 ShareKit 实现，因为我在他们的文档中找不到任何这些。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:39:38.640

是的，有可能。您只需在 DefaultsSHKConfigurator.h（或其子类）中输入应用程序的 URL（Canvas URL）。您必须确保 SHKItem 的类型为 URL，包含您的应用程序的 URL。然后，您应该将 deeplink 参数附加到 URL，其中包含您想要接收的信息。此外，您一定不要忘记根据他们的文档对 facebook 应用程序进行修改。

# android - 在 xml 中将 xml 作为消息发送

> ID：12105976
> 
> 赞同：1
> 
> 时间：2012-08-24T08:46:54.117
> 
> 标签：android, xml, web-services, ksoap2

我需要从我的应用程序向 Web 服务发送 3 件事：用户名 + 密码和包含更多 XML 的消息。

```
request.addProperty("username", username);
request.addProperty("password", password);
request.addProperty("message", UitVoer); // uitvoer is a String that contains XML 
```

我使用 ksoap2 库，它总是适用于 android <-> web 服务，但 atm 我不确定它是否仍然适用于我需要的东西。

当我检查我的`envelope.bodyOut`时，所有标签和 < > 标志看起来都应该。但随后我从 Web 服务收到一条带有我发送的 XML 的错误消息，它显示了这些标志的 HTML 代码。

ksoap2 是否替换了标志，我应该使用其他方式将我的东西发送到 Web 服务，还是 Web 服务端有问题？（我无法控制 Web 服务，所以我不知道它在那方面做了什么。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:18:33.540

这就是构建 xml 请求的方式；希望这可以帮助：）

```
DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();  
DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();  
Document document = documentBuilder.newDocument();  
Element rootElement = document.createElement("map");  
document.appendChild(rootElement);  

Element em = document.createElement("string");  
em.setAttribute("name", "FirstName");  
em.appendChild(document.createTextNode("Rita"));  
rootElement.appendChild(em);  

em = document.createElement("string");  
em.setAttribute("name", "LastName");  
em.appendChild(document.createTextNode("Roy"));  
rootElement.appendChild(em);  

TransformerFactory factory = TransformerFactory.newInstance();
            Transformer transformer = factory.newTransformer();
            Properties outFormat = new Properties();
            outFormat.setProperty(OutputKeys.INDENT, "yes");
            outFormat.setProperty(OutputKeys.METHOD, "xml");
            outFormat.setProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
            outFormat.setProperty(OutputKeys.VERSION, "1.0");
            outFormat.setProperty(OutputKeys.ENCODING, "UTF-8");
            transformer.setOutputProperties(outFormat);
            DOMSource domSource = new DOMSource(document.getDocumentElement());
            OutputStream output = new ByteArrayOutputStream();
            StreamResult result = new StreamResult(output);
            transformer.transform(domSource, result);
            strXMLInput = output.toString(); 
```

# java - 比较两个字节数组并获取 Java 中的百分比？

> ID：12105977
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:46:55.077
> 
> 标签：java, arrays, compare, bytearray

我们想用 Java 编程语言创建一个系统来比较两个音频文件并获得比较的百分比。这些文件正在被转换为字节数组的指纹。

谁能帮我提供一个解决方案来比较两个字节数组并以百分比形式获得相似度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:55:40.040

```
/** Returns percentage (0.0-100.0) of not matching bytes. If arrays are not of equal length, nonexisting bytes in the smaller array will be treated as not matching. */
public double compareByteArrays(byte[] a, byte[] b) {
  int n = Math.min(a.length, b.length), nLarge = Math.max(a.length, b.length);
  int unequalCount = nLarge - n;
  for (int i=0; i<n; i++) 
    if (a[i] != b[i]) unequalCount++;
  return unequalCount * 100.0 / nLarge;
} 
```

这实际上只是比较字节本身（如标题中所述）。您还可以在两个向量之间做某种距离（特征空间中的距离）。[或者你可以做你可以在谷歌学者](http://scholar.google.com)上找到的一百万件其他事情中的一件......

编辑：您告诉我们您使用的是*musicg-api*，因此您可以像这样比较不同的 Wave：

```
String track1 = "track1.wav", track2 = "track2.wav";
Wave wave1 = new Wave(track1), wave2 = new Wave(track2);

FingerprintSimilarity similarity;

// compare fingerprints:
similarity = wave1.getFingerprintSimilarity(wave2);
System.out.println("clip is found at "
                + similarity.getsetMostSimilarTimePosition() + "s in "
                + song1+" with similarity " + similarity.getSimilarity()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:53:59.290

使用音乐 API。您必须使用`Wave`对象，而不是它们的指纹，但如果您可以生成指纹，您就可以`Wave`轻松获取对象。

```
Wave waveA = ...
Wave waveB = ...
FingerprintSimilarity similarity;
similarity = waveA.getFingerprintSimilarity(waveB);
float result = similarity.getSimilarity(); 
```

`result`是作为浮点数的相似性。乘以 100 得到百分比

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:24:41.707

啊哈！我找到了通过指纹比较两个波形文件的功能。完成这项工作的 musicg-api 函数是 = FingerprintSimilarityComputer

这是我的 C# 代码，但你也有 JAVA 的想法：

```
public static int MatchFingerPrint(Byte[] SuspectFingerPrint, Byte[] SampleFingerPrint)
        {

            FingerprintSimilarityComputer fpComputer = new FingerprintSimilarityComputer(SuspectFingerPrint, SampleFingerPrint);
            FingerprintSimilarity fpmSimilarity = fpComputer.getFingerprintsSimilarity();
            return (int)(fpmSimilarity.getScore()*100.0f);
        } 
```

# php - 购物车商品未显示在客户视图中

> ID：12105983
> 
> 赞同：5
> 
> 时间：2012-08-24T08:47:16.153
> 
> 标签：php, cart, magento, magento-1.7

运行 Magento 1.7.2。

在管理员的客户视图中时，它会在客户购物车中显示 1 件商品，但不显示详细信息。我附上了屏幕截图。有谁知道问题可能是什么，或者您可以验证它是否正常工作，以便我知道这是我的安装？

谢谢。

**[在此处查看屏幕截图](http://www.whitesharkcreations.com/magento_bug.jpg)**

![在此处输入图像描述](../Images/b09075014f886e4a7c8ba6ef5d19fcbd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:32:28.207

[解决了]

在 app\code\core\Mage\Adminhtml\controllers\CustomerController.php

1.7.0

```
public function viewCartAction()
{
$this->_initCustomer();
$layout = $this->loadLayout()
->getLayout()
->getBlock('admin.customer.view.cart')
->setWebsiteId();
$this->renderLayout();
} 
```

改成 ：

```
public function viewCartAction()
{
$this->_initCustomer();
$layout = $this->loadLayout()
->getLayout()
->getBlock('admin.customer.view.cart')
->setWebsiteId($this->getRequest()->getParam('website_id'))
->toHtml();
$this->renderLayout();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:06:49.990

这是 1.7.0.2 中的一个错误。

[http://www.magentocommerce.com/bug-tracking/issue?issue=14101](http://www.magentocommerce.com/bug-tracking/issue?issue=14101)

# jquery - jQuery无法识别滚动触发器

> ID：12105984
> 
> 赞同：-1
> 
> 时间：2012-08-24T08:47:22.547
> 
> 标签：jquery

好的，所以我有最简单的脚本..

```
$('#feed').scroll(function() {
    alert('works');
});

#feed
{
width:339px;
padding-left:10px;
float:right;
font-size:12px;
min-height:400px;
height:100%;
max-height:400px;
background-image:url('pics/fbfeedback.png');
background-position:0 0;
background-repeat:no-repeat;
overflow:auto;
} 
```

但它只是不会触发，我无法围绕它。当我做 line alert('works'); 在第一行，因此正确包含脚本。它只是不会触发事件..我在控制台中也没有错误。我已将断点设置为第一行，并将#feed 更改为窗口，仍然不会触发...我快疯了，它必须是一个非常小的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:50:01.063

工作正常 - [http://jsfiddle.net/BFKbA/](http://jsfiddle.net/BFKbA/)

通过运行确保您已正确链接到 jquery

```
$(function(){ alert("jQuery loaded"); }); 
```

或者直接按 F12，检查 javascript 控制台是否有任何错误。确保代码在代码块中：

```
$(function(){

$('#feed').scroll(function() {
    alert('works');
});

}); 
```

或者代码加载在页面底部的结束`body`标记之前。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-24T08:51:44.620

根据您的代码，在我看来这`feed`是一个类，只需将您的代码更改为这个（更改`#`为`.`

```
$('.feed').scroll(function() {
    alert('works');
}); 
```

# xml - Oracle 自动 XML 导入

> ID：12105990
> 
> 赞同：2
> 
> 时间：2012-08-24T08:47:52.107
> 
> 标签：xml, oracle, upload

我正在开发一个项目，其中（小）XML 文件需要在 Oracle 11g 数据库中插入。

我可以在 XML 文件被 ftp 传输到的目录上编写一个带有文件监视器的工具，将 XML 转换为插入语句，然后连接到数据库以运行插入，但我想知道 Oracle 是否已经有可用的工具来执行相同的。

所以我正在寻找一个 Oracle 11g（或单独的）工具，它可以自动检测某个目录中新文件的到达，并将这些作为 XML 上传处理到 Oracle 数据库中（当然，XML 格式必须符合 Oracle XML 上传要求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:36:24.943

如果您使用的是 Oracle Database 11gR2，Oracle 调度程序已得到增强，包括一个[文件观察程序](http://docs.oracle.com/cd/E11882_01/server.112/e25494/scheduse005.htm#CIAJIADA)。

> **关于文件观察器**
> 
> 文件观察程序是一个调度程序对象，它定义文件的位置、名称和其他属性，文件到达系统后会导致调度程序启动作业。您创建一个文件观察器，然后创建任意数量的基于事件的作业或引用该文件观察器的事件计划。当文件观察器检测到指定文件的到达时，它会引发文件到达事件。文件到达事件启动的作业可以检索事件消息以了解新到达的文件。该消息包含查找、打开和处理文件所需的信息。
> 
> 文件观察器可以观察本地系统（运行 Oracle 数据库的同一台主机）或远程系统上的文件。远程系统必须运行调度程序代理，并且代理必须在数据库中注册。

您可以使用此功能“启动”将 XML 插入数据库表所需的例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:46:02.207

我不建议为此开始使用它，但有一种可能：Oracle Fusion Middleware (SOA and OSB)

[http://niallcblogs.blogspot.nl/2010/06/osb-11g-leveraging-oracle-file-adapter.html](http://niallcblogs.blogspot.nl/2010/06/osb-11g-leveraging-oracle-file-adapter.html)

# sql-server - 如何只获取 getdate() 的日期部分？

> ID：12105991
> 
> 赞同：59
> 
> 时间：2012-08-24T08:47:53.353
> 
> 标签：sql-server, tsql

我有一个包含 CreationDate 字段的 SQL 表。

我有`getdate()`计算列规范公式。

我想知道如何只获取日期部分，即“2012-08-24”而不是“2012-08-24 10:45:17.740”。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-24T08:51:08.270

如果您使用的是 SQL Server 2008 或更高版本

```
select convert(date, getdate()) 
```

否则

```
select convert(varchar(10), getdate(),120) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T08:48:53.147

尝试这个：

```
select convert (date ,getdate()) 
```

或者

```
select CAST (getdate() as DATE) 
```

或者

```
select convert(varchar(10), getdate(),121) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-22T00:14:47.257

```
SELECT CAST(FLOOR(CAST(GETDATE() AS float)) as datetime) 
```

或者

```
SELECT CONVERT(datetime,FLOOR(CONVERT(float,GETDATE()))) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T08:49:50.990

```
SELECT CONVERT(date, GETDATE()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-24T08:48:59.907

尝试这个：

```
SELECT CONVERT(date, GETDATE()) 
```

# mysql - mysql排除查询

> ID：12105992
> 
> 赞同：1
> 
> 时间：2012-08-24T08:47:56.193
> 
> 标签：mysql

我有一个**wp_posts**和**wp_icl_translations**表，它们在**wp_posts.ID**和**wp_icl_translations.trid**上相互关联。我想排除所有已经有翻译的帖子。以下查询正在检索我实际想要排除的所有行。

```
SELECT  p.ID, 
        p.post_title 
 FROM   wp_posts AS p 
            JOIN wp_icl_translations AS  t
             ON p.ID= t.trid 
 WHERE p.post_type = '{$type}' AND 
       p.post_status = 'publish' AND 
       t.language_code='en' AND 
       t.element_type='post_post' 
ORDER BY post_title; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:55:44.620

使用`LEFT JOIN`并选择`IS NULL`。

```
SELECT  p.ID, 
        p.post_title 
 FROM   wp_posts AS p 
 LEFT JOIN wp_icl_translations AS  t ON p.ID= t.trid 
 WHERE  p.post_type = '{$type}' AND 
        p.post_status = 'publish' AND 
        t.trid IS NULL
ORDER BY post_title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:54:51.957

尝试（未测试）

使用 NOT`<>`条件

```
SELECT p.ID,p.post_title 
FROM   wp_posts AS p 
INNER JOIN wp_icl_translations AS  t
             ON p.ID= t.trid 
WHERE p.post_type = '{$type}' AND 
       p.post_status = 'publish' AND 
       t.language_code <>'en' AND 
       t.element_type='post_post' 
ORDER BY post_title; 
```

或者

`LEFT JOIN`和`IS NULL`

```
SELECT p.ID,p.post_title 
FROM   wp_posts AS p 
LEFT JOIN wp_icl_translations AS  t
             ON p.ID= t.trid 
WHERE p.post_type = '{$type}' AND 
       p.post_status = 'publish' AND 
       t.trid IS NULL
ORDER BY post_title; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:57:51.137

我会说这样的话；使用 (NOT) IN 运算符。但是可能有更好的解决方案（它的性能不应该那么好，也没有经过测试）。

```
SELECT ID, 
       post_title 
FROM   wp_posts
WHERE  ID NOT IN 
(
      SELECT p.ID
      FROM   wp_posts AS p 
      JOIN   wp_icl_translations AS  t
        ON   p.ID= t.trid 
      WHERE  p.post_type = '{$type}' AND 
             p.post_status = 'publish' AND 
             t.language_code='en' AND 
             t.element_type='post_post' 

)
ORDER BY post_title; 
```

# html - 在同一页面使用两种不同的链接样式

> ID：12105995
> 
> 赞同：1
> 
> 时间：2012-08-24T08:48:12.207
> 
> 标签：html, css, hyperlink, pseudo-class

![在此处输入图像描述](../Images/ee1aa9952a93dae71ee1f5d4b43886d8.png)![在此处输入图像描述](../Images/6a6fccb681ec3b2e3a0a4aaa86c61733.png)我想在下面使用，但是有一个错误。问题..

```
a.tarz7:link,a:visited,a:active
{
display:block;
font-weight:bold;
color:#FFFFFF;
/* 
background-color:#6699FF;
*/
background-image:url(images/bgnisan2012/bg_rect_blue.gif);
width:130px;
text-align:center;
padding:1px;
text-decoration:none;
font-size:13px;
}
a.tarz7:visited
{
}

a.tarz7:hover
{
background-image:url(images/bgnisan2012/qbgblue.gif);
color:#FFFFFF;
} 
```

和..

```
a.buton_stil1{
    background:#3366CC;
    padding:5px 5px;
    text-decoration:none;
    color:#fff;
    font:bold 14px Arial, Helvetica, sans-serif;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

a.buton_stil1{
    background:#3366CC;
    padding:2px 5px;
    text-decoration:none;
    color:#fff;
    font:bold 14px Arial, Helvetica, sans-serif;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

a.buton_stil1{
    background:#3366CC;
    padding:2px 5px;
    text-decoration:none;
    color:#fff;
    font:bold 11px Arial, Helvetica, sans-serif;
    -moz-border-radius: 7px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    box-shadow: 1px 3px 4px #fff;
    -moz-box-shadow: 1px 1px 2px #000;
    -webkit-box-shadow: 3px 3px 4px #000;
}

a.buton_stil1:hover{
   /*  eski stil
   background-color:#3333FF;

    text-shadow: 1px 1px 1px rgba(0, 
    0,1, 0.25);
    */
box-shadow: 1px 3px 4px #000;
background-image:url(images/bgnisan2012/qbgblue.gif); 
```

## 在我的顶部 div 上，我使用：buton_stil1

例子 ：

```
<td align="center">
<a href="dun.php" class="buton_stil1" > Dün&nbsp; </a>
</td> 
```

## 在我的内容 div 上，我使用 a.tarz7

例子 ：

```
<td>  
<a class="tarz7"  href="sorularim.php" > >>> </a>    
</td> 
```

现在，我在 a.tarz7 上没有问题，但顶部按钮与 buton_stil1 有问题。当我按下他们正在增长的按钮时。像一个.tarz7。

* * *

示例：Dün 

## 当我单击此链接时，链接更改为“tarz”

我想办法，把两个链接伪类的效果分开。但没有。最终，我会删除其中一个吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:58:21.150

很难阅读您的代码，但我想问题是这样的

```
a.tarz7:link,a:visited,a:active 
```

你一定是这个意思

```
a.tarz7:link,a.tarz7:visited,a.tarz7:active 
```

# objective-c - 图片库中 UIScrollViews 的问题

> ID：12105996
> 
> 赞同：1
> 
> 时间：2012-08-24T08:48:14.210
> 
> 标签：objective-c, ios, uiscrollview, gallery, gestures

我正在实现一个在主 UIScrollView 中有 UIScrollViews 的画廊。我正在尝试在放大时更改下一页。但第一次尝试滚动不会移动，直到图像第二次正确滑动。

我认为 UIGestures 是一种可能的方式，但在这种情况下，我必须实现 UIScrollView 自动执行的所有自动效果。

是否可以轻松更改为下一张图片？如果我只能在 scrollViewDidScroll 方法中获得手指的位移，我会做得很好。

# api - 与 api 交互的 QR 阅读器应用程序

> ID：12105997
> 
> 赞同：1
> 
> 时间：2012-08-24T08:48:19.163
> 
> 标签：api, qr-code

我在 Web 服务器上创建了一个数据库，其中有一个名为 USERS 的表，它们有一个标志是或否，每个用户都与一个 QR 码相关。我将在服务器和 iPhone 设备之间创建一个 wifi 网络。是否有我可以使用的 iPhone 应用程序，当我扫描 QR 码时，它可以与我创建的数据库交互以将标志打开？我可以为此目的使用什么 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:31:38.827

通常，读取二维码的手机应用程序会启动浏览器打开二维码中的 URL。（同样，如果二维码中的信息为此目的正确编码，它将拨打电话号码或准备短信或存储联系码。）

因此，您（相当简单）可以做的是制作一个 Web 应用程序来处理传入的 HTTP 请求。与您的用户相关的二维码应包含该应用程序的 URL，并且还包含用户的一些 ID。一旦您的应用程序使用有效 ID 注册传入请求，您就可以更新数据库记录。