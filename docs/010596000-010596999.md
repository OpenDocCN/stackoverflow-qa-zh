# StackOverflow 问答 10596000-10596999

# doctrine - 推进学说代码片段

> ID：10596001
> 
> 赞同：0
> 
> 时间：2012-05-15T07:24:05.810
> 
> 标签：doctrine, symfony-1.4, propel

这是一个完全新手的问题，所以请多多包涵。我正在从在线 Jobeet 和 Askeet 教程中学习 symfony，但我的大部分 hack 都涉及 Doctrine，所以我对 Propel 一点也不熟悉。到目前为止，我已经通过在线研究和修改以满足我的需求来管理，但我需要一些帮助。

有人可以帮我将这些代码片段翻译成 Doctrine 吗？

```
public function setTag($v)
{
  parent::setTag($v);

  $this->setNormalizedTag(Tag::normalize($v));
} 
```

```
public function getTags()
{
  $c = new Criteria();
  $c->clearSelectColumns();
  $c->addSelectColumn(QuestionTagPeer::NORMALIZED_TAG);
  $c->add(QuestionTagPeer::QUESTION_ID, $this->getId());
  $c->setDistinct();
  $c->addAscendingOrderByColumn(QuestionTagPeer::NORMALIZED_TAG);

  $tags = array();
  $rs = QuestionTagPeer::doSelectRS($c);
  while ($rs->next())
  {
    $tags[] = $rs->getString(1);
  }

  return $tags;
} 
```

```
public function getPopularTags($max = 5)
{
  $tags = array();

  $con = Propel::getConnection();
  $query = '
    SELECT %s AS tag, COUNT(%s) AS count
    FROM %s
    WHERE %s = ?
    GROUP BY %s
    ORDER BY count DESC
  ';

  $query = sprintf($query,
    QuestionTagPeer::NORMALIZED_TAG,
    QuestionTagPeer::NORMALIZED_TAG,
    QuestionTagPeer::TABLE_NAME,
    QuestionTagPeer::QUESTION_ID,
    QuestionTagPeer::NORMALIZED_TAG
  );

  $stmt = $con->prepareStatement($query);
  $stmt->setInt(1, $this->getId());
  $stmt->setLimit($max);
  $rs = $stmt->executeQuery();
  while ($rs->next())
  {
    $tags[$rs->getString('tag')] = $rs->getInt('count');
  }

  return $tags;
} 
```

```
public static function getTagsForUserLike($user_id, $tag, $max = 10)
{
  $tags = array();

  $con = Propel::getConnection();
  $query = '
    SELECT DISTINCT %s AS tag
    FROM %s
    WHERE %s = ? AND %s LIKE ?
    ORDER BY %s
  ';

  $query = sprintf($query,
    QuestionTagPeer::TAG,
    QuestionTagPeer::TABLE_NAME,
    QuestionTagPeer::USER_ID,
    QuestionTagPeer::TAG,
    QuestionTagPeer::TAG
  );

  $stmt = $con->prepareStatement($query);
  $stmt->setInt(1, $user_id);
  $stmt->setString(2, $tag.'%');
  $stmt->setLimit($max);
  $rs = $stmt->executeQuery();
  while ($rs->next())
  {
    $tags[] = $rs->getString('tag');
  }

  return $tags;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:59:13.750

我建议你忘记 Askeet 教程，它是针对 1.0 版本的，自从这个版本以来，很多事情都发生了变化。

但是，您可以找到Askeet 教义版本的[svn 转储](http://oldforum.symfony-project.org/index.php/t/11385/)。您应该使用 SVN 来重建 repo（不知道如何执行）。

另一方面，如果您需要处理 sf1.4 项目中的标签，我建议您使用插件[sfDoctrineActAsTaggablePlugin](http://trac.symfony-project.org/browser/plugins/sfDoctrineActAsTaggablePlugin/trunk)。

# gps - A-GPS 可以在没有 GPS 接收器的情况下工作吗？

> ID：10596003
> 
> 赞同：1
> 
> 时间：2012-05-15T07:24:10.187
> 
> 标签：gps

任何人请告诉我辅助 GPS 是否可以在没有 GPS 接收器的情况下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:17:41.253

不，那是不可能的：[http ://en.wikipedia.org/wiki/Assisted_GPS](http://en.wikipedia.org/wiki/Assisted_GPS)

A-GPS 使用其他数据来提高 GPS 的质量。

# jquery - 在 jQuery 中使用 remove() 删除任何单词

> ID：10596005
> 
> 赞同：5
> 
> 时间：2012-05-15T07:24:21.210
> 
> 标签：jquery

我想制作一个删除内容中任何特定单词的功能

我得到了这个代码

**jQuery**

```
<script>
$(document).ready(function(){
    $('#cl').click(function(){
        $('div').remove(':contains("kamal")');
    });

})
</script> 
```

**HTML**

```
<div>asdjh alsdhj kamal ljkahsdhasd lakshd kamal</div>
<div ><a href="#" id="cl">click</a></div>
<div>asdjh alsdhj  ljkahsdhasd lakshd </div> 
```

但它删除整个`div`包含`kamal`我只想从我的内容中删除这个词而不是整个`div`你也可以[在这里看到我的代码的在线演示](https://jsfiddle.net/zhV4D/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:11:37.097

对元素进行读-修改-写的正确方法是使用 jQuery 的“函数参数”方法：

```
$('div:contains(kamal)').filter(function() {
    return $(this).children().length === 0;  // exclude divs with children
}).text(function(index, text) {
    return text.replace(/kamal/g, '');
}); 
```

这样避免了调用`.text()`两次，也简化了代码逻辑。

请注意，如果您有嵌套标签，您可能会得到*不寻常*的结果，因为伪选择器会考虑*所有*后代，而不仅仅是直接子代，并且是自上而下而不是自下而上。这就是为什么上述解决方案包含初始调用，以确保仅考虑 DOM 树中的叶节点。`div``:contains()`*`.filter`*

 *另一种方法是使用`.contents`并直接查看 DOM 文本节点：

```
var re = /kamal/gi;

$('div').contents().each(function() {
    if (this.nodeType === 3 && this.nodeValue.match(re)) {
        this.nodeValue = this.nodeValue.replace(re, '');
    }
})​ 
```

见[https://jsfiddle.net/alnitak/eVUd3/](https://jsfiddle.net/alnitak/eVUd3/)

**编辑**第二个示例更新为使用`string.match(regex)`而不是`regex.test(string)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:31:57.990

这应该适合你

```
 <script>
 $(document).ready(function(){
     $('#cl').click(function(){             
        var ka = /kamal/gi;

        $('div').contents().each(function() {

            // this.nodeType === 3 selects the text nodes section of the DOM
            // then ka.test(this.nodeValue) performs a regex test on the text 
            // in the node to see if it contains the word "kamal" with the 
            // global /g flag to search the entire string and /i to be case 
            // insensitive

            if (this.nodeType === 3 && ka.test(this.nodeValue)) {
                this.nodeValue = this.nodeValue.replace(ka, '');
            }
            // this section catches the text nodes within the child and 
            // performs the same operation
            $(this).contents().each(function() {
                if (this.nodeType === 3 && ka.test(this.nodeValue)) {
                     this.nodeValue = this.nodeValue.replace(ka, '');
                }
            })        
        })

     })
 });
 </script> 
```

**编辑**：将简单的字符串替换更改为全局正则表达式替换，因此一键替换所有实例。有关工作示例，请参阅[JSFiddle 。](https://jsfiddle.net/kamui/U7PT3/3/)

**编辑：**基于@Alnitak 的评论，他指出以前版本的代码删除了包含文本而不仅仅是文本的整个子元素是正确的，新的更新版本不会破坏 DOM 并删除关键字的所有实例*“kamal”*请参阅更新[的 JSFiddle](https://jsfiddle.net/kamui/U7PT3/6/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:27:11.487

```
var $div = $('div');
$div.text($div.text().replace('yourword', '')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T07:26:53.220

remove 函数从 DOM 中删除一个节点，不仅是她的内容

尝试`$('div).text().replace('kamal','');`

编辑：这个正在工作

```
$('div').text($('div').text().replace('kamal', '')); 
```

[https://jsfiddle.net/qH4CJ/](https://jsfiddle.net/qH4CJ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T07:43:02.573

用这个：

```
 $('#cl').click(function(){
        $('div').each(function(){
            $(this).text($(this).text().replace(/kamal/g, '');
          });
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T07:56:43.127

由于`text()`获取了值并`text( "someValue" )`设置了值，因此您只需将一个放在另一个里面。这应该适合你

[https://jsfiddle.net/nnsP4/](https://jsfiddle.net/nnsP4/)

```
$(document).ready(function() {
  $('#cl').click(function(){
      $('div:contains("kamal")').each(function(){
         var text = $(this).text();
         var newValue =  text.replace('kamal', '');
          $(this).text(newValue);
      });
   });
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-15T07:27:13.560

您可以使用替换方法

```
$('#cl').click(function(){
        $('div').text($('div').text().replace('kamal',''));
}); 
```*

# c# - 其他控件内的中继器

> ID：10596006
> 
> 赞同：3
> 
> 时间：2012-05-15T07:24:27.730
> 
> 标签：c#, asp.net, repeater

我正在使用 Telerik 的 AJAX 控件，但有一个小问题。在我的应用程序中，用户输入“周”数，然后程序将 RadPane 动态添加到中继器（使用拆分器以便他们可以修改大小），其中 RadGrid 位于窗格内。

我有以下标记：

```
<telerik:RadSplitter ID="splt" runat="server" Width="100%">              
<asp:Repeater ID="rptSplitter" runat="server" OnItemDataBound="rptSplitter_ItemDataBound">
<ItemTemplate>
<telerik:RadPane ID="pane" runat="server">
<asp:Label ID="lblText" runat="server" Text='<%# DataBinder.Eval(Container.DataItem,"From") %>'></asp:Label>
<telerik:RadGrid ID="gv" runat="server" AutoGenerateColumns="false">
<MasterTableView runat="server" DataKeyNames="ID">
<Columns>
<telerik:GridBoundColumn DataField="ConsignmentNo" HeaderText="Consignment" SortExpression="ConsignmentNo">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="Customer" HeaderText="Customer" SortExpression="Customer"></telerik:GridBoundColumn>
</Columns>
</MasterTableView>
</telerik:RadGrid>
</telerik:RadPane>
</ItemTemplate>
<SeparatorTemplate>
<telerik:RadSplitBar runat="server"></telerik:RadSplitBar>
</SeparatorTemplate>
</asp:Repeater>
</telerik:RadSplitter> 
```

然而，当绑定中继器时，我得到以下异常（好吧，异常不显示，但我可以在网格的 itemdatabound 事件中“看到”它）：

> “RadPane 必须放在 RadSplitter 控件内。”

关于如何以某种方式使其工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:48:29.107

我想您可以通过将转发器控件中的所有内容放入用户控件来解决此问题。放弃中继器控件，然后循环浏览您的集合，动态添加其中包含用户控件的窗格。

Telerik 有一个动态添加窗格到拆分器的[演示](http://demos.telerik.com/aspnet-ajax/splitter/examples/dynamicobjectcreation/defaultcs.aspx)。

# c# - 我如何使用 twitter api 使用 c#（Web 表单）在 ASP.Net 中以 json 形式返回结果

> ID：10596011
> 
> 赞同：1
> 
> 时间：2012-05-15T07:24:36.387
> 
> 标签：c#, asp.net, json, twitter

我正在使用默认的 Twitter 个人资料小部件来显示用户的推文。

```
https://twitter.com/about/resources/widgets/widget_profile 
```

不幸的是，它没有显示关注者的数量，所以我得到了一个 api，它将所有必要的细节作为 json 发送。下面是相同的 URL。

```
https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true 
```

我想使用“followers_count”并将其显示在配置文件小部件上。

如果有人向我指出一个使用 c# 在 asp.net 中使用此类 JSON 结果的示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:53:56.997

我更喜欢[Json.Net](http://json.codeplex.com/)来解析 json

```
WebClient cln = new WebClient();
string json = cln.DownloadString("https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true");
dynamic obj = JsonConvert.DeserializeObject(json);
Console.WriteLine("{0} {1} {2}",obj.location,obj.screen_name,obj.followers_count); 
```

# asp.net-mvc - .Net Reactive Extensions，如何实现不丢消息的简单聊天

> ID：10596014
> 
> 赞同：2
> 
> 时间：2012-05-15T07:24:52.867
> 
> 标签：asp.net-mvc, chat, system.reactive

在此示例的基础上，我使用 Rx 在 .NET 中实现了一个简单的聊天： [https ://blogs.claritycon.com/blog/2011/04/roll-your-own-mvc-3-long-polling-chat -地点/](https://blogs.claritycon.com/blog/2011/04/roll-your-own-mvc-3-long-polling-chat-site/)

有一种方法可以使用 LongPolling 等待新消息的到来：

```
public static void CheckForMessagesAsync(Action<List<MessageInfo>> onMessages)
{
    var queued = ThreadPool.QueueUserWorkItem(new WaitCallback(parm =>
    {
        var msgs = new List<MessageInfo>();
        var wait = new AutoResetEvent(false);
        using (var subscriber = _messages.Subscribe(msg =>
                                        {
                                            msgs.Add(msg);
                                            wait.Set();
                                        }))
        {
            // Wait for the max seconds for a new msg
            wait.WaitOne(TimeSpan.FromSeconds(MaxWaitSeconds));
        }

        ((Action<List<MessageInfo>>)parm)(msgs);
    }), onMessages);

    if (!queued)
        onMessages(new List<MessageInfo>());
} 
```

使用这种方法，我会丢失在断开连接和处置观察者以及重新连接之间出现的消息。如何正确实施此机制以不丢失这些消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:09:11.990

我找到了解决方案。我不知道它是否是世界上最美丽的，但它确实有效。我创建了私有财产，所以每个用户可以有多个会话：

```
private ConcurrentDictionary<long, ChatServerUserSessions> _chatServerUserSessionInfoDictionary = new ConcurrentDictionary<long, ChatServerUserSessions>(); 
```

和会话类：

```
public class ChatServerUserSessions
{
    public long UserId { get; set; }

    public string UserName { get; set; }

    public ConcurrentDictionary<string, ChatServerUserSessionInfo> Sessions { get; set; }

    public object Lock { get; set; }
} 
```

并且对于我创建的每个会话：

```
public class ChatServerUserSessionInfo : IObservable<ChatServerRoomActivityInfoBase>, IDisposable
{
    public string SessionId { get; set; }

    public List<long> SubscribedRoomIds { get; set; }

    public DateTime SubscriptionTicketInvalidationDate { get; set; }

    public Queue<ChatServerRoomActivityInfoBase> MessagesQueue { get; set; }

    private IDisposable subscription;
    private List<IObserver<ChatServerRoomActivityInfoBase>> observers;
    private ChatServerUserSessions parentUserSessions;

    public ChatServerUserSessionInfo(string sessionId, DateTime subscriptionTicketInvalidationDate, Subject<ChatServerRoomActivityInfoBase> chatServerRoomActivity, ChatServerUserSessions parentUserSessions)
    {
        this.SessionId = sessionId;
        this.SubscribedRoomIds = new List<long>();
        this.SubscriptionTicketInvalidationDate = subscriptionTicketInvalidationDate;
        this.MessagesQueue = new Queue<ChatServerRoomActivityInfoBase>();
        this.parentUserSessions = parentUserSessions;

        subscription = chatServerRoomActivity.Subscribe(activity =>
        {
            lock (parentUserSessions.Lock)
            {
                if (this.SubscribedRoomIds.Contains(activity.RoomId))
                {
                    this.MessagesQueue.Enqueue(activity);

                    foreach (var observer in observers)
                    {
                        observer.OnNext(activity);
                    }
                }
            }
        });

        observers = new List<IObserver<ChatServerRoomActivityInfoBase>>();
    }

    ~ChatServerUserSessionInfo()
    {
        Dispose();
    }

    public void Dispose()
    {
        if (subscription != null)
        {
            subscription.Dispose();
            subscription = null;
        }

        this.observers = null;

        GC.SuppressFinalize(this);
    }

    public IDisposable Subscribe(IObserver<ChatServerRoomActivityInfoBase> observer)
    {
        lock (parentUserSessions.Lock)
        {
            this.observers.Add(observer);
            return (IDisposable)new Subscription(this, observer);
        }
    }

    private void Unsubscribe(IObserver<ChatServerRoomActivityInfoBase> observer)
    {
        lock (parentUserSessions.Lock)
        {
            if (this.observers == null)
            {
                return;
            }

            this.observers.Remove(observer);
        }
    }

    private class Subscription : IDisposable
    {
        private ChatServerUserSessionInfo subject;
        private IObserver<ChatServerRoomActivityInfoBase> observer;

        public Subscription(ChatServerUserSessionInfo subject, IObserver<ChatServerRoomActivityInfoBase> observer)
        {
            this.subject = subject;
            this.observer = observer;
        }

        public void Dispose()
        {
            IObserver<ChatServerRoomActivityInfoBase> observer = Interlocked.Exchange<IObserver<ChatServerRoomActivityInfoBase>>(ref this.observer, (IObserver<ChatServerRoomActivityInfoBase>)null);
            if (observer == null)
            {
                return;
            }

            this.subject.Unsubscribe(observer);
            this.subject = (ChatServerUserSessionInfo)null;
        }
    }
} 
```

每个用户会话都有自己的 MessageQueue 并订阅了全局聊天室活动主题。ChatRoomActivityMessages 会为每个会话单独保留。这是检索消息的方法：

```
public void CheckForChatRoomsActivityAsync(long userId, string userName, Action<List<ChatServerRoomActivityInfoBase>> onChatRoomActivity)
    {
        var sessionId = GetCurrentSessionId();
        var chatServerUserSessions = GetChatServerUserSessions(userId, userName);

        lock (chatServerUserSessions.Lock)
        {
            var userSession = GetChatServerUserSessionInfo(sessionId, chatServerUserSessions);
            ProlongSubscriptions(userSession);

            if (userSession.MessagesQueue.Count > 0)
            {
                var activities = new List<ChatServerRoomActivityInfoBase>();
                while (userSession.MessagesQueue.Count > 0)
                {
                    activities.Add(userSession.MessagesQueue.Dequeue());
                }

                onChatRoomActivity(activities);
            }
            else
            {
                var queued = ThreadPool.QueueUserWorkItem(new WaitCallback(parm =>
                {
                    var activities = new List<ChatServerRoomActivityInfoBase>();
                    var wait = new AutoResetEvent(false);

                    using (var subscriber = userSession.Subscribe(activity =>
                    {
                        lock (chatServerUserSessions.Lock)
                        {
                            activities.Add(activity);
                            userSession.MessagesQueue.Dequeue();

                            wait.Set();
                        }
                    }))
                    {
                        wait.WaitOne(TimeSpan.FromSeconds(CheckForActivityMaxWaitSeconds));
                    }

                    ((Action<List<ChatServerRoomActivityInfoBase>>)parm)(activities);
                }), onChatRoomActivity);

                if (!queued)
                {
                    onChatRoomActivity(new List<ChatServerRoomActivityInfoBase>());
                }
            }
        }
    } 
```

# iphone - 图标上的 aap 名称类似于 iphone 中的应用程序名称

> ID：10596021
> 
> 赞同：0
> 
> 时间：2012-05-15T07:24:59.740
> 
> 标签：iphone, ios

我可以在 iphone 中的应用程序图标上使用应用程序名称这会导致应用程序存储拒绝吗 请指导我开发我的第一个 iphone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:32:12.430

我认为这不会造成任何问题。请确保您的应用程序图标满足此处的要求。[iPhone 和 iPad 的图标和大小](https://developer.apple.com/library/ios/#qa/qa1686/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:32:32.730

是的，您可以在应用图标上显示应用名称。不，它不会导致拒绝。下次，做一些阅读[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)和上面的答案

# c# - 用于在字符串中搜索的适当数据结构 (.net)

> ID：10596022
> 
> 赞同：1
> 
> 时间：2012-05-15T07:25:00.093
> 
> 标签：c#, .net, string, data-structures

我有点辛苦地描述我的情况，因此我的帖子可能会长一点。

我想在字符串中搜索给定的键。字符串是文本文件的行，在逐行读取文件时进行比较。

有一个类具有 NUMBER 和 TYPE 等属性。那是要在行字符串中搜索的键。

一个简单的解决方案是将类实例存储在一个列表中，并为每一行遍历该列表，并查看行字符串是否包含当前列表条目的键。

这个实现的性能虽然会很糟糕，因为平均每行程序都会遍历整个列表。这是因为列表中的每个键在文件中最多出现一次。所以有很多行不包含密钥。

我希望你们能理解我想要解释的内容并理解这个想法。

对象示例：

```
O1:
  ID - 1
  NR - 1587
  TYPE - COMPUTER

O2:
  ID - 2
  NR - 5487
  TYPE - TV

text file lines:
  bla bla \t 8745 RADIO
  fsdakfjd9 9094km d9943
  dkjd894 4003p \t 5487 TV
  sdj99  43s39 kljljkljfsd 
  ... 
```

在第 3 行，程序应找到匹配项并将 ID 2 与行内容一起保存。

感谢您的任何意见...托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:40:35.287

理想情况下，在文件中查找字符串非常密集，您只想执行一次。我认为最好将类引用存储在字典或哈希表中。

然后你可以做类似的事情

```
var myDictionary = new Dictionary<string, ObjectType>();
while(string line = reader.ReadLine())
{
    // Parse the possible key out of the line
    if (myDictionary.ContainsKey(keyFromLine) doSomething(line, myDictionary[keyFromLine]);
}

void doSomething(string line, ObjectType instance)
{
  // Unwrap the line and store appropriate values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:31:04.010

在字符串中拆分、计数是自然资源和时间密集型的。您需要解析和搜索。您必须遍历所有字符串并保存它，然后使用`Dictionary<key, value>`. 尝试循环最少的循环，实现这一点的方法是在所有行上运行程序并首先保存它。不要在每次搜索时扫描行。

# android - Android Contact Groups

> ID：10596027
> 
> 赞同：1
> 
> 时间：2012-05-15T07:25:14.093
> 
> 标签：android, android-contacts

I had business requirement to add,modify,delete contact through xml in the background and show it on native UI of address book. I am able to add only single groups but not able to associate the existing contacts to the group.Can any one suggest and solution to it.

Thanks, Alok Singh

# jquery - 简单的 JSON 到 HTML 表

> ID：10596031
> 
> 赞同：0
> 
> 时间：2012-05-15T07:25:25.140
> 
> 标签：jquery, json

我有一个非常简单的数据，我想在表格中显示。

数据

[{"1":"红色","2":"橙色","3":"蓝色","4":"黄色"}]

代码：

```
 var a = [];
                    $.each(data, function (key, val) {
                        a.push('<tr id="tr_' +key+ '">');
                        a.push('<td>' + key+ '</td>');
                        a.push('<td>' + val+ '</td>');
                        a.push('</tr>');
                    });
                    var s = a.join('');
                    $('#color-list').html(s); 
```

上面的代码导致 [object Object] 而不是 Data。

以下是我的预期结果

1 红色

2 橙色

3 蓝色

4 黄色

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:29:35.147

您的数据变量是一个数组（仅包含一个元素）。该对象实际上是该数组的第一个元素。所以使用：

```
$.each(data[0], function (key, val) {
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:31:44.513

您的数据是一个包含 1 个值的数组，它是一个对象。如果您遍历数组，您将在表中以该对象作为值获得一行。

相反，您应该删除 [] 并仅拥有该对象，然后通过该对象的键/值来代替：

```
var data = {"1":"Red","2":"Orange","3":"Blue","4":"Yellow"} 
```

这会给出你想要的结果。

如果由于某种原因（例如外部数据源）无法摆脱 [ ]，那么只需在循环中使用 data[0] 而不是 data 从数组中的第一个位置获取对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:42:52.550

你可以这样循环：

```
 // If the returned data is an object do nothing, else try to parse
var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;
for (var i = 0; i < array.length; i++) {
    str += '<tr>';
    for (var index in array[i]) {
        str += '<td>' + array[i] + '</td><td>' + array[i][index] + '</td>';
    }
    str += '</tr>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T10:12:46.823

实际上，当 json 为字符串形式时，有时它不起作用。请尝试以下方法：

`[{"Srno":38,"ReqId":36,"ItemId":155,"Qty":90.00,"TransferItemId":null,"TransferQty":null,"ExpReqDated":"\/Date(1363285800000)\/","IsCancelled":false,"Remarks":null},d":171,"Qty":40.00,"TransferItemId":null,"TransferQty":null,"ExpReqDated":"\/Date(1363717800000)\/","IsCancelled":false,"Remarks":null},{"Srno":113,"ReqId":53,"ItemId":172,"Qty":40.00,"TransferItemId":null,"TransferQty":null,"ExpReqDated":"\/Date(1363717800000)\/","IsCancelled":false,"Remarks":null}]"`

然后我们通过 JSON.parse(data) 转换 json 以将其转换为数组...

# excel - .End(xlUp).Row to external file

> ID：10596032
> 
> 赞同：1
> 
> 时间：2012-05-15T07:25:29.260
> 
> 标签：excel, vba

I use now the following macro in my worksheet:

```
With Sheets("missing_artikels")
        .Range("A1:F" & .Cells(.Rows.Count, 1).End(xlUp).Row).Copy Sheets("Master").Range("A" & Rows.Count).End(xlUp).Offset(1)
    End With 
```

Instead of copy the data to the local file, i want copy the data to a external file on location `I:\sales\Funnel\funnel.xls` in worksheet "funnel".

How can i combine this? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:28:13.590

这可能是一个有趣的建议，但美丽从来不在于编写复杂的代码，而是编写简单的代码，即使你在一年后看到它，你也能理解它:)

总是用简单易懂的行来分解你的代码。例如，我已将您的请求与您现有的代码结合起来。我已经声明了相关变量（*参见获取 lastrow、工作表名称等*）

这是你正在尝试的吗？

```
Option Explicit

Const wbPath = "I:\sales\Funnel\funnel.xls"

Sub Sample()
    Dim wbI As Workbook, wbO As Workbook
    Dim wsI As Worksheet, wsO As Worksheet
    Dim wsILrow As Long, wsOLrow As Long

    '~~> Input Workbook
    Set wbI = ThisWorkbook
    Set wsI = wbI.Sheets("missing_artikels")

    '~~> Output Workbook
    Set wbO = Workbooks.Open(wbPath)
    Set wsO = wbO.Sheets("funnel")
    wsOLrow = wsO.Range("A" & wsO.Rows.Count).End(xlUp).Row + 1

    With wsI
        wsILrow = .Range("F" & .Rows.Count).End(xlUp).Row
        .Range("A1:F" & wsILrow).Copy wsO.Range("A" & wsOLrow)
    End With

    '
    ' '~~> Rest of the code
    '
End Sub 
```

高温高压

# c++ - Playing mp4 video using Phonon

> ID：10596038
> 
> 赞同：1
> 
> 时间：2012-05-15T07:25:44.250
> 
> 标签：c++, qt, mp4, phonon

I'm trying to write a very simple video player using QT and Phonon, on Windows. My backend is phonon_ds94\. First of all, here is the code when I click on "Play" :

```
if (!this->_files.empty()) {
    QString file = this->_files.front();

    this->_files.pop();

    Phonon::MediaSource _src(file);
    this->ui.videoPlayer->play(_src);
} 
```

(Here, file is a std::queue of files to read)

If I want to play a .avi ou .wmv, everything works fine. My video play, it's perfect.

But when I want to play a .mp4 file, nothing happen. The videoPlayer stay black.

I've search on the web and see that there is a BackendCapabilities::availableMimeTypes, so I've try it to be sure that my backend is compatible with mp4 - it's in the list. Here is the list of available mime types:

> application/vnd.ms-wpl application/x-mplayer2 application/x-ms-wmd application/x-ms-wmz audio/3gpp audio/3gpp2 audio/aiff audio/basic audio/mid audio/midi audio/mp3 audio/mp4 audio/mpeg audio/mpegurl audio/mpg audio/vnd.dlna.adts audio/wav audio/x-aiff audio/x-mid audio/x-midi audio/x-mp3 audio/x-mpeg audio/x-mpegurl audio/x-mpg audio/x-ms-wax audio/x-ms-wma audio/x-wav midi/mid unknown video/3gpp video/3gpp2 video/avi **video/mp4** video/mpeg video/mpg video/msvideo video/quicktime video/vnd.dlna.mpeg-tts video/x-mpeg video/x-mpeg2a video/x-ms-asf video/x-ms-asf-plugin video/x-ms-wm video/x-ms-wmv video/x-ms-wmx video/x-ms-wvx video/x-msvideo vnd.ms.wmhtml

I've also connected the `stateChanged` signal of the `mediaObject` to a slot, and when I try to read my video, there is an error saying that file format is not supported.

How can I have Phonon to support it? Should I install a codec pack, even if mp4 is in my list?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:07:24.183

I recently had a similar problem and after trying a number of codec packs, here is the one that worked.

[K Lite Mega Codec Pack](http://www.free-codecs.com/download/K_Lite_Mega_Codec_Pack.htm)

If you go into the advanced install, you can uncheck the "Tools", "Program" (Windows Media Player Classic), "Shell Extension", and later uncheck the free browser toolbars that come with it, you end up with just the codecs.

Afterwards I have been able to play anything on Windows using the qmediaplayer example program included in the Demos folder of the QtSDK.

# android - 从处理程序的 handleMessage() 调用函数会产生 nullPointer 异常

> ID：10596039
> 
> 赞同：0
> 
> 时间：2012-05-15T07:25:51.043
> 
> 标签：android, multithreading, list

这是我的代码：
这是我的 handleMessage 函数：

```
 public void handleMessage(Message msg)
                   {
                       if(msg.what==1){
                      ArrayList<pack.Form> o=(ArrayList<pack.Form>)msg.obj;
                      pb.setVisibility(8);try{

                      showList(o);
                      }catch(Exception e)
                      {
                          Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                      }
} 
```

这是我的 showList 函数：

```
public  void showList(ArrayList<Form> v)
       {
           try{ListView listView = (ListView) ListActivity.this.findViewById(R.id.mylist);
            listView.setTextFilterEnabled(true);
             String[] values=new String[200];
             int i=0;
            Iterator<Form> it=v.listIterator();
            while(it.hasNext())
            {
                values[i]=((Form)it.next()).body;
            }
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(context,
                    R.layout.list_item,values);

                // Assign adapter to ListView
                listView.setAdapter(adapter);}
           catch(Exception e){Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();}
       } 
```

调用 showList() 函数时抛出空指针异常。问题是什么？
**日志输出**：

```
D/AndroidRuntime(  914): Shutting down VM
W/dalvikvm(  914): threadid=3: thread exiting with uncaught exception (group=0x4
001b188)
E/AndroidRuntime(  914): Uncaught handler: thread main exiting due to uncaught e
xception
E/AndroidRuntime(  914): java.lang.NullPointerException
E/AndroidRuntime(  914):        at android.widget.ArrayAdapter.createViewFromRes
ource(ArrayAdapter.java:355)
E/AndroidRuntime(  914):        at android.widget.ArrayAdapter.getView(ArrayAdap
ter.java:323)
E/AndroidRuntime(  914):        at android.widget.AbsListView.obtainView(AbsList
View.java:1256)
E/AndroidRuntime(  914):        at android.widget.ListView.measureHeightOfChildr
en(ListView.java:1147)
E/AndroidRuntime(  914):        at android.widget.ListView.onMeasure(ListView.ja
va:1060)
E/AndroidRuntime(  914):        at android.view.View.measure(View.java:7964)
E/AndroidRuntime(  914):        at android.view.ViewGroup.measureChildWithMargin
s(ViewGroup.java:3023)
E/AndroidRuntime(  914):        at android.widget.LinearLayout.measureChildBefor
eLayout(LinearLayout.java:888)
E/AndroidRuntime(  914):        at android.widget.LinearLayout.measureVertical(L
inearLayout.java:350)
E/AndroidRuntime(  914):        at android.widget.LinearLayout.onMeasure(LinearL
ayout.java:278)
E/AndroidRuntime(  914):        at android.view.View.measure(View.java:7964)
E/AndroidRuntime(  914):        at android.view.ViewGroup.measureChildWithMargin
s(ViewGroup.java:3023)
E/AndroidRuntime(  914):        at android.widget.FrameLayout.onMeasure(FrameLay
out.java:245)
E/AndroidRuntime(  914):        at android.view.View.measure(View.java:7964)
E/AndroidRuntime(  914):        at android.widget.LinearLayout.measureVertical(L
inearLayout.java:464)
E/AndroidRuntime(  914):        at android.widget.LinearLayout.onMeasure(LinearL
ayout.java:278)
E/AndroidRuntime(  914):        at android.view.View.measure(View.java:7964)
E/AndroidRuntime(  914):        at android.view.ViewGroup.measureChildWithMargin
s(ViewGroup.java:3023)
E/AndroidRuntime(  914):        at android.widget.FrameLayout.onMeasure(FrameLay
out.java:245)
E/AndroidRuntime(  914):        at android.view.View.measure(View.java:7964)
E/AndroidRuntime(  914):        at android.view.ViewRoot.performTraversals(ViewR
oot.java:763)
E/AndroidRuntime(  914):        at android.view.ViewRoot.handleMessage(ViewRoot.
java:1633)
E/AndroidRuntime(  914):        at android.os.Handler.dispatchMessage(Handler.ja
va:99)
E/AndroidRuntime(  914):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  914):        at android.app.ActivityThread.main(ActivityThrea
d.java:4363)
E/AndroidRuntime(  914):        at java.lang.reflect.Method.invokeNative(Native
Method)
E/AndroidRuntime(  914):        at java.lang.reflect.Method.invoke(Method.java:5
21)
E/AndroidRuntime(  914):        at com.android.internal.os.ZygoteInit$MethodAndA
rgsCaller.run(ZygoteInit.java:860)
E/AndroidRuntime(  914):        at com.android.internal.os.ZygoteInit.main(Zygot
eInit.java:618)
E/AndroidRuntime(  914):        at dalvik.system.NativeStart.main(Native Method)

I/Process (   52): Sending signal. PID: 914 SIG: 3
I/dalvikvm(  914): threadid=7: reacting to signal 3
E/dalvikvm(  914): Unable to open stack trace file '/data/anr/traces.txt': Permi
ssion denied
I/Process (  914): Sending signal. PID: 914 SIG: 9
I/WindowManager(   52): WIN DEATH: Window{44da9a90 com.list/com.list.ListActivit
y paused=false}
I/ActivityManager(   52): Process com.list (pid 914) has died.
I/UsageStats(   52): Unexpected resume of com.android.launcher while already res
umed in com.list
E/gralloc (   52): [unregister] handle 0x47bf40 still locked (state=40000001)
W/InputManagerService(   52): Got RemoteException sending setActive(false) notif
ication to pid 914 uid 10030
D/dalvikvm(  183): GC freed 28 objects / 1360 bytes in 149ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:32:42.967

看看我在[这里](https://stackoverflow.com/questions/3544738/android-arrayadapter-createviewfromresourceint-view-viewgroup-int-line-3)找到了什么。尝试`String[] values`在链接中完成初始化并告诉我们结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:50:42.910

这是一个非常愚蠢的错误。我没有`i`在 showList() 函数的 for 循环中增加值。只是添加`i++`工作。很抱歉浪费您的时间。

# mysql - 我只得到那些需要我使用 MySQL 的列名

> ID：10596041
> 
> 赞同：0
> 
> 时间：2012-05-15T07:25:53.090
> 
> 标签：mysql, database, optimization

> **可能重复：**
> [SQL 使用 SELECT * [except columnA] FROM tableA 排除列？](https://stackoverflow.com/questions/729197/sql-exclude-a-column-using-select-except-columna-from-tablea)

我有一个表，这个表包含 30 列，我只得到那些需要我使用 * 的列名。

我的问题是如何避免其他列名？

例如，如果可能，在 MySQL 中需要结果：

```
SELECT *, AVOID('col_13,col_14') FROM `table` 
```

**AVOID**不是 MySQL 的功能，我只是通过这个来解释。

我为什么要这个？我只需要 20 列名称作为主页，我不写这样的查询，因为我想要优化或更短的方式，如`*`.

```
SELECT col_1,col_2,....col_20 FROM `table` 
```

这在 MySQL 中是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:27:13.983

不，这是不可能的。您需要枚举**所有**必填字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:30:44.777

试试这个查询

```
SET @SQL = CONCAT('SELECT ', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'col_13,col_14,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'table_name' ), ' FROM table_name');

PREPARE stmt1 FROM @SQL;
EXECUTE stmt1; 
```

# widget - Feedback Widget with page questions

> ID：10596042
> 
> 赞同：1
> 
> 时间：2012-05-15T07:25:54.340
> 
> 标签：widget, survey, feedback, user-feedback

I'm looking for a feedback widget similar to get satisfaction that will allow me to purpose a few unique question per page. We are launching a website and want to ask a few questions on every page to our beta users and are looking for a feedback widget that has this capability built in. Any help would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:29:30.333

不确定您是否找到了解决方案，但请查看 squidcube.com。我们的嵌入式产品正是您所要求的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T04:03:31.023

尝试反馈精简版 - [http://www.feedbacklite.com/tour/](http://www.feedbacklite.com/tour/)。您可以自定义问题、布局，还可以同时在您的网站上的不同页面上运行多项调查。

# android - 如何在 Fragment 中的 FragmentActivity 中访问设置为 Title 的布局

> ID：10596044
> 
> 赞同：0
> 
> 时间：2012-05-15T07:25:58.807
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有一个 FragmentActivity，我在其中编写了代码以在 OnCreate() 方法中创建自定义标题栏，如下所示：

```
 requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mylayout); 
```

问题是我需要访问 FragmentActivty 持有的 Fragment 中“mylayout”中的按钮。

我的 FragmentActivity 名称是“MainFragmentActivity”，它扩展了 FragmentActivity
我这个 FragmentActivity 持有的 Fragment 类是“MyFragment”

谁能帮助我如何访问 FragmentActivity 的标题布局中存在的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:30:15.353

您不需要做任何特别的事情；调用`findViewById(R.id.the_button);`应该工作。SDK 中的`ActionBarCompat`示例代码在[ActionBarHelperBase.java](http://developer.android.com/resources/samples/ActionBarCompat/src/com/example/android/actionbarcompat/ActionBarHelperBase.html)中执行此操作。

# perl - String::ShellQuote: 我什么时候需要`shell_quote`？

> ID：10596050
> 
> 赞同：3
> 
> 时间：2012-05-15T07:26:29.023
> 
> 标签：perl, shell, system, argument-passing

当我将参数传递给这种方式时，`shell_qoute`使用[String::ShellQuote](http://search.cpan.org/perldoc?String%3a%3aShellQuote)是否有意义`system`？

```
#!/usr/bin/env perl
use warnings;
use 5.012;
use String::ShellQuote qw(shell_quote);

my $file = shift;
my $argument = shift;

$file = shell_quote $file;
$argument = shell_quote $argument;

system( 'some_command', '--verbose', '-o', $file, $argument ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:48:59.583

不，它没有。如果您调用`system`为

```
system LIST 
```

然后它不会调用shell。Shell 元字符没有特殊含义。所以你不能引用你的论点，否则它会给出错误的结果。

`system`如果被调用为需要引用

```
system SCALAR 
```

其中 SCALAR 可能类似于`ls file name with spaces`，参数 to`ls`是包含空格的单个文件名。

# java - 使用 swig 生成 std ::vector 到 java.util.Vector 代码

> ID：10596052
> 
> 赞同：6
> 
> 时间：2012-05-15T07:26:29.913
> 
> 标签：java, c++, list, vector, swig

我尝试用 SWIG 生成 java 代码

在**MyList.h**我声明了一个名为**_list的自定义列表对象**

```
List<T*> _list; 
```

这个List类继承自vector

```
class List : public vector<T> 
```

在业务类中（在 C++ 中）我返回一个自定义对象列表

```
List<MyObject> getMyList(){
   ....
   return list;
} 
```

所以我想生成 java 代码，我可以在其中检索这个 C++ 列表作为 java.util.List 或 java.util.Vector。

在我的 swig.i 文件中，我无法管理如何体现

```
%typemap(jstype) List "java.util.Vector"
namespace std {
   %template(CustomVector) vector<MyObject>;
} 
```

任何帮助如何配置这个 swig.i 模板文件或一些示例代码来生成 java.util.List / Vector 返回函数将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T09:18:08.260

您真的不想接触`java.util.Vector`包装好的接口，因为每次将其传入/传出函数时，您最终都会复制存储或进行大量复制操作。（另请注意，在 C++ 中，从容器继承通常是奇怪的设计）。

相反，在 Java 中，“正确”的做法是继承自`java.util.AbstractList`. 这个答案是我[对类似问题的旧答案](https://stackoverflow.com/a/8190135/168175)的更通用版本。

它适用于所有`std::vector`类型，而不仅仅是固定类型，并且处理需要使用“自动框”自定义类型映射[通过对象访问的原语。](https://stackoverflow.com/questions/2721546/why-dont-generics-support-primitive-types)它缺少对 special 的支持`std::vector<bool>`，但是如果您需要它应该很容易添加。

```
%{
#include <vector>
#include <stdexcept>
%}

%include <stdint.i>
%include <std_except.i>

namespace std {

    template<class T> class vector {
      public:
        typedef size_t size_type;
        typedef T value_type;
        typedef const value_type& const_reference;
        vector();
        vector(size_type n);
        vector(const vector& o);
        size_type capacity() const;
        void reserve(size_type n);
        %rename(isEmpty) empty;
        bool empty() const;
        void clear();
        void push_back(const value_type& x);
        %extend {
            const_reference get(int i) const throw (std::out_of_range) {
                return $self->at(i);
            }
            value_type set(int i, const value_type& VECTOR_VALUE_IN) throw (std::out_of_range) {
                const T old = $self->at(i);
                $self->at(i) = VECTOR_VALUE_IN;
                return old;
            }
            int32_t size() const {
              return $self->size();
            }
            void removeRange(int32_t from, int32_t to) {
              $self->erase($self->begin()+from, $self->begin()+to);
            }
        }
    };
}

// Java typemaps for autoboxing in return types of generics
%define AUTOBOX(CTYPE, JTYPE)
%typemap(autobox) CTYPE, const CTYPE&, CTYPE& "JTYPE"
%enddef
AUTOBOX(double, Double)
AUTOBOX(float, Float)
AUTOBOX(boolean, Boolean)
AUTOBOX(signed char, Byte)
AUTOBOX(short, Short)
AUTOBOX(int, Integer)
AUTOBOX(long, Long)
AUTOBOX(SWIGTYPE, $typemap(jstype,$1_basetype))

%typemap(javabase) std::vector "java.util.AbstractList<$typemap(autobox,$1_basetype::value_type)>"
%typemap(javainterface) std::vector "java.util.RandomAccess"
%typemap(jstype) std::vector get "$typemap(autobox,$1_basetype)"
%typemap(jstype) std::vector set "$typemap(autobox,$1_basetype)"
%typemap(jstype) std::vector &VECTOR_VALUE_IN "$typemap(autobox,$1_basetype)"
%typemap(javacode) std::vector %{
  $javaclassname(java.util.Collection<$typemap(autobox,$1_basetype::value_type)> e) {
    this.reserve(e.size());
    for($typemap(autobox,$1_basetype::value_type) value: e) {
      this.push_back(value);
    }
  }
%} 
```

其中大部分与 SWIG 当前提供的默认 std_vector.i 非常相似，新位是重命名、扩展和扩展`AbstractList`和实现的类型映射`RandomAccess`。它还添加了一个接受其他`Collection`s 的构造函数——这是 Java 文档推荐的，并且很容易做到。`std::vector`（其他类型的重载*要快得多*）。

我在另一个 SWIG 界面中测试了这个向量包装：

```
%module test

%include "vector.i"

%template(DblVec) std::vector<double>;
%template(ByteVec) std::vector<signed char>;
%include <std_string.i>
%template(StringVec) std::vector<std::string>;

%inline %{
struct foo {};
%}

%template(FooVec) std::vector<foo>; 
```

我能够编译和运行：

```
public class run {
  public static void main(String argv[]) {
    System.loadLibrary("test");
    DblVec dv = new DblVec(100);
    for (int i = 0; i < 100; ++i) {
      dv.set(i,(double)i);
    }
    FooVec fv = new FooVec(1);
    fv.set(0, new foo());
    for (double d: dv) {
      System.out.println(d);
    }
  }
} 
```

# javascript - 如何使用 jquery 使用本地存储变量设置输入字段

> ID：10596057
> 
> 赞同：0
> 
> 时间：2012-05-15T07:26:41.660
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在使用 jquery mobile 和 jquery 制作移动网络应用程序。现在我已经有了它，当我选中我的复选框时，它会将我的变量从浏览器保存到本地存储中。但它不会将这些变量放回我的输入字段中。

这是我的脚本。函数 validate() 将变量保存到本地存储中。

```
$(document).ready(function () {
        if (localStorage["mail"]) {
            $('#mail').val(localStorage["mail"]);
        }else{
            $('#mail').val("");
        }
        if (localStorage["password"]) {
            $('#password').val(localStorage["password"]);
        }else{
            $('#password').val("");
        }
});
function validate(){
    if ($("remember:checked")) {
         var mail= $("#mail").val();
         var password= $("#password").val();

         localStorage["mail"] = mail ;
         localStorage["password"] = password;
         localStorage.setItem("mail", mail) ;
         localStorage.setItem("password", password) ;

     }else{
       alert("You didn't check it! Let me check it for you.")
     }
} 
```

有谁能够帮助我 ？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:28:18.400

这似乎`$("remember:checked")`不是一个有效的选择器（缺少 a`.`或 a `#`）。因此，您的值可能永远不会保存到本地存储中

当您检查元素是否存在时，您应该改用`length`属性

```
if ($("<your selector>").length) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T07:30:41.423

您在本地存储中设置和获取项目时做错了使用

```
localStorage.setItem('someval',1)
localStorage.getItem('someval'); // 1 
```

# vb.net - 如何将格式从 NumericUpDown 保留为 String

> ID：10596062
> 
> 赞同：0
> 
> 时间：2012-05-15T07:26:59.640
> 
> 标签：vb.net, formatting

我的表单包含几个`NumericUpDown`控件。这些控件显示不同的小数位数。稍后在我的代码中，我将不同`NumericUpDown.Value`的 's 放在一个字符串数组中`arrStr()`，如下所示：

```
arrStr(1) = NumericUpDown1.Value
arrStr(2) = NumericUpDown2.Value
arrStr(3) = NumericUpDown3.Value 
```

然后我将带有函数的数组打印`File.WriteAllLines`到文本文件中。例如`NumericUpDown1.Value = 1.00`，如果文件`NumericUpDown2.Value = 2.30`中`NumericUpDown3.Value = 2.124`包含以下值：

```
1
2.3
2.124 
```

我想看看：

```
1.00
2.30
2.124 
```

我已经尝试过`Format`哪个有效，但是这种格式化方法并不方便，因为已经为每个设置了小数位数`NumericUpDown`。再次做这项工作会很烦人，但现在有了`Format`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:32:58.517

您可以使用[`String.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)强制保留两位小数：

```
Dim value As Double = 2.3
Dim formatted = String.Format("{0:f2}", value) ' 2.30 ' 
```

[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

**编辑**：如果你的数组很大并且你想避免：

`arrStr(1) = String.Format("{0:f2}", NumericUpDown1.Value)`取决于`arrStr(86) = String.Format("{0:f2}", NumericUpDown86.Value)`

您可以使用 LINQ 创建数组。假设您的`NumericUpDown`控件都在一个`GroupBox`被调用的`NumericGroupBox`. 您可以“注入”正确的小数位数：

```
Dim arrStr() As String =
        (From n In NumericGroupBox.Controls.OfType(Of NumericUpDown)()
        Select String.Format("{0:f" & n.DecimalPlaces & "}", n.Value)).ToArray() 
```

这是一个搜索`TabPages`你所有的版本`TabControl`（如评论）：

```
Dim allNumerics = From tp In Me.TabControl1.TabPages.Cast(Of TabPage)()
                  From n In tp.Controls.OfType(Of NumericUpDown)()
                  Select String.Format("{0:f" & n.DecimalPlaces & "}", n.Value)
Dim arrStr As String() = allNumerics.ToArray() 
```

# asp.net - How to send mail for .org domain using web mail service in asp.net

> ID：10596072
> 
> 赞同：0
> 
> 时间：2012-05-15T07:27:33.103
> 
> 标签：asp.net, email, webmail

I want to send email from my asp.net application

I have successfully sent the email form my aspx page for .com domain

by the following code

```
 MailMessage msg = new MailMessage();
    msg.From = new MailAddress("support@mydomain.com");
    msg.To.Add("recipiant@gmail.com");
    msg.Subject = "Demo Subject";
    msg.Body = "Hey Test email";        
    SmtpClient client = new SmtpClient();
    client.Host = "mail.mydomain.com";
    client.Port = 25;
    client.Credentials = new NetworkCredential("username", "password");        
    client.Send(msg); 
```

But in case of .org domain it is not going email I have used the below code for .org domain

```
 MailMessage msg = new MailMessage();
    msg.From = new MailAddress("support@mydomain.org");
    msg.To.Add("recipiant@gmail.com");
    msg.Subject = "Demo Subject";
    msg.Body = "Hey Test email";        
    SmtpClient client = new SmtpClient();
    client.Host = "mail.mydomain.org";
    client.Port = 25;
    client.Credentials = new NetworkCredential("username", "password");        
    client.Send(msg); 
```

In user name filed i have entered only user name not with domain name.

so first sent when i have used for .com domain

but when i have used .org mail with correct id and password, then one error is throwing me, called:

Mailbox unavailable. The server response was: Authentication is required for relay Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. Exception Details: System.Net.Mail.SmtpFailedRecipientException: Mailbox unavailable. The server response was: Authentication is required for relay

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:05:31.263

尝试使用 Telnet 之类的工具测试 SMTP 设置，它会告诉您是否获得了正确的详细信息。

试试这样的[http://support.microsoft.com/kb/153119](http://support.microsoft.com/kb/153119)

# ruby-on-rails - 创建属性“货币”的弃用警告

> ID：10596073
> 
> 赞同：9
> 
> 时间：2012-05-15T07:27:38.927
> 
> 标签：ruby-on-rails, rspec, currency

我正在使用带有 money-rails gem 的 Rails 3.2.3，并且我有一个产品模型，它具有以下内容：

我的模型

```
class Product < ActiveRecord::Base
  attr_accessible :name, :price

  composed_of :price,
  :class_name => "Money",
  :mapping => [%w(price_cents cents), %w(currency currency_as_string)],
  :constructor => Proc.new { |cents, currency| Money.new(cents || 0, currency || Money.default_currency) },
  :converter => Proc.new { |value| value.respond_to?(:to_money) ? value.to_money : raise(ArgumentError, "Can't convert #{value.class} to Money") }

end 
```

我的测试

```
require 'spec_helper'

describe Product do
  context "testing money gem" do
    it "creates product with price" do
      product = Product.create(:price => 200)
      product.price.should eq(200)
      product.price_cents.should eq(20000)
    end
  end
end 
```

我收到了弃用警告。

```
% rspec spec/models/product_spec.rb

Product
  testing money gem
DEPRECATION WARNING: You're trying to create an attribute `currency'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. (called from block (3 levels) in <top (required)> at /home/map7/project/spec/models/product_spec.rb:6)
    creates product with price

Finished in 0.06682 seconds
1 example, 0 failures 
```

如何解决此弃用警告？

**更新**

如果我在表格中添加“货币”，它就会开始工作。我应该这样做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T19:00:15.650

显然，在 Rails 3.2 及更高版本中，不再允许任意属性（未存储在数据库中的属性）。似乎没有办法解决它。

这是弃用消息的提交：[https](https://github.com/rails/rails/commit/b2955edc) ://github.com/rails/rails/commit/b2955edc ，原因如下：[https ://github.com/rails/rails/commit/50d395f96ea05da1e02459688e94bff5872c307b](https://github.com/rails/rails/commit/50d395f96ea05da1e02459688e94bff5872c307b)

在您的情况下 price_cents 和 currency 仍然需要存储在数据库中，然后您的组合类将从那里获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:10:48.983

在我的模型中添加了“货币：字符串”

# php - 用双引号而不是单引号对 JSON 进行编码

> ID：10596078
> 
> 赞同：0
> 
> 时间：2012-05-15T07:28:04.890
> 
> 标签：php, json

我有一个 json.php 文件，它提供如下结果：

```
{ "markers": [ {'a1_id':"4213CK58", etc. 
```

问题是 Google Maps API 不喜欢单引号，所以我需要这样的结果：

```
{ "markers": [ {"a1_id":"4213CK58", etc. 
```

将代码中的 ' 替换为 " 不会提供...

```
<?php 

    // Iterate over the rows
    $nextRow= $result->nextRow();
    $r      = 1;
    $info   = array();

    while ( $nextRow ) {

        $nextColumn = $result->nextColumn();

        // Has this column been printed already
        if ( $unique ) 
        {
            $d = $result->getDataForField($unique);
            if ( array_key_exists($d, $already) )
            {
                $nextRow= $result->nextRow();
                continue;
            }
            $already[$d] = true;
        }

        echo '{';
        // Iterate over the columns in each row

        while ( $nextColumn )
        {

            // Get the variable
            $variable       = $result->getOutputVariable();
            $name           = $variable->getName(true);
            $data           = $result->getDataForField();

            if ( !isset($info[$name]) ) {
                $info[$name]['translate']   = $variable->shouldTranslate();
                $info[$name]['type']        = $variable->getDataType();
                $info[$name]['linkable']    = $variable->isLinkable();
            }

            // Translate the data if requested
            if ( $info[$name]['translate'] ) {
                $data   = LQMTemplate::_($data);
            }

            $data   = $variable->format($data, false);

            $type   = $info[$name]['type'];
            if ( ($type == 'bool') or ($type == 'boolean') )
            {
                $data = $data ? '1' : '0';
                echo "'$name':$data";
            } elseif ( $encode ) {
                // Can we use json_encode ?
                // str_replace because some versions of PHP have a bug that will over escape forward slashes
                echo "'$name':".str_replace('\\/', '/', json_encode($data));
            } else {
                $data   = LQMUtility::jsonEscape($data, '"');
                echo "'$name':\"$data\"";
            }

            // Conditionally print the next column
            $nextColumn = $result->nextColumn();
            if ( $nextColumn ) echo ",\n ";

        }

        // Conditionally print the next column
        $nextRow = $result->nextRow();

        echo $nextRow ? "},\n" : "}\n";
        $r++;

    } 

unset($result);
echo ']}';
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:29:16.823

创建一个包含要编码的数据的数组，然后使用 PHP 的内置[`json_encode()`](http://php.net/json_encode)函数。

# css - 多个顶部固定的 div？

> ID：10596085
> 
> 赞同：13
> 
> 时间：2012-05-15T07:28:25.230
> 
> 标签：css, html, css-position

我有两个 div： - 一个标题栏，在滚动时固定，并卡在页面顶部。- 一个通知 div，其中包含一个消息横幅，如果触发，该横幅将向下滑动。

标题栏固定在顶部，但我似乎无法让通知 div 在其下方自行修复。每次我尝试这个时，这个 div 都会固定在我的标题栏前面的页面顶部；似乎取而代之。填充似乎没有帮助。

有人可以给我任何建议吗？

这是工作 div：

```
#header {
    text-align: left;
    background-image:url(../Resources/Banner2.gif);
    background-repeat:no-repeat;
    background-color:#00ed32;
    color:#FFF;
    position:fixed;
    width:100%;
    top:0px;
    left:0px;
    padding:15px;
} 
```

这是我想在它下面修复的 div：

```
.notify {
    background: url(../resources/gradients.png) 
    repeat-x 0px 0px; 
    top: -40px; 
    left: 0px;  
    position:fixed; 
    z-index: 100; 
    width: 100%; 
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T07:36:54.370

最简单的方法是在页面顶部放置一个“持有人”栏，然后在其中嵌套“标题”和“通知”元素。

例如：

**CSS**

```
#holder {
    left: 0;
    position: fixed;
    right: 0;
    top: 0;
}

#header, .notify{
    //what ever styles you have
    //position: relative or static
} 
```

**HTML**

```
<div id="holder">
    <div id="header">...</div>
    <div class="notify">...</div>
</div> 
```

### 编辑

**工作示例：http: [//jsfiddle.net/Q6CWv/](http://jsfiddle.net/Q6CWv/)**

### 更新

如果您使用 JQuery ，在元素上添加向下滑动效果`.notify`应该相当简单：

```
$('.notify').slideDown(); 
```

**工作示例：http: [//jsfiddle.net/Q6CWv/1/](http://jsfiddle.net/Q6CWv/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T05:48:05.013

尽管@MyHeadHurts 的回答有些帮助，但这对我来说并不是最好的解决方案，因为当通知弹出时，它要么与标题栏重叠，要么使其在通知出现之前不会弹出标题栏。我确实按照建议将它们放在单独的 div 中，但这可能是我的错。

我的解决方案是进入弹出通知的 JavaScript 并将“顶部”值更改为页面高度的 3%。这现在可以完美运行，除了如果应用了极端级别的缩放，标题和通知栏不会正确对齐。

# moles - Moles 托管无法解决依赖程序集

> ID：10596088
> 
> 赞同：0
> 
> 时间：2012-05-15T07:28:36.543
> 
> 标签：moles

我正在开发一种同时使用 RhinoMocks 和 Moles 的测试方法。我已根据需要将测试方法的主机类型声明为 Moles。现在，当 RhinoMocks 必须发出运行时程序集来为接口创建模拟时，抛出 FileNotFoundException，指向我的一个私有 DLL，它实际上与测试 DLL 和 DLL 位于同一文件夹中包含被测类。

但是当我删除 HostType 属性时，模拟实例的创建工作得很好，没有任何例外。

因此，我使用以下步骤构建了一个解决方法，以使其与 Moles 主机类型一起使用：

1) 我在 [TestInitialize] 中注册了 AppDomain.CurrentDomain.AssemblyResolve 事件

2）在事件处理程序中，我打包了以下逻辑：

```
System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
    {
        string asmPath = Environment.CurrentDirectory + "\\" + args.Name.Split(',')[0] + ".dll";
        if(System.IO.File.Exists(asmPath))
            return System.Reflection.Assembly.Load(new System.Reflection.AssemblyName(args.Name));
        return null;
    } 
```

现在，正如预期的那样，当在 Moles HostType 下执行测试时，确实会调用此程序集解析器。测试现在运行。

但问题仍然是：

1) 为什么即使我们明确地将 AppDomain 的 APPBASE 路径设置为包含我的所有生产 DLL 和测试 DLL 的文件夹，我仍然需要一个单独的程序集解析器

```
AppDomain.CurrentDomain.SetData("APPBASE", Environment.CurrentDirectory); 
```

我检查了当前目录确实是我的 bin 文件夹，其中可以找到每个二进制文件，包括测试 DLL。

2）为什么我在测试我的其他一些生产 DLL 时没有遇到此错误，其中涉及相同的依赖项。

3) 使用 NMock2 时也会出现这个问题，我只是想看看这是否是 RhinoMocks 特有的问题。但事实证明，即使 NMocks2 在 Reflection.Emit 步骤中也存在相同的问题，其依赖 DLL 与 RhinoMocks 相同。有什么办法解释这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:21:21.550

您缺少的部分是，当您运行单元测试时，正在运行的应用程序是单元测试托管应用程序。该应用程序的 CurrentDirectory 可能是其运行器的安装目录。您的程序集与参数一起传递给应用程序。

假设 CurrentDirectory 是您的应用程序的目录是错误的，这解释了第 1、2 和 3 点。

# android - 为什么我得到 Canvas：尝试使用回收的位图 android.graphics？

> ID：10596091
> 
> 赞同：1
> 
> 时间：2012-05-15T07:28:47.070
> 
> 标签：android, bitmap, fatal-error, recycle

我有 4 个活动 A、B、C 和 D。

活动 A 有一个菜单。它的一个选项打开具有列表视图的活动 D。Activity A 通过一个按钮打开 Activity B。Activity B 通过一个按钮打开 Activity C。

活动 C 有 4 个 ImageView，我在完成时回收它们。

当我执行以下场景时，一切都正常：

A -> B --back to--> A --click Menu to D --> **OK**

当我执行以下场景时，我得到了这个致命的异常：

A -> B -> C –back to--> B --back to--> A --click Menu to D --> **get exception**

活动 D 和 C 之间没有关系。但是为什么我在这里得到这个异常？？？？

```
A->B->C (using buttons)

A-> D (using menu) 
```

* * *

```
05-15 11:33:49.600: E/AndroidRuntime(2722): FATAL EXCEPTION: main
05-15 11:33:49.600: E/AndroidRuntime(2722): java.lang.RuntimeException: Canvas: trying to use a recycled bitmap android.graphics.Bitmap@41326810
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.graphics.Canvas.throwIfRecycled(Canvas.java:1038)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.graphics.Canvas.drawBitmap(Canvas.java:1142)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.graphics.drawable.BitmapDrawable.draw(BitmapDrawable.java:393)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.widget.ImageView.onDraw(ImageView.java:924)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.View.draw(View.java:10983)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.widget.ListView.drawChild(ListView.java:3223)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.widget.AbsListView.dispatchDraw(AbsListView.java:2092)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.widget.ListView.dispatchDraw(ListView.java:3218)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.View.draw(View.java:11088)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.widget.AbsListView.draw(AbsListView.java:3398)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.View.draw(View.java:10986)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.View.draw(View.java:10986)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.widget.FrameLayout.draw(FrameLayout.java:450)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2126)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:2026)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.os.Looper.loop(Looper.java:137)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at java.lang.reflect.Method.invokeNative(Native Method)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at java.lang.reflect.Method.invoke(Method.java:511)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-15 11:33:49.600: E/AndroidRuntime(2722):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:35:50.550

**我注意到我不应该为不同的活动使用相同的图像资源，而其中一个正在回收它的位图。**

我在 Activity C 和 Activity D 中为 ImageViews 使用相同的图像资源 (img01.png)。

我把Activity C的图片资源改成了img02.png，问题就解决了。

但我不知道它的逻辑原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:40:25.470

仅仅因为您退出一项活动并不意味着它已经消失。如果您要回收位图，请确保它们没有被使用。当您回收位图时，您可以将 设置`ImageView`为具有不同的（可能为空白） 。`Drawable`

# c# - 将 Siebel Web 服务与 C# ASP.NET 应用程序（Web 服务）一起使用

> ID：10596093
> 
> 赞同：0
> 
> 时间：2012-05-15T07:29:03.337
> 
> 标签：c#, asp.net, web-services, siebel

由于我是 Siebel Web 服务的新手，任何人都可以告诉我有关如何在 C# .NET 应用程序中调用 Siebel Web 服务（入站和出站）并将它们与 Web 服务或 Windows 服务一起使用的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:15:07.710

简单的步骤是：

1.  选择模式（入站或出站）
2.  在 Workflow 或 Business Service 中配置业务逻辑
3.  在应用程序中配置 Web 服务（转到站点地图 > Web 服务）
4.  在应用程序中，确保正确配置端口 url
5.  从应用程序生成 WSDL
6.  从 .Net 或 Java 或任何消费者使用 WSDL 合约调用 WS。

详情请参阅[书架](http://docs.oracle.com/cd/B40099_02/books/CRMWeb/CRMWeb_Overview.html)。

请记住，如果逻辑已准备好，则需要 10 分钟的配置来消费或公开业务逻辑。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:03:37.140

关于 Web 服务的想法是它不是特定于供应商的。因此，Siebel Web 服务（入站）与任何其他 Web 服务一样。有数百万个关于在 C# 中调用 Web 服务的示例。

[但是，官方文档](http://docs.oracle.com/cd/E14004_01/books/EAI2/EAI2_WebServices12.html)中有一些有用的东西；）我这个文档，特别是你可以使用**移动 Web 客户端**来响应 WS 调用。与此类似，无需安装 Siebel 服务器并跳过循环来设置[入站 Web 服务](http://docs.oracle.com/cd/E14004_01/books/EAI2/EAI2_WebServices7.html)并启用**EAI 对象管理器**。

# wpf - 将业务对象的命令绑定到 MVVM 中的视图

> ID：10596094
> 
> 赞同：1
> 
> 时间：2012-05-15T07:29:11.950
> 
> 标签：wpf, mvvm, datagrid, business-objects

我通过 MVVM 在 WPF 中填充 DataGrid。我有具有 4 个属性的业务对象来在 DataGrid 中创建行和列。

```
<DataGrid CanUserAddRows="True" ItemsSource="{Binding Path=PersonsInfo}" AutoGenerateColumns="False"
                  CanUserDeleteRows="True" CanUserReorderColumns="True" 
                  CanUserSortColumns="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}"/>
                <DataGridTextColumn Header="Age" Binding="{Binding Path=Age}"/>
                <DataGridTextColumn Header="Date Of Birth" Binding="{Binding Path=DateOfBirth}"/>
                <DataGridTextColumn Header="Address" Binding="{Binding Path=Address}"/>
                <DataGridTemplateColumn>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Button Content="Remove..." Margin="3" Command="{Binding Path=RemoveCommand}" />
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid> 
```

在上面的代码中，当我单击按钮时，我需要从 DataGrid 中删除记录。

所以我需要这样的要求，我应该在业务对象类中拥有命令，而不是在 ViewModel 类中。

当我单击每一行中的按钮时，应该删除相应的行。

因此，由于业务对象类没有有关 DataGrid 项目的信息，如何通过业务对象类中的命令执行找到在 DataGrid 中选择了哪个项目以删除行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:40:50.683

首先，不要将您的命令放入您`Model`的`RelativeSource`. 像这样：

```
<Button Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.RemoveCommand}" /> 
```

其次，您可以将您的财产绑定到您`DataGrid` `SelectedItem`的财产上`ViewModel`

```
<DataGrid SelectedItem="{Binding SelectedItemProperty, Mode=TwoWay}" .../> 
```

或通过`CommandParameter`.

```
<Button Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" /> 
```

# javascript - 国家的 Json - 使用哪种格式？

> ID：10596096
> 
> 赞同：2
> 
> 时间：2012-05-15T07:29:16.057
> 
> 标签：javascript, json, kml, google-fusion-tables

我在哪里可以找到所有国家的 json 文件？我在哪里可以找到一个国家所有城市的 json 文件？不同格式KML、json、融合表的国家数据有什么区别？据我了解，他们所有人都在不同的视图中保留相同的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-30T21:33:53.140

我想推荐这个数据集：[https](https://github.com/mledoze/countries) ://github.com/mledoze/countries 。它包含 JSON、CSV 和 XML 格式的世界国家列表。

免责声明：我维护这个存储库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:35:09.423

以 XML 格式获取最新版本的官方 ISO 国家列表并将其转换为 JSON。

[http://www.iso.org/iso/country_codes/iso_3166_code_lists.htm](http://www.iso.org/iso/country_codes/iso_3166_code_lists.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:50:11.080

看看[GeoCommons](http://geocommons.com/)；他们有一个[带有 FIPS 代码的 World Country Admin Boundary Shapefile](http://geocommons.com/overlays/33578)，可以下载为：KML、ESRI 形状文件、Atom 文件，甚至是 JSON 选项，但似乎不包含数据。

由于文件太大，如果您单击页面下方中心区域的“相关数据集”选项卡，它将带您到包含相同文件版本的类似文件：10 英里容差，5 英里容差，和 3 英里容差，以减少文件中包含的坐标数。

在这个问题的回答中还有关于国家边界、一些城市边界和美国州边界的更多信息：[如何使用谷歌地图显示国家边界、美国州边界和城市边界？](https://stackoverflow.com/q/10397255/1314132)

希望这可以帮助 -

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T13:04:33.027

这是一个 Github 要点，其中包含您在 JSON 中需要的所有数据：

[https://gist.github.com/Keeguon/2310008](https://gist.github.com/Keeguon/2310008)

希望这可以帮助。

# matlab - Z 变换 Matlab Ezplot 错误

> ID：10596097
> 
> 赞同：0
> 
> 时间：2012-05-15T07:29:16.307
> 
> 标签：matlab, plot, transform, matlab-figure

首先，我使用的是sym，所以我需要一个step（Heaviside）函数。我知道 Matlab 中存在一个`heaviside(t)`，所以我正在使用它。

现在，假设我有函数：`x = -2^(-n+1)*heaviside(n-2)`with `syms n`before。现在：

```
X = ztrans(x);   // z transform
x = iztrans(X);  // inverse z transform 
```

（这应该返回原始的 x 函数）

这返回`x = kroneckerDelta(n - 1, 0) + kroneckerDelta(n - 2, 0)/4 - 2*(1/2)^n + 2*kroneckerDelta(n, 0)`

当我现在尝试绘制`x`时，使用`ezplot(x)`它会返回一堆错误：

```
Error using inlineeval (line 15)
Error in inline expression ==> kroneckerDelta(n - 1, 0) + kroneckerDelta(n - 2, 0)./4 - 2.*(1./2).^n + 2.*kroneckerDelta(n, 0)
 Undefined function 'kroneckerDelta' for input arguments of type 'double'.

Error in inline/feval (line 34)
        INLINE_OUT_ = inlineeval(INLINE_INPUTS_, INLINE_OBJ_.inputExpr, INLINE_OBJ_.expr);

Error in ezplotfeval (line 52)
    z = feval(f,x(1));

Error in ezplot>ezplot1 (line 467)
    [y, f, loopflag] = ezplotfeval(f, x); 
```

如何绘制函数 x 或阻止这些错误出现？我只使用了Matlab固有的功能，不知道该怎么办......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:50:30.073

我敢打赌`ezplot`，通过评估函数来代替符号变量的一些实数值`n`。在这种情况下，`kroneckerDelta`只接受整数值（非双精度）输入。所以一个想法是使用`subs`将整数放入`kroneckerDelta`.

```
x =

kroneckerDelta(n - 1, 0) + kroneckerDelta(n - 2, 0)/4 - 2*(1/2)^n + 2*kroneckerDelta(n, 0)

>> subs(x,-5:5)

ans =

[ -64, -32, -16, -8, -4, 0, 0, -1/4, -1/4, -1/8, -1/16]

>> plot(-5:5,ans) 
```

# vbscript - 如何在vbscript中保存输入框中的信息

> ID：10596102
> 
> 赞同：2
> 
> 时间：2012-05-15T07:29:40.130
> 
> 标签：vbscript, bots

```
dim fname
fname=inputbox("Hi! What's your name?")
fname=inputbox("Thats cool " & fname)
fname=inputbox("so wanna cyber?")
fname=inputbox("What nevermind i change my mind bye!") 
```

如何将用户在输入框中输入的内容保存在另一个文件中？

例如，如果用户回答第一个输入框，我需要将其输出存储在变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:47:52.950

写入时保持文件打开，最后只关闭。

```
Const ForReading = 1, ForWriting = 2, ForAppending = 8, CreateIfNeeded = true
set fso = CreateObject("Scripting.FileSystemObject")
set file = fso.OpenTextFile("output.txt", ForWriting, CreateIfNeeded)

dim fname 
fname = inputbox("Hi! What's your name?")
file.write fname
file.close 
```

# android-layout - EditText 在屏幕上出现异常

> ID：10596111
> 
> 赞同：0
> 
> 时间：2012-05-15T07:30:33.337
> 
> 标签：android-layout

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/sortByName" />

<ListView
    android:id="@+id/listViewContacts"
    android:layout_width="fill_parent"
    android:layout_weight="0.9"
    android:layout_height="0dp" >
</ListView>

<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.1"
        android:orientation="horizontal" >

<EditText
    android:id="@+id/editTxtSearch"
    android:layout_width="225sp"
    android:layout_height="wrap_content"
    android:hint="Search Contacts..."
    android:focusable="true">

    <requestFocus />
</EditText>

<Button
    android:id="@+id/btnSearch"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Search"
    android:layout_gravity="right" />
</LinearLayout> 
```

当活动开始时，键盘会自动出现在屏幕上，并且编辑文本没有正确显示，即随着编辑文本的高度缩小，编辑文本中没有显示文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:33:19.133

您可以使用以下代码行来确保仅在用户单击 EditText 时才会弹出键盘

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

和

您需要添加

```
android:windowSoftInputMode="adjustResize" 
```

到 AndroidManifest.xml 文件中的活动标记。

# r - 堆叠条形图与 R 中的线

> ID：10596113
> 
> 赞同：7
> 
> 时间：2012-05-15T07:30:35.663
> 
> 标签：r, plot

我想将以下堆积条形图与线曲线一起制作。

![在此处输入图像描述](../Images/de0c3a1d42cae690a1a6ade23b366cbe.png)

但是为什么下面的代码不起作用？正确的方法是什么？

```
x<-c(0,1,2,3,4,5,6,7,8,9,10,11,12);

    # To plot line 
    emp_dens <- c(0.107,0.184,0.205,0.185,0.138,0.091,0.049,0.023,0.01,0.0028,0.0012,0.00023,0.00013);
    dat_dens <- as.matrix(cbind(x,emp_dens));

    # To plot stack bar
    dens_all_k <- c(1.15e-01, 1.89e-01, 2.05e-01, 1.82e-01,1.36e-01,8.68e-02,4.71e-02,2.21e-02,9.17e-03,3.37e-03,1.11e-03,3.37e-04,9.31e-05)

    # Each k0..5 compose the stack 
    # For example
    # dens_k0[1] + .... dens_k5[1] ~= dens_all_k[1]

    dens_k0 <-c(2.52e-02,8.38e-02,1.38e-01, 1.53e-01,1.27e-01,8.44e-02, 4.66e-02, 2.21e-02, 9.16e-03, 3.37e-03,1.11e-03, 3.37e-04, 9.31e-05)
    dens_k1 <- c(6.75e-02, 8.91e-02, 5.86e-02, 2.51e-02, 8.59e-03,2.25e-03, 4.90e-04,9.35e-05, 1.55e-05,2.21e-06,2.99e-07, 3.55e-08,3.92e-09)
    dens_k2 <- c(1.70e-02,1.64e-02,7.95e-03, 2.56e-03,6.20e-04,1.20e-04, 1.93e-05, 2.67e-06, 3.23e-07,3.47e-08,3.36e-09, 2.95e-10,2.38e-11)
    dens_k3 <- c(0.005124596,0,0,0,0,0,0, 0, 0, 0, 0,0,0)
    dens_k4 <- c(0.0004270497, 0, 0,0,0, 0, 0, 0, 0,0,0, 0, 0)
    dens_k5 <- c(2.760725e-05, 0, 0, 0,0,0, 0, 0, 0, 0,0, 0,0)

    barplot(cbind(0:max(x),dens_all_k),xlim=c(0,max(x)),ylim=c(0,max(emp_dens)),,space=0.1,lwd=5,xlab="Value of X",ylab="Densities",font.main=1);
    lines(dat_dens,lty=1,col="red"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:17:05.833

dens_all_k 仅包含聚合摘要。如果您正在寻找图片中的条形图，您需要提供所有 k 信息。试试下面的代码。

```
dens_kall<-rbind(dens_k0,dens_k1,dens_k2,dens_k3,dens_k4,dens_k5)
ltext<-c("K0","K1","K2","K3","K4","K5")
colnames(dens_kall)<-0:12
barplot(height=dens_kall,xlim=c(0,max(x)),ylim=c(0,max(emp_dens)),,space=0.1,lwd=5,xlab="Value of X",ylab="Densities",font.main=1
        ,legend.text =ltext,
        args.legend = list(x = "topright")
        );
lines(dat_dens,lty=1,col="red"); 
```

输出是![在此处输入图像描述](../Images/ac6676ad2334e9a07c8c321207f3b568.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:06:25.197

在 barplot 中，您不会传递带有 x 和 y 值的矩阵，而只是传递您的高度。制作所有 dens_k0 等项目并且从不使用它们是没有意义的。尝试...

```
barplot(rbind(dens_k0, dens_k1, dens_k2, dens_k3, dens_k4, dens_k5), xlim=c(0,max(x)), ylim=c(0,max(emp_dens)), space=0.1, lwd=5, xlab="Value of X", ylab="Densities", font.main=1)
lines(emp_dens,lty=1,col="red") 
```

仔细检查我在那里传递的内容以供将来参考。您可能需要设置 barplot 的 legend 参数以使其远程可读。即使是最后几个密度也非常小。

添加图例的一种简单方法是对您拥有的内容进行一些小的更改。

```
barplot(rbind(dens_k0, dens_k1, dens_k2, dens_k3, dens_k4, dens_k5, 0), 
       col = c(grey(exp((0:5)/5) / exp(1)), 'red'), xlim=c(0,max(x)), ylim=c(0,max(emp_dens)), space=0.1, lwd=5, xlab="Value of X", ylab="Densities", font.main=1, 
       legend.text = c('k0', 'k1', 'k2', 'k3', 'k4', 'k5', 'dens curve')) 
```

# xsd - Xml 模式中目标命名空间的解释？

> ID：10596115
> 
> 赞同：0
> 
> 时间：2012-05-15T07:30:44.153
> 
> 标签：xsd

例如，假设我们有以下模式（列在[http://www.w3.org/TR/xmlschema-0/#NS](http://www.w3.org/TR/xmlschema-0/#NS)中）

```
<schema xmlns="http://www.w3.org/2001/XMLSchema"
        xmlns:po="http://www.example.com/PO1"
        targetNamespace="http://www.example.com/PO1"
        elementFormDefault="unqualified"
        attributeFormDefault="unqualified">

  <element name="purchaseOrder" type="po:PurchaseOrderType"/>
  <element name="comment"       type="string"/>

  <complexType name="PurchaseOrderType">
    <sequence>
      <element name="shipTo"    type="po:USAddress"/>
      <element name="billTo"    type="po:USAddress"/>
      <element ref="po:comment" minOccurs="0"/>
      <!-- etc. -->
    </sequence>
    <!-- etc. -->
  </complexType>

  <complexType name="USAddress">
    <sequence>
      <element name="name"   type="string"/>
      <element name="street" type="string"/>
      <!-- etc. -->
    </sequence>
  </complexType>

  <!-- etc. -->

</schema> 
```

你能解释一下“模式”节点中每个属性的用途吗？我一直试图绕着它转，但我不明白。如果我错了，请纠正我：

我假设`xmlns="http://www.w3.org/2001/XMLSchema"`指的是没有前缀的元素和属性。

`xmlns:po="http://www.example.com/PO1"`似乎这意味着任何以 , 为前缀的东西都`po`指的是这个 url (example.com/p01)。

我不明白这`targetNamespace`是为了什么。我也不明白合格或不合格是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:25:49.027

这是一个术语雷区，但本质上，`xmlns="http://www.w3.org/2001/XMLSchema"`是`xmlns:po="http://www.example.com/PO1"`为模式文档本身声明命名空间。请记住，XML Schema 只是一个 XML 文档，它需要像任何其他 XML 文档一样声明它使用的名称空间。

`targetNamespace`用于定义模式实例文档的命名空间，即符合您的模式的文档。此类文档将声明其命名空间为`http://www.example.com/PO1`，并带有他们选择的任何前缀，例如他们可以使用`xmlns="http://www.example.com/PO1"`或`xmlns:po="http://www.example.com/PO1"`

# php - 缓存由 PHP 动态创建的 HTTP 响应

> ID：10596116
> 
> 赞同：14
> 
> 时间：2012-05-15T07:30:45.357
> 
> 标签：php, caching, http-headers

我认为我的问题似乎很随意，但请耐心等待它变得有趣（至少对我而言 :)）。

考虑一个 PHP 页面，其目的是从文件系统读取请求的文件并将其作为响应回显。现在的问题是如何为这个页面启用缓存？需要指出的是，文件可能非常大，启用缓存是为了避免客户端一次又一次地下载相同的内容。

理想的策略是使用“If-None-Match”请求头和“ETag”响应头来实现反向代理缓存系统。尽管我知道这么多，但我不确定这是否可行，或者我应该返回什么作为响应来实施这项技术！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-15T07:40:08.060

使用 PHP 提供大量或许多辅助文件并不是它的用途。

相反，请查看用于 nginx的[X-accel](http://wiki.nginx.org/X-accel) 、用于 Lighttpd[的 X-Sendfile](http://blog.lighttpd.net/articles/2006/07/02/x-sendfile)或用于 Apache的[mod_xsendfile 。](https://tn123.org/mod_xsendfile/)

初始请求由 PHP 处理，但一旦确定下载文件，它就会设置一些标头以指示服务器应该处理文件发送，之后 PHP 进程将被释放以提供其他服务。

然后，您可以使用 Web 服务器为您配置缓存。

**静态生成的内容**

如果您的内容是从 PHP 生成的并且创建起来特别昂贵，您可以将输出写入本地文件并再次应用上述方法。

如果您无法写入本地文件或不想写入，则可以使用 HTTP 响应标头来控制缓存：

```
Expires: <absolute date in the future>
Cache-Control: public, max-age=<relative time in seconds since request> 
```

这将导致客户端缓存页面内容，直到过期或用户强制重新加载页面（例如按 F5）。

**动态生成的内容**

对于动态内容，您希望浏览器每次都 ping 您，但仅在有新内容时才发送页面内容。您可以通过设置一些其他响应标头来完成此操作：

```
ETag: <hash of the contents>
Last-Modified: <absolute date of last contents change> 
```

当浏览器再次 ping 您的脚本时，它们将分别添加以下请求标头：

```
If-None-Match: <hash of the contents that you sent last time>
If-Modified-Since: <absolute date of last contents change> 
```

主要`ETag`用于减少网络流量，因为在某些情况下，要知道内容哈希，您首先必须计算它。

`Last-Modified`如果您有本地文件缓存（文件有修改日期），这是最容易应用的。一个简单的条件使它起作用：

```
if (!file_exists('cache.txt') || 
    filemtime('cache.txt') > strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE'])) {
    // update cache file and send back contents as usual (+ cache headers)
} else {
    header('HTTP/1.0 304 Not modified');
} 
```

如果你不能做文件缓存，你仍然可以`ETag`用来判断内容是否同时发生了变化。

# java - 正则表达式删除空格

> ID：10596117
> 
> 赞同：10
> 
> 时间：2012-05-15T07:30:46.307
> 
> 标签：java, regex

如何编写正则表达式以删除 Java 中的空格？

例如

```
Input  : "         "
Output : ""
---------------------
Input  : " "
Output : "" 
```

请注意，不应删除制表符和新行。只应删除空格。

**编辑 ：**

我们如何进行检查？

例如，如何在*if*语句中检查 String 仅包含空格（任意数量）

```
 if(<statement>)
  {
              //inside statement
  } 
```

为了

```
 input = "                   "  or input = "    " 
```

控件应该放在*if*语句中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T07:32:09.187

以下将做到这一点：

```
str = str.replaceAll(" ", ""); 
```

或者：

```
str = str.replaceAll(" +", ""); 
```

在我的基准测试中，后者比前者快约 40%。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-20T11:23:33.293

```
String str = "     ";
str = str.replaceAll("\\s+",""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:56:00.460

你可以做 -

```
str = str.replace(" ", "");
str = str.replaceAll(" +", ""); 
```

如果您检查`replace`和`replaceAll`方法的定义 -

```
public String replace(CharSequence target, CharSequence replacement) {
        return Pattern.compile(target.toString(), Pattern.LITERAL).matcher(
            this).replaceAll(Matcher.quoteReplacement(replacement.toString()));
    }

public String replaceAll(String regex, String replacement) {
   return Pattern.compile(regex).matcher(this).replaceAll(replacement);
} 
```

除非你真的需要替换正则表达式，否则`replaceAll`绝对不是我们的选择。即使性能可以接受，创建的对象数量也会影响性能。

**与 没有太大**区别`replaceAll()`，只是在. 还是用方法比较好。**`replaceAll()``replace``replaceAll`**

 ****实时比较**

```
File size -> 6458400
replaceAll -> 94 millisecond
replace -> 78 millisecond 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T07:34:00.937

为什么不尝试一个简单的`/[ ]+/`？这应该是你需要的。**

# image-processing - 用于 Clojure 图像合成的 DSL

> ID：10596130
> 
> 赞同：6
> 
> 时间：2012-05-15T07:32:07.240
> 
> 标签：image-processing, clojure, dsl

我正在尝试在 Clojure 中创建一个用于图像合成的小型库/DSL。基本上，这个想法是允许库的用户组合数学函数集，以程序方式创建有趣的图像。

函数需要对双精度值进行操作，并采取将位置向量转换为颜色值的形式，例如 (x,y,z) - > (r,g,b,a)

但是，我面临一些有趣的设计决策：

*   输入可能有 1、2、3 甚至 4 个维度（x、y、z 加上时间）
*   最好提供向量数学运算（点积、加法、乘法等）
*   将函数与诸如旋转、缩放等操作组合起来是很有价值的。
*   出于性能原因，在整个过程中使用原始双精度数学非常重要（即，特别要避免创建盒装双精度）。所以一个需要返回红色、绿色和蓝色分量的函数可能需要成为三个独立的函数，分别返回原始的红色、绿色和蓝色值。

关于如何在 Clojure（1.4 beta）中合理实现这种 DSL 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:03:55.383

看看很棒的 ImageMagick 工具[http://www.imagemagick.org](http://www.imagemagick.org)可以让您了解这样的库需要什么样的操作。

也许您会发现，如果您复制默认的 IM 工具集，您将不需要下拉到矢量数学。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:19:08.120

好的，所以我最终想出了一个很好的方法。

诀窍是将函数表示为代码向量（在“代码就是数据”的意义上，例如

```
[(Math/sin (* 10 x)) 
 (Math/cos (* 12 y)) 
 (Math/cos (+ (* 5 x) (* 8 y)))] 
```

然后可以“编译”以创建 3 个使用以下方法实现 Java 接口的对象：

```
public double calc(double x, double y, double z, double t) {
    .....
} 
```

这些函数对象可以用原始值调用，以获取每个像素的红色、绿色和蓝色颜色值。结果类似于：

![在此处输入图像描述](../Images/2a178e35b5a248a3f725323c747bb56f.png)

最后，可以使用简单的 DSL 组合函数，例如放大纹理，您可以这样做：

```
(vscale 10 some-function-vector) 
```

我已经在 GitHub 上为任何感兴趣的人发布了所有代码：

[https://github.com/mikera/clisk](https://github.com/mikera/clisk)

# java - 如何在Java中以相反的顺序迭代hashmap

> ID：10596132
> 
> 赞同：23
> 
> 时间：2012-05-15T07:32:09.393
> 
> 标签：java, hashmap

我尝试了几个小时，但没有找到任何最佳方法来实现哈希图的反向迭代，这就是我拥有的哈希图。

```
 Map<Integer, List<String>> map = new HashMap<Integer, List<String>>();

             for(Integer key : map.keySet()) {
                List<String> value = map.get(key);
                List<Map<String,?>> security = new LinkedList<Map<String,?>>();  
                for(int ixy = 0; ixy < value.size()-1; ixy++){
                    security.add(createItem(value.get(ixy), value.get(ixy+1))); 
                }
                adapter.addSection(Integer.toString(key), new SimpleAdapter(getApplicationContext(), security, R.layout.list_complex, new String[] { ITEM_TITLE, ITEM_CAPTION }, new int[] { R.id.list_complex_title, R.id.list_complex_caption }));  
            } 
```

我也看过 TreeMap 的例子，

```
 Map<Integer, List<String>> sortedMap = new TreeMap<Integer, List<String>>(map); 
```

但是树形图也按升序给出，我想要的是降序。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-15T07:33:39.497

> 以相反顺序实现哈希图迭代的最佳方法

`HashMap`没有定义其元素的任何特定顺序。因此，也没有定义“反向”顺序。

对于一个`TreeMap`，您可以使用[`descendingMap()`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#descendingMap%28%29).

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-15T07:43:38.337

Hashmap 没有特定的顺序。但是你可以使用 TreeMap。

也许这个简单的例子可以帮助你：

```
Map<Integer, String> map = new TreeMap<Integer, String>();
        map.put(1, "abc1");
        map.put(2, "abc2");
        map.put(3, "abc3");

        ArrayList<Integer> keys = new ArrayList<Integer>(map.keySet());
        for(int i=keys.size()-1; i>=0;i--){
            System.out.println(map.get(keys.get(i)));
        } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-15T07:35:47.910

HashMap 不维护键之间的任何顺序。

TreeMap 按其自然顺序或按您在构建映射时传递的比较器强加的顺序对其键进行排序。因此，如果您想让 Integer 键以相反的顺序排列，请以这种方式构造 TreeMap：

```
Map<Integer, List<String>> sortedMap = 
    new TreeMap<Integer, List<String>>(Collections.reverseOrder()); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-15T08:00:44.393

你可以使用`TreeMap#descendingKeySet`方法。

```
Map<Integer, List<String>> map = new TreeMap<Integer, List<String>>();

for(Integer key : map.descendingKeySet()) {
    List<String> value = map.get(key);
    List<Map<String,?>> security = new LinkedList<Map<String,?>>();  
    for(int ixy = 0; ixy < value.size()-1; ixy++){
        security.add(createItem(value.get(ixy), value.get(ixy+1))); 
    }
    adapter.addSection(Integer.toString(key), new SimpleAdapter(getApplicationContext(), security, R.layout.list_complex, new String[] { ITEM_TITLE, ITEM_CAPTION }, new int[] { R.id.list_complex_title, R.id.list_complex_caption }));
} 
```

**参考**：

> [https://docs.oracle.com/javase/8/docs/api/java/util/TreeMap.html#descendingKeySet--](https://docs.oracle.com/javase/8/docs/api/java/util/TreeMap.html#descendingKeySet--)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-15T07:39:30.267

```
Map<Integer, List<String>> sortedMap = new TreeMap<Integer, List<String>>(Collections.reverseOrder());

Collections.reverseOrder() keeps the map sorted in descending order. 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-15T07:34:58.927

[由于以下](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)原因，您不能`HashMap`反向迭代 a ：

> 此类不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变。

您应该使用的是[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)：

> 此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。请注意，如果将键重新插入到地图中，则插入顺序不会受到影响。（如果在调用 m.containsKey(k) 将在调用之前立即返回 true 时调用 m.put(k, v)，则将键 k 重新插入到映射 m 中。）

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-05-15T07:35:51.540

hashmap 不是有序集合。改用 TreeMap，它具有用于反向迭代的 descendingKeySet。请参阅[javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)。[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)也是一个不错的选择。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-23T17:38:46.543

```
 TreeMap<Integer, String> map = new TreeMap<Integer, String>();
    map.put(1, "abc1");
    map.put(2, "abc2");
    map.put(3, "abc3");
    NavigableMap<Integer, String> nmap = map.descendingMap();
    for (NavigableMap.Entry<Integer, String> entry : nmap.entrySet()) {
        System.out.println("Key : " + entry.getKey() + " Value : " + entry.getValue());
    } 
```

NPE思想的实现。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-15T07:39:34.510

> 但是树形图也按升序排列，我想要的是降序排列。

实现一个`Comparator`将其与自然顺序相反的比较，然后正常迭代你将进行反向迭代

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-05-15T07:35:07.613

也许你需要一个[NavigableMap](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html#descendingMap%28%29)，比如 TreeMap。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-03-18T12:14:38.590

使用 insted：

```
new TreeMap<>(Collections.reverseOrder()) 
```

你会得到你想要的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-02T14:09:55.160

我发现从 Java Hashtable 获得的迭代器通过： Hashtable.values().iterator() 和 Hashtable.keys().asIterator() 默认情况下都是相反的顺序。一个奇怪的是， values().iterator 的第一个最终值为“0”，我在填充它时没有添加它。

# javascript - Javascript play() youtube vid 在 Firefox 中不起作用

> ID：10596137
> 
> 赞同：1
> 
> 时间：2012-05-15T07:32:28.880
> 
> 标签：javascript, firefox, youtube-api

我正在使用 play() 函数播放嵌入的 youtube 视频。这都是使用 youtube api。下面是我的代码。它在 chrome 和 IE 中完美运行，但在 Firefox 中无法播放。

```
 alert(typeof ytplayer); 
```

这段代码显示了 ytplayer 是什么类型的“东西”。在 chrome 和 IE 中，它会出现 object（视频嵌入 object 方法）。在 Firefox 中，它说未定义，所以那里出了点问题。

我在这里有一个测试网站：http: [//lostinawesome.blogspot.com.au/2012/04/test-post.html](http://lostinawesome.blogspot.com.au/2012/04/test-post.html)

单击播放按钮或图像播放 youtube 音频。在 Firefox 中，它可能不适合你。

有什么想法可以让它在 FF 中播放吗？

## 我的代码：

javascript:

```
 function onYouTubePlayerReady(playerId) {
    var player = document.getElementById(&quot;ytplayer&quot;);
    player.addEventListener(&quot;onStateChange&quot;, &quot;onytplayerStateChange&quot;);
}

function onytplayerStateChange(newState) {
    alert(&quot;New state &quot; + newState); 
}

   function play() {

   alert(typeof ytplayer);

   if (ytplayer) {
ytplayer.playVideo();
  }
} 
```

html:

```
 <object data="http://www.youtube.com/v/u8C-ZTQJIkU?enablejsapi=1&amp;playerapiid=ytplayer&amp;version=3" height="400" id="ytplayer" type="application/x-shockwave-flash" width="550"><param name="allowScriptAccess" value="always">

    <param name="movie" value="http://www.youtube.com/v/u8C-ZTQJIkU?enablejsapi=1&amp;playerapiid=ytplayer&amp;version=3" >

    </param>
    <param name="allowScriptAccess" value="always">

    </param>
    </object>

    <a href="javascript:void(0);" onclick="play();">Play</a> 
```

## 工作代码：

我只需要更改为 var ytplayer = document.getElementById("ytplayer"); 因为 ytplayer 没有在任何地方声明为变量，但由于某种原因，它无论如何都可以在 chrome 和 IE 中使用。

```
 function play() {
    var ytplayer = document.getElementById(&quot;ytplayer&quot;);
    alert(typeof ytplayer);

      if (ytplayer) {
        ytplayer.playVideo();
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:39:44.167

如您所见，您需要显式选择元素而不是仅使用其 ID，因为它不适用于所有浏览器。

改成

```
var ytplayer = document.getElementById('ytplayer');
ytplayer.playVideo(); 
```

# c# - 为什么 GC.AddMemoryPressure 会死锁/挂起？

> ID：10596145
> 
> 赞同：4
> 
> 时间：2012-05-15T07:33:11.947
> 
> 标签：c#, .net, garbage-collection

已解决：原来受影响的机器安装了 .NET 4.5 beta。

* * *

我有一个使用 .NET4 的 C# 应用程序，它在调用中无限期地死锁/挂起

```
GC.AddMemoryPressure(12000000) 
```

由于它是一个生产中的应用程序，我无法真正共享任何代码 - 但是我想获得一些关于可能导致 GC.AddMemoryPressure 挂起的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:38:51.603

来自文档的提示：

> 您必须确保完全消除您添加的压力。如果不这样做，可能会对长时间运行的应用程序中的系统性能产生不利影响。

这意味着您必须**非常**小心地平衡这两个调用：

`AddMemoryPresure`和`RemoveMemoryPreasure`

顺便说一句，建议在分配大量*非托管*资源时使用它，以这种方式`GC`表明它还必须计算内存量。

在绝大多数情况下，简单`Dispose()`、`Finalize()`正确的管理就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:16:13.617

感谢您的输入。

事实证明，受影响的机器安装了 .NET 4.5 beta。

似乎没有陷入僵局，因为一个核心已经完全饱和。对 AddMemoryPressure 的调用似乎最终出现在从未返回的函数 clr!CNameSpace::GcScanRoots 中。

卸载 4.5 beta 并安装 .NET 4 似乎已经解决了这个问题。

如果这确实是问题，那么我当然希望 MS 在发布之前修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:50:20.490

我不会搞乱手动GC。确保您的资源在使用后被处理并完成。GC 手动可以搞砸系统。只要在程序中删除对象，.NET 就可以很好地管理 GC。

# android - Android获取在浏览器中打开某些网站到我的应用程序的请求

> ID：10596146
> 
> 赞同：0
> 
> 时间：2012-05-15T07:33:14.567
> 
> 标签：android, url, redirect, browser, request

在我的应用程序中输入或输入 URL 时，我可以获得打开某个网站的 URL 或请求吗？我正在实施家长控制。所以我只想从我的应用程序中阻止一些网站。那么当用户在任何浏览器中点击任何 URL 时，我可以在我的应用程序中获取请求吗？有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:41:20.127

你有没有尝试添加这个：

```
webview.setWebViewClient(new WebViewClient(){
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub
            return true;
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:42:04.943

如果您将网站打开到您的 android 应用程序的[WebView](http://developer.android.com/reference/android/webkit/WebView.html "网络视图")中，您可以使用[shouldOverrideUrlLoading](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideKeyEvent%28android.webkit.WebView,%20android.view.KeyEvent%29 "shouldOverrideUrlLoading")回调阻止它：

```
mView.setWebViewClient(new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
      (put here your conditions to block or let load an url)
    }
} 
```

# html - 谷歌浏览器：一个可笑的浮动错误？

> ID：10596151
> 
> 赞同：3
> 
> 时间：2012-05-15T07:33:47.913
> 
> 标签：html, css, google-chrome, layout

出于某种原因，如果我使用 line-height 属性并将其设置为小一点，例如 13px 左右，则正文总是在第一行的底部 div 上。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <style>
            div.main{
                background-color:grey;
                width:500px;
                height:100px;
                text-align:justify;
                line-height:13px;   /* pfff */
            }
            div.pusher{
                float:right;
                height:40px;
            }
            div.bottom{
                float:right;
                clear:right;
                height:60px;
                width:100px;
                background-color:green;
                font-size:20px;
            }
        </style>
    </head>
    <body>
        <div class="main">
            <div class="pusher"></div>
            <div class="bottom">
                    textaaaaa aaaa aaaa
            </div>
            We have yet, many other health products, as they are all beneficiary in some way, aroma therapy products can help you to get more relaxed,
                        relieve the stress and pain, they can help with a better sleep and even protect from mosquitos.
                        Our beverages are also completely natural, and will keep you fresh and in shape!
                        Everyone knows of the coffee benefits, the juices also have vitamins and are highly beneficial.
                        In the beverage section you can also find.
        </div>
    </body>
</html> 
```

有任何想法吗？

![在此处输入图像描述](../Images/51b9cb31cebb34684f24cd48d79eb01a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:42:20.553

您是否尝试在绿色 div 周围创建文本环绕效果？

您应该将正文向左浮动并将它们并排放置，这样看起来会更好，然后在它们下方添加一个清晰的两个潜水。

也检查一下[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

编辑：

好的，您松开推动器并将绿色 div 移到 main 之外并将其浮动并使用负边距将其放置到位。并在 main 下添加一个明确的两者潜水。

或将主 div 设置为相对位置，并以绝对定位移动绿色 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:08:53.370

我设法找到了这个错误的答案。

推杆的高度需要是线高的倍数。例如。39像素；

在这种情况下，它将按预期浮动文本。然后我们可以使背景透明并放置一点填充以使其更好地排列。

# windows-phone-7 - 使用 sql ce for windows phone 7 的图像数据绑定

> ID：10596153
> 
> 赞同：0
> 
> 时间：2012-05-15T07:34:02.420
> 
> 标签：windows-phone-7, sql-server-ce

我一直在使用 sql ce 将一些数据带到我的应用程序中。现在我需要添加一些图像让它看起来很漂亮。我只想知道

1.  必须完成一些图像到字节的转换，
2.  检索图像字节码并转换回图像。

我在第二部分卡住了，我应该如何继续？

参考需要任何链接或示例。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:55:18.027

这是我过去使用的一些想法。

数据库中的图像列：

```
[Column]
public byte[] MyImage
{
  get { return _myImage; }
  set
  {
    if (_myImage != value)
    {
      _myImage = value;
      NotifyPropertyChanging("MyImage");
      NotifyPropertyChanged("MyImage");
    }
  }
} 
```

保存图片：

```
public void AddNewImage(Stream image, string url)
{
  byte[] byteArray = GetImageBytes(image);

  var item = new MyDatabaseItem { Count = 1, ItemImageUrl = url, MyImage = byteArray };
  MyDatabaseItemModel.Add(item);
  MyDatabaseDB.MyDatabaseItems.InsertOnSubmit(item);
  MyDatabaseDB.SubmitChanges();
} 
```

获取图像：

```
private byte[] GetImageBytes(Stream stream)
{
  using (var ms = new MemoryStream())
  {
    var writeableBitmap = PictureDecoder.DecodeJpeg(stream, 200, 200);
    writeableBitmap .SaveJpeg(ms, 200, 200, 0, 30);
    return ms.ToArray();
  }
} 
```

使用值转换器：

```
public class ImageConverter: IValueConverter
{
  public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
  {
    if (value is byte[])
    {
      var memoryStream = new MemoryStream(value as byte[]);
      varwriteBitmap = PictureDecoder.DecodeJpeg(memoryStream, 200, 200);
      return writeBitmap;
    }
    else
      return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      throw new NotImplementedException();
    }
} 
```

最后在 XAML 中绑定它：

```
<Image Source="{Binding MyImage, Converter={StaticResource ImageConverter}}" Stretch="UniformToFill"/> 
```

# c# - 在另一个应用程序域中使用 TraceListener

> ID：10596154
> 
> 赞同：1
> 
> 时间：2012-05-15T07:34:02.870
> 
> 标签：c#, .net

为什么 TraceListener 派生自 MarshalByRefObject。遗产没有任何好处。

在另一个域中通过远程处理后，我无法使用 TraceListener，因为方法参数中的 TraceEventCache 没有 Serializable 属性。

所以我不能用这样的签名从 TraceListener 调用方法：

public override void TraceEvent(TraceEventCache eventCache, string source, TraceEventType eventType, int id, string message)

# ios - OpenCV，IOS，模板匹配，匹配好的地方

> ID：10596160
> 
> 赞同：0
> 
> 时间：2012-05-15T07:34:34.807
> 
> 标签：ios, objective-c, opencv

我尝试创建这样的应用程序：[http ://www.youtube.com/watch?v=V9LY8JqKLqE&feature=my_liked_videos&list=LLIeJ9s3lwD-lrqYMU409iAQ](http://www.youtube.com/watch?v=V9LY8JqKLqE&feature=my_liked_videos&list=LLIeJ9s3lwD-lrqYMU409iAQ)

但遗憾的是我不知道如何标记找到的地方

我正在重新考虑本教程：[http ://aptogo.co.uk/2011/09/face-tracking/](http://aptogo.co.uk/2011/09/face-tracking/)

我的源代码：我将模板图像实现到 DemoVideoCaptureViewController.mm 文件中

```
- (void)viewDidLoad
{
    [super viewDidLoad];  

    UIImage *testImage = [UIImage imageNamed:@"tt2.jpg"];  
    tempMat = [testImage CVMat];  

    std::vector<cv::KeyPoint> keypoints;  
    cv::SurfFeatureDetector surf (250);  
    surf.detect(tempMat, keypoints);  

    cv::SurfDescriptorExtractor surfDesc;  
    surfDesc.compute(tempMat, keypoints, description1);  
} 
```

我试图在这里找到对象：

```
- (void)processFrame:(cv::Mat &)mat videoRect:(CGRect)rect videoOrientation:(AVCaptureVideoOrientation)videOrientation
{

    cv::FlannBasedMatcher matcher;  
    std::vector< cv::vector<cv::DMatch> > matches;  
    std::vector<cv::DMatch>  good_matches;  

    cv::SurfFeatureDetector surf2 (250);  
    std::vector<cv::KeyPoint> kp_image;  

    surf2.detect(mat, kp_image);  
    cv::SurfDescriptorExtractor surfDesc2;  
    surfDesc2.compute(mat, kp_image, des_image);  

    if ((des_image.rows > 0) && (description1.rows  > 0)) {  

        matcher.knnMatch(description1, des_image, matches, 2);  

        for (int i = 0; i < MIN(des_image.rows-1, (int) matches.size()); i++) {

            if ((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size() <= 2 && (int) matches[i].size() > 0)) {
                good_matches.push_back(matches[i][0]);
            }

        }

        [CATransaction begin];  
        [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];  

        **//remove old layer**  

        for (CALayer *layer in self.view.layer.sublayers) {  
            NSString *layerName = [layer name];  
            if ([layerName isEqualToString:@"Layer"])  
                [layer setHidden:YES];  
        }  

        [CATransaction commit];  

        if (good_matches.size() >= 4) {  
            NSLog(@"Finding");  
        }  
    }  
} 
```

但我不知道如何在 camrea 视图上放置一个图层

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T19:29:09.303

您发布的视频中的应用程序可以按照“Mastering OpenCV with Practical Computer Vision Projects”一书的第 3 章（无标记增强现实）创建。

你仍然需要做一些步骤，比如计算单应性。而且您不需要使用 CATransaction 或任何其他 iOS 类。CvVideoCamera 和线就够了。

# objective-c - 覆盖 SystemVersion.plist (Objective-c)

> ID：10596170
> 
> 赞同：1
> 
> 时间：2012-05-15T07:35:18.240
> 
> 标签：objective-c, macos, security, authorization, overwrite

我正在编写一个应用程序，它可以在短时间内（几秒钟）更改您的 Mac OS X 版本，以启动一个旧版本或新版本的应用程序。

它从 SystemVersion.plist (/System/Library/CoreServices/SystemVersion.plist) 中读取版本，然后设置新的所需版本。保存（覆盖）文件并启动应用程序，然后将版本更改回原始版本。

这是代码的第一部分（读取版本并尝试覆盖）

```
// Get SystemVersion.plist as Dictionary 
NSBundle *bundle = [NSBundle bundleWithPath:@"/System/Library/CoreServices"];
NSString *SystemVersionString = [bundle pathForResource:@"SystemVersion" ofType:@"plist"];
NSMutableDictionary *SystemVersionDir = [NSDictionary dictionaryWithContentsOfFile:SystemVersionString];

// Get current version (Systemversion, ProductUserVisibleVersion)
NSString *SystemVersion = [SystemVersionDir objectForKey:@"ProductVersion"];

// Get desired version from text field
NSString *DesiredVersion = [_Text_version stringValue];

[_Text_Info setStringValue:SystemVersion];

// Set new version
[SystemVersionDir setObject:DesiredVersion forKey:@"ProductVersion"];

// Write (save) plist
if([SystemVersionDir writeToFile:@"/System/Library/CoreServices/SystemVersion.plist" atomically:YES])
{
    NSLog(@"YES");
}
else 
{
    NSLog(@"NO");
} 
```

问题出在`'writeToFile'`. 如果我写到我的桌面或一切正常，它会创建一个新文件。此外，如果我将文件复制到我的桌面并在那里覆盖它，它会很好。但它需要覆盖`/System/Library/CoreServices/`.

我想我需要授权什么的。但是，我已经对此进行了研究，但似乎工作量很大，因此我的头脑一团糟。

没有更简单的方法可以做到这一点，也许是一个有帮助的类？

注意：Mac OS X 10.8 Mountain Lion 开发者预览版 3 (Xcode 4.3.1)

# jakarta-ee - 我可以创建 Web 服务来调用 Servlet 吗？

> ID：10596172
> 
> 赞同：0
> 
> 时间：2012-05-15T07:35:39.127
> 
> 标签：jakarta-ee

我是 Web 服务的新手。我需要为由 Servlet 和 JSP 组成的现有应用程序创建一个 Web 服务接口。

我无法继续说明如何为 Servlet 创建 Web 服务。

任何指针、电子书和示例代码都将受到高度赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:03:07.303

看看[Jersey](http://jersey.java.net/)，它是 Sun 用于构建 RESTful Web 服务的 JAX-RS 实现

[这里](http://www.mkyong.com/webservices/jax-rs/jersey-hello-world-example/)有一个简单的源代码示例，完成时间不会超过 10-15 分钟

# php - PHP 放弃 SQlite？

> ID：10596176
> 
> 赞同：10
> 
> 时间：2012-05-15T07:36:00.263
> 
> 标签：php, sqlite, pecl

> 自 PHP 5.0 起默认启用 SQLite 扩展。从 PHP 5.4 开始，SQLite 扩展只能通过 PECL 获得。

好的，我在 PHP 编程方面相对较新，我想知道这个来自 PHP 官方网站的引用信息是什么意思？

我编写了一些运行 SQlite 而不是 MySQL 数据库的应用程序，我非常担心它是否会在未来的 PHP 版本中被弃用。

“从现在开始，仅通过 PECL”是什么意思？我了解 SQlite*将可用*，但这并不意味着：

1.  **PHP 团队对 PHP/SQlite 集成的未来发展至少会较少关注**

2.  **我们可以期待网络托管服务提供商会错过安装 SQlite 扩展，因为它不再默认安装？**

有人对当 PHP“抛弃”PECL 扩展时会发生什么有经验吗？提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-16T14:26:32.313

我不是 100% 确定，但在我看来 PHP 正在放弃对5.4 中旧[SQLite扩展的支持，转而支持（更新和更好的）](http://www.php.net/manual/en/book.sqlite.php) [SQLite3](http://www.php.net/manual/en/book.sqlite3.php)扩展。

> 自 PHP 5.3.0 起默认启用 SQLite3 扩展。

SQLite 的一个主要优点是它的设置非常简单——将它作为 PHP 核心的一部分对于保持这种方式很重要。我看不出这种变化。

# c# - 如何将 C# 列表插入 Div？

> ID：10596177
> 
> 赞同：0
> 
> 时间：2012-05-15T07:36:01.000
> 
> 标签：c#, asp.net, list, webforms

我有一个 C# 列表：

```
List<string> Listtags =  GetListTag.GetTagList().ToList(); 
```

而且，我想把它放到一个 Div 中：

```
<div id="tags">
    <ul>
        <li><This should be populated with my list></li>
         //This list can have any number of items depending on how big my list tags is
    </ul>
</div> 
```

有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T07:44:27.463

你也可以使用中继器

```
<ul>
    <asp:Repeater runat="server" id="R">
        <ItemTemplate>
            <li><%# Container.DataItem %></li>
        </ItemTemplate>
    </asp:Repeater>
</ul> 
```

并在运行时

```
List<string> ListTags =  GetListTag.GetTagList().ToList();
R.DataSource = ListTags;
R.DataBind(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T07:40:10.480

使用 [asp:bulletedList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.bulletedlist.aspx)，您的列表会容易得多。

```
<div id="tags">
    <asp:BulletedList id="blTabs" 
      BulletStyle="Disc"
      DisplayMode="LinkButton" 
      runat="server">
    </asp:BulletedList>
</div> 
```

代码背后：

```
 ListItem li = new ListItem();
    li.Value = "html text";  //html goes here i.e.  xtab1.html
    li.Text = "New Text";  //text name goes i.e. here tab1
    blTabs.Items.Add(li); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T07:40:48.517

如果您使用的是 MVC3，则可以执行以下操作：

```
<div id="tags">
  <ul>
  @foreach(var item in Model.Listtags)
  {
    <li>@item.YourPropertyName</li>
  }
  </ul>
</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T07:47:41.907

如果您使用的是 ASP.NET，则可以使用[`BulletedList`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.bulletedlist.aspx)网络服务器控件：

```
<asp:BulletedList ID="BulletedList1" runat="server"
    BulletStyle="Circle" 
    DisplayMode="Text">
</asp:BulletedList> 
```

在代码隐藏中：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        List<string> Listtags = GetListTag.GetTagList().ToList();
        Listtags.ForEach(t => BulletedList1.Items.Add(t));
    }
} 
```

**编辑**：*“我想添加这样的内容::: Listtags.ForEach(t => BulletedList1.Items.Add(t),"$tag$ "); weight 是我代码中的一个变量”*

所以我假设您想要添加超链接并在项目上应用不同的 css 类。

```
<asp:BulletedList ID="BulletedList1" runat="server"
    CssClass="TagList"
    DisplayMode="HyperLink">
</asp:BulletedList> 
```

例如CSS：

```
<style>
.TagList a {text-decoration:none}
.TagList a:link {text-decoration:none}
.TagList a:visited {text-decoration: none; color: blue}
.TagList a:hover {text-decoration: underline; color: red}
</style> 
```

以及如何动态添加链接（ListItem 的值是 URL）：

```
Listtags.ForEach(t => 
     BulletedList1.Items.Add(new ListItem(t, browseUrl + "?tag=$urlencodetag$"))
); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T07:39:06.100

在 Asp.Net 中

```
<ul id = "myul" runat = "server">
</ul> 
```

在后面的代码中（我想在页面加载或按钮单击中）

```
Listtags.ForEach(x => new ListItem(){Text = x }); 
```

# c++ - 如果 DEP 处于活动状态，迁移的应用程序崩溃

> ID：10596183
> 
> 赞同：0
> 
> 时间：2012-05-15T07:36:39.737
> 
> 标签：c++, mfc, visual-c++-6, visual-c++-2008, dep

我已将我们的 MFC 应用程序从 vc6 移植到 vc9 (VS2008)。一切都很好，但如果 DEP 处于活动状态，程序会崩溃（下面的堆栈跟踪）。我已经尝试过使用 NX-Flag，但没有任何改变。我还尝试使用 Parasoft Insure++ 构建应用程序，但没有显示内存损坏或任何其他问题。

提前感谢您的任何建议。

环境描述如下：

*   DEP 选项是 NoExecute=OptOut，程序在排除列表中（如果没有，它不会崩溃，但还有其他问题）。
*   MFC MainFrame 代码在 dll 中，而不是在 exe 中
*   如果 DEP 处于活动状态，则有一些旧的第 3 方 ActiveX 组件不起作用

堆栈跟踪：

```
>   mfc90d.dll!CThemeHelper::IsAppThemed()  Zeile 82    C++
    mfc90d.dll!CControlBar::OnCreate(tagCREATESTRUCTA * lpcs=0x00dde2b4)  Zeile 576 + 0x5 Bytes C++
    mfc90d.dll!CWnd::OnWndMsg(unsigned int message=1, unsigned int wParam=0, long lParam=14541492, long * pResult=0x00dde05c)  Zeile 2014 + 0xd Bytes   C++
    mfc90d.dll!CWnd::WindowProc(unsigned int message=1, unsigned int wParam=0, long lParam=14541492)  Zeile 1755 + 0x20 Bytes   C++
    mfc90d.dll!CControlBar::WindowProc(unsigned int nMsg=1, unsigned int wParam=0, long lParam=14541492)  Zeile 506 + 0x14 Bytes    C++
    mfc90d.dll!AfxCallWndProc(CWnd * pWnd=0x01ba3d80, HWND__ * hWnd=0x000b1110, unsigned int nMsg=1, unsigned int wParam=0, long lParam=14541492)  Zeile 240 + 0x1c Bytes   C++
    mfc90d.dll!AfxWndProc(HWND__ * hWnd=0x000b1110, unsigned int nMsg=1, unsigned int wParam=0, long lParam=14541492)  Zeile 403    C++
    bedamain.dll!AfxWndProcDllStatic(HWND__ * hWnd=0x000b1110, unsigned int nMsg=1, unsigned int wParam=0, long lParam=14541492)  Zeile 54 + 0x15 Bytes C++
        ...
    user32.dll!7e37e34f()   
    mfc90d.dll!CWnd::WindowProc(unsigned int message=1, unsigned int wParam=643120, long lParam=463138)  Zeile 1755 + 0x20 Bytes    C++
    mfc90d.dll!AfxGetModuleThreadState()  Zeile 498 + 0x11 Bytes    C++
    kernel32.dll!7c80a73d()     
    mfc90d.dll!AfxDeactivateActCtx(unsigned long dwFlags=0, unsigned long ulCookie=495452227)  Zeile 260 + 0x17 Bytes   C++
    mfc90d.dll!AFX_MAINTAIN_STATE2::~AFX_MAINTAIN_STATE2()  Zeile 63 + 0xe Bytes    C++
    bedamain.dll!AfxWndProcDllStatic(HWND__ * hWnd=0x00071122, unsigned int nMsg=5, unsigned int wParam=0, long lParam=43648228)  Zeile 54 + 0x27 Bytes C++
        ...
    user32.dll!7e37c17e()   
    mfc90d.dll!CWnd::DefWindowProcA(unsigned int nMsg=71, unsigned int wParam=48, long lParam=643672)  Zeile 1043 + 0x20 Bytes  C++
    mfc90d.dll!CWnd::WindowProc(unsigned int message=1, unsigned int wParam=14542916, long lParam=2024004508)  Zeile 1756 + 0x1c Bytes  C++
        ...
    user32.dll!7e37e4dc()   
    mfc90d.dll!AfxCtxCreateWindowExA(unsigned long dwExStyle=512, const char * lpClassName=0x00067b58, const char * lpWindowName=0x78a44e50, unsigned long dwStyle=13565952, int X=-2147483648, int Y=-2147483648, int nWidth=-2147483648, int nHeight=-2147483648, HWND__ * hWndParent=0x00000000, HMENU__ * hMenu=0x028d090d, HINSTANCE__ * hInstance=0x10000000, void * lpParam=0x00ddf644)  Zeile 438 + 0xa3 Bytes  C++
    mfc90d.dll!CWnd::CreateEx(unsigned long dwExStyle=0, const char * lpszClassName=0x00067b58, const char * lpszWindowName=0x78a44e50, unsigned long dwStyle=13598720, int x=-2147483648, int y=-2147483648, int nWidth=-2147483648, int nHeight=-2147483648, HWND__ * hWndParent=0x00000000, HMENU__ * nIDorHMenu=0x028d090d, void * lpParam=0x00ddf644)  Zeile 708 + 0x35 Bytes  C++
    mfc90d.dll!CFrameWnd::Create(const char * lpszClassName=0x00067b58, const char * lpszWindowName=0x78a44e50, unsigned long dwStyle=13598720, const tagRECT & rect={...}, CWnd * pParentWnd=0x00000000, const char * lpszMenuName=0x000003ec, unsigned long dwExStyle=0, CCreateContext * pContext=0x00ddf644)  Zeile 608 + 0x54 Bytes    C++
    mfc90d.dll!CFrameWnd::LoadFrame(unsigned int nIDResource=1004, unsigned long dwDefaultStyle=13598720, CWnd * pParentWnd=0x00000000, CCreateContext * pContext=0x00ddf644)  Zeile 740 + 0x35 Bytes   C++
    mfc90d.dll!CDocTemplate::CreateNewFrame(CDocument * pDoc=0x01ba39c8, CFrameWnd * pOther=0x00000000)  Zeile 277 + 0x22 Bytes C++
    mfc90d.dll!CSingleDocTemplate::OpenDocumentFile(const char * lpszPathName=0x00000000, int bMakeVisible=1)  Zeile 125 + 0x13 Bytes   C++
    mfc90d.dll!CDocManager::OnFileNew()  Zeile 848  C++
    mfc90d.dll!CWinApp::OnFileNew()  Zeile 22   C++
    mfc90d.dll!_AfxDispatchCmdMsg(CCmdTarget * pTarget=0x10111a48, unsigned int nID=57600, int nCode=0, void (void)* pfn=0x100a5a18, void * pExtra=0x00000000, unsigned int nSig=57, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Zeile 82    C++
    mfc90d.dll!CCmdTarget::OnCmdMsg(unsigned int nID=57600, int nCode=0, void * pExtra=0x00000000, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Zeile 381 + 0x27 Bytes    C++
    mfc90d.dll!CWinApp::ProcessShellCommand(CCommandLineInfo & rCmdInfo={...})  Zeile 24 + 0x20 Bytes   C++
    bedamain.dll!CBeDaMainApp::InitInstance()  Zeile 261 + 0xc Bytes    C++
    bedamain.dll!InternalDllMain(HINSTANCE__ * hInstance=0x10000000, unsigned long dwReason=1, void * __formal=0x00ddfd30)  Zeile 100 + 0x13 Bytes  C++
    bedamain.dll!DllMain(HINSTANCE__ * hInstance=0x10000000, unsigned long dwReason=1, void * lpReserved=0x00ddfd30)  Zeile 272 C++
    bedamain.dll!__DllMainCRTStartup(void * hDllHandle=0x10000000, unsigned long dwReason=1, void * lpreserved=0x00ddfd30)  Zeile 546 + 0x11 Bytes  C
    bedamain.dll!_DllMainCRTStartup(void * hDllHandle=0x10000000, unsigned long dwReason=1, void * lpreserved=0x00ddfd30)  Zeile 510 + 0x11 Bytes   C
        ...
    ntdll.dll!7c928b7b() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:31:54.213

看起来好像您的 ActiveX 组件正在堆栈上执行代码（因此 DEP 失败）。

# jquery - 回发后使用 jQuery GridViewRow Total 计算不起作用

> ID：10596190
> 
> 赞同：0
> 
> 时间：2012-05-15T07:36:59.760
> 
> 标签：jquery, asp.net, gridview

对于正常的 GridView Row Total 计算，此脚本运行良好，但是当我从 GridView 页脚行添加新行时，总数不起作用。这意味着回发后此脚本不起作用。我该如何解决这个问题？

# ASP.NET GridView 代码

```
 <asp:UpdatePanel ID="UpdatePanel4" runat="server">
        <ContentTemplate>
            <asp:GridView ID="grdItems" runat="server" AutoGenerateColumns="False" CssClass="GridViewStyle"
                GridLines="None" ShowFooter="True" EmptyDataText="There is no data to show."
                Width="100%" OnRowCommand="grdItems_RowCommand" OnRowDataBound="grdItems_RowDataBound">
                <RowStyle CssClass="RowStyle" />
                <PagerStyle CssClass="PagerStyle" />
                <HeaderStyle CssClass="HeaderStyle" />
                <EditRowStyle CssClass="EditRowStyle" />
                <AlternatingRowStyle CssClass="AltRowStyle" />
                <FooterStyle CssClass="FooterStyle" />
                <Columns>
                    <asp:TemplateField HeaderText="ID" HeaderStyle-Width="10px">
                        <ItemTemplate>
                            <asp:Label ID="lblShowID" runat="server" Text='<%#Container.DataItemIndex+1 %>' />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Item">
                        <ItemTemplate>
                            <asp:TextBox ID="txtItem" runat="server" TextMode="MultiLine" Text='<%# Bind("Item") %>'
                                Width="180px" CssClass="text-long" Rows="2" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtFItem" runat="server" TextMode="MultiLine" Width="180px" Rows="2" />
                            <asp:RequiredFieldValidator ID="txtFItem_rfv" runat="server" ControlToValidate="txtFItem"
                                ErrorMessage="Please enter Item Name!" ValidationGroup="Add" Display="None" />
                            <asp:ValidatorCalloutExtender ID="txtFItem_vce" runat="server" TargetControlID="txtFItem_rfv"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Qty">
                        <ItemTemplate>
                            <asp:TextBox ID="txtCalcQuantity" runat="server" Text='<%# Bind("Quantity") %>' Width="30px" />
                            <asp:RegularExpressionValidator ID="txtCalcQuantity_rev" runat="server" ControlToValidate="txtCalcQuantity"
                                ValidationGroup="Remove" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="[0-9]*" />
                            <asp:ValidatorCalloutExtender ID="txtCalcQuantity_vce" runat="server" TargetControlID="txtCalcQuantity_rev" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtCalcQuantity" runat="server" Width="30px" />
                            <asp:RequiredFieldValidator ID="txtCalcQuantity_rfv" runat="server" ControlToValidate="txtCalcQuantity"
                                ErrorMessage="Please enter Quantity!" ValidationGroup="Add" Display="None" />
                            <asp:ValidatorCalloutExtender ID="txtCalcQuantity_vce1" runat="server" TargetControlID="txtCalcQuantity_rfv"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                            <asp:RegularExpressionValidator ID="txtCalcQuantity_rev" runat="server" ControlToValidate="txtCalcQuantity"
                                ValidationGroup="Add" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="[0-9]*" />
                            <asp:ValidatorCalloutExtender ID="txtCalcQuantity_vce2" runat="server" TargetControlID="txtCalcQuantity_rev"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="UOM">
                        <ItemTemplate>
                            <asp:TextBox ID="txtUnit" runat="server" Text='<%# Bind("Unit") %>' Width="50px" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtUnit" runat="server" Width="50px" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Cur">
                        <ItemTemplate>
                            <asp:Label ID="lblCurrency" runat="server" Width="25px" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:Label ID="lblCurrency" runat="server" Width="25px" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Unit Price (Budget)">
                        <ItemTemplate>
                            <asp:TextBox ID="txtCalcUnitPrice" runat="server" Text='<%# Bind("UnitPrice", "{0:N}") %>'
                                Width="90px" />
                            <asp:RegularExpressionValidator ID="txtCalcUnitPrice_rev" runat="server" ControlToValidate="txtCalcUnitPrice"
                                ValidationGroup="Remove" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="^\-?\(?\$?\s*\-?\s*\(?(((\d{1,3}((\,\d{3})*|\d*))?(\.\d{1,4})?)|((\d{1,3}((\,\d{3})*|\d*))(\.\d{0,4})?))\)?$" />
                            <asp:ValidatorCalloutExtender ID="txtCalcUnitPrice_vce" runat="server" TargetControlID="txtCalcUnitPrice_rev" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtCalcUnitPrice" runat="server" Width="90px" />
                            <asp:RequiredFieldValidator ID="txtCalcUnitPrice_rfv" runat="server" ControlToValidate="txtCalcUnitPrice"
                                ErrorMessage="Please enter Quantity!" ValidationGroup="Add" Display="None" />
                            <asp:ValidatorCalloutExtender ID="txtCalcUnitPrice_vce1" runat="server" TargetControlID="txtCalcUnitPrice_rfv"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                            <asp:RegularExpressionValidator ID="txtCalcUnitPrice_rev" runat="server" ControlToValidate="txtCalcUnitPrice"
                                ValidationGroup="Add" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="^\-?\(?\$?\s*\-?\s*\(?(((\d{1,3}((\,\d{3})*|\d*))?(\.\d{1,4})?)|((\d{1,3}((\,\d{3})*|\d*))(\.\d{0,4})?))\)?$" />
                            <asp:ValidatorCalloutExtender ID="txtCalcUnitPrice_vce2" runat="server" TargetControlID="txtCalcUnitPrice_rev"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Amount (Budget)">
                        <ItemTemplate>
                            <asp:Label ID="lblAmount" runat="server" Text='<%# Bind("Amount", "{0:N}") %>' Width="95px" />
                            <asp:HiddenField ID="hfAmount" runat="server" Value='<%# Eval("Amount").ToString()%>' />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:Label ID="lblAmount" runat="server" Width="95px" />
                            <asp:HiddenField ID="hfAmount" runat="server" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <HeaderTemplate>
                            <span class="red">#</span>Unit Price (Actual)</HeaderTemplate>
                        <ItemTemplate>
                            <asp:TextBox ID="txtCalcActUnitPrice" runat="server" Text='<%# Bind("ActUnitPrice", "{0:N}") %>'
                                Width="90px" />
                            <asp:RegularExpressionValidator ID="txtCalcActUnitPrice_rev" runat="server" ControlToValidate="txtCalcActUnitPrice"
                                ValidationGroup="Purchaser" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="^\-?\(?\$?\s*\-?\s*\(?(((\d{1,3}((\,\d{3})*|\d*))?(\.\d{1,4})?)|((\d{1,3}((\,\d{3})*|\d*))(\.\d{0,4})?))\)?$" />
                            <asp:ValidatorCalloutExtender ID="txtCalcActUnitPrice_vce" runat="server" TargetControlID="txtCalcActUnitPrice_rev"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtCalcActUnitPrice" runat="server" Width="90px" />
                            <asp:RegularExpressionValidator ID="txtCalcActUnitPrice_rev" runat="server" ControlToValidate="txtCalcActUnitPrice"
                                ValidationGroup="Remove" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="^\-?\(?\$?\s*\-?\s*\(?(((\d{1,3}((\,\d{3})*|\d*))?(\.\d{1,4})?)|((\d{1,3}((\,\d{3})*|\d*))(\.\d{0,4})?))\)?$" />
                            <asp:ValidatorCalloutExtender ID="txtCalcActUnitPrice_vce" runat="server" TargetControlID="txtCalcActUnitPrice_rev"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <HeaderTemplate>
                            <span class="red">#</span>Amount (Actual)</HeaderTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblActAmount" runat="server" Text='<%# Eval("ActAmount").ToString()%>'
                                Width="95px" />
                            <asp:HiddenField ID="hfActAmount" runat="server" Value='<%# Eval("ActAmount").ToString()%>' />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:Label ID="lblActAmount" runat="server" Width="95px" />
                            <asp:HiddenField ID="hfActAmount" runat="server" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <HeaderTemplate>
                            <span class="red">#</span>Type</HeaderTemplate>
                        <ItemTemplate>
                            <asp:DropDownList ID="ddlType" runat="server" CssClass="text-small" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:DropDownList ID="ddlType" runat="server" CssClass="text-small" />
                        </FooterTemplate>
                    </asp:TemplateField>                        
                    <asp:TemplateField>
                        <HeaderTemplate>
                            <span class="red">#</span>DO No.</HeaderTemplate>
                        <ItemTemplate>
                            <asp:TextBox ID="txtDO" runat="server" Width="90px" Text='<%# Bind("DONo") %>' />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtFDO" runat="server" Width="90px" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <HeaderTemplate>
                            <span class="red">#</span>Date of DO</HeaderTemplate>
                        <ItemTemplate>
                            <asp:TextBox ID="txtDODate" runat="server" Width="90px" Text='<%# Bind("DODate", "{0:dd-MMM-yyyy}") %>' />
                            <asp:CalendarExtender ID="txtDODate_ce" runat="server" TargetControlID="txtDODate"
                                PopupPosition="Right" Animated="true" Format="dd-MMM-yyyy" />
                            <asp:MaskedEditExtender ID="txtDODate_me" runat="server" ClearMaskOnLostFocus="False"
                                CultureName="en-GB" Mask="99-LLL-9999" TargetControlID="txtDODate" UserDateFormat="DayMonthYear" />
                            <asp:RegularExpressionValidator ID="txtDODate_rev" runat="server" ControlToValidate="txtDODate"
                                Display="None" ErrorMessage="Please enter valid date format dd-MMM-yyyy" ValidationGroup="None"
                                ValidationExpression="^(0?[1-9]|[12][0-9]|3[01])-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(19|20)\d\d$" />
                            <asp:ValidatorCalloutExtender ID="txtDODate_vce" runat="server" TargetControlID="txtDODate_rev"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:TextBox ID="txtDODate" runat="server" Width="90px" />
                            <asp:CalendarExtender ID="txtDODate_ce" runat="server" TargetControlID="txtDODate"
                                PopupPosition="Right" Animated="true" Format="dd-MMM-yyyy" />
                            <asp:MaskedEditExtender ID="txtDODate_me" runat="server" ClearMaskOnLostFocus="False"
                                CultureName="en-GB" Mask="99-LLL-9999" TargetControlID="txtDODate" UserDateFormat="DayMonthYear" />
                            <asp:RegularExpressionValidator ID="txtDODate_rev" runat="server" ControlToValidate="txtDODate"
                                Display="None" ErrorMessage="Please enter valid date format dd-MMM-yyyy" ValidationGroup="None"
                                ValidationExpression="^(0?[1-9]|[12][0-9]|3[01])-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(19|20)\d\d$" />
                            <asp:ValidatorCalloutExtender ID="txtDODate_vce" runat="server" TargetControlID="txtDODate_rev"
                                CssClass="customCalloutStyle" WarningIconImageUrl="~/App_Themes/Img/001_111.png"
                                CloseImageUrl="~/App_Themes/Img/001_051.png" />
                        </FooterTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField ItemStyle-HorizontalAlign="Center" FooterStyle-HorizontalAlign="Center"
                        FooterStyle-CssClass="action" ItemStyle-CssClass="action">
                        <ItemTemplate>
                            <asp:LinkButton ID="btnRemove" runat="server" CommandName="Select" CssClass="delete"
                                Text="Del" OnClientClick="return confirm('Are you sure you want to delete this?');" />
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:LinkButton ID="btnAdd" runat="server" ValidationGroup="Add" CommandName="Insert"
                                CssClass="add" Text="Add" />
                            <%--OnClientClick="return confirm('Are you sure you want to submit this?');"--%></FooterTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
            <asp:SqlDataSource ID="Supplier_DS" runat="server" SelectCommand="Select '' as ID, '' as Name 
                Union Select ID, Name From tbl_Supplier Group By ID, Name Order By Name" ConnectionString="<%$ ConnectionStrings:RFP_CS %>" />
            <table style="float: right; width: 100%; text-align: right;">
                <tbody>
                    <tr>
                        <td style="color: Red; text-align: right; width: 200px">
                            <span class="red">#</span>Discount (Actual)
                        </td>
                        <td style="width: 110px">
                            <%--<asp:TextBox ID="txtDiscount" runat="server" CssClass="text-medium" Style="text-align: right;
                                color: Red" AutoPostBack="true" OnTextChanged="txtDiscount_TextChanged" Width="105px" />
                            <asp:RegularExpressionValidator ID="txtDiscount_rev" runat="server" ControlToValidate="txtDiscount"
                                ValidationGroup="submit" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="^\$?(\d{1,3},?(\d{3},?)*\d{3}(.\d{0,3})?|\d{1,3}(.\d{2})?)$" />
                            <asp:ValidatorCalloutExtender ID="txtDiscount_vce" runat="server" TargetControlID="txtDiscount_rev" />--%>
                        </td>
                        <td style="width: 310px; text-align: left;">
                            <asp:TextBox ID="txtActDiscount" runat="server" CssClass="text-medium" Style="text-align: right;
                                color: Red" AutoPostBack="true" OnTextChanged="txtActDiscount_TextChanged" Width="105px" />
                            <asp:RegularExpressionValidator ID="txtActDiscount_rev" runat="server" ControlToValidate="txtActDiscount"
                                ValidationGroup="submit" Display="None" ErrorMessage="Please enter valid format 99.999!"
                                ValidationExpression="^\$?(\d{1,3},?(\d{3},?)*\d{3}(.\d{0,3})?|\d{1,3}(.\d{2})?)$" />
                            <asp:ValidatorCalloutExtender ID="txtActDiscount_vce" runat="server" TargetControlID="txtActDiscount_rev" />
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 290px">
                            Total
                        </td>
                        <td style="font-weight: bold; width: 110px;">
                            <asp:Label ID="lblTotal" runat="server" CssClass="text-medium" Width="110px" />
                        </td>
                        <td style="font-weight: bold; width: 310px; text-align: left;">
                            <asp:Label ID="lblActTotal" runat="server" CssClass="text-medium" Width="110px" Style="text-align: right" />
                            <asp:HiddenField ID="hfActTotal" runat="server" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

# jQuery GridView 计算

```
// For GridView Calculation
$("[id*=grdItems]input[type=text][id*=txtCalc]").live("keyup", function(e) {
    var quantity = $(e.target).closest('tr').find("input[type=text][id*=txtCalcQuantity]").val();
    var price = $(this).closest('tr').find("input[type=text][id*=txtCalcUnitPrice]").val().replace(/,/g, '');
    var actprice = $(this).closest('tr').find("input[type=text][id*=txtCalcActUnitPrice]").val().replace(/,/g, '');

    var total = parseFloat(price) * parseInt(quantity);
    var acttotal = parseFloat(actprice) * parseInt(quantity);

    if (isNaN(total)) total = 0;
    $(e.target).closest('tr').find("[id*=lblAmount]").text(total.toFixed(2));
    $(e.target).closest('tr').find("[id*=hfAmount]").val(total);

    if (isNaN(acttotal)) acttotal = 0;
    $(e.target).closest('tr').find("[id*=lblActAmount]").text(acttotal.toFixed(2));
    $(e.target).closest('tr').find("[id*=hfActAmount]").val(acttotal);

    GrossTotal();
    GrossActTotal();
});    

var gross;
function GrossTotal() {
    gross = 0;
    $("[id*=grdItems][id*=hfAmount]").each(function(index, val) {

        var value = parseFloat($(val).val().replace(/,/g, ''));
        if (isNaN(value)) value = 0;
        gross = gross + value;
    });
    $("[id*=lblTotal]").text(gross.toFixed(2));

}

var actgross;
function GrossActTotal() {
    actgross = 0;
    $("[id*=grdItems][id*=lblActAmount]").each(function(index, actitem) {

        var value = parseFloat($(actitem).text().replace(/,/g, ''));
        if (isNaN(value)) value = 0;
        actgross = actgross + value;
    });

    var discount = parseFloat($("[id*=txtActDiscount]").text());
    if (isNaN(discount)) discount = 0;
    actgross = actgross - discount;

    $("[id*=lblActTotal]").text(actgross.toFixed(2));
    $("[id*=hfActTotal]").val(actgross);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:17:54.597

当您使用 UpdatePanel 时，在回发后 DOM（html 和元素的结构）发生了变化并且您设置的 javascript 需要再次初始化。出于这个原因，UpdatePanel 提供了这个 javascript 功能。

```
var prm = Sys.WebForms.PageRequestManager.getInstance();    
prm.add_initializeRequest(InitializeRequest);
prm.add_endRequest(EndRequest);

function InitializeRequest(sender, args) {      

}

function EndRequest(sender, args) {
} 
```

现在在 EndRequest 上，您需要重新初始化您的 javascript。你最终的 javascript 将是

```
 function InitCalculus()
    {
    // For GridView Calculation
    $("[id*=grdItems]input[type=text][id*=txtCalc]").live("keyup", function(e) {
        var quantity = $(e.target).closest('tr').find("input[type=text][id*=txtCalcQuantity]").val();
        var price = $(this).closest('tr').find("input[type=text][id*=txtCalcUnitPrice]").val().replace(/,/g, '');
        var actprice = $(this).closest('tr').find("input[type=text][id*=txtCalcActUnitPrice]").val().replace(/,/g, '');

        var total = parseFloat(price) * parseInt(quantity);
        var acttotal = parseFloat(actprice) * parseInt(quantity);

        if (isNaN(total)) total = 0;
        $(e.target).closest('tr').find("[id*=lblAmount]").text(total.toFixed(2));
        $(e.target).closest('tr').find("[id*=hfAmount]").val(total);

        if (isNaN(acttotal)) acttotal = 0;
        $(e.target).closest('tr').find("[id*=lblActAmount]").text(acttotal.toFixed(2));
        $(e.target).closest('tr').find("[id*=hfActAmount]").val(acttotal);

        GrossTotal();
        GrossActTotal();
    }); 
    }

   // you can run this onload page, I just place it here to simulate your code
   InitCalculus();

    var prm = Sys.WebForms.PageRequestManager.getInstance();    
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);

    function InitializeRequest(sender, args) {      

    }

    function EndRequest(sender, args) {
       InitCalculus();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:20:58.547

```
$('[id*=grdItems]').find('input[type=text][id*=txtCalc]').live('keyup', function (e) { 

});

//Or 

$("[id*=grdItems] input[type=text][id*=txtCalc]").live("keyup", function(e) { 

});

//Or 

$("[id*=grdItems] > input[type=text][id*=txtCalc]").live("keyup", function(e) { 

}); 
```

//================================================= ====//

```
$('[id*=grdItems]').find('input[type=text][id*=txtCalc]').on('keyup', function (e) { 

});

//Or 

$("[id*=grdItems] input[type=text][id*=txtCalc]").on("keyup", function(e) { 

});

//Or 

$("[id*=grdItems] > input[type=text][id*=txtCalc]").on("keyup", function(e) { 

}); 
```

# ant - 如何更改ant中被调用目标中变量的值

> ID：10596191
> 
> 赞同：1
> 
> 时间：2012-05-15T07:37:03.057
> 
> 标签：ant

我可以更改被调用目标中的参数值，然后在 ant 中的调用目标中检索它。如果有任何其他值得赞赏的方式，可能通过 refid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:52:04.573

通常，一旦设置了 ant 属性，您就无法修改 ant 中的属性，但正如 oers 在评论中指出的那样，您可以使用 ant-contrib 中的[变量](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)任务。您甚至可以使用变量覆盖现有属性。根据文档，在大多数情况下您仍应使用属性，并且仅在您确实需要能够修改值的情况下使用变量。

另一种解决方法是设置其他属性并使用这些属性调用其他目标。

# unicode - Erlang 和带有 Cyrillic 的二进制文件

> ID：10596193
> 
> 赞同：5
> 
> 时间：2012-05-15T07:37:09.090
> 
> 标签：unicode, binary, erlang

我需要能够使用带有西里尔字符的二进制文件。我试着写`<<"абвгд">>`，但我得到了一个 badarg 错误。

如何在 Erlang 中使用西里尔文（或 unicode）字符串？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T08:31:26.643

如果您想在 中输入上述表达式`erlang shell`，请阅读`unicode`模块用户手册。函数`character_to_binary`, 和`character_to_list`都是可逆函数。下面是一个例子：

```
(emacs@yus-iMac.local)37> io:getopts().
[{expand_fun,#Fun<group.0.33302583>},
 {echo,true},
 {binary,false},
 {encoding,unicode}]

(emacs@yus-iMac.local)40> A = unicode:characters_to_binary("上海").
<<228,184,138,230,181,183>>

(emacs@yus-iMac.local)41> unicode:characters_to_list(A).
[19978,28023]

(emacs@yus-iMac.local)45> io:format("~s~n",[ unicode:characters_to_list(A,utf8)]).
** exception error: bad argument
     in function  io:format/3
        called as io:format(<0.30.0>,"~s~n",[[19978,28023]])

(emacs@yus-iMac.local)46> io:format("~ts~n",[ unicode:characters_to_list(A,utf8)]).
上海
ok 
```

如果要`unicode:characters_to_binary("上海").`直接在源码中使用，会稍微复杂一些。你可以先试试看有什么不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T16:50:54.727

Erlang 编译器会将代码解释为 ISO-8859-1 编码文本，这会将您限制为拉丁字符。尽管您可能能够在 Unicode 中添加一些可能具有相同字节表示的 ISO 字符，但这不是一个好主意。

您希望确保您的编辑器能够读取和写入 ISO-8859-1，并且您希望尽可能避免使用文字。从文件中获取这些字符串。

# testing - 1000 个并发/虚拟用户的负载测试

> ID：10596194
> 
> 赞同：0
> 
> 时间：2012-05-15T07:37:09.433
> 
> 标签：testing, load

我需要帮助，我正计划对产品执行负载测试，并且我正在寻找一种工具，它可以为我提供确切的详细信息，还可以向我显示相关的整个统计数据以及时间戳。

我正在寻找这样的工具。如果有人知道或遇到这样的事情，请告诉我。

提前感谢所有打算提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:41:48.213

我将开始将这两个视为 Jmeter 和 Grinder。我将从 Jmeter 开始，如果这不符合您的要求，请转到 Grinder。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:43:16.933

Pre-scriptum：我假设您想测试一个网络应用程序。请在问题中提供更多详细信息。

也许它太基本了，但是你试过使用[ab](http://httpd.apache.org/docs/2.0/programs/ab.html)吗？

# java - 使用 ReentrantReadWriteLock 可以在写入之前读取吗？

> ID：10596197
> 
> 赞同：2
> 
> 时间：2012-05-15T07:37:23.680
> 
> 标签：java, concurrency, reentrantlock

我正在实现一个可以读写数据的数据库。对于并发问题，我需要实现锁。通常，ReentrantReadWriteLock 会让写在读之前执行。我怎么能反过来？有没有一种方法可以在写线程执行之前读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:40:10.830

重新阅读[ReentrantReadWriteLock 的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)。它不会在读取和写入之间强加任何顺序。它所做的只是允许并发读取，但不允许并发写入和与读取并发的写入。

> 此类具有以下属性：
> 
> 采购订单
> 
> *   此类不会为锁访问强加读取器或写入器的优先顺序。但是，它确实支持可选的公平策略。

# xcode4 - Segue 和 Alertview 的按钮操作

> ID：10596204
> 
> 赞同：0
> 
> 时间：2012-05-15T07:37:51.667
> 
> 标签：xcode4, uialertview, segue, uistoryboard

我有 UIStoryboardSegue 设置，如果存在特定条件，想执行 AlertView，取消警报以停止 performSegue 并确定继续 performSegue。我唯一遇到的问题是处理发件人 ID，因为 performSeguewithIdentifier 需要进入 alertView 按钮单击方法。我如何保留发件人（ID）？

```
- (IBAction)drink1Button:(id)sender {

    if([drink1Units.text intValue] > 0)
    {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Chose" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];

        [alert show];
        [alert release];
    }

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"DrinkSegue"]) {

    // Get destination view
    DrinksListViewController *selectedDrink = [segue destinationViewController];

    // Get button tag
    NSInteger tagIndex = [(UIButton *)sender tag];

    // Set the selected button in the new view
    [selectedDrink setSelectedButton:tagIndex];
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1) {
       [self performSegueWithIdentifier:@"DrinkSegue" sender:sender];
} 
```

# actionscript-3 - 图表中的动态 DateTimeAxis 水平轴

> ID：10596212
> 
> 赞同：0
> 
> 时间：2012-05-15T07:38:47.860
> 
> 标签：actionscript-3, apache-flex, charts

我使用 DateTimeAxis 作为水平轴，我得到一个图表，其中所有记录都压缩在图表的末尾，我尝试设置最小值和最大值，但它没有解决问题

我想让图表上的点更加分散

提前致谢

编码

```
 public function todate(obj:Object  , index:int, arr:Array){
                trace("timestamp  =>" ,  Number(obj["time"]) ) ; 
             obj["time"] = new Date(Number(obj["time"])*1000) ; //new Date( 

             trace("converted date  =>" ,  obj["time"] ) ; 
             return obj ;
            }

            public function getfuel(ev:Object):void{
                trace("the message has been received by fuel" , ev.toString()) ; 
                var obj:Object = JSON.parse(ev.toString());
                var arr:Array = obj as Array ; 
                min_date = new Date(Number(arr[0]["time"])*1000) ; 
                max_date = new Date(Number(arr[arr.length-1]["time"])*1000) ;
                trace("min max date " ,min_date , max_date ) ;

                var dar:Array = arr.map(todate);

                arrcol = new ArrayCollection(dar ); //obj as Array

                trace("array collection " , arrcol ) ;
                linechart.dataProvider = arrcol ; 

                if ( combogr.selectedItem.value == "speed") 
                {

                    var ls:LineSeries;
                    ls = new LineSeries();
                    ls.xField = "time";
                    ls.yField = "speed";
                    ls.displayName = "Vitesse" ;

                    ls.dataProvider = linechart.dataProvider;
                    var tmp:Array = linechart.series;
                    tmp.push(ls)
                    linechart.series = tmp;

                }
            }

<s:HGroup width="417" height="194">
                    <mx:LineChart id="linechart" height="100%" width="288"
                      paddingLeft="5" paddingRight="5" 
                      showDataTips="true" dataProvider="{arrcol}">

            <mx:horizontalAxis>
                <mx:DateTimeAxis  id="time"   maximum="{max_date}"  minimum="{min_date}"   />
            </mx:horizontalAxis>

            <mx:series>
                <mx:LineSeries yField="fuel_fd" form="curve" displayName="fuel_df" lineStroke="{s2}"/>
                <mx:LineSeries yField="fuel" form="curve" displayName="fuel" lineStroke="{s1}"/>

            </mx:series>
        </mx:LineChart>

        <mx:Legend dataProvider="{linechart}"/> 
```

# jquery - jQuery函数启用一个div

> ID：10596215
> 
> 赞同：0
> 
> 时间：2012-05-15T07:39:05.883
> 
> 标签：jquery, html

我将这段代码嵌入了我的 js 文件以关闭 win 键。此代码：

```
jQuery(document).keydown(function(e){
    alert(e.keyCode); // replace "37" below with the windows key code
    if (e.keyCode == 37) { 
       alert( "windows key pressed" );
       return false;
    }
}); 
```

工作很好。但我只想工作 1 div。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:41:07.923

改变：

```
jQuery(document).keydown(function(e) { 
```

到

```
jQuery("#myElement").keydown(function(e) { 
```

你`#myElement`的. `id`_`div`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:41:08.503

使用您的 div 选择器而不是`document`选择器。

```
jQuery("#yourdivid").keydown(function(e){
    alert(e.keyCode); // replace "37" below with the windows key code
    if (e.keyCode == 37) { 
       alert( "windows key pressed inside div" );
       return false;
    }
}); 
```

要禁用 div，您可以简单地使用`$("#yourdivid").prop('disabled', true);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T07:41:52.803

您应该指定您希望它处理的 div：

```
jQuery("#theIdOfTheDiv").keydown(function(e){ 
    alert(e.keyCode); // replace "37" below with the windows key code 
    if (e.keyCode == 37) {  
       alert( "windows key pressed" ); 
       return false; 
    } 
}); 
```

将 'theIdOfTheDiv' 更改为您的 div 的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T07:44:22.913

添加选择器而不是文档

`jQuery('selector')`代替`jQuery(document)`

其中选择器可以是 id、class 等

使用选择器作为 id 的[演示](http://jsfiddle.net/mprabhat/LfRCv/)

[另一个 Demo](http://jsfiddle.net/mprabhat/xCpn9/1/)仅适用于 div 内的一个输入。

[Div Demo](http://jsfiddle.net/mprabhat/HUx4M/1/)仅适用于第一个 div

[Disabled for Div](http://jsfiddle.net/mprabhat/N8LMk/1/)仅适用于 span 不适用于 div

如果它们不在div 中，则[禁用 div 中的输入将适用于所有输入](http://jsfiddle.net/mprabhat/4wVDF/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T07:55:49.570

给你的 div 一个 ID。例如

```
<div id="testdiv" tabindex="0"></div> 
```

现在编写代码将 keydown 事件绑定到它，文档准备好

```
$(document).ready(function() {
            $("#testdiv").keydown(function(e) {

                if (e.keyCode == 37) { 
                alert( "windows key pressed" );
                return false;
                }
            });
        }); 
```

但请记住为 DIV 分配一个 tabindex，它可以是任何**数字**。

# php - 如何在php中编写javascript代码

> ID：10596218
> 
> 赞同：42
> 
> 时间：2012-05-15T07:39:18.323
> 
> 标签：php, javascript, forms

我有一个表格，点击提交按钮：

1.  我想在同一个文件中做一些任务（数据库任务）和
2.  我希望通过重定向将表单数据发送到 test.php

这是我的代码

```
 <?php
    if(isset($_POST['btn'])){
        //do some task
    ?>
    <script type="text/javascript">
        var e = document.getElementById('testForm'); e.action='test.php'; e.submit();</script>
    <?php
    }
    ?>
<form name="testForm" id="testForm"  method="POST"  >
    <input type="submit" name="btn" value="submit" autofocus  onclick="return true;"/>
 </form> 
```

但无法提交表单，如果我在 onClick 上调用 javascript 代码，它可以工作。这段代码有什么问题，是否有任何解决方法

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-15T07:45:29.490

只需在 if 函数内回显 javascript

```
 <form name="testForm" id="testForm"  method="POST"  >
     <input type="submit" name="btn" value="submit" autofocus  onclick="return true;"/>
 </form>
 <?php
    if(isset($_POST['btn'])){
        echo "
            <script type=\"text/javascript\">
            var e = document.getElementById('testForm'); e.action='test.php'; e.submit();
            </script>
        ";
     }
  ?> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-12-28T07:45:37.950

最近我遇到了另一种将 JS 代码放入 PHP 代码的方法。它涉及 Heredoc PHP 语法。我希望它对某人有所帮助。

```
<?php
$script = <<< JS

$(function() {
   // js code goes here
});

JS;
?> 
```

关闭 heredoc 构造后，$script 变量包含您的 JS 代码，可以像这样使用：

```
<script><?= $script ?></script> 
```

使用这种方式的好处是现代 IDE 可以识别 Heredoc 中的 JS 代码并正确突出显示它，这与使用字符串不同。而且您仍然可以在 JS 代码中使用 PHP 变量。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-15T07:50:37.850

您可以像这样放置所有 JS，因此在您的 HTML 准备好之前它不会执行

```
$(document).ready(function() {
   // some code here
 }); 
```

请记住这是 jQuery，因此请将其包含在 head 部分中。另请参阅[为什么应该使用 jQuery 而不是 onload](http://docs.jquery.com/How_jQuery_Works#Launching_Code_on_Document_Ready)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-15T07:42:02.777

在执行脚本时，该按钮不存在，因为 DOM 未完全加载。最简单的解决方案是将脚本块放在表单之后。

另一种解决方案是捕获`window.onload`事件或使用[jQuery 库](http://api.jquery.com/jQuery/#jQuery3)（如果你只有这个 JavaScript，那就过分了）。

# php - 音乐播放列表

> ID：10596219
> 
> 赞同：0
> 
> 时间：2012-05-15T07:39:27.763
> 
> 标签：php, javascript, html

我有很多 mp3 文件，我将这些文件的路径存储`Path example: \music\1.mp3 , \music\2.mp3 , \music\3.mp3`在表中的 MySQL 数据库（）中`music_tbl`。

我可以一首一首地播放这些音乐，因为我使用`OnClick`java`html tage <A>`来播放 mp3 文件。

但是我想用javascript和php制作一个播放列表（下一个mp3自动播放），请给我一些方法，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:15:53.843

看看jPlayer。它非常可定制，易于使用/安装。

[http://jplayer.org/latest/demo-02-video/](http://jplayer.org/latest/demo-02-video/)

# bash - 通过 Shell 脚本中的变量正确指定数组和元素

> ID：10596235
> 
> 赞同：0
> 
> 时间：2012-05-15T07:40:16.767
> 
> 标签：bash, shell, variables, zsh

考虑以下无意义数组：

```
# KIND[ID]=NAME
MONKEYS[1]="Oo Oo"
MONKEYS[2]="Aa Aa"
MONKEYS[3]="Ba Nana"
LIONS[5]="Mister Mufasa"
LIONS[7]="Cocoa Puff"
LIONS[8]="Lala Leo"
TIGERS[13]="Ben Gal"
TIGERS[15]="Tee Eye Double Guh Err"
TIGERS[22]="Oh Esex Diez Punto Cuatro" 
```

使用给定的`KIND`and `ID`，我正在尝试构建一个类似于`$NAME[$ID]`获取关联名称的字符串。

当显式声明数组名称时，该命令的行为与预期相同`echo "${LIONS[5]}"=>"Mister Mufasa"`）。但是，每当使用变量时，shell 都会以字符串中的给定字符进行响应。

```
$LIONS[5] => 'e' # The fifth letter in "Mister Mufasa" 
```

在其他情况下，我找不到控制插值以获得`NAME`

```
KIND="LIONS"
ID="5"

# Attempt to return value of `LIONS` when `KIND=LIONS`
echo $"${KIND}"; echo "\$${KIND}" #=> "$LIONS"
echo "$${KIND}" #=> "57800{KIND}" Interpolates "$$"
echo "\$\${KIND}"; "\$\${KIND}" #=> "$${KIND}" 
```

我发现以下作品虽然“丑陋”...

```
eval echo `echo \\$${KIND}` 
```

然而，当介绍`ID`事情再次中断时：

```
eval echo `echo \\$${KIND}[$ID]`
#> title:5: no matches found: $LIONS[5]
#> no matches found: $LIONS[5] 
```

我觉得我错过了一些*非常*简单的东西。我有一种预感，我忘了逃避什么，但我不太确定是什么。

此外，还有哪些“较少冗余”的替代方案`eval echo `echo...`或`eval echo `print...`存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:39:52.540

在 bash 中，使用间接寻址：

```
REF="$KIND[$ID]" # Sets REF to "LIONS[5]"
echo "${!REF}"   # Prints "Mister Mufasa" 
```

编辑：在 zsh 中，使用嵌套扩展：

```
echo "${(P)${KIND}[ID]}" 
```

# android - 在 MapView 上插值 GeoPoints

> ID：10596237
> 
> 赞同：1
> 
> 时间：2012-05-15T07:40:28.907
> 
> 标签：android, location, android-mapview, coordinate

我要解决的问题是我有许多路线编码为经纬度对列表，其中每一对都是路线上交叉点的坐标，以便可以在地图上正确绘制路线. 用户可以搜索合适的路线，将他从他现在所在的点带到他指定的地图上的某个点。我的算法只是遍历路线并计算路线的每个坐标与用户位置点和目的地点之间的距离，试图找出经过这些点附近的路线。

问题在于，由于路线被编码为其交叉点列表，因此没有足够的点可以与用户位置和目的地进行比较，并且算法无法计算出合适的路线。我试图找到一种插入点的方法，这意味着有两个点 A 和 B，它们之间的距离为 100 米，在 A 和 B 之间以 10 米的步长绘制的线上找到更多的点。

谁能描述可以提供这种功能的算法？

# ruby-on-rails - 获取嵌套参数

> ID：10596238
> 
> 赞同：3
> 
> 时间：2012-05-15T07:40:33.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个带有嵌套参数的表单。在以下示例中，如何获取控制器中的“amount_whole”值？

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"KCmBI6RLh0LdUsM2r5H1vhNykS1IXecFe5Lct+TuIGc=", "dec_declaration"=>{"declaration_nr"=>"SAL_2012_0001", "dec_declarationlines_attributes"=>{"0"=>{"amount_whole"=>"75"}} 
```

是这样吗？

```
amount = params[:dec_declarations][:dec_declarationlines_attributes][:amount_whole] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T07:45:12.197

您忘记了`"0"`哈希中的索引。所以你应该能够像这样访问它：

```
amount = params[:dec_declaration][:dec_declarationlines_attributes]["0"][:amount_whole] 
```

params 散列使用符号和字符串作为键。

## 编辑

但是，判断购买参数的结构，看起来您有一个名为 DecDeclaration 的模型，该模型具有该关联的_many DecDeclarationlines 和accepts_nested_attributes。所以你应该可以在控制器中这样使用它：

```
@dec_declaration = DecDeclaration.build(params[:dec_declaration])
@amount_whole = @dec_declaration.dec_declarationlines.first.amount_whole 
```

因为如果参数进入该结构，它会自动将嵌套值分配给关联。

# c# - 如何使用 Tweetsharp 获取 Twitter 用户时间线

> ID：10596244
> 
> 赞同：1
> 
> 时间：2012-05-15T07:40:59.937
> 
> 标签：c#, twitterizer

我尝试获取用户时间线的最后 20 个状态。所以我在互联网上搜索并获得以下代码：

```
TwitterUser twitterUser = TwitterUser.Show("Username").ResponseObject;
if (twitterUser != null)
{
    UserTimelineOptions userTimelineOptions = new UserTimelineOptions();
    userTimelineOptions.UserId = twitterUser.Id;

    return TwitterTimeline.UserTimeline(userTimelineOptions).ResponseObject;
}
return null; 
```

当我测试它时，我得到以下异常：

```
Unexpected token when deserializing object: StartObject. Line 1, position 1795. 
```

我不知道出了什么问题，所以我希望你能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T10:53:40.980

由于[Twitterizer](https://github.com/Twitterizer/Twitterizer#This_is_the_end)已停产，我假设您已移至[TweetSharp](https://github.com/danielcrenna/tweetsharp)：

```
TwitterService service = new TwitterService("consumerKey", "consumerSecret");
service.AuthenticateWith("accessToken", "accessTokenSecret");
var options = new ListTweetsOnHomeTimelineOptions();
options.ExcludeReplies = true;
var tweets = service.ListTweetsOnHomeTimeline(options); 
```

对于推特用户：

```
UserTimelineOptions options = new UserTimelineOptions();
options.ScreenName = "Username";

var tweets = TwitterTimeline.UserTimeline(options).ResponseObject; 
```

Twitterizer 使用 1.0 API，TweetSharp 具有 1.1 twitter API 所需的 oAuth： [https ://dev.twitter.com/blog/changes-coming-to-twitter-api](https://dev.twitter.com/blog/changes-coming-to-twitter-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:47:50.757

尝试这个

```
var twitterService = new TwitterService("consumerKey", "consumerSecret");
twitterService.AuthenticateWith("token", "tokenSecret");
var tweets = twitterService.ListTweetsOnHomeTimeline(); 
```

# java - 使用 Log4J 连接远程服务器进行日志记录

> ID：10596251
> 
> 赞同：4
> 
> 时间：2012-05-15T07:41:34.850
> 
> 标签：java, log4j

我想连接到远程服务器以使用 Log4J Socket Appender 写入我的日志文件我的 log.properties 文件如下

```
log4j.rootLogger=DEBUG, BLAH

# to connect to the remote server
log4j.appender.BLAH=org.apache.log4j.net.SocketAppender

# set set that layout to be SimpleLayout
log4j.appender.BLAH.layout=org.apache.log4j.SimpleLayout

#log4j.appender.BLAH.File= admin.log

log4j.appender.BLAH.Port= xx
log4j.appender.BLAH.RemoteHost= <remoteIp> 
```

我也尝试使用端口号 22 和 8080 连接 localhost

我在连接的某个地方犯了一个错误。我收到以下错误

```
log4j:ERROR Could not connect to remote log4j server at [localhost]. We will try again later. 
```

或者给我任何在远程服务器机器中写入日志文件的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:20:41.530

您应该有一个正在运行的服务器，它监听给定的端口。log4j 应该连接到此服务器以进行日志记录。

在命令提示符中键入以下内容以启动侦听器

Java org.apache.log4j.net.SimpleSocketServer 4712 PATH_TO_THE_FILE\log4jServer.properties

例如

> java org.apache.log4j.net.SimpleSocketServer 4712 C:\log4j-server.properties

log4j-server.properties 可能包含类似这样的内容。

```
> log4j-server.properties will contain normal configuration of log4j.
> log4j.rootLogger=debug, stdout
> log4j.appender.stdout=org.apache.log4j.ConsoleAppender
> log4j.appender.stdout.Target=System.out
> log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
> log4j.appender.stdout.layout.ConversionPattern=%t %-5p %c{2} - %m%n 
```

在客户端，您的 log4j 配置将如下所示

```
log4j.rootLogger=DEBUG, BLAH  
# to connect to the remote server 
log4j.appender.BLAH=org.apache.log4j.net.SocketAppender  
# set set that layout to be SimpleLayout 
log4j.appender.BLAH.layout=org.apache.log4j.SimpleLayout  
#log4j.appender.BLAH.File= admin.log  
log4j.appender.BLAH.Port= 4712 
log4j.appender.BLAH.RemoteHost=10.225.226.58 
```

根据您的配置替换 IP 和端口（不与标准端口冲突）。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:46:18.877

SSH 和 HTTP 通常分别使用 22 和 8080 端口。`SocketAppender`期望`SocketNode`使用自己的基于 TCP 的协议与a 对话。因此，您需要在您选择的不同端口上启动一个。

请注意，当您尝试登录到远程服务器时，您需要在防火墙上打开该端口。

# c# - RefreshMode.ClientWins 与多个用户，会发生什么？

> ID：10596264
> 
> 赞同：2
> 
> 时间：2012-05-15T07:42:52.847
> 
> 标签：c#, entity-framework

所以这是一个非常简单的问题，我还没有找到答案。所以情况如下：

*   User1 初始化一个对象上下文
*   User2初始化另一个相同类型的objectcontext
*   User1 更改实体 A
*   User2 更改实体 B
*   User2 保存更改
*   User1 使用 RefreshMode.ClientWins 进行刷新并继续保存更改

那么实体 B 会发生什么？User1 没有改变它，但它与数据库中的版本不同。我的直觉会说，因为 User1 没有对实体 B 进行任何更改，所以它将保持 User2 离开它的状态。但可惜我不确定，因此我在问更了解的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:00:56.120

`RefreshMode.ClientWins`仅影响是否保留本地更改。如果没有局部变化，则`RefreshMode.ClientWins`和之间没有区别`RefreshMode.StoreWins`。

我看到[文档](http://msdn.microsoft.com/en-us/library/bb896255.aspx)有点混乱：

> StoreWins 模式意味着应该更新对象以匹配数据源值。ClientWins 值意味着只有对象上下文中的更改将被持久化，即使数据源中有其他更改。

对象上下文中的非更改不会持续存在`RefreshMode.ClientWins`，但文档并没有明确说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:07:32.397

您的期望是正确的 - 实体 B 不会发生任何事情，因为数据库中没有任何更改，因此刷新什么也没做。

对象上下文在内部跟踪每个跟踪实体的两组值 - 原始值和当前值。原始值是从数据库加载的值，当前值是加载实体后应用程序修改的实际值。

当您`Refresh`使用`ClientWins`模式调用时，上下文将查询实体的数据库，更新实体的跟踪记录中的所有原始值并更新您的应用程序尚未更改的当前值 - 已经更改的值不会更新（即客户端赢得刷新）。

当您执行`SaveChanges`EF 时，将通过比较原始值和当前值来检测更改，并仅为更改的列创建更新命令。`ClientWins`刷新模式用于乐观并发的场景，以强制用新值覆盖数据库更改。

# jsf-2 - 将 bean 插入转换器

> ID：10596265
> 
> 赞同：0
> 
> 时间：2012-05-15T07:42:53.690
> 
> 标签：jsf-2, dependency-injection

我有以下 ApplicationScoped bean

```
package es.caib.gesma.gesman.data;

import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

import es.caib.gesma.gesman.ejb.Dao;

@ManagedBean(name="priorityList")
@ApplicationScoped
public class PriorityList {

  @EJB
  Dao daoEjb;

  private List<Priority> priorities = null;

    public PriorityList() {
    }

    @PostConstruct
    public void refresh() {
      this.priorities = daoEjb.findPriorities();
    }

    public List<Priority> getPriorities() {
      return this.priorities;
    }

    public Priority fromId(int id) {
      for(Priority priority : this.priorities) {
        if (priority.getId() == id) {
          return priority;
        }
      }
      return null;
    }
  } 
```

我尝试将该bean注入转换器

```
package es.caib.gesma.gesman.data.converter;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;

import es.caib.gesma.gesman.data.Priority;
import es.caib.gesma.gesman.data.PriorityList;

@ManagedBean
@ApplicationScoped
public class PriorityConverter implements Converter {

  @ManagedProperty("#{priorityList}")
  private PriorityList priorityList;

  @Override
  public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
    ...
  }

  @Override
  public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {
    ...
  }

  public void setPriorityList(PriorityList priorityList) {
    System.out.println("SET PRIORITYLIST " + priorityList);
    this.priorityList = priorityList;
  }

} 
```

每当我尝试访问该属性时，它都是空的。setter 永远不会被调用。

从[这个问题](https://stackoverflow.com/questions/6135942/managedproperty-not-injected-in-facesconverter)和[这个](https://stackoverflow.com/questions/7737623/how-do-i-get-a-managed-bean-inside-an-unmanaged-object)问题来看，似乎无法以通常的方式注入 bean（如果我错了，请纠正我）。有什么替代方法可以避免每次都从 EJB（= 数据库访问）中获取整个值列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:42:04.907

您不能（当前）将依赖项注入转换器。但是，如果您可以使用 Seam 3，则[seam-faces](http://seamframework.org/Seam3/FacesModule)模块将启用此功能。您不需要做任何特别的事情，只需在类路径中添加 seam-faces JAR（及其任何依赖项），然后注入转换器就会神奇地起作用。只需注意其他意外的副作用（当 seam-persistence JAR 位于类路径中时，我注意到事务边界的差异）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:08:51.650

我认为你应该能够从 HttpSession 中拉出这个 bean（它在 PhaseListener 和 SessionScoped bean 中对我有用）

```
FacesContext context = FacesContext.getCurrentInstance();
HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
SessionForm sessionBean = (SessionForm) session.getAttribute("priorityList"); 
```

或者，如果我可以从 BalusC 借用关于[JSF 通信](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)的文章，底部描述了如何从 ManagedBean 制作转换器（这样您就可以轻松地在那里注入您的 ApplicationScoped bean）

# sql - SQL在数组查询中

> ID：10596267
> 
> 赞同：0
> 
> 时间：2012-05-15T07:43:04.053
> 
> 标签：sql, arrays, string

我的数据库中有一个列，其字符串值类似于“1,2,3,4,5”。我想比较并找到我之前在该字符串中定义的整数值。但我希望这个字符串具有数组的目的。到这里为止没有问题。我在这样的数组中找到整数：

```
$sql='SELECT * FROM '. TOPIC_TABLE .' WHERE multi_dept LIKE \'%'.$prjId.',%\' ORDER BY topic'; 
```

但是，当字符串中有一个 id 为 11 的主题时，就会出现错误。

{1,2,11,}-> 当我在字符串中搜索 ID=1 时，它也会找到 1 和 11。有没有办法通过 SQL 查询来避免和解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:48:01.127

由于`,`每个整数后面都有一个，这不是像使用`WHERE`下面的子句一样简单吗？

```
WHERE multi_dept LIKE '$prjId,%' XOR multi_dept LIKE '%,$prjId,%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:52:12.177

[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_find-in-set) 进行救援。

```
 $sql='SELECT * FROM '
     . TOPIC_TABLE
     . ' WHERE FIND_IN_SET( '
     . $prjId
     . ', multi_dept ) ORDER BY topic' 
```

# javafx-2 - JavaFX 2 标题栏颜色

> ID：10596269
> 
> 赞同：1
> 
> 时间：2012-05-15T07:43:24.673
> 
> 标签：javafx-2

如何更改 javafx 2 桌面应用程序中标题栏的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:59:29.267

写入标题的窗口区域由操作系统控制。操作系统管理它的颜色、主动/被动状态、关闭最小化按钮等，而 FX 没有 API 来处理这些。

`Stage`您可以选择使用with创建自己的标题栏，`StageStyle.UNDECORATED`并为此类窗口绘制您喜欢的任何装饰。

# git - 为要添加到现有 git 存储库的未修订代码找到合适的父提交

> ID：10596270
> 
> 赞同：0
> 
> 时间：2012-05-15T07:43:27.603
> 
> 标签：git, parent, commit, git-diff

我需要将一些以前不受版本控制的代码包含到已经包含一些提交的 git 存储库中。

我想要自动化的是找到合适的“父”提交，新代码将成为子提交。

经过一些测试，我认为`git diff-tree`效果最好（因为只有一个文件夹包含用于测试“亲子关系”的相关代码）。

我的方法是这样的：

1.  循环遍历所有现有提交和提交的节点 sha1 和相关子树的 sha1
2.  将新文件复制到存储库，将它们添加到索引
3.  注意索引中相关子树的 sha1
4.  将现有的相关子树与新的候选者进行比较，并使用 git diff-tree of something similar 来计算“相似度”
5.  选择最相似的现有子树并使其成为新提交的父级，即检查新父级（或者`checkout --orphan`如果找不到合适的父级），清空工作目录并填充新文件并提交。

缺少的是一种计算相似度的方法！也许有人可以给我一个提示，哪种标志组合会有所帮助......

如果这很重要，代码看起来几乎像 PASCAL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:05:41.203

这里不`git diff --numstat`适合你。您可以将差异指示在特定文件或路径之间，并且输出是“机器友好的”。

# haskell - Haskell 向我抛出 57 - Undefined variable "f" 错误

> ID：10596277
> 
> 赞同：0
> 
> 时间：2012-05-15T07:43:55.660
> 
> 标签：haskell

我有一个快速的问题。Haskell 向我抛出 57 - Undefined variable "f" 错误，我不知道为什么。如果你能看看这个，我将不胜感激。代码：

```
eval :: Expr -> Environment -> Float
eval expr env = eval' expr
    where
    eval' :: Expr-> Float
    eval' (Num num) = num
    eval' (App app exprs) = foldl1 (f) (map eval' exprs) -- **Line 57**
    eval' (Id id) = 5
        where
        f = getFunctionForApp app                    -- **f is here** 
        getFunctionForApp :: String -> (Float->Float->Float)
        getFunctionForApp "+" = (+)
        getFunctionForApp "-" = (-)
        getFunctionForApp "*" = (*)
        getFunctionForApp "/" = (/)
        getIdVal :: String -> Environment -> Float
        getIdVal id ((curId, val):envrs) 
            |curId == id = val
            | otherwise = getIdVal id envrs 
```

类型定义：

```
data Expr = Num Float | Id String | App String [ Expr ]
           deriving (Eq, Ord, Show)
type Environment = [ ( String, Float ) ] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T08:03:00.143

*我真的*不能说，但在尝试解密代码后，我猜你的意思如下：

```
eval :: Expr -> Environment -> Float
eval expr env = eval' expr 
    where eval' :: Expr -> Float 
          eval' (Num num) = num 
          eval' (App app exprs) = foldl1 (f) (map eval' exprs)
              where f = getFunctionForApp app -- that has to be in this line
          eval' (Id id) = 5 
```

（现在有了格式化的代码，我确定就是这样。`where`子句仅适用于子句之前的行）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-15T08:20:00.167

问题是内部`where`子句附加到该行

```
eval' (Id id) = 5 
```

但上面的行需要它

```
eval' (App app exprs) = foldl1 (f) (map eval' exprs) -- **Line 57** 
```

通常，函数定义的每一行都有自己的范围。`where`子句可以引用它所附加的行中的模式变量，并且仅作用于该行的其余部分。

# java - 将字符串与 Lexer 匹配：“预期”错误

> ID：10596278
> 
> 赞同：1
> 
> 时间：2012-05-15T07:44:09.077
> 
> 标签：java, parsing, antlr

我的语法有一个小问题。

我正在尝试检测我的字符串是否是日期比较。但是我创建的 DATE 词法分析器似乎无法被 antlr 识别，并且出现无法解决的错误。

这是我的输入表达式：

```
"FDT > '2007/10/09 12:00:0.0'" 
```

我只是期望这样一棵树作为输出：

```
 COMP_OP
FDT        my_DATE 
```

这是我的语法：

```
 // Aiming at parsing a complete BQS formed Query
grammar Logic;

options {
    output=AST;
}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

 // precedence order is (low to high): or, and, not, [comp_op, geo_op, rel_geo_op, like, not like, exists], ()
 parse  
    : expression EOF -> expression
    ; // ommit the EOF token

 expression
    : query
    ;       

 query
    : atom (COMP_OP^ DATE)* 
    ;

//END BIG PART

 atom   
    : ID 
    | | '(' expression ')' -> expression
    ;

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/
// GENERAL OPERATORS: 

DATE        :   '\'' YEAR '/' MONTH '/' DAY (' ' HOUR ':' MINUTE ':' SECOND)? '\'';
ID          :   (CHARACTER|DIGIT|','|'.'|'\''|':'|'/')+;
COMP_OP     :   '=' | '<' | '>' | '<>' | '<=' | '>=';

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { $channel = HIDDEN; } ;

fragment YEAR   :   DIGIT DIGIT DIGIT DIGIT;
fragment MONTH  :   DIGIT DIGIT;
fragment DAY    :   DIGIT DIGIT;
fragment HOUR   :   DIGIT DIGIT;
fragment MINUTE :   DIGIT DIGIT;
fragment SECOND :   DIGIT DIGIT ('.' (DIGIT)+)?;

fragment DIGIT  :   '0'..'9' ;
fragment DIGIT_SEQ  :(DIGIT)+;
fragment CHARACTER :    ('a'..'z' | 'A'..'Z'); 
```

作为输出错误，我得到：

```
line 1:25 mismatched character '.' expecting set null
line 1:27 mismatched input ''' expecting DATE 
```

我还尝试从我的 Date 中删除 ' ' （认为这可能是问题所在，因为我在语法中删除了它们。）

在这种情况下，我收到此错误：

```
line 1:6 mismatched input ''2007/10/09' expecting DATE 
```

谁能解释我为什么会出现这样的错误，以及如何解决它？

这个问题是我完成任务的 q 个子集，我必须在其中区分很多比较（日期、地理、字符串……）。因此，我真的需要能够为我的原子赋予“标签”。

非常感谢你 ！

作为补充，这是我当前的 Java 代码：

```
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
  public static void main(String[] args) throws Exception {

    // the expression
    String src = "FDT > '2007/10/09 12:00:0.0'";

    // create a lexer & parser
    //LogicLexer lexer = new LogicLexer(new ANTLRStringStream(src));
    //LogicParser parser = new LogicParser(new CommonTokenStream(lexer));

    LogicLexer lexer = new LogicLexer(new ANTLRStringStream(src));
    LogicParser parser = new LogicParser(new CommonTokenStream(lexer));

    // invoke the entry point of the parser (the parse() method) and get the AST
    CommonTree tree = (CommonTree)parser.parse().getTree();

    // print the DOT representation of the AST 
    DOTTreeGenerator gen = new DOTTreeGenerator();
    StringTemplate st = gen.toDOT(tree);
    System.out.println(st);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:16:04.663

我终于明白了

似乎即使我删除了空格，我仍然必须将它们包含在包含空格的表达式中。此外，第二个定义有一个小错误，因为第二个数字是可选的。

因此语法稍作修改：

```
fragment SECOND :   DIGIT (DIGIT)? ('.' (DIGIT)+)?; 
```

这给出了这个输出：

![输出的 AST 图](../Images/5ba5e7fe2ea89a381f55bd30d8da0c7b.png)

我知道希望这仍然适用于我更完整的语法:)

希望它可以帮助某人。

# php - php中的stripos函数没有返回正确的结果

> ID：10596282
> 
> 赞同：1
> 
> 时间：2012-05-15T07:44:26.733
> 
> 标签：php, function, case-sensitive

在 php 中，`stripos()`对字符执行区分大小写的搜索并返回其位置。但是在下面的代码中，`L`无论大小写如何，都会返回字符的位置。

```
<?php

$a = array('hello','world');
foreach($a as $val) {

echo $val;

echo stripos($val, 'L'); //returns hello2world3
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T07:46:01.617

来自 php 文档

*   [stripos](http://php.net/manual/en/function.stripos.php)用于不区分大小写的搜索。

*   如果您想要区分大小写的搜索，那么您应该使用[strpos](http://php.net/manual/en/function.strpos.php)。

# php - 使用 php 和 mySql 进行用户身份验证

> ID：10596287
> 
> 赞同：-2
> 
> 时间：2012-05-15T07:44:40.753
> 
> 标签：php, mysql, forms

在以下代码中面临挑战；请帮忙：

```
<?php
    session_start();
    $con = mysql_connect("localhost","root","");
    if (!$con){
       die('Could not connect: ' . mysql_error());
    }

    $db_exist = mysql_select_db("seta", $con);

    $myUName = $_POST["username"];
    $myPwd = $_POST["pwd"];
    $loFmUname = strtolower($myUName);

    if($db_exist){
        $sql = "SELECT * FROM Persons WHERE $loFmUname = 'strtolower($db_field['UserName'])' AND $myPwd = '$db_field['UserPwd']'";
        $result = mysql_query($sql);

        if($result){
            $_session['loged'] = '$loFmUname';
            header('location:index.html');
            die();
        }

        else{
            echo"Invalid username and/or password please";
            echo "<a href='login.php'>try again</a>";
        }

    }

    else{
        echo "Sorry Database Not Found";
    }

 mysql_close($con);
 ?> 
```

> 错误出现在第 15 行。

请注意，`strtolower()`它用于忽略区分大小写的用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:56:40.033

在对变量内的变量进行操作时，您需要使用点分隔符。

另外，应该`$_SESSION['loged'] = '$loFmUname';`是那个，还是`$_SESSION['logged'] = '$loFmUname';`？

```
<?php
session_start();
$con = mysql_connect("localhost","root","");
if (!$con){
   die('Could not connect: ' . mysql_error());
}

$db_exist = mysql_select_db("seta", $con);

$myUName = $_POST["username"];
$myPwd = $_POST["pwd"];
$loFmUname = strtolower($myUName);

if($db_exist){
    $result = mysql_query("SELECT * FROM Persons WHERE $loFmUname='" . strtolower($db_field['UserName']) . "' AND $myPwd='$db_field['UserPwd']' ");

    if($result){
        $_SESSION['loged'] = '$loFmUname';
        header('Location: index.html');
        die();
    } else {
        echo "Invalid username and/or password please";
        echo "<a href='login.php'>try again</a>";
    }
} else {
    echo "Sorry Database Not Found";
}

mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:48:02.877

换行

```
$sql = "SELECT * FROM Persons WHERE $loFmUname = 'strtolower($db_field['UserName'])' AND $myPwd = '$db_field['UserPwd']'"; 
```

通过这个

```
$sql = "SELECT * FROM Persons WHERE $loFmUname = '".strtolower($db_field['UserName'])."' AND $myPwd = '".$db_field['UserPwd']."'"; 
```

这可能会对您有所帮助。

谢谢

# java - 构造函数中的字符串 [] 或 ArrayList？

> ID：10596289
> 
> 赞同：1
> 
> 时间：2012-05-15T07:45:03.897
> 
> 标签：java, arrays, arraylist

我必须为 ArrayList 创建一个构造函数。所以基本上我想要的是这个构造函数创建一个 ArrayList。

```
 public Recipe(String[] modifications){

The problem is, it should give something like(example):

String[] modifications = [heatup, cooldown, mix, heatup] 
```

构造函数会像这样工作吗：

```
 Recipe(heatup, cooldown, mix, heatup) 
```

还是我需要将其更改为：

```
 Recipe(modifications){
    this.myArrayList[1] = modifications[1]
    .
    .
    .
    } 
```

谢谢，如果我的代码中有一些大错误，我很抱歉，仍在学习我的 Java 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:48:21.923

你可以这样定义它：

```
public Recipe(String... modifications) 
```

这将为您提供一个变量参数列表，因此您的构造函数将像这样工作 `Recipe(heatup, cooldown, mix)`：

在构造函数内部，您可以像使用数组一样使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T07:48:28.590

将构造函数更改为可变参数：

```
public Recipe(String ... modifications){ 
```

但是您可以访问`modifications`，`String[]`这是一个数组，而不是 ArrayList。如果您想要一个 ArrayList，请执行以下操作：

```
private final List<String> list;
public Recipe(String ... modifications){
    this.list = new ArrayList<String>(Arrays.asList(modifications));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T07:48:51.287

您可以使用可变参数创建一个构造函数：

```
public Recipe(String... modifications){...} 
```

那么你可以这样称呼它：

```
Recipe(heatup, cooldown, mix, heatup); 
```

请注意，如果您（计划）有其他构造函数具有潜在冲突的参数列表，则应该小心使用可变参数。但是，如果这是您唯一的构造函数，则可变参数应该没问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T07:49:13.020

你可以在你的构造函数中这样做

```
ArrayList<String> list=new ArrayList<String>();
        public Recipe(String[] modifications){

   // String a[]={"asas"};

            list.addAll(Arrays.asList(modifications)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T07:49:21.813

第二个......当然，`for`如果您只想复制元素，您可以使用 a 。

您也可以将参数传递的数组复制到您的类属性/方法变量中，除非有其他动机不这样做。

最后，请记住它会类似于`Recipy(String[] modifications) {`. 您必须定义参数的类型。

现在终于，myArrayList 是一个有点不幸的数组名称（API 中有一个名为 ArrayList 的类）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-15T07:50:06.807

您想要的是能够传递不确定数量的参数：

```
public Recipe(String ... modifications) { 
```

在构造函数内部，修改是一个数组。

这将适用于：

```
new Recipe("heatup", "cooldown", "mix", "heatup"); 
```

有了这个：

```
new Recipe(); 
```

有了这个：

```
new Recipe("heatup", "mix"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-15T07:53:23.993

您可以使用`varargs`：

```
public Recipe(String ... modifications) {
  // now you can use modifications as an array
  for (int f = 0; f < modifications.length; f++) {
     System.out.println("#" + f + ": " + modifications[f]);
  }
} 
```

.

要使用您的课程，您只需编写：

```
 Recipe myRecipe = new Recipe("heatup", "mix"); 
```

.

# python - 如何将多个文件添加到单个 zip 文件夹中

> ID：10596297
> 
> 赞同：3
> 
> 时间：2012-05-15T07:45:50.887
> 
> 标签：python, zip

实际上我正在编写一个将两个文件写入桌面的脚本，让它成为“a.txt”和“b.txt”......所以在写入桌面后我必须阅读这些文件并压缩放入文件夹中......

任何人都可以帮助解决这个问题....我知道如何压缩文件夹，但不知道如何将两个文件添加到 zip

从文件夹中读取我知道它是这样的

```
def zipdir(basedir, archivename):
    assert os.path.isdir(basedir)
    with closing(ZipFile(archivename, "w", ZIP_DEFLATED)) as z:
        for root, dirs, files in os.walk(basedir):
            for fn in files:
                absfn = os.path.join(root, fn)
                zfn = absfn[len(basedir)+len(os.sep):]
                z.write(absfn, zfn)

if __name__ == '__main__':
    import sys
    basedir = sys.argv[1]
    archivename = sys.argv[2]
    zipdir(basedir, archivename) 
```

我现在使用的代码是

```
import zipfile
zip = zipfile.ZipFile('Python.zip', 'a')
zip.write('fields.txt')
zip.write('grp.txt')
zip.close() 
```

这是创建这两个文件加上一些包含所有文件的额外文件夹.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:54:14.440

您需要使用“a”-append 参数打开 zip 文件。然后您可以使用 write 参数而不覆盖文件。

来源：[12.4.1](http://docs.python.org/library/zipfile.html#zipfile-objects)

编辑：

zip.write('file.pdf','/folder/file.pdf')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T20:48:21.580

最简单的方法是使用shutil 库。将所有要压缩的文件放在一个目录（文件夹）中

```
import shutil
shutil.make_archive(output_filename_dont_add_.zip, 'zip', directory_to_download) 
```

请记住，如果您使用 ipython，您可以使用 directory_to_download 的相对地址

# javascript - 将 javascript 制作的图像复制到剪贴板

> ID：10596306
> 
> 赞同：6
> 
> 时间：2012-05-15T07:46:14.763
> 
> 标签：javascript, html, canvas, clipboard

今天有没有使用 HTML5 复制到剪贴板的方法，没有浏览器插件（因此没有 Flash 或 java），也没有短期黑客，在画布中构建的图像？

复制到剪贴板将由 javascript 启动，但用户确认或对话框不是问题。

我对在 Windows 和 Linux 中不起作用的解决方案，或者至少在 Chrome 和 Firefox 中不起作用的解决方案不感兴趣。

理想情况下，我更喜欢不强制显示图像的解决方案（使用 内置在内存中`document.createElement('canvas')`），但这不是绝对要求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T08:00:08.227

据我所知，[剪贴板 API](http://www.w3.org/TR/clipboard-apis/)是该领域唯一的规范。我从未使用过它，也不知道它的支持范围有多广，但我怀疑它并不广泛。根据[这个快速而肮脏的测试](http://jsbin.com/exibid)，当前版本的 Chrome 和 Firefox 会触发该`copy`事件。我相信用户必须启动复制（例如，您说“按 Ctrl+C 复制”）。

IE[`window.clipboardData`](http://msdn.microsoft.com/en-us/library/ie/ms535220%28v=vs.85%29.aspx)可用，但据我所知，您仅限于文本和 URL。

可悲的是，我认为这基本上是那些答案之一：不，还没有。

# iphone - 上传 iphone 应用程序

> ID：10596310
> 
> 赞同：0
> 
> 时间：2012-05-15T07:46:38.620
> 
> 标签：iphone

我正在尝试创建我的 iphone 项目的存档。存档已创建，但没有版本和标识符信息。版本未指定，标识符为空。

在我的目标摘要页面中，一切（版本和标识符）都很好。我正在使用 Xcode 4.3

# java - 在这种情况下如何通过 API 进行单元测试？

> ID：10596314
> 
> 赞同：0
> 
> 时间：2012-05-15T07:47:09.990
> 
> 标签：java, unit-testing, mocking

我有一个类 FTPOperation，我用它作为基类来重新组合 FTP 操作常用的方法。其中一种方法是 connect()。

```
public abstract class FtpOperation {

    protected static final Log log = LogFactory.getLog(FtpOperation.class);

    /**
     * Hostname or IP address of the FTP server (e.g. localhost, 127.0.0.1).
     */
    private String hostName;

    private String username;

    private String password;

    protected FTPClient ftpClient = getFTPClient();

    public void setHostName(String hostName) {
        this.hostName = hostName;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    /**
     * Connect to the specified FTP server.
     * 
     * @throws Exception
     */
    protected void connect() throws Exception {
        int reply;

        // Connect to the FTP server
        ftpClient.connect(hostName);
        if (!ftpClient.login(username, password))
            throw new Exception("Fail to log in with the given credentials.");

        log.info("Connected to " + hostName + ".");
        log.info(ftpClient.getReplyString());

        // Check if the connection succeeded
        reply = ftpClient.getReplyCode();
        if (!FTPReply.isPositiveCompletion(reply))
            throw new Exception("Connection to FTP server failed with code "
                    + reply + ".");
    }

        /**
     * Used for mocking.
     * 
     * @return
     */
    protected FTPClient getFTPClient() {
        if (this.ftpClient == null)
            this.ftpClient = new FTPClient();
        return ftpClient;
    }
} 
```

我想编写单元测试来测试这个方法，但我不知道如何测试它。我使用 Mockito 为 FTPClient 实例创建一个模拟对象。首先，我考虑过测试 ftpClient.connect() 调用返回某个异常的不同情况，但我认为这是错误的，因为我通过知道 connect() 方法的实现而不是通过 API 进行测试。在我所做的测试示例中：

```
@Test(expected = SocketException.class)
public void testConnectSocketException() throws Exception {
    downloadInitialFileTasklet.setHostName("hostname");
    doThrow(new SocketException()).when(mockFtpClient).connect("hostname");

    downloadInitialFileTasklet.connect();
} 
```

有人可以向我解释测试这种方法的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:00:24.747

为 FtpClient 类创建一个接口，然后将其包装到您将在生产环境中使用的新类中。

对于测试，您可以实现一个存根（一个假类）或包装的 FtpClient 的模拟对象（我更喜欢第一种方式）。

将 IFtpClient 接口传递给 FtpOperation 类的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:16:38.180

你的测试意味着什么？如果您只是看到 SocketException 没有被捕获，那似乎是一个特殊的测试。

如果您要包装异常，那么它会更有意义。例如。

```
protected void connect() throws FTPException {
    int reply;

    // Connect to the FTP server
    try {
        ftpClient.connect(hostName);
    } catch (IOException e) {
        throw new FTPException(e, "unable to connect to: "+hostname);
    }
    ...
} 
```

通过我们正在测试的测试，如果底层客户端无法连接，连接会提前终止并抛出 FTPException

```
@Test(expected = FTPException.class)
public void ConnectFailsIfExceptionOnClientConnect() throws FTPException {
    // setup
    downloadInitialFileTasklet.setHostName("hostname");
    when(mockFtpClient).connect(any(String.class)).doThrow(new SocketException());

    // verify -- if something else throws an FTP exception later then the verify
    // statements should fail the test because either connect was not called 
    // because or login was
    verify(mockFtpClient).connect(any(String.class));
    verify(mockFtpClient, never()).login(any(String.class), any(String.class));

    downloadInitialFileTasklet.connect();
} 
```

# objective-c - NSFilemanager 委托方法中的 syslog

> ID：10596315
> 
> 赞同：1
> 
> 时间：2012-05-15T07:47:17.447
> 
> 标签：objective-c, cocoa, nsfilemanager, syslog

我正在使用`copyItemAtPath:toPath:error:`复制操作的 方法`fileManager:shouldCopyItemAtPath:toPath:`和. 我没有从委托方法打印任何日志。`fileManager:shouldProceedAfterError:copyingItemAtPath:toPath:`
`NSFilemanager`

但是在控制台应用程序（所有消息）上，我收到了很多日志：

```
reading from FilePath: Is a directory
open on FilePath: No such file or directory
open on FilePath:File exists
Cannot make directory FilePath: File exists 
```

由于`fileManager:shouldProceedAfterError:copyingItemAtPath:toPath:`委托方法，日志即将到来。
**编辑：**
我的应用程序示例：

```
 2534 -[NSFileManager copyItemAtPath:toPath:error:]
          2534 -[__NSOperationInternal start]
            2533 -[NSDirectoryTraversalOperation main]
              1548 -[NSFilesystemItemCopyOperation _handleFTSEntry:]
                817 setattrlist$UNIX2003
                722 copyfile
                  258 lstatx_np$INODE64
                    258 statx1
                      255 __lstat64_extended
                      2 filesec_set_property
                        2 uuid_copy
                      1 malloc
                        1 malloc_zone_malloc
                          1 szone_malloc_should_clear
                            1 tiny_malloc_from_free_list
      ...
                    7 copyfile_stat
                      3 syslog
                        3 vsyslog 
```

`copyItemAtPath:toPath:error:`正在使用 打印日志`syslog`。如何重定向**系统日志**输出？谁能帮帮我？[副本申请样本](https://www.dropbox.com/sh/o5gp1j8eex1b603/z0Ed1mVFK1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:43:23.117

我得到了苹果支持的回复：

> 该问题的行为符合预期。

# cakephp - 如何在 CakePHP 表单助手中显示 --select--

> ID：10596316
> 
> 赞同：-2
> 
> 时间：2012-05-15T07:47:20.980
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

我想使用 CakePHP 表单助手将 --Select-- 显示为默认值，并且默认选择该值。

当前代码：

```
echo $this->Form->month('m');
echo $this->Form->day('d');
echo $this->Form->year('y'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:15:03.057

这比谢赫的回答更正确：

```
echo $this->Form->month('m', array('empty' => __('-- Select --'))); 
```

不需要javascript，将来很容易翻译。这一切都清楚地写在[API 参考中](http://api20.cakephp.org/class/form-helper#method-FormHelpermonth)。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-15T08:32:29.350

你可以使用这个。

```
<script type="text/javascript">
$('#UserCreatedMonth :nth-child(1)').text('-- Select --');
$('#UserCreatedDay :nth-child(1)').text('-- Select --');
$('#UserCreatedYear :nth-child(1)').text('-- Select --');
</script> 
```

# linux-kernel - 如何将bio拆分为多个bio？

> ID：10596317
> 
> 赞同：3
> 
> 时间：2012-05-15T07:47:23.880
> 
> 标签：linux-kernel, device-driver

我想创建一个块设备来获取具有 n 扇区请求的 bio 并将其拆分为具有 1 个扇区的 n bio。我用过`bio_split`，但它不起作用并达到`BUG_ON`.

有什么功能可以做这样的事情吗？

如果没有人可以帮我写一个函数来做到这一点？具有将 bio 拆分为 4k bios 的功能也很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:25:29.950

The split_bio() function only works for bios with a single page (when bi_vcnt field is exactly 1).

To deal with bios with multiple pages - and I suspect you deal with these most of the time - you have to create new bios and set them up so that they contain only a single sector.

Tip: If the sector size is the same as the page size (currently 4K), and your block driver tells the kernel to supply no less than this size, than you only have to put each page from the incoming bio to the new bio. If the sector size is less then the page size, than the logic will be a bit more complicated.

Use bio_kmalloc to allocate the new bios and copy the data onto the memory pages in them manually.

# asp.net-mvc-3 - 如何在 ASP.NET MVC3 的控制器中返回部分视图？

> ID：10596321
> 
> 赞同：2
> 
> 时间：2012-05-15T07:47:49.270
> 
> 标签：asp.net-mvc-3, controller, partial-views

我有一个控制器，它的一种方法（操作）访问我的项目数据库。该方法检查项目类型。仅当从我的数据库中检索到的项目是特定类型时，如何显示我的部分视图？

控制器动作示例：

```
public ActionResult CheckItem(Koko model)
{
    var item = db.Items.Where(item => item.Number == model.Number).First();
    if(item.Type=="EXPENSIVE")
    {
       //show partial view (enable my partial view in one of my Views)
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T07:56:49.880

您可以返回 PartialView 操作结果：

```
public ActionResult CheckItem(Koko model)
{
    var item = db.Items.Where(item => item.Number == model.Number).First();
    if (item.Type=="EXPENSIVE")
    {
        return PartialView("name of the partial", someViewModel);
    }

    ...
} 
```

现在控制器动作将返回部分 HTML。这显然意味着您可能需要使用 AJAX 来调用此控制器操作，否则您将获得部分视图替换当前浏览器窗口。在 AJAX 成功回调中，您可以在 DOM 中重新注入部分 HTML 以查看更新。

# c - 重复数据包

> ID：10596327
> 
> 赞同：0
> 
> 时间：2012-05-15T07:48:12.913
> 
> 标签：c, linux-kernel

我为客户端和服务器制作了两个内核模块，用于传输 pkts。并接受它。唯一的问题是，对于从服务器传输的每个数据包，在客户端和 icmp 重定向都有两个数据包。我在双方都打开了wireshark，服务器显示只传输了一个数据包，而在客户端它显示了两个数据包。此外还有 icmp redirect(host) 的问题。如何删除重复的数据包和 icmp 重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:44:58.100

检查您构建 MAC 标头的方式。

我的猜测是您使用广播目标 MAC 进行传输。结果，正确的机器和另一台（路由器）都获得了数据包。路由器看到您不需要它来到达目的地，因此发送重定向。

# python - 使用 django ORM 对 concat 进行分组

> ID：10596329
> 
> 赞同：1
> 
> 时间：2012-05-15T07:48:14.980
> 
> 标签：python, sql, django, orm

我需要使用 ORM 触发以下查询

```
SELECT GROUP_CONCAT( af.name ) AS item, ac.name AS categories
FROM admin_fooditem af
JOIN admin_category ac ON ( ac.id = af.category_id ) 
GROUP BY ac.id 
```

输出如下

```
item                              Categories

Tuborg beer                       Beverages
Mutter Paneer,Palak Paneer        Vegeterian entries
Coke,Fanta                        Soft drinks 
```

原来的表是

admin_category

```
 id  name    
        11  Softdrinks
        5   Vegeterian Entry
        2   Beverages 
```

admin_fooditem

```
 id  name         category_id
        1   Palak Paneer    5
        2   Mutter Paneer   5
        5   Tuborg beer     2
        6   Coke            11
        7   Fanta           11 
```

我在模板中使用了简单的连接`query(FoodItem.objects.select_related('Category').all())`然后`regroup`标记，但现在我需要上述 sql 的 json 输出，我一无所知，所以我现在使用原始 sql

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:04:54.190

如果您使用的是 django 1.4，则可以调用`prefetch_related()`您的 Categories QuerySet，正如@ColeMaclean 指出的那样，它的效率可能会稍低。

如果您使用的是较旧的 django 版本并且这些查询将被频繁执行，请坚持使用原始 SQL。唯一的另一种方法，`extra()`在 QuerySet 上使用将不起作用，因为您需要自定义 group by 语句（我实际上开始写一个建议使用`extra()`但发现它无法添加 GROUP BY 参数的答案）。

如果没有`prefetch_related()`Cole 的代码，它将在每个类别上命中数据库。通过在生产环境中使用这样的代码，每页可以轻松执行数百个数据库查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:32:32.233

如果你愿意，你可以在 Django 中使用[原始查询](https://docs.djangoproject.com/en/1.4/topics/db/sql/#performing-raw-queries)，但我认为在这种情况下你应该只使用 ORM。它（非常轻微）效率较低，但更容易使用。

例如，只需执行以下操作（未经测试，可能无法正常工作）：

```
json_dict = {}
for category in Category.objects.all():
    json_dict.update({
        'category': category.name,
        'items': ','.join(category.items.values_list('name', flat=True)),
    }) 
```

然后 JSON 编码结果。

# c# - 如何处理目录文件夹中过多的图表控件图像？

> ID：10596330
> 
> 赞同：0
> 
> 时间：2012-05-15T07:48:20.987
> 
> 标签：c#, asp.net, visual-studio-2010

我在 iis6 上部署了一个应用程序。问题是每当我在应用程序中查看图表图像时，程序会自动生成图像并将其存储在我的目录文件夹中。然后当越来越多的人使用该功能时，它会不断积累和积累。

我认为我的 web.config 文件中的存储方法有问题？请帮帮我，我已经尝试了很多方法。如果您需要查看更多代码，请告诉我。

网络配置：

```
 <appSettings>
    <add key="ChartImageHandler" value="storage=file;timeout=1;deleteAfterServicing=false; webDevServerUseConfigSettings=false;"/>
  </appSettings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:32:17.587

有 2 个选项。

1.  您可以使用**value="storage=memory;deleteAfterServicing=true;"** 在您的应用设置中。

2.  如果您担心正在使用 RAM，您可以使用临时目录并手动删除。**值=“url=~/App_Data/ChartImageTemp/;”**

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:16:04.007

如果您设置`deleteAfterServicing=true`，这将清理您的图像文件夹。

从[文档](http://msdn.microsoft.com/en-us/library/dd456629.aspx)：

> *删除后服务*
> 
> 从客户端下载成功后是否应该删除图像。
> 
> 默认值为**true**。

或者，由于默认值为 true，您可以简单地删除该`deleteAfterServicing`设置：

```
<appSettings>
    <add key="ChartImageHandler" 
         value="storage=file;timeout=1;webDevServerUseConfigSettings=false;"/>
</appSettings> 
```

# sql-server - 从 SQLCLR 获取字符串

> ID：10596341
> 
> 赞同：1
> 
> 时间：2012-05-15T07:48:56.633
> 
> 标签：sql-server, string, sqlclr

我需要从各种客户端调用驻留在托管 SQL Server 的 PC 中的外部 DLL 以获得数字签名。

我认为使用 SQLCLR 是个好主意。但我有问题......

我写这个是为了调用 C# dll 中的外部 dll 函数

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void Sign( SqlString receipt, out SqlString signature)
{
    short result=0;
    string arg = "";
    string commPort = "1";
    signature = "";

    bool btrue = true, bfalse = false;

    string CommPort = commPort.ToString();
    string Receipt = receipt.ToString();
    string Signature = signature.ToString();

    ExtDll.Box ExtBox = new Box();
    ExtBox.Sign_(ref CommPort,Receipt,ref result,ref Signature,ref bfalse,ref arg,ref btrue);

    signature = (SqlString)Signature;
} 
```

我为 SQL Server 编写了程序集

```
CREATE ASSEMBLY Mybox 
FROM 'C:\Users\Panos\Documents\Visual Studio 2010\Projects\DigitalSignature\Extbox\bin\Debug\Extbox.dll'   
WITH PERMISSION_SET = UNSAFE 
```

我写了一个存储过程

```
CREATE PROC sp_extbox (@receipt char(2048), @signature char(100) out)
AS
EXTERNAL NAME Mybox.Signatures.Sign 
```

但是当我执行上面的脚本时，我得到

> “sp_extbox”的 CREATE PROCEDURE 失败，因为参数“@receipt”的 T-SQL 和 CLR 类型不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:03:02.330

我相信 SqlString 对应于 nvarchar。

所以，试试这个而不是你当前的最后一个脚本：

```
CREATE PROC sp_extbox (@receipt nvarchar(4000), @signature nvarchar(4000) out)
AS
EXTERNAL NAME Mybox.Signatures.Sign 
```

# c# - 使用 c# 的多个 html 类

> ID：10596348
> 
> 赞同：3
> 
> 时间：2012-05-15T07:49:19.963
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-3, razor

我想在 mvc3 c# 中的表中添加更多类。

我现在有这个：

```
<tr class=@(item.cancelled ? "cancelled" : "")> 
```

是否可以在这里添加一个额外的类，例如：

```
<tr class= "cancelled added"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:51:30.040

```
 <tr class="@(item.cancelled ? "cancelled" : "") added"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:16:12.460

更好的使用方法是这样的：

```
@using (Html.Td(item, isBlocked))
{
    <div>some contents for the td</div>
}

like this:

public static class HtmlExtensions
{
    private class TdElement : IDisposable
    {
        private readonly ViewContext _viewContext;
        private bool _disposed;

        public TdElement(ViewContext viewContext)
        {
            if (viewContext == null)
            {
                throw new ArgumentNullException("viewContext");
            }
            _viewContext = viewContext;
        }

        public void Dispose()
        {
            this.Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!this._disposed)
            {
                _disposed = true;
                _viewContext.Writer.Write("</td>");
            }
        }
    }

    public static IDisposable Td(this HtmlHelper html, ItemViewModel item, bool isBlocked)
    {
        var td = new TagBuilder("td");
        var title = item.Cancelled 
            ? "Cancelled" 
            : item.Confirmed 
                ? isBlocked 
                    ? "blocked date" 
                    : "" 
                : "Confirm needed";

        if (!string.IsNullOrEmpty(title))
        {
            td.Attributes["title"] = title;
        }
        html.ViewContext.Writer.Write(td.ToString(TagRenderMode.StartTag));
        var element = new TdElement(html.ViewContext);
        return element;
    }
} 
```

# c - 将性能从 size_t 转换为两倍

> ID：10596350
> 
> 赞同：28
> 
> 时间：2012-05-15T07:49:22.580
> 
> 标签：c, performance, casting

**TL;DR**：为什么乘法/转换数据`size_t`速度很慢，为什么每个平台会有所不同？

我遇到了一些我不完全理解的性能问题。上下文是一个相机帧采集器，其中以几个 100 Hz 的速率读取和后处理 128x128 uint16_t 图像。

在后处理中，我生成了一个直方图`frame->histo`，它`uint32_t`包含`thismaxval`= 2^16 个元素，基本上我计算了所有强度值。使用此直方图，我计算总和和平方和：

```
double sum=0, sumsquared=0;
size_t thismaxval = 1 << 16;

for(size_t i = 0; i < thismaxval; i++) {
    sum += (double)i * frame->histo[i];
    sumsquared += (double)(i * i) * frame->histo[i];
} 
```

使用配置文件分析代码我得到以下内容（示例、百分比、代码）：

```
 58228 32.1263 :  sum += (double)i * frame->histo[i];
116760 64.4204 :  sumsquared += (double)(i * i) * frame->histo[i]; 
```

或者，第一行占用 32% 的 CPU 时间，第二行占用 64%。

我做了一些基准测试，这似乎是有问题的数据类型/转换。当我将代码更改为

```
uint_fast64_t isum=0, isumsquared=0;

for(uint_fast32_t i = 0; i < thismaxval; i++) {
    isum += i * frame->histo[i];
    isumsquared += (i * i) * frame->histo[i];
} 
```

它的运行速度快了约 10 倍。但是，这种性能影响也因平台而异。在工作站上，Core i7 CPU 950 @ 3.07GHz，代码快了 10 倍。在我的 Macbook8,1 上，它有一个 Intel Core i7 Sandy Bridge 2.7 GHz (2620M)，代码只快 2 倍。

现在我想知道：

1.  为什么原始代码如此缓慢且容易加速？
2.  为什么每个平台的差异如此之大？

**更新：**

我编译了上面的代码

```
g++ -O3  -Wall cast_test.cc -o cast_test 
```

**更新2：**

我通过分析器（Mac 上的[Instruments ，如](https://i.stack.imgur.com/XqQBE.png)[Shark](https://i.stack.imgur.com/yXsKO.png)）运行优化的代码，发现了两件事：

1) 在某些情况下，循环本身需要相当长的时间。`thismaxval`是类型`size_t`。

1.  `for(size_t i = 0; i < thismaxval; i++)`占用我总运行时间的 17%
2.  `for(uint_fast32_t i = 0; i < thismaxval; i++)`占 3.5%
3.  `for(int i = 0; i < thismaxval; i++)`没有出现在分析器中，我认为它小于 0.1%

2) 数据类型和转换事项如下：

1.  `sumsquared += (double)(i * i) * histo[i];`15%（含`size_t i`）
2.  `sumsquared += (double)(i * i) * histo[i];`36%（含`uint_fast32_t i`）
3.  `isumsquared += (i * i) * histo[i];`13%（带`uint_fast32_t i`, `uint_fast64_t isumsquared`）
4.  `isumsquared += (i * i) * histo[i];`11%（带`int i`, `uint_fast64_t isumsquared`）

令人惊讶的是，`int`比`uint_fast32_t`?

**更新4：**

我在一台机器上用不同的数据类型和不同的编译器运行了更多测试。结果如下。

对于 testd 0 -- 2 相关代码是

```
 for(loop_t i = 0; i < thismaxval; i++)
        sumsquared += (double)(i * i) * histo[i]; 
```

对于测试 0、1 和 2，使用`sumsquared`double 和`loop_t` `size_t`, `uint_fast32_t`and 。`int`

对于测试 3--5，代码是

```
 for(loop_t i = 0; i < thismaxval; i++)
        isumsquared += (i * i) * histo[i]; 
```

`isumsquared`类型为and `uint_fast64_t`，`loop_t`用于测试3、4`size_t`和5。`uint_fast32_t``int`

我使用的编译器是 gcc 4.2.1、gcc 4.4.7、gcc 4.6.3 和 gcc 4.7.0。时间是代码总 cpu 时间的百分比，所以它们显示的是相对性能，而不是绝对的（尽管运行时间在 21 秒时相当稳定）。cpu 时间是两行的，因为我不太确定分析器是否正确分离了这两行代码。

```
海湾合作委员会：4.2.1 4.4.7 4.6.3 4.7.0
----------------------------------
测试0：21.85 25.15 22.05 21.85
测试1：21.9 25.05 22 22
测试2：26.35 25.1 21.95 19.2
测试 3：7.15 8.35 18.55 19.95
测试4：11.1 8.45 7.35 7.1
测试 5：7.1 7.8 6.9 7.05

```

或者：

![铸造性能](../Images/08603020af576f67083e91563091efe9.png)

基于此，无论我使用什么整数类型，转换似乎都很昂贵。

此外，gcc 4.6 和 4.7 似乎无法正确优化循环 3（size_t 和 uint_fast64_t）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:47:36.183

对于您的原始问题：

1.  代码很慢，因为它涉及从整数到浮点数据类型的转换。这就是为什么当您也为总和变量使用整数数据类型时它很容易加速，因为它不再需要浮点转换。
2.  差异是几个因素的结果。例如，它取决于平台执行 int->float 转换的效率。此外，这种转换还可能会扰乱程序流和预测引擎、缓存等处理器内部的优化，而且处理器的内部并行化特性也会对此类计算产生巨大影响。

对于其他问题：

*   “令人惊讶的是 int 比 uint_fast32_t 快”？你平台上的 sizeof(size_t) 和 sizeof(int) 是多少？我可以做出的一个猜测是，两者都可能是 64 位，因此转换为 32 位不仅会给您带来计算错误，而且还包括不同大小的转换惩罚。

一般来说，如果不是真的需要，尽量避免可见和隐藏的演员表。例如，尝试找出在您的环境 (gcc) 中隐藏在“size_t”后面的真实数据类型，并将该数据类型用于循环变量。在您的示例中，uint 的平方不能是 float 数据类型，因此在这里使用 double 是没有意义的。坚持使用整数类型以实现最大性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:59:39.037

On x86, the conversion of `uint64_t` to floating point is slower because there are only instructions to convert `int64_t`, `int32_t` and `int16_t`. `int16_t` and in 32-bit mode `int64_t` can only be converted using x87 instructions, not SSE.

When converting `uint64_t` to floating point, GCC 4.2.1 first converts the value as if it were an `int64_t` and then adds 2^(64) if it was negative to compensate. (When using the x87, on Windows and *BSD or if you changed the precision control, beware that the conversion ignores precision control but the addition respects it.)

An `uint32_t` is first extended to `int64_t`.

When converting 64-bit integers in 32-bit mode on processors with certain 64-bit capabilities, a store-to-load forwarding issue may cause stalls. The 64-bit integer is written as two 32-bit values and read back as one 64-bit value. This can be very bad if the conversion is part of a long dependency chain (not in this case).

# c# - mysql不会从C#中保存双倍

> ID：10596351
> 
> 赞同：0
> 
> 时间：2012-05-15T07:49:23.847
> 
> 标签：c#, mysql, database

我在 C# 中有一个 double 值，我想将它们放入数据库中。

问题是我已经尝试了数据库中的所有格式，但我仍然得到一个数字来签署 DOT。例如，如果我有一个数字 45.548，它将在数据库中保存为 45 当我调试代码时，我可以看到该值实际上是作为 45.548 发送的。

这是我的代码，因此您可以查看可能出了什么问题：

```
MySqlConnection con = null;
MySqlCommand cmd = null;

con = new MySqlConnection("server=localhost;database=Data_GPS;uid=root;pwd=******");
con.Open();
cmd = new MySqlCommand("insert into Data values (null, ?Parname , ?Parname2, ?Parname3);", con);
cmd.Parameters.AddWithValue("?Parname", deciLat);
cmd.Parameters.AddWithValue("?Parname2", deciLon);
cmd.Parameters.AddWithValue("?Parname3", time);
cmd.ExecuteNonQuery();

con.Close(); 
```

我试图用 float、double、decimal、varchar 更改数据库中的格式，但我仍然没有得到正确的数字。

谢谢

编辑：

这就是我填充十进制值的方式：

```
string[] arrLon = Lon.Split(new char[] { '°', '"' }, StringSplitOptions.RemoveEmptyEntries);
double dblLon = double.Parse(arrLon[0]) + double.Parse(arrLon[1], new System.Globalization.NumberFormatInfo()) / 60;
double deciLon = arrLon[2] == "E" ? dblLon : -dblLon;
string[] arrLat = Lat.Split(new char[] { '°', '"' }, StringSplitOptions.RemoveEmptyEntries);
double dblLat = double.Parse(arrLat[0]) + double.Parse(arrLat[1], new System.Globalization.NumberFormatInfo()) / 60;
double deciLat = arrLat[2] == "N" ? dblLat : -dblLat; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:01:39.930

这应该有效：

```
 using (MySqlConnection con = new MySqlConnection("server=localhost;database=Data_GPS;uid=root;pwd=******")
  {
        con.Open();
        using (MySqlCommand  cmd = new MySqlCommand("insert into Data values (null, @Parname , @Parname2, @Parname3);", con)
        {
            // change MySqlDbType.Double to reflect the real data type in the table.
            cmd.Parameters.Add("@Parname", MySqlDbType.Double).Value = deciLat;
            cmd.Parameters.Add("@Parname2", MySqlDbType.Double).Value = deciLon;
            cmd.Parameters.Add("@Parname3", MySqlDbType.DateTime).Value = time;
            cmd.ExecuteNonQuery();
        }
  } 
```

总是把你的连接和命令放在里面`using`，以确保你释放所有对象而不需要明确的`Dispose()`命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:56:05.337

不幸的是，我没有机会检查我的想法，但这对你来说应该很容易。如果您通过创建其实例并设置其 MySqlDbType 属性来手动添加参数怎么办？然后设置它的值：

```
MySqlParameter par = new MySqlParameter()
par.ParameterName = parameterName;
par.MySqlDbType = parameterType;
par.Value = someValue;

.... 
```

# android - 墙贴没有出现在我的应用程序发布的 Facebook 上：Android

> ID：10596353
> 
> 赞同：1
> 
> 时间：2012-05-15T07:49:28.023
> 
> 标签：android, facebook, facebook-wall

我在我的应用程序中使用[Facebook API](https://github.com/facebook/facebook-android-sdk)将消息发布到墙上。一切正常，但是当我在一个排序时间间隔内多次发布消息时，墙上的帖子不会出现在墙上。我确信发布时不会发生任何异常。

我对我的应用程序使用“离线访问”权限。

代码 ：

```
public static class UpdateWalls extends AsyncTask<String, Integer, Boolean> {
        private Context context;
        private String post;

        public UpdateWalls(Context context, String post) {
            this.context = context;
            this.post = post; 
        }

        @Override
        protected Boolean doInBackground(String... strings) {

            FacebookConnector facebookConnector = new FacebookConnector(Constants.FACEBOOK_APPID, context, Constants.FACEBOOK_PERMISSION);
            try {
                facebookConnector.postMessageOnWall(this.post);
            } catch (Exception e) {
                return false;
            }           
            return true;
        }   
    } 
```

和*FacebookConnector.postMessageOnWall() 是*

```
public void postMessageOnWall(String msg) {
        if (facebook.isSessionValid()) {
            Bundle parameters = new Bundle();
            parameters.putString("message", msg);
            try {
                String response = facebook.request("me/feed", parameters,"POST");
                Log.i("Facebook wall post", "While posting to wall response = " + response);

                //System.out.println(response);
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else {
            //login();
        }
    } 
```

这是一个已知问题还是其他问题？请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:22:57.133

在大多数情况下，即使请求失败，Facebook API 也不会抛出异常。错误状态由对调用的响应返回。在此行中：

```
Log.i("Facebook wall post", "While posting to wall response = " + response); 
```

您正在编写带有响应的日志。那是什么反应？墙柱成功时与失败时相比是什么？

似乎 facebook 拒绝请求的速度太快了，请参阅[此问题](https://stackoverflow.com/questions/6492552/facebook-api-limits)以获取有关 API 限制的简短但可能已过时的讨论。如果您收到的回复表明您提出的请求过多，您可以添加延迟并重试。

# c# - 除法后四舍五入，数据表数据列

> ID：10596354
> 
> 赞同：1
> 
> 时间：2012-05-15T07:49:30.957
> 
> 标签：c#, datacolumn

我想在除法后四舍五入列值：

```
 DataColumn maxSpend = new DataColumn();
    maxSpend.DataType = System.Type.GetType("System.Double");
    maxSpend.Expression = string.Format("{0:0.00} / price", this.maxSpend); 
```

有可能以某种方式在列表达式中使用 Math.floor() 还是有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:15:01.900

DataColumn-Expressions 中不允许使用 .NET 函数。最简单的方法是首先在 dbms 中执行此操作（如果您正在使用）。

例如在[SQL-Server](http://msdn.microsoft.com/en-us/library/ms178531.aspx)中：`SELECT FLOOR(MaxSpend/Price)AS MaxSpend ...`.

另一种方法是循环通过 DataRows。例如：

```
foreach (DataRow row in tbl.Rows)
{
    double price    = row.Field<double>("price");
    row["maxSpend"] = Math.Floor(this.maxSpend / price);
} 
```

# php - 如何获取PHP二进制的post数据

> ID：10596356
> 
> 赞同：2
> 
> 时间：2012-05-15T07:50:00.773
> 
> 标签：php, post, binary

我想将一些二进制数据发布到 PHP。
我知道我可以使用 php://input 或 $HTTP_RAW_POST_DATA 来阅读它。
但它只能发布一个二进制数据。
我想发布两个键值数据，它们各自的值是二进制的。
我们如何在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T07:52:24.807

[**`base64_encode()`**](http://php.net/manual/en/function.base64-encode.php)您可以使用和对您的二进制数据进行 Base64 编码[**`base64_decode()`**](http://php.net/manual/en/function.base64-decode.php)。

> 当需要对需要通过旨在处理文本数据的媒体存储和传输的二进制数据进行编码时，通常使用 Base64 编码方案。

例如，您可以发布：

```
key1=eW91cmJpbmFyeWRhdGE=&key2=YmluYXJ5YWdhaW4= 
```

在你的 PHP 中：

```
$myBinaryData1 = base64_decode($_POST['key1']);
$myBinaryData2 = base64_decode($_POST['key2']); 
```

# android - 为什么按下搜索按钮时对话框消失

> ID：10596359
> 
> 赞同：2
> 
> 时间：2012-05-15T07:50:08.630
> 
> 标签：android, dialog

在我的应用程序中，我试图在活动开始时打开一个对话框，并且它有一个肯定按钮。单击该按钮将打开一个新活动。使用以下代码可以正常工作。但是当我长按菜单按钮或搜索按钮时，对话框会消失。即使按菜单或搜索按钮，如何使此对话框保持不变。谢谢。

```
public class Sam3Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView title = new TextView(this);
    title.setText("DM2");
    title.setBackgroundColor(Color.DKGRAY);
    title.setPadding(10, 10, 10, 10);
    title.setGravity(Gravity.CENTER);
    title.setTextColor(Color.WHITE);
    title.setTextSize(20);
    /* alert message */
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setCustomTitle(title);

    builder.setMessage("dialog with message").setCancelable(false).setPositiveButton(
            "Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.dismiss();
                    Log.d("choose","on dissmiss");
                startActivity(new Intent(getApplicationContext(),
                                                              StatisticDisplay.class));//second activity
                }
            });
    AlertDialog alert = builder.create();

    alert.show();
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:03:32.390

通过将 附加`onKeyListener`到 来处理按下的键`Dialog`，在我的示例中，我只是处理搜索键，但您应该明白这一点。如果您从未使用过这样的侦听器，`true`则返回意味着事件不应**传播**，因此`search`在显示对话框时防止系统在按下时捕获键。

在任何其他情况下（键不是`KEYCODE_SEARCH`），它只会传递此侦听器，就好像它不存在一样。:)

```
... 
builder.setOnKeyListener(new OnKeyListener(){
            @Override
            public boolean onKey(DialogInterface dialog, 
                                 int keyCode,
                                 KeyEvent event) {
                if (keyCode == KeyEvent.KEYCODE_SEARCH ) return true;
                return false;
            }
        });
... 
```

相关文件：

*   [按键事件](http://developer.android.com/reference/android/view/KeyEvent.html)

# google-maps - 如何让谷歌地图自动读取输入

> ID：10596362
> 
> 赞同：0
> 
> 时间：2012-05-15T07:50:11.883
> 
> 标签：google-maps, google-maps-api-3

我正在构建一个站点（类似于黄页），用户将首先从其国家 > 州 > 城市的下拉菜单中进行选择。然后他们将被提示在谷歌地图上标记自己的位置（或将市场拖到准确的位置）。如何将从下拉菜单中选择的城市发送到地图中，以便显示城市的放大图而不是全球地图。

如果没有下拉菜单数据库中的经度和纬度，我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:55:32.857

您必须向 google maps api 发出地理编码请求，并在下拉列表中获取地址的坐标，然后使用结果在该地址上缩放地图。

阅读[谷歌地图文档](https://developers.google.com/maps/documentation/javascript/geocoding)中的地理编码。您会在那里找到使用示例以及您需要的任何内容。

要获取下拉列表的值并将其传递给 js 以向谷歌地图发出请求，您将需要[这个函数](http://www.tizag.com/javascriptT/javascript-getelementbyid.php)。

# ios - 如何在 iTunes Store App 描述中显示更多语言？

> ID：10596366
> 
> 赞同：2
> 
> 时间：2012-05-15T07:50:21.783
> 
> 标签：ios, itunes, itunes-store

我的应用程序如何在 iTunes AppStore 中显示不止一种语言？我的应用程序被翻译成 5 种语言，但是当我将它上传到 iTunesConnect 时，它并没有显示 iTunes 中的其他语言，只有英语。我附上了一张应用程序的图片，显示它支持更多语言： http: [//msf-invest.com/images/pic1.png](http://msf-invest.com/images/pic1.png)

那么我该如何做同样的事情 - 我的应用程序可以显示其他语言（例如英语、俄语、德语）。我的意思是我的应用程序被翻译成的所有语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:25:25.433

如果您已经翻译了应用程序，并且您的项目设置被设置为支持多种本地化（请参阅我的一个项目的屏幕截图），那么它应该会显示出来。请确保项目已本地化。

![本地化项目](../Images/8927a278d0037d152cc99bdbec2783da.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:55:10.540

您如何管理翻译？如果您使用的是 NSLocalizedString 宏，则每种语言都需要一个 Localized.strings 文件。
只需将翻译文件夹（包含每个 Localized.strings 文件）添加到您的项目中：en.lproj、fr.lproj、... iTunes 会自动识别这些。

# c# - 泛型：如何实现：“其中 T 派生自 xxx”

> ID：10596367
> 
> 赞同：2
> 
> 时间：2012-05-15T07:50:26.687
> 
> 标签：c#, generics

我想使用一个泛型类并强制它的一个参数从某个基类派生。就像是：

```
public class BaseClass { }
public class DerivedClass : BaseClass { }          
public class Manager<T> where T : derivesfrom(BaseClass) 
```

我现在这样做的方式是在构造函数中运行时：

```
public class Manager<T> where T : class
{
    public Manager()
    {
        if (!typeof(T).IsSubclassOf(typeof(BaseClass)))
        {
            throw new Exception("Manager: Should not be here: The generic type should derive from BaseClass");
        }
    }
} 
```

有没有办法在编译时做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T07:51:59.837

你几乎拥有它：

```
public class Manager<T> where T : BaseClass 
```

[在此处](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)阅读有关通用约束的所有信息。

# iphone - 如何在iphone的图形中给出来自数组的动态值

> ID：10596368
> 
> 赞同：-1
> 
> 时间：2012-05-15T07:50:27.870
> 
> 标签：iphone, objective-c

我正在使用 EASYGRAPH 在 iphone 应用程序中创建图形问题是它获取静态值并显示图形我希望值应该是来自该图形的视图控制器的动态值。

图形的 UIView

```
 #import <UIKit/UIKit.h>
 #import "ECGraph.h"
 #import "ECGraphItem.h"
@class GraphsViewController;
@interface Display : UIView {

NSArray *percentages;

}

 @property(nonatomic,retain)NSArray*percentages;

 -(void) setPercentageArray:(NSArray*) array;

@end

  #import "Display.h"
  #import "ECGraph.h"
  @implementation Display
  @synthesize percentages;

 - (id)initWithFrame:(CGRect)frame {

  self = [super initWithFrame:frame];
  if (self) {
    // Initialization code.
  }
  return self;
  }

   - (void)drawRect:(CGRect)rect {

CGContextRef _context = UIGraphicsGetCurrentContext();
ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(300,500,320,200) withContext:_context isPortrait:NO];

//300,500,320, 200

ECGraphItem *item1 = [[ECGraphItem alloc] init];

ECGraphItem *item2 = [[ECGraphItem alloc] init];    
item1.isPercentage = YES;
item1.yValue=80;
item1.width = 35;
item1.name = @"item1";
item2.isPercentage = YES;
item2.yValue =17;
item2.width = 35; 
item2.name = @"item2";

NSArray *items = [[NSArray alloc] initWithObjects:item1,item2,nil];

[graph setXaxisTitle:@"name"];
[graph setYaxisTitle:@"Percentage"];
[graph setGraphicTitle:@"Histogram"];
[graph setDelegate:self];
[graph setBackgroundColor:[UIColor colorWithRed:220/255.0 green:220/255.0 blue:220/255.0 alpha:1]];

[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:06:23.327

首先创建一个包含宽度和高度两个属性的类。然后使用 addObject 将其添加到数组中。现在每个对象都有单独的高度和宽度值。

然后用这个

```
for(Item* theObj in arrayItems)
{//arrayItems is the array in which you have added the objects height and width
  ECGraphItem *tempItem = [[ECGraphItem alloc] init];    
  tempItem.isPercentage = YES;
  tempItem.yValue=theObj.height;
  tempItem.width = theObj.widht;
  tempItem.name = [NSString stringWithFormat@"Item: %d",/*set some number here*/];

  [items addObject:tempItem];
} 
```

然后将其传递给图形

```
[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]]; 
```

# java - Java Applet 退出，一段时间后托盘图标消失，是否有任何超时设置？

> ID：10596369
> 
> 赞同：0
> 
> 时间：2012-05-15T07:50:31.273
> 
> 标签：java, browser, applet, timeout, trayicon

当我在浏览器（IE7，Windows XP）中关闭Java Applet（java 1.6.23）时，例如通过javascript 为什么java.exe和Java托盘图标在某个时间（一分钟左右）后被删除？有没有可以在某处设置的超时值？

我们有时会遇到小程序的性能问题，有时小程序会完全冻结：这就是我正在调查这个“超时”问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:14:35.397

> 有没有可以在某处设置的超时值？

从来没听说过。这真的取决于浏览器/JRE 组合。决定何时结束 VM。

此外，如果小程序有问题，将无法通过设置“超时”来解决。

# opa - 如何操作客户端连接

> ID：10596372
> 
> 赞同：1
> 
> 时间：2012-05-15T07:50:47.477
> 
> 标签：opa

我正在使用 Opa 制作在线多人游戏，并且对如何操作客户端连接有一些疑问。

这是我的代码摘录：

```
function game_view(){
    function page_ready(){
        // observe game messages
        _ = Network.observe(game_msg_received,game_channel);

        // set disconnect function
        _ = ClientEvent.set_on_disconnect_client(function(c){
            //do something when client is disconnected  
            ...
        });
    }

    <div onready={function(_){ page_ready() }}>
        //page content
        ...
    </div>
} 
```

1.  关闭选项卡或窗口后，断开连接功能大约 2 分钟生效（我猜是 4 次 ping 失败的时间），对于我的情况来说太长了，我可以调整它吗？如何调整？

2.  当我离开此页面（关闭标签或跳转到其他页面）时，一段时间后会出现一些错误消息，如下所示：

[SESSION] 未捕获的异常：“{OpaRPC_Server: {timeout: {client: {client: $"46rrpwmeiq28ql0d8lgz7e35zt8d701c"$; page: $934885115$}; fun_id: $"__set_game_Mygame"$}}}" 跳过以下消息。：如果你想要 (msg, st, ctx) 调试打印设置调试变量 session_debug >= 200

我认为这是因为该页面不再存在但功能'game_msg_received'仍然尝试在收到游戏消息时通知此页面，那么我该如何避免这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:34:49.737

1 - 您无法更改断开延迟，但也许您可以使用非活动事件。

如果客户端没有从服务器的角度来看的活动（rpc 调用、发送消息等），则会引发此事件

用于`ClientEvent.set_on_inactive_client`为非活动事件注册回调并`ClientEvent.set_inactivity_delay`更改持续时间。

2 - 确实是因为该页面不再存在。您应该从网络中删除您的观察者。用于`Network.unobserve`此。

最后你的代码应该是这样的

```
// set default inactive delay
// or if you change the 1st params 
// you can set for a specific client 
ClientEvent.set_inactive_delay(none, /*wanted delay*/)

function page_ready(){
    // observe game messages
    obs = Network.observe(game_msg_received,game_channel);

    // set inactive function
    _ = ClientEvent.set_on_inactive_client(function(c){
        // remove the observer
        Network.unobserve(obs);
        //do something when client is disconnected  
        ...
    });
} 
```

# validation - 我想使用java代码而不是javascript来验证手机号码

> ID：10596373
> 
> 赞同：-3
> 
> 时间：2012-05-15T07:50:48.933
> 
> 标签：validation

我正在使用 Struts 的验证功能。所以我想验证10位数的手机号码，手机号码的每个数字都必须是整数。

我使用`mobileno.contains()`了方法，但我没有正确实现功能。

```
<tr>
                <td align="left" valign="middle" nowrap><bean:message key="sp.mbno"/></td>
                <td nowrap align="left" ><html:text property="mobileno" name="reg"/></td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:53:21.817

```
/*
     * Returns true if string contains atlesat one alphabet(lowercase or uppercase).
     */
    public static boolean containsAtLeastOneAlphabet(String str)
    {
        int x;
        for(int j = 0 ; j < str.length() ; j++)
        {
            x = (int)str.charAt(j);
            if((x >= 65 && x <= 90) || (x >= 97 && x <= 122))
                return true;
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:54:50.603

您可以为此使用 apache StringUtils。这是一个方便的字符串操作工具集：

例如，看看 StringUtils.isNumeric 的 API：

[http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#isNumeric%28java.lang.String%29](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#isNumeric%28java.lang.String%29)

# jquery - Jquery 数据属性作为选择器

> ID：10596379
> 
> 赞同：0
> 
> 时间：2012-05-15T07:51:40.567
> 
> 标签：jquery

我输入了一些给定或空的“数据文件”：

```
<input type="text" value="path/to/file.gif" name="some_file" data-fileid=".selector" data-file="/path/to/file.gif"> 
```

取消：

```
<button class="cancel" type="button" accesskey="c">Cancel</button> 
```

我正在操作文本字段以插入图像，这很好，但是在通过数据属性进行操作时，按钮不起作用：

```
 var inputBg = $('fieldset:visible input[name*="file"]');

        var dataOld = inputBg.data('file');
        var dataSel = inputBg.data('fileid');

        $('.cancel').click(function() {
          $(inputBg).val(dataOld); // revert to old stored value if any
          $(dataSel).css('background', 'none'); // remove background from .selector
        }); 
```

我正在使用 jquery.ui.tabs，这就是为什么我有：“fieldset：visible”。
但是取消按钮不起作用。知道缺少什么吗？谢谢

更新：发现问题，我必须绑定到 ui.tabs，但仍在寻找其他路线的建议，因为我的绑定不是防弹的。我必须做重复:(我还必须将“数据文件”上的相对路径更改为绝对路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:47:09.833

我必须做 ui.tabs 内外的按钮。关于复制，我可以创建另一个用于任何调用的函数。

如果有更好的答复，我会将其更改为答案。谢谢大家

# objective-c - 无法从 .der 文件中获取 SecKeyRef 是 MD5 签名

> ID：10596381
> 
> 赞同：1
> 
> 时间：2012-05-15T07:51:46.017
> 
> 标签：objective-c, md5, public-key, der

我试图从给定的 .der 文件中获取 SecKeyRef，我研究并发现了一些有用的代码，但是 SecCertificateCreateWithData 方法总是返回 nil，我猜根本原因是 .der 文件是 MD5 签名，因为我试图使用没有 MD5 或 SHA 签名的 openssl 创建一个新密钥，然后我可以将密钥导入 KeyChain 并成功获取 SecKeyRef。

所以任何人都有这方面的经验，请帮助我如何解决这个问题，在此先感谢。

# c# - 带有数据适配器的存储过程，抛出 SerializationException

> ID：10596382
> 
> 赞同：0
> 
> 时间：2012-05-15T07:51:54.517
> 
> 标签：c#, serialization, stored-procedures, data-access-layer, dataadapter

我正在运行这段代码，基本上我有一个存储过程，它将新行插入表中`member`。我已经发布了从 C# 调用存储过程的方法的代码以及我调用该方法的代码：

存储过程：

```
[AutoComplete(true)]
public void AddNewMember(Member cm)
{
   SqlCommand cmd = new SqlCommand();
   SqlDataAdapter da = new SqlDataAdapter();

   try
   {
       this.Connection.BeginTransaction();

       this.InitializeConnection();

       cmd = new SqlCommand("sp_addNewMember", this.Connection);
       cmd.Parameters.Add(new SqlParameter("@memberID", cm.MemberID));
       cmd.Parameters.Add(new SqlParameter("@userID", cm.UserID));
       cmd.Parameters.Add(new SqlParameter("@dateJoined", cm.DateJoined));
       cmd.Parameters.Add(new SqlParameter("@Duties", cm.Duties));

       cmd.CommandType = CommandType.StoredProcedure;

       da.InsertCommand = cmd;

       ContextUtil.SetComplete();
    }
    catch (Exception ex)
    {
        ContextUtil.SetAbort();
    } 
```

调用方法：

```
DataLayer.Member cm = new DataLayer.Member();
cm.MemberID = Guid.NewGuid();
cm.UserID = new Guid(txtUserID.Text);
cm.DateJoined = Convert.ToDateTime(txtDateJoined.Text);
cm.Duties = txtDuties.Text;

DataLayer.AddMember acm = new DataLayer.AddMember();
acm.AddNewMember(cm); 
```

`acm.AddNewMember()`上线抛出的异常：

> System.Runtime.Serialization.SerializationException：找不到程序集“DataLayer，版本=1.0.0.0，Culture=neutral，PublicKeyToken=536d0c71bd79a82e”

请问有人知道是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:57:35.937

您需要查看异常的 InnerException 以及异常的“详细信息”。将代码剥离到仅插入数据部分。我不知道 ContextUtil 做什么。将数据保存到 sql server 不需要序列化。我认为执行序列化是函数中的其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:39:16.547

在我看来，它像配置问题。您的代码没有多大帮助。

我猜`DataLayer`是你的类在你的 DataLayer.dll 中的某个地方。这段代码在哪里调用？在网络服务上？你从哪里得到你的例外？在客户端应用程序上？

如果是这样，那么您可能会遇到完全不同的异常，这只是将其发送到客户端应用程序的问题。

# javascript - 如何使用googlemap api 3在javascript中仅显示钦奈地图

> ID：10596383
> 
> 赞同：0
> 
> 时间：2012-05-15T07:51:54.747
> 
> 标签：javascript, html, google-maps

我正在使用 Google map Api 3 创建 javascript 应用程序。任何人都可以建议我如何仅显示 chennai 的 google 地图。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:55:41.283

可以使用自定义拼贴来执行此操作 - 根据此示例[texus 自定义拼贴](http://maps.forum.nu/gm_texas.html)

# r - 获取 xts 时间序列中不规则间距的下 N 个条目

> ID：10596387
> 
> 赞同：0
> 
> 时间：2012-05-15T07:52:03.550
> 
> 标签：r, time-series, finance, xts

我想写一个函数来应用： lapply(new_data,ALGO)

它应该在该特定条目之前和之后进行 15 个条目，然后进行一些计算，返回一个数字。到目前为止，我所做的是：

```
ALGO <- function(y1) {
  nd.in.y1 <- .indexday(new_data) %in% .indexday(y1)
  low <- last(new_data[nd.in.y1 & index(new_data) < index(y1)],15)
  high <- first(new_data[nd.in.y1 & index(new_data) > index(y1)],15)
  ccc <- rbind(low,high)
  # ...
  # Make some calculations
  # ...
  return(number)
} 
```

有没有更有效的方法来访问这些条目？类似于访问函数内时间序列的原始数字索引？

我认为对大数据进行子集化代价高昂，相反只给出前 15 个应该非常快。

# php - 使 php 响应在页面刷新时保持可见

> ID：10596393
> 
> 赞同：3
> 
> 时间：2012-05-15T07:52:24.233
> 
> 标签：php, jquery

在我的登录脚本中一切正常。我在我的 div (id=login_reply) 中得到了正确的响应，并且会话开始了。但是每当我刷新页面时，login_reply 就消失了。我怎样才能保留 login_reply？谢谢！

这是php：

```
if (isset($_POST['username'], $_POST['password']))
{
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string(md5($_POST['password']));

    $check = mysql_query("SELECT * FROM `userbase` WHERE `user_name` = '$username'");
    if (mysql_num_rows($check) > 0)
    {
        while ($row = mysql_fetch_assoc($check))
        {
            $user_id = $row['user_id'];
            $user_name = $row['user_name'];
            $user_email = $row['user_email'];
            $user_password = $row['user_password'];

            if ($password == $user_password)
            {
                $_SESSION['user_id'] = $user_id;
                if (isset($_SESSION['user_id']) && $_SESSION['user_id'] != '')  
                    echo "Welcome back '$user_name'!";
                else
                {
                    echo 'no';
                }

            }
            else
                echo 'no';
        }
    }
    else
        echo 'no';  
} 
```

这是 jQuery

```
$(document).ready(function()
{

$('#login').click(function()
{
    var username = $('#username').val();
    var password = $('#password').val();

    $.ajax(
    {
        type: 'POST',
        url: 'php/login.php',
        data: 'username=' +username + '&password=' + password,
        success: function(data)
        {
            if (data != 'no')
            {
                $('#logform').slideUp(function()
                {
                    $('#login_reply').html(data).css('color', 'white');
                });
            }
            else                    
                $('#login_reply').html('Invalid username or password').css('color', 'red');
        }
    });
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:10:57.567

问题是 JS 只是客户端脚本语言 - 它仅在客户端浏览器上处理。

如果您想使用 AJAX 登录，可以，但是您必须将登录用户的值存储到会话（或 cookie）中。然后在每次页面加载时，您将检查该会话或 cookie 是否已设置并存在，如果存在，您将在登录后写下与 jQuery 对应的 HTML...

换句话说，您将执行以下操作：

1.  页面加载 - 用户未登录
2.  用户填写登录凭据并单击“登录”
3.  您检查该用户是否存在，如果存在，则保存`$_SESSION['username']`（例如）
4.  在 AJAX 中你填写`$('#login_reply')`
5.  用户点击您网站中的某些链接
6.  您检查您是否有一个值（或设置了索引）`$_SESSION['username']`
7.  如果是，通过 PHP 您将填写#login_reply div，如果不是，您将显示登录表单...

希望这可以帮助...

**EDIT1**：您还应该以客户端浏览器上没有 JS 工作（禁用）的方式实现登录功能，因此应该考虑正常的 POST...

**EDIT2**：我还想指出一些一般的编程错误......

这是您添加了我的评论的代码：

```
if (isset($_POST['username'], $_POST['password']))
{ // <-- This is a .NET style of writing the brackets that I don't like much and I guess PHP don't like .NET either :-)
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string(md5($_POST['password']));

    $check = mysql_query("SELECT * FROM `userbase` WHERE `user_name` = '$username'"); // <-- mysql_* method calls should be replaced by PDO or at least mysqli
    // Also the query could be improved
    if (mysql_num_rows($check) > 0)
    {
        while ($row = mysql_fetch_assoc($check)) // <-- why calling while when You expect ONLY one user to be found?
        {
            $user_id = $row['user_id'];
            $user_name = $row['user_name'];
            $user_email = $row['user_email'];
            $user_password = $row['user_password']; // <-- What are these last 4 lines good for? This is useless...

            if ($password == $user_password) // <-- this condition SHOULD be within the SQL query...
            {
                $_SESSION['user_id'] = $user_id;
                if (isset($_SESSION['user_id']) && $_SESSION['user_id'] != '')  // <-- this condition is useless as You have just set the session variable... 
                // ALSO, if You use brackets with else it is good to use brackets also with if
                    echo "Welcome back '$user_name'!";
                else
                {
                    echo 'no';
                }

            }
            else
                echo 'no';
        }
    }
    else
        echo 'no';  
} 
```

这是我重写的代码（仍然使用 mysql_*，对此感到抱歉）：

```
if (isset($_POST['username'], $_POST['password'])) {
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string(md5($_POST['password']));

    $check = mysql_query("SELECT * FROM `userbase` WHERE `user_name` = '{$username}' AND `user_password` = '{$password}' LIMIT 1"); // <-- We check whether a user with given username AND password exists and we ONLY want to return ONE record if found...
    if ($check !== false) {
        $row = mysql_fetch_assoc($check);

         $_SESSION['user_id'] = $row['user_id'];

         echo "Welcome back '{$row['user_name']}'!";
    } else {
        echo 'no';
    }
} else
    echo 'no';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:16:27.467

最简单的解决方案是使用 cookie：

在 PHP 方面，您声明并删除 cookie：

```
<?php
if (!isset($_COOKIE['new_one']) ) {
  setcookie('new_one', "ole", 0, "/");
  echo "logged in";
}
else {
  setcookie('new_one', null);
  echo "logged out";
}
?> 
```

在 jQuery 客户端：

```
$(document).ready(function() {
  if ($.cookie("new_one") === "ole") {
    $('#login_reply').html("Show msg only when the server sets the cookie.");
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:01:30.483

您需要将您的登录回复数据存储在您的服务器或会话中的某个位置；javascript 是一种客户端语言，因此在刷新之间不会保留任何获得的值。

我建议您存储结果，然后在使用 php 生成页面时检查它是否存在；如果是，请填写数据..等。

# sencha-touch - 在 Sencah Touch 2 搜索列表中需要帮助

> ID：10596404
> 
> 赞同：2
> 
> 时间：2012-05-15T07:53:27.853
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我在构建煎茶搜索列表时无法达到我想要的确切结果，我设法只构建了一个列表，但我想要的实际结果就像这样[http://docs.sencha.com/touch/2-0/ #!/example/search-list](http://docs.sencha.com/touch/2-0/#!/example/search-list)我已经按照示例构建了类似的东西，但是我的 serach 无法正常工作，希望有人可以详细回答我如何实现这一点。下面是我从控制器到最后的代码。

这是我的控制器 Ext.define('List.controller.Main', { extend: 'Ext.app.Controller',

```
config: {
    refs: {
        main: 'mainpanel'
    },
    control: {
        'presidentlist': {
            disclose: 'showDetail'
        }
    }
},

showDetail: function(list, record) {
    this.getMain().push({
        xtype: 'presidentdetail',
        title: record.fullName(),
        data: record.getData()
    })
} 
```

}); 这是我的模型

```
Ext.define('List.model.President', {
extend: 'Ext.data.Model',
config: {
    fields: ['firstName', 'middleInitial', 'lastName']
},

fullName: function() {
    var d = this.data,
    names = [
        d.firstName,
        (!d.middleInitial ? "" : d.middleInitial + "."),
        d.lastName
    ];
    return names.join(" ");
} 
```

});

这是我的商店

```
Ext.define('List.store.Presidents', {
extend: 'Ext.data.Store',

config: {
    model: 'List.model.President',
    sorters: 'lastName',
    grouper : function(record) {
        return record.get('lastName')[0];
    },
    data: [
        { firstName: "George", lastName: "Washington" },
        { firstName: "John", lastName: "Adams" },
        { firstName: "Thomas", lastName: "Jefferson" },
        { firstName: "James", lastName: "Madison" },

    ]
} 
```

}); 这是我的观点，在我的视图文件夹下，

```
Ext.define('List.view.Main', {
extend: 'Ext.navigation.View',
xtype: 'mainpanel',
requires: [
    'List.view.PresidentList',
    'List.view.PresidentDetail'
],

config: {
    items: [{
        xtype: 'presidentlist'
    }]
} 
```

});

还在我的视图文件夹下PresidentDetail

```
Ext.define('List.view.PresidentDetail', {
extend: 'Ext.Panel',
xtype: 'presidentdetail',

config: {
    title: 'Details',
    styleHtmlContent: true,
    scrollable: 'vertical',
    tpl: [
        'Why Not Work {firstName}  {lastName}!'
    ]
} 
```

});

仍然在我的视图文件夹下，我还有另一个名为 PresidentList 的文件

```
Ext.define('List.view.PresidentList', {
extend: 'Ext.List',
xtype: 'presidentlist',
requires: ['List.store.Presidents'],

config: {
     xtype:'container',
    title: 'Why Not Work',
    grouped: true,
    itemTpl: '{firstName} {lastName}',
    styleHtmlContent: true,
    store: 'Presidents',
    onItemDisclosure: true,

     items: [

            {

            xtype: 'searchfield',
                name:'searchfield',
                placeHolder:'Search',
            },

         {

            xtype: 'spacer',
               height: 25
            },
           ] 
} 
```

});

这是我的 App.js 文件

Ext.application({ name: 'List',

```
requires: [
    'Ext.field.Search'
],

controllers: ['Main'],
views:  ['Main'],
stores: ['Presidents'],
models: ['President'],

launch: function() {
    Ext.Viewport.add({
        xtype: 'mainpanel'
    });
} 
```

});

很抱歉，我必须在这里发布我的整个应用程序，我只是想让我的问题尽可能详细。目前，我当前的应用程序显示为这样，但搜索字段不起作用。我需要帮助，谢谢

![我当前的输出](../Images/d090f032448d13510836caa6707964c3.png)

我真的需要帮助。我希望达到的结果是这样的，这样一旦用户要搜索该字段，从 R 开始存储的名称列表都会显示出来： ![这就是我需要的](../Images/0eed576678c07aeb7a3e2dae9eea642e.png)

感谢你的协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:35:43.477

您实际上需要侦听搜索字段的修改并根据值过滤商店。

这是您需要对控制器进行的修改：

```
config: {
    refs: {
        main: 'mainpanel'
    },
    control: {
        'presidentlist': {
            disclose: 'showDetail'
        },

        'searchfield': {
            keyup: 'doSearch'
        }
    }
},

showDetail: function(list, record) {
    this.getMain().push({
        xtype: 'presidentdetail',
        title: record.fullName(),
        data: record.getData()
    })
},

doSearch: function(field) {
    var value   = field.getValue(),
        store   = this.getPresidentList().getStore(),
        query   = new RegExp(value, 'i');

    store.filter('firstName', query)
} 
```

此外，我会在模型中添加另一个字段，该字段结合了名字和姓氏（例如 fullName）并对其进行搜索。

# android - 如何使用我的应用程序发送文件

> ID：10596406
> 
> 赞同：1
> 
> 时间：2012-05-15T07:53:52.427
> 
> 标签：android

我是新手:)。

当我尝试发送文件时，如何作为我的应用程序出现在应用程序列表中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:59:46.200

```
<activity android:name=".SomeActivity" android:label="@string/app_name">
    <intent-filter android:label="@string/app_name">
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="image/*" />
    </intent-filter>
</activity> 
```

用它来发送图像

# c++ - 删除单例对象时内存泄漏，cpp

> ID：10596407
> 
> 赞同：0
> 
> 时间：2012-05-15T07:53:54.313
> 
> 标签：c++, memory-leaks, valgrind

我不知道为什么我在这里有内存泄漏，非常感谢任何建议。请注意，在进程终止之前，我调用了destroy()，这是一个静态成员函数，它应该删除单例对象。

以下是相关代码和 valgrind 的消息：

```
Manager.h:
class Manager {
public:
    // Constructor/destructor
    static Manager * instance();
    static void destroy();
    ~Manager();
        // Bunch of functions that I didn't write here

private:
    Manager();
    static Manager * _singleton; 
        // Bunch of fields that I didn't write here
};

Manager.cpp:
#include "Manager.h"

Manager * Manager::_singleton = NULL;

Manager * Manager::instance() {
    if (_singleton == NULL) {
            _singleton = new Manager();
        }
    return _singleton;
}

void Manager::destroy()
{
    delete _singleton;
    _singleton = NULL;
}

/*
 * Destructor
 */
Manager::~Manager() {
    // Deleting all fields here, memory leak is not from a field anyway
} 
```

这是 valgrind 的报告：

```
==28688== HEAP SUMMARY:
==28688==     in use at exit: 512 bytes in 1 blocks
==28688==   total heap usage: 12 allocs, 11 frees, 10,376 bytes allocated
==28688== 
==28688== 512 bytes in 1 blocks are definitely lost in loss record 1 of 1
==28688==    at 0x4C27297: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==28688==    by 0x4014CE: Manager::Manager() (Manager.cpp:33)
==28688==    by 0x401437: Manager::instance() (Manager.cpp:15)
==28688==    by 0x4064E4: initdevice(char*) (outputdevice.cpp:69)
==28688==    by 0x406141: main (driver.cpp:21)
==28688== 
==28688== LEAK SUMMARY:
==28688==    definitely lost: 512 bytes in 1 blocks
==28688==    indirectly lost: 0 bytes in 0 blocks
==28688==      possibly lost: 0 bytes in 0 blocks
==28688==    still reachable: 0 bytes in 0 blocks
==28688==         suppressed: 0 bytes in 0 blocks 
```

为什么我有这个泄漏？我确实`_singleton`删除`destroy()`

正如我所说，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T08:05:36.323

这里有几点需要注意。最明显的是：你什么时候打电话`Manager::destroy`。第二件事是，`valgrind` 似乎抱怨的内存是在 的构造函数中分配的 `Manager`，您没有向我们展示。如果我们可以相信错误信息（并且我发现`valgrind`在这方面通常是可靠的，尽管它可能会被愚弄），那么就没有指向内存的剩余指针；要么您没有删除对象中的某个字段，要么对象在其构造函数中分配了内存，而该内存未保存在字段中。

最后，最好*不要*破坏单例。单例习惯用法的全部目的是避免初始化顺序问题（至少在 C++ 中，否则，仅声明对象的静态实例就足够了）。破坏对象引入了可能的破坏顺序问题。如果你不破坏它，`valgrind`将警告可能的内存泄漏（不是“绝对丢失”）；您可以忽略警告，也可以将其过滤掉。

# iphone - 将 NSMutableArray 的随机 UIButtons 标题放入 NSMutablearray 的 UIButtons

> ID：10596414
> 
> 赞同：1
> 
> 时间：2012-05-15T07:54:56.863
> 
> 标签：iphone, objective-c, ios, uibutton, nsmutablearray

我有一个带有 3 个 UIButtons 的 NSMutableArray 和一个带有 50 个 UIButtons 的第二个 NSMutableArray。我想将这 3 个 UIButton 标题逐个字符地分配给 SecondArray 的每个 UIButton。但是 Second Array 的这 50 个 UIButton 中的每一个都已经有一个 Character。我的基本目的是首先我想检查每个 UIButton 的长度我的第一个数组的 uibutton 标题，然后将其按索引分配给第二个数组中的 UIButton。（对于 Exp，如果我的第一个按钮有标题“堆栈”，第二个“结束”和第三个“流”不我想分配索引的 UIButtons 0-5 ,13-16,35-38 在第二个数组中）。我的第一个数组有 3 个 UIBttons 。这里是代码。

```
NSMutableArray *buttons = [NSMutableArray arrayWithObjects:btn1, btn2, btn3, nil];
            [btn1 setTitle:@"stack" forState:UIControlStateNormal]; 
            [btn2 setTitle:@"over" forState:UIControlStateNormal]; 
            [btn3 setTitle:@"flow" forState:UIControlStateNormal]; 
```

这是我的代码。创建 50 个 UIButton。

```
 -(void)button:(id)sender {
  saveBtn = [[NSMutableArray alloc] init];
  arr=[[NSArray alloc]
  initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",
     @"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",nil];

    for (int i=0; i<50; i++) {
            btn = [UIButton   buttonWithType:UIButtonTypeRoundedRect];
            btn.frame = CGRectMake(spacex, spacey, 30.0, 30.0);
            int idx;
            idx = arc4random()%[arr count];
            NSString* titre = [arr objectAtIndex:idx];
            [btn setTitle:titre forState:UIControlStateNormal];   
            spacex = spacex + 30;
            [saveBtn addObject:btn];
            [self.view addSubview:btn];

        }

            } 
```

任何人都指导我如何将我的 UIButton 标题分配给特定索引上的这些 UIButton。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:43:33.537

感谢帮助每个人..但我在这里完成的是代码。我可以帮助其他人。

```
 - (void)getbuttontitle {
   for(int i = 0;i<[buttons count];i++)
  {
     if(i == 0)
    {
     UIButton *b1 = [buttons objectAtIndex:0];
      a = (NSString *)[[b1 titleLabel] text];
        [storewords addObject:a];
        NSLog(@"b=%@",a);
        }
    else if(i == 1)
    {

    }
    else if(i == 2)
    { 

    }
 }
}

    for (NSString *str in storewords) {
        if (str==a) {
            int j = 0;
            int randn= (arc4random()%5)+1 ;
            NSLog(@"n=%d",randn);
            for (int i=randn; i<[a length]+randn; i++) {
                NSLog(@"a=%@",a);
                NSString *ichar  = [NSString stringWithFormat:@"%c", [a characterAtIndex:j]];
                UIButton*  b = [saveBtn objectAtIndex:i];
                NSLog(@"a=%@",ichar);
                j++;
                [b setTitle:ichar forState:UIControlStateNormal]; 
            }   
        }

        if (str==c) {

        }   

        if (str==d) {

        }       
    } 
```

# php - 在 HTML 页面中搜索 PHP 变量

> ID：10596416
> 
> 赞同：0
> 
> 时间：2012-05-15T07:55:15.333
> 
> 标签：php

我运行一个小型的专业古典音乐列表网站，并在 heredoc 中存储场地名称、地址、电话号码等（带有 html 标记），存储在外部 php 文件中。我所做的就是写：

芒果弦乐四重奏在

```
<?php echo $local_arts_centre; ?> 
```

并且场地的详细信息都打印的很整齐。

我写了一个搜索工具，它搜索文本但不搜索变量，会找到短语“mango string quartet”，但不会找到“local 艺术中心”。

我搜索了网络和 PHP 书籍，但找不到解决方案。任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:54:37.197

非常感谢您的回复。例如，我要做的是搜索音乐会列表的网页（显然非常简化）。

```
<div>

Thursday, 17 May 2012

The Mango String Quartet will be playing Beethoven, Tavener and Terry Riley at:

<?php echo $local_arts_centre; ?>

Concert starts at 7.30pm

Tickets £10.00

</div> 
```

当我通过 html 进行搜索时，除了 heredoc $local_arts_centre 的内容（其中包含场地的地址、电话号码等）之外，所有的东西都被找到了。有没有一种解析heredoc的方法，它显然显示在网页上，但在搜索代码时却没有？

这并不是真正必要的，但如果有人可以在特定场地或特定城市搜索音乐会，这将很有用。

当然有一个解决方法，但它不是那么整洁。我想我可以写：

```
<?php echo $local_arts_centre; /* Local Arts Centre London */ ?> 
```

这意味着将找到“本地艺术中心”和“伦敦”。

无论如何，感谢您到目前为止的建议，我已经在论坛上找到了很多想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:18:43.100

我不知道我是否正确，但...

HTML 代码

```
<!-- list of music -->
<a href="somefile.php?music=happybirthday">Happy Birthday</a>
<a href="somefile.php?music=rockandroll">Rock and Roll</a>
<a href="somefile.php?music=raps">Raps</a> 
```

在 somefile.php

```
 <?php
        // array for locations if just a few
        $locations = array("here and there", "ther eand here");
        // checking if the name 'music' has a value
        if (isset($_GET['music'])) {
            $music = $_GET['music'];
            // since we have the value of music, lets put some locations to them.
            switch ($music) {
                case 'happybirthday':
                    echo "The location is at " . $locations[0]; //hereandthere
                    break;
                case 'rockandroll':
                    echo "The location is at " . $locations[0]; //hereandthere
                    break;
                case 'raps':
                    echo "The location is at " . $locations[1]; //thereandhere
                    break;
                default:
                    echo "Please select a music"; // or something
            }
        } else {
            echo "Please select a music"; // or something
        }
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:58:10.507

您正在寻找`isset($var)`

如果未设置变量比`isset($var) == null`.

在此处检查“isset”：http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

# javascript - 有没有办法在 Selenium WebDriver 中使用 JavaScript 通过 XPath 获取元素？

> ID：10596417
> 
> 赞同：355
> 
> 时间：2012-05-15T07:55:17.900
> 
> 标签：javascript, selenium, selenium-webdriver, xpath, document.evaluate

我正在寻找类似的东西：

```
getElementByXpath(//html[1]/body[1]/div[1]).innerHTML 
```

我需要使用 JS 获取元素的 innerHTML（在 Selenium WebDriver/Java 中使用它，因为 WebDriver 本身无法找到它），但是如何？

我可以使用 ID 属性，但并非所有元素都有 ID 属性。

**[固定的]**

我正在使用 jsoup 在 Java 中完成它。这适合我的需要。

* * *

## 回答 #1

> 赞同：592
> 
> 时间：2013-01-11T18:54:11.327

您可以使用`document.evaluate`：

> 如果可能，计算 XPath 表达式字符串并返回指定类型的结果。

它是[w3-standardized](https://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-evaluate)和完整记录的：[https ://developer.mozilla.org/en-US/docs/Web/API/Document.evaluate](https://developer.mozilla.org/en-US/docs/Web/API/Document.evaluate)

```
function getElementByXpath(path) {
  return document.evaluate(path, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
}

console.log( getElementByXpath("//html[1]/body[1]/div[1]") );
```

```
<div>foo</div>
```

[https://gist.github.com/yckart/6351935](https://gist.github.com/yckart/6351935)

关于 mozilla 开发者网络也有很好的介绍：[https ://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#document.evaluate](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#document.evaluate)

* * *

替代版本，使用`XPathEvaluator`：

```
function getElementByXPath(xpath) {
  return new XPathEvaluator()
    .createExpression(xpath)
    .evaluate(document, XPathResult.FIRST_ORDERED_NODE_TYPE)
    .singleNodeValue
}

console.log( getElementByXPath("//html[1]/body[1]/div[1]") );
```

```
<div>foo/bar</div>
```

* * *

## 回答 #2

> 赞同：236
> 
> 时间：2013-12-12T09:21:47.340

在 Chrome 开发工具中，您可以运行以下命令：

```
$x("some xpath") 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-06-20T16:55:27.590

对于来自 chrome 命令行 api 的 $x 之类的东西（选择多个元素），请尝试：

```
var xpath = function(xpathToExecute){
  var result = [];
  var nodesSnapshot = document.evaluate(xpathToExecute, document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null );
  for ( var i=0 ; i < nodesSnapshot.snapshotLength; i++ ){
    result.push( nodesSnapshot.snapshotItem(i) );
  }
  return result;
} 
```

此 MDN 概述有所帮助：[https ://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-07-26T23:37:29.827

要使用[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")和[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")识别[WebElement](https://stackoverflow.com/questions/52782684/what-is-the-difference-between-webdriver-and-webelement-in-selenium/52805139#52805139) ，您必须使用评估*xpath*表达式并返回结果的方法。[`evaluate()`](https://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-evaluate)

 ** * *

## document.evaluate()

[document.evaluate()](https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate)根据[XPath](https://developer.mozilla.org/en-US/docs/Web/XPath)表达式和其他给定参数返回[XPathResult 。](https://developer.mozilla.org/en-US/docs/Web/API/XPathResult)

语法是：

```
var xpathResult = document.evaluate(
  xpathExpression,
  contextNode,
  namespaceResolver,
  resultType,
  result
); 
```

在哪里：

*   `xpathExpression`：表示要评估的 XPath 的字符串。
*   `contextNode`：指定查询的上下文节点。通常的做法是`document`作为上下文节点传递。
*   `namespaceResolver`：将传递任何命名空间前缀的函数，并应返回一个字符串，该字符串表示与该前缀关联的命名空间 URI。它将用于解析 XPath 本身内的前缀，以便它们可以与文档匹配。`null`对于 HTML 文档或不使用命名空间前缀时很常见。
*   `resultType`[: 一个整数，对应于使用命名常量属性](https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate#Result_types)返回的结果 XPathResult 的类型，例如`XPathResult.ANY_TYPE`XPathResult 构造函数的，对应于从 0 到 9 的整数。
*   `result`：用于结果的现有 XPathResult。`null`是最常见的，将创建一个新的 XPathResult

* * *

## 示范

例如，可以使用*xpath*唯一标识的[Google 主页中的](https://www.google.com/)*搜索框*，也可以使用[google-chrome-devtools](/questions/tagged/google-chrome-devtools "显示标记为“google-chrome-devtools”的问题")*控制台*通过以下命令进行标识：*`//*[@name='q']`*

 **```
$x("//*[@name='q']") 
```

快照：

![googlesearchbox_xpath](../Images/ab547fbe6769b9cef49bdbd7c2b07f2d.png)

也可以使用*xpath*`document.evaluate()`表达式来识别相同的元素，如下所示：

 *```
document.evaluate("//*[@name='q']", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue; 
```

快照：

![document_evalute_xpath](../Images/06880926f124c149c16cbfd93580d1ea.png)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-05-15T09:05:16.683

您可以使用 javascript 的[document.evaluate](http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-evaluate)在 DOM 上运行 XPath 表达式。我认为它在浏览器中以一种或另一种方式支持到 IE 6。

MDN：[https ://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate](https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate)

IE 支持[*selectNodes*](https://msdn.microsoft.com/en-us/library/ms754523(v=vs.85).aspx)。

MSDN：[https ://msdn.microsoft.com/en-us/library/ms754523(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/ms754523(v=vs.85).aspx)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-12-18T15:43:47.110

直截了当，您可以轻松地使用 xapth。使用下面的代码执行此操作的准确而简单的方法。请尝试并提供反馈。谢谢。

```
JavascriptExecutor js = (JavascriptExecutor) driver;

    //To click an element 
    WebElement element=driver.findElement(By.xpath(Xpath));
    js.executeScript(("arguments[0].click();", element);

    //To gettext

    String theTextIWant = (String) js.executeScript("return arguments[0].value;",driver.findElement(By.xpath("//input[@id='display-name']"))); 
```

进一步阅读 - [https://medium.com/@smeesheady/webdriver-javascriptexecutor-interact-with-elements-and-open-and-handle-multiple-tabs-and-get-url-dcfda49bfa0f](https://medium.com/@smeesheady/webdriver-javascriptexecutor-interact-with-elements-and-open-and-handle-multiple-tabs-and-get-url-dcfda49bfa0f)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-07-01T20:49:36.747

尽管许多浏览器都`$x(xPath)`内置了控制台，但这里汇总了从[Introduction 到在 JavaScript 中使用 XPath](https://developer.mozilla.org/en-US/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript)准备在脚本中使用的有用但硬编码的片段：

## 快照

这给出了 xpath 结果集的一次性快照。DOM 突变后数据可能会过时。

```
const $x = xp => {
  const snapshot = document.evaluate(
    xp, document, null, 
    XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null
  );
  return [...Array(snapshot.snapshotLength)]
    .map((_, i) => snapshot.snapshotItem(i))
  ;
};

console.log($x('//h2[contains(., "foo")]'));
```

```
<h2>foo</h2>
<h2>foobar</h2>
<h2>bar</h2>
```

## 第一个有序节点

```
const $xOne = xp => 
  document.evaluate(
    xp, document, null,
    XPathResult.FIRST_ORDERED_NODE_TYPE, null
  ).singleNodeValue
;

console.log($xOne('//h2[contains(., "foo")]'));
```

```
<h2>foo</h2>
<h2>foobar</h2>
<h2>bar</h2>
```

## 迭代器

> 但是请注意，如果文档在迭代之间发生突变（文档树被修改），这将使迭代无效，并且 的`invalidIteratorState`属性`XPathResult`设置为`true`，并`NS_ERROR_DOM_INVALID_STATE_ERR`引发异常。

```
function *$xIter(xp) {
  const iter = document.evaluate(
    xp, document, null, 
    XPathResult.ORDERED_NODE_ITERATOR_TYPE, null
  );

  for (;;) {
    const node = iter.iterateNext();

    if (!node) {
      break;
    }

    yield node;
  }
}

// dump to array
console.log([...$xIter('//h2[contains(., "foo")]')]);

// return next item from generator
const xpGen = $xIter('//h2[text()="foo"]');
console.log(xpGen.next().value);
```

```
<h2>foo</h2>
<h2>foobar</h2>
<h2>bar</h2>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-15T11:51:43.513

假设您的目标是开发和测试屏幕地图的 xpath 查询。然后要么使用[Chrome 的开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview#access)。这允许您运行 xpath 查询以显示匹配项。或者在 Firefox >9 中，您可以使用[Web Developer Tools 控制台](https://developer.mozilla.org/en/Using_the_Web_Console)执行相同的操作。在早期版本中使用[x-path-finder](https://addons.mozilla.org/en-us/firefox/addon/xpath-finder/)或[Firebug](http://getfirebug.com/)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-02-24T06:17:45.700

```
public class JSElementLocator {

    @Test
    public void locateElement() throws InterruptedException{
        WebDriver driver = WebDriverProducerFactory.getWebDriver("firefox");

        driver.get("https://www.google.co.in/");

        WebElement searchbox = null;

        Thread.sleep(1000);
        searchbox = (WebElement) (((JavascriptExecutor) driver).executeScript("return document.getElementById('lst-ib');", searchbox));
        searchbox.sendKeys("hello");
    }
} 
```

确保您使用正确的定位器。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-12T06:15:15.737

```
**Different way to Find Element:**

IEDriver.findElement(By.id("id"));
IEDriver.findElement(By.linkText("linkText"));
IEDriver.findElement(By.xpath("xpath"));

IEDriver.findElement(By.xpath(".//*[@id='id']"));
IEDriver.findElement(By.xpath("//button[contains(.,'button name')]"));
IEDriver.findElement(By.xpath("//a[contains(.,'text name')]"));
IEDriver.findElement(By.xpath("//label[contains(.,'label name')]"));

IEDriver.findElement(By.xpath("//*[contains(text(), 'your text')]");

Check Case Sensitive:
IEDriver.findElement(By.xpath("//*[contains(lower-case(text()),'your text')]");

For exact match: 
IEDriver.findElement(By.xpath("//button[text()='your text']");

**Find NG-Element:**

Xpath == //td[contains(@ng-show,'childsegment.AddLocation')]
CssSelector == .sprite.icon-cancel 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-09-11T11:56:00.843

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

System.setProperty("webdriver.chrome.driver", "path of your chrome exe");
        WebDriver driver = new ChromeDriver();
        driver.manage().window().maximize();
        driver.get("https://www.google.com");

            driver.findElement(By.xpath(".//*[@id='UserName']")).clear();
            driver.findElement(By.xpath(".//*[@id='UserName']")).sendKeys(Email); 
```****

# android - 以编程方式禁用软件包安装

> ID：10596421
> 
> 赞同：4
> 
> 时间：2012-05-15T07:55:43.937
> 
> 标签：android, broadcastreceiver, package

我为特定客户开发了一个非市场应用程序，他们希望我以编程方式禁用设备的软件包安装，因为用户不应该对他们的设备做任何事情，而是使用我的应用程序。市场上有一些应用程序能够对软件包的安装进行密码保护，但我需要自己进行，因为我的应用程序需要在不提示输入密码的情况下运行更新或安装插件。我用下面的意图过滤器构建了一个接收器：

```
<intent-filter>     
    <action android:name="android.intent.action.PACKAGE_INSTALL"/>
 </intent-filter> 
```

但这将在安装软件包之后开始，而不是之前。

我还尝试在启动包时接收广播，以捕获 的启动`com.android.packageinstaller`，但如果我的应用程序不是启动过程，我既没有找到接收包启动的方法，也无法杀死包。我试过这个：

```
ActivityManager servMng = (ActivityManager)context.getApplicationContext().getSystemService(context.ACTIVITY_SERVICE);

         List<ActivityManager.RunningAppProcessInfo> list =servMng.getRunningAppProcesses();
         if(list != null){
          for(int i=0;i<list.size();++i){
           if("com.android.packageinstaller".matches(list.get(i).processName)){
            int pid = android.os.Process.getUidForName("com.android.packageinstaller");
                  android.os.Process.killProcess(pid);
           }else{

           }
          }
         } 
```

我怎样才能正确地做到这一点？设备没有Root，但我的应用程序的第一次安装是由我自己手动完成的，确认一些安装该功能的安全警报是没有问题的。

# php - 如何计算 PHP 的利率？

> ID：10596422
> 
> 赞同：2
> 
> 时间：2012-05-15T07:55:45.757
> 
> 标签：php, phpexcel, financial, rate

所以我到处搜索，但找不到合适的解决方案。我需要计算 PHP 的（年）利率。

PHPExcel 上的函数 RATE 不起作用（[返回 NaN](https://stackoverflow.com/questions/10050846/phpexcel-based-function-rate-returning-nan)），我试图用[它](http://finance.thinkanddone.com/finding_irr_with_tvm_equation_using_newton_raphson_method.html) 来编写另一个函数，当你有时给我投资利率：原始金额，最终金额，固定付款（一个月节省的金额）和投资期限（以月为单位）。

但它仍然不起作用。如果有帮助，这里是代码。

```
public function calculateRate($originalAmount, $finalAmount, $monthlySavings, $savingsPeriod) {
    define('FINANCIAL_MAX_ITERATIONS', 128);
    define('FINANCIAL_PRECISION', 1.0e-06);

    $rate = 0.05; // guess 
    $i = 0;

    do {
        $equ = $monthlySavings * (pow(1 + $rate, $savingsPeriod) - 1) / $rate + $originalAmount * pow(1 + $rate, $savingsPeriod) + $finalAmount;
        $derivative = ( $monthlySavings * ( $savingsPeriod * $rate * pow(1 + $rate, $savingsPeriod - 1 ) - pow(1 + $rate, $savingsPeriod) ) + 1 ) / ($rate * $rate) + $savingsPeriod * $originalAmount * pow(1 + $rate, $savingsPeriod - 1);
        $div = $equ / $derivative;
        $oldRate = $rate;
        $rate -= $div;
        ++$i;
        var_dump($i, $rate, $equ, $derivative, $div);
    } while (abs($div) > FINANCIAL_PRECISION && ($i < FINANCIAL_MAX_ITERATIONS));

    return $rate;
} 
```

我需要一个可以计算利率的函数，但我找不到任何有用的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:32:22.313

这是来自[ThinkAndDone.com](http://thinkanddone.com/)的亚伯拉罕，我注意到你从昨天开始已经多次访问我们。

您必须考虑用于通过 MS Excel 查找 RATE的基础[TVM 方程。](http://finance.thinkanddone.com/tvm.html)它有两个版本，如下所示

```
PV(1+i)^N + PMT(1+i*type)[{(1+i)^N}-1]/i + FV = 0 
```

上面的第一个以利率 i 将现值和定期付款复合 n 个周期

```
FV(1+i)^-N + PMT(1+i*type)[1-{(1+i)^-N}]/i + PV = 0 
```

上面的第二个以利率 i 贴现 n 期的未来价值和定期支付

这两个等式只有在 FV、PV 或 PMT 三个变量中的至少一个或最多两个为负时才会等于零

任何流出的现金流量是由负数反映的借方金额，任何流入的现金流量是由正数反映的贷方金额

考虑到这一点，我认为 PHPExcel RATE 函数也应该可以工作

ThinkAndDone.com 的 RATE 计算器使用 2 个 TVM 方程和[Newton Raphson 方法中的任何一个为您的投资生成以下结果](http://finance.thinkanddone.com/finding_irr_with_tvm_equation_using_newton_raphson_method.html)

```
PV = -100000
PMT = -1000
FV = 126068
NPER = 6
TYPE = 0
RATE = ?

Newton Raphson Method IRR Calculation with TVM equation = 0

TVM Eq. 1: PV(1+i)^N + PMT(1+i*type)[(1+i)^N -1]/i + FV = 0

f(i) = 126068 + -1000 * (1 + i * 0) [(1+i)^6 - 1)]/i + -100000 * (1+i)^6

f'(i) = (-1000 * ( 6 * i * (1 + i)^(5+0) - (1 + i)^6) + 1) / (i * i)) + 6 * -100000 * (1+0.1)^5

i0 = 0.1
f(i1) = -58803.71
f'(i1) = -985780.5
i1 = 0.1 - -58803.71/-985780.5 = 0.0403480693724
Error Bound = 0.0403480693724 - 0.1 = 0.059652 > 0.000001

i1 = 0.0403480693724
f(i2) = -7356.984
f'(i2) = -747902.9062
i2 = 0.0403480693724 - -7356.984/-747902.9062 = 0.0305112524399
Error Bound = 0.0305112524399 - 0.0403480693724 = 0.009837 > 0.000001

i2 = 0.0305112524399
f(i3) = -169.999
f'(i3) = -713555.4448
i3 = 0.0305112524399 - -169.999/-713555.4448 = 0.0302730102033
Error Bound = 0.0302730102033 - 0.0305112524399 = 0.000238 > 0.000001

i3 = 0.0302730102033
f(i4) = -0.0972
f'(i4) = -712739.5905
i4 = 0.0302730102033 - -0.0972/-712739.5905 = 0.0302728738276
Error Bound = 0.0302728738276 - 0.0302730102033 = 0 < 0.000001
IRR = 3.03%

Newton Raphson Method IRR Calculation with TVM equation = 0

TVM Eq. 2: PV + PMT(1+i*type)[1-{(1+i)^-N}]/i + FV(1+i)^-N = 0

f(i) = -100000 + -1000 * (1 + i * 0) [1 - (1+i)^-6)]/i + 126068 * (1+i)^-6

f'(i) = (--1000 * (1+i)^-6 * ((1+i)^6 - 6 * i - 1) /(i*i)) + (126068 * -6 * (1+i)^(-6-1))

i0 = 0.1
f(i1) = -33193.1613
f'(i1) = -378472.7347
i1 = 0.1 - -33193.1613/-378472.7347 = 0.0122970871033
Error Bound = 0.0122970871033 - 0.1 = 0.087703 > 0.000001

i1 = 0.0122970871033
f(i2) = 11403.9504
f'(i2) = -680214.7503
i2 = 0.0122970871033 - 11403.9504/-680214.7503 = 0.0290623077396
Error Bound = 0.0290623077396 - 0.0122970871033 = 0.016765 > 0.000001

i2 = 0.0290623077396
f(i3) = 724.4473
f'(i3) = -605831.2626
i3 = 0.0290623077396 - 724.4473/-605831.2626 = 0.0302580982453
Error Bound = 0.0302580982453 - 0.0290623077396 = 0.001196 > 0.000001

i3 = 0.0302580982453
f(i4) = 8.8061
f'(i4) = -600890.1339
i4 = 0.0302580982453 - 8.8061/-600890.1339 = 0.0302727533356
Error Bound = 0.0302727533356 - 0.0302580982453 = 1.5E-5 > 0.000001

i4 = 0.0302727533356
f(i5) = 0.0718
f'(i5) = -600829.8628
i5 = 0.0302727533356 - 0.0718/-600829.8628 = 0.0302728728509
Error Bound = 0.0302728728509 - 0.0302727533356 = 0 < 0.000001
IRR = 3.03% 
```

我之前列出的两个 TVM 等式适用于离散复利的情况，例如按周期复利（每年、每季度、每月、每周、每天），因为大多数银行账户在利息连续复利时支付储蓄利息或收取贷款利息（无限复利）而不是离散复利

连续复利的 TVM 方程使用与离散复利版本不同的利息因子

这是利息连续复利时的 2 个 TVM 方程

PV e ^(ni) + PMT e ^(i*type) [e ^(ni) -1]/[e ^i -1] + FV = 0

或同等的

FV e ^(-ni) + PMT e ^(i*type) [1-e ^(-ni) ]/[e ^i -1] + PV = 0

这里 e 是数学常数，其值为 2.7182818284590452353602874713527

当利息是离散复利而不是连续复利时，利率会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:37:36.883

这不会给你最终的答案，但希望能给你指明正确的方向。我会尝试为它布置数学背景。

假设您的初始投资为**A**，您有**N**个周期，在此期间您以每周期**x**的利率投资固定金额**B** ，最终获得金额**C**。请注意，我说的是每个时期的费率。如果您每月投资并且您正在寻找年回报率**X**，那么**x = X / 12**。然后你可以把它变成这样的等式：

 ******```
 N            N-1            N-2
A * (1+x)  + B * (1+x)    + B * (1+x)    + ... + B * (1+x) + B = C 
```

使用几何级数公式，这可以简化为：

```
 N-1
         N        1 - (1+x)
A * (1+x)  + B * ------------- = C
                   1 - (1+x) 
```

继续基本代数，你可以把它变成

```
 N                N-1
A * (1+x)  * x + B * (1+x)   - C * x - B = 0 
```

此时，您需要使用数值方法来求解这个方程 - 您可以在这里查看，例如：[http ://en.wikibooks.org/wiki/Numerical_Methods/Equation_Solving](http://en.wikibooks.org/wiki/Numerical_Methods/Equation_Solving)******

# css - 文章分页类拆分 div 并弄乱页面布局

> ID：10596424
> 
> 赞同：1
> 
> 时间：2012-05-15T07:55:54.297
> 
> 标签：css, class, pagination, html

该类通过在它找到的任何地方展开内容来工作 [next]。但问题是 next 被包裹在 div 中，所以它变成了`<div>[next]</div>`，这是因为我使用的是所见即所得的编辑器。当它在第一页上找到 [next] 时，`</div>`在它被带到第二页之后等等，阻碍了布局。

所以要公开文本的类：

```
function splitText($pageCont){ 
        $this->textarray = explode('[next]', $pageCont);
        $this->numPages = count($this->textarray); 
    } 
```

和类来回显文本块

```
function getContent(){ 
        if($this->page != 0){ 
        echo $this->pageCont;  
        } else { 
        echo $this->textarray[0]; 
        } 
    } 
```

问题是，我怎样才能阻止这种情况发生，或者使主 div 中的 div 不会影响页面布局？好像现在当 div 吐出时，它会将右列推到右下角

kuh-chan 编辑的完整代码

```
class Pagebreak { 

    private $page; //page number 
    private $numPages; //number of total pages 
    private $textarray = array(); // array of conents 
    private $pageCont; //current page content 

    public function __construct(){  
        if (!isset($_GET['page'])) { 
        $this->page = 0; 
        } else {
        $this->page = $_GET['page'];  
        }      
    } 

    public function splitText($pageCont){  
        $this->textarray = preg_split('/(?<!\<div\>)\[next\]/', $pageCont);
        $this->numPages = count($this->textarray); 
    } 

    public function setPage(){ 
        $this->pageCont = $this->textarray[$_GET['page'] -1]; 
    } 

    public function getContent(){ 
        if($this->page != 0){ 
        echo $this->pageCont;  
        } else { 
        echo $this->textarray[0]; 
        } 
    } 

    public function getPageLinks(){ 

        echo "<p class=\"article_page_div\">\n";     

        //prev page 
        //if page number is more then 1 show previous link 
        if ($this->page > 1) { 
            $prevpage = $this->page - 1; 
            echo "<a class=\"article_paging\" href=\"?post=".$_GET['post']."&amp;page=$prevpage\">". 'Prev</a> '; 
        }  

        //page numbers   
        for($i = 1; $i <= $this->numPages ; $i++){ 
            if($this->numPages > 1){ // if more then 1 page show links 
                if(($this->page) == $i){ //if page number is equal page number in loop don't link it 
                    echo "$i\n "; 
                    } else {                     
                            if($this->page == 0){ //if no page numbers have been clicked don't link first page link 
                                if($i == 1){ 
                                    echo "$i\n "; 
                                } else { // link the rest 
                                    echo "<a class=\"article_paging\" href=\"?post=".$_GET['post']."&amp;page=$i\">$i</a>\n "; 
                                }  
                           } else { // link pages 
                                echo "<a class=\"article_paging\" href=\"?post=".$_GET['post']."&amp;page=$i\">$i</a>\n "; 
                            }                          
                    } 
            }              
        } 

        //next page 
        //if page number is less then the total number of pages show next link 
        if ($this->page <= $this->numPages - 1) { 
            if($this->page == 0){ //if no page numbers have been clicked minus 2 from the next page link 
                $nextpage = $this->page + 2; 
            } else { 
                $nextpage = $this->page + 1; 
                } 
                echo "<a class=\"article_paging\" href=\"?post=".$_GET['post']."&amp;page=$nextpage\">". 'Next</a>'; 
        } 

        echo "</p>\n";     

    } 

} 
```

然后调用这个类，你只需使用：

```
$paginate = new Pagebreak(); 
$paginate->splitText($storyCont); 
$paginate->setPage(); 
$paginate->getContent(); 
$paginate->getPageLinks(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T01:09:44.760

> 问题是，我怎样才能阻止这种情况发生，或者使主 div 中的 div 不会影响页面布局？好像现在当 div 吐出时，它会将右列推到右下角

使用以下 CSS 属性之一从页面流中删除 div：

*   位置：绝对
*   位置：固定

使用以下 CSS 属性将主 div 用作定位 div 的容器：

*   位置：相对

# vb.net - 检索自定义列表框项目值

> ID：10596427
> 
> 赞同：0
> 
> 时间：2012-05-15T07:56:13.160
> 
> 标签：vb.net, windows-phone-7.1

这就是我将 2 文本块作为项目添加到我的列表框的方式

```
Dim StkP As New StackPanel
StkP.Name = "Stack"

Dim txtLine_1 As New TextBlock
txtLine_1.FontSize = 24
txtLine_1.Name = "txtLine_1"
txtLine_1.Text = "Units " + txtUnits_1.Text + ", Cost " + txtCost_1.Text

Dim txtLine_2 As New TextBlock
txtLine_2.FontSize = 24
txtLine_2.Name = "txtLine_2"
txtLine_2.Text = txtResult_1.Text

StkP.Children.Add(txtLine_1)
StkP.Children.Add(txtLine_2)

ListCompare.Items.Add(StkP) 
```

但是，当我点击 vb.net 中的列表框时，如何检索所选项目的值？

我试过这段代码

```
Dim lbi As ListBoxItem = ListScore.ItemContainerGenerator.ContainerFromIndex(ListScore.SelectedIndex)
Dim stk As StackPanel = lbi.Content
Dim rs_1 As TextBlock = stk.FindName("lblScore_1")
Score_1.Text = rs_1.Text 
```

但它总是返回“lblScore_1”的最后一个输入

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:26:15.197

你必须：
- 拿走所选择的物品；
- 将其转换为 StackPanel；
- 访问堆栈面板的孩子；
- 将子项转换为 TextBlocks，然后根据需要读取它们的属性

使用数据绑定将使这更容易。

# java - 使用请求参数从 JavaScript 调用 servlet

> ID：10596430
> 
> 赞同：0
> 
> 时间：2012-05-15T07:56:35.943
> 
> 标签：java, javascript, jquery, jsp, servlets

我正在使用请求参数从 JavaScript 调用 servlet，但没有调用 servlet。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<title>Test</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<style type="text/css" media="screen">
</style>
</head>
<body>
  <table border="1" cellpadding = "15">
    <tr><td>1</td><td>2</td><td>3</td></tr>
    <tr><td>4</td><td>5</td><td>6</td></tr>
    <tr><td>7</td><td>8</td><td>9</td></tr>
  </body>
</table>
<script>
$('td').click(function(){
    var colIndex = $(this).parent().children().index($(this));
    var rowIndex = $(this).parent().parent().children().index($(this).parent());
    alert('Row: ' + rowIndex + ', Column: ' + colIndex);
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'http://localhost:8080/TestFinalWebApp/MyServlet?rowIndex=' + rowIndex + "&colIndex=" + colIndex, true);
    xhr.send(null);
});
</script>
</body>
</html> 
```

这是部署描述符：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" version="2.4">
<servlet>
    <servlet-name>GetParameters</servlet-name>
    <servlet-class>com.example.web.MyServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>GetParameters</servlet-name>
    <url-pattern>/MyServlet</url-pattern>
</servlet-mapping>  
</web-app> 
```

> 编辑：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        String rowIndex = request.getParameter("rowIndex");
        String colIndex = request.getParameter("colIndex");
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.print("rowIndex:" + rowIndex + "  colIndex:" + colIndex);
    } 
```

你能告诉我为什么没有调用servlet吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:40:27.103

一些评论：

1.  由于您已经包含 jQuery，请使用[ajax() 函数](http://api.jquery.com/jQuery.ajax/)。它具有更好的错误处理能力，并为您解决了许多极端情况。

2.  更新到更新版本的 jQuery。[最新版本是 1.7.2](http://docs.jquery.com/Downloading_jQuery)。

3.  `localhost`仅当服务器与浏览器位于同一台机器上时才有效。在开发期间可以，但在部署时会中断。要么去掉它（然后浏览器会为你添加它），要么确保 URL 是从 servlet 上下文生成的。

# hadoop - Hadoop TaskRunner 中的 Java 子错误

> ID：10596432
> 
> 赞同：2
> 
> 时间：2012-05-15T07:56:40.897
> 
> 标签：hadoop, cygwin

我正在尝试在带有 Cygwin 的 Windows 7 上使用 Hadoop 0.22.0 在伪分布式配置中运行 Hadoop grep 示例。该示例在独立模式下运行良好，但在伪分布式模式下运行时会给出以下输出

```
$ bin/hadoop jar hadoop-mapred-examples-0.22.0.jar grep input output 'dfs[a-z.]+'

12/05/15 08:27:31 WARN conf.Configuration: mapred.used.genericoptionsparser is deprecated. Instead, use mapreduce.client.genericoptionsparser.used
12/05/15 08:27:31 WARN mapreduce.JobSubmitter: No job jar file set.  User classes may not be found. See Job or Job#setJar(String).
12/05/15 08:27:31 INFO input.FileInputFormat: Total input paths to process : 1
12/05/15 08:27:32 INFO mapreduce.JobSubmitter: number of splits:1
12/05/15 08:27:33 INFO mapreduce.Job: Running job: job_201205150826_0001
12/05/15 08:27:34 INFO mapreduce.Job:  map 0% reduce 0%
12/05/15 08:27:47 INFO mapreduce.Job: Task Id : attempt_201205150826_0001_m_000002_0, Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:225)
Caused by: java.io.IOException: Task process exit with nonzero status of 1.
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:212)

12/05/15 08:27:47 WARN mapreduce.Job: Error reading task outputhttp://xxx.xxx.xxx:50060/tasklog?plaintext=true&attemptid=attempt_201205150826_0001_m_000002_0&filter=stdout 
```

有谁知道可能导致 Java Child Error 的原因，或者无法读取有关任务输出的警告？

我在 TaskTracker 日志中收到以下错误：

```
Failed to retrieve stdout log for task: attempt_201205151356_0001_m_000002_0
java.io.FileNotFoundException: C:\cygwin\usr\local\hadoop-0.22.0\logs\userlog\job_201205151356_0001\attempt_201205151356_0001_m_000002_0\log.index (The system cannot find the file specified) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:57:34.057

当我指定的配置超出我系统上可用的内存量时，我看到了这个错误。检查您指定的任务槽数以及每个子 JVM 的堆大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:56:24.430

不确定这是否仍然相关，因为 hadoop 现在是 1.0.x 版。

如果它可以帮助我已经成功地将 1.0.1 移植到 cygwin-1.7 win-7 jdk1.7_x64 上。

这里有很多问题，围绕路径混淆、shell 脚本和包装器、hadoop 核心 java 代码以及 java 不理解 cygwin 符号链接这一重要事实。

以下是完整工作修复的说明：

[http://en.wikisource.org/wiki/User:Fkorning/Code/Hadoop-on-Cygwin](http://en.wikisource.org/wiki/User:Fkorning/Code/Hadoop-on-Cygwin)

它也在 sourceforge 上，虽然我还没有上传补丁代码，因为我想移植最新版本（这是 1.0.1）。

[http://sourceforge.net/p/win-hadoop/wiki/Hadoop-on-Cygwin/](http://sourceforge.net/p/win-hadoop/wiki/Hadoop-on-Cygwin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T20:46:24.193

当日志目录变大时，我会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T23:49:37.937

hadoop 可以写入它需要的所有目录吗？像 mapred.local.dir 和 hadoop.tmp.dir？这可能会导致问题

# c#-4.0 - Silverlight 应用程序的 Microsoft.SqlServer.Smo.dll

> ID：10596435
> 
> 赞同：1
> 
> 时间：2012-05-15T07:56:50.140
> 
> 标签：c#-4.0, silverlight-4.0

有什么方法可以将非 Silverlight 程序集的引用添加到 Silverlight 应用程序？

我想添加`Microsoft.sqlserver.smo.dll`对我的 Silverlight 应用程序的引用。

请紧急

# c - 函数回调和进程间通信是否相同？

> ID：10596437
> 
> 赞同：7
> 
> 时间：2012-05-15T07:56:58.303
> 
> 标签：c, operating-system, function-pointers, inter-process-communicat

几天前，在一次采访中，有人问我一个问题，

```
Are  function callback in C and interprocess communication are same? 
```

我在那个问题上有点中立。因为我处于两难境地。在 IPC 中，如果我们看到进程只不过是一个函数，我们最后会在进程与进程之间进行通信。这里一个函数调用另一个函数。在函数回调中，我们`function pointer`再次使用，即一个函数调用具有地址的另一个函数。所以只是想知道虽然它们不完全相同，但有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T07:58:36.750

不，不是。

函数回调将函数的地址（或其他标识符）传递给另一个函数，以便它可以出于某种原因进行回调。

经典的例子是 C 标准库`qsort`函数。您传入一个指向数组（及其大小）的指针，以及一个比较函数。然后，该`qsort`函数使用该比较函数（回调）来确定列表中任意两个元素中的哪一个更大，以便它可以按顺序排列它们。

另一方面，IPC 是进程相互通信的一种手段，例如共享内存、管道、信号量等。

一些 IPC 机制可能会*使用*回调，但这绝不是必要的。例如，套接字不使用回调，它们只是允许用户调用`read`和`write`.

与共享内存类似，您附加到内存块并简单地访问它们，就像“常规”内存一样，只是所有附加到该内存的进程都能感受到效果。

一种使用回调的*方法*是 ONC RPC（或 Sun RPC）。它运行一个服务器，等待网络上的客户端调用，并将它们传递给预先配置的客户端功能。更多细节可以在[这里](https://stackoverflow.com/questions/670630/what-is-idl/670681#670681)找到。

但是，即使那样，我也不愿将其称为回调，因为它实际上是在编译时配置的。“适当的”回调往往在运行时完成。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T08:01:50.907

函数回调意味着调用者和被调用者在同一个线程中。IPC 处于不同的进程中。一个进程由一个或多个线程组成。因此，回调不是 IPC。

# php - 如何使用 NetBeans 与 WAMP 2.2.21 的集成？

> ID：10596438
> 
> 赞同：0
> 
> 时间：2012-05-15T07:57:13.813
> 
> 标签：php, netbeans, wamp

我尝试使用 NetBeans IDE 7.1.2，但设置有问题。我无法成功运行调试器。我不想使用 Xdebug 我有一个 WAMP，它适用于 eclipse，因为我有一些与 OOP 和表单相关的 eclipse 错误。我决定安装额外的调试器 NetBeans。我在网上阅读了一些教程，但它并没有帮助我分配。

1.我不知道如何在NetBeans中定义文件 php.ini 。2.我不知道在php.ini 中添加哪一行。

任何帮助表示赞赏。 ![在此处输入图像描述](../Images/a6e644bc0f8e34fbcbd743d1b9fc4236.png)

![在此处输入图像描述](../Images/dd25c6657d7f91d7583e7231020fe081.png)

![在此处输入图像描述](../Images/2fd77d62bc2b2dfce1a1058a3a545549.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:15:31.693

当您全新安装 Netbeans 和 Wamp 时，让调试工作真的不难。这是你要做的：

1.  单击 wamp 图标并选择 PHP->php.ini。
2.  滚动到文件底部并设置/添加以下设置：

    xdebug.remote_enable = on
    xdebug.remote_handler = dbgp
    xdebug.remote_host = localhost
    xdebug.remote_port = 9000

3.  重新启动所有服务。

4.  开始调试。

如果您仍然无法使用调试器，可能是因为防火墙阻止了 netbeans。

# javascript - Javascript/Jquery onclick定义词出现

> ID：10596439
> 
> 赞同：1
> 
> 时间：2012-05-15T07:57:15.157
> 
> 标签：javascript, jquery

我正在寻找有关如何能够单击 html 文档中的单词然后更新页面并显示已单击单词的定义的提示。它可以出现在页面底部。到目前为止，我只是在 p 标签中添加了一个 onclick ，例如。我是否以正确的方式解决这个问题？我在 javascript 方面很糟糕，所以对此的任何帮助都会很棒。非常感谢

```
 <p id="complexword1" onclick="functionToDisplayComplexWord()"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:10:38.263

我认为它可能会帮助您解决问题。

**HTML：**

```
<body>
<p id="paragraph">Javascript/Jquery onclick definition of word appears?</p>
</body> 
```

**Javascript：**（Jquery 库）

```
var p = $('p#paragraph');

p.html(function(index, oldHtml) {
    return oldHtml.replace(/\b(\w+?)\b/g, '<span class="word">$1</span>')
});

p.click(function(event) { 
    if(this.id != event.target.id) {
        alert(event.target.innerHTML);
    }
}); 
```

[**演示**](http://jsfiddle.net/fNMpw/.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:14:52.337

一种解决方案可能是使用 javascript 的事件委托

将 click 事件处理程序分配给段落元素，并使用 event.target 获取事件的目标

需要每个单词的虚拟跨度，因为 event.target 不会在主要浏览器中返回文本节点。因此，您需要设置虚拟跨度。

HTML

```
<p id='test'> <span>test</span> <span>test</span> <span>test</span> <span>test</span> <span>test</span> </p> 
```

javascript

```
document.getElementById('test').addEventListener('click', function (event) { console.log(event.target.innerHTML); }, false ) 
```

[这](http://jsfiddle.net/uPPMW/1/)是一个演示。检查控制台的输出

考虑使用`attachEvent`并`event.srcElement`支持 IE

另一种解决方案可能基于文本选择。

[您可以使用此](http://www.codetoad.com/javascript_get_selected_text.asp)代码在浏览器中获取选定的文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:03:53.680

您想在同一页面中显示还是作为弹出窗口显示？如果你想使用弹出窗口，[Colorbox](http://www.jacklmoore.com/colorbox)是一个很好的 jQuery 插件。

如果你想自己做，只需在你的页面内创建一个隐藏的 div 并设置为显示在`functionToDisplayComplexWord()`

# java - java.lang.NullPointerException，同时在java中使用couchdb4j api将批量文档保存到couchdb

> ID：10596443
> 
> 赞同：1
> 
> 时间：2012-05-15T07:57:50.120
> 
> 标签：java, database, nosql, couchdb

我尝试保存包含大约 1,30,000 条记录的文档，并使用 bulksavedocument 方法保存文档，但出现以下错误

```
 java.lang.NullPointerException
at com.fourspaces.couchdb.Database.bulkSaveDocuments(Database.java:280) 
```

这是我用来保存批量文档的代码。

```
JSONArray json=new JSONArray(); 
Document[] newdoc = null;
newdoc = new Document[json.size()];                      
for(int i=0;i<json.size();i++)
{
    Document singleDoc = new Document(json.getJSONObject(i));
    newdoc[i]=singleDoc;
}         
Session s = new Session("localhost",5984);
Database db = s.getDatabase("test"); 

db.bulkSaveDocuments(newdoc); 
```

当我尝试调试程序以及源代码时出现以下错误

```
 net.sf.json.JSONException: A JSONArray text must start with '[' at character 1 of {"db_name":"item_masters_test","doc_count":0,"doc_del_count":0,"update_seq":0,"purge_seq":0,"compact_running":false,"disk_size":79,"instance_start_time":"1337249297703950","disk_format_version":5,"committed_update_seq":0}
at net.sf.json.util.JSONTokener.syntaxError(JSONTokener.java:499)
at net.sf.json.JSONArray._fromJSONTokener(JSONArray.java:1116)
at net.sf.json.JSONArray._fromString(JSONArray.java:1197)
at net.sf.json.JSONArray.fromObject(JSONArray.java:127)
at net.sf.json.JSONArray.fromObject(JSONArray.java:105)
at com.fourspaces.couchdb.CouchResponse.getBodyAsJSONArray(CouchResponse.java:129)
at com.fourspaces.couchdb.Database.bulkSaveDocuments(Database.java:282)
at ItemMasterTest4.main(ItemMasterTest4.java:565) 
```

请提出解决此异常的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:19:08.413

我不太了解这个 JSON 库，但是这个

```
JSONArray json=new JSONArray(); 
```

可能是一个大小为 0（空）的数组。

所以你的循环进入索引0，不存在。所以

```
json.getJSONObject(i) 
```

可能返回null。

* * *

你在哪里写这个

```
for(int i=0;i<json.size();i++) 
```

你大概是这个意思

```
for(int i=0;i<json.size()-1;i++) 
```

# memory - 堆与JVM有关吗？

> ID：10596445
> 
> 赞同：0
> 
> 时间：2012-05-15T07:57:55.093
> 
> 标签：memory, memory-management, jvm

1.  堆内存与JVM有关吗？
2.  实际上，J2me Mobiles 中的堆内存是什么？
3.  如果堆栈内存增加，堆内存将减少。这是真的吗？
4.  我们在堆内存中分配内存，它是 RAM 的一部分。如果是真的，为什么 J2me 手机会给出堆限制。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:06:05.820

1）堆内存是一个通用术语，描述了我们在进程运行时**动态分配的内存。**

2） - 不是合适的人来回答这个问题，希望这里有更多经验的人可以帮助你提供比我目前给你的更好的答案。

3）堆栈内存不一定与堆内存有关。堆栈内存用于执行您的应用程序并包含返回地址 (eax)、您在当前范围内使用的变量等内容。我猜堆栈内存可以通过将东西从堆移动到堆栈来增加（也许通过将一些整数加载到局部变量中......），但这并不意味着当你使用堆栈更多时，你的堆会立即变小。

4) 给出了堆限制，因此您不会使用过多的内存。这可能具有潜在危险，因为运行 j2me 的设备没有交换功能。当您用完物理内存时，您将不得不重新启动或崩溃（如果我在崩溃部分错了，请纠正我..）

# c# - Fluent NHibernate Join Table 不在主键上

> ID：10596447
> 
> 赞同：1
> 
> 时间：2012-05-15T07:58:12.690
> 
> 标签：c#, sql, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试从数据库中加入两个表，但我需要将它们加入指定的列（而不是键）。表格如下所示：

```
EmplTable: Id, EmplId, FirstName, LastName
LoginTable: Id, EmplLoginId, Login 
```

域对象员工：

```
public class Employee
{
    public virtual int Id { get; set; }
    public virtual String FirstName { get; set; }
    public virtual String LastName { get; set; }
    public virtual String Login { get; set; }
} 
```

我的映射看起来像：

```
public EmployeeMap()
{
    Table("EmplTable");
    Id(x => x.Id).Column("Id");
    Map(x => x.FirstName).Column("FirstName");
    Map(x => x.LastName).Column("LastName");
    Join("LoginTable", m =>
    {
        m.Fetch.Join();
        m.KeyColumn("EmplId");
        m.Map(t => t.Login).Column("Login");
    });
} 
```

我正在尝试做的是在**EmplTable.EmplId=LoginTable.EmplLoginId**上连接表 如何将连接列从**Id**更改为**EmplId**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T01:08:10.193

您可以将其映射为 a`many-to-one`并像这样映射它：

```
public EmployeeMap() {
    Table("EmplTable");
    Id(x => x.Id).Column("Id");
    Map(x => x.FirstName).Column("FirstName");
    Map(x => x.LastName).Column("LastName");
    References(x => x.Login, "EmplId")
        .Fetch.Join(); 
} 
```

然后，您需要使用您的属性创建一个登录对象`LoginTable`

## 编辑：

我认为目前 NHibernate 无法做到这一点，因此 Fluent NHibernate 也无法做到这一点。

[https://nhibernate.jira.com/browse/NH-1452](https://nhibernate.jira.com/browse/NH-1452)
[https://nhibernate.jira.com/browse/NH-3143](https://nhibernate.jira.com/browse/NH-3143)

# c# - 如何将带有文本/索引项的组合框设置为特定项

> ID：10596449
> 
> 赞同：1
> 
> 时间：2012-05-15T07:58:35.667
> 
> 标签：c#, .net, winforms

据我所知，Windows 窗体中的组合框只能保存一个值。我需要一个文本和一个索引，所以我创建了这个小类：

```
public class ComboboxItem { 
    public string Text { get; set; } 
    public object Value { get; set; } 
    public override string ToString() 
    { 
        return Text; 
    }
} 
```

我将一个项目添加到组合框中，如下所示：

```
ComboboxItem item = new ComboboxItem()
{
    Text = select.Item1,
    Value = select.Item2
};

this.comboBoxSelektion.Items.Add(item); 
```

现在我的问题是：如何将组合框设置为特定项目？我试过这个，但没有奏效：

```
this.comboBoxSelektion.SelectedItem = new ComboboxItem() { Text = "Text", Value = 1}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:19:06.547

您提供的最后一个代码示例不起作用，因为 中的项目`ComboBox`和您创建的项目`new`是不同的实例（= 内存引用），即使它们相等（它们的成员有相同的值）。仅仅因为两个对象包含相同的数据并不会使它们成为相同的对象 - 它使它们成为两个相等的不同对象。

`o1 == o2`这就是为什么和之间通常存在很大差异的原因`o1.Equals(o2);`。

例子：

```
ComboboxItem item1 = new ComboBoxItem() { Text = "Text", Value = 1 };
ComboboxItem item2 = new ComboBoxItem() { Text = "Text", Value = 1 };
ComboboxItem item3 = item1;

item1 == item2      => false
item1.Equals(item2) => true, if the Equals-method is implemented accordingly
item1 == item3      => true!! item3 "points to the same object" as item1
item2.Equals(item3) => true, as above 
```

您需要做的是找到您添加到列表中的同一实例。您可以尝试以下方法：

```
this.comboBoxSelektion.SelectedItem = (from ComboBoxItem i in this.comboBoxSelektion.Items where i.Value == 1 select i).FirstOrDefault(); 
```

`ComboBox`这从分配给其值的项目中选择第一个项目，并将其`1`设置为选定项目。如果没有该项目，`null`则设置为`SelectedItem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:59:54.923

```
this.comboBoxSelektion.SelectedValue = 1; 
```

# wpf - 将 WPF ValidationRule 的状态传递给 MVVM 中的视图模型

> ID：10596452
> 
> 赞同：17
> 
> 时间：2012-05-15T07:58:45.763
> 
> 标签：wpf, mvvm, prism

我陷入了一个看似普遍的要求。我有一个 WPF Prism（用于 MVVM）应用程序。我的模型实现了**IDataErrorInfo**进行验证。**IDataErrorInfo**适用于非数字属性。但是，对于数字属性，如果用户输入了无效字符（不是数字），那么数据甚至不会到达模型，因为 wpf 无法将其转换为数字类型。

因此，我不得不使用 WPF ValidationRule 为用户提供一些有意义的消息来处理无效的数字条目。视图中的所有按钮都绑定到 prism 的 DelegateCommand（在视图模型中），并且按钮的启用/禁用在视图模型本身中完成。

现在，如果某些 TextBox 的 wpf ValidationRule 失败，我如何将此信息传递给 View Model 以便它可以适当地禁用视图中的按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-10T19:34:00.280

对于 MVVM，我更喜欢将附加属性用于此类事物，因为它们是可重用的，并且可以保持视图模型的清洁。

为了将 Validation.HasError 属性绑定到您的视图模型，您必须创建一个附加属性，该属性具有 CoerceValueCallback，该属性将您的附加属性的值与您正在验证用户输入的控件上的 Validation.HasError 属性同步。

[本文](http://wpfglue.wordpress.com/2009/12/03/forwarding-the-result-of-wpf-validation-in-mvvm/)解释了如何使用这种技术来解决通知视图模型 WPF ValidationRule 错误的问题。代码在 VB 中，所以如果您不是 VB 人员，我将其移植到 C#。

**附加属性**

```
public static class ValidationBehavior
{
    #region Attached Properties

    public static readonly DependencyProperty HasErrorProperty = DependencyProperty.RegisterAttached(
        "HasError",
        typeof(bool),
        typeof(ValidationBehavior),
        new FrameworkPropertyMetadata(false, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, null, CoerceHasError));

    private static readonly DependencyProperty HasErrorDescriptorProperty = DependencyProperty.RegisterAttached(
        "HasErrorDescriptor",
        typeof(DependencyPropertyDescriptor),
        typeof(ValidationBehavior));

    #endregion

    private static DependencyPropertyDescriptor GetHasErrorDescriptor(DependencyObject d)
    {
        return (DependencyPropertyDescriptor)d.GetValue(HasErrorDescriptorProperty);
    }

    private static void SetHasErrorDescriptor(DependencyObject d, DependencyPropertyDescriptor value)
    {
        d.SetValue(HasErrorDescriptorProperty, value);
    }

    #region Attached Property Getters and setters

    public static bool GetHasError(DependencyObject d)
    {
        return (bool)d.GetValue(HasErrorProperty);
    }

    public static void SetHasError(DependencyObject d, bool value)
    {
        d.SetValue(HasErrorProperty, value);
    }

    #endregion

    #region CallBacks

    private static object CoerceHasError(DependencyObject d, object baseValue)
    {
        var result = (bool)baseValue;
        if (BindingOperations.IsDataBound(d, HasErrorProperty))
        {
            if (GetHasErrorDescriptor(d) == null)
            {
                var desc = DependencyPropertyDescriptor.FromProperty(System.Windows.Controls.Validation.HasErrorProperty, d.GetType());
                desc.AddValueChanged(d, OnHasErrorChanged);
                SetHasErrorDescriptor(d, desc);
                result = System.Windows.Controls.Validation.GetHasError(d);
            }
        }
        else
        {
            if (GetHasErrorDescriptor(d) != null)
            {
                var desc = GetHasErrorDescriptor(d);
                desc.RemoveValueChanged(d, OnHasErrorChanged);
                SetHasErrorDescriptor(d, null);
            }
        }
        return result;
    }
    private static void OnHasErrorChanged(object sender, EventArgs e)
    {
        var d = sender as DependencyObject;
        if (d != null)
        {
            d.SetValue(HasErrorProperty, d.GetValue(System.Windows.Controls.Validation.HasErrorProperty));
        }
    }

    #endregion
} 
```

**在 XAML 中使用附加属性**

```
<Window
  x:Class="MySolution.MyProject.MainWindow"
  xmlns:v="clr-namespace:MyNamespace;assembly=MyAssembly">  
    <TextBox
      v:ValidationBehavior.HasError="{Binding MyPropertyOnMyViewModel}">
      <TextBox.Text>
        <Binding
          Path="ValidationText"
          UpdateSourceTrigger="PropertyChanged">
          <Binding.ValidationRules>
            <v:SomeValidationRuleInMyNamespace/>
          </Binding.ValidationRules>
        </Binding>
     </TextBox.Text>
  </TextBox>
</ Window > 
```

现在，您的视图模型上的属性将与您的文本框上的 Validation.HasError 同步。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T18:08:56.410

涅槃

解决此特定问题的最简单方法是使用**数字文本框**，它可以防止用户输入无效值（您可以通过第三方供应商执行此操作，也可以找到开源解决方案，例如从 Textbox 派生的类抑制非数字输入）。

在不执行上述操作的情况下在 MVVM 中处理此问题的第二种方法是在 ViewModel 中定义另一个字段，它是一个字符串，并将该字段绑定到您的文本框。然后，在您的字符串字段的设置器中，您可以设置整数，并为您的数字字段分配一个值：

这是一个粗略的例子：（注意我没有测试它，但它应该给你的想法）

```
// original field
private int _age;
int Age 
{
   get { return _age; }
   set { 
     _age = value; 
     RaisePropertyChanged("Age");
   }
}

private string _ageStr;
string AgeStr
{
   get { return _ageStr; }
   set { 
     _ageStr = value; 
     RaisePropertyChanged("AgeStr");
     if (!String.IsNullOrEmpty(AgeStr) && IsNumeric(AgeStr) )
         Age = intVal;
    }
} 

private bool IsNumeric(string numStr)
{
   int intVal;
   return int.TryParse(AgeStr, out intVal);
}

#region IDataErrorInfo Members

    public string this[string columnName]
    {
        get
        {

            if (columnName == "AgeStr" && !IsNumeric(AgeStr)
               return "Age must be numeric";
        }
    }

    #endregion 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-18T08:25:39.500

从 .NET 4.5 开始，ValidationRule 重载了 Validate 方法：

```
public ValidationResult Validate(object value, CultureInfo cultureInfo,
    BindingExpressionBase owner) 
```

您可以覆盖它并以这种方式获取视图模型：

```
public override ValidationResult Validate(object value, 
    CultureInfo cultureInfo, BindingExpressionBase owner)
{
    ValidationResult result = base.Validate(value, cultureInfo, owner);
    var vm = (YourViewModel)((BindingExpression)owner).DataItem;
    // ...
    return result;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-17T03:24:08.847

我和你有同样的问题，但我用另一种方式解决，当输入无效时，我使用**触发器禁用按钮。**同时，文本框绑定应该使用`ValidatesOnExceptions=true`

```
<Style TargetType="{x:Type Button}">
<Style.Triggers>
    <DataTrigger Binding="{Binding ElementName=tbInput1, Path=(Validation.HasError)}" Value="True">
        <Setter Property="IsEnabled" Value="False"></Setter>
    </DataTrigger>

    <DataTrigger Binding="{Binding ElementName=tbInput2, Path=(Validation.HasError)}" Value="True">
        <Setter Property="IsEnabled" Value="False"></Setter>
    </DataTrigger>
</Style.Triggers> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-09T10:32:29.163

您必须根据绑定类型属性指定自定义用户控件。例如，如果您的属性是 int 类型，则您必须放置不允许除整数类型之外的其他值的控件。

您可以放入 PreviewTextInput="NumberValidationTextBox" 中的逻辑。

```
private void NumberValidationTextBox(object sender, TextCompositionEventArgs e)
    { 
        Regex regex = new Regex("[^0-9]+");
        e.Handled = regex.IsMatch(e.Text);
    } 
```

只需插入您的逻辑或放置自定义控件即可完成。

当然也必须实施 mvvm 验证。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-09T11:31:27.593

1.  `IDataErrorInfo`根据绑定属性的逻辑在您的模型或视图模型中实现。您可以在这两个类中实现。

2.  在您的基本验证类中也实现这一点。`IDataErrorInfo`当绑定不起作用时，此处将触发验证。

    ```
    public virtual bool HasError
    {
        get { return _hasError; } 
        set
        {
            // if (value.Equals(_hasError)) return;
            _hasError = value;
            RaisePropertyChanged(() => HasError);
        }
    } 
    ```

3.  接下来，添加全局类

    ```
    public class ProtocolSettingsLayout
    {
        public static readonly DependencyProperty MVVMHasErrorProperty = DependencyProperty.RegisterAttached("MVVMHasError", typeof(bool), typeof(ProtocolSettingsLayout), new FrameworkPropertyMetadata(false, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, null, CoerceMVVMHasError));

        public static bool GetMVVMHasError(DependencyObject d)
        {
            return (bool)d.GetValue(MVVMHasErrorProperty);
        }

        public static void SetMVVMHasError(DependencyObject d, bool value)
        {
            d.SetValue(MVVMHasErrorProperty, value);
        }

        private static object CoerceMVVMHasError(DependencyObject d, Object baseValue)
        {
            bool ret = (bool)baseValue;

            if (BindingOperations.IsDataBound(d, MVVMHasErrorProperty))
            {
                if (GetHasErrorDescriptor(d) == null)
                {
                    DependencyPropertyDescriptor desc = DependencyPropertyDescriptor.FromProperty(Validation.HasErrorProperty, d.GetType());
                    desc.AddValueChanged(d, OnHasErrorChanged);
                    SetHasErrorDescriptor(d, desc);
                    ret = System.Windows.Controls.Validation.GetHasError(d);
                }
            }
            else
            {
                if (GetHasErrorDescriptor(d) != null)
                {
                    DependencyPropertyDescriptor desc = GetHasErrorDescriptor(d);
                    desc.RemoveValueChanged(d, OnHasErrorChanged);
                    SetHasErrorDescriptor(d, null);
                }
            }
            return ret;
        }

        private static readonly DependencyProperty HasErrorDescriptorProperty = DependencyProperty.RegisterAttached("HasErrorDescriptor",
                                                                                typeof(DependencyPropertyDescriptor),
                                                                                typeof(ProtocolSettingsLayout));

        private static DependencyPropertyDescriptor GetHasErrorDescriptor(DependencyObject d)
        {
            var ret = d.GetValue(HasErrorDescriptorProperty);
            return ret as DependencyPropertyDescriptor;
        }

        private static void OnHasErrorChanged(object sender, EventArgs e)
        {
            DependencyObject d = sender as DependencyObject;

            if (d != null)
            {
                d.SetValue(MVVMHasErrorProperty, d.GetValue(Validation.HasErrorProperty));
            }
        }

        private static void SetHasErrorDescriptor(DependencyObject d, DependencyPropertyDescriptor value)
        {
            var ret = d.GetValue(HasErrorDescriptorProperty);
            d.SetValue(HasErrorDescriptorProperty, value);
        }
    } 
    ```

4.  xml

    ```
    <TextBox  PreviewTextInput="NumValidationTextBox" Text="{Binding ESec, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=true, NotifyOnValidationError=true, ValidatesOnExceptions=True, NotifyOnSourceUpdated=True, NotifyOnTargetUpdated=True, TargetNullValue='0', FallbackValue='0' }" Validation.ErrorTemplate="{StaticResource validationTemplate}" viewmodels:ProtocolSettingsLayout.MVVMHasError="{Binding Path=HasError}" /> 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T10:45:47.757

有人在这里解决了它（不幸的是它在VB中）通过在VM中创建一个似乎绑定到Validation.HasError的依赖属性HasError。我还没有完全理解它，但它可以帮助你：

[http://wpfglue.wordpress.com/2009/12/03/forwarding-the-result-of-wpf-validation-in-mvvm/](http://wpfglue.wordpress.com/2009/12/03/forwarding-the-result-of-wpf-validation-in-mvvm/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-15T08:10:23.760

如果您提供自定义`ValidationRule`实现，您可以存储它收到的值，以及存储最后一个结果。伪代码：

```
public class IsInteger : ValidationRule
{
  private int parsedValue;

  public IsInteger() { }

  public string LastValue{ get; private set; }

  public bool LastParseSuccesfull{ get; private set; }

  public int ParsedValue{ get{ return parsedValue; } }

  public override ValidationResult Validate( object value, CultureInfo cultureInfo )
  {
    LastValue = (string) value;
    LastParseSuccesfull = Int32.TryParse( LastValue, cultureInfo, ref parsedValue );
    return new ValidationResult( LastParseSuccesfull, LastParseSuccesfull ? "not a valid number" : null );
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-15T20:27:43.903

我遇到了同样的问题并用一个技巧解决了它。请参阅下面的转换器：

```
public class IntValidationConverter : IValueConverter
{
    static string[] AllValuse = new string[100000];
    static int index = 1;
    public static int StartOfErrorCodeIndex = -2000000000;
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null) return null;
        if (value.ToString() == "") return null;

        int iValue = (int)(value);

        if (iValue == int.MinValue) return null;

        if (iValue >= StartOfErrorCodeIndex) return value;
        if ((iValue < IntValidationConverter.StartOfErrorCodeIndex) && (iValue > int.MinValue)) return AllValuse[StartOfErrorCodeIndex - iValue];

        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null) return int.MinValue;
        if (value.ToString() == "") return int.MinValue;

        int result;
        bool success = int.TryParse(value.ToString(), out result);
        if (success) return result;

        index++;
        AllValuse[index] = value.ToString();
        return StartOfErrorCodeIndex - index;
    }
} 
```

# directx - 如何在 direct3d 9 中正确实现纹理像素到纹理像素校正？

> ID：10596453
> 
> 赞同：0
> 
> 时间：2012-05-15T07:58:47.073
> 
> 标签：directx, textures, direct3d, texture-mapping, direct3d9

我已经阅读[了](http://drilian.com/2008/11/25/understanding-half-pixel-and-half-texel-offsets/)[几篇文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb219690%28v=vs.85%29.aspx)，这些文章描述了将纹理移动一半顶点位置的必要性，以便获得纹素和像素之间的正确映射。虽然我认为我理解它背后的理论，但当我尝试实施解决方案时（向左移动半个单位），我得到的只是渲染图像两侧的黑线。

我得到的印象是我要么没有调整正确的 x 和 y 参数，要么这不适用于我的特定场景。我使用带有线性过滤的 direct3d 9 并渲染覆盖整个屏幕的图像。我已经尝试过纹理的实际大小和 -1 到 +1 （即根据两个链接文章中的不同解决方案）。两种方法都产生相同的效果。

我的问题是，何时需要进行此更正，是否有正确的方法可以做到这一点，而我却错过了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:50:44.720

根据 DirectX 文档，仅在“使用预转换顶点渲染 2D 输出时”才需要偏移半个像素。预先转换的顶点是那些在调用中`D3DFVF_XYZRHW`指定了标志的顶点。`IDirect3DDevice9::SetFVF`为了正确绘制转换后的顶点，您必须将其位置设置为`(posx - 0.5, posy - 0.5, 0, 1)`顶点`(posx, posy)`的屏幕空间坐标（以像素为单位）。

这是渲染全屏纹理四边形的代码：

```
struct TRANSFORMED_VERTEX
{
    D3DXVECTOR4 pos;
    D3DXVECTOR2 tex;
    static const DWORD FVF;
};
const DWORD TRANSFORMED_VERTEX::FVF = D3DFVF_XYZRHW | D3DFVF_TEX1; 
```

```
void RenderFullScreenQuad()
{
    D3DSURFACE_DESC desc;
    LPDIRECT3DSURFACE9 pSurf;

    g_pd3dDevice->GetRenderTarget(0, &pSurf);
    pSurf->GetDesc(&desc);
    pSurf->Release();

    float width = (float)desc.Width - 0.5f;
    float height = (float)desc.Height - 0.5f;

    TRANSFORMED_VERTEX v[4];
    v[0].pos = D3DXVECTOR4(-0.5f, -0.5f, 0.0f, 1.0f);
    v[1].pos = D3DXVECTOR4(width, -0.5f, 0.0f, 1.0f);
    v[2].pos = D3DXVECTOR4(-0.5f, height, 0.0f, 1.0f);
    v[3].pos = D3DXVECTOR4(width, height, 0.0f, 1.0f);

    v[0].tex = D3DXVECTOR2(0.0f, 0.0f);
    v[1].tex = D3DXVECTOR2(1.0f, 0.0f);
    v[2].tex = D3DXVECTOR2(0.0f, 1.0f);
    v[3].tex = D3DXVECTOR2(1.0f, 1.0f);

    g_pd3dDevice->SetFVF(TRANSFORMED_VERTEX::FVF);
    g_pd3dDevice->DrawPrimitiveUP(D3DPT_TRIANGLESTRIP, 2, v, sizeof(TRANSFORMED_VERTEX));
} 
```

当然，你需要在`BeginScene()`和之间调用这个函数`EndScene()`。您还必须正确设置纹理和采样器状态（或着色器常量）。

# algorithm - 通过算法实现自动化起重机

> ID：10596455
> 
> 赞同：1
> 
> 时间：2012-05-15T07:59:09.663
> 
> 标签：algorithm, loading, containers, labview

我想知道一个基本算法来找到集装箱装卸的最短路线。我研究了集装箱装卸的最佳路线，所有的答案都太复杂了，我无法理解。Kim 和 Kim (1999) 等研究论文通过将过程建模为混合整数程序 (MIP)，最小化了集装箱存储块中起重机的设置时间和行进时间之和。张等人。(2002) 采用混合整数规划 (MIP) 模型来查找起重机在块之间移动的时间和路线，从而最大限度地减少堆场的总延迟工作量。

我不需要非常复杂的算法。我的项目是使用LabVIEW NI进行集装箱装卸的自动化龙门起重机。所以我只需要一个简单可用的算法。

我做了一些研究，意识到集装箱装卸有一种传统的操作模式。它被称为“门框”路线。如果您以前听说过或看过它，请帮助我并提供一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:43:34.440

我对路由算法没有经验，但是这里有 A* 的[实现](http://forums.ni.com/t5/LabVIEW/quot-a-star-algorithm-quot/m-p/660929#M304339)。也许会有所帮助。

此外，如果您可以访问 LV Robotics 模块，我知道它包含一些路由算法。

# networking - 如何在 Amazon Virtual Private Cloud 上设置网络 ACL？

> ID：10596456
> 
> 赞同：9
> 
> 时间：2012-05-15T07:59:11.943
> 
> 标签：networking, amazon-web-services, acl, traffic, amazon-vpc

我已经建立了一个 Amazon Virtual Private Cloud (VPC)。在 VPC 内部，我有 2 个在其中创建实例的网络。出于安全原因，我想在这些网络上放置一些网络访问控制列表（网络 ACL），除了机器防火墙。按照亚马逊示例，我有一个公共网络（暴露于互联网访问）10.0.0.0/24 和 3 个私有网络 10.0.1.0/24、10.0.2.0/24、10.0.3.0/24。它们之间的流量被路由。

* * *

因此，对于作为 ACL 的网络 10.0.1.0/24，我将其设为：

```
Inbound:
10.0.0.0/24 port 80 (HTTP)
10.0.0.0/24 port 22 (SSH)
10.0.2.0/24 port 3306 (MySql)
10.0.3.0/24 port 3306 (MySql)

Outbound
ALL ALL 
```

* * *

对于网络 10.0.2.0/24 和 10.0.3.0/24：

```
Inbound 
10.0.1.0/24 port 3306 (MySql)

Outbound
ALL ALL 
```

* * *

对于此处的公共网络 10.0.0.0/24，我有一个公开的负载均衡器，它将流量重定向到专用网络 10.0.1.0/24，其中应用程序通过 HTTP 进行响应：

```
Inbound
0.0.0.0/0 port 80 (HTTP)
0.0.0.0/0 port 443 (HTTPS)
0.0.0.0/0 port 22 (SSH)

Outbound
ALL ALL 
```

* * *

问题是，当我将这些规则付诸实施时，所有流量都会冻结，并且该应用程序不可用。发生了什么？难道我做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-15T09:57:48.977

# 更新

您的规则目前缺少与常见问题解答相关的附加且可能相关的片段[VPC 中的安全组和 VPC 中的网络 ACL 之间有什么区别？：](http://aws.amazon.com/vpc/faqs/#S4)

> VPC 中的安全组指定允许哪些流量进出 Amazon EC2 实例。网络 ACL 在子网级别运行并评估进出子网的流量。网络 ACL 可用于设置允许和拒绝规则。网络 ACL 不会过滤同一子网中实例之间的流量。此外，**网络 ACL 执行无状态过滤，而安全组执行有状态过滤**。*[强调我的]*

这[在有状态过滤和无状态过滤之间有什么区别？](http://aws.amazon.com/vpc/faqs/#S5)：

> **状态过滤**跟踪请求的来源，并且可以 **自动允许对请求的回复**返回到发起计算机。[...]
> 
> **另一方面**，无状态过滤仅检查源或目标 IP 地址和目标端口，而忽略流量是新请求还是对请求的回复。在上面的示例中，**需要在过滤设备上实施两条规则：一条规则允许流量在 tcp 端口 80 上进入 Web 服务器，另一条规则允许来自 Web 服务器的出站流量** （tcp 端口范围 49,152 到 65,535） . *[强调我的]*

现在，您已经允许所有出站流量，因此这不适用于示例，但同样的问题也适用于相反的情况，例如，对于源自您的 EC2 实例的 HTTP 请求，您需要有一个相应的如概述的入站规则，请参阅[网络 ACL](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_ACLs.html)中的[临时端口](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_ACLs.html#VPC_ACLs_Ephemeral_Ports)部分以获取更多详细信息：

> 发起请求的客户端选择临时端口范围。该范围因客户端的操作系统而异。[...]
> 
> 如果您的 VPC 中的实例是发起请求的客户端，则您的网络 ACL 必须具有入站规则，以启用发往特定于实例类型（Amazon Linux、Windows Server 2008 等）的临时端口的流量。
> 
> 在实践中，为了覆盖可能向您的 VPC 中面向公众的实例发起流量的不同类型的客户端，您需要打开临时端口 1024-65535。[...]

## 解决方案

因此，[附录 A](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_Appendix_NACLs.html)[中场景 2](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_Appendix_NACLs.html#VPC_Appendix_NACLs_Scenario_2)的推荐规则部分：推荐的网络 ACL 规则为您的场景建议以下入站规则（取决于操作系统的示例）：

```
Inbound:
0.0.0.0/0 port 49152-65535 (TCP) 
```

要测试此问题是否真的适用，您可以简单地包括整个临时端口范围：

```
Inbound:
0.0.0.0/0 port 1024-65535 (TCP) 
```

* * *

### 初始答案（已过时）

> 对于此处的公共网络 10.0.0.0/24，我有一个公开的负载均衡器，它将流量重定向到专用网络 10.0.1.0/24，其中应用程序通过 http 进行响应

您的设置表明您打算像往常一样终止负载均衡器上的 SSL；考虑到您增加的安全要求，您实际上可能还为后端 HTTPS 通信设置了[Elastic Load Balancing （请参阅](http://aws.amazon.com/elasticloadbalancing/)[架构概述](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/SvcIntro_arch_workflow.html)） - 不过，您似乎没有将入站 HTTPS 流量容纳到 10.0.1.0/24 的 ACL 规则，所以这将是一个丢失的情况：

```
Inbound:
10.0.0.0/24 port 80 (HTTP)
10.0.0.0/24 port 443 (HTTPS) // <= missing in your example currently!
10.0.0.0/24 port 22 (SSH)
10.0.2.0/24 port 3306 (MySql)
10.0.3.0/24 port 3306 (MySql)

Outbound
ALL ALL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T16:37:57.760

如果你想打开临时端口，除了低于 10,000 的关于 tomcat、其他 servlet 等的例外的端口，只需为每个例外范围创建特定的规则。规则从最低编号先到最高编号最后进行评估，最高有效规则编号为 32766。

# c - 0 != 在这段代码中有什么作用？

> ID：10596458
> 
> 赞同：1
> 
> 时间：2012-05-15T07:59:19.070
> 
> 标签：c, obfuscation, deobfuscation

`0 !=`这段代码做了什么：

```
#include <stdio.h>
int main()
{
    int i;
    for(i=0;i<8*5;i++)
        printf("%d",0 != ("HELLO"[i/8] & 1 << (~i&7)) );
    return 0;
} 
```

这是一个简单的字符串到二进制的转换。我理解，``("HELLO"[i/8] & 1 << (~i&7))`但我无法理解该`0 !=`部分，如果我删除它，它就不起作用。

有没有深入教授按位运算的网站？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:04:41.703

```
a != b 
```

是一个等于真或假的表达式。在 C 中，没有`true`and `false`，而是 0 被认为是假的，其他任何东西都被认为是真的。一个表达式`a != b`如果为假则返回 0，如果为真则返回 1。%d 是打印出整数的格式字符串，因此 printf() 将打印这个 0 或 1。

在这种情况下，a 是 0，b 是另一边表达式的野兽。`("HELLO"[i/8] & 1 << (~i&7))` 详细说明一下其他操作：

`("HELLO"[i/8] & 1 << (~i&7))`应该添加括号以使其更清晰：

```
(("HELLO"[i/8]) & (1 << (~i&7))) 
```

(~i&7) 取 i，翻转其中的所有位，然后将所有位与 7 位相加。

```
(1 << (~i&7))) 
```

取 1 并左移 ~i&7 个位置。

```
a & b 
```

需要`a`和`ANDS`所有的位与那些在`b`。

几个链接：

[http://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

[http://www.cprogramming.com/tutorial/bitwise_operators.html](http://www.cprogramming.com/tutorial/bitwise_operators.html)

[http://msdn.microsoft.com/en-us/library/17zwb64t.aspx](http://msdn.microsoft.com/en-us/library/17zwb64t.aspx)

# dataset - 在同一张图上设置/取消设置 dgrid3d

> ID：10596464
> 
> 赞同：1
> 
> 时间：2012-05-15T07:59:33.390
> 
> 标签：dataset, plot, gnuplot, interpolation, points

我想在 3d 的同一张图上绘制两个不同的数据集。这可以很容易地完成

```
splot 'foo.dat','bar.dat' 
```

不幸的是，我想要`foo`平滑，所以我曾经`dgrid3d`设置过网格。同时我想`bar`只显示点（`foo`实际上是 的插值`bar`，我想绘制结）。因此我用

```
set dgrid3d 20,20
splot 'foo.dat' w l, 'bar.dat' w points 
```

不幸的是，这适用`dgrid3d`于两个数据集......是否可以`dgrid3d`在`splot`命令中取消设置或使用其他技巧来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:49:03.543

你需要另一个技巧。这个诀窍是`set table`

```
set terminal push           #save terminal info
set terminal unknown        #null terminal
set table 'foo_gridded.dat' #temporary file to store the data
set dgrid3d 20,20   
splot 'foo.dat'
unset table                 #close temporary file
unset dgrid3d
set terminal pop            #restore terminal info
splot 'foo_gridded.dat' w l, 'bar.dat' w points  #make the plot we want
!rm foo_gridded.dat         #Optional, remove temporary file (Only works on Unix-like systems) 
```

set table 基本上将数据“绘制”到一个文本文件中，该文件格式化为 gnuplot 以供回读。它**非常有用**- 最后，我认为它的目的是创建各种（丑陋的）小黑客，比如上面的那个因此 gnuplot 开发人员无需担心绘图类型的冲突。（我用这个在 pm3d 地图上绘制等高线）。

# android - 向 Android 添加新的网络承载

> ID：10596467
> 
> 赞同：105
> 
> 时间：2012-05-15T07:59:42.177
> 
> 标签：android, wifi, network-protocols, 3g, android-source

我想将新的承载添加到 Android（根/自定义构建），成为 Wifi 和 GPRS 的对等点。

我做了一些 Android 开发，我知道（在 Android 2.2 中）WIFI 和 GPRS 有常量。这是否意味着我需要在所有地方添加常量，以及提供网络堆栈？

我要添加的第一个承载是 USBNet（适用于带有 USB 主机的 Android）。

另一个将是一个 3G USB 加密狗作为第二个 GPRS 承载。

我从下载源代码开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:42:02.210

WIFI添加网络将是你可以从这段代码中得到提示..

我们如何从 Android 手机获取接入点名称。

```
WifiManager mWiFiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
WifiInfo w = mWiFiManager.getConnectionInfo();
Toast.makeText(this, "APN Name = "+w.getSSID(), Toast.LENGTH_SHORT).show(); 
```

上面的代码片段适用于当前活动的 APN 名称。

# javascript - 最后动态附加的内容从帖子中丢失

> ID：10596470
> 
> 赞同：0
> 
> 时间：2012-05-15T07:59:57.700
> 
> 标签：javascript, jquery

我正在使用 jQuery 动态附加一个块，但是当我发布表单时，最后一个附加的块没有被发布？

我的问题是当最后一个块附加了循环......它发布所有其他块但不读取最后一个......例如，如果添加了 5 个块，但它只发布到第四个块。

这是我的一些代码

```
limit =  $("#conditions1").find('option').length-2;    
if( limit >= counter ) {        
            counter++;
            var a = $("#dynamic").html();
            var cond = "conditions"+counter;
            var cond_val = "conditions_value"+counter;
            var cond_no = "Condition"+counter;
            var tr1 = "tr_first"+counter;
            var tr2 = "tr_second"+counter;
            var sub_cond_val = "sub_conditions_value"+counter;

            $("#dynamic_id").html(a);
            $("#dynamic_id").find('#condition_no').text(cond_no);
            $("#dynamic_id").find('#tr_first').attr('id',tr1);
            $("#dynamic_id").find('#tr_second').attr('id',tr2);

            $("#dynamic_id").find('#conditions').attr('name',cond);
            $("#dynamic_id").find('#conditions').attr('id',cond);
            $("#dynamic_id").find('#conditions_value').attr('name',cond_val);
            $("#dynamic_id").find('#conditions_value').attr('id',cond_val);
            $("#dynamic_id").find('#sub_conditions_value').attr('name',sub_cond_val);
            $("#dynamic_id").find('#sub_conditions_value').attr('id',sub_cond_val);

            var b = $("#dynamic_id").html();
            $("#dynamic_conditions").append(b);
            $("#dynamic_conditions").show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:36:30.900

您好，如果有人正在寻找此类问题..那么答案是

与您一起附加到另一个块（例如b）中的块（例如a）您应该在附加该“b”块之后再次清空该“a”块......您可以通过$（“#a”） 。空的（）

# java - 导入 java.util.zip.ZipOutputStream；导致打印到文件的问题

> ID：10596477
> 
> 赞同：1
> 
> 时间：2012-05-15T08:00:31.830
> 
> 标签：java, zip

问题已回答。感谢大家愿意提供帮助和帮助。

```
Writer output = null;
    File pdfFile = new File("MANIFEST.txt");//create text file
    try {
        output = new BufferedWriter(new FileWriter(pdfFile));
    } catch (IOException e) {
         //TODO Auto-generated catch block
        e.printStackTrace();
    }

    for(int i=0; i<files.length; i++){//create manifesto of pdfs in directory
        try {

            System.out.println(copy[i]);
            output.write(copy[i]);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

副本是一个字符串数组。内容正确打印到控制台，但不打印到文件（虽然文件已创建）。当我包含导入 java.util.zip.ZipOutputStream; 时，很多事情都会抛出异常（例如 output.write 给出“未处理的异常类型 IOEception”），除非我将它们放在 try catch 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:15:14.490

你曾经关闭过作家吗？

通常，每当您创建 I/O 资源（例如读取器/写入器/数据库连接/等）时，您应该使用[finally 块](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)来确保它已关闭，如下所示：

```
Writer writer = new BufferedWriter(...);
try {
    // do something with the writer; may be many lines of code
}
finally {
    writer.close();
} 
```

（注意：Java 7 对该模式有更简洁的语法，[try-with-resources 块](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。）

这对于资源管理很重要（例如，如果您不关闭连接/文件，那么最终您的进程将用完文件句柄并且无法再打开）。

但是，还有一个更相关的问题。许多写入器被缓冲，以避免一次写入一个字符到底层操作系统的性能损失。当您调用`write`它们时，它们会将数据存储在缓冲区中，并且只会定期将其实际写入文件（当它“足够大”值得使用时） - 这称为*flushing*。

如果写入器在刷新数据之前被简单地丢弃，则不会更新文件。

您可以`flush()`手动调用，但很少需要 - 调用`close()`writer 不仅会释放其所有资源，还会刷新缓冲区。因此，使用`try / finally`上面列出的模式，可以*保证*`try`当您的进程终止时，您在块中写入的任何内容都将写入文件。使用您当前的代码，没有任何保证，它取决于编写器的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:13:17.207

您在 for 循环中使用`i < files.length`as 条件，然后访问`copy[i]`. 你可能想使用这样的东西：

```
for(int i = 0; i < copy.length; i++) {
    System.out.println(copy[i]);
    output.write(copy[i]);
} 
```

或者更好的是，使用 foreach 循环：

```
for(final String element : copy) {
    System.out.println(element);
    output.write(element);
} 
```

# ruby-on-rails - 如何在没有 Rake 的情况下运行完整的 MiniTest 套件？

> ID：10596478
> 
> 赞同：9
> 
> 时间：2012-05-15T08:00:37.710
> 
> 标签：ruby-on-rails, ruby, rake, minitest

已经看过[这个问题](https://stackoverflow.com/questions/4788288/how-to-run-all-the-tests-with-minitest)，这或多或少反映了我目前如何运行我的整个套件。

此外，我还设置了以下 rake 任务：

```
Rake::TestTask.new do |t|
  t.name = "spec:models"
  t.libs << "test"
  t.pattern = "spec/models/*_spec.rb"
end 
```

但是我注意到当我使用 运行它时`time rake spec:models`，它在大约 2.36 秒内完成。如果我在该目录中运行所有单独的测试`ruby /path/to/spec.rb`（目前所有测试都与 ActiveRecord 隔离 - 还没有持久性，所以超级快），它们的累积总用户时间为 2.36 秒，但我也注意到每个文件需要 0.4 个用户从开始到结束执行的秒数，MiniTest 报告的实际“测试”时间要快得多（这样我的整个套件，在加载依赖项后，应该在不到 0.15 秒的时间内执行，而不是 2.36 秒）。

示例（对于一个规范文件）：

```
Started

11/11:         100% |======================================| Time: 00:00:00

Finished in 0.02223s
11 tests, 15 assertions, 0 failures, 0 errors, 0 skips
ruby path/to/spec.rb  0.43s user 0.06s system 88% cpu 0.559 total 
```

我怀疑 Rake 会在每次测试执行之间重新加载库，这是额外时间的原因。无论如何我可以验证这一点，或者在不使用 Rake 的情况下运行我的整个套件吗？

顺便说一句，当我之前说“用户时间”时，我指的是通过`time`在我的 ruby​​ 命令前面输出的第一个数字来运行单个测试文件，所以`time ruby /path/to/spec.rb`=`ruby path/to/spec.rb 0.43s user 0.06s system 88% cpu 0.559 total`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T07:52:29.693

`spec.rb`在项目的顶级目录中创建一个文件：

```
$:<<'spec'  # add to load path
files = Dir.glob('spec/**/*.rb') 
files.each{|file| require file.gsub(/^spec\/|.rb$/,'')} 
```

运行：

```
ruby spec.rb 
```

如果这对您有用，您可以根据需要重命名`spec.rb`文件，或将其移动到更好的位置，或根据需要更改加载路径等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:03:35.817

这将在文件名末尾带有 _spec.rb 的 spec 目录和子目录中运行任何测试：

```
ruby -Itest spec/**/*_spec.rb 
```

# vb.net - 控制器收到的空表单

> ID：10596479
> 
> 赞同：0
> 
> 时间：2012-05-15T08:00:38.667
> 
> 标签：vb.net, asp.net-mvc-3, razor

我不知道我做错了什么，或者是什么导致了这个错误。当我将此表单提交给控制器时，控制器会收到 2 个空字段：

这是视图内的表单：

```
@Using Html.BeginForm("contactSearch", "search", FormMethod.Post)
    @Html.TextBox("SearchString")
    @Html.DropDownList("opportunite", "Choisissez une opportunité")
    @<input type="submit" value="Submit!" />
End Using 
```

这是控制器：

```
 <HttpPost()>
    Function contactSearch(ByVal search As String, ByVal opportunite As opportunite) As ViewResult
        If opportunite Is Nothing Then
            ModelState.AddModelError("opportunite", "Opportunite is empty")
            ViewBag.opportunite = New SelectList(db.opportunite, "idOpportunite", "nomOffre")
            Return View()
        End If
  ... 
```

* * *

我还有一个小问题，如果我写：

```
 Function contactSearch(ByVal searchString As String, ByVal opportunite As Integer) 
```

如果其中一个字段为空，我会收到此错误：参数字典包含参数“机会”的空条目...

所以，我必须解决这个问题的唯一方法是使用下面的代码。没有更好的方法来解决这个问题吗？

```
 Function contactSearch(ByVal search As String, ByVal opportunite As opportunite) As ViewResult
        Dim opport As Integer = 0
        Try
            opport = Val(Request("opportunite"))
        Catch ex As Exception
        End Try

        If opport = 0 Then 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:03:43.077

您错误地命名了您的操作参数。应该是这样的：

```
<HttpPost()>
Function contactSearch(ByVal searchString As String, ByVal opportunite As String) As ViewResult
    ... 
```

请注意，这 2 个参数的类型为 String。在您的代码中，您`opportunite`为第二个参数使用了一些自定义类型，但这没有意义，因为 DropDownList 只发送选定的值。您不能期望它绑定到复杂类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:08:00.810

你得到“搜索”的价值了吗？

尝试传入表单集合以查看发布的内容

```
 public ActionResult CreateMarketingType(FormCollection form)
 {
      ...
 } 
```

# scala - sbt 中的命令语法更好吗？

> ID：10596482
> 
> 赞同：4
> 
> 时间：2012-05-15T08:00:48.023
> 
> 标签：scala, lift, sbt

在 sbt 0.7.7 和更早的版本中，你可以像这样添加一个新的处理器：

```
*lift is org.lifty lifty 1.6.1 
```

并会像这样使用它：

```
lift create project-blank 
```

我**确实**明白在 sbt 0.10 和更高版本中它们现在被称为命令。

但是，有没有办法缩短这个命令语法？

```
lifty create lift snippet 
```

至

```
lifty create snippet 
```

甚至

```
lift create snippet 
```

这种语法会更简洁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:21:53.463

您可以为命令使用别名。

例如

```
alias lift_create_snippit=lifty create lift snippet 
```

或者

```
alias lcs=lifty create lift snippet 
```

# facebook - 是否可以使用自定义图标更改 facebook“喜欢”按钮？

> ID：10596485
> 
> 赞同：1
> 
> 时间：2012-05-15T08:01:03.423
> 
> 标签：facebook, button, facebook-like

我真的不喜欢 facebook like 按钮如何集成到网站中，所以我想知道是否可以将“like”按钮的所有可能性作为自定义图标传递给不同的 div。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:12:04.757

您可以尝试使用like按钮的css，但我建议不要这样做。

有2个原因：

1.  用户已经习惯了点赞按钮，这是他们所知道和信任的，当他们想要喜欢该页面时，这是他们的眼睛所寻找的。

2.  Facebook 经常更改内容，因此如果您正在使用 css 定义，那么您需要及时了解所有更新，并且不会报告这些更新。

# php - php的农历新年

> ID：10596487
> 
> 赞同：1
> 
> 时间：2012-05-15T08:01:05.017
> 
> 标签：php, internationalization

只是好奇如何将公历日期转换为东亚使用的农历日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:25:10.757

这不是一个简单的算法，因为两个日历都有复杂的规则来解释月球/太阳轨道周期中的非整数天数和太阳周期中月球轨道周期的非整数天数。这可能会有所帮助： http: [//www.mandarintools.com/calconv_old.html](http://www.mandarintools.com/calconv_old.html)

请注意，几乎所有使用互联网的东亚人都熟悉公历。事实上，我想很少有人会知道阴历中的确切年月日。

# java - 如何获取此方法的值

> ID：10596488
> 
> 赞同：-1
> 
> 时间：2012-05-15T08:01:05.090
> 
> 标签：java

我有一个使用数据库的项目，我有一些主要课程，如学生、模块、招生和更多 3 个课程来管理它们。这里的问题是

在学生班我有这个代码

私有字符串 id；

```
@DomainConstraint(optional = false, mutable = true, type = Type.String, length = 50)
private String name;

@DomainConstraint(optional = false, mutable = true, type = Type.String, length = 20)
private String dob;

@DomainConstraint(optional = false, mutable = true, type = Type.String, length = 50)
private String address;

@DomainConstraint(optional = false, mutable = true, type = Type.String, length = 50)
private String email;

private static int autoIncrementInt = 0;

public Student(String name, String dob, String address, String email) {
    this.name = name;
    this.dob = dob;
    this.address = address;
    this.email = email;
    idGenerator();
} 
```

但是在班级 EnrolmentManager 中，我想以学生的名义为他们注册这样的课程

```
public void load() throws SQLException {
    Connection con;
    Properties connectionProps = new Properties();
    // set up properties, e.g. user name/password
    con = DriverManager.getConnection("jdbc:derby:courseman;create=false", connectionProps);
    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery("SELECT Student.name as studentName, Module.name as Modulename, Enrolment.internalMark,Enrolment.examMark FROM Student,Module,Enrolment WHERE Student.id=Enrolment.sid AND Module.code=Enrolment.mcode");

    while (rs.next()) {
        String s = rs.getString("studentName");
        String m = rs.getString("Modulename");
        double y = rs.getDouble("internalMark");
        double d = rs.getDouble("examMark");
        Enrolment e = new Enrolment( s, m, y, d);
        enrolments.add(e);
    }
} 
```

这里有一个错误，因为在类 Enrollment 我有它的 Constructor 是

```
public Enrolment(Student stu, Module module,Double internalMark, Double examMark) {
    this.student = stu;
    this.module = module;
    this.internalMark = internalMark;
    this.examMark = examMark;
    finalGradeGenerator();
} 
```

因此在类中`EnrolmentManager`，它有一个错误是构造函数注册是未定义的。你能帮我解决这个问题吗，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:05:28.630

注册类构造函数期望`Student`( `stu`) 和`Module`对象 ( `module`) 作为参数，但是您将它们解析为`String`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:06:18.693

这是因为您的注册课程期望 Module 和 Student 作为您提供 2 Strings 的参数。

//下面是实际的构造函数

```
public Enrolment(Student stu, Module module,Double internalMark, Double examMark) 
```

但你正在传递

```
public Enrolment(String stu, String module,Double internalMark, Double examMark) 
```

# macos - 以编程方式更改分辨率 OS X

> ID：10596489
> 
> 赞同：3
> 
> 时间：2012-05-15T08:01:15.517
> 
> 标签：macos, cocoa, core-graphics, resolution, macos-carbon

我的问题很简单。我正在开发一款游戏，正如标题所述，我希望能够以编程方式更改 OS X 上的显示分辨率/刷新率。我已经搜索了好几个小时，但找不到任何东西。我已经知道如何创建一个全屏窗口。

我还想获得支持的分辨率和刷新率的列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:44:01.097

来自 Apple 的[Mac OS X OpenGL 编程指南：绘制到全屏](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/OpenGL-MacProgGuide/opengl_fullscreen/opengl_cgl.html)：

> 避免更改用户选择的显示分辨率。如果您的应用程序出于性能原因需要以较低的分辨率渲染数据，您可以显式地以所需的分辨率创建一个后台缓冲区，并允许 OpenGL 将这些结果缩放到显示器。请参阅“<a href="https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/OpenGL-MacProgGuide/opengl_contexts/opengl_contexts.html#//apple_ref/doc/uid/TP40001987-CH216-SW28 “ rel="nofollow">控制后台缓冲区大小。”</p>

也就是说，如果你真的想这样做，你可以使用 Quartz Display Services。请参阅“[更改显示模式](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/QuartzDisplayServicesConceptual/Articles/DisplayModes.html#//apple_ref/doc/uid/TP40004234-SW1)”。在更改显示配置之前，您应该真正捕获显示，如该指南中其他地方所述，否则其他应用程序将移动它们的窗口并调整其大小，并且您的用户会很恼火。（例如，他们的桌面图标可能会重新排列。）

# android - 平板电脑布局限制元素中的宽度

> ID：10596496
> 
> 赞同：0
> 
> 时间：2012-05-15T08:01:49.333
> 
> 标签：android, layout, tablet

我有一个可以在布局和手机上运行的应用程序。一些屏幕使用片段并且一切正常。问题出在某些活动中，例如登录活动。

我想将登录页面中元素的宽度限制为某个最大宽度，以免使其拉伸（使其看起来不自然）。

除了创建新布局之外，还有什么干净的解决方案吗？

感谢托比亚·洛斯基亚沃

# xml - 从 FlightStats SchedulesConnectionsService 获取响应

> ID：10596499
> 
> 赞同：0
> 
> 时间：2012-05-15T08:02:04.653
> 
> 标签：xml, api

我已将 FlightStats SchedulesConnectionsService.wsdl 作为 Web 引用包含在我的 .Net 应用程序中，但不知道如何从 Web 服务作为 XML 获得响应

有没有人有任何想法，这里是服务的链接

[https://www.flightstats.com/developers/bin/view/Web+Services/SchedulesConnectionsService](https://www.flightstats.com/developers/bin/view/Web+Services/SchedulesConnectionsService)

任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:20:05.093

helpdesk@flightstats.com 是您最好的选择。

# javascript - Javascript/jQuery 在不同的屏幕尺寸上启动和停止功能

> ID：10596500
> 
> 赞同：0
> 
> 时间：2012-05-15T08:02:06.460
> 
> 标签：javascript, jquery, window-resize

我根据用户视口的宽度启动了一堆函数。然后，当用户重新调整大小时，我厌倦了编写一些打开和关闭功能的代码。

但是，当我再次调用它时，此功能将停止正常工作。

它是一个为手持设备上的人们提供的展开和折叠菜单，它使用slideUp() 和slideDown() jQuery 函数来打开和关闭每个嵌套列表。

最初调用时它工作正常，但是当用户放大浏览器然后再缩小时，它就坏了。它试图同时展开和折叠。也许我在禁用此功能并再次调用它的方式上犯了错误？如果你想让我更详细地解释我想要什么，请告诉我。

这是我的代码：

```
/*  Load Nav Functions
 *  ------------------
 *  Checks the width of browser and only loads functions that are needed for that size
 */
var viewportWidth = $(window).width();  // store viewport width

if (viewportWidth < 1024 ) {                // fire up mobile nav if screensize small enough
    navToggle();        
    mobileNav();
    addMenuArrows();
    mobileSearchExpand();
} else {
    disableMobileNav();
}

/*  On Resize Events
 *  ----------------
 *  We only want the code to runs after a few milliseconds to improve performance:
 *  http://stackoverflow.com/questions/599288/cross-browser-window-resize-event-javascript-jquery
 */
var resizeTimer;                    // resetable var for the timeout

$(window).resize(function() {

clearTimeout(resizeTimer);      // start from zero

resizeTimer = setTimeout(function() {

    var viewportWidth = $(window).width();

    if (viewportWidth < 1024 ) {
        navToggle();
        mobileNav();
        addMenuArrows();
        resetFooterState();

    } else {
        disableMobileNav();
    } 

}, 100); // end of time out

});

/*
 * Hide Menu and Create Slide Function
 */
function navToggle() {

$('#mainNav').css({'display':'none'});

$('#navToggle').bind("click", function() {

    if (!$('#mainNav').hasClass('down')) {
        $('#mainNav').removeClass('up').addClass('down').stop().slideDown(400);
    } else {
        $('#mainNav').removeClass('down').addClass('up').stop().slideUp(400);
    }

    return false;

});

}

/*
 *  Slide Up or Down Depending on Click 
 */
function mobileNav() {

$('#mainNav li a').bind("click", function() {

    /* jump to parent list item */
    var listItem  = $(this).parent();

    /* store sub menu */
    var subNav    = listItem.children('ul');

    if (!subNav.hasClass('down')) {
        /* display the sub menu */
        subNav.removeClass('up').addClass('down').stop().slideDown(400);
    } else {
        /* hide the sub menu */
        subNav.removeClass('down').addClass('up').stop().slideUp(400);
    }

    return false;

});
}

 /*
 *  Add drop down arrows to menus with sub menus
 */
function addMenuArrows() {

$('#mainNav li').each(function() {

    var hasSubMenu = $(this).children('ul');

    if(hasSubMenu.length) {
        $(this).children('a').addClass('hasSubMenu');
    }

});

}

/*
 *   Reset menu for large display
 */
 function disableMobileNav() {

$('#mainNav').css({'display':'block'});

$('#navToggle').unbind();
$('#mainNav li a').unbind().removeClass('hasSubMenu');

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:23:08.427

您似乎尝试在用户更改浏览器大小时重新绑定事件。这一点都不好。但是您可以先尝试 .unbind() 然后绑定

# regex - 如何在 Vim 中构造一个用于过滤掉文本块的多命令？

> ID：10596502
> 
> 赞同：1
> 
> 时间：2012-05-15T08:02:33.103
> 
> 标签：regex, vim, command, tagging, multiline

[这是我关于在 Vim 中使用多行正则表达式的问题](https://stackoverflow.com/questions/10076834/multi-line-regex-in-vim-filtering-out-blocks-of-text-in-a-file)的后续。

一个简单的解释：我有一些用`#tags`空行标记和分隔的文本块。我想过滤掉所有包含特定标签的块。我在这里得到了正则表达式的帮助（谢谢！），所以我构建了以下命令：

```
command -nargs=1 TagSearch g/^\(.\+\n\)\{-}.*#<args>.*/y a | vnew | put a | %s/^#.*<args>.*\n/&\r 
```

因此，做一个`:TagSearch tag`应该：

1.  搜索`#tag`.
2.  **将所有**相应的文本块粘贴到新的垂直缓冲区中。
3.  在新缓冲区中的文本块之间添加一个空行。

**Q1**：当我分别执行每个步骤时，一切正常。但是多命令**仅将第一个匹配的文本块粘贴**到新缓冲区中。为什么？

**Q2**：如何让命令接受多个参数（如果我想`#tags`一次搜索多个）？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:12:57.380

我在这方面玩得很开心，在这个过程中学到了很多东西！看起来这里有一些问题。

这是我如何使其工作的方法，尽管由于 vim 有很多方法，因此可能有一种更整洁的方法。

g 命令的格式为 g/pattern/command。我认为发生的事情是你原来的形式，| 新 | 放一个| %s... 该命令的一部分是使用 g 命令逐行执行的，而不是作为 TagSearch 命令的一部分执行一次。我将 g 命令更改为“执行”而不是解决问题 - 我很想知道是否有一种方法可以在不使用执行的情况下指定管道适用的内容，我无法让它工作（括号不起作用例如）。这就是为什么你只得到第一行的原因。这给了我们（修正你的 '%s' 命令中的错字）：

```
command! -nargs=1 TagSearch execute 'g/^\(.\+\n\)\{-}.*#<args>.*/y a' | vnew | put a | %s/^.*#<args>.*\n/&\r 
```

不过，这似乎扭转了问题，我们现在只得到新缓冲区中的最后一行。g 命令的另一个问题是，当您执行 /ya 时，它每次都会覆盖 a 寄存器。有一种方法可以让 vim 使用大写的寄存器名称 (/y A) 代替附加到寄存器（参见 :help quotea）。这样做我们需要先使用 let 将寄存器初始化为空白。这给了我们这个：

```
command! -nargs=1 TagSearch let @a='' | execute 'g/^\(.\+\n\)\{-}.*#<args>.*/y A' | vnew | put a | %s/^.*#<args>.*\n/&\r 
```

最后，为了让它使用多个标签执行，我只是摆弄`<args>`了一下（调用 TagSearch tag1 tag2，args 实际上是字符串'tag1 tag2'）以使其适合正则表达式，如下所示：

```
command! -nargs=* TagSearch let @a='' | execute 'g/^\(.\+\n\)\{-}.*#\(' . substitute('<args>', ' ', '\\|', 'g') . '\).*/y A' | vnew | put a | execute '%s/^.*#\(' . substitute('<args>', ' ', '\\|', 'g') . '\).*\n/&\r' 
```

如果您为此添加更多功能，您可能想尝试使用一些 vimscript 函数或其他东西，否则可能很难维护！您将能够将文本块抓取到漂亮的列表中，并可能更轻松地处理它们，而不必像实际打字一样做所有事情。查看 :help 功能，了解可用的东西（尽管其他地方的 vimscript 帮助可能有更好的起点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:43:55.687

可以使用以下实现。

```
command! -nargs=* -bar TagSearch call CollectParagraphs([<f-args>])

function! CollectParagraphs(tags) range
    let tags = len(a:tags) > 0 ? a:tags : [expand('<cword>')]
    let pats = map(copy(tags), '"\\.\\*#" . escape(v:val, "\\")')

    let v = winsaveview()
    let [sr, @/; lines] = [@/, '\V' . join(pats, '\&')]
    g//call extend(lines, getline(search('\n\n\zs', 'bnW'), line("'}")))
    let @/ = sr
    call winrestview(v)

    exe 'vnew' escape(join(tags), ' %#|\')
    set buftype=nofile bufhidden=hide noswapfile
    call setline(1, lines)
endfunction 
```

# javascript - 添加多个文本框值的值

> ID：10596507
> 
> 赞同：1
> 
> 时间：2012-05-15T08:03:02.687
> 
> 标签：javascript, jquery

我有多个带有类名的文本框`.paymentamount`。我想添加同一类的文本框的所有值，但我收到错误 nan.Code 是这个

```
function paymentData()
{
    $('.paymentamount').keyup(function(){
        var amountSum=0;
        $('.paymentamount').each(function(){
            amountSum+=parseInt(this.value);
        //console.log(this.value);
        });
        console.log(amountSum);

        });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:04:48.580

```
 1\. $.trim($(this).val())
   2\. make use of $(this).val()
   3\. check before adding var match = /^[0-9]$/.test(value); 
```

对您的代码进行此修改后的最终代码

```
 $('.paymentamount').each(function(){
           var value = $.trim($(this).val()); 
           var match = /^[0-9]$/.test(value); 
           if(match)
             amountSum+=parseInt(value);
         //console.log(this.value);
         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:09:52.327

```
function paymentData()
{
    $('.paymentamount').keyup(function(){
        var amountSum=0;
        $('.paymentamount').each(function(){
            amountSum+=parseFloat($.trim($(this).val()));

        });
        console.log(amountSum);

        });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:09:57.800

Hiya**演示** [http://jsfiddle.net/MaK2k/1/](http://jsfiddle.net/MaK2k/1/) **或**使用`$.isNumeric` [http://jsfiddle.net/AKnvr/](http://jsfiddle.net/AKnvr/)

```
**Code**

$('.paymentamount').keyup(function(){
   var amountSum=0;
    $('.paymentamount').each(function(){
        if (this.value != "")
           amountSum+=parseInt(this.value);

    });

    $(".paymentamountlable").text(amountSum);

    }); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:20:25.600

```
$('.paymentamount').keyup(function(){
    var amountSum=0;
    $('.paymentamount').each(function(){
        if(parseInt(this.value) > 0)
        {
        amountSum = parseInt(this.value) + parseInt(amountSum);
        }
    }); 

 console.log(amountSum);
});

Try this 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-15T08:08:45.773

你应该试试：

```
amountSum+=parseInt($(this).val()); 
```

# linux - unix下如何将两个命令合二为一？

> ID：10596511
> 
> 赞同：2
> 
> 时间：2012-05-15T08:03:17.370
> 
> 标签：linux, unix, vim, ubuntu

通常我通过在终端中键入开始调试java程序`jdb`，然后它将进入调试模式，然后我可以输入“stop at com.android.contacts.dirtyImport.DirtyImportManager:95”来告诉jdb在某行停止。

现在问题来了：我如何将这两个 cmds 输入一个。类似“jdb < stop at com.android.contacts.dirtyImport.DirtyImportManager:95”。我有这个要求的原因是我想让vim自动生成调试信息并进入调试模式，停止制作断点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:45:43.493

一种选择是在标准输入前添加一行：

```
{ echo "stop at com.android.contacts.dirtyImport.DirtyImportManager:95"; cat; } | jdb 
```

这将启动一个子shell ( `{}`)，它首先打印给定的行，`echo`然后读取标准输入并将读取的行打印到标准输出 ( `cat`)。整个输入通过管道传输到 jdb。

然而，这会混淆一些区分终端输入和管道输入的程序。在这种情况下，您需要查看程序的引用，因为调试器通常支持从文件执行命令（如`gdb`）`-x`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:39:02.610

我不确定，但您可能会考虑生成`expect`脚本。[这是一个教程](http://archive09.linux.com/feature/128384)，它对`gdb`自动化做了一些事情。

# android - 如何在 Android 中为 TextView 设置 LAYOUTGRAVITY？

> ID：10596514
> 
> 赞同：4
> 
> 时间：2012-05-15T08:03:37.460
> 
> 标签：android, android-layout, textview

如何通过代码设置 TextView 的 layout_gravity？

我尝试使用 layoutparams 没有任何好的结果。

```
new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT, Gravity.LEFT | Gravity.CENTER_VERTICAL); 
```

使用这个之后，我的文本就停留在标准的位置，在左上角。宽度：FILL_PARENT 或重力代码都没有做任何事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T08:07:03.590

```
FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.LEFT | Gravity.CENTER_VERTICAL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:12:07.470

您可以使用以下代码在代码中使用重力：

```
 Button button = (Button) findViewById(R.id.MyButtonId);
    // need to cast to LinearLayout.LayoutParams to access the gravity field
    LayoutParams params = (LayoutParams)button.getLayoutParams(); 
    params.gravity = Gravity.BOTTOM;
    button.setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:13:36.317

[Android 以编程方式设置 TextView 的重力](https://stackoverflow.com/questions/3775705/android-set-the-gravity-for-a-textview-programmatically) 你看到这个响应了吗？

```
TextView tv  = (TextView) findViewById(R.layout.text_view);   
tv.setGravity(Gravity.CENTER | Gravity.BOTTOM); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:10:23.740

```
 layout = (LinearLayout) findViewById(R.id.vendor_detail_lay);
    LinearLayout linearLayout = new LinearLayout(getApplicationContext());
    linearLayout.setOrientation(0);
    txtveiw = new TextView(NewVendorDetailActivity.this);
    txtveiw.setLayoutParams(Gravity.LEFT | Gravity.CENTER_VERTICAL);
    txtveiw.setId(itemId);
    txtveiw.setText(cursor.getString(cursor.getColumnIndex(DataBaseHelper.KEYNAME)));

    linearLayout.addView(txtveiw);
    layout.addView(linearLayout); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-08-14T13:14:43.580

保留现有布局参数的最佳解决方案：

*   您需要使用父布局的 LayoutParams（因此**layout_gravity**）
*   例如，如果父母是 FrameLayout 做：

    ```
    FrameLayout.LayoutParams layoutParams = 
        new FrameLayout.LayoutParams(textView.getLayoutParams());
    layoutParams.gravity = Gravity.BOTTOM | Gravity.RIGHT;
    textView.setLayoutParams(layoutParams); 
    ```

# c# - 从 ResourceDictionary 设置 WindowStartupLocation 会引发 XamlParseException

> ID：10596515
> 
> 赞同：10
> 
> 时间：2012-05-15T08:03:43.140
> 
> 标签：c#, wpf, .net-4.0, resourcedictionary

当我尝试通过 a中的 a设置`WindowStartupLocation`属性时，我得到一个：`Setter``ResourceDictionary``XamlParseException`

> '设置属性'System.Windows.Setter.Property' 引发异常。行号“x”和行位置“y”。

内部异常是`ArgumentNullException`：

> 值不能为空。参数名称：属性。

我在资源字典中的风格是：

```
<Style TargetType="Window" x:Key="WindowStyle">
    <Setter Property="SizeToContent" Value="WidthAndHeight" />
    <Setter Property="ResizeMode" Value="CanMinimize" />
    <Setter Property="WindowStartupLocation" Value="CenterOwner" />
</Style> 
```

问题不在于使用`ResourceDictionary`，因为当我删除 时`WindowStartupLocation`，其他两个属性（`SizeToContent`和`ResizeMode`）在引用该样式的窗口上按预期设置：

```
<Window x:Class="WpfApplication1.MyWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Style="{DynamicResource WindowStyle}">
    <Window.Resources>
        <ResourceDictionary Source="MyResourceDictionary.xaml" />
    </Window.Resources>
</Window> 
```

有没有人遇到过这个？这是 WPF 的错误/限制吗？

PS我知道这个问题类似于[Window Startup Location from resource dictionary](https://stackoverflow.com/questions/9976097/window-startup-location-from-resource-dictionary)，但在另一个问题中没有提供足够的信息，随后仍未解决。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T08:27:42.857

问题是 WindowStartupLocation 不是 DependencyProperty 所以你不能在样式设置器中设置它。查看 ILSpy 的 Setter 调用

```
CheckValidProperty(DependencyProperty property) 
```

并抛出 NullArgumentException。

由于 WindowStartupLocation 只是一个 CLR 属性，所以不能这样设置。

**`Edit:`**回应评论。您仍然可以使用`ResourceDictionary`：

```
<Application.Resources>
    <ResourceDictionary>
        <Style x:Key="WindowStyle" TargetType="Window">
            <Setter Property="SizeToContent" Value="WidthAndHeight" />
            <Setter Property="ResizeMode" Value="CanMinimize" />
        </Style>
        <WindowStartupLocation x:Key="WSL">CenterOwner</WindowStartupLocation>
    </ResourceDictionary>
</Application.Resources>

<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"            
        WindowStartupLocation="{StaticResource WSL}"
        Style="{StaticResource WindowStyle}" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-17T05:31:15.287

`WindowStartupLocation`是一个 CLR 属性，这可以在以下位置看到[`ILSpy`](http://ilspy.net)：

```
[DefaultValue(WindowStartupLocation.Manual)]
public WindowStartupLocation WindowStartupLocation
{
    get
    {
        this.VerifyContextAndObjectState();
        this.VerifyApiSupported();
        return this._windowStartupLocation;
    }

    set
    {
        this.VerifyContextAndObjectState();
        this.VerifyApiSupported();

        if (!Window.IsValidWindowStartupLocation(value))
        {
            throw new InvalidEnumArgumentException("value", (int)value, typeof(WindowStartupLocation));
        }

        this._windowStartupLocation = value;
    }
} 
```

在样式设置器中只能指定依赖属性。有两种方法可以解决这个问题：

*   继承类`Window`，并使用依赖属性创建您的类`WindowStartupLocation`

*   根据 PropertyChanged创建附加属性类型`WindowStartupLocation`并定义逻辑

第一种方法比较麻烦，因为需要为一个属性重新定义类。第二种方法是首选，并且会附加行为，但我会调用`PropertyExtension`.

这是完整的代码：

```
namespace YourProject.PropertiesExtension
{
    public static class WindowExt
    {
        public static readonly DependencyProperty WindowStartupLocationProperty;

        public static void SetWindowStartupLocation(DependencyObject DepObject, WindowStartupLocation value)
        {
            DepObject.SetValue(WindowStartupLocationProperty, value);
        }

        public static WindowStartupLocation GetWindowStartupLocation(DependencyObject DepObject)
        {
            return (WindowStartupLocation)DepObject.GetValue(WindowStartupLocationProperty);
        }

        static WindowExt() 
        {            
            WindowStartupLocationProperty = DependencyProperty.RegisterAttached("WindowStartupLocation",
                                                      typeof(WindowStartupLocation),
                                                      typeof(WindowExt),
                                                      new UIPropertyMetadata(WindowStartupLocation.Manual, OnWindowStartupLocationChanged));
        }

        private static void OnWindowStartupLocationChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
        {
            Window window = sender as Window; 

            if (window != null) 
            {
                window.WindowStartupLocation = GetWindowStartupLocation(window);
            }
        }
    }
} 
```

使用示例：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:PropertiesExtension="clr-namespace:YourProject.PropertiesExtension">

    <Style TargetType="{x:Type Window}">            
        <Setter Property="PropertiesExtension:WindowExt.WindowStartupLocation" Value="CenterScreen" />
        <Setter Property="Width" Value="723" />
        <Setter Property="Height" Value="653" />
        <Setter Property="Title" Value="MainWindow title string" />    
    </Style>
</ResourceDictionary> 
```

# php - 如何清除 PHP 启动警告？

> ID：10596518
> 
> 赞同：0
> 
> 时间：2012-05-15T08:03:57.063
> 
> 标签：php

我有一个共享主机并编写了一个 php shell 来获取管道电子邮件。该主机总是会生成这样的错误日志：

```
PHP Warning:  PHP Startup: Suhosin Extension does not officially support PHP 5.2 and below anymore, because it is discontinued. Use it at your own risk. in Unknown on line 0 
```

这个警告传递给邮件传递软件，它认为邮件没有收到。我尝试将**error_reporting(0)**和**ob_start()**与**ob_end_clean()**一起使用。但是这个错误仍然传递给邮件传递软件。如何**在我的脚本中使用 PHP 代码**清除 PHP 启动警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:08:37.177

你试过这些选项吗？: display_startup_errors & display_errors

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:10:10.587

在您的 php.ini 文件中查找“display_errors”并将其设置为 Off。如果您无权访问 php.ini 文件，请在 php 文件的开头放置： ini_set("display_errors","Off");

尝试这个 ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:14:08.640

你的意思是你在shell中的php中得到这个启动错误，但在普通网页上没有？如果是这样，你如何通过 shell 传递命令？您是否尝试过将 stderr 重定向到 /dev/null ？-- 即附加`2>/dev/null`到命令。

替代hackage可能包括通过grep管道过滤掉线路。

# php - 无法通过 PHP 在 Perl 脚本中正确执行 copy() 函数

> ID：10596521
> 
> 赞同：1
> 
> 时间：2012-05-15T08:04:12.027
> 
> 标签：php, perl

我是 Perl 的完全初学者。假设我有这个 PHP 和 Perl 脚本，它在重命名文件后将文件复制到其目录中：

PHP：

```
<?php
exec("perl /home/me/Desktop/my.pl 2>&1");
?> 
```

珀尔：

```
#!/usr/bin/perl
use File::Copy;
chdir("/home/me/Desktop");
copy("file1.txt", "file2.txt") or die "File cannot be copied."; 
```

此代码在使用终端调用时有效（使用调用或`my.pl`使用`perl ~/Desktop/my.pl`调用php文件`php /var/www/sample.php`）。

但是，当我使用`localhost/sample.php`. 而且我确信 Apache 没有问题。

谁能解释正在发生的事情，以及应该做些什么来获得预期的结果？

# iphone - 我们可以在Coredata中将图像存储为字符串类型的数据吗

> ID：10596523
> 
> 赞同：0
> 
> 时间：2012-05-15T08:04:26.170
> 
> 标签：iphone

在我的 iOS 项目中，我遇到了一个以字符串格式存储图像的问题。我正在使用 Coredata。我正在使用 SQLite 数据库浏览器将值插入数据库。有没有办法以字符串格式存储图像并在我的项目中检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:21:05.833

如果要将 NSData 转换为字符串，可以尝试一些编码，例如[base64](https://github.com/yllan/FoundationAddition/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:06:49.613

您可以将其存储在`NSData`类型属性中。

# c# - 使用 C# 创建图表

> ID：10596525
> 
> 赞同：1
> 
> 时间：2012-05-15T08:04:35.103
> 
> 标签：c#, winforms, visual-studio-2010, dynamic, charts

有人知道如何通过代码创建图表吗？C#，Visual Studio 2010。（表单应用程序）如果我使用“拖动”方法（如果我手动添加）生成的代码是

`private System.Windows.Forms.DataVisualization.Charting.Chart chart1;`

但是当我尝试使用相同的东西时，它就不起作用了。我找不到女巫女巫“使用”我应该使用。看起来“System.Windows.Forms.DataVisualization”不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:06:44.410

您需要数据可视化的实际 .DLL。您需要从 Microsoft 下载 .dll 或应该在其中。尝试编译项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:17:41.207

您必须添加对`System.Windows.Forms.DataVisualization`. 然后你可以写：

```
private System.Windows.Forms.DataVisualization.Charting.Chart _MyChart; 
```

或者

```
using System.Windows.Forms.DataVisualization.Charting;
private Chart _MyChart; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:04:26.493

你可以看看[FusionCharts](http://fusioncharts.com/)。

它是一个 JavaScript 图表库。但是，它们提供了一个 .dll 文件，您可以将其导入 Visual Studio 项目并自动生成 HTML + JavaScript 代码。

这是他们博客中的[教程系列](http://blog.fusioncharts.com/2012/03/javascript-charts-using-sql-server-data-with-fusioncharts-xt-part-2/)。

# php - PHP 正则表达式字符串格式化带有错误 preg_replace() 的聊天对话框

> ID：10596533
> 
> 赞同：1
> 
> 时间：2012-05-15T08:05:26.417
> 
> 标签：php, regex

我正在为下面的聊天对话框进行格式化：

*   Dalvik: Lorem ipsum dolor sit amet
*   Jenni：Suspendisse facilisis pretium ante，
*   Dalvik: Vivamus feugiat dui ut libero rhoncus nec porttitor velit posuere。
*   Jenni: Aenean porttitor ipsum eu metus adipiscing
*   Dalvik: **(Sed vehicula:** magna vitae nulla
*   Jenni: sed dui quam, vitae consectetur dui。
*   Jenni: Curabitur vulputate ante :)

上面的粗体字; 它在我的替换语句中出错：

```
$name = self::getNameFromMessage($textFormat);
$color = self::getNewTextColor();
$replacement = "<br/><font color='$color'>$name</font>:";
$textFormat = preg_replace(
           $pattern = "/$name :\s/i", //find $name in $textFormat and set text color
           $replacement, 
           $subject = $textFormat
); 
```

**错误**：preg_replace() [function.preg-replace]: Compilation failed: missing ) at offset 15

你能建议我一个更好的正则表达式字符串吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:07:36.297

该错误是由于未引用您的正则表达式引起的，在您的示例中，正则表达式找到 a `(`，然后它希望找到一个 close `)`。如果要匹配文字`()`或其他正则表达式元字符，则需要引用您的正则表达式：

```
$pattern = preg_quote("/$name :\s/i"); 
```

# android - android中xml的验证器（xsd）

> ID：10596540
> 
> 赞同：1
> 
> 时间：2012-05-15T08:05:44.060
> 
> 标签：android, xml, xsd, validation

我在 Android 中有一个使用 API 10（2.3.3 版本）的项目，我在使用 xsd 文件验证 xml 时遇到问题。这是我的代码：

```
public static Document buildDoc(String xml, String xsd){
     // parse an XML document into a DOM tree
    Document document = null;

   try {            

       DocumentBuilderFactory parserFactory = DocumentBuilderFactory.newInstance();
        parserFactory.setNamespaceAware(true);
        DocumentBuilder parserdb = parserFactory.newDocumentBuilder();
        doc = parserdb.parse(new InputSource( new StringReader(xml)  ));

       SchemaFactory factory = SchemaFactory.newInstance(
                      XMLConstants.W3C_XML_SCHEMA_NS_URI);     //here the emulator raises an exception

        Source schemaFile = new StreamSource(new File(xsd));
        Schema schema = factory.newSchema(schemaFile);

        Validator validator = schema.newValidator();

        // validate the DOM tree
        validator.validate(new DOMSource(doc));
        System.out.println("Validation OK!");
    } catch (SAXException e) {
        // instance document is invalid!
             System.err.println("Validation ERROR!");
            e.printStackTrace();

    } catch (ParserConfigurationException e) {
                    // TODO Auto-generated catch block
             System.err.println("Validation ERROR!");
                    e.printStackTrace();
    } catch (IllegalArgumentException e) {
                    // TODO Auto-generated catch block
             System.err.println("Validation ERROR!");              
            } catch (IOException e) {
                    // TODO Auto-generated catch block
                     System.err.println("Validation ERROR!");
                    e.printStackTrace();

            }

    return doc;

} 
```

我的 Eclipse 模拟器抛出异常：E/AndroidRuntime(4770)：原因：java.lang.IllegalArgumentException：[http ://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)

在这一行中： SchemaFactory factory = SchemaFactory.newInstance( XMLConstants.W3C_XML_SCHEMA_NS_URI);

为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:15:33.713

因为您的平台不支持 XML 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T22:36:55.970

如果您的问题不仅仅是**为什么？**以及更多我该怎么做...那么以下可能是您可能喜欢的替代方法。

我发现我无法让常规的 xerces 与 Android 一起使用，但是我确实找到了 Xerces-for-Android，我可以使用它。以下是设置的详细信息和一些示例代码。祝你好运 ：）

以下对我有用：

1.  创建验证实用程序。
2.  将 xml 和 xsd 都放入 android 操作系统上的文件中，并针对它使用验证实用程序。
3.  使用 Xerces-For-Android 进行验证。

Android确实支持我们可以使用的一些包，我创建了我的xml验证实用程序基于：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html)

我最初的沙盒测试使用 java 非常顺利，然后我尝试将其移植到 Dalvik 并发现我的代码不起作用。Dalvik 不支持某些东西，所以我做了一些修改。

我找到了对 android 的 xerces 的引用，所以我修改了我的沙盒测试（**以下不适用于 android，之后的示例可以**）：

```
import java.io.File;

import javax.xml.XMLConstants;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.Source;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import javax.xml.validation.Validator;

import org.w3c.dom.Document;

/**
 * A Utility to help with xml communication validation.
 */
public class XmlUtil {

    /**
     * Validation method. 
     * Base code/example from: http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html
     * 
     * @param xmlFilePath The xml file we are trying to validate.
     * @param xmlSchemaFilePath The schema file we are using for the validation. This method assumes the schema file is valid.
     * @return True if valid, false if not valid or bad parse. 
     */
    public static boolean validate(String xmlFilePath, String xmlSchemaFilePath) {

        // parse an XML document into a DOM tree
        DocumentBuilder parser = null;
        Document document;

        // Try the validation, we assume that if there are any issues with the validation
        // process that the input is invalid.
        try {
            // validate the DOM tree
            parser = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            document = parser.parse(new File(xmlFilePath));

            // create a SchemaFactory capable of understanding WXS schemas
            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

            // load a WXS schema, represented by a Schema instance
            Source schemaFile = new StreamSource(new File(xmlSchemaFilePath));
            Schema schema = factory.newSchema(schemaFile);

            // create a Validator instance, which can be used to validate an instance document
            Validator validator = schema.newValidator();
            validator.validate(new DOMSource(document));
        } catch (Exception e) {
            // Catches: SAXException, ParserConfigurationException, and IOException.
            return false;
        }     

        return true;
    }
} 
```

上面的代码必须进行一些修改才能与 xerces for android ( [http://gc.codehum.com/p/xerces-for-android/](http://gc.codehum.com/p/xerces-for-android/) ) 一起使用。你需要SVN来获取项目，以下是一些婴儿床笔记：

```
download xerces-for-android
    download silk svn (for windows users) from http://www.sliksvn.com/en/download
        install silk svn (I did complete install)
        Once the install is complete, you should have svn in your system path.
        Test by typing "svn" from the command line.
        I went to my desktop then downloaded the xerces project by:
            svn checkout http://xerces-for-android.googlecode.com/svn/trunk/ xerces-for-android-read-only
        You should then have a new folder on your desktop called xerces-for-android-read-only 
```

使用上面的jar（最终我会把它做成一个jar，直接复制到我的源代码中以便快速测试。如果你想这样做，你可以用Ant快速制作jar（[http://ant.apache .org/manual/using.html](http://ant.apache.org/manual/using.html) ))，我能够获得以下内容来进行我的 xml 验证：

```
import java.io.File;
import java.io.IOException;

import mf.javax.xml.transform.Source;
import mf.javax.xml.transform.stream.StreamSource;
import mf.javax.xml.validation.Schema;
import mf.javax.xml.validation.SchemaFactory;
import mf.javax.xml.validation.Validator;
import mf.org.apache.xerces.jaxp.validation.XMLSchemaFactory;

import org.xml.sax.SAXException;

/**
 * A Utility to help with xml communication validation.
 */public class XmlUtil {

    /**
     * Validation method. 
     * 
     * @param xmlFilePath The xml file we are trying to validate.
     * @param xmlSchemaFilePath The schema file we are using for the validation. This method assumes the schema file is valid.
     * @return True if valid, false if not valid or bad parse or exception/error during parse. 
     */
    public static boolean validate(String xmlFilePath, String xmlSchemaFilePath) {

        // Try the validation, we assume that if there are any issues with the validation
        // process that the input is invalid.
        try {
            SchemaFactory  factory = new XMLSchemaFactory();
            Source schemaFile = new StreamSource(new File(xmlSchemaFilePath));
            Source xmlSource = new StreamSource(new File(xmlFilePath));
            Schema schema = factory.newSchema(schemaFile);
            Validator validator = schema.newValidator();
            validator.validate(xmlSource);
        } catch (SAXException e) {
            return false;
        } catch (IOException e) {
            return false;
        } catch (Exception e) {
            // Catches everything beyond: SAXException, and IOException.
            e.printStackTrace();
            return false;
        } catch (Error e) {
            // Needed this for debugging when I was having issues with my 1st set of code.
            e.printStackTrace();
            return false;
        }

        return true;
    }
} 
```

**一些旁注：**

为了创建文件，我制作了一个简单的文件实用程序来将字符串写入文件：

```
public static void createFileFromString(String fileText, String fileName) {
    try {
        File file = new File(fileName);
        BufferedWriter output = new BufferedWriter(new FileWriter(file));
        output.write(fileText);
        output.close();
    } catch ( IOException e ) {
       e.printStackTrace();
    }
} 
```

我还需要写一个我可以访问的区域，所以我使用了：

```
String path = this.getActivity().getPackageManager().getPackageInfo(getPackageName(), 0).applicationInfo.dataDir; 
```

有点hackish，它有效。我确信有一种更简洁的方法可以做到这一点，但是我想我会分享我的成功，因为我没有找到任何好的例子。

# mysql - 合并两个数据库中的表

> ID：10596541
> 
> 赞同：-2
> 
> 时间：2012-05-15T08:05:44.427
> 
> 标签：mysql, sql, sql-server

我目前有两个不同的数据库，我想将表 A 中的所有列复制或合并到表 B 中。我正在使用以下命令

```
USE B;
INSERT INTO B SELECT * FROM A.col1;
INSERT INTO B SELECT * FROM A.col2;
etc 
```

我想要实现的是

例如，数据库 A 包含表 (A_1, A_2)；数据库 B 包含表（B_1，B_2）；新创建的 B 应该是 (A_1, A_2, B_1, B_2)

谢谢天哪，它根本不起作用；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:11:12.803

我没有得到你。

是否要合并表的列

或合并数据库的表？

将 2 个表的列合并为 1 个表

```
select t1.col1,t1.col2,t2.col1,t2.col2
into newtable 
from table1,table2 
```

* * *

但是要合并数据库中的所有表，这要简单得多。只需创建数据库并从两个数据库中导入表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:08:45.197

在 sql-server 中创建一个到 mysql 的链接服务器，并使用 openquery 从 mysql 数据库中访问表。

**如何在SqlServer中创建MySql的链接服务器**

```
EXEC master.dbo.sp_addlinkedserver @server = N'LinkServerName', 
@srvproduct=N'anything',
 @provider=N'MSDASQL',
  @datasrc=N'DBNAME', 
  @provstr=N'gr_uid=userid; gr_pwd=password',
   @catalog=N'dbase'

EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'LinkServerName',
@useself=N'false',
@locallogin=null,
@rmtuser=userid,
@rmtpassword=password 
```

**如何通过 LinkServer 从 mySql 访问表数据。**

```
Select *  FROM OPENQUERY([LinkServerName],'SELECT * FROM MySqlTableName') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:23:31.990

```
USE B;
INSERT INTO B SELECT * FROM A.col1;
INSERT INTO B SELECT * FROM A.col2;
etc 
```

该代码不正确。

这是 sql server 的简单示例：

```
USE [DATABASE];
INSERT INTO [DESTINATION TABLE] SELECT * FROM [DATABASE].[SCHEMA].[SOURCE TABLE] 
```

或者

```
SELECT * INTO [NEW TABLE] FROM [DATABASE].[SCHEMA].[SOURCE TABLE] 
```

我建议在表中显式写入列。

# c# - 什么会导致内存泄漏（或不断增加）？共享内存 DLL + c# 应用程序

> ID：10596542
> 
> 赞同：1
> 
> 时间：2012-05-15T08:05:46.537
> 
> 标签：c#, c++, c

我有简单的共享内存 DLL，用于从非托管应用程序到托管应用程序的进程间数据交换。而且我注意到我的托管应用程序内存的大小正在稳步增长。有人可以建议可能是什么原因，如何找到它以及如何解决它？以下代码的相关部分。

cpp SharedMem.DLL：

```
#pragma data_seg( ".IPC" )
....
double darr[MAXITEMS] = { 0.0 } ; 
....
#pragma data_seg()
....
double __stdcall MGetDouble (int idx)
{
    if ( idx>= 0 && idx < MAXITEMS)
    {
        return darr[idx]; 
    }
    else
    {
        return -1.0 ; 
    }
}

int __stdcall MSetDouble (int idx, double dvalue)
{
    if ( idx>= 0 && idx< MAXITEMS)
    {
        darr[idx] = dvalue;
        return idx;
    }
    else
    {
        return -1;
    }
} 
```

和 c# 应用程序：

```
[DllImport("SharedMem.DLL", CallingConvention = CallingConvention.StdCall)]
public static extern double MGetDouble(int index);

....

private void timer1_Tick(object sender, EventArgs e)
{
    ThreadPool.QueueUserWorkItem(dosmth);
}

public object lockobj = new object();

public void dosmth(object o)
{
    if (Monitor.TryEnter(lockobj, 50))
    {
        ....
        double[,] matrix = new double[size, TSIZE];
        ....
        double gvd;
        int k;
        for (int i = 0; i < lines; i++)
            for (j = 0; j < TSIZE; j++) 
            {
                k++; //k can be up to 2k-4k typically
                gvd = MGetDouble(k);
                matrix[i, j] = gvd;
            }
            //... do the stuff
         Monitor.Exit(lockobj);        
     }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:35:25.787

QueueUserWorkItem 将在线程池（TP）上运行您的方法 - 如果先前的请求尚未完成，新请求将阻塞 TP 线程。一段时间后，如果 TP 在空闲线程上运行不足，它将开始创建更多线程，每个线程至少消耗 1MB 堆栈。

如果这对您的应用程序有意义，您可能希望在前一个请求完成后运行新请求（例如 - 运行计时器以便它执行一次并使用 Timer.Change 在您完成处理时安排下一个执行时间） .

您还可以将[WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009)与[SOS 扩展](http://msdn.microsoft.com/en-us/library/bb190764.aspx)一起使用，并使用 DumpHeap/HeapStat 等命令检查您的根，以查看您的内存的确切位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:38:09.657

试试这个方法：

```
public class doSmthClass()
{
    public void doSmthfromClass(...
} 
```

并改变你的“外部”做某事：

```
public void dosmth(object o)
{
  :
  var myInstance = new doSmthClass();
  myInstance.doSmthFromClass();
  :
} 
```

# java - 如何摆脱 IBM RAD 8 / Eclipse 中的错误错误？

> ID：10596544
> 
> 赞同：2
> 
> 时间：2012-05-15T08:05:53.383
> 
> 标签：java, eclipse, jsp, jakarta-ee, ibm-rad

我使用 JSP 包含并从我的 IDE（IBM RAD 8）中收到一个错误，它找不到变量并且无法解析导入，但这些变量和导入实际上是在包含我的 IDE 的 JSP 的文件中处理的抱怨。那么是否有一些设置或类似的设置可以用来消除这种误报，因为包含的 JSP 使用包含它的页面中的变量不是编译错误？ ![在此处输入图像描述](../Images/17e042454140c3a9fdc7b18078d0bcf1.png) 对于包含，如果 IDE 找不到它，我们应该能够设置引用包含的内容，这样就不会出现此错误错误。这个设置怎么可能？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:01:33.557

如果您使用`jspf`片段的默认扩展名，IDE 应该能够区分页面及其依赖项。请参阅[RAD 信息中心](http://publib.boulder.ibm.com/infocenter/radhelp/v8/topic/com.ibm.etools.pagedesigner.doc/topics/cpagefrag.html)。

`include`完成此操作后，如果容器不提供依赖项，则会在声明中显示验证错误。

* * *

*顺便说一句：考虑放弃脚本以支持表达式语言；考虑使用 JSP 注释而不是 HTML 注释。有关更多信息，请参阅[JSP 样式指南](http://java.sun.com/developer/technicalArticles/javaserverpages/code_convention/)。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:19:39.393

我有同样的问题。您可以在 RAD 中关闭验证。如果可能，只有 .jspf 文件应该无法编译，您只能排除这些文件。但是，如果 .jsp 文件中有不可编译的片段，则必须关闭所有 .jsp 文件的验证，并失去 .jsp 验证的好处！

过程在这里。（虽然它说的是 RAD 7，但它也适用于 RAD 8。）

1.  首先禁用 .jspf 文件的验证：[http ://www-01.ibm.com/support/docview.wss?uid=swg21284702](http://www-01.ibm.com/support/docview.wss?uid=swg21284702)

2.  如果您需要禁用 .jsp 文件的验证，请转到 Window -> Preferences（或右键单击项目并选择 Preferences，以对项目而不是整个工作区进行此更改）并转到 Validation 选项。取消选中 JSP Syntax Validator 的两个复选框。我不建议这样做，因为 RAD 将不再帮助您找到合法的 JSP 语法错误，但是如果没有其他错误，您的项目应该验证和编译。

# c# - 如何验证 5 个选项卡中是否启用了 Selenium RC C#？

> ID：10596545
> 
> 赞同：0
> 
> 时间：2012-05-15T08:05:58.257
> 
> 标签：c#, selenium-rc

我在一个页面中有 5 个选项卡，单击选项卡后，它需要执行一些功能。但是我怎么知道选择了哪个选项卡以及是否启用了选项卡，单击该选项卡并执行必要的功能。如果未启用，它将检查下一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:14:42.540

这取决于如何在 HTML/javascript 中定义选项卡。

您应该使用 Firefox 的 Firebug 插件或 Chrome 的“检查元素”之类的东西来查找负责的 HTML 标记，然后使用 Selenium 的选择器（例如 XPath）来查找它们。

例如，如果选项卡是使用[JQuery-UI](http://jqueryui.com/demos/tabs/)生成的，则选项卡容器是一个`<ul>`带有 class 的标签`ui-tabs-nav`，而活动选项卡是一个`<li>`带有 class的标签`ui-state-active`。

[Selenium 可以使用XPath](http://wiki.openqa.org/display/SEL/Help+With+XPath)选择这些元素，以便对它们执行操作。

# c# - 提供下载链接，无需在服务器上创建文件

> ID：10596546
> 
> 赞同：3
> 
> 时间：2012-05-15T08:06:00.240
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, zip, dotnetzip

我想创建一个文件并将其下载而不将其放在服务器上。

```
public ActionResult DownloadZip(Guid id){
    using (ZipFile zip = new ZipFile())
    {
        zip.Password = "123456!";
        // GenareteString();
        // add string to file
        // save zip

        //return zip to user
    }
    return View();
} 
```

怎么做

我使用 DotNetZip

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:21:34.513

你不使用`return View()`但类似的东西：

```
return File(myMemoryStream,                           // zipped data
    System.Net.Mime.MediaTypeNames.Application.Zip,   // "application/zip"
    "default.zip");                                   // suggested download name 
```

有一些重载可用。

和辅助函数`Controller.File()`都`Controller.View()`返回从`ActionResult`.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-15T08:07:57.297

您需要一台服务器来为人们服务。您不能只编写一个函数并通过互联网将其发送给没有任何“服务器”机制的人。

# opengl - 正确转换表面法线

> ID：10596548
> 
> 赞同：6
> 
> 时间：2012-05-15T08:06:07.530
> 
> 标签：opengl, 3d

根据 OpenGL 红皮书，附录 F，可以使用常规 3D 变换矩阵 M 来计算法线向量上的动作：

```
normalTransformed = transpose(inverse(M)) * normal 
```

然而，虽然与变换法线相关的正交平面确实平行于变换后的表面，但变换后的法线向量本身可能指向与我预期相反的方向，即“进入”表面而不是“出表面。

如果我希望 normalTransformed 指向正确的方向（即，与它所连接的表面未变换时指向的方向相同），我应该如何在数学上做到这一点？

**例子**

假设我的表面法线是 (0,0,1)，我的变换是在 Z 方向上平移 10。变换矩阵 M 为：

1 0 0 0
0 1 0 0
0 0 1 10
0 0 0 1

然后转置（逆（M））是：

1 0 0 0
0 1 0 0
0 0 1 0
0 0 -10 1

应用于表面法线 (0,0,1)，即齐次坐标中的 (0,0,1,1)，得到：

normalTransformed = (0, 0, 1, -9)

从齐次坐标返回：

(0, 0, -1/9)

归一化为长度 1：

(0, 0, -1)

与原始法线向量 (0, 0, 1) 相比，它指向相反的方向。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T09:23:32.527

> 应用于曲面法线 (0,0,1)，即齐次坐标中的 (0,0,1,1)

好，就停在那里。

如果您要将表面法线视为齐次坐标，则使用*零*作为 W 分量，而不是 1。现在，您可能很快就会意识到您不能除以零，但这也是您不使用的原因不要对法线做齐次数学。

法线不是位置；这是一个*方向*。方向没有位置，因此翻译它们是没有意义的。W=0 的同质位置代表无限远的“位置”（这就是为什么你不能划分它们）。一个无限远的位置离*每一个*有限点都无限远。

因此，无限远的位置是一个*方向*：无论您从哪个（有限）位置看它，它都不会改变方向。

现在，如果你有一个 4x4 矩阵并且需要用它来转换法线，你只需要使用 W=0，因为它可以使数学计算出来。它摆脱了矩阵的平移分量。应完全忽略转换后的 W 分量。

因此，转换后，您会得到：

> normalTransformed = (0, 0, 1, -9)

忽略 W 分量后，变为：

> normalTransformed = (0, 0, 1)

* * *

更有可能的是，您的法线实际上并没有从一开始就指向正确的方向。当然，在没有代码和数据的情况下，可以说的不多，但是假设输入是合法的，那么数学是可行的。

另外，不要在着色器中进行反转/转置。在 CPU 上执行此操作并将生成的矩阵传递给着色器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T23:17:59.197

问题是你正在除以你的`w`坐标，就好像你的法线是一个点。（当 时`w<0`，这个除法是颠倒你的法线。）相反，你需要完全忽略`w`-coordinate：完全放弃它，而不是除以它。

您的法线不是一个点，它在技术上是一个协向量（这就是为什么它与点和向量的转换方式不同）。它实际上没有`w`-coordinate - 添加一个的唯一原因是为了方便使用现有的 4x4 矩阵例程。

如果确实添加了任意`w`坐标，则具有给定法线的平面的齐次坐标。像法线一样，这样的平面是通过用于变换点的矩阵的逆转置来变换的（并且，请注意，将平面除以其`w`-坐标是没有意义的——平面也不是点！ ）。

如果法线是从三角形派生的，则三角形的平面应该具有该法线 - 但是，法线明确缺少`w`确定确切平面的坐标。将任意平面添加`w`到法线（无论是`0`、`1`还是其他）意味着选择具有该法线的任意平面，因此对其进行变换将产生具有变换后的法线的任意平面；这就是为什么您需要忽略`w`使用 4x4 矩阵进行转换后的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T16:00:41.487

如果您应用的仿射变换反转了坐标系的“手性”，您应该只在法线的相对方向上反转。例如，如果您按比例缩放，就会发生这种情况`[1, 1, -1]`。

根据*Physically Based Rendering*一书，您可以通过计算左上角 3x3（正常？）矩阵的行列式来检查这种情况。如果行列式为负，则矩阵将改变惯用手，您应该反转法线。

[我昨天刚读到这个，我从记忆中引用这个]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T12:33:22.260

*Nicol Bolas*在他的回答中写的是绝对正确的，确实我不会重复这些概念。

但是我在问题中指出了一些有趣的观点。

首先，法线矩阵通常定义为模型视图矩阵左上角 3x3 矩阵的逆矩阵的转置。这是因为法线不是使用齐次位置定义的，实际上不需要 4x4 矩阵；如果您想使用整个模型视图矩阵，请遵循*Nicol Bolas*的方向，但数学保持不变。（因为 *w*为零）。

其次，你已经说过

> 我希望 normalTransformed 指向正确的方向（即，与它所连接的表面未变换时指向的方向相同），我应该如何在数学上做到这一点？

法线矩阵用于与模型变换相干地变换法线（实际上法线矩阵是从模型视图矩阵导出的）。正如我从你的引文中可以理解的那样，你想要正常的不被改变......事实上，你为什么要改变它？您可以直接使用“正常”。

# web-services - FileAttachment linux/mono base64 解码上的 EWS api load() 输出错误

> ID：10596552
> 
> 赞同：0
> 
> 时间：2012-05-15T08:06:22.420
> 
> 标签：web-services, mono, exchangewebservices

EWS 1.2 api、exchange 2007、windows/.net 和 linux/mono2.10.2

使用 EWS 1.2 api 从交换中提取附件在 .net/windows 上与在 mono/linux 上给出不同的结果。

文件在字节 8192、16384、20480 处不同

所以首先在 8k 块之后，然后在下一个 8k 块之后，然后再在 4k 块之后？！

```
fileAttachment.Load();

byte[] buffer = fileAttachment.Content;
Console.WriteLine(buffer[8191]); //windows -> 50  | linux -> 50
Console.WriteLine(buffer[8192]); //windows -> 9   | linux -> 59
Console.WriteLine(buffer[8193]); //windows -> 54  | linux -> 44 
```

我把

```
service.TraceEnabled = true; 
```

所以我可以看一下肥皂信息。在那里我找到了一个base64字符串的内容。[我用这个在线base64解码器](http://www.motobit.com/util/base64-decoder-encoder.asp)在线转换了base64字符串，附件完美返回。

使用 EWS API 时，Linux 上的缓冲区大小比 Windows 上的小。

所以转换base64字符串linux/mono一定有问题！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:19:59.670

是的，我在 Mono 2.10.8 中看到了同样的情况。我进行了更多调查并提交了新的错误报告：[https ://bugzilla.xamarin.com/show_bug.cgi?id=9457](https://bugzilla.xamarin.com/show_bug.cgi?id=9457)

# java - 如何获取句子中名词短语之间的关系？

> ID：10596555
> 
> 赞同：0
> 
> 时间：2012-05-15T08:06:26.540
> 
> 标签：java, nlp

我有这种模式来获得句子中名词短语之间的因果关系：

```
<NP I> * have * effect/impact on/in <NP II> 
```

NP是名词短语。

如果我有一句话：

```
Technology can have negative impact on social interactions 
```

然后基于上述模式，**NP I**匹配**技术**，**NP II**匹配**社交交互**

问题：获得 NP I 和 NP II 的合适算法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:22:11.903

正则表达式 (RegEx) 在这种情况下非常有用。以下正则表达式匹配您的字符串格式，并允许您分析输入的不同变量。

```
([\\w\\s]*?) (\\w*?) have (\\w*?) (effect|impact) (on|in) ([\\w\\s]*?)(\\.) 
```

通过运行以下程序，您可以看到正则表达式匹配器组是如何工作的，组 1 是 NP 1，组 6 是 NP 2。

```
public class Regex {

    public static void main(String[] args) {
        Pattern p = Pattern.compile("([\\w\\s]*?) (\\w*?) have (\\w*?) (effect|impact) (on|in) ([\\w\\s]*?)(\\.)");
        String s = "Greenhouse gases can have negative impact on global warming.";
        Matcher m = p.matcher(s);
        if (m.find()) {
            for (int i = 0; i < m.groupCount(); i++) {
                System.out.println("Group " + i + ": " + m.group(i));
            }
        }
    }
} 
```

在上面的示例中，`"Greenhouse gases can have negative impact on global warming."`分析了字符串。以下是程序的输出。

```
Group 0: Greenhouse gases can have negative impact on global warming.
Group 1: Greenhouse gases
Group 2: can
Group 3: negative
Group 4: impact
Group 5: on
Group 6: global warming 
```

# android - Android：在 onConfigurationChanged 中以编程方式更改片段宽度

> ID：10596557
> 
> 赞同：2
> 
> 时间：2012-05-15T08:06:40.167
> 
> 标签：android, android-fragments

当用户将设备旋转到横向模式时尝试更改片段宽度

那是我的片段：

```
 <fragment
        android:id = "@+id/menu"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        class="myPackage.MenuFragment" /> 
```

这就是我的 onConfigurationChanged 方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    setContentView(R.layout.main);
    findViewById(R.id.menu).getLayoutParams().width = (int) (getWindowManager()
            .getDefaultDisplay().getWidth());
} 
```

但是当我旋转设备时，输出崩溃：

> 05-14 03:00:51.379: E/AndroidRuntime(3117): 致命异常: main 05-14 03:00:51.379: E/AndroidRuntime(3117): android.view.InflateException: 二进制 XML 文件行 #13: 错误膨胀类片段 05-14 03:00:51.379: E/AndroidRuntime(3117): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582) 05-14 03:00:51.379: E/AndroidRuntime(3117):在 android.view.LayoutInflater.rInflate(LayoutInflater.java:618) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:621) 05-14 03 :00:51.379: E/AndroidRuntime(3117): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:407) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.view.LayoutInflater。膨胀（LayoutInflater.java:320）05-14 03:00:51.379：E/AndroidRuntime（3117）：在 android.view。LayoutInflater.inflate(LayoutInflater.java:276) 05-14 03:00:51.379: E/AndroidRuntime(3117): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.app.Activity.setContentView(Activity.java:1654) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 softserveinc.dbyst.reveal .Reveal_prototypeActivity.onConfigurationChanged(Reveal_prototypeActivity.java:71) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:4153) 05-14 03:00:51.379 : E/AndroidRuntime(3117): 在 android.app.ActivityThread.handleConfigurationChanged(ActivityThread.java:4246) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.app.ActivityThread$H.handleMessage( ActivityThread.java:2215) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.os.Looper.loop(Looper .java:143) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.app.ActivityThread.main(ActivityThread.java:4914) 05-14 03:00:51.379: E/AndroidRuntime(3117) ): at java.lang.reflect.Method.invokeNative(Native Method) 05-14 03:00:51.379: E/AndroidRuntime(3117): at java.lang.reflect.Method.invoke(Method.java:521) 05 -14 03:00:51.379: E/AndroidRuntime(3117): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 05-14 03:00:51.379: E/AndroidRuntime(3117 ): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 dalvik.system.NativeStart。main(Native Method) 05-14 03:00:51.379: E/AndroidRuntime(3117): Caused by: java.lang.IllegalArgumentException: Binary XML file line #13: Duplicate id 0x7f050001, tag null, or parent id 0x0 with another myPackage.MenuFragment 的片段 05-14 03:00:51.379: E/AndroidRuntime(3117): at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:275) 05-14 03:00:51.379: E /AndroidRuntime(3117): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558) 05-14 03:00:51.379: E/AndroidRuntime(3117): ... 19 更多app.FragmentActivity.onCreateView(FragmentActivity.java:275) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558) 05-14 03:00: 51.379: E/AndroidRuntime(3117): ... 19 更多app.FragmentActivity.onCreateView(FragmentActivity.java:275) 05-14 03:00:51.379: E/AndroidRuntime(3117): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558) 05-14 03:00: 51.379: E/AndroidRuntime(3117): ... 19 更多

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:28:45.507

是的，您的 setcontentview 崩溃了，因为您在 XML 中定义了片段。你在这里有几个选择（据我所知，我不是这个问题的专家；））。您可以将 FrameLayout 放在片段所在的位置，然后使用替换事务添加片段：

```
 FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        fragmentTransaction.replace(R.id.frameLayout_container, yourFragmentObject);

        fragmentTransaction.commit(); 
```

或者，您可以测试 setRetainInstance(true) 是否有效。

# user-interface - 将运行时所做的更改更新为窗口中显示的对象值

> ID：10596561
> 
> 赞同：0
> 
> 时间：2012-05-15T08:06:50.203
> 
> 标签：user-interface, refresh

我刚开始学习java，为了练习，我一直在尝试制作一个小型rpg游戏。我最近设法设置了一个 ui，但是我在让窗口显示对不同 actor 对象的变量的更改时遇到了很多麻烦。例如，当我点击“攻击”时，我攻击的敌人的HP会降低一定量。我希望该更改反映在窗口中显示该敌人 HP 的 JLabel 中，但我一直无法做到这一点。我做了一些研究，发现类似的问题建议使用 invalidate()、validate() 和 repaint()，但我无法让它们为我工作。任何人都可以提供任何建议吗？将不胜感激。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

public class SimpleRPGBattleUI extends JFrame 
{ 
// Create player and enemy actors (array size 4 for convenience's sake; number actors 1-3)
static actor[] player = new actor[4];
static actor[] enemy  = new actor[4];

static boolean playerTurnTaken = false;

// Actions available to current player character
//Align towards the left of window, stacked vertically
JButton jbtAttack    = new JButton("Attack");
JButton jbtSkills    = new JButton("Skills");
JButton jbtMagic     = new JButton("Magic");
JButton jbtInventory = new JButton("Inventory");

public SimpleRPGBattleUI()
{   
// Displays HP, MP, SP, and status of actor
    //Implement as an object that can be instantiated multiple times into the window,
JLabel jbt1StatusName   = new JLabel(player[1].name);
JLabel jbt1StatusHP     = new JLabel("HP: " + player[1].HP);
JLabel jbt1StatusMP     = new JLabel("MP: " + player[1].MP);
JLabel jbt1StatusSP     = new JLabel("SP: " + player[1].SP);
JLabel jbt1StatusEffects    = new JLabel("Poisoned");

JLabel jbt2StatusName   = new JLabel(player[2].name);
JLabel jbt2StatusHP     = new JLabel("HP: " + player[2].HP);
JLabel jbt2StatusMP     = new JLabel("MP: " + player[2].MP);
JLabel jbt2StatusSP     = new JLabel("SP: " + player[2].SP);
JLabel jbt2StatusEffects    = new JLabel("Blinded");

JLabel jbt3StatusName   = new JLabel(player[3].name);
JLabel jbt3StatusHP     = new JLabel("HP: " + player[3].HP);
JLabel jbt3StatusMP     = new JLabel("MP: " + player[3].MP);
JLabel jbt3StatusSP     = new JLabel("SP: " + player[3].SP);
JLabel jbt3StatusEffects    = new JLabel("OK");

JLabel jbt4StatusName   = new JLabel(enemy[1].name);
JLabel jbt4StatusHP     = new JLabel("HP: " + enemy[1].HP);
JLabel jbt4StatusMP     = new JLabel("MP: " + enemy[1].MP);
JLabel jbt4StatusSP     = new JLabel("SP: " + enemy[1].SP);
JLabel jbt4StatusEffects    = new JLabel("OK");

JLabel jbt5StatusName   = new JLabel(enemy[2].name);
JLabel jbt5StatusHP     = new JLabel("HP: " + enemy[2].HP);
JLabel jbt5StatusMP     = new JLabel("MP: " + enemy[2].MP);
JLabel jbt5StatusSP     = new JLabel("SP: " + enemy[2].SP);
JLabel jbt5StatusEffects    = new JLabel("Shielded");

JLabel jbt6StatusName   = new JLabel(enemy[3].name);
JLabel jbt6StatusHP     = new JLabel("HP: " + enemy[3].HP);
JLabel jbt6StatusMP     = new JLabel("MP: " + enemy[3].MP);
JLabel jbt6StatusSP     = new JLabel("SP: " + enemy[3].SP);
JLabel jbt6StatusEffects    = new JLabel("OK");

JPanel pStatusField1 = new JPanel();
    pStatusField1.setLayout(new GridLayout(5, 1));
    pStatusField1.add(jbt1StatusName);
    pStatusField1.add(jbt1StatusHP);
    pStatusField1.add(jbt1StatusMP);
    pStatusField1.add(jbt1StatusSP);
    pStatusField1.add(jbt1StatusEffects);
JPanel pStatusField2 = new JPanel();
    pStatusField2.setLayout(new GridLayout(5, 1));
    pStatusField2.add(jbt2StatusName);
    pStatusField2.add(jbt2StatusHP);
    pStatusField2.add(jbt2StatusMP);
    pStatusField2.add(jbt2StatusSP);
    pStatusField2.add(jbt2StatusEffects);
JPanel pStatusField3 = new JPanel();
    pStatusField3.setLayout(new GridLayout(5, 1));
    pStatusField3.add(jbt3StatusName);
    pStatusField3.add(jbt3StatusHP);
    pStatusField3.add(jbt3StatusMP);
    pStatusField3.add(jbt3StatusSP);
    pStatusField3.add(jbt3StatusEffects);

JPanel pStatusField4 = new JPanel();
    pStatusField4.setLayout(new GridLayout(5, 1));
    pStatusField4.add(jbt4StatusName);
    pStatusField4.add(jbt4StatusHP);
    pStatusField4.add(jbt4StatusMP);
    pStatusField4.add(jbt4StatusSP);
    pStatusField4.add(jbt4StatusEffects);
JPanel pStatusField5 = new JPanel();
    pStatusField5.setLayout(new GridLayout(5, 1));
    pStatusField5.add(jbt5StatusName);
    pStatusField5.add(jbt5StatusHP);
    pStatusField5.add(jbt5StatusMP);
    pStatusField5.add(jbt5StatusSP);
    pStatusField5.add(jbt5StatusEffects);
JPanel pStatusField6 = new JPanel();
    pStatusField6.setLayout(new GridLayout(5, 1));
    pStatusField6.add(jbt6StatusName);
    pStatusField6.add(jbt6StatusHP);
    pStatusField6.add(jbt6StatusMP);
    pStatusField6.add(jbt6StatusSP);
    pStatusField6.add(jbt6StatusEffects);

JPanel pStatusFieldPlayer    = new JPanel();
    pStatusFieldPlayer.setLayout(new FlowLayout());
    pStatusFieldPlayer.add(pStatusField1);
    pStatusFieldPlayer.add(pStatusField2);
    pStatusFieldPlayer.add(pStatusField3);

JPanel pStatusFieldEnemy     = new JPanel();
    pStatusFieldEnemy.add(pStatusField4);
    pStatusFieldEnemy.add(pStatusField5);
    pStatusFieldEnemy.add(pStatusField6);

JPanel pActions   = new JPanel();
    pActions.setLayout(new GridLayout(4, 1));
    pActions.add(jbtAttack);
    pActions.add(jbtSkills);
    pActions.add(jbtMagic);
    pActions.add(jbtInventory);

JPanel pNarration = new JPanel();
    pNarration.add(new JTextArea("The knight dealt 15 points of damage to the Necro."),
            BorderLayout.SOUTH);
JPanel pHolder    = new JPanel();
    pHolder.add(pActions, BorderLayout.WEST);
JPanel pHolder2   = new JPanel();
    pHolder2.setLayout(new GridLayout(2, 1));
    pHolder2.add(pStatusFieldPlayer, BorderLayout.NORTH);
    pHolder2.add(pStatusFieldEnemy, BorderLayout.SOUTH);

// add contents into frame
add(pHolder, BorderLayout.WEST);
add(pHolder2);
add(pNarration, BorderLayout.SOUTH);

jbtAttack.addActionListener(new Listener());
jbtSkills.addActionListener(new Listener());
jbtMagic.addActionListener(new Listener());
jbtInventory.addActionListener(new Listener());
}   

class Listener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == jbtAttack)
        {
            System.out.println("Attack");
            System.out.println("Old enemy HP: " + enemy[1].HP);
            actor.attack(player[1], enemy[1]);
            System.out.println("New enemy HP: " + enemy[1].HP);
            playerTurnTaken = true;

        }
        else if(e.getSource() == jbtSkills)
        {
            System.out.println("Skill");
            System.out.println("Old enemy HP: " + enemy[1].HP);
            actor.deadlyBlow(player[1], enemy[1]);
            System.out.println("New enemy HP: " + enemy[1].HP);
            playerTurnTaken = true;
        }
        else if(e.getSource() == jbtMagic)
        {
            System.out.println("Magic");
        }
        else if(e.getSource() == jbtInventory)
        {
            System.out.println("Inventory");
        }
    }
}

public static void main(String[] args)
{
    String input = "";
    int action = 0;

    JOptionPane.showMessageDialog(null, "Which three warriors go forth?");
    for(int i = 1; i < player.length; i++)
    {
        input = JOptionPane.showInputDialog(null, "1: Knight\n2: Mage\n3: Rogue");
        action  = Integer.parseInt(input);
        player[i] = new actor();
        player[i].setPlayerClass(action);
    }

    Random rand    = new Random();
    for(int i = 1; i < enemy.length; i++)
    {
        action   = rand.nextInt(3)+1;
        enemy[i] = new actor();
        enemy[i].setEnemyClass(action);
    }

    SimpleRPGBattleUI frame = new SimpleRPGBattleUI();
    frame.setTitle("Battle");
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true); 

    while((player[1].HP > 0) && (enemy[1].HP > 0))
    { 
        if(playerTurnTaken)
        {
        actor.attack(enemy[1], player[1]);
        System.out.println("Player HP: " + player[1].HP + "\nEnemy HP: " + enemy[1].HP);
        playerTurnTaken = false;
        }
        frame.invalidate(); 
        frame.validate(); 
        frame.repaint(); 
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:19:46.453

我设法在这里找到了我需要的帮助： [Swing JLabel text change on the running application](https://stackoverflow.com/questions/6578205/swing-jlabel-text-change-on-the-running-application)

多亏了这里提供的解决方案，我已经走上了解决问题的道路，并继续前进。非常感谢！

# c# - 时间格式 C# - 防止月份被转换为母语

> ID：10596564
> 
> 赞同：1
> 
> 时间：2012-05-15T08:06:58.950
> 
> 标签：c#, date

当我在 web 中显示月份的名称时，该名称正在转换为本地语言设置。有没有办法保留月份的英文名称？

例子 ：

![在此处输入图像描述](../Images/34ae274bd8855e728649af2316ea2f7b.png)

（突出显示的词是希伯来语中的一月）

我希望它实际上显示为 'January' ，这是格式化的代码

```
productDetails.ArrivalDate.ToString("MMMM d yyyy"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:09:30.733

采用：

```
productDetails.ArrivalDate.ToString("MMMM d yyyy", new CultureInfo("en-US")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:09:50.713

尝试强制执行文化信息

```
productDetails.ArrivalDate.ToString("MMMM d yyyy" , new CultureInfo("en-us")); 
```

# android - 在 Android VideoView 中管理视频流缓冲

> ID：10596568
> 
> 赞同：0
> 
> 时间：2012-05-15T08:07:22.337
> 
> 标签：android, video-streaming

我的要求是：
1.从url（网络服务调用）获取视频mp4/3gp文件
2.连续播放视频，播放时不缓冲。

为此，最好的过程是什么？

我有两个想法，即
1\. 将完整视频下载到 sdcard 中，然后阅读并使用 Android VideoView 播放。
2\. 流式传输全部视频并播放注意：假设我有 10mb 的视频文件。

哪个是最好的还是有其他方法？

请告诉流媒体的过程？

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:16:15.627

尝试

```
 mVideoView = (VideoView) findViewById(R.id.surface_view);

mVideoView.setVideoPath("url");
mVideoView.setMediaController(new MediaController(this)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T09:09:38.123

```
String SrcPath="http://akamedia2.lsops.net/live/smil:cnbc_en.smil/playlist.m3u8";
        myVideoView = new VideoView(this);
        myVideoView.setVideoURI(Uri.parse(SrcPath));
        setContentView(myVideoView);
        myVideoView.setMediaController(new MediaController(this)); 
```

试试这个代码。希望它对你有帮助。

# android - 在 Android 中使用 LruCache 的 NoSuchMethodError

> ID：10596574
> 
> 赞同：4
> 
> 时间：2012-05-15T08:07:37.617
> 
> 标签：android, caching, android-lru-cache

我在使用从 Android 中的 LruCache 继承的自定义类时出错。它应该下载图像并缓存它们；昨天，它正在工作，但今天早上我遇到了这个问题。

这是该类的代码：

```
public class LruMemoryCache extends LruCache<String, Bitmap> {
    private final Context context;
    private static LruMemoryCache instance;

    private LruMemoryCache(Context context) {
//      super(1024 * 1024 * (((ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass()) / 8);
        super(5 * 1024 * 1024);
        this.context = context;
    }

    public static synchronized LruMemoryCache getInstance(Context context) {
        if (instance == null) {
            instance = new LruMemoryCache(context);

        }
        return instance;
    }

    @Override
    protected int sizeOf(String key, Bitmap value) {
        return value.getByteCount();
    }

    public void loadBitmap(String url, ImageView imageView) {
        final String imageKey = url;
        final Bitmap bitmap = get(imageKey);
        if (bitmap != null) {
            imageView.setImageBitmap(bitmap);
        } else {
            BitmapWorkerTask task = new BitmapWorkerTask(imageView);
            task.execute(url);
        }
    }

    class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {
        Bitmap myBitmap;
        ImageView mImageView;

        public BitmapWorkerTask(ImageView imageView) {
            mImageView = imageView;
        }

        @Override
        protected Bitmap doInBackground(String... params) {
            try {
                URL url = new URL("http://www.google.com/logos/classicplus.png");
                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();
                myBitmap = BitmapFactory.decodeStream(input);
            } catch (IOException e) {
                e.printStackTrace();
            }

            put(params[0], myBitmap);
            return myBitmap;
        }

        @Override
        protected void onPostExecute(Bitmap result) {
            super.onPostExecute(result);
            mImageView.setImageBitmap(result);
        }
    }
} 
```

这是来自 LogCat 的错误：

```
05-15 08:02:08.639: E/AndroidRuntime(12818): FATAL EXCEPTION: AsyncTask #2
05-15 08:02:08.639: E/AndroidRuntime(12818): java.lang.RuntimeException: An error occured while executing doInBackground()
05-15 08:02:08.639: E/AndroidRuntime(12818):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.lang.Thread.run(Thread.java:1019)
05-15 08:02:08.639: E/AndroidRuntime(12818): Caused by: java.lang.NoSuchMethodError: getByteCount
05-15 08:02:08.639: E/AndroidRuntime(12818):    at com.xs2theworld.sundio.caching.LruMemoryCache.sizeOf(LruMemoryCache.java:36)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at com.xs2theworld.sundio.caching.LruMemoryCache.sizeOf(LruMemoryCache.java:1)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at android.support.v4.util.LruCache.safeSizeOf(LruCache.java:230)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at android.support.v4.util.LruCache.put(LruCache.java:123)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at com.xs2theworld.sundio.caching.LruMemoryCache$BitmapWorkerTask.doInBackground(LruMemoryCache.java:72)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at com.xs2theworld.sundio.caching.LruMemoryCache$BitmapWorkerTask.doInBackground(LruMemoryCache.java:1)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-15 08:02:08.639: E/AndroidRuntime(12818):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-15 08:02:08.639: E/AndroidRuntime(12818):    ... 4 more 
```

知道为什么会发生这种情况吗？

非常感谢大家。

编辑：我刚刚意识到 Google Galaxy Nexus S 手机不会发生此错误，但 Samsun Galaxy 会发生此错误。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T08:38:22.513

问题是由以下原因引起的：

```
@Override
    protected int sizeOf(String key, Bitmap value) {
        return value.getByteCount();
    } 
```

getByteCount() 方法只能用于 API >= 12，而三星 Galaxy 使用 API 10。

解决方案：

```
@Override
    protected int sizeOf(String key, Bitmap value) {
        if (Integer.valueOf(android.os.Build.VERSION.SDK_INT) >= 12)
            return value.getByteCount();
        else
            return (value.getRowBytes() * value.getHeight());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:47:42.237

LruCache 使用 google 的支持库，或者获取它的原始源代码。

通常，理解他们在源代码上做了什么是相当复杂的，但这次很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T21:35:16.323

我尝试了上述所有方法，它们很接近，但不太正确（至少对于我的情况）。

我正在使用 bitmap.getByteCount(); 在创建新的 LruCache 时在 sizeOf() 方法内部：

```
mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {
    @Override
    protected int sizeOf(String key, Bitmap bitmap) {
        return bitmap.getByteCount();
    }
}; 
```

然后我尝试了建议：

```
return bitmap.getRowBytes() * bitmap.getHeight(); 
```

这很棒，但我注意到返回的值不同，当我使用上面的建议时，它甚至不会在我的设备上进行缓存。我在运行 api 3.2 的 Nexus One 和运行 4.2 的 Galaxy Nexus 上测试了返回值：

```
bitmap.getByteCount(); returned-> 15  
bitmap.getRowBytes() * bitmap.getHeight(); returned-> 15400 
```

所以为了解决我的问题，我只是这样做了：

```
return (bitmap.getRowBytes() * bitmap.getHeight()) / 1000; 
```

代替：

```
return bitmap.getByteCount(); 
```

可能与您所处的情况不同，但这对我有用。

# jquery - Jquery添加/删除令牌输入时处理哪个事件？

> ID：10596578
> 
> 赞同：3
> 
> 时间：2012-05-15T08:08:03.270
> 
> 标签：jquery

我正在将 tokeninput 用于自动完成文本框。

现在我想根据令牌输入显示隐藏 div。

那么在哪种情况下我可以在添加/删除时间获得令牌输入值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T08:17:20.557

如果您使用的是[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)那么他们`add` `remove`的主页中记录了回调

```
onAdd
A function to call whenever the user adds another token to their selections. defaut: null (demo).
onDelete
A function to call whenever the user removes a token from their selections. default: null (demo). 
```

语法是

```
 $("#selector").tokenInput("fetch.php", {
         onAdd: function (item) {
             alert("Added " + item.name);
         },
         onDelete: function (item) {
            alert("Deleted " + item.name);
        }
   }); 
```

在此处查看演示搜索 onAdd onDelete [http://loopj.com/jquery-tokeninput/demo.html#onadd-ondelete](http://loopj.com/jquery-tokeninput/demo.html#onadd-ondelete)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T08:17:36.113

查看文档，它有`onAdd`回调，每当用户输入任何新令牌时都会调用该回调。

从文档：

> 回调
> 
> *   onResult
>     
>     每当我们从服务器收到结果时调用的函数。您可以使用此功能在将结果显示给用户之前对来自服务器的结果进行预处理。默认值：null（演示）。
>     
>     
> *   添加
>     
>     每当用户将另一个标记添加到他们的选择时调用的函数。默认值：null（演示）。
>     
>     
> *   删除
>     
>     每当用户从他们的选择中删除令牌时调用的函数。默认值：null（演示）。
>     
>     
> *   准备就绪
>     
>     在初始化完成并且令牌输入准备好使用后调用的函数。默认值：空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T05:32:18.163

您可以预先声明函数以避免在循环中执行此操作：

```
var addFunction = function (item) {
    .... 
};

var deleteFunction = function (item) {
    ....
};

this.$("#mySelector").tokenInput("/ABC/GetMethod", {
    preventDuplicates: true,
    theme: "facebook",    
    queryParam: "term",
    tokenLimit: 1,
    onAdd: addFunction,
    onDelete: deleteFunction
}); 
```

# c# - 从其他类型的属性中获取类型列表的 Lambda 表达式

> ID：10596580
> 
> 赞同：0
> 
> 时间：2012-05-15T08:08:09.847
> 
> 标签：c#, lambda

我经常发现自己需要从另一个项目列表的属性中组成一个项目列表。我采用的方法通常类似于以下内容：

```
 public class MyClass
    {
        public Guid Identifier { get; set; }
        public byte[] Bytes { get; set; }
        public int ForeignKey { get; set; }

        public static List<MyClass> AllMyClass { get; }
    }

    private List<Guid> GetIdentifiers(int foreignKey)
    {
        List<Guid> identifiers = new List<Guid>();
        foreach (var item in MyClass.AllMyClass.FindAll(c => c.ForeignKey == foreignKey)
        {
            identifiers.Add(item.Identifier);
        }
        return identifiers;
    } 
```

现在，有没有更快/更简单的方法来用 lamda 表达式实现它？如，我想将操作浓缩为一行：

```
List<Guid> identifiers = MyClass.AllMyClass.MagicExpression(c => c.ForeignKey == foreignKey); 
```

此外，.NET 2.0 框架是否可以进行这样的表达？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:12:37.703

我认为这样的事情会起作用：

```
List<Guid> identifiers = MyClass.AllMyClass.Where(x => x.ForeignKey == foreignKey).Select(x => x.Identifier).ToList(); 
```

此外，它们不是 .Net 2.0 中的 lambda 表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:15:15.303

`MagicExpression`通常称为`Where`.

而且，据我所知，.Net 2.0 中既没有 LINQ，也没有 lambda，也没有扩展方法；所以，第二个问题的答案可能是否定的。

# c# - PHP：将 C# 64 位时间戳转换为 Unix 时间戳

> ID：10596582
> 
> 赞同：2
> 
> 时间：2012-05-15T08:08:36.633
> 
> 标签：c#, php

我正在将 C# 函数复制到 PHP。在 C# 中，GUID、DateTime 和布尔值被转换为字节。接下来，字节数组被合并和编码。最后一步是将其转换为 base64。

字节数组存在以下部分：

```
GUID: 16 bytes
Timestamp: 8 bytes
Boolean: 1 byte 
```

在 php 中，我已经转换了 base64 并将字符串解码回字节。我还设法将前 16 个字节转换为 GUID。我验证了 PHP 返回给我的字节，它们是正确的。

现在我将 8 个字节转换为 PHP 中的时间戳。到目前为止，我没有运气。我想问题是它返回一个int64。

**C＃**

这是 C# 字节数组到日期时间转换：

```
public DateTime Timestamp;
......
byte[] timestamp_bytes = new byte[8];
input.Read(timestamp_bytes, 0, 8);
Timestamp = DateTime.FromBinary(System.BitConverter.ToInt64(timestamp_bytes, 0)); 
```

这是 C# 日期时间到字节数组的转换：

```
public DateTime Timestamp;
......
byte[] timestamp_bytes = System.BitConverter.GetBytes(Timestamp.ToBinary()); 
```

当我输出 Timestamp.ToString() 时，在这两种情况下我都会得到*23-12-2011 09:54:56*。

**PHP**

在 PHP 中，我设法获得了 8 个字节的十六进制：

```
$bin = pack("C*", 119, 23, 124, 173, 103, 143, 206, 136);
$hex = unpack("H*", $bin); 
```

接下来我该怎么办？我已经尝试了一些转换方法，但我似乎从来没有得到正确的答案。

**附加信息：**

这8个字节分别是：119、23、124、173、103、143、206、136

十六进制字符串为：77177cad678fce88

我应该得到的日期时间：23-12-2011 09:54:56

php -r '回显 PHP_INT_MAX;' 返回 9223372036854775807

C# 应用程序不在我的权限范围内，所以我不能保证我可以更改它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:05:41.560

为此，您需要在 C# 中转换为 unix 时间戳，并将此数据打包成二进制而不是 8 字节 DateTime 对象序列化。直到 2038 年，4 个字节就足够了。

[从这里](http://lannerd.nl/blog/archives/36)借用（或偷窃？），这是您可以在 C# 中创建 Unix 时间戳的方法：

```
public DateTime timestamp;
// ......
byte[] timestamp_bytes = new byte[8];
input.Read(timestamp_bytes, 0, 8);
timestamp = DateTime.FromBinary(System.BitConverter.ToInt64(timestamp_bytes, 0));

TimeSpan diff = (Timestamp - new DateTime(1970, 1, 1).toLocalTime());
int unix = (int) diff.TotalSeconds;
// unix is now a signed 32 bit integer representing the Unix timestamp in a way
// that PHP will understand 
```

然后在 PHP 中，您可以将 4 个二进制字节转换回表示 unix 时间戳的整数，如下所示：

```
$timestamp = unpack('N', $binaryString);
echo date('d-m-Y H:i:s', $timestamp); // Should give 23-12-2011 09:54:56 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:50:48.547

让我们看一下[**DateTime.ToBinary 方法**](http://msdn.microsoft.com/en-US/library/system.datetime.tobinary.aspx)和[**DateTime.Ticks 属性**](http://msdn.microsoft.com/en-US/library/system.datetime.ticks.aspx)文档。

首先，**DateTime**的二进制形式表示*两个*属性（Kind 和 Ticks），不清楚它们在二进制字符串中是如何连接的。那么，**Ticks**属性是*自耶稣基督诞生以来经过****的百万分之一秒***的数字。

 *那么，如何进行呢？

1.  尝试了解**Kind**和**Ticks**属性是如何二进制存储的。我们需要**蜱虫**。我的建议是尝试将一些典型的 DateTime 值转换为二进制并分析输出。**从DateTime.MinValue**开始，应该对应于`01-01-0001 00:00:00`. 您应该看到（我认为）所有零，除了**Kind**值（如果存在）。

2.  一旦有了 64 位的**Ticks**值，就可以使用`floor($ticks / 10000000)`. 最后，您必须减去从 1 年到 1970 年（Unix 标准）所经过的秒数，这是一个常数，您可以将 C# DateTime 转换`01-01-1970 00:00:00`为二进制...

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T17:17:02.547

我最终得到了这个，其中解密的是解密令牌后的字符串。

```
 $byte_array = array_slice(unpack("C*", "\0" . $decrypted), 1);

        $timestamp_array = array_slice($byte_array, 0, 8);
        $guid_array = array_slice($byte_array, 8, 16);
        $is_read_only_array = array_slice($byte_array, 24, 1);

        // CONVERT GUID
        .....

        // CONVERT TIMESTAMP
        $timestamp_hex = "";
        foreach ($timestamp_array as $byte) {
            $timestamp_hex .= pack("C*", $byte);
        }
        $timestamp = hexdec($timestamp_hex);

        // CONVERT IS READ ONLY
        .... 
```*

# c# - C# 简单的多线程

> ID：10596584
> 
> 赞同：1
> 
> 时间：2012-05-15T08:08:43.903
> 
> 标签：c#, wpf, multithreading

我对多线程很陌生，今天我遇到了这个奇怪的问题。我遵循了一些在线教程，在我看来，我所做的是正确的。

所以我得到了这个代码：

```
GrammarThreading gThread = new GrammarThreading(this, grammar);
Thread thread = new Thread(new ThreadStart(gThread.threadUnloadGrammar)); 
```

有了它，我想将语法卸载移动到另一个线程，因为它需要几秒钟。这就是 GrammarThreading 类的样子：

```
public class GrammarThreading
{
    public MainWindow window { get; set; }
    public Grammar grammar { get; set; }

    public GrammarThreading(MainWindow _window, Grammar _grammar)
    {
        window = _window;
        grammar = _grammar;
    }

    public void threadUnloadGrammar()
    {
        window._recognizer.UnloadGrammar(grammar);
    }
} 
```

但是，我调试了代码，threadUnloadGrammar() 方法似乎永远不会被调用。我不知道问题出在哪里，因此将不胜感激任何帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:12:27.297

您需要调用`thread.Start()`以启动线程。

另一方面，它似乎`threadUnloadGrammar()`使用了 type 的变量`MainWindow`。不确定到底`MainWindow._recognizer.UnloadGrammar`是什么，但请确保它不会访问其中的任何 UI 元素，除非它[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)用于此目的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T08:12:50.883

您需要调用[Thread.Start](http://msdn.microsoft.com/en-us/library/system.threading.thread.start.aspx)来安排执行线程。

# jquery - 如何生成“进入”事件？

> ID：10596587
> 
> 赞同：3
> 
> 时间：2012-05-15T08:08:46.180
> 
> 标签：jquery

可以生成这样的点击事件。

```
$("#elementId").trigger("click"); 
```

但我很困惑我们如何类似地生成“进入”事件？我通过互联网搜索，我发现的一种方法是，

```
$("#elementId").trigger("keypress",[13]); 
```

但这对我不起作用？这是正确的吗？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:12:09.873

你的意思是这样的：

```
var e = jQuery.Event("keydown");
e.which = 13; // # Some key code value for Enter
$("input").trigger(e); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:12:13.473

这个？

```
var e = $.Event("keydown", { keyCode: 13 });
$("#elementId").trigger(e); 
```

[http://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:12:18.000

您可以使用以下代码触发 Enter 按键事件

```
var e = jQuery.Event("keydown");
e.which = 13; // # Enter key code value
$("#elementId").trigger(e); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:10:41.530

你的语法不正确。如果您需要密钥代码，请尝试：

```
$("#elementId").keypress(function(e) {
  if ( e.which == 13 ) {
     //do stuff here
   }    
}); 
```

如果您只想在元素成为焦点后发生事件，请尝试使用**[focus()](http://api.jquery.com/focus/)**语法。

```
$("#elementId").focus(function(){ ... }); 
```

# database - 这种设计是否符合 2NF？

> ID：10596590
> 
> 赞同：1
> 
> 时间：2012-05-15T08:08:54.743
> 
> 标签：database, oracle, database-design, normalization, database-normalization

好的，我有 2 张桌子。具有主键 book_id 和另一个名为 title 的字段的书表。还有一个作者表，主键 author_id 和字段 first_name、last_name 和外键 book_id。

我的设计符合 2NF 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:16:01.947

一般来说（用外行的话来说），第一级的标准化意味着：

*   没有重复行的可能性。
*   行或列中没有固有的排序。
*   每个“单元格”只包含一条信息。

对于 2NF，您有一个额外的约束，即每一列都依赖于整个键（直接或间接通过另一个非键列）。

所以我会说它在这种情况下符合 2NF，因为它符合 1NF 的标准，而且这本书确实取决于作者。

但是，它仍然不一定是一个好的设计，特别是因为作为一般规则，您应该始终从 3NF 开始。一个更好的解决方案将是全面的：

```
books:
    book_id
    title
authors:
    author_id
    name
books_and_authors:
    book_id
    author_id 
```

这样，您在书籍和作者之间就有了多对多（包括零）的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:21:29.057

> 一个表在 2NF 中当且仅当它在 1NF 中并且没有非素数属性依赖于表的任何候选键的任何适当子集（来自[wikipedia](http://en.wikipedia.org/wiki/Second_normal_form)）。

我必须假设你的桌子是 1NF。
您的候选（和主）键是 book_id 和 author_id。

您的非主要属性是**title**、**first_name**和**last_name**。这些属性都不依赖于候选键的任何适当子集（这很容易实现，因为它们没有任何子集）。这种设计的唯一问题是外键**book_id**使 book-author 成为 1:1 的关系（即 One book -> one author. One author -> one book）。这可以很容易地通过一个包含**book_id**和**author_id的新表来解决**

1NF（也是[维基百科](http://en.wikipedia.org/wiki/First_normal_form)）：

*   行没有从上到下的顺序。
*   列没有从左到右的顺序。
*   没有重复的行
*   每个行列交叉点都只包含来自适用域的一个值（仅此而已）。
*   所有列都是规则的[即行没有隐藏的组件，例如行 ID、对象 ID 或隐藏的时间戳]。

这就是我们用来构建关系数据库的方式。

# linux - 如何将您的 ssh 公钥自动添加到 authorized_keys 文件中？

> ID：10596595
> 
> 赞同：5
> 
> 时间：2012-05-15T08:09:24.580
> 
> 标签：linux, ssh

我正在寻找您可以运行的最简单的命令集，以将您的公钥添加到远程服务器上 root 帐户的 authorized_keys 文件中。

我们假设当前用户具有远程服务器的登录权限，并且它也列在 sudoers 文件中。

运行该命令两次应该没有效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T08:33:16.523

运行 ssh-copy-id 命令怎么样？手册页说以下内容：

> ssh-copy-id - 在远程机器的 authorized_keys 中安装你的公钥

听起来正是您正在寻找的？不过，我从未尝试过两次运行该命令。它可能不会检查。

# events - jQuery Mobile 多选菜单，在回调中引用选择

> ID：10596597
> 
> 赞同：0
> 
> 时间：2012-05-15T08:09:37.623
> 
> 标签：events, jquery-mobile, callback, select-menu

我在 jQuery mobile 中实现了一个多选菜单。我想在回调函数中引用所有选定的项目（理想情况下，它将由 close 事件触发）。下面说明的实现通常适用于将数据绑定到单个项目菜单的更改处理程序，但它甚至似乎都没有触发。任何帮助，将不胜感激。

```
<head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <link rel="stylesheet" href="../_assets/css/jqm-docs.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.5.1.min.js">
        < /script
            <meta http-equiv="Content-Type" content="text/html;
        charset = UTF - 8 "/>
            <meta name="
        viewport " content="
        width = device - width, user - scalable = no " />

</head>

<body onload="
        initialize()">
    <script type="
        text / javascript ">

        $(document).ready(function () {
            $("#selectMenu ").on("change ", {testdata: "test "}, filterSelectHandler);
        }); 

    function filterSelectHandler(e) {
    alert($(": selected ", $(this)));
    }

    </script>
    <div data-role="page">
        <div data-role="header"></div>
        <div data-role="content">
            <select name="select-choice-1" id="selectMenu" multiple="multiple" data-native-menu="false">
                <option value="standard">Option 1</option>
                <option value="rush">Option 2</option>
                <option value="express">Option 3</option>
                <option value="overnight">Option 4</option>
            </select>
        </div>
    </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:22:52.230

从您正在使用的旧版 JQM 开始，但不匹配 css：

```
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js"></script>
try this one instead:
<script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

您包括 3 次 jquery 和不同的版本。只留下这个：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

将脚本放在头部区域以及使用 JQM 使用“pageinit”事件时，最好的做法是：

```
<script type="text/javascript">
    $(document).on("pageinit", function() {
        $("#selectMenu").on("change", filterSelectHandler); 
        function filterSelectHandler(e) {
            alert($(":selected", $(this)));
        }
    });

</script> 
```

# c# - c#第二个下拉列表不能保留选中的项目

> ID：10596600
> 
> 赞同：0
> 
> 时间：2012-05-15T08:09:49.720
> 
> 标签：c#, asp.net, drop-down-menu

这是我第一次遇到这个问题，所以请任何人帮助我。这是我的问题，我有 2 个 dropdownlist ，第二个将从第一个下拉列表中的选定项目填充，在第二个下拉列表中它将填充 gridview 取决于所选项目。现在的问题是，每次我从第二个 ddl 中选择任何项目时，它都会发回，并且会选择第一个项目而不是我选择的项目。

这是我的代码：（aspx）

```
 <asp:TableRow> <%--Branch--%>
                        <asp:TableCell HorizontalAlign="Left">
                            <asp:Label ID="lblBranch" runat="server" Font-Bold="true">Branch:</asp:Label>
                        </asp:TableCell>
                        <asp:TableCell HorizontalAlign="Left">
                            <asp:DropDownList ID="ddlBranch" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlBranch_SelectedIndexChanged" AppendDataBoundItems="true" />
                        </asp:TableCell>
                    </asp:TableRow>

                    <asp:TableRow> <%--Recepient--%>
                        <asp:TableCell HorizontalAlign="Left">
                            <asp:Label ID="lblRecepient" runat="server" Font-Bold="true">Recepient:</asp:Label>
                        </asp:TableCell>
                        <asp:TableCell HorizontalAlign="left">
                            <asp:DropDownList ID="ddlRecepientDepartment" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlRecepientDepartment_SelectedIndexChanged"  AppendDataBoundItems="true" EnableViewState="true"></asp:DropDownList>
                        </asp:TableCell>
                    </asp:TableRow>

                    <asp:TableRow> <%--Gridview Recepient--%>
                        <asp:TableCell></asp:TableCell>
                        <asp:TableCell>
                            <asp:GridView ID="gvRecepientPosition" runat="server" AllowPaging="True" AutoGenerateColumns="False"
                                EmptyDataText="No Record found!" ShowFooter="false" ShowHeader="true" Width="99%" HorizontalAlign="Center" PageSize="5" OnPageIndexChanging="gvRecepientPosition_PageIndexChanging">
                                <Columns>
                                <%--<asp:TemplateField HeaderText="ID" Visible="false">
                                    <ItemTemplate>
                                    <asp:Label ID="lblID" runat="server" Text='<%# Bind("RECID") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField>--%>
                                <asp:TemplateField HeaderText="Recepient" Visible="true">
                                     <ItemTemplate>
                                        <asp:CheckBox ID="cbRecepientPosition"  runat="server"/>
                                     </ItemTemplate>
                                </asp:TemplateField>
                                 <asp:BoundField DataField="Position" HeaderText="Position" ItemStyle-HorizontalAlign="Left" />
                                </Columns>
                            </asp:GridView>
                        </asp:TableCell>
                    </asp:TableRow> 
```

代码背后：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            ddlBranch.Items.Clear();
            GetBranch();

        }

    }

    private void GetBranch()
    {
             var objManager = new EmailNotificationInfoManager();
           // ddlBranch.Items.Clear();
            ddlBranch.DataSource = objManager.EmailNotificationInfoBranch();
            ddlBranch.DataTextField = "Branch";
            ddlBranch.DataValueField = "RECID";
            ddlBranch.DataBind();

            ddlBranch.Items.Insert(0,"<--Select-->");

    }

    protected void ddlBranch_SelectedIndexChanged(object sender, EventArgs e)
    {
        var objManager = new EmailNotificationInfoManager();
        ddlRecepientDepartment.Items.Clear();
        ddlRecepientDepartment.DataSource = objManager.EmailNotificationInfoDepartment(Convert.ToInt64(ddlBranch.SelectedValue));
        ddlRecepientDepartment.DataTextField = "Department";
        ddlRecepientDepartment.DataValueField = "branchID";
        ddlRecepientDepartment.DataBind();

        ddlRecepientDepartment.Items.Insert(0,"<--Select-->");

    }

    protected void ddlRecepientDepartment_SelectedIndexChanged(object sender, EventArgs e)
    {
        var objManager = new EmailNotificationInfoManager();

        gvRecepientPosition.DataSource = objManager.GetPositionByDepartment(ddlRecepientDepartment.SelectedItem.Text);
        gvRecepientPosition.DataBind();

        Session["PositionDepartment"] = objManager.GetPositionByDepartment(ddlRecepientDepartment.SelectedItem.Text);

        ddlRecepientDepartment.Attributes.Add("onChange", "this.currentvalue = this.value;");
        //Page.Response.Redirect(HttpContext.Current.Request.Url.ToString(), true);
    } 
```

请帮我解决这个问题。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:25:23.507

如果您的意思是第一个下拉列表正在选择第一个项目，请检查以下`EnableViewState="true"`属性`ddlBranch`

为什么会这样？

```
ddlRecepientDepartment.Attributes.Add("onChange", "this.currentvalue = this.value;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:18:24.600

您要做的是在事件处理程序中

```
 protected void ddlRecepientDepartment_SelectedIndexChanged
 (object sender, EventArgs e)
 {} 
```

将`selectedIndex`属性设置`index`为当前选定项目的。

# javascript - window.getSelection 在 textarea 中获得正确的选择

> ID：10596606
> 
> 赞同：3
> 
> 时间：2012-05-15T08:10:07.483
> 
> 标签：javascript, firefox, google-chrome

在 Firefox 和 chrome 中 window.getSelection 用于获取文档中的当前选择，但是当前选择在 textarea 中，window.getSelection 没有返回选择，而是 textarea 本身。那么，如何在 Firefox 和 chrome 中正确选择呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:34:42.627

您是否需要在文本区域中获取选定的文本？您可能会要求 selectionStart 和 selectionEnd（在 Internet Explorer 中不存在，适用于 Firefox 和 Chrome）

```
 Select some text below and then click the button:<br/>
<textarea id="myTextarea" rows="5" cols="30">
Lorem ipsum dolor sit amet, 
consectetur adipiscing elit.
</textarea>
<button onclick="alert(getTextSelection())">alert text selection</button>

<script type="text/javascript">
    function getTextSelection(){
        var field = document.getElementById("myTextarea");
        var startPos = field.selectionStart;
        var endPos = field.selectionEnd;        
        var field_value = field.value;
        var selectedText = field_value.substring(startPos,endPos);
        return selectedText;
    }   
</script> 
```

如果有多个文本区域并且您希望在选择时获得输出：

```
Select some text in either textarea:<br/> 
<textarea rows="5" cols="30" onselect="alert(getTextSelection(this))"> 
Lorem ipsum dolor sit amet,  
consectetur adipiscing elit. 
</textarea> 

<textarea rows="5" cols="30" onselect="alert(getTextSelection(this))"> 
fate it seems
not without a sense of irony 
</textarea> 

<script type="text/javascript"> 
    function getTextSelection(field){        
        var startPos = field.selectionStart; 
        var endPos = field.selectionEnd;          
        var selectedText = field.value.substring(startPos,endPos); 
        return selectedText;
    }    
</script> 
```

或者您仍然可以使用按钮但使用全局变量来执行此操作：

```
Select some text in either textarea and click the button:<br/> 
<textarea rows="5" cols="30" onselect="window.selectedTextarea=this"> 
Lorem ipsum dolor sit amet,  
consectetur adipiscing elit. 
</textarea> 

<textarea rows="5" cols="30" onselect="window.selectedTextarea=this"> 
fate it seems
not without a sense of irony 
</textarea> 

<button onclick="alert(getTextSelection())">alert text selection</button>

<script type="text/javascript"> 
// warning: global variable: dirty!!!
var selectedTextarea

    function getTextSelection(){        
        var field = window.selectedTextarea;
        var startPos = field.selectionStart; 
        var endPos = field.selectionEnd;          
        var selectedText = field.value.substring(startPos,endPos); 
        return selectedText;
    }    
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:32:04.353

文本区域和文本输入具有不同的选择 API。它们具有文本区域/输入属性中的字符偏移量`selectionStart`和属性。这些属性已在 HTML5 中标准化，并由所有主要浏览器的当前版本实现，尽管 IE < 9 再次具有不同的 API。`selectionEnd``value`

# windows - 查找物理适配器的 MAC 地址

> ID：10596613
> 
> 赞同：6
> 
> 时间：2012-05-15T08:10:23.823
> 
> 标签：windows, delphi, networking, wmi, delphi-xe

我想使用唯一标识符来确定我的应用程序是否移动到另一台计算机。MAC 地址似乎适合此目的。我使用的代码是这样的：

```
Procedure TForm4.GetMacAddress;
var item: TListItem;
    objWMIService : OLEVariant;
    colItems      : OLEVariant;
    colItem       : OLEVariant;
    oEnum         : IEnumvariant;
    iValue        : LongWord;
    wmiHost, root, wmiClass: string;
    i: Int32;

  function GetWMIObject(const objectName: String): IDispatch;
  var
    chEaten: Integer;
    BindCtx: IBindCtx;//for access to a bind context
    Moniker: IMoniker;//Enables you to use a moniker object
  begin
    OleCheck(CreateBindCtx(0, bindCtx));
    OleCheck(MkParseDisplayName(BindCtx, StringToOleStr(objectName), chEaten, Moniker));//Converts a string into a moniker that identifies the object named by the string
    OleCheck(Moniker.BindToObject(BindCtx, nil, IDispatch, Result));//Binds to the specified object
  end;

begin
   wmiHost       := '.';
   root          := 'root\CIMV2';
   wmiClass      := 'Win32_NetworkAdapterConfiguration';
   objWMIService := GetWMIObject(Format('winmgmts:\\%s\%s',[wmiHost,root]));
   colItems      := objWMIService.ExecQuery(Format('SELECT * FROM %s',[wmiClass]),'WQL',0);
   oEnum         := IUnknown(colItems._NewEnum) as IEnumVariant;
   i := 0;
   while oEnum.Next(1, colItem, iValue) = 0 do
   begin
      Item := View.Items.Add;
      item.Caption := Copy (colItem.Caption, 2, 8);

      Item.SubItems.Add (colItem.Description);
      Item.SubItems.Add (colItem.ServiceName);
      Item.SubItems.Add (VarToStrNil (colItem.MACAddress));
      if (VarToStrNil(colItem.MACAddress) <> '')
         then Item.SubItems.Add ('yes')
         else Item.SubItems.Add ('no');
      if colItem.IPEnabled
         then Item.SubItems.Add ('yes')
         else Item.SubItems.Add ('no');
     Item.SubItems.Add (VarToStrNil (colItem.SettingID));
     Item.SubItems.Add (IntToStr (colItem.InterfaceIndex));
   end; // if
end; // GetMacAddress // 
```

我的机器有一个网络端口，但这段代码找到了 18 个与网络相关的端口/事物/任何东西。其中有四个MAC地址。我假设一个网络端口应该启用 IP，以便留下两个（在图像中标记为 MAC）。假设在如此过滤的端口中，索引最低的端口是硬件端口是否正确？

![在此处输入图像描述](../Images/3f56d91900c5708d90adc8dfb96bad97.png)

**在上面的快照中编辑**Realtek 适配器是机器中唯一的物理适配器。另一个适配器是 VirtualBox 虚拟适配器。TLama 的答案识别了这两个适配器，但是有没有办法找到唯一的物理（Realtek）适配器的地址？

**Update 1** EJP 指出可以更改 MAC 地址。这在某种程度上破坏了我的目的，但是当我正在寻找适合大多数情况的解决方案时，我决定接受它。

TLama 和 TOndrej 指出了几种解决方案。两者最终都会出现毫无疑问无法找到物理适配器的情况。

**Update 2** TLama 的优秀阅读列表显示，可能没有确定物理适配器的方法。第一个项目符号中提到的文章展示了如何基于一些简单的假设来缩减适配器的数量。第三个项目中的文章展示了如何选择连接到 PCI 总线的适配器，这实际上正是我想知道的。文章中提到了一些奇怪的例外，但我认为这将在大多数情况下提供答案。

感谢大家的贡献！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T08:53:14.953

改用[`Win32_NetworkAdapter`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)类。它有`PhysicalAdapter`成员。以下示例应列出物理适配器的 MAC 地址：

```
program Program1;

{$APPTYPE CONSOLE}

uses
  SysUtils, ActiveX, ComObj, Variants;

procedure GetWin32_NetworkAdapterInfo;
const
  WbemUser = '';
  WbemPassword = '';
  WbemComputer = 'localhost';
  wbemFlagForwardOnly = $00000020;
var
  ElementCount: LongWord;
  FWMIService: OleVariant;
  FWbemObject: OleVariant;
  EnumVariant: IEnumVARIANT;
  FSWbemLocator: OleVariant;
  FWbemObjectSet: OleVariant;
begin;
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
  FWbemObjectSet := FWMIService.ExecQuery('SELECT * FROM Win32_NetworkAdapter WHERE PhysicalAdapter = 1', 'WQL', wbemFlagForwardOnly);
  EnumVariant := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  while EnumVariant.Next(1, FWbemObject, ElementCount) = 0 do
  begin
    Writeln(Format('MACAddress %s', [VarToStr(FWbemObject.MACAddress)]));
    FWbemObject := Unassigned;
  end;
end;

begin
  try
    CoInitialize(nil);
    try
      GetWin32_NetworkAdapterInfo;
    finally
      CoUninitialize;
    end;
  except
    on E:EOleException do
      Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
      Writeln(E.Classname, ':', E.Message);
  end;
  Writeln('Press Enter to exit');
  Readln;
end. 
```

基于生成的代码[`WMI Delphi Code Creator`](http://theroadtodelphi.wordpress.com/wmi-delphi-code-creator/)。

***更新：***

您实际上是在尝试过滤掉属于虚拟机的适配器，这并不容易，因为它们被模拟为物理适配器（您甚至可以在设备管理器中将它们视为物理适配器），因此您无法区分它们例如：

*   由该类的`DHCPEnabled`成员[`Win32_NetworkAdapter`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)，因为甚至可能配置虚拟机，以便它们从 DHCP 服务器获取 IP 地址
*   由类的`AdapterTypeId`成员[`Win32_NetworkAdapter`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)，因为虚拟适配器没有特殊类型
*   由班级`PhysicalAdapter`成员[`Win32_NetworkAdapter`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)，因为他们被模拟成物理的

***补充阅读：***

*   [`Find only physical network adapters with WMI Win32_NetworkAdapter class`](http://weblogs.sqlteam.com/mladenp/archive/2010/11/04/find-only-physical-network-adapters-with-wmi-win32_networkadapter-class.aspx)- 这篇文章有一个很好的分析，它可能会满足你的需求（虽然我还没有测试过）

*   [`How to determine physical network adapter type using WMI`](https://stackoverflow.com/questions/10114455/determine-network-adapter-type-via-wmi)- 这个问题在这个时候打开，它实际上正是你所需要的

*   [`How to determine MAC Address of the physical network card`](https://stackoverflow.com/questions/1567377/how-to-determine-mac-address-of-the-actual-physical-network-card-not-virtual)- 有一个我喜欢的想法，当我 100% 确定硬件适配器类的`PNPDeviceID`成员
    的根[`Win32_NetworkAdapter`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)不能以不同于的东西开始时，我个人会坚持`PCI\\`（实际上我在想正在比较数据）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T08:56:35.593

您还可以使用[IP Helper](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366073%28v=vs.85%29.aspx)库中[`GetAdaptersAddresses`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915%28v=vs.85%29.aspx)的 API 。对于 Delphi 翻译，[Magenta Systems IP Helper Component](http://www.magsys.co.uk/delphi/magiphlp.asp)乍一看还不错。

# exception - DQL QueryBuilder 异常

> ID：10596615
> 
> 赞同：1
> 
> 时间：2012-05-15T08:10:33.977
> 
> 标签：exception, doctrine-orm, dql

**你好！**

我尝试使用 QueryBuilder 设置 DQL 查询，但到目前为止效果不佳......我想要的查询如下所示：

```
$queryBuilder = Zend_Registry::get('entityManager')->createQueryBuilder();
$queryBuilder->select('s.*');
$queryBuilder->from('GPos_Model_Sale', 's');
$queryBuilder->where('s.store = ?', $authNamespace->store); //breaks on this line
$queryBuilder->andWhere('s.seller = ?', $seller->getId());
$queryBuilder->andWhere('((s.date >= ?', $dateStart);
$queryBuilder->andWhere('s.date <= ?', $dateEnd);
$queryBuilder->andWhere('s.status = "closed") OR s.status = "onhold")');
$queryBuilder->groupby('s.id');
return $queryBuilder->getQuery()->getResult(); 
```

*注意*：我知道我可以一个接一个地使用 ->andWhere 等，但这只是为了 XDebug 目的。
*注意2*：$authNamespace->store 代表 GPos_Model_Store 实体的 ID。

无论如何，我得到一个例外`$queryBuilder->where('s.store = ?', $authNamespace->store)`声明：“在这种情况下不允许表达类型''。”

我尝试使用实体本身，但随后收到“在此上下文中不允许使用 'GPos_Model_Store' 类型的表达式”。例外...

你们中的任何人都可以指出我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T13:35:07.110

发现我的错误。

将我的查询更改为：

```
$queryBuilder = Zend_Registry::get('entityManager')->createQueryBuilder();
$queryBuilder->select('s');
$queryBuilder->from('GPos_Model_Sale', 's');
$queryBuilder->where('s.store = :store');
$queryBuilder->andWhere('s.seller = :seller');
$queryBuilder->andWhere('((s.date >= :dateStart');
$queryBuilder->andWhere('s.date <= :dateEnd');
$queryBuilder->andWhere('s.status = \'closed\') OR s.status = \'onhold\')');
$queryBuilder->groupby('s.id');
$queryBuilder->setParameter('store', $store->getId());
$queryBuilder->setParameter('seller', $seller->getId());
$queryBuilder->setParameter('dateStart', $dateStart->format('Y-m-d H:i:s'));
$queryBuilder->setParameter('dateEnd', $dateEnd->format('Y-m-d H:i:s'));
return $queryBuilder->getQuery()->getResult(); 
```

现在它就像一个魅力。

# ruby - 在 Ruby 中缓存 DNS 查询

> ID：10596616
> 
> 赞同：6
> 
> 时间：2012-05-15T08:10:37.503
> 
> 标签：ruby, caching, dns

我们使用 Ruby 中的 rest-client gem 来自动测试我们的 REST API。但是我注意到，在它发出的每一个请求中，它都会对主机名进行 DNS 查找。在本地环境中，如果使用“localhost”，测试会运行得很快，但如果使用正确的主机名，它们会花费 2.5 倍的时间，执行大量的 DNS 查找。

我相信这个问题与 rest-client 无关，而是与基本的 Ruby 网络有关。我试过要求'resolv'和'resolv-replace'，但它们没有帮助。'dig' 报告 DNS 查询的 TTL 为 1 小时。

有没有办法让 Ruby 缓存 DNS 请求？我可以更改代码以明确使用 IP 地址，但这是解决问题的错误位置。

我正在运行 Ubuntu 12.04 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-15T01:51:45.197

您可以使用 dnsruby gem 将名称解析为地址，然后在调用中使用该地址。

```
#! /usr/bin/env ruby

# Gets the IP address of a host.

require 'dnsruby'  # gem install dnsruby first, of course

def hostname_to_ip_addr(host_name)
  query = Dnsruby::Message.new(host_name)
  response = Dnsruby::Resolver.new.send_message(query)
  response.answer[1].address
end

host_name = 'cnn.com'
ip_addr = hostname_to_ip_addr(host_name)
puts("Host name: #{host_name}, IP address: #{ip_addr}") 
```

^([此要点](https://gist.github.com/keithrbennett/79d2041dca99bda9b60b.)的原始代码)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-12T16:04:50.843

我遇到了这个问题，寻找 ruby​​ dns 缓存以及如何`resolv.rb`使用 TTL 来缓存 dns 请求。

发现 dns 记录的 TTL 有点隐藏在 api 中，`resolv.rb`但看起来有点像这样：

```
def get_ip(hostname)
  dns = Resolv.new
  redis = Redis.new # storing in redis
  ip = redis.get("ip:#{hostname}") 
  return ip unless ip.nil?
  begin
    resource = dns.getresource(hostname, Resolv::DNS::Resource::IN::A)
  rescue Resolv::ResolvError
    return false
  end
  # storing in redis for only as long as the TTL allows
  redis.setex("ip:#{hostname}", resource.address.ttl, resource.address.to_s)
  resource.address.to_s # IP address as string
end 
```

[要旨](https://gist.github.com/cromulus/9015b083999c1aec2abf1df4d14248c4)

注意：使用 Redis 作为缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T22:17:55.983

操作系统通常会提供一些 dns 名称缓存，但并不总是启用。

据我了解，ruby 使用 libc 来解析名称。所以这可能会缓存每个进程的响应。不过，我并不完全确定 libc。

您可以尝试的一种可能的解决方法是在您的 ruby​​ 程序中手动将主机名解析为 ip 地址，然后使用返回的 IP 地址重复对同一主机的请求。

不过，这可能不适用于与 SSL 目标的连接。证书验证通常取决于匹配主机名。

也许有一个不错的 ruby​​ 网络套接字 gem 不使用 Net::HTTP 并且会保留它自己的 DNS 缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T21:11:21.400

我刚刚查看了其余客户端代码，它只是使用 Net::HTTP，而后者又使用 Socket。

然后一切都消失在 Ruby 解释器实现中，这是我的知识有点薄弱的地方（并且行为可能会根据您是否使用 MRI、JRuby 等而改变）

我希望 DNS 解析最终会推迟到操作系统，所以也许您的问题归结为主机上的一些奇怪的解析器配置？

# android - 如何在 ScrollView 中设置背景颜色？

> ID：10596623
> 
> 赞同：2
> 
> 时间：2012-05-15T08:10:59.640
> 
> 标签：android, scrollview, background-color

我有以下简单的布局

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:id="@+id/answerMainFrame"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/background"
        android:isScrollContainer="true"
        android:onClick="toAnswer" >

        <ImageView
            android:id="@+id/answer_img"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:contentDescription="@string/question_img_cd" />

        <TextView
            android:id="@+id/answer"
            style="@style/Question"
            android:layout_below="@id/answer_img" />
    </RelativeLayout>

</ScrollView> 
```

但有时，根据 ImageView 和 TextView 的大小，它不会填满屏幕的高度。没关系。我只希望屏幕的其余部分是白色而不是黑色。

我尝试将`android:background="@color/background"`ScrollView 设置为白色，但我得到了相同的结果。

我也尝试设置`android:layout_height="wrap_content"`为Relativelayout，但它显示警告。

我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:13:10.700

`ScrollView`将高度更改为`match_parent`并将白色设置为背景。所以根据你的代码是这样的：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
                  android:layout_width="fill_parent"
                  android:layout_height="match_parent"
                  android:background="@color/background">
... 
```

**笔记。** 关于的警告`RelativeLayout`可以很容易地解释。如果你将它的高度设置为`wrap_content`它就不能这样做，因为它内部的元素需要一组固定的尺寸，它的父级才能执行诸如附加到底部、中心或其他任何事情的事情。

起初我对此也有一些困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:15:29.047

那样做

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffff >

<RelativeLayout
    android:id="@+id/answerMainFrame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/background"
    android:isScrollContainer="true"
    android:onClick="toAnswer" >

    <ImageView
        android:id="@+id/answer_img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:contentDescription="@string/question_img_cd" />

    <TextView
        android:id="@+id/answer"
        style="@style/Question"
        android:layout_below="@id/answer_img" />
</RelativeLayout> </ScrollView> 
```

# iphone - 在 Facebook 中点击 Facebook 登录视图的登录对话框时，键盘不出现，例如 Delegate

> ID：10596624
> 
> 赞同：1
> 
> 时间：2012-05-15T08:11:00.170
> 
> 标签：iphone, objective-c, ios, xcode, xcode4.2

我在我的 iphone 应用程序中使用 facebook 之类的委托，当弹出 facebook 登录页面时，我点击用户名或密码字段，键盘没有出现。谁能告诉为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:15:47.917

尝试确保您的代表的布尔值不会覆盖出现的键盘。尝试查找 resignFirstResponder 方法并更改返回值以查看是否有效果。

# jquery - 如何使用 jQuery 在 1 级上获取所有 div？

> ID：10596625
> 
> 赞同：2
> 
> 时间：2012-05-15T08:11:07.877
> 
> 标签：jquery

$('#masterDiv div') 让我得到 masterDiv 下面的所有 div 和嵌套在这些 div 中的 div。如何获得只有1级的孩子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T08:12:20.807

使用这个`$('#masterDiv > div')`。

它是[子选择器](http://api.jquery.com/child-selector/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T08:12:46.130

```
$("#masterDiv").children("div") 
```

阅读[文档](http://api.jquery.com/children/)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:14:08.127

```
$('#masterDiv').children('div') 
```

# bash - 如何找到所有以句号结尾的单词？

> ID：10596640
> 
> 赞同：3
> 
> 时间：2012-05-15T08:12:21.180
> 
> 标签：bash, sed

我有一个文件包含许多以 a 结尾的单词`.`，其中大部分是缩写，例如：

*   等等
*   ps

我怎样才能输出一个显示所有这些单词的列表，只显示一次？

*   所有的单词前面都有一个空格，所以这个空格可以用来找到单词的开头。
*   没有任何单词出现在行首。
*   文件中没有句子，所以句号都是这样使用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:15:57.580

其中一种方法是：

```
egrep -o '\b[^ ]+\.' < list_of_words | sort | uniq 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:24:23.853

如果您有 GNU grep，请利用与 Perl 兼容的正则表达式：`grep -Po '\S*\.(?=$|\s)'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:17:09.273

你可以做：

```
egrep -io ' [a-z.]+\.' input_file | sort -u 
```

# ms-access - 间歇性消息“无法更新；当前锁定”，在 ACCESS 2000 中插入记录时

> ID：10596647
> 
> 赞同：1
> 
> 时间：2012-05-15T08:12:53.617
> 
> 标签：ms-access

以下是表单属性：

1.  导航按钮：是

2.  记录锁定：无锁定

前端，在用户本地 m/c 上。在单击导航按钮时，将记录插入到网络位置的访问数据库中，因为表是网络位置上表的链接。

我收到此错误消息：“无法更新；当前已锁定”；有时它工作正常。

有人可以帮我吗？我浪费了 3 天，但我没有找到任何可以帮助我的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:03:58.037

可以设置锁定的三个地方：

1.  Tools->Options下的后台数据库
2.  前端，同一个地方
3.  数据选项卡上的各种表格

如果您认为用户不会经常发生冲突，您可以将这些设置为 No Locks（乐观锁定）。如果两个用户尝试更改同一记录，他们将收到一条消息。

页级锁定是默认设置，速度更快。Allen Browne 建议您不要勾选使用记录级别锁定。

曲目名称自动更正是一种反功能，不应使用，除非在非常特殊的情况下。它会导致各种奇怪的问题。

如果发生奇怪的事情，压缩和修复几乎总是一个好主意。

**一些阅读**

设置共享 Access 数据库 (MDB) 的选项[http://office.microsoft.com/en-us/access-help/set-options-for-a-shared-access-database-mdb-HP005188297.aspx](http://office.microsoft.com/en-us/access-help/set-options-for-a-shared-access-database-mdb-HP005188297.aspx)

页面级锁定与记录级锁定[http://msdn.microsoft.com/en-us/library/aa189633(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa189633(v=office.10).aspx)

帮助 Access 运行得更快 [http://office.microsoft.com/en-us/access-help/help-access-run-faster-HA010235589.aspx](http://office.microsoft.com/en-us/access-help/help-access-run-faster-HA010235589.aspx)

# java - 在 Java 中定义一个包含三元组的数组

> ID：10596650
> 
> 赞同：1
> 
> 时间：2012-05-15T08:13:15.003
> 
> 标签：java, data-structures

我想定义一个包含三元组的数组，例如 Array a = {{1,2,3}, {3,4,5}, {5,6,7}};

我如何在 Java 中做到这一点？我应该使用什么数据结构？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:19:03.893

创建一个实现三元组的类，然后创建一个新的 Triplet 对象数组：

```
public class Triplet {
   private int first;
   private int second;
   private int third:

   public Triplet(int f, int s, int t) {
       first = f;
       second = s;
       third = t;
   }

/*** setters and getters defined here ****/

} 
```

然后定义 Triplet 类型的数组：

```
Triplet[] tripletsArray = new Triplet[size]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T08:14:17.293

您可以简单地使用二维数组：

```
int[][] a = {{1,2,3}, {3,4,5}, {5,6,7}}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T08:17:31.043

要使用数组执行此操作，您将定义一个数组数组，例如：

```
int[][] a = {{1,2,3},{3,4,5},{5,6,7}}; 
```

如果您的三元组在您的应用程序中表示某种对象，那么对于更面向对象的方法，创建一个类来保存您的三元组，然后将它们存储在一个列表中可能是有意义的。

```
public class Triplet {
    private int[] values = new int[3];
    public Triplet(int first, int second, int third) {
        values[0] = first;
        values[1] = second;
        values[2] = third;
    }
// add other methods here to access, update or operate on your values
} 
```

然后您可以按如下方式存储它们：

```
List<Triplet> triplets = new ArrayList<Triplet>();
triplets.add(new Triplet(1,2,3);
triplets.add(new Triplet(3,4,5);
triplets.add(new Triplet(5,6,7); 
```

然后，您可以利用 Lists 和 Collections 为您提供的所有操作（插入、删除、排序......）

# hadoop - 在 hadoop 上使用 grep map-reduce 程序

> ID：10596651
> 
> 赞同：0
> 
> 时间：2012-05-15T08:13:15.753
> 
> 标签：hadoop, grep, mapreduce

我正在使用嵌入在示例 jar 文件中的 hadoop grep 程序。

```
hadoop jar /usr/lib/hadoop/hadoop-examples.jar grep /user/tavasthi/log /user/tavasthi/log_result_output 'ip1 | ip2' 
```

但结果是错误的。我的目的是搜索出现 ip1 或 ip2 的记录。

请建议。

感谢你在期待！塔班

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:23:49.057

您的正则表达式很可能是错误的：`'ip1 | ip2'`应该是`'(ip1|ip2)'`- 注意您正在寻找的两个术语周围缺少空格和额外的括号

# javascript - 动态为不同大小的浏览器窗口应用不同的样式表

> ID：10596655
> 
> 赞同：1
> 
> 时间：2012-05-15T08:13:38.717
> 
> 标签：javascript, css

如果浏览器高于或低于某个高度，我将使用以下代码选择不同的样式表。当您登陆页面或调整窗口大小然后刷新时效果很好。但是有什么办法可以调整它以在调整窗口大小时动态选择正确的样式表？

```
if (window.innerHeight <= 900) {
    loadcss('css/container_sm.css');
} else {
    loadcss('css/container_lg.css');
}

function loadcss(file) {
    var el = document.createElement('link');
    el.setAttribute('rel', 'stylesheet');
    el.setAttribute('type', 'text/css');
    el.setAttribute('href', file);
    document.getElementsByTagName('head')[0].appendChild(el);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:21:52.760

也许值得研究一个现有的库，比如[twitter bootstrap](http://twitter.github.com/bootstrap/)？它们提供开箱即用的响应式样式表，可在调整窗口大小时自动调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:17:39.943

您可以向脚本添加事件句柄。用 jquery

```
$(window).resize(function(){
   if (window.innerHeight <= 900) {
    loadcss('css/container_sm.css');
   } else {
    loadcss('css/container_lg.css');
   }

}) 
```

没有 jquery window.onresize = function(){}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:21:49.653

这是我们必须做的：

1.  每当调整浏览器大小时，请检查调整大小是否导致浏览器高度从小（<= 900px）变为大（> 900px），反之亦然。如果这还没有发生，例如如果用户只将大小从 600px 调整到 601px，我们不需要替换 CSS。
2.  每当我们检测到浏览器已经从小到大调整大小，或者反之亦然，我们都会仔细选择旧的`container_lg.css`or`container_sm.css`并将其删除。
3.  然后，我们添加适当的 CSS。

这是代码：

```
var SMALL = 0;
var BIG = 1;
var previousSize = null;
var thresholdHeight = 400;
var firstCall = true;;

function selectCSS()
{
    if ((previousSize == null || previousSize == BIG) &&
         window.innerHeight <= thresholdHeight) {

        removeOldCSS();
        loadNewCSS('css/container_sm.css');
        previousSize = SMALL;

    } else if ((previousSize == null || previousSize == SMALL) &&
                window.innerHeight > thresholdHeight) {

        removeOldCSS();
        loadNewCSS('css/container_lg.css');
        previousSize = BIG;
    }
}

function removeOldCSS(file)
{
    var headNode = document.getElementsByTagName('head')[0];
    var linkNodes = document.getElementsByTagName('link');
    for (var i = 0; i < linkNodes.length; i++) {
        var linkNode = linkNodes[i];
        if (linkNode.parentNode == headNode &&
            linkNode.href.search(/css\/container_(?:sm|lg).css$/) >= 0) {

            headNode.removeChild(linkNode);
        }
    }
}

function loadNewCSS(file)
{
    var el = document.createElement('link');
    el.setAttribute('rel', 'stylesheet');
    el.setAttribute('type', 'text/css');
    el.setAttribute('href', file);
    document.getElementsByTagName('head')[0].appendChild(el);
}

window.onload = selectCSS;
window.onresize = selectCSS; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:22:12.153

尝试这个：

```
document.body.onresize = function (){
    if (window.innerHeight <= 900) {
        loadcss('css/container_sm.css');
    } else {
        loadcss('css/container_lg.css');
    }
}; 
```

# javascript - 如果搜索栏为空，则重绘表格

> ID：10596661
> 
> 赞同：0
> 
> 时间：2012-05-15T08:13:59.530
> 
> 标签：javascript, jquery, datatables

基于[这个讨论](http://datatables.net/forums/discussion/4222/server-side-ajax-search-wait-till-finish-entering/p1)，在我的 JS 代码中添加了下面的代码，以便通过按 enter 键而不是 keyup 或延迟来触发过滤。

```
jQuery.fn.dataTableExt.oApi.fnSetFilteringPressEnter = function (oSettings) {
    var _that = this;

    this.each(function (i) {
        $.fn.dataTableExt.iApiIndex = i;
        var $this = this;
        var anControl = $('input', _that.fnSettings().aanFeatures.f);
        anControl.unbind('keyup').bind('keypress', function (e) {
            if (e.which == 13) {
                $.fn.dataTableExt.iApiIndex = i;
                _that.fnFilter(anControl.val());
            }
        });
        return this;
    });
    return this;
}

/* Example call */
$(document).ready(function() {
    $('.dataTable').dataTable().fnSetFilteringPressEnter();
} ); 
```

现在我想做的是，当用户从搜索栏中删除关键字时，我想重绘表格。目前它不会在不按 Enter 按钮的情况下重绘。我怎样才能达到这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:19:29.717

我认为在键盘的 keyup 事件上这样做是安全的，不像只在`enter`按键上触发。

```
anControl.off('keyup').on('keypress', function (e) {
        $.fn.dataTableExt.iApiIndex = i;
        _that.fnFilter(anControl.val());
}); 
```

另外，请注意，我使用`on()`and`off()`来代替委派，从 jQuery 1.7 开始不推荐使用`bind`and`unbind`

或者，您可以为特定情况创建一个完全不同的处理程序，其中删除文本框中的所有关键字。

```
 anControl.off('keyup').on('keypress', function (e) {
        if (e.which == 13) {
            $.fn.dataTableExt.iApiIndex = i;
            _that.fnFilter(anControl.val());
        }
        if(anControl.val().length == 0) {
               //redraw table
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:27:46.670

`.blur`也许你可以通过使用jquery 的事件来实现你所需要的。当文本框失去焦点时..简单地将过滤器设置为这样的空字符串。

```
this.each(function (i) {
        $.fn.dataTableExt.iApiIndex = i;
        var $this = this;
        var anControl = $('input', _that.fnSettings().aanFeatures.f);
        anControl.unbind('keyup').bind('keypress', function (e) {
            if (e.which == 13) {
                $.fn.dataTableExt.iApiIndex = i;
                _that.fnFilter(anControl.val());
            }
        });
        anControl.blur(function(){
            _that.fnFilter('');
        });
        return this;
    });
    return this; 
```

# php - Chrome 扩展导致 PHP 服务器发送 HTTP 500 错误？

> ID：10596665
> 
> 赞同：0
> 
> 时间：2012-05-15T08:14:09.220
> 
> 标签：php, session, google-chrome, google-chrome-extension

我有一个非常奇怪的问题。我有一个基于[THINKPHP](http://thinkphp.cn/)和 SESSION 的 PHP 服务器。

服务器返回 HTTP 500 导致“找不到类”。

但是这个错误发生在“session_start();”之后 （我真的很确定代码在此行之前和此行之后运行良好），当它成为评论时，一切都很好。

只有当我使用带有多个扩展的 Chrome 时才会发生这种情况。IE 运行良好。

我停止了所有扩展，然后 Chrome 运行良好。但是在我重新启动所有扩展之后，问题并没有再次出现。所以我很抱歉地说我不知道​​是哪个扩展使它发生。

那么你遇到过这个问题吗？它是如何发生的？（我知道我说的很不合逻辑。如果您想了解更多细节，请随时问我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:17:42.430

开始会话时出现“找不到类”是因为您在会话中放置了一个对象。当 PHP 试图恢复对象时，它期望类已经被加载。您要么必须在开始会话之前手动执行此操作，要么实现可以按需加载它的自动加载功能。

# java - 如何使用 gson 调用默认反序列化

> ID：10596667
> 
> 赞同：31
> 
> 时间：2012-05-15T08:14:16.953
> 
> 标签：java, android, gson, json

我得到一个具有“字段”字段的 json。
如果“字段”有数据，那么就有一个 OBJECT，其中有许多（大约 20 个）也是对象的其他字段。我可以毫无问题地反序列化它们。
但是如果“字段”没有数据，它就是一个空数组（我知道这很疯狂，但这是来自服务器的响应，我无法更改它）。像这样的东西：

空时：

```
"extras":[

] 
```

有一些数据：

```
"extras": {
    "22":{ "name":"some name" },
    "59":{ "name":"some other name" },
    and so on...
} 
```

所以，如果没有数据（空数组），我显然得到了异常

```
Caused by: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException:
Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 4319 
```

我尝试使用自定义 JavaDeserializer：

```
public class ExtrasAdapter implements JsonDeserializer<Extras> {
    @Override
    public Extras deserialize(JsonElement json, Type typeOf,
        JsonDeserializationContext context) throws JsonParseException {
        try {
            JsonObject jsonObject = json.getAsJsonObject();
            // deserialize normally

            // the following does not work, as it makes recursive calls
            // to the same function
            //return context.deserialize(jsonObject,
            //                       new TypeToken<Object>(){}.getType());
        } catch (IllegalStateException e) {
            return null;
        }
    }
} 
```

我通过以下方式阅读json

```
Gson gsonDecoder = new GsonBuilder().registerTypeAdapter(Extras.class, new ExtrasAdapter();
// httpResponse contains json with extras filed. 
Reader reader = new InputStreamReader(httpResponse.getEntity().getContent());
Extras response = gsonDecoder.fromJson(reader, Extras.class); 
```

我不想手动反序列化所有 20 个字段（我知道这是一个选项），我只想调用 context.defaultDeserialize() 或类似的东西。
再一次：我在反序列化普通 json、创建自定义对象、注册自定义 TypeAdapter、自定义 JavaDeserializer 方面没有任何问题。这一切都已经奏效了。我只需要一些处理数据的解决方案，既可以是数组也可以是对象。
谢谢你的帮助。

======================

乔伊的答案很完美。这就是我要找的东西。我将在这里发布我的代码。

```
public class SafeTypeAdapterFactory implements TypeAdapterFactory {
    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
        final TypeAdapter<T> delegate = gson.getDelegateAdapter(this, type);
        return new TypeAdapter<T>() {
            public void write(JsonWriter out, T value) throws IOException {
                try {
                    delegate.write(out, value);
                } catch (IOException e) {
                    delegate.write(out, null);
                }
            }
            public T read(JsonReader in) throws IOException {
                try {
                    return delegate.read(in);
                } catch (IOException e) {
                    Log.w("Adapter Factory", "IOException. Value skipped");
                    in.skipValue();
                    return null;
                } catch (IllegalStateException e) {
                    Log.w("Adapter Factory", "IllegalStateException. Value skipped");
                    in.skipValue();
                    return null;
                } catch (JsonSyntaxException e) {
                    Log.w("Adapter Factory", "JsonSyntaxException. Value skipped");
                    in.skipValue();
                    return null;
                }
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-20T23:03:51.713

尝试使用 GSON >= 2.2.1 并查找[TypeAdapterFactory](https://static.javadoc.io/com.google.code.gson/gson/2.8.0/com/google/gson/TypeAdapterFactory.html)类。

这将使您能够在反序列化之前检查对象并应用自定义代码，同时避免递归。

这是您可以使用的[getDelegateAdapter](https://static.javadoc.io/com.google.code.gson/gson/2.8.0/com/google/gson/Gson.html#getDelegateAdapter-com.google.gson.TypeAdapterFactory-com.google.gson.reflect.TypeToken-)示例。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-11-24T08:51:04.980

```
public class ExtrasAdapter implements JsonDeserializer<Extras> {
@Override
public Extras deserialize(JsonElement json, Type typeOf, 
              JsonDeserializationContext context) throws JsonParseException {
    try {
        JsonObject jsonObject = json.getAsJsonObject();
        return new Gson().fromJson(jsonObject , Extras.class); // default deserialization

    } catch (IllegalStateException e) {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-15T12:27:19.243

对于迟到的任何人，您不需要实现 TypeAdapter 来解决这个问题，尽管这样做是一个完全有效的解决方案。

这个问题的答案其实就在原来的问题中：

```
public class ExtrasAdapter implements JsonDeserializer<Extras> {

@Override
public Extras deserialize(JsonElement json, Type typeOf, 
          JsonDeserializationContext context) throws JsonParseException {
    try {
        JsonObject jsonObject = json.getAsJsonObject();
        // deserialize normally

        // the following does not work, as it makes recursive calls 
        // to the same function 
        //return context.deserialize(jsonObject, new TypeToken<Object>(){}.getType());
    } catch (IllegalStateException e) {
        return null;
    }
} 
```

被注释掉的

```
return context.deserialize(jsonObject, new TypeToken<Object>(){}.getType()); 
```

几乎是解决方案。问题有两个方面。首先， jsonObject 是最初传递给这个函数的确切对象。

```
JsonObject jsonObject = json.getAsJsonObject(); 
```

因此将其传递给 context.deserialize() 将创建递归，并最终导致 OOM。这里的解决方案是解析出jsonObject里面的对象。

这将我们引向第二个问题，即这里有两件事混合在一起。“Extras”是一种对象类型，大概有一个支持它的具体类（也可能是一个空数组）。“额外”是一张地图。试图将“Extra”解析为“Extras”是行不通的。为此，我建议对“附加”进行以下定义：

```
public class Extras {
    Map<String, Map<String, String>> extras;
    // you could also create a concrete class for "Extra"
    //and have this be a Map<String, Extra>
} 
```

在这种情况下，使用 context.deserialize 解决问题变得微不足道。

如上所述，TypeAdatper 是解决此问题的完美解决方案。我只是相信它比你需要的更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-04T14:28:15.887

我根据我的需要创建了一个替代 TypeAdapter，让空数组反序列化为 null，但仅适用于我指定的类：

```
class EmptyArraysAsNullTypeAdapterFactory @Inject constructor() : TypeAdapterFactory {

companion object {

    // Add classes here as needed
    private val classesAllowedEmptyArrayAsNull = arrayOf(Location::class.java,
                                                         Results::class.java)

    private fun isAllowedClass(rawType: Class<*>): Boolean {
        return classesAllowedEmptyArrayAsNull.find { rawType.isAssignableFrom(it) } != null
    }
}

override fun <T> create(gson: Gson, type: TypeToken<T>): TypeAdapter<T>? {
    val delegate = gson.getDelegateAdapter(this, type)

    val rawType = type.rawType as Class<T>

    return object : TypeAdapter<T>() {

        override fun write(out: JsonWriter, value: T?) {
            delegate.write(out, value)
        }

        override fun read(reader: JsonReader): T? {
            return if (reader.peek() === JsonToken.BEGIN_ARRAY && isAllowedClass(rawType)) {
                reader.beginArray()

                // If the array is empty, assume it is signifying null
                if (!reader.hasNext()) {
                    reader.endArray()
                    null
                } else {
                    throw JsonParseException("Not expecting a non-empty array when deserializing: ${type.rawType.name}")
                }

            } else {
                delegate.read(reader)
            }
        }
    }
} 
```

}

# iphone - Xcode 正在检查文件是否准备好 ARC，即使它没有在转换工具中选择

> ID：10596686
> 
> 赞同：3
> 
> 时间：2012-05-15T08:15:46.237
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

我在 Xcode 中将我的项目转换为弧（编辑>转换为弧）。

我已取消选择文件 JRActivityObject.m 但是它返回此文件的 ARC 错误。我已在列表中明确取消选择此文件，因此我无法理解 Xcode 为何要检查此文件。

有任何想法吗？

> 将 Objective-C 指针类型“NSString *”转换为 C 指针类型“CFStringRef”（又名“const struct __CFString *”）需要桥接转换
> 
> 'autorelease' 不可用：在自动引用计数模式下不可用

* * *

我清理了项目并删除了构建文件，错误现在消失了。

但是我仍然有这个[问题](https://stackoverflow.com/questions/10596905/converting-project-to-arc-xcode-finds-release-retain-issue-with-files-before-it)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:32:41.447

`JRActivityObject.m`即使未选择，您的文件也已在 ARC 模式下编译。

我建议您将此文件标记为无法在 ARC 模式下使用的编译器

**单击您的项目名称>构建阶段选项卡>编译源部分>选择`JRActivityObject.m`并按回车>键入“ *-fno-objc-arc* ”并单击完成。**

现在您`JRActivityObject.m`将不会在 ARC 模式下编译。希望它可以帮助你。

# java - 使用在 ServeltContextListener 中外部定义的类

> ID：10596699
> 
> 赞同：0
> 
> 时间：2012-05-15T08:16:25.983
> 
> 标签：java, tomcat, servlets, noclassdeffounderror

我正在实现 ServletContextListener：

```
public class Listener implements ServletContextListener {

    public void contextInitialized(ServletContextEvent arg0) {

        ServletContext context=arg0.getServletContext();

        try {
            XMLInputSource in = new XMLInputSource("/home/ahmed/Desktop/AE.xml");
        } catch (IOException e) {

        }
    }
} 
```

where在**外部 jar**`XMLInputSource`中定义；包含在项目中（在 Eclipse 上）。

 **但是，尝试使用这个**外部类**会导致**异常**：java.lang.NoClassDefFoundError

有什么帮助吗？Tomcat 是否需要以特殊方式注册使用的外部库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:23:37.487

Webapp 库必须存储在已部署的 Web 应用程序的 /WEB-INF/lib 目录中。在 WTP eclipse 项目中，你只需要将 jar 放到 WebContent/WEB-INF/lib 文件夹中，这个 jar 将自动被

*   在项目的构建类路径中
*   部署在 /WEB-INF/lib byt Eclipse 下

因此，将其从构建路径中删除，并将其放在 WebContent/WEB-INF/lib 中。

请不要像在代码片段中那样吞下异常！如果不能抛出 IOException，至少抛出一个包装原始 IOException 的运行时异常。**

# ruby-on-rails - 如何在 Rails 中为创建操作进行调解

> ID：10596701
> 
> 赞同：0
> 
> 时间：2012-05-15T08:16:36.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有这个动作来创建一个对象。

```
def create 
  @campaign = Campaign.create(params[:campaign])
  respond_with(@campaign)
end 
```

由于我正在使用`rails3-jquery-autocomplete`为用户创建自动完成以输入用户名，因此我将用户名作为字符串接收，我需要将其转换为 id 以将其保存为`user_id:integer`.

我不确定如何在`create`触发操作之前运行代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:09:17.227

您可能想使用`before_filter`Rails 提供的方法。

```
class CampaignsController < ApplicationController
  before_filter :intercede, only: :create

  # some other actions here

  def create 
    @campaign = Campaign.create(params[:campaign])
    respond_with(@campaign)
  end

  private

  def intercede
    # let's do some hacking with params here
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:23:05.070

您可以在 User 模型中创建 getter 和 setter 方法来查找分配的用户，如下所示：

```
def username
  user.name
end

def username=(name)
  self.user = User.find_by_name(name)
end 
```

如果您在用户模型中使用 attr_accesible，请确保包含 :username。

还要澄清一下，此示例依赖于 jquery 表单字段使用名称 username

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:56:23.473

您可以像这样修改 create 方法中的参数：

```
def create 
  # preprocess params
  user = User.find_by_name(params[:campaign][:user_id])
  params[:campaign][:user_id] = user.id
  # Now create the record
  @campaign = Campaign.create(params[:campaign])
  respond_with(@campaign)
end 
```

但正如 gmile 所提到的，最好在 :before_filter 中对参数进行这种处理。

# jquery - jQuery：获取 iframe 内容，相同的域

> ID：10596702
> 
> 赞同：4
> 
> 时间：2012-05-15T08:16:41.887
> 
> 标签：jquery, iframe

我想获得 `.text()`一个 iframe，但它不起作用。iframe 在同一个域中。单击一次，我将页面加载到框架中，第二次我想在警报中显示内容，但我得到空警报。

```
<html> 
 <head> 
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 

 <script type="text/javascript"> 

$(document).ready( function() {
        // load simple paage to the frame
    $("#load").click( function(){

        $("<iframe id='theframe' width='400' // single line
          height='400' src='http://localhost/dummy.html'/>").appendTo('body');

     } );

        // display the content - but I get empty alert
    $('#content').click( function() {
    var content;
    content = $("#theframe").text();
    alert(content);
    });
});

 </script> 
 </head> 
 <body> 

<a id='load' href="#">load</a>
<a id='content' href="#">check content</a>

 </body> 
 </html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:35:01.480

取自：[在 iFrame jQuery 中选择一个元素](https://stackoverflow.com/questions/6316979/selecting-an-element-in-iframe-jquery)

```
var iframe = $('iframe'); // or some other selector to get the iframe
$('[tokenid=' + token + ']', iframe.contents()).addClass('border');` 
```

# java - 整数比较值的错误输出

> ID：10596704
> 
> 赞同：3
> 
> 时间：2012-05-15T08:16:47.640
> 
> 标签：java, comparison, integer, int

我有以下代码。

```
public static void doIntCompareProcess() {
    int a = 100;
    int b = 100;

    Integer c = 200;
    Integer d = 200;

    int f = 20000;
    int e = 20000;

    System.out.println(c == d);
    compareInt(e, f);
    compareInt(a, b);
}

public static void compareInt(Integer v1, Integer v2) {
    System.out.println(v1 == v2);
} 
```

这给了我这个输出：

```
false
false
true 
```

当前输出应该是：

```
false
false
false 
```

为什么我得到错误的代码输出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T08:18:10.833

最后一行对应于：

```
compareInt(100, 100); 
```

由于`compareInt()`需要两个`Integer`对象，因此这两个参数会自动装箱。`Integer(n)` *在此过程中，小值的`n`*实例会被实习。换句话说，`compareInt()`接收*对同一个`Integer(100)`对象*的两个引用。这就是导致最后一个比较评估为 的原因`true`。

请参阅[在 Java 中使用 == 运算符来比较包装器对象](https://stackoverflow.com/questions/10149959/using-operator-in-java-to-compare-wrapper-objects)

底线是不要使用`==`运算符直接比较`Integer`对象。如需进一步讨论，请参阅[https://stackoverflow.com/a/1515811/367273](https://stackoverflow.com/a/1515811/367273)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T08:30:58.413

出于性能原因，原始字节范围 -128 到 127 中的整数值被缓存。由于 100 是此范围内的值，因此每次都从缓存中返回相同的对象。对于不在此范围内的值，被认为不需要经常使用，并为它们返回新的 Integer 对象。现在，在您的情况下，您正在比较对象引用而不是值，并且由于 100 来自缓存，因此 compareInt() 中的参数指向同一个对象，因此比较等于 true。

# gwt - GWT 和 MVP 上的 TabLayoutPanel

> ID：10596705
> 
> 赞同：0
> 
> 时间：2012-05-15T08:16:59.560
> 
> 标签：gwt, mvp, gwt-tablayoutpanel

我开始根据这个模型使用 MVP 架构开发与 GWT 的接口：

*   实例化 TabLayoutPanel 的第一个视图定义了第一个 Tab 的小部件和一个空的第二个 Tab。
*   第二个选项卡的 onSelection 我触发了一个事件，该事件将整个 TabLayoutPanel 发送到第二个视图，该视图将定义第二个选项卡的小部件。

在第二个视图中，我收到了适当的 TabLayoutPanel，但是当我检索第二个选项卡时，进行更改并将其插入旧面板中，我收到消息“此小部件的父级未实现 HasWidgets”，并且第二个选项卡消失了。

感谢您帮助我了解这里真正的问题是什么，或者如何解决。

我添加了带有注释的第二个视图代码。

```
public class MDP2View extends Composite implements MDP2Presenter.Display {

    private final TabLayoutPanel tabPanel;
    private final VerticalPanel MDP2;
    private final Label label;

    public MDP2View(HasSelectionHandlers<Integer> tabPanel) {
            // Getting the TabLayoutPanel created on the first View  
        this.tabPanel = (TabLayoutPanel) tabPanel;
            // Getting the second Tab (this will remove the Tab from the TabLayoutPanel)
        MDP2 = (VerticalPanel) this.tabPanel.getWidget(1); 
        initWidget(MDP2);
            // Adding a label to the Tab
        label = new Label();
        label.setText("onSelectionHandler Works!!!");
        MDP2.add(label);
            // Inserting the Tab in the tabPanel
        this.tabPanel.insert(MDP2, "MDP2", 1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:55:39.863

当您将其构造函数中的小部件添加到父级时，问题就开始了。这导致您的代码中出现此错误。首先，您`MDP2`通过调用将小部件附加到 MDP2View 的新父级`initWidget`。`MDP2View`是新的父级`MDP2`（因为它现在已从 tabPanel 中删除）。然后在插入中您可能打算插入您的视图，而是插入它是唯一的子小部件`MDP2`。抛出错误是因为 insert 将隐式尝试通过该方法`MDP2`从其父级中删除，并且不允许. 如果我是正确的，这应该可以正常工作。`MDP2View``removeParent``MDP2View``this.tabPanel.insert(this, "MDP2", 1);`

但是最好从这个构造函数中删除与 tabPanel 的交互并将其移动到例如 selectionHandler 的实现中。这将使您的视图更清晰。这段代码只是在等待未来的错误：强制转换为 TabLayoutPanel，强制转换为 VerticalPanel；如果您更改该小部件怎么办，这将导致运行时错误。获取并插入硬编码位置 1；如果您在 1 之前添加一个选项卡怎么办；您的代码将表现不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:58:49.890

我认为你必须创建你的 MDP2 对象而不获取现有小部件的引用（这里`this.tabPanel.getWidget(1)`）。然后，将全新的 MDP2 插入`tabpanel#1`.

就像是：

```
MDP2 = initWidget(new VerticalPanel()); 
// Adding a label to the Tab
label = new Label();
label.setText("onSelectionHandler Works!!!");
MDP2.add(label);
// Inserting the Tab in the tabPanel
this.tabPanel.insert(MDP2, "MDP2", 1); 
```

我认为在已经存在的东西上调用方法“init”可能很危险:)

# c# - Windows 手机自定义文本框 - 无 SIP/仅删除内容

> ID：10596706
> 
> 赞同：0
> 
> 时间：2012-05-15T08:17:00.420
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我正在设计一个简单的计算器应用程序。

在那里，我有自己的键盘（一堆按钮）来输入东西。所以，我不需要系统键盘来输入。但是，我希望用户能够像普通文本框一样从表达式框中选择和删除内容。

这可能吗？我认为不会；考虑到微软对 API 的严格限制。但是，仍然在黑暗中拍摄..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:35:29.437

这将是可能的，但您必须模拟本机控件为您提供的许多内容，例如焦点和文本选择。

为了添加部分文本选择，这似乎不必要地复杂。如果您确实必须进行部分选择，我建议您尝试使用虚拟箭头键沿选择移动插入符号。

# php - 在php中加载大量的json数据

> ID：10596708
> 
> 赞同：0
> 
> 时间：2012-05-15T08:17:06.783
> 
> 标签：php, json

我是一个初学者，很抱歉这个愚蠢的问题，

我有一个包含大量数据的 json，我必须在 php.ini 中处理这个文件。（编辑/删除/过滤对象）。

我的想法是：一个包含对象列表的类和从 json 加载对象的函数和另一个将它们写回的函数。此外，还有对列表进行操作的其他函数。

我要问的是最好的方法是什么，因为我的想法是最简单的，而不是每次单击：编辑，删除，过滤器我必须一次又一次地重新加载 loatJsonObjects()，你能给我有一个更好的方法来做到这一点，每次都不会做这么多的操作？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:28:29.580

所以，我不应该真的试图为你写一个，但我今天早上心情很好。尝试这个：

```
Class Json_Handler {
  private $json_object;
  public function __construct($json_data) {

    if(is_object($json_data) {
      $this->json_object = $json_data;
    }

  }

  public function edit($key, $value) {

    if(isset($this->json_data[$key])) {
     $this->json_data[$key] = $value;
     return $this;
    }
    else {
     return FALSE;
    }

  }

  public function delete($key) {
    if(isset($this->json_data[$key])) {
      unset($this->json_data[$key]);
      return $this;
    }
    else {
      return FALSE;
    }
  }

  public function filter($on = 'key', $filter == NULL) {
     $filtered_objects = array();
     switch($on) {
       case 'key':
       default:
        foreach($this->json_data as $key => $value) {
          if($key == $value) {
            $filtered_objects[] = array($key => $value);
          }
        }
        break;
        case 'value':
         foreach($this->json_data as $key => $value) {
           $filtered_objects[] = array($key => $value);
         }
        break;
     }
     return $filtered_objects;
  }

  public function get_json() {
    return json_encode($this->json_data);
  }

  public function set_json($json) {
    $this->json_data = (is_object($json) ? $json : json_encode($json));
    return $this;
  }

} 
```

然后你可以这样使用它：

```
$my_json_data = json_decode([...]);
$json = new Json_Handler($my_json_data);
echo $json->edit('test', 'now i have this value')
          ->delete('test')
          ->filter('key', 'bar');
          ->set_json(json_encode($new_json)
          ->get_json(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:21:56.400

您可以将 JSON 数据解码为 Array 并将其存储在 Global Variable 或 Session 变量中。然后将该会话变量用于编辑、删除、过滤操作。我不知道这是否好，但这是一种方法。

让我知道任何其他方式....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:22:40.223

如果您可以将数据保存在一个普通的 PHP 数据对象中，并在该对象中包含您的“处理”例程，那么您可以减少对该数据重新执行所需的操作量。

然后可以缓存该对象，从而加快未来的数据检索。此外，您不需要在同一个数据集上重新运行这些昂贵的操作（直到缓存的项目过期）。

# java - 使用 Guice 的 Projekt 在 Eclipse 中运行，在终端上没有

> ID：10596710
> 
> 赞同：0
> 
> 时间：2012-05-15T08:17:19.153
> 
> 标签：java, eclipse, jar, guice

我需要帮助才能运行给定的项目。该项目是：[http ://code.google.com/p/opennetinf/](http://code.google.com/p/opennetinf/)

我按照文档中的说明让项目在 Eclipse 中运行。现在我想从终端运行这个项目。在项目启动一段时间后，终端上出现了一个很大的异常。log4j 输出的第一行类似于 eclipse 控制台中的输出。例外是：

```
 Exception in thread "main" com.google.inject.ProvisionException: Guice provision errors:

1) Error in custom provider, java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
  at netinf.node.cache.peerside.PeersideCacheModule.provideNetworkCaches(PeersideCacheModule.java:64)
  while locating java.util.List<netinf.node.cache.peerside.PeersideCache>
    for parameter 0 at netinf.node.cache.CachingInterceptor.setPeersideCaches(CachingInterceptor.java:81)
  while locating netinf.node.cache.CachingInterceptor
  at netinf.node.module.StandardNodeModule.provideResolutionInterceptors(StandardNodeModule.java:125)
  while locating netinf.node.resolution.ResolutionInterceptor[]
    for parameter 0 at netinf.node.resolution.impl.ResolutionControllerImpl.initReslolutionInterceptors(ResolutionControllerImpl.java:442)
  while locating netinf.node.resolution.impl.ResolutionControllerImpl
  while locating netinf.node.resolution.ResolutionController
    for parameter 0 at netinf.node.api.impl.NetInfNodeImpl.setResolutionController(NetInfNodeImpl.java:95)
  while locating netinf.node.api.impl.NetInfNodeImpl
  while locating netinf.node.api.NetInfNode

1 error
    at com.google.inject.InjectorImpl$4.get(InjectorImpl.java:767)
    at com.google.inject.InjectorImpl.getInstance(InjectorImpl.java:793)
    at netinf.node.StarterNode.start(StarterNode.java:126)
    at netinf.node.StarterNode.main(StarterNode.java:75)
Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.google.inject.internal.ProviderMethod.get(ProviderMethod.java:106)
    at com.google.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:48)
    at com.google.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)
    at com.google.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)
    at com.google.inject.SingleMethodInjector.inject(SingleMethodInjector.java:84)
    at com.google.inject.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:99)
    at com.google.inject.ConstructorInjector.construct(ConstructorInjector.java:94)
    at com.google.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:111)
    at com.google.inject.InjectorImpl$4$1.call(InjectorImpl.java:758)
    at com.google.inject.InjectorImpl.callInContext(InjectorImpl.java:811)
    at com.google.inject.InjectorImpl$4.get(InjectorImpl.java:754)
    at com.google.inject.spi.ProviderLookup$1.get(ProviderLookup.java:89)
    at com.google.inject.internal.ProviderMethod.get(ProviderMethod.java:95)
    at com.google.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:48)
    at com.google.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)
    at com.google.inject.InjectorImpl.callInContext(InjectorImpl.java:811)
    at com.google.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)
    at com.google.inject.Scopes$1$1.get(Scopes.java:54)
    at com.google.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:48)
    at com.google.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)
    at com.google.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)
    at com.google.inject.SingleMethodInjector.inject(SingleMethodInjector.java:84)
    at com.google.inject.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:99)
    at com.google.inject.ConstructorInjector.construct(ConstructorInjector.java:94)
    at com.google.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:111)
    at com.google.inject.FactoryProxy.get(FactoryProxy.java:56)
    at com.google.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)
    at com.google.inject.InjectorImpl.callInContext(InjectorImpl.java:811)
    at com.google.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)
    at com.google.inject.Scopes$1$1.get(Scopes.java:54)
    at com.google.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:48)
    at com.google.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)
    at com.google.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)
    at com.google.inject.SingleMethodInjector.inject(SingleMethodInjector.java:84)
    at com.google.inject.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:99)
    at com.google.inject.ConstructorInjector.construct(ConstructorInjector.java:94)
    at com.google.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:111)
    at com.google.inject.FactoryProxy.get(FactoryProxy.java:56)
    at com.google.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)
    at com.google.inject.InjectorImpl.callInContext(InjectorImpl.java:811)
    at com.google.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)
    at com.google.inject.Scopes$1$1.get(Scopes.java:54)
    at com.google.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:48)
    at com.google.inject.InjectorImpl$4$1.call(InjectorImpl.java:758)
    at com.google.inject.InjectorImpl.callInContext(InjectorImpl.java:804)
    at com.google.inject.InjectorImpl$4.get(InjectorImpl.java:754)
    ... 3 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.google.inject.internal.ProviderMethod.get(ProviderMethod.java:101)
    ... 48 more
Caused by: java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.arrayFormat(Ljava/lang/String;[Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple;
    at org.slf4j.impl.JDK14LoggerAdapter.warn(JDK14LoggerAdapter.java:450)
    at org.eclipse.jetty.util.log.Slf4jLog.warn(Slf4jLog.java:40)
    at org.eclipse.jetty.util.log.Log.warn(Log.java:237)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.setFailed(AbstractLifeCycle.java:198)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
    at netinf.node.cache.peerside.PeersideAccessServer.start(PeersideAccessServer.java:64)
    at netinf.node.cache.peerside.PeersideCache.<init>(PeersideCache.java:79)
    at netinf.node.cache.peerside.PeersideCacheModule.provideNetworkCaches(PeersideCacheModule.java:77)
    ... 53 more 
```

那么我做了什么：我通过 Eclipse 导出对话框（导出 -> 可运行 Jar）导出了项目。库处理无关紧要。对于这三种方法中的每一种，我都会得到相同的异常。

所以我的问题是：这个异常告诉我什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:16:46.297

这似乎是与 Slf4j 相关的类路径错误。查看[构建文件](http://code.google.com/p/opennetinf/source/browse/build/build.xml#74)，这个项目似乎使用了 Slf4j 1.5.6。

确保以下 2 个 jar 文件在您的类路径中：

```
slf4j-api-1.5.6.jar 
slf4j-log4j12-1.5.6.jar 
```

还要确保类路径中没有其他 slf4j jar。

# java - 如何在mac上保持ssh连接？

> ID：10596713
> 
> 赞同：0
> 
> 时间：2012-05-15T08:17:24.940
> 
> 标签：java, mysql, jdbc, ssh

我正在尝试连接到远程服务器并通过 JDBC 执行一些 mysql 查询。但是如果我离开一段时间，我会得到“断管”。我想知道我是否可以保持联系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:18:51.247

您需要定期执行一个虚拟查询以保持连接处于活动状态，如果 MySQL 保持空闲状态，MySQL 会在 8 小时断开连接（默认情况下）

您可以通过使用连接池来处理此问题，该连接池配置为以某种间隔执行验证查询

# memory-management - HBase MemStore 和垃圾回收

> ID：10596717
> 
> 赞同：5
> 
> 时间：2012-05-15T08:17:41.193
> 
> 标签：memory-management, hadoop, hbase

我是 HBase 的新手，但我已经设置并了解了有关 HBase 和 Hadoop 的一些知识。

当我研究 HBase MemStore 时，我对 MemStore 的所有理解是“MemStore 是 HBase 放置必须写入或读取的数据的内存位置”。所以，这就是为什么我们想在何时何地阅读有关 memstore 的内容，我们还会看到有关垃圾收集的讨论。

现在我的问题是 memstore 的唯一目的是在内存中保存可读和可写的数据吗？我们可以调整该内存的大小以从 hbase 获得快速回复吗？垃圾收集配置（收集器配置）会影响 memstore 吗？我认为应该是的。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T05:35:24.010

您对 Hbase Memstore 的看法是正确的。一般来说，当有东西写入 HBase 时，它​​首先被写入内存存储（memstore），一旦这个 memstore 达到一定的大小*，它就会被刷新到磁盘到存储文件中（所有内容也立即写入日志文件的耐久性）。

*从全局角度来看，HBase 默认使用 40% 的堆（参见属性 hbase.regionserver.global.memstore.upperLimit）用于所有表的所有列族的所有区域的所有 memstore。如果达到此限制，它将开始刷新一些 memstore，直到 memstore 使用的内存低于堆的至少 35%（lowerLimit 属性）。这是可调整的，但您需要进行完美的计算才能进行此更改。

是的，GC 确实会影响 memstore，您实际上可以通过使用 Memstore-local 分配缓冲区来修改此行为。我建议您阅读关于“使用 MemStore-Local 分配缓冲区避免 HBase 中的完整 GC”的 3 部分文章，如下所示： [http ://www.cloudera.com/blog/2011/02/avoiding-full-gcs-in -hbase-with-memstore-local-allocation-buffers-part-1/](http://www.cloudera.com/blog/2011/02/avoiding-full-gcs-in-hbase-with-memstore-local-allocation-buffers-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:35:46.660

问题是java作为一种技术在处理创建和删除大量对象的服务器方面存在问题，同时应该及时响应所有请求。根本原因是垃圾收集器有时应该这样做，称为“停止世界”并清理内存。在大堆中，它可能会导致几秒钟的延迟。
现在让我们看看为什么它会发生在 HBase 上，以及为什么它必须及时响应。
Memstore 是区域数据的缓存。如果数据高度易变，则会创建/删除许多对象。结果有很多 GC（垃圾收集器）压力。
HBase，因为任何处理大数据集的实时系统都倾向于尽可能多地缓存，并且它的 MemStore 很大。
HBase 区域服务器必须及时与 ZooKeeper 进行通信，以告知它们还活着并避免迁移。Long GC pacuse 可以防止它。
cloudera 做了什么——实现了自己的内存管理机制，专门用于 MemStore 以避免 GC 暂停。Larse 在他的书中描述了如何调整 GC 以使其更好地与 Region Server 一起工作。
[http://books.google.co.il/books?id=Ytbs4fLHDakC&pg=PA419&lpg=PA419&dq=MemStore+garbage+collector+HBASE&source=bl&ots=b-Sk-HV22E&sig=tFddqrJtlE_nIUI3VDMEyHdgx6o&hl=iw&sa=X&ei=79CyT82BIM_48QO_26ykCQ&ved=0CHUQ6AEwCQ#v= onepage&q=MemStore%20garbage%20collector%20HBASE&f=false](http://books.google.co.il/books?id=Ytbs4fLHDakC&pg=PA419&lpg=PA419&dq=MemStore+garbage+collector+HBASE&source=bl&ots=b-Sk-HV22E&sig=tFddqrJtlE_nIUI3VDMEyHdgx6o&hl=iw&sa=X&ei=79CyT82BIM_48QO_26ykCQ&ved=0CHUQ6AEwCQ#v=onepage&q=MemStore%20garbage%20collector%20HBASE&f=false)

# javascript - 处理 jQuery 事件时，JavaScript 类中的“this”关键字被覆盖

> ID：10596727
> 
> 赞同：3
> 
> 时间：2012-05-15T08:18:26.657
> 
> 标签：javascript, jquery, oop, prototype

我用一个方法在 JavaScript 中定义了一个类：

```
function MyClass(text) {
    this.text = text;
}

MyClass.prototype.showText = function() {
    alert(this.text);
} 
```

然后，我使用 jQuery 定义了一个方法，该方法充当单击事件的处理程序：

```
function MyClass(text) {
    this.text = text;
    $('#myButton').click(this.button_click);
}

MyClass.prototype.showText = function() {
    alert(this.text);
};

MyClass.prototype.button_click = function() {
    this.showText();
}; 
```

当我单击按钮时，它会说：

> 对象 #<HTMLInputElement> 没有方法 'showText'

似乎是`this`在 jQuery click 事件处理程序中引用 HTML 元素本身，而不是引用`MyClass`对象的实例。

我该如何解决这种情况？

可用的 jsFiddle：http: [//jsfiddle.net/wLH8J/](http://jsfiddle.net/wLH8J/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T08:20:55.873

这是预期的行为，请尝试：

```
function MyClass(text) {
    var self = this;

    this.text = text;
    $('#myButton').click(function () {
      self.button_click();
    });
} 
```

或在较新的浏览器中（使用[bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)）：

```
function MyClass(text) {
    this.text = text;
    $('#myButton').click(this.button_click.bind(this));
} 
```

或使用 jquery[代理](http://api.jquery.com/jQuery.proxy/)：

```
function MyClass(text) {
    this.text = text;
    $('#myButton').click($.proxy(this.button_click, this));
} 
```

进一步阅读：

*   [http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:21:11.150

`this`是在调用函数时确定的，而不是在定义函数时确定的。您已将该函数复制到单击处理程序，因此当它被调用时，它与它无关，`MyClass`也不`this`是您想要的。

您需要使用闭包将 的值存储`this`在不同的变量中。

```
function MyClass(text) {
    this.text = text;
    var self = this;
    var click_handler = function () { self.button_click(); };
    $('#myButton').click(click_handler);
} 
```

# php - Codeigniter 验证规则 - 它们可以从模型中设置，还是这是不好的做法？

> ID：10596732
> 
> 赞同：0
> 
> 时间：2012-05-15T08:18:45.657
> 
> 标签：php, model-view-controller, codeigniter, model, validation

使用 CodeIgniter，您可以使用内置的表单验证类，它基本上允许您针对每个字段的一组规则运行 POST 输入。但问题是，验证规则通常总是在控制器中设置。

当然，这意味着如果多个控制器正在访问特定表（通过其模型），您将不得不在另一个控制器中拥有额外的验证规则副本。

因此，在模型中设置验证规则，然后从那里加载它们不是更好吗？

除非我在这里完全遗漏了什么？这样做似乎有点奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:20:48.653

您可以针对这种情况使用配置文件，并在`->run('name')`.

[查看文档](http://codeigniter.com/user_guide/libraries/form_validation.html#savingtoconfig)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:41:04.157

最佳实践是在配置文件中设置规则：/application/config/form_validation.php

# objective-c - 同一个函数可以有多个委托方法吗

> ID：10596741
> 
> 赞同：0
> 
> 时间：2012-05-15T08:19:45.487
> 
> 标签：objective-c

例如，您能否为 MKMapViewDelegate 设置两个委托并让它们都实现 - mapView:sender:viewForAnnotation:annotation？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:24:49.603

`MKMapView`一次只能有一个代表。当然，您可以在需要时切换委托，或者您可以让委托调用您打算用作委托的另一个对象。

但我认为这是一种糟糕的架构。问问自己：为什么你甚至想要不止一名代表？你很可能不会。

# java - 类是否可以继承超类的注解

> ID：10596744
> 
> 赞同：28
> 
> 时间：2012-05-15T08:20:03.070
> 
> 标签：java, spring, class, inheritance, annotations

我正在使用 Spring Framework 事务注释进行事务管理，并且我有一个`abstract class`注释`@Transactional`，如下所示：

```
package org.tts.maqraa.service;

import java.util.Collection;
import java.util.Iterator;
import java.util.List;
import java.util.Set;

import javax.persistence.EntityManager;
import javax.persistence.EntityNotFoundException;
import javax.persistence.PersistenceContext;
import javax.persistence.PersistenceContextType;
import javax.persistence.Query;

import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Parts of this code have been copied from JARVANA site.
 * 
 * @author Younis alomoush
 * 
 */
@Transactional(propagation=Propagation.REQUIRED)
public abstract class AbstractMaqraaService implements MaqraaService {

    private Logger logger = LoggerFactory.getLogger(this.getClass());

    private int defaultMaxResults = DEFAULT_MAX_RESULTS;

    @PersistenceContext(type=PersistenceContextType.TRANSACTION)
    private EntityManager em;
    /**
     * The {@link EntityManager} which is used by all query manipulation and
     * execution in this DAO.
     * 
     * @return the {@link EntityManager}
     */
    public  EntityManager getEntityManager(){

        return em;
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#getTypes()
     */
    public abstract Set<Class<?>> getTypes();

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#store(java.lang.Object)
     */
    @Transactional(propagation = Propagation.REQUIRED)
    public <T extends Object> T store(T toStore) {
        return getEntityManager().merge(toStore);

    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#remove(java.lang.Object)
     */
    @Transactional(propagation = Propagation.REQUIRED)
    public void remove(Object toRemove) {
        toRemove = getEntityManager().merge(toRemove);
        getEntityManager().remove(toRemove);
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#flush()
     */
    @Transactional(propagation = Propagation.REQUIRED)
    public void flush() {
        getEntityManager().flush();
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#refresh(java.lang.Object)
     */
    @Transactional(propagation = Propagation.SUPPORTS)
    public void refresh(Object o) {
        try {
            if (o != null) {
                if (o instanceof java.util.Collection) {
                    for (Iterator<?> i = ((Collection<?>) o).iterator(); i
                            .hasNext();) {
                        try {
                            refresh(i.next());
                        } catch (EntityNotFoundException x) {
                            // This entity has been deleted - remove it from the
                            // collection
                            i.remove();
                        }
                    }
                } else {
                    if (getTypes().contains(o.getClass())) {
                        getEntityManager().refresh(o);
                    }
                }
            }
        } catch (EntityNotFoundException x) {
            // This entity has been deleted
        }
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#setDefaultMaxResults(int)
     */
    @Transactional(propagation = Propagation.SUPPORTS)
    public void setDefaultMaxResults(int defaultMaxResults) {
        this.defaultMaxResults = defaultMaxResults;
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#getDefaultMaxResults()
     */
    public int getDefaultMaxResults() {
        return defaultMaxResults;
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQueryByNameSingleResult(java
     * .lang.String)
     */
    @SuppressWarnings("unchecked")
    public <T extends Object> T executeQueryByNameSingleResult(String queryName) {
        return (T) executeQueryByNameSingleResult(queryName, (Object[]) null);
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQueryByNameSingleResult(java
     * .lang.String, java.lang.Object[])
     */

    @SuppressWarnings("unchecked")
    public <T extends Object> T executeQueryByNameSingleResult(
            String queryName, Object... parameters) {
        Query query = createNamedQuery(queryName, DEFAULT_FIRST_RESULT_INDEX,
                1, parameters);
        return (T) query.getSingleResult();
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQueryByName(java.lang.String)
     */
    public <T extends Object> List<T> executeQueryByName(String queryName) {
        return executeQueryByName(queryName, DEFAULT_FIRST_RESULT_INDEX,
                getDefaultMaxResults());
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQueryByName(java.lang.String,
     * java.lang.Integer, java.lang.Integer)
     */

    public <T extends Object> List<T> executeQueryByName(String queryName,
            Integer firstResult, Integer maxResults) {
        return executeQueryByName(queryName, firstResult, maxResults,
                (Object[]) null);
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQueryByName(java.lang.String,
     * java.lang.Object[])
     */

    public <T extends Object> List<T> executeQueryByName(String queryName,
            Object... parameters) {
        return executeQueryByName(queryName, DEFAULT_FIRST_RESULT_INDEX,
                getDefaultMaxResults(), parameters);
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQueryByName(java.lang.String,
     * java.lang.Integer, java.lang.Integer, java.lang.Object[])
     */
    @SuppressWarnings("unchecked")
    public <T extends Object> List<T> executeQueryByName(String queryName,
            Integer firstResult, Integer maxResults, Object... parameters) {
        Query query = createNamedQuery(queryName, firstResult, maxResults,
                parameters);
        return query.getResultList();
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#createNamedQuery(java.lang.String,
     * java.lang.Integer, java.lang.Integer)
     */

    public Query createNamedQuery(String queryName, Integer firstResult,
            Integer maxResults) {
        return createNamedQuery(queryName, firstResult, maxResults,
                (Object[]) null);
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#createNamedQuery(java.lang.String,
     * java.lang.Integer, java.lang.Integer, java.lang.Object[])
     */

    public Query createNamedQuery(String queryName, Integer firstResult,
            Integer maxResults, Object... parameters) {
        Query query = getEntityManager().createNamedQuery(queryName);
        if (parameters != null) {
            for (int i = 0; i < parameters.length; i++) {
                query.setParameter(i + 1, parameters[i]);
            }
        }

        query.setFirstResult(firstResult == null || firstResult < 0 ? DEFAULT_FIRST_RESULT_INDEX
                : firstResult);
        if (maxResults != null && maxResults > 0)
            query.setMaxResults(maxResults);

        return query;
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#executeQuery(java.lang.String,
     * java.lang.Integer, java.lang.Integer, java.lang.Object[])
     */
    @SuppressWarnings("unchecked")
    public <T extends Object> List<T> executeQuery(String queryString,
            Integer firstResult, Integer maxResults, Object... parameters) {
        Query query = createQuery(queryString, firstResult, maxResults,
                parameters);
        return query.getResultList();
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#executeQuery(java.lang.String,
     * java.lang.Object[])
     */
    @SuppressWarnings("unchecked")
    public <T extends Object> List<T> executeQuery(String queryString,
            Object... parameters) {
        Query query = createQuery(queryString, DEFAULT_FIRST_RESULT_INDEX,
                getDefaultMaxResults(), parameters);
        return query.getResultList();
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQuerySingleResult(java.lang.
     * String)
     */
    @SuppressWarnings("unchecked")
    public <T extends Object> T executeQuerySingleResult(String queryString) {
        return (T) executeQuerySingleResult(queryString, (Object[]) null);
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * org.skyway.spring.util.dao.JpaDao#executeQuerySingleResult(java.lang.
     * String, java.lang.Object[])
     */
    @SuppressWarnings("unchecked")
    public <T extends Object> T executeQuerySingleResult(String queryString,
            Object... parameters) {
        Query query = createQuery(queryString, DEFAULT_FIRST_RESULT_INDEX, 1,
                parameters);
        return (T) query.getSingleResult();
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#createQuery(java.lang.String,
     * java.lang.Integer, java.lang.Integer)
     */

    public Query createQuery(String queryString, Integer firstResult,
            Integer maxResults) {
        return createQuery(queryString, firstResult, maxResults,
                (Object[]) null);
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.skyway.spring.util.dao.JpaDao#createQuery(java.lang.String,
     * java.lang.Integer, java.lang.Integer, java.lang.Object[])
     */
    public Query createQuery(String queryString, Integer firstResult,
            Integer maxResults, Object... parameters) {
        Query query = getEntityManager().createQuery(queryString);
        if (parameters != null) {
            for (int i = 0; i < parameters.length; i++) {
                query.setParameter(i + 1, parameters[i]);
            }
        }

        query.setFirstResult(firstResult == null || firstResult < 0 ? DEFAULT_FIRST_RESULT_INDEX
                : firstResult);
        if (maxResults != null && maxResults > 0)
            query.setMaxResults(maxResults);

        return query;
    }

    public final void log(LogLevel logLevel, String message,
            Object... messageParam) {

        switch (logLevel) {
        case TRACE:
            if (logger.isTraceEnabled()) {

                logger.trace(message, messageParam);
            }

            break;

        case DEBUG:
            if (logger.isDebugEnabled()) {

                logger.debug(message, messageParam);
            }
            break;

        case INFO:
            if (logger.isInfoEnabled()) {

                logger.info(message, messageParam);
            }
            break;

        case WARN:
            if (logger.isWarnEnabled()) {

                logger.warn(message, messageParam);
            }
            break;

        case ERROR:
            if (logger.isErrorEnabled()) {

                logger.error(message, messageParam);
            }
            break;

        default:
            throw new IllegalArgumentException("Log Level is not defined: "
                    + logLevel);

        }

    }

    public final void log(LogLevel logLevel,  String message, Throwable throwable) {

        switch (logLevel) {
        case TRACE:
            if (logger.isTraceEnabled()) {

                logger.trace(message, throwable);
            }

            break;

        case DEBUG:
            if (logger.isDebugEnabled()) {

                logger.debug(message, throwable);
            }
            break;

        case INFO:
            if (logger.isInfoEnabled()) {

                logger.info(message, throwable);
            }
            break;

        case WARN:
            if (logger.isWarnEnabled()) {

                logger.warn(message, throwable);
            }
            break;

        case ERROR:
            if (logger.isErrorEnabled()) {

                logger.error(message, throwable);
            }
            break;

        default:
            throw new IllegalArgumentException("Log Level is not defined: "
                    + logLevel);

        }

    }

    public enum LogLevel{

        TRACE, DEBUG, INFO, WARN, ERROR;

    }
} 
```

另外，我还有另一个具体的课程

```
package org.tts.maqraa.service;

import java.lang.annotation.Annotation;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import org.tts.maqraa.data.Student;

public class StudentsService extends AbstractMaqraaService {

    @Override
    public Set<Class<?>> getTypes() {
        Set<Class<?>> set = new HashSet<Class<?>>();
        set.add(Student.class);
        return set;
    }

    public Student registerStudent(Student student) {
        Annotation [] annotation = StudentsService.class.getAnnotations();
        System.out.println(annotation);
        return this.store(student);
    }

    public Student editStudent(Student student){
        return this.store(student);
    }

    public void deregisterStudent(Student student){
        this.remove(student);
    }

    public List<Student> findAllStudents(){
        return this.executeQueryByName("Student.findAll");
    }

} 
```

如果您注意到方法 register student 已经提供了用于检查我真正找到注释的`@Transactional`注释的代码。

这是一个矛盾，我有另一个链接谈论注释的继承，它说根本没有继承。

查看此链接： http: [//fusionsoft-online.com/articles-java-annotations.php](http://fusionsoft-online.com/articles-java-annotations.php)

谁能帮我解决这个矛盾？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-15T08:28:15.187

是的，如果注释已[`@Inherited`](https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Inherited.html)添加到它是可能的。例如，[`@Transactional`](http://docs.oracle.com/javaee/7/api/javax/transaction/Transactional.html)注释有`@Inherited`.

从文档：

> 指示注释类型是自动继承的。如果注解类型声明中存在 Inherited 元注解，并且用户在类声明上查询注解类型，并且类声明没有该类型的注解，则将自动查询该类的超类以获取注解类型。将重复此过程，直到找到此类型的注释，或到达类层次结构（对象）的顶部。如果没有超类具有此类型的注释，则查询将指示所讨论的类没有此类注释。
> 
> 请注意，如果注释类型用于注释类以外的任何内容，则此元注释类型无效。另请注意，此元注释仅导致注释从超类继承；已实现接口上的注释无效。

的文档`@Transactional`：

> ```
> @Target(value={METHOD,TYPE})
> @Retention(value=RUNTIME)
> @Inherited
> @Documented
> public @interface Transactional 
> ```

题外话：尽管在 Java 中，您不能子类型注释。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-15T08:27:04.603

注解继承的工作方式与方法或字段的继承基本相同。

由于只能通过反射访问注解，因此在 中有两种基本方法`Class`：

*   `getAnnotations()`返回当前类及其超类的所有注解
*   `getDeclaredAnnotations()`返回当前类的所有注解

您链接的文章谈到的问题是该方法已在其中定义的类的`Method#getAnnotation(...)`访问`declaredAnnotations()`，如上所述，它只返回该类中定义的注释，而不返回超类的注释。

这意味着如果您覆盖带有注释的方法之一，则`@Transactional`必须在其中添加注释（或者如果框架也在类注释中查找，它应该找到`@Transactional`声明的 on `AbstractMaqraaService`）。

# javascript - 从已知视频 ID 获取 YouTube 视频标题

> ID：10596745
> 
> 赞同：6
> 
> 时间：2012-05-15T08:20:13.333
> 
> 标签：javascript, youtube, youtube-javascript-api

当视频 ID 已知时，我想仅使用 JavaScript 来获取 YouTube 视频标题。可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:19:52.480

是的，可以使用 Javascript 和 JSON。

[https://developers.google.com/youtube/2.0/developers_guide_protocol_video_entries](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_entries)

请参阅：[https ://developers.google.com/youtube/2.0/developers_guide_json](https://developers.google.com/youtube/2.0/developers_guide_json)

所以你这样做：

```
<script 
type="text/javascript" 
src="https://gdata.youtube.com/feeds/api/videos/videoid?v=2&alt=json-in-script&format=5&callback=getTitle">
</script> 
```

接着：

```
function getTitle(data) {
 var feed = data.feed;
 var entries = feed.entry || [];
  for (var i = 0; i < entries.length; i++) {
   var entry = entries[i];
   var title = entry.title.$t;
  }
 } 
```

# php - JSON 或 XML 在 iOS 上的性能更高吗？

> ID：10596746
> 
> 赞同：4
> 
> 时间：2012-05-15T08:20:25.460
> 
> 标签：php, ios, xml, json

我正在为需要从服务器上的数据库中获取数据的 iOS（以及后来的 Android）设备开发游戏。到目前为止，我所做的是使用 PHP 将数据库中的数据作为 XML 回显。该程序将经常与服务器进行检查，因此性能在这里很重要。那么，对于这项任务，JSON 还是 XML 会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:38:06.973

生成 XML 输出。检查所用时间和文件大小。

生成 JSON 输出。检查所用时间和文件大小。

决定哪个是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:27:04.557

更好的取决于你的情况。对于您的情况，它可能是 JSON。在 Javascript 中解析很轻巧（如果您将其与 JS 一起使用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:27:09.493

JSON 很好。

“该程序将经常与服务器检查”。我相信这不是必需的。

使用 NSURLConnection 发送异步请求，并使用 NSNotificationCenter 进行 iOS 的通知服务。因此，当您从服务器获得响应时，您可以设置要调用的函数以使用您需要的数据。[在此处查看 NSNotificationCenter 的使用情况](http://cocoawithlove.com/2008/06/five-approaches-to-listening-observing.html)

# java - 在批处理模式下通过可调用语句调用 SP 时检索 OUT 参数

> ID：10596748
> 
> 赞同：1
> 
> 时间：2012-05-15T08:20:31.510
> 
> 标签：java, jdbc, callable-statement

在批处理模式下（executeBatch()）通过 Callable 语句调用 SP 时如何检索 OUT 参数中的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:44:19.880

当我们在 Java 中以批处理模式运行 SP 时，无法检索 OUT 参数。如果我们为在批处理模式下执行的 SP 配置了参数，我们将得到异常。

# php - 自动化 CSS 测试

> ID：10596756
> 
> 赞同：1
> 
> 时间：2012-05-15T08:21:01.127
> 
> 标签：php, html, css, sharepoint, sharepoint-2010

我们正在使用 sharepoint 2010 创建一个网站，客户端有一个用 PHP 开发的现有网站，我正在尝试测试前端，因为客户端希望在其现有 PHP 网站拥有的页面上保持相同的样式。例如，共享点站点（我们正在构建的）上的主页链接的样式和 PHP 站点应该是相同的。

我正在尝试自动化检查 php 站点页面的 CSS 到 Sharepoint 站点页面的过程（因为手动检查网站的每个页面是非常乏味的工作）。有没有办法我可以做到这一点？我已经浏览了谷歌，我发现了 fizzler 和 sharp-query 作为这样做的线索（如果我是对的），但不能更进一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:03:10.543

即使确实存在工具，我也不认为自动化是完成这项工作的最佳方式。

Sharepoint 和您的 PHP 站点上的 HTML 会有所不同，因此执行 HTML 源代码比较无论如何都不会给出准确的结果。我不明白为什么你需要检查每一页，因为 Sharepoint 中的大多数页面都差不多。

我希望这能提供一些见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:14:41.090

尝试使用 Araxis Merge - [http://www.araxis.com/merge/](http://www.araxis.com/merge/)

'Merge 是 Araxis 的可视文件比较 (diff)、合并和文件夹同步应用程序。使用它来比较和合并具有本机应用程序性能的源代码、网页、XML 和其他文本文件。

# authentication - JMX 身份验证

> ID：10596759
> 
> 赞同：5
> 
> 时间：2012-05-15T08:21:18.127
> 
> 标签：authentication, jmx

```
$ cd $JAVA_HOME/jre/lib/management
$ cp jmxremote.password.template jmxremote.password
$ chmod u=rw jmxremote.password
$ vi jmxremote.password 
```

为“monitorRole”和“controlRole”设置密码：

```
monitorRole 12monitor
controlRole 55control 
```

之后，当我在我的机器上运行 JMX 服务器时，出现以下错误。

```
# java -Dcom.sun.management.jmxremote.port=9999 -Dcom.sun.m
agement.jmxremote.authenticate=true  -Dcom.sun.management.jmxremote.ssl=false -D
java.rmi.server.host=47.168.96.31  com.example.Main
Error: Password file read access must be restricted: /root/Downloads/jdk1.6.0_29
/jre/lib/management/jmxremote.password 
```

当我使用以下命令的 oen 更改文件权限时，jmx 服务器工作。

```
# chmod 400  jmxremote.password 
```

或者

```
# chmod 600  jmxremote.password 
```

但我无法通过 jmxremote.password 文件中定义的用户名/密码连接它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T17:24:07.537

要为 JMX 授权添加新的用户名/密码，必须通过将用户名添加到 jmxremote.access 文件中来定义身份验证。添加用户名“admin”时应该是这样的

```
>monitorRole   readonly
>admin         readonly
>controlRole   readwrite \
          create javax.management.monitor.*,javax.management.timer.* \
          unregister 
```

# java - var 不会成为全局变量，但仍然是本地变量

> ID：10596766
> 
> 赞同：0
> 
> 时间：2012-05-15T08:21:31.460
> 
> 标签：java, c, java-native-interface, global-variables

从下面的代码片段中，我尝试在块的本地范围内声明它后进行测试`NewGlobalRef`并尝试使其成为全局。`clsStr``if`

```
jstring Java_Package_LocalAndGlobalReference_returnGlobalReference
 (JNIEnv *env, jobject obj) {
if(1) {
    printf("In function make global reference\n");
    jclass clsStr ;
    jclass cls = (*env)->FindClass(env,"java/lang/String");
    if( cls == NULL)
        return NULL;
    // create a global reference of clsStr
    clsStr = (*env)->NewGlobalRef(env,cls);
    // Delete the local reference, which is no longer userful
    (*env)->DeleteLocalRef(env,cls);
    if(clsStr == NULL)
        return NULL;
}
 return clsStr; // statement 31
} 
```

当我运行上面的代码片段时，我收到以下错误：

```
W:\elita\jnitesters\workspace\c\LGR\LGR.c:31: error: 'clsStr' undeclared (first use in this function)
W:\elita\jnitesters\workspace\c\LGR\LGR.c:31: error: (Each undeclared identifier is reported only once
W:\elita\jnitesters\workspace\c\LGR\LGR.c:31: error: for each function it appears in.) 
```

`clsStr`当我使用 satement 将 var 设为全局时，为什么我会收到未定义的错误消息`clsStr = (*env)->NewGlobalRef(env,cls)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:30:35.477

当您在块中声明变量时（在这种情况下，您`clsStr`在块中声明 if`if(1) { ... }`语句），该变量的范围（及其生命周期）就是该块。`return clsStr` *这意味着当您在*阻止时它不存在。

你可以

*   在块内移动 return 语句，或
*   `clsStr`在语句之前`if(1) { ... }`声明变量

> 当我使用该语句将该 var 设为全局时`clsStr = (*env)->NewGlobalRef(env,cls)`

这是一个误解——你不能通过赋值使变量成为全局变量；您可以通过在全局范围内声明来做到这一点。您可以通过赋值来初始化变量，但这与它的作用域没有任何关系。

# java - how to customize an analog clock

> ID：10596774
> 
> 赞同：-9
> 
> 时间：2012-05-15T08:21:59.967
> 
> 标签：java, android, android-widget

i want to show four custom clock on screen i try with this code

```
/**
 * 
 * This widget display an analogic clock with two hands for hours and
 * 
 * minutes.
 */

@RemoteView
public class AnalogClock2 extends View {

    public AnalogClock2(Context context) {

        super(context);

        // TODO Auto-generated constructor stub

    }

    private Time mCalendar;

    private Drawable mHourHand;

    private Drawable mMinuteHand;

    private Drawable mSecondHand;

    private Drawable mDial;

    private int mDialWidth;

    private int mDialHeight;

    private boolean mAttached;

    private final Handler mHandler = new Handler();

    private float mMinutes;

    private float mHour;

    private boolean mChanged;

    Context mContext;
    public static  String  mtimezone="Asia/Calcutta";
    public AnalogClock2(Context context, AttributeSet attrs) {

        this(context, attrs, 0);

    }

    public AnalogClock2(Context context, AttributeSet attrs,

    int defStyle) {

        super(context, attrs, defStyle);

        Resources r = context.getResources();

    //  TypedArray a =

    //  context.obtainStyledAttributes(

    //  attrs, R.styleable.AnalogClock, defStyle, 0);

        mContext = context;

        // mDial =
        // a.getDrawable(com.android.internal.R.styleable.AnalogClock_dial);

        // if (mDial == null) {

        mDial = r.getDrawable(R.drawable.widgetdial);

        // }

        // mHourHand =
        // a.getDrawable(com.android.internal.R.styleable.AnalogClock_hand_hour);

        // if (mHourHand == null) {

        mHourHand = r.getDrawable(R.drawable.widgethour);

        // }

        // mMinuteHand =
        // a.getDrawable(com.android.internal.R.styleable.AnalogClock_hand_minute);

        // if (mMinuteHand == null) {

        mMinuteHand = r.getDrawable(R.drawable.widgetminute);

        mSecondHand = r.getDrawable(R.drawable.widgetminute);

        // }

        mCalendar = new Time();

        mDialWidth = mDial.getIntrinsicWidth();

        mDialHeight = mDial.getIntrinsicHeight();

    }
    public static void timezone(String timezone){
          mtimezone=timezone;
    }

    @Override
    protected void onAttachedToWindow() {

        super.onAttachedToWindow();

        if (!mAttached) {

            mAttached = true;

            IntentFilter filter = new IntentFilter();

            filter.addAction(Intent.ACTION_TIME_TICK);

            filter.addAction(Intent.ACTION_TIME_CHANGED);

            filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);

            getContext().registerReceiver(mIntentReceiver, filter, null, mHandler);

        }

        // NOTE: It's safe to do these after registering the receiver since the
        // receiver always runs

        // in the main thread, therefore the receiver can't run before this
        // method returns.

        // The time zone may have changed while the receiver wasn't registered,
        // so update the Time

        //mCalendar = new Time();
        mCalendar = new Time(mtimezone);
        // Make sure we update to the current time

        onTimeChanged();

        counter.start();

    }

    @Override
    protected void onDetachedFromWindow() {

        super.onDetachedFromWindow();

        if (mAttached) {

            counter.cancel();

            getContext().unregisterReceiver(mIntentReceiver);

            mAttached = false;

        }

    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        int widthMode = MeasureSpec.getMode(widthMeasureSpec);

        int widthSize = MeasureSpec.getSize(widthMeasureSpec);

        int heightMode = MeasureSpec.getMode(heightMeasureSpec);

        int heightSize = MeasureSpec.getSize(heightMeasureSpec);

        float hScale = 1.0f;

        float vScale = 1.0f;

        if (widthMode != MeasureSpec.UNSPECIFIED && widthSize < mDialWidth) {

            hScale = (float) widthSize / (float) mDialWidth;

        }

        if (heightMode != MeasureSpec.UNSPECIFIED && heightSize < mDialHeight) {

            vScale = (float) heightSize / (float) mDialHeight;

        }

        System.out.println("***********************HAI****************");

        float scale = Math.min(hScale, vScale);

        setMeasuredDimension(resolveSize((int) (mDialWidth * scale), widthMeasureSpec),

        resolveSize((int) (mDialHeight * scale), heightMeasureSpec));

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {

        super.onSizeChanged(w, h, oldw, oldh);

        mChanged = true;

    }

    @Override
    protected void onDraw(Canvas canvas) {

        super.onDraw(canvas);

        // // here changes on every tick//////

        // / ////

        // / //

        // //////

        // // ///

        // //

        boolean changed = mChanged;

        if (changed) {

            mChanged = false;

        }

        boolean seconds = mSeconds;

        if (seconds) {

            mSeconds = false;

        }

        int availableWidth = 100;

        int availableHeight = 200;

        int x = availableWidth / 2;

        int y = availableHeight / 2;

        final Drawable dial = mDial;

        int w = dial.getIntrinsicWidth();

        int h = dial.getIntrinsicHeight();

        boolean scaled = false;

        if (availableWidth < w || availableHeight < h) {

            scaled = true;

            float scale = Math.min((float) availableWidth / (float) w,

            (float) availableHeight / (float) h);

            canvas.save();

            canvas.scale(scale, scale, x, y);

        }

        if (changed) {

            dial.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y + (h / 2));

        }

        dial.draw(canvas);

        canvas.save();

        canvas.rotate(mHour / 12.0f * 360.0f, x, y);

        final Drawable hourHand = mHourHand;

        if (changed) {

            w = hourHand.getIntrinsicWidth();

            h = hourHand.getIntrinsicHeight();

            hourHand.setBounds(x - (w / 2), y - (h / 3), x + (w / 2), y + (h / 3));

        }

        hourHand.draw(canvas);

        canvas.restore();

        canvas.save();

        canvas.rotate(mMinutes / 60.0f * 360.0f, x, y);

        // canvas.rotate(mSecond, x, y);

        final Drawable minuteHand = mMinuteHand;

        if (changed) {

            w = minuteHand.getIntrinsicWidth();

            h = minuteHand.getIntrinsicHeight();

            minuteHand.setBounds(x - (w / 2), y - (h / 3), x + (w / 2), y + (h / 3));

        }

        minuteHand.draw(canvas);

        canvas.restore();

        canvas.save();

        canvas.rotate(mSecond, x, y);

        // minuteHand = mMinuteHand;

        if (seconds) {

            w = mSecondHand.getIntrinsicWidth();

            h = mSecondHand.getIntrinsicHeight();

            mSecondHand.setBounds(x - (w / 2), y - (h / 3), x + (w / 2), y + (h / 3));

        }

        mSecondHand.draw(canvas);

        canvas.restore();

        if (scaled) {

            canvas.restore();

        }

    }

    MyCount counter = new MyCount(10000, 1000);

    public class MyCount extends CountDownTimer {

        public MyCount(long millisInFuture, long countDownInterval) {

            super(millisInFuture, countDownInterval);

        }

        @Override
        public void onFinish() {

            counter.start();

        }

        @Override
        public void onTick(long millisUntilFinished) {

            mCalendar.setToNow();

            int hour = mCalendar.hour;

            int minute = mCalendar.minute;

            int second = mCalendar.second;

            mSecond = 6.0f * second;

            mSeconds = true;

            // mChanged = true;

            AnalogClock2.this.invalidate();

            // Toast.makeText(mContext, "text", Toast.LENGTH_LONG).show();

        }

    }

    boolean mSeconds = false;

    float mSecond = 0;

    private void onTimeChanged() {

        mCalendar.setToNow();

        int hour = mCalendar.hour+4;

        int minute = mCalendar.minute+15;

        int second = mCalendar.second;

        mMinutes = minute + second / 60.0f;

        mHour = hour + mMinutes / 60.0f;

        mChanged = true;

    }

    private final BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {

            if (intent.getAction().equals(Intent.ACTION_TIMEZONE_CHANGED)) {

                String tz = intent.getStringExtra("time-zone");

                mCalendar = new Time(TimeZone.getTimeZone(tz).getID());

            }
            mCalendar = new Time(mtimezone);
            onTimeChanged();

            invalidate();

        }

    };

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:50:33.690

@shivang please refere this code and put four clock.As below code. Hop its helpful to you.

```
private ImageView img;
 Handler mHandler;

 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  Thread myThread = null;

  Runnable runnable = new CountDownRunner();
  myThread = new Thread(runnable);
  myThread.start();

 }

 public void doRotate() {

  runOnUiThread(new Runnable() {
   public void run() {
    try {

     Date dt = new Date();
     int hours = dt.getHours();
     int minutes = dt.getMinutes();
     int seconds = dt.getSeconds();
     String curTime = hours + ":" + minutes + "::" + seconds;
     Log.v("log_tag", "Log is here Time is now" + curTime);
     img = (ImageView) findViewById(R.id.imgsecond);
     RotateAnimation rotateAnimation = new RotateAnimation(
       (seconds - 1) * 6, seconds * 6,
       Animation.RELATIVE_TO_SELF, 0.5f,
       Animation.RELATIVE_TO_SELF, 0.5f);

     rotateAnimation.setInterpolator(new LinearInterpolator());
     rotateAnimation.setDuration(1000);
     rotateAnimation.setFillAfter(true);

     img.startAnimation(rotateAnimation);
    } catch (Exception e) {

    }
   }
  });
 }

 class CountDownRunner implements Runnable {
  // @Override
  public void run() {
   while (!Thread.currentThread().isInterrupted()) {
    try {

     doRotate();
     Thread.sleep(1000);
    } catch (InterruptedException e) {
     Thread.currentThread().interrupt();
    } catch (Exception e) {
     Log.e("log_tag", "Error is " + e.toString());
    }
   }
  }
 } 
```

# zend-framework - 在 JSON 字符串中转换“Zend_Gdata_YouTube_VideoFeed 对象”

> ID：10596787
> 
> 赞同：2
> 
> 时间：2012-05-15T08:22:51.477
> 
> 标签：zend-framework, json, zend-gdata

我正在尝试从 youtube 检索数据。它正在重新调整`Zend_Gdata_YouTube_VideoFeed Object`. 如何将其转换为 JSON 字符串格式...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:56:01.483

```
Zend_Gdata_YouTube_VideoFeed Object 
```

它是一个类的对象。您必须先将其转换为字符串。然后你可以把它转换成 JSON ..

# smartfoxserver - 客户端状态：无法连接到服务器

> ID：10596788
> 
> 赞同：0
> 
> 时间：2012-05-15T08:22:55.947
> 
> 标签：smartfoxserver

我已经在 LAN 上设置了 SFS 2X 服务器，服务器端操作系统是 Mac OS X。我正在尝试托管这个（[http://docs2x.smartfoxserver.com/ExamplesUnity/object-movement）Unity](http://docs2x.smartfoxserver.com/ExamplesUnity/object-movement) 3d 游戏（提供例如）在可通过 LAN 上的 Web 浏览器访问的服务器上。但我收到一个错误。![在此处输入图像描述](../Images/3f1ebea43258757fd465805c1fdcec7b.png)附上屏幕截图。

-- 我确保在“ConnectionGUI.cs”脚本（示例附带）中输入了正确的服务器端 IP 地址和端口。

PS，除了我的服务器，我还可以在 LAN 上的其他计算机上运行管理实用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:50:34.117

SmartFox 服务器是否在同一台计算机上运行？还是另一种？

如果它在不同的服务器上运行，请确保它正在侦听其外部 IP 地址（不是 127.0.0.1）并检查防火墙是否允许通过 9933 的流量。

# jsf-2 - 从数据库中检索数据并将其处理到 h:dataTable

> ID：10596790
> 
> 赞同：0
> 
> 时间：2012-05-15T08:23:02.767
> 
> 标签：jsf-2, primefaces, objectify

我目前正在努力从数据存储中检索数据并显示它。

我的具体问题是我有一个数据表，其中包含从数据存储中检索并显示在此数据表上的所有人。在每一行中都有 Id、name、surname 和 selectOneMenu 等列，其中包含选项：查看所有汽车并添加一辆新车。因此，每当用户选择其中一个选项时，他将被重定向到该站点，例如，属于该用户的所有汽车都位于选择该选项的行中。所以我怎么看是我必须用户 ID 也必须是所选选择一个菜单的 rowId 并且使用该 ID 我可以进行查询并在下表中显示人员汽车表。我不知道我的思维方式是否正确，希望有人能帮助我。

```
<p:dataTable var="account" value="#{bean.what}" size="50" position="center" rowKey="#>{account.accNumber}"editable="true" >
    <p:column>
        <f:facet name="header">
            <h:outputText value="ID" />
        </f:facet>
        <h:outputText value="#{person.id}"  />
    </p:column>
    <p:column>
        <f:facet name="header">
            <h:outputText value="Name" />
        </f:facet>
        <h:outputText name="id" id="id" value="#{person.name}"  />
    </p:column>
    <p:column>
        <f:facet name="output">
            <h:outputText value="Options" />
        </f:facet>
        <h:selectOneMenu id="option" value="#{bean.option}">
            <p:ajax event="valueChange" listener="#{bean.handleOptionChange}" process="@this"  />
                <f:selectItems value="#{bean.options}"  
                               var="option"   
                               itemLabel="#{option}"  
                               itemValue="#{option}"  />  
        </h:selectOneMenu>  
    </p:column>
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:38:16.400

在这里我发布答案是正确还是错误，我不知道。试试看

在您的数据表中，您使用 var="account" 并将您放置在列输出值中，您将获得“ `#{person.id}`”。

可能这是错误的。

你在列输出中试试这个

```
 <h:outputText name="id" id="id" value="#{account.id}" /> 
```

以上一个，您可以放置​​在命令符号中。

所有人都在 dataTable 列中使用它来获取输出。

# android - android IceCream Sandwich 上的 Astuetz 浏览器

> ID：10596792
> 
> 赞同：1
> 
> 时间：2012-05-15T08:23:05.610
> 
> 标签：android, android-viewpager

我在冰淇淋三明治上遇到了 Astuetz Viewpager 的一个小问题。问题是，在滚动页面时，页面指示器和日期并没有消失/改变颜色。同样的寻呼机，在预蜂窝设备上，就像一个魅力。有人面临同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:28:19.417

我找到了解决方案。

我一直在分析 Astuetz viewpager 库，发现滚动页面时不会调用包含日期和彩色底部边框的 textview 的 onDraw 方法。我们需要在扩展 textview 的父 onLayout 方法上调用 invalidate 方法。

像这样更改 ViewPagerTabs 类（在 for 循环中添加 tab.invalidate()）

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    final int count = getChildCount();

    final int center = this.getMeasuredWidth() / 2;

    // At this position, the centered tab will be highlighted via
    // ViewPagerTab.setCenterPercent(int percent)
    final int highlightOffset = this.getMeasuredWidth() / 5;

    // lay out each tab
    for (int i = 0; i < count; i++) {

        final ViewPagerTab tab = (ViewPagerTab) getChildAt(i);
        tab.invalidate();
        final int tabCenter = tab.layoutPos + tab.getMeasuredWidth() / 2;
        int diff = Math.abs(center - tabCenter);

        if (diff <= highlightOffset) {
            final int x1 = highlightOffset;
            final int y = (int) 100 * diff / x1;
            tab.setCenterPercent(100 - y);
        } else {
            tab.setCenterPercent(0);
        }

        tab.layout(tab.layoutPos, this.getPaddingTop(), tab.layoutPos + tab.getMeasuredWidth(), this.getPaddingTop()
            + tab.getMeasuredHeight());

    }

} 
```

# actionscript-3 - 右键单击标签和弹出菜单，如何从菜单项选择侦听器中获取按钮？

> ID：10596793
> 
> 赞同：0
> 
> 时间：2012-05-15T08:23:06.047
> 
> 标签：actionscript-3, apache-flex, flex3, contextmenu, listener

我在一个**Group上创建了数十个****标签**，我为每个标签添加了一个右键单击菜单，然后将一个事件**侦听**器附加到菜单上，然后我如何获得通过菜单项选择侦听器右键单击的确切标签（**ContextMenuEvent.MENU_ITEM_SELECT**）？非常感谢

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:36:42.743

当我单击任何菜单项时，它的 mouseTarget 属性将包含与它的父项相邻的信息。

```
// Handler when customized menu items are selected.       
private function menuItemHandler(event:ContextMenuEvent):void {
        var obj:InteractiveObject = event.mouseTarget;
        if(obj is Label)
             Alert.show(Label(obj).id);
} 
```

检查这是否对您有帮助。

小应用程序。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="init()">

    <s:layout>
        <s:BasicLayout/>
    </s:layout>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;

            [Bindable]
            private var cm:ContextMenu;
            private var cmi:ContextMenuItem;

            private var item1:ContextMenuItem;
            private var item2:ContextMenuItem;
            private var item3:ContextMenuItem;
            private var item4:ContextMenuItem;
            private var item5:ContextMenuItem;

            private function init():void
            {
                cmi = new ContextMenuItem("Some Context Item");
                cmi.enabled = false;

                item1 = new ContextMenuItem("Customized item", true);
                item2 = new ContextMenuItem("Enable/Disable customized menu entry", true);
                item3 = new ContextMenuItem("Visible/Invisible customized menu entry");
                item4 = new ContextMenuItem("Copy\u00A0");
                item5 = new ContextMenuItem("More Flex tutorials", true);

                // Manage clicks on your customized items
                item1.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, menuItemHandler);
                item2.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, menuItemHandler);
                item3.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, menuItemHandler);
                item4.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, menuItemHandler);
                item5.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, menuItemHandler);

                cm = new ContextMenu();
                cm.hideBuiltInItems();
                cm.customItems = [cmi, item1, item2, item3, item4, item5];
                cm.addEventListener(ContextMenuEvent.MENU_SELECT, onMnuSelect);
            }

            private function onMnuSelect(event:ContextMenuEvent):void
            {
                /* var obj:InteractiveObject = event.mouseTarget;
                if(obj is Label)
                    Alert.show(Label(obj).id); */
            }

            // Handler when customized menu items are selected.       
            private function menuItemHandler(event:ContextMenuEvent):void {
                var obj:InteractiveObject = event.mouseTarget;
                if(obj is Label)
                    Alert.show(Label(obj).id);
            }
        ]]>
    </fx:Script>

    <s:VGroup>
        <s:Label id="label1" text="label1" contextMenu="{cm}"/>
        <s:Label id="label2" text="label2" contextMenu="{cm}"/>
        <s:Label id="label3" text="label3" contextMenu="{cm}"/>
        <s:Label id="label4" text="label4" contextMenu="{cm}"/>
    </s:VGroup>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:12:29.080

一种解决方案是创建一个自定义组件，其中包含标签和菜单皮肤部件。通过这种方式，您还可以根据需要为组件设置任何外观，并以非常简单的方式访问标签和菜单。

为了解决您的问题，我们假设皮肤部件被命名为“标签”和“菜单”。调度 ContextMenuEvent 时，您可以通过访问菜单单击处理程序中的 event.target 属性来访问单击的菜单。现在，它的父级将通过其**parent**属性可用，这就是您可以访问标签组件或皮肤部件的方式。所以，它会是这样的：

**event.target.parent.label**

在哪里：

**event.target** - 菜单组件

**event.target.parent** - 包裹标签和菜单的组件

**event.target.parent.label** - 你要访问的组件

总而言之，创建一个自定义组件，它包含一个标签和一个菜单，成为它的皮肤部分。这样，通过识别两个部分中的任何一个（例如在事件处理程序中），您可以通过**parent**属性轻松确定另一个对应的组件。

您可能需要将**event.target**值转换为菜单类，并将**event.target.parent**属性转换为您的自定义组件类，然后标签将可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:40:05.707

如果您使用 Label 作为组件，则可以通过以下方式访问它：

```
event.contextMenuOwner.text 
```

或者

如果您使用的是按钮，则可以通过以下方式访问它：

```
event.contextMenuOwner.label 
```

希望这可能会有所帮助。******

# iphone - 从 applicationDidBecomeActive 刷新 NSconnection:method

> ID：10596797
> 
> 赞同：0
> 
> 时间：2012-05-15T08:23:22.763
> 
> 标签：iphone, objective-c, ios, xcode

我的 iPhone 应用程序是基于位置的应用程序。它通过方法找到当前位置并显示它自己的详细信息`NSURLConnection`。现在我想在应用程序从后台激活时刷新此详细信息。我使用了效果很好的刷新按钮。所以从`-applicationDidBecomeActive:method`. 它成功刷新当前位置详细信息。但它并没有刷新其他地方的细节。如果我将当前位置更改为其他位置，则`-applicationDidBecomeActive:`呼叫仅刷新当前位置，视图屏幕没有变化。我该如何解决这个问题，我想刷新所有地方？

委托方式：

```
-(void)applicationDidBecomeActive:(UIApplication *)application
{
    [self.viewController refresh];//calls refresh method 
} 
```

视图控制器方法：

```
-(void)refresh
{
    NSLog(@"%@",self.placedetail.name);
    [self displays:self.placedetail];
} 
```

Placedetails 实例具有地点的经纬度，使用可以获取特定地点的详细信息。第一次是当前位置。

```
-(void)displays:(model *)place
{
    self.placedetail=place;
    NSString *strs=[@"http requst"];
    NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:strs]];
    NSLog(@"%@",request);
    self.reqTimeZone=[NSURLConnection connectionWithRequest:request delegate:self];
    [self.reqTimeZone start]; 
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:17:41.240

你应该在这个委托中编写代码..

```
- (void)applicationWillEnterForeground:(UIApplication *)application{ 
```

[self.viewController 刷新];

}

# ruby-on-rails-3 - Rails 中的数据库加密

> ID：10596801
> 
> 赞同：3
> 
> 时间：2012-05-15T08:23:36.863
> 
> 标签：ruby-on-rails-3, security, encryption, aes

我将 ActiveRecord`serialize`方法与我自己的一个类一起使用，`AESCoder`. 这将每次使用带有随机初始化向量的 aes-256-cbc。当我将它存储在数据库中时，这个初始化向量被预先添加到字段中，并且当然是在反序列化之前提取的。

现在，这个方案阻止我对这些属性使用任何查找器。我必须选择我需要的所有行，这些行将被自动解密，并在`select`项目列表上执行 ruby​​。当然，这是一个巨大的性能瓶颈，我无法负担这个应用程序。

一种解决方案是不使用随机 IV，但 aes-256-cbc 将不再安全。

我在这里忽略了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:45:55.547

正如其他人所指出的，将无法绕过解密要搜索的行的需要。您仍然可以通过让 Postgres 在其[pgcrypto 扩展](http://www.postgresql.org/docs/9.1/static/pgcrypto.html)的帮助下完成繁重的工作来提高性能，而不是选择所有内容并在应用程序层对其进行分类。

Heroku[最近开始提供 Postgres 9.1](https://postgres.heroku.com/blog/past/2012/3/1/postgresql_91_now_default/)并且似乎支持 pgcrypto。根据博客文章，您可能必须迁移数据库才能切换到 Postgres 9.1。

请注意，Herokus 付费的“共享数据库”计划似乎仍然[在 Postgres 8 上运行](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)并且还不支持 pgcrypto，但应该很快就会升级。Postgres 9 引入了一种启用和使用扩展的新方法，可以更轻松地在共享托管环境中提供它们。

# javascript - 画布中的页面 ID

> ID：10596803
> 
> 赞同：1
> 
> 时间：2012-05-15T08:23:46.360
> 
> 标签：javascript, facebook, api, tabs

我有一个 facebook 应用程序，可以由 facebook 用户在他们的页面中添加为选项卡。

从用户页面中加载应用程序时，是否可以使用 javascript Facebook api 查询 Facebook 以获取当前页面 ID？

# java - 使用 zxing/barcode4j 格式化 EAN8

> ID：10596806
> 
> 赞同：0
> 
> 时间：2012-05-15T08:24:03.420
> 
> 标签：java, format, barcode, zxing, barcode4j

我正在尝试在 java 中生成 EAN8 条形码。如果尝试了barcode4j（与barcodelib相反，它是免费的），这给了我非常好的结果。

我还没有想到的一件事是更改 barocde4j 中条形码的宽度和高度。我已经通过分辨率参数解决了它，这不是很好的解决方案。

我想做的是在 zxing 中生成一切（因为我还需要 QR 码），但结果看起来很丑陋。这就是我生成条形码的方式：

```
BitMatrix matrix;
com.google.zxing.Writer writer = new EAN8Writer();
com.google.zxing.BarcodeFormat BarcodeFormat;
matrix = writer.encode(code,BarcodeFormat, width, height);
MatrixToImageWriter.writeToStream(matrix, "JPG", output); 
```

图片看起来像zxing

![志兴](../Images/33dd349a328a7511c7381d9fc6f68afe.png)

但我希望它看起来像barcode4j那样：

![条形码4j](../Images/972845f46b1ce53881c4cfec7c13021d.png)

问候 && tia noircc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:16:00.853

在 Barcode4J 上：只能间接控制条码的大小。如果你用 bean 方法生成条码，你有 setHeight(double) 和 setModuleWidth(double) 来影响大小：

[EAN8Bean javadoc](http://barcode4j.sourceforge.net/trunk/javadocs/org/krysalis/barcode4j/impl/upcean/EAN8Bean.html)

使用 XML 配置，您可以在[此处](http://barcode4j.sourceforge.net/2.1/symbol-ean-8.html)找到可能的值。

顺便说一句，我强烈建议不要为条形码生成 JPEG，因为它是一种有损格式，会影响对比度，并且条形码会因对比度而异。改用PNG！此外，您可能需要阅读[故障排除页面](http://barcode4j.sourceforge.net/troubleshooting.html)，因为您正在生成位图。它可以帮助避免以后出现扫描问题。

# php - 将网页关键字与数据库中的一组关键字匹配

> ID：10596810
> 
> 赞同：2
> 
> 时间：2012-05-15T08:24:13.653
> 
> 标签：php, algorithm, wordpress, solr, replace

在我的数据库中，我列出了 5000 行（作为关键字）。现在给定一篇文章（甚至可能是 1000 个单词），我想匹配与数据库中的关键字匹配的任何单词。例如，我在 db 中有这些记录（使用逗号提到行）： `tv, tv and videos, movie, horror movie, camera, digital camera, canon digital camera`

每行都有另一列名为“URL”。我的输入字符串可能是这样的：

> 我讨厌恐怖电影。佳能发布了一款新的数码相机。到目前为止，我拥有 3 台数码相机......'

从上面的字符串，我需要匹配：

*   **针对我存储的关键字恐怖**电影的***恐怖电影*。但我不希望只有***电影****与电影*相匹配，因为**恐怖电影**关键字在这里更合适。**
***   **数码相机**对存储关键字*数码相机**   **数码相机...**针对存储的关键字*数码相机***

 **（文章中存在粗体词组，斜体词组在数据库中）

对数据库中的每个关键字进行迭代可能是不可能且不切实际的。到目前为止，我了解到 Solr 可能很合适。但我不确定我将如何索引和查询 Solr。为了查询 Solr，我必须提供关键字。但我不知道我的关键字是什么。我只知道整篇文章。关键字可能包含 1 个或多个单词。完全随机，但我最多可以说 5 个字。

匹配后，我需要将文章中的关键字替换为下一列的（URL）值。比如文章**恐怖电影**中的关键词需要替换为*恐怖电影*的网址栏。

任何人都可以用正确的路径启发我吗？任何帮助表示赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:52:13.973

我认为您的问题实际上有几个部分，但我假设您基本上想向您的网站提交一篇文章，然后您的网站后端将处理这篇文章并用粗体字体和网址替换所有关键字？

鉴于您想操纵您的文章并从您的数据库中注入数据，也许原始的 php 解决方案可以满足要求（但我必须承认我对 Solr / Lucene 不够熟悉，无法提供建议）。您显然必须进行一些基准测试，但 5,000 行数据在这种类型的系统中并不是不合理的数据量，因为我假设您不会每隔几秒甚至几分钟提交一次文章？

**因此，您需要：**

1.  一次从数据库中选择所有“关键字”，包括您的 url（存储在内存中以处理文章）。
2.  将（如果需要）您的关键字数据转换为多维关联数组（因为如果您的数据库查询尚未完成此操作，则处理起来会更容易）。
3.  在附加数组中建立复数变体，或者如果它们在数据库的附加列中因关键字而异）。
4.  当您提交您的文章时，您必须（一种或其他方式）遍历所有 5000 个关键字（包括所有复数变体的附加循环），在整篇文章中搜索所述关键字。
5.  如果在您的文章中找到任何关键字，那么您显然需要将这些匹配替换为粗体字体和匹配的 url。
6.  那么一旦文章中的所有关键词都被处理了，你显然需要保存或向用户展示这篇文章？

**关于您的关键字的另外两点是：**

*   确定您的复数关键字是否超出了“s”后缀（即，您是否也在尝试匹配实际上改变拼写的复数词，例如“buddy”=>“buddies”）？
*   从语法上讲，您准备/需要走多远，您是否需要或想要将数码相机之类的东西与数码相机相匹配？

抱歉，答案相当冗长/神秘，但我认为在寻找解决方案之前了解项目的全部范围很重要。您可能已经掌握了这些详细信息，但从您的问题来看，我认为变量太多，无法提供完整的答案。如果您需要，我很乐意提供一些代码示例/对上述任何一点的进一步解释？

**编辑：**当您提到识别关键字时有点困惑，关键字不是已经在您的数据库中吗？或者您是否正在尝试从提交的文章中有机地创建一个关键字数据库，以便您的系统将收集您的文章的关键字，同时从您的数据库中搜索和替换当前存储的关键字？**

# javascript - 如何通过用户代理字符串检测 IE7，忽略以 quirks 模式运行的较新 IE 版本

> ID：10596813
> 
> 赞同：4
> 
> 时间：2012-05-15T08:24:21.270
> 
> 标签：javascript, regex, user-agent

我需要使用用户代理字符串检测 IE7（和 IE6）：

我做了以下正则表达式：

```
navigator.userAgent.match(/MSIE [67]\./) 
```

但是，IE9 在 quirks 模式下也将正则表达式与以下[用户代理](http://www.useragentstring.com/pages/Internet%20Explorer/)匹配：

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 7.1; Trident/5.0; .NET CLR 2.0.50727; SLCC2; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; .NET4.0C) 
```

我可以制作两个正则表达式：

```
navigator.userAgent.match(/MSIE [67]\./) !== null 
  && navigator.userAgent.match(/Trident\/5\.0/) === null 
```

有没有办法可以将它们组合成一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:20:29.717

假设 Trident 部分总是在 MSIE 部分之后，您可以使用前瞻：

```
/MSIE [67]\.(?!.*Trident[5]\.0)/ 
```

我不熟悉用户代理字符串，但我猜也许 IE10 在 quirks 模式下的 Trident 版本可能 > 5，因此您可以将其更改为：

```
/MSIE [67]\.(?!.*Trident[1-9])/ 
```

**更新：第二个正则表达式也被编辑以包括早期版本的 Trident，例如 IE8 中的 Trident/4.0，以及潜在的更高版本 >= 10。**

UPDATE2：清理正则表达式在 javascript 中有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:20:10.657

我正在发布一个与正则表达式一起制作的 JavaScript 解决方案......

```
function getInternetExplorerVersion()
// Returns the version of Internet Explorer or a -1
// (indicating the use of another browser).
{
  var rv = -1; // Return value assumes failure.
  if (navigator.appName == 'Microsoft Internet Explorer')
  {
    var ua = navigator.userAgent;
    var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
    if (re.exec(ua) != null)
      rv = parseFloat( RegExp.$1 );
  }
  return rv;
}
function checkVersion()
{
  var msg = "You're not using Internet Explorer.";
  var ver = getInternetExplorerVersion();

  if ( ver > -1 )
  {
    if ( ver >= 8.0 ) 
      msg = "You're using a recent copy of Internet Explorer."
    else
      msg = "You should upgrade your copy of Internet Explorer.";
  }
  alert( msg );
} 
```

这个解决方案其实是我的微软给的，可以参考[这个链接](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T09:49:02.273

`document&&document.documentMode?document.documentMode:variable`也许不相关，但为什么不尝试`variable`根本不是 IE 的标识符呢？

# flash - 在 Flash Player 中表示文本，忠实于 InDesigns 的文本表示

> ID：10596814
> 
> 赞同：0
> 
> 时间：2012-05-15T08:24:22.410
> 
> 标签：flash, adobe-indesign, tlf, indesign-server

我想在 Flash 中显示一个可编辑的文本字段，它具有与在 InDesign 文档中定义的相同的文本格式、列、填充和字母间距。

这可能吗？- 是否可以使用更新的文本布局格式来紧密呈现相同的格式集，因为用户可以在 InDesign 中布局文本？

-> 如果是这样，我将如何从 InDesign 获取信息到 Flash？- 我使用 InDesign 服务器实例，并开始尝试将文本导出为 swf。文本作为静态文本类的实例逐行导出，因此无法在客户端进行编辑。

谢谢

阿斯格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:36:47.217

**无耻的自我推销：** [Prinkk.com](http://www.prinkk.com)具有一个在线 Flash 编辑器，非常接近于复制 InDD 文本布局。这是纯 Flash，使用 TLF，并由 .NET 支持 - 根本没有 InDesign 服务器。

我们应该在 2012 年第四季度推出一个全新的版本，它将复制 InDD 的大部分核心西方文本功能，但 InDD 的专有段落组合算法除外。

所以，是的，这是可能的，但我们花了几个月的时间进行开发工作：虽然 InDesign 团队中的一些人参与了 TLF 及其内部结构的开发，但 TLF 不会为您提供开箱即用的功能类似于 InDD 脚本对象模型。

全面披露：我编写了 Prinkk.com 并参与了该企业。

# java - javax.servlet.ServletException：servlet spring 的 Servlet.init() 抛出异常

> ID：10596815
> 
> 赞同：3
> 
> 时间：2012-05-15T08:24:27.087
> 
> 标签：java, spring, spring-mvc, noclassdeffounderror, spring-integration

运行此示例时出现此错误

[http://viralpatel.net/blogs/2010/11/spring3-mvc-hibernate-maven-tutorial-eclipse-example.html](http://viralpatel.net/blogs/2010/11/spring3-mvc-hibernate-maven-tutorial-eclipse-example.html)

```
javax.servlet.ServletException: Servlet.init() for servlet spring threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.service.ContactService net.viralpatel.contact.controller.ContactController.contactService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.LocalSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:286)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause 

org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.service.ContactService net.viralpatel.contact.controller.ContactController.contactService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.LocalSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:507)
    org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.LocalSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:955)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:901)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:735)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:666)
    org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:500)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:306)
    org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:185)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:812)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:769)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:686)
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause 

org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.LocalSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:141)
    org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:72)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:948)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:901)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:735)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:666)
    org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:500)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:306)
    org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:185)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:812)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:769)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:686)
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause 

java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    org.springframework.orm.hibernate3.LocalSessionFactoryBean.<init>(LocalSessionFactoryBean.java:189)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    java.lang.reflect.Constructor.newInstance(Unknown Source)
    org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:72)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:948)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:901)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:735)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:666)
    org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:500)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:306)
    org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:185)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:812)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:769)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:686)
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:283)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:28:13.707

```
java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration 
```

请将 Hibernate 添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T18:19:10.557

在更改了一些代码后，我使这个项目工作。

您可以从以下链接下载它：

[http://www.mediafire.com/download/5okkxmep6dx7gd1/Spring3HibernateMaven.zip](http://www.mediafire.com/download/5okkxmep6dx7gd1/Spring3HibernateMaven.zip)

我在 web.xml 文件和 pom.xml 中添加了一些代码行。

web.xml

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>Spring3-Hibernate</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-servlet.xml</param-value>
    </context-param>
    <listener>
        <listener-class>
                      org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>
</web-app> 
```

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>Spring3HibernateMaven</groupId>
<artifactId>Spring3HibernateMaven</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<description></description>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.0</version>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.3.2.GA</version>
    </dependency>
    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <!-- dependency> <groupId>org.slf4j</groupId> <artifactId>slf4j-log4j12</artifactId> 
        <version>1.4.2</version> </dependency -->
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.10</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>20030825.184428</version>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>20030825.183949</version>
    </dependency>
</dependencies>
<properties>
    <org.springframework.version>3.0.2.RELEASE</org.springframework.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

它工作完美。

# c++ - 如何在类 Unix 系统上从 USB 设备获取序列号

> ID：10596816
> 
> 赞同：1
> 
> 时间：2012-05-15T08:24:30.663
> 
> 标签：c++, usb, uniqueidentifier, serial-number

二进制文件位于用作加密狗的 USB 密钥上。

我需要从密钥中获取唯一标识符。VendorID + DeviceID 是不可能的，因为如果 USB 密钥的型号相同，它们可能是相同的。

使用 Windows，我使用了一个功能`GetVolumeInformation()`，它给我一个**序列号**，每次格式化设备时都会更改（不是问题）。

使用Unix，要得到相同的序列号，需要读取目录下对应的挂载文件`/dev/`。但是这个操作需要**root 访问权限**，或者至少我需要成为特定组的一部分。

唯一标识符可能与 Win32 系统上的序列号不同。但是对于我将用于交付的每个 USB 密钥，它必须是不同的。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:30:40.413

您可以在`/dev/disk/by-uuid/`目录中查找。设备节点有符号链接，符号链接名称是分区的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:39:24.870

这里有一些想法：

*   设备是否自动安装在系统上？如果是这样，它可能会通过自动挂载程序使用其设备名称进行挂载，并且该`mount`命令会告诉您设备名称。例如，安装到的东西是分区表中提供的设备名称`/media/ABCD-1234`。`ABCD-1234`
*   在`/sys`文件系统中存在一些关于设备的信息。一个是每个分区的大小。您可以在设备上放置多个分区，并使用一个具有特定大小的未格式化分区（不会被挂载）。然后该分区的大小将是您的序列号，例如通过 可用`/sys/block/sdb/sdb1/size`，这是世界可读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:33:49.027

我已经设法通过使用`df`命令获取 /dev 文件来检索序列号

然后使用此代码并对其进行了一些修改：

[linux C++下的U盘序列号](https://stackoverflow.com/questions/2432759/usb-drive-serial-number-under-linux-c)

第三个答案（Orwellophile 的）

我不确定这是否适用于每个 Unix 系统，但现在还可以。

# xaml - VariableSizedWrapGrid 宽度机制

> ID：10596817
> 
> 赞同：0
> 
> 时间：2012-05-15T08:24:36.187
> 
> 标签：xaml, windows-8

我有一个 VariableSizedWrapGrid 作为我的 GridView ItemsPanel。GridView 所在的列设置为 Width Auto。我希望 VariableSizedWrapGrid 可以根据需要使用尽可能多的空间，但不，它只在 GridView 中显示一个项目，而不是 StackPanel。堆栈面板占用显示项目所需的空间。

这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:51:28.987

我认为您需要设置 width="*" 这将填满堆栈面板中剩余的空间。

当设置为自动时，它只会根据网格中的内容占用它需要的空间。

不久前，我写了一篇关于使用 XAML 进行动态布局的博文，希望这将有助于您进一步创建布局： [http ://www.playingwith.net/2012/01/creating-a-dynamic-layout-with-xaml -in-windows-8-metro-style-apps/](http://www.playingwith.net/2012/01/creating-a-dynamic-layout-with-xaml-in-windows-8-metro-style-apps/)

# python - python上的makefile

> ID：10596820
> 
> 赞同：0
> 
> 时间：2012-05-15T08:24:51.990
> 
> 标签：python, makefile, executable

我正在尝试为 python 脚本编写一个 Makefile，它将创建一个`VMTranslator`

可执行文件，它应该得到一个输入，

这意味着这是应该如何在 shell 命令上完成的：

```
1)make <==== should make the VMTranslator executable.

2)VMTranslator BasicTest.vm <==== the user is supposed to use it like this. 
```

根据我在网上找到的内容，我尝试了以下方法：

```
#!/usr/local/bin/
    python *$ 
```

但它不工作。

需要包含的文件有：codeWriter.py、vmTranslator.py、parser.py。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T08:56:59.133

Python 二进制文件是一个解释器。它不会创建独立的可执行文件。

您可以做的是编写一个 Python 脚本来执行您想要的操作，只要 Python 可执行文件存在，就可以使该脚本透明地运行：

```
#!/usr/bin/env python
#

import codeWriter
import vmTranslator
import parser

# Add code here to parse arguments and call into the imported code. 
```

将其另存为`VMTranslator`，并使文件可执行 ( `chmod +x VMTranslator`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:50:37.110

你能像这样从 shell 运行你的脚本`python vmTranslator.py BasicTest.vm`吗？如果 vmTranslator.py 包含它需要工作的内容，这应该可以工作。如果是这样，您可以将以下内容写入可执行的 shell 脚本`VMTranslator`：

```
#!/bin/bash
python vmTranslator.py $1 
```

然后你应该能够像这样运行它：

```
./VMTranslator BasicTest.vm 
```

如果您的变量不包括当前目录（这些天强烈推荐设置），您将需要`./`在一开始的情况下。`PATH``.`

此外，请务必提供正确的 shebang 行`#!/bin/bash`来定位系统上的 shell。

# c# - 为 wp7 制作动态表

> ID：10596824
> 
> 赞同：-2
> 
> 时间：2012-05-15T08:25:01.880
> 
> 标签：c#, windows-phone-7

我正在尝试制作一个动态表。我尝试使用行定义。我有一个 xml 表，我想将值放入动态表中。

这是我的代码：

```
 Grid g = new Grid();

 XElement resultElements = XElement.Parse(e.Result);
 ListBox listBox2 = sender as ListBox;

 // g.RowDefinitions.Add(rr);
 int di = -1;
 foreach (XElement nod in resultElements.Elements(@"studentPunishmentsTable"))
 {
      di++;
      RowDefinition rr = new RowDefinition();
      TextBlock u = new TextBlock();
      penalty = nod.Element("penalty").Value;
      u.Text = penalty;
      g.RowDefinitions.Add(rr);
      Grid.SetRow(u,di);
      g.Children.Add(u); 
 } 
```

如何使动态表从 webservice 表中逐行读取数据到 wp7 页面上的表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:54:07.753

```
foreach (XElement nod in resultElements.Elements(@"studentPunishmentsTable"))
 {
              listb.Items.Add(penalty+Environment.NewLine+ issueDate + semesterDesc);
                Grid.SetColumn(listb, colum);
                Grid.SetRow(listb, row); row = row + 1;
} 
```

这段代码动态地制作一个列表..

# c# - WCF 托管和端口转发问题

> ID：10596825
> 
> 赞同：0
> 
> 时间：2012-05-15T08:25:03.277
> 
> 标签：c#, wcf, portforwarding

我是 WCF 技术的初学者。所以我创建了一个简单的 wcf 服务 hello 应用程序。它在我自己的网络中运行良好，但是当我将它托管在我的网络之外的另一台机器上时，我的 wcf 客户端无法连接 wcf 服务。我将我的 wcf 托管在具有静态 IP 但仍然没有运气的机器上。我搜索了谷歌并知道我需要从那台机器路由器转发端口，但不幸的是我无法访问那台机器的路由器。所以请告诉我如何处理这种情况。告诉我什么是捷径，因为我的客户端 wcf 可以连接 wcf 服务器应用程序。

我熟悉网络服务。当我们在远程机器上托管 web 服务时，我们可以从任何远程机器连接 web 服务。这种端口转发问题不存在。

1）我在远程机器上的 windows 应用程序中托管我的 wcf 服务。windows 应用程序与 wcf 服务一起运行，但客户端无法连接它。如果我在远程机器的 IIS 中托管 wcf 服务，那么我还需要在远程机器上转发端口吗？

关于 wcf 托管，我的概念不清楚。所以请告诉我什么时候需要为 wcf 服务转发端口。

2）我在win应用程序或win服务中托管wcf服务时需要转发端口吗？3) 当我在 IIS 中托管 wcf 服务时，是否也需要转发端口？

4) 有什么方法可以让 wcf 服务第一次在远程机器上运行，然后从我的 win 应用程序中调用例程，该程序将以编程方式转发端口。

请详细讨论我的所有观点，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:29:07.940

您需要 IIS 服务器（Web 服务器）来托管 WCF 服务。就像您可以从 Internet 打开网站一样，您需要能够打开 WCF 服务。如果它被托管在 HTTP 中，IIS 服务器应该这样做。它需要自己的地址和端口。您还可以在 WCF 中使用 TCP 连接。首先，您需要一个网络服务器并将示例网页添加到该服务器并从您的端查看该网页，然后将该服务部署到 IIS 服务器并对其进行配置。您需要访问该服务器以配置启动/重新启动 WCF 服务。它就像一个网页。

它应该像`http://somewebsiteaddress234234.com:234242344/YourServiceName1.svc`

`http://address:port/servicename.svc`

# django - Django celery crontab 每 30 秒 - 有可能吗？

> ID：10596826
> 
> 赞同：10
> 
> 时间：2012-05-15T08:25:07.810
> 
> 标签：django, scheduled-tasks, crontab, celery

**是否可以在特定时间**运行 django celery crontab 非常 30 秒？

只有分钟、小时和天的设置。

我有 crontab 工作，但我想每 30 秒运行一次，而不是每分钟运行一次。

**或者...**

是否可以将间隔打开 30 秒，然后仅在一天中的特定时段打开间隔时间表？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T08:41:01.143

[他们在文档中的第一个例子是](http://ask.github.com/celery/userguide/periodic-tasks.html#entries)......

> *示例：每 30 秒运行一次 tasks.add 任务。*
> 
> ```
> from datetime import timedelta
> 
> CELERYBEAT_SCHEDULE = {
>     "runs-every-30-seconds": {
>         "task": "tasks.add",
>         "schedule": timedelta(seconds=30),
>         "args": (16, 16)
>     },
> } 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T08:32:04.850

如果你*真的*需要这样做并且你需要一个快速的解决方案，你可以求助于添加：sleep 到你的脚本中。（显然，您需要在脚本中添加一个参数以将睡眠时间设置为 0 或 30 秒，并将脚本两次添加到 crontab，一次使用 0 作为参数，第二次使用 30）。

请不要对我投反对票！这是一个解决方案，尽管我很清楚这不是一个理想的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-09T17:39:14.053

你可以使用

```
from datetime import timedelta

@periodic_task(run_every=timedelta(seconds=30))
def thirty_second_task():
   now = datetime.now()
   if now.hour == 12 or now.hour == 9:
       your code goes here` 
```

这将每 30 秒运行一次该函数，但它只会在当前时间的小时值为 12 或 9 时运行您的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-05T15:41:19.863

我会通过安排另一个任务来启用/禁用主要任务来使用您的替代解决方案：

```
# tasks.py
from djcelery.models import PeriodicTask

@app.task
def toggle_thirty_second_task:
    # you would use whatever you named your task below
    thirty_second_tasks = PeriodicTask.objects.filter(name='runs-every-30-seconds')
    if thirty_second_tasks:
        # this returned an array, so we'll want to look at the first object
        thirty_second_task = thirty_second_tasks[0]
        # toggle the enabled value
        thirty_second_task.enabled = not thirty_second_task.enabled
        thirty_second_task.save() 
```

然后只需使用 crontab 在您需要切换的时间安排此任务。或者，您可以安排一个任务来打开它，一个任务来关闭它而不处理切换逻辑。

希望这可以帮助。

sc

# prolog - 序言：姐妹/兄弟关系

> ID：10596829
> 
> 赞同：1
> 
> 时间：2012-05-15T08:25:17.380
> 
> 标签：prolog, relationship

我正在尝试在 Prolog 中建立关系模型，但姐妹关系却失败了。我想知道对此有什么好的解决方案。我是初学者，这是我的第一个程序，欢迎任何帮助。

```
man(adam).
man(peter).
man(paul).
man(carlos).
man(willem).

woman(marry).
woman(eve).
woman(greta).
woman(lisa).

parent(adam, peter). 
parent(eve, peter).
parent(adam, paul).
parent(marry, paul).
parent(adam, willem).
parent(adam, lisa).
parent(eve, willem).
parent(eve, lisa).
parent(greta, adam).
parent(carlos, adam).

father(F, C) :-
   man(F),
   parent(F, C).

mother(M,C) :-
   woman(M),
   parent(M, C).

grandparent(P, C):-
   parent(P, K),
   parent(K, C).

sister(x,y) :-
   woman(x),
   mother(m, x),
   father(f, x),
   mother(m, y),
   father(f, y). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:39:08.457

`sister\2`您需要对谓词中的变量使用大写字母。在您的代码中，您有小写字母，它们是原子，因此除非您有人称为`x`,和`y`，否则这将始终失败。`f``m`

另外，添加`X \= Y`以防止 X 成为她自己的妹妹。

# jquery-plugins - jQuery-Localize 不适用于 jQuery Mobile？

> ID：10596831
> 
> 赞同：1
> 
> 时间：2012-05-15T08:25:28.493
> 
> 标签：jquery-plugins, jquery-mobile, cordova, jquery-localizer

我正在开发一个具有多种语言的 PhoneGap Web 应用程序，并且我正在使用[jQuery-Localize](https://github.com/coderifous/jquery-localize/)来做。我让它在一个简单的静态页面上运行，但是当我将它与 jQuery-Mobile 集成时它不起作用。

这是我的简单测试页面：

```
<div data-role="page" id="pageHome">
<script type="text/javascript">
    $("#pageHome").live('pagecreate', function() {
        $("[rel*=localize]").localize("index");
    });
</script>
<div data-theme="a" data-role="header">
    <h3>Home</h3>
    <div data-role="navbar" data-iconpos="top">
        <ul>
            <li><a href="#pageUne" rel="localize[one]" data-theme="" data-icon="home" class="ui-btn-active">no</a></li>
            <li><a href="#pageTwo" rel="localize[two]" data-theme="" data-icon="star">no</a></li>
            <li><a href="#pageThree" rel="localize[three]" data-theme="a" data-icon="check">no</a></li>
        </ul>
    </div>
</div>
<div id="content" data-role="content">
    <div><b>Welcome!</b></div>
</div> 
```

我在 PhoneGap 控制台中收到下一条消息：

> [未捕获的 SyntaxError： http](http://code.jquery.com/jquery-1.6.4.min.js:2) ://code.jquery.com/jquery-1.6.4.min.js:2 处的意外字符串

我试图在事件**pagebeforecreate**和**pageInit**处处理但没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:44:38.247

这是您的问题示例的答案 [http://www.funcion13.com/2012/04/03/traduciendo-aplicaciones-de-jquery-mobile/](http://www.funcion13.com/2012/04/03/traduciendo-aplicaciones-de-jquery-mobile/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T19:58:41.173

HTMLed.js 是专门为 Jquery mobile 开发的。轻的。在 GitHub[链接上查看框架](https://nirus.github.com/HTMLed)

可能这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T05:08:59.433

如果有人正在寻找英文答案，请参阅此链接： [https ://github.com/coderifous/jquery-localize/issues/15](https://github.com/coderifous/jquery-localize/issues/15)

JQM 向 DOM 添加了许多自己的东西，因此调用 jquery-localize 将破坏所有这些工作，从而导致奇怪的结果。要解决这个问题，请在 JQM 执行此操作之前调用 localize。来自上述链接的示例：

```
$(document).on('pagecreate','#home',function(event){
      $("[rel*=localize]").localize("index")
}); 
```

# shell - 返回 Solaris 中的 iNode 使用情况

> ID：10596833
> 
> 赞同：1
> 
> 时间：2012-05-15T08:25:43.487
> 
> 标签：shell, solaris, inode

我正在创建一个 shell 脚本以从 Solaris 机器返回 iNode 使用情况。

我用来运行的命令是：`df -F ufs -o i`,

并说输出是：

```
 Filesystem             iused   ifree  %iused  Mounted on
    /dev/dsk/c1t0d0s1     248503 3443913     7%   / 
```

我需要抓住的唯一部分是 7%。请在返回 %iused 的部分帮助我，并在脚本末尾输出它。

提前致谢！

问候，

马丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T07:34:06.263

用这个。

```
df -F ufs -o i | sed -n '$p' | awk '{print $4}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:30:56.863

```
df -F ufs -o i | nawk 'NR>1 {print $4}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:49:07.517

```
set `df -F ufs -o i`
printf '%s\n' ${10} 
```

只要`df`输出与您显示的完全一样，它就可以工作。如果它实际上有更多行并且您只对根文件系统 / 感兴趣，则使用`df ... /`它使其仅输出您感兴趣的统计信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-06T05:56:12.080

`df -F ufs -o i | grep ^/ | awk '{print $4}'`

# python - 在 OpenERP 中使用 RML 动态生成报告

> ID：10596836
> 
> 赞同：2
> 
> 时间：2012-05-15T08:25:51.293
> 
> 标签：python, report, openerp, dynamic-tables, rml

如何使用 RML 报告生成动态列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:31:15.233

通读有关报告中[动态内容](http://doc.openerp.com/v6.0/developer/3_11_reports/11_1_openoffice_report.html#dynamic-content-in-openoffice-reports)的开发人员文档。你可以使用这个`repeatIn()`函数来循环你的日期，但诀窍是调整列宽。我怀疑您可以`colWidths`使用该`setTag()`函数更改表的属性。

这是我用它来更改表格样式[的示例。](http://bazaar.launchpad.net/~zaber/openobject-addons/main/view/head:/account_reporting/report/account_report_bs.rml#L103)

```
 <section>
      [[ repeatIn(lines(data['form'],object=o), 'a') ]]
      <blockTable>
        [[ setTag('blockTable','blockTable',{'colWidths': '80.0,150.0,80.0', 'style': 'Table' + str(a['level'] if a['level'] &lt;= 5 else 5)}) ]] 
        <tr>
          <td lineAboveColor="#000000" lineAboveThickness="5" lineAboveCount="1" lineAboveSpace="5">
            <para style="P10"><font>[[ setTag('font','font',{'face':o.font_style or 'Helvetica', 'color':o.color_font.name or 'black', 'backColor':o.color_back.name or 'white'}) ]] [[ a['code'] ]]</font></para>
          </td>
          <td>
            <para style="P17"><font color="white">[[ '..'*(a['level']-1) ]]</font><font>[[ setTag('font','font',{'face':o.font_style or 'Helvetica', 'color':o.color_font.name or 'black', 'backColor':o.color_back.name or 'white'}) ]] [[ a['name'] ]]</font></para>
          </td>
          <td>
            <para style="P18"><font>[[ setTag('font','font',{'face':o.font_style or 'Helvetica', 'color':o.color_font.name or 'black', 'backColor':o.color_back.name or 'white'}) ]][[ '%.2f'% a['balance'] ]]</font></para>
          </td>
        </tr>
      </blockTable>
    </section> 
```

# css - 使用css定位div元素

> ID：10596844
> 
> 赞同：0
> 
> 时间：2012-05-15T08:26:18.947
> 
> 标签：css, xhtml

我似乎总是对 CSS 布局有问题。在页面上放置“div”元素的最佳方式是什么。例如，我创建了以下内容：

见我的 jsfiddle：http: [//jsfiddle.net/JJw7c/3/](http://jsfiddle.net/JJw7c/3/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Example</title>
</head>
<body>
    <div class="container">
        <div class="header">
            this is the header
            <div class="menu">
                menu goes here
            </div>
        </div>
        <div class="main">
            main content goes here
        </div>
    </div>
    <div class="footer">
        footer
    </div>
</body>
</html>

body
{
    margin:10px;
}
.container
{
    border:1px solid black;
    min-height:400px;
    width:100%;
}

.header
{
    border:1px solid red;
    height:100px;
}

.menu
{
    border:1px solid green;
    height:20px;
    width:50%;
    float:right;
}

.main
{
    border:1px solid grey;
    min-height:100px;
    margin:20px;
}

.footer
{
    border:1px solid green;
    width:100%;
    padding-top:10px;
} 
```

假设我想在标题的右下角放置一个图标，但我想具体一点。

我是使用相对位置然后顶部：20px 等等等..还是位置：绝对？还是我使用margin-right:200px？或者我可以使用浮动然后定位绝对？<<< 请你解释一下我什么时候会使用这些，如果可能的话，用每个例子更新我的jsfiddle。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:31:18.020

利用

```
position:absolute;
bottom:0px;
right:0px; 
```

到图标类并添加`position:relative;`到 .header

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:28:42.863

您可以将位置`absolute + relative`
分配`position: relative`给`.header`元素，然后在 using `position: absolute`:中添加您的图标，`top`并且`left`应用于图标的属性将被引用到该`header`元素（因为它是图标的第一个非静态元素父级）

这种技术的主要优点是图标的存在不会影响标题内其他元素的位置（因为是绝对定位的）

# jquery - 检查文本框的长度并在其为 0 时显示相关的错误消息

> ID：10596845
> 
> 赞同：0
> 
> 时间：2012-05-15T08:26:21.257
> 
> 标签：jquery, asp.net

我有一个文本框，我试图检查它是否有任何内容，如果它不需要显示相关的错误消息，但即使我在其中输入了一些内容，它也会继续显示错误消息

我在这里创建了一个[http://jsfiddle.net/Atkinson1988/SzuVQ/](http://jsfiddle.net/Atkinson1988/SzuVQ/)

```
var DiarisedReason = $("#txtDiarisedReason").val();
if (jQuery.trim(DiarisedReason).length < 0);
{
alert('Please Enter Diarised Notes');
return false;
}
​ 
```

我不确定我做错了什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:31:22.713

我建议您在 asp.net 中使用 RequiredFieldValidator，因为它提供了验证服务器端控件的简单方法。

```
<asp:TextBox id="TextBox1" runat="server"/> 
```

和必填字段验证器

```
<asp:RequiredFieldValidator id="RequiredFieldValidator2"
                    ControlToValidate="TextBox1"
                    Display="Static"
                    ErrorMessage="*"
                    runat="server"/> 
```

然后`Page.IsValid`在页面加载事件中检查以提交表单。

```
if(page.IsValid)
{
  //then do success
}
else
{
 //do failure
} 
```

如果你想要 javascript/jquery 解决方案，那么你可以尝试这样

您也可以使用 val() 。像这样的东西。`!`将检查文本框值中的值。

```
if(!$("#txtDiarisedReason").val())
 alert('you have to enter the Reason'); 
```

或者，您也可以检查修剪后的值。通过使用[修剪（）](http://api.jquery.com/trim)

检查演示：[JsFiddle](http://jsfiddle.net/SzuVQ/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:34:19.550

条件语句后有一个分号。这就是显示警报的原因，即使您的条件检查长度小于 0...

此外，您实际上并不需要 jQuery 来进行修剪......以下工作也一样：

例如..`if (DiarisedReason.replace(/^\s+|\s+$/, '').length == 0) {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:30:59.410

是否有任何特殊原因必须使用 JQuery 而不是 .Net 必填字段验证器？

[http://asp.net-tutorials.com/validation/required-field-validator/](http://asp.net-tutorials.com/validation/required-field-validator/)

# sql - 在oracle中选择随机记录

> ID：10596846
> 
> 赞同：2
> 
> 时间：2012-05-15T08:26:22.927
> 
> 标签：sql, oracle

> **可能重复：**
> [如何在 SQL 中请求随机行？](https://stackoverflow.com/questions/19412/how-to-request-a-random-row-in-sql)

您好我正在尝试从 oracle 数据库中选择随机记录。我尝试使用以下查询：

```
select field1 
from (select field1 from table1 where field2='SAMPLE_VALUE' order by dbms_random.value) 
where rownum <2; 
```

这工作得很好，除了它非常缓慢和昂贵。

我们有更快的方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:57:46.467

您可以尝试 SAMPLE 子句：

```
select field1
from   table1 sample (1)
where  field2='SAMPLE_VALUE' and
       rownum <=1 
```

然而：

1.  您可能不会获得基于索引的访问
2.  不能保证你会得到足够的价值
3.  您可能倾向于从表格的“开头”获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:01:43.607

您需要检查执行计划。
它可能正在`full access`对表进行操作，因此如果您可以在其上添加索引，`field2`那么优化器可能值得`index range scan`根据您的`where clause`.
（我对 field2 真的一无所知，所以请仔细检查）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:51:44.740

如果记录有一些唯一的数字列，我会尝试将它与随机生成的值进行比较。类似的东西`SELECT ... FROM ... WHERE id = RANDOM_VALUE`。但是可能需要一些计算才能使这个唯一列和随机值具有相同的范围。

# jakarta-ee - 应用程序管理中每个会话的 EntityManagerFactory

> ID：10596847
> 
> 赞同：1
> 
> 时间：2012-05-15T08:26:28.880
> 
> 标签：jakarta-ee, ejb-3.0, jpa-2.0, eclipselink

我必须在我的多租户**SaaS**应用程序中在运行时更改**默认架构。**（共享数据库 - 单独的架构）。基本上每个客户都会有自己的模式（由于某些保密原因，这样设计），并且根据他们的**登录凭据**，他们将在登录后连接到特定的模式。

 ****我使用 JPA2.0 和 eclipselink 作为持久性提供者。

我想创建一个应用程序范围的**单例 EMF**，并在创建方法范围的 EntityManager 时将模式名称传递给 createEntityManager 但注意到模式属性只能传递给**createEntityManagerFactory()**所以我必须为每个创建一个 EMF session (@SessionScope) 并在每个业务方法中从 EMF 创建 Em。

这个设计对我描述的场景有意义吗？

有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:39:10.580

我没有这种多租户设置的经验，但是您将从每个人共享的一个唯一 EMF 变为每个用户一个 EMF。

你走得太远了。正确的 IMO 粒度应该是每个数据库模式一个 EMF。两个用户（以及两个 HTTP 会话）使用相同的模式没有理由拥有两个不同的 EMF。****

# c# - 用于避免多个实例同时下载应用程序更新的互斥锁实现

> ID：10596849
> 
> 赞同：4
> 
> 时间：2012-05-15T08:26:38.517
> 
> 标签：c#, wpf

我正在开发一个多实例应用程序，有应用程序更新功能，可以从互联网下载更新并安装它。
现在的问题是，如果打开了多个实例，那么所有人都会尝试安装导致错误的更新。
阅读教程后我学到的简单代码片段。

```
 static bool IsSingleInstance()
    {
        try
        {
            // Try to open existing mutex.
            Mutex.OpenExisting("myMutex");

        }
        catch
        {
            // If exception occurred, there is no such mutex.
            Window1.mutex = new Mutex(true, "myMutex");

            // Only one instance.
            return true;
        }
        // More than one instance.
        return false;
    } 
```

我是 C# 的新手。那么谁能告诉我如何使用 Mutex 来确保只有一个实例可以下载和安装更新。
如果您知道此主题，请告诉相应教程的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:03:11.860

使互斥锁成为全局的

`Window1.mutex = new Mutex(true, "Global\\myMutex");`

`Mutex.OpenExisting("Global\\myMutex");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:36:53.513

我认为您在那里遗漏了很多可能的异常，这个示例更适合处理您可能遇到的各种错误， [MSDN 上的 Mutex.OpenExisting Method example](http://msdn.microsoft.com/en-us/library/c41ybyt3.aspx "Mutex.OpenExisting 方法（字符串）")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:41:49.483

这里的问题是你在调用`OpenExisting`和'new Mutex`之间有一个时间间隔，所以，实现你需要的我的类可能看起来像这样。

```
class YourApp : IDisposable 
{
    private readonly Mutex _mutex;
    private bool _isFirstInstance;

    public YourApp()
    {
        _mutex = new Mutex(false, "myMutex");
    }

    ~YourApp()
    {
        this.Dispose(false);
        GC.SurpressFinalize(this);
    }

    public bool IsFirstInstance
    {
        if(_isFirstInstance)
            return true;

        _isFirstInstance = _mutex.WaitOne (TimeSpan.FromSeconds(1d), false);
        return _isFirstInstance;
    }

    private bool IsDisposed { get; set; }

    public void Dispose()
    {
        this.Dispose(true);
    }

    private void Dispose(bool disposing)
    {
        if(this.IsDisposed)
           return;

        if(disposing)
           _mutex.Dispose();

        this.IsDisposed = true;
    }
} 
```

这是我用于此答案的参考：[C# 中的线程：互斥锁](http://www.albahari.com/threading/part2.aspx#_Mutex)

# jquery - jQuery 一级子选择器的最佳方式

> ID：10596861
> 
> 赞同：9
> 
> 时间：2012-05-15T08:27:38.877
> 
> 标签：jquery, dom, jquery-selectors

使用 jQuery 从祖先中选择某些孩子的最佳（最高效、更少 CPU 负载）方法是什么？

假设我们有：

```
<div>
 <b>1</b>
 <p>2</p>
 <a>3</a>
 <p>2</p>
</div> 
```

所以

`$('div > p')`

或者

`$('div').children('p')`

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T08:32:25.493

根据我刚刚创建的这个[jsPerf 测试](http://jsperf.com/jquery-child-selector-test)`$('div > p')`，它的速度大约是原来的两倍。我认为这两个选择器在返回的元素上没有什么不同，所以第一个可能更可取，至少从性能的角度来看是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:34:23.017

`$('div > p')`在这种情况下更好更快

有了这个，您将解析 dom 一次以找到您的选择器。

在另一种情况下，您将对其进行两次解析：一次查找 div 元素，一次查找 p 元素到 div

# asp.net - 使用线程进程发送电子邮件

> ID：10596862
> 
> 赞同：0
> 
> 时间：2012-05-15T08:27:39.553
> 
> 标签：asp.net, vb.net, multithreading, email

我们有一个管理系统作为多个网站的后端，该管理系统的一部分是一个电子邮件系统，它允许将电子邮件单独或作为批量电子邮件发送给用户。

我最近重新编写了电子邮件代码，使其更加健壮并正确记录电子邮件状态和发生的任何错误。

我们已经成功地反复测试了电子邮件代码（可能大约 20 次）发送给不到 2000 个用户，并且一切正常，直到我尝试在后台线程中运行电子邮件发送例程。

我尝试了两种不同的线程方法，都使用将线程添加到线程池

```
Threading.ThreadPool.QueueUserWorkItem(AddressOf SendEmails, emailThread) 
```

并使用创建一个新线程

```
Dim t As New Threading.Thread(New Threading.ParameterizedThreadStart(AddressOf SendEmails))
t.Start(emailThread) 
```

（注意：我才刚刚开始为这个项目使用线程，所以如果我遗漏了一些明显的东西，请指出）

有时，所有电子邮件都会正常发送，而其他时候，电子邮件代码在 600 或 900 封电子邮件后停止。它总是 600 或 900，这是首先让我感到困惑的事情。

出于测试目的，我发送给 1841 个用户，电子邮件例程大约需要 75 分钟才能完成。

我已经将线程暂停写入电子邮件例程，因为我们在大约 600 封邮件后开始遇到被拒绝的收件人失败，这可能是由于邮件服务器上的一些反垃圾邮件设置，但暂停 10 分钟然后继续解决这个问题。

那么，有没有人知道为什么在发送 600 或 900 封电子邮件后，电子邮件发送似乎停止工作？不会产生错误，它只是停止运行代码。

**编辑**

根据要求，SendEmail 函数的代码：

```
Private Sub SendEmails(ByVal vars As EmailThreading)
        Try
            For Each user As OD.RegisteredUser In Users
                Dim email As New OD.Email(vars.Site.SiteID)

                If String.IsNullOrEmpty(vars.Site.CommunicationBCCAddress) Then
                    email.BCCAddress = Me.txtEmailBCC.Text
                Else
                    email.BCCAddress = String.Format("{0};{1}", Me.txtEmailBCC.Text, vars.Site.CommunicationBCCAddress)
                End If

                ' basically, if there're items in the drop down list, then one 
                ' of them will have been used, so we grab the details from there
                If Me.ddlReplyFrom.Items.Count > 0 Then
                    email.From = fromAddresses.Item(Me.ddlReplyFrom.SelectedValue)
                Else
                    email.From = fromAddresses.Item(0)
                End If

                email.Body = txtEmailText.Text

                If Not vars.Comment Is Nothing AndAlso vars.Comment.CommentID > 0 Then
                    email.Body += String.Format("<br />-------------------------------------------------------<br /><br />This message was sent in response to:<br /><br />{0}<br /><br />Sent: {1}", _comment.Comment, _comment.DateAdded)
                End If

                email.Subject = Me.txtEmailSubject.Text

                email.CCAddress = txtEmailCC.Text
                email.ToAddress = user.EmailAddress
                email.EmailRecipientID = user.UserID
                email.AddAttachments(EmailAttachments)

                If vars.GroupEmail Then
                    email.GroupEmail = True
                    email.GroupEmailID = vars.GroupEmailID
                End If

                email.ContactType = _contactType

                email.UserType = user.RegisteredUserType

                email.Send()

                For Each ODFile As OD.File In vars.Files
                    ODFile.SaveForEmail(email.EmailID)
                    ODFile.SaveForContactLog(email.ContactLogID)
                Next

            Next
        Catch ex As Exception
            ErrorLog.LogError(ex.Message, "Email send routine", ex.ToString(), OD_Site.SiteID)
        End Try
    End Sub 
```

# android - 线性布局上的图像重叠

> ID：10596865
> 
> 赞同：2
> 
> 时间：2012-05-15T08:27:53.423
> 
> 标签：android, android-layout

我面临的问题是：

1.  我在线性布局中创建了一个动态按钮，垂直方向位于相对布局的中心。
2.  然后，我想在线性布局的顶部添加一个图像，该图像显示在第一个按钮的右下角。

但是，在挣扎了2天之后，我仍然无法正确处理。“图像”显示在第一个按钮的中心。

我希望应用程序成为的图像。

![在此处输入图像描述](../Images/86d38de9d582c5fc2b810ea907b334f2.png)

这是特定的代码：

```
///outermost layout
RelativeLayout L1 = new RelativeLayout(this);
L1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

//For image overlapping on linear layout
FrameLayout FrameLayout = new FrameLayout(this);
RelativeLayout.LayoutParams RelativeParam = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

//Place all dynamic button inside here -vertical
LinearLayout L2 = new LinearLayout(this);
L2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
L2.setOrientation(LinearLayout.VERTICAL);

ImageView handpointer;
handpointer = new ImageView(this);

//grab the imageview and load the animations
handpointer.setImageDrawable(getResources().getDrawable(R.drawable.hand)); 
```

这是在布局 L2 中添加所有动态按钮的代码。

```
 L2.addView(b);
    L2.addView(b);
}

RelativeLayout.LayoutParams Param = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

Param.setMargins(0, 70, 0, 0);
L1.addView(FrameLayout,Param);

Param.addRule(RelativeLayout.CENTER_HORIZONTAL);
FrameLayout.addView(L2,Param);
RelativeParam.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
FrameLayout.addView(handpointer);

Drawable drawable = getResources().getDrawable(R.drawable.snail_menu); 
L1.setBackgroundDrawable(drawable);

this.setContentView(L1); 
```

真的感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:38:37.567

将您的按钮放在 XML 中，无论您想在运行时显示它的任何位置。并且只需使用`setVisibility`方法来显示或隐藏它。这不是可行的解决方案吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:50:27.193

尝试使用此代码创建动态视图，它可能会对您有所帮助

///最外层布局

```
RelativeLayout L1 = new RelativeLayout(this);
L1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

//对于线性布局上的图像重叠

```
FrameLayout FrameLayout = new FrameLayout(this);
RelativeLayout.LayoutParams RelativeParam = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); 
```

//在这里放置所有动态按钮 -vertical

```
TableLayout TL = new TableLayout(this);
TL.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

ImageView handpointer;
handpointer = new ImageView(this); 
```

//获取imageview并加载动画

```
handpointer.setImageDrawable(getResources().getDrawable(R.drawable.hand));

TableRow tr1 = new TableRow(this);
tr1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
TL.addView(tr1);
tr1.aadView(b1);

TableRow tr2 = new TableRow(this);
tr2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
TL.addView(tr2);
tr2.addView(handpointer);

TableRow tr3 = new TableRow(this);
tr3.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
TL.addView(tr3);
tr3.addView(b2);

RelativeLayout.LayoutParams Param = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

Param.setMargins(0, 70, 0, 0);
L1.addView(FrameLayout,Param);

Param.addRule(RelativeLayout.CENTER_HORIZONTAL);
FrameLayout.addView(TL,Param);
RelativeParam.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

Drawable drawable = getResources().getDrawable(R.drawable.snail_menu); 
L1.setBackgroundDrawable(drawable);

this.setContentView(L1); 
```

# sql-server - 在 SQL Server 中的文本和 varchar(MAX) 之间转换

> ID：10596871
> 
> 赞同：24
> 
> 时间：2012-05-15T08:28:19.680
> 
> 标签：sql-server

我对某些 SQL Sever 2008 R2 数据库具有只读访问权限，我需要将其某些表中的数据复制到我数据库中的表中；两个数据库具有相同的排序规则。

源数据库使用了很多`text`数据类型的列。我可以安全地在我的数据库中创建目标列`varchar(MAX)`并复制数据而没有任何风险（我正在使用 INSERT 语句复制数据）吗？

换句话说，我可以安全地将字符串数据从`text`type 列复制到`varchar(MAX)`? 两列使用相同的排序规则。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-15T08:38:58.170

是的，绝对 -`VARCHAR(MAX)`无论如何都是您应该使用的类型。`VARCHAR(MAX)`如果您担心的话，这两种类型的底层实现基本上是相同的（在足够大的数据上，或者在类型从 text 更改为 之后）。

`TEXT`您甚至可以通过以下方式将现有类型的列“转换”`VARCHAR(MAX)`为：

```
ALTER TABLE dbo.YourTableHere
ALTER COLUMN YourTextColumnHere VARCHAR(MAX) 
```

这会将您的`TEXT`列变成一`VARCHAR(MAX)`列而不会丢失任何数据。

尝试一下！（*当然，首先在现有数据库**的**副本***上）

# xcode - 自定义 Xcode 片段库

> ID：10596872
> 
> 赞同：7
> 
> 时间：2012-05-15T08:28:19.890
> 
> 标签：xcode, date, comments, code-snippets

感谢您阅读我的问题。

我想自定义我的 Xcode 片段库。

我读过这篇文章。 [http://www.icodeblog.com/2011/12/06/using-xcode-4-snippets/](http://www.icodeblog.com/2011/12/06/using-xcode-4-snippets/)

现在我想自定义我的评论，在我的评论文本之后自动插入日期（今天）。

前任：

```
//This is my comment --- 2012/05/15 
```

日期（2012/05/15）由 Xcode 自动生成。

这是可能的事情吗？

PS 我的 Xcode 版本是 4.3.2

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T22:44:09.517

作为一个片段？不可能。但是，您可以轻松地在*Automator**中*创建一个调用`date +%Y-%m-%d`.

# javascript - XMLHttpRequest.open() 异常处理

> ID：10596874
> 
> 赞同：5
> 
> 时间：2012-05-15T08:28:34.657
> 
> 标签：javascript, ajax, exception-handling, xmlhttprequest

我有以下一段代码（仅相关部分）：

```
xhttp=new XMLHttpRequest();
xhttp.open("GET",doc_name,false);
xhttp.send();
xmlDoc=xhttp.responseXML;
if(xmlDoc==null)
{
   xmlDoc=loadXMLDoc(defaultXml);
} 
```

这运行正常，因为如果指定的文件不存在，我会加载默认的 xml 文件，但如果文件不存在，则仅在控制台中显示 404 错误。（此错误不会反映在页面中除控制台之外的任何地方）。

我的问题是我应该如何检查这个异常&**当代码运行时是否有必要添加一段额外的代码来检查文件是否存在？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T08:31:55.213

您可以通过以下方式访问 HTTP 响应代码`xhttp.status`；`200`(OK) 或( `304`Not Modified) 通常被认为是成功的请求。

```
xhttp=new XMLHttpRequest();
xhttp.open("GET",doc_name,false);
xhttp.send();

if (xhttp.status === 200 || xhttp.status === 304) {
    xmlDoc=xhttp.responseXML;
    if(xmlDoc==null)
    {
       xmlDoc=loadXMLDoc(defaultXml);
    }
} 
```

确保您首先使用声明变量`var`，否则您将拥有隐式全局变量，这很糟糕。

还要确保您有充分的理由同步执行此操作；同步 XHR 在请求挂起时锁定浏览器。***强烈***建议将其设为异步。

对于您问题的第二部分，没有任何问题；只要您的应用程序可以处理异常。（这似乎是这样做的）

# jenkins - 如何查看 Jenkins 构建失败的原因？

> ID：10596883
> 
> 赞同：20
> 
> 时间：2012-05-15T08:29:09.733
> 
> 标签：jenkins

我正在尝试在新的 Jenkins 服务器上创建我的第一个 Jenkins 构建作业。在前两次尝试中，作业失败了；在我解决了这些问题之后，下一个构建（我通过单击“立即构建”手动请求）失败了 - 但没有给出构建错误。

我看到的唯一有用信息是构建状态页面上的“无更改”（和一个反复无常的修订 ID）。

如何查看构建失败的原因？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-15T08:49:46.097

没关系。我需要单击左侧的“控制台输出”链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-27T06:47:21.683

转到**项目页面**并单击**“构建历史”**中的失败构建号。

*   单击“控制台输出”，[控制台输出提供详细信息，例如带有时间戳的逐行构建执行序列、构建成功消息、构建失败消息、发生错误的文件位置详细信息、错误详细信息等。]

*   查找详细信息：发生错误的文件，错误详细信息。

    **你还是可以调查...**

*   点击“返回项目”

*   然后点击左侧的**Workspace ，进入指定的文件位置。**例如：data-mart-db/target/ [您可以在实际代码文件下方找到日志文件。]

*   一个个打开日志文件，到文件末尾（ctrl+end）。如果该文件中发生错误，将显示错误详细信息。

    **首先修复本地设置中的错误，然后再次签入到存储库**。

    快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T09:51:47.613

请注意，项目也有控制台输出，其中不包含任何有用的信息，但可能有单独的配置（默认情况下`default`），其中包含包含实际执行的控制台日志。

# php - 验证 FCKEditor 是否为空白

> ID：10596884
> 
> 赞同：0
> 
> 时间：2012-05-15T08:29:10.757
> 
> 标签：php, javascript, fckeditor

我正在尝试使用 JavaScript 验证 fckeditor 值是否为空白但没有运气。

我正在使用 javascript 创建编辑器：

```
var oFCKeditor = new FCKeditor('txtMessage');
                                                 oFCKeditor.BasePath = "../fckeditor/";
                                                 oFCKeditor.ToolbarSet = "Default";
                                                oFCKeditor.Height = "500";
                                                  oFCKeditor.Value = "test";
                                                oFCKeditor.Create(); 
```

但是当我使用时：

```
 if (document.form.txtMessage.value == "") {
      alert('You Must Enter a Message'); 
```

当编辑器是空的并提醒我并且我在其中写了一些东西时，它会一直提醒它是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:34:04.087

在这里检查

```
 <script type="text/javascript">
        function checksubmit() {        
            var FCKGetInstance = FCKeditorAPI.GetInstance('PageDescription');  
            var getText = FCKGetInstance.GetData(); 
            var StripTag = getText.replace(/(<([^>]+)>)/ig,"");
            if(StripTag=='') {
                alert("This is required field");
                return false;
            }
            else {
                alert(StripTag);
            }       
        }
     </script>

<input type="submit" name="submit" value="submit" onclick="javascript: return checksubmit();" /> 
```

# excel - Excel：如何清除除一张以外的所有工作表的内容

> ID：10596887
> 
> 赞同：1
> 
> 时间：2012-05-15T08:29:21.060
> 
> 标签：excel

我正在尝试清除 MS Excel 2010 中所有工作表的内容，“仪表板”除外，之后需要隐藏所有内容。包含 ClearContents 的第二行代码以问题开头。

我尝试将 ClearContents 更改为 Clear，但“运行时错误 '438'：对象不支持此属性或方法。它特别突出显示了 ws.Clear

```
' Clearing Contents
For Each ws In Worksheets
   If ws.Name <> "Dashboard" Then ws.ClearContents
Next

' Hiding sheets
For Each sh In ThisWorkbook.Worksheets
   If Not sh.Name = "Executive" Then sh.Visible = False
Next sh 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:21:25.487

问题是 Worksheet 对象没有一个`.Clear`或一个`.ClearContents`方法。这些是 Range 对象的方法。尝试这样的事情：

```
ws.UsedRange.ClearContents 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:22:07.937

你试过`ws.Cells.ClearContents`吗？

# visual-studio-2010 - 我在 Windows 注册表中找不到源代码控制键

> ID：10596888
> 
> 赞同：1
> 
> 时间：2012-05-15T08:29:23.547
> 
> 标签：visual-studio-2010

当我想创建自定义签入策略时，我安装了 Visual Studio 2010 终极版和 tfs2010，我无法在 Windows 注册表中找到源代码控制来添加字符串键和分配的 dll 文件。注册表路径是：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\TeamFoundation 请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:20:59.063

正确的位置是：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0\TeamFoundation\SourceControl\Checkin Policies] 
```

有关签入策略和 TFS/VS 2010 的更多信息，请参阅[此帖子](http://blogs.teamfoundation.co.za/2011/04/custom-check-in-policies-for-tfs-2010.html)

# ruby-on-rails - Rails 3 应用程序的 SaaS 基础架构

> ID：10596892
> 
> 赞同：1
> 
> 时间：2012-05-15T08:29:49.470
> 
> 标签：ruby-on-rails, ruby, heroku, saas

我需要制作一个 Rail 3 应用程序“SaaS”。我知道对多租户/数据分离等有不同的看法。目前我正在使用“总数据分离”选项，在每次注册时，我都会启动一个新的 Heroku 应用程序。我有一个启动页面，位于 mydomain.com 和 www.mydomain.com。我还有 CNAME 条目（在 Zerigo 中）*.mydomain.com 指向 proxy.heroku.com（Heroku Mesh）。我也浏览过这个链接 - [Ruby on Rails：如何设计 SaaS 基础架构？](https://stackoverflow.com/questions/6961677/ruby-on-rails-how-to-design-a-saas-infrastructure). 我的要求几乎与此相同。我了解当新用户注册 SaaS 时应执行以下操作 -

1.  选择应用名称：app-name.mydomain.com
2.  用户名/密码/角色（可选）和定价选项
3.  然后将代码部署到一个新的 Heroku 实例（并且可以通过[https://github.com/darkbushido/heroku-rails-saas](https://github.com/darkbushido/heroku-rails-saas)简化重复的 Heroku 任务）
4.  添加 Heroku 域：添加 .mydomain.com
5.  使用 Heroku config:add 添加步骤 #2 中的选项

一切看起来都很好。但问题是，我们可以自动化这个过程吗？我在[http://rubydoc.info/gems/s](http://rubydoc.info/gems/s)中看到了一些相关的宝石，但不确定它们。任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:49:52.167

我看不出为什么不能自动化它的原因。它可以在后台作业中完成（当用户注册时）。在该工作中，您可以使用 heroku gem。查看[https://github.com/heroku/heroku/blob/master/lib/heroku/client.rb](https://github.com/heroku/heroku/blob/master/lib/heroku/client.rb)以查看您可以调用的方法。

以下示例列出了一个帐户的所有 Heroku 应用程序：

```
require "heroku"
heroku = Heroku::Client.new("email@example.com", "password")

# List all heroku apps
heroku.list.each do |app|
  puts app[0]
end 
```

我希望这有帮助！

# python - 将 Django 部署到 Heroku（Psycopg2 错误）

> ID：10596893
> 
> 赞同：9
> 
> 时间：2012-05-15T08:30:01.280
> 
> 标签：python, django, postgresql, deployment, heroku

所以我正在关注heroku with django的入门指南。但是，当我运行此命令时：

```
heroku run python manage.py syncdb 
```

我收到这个错误

```
psycopg2.OperationalError: could not connect to server: Connection refused
Is the server running on host "localhost" and accepting
TCP/IP connections on port 5432? 
```

我认为这意味着数据库尚未设置......所以我也手动添加了 shared_db 选项：

```
heroku addons:add shared-database:5mb 
```

但是..我仍然得到同样的错误。是什么赋予了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T22:45:19.293

**编辑：**

正如@mipadi 在这里指出的那样（http://stackoverflow.com/questions/13001031/django-heroku-settings-injection/13092534），它实际上可以像这样简单：

```
import dj_database_url

DATABASES = {'default' : dj_database_url.config() } 
```

如果您设置了 DATABASE_URL 环境变量，则此方法有效。heroku:pg_promote 让你在那里。详情如下

* * *

确保你的 Heroku 上有 Postgres

```
heroku addons:add heroku-postgresql:dev 
```

第 1 步：找出您的数据库 url

```
heroku config | grep POSTGRESQL 
```

输出将如下所示：

> HEROKU_POSTGRESQL__URL: postgres://user:password@host:5432/blabla

第 2 步：从上一步中获取设置名称（例如，HEROKU_POSTGRESQL_ROSE_URL）并将其放入您的设置文件中，如下所示

```
DATABASES = {'default': dj_database_url.config(default=os.environ["HEROKU_POSTGRESQL_ROSE_URL"])} 
```

[更新] 正如 Ted 所指出的，有一种方法可以将颜色 URL 提升为 DATABASE_URL 变量：

```
heroku pg:promote HEROKU_POSTGRESQL_ROSE_URL 
```

然后，您的数据库设置可以使用 DATABASE_URL 而不是更具异国情调的彩色 URL

```
DATABASES = {'default': dj_database_url.config(default=os.environ["DATABASE_URL"])} 
```

鲍勃是你的叔叔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:30:36.667

我自己通过将以下代码添加到 settings.py 来让它工作，似乎出于某种原因 Heroku 没有为我添加它......

通常它总是动态地在 Heroku 上添加代码，但我猜在 django 1.4 之后由于某种原因它不再这样做了。或者我只是做错了什么。

无论如何，这是将其附加到您的 settings.py 的代码，它应该像以前一样工作。

```
import sys
import urlparse
import os

# Register database schemes in URLs.
urlparse.uses_netloc.append('postgres')
urlparse.uses_netloc.append('mysql')

try:

    # Check to make sure DATABASES is set in settings.py file.
    # If not default to {}

    if 'DATABASES' not in locals():
        DATABASES = {}

    if 'DATABASE_URL' in os.environ:
        url = urlparse.urlparse(os.environ['DATABASE_URL'])

        # Ensure default database exists.
        DATABASES['default'] = DATABASES.get('default', {})

        # Update with environment configuration.
        DATABASES['default'].update({
            'NAME': url.path[1:],
            'USER': url.username,
            'PASSWORD': url.password,
            'HOST': url.hostname,
            'PORT': url.port,
        })
        if url.scheme == 'postgres':
            DATABASES['default']['ENGINE'] = 'django.db.backends.postgresql_psycopg2'

        if url.scheme == 'mysql':
            DATABASES['default']['ENGINE'] = 'django.db.backends.mysql'
except Exception:
    print 'Unexpected error:', sys.exc_info() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T03:12:28.443

我的应用程序结构关闭了...... heroku 希望结构看起来像这样：

```
toplevel
  requirements.txt
  myapp
    manage.py
    all other django stuff 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T07:30:02.713

我遇到了同样的问题，我就是这样解决的

Step1：按照Phillip的Step 1获取数据库名称（颜色）

第2步：

```
$ heroku pg:promote HEROKU_POSTGRESQL_<COLOR> 
```

导致输出

```
Promoting HEROKU_POSTGRESQL_<COLOR> to DATABASE_URL... done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T22:16:30.363

您需要将此添加到您的 requirements.txt 中：

```
psycopg2 
```

默认情况下，Heroku 配置一个 Postgres 数据库并将代码注入您的 settings.py (https://devcenter.heroku.com/articles/django#postgres_database_config)。这从环境变量 DATABASE_URL 中读取，但确实需要安装 psycopg2。

# c# - 复选框更改

> ID：10596894
> 
> 赞同：0
> 
> 时间：2012-05-15T08:30:06.193
> 
> 标签：c#, silverlight, checkbox

我有一个复选框，当它被选中时，会触发对 Web 服务的调用。

这工作正常，因为它在按预期更新的数据库中使用切换功能。

但是我的问题是当用户取消选中复选框时我需要激活切换功能。

由于某种原因，这似乎不会触发数据库中的切换功能。我正在使用以下代码 -

```
 private void checkBox1_Checked(object sender, RoutedEventArgs e)
    {

        if (checkCounter1 == 0)
        {

        }
        else
        {
            //WebService call
        }
        checkCounter1 = 1;
    } 
```

我尝试了 checkBox_Changed 事件，但这不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:33:11.687

自是`SL`或多或少`WPF`。这就是为什么我认为在 SL 中就像 WPF 一样应该有`Checked`事件`UnChecked`。

像这样为这两个事件分配单个事件代码（因为两者都采用相同的参数）

```
private void checkBox1_Checked_Unchecked(object sender, RoutedEventArgs e)
{
    if (checkBox1.IsChecked)
    {
        //WebService call
    }
    else
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:33:02.233

试试复选框的`CheckBox1.IsChecked`or`CheckBox1.Checked`属性，看看它们是否在事件函数中被选中。

# java - 临时表的postgresql线程安全

> ID：10596896
> 
> 赞同：5
> 
> 时间：2012-05-15T08:30:18.710
> 
> 标签：java, postgresql

这是我用于创建临时表的语法：

```
create temp table tmpTable (id bigint not null, primary key (id)) on commit drop; 
```

我知道这意味着在每个事务结束时，该表将被删除。我的问题是，如果同一会话上的两个或多个线程创建并将值插入临时表中，它们会各自获得自己的实例还是在会话中共享临时实例？如果它是共享的，有没有办法让它每个线程都本地化？

谢谢内塔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T09:52:18.837

临时表对同一会话中的所有操作都是可见的。因此，在删除存在的临时表之前，您**不能****在同一会话中**创建同名的临时表（在您的情况下提交事务）。

您可能想使用：

```
CREATE TEMP TABLE tmptbl IF NOT EXISTS ... 
```

[更多关于`CREATE TABLE`手册。](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)

* * *

### 独特的临时表

要使每个“线程”（在同一会话中）的临时表本地化，您需要使用**唯一的表名**。一种方法是使用未绑定的`SEQUENCE`动态 SQL - 在 plpgsql 之类的过程语言或 DO 语句中（在不存储函数的情况下基本相同。

运行一：

```
CREATE SEQUENCE myseq; 
```

利用：

```
DO $$
BEGIN
EXECUTE 'CREATE TABLE tmp' || nextval('myseq')  ||'(id int)';
END;
$$ 
```

要知道最新的表名：

```
SELECT 'tmp' || currval('myseq'); 
```

或者将其全部放入一个 plpgsql 函数中并返回表或重用表名。

但是，所有进一步的 SQL 命令都必须动态执行，因为普通 SQL 语句使用硬编码的标识符进行操作。因此，最好将其全部放入 plpgsql 函数中。

* * *

### 使用相同临时表的唯一 ID

另一种可能的解决方案是为同一会话中的所有线程使用**相同的临时表****`thread_id`**，并向表中添加一列。如果您大量使用该功能，请务必为该列编制索引。然后使用唯一的`thread_id`每个线程（在同一会话中）。

只有一次：

```
CREATE SEQUENCE myseq; 
```

每个线程一次：

```
CREATE TEMP TABLE tmptbl(thread_id int, col1 int) IF NOT EXISTS;
my_id :=  nextval('myseq'); -- in plpgsql
-- else find another way to assign unique id per thread 
```

SQL：

```
INSERT INTO tmptbl(thread_id, col1) VALUES
(my_id, 2), (my_id, 3), (my_id, 4);

SELECT * FROM tmptbl WHERE thread_id = my_id; 
```

# silverlight - Windows 8 GridView 多选项目

> ID：10596909
> 
> 赞同：1
> 
> 时间：2012-05-15T08:31:07.633
> 
> 标签：silverlight, xaml, gridview, windows-8

我正在为 Windows 8 开发应用程序，我想在 GridView 中选择多个项目（通过 c# 代码），我试过这个：

第一

```
for (int i = 0; i <= 2; i++)
{ 
    this.ItemGridView.SelectedIndex = i;
}

//in this way is only selects the third element 
```

第二

```
this.ItemGridView.SelectedItem = listPeople;

//in this way does not select anything 
```

第三

```
foreach (Persona persona in listaPersone)
{
    this.ItemGridView.SelectedItem = person;
}

//in this way is selected only the last 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:08:49.407

你可以试试这个

假设“listPeople”是您要选择的集合。

```
foreach(var p in listPeople)
{
    this.ItemGridView.SelectedItem.Add(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:48:03.680

我没有尝试过 Win8，但这样的东西应该可以工作：

```
this.ItemGridView.MultiSelect = true;

foreach (GridViewRow row in this.ItemGridView.Rows)
{
    row.Selected = selection.Contains(row.Cells[0].Value);
} 
```

# c# - 使用实体框架提高效率

> ID：10596910
> 
> 赞同：5
> 
> 时间：2012-05-15T08:31:15.637
> 
> 标签：c#, .net, entity-framework

我一直在使用带有 POCO First 方法的实体框架。我几乎遵循了 Steve Sanderson 在他的“Pro ASP.NET MVC 3 Framework”一书中描述的模式，使用 DI 容器和 DbContext 类连接到 SQL Server。

SQL Server 中的基础表包含不同应用程序使用的非常大的数据集。因此，我不得不为我的应用程序中需要的实体创建视图：

```
class RemoteServerContext : DbContext
{
    public DbSet<Customer> Customers { get; set; }
    public DbSet<Order> Orders { get; set; }
    public DbSet<Contact> Contacts { get; set; }
    ...

    protected override void  OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Customer>().ToTable("vw_Customers");
        modelBuilder.Entity<Order>().ToTable("vw_Orders");
        ...
    }
} 
```

这似乎可以满足我的大部分需求。

我遇到的问题是，其中一些视图中有大量数据，因此当我调用类似以下内容时：

```
var customers = _repository.Customers().Where(c => c.Location == location).Where(...); 
```

它似乎正在带回整个数据集，这可能需要一些时间才能使 LINQ 查询将数据集减少到我需要的数据集。当标准仅适用于少数记录并且我从 SQL 服务器获取整个数据集时，这似乎非常低效。

我试图通过使用存储过程来解决这个问题，例如

```
public IEnumerable<Customer> CustomersThatMatchACriteria(string criteria1, string criteria2, ...) //or an object passed in!
{
    return Database.SqlQuery<Customer>("Exec pp_GetCustomersForCriteria @crit1 = {0}, @crit2 = {1}...", criteria1, criteria2,...);
} 
```

虽然这要快得多，但这里的问题是它不返回 DbSet，因此我失去了我的对象之间的所有连接，例如，即使我包含它们的 ID，我也无法引用任何关联的对象，例如订单或联系人因为返回类型是“客户”的集合，而不是它们的 DbSet。

有没有人有更好的方法让 SQL Server 进行查询，这样我就不会传递大量未使用的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:48:08.033

> ```
> var customers = _repository.Customers().Where(c => c.Location == location).Where(... 
> ```

如果`Customers()`返回`IQueryable`，则仅此语句实际上根本不会“带回”任何内容-调用`Where`an`IQueryable`会给您另一个`IQueryable`，并且直到您执行导致查询执行的某些操作（例如`ToList`，或`FirstOrDefault`），才会真正执行任何操作并且结果返回。

但是，如果此`Customers`方法返回实例化对象的集合，那么是的，因为您要求所有对象都得到它们。

我从来没有使用过代码优先或什至存储库模式，所以我不知道该建议什么，除了`IQueryable`尽可能长时间地停留在领域，并且只有在你应用了所有之后才执行查询相关过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:00:59.197

如果只返回一组数据，我会采取以下措施：

```
var customers = (from x in Repository.Customers where <boolean statement> &&/|| <boolean statement select new {variableName = x.Name , ...).Take(<integer amount for amount of records you need>); 
```

例如：

```
var customers = (from x in _repository.Customers where x.ID == id select new {variableName = x.Name} ).take(1000); 
```

然后遍历结果以获取数据：（请记住，linq 语句返回一个 IQueryable）...

```
foreach (var data in customers)
{
   string doSomething = data.variableName; //to get data from your query.
} 
```

希望这会有所帮助，不完全相同的方法，但我发现这在我的代码中很方便

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:05:14.450

可能是因为您的存储库中的 Cusomters() 方法正在执行 GetAll() 类型的事情并首先获取整个列表。这会禁止 LINQ 和您的 SQL Server 创建智能查询。

我不知道您的存储库是否有一个好的解决方法，但如果您愿意这样做：

```
using(var db = new RemoteServerContext())
{
  var custs = db.Customers.Where(...);
} 
```

我认为这会快很多。如果您的项目足够小，则无需存储库即可。当然，你会失去一个抽象层，但对于小型项目，这可能不是一个大问题。

另一方面，您可以一次将所有客户加载到您的存储库中并直接使用生成的集合（而不是填充列表的方法调用）。但要小心添加、删除和修改客户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:41:15.543

您需要 LINQ 查询返回较少的数据，例如 sql 分页，如 sql`top`中的函数或使用存储过程进行手动查询。无论哪种情况，您都需要重写查询机制。这也是我没有使用 EF 的原因之一，因为你对看起来的代码没有太多的控制权。

# c - 开发板的ARM组装

> ID：10596917
> 
> 赞同：3
> 
> 时间：2012-05-15T08:31:52.577
> 
> 标签：c, assembly, embedded, arm

我目前正在使用连接了应用板的 LPC 2378。风扇上有几个组件，其中两个是风扇和加热器。

如果端口 4 的位 6 和 7 连接到风扇（电机控制器），则以下代码将打开风扇：

```
 FanOn
  STMFD r13!,{r0,r5,r14}      ; Push r0, r5 and LR
  LDR R5, =FIO4PIN            ; Address of FIO4PIN
  LDR r0, [r5]                ; Read current Port4
  ORR r0, r0, #0x80
  STR r0, [r5]                ; Output
  LDMFD r13!,{r0,r5,r14}      ; Pop r0, r5 and LR
  mov pc, r14                 ; Put link register back into PC 
```

如何重写此代码块以打开连接到端口 4 的位 5 的加热器，（将该位设置为 1 将打开它，将其设置为 0 将其关闭）。

回答问题后编辑：

```
;==============================================================================
; Turn Heater On
;==============================================================================
heaterOn
  STMFD r13!,{r0,r5,r14}      ; Push r0, r5 and LR
  LDR R5, =FIO4PIN            ; Address of FIO4PIN
  LDR r0, [r5]                ; Read current Port4
  ORR r0, r0, #0x20
  STR r0, [r5]                ; Output
  LDMFD r13!,{r0,r5,r14}      ; Pop r0, r5 and LR
  mov pc, r14                 ; Put link register back into PC     
;==============================================================================
; Turn The Heater Off
;==============================================================================        
heaterOff
  STMFD r13!,{r0,r5,r14}      ; Push r0, r5 and LR
  LDR R5, =FIO4PIN            ; Address of FIO4PIN
  LDR r0, [r5]                ; Read current Port4
  AND r0, r0, #0xDF
  STR r0, [r5]                ; Output
  LDMFD r13!,{r0,r5,r14}      ; Pop r0, r5 and LR
  mov pc, r14                 ; Put link register back into PC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:39:50.937

`ORR`指令打开一点，`#0x80`常数确定位（在这种情况下，只有位 7 被打开）。要关闭该位，您将需要一个 AND 指令并计算适当的掩码（例如，要关闭位 7，您将与常量#0x7F 进行与）。位 5 的适当常数是`#0x20`和`#0xDF`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:40:00.193

据我了解代码，风扇仅连接到第 7 位（如果位从 0 开始计算）。

以下行负责打开风扇位：

```
ORR r0, r0, #0x80 
```

您将“掩码”中为 1 的所有位设置为 1。由于掩码是`0x80`，即`1000 0000`二进制，它只打开第 7 位。

现在，如果您需要打开加热器而不是风扇，并且您必须设置位 5 而不是 7（在同一端口上），您只需更改该行中的掩码。新掩码应该是`0010 0000`二进制的，即`0x20`六进制，所以新代码应该是：

```
ORR r0, r0, #0x20 
```

此外，如果您想稍后关闭加热器，您可以通过仅取消设置第 5 位来实现，方法是使用除第 5 位之外的所有位置都为 1 的掩码进行与运算。如果按位和的助记符是`BIC`，则该行将是：

```
BIC r0, r0, 0xDF 
```

现在，我已经好几个月没有进行任何组装了，但如果我没记错的话，你提供的代码片段实际上是一个子例程。你可以从你的主要功能中调用它，比如`call`地址`FanOn`。而且，对我来说，似乎子程序很好，因为它保留了它使用的所有寄存器，例如它在第一行将它们推送到堆栈并最终恢复它们。

因此，要重用代码，您可以编写一个新的子程序来打开加热器，如果您愿意，可以编写一个新的子程序来关闭每个东西，并且只更改每个子程序的标签/子程序名称，例如`FanOff`，`HeaterOn`...

由于它们都保留了所有寄存器，因此您可以按顺序使用它们而无需担心。

# sql - 子选择的 SQL 查询问题

> ID：10596919
> 
> 赞同：0
> 
> 时间：2012-05-15T08:32:04.233
> 
> 标签：sql, subquery

我有以下问题，我有 2 张桌子`USER`和`MESSAGES`. 是表中`User.ID`的 FK in 字段。`MESSAGES.CREATED_BY``Messages`

我已经用 INNER JOIN 加入了 2 个表，但我想在我的 SELECT 中显示表中的`messages.Created_BY`哪一`User.Loginname`列`USER`？根据返回太多数据的错误，子选择不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:36:29.340

```
SELECT messages.id, messages.body, u.Loginname AS Created_by FROM messages m
JOIN user u ON (m.created_by=u.id) 
```

将字段名称 messages.id、messages.body 和 user.id 更改为您拥有的名称。

# javascript - Jquery：.submit 不工作

> ID：10596921
> 
> 赞同：3
> 
> 时间：2012-05-15T08:32:04.833
> 
> 标签：javascript, jquery, html, javascript-events

我正在使用 Jconfirm 和 Jquery 来制作一个确认框。
问题是 .submit 不起作用

### Javascript

```
$('#delete').submit(function(e) {
e.preventDefault();
jConfirm("Are you sure you want to delete this link?", "Confirmation", function(r) {  
if (r) { $('#delete').submit(); }
}); 
```

$('#delete').submit(); 似乎已经死了。

### HTML

```
<form action="bla.php" method="post" accept-charset="utf-8" id="delete">
 <table>
<tr>
<td><label for="category">Category:</label></td><td><select name="category_id"           id="categories">
<option value="1">test</option>
<option value="#" selected="selected">Please select</option>
</select></td>
</tr>
<tr>
<td><label for="links">Link:</label></td><td width="400"><select name="link_id" id="links">
<option value="#" selected="selected">Please select</option>
</select></td>
</tr>
<tr>
<td></td><td><input type="submit" value="Delete" ></td>
</tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T08:34:03.420

尝试改变

```
if (r) { $('#delete').submit(); } 
```

和

```
if (r) { $('#delete').get(0).submit(); } 
```

所以你调用`submit()`可用于 DOM 元素的方法

# intel-ipp - IPP - 英特尔性能集成原语

> ID：10596930
> 
> 赞同：4
> 
> 时间：2012-05-15T08:32:29.677
> 
> 标签：intel-ipp

IPP 是否对其处理的数据有任何要求，例如对齐等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:19:58.533

在 Windows 上，使用 x86 二进制文件（到目前为止我只使用了这些），您不需要对齐内存，但 userguide_win_ia32.pdf 文档在第 7 章（来自 IPP v6.1）中简要提到了对齐：

```
Memory Alignment

The performance of Intel IPP functions can be significantly different
when operating on aligned or misaligned data. Access to memory is faster
if pointers to the data are aligned.  Use the following Intel IPP
functions for pointer alignment, memory allocation and deallocation: 
```

使用一些引用的函数：[参见 ippMalloc、ippAlignPtr、ippFree 等...]。

底线是，对齐可以帮助提高性能，但是在您对对齐和不对齐进行分析之前，您不会知道到什么程度。

# linux - 重定向程序输出而不更改目录

> ID：10596936
> 
> 赞同：1
> 
> 时间：2012-05-15T08:33:01.250
> 
> 标签：linux, bash, scripting

## 问题

我正在编写一组脚本来帮助在集群上自动执行批处理作业。我所拥有的具体事物是一个`$OUTPUT_DIR`，并且是一个任意的`$COMMAND`。
我想执行`$COMMAND`它的输出以`$OUTPUT_DIR`. 例如，如果`COMMAND='cp ./foo ./bar; mv ./bar ./baz'`，我想运行它以使最终结果等于`cp ./foo ./$OUTPUT_DIR/baz`。理想情况下，解决方案看起来像`eval PWD="./$OUTPUT_DIR" $COMMAND`，但这不起作用。

## 已知解决方案

[还有他们的问题]

*   编辑`$COMMAND`：在大多数情况下，该命令将是一个脚本，或一个编译的 C 或 FORTRAN 可执行文件。改变这些的内部结构不是一种选择。
*   unionfs、aufs 等：虽然这基本上是完美的，但运行它的用户不会有 root，并且导致数千次任意挂载似乎是一个值得商榷的选择。
*   复制/硬/软链接：这可能是我必须使用的解决方案：实际上将整个内容复制`./`到`./$OUTPUT_DIR`
*   `cd $OUTPUT_DIR; ../$COMMAND``$COMMAND`:读取文件失败
*   管道：仅在`$COMMAND`不直接处理文件时才有效；它通常会这样做

是否有我缺少的另一种解决方案，或者这个请求实际上是不可能的？

## [编辑：]选择的解决方案

我打算将目录中的每个对象符号链接到输出目录，然后从那里运行命令。这有创建大量符号链接的缺点，但应该不会太糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:52:55.317

如果不对`$COMMAND`. `$OUTPUT_DIR`“输出最终以”的含义没有单一的定义。对于一个程序，这可能是一些文件，但另一个程序可能只是将某些内容打印到 stdout，而另一个程序可能会尝试使用某种协议通过 Internet 发送一些数据或在 GUI 中显示某些内容，并且没有一种明显的方法来映射所有内容这些到“输出到`$OUTPUT_DIR`”。

So, you need to invent some assumptions and require any `$COMMAND` implementation to follow them. Then, it may get as simple as requesting that the command accept a parameter such as `--target=<DIR>`. If your command was some simple command, you would have to create a wrapper script around it to translate that parameter into what the app accepts. `cp`, `mv` and a few more utils already accept the parameter `--target`, so that may be a good starting point.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:53:30.443

You cannot set the output directory, you can only set the working directory.

The problem is, once you set the working directory, other references are going to be invalid. For example in your code `foo`:

`cp ./foo ./bar`

If you have a *specific* command, there are workarounds (creating a script that alters arguments, prepending the directory to specific arguments), but in general this is not possible.

# c# - 即使不使用回发也可以填充 Gridview 吗？

> ID：10596943
> 
> 赞同：0
> 
> 时间：2012-05-15T08:33:29.583
> 
> 标签：c#, asp.net, gridview

[这是关于我的第一个问题](https://stackoverflow.com/questions/10596600/c-sharp-2nd-dropdown-list-cant-retain-the-selected-item)的第二个选择，我在谷歌上进行了很多搜索并尝试了几次。您是否认为可以在**不从下拉列表中进行任何回发的情况下填充网格视图**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:00:31.097

使用更新面板和脚本管理器。更改更新面板的属性 Update mod 有条件的。当您需要“updatepanel.Update()”或选择您的触发器时，您可以调用它，它会自动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:37:26.290

不，您需要以某种传统形式或使用 AJAX 的回发。这类事情发生在服务器中，这就是您需要回发的原因。或者您可以使用广泛的 Javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:10:16.727

您可以使用 JavaScript 并绘制整个 gridview，因为 gridview 是一个包含列和行的表格。

# asp.net - 我可以从 div onclick 事件中调用函数背后的代码吗？

> ID：10596944
> 
> 赞同：3
> 
> 时间：2012-05-15T08:33:31.480
> 
> 标签：asp.net, vb.net

我的页面上有一堆在运行时动态添加的 div。当点击任何动态添加的 div 时 - 都需要在我的代码中调用相同的函数。每个 div 都必须将它自己的 ID 传递给函数。我不能使用 web 方法，因为该函数需要识别单击了哪个 div，然后显示/隐藏/填充页面上的其他控件。

干杯伙计们

标题控件和其他东西去这里

```
 <div id="div_Footer" class="HoverEdit" title="Click To Edit" runat="server" onclick="EditDiv(div_Footer)">
        Footer Controls and stuff go here
    </div> 
```

然后在后面的代码中：

```
Sub EditDiv(ID_ofDiv As String)

    'Do some stuff to the controls on the page
    'Swapping tabs, showing /hiding controls etc.

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:56:05.860

我不习惯编写 VB 代码，所以我的示例是用 C# 编写的，但也许它可以帮助您入门。这可能不是实现这一点的最干净的方法，但我会试一试：

**HTML**

```
 <div id="div_Footer" class="HoverEdit" title="Click To Edit" runat="server" onclick="EditDiv(this)">
        Footer Controls and stuff go here
    </div> 
```

**客户**

```
<script type="text/javascript">
function EditDiv(s,e){
var id = $(s).attr("id");
__doPostBack(id,id);
}
</script> 
```

**服务器**

```
private void Page_Load(object sender, EventArgs e)
{
   var arg = Request.Form["__EVENTTARGET"]; 'this will be empty on your first page request, but if the user click a div it will cause a postback to server, so this event will be fired again and will contain the div ID.

   if(arg != null)
   {
      string divID = (string)arg;
      'call your method with the argument.
   }
} 
```

可以在此处找到有关此的更多信息：

[http://wiki.asp.net/page.aspx/1082/dopostback-function/](http://wiki.asp.net/page.aspx/1082/dopostback-function/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:20:54.463

您可以从 javascript 创建回发。一种方法是制作一个按钮或链接按钮并向其添加点击事件。添加**样式=“显示：无；”** 并强制 Div 在按钮点击时回发。

```
<div id="div_Footer" class="HoverEdit" title="Click To Edit" runat="server" onclick="EditDiv(this)">
    Footer Controls and stuff go here
</div>
//Javascript
function EditDiv()
{
   // do your code
   __doPostBack('ButtonAID','')
} 
```

可以在下面的文章中找到一个很好的解释。 [使用 JavaScript 的 ASP.NET 回发](https://stackoverflow.com/questions/1305954/asp-net-postback-with-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:03:44.260

在@Tim Schmelter 发布的[链接](http://forums.asp.net/t/1090438.aspx/1)的帮助下，我尝试了以下操作。这太棒了：

标记：

```
<div id="div1" runat="server" style="height:100px;width:100px;">click me</div> 
```

代码：

```
public class MyPage  
      Inherits System.Web.UI.Page
      Implements IPostBackEventHandler

Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)
    div1.Attributes("onclick") = 
         Me.Page.ClientScript.GetPostBackEventReference(Me, "div1_clicki")
End Sub

Protected Sub Div1_Click()
    'do your stuff
    div1.InnerHtml="div1 clicked"
End Sub

'Private Members As IPostBackEventHandler
Public Sub RaisePostBackEvent1(ByVal eventArgument As String) Implements 
                    IPostBackEventHandler.RaisePostBackEvent
    If eventArgument = "div1_click" Then
            div1_click()
        End If
    End If
End Sub 
```

# java - 调试时无法解析类

> ID：10596945
> 
> 赞同：0
> 
> 时间：2012-05-15T08:33:35.040
> 
> 标签：java, eclipse, debugging, jakarta-ee

我正在使用 Eclipse 调试在 JBoss 6 上运行的 Java Web 应用程序。我不是远程调试。当我尝试检查任何变量（字符串等）的值时，我收到消息“无法解析类型 javax.el.E​​LResolver。它是从所需的 .class 文件间接引用的”。

奇怪的是，问题只发生在检查变量时。应用程序本身似乎没有错过任何课程。

如何使检查变量值再次起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:40:34.383

这是因为 Eclipse 无法定位 JBoss 运行时。将 JBoss 运行时添加到类路径：

项目-> 属性-> Java 构建路径-> 库-> 添加库-> JBoss 运行时

# android - 对于 MyActivity 类型，方法 getFragmentManager() 未定义

> ID：10596946
> 
> 赞同：8
> 
> 时间：2012-05-15T08:33:37.620
> 
> 标签：android, methods, fragment

因为我一直在使用我的代码，所以我使用了片段。

为此，我有一个活动通过标签使用片段调用片段：

```
FluxListFragment FLF = (FluxListFragment) getFragmentManager().findFragmentByTag(FRAG_LIST); 
```

但是从今天开始，getFragmentManager 好像就认不出来了。它说 ：

```
"The method getFragmentManager() is undefined for the type FluxMainActivity" 
```

问题来自构建目标吗？（我放的是安卓3.0）

这是代码：

```
public Class FluxMainActivity extends Activity {

@override
public void onCreate(Bundle saveInstanceState)
{
    super.onCreate();
    setContentView(R.layout.main);
    FluxListeFragment FLF = (FluxListeFragment)getFragmentManager().findFragmentByTag(FRAG_LISTE);    
}

} 
```

该方法应该链接到 FluxListeFragment 而不是 FluxMainActivity ！我认为演员阵容不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:45:13.000

问题解决了。

项目目标在 API 11 中，但它包含 2 个库，其中一个在目标 API 8 中。

# php - 如何将ajax排序结果带入html div

> ID：10596947
> 
> 赞同：0
> 
> 时间：2012-05-15T08:33:39.333
> 
> 标签：php, javascript, mysql, html, ajax

嗨，我已经做了一些`AJAX`PHP&MySQL 排序，它给了我结果，如下面的代码所示，我的问题是**如何将 $result 带入 html `divs`。**

请帮忙

**使用的 PHP 代码**

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("security_software", $con);

$sql="SELECT * FROM internet_security ORDER by '".$q."' DESC" ;

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>id</th>
<th>title</th>
<th>image</th>
<th>description</th>
<th>rating</th>
<th>download</th>
<th>buy</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['id'] . "</td>";
  echo "<td>" . $row['title'] . "</td>";
  echo "<td>" . $row['image'] . "</td>";
  echo "<td>" . $row['description'] . "</td>";
  echo "<td>" . $row['rating'] . "</td>";
  echo "<td>" . $row['download'] . "</td>";
  echo "<td>" . $row['buy'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

**我想要这些 HTML Div 的结果**

```
<div class="category-container">
    <div class="category-image"></div>
    <div class="category-link"><a href="#">#</a></div>
    <div class="category-desc"><p>#</p> </div>          
    <div class="rating5" >Editors' rating: </div>        
    <div class="category-download-btn"><a href="#">Download </a></div><
    <div class="category-buy-btn"><a href="#">Buy</a></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:25:36.693

我不知道您为什么在返回 ajax 响应时创建表。我建议您通过 ajax 创建 json 响应。使用此结果 JSON，您可以创建表，也可以在 html 中呈现它们。在发送 ajax 请求的 php 代码中：ajax.php

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("security_software", $con);

$sql="SELECT * FROM internet_security ORDER by '".$q."' DESC" ;

$result = mysql_query($sql);
$response = array();
$i=0;
while($row = mysql_fetch_array($result))
  {
  $response[$i]['id']           =$row['id'];
  $response[$i]['title']        = $row['title'];
  $response[$i]['image']        = $row['image'];
  $response[$i]['description']  = $row['description'];
  $response[$i]['rating']       = $row['rating'];
  $response[$i]['download']     = $row['download'];
  $response[$i]['buy']          = $row['buy'];
  $i++;
  }
mysql_close($con);

echo json_encode($response);
?> 
```

在您获得此 ajax 响应的 html 文件中，我提示您如何使用此 ajax 响应：

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript">
    $.ajax({
        url: 'ajax.php',
        dataType: 'json',
        success: function(response){
            data = '';
            $.each(response,function(i,val){
              data = '<div class="category-image">'+val.image+'</div>'+
            '<div class="category-link"><a href="#">'+val.id+'</a></div>'+
            '<div class="category-desc"><p>'+val.description+'</p> </div>'+
            '<div class="rating5" >'+val.rating+'</div>'+ 
            '<div class="category-download-btn"><a href="'+val.download+'">Download </a></div>'+
            '<div class="category-buy-btn"><a href="'+val.buy+'">Buy</a></div>';
            $('<div>').attr('id',i).html(data).appendTo('#response');
        });
            });
        }
    });
  </script>
</head>

<body>
<div id='response'></div>   
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:39:20.797

如果您想在这些 div 中提取结果，则使用相同的 div 而不是 table/tr/tds，或者您可以通过接收 json/xml 或任何类型的基于对象的数据来绑定它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:49:57.900

我倾向于将此视为一个笑话，因为数据库称为“security_software”，并且您将 GET var 直接放入数据库查询中而无需进行任何清理。在将数据库吐回页面之前，您也没有尝试清理来自数据库的任何内容......

无论如何，假设这不是一个玩笑，以下内容应该为您指明正确的方向：

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', '');
if (!$con) {
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("security_software", $con);

$sql="SELECT * FROM internet_security ORDER by '".$q."' DESC" ;

$result = mysql_query($sql);

while($row = mysql_fetch_array($result)) {
    echo '<div class="category-image"><img src="' $row['image'] . '</div>';
    echo '<div class="category-link"><a href="#">' . $row['title'] . '</a></div>';
    echo '<div class="category-desc"><p>' . $row['description'] . '</p></div>';        
    echo '<div class="rating5" >Editors' rating: ' . $row['rating'] . '</div>';       
    echo '<div class="category-download-btn"><a href="' . $row['download'] .'">Download</a></div>';
    echo '<div class="category-buy-btn"><a href="' . $row['buy'] . '">Buy</a></div>';
 }
echo "</table>";

mysql_close($con);
?> 
```

# iphone - 艺术家专辑数量

> ID：10596950
> 
> 赞同：5
> 
> 时间：2012-05-15T08:33:45.963
> 
> 标签：iphone, mpmediaitem, mpmediaquery, mpmediaitemcollection

那是我的问题 =)

```
MPMediaQuery *artistQuery = [MPMediaQuery artistsQuery];
NSArray *songsByArtist = [artistQuery collections]; 
```

如何在 songByArtist 中获取 MPMediaItemCollections 的每个艺术家的专辑数量？

例子：

披头士 3 专辑

AC/DC 6 专辑

谢谢你 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-09T17:37:43.137

我使用谓词获得艺术家的专辑和歌曲数量：

```
MPMediaPropertyPredicate *artistNamePredicate = [MPMediaPropertyPredicate predicateWithValue:@"ArtistName" forProperty:MPMediaItemPropertyArtist];
MPMediaQuery *myComplexQuery = [[MPMediaQuery alloc] init];
[myComplexQuery addFilterPredicate: artistNamePredicate];
NSInteger songCount = [[myComplexQuery collections] count]; //number of songs
myComplexQuery.groupingType = MPMediaGroupingAlbum;
NSInteger albumCount = [[myComplexQuery collections] count]; //number of albums 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T00:22:52.453

便利构造`artistsQuery`函数不按专辑排序和分组。`artistsQuery`返回按艺术家姓名字母顺序排序的所有艺术家的媒体项目集合数组。嵌套在每个艺术家集合中的是与该艺术家的所有歌曲相关联的媒体项数组。嵌套数组按歌曲名称的字母顺序排序。

按艺术家统计专辑的一种方法是枚举每个艺术家收藏的所有歌曲项，并使用 a`NSMutableSet`来跟踪与每首歌曲相关的不同专辑标题。然后将集合的计数添加为 a 中每个艺术家键的值`NSMutableDictionary`。不会添加任何重复的专辑标题，因为 a`NSMutableSet`只会采用不同的对象：

```
MPMediaQuery *artistQuery = [MPMediaQuery artistsQuery];
NSArray *songsByArtist = [artistQuery collections];
NSMutableDictionary *artistDictionary = [NSMutableDictionary dictionary];
NSMutableSet *tempSet = [NSMutableSet set];

[songsByArtist enumerateObjectsUsingBlock:^(MPMediaItemCollection *artistCollection, NSUInteger idx, BOOL *stop) {
    NSString *artistName = [[artistCollection representativeItem] valueForProperty:MPMediaItemPropertyArtist];

    [[artistCollection items] enumerateObjectsUsingBlock:^(MPMediaItem *songItem, NSUInteger idx, BOOL *stop) {
        NSString *albumName = [songItem valueForProperty:MPMediaItemPropertyAlbumTitle];
        [tempSet addObject:albumName];
    }];
    [artistDictionary setValue:[NSNumber numberWithUnsignedInteger:[tempSet count]] 
                        forKey:artistName];
    [tempSet removeAllObjects];
}];
NSLog(@"Artist Album Count Dictionary: %@", artistDictionary); 
```

如果将查询更改为`albumsQuery`. 此查询按专辑名称对集合进行分组和排序。然后，只需枚举专辑集合数组并计算`NSCountedSet`. 计数集将跟踪对象被插入的次数：

```
MPMediaQuery *albumQuery = [MPMediaQuery albumsQuery];
NSArray *albumCollection = [albumQuery collections];
NSCountedSet *artistAlbumCounter = [NSCountedSet set];

[albumCollection enumerateObjectsUsingBlock:^(MPMediaItemCollection *album, NSUInteger idx, BOOL *stop) {
    NSString *artistName = [[album representativeItem] valueForProperty:MPMediaItemPropertyArtist];
    [artistAlbumCounter addObject:artistName];
}];
NSLog(@"Artist Album Counted Set: %@", artistAlbumCounter); 
```

`NSCountedSet`您还可以使用该`countForObject:`方法检索给定对象的计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-21T18:49:20.290

布莱恩回答的 Swift 2 翻译：

```
var artistQuery = MPMediaQuery.artistsQuery()
var artistQuery.groupingType = MPMediaGrouping.AlbumArtist
var songsByArtist = artistQuery.collections
var artistDictionary = NSMutableDictionary()
var tempSet = NSMutableSet()

songsByArtist.enumerateObjectsUsingBlock { (artistCollection, idx, stop) -> Void in
     let collection = artistCollection as! MPMediaItemCollection
     let rowItem = collection.representativeItem

     let artistName = rowItem?.valueForProperty(MPMediaItemPropertyAlbumArtist)

     let collectionContent:NSArray = collection.items

     collectionContent.enumerateObjectsUsingBlock { (songItem, idx, stop) -> Void in
          let item = songItem as! MPMediaItem

          let albumName = item.valueForProperty(MPMediaItemPropertyAlbumTitle)
          self.tempSet.addObject(albumName!)
     }

     self.artistDictionary.setValue(NSNumber(unsignedInteger: self.tempSet.count), forKey: artistName! as! String)
     self.tempSet.removeAllObjects()
}
print("Album Count Dictionary: \(artistDictionary)") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:36:05.667

如果对您有帮助，请向我们查询此链接或在下面的此链接上查看更多信息

[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaQuery_ClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaQuery_ClassReference/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-16T20:30:47.610

感谢 Tim E，我无法让您的代码第一次工作，但我将它修改为这个，现在可以工作了。

```
 let artistQuery = MPMediaQuery.artistsQuery()
    artistQuery.groupingType = MPMediaGrouping.AlbumArtist

    let songsByArtist = artistQuery.collections! as NSArray
    let artistDictionary = NSMutableDictionary()
    let tempSet = NSMutableSet()

    songsByArtist.enumerateObjectsUsingBlock( { (artistCollection, idx, stop) -> Void in
        let collection = artistCollection as! MPMediaItemCollection
        let rowItem = collection.representativeItem

        let artistName = rowItem?.valueForProperty(MPMediaItemPropertyAlbumArtist)

        let collectionContent:NSArray = collection.items

        collectionContent.enumerateObjectsUsingBlock({ (songItem, idx, stop) -> Void in
            let item = songItem as! MPMediaItem

            let albumName = item.valueForProperty(MPMediaItemPropertyAlbumTitle)
            tempSet.addObject(albumName!)
        })

        artistDictionary.setValue(NSNumber(unsignedInteger: UInt(tempSet.count)), forKey: artistName! as! String)
        tempSet.removeAllObjects()
    })

    print("Album Count Dictionary: \(artistDictionary)") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-09T07:32:39.337

对不起，迟到的答案。

发布我的答案以防对某人有帮助。

下面的代码按专辑艺术家获取所有艺术家分组，并获取专辑中的所有专辑和歌曲。

```
 /// Get all artists and their songs
///
func getAllArtists() {
    let query: MPMediaQuery = MPMediaQuery.artists()
    query.groupingType = .albumArtist

    let artistsColelctions = query.collections

    artists.removeAll()

    var tempSet = NSMutableSet()

    guard artistsColelctions != nil else {
        return
    }

    // 1\. Create Artist Objects from collection

    for collection in artistsColelctions! {
        let item: MPMediaItem? = collection.representativeItem

        var artistName = item?.value(forKey: MPMediaItemPropertyArtist) as? String ?? "<Unknown>"
        artistName = artistName.trimmingCharacters(in: NSCharacterSet.whitespacesAndNewlines)
        let artistId = item!.value(forProperty: MPMediaItemPropertyArtistPersistentID) as! NSNumber

        // temp
        let albumName = item?.albumTitle
        let albumID  = item?.albumPersistentID

        print(albumName)
        print(albumID)

        // Create artist item

        let artist = Artist()
        artist.name = artistName
        artist.artworkTitle = String(artistName.characters.prefix(1)).uppercased()
        artist.artistId = String(describing: artistId)

        // 2\. Get Albums for respective Artist object
        //--------------------------------------------

        let mediaQuery2 = MPMediaQuery.albums()
        let predicate2 = MPMediaPropertyPredicate.init(value: artistId, forProperty: MPMediaItemPropertyArtistPersistentID)
        mediaQuery2.addFilterPredicate(predicate2)

        let albums = mediaQuery2.collections

        for collection in albums! {
            let item: MPMediaItem? = collection.representativeItem

            let albumName = item?.value(forKey: MPMediaItemPropertyAlbumTitle) as? String ?? "<Unknown>"
            let albumId = item!.value(forProperty: MPMediaItemPropertyAlbumPersistentID) as! NSNumber
            let artistName = item?.value(forKey: MPMediaItemPropertyAlbumArtist) as? String ?? "unknown"

            let genreName = item?.genre ?? ""

            let year = item?.releaseDate ?? item?.dateAdded

            let dateAdded = item?.dateAdded

            // Create album object

            let album = Album()
            album.name = albumName
            album.artistName = artistName
            album.genre = genreName
            album.releaseDate = year
            album.dateAdded = dateAdded
            album.albumId = String(describing: albumId)

            // Add artwork to album object
            let artwork = Artwork.init(forAlbum: item)
            album.artwork = artwork

            // 3\. Get Songs inside the resepctive Album object
            //---------------------------------------------------

            let mediaQuery = MPMediaQuery.songs()
            let predicate = MPMediaPropertyPredicate.init(value: albumId, forProperty: MPMediaItemPropertyAlbumPersistentID)
            mediaQuery.addFilterPredicate(predicate)
            let song = mediaQuery.items

            if let allSongs = song {
                var index = 0

                for item in allSongs {
                    let pathURL: URL? = item.value(forProperty: MPMediaItemPropertyAssetURL) as? URL
                    let isCloud = item.value(forProperty: MPMediaItemPropertyIsCloudItem) as! Bool

                    let trackInfo = TrackInfo()
                    trackInfo.index = index
                    trackInfo.mediaItem = item
                    trackInfo.isCloudItem = isCloud

                    trackInfo.isExplicitItem = item.isExplicitItem

                    trackInfo.isSelected = false
                    trackInfo.songURL = pathURL
                    album.songs?.append(trackInfo)
                    index += 1
                }
            }

            artist.albums?.append(album)

        }

        // Finally add the artist object to Artists Array
        artists.append(artist)

        }

    } 
```

# status - DATASTAGE ：DataStage 7.5 上所有作业的作业状态信息

> ID：10596951
> 
> 赞同：0
> 
> 时间：2012-05-15T08:33:51.700
> 
> 标签：status, etl, datastage

我在 HP UX 系统上使用 DataStage 7.5。有数百个作业存储在不同的项目中，我必须去每个文件夹检查作业状态。

没有任何表格或文件存储所有作业的状态列表吗？

提前致谢，乐布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:49:05.043

在 Director 中，您转到“查看”菜单并取消选中“显示文件夹”，这将在一个列表中显示所有作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:13:00.100

我认为具有 datastage 管理员访问权限的用户可以获得此信息。

# android - 如何在两部 Android 手机上进行 WLAN 通信

> ID：10596956
> 
> 赞同：0
> 
> 时间：2012-05-15T08:34:08.740
> 
> 标签：android, synchronization, communication, p2p, wifi

有没有办法让 2 部安卓手机在不通过中央服务器的情况下在本地相互通信？有点像在 WLAN 上？我需要这 2 部手机在它们在附近并运行相同的应用程序时能够相互同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:28:14.247

也许通过蓝牙？只是一个建议，我不知道该怎么做，但一个想法可能是让每个应用程序通过 LAN 上的某个端口广播，同时通过同一端口搜索另一个应用程序的广播。一旦识别出其他设备，然后传输数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:56:42.747

使用 WLAN 环境的唯一方法（不包括 AP，即基础架构模式）

1.  Ad-Hoc 模式（Google 会在这方面为您提供更多帮助）
2.  Wi-Fi 直连——这是 WLAN 对等网络的未来。（再次确信 Google 会非常乐意为您提供帮助！）

# javascript - 如何处理 JavaScript 中的可选参数？

> ID：10596958
> 
> 赞同：2
> 
> 时间：2012-05-15T08:34:18.647
> 
> 标签：javascript

我想要一个函数“get”，它需要一个 id、一个可选的属性参数和一个回调函数。它会像这样使用：

```
get(14297, 'name', function processName(name) {...});
get(14297, function processStudent(student) {...}); 
```

我在下面包含了一种可能的实现

```
function get(id, property, callback) {
    var item = ...;
    // property is callback
    if (!callback) property(item);
    // callback is callback
    else callback(item[property])
} 
```

感觉有点奇怪，因为

```
property(item); 
```

实际上是一个取决于上下文的回调函数。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:40:38.227

您应该切换参数。试试这个

```
function get(id, callback, property)
{
    if(typeof property === "undefined")
        callback(item);
    else
        callback(item[property]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:52:28.747

这是 jQuery 使用的模式：

```
function get(id, property, callback) {

    // if the 2nd parameter is a function, assume that
    // only two parameters were supplied
    if (typeof property === 'function') {
         callback = property;
         property = undefined;
    }

    ...
} 
```

实际上，如果它看到意外的参数类型，它只会将它们的内容打乱，直到它们与替代定义匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T08:53:21.603

您可以更改参数的顺序，或测试给定的函数以找出它们是什么。例如

```
function get(id, property, callback) {
  if (arguments.length == 2) {
    // second argument is callback
    callback = property;
    property = void 0;
  }
  ...
} 
```

或者

```
function get(id, property, callback) {
  if (typeof property == 'function') {
    // second argument is callback
    callback = property;
    property = void 0;
  }
  ...
} 
```

等等，但这种类型的重载并不是特别喜欢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T08:52:57.030

`arguments`对象是不可变的。但是您可以将它分割成一个数组，弹出最后一个参数并像往常一样处理其他参数，因为您知道该`callback`参数不再包含在其中。

这是一种方法：

```
function get() {
    // Copy the `arguments` object in an array, since it's immutable
    var args = Array.prototype.slice.call( arguments, 1 ),

    // Pop the last argument of the arguments
        callback = args.pop();

    // Then deal with other arguments
    // For example, check for the existence of the second argument
    if ( args[1] ) {
    }

    // Then, you can call the callback function
    callback();
} 
```

# css - CSS3径向渐变不适用于火狐？

> ID：10596961
> 
> 赞同：0
> 
> 时间：2012-05-15T08:34:38.477
> 
> 标签：css

此径向渐变不适用于 Firefox：

背景图像：-moz-radial-gradient（底部中心，900px 900px，#7dd134 0%，#137f1e 90%，#137f1e 100%）；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:59:26.077

这是 Mozilla 的错误，它们不支持定义大小的径向渐变。
这是错误报告：[https ://bugzilla.mozilla.org/show_bug.cgi?id=627885](https://bugzilla.mozilla.org/show_bug.cgi?id=627885)

# iphone - 用粉笔效果画线（可可/可可触感）？

> ID：10596962
> 
> 赞同：1
> 
> 时间：2012-05-15T08:34:39.643
> 
> 标签：iphone, objective-c, ios, macos

有没有用粉笔效果画绳子的好方法？我可以在粉笔纹理图像上绘制透明字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:52:58.467

对于 iOS：

1.  获取粉笔纹理图像。
2.  使用创建颜色`[UIColor colorWithPatternImage:[UIImage imageNamed:@"chalkImage"]];`
3.  将此设置为标签或文本视图或其他任何内容的文本颜色。

对于 OSX：

1.  获取粉笔纹理图像。
2.  使用创建颜色`[NSColor colorWithPatternImage:[NSImage imageNamed:@"chalkImage"]];`
3.  将此设置为标签或文本视图或其他任何内容的文本颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:34:57.027

实际上，如果你只使用拉丁字母，`Chalkduster`在 MacOS 和 iOS 中有一种很棒的字体。

# java - 没有错误，但应显示订购的比萨饼类型和数量的部分代码不起作用

> ID：10596964
> 
> 赞同：2
> 
> 时间：2012-05-15T08:34:43.060
> 
> 标签：java, arrays, loops

```
public class PizzaExamfinalOne{
  public static void main(String[]args){
    double total2 = 0;
    String customerName = " ";
    String address = " ";
    String phoneNum ="0";
    int max = 5;
    int done = 1;
    double totalPizza = 0;
    double totalA = 0;

    int pizzaChoice =0;

    String [] pizzaType = {"Placeholder",  "Hawaian" , "Classic Italian" , "Cheese Extreme" , "Veg Delight" , "Pepperoni" , "Tomato Margherita" , "Beef & Onion" , "Super Supreme" , "Meat Lovers" , "Hot 'n Spicy" , "Italiano" , "Italian Veg"};
    double [] pizzaPrice = {0, 8.5 , 8.5 , 8.5 , 8.5 , 8.5 , 8.5 , 8.5 , 13.5 , 13.5 , 13.5 , 13.5 , 13.5};
    int [] orderDisplay = {0,0,0,0,0,0,0,0,0,0,0,0,0};

    boolean pickup = true;
    int pickup1 = readInt("If you wish to pickup press 1 or  press 0 for delivery");
    if (pickup1 ==0){
      pickup = false;
    }

    for (int i = 1; i <pizzaType.length; i++){
      System.out.println(i + " " +pizzaType[i] + " $" + pizzaPrice[i]);
    }

    while (done !=0){

      pizzaChoice = readInt ("Choose the type of pizza you wish to order");
      double pizzaQuantity = readInt ("How many " + pizzaType[pizzaChoice] + " pizzas do you wish to buy (Maximum is 5)");   

      totalPizza = totalPizza + pizzaQuantity;
      if(totalPizza > max){
        System.out.println("You cannot order more than five pizzas");
        pizzaChoice = 0;  
        pizzaQuantity = 0;
      }

      done= readInt ("Press 0 if you are done or press 1 to make another pizza order");
      double total1 = pizzaQuantity*pizzaPrice[pizzaChoice];
      total2 = total2 + total1;

    }

    if(pickup==false){
      int deliveryCost = 3;
      customerName = readString ("Please enter your full name");
      address = readString ("Please enter the Delivery address");
      phoneNum = readString ("Please enter the phone number of " + customerName);
      totalA = total2 + deliveryCost;
      System.out.println("Delivery order for " + customerName);
      System.out.println("To " + address + ", Phone number 0" + phoneNum);

    }
      else{
      customerName = readString ("Please enter your full name");
      System.out.println("Pickup order for " + customerName);
      int deliveryCost = 0;
      totalA = total2 + deliveryCost;

    } 
```

我的问题就在这里。我需要显示用户订购的披萨以及订购的披萨数量，我被困在这里。代码中没有错误它只是不显示以下内容

```
 for(int i=1;i<orderDisplay.length;i++){
      if(orderDisplay[i]>0){
        System.out.println("       " + orderDisplay[i] +  " " + pizzaType[i] + " pizzas");
      }
    }
    System.out.println("The total amount of your order is " + formatMoney(totalA));
  }

  public static int readInt(String prompt){
    System.out.println(prompt);
    java.util.Scanner keyboard = new java.util.Scanner(System.in);                                
    return keyboard.nextInt();
  }
  public static String readString (String prompt){
    System.out.println (prompt);
    java.util.Scanner keyboard= new java.util.Scanner(System.in);
    return keyboard.nextLine();
  }

  public static String formatMoney(double phoneNum){
    java.text.NumberFormat  fmt = java.text.NumberFormat. getCurrencyInstance();
    return(fmt.format(phoneNum));
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:45:09.797

您不会将订单添加到您的`orderDisplay`数组中。

你应该处理它`if(pickup==false){..}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:46:16.957

您已将 orderDisplay 的所有数组元素设置为 0。

```
int [] orderDisplay = {0,0,0,0,0,0,0,0,0,0,0,0,0}; 
```

U 从未更改 orderDispaly 元素的值并检查大于 0 的值，并且你已经以值 1 开始循环。检查以下行。

```
 for(int i=1;i<orderDisplay.length;i++){
      if(orderDisplay[i]>0){
        System.out.println("       " + orderDisplay[i] +  " " + pizzaType[i] + " pizzas");
      } 
```

这是你的答案：

```
public class PizzaExamFinalOne
{
    public static void main(String[]args)
    {
        double total2 = 0;
        String customerName = " ";
        String address = " ";
        String phoneNum ="0";
        int max = 5;
        int done = 1;
        double totalPizza = 0;
        double totalA = 0;
        int pizzaChoice =0;
        String [] pizzaType = {"Placeholder",  "Hawaian" , "Classic Italian" , "Cheese Extreme" , "Veg Delight" , "Pepperoni" , "Tomato Margherita" , "Beef & Onion" , "Super Supreme" , "Meat Lovers" , "Hot 'n Spicy" , "Italiano" , "Italian Veg"};
        double [] pizzaPrice = {0, 8.5 , 8.5 , 8.5 , 8.5 , 8.5 , 8.5 , 8.5 , 13.5 , 13.5 , 13.5 , 13.5 , 13.5};
        int [] orderDisplay = {0,0,0,0,0,0,0,0,0,0,0,0,0};
        boolean pickup = true;
        int pickup1 = readInt("If you wish to pickup press 1 or  press 0 for delivery");
        if (pickup1 == 0)
        {
            pickup = false;
        }
        while (done != 0)
        {
            for (int i = 1; i <pizzaType.length; i++)
            {
                System.out.println(i + " " +pizzaType[i] + " $" + pizzaPrice[i]);
            }
            pizzaChoice = readInt ("Choose the type of pizza you wish to order");
            int pizzaQuantity = readInt ("How many " + pizzaType[pizzaChoice] + " pizzas do you wish to buy (Maximum is 5)");
            totalPizza = totalPizza + pizzaQuantity;            
            if(totalPizza > max)
            {
                totalPizza = totalPizza - pizzaQuantity;
                System.out.println("You cannot order more than five pizzas");
                pizzaChoice = 0;  
                pizzaQuantity = 0;
            }
            else
            {
                orderDisplay[pizzaChoice] = pizzaQuantity;
            }
            done= readInt ("Press 0 if you are done or press 1 to make another pizza order");
            double total1 = pizzaQuantity*pizzaPrice[pizzaChoice];
            total2 = total2 + total1;
        }
        if(totalPizza > 0)
        {
            if(pickup == false)
            {
                int deliveryCost = 3;
                customerName = readString ("Please enter your full name");
                address = readString ("Please enter the Delivery address");
                phoneNum = readString ("Please enter the phone number of " + customerName);
                totalA = total2 + deliveryCost;
                System.out.println("Delivery order for " + customerName);
                System.out.println("To " + address + ", Phone number 0" + phoneNum);
            }
            else
            {
                customerName = readString ("Please enter your full name");
                System.out.println("Pickup order for " + customerName);
                int deliveryCost = 0;
                totalA = total2 + deliveryCost;
            }
            for(int i=1;i<orderDisplay.length;i++)
            {
                if(orderDisplay[i]>0)
                {
                    System.out.println("       " + orderDisplay[i] +  " " + pizzaType[i] + " pizzas");
                }
            }
            System.out.println("The total amount of your order is " + formatMoney(totalA));
        }
        else
        {
            System.out.println("You have not ordered anything.");
        }
    }
    public static int readInt(String prompt)
    {
        System.out.println(prompt);
        java.util.Scanner keyboard = new java.util.Scanner(System.in);                                
        return keyboard.nextInt();
    }
    public static String readString (String prompt)
    {
        System.out.println (prompt);
        java.util.Scanner keyboard= new java.util.Scanner(System.in);
        return keyboard.nextLine();
    }

    public static String formatMoney(double phoneNum)
    {
        java.text.NumberFormat  fmt = java.text.NumberFormat. getCurrencyInstance();
        return(fmt.format(phoneNum));
    }
} 
```

# android - MEDIA_TYPE_IMAGE 无法识别

> ID：10596966
> 
> 赞同：8
> 
> 时间：2012-05-15T08:34:44.617
> 
> 标签：android, camera, media

我在使用相机的 android 开发人员的资源时遇到问题，这是我的代码：

```
// create Intent to take a picture and return control to the calling application
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);

// create a file to save the image
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name
// start the image capture Intent
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

问题是“MEDIA_TYPE_IMAGE”，它表示它无法解析为变量。我将媒体商店、相机和 URI 导入到我的项目中。提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T20:21:35.927

尝试导入[`android.provider.MediaStore.Files.FileColumns`](http://developer.android.com/reference/android/provider/MediaStore.Files.FileColumns.html)并更改`MEDIA_TYPE_IMAGE`为`FileColumns.MEDIA_TYPE_IMAGE`.

如果您使用的是来自 Android 开发者博客的示例代码，请务必查看关于[保存媒体文件](http://developer.android.com/guide/topics/media/camera.html#saving-media)的部分，您已经创建了用于处理该问题的常量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T01:26:52.077

问题：MEDIA_TYPE_IMAGE 无法识别

Anwser：请在您的班级中添加行

```
public static final int MEDIA_TYPE_IMAGE = 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-27T08:39:54.927

如果您正在尝试 android 指南中的相机示例，请阅读此
[http://developer.android.com/guide/topics/media/camera.html#saving-media](http://developer.android.com/guide/topics/media/camera.html#saving-media) 他们已在文档底部声明了该方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T17:21:11.100

可能是您没有在清单中授予良好的权限（例如相机访问权限、外部存储访问权限等）

# java - Apache Commons Net FTPClient - PUT 而不是 STOR？

> ID：10596969
> 
> 赞同：2
> 
> 时间：2012-05-15T08:35:08.127
> 
> 标签：java, ftp, apache-commons-net

我正在使用 Apache commons net FTPClient 将文件作为批处理作业的一部分分发。客户端是封装的，但大致我发出以下方法调用（为简洁起见，我省略了错误处理、流处理等）：

```
FTPClient client = new FTPClient();
client.connect("127.0.0.1", 22);
client.login("user", "password");
client.setFileType(FTP.BINARY_FILE_TYPE);
client.changeWorkingDirectory("path/");
client.storeFile("file1.txt", new ByteArrayInputStream("hello world".getBytes()));
client.disconnect(); 
```

当我发出上述命令时，以下命令被发送到 FTP 服务器：

```
USER zoor
PASS ********
TYPE I
CWD path/
PORT 127,0,0,1,229,72
STOR file1.txt 
```

这很好用。但是，现在，我需要将文件发送到不支持`CWD`或`STOR`而是分别依赖`CD`和的旧系统`PUT`。

现在我的问题是，如何让 FTPClient 使用这些命令？

我可以使用该`sendCommand`方法发送`CD`命令，但我不确定如何使用 PUT 命令正确（正确）执行此操作（假设我还必须发送文件数据）。

注意：我意识到有比 FTP 更好的方法来分发这样的文件，但不幸的是，我的双手被束缚了。收件人正在使用 FTP，并且不愿意更改。

**更新：**遗留系统是一台 AS/400 机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:49:40.817

这应该可行，我知道您解决了这个问题，但为了完整起见，您知道 AS/400 是否需要任何站点命令来存储文件。

你回来的错误是什么？

我定期将文件发送到 MVS/Z/OS，并且需要首先发送一些站点命令以进行存储和设置。

站点命令看起来像：

*   踪迹
*   气缸 初级=350 次级=300
*   RECFM=FB LRECL=1516 BLKSIZE=31836
*   CONDDISP=删除

这是我使用的一些代码，ftp 本质上是您在示例中使用的 FTPClient。

```
 public boolean sendSiteCommand(String siteCmd){
    if (null == siteCmd){
        System.err.println("Warning, Null Parameter sent to sendSiteCommand, aborting...");
        return false;
    }

    try{

        return ftp.sendSiteCommand(siteCmd);

    }catch (Exception e){
        System.out.println("Error Occurred Sending Site Command to Remote System, aborting...");
        e.printStackTrace(System.err);
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:22:56.443

我突然想到 CD 和 PUT 实际上不是 FTP 命令，因此这个问题没有什么意义。解决方案（因为我们需要它尽快工作）是我们将文件传输到我们自己的 FTP 服务器，并调用脚本通过该服务器上的 SSH 将文件传输到 AS/400 机器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-25T17:33:31.280

如果您确实需要将文件作为另一个命令上传，您始终可以`FTPClient`使用不同的命令扩展和调用内部方法。它们被构建为您可以将任何字符串作为命令提供给已经存在的商店。

例子：

```
 public static class OldFtpClient extends FTPClient {
        public OutputStream putFileStream(String remote) throws IOException {
            return _storeFileStream("PUT", remote);
        }
    } 
```

可以在[https://github.com/apache/commons-net/blob/master/src/main/java/org/apache/commons/net/ftp/FTPClient.java](https://github.com/apache/commons-net/blob/master/src/main/java/org/apache/commons/net/ftp/FTPClient.java)找到类的来源。

# android - 启动另一个应用程序活动并使其保持活动状态

> ID：10596971
> 
> 赞同：1
> 
> 时间：2012-05-15T08:35:17.993
> 
> 标签：android

我有 2 个应用程序 A 和 B。两者都只有一个活动。应用程序 A 启动应用程序 B。当我关闭 B 中的活动时 - 我返回 A。如何将应用程序 B 保留在内存中？如果我用 finish() 关闭 B 中的活动 - B 仍然是我的记忆。这是否意味着下次Android将使用它或启动另一个实例？

## 更新

如果应用程序 B 在清单中设置了单个任务或单个活动？或者 B 的行为可能取决于 A 的意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:44:16.493

当您问“如何将应用程序 B 保存在内存中？”时，您到底是什么意思？

如果您真的在谈论 2 个单独的应用程序，那么 Android 将在单独的进程中启动每个应用程序。每个进程都有自己的虚拟机。如果应用程序 A 中的活动启动应用程序 B 中的活动，那么您将有 2 个正在运行的进程。一旦 B 中的活动调用`finish()`，它就完成了。稍后，Android 将调用`onDestroy()`B 中的活动，然后在稍后的某个时间，Android 将终止 B 正在运行的进程。Android 将在需要内存时终止该进程，或者只要它决定它想要，基于它用于终止进程的任何内部标准。

一旦用户从应用程序 B 返回到应用程序 A，如果用户再次在应用程序 B 中启动活动，Android 将在应用程序 B 正在运行的进程中创建该活动的新实例。如果该进程已经被 Android 杀死，那么 Android 将为应用程序 B 创建一个新进程，然后在该进程中创建一个新的 Activity 实例。

一旦一个活动被调用`finish()`，它将**永远不会**被重用。它完成了。它已经死了。它已准备好进行销毁和垃圾收集。您`launchMode`为活动设置的内容或在`Intent`.

我希望这能回答你的问题）。

# sencha-touch - 无法将数据绑定到 XTemplate

> ID：10596974
> 
> 赞同：1
> 
> 时间：2012-05-15T08:35:26.503
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试使用 Sencha Touch 2 的这个简单示例在面板中显示数据，但它不起作用：

```
var planetEarth = {
    name: "Earth",
    mass: 1.00
};

var planetInfo = new Ext.XTemplate("<h2>{name}</h2>mass: {mass}");

var profile = Ext.create('Ext.Panel', {
  fullscreen: true,
  xtype: 'panel',
  layout: 'fit',
  data : planetEarth,
  tpl: planetInfo
});

Ext.Viewport.setActiveItem(profile); 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:11:07.113

似乎对我有用：[http ://www.senchafiddle.com/#KxGHo](http://www.senchafiddle.com/#KxGHo)

[编辑]为了澄清，您需要等到文档完成加载，然后再定义和执行任何用于构建用户界面的代码。将您的代码放在应用程序的“启动”方法中。

# android - 在android中使用视频时出现元数据错误

> ID：10596980
> 
> 赞同：0
> 
> 时间：2012-05-15T08:35:53.107
> 
> 标签：android, android-intent, android-ndk

我尝试以两种方式导入视频，一种是将视频文件包含到 Raw 文件夹中，另一种是直接调用链接

```
import android.app.Activity;
import android.content.Intent;
import android.graphics.PixelFormat;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.Toast;
import android.widget.VideoView;

public class HomeVideo extends Activity{
    private VideoView videoView;
    String extStorageDirectory;
    private String current;
    private VideoView mVideoView;
        @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        // set the view to our layout file
        getWindow().setFormat(PixelFormat.TRANSLUCENT);
        setContentView(R.layout.main);
        // Video view: to view our video
        String path ="http://commonsware.com/misc/test2.3gp";
        VideoView video = (VideoView) findViewById(R.id.video);
        Uri uri = Uri.parse("android.resource://comm.fib.work/"+R.raw.test2);

    //Uri uri=Uri.parse(path);
        video.setVideoURI(uri);
        video.start();
    } 
```

}

在错误日志中显示

05-15 13:54:14.981: D/MediaPlayer(586): 获取元数据 05-15 13:57:57.711: D/MediaPlayer(623): 获取元数据

我在清单中包含了权限

```
 </application>
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>

</manifest> 
```

我找不到丢失的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:00:24.490

嘿，您是否尝试将此路径用于原始文件？

```
Uri.parse("android.resource://com.yourproject/raw/videofile") 
```

这对我来说 100% 有效，希望它有所帮助：

# c# - 在 ASP.NET 中添加消息框

> ID：10596986
> 
> 赞同：0
> 
> 时间：2012-05-15T08:36:32.513
> 
> 标签：c#, javascript, asp.net

如何在 ASP.NET 中使用 C# 在页面后面的代码中添加一个 javascript MessageBox。

我有这样的想法，尽管我仍然不能完全正确。

```
if (success == false)
    {
        HttpContext.Current.Response.Write("<SCRIPT LANGUAGE=""JavaScript"">alert('User name already exists')</SCRIPT>");

    } 
```

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:39:47.637

看看这个：http:
[//msdn.microsoft.com/en-us/library/aa478975.aspx](http://msdn.microsoft.com/en-us/library/aa478975.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:38:49.427

试试这个：

```
<script type="text/JavaScript">
alert('hello world');
</script> 
```

您可以使用 ASP.NET 代码隐藏将其写入页面

```
ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + myStringVariable + "');", true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:43:33.123

添加`HiddenField`到您的 ASPX

```
<asp:HiddenField runat="server" ID="errorHf" /> 
```

将以下 JS 代码添加到您的 ASPX 页面

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        var sErrorData = $('#errorHf').val();
        if (sErrorData != "") {
            alert(sErrorData);
            $('#errorHf').val("");
        }
    });
</script> 
```

一旦出现错误，只需设置`errorHf.Value`

```
if (!success)
    errorHf.Value = "Something went wrong!"; 
```

不要忘记在每个上重置错误消息`Page_Load`，所以添加

```
errorHf.Value = String.Empty; 
```

所以消息不会在每个回发中持续存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T08:48:31.333

这对我有用：

```
 Dim script As String =
     "<script language='javascript'>" &
     "alert('my message');" &
     "</script>"
    Dim cs As ClientScriptManager = Me.Page.ClientScript
    cs.RegisterStartupScript(GetType(String), "myAlertID", script) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T08:49:29.680

下面的链接会有所帮助

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerclientscriptblock.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerclientscriptblock.aspx)

[http://dotnetslackers.com/articles/aspnet/JavaScript_with_ASP_NET_2_0_Pages_Part1.aspx](http://dotnetslackers.com/articles/aspnet/JavaScript_with_ASP_NET_2_0_Pages_Part1.aspx)

# python - 用 Python 和 Tkinter 制作倒数计时器？

> ID：10596988
> 
> 赞同：7
> 
> 时间：2012-05-15T08:36:41.460
> 
> 标签：python, time, tkinter

我想使用我的倒计时功能在 Tkinter 中设置一个标签。现在它所做的只是将标签设置为“10”，一旦达到 10，我真的不明白为什么。此外，即使我将计时器打印到终端而不是“时间到了！” 位从不打印。

```
import time
import tkinter as tk

class App():
    def __init__(self):
        self.root = tk.Tk()
        self.label = tk.Label(text="null")
        self.label.pack()
        self.countdown()
        self.root.mainloop()

    # Define a timer.
    def countdown(self):
        p = 10.00
        t = time.time()
        n = 0
        # Loop while the number of seconds is less than the integer defined in "p"
        while n - t < p: 
            n = time.time()
            if n == t + p:
                self.label.configure(text="Time's up!")
            else:
                self.label.configure(text=round(n - t))

app=App() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T11:07:48.380

Tkinter 已经有一个无限循环运行（事件循环），以及一种安排事情在一段时间后运行的方法（使用`after`）。您可以通过编写一个每秒调用一次来更新显示的函数来利用这一点。您可以使用类变量来跟踪剩余时间。

```
import Tkinter as tk

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.label = tk.Label(self, text="", width=10)
        self.label.pack()
        self.remaining = 0
        self.countdown(10)

    def countdown(self, remaining = None):
        if remaining is not None:
            self.remaining = remaining

        if self.remaining <= 0:
            self.label.configure(text="time's up!")
        else:
            self.label.configure(text="%d" % self.remaining)
            self.remaining = self.remaining - 1
            self.after(1000, self.countdown)

if __name__ == "__main__":
    app = ExampleApp()
    app.mainloop() 
```

# facebook - 将 FB.Event.subscribe 'edge.create' 隔离为单个喜欢按钮

> ID：10596989
> 
> 赞同：0
> 
> 时间：2012-05-15T08:36:46.147
> 
> 标签：facebook, google-analytics, facebook-like

这是我的第一个 stackoverflow 问题。耶。

好的。我正在尝试通过使用谷歌分析来拆分测试或 a/b 测试副本以获取特色 facebook like 按钮：

```
_gaq.push(['_trackEvent', 'facebook', 'click', 'amazing copy that hypnotizes user into clicking like']); 
```

到目前为止一切都很好。

为了控制喜欢/不喜欢的人，我发现了这个片段：

```
<script type="text/javascript">
<!--
    FB.Event.subscribe('edge.create', function(href, widget) { _gaq.push(['_trackEvent', 'facebook', 'click', 'amazing copy that hypnotizes user into clicking like']); });
    FB.Event.subscribe('edge.remove', function(href, widget) { _gaq.push(['_trackEvent', 'facebook', 'click', 'amazing copy that hypnotizes user into clicking like']); });
-->
</script> 
```

好的，到目前为止，每个人都和我在一起吗？现在这个（理论上）会给我喜欢和不喜欢的特色实验按钮，但它也会在页面上的其他类似按钮上发送数据，对吗？

问题是：如何隔离 edge.create 回调（或其他）仅在单击所需的喜欢按钮时触发？是否有我可以传递给 fb.event.subscribe 的参数或参数来检查“喜欢”的 url 是否是所需的 Facebook 页面，也许？或者如果喜欢的网址与域不同？

我是 js、jquery 以及基本 php、html 或 css 之外的任何东西的新手。请帮忙！:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:01:06.060

这是[FB.Event.subscribe](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)的实际文档。

我不知道你从哪里得到你的片段，但文档说它只在回调中返回 1 个参数。

```
FB.Event.subscribe('edge.create', function(response) {
        alert('You liked the URL: ' + response);
}); 
```

如果您想分离类似按钮，答案不在于您传递给函数的内容，而在于您从回调中收到的内容。

在您收到响应数据后，您可以在其中对每个被喜欢的 URL 执行您想要的单独操作。响应的“数据”是用户喜欢的 URL。

以这种思维方式，您应该：

```
FB.Event.subscribe('edge.create', function(response) {
    if(response == "FULL-URL-YOU-WANT-SEPARATED"){
        _gaq.push(['_trackEvent', 'facebook', 'click', 'amazing separate copy that hypnotizes user into clicking its own like button']);
    }
}); 
```

如果您想检测该 URL 是否是来自特定域的任何链接，您可能想要[获取该 URL 的域](https://stackoverflow.com/questions/569137/how-to-get-domain-name-from-url)并检查响应是否以[它](https://stackoverflow.com/questions/646628/javascript-startswith)开始。

**编辑：**

试试这个，看看是否有一个弹出框，只有当你自己的like按钮被点击时。

```
FB.Event.subscribe('edge.create', function(response) {
    if(response == "https://www.facebook.com/mysticpoliticsradio"){
        alert("Your like button has been clicked.");
        _gaq.push(['_trackEvent', 'facebook', 'click', 'amazing separate copy that hypnotizes user into clicking its own like button']);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:42:20.233

像这样使用它

```
function(response,widget) {
    if(widget.dom.id == "your fb_button_id"){
        alert("Your like button has been clicked.");
        _gaq.push(['_trackEvent', 'facebook', 'click', 'amazing separate copy that hypnotizes user into clicking its own like button']);
    }
} 
```

像这样添加您的 fb 按钮

```
<div class="fb-like" data-send="false" data-layout="box_count" id="fb_button_id"></div> 
```

# ios - 一段时间后显示/隐藏按钮

> ID：10596990
> 
> 赞同：1
> 
> 时间：2012-05-15T08:36:52.973
> 
> 标签：ios, xcode4.3

我目前正在制作一个具有复杂加载屏幕的应用程序。我已经使用 UI 动画创建了加载器，但想要添加一个按钮，该按钮将在加载栏完成后出现。我遇到了将按钮隐藏一段时间或使其在一段时间后出现的想法。

一段时间后如何显示/隐藏按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:12:43.677

您可以在一段时间后调用您的方法来显示按钮：

```
[self performSelector:@selector(showButton) withObject:nil afterDelay:0.5]; 
```

或者，可能更好，如果您想为按钮的外观设置动画，您可以在一次调用中同时执行动画和延迟，例如假设按钮最初的 alpha 为 0.0：

```
[UIView animateWithDuration:0.25
                      delay:0.5
                    options:nil
                 animations:^{
                     myButton.alpha = 1.0; 
                 }
                 completion:^(BOOL finished){
                     // if you want to do anything when animation is done, do it here
                 }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:42:33.013

使用 NSTimer 应该是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T06:31:25.117

创建 NSTimer 来做到这一点，

```
 Timer = [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(hideButton:) userInfo:nil repeats:NO];
    -(void)hideButton:(UIButton *)hideButton {
 if hideButton.isHidden == false {
        hideButton.hidden=TRUE; 
} else {
 hideButton.hidden = FALSE 
} 
```

# clojure - 在循环/递归构造上使用 dotime 时，Clojure REPL 在 IntelliJ 中崩溃

> ID：10596995
> 
> 赞同：0
> 
> 时间：2012-05-15T08:36:56.603
> 
> 标签：clojure, intellij-idea, read-eval-print-loop

我在 REPL 中定义了一个简单的阶乘函数：

```
(defn factorial [n]
  (loop [current n fact 1]
    (if
      (= current 1)
      fact
      (recur (dec current) (* current fact))))) 
```

该功能工作正常。但是当我尝试使用 dotimes 循环多次调用该函数时，REPL 似乎停止工作。对于我输入的任何表达式，我都不会再得到任何结果，并且必须重新启动 REPL。

我循环：

```
(dotimes [x 10]
  (println "Factorial of " x " is " (factorial x))) 
```

我将 IntelliJ 与 La Clojure 插件（Clojure 版本 1.3.0）一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:47:53.963

`(factorial 0)`我敢打赌，使用该函数定义进行计算需要很长时间......

# ios - UIView animateWithDuration 不适用于 Rect 宽度/高度动画

> ID：10596997
> 
> 赞同：1
> 
> 时间：2012-05-15T08:37:08.640
> 
> 标签：ios, ios5

**以下代码有效。它很好地为所有这些组件设置动画**

```
CGRect logoRect = self.logoImageView.frame;
CGRect loginBackgroundRect = self.loginControlsBkImageView.frame;
CGRect loginButtonRect = self.loginButton.frame;
CGRect tableViewRect = self.tableView.frame;
CGRect forgotPasswordRect = self.forgotButton.frame;
CGRect signupButtonRect = self.signUpButton.frame;

if (!iPhone) {

    // ipad keyboard-on-screen re-layout

    logoRect.origin.y-= 60;
    loginBackgroundRect.origin.y-= 110;
    loginButtonRect.origin.y-=110;
    tableViewRect.origin.y-=110;
    forgotPasswordRect.origin.y-=110;
    signupButtonRect.origin.y-=200;

}
else {

    // iphone keyboard-on-screen re-layout

    if (portrait) {
        logoRect.origin.y-=17;
        logoRect.origin.x-=50;
        loginBackgroundRect.origin.y-= 70;
        loginButtonRect.origin.y-=70;
        tableViewRect.origin.y-=70;
        forgotPasswordRect.origin.y-=70;
        //signupButtonRect.origin.y+=200; // get off screen!
    } else {
        logoRect.origin.y-= 30;
        loginBackgroundRect.origin.y-= 25;
        loginButtonRect.origin.y-=25;
        tableViewRect.origin.y-=25;
    }
}    

[UIView animateWithDuration:0.2f
                      delay:0.0f
                    options:UIViewAnimationOptionCurveEaseIn
                 animations:^(void) {
                     self.logoImageView.frame = logoRect;
                     self.loginControlsBkImageView.frame = loginBackgroundRect;
                     self.loginButton.frame = loginButtonRect;
                     self.tableView.frame = tableViewRect;
                     self.forgotButton.frame = forgotPasswordRect;
                     self.signUpButton.frame = signupButtonRect;
                 }
                 completion:NULL]; 
```

使用下面的代码并添加一行（见下文）来为 logoImageView 的 WIDTH 设置动画……然后吹……只有 logoImageView 动画有效——其余的根本不动。好像帧大小的动画会导致其他所有内容在同一动画块中都没有动画。

```
if (portrait) {
        logoRect.origin.y-=17;
        logoRect.origin.x-=50;
        loginBackgroundRect.origin.y-= 70;
        loginButtonRect.origin.y-=70;
        tableViewRect.origin.y-=70;
        forgotPasswordRect.origin.y-=70;
        //signupButtonRect.origin.y+=200; // get off screen!
    } else {
        logoRect.origin.y-= 30;
        logoRect.size.width-= 30;   // <------- LINE BEING ADDED HERE

        loginBackgroundRect.origin.y-= 25;
        loginButtonRect.origin.y-=25;
        tableViewRect.origin.y-=25;
    } 
```

我在这里不知所措。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:43:59.037

尝试改变整个框架，而不仅仅是宽度。它应该工作。

在提交动画之前放置这些行（不在块中）：

```
self.logoImageView.frame = logoRect;
etc. 
```

而不是使用 animate 方法尝试以这种方式使用提交动画：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.75];
// Here some more animation settings
// Here your animations 
[UIView commitAnimations]; 
```