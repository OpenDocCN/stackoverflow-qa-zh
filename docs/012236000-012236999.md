# StackOverflow 问答 12236000-12236999

# c++ - 为什么这段代码“初始化字符”不能工作？

> ID：12236000
> 
> 赞同：0
> 
> 时间：2012-09-02T12:37:37.567
> 
> 标签：c++

在我编写此代码时，在 Borland C++ 中，编译器会给出此错误 --> `"Lvalue required"`。

```
struct harf {
   char word[10];
} pr[10];

void main() {
  pr[0].word="Alireza"; //Lvalue required
  getch();
} 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T12:39:48.407

不允许对数组进行赋值操作。C++ 不允许你这样做。要将数据复制到字符数组，请使用字符串复制功能。像这样使用它。

```
strcpy(pr[0].word,"Alireza"); 
```

另一种方法是自己使用循环执行逐字符复制。虽然更好地使用库函数。:)

这个问题也可能对你有所帮助。 [不使用指针遍历 C 风格的数组](https://stackoverflow.com/questions/12145643/pointer-pointing-to-a-constant-memory-location) 请记住，在 C++ 中不允许对数组进行复合操作。您不能直接对它们执行算术或逻辑运算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T12:39:56.560

您需要使用 strcpy(..) 或 strncpy(..)。您不能使用赋值运算符直接分配它。

```
strcpy(pr[0].word,"Alireza"); 
```

此外，既然您使用的是 C++，为什么不使用`std::string`. 就像是：

```
std::string myString;
..
myString = "AlireZa"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T12:39:16.060

利用 ：

```
strncpy( pr[0].word, "Alireza", 10); 
```

更安全的解决方案是：

```
strncpy( pr[0].word, "Alireza", sizeof(pr[0].word)/sizeof(pr[0].word[0])); 
```

这样，如果单词数组发生变化，您就不必在代码的其他部分修复大小变化。使用 strncpy 被认为比 strcpy 更安全，因为第二个很容易导致缓冲区溢出。

不过，最好使用 std::string

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T12:45:00.083

`pr[0].word`是内存中某个位置的数组。

`"Alireza"`是内存中某个不同位置的另一个字符数组。

您的分配尝试重定向`pr[0].word`到 Alireza 内存，这是无效的，因为`pr[0].word`它是一个数组。您可以重定向指针，但不能重定向数组。您可以：

*   制作一个`pr[0].word`指针，然后将指针设置为您现在尝试做的不同位置。
*   使用其他人建议的功能将内存的内容复制`"Alireza"`到内存`pr[0].word``strcpy`
*   正如你在 C++ 中一样，你也可以声明`pr[0].word`为 a which 将在一个方便的运算符`std::string`下为你完成所有的内存复制魔法，再次有效。这种方法还可以帮助您避免在处理 "naked" 时可能出现的一些讨厌的错误。`=``pr[0].word="Alireza"``char *`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T12:39:31.240

`pr[0].word`是一个数组。您不能分配给数组。

在您的情况下，数组表达式衰减为指向第一个元素的指针，但该表达式是一个右值（因为显然尝试*更改*该指针是没有意义的！）。

# c# - 如何更新母版页中的用户控件？

> ID：12236001
> 
> 赞同：-4
> 
> 时间：2012-09-02T12:37:40.797
> 
> 标签：c#, asp.net, vb.net

我想从内容页面更新用户控件，并且用户控件位于母版页中。

有人知道吗？提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:39:08.740

您要做的是在您的用户控件中公开标签（使其公开）。

```
public class MyUCtrl : UserControl{
    public Label MyLabel{ get; set; }
    ...
} 
```

然后在母版页做类似的事情：

```
 public MyUCtrl Counter{ get; set; }
 ... 
```

然后在内容页面：

```
((MyMasterPage)this.Master).Counter.MyLabel.Text = "hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:50:43.523

像这样添加属性`UserControl`：

```
public int ItemCount{ get;set; }
public string CountText
{
   get{ return labelId.Text; }
   set{ labelId.Text = "Item in shopcart: "+ ItemCount; }
} 
```

然后在您的`aspx`制作中将商品添加到购物车（`button click`或任何您想要的东西）

```
YouUserControlId.ItemCount++; 
```

# c# - C# 对 TripleDES 算法的实现

> ID：12236005
> 
> 赞同：1
> 
> 时间：2012-09-02T12:38:14.893
> 
> 标签：c#, .net, encryption

我正在实现一个应用程序，该应用程序需要使用大小为 112 位（14 字节）的密钥的 TripleDES 加密，这在 C# 中是可能的，因为文档指出该算法仅允许 128-192 位范围内的密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:44:17.940

128 位密钥大小是 112 位版本。对于每个 64 位 DES 密钥，8 位是奇偶校验位。

[编辑：以下段落来自对上述问题的错误阅读，它是双键 TripleDES 而不是 DoubleDES。感谢 GregS 指出这一点。]

[另请注意，由于中间相遇](http://en.wikipedia.org/wiki/Meet-in-the-middle_attack)攻击，双重 DES 并不比普通 DES 强。仅使用双 DES 以实现向后兼容性。在大多数情况下考虑使用 AES（或者在 TLS 1.1 之前使用用于 SSL 的旧 RC4。或更好的 BEAST 攻击保护更普遍）。

# c# - 当一个下拉值更改时，更改 radgrid 其他行中相同下拉列表的值

> ID：12236007
> 
> 赞同：0
> 
> 时间：2012-09-02T12:38:34.370
> 
> 标签：c#, javascript, asp.net

我有一个下拉列表，其中是/否作为 rad 网格内的数据。当行中的下拉列表的值发生变化时，除此之外的其他行中的下拉列表的值应设置为第二项。这必须使用 javascript 来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:29:23.467

你可以打开[这个链接](http://www.telerik.com/community/forums/aspnet-ajax/grid/postback-while-in-radgrid-edit-form-mode.aspx)。

另外，我建议您更改此行：

```
GridEditFormItem item = DropDownList1.NamingContainer as GridEditFormItem; 
```

至

```
GridEditableItem item = DropDownList1.NamingContainer as GridEditableItem; 
```

为了支持编辑和插入场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:04:38.533

这将需要 2 个步骤

1.  右键单击下拉菜单会出现一个弹出窗口，然后检查回发选项
2.  之后，只需双击下拉列表，结果函数将在您的 filename.cs 文件中创建现在将用于添加其他下拉列表选项的代码放在那里，您就完成了

# c# - 如何使用 BackgroundWorker 更新多个标签？

> ID：12236008
> 
> 赞同：0
> 
> 时间：2012-09-02T12:39:02.690
> 
> 标签：c#, user-interface, backgroundworker

[这是从另一个表单更新对话框](https://stackoverflow.com/questions/12168174/updating-a-dialog-from-another-form)的后续问题（可以在此处找到代码和屏幕截图）

为了解决我的 GUI 挂起问题，我收到了 2 条建议：

*   使用`Application.DoEvents()`

*   用一个`BackgroundWorker`

DoEvents() 方法有效，但有人指出我不应该使用它。事实上，我注意到 GUI 更新正确，但在短时间内没有响应。

这就是我想使用 BackgroundWorker 并阅读它的原因。

不过，我不明白我将如何实现它，以便它可以用于分别更新示例代码中的 4 个标签。当程序成功完成一项工作时，我想显示进度（并更新 4 个对话框标签）。BackgroundWorker 虽然只有 1 个`DoWork()`。我曾尝试使用 的`e.Argument`来`DoWorkEventArgs`区分不同的更新方法，但该尝试失败了。

```
public partial class BackgroundWorkerImportStatusDialog : Form
{
    private BackgroundWorker dialogWorker = new BackgroundWorker();

    private string path;
    private string clientName;

    public BackgroundWorkerImportStatusDialog()
    {
        InitializeComponent();
    }

    public void updateFileStatus(string path)
    {
        this.path = path;

        dialogWorker = new BackgroundWorker();
        dialogWorker.DoWork += new DoWorkEventHandler(updateLabels);
        dialogWorker.RunWorkerAsync(UpdateComponent.FileStatus);

    }

    public void updatePrintStatus()
    {
        dialogWorker = new BackgroundWorker();
        dialogWorker.DoWork += new DoWorkEventHandler(updateLabels);
        dialogWorker.RunWorkerAsync(UpdateComponent.PrintStatus);
    }

    public void updateImportStatus(string clientName)
    {
        this.clientName = clientName;

        dialogWorker = new BackgroundWorker();
        dialogWorker.DoWork += new DoWorkEventHandler(updateLabels);
        dialogWorker.RunWorkerAsync(UpdateComponent.ImportStatus);
    }

    public void updateArchiveStatus()
    {
        dialogWorker = new BackgroundWorker();
        dialogWorker.DoWork += new DoWorkEventHandler(updateLabels);
        dialogWorker.RunWorkerAsync(UpdateComponent.ArchiveStatus);
    }

    private void updateLabels(object sender, DoWorkEventArgs e)
    {
        MessageBox.Show(e.Argument.ToString());
        if ((UpdateComponent) e.Argument == UpdateComponent.FileStatus)
        {
            t_filename.Text = path;
        }
        if ((UpdateComponent) e.Argument == UpdateComponent.PrintStatus)
        {
            t_printed.Text = "sent to printer";
        }
        if ((UpdateComponent) e.Argument == UpdateComponent.ImportStatus)
        {
            t_client.Text = clientName;
        }
        if ((UpdateComponent) e.Argument == UpdateComponent.ArchiveStatus)
        {
            t_archived.Text = "archived";
        }
    }

    public enum UpdateComponent { FileStatus, PrintStatus, ImportStatus, ArchiveStatus} 
```

而且我无法想象为这个非常简单的对话框设置 4 个 BackgroundWorker 是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:04:22.837

据我了解您的问题，您希望让您的对话框表单通知用户您的应用程序运行的 4 个不同方面：

*   打印状态
*   文件状态
*   进口状况
*   归档状态

后台工作人员可用于定期检查每一项。检查每个操作的状态后，您可以将进度条提高 25%（并使用适当的信息更新您的 UI）。

您也可以尝试异步编程 - 即只需启动操作，然后让您的应用程序继续运行。操作完成后，您的应用程序将收到通知，并且可以更新表单上的信息。根据您使用的 .NET 框架，您可以使用`async`和`await`（自 .NET 4.5 / C# 5 - [async & await 在 MSDN 上可用](http://msdn.microsoft.com/en-us/library/hh191443.aspx)）或[异步编程的经典方法](http://msdn.microsoft.com/en-us/library/2e08f6yc%28v=vs.100%29.aspx)。

* * *

编辑：

我不确定 BackgroundWorker 是这种情况下的最佳解决方案。我可以想象有类似的东西：

1.  BackhgroundWorker 只检查一次 - 即检查一次打印状态、一次文件状态、一次导入状态、一次存档器状态。这可能听起来很傻，但它可能是用户行为驱动程序 - 即当用户单击或以任何其他方式调用此机制时显式启动。ProgressBar 可以放在应用程序的状态栏上，以便用户知道“应用程序实际上正在做某事”。

2.  以前的方法可以稍微改进一下——你实际上从来没有在 BackgroundWorker 中完成你的工作——而是在你的 main 方法中你只有一个无限循环。这将允许您定期检查。在这种方法中，增加进度没有意义。

第二种方法的示例：

```
private void bg_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    for (int i = 1; i <= 10; i++)
    {
        if (worker.CancellationPending == true)
        {
            e.Cancel = true;
            break;
        }
        else
        {
            CheckPrintingStatus();
            CheckFileStatus();
            CheckImportStatus();
            CheckArchiverStatus();
            System.Threading.Thread.Sleep(5000); // sleep for 5 seconds
        }
    }
} 
```

这个解决方案（第二种方法）是否比显式创建线程更好，这是一个问题。您可以考虑创建 4 个不同的线程，以便每个线程都可以检查其他内容。这在操作系统上会有点重，但另一方面，您可以为每个操作设置不同的睡眠时间。

如果您选择裸线程 - 您可能希望使用[ThreadPool](http://msdn.microsoft.com/en-us/library/3dasc8as%28v=vs.100%29.aspx)而不是显式创建线程。

# java - 为什么 listFiles() 还将目录列为文件？

> ID：12236010
> 
> 赞同：1
> 
> 时间：2012-09-02T12:39:09.003
> 
> 标签：java, file, directory, filesystems

似乎方法 listFiles() 还列出了所有目录和威胁所有结果作为目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T12:41:45.093

[`File`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)Java 中的对象可以表示文件或目录。[`isFile()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#isFile%28%29)您可以通过and来检查它是文件还是目录[`isDirectory()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#isDirectory())。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T12:41:59.773

目录是自文件，但它是文件系统中的一种特殊文件。

在 java`isDirectory()`中，如果它是 directory 则返回 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T12:43:09.430

列出文件和目录并没有什么不寻常的。File.listFiles [() API](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)说：

> **返回： 一组抽象路径名，**表示由该抽象路径名表示的目录中的文件和目录。如果目录为空，则数组将为空。如果此抽象路径名不表示目录，或者发生 I/O 错误，则返回 null。

[java.io.File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)只是文件和目录路径名的抽象表示。有 isFile() 和 isDirectory() 方法可以区分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T12:49:29.250

File 是**路径名**的`abstract`表示形式。`file``directory`

 **`instance`Java中的Class`File`代表 a`file`或 a `directory`。

这就是我们可以在同一个文件对象上使用`isDirectory()`and`isFile()`来检查它是文件还是目录的原因。**

# spring - 使用 HibernateTemplate 持久化 CGLIB 代理实体

> ID：12236012
> 
> 赞同：2
> 
> 时间：2012-09-02T12:39:24.493
> 
> 标签：spring, hibernate, proxy, cglib

我几乎到处搜索，但似乎没有人遇到这个问题。我有 Spring MVC 应用程序。有一个 UserImpl 实体，它在上下文配置文件中声明为请求范围的 bean，并由 UsersController 引用。UsersController 引用的 UserImpl 对象实际上是一个 CGLib 代理（[这](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-other-injection "这就是为什么")是为什么？）。现在，当我第一次尝试使用 HibernateTemplate 持久化这样的代理对象时，我收到了这个错误：

> org.hibernate.MappingException：未知实体：main.mvc.model.hibernate.UserImpl$$EnhancerByCGLIB$$9ac49631

经过一番搜索，我发现了类似的东西：

> org.springframework.orm.hibernate3.support.ScopedBeanInterceptor

这有点解决了这个问题。现在我没有得到 MappingException 并且实体被持久化但是......数据库记录中的每个字段都是空的。有什么问题？

注意：当我对 UserImpl 实例进行硬编码并使用 UserServiceImpl 持久化它时，一切正常。

上下文配置的一部分：

```
<bean id="userService" class="main.mvc.model.hibernate.UserServiceImpl"/>
<bean id="userValidator" class="main.validators.UserValidator"/>
<bean id="userWrapperValidator" class="main.validators.UserWrapperValidator"/>
<bean id="user" class="main.mvc.model.hibernate.UserImpl" scope="request">
    <aop:scoped-proxy/>
</bean>
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="main.mvc.model.hibernate"/>
    <property name="entityInterceptor">
<bean class="org.springframework.orm.hibernate3.support.ScopedBeanInterceptor"/>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean> 
```

用户控制器：

```
package main.mvc.controllers;

import java.util.List;

import javax.inject.Inject;
import javax.validation.Valid;

import main.helpers.UserWrapper;
import main.mvc.model.User;
import main.mvc.model.UserService;
import main.mvc.model.hibernate.UserImpl;
import main.validators.UserValidator;
import main.validators.UserWrapperValidator;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.WebDataBinder;
import org.springframework.web.bind.annotation.InitBinder;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

@Controller
@RequestMapping("/users")
public class UsersController {

    private User user; // should be request-scoped
    private UserService userService;
    private UserValidator userValidator;
    private UserWrapperValidator userWrapperValidator;

    @SuppressWarnings("unused")
    private Logger logger = Logger.getLogger(getClass());

    @Inject
    public UsersController(User user, UserService userService, UserValidator userValidator, UserWrapperValidator userWrapperValidator){
        this.user = user;
        this.userService = userService;
        this.userValidator = userValidator;
        this.userWrapperValidator = userWrapperValidator;
    }

    @InitBinder("user")
    protected void setUserValidator(WebDataBinder binder){
        binder.setValidator(userValidator);
    }

    @InitBinder("userWrapper")
    protected void setUserWrapperValidator(WebDataBinder binder){
        binder.setValidator(userWrapperValidator);
    }

    @ModelAttribute
    public UserWrapper wrapUser(){
        return new UserWrapper(user);
    }

    //==================================REQUEST HANDLERS==========================================

    @RequestMapping(value={"/new"}, method=RequestMethod.GET)
    public String showCreationForm(@ModelAttribute UserWrapper userWrapper){
        return "user_registration_form";
    }

    @RequestMapping(method=RequestMethod.POST)
    public String createUser(@Valid @ModelAttribute UserWrapper userWrapper, BindingResult bindingResult, RedirectAttributes redirectAttributes){
        if(bindingResult.hasErrors()){
            return "user_registration_form";
        }
        userService.save(userWrapper.getUser());
        redirectAttributes.addFlashAttribute("message_title", "Jakiś text");
        redirectAttributes.addFlashAttribute("message_text", "Jakiś text");
        redirectAttributes.addFlashAttribute("redirect_url", "/users");
        return "redirect:information";
    }
...
} 
```

用户服务实现：

```
public class UserServiceImpl extends HibernateDaoSupport implements UserService {

    private PasswordEncoder passwordEncoder;
    private SaltSource saltSource;

    @Inject
    public UserServiceImpl(SessionFactory sessionFactory, PasswordEncoder passwordEncoder, SaltSource saltSource) {
        super();
        setSessionFactory(sessionFactory);
        setPasswordEncoder(passwordEncoder);
        setSaltSource(saltSource);
    }

    public void save(User user) {
        Date creationTime = new Date();
        user.setCreationDate(creationTime);
        user.setLastModified(creationTime);

        List<Role> roles = new LinkedList<>();
        roles.add(Role.ROLE_USER);
        user.setRoles(roles);

        Logger.getLogger(getClass()).info(user);
        getHibernateTemplate().save(user);
    }
...
} 
```

**更新**
好的，所以我添加了一些 AOP 魔术添加输出，在 ScopedBeanInterceptor 中处理实体对象时会发生什么。它完好无损。虽然 Hibernate 的 BasicBinder 是绑定空值到 SQL 语句。有什么帮助吗？

日志：

```
11:27:51,866 DEBUG org.hibernate.SQL:111 - select userimpl0_.id as id1_, userimpl0_.creationDate as creation2_1_, userimpl0_.lastModified as lastModi3_1_, userimpl0_.city as city1_, userimpl0_.country as country1_, userimpl0_.latitude as latitude1_, userimpl0_.longitude as longitude1_, userimpl0_.postalCode as postalCode1_, userimpl0_.street as street1_, userimpl0_.birthDate as birthDate1_, userimpl0_.firstName as firstName1_, userimpl0_.secondName as secondName1_, userimpl0_.sex as sex1_, userimpl0_.surName as surName1_, userimpl0_.alias as alias1_, userimpl0_.enabled as enabled1_, userimpl0_.loginEmail as loginEmail1_, userimpl0_.password as password1_, userimpl0_.preferences_id as prefere19_1_ from TBL_USER userimpl0_ where userimpl0_.loginEmail=?
11:27:51,878 TRACE org.hibernate.type.descriptor.sql.BasicBinder:81 - binding parameter [1] as [VARCHAR] - blady_the_best@o2.pl
11:27:52,009  INFO hsqldb.db.HSQLDB39E3504C79.ENGINE:? - Database closed
11:27:52,225 DEBUG org.hibernate.SQL:111 - select userimpl0_.id as id1_, userimpl0_.creationDate as creation2_1_, userimpl0_.lastModified as lastModi3_1_, userimpl0_.city as city1_, userimpl0_.country as country1_, userimpl0_.latitude as latitude1_, userimpl0_.longitude as longitude1_, userimpl0_.postalCode as postalCode1_, userimpl0_.street as street1_, userimpl0_.birthDate as birthDate1_, userimpl0_.firstName as firstName1_, userimpl0_.secondName as secondName1_, userimpl0_.sex as sex1_, userimpl0_.surName as surName1_, userimpl0_.alias as alias1_, userimpl0_.enabled as enabled1_, userimpl0_.loginEmail as loginEmail1_, userimpl0_.password as password1_, userimpl0_.preferences_id as prefere19_1_ from TBL_USER userimpl0_ where userimpl0_.alias=?
11:27:52,230 TRACE org.hibernate.type.descriptor.sql.BasicBinder:81 - binding parameter [1] as [VARCHAR] - Bladositto
11:27:52,346  INFO hsqldb.db.HSQLDB39E3504C79.ENGINE:? - Database closed
11:27:52,470  INFO model.hibernate.UserServiceImpl:50 - User[id: null    loginEmail: blady_the_best@o2.pl    alias: Bladositto   password: asdasd]   class type:class model.hibernate.UserImpl$$EnhancerByCGLIB$$536b42dd
11:27:52,481  INFO helpers.EntityAuditor:13 - User[id: null  loginEmail: blady_the_best@o2.pl    alias: Bladositto   password: asdasd]
11:27:52,483  INFO helpers.EntityAuditor:13 - User[id: null  loginEmail: blady_the_best@o2.pl    alias: Bladositto   password: asdasd]
11:27:52,581 DEBUG org.hibernate.SQL:111 - insert into TBL_USER (id, creationDate, lastModified, city, country, latitude, longitude, postalCode, street, birthDate, firstName, secondName, sex, surName, alias, enabled, loginEmail, password, preferences_id) values (default, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
11:27:52,587 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [1] as [TIMESTAMP] - <null>
11:27:52,589 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [2] as [TIMESTAMP] - <null>
11:27:52,590 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [3] as [VARCHAR] - <null>
11:27:52,604 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [4] as [VARCHAR] - <null>
11:27:52,606 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [5] as [DOUBLE] - <null>
11:27:52,609 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [6] as [DOUBLE] - <null>
11:27:52,610 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [7] as [VARCHAR] - <null>
11:27:52,611 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [8] as [VARCHAR] - <null>
11:27:52,612 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [9] as [DATE] - <null>
11:27:52,614 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [10] as [VARCHAR] - <null>
11:27:52,615 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [11] as [VARCHAR] - <null>
11:27:52,616 DEBUG org.hibernate.type.EnumType:136 - Binding null to parameter: 12
11:27:52,618 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [13] as [VARCHAR] - <null>
11:27:52,619 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [14] as [VARCHAR] - <null>
11:27:52,621 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [15] as [BIT] - <null>
11:27:52,621 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [16] as [VARCHAR] - <null>
11:27:52,623 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [17] as [VARCHAR] - <null>
11:27:52,625 TRACE org.hibernate.type.descriptor.sql.BasicBinder:70 - binding parameter [18] as [BIGINT] - <null>
11:27:52,767  INFO hsqldb.db.HSQLDB39E3504C79.ENGINE:? - Database closed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:47:41.650

“未知实体”位是因为默认情况下 Hibernate 只查看您传入的对象的类。Hibernate 不知道这个 Spring 增强类。在 Hibernate 条款中，您需要注册一个`org.hibernate.EntityNameResolver`合约以允许自定义实体名称解析。真的 Spring 可能应该注册它，但这是一个小细节；）

或者，您可以调用 save() et 的形式。人。接受实体名称。例如，而不是：

```
getHibernateTemplate().save( user ); 
```

改用这个：

```
getHibernateTemplate().save( User.class.getName(), user ); 
```

（假设 Spring 的 HibernateTemplate 实际上公开了这些方法，考虑到我对它们的模板类的经验，这实际上是一个很大的假设）。

# ruby-on-rails - “heroku run rake assets:clean” 不清理任何东西

> ID：12236022
> 
> 赞同：10
> 
> 时间：2012-09-02T12:40:38.603
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

我执行

```
$ heroku run rake assets:clean
Running `rake assets:clean` attached to terminal... up, run.2
/usr/local/bin/ruby /app/vendor/bundle/ruby/1.9.1/bin/rake assets:clean:all RAILS_ENV=production RAILS_GROUPS=assets
rm -rf /app/public/assets 
```

但它看起来不起作用，因为我可以通过 http 请求访问资产，而且如果我打开*heroku 控制台*，我可以看到文件：

```
$ heroku run console
irb(main):013:0> Dir.glob "./public/assets/*"
=> ["./public/assets/img", "./public/assets/application.js.gz", "./public/assets/application.js", "./public/assets/rails.png", "./public/assets/manifest.yml", "./public/assets/application.css", "./public/assets/assets", "./public/assets/application.css.gz"] 
```

我需要删除资产，因为它们与我的新配置产生冲突。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-12T07:16:25.673

rake assets:clean 功能已被替换为

```
rake assets:clobber 
```

在最新版本的 Rails 中。

[https://github.com/rails/sprockets-rails/blob/master/README.md](https://github.com/rails/sprockets-rails/blob/master/README.md)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-21T23:22:48.733

我必须做：

```
heroku repo:purge_cache 
```

等一下。`rake assets:clobber`对我不起作用，即使它打印了：

```
INFO -- : Removed /app/public/assets
rm -rf /app/tmp/cache/assets] 
```

如果你运行 heroku 命令并得到：

```
 !    `repo:purge_cache` is not a heroku command.
 !    See `heroku help` for a list of available commands. 
```

在你的heroku工具带中安装命令：

```
heroku plugins:install https://github.com/heroku/heroku-repo.git 
```

并重新运行。

# python - “替换（*某事）”中的星号是什么？（Python）

> ID：12236023
> 
> 赞同：5
> 
> 时间：2012-09-02T12:40:57.907
> 
> 标签：python

> **可能重复：**
> [*args 和 **kwargs 是什么意思？](https://stackoverflow.com/questions/287085/what-does-args-and-kwargs-mean)

我刚刚阅读 Mining the social web 并遇到了我无法弄清楚的 python 语法：

```
transforms = [(', Inc.', ''), (', Inc', ''), (', LLC', ''), (', LLP', '')]

"google, Inc.".replace(*transforms[0]) 
```

但是如果我输入

```
*transforms[0] 
```

在解释器中，它说它是无效的语法。我用谷歌搜索了它，但 python 文档确实不适合这份工作。

那么这里的星号是什么意思呢？谢谢你们。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-02T12:43:37.977

python中的`*argument`格式意味着：使用序列中的所有元素`argument`并将它们作为参数传递给函数。

在这种特定情况下，这意味着：

```
"google, Inc.".replace(', Inc.', '') 
```

这是最容易证明的：

```
>>> def foo(arg1, arg2):
...     print arg1, arg2
...
>>> arguments = ('spam', 'eggs')
>>> foo(*arguments)
spam, eggs 
```

您还可以使用`**kw`双星格式来传递关键字参数：

```
>>> def foo(arg1='ham', arg2='spam'):
...     print arg1, arg2
...
>>> arguments = dict(arg2='foo', arg1='bar')
>>> foo(**arguments)
bar, foo 
```

您可以在函数定义中使用相同的拼写来*捕获*任意位置和关键字参数：

```
>>> def foo(*args, **kw):
...     print args, kw
...
>>> foo('arg1', 'arg2', foo='bar', spam='eggs')
('arg1', 'arg2'), {'foo': 'bar', 'spam': 'eggs'} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-02T12:49:13.187

星号解包一个可迭代对象。我认为最好用一个例子来解释：

```
>>> def exampleFunction (paramA, paramB, paramC):
    print('A:', paramA)
    print('B:', paramB)
    print('C:', paramC)

>>> myTuple = ('foo', 'bar', 'baz')
>>> myTuple
('foo', 'bar', 'baz')
>>> exampleFunction(myTuple)
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    exampleFunction(myTuple)
TypeError: exampleFunction() takes exactly 3 arguments (1 given)
>>> exampleFunction(myTuple[0], myTuple[1], myTuple[2])
A: foo
B: bar
C: baz
>>> exampleFunction(*myTuple)
A: foo
B: bar
C: baz 
```

如您所见，我们定义了一个函数，该函数接受*三个*参数和一个包含三个元素的元组。现在，如果我们想直接使用元组中的值，我们不能只传递元组并让它工作。我们可以分别传递每个元素，但这非常冗长。我们所做的是使用星号来*解包*元组，并基本上使用元组中的元素作为参数。

当使用未知数量的参数时，解包功能还有第二种用法：

```
>>> def example2 (*params):
    for param in params:
        print(param)

>>> example2('foo')
foo
>>> example2('foo', 'bar')
foo
bar
>>> example2(*myTuple)
foo
bar
baz 
```

星号允许我们在这里定义一个参数，该参数采用传递的所有剩余值并将其打包到一个可迭代对象中，因此我们可以对其进行迭代。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-02T12:43:26.417

它将传递的元组转换为参数列表。所以

```
"google, Inc.".replace(*transforms[0]) 
```

变成

```
"google, Inc.".replace(', Inc.', '') 
```

通过这种方式，您可以以编程方式构造正在传递的参数列表（可变长度是一个关键优势）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T12:46:27.527

检查 Python 教程的第 4.7.4 节：http: [//docs.python.org/tutorial/controlflow.html#more-on-defining-functions](http://docs.python.org/tutorial/controlflow.html#more-on-defining-functions)

```
But if I type

*transforms[0]
in the interpreter, it says it is invalid syntax. 
```

transforms[0] 前面的 * 只在函数调用中有意义。

使用列表中第一个元组中的数据进行此调用的另一种方法是：

“谷歌公司”.replace(transforms[0][0],transforms[0][1])

# php - Zend Framework 2 控制台路由

> ID：12236026
> 
> 赞同：2
> 
> 时间：2012-09-02T12:41:28.090
> 
> 标签：php, console, zend-framework2

我正在尝试为我的 ZF2 应用程序定义一些控制台路由，如此处所述[http://packages.zendframework.com/docs/latest/manual/en/modules/zend.console.routes.html](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.console.routes.html)

在模块配置中我有：

```
'console' => array(
    'router' => array(
        'routes' => array(
            'user-set-password' => array(
                'options' => array(
                    'route' => 'user password <username> <password>',
                    'defaults' => array(
                        'controller' => 'User\Profile',
                        'action' => 'setpassword'
                    ),
                ),
            ),
        ),
    ),
), 
```

但它似乎永远不会匹配路线，因为它总是打印使用信息。也不会匹配像“测试”这样的简单路线。（当我在路由参数中写入一些废话时，执行失败，`Zend\Mvc\Router\Exception\InvalidArgumentException`因此它在加载模块时识别控制台路由）

是我的错还是最新的 zf2 版本中的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T13:37:51.243

我刚刚在路由定义的不一致接口中找到了解决方案：

如果您为控制器提供以下架构，它将起作用：

```
'controller' => 'User\Controller\Profile' 
```

能够以与http路由相同的方式定义它会更好：

```
'defaults' => array(
    '__NAMESPACE__' => 'User\Controller',
    'controller' => 'Profile',
    'action' => 'setpassword',
), 
```

刚刚为此打开了一个问题：http: [//framework.zend.com/issues/browse/ZF2-515](http://framework.zend.com/issues/browse/ZF2-515)

# php - Node.js POST 请求不起作用

> ID：12236027
> 
> 赞同：0
> 
> 时间：2012-09-02T12:41:29.490
> 
> 标签：php, node.js, post

我在节点请求中的参数没有达到它的目标......我没有发现任何错误......

```
 var data = querystring.stringify({
      image: 'test',
      test: 'testitest'
  });

  var options = {
      host: 'www.visionalism.com',
      path: path,
      method: 'POST'
  };

var photo_req = http.request(options, function(response) {
    response.setEncoding('utf8');
    response.on('data', function (chunk) {
        console.log("body: " + chunk);
    });
});
  console.log(data);
photo_req.write(data);
photo_req.end(); 
```

在另一边，POST 数组 (php) 完全是空的......

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:53:39.947

通过添加标题解决了问题....错误

# fluent-nhibernate - FluentNhibernate 和 HasMany

> ID：12236030
> 
> 赞同：0
> 
> 时间：2012-09-02T12:41:50.413
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我用 FluentNhibernate 尝试了一个简单的测试应用程序，但它没有按我的预期工作。这是我的课程：

```
public class Document : DataEntity
{
    public virtual string Title { get; set; }

    public virtual string FileName { get; set; }

    public virtual DateTime LastModificationDate { get; set; }

    public virtual User LastModificationBy { get; set; }

    public virtual byte[] Content { get; set; }

    public virtual User Owner { get; set; }
}

public class User : DataEntity
{
    public virtual string FirstName { get; set; }

    public virtual string LastName { get; set; }

    public virtual string Login { get; set; }

    public virtual string PasswordHash { get; set; }

    public virtual string Email { get; set; }

    public virtual IList<Document> OwnedDocuments { get; set; }

    public User()
    {
        this.OwnedDocuments = new List<Document>();
    }
}

internal class UserMapping : ClassMap<User>
{
    public UserMapping()
    {
        this.Id(x => x.Id);
        this.Map(x => x.FirstName);
        this.Map(x => x.LastName);
        this.HasMany(x => x.OwnedDocuments).Inverse();
    }
}

    public DocumentMapping()
    {
        this.Id(x => x.Id);
        this.Map(x => x.Title);
        this.Map(x => x.FileName).Not.Nullable();
        this.Map(x => x.LastModificationDate).Index("IDX_ModificationDate");
        this.Map(x => x.Content);
        this.References(x => x.LastModificationBy).Column("LastModificationBy");
        this.References(x => x.Owner).Column("Owner");
        this.Table("Document");
    } 
```

我尝试使用以下代码对其进行测试

```
using (var transaction = Session.BeginTransaction())
        {
            var users = this.kernel.Get<IRepository<User>>();
            var document = this.kernel.Get<IRepository<Document>>();
            var user = new User { Login = "Blubb" };
            users.Add(user);
            var list = Builder<Document>.CreateListOfSize(50).All().With(x => x.Owner = user).Build().ToList();
            var list2 = Builder<Document>.CreateListOfSize(50).All().Build().ToList();
            list.ForEach(x => user.OwnedDocuments.Add(x));
            document.Add(list);
            document.Add(list2);
            transaction.Commit();
            var i = document.All().Count();
            i.Should().Be(50);
            var docs = ((IGuidKeyedRepository<User>)users).FindBy(user.Id).OwnedDocuments.Count();
            docs.Should().Be(50);
        } 
```

第一个问题是，为什么我不调用document.Add(list);时文档计数总是0？我想当我将一些文档添加到用户的文档集合中时，它们会自动添加到文档中吗？为什么最后一个测试是 100？因为我过滤了属于该用户的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:20:14.773

看起来您需要在子集合上设置级联选项`OwnedDocuments`

```
this.HasMany(x => x.OwnedDocuments).Inverse().Cascade.AllDeleteOrphan(); 
```

如果您将任何子对象添加到集合中，上述设置将保存所有子对象，如果您从集合中删除它们并保存对象，它将删除这些子对象。您可以在 nhibernate 文档中找到有关这些设置的更多信息：

[http://www.nhforge.org/doc/nh/en/](http://www.nhforge.org/doc/nh/en/)

# c - 如何将 luasql.sqlite3 嵌入到静态链接的 C 程序中？

> ID：12236032
> 
> 赞同：1
> 
> 时间：2012-09-02T12:41:55.513
> 
> 标签：c, sqlite, lua, luasql

该`luasql.sqlite3`模块已成功编译到我的C程序中，静态链接。但是，该模块似乎尚未注册。在 Lua 脚本中调用`require 'luasql.sqlite3'`always 失败。

其他一些模块调用`luaL_register`来注册自己。但是`luaL_register`没有被调用`luaopen_luasql_sqlite3`。`luasql.sqlite3`在这种情况下如何注册？

我使用 Lua-5.1.5。

[luaopen_luasql_sqlite3的源码在底部](https://github.com/LuaDist/luasql-sqlite3/blob/master/src/ls_sqlite3.c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:01:32.733

这是将 luaopen_ 函数放入 package.preload 表的方法。

```
lua_getfield(L, LUA_GLOBALSINDEX, "package");
lua_getfield(L, -1, "preload");
lua_pushcfunction(L, luaopen_socket_core);
lua_setfield(L, -2, "socket.core"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T13:37:12.143

`require`与 DLL 一起工作，因为它使用给定的模块名称来跟踪 DLL 并从该 DLL 中获取特定函数。它不能自动用于静态库，因为 C 和 C++ 没有自省；您无法动态找到以 . 开头的 C 函数`luaopen_`。

因此，你需要告诉 Lua 包系统你想让这个模块对 Lua 代码可用。为此，您可以将`luaopen_`函数粘贴在`package.preload`表中，并为其命名模块将被调用的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-12T01:56:59.517

这适用于 LuaSQL 2.4 和 Lua 5.1 及更新版本...

在 C 中

```
/* Execute the luasql initializers */
lua_getglobal(L, "package");
lua_getfield(L, -1, "preload");
lua_pushcfunction(L, luaopen_luasql_postgres);
lua_setfield(L, -2, "luasql.postgres");
lua_pop(L, 2);

lua_getglobal(L, "package");
lua_getfield(L, -1, "preload");
lua_pushcfunction(L, luaopen_luasql_mysql);
lua_setfield(L, -2, "luasql.mysql");
lua_pop(L, 2); 
```

等等，对于您需要的每个 DBI 接口……然后，在您的 Lua 脚本中

```
 local luasql = require "luasql.postgres";
 pg = luasql.postgres();
 dev, err = pg:connect( netidb_conninfo );
 if err then ..... 
```

请注意，您必须自己制作 luaopen_luasql_postgres() 等原型才能成功编译 C，因为该库没有为外部使用定义的函数的原型。

# android - Android：如何在将项目拖动到边缘时垂直自动滚动 GridView

> ID：12236035
> 
> 赞同：2
> 
> 时间：2012-09-02T12:42:14.623
> 
> 标签：android, gridview

我正在尝试在android（ICS）中实现拖放`GridView`，但是当我将它拖到`item`屏幕边缘时，`GridView`它不会滚动。我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:23:33.030

首先，如果您不需要支持 android 2.x (API <11)，那么这个[Andorid 拖放教程](http://developer.android.com/guide/topics/ui/drag-drop.html)就是您要找的。我从未尝试过这种方式，因为我必须在 2.x 上实现它，但我看了看它似乎很简单。

要实现自动滚动，我想您可以在网格视图上使用[ACTION_DRAG_EXITED](http://developer.android.com/reference/android/view/DragEvent.html#ACTION_DRAG_EXITED)或[ACTION_DRAG_LOCATION](http://developer.android.com/reference/android/view/DragEvent.html#ACTION_DRAG_LOCATION)并在您看到该位置靠近视图边界时手动触发滚动。

如果您必须在 2.x 上实现它，那么它会变得更加困难，您基本上需要自己实现所有 DRAG 事件或其中的一个子集。我用 ListView 做过一次，你要做的是：

*   覆盖 gridView touchEvent。
*   使用动作 ACTION_MOVE、ACTION_DOWN、ACTION_UP 来触发 Drag 事件

在 GridView 项目上启用绘图缓存 ( [setDrawingCacheEnabled](http://developer.android.com/reference/android/view/View.html#setDrawingCacheEnabled%28boolean%29) ) 并使用[getDrawingCache()](http://developer.android.com/reference/android/view/View.html#getDrawingCache%28%29)复制 DRAG_START 上的视图位图。您需要做的是使用在 GridView 顶部的 ACTION_MOVE 事件给您的位置绘制的位图。

这并不容易，但如果你花时间，你可以设法得到它。

更重要的是，我今天还没有检查，但也许你可以尝试谷歌一下，看看是否有人花时间实现它并发布它开源。

# javascript - 带有变量和可能非法字符的 JS 正则表达式

> ID：12236036
> 
> 赞同：0
> 
> 时间：2012-09-02T12:42:16.987
> 
> 标签：javascript, regex

我无法让这个正则表达式字符串在 Javascript 中工作：

```
var input = $("input").val();
var hi = "(?<=[^ ​ ‍])" + input + "(?=[$ ​ ‍])";
var reg = new RegExp(hi);
alert(reg); 
```

最后一行不起作用，但是当正则表达式有效时它确实起作用。在将变量传递给正则表达式对象之前，我将变量放入第二个字符串以进行完整的正则表达式搜索。为什么这个正则表达式查询无效？（如果您想知道，括号中的字符是空格、zwsp、nbsp 和 zwj。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:48:37.320

JavaScript 正则表达式不支持后视。

但是，它们确实支持前瞻，因此如果您确实需要该功能，您可以反转输入并编写“向后”表达式。如果你想要同时向前看和向后看，这会有点复杂。

由于您尚未透露您实际想要实现的目标，因此您可能能够避免零宽度匹配，而只使用正常的捕获组。

# python - Google Documents List API v3 (Python) 更新文档

> ID：12236038
> 
> 赞同：2
> 
> 时间：2012-09-02T12:42:20.030
> 
> 标签：python, google-drive-api, google-docs-api

在创建 Google Docs/Drive 上的文档后，我正在尝试使用 Python 的 GData 帮助程序更新它。

新版本的 API 缺少 Py 的文档。

```
client = gdata.docs.client.DocsClient(source=PluginConfig.APP_NAME)
client.http_client.debug = PluginConfig.DEBUG
client.client_login(
    PluginConfig.EMAIL,
    PluginConfig.PASSWORD,
    source=PluginConfig.APP_NAME,
    service=client.auth_service
) 
```

[...]

```
# Upload the text file  
ms = gdata.data.MediaSource()
ms.SetFileHandle(file_path, content_type)
doc = gdata.docs.data.Resource(type='document', title=title)
doc.description = gdata.docs.data.Description(description)
doc = client.CreateResource(doc, media=ms)

doc = client.UpdateResource(doc, media=ms, new_revision=True) 
```

登录和文档创建工作正常，但`Update()`接收`400 Bad Request`

```
Traceback (most recent call last):
  File "coll.py", line 301, in <module>
    main()
  File "coll.py", line 293, in main
    doc = client.UpdateResource(doc, media=ms, new_revision=True)
  File "/usr/lib/python2.7/dist-packages/gdata/docs/client.py", line 344, in update_resource
    uri_params=uri_params, **kwargs)
  File "/usr/lib/python2.7/dist-packages/gdata/client.py", line 1151, in update_file
    auth_token=auth_token, method='PUT')
  File "/usr/lib/python2.7/dist-packages/gdata/client.py", line 1085, in upload_file
    start_byte, self.file_handle.read(self.chunk_size))
  File "/usr/lib/python2.7/dist-packages/gdata/client.py", line 1044, in upload_chunk
    raise error
gdata.client.RequestError: Server responded with: 400, Invalid Request 
```

更多输出： http: [//pastebin.com/LZL3qV0N](http://pastebin.com/LZL3qV0N)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:36:53.650

尝试使用较新的 Drive API，其文档包括[参考指南](https://developers.google.com/drive/v2/reference/)中的 Python 示例、Python[快速入门](https://developers.google.com/drive/quickstart)和[在 App Engine 上用 Python 编写的完整示例应用程序](https://developers.google.com/drive/examples/python)。

# mysql - 如何在Stata中使用准备好的语句？

> ID：12236043
> 
> 赞同：0
> 
> 时间：2012-09-02T12:43:11.677
> 
> 标签：mysql, stata

我想在 Stata 中使用准备好的语句，例如以下（伪代码）示例：

```
for each key in keylist
   odbc load, exec("SELECT * FROM table where tablekey = $key")
   do stuff
end 
```

如何将参数值`key`带入我的语句中？我尝试过字符串连接、局部变量等，但没有任何效果。我想知道是否有像 Java ( `SELECT * FROM Table WHERE tablekey = ?`) 这样的准备好的语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:11:51.433

`help local`在Stata中阅读。本地宏以单引号开始（在 1 的左侧）并以单引号结束（在 Enter 的左侧）。然后可能是`help foreach`。我想正确的语法是

```
 local keylist "the actual list of keys"
   foreach key of local keylist {
      odbc load, exec("SELECT * FROM table where tablekey = `key'")
      save thisdataset`key', replace
   } 
```

等等

（Stata 是我所知道的唯一编程环境 :)）。

# php - 将平面数组转换为多维数组

> ID：12236051
> 
> 赞同：0
> 
> 时间：2012-09-02T12:43:49.727
> 
> 标签：php, loops

使用 PHPExel 解析 XLS 文件。它执行以下数组结构：

```
Array(

    [0] => Array(
            [A] => City 1
            [B] => NULL
            [C] => NULL
            [D] => NULL
            [E] => NULL
            [F] => NULL
            [G] => NULL
        )

    [1] => Array(
            [A] => City 1 - Sell Department Phone
            [B] => NULL
            [C] => 123-123-123
            [D] => NULL
            [E] => NULL
            [F] => NULL
            [G] => NULL
          )

    [2] => Array(
            [A] => Stock 1
            [B] => Stock 1 Address
            [C] => Stock 1 Phone
            [D] => NULL
            [E] => NULL
            [F] => NULL
            [G] => NULL
          )

    [3] => Array(
            [A] => Stock 2
            [B] => Stock 2 Address
            [C] => Stock 2 Phone
            [D] => NULL
            [E] => NULL
            [F] => NULL
            [G] => NULL
          )

    // City Name 2 begins
    [4] => Array(
            [A] => City 2
            [B] => NULL
            [C] => NULL
            [D] => NULL
            [E] => NULL
            [F] => NULL
            [G] => NULL
        )
    [5] => Array(
            [A] => City 2 - Sell Department Phone
            [B] => NULL
            [C] => 123-123-124
            [D] => NULL
            [E] => NULL
            [F] => NULL
            [G] => NULL
          )
    // and so on...      
) 
```

上面的结构不方便处理，所以我需要将其转换为以下形式：

```
Array(

  [0] => Array(
    [City 1] => Array(
      [sell] => City 1 - Sell Department Phone
      [stocks] => Array(
        [Stock 1] => Array(
          [address] => Stock 1 Address
          [phone] => Stock 1 Phone
        )

        [Stock 2] => Array(
          [address] => Stock 2 Address
          [phone] => Stock 2 Phone
        )
      )
    )
  )

  [1] => Array(
    [City 2] => Array(
      [sell] => City 2 - Sell Department Phone
      [stocks] => Array(
        [Stock 1] => Array(
          [address] => Stock 1 Address
          [phone] => Stock 1 Phone
        )
        [Stock 2] => Array(
          [address] => Stock 2 Address
          [phone] => Stock 2 Phone
        )
      )
    )
  )
) 
```

到目前为止我的代码：

```
$output = array();

foreach ($sheetData as $key => $data) {

  // Filter out empty array items
  $data = array_filter($data);

  if (count($data) == 1 && $data['A']) {
   // Get "City" name
   $output[$key]['city'] = $data['A'];
  }

  // Stuck here
} 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:12:27.827

您可以尝试使用 array_chunk 在一个数组中获取与城市对应的所有索引。然后，对于该数组，手动构造新数组。

```
$final_array = array();
$arr = array_chunk( $old_array, 4 );
foreach( $arr as $key => $city ) {
    $final_array[$key]['sell'] = $city[1]['A'];
    //and so on...
} 
```

# android - 在应用程序购买中，多个项目？

> ID：12236058
> 
> 赞同：0
> 
> 时间：2012-09-02T12:44:42.987
> 
> 标签：android, in-app-purchase, checkout

我目前已经集成了一段时间的应用程序购买，但似乎它只是为少量要出售的物品设置，每个物品都需要添加到应用程序的目录中，然后应用程序发布在开发者仪表板中添加的应用内产品，

我需要的：

为了能够在购买后每周添加 10 多种可供下载的产品，这是每周更新应用程序并将所有新项目添加到目录中的唯一方法吗？

Ps 我不能做订阅模型。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:45:50.433

您可以使用 CSV 文件在开发者控制台中批量导入项目。虽然没有 API 可以从应用程序中获取商品，因此您需要将列表以易于解析的格式（XML、JSON、CSV 等）放在您的服务器上，并让应用程序检查并在有新商品时更新其店面可用的。

# jsf - 使用 Primefaces Mobile 传递参数

> ID：12236065
> 
> 赞同：0
> 
> 时间：2012-09-02T12:45:19.977
> 
> 标签：jsf, jsf-2, primefaces

我将 JSF 和 PrimeFaces Mobile 用于我的应用程序。我需要我的用户可以在从我的数据库中的表生成的不同文件之间进行选择。到目前为止，我使用 PrimeFaces Mobile 使用 p:dataList，但是当我将用户选择的文件作为参数传递时，我遇到了一个问题：当我调用该方法时，总是将页面中的最后一个文件加载传递给该方法。我必须用别的东西吗？我怎样才能得到正确的参数？

提前致谢

我的代码：

```
 <p:dataList value="#{filesPersonaliBean.lfiles}" var="files" itemType="disc" >  
   <h:outputLink value="${filesPersonaliBean.prepareShareMobile(files)}" >
                                <h:outputText value="#{files.id} "/>
                                <h:outputText value="#{files.filename} " />

    </h:outputLink>
   </p:dataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:17:53.983

来自移动用户指南：

“将内容包装在列组件中，以防您进行选择。这是核心 UIData 中正确处理选择的要求。”

# c++ - 字符串运算和奇数结果

> ID：12236068
> 
> 赞同：1
> 
> 时间：2012-09-02T12:45:51.590
> 
> 标签：c++, string, visual-studio-2012

第一次发帖，如果我违反协议，我深表歉意。

我正在为学校制定一个愚蠢的计划，我有以下代码。

 `````
cout << "//Dictionary Program//\n\n";
cout << "Enter a command:\n's' - to search for a pattern at the beginning\n";
cout << "'e' - to search for a pattern at the end\n";
cout << "'c' - to search for a pattern anywhere in the word\n";

//Gather user input.
cout << "Please enter a command ('q' to quit): ";
cin >> userCommand;

cmdCheck = userCommand.find("secq");

while(cmdCheck < 0 || userCommand.length() > 1){
    cout << "Please enter a valid command\n";
    cin >> userCommand;
    cmdCheck = userCommand.find("secq");

} 
````  `这正在驱动一个菜单，我正在尝试验证输入。它应该是一个字母，并且是以下“secq”之一

1.  我在即时窗口中使用 string.find() 的时间很糟糕。我最终得到 CXX0047：错误：参数列表与函数不匹配。我根本不明白，因为我在其他地方使用它。

2.  while 条件对我不好。当我给程序一个“v”时，它会像它应该的那样在块内结束，但是我给它一个“s”，其中 cmdCheck 应该评估为 0，但它给出一个 -1 并留在块内。

3.  最后，我用 cmdCheck 编写了另一个错误，但我在 while 条件下遇到了这个错误，它也不起作用。`while(userCommand.find("secq") < 0 ...`

我最初的想法是输入缓冲区有问题，但是当我在 Locals 窗口中查看 userCmd 变量时，我有一个大小为 1 的字符数组。缓冲区中只有字母，没有垃圾（据我所知）

我知道我可以绑一堆|| 与每个命令一起，但在我看来这更优雅一些。我看了我去年的期末考试，我的条件很丑。在这一点上，这更像是一个原则问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:50:23.293

在字符串中使用 getline 获取输入。

```
getline (cin, userCommand) ; 
```

如果输入是一个字母，则将其放在一个字符中。如果您坚持将其放入字符串中，请使用其第一个索引进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:50:26.977

我猜那`userCommand`是一个`std::string`. 由于该命令应该是单个字符，因此请使用 a`char`而不是字符串。然后只需将该值用作`switch`语句中的参数，并为有效字符提供适当的`default`大小写和给出错误消息的大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T13:02:49.947

该表达式`userCommand.find("secq")`试图`"secq"`在`userCommand`. 从它的声音来看，您实际上想做完全相反的事情，即`userCommand`在字符串中找到`"secq"`：

```
std::string::size_type cmdCheck = std::string("secq").find(userCommand);
while (cmdCheck == std::string::npos) {
    ...
} 
```

另请注意，`std::string`它不会返回`int`. 相反，它返回一个`std::string::size_type`. 这可能是一个`typedef`for`int`但也可能是`typedef`一个不同的整数类型。`find()`如果找不到要传递的字符串，`std::string::npos`则返回。这个常数的确切值也没有定义，所以你最好与这个常数进行比较，而不是做任何假设。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T13:02:14.420

也许像这样的循环会更合适：

```
char result;
std::cout << "Your command: ";

for (std::string line; ; )
{
    if (!(std::getline(std::cin, line))
    {
        std::cerr << "Fatal error: Unexpected end of input!\n";
        std::exit(1); 
    }

    if (line.size() == 1 && line.find_first_of("secq") == 0)
    {
        result = line[0];
        break;
    }

    std::cout << "Sorry, I did not understand. Please say again: ";
}

std::cout << "Thank you! You said, '" << result << "'\n"; 
```

现在如果循环中断，`result`将包含用户输入。``

# php - Highcharts/Highstocks jQuery - 滚动、缩放和边距问题

> ID：12236071
> 
> 赞同：1
> 
> 时间：2012-09-02T12:46:13.733
> 
> 标签：php, jquery, json, highcharts, highstock

我正在努力在图表中实时显示我的股票数据。我正在使用 Highcharts。但我没有得到正确的输出。看图片

![在此处输入图像描述](../Images/f416dfeb70fc8cba5cbe0731cb01e0d3.png)

问题：

1.  **边距**：
    如您所见，y 轴上的边距非常高，因此我的 ohlc 数据显示非常薄。

2.  **悬停在某些点上时未突出显示**：
    当我尝试将鼠标悬停在某些点上时，它不会显示该点的数据。它坚持上一点的数据。

3.  **底部的蓝色区域阴影**：
    如您所见，底部的蓝色区域不会根据特定区域的数据而变化。

4.  **滚动问题**：
    当我尝试移动滚动条或尝试增加其大小时，它会卡在最右侧。（所以无法移动滚动，因为当我尝试移动它时它卡在右侧。）

5.  **缩放问题**：
    当我尝试使用缩放选项放大时，我无法缩放我的数据。对于所有缩放，它与“全部”选项相同

我[对此脚本](http://www.highcharts.com/stock/demo/candlestick-and-volume)进行了一些更改：（两个窗格，烛台和音量）以接收我的数据。

我正在使用 $.getJSON 从 PHP 文件中检索所有实时数据并做所有事情。
我无法创建它，因为它是我的实时股市数据。

这是代码：

```
$(function() {
    $.getJSON('get_data.php?type=ohlc', function(data) {

        // split the data set into ohlc and volume
        var ohlc = [],
            volume = [],
            dataLength = data.length;

            alert(data);

        for (i = 0; i < dataLength; i++) {
            ohlc.push([
                data[i]['SQLDT'], // the date
                parseFloat(data[i]['OPN']), // open
                parseFloat(data[i]['HGH']), // high
                parseFloat(data[i]['LWE']), // low
                parseFloat(data[i]['CLS']) // close
            ]);

            volume.push([
                data[i]['SQLDT'], // the date
                parseFloat(data[i]['VOL']) // the volume
            ])
        }

        // set the allowed units for data grouping
        var groupingUnits = [[
            'week',                         // unit name
            [1]                             // allowed multiples
        ], [
            'month',
            [1, 2, 3, 4, 6]
        ]];

        // create the chart
        chart = new Highcharts.StockChart({
            chart: {
                renderTo: 'container',
                alignTicks: false
            },

            rangeSelector: {
                selected: 1
            },

            title: {
                text: 'AAPL Historical'
            },

             xAxis:[ {
        min: 10
    },{
         min: 10
    }],

            yAxis: [{
                title: {
                    text: 'OHLC'
                },
                height: 200,
                lineWidth: 2,

            }, {
                title: {
                    text: 'Volume'
                },
                top: 300,
                height: 100,
                offset: 0,
                lineWidth: 2
            }],
              scrollbar: {
        enabled: true
    },
            series: [{
                type: 'candlestick',
                name: 'AAPL',
                data: ohlc,
                dataGrouping: {
                    units: groupingUnits
                }
            }, {
                type: 'column',
                name: 'Volume',
                data: volume,
                yAxis: 1,
                dataGrouping: {
                    units: groupingUnits
                }
            }]
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:33:07.077

> **边距：** 如您所见，y 轴的边距非常高！因此，我的 ohlc 数据显示非常薄。

尝试[调整最大值](http://api.highcharts.com/highstock#yAxis.max)以更好地利用房地产

> **悬停在某些点上时未突出显示：** 当我尝试将鼠标悬停在某些点上时，它不会显示该点的数据。它坚持上一点的数据。

尝试禁用[Stick Tracking](http://api.highcharts.com/highstock#plotOptions.series.stickyTracking)

> **底部的蓝色区域阴影：** 如您所见，底部的蓝色区域不会根据特定区域的数据而变化。

确保导航器指向正确的[基本系列](http://api.highcharts.com/highstock#navigator.baseSeries)

> **滚动问题：** 当我尝试移动滚动条或尝试增加它的大小时，它会卡在最右侧。（所以无法移动滚动，因为当我尝试移动它时它会卡在右侧。）
> 
> **缩放问题：** 当我尝试使用缩放选项放大时，我无法缩放我的数据。对于所有缩放，它与“全部”选项相同

如果您的 javascript 中出现其他问题，则可能会出现这些问题。检查控制台是否有错误。

我可以理解您无法共享您的真实代码，但该问题的 jsFiddle 再现可能会有所帮助。使用虚拟值，或共享 $.getJSON 调用的结果 json

# android - 自定义列表视图中的android按钮

> ID：12236075
> 
> 赞同：0
> 
> 时间：2012-09-02T12:47:09.143
> 
> 标签：android, listview, button

我已经使用自定义开发了一个 Android 应用程序`ListView`。我的自定义`ListView`包括`Textview`,`ImageView`和 2 `ImageButton`s。`ImageButton`单击它时，我想更改我的资源。（例如：从播放到停止）。更清楚的是，我在下面附上我的设计。

![在此处输入图像描述](../Images/3ba46a06fcd4c7c68268a5b16e295a19.png)

我怎样才能控制我`ImageButton`的 from `Activity`？

```
public class MyCustomBaseAdapterSurat extends BaseAdapter {
    private static ArrayList<SearchResults> searchArrayList;

    private LayoutInflater mInflater;
    ViewHolder holder;
    private StreamingMediaPlayer audioStreamer;

    public MyCustomBaseAdapterSurat(Context context,
            ArrayList<SearchResults> results) {
        searchArrayList = results;
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount() {
        return searchArrayList.size();
    }

    @Override
    public Object getItem(int position) {
        return searchArrayList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.customlistsurat, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.name);
            holder.iv = (ImageView) convertView.findViewById(R.id.imageView1);
            holder.play = (ImageButton) convertView
                    .findViewById(R.id.imageButton1);
            holder.rep = (ImageButton) convertView
                    .findViewById(R.id.imageButton2);
             holder.play.setOnClickListener(klikplay);
        //   holder.rep.setOnClickListener(klikrep);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.rep.setId(searchArrayList.get(position).getIdRep());
        holder.play.setId(searchArrayList.get(position).getIdPlay());
        holder.txtName.setText(searchArrayList.get(position).getName());
        holder.iv.setBackgroundResource(searchArrayList.get(position)
                .getDrawable());
        return convertView;
    }

    static class ViewHolder {
        TextView txtName;
        ImageView iv;
        ImageButton play;
        ImageButton rep;
    }

    private OnClickListener klikplay = new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            holder.play.setBackgroundResource(searchArrayList.get(v.getId())
                    .getDrawable());
            //startStreamingAudio();
        }
    };

} 
```

# jquery - 如何将变量内的结果分成几行并为每一行做foreach

> ID：12236076
> 
> 赞同：1
> 
> 时间：2012-09-02T12:47:10.053
> 
> 标签：jquery

您好，我正在通过 Ajax 编写一个搜索系统，但我遇到了一个问题，是否可以通过 ajax 中断数据获取并为 javascript 中的每一行执行**foreach ？**

在这里，我将用户的搜索查询发送到一个 php 文件，该文件从数据库中返回该查询的结果。

```
 $.post("rpc.php", {queryString: ""+inputString+""}, function(data) { 

        $('#suggestions').html(data); // Fill the suggestions div
    }); 
```

因此来自 php 文件的数据作为一组但逐行存储在**data变量中，例如示例..**

```
Google helps us
Facebook is a social network
Stackoverflow is the best
Im on twitter 
```

但

```
$('#suggestions').html(data); 
```

**将直接将数据**中的所有内容放入建议 html 元素中。

我想知道是否可以将**数据**内部的内容分解为行并为每一行执行**foreach ......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:48:46.727

拆分`data`by `<br />`，然后遍历生成的 lines 数组：

```
var lines = data.split("<br />");
var $suggestions = $("#suggestions");
for (var i = 0; i < lines.length; i++) {
  var line = lines[i];
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:00:49.480

您可以去掉换行符，以便呈现的 html 全部在一行中：

```
$('#suggestions').html( data.toString().replace(/\<br \/\>/g, ' ') ); 
```

[**此代码的工作演示**](http://jsfiddle.net/KxFQW/)

请注意，使用此正则表达式替换比执行多个 DOM 操作操作或字符串连接更有效。

* * *

为了完整起见，这也可以通过 for 循环实现，但在这里效率较低且不必要：

```
var arr = data.toString().split("<br />");
var text = '';

for (var i = 0; i < arr.length; i++ ) {
    text += ' ' + arr[i];
}

$('#suggestions').html( text ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:05:48.310

您应该能够使用`split`并`for`执行此操作：

```
$.post("rpc.php", {queryString: ""+inputString+""}, function(data) { 
    var lines = data.split("\n");
    for(var i = 0; i < lines.length; i++) {
        // Do something with each line
    }
}); 
```

您可能还想尝试将数据作为 JSON 数组发送，然后用于`$.getJSON`在客户端上处理它。

# android - gcm android中的应用程序ID

> ID：12236078
> 
> 赞同：4
> 
> 时间：2012-09-02T12:47:21.877
> 
> 标签：android, google-cloud-messaging

我正在使用 GCM，我对我的应用程序 ID 在 GCM 设置中的位置感到困惑——它是项目 ID 吗？另外我在哪里指定它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T06:57:34.027

发件人 ID - 发件人 ID 是您登录 Google API 控制台页面以创建项目时浏览器 URL 的 ID。您从 API 控制台获取的项目 ID，如入门中所述。发送者 ID 在注册过程中用于识别允许向设备发送消息的 Android 应用程序。

应用程序 ID - 注册以接收消息的 Android 应用程序。Android 应用程序由清单中的包名称标识。这可确保消息针对正确的 Android 应用程序。

检查此链接以获取更多信息-

[http://developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T12:57:24.267

当您在[https://code.google.com/apis/console](https://code.google.com/apis/console) Google API 控制台页面创建项目时，您的浏览器 URL 将更改为：

```
 https://code.google.com/apis/console/#project:4815162342 
```

记下#project: 之后的值：（本例中为**4815162342**）。这是您的项目 ID，用作 GCM 发件人 ID。

来源：http: [//developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

# jquery - 在 Nivo 滑块上播放/暂停按钮

> ID：12236079
> 
> 赞同：3
> 
> 时间：2012-09-02T12:47:29.343
> 
> 标签：jquery, jquery-plugins, slider, nivo-slider

有谁知道是否有办法将播放/暂停按钮添加到 Nivo 滑块？

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-06T13:33:34.690

将下面的代码添加到您的 jquery 就绪函数中。该代码添加了两个按钮用于启动和停止。此代码的优点是您不必修改 nivoslider.js。;-)

```
var slider = jQuery('#slider');
var nivoStartStopControl = jQuery('<div class="nivo-startstopNav"></div>');

slider.after(nivoStartStopControl);
nivoStartStopControl.append('<a href="#" id="nivoStart"><span>START</span></a> <a href="#" id="nivoStop"><span>STOP</span></a>');

jQuery('#nivoStop').click( function(event) {
   event.preventDefault();
   slider.data('nivoslider').stop();
});

jQuery('#nivoStart').click( function(event) {
   event.preventDefault();
   slider.data('nivoslider').start();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:52:16.350

只需在第 627 行的 nquery.nivo.slider.js 中添加此代码

```
jQuery('#pause').click(function(){
    if(!$(element).data('nivo:vars').stop){
        $(element).data('nivo:vars').stop = true;
        trace('Stop Slider');
    } });

jQuery('#play').click(function(){
    if($(element).data('nivo:vars').stop){
                     $(element).data('nivo:vars').stop = false;
                     trace('Start Slider');
                } }); 
```

来自： http: [//support.dev7studios.com/discussions/nivo-slider/1949-how-to-add-play-and-pause-button-on-the-image-slider](http://support.dev7studios.com/discussions/nivo-slider/1949-how-to-add-play-and-pause-button-on-the-image-slider)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T08:24:23.163

首先，在您的页面中插入 2 个按钮，将它们堆叠在同一位置，并为它们提供 ID 暂停和播放。

`<head>`然后，在页面的部分中添加这些代码行。

```
<script type="text/javascript">
$(window).load(function() {
    $("#Pause").click(function () { 
       $('#Pause').fadeOut(200); 
       $('#Play').fadeIn(200); 
       $('#Slider').data('nivoslider').stop();
      });
    $("#Play").click(function () {
        $('#Play').fadeOut(200);
        $('#Pause').fadeIn(200);
        $('#Slider').data('nivoslider').start();
      });
});</script> 
```

# javascript - 带有开始/停止按钮的 Javascript diashow（图片数组）不起作用，错误：src 未定义

> ID：12236080
> 
> 赞同：0
> 
> 时间：2012-09-02T12:47:51.643
> 
> 标签：javascript, arrays, setinterval

当我开始显示这就是我得到的：`Uncaught TypeError: Cannot read property 'src' of undefined`指向`function`：（`runPicGal`见下文）。希望你能帮忙。注意：奇怪的是我看到图片改变了一次然后我得到了错误。

完整的 JS 文件：

```
var picForDiashow;
var diashowPicArray = [];
var diashowPicArrayIndex = 0;

diashowPicArray [0] = new Image(); diashowPicArray [0].src = "./pics/1.jpg";
diashowPicArray [1] = new Image(); diashowPicArray [0].src = "./pics/2.jpg";
diashowPicArray [2] = new Image(); diashowPicArray [0].src = "./pics/3.jpg";
diashowPicArray [3] = new Image(); diashowPicArray [0].src = "./pics/4.jpg";
diashowPicArray [4] = new Image(); diashowPicArray [0].src = "./pics/5.jpg";

function initForDiashow () {

    picForDiashow = document.getElementById("diashowPic");
}

window.onload = initForDiashow;

function startDiashow () {

    picInterval = window.setInterval(runPicGal, 1000);
}

function stopDiashow () {

    window.clearInterval(picInterval);
}

function runPicGal () {

    diashowPicArrayIndex++;

    if (diashowPicArrayIndex > diashowPicArray.length) {
        diashowPicArrayIndex = 0;
    } 
    picForDiashow.src = diashowPicArray[diashowPicArrayIndex].src;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:51:07.630

您总是将元素添加到数组的*第一个*位置。因此，只有第一个元素`diashowPicArray[0]`, 将是可访问的。将初始化更改为以下内容：

```
diashowPicArray [0] = new Image(); diashowPicArray [0].src = "./pics/1.jpg";
diashowPicArray [1] = new Image(); diashowPicArray [1].src = "./pics/2.jpg";
diashowPicArray [2] = new Image(); diashowPicArray [2].src = "./pics/3.jpg";
diashowPicArray [3] = new Image(); diashowPicArray [3].src = "./pics/4.jpg";
diashowPicArray [4] = new Image(); diashowPicArray [4].src = "./pics/5.jpg"; 
```

此外，在您的比较中，您不应该使用`diashowPicArrayIndex > diashowPicArray.length`. 否则，您将尝试访问`diashowPicArray[5]`，这是超出范围的。改用`==`：

```
diashowPicArrayIndex++;
if (diashowPicArrayIndex == diashowPicArray.length) {
    diashowPicArrayIndex = 0;
} 
```

或者，使用模运算简化上述行：

```
diashowPicArrayIndex = (diashowPicArrayIndex + 1) % diashowPicArray.length; 
```

# c# - ASP.NET MVC：来自 SQL Server 的视频流

> ID：12236084
> 
> 赞同：1
> 
> 时间：2012-09-02T12:48:17.383
> 
> 标签：c#, asp.net-mvc, jwplayer

我正在尝试检索存储在 SQL Server 数据库中的 FLV 视频并使用 JWplayer 插件显示它。当我运行时，我收到此错误：

> 任务队列在第 5 步失败 播放列表文件不包含有效的播放列表

我的代码：

```
 [AcceptVerbs(HttpVerbs.Get)]

    public ActionResult GetVideo(int id)
    {

        byte[] contents =_contentAssestTask.GetItem(id).FileContent;

        var ms = new MemoryStream();

        ms.Write(contents, 0, contents.Length);
        ms.Position = 0;

Response.Cache.SetCacheability(HttpCacheability.Public);
        Response.Cache.SetLastModified(DateTime.Now);
        Response.AppendHeader("Content-Type", "video/x-flv");
        Response.AppendHeader("Content-Length", contents.Length.ToString());

        return new FileStreamResult(ms, "video/x-flv");

    } 
```

并且视图包含：

```
 <script type="text/javascript" src="@Url.Content("~/Scripts/jwplayer.js")"> </script>

<div id='mediaplayer'></div>
<script type="text/javascript">
  jwplayer('mediaplayer').setup({
    'flashplayer': '@Url.Content("~/Content/Video/player.swf")',
    'id': 'playerID',
    'width': '480',
    'height': '270',
    'file': '@Url.Action("GetVideo","MultiMedia",new {id=2})',
    'image': '',
    'plugins': {
       'viral-2': {
           'onpause': 'false',
           'callout': 'none'
       }
    }
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T10:48:21.853

你必须设置 id: 'playerID', type: 'mp4',

# asp.net-mvc - 来自 viewModel 的 Asp.net MVC 3 上的下拉列表

> ID：12236089
> 
> 赞同：0
> 
> 时间：2012-09-02T12:48:53.483
> 
> 标签：asp.net-mvc, viewmodel

我有一个模型。这个模型看起来像这样：

```
public int Id { get; set; }
[Required]
public string Name { get; set; }
[Required]
public List<Category> Parent { get; set; } 
```

在添加操作中，我填充父项：

```
public ViewResult Add()
{
    var addCategoryModel = new CategoryEditModel
    {
        Parent = Mapper.Map<List<Category>>(_productRepository.Categories.ToList())
    };
    return View("add", addCategoryModel);
} 
```

当我提交表单时，我的模型状态总是无效的，因为我在 DropDownList 中选择的值“..无效”。我做错了什么。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:43:43.500

在 MVC 中，我也遇到了一些困难的下拉菜单和助手。我终于采用了以下方法作为我的方式：

在我的视图模型中，我创建：

```
public List<SelectListItem> employeeList;
public int SelectedItemID; 
```

通常会有一个 get 用于通过数据库/实体框架填充下拉列表：

```
public IEnumerable<SelectListItem> employeeList
    {
        get
        {
            return new SunGardDBEntities()
                .employees
                .OrderBy(e => e.employeeFName)
                .ToList()
                .Select(e => new SelectListItem { Text = e.employeeFName + " " + e.employeeLName, Value = e.employeeID.ToString() });
        }
    } 
```

然后在我的 .cshtml 文件中说：

```
@Html.DropDownListFor(model => model.SelectedItemID, new SelectList(Model.employeeList, "Value", "Text"), new Dictionary<string, object> { { "data-placeholder", "Choose a sandbox..." }, { "class", "chzn-select" }, { "style", "width:200px;" } }) 
```

# windows-phone-7 - SLARToolkit 检测海报中的图像

> ID：12236094
> 
> 赞同：2
> 
> 时间：2012-09-02T12:49:21.907
> 
> 标签：windows-phone-7, augmented-reality, object-detection

我正在为 Windows Phone 使用 SLARToolkit，并且我知道该工具包如何使用标记通过相机识别对象。

但是，我希望该工具包能够识别海报中的某个图像，例如：

[![](../Images/87f7c30e49e75be5b34a12be231e6055.png)](https://i.stack.imgur.com/J2Ypa.jpg)
[（来源：[burgerbusiness.com](http://www.burgerbusiness.com/wp-content/uploads/BurgerBar_LV_keller.jpg)）]

在这张海报中，我想检测该海报右上角的汉堡。我怎样才能做到这一点？此外，在 WP 中是否有更好的 AR 替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:49:49.200

这是在项目网站上发布并由我回答的问题的副本：http: [//slartoolkit.codeplex.com/discussions/394101](http://slartoolkit.codeplex.com/discussions/394101)

> 您可以创建自定义标记，但它们需要是黑白的并由黑色方块框起来。以下是如何：[http ://slartoolkit.codeplex.com/documentation](http://slartoolkit.codeplex.com/documentation)

# c# - 我们什么时候可以使用 ClearAllPools 方法？

> ID：12236101
> 
> 赞同：6
> 
> 时间：2012-09-02T12:50:53.430
> 
> 标签：c#, asp.net, performance, connection-pooling, informix

我面临以下问题：

> 连接池已达到最大连接数

我遵循了所有的建议。问题不像以前那样，但很少发生！

我将`Using statement`与我的所有连接和 Readers 一起使用。

最近我遇到以下错误，我不得不重置`iis`以解决我的问题。

* * *

```
Connection Pool has reached the maximum number of connections. at IBM.Data.Informix.IfxConnectionPool.ReportOpenTimeOut()
at IBM.Data.Informix.IfxConnectionPool.Open(IfxConnection connection)
at IBM.Data.Informix.IfxConnPoolManager.Open(IfxConnection connection)
at IBM.Data.Informix.IfxConnection.Open()
at DB_Connection_s.DB_Connection.GetUserSystems(String emp_num) 
```

现在我读到了这个方法。`ClearAllPools()`但我不知道什么时候使用这个方法。如果这被认为是防止`have to`重置 iis 修复请求超时问题的好解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T13:42:44.810

当您没有任何活动连接时，您可以调用 ClearAllPools()。

还可以查看[http://www.codeproject.com/Articles/46267/Connection-Pooling-in-ASP-NET](http://www.codeproject.com/Articles/46267/Connection-Pooling-in-ASP-NET)

确保您的应用程序正确且一致地关闭所有数据库连接。

确保数据库处于联机状态。

增加连接超时。

错误模式表明连接在很长一段时间内“泄漏”。要解决此问题，请确保您的应用程序正确且一致地关闭所有数据库连接。

该异常并不表示数据库处于脱机状态。异常表示连接池问题。

# php - 使用 PHP 和 gdlib 将颜色变为透明

> ID：12236105
> 
> 赞同：1
> 
> 时间：2012-09-02T12:51:28.703
> 
> 标签：php, transparency, transparent, alpha, gdlib

我尝试使用 php gdlib 在现有图像中将灰色（rgb：235,235,240）变为透明。

这是我使用的代码：

```
<?php
header("Content-type:image/png");
$picture = imagecreatefrompng("test.png");
$grey = imagecolorallocate($picture, 235, 235, 240);
imagecolortransparent($picture, $grey);
imagepng($picture);
imagedestroy($picture, "newpicture.png");
?> 
```

当 test.png 上有很多不同的颜色时，此代码将不起作用。否则，当 test.png 上只有少量颜色时，此代码可以完美运行。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:12:15.410

它不起作用，因为您没有将修改后的图片保存到磁盘。
您当前的代码：

```
imagepng($picture); 
```

会将修改后的图片发送到浏览器，但您也在输出 HTML 代码：

```
<img src="mytest.png" /> 
```

以这种方式修改您的代码：

```
imagepng($picture, 'mytest.png'); // save the picture to disk 
```

然后，您的 HTML 代码将显示修改后的图片。

检查文档：[imagepng](http://php.net/imagepng)

您必须使用此行将灰色存储到`$grey`：

```
$grey = imagecolorallocate($picture, 235, 235, 240); 
```

[imagecolorresolve](http://fr2.php.net/imagecolorresolve)做了完全不同的事情。

# visual-studio-2010 - 为什么 VS 2010 无法在 Windows 7 中安装？

> ID：12236112
> 
> 赞同：0
> 
> 时间：2012-09-02T12:52:40.383
> 
> 标签：visual-studio-2010, installation

嗨，我正在尝试在 Windows 7 上安装 vs2010，但它失败了，这是错误日志，有人可以帮我吗？

```
[09/02/12,17:17:22] Microsoft Visual Studio 2010 Ultimate - ENU: [2] CRootComponent::Install(): Cannot install; setup files failed verification.
[09/02/12,17:17:22] Microsoft Visual Studio 2010 Ultimate - ENU: [2] ERROR_INSTALL_PACKAGE_INVALID returned in CRootComponent::Install; the following file is invalid: h:\vs_setup.msi
[09/02/12,17:17:24] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Ultimate - ENU is not installed.
[09/02/12,17:17:24] VS70pgui: [2] DepCheck indicates Microsoft Web Deployment Tool (x64) was not attempted to be installed.
[09/02/12,17:17:24] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 - Visual Studio 2010 Tools was not attempted to be installed.
[09/02/12,17:17:24] VS70pgui: [2] DepCheck indicates Microsoft Silverlight 3 SDK was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Tools for Office Runtime (x64) was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Microsoft Office Developer Tools (x64) was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Dotfuscator Software Services - Community Edition was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Crystal Reports templates for Visual Studio 2010 was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Microsoft SQL Server Compact 3.5 SP2 (x86) ENU was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Microsoft SQL Server Compact 3.5 SP2 (x64) ENU was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Visual Studio 2010 Tools for SQL Server Compact 3.5 SP2 ENU was not attempted to be installed.
[09/02/12,17:17:25] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Runtime v1.0 (x64) ENU was not attempted to be installed.
[09/02/12,17:17:26] VS70pgui: [2] DepCheck indicates Microsoft Sync Services for ADO.NET v2.0 (x64) ENU was not attempted to be installed.
[09/02/12,17:17:26] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Services v1.0 (x64) ENU was not attempted to be installed.
[09/02/12,17:17:26] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework SDK v1.0 (x64) ENU was not attempted to be installed.
[09/02/12,17:17:26] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Performance Collection Tools (x64) was not attempted to be installed.
[09/02/12,17:17:26] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 IntelliTrace (x64) was not attempted to be installed.
[09/02/12,17:17:26] VS70pgui: [2] DepCheck indicates Microsoft SQL Publishing Wizard 1.4 was not attempted to be installed.
[09/02/12,17:17:26] VS70pgui: [2] DepCheck indicates Microsoft SQL Server System CLR Types was not attempted to be installed.
[09/02/12,17:17:27] VS70pgui: [2] DepCheck indicates Microsoft SQL Server System CLR Types (x64) was not attempted to be installed.
[09/02/12,17:17:27] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects was not attempted to be installed.
[09/02/12,17:17:27] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects (x64) was not attempted to be installed.
[09/02/12,17:17:27] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Framework was not attempted to be installed.
[09/02/12,17:17:27] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Project was not attempted to be installed.
[09/02/12,17:17:27] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Transact-SQL Language Service was not attempted to be installed.
[09/02/12,17:17:27] VS70pgui: [2] DepCheck indicates Microsoft SharePoint Developer Tools was not attempted to be installed.
[09/02/12,17:17:28] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 ADO.NET Entity Framework Tools was not attempted to be installed.
[09/02/12,17:17:28] VS70pgui: [2] DepCheck indicates Microsoft Help Viewer 1.0 x64 was not attempted to be installed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:53:56.827

> [09/02/12,17:17:22] Microsoft Visual Studio 2010 Ultimate - ENU：[2] CRootComponent::Install 中返回的 ERROR_INSTALL_PACKAGE_INVALID；以下文件无效：h:\vs_setup.msi

您的安装程序已损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:56:14.993

将您的 iso 移动到本地计算机并尝试再次安装

# c# - 使用文件流从根目录文件夹中读取文件

> ID：12236114
> 
> 赞同：3
> 
> 时间：2012-09-02T12:53:36.017
> 
> 标签：c#, .net, file, file-io

我的文件夹中有两个图像文件，我必须在程序中调用它们。我用过：

```
AppDomain.curentDomain.baseDirectory + "Path and file name"; 
```

但这进入了我不想要的 bin 目录；我想从我的文件夹名称作为资源的根目录中读取文件夹，我在那里保存了我的文件并调用图像，所以请问代码是什么？

如何从 Windows 窗体应用程序的根目录中读取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T04:51:28.943

为什么不使用`Environment.CurrentDirectory`？

```
string path = Environment.CurrentDirectory + @"\Image1.jpg";
FileStream stream = new FileStream(path, FileMode.Open, FileAccess.Read);
Image image = Image.FromStream(stream);
stream.Close(); 
```

结合应用程序启动路径是一种更好的方式。:)`Environment.CurrentDirectory`返回您的应用程序所在的当前路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T10:19:05.250

> 通常，您必须将这些项目设置为复制到 bin 文件夹中。右键单击解决方案资源管理器/导航器，选择属性并设置“复制到输出目录”。希望这会奏效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T12:59:41.597

你可以使用这个：

```
System.IO.Path.Combine(Environment.CurrentDirectory, "Path to File") 
```

`Environment.CurrentDirectory`将为您提供运行应用程序的路径。无论它是在 Visual Studio 中运行还是您的应用程序是否已部署都无关紧要。

示例用法

```
// Read image1.jpg from application folder, into Image object
Image myImage = Image.FromFile(System.IO.Path.Combine(Environment.CurrentDirectory, "image1.jpg")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T14:33:34.000

```
System.IO.Path.Combine(Application.StartupPath, @"..\..\YourFile.JPG") 
```

返回文件的绝对路径，但这**仅**在您使用 VS 时有效，因为部署应用程序时没有 bin\Debug。

```
string path = Path.Combine(Application.StartupPath, @"..\..\YourFile.JPG");
FileStream stream = new FileStream(path, FileMode.Open, FileAccess.Read);
Image image = Image.FromStream(stream);
stream.Close(); 
```

如果您打算将文件与 exe 一起发送，请在解决方案资源管理器中右键单击该文件，选择*Include in project*，再次右键单击，选择属性并设置*Build Action : None*和*Copy to Output Directory : Copy if newer* in the properties窗口，这将在您每次构建时将文件复制到您的 bin\Debug。然后你可以使用：

```
string path = Path.Combine(Application.StartupPath, "YourFile.JPG"); 
```

这将在 VS**和**部署时工作。最好将文件作为资源嵌入到可执行文件中，以便进行更清洁的部署。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-25T20:20:28.077

采用`Server.MapPath("/path/to/file")`

# lua - 电晕SDK。更长的按钮压力 -> 更强的效果（例如更高的跳跃）

> ID：12236116
> 
> 赞同：2
> 
> 时间：2012-09-02T12:53:43.137
> 
> 标签：lua, coronasdk

我想不出任何在 Corona 中实现它的方法。你有什么想法\建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:12:03.930

```
local timeOfPressing = 9999999;
local buttonPressed = false;
local function keyListener( event )
    if event.phase == "began" then
        timeOfPressing = event.time;
        buttonPressed = true;
    elseif event.phase == "ended" and buttonPressed then
        local force = event.time - timeOfPressing;
        if force > maximumForce then force = maximumForce end
        buttonPressed = false;
        myJumpFunction(force);
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:55:40.077

在 event.phase==began 中定义并增加你的力量。

# objective-c - NSNotificationQueue 如何合并发件人？

> ID：12236123
> 
> 赞同：3
> 
> 时间：2012-09-02T12:55:10.283
> 
> 标签：objective-c, cocoa, nsnotifications

当您`NSNotificationCoalescingOnSender`在通过 发布通知时指定时`NSNotificationQueue`，它如何认为两个发件人“相等”？是通过简单的指针相等（例如使用`==`）还是由`isEqual`方法确定相等？

原因是我想将`NSNumber`对象用作发件人，并希望通知由两个相同数量的“发件人”合并。也就是说，如果在应用程序的一部分发布了名为“myNotification”和发件人“123”的通知，而另一部分发布了与发件人相同的通知名称和“123”（尽管它们可能是不同的对象作为发件人的实例），我希望将它们合并为一个通知。

背景是数字代表记录的服务器端唯一标识符，每当应用程序的一部分需要刷新对象时，它都会以服务器端 ID 作为发送者发布通知。因此，如果多次发布同一个 ID，将只有一个通知和一个请求到服务器。

# c - 无法解释编译器警告

> ID：12236124
> 
> 赞同：12
> 
> 时间：2012-09-02T12:55:18.760
> 
> 标签：c

我的编译器（gcc）在声明的行上抛出警告（不是错误！）`fp`：

```
int fd = open("filename.dat", O_RDONLY);
FILE* fp = fdopen(fd, "r"); // get a file pointer fp from the file descriptor fd 
```

这些是警告：

```
main.c: In function ‘main’:
main.c:606: warning: implicit declaration of function ‘fdopen’
main.c:606: warning: initialization makes pointer from integer without a cast 
```

我不明白这些警告，因为返回值为`fopen`a `FILE*`。我在这里犯了什么错误？

**编辑**：我包括`stdio.h`（我也在 Linux 上）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-02T12:57:32.507

*简短回答*：`-std=gnu99`编译时使用，通常的标准是非 POSIX 并且没有`fdopen`.

* * *

```
warning: implicit declaration of function ‘fdopen’ 
```

意味着您忘记包含声明`fdopen()`所在的头文件。然后编译器会进行隐式声明-这意味着将假定未知函数的返回值是`int`-因此是第二个警告。你必须写

```
#include <stdio.h> 
```

编辑：如果您正确包含 stdio.h，那么`fdopen()`您的目标系统可能不可用。你在 Windows 上吗？此功能仅适用于 POSIX。

编辑2：对不起，我真的应该意识到这一点。C99 表示 ANSI C99 标准——标准 C 不强制使用文件描述符的概念来支持非 POSIX 系统，因此它`fopen()`仅提供。**`fdopen()`与文件描述符有关，因此它仅适用于 POSIX，因此它不是标准 C99 的一部分。如果您使用`-std=gnu99`GCC 的开关，它会摆脱标准的限制**并允许 POSIX 和 GNU-only 扩展，从根本上解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T18:52:27.033

```
#define _XOPEN_SOURCE 600
#include <stdio.h> 
```

这完全符合严格的 c99

```
gcc -std=c99 -pedantic -Wall -Wextra -Werror 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T12:58:54.520

您没有`#include <stdio.h>`在 C 中包含编译器，因此“猜测”您尝试调用的函数的声明。（以您所基于的参数并使用 int 作为返回值）。通常你不希望这样的猜测，因此编译器会警告你。

解决方案：添加适当`#include`的 s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T13:11:36.530

如果您在标准 C 模式下编译，该`fdopen`函数不是 C 标准的一部分，也不能作为标准头文件的一部分使用。因此，您要么需要使用`-std=gnu99`而不是`-std=c99`编译源代码，要么自己声明函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T14:12:21.280

@H2CO3 的回答中对编译器的诊断有一个很好的解释，所以让我们只看一下事情的*原因*：如果您使用的是 glibc（而且您可能是），某些 POSIX 函数可能需要特定*的功能测试宏*才能显示。

特别是，您可能需要输入以下行：

```
#define _POSIX_SOURCE
// or #define _XOPEN_SOURCE 
```

前

```
#include <stdio.h> 
```

某些编译器（例如 gcc）也具有相同效果的命令行选项（`gnu*`gcc 中的所有标准选项）。

# regex - 如何使用正则表达式删除乳胶标签？

> ID：12236132
> 
> 赞同：1
> 
> 时间：2012-09-02T12:57:02.193
> 
> 标签：regex, latex, notepad++

我必须删除文档中不必要的标签，例如：

```
{\sffamily FOOBARFOOOBAR
FOOBAR
FOO \bf{FOOBAR}
FOOBAR
} 
```

进入

```
FOOBARFOOOBAR
FOOBAR
FOO \bf{FOOBAR}
FOOBAR 
```

我曾经能够用 html 标签来做到这一点，比如

{\sffamily \d } 替换为 \1

但我不能让它与 tex 标签一起工作..

任何人有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T05:36:57.017

使用[`detex`](http://ctan.org/pkg/detex)，从源文件中剥离 TeX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:40:25.317

我*可以*给你一个正则表达式作为你的例子——你最初的尝试并不遥远——但我不确定它是否有助于解决你的整体问题。

寻找：

```
\{\\sffamily ((?:.*\r*\n*)*?)\}
```

代替：

```
\1
```

**警告：** 如果您要替换的标签是嵌套的，您将遇到问题。但是，我认为使用正则表达式不会有一些严重的头痛问题。在这里使用一个小脚本会更好。

# firefox - 我的页面在 Firefox 中的显示方式与在 safari 中的显示方式不同

> ID：12236135
> 
> 赞同：0
> 
> 时间：2012-09-02T12:57:23.213
> 
> 标签：firefox, safari, spry, easing

我正在为客户开发一个微型网站，一切正常，除了当我尝试在 Firefox 上查看它时，我对放置错误的东西的样子感到惊讶..即使我在 Firefox 中禁用了水平滚动仍然可以做到（看不到水平滚动，但如果你水平滚动它会显示），即使 webfont 也不同，尽管 webfont 在其他页面的 firefox 上完美显示..第三个问题是页面上边距，在页面属性我将边距指定为 0，并且在 safari 中它有效，但在 Firefox 中它没有。谁能告诉我该怎么做..我只有一个简单的菜单栏和缓动（animate2id）插件，这可能会导致问题吗？在 Safari 中，它看起来是我想要的样子..提前谢谢..也许我应该提到我'

这是以防万一的代码..

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Annual Report 2012</title>
<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
<link href="micro-site.css" rel="stylesheet" type="text/css" />
<script src="SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
<link href="SpryAssets/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
<style type="text/css">
body {
background-color: #39949C;
overflow-x: hidden;
}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript"></script>
<script src="jquery.easing.1.3.js" type="text/javascript"></script>

<link href="muli-fontfacekit/stylesheet.css" rel="stylesheet" type="text/css" />

<body leftmargin="0" topmargin="0">

<div id="rotator-controls" class="panel span2">
<div id="rotator-slides">
<a class="" href="micro-site.html" onclick="Animate2id('.slide-content'); return false" title="Go to 1st content with the default easing">1</a>

<a class="" href="#slide-content2" onclick="Animate2id('#slide-content2','easeInOutExpo'); return false">2</a>

<a class="" href="#slide-content3" onclick="Animate2id('#slide-content3','easeInOutExpo'); return false">3</a>

<a class="" href="#slide-content4" onclick="Animate2id('#slide-content4','easeInOutExpo'); return false">4</a>

<a class="" href="#slide-content5" onclick="Animate2id('#slide-content5','easeInOutExpo'); return false">5</a>
</div>

<div id="rotator-nav">

<a href="#" class="prev">‹&lt;/a>
<a href="#" class="next">›&lt;/a>
</div>
</div>

</div><!--end of header -->

</div><!--end of slide-container -->
</div><!--end of body -->

<div id="Sitemap"></div>

</div><!--end of container -->

</div>

<script type="text/javascript">
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1",     {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
function Animate2id(id,ease){ //the id to animate, the easing type
    var animSpeed=2000; //set animation speed
var $container=$("#slide-container"); //define the container to move
if(ease){ //check if ease variable is set
    var easeType=ease;
} else {

    var easeType="easeOutQuart"; //set default easing type
}
//do the animation
$container.stop().animate({"left": -($(id).position().left)}, 2000, easeType);
}
</script> 
```

# java - 表示 x-=5 的另一种方式是什么？

> ID：12236138
> 
> 赞同：-7
> 
> 时间：2012-09-02T12:57:32.550
> 
> 标签：java

有另一种`x-=5`用Java编码的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:59:02.570

`X= X-5`那是你要找的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T13:01:40.117

```
x = x + 5 * 3 - 16 + Math.sqrt( 4 ) - 6; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T12:59:52.860

你总是可以试试这个：

```
 x = x - 5; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T13:00:04.770

它与

```
x = (type) (x - 5) 
```

例如

```
byte x = 10;
x = (byte) (x - 5); // x -= 5; 
```

没有演员表它不会编译。

* * *

一个奇怪的例子，说明铸造很重要

```
char ch = '0';
ch *= 1.1; // ch = '4'; 
```

如同

```
ch = (char) (ch * 1.1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T12:59:17.233

假设 x 是一个 int 或另一个对这个操作有意义的基本数字类型：x = x - 5;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-02T13:03:57.407

```
y=-5;
x=x+y; 
```

有很多方法

```
x=((x>>1)-2)<<1 + ((x/2)*2==x); 
```

# c# - ASP .NET MVC 4.5 样式捆绑不输出任何东西

> ID：12236141
> 
> 赞同：1
> 
> 时间：2012-09-02T12:57:43.020
> 
> 标签：c#, asp.net-mvc, razor

我在 App_Start 文件夹中有一个带有 BundleConfig.cs 的 ASP .NET MVC 4 应用程序，并调用了这个类和 Global.asax 中的 RegisterBundles 方法。

脚本捆绑一切正常，但样式捆绑什么也没产生。

```
 var bundle = new StyleBundle("~/bundles/css")
                            .Include("~/Themes/Rikkle.Web/Styles/app.min.css");
            BundleTable.Bundles.Add(bundle); 
```

我像这样访问页面上的上述捆绑包：

```
<link href="/bundles/css" rel="stylesheet" type="text/css"/> 
```

我手动调用链接而不是使用@Styles.Render()，因为当我调用它时页面没有输出（同样，所有脚本捆绑仍然有效）。当我在浏览器中访问 localhost:xxx/bundles/css 时，我得到一个状态码 200，一切都很好，只是负载什么都没有。当我在浏览器中访问 localhost:/themes/rikkle.web/styles/app.min.css 时，它会毫无问题地启动。

此外，我在我的视图文件夹 web.config 和主 web.config 中都引用了 System.Web.Optimization，这是 Nuget 的最新版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:15:20.977

这个问题的答案是：[Bundler not included .min files](https://stackoverflow.com/questions/11980458/mvc4-bundler-not-including-min-files)

本质上，如果你有“min”，如“app.min.css”，那么捆绑就会爆炸。

# ruby-on-rails - Rails 中的发票模型和视图 - 如何

> ID：12236145
> 
> 赞同：0
> 
> 时间：2012-09-02T12:58:31.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, invoice

我想在 Rails 中创建发票。发票可以有项目，每个项目都有数量和价格。这是我们每天看到的典型发票。

为了创建发票，最好的方法是什么。

1.  发票和项目的常见模型是什么？

2.  正如我所见，项目将是一个单独的模型。但是我们如何才能拥有一个发票视图，它既可以创建发票，也可以创建添加到其中的项目？

例如，我想创建类似这样的示例发票表单：http: [//sourceforge.net/projects/gal/screenshots/48841](http://sourceforge.net/projects/gal/screenshots/48841)

* * *

**更新：**

除了答案之外，以下链接对于解决问题很有用：发票示例：[https ://github.com/linkworks/invoices](https://github.com/linkworks/invoices)

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

ryan bates 也为同样的目的创建了一个 rails 插件！：[https ://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)

* * *

**更新 2：**

我正在寻找的另一个解决方案： [谷歌缓存版本](http://webcache.googleusercontent.com/search?q=cache%3abtvYqC7d_-oJ%3aiqbalfarabi.net/2011/01/20/rails-nested-form-with-has-many-through-association/%20&cd=6&hl=en&ct=clnk&gl=in)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:19:23.920

我将有一个 Invoice 模型、一个 Item 模型和一个将它们链接在一起的模型，您可以在其中保存数量、价格等：

```
class Invoice < ActiveRecord::Base
  has_many :invoice_items
  has_many :items, :through => :invoice_items
end

class InvoiceItem < ActiveRecord::Base
  belongs_to :invoice
  belongs_to :item
end

class Item < ActiveRecord::Base
  has_many :invoice_items
  has_many :invoices, :through => :invoice_items
end 
```

InvoiceItem 模型将包含与发票和项目之间的链接相关的任何数据。这将包括价格、数量、折扣或您可能拥有的任何其他内容。

要回答关于单一视图的第二个问题，我可以通过 Invoice 资源公开这一点。

```
class InvoicesController < ApplicationController
  def show
    @invoice = Invoice.find(params[:id]).includes(:invoice_items => :items)
  end
end 
```

然后您的视图可以遍历这些项目：

```
<% @invoice.invoice_items.each do |item| %>
  <%= item.quantity %>
<% end %> 
```

# python - 关于双循环的简单python代码

> ID：12236148
> 
> 赞同：3
> 
> 时间：2012-09-02T12:58:52.633
> 
> 标签：python

我在 Spyder IDE 上测试了以下 python 代码。认为它会输出二维数组`q`，从 0..31`q[0][0]`到`q[3][7]`。但它实际上返回 q 为：

```
[[24, 25, 26, 27, 28, 29, 30, 31], [24, 25, 26, 27, 28, 29, 30, 31], [24, 25, 26, 27, 28, 29, 30, 31], [24, 25, 26, 27, 28, 29, 30, 31]]. 
```

编码：

```
q=[[0]*8]*4 
for i in range(4): 
    for j in range(8): 
        q[i][j] = 8*i+j 
print q 
```

知道这里发生了什么吗？我一步一步调试。它显示每一行的更新将与所有其他行同步，这与我对其他编程语言的体验完全不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:03:00.307

```
q=[somelist]*4 
```

创建一个包含四个相同项目的列表 list `somelist`。因此，例如，`q[0]`并`q[1]`引用同一个对象。

因此，在嵌套的 for 循环`q[i]`中，无论`i`.

修理：

```
q = [[0]*8 for _ in range(4)] 
```

列表推导评估`[0]*8`4 个不同的时间，产生 4 个不同的列表。

* * *

下面是这个陷阱的快速演示：

```
In [14]: q=[[0]*8]*4 
```

您可能认为您只更新了第二行中的第一个元素：

```
In [15]: q[1][0] = 100 
```

但是你最终会改变*每一*行的第一个元素：

```
In [16]: q
Out[16]: 
[[100, 0, 0, 0, 0, 0, 0, 0],
 [100, 0, 0, 0, 0, 0, 0, 0],
 [100, 0, 0, 0, 0, 0, 0, 0],
 [100, 0, 0, 0, 0, 0, 0, 0]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T13:22:08.223

如前所述，问题是由于`*`对列表的操作引起的，这会创建对同一对象的更多引用。你应该做的是使用附加：

```
q=[]
for i in range(4): 
    q.append([])
    for j in range(8): 
        q[i].append(8*i+j)
print q 
```

> > [[0, 1, 2, 3, 4, 5, 6, 7], [8, 9, 10, 11, 12, 13, 14, 15], [16, 17, 18, 19, 20, 21, 22, 23], [24, 25, 26, 27, 28, 29, 30, 31]]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:05:08.320

当您执行类似的操作`l = [x]*8`时，实际上是在创建对相同的 8 个引用`list`，而不是 8 个副本。

要实际获得 8 个副本，您必须使用`l = [[x] for i in xrange(8)]`

```
>>> x=[1,2,3]
>>> l=[x]*8
>>> l
[[1, 2, 3], [1, 2, 3], [1, 2, 3], [1, 2, 3], [1, 2, 3], [1, 2, 3], [1, 2, 3], [1, 2, 3]]
>>> l[0][0]=10
>>> l
[[10, 2, 3], [10, 2, 3], [10, 2, 3], [10, 2, 3], [10, 2, 3], [10, 2, 3], [10, 2, 3], [10, 2, 3]]
>>> l = [ [x] for i in xrange(8)]
>>> l
[[[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]]]
>>> l[0][0] = 1
>>> l
[[1], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]], [[10, 2, 3]]] 
```

# c++ - SWIG 无法识别字符串参数

> ID：12236150
> 
> 赞同：4
> 
> 时间：2012-09-02T12:58:56.363
> 
> 标签：c++, string, swig

我有一个令人沮丧的问题，这让我花了很多时间来处理它，但我没有找到任何解决方案。

我想在 SWIG 中使用 PHP 中的 C++ 类。我生成了我的共享对象，它适用于某些方法，但是每当我使用字符串参数作为输入调用方法时，我都会遇到此错误：

> 致命错误：在 的参数 2 中键入错误`PKI_Buf_initHex`。预期的`SWIGTYPE_p_std__string`

`PKI_Buf_initHex`是 SWIG 自动创建的包装器类的名称。在我的 C++ 代码中，我`initHex`将方法声明为：

```
int initHex(const string x) 
{..} 
```

我在我的接口文件中包含`typemaps.i`和`std_string.i`，但我得到了相同的错误消息。

如果有人能帮助我解决这个问题，我真的很感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T14:38:17.000

你需要有：

```
%include <std_string.i> 
```

在 SWIG 界面中足够早（即`std::string`第一次看到之前）。

# c# - 使用 ReportViewer 在同一页面上记录

> ID：12236158
> 
> 赞同：1
> 
> 时间：2012-09-02T13:00:06.100
> 
> 标签：c#, winforms, reporting-services, reportviewer

我正在开发一个简单的 Windows 应用程序，其中包含一些使用报表查看器控件开发的报表。我的报告模板之一如下：

```
1) Question1? 
a) Choise11 
b) Choise12 
c) Choise13 
d) Choise14

2) Question2? 
a) Choise21 
b) Choise22 
c) Choise23 
d) Choise24
.
.
.
. 
```

我想防止在问题中间出现分页符。我的意思是，我想将问题及其所有选项（a、b、c、d）保留在同一页面中。可能吗？如果是，我该如何更改我的报告设置？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:49:53.270

在适当的组/详细信息控件上使用**KeepTogether属性。**[请参阅此 MSDN 页面](http://msdn.microsoft.com/en-us/library/dd255248%28v=sql.105%29.aspx)上的“将报表项放在一个页面上”部分。

请注意，此功能有时可能会出现错误，例如，请参阅[这个高度赞成的 Connect 问题](http://connect.microsoft.com/SQLServer/feedback/details/428595/keep-together-property-not-working-in-ssrs-2008)。

# linux - linux 命令“file”显示“for GNU/Linux 2.6.24”

> ID：12236159
> 
> 赞同：9
> 
> 时间：2012-09-02T13:00:37.903
> 
> 标签：linux, file

我总是使用`file`命令来检查文件类型，主要是在我编译一个新项目以确保一切正常之后。

输出类似于以下内容：

```
proj_out: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, for GNU/Linux 2.6.24, BuildID[sha1]=0x23d9f966854e09d721c6110d505247483dae02fe, stripped 
```

我的问题是，既然我的 Linux 内核更新到 3.0+，为什么它仍然显示它是为旧版本的 Linux 编译的？

```
for GNU/Linux 2.6.24 
```

它是否与命令相关，`file`或者我必须做任何事情来针对较新的 Linux 内核编译我的项目？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T13:43:20.740

*可执行文件*上的文件显示的内核版本与系统上安装的内核无关。它与程序在构建时链接的 C 库相匹配。

您的 C 编译器针对特定的 C 库（通常是 glibc）。反过来，C 库以内核 API 为目标（即 C 库是为特定内核构建的）。即*file*显示的版本。

您不必担心*文件*显示的内核版本与您机器上安装的内核版本不匹配。

@REALFREE：您可以尝试以下实验。也许它会帮助您了解正在发生的事情：

```
$ unname -r
3.10-2-amd64
$ gcc -Wall -Werror hello.c -o hello
$ readelf --notes ./你好
显示在文件偏移量 0x0000021c 处找到的注释，长度为 0x00000020：
  所有者 数据大小 描述
  GNU 0x00000010 NT_GNU_ABI_TAG（ABI 版本标签）
    操作系统：Linux，ABI：2.6.32

```

关于*ABI 标签*的信息包含在一个名为*NOTE*的 elf 段中。该信息由链接器在程序编译时写入。它与 C 库的 ABI 标记匹配。

```
$ ldd ./你好
        linux-vdso.so.1 (0x00007fffd31fe000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f5f1a465000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f5f1a827000)
$ readelf --notes /lib/x86_64-linux-gnu/libc.so.6
显示在文件偏移 0x00000294 处找到的注释，长度为 0x00000020：
  Propriétaire Taille des données 描述
  GNU 0x00000010 NT_GNU_ABI_TAG（ABI 版礼仪）
    操作系统：Linux，ABI：2.6.32

```

为了构建 C 库，您必须选择一个内核版本。在这里，C 库是为 2.6.32 内核编译的，但它也适用于更新的内核。但是，如果程序在早于 2.6.32 的内核上运行，则会显示*内核太旧*警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T13:34:25.780

该版本号指的是在运行编译器的主机上构建 glibc C 库的内核头文件。从广义上讲，它显示了可执行文件将支持的内核级别。

# r - 每个方面的总百分比 - 尊重“填充”

> ID：12236160
> 
> 赞同：14
> 
> 时间：2012-09-02T13:00:39.763
> 
> 标签：r, ggplot2

我正在尝试创建一个多面条形图，每个方面的百分比加起来为 100。对此的解决方案似乎是`group`和的组合`..density..`。但是，在我看来，这`group`与`fill`.

数据：

```
test <- data.frame(
     test1 = sample(letters[1:2], 100, replace = TRUE), 
     test2 = sample(letters[3:8], 100, replace = TRUE)
 ) 
```

这得到正确的百分比：

```
ggplot(test, aes(test2)) +
     geom_bar(aes(y = ..density.., fill=test2,group=test1)) + 
     facet_grid(~test1) 
```

如您所见，总线`fill`被覆盖： ![每个方面的百分比总和为 100](../Images/b9a3d0c39de8ee158a489564fdb34644.png)

但是，下面的代码尊重`fill`但给了我错误的百分比（整个图表的总和为 100）（使用..密度..）：

```
ggplot(test, aes(test2)) +
     geom_bar(aes(y = ..count../sum(..count..), fill=test2)) + 
     facet_grid(~test1) 
```

![总图表的百分比总和为 100](../Images/7a1f33dfa26c85046fbfe56255519e5b.png)

相关：我的这个老问题：[在多面 ggplot 条形图中，y 实验室的百分比？](https://stackoverflow.com/questions/4725339/percentage-on-y-lab-in-a-faceted-ggplot-barchart).

是的——我可以创建额外的数据，但我觉得这属于表示层。实际上这感觉像一个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T01:45:44.523

这有点小技巧，但您可以`..x..`在`geom_bar`通话中参考。唯一的问题是`ggplot`考虑到这一点 `numeric`，所以我在调用中强制考虑因素并给出了很好的标签`scale_fill_brewer`

```
ggplot(test, aes(x= test2, group = test1)) + 
   geom_bar(aes(y = ..density.., fill = factor(..x..))) + 
   facet_grid(~test1) + 
   scale_fill_brewer(name = 'test2', breaks = 1:6, 
                     labels = levels(test$test2), palette = 'Set3') 
```

![在此处输入图像描述](../Images/47d53bc229795a6fee6f9d84a864e746.png)

与不强制 `..x..`因素相比

```
ggplot(test, aes(x= test2, group = test1)) + 
  geom_bar(aes(y = ..density.., fill = ..x..)) +
   facet_grid(~test1) 
```

![在此处输入图像描述](../Images/deb39ad19a2ed6161039ea478774ae50.png)

# java - JAVA：框架的大小和居中的图形对象

> ID：12236165
> 
> 赞同：1
> 
> 时间：2012-09-02T13:01:18.773
> 
> 标签：java, frame, centering

这行代码有什么明显的问题吗？无论窗口大小如何，我都希望矩形保持居中。但这由于某种原因不起作用，矩形保持在同一个地方。

```
 public void run() {
    setSize(800, 800);
    createEntireFigure();

}
private void createEntireFigure(){
    int centerOfWindowWidth = getWidth() / 2;
    int centerOfWindowHeight = getHeight() / 2;

    GRectWithGLabel ("A String",centerOfWindowWidth, centerOfWindowHeight); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:02:57.520

您的矩形大小代码仅在创建矩形时调用，因此如果重新调整 GUI 的大小，矩形的位置不会改变是有道理的。您需要以某种方式侦听 GUI 中的大小变化并调用代码重新定位矩形，然后才能使其正常工作。你用的是什么图形库？

# android - 如何在视图类中休眠一个线程而不禁用对 imageview 的触摸？

> ID：12236174
> 
> 赞同：0
> 
> 时间：2012-09-02T13:02:23.653
> 
> 标签：android

如何在视图类中休眠一个线程而不禁用对 imageview 的触摸？

**详细说明 ：**

我有一个带有触摸监听器的图像视图。和一个 View 类，它有一个 TimerTask 需要停止一秒钟的事件。

我用了

```
Thread.sleep(1000); 
```

但是，这也会停止触摸监听器。

**编辑：** 我尝试了很长的 for 循环，它仍然是一样的。

任何替代方案或解决方案或建议表示赞赏？谢谢。

# javascript - Jquery滑块更新事件更改的值

> ID：12236175
> 
> 赞同：0
> 
> 时间：2012-09-02T13:02:43.663
> 
> 标签：javascript, jquery, jquery-events, jquery-tools

我有以下代码，用于根据滑块值计算服务价格。

它运行良好，只是`PriceVal`不会实时更新。它仅在用户从滑块上抬起鼠标单击后才会更新。

有谁知道如何让它在滑块滑动时实时更新？

该页面可以在[http://www.voxlogic.net/pricing/查看](http://www.voxlogic.net/pricing/)

```
$(function() {
//document.getElementById("f1").reset();
$(":range").rangeinput({ progress: true, max: 100, value:1 });  
$(":range").change(function(){
    var sliderVal = this.value;
    calculatePrice(sliderVal);      
});
$(":range").keyup(function(){
    var sliderVal = this.value;
    if (sliderVal==""){
        $("#priceVal").html('');
}
else
        {
            //check if value is from 1..25 range and correct otherwise
            if (isNaN(sliderVal)){sliderVal=1;}
            if (sliderVal<1){sliderVal=1;}
            if (sliderVal>25){sliderVal=25;}
            this.value = sliderVal;
            calculatePrice(sliderVal);
        }
    });

    $(":range").keydown(function(){
        var sliderVal = this.value; 
        calculatePrice(sliderVal);      
});
});

function calculatePrice(sliderVal){
    if (isNaN(sliderVal)){sliderVal=1;}
    if (sliderVal<1){sliderVal=1;}
    if (sliderVal>25){sliderVal=25;}
    var priceVal;
    if (sliderVal<=9){
        priceVal = sliderVal*6;
    }
    else if ((sliderVal>9)&&(sliderVal<=19)){
        priceVal = 9 * 6 + (sliderVal-9) * 4.5;         
    }
    else if (sliderVal>19){
        priceVal = 9 * 6 + 10 * 4.5 + (sliderVal-19) * 3.6;
    }
    $("#priceVal").html('&pound;'+priceVal.toFixed(2));
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:29:39.433

你需要绑定[`onSlide`](http://jquerytools.org/documentation/rangeinput/index.html)事件

> **`onSlide`**
> 
> **发生滑动时**。您可以通过返回 false 或为事件对象调用 preventDefault() 来取消操作。请注意，分配此事件侦听器对性能的影响很大，可能会影响滑动体验的流畅度。

而不是`change`事件。

> **`change`**
> 
> **范围值改变后**。如果您通过单击底层滑块来滑动范围，这是唯一被触发的事件。请注意，名称与 jQuery 的 change 方法相同，您可以直接将事件与该函数绑定。对于其他事件，您必须使用 bind 方法。这会导致更流畅的语法，如上面的示例所示。

您可以在`$.rangeinput`通话中执行此操作：

```
$(":range").rangeinput({
  progress: true,
  max: 100,
  value: 1,
  onSlide: function(evt, val) {
    calculatePrice(val);
  }
}); 
```

或之后使用[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind).

```
$(":range").bind('onSlide', function(evt, val){
  calculatePrice(val);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:11:52.257

您需要连接到幻灯片事件：

```
$(".SliderDiv").slider({ min: 0, max: 16, step: .25, slide: SliderSlide, animate: true });

// ---- SliderSlide ---------------------------
//
// user is dragging or clicking a slider

function SliderSlide(event, ui)
{
    var Value = ui.value
    var $Sender = $(ui.handle);
    var $Row = $Sender.parentsUntil("table", "tr");
    ...
    // Call your function here 
```

# ios - 使用cornerRadius的Tableview滚动性能不足，有什么替代方案？

> ID：12236184
> 
> 赞同：11
> 
> 时间：2012-09-02T13:04:05.893
> 
> 标签：ios, uitableview, rounded-corners

我找不到我的问题的解决方案，所以我希望一些专家可以帮助我。

我有很多单元格的表格视图。对于每个单元格，我都有一个带圆角的图像视图：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UIImageView *exampleView;

...
exampleView.layer.cornerRadius =   5.f;
exampleView.clipsToBounds = YES;   
[cell.contentView addSubview:exampleView];
...

} 
```

**导致严重缺乏滚动性能问题 - 当使用cornerRadius 和 clipsToBounds = YES 时，还有其他解决方案吗？** （圆角图像视图包含图片，如果没有设置角。滚动是平滑的。所以问题就在这里）

**编辑＃1：澄清我已经阅读了其他帖子：**

```
...
exampleView.frame = CGRectMake(5.0f,size.height-15.0f,30.0f,30.0f);
exampleView.layer.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5].CGColor;
exampleView.layer.cornerRadius = 5.0f;
exampleView.layer.borderWidth       =   0.3f;
exampleView.layer.borderColor       =   [UIColor blackColor].CGColor;
exampleView.layer.masksToBounds = NO;
exampleView.layer.shouldRasterize = YES;
//exampleView.clipsToBounds = NO;
[exampleView setImage: myImage ]; 
```

**编辑#2：** 就像 myImage 在圆角视图上重叠。如何使图像正确适合圆角视图？还是我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T16:13:13.510

只需更改以下行

```
 exampleView.layer.masksToBounds = YES; 
```

在你的 imageView 中圆角。请参阅下面的图片。

表格视图滚动是视图合成的问题。除了上面的建议，这肯定会有帮助 - 设置 UITableViewCell 的 contentView 属性和 backgroundView 属性的 opaque 属性。去：

```
 [cell.contentView setOpaque:YES];
  [cell.backgroundView setOpaque:YES]; 
```

这将有助于在尽可能早的阶段减少视图合成工作。

还有一些额外的高级技术需要您在滚动时使用异步处理来处理图像。如果上述技术有效，它们可能会矫枉过正。

![图层的 maskToBounds 设置为 yes 的 UIImageView](../Images/bdf1f81394e7577c2108869d581e16e1.png) ![图层的 maskToBounds 设置为 No 的 UIImageView](../Images/ae5cf4c43d26812e4d21171c242e9f88.png)

# algorithm - 在游戏 Unblock Me 中生成随机棋盘的算法

> ID：12236187
> 
> 赞同：4
> 
> 时间：2012-09-02T13:04:29.920
> 
> 标签：algorithm

有一款名为 Unblock Me 的 iPhone 流行游戏。目标是清除红色方块前面的所有障碍物，以便有一条通向出口的清晰路径：

![在此处输入图像描述](../Images/c626444b25df3946955f7701d995a252.png)

为该游戏生成随机棋盘的明智方法是什么？我在想一些事情：

1.  将红色方块放在出口处。
2.  在红色方块周围随机放置 M 个方块。
3.  进行N次随机移动，直到红色块被阻挡。
4.  每个级别增加 M 或 N。

请注意，移动设备的 CPU 功率和 RAM 有限，因此效率很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:09:38.827

我玩了很多游戏，所以这里有一些想法：

*   简单地进行*N*次随机移动并不一定会使关卡变得更难。您最终可能会处于可以在*n*移动中解决的状态，其中*n*明显小于*N*。
*   关卡可以在台式机上生成，然后简单地包含在手机游戏中。这允许进行更详尽的搜索（很可能是基于树的并带有回溯），以确保该关卡至少需要一定数量的移动来解决。关卡应该越难，当然需要的动作就越多。
*   您可以在算法中添加更多知识：如果您希望红色块通过，则长度为 3 的垂直块必须位于底部位置。这限制了解决关卡的方式。这会使关卡变得更加困难，特别是当那里有多个垂直部分时。

# html - Firefox中的Javascript输入元素错误

> ID：12236188
> 
> 赞同：0
> 
> 时间：2012-09-02T13:04:56.393
> 
> 标签：html, firefox, input

我想禁止用户将值复制/粘贴到一个名为“确认手机号”的字段中，我已经使用了这个

```
<input type="text" name="cnfMobileNo" oncopy="return false;" onpaste="return false;" oncut="return false;"> 
```

这在 Chrome 中效果很好，但在 Firefox 中我看到了一个非常奇怪的行为。在 Firefox 中会发生以下事情：

*   我无法在该字段中按退格键
*   也没有更多的字符被放置在该字段中。
*   刷新页面后，锁定值不会从该输入类型中消失。

### 笔记：

我安装了 Firefox 15.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:25:25.450

在这里，还有一些其他的错误。我有一个 js 来防止用户在文本字段中输入无效字符。这就是罪魁祸首。

```
function onlyNumbers(evt) {
    var theEvent = evt || window.event;
    var key = theEvent.keyCode || theEvent.which;
    key = String.fromCharCode( key );
    var regex = /[0-9]|\./;
    if( !regex.test(key) ) {
        theEvent.returnValue = false;
        if(theEvent.preventDefault) theEvent.preventDefault();   
    }
} 
```

这阻止了退格键。这不是`oncopy`,`onpaste`或`oncut`事件的 Firefox 错误。

# c++ - 模板类中的 C++ 非专业成员

> ID：12236189
> 
> 赞同：2
> 
> 时间：2012-09-02T13:04:58.030
> 
> 标签：c++, templates, specialization, dllexport, partial-specialization

我有一个关于模板类的问题。例如，上这堂课

```
template<class TBase> class CTemplateInherit : public TBase
{
public:

    virtual void DoNonSpecializedWork();
    virtual void DoTemplateWork();
    virtual ~CTemplateInherit();
};

// In header file
template<class TBase>
bool CTemplateInherit<TBase>::DoTemplateWork()
{
    std::wcout << L"CTemplateInherit::DoTemplateWork" << std::endl;
    TBase::DoWork();
    return true;
}

// In CPP file
bool CTemplateInherit::DoNonSpecializedWork()
{
    std::wcout << L"CTemplateInherit::DoNonSpecializedWork" << std::endl;
    return true;
} 
```

现在，我希望能够使用 dllexport 在 CPP 文件中定义非专业化方法，并将专业化保留在标题中。通常，我想我可以将成员方法定义为模板，但由于我是从 TBase 继承的，所以这是不可能的。

那么我怎么能把它分开呢？我只覆盖了 TBase 中的 4 个方法，并且希望能够将其他 40 个左右的方法作为 DLLEXPORT 保留在 DLL 中，而专门化在头文件中。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:14:20.440

如果你不想改变`hierarchy`你的课程。

1）文件`specialize`中所有需要类型的函数`.cpp`。

```
template<>
bool CTemplateInherit<First>::DoNonSpecializedWork()
{
    std::wcout << L"CTemplateInherit::DoNonSpecializedWork" << std::endl;
    return true;
}

template<>
bool CTemplateInherit<Second>::DoNonSpecializedWork()
{
    std::wcout << L"CTemplateInherit::DoNonSpecializedWork" << std::endl;
    return true;
}

template<>
bool CTemplateInherit<Nth>::DoNonSpecializedWork()
{
    std::wcout << L"CTemplateInherit::DoNonSpecializedWork" << std::endl;
    return true;
} 
```

2) 使用

```
template<typename T>
bool CTemplateInherit<T>::DoNonSpecializedWork()
{
    std::wcout << L"CTemplateInherit::DoNonSpecializedWork" << std::endl;
    return true;
} 
```

在`.cpp`文件中，但在`header`

```
template class CTemplateInherit<First>;
template class CTemplateInherit<Second>;
template class CTemplateInherit<Nth>; 
```

3) 正如**迪特玛**建议的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T13:21:23.940

我不太确定您尝试完成什么，但是在使用模板时，您需要确保根据需要实例化这些模板。当你将模板定义放在头文件中时，你可以从编译器获得隐式实例化：每当它看到一个函数模板被使用并且这个模板的定义可见时，它就会实例化这个模板。当您将模板放在其他地方时，编译器在需要时不会看到模板定义，因此不会隐式实例化它。但是，您可以自己实例化相应的函数模板，例如：

```
// In CPP file
template <class TBase>
bool CTemplateInherit<TBase>::DoNonSpecializedWork()
{
    std::wcout << L"CTemplateInherit::DoNonSpecializedWork" << std::endl;
    return true;
}

template bool CTemplateInherit<SomeBase>::DoNotSpecializeWork();
template bool CTemplateInherit<SomeOtherBase>::DoNotSpecializeWork(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:14:30.597

我认为缺少一条重要信息：非专业方法是否覆盖了`TBase`类的虚拟方法？这是这里的中心问题。

如果没有，那么您可以为非专业方法创建另一个类，并从您的`CTemplateInherit`类中的两个类（公开）继承。问题解决了。

然而，如果非特化方法覆盖了 TBase 类的虚方法，那么它只会稍微复杂一些：

解决方案 1) 将所有非专用函数重新组合到一个“详细”标题中。作为一组（非模板）自由函数（如果将输入输出作为参数传递足够容易的话）或作为具有它所需的非专业数据成员的（非模板）类。然后，在相应的 cpp 文件（稍后将其编译到 DLL 中）中定义所有这些函数（实现它们）。

然后，在您的`CTemplateInherit`类模板中，只需将非专用函数调用转发到“详细”函数集。因为模板默认内联，所以开销为零。如果您需要将“详细”函数重新组合到一个类（非模板）中，那么只需使用`private`继承，防止函数名冲突。然后，您可以像访问任何其他继承的数据成员一样访问“详细”类的数据成员，并且可以将非专用函数调用转发到可以编译成 DLL 的“详细”类实现（如果您有适合从 DLL 导出类的框架（因为普通 C++ 没有可靠的机制），但您的问题似乎暗示您这样做）。

这个解决方案的唯一问题是创建几个简单的转发函数很烦人。但是恕我直言，在 DLL 中隐藏实现是一个合理的价格（几乎任何时候你想这样做，你最终都会编写一堆包装函数）。

解决方案2）如果基类中有一组非专用虚函数，那么该子集肯定不依赖于实际类型`TBase`（我的意思是，没有它也可以形成这些函数的原型）。然后，这意味着您可以将该函数子集重新组合到另一个`TBase`预期继承自的基类中。让我们称之为`TNonSpecialBase`。此时，您可以设置以下层次结构：

```
class TNonSpecialBase {
  // set of pure-virtual functions that are not special.
};

// this is an example of a class that could act as a TBase:
class TExampleBase : public virtual TNonSpecialBase {
  // set of virtual functions that are special to TExampleBase.
};

class CNonSpecialDerived : public virtual TNonSpecialBase {
  // declaration of non-specialized functions that override the function in TNonSpecialBase.
};

template <typename TBase>
class CTemplateInherit : public TBase, public CNonSpecialDerived {
  // set of virtual functions that are specialized for the template argument TBase.
}; 
```

通过上述设置，专用函数必须在 的头文件中结束`CTemplateInherit`，但重新组合的非专用函数`CNonSpecialDerived`可以在单独的 cpp 文件中定义（并编译成 DLL）。这里的魔术是使用虚拟继承来允许最终类为基类拥有一个虚拟表`TNonSpecialBase`。换句话说，这允许类`CNonSpecialDerived`覆盖 TBase 中继承自 的虚函数`TNonSpecialBase`，只要 TBase 不覆盖这些函数中的任何一个（在这种情况下，编译器会称其为模棱两可）。这样，用户可以处理指向`TBase`对象的指针，调用它的任何虚函数，这将导致向`CTemplateInherit`实现（专用）或`CNonSpecialDerived`实现（大概在 DLL 中）。

# java - Java - Jena API - 输出文件

> ID：12236195
> 
> 赞同：3
> 
> 时间：2012-09-02T13:05:59.673
> 
> 标签：java, file-io, rdf, jena

我正在使用 Java 和 Jena API。

我有一个`Person`数据类型属性`hasFirstName`为 , `hasLastName`, `hasDateOfBirth`,的类`hasGender`。

这是一个人在我的 RDF 文件中的表示方式。

```
<rdf:Description rdf:about="http://www.fam.com/FAM#Bruno04/02/1980 ">
    <j.0:FAMhasGender>H</j.0:FAMhasGender>
    <j.0:FAMhasDateOfBirth>04/02/1980</j.0:FAMhasDateOfBirth>
    <j.0:FAMhasLastName>DS </j.0:FAMhasLastName>
    <j.0:FAMhasFirstName> Bruno</j.0:FAMhasFirstName>
 </rdf:Description> 
```

对于每个性别为**女性**的人，我想用下面的这一行生成一个文本文件：

```
[label= \"" +firstName+ " \"\n\n\"D.Naiss:"+dnai1+"\", "+shape2+"] 
```

因此，例如，如果有 3 位女性，则该文件必须包含 3 行具有该格式的行。形状值（然后是输出线）将取决于性别，这就是为什么我不能对两种性别都使用同一条线。

对于每个性别为**男性**的人，我想在下面输出这一行：

```
[label= \"" +firstName+ " \"\n\n\"D.Naiss:"+dnai1+"\", "+**shape**+"] 
```

我遇到的问题是，在输出文件中我只看到一个女人和一个男人有相应的行。我有不止一个女人和男人，但他只为每个性别输出一个。那是我的问题...

以下是相关代码：

```
public void accessProp() {

    readFile(inputFile); // rdf
    String fname;
    String dd;
    String gen;

    ExtendedIterator instances = onto.person.listInstances();
    Individual instance = null;
    Individual firstInstance = null;
    while (instances.hasNext()) {
        instance = (Individual) instances.next();

        gen = instance.getPropertyValue(onto.hasGender).toString();
        fname = instance.getPropertyValue(onto.hasFirstName).toString();
        dd = instance.getPropertyValue(onto.hasDateOfBirth).toString();

        writeFile(fname, dd, genr);
    }
}

// Write text file
public void writeFile(String fn, String dbir, String gn) {
    String fileout = "D:/file1.txt";
    String firstName = fn;
    String dateB = dbir;
    String gender = gn;

    BufferedWriter out;
    try {
        out = new BufferedWriter(new FileWriter(fileout, true));

        if (gender.equals("F")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape + "]");
        } else if (gender.equals("M")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape2 + "]");
        }

        out.newLine();

        // flushes and closes the stream
        out.close();
    } catch (IOException e) {
        System.out.println("There was a problem:" + e);
    }
} 
```

你能告诉我应该修改什么来解决我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:39:09.003

我的拙见是您完全不了解 RDF，并且当您无法自己找出问题所在时，您正在努力通过在 SO 上提出随机问题来使事情正常进行。这种态度并没有错，但是如果您**仔细阅读文档（OWL、RDF 和 Jena）**会更好。

我怀疑问题**不在于 Java 方面**，而是您的本体有问题（除非您能证明它不是真的）。

我从来没有使用过 RDF 和 Jena，但是我花了几个小时阅读文档，所以即使以下可能不是做事的神圣方式，它肯定比你的方式更好。当您无法理解某些内容时，请随意提问（向我或 SO 社区）。首先，让我们在 OWL 中编写我们的本体（我是新手，所以这可能包含错误）**注意：您不应该在每次程序运行时都使用 Java 代码构建本体。您可能会从一些序列化形式加载您的本体，如下所示**

```
<?xml version="1.0"?>
<!-- See http://www.w3.org/TR/2004/REC-owl-guide-20040210/#Namespaces -->
<!DOCTYPE rdf:RDF [
<!ENTITY fam "http://zybnet.com/fam#" >
<!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
]>
<rdf:RDF
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:xsd="&xsd;"

    xmlns    ="&fam;" 
    xmlns:fam="&fam;" 
    xml:base ="&fam;" >

    <owl:Class rdf:about="Person" />

    <!-- Properties name, gender, and birth -->
    <owl:DatatypeProperty rdf:about="&fam;name">
        <rdfs:domain rdf:resource="Person" />
        <rdfs:range  rdf:resource="&xsd;string" />
    </owl:DatatypeProperty>
    <owl:DatatypeProperty rdf:about="&fam;birth">
        <rdfs:domain rdf:resource="Person" />
        <rdfs:range  rdf:resource="&xsd;date" />
    </owl:DatatypeProperty>
    <owl:DatatypeProperty rdf:about="&fam;gender">
        <rdfs:domain rdf:resource="Person" />
        <rdfs:range  rdf:resource="&xsd;string"/>
    </owl:DatatypeProperty>

    <rdf:Description rdf:about="user/7192">
        <fam:name>Bruno</fam:name>
        <fam:gender>M</fam:gender>
        <fam:birth>19/08/1987</fam:birth>
    </rdf:Description>
    <rdf:Description rdf:about="user/3023">
        <fam:name>Raffaele</fam:name>
        <fam:gender>M</fam:gender>
        <fam:birth>09/02/1927</fam:birth>
    </rdf:Description>
    <rdf:Description rdf:about="user/9283">
        <fam:name>Angela</fam:name>
        <fam:gender>F</fam:gender>
        <fam:birth>01/06/1957</fam:birth>
    </rdf:Description>
</rdf:RDF> 
```

然后是Java代码

```
public class RDF {
    public static void main(String[] args) {
        Model model = ModelFactory.createOntologyModel();
        model.read(RDF.class.getResourceAsStream("family.rdf"), null);

        System.out.println("All triples in file");

        outQuery("SELECT ?subject ?predicate ?object " +
                "WHERE { ?subject ?predicate ?object }", model);

        System.out.println("A simple query");

        outQuery("SELECT ?subject ?name ?gender " +
                "WHERE { " +
                " ?subject <http://zybnet.com/fam#name> ?name ." +
                " ?subject <http://zybnet.com/fam#gender> ?gender ." +
                " }", model);
    }

    private static void outQuery(String q, Model model) {
        Query query = QueryFactory.create(q);
        QueryExecution execution = QueryExecutionFactory.create(query, model);
        ResultSet results = execution.execSelect();
        ResultSetFormatter.out(System.out, results, query);
        execution.close();
    }

} 
```

最后是一些 log4j 配置（这必须放在`log4j.properties`类路径中，或者从 Java 代码中加载[`PropertyConfigurator.configure`](http://zybnet.com/java-logging-with-log4j/)）

```
log4j.logger.com.hp.hpl.jena=debug, console

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=[%-5p] %m%n 
```

这应该是您的起始代码。通过运行它，您将看到发生了什么。通过了解此代码，您将能够重构您的应用程序并找到要研究的内容来启动和运行它。祝你好运！

*示例输出：（从简洁中删除的文本）*

```
[Lots of text here...]
A simple query
[DEBUG] Lock : main
-------------------------------------------------------
| uri                           | name       | gender |
=======================================================
| <http://zybnet.com/user/9230> | "Angela"   | "F"    |
| <http://zybnet.com/user/0239> | "Raffaele" | "M"    |
| <http://zybnet.com/user/0001> | "Bruno"    | "M"    |
------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:21:38.713

您关闭输出文件，`writeFile`因此在第一次调用此方法后无法写入更多数据。在你的主循环之后关闭文件`accessProp`。

# django - 如何过滤模板中的关系

> ID：12236198
> 
> 赞同：0
> 
> 时间：2012-09-02T13:07:11.487
> 
> 标签：django, django-models, django-templates

让这些模型：

```
class Category(models.Model):
    name = models.CharField(max_length=20)

class Word(models.Model):
    name = models.CharField(max_length=200)
    categories = models.ManyToManyField(Category, null=True, blank=True) 
```

而这个观点：

```
def main_page(request):
    words = Word.objects.all()
    return render(request, "main_page.html", {'words': words}) 
```

如何按类别过滤单词，将类别作为模板中的参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:10:11.213

您可以只使用反向关系：

```
{{ category.word_set.all }} 
```

# ruby-on-rails - Heroku 作为私有 git 存储库

> ID：12236202
> 
> 赞同：0
> 
> 时间：2012-09-02T13:07:44.090
> 
> 标签：ruby-on-rails, git, heroku, github

我是 Heroku 的新手，因为我了解 heroku 使用 git 来部署我们的应用程序。即我可以将我的更改推送到heroku 存储库以进行部署。

我可以同时使用 heroku 作为测试环境和私有 git 存储库吗？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:12:32.877

是的。您可以推送不是的分支`master`（那时不会部署）。有时可能会有点慢。

# xcode - xcode/perlbrew 和构建 CPAN 模块 - 制作选项？开发工具包？获取构建错误

> ID：12236207
> 
> 赞同：0
> 
> 时间：2012-09-02T13:08:17.117
> 
> 标签：xcode, macos, perl, cpan, perlbrew

我是 OSX 的新手，但几十年来一直在使用 UNIX/Linux。刚刚获得了运行最新 OSX 10.8.1 的新 MBP Retina。

*   安装了fink
*   安装 perlbrew
*   安装了xcode

一切都很好，除了我无法构建很多 CPAN 模块。我猜我需要添加一些神奇的 xcode SDK 来获取所需的库？

这是一个例子：

```
$ cpanm Wx
...
make[2]: *** No rule to make target `/Users/dfelicia/perl5/perlbrew/perls/perl-5.16.1/lib/5.16.1/darwin-thread-multi-2level/CORE/cc_runtime.h', needed by `RichText.o'.  
Stop.
make[1]: *** [subdirs] Error 2
make: *** [subdirs] Error 2 
```

无论构建失败的模块是什么（并且有很多），失败总是与 cc_runtime.h 相关。

我错过了什么？

我使用此处的 perlbrew 参数构建了 perl 5.16.2：[http ://wiki.wxperl.info/w/index.php/Mac_OS_X_Platform_Notes](http://wiki.wxperl.info/w/index.php/Mac_OS_X_Platform_Notes)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T20:08:05.497

啊哈。我发现 fink 正在将其 perl 注入 shell 环境（PERL5LIB、PERLHOME、@INC 等）。多么烦人。我放弃了 fink，转而使用 Mac Ports。

无论如何，有了一个干净的环境，我可以构建一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:21:45.400

因为我从来没有真正进入过 OSX，所以我的猜测是：

您是否尝试过按照[此处](http://www.perlmonks.org/?node_id=906346)的建议安装 MakeMaker ？听起来如果你有很多失败，这可能是有道理的。

不过，CPAN 应该为您做到这一点......

# android - 在 Android/Mono 中读取 xml 文件

> ID：12236208
> 
> 赞同：0
> 
> 时间：2012-09-02T13:08:20.573
> 
> 标签：android, xml, mono, xamarin.android

我正在尝试读取一个我计划包含在我的移动应用程序中的 xml 文件。我创建了一个名为“XML”的文件夹并添加了一个名为“test.xml”的文件。文件构建操作设置为内容。当我运行该应用程序时，它会在尝试查找文件时崩溃。这是我正在使用的代码：

```
_path = "XML/test.xml";
doc = new XmlDocument();
doc.Load(_path); 
```

这是我得到的错误：

> System.IO.DirectoryNotFoundException 已被抛出。
> 
> 找不到路径“/XML/test.xml”的一部分

我需要以某种方式注册目录/文件夹吗？感谢您的任何建议，我确定我只是错过了一些简单的事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:11:48.110

您的意思是您在项目中创建了 XML 目录吗？

如果您想将 XML 包含到您的 APK - 最好的方法之一是创建 /res/xml/file.xml 并使用 Resources 类在应用程序中读取它。请看看这个线程 - 也许你会发现它有帮助。[在 Android 中从 res/xml 打开 XML 文件](https://stackoverflow.com/questions/4329308/open-xml-file-from-res-xml-in-android) 祝你好运

# sencha-touch-2 - 在 Sencha Touch 2 中播放反馈敲击声音的最佳方式是什么？

> ID：12236210
> 
> 赞同：1
> 
> 时间：2012-09-02T13:08:25.143
> 
> 标签：sencha-touch-2

我希望我的应用程序中的按钮能够像手机中的其他 UI 元素一样播放简短的反馈声音。

我想我可以添加 Ext.Audio 组件，但仅仅播放反馈声音可能会产生太多开销。

# php - 多维数组展平

> ID：12236213
> 
> 赞同：0
> 
> 时间：2012-09-02T13:09:09.503
> 
> 标签：php, arrays, multidimensional-array

我正在努力实现这一点..也许有人知道我怎么能做到这一点我只做了部分，我也在研究 php 和 drupal 函数

![在此处输入图像描述](../Images/21f16765e1afbba7cd2ee69a5788a99e.png)

这是完整的图像

[http://imageshack.us/photo/my-images/405/array.png/](http://imageshack.us/photo/my-images/405/array.png/)

filed_new(Arr...) 必须变为 ['value'] = string (11111)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:31:11.860

**您的输入数组：**

```
...
0{
    data{
        nid => 1
        vid => 1
        type => article
        field_new{
            und{
                0{
                    value => 11111
                }
            }
        }
    }
}
1{
    data{
        nid => 2
        vid => 2
        type => article
        field_new{
            und{
                0{
                    value => 33333
                }
            }
        }
    }
} 
```

**您想要的数组：**

```
...
0{
    data{
        nid => 1
        vid => 1
        type => article
        value => 11111
    }
}
1{
    data{
        nid => 2
        vid => 2
        type => article
        value => 33333
    }
} 
```

[**Unset** (http://php.net/manual/en/function.unset.php)](http://php.net/manual/en/function.unset.php)是我们的朋友。

> unset() 销毁指定的变量。

**使用此代码：**

```
<?php

$loop_count = count($input_arr);
for($i=0;$i<loop_count;$i++){
    //copy the value to the desired place
    $input_arr[$i]["data"]["value"] = $input_arr[$i]["data"]["field_new"]["und"][0]["value"];

    //delete the unwanted portion
    unset($input_arr[$i]["data"]["field_new"]);
} // for loops ENDS

?> 
```

**假设：**

*   您的基本/父数组是数字索引的。
*   在每个数组中，field_new 处于同一级别。

请添加您用于生成/获取此数组的代码，我们可以为您提供更具体的答案。

# php - 刷新包含帖子变量的页面

> ID：12236214
> 
> 赞同：0
> 
> 时间：2012-09-02T13:09:13.493
> 
> 标签：php, post

这是一个简单的用户名/密码登录表单。当我提交正确的数据时，它会转到 test.php 并回显 'hi' 。但是，如果我在 test.php 上点击刷新，它会显示没有权限。提交后刷新 test.php 后，如何让它在 test.php 上显示“hi”？

登录.php：

```
<?php
    session_start();
    session_unset();
?>

<html>
    <body>
        <?php include 'header.php'; ?> 
        <form action = "test.php" method = "post">
            <br/>
            Enter username
            <input type = "text" name = "user"/>
            <br/>
            Enter passowrd
            <input type = "password" name = "pass"/>
            </br>
            <input type = "submit" value = "submit" name = "submit"/>
        </form>
    </body>
</html> 
```

测试.php：

```
<?php
    session_cache_limiter('private_no_expire');
    session_start();
    $_SESSION['authuser'] = 0;

    if(isset($_POST['user']) && isset($_POST['pass']))
    {
        $_SESSION['username'] = $_POST['user'];
        $_SESSION['userpass'] = $_POST['pass'];
    }
    else
    {
        $_SESSION['username'] = NULL;
        $_SESSION['userpass'] = NULL;
    }

    if($_SESSION['username']=="joe" && $_SESSION['userpass'] == 123456)
    {
        $_SESSION['authuser']=1;
        echo 'hi';
    }
    else
    {
        echo "No permission";
        exit();
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:14:54.630

刷新时，您的浏览器应该为您提供重新发布值的选项，如果您单击是，它应该可以工作。

或者您可以删除代码的 else 部分：

```
else
{
    $_SESSION['username'] = NULL;
    $_SESSION['userpass'] = NULL;
} 
```

如果您删除它，那么会话变量将被记住，并且您的其余代码将使用这些会话值。

**编辑**：

在第一次加载该页面时（上面有我建议的更改），之前没有登录，你会得到未定义的索引错误。要解决此问题，您可以更改该行：

```
if($_SESSION['username']=="joe" && $_SESSION['userpass'] == 123456) 
```

到

```
if(isset($_SESSION['username']) && $_SESSION['username']=="joe" && isset($_SESSION['userpass']) && $_SESSION['userpass'] == 123456) 
```

这将检查用户名和用户密码是否已设置，然后再检查它们的值。

# c# - 如何将 DB 字段解析为 gridview asp:TemplateField

> ID：12236218
> 
> 赞同：0
> 
> 时间：2012-09-02T13:09:54.947
> 
> 标签：c#, asp.net, asp.net-mvc-3, gridview

我有一个带有字段的数据库记录`JsonPreview`

格式化：`{Name:"bla bla", ImageUrl:"www.myimago.gif"}`

我想将此数据拆分为我的 gridView 表中的两列

我怎样才能做到这一点？

```
<asp:TemplateField  HeaderText="Name">
<ItemTemplate>
      <asp:Image ID="ItemImage" runat="server" ImageUrl="<%# DataBinder.Eval(Container.DataItem, JsonPreview.ImageUrl)) %>" />
</ItemTemplate>
 </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:56:13.840

您可以在后面的代码中将它们拆分为两个字段

```
// Let I have two properties on my page as
 protected string ImageUrl { get; set; }
protected string Name { get; set; }

protected void Page_Load(object sender, EventArgs e)
{
    // Suppose I have the value in a string variable val
   string val = " {Name:'bla bla', ImageUrl:'www.myimago.gif'}";

   // Split them using String.Split function
   string[] array = val.Split(',');
   ImageUrl = array[1].Replace('}',' ');
   Name = array[0].Replace('{',' ');   

}

// aspx source code

<%= Name %>        // Output: Name:'bla bla' 
<%= ImageUrl %>    // Output: ImageUrl:'www.myimago.gif' 
```

或者如果你只想要 ImageURL 那么你可以从你的 sql 查询中只返回 ImageURL 作为

```
Declare @var varchar(50)
set @var = '{Name:"bla bla", ImageUrl:"www.myimago.gif"}'

select SUBSTRING(@var, CHARINDEX('ImageUrl:',@var,0) ,LEN(@var) - CHARINDEX('ImageUrl:',@var,0)) as [Image URL]

// Output: ImageUrl:"www.myimago.gif" 
```

# php - preg_replace 和 preg_match_all 的结果不同

> ID：12236224
> 
> 赞同：2
> 
> 时间：2012-09-02T13:10:48.953
> 
> 标签：php, regex, preg-replace, preg-match-all

我有一个支持主题标签的论坛。我正在使用以下行将所有主题标签转换为链接。我正在使用该`(^|\(|\s|>)`模式来避免在 URL 中获取命名锚点。

```
$str=preg_replace("/(^|\(|\s|>)(#(\w+))/","$1<a href=\"/smalltalk.php?Tag=$3&amp;".SID."\">$2</a>",$str); 
```

当用户发布他们的消息时，我正在使用此行来获取主题标签以将它们存储在单独的字段中，这会获取所有主题标签，除了新行开头的那些。

```
preg_match_all("/(^|\(|\s|>)(#(\w+))/",$Content,$Matches); 
```

使用`m`&`s`修饰符没有任何区别。在第二种情况下我做错了什么？

编辑：输入文本可以是纯文本或 HTML。问题输入示例：

```
#startoftextreplacesandmatches #afterwhitespacereplacesandmatches <b>#insidehtmltagreplacesandmatches</b> :)
#startofnewlinereplacesbutdoesnotmatch :( 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:14:46.897

您的替换操作有一个您显然还没有遇到过的问题——它将允许未转义的 HTML 特殊字符通过。我知道这是因为您的正则表达式允许主题标签以 为前缀`>`，这是一个特殊字符。

出于这个原因，我建议您使用此代码进行替换，这将兼作提取要插入数据库的标签的代码：

```
$hashtags = array();

$expr = '/(?:(?:(^|[(>\s])#(\w+))|(?P<notag>.+?))/';

$str = preg_replace_callback($expr, function($matches) use (&$hashtags) {
    if (!empty($matches['notag'])) {
        // This takes care of HTML special characters outside hashtags
        return htmlspecialchars($matches['notag']);
    } else {
        // Handle hashtags
        $hashtags[] = $matches[2];
        return htmlspecialchars($matches[1]).'<a href="/smalltalk.php?Tag='.htmlspecialchars(urlencode($matches[2])).'&amp;'.SID.'">#'.htmlspecialchars($matches[2]).'</a>';
    }
}, $str); 
```

运行上述代码后，`$str`将包含修改后的字符串，正确转义以直接输出，并将`$hashtags`填充所有匹配的标签。

[看到它工作](http://codepad.viper-7.com/hB6QAK)

# android - 网页视图不工作

> ID：12236226
> 
> 赞同：0
> 
> 时间：2012-09-02T13:11:22.493
> 
> 标签：android, url, webview

我想禁用手机浏览器，我想使用 webview。但这段代码对我不起作用。请指导我：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Wop=(WebView)findViewById(R.id.webi);

        String mturl="http://www.google.com";
        Wop.getSettings().setJavaScriptEnabled(true);

        Wop.loadUrl(mturl);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:26:23.310

```
 mWebView = (WebView) findViewById(R.id.webview);
            mWebView.getSettings().setJavaScriptEnabled(true);
            mWebView.setWebViewClient(new HelloWebViewClient());
            mWebView.loadUrl("http://www.stackoverflow.com"); 
```

要加载**以前**的网页，

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
            mWebView.goBack();
            return true;
        } } 
```

类的定义**`HelloWebViewClient`**：

```
private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);

            //what you want to do when the page finished loading, eg. give some message, show progress bar, etc
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);

            //what you want to do when the page starts loading, eg. give some message
        }

    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T11:41:39.547

```
WebView w = new WebView(this); 
```

//将此添加到您的代码中

```
 w.setWebViewClient(new Callback());
 w.loadUrl("http://www.facebook.com"); 
```

//还有这个类

```
private class Callback extends WebViewClient{  //HERE IS THE MAIN CHANGE. 

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                return (false);
            }

        } 
```

# java - 在 catch 中启动一个新线程

> ID：12236229
> 
> 赞同：2
> 
> 时间：2012-09-02T13:11:50.047
> 
> 标签：java, android, multithreading

我有一个类（`class A`例如）实现`Runnable`。在运行方法中我有一个`try catch`。我想像这样开始一个新`thread`的捕获

```
new Thread(new A()).start(); 
```

这是处理异常的真正方式吗？

我的意思是这可能是一种危险的方式，因为堆很快就会被填满；换句话说`garbage collector`，不会`object`因为刚刚在其中创建另一个对象而造成垃圾。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:42:21.347

> 我的意思是这可能是一种危险的方式，因为堆很快就会被填满；换句话说，垃圾收集器不会垃圾这个对象，因为刚刚在其中创建了另一个对象。

由于这个原因，它并不危险。如果我们假设这`new Thread(new A()).start();`是原始线程在退出之前所做的最后一件事，那么当我们需要 GC 时，原始线程将已经退出，因此它的堆栈内容将无法访问。唯一仍然可以访问的线程将是它仍然存在的线程。

但是，如果新线程可能会重复计算，然后一次又一次地抛出相同的异常，这是很危险的……所以如果你写这样的代码，应用程序保持跟踪线程重新启动的频率，如果它发生得太频繁，请拔掉插头。

编写的代码的另一个问题是启动原始线程的代码看到它死了，但没有听到新线程的消息。如果您想通过中断工作线程来启动关闭，那将是有问题的。

如果将这两个问题（和其他问题）放在一起，最好由启动原始线程的代码负责重新启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T13:17:03.210

Thread 是新的并行轻量级进程。一旦其运行方法完成，它将有资格进行 GC。我认为它不会影响对象从它开始的地方的 GC 生命周期。

在您的情况下，只有一件新事物是使用线程处理异常。在不了解有关您为什么要这样做的更多详细信息的情况下，很难说它是安全/良好的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T13:19:00.120

这不是在线程中处理异常的好方法。为什么新创建的同类型线程不会出现同样的异常？

你应该做的是让某种形式的线程管理器比线程更上一层楼，它将监视、处理并在旧线程失败时在必要时重新创建新线程。

这将允许您添加更多方法来处理错误，并且如果您尝试调试线程，看起来会更整洁。而不是所有这些挂起的线程（因为父级已被 GC 清理），您会知道所有线程都从同一位置产生。

您提出的建议不会使堆变得混乱，因为线程在完成运行后将被 GC 处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T13:15:14.773

如果您没有存储对您创建的线程的任何引用 - 它将在终止时被 GC 清理。在您的情况下，我认为在 run() 方法中启动一个新线程是非常安全的。

请确保您没有创建内部类或存储此线程实例 - 当然，这可能会导致内存泄漏。

祝你好运

# facebook - facebook api 不检索电子邮件和生日

> ID：12236232
> 
> 赞同：1
> 
> 时间：2012-09-02T13:11:58.183
> 
> 标签：facebook, facebook-graph-api, symfony1, facebook-login

我使用带有 symfony 的 facebook sdk api，在下面的 $user_profile 数组中，他可以检索除电子邮件和生日之外的所有信息。

```
 require 'facebook.php';
        $app_id = sfConfig::get('app_facebook_app_id');
        $app_secret = sfConfig::get('app_facebook_secret_key');
        $facebook = new Facebook(array(
            'appId' => $app_id,
            'secret' => $app_secret,
            ));
        $user = $facebook->getUser();
        if ($user) {
              try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
        }
       if ($user) {        
           $location= $user_profile['location']['name'];
           $gender = $user_profile['gender'];
            $user_info = array(
                'uid' => $user_profile['id'],
                'first_name' => $user_profile['first_name'],
                'last_name' => $user_profile['last_name'],
                'email' => $user_profile['email'],
                'birthday' => $user_profile['birthday'],
                'gender' => $user_profile['gender'],
            ); 
```

当我使用`print_r($user_profile)`它时返回：

```
Array ( 
  [uid] => 100004246655890 
  [first_name] => Ala 
  [last_name] => Hamad 
  [email] => 
  [birthday] => 
  [gender] => male 
) 
```

电子邮件和生日为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:09:23.010

您的代码中没有任何地方显示您正在请求访问用户电子邮件地址或生日所需的[权限](https://developers.facebook.com/docs/authentication/permissions/)

检查权限文档并确保您在[身份验证](https://developers.facebook.com/docs/authentication/)代码中请求`email`和`user_birthday`权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:21:09.363

如果您没有收到这些信息，原因之一是用户配置禁止共享它们，而 Facebook 没有发送警告。

因为某些用户在配置中禁止共享电子邮件或其他信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:52:13.687

我搜索了如何在代码中编写它，然后我发现我必须在登录 url 的范围内请求电子邮件权限：

```
$params = array(
  'redirect_uri' => url_for('sfGuardAuth/loginWithFB', true),'scope' => 'email,user_birthday,user_location'
);
  $loginUrl = $facebook->getLoginUrl($params); 
```

# javascript - 用函数定义变量

> ID：12236235
> 
> 赞同：0
> 
> 时间：2012-09-02T13:12:21.560
> 
> 标签：javascript

我需要这个脚本的帮助解释

```
var test = {
    property_1 : 'aaa',
    property_2 : 'bbb'
}

var place = function(str, ph){
    return test[ph];
} 
```

定义的含义是`place`什么，该函数的返回类型是什么？
我不明白参数`str`从哪里来`ph`？

这是我在**第 19 行阅读的屏幕截图教程**

![在此处输入图像描述](../Images/b4fcf8deffadb7f447b43d7b91b57e3f.png)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:13:45.317

> 定义的含义是`place`什么？

函数是 JavaScript 中的第一类。它们可以分配为变量的值。

然后您可以调用该变量`place`，该变量将调用它指向的函数（其值）。

> 该函数的返回类型是什么？

里面可以是任何东西。很可能它将是一个`string`或`undefined`。

> 我不明白参数`str`从哪里来`ph`？

他们会像这样通过...

```
place(1, 2); 
```

在您的示例中，第一个参数似乎是多余的，因为它没有在函数体中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T13:15:35.087

`place`是一个函数。它的返回类型是`typeof test[ph]`，这是一个`string`。它*类似于*以下内容：

```
function place (str, ph) {
  return test[ph];
} 
```

调用时需要传递给函数的参数`str`和参数：`ph`

```
place("foo", "property_1"); 
```

**编辑**：的第二个参数[`String.replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)可以是一个函数。因此，当您在`html.replace(searchPattern, placeholderReplacer)`内部`replace`调用 时，将`placeholderReplacer`使用参数`str`和调用`ph`，它们分别表示匹配的子字符串和第一个匹配的捕获组。

### 参考：

*   [`JavaScript: var functionName = function() {} vs function functionName() {}`](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

# c# - 在 Web 配置连接字符串中使用解决方案文件夹

> ID：12236236
> 
> 赞同：0
> 
> 时间：2012-09-02T13:12:22.703
> 
> 标签：c#, visual-studio, web-config

我想把我的数据库放在解决方案项目文件夹中。如何将连接字符串中的这些文件夹用作数据源。？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:25:54.523

`Solution Items`文件夹只是解决方案中的一个逻辑文件夹，它没有映射到磁盘上的文件夹。*因此，只需将您的数据库放在磁盘上*任何您想要的位置，并在连接字符串中使用该位置。

# android - Android - HttpClient 上传图片失败

> ID：12236252
> 
> 赞同：0
> 
> 时间：2012-09-02T13:15:29.543
> 
> 标签：android, httpclient

我在使用 Android 4.0.3 将图像上传到服务器时遇到问题

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
     super.onActivityResult(requestCode, resultCode, data);
     if (requestCode == 1 && resultCode == Activity.RESULT_OK)
     {
         Uri selectedImageUri = data.getData(); 
         String selectedImagePath = getPath(selectedImageUri); 

         Bitmap bitmap = BitmapFactory.decodeFile(selectedImagePath);           
         ByteArrayOutputStream stream = new ByteArrayOutputStream();
         Bitmap resizedDishImage = Bitmap.createScaledBitmap(bitmap, 150, 150, false);
         resizedDishImage.compress(Bitmap.CompressFormat.PNG, 90, stream); //compress to which format you want.
            byte [] byte_arr = stream.toByteArray();
            String image_str = Base64.encodeBytes(byte_arr);
            ArrayList<NameValuePair> nameValuePairs = new  ArrayList<NameValuePair>();

            nameValuePairs.add(new BasicNameValuePair("image",image_str));

            try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(ResearchConstants.UPDATE_IMAGE);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                String the_string_response = convertResponseToString(response);
                Log.d("Response", the_string_response);
            }catch(Exception e){
                  System.out.println("Error in http connection "+e.toString());
            }

     }
 }

 public String convertResponseToString(HttpResponse response) throws IllegalStateException, IOException{

     String res = "";
     StringBuffer buffer = new StringBuffer();
     inputStream = response.getEntity().getContent();
     int contentLength = (int) response.getEntity().getContentLength();
     if (contentLength < 0){

     }
     else{
            byte[] data = new byte[512];
            int len = 0;
            try
            {
                while (-1 != (len = inputStream.read(data)) )
                {
                    buffer.append(new String(data, 0, len)); //converting to string and appending  to stringbuffer…..
                }
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            try
            {
                inputStream.close(); // closing the stream…..
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            res = buffer.toString();     // converting stringbuffer to string…..
            //System.out.println("Response => " +  EntityUtils.toString(response.getEntity()));
     }
     return res;
} 
```

这是我的java代码。

```
$base=$_REQUEST['image'];
$binary=base64_decode($base);
header('Content-Type: bitmap;charset-utf-8');
$file = fopen('uploaded_image.png', 'wb');
fwrite($file, $binary);
fclose($file);
echo "Image Upload Complete!!, Check PHP File Directory."; 
```

上面的代码是我的 php.ini 文件。

我有它的结果说图像已上传，但是当我检查文件目录时。没有这样的图片目录？？有人可以要求解决方案或替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:07:53.880

您正在主线程上执行 HTTP 操作。这是不正确的并导致异常。但是随后您会默默地捕获该异常-`error in http connection` 在日志中进行简单的打印。在不同的线程上执行 http 操作。

# java - 使用带有 jQ uery 或 JavaScript 的 Play 2 框架下拉列表

> ID：12236256
> 
> 赞同：1
> 
> 时间：2012-09-02T13:16:51.503
> 
> 标签：java, javascript, jquery, playframework

我是玩框架的新手，所以请多多包涵。有人可以向我解释如何使用 jQuery 函数访问在 play 2 框架下拉列表中选择的项目吗？

例如：

```
 <select class = "selectone">
@for(gesture <- gesturesList){
  <div class = "gesture" >  <option value = @gesture.id>
        @gesture.getName()
  </option>
  </div>} 
</select> 
```

上面的下拉列表由以下函数填充：

```
public static Result gesture()
  {
  List <Gesture> gcet = Gesture.find.orderBy("name asc").findList();
  return ok(views.html.train.render(gcet)); 
} 
```

我想使用 jQuery 或 JavaScript 访问选定的项目。任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:45:52.450

除非我误解了，否则这与 Play 无关，它是纯 Jquery：

```
 //uses a class selector to get the selected value in the dropdown
 $(".selectone").val(); 
```

也就是说，你`div`在你的选择中添加了一个，它不应该是这样的。您的代码应该是：

```
 <select class = "selectone">
  @for(gesture <- gesturesList){
      <option value = @gesture.id>
        @gesture.getName()
      </option>
  } 
  </select> 
```

# asp.net - 如何对文件使用 MVC3 数据注释？

> ID：12236265
> 
> 赞同：0
> 
> 时间：2012-09-02T13:18:08.727
> 
> 标签：asp.net, asp.net-mvc-3

我正在做一个需要上传文件的编程项目，但我不知道如何正确使用数据注释来做到这一点，有人可以帮帮我吗？

我正在使用 Code First Entity 框架，我想存储在数据库中的值只是服务器上图像的 url。到目前为止，我只有这段代码。

```
[DisplayName("Ad Image")]
[StringLength(1024)]
public string   AdImageUrl  { get; set; } 
```

我正在尝试使数据验证正常工作，因此我可以使用与其他输入字段相同的数据验证系统来检查是否发送了正确的文件类型。

# php - 有什么方法可以在不重新加载的情况下更改标头 URL？

> ID：12236266
> 
> 赞同：2
> 
> 时间：2012-09-02T13:18:12.067
> 
> 标签：php, javascript, jquery, html

> **可能重复：**
> [修改 URL 而不重新加载页面](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)
> [使用新 URL 更新地址栏而不使用哈希或重新加载页面](https://stackoverflow.com/questions/3338642/updating-address-bar-with-new-url-without-hash-or-reloading-the-page)

我的站点完全基于 Ajax 请求，站点内的简单导航仅从一个页面完成。这意味着当用户单击菜单项时，它不会加载另一个页面，而是加载 HTML 元素内的内容。但是当用户想要将一个页面链接到他们的朋友时，它总是一样的，因为[http://mysite.com/mymainpage.php](http://mysite.com/mymainpage.php)总是一样的，不管 ajax 拉起什么。如何修改用户标题？例如，当他们单击“游戏”时，jquery/js/php/html 可以更改浏览器上的当前 URL 地址栏吗？这样它就变成了[http://mysite.com/mymainpage.php?games=true](http://mysite.com/mymainpage.php?games=true)。然后用户可以从地址栏中复制站点 url，它将导致 ajax 加载的正确部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:26:05.567

您可以使用哈希：

*   [http://mysite.com/mymainpage.php](http://mysite.com/mymainpage.php)

*   [http://mysite.com/mymainpage.php#games](http://mysite.com/mymainpage.php#games)

（这就是 gmail 所做的：[https://mail.google.com/mail/#inbox](https://mail.google.com/mail/#inbox)，[https://mail.google.com/mail/#sent](https://mail.google.com/mail/#sent)）

您可以使用

```
window.location.hash /* gives "#games" */ 
```

或者

```
window.location.hash.substring(1) /* gives "games" */ 
```

你可以改变它使用

```
window.location.hash="#games" 
```

或者

```
window.location.hash="games" 
```

（似乎可行，但最好使用第一个选项）

然后，每次用户单击链接时，更改哈希值并像现在一样加载新页面。

当用户进入您的页面时，检查 URL 中是否有哈希并加载该页面。

您还可以添加一个 hashchange 事件侦听器。请参阅[https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/hashchange](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/hashchange)

**编辑：**

不，你不能有两个哈希（[http://mysite.com/mymainpage.php#games#fashion](http://mysite.com/mymainpage.php#games#fashion)）

因此，如果用户访问[http://mysite.com/mymainpage.php?games=true](http://mysite.com/mymainpage.php?games=true)，您应该将他重定向到[http://mysite.com/mymainpage.php#games](http://mysite.com/mymainpage.php#games)。

然后您可以将其更改为[http://mysite.com/mymainpage.php#fashion](http://mysite.com/mymainpage.php#fashion)而无需重新加载。

# mysql - 如何使用 PHP 在设定的日期自动从 mysql 中删除

> ID：12236267
> 
> 赞同：3
> 
> 时间：2012-09-02T13:18:11.460
> 
> 标签：mysql

我在数据库中的广告表中添加了一些行，它们的属性包括创建日期和到期日期。

我需要 php 脚本来自动删除其到期日期已到的行。

请协助我的项目。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T14:30:11.873

您可以使用 MySQL 的[事件调度程序](http://dev.mysql.com/doc/en/events.html)在这些记录过期时自动删除它们：

```
CREATE EVENT delete_expired_101
ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 3 WEEK DO
DELETE FROM my_table WHERE id = 101; 
```

或者定期自动清除所有过期记录：

```
CREATE EVENT delete_all_expired
ON SCHEDULE EVERY HOUR DO
DELETE FROM my_table WHERE expiry < NOW(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T13:32:58.780

```
<?php
   $today = getdate();
   if($today <= $expirayDate)
   {
       //your deletion logic
   }
?> 
```

另一种方法是过滤您的选择查询，即隐藏所有未过期的字段；

```
$query = "SELECT * FROM `yourTable` WHERE `expiration` >= NOW();"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:42:39.660

您正在寻找的是`crontab`.

使用它，您将能够安排脚本在确定的时间运行，例如：

运行`deleteExpiredRows.php`每个`5 minutes`
运行`updateOnlineUsers.php`每个`2 hours`

Cron 非常易于使用。查看此[快速参考指南](http://www.adminschoice.com/crontab-quick-reference)

### 在您的虚拟主机上设置 crontab：

`/path/to/hosting/php /home/user/public_html/script.php`

php 的路径可能会有所不同，因此请联系您的主机以获取此信息。有关 crontab 的更多信息可以在 stackoverflow 上找到。

注意：您可能需要检查您的网络托管服务是否支持 crontab。

完成此操作后，您只需创建 PHP 脚本以删除比当前时间早的每一行。

# javascript - JavaScript 中是 true == 1 和 false == 0 吗？

> ID：12236271
> 
> 赞同：54
> 
> 时间：2012-09-02T13:18:43.287
> 
> 标签：javascript, type-conversion

我正在阅读一本关于 JavaScript 的好书。

它开始于：

> Boolean 类型只接受两个字面值：true 和 false。它们与数值不同，所以 true 不等于 1，false 不等于 0。

但是，我观察到以下内容：

```
if(1==true)
  document.write("oh!!! that's true");  //**this is displayed** 
```

我知道，JavaScript 中的每种类型都有对应的布尔值。

但是，真相是什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-02T13:31:47.767

确实，`true`并且`false`不代表 Javascript 中的任何数值。

在某些语言（例如 C、VB）中，布尔值被定义为实际数值，因此它们只是 1 和 0（或 -1 和 0）的不同名称。

在其他一些语言（例如 Pascal、C#）中，有一种独特的布尔类型，它不是数字。可以在布尔值和数值之间进行转换，但不会自动发生。

Javascript 属于具有独特布尔类型的类别，但另一方面，Javascript 非常热衷于在不同数据类型之间转换值。

例如，即使数字不是布尔值，您也可以在需要布尔值的地方使用数值。使用`if (1) {...}`效果和`if (true) {...}`.

`==`在比较值时，例如在您的示例中，运算符和运算符之间存在差异`===`。相等运算符很乐意在`==`类型之间进行转换以找到匹配项，因此`1 == true`计算结果为 true，因为`true`已转换为`1`. `===`类型相等运算符不进行类型转换，因此`1 === true`计算结果为 false，因为值的类型不同。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-02T13:22:33.453

> 在 JavaScript 中，== 发音为“可能等于”。

我的意思是 JavaScript 会自动将布尔值转换为整数，然后尝试比较两侧。

对于真正的相等，使用 === 运算符。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-02T13:21:04.207

尝试严格的相等比较：

```
if(1 === true)
    document.write("oh!!! that's true");  //**this is not displayed** 
```

`==`运算符会从一种类型转换为另一种类型，而运算`===`符则不会。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-02T14:14:39.197

来自 ECMAScript 规范，第**[11.9.3 节抽象相等比较算法](http://ecma-international.org/ecma-262/5.1/#sec-11.9.3)**：

> 比较 x == y，其中 x 和 y 是值，产生真或假。如下进行这样的比较：
> 
> *   如果 Type(y) 是布尔值，则返回比较结果**x == ToNumber(y)**。

因此， in, `if (1 == true)`,`true`被强制转换为 a `Number`，即`Number(true)`，这导致 的值`1`，产生最终`if (1 == 1)`结果是`true`。

`if (0 == false)`是完全相同的逻辑，因为`Number(false) == 0`.

当您使用严格的等于运算符时，不会发生这种情况`===`：

> [**11.9.6 严格等式比较算法**](http://ecma-international.org/ecma-262/5.1/#sec-11.9.6)
> 
> 比较 x === y，其中 x 和 y 是值，产生真或假。如下进行这样的比较：
> 
> *   如果 Type(x) 与 Type(y) 不同，则返回**false**。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-02T13:21:32.467

啊，可怕的松散比较运算符又来了。永远不要使用它。始终使用严格比较，=== 或 !== 代替。

奖金事实：`0 == ''`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-11-03T14:06:58.857

当将某些东西与布尔值进行比较时，它的工作原理如下

第 1 步：转换`boolean`为`Number` `Number(true) // 1`和`Number(false) // 0`

第 2 步：比较双方

```
boolean == someting 
-> Number(boolean) === someting 
```

如果`1`和你`2`比较`true`会得到以下结果

```
true == 1
-> Number(true) === 1
-> 1 === 1
-> true 
```

和

```
true == 2
-> Number(true) === 1
-> 1 === 2
-> false 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-22T01:17:52.920

实际上，如果 javascript 中的每个对象都像 W3Cschools 所说的那样具有“真正的价值”，它就会解析为 true。这意味着除`""`, `NaN`,或`undefined`之外的所有内容。`null``0`

用运算符测试一个数字与布尔值`==`确实有点奇怪，因为布尔值在比较之前被转换为数字 1，这有点违背定义背后的逻辑。当您执行以下操作时，这会变得更加混乱：

```
 var fred = !!3; // will set fred to true 
    var joe = !!0; // will set joe to false
    alert("fred = "+ fred + ", joe = "+ joe);
```

并非 javascript 中的所有内容都很有意义；）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-02T13:23:21.813

用于`===`使变量相等，而不是`==`.

`==`检查变量的值是否相似

`===`检查变量的值和变量的类型是否相似

注意如何

```
if(0===false) {
    document.write("oh!!! that's true");
}​ 
```

和

```
if(0==false) {
    document.write("oh!!! that's true");
}​ 
```

给出不同的结果

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-02T13:25:55.097

使用 == 您本质上是在比较变量与 false 比较时是否为 false 或与 true 比较时是否为 true。如果您使用 ===，它将比较变量的确切值，因此 true 不会 === 1

# jax-rs - 如何从 jax-rs webservice 抛出自定义错误消息

> ID：12236274
> 
> 赞同：1
> 
> 时间：2012-09-02T13:19:02.030
> 
> 标签：jax-rs, soapfault

任何人都可以帮助我如何从 jax-rs webservice 抛出自定义服务器异常，该异常将在 xml 标记中向客户端发送响应。因为我无法找到该 Web 服务的 wsdl 文件，所以任何人都可以通过提供完整的教程或完整的示例来帮助我

提前致谢。

# php - 为图像滑块在 drupal7 中自定义视图字段的 html

> ID：12236275
> 
> 赞同：0
> 
> 时间：2012-09-02T13:19:04.550
> 
> 标签：php, html, drupal, drupal-7, slider

我正在使用 Drupal 7。我正在尝试使用图像和 Vimeo 视频创建一个媒体滑块。为此，我创建了一个内容类型，其中一个字段用于图像，一个字段用于 Vimeo 链接。我已将字段设置为无限制。

我正在查看页面中显示我的内容。问题是 Drupal 为不同的字段类型创建了两个不同的包装器。所有图像都用一个 div 包装，视频用另一个 div 包装。

但我想为所有东西准备一个包装纸，为每件商品准备一个包装纸。例如：

```
<div class="slider">
    <div class="item">
        <img typeof="foaf:Image" src="image.jpg" width="658" height="420" alt="">
    </div>
    <div class="item">
        <img typeof="foaf:Image" src="image2.jpg" width="658" height="420" alt="">
    </div>
    <div class="item">
        <iframe title="Video title" src="http://myVideoLink?color=cccccc" frameborder="0" width="658" height="420" id="vimeo-player"></iframe>
    </div>
    <div class="item">
        <iframe title="Video title" src="http://myVideoLink2?color=cccccc" frameborder="0" width="658" height="420" id="vimeo-player"></iframe>
    </div>
</div> 
```

而不是这个：

```
<div class="views-field views-field-field-image">
    <div class="field-content">
        <span thmr="thmr_3">
            <span thmr="thmr_4">
                <span thmr="thmr_5">
                    <img typeof="foaf:Image" src="image.jpg" width="658" height="420" alt="">
                </span>
            </span>
        </span>
        ,
        <span thmr="thmr_6">
            <span thmr="thmr_7">
                <img typeof="foaf:Image" src="image2.jpg" width="658" height="420" alt="">
            </span>
        </span>
    </div>
</div>
<div class="views-field views-field-field-vimeo">
    <div class="field-content">
        <span thmr="thmr_10">
            <iframe title="Video title" src="http://myVideoLink?color=cccccc" frameborder="0" width="658" height="420" id="vimeo-player"></iframe>
            , 
            <iframe title="Video title" src="http://myVideoLink2?color=cccccc" frameborder="0" width="658" height="420" id="vimeo-player"></iframe>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:45:34.643

1.  在编辑视图时，转到字段设置（单击字段部分中的图像字段）然后展开“样式设置”字段集并取消选中“添加默认类”复选框
2.  在编辑您的视图时，展开“其他”部分并单击主题（信息）链接，然后在您的活动主题文件夹中创建所需的模板文件。您需要 Style 输出模板和 Field ([[your image field name here]]) 模板。

请注意，您还需要根据您希望应用模板的范围（即仅页面或仅块等）选择正确的模板文件名并刷新缓存（创建文件后单击“重新扫描”）。

# php - 不存在 $_REQUEST 时的“if else 语句”

> ID：12236277
> 
> 赞同：2
> 
> 时间：2012-09-02T13:19:39.247
> 
> 标签：php, request, if-statement

我正在制作一个简单的 if 和 else 语句来从我的代码请求的链接中获取价值

```
if($_REQUEST['f_id']=='')
{
    $friend_id=0;
}
else
{
    $friend_id=$_REQUEST['f_id'];
} 
```

并假设链接是`www.example.com/profile.php?f_id=3`

现在它很简单，就好像`f_id`if 和 else 语句中的任何一个为空或具有值一样。但是什么是用户只是在玩链接，他删除了整个`?f_id=3`链接，留下了要打开的链接，`www.example.com/profile.php`然后如何检测不`f_id`存在的链接，在这种情况下重定向到错误页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T13:22:30.127

```
if ( isset( $_REQUEST['f_id'] ) ) {
    if($_REQUEST['f_id']=='') {
        $friend_id=0;
    } else {
        $friend_id=$_REQUEST['f_id'];
    }
} else {
    REDIRECT TO ERROR PAGE
} 
```

**更新**由于您的 URLS-s 看起来`www.example.com/profile.php?f_id=3`您应该使用`$_GET`而不是`$_REQUEST`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T13:23:50.007

您可以使用 isset() php 函数来测试：

```
if(!isset($_REQUEST) || $_REQUEST['f_id']=='')
{ 
   $friend_id=0; 
} 
else 
{ 
  $friend_id=$_REQUEST['f_id']; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T17:47:41.237

迟到的答案，但这是我一直使用的“优雅”解决方案。我从我感兴趣的所有变量的代码开始，然后从那里开始。您还可以对提取的变量执行许多其他操作，如 PHP [EXTRACT](http://us1.php.net//manual/en/function.extract.php)文档中所示。

```
// Set the variables that I'm allowing in the script (and optionally their defaults)
    $f_id = null        // Default if not supplied, will be null if not in querystring
    //$f_id = 0         // Default if not supplied, will be false if not in querystring
    //$f_id = 'NotFound'    // Default if not supplied, will be 'NotFound' if not in querystring

// Choose where the variable is coming from
    extract($_REQUEST, EXTR_IF_EXISTS); // Data from GET or POST
    //extract($_GET, EXTR_IF_EXISTS);   // Data must be in GET
    //extract($_POST, EXTR_IF_EXISTS);  // Data must be in POST

if(!$f_id) {
    die("f_id not supplied...do redirect here");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T20:36:34.700

您可以使用[empty](http://us3.php.net/empty)将 2x isset 组合成 1 个语句（除非您实际上有一个为 0 的friend_id，这将导致 empty 为真）

```
if(empty($_REQUEST['f_id'])) {
   $friend_id=0;
} else {
  $friend_id=$_REQUEST['f_id'];
} 
```

# javascript - 加载自定义类在 Ext Js 中不起作用

> ID：12236279
> 
> 赞同：0
> 
> 时间：2012-09-02T13:19:54.290
> 
> 标签：javascript, extjs, extjs4, loader

我正在尝试以下代码，但它不起作用。我可以在浏览器状态栏中看到来自正确路径的正确 javascript 文件正在加载，但 UI 未显示。相反，如果我将整个代码内联（在 app.js 中），那么所有代码​​都可以按预期工作。我正在使用 Ext Js 4.1.1。

应用程序.js

```
Ext.onReady(function () {
    Ext.Loader.setConfig({
        enabled: true,
        paths: {
            'company': './src/company'
        }
    });
    var largeHomeButton = Ext.create('company.classes.ToolbarLargeButton', {
        iconCls: 'home32'
    });
    var myToolbar = Ext.create('Ext.toolbar.Toolbar', {
        items: [largeHomeButton]
    });
    var master = Ext.create('Ext.panel.Panel', {
        layout: 'absolute',
        x: 0, y: 0,
        height: 100, width: 110,
        border: 5,
        lbar: [myToolbar]
    });
    Ext.create('Ext.Viewport', {
        layout: 'anchor',
        items: [master]
    });
}); 
```

src/company/classes/ToolbarLargeButton.js

```
Ext.define('ToolbarLargeButton', {
    extend: 'Ext.button.Button',
    scale: 'large',
    iconAlign: 'center'
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:33:01.380

我认为您应该在以下位置指定完整的类名`Ext.define`：

```
Ext.define('company.classes.ToolbarLargeButton', { 
```

# ios - GLKBaseEffect 未加载纹理（纹理在对象上显示为黑色）

> ID：12236297
> 
> 赞同：0
> 
> 时间：2012-09-02T13:22:35.887
> 
> 标签：ios, opengl-es, textures, glkit, glktextureloader

我在 OpenGL 项目中使用 GLKit。一切都基于 GLKView 和 GLKBaseEffect（没有自定义着色器）。在我的项目中，我有几个具有 GLKViews 用于显示 3D 对象的视图，有时其中几个视图可以一次“打开”（即在模态视图堆栈中）。

虽然到目前为止一切都很好，但在我创建的新视图中，我需要一个带有纹理的矩形来模拟我的应用程序的 3D 世界的卷尺。出于某种未知原因，仅在该视图中，纹理没有直接加载到 opengl 上下文中：纹理由 GLKTextureLoader 正确加载，但是在绘制矩形时是黑色的，并且在调试中查看 OpenGL 框架，我可以看到加载了一个空纹理（有对纹理的引用，但它全部归零或为空）。

我正在绘制的形状定义为：（它最初是一个三角形条，但我切换为三角形以确保它不是问题）

```
static const GLfloat initTape[] = {
    -TAPE_WIDTH / 2.0f, 0, 0,
    TAPE_WIDTH / 2.0f, 0, 0,
    -TAPE_WIDTH / 2.0f, TAPE_INIT_LENGTH, 0,

    TAPE_WIDTH / 2.0f, 0, 0,
    TAPE_WIDTH / 2.0f, TAPE_INIT_LENGTH, 0,
    -TAPE_WIDTH / 2.0f, TAPE_INIT_LENGTH, 0,
};
static const GLfloat initTapeTex[] = {
    0, 0,
    1, 0,
    0, 1.0,

    1, 0,
    1, 1,
    0, 1,
}; 
```

我将效果变量设置为：

```
 effect.transform.modelviewMatrix = modelview;
    effect.light0.enabled = GL_FALSE;

    // Projection setup
    GLfloat ratio = self.view.bounds.size.width/self.view.bounds.size.height;
    GLKMatrix4 projection = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(self.fov), ratio, 0.1f, 1000.0f);
    effect.transform.projectionMatrix = projection;

    // Set the color of the wireframe.
    if (tapeTex == nil) {
        NSError* error;
        tapeTex = [GLKTextureLoader textureWithContentsOfFile:[[[NSBundle mainBundle] URLForResource:@"ruler_texture" withExtension:@"png"] path] options:nil error:&error];
    }
    effect.texture2d0.enabled = GL_TRUE;
    effect.texture2d0.target = GLKTextureTarget2D;
    effect.texture2d0.envMode = GLKTextureEnvModeReplace;
    effect.texture2d0.name = tapeTex.name; 
```

渲染循环是：

```
 [effect prepareToDraw];
        glDisable(GL_DEPTH_TEST);
        glDisable(GL_CULL_FACE);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        glEnable(GL_BLEND);
        glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
        glEnableVertexAttribArray(GLKVertexAttribPosition);
        glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
        glVertexAttribPointer(GLKVertexAttribPosition, COORDS, GL_FLOAT, GL_FALSE, 0, tapeVerts);
        glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0, tapeTexCoord);

        glDrawArrays(GL_TRIANGLES, 0, TAPE_VERTS);

        glDisableVertexAttribArray(GLKVertexAttribPosition);
        glDisableVertexAttribArray(GLKVertexAttribTexCoord0); 
```

我还用其他对象在另一个视图中测试了纹理本身，它工作正常，所以这不是纹理文件错误。

任何帮助将不胜感激，因为我在这个问题上停留了超过 3 天。

更新：此外，渲染循环期间没有 glErrors。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:03:53.820

很多天后，我终于发现了我的错误 - 当使用多个 openGL 上下文时，使用 shareGroup 创建 GLKTextureLoader 很重要，否则纹理不一定会加载到正确的上下文中。

不是使用类方法 textureWithContentOf，而是每个上下文都需要它自己的 GLKTextureLoader，该 GLKTextureLoader 使用 context.sharegroup 进行初始化，并且只为该视图使用该纹理加载器。（实际上纹理可以在不同的上下文之间保存，但我不需要共享组的那个功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:53:02.973

简易教程[http://games.ianterrell.com/how-to-texturize-objects-with-glkit/](http://games.ianterrell.com/how-to-texturize-objects-with-glkit/) 我认为它会帮助你。

# security - Symfony2 和安全角色配置

> ID：12236300
> 
> 赞同：0
> 
> 时间：2012-09-02T13:23:12.067
> 
> 标签：security, symfony, acl, fosuserbundle

我正在尝试配置 Symfony ACL：

```
access_control:
    - { path: ^/, role: ROLE_A }

role_hierarchy:
    ROLE_A:           ROLE_USER
    ROLE_B:           ROLE_A
    ROLE_ADMIN:       ROLE_B
    ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

所以：`A`从`USER`，`B`从`A`等延伸。

问题是，当我以身份登录`ADMIN`或未`SUPER_ADMIN`获得`403`授权时。它仅在我被授权为`A`. 为什么？我在角色扩展方面做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T19:52:56.133

我想它必须是

```
role_hierarchy:
    ROLE_SUPER_ADMIN: [ROLE_ADMIN, ROLE_B, ROLE_A, ROLE_USER]
    ROLE_ADMIN:       [ROLE_B, ROLE_A, ROLE_USER]
    ROLE_B:           [ROLE_A, ROLE_USER]
    ROLE_A:           ROLE_USER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:09:43.027

据我所知，角色层次结构应该自上而下定义。所以在上面的例子中你应该有：

```
role_hierarchy:
        ROLE_SUPER_ADMIN: ROLE_ADMIN
        ROLE_ADMIN:       ROLE_B
        ROLE_B:           ROLE_A
        ROLE_A:           ROLE_USER 
```

# jquery - 幻灯片图像更改时网页跳转到顶部

> ID：12236306
> 
> 赞同：0
> 
> 时间：2012-09-02T13:24:10.367
> 
> 标签：jquery, slideshow, webpage

当我的网页的“幻灯片”图像发生变化时，浏览器会跳转到页面顶部？请问我可以做些什么来防止这种情况发生吗？

任何建议将不胜感激

谢谢

网站链接：

```
[Link to Site][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:44:57.043

LI 未在您的代码中启动（已注释掉）

```
<!--            <LI><A href="http://www.readingroom.com/gallery/#topNav">Skip to main navigation</A></LI>
            <LI><A href="http://www.readingroom.com/gallery/#mainContent">Skip to content</A></LI>--> 
```

现在有一个没有 LI 元素的 UL 元素，并且有一个未打开的封闭 LI 标签。所以嵌套有问题。

# design-patterns - 没有具体对象的装饰器设计模式

> ID：12236309
> 
> 赞同：1
> 
> 时间：2012-09-02T13:25:24.303
> 
> 标签：design-patterns, decorator

我看到了 Decorator DP 示例，但所有这些都暗示，具体对象将位于链的末尾：

```
IProduct prod2 = new Sugar(new Sugar(new Sugar(new Milk(new DarkRoast()))));
Console.WriteLine("I am {0}, my cost is {1}", prod2.Name(), prod2.Cost()); 
```

DarkRoast 是一个具体的对象，其他对象 - 是一个装饰器。所以，我（或客户）需要记住谁在创造链的和的。

所以，默认情况下，我不能这样做：

```
IProduct prod2 = new Sugar(new DarkRoast(new Sugar(new Milk(new Sugar()))));
Console.WriteLine("I am {0}, my cost is {1}", prod2.Name(), prod2.Cost()); 
```

但是，意思（我认为）是一样的：深烤咖啡 + 3 糖 + 1 牛奶。

因此，我将其重新设计为：

```
public interface IProduct {
    double Cost();
    string Name();
}

public class DarkRoast : IProduct {
    IProduct _product;

    public DarkRoast(IProduct prod = null) { _product = prod; }

    public double Cost() {
        if (_product != null) { return 2.5 + _product.Cost(); }
        else { return 2.5; }
    }

    public string Name() {
        if (_product != null) { return "DarkRoast " + _product.Name(); }
        else { return "DarkRoast "; }
    }
}

public class Milk : IProduct {
    IProduct _product;

    public Milk(IProduct prod = null) { _product = prod; }

    public double Cost() {
        if (_product != null) { return 0.5 + _product.Cost(); }
        else { return 0.5; }
    }

    public string Name() {
        if (_product != null) { return "With milk " + _product.Name(); }
        else { return "With milk "; }
    }
}

public class Sugar : IProduct {
    IProduct _product;

    public Sugar(IProduct prod = null) { _product = prod; }

    public double Cost() {
        if (_product != null) { return 0.2 + _product.Cost(); }
        else { return 0.2; }
    }

    public string Name() {
        if (_product != null) { return "With sugar " + _product.Name(); }
        else { return "With sugar "; }
    }
} 
```

它让我有可能做到

```
IProduct prod2 = new Sugar(new DarkRoast(new Sugar(new Milk(new Sugar()))));
Console.WriteLine("I am {0}, my cost is {1}", prod2.Name(), prod2.Cost()); 
```

所以，我不需要记住东西的顺序。而且，我认为这里的所有东西都是装饰器（这是一个坏主意吗？）这些实现有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:00:06.777

这在我看来是合理的，但可以通过添加一个用作默认委托对象的具体[Null 对象来稍微改进它，从而避免空值检查。](http://en.wikipedia.org/wiki/Null_Object_pattern)

以我对您的语言语法的了解为模（这是一种我实际上并没有使用的语言），这看起来像这样：

```
public class Empty : IProduct
{

    public double Cost()
    {
        return 0.0;
    }

    public string Name()
    {
        return "";
    }
}

public class Sugar : IProduct
{
    IProduct _product;

    public Sugar(IProduct prod = null) 
    {  
        _product = (prod == null) ? new Empty() : prod;
    }

    public double Cost()
    {
        return 0.2 + _product.Cost();
    }

    public string Name()
    {
        return "With sugar " + _product.Name();
    }
} 
```

# php - html在不工作后用php提交按钮

> ID：12236310
> 
> 赞同：1
> 
> 时间：2012-09-02T13:25:24.663
> 
> 标签：php, html, button, submit

我似乎无法在互联网上找到我的问题的答案。我不禁认为这是一个愚蠢的错误，但是我已经检查了我的代码至少 6 到 7 次，甚至休息一下用新的眼光看它。如果有人可以帮我看一下，那将是超级甜蜜的！

```
<div id="input_alignment" style="font-size:20px">

<?php 

if(!($Valid_Profile == true)){ ?>
    ...Form that has no issues
<?php }
else{ ?>

    <form action="Redact_Profiles.php" style="font-size:19px" method="post">
    <input type="hidden" value="<?php echo $Valid_Profile ?>" name="Valid_Profile" />
    <input type="hidden" value="<?php echo $Username ?>" name="Username" />
    <input type="hidden" value="<?php echo $Password ?>" name="Password" />

    <br />
    &emsp;&emsp; <?php echo $Profile_Username . "<br>"; ?>
    <input type="submit" style="font-size:9px" value="Edit" name="" />&ensp;<?php echo $Profile_Password . "<br>"; ?>
    <br />
    <br />
    ......<br />
    <input type="submit" style="font-size:9px" value="Edit" name="" />&ensp;<?php echo $Profile_First_Name . "<br>"; ?>
    <input type="submit" style="font-size:9px" value="Edit" name="" />&ensp;<?php echo $Profile_Last_Name . "<br>"; ?>
    &emsp;&emsp; <?php echo $Profile_EMail . "<br>"; ?>
    <br />
    <input type="submit" style="font-size:9px" value="Edit" name="" />&ensp;<?php echo $Profile_Location . "<br>"; ?>
    <input type="submit" style="font-size:9px" value="Edit" name="" />&ensp;<?php echo $Profile_Referee_Password . "<br>"; ?>
    <input type="submit" style="font-size:9px" value="Edit" name="" />
    </form>
<?php }

?>
</div> 
```

最后两个提交按钮不起作用。当我拿走包含`$Profile_Location`and的 php`$Profile_Referee_Password`时，提交按钮起作用。

抱歉，我所说的*不起作用*意味着提交按钮没有响应。该页面不会重新加载，并且就像提交按钮被禁用一样。提交按钮看起来已启用，但就像它不想“按下”一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T23:20:00.880

经过 2 天的头痛后，我想通了：当提交按钮超出任何“div”的高度和宽度的范围时，它不会像按钮一样起作用，而更像是一张图片。因此，作为一种好的做法，当按钮无法正常工作时，请检查它是否确实位于您放入的容器的“外部”。
在查看源页面或任何错误检查时不会出现此错误. 但是，如果是这样，我不知道。如果有人感兴趣，我正在使用 Mac、Safari 6 和 CS5 Dreamweaver。

# php - PHP 服务器端验证

> ID：12236312
> 
> 赞同：0
> 
> 时间：2012-09-02T13:25:50.033
> 
> 标签：php, validation, server-side

使用各种教程，即[here](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)和[here](http://net.tutsplus.com/tutorials/javascript-ajax/building-a-sleek-ajax-signup-form/)，我设法将以下PHP脚本放在一起，该脚本对提交的表单执行服务器端验证。（我已经有处理“客户端”验证的脚本。

```
<?php
//email signup ajax call
if($_GET['action'] == 'signup'){

    //sanitize data
    $email = mysql_real_escape_string($_POST['signup-email']);

    //validate email address - check if input was empty
    if(empty($email)){
        $status = "error";
        $message = "You did not enter an email address!";
    }
    else if(!preg_match('/^[^\W][a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\@[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\.[a-zA-Z]{2,4}$/', $email)){ //validate email address - check if is a valid email address
            $status = "error";
            $message = "You have entered an invalid email address!";
    }
    else {

            $insertSignup = mysql_query("INSERT INTO signups (signup_email_address) VALUES ('$email')");
            if($insertSignup){ //if insert is successful
                $status = "success";
                $message = "You have been signed up!";  
            }
            else { //if insert fails
                $status = "error";
                $message = "Ooops, Theres been a technical error!"; 
            }

    }

    //return json response
    $data = array(
        'status' => $status,
        'message' => $message
    );

    echo json_encode($data);
    exit;
}
?> 
```

我现在要做的是添加另一个字段，在本例中是“名称”，我也想验证它。

我遇到的问题是我不确定如何在上面的代码中添加另一个字段。同样，我一直在尝试找到一个可以用来学习的示例，但我还没有找到任何可以使用的示例。

我只是想知道是否有人可以看看这个，也许会指出我正确的方向。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:52:10.147

PHP 有一个[过滤器扩展来验证和清理输入](http://www.php.net/manual/en/ref.filter.php)。

您正在寻找的功能是

*   [`filter_var_array`— 获取多个变量并选择性地过滤它们](http://www.php.net/manual/en/function.filter-var-array.php)

还有一种`filter_input_array`方法，但由于没有简单的方法可以正确地进行单元测试，因此使用上面的方法更容易，并根据需要将其传递给超全局变量。

### 例子：

```
$userInput = array(
    'signup-email' => 'foo at example.com',
    'name' => 'ArthurDent42'
);

$validatedInput = filter_var_array(
    $userInput, 
    array(
        'signup-email' => FILTER_VALIDATE_EMAIL,
        'name' => array(
            'filter' => FILTER_VALIDATE_REGEXP,
            'options' => array(
                'regexp' => "/^[a-z ]{5,10}$/i"
            )
        )
    )
);

var_dump($validatedInput); 
```

### 输出（[演示](http://codepad.viper-7.com/x2aAcm)）：

```
array(2) { 
    ["signup-email"]=> bool(false) 
    ["name"]=> bool(false)
} 
```

一旦您对输入进行了验证和清理，为数组中的每个值放置一些保护子句，并在它们为 false 时提前返回：

```
if (!$validatedInput['signup-email']) {
    return json_encode(array(
        'status' => 'error',
        'message' => 'The eMail was invalid'
    ));
}

if (!$validatedInput['name']) {
    return json_encode(array(
        'status' => 'error',
        'message' => 'Name must be 5 to 10 letters from A to Z only'
    ));
}

// everything's validated at this point. Insert stuff to database now. 
```

请注意，[您要使用 PDO 或 mysqli 而不是 ext/mysql](https://stackoverflow.com/questions/548986/mysql-vs-mysqli-in-php/8891836#8891836)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:42:04.813

在您的 HTML 中添加一个字段：

```
<input type="text" name="name" value="" /> 
```

在您的 PHP 中：

```
$name = trim($_POST['name']); 
```

验证：

```
if ($name === '') {
    $status = 'error';
    $message = 'need a name!';
} 
```

现在将名称添加到您的插入语句（最好使用[PDO 准备语句](http://php.net/manual/en/pdo.prepare.php)）：

```
$nameSql = mysql_real_escape_string($name);
$insertSignup = mysql_query("INSERT INTO signups (signup_email_address, name) VALUES ('$email', '$nameSql')"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T13:44:23.930

```
 $rule['email']= '/^[^\W][a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\@[a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*\.[a-zA-Z]{2,4}$`/'
    $rule['name']= 'bla bla';
    $rule['address']= 'bla bla';

   $data =  sanitize($_POST,$rule);
    function sanitize($input_array,$rule){
    $message = array();
     foreach($input_array as $key=> $value){
     $input_array[$key]= mysql_real_escape_string($value);
     if(isset($rule[$key])){
      if(!preg_match($rule[$key],$input_array[$key]){
        $message[$key] = 'error';
        unset($input_array[$key]);//optional
       }
      }
     }
    return array('data'=>$input_array,'message'=>$message);
    } 
```

# vba - 如何将excel中的范围存储到范围变量中？

> ID：12236316
> 
> 赞同：13
> 
> 时间：2012-09-02T13:26:13.387
> 
> 标签：vba, excel

我正在使用 VBA 阅读一些 excel 单元格。

```
Function getData(currentWorksheet as Worksheet, dataStartRow as Integer, _
dataEndRow as Integer, DataStartCol as Integer, dataEndCol as Integer)

    Dim dataTable as Range
    dataTable = currentWorksheet.Range(currentWorksheet.Cells(dataStartRow, _
    dataStartCol), currentWorksheet.Cells(dataEndRow, dataEndCol))

    getData = dataTable

EndFunction 
```

它抛出一个错误，对象变量或未设置块变量。如何在变量中取这个范围？请指导我。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-02T15:18:36.290

使用`Range`对象时，不能简单地使用以下语法：

```
Dim myRange as Range
myRange = Range("A1") 
```

您必须使用`set`关键字来分配 Range 对象：

```
Function getData(currentWorksheet As Worksheet, dataStartRow As Integer, dataEndRow As Integer, DataStartCol As Integer, dataEndCol As Integer)

    Dim dataTable As Range
    Set dataTable = currentWorksheet.Range(currentWorksheet.Cells(dataStartRow, DataStartCol), currentWorksheet.Cells(dataEndRow, dataEndCol))

    Set getData = dataTable

End Function

Sub main()
    Dim test As Range

    Set test = getData(ActiveSheet, 1, 3, 2, 5)
    test.select

End Sub 
```

请注意，每次声明范围时，我都会使用`Set`关键字。

* * *

您还可以允许您的`getData`函数返回一个`Range`对象而不是 a`Variant`尽管这与您遇到的问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T22:30:40.857

将您的 dim 声明为变体，并像从数组中一样提取数据。IE

```
Dim y As Variant
y = Range("A1:B2") 
```

现在你的excel范围都是1个变量（数组），y

要提取数据，请调用“A1:B2”范围内的数组位置或您选择的任何内容。例如：

```
Msgbox y(1, 1) 
```

这将返回“A1:B2”范围内的左上角框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T14:39:25.727

定义什么是 GetData。目前还没有定义。

```
Function getData(currentWorksheet as Worksheet, dataStartRow as Integer, dataEndRow as Integer, DataStartCol as Integer, dataEndCol as Integer) as variant 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T13:55:08.553

是什么`currentWorksheet`？如果您使用内置的`ActiveSheet`.

```
dataStartRow=1
dataStartCol=1
dataEndRow=4
dataEndCol=4
Set currentWorksheet=ActiveSheet
dataTable = currentWorksheet.Range(currentWorksheet.Cells(dataStartRow, dataStartCol), currentWorksheet.Cells(dataEndRow, dataEndCol)) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-25T09:03:23.697

这是一个示例，它允许在所需区域的每一行上执行代码（从选择的顶部和底部选择，从选择

```
Sub doROWSb()           'WORKS    for do selected rows     SEE FIX ROWS ABOVE  (small ver)
Dim E7 As String    'note:  workcell E7 shows:  BG381
E7 = RANGE("E7")    'see eg below
Dim r As Long       'NOTE: this example has a paste formula(s) down a column(s).  WILL REDUCE 10 HOUR DAYS OF PASTING COLUMNS, DOWN TO 3 MINUTES?
Dim c As Long
Dim rCell As RANGE
'Dim LastRow As Long
r = ActiveCell.row
c = ActiveCell.Column   'might not matter if your code affects whole line anyways, still leave as is

Dim FirstRow As Long    'not in use, Delete if only want last row, note: this code already allows for selection as start
Dim LastRow As Long

If 1 Then     'if you are unable to delete rows not needed, just change 2 lines from: If 1, to if 0 (to go from selection last row, to all rows down from selection)
With Selection
    'FirstRow = .Rows(1).row                 'not used here, Delete if only want last row
    LastRow = .Rows(.Rows.Count).row        'find last row in selection
End With
application.CutCopyMode = False             'if not doing any paste op below
Else
    LastRow = Cells(Rows.Count, 1).End(xlUp).row  'find last row used in sheet
End If
application.EnableEvents = True             'EVENTS  need this?
application.ScreenUpdating = False          'offset-cells(row, col)
'RANGE(E7).Select  'TOP ROW SELECT
RANGE("A1") = vbNullString                  'simple macros on-off switch, vb not here:  If RANGE("A1").Value > 0 Then

For Each rCell In RANGE(Cells(r, c), Cells(LastRow, c)) 'new
    rCell.Select    'make 3 macros for each paste macro below
'your code here:

If 1 Then     'to if 0, if want to paste formulas/formats/all down a column
    Selection.EntireRow.Calculate     'calcs all selected rows, even if just selecting 1 cell in each row (might only be doing 1 row aat here, as part of loop)
Else
'dorows() DO ROWS()
'eg's for paste cells down a column, can make 3 separate macros for each: sub alte() altf & altp
      Selection.PasteSpecial Paste:=xlPasteFormulas, Operation:=xlNone, SkipBlanks:=False, Transpose:=False    'make sub alte ()    add thisworkbook:  application.OnKey "%{e}", "alte"
      'Selection.PasteSpecial Paste:=xlPasteFormats, Operation:=xlNone, SkipBlanks:=False, Transpose:=False     'make sub altf ()    add thisworkbook:  application.OnKey "%{f}", "altf"
      'Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:=False, Transpose:=False         'amke sub altp ()    add thisworkbook:  application.OnKey "%{p}", "altp"
End If
Next rCell

'application.CutCopyMode = False            'finished - stop copy mode
'RANGE("A2").Select
goBEEPS (2), (0.25)       'beeps secs
application.EnableEvents = True             'EVENTS

'note:  workcell E7 has: SUBSTITUTE(SUBSTITUTE(CELL("address",$BG$369),"$",""),"","")
'other col eg (shows: BG:BG):  =SUBSTITUTE(SUBSTITUTE(CELL("address",$BG2),"$",""),ROW(),"")&":"& SUBSTITUTE(SUBSTITUTE(CELL("address",$BG2),"$",""),ROW(),"")
End Sub

'OTHER:
Sub goBEEPSx(b As Long, t As Double)   'beeps secs as:  goBEEPS (2), (0.25)  OR:  goBEEPS(2, 0.25)
  Dim dt  'as double    'worked wo as double
  Dim x
  For b = b To 1 Step -1
    Beep
    x = Timer
  Do
  DoEvents
  dt = Timer - x
  If dt < 0 Then dt = dt + 86400    '86400 no. seconds in a day, in case hit midnight & timer went down to 0
  Loop Until dt >= t
  Next
End Sub 
```

# hbase - HBase：列族 TTL

> ID：12236318
> 
> 赞同：3
> 
> 时间：2012-09-02T13:26:31.643
> 
> 标签：hbase, ttl

根据 HBase 规范：

> *“ColumnFamilies 可以以秒为单位设置 TTL 长度，一旦达到过期时间，HBase 将自动删除行。这适用于行的所有版本 - 甚至是当前版本。在 HBase 中为行编码的 TTL 时间在世界标准时间。”*

具体我不明白的是这句话“一旦达到到期时间”......什么？所有单元的所有版本？至少一个单元格的一个版本？

假设我有一个表，其列族的 TTL 设置为 X。

*   我正在插入一个时间戳为 1 的单元格：该行的到期日期是什么？1 + X？
*   接下来，我插入另一个带有时间戳 2 的单元格（使用相同的行键）：整行的到期日期是什么？还是 1 + X 或 2 + X？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T14:06:18.657

这似乎是 HBase 参考指南中的一个错字。它应该说“细胞”，而不是“行”；除了其单元格的时间戳之外，一行没有内置时间戳。

# python - 如何在空行后插入一个字符

> ID：12236323
> 
> 赞同：0
> 
> 时间：2012-09-02T13:27:42.073
> 
> 标签：python, regex, bash, sed, awk

我正在寻找一种快速的方法来在文件的每个空白行之后的每一行的开头添加一个“$”字符。示例：输入文件

```
text1  

text2    
text3  

text4  
text5 
```

示例输出文件：

```
text1  

$text2    
text3  

$text4  
text5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:35:11.910

假设这`lines`是您的行列表：

```
fixit = False
for line in lines:
    if fixit and line.strip():
        line = "$" + line
    fixit = (line.strip() == "")
    print line 
```

这`fixit = (line.strip() == "")`是检查当前行是否为空白的测试[这些`.strip`方法删除了行首和行尾的所有空白字符（`" "`, `"\n"`,...）]。

如果一行中有两个空行，则避免在第二个空行的开头`if fixit and line.strip()`打印 a 。`$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T13:34:54.577

尝试

```
sed 'N;s/^\s*\n/&$/;P;D' inputfile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T13:38:11.880

`print open("input.txt").read().replace('\n\n', '\n\n$')`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T13:42:37.020

```
awk '{print}; ""~$0 {getline; print "$" $0}' input_file 
```

给

```
text1

$text2
text3

$text4
text5 
```

**更新：**
适用于处理多个连续的空白：

```
awk '""~$0 {flag=1; print; next}; flag {printf "$"; flag=0} 1' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T16:34:43.060

使用 GNU sed 的另一种方法：

```
sed -rn '1 h; 1!H; $ {x; s/(\n\n)(.)/\1$\2/g; p}' infile 
```

并附有评论：

```
sed -rn '
  1h                     # First collect all input 
  1!H                    # in the hold space 
  $ {
    x                    # Swap hold space and pattern space
    s/(\n\n)(.)/\1$\2/g  # Globally insert $ after empty lines
    p                    # Print the result
  }' 
```

正如*potong*在评论中指出的那样，此解决方案将所有输入加载到内存中，这可能会根据输入的大小出现问题。

# google-chrome-extension - Chrome 扩展清单 2 沙盒示例

> ID：12236324
> 
> 赞同：1
> 
> 时间：2012-09-02T13:28:14.660
> 
> 标签：google-chrome-extension, content-security-policy

[任何人都知道Sandboxing Eval Doc](http://developer.chrome.com/trunk/extensions/sandboxingEval.html)中提到的完整示例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T13:45:41.860

Google Chrome 有一个[github repo](https://github.com/GoogleChrome/chrome-app-samples) ，里面有很多扩展示例。有两个沙盒示例：

*   [这个在](https://github.com/GoogleChrome/chrome-app-samples/tree/master/sandbox)*隐藏*的沙盒 iframe中构建 Handlebars 模板（需要`eval`） ，然后使用.*`postMessage`*

**   [另一个](https://github.com/GoogleChrome/chrome-app-samples/tree/master/sandboxed-content)有一个*可见*的沙盒 iframe，它使用不安全的技术构建一个框架页面。* 

 *请注意，这些示例要求最低版本为 23，尚未达到稳定通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:56:18.960

[您正在搜索的完整示例的链接在这里。](https://github.com/GoogleChrome/chrome-app-samples/tree/master/sandbox)*

# ruby - 向我解释一个虚拟的 Sinatra 设置，用于预览 html/css 代码

> ID：12236328
> 
> 赞同：1
> 
> 时间：2012-09-02T13:29:00.377
> 
> 标签：ruby, sinatra, haml, sass, compass-sass

提前警告一句：我什至不了解 ruby​​ 基础知识，但今年我正努力学习越来越多的 shell 脚本世界。

我看到[Ben Schwarz 的这个 Vimeo 视频，](https://vimeo.com/32611202#)立刻想到我想用这样的工具来调试我的 sass 和 haml 文件。

所以这是一个帮助我掌握 Sinatra 概念的电话。

我想要的是一种简单的方法来输出我的 index.html 的代码，以检查是否正确应用了所有 haml 魔法 - 所以它应该充当源查看器，为我提供实时更新。如果 Sinatra 只是查看我的项目文件夹中 LiveReload 已经渲染的文件（cf index.html），我会更喜欢它。

* * *

**更新：**这是 Vimeo 视频的截图。它只显示 Sass 文件的原始 CSS 输出。这就是我想要的 Haml 和 Sass 代码，或者更好的输出文件已经由 LiveReload 呈现为 HTML 和 CSS。

[![sass.app](../Images/73f2e326b1d1a133c27db5d03361c98b.png)](https://i.stack.imgur.com/vm2To.png)

我[在他的 github 上查看了来自@benschwarz 的源文件](https://github.com/benschwarz/responsive-sass)，但我什至没有看到他自己的例子，我只是得到了标准：“Sinatra 不知道这个小曲。” 因此，将其转移到使用 html 仍然是我无法企及的。

* * *

到目前为止我做了什么：

*   我像往常一样设置我的项目`~/Sites/projectname`
*   我设置了 RVM 并安装了我需要的所有 gem
    *   Sass、Compass、Haml - 通过[LiveReload编译输出](http://livereload.com)
    *   辛纳特拉
*   我创建`myapp.rb`了`~/Sites/projectname`以下内容：

```
 # myapp.rb

    require 'sinatra'

    set :public_folder, '/'

    get '/' do
      File.read(File.join('public', 'index.html'))
    end 
```

不管怎样，我启动了 Sinatra 并进行了检查`http://localhost:4567/`——这不起作用，因为我不知道如何将**public_folder**设置为`~/Sites/projectname`.

* * *

**事后思考：**

所以我继续在网上搜索，但我对 Ruby 的有限知识使我的成功研究尝试立即停止。

以下是我偶然发现的一些网站，它们明显接近我需要的解决方案，但是……就像我在第一句话中告诉你的那样：如果解决方案是一本书，我需要“傻瓜”版本。

*   [https://bitbucket.org/sulab/genelist_store/src/30fc0ba390b9/idea8/idea8.rb](https://bitbucket.org/sulab/genelist_store/src/30fc0ba390b9/idea8/idea8.rb)
*   [使用 Sinatra 提供静态文件](https://stackoverflow.com/questions/2437390/serving-static-files-with-sinatra)
*   [http://www.sinatrarb.com/intro](http://www.sinatrarb.com/intro)

很明显，Sinatra 的参考文档会对我有所帮助，但我不会说这种语言，因此，我不懂行话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:23:28.050

### 关于公用文件夹：

`public_folder`相对于您的应用程序文件`myapp.rb`。如果`public`文件夹中有文件`projectname`夹，则这是您的公用文件夹。如果您的 css、js 和图像文件在另一个文件夹中，例如`includes`在 下`project_name`，那么您需要更改以下行：

```
# Actually, you need to remove the line above from myapp.rb as it is.
# The line means that the public folder which is used to have css, js and 
# image files under '/' and that means that even myapp.rb is visible to everyone.

set :public_folder, '/'

# to:
set :public_folder, File.dirname(__FILE__) + '/includes' 
```

这将从文件`project_name/includes`夹而不是`project_name/public`文件夹中提供 css、js 和/或图像文件。

### 读取html文件：

读取 html 文件不依赖于公用文件夹设置。这些不必在公用文件夹内。

```
get '/' do
  File.read(File.dirname(__FILE__) + '/index.html')
  # This says that the app should read the index.html
  # Assuming that both myapp.rb and index.html are in the same folder.
  # incase the html files are inside a different directory, say, html, 
  # change that line to:
  # File.read(File.dirname(__FILE__) + '/html/index.html')

  # Directory structure sample:

  # project_name
  # | - myapp.rb
  # | - index.html (and not html/index.html etc.)
  # | /public (or includes incase the css, js assets have a different location)
  # | | /css
  # | | /js
  # | | /images
end 
```

### 在浏览器中获取 html 输出

读取文件后，通常这将是您的字符串：`"<html><head></head><body></body></html>"`

如果不转义字符串，浏览器会将 html 字符串呈现为 html（无双关），这就是您看不到任何文本的原因。要转义 html，您可以使用Ruby 提供的[CGI类（](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html)[帽子提示](https://stackoverflow.com/a/3831188/465082)）。所以，最后，这将是你的片段：

```
get '/' do
  CGI::escapeHTML(File.read(File.dirname(__FILE__) + 'index.html'))
end 
```

但这会在一行中吐出 html 文件。为了清理它，

```
# myapp.rb

get '/' do
  @raw_html = CGI::escapeHTML(File.read(File.dirname(__FILE__) + 'index.html'))
end

# Using inline templates to keep things simple.
# get '/' do...end gets the index.erb file and hence, in the inline template,
# we need to use the @@ index representation. If we say get '/home' do...end,
# then the inline template will come under @@ home. All the html/erb between 
# two "@@"s will be rendered as one template (also called as view).

# The <%= @raw_html %>spews out the entire html string read inside the "get" block

__END__

@@ index
<html>
  <head></head>
    <body>
      <pre>
        <%= @raw_html %>
      </pre>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T20:54:28.087

如果您尝试渲染`index.html`文件，我会尝试将其存储在`/views`带有`.erb`扩展名的目录中。或者使用内联模板。这是一个很好的[资源](http://sinatra-book.gittr.com/#templates)

# mysql - MySQL合并大表的优化

> ID：12236329
> 
> 赞同：1
> 
> 时间：2012-09-02T13:29:03.677
> 
> 标签：mysql, select, insert, merge

我有一个巨大的索引 MySQL 表（约 300-400 GB），我需要不时附加新条目（新数据需要约 10-20 GB）。带有新数据的原始文件可能包含错误，只能手动修复，并且只有在处理脚本到达它们时才可见。此外，只有在原始数据的完整处理完成后，新数据才应在主数据库中可用。因此，为了不搞砸主表，我决定采用以下工作流程：

1.  该脚本创建结构与主表相同的临时表并填充它。

2.  完成并验证后，将临时表插入主表：

    ```
    INSERT INTO main_table (all_fields_except_primary_key) SELECT all_fields_except_primary_key FROM new_table; 
    ```

据我了解，由于索引新结果，此过程非常缓慢。

我已经读到插入索引表通常非常慢，一些专业人士建议在插入大量数据然后再次索引之前先删除索引。但是对于整个表的如此庞大的数据索引非常长（比我幼稚的 INSERT INTO .. SELECT .. 长得多），更重要的是，主表几乎无法在其中使用（没有索引 SELECTS 需要很长时间） .

所以我有一个想法，在插入之前索引临时表（因为它非常快），然后合并两个索引。

在 MySQL 中是否有可能？

还有另一个问题：我的任务可能还有另一种解决方法吗？

# ios - iPad：两个 NavigationControllers 同时管理两个 ViewControllers

> ID：12236331
> 
> 赞同：1
> 
> 时间：2012-09-02T13:29:29.267
> 
> 标签：ios, ipad, uitableview, navigationcontroller

是否可以让两个 NavigationControllers 同时管理两个 TableViewControllers，如下图所示？如果是，您将如何在 iOS 中实现它？非常感谢 ![iPad 视图 1](../Images/38fe7fd684856edb8de6959301200e0b.png)

![iPad 视图 2](../Images/85891270cf246b72a46fc76c93e15e8d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:54:30.690

了解如何使用 iOS 5 中新的 UIViewController 包含 API 来创建您自己的容器视图控制器。Github 上提供的代码：[https ://github.com/peterfriese/UIViewControllerContainmentSample](https://github.com/peterfriese/UIViewControllerContainmentSample)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T13:54:38.507

一般来说，它可以完成，因为人们有时会在拆分视图控制器中执行此操作。我认为最好通过使用容器控制器（理论上类似于拆分视图控制器）来按照您显示的方式管理屏幕空间来完成实现。然后它将使用子控制器，而子控制器又是包含表视图控制器的导航控制器。

# iphone - iphone正在添加一个奇怪的左边距/填充

> ID：12236334
> 
> 赞同：3
> 
> 时间：2012-09-02T13:29:54.690
> 
> 标签：iphone, web, margin

这是一个带有移动视图[的网站。](http://kondor.co.il/?kondismob=1)

网站宽度为 640 像素，但 iPhone 以 678 像素呈现文档。在android中它看起来很棒。

我添加了视口元：

```
<meta name="viewport" content="width=640, user-scalable"> 
```

正文 CSS 是：

```
body,html{
margin:0px;
margin-left:auto;
margin-right:auto;
padding:0px;
font-size:14px;
font-family: "Arial";
background: white;
direction: rtl;
text-align: right;
width:640px !important;
overflow: hidden;} 
```

在 iPhone 中它看起来像这样：

![](../Images/90be09eb5235553e80e6832772aebbbc.png)

如您所见，它在左侧添加了 38 个像素，与主体无关（如果我将主体背景设置为蓝色，则侧面仍保持白色）。

我尝试了一切，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:07:07.263

首先，从干净的 HTML 和 CSS 开始会有所帮助——您的 HTML 远非有效，这可能会导致各种错误（请参阅[此处](http://validator.w3.org/check?uri=http://kondor.co.il/?kondismob=1&charset=%28detect%20automatically%29&doctype=Inline&group=0)仅了解 HTML 错误...）。

第二：

```
<meta name="viewport" content="width=640, user-scalable"> 
```

是不正确的。它需要是：

```
<meta name="viewport" content="width=640, user-scalable=yes"> 
```

如果是这样，那将是更好的做法：

```
<meta name="viewport" content="width=device-width, user-scalable=yes"> 
```

（见[这里](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)）。

有了一个干净的起点，调试起来会更容易。此外，打开 Mobile Safari 调试控制台并响应它给您的任何消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:51:43.967

我终于找到了解决方案。

添加这些行是因为 body CSS 上的正确对齐：

```
text-align:right;
direction:rtl; 
```

如果我删除这些行并将它们添加到主体内的 div 中，它工作正常。

# ios - 在后台线程中调用 stopVideoCapture 方法 - iOS

> ID：12236335
> 
> 赞同：1
> 
> 时间：2012-09-02T13:29:56.243
> 
> 标签：ios, ios5

我正在使用叠加视图制作视频捕捉功能。现在我想在 UIApplicationDidEnterBackgroundNotification 中调用 stopVideoCapture 方法。但“stopVideoCapture”方法总是失败，并显示错误消息“/var/mobile/Media/PhotoData/takingvideo 活动指示器已清除”。

请告诉我有什么问题。

以下是 UIApplicationDidEnterBackgroundNotification 中调用的代码

```
UIApplication *app = [UIApplication sharedApplication];

self.bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:self.bgTask];
    self.bgTask = UIBackgroundTaskInvalid;
}];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    if (isRecording) {
        dispatch_async(dispatch_get_main_queue(), ^{
           [self.imagePickerController stopVideoCapture];             
        });
    }

    [NSThread sleepForTimeInterval:5];

    [app endBackgroundTask:self.bgTask];
    self.bgTask = UIBackgroundTaskInvalid;
}); 
```

# asp.net-mvc - 如何在 ASP.NET MVC 4、.net 4.5 中包含自定义目录中的 JavaScript 和 CSS？

> ID：12236337
> 
> 赞同：2
> 
> 时间：2012-09-02T13:30:42.080
> 
> 标签：asp.net-mvc, .net-4.5, asp.net-optimization, bundling-and-minification

考虑到这个文件夹结构：

```
Content
     style1.css
     style2.css
     CssFolder1
         style3.css
         style4.css
         style5.css
         style6.css 
```

在应用程序中，我想包括`style1.css`、`style2.css`和。`style3.css``style4.css`

我正在这样做：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new StyleBundle("~/styles/main").Include("~/Content/style1.css",   "~/Content/style2.css"));
        bundles.Add(new StyleBundle("~/styles/custom").Include("~/Content/CssFolder1/style3.css","~/Content/CssFolder1/style4.css"));
    }
} 
```

在`_Layout.cshtml`我这样渲染它：

```
@Styles.Render("~/styles/main", "~/styles/custom") 
```

仅加载 style1.css 和 style2.css。如何正确加载`style3.css`和`style4.css`？

LE：内容是解决方案中的一个文件夹，该文件夹中的所有文件都添加到解决方案中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:22:04.213

所有文件都需要添加到 Visual Studio 解决方案窗口中的项目中。右键单击该`css`文件夹，然后单击`add existing item`。导航到`styles3.css`并以这种方式添加。

# ajax - Jquery/Ajax：如何填充多个字段

> ID：12236338
> 
> 赞同：0
> 
> 时间：2012-09-02T13:30:52.463
> 
> 标签：ajax, jquery-ui, jquery, grails

我正在使用 jquery/ajax 自动完成，下面是我的简单应用程序的代码片段：

外部.jsp：

```
 $(function () {
     $("#inputfield").autocomplete({
     source: '/fruitapp/findFruit'
     });
    }); 
```

在我的控制器中：

```
 def findFruit = {
     def fruitsearch= Fruit.withCriteria {
      ilike 'fruit', params.term + '%'
      }
     render (fruitsearch?.'fruit' as JSON)
    } 
```

如您所见，它只会填写一个文本字段，即“输入字段”。现在，我希望如果我从自动完成列表中选择一个项目，它将至少填写两个字段。我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:34:43.953

自动完成可以得到一个“选择”事件。在那里你可以做任何你想做的事。

从他们的[文档](http://jqueryui.com/demos/autocomplete/#event-select)

```
$( ".selector" ).autocomplete({
   select: function(event, ui) { ... }
});
Bind to the select event by type: autocompleteselect.
$( ".selector" ).bind( "autocompleteselect", function(event, ui) {
  ...
}); 
```

这是我从他们的例子中制作[的小提琴。](http://jsfiddle.net/kepzE/1/)如您所见，一旦选择了自动完成选项，我将更新 2 个不同的 div。

这是负责它的代码：

```
$( "#tags" ).autocomplete({
            source: availableTags, 
            select:function(e,u){ 

                console.log([e,u]);
                $("#output").text("This is the label:" + u.item.label);
                $("#more_output").text("this is the value:" + u.item.value);

            }
  }); 
```

并且要非常清楚 - “u”可以包含您想要的任何内容。

在这里，我[修改了小提琴](http://jsfiddle.net/kepzE/2/)以包含一个复杂的 JS 对象。您可以访问所有字段。

我添加了一个日志打印供您查看。使用[chrome 的开发者工具](http://wiki.mograbi.info/developers-tools-for-web-development)查看日志打印和查看对象的内容。

# c# - 如何将 Xml 文件导入 Word 内容控件

> ID：12236342
> 
> 赞同：1
> 
> 时间：2012-09-02T13:31:49.937
> 
> 标签：c#, xml, ms-word

我能够创建一个 Word 文档，其内容控件映射到 Xml 架构并使用此博客中的代码：http: [//seroter.wordpress.com/2009/12/23/populating-word-2007-templates-through- open-xml/](http://seroter.wordpress.com/2009/12/23/populating-word-2007-templates-through-open-xml/)我能够将数据插入到 word 文档中。

我的问题是，是否可以替换下面的代码，以便我可以使用 Xml 文件，而不必为每个发现编写此代码：

```
//create XML string matching schema custom XML path
            string newXml = "<root>" +
                "<FINDING>Adobe Flash Player contains multiple...</FINDING>" +
                "<STATUS>Open</STATUS>" +
                "<THREATLEVEL>High</THREATLEVEL>" +
                "<RECOMMENDATION>Update Flash Player to version...</RECOMMENDATION>" +
                "<DEVICEAFFECTED>UserPC</DEVICEAFFECTED>" +
                "<SCANNER>XXXXXX</SCANNER>" +
                "</root>"; 
```

我尝试将其替换为： string newXml = @"C:\Users\Christopher\Desktop\BookData\TestReport.xml"; 并使用 StreamReader 和现有的 StreamWriter 创建了一个嵌套的*using*语句，但不会填充 word 文档，也不会出现任何错误。

--我只是尝试用以下代码替换该代码： //create XML string matching schema custom XML path string newXml = @"C:\Users\Christopher\Desktop\BookData\TestReport.xml"; 使用 (StreamReader sr = new StreamReader (newXml)) { newXml = sr.ReadToEnd(); }

当我打开文档时不再出现错误，但内容控件没有填充？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:55:07.467

原来我遇到的问题是我的代码和示例实际上并没有删除位于“CustomXML”文件夹中的以前的 CustomXMLParts。我的代码以两种方式工作，第一种是带有一个按钮 (btnGenerate) 的 Windows 窗体应用程序，它允许您选择 template.docx 和 customXML.xml 文件。第二个是控制台程序。欢呼 **Windows 窗体应用程序：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using DocumentFormat.OpenXml.Packaging;
using System.IO;
using System.Threading;

namespace TestReportCreator_Beta
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    [STAThread]
    private void btnGenerate_Click(object sender, EventArgs e)
    {
        string outFile = @"C:\Users\Christopher\Desktop\BookData\TestReportBetaEND.docx";

        OpenFileDialog OFD = new OpenFileDialog();
        OFD.Multiselect = false;
        OFD.Title = "Open Word Document";
        OFD.Filter = "Word Document|*.docx;*.domx";
        OFD.ShowDialog();
        string docPath = OFD.FileName;
        OFD.Title = "Opne Xml Document";
        OFD.Filter = "Xml Document|*.xml";
        OFD.ShowDialog();
        string xmlPath = OFD.FileName;

        // convert template to document
        File.Copy(docPath, outFile);

        using (WordprocessingDocument doc = WordprocessingDocument.Open(outFile, true))
        {
            MainDocumentPart mdp = doc.MainDocumentPart;
            if (mdp.CustomXmlParts != null)
            {
                mdp.DeleteParts<CustomXmlPart>(mdp.CustomXmlParts);
            }
            CustomXmlPart cxp = mdp.AddCustomXmlPart(CustomXmlPartType.CustomXml);
            FileStream fs = new FileStream(xmlPath, FileMode.Open);
            cxp.FeedData(fs);
            mdp.Document.Save();
        } 
    }
}
} 
```

这是**控制台程序版本**

```
using System; using System.Collections.Generic;
using System.Linq; using System.Text;
using DocumentFormat.OpenXml; using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Wordprocessing; using System.IO;

namespace BookData
{
class Program
{

    static void Main(string[] args)
    {
        string template = @"C:\Users\Christopher\Desktop\BookData\TestReportBeta.docx";
        string outFile = @"C:\Users\Christopher\Desktop\BookData\TestReportBetaEND.docx";
        string xmlPath = @"C:\Users\Christopher\Desktop\BookData\TestReport.xml";

        // convert template to document
        File.Copy(template, outFile);

        using (WordprocessingDocument doc = WordprocessingDocument.Open(outFile, true))
        {
            MainDocumentPart mdp = doc.MainDocumentPart;
            if (mdp.CustomXmlParts != null)
            {
                mdp.DeleteParts<CustomXmlPart>(mdp.CustomXmlParts);
            }
            CustomXmlPart cxp = mdp.AddCustomXmlPart(CustomXmlPartType.CustomXml);
            FileStream fs = new FileStream(xmlPath, FileMode.Open);
            cxp.FeedData(fs);
            mdp.Document.Save();
        } 
    }
}
} 
```

我希望你们那里的开发人员和办公自动化人员能够很好地利用它！

# objective-c - 如何将 CCProgressTimer 添加为 CCBatchNode 的子节点？

> ID：12236344
> 
> 赞同：0
> 
> 时间：2012-09-02T13:32:03.140
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在使用 cocos2d 2.0 为 iOS 开发一款太空游戏。我需要为场景中涉及的每个“游戏对象”添加一个“健康栏”，因此我决定使用 CCProgressTimer。通常，使用 Sprite 表是不错的选择，所以我有一个 CCBatchNode。问题与 ProgressTimer 与 Sprites 和 BatchNode 的关系有关。如果我将每个健康栏添加为其特定精灵的子项（添加到 BatchNode），我的应用程序就会崩溃。我读过这个问题，这个“操作”似乎是不允许的，也有人谈到类扩展，因为 cocos2d 没有这个功能。这是真的吗？还是我理解错了？

我们如何才能正确处理这个问题？

谢谢，议员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:49:27.443

CCSpriteBatchNode 只接受 CCSprite 作为孩子。您需要在节点层次结构中的其他位置添加 CCProgressTimer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:51:58.197

谢谢你的建议。

我通过将 Game Layer 的引用发送到 GameObject 类解决了这个问题，这样您就可以定义 healthBar 并将其添加到层上。

# php - PHP tidy 移除

> ID：12236345
> 
> 赞同：3
> 
> 时间：2012-09-02T13:32:03.950
> 
> 标签：php, html, tidy

我的代码看起来像这样

```
<?php
ob_start();
?>
....
Some HTML
...
<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;"> 
                    <p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span> 
                    <strong>Alert:</strong> Sample ui-state-error style.</p>
                </div>
  ....
Some HTML
...  
<?php
$markup = ob_get_clean();

// Specify configuration
$config = array(
    'indent' => true,
    'output-xhtml' => true,
    'wrap' => 200);

// Tidy
$tidy = new tidy;
$tidy->parseString($markup, $config, 'utf8');
$tidy->cleanRepair();

// Output
echo $tidy;
?> 
```

没有得到结果`<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>`。我错过了什么？也许 TIDY 类删除空标签？如果是，我该如何预防？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T14:45:37.830

我发表了一条评论：“您是否尝试`&nbsp;`在跨度内添加或一些文本以确保将其删除，因为它是空的？”。这似乎`&nbsp;`奏效了。

因此，如果有人遇到同样的问题并来到这里，解决方案是：

**`&nbsp;`在空元素内添加。**

# playframework - 如何使用 Play 2 框架在 Web 浏览器中打印文本

> ID：12236346
> 
> 赞同：0
> 
> 时间：2012-09-02T13:32:03.927
> 
> 标签：playframework, playframework-2.0

我是 Play 2 框架的新手。如何在不使用任何视图文件的情况下在 Web 浏览器中打印“HELLO WORLD”文本。

我有如下设置路由文件：

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET /                        controllers.Mantra.index()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

我的控制器如下：

```
package controllers;

import play.*;
import play.mvc.*;
import play.data.*;
import play.data.validation.Constraints.*;

import java.util.*;
import views.html.*;

public class Mantra extends Controller  {

  public static Result index(){
     return ok(index.render("HELLO WOLRD"));

  } 
```

}

我试过很多次，但它仍然显示默认页面。有人可以指导我做错了什么以及如何纠正它。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:33:23.913

利用：

```
public static Result index(){
     return ok("HELLO WORLD");

} 
```

即，调用[ok() 方法](http://www.playframework.org/documentation/api/2.0.3/java/play/mvc/Results.html#ok%28java.lang.String%29)，它只接受一个字符串作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:07:42.030

它总是显示欢迎页面，因为在你的`views/index.scala.html`文件中你仍然有这一行：

```
@play20.welcome(message, style = "Java") 
```

它从 Play 加载欢迎页面。删除它后，您可以开始使用此视图，就像您的任何其他视图一样。

当然，对于显示炒文字， *nico_ekito***的**解决方案比通过视图呈现更好。

# mysql - 获取mysqldump转储适合psql输入的数据（转义单引号）

> ID：12236353
> 
> 赞同：4
> 
> 时间：2012-09-02T13:33:15.583
> 
> 标签：mysql, postgresql, mysqldump, psql

我正在尝试将数据库从 MySQL 移植到 PostgreSQL。我已经在 Postgres 中重建了模式，所以我需要做的就是获取数据，而无需重新创建表。

我可以使用迭代所有记录并一次插入一个的代码来做到这一点，但是我尝试了这一点，而且我们的数据库大小变慢了，所以我尝试使用 mysqldump 和一个管道来代替 psql（每次一次表，一旦我开始工作，我可能会并行化）。

我必须跳过各种障碍才能走到这一步，打开和关闭各种标志以获得模糊不清的转储。同样，这只会转储 INSERT INTO，因为我已经准备好空模式以将数据放入：

```
 /usr/bin/env \
      PGPASSWORD=mypassword \
      mysqldump \
      -h mysql-server \
      -u mysql-username \
      --password=mysql-password \
      mysql-database-name \
      table-name \
      --compatible=postgresql \
      --compact \
      -e -c -t \
      --default-character-set=utf8 \
      | sed "s/\\\\\\'/\\'\\'/g" \
      | psql \
      -h postgresql-server \
      --username=postgresql-username \
      postgresql-database-name 
```

`sed`除了那个丑陋的命令之外的一切都是可以管理的。我这样做是为了尝试将 MySQL 的方法转换为在字符串 ( ) o PostgreSQL 的引用要求 ( )`sed`中引用单引号。它可以工作，直到转储中出现这样的字符串：...是的，我们的数据库中似乎有一些用户输入具有这种格式，这是完全有效的，但没有通过我的命令。我可以在命令中添加一个lookbehind，但我觉得我正在爬进一个兔子洞。有没有办法：`'O\'Connor'``'O''Connor'``'String ending with a backslash \\'``sed``sed`

a) 告诉 mysqldump 通过将单引号加倍来引用单引号 b) 告诉 psql 期望反斜杠被解释为引用转义？

我有另一个问题`BINARY`和`bytea`差异，但我已经通过 base64 编码/解码阶段解决了这个问题。

编辑 | 看起来我可以用 (b) 做`set backslash_quote = on; set standard_conforming_strings = off;`，但我不确定如何将它注入管道输出的开头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T14:04:16.907

使用 mysqldump 的选项将表转储到 TSV [`--tab`](http://dev.mysql.com/doc/en/mysqldump.html#option_mysqldump_tab)，然后使用 psql 的[`COPY`](http://www.postgresql.org/docs/8.1/static/sql-copy.html)方法导入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-24T10:09:31.430

文件 psqlrc 和 ~/.psqlrc 可能包含客户端启动时要执行的 SQL 命令。您可以将这三行或您想要的任何其他设置放在该文件中。

```
SET standard_conforming_strings = 'off';
SET backslash_quote = 'on';
SET escape_string_warning = 'off'; 
```

psql 的这些设置与以下 mysqldump 命令相结合，将仅使用 UTF-8 文本（在我的情况下为中文）成功地将*数据从 mysql 5.1 迁移到 postgresql 9.1。*如果创建中间文件太大或太耗时，则此方法可能是迁移大型数据库的唯一合理方法。这需要您手动迁移模式，因为这两个数据库的数据类型大不相同。计划输入一些 DDL 以使其正确。

```
mysqldump \
--host=<hostname> \
--user=<username> \
--password=<password> \
--default-character-set=utf8 \
--compatible=postgresql \
--complete-insert \
--extended-insert \
--no-create-info \
--skip-quote-names \
--skip-comments \
--skip-lock-tables \
--skip-add-locks \
--verbose \
<database> <table> | psql -n -d <database> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:02:12.473

试试这个：

```
sed -e "s/\\\\'/\\\\\\'/g" -e "s/\([^\\]\)\\\\'/\1\\'\\'/g" 
```

是的，“倾斜牙签综合症”，我知道。

# java - 我想删除 Eclipse 编辑器中每个选项卡的“>>”符号

> ID：12236355
> 
> 赞同：2
> 
> 时间：2012-09-02T13:33:19.390
> 
> 标签：java, eclipse

每个选项卡都有“>>”模糊标志。虽然我重置了 Eclipse Java 编辑器的设置，但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:36:03.583

您可能已`whitespace characters`在 eclipse 配置中启用。

进入您的 Eclipse 首选项到`Preferences > General > Editors > Text Editors`. 取消选中名为`Show whitespace characters`.

它将禁用该选项，从而隐藏`>>`指示选项卡的字符。

# c++ - 时间：2019-05-01 标签：c++static-init-fiascoexample

> ID：12236357
> 
> 赞同：2
> 
> 时间：2012-09-02T13:33:30.950
> 
> 标签：c++, static-initialization

在 Bruce Eckel 的“Thinking in C++”的帮助下学习 C++，卡在练习 32，第 10 章。问题是如何更改链接顺序，Mirror::test() 调用对象 m5 返回 false。这是我的代码。

### 镜像.h：

```
#ifndef MIRROR_H_
#define MIRROR_H_

class Mirror {
 public:
  Mirror() {logic_ = true; self_ = 0;};
  Mirror(Mirror *ptr) {self_ = ptr; logic_ = false;};
  bool test() {
    if (self_ != 0) {
      return self_->test();
    } else {
      return logic_;
    }
  };

 private:
  bool logic_;
  Mirror *self_;
};

#endif // MIRROR_H_ 
```

任务

### 一.cpp

```
#include "mirror.h"
Mirror m1; 
```

### 二.cpp

```
#include "mirror.h"
extern Mirror m1;
Mirror m2 (&m1); 
```

### 三.cpp

```
#include "mirror.h"
extern Mirror m2;
Mirror m3 (&m2); 
```

等等。最后，

### 五.cpp

```
#include "mirror.h"

#include <iostream>

extern Mirror m4;
Mirror m5 (&m4);

int main(int argc, char* argv[]) {
  std::cout << m5.test() << std::endl;
} 
```

m5.test() 返回真。任务说，我应该更改链接顺序，m5.test() 返回 false。我曾尝试使用：

> init_priority（优先级）
> 
> 在标准 C++ 中，保证在命名空间范围内定义的对象按照严格按照它们在给定翻译单元中定义的顺序进行初始化。不保证跨翻译单元的初始化。但是，GNU C++ 允许用户通过指定相对优先级来控制在命名空间范围内定义的对象的初始化顺序 init_priority 属性，这是一个当前介于 101 和 65535 之间的常量整数表达式。较低的数字表示较高的优先级。

但没有运气。

完整的练习文本：

> 在头文件中，创建一个包含两个数据成员的 Mirror 类：一个指向 Mirror 对象的指针和一个 bool。给它两个构造函数：默认构造函数将 bool 初始化为 true，将 Mirror 指针初始化为零。第二个构造函数将指向 Mirror 对象的指针作为参数，并将其分配给对象的内部指针；它将 bool 设置为 false。添加成员函数test()：如果对象的指针非零，则返回通过指针调用的test()的值。如果指针为零，则返回布尔值。现在创建五个 cpp 文件，每个文件都包含 Mirror 标头。第一个 cpp 文件使用默认构造函数定义了一个全局 Mirror 对象。第二个文件将第一个文件中的对象声明为extern，并使用第二个构造函数定义了一个全局Mirror对象，带有指向第一个对象的指针。继续这样做，直到到达最后一个文件，该文件也将包含一个全局对象定义。在该文件中，main() 应该调用 test() 函数并报告结果。如果结果为真，请找出如何更改链接器的链接顺序并更改它，直到结果为假。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T13:47:27.567

将目标文件传递给链接器时，您需要更改它们的顺序。尽管不同的编译器使用不同的方法，这对于顶级代码来说是合理的，即它不可移植。此外，对于库，您通常无法控制包含对象的顺序。例如，如果您有

```
// file1.cpp
int main() {
}

// file2.cpp
#include <iostream>
static bool value = std::cout << "file2.cpp\n";

// file3.cpp
#include <iostream>
static bool value = std::cout << "file3.cpp\n"; 
```

...然后您链接两个程序，如下所示：

```
g++ -o tst1 file1.cpp file2.cpp file3.cpp
g++ -o tst2 file1.cpp file3.cpp file2.cpp 
```

您将获得和的不同输出`tst1`，`tst2`例如：

```
$ ./tst1
file2.cpp
file3.cpp
$ ./tst2
file3.cpp
file2.cpp 
```

总体道德是：不要这样做。那就是：不要使用全局对象。如果您觉得绝对需要使用全局对象，请将它们封装到函数中，例如：

```
Type& global_value() {
    static Type value; // possibly with constructor arguments
    return value;
} 
```

这样，`value`它在第一次被访问时被初始化，并且在它尚未构造时无法访问它。如果像这样封装所有对象，则可以保证它们以适当的顺序构造（除非您有循环依赖，在这种情况下它无法工作，您应该认真重新考虑您的设计）。不幸的是，上述将对象封装到函数中的方法在 C++ 2003 中不是线程安全的。然而，在 C++ 2011 中它是线程安全的。尽管如此，使用全局变量通常是有问题的，您肯定希望尽量减少它们的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T23:51:51.600

我也在为这个练习而苦苦挣扎。

我设法编写了一个小的 Python 脚本来准备 makefile 条目，这些条目使用目标文件的所有可能排列来链接和测试最终的可执行文件：

```
import itertools

for perm in itertools.permutations([1, 2, 3, 4, 5]):
    print '\tg++ u0{0}.o u0{1}.o u0{2}.o u0{3}.o u0{4}.o -o $@ && ./main.exe'.format(*perm) 
```

在执行我的 make 过程后，结果证明所有可能的配置都产生了`true`价值。

这是因为所有全局（即静态）变量都保证在进入`main`函数之前被初始化。

我之前定义了一个保存函数结果的全局`bool`变量，如下所示：`test()``main`

```
#include "mirror.h"

#include <iostream>

extern Mirror m4;
Mirror m5 (&m4);

bool result = m5.test();

int main(int argc, char* argv[]) {
  std::cout << result << std::endl;
} 
```

答对了！一些对象的排列`false`在程序的输出中产生。

在调用任何可能的构造函数之前，所有静态变量都用零初始化。在本练习中，构造函数的调用顺序是线索。

如果在变量的值建立时，依赖链中的任何对象还没有被构造函数初始化`result`，则结果为`false`值（`self_`值为0，`logic_`值为假，所以测试函数返回`false`）。

在`result`进入`main`函数之前评估变量时，存在这种可能性，并且链接器命令中目标文件的顺序与结果有关。

# android - 如何在视图中心周围制作比例动画？

> ID：12236359
> 
> 赞同：2
> 
> 时间：2012-09-02T13:34:19.717
> 
> 标签：android, android-animation, android-view

我从 XML 文件加载缩放动画，然后将其设置为查看并启动它。
我发现动画在视图的左上角附近。
我怎样才能使它围绕中心？

这是我的动画 XML

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale 
        android:fromXScale="0.5"
        android:toXScale="1.1"
        android:fromYScale="0.5"
        android:toYScale="1.1"
        android:duration="200"/>
    <scale 
        android:fromXScale="1"
        android:toXScale="0.91"
        android:fromYScale="1"
        android:toYScale="0.91"
        android:startOffset="200"
        android:duration="400"/>
    <alpha 
        android:fromAlpha="0.5"
        android:toAlpha="1"
        android:duration="400"/>
    <alpha 
        android:fromAlpha="1"
        android:toAlpha="0"
        android:duration="300"
        android:startOffset="700"/>

</set> 
```

和java代码

```
rightAnim = AnimationUtils.loadAnimation(this, R.anim.show_fade_out);
rightAnimObj.setAnimation(rightAnim);
rightAnim.startNow(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:49:52.223

为什么不使用 android:pivotX/android:pivotY ？ [http://developer.android.com/guide/topics/resources/animation-resource.html](http://developer.android.com/guide/topics/resources/animation-resource.html)

唯一的事情 - 小心价值观，我认为你需要像 50% 或 50%p 这样的东西

祝你好运

# apache - Apache 使用 RewriteCond/RewriteRule 重写

> ID：12236369
> 
> 赞同：0
> 
> 时间：2012-09-02T13:35:22.630
> 
> 标签：apache, mod-rewrite

我有两个测试站点`http://foo/abc`，`http://foo/def`。

我试图了解`RewriteCond`/`RewriteRule`使用 vhost 来模拟别名/目录指令的过程。

“abc”、“def”站点可以使用别名/指令块提供服务。我试图弄清楚apache是​​否可以使用vhost块并结合`RewriteCond`/`RewriteRule`逻辑来做同样的事情。

`RewriteCond`基本上，尝试使用 / 的组合来查看是否/如何使用 vhost 为特定站点提供服务，`RewriteRule`以限制正在显示的站点。

看起来像

```
RewriteCond %{REQUEST_URI} ^/abc/
RewriteRule ^(.*)$          /var/www/html/abc [B,L,QSA] 
```

会工作，但浏览器会出错。

欢迎指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:43:24.877

浏览器很可能会产生错误，因为目录`/var`（以及其中的所有内容）不是通过 apache 发布的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:48:00.740

我希望我能正确理解您的问题，即您尝试使用 ModRewrite 模拟虚拟主机。

是的，当您的第一个 RewriteCond 检查域时，这是可能的：

```
RewriteCond %{HTTP_HOST} ^www\.domain1\.com$ [NC] 
```

但请注意，这仅适用于 HTTP/1.1，就像基于主机名而不是 IP 的虚拟主机一样。

# android - Android System.err 断开蓝牙连接

> ID：12236372
> 
> 赞同：1
> 
> 时间：2012-09-02T13:36:31.893
> 
> 标签：android, bluetooth

我正在尝试尽可能优雅地断开与我的蓝牙设备的连接，但 Android 坚持向我抛出系统错误：

```
09-02 15:16:16.748: W/System.err(31038): java.io.IOException: Operation Canceled
09-02 15:16:16.748: W/System.err(31038):    at android.bluetooth.BluetoothSocket.readNative(Native Method)
09-02 15:16:16.748: W/System.err(31038):    at android.bluetooth.BluetoothSocket.read(BluetoothSocket.java:333)
09-02 15:16:16.748: W/System.err(31038):    at android.bluetooth.BluetoothInputStream.read(BluetoothInputStream.java:60)
09-02 15:16:16.748: W/System.err(31038):    at com.bluetooth.BluetoothRemoteControlApp$ConnectedThread.run(BluetoothRemoteControlApp.java:207) 
```

我正在使用 BluetoothChat 示例程序的修改版本，我的连接线程如下所示：

```
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            e.printStackTrace();
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;

        connected = true;
    }

    public void run() {
        byte[] buffer = new byte[1024];
        int bytes;
        byte ch;

        while(connected) {
            try {
                bytes = 0;
                while((ch = (byte) mmInStream.read()) != '\n')
                {
                    buffer[bytes++] = ch;
                }

                busy = false;

                String msg = new String(buffer, "UTF-8").substring(0, bytes - 1);

                Log.d(TAG, "Read: " + msg);

                if(activityHandler != null) {
                    activityHandler.obtainMessage(BT_READ, bytes, 0, msg).sendToTarget();
                }

            }
            catch(IOException e) {
                //e.printStackTrace();
                Log.w(TAG, "Cancelling");
                break;
            }
        }
    }

    public void write(byte[] buffer) {
        // . . .
    }

    public void cancel() {
        Log.i(TAG, "Cancelling connected thread");
        try {
            mmSocket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

在断开连接期间，我调用了引发系统错误的取消方法。我应该担心并尝试解决它吗？我真的不喜欢在我的日志上看到错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:13:19.943

我认为你不应该太担心这个日志，因为你正在取消并且日志本身说`Operation Cancelled`。

我认为您正在运行方法中使用 e.printStacktrace 打印日志。这就是您看到此日志的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:09:56.833

也许您应该在取消方法中将 connected 设置为 false。

# google-maps-api-3 - 最近的街景图像

> ID：12236377
> 
> 赞同：1
> 
> 时间：2012-09-02T13:37:22.593
> 
> 标签：google-maps-api-3, google-static-maps, google-street-view

如何获取最近的 GoogleStreetView 图像及其位置不准确的确切位置？感谢其他api？谷歌地图做到了，例如：https://maps.google.fr/maps?q=45.755622,4.869343&hl=fr&num=1&t=m&z=16 但 API 不太宽容： [http ://maps.googleapis.com/地图/api/streetview?size=400x400&location=45.755622,4.869343&fov=90&heading=235&pitch=10&sensor=false](http://maps.googleapis.com/maps/api/streetview?size=400x400&location=45.755622,4.869343&fov=90&heading=235&pitch=10&sensor=false)

根据 API 文档，我们应该使用这种 url：.../maps/api/streetview?size=400x400&location=40.720032,%20-73.988354&sensor=false&key=API_console_key

无法检查照片是否可用（解析照片颜色？）

（反转：[http](http://cbk0.googleapis.com/cbk?output=xml&ll=40.720032,%20-73.988354&cb_client=apiv3) ://cbk0.googleapis.com/cbk?output=xml&ll=40.720032,%20-73.988354&cb_client=apiv3给出图像的确切位置，我在我的 android 项目中使用了它，但这个网络服务似乎没有维护公共用途?? :/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:24:36.587

您可以使用[StreetViewService.getPanoramaByLocation()](https://developers.google.com/maps/documentation/javascript/reference#StreetViewService)

有一个半径参数，当他小于 50 时，您将收到最近的全景（50 米内）的数据。

当 50 米内没有全景可用时，您可以增加半径直到获得结果。

# javascript - 将文本文件加载到 javascript 中

> ID：12236384
> 
> 赞同：0
> 
> 时间：2012-09-02T13:38:30.567
> 
> 标签：javascript

我有一个包含很多值的文本文件，我想知道是否有办法将这些文本文件值加载到 java 脚本中，以便脚本本身使用这些值。注意我是新手...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:41:54.017

您没有提供太多上下文，但如果我们假设您的意思是“通过从与文本文件相同的服务器加载的 HTML 页面在浏览器中运行的 JavaScript”，那么您希望**使用[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)对象**。

（这在很多地方都有很好的记录，所以与其在这里提供另一个教程，我会让人们在上述链接中断的不太可能发生的情况下使用谷歌）。

不乏抽象 XHR 的库。例如[YUI](http://yuilibrary.com/yui/docs/io/)、[大量小型库](http://microjs.com/#ajax)和[jQuery](http://jquery.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:42:51.737

假设文本文件在您的 Web 服务器上并且您正在从浏览器加载，您可以`jQuery`像这样使用：

```
jQuery.get('http://localhost/mytextfile.txt', function(data) {
    alert(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:44:05.350

使用`XMLHttpRequest`，可以实现。

## 例子：

```
function ajaxCall() {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else if (window.ActiveXObject) {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    else {
        alert("Your browser does not support XMLHTTP!");
    }
    return xmlhttp;
}

xmlhttp = ajaxCall();
xmlhttp.open('GET', 'YOURFILE.txt');
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4) {
        alert(xmlhttp.responseText);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T13:56:12.830

使用 jQuery：

```
$('#result').load('ajax/test.txt'); 
```

html代码：

```
<div id="result">Text loaded here</div> 
```

加载后文本将替换为文本文件。

# android - 如何知道单击了哪个视图以打开上下文菜单？

> ID：12236385
> 
> 赞同：0
> 
> 时间：2012-09-02T13:38:37.977
> 
> 标签：android, contextmenu

我有两个按钮，用于注册上下文菜单

```
but1=(ImageButton)findViewById(R.id.imageViewX);
but2=(ImageButton)findViewById(R.id.imageViewY);      
registerForContextMenu(but);
registerForContextMenu(but2); 
```

我在 onContextItemSelected(MenuItem item) 有问题如何知道用户是点击 but1 还是 but2 ？id=item.getItemId(); 我选择了项目的 ID，但我想知道在 onContextItemSelected 方法中单击了哪个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:47:37.450

当您创建 contextitem 时，为两个 Imagebuttons 中的每一个创建唯一的 id

```
 public void onCreateContextMenu(ContextMenu menu, View view, ContextMenu.ContextMenuInfo menuInfo)
 {
   if(view.getId() == R.id.imageViewX)
      menu.add(Menu.NONE, Menu.FIRST+1, Menu.NONE, "imageViewX");
   else     
      menu.add(Menu.NONE, Menu.FIRST+10, Menu.NONE, "imageViewY");

   super.onCreateContextMenu(menu, view, menuInfo);
 } 
```

而在

```
public boolean onContextItemSelected(MenuItem item) {
    if (item.getItemId() == (Menu.FIRST+1)) {
       //do something
    }else if(item.getItemId() == (Menu.FIRST+10)){
       //do something else
    }

} 
```

# php - Amazon AWS (EC2 / S3) 上最好的数据加密策略……在这种情况下你会怎么做？

> ID：12236389
> 
> 赞同：6
> 
> 时间：2012-09-02T13:39:46.340
> 
> 标签：php, delphi, amazon-s3, amazon-ec2

我的**Delphi 2010**应用程序（目前正在开发中）加密用户的文件并将它们上传到 EC2，然后再上传到 S3。用户可以使用安全网站下载他们的文件（有点像保管箱，但在不同的环境、市场、使用等中......）

我使用 RSA 加密。我让我的用户能够选择是使用自己的私钥（在本地生成）还是使用共享密钥（位于云端）

在处理文件下载时，我发现了 4 种必须正确处理的可能性：

> 1.  如果用户使用他/她自己的私有加密密钥：
>     
>     
>     
>     一种。从 Delphi / Client 下载：下载后文件在用户机器上解密
>     
>     
>     
>     湾。从网站/PHP 下载：不可能（直接），除非我让用户可以下载一个小实用程序，该实用程序允许他/她在**本地**提供他/她的私钥并在下载后解密文件。
>     
>     
> 
> **优点/缺点：** 安全，但不直截了当/限制性太强，而且无法在手机上进行（？）
> 
> 1.  用户选择使用我的共享私有加密密钥（位于云端）
>     
>     
>     
>     一种。从 Delphi / 客户端下载：文件首先通过 EC2 上的 PHP 解密（然后提供给用户），在这种情况下，如果许多用户正在下载文件（不太可能）或被解密的文件太大，**下载过程可能会变得非常慢**.
>     
>     
>     
>     湾。从网站/PHP 下载：同 (a)
>     
>     
> 
> **优点/缺点：** 直截了当/只是工作，但可能会导致巨大的 CPU 使用率，下载时不可接受的延迟（尤其是如果有问题的文件大小很大）。

**我的两部分问题是：**

1）是否有更好的策略来处理这种情况？和

2)如果您想让您的用户能够在私有和共享加密密钥之间进行选择，您会怎么做（在**加密策略/处理下载方面）？**

**PS。**我正在使用 Delphi 2010（客户端）和在 EC2 实例上运行的 PHP 5.3 正在运行最新的标准 Amazon Linux 2012 构建

**编辑**流量*总是*加密的，所以只有 HTTPS！

**编辑 2**我正在使用 GPG 进行加密/解密

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:06:22.950

如果您被迫提供服务器端加密/解密，请将 system()/exec() 与 openssl 或其他东西一起使用。我不想看到 PHP 用于加密/加密任何大的东西，仅仅是因为它并不是真正设计用来这样做的。在这种情况下，一段时间后删除未加密版本的文件很重要。

与您正在尝试做的事情一样，在服务器端确保安全确实很困难。如果您正在加密/解密小东西，您可能可以在浏览器中使用 javascript 执行此操作 - 也许请参阅[https://www.google.com/search?q=javascript+aes&sugexp=chrome,mod=16&sourceid=chrome&ie=UTF -8](https://www.google.com/search?q=javascript+aes&sugexp=chrome,mod=16&sourceid=chrome&ie=UTF-8)

我会做什么：

1）上传到EC2。生成一个随机密码，用你的公钥加密，然后存储。您不想对大型数据使用非对称加密。使用先前生成的随机密码通过命令行使用 openssl 进行加密。将加密文件上传到 S3。删除（也许粉碎）未加密的文件。

2) 对于下载，从 S3 获取。让您的用户上传私钥。使用私钥解密先前随机密码的加密版本。现在使用该密码使用 openssl 解密文件。使名称成为随机的哈希值，这样它就可以在没有 PHP 的情况下直接通过 nginx/apache。让 cron 每 x 分钟清理一次。

# php - 如何使用 xammp 将 PHP 5.4 降级到 5.1.6。

> ID：12236392
> 
> 赞同：2
> 
> 时间：2012-09-02T13:40:17.153
> 
> 标签：php, xampp

您好我想知道是否有一种方法可以将我的 PHP 版本降级到 5.1.6 以使用当前版本的 xammp？我在我的一个客户现有的 Intranet 应用程序中需要这个 PHP 版本。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:47:03.923

为了在 XAMPP 中降级 PHP，降级 XAMPP 本身可能是最简单的：请参阅[Xampp Sourcefourge 文件](http://sourceforge.net/projects/xampp/files/)

# android - VideoView 不遵循 Activity 的方向配置

> ID：12236394
> 
> 赞同：5
> 
> 时间：2012-09-02T13:40:44.547
> 
> 标签：android, android-orientation, android-videoview

我正在尝试创建一个播放短视频的简单活动，除了视频方向之外它工作得很好：我已将活动的方向锁定为纵向并且它可以在 VideoView 开始播放视频时工作。但是，之后几秒钟后，VideoView/MediaPlayer 似乎没有遵循它所在的活动的方向。

请注意，Activity 没有重新创建，视频在播放期间更改了自己的配置。

**编辑：**

当我尝试通过另一个后台活动的 AsyncTask 完成此活动时，此方向发生了变化，请注意，我已尝试使用 startActivityForResults(...) ..finishActiviy(...) 来完成此活动。以及发送应要求活动自行完成的意图（Single_top）。请注意 FLAG_ACTIVITY_REORDER_TO_FRONT 不会改变 orintation 这是用于锁定 orintation 的代码（它们都没有工作）

```
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); //OnCreate
android:screenOrientation="portrait" //manifest
android:screenOrientation="portrait" //layout 
```

这是我用来播放视频的代码，活动：

```
protected onCreate(Bundle savedInstance){
    .
    .
    .
    videoHolder = (VideoView) findViewById(R.id.videoView);
    videoHolder.setVideoURI(Uri.parse("android.resource://" +          getPackageName() + "/" + R.raw.video));
    videoHolder.start();
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:keepScreenOn="true" >

    <VideoView
        android:id="@+id/videoView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:screenOrientation="portrait" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/a161b7d7c931ca017a497dd87c6ec54c.png)

# android - 如何制作秒表

> ID：12236396
> 
> 赞同：0
> 
> 时间：2012-09-02T13:40:47.687
> 
> 标签：android

我正在学习 Android，因为我是初学者，所以我认为制作某种秒表作为我的第一个应用程序可能是合适的。我也需要一个，因为我想测量我的长途步行。

我已经用按钮和所有这些东西完成了部分，现在我不确定如何让这个时间得到小时、分钟和秒来更新 textView？

我也想知道我应该怎么做才能调用一个方法，比如每个 30 分钟？

Preciate一些指导和提示！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:57:34.817

只需像我们在这里一样为该任务创建一个线程： [http ://www.itcuties.com/android/how-to-create-android-splash-screen/](http://www.itcuties.com/android/how-to-create-android-splash-screen/)

让我们稍微修改一下我们的代码:)

```
public class MainActivity extends Activity {

    private static String TAG = MainActivity.class.getName();
    private static long SLEEP_TIME = 1; // Sleep for some time

    private TextView hoursText;
    private TextView minutesText;
    private TextView secondsText;

    // TODO: time attributes

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        hoursText = (TextView) findViewById(R.id.hoursView);
        minutesText = (TextView) findViewById(R.id.minutesView);
        secondsText = (TextView) findViewById(R.id.secondsView);

        // TODO: Get start time here

        // Start timer and launch main activity
        ClockUpdater clockUpdater = new ClockUpdater();
        clockUpdater.start();
    }

    private class ClockUpdater extends Thread {
        @Override
        /**
         * Sleep for some time and than start new activity.
         */
        public void run() {
            try {
                // Sleeping
                while (true) {
                    Thread.sleep(SLEEP_TIME * 1000);
                    // TODO: Get current time here

                    // current time - start time ...

                    // Set new values
                    hoursText.setText("10"); // don't know if you walk this long
                                                // :)
                    minutesText.setText("10");
                    secondsText.setText("10");
                }

            } catch (Exception e) {
                Log.e(TAG, e.getMessage());
            }

        }
    }
} 
```

# c# - 从 http 响应的标头和内容发出 http 请求

> ID：12236397
> 
> 赞同：0
> 
> 时间：2012-09-02T13:41:28.573
> 
> 标签：c#, .net, http, sharepoint

我已经学会了使用 http 请求（创建和 Getresponse）方法来获取链接的标题和内容。

问题是，我得到的不是我想要的链接作为 http 响应。

取而代之的是一个身份验证页面。只有当我单击接受按钮时，我才能到达我想要的页面。

所以我实际得到的标题和内容是身份验证页面。

有没有办法可以使用这个标题和内容来创建更多的 http 请求来获取我想要的页面？

我需要在后台单击接受按钮。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:31:18.590

我建议使用 Fiddler 来使用浏览器捕获与站点的交互。然后，您可以使用 Fiddler 输出作为使用您的代码复制相同功能的指南。

如果站点正在跟踪每个用户是否在每个会话的基础上单击了接受按钮，则您需要复制它，可能使用 HTTP POST。您将能够从 Fiddler 输出中了解如何构建该 POST（如果相关）。

# android - android 片段上的小部件未更新且未响应点击

> ID：12236399
> 
> 赞同：1
> 
> 时间：2012-09-02T13:41:45.717
> 
> 标签：android, widget, android-fragments

我有一个片段活动。在其中一个片段上，我添加了小部件。我可以将小部件视为“图片”，但小部件不会自行更新。此外，如果小部件能够响应点击（在常规活动中）.. 而位于 Fragment 上则不是。任何想法 ？

# python - 使用 Jinja2 模板翻译元素和添加枚举 ID？

> ID：12236408
> 
> 赞同：1
> 
> 时间：2012-09-02T13:42:51.117
> 
> 标签：python, jinja2

我正在创建显示幻灯片中的幻灯片（存储为名为 slide001.png、slide002.png 等的图像）以及画外音脚本的页面。模板如下所示：

> <div class="transcript">
>   <p>您好，欢迎来到第一张幻灯片。</p>
>   <p>这是第二张幻灯片。</p>
>   <p>/...等等... </p>
> </div>

我想把它翻译成：

> <div class="transcript">
>   <div class="slide">
>     <img src="slide001.png"/>
>     <p>大家好，欢迎来到第一张幻灯片。</p>
>   </div>
>   ...等等每张幻灯片...
> </div>

即，每个段落都包含在一个 div 中，并且插入了一个带有连续编号的图像引用的 img 元素。我现在正在使用 JavaScript 执行此操作，但由于我正在使用 Jinja2 执行其他操作（插入一致的页眉和页脚、创建前/后链接等），我希望我可以执行 wrap-and-enumerate在 Jinja2 中也是如此。没有英勇的黑客有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T14:57:42.700

如果您可以在页面中将数据转换为以下格式，则可以很好地呈现它。

```
transcript = [{'image': 'filepath', 'text':'welcome...'},
              {'image': 'filepath2', 'text':'slide2'},
              {'image': 'filepath3', 'text':'slide3'}] 
```

Jinja 可以内联放置或移动到宏中，但这两种方式都可以解决问题：

```
<div class="transcript">
  {% for slide in transcript %}
  <div class="slide">
    <img src="{{ slide.image }}"/>
    <p>{{ slide.text }}</p>
  </div>
  {% endfor %}
</div> 
```

# erlang - 为什么这段代码得到不同的结果，在 shell 中以不同的顺序输入？

> ID：12236409
> 
> 赞同：0
> 
> 时间：2012-09-02T13:42:59.040
> 
> 标签：erlang

考虑下面的代码：

```
-module(add_two).
-compile(export_all).

start()->
    process_flag(trap_exit, true),
    Pid = spawn_link(add_two, loop, []),
    register(add_two, Pid),
    ok.

request()->
    add_two ! bad,
    receive
        {'EXIT', _Pid, Reason} -> io:format("self:~w~n", [{error, Reason}]);
        {Result}               -> io:format("result:~w~n", [Result])
    after
        1000->timeout
    end.

loop()->
    receive
        bad                 -> exit(nogoodreason_bad);
        {request, Pid, Msg} -> Pid ! {result, Msg + 2}
    end,
    loop(). 
```

**当我在 shell 中测试上面的代码时，我得到了两个不同输入顺序的不同结果，但是为什么呢？**

第一个输入顺序：

```
Eshell V5.9.1  (abort with ^G)
1> add_two:request(ddd).
** exception error: undefined function add_two:request/1
2> add_two:start().
ok
3> add_two:request(). 
self:{error,nogoodreason_bad}
ok 
```

第二个输入顺序：

```
Eshell V5.9.1  (abort with ^G)
1> add_two:start().
ok
2> add_two:request(ddd).
** exception error: undefined function add_two:request/1
3> add_two:request().
** exception error: bad argument
     in function  add_two:request/0 (add_two.erl, line 11) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:08:41.870

由于该调用，该调用`add_two:request(ddd)`使 shell 进程死亡，并带走了 add_two `spawn_link()`。您可以通过在异常前后检查 shell 的 pid 来确认这一点。它甚至不必涉及`add_two`模块：

```
12> self().
<0.61.0>
13> 2+2.
4
14> self().
<0.61.0>
15> 1/0.
** exception error: bad argument in an arithmetic expression
     in operator  '/'/2
        called as 1 / 0
16> self().
<0.69.0>
17> 
```

您可以通过调用`spawn`而不是`spawn_link`，或者在生成的进程中捕获和处理退出来避免这种影响。

# regex - 为 IPconfig 命令拉取 HostName 的值

> ID：12236410
> 
> 赞同：0
> 
> 时间：2012-09-02T13:43:19.717
> 
> 标签：regex

我有一个用于 IPCONFIG 命令的文本文件，并且有兴趣使用 REGEX 获取 HOST NAME 的值，即 S4333AAB45。

```
Windows IP Configuration

   Host Name . . . . . . . . . . . . : S4333AAB45
   Primary Dns Suffix  . . . . . . . :
   Node Type . . . . . . . . . . . . : Hybrid
   IP Routing Enabled. . . . . . . . : No 
```

我尝试了以下选项，但它没有用

```
/\bHost Name\s+(\d+)/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:00:46.237

这是我会使用的：

```
/\s+Host Name.*: (\w+)$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:00:00.887

## 在 AWK 中使用字段拆分

你没有说你正在使用什么正则表达式引擎，或者为什么你需要使用正则表达式来匹配主机名部分。如果您有权访问 AWK，则可以将其视为字段拆分问题。例如：

```
awk '/\<Host Name\>/ { print $NF }' /tmp/foo 
```

## 使用已知线位置

假设您已经安装了 Cygwin 或类似软件，您可以使用感兴趣记录的位置来获取您想要的数据，而无需使用正则表达式。例如：

```
cat /tmp/foo | head -n3 | cut -d: -f2 | tr -d ' ' 
```

只需将*cat*命令替换为您对*ipconfig*的调用，您应该会得到您想要的结果。

## 使用 sed 代替

您还可以使用 sed 找到您感兴趣的行，并仅打印出该行的尾随单词。例如：

```
sed -n '/\<Host Name\>/ s/.*[[:space:]]\([[:alnum:]]\+\)$/\1/p' /tmp/foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T21:40:05.377

您的主机有一个字母“S”作为主机名的第一个字符，因此“(\d+)”不适合匹配您的主机名。您也没有考虑主机名行上的点和冒号。因此，weexpectedTHIS 的答案应该可以解决问题。但是为了您的信息，以下是在不首先创建中间文件的情况下获取主机名的方法。

`$ipconfig = `ipconfig /all`;`

`($host) = $ipconfig =~ /^\s*Host Name.*:\s*(\w+)/m;`

您将需要其中的“/m”，以便“^”将匹配 $ipconfig 的多行内容中任何行的开头。我倾向于使用“\s*”而不是“\s+”作为一种保险，以防止未来输出格式的变化（在新版本的命令中，空格经常被删除或扩展）。

# android - 从动态生成的搜索栏获取 id/tag

> ID：12236413
> 
> 赞同：0
> 
> 时间：2012-09-02T13:43:24.203
> 
> 标签：android, seekbar

在我的应用程序中，用户选择他们需要多少个搜索栏，然后我的代码生成它们（见下文）。

```
 // dynamically creates the view objects
    tL = (TableLayout)findViewById(R.id.tableLayout1);
    // creates all the fields
    for(int i = 1; i <= numOfStockTanks; i++) {
        TableRow tR = new TableRow(this);
        // creates the textView
        tV1 = new TextView(this);
        tV1.setText("      " + tankNum[i - 1] + ": ");
        tV1.setPadding(2, 0, 0, 0);

        // creates the seekBar
        sBGauge = new SeekBar(this);
        sBGauge.setMax(depthL - 1);
        sBGauge.setMinimumWidth(150);
        sBGauge.setId(2000 + 1);
        sBGauge.setOnSeekBarChangeListener(this);

        // shows the progress of the seekBar
        tVGauge = new TextView(this);
        tVGauge.setText("0-0.0\"");
        tVGauge.setId(3000 + i);

        // adds objects to row
        tR.addView(tV1);
        tR.addView(sBGauge);
        tR.addView(tVGauge);

        // add the TableRow to the TableLayout
        tL.addView(tR, new TableLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        // creates new tableRow
        TableRow tR2 = new TableRow(this);

        // add's a "+" button to tableRow
        buttonPlus = new Button (this);
        buttonPlus.setWidth(60);
        buttonPlus.setText("+");
        buttonPlus.setId(4000 + i);
        buttonPlus.setOnClickListener(new MyPOnClickListener());

        // add's a "-" button to tableRow
        buttonMinus = new Button (this);
        buttonMinus.setWidth(60);
        buttonMinus.setText("-");
        buttonMinus.setId(5000 + i);
        buttonMinus.setOnClickListener(new MyMOnClickListener());

        // add TextView tVChange to show change from previous sqlite entry 
        tVChange = new TextView (this);
        tVChange.setText("Change");
        tVChange.setId(6000 + i);

        // add the TextView and the buttons to the new TableRow
        tR2.addView(buttonPlus);
        tR2.addView(buttonMinus);
        tR2.addView(tVChange);

        // add the TableRow to the TableLayout
        tL.addView(tR2,new TableLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));    
    } // end for statement 
```

我的问题是当我使用我的 onProgressChanged 方法时：

```
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {

    int seekId = sBGauge.getId();
    seekId = seekId - 2000;
    try {
        tVGauge = (TextView) findViewById(seekId + 3000);
    } // end try
    catch (Exception e) {Toast.makeText(this, "fail", Toast.LENGTH_LONG).show();}
    try {
        //  sets the text of the textview
        tVGauge.setText(depth.get(progress));
    } // end try
    catch (Exception e) {}
    manualP = progress;
} 
```

我的问题是我所有的 seekBars 只更改第一个进度条 textView，按钮更改正确的文本视图。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:50:42.160

您正在为每个搜索栏设置相同的 id

```
 sBGauge.setId(2000 + 1); 
```

将 1 更改为**i**

```
 sBGauge.setId(2000 + i); 
```

# android - 在 Android 上接收 UDP 数据包

> ID：12236414
> 
> 赞同：0
> 
> 时间：2012-09-02T13:43:29.213
> 
> 标签：android, udp, nat, android-networking

我尝试在 Android 应用程序和服务器之间连续发送和接收 UDP 数据包。

有没有办法做到这一点？

我当前的网络代码（在线程中运行）如下所示。客户端通过3G连接。客户端配置的端口是 1088。

服务器在收到数据包时只是将数据包回显给客户端。服务器从客户端正确接收数据包，但客户端没有收到任何返回。

```
InetAddress serverAddr = InetAddress.getByName(SERVERIP);

Log.d(TAG, "S: Connecting...");
DatagramSocket socket = new DatagramSocket();
DatagramSocket receive_socket = new DatagramSocket(SERVERPORT, InetAddress.getByName("0.0.0.0"));

while(running) {
    DatagramPacket packet_send = new DatagramPacket(msg, msg.length, serverAddr, SERVERPORT);
    Log.d(TAG, "C: Sending: '" + new String(msg) + "'");
    socket.send(packet_send);

    // Prepare a UDP-Packet that can contain the data we want to receive
    DatagramPacket packet = new DatagramPacket(buf, buf.length);
    Log.d(TAG, "S: Receiving...");

    // Receive the UDP-Packet
    receive_socket.receive(packet);
    Log.d(TAG, "S: Received: '" + new String(packet.getData()) + "'");
    synchronized (this) {
        wait(500);
    }
} 
```

我怀疑 3G 连接是 NATed（服务器报告的端口不同于 1088）。如果是这样，我能做些什么来克服它？或者我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T17:17:04.727

原来代码工作正常，3G 服务提供商阻止了一些 UDP 数据包。

# git - 特定存储库上的 Git 克隆返回结果 = 18 代码 = 200

> ID：12236415
> 
> 赞同：7
> 
> 时间：2012-09-02T13:43:34.487
> 
> 标签：git, git-config

我正在尝试从我们公司的存储库中克隆一个内部存储库，但我不断收到此错误：

```
error: RPC failed; result=18, HTTP code = 200 
```

它总是仅在存储库完全下载后才会发生（需要一段时间）。

我试过使用 torotiseGit。这是报告：

```
git.exe clone   --progress -v  "http://path/repository.git" "C:\Users\user\Documents\code\repository"

Cloning into 'C:\Users\user\Documents\code\repository'...
POST git-upload-pack (424 bytes)
remote: Compressing objects: 100% (4895/4895)   
Receiving objects: 100% (6970/6970), 61.89 MiB | 4.82 MiB/s
Resolving deltas: 100% (2610/2610)
Resolving deltas: 100% (2610/2610), done.
remote: Total 6970 (delta 2610), reused 5702 (delta 1672)
error: RPC failed; result=18, HTTP code = 200

git did not exit cleanly (exit code 128) 
```

我已经尝试了几次，从 Linux 机器和 Windows 机器。同样的错误

我该如何进一步调查该错误？我在 Google 上找不到任何有用的信息

编辑：我检查了 Git 服务器上的 Apache 日志 - 每个克隆都有一个 GET 和一个 POST（结果为 200）。POST 有点大（60MB） - 所以我尝试将 postBuffer 增加到 500MB，但仍然出现错误

这真的是一个 git 错误吗？

我希望它提供更多信息错误...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-31T22:12:55.950

错误：*RPC失败；result=18, HTTP code = 200*是 libcurl 错误。

从[http://curl.haxx.se/libcurl/c/libcurl-errors.html](http://curl.haxx.se/libcurl/c/libcurl-errors.html)我们可以看到这是：

> CURLE_PARTIAL_FILE (18)
> 
> 文件传输比预期短或大。当服务器首先报告预期的传输大小，然后交付与先前给定大小不匹配的数据时，就会发生这种情况。

您可以在运行诸如 clone 之类的命令之前设置 GIT_CURL_VERBOSE=1 以了解 libcurl 是如何失败的。这可以通过以下方式在 bash 中完成：

```
GIT_CURL_VERBOSE=1 git clone   --progress -v  ... 
```

但是，鉴于上述错误，您应该尝试调整**http.postBuffer**。尝试：

```
git config --global http.postBuffer 524288000 
```

从这里[https://www.kernel.org/pub/software/scm/git/docs/git-config.html](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T06:41:27.547

在通过 http（不是 https）使用 git 远程服务器时，我在 Windows 机器上遇到了同样的问题（无法拉取或克隆远程 repo） - 我发现了这个问题的解决方案：在台式机上（发生错误）原因是防病毒软件（在我的情况下是卡巴斯基安全软件 2013）所以我将以下 git 组件放入例外：

## 例外规则：

*   C:\Program 文件 (x86)\Git\bin\git.exe | 全部
*   C:\Program Files (x86)\Git\bin\curl.exe |全部
*   C:\Program Files (x86)\Git* |全部
*   C:\Program Files (x86)\Git\git-cheetah* |全部

## 值得信赖的软件：

*   C:\Program 文件 (x86)\Git\bin\git.exe
*   C:\Program 文件 (x86)\Git\bin\curl.exe
*   C:\Program 文件 (x86)\Git\bin\sh.exe
*   c:\程序文件 (x86)\git\libexec\git-core\git-remote-http.exe
*   c:\程序文件 (x86)\git\libexec\git-core\git-upload-pack.exe

并勾选所有选项以完全不中断它们（不跟踪工作流和网络活动） - 之后问题就消失了

# c - 为什么char指针会自动清零？

> ID：12236416
> 
> 赞同：0
> 
> 时间：2012-09-02T13:43:42.113
> 
> 标签：c, pointers

这是我的代码：

```
tmpip = get_public_ip();
pubip = strtok(tmpip, "\n");
sprintf(buffer, "220 FTPUtils Server [%s]", pubip);
len_string = strlen(buffer)+1;
if(send(newsockd, &len_string, sizeof(len_string), 0) < 0){
    perror("Errore invio len buffer");
    onexit(newsockd, sockd, 0, 2);
}
if(send(newsockd, buffer, len_string, 0) < 0){
    perror("Errore durante l'invio");
    onexit(newsockd, sockd, 0, 2);
}
pubip = NULL;
free(tmpip);
memset(buffer, 0, sizeof(buffer));

if(recv(newsockd, &len_string, sizeof(len_string), MSG_WAITALL) < 0){
    perror("Errore ricezione len user buffer");
    onexit(newsockd, sockd, 0, 2);
}
if(recv(newsockd, buffer, len_string, 0) < 0){
    perror("Errore ricezione del nome utente");
    onexit(newsockd, sockd, 0, 2);
}       
user_string = strtok(buffer, " ");
username = strtok(NULL, "\n");
fprintf(stdout, "%s %s\n", user_string, username);
sprintf(saved_user, "%s", username);
memset(buffer, 0, sizeof(buffer));

if(recv(newsockd, &len_string, sizeof(len_string), MSG_WAITALL) < 0){
    perror("Errore ricezione len pass buffer");
    onexit(newsockd, sockd, 0, 2);
}
if(recv(newsockd, buffer, len_string, 0) < 0){
    perror("Errore ricezione password");
    onexit(newsockd, sockd, 0, 2);
}
pass_string = strtok(buffer, " ");
password = strtok(NULL, "\n");
fprintf(stdout, "%s %s\n", pass_string, password);
memset(buffer, 0, sizeof(buffer));

printf("%s %s\n", username, password); 
```

我上次调试时遇到问题：它**没有**`printf`打印到标准输出！为什么我的指针（用户名和密码）被清除了？？？ 这很奇怪，因为 2完美地工作，但最后一个没有...... **`fprintf``printf`**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T13:45:56.403

`username`和都`password` **指向内部的位置`buffer`**。就是这样`strtok`工作的。

换句话说，当您将缓冲区`memset`归零时，您正在将内存归零`username`并`password`指向。一个简单的解决方法是复制该内存：

```
username = strtok(NULL, "\n");
username = strdup(username); 
```

Note`strdup`不是标准的，但使用`malloc`and很容易实现`strcpy`。**

# c# - 如何检查c#中的对象是什么类

> ID：12236417
> 
> 赞同：-1
> 
> 时间：2012-09-02T13:43:45.460
> 
> 标签：c#, class, object

假设我有一个称为组件的对象列表：

```
List<object> components = new List<object>(); 
```

假设它填充了类引擎、轮子、框架的对象。现在，我想创建一个函数，该函数将类作为参数，如果列表具有该类的对象，则返回 true。像这样：

```
public static bool HasComponent( *the class* ) { 
    foreach(object c in components) {
        if(c is *the class*)
           return true;
    }

    return false;
} 
```

我该怎么做呢？是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T13:49:10.960

使用 linq：

```
components.OfType<YouType>().Any(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T13:45:31.757

使用[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)：

```
public static bool HasComponent<T>() { 
    foreach(object c in components) {
        if(c is T)
           return true;
    }

    return false;
} 
```

称它为：

```
Obj.HasComponent<Wheel>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T13:47:42.100

您可以调用 GetType() 来获取 .Net 中任何对象的类型或使用`is`关键字。实际上，您可以使用 LINQ 在列表中执行此操作，例如：

```
components.Any(x => x is Wheel); 
```

并替换`Wheel`所需的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T13:46:20.350

更像这样的东西

```
public static bool HasComponent<TheType>() 
{  
    foreach(object c in components) 
    { 
        if(c is TheType) 
        {
           return true; 
        }
    }  
    return false; 
} 
```

或者更短

```
public static bool HasComponent<TheType>() 
{  
    return components.OfType<TheType>().Count() > 0;
} 
```

调用它

```
 HasComponent<TheType>() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T13:52:43.000

To find this out, we should use an extended for loop that is 'foreach', which traverses through all types of class objects and checks the desired object of specific class and returns either true or false.

```
public static bool HasComponent<Type>()  { 
foreach(object c in l) {
    if(object c in Type)
       return true;
    }

    return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-02T14:22:07.200

If you are working with a multiple-threaded application, you should be sure that the object is in the list at the time you search for it. Because the other thread can remove this object at the same time as the search. So, a NullReferenceException could be thrown. In order to avoid this situation, you can use this function.

```
 public static bool HasComponent<T>()
 {
    foreach (object c in components)
    {
       lock (c.GetType())
       {
           if (c is T)
           {
              return true;
           }
       }

     }
     return false;
} 
```

But, to call this function your list should be static.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-02T14:34:38.617

I know some answers suggested using the "is" keyword, but you'll want to be careful in inheritance situations. e.g. If Cow derives from Animal, then `HasComponent<Cow>()` will return true for both. You should really compare types to avoid the problem:

```
public static bool HasComponent<T>()
{
    return components.Any(i => i.GetType() == typeof(T));
} 
```

Of course, you can do it without generics by passing in a type, but generics is really the way to go:

```
public static bool HasComponent(Type type)
{
    return components.Any(i => i.GetType() == type);
} 
```

# css - 我可以使用依赖于其他变量的变量创建较少的颜色主题吗？

> ID：12236418
> 
> 赞同：2
> 
> 时间：2012-09-02T13:44:01.613
> 
> 标签：css, less

有谁知道如何做我在这里尝试做的事情？

```
#theme (dark)  {@primary: black;}
#theme (light) {@primary: white;}
#theme (@_)    {@primary: yellow;}

@name: dark;
#theme(@name);

.rule {
  color: @primary;
} 
```

我正在尝试定义一些“主题”，它们将具有将在各种`Less`文件中使用的颜色和图像（可能）。过去，我在全球范围内定义它们并注释掉那些未使用的策略，但我试图看看是否有人找到了`Less`比我更好的策略。

我曾经发现一个曾经是（？）一部分的功能，`Less`但它似乎不起作用。

```
.theme {
  @color: red;
}

.rule {
  color: .theme > @color;
} 
```

这将是伟大的，如果它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T20:53:09.783

在稍微弄乱了 LESSCSS 之后，我想出了一种合理的方法来基于单个变量更改所有`@theme`变量。

诀窍是使用[变量插值](http://lesscss.org/features/#variables-feature-variable-interpolation)来指定对变量的[变量引用](http://lesscss.org/features/#variables-feature-variable-names)。

```
//this can be either "dark" or "light"
@theme: dark;

@theme-primary: "@{theme}-primary"; //this will evaluate to "dark-primary"
@theme-secondary: "@{theme}-secondary"; //this will evaluate to "dark-secondary"

@dark-primary: #F00;
@dark-secondary: #000;

@light-primary: #333;
@light-secondary: #FFF;

body {
    //@theme-secondary evaluates to "dark-secondary"
    //@dark-secondary evalutates to #000
    background-color: @@theme-secondary;
    //@theme-primary evaluates to "dark-primary"
    //@dark-primary evaluates to #F00
    color: @@theme-primary;
} 
```

* * *

### 旧版本

虽然我不知道有条件地定义变量的简单方法，但如果您要更改一个单词并更改颜色主题，您不妨更改导入语句：

```
@import ’themes/dark.less’;
//@import ’themes/light.less’; 
```

# javascript - 仅当窗口宽度 > 940px 时才加载 jQuery 函数，无论是通过页面加载还是调整大小

> ID：12236423
> 
> 赞同：0
> 
> 时间：2012-09-02T13:44:28.630
> 
> 标签：javascript, jquery, window-resize

我希望仅在浏览器窗口宽度大于 940 像素时才加载函数。

我可以在初始页面加载时执行此操作：

```
if ( $(window).width() > 940) {
  // my function
} 
```

但是，上述方式不适用于浏览器调整大小。我已经能够通过以下方式在浏览器调整大小方面有所帮助：

```
$(window).resize(function() {
  if ($(window).width() < 940) {
     return;
  }
 else {
    // my function
 }
}); 
```

然而，这个问题是，一旦函数被加载，无论浏览器窗口是否被调整得更小，它都会保持加载状态。每当窗口较小时，我都需要清除该功能或卸载它。

有没有办法只在窗口大于 940 像素时加载一个函数，如果窗口小于 940 则完全删除它？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:37:43.760

看看在[响应式网站上管理 JavaScript](http://viget.com/inspire/managing-javascript-on-responsive-websites)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:48:28.987

在您拥有的第一个分支中做您需要的事情`return`。

[http://jsfiddle.net/KQSNE/](http://jsfiddle.net/KQSNE/)

# c# - 密码生成器结果的通用表示

> ID：12236426
> 
> 赞同：0
> 
> 时间：2012-09-02T13:45:02.270
> 
> 标签：c#, asynchronous, logic

这更像是一个讨论类型的问题。我正在开发一个具有多个接口的系统，这些接口可以在不同的程序集中实现，并且这些程序集将根据需要在运行时加载。这种接口的一个例子是`INotifier`. 这是一个需要实现的通用通知器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Company.MainModule.CentralLogging;

namespace Company.NotificationEngine
{
        public interface INotifier
        {
                 IAsyncResult BeginInvoke(Dictionary<String, object> parameters,AsyncCallback callBack,object state, LogMaster logMaster);
                 Dictionary<string,object> EndInvoke(IAsyncResult asyncResult);   
        }
} 
```

现在，一个 INotifier 的实现示例：

```
namespace Company.NotificationEngine
{
    internal class SMSNotification : INotifier
    {

        #region Class Variables

        public IAsyncResult BeginInvoke(Dictionary<string, object> parameters, AsyncCallback callBack, object state, LogMaster logMaster)
        {
            // Send SMS
            return asyncResult;
        }

        public Dictionary<string, object> EndInvoke(IAsyncResult asyncResult)
        {
            return null;
        }

        #region Private Functions

    }
} 
```

现在，按照相同的模式，我将创建一个名为`IGenerator`. 那应该有两个功能：`GeneratePassword`和`ValidatePassword`。将`GeneratePassword`根据实现程序集定义的算法生成密码。这`ValidatePassword`是我们需要的要求，因为不同的客户端具有不同的密码复杂性要求。生成密码后，必须对其进行验证。

现在，最近，我们切换到了 .NET Framework 4.5 和 Visual Studio 2012。这两种方法都可能很耗时。`GeneratePassword`可以生成一个简单的 AlphaNumeric 密码或密码的多页矩阵。同样，`ValidatePassword`可能会通过 HTTP 将生成的密码发送到客户端密码验证服务器/API。目前我们正在使用 BeginInvoke/EndInvoke 模式。我想拥有`GeneratePasswordAsync`异步`ValidatePasswordAsync`等待模式。他们将带着各自完成和取消的选项/事件

**问：**我可以在接口级别使用 async-await 模式吗？

我们针对不同的软件、平台和操作系统进行密码重置。所以这就是通用生成器的原因。

我的下一个问题很可能是这两种方法的签名，因为我试图涵盖广泛的密码类型，并且需要了解返回类型应该满足什么；一个简单`Object`的或一个`<T>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:18:41.893

您可以在接口级别使用 async 和 await。请记住，async 和 await 关键字是提供预打包代码来处理现有 .Net 接口的 C# 关键字。要么选择 .Net 标准接口，要么使用你自己的（因为你可能已经实现了它们）。

我假设使用“对象”来处理其他形式的身份验证，例如数字证书或一次性密码 (OTP)。但是，在这种情况下，身份验证主体可能希望发送一个 nonce 供对方签名，而您上面的模式并不涵盖多轮通信。

切记永远不要通过未加密的通道以纯文本形式传输密码。否则，它们可能会被从网络中嗅出。您可能还需要某种形式的重放攻击检测以及源和客户端身份验证，否则，有人可能会捕获对“ValidatePassword”的调用，然后重播以成功验证身份或在多次错误登录尝试后锁定帐户。

我知道在答案中提出问题是不好的形式，但是如何指定用户名或其他身份？这是字典中的值之一吗？

# python - python regex：多次匹配一个组

> ID：12236427
> 
> 赞同：0
> 
> 时间：2012-09-02T13:45:24.377
> 
> 标签：python, regex, quantifiers, regex-group

> **可能重复：**
> [Python 正则表达式 - 如何从通配符表达式中捕获多个组？](https://stackoverflow.com/questions/464736/python-regular-expressions-how-to-capture-multiple-groups-from-a-wildcard-expr)
> [组匹配的python正则表达式](https://stackoverflow.com/questions/12026100/python-regex-of-group-match)

我知道有更好或更简单的方法可以做到这一点，但是当我自己尝试过但没有奏效时，我很感兴趣为什么，所以这里有问题：

假设我想使用正则表达式获取 Xml 属性。让我们看看下面的 XML-Node：

```
<?xml version="1.0" encoding="UTF-8"?> 
<Node key1="val1" key2="val2">
    <OtherNode>
        <!-- something -->
    </OtherNode>
</Node> 
```

解析`Node`以及`OtherNode`我有以下正则表达式：

```
import re
pattern=re.compile
('\s*?<(?P<key>[\w\d]+?)
  \s*?(?P<meta>(?P<metakey>[\w:]+?)="(?P<metavar>.+?)"\s*)*>') 
```

的输出`pattern.findall(xml)`是：

> ('Node', 'key2="val2"', 'key2', 'val2') ('OtherNode', '', '', '')

和输出`[m.groupdict() for m in pattern.finditer(xml)]`：

```
{'metakey': 'key2', 'meta': 'key2="val2"', 'metavar': 'val2', 'key': 'Node'}
{'metakey': None, 'meta': None, 'metavar': None, 'key': 'OtherNode'} 
```

似乎只有最后一个元变量可以作为组访问。

如何搭配`key1`以及`key2`？是否可以将多个组与`(...)*`构造匹配？换句话说：`meta`如果存在，我希望正则表达式多次匹配命名组。

# spring - PostGIS Geometry 的休眠持续失败

> ID：12236428
> 
> 赞同：8
> 
> 时间：2012-09-02T13:45:29.463
> 
> 标签：spring, hibernate, persistence, postgis, rollback

与上[一个问题有关](https://stackoverflow.com/questions/12215212/postgis-geometry-saving-invalid-endian-flag-value-encountered/)。我有一个 Spring Roo 应用程序，它使用 Hibernate 使用 JTS 将 Geometry 对象写入 PostGIS 数据库。我相信我已经解决了我在定义 Geometry 对象时遇到的问题，现在 Hibernate 正在执行它的 persist() 方法，但是在它到达数据库之前出现了问题，我得到了下面的异常。

这里有一些有趣的线条。首先来自 Hibernate 日志，要持久化的对象，然后是 SQL 查询（大概是 ? 被替换了）：

```
...
DEBUG org.hibernate.pretty.Printer - com.test.LandUse{id=1, centerPoint=POINT (5 6), version=0}
...
DEBUG org.hibernate.SQL - insert into land_use (center_point, version, id) values (?, ?, ?)
... 
```

然后发生了更多的事情，虽然没有什么明显的坏事。但是我没有看到任何“最终”SQL，并且尝试回滚事务。然后：

```
org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:521)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$afterReturning$org_springframework_transaction_aspectj_AbstractTransactionAspect$3$2a73e96c(AbstractTransactionAspect.aj:78)
    at com.test.LandUse_Roo_Jpa_ActiveRecord.ajc$interMethod$com_test_LandUse_Roo_Jpa_ActiveRecord$com_test_LandUse$persist(LandUse_Roo_Jpa_ActiveRecord.aj:44)
    at com.test.LandUse.persist(LandUse.java:1)
    at com.test.LandUse_Roo_Jpa_ActiveRecord.ajc$interMethodDispatch1$com_test_LandUse_Roo_Jpa_ActiveRecord$com_test_LandUse$persist(LandUse_Roo_Jpa_ActiveRecord.aj)
    at com.test.LandUseController_Roo_Controller.ajc$interMethod$com_test_LandUseController_Roo_Controller$com_test_LandUseController$create(LandUseController_Roo_Controller.aj:29)
    at com.test.LandUseController.create(LandUseController.java:1)
...
Caused by: javax.persistence.RollbackException: Error while committing the transaction
at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:93)
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:512)
    ... 54 more
Caused by: java.lang.UnsupportedOperationException
    at org.hibernate.spatial.GeometrySqlTypeDescriptor.getBinder(GeometrySqlTypeDescriptor.java:52)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:283)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:278)
    at org.hibernate.type.AbstractSingleColumnStandardBasicType.nullSafeSet(AbstractSingleColumnStandardBasicType.java:89)
    at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2184)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2430)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2874)
    at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:76)
    ... 55 more 
```

我一直试图让这个简单的用例（一个只有一个 Geometry 属性的对象）工作了一个多星期，现在我已经束手无策了。如果我用 String 替换 Geometry 对象，它就可以正常工作。有谁知道什么可能导致这样的错误？

**编辑：**蒂埃里在下面的回答让我浏览了源代码，我注意到异常被抛出`GeometrySqlTypeDescriptor`，其中有一些有趣的内容：

```
/**
 * A generic <code>SqlTypeDescriptor</code>, intended to be remapped
 * by the spatial dialect.
 *
 * @author Karel Maesen, Geovise BVBA
 *         creation-date: 7/27/11
 */
public class GeometrySqlTypeDescriptor implements SqlTypeDescriptor {

    public static final GeometrySqlTypeDescriptor INSTANCE = new GeometrySqlTypeDescriptor();

    @Override
    public int getSqlType() {
        return 3000; //this value doesn't conflict with presently defined java.sql.Types values.
    }

    @Override
    public boolean canBeRemapped() {
        return true;
    }

    @Override
    public <X> ValueBinder<X> getBinder(JavaTypeDescriptor<X> javaTypeDescriptor) {
        throw new UnsupportedOperationException();
    }

    @Override
    public <X> ValueExtractor<X> getExtractor(JavaTypeDescriptor<X> javaTypeDescriptor) {
        throw new UnsupportedOperationException();
    }
} 
```

特别是，请注意类注释表明 Hibernate 方言映射明显有问题。不幸的是，我不知道这意味着什么，但我猜是由于某种版本不匹配。（还要注意 SQL 类型 3000 的声明，根据[我之前的错误](https://stackoverflow.com/questions/12156130/hibernate-spatial-no-dialect-mapping-for-jdbc-type-3000)！）

`org.hibernate.spatial.dialect.postgis.PostgisDialect`根据[Hibernate Spatial 使用指南](http://www.hibernatespatial.org/usage.html)，我目前的方言是。我正在使用 Hibernate Spatial 4.0-M1、JTS 1.12 和 PostGIS 2.0.1。我可能会尝试几个不同版本的 PostGIS，特别是因为这是 Hibernate Spatial 应该提供但似乎没有提供的一个依赖项。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T10:04:04.673

似乎问题在于没有正确拾取和集成 PostgisDialect，因此不支持所需的操作。解决方案就像从 Hibernate 3.6.9.Final 升级到 4.1.6.Final 一样简单！

[有关详细信息，请参阅我在邮件列表中的主题](http://hibernate-spatial.1140993.n2.nabble.com/Hibernate-Spatial-fails-to-persist-JTS-Point-td7572459.html)。

根据该线程，您还应该知道，从 Hibernate Spatial 4.0-M1 开始，只有 Geometry 类型被指定为 Hibernate，因此`@Column`注释**必须**设置`columnDefinition="Geometry"`，而**不是** `Point`其他任何内容。这可能会在未来得到解决。

有了这本修改集，我终于可以写一个指向数据库的点了！正确的属性规范是：

```
@Column(columnDefinition="Geometry")
@Type(type = "org.hibernate.spatial.GeometryType")
private Point centerPoint; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-07T22:53:08.933

当我忘记在休眠配置文件中添加 Postgis 方言时，我得到了这个异常。

将以下行添加到**hibernate.cfg.xml**

```
<property name="dialect">org.hibernate.spatial.dialect.postgis.PostgisDialect</property> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:46:10.370

是的，`?`它们被您需要存储的值替换。

您是否尝试使用以下类型：`GeometryUserType`而不是`GeometryType`? 我怀疑`GeometryType`Hibernate Spatial Project 的 API 不直接支持。它可能是一个抽象类，您无法直接实例化它以使用注释映射您的数据 - 正如我们所试验的那样，它的作用超出了场景。

`Caused by: java.lang.UnsupportedOperationException`这让我这么说。

[您遵循的教程](http://www.hibernatespatial.org/usage.html)中的最后一个 XML 内容很清楚：

```
...
<property name="geometry" type="org.hibernatespatial.GeometryUserType">
    <column name="geom" />
</property>
... 
```

[查看GeometryUserType](http://www.hibernatespatial.org/websvn/filedetails.php?repname=hibernate-spatial&path=%2Fbranches%2Fhibernate-3.6-integration%2Fhibernate-spatial-postgis%2Fsrc%2Fmain%2Fjava%2Forg%2Fhibernatespatial%2Fpostgis%2FPGGeometryUserType.java&sc=1)中的代码，我只看到一个可能引发这些异常的地方。

```
public Object conv2DBGeometry(Geometry jtsGeom, Connection connection) {
        org.postgis.Geometry geom = null;
        jtsGeom = forceEmptyToGeometryCollection(jtsGeom);
        if (jtsGeom instanceof com.vividsolutions.jts.geom.Point) {
            geom = convertJTSPoint((com.vividsolutions.jts.geom.Point) jtsGeom);
        } else if (jtsGeom instanceof com.vividsolutions.jts.geom.LineString) {
            geom = convertJTSLineString((com.vividsolutions.jts.geom.LineString) jtsGeom);
        } else if (jtsGeom instanceof com.vividsolutions.jts.geom.MultiLineString) {
            geom = convertJTSMultiLineString((com.vividsolutions.jts.geom.MultiLineString) jtsGeom);
        } else if (jtsGeom instanceof com.vividsolutions.jts.geom.Polygon) {
            geom = convertJTSPolygon((com.vividsolutions.jts.geom.Polygon) jtsGeom);
        } else if (jtsGeom instanceof com.vividsolutions.jts.geom.MultiPoint) {
            geom = convertJTSMultiPoint((com.vividsolutions.jts.geom.MultiPoint) jtsGeom);
        } else if (jtsGeom instanceof com.vividsolutions.jts.geom.MultiPolygon) {
            geom = convertJTSMultiPolygon((com.vividsolutions.jts.geom.MultiPolygon) jtsGeom);
        } else if (jtsGeom instanceof com.vividsolutions.jts.geom.GeometryCollection) {
            geom = convertJTSGeometryCollection((com.vividsolutions.jts.geom.GeometryCollection) jtsGeom);
        }

        if (geom != null)
            return new PGgeometry(geom);
        else
            throw new UnsupportedOperationException("Conversion of "
                    + jtsGeom.getClass().getSimpleName()
                    + " to PGgeometry not supported");
    } 
```

我认为PGgeometry代表PostGis Geometry（或者可能是PostgreSQL）。

我发现 Karel Maesen 和其他人谈论 InnoDB 支持的一些主题不是很好，但它们可能已经过时（[05-2011](http://hibernate-spatial.1140993.n2.nabble.com/Hibernate-Spatial-with-Hibernate-3-6-and-Mysql-InnoDB-td6153777.html)）。

祝你好运！

# ajax - 通过从超链接执行 .get() 将 jQuery append() 数据添加到 div

> ID：12236431
> 
> 赞同：-1
> 
> 时间：2012-09-02T13:45:39.967
> 
> 标签：ajax, jquery, get

我想实现[这样](http://www.flipkart.com/search/a/books?query=php&vertical=books&dd=0&autosuggest%5Bas%5D=off&autosuggest%5Bas-submittype%5D=default-search&autosuggest%5Bas-grouprank%5D=0&autosuggest%5Bas-overallrank%5D=0&Search=%C2%A0&_r=_iN6OjEUPgVEgEvZj%2b%2bZmQ--&_l=MHzwajeMCXBPHY1KaGPeZQ--&ref=1a3d4e72-48d4-416e-b64f-c15ac08994ea&selmitem=)的目标。当我向下滚动时，页面会自动加载新内容。我想通过单击页面底部的超链接来获取新的数据集。

作为 AJAX 的新手，我正在检查[这个](https://stackoverflow.com/a/3999872/432720)与我的问题相似的问题，但它不起作用。当我运行代码时，我得到的只是一个空对象。这是我文件中的代码：

**索引.php**

```
<a href="about.php">About Me</a> <br>
<a href="contact.php">Contact Me</a>
<div class="wrap"></div>

<script>
    (function(){
        var wrap = $('div.wrap');
        $('a').on('click', function(e){
            var href = $(this).attr('href');
            $.get(href, function(data){
                console.log($(data).find('div.container'));
                $(data).find("div.container").appendTo(wrap);
            });
            e.preventDefault();
        });
    })();
</script> 
```

**关于.php**

```
</div>
<div class="container">
    <h2>About Me</h2>
    <p>I suck at AJAX ! :-(</p>
</div> 
```

**联系人.php**

```
<div class="container"><h1>Contact!</h1>
  <form action="#">
  <textarea name="content" id="content" cols="30" rows="10"></textarea>
  <input type="url" name="url" id="url">
  <p><button type="submit">Save</button></p>
  </form>
</div> 
```

**截屏：**

![空对象截图](../Images/f9717ef6bb72cc624eaba3558e400698.png)

我错过了什么吗？是否`.get()`在`click()`事件的回调函数中工作？但是当我这样做时它工作得很好`.load()`......对不起这个大帖子，但我在这里完全不知所措！：/请帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:01:24.117

```
(function(){
    var wrap = $('div.wrap');
    $('a').on('click', function(e){
        var href = $(this).attr('href');
        $.get(href, function(data){
            console.log($(data).filter('div.container'));
            wrap.append($(data).filter(".container"));
        });
        e.preventDefault();
    });
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:01:35.317

至于为什么`$.get()`不起作用，您需要准备好返回的数据以供 DOM 遍历技术使用：

```
(function(){
    var wrap = $('div.wrap');
    $('a').on('click', function(e){
        e.preventDefault();
        var href = $(this).attr('href');
        $.get(href, function(data){
            var $content = $('<div />').html(data);
            console.log( $content.find('div.container') );
            $content.find("div.container").appendTo(wrap);
        });
    });
})(); 
```

[**jsFiddle Demo**](http://jsfiddle.net/Ax6xS/)注意 jsFiddle 的测试资源是需要`$.post`而不是`$.get`，但原理是一样的。

* * *

类似的事情，使用`.load()`（[**jsFiddle demo**](http://jsfiddle.net/VQ5SY/)）完成：

```
(function(){
    var wrap = $('div.wrap');
    $('a').on('click', function(e){
        e.preventDefault();
        var href = $(this).attr('href');
        $('<div />')
            .load(href +' div.container')
            .appendTo(wrap)
            .children(':first-child')
            .unwrap();
    });
})();​ 
```

# php - PHP 的 move_uploaded_file 建议

> ID：12236437
> 
> 赞同：2
> 
> 时间：2012-09-02T13:46:42.150
> 
> 标签：php, file-upload

我在使用 PHP`move_uploaded_file`命令在共享的 Apasche Web 托管服务器上正常工作时遇到了真正的问题。

如果我想创建一个文件夹 ( `mkdir`) 我必须使用完整的路径名，例如

```
$target_path = "/home/myhostingname/public_html/uploads/files/".$lastID;
mkdir($target_path, 0755); 
```

这行得通，创建了唯一的文件夹并使用 FileZilla 我可以将文件上传到它。

但是，当我尝试使用`move_uploaded_file`命令的完整路径时，什么都没有上传。例如

```
move_uploaded_file($tmp_file, $target_path); 
```

其中，例如：

```
$tmp_file = "/home/myhostingname/public_html/tmp/php8MR5Qv/test.gif"
$target_path = "/home/myhostingname/public_html/uploads/files/130/" 
```

任何想法我做错了什么。该脚本已被接受，但似乎发生了不匹配...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:57:50.960

来自的文件`$tmp_file`应通过 HTTP POST 请求上传，否则`move_uploaded_file`将无法正常工作。

要检查文件是否已上传，请使用`is_uploaded_file`

因此，您的代码可能如下所示：

```
$tmp_file = "/home/myhostingname/public_html/tmp/php8MR5Qv/test.gif"
$target_path = "/home/myhostingname/public_html/uploads/files/".$lastID;
if(is_uploaded_file($tmp_file)){
    mkdir($target_path, 0755);
    move_uploaded_file($tmp_file, $target_path);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:35:53.200

解决方案似乎是 $target_path 实际上是一个文件。该文档并没有特别清楚地说明这一点。但是，当您开始查找有效的代码时，目标是路径和文件名...当我进行此更改时，它立即起作用。

# drupal-7 - 从视图中的引用节点加载空值（Drupal 7）

> ID：12236440
> 
> 赞同：1
> 
> 时间：2012-09-02T13:46:51.857
> 
> 标签：drupal-7, drupal-views, parent-child, cck, entityreference

我有一个显示两种内容类型节点的视图。这些节点都有一个 cck 字段，该字段由引用“父”节点的实体引用制成。如果视图中显示的节点有一个空值，则视图应该在父节点中显示该值。就那么简单。

过滤器还应该能够过滤父级的值...

我认为它应该以某种方式通过处理程序来解决，但是我在通过文档找到方法时遇到了很多麻烦。有人可以帮忙吗？

我正在使用 Drupal 7.14、视图 7.x-3.3 和实体参考 7.x-1.0-rc3+2-dev。

——米克尔

# android - 如何使用主题和样式更改 Textview 的形状？

> ID：12236442
> 
> 赞同：0
> 
> 时间：2012-09-02T13:47:06.187
> 
> 标签：android, textview, shapes, android-theme

有没有可能使用主题和样式更改 TextView 形状的方法？

我已将 textview 的形状更改为矩形，但未能更改 textview 的六边形。我怎么能这样做？

到目前为止，尝试搜索网络并尝试了代码，但没有得到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:20:04.670

试试这个代码，

shape.xml（保存在 res/drawable/ 中）

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>        
<shape>
  <corners android:radius="3dp/>
</shape>
</item>
</selector> 
```

然后更改 TextView 的背景。

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:background="@drawable/shape" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:54:28.510

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources> 
    <style name="black_text_view_medium" parent="@android:style/TextAppearance.Medium">
            <item name="android:textColor">@color/black</item>
            <item name="android:typeface">normal</item>
            <item name="android:textSize">16sp</item>
        </style>
    </resources> 
```

这是 res/values/red.xml 中的资源文件，并像这样在您的 textview 中定义此样式。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView
    style="@style/black_text_view_medium"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="This is your Textview Style"
    />
</LinearLayout> 
```

# django - django-使用 mod_wsgi css 部署未显示

> ID：12236444
> 
> 赞同：0
> 
> 时间：2012-09-02T13:47:11.370
> 
> 标签：django, apache2, mod-wsgi

我正在使用 libapache2-mod_wsgi 来部署我的 django 应用程序。我写 httpd.conf 如下：

```
Alias /static/ /home/ubuntu/similarkind/similarkind/static/

<Directory /home/ubuntu/similarkind/similarkind/static>
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / /home/ubuntu/similarkind/similarkind/wsgi.py
WSGIPythonPath /home/ubuntu/similarkind:/home/ubuntu/pysushu/lib/python2.7/site-packages

<Directory /home/ubuntu/similarkind/similarkind>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

好吧，我的应用程序运行良好，但没有显示 css 和 javascript。我在静态文件夹中有我的 css 和 js。我的应用程序目录结构也看起来像

```
/similarkind
    /static
        /foundation-3
            /stylesheets
            /js
        /jquery-ui
            /css
            /js 
```

谁能告诉我我错过了什么？

# c - 写入文件会在我想要的内容之上写入垃圾

> ID：12236445
> 
> 赞同：1
> 
> 时间：2012-09-02T13:47:12.693
> 
> 标签：c

我有以下代码：

```
#include <stdio.h>
#include <unistd.h>

int main () {

    int fd = open("filename.dat", O_CREAT|O_WRONLY|O_TRUNC, 0600);
    int result = write(fd, "abcdefghijklmnopqrstuvxz", 100);
    printf("\n\nfd = %d, result = %d, errno = %d", fd, result, errno);
    close(fd);
    return 0;
} 
```

我试图了解当我尝试向文件写入比可用字节多的字节时会发生什么。所以我打电话`write`并要求程序写入 100 个字节，而我的字节数要少得多。结果：一堆东西`stdout`从`filename.dat`. 如果不是`100`我使用`strlen("abcdefghijklmnopqrstuvxz")`，我会得到想要的结果。那么我的问题是：为什么程序试图写超出`'\0'`我字符串上的字符？这里有一些未定义的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:49:01.507

> 那么我的问题是：为什么程序试图在我的字符串上写入 '\0' 字符之外的内容？

该函数[`write(2)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)不关心 0 终止符。它实际上根本不关心缓冲区内容：它会尝试写入你告诉它的尽可能多的字节。

> 这里是否发生了一些未定义的行为

当然，试图写的比你写的更多可能会招致操作系统的愤怒，如果它触及不可访问的内存，操作系统可能会决定终止你的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T13:52:53.823

您使用的`write()`功能不关心内容。它只是写没有。您告诉它写入文件的字节数。

所以当你说它写 100 个字节并提供少于 100 个字节时。剩余的字节被当作垃圾值。

但是当您使用 时`strlen("abcdefghijklmnopqrstuvxz")`，您要求`write()`写入等于字符串长度的字节。所以它在那里工作得很好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T13:53:40.977

因为有两种技术可以表示一个字符串。有一个以空值结尾的版本，当您定义它的大小和指向第一个字节的指针时，还有另一个版本。写使用第二个。它需要一个数据开始的指针和一个长度来知道应该将多少数据复制到文件中，但它看不到空值。有时这些方法包装了一个简单的 memcpy。

因此，当您定义 100 长度时，在`abcdefghijklmnopqrstuvxz`程序存储您的“一堆标准输出内容”之后的内存中。这就是你看到垃圾的原因。您很幸运，因为在这些情况下您可以轻松获得 SEGFAULT！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T13:52:07.370

`My question then is: why is the program trying to write beyond a \0`因为你希望它写 100 个字符。

`Is there some undefined behavior going on here?`如果将 100 增加到一个很大的数字，并且该区域位于非特权区域，则这是未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T15:28:53.953

我认为这里的基本问题是您将 C 字符串视为值，您认为您正在将此值传递给 write 函数，而 write 函数正在写出您的值和额外的垃圾。

C比那个级别低。在 C 中，我们并没有真正传递字符串，而是传递指向字符串的指针，这些字符串是 'char *' 值，但附加了一个承诺，即它们指向应该被视为以空字符结尾的字符串的有效内存块.

write() 函数不关心以 null 结尾的字符串约定。write 调用中的参数提供文件描述符、char * 和缓冲区长度。

此外，编译器将字符串常量转换为 const char 数组。与此等价的情况发生在顶层：

```
const char *stringconst00001[27] = { 'a', 'b', 'c', ... 'y', 'z', '\0' } 
```

它在 main() 中执行此操作：

```
int result = write(fd, stringconst00001, 100); 
```

# spring-security - Spring Security - 检查 web url 是否安全/受保护

> ID：12236448
> 
> 赞同：7
> 
> 时间：2012-09-02T13:47:33.457
> 
> 标签：spring-security

如果当前请求是安全的，有没有办法“询问”spring security？因为即使我通过了身份验证，我也想检测我是在安全受保护的 URL 中还是在匿名/公共页面中

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-11T12:49:58.140

Spring Security 为此提供了[JSP 标签支持](http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#taglibs-authorize)。例如：

```
<sec:authorize url="/admin">

This content will only be visible to users who are authorized to access the "/admin" URL.

</sec:authorize> 
```

Thymeleaf 提供了一种 Spring Security Dialect，它直接支持使用 Spring Security[检查 URL 授权](https://github.com/thymeleaf/thymeleaf-extras-springsecurity#using-the-attributes)。例如：

```
<div sec:authorize-url="/admin">
    This will only be displayed if authenticated user can call the "/admin" URL.
</div> 
```

如果您的技术不支持直接执行检查，您可以轻松使用[WebInvocationPrivilegeEvaluator](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/web/access/WebInvocationPrivilegeEvaluator.html)（这是 JSP taglib 和 Thymeleaf 使用的对象）。例如，您可以直接使用它`@Autowire`的一个实例。`WebInvocationPrivilegeEvaluator`显然，语法会根据您使用它的位置（即 GSP、Freemarker 等）而有所不同，但这里有一个直接使用 Java 代码的示例。

```
@Autowired
WebInvocationPrivilegeEvaluator webPrivs;

public void useIt() {
    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();

    boolean hasAdminAccess = webPrivs.isAllowed("/admin", authentication);

    boolean hasAdminPostAccess = webPrivs.isAllowed(null, "/admin", "POST", authentication);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:29:49.203

我认为您可以使用自己的实现，`AccessDecisionVoter` 然后只需简单地覆盖[Vote](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/access/AccessDecisionVoter.html#vote%28org.springframework.security.core.Authentication,%20java.lang.Object,%20java.util.Collection%29)方法并使用方法比较拦截 url `filterInvocation.getRequestUrl();`。

```
@Override
public int vote(Authentication authentication, FilterInvocation filterInvocation,
    Collection<ConfigAttribute> attributes) {
  String requestUrl = filterInvocation.getRequestUrl();
  ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T06:53:38.903

我们可以将其标记为安全通道，因此转换为 https:// url。

```
 <intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY" requires-channel="https" /> 
```

然后我们可以使用 request.getScheme() 来识别它。我使用了 org.springframework.security.version 3.1.4.RELEASE

# ios - Xcode：模拟器显示正确的 xib 界面，但在设备上，它显示的是旧界面

> ID：12236450
> 
> 赞同：0
> 
> 时间：2012-09-02T13:47:38.353
> 
> 标签：ios, xcode, xib

> **可能重复：**
> [Xcode 显示旧的、已删除的 xib 文件](https://stackoverflow.com/questions/3765989/xcode-shows-old-deleted-xib-files)

我的问题是：我已经更新了 Xcode 中的一个 xib 文件，它适用于 iPhone/iPad 模拟器，但是当我尝试在设备 (iPhone) 上运行时，它仍然显示旧界面。

我尝试在设备上删除应用程序，在 Xcode 中清理项目并再次在设备上运行它。好几次。但仍然显示旧的 xib 文件 UI。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:29:33.280

如果清理项目目标并重新安装不起作用，请尝试更改设备的区域设置或重新启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:55:58.733

两种可能的解决方案： 1\. 查看本地化的 xib 文件 - 也许您忘记了一个 2\. 清除派生数据。

# python - 切片numpy数组时使用python的逻辑运算符

> ID：12236455
> 
> 赞同：4
> 
> 时间：2012-09-02T13:48:15.453
> 
> 标签：python, arrays, slice

我想对二维 numpy 数组执行切片：

```
type1_c = type1_c[
    (type1_c[:,10]==2) or
    (type1_c[:,10]==3) or
    (type1_c[:,10]==4) or
    (type1_c[:,10]==5) or
    (type1_c[:,10]==6)
] 
```

语法看起来不错；但是我收到以下错误消息：'具有多个元素的数组的真值不明确。使用 a.any() 或 a.all()'

我真的不明白出了什么问题。任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T14:08:52.380

`or`当它在两个标量之间时是明确的，但是正确的向量泛化是什么？if`x == array([0, 0])`和`y == array([0,1])`, 应该`x or y`是 (1) 假，因为并非所有成对项`or`一起为真，(2) 真，因为至少有一个成对`or`结果为真， (3) `array([0, 1])`，因为那是 a 的成对结果`or`，(4) `array([0, 0])`, 因为`[0,0] or [0,1]`会返回，`[0,0]`因为非空列表是真实的，那么`array`s 应该是吗？

您可以`|`在此处使用，并将其视为按位问题：

```
>>> import numpy as np
>>> vec = np.arange(10)
>>> vec[(vec == 2) | (vec == 7)]
array([2, 7]) 
```

显式使用`numpy`s 向量化逻辑或：

```
>>> np.logical_or(vec==3, vec==5)
array([False, False, False,  True, False,  True, False, False, False, False], dtype=bool)
>>> vec[np.logical_or(vec==3, vec==5)]
array([3, 5]) 
```

或 use `in1d`，这在这里效率更高：

```
>>> np.in1d(vec, [2, 7])
array([False, False,  True, False, False, False, False,  True, False, False], dtype=bool)
>>> vec[np.in1d(vec, [2, 7])]
array([2, 7]) 
```

# c# - 在 WebBrowser 控件中加载符号

> ID：12236456
> 
> 赞同：0
> 
> 时间：2012-09-02T13:48:25.907
> 
> 标签：c#, .net, browser, webbrowser-control

当我的客户等待页面加载时，我想在我的网络浏览器中向我的客户显示一个大的圆形加载符号。是否可以使用 Visual Studio 中的 webbrowser 工具？如果可能的话怎么办？我正在使用 c#。任何建议将不胜感激。谢谢..：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:20:56.030

您可以使用以下代码。

基本思想是检查 WebBrowser 控件的 ProgressChanged 事件并在 WebBrowser 控件上显示一个 PictureBox。

```
 PictureBox pb = new PictureBox();
    public Form6()
    {
        InitializeComponent();
        pb.Image = WindowsFormsApplication1.Properties.Resources.loading7;
        pb.Visible = false;
        pb.Width = pb.Image.Width;
        pb.Height = pb.Image.Height;
        this.Controls.Add(pb);
    }

    private void webBrowser1_ProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
    {
        if (e.CurrentProgress < e.MaximumProgress)
        {
            if (!pb.Visible)
            {
                int x = webBrowser1.Left + ((webBrowser1.Width - pb.Width) / 2);
                int y = webBrowser1.Top + ((webBrowser1.Height - pb.Height) / 2);
                pb.Location = new Point(x, y);
                pb.BringToFront();
                pb.Visible = true;
            }
        }
        else
        {
            pb.Visible = false;
        }
    } 
```

# php - 将数组转换为 UTF-8 吗？PHP JSON

> ID：12236459
> 
> 赞同：6
> 
> 时间：2012-09-02T13:48:39.870
> 
> 标签：php, arrays, json

我有由 PHP 生成的多维数组，其中包含来自数据库的数据，但我有像“č ć š đ ž”这样的字符，当我尝试在 json 中输出它时，他只是返回 null，我对此做了一些阅读，它说 JSON仅适用于 UTF-8。那么如何在 UTF-8 中转换这些数组呢？但我仍然需要和？

这是我的脚本的代码

```
 $sql_main = mysql_connect(DB_HOST, DB_UNM, DB_PSW);
    ($sql_main)? mysql_select_db(DB_NM) : mysql_error();

    $APP_URL_ACCESS = $_GET['app_access_key'];

    $sql_app = mysql_query("SELECT * FROM app_sys WHERE APP_OW_C='$APP_URL_ACCESS'") or die(mysql_error());

    if(mysql_num_rows($sql_app)==1){

        while($row = mysql_fetch_array($sql_app)){
        $APP_UA_ID          = $row['APP_UA_ID'];
        $APP_NM             = $row['APP_NM'];
        $APP_H_DMN          = $row['APP_H_DMN'];
        $APP_H              = $row['APP_H'];
        $APP_H_DB_UNM       = $row['APP_H_DB_UNM'];
        $APP_DB_NM          = $row['APP_DB_NM'];
        $APP_H_DB_PSW       = $row['APP_H_DB_PSW'];
        $APP_H_DB_SRV       = $row['APP_H_DB_SRV'];
        $APP_ACTIVE         = $row['APP_ACTIVE'];
        $APP_OW_C           = $row['APP_OW_C'];

    }
    $ROW_APP[] = array(
                        'APP_UA_ID' => $APP_UA_ID,
                        'APP_PERMISSION' => $APP_ACTIVE,
                        'APP_KEY' => $APP_OW_C);
    $APP_ARRAY[''] = $ROW_APP;

    ($APP_ACTIVE == '1')? $sql_connect_app = mysql_connect($APP_H_DB_SRV, $APP_H_DB_UNM, $APP_H_DB_PSW) && mysql_select_db($APP_DB_NM): $_MSG = "Application Is Not Active"; 

    $sql_news = mysql_query("SELECT * FROM news  ORDER BY id DESC LIMIT 10") or die(mysql_error());
    while($row = mysql_fetch_array($sql_news, MYSQL_ASSOC)){
            //$display_json['data'] = array(
                //'id' => $row['id'],
    //          'title' => $row['title'],
        //      'story' => $row['story'],
        //      'img' => $row['img'],
            //  'author' => $row['author'],
                //'datetime' => $row['datetime'],
                //'shorten_story' => substr($row['story'], 0, 150) . '...'); */

            $ROW_APP_DATA[] = $row; 
    //

}

$sql_news = mysql_query("SELECT * FROM actual  ORDER BY id DESC LIMIT 10") or die(mysql_error());
while($row = mysql_fetch_array($sql_news, MYSQL_ASSOC)){
        /*$display_json['data'] = array(
            'id' => $row['id'],
            'title' => $row['title'],
            'story' => $row['story'],
            'img' => $row['img'],
            'author' => $row['author'],
            'datetime' => $row['datetime'],
            'shorten_story' => substr($row['story'], 0, 150) . '...'); */
            $ROW_APP_THIRDPART[] = $row;    
    //

}

$JSON_ARRAY_APP['application'] = $ROW_APP;
$JSON_ARRAY_DATA_1['news'] = $ROW_APP_DATA;
$JSON_ARRAY_DATA_2['actual'] = $ROW_APP_THIRDPART;
$JSON_ARRAY_DATA['data'] = array_merge($JSON_ARRAY_DATA_1, $JSON_ARRAY_DATA_2);
$JSON_OUTPUT = array_merge($JSON_ARRAY_APP, $JSON_ARRAY_DATA);
echo json_encode($JSON_OUTPUT);

}else{
exit(); 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-17T11:08:27.620

我发现`iconv`这是将字符集转换为 UTF-8 的最佳方法。您可以使用 PHP`array_walk_recursive`来处理多维数组：

```
$array = array(); // This is your multidimensional array

array_walk_recursive($array, function(&$value, $key) {
    if (is_string($value)) {
        $value = iconv('windows-1252', 'utf-8', $value);
    }
}); 
```

您可以更改`windows-1252`为要转换的任何字符集。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-16T05:31:54.110

试试这个功能：

```
function utf8_converter($array)
{
    array_walk_recursive($array, function(&$item, $key){
        if(!mb_detect_encoding($item, 'utf-8', true)){
            $item = utf8_encode($item);
        }
    });

    return $array;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T10:19:27.887

如果是多维数组，则使用 foreach 循环并在 foreach 中使用此行假设

```
foreach ($your_array as $line){
   $line = array_map("utf8_decode", $line);    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T14:05:41.287

试试这个 PHP 函数，您只需传入要编码的数组即可。

```
function convertArrayKeysToUtf8(array $array) { 
$convertedArray = array(); 
foreach($array as $key => $value) { 
  if(!mb_check_encoding($key, 'UTF-8')) $key = utf8_encode($key); 
  if(is_array($value)) $value = $this->convertArrayKeysToUtf8($value); 

  $convertedArray[$key] = $value; 
} 
return $convertedArray; 
  } 
```

Ps 查看 php.net 以了解其他 utf-8 编码方法的想法，但这在过去对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T14:08:14.983

```
$row = utf8_encode( $row );
convertUtf8ToHtml( $row );
$ROW_APP_DATA[] = $row;

See function below:

// converts a UTF8-string into HTML entities
    //  - $utf8:        the UTF8-string to convert
    //  - $encodeTags:  booloean. TRUE will convert '<' to '&lt;'
    //  - return:       returns the converted HTML-string
    function convertUtf8ToHtml(&$utf8, $encodeTags = false ) 
    {
        if( !is_string( $utf8 ) || empty( $utf8 ))
         { return false; }
        $result = '';
        for ($i = 0; $i < strlen($utf8); $i++) {
            $char = $utf8[$i];
            $ascii = ord($char);
            if ($ascii < 128) {
                // one-byte character
                $result .= ($encodeTags) ? htmlentities($char) : $char;
            } else if ($ascii < 192) {
                // non-utf8 character || not a start byte
            } else if ($ascii < 224) {
                // two-byte character
                $result .= htmlentities(substr($utf8, $i, 2), ENT_QUOTES, 'UTF-8');
                $i++;
            } else if ($ascii < 240) {
                // three-byte character
                $ascii1 = ord($utf8[$i+1]);
                $ascii2 = ord($utf8[$i+2]);
                $unicode = (15 & $ascii) * 4096 +
                           (63 & $ascii1) * 64 +
                           (63 & $ascii2);
                $result .= '&#$unicode;';
                $i += 2;
            } else if ($ascii < 248) {
                // four-byte character
                $ascii1 = ord($utf8[$i+1]);
                $ascii2 = ord($utf8[$i+2]);
                $ascii3 = ord($utf8[$i+3]);
                $unicode = (15 & $ascii) * 262144 +
                           (63 & $ascii1) * 4096 +
                           (63 & $ascii2) * 64 +
                           (63 & $ascii3);
                $result .= '&#$unicode;';
                $i += 3;
            }
        }

        $utf8 = $result;
        return true;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-15T02:22:31.827

我也遇到了这个问题，在 2016 年你不需要创建函数，只需使用“ [mb_convert_variables](http://php.net/manual/en/function.mb-convert-variables.php) ”

`mb_convert_variables('UTF-8', 'original encode', array or object)`

对于遇到这种情况的任何人，也是。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-10-22T19:34:46.220

我不使用函数，我在每个分配中使用转换，例如：

```
$APP_UA_ID = utf8_encode($row['APP_UA_ID']); 
```

# javascript - 将 JavaScript 字符串转换为整数

> ID：12236460
> 
> 赞同：1
> 
> 时间：2012-09-02T13:48:42.207
> 
> 标签：javascript

我有一个以字符串形式提供的日期，例如 09/12/2012。

如果字符串是今天，我希望显示“今天”，否则我希望显示 09/12/2012。

下面显示的我的方法的问题是像 09 这样的月份被解析为 0 而不是 9。

做这个的最好方式是什么？谢谢

```
var currentDate = new Date();
dateText='09/12/2012';
var a=dateText.split('/');// mdY
$("#date").text(((parseInt(a[0])-1==currentDate.getMonth()&&parseInt(a[1])==currentDate.getDate()&&parseInt(a[2])==currentDate.getFullYear())?'Today':dateText)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T13:52:48.087

将第二个参数传递给`parseInt()`- 具体来说，10。

```
$("#date").text(((parseInt(a[0], 10)-1==currentDate.getMonth()&&parseInt(a[1], 10)==currentDate.getDate()&&parseInt(a[2], 10)==currentDate.getFullYear())?'Today':dateText)); 
```

第二个参数告诉函数用于解释表达式的基数。如果您不明确传递它，它将使用旧的 C 约定，这将导致以零开头的数字被解释为以 8 为基数的常量。这会导致`08`和的问题`09`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:04:16.757

这是一个小提琴：http: [//jsfiddle.net/pfHA7/1/](http://jsfiddle.net/pfHA7/1/)

```
function today()
{
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!

    var yyyy = today.getFullYear();
    if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} var today = mm+'/'+dd+'/'+yyyy;
    return today;
}

var dateText = '09/12/2012';

$("#date").text( today() == dateText ? 'Today' : dateText );​ 
```

# javascript - chrome.serial 在 Chrome 打包的应用程序中不可用

> ID：12236462
> 
> 赞同：0
> 
> 时间：2012-09-02T13:49:09.257
> 
> 标签：javascript, google-chrome, serial-port, arduino

我正在构建一个带有 Arduino 串行连接的 Chrome 打包应用程序。类似于Erik Kay 和 Mihai Parparita在最新的[Google I/O](http://en.wikipedia.org/wiki/Google_I/O)、*[Chrome 应用程序的下一次进化中展示的内容。](https://developers.google.com/events/io/sessions/gooio2012/200/)*

我在[OS X 10.8](http://en.wikipedia.org/wiki/OS_X_Mountain_Lion) (Mountain Lion)上使用最新的[Canary 版本](http://en.wikipedia.org/wiki/Google_Chrome#Release_channels_and_updates)(23.0.1254.0 )。

但是，“chrome”对象缺少“serial”成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:32:38.877

manifest.json 中缺少“串行”权限：

```
 "permissions": ["serial"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T15:05:38.550

我已经成功地从一个旨在与 arduino 一起使用的打包插件连接到串行，但是编译代码需要一个服务器。

然后Chrome插件就在这里：

[https://github.com/DecodedCo/ArduinoInTheBrowser](https://github.com/DecodedCo/ArduinoInTheBrowser)

# web - 网络托管和 websocket 技术

> ID：12236465
> 
> 赞同：5
> 
> 时间：2012-09-02T13:49:33.253
> 
> 标签：web, hosting, websocket

我想编写一个需要 websocket 服务器的 web 应用程序。我想在一些著名的网络托管服务提供商（例如 1&1）上托管这个 websocket 服务器。我应该使用哪个网络托管服务提供商？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T17:16:50.187

如果您想使用可以随意启动和停止的 websocket 服务器，我更愿意推荐云解决方案。它很便宜，可以让您直接与服务器交互，这对于更传统的托管服务提供商来说很可能是不可能的。我自己只使用过[Amazon Web Services](http://aws.amazon.com)和[Google App Engine](http://appspot.com)，它们都有一个免费层，您可以使用它来构建和测试您的 websocket 应用程序。还有更多的供应商，也可以看看像[Nodejitsu](http://nodejitsu.com/)这样的 PaaS 服务。这完全取决于我猜你想使用什么特定的技术。

（注意：AWS 允许您通过 SSH 连接到您的实例，并且您可以使用您想要的任何平台/技术，而 GAE 是基于 Web 的并且仅限于 Go、Java 和 Python。这并不意味着 AWS 更好，这再次取决于您的情况。 )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-25T22:29:31.800

您可以通过 www.gearhost.com 上的 GearHost 将 WebSockets 用于您的 .NET 应用程序。它是免费的，并为您提供 100 个免费 CloudSites 和 100 个免费数据库。

# objective-c - 召回后 NSMutableArray 部分为空

> ID：12236468
> 
> 赞同：2
> 
> 时间：2012-09-02T13:50:07.107
> 
> 标签：objective-c, nsmutablearray

我的视图控制器中有一个属性 NSMutableArray

ContactsViewController.h：

```
@interface ContactsViewController : UIViewController <UITableViewDelegate,      UITableViewDataSource>

@property (nonatomic,strong) NSMutableArray *contacts;
...
@end 
```

在这个视图控制器中，我在“viewDidLoad”上填充了我的数组

ContactsViewController.m:

```
@implementation ContactsViewController

@synthesize contacts;
...
...
- (void)viewDidLoad
{
  [super viewDidLoad];
  DBhandler *handler = [[DBhandler alloc] init];

  if    (contacts)
    [contacts removeAllObjects];
  else
    contacts = [[NSMutableArray alloc] init];    
  // Get all my contacts that are in my core data file
  // This function returns a NSMutableArray
  contacts=[handler getContacts];

//loop through contacts of addressbook when user wants that
if ([allContactSwitch isOn])
{

    //open link to addressbook
    ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

    for( CFIndex personIndex = 0; personIndex < nPeople; personIndex++ ) {            
        ABRecordRef refVal = CFArrayGetValueAtIndex( allPeople, personIndex );            
        Boolean newContact = true;
        // check if contact is already in Core data File
        for( CFIndex i = 0; i < [contacts count]; i++ ) {
            contact *checkcontact=[contacts objectAtIndex:i];
            if (personIndex==checkcontact.personRef)
                newContact = FALSE;
        }
        if (newContact)
        {
            contact *dummycontact = [[contact alloc]init];
            dummycontact.personRef = personIndex;
            dummycontact.contactName = (__bridge NSString *)(ABRecordCopyCompositeName( refVal ));
            // Add contact to array 
            [contacts addObject:dummycontact];
        }
    }
}
// Just to check, the entire array looks fine!  
for( CFIndex i = 0; i < [contacts count]; i++ ) {
    contact *dummycontact=[contacts objectAtIndex:i];
    NSLog(@"Name after build: %@", dummycontact.contactName);
}

} 
```

但后来当表格视图的不同单元格被填充时，来自 [handle getContacts] 的 NSMutableArray 部分为空：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
//NSLog(@"cell number %i",indexPath.row);
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {        
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault
                                     reuseIdentifier:CellIdentifier];
}

// Set up the cell...
contact *dummycontact=[contacts objectAtIndex:indexPath.row];
// Only part of the objects in the array contacts contain data!
NSLog(@"Name cell: %@ %i", dummycontact.contactName, indexPath.row);

cell.textLabel.text = dummycontact.contactName;

return cell;
} 
```

这可能与同时清除 [handle getContacts] 中创建的对象的内存这一事实有关。但我不知道如何解决这个问题。我尝试克隆或复制 [handle get contacts] 的输出，但没有成功。要完成功能“getContacts”：

```
-(NSMutableArray*)getContacts{

NSMutableArray *contacts = [[NSMutableArray alloc] init];

NSManagedObjectContext *context = [self managedObjectContext];
DBcontact *contact = [NSEntityDescription
                      insertNewObjectForEntityForName:@"WhappContacts"
                      inManagedObjectContext:context];
// Test listing all FailedBankInfos from the store
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"WhappContacts"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];
NSError *error;
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
for (contact in fetchedObjects) {
   [contacts addObject:contact];
   // Data seems fine here.
   NSLog(@"Name in: %@", contact.contactName);  
}
return contacts;
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T07:23:49.983

另一种方法是将联系信息放在字典中：

```
- (NSMutableArray*)getContacts {
    NSMutableArray *contacts = [[NSMutableArray alloc] init];

    NSManagedObjectContext *context = [self managedObjectContext];
    DBcontact *contact = [NSEntityDescription insertNewObjectForEntityForName:@"WhappContacts" inManagedObjectContext:context];
    // Test listing all FailedBankInfos from the store
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"WhappContacts" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];
    NSError *error;
    NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
    for (contact in fetchedObjects) {
        NSDictionary *contactDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                contact.contactName, @"contactName", nil]; //add other necessary contact information

        [contacts addObject:contactDict];
        // Data seems fine here.
        NSLog(@"Name in: %@", contact.contactName);  
    }

    return contacts;
} 
```

并检索信息：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //NSLog(@"cell number %i",indexPath.row);
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {        
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Set up the cell...
    NSDictionary *dummycontact = [contacts objectAtIndex:indexPath.row];
    // Only part of the objects in the array contacts contain data!
    NSLog(@"Name cell: %@ %i", [dummycontact objectForKey:@"contactName"], indexPath.row);

    cell.textLabel.text = [dummycontact objectForKey:@"contactName"];

    return cell;
} 
```

# java - 根据循环中的位置替换字符

> ID：12236470
> 
> 赞同：0
> 
> 时间：2012-09-02T13:50:44.497
> 
> 标签：java, netbeans

我正忙于一个刽子手应用程序，我已经到了现在必须显示秘密单词的地步……现在我正在考虑创建两个字符串，它们是从文本文件中检索随机单词的原始字符串和隐藏的秘密词......问题是我不知道如何在'-'中隐藏一个词

所以我创建了以下两个字符串

```
String original = readWord();
String secret = new String(new char[original.length()]).replace('\0', '-'); 
```

现在我的想法是在原始字符串中找到字符的位置，然后用秘密字符串中的字符替换'-'

现在的问题是当我的原始单词是例如“大象”时，所以我找到了一个循环来找到搜索到的字符的位置

```
String s = "elephant";
int pos = s.indexOf('e');
while (pos > -1) {
System.out.println(pos);
pos = s.indexOf('e', pos + 1); 
```

现在这个循环返回

```
0
2 
```

我的问题是如何使用此循环替换秘密字符串中的“-”是否返回超过 1 个位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:57:22.003

因为`String`是不可变的，你可以`StringBuilder`用来构建一个新的字符串：

```
StringBuilder builder = new StringBuilder(secret);
for (int i = 0; i < original.length(); i++) {
    if (original.charAt(i) == guessLetter) {
        builder.setCharAt(i, guessLetter);
    }
}
secret = builder.toString(); 
```

您将使用 builder.toString() 作为您的掩码单词，直到您选择一个新单词。当你得到一个新单词时，你会将被屏蔽的单词重置为`'-------'`etc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:32:22.733

您可以使用

String Str = new String("欢迎来到 Tutorialspoint.com");

// 所有出现的 'o' 都替换为 'T'

System.out.println(Str.replace('o', 'T'));

# facebook - 如何在 facebook 移动应用上向 facebook 好友发送应用邀请？

> ID：12236471
> 
> 赞同：0
> 
> 时间：2012-09-02T13:50:48.547
> 
> 标签：facebook, center

我有一个网站和一个 facebook 画布应用程序。网站上的用户可以创建内容，然后邀请他们的 Facebook 朋友查看。当他们这样做时，他们的朋友将在 facebook（在 facebook.com 上）收到通知，并且该链接会将他们带到我的 facebook 画布页面。工作正常。

现在，我想为使用 facebook 移动应用程序（不是 facebook.com）的朋友做同样的事情。因此，如果我网站上的用户邀请朋友，我希望该朋友能够在他们的 facebook 移动应用程序中看到通知，然后单击将他们带到我的网站以查看内容的链接。我的网站没有移动应用程序，所以我希望通过网络浏览器将链接转到我的网站。

这可能吗？

如果没有，让您的网站允许用户邀请 Facebook 朋友，然后这些朋友在 facebook 移动应用程序上收到通知的最佳方式是什么？

这很重要的原因是因为我网站上的用户将创建对时间敏感的内容，所以我不希望他们必须等待他们的朋友在他们的 facebook.com 上的计算机旁。我希望他们的朋友在世界任何地方打开 facebook 移动应用程序时都能立即获得它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:42:46.830

此代码可帮助您发布、发送消息以及向您的朋友发送请求：

**头标：**

```
<script type="text/javascript">
  function logResponse(response) {
    if (console && console.log) {
      console.log('The response was', response);
    }
  }

  $(function(){
    // Set up so we handle click on the buttons
    $('#postToWall').click(function() {
      FB.ui(
        {
          method : 'feed',
          link   : $(this).attr('data-url')
        },
        function (response) {
          // If response is null the user canceled the dialog
          if (response != null) {
            logResponse(response);
          }
        }
      );
    });

    $('#sendToFriends').click(function() {
      FB.ui(
        {
          method : 'send',
          link   : $(this).attr('data-url')
        },
        function (response) {
          // If response is null the user canceled the dialog
          if (response != null) {
            logResponse(response);
          }
        }
      );
    });

    $('#sendRequest').click(function() {
      FB.ui(
        {
          method  : 'apprequests',
          message : $(this).attr('data-message')
        },
        function (response) {
          // If response is null the user canceled the dialog
          if (response != null) {
            logResponse(response);
          }
        }
      );
    });
  });
</script> 
```

**身体标签：**

```
<body>
<div id="fb-root"></div>
<script type="text/javascript">
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'xxxxxxxxxxxxxxxxxxx', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true // parse XFBML
    });

    // Listen to the auth.login which will be called when the user logs in
    // using the Login button
    FB.Event.subscribe('auth.login', function(response) {
      // We want to reload the page now so PHP can read the cookie that the
      // Javascript SDK sat. But we don't want to use
      // window.location.reload() because if this is in a canvas there was a
      // post made to this page and a reload will trigger a message to the
      // user asking if they want to send data again.
      window.location = window.location;
    });

    FB.Canvas.setAutoGrow();
  };

  // Load the SDK Asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<header class="clearfix">
  <?php if (isset($basic)) { ?>
  <p id="picture" style="background-image: url(https://graph.facebook.com/<?php echo he($user_id); ?>/picture?type=normal)"></p>

  <div>
    <h1>Welcome, <strong><?php echo he(idx($basic, 'name')); ?></strong></h1>
    <p class="tagline">
      This is your app
      <a href="<?php echo he(idx($app_info, 'link'));?>" target="_top"><?php echo he($app_name); ?></a>
    </p>

    <div id="share-app">
      <p>Share your app:</p>
      <ul>
        <li>
          <a href="#" class="facebook-button" id="postToWall" data-url="<?php echo AppInfo::getUrl(); ?>">
            <span class="plus">Post to Wall</span>
          </a>
        </li>
        <li>
          <a href="#" class="facebook-button speech-bubble" id="sendToFriends" data-url="<?php echo AppInfo::getUrl(); ?>">
            <span class="speech-bubble">Send Message</span>
          </a>
        </li>
        <li>
          <a href="#" class="facebook-button apprequests" id="sendRequest" data-message="Test this awesome app">
            <span class="apprequests">Send Requests</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <?php } else { ?>
  <div>
    <h1>Welcome</h1>
    <div class="fb-login-button" data-scope="user_likes,user_photos"></div>
  </div>
  <?php } ?>
</header> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:12:08.673

来自 Facebook[移动网络教程](https://developers.facebook.com/docs/guides/mobile/web/)：

```
function sendRequest() {
  FB.ui({
    method: 'apprequests',
    message: 'invites you to learn how to make your mobile web app social',
  }, 
  function(response) {
    console.log('sendRequest response: ', response);
  });
} 
```

有关更多详细信息，请参阅[请求对话框文档](https://developers.facebook.com/docs/reference/dialogs/requests/)。

# python - 如何使用postgresql删除python中三列组合中的重复项

> ID：12236473
> 
> 赞同：3
> 
> 时间：2012-09-02T13:50:59.927
> 
> 标签：python, database, postgresql

只有当三列（名称、价格和新价格）与相同的数据匹配时，我才想删除重复的数据。但是在另一个python脚本中。

因此数据可以插入到数据库中，但是使用其他 python 脚本，我想通过 cron 作业删除这些重复数据。

所以在这种情况下：

```
cur.execute("INSERT INTO cars VALUES(8,'Hummer',41400, 49747)")

cur.execute("INSERT INTO cars VALUES(9,'Volkswagen',21600, 36456)") 
```

是重复的。插入数据的示例脚本：

```
import psycopg2
import sys

con = None

try:
    con = psycopg2.connect(database='testdb', user='janbodnar')    
    cur = con.cursor()

    cur.execute("CREATE TABLE cars(id INT PRIMARY KEY, name VARCHAR(20), price INT, new price INT)")
    cur.execute("INSERT INTO cars VALUES(1,'Audi',52642, 98484)")
    cur.execute("INSERT INTO cars VALUES(2,'Mercedes',57127, 874897)")
    cur.execute("INSERT INTO cars VALUES(3,'Skoda',9000, 439788)")
    cur.execute("INSERT INTO cars VALUES(4,'Volvo',29000, 743878)")
    cur.execute("INSERT INTO cars VALUES(5,'Bentley',350000, 434684)")
    cur.execute("INSERT INTO cars VALUES(6,'Citroen',21000, 43874)")
    cur.execute("INSERT INTO cars VALUES(7,'Hummer',41400, 49747)")
    cur.execute("INSERT INTO cars VALUES(8,'Hummer',41400, 49747)")
    cur.execute("INSERT INTO cars VALUES(9,'Volkswagen',21600, 36456)")
    cur.execute("INSERT INTO cars VALUES(10,'Volkswagen',21600, 36456)")

    con.commit()

except psycopg2.DatabaseError, e:
    if con:
        con.rollback()

    print 'Error %s' % e    
    sys.exit(1

finally:    
    if con:
        con.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T14:26:02.677

您可以在一个语句中执行此操作，而无需额外往返服务器。

```
DELETE FROM cars
USING (
    SELECT id, row_number() OVER (PARTITION BY name, price, new_price
                                  ORDER BY id) AS rn
    FROM   cars
    ) x
WHERE cars.id = x.id
AND   x.rn > 1; 
```

[窗口函数`row_number()`](http://www.postgresql.org/docs/current/interactive/functions-window.html#FUNCTIONS-WINDOW-TABLE)需要 PostgreSQL 8.4 或更高版本。
在一组骗子中，最小的 id 幸存下来。
请注意，我更改`"new price"`为`new_price`.

或者使用`EXISTS`半连接，@wildplasser 作为评论发布了同样的效果。

* * *

或者，根据 CTE 奉献者 @wildplasser 的特殊要求，使用 CTE 而不是子查询 ... :)

```
WITH x AS (
    SELECT id, row_number() OVER (PARTITION BY name, price, new_price
                                  ORDER BY id) AS rn
    FROM   cars
    )
DELETE FROM cars
USING  x
WHERE  cars.id = x.id
AND    x.rn > 1; 
```

[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)需要 Postgres 9.1 或更高版本。
这种形式的执行与带有子查询的形式大致相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:09:21.683

使用`GROUP BY`SQL 语句以及初始主键来识别行：

```
duplicate_query = '''\
SELECT MIN(id), "name", price, "new price"
FROM cars
GROUP BY "name", price, "new price"
HAVING COUNT(ID) > 1
''' 
```

`id`上面的查询为有多个主键的每组 (name, price, "new price") 行选择最低的主键`id`。对于您的示例数据，这将返回：

```
7, 'Hummer', 41400, 49747
9, 'Volkswagen', 21600, 36456 
```

然后，您可以使用返回的数据删除重复项：

```
delete_dupes = '''
DELETE
FROM cars
WHERE 
    "name"=%(name)s AND price=%(price)s AND "new price"=%(newprice)s AND
    id > %(id)s
'''

cur.execute(duplicate_query)
dupes = cur.fetchall()
cur.executemany(delete_dupes, [
    dict(name=r[1], price=r[2], newprice=r[3], id=r[0])
    for r in dupes]) 
```

请注意，我们删除了主键`id`大于`id`具有相同 3 列的第一行的任何行。对于第一个欺骗，只有`id`8 的行将匹配，对于第二个欺骗，具有`id`10 个匹配的行。

这确实对找到的每个欺骗进行了单独的删除。`WHERE EXISTS`您可以将其与子选择查询组合成一个语句：

```
delete_dupes = '''\
DELETE FROM cars cdel
WHERE EXISTS (
    SELECT *
    FROM cars cex
    WHERE 
        cex."name" = cdel."name" AND 
        cex.price = cdel.price AND
        cex."new price" = cdel."new price" AND
        cex.id > cdel.id
)
'''

cur.execute(delete_dupes) 
```

这指示 PostgreSQL 删除任何具有相同名称、价格和新价格但主键高于当前行的其他行的行。

# python - 如何将 cProfile 与 nosetest --with-profile 一起使用？

> ID：12236474
> 
> 赞同：13
> 
> 时间：2012-09-02T13:51:06.017
> 
> 标签：python, nose, cprofile

> 鼻子测试 --with-profile --profile-stats-file 输出

输出不能被runsnake读取，因为nosetest使用hotshot，如果我想生成一个可以用runsnake读取的文件，我需要把它转换成这样：

> st = hotshot.stats.load('输出')
> 
> st.dump_stats('output_new')

我可以直接使用 cProfile 运行测试以使用 runnake 读取吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-22T20:25:27.357

根据@squid 的答案，您可以使用一个名为*nose*的插件[`nose-cprof`](https://pypi.python.org/pypi/nose-cprof)来用cProfile 替换nose 默认分析器hotshot。

要安装它：

```
pip install nose-cprof 
```

然后像这样调用鼻子：

```
nosetests --with-cprofile 
```

它应该生成一个 cProfile 输出文件，然后您可以使用`runsnakerun`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-18T14:31:23.390

@cihanpesend 的回答对我来说不太奏效（cProfile 找不到'nosetests'），但我确实在 Linux 上使用：

```
python -m cProfile -o profile.out `which nosetests` . 
```

生成的输出在 runnake 中运行良好。

（大概在 Windows 上，您可以替换`which nosetests`为您的 nosetests 顶级 python 脚本的硬编码路径。）

我*认为*你是对的，nosetests 的热门分析器的输出与 runnake 不兼容。当然，对我来说，这两个开箱即用也不是很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-03T14:56:30.813

我没有关于nosetest 的信息，除了它是python 项目。所以;

```
python -m cProfile -o outputfile nosetest 
```

然后，

```
runsnake outputfile 
```

RunSnakeRun 对于可视化分析器非常有用。

注意：要运行`runsnake`，必须安装 wx 和 numpy。

更新：来自 omikron 的评论；runsnakerun 不支持 python3 配置文件输出。（我没试过）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-22T17:09:50.910

或者你可以试试nose-cprof插件：　[https ://github.com/msherry/nose-cprof](https://github.com/msherry/nose-cprof)　

它用 cProfile 代替 hotshot

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-14T12:47:51.090

与`pyprof2calltree`：

```
$ pip install pyprof2calltree
$ nosetests --with-cprofile --profile-stats=profile.out tests/
$ pyprof2calltree -i profile.out -k 
```

与`xdot`：

```
$ sudo apt install xdot
$ gprof2dot -f pstats profile.out | dot -Tpng -o profile.png 
```

# asp.net-mvc - 会话状态在 asp.net 网络场中丢失

> ID：12236475
> 
> 赞同：4
> 
> 时间：2012-09-02T13:51:07.060
> 
> 标签：asp.net-mvc, windows-server-2008, round-robin, session-state-server

我已经忙了几个月了。

我目前有 2 个服务器用于 1 个网站。使用轮询 dns，我发现一开始一切正常（检查它更改的网站的 ip，但我可以继续我的会话），但过了一会儿我失去了我的会话，似乎无法读取表单身份验证 cookie 并且是被丢弃。（假设）但这并不总是发生。只有某些时候。

我正在使用 iis7 共享配置，我设置了机器密钥，并且我正在使用指向其中一台服务器的 stateserver，并且我验证了 stateserver 在两台服务器上都可以正常工作。

我读了一些关于 IIS 应用程序路径的东西，但我真的不知道这是什么意思，是 webapp 的路径，还是安装 IIS 的路径？在这两种情况下，它们是相同的。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:33:20.363

对于面临同样问题的任何人，我将自己回答这个问题。一切设置正确，但机器密钥应位于 system.web 下的 web.config 中。由于某种原因，通过 iis 7 生成密钥不起作用，我使用在线工具生成它：http: [//aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)

因此，要在 iis7 上进行负载平衡和设置多个服务器，您应该：

*   使用 stateserver out-proc（stateserver 或 sql server）并让所有服务器都指向该 stateserver（例如：stateConnectionString="tcpip=server1:42424"）
*   使用 iis 共享配置，以便您的所有服务器都指向 applicationhost.config 所在的共享。
*   生成机器密钥（不是通过 iis，只需使用在线工具！）
*   设置 NLB（或循环 DNS）并在您登录时通过刷新客户端上的 dns 来测试它，看看您的会话是否不会丢失。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:18:05.460

并且机器密钥特定于 .NET 版本。检查当前版本： 在 IIS 控制台的服务器级别，单击“操作”窗格中的“更改 .NET Framework 版本”。

# java - 是否有可能制作一种可以是不同事物的新变量？

> ID：12236478
> 
> 赞同：0
> 
> 时间：2012-09-02T13:51:45.657
> 
> 标签：java, variables

我想创建一个新变量，我可以使用它执行以下操作：

```
Variable v1 = 1;
Variable v2 = "Test";
Variable v3 = 7.31; 
```

这是可能的，还是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:54:44.503

如果您利用自动装箱（Java SE 5.0 及更高版本），那么每一个都可以存储在一个`Object`（即所有 Java 类型的基类）中：

```
public class foo {
    static public void main(String[] params) {
        Object v1 = 1;
        Object v2 = "Test";
        Object v3 = 7.31;

        System.out.println(v1 + " " + v1.getClass().getName());
        System.out.println(v2 + " " + v2.getClass().getName());
        System.out.println(v3 + " " + v3.getClass().getName());
    }
} 
```

输出：

```
% java foo
1 java.lang.Integer
Test java.lang.String
7.31 java.lang.Double 
```

不过，这并不一定是个好主意！

上面显示的输出显示了虽然每个变量都被*声明*为`Object`，但它们的真实类名更适合它们的类型。只是因为Java 中的*每个*类都派生自`Object`声明可以这样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:56:34.693

有可能的。检查下面的代码：

```
 Object a;
    Object b;
    Object c;

    a = 1;
    b = "abc";
    c = 1.72d; 
```

或其他方式：

```
 Object a;

    a = 1;
    a = "abc";
    a = 1.72d; 
```

在这种情况下，我们观察[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)，当一个值被包装成一个合适的对象类型时。

由于`Object`类是所有 java 对象的父类，所以我们有一种方法来编写如上所述的代码。

# java - 带调度员的多次按键

> ID：12236479
> 
> 赞同：4
> 
> 时间：2012-09-02T13:51:50.660
> 
> 标签：java, swing, awt, keyevent

我应该如何修改调度程序类以捕获多个按键？现在我只想打印它们......

```
class MyDispatcher implements KeyEventDispatcher {
public boolean dispatchKeyEvent(KeyEvent e) {

if (e.getID() == KeyEvent.KEY_PRESSED) {
   System.out.println(e.getKeyChar());

} 

return false;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:18:05.067

我解决了我的问题：

```
class MyDispatcher implements KeyEventDispatcher {
ArrayList<String>typedKeys = new ArrayList<String>();
public boolean dispatchKeyEvent(KeyEvent e) {

if (e.getID() == KeyEvent.KEY_PRESSED) 
    typedKeys.add(""+e.getKeyChar());

if (e.getID() == KeyEvent.KEY_RELEASED) {
    String str = typedKeys+"";
    System.out.println(str.substring(1,str.length()-1).replaceAll(", ",""));
    typedKeys.clear();
 } 

return false;
}

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T14:33:30.330

> 如果用户键入`N+J`，我要打印`NJ`。

尝试同时按下`N`和`J`将导致一个`KeyEvent`接一个到达。一种方法是创建一个`enum Key`与此类[似的](http://robotchase.svn.sourceforge.net/viewvc/robotchase/trunk/src/org/gcs/robot/Key.java?revision=27&view=markup). 使用`EnumSet`，创建一个`Set current`. 随着`KEY_PRESSED`事件的到来，更新`current`以包括当前按下的键和新的键；随着`KEY_RELEASED`事件的到来，更新`current`以排除新的事件。该方法`current.equals()`将允许与游戏中使用的预定义键状态进行比较。请注意，`EnumSet`对于合理数量的键，实例是不可变的，但实际上很小。

# xcode - 日期到字符串的转换（NSDateFormatter）不起作用

> ID：12236480
> 
> 赞同：0
> 
> 时间：2012-09-02T13:51:57.670
> 
> 标签：xcode, sqlite

我正在开发一个 iOS 项目，通过 JSON 从 SQLite 检索数据。该表有一个名为“日期”的日期时间列。当我在 Xcode 中检索日期并打印出结果时，我看到“2012-09-02T16:30:00Z”。但是当我尝试使用 NSDateFormatter 转换它时，结果为空。

```
NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"EdMMM" options:0 locale:[NSLocale currentLocale]];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:formatString];

NSString *dateString = [dateFormatter stringFromDate:categoryAtIndex.date];
NSLog(@"%@ => %@", categoryAtIndex.date, dateString); 
```

上述输出：

```
2012-09-02T16:30:00Z => (null) 
```

而不是格式良好的日期字符串。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T19:16:27.447

感谢[mask8](https://stackoverflow.com/users/905214/mask8)，我发现这个问题与我的代码的另一部分有关。我[在 stackoverflow 上找到了这篇文章，](https://stackoverflow.com/questions/2937740/rails-dates-with-json)以解决更改通过 JSON 检索到的日期格式的方法。我还在[stackoverflow 上找到了另一篇文章，](https://stackoverflow.com/questions/302664/objective-c-and-sqlites-datetime-type)描述了如何处理从字符串到 NSDate 的转换，反之亦然。

# android - 安卓支持库

> ID：12236484
> 
> 赞同：1
> 
> 时间：2012-09-02T13:52:18.100
> 
> 标签：android, compatibility, android-support-library

当我想创建新的android项目时，一切都很好，但是在最后一步（关于活动）之后，eclipse说它有问题并说：

> 此模板依赖于未安装的 android Support 库，或者该模板依赖于比您安装的版本更新的版本。 [链接](http://developer.android.com/sdk/compatibility-library.html) 所需版本 8 已安装版本：未安装

如果我使用“升级/安装”底部，eclipse 说：Android Compatibility JAR not found。

我在网上找到了这个解决方案，但我无法使用它： 步骤：

1.  运行您的 Android SDK 管理器
2.  查找 Extras > support Library 并删除该特定库
3.  现在重新启动 Android SDK 管理器
4.  下载 Extras > support Library present

有一点很重要：我在伊朗，因为抵制，我们不能轻易下载。

我使用这些工具：

```
Java.SE.Development.Kit.v7.0.Update.5.x86_p30download.com.exe     
Eclipse:
   Version: Juno Release
   Build id: 20120614-1722

ADT-20.0.0
platform-tools_r13-windows.zip
android-2.3.3_r02-linux.zip
tools_r20-windows.zip 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:09:22.510

我认为您对解决问题的方法是正确的 - 您需要使用 SDK Manager 下载一个包。我试图上传我的库，但没有在任何文件上传服务中注册。所以我会推荐你​​使用一些 ananymizers 或类似 Tor ( [http://en.wikipedia.org/wiki/Tor](http://en.wikipedia.org/wiki/Tor) ) 并下载所有必要的库进行开发。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:59:09.593

这也发生在我身上，但现在通过右键单击`SDKManager.exe`然后`run as administrator`下载所需的包来解决

根据：[http ://comments.gmane.org/gmane.comp.handhelds.android.devel/220558](http://comments.gmane.org/gmane.comp.handhelds.android.devel/220558)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T15:12:28.893

我有同样的问题，所以我使用了代理。在 Eclipse 中转到：

```
windows-->preferences-->general-->network connections 
```

对于 SDK 管理器

在 Android SDK 管理器中转到：

```
Tools-->options-->enter your proxy 
```

现在您可以毫无问题地更新您的 eclipse 和 sdk 我希望这对您有用:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T14:57:40.050

尝试更新您的 ADT 插件（当前`20.0.3`），转到`Eclipse > Help > Check for Updates`，不确定这是否是`Linux`

# android - 使用后台服务进行内存管理

> ID：12236488
> 
> 赞同：0
> 
> 时间：2012-09-02T13:52:42.723
> 
> 标签：android, memory, memory-management, memory-leaks

我创建了一个创建后台服务的应用程序。当我关闭应用程序时，服务正在运行，当我返回以将其“绑定”（bindService）以进行通信时。

问题是当我关闭应用程序并重新进入时，它会显着增加正在使用的内存。花费 20Mb -> 24Mb，如果我出去又来 24Mb -> 28Mb，28Mb -> 30Mb ... 这样就破坏了应用程序。我没有位图。如果足够使用静态数组，但我已经测试过并且不是问题的根源。

当我完全关闭应用程序（包括服务）调用 System.exit(0) 并清理所有内存时，当然，我可以在服务关闭时继续运行时调用。我尝试调用垃圾收集器 (System.gc())，如果我注意到内存减少关闭，但是当您再次打开应用程序时，相同的内存会增加。

我将非常感谢您的帮助，再见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:58:41.463

考虑到我们掌握的信息，我怀疑问题是活动泄漏。你能检查两件事吗：

1.  仔细检查你是否使用可以存储的Activity Context（引用Activity）？特别是在服务方面。
2.  尝试做一个实验——在开发者设置中选择“不保留活动”——每次活动启动后内存会减少吗？

# java - 将整数对象添加到 hashSet

> ID：12236490
> 
> 赞同：3
> 
> 时间：2012-09-02T13:52:51.490
> 
> 标签：java, set, hashset

考虑以下代码：

```
6\.  Set<Integer> set = new HashSet<Integer>();
7\.  Integer i1 = 45;
8\.  Integer i2 = 46;
9\.  set.add(i1);
10\. set.add(i1);
11\. set.add(i2); System.out.print(set.size() + " ");
12\. set.remove(i1); System.out.print(set.size() + " ");
13\. i2 = 47;
14\. set.remove(i2); System.out.print(set.size() + " ");
15\. System.out.println(set.contains(i2)); 
```

代码输出：

`2 1 1 false`

在第 14 行之后，我假设大小是`0`，但它是`1`。我猜想在第 13 行将一个新对象`i2`添加到集合中，所以我在第 15 行测试了它，但它返回`false`（即`i2`集合中不存在），这是为什么呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T13:59:03.220

你从来没有真正从第 14 行的集合中删除任何东西，因为你`i2`在上一行重新分配了一个不在集合中的不同的东西。试着看看当你完全删除第 13 行时会发生什么。

PS set 的 remove 方法实际上返回一个布尔值，所以你可以用它`System.out.println(set.remove(i2))`来查看是否`i2`真的被删除了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:05:37.873

`[45,46]`-> `Remove 45`-> `[46]`-> `Remove 47`->`[46]`因为 47 不存在。此外，当您使用自动装箱分配 i2 时，引用已更改，但 hashset 仍包含旧值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T14:11:02.970

**1.** Set 维护其中**数据**的唯一性。

所以`set`在添加所有数据之后是

```
[46, 45] 
```

看到这个痕迹...

```
[46,45]

set.remove(i1) 
```

`[46]`

```
i2 = 47;
set.remove(i2); 
```

`[46]` `// as i2 = 47, but you didn't add it to the set`

所以现在因为`i2 = 47`它**不在集合中，所以它是错误的。**

# performance - Pig 多个存储命令创建重复工作

> ID：12236493
> 
> 赞同：2
> 
> 时间：2012-09-02T13:52:58.170
> 
> 标签：performance, apache-pig

我有一个 pig 脚本，它从文件中读取输入并发送到我们的自定义 UDF，该 UDF 发送回带有 2 个键/值对的 Map。之后，我们必须将每个键值对保存在 2 个不同的位置。我们正在使用 Store 进行操作。我们面临的问题是我们在猪脚本中使用的每个 STORE 命令都在调用我们的自定义 UDF。

```
>REGISTER MyUDF.jar;

>LOADFILE = LOAD '$file' AS record:chararray;
>MAPREC = FOREACH LOADFILE GENERATE MyUDF(record);
>ERRLIST = FOREACH MAPREC {
>GENERATE $0#'errorRecord' AS ErrorRecord;
>};
>ERRLIST = FILTER ERRLIST BY ErrorRecord is not null;

>MLIST = FOREACH MAPREC {
>GENERATE $0#'mInfo' AS MRecord;
>};
>MLIST = FILTER MLIST BY MRecord is not null;

>STORE MLIST INTO 'fileOut';
>STORE ERRLIST INTO 'errorDir'; 
```

有没有一种方法在猪脚本中只调用一次 UDF，即使我们有多个 STORE....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:25:11.990

我认为幕后发生的事情是 MAPREC 没有被它的赋值语句填充。Pig 正在等待使用 MAPREC（两次）来确定它包含的内容。我建议通过使用 FOREACH 来迭代 MAPREC 来创建一个中间结构。这将强制调用 MyUDF 一次，然后在以下 FOREACH 语句中使用该中间结果两次代替 MAPREC。希望这是有道理的。

# java - Warework框架：无法连接c3p0和MySQL

> ID：12236494
> 
> 赞同：1
> 
> 时间：2012-09-02T13:52:59.377
> 
> 标签：java, mysql, c3p0

我正在家里**试用适用于 PC-MAC 的 Warework，**我想将我的测试应用程序与本地机器上的 MySQL 数据库连接起来。

为了完成这个任务，我遵循了 Warework 提供的在线教程（[在 FULL 模板中自定义池服务](http://tutorial.warework.com/java/warework-java-dist-connected-pcmac/1.0.0/index.html#__RefHeading__4167_2043957548)），所以我将`pool-service.xml`文件放在`/META-INF/system`目录中以配置 c3p0。这是文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy-service xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://repository.warework.com/xsd/proxyservice-1.0.0.xsd">
    <clients>
        <client name="c3p0-client" connector="com.warework.service.pool.client.connector.C3P0Connector">
            <parameter name="driver-class" value="com.mysql.jdbc.Driver" />
            <parameter name="jdbc-url" value="jdbc:mysql://localhost/test1" />
            <parameter name="connect-on-create" value="true" />
        </client>
    </clients>
</proxy-service> 
```

问题是log4j总是输出以下错误：

```
[2012-09-02 15:18:02,613]-[INFO  @ system] - WAREWORK connected Client 'default-client' in Service 'log-service'.
[2012-09-02 15:18:02,616]-[INFO  @ system] - WAREWORK created Service 'log-service'.
[2012-09-02 15:18:02,616]-[INFO  @ system] - WAREWORK created Provider 'collection-provider'.
[2012-09-02 15:18:02,618]-[INFO  @ system] - WAREWORK created Provider 'datastore-view-provider'.
[2012-09-02 15:18:02,674]-[INFO  @ system] - WAREWORK created Data Store 'rdbms-client' in Service 'datastore-service'.
[2012-09-02 15:18:02,674]-[INFO  @ system] - WAREWORK created Service 'datastore-service'.
[2012-09-02 15:18:02,674]-[INFO  @ system] - WAREWORK CONFIGURED SCOPE 'system' AND NOW IT'S READY.
[2012-09-02 15:18:04,727]-[INFO  @ system] - WAREWORK created Provider 'ddbb-connection-provider'.
[2012-09-02 15:18:04,791]-[INFO  @ system] - WAREWORK created Client 'c3p0-client' in Service 'pool-service'.
[2012-09-02 15:18:04,936]-[INFO  @ system] - MLog clients using log4j logging.
[2012-09-02 15:18:05,679]-[INFO  @ system] - Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]
[2012-09-02 15:18:06,094]-[INFO  @ system] - WAREWORK connected Client 'c3p0-client' in Service 'pool-service'.
[2012-09-02 15:18:06,094]-[INFO  @ system] - WAREWORK created Service 'pool-service'.
[2012-09-02 15:18:06,272]-[INFO  @ system] - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@ef95dc8 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@107413fc [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge1bm8p11hsa6a1qtkrfw|1bbdd48, idleConnectionTestPeriod -> 0, initialPoolSize -> 3, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 0, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 15, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 3, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@dafa338 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1hge1bm8p11hsa6a1qtkrfw|1e903d5, jdbcUrl -> jdbc:mysql://WW-DEV-SRV2:2803/test1, properties -> {jdbc-url=jdbc:mysql://WW-DEV-SRV2:2803/test1, connect-on-create=true, driver-class=com.mysql.jdbc.Driver} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1hge1bm8p11hsa6a1qtkrfw|7e9ce2, numHelperThreads -> 3 ]
[2012-09-02 15:18:36,893]-[WARN  @ system] - com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@523df -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: 
java.sql.SQLException: Access denied for user ''@'127.0.0.1' (using password: NO)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:943)
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4113)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1308)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2336)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:377)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:119)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:143)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:132)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
[2012-09-02 15:18:36,991]-[WARN  @ system] - WAREWORK cannot retrieve a database connection from the c3p0 pool 'c3p0-client' in Service 'pool-service' because c3p0 reported the following error: 
[2012-09-02 15:18:36,994]-[WARN  @ system] - Connections could not be acquired from the underlying database!
[2012-09-02 15:18:36,996]-[WARN  @ system] - WAREWORK cannot retrieve the connection for Data Store 'rdbms-client' because Provider 'ddbb-connection-provider' does not returns a 'java.sql.Connection' object for 'c3p0-client' or it is null.
[2012-09-02 15:18:36,996]-[WARN  @ system] - WAREWORK cannot open a connection with Client 'rdbms-client' at Service 'datastore-service' because its Connector generated the following error: WAREWORK cannot retrieve the connection for Data Store 'rdbms-client' because Provider 'ddbb-connection-provider' does not returns a 'java.sql.Connection' object for 'c3p0-client' or it is null.
[2012-09-02 15:18:39,861]-[WARN  @ system] - com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@b914b3 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: 
java.sql.SQLException: Access denied for user ''@'127.0.0.1' (using password: NO)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:943)
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4113)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1308)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2336)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:377)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:119)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:143)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:132)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
[2012-09-02 15:18:39,882]-[WARN  @ system] - com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@c22a3b -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: 
java.sql.SQLException: Access denied for user ''@'127.0.0.1' (using password: NO)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:943)
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4113)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1308)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2336)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:377)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:119)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:143)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:132)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
WAREWORK cannot open a connection with Client 'rdbms-client' at Service 'datastore-service' because its Connector generated the following error: WAREWORK cannot retrieve the connection for Data Store 'rdbms-client' because Provider 'ddbb-connection-provider' does not returns a 'java.sql.Connection' object for 'c3p0-client' or it is null.
    at com.warework.core.service.client.AbstractClient.connect(AbstractClient.java:113)
    at com.warework.service.datastore.DefaultView.connect(DefaultView.java:106)
    at com.warework.service.datastore.AbstractDataStoreView.connect(AbstractDataStoreView.java:72)
    at com.chafi.test.Test.main(Test.java:25) 
```

看来我必须指定用户+密码。我该如何指定？如果这不是错误，那么，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:02:01.093

您必须在池服务的配置中添加另外两个参数：

```
 <parameter name="user" value="the-user-name" />
   <parameter name="password" value="the-password" /> 
```

对于那些在连接数据库时遇到问题的人，请记住这一点：

1.  Add the database driver in your classpath (except for the H2 Database in a Warework PC-MAC Distribution as it's bundled in the JAR). If you can, download and install the lastest driver version.

2.  Setup "*driver-class*" and "*jdbc-url*" parameters in the *pool-service.xml* file. It's also a good idea to specify the port in the URL to avoid undesired problems.

3.  If required, add "*user*" and "*password*" parameters in the *pool-service.xml* file.

4.  It's recommended to set parameter "*connect-on-create*" to "*true*" in the *pool-service.xml* file.

Use the following template to connect with MySQL databases:

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy-service xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://repository.warework.com/xsd/proxyservice-1.0.0.xsd">
 <clients>
  <client name="c3p0-client" connector="com.warework.service.pool.client.connector.C3P0Connector">
   <parameter name="driver-class" value="com.mysql.jdbc.Driver" />
   <parameter name="jdbc-url" value="jdbc:mysql://host:port/database-name" />
   <parameter name="user" value="the-user-name" />
   <parameter name="password" value="the-password" />
   <parameter name="connect-on-create" value="true" />
  </client>
 </clients>
</proxy-service> 
```

# .net - C# Decimal.GetHashCode() 和 Double.GetHashCode() 相等

> ID：12236499
> 
> 赞同：9
> 
> 时间：2012-09-02T13:53:16.073
> 
> 标签：.net, double, decimal, gethashcode

为什么是
`17m.GetHashCode() == 17d.GetHashCode()`
(m=decimal, d=double)
另外，正如预期的那样
`17f.GetHashCode() != 17d.GetHashCode()`
(f=float)
这对于 net3.5 和 net4.0 似乎都是正确的。

据我了解，这些类型的内部位表示是完全不同的。那么为什么**十进制**和**双精度**类型的哈希码对于相同的初始化值是相等的呢？在计算哈希之前是否发生了一些转换？

我发现源代码`Double.GetHashCode()`是这样的：

```
//The hashcode for a double is the absolute value of the integer representation 
//of that double. 
//  
[System.Security.SecuritySafeCritical]  // auto-generated 
public unsafe override int GetHashCode() {  
    double d = m_value;  
    if (d == 0) { 
        // Ensure that 0 and -0 have the same hash code  
        return 0; 
    } 
    long value = *(long*)(&d); 
    return unchecked((int)value) ^ ((int)(value >> 32));  
} 
```

我验证此代码返回所需的值。但是我没有找到`Decimal.GetHashCode()`. 我尝试使用方法

```
public static unsafe int GetHashCode(decimal m_value) {  
    decimal d = m_value;  
    if (d == 0) { 
        // Ensure that 0 and -0 have the same hash code  
        return 0; 
    } 
    int* value = (int*)(&d);
    return unchecked(value[0] ^ value[1] ^ value[2] ^ value[3]);  
} 
```

但这与期望的结果不匹配（它返回了与类型对应的哈希，考虑到[decimal 的内部布局](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)`int`，这也是预期的）。所以我目前还不知道它的实施。`Decimal.GetHashCode()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T15:12:27.290

Decimal.GetHashCode() 方法在 CLR 中实现。您可以从 SSCLI20 源代码 clr/vm/comdecimal.cpp 了解*可能的实现：*

```
double dbl;
VarR8FromDec(d, &dbl);
if (dbl == 0.0) {
    // Ensure 0 and -0 have the same hash code
    return 0;
}
return ((int *)&dbl)[0] ^ ((int *)&dbl)[1]; 
```

否则，这与 C# 中的[Double.GetHashCode()](http://referencesource.microsoft.com/#mscorlib/system/double.cs,01ee10483fa0a3ad)实现完全等效，但用 C++ 编写，因此获得匹配并不意外。 [VarR8FromDec()](http://technet.microsoft.com/en-us/library/ms221523%28v=VS.85%29.aspx)是一个 COM 自动化帮助函数，可将 COM DECIMAL 转换为双精度。

当然，*永远不要*依赖这样的比赛。

* * *

更新：现在 CLR 是开源的，在[这个 github 文件](https://github.com/dotnet/coreclr/blob/master/src/classlibnative/bcltype/decimal.cpp)中可见，它看起来仍然一样。一个问题是 VarR8FromDec() 是一个 Windows 函数，在 Linux 或 OSX 中不可用，它[在 PAL 中重新实现](https://github.com/dotnet/coreclr/blob/master/src/palrt/decconv.cpp)。

# javascript - 当地址栏出现时，android上的css固定页脚被隐藏

> ID：12236500
> 
> 赞同：1
> 
> 时间：2012-09-02T13:53:20.303
> 
> 标签：javascript, android, jquery, css

我在用

```
<meta
     name="viewport"
     content="width=100%; 
             initial-scale=1;
             maximum-scale=1;
             minimum-scale=1; 
             user-scalable=no;"
    /> 
```

和一个`<div id="main-footer" style="position:fixed;width:100%;height:40px;">` 和一个jquery代码

```
 var footerTop = parseInt($(window).height())-40;
            $('#main-footer').css('position','fixed');
            $('#main-footer').css('top',footerTop+'px'); 
```

除非地址栏可见（它最小化页面的可见高度），否则它工作正常。那么是否有任何 js 或 css 将 main-footer div 的顶部设置为 [visible-screen-height - 40] ？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:16:11.040

如果这个div有一个固定的位置设置，你不能只设置一个“底部”值而不是计算和设置“顶部”值吗？

设置“底部：0；” 而不是计算“顶部”，您的页脚将始终附加到浏览器窗口的底部。

检查这个演示：http: [//jsfiddle.net/qNSw7/](http://jsfiddle.net/qNSw7/)

# javascript - 如何更改 Maps API v3 中折线的路径？

> ID：12236501
> 
> 赞同：3
> 
> 时间：2012-09-02T13:53:31.160
> 
> 标签：javascript, google-maps, path, move, polyline

有一种方法可以在 Javascript 中使用 Google Maps API v3 更改折线的位置？

一种更改已绘制线的“路径”选项的方法？我已经改变了“Circle”的位置，但没有改变“RadiusLine”......

**映射初始化代码**：

```
var latlng = new google.maps.LatLng(lat, lng);
        var map = new google.maps.Map(document.getElementById('map'),{
            zoom: 13,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.HYBRID,
            streetViewControl: false
        });

        var marker = new google.maps.Marker({
            position: latlng,
            map: map
        });

        var sunCircle = {
          strokeColor: "#c3fc49",
          strokeOpacity: 0.8,
          strokeWeight: 2,
          fillColor: "orange",
          fillOpacity: 0.15,
          map: map,
          center: latlng,
          radius: 1500
        };

        var origin = sunCircle.center;
        var endpoint = google.maps.geometry.spherical.computeOffset(sunCircle.center,sunCircle.radius,180+sunPos);

        var radiusLineSettings = {
            clickable: false,
            map: map,
            strokeColor: "orange",
            strokeWeight: 10,
            path: [origin,endpoint]
        };
        Circle = new google.maps.Circle(sunCircle);
        RadiusLine = new google.maps.Polyline(radiusLineSettings); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T15:55:01.290

The solution :

```
RadiusLine.setPath(...) 
```

# c - 为什么当我再声明一个变量时这段代码会崩溃？

> ID：12236502
> 
> 赞同：1
> 
> 时间：2012-09-02T13:53:32.347
> 
> 标签：c, compiler-construction, struct, scanf

这是我的代码。当我注释掉“luetut”变量时它起作用。但是当我如下编译时，当程序应该打印变量时出现分段错误。这有什么意义？当我尝试进行调试构建时，出现了一些非常奇怪的东西（这个和那个的多重定义）。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct rakenne
{
    int luku;
    float liukuluku;
    char* mjono;
}   Rakenne;

int main(int argc, char *argv[])
{
    int luetut = 0;
    Rakenne palikka;
//  Rakenne palikka, *palikkaosoitin;
//  palikkaosoitin = &palikka;

//  while(luetut < 1)
//  {
        printf("Anna luku:\n");
        scanf("%d", &palikka.luku);
//  }   luetut = 0;
//  while(luetut < 1)
//  {
        printf("Anna liukuluku:\n");
        scanf("%f", &palikka.liukuluku);
//  }   luetut = 0;
    printf("Anna merkkijono:\n");
    scanf("%s", palikka.mjono);

    printf("%i\t%.3f\t%s\n", palikka.luku, palikka.liukuluku, palikka.mjono);

    return 0;
} 
```

那么，我的 gcc 编译器是否损坏或可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:55:50.523

> ```
> scanf("%s", palikka.mjono); 
> ```

你没有`mjono`指出任何事情，所以写它当然是非法的 - 未定义的行为。做这样的事情会导致不稳定的行为：程序“工作”或“失败”没有明显的原因。

* * *

> 那么，我的 gcc 编译器是否损坏或可能是什么问题

认为您使用的工具是问题所在，这很少有建设性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:46:20.017

扩展[cnicutars](https://stackoverflow.com/users/714501/cnicutar)的答案，解决方法是为`palikka.mjono`.

像这样的东西：

```
#define SIZE     40   // or whatever you need.
palikka.mjono = malloc( sizeof(char) * SIZE ); 
```

然后不要忘记`free`那段记忆：

```
free( palikka.mjono ); 
```

或者，如果您知道字符串的最大大小，只需将您的结构定义为：

```
typedef struct rakenne
{
    int luku;
    float liukuluku;
    char mjono[SIZE];
}   Rakenne; 
```

# weblogic - Weblogic10.3，jar包中的tagfile得到tag handler类未找到

> ID：12236504
> 
> 赞同：1
> 
> 时间：2012-09-02T13:53:45.283
> 
> 标签：weblogic, tagfile

我的战争在 Tomcat6 上进行，但在 Weblogic10.3 上出现错误：找不到标签处理程序类“jsp_servlet.tags.__ *tag* ”

情况如下：我开发了5个标签文件，将这5个标签文件定义在一个tld中，并用tld打包成nnn.jar。我的第一个 JSP 使用 2 of 5 标签文件，当我单击此页面时，在 tomcat 中运行良好，但在 Weblogic10.3 中，出现上述错误，我发现此错误的关键因素是“使用 2 of 5 标签” ，因为当我在一个 JSP 中使用所有 5 个标记文件时，Weblogic103 运行良好！所以我认为这可能是一个 weblogic 错误，或者我需要做一些配置来避免这种情况。对这种情况有任何想法吗？比很多！

# python - 分布式python编程

> ID：12236508
> 
> 赞同：3
> 
> 时间：2012-09-02T13:54:15.623
> 
> 标签：python, distributed

我正在尝试将 python 程序的执行拆分到两台不同的机器上。我想知道是否有办法从另一台机器上调用 python 解释器。不在另一台机器上运行脚本，而是将执行任务拆分到两台机器上。

在接下来的几个月里，我将教授我的自我分布式编程，我认为这是一个很好的开始。

我认为第一步是使用一台机器调用另一台机器并发送一段程序。然后下一步将是两台机器一起执行相同的程序并进行通信以避免问题。第三步将是三台机器等。

欢迎提供建议、提示和想法……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T17:41:05.500

Disclamer：我是 SCOOP 的开发者。

对于分布式处理，您可能想要熟悉的基于数据的技术将是 MPI 标准（对于多计算机，使用 mpi4py [首选] 或 pympi）和允许远程计算的标准多处理模块（但在我看来很尴尬）。

不过，您应该从基于任务的框架开始。它们提供了简单且用户友好的用法。[在创建SCOOP](http://scoop.googlecode.com)时，这两个都是最大的焦点。你可以用`pip -U scoop`. 在 Windows 上，您可能希望首先使用[其可执行安装程序](https://github.com/zeromq/pyzmq/downloads)安装 PyZMQ 。您可以检查提供的示例并使用各种参数来轻松了解导致性能下降或提高的原因。我鼓励您将它与类似工作的[Celery等替代品进行比较。](http://celeryproject.org/)

这两个框架都允许远程启动 Python 程序。更重要的是，它为您执行并行处理，而您只需为它们提供任务。

您可能想要检查[Fabric](http://docs.fabfile.org/en/1.4.3/index.html)以轻松设置远程环境，甚至远程控制或启动脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-06T21:11:08.937

查看[Ray](https://github.com/ray-project/ray)，这是一个用于编写并行和分布式 Python 的库。

Ray 使用相同的语法在单个多核机器上和分布式环境中并行化代码。

如果将`@ray.remote`装饰器添加到函数中，它可以并行异步执行（在集群中的任何机器上）。远程函数调用返回期货，其值可以用`ray.get`.

使用 Python 类（而不是函数）也可以做同样的事情，请参阅[有关 actor 的文档](https://ray.readthedocs.io/en/latest/actors.html)。

```
import ray
import time

ray.init()

@ray.remote
def function(x):
    time.sleep(1)
    return x

args = [1, 2, 3, 4]

# Submit 4 tasks in parallel.
result_ids = [function.remote(x) for x in args]

# Retrieve the results. Assuming at least 4 cores,
# this will take 1 second.
results = ray.get(result_ids) 
```

有关更多信息，请参阅[Ray 文档](https://ray.readthedocs.io/en/latest/?badge=latest)。请注意，我是 Ray 开发人员之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:57:53.560

[Python [1]](http://pympi.sourceforge.net/) [[2]](http://mpi4py.scipy.org/)有 MPI 版本。

[MPI](http://en.wikipedia.org/wiki/Message_Passing_Interface)（消息传递接口）是一个标准化接口，它很酷，因为您也可以在 C、Java、（Fortran）等中找到它。

它使您能够在远程运行的进程之间进行通信。您使用这些消息进行同步和信息传递。

你也有集体操作，比如`broadcast`, `gather`,`reduce`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T17:06:12.037

看看[RPyC](http://rpyc.sourceforge.net/docs/about.html "rpyc")，你可能会发现它很有用。

# c++ - 基于面板的Qt界面

> ID：12236513
> 
> 赞同：0
> 
> 时间：2012-09-02T13:55:01.540
> 
> 标签：c++, qt, interface

我想构建如下所示的界面：![在此处输入图像描述](../Images/1f515addd1a1ccaffe87aa7cef65a834.png)

`QDockPanel`侧面有面板。主要问题是如何制作主视口（屏幕上很暗）。例如，当我调整右侧面板的大小时，它也会改变大小。我可以使用`QDockPanel`布局来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:00:00.827

使用[QMainWindow](http://doc-snapshot.qt-project.org/4.8/qmainwindow.html#details)。它正是这样做的。“主视口”被称为 QMainWindow 中的中心部件。

# java - public static void main(String[] args) - 为什么它实际上是静态的？

> ID：12236514
> 
> 赞同：-3
> 
> 时间：2012-09-02T13:55:06.827
> 
> 标签：java, static, main

> **可能重复：**
> [为什么 Java 主方法是静态的？](https://stackoverflow.com/questions/146576/why-is-the-java-main-method-static)

主要方法是静态的原因是什么？为什么不只是`public void main(String[] args)`？我想我理解静态的含义，但我认为没有理由在这里。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:05:49.923

我们将 java 中的 main 方法声明为：public static void main(String args[])

static : main 是类的入口点。在java中，一切都写在一个类中。现在当你在命令提示符下运行java时，loader会加载类，jvm会搜索main方法进入类。因此将 main() 设为静态，将使 jvm 直接访问它而不创建实例。

如果 main 方法没有被声明为 static，那么 JVM 必须创建 main Class 的实例，并且由于构造函数可以被重载并且可以有参数，那么 JVM 将没有任何确定且一致的方式来在 Java 中找到 main 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:57:21.303

请记住，java 中的所有内容都是一个类，并且要让 JVM 直接访问 main 方法而不创建包含在其中的对象，它必须是静态的。

> static : main 是类的入口点。在java中，所有东西都写在一个类中。现在，当您在命令提示符下运行 java filename 时，loader 将加载该类，jvm 将搜索 main 方法以进入该类。因此将 main() 设为静态，将使 jvm 直接通过 classname.main() 访问它

[参考这里](http://amijha.wordpress.com/2008/06/06/why-main-method-is-declared-static-in-java/)

这也是这个问题的一个很好的资源，[位于这里](http://javarevisited.blogspot.sg/2011/12/main-public-static-java-void-method-why.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:59:59.977

根据我有限的 Java 知识，`main()`它是静态的，因为在启动 Java 应用程序时，它不会创建任何类实例。需要有一个可以在不创建实例的情况下调用的函数，这正是 static 关键字的作用。

# java - 使用 IBM MQ 类浏览、读取和移除队列中的消息

> ID：12236519
> 
> 赞同：8
> 
> 时间：2012-09-02T13:55:14.590
> 
> 标签：java, queue, ibm-mq

我正在使用带有 Eclipse 的 Java MQ 类编写一个简单的 Java 应用程序。

现在我可以浏览远程队列而不删除存储的消息。
这是阅读周期的代码：

```
MQQueueManager QMgr = new MQQueueManager(qManager); //<-- qManager is a String with the QMgr name

int openOptions = MQC.MQOO_FAIL_IF_QUIESCING | MQC.MQOO_INPUT_SHARED | MQC.MQOO_BROWSE;  

MQQueue queue = QMgr.accessQueue(queueName, openOptions);

MQMessage theMessage    = new MQMessage();
MQGetMessageOptions gmo = new MQGetMessageOptions();
    gmo.options=MQC.MQGMO_WAIT | MQC.MQGMO_BROWSE_FIRST;
    gmo.matchOptions=MQC.MQMO_NONE;
    gmo.waitInterval=5000;

boolean thereAreMessages=true;
while(thereAreMessages){
    try{
        //read the message          
        queue.get(theMessage,gmo);  
        //print the text            
        String msgText = theMessage.readString(theMessage.getMessageLength());
        System.out.println("msg text: "+msgText);

                 // <--- Solution code Here

        //move cursor to the next message               
        gmo.options = MQC.MQGMO_WAIT | MQC.MQGMO_BROWSE_NEXT;

    }catch(MQException e){

        if(e.reasonCode == e.MQRC_NO_MSG_AVAILABLE) {
            System.out.println("no more message available or retrived");
        }

        thereAreMessages=false;
    } catch (IOException e) {
        System.out.println("ERROR: "+e.getMessage());
    }
} 
```

**主要问题：** 在阅读消息行之后，在将光标移动到下一条消息之前，如何从队列中删除消息？

**第二个问题：** Eclispe 警告我，所有用于选项的成本都已弃用；哪些是正确的使用？

* * *

**解决方案：**

这是我真正想要的解决方案：

```
// set te cursor to remove the message from the queue
gmo.options = CMQC.MQGMO_MSG_UNDER_CURSOR;
queue.get(theMessage, gmo); 
```

这些行必须插入问题代码中

我在这里找到了它：[http ://www.velocityreviews.com/forums/t124676-mq-series-messages-browse-and-delete.html](http://www.velocityreviews.com/forums/t124676-mq-series-messages-browse-and-delete.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T05:58:46.257

**解决方案：**

这是我真正想要的解决方案：

```
// set te cursor to remove the message from the queue
gmo.options = CMQC.MQGMO_MSG_UNDER_CURSOR;
queue.get(theMessage, gmo); 
```

这些行必须插入问题代码中

我在这里找到了它：[http ://www.velocityreviews.com/forums/t124676-mq-series-messages-browse-and-delete.html](http://www.velocityreviews.com/forums/t124676-mq-series-messages-browse-and-delete.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T16:58:41.680

要删除消息，请遵循[MQ 文档](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.csqzal.doc/fg12910_.htm)中描述的过程。

对于不推荐使用的常量值，再次检查[Javadoc](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp?topic=/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQC.html)，描述了推荐的方式。

```
MQC.MQOO_INPUT_SHARED --> CMQC.MQOO_INPUT_SHARED 
```

# android - 我可以在 Android 的 XML 中使用变量吗？

> ID：12236523
> 
> 赞同：8
> 
> 时间：2012-09-02T13:55:47.600
> 
> 标签：android, xml

而不是为每个文本视图使用以下行：

```
android:textSize="40sp" 
```

我可以用变量替换 40sp 吗？

作为一个附带问题，我被建议使用 SP 单位，因为它是由用户定义的设置决定的。这是最佳做法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T14:08:09.047

> 我可以用变量替换 40sp 吗？

您可以使用[维度资源](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)（例如`android:textSize="@dimen/someSize"`），也可以使用执行此操作的样式（根据 AlexN 的回答），或者在运行时通过`setTextSize()`.

> 我被推荐使用 SP 单位，因为它是由用户定义的设置决定的。这是最佳做法吗？

在较新版本的 Android 上，用户可以通过设置应用程序更改基本字体大小。通过使用`sp`for 单位，您的字体大小将与基本字体大小一起缩放。如果您使用其他单位（例如，`dp`），则无论用户在“设置”中使用什么字体，您的字体大小都将保持不变。不可能说任何给定的使用是否`sp`是“最佳实践”——我确信在某些情况下允许更改字体大小将是一件坏事。但是，默认情况下，这`sp`可能是正确的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T14:05:08.033

据我所知，使用 SP 对于文本大小来说是一个非常好的做法。根据您的第一个问题-我认为我们不能使用变量，但是，有更好的方法。看看 - [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

因此，如果您要定义一种样式，您可以像这样在 XML 中声明您的视图，`<TextView android:id = "@+id/myId" style = "@style/myStyle"/>` 并且这种样式将封装您想要设置到该屏幕上的 textViews 的所有参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T14:08:40.633

不，不可能在 XML 文件中使用基于代码的变量。但是，您可以为此使用样式。

例子：

```
<style name="MyTvStyle">
  <item name="android:textSize">40sp</item>
</style> 
```

然后像这样应用它：

```
<TextView style="@style/MyTvStyle" ... /> 
```

A code based approach is also possible. If the TextViews have their `android:id` attribute defined you can retrieve them in the code with the `findViewById` method.

Example:

```
int[] id_array = {
    R.id.textview1, R.id.textview2, R.id.textview3 //Put all the id's of your textviews here
}

for(int i : id_array) { //Loop trough all the id's and retrieve the Textview associated with it.
    TextView textview = (TextView)findViewById(i);
    tv.setTextSize(TypedValue.COMPLEX_UNIT_SP,40); //Set the text size to 40sp
} 
```

And yes it's always better to use `sp` instead of normal pixel values. Since `sp` will scale with device size and user settings.

# regex - mod_rewrite .htaccess 子域重定向

> ID：12236529
> 
> 赞同：1
> 
> 时间：2012-09-02T13:56:17.803
> 
> 标签：regex, .htaccess, mod-rewrite, redirect, subdomain

我花了过去 2 天搜索和了解 .htaccess 以将所有子域重定向到用户文件夹而不更改 url，但我一直遇到 3 个小问题。我真的很感激一些帮助

问题1）

如果我去`http://www.example.com/users/foo`它会自动将 url 重定向到`http://foo.example.com/`但如果我去`http://www.example.com/users/foo/dashboard.php` 它什么也不做，而不是重定向到`http://foo.example.com/dashboard.php`

这是我使用的代码：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /users/(.+)/\ HTTP/
RewriteRule ^users/([^/]+)/(.*)$ http://$1.example.com/$2 [R=301,L] 
```

问题2）

如果我去`http://foo.example.com/dashboard.php`

它从`http://www.example.com/users/foo/dashboard.php`

但是如果我`foo.example.com`在地址栏中输入（在 Firefox 中）它（有时）会自动重定向到`www.foo.example.com`，我可以阻止`www`前缀吗？

这是代码

```
RewriteCond %{REQUEST_URI} !^/users/
RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
RewriteCond %{HTTP_HOST} ([^.]+)\.example\.com
RewriteRule (.*) /users/%1/$1 [L] 
```

问题3）

活动网站位于文件夹中，`http://www.example.com/website`但应该在 url 上可见`http://www.example.com/`（就像我从`http://www.example.com/users/foo` url 上获取信息一样`http://foo.example.com/`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:06:38.830

关于问题一，我只检查主机：

```
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^users/([^/]+)/(.*)$ http://$1.domain.com/$2 [R=301,L] 
```

关于第二个问题，这是我从 drupal`.htaccess`文件中获得的修改规则：

```
# remove www prefix
RewriteCond %{HTTP_HOST} ^www\.(.+)\.domain\.com$ [NC]
RewriteRule ^ http://%1%.domain.com{REQUEST_URI} [L,R=301]

# redirect to the subdirectory
RewriteCond %{HTTP_HOST} !^www\.(.+)\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(.+)\.domain\.com$ [NC]
RewriteRule ^ user/%1%{REQUEST_URI} [L,R=301] 
```

关于您的第三个问题，请在此处检查此问题：

```
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^(.*)$ website/$1 [R=301,L] 
```

# database - Web 应用程序中的自动完成和一些技术

> ID：12236532
> 
> 赞同：1
> 
> 时间：2012-09-02T13:56:21.653
> 
> 标签：database, search, web-applications, autocomplete

我有一些问题仍然不明白，我需要帮助。

在 Facebook 等一些网络应用程序中，当我键入一个词来查找我的朋友或地点、应用程序...时，会为我显示一个建议列表。我可以遍历并选择其中之一。

所以我想问一个问题：

1.  最好或好的工具、语言或类似的东西来做到这一点？我认为它是 jQuery。给我更多选择？
2.  建议列表中的哪个列表项称为？
3.  这些东西是从哪里来的？我的意思是：我怎样才能创造或利用它们？直接从数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:11:54.770

答案是：

1.  您可以将 jQuery 与检索数据的服务器端语言结合使用
2.  通常它被称为建议列表。这些功能被谷歌称为谷歌建议
3.  从数据库中检索数据

# asp.net - 在 MVC4 RTM 中从 ASP.NET 成员身份迁移到 SimpleMembership

> ID：12236533
> 
> 赞同：27
> 
> 时间：2012-09-02T13:56:26.730
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-membership, asp.net-mvc-4

新的 MVC4 RTM 互联网应用程序模板使用 SimpleMembership 提供程序，如此处所述[SimpleMembership](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx/)

我现有的 MVC 网站使用 ASP.Membership 框架，理想情况下，我想将这些表中的用户数据迁移到新的 SimpleMembership 表中。我想要这样做的原因是：

1.  与我使用 EF 的数据库的其余部分进行更清洁的集成
2.  开箱即用地支持 Azure 和 OAuth
3.  使用最新的 MVC4 RTM 控制器/视图，无需修改
4.  我一直觉得现有的会员实施对于我需要的东西来说有点臃肿

所以我今天写了一个 SQL 脚本，将现有 ASP.Net Membership 表中的数据迁移到新的 Simple Membership 表中。这可以在[这里找到](http://gist.github.com/3585239)

在我的 MVC 4 网站中测试登录密码验证失败。我相信 SimpleMembership 使用的密码算法与旧的 Membership 框架不同，因为在 SimpleMemberShip 框架下创建的新密码看起来要长得多。

所以我的问题是，由于我在旧的 ASP.Net 会员提供程序中使用“散列”密码格式，并且用户的原始密码是不可恢复的，我必须有哪些选项才能让 SimpleMembership 提供程序正常工作。

我猜一些选项是：

1.  让我的用户重置他们的密码
2.  让 SimpleMembership 提供程序使用与旧的 ASP.Net Membership 提供程序相同的密码算法。
3.  恢复新的 MVC 4 RTM Internet 应用程序模板以使用旧的 ASP.Net MemberShip 提供程序。这对我来说是最不理想的选择，因为我想使用 SimpleMemberShip 框架。

我怀疑很多人也在寻求将他们现有的会员数据库迁移到新的 SimpleMemberShip 提供商。

非常感谢任何帮助。

干杯

吉姆

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T00:09:17.410

我想提出保罗的评论，以防有人错过，并建议他的解决方案是我见过的最好的。

[http://pretzelsteelersfan.blogspot.com/2012/11/migrating-legacy-apps-to-new.html](http://pretzelsteelersfan.blogspot.com/2012/11/migrating-legacy-apps-to-new.html)

谢谢保罗

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T13:46:53.753

当用户登录时，您可以访问纯文本密码，这为您提供了另一种选择：

1.  将旧密码保存在单独的表中
2.  登录时，首先使用 SimpleMembership 方法
3.  如果失败，请使用旧哈希算法检查旧密码表（您需要确保纯文本密码仍在上下文中）
4.  如果成功，更新 SimpleMembership 表，并从旧密码表中删除

用户不需要知道更改，并且活动用户将拥有更安全的哈希。如果您以后想强制进行安全升级，您可以警告用户他们的帐户将在一年不活动后被删除，然后退出两步系统。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-07T03:41:25.283

我有一个类似的问题，我应该写一篇关于这样做的教程/博客文章，但我的解决方案是将以下内容添加到我的 web.config 中（这对应于选项 #2）：

```
<system.web>

    <membership hashAlgorithmType="SHA1" defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" etc.../>
      </providers>
    </membership>
    <machineKey validation="SHA1" />
    ...
</system.web> 
```

上面代码中有趣的部分是“hashAlgorithmType”。将其设置为 SHA1 将使用旧的 asp.net 成员哈希算法。

我也处于类似的位置——我要么要求我的用户更新他们的密码，要么保持特定的哈希算法。

希望这可以帮助！-西格

# r - 在 ggplot 中自定义 geom_point 参数

> ID：12236537
> 
> 赞同：3
> 
> 时间：2012-09-02T13:56:39.777
> 
> 标签：r, ggplot2

我需要在 ggplot 中自定义笔画粗细和角样式。将变量映射到正方形区域，我发现圆角导致较小的正方形变成圆形。ggplot 是否具有此功能，或者是否有不同的方法来绘制该`pch=22`方法的正方形？

提前谢谢了。

```
t <- data.frame(x=rep(c(1:5),5)/5, y=rep(c(1:5),each=5)/5, s=round(seq(1,10,length.out=25)))
t
p <- ggplot(data=t, aes(x=x,y=y))

p + geom_point(aes(size=s), pch=22, fill=NA, col='black') +
  scale_area(range = c(0, 2))

# options e.g. linejoin = "mitre", lineend = "butt" don't work 
```

![在此处输入图像描述](../Images/94bf9d846ec41bea010408a127f69509.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:48:49.827

未解决和撤回（缺乏回应）。

# java - 平台碰撞（穿透到地面几个像素）

> ID：12236539
> 
> 赞同：3
> 
> 时间：2012-09-02T13:57:01.613
> 
> 标签：java, collision-detection, game-physics, gravity

我正在尝试制作平台游戏。我有碰撞代码（几乎），但似乎有一个错误。我试试这段代码：

```
 for (int i = 0; i < world.ground.size(); i++) {
        if (!world.ground.get(i).intersects((int) x, (int) y, player_width, player_height + (int) dy)) {
            y += dy;
            if (dy < 4) {
                dy += 0.1;
            }
        } else {
            dy = 0;
            jumped = false;
        }
    } 
```

但有时我的角色的脚会穿过地面 2 或 3 个像素。有一个更好的方法吗？请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T14:06:32.080

您似乎正在使用`posteriori (discrete)`碰撞检测。这会导致您的对象每次都穿透一点，因为它只有在触摸或穿透时才会激活。您可能会考虑将其转换为`priori (continuous)`碰撞检测。这样，它就永远不会穿透地面，因为它会在碰撞前进行检查，然后调整速度或位置以避免穿透。

如果您不想摆弄这种，您可以添加一个`correction`在绘画之前起作用的功能。

```
void foo()
{
      //check if below ground
      //if yes, displecement upwards until it is above enough
      //now you can paint
      //return
} 
```

我看到你实现了这个：

```
 what_you_need_to_make_it_above_ground=(ground_y-feet_y);

  //im not sure if dy is ground level so i added second boolean compare

  if ((dy < 4)||(ground_y>feet_y)) {
                 dy += 0.1; // this isnt enough. should be equal to:
                 dy +=what_you_need_to_make_it_above_ground;
                 dy +=if_there_are_other_parameters_think_of_them_too;

              } 
```

# alloy - 让合金找到特定集合的最大答案

> ID：12236547
> 
> 赞同：1
> 
> 时间：2012-09-02T13:58:49.533
> 
> 标签：alloy

我正在尝试查看是否可以让 Alloy 返回特定集合的最大可能答案。因此，在此示例中，我希望模型查找器不生成答案`x={}`、`x=A`和。`x=B`

```
abstract sig X{}
one sig A extends X{}
one sig B extends X{}

pred(x: set X) {
  x in A + B 
} 
```

我已经尝试了一些类似的东西：

```
pred(x: set X) {
    x in A + B and 
    no y : set X |
        y in A + B and #(y) > #(x)
} 
```

但我得到一个错误，即无法进行分析，因为它需要高阶量化。

我想知道是否有可能（或更简单）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:18:59.340

Alloy 目前没有任何内置功能来产生最大或最小的解决方案。是的，你说得对，指定一个解决方案是最大的通常需要更高阶的量化。但是，您可以通过一阶量化确保解至少是局部最大值：

```
 pred p (x: set X) {...}

    pred locally_maximal_p (x: set X) {
      p(x)
      no e: X - x | p(x + e)
      } 
```

# android - phonegap Camera.PictureSourceType.PHOTOLIBRARY 不适用于 android

> ID：12236549
> 
> 赞同：1
> 
> 时间：2012-09-02T13:59:08.370
> 
> 标签：android, cordova, android-gallery

我正在使用 phonegap 从设备相机或图库中抓取图像。相机部分工作正常，但是当我单击调用galleryButton() 的按钮时，应用程序就会卡住。这是我正在使用的代码：

```
function cameraButton() {
    callLib(Camera.PictureSourceType.CAMERA);
}

function galleryButton() {
    callLib(Camera.PictureSourceType.PHOTOLIBRARY);
}

function callLib(sourceType) {
    navigator.camera.getPicture(onSuccess, onFail, {    quality: 50,
                                                        destinationType : Camera.DestinationType.DATA_URL, 
                                                        sourceType : sourceType, 
                                                        allowEdit : false,
                                                        encodingType: Camera.EncodingType.JPEG,
                                                        targetWidth: 512,
                                                        targetHeight: 512,
                                                        saveToPhotoAlbum: false } );
} 
```

日志输出：

```
09-02 18:51:39.238: V/webcore(16739): SET_GLOBAL_BOUNDS arg1=0 arg2=0 obj=Rect(0, 25 - 320, 480)
09-02 18:51:39.238: V/webcore(16739): VIEW_SIZE_CHANGED arg1=0 arg2=0 obj=android.webkit.WebView$ViewSizeData@44b56268
09-02 18:51:39.238: V/webcore(16739): viewSizeChanged w=320; h=455; textwrapWidth=320; scale=1.0
09-02 18:51:39.238: V/webcore(16739): SET_ACTIVE arg1=0 arg2=0 obj=null
09-02 18:51:39.248: V/webcore(16739): WEBKIT_DRAW arg1=0 arg2=0 obj=null
09-02 18:51:39.248: V/webcore(16739): webkitDraw start
09-02 18:51:39.258: V/webcore(16739): webkitDraw NEW_PICTURE_MSG_ID
09-02 18:51:39.268: V/webcore(16739): UPDATE_CACHE_AND_TEXT_ENTRY arg1=0 arg2=0 obj=null
09-02 18:51:39.268: V/webcore(16739): UPDATE_CACHE_AND_TEXT_ENTRY arg1=0 arg2=0 obj=null
09-02 18:51:39.278: V/webview(16739): NEW_PICTURE_MSG_ID
09-02 18:51:39.278: V/webview(16739): NEW_PICTURE_MSG_ID {0,0,320,480}
09-02 18:51:39.278: V/webview(16739): UPDATE_TEXT_ENTRY_MSG_ID
09-02 18:51:39.278: V/webview(16739): UPDATE_TEXT_ENTRY_MSG_ID
09-02 18:51:42.158: V/webview(16739): MotionEvent{44b254f0 action=0 x=118.62812 y=53.83542 pressure=1.0 size=0.0} at 33266232 mTouchMode=7
09-02 18:51:42.158: V/webcore(16739): UPDATE_FRAME_CACHE_IF_LOADING arg1=0 arg2=0 obj=null
09-02 18:51:42.168: V/webview(16739): MotionEvent{44b254f0 action=2 x=118.62812 y=53.83542 pressure=1.0 size=0.0} at 33266242 mTouchMode=1
09-02 18:51:42.198: V/webview(16739): MotionEvent{44b254f0 action=2 x=118.62812 y=53.83542 pressure=1.0 size=0.0} at 33266262 mTouchMode=1
09-02 18:51:42.228: V/webview(16739): MotionEvent{44b254f0 action=2 x=118.62812 y=53.83542 pressure=1.0 size=0.0} at 33266292 mTouchMode=1
09-02 18:51:42.248: V/webview(16739): MotionEvent{44b254f0 action=2 x=118.62812 y=53.83542 pressure=1.0 size=0.0} at 33266322 mTouchMode=1
09-02 18:51:42.268: V/webview(16739): MotionEvent{44b254f0 action=1 x=118.62812 y=53.83542 pressure=1.0 size=0.0} at 33266342 mTouchMode=1
09-02 18:51:42.572: V/webview(16739): RELEASE_SINGLE_TAP
09-02 18:51:42.572: V/webcore(16739): VALID_NODE_BOUNDS arg1=0 arg2=0 obj=android.webkit.WebViewCore$MotionUpData@44b64c30
09-02 18:51:42.572: V/webview(16739): DO_MOTION_UP
09-02 18:51:42.578: V/webcore(16739): TOUCH_UP arg1=0 arg2=0 obj=android.webkit.WebViewCore$TouchUpData@44b650e0
09-02 18:51:42.578: V/webcore(16739): WEBKIT_DRAW arg1=0 arg2=0 obj=null
09-02 18:51:42.588: V/webcore(16739): webkitDraw start
09-02 18:51:42.588: V/webcore(16739): webkitDraw NEW_PICTURE_MSG_ID
09-02 18:51:42.598: V/webview(16739): NEW_PICTURE_MSG_ID
09-02 18:51:42.598: V/webview(16739): NEW_PICTURE_MSG_ID {98,38,159,72} 
```

我有以下权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.CAMERA"/> 
```

**编辑** 一切都很完美。galleryButton() 从未被调用 :P 我的错误。有人关闭这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T11:44:02.053

这些可选参数仅用于自定义相机设置。allowEdit：假，encodingType：Camera.EncodingType.JPEG，targetWidth：512，targetHeight：512，

为 photolib 创建一个新函数，该函数将包含 quality : 40, destinationType : sourceType :

# php - 从 Codeigniter 中删除“index.php”后，域后需要额外的斜杠

> ID：12236552
> 
> 赞同：1
> 
> 时间：2012-09-02T13:59:21.187
> 
> 标签：php, codeigniter, mod-rewrite, url-rewriting

我一直在尝试使用 mod-rewrite 从我的 Codeigniter 站点中删除“index.php”。但是我最终遇到了这个问题：

原始 URI： http: [//mysite.com/index.php/about](http://mysite.com/index.php/about)

删除 index.php *后*使其工作的唯一方法：http: [//mysite.com//about](http://mysite.com//about)（注意额外的斜杠）

删除多余的斜杠会导致 Codeigniter 无法“看到”域之后的 url 字符串。

我现在尝试了 3 种不同的 mod-rewrite 方法，最终都遇到了同样的问题 - URI 不起作用，除非你在域名**后添加一个额外的斜杠。**

我当前的 mod_rewrite 代码：

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteCond %{THE_REQUEST} !/system/.*
RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,L]

RewriteCond $1 !\.(css|js|gif|jpe?g|png) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{HTTP_HOST} ^www.domain.co
RewriteRule (.*) http://domainname.co/$1 [R=301,L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:14:22.067

首先：请发布您正在使用的 mod_rewrite 代码，以确保其正确。

第二：检查您的应用程序配置文件，您的索引页面设置为这样`$config['index_page'] = '';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:28:26.940

问题的解决方案非常简单。

像这样编辑你的`.htaccess`-

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /<directory_where_your_code_is_kept>/

RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteCond %{THE_REQUEST} !/system/.*
RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,L]

RewriteCond $1 !\.(css|js|gif|jpe?g|png) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{HTTP_HOST} ^www.domain.co
RewriteRule (.*) http://domainname.co/$1 [R=301,L]

</IfModule> 
```

然后转到`config.php`并进行这些更改 -

```
$config['base_url'] = 'http://localhost/<directory_where_your_code_is_kept>';
$config['index_page'] = '';
$config['uri_protocol'] = 'REQUEST_URI'; 
```

# android - 第一个android应用程序不工作..需要帮助

> ID：12236554
> 
> 赞同：0
> 
> 时间：2012-09-02T13:59:38.410
> 
> 标签：android, multithreading

嘿，我最近进入了 android 并制作了我的第一个应用程序，该应用程序旨在在用户按下开始按钮时启动 60 秒的运行计时器。该应用程序将内容视图设置为正常并显示 60，但是当我单击开始按钮时，它成功显示 59，然后应用程序崩溃。这是代码（它只有一个活动）

```
public class test1activity extends Activity 
{   
Thread countdown;
long f, pa, jee;
TextView ytvp;
String s;
TextView uyti;
@Override   
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ytvp = (TextView) findViewById(R.id.textView2);
        uyti = (TextView) findViewById(R.id.tv2);

countdown = new Thread() {
            public void run() {
                jee = (System.currentTimeMillis()) / 1000;
                while ((((System.currentTimeMillis()) / 1000) - jee) < 60)
                                {                   
                                try {   
                    sleep(1000);    
                } catch (InterruptedException e) {                  
                    e.printStackTrace();    
                } finally {
                    f = ((System.currentTimeMillis()) / 1000) - jee;
                        pa = 60 - f;    
                        s = String.valueOf(pa);
                        ytvp.setText(s);
                    }
                }
                                }
                };
    }       
public void whenclickstart(View view) {
        countdown.start();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:03:35.203

您不能从另一个线程（非 UI 线程）内部设置 UI 元素。所以你不能在下面使用这个。

```
 ytvp.setText(s); 
```

尝试这样的事情，你不需要线程来做你想做的事情

```
new CountDownTimer(60000, 1000) {

     public void onTick(long millisUntilFinished) {
         ytvp.setText("" + millisUntilFinished/1000);
     }

     public void onFinish() {
          ytvp.setText(""+0);
     }
  }.start(); 
```

如果您不想使用 countdowntimer 将 setText 替换为

```
runOnUiThread(new Runnable() {
    public void run() {
        ytvp.setText(s);
    }
}); 
```

# mysql - 计算表中的出现次数，然后用于查找平均值

> ID：12236559
> 
> 赞同：0
> 
> 时间：2012-09-02T14:00:46.223
> 
> 标签：mysql, sql

表格1

```
categoryid   categoryname   categorydescription
1               a             zzzzzzz
2               b              yyyyyy
3               c               uuuuu 
```

表 2

```
carid caryear carmodel carprice catid(foreign key to category id )
1        xxxx    aaaa    xxxx    1
2       xxxx     bbbb    xxxx    3
3       xxxx     cccc    xxxx    4
3       xxxx     dddd    xxxx    3
4       xxxxx    eeee    xxxx    1 
```

结果

```
categoryname                               averageprice                         total cars
a               sum price of same category car / no of same category cars           1
b               sum price of same category car / no of same category cars           2
c               sum price of same category car / no of same category cars           2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:06:44.483

你可以写：

```
 SELECT category.categoryname,
        AVG(car.carprice) AS "averageprice",
        COUNT(car.carid) AS "total cars"
   FROM category
   LEFT
  OUTER
   JOIN car
     ON car.catid = category.categoryid
  GROUP
     BY category.categoryname
; 
```

笔记：

*   你没有提到你的桌子的名字，所以我不得不猜测。
*   这将包括没有任何汽车的类别。如果您只想包含至少有一辆汽车的类别，请删除该`LEFT OUTER`部分。

# android - 更新复制的数据库

> ID：12236560
> 
> 赞同：0
> 
> 时间：2012-09-02T14:00:54.040
> 
> 标签：android, sqlite

在我的应用程序中，数据库是只读的。因为我正在使用预先存在的 sqlite 数据库在设备上创建数据库。我在下一次更新中的问题是我想更改或更新数据库的内容如何实现这一点。从这个类中，我正在复制数据库，就代码而言，我认为当我在 Play 商店上发布更新时，更新的数据库不会被复制，因为它已经存在。

```
public class Setupdb extends SQLiteOpenHelper {

  private static String DB_PATH = "";
    private static final String DB_NAME = "camprep.sqlite";
    private SQLiteDatabase myDataBase;
    private final Context myContext;

    private static Setupdb mDBConnection;

public Setupdb(Context context) {
    super(context, DB_NAME, null, 3);
    this.myContext=context;
    DB_PATH="/data/data/"
            + context.getApplicationContext().getPackageName()
            + "/databases/";
    Log.e(DB_NAME, DB_PATH);
}
public static synchronized Setupdb getDBAdapterInstance(Context context) {
    if (mDBConnection == null) {
        mDBConnection = new Setupdb(context);
    }
    return mDBConnection;
} 

    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();
        if (dbExist) {
            Log.e("db","exist");
            // do nothing - database already exist
        } else {
            // By calling following method
            // 1) an empty database will be created into the default system path of your application
            // 2) than we overwrite that database with our database.
            this.getReadableDatabase();
            try {
                Log.e("calling", "copy");
                copyDataBase(); 
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }

}
    private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {
            // database does't exist yet.
        }
        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false; 
    }

    private void copyDataBase() throws IOException {
        // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);
        // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME; 
        // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
        // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
        // Close the streams
    myOutput.flush(); 
    myOutput.close();
    myInput.close();
} 

    public void openDataBase() throws SQLException {
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    }
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close(); 
    } 

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

}

# python - 在 matplotlib 上的散点图中为每个系列设置不同的颜色

> ID：12236566
> 
> 赞同：204
> 
> 时间：2012-09-02T14:02:12.673
> 
> 标签：python, matplotlib, scatter-plot

假设我有三个数据集：

```
X = [1,2,3,4]
Y1 = [4,8,12,16]
Y2 = [1,4,9,16] 
```

我可以散点图：

```
from matplotlib import pyplot as plt
plt.scatter(X,Y1,color='red')
plt.scatter(X,Y2,color='blue')
plt.show() 
```

我怎样才能用 10 套做到这一点？

我搜索了这个，可以找到任何关于我所问内容的参考。

**编辑：澄清（希望）我的问题**

如果我多次调用 scatter ，我只能在每个 scatter 上设置相同的颜色。另外，我知道我可以手动设置颜色数组，但我确信有更好的方法来做到这一点。我的问题是，“我怎样才能自动散点图我的几个数据集，每个数据集都有不同的颜色。

如果这有帮助，我可以轻松地为每个数据集分配一个唯一编号。

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-09-02T14:39:07.303

我不知道您所说的“手动”是什么意思。您可以选择颜色图并轻松制作颜色数组：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

x = np.arange(10)
ys = [i+x+(i*x)**2 for i in range(10)]

colors = cm.rainbow(np.linspace(0, 1, len(ys)))
for y, c in zip(ys, colors):
    plt.scatter(x, y, color=c) 
```

[![不同颜色的 Matplotlib 图](../Images/9bf3046c51e34a0da9b498f2664298b5.png)](https://i.stack.imgur.com/XwKlk.png)

`itertools.cycle`或者，您可以使用并指定要循环的颜色来制作自己的颜色循环器，`next`以获取所需的颜色。例如，有 3 种颜色：

```
import itertools

colors = itertools.cycle(["r", "b", "g"])
for y in ys:
    plt.scatter(x, y, color=next(colors)) 
```

[![Matplotlib 图只有 3 种颜色](../Images/033be4d2d5b18e5a95fbd87c7d2dc34b.png)](https://i.stack.imgur.com/z6UAN.png)

想一想，也许不`zip`与第一个一起使用更清洁：

```
colors = iter(cm.rainbow(np.linspace(0, 1, len(ys))))
for y in ys:
    plt.scatter(x, y, color=next(colors)) 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-09-18T10:27:53.097

在 matplotlib 中用不同颜色的点绘制图的正常方法是将颜色列表作为参数传递。

例如：

```
import matplotlib.pyplot
matplotlib.pyplot.scatter([1,2,3],[4,5,6],color=['red','green','blue']) 
```

[![3 种颜色](../Images/88c1784ffe1d83be0b64dc1f7f6b51e1.png)](https://i.stack.imgur.com/Jew5I.png)

当您有一个列表列表并且您希望它们为每个列表着色时。我认为最优雅的方式是@DSM 建议的，只需执行一个循环，进行多次调用以分散。

但是如果出于某种原因你想只用一个调用来完成它，你可以制作一个大的颜色列表，一个列表理解和一点地板划分：

```
import matplotlib
import numpy as np

X = [1,2,3,4]
Ys = np.array([[4,8,12,16],
      [1,4,9,16],
      [17, 10, 13, 18],
      [9, 10, 18, 11],
      [4, 15, 17, 6],
      [7, 10, 8, 7],
      [9, 0, 10, 11],
      [14, 1, 15, 5],
      [8, 15, 9, 14],
       [20, 7, 1, 5]])
nCols = len(X)  
nRows = Ys.shape[0]

colors = matplotlib.cm.rainbow(np.linspace(0, 1, len(Ys)))

cs = [colors[i//len(X)] for i in range(len(Ys)*len(X))] #could be done with numpy's repmat
Xs=X*nRows #use list multiplication for repetition
matplotlib.pyplot.scatter(Xs,Ys.flatten(),color=cs) 
```

[![全部绘制](../Images/46c3342ccbf6b0fbee9945a8ec9613bc.png)](https://i.stack.imgur.com/bMgHn.png)

```
cs = [array([ 0.5,  0\. ,  1\. ,  1\. ]),
 array([ 0.5,  0\. ,  1\. ,  1\. ]),
 array([ 0.5,  0\. ,  1\. ,  1\. ]),
 array([ 0.5,  0\. ,  1\. ,  1\. ]),
 array([ 0.28039216,  0.33815827,  0.98516223,  1\.        ]),
 array([ 0.28039216,  0.33815827,  0.98516223,  1\.        ]),
 array([ 0.28039216,  0.33815827,  0.98516223,  1\.        ]),
 array([ 0.28039216,  0.33815827,  0.98516223,  1\.        ]),
 ...
 array([  1.00000000e+00,   1.22464680e-16,   6.12323400e-17,
          1.00000000e+00]),
 array([  1.00000000e+00,   1.22464680e-16,   6.12323400e-17,
          1.00000000e+00]),
 array([  1.00000000e+00,   1.22464680e-16,   6.12323400e-17,
          1.00000000e+00]),
 array([  1.00000000e+00,   1.22464680e-16,   6.12323400e-17,
          1.00000000e+00])] 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-08-26T14:07:19.523

# 一个简单的修复

如果您只有一种类型的集合（例如没有误差线的散点图），您还可以在绘制它们之后更改颜色，这有时更容易执行。

```
import matplotlib.pyplot as plt
from random import randint
import numpy as np

#Let's generate some random X, Y data X = [ [frst group],[second group] ...]
X = [ [randint(0,50) for i in range(0,5)] for i in range(0,24)]
Y = [ [randint(0,50) for i in range(0,5)] for i in range(0,24)]
labels = range(1,len(X)+1)

fig = plt.figure()
ax = fig.add_subplot(111)
for x,y,lab in zip(X,Y,labels):
        ax.scatter(x,y,label=lab) 
```

# 您需要的唯一一段代码：

```
#Now this is actually the code that you need, an easy fix your colors just cut and paste not you need ax.
colormap = plt.cm.gist_ncar #nipy_spectral, Set1,Paired  
colorst = [colormap(i) for i in np.linspace(0, 0.9,len(ax.collections))]       
for t,j1 in enumerate(ax.collections):
    j1.set_color(colorst[t])

ax.legend(fontsize='small') 
```

即使您在同一个子图中有许多不同的散点图，输出也会为您提供不同的颜色。

[![在此处输入图像描述](../Images/d53b029ca90fcd1a03ffe7f685babae7.png)](https://i.stack.imgur.com/SVO9r.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-03-03T08:11:10.127

您始终可以`plot()`像这样使用该功能：

```
import matplotlib.pyplot as plt

import numpy as np

x = np.arange(10)
ys = [i+x+(i*x)**2 for i in range(10)]
plt.figure()
for y in ys:
    plt.plot(x, y, 'o')
plt.show() 
```

![绘制为散点图但改变颜色](../Images/71570981073d75f3ec9a83bf99429e27.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-18T12:26:25.037

这个问题在 2013 年 1 月和 matplotlib 1.3.1（2013 年 8 月）之前有点棘手，这是您可以在 matpplotlib 网站上找到的最古老的稳定版本。但在那之后，它是相当微不足道的。

因为当前版本`matplotlib.pylab.scatter`支持分配：颜色名称字符串数组、带有颜色映射的浮点数数组、RGB 或 RGBA 数组。

这个答案是献给@Oxinabox 对在 2015 年更正 2013 版自己的无尽热情。

* * *

您有两个选项可以在一次调用中使用具有多种颜色的 scatter 命令。

1.  作为`pylab.scatter`命令支持使用 RGBA 数组来做任何你想要的颜色；

2.  早在 2013 年初，没有办法这样做，因为该命令仅支持整个散点集合的单色。当我在做我的 10000 行项目时，我想出了一个绕过它的通用解决方案。所以它很俗气，但我可以做任何形状、颜色、大小和透明的。这个技巧也可以应用于绘制路径集合，线条集合......

该代码也受到源代码的启发`pyplot.scatter`，我只是复制了 scatter 所做的事情而没有触发它来绘制。

该命令`pyplot.scatter`返回一个`PatchCollection`对象，在文件“matplotlib/collections.py”中返回一个类`_facecolors`中的私有变量`Collection`和一个方法`set_facecolors`。

因此，每当您要绘制散点时，都可以这样做：

```
# rgbaArr is a N*4 array of float numbers you know what I mean
# X is a N*2 array of coordinates
# axx is the axes object that current draw, you get it from
# axx = fig.gca()

# also import these, to recreate the within env of scatter command 
import matplotlib.markers as mmarkers
import matplotlib.transforms as mtransforms
from matplotlib.collections import PatchCollection
import matplotlib.markers as mmarkers
import matplotlib.patches as mpatches

# define this function
# m is a string of scatter marker, it could be 'o', 's' etc..
# s is the size of the point, use 1.0
# dpi, get it from axx.figure.dpi
def addPatch_point(m, s, dpi):
    marker_obj = mmarkers.MarkerStyle(m)
    path = marker_obj.get_path()
    trans = mtransforms.Affine2D().scale(np.sqrt(s*5)*dpi/72.0)
    ptch = mpatches.PathPatch(path, fill = True, transform = trans)
    return ptch

patches = []
# markerArr is an array of maker string, ['o', 's'. 'o'...]
# sizeArr is an array of size float, [1.0, 1.0\. 0.5...]

for m, s in zip(markerArr, sizeArr):
    patches.append(addPatch_point(m, s, axx.figure.dpi))

pclt = PatchCollection(
                patches,
                offsets = zip(X[:,0], X[:,1]),
                transOffset = axx.transData)

pclt.set_transform(mtransforms.IdentityTransform())
pclt.set_edgecolors('none') # it's up to you
pclt._facecolors = rgbaArr

# in the end, when you decide to draw
axx.add_collection(pclt)
# and call axx's parent to draw_idle() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-07T04:33:16.407

这对我有用：

对于每个系列，使用随机 rgb 颜色生成器

```
c = color[np.random.random_sample(), np.random.random_sample(), np.random.random_sample()] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-07T16:58:28.157

对于大型数据集和有限数量的颜色，一个更快的解决方案是使用 Pandas 和 groupby 函数：

```
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import time

# a generic set of data with associated colors
nsamples=1000
x=np.random.uniform(0,10,nsamples)
y=np.random.uniform(0,10,nsamples)
colors={0:'r',1:'g',2:'b',3:'k'}
c=[colors[i] for i in np.round(np.random.uniform(0,3,nsamples),0)]

plt.close('all')

# "Fast" Scatter plotting
starttime=time.time()
# 1) make a dataframe
df=pd.DataFrame()
df['x']=x
df['y']=y
df['c']=c
plt.figure()
# 2) group the dataframe by color and loop
for g,b in df.groupby(by='c'):
    plt.scatter(b['x'],b['y'],color=g)
print('Fast execution time:', time.time()-starttime)

# "Slow" Scatter plotting
starttime=time.time()
plt.figure()
# 2) group the dataframe by color and loop
for i in range(len(x)):
    plt.scatter(x[i],y[i],color=c[i])
print('Slow execution time:', time.time()-starttime)

plt.show() 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-05-30T16:39:15.320

您还可以创建一个颜色列表，其中包括散点图中所需的所有颜色，并将其作为参数提供，例如：

```
colors = ["red", "blue", "green"]
plt.scatter(X, Y, color = colors) 
```

# jquery - Fancybox 打开 href onclick

> ID：12236571
> 
> 赞同：1
> 
> 时间：2012-09-02T14:03:03.657
> 
> 标签：jquery, sockets, fancybox

我正在做一些博客活动的 GeoMap，并且新的评论会使用来自套接字的数据添加到地图中。现在我希望这些评论链接到博客文章，但采用 Fancybox iframe 样式。

由于链接不存在，但我无法让 fancybox 初始化这些链接。

我希望能够做类似的事情：

```
<a href="http://domain/url/to/post" class="fancybox iframe" onclick="trigger_the_link_in_fancybox_iframe"> 
```

到目前为止，这是我对套接字数据的代码：

```
var socket = io.connect('http://debug.dk:1000')
function geodata(content)
{

var jsonstring =  jQuery.parseJSON(content);

var lat = jsonstring.lat;
var long = jsonstring.lng;

 // Add marker

var myLatlng = new google.maps.LatLng(lat,long);

var marker = new google.maps.Marker({
    position: myLatlng,
    animation: google.maps.Animation.DROP,
    map: map,
    visible: false
})

var boxText = document.createElement("div");
    boxText.style.cssText = "border: 3px solid black; margin-top: 8px; background:#333; color:#FFF; font-family:Arial; font-size:12px; padding: 5px; border-radius:6px; -webkit-border-radius:6px; -moz-border-radius:6px;";

    boxText.innerHTML = '<a class="fancybox fancybox.iframe" href="' +  jsonstring.link + '" onclick="jQuery(\'a.fancylink\').trigger(\'click\')";>' + jsonstring.post + '</a>'

    var myOptions = {
             content: boxText
            ,disableAutoPan: false
            ,maxWidth: 0
            ,pixelOffset: new google.maps.Size(-140, 0)
            ,zIndex: null
            ,boxStyle: {
                background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/tipbox.gif') no-repeat",
                opacity: 0.75,
                width: "180px"
             }
            ,closeBoxMargin: "10px 2px 2px 2px"
            ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
            ,infoBoxClearance: new google.maps.Size(1, 1)
            ,isHidden: false
            ,pane: "floatPane"
            ,enableEventPropagation: false
    };

    var ib = new InfoBox(myOptions);
    ib.open(map, marker);

}

socket.on('notification', function(x) { geodata(x); }); 
```

当文档准备好链接不存在时，有什么方法可以动态触发这些fancybox iframe 模式窗口？

希望以上是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:31:35.420

当您想在 JavaScript 中侦听对链接的单击时，您通常会在`click`事件上绑定一个侦听器。问题在于，在绑定之后，新链接可能会添加到侦听器不知道的 DOM 中，因此不会绑定到。

`.on()` [jQuery 通过为您提供方法](http://api.jquery.com/on/)（在 jQuery 1.7 之前您将使用） “解决”了这个问题`.live()`，这使得自动绑定到与特定 jQuery 选择器匹配的未来 DOM 元素成为可能。例如

```
$(document).on('click', '.fancybox', function() { ... }); 
```

你的工作是让 Fancybox 做到这一点。很多人已经在 StackOverflow 上问过这个问题：

*   [Fancybox，让 Fancybox 使用 LIVE() 绑定到加载后加载到页面上的项目](https://stackoverflow.com/questions/2532070/fancybox-getting-fancybox-to-bind-using-live-to-items-being-loaded-onto-the-p)
*   [带有 jQ​​uery 的 .live() 的 Fancybox 库](https://stackoverflow.com/questions/7234940/fancybox-gallery-with-jquerys-live)
*   [Jquery live - 启动一个fancybox iframe](https://stackoverflow.com/questions/5477940/jquery-live-launching-a-fancybox-iframe)

有3个建议的解决方案：

1.  Patch Fancybox in-line 使用 jQuery 来`.on()`代替`.bind()`
2.  每次将新链接添加到 DOM 时更新 Fancybox 绑定
3.  根本不自动绑定 Fancybox，而是在单击链接时手动触发它

我认为你选择哪一个是品味问题。但我可能会选择#3，因为它的开销似乎最小：

```
$(document).on('click', '.fancybox', function(e) {
  e.preventDefault();
  $.fancybox({
    href : $(this).attr('href'),
    type : 'iframe',
    ...
  });
}); 
```

# ms-access - VB6- Open Access DB 或其中一种带有 ADO 对象的形式

> ID：12236572
> 
> 赞同：1
> 
> 时间：2012-09-02T14:03:08.707
> 
> 标签：ms-access, vb6

我的应用程序是用 Visual Basic 6 编写的，它有一个 Access 数据库。我想添加一个 VB 表单并以这种形式打开数据库以使 db 在其中编辑数据库。我有这个代码用于打开：

```
Dim db As DAO.Database

Set db = DBEngine.workspaces(0).opendatabase("c:\ss.mdb") 
```

我在该数据库中有一个表格。这种形式使数据插入过程更快。我想用我的应用程序打开这个访问表单。我该怎么做？

注意：我有这段代码使用 Microsoft access 14 对象库。

```
Dim appaccess As Access.Application, dbstr As String

On Error Resume Next
Set appaccess = New Access.Application
Set appaccess = CreateObject("Access.Application")
dbstr = "c:\ss.mdb"
'Or dbstr="c:\my documents\yourfile.mdb
'put the correct path here.
appaccess.OpenCurrentDatabase dbstr
appaccess.DoCmd.OpenForm "aa", acLayout
appaccess.Visible = True 
```

但是当我运行这段代码时，表单出现了，过了一会儿它就消失了。除了使用访问对象库会产生一些访问版本冲突。所以，虽然没有必要，但我更喜欢用 ADO 对象来做。无论如何，我正在寻找解决我问题的方法。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:08:08.867

有一件事是您在第一段代码中使用的是 DAO，而不是 ADO。也许这并不重要，因为在您的第二个代码块中没有对 db 的引用。所以第一块代码看起来是不必要的。

我不知道为什么你有 2 个 appaccess 语句，你不需要第二个。另外，我建议您注释掉“on error resume next”语句，以便在调试时查看是哪一行导致了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:19:07.340

ADO 提供了与各种数据源交互的方法。尽管您可以将它用于 Access db 文件，但它不提供使用 Access 表单的方法。

使用您当前的方法，您可以`CreateObject`将对象变量设置`appaccess`为新的 Access 应用程序实例，然后在该实例中打开您的表单。但是，当变量超出范围时，Access 实例会关闭并且表单会消失。

您可能会修改您的 VB6 代码以将变量保留在范围内，直到您完成 Access 实例。不幸的是，我不知道如何将该更改融入您的代码的其余部分，而且我从未使用过 VB6。

或者，您可以使用[Shell 函数](http://msdn.microsoft.com/en-us/library/xe736fyk%28VS.71%29.aspx)启动 Access 实例，然后使用`GetObject()`将您的对象变量设置为该实例。

使用该`Shell()`方法，您需要提供`MSACCESS.EXE`. 您可以通过阅读注册表找到它所在的文件夹。这是一个执行此操作的 VBScript 示例，我希望您可以轻松地将其调整为 VB6。

```
Option Explicit
Dim MSAccFolder
Dim RegKey
Dim WSHShell

RegKey = "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\" _
    & "CurrentVersion\App Paths\MSACCESS.EXE\Path"
Set WSHShell = WScript.CreateObject("WScript.Shell")
MSAccFolder= WSHShell.RegRead(RegKey)
WScript.Echo "MS Access Folder: " & MSAccFolder
Set WSHShell = Nothing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T20:00:42.443

如果你打算使用 VB，你应该放弃 Access Automation 的东西并在 VB 中创建你的表单。然后使用 ADO 打开并使用 Access 文件。这比使用 VB 自动打开 Access 表单要高效得多。

# android - 构建后，模拟器中的图像“丢失”

> ID：12236578
> 
> 赞同：2
> 
> 时间：2012-09-02T14:03:49.427
> 
> 标签：android, html

我已经使用 Eclipse 上的 Android SDK 使用“包装”在 Java 中的 jQuery Mobile index.html 文件构建了一个 Android 应用程序。但是，尽管图像在 jQuery mobile 的 Dreamweaver“实时”视图中显示正常，但在成功构建后它们不会出现在 Android SDK 的模拟器中。我已经在项目的 RES/mpdi 文件夹中的图像文件夹中添加了图像文件，并且在 index.html 文件中它们被引用为 images/"...png" 等

我应该以任何方式更改 index.html 文件中的路径吗？此外，它们是 290x381 像素 - 我应该为 AVD 设置不同的尺寸吗？

提前致谢！大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:48:25.157

我会假设你正在使用类似 phonegap

phonegap 有一个白名单，告诉应用程序允许访问哪些 URL。您还可以在其中添加 *，如 /res/xml/phonegap.xml 文件中的[http://www.anujgakhar.com/2011/11/22/phonegap-gotcha-error-whitelist-rejection/所述](http://www.anujgakhar.com/2011/11/22/phonegap-gotcha-error-whitelist-rejection/)

# python - Python中的流程图

> ID：12236579
> 
> 赞同：0
> 
> 时间：2012-09-02T14:03:55.833
> 
> 标签：python, if-statement, io

我需要用 Python 编写一个 prog 来完成以下任务：

提示并接受一个数字的输入，无论是正数还是负数。仅当数字为正时，才使用单个替代“决策”结构打印消息。

这非常简单，但我是 Python 新手，所以即使是最简单的事情我也遇到了麻烦。该程序要求用户输入一个数字。如果数字是正数，它将显示一条消息。如果数字为负数，它将不显示任何内容。

```
num = raw_input ("Please enter a number.")

if num >= 0 print "The number you entered is " + num
else:
    return num 
```

1.  我正在使用 Wing IDE
2.  我收到错误“如果 num >= 0 打印”您输入的数字是“+ num”
3.  如果输入的数字为负数，如何返回开始？
4.  我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:09:59.780

尝试这个：

```
def getNumFromUser():
    num = input("Please enter a number: ")
    if num >= 0: 
        print "The number you entered is " + str(num)
    else:
        getNumFromUser()

getNumFromUser() 
```

您收到错误的原因是您在 if 语句的条件后省略了一个冒号。如果数字为负，为了能够返回到流程的开始，我将代码放在一个函数中，如果`if`条件不满足，该函数会调用自身。您也可以轻松地使用`while`循环。

```
while True:
    num = input("Please enter a number: ")
    if num >= 0: 
        print "The number you entered is " + str(num)
        break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:08:47.690

尝试这个：

```
 inputnum = raw_input ("Please enter a number.")
num = int(inputnum)

if num >= 0:
    print("The number you entered is " + str(num)) 
```

您不需要该`else`部分，因为代码不在方法/函数中。

我同意另一条评论 - 作为初学者，您可能希望将您的 IDE 更改为对您有更多帮助的 IDE（尤其是这样易于修复与语法相关的错误）

（我很确定，该打印应该在一个新的行上并且是有意的，但是......我错了。）

# php - kohana 框架中的 in_array 函数中的数据类型错误？

> ID：12236585
> 
> 赞同：0
> 
> 时间：2012-09-02T14:04:35.560
> 
> 标签：php, kohana

我有两个控制器，一个是基本控制器，另一个`subject`在基本控制器中我从模型中定义了一些数组，看：

```
class Controller_Base extends Controller_Template {

    public $template = 'main';

    public function before()
    {
        parent::before();

        $webs = array();
        $apps = array();

        $app = new Model_Application();
        $apps = $app->get_all();

        $web = new Model_Web();
        $webs = $web->get_all();

        $this->template->content = '';
        $this->template->styles = array('style');
        $this->template->scripts = '';

        $this->template->webs = $webs;
        $this->template->apps = $apps;

    }

} 
```

在控制器主题中，我正在使用函数 in_array

```
class Controller_Subject extends Controller_Base {

public function action_all()
{

    $url = $this->request->param('url');

    $this->template->caption = $url;

    if (in_array($url,$this->template->webs)) { 
        echo "web";
    }
        elseif (in_array($url,$this->template->apps)) { 
        echo "apps";
    }

    $links = array("a"=>"1","b"=>"2");

    $view = View::factory('subject')
                ->set('links',$links);

    $this->template->content = $view;

}

} 
```

但是 Kohana 给我一个错误：

```
ErrorException [ Warning ]: in_array() [<a href='function.in-array'>function.in-array</a>]: Wrong datatype for second argument 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T18:48:37.550

您需要数组变量而不是 Database_Result 对象：

```
...
$apps = $app->get_all()->as_array();
...
$webs = $web->get_all()->as_array();
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:11:37.523

Models返回的数据，即`Database_MySQL_Result`，需要先改成数组。您可以使用

```
foreach($query as $v) 
    $arr[]=$v; 
return $arr; 
```

在你的`get_all()`.

# actionscript-3 - ENTER FRAME 停止工作且没有错误

> ID：12236589
> 
> 赞同：0
> 
> 时间：2012-09-02T14:04:45.880
> 
> 标签：actionscript-3, enterframeevent

什么时候`ENTER_FRAME`停止？
1\. removeEventListener(Event.ENTER_FRAME,abc);
2\. 发生错误或flash 崩溃
3\. 类的实例从阶段
4 中删除。 ?

故事：
我有几个游戏的AS文件，其中一个包含`ENTER_FRAME`添加敌人的内容。
它通常工作正常，但有时它不再召唤敌人了。我没有改变任何东西，我只是按 Ctrl+enter 再次测试。
我曾经`trace`检查过，并找到了`ENTER_FRAME`停靠点。
否则，我放入`trace`另一个AS文件`ENTER_FRAME`，它继续运行。
levelmanage 类中的另一个`ENTER_FRAME`用于测试它是否正常工作，无论是它还是`addEventListener(Event.ENTER_FRAME, process);`停止我也没有收到任何错误，我仍然可以通过键移动我的对象。
levelmange 类不连接到任何对象，如果舞台上的任何东西被移除，它不应该停止。
可能是什么问题呢？

下面的代码是停止运行的代码。

```
package 
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.utils.*;
    public class levelmanage extends MovieClip
    {
        var testing:int=0
        private var sttage = ninelifes.main;
        public var framerate = ninelifes.main.stage.frameRate;
        public var levelprocess:Number = 0;
        public var levelprocesss:Number = 0;
        private var level:int;
        public var randomn:Number;
        public function levelmanage(levell:int)
        {
            level = levell;
            addEventListener(Event.ENTER_FRAME, process);
        }
        function process(e:Event)
        {
            testing+=1
            if(testing>200){
                testing=0
                trace("working")//it don't trace "working"sometimes which means enterframe doesn't going
            }
            if (levelprocess>levelprocesss)trace(levelprocess);
            levelprocesss = levelprocess;
            if (levelprocess>=100 && enemy.enemylist.length==0)
            {
                finish();
                return();
            }
            if (levelprocess<=100 && enemy.enemylist.length<6)
            {
                switch (level)
                {
                    case 1 :
                        arrange("cir",0.5);
                        arrange("oblong",1);
                        break;
                }
            }
            }
        public function arrange(enemyname:String,frequency:Number)
        {
            randomn = Math.random();
            if (randomn<1/frequency/framerate)
            {
                var theclass:Class = Class(getDefinitionByName(enemyname));
                var abcd:*=new theclass();
                sttage.addChild(abcd);
                trace("enemyadded")
                switch (enemyname)
                {
                    case "cir" :
                        levelprocess +=  5;
                        break;
                    case "oblong" :
                        levelprocess +=  8;
                        break;
                }
            }
        }
        private function finish()
        {
            levelprocess=0
            trace("finish!");
            removeEventListener(Event.ENTER_FRAME,process);//not this one's fault,"finish" does not appear.
            sttage.restart();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:12:17.520

您最终可能会遇到“levelprocess==100”和“enemy.enemylist.length==0”的情况，这会导致您的关卡完成并有机会产生更多的敌人，这显然是一种异常情况。这可能是您的错误的原因，尽管很不幸。一个快速的解决方法是插入一个“return”；在调用完成（）之后。您的“levelmanage”对象也可能以某种方式从舞台上移除，并停止接收进入帧事件，这可能由单个对象引发两个“sttage.restart()”调用。在您的“进程”函数中随时检查此条件是否为真，并检查与此行为的相关性。并通过一切手段消除这种情况的可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:37:19.643

```
if(testing>200){
                testing=0
                trace("working")//it don't trace "working"sometimes which means enterframe doesn't going
            } 
```

您评论中的推论不正确。这意味着*EnterFrame*没有触发，*或者* `testing <= 200`.

`process`尝试在函数的开头放置一个跟踪。

如果您没有`removeEventListener`其他地方，那么 EnterFrame 不太可能真的停止 - 从您发布的示例中很难确定，但我敢打赌，问题出在您的逻辑中，而不是 EnterFrame 事件本身的问题。

# spring - 从 Spring Web 应用程序中检索 servlet 上下文路径

> ID：12236590
> 
> 赞同：40
> 
> 时间：2012-09-02T14:04:45.413
> 
> 标签：spring, servlets, contextpath

我希望能够从**Service spring bean**为我的 spring web 应用程序**动态**检索“ *servlet 上下文路径*”（例如`http://localhost/myapp`或） 。`http://www.mysite.com`

 **这样做的原因是我想在要发送给网站用户的电子邮件中使用这个值。

虽然从 Spring MVC 控制器执行此操作非常容易，但从 Service bean 执行此操作并不那么明显。

有人可以请教吗？

编辑：附加要求：

我想知道是否没有**办法在应用程序启动时检索上下文路径**并让我的所有服务始终可以检索它？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-26T07:57:13.380

如果您使用 ServletContainer >= 2.5，则可以使用以下代码获取 ContextPath：

```
import javax.servlet.ServletContext;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component

@Component
public class SpringBean {

    @Autowired
    private ServletContext servletContext;

    @PostConstruct
    public void showIt() {
        System.out.println(servletContext.getContextPath());
    }
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-12-14T09:13:09.453

正如 Andreas 建议的那样，您可以使用[ServletContext](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html)。我像这样使用它来获取组件中的属性：

```
 @Value("#{servletContext.contextPath}")
    private String servletContextPath; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-02T19:01:52.557

我会避免从您的服务层创建对 Web 层的依赖。让您的控制器使用解析路径`request.getRequestURL()`并将其直接传递给服务：

```
String path = request.getRequestURL().toString();
myService.doSomethingIncludingEmail(..., path, ...); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T15:06:09.933

如果服务是由控制器触发的，我假设它是您可以使用 HttpSerlvetRequest 从控制器中检索路径并将完整路径传递给服务。

如果它是 UI 流的一部分，您实际上可以`HttpServletRequest`在任何层中注入，它可以工作，因为如果您注入`HttpServletRequest`，Spring 实际上会注入一个代理，该代理委托给实际的 HttpServletRequest（通过在 a 中保留一个引用`ThreadLocal`）。

```
import javax.servlet.http.HttpServletRequest;
import org.springframework.beans.factory.annotation.Autowired;

public class AServiceImpl implements AService{

 @Autowired private HttpServletRequest httpServletRequest;

 public String getAttribute(String name) {
  return (String)this.httpServletRequest.getAttribute(name);
 }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-25T13:24:03.563

使用 Spring Boot，您可以在以下位置配置上下文路径`application.properties`：

```
server.servlet.context-path=/api 
```

然后，您可以从 a`Service`或`Controller`像这样获取路径：

```
import org.springframework.beans.factory.annotation.Value;

@Value("${server.servlet.context-path}")
private String contextPath; 
```**

# c# - Mono 是用什么语言编写的，如何阅读源代码？

> ID：12236591
> 
> 赞同：5
> 
> 时间：2012-09-02T14:04:50.140
> 
> 标签：c#, mono, clr

我想阅读 Mono 的源代码。[我查了这个网址，这里](http://download.mono-project.com/sources/)有几个文件夹 。

1.  Mono 项目是用什么语言编写的？

2.  我应该下载哪个文件夹/文件来阅读它的源代码？

通过查看文件夹层次结构，似乎（尽管我的假设可能是错误的）它是用多种语言编写的，并且我可以下载其中的任何一种。

但我只是想确定一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T14:55:04.187

您需要 mono 子目录，选择您感兴趣的版本。

CLR 和抖动的等价物是用 C 语言编写的。您可以在 mono/mini 子目录中找到它。

C# 编译器是用 C# 编写的。您可以在 mcs/mcs 子目录中找到它。

框架类是用 C# 编写的。您可以在 mcs/class 子目录中找到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:08:21.973

在大多数情况下，C#。Mono 网站上有一个页面讨论各种语言。所以看这里：[MonoProject - 语言](http://mono-project.com/Languages)

# iphone - 选择多张图片

> ID：12236594
> 
> 赞同：1
> 
> 时间：2012-09-02T14:05:22.493
> 
> 标签：iphone, objective-c, ios

我有这个 UITableView 显示图像，从数据库下载，作为矩阵：每个表行中有 4 个图像。

为了能够从我使用 UITapGestureRecognizer 的视图中选择图像。为了使每个选择都独一无二，我一直在尝试标记每个点击识别器和每个 imageView。这就是问题所在...

我在创建和标记 imageViews 和识别器的 for 循环中放置了一个日志，我可以在输出中看到它们传递了所有值。但是，当我尝试通过稍后按下图像来获取标签时，我总是得到“3”（表格行中的最后一个数字）。这让我觉得即使我在每个循环中都创建了一个新对象，这些标签也会相互覆盖。要么就是这样，要么我读错了。

不相关的部分被剪掉。

```
for (NSInteger i = 0; i < 4; i++){

asyncImage = [[AsyncImageView alloc]
                               initWithFrame:frame];

[asyncImage loadImageFromURL:url];
    asyncImage.tag = i; 
    NSLog(@"TAG %d", asyncImage.tag);
    tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap)];
    tapRecognizer.view.tag = i;
    NSLog(@"TapTAG %d", asyncImage.tag);

    [asyncImage addGestureRecognizer:tapRecognizer];
} 
```

和方法：

```
- (void)handleTap{
NSLog(@"TAP %d", self.tapRecognizer.view.tag);

} 
```

如果你认为我做的完全错了，向正确的方向轻推总是受欢迎的！

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:19:01.733

在将手势识别器添加到视图之前，以下行无效：

```
tapRecognizer.view.tag = i; 
```

这是因为`tapRecognizer`'s`view`最初是`nil`. 在循环的最后一行进行分配`for`以纠正此问题。

此外，您`NSLog`始终显示您添加的最后一个识别器的标签

```
self.tapRecognizer.view.tag // Instance variable 
```

不是触发事件的那个。更改`handleTap`如下：

```
- (void)handleTap:(UITapGestureRecognizer*) tapRecognizer{
    NSLog(@"TAP %d", tapRecognizer.view.tag);
} 
```

您还应该在将识别器添加到视图的方法中将实例变量替换为局部变量，并在选择器名称中`tapRecognizer`添加冒号：`:`

```
action:@selector(handleTap:)
//              HERE: ----^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:16:16.083

我认为你在循环中做错了。
您的循环运行 4 次，每次运行循环时，您都会将 AsyncImageView 存储到 asyncImage 变量（本地或实例？）。因此，第一次运行循环时，您创建一个对象并将其存储在 asyncImage 位置，第二次被覆盖，第三次......

您已经初始化了 4 个 ImageView，但您只引用了最后一个。最后一个拥有正确的 GestureRecognizer，你想要。

什么时候将 ImageView 添加到视图中？

如果您使用实例变量并直接覆盖它，则您添加到屏幕的所有其他 ImageView 都指向`asyncImage`. 并且指针 - 在循环运行 4 次并交换 asyncImage 数据后 - 指向循环中的最后一个图像。

希望你明白，这里有什么问题。

# php - CI 活动导航项

> ID：12236604
> 
> 赞同：0
> 
> 时间：2012-09-02T14:07:05.647
> 
> 标签：php, codeigniter

在站点导航栏中，我有一些逻辑可以确定用户当前正在查看的页面，并为该菜单项提供一个`.active`类。

我想出的代码确实有效，但感觉不是很优雅。你能想出一个更好的方法吗？如何将逻辑移出视图并移入控制器？我怎样才能停止重复自己？

**控制器：**

```
<?php

class Pages extends CI_Controller {

    public function view ($page = 'home') {

        if (!file_exists('application/views/pages/'.$page.'.php'))
            show_404();

        $data['active'] = $page;

        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);

    }
}

?> 
```

**风景：**

```
<ul class="nav">
    <li class="<?php echo($active=='home')?'active':''; ?>"><a href="./">blog</a></li>
    <li class="<?php echo($active=='about')?'active':''; ?>"><a href="about">about</a></li>
    <li class="<?php echo($active=='projects')?'active':''; ?>"><a href="projects">projects</a></li>
    <li class="<?php echo($active=='lab')?'active':''; ?>"><a href="lab">lab</a></li>
    <li class="<?php echo($active=='contact')?'active':''; ?>"><a href="contact">contact</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:25:12.940

也许更优雅？

```
 function is_active($item) {
        return strpos(uri_string(), $item)!==FALSE ? 'active':'';
    }

    <li class="<?=is_active('blog')?>"><a href="./">blog</a></li> 
```

这种方式取决于您的 uris 的复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:19:26.833

您可以尝试使用 CSS。例如，如果您在“关于”页面上，它的正文标签将是`<body id="about">`. 你的 CSS：

```
#about .nav li.about, #contact .nav li.contact, /* etc */ { color: red; } 
```

这意味着您的每个 .nav li 都有一个与之相关的类名（在本例中为“about”）。您的 CSS 文件中会有一些重复（尽管这只是在属性声明之前用逗号分隔所有 li 类名的问题），但视图会保持干净。

# c++ - 如何使用来自 boost.python 的 class_ 参数

> ID：12236605
> 
> 赞同：0
> 
> 时间：2012-09-02T14:07:06.333
> 
> 标签：c++, python, boost-python

第一个问题：class_类有四个参数。

```
class template class_<T, Bases, HeldType, NonCopyable> 
```

Bases 和 HeldType 的参数我不明白。如何使用这些参数。这个文档： http: [//www.boost.org/doc/libs/1_51_0/libs/python/doc/v2/class.html](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/v2/class.html)

第二个问题：我必须做一个python函数作为c++函数的回调。怎么办？我在哪里可以找到一些例子？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:54:51.010

HeldType 很有用，如果你想使用一个特殊的对象来保存你的对象。例如，如果您在实现中使用 shared_ptr<>，您可以将其用作 HeldType。

如果您不知道 shared_ptr 是什么，只需 google 一下它们，它们是一个不错的工具。

可以在此处找到作为 HeldType 的 shared_ptr<> 示例的进一步描述： [Python Wiki, deailing with smart pointers](http://wiki.python.org/moin/boost.python/PointersAndSmartPointers)

# python - GAE 管理控制台自定义页面未显示

> ID：12236606
> 
> 赞同：3
> 
> 时间：2012-09-02T14:07:11.280
> 
> 标签：python, google-app-engine, yaml

我正在处理我的第一个 GAE 项目，但在让自定义页面显示在管理控制台中时遇到了一些问题。我正在关注它的[Google Docs](https://developers.google.com/appengine/docs/python/config/appconfig#Administration_Console_Custom_Pages)，但它似乎对我不起作用。我觉得这可能与这张纸条有关：

> 注意：只有默认版本定义的自定义页面才会显示在管理控制台中。

但我不完全确定它们的含义（应用程序的默认版本？）。

如果我直接访问页面 URL，它们可以正常工作，但链接不会显示在管理控制台侧边栏中。

**YAML：**

```
application: namegenerator
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /css
  static_dir: css

- url: /admin/.*
  script: main.app
  login: admin

- url: /.*
  script: main.app

libraries:
- name: jinja2
  version: latest

builtins:
- remote_api: on

admin_console:
  pages:
  - name: Manual DB Entry
    url: /admin/db/add
  - name: Clear DB
    url: /admin/db/clear 
```

**Python路由：**

```
app = webapp2.WSGIApplication([('/', MainHandler),
                                ('/vote', SubmitVote),
                                ('/clear_session', ClearUserSession),
                                ('/admin/db/clear', ClearDatabase),
                                ('/admin/db/add', ManualAddToDatabase)],
                             debug=True) 
```

顺便说一句，这一切都在我的本地机器上进行测试和运行。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T20:04:52.613

你的代码对我来说看起来不错。您是否部署了您的应用程序？我认为管理页面不会显示在您的 SDK 中。顺便说一句：管理员可以使用管理控制台更改默认应用程序的主要部署版本：[https ://appengine.google.com/](https://appengine.google.com/)

# lua - Lua中的字符串替换

> ID：12236607
> 
> 赞同：2
> 
> 时间：2012-09-02T14:07:13.533
> 
> 标签：lua, replace

我希望在 Lua 中编写一个函数，用另一个字符串替换所有出现的一个字符串，例如：

```
function string.replace(s, oldValue, newValue)
   return string.gsub(s, oldValue, newValue);
end; 
```

我需要的（除非 Lua 已经有一个字符串替换功能）是一个转义 Lua~~正则表达式~~模式字符串的函数（除非 Lua 已经有一个转义~~正~~则表达式模式函数）

我试图开始编写正确的`string.replace`函数：

```
local function EscapeRegularExpression(pattern)
    -- "." ==> "%."
    local s = string.gsub(pattern, "%." "%%%.");

    return s;
end;

function string.replace(s, oldValue, newValue)
    oldValue = EscapeRegularExpression(oldValue);
    newValue = EscapeRegularExpression(newValue);

    return string.gsub(s, oldValue, newValue);
end; 
```

但我不能轻易想到所有需要转义的 Lua~~正则表达式模式关键字。~~

## 奖金示例

另一个需要修复的例子可能是：

```
//Remove any locale thousands separator:
s = string.gsub(s, Locale.Thousand, "");

//Replace any locale decimal marks with a period
s = string.gsub(s, Locale.Decimal, "%."); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:30:08.847

我用

```
-- Inhibit Regular Expression magic characters ^$()%.[]*+-?)
function strPlainText(strText)
    -- Prefix every non-alphanumeric character (%W) with a % escape character, 
    -- where %% is the % escape, and %1 is original character
    return strText:gsub("(%W)","%%%1")
end -- function strPlainText 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:15:57.550

查看有关模式的文档（这是 Lua 5.1 的[第 5.4.1 节](http://www.lua.org/manual/5.1/manual.html#5.4.1)），最有趣的是魔术字符列表：

> x：（其中 x 不是魔术字符之一 ^$()%.[]*+-?）表示字符 x 本身。

`%`在使用 string in 之前使用前面的转义它们，`gsub`你就完成了。

为了更加确定，您可以手动设置一个带有方便的“普通”标志和必要部分字符串的`while`循环。`string.find``string.sub`

# javascript - 为什么像 jQuery 这样的 javascript 库通常更喜欢匿名函数而不是命名函数？

> ID：12236609
> 
> 赞同：3
> 
> 时间：2012-09-02T14:07:43.937
> 
> 标签：javascript

有两种常用的方式来声明一个 javascript 函数

方式一：命名函数

```
function add(a, b) 
{                     
  return a+b;
} 
```

要调用我们使用的上述函数`add(3,4);`

方式二：匿名函数

```
var add = function(a, b) 
{                     
    return a + b;
} 
```

为了调用这个函数，我们再次使用`add(3,4);`

两者都产生相同的结果。当我以这种方式学习 javascript 时，我总是选择方式 1。但是大多数像 jQuery 这样的新 javascript 库似乎都使用方式 2。

为什么在大多数 javascript 库中方式 2 优于方式 1？据我了解，两者都会产生相同的行为。唯一的区别在于方式 1，该函数可用于上面运行的代码，其中声明了函数，这在方式 2 中不正确。这是新 javascript 库使用方式 2 的唯一原因，以便它们可以确保首先包含他们的库然后调用他们的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:16:36.083

匿名函数用于轻松定义对象。库经常放弃命名声明而只使用匿名（即使不是特别需要）的原因是为了提高代码的可读性，因此您没有两种方法可以在代码中声明一件事。

```
var x = function() {
   //constructor
}

x.y = function() {
   //first method
} 
```

# android - rawQuery 不比较整数值

> ID：12236611
> 
> 赞同：0
> 
> 时间：2012-09-02T14:08:00.967
> 
> 标签：android, sqlite

我希望我的 rawQuery 根据这两个条件填充我的数据。但它正在显示和空列表视图。它不是比较第二个条件。

```
Cursor c = db.myDataBase.rawQuery("SELECT _id, word,definition,sentence,yourstory,isfavor FROM words WHERE word LIKE ? AND isfavor= ? ",new String[]{""+employeeId+"%",""+'1'}); 
```

# list - 如何使用 Sharepoint 2010 中的现有视图创建列表视图

> ID：12236612
> 
> 赞同：0
> 
> 时间：2012-09-02T14:08:05.897
> 
> 标签：list, sharepoint, listview

在 Sharepoint 2010 站点中，我必须使用代码/编程方式使用现有视图创建新视图。请帮助我如何实现这一目标。站点中的现有视图包括列、分组、过滤器、排序等。我还必须将所有这些都包含在我的新视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:57:04.247

您可以使用克隆现有视图

```
SPView.Clone(Name, rowlimit, paged, default); 
```

# java - Javalogo 中的红绿灯

> ID：12236624
> 
> 赞同：1
> 
> 时间：2012-09-02T14:09:24.657
> 
> 标签：java

我需要在 Javalogo 中制作一个红绿灯，它是几个库的组合，可以在[这里找到：](http://www.edu-actief.nl/javalogo/download.htm) . 在这第一阶段，我需要制作一个红绿灯，7 秒后变为绿色，5 秒后变为橙色，2 秒后再次变为红色。在第一个项目的最后阶段，我需要淡化颜色，但现在这并不重要。

我做了两个不同的类来尝试构建它。你可以在[这里](http://cl.ly/text/0j2o2X2N2y1l)找到第一个的代码。由于防止垃圾邮件，我无法发布第二个，我将尝试在回复中发布。

**对 javalogo 的一点介绍，以及使用的变量** vooruit：给定点数的移动 penAan()：给像素/移动一个颜色（黑色） penUit()：penAan() 结束 vulAan()：填充创建的正方形/圈子/等 带有颜色 vulUit(): vulAan() 的结束 hoek: 角度 stap: 'vooruit' 移动的点数 rechts(): 向右的角度 left(): 向左的角度 groen: 绿色 oranje: 橙色 rood: 红色交通灯：红绿灯

在此先感谢，雷蒙德

# ios - iOS 设备上的 .plist 路径

> ID：12236628
> 
> 赞同：3
> 
> 时间：2012-09-02T14:10:29.383
> 
> 标签：ios, xcode, ios-simulator

```
-(void)login{
    NSBundle *bundle = [NSBundle mainBundle];
    NSString *path = [bundle pathForResource:@"login" ofType:@"plist"];

    NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:path];

    [plistDict setObject:@"si" forKey:@"stato"];

    [plistDict writeToFile:path atomically: YES];
} 
```

在 iOS 模拟器中，plist 已正确编写，但是当我尝试在 iPhone 上编写 .plist 时，它不起作用。我想这是因为错误的 .plist 路径。iOS设备是否使用不同的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:03:51.263

首先，您必须检查文件是否存在于您的文档目录中。如果它没有在那里退出，那么您可以将其复制到文档目录。你可以这样做

```
-(void)login{
    BOOL doesExist;
    NSError *error;
    NSString *filePath= [[NSBundle mainBundle] pathForResource:@"login" ofType:@"plist"];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString * path =[[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:@"login.plist"]];

    doesExist= [fileManager fileExistsAtPath:path];
    if (doesExist) {
        NSMutableDictionary* plistDict=[[NSMutableDictionary alloc] initWithContentsOfFile:path];                
    }
    else
    {    

        doesExist= [fileManager copyItemAtPath:filePath  toPath:path error:&error];
        NSMutableDictionary* plistDict=[[NSMutableDictionary alloc] initWithContentsOfFile:filePath];        
    }  

    [plistDict setObject:@"si" forKey:@"stato"];

    [plistDict writeToFile:path atomically: YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:25:00.883

您不能写入 [NSBundle mainBundle] 位置。为了像 plist 一样编写文件，您应该以这种方式保存在文档文件夹中：

```
NSArray *arrayPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
NSString *filePathToSave = [arrayPaths objectAtIndex:0]; 
```

如果 plist 是您的应用程序的一部分，我建议您在第一次启动时已经使用 same 将其复制到文档文件夹中`filePathToSave`，这样您就可以一直在那里查看它，无论是阅读还是保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:57:06.053

这是一个很大的错误，因为只有主包是可读的，并且只能在编译时在 App Bundle 中组合。App Bundle 位于一个单独的位置，而您应该写入磁盘的数据应该放在沙盒的 Documents、Temporary 或 Library 文件夹中。

要获得更多了解，请阅读官方[文件系统编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/FileSystemProgrammingGUide/Introduction/Introduction.html)。
你需要知道的一切都写在那里。
您也可以写入子文件夹，并且在与 iTunes 或 iCloud 同步时，您应该在备份方面在上述 3 个主目录之间进行选择。例如，不会备份 tmp 文件夹中的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T14:17:23.377

您不能写入 iOS 设备上的 mainBundle。您必须将文件保存到一个目录并在那里进行修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T14:32:29.040

只是为了将答案带入现代世界 - 你真的应该使用基于 URL 的方法来获取目录：

```
NSFileManager *fileManager = [[NSFileManager alloc] init];

NSURL *URLForDocumentsDirectory = [[fileManager URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject] 
```

# jquery - jquery一一切换多个div

> ID：12236629
> 
> 赞同：3
> 
> 时间：2012-09-02T14:10:34.030
> 
> 标签：jquery, html, toggle

我想做的是在不同的 div 之间切换。这有点难以解释，但我会试一试。

* * *

当页面加载时，会有一个可见的 div 和 4 的 display:none。并且会有一个菜单。链接 1 将显示第一个 div 并隐藏所有其他 div。然后，当单击链接 2 时，可见的 div 将隐藏，而 div2 将显示。单击链接 3 时，可见的 div 将隐藏，而 div3 将显示，依此类推。基本上一次只显示一个 div。

* * *

我写了这个，但它只在有 2 个 div 时才有效。

```
$(function () {
  $('#link').click(function () { 
    $('#div1, #div2').toggle();
  });
}); 
```

但这只会显示隐藏的 div 并隐藏显示的那个。

好的，我做到了，发现它可以更容易地完成。这就是我所做的。它不是很优雅，但它确实有效。

```
$(document).ready(function () {
  $('.slidingDiv').hide();
  $('.show_hide').show();

  $('.show_hide').click(function () {
    $('.slidingDiv').slideToggle();
    $('.slidingDiv2').hide('slow');
    $('.slidingDiv3').hide('slow');
    $('.slidingDiv4').hide('slow');
    $('.slidingDiv5').hide('slow');
  });
});

$(document).ready(function () {
  $('.slidingDiv2').hide();
  $('.show_hide2').show();

  $('.show_hide2').click(function () {
    $('.slidingDiv2').slideToggle();
    $('.slidingDiv').hide('slow');
    $('.slidingDiv3').hide('slow');
    $('.slidingDiv4').hide('slow');
    $('.slidingDiv5').hide('slow');
  });
});

$(document).ready(function () {
  $('.slidingDiv3').hide();
  $('.show_hide3').show();

  $('.show_hide3').click(function () {
    $('.slidingDiv3').slideToggle();
    $('.slidingDiv').hide('slow');
    $('.slidingDiv2').hide('slow');
    $('.slidingDiv4').hide('slow');
    $('.slidingDiv5').hide('slow');
  });
});

$(document).ready(function () {
  $('.slidingDiv4').hide();
  $('.show_hide4').show();

  $('.show_hide4').click(function () {
    $('.slidingDiv4').slideToggle();
    $('.slidingDiv').hide('slow');
    $('.slidingDiv2').hide('slow');
    $('.slidingDiv3').hide('slow');
    $('.slidingDiv5').hide('slow');
  });
});

$(document).ready(function(){
  $('.slidingDiv5').hide();
  $('.show_hide5').show();

  $('.show_hide5').click(function () {
    $('.slidingDiv5').slideToggle();
    $('.slidingDiv').hide('slow');
    $('.slidingDiv2').hide('slow');
    $('.slidingDiv3').hide('slow');
    $('.slidingDiv4').hide('slow');
  });
}); 
```

和`<a href="#" class="show_hide"><span class="nav">link</span></a>`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T14:18:38.540

如果您按如下方式定义链接​​：

```
<a href="#" data-toggle="#div1">link 1</a>
<a href="#" data-toggle="#div2">link 2</a>

<div id="div1">div 1</div>
<div id="div2">div 2</div> 
```

然后你可以让事情变得简单：http: [//jsfiddle.net/A8Ymj/](http://jsfiddle.net/A8Ymj/)。

```
$("a[data-toggle]").on("click", function(e) {
  e.preventDefault();  // prevent navigating
  var selector = $(this).data("toggle");  // get corresponding selector from data-toggle
  $("div").hide();
  $(selector).show();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T14:55:39.077

[**jsFiddle 演示**](http://jsfiddle.net/sbbhL/)

HTML：

```
<a href='#' class='link'>link 1</a>
<div id='#div1' class='panel active'> Visible </div>
<a href='#' class='link'>link 2</a>
<div id='#div1' class='panel'> Visible </div>
<a href='#' class='link'>link 3</a>
<div id='#div1' class='panel'> Visible </div> 
```

CSS：

```
div.panel { display:none; }
div.panel.active { display:block; } 
```

JS：

```
$(function()   {
    $(".link").click(function(e) {
        e.preventDefault();
        $('div.panel:visible').hide();
        $(this).next('div.panel').show();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T14:24:14.383

我会在链接的 ID 和 div 之间创建一个链接：

```
$(".link").click(function() {

    var idIndex = parseInt(this.attr("id")); // Extracts the number of the ID
    $(".divs").hide();
    $("#div" + idIndex).show();

}); 
```

所以你基本上先隐藏所有的div，然后显示与点击的ID对应的那个。这对用户来说是不明显的。因此，而不是根据当前状态进行切换。将其视为全部关闭，然后切换您想要的那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-22T21:58:05.633

这可能会帮助您切换 n 个 div'。

```
**$(document).ready(function(){
        $("a[data-toggle]").on("click", function(e) {
          e.preventDefault();  // prevent navigating
          var selector = $(this).data("toggle");  // get corresponding selector from data-toggle
          //alert(selector);
          $(selector).fadeIn(1000);
          $(selector).siblings().hide();
        });
    });** 
```

# javascript - Stellar.js 可以在窗口调整大小时重新调整元素偏移量吗？

> ID：12236631
> 
> 赞同：12
> 
> 时间：2012-09-02T14:10:59.970
> 
> 标签：javascript, jquery

有没有办法在浏览器/窗口调整大小时重新初始化 stellar.js，以便重新调整元素偏移量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T22:04:22.530

首先，听起来您可能遇到水平对齐问题（假设它是垂直站点）。如果是这样，您可能只需要禁用水平滚动：

```
$.stellar({
    horizontalScrolling: false
}); 
```

如果这不能解决您的问题，Stellar.js 有一个未记录的功能，允许您刷新插件。

例如，假设您像这样使用 Stellar.js：

```
$.stellar(); 
```

您可以使用以下内容刷新它：

```
$.stellar('refresh'); 
```

因此，要在调整大小时刷新它，您可以执行以下操作：

```
$(window).resize(function() {
    $.stellar('refresh');
}); 
```

希望这可以为您解决所有问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T19:33:00.997

经过一番摸索，我已经弄清楚了这一点。就我而言，我有“幻灯片”，其中包含我的恒星元素，它们的大小与视口的全宽/高度一致。我需要调整它们的大小以改变平板电脑的方向。

```
$(window).resize(function(){
    winHeight = $(window).height();
    $("#scrollWrapper > div").height(winHeight);

    // Find out all my elements that are being manipulated with stellar
    var particles = $(window).data('plugin_stellar').particles;

    // Temporarily stop stellar so we can move our elements around
    // data('plugin_stellar') let's me access the instance of stellar
    // So I can use any of its methods. See stellar's source code
    $(window).data('plugin_stellar').destroy();

    $.each(particles, function(i, el){
        // destroy() sets the positions to their original PIXEL values. 
        // Mine were percentages, so I need to restore that.
        this.$element.css('top', '');

        // Once the loop is finished, re-initialize stellar
        if(particles.length - 1 == i){
            $(window).data('plugin_stellar').init();
        }
    });
}); 
```

如果元素设置为左/上的原始像素值并不重要，那么您可以一个接一个地调用destroy & init：

```
$(window).data('plugin_stellar').destroy();
$(window).data('plugin_stellar').init(); 
```

如果您在一个元素上实例化 stellar（即，`$("#element").stellar();`而不是`$.stellar();`），则将“window”替换为您的选择器。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-11T02:11:48.500

我还注意到移动设备上的奇怪偏移量可能是由于 Firefox/Chrome 在向下滚动时调整 webview 大小的方式造成的，当位置栏再次可见时？

您的问题的答案在[文档](http://markdalgleish.com/projects/stellar.js/docs/#configuration)的一部分：“配置一切”：

```
// Refreshes parallax content on window load and resize
responsive: false, 
```

因此，默认情况下这是错误的。要启用此功能，请使用`.stellar( {responsive:true} )`

真正的问题是...为什么默认禁用此功能？它似乎解决了我注意到的问题，除了 iOS。

# iphone - 在应用程序中以编程方式添加 MPVolumeview

> ID：12236636
> 
> 赞同：2
> 
> 时间：2012-09-02T14:12:05.197
> 
> 标签：iphone, airplay, mpvolumeview

尝试使用以下代码在应用程序中以编程方式添加 MPVolumeView

```
 MPVolumeView *_volumeView = [ [MPVolumeView alloc] init];
[_volumeView setShowsVolumeSlider:YES];
[_volumeView setShowsRouteButton:YES];
[_volumeView sizeToFit];
[view addSubview:_volumeView]; 
```

但是遇到了很多语义问题，以至于将未声明的标识符 MPVolumeView 和无效的操作数用于二进制表达式

```
@property (nonatomic, strong) MPVolumeView *volumeView; 
```

为上述语句获取红色消息，即未知类型的 MPVolumeView 和具有保留或强的加属性必须是对象类型。

```
 @synthesize volumeView = _volumeView; 
```

这是在应用程序中以编程方式添加 MPVolumeView 的正确方法吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T14:22:12.853

MPVolumeView 是 MediaPlayer 框架的一部分。您是否将其包含在您的应用程序中，是否包含`#import <MediaPlayer/MediaPlayer.h>`在您的 .m 或 .h 文件中？

此外，如果您声明了一个属性，您应该创建一个新的局部变量 _volumeView。将第一行替换为：

```
_volumeView = [ [MPVolumeView alloc] init]; 
```

# haskell - Haskell，如何运行它？

> ID：12236637
> 
> 赞同：-1
> 
> 时间：2012-09-02T14:12:05.857
> 
> 标签：haskell

我有这个代码：

```
divideByTen :: (Floating a ) => a -> a
divideByTen = (/10) 
```

如果我把它放到 .hs 文件中。似乎这还不够。

（我在 Mac osx 上使用 ghci）。

谢谢你。

在我这样做之后：load *** *.hs

我收到了这个错误

```
byby.hs:1:17:
    Class `Floating' used as a type
    In the type signature for `divideByTen':
      divideByTen :: (Floating a) a -> a
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:18:06.517

您在代码片段中显示的方式很好，但您的错误清楚地表明您`=>`在类型签名中缺少 a 。

以后请复制/粘贴有问题的代码。如果你这样做了，那么你的编辑器可能已经转换`=>`为 Unicode 或其他一些转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T15:18:05.757

问题是箭头`=>`似乎掉到了某个地方，正如`divideByTen`GHC 喷出的错误消息中给出的类型签名中没有这个箭头所证明的那样。

确保您的 .hs 文件的内容与您在上面给出的代码片段完全匹配，并且应该没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T15:08:30.187

正如它所写的，你的代码对我有用。

您是否使用了可能对源代码进行奇怪转换的 ide？转到命令行并转储文件内容以进行检查。

行如何缩进？您的文件中是否还有其他代码？空格可以改变 Haskell 中行的解析方式。

# c++ - cmake .. 做什么？

> ID：12236642
> 
> 赞同：38
> 
> 时间：2012-09-02T14:13:04.093
> 
> 标签：c++, makefile, cmake, box2d

我得到了 Box2D 项目源代码并想编译它的测试平台部分。项目文件夹包含以下文件夹： freeglu glui testbed(a demo) helloword(a demo) Box2D Build CMakeFiles

所有不同的文件夹中有许多 CMakeLists.txt。我在想我应该 cmake 所有这些文件，以便在所有需要的地方创建 make 文件。我读了这个（作为我想做的指示）：

```
wget http://box2d.googlecode.com/files/Box2D_v2.2.1.zip
unzip Box2D_v2.2.1.zip
cd Box2D_v2.2.1/Build
cmake ..
make 
```

cmake .. 有什么作用？构建文件夹中没有 CMakeLists.txt。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-02T15:54:31.327

**cmake**是一个 Makefile 生成器。

当您调用时`cmake [path]`，您要求它按照中给出的说明在当前*目录中**生成一个 Makefile**`[path]/CMakeLists.txt`*

 *通常cmake在工作的时候会输出一些信息，在没有错误的情况下，你可以输入“make”来执行你新创建的Makefile。

*CMakeLists.txt*文件可以引用子目录中的其他*CMakeLists.txt*文件，因此您通常只对**顶层目录的***CMakeLists.txt*感兴趣，而不是其他的。

 **使用空的“build”目录是一种称为“out-of-source build”的技术，其中所有生成的文件（.o、可执行文件、Makefile、.anything）都在单独的“build”目录中生成，而不是与源文件。如果要全部清除，可以删除构建目录的所有内容。

其实你可以把你的“build”目录放在任何地方，只要你给cmake最上面的CMakeLists.txt的正确路径。您甚至可以拥有多个构建目录。如果您同时需要多个不同的构建（使用不同的选项、不同版本的 gcc 等），这将非常有用

在旧程序中，您也生成 Makefile，但使用`./configure`（这称为自动工具。您可能已经遇到过）。cmake 被认为是自动工具的继承者。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-02T14:15:41.130

`cmake ..`在当前目录中生成makefile，使用`../CMakeLists.txt`文件作为起点。**在此之后执行的make**命令构建程序，使用生成的 makefile(s) 作为输入。这便于将源代码和构建结果保存在不同的文件夹中。一般语法是：**cmake source-dir**（当然还有很多其他的开关）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-02T14:14:52.537

嗯，`..`是父文件夹的简写，所以它可能会根据它在`Box2D_v2.2.1`.***

# ssl - 在heroku上，绝对没有办法将heroku上的https裸域重定向到带有wwws的非裸域？

> ID：12236644
> 
> 赞同：32
> 
> 时间：2012-09-02T14:13:56.697
> 
> 标签：ssl, heroku, https, subdomain, ssl-certificate

查看 Heroku 文档中的此链接：

[https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords#subdomain-redirection](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords#subdomain-redirection)

黄色盒子说：

> [通过 SSL（即https://mydomain.com](https://mydomain.com) ）直接向裸域发出的请求 在使用子域重定向时会遇到警告。这是意料之中的，并且可以通过仅传播和公开您的安全 URL 的子域格式来避免。

这真的是唯一的解决方案吗？只是希望人们不要在没有 wwws 的情况下输入 url？

我遇到了几个问题，人们只是从 url 中删除子域以访问主页（在 https 上）并遇到 ssl 警告？

有没有其他人想出解决这个问题的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T18:36:48.147

到目前为止，我们发现的最好的想法是设置两个带有少量 nginx 配置的 Amazon EC2 微型机器实例。然后，配置两个弹性 IP 地址以指向这些 EC2 实例，并将点 2 A 记录指向这些 IP 地址。这样，如果硬件出现问题，您始终可以将弹性 IP 指向另一台 EC2 机器，而无需等待 DNS 传播。访问[https://example.com](https://example.com)和[http://example.com](http://example.com)的用户将收到 301 到域并且没有 SSL 警告。

```
server {
  listen 80;
  listen 443 default_server ssl;
  server_name example.com;
  ssl_certificate server.crt;
  ssl_certificate_key server.key;
  return 301 https://www.example.com$request_uri;
} 
```

另一个想法是使用[wwwizer](http://wwwizer.com)提供的优质服务。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-22T02:50:29.947

最好的选择是使用类似 DNSimple 的[ALIAS 记录类型](http://blog.dnsimple.com/zone-apex-naked-domain-alias-that-works/)，它为 CNAME 记录提供根域支持。

然后，您可以像这样设置您的记录（假设使用[SSL 端点](https://devcenter.heroku.com/articles/ssl-endpoint)进行 SSL）。

```
| type  | name | target                  |
| ALIAS |      | tokyo-123.herokussl.com |
| CNAME | www  | tokyo-123.herokussl.com | 
```

尽管有其他 DNS 提供商提供类似的 ALIAS 记录功能（例如 DNSMadeEasy 的 ANAME），但它不在 DNS 规范中。这就是为什么我们尚未提供有关使用此类记录的详尽文档的原因。但是，鉴于缺乏对那些想要根域支持的人的明确指导，我们的目标是在不久的将来纠正这个问题。

还要留意[使用 AWS Route 53 作为 Heroku 应用程序的 DNS](https://devcenter.heroku.com/articles/route-53)。我相信很快就能在 R53 上实现这一目标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T14:32:50.710

301 重定向是正确的方法，因为 RFC1033 指出您不能将区域顶点（根域）指向 CNAME 记录 - 它必须是 A 记录。

话虽这么说，但还是有一些 DNS 服务提供了这样做的可能性。我自己还没有尝试过，但[CloudFlare](https://www.cloudflare.com/)提供了一个免费层，并于去年开始为区域顶点提供 CNAME。

# php - 超过一周时更新mysql行

> ID：12236649
> 
> 赞同：1
> 
> 时间：2012-09-02T14:14:45.527
> 
> 标签：php, mysql

我想用一个代表状态的数字来更新 mySql 行。例如 ：

```
1 = New
2 = Old 
```

默认情况下，当一个新数据被添加到 mySql. 状态自动设置为“1”。这就是重点。当一天超过一周（7天）时，我想将其自动更新为“2”。这是代码：

```
<?php
$_toDay=date("Y-m-d");
.....
while($rec_gid=mysql_fetch_array($result_gid)){
$gid=$rec_gid['goods_id'];
$dateDB=$rec_gid['goods_date'];

$_diff = abs(strtotime($_toDay) - strtotime($dateDB));
$_years = floor($_diff / (365*60*60*24));
$_mon = floor(($_diff - $_years * 365*60*60*24) / (30*60*60*24));
$_days = floor(($_diff - $_years * 365*60*60*24 - $_mon*30*60*60*24)/ (60*60*24));

if($_days>7){//if older than a week then change status
$sql_updStts="update goods_db set stts='2' where id='$_gid'";
$result_updStts=mysql_db_query($dbname,$sql_updStts);
}//close while
?> 
```

我已经尝试过这个脚本，但结果并不像我预期的那样。甚至 $_days 也超过一周。mySql 没有更新。我不知道为什么。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:17:59.537

尝试

```
 UPDATE goods_db SET stts = '2' 
 WHERE DATEDIFF(CURDATE(),goods_date) >= 7 
 AND stts='1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:23:09.420

使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**避免 SQL 注入

使用 PDO 扩展的示例：

```
<?php

    $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (?, ?)");
    $stmt->bindParam(1, $name);
    $stmt->bindParam(2, $value);

    // insert one row
    $name = 'one';
    $value = 1;
    $stmt->execute();

?> 
```

所以在你的情况下

```
<?php

    $query = "UPDATE Goods_DB 
              SET stts = ? 
              WHERE DATEDIFF(CURDATE(),goods_date) > 6 AND stts = ?"

    $valueA = 2;
    $valueB = 1;

    $stmt = $dbh->prepare($query);
    $stmt->bindParam(1, $valueA);
    $stmt->bindParam(2, $valueB);

    $stmt->execute();

?> 
```

养成使用 PDO 或 MySQLi 扩展的习惯。

这样做的另一件事是在服务器上创建一个`EVENT SCHEDULER`。在这种情况下，服务器将`goods_db`每天自动更新。

```
DELIMITER $$
CREATE
    EVENT `archive_blogs`
    ON SCHEDULE EVERY 1 DAY
    DO BEGIN
                  UPDATE Goods_DB 
                  SET stts = 2 
                  WHERE DATEDIFF(CURDATE(),goods_date) > 6 AND stts = 1;
    END $$
DELIMITER ; 
```

**[有关此链接的更多信息（如何在 MySQL 中创建计划事件）。](http://www.sitepoint.com/how-to-create-mysql-events/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T14:24:09.960

你是想保存`$_gid`还是`$gid`？试试这个

```
$sql_updStts=sprintf("update goods_db set stts='2' where id='%s'",$_gid) 
```

# xaml - 如何在 Microsoft.Samples 项目中更改颜色

> ID：12236655
> 
> 赞同：0
> 
> 时间：2012-09-02T14:16:52.577
> 
> 标签：xaml, windows-8, microsoft-metro, visual-studio-2012

通常在 Microsoft 示例项目 (XAML) 中，页面上有白色背景色。我怎样才能改变它？示例：[http ://code.msdn.microsoft.com/windowsapps/Simple-Communication-Sample-eac73290](http://code.msdn.microsoft.com/windowsapps/Simple-Communication-Sample-eac73290)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T18:55:11.700

您问题的具体答案是它受主题控制。查看 App.xaml：

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
x:Class="ListViewSimple.App"
RequestedTheme="Light" > 
```

[请注意， RequestedTheme](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.requestedtheme.aspx)有一个“Light”主题和一个“Dark”主题属性。

现在，如果您想知道如何将 Light 主题从白色背景切换到黄色背景（顺便说一句，这不是推荐），您可能需要查看[此资源以获取覆盖 Metro 应用程序资源](http://www.markermetro.com/2012/07/technical/windows-8-overriding-metro-app-resources/)。确保如果您确实覆盖，您这样做是经过深思熟虑的；Windows UI 设计理念的首要主题是为用户提供一致的体验。

# ruby - 如何计算 Ruby 1.8.5 中的重复哈希值（Sketchup Ruby API）

> ID：12236656
> 
> 赞同：1
> 
> 时间：2012-09-02T14:17:01.290
> 
> 标签：ruby, hash, ruby-1.8, sketchup

我需要计算重复项，它们需要 100% 相同才能增加我的计数，但我不能使用 Ruby 1.8.5 中的任何内容，此代码将在 google sketchup 的插件中运行

### 谷歌 Sketchup Ruby API

```
puts VERSION
1.8.5

puts RUBY_PLATFORM
i686-darwin8.10.1

product = 'Glass'
x = width
y = length
z = density

product_list = [
                { "product" => 1, "x" => 200, "y" => 100, "z" => 18},
                { "product" => 1, "x" => 200, "y" => 100, "z" => 18},
                { "product" => 1, "x" => 300, "y" => 100, "z" => 18},
                { "product" => 2, "x" => 300, "y" => 100, "z" => 18},
                { "product" => 2, "x" => 100, "y" => 100, "z" => 18},
                { "product" => 2, "x" => 100, "y" => 100, "z" => 18},
                { "product" => 3, "x" => 100, "y" => 100, "z" => 18}
               ];

product_list_result = product_list.count_duplicate();

product_list_result = [
     { "product" => 1, "x" => 200, "y" => 100, "z" => 18, "count" = 2},
     { "product" => 1, "x" => 300, "y" => 100, "z" => 18, "count" = 1},
     { "product" => 2, "x" => 300, "y" => 100, "z" => 18, "count" = 1},
     { "product" => 2, "x" => 100, "y" => 100, "z" => 18, "count" = 2},
     { "product" => 3, "x" => 100, "y" => 100, "z" => 18, "count" = 1}
                      ]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:14:19.533

简短的回答：

```
h = Hash.new 0
product_list.each {|p| h[p] += 1}
product_list_result = h.keys.map{|k| k["count"] = h[k]; k} 
```

更长的答案解释了这是如何工作的。从您的数据开始：

```
product_list = [
                { "product" => 1, "x" => 200, "y" => 100, "z" => 18},
                { "product" => 1, "x" => 200, "y" => 100, "z" => 18},
                { "product" => 1, "x" => 300, "y" => 100, "z" => 18},
                { "product" => 2, "x" => 300, "y" => 100, "z" => 18},
                { "product" => 2, "x" => 100, "y" => 100, "z" => 18},
                { "product" => 2, "x" => 100, "y" => 100, "z" => 18},
                { "product" => 3, "x" => 100, "y" => 100, "z" => 18}
               ];

# First, create a hash to count the number of unique products. Have the initial
# count be 0.
h = Hash.new 0

# Add each product to the hash count.
product_list.each {|p| h[p] += 1} 
```

现在你有一个以产品为键的散列，并计为值：

```
h = {{"z"=>18, "y"=>100, "x"=>100, "product"=>3}=>1, {"z"=>18, "y"=>100, "x"=>300, "product"=>1}=>1, {"z"=>18, "y"=>100, "x"=>200, "product"=>1}=>2, {"z"=>18, "y"=>100, "x"=>300, "product"=>2}=>1, {"z"=>18, "y"=>100, "x"=>100, "product"=>2}=>2} 
```

现在将其转换为您想要的数组格式：

```
product_list_result = []
h.keys.each do |k|
    # since each key is a product hash, we can add count to it
    k["count"] = h[k]

    # Now, add that to the array
    product_list_result << k
end 
```

结果是：

```
product_list_result = [
                       {"z"=>18, "y"=>100, "x"=>100, "product"=>3, "count"=>1},
                       {"z"=>18, "y"=>100, "x"=>300, "product"=>1, "count"=>1},
                       {"z"=>18, "y"=>100, "x"=>200, "product"=>1, "count"=>2},
                       {"z"=>18, "y"=>100, "x"=>300, "product"=>2, "count"=>1},
                       {"z"=>18, "y"=>100, "x"=>100, "product"=>2, "count"=>2}
                      ] 
```

数组转换可以更简洁地完成：

```
product_list_result = h.keys.map{|k| k["count"] = h[k]; k} 
```

h.keys 从哈希 h 返回一个键数组，这只是您列表中的唯一产品。然后，函数映射将该数组中的每个对象替换为后面的块的结果，该块的结果只是将计数值添加到产品哈希中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:41:59.123

```
product_list.dup.group_by { |h| h }.each_value.map do |value| 
  value.first.tap { |hash| hash['count'] = value.count }
end

=> [{"product"=>1, "x"=>200, "y"=>100, "z"=>18, "count"=>2},
 {"product"=>1, "x"=>300, "y"=>100, "z"=>18, "count"=>1},
 {"product"=>2, "x"=>300, "y"=>100, "z"=>18, "count"=>1},
 {"product"=>2, "x"=>100, "y"=>100, "z"=>18, "count"=>2},
 {"product"=>3, "x"=>100, "y"=>100, "z"=>18, "count"=>1}] 
```

`dup`是为了不修改原来的`product_list`

经测试`ruby 1.8.7`

# php - 安全警告贝宝

> ID：12236660
> 
> 赞同：1
> 
> 时间：2012-09-02T14:17:55.773
> 
> 标签：php, web, paypal

当离开 Paypal 标准返回我的 WP 网站时，我收到警告消息 -

“尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。您确定要继续发送此信息吗？” 可以做些什么来防止此消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:21:12.580

将您的页面放入`https`. 给出错误是因为来自不安全供应商的脚本正在向安全供应商请求数据。在大多数情况下，它是完全无害的，但在 Internet Explorer 中却是一个令人讨厌的“功能”。

# google-visualization - 为每个标签的每日费用自动生成图表数据

> ID：12236664
> 
> 赞同：1
> 
> 时间：2012-09-02T14:18:45.047
> 
> 标签：google-visualization, google-sheets, google-docs

使用谷歌电子表格。这是复制我的表需求的尝试：

```
2012-08-30    food     $15    expensive dinner
2012-08-30    food     $10    pizza!
2012-08-30    other    $30    that damn painting
2012-09-02    home     $40    can't remember
2012-09-02    other    $5     toilet paper
2012-09-02    home     $2     buying new flowers 
```

我已经可以用它做两件事，但它远非最佳，它变得可以忽略不计。

首先，[使用`SUMIF`](https://webapps.stackexchange.com/questions/18277/sum-of-all-cells-in-google-spreadsheet-where-matching-row-fits-a-value)：

```
food    $25    <-    SUMIF(B:B;"food";C:C)
other   $35
home    $42 
```

然后，将其[与`ARRAYFORMULA`](https://stackoverflow.com/questions/9128987/sumifs-function-in-google-spreadsheet)：

```
 food home other
2012-08-30  $25   $0   $30 <- ARRAYFORMULA(SUMIF(A:A&B:B;2012-08-30&"food";C:C))
2012-09-02   $0  $42    $5 
```

看看哪里会变得太大？出色地...

我想做2个图表。当然，最主要的是第二种：

1.  *馅饼*，来自第一个例子。在使用 时`SUMIF`，我需要明确地写`"food"`在那里（或参考，无论如何）。可以自动填充找到的每个**标签**吗？

    虽然我可以没有这个，但它可能是第二个主要问题的答案；

2.  *来自*arrayformula**的绘图*或*时间线*。它应该沿时间跟踪图中的每个标签。*

 **甚至有可能做到吗？如果没有，有什么建议吗？如果需要（并且值得），我很想[开始编写脚本。](https://developers.google.com/apps-script/your_first_script)或者离开谷歌。或从电子表格一起（最后）。也许是 Python？红宝石？

或者，如果太麻烦的话，也许我会保持原样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:25:45.547

一般来说，电子表格不是数据库，这是您快速接近需要数据库的任务。然而，幸运的是（取决于你如何看待它，无论如何），谷歌电子表格确实*有*一些类似数据库的访问 API，所以你可以做你想做的事：

[http://googleajaxsearchapi.blogspot.com/2008/03/introducing-latest-ajax-api-google.html](http://googleajaxsearchapi.blogspot.com/2008/03/introducing-latest-ajax-api-google.html)

[https://developers.google.com/chart/interactive/docs/querylanguage](https://developers.google.com/chart/interactive/docs/querylanguage)

[http://blog.ouseful.info/2009/05/18/using-google-spreadsheets-as-a-databace-with-the-google-visualisation-api-query-language/](http://blog.ouseful.info/2009/05/18/using-google-spreadsheets-as-a-databace-with-the-google-visualisation-api-query-language/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:33:57.640

使用 QUERY，您可以使用以下方法生成第一个表（带有标题）：

```
=QUERY(B:C;"select B, sum(C) where B != '' group by B label B 'Category', sum(C) 'Total'";0) 
```

这应该很容易绘制为饼图。您可以为图表选择比当前表格更长的范围以适应不断增长的数据，并且饼图将方便地忽略空白行。

可以使用以下方法生成第二个表：

```
=QUERY(A:C;"select A, sum(C) where A is not null group by A pivot B";0) 
```

您可以尝试各种图表类型以实现所需的可视化。

* * *

编辑

根据您的评论提供一个填充零而不是空白的表格；假设表格的左上角（空白）单元格是`I1`，那么在`I2`：

```
=SORT(UNIQUE(A:A)) 
```

并在`J1`：

```
=TRANSPOSE(SORT(UNIQUE(B:B))) 
```

然后在`J2`：

```
=ArrayFormula(IF(I2:I*LEN(J1:1);MMULT(I2:I=TRANSPOSE(A:A);(J1:1=B:B)*C:C);IFERROR(1/0))) 
```

请注意，这会将函数填充`CONTINUE`到电子表格的最底部和最右侧，覆盖其路径中的所有内容。所以最好有一张专门用于这张桌子的纸。**

# c# - Server.MapPath VS。@Href("~/SomeFile.cshtml")

> ID：12236667
> 
> 赞同：3
> 
> 时间：2012-09-02T14:18:59.660
> 
> 标签：c#, asp.net, .net, asp.net-mvc, razor

我已经按照 MSDN 上的教程进行了操作，它们（据我所见）似乎都`@Href()`用于 URL。例如

`<a href="@Href("~/")">Some link</a>`但我记得几个月前在这里读到使用 Server.MapPath() 更安全，例如

`<a href="@Server.MapPath("~/")">Some link</a>`因为它将其转换为完整路径，这意味着您无法编辑底层代码来更改表单提交到的位置（或类似的东西）。这是真的？

我应该使用`Href()`or`Server.MapPath()`吗？哪个更好，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T14:30:39.847

更安全？我看不出有什么原因——但我不会在 Razor 中使用它们。原因如下：

据我记得，该`Href`功能是从 ASP.NET 1.0 开始的。**在执行 WebForms** (!) 代码时，您只需粘贴 ~-URL 即可`<a href="~/" runat="server">Some link</a>`。

但是，如果您正在使用 ASP.NET **MVC**（我假设您正在这样做，因为您使用的是 Razor），您应该使用`Url.Content()`适合`Url.Action()`名称的方式。

# crm - 如果记录被保存，想要使字段只读，openerp

> ID：12236670
> 
> 赞同：3
> 
> 时间：2012-09-02T14:19:35.960
> 
> 标签：crm, openerp, erp

`checkboxes`如果记录已保存，我想将某些字段 ( ) 设为只读。下一个分配的人可以在某些领域发生变化。但是必须限制某些字段，任何人都无法更改它们。这样做的一种方法是赋予用户或组权限。但我想以另一种方式。有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T05:52:28.727

这个条件是完美的

`<field name="freezing_on_all_channels" attrs="{'readonly':[('id','!=', False)]}"/>`

或`attrs="{'readonly':[('id','!=',0)]}"`（注意：0 不在引号 '0' 中），

你只是犯了一个错误；如果您也放入 `<"field name="id" invisible="1"/>`视图，那么它将按预期工作。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T05:32:18.183

当状态发生变化时，这是可能的。
您可以通过在 .xml 中写入“attrs={}”属性来实现。
例如：

> < field name="your_field" attrs="{'readonly':[('state','=','saved')]}"/>

希望这能解决您的问题。
谢谢你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:41:34.703

试试下面

```
'your_field': fields.char('Name', type='char',store=True,readonly=True), 
```

# nhibernate - 会话没有给出正确的记录？

> ID：12236672
> 
> 赞同：2
> 
> 时间：2012-09-02T14:19:58.130
> 
> 标签：nhibernate, orm

我想保留一个会话，但是当我回滚事务时，事务得到 isActive=false，所以我不能使用相同的事务在下一个语句中提交和回滚。那么我需要创建新的交易，但这里出了什么问题？

```
 var session = NHibernateHelper.OpenSession();/* It returns new session. */
        var transaction1 = session.BeginTransaction();
        var list1 = session.Query<Make>().ToList(); /* It returs 4 records. */
        session.Delete(list1[2]);

        /* After Rollback, transaction is isActive=false so I can not commit 
         * and rollback from this transaction in future. so I need to create new transaction.
         */
        transaction1.Rollback();

        var transaction2 = session.BeginTransaction();

        /* It returns 3 records. 
         * I am not getting object(which was deleted but after that rollback) here why ? 
         */
        var list2 = session.Query<Make>().ToList(); 
```

有人知道这里出了什么问题吗？我没有得到已删除的回滚对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:31:14.553

刷新意味着 NHibernate 将确保所有更改都保存到数据库中。也就是说，它将确保执行所有必要的 SQL 语句，使会话与数据库保持同步。ISession 将执行将 ADO.NET 连接状态与内存中保存的对象状态同步所需的 SQL 语句。

在您的情况下：当事务是回滚时，所有​​这些更改都将被还原，但会话仍然没有同步到数据库。

所以 Session.Flush() 会这样做。

[http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-endingsession](http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-endingsession)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:32:36.267

我花了一段时间才弄清楚，但解决方案很容易。

由于没有inside，所以 SQL是在里面自动执行`Flush`的，在.`transaction1``DELETE``transaction2``SELECT`

这种行为是预期的。

# html - 图标签是否适合网站徽标

> ID：12236673
> 
> 赞同：5
> 
> 时间：2012-09-02T14:20:06.667
> 
> 标签：html

这可以是标记，但我不知道它在语义上是否正确

```
<figure class="logo">
    <a href="http://sitios/julioverne">
        <img src="logo.jpg" alt="" title="" />
    </a>
    <figcaption>Brand Name</figcaption>
</figure> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T14:23:08.587

> 该`figure`元素表示一个内容单元，可以选择带有标题，它是自包含的，通常作为单个单元从文档的主要流程中引用，并且可以从文档的主要流程中移出而不影响文件的意义。

对我来说似乎适合一个标志。

（[参考](http://dev.w3.org/html5/markup/figure.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:21:55.157

尽管@lanzz 提供的定义看起来很合适，但徽标不应该是一个数字，根据这个：

[http://html5doctor.com/downloads/h5d-sectioning-flowchart.png](http://html5doctor.com/downloads/h5d-sectioning-flowchart.png)

图形用于文档中引用的内容，就像一本关于解剖学的教科书，它解释了你的心脏在哪里，它告诉你“看图 1”。徽标不会像网站中那样引用，它们纯粹是展示性的。

# php - 如何从 php onclick 语句中获取价值

> ID：12236674
> 
> 赞同：0
> 
> 时间：2012-09-02T14:20:18.907
> 
> 标签：php, javascript, html, onclick

我有以下代码行：

```
 echo '<INPUT TYPE="submit" name="delete" value="Delete account" onClick="return confirm('Are you sure you want to delete this account?')">'; 
```

我如何能够确定用户输入的是或否？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:24:13.207

PHP 是服务器端的，它不会在客户端做任何事情。单击客户端，因此 PHP 无法处理此问题。

onclick 事件是 JavaScript，它位于客户端。[在Mozilla Docs](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)中阅读有关 onclick 事件的更多信息。

[`confirm()`](https://developer.mozilla.org/nl/index.php?title=Talk%3aen/DOM%3awindow.confirm&action=print)返回一个，`boolean`真或假。`true`当用户单击*“是”*时，`false`当用户单击*“否”*时。

如果您想将其发送`boolean`到 PHP，您需要使用 AJAX 请求，但我认为您不需要它，因为您想停止提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:22:29.980

您的代码中有语法错误，您需要转义内部`'`：

```
echo '<INPUT TYPE="submit" name="delete" value="Delete account"
   onClick="return confirm(\'Are you sure you want to delete this account?\')">'; 
```

您可以添加一个带有激活 js 标志的小脚本，以检测是否确认删除。例如：

```
<input type="hidden" name="js_active" value="false">
<script type="text/javascript">
document.getElementsByName('js_active')[0]="true";
</script> 
```

因此，如果公式被传输并且`js_active`是`true`您可以猜测用户已确认删除。如果是`false`javascript 可能已停用，您无法知道删除是否已确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T14:23:37.290

由于`confirm`将根据用户单击的内容返回真或假，因此您将“知道”用户单击是，当请求到达您的服务器时，因为如果用户单击否，您将阻止提交。

除此之外，除非您在点击时修改请求内容，否则无法找出用户点击了什么，例如，您必须将点击结果作为参数发送到服务器，作为表单的一部分或通过 URL 参数。但请注意，这只会在用户在浏览器中激活 JavaScript 时发送。

# indexing - Solr 增量导入不起作用

> ID：12236677
> 
> 赞同：0
> 
> 时间：2012-09-02T14:20:34.303
> 
> 标签：indexing, solr, delta

我已经配置了 Solr 并且索引/运行顺利。唯一的问题是它不能进行增量导入。它只转储如下消息：

> INFO: id 是 SolrSchema 中的必填字段。但在 DataConfig 中找不到

但我将模式中的 id 定义为：

```
<field column="id" name="id_l"/> 
```

另一条消息显示增量导入未完成：

> 信息：已完成实体的 ModifiedRowKey：获得的描述行：0

我的架构有：

```
<entity name="user"  pk="id" query="SELECT * FROM users"
   deltaImportQuery="SELECT * FROM users WHERE id = '${dataimporter.delta.id}'"
   deltaQuery="SELECT id FROM users WHERE updated_at > '${dataimporter.last_index_time}'"
 >
 .. 
```

**编辑：** 以上是[根据 Wiki 设置的](http://wiki.apache.org/solr/DataImportHandler)。但是在查看了 example-DIH 的 DataConfig 之后，我将上面的内容更改为：

```
<entity name="user"  pk="id" query="SELECT * FROM users"
  deltaQuery="SELECT id FROM users WHERE updated_at > '${dataimporter.last_index_time}'"  
> 
```

但它仍然不起作用。

我的问题是 - 我如何更改架构以便能够增量导入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:44:51.580

我调试了app，问题是app或者mysql存储时间不正确，也就是比实际时间还早。因此，当运行 Delta 索引时，Solr 将正确的时间扔给查询，但由于它比“mysql”时间晚，所以它什么也没做。[这个链接](http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201103.mbox/%3CAANLkTinYvZoup=n-iANgAFUs1todCMLDgsBJxrwVjHRP@mail.gmail.com%3E)帮助我调试。

# module - 有关为 opencart 开发付款方式的文档？

> ID：12236679
> 
> 赞同：4
> 
> 时间：2012-09-02T14:20:58.830
> 
> 标签：module, documentation, payment-gateway, payment, opencart

在 opencart 网站上开发自己的支付方式（或任何模块）的信息相当稀少。在其他任何地方是否有关于此主题的更好信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:31:32.843

不幸的是，它根本没有记录在案。我的建议是从以前的支付网关（例如 PayPal 标准或专业版）复制文件并在此基础上进行构建，或者下载免费的支付网关并从其中的文件中工作

# android - 锁定屏幕上的活动

> ID：12236685
> 
> 赞同：0
> 
> 时间：2012-09-02T14:21:59.083
> 
> 标签：android, android-activity

我有一个关于 Android 活动的问题。

如何锁定屏幕上的当前活动并阻止任何导航/开始新活动？

我有一个应用程序，基于 WebSocket 通信系统。在新事务开始时，我需要等待获得任何通信结果（成功或错误），然后我才能运行新活动或转到以前的活动。

但是如何在那里实施呢？我需要通用方法，该方法将能够拦截标准键的任何导航尝试和用户代码的任何导航尝试。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:31:27.293

事实上，我认为这是不可能的。当然，您可以覆盖`onBackPressed`Activity 的方法，这样用户将无法返回。您还可以设置 FullScreenMode 以对用户隐藏状态栏。但是，这很难拦截 Home 键。它是由 Android 设计的，因此用户将始终能够访问主屏幕。

所以一般来说，我会推荐`ProgressDialog` [在这里使用参考](http://developer.android.com/reference/android/app/ProgressDialog.html)，你甚至`setCancelable(false)`可以防止它被**“返回”**但是**“主页”**仍然会最小化你的应用程序并返回主屏幕。

# c# - 如何更改 HttpClient 响应的编码

> ID：12236687
> 
> 赞同：14
> 
> 时间：2012-09-02T14:22:08.850
> 
> 标签：c#, asynchronous, windows-8

我正在尝试使用 VS2012 及其 Async Await 关键字来学习异步编程。这就是我写这段代码的原因：

```
protected override async void OnNavigatedTo(NavigationEventArgs e)
{
    string get = await GetResultsAsync("http://saskir.medinet.se");

    resultsTextBox.Text = get;
}

private async Task<string> GetResultsAsync(string uri)
{
    HttpClient client = new HttpClient();

    return await client.GetStringAsync(uri);
} 
```

问题是，当我尝试调试应用程序时，它给了我一条错误消息：

> ContentType 中提供的字符集无效。无法使用无效字符集将内容读取为字符串。

我想这是因为该网站有一些瑞典字符，但我找不到如何更改响应的编码。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-02T16:46:08.807

您可能必须检查编码选项并获得正确的选项。否则，此代码应该让您继续响应。

```
private async Task<string> GetResultsAsync(string uri)
{
    var client = new HttpClient();
    var response = await client.GetByteArrayAsync(uri);
    var responseString = Encoding.Unicode.GetString(response, 0, response.Length - 1);
    return responseString;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-19T08:05:59.570

如果你想要一个更通用的方法，在我的 UWP 案例中，如果有人有一个 Unicode，那么添加 if 会很好：

```
var response = await httpclient.GetAsync(urisource);

if (checkencoding)
{
    var contenttype = response.Content.Headers.First(h => h.Key.Equals("Content-Type"));
    var rawencoding = contenttype.Value.First();

    if (rawencoding.Contains("utf8") || rawencoding.Contains("UTF-8"))
    {
        var bytes = await response.Content.ReadAsByteArrayAsync();
        return Encoding.UTF8.GetString(bytes);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T19:41:35.040

WinRT 8.1 C#

```
using Windows.Storage.Streams;
using System.Text;
using Windows.Web.Http;

// in some async function

Uri uri = new Uri("http://something" + query);
HttpClient httpClient = new HttpClient();

IBuffer buffer = await httpClient.GetBufferAsync(uri);
string response = Encoding.UTF8.GetString(buffer.ToArray(), 0, (int)(buffer.Length- 1));

// parse here

httpClient.Dispose(); 
```

# java - ThreadPoolExecutor 的 maximumPoolSize 是如何工作的？

> ID：12236694
> 
> 赞同：9
> 
> 时间：2012-09-02T14:23:22.917
> 
> 标签：java, android, multithreading

我正在尝试了解 ThreadPoolExecutor 类。我已阅读此[答案](https://stackoverflow.com/questions/10379314/how-does-keep-alive-work-with-threadpoolexecutor)和 Javadoc。但我的实验与该描述不符：

我使用工厂初始化线程池以跟踪 id

```
int tcounter = 0;
ThreadPoolExecutor executor = new ThreadPoolExecutor(2, 4, 1, TimeUnit.MINUTES,
        new ArrayBlockingQueue<Runnable>(1000), new ThreadFactory() {

            @Override
            public Thread newThread(Runnable r) {
                return new mThread(tcounter++, r);
            }
        });

public class mThread extends Thread {
    int id;

    private mThread(int id, Runnable run) {
        super(run);
        GLog.e("created thread " + id);
        this.id = id;
    }

} 
```

然后任务：

```
public class mRunanble implements Runnable {
    int value = 0;

    private mRunanble(int value) {
        super();
        this.value = value;
    }

    @Override
    public void run() {
        SystemClock.sleep(3000);
        Thread t = Thread.currentThread();
        if (t instanceof mThread) {

            GLog.e("Say " + (value) + " on thread " + ((mThread) t).id);
        } 

    }

} 
```

并为按钮分配操作：

```
executor.execute(new mRunanble(i++)); 
```

但是我向该按钮发送垃圾邮件，并且从未创建第三个线程，那么 ThreadPoolExecutor 构造函数 ( `maximumPoolSize=4`) 中的第二个参数是什么。我预计要创建 4 个线程，其中 2 个线程在执行结束 1 分钟后被杀死

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T14:42:33.343

来自 API [`ThreadPoolExecutor`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html#ThreadPoolExecutor%28int,%20int,%20long,%20java.util.concurrent.TimeUnit,%20java.util.concurrent.BlockingQueue%29)：

> 如果运行的线程数多于 corePoolSize 但少于 maximumPoolSize，则仅当队列已满时才会创建新线程。

您的队列永远不会填满，因为它的容量为`1000`. 如果将容量更改为`1`，您将看到`Thread`s 正在创建。

该类[`Executors`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)使用 a[`SynchronousQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)作为其`newCachedThreadPool`方法，因此您可能也需要考虑使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:31:27.843

在 ThreadPoolExecutor 中，maxPoolSize 出现在 corePoolSize no 不足以执行您的任务并且如果所有 no 都被任务占用，那么只会再创建一个线程来执行任务。这个 no 可以增长到 maxPoolSize。

**编辑**您误解了 maxPoolsize 概念。请参阅下面的链接。

[http://www.bigsoft.co.uk/blog/index.php/2009/11/27/rules-of-a-threadpoolexecutor-pool-size](http://www.bigsoft.co.uk/blog/index.php/2009/11/27/rules-of-a-threadpoolexecutor-pool-size)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-27T14:29:11.490

要使 ThreadPool 创建新的附加线程（根据**maximumPoolSize**参数扩展池大小），请尝试执行以下简单示例：

```
public class Main {

    public static void main(String[] args) throws InterruptedException {

        ThreadPoolExecutor tpe = new ThreadPoolExecutor(
                1, 2, 500, TimeUnit.MILLISECONDS,
                new LinkedBlockingQueue<>(1));
        System.out.println("init pool size= " + tpe.getPoolSize() + ", queue size=" + tpe.getQueue().size());

        tpe.execute(new Task("1st", 10000));
        Thread.sleep(1000);
        print(tpe, "1st");

        tpe.execute(new Task("2nd", 0));
        Thread.sleep(1000);
        print(tpe, "2nd");

        tpe.execute(new Task("3d", 2000));
        Thread.sleep(1000);
        print(tpe, "3d");

        while (tpe.getPoolSize()>1) {           
            Thread.sleep(100);
        }
        System.out.println("pool size= " + tpe.getPoolSize() + ", queue size=" + tpe.getQueue().size());
        tpe.shutdown();
    }

    private static void print(ThreadPoolExecutor tpe, String name) {
        System.out.println("After " + name + " execute -  pool size= " + tpe.getPoolSize() + ", queue=" + tpe.getQueue());
    }

    private static class Task implements Runnable {

        private final String name;
        private final long time;

        Task(String name, long time) {
            this.name = name;
            this.time = time;
        }

        @Override
        public void run() {
            System.out.println("Run " + Thread.currentThread().getName() + "-" + name);
            try {
                Thread.sleep(time);
            } catch (InterruptedException ex) {
                Thread.currentThread().interrupt();
            }
            System.out.println("Finish " + Thread.currentThread().getName() + "-" + name);
        }

        @Override
        public String toString() {
            return name;
        }

    }
} 
```

您将获得展示**maximumPoolSize**和**keepAliveTime**影响的输出：

```
init pool size= 0, queue size=0
Run pool-1-thread-1-1st
After 1st execute -  pool size= 1, queue=[]
After 2nd execute -  pool size= 1, queue=[2nd]
Run pool-1-thread-2-3d
After 3d execute -  pool size= 2, queue=[2nd]
Finish pool-1-thread-2-3d
Run pool-1-thread-2-2nd
Finish pool-1-thread-2-2nd
pool size= 1, queue size=0
Finish pool-1-thread-1-1st 
```

# php - 来自php的javascript var太长

> ID：12236696
> 
> 赞同：0
> 
> 时间：2012-09-02T14:23:50.037
> 
> 标签：php, javascript

在这段代码中，我将 PHP var 传递给 javascrip 以在 div 元素中显示它。当字符串少于 50 个字符时，它工作得很好，但是当它有点长时它会崩溃。这是我的代码：

```
$sql3 = "SELECT * FROM $table2 WHERE id = '$newsId'";
$result3 = mysql_query($sql3);
$thisNews = mysql_fetch_array($result3);
?>
newsContent = "<? echo $thisNews['news']; ?>";

newsDiv  = "<div class='newsBox'>";
newsDiv += "<div class='newsTitle'><? echo $rowArray[$i]['title']; ?></div>";
newsDiv += "<div class='newsBody'>"+newsContent+"</div>";
newsDiv += "<div class='newsFoot'>autor: <? echo $thisNews['author']; ?> - <? echo $thisNews['site']; ?> - <? echo $thisNews['source']; ?></div>";
box.append(newsDiv); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:47:23.493

更好的方法是`newsContent = <?php echo json_encode($thisNews['news']); ?>;`——这将负责对字符串中的任何特殊字符进行编码，例如引号会终止您的 JS 字符串并将您放入字符串其余部分的代码上下文中，这不是一件好事。

# php - PHP Amazon webservice 未捕获的 curl 异常

> ID：12236697
> 
> 赞同：0
> 
> 时间：2012-09-02T14:23:50.650
> 
> 标签：php, curl, ssl

我正在尝试创建一个网站来通过亚马逊网络服务管理一些文件和链接。我是这项服务的新手，目前遇到了一些问题。我正在尝试设置我的环境，但是在确保我的 Web 服务器上启用了所有扩展之后（curl，以及来自[http://aws.amazon.com/articles/4261?_encoding=UTF8&jiveRedirect=1#configurecredentials](http://aws.amazon.com/articles/4261?_encoding=UTF8&jiveRedirect=1#configurecredentials)的所有其他扩展）我我的 apache 错误日志中仍然出现错误：

```
PHP Fatal error: Uncaught exception 'cURL_Exception' with message 'cURL resource: Resource id #10; cURL error: SSL certificate problem, verify that the CA cert is OK. Details:\nerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed (cURL error code 60). See http://curl.haxx.se/libcurl/c/libcurl-errors.html for an explanation of error codes.' in C:\\www\\thorastrup\\client_app\\sdk-1.5.14\\lib\\requestcore\\requestcore.class.php:829\nStack trace:\n#0 C:\\www\\thorastrup\\client_app\\sdk-1.5.14\\services\\s3.class.php(910): RequestCore->send_request()\n#1 C:\\www\\thorastrup\\client_app\\sdk-1.5.14\\services\\s3.class.php(1147): AmazonS3->authenticate('php-sdk-getting...', Array)\n#2 C:\\www\\thorastrup\\client_app\\sdk-1.5.14\\_samples\\cli-s3_get_urls_for_uploads.php(60): AmazonS3->create_bucket('php-sdk-getting...', 's3-us-west-1.am...')\n#3 {main}\n thrown in C:\\www\\thorastrup\\client_app\\sdk-1.5.14\\lib\\requestcore\\requestcore.class.php on line 829 
```

我根本不明白这个错误，如果有人能告诉我错误，我会很高兴？（我在 Windows 7 上使用 php-5 运行 apache）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:55:20.423

见[http://engin.bzzzt.biz/2012/02/02/windows-php-curl-ssl-certificate-problem/](http://engin.bzzzt.biz/2012/02/02/windows-php-curl-ssl-certificate-problem/)

至于 CA-bundle 文件，您可以按照这些说明进行操作，也可以从[http://curl.haxx.se/ca/cacert.pem下载它](http://curl.haxx.se/ca/cacert.pem)

# c# - C# 在不导航的情况下获取 Htmldocument

> ID：12236703
> 
> 赞同：0
> 
> 时间：2012-09-02T14:24:16.680
> 
> 标签：c#

```
HtmlDocument doc = webBrowser1.Document; 
```

如果我浏览到一个页面，我只能获取 Html 文档。

是否可以获得 Html 文档：

1.  不浏览网页？
2.  不使用 Html 敏捷包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:05:29.657

这是这样做的一种方法

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
WebResponse response = request.GetResponse();
WebBrowser wb = new WebBrowser();
wb.DocumentStream = response.GetResponseStream();
wb.ScriptErrorsSuppressed = true;
HtmlDocument doc = wb.Document; 
```

与 WebBrowser 控件相同，流的内容需要几秒钟才能填充控件。完成后还要确保进行适当的处​​理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:07:45.400

您需要一个已加载的文档才能有一个根元素。尝试加载“about:blank”以获取一个空文档，而不依赖任何其他 URL 或文件。

# c# - AjaxControlToolKit 图像在电子邮件消息中显示为 html 标记

> ID：12236706
> 
> 赞同：3
> 
> 时间：2012-09-02T14:24:33.230
> 
> 标签：c#, asp.net, html, email, send

我使用 AjaxControlToolKit 作为某种 WYSWYG 编辑器来创建电子邮件。

我想要完成的是能够允许人们使用编辑器添加图像并将最终产品（以 HTML 形式）作为电子邮件发送。电子邮件的图像存储在服务器上。收到的电子邮件应该是带有图像和文字的普通营销电子邮件。

现在的问题是在编辑器中格式化的文本在接收者的电子邮件客户端中正确显示，但图像显示为`<img src=....`. 图像的路径是正确的，并且图像在离开编辑器屏幕之前确实显示在编辑器中。

测试的电子邮件是 Hotmail（没有提示允许图像）、Gmail 和 MS Outlook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:47:22.033

找到了解决方案。这是非常粗糙和不雅的。

```
txtDaMessage.Text = txtDaMessage.Text.Replace("&lt ;", "<");
txtDaMessage.Text = txtDaMessage.Text.Replace("&gt ;", ">"); 
```

逻辑是因为`AjaxControlToolKit`想要自动将我的`'<'`和`'>'`我的html图像标签分别转换为`"&lt ;"`和`"&gt ;"`，我将使用replace方法强制它们恢复到原始形式。

# jquery - 使用 jQuery.ui.maps 查找标记 -

> ID：12236707
> 
> 赞同：1
> 
> 时间：2012-09-02T14:24:43.443
> 
> 标签：jquery, google-maps, jquery-plugins

我正在使用 jQuery.ui.maps 来添加标记并（希望）找到它们。

我像往常一样添加了一些标记（包括图标），但带有标签和值。

```
map.gmap('addMarker', { 'icon':'themes/images/cafetaria.png',                                                            
'tag':'Mensa', 'position': position }).click(clickcb); 
```

后来，我尝试找到具有该标签和值的所有标记并隐藏它们，但它从未找到任何标记。

```
map.gmap('find', 'markers', { 'property': 'tag', 'value': 'Mensa' }, function(marker, found) {
        if(found){marker.setVisible(false);}
    }); 
```

我看不到问题，因为我基本上是从 devs hp 复制代码。帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T20:14:58.703

我找到了一种解决方法。我在标记元素上设置 id 和标题。

`$('#map_canvas').gmap('addMarker', {id: i, 'position': new google.maps.LatLng(cityList[i][1], cityList[i][2]), title: cityList[i][0]});`

基于标题或 ID 的选择：

```
$('#map_canvas').gmap('find', 'markers', { }, function(marker) {
    if(marker.title == markerName){marker.setVisible(false);}
}); 
```

或者

```
$('#map_canvas').gmap('find', 'markers', { }, function(marker) {
    if(marker.id == markerId){marker.setVisible(false);}
}); 
```

您可以在下面找到一个工作示例：

```
<!doctype html>
<html lang="en">
   <head>
        <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
        <script type="text/javascript" src="http://jquery-ui-map.googlecode.com/svn/trunk/ui/min/jquery.ui.map.min.js"></script>
        <script type="text/javascript">

            var chicago = new google.maps.LatLng(41.850033,-87.6500523);
            var mobileDemo = { 'center': '41,-87', 'zoom': 7 };

            function initialize()
            {
                $('#map_canvas').gmap({ 'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':false });
            }

            var cityList = [
                ['Chicago', 41.850033, -87.6500523, 1],
                ['Illinois', 40.797177,-89.406738, 2]
            ];

            function addMarkers()
            {
                for (var i = 0; i < cityList.length; i++) 
                {
                    var $marker = $('#map_canvas').gmap('addMarker', {id: i, 'position': new google.maps.LatLng(cityList[i][1], cityList[i][2]), title: cityList[i][0]});
                    $marker.click(function() {
                        $('#map_canvas').gmap('openInfoWindow', {'content': cityList[this.id][0]}, this);
                    });
                }
            }

            function hideMarkerByTitle(markerName)
            {
                $('#map_canvas').gmap('find', 'markers', { }, function(marker) {
                    if(marker.title == markerName){marker.setVisible(false);}
                });         
            }

            function hideMarkerById(markerId)
            {
                $('#map_canvas').gmap('find', 'markers', { }, function(marker) {
                    if(marker.id == markerId){marker.setVisible(false);}
                });         
            }

             $(document).on("pageinit", "#basic-map", function() {
                initialize();
            });

            $(document).on('click', '.add-markers', function(e) {
                e.preventDefault();
                addMarkers();
            });

            $(document).on('click', '.hide-chicago', function(e) {
                e.preventDefault();
                hideMarkerByTitle("Chicago");
                // uncomment to try by id
                //hideMarkerById(0);
            });

        </script>
    </head>
    <body>
        <div id="basic-map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">   
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
                <a href="#" class="add-markers" data-role="button" data-theme="b">Add Some More Markers</a>
                <a href="#" class="hide-chicago" data-role="button" data-theme="b">Hide Chicago</a>
            </div>
        </div>      
    </body>
</html> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T22:13:10.433

这似乎是 3.0rc 的问题。为了修复它，我找到了一种解决方法 - 您必须将标记属性定义为数组并将带有值的数组传递给 find 方法：

```
$('#map_canvas').gmap({'center': '42.2303, 24.7890' }).bind('init', function () {
$('#map_canvas').gmap('addMarker', { 'foo': ['bar'], 'position': '42.2303, 24.7890' });
$('#map_canvas').gmap('find', 'markers', { 'property': 'foo', 'value': ['bar'] }, function(marker, found) {
    marker.setVisible(found);
}); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T23:39:11.260

vMap 是一个带有 HTML 5 的闪电 jQuery 插件，它通过发送一个简单的 JSON 数据结构使 Google Maps 变得简单。

[https://github.com/vhugogarcia/vMap](https://github.com/vhugogarcia/vMap)

它帮助我解决了很多谷歌地图的标记问题，但如果需要，它还添加了列出位置的功能。

# android - 如何根据应用程序小部件中文本视图中的小部件大小调整文本大小？

> ID：12236708
> 
> 赞同：6
> 
> 时间：2012-09-02T14:24:55.220
> 
> 标签：android, android-appwidget

我已经为 Android 编程了一段时间，但这真的让我很困惑。

所以我有一个带有 textview 的简单 appwidget。如果用户调整小部件的大小，我只是希望该文本视图内的文本字体大小按比例放大/缩小，以便在调整应用程序大小时使文本更大。我尝试了几种解决方案，但一切都失败了：

1.  只需使用“sp”（缩放像素）单位作为字体大小 - 当小部件大小发生变化时，这不会缩放文本（我也没想到它！）。

2.  用我自己的和覆盖的 onSizeChanged 方法扩展 TextView。但是您不能在小部件中拥有基本 UI 类的后代（文档也说明了这一点）。

由于没有任何方法可以获取当前的 appWidget 大小，我只是被困在这里。

是的，我知道一种解决方案是创建不同版本的小部件，如 1x4 和 2x4 等，但肯定还有另一种方法吗？

欢迎任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T14:43:55.160

无法根据父大小自动缩放 TextView 的文本。一种解决方法是覆盖`onDraw`TextView 的方法并手动实现缩放。

至于应用小部件：您无法检索可调整大小的应用小部件的当前大小，因为它们旨在`ListView`与`GridView`容器一起使用。这些容器将自动管理内容的缩放和间距，并且如果内容不适合 appwidget 的当前大小，它们会使其自身可滚动。

如果您不使用 a`ListView`或 a`GridView`在我看来，“缩放”appwidget 组件的最佳方法是您已经提到的方法：使用不同的不可调整大小的 appwidgets。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T09:25:29.173

您可以调用[AppWidgetManager.getAppWidgetOptions(OPTION_APPWIDGET_MAX_WIDTH)](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#getAppWidgetOptions%28int%29)来获取最大宽度（与小部件的高度相同）并相应地调整文本大小。限制：此方法从 API 级别 16 可用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-15T14:22:25.233

[结合上面的答案和来自https://stackoverflow.com/a/7875656/6364860](https://stackoverflow.com/a/7875656/6364860)的可爱代码片段，我得到了它的工作方式：

*注意我有一个带文本的圆形按钮，所以我只需要最小的尺寸。

```
@Override
public void onAppWidgetOptionsChanged(Context context, AppWidgetManager appWidgetManager, int appWidgetId, Bundle newOptions){

    super.onAppWidgetOptionsChanged(context,appWidgetManager,appWidgetId,newOptions);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
        int maxWidth = newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH);
        int maxHeight = newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT);

        int size = Math.min(maxHeight,maxWidth);
        int pxSize = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,size,context.getResources().getDisplayMetrics());

        RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget_button);
        float newSize = refitText(context.getString(R.string.button_text),pxSize);

        remoteViews.setTextViewTextSize(R.id.widget_text, TypedValue.COMPLEX_UNIT_PX,newSize);

        appWidgetManager.updateAppWidget(appWidgetId,remoteViews);
    }

}

private float refitText(String text, int textWidth)
{
    if (textWidth <= 0)
        return 0;

    float hi = 100;
    float lo = 2;
    final float threshold = 0.5f; // How close we have to be

    Paint testPaint = new Paint();

    while((hi - lo) > threshold) {
        float size = (hi+lo)/2;
        testPaint.setTextSize(size);
        if(testPaint.measureText(text) >= textWidth)
            hi = size; // too big
        else
            lo = size; // too small
    }
    // Use lo so that we undershoot rather than overshoot
    return lo;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-23T02:33:10.650

这是原始方式，但它有效：

```
AppWidgetManager manager = AppWidgetManager.getInstance(this);
ComponentName thisWidget = new ComponentName(this, AppWidget.class);
int[] widgetId = manager.getAppWidgetIds(thisWidget);
Bundle options;
options = manager.getAppWidgetOptions(widgetIds[1]);
int minWidth = options.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH);
int maxWidth = options.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH);
int minHeight = options.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT);
int maxHeight = options.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT);
int maxtextLen = (maxWidth / currentTextSize) * (maxHeight / currentTextSize);

Boolean isFit = maxtextLen > textInWidgetTextView.length(); 
```

# c# - 如何在 Youtube Api 上获取视频的上传状态？

> ID：12236715
> 
> 赞同：0
> 
> 时间：2012-09-02T14:25:30.280
> 
> 标签：c#, youtube-api, status, uploading

我正在开发一个应用程序正在使用 C# 上的 Youtube Api 2.0 将视频上传到 youtube

这是我的代码

```
 Video newVideo = new Video();

    newVideo.Title = "kankaaaa";
    newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
    newVideo.Keywords = "education, funny deneme";
    newVideo.Description = "bilgi mi istiyorsun";
    newVideo.YouTubeEntry.Private = false;
    newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag",
    YouTubeNameTable.DeveloperTagSchema));
    newVideo.YouTubeEntry.MediaSource = new MediaFileSource("c:\\cat.flv",
          "video/quicktime");      
   // newVideo.Private = true;

 Video createdVideo = Request.Upload(newVideo); 
```

Video 类位于**Google.YouTube 命名空间下。**

我可以毫无问题地上传视频。当请求完成时，它返回一个类型为视频的对象。

但我想看看处理的细节。我的意思是上传的百分比。我搜索了两个函数，getUploadState() 和 getProgress()。但我在 youtube api 上找不到它。

Video 类只有[Status 类](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt%3astate)成员。它显示了视频的结果。但我想学习上传过程的详细信息。比如完成了40%..

我应该使用什么？我认为我可以使用 Backgroundworker，但我不确定它是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:08:20.680

我解决了自己的问题..有点困难，但我终于做到了:)

```
public bool InsertVideo()
    {
        Trace.TraceInformation("Entering InsertVideo: starting a new upload");
        Video newVideo = new Video();

        newVideo.Title = "MY video";
        newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
        newVideo.Keywords = "education, funny deneme";
        newVideo.Description = "bilgi mi istiyorsun";
        newVideo.YouTubeEntry.Private = false;
        newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag",
          YouTubeNameTable.DeveloperTagSchema));

        newVideo.YouTubeEntry.MediaSource = new MediaFileSource("c:\\cat.flv",
          "video/quicktime");
        // newVideo.Private = true;

        GDataCredentials credentials = new GDataCredentials(UserName, PassWord);

        Authenticator youTubeAuthenticator =new ClientLoginAuthenticator("YoutubeUploader",
                    ServiceNames.YouTube, credentials);
        youTubeAuthenticator.DeveloperKey = DevKey;

        AtomLink link = new AtomLink("http://uploads.gdata.youtube.com/resumable/feeds/api/users/" + UserName + "/uploads");
        link.Rel = ResumableUploader.CreateMediaRelation;
        newVideo.YouTubeEntry.Links.Add(link);

        ResumableUploader ru = new ResumableUploader();
        ru.AsyncOperationCompleted += new AsyncOperationCompletedEventHandler(this.OnDone);
        ru.AsyncOperationProgress += new AsyncOperationProgressEventHandler(this.OnProgress);
        var tmpvalue = "bla bla bla";
        ru.InsertAsync(youTubeAuthenticator, newVideo.YouTubeEntry, tmpvalue);

        return true;
    }

    private void OnProgress(object sender, AsyncOperationProgressEventArgs e)
    {
       Debug.WriteLine("It has been completed : " + e.ProgressPercentage);
    }

    private void OnDone(object sender, AsyncOperationCompletedEventArgs e)
    {

        Debug.WriteLine("It has Done");
    } 
```

您可以使用 AsyncOperationCompletedEventArgs e 参数访问 OnDone 事件中上传视频的信息，属性为 ResponseStream

# javascript - CoffeeScript 将对象添加到数组

> ID：12236718
> 
> 赞同：1
> 
> 时间：2012-09-02T14:26:00.020
> 
> 标签：javascript, arrays, object, coffeescript, scoping

我有以下代码：

```
class Number
 number = null
 constructor: (num) ->
  number = num
 getNumber: -> number

class Sequence
 numbers = []
 constructor: ->

 addNumber: (n) ->
  numbers.push new Number n

 displaySequence: ->
  for number in numbers
   alert number.getNumber()

seq = new Sequence()
seq.addNumber 1
seq.addNumber 2
seq.displaySequence() 
```

`numbers`数组`seq`应该包含 2 个值为 1 和 2的`Number`对象，但我得到的结果是 2 和 2 ......有人能给我一些启示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:39:31.117

使用 @ 声明本地字段。

```
class Number
 constructor: (@num) ->
 getNumber: -> @num

class Sequence
 numbers = []
 constructor: ->

 addNumber: (n) ->
  numbers.push (new Number n)

 displaySequence: ->
  for number in numbers
   alert number.getNumber()

seq = new Sequence()
seq.addNumber 1
seq.addNumber 2
seq.displaySequence() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:56:07.660

问题是您的 number 类会复制到以下 JavaScript。其中变量 number 存储在作用域中而不是 Number 函数的成员：

```
Number = (function() {
  // number is stored in the scope not as a member of the prototype
  var number;

  number = null;

  // this is the function that will be return
  // so when ever you call it you override number
  function Number(num) {
    number = num;
  }

  Number.prototype.getNumber = function() {
    return number;
  };

  return Number;

})(); 
```

您必须使用以下方法将要存储的数字设为类的属性`@`：

```
class Number
 constructor: (@num) ->
 getNumber: -> @num 
```

编译为：

```
var Number;

Number = (function() {

  function Number(num) {
    //now num is stored in the returned function not in the scope of the parent function
    this.num = num;
  }

  Number.prototype.getNumber = function() {
    return this.num;
  };

  return Number;

})(); 
```

# javascript - js禁用firefox中的退格功能

> ID：12236721
> 
> 赞同：2
> 
> 时间：2012-09-02T14:26:09.380
> 
> 标签：javascript, regex, firefox, textinput, keycode

我有以下 javascript 以防止用户在文本字段中输入无效字符。它在 chrome 中运行良好，但在 Firefox 中运行良好。它阻止`backspace`在 Firefox 的文本字段中输入密钥。

```
function onlyNumbers(evt) {
    var theEvent = evt || window.event;
    var key = theEvent.keyCode || theEvent.which;
    key = String.fromCharCode( key );
    var regex = /[0-9]|\./;
    if( !regex.test(key) ) {
        theEvent.returnValue = false;
        if(theEvent.preventDefault) theEvent.preventDefault(); 
    }
} 
```

任何人都可以看看并提出一个修复 Firefox 以不阻止退格键作用于文本字段的方法吗？

可能我猜，为退格字符添加正则表达式就可以了。有谁知道，如何添加正则表达式以匹配`backspace`

### 编辑：

此外，上面的代码应该被`Tab`关键行为打断，我无法使用`Tab`key 跳转到表单中的下一个字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T14:56:04.683

见[http://jsfiddle.net/8ZJZD/1/](http://jsfiddle.net/8ZJZD/1/)

```
var el=document.getElementById('cnfMobileNo');
el.onkeydown=function onlyNumbers(evt) {
    var theEvent = evt || window.event;
    var key = theEvent.keyCode || theEvent.which;
    if(key===8){return;}
    key = String.fromCharCode(key);
    var regex = /[0-9]|\./;
    if( !regex.test(key) ) {
        theEvent.returnValue = false;
        if(theEvent.preventDefault) theEvent.preventDefault();
    }
} 
```

只需使用`if(key===8){return;}`

**编辑：**

如果要排除更多键，请使用

```
var el=document.getElementById('cnfMobileNo');
el.onkeydown=function onlyNumbers(evt) {
    var theEvent = evt || window.event,
        key = theEvent.keyCode || theEvent.which,
        exclusions=[8,9]; /*Add exceptions here */
    if(exclusions.indexOf(key)>-1){return;}
    key = String.fromCharCode(key);
    var regex = /[0-9]|\./;
    if( !regex.test(key) ) {
        theEvent.returnValue = false;
        if(theEvent.preventDefault) theEvent.preventDefault();
    }
} 
```

在这里看到它：http: [//jsfiddle.net/8ZJZD/2/](http://jsfiddle.net/8ZJZD/2/)

你可以知道`keyCode`每个键的使用`alert(key)`

（之前`key = String.fromCharCode(key)`）。

你也可以排除

*   方向键：37、38、39、40
*   `Enter`: 13
*   上下文菜单：93
*   `Start`和`End`: 36,35

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:57:38.783

我不确定退格正则表达式，但这也应该有效

```
$("#myInput").bind('keyup', function(){
     val1 = $(this).val();
     $(this).val(val1.replace(/[^0-9.]/g,''));
}); 
```

您可能会取消绑定并直接附加 keyup

小提琴 - [jsfiddle](http://jsfiddle.net/SNAG12/VaEUe/)

# javascript - d3.js 具有固定布局的绘图网络

> ID：12236723
> 
> 赞同：6
> 
> 时间：2012-09-02T14:26:13.987
> 
> 标签：javascript, json, d3.js, visualization, force-layout

我目前正在研究可视化我的前任编写的批处理脚本的结构，它只是从某处重复 SELECT 并插入到某处。我尝试使用树函数，但是当我希望 JSON 的同一索引中的相同名称被识别为同一节点时，它的使用并不灵活。

所以我决定使用强制布局功能，并在谷歌搜索的帮助下几乎完成了。但是，虽然我可以在同一区域映射同一组数据库或脚本以初始化部分，但不知何故 force.on("tick", function() ~~ 重新计算每个节点之间的距离然后它变得非常混乱。但没有这个，它不会显示节点之间的链接。

有谁知道如何在使用 JSON 重新计算链接时固定布局。我的代码是这样的：

```
 node.append("circle")
              .attr("cx", function(d) { return d.group*70; })
              .attr("cy", function(d) { return d.index*10; })
              .attr("r", 10)
              .attr("fill", function(d) {
                   return "rgb(" + (255 - d.group*20) + ",0,"+(d.group*50) + ")";
              });

          node.append("text")
              .attr("dx", function(d){return d.group*70;})
              .attr("dy", function(d){return d.index*10;})
              .text(function(d) { return d.name });
          force.on("tick", function() {
              alert(debugPrint(this));
              link.attr("x1", function(d) { return d.source.x; })
                  .attr("y1", function(d) { return d.source.y; })
                  .attr("x2", function(d) { return d.target.x; })
                  .attr("y2", function(d) { return d.target.y; });

              node.attr("transform", function(d) {
                  return "translate(" + d.x + "," + d.y + ")";
              });
              //node.attr("transform", function(d) { return "translate(0)"; }); });
          }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:39:39.887

您可以查看静态的定向可视化[http://bl.ocks.org/mbostock/1667139](http://bl.ocks.org/mbostock/1667139)

基本上，您创建一个强制布局，为其分配节点和链接，然后启动它。

然后你运行 force.tick() 方法`ticks`的次数。这将计算布局中每个节点的位置。您将不得不尝试`ticks`获得良好图表的值。该值应与图表中的节点数成比例增加。

```
force = d3.layout.force();

ticks=2000;  //number of ticks for calculating the force layout

force
    .nodes(nodes)  //nodes = array of nodes
    .links(links)  //links = array of links
    .start();

for (var i = ticks; i > 0; --i) force.tick();

force.stop(); 
```

您必须在上述代码开始之前执行此操作。

现在你有了力对象，你可以用它来定位你的节点和链接。现在直接将属性分配给节点和链接变量。（以前在 tick 函数中完成）

您的代码现在看起来像这样。

```
node.append("circle")
    .attr("cx", function(d){return d.group*70; })
    .attr("cy", function(d){return d.index*10;})
    .attr("r", 10)
    .attr("fill",function(d){
        return "rgb(" + (255 - d.group*20) + ",0,"+(d.group*50) + ")"
    })
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

node.append("text")
    .attr("dx", function(d){return d.group*70;})
    .attr("dy", function(d){return d.index*10;})
    .text(function(d) { return d.name });

link.attr("x1", function(d) { return d.source.x; })
    .attr("y1", function(d) { return d.source.y; })
    .attr("x2", function(d) { return d.target.x; })
    .attr("y2", function(d) { return d.target.y; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:48:47.010

如果你添加一个函数`function(d){ d.fixed = true }`，并在一个滴答期间（或者可能只是在第一个滴答期间）在每个节点上调用它，那么你将拥有一个静态图。否则，您可以`force.stop()`在代码运行后调用（或同样在第一次滴答期间），它会完成相同的操作。

我遇到的问题是，在我的代码块末尾调用`force.stop()`导致图形在正确放置在 SVG 中心之前冻结，并且由于我不关心静态图形，我制作了一个“mousedown”事件函数当节点移动到某个位置时，它使节点固定。

# iphone - 如何在 didSelectRow 中使用 2 个组件检测 UIPickerView 的所有值？

> ID：12236724
> 
> 赞同：1
> 
> 时间：2012-09-02T14:26:19.630
> 
> 标签：iphone, ios, xcode, uipickerview

我对 xcode 很陌生，我对我的第一个应用程序有疑问。我的应用程序中有一个 UIPickerView，其中包含 2 个组件，其中填充了 NSMutableArray。如果第一个组件发生更改，则第二个组件数组将被清除并填充新值。现在我必须检测第一个组件中的选定行和第二个组件中的选定行，以在 UIWebView 中加载本地 HTML 页面。我会用 if 循环尝试它，但我不明白如何检测 2 个组件上的所有选定行。这是我的源代码的一小段：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
NSLog(@"the %d row was selected in the %d component", row, component);
if ((component == 0) && (row ==0)){
     [rightPickerArray removeAllObjects];
     [rightPickerArray addObject:@"5.0"];
     [rightPickerArray addObject:@"5.1"];
     [pickerView reloadAllComponents];
}
if ((component == 0) && (row ==1)){
    [rightPickerArray removeAllObjects];
    [rightPickerArray addObject:@"1"];
    [rightPickerArray addObject:@"2"];
    [pickerView reloadAllComponents];
}

if ((component ==1) && (row ==0)){
    NSString *fileString = [[NSBundle mainBundle] pathForResource:@"index" ofType: @"html"];

    NSString *newHTMLString = [[NSString alloc] initWithContentsOfFile: fileString encoding: NSASCIIStringEncoding error: NULL];

    NSURL *newURL = [[NSURL alloc] initFileURLWithPath: fileString];

    [myWebView loadHTMLString: newHTMLString baseURL: newURL];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:34:08.120

UIPickerView 有一个“selectedRowInComponent:”方法应该可以帮助解决这个问题。看看[这个](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)。

# java - 动态添加的面板仅在调整大小时才可见

> ID：12236726
> 
> 赞同：0
> 
> 时间：2012-09-02T14:26:34.623
> 
> 标签：java, swing, jpanel

```
import org.jdesktop.application.SingleFrameApplication;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import org.jdesktop.application.FrameView;

public class Welcome extends FrameView 
{
    SearchPanelClass panel1 = new SearchPanelClass();
    AddMaterialPanel panel2 = new AddMaterialPanel();
    Container container= AutomobileApplication.getApplication().getMainFrame();
    public Welcome(SingleFrameApplication app) 
    {
       super(app);
       initMenu();
}

private class MenuAction implements ActionListener {

private SearchPanelClass panel;
private MenuAction(SearchPanelClass pnl) 
{

    this.panel = pnl;

}
private AddMaterialPanel AddMaterialPan;
private MenuAction(AddMaterialPanel pnl) 
{
    this.AddMaterialPan = pnl;
}

public void actionPerformed(ActionEvent e) {
    String command = e.getActionCommand();
    if(command == "Panel1")
    {
        changePanel(panel1);
    }
    if(command =="Panel2")
    {
        changePanel(panel2);
    }

   }

 }

private void initMenu() {

JMenuBar menubar = new JMenuBar();
JMenu menu = new JMenu("Menu");
JMenuItem menuItem1 = new JMenuItem("Panel1");
JMenuItem menuItem2 = new JMenuItem("Panel2");
menubar.add(menu);
menu.add(menuItem1);
menu.add(menuItem2);
this.setMenuBar(menubar);
menuItem1.addActionListener(new MenuAction(panel1));
menuItem2.addActionListener(new MenuAction(panel2));

}

private void changePanel(JPanel panel) {
container.removeAll();
setComponent(panel);
panel.setVisible(true);
container.doLayout(); 
  }
} 
```

这里 SearchPanelClass 和 AddMaterialPanel 是我想根据菜单项单击添加的两个自定义面板。但是面板仅在调整窗口大小时才可见。谁能告诉我在调整窗口大小时后端调用了哪些程序？

请给我掌舵...

提前致谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T14:32:22.573

不要忘记在添加或删除 JPanel 的容器上调用`revalidate()`和。`repaint()`

*   `revalidate()`将告诉容器让其布局管理器重新布局它拥有的所有组件。
*   `repaint()`将告诉组件重绘自己及其所有子组件。这并不总是需要，但经常需要，尤其是在移除组件的情况下。

此外，永远不要`==`像在此处那样使用比较字符串：

```
public void actionPerformed(ActionEvent e) {
    String command = e.getActionCommand();
    if(command == "Panel1")
    {
        changePanel(panel1);
    }
    if(command =="Panel2")
    {
        changePanel(panel2);
    }

   }

 } 
```

运算符将`==`检查两个 String 对象是否相同，这是您不关心的。而是使用 String 方法`equals(...)`或`equalsIgnoreCase(...)`which 将测试两个字符串是否以相同的顺序包含相同的字符。因此，例如：

```
String command = e.getActionCommand();
if("Panel1".equalsIgnoreCase(command)) {
    changePanel(panel1);
} else if("Panel2".equalsIgnoreCase(command)) {
    changePanel(panel2);
} 
```

**编辑：**更好的是，使用 CardLayout 来交换 JComponents：[CardLayout 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)和[CardLayout API](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)

**编辑 2：**请注意，您的使用`org.jdesktop.application.SingleFrameApplication`意味着您正在使用 JSR 296：Swing 应用程序框架库，并且对该库的状态的审查表明它已被撤回，如此[处](http://jcp.org/en/jsr/detail?id=296)所述。因此，目前似乎并未支持或更新该库。

# regex - 匹配正则表达式术语

> ID：12236728
> 
> 赞同：0
> 
> 时间：2012-09-02T14:27:06.620
> 
> 标签：regex

我正在尝试为我的动态 cms 页面匹配谷歌分析目标中的正则表达式。

我正在尝试创建一个渠道以确定我的类别页面和我的详细信息页面之间的关系。

我的类别页面如下所示：

[http://www.url.com/subcategories/flying_boards.html](http://www.url.com/subcategories/flying_boards.html) http://www.url.com/subcategories/cheap_computers.html

我为子类别页面添加的是：/subcategories/..html（不起作用）。

我的产品页面看起来像：

[http://www.url.com/veru-nice-computer-p-45854.html](http://www.url.com/veru-nice-computer-p-45854.html) http://www.url.com/amazing-pentium-4-laptop-p-58654.html

我在这个页面上的正则表达式术语是：/-p-..html（也不起作用）。

我试图寻找答案，但没有办法检查我认为会起作用的东西在它上线之前是否真的起作用（而且我正在失去宝贵的时间......）

我认为这对这里的一些人来说很容易回答我真的很感谢你的帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:47:45.037

您应该小心正则表达式：某些字符是“保留的”。例如，. 意思是“所有可能的字符”

因此，在 /subcategories/..html 中，您搜索文件夹子类别中的所有 url，名称文件由 2 个字符组成并以 html 结尾。

我在谷歌分析中做了一些测试（它似乎与 php 或 ruby​​ 正则表达式有点不同），我认为你可以用：/subcategories/ 进行测试，它会显示这个文件夹中的所有 url。

# c++ - 递归方法 C++

> ID：12236730
> 
> 赞同：2
> 
> 时间：2012-09-02T14:27:55.527
> 
> 标签：c++, pointers, methods, recursion, double-free

我现在正在练习链表结构，并且我已经使用该算法编写了一个程序。在程序中有一个递归方法来删除链表的每个元素。但是，该程序在该方法中崩溃。

```
void exit()
{
    Person* person = phead;
    exterminateStartingFrom(person);
}

void exterminateStartingFrom(Person* person)
{
    Person* nextperson;
    nextperson = person->getNext();
    if(nextperson){
        exterminateStartingFrom(nextperson);
    }
    delete person;
} 
```

此方法在用户想要退出时运行。“phead”代表人员列表的第一个元素。显示的问题是：**双重释放或损坏（fasttop）**

这是类 Person ：

```
class Person {
private:
    std::string firstname;
    std::string lastname;
    int age;
    Person* next;

public:
    Person(std::string, std::string, int);
    void printDescription();
    void printFirstname();
    void printLastname();
    void printAge();
    void setNext(Person*);
    Person* getNext();

}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:16:30.710

以下是我采取的方法。当然，这有点做作，因为我不知道您的实际功能。我还用初始全局变量表示 pHead，并使用具有超出范围值的年龄来指示列表的头部。

对于列表的头部，我使用了一个特殊的构造函数。

有更好的方法可以做到这一点，但是在这个快速而肮脏的实现中，我需要一些东西来表明在递归期间退出时，我知道什么时候我已经一直支持到列表的头部。

```
#include <string>

class Person {
private:
    std::string firstname;
    std::string lastname;
    int age;
    Person* next;

public:
    Person (void);                           // constructor for the pHead
    ~Person (void);
    Person(std::string, std::string, int);   // standard constructor used
    std::string getFirstname(void) { return firstname; };
    std::string getLastname(void) { return lastname; }
    void setNext(Person *newNext) { next = newNext; }
    Person* getNext() { return next; }
    Person *addToListAt (Person *personList);
    void addToListAtEnd (Person *personList);
    void Person::insertListAfter (Person *personList);
    bool isHeadOfList (void);
};

Person pHead = Person();

// special constructor used to create the head to a linked list
Person::Person ()
{
    age = -1;
    next = 0;
}

// standard constructor used to create a list item.
Person::Person (std::string sFirstName, std::string sLastName, int myAge)
{
    if (myAge < 0) myAge = 0;
    firstname = sFirstName;
    lastname = sLastName;
    age = myAge;
    next = 0;
}

Person::~Person ()
{
    next = 0;
    age = 0;
}

void exterminateStartingFrom(Person* person)
{
    Person* nextPerson;
    nextPerson = person->getNext();
    if(nextPerson){
        exterminateStartingFrom(nextPerson);
    }

    if (! person->isHeadOfList())
        delete person;
}

Person *Person::addToListAt (Person *personList)
{
    Person* nextPerson;
    nextPerson = personList->getNext();
    personList->setNext (this);
    return nextPerson;
}

void Person::insertListAfter (Person *personList)
{
    Person* nextPerson;
    nextPerson = personList->getNext();
    personList->setNext (this);
    next = nextPerson;
}

void Person::addToListAtEnd (Person *personList)
{
    Person* nextperson;
    nextperson = personList->getNext();
    if(nextperson){
        addToListAtEnd (nextperson);
    } else {
        personList->setNext (this);
    }
}

bool Person::isHeadOfList (void)
{
    // we use a special age to represent the head of the list
    // the head does not contain any data except for point to first item
    // in the list.
    return (age < 0);
}

int main(int argc, char * argv[])
{
    Person *newPerson = new Person("first_1", "last_1", 11);
    newPerson->addToListAtEnd (&pHead);
    newPerson = new Person("first_2", "last_2", 22);
    newPerson->addToListAtEnd (&pHead);
    newPerson = new Person("first_3", "last_3", 33);
    newPerson->addToListAtEnd (&pHead);

    Person *itemPerson = pHead.getNext();
    newPerson = new Person("first_11", "last_11", 12);

    newPerson->insertListAfter (itemPerson);

    exterminateStartingFrom(&pHead);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:33:13.557

您的列表是单向链接还是双向链接？如果您有一个双向列表（您不仅存储指向下一个元素的指针，还存储指向前一个元素的指针）并且调用析构函数，则可能还删除由`previous`和`next`字段指示的元素。当递归返回一个级别并且您想要删除倒数第二个元素时，您会收到错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:40:05.313

如果不知道如何构建或删除 Person 对象，很难说清楚。您的错误消息意味着您要删除同一实体两次，或者您要删除未分配的内容。可以尝试打印您要删除的地址，以便检查是否有相同的地址被多次删除？

还要处理传递给递归方法的指针是`nill`.

# icloud - 是否有与 iCloud 的 chdropboxsync 等效的功能？

> ID：12236732
> 
> 赞同：0
> 
> 时间：2012-09-02T14:28:19.940
> 
> 标签：icloud

我的应用程序需要保持一个 RTF 文件目录与 Dropbox 或 iCloud 同步。对于 Dropbox，chdropboxsync 完成了所有繁重的工作。iCloud有没有等价物？我必须承认，我听到的所有关于 iCloud 成为用户体验和应用程序质量方面的主要问题的故事都让我有点害怕，所以使用经过同行测试的框架会减轻我的负担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:24:31.963

答案似乎是“不”——现在。我已经构建了一个不错的小框架，它将 chdropboxsync 集成到文本编辑器抽象中，并且正在努力将 iCloud 添加到其中。也许很快...

# javascript - 为什么这个 array.filter 总是什么都不返回？

> ID：12236737
> 
> 赞同：1
> 
> 时间：2012-09-02T14:28:53.873
> 
> 标签：javascript, filter

为什么这个过滤器从不返回任何对象？

```
NewHashMap.prototype.remove = function (keys, obj) {
    // snip
    var myEntries = this.entries;
    var filteredEntries = myEntries.filter(
        function(entry){
            //me.isContainedBy(entry, keys) &&
            //entry.obj === obj
            true;
        });
    console.debug("entries ",  myEntries.length);
    console.debug("filtered ", filteredEntries.length);
    // snip
} 
```

再进一步，我在不同的上下文中使用它并且它有效。
您还看到我注释掉了我的实际过滤器要求并用纯 True 替换它们。一样。

我猜这是一个上下文问题，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:30:58.100

你`true`什么都不做，除非你`return`来自匿名函数：

```
var filteredEntries = myEntries.filter(
    function(entry){
        //me.isContainedBy(entry, keys) &&
        //entry.obj === obj
        return true;
}); 
```

或者使用您的实际过滤器代码：

```
var filteredEntries = myEntries.filter(
    function(entry){
        return me.isContainedBy(entry, keys) && entry.obj === obj
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:30:59.847

您需要`return`回调函数中的布尔值：

```
var filteredEntries = myEntries.filter(
        function(entry){
            //me.isContainedBy(entry, keys) &&
            //entry.obj === obj
            return true;
        }); 
```

# mysql - symfony2：正确设置 PdoSessionHandler

> ID：12236740
> 
> 赞同：0
> 
> 时间：2012-09-02T14:29:37.417
> 
> 标签：mysql, session, symfony, symfony-2.1

我按照 symfony 2.1 食谱页面使用 PDO 保存 sessing 数据，在此链接上：[http](http://symfony.com/doc/master/cookbook/configuration/pdo_session_storage.html) ://symfony.com/doc/master/cookbook/configuration/pdo_session_storage.html 事情是，在我的开发机器上，一切正常....当我清除开发或生产环境的缓存但在我的生产机器（实时服务器）上我得到错误：

```
 [PDOException]                                                                                   
SQLSTATE[HY000] [2002] Can't connect to local MySQL server 
through socket '/tmp/mysql.sock' (2) 
```

当试图清除缓存时`php app/console cache:clear --env=prod`

所以我的实时服务器和我的开发机器之间似乎有些不同，尽管 config.yml 中的代码是相同的。

我正在使用这些设置`services:`

```
 pdo:
   class: PDO
   arguments:
        - "mysql:dbname=%database_name%"
        - %database_user%
        - %database_password%

 session.handler.pdo:
     class:     Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler
     arguments: [@pdo, %pdo.db_options%] 
```

我什么时候`ls -la /tmp/mysql.sock` 得到

```
ls: cannot access /tmp/mysql.sock: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T04:46:17.573

将此添加到您在 mysql 中的参数中：

```
services:
pdo:
    class: PDO
    arguments:
        - "mysql:dbname=%database_name%;host=%database_host%"
        - %database_user%
        - %database_password%
    calls:
        - [setAttribute, [3, 2]] # \PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION
session.handler.pdo:
    class:     Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler
    arguments: ["@pdo", "%pdo.db_options%"] 
```

您的配置中没有数据库主机，PDO 类中的第一个参数 ($dsn) 有两个参数，由分号分隔，dbname 和 dbhost，希望对您有所帮助，加油！

# javascript - 使用谷歌图表将 mousedown 事件注册为点击

> ID：12236741
> 
> 赞同：0
> 
> 时间：2012-09-02T14:29:42.140
> 
> 标签：javascript, jquery, google-visualization

我正在尝试将 mousedown 事件作为点击发送到谷歌图表，尽管遇到了障碍并且不知道为什么我会收到以下错误。

我正在使用 jQuery 和谷歌图表 api，visualisationOverlay 是图表顶部的绝对定位 div，错误是 dispatchEvent 将修改后的事件发送到谷歌图表 iframe。

```
$('#visualizationOverlay').live('mousedown',function(e){
    e.type = "click";
    vis = document.getElementById($('#visualization').find('iframe').attr('id'));
    console.log(vis);
    vis.dispatchEvent(e);
}); 
```

我在 Firefox 中收到以下错误

```
NS_ERROR_ILLEGAL_VALUE: Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIDOMEventTarget.dispatchEvent] 
```

任何我出错的提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:16:06.543

您不能触发已触发到另一个元素的事件。您需要创建一个新事件或只使用 jQuerys `trigger`。

看看这个[例子](http://jsbin.com/omireb/1/)。单击第一个元素会按预期触发第二个日志的错误。

```
$('#id1').on('mousedown', function(e){
  e.type = 'click';
  $('#id2').get(0).dispatchEvent(e);
});

$('#id2').on('mousedown', function(e){
  $('#id1').trigger('click')
});

$('#id1').on('mousedown', function(e){
  console.log('mousedown');
});

$('#id2').on('click', function(e){
  console.log('click');
}); 
```

# java - 输入路径的字符串替换：“\”到“/”

> ID：12236742
> 
> 赞同：3
> 
> 时间：2012-09-02T14:29:43.223
> 
> 标签：java, jakarta-ee

考虑以下代码：

```
class Sample{
public static void main(String args[]){
    String text1="C:\Documents\User\sample";

    String text2=text1.replace('\','/');

    System.out.println(text2);
        }
} 
```

我有一个输入，其中 text1 正在接收文件路径。现在我想将 text1 中的所有“\”替换为“/”。我已经使用了上面的代码。

首先，显示的错误是：“Illegal Escape Sequence”，这是可以理解的，不是我的问题，因为我正在制作一个 Java EE 应用程序，用户在输入框中输入路径。

但是我无法将“\”更改为“/”，这对于我的代码正常运行至关重要。我无法解决这个问题。我什至尝试过使用 String.replaceAll() 方法，但没有结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T14:30:51.597

您需要转义反斜杠：

```
String text2=aa.replace('\\','/'); 
```

顺便说一句，`replaceAll()`这会使您的问题更加复杂：现在您正在处理正则表达式而不是简单的字符串替换，这意味着您的反斜杠需要再次转义以用于正则表达式引擎：

```
String text2=aa.replaceAll("\\\\", "/"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:30:56.433

`\`是 java 字符串中的转义字符，您需要通过 do 对其进行转义`\\`，这将防止它转义`'`旁边的字符，并解决您的错误。这会将您的代码行变成：

```
String text2 = text1.replace('\\', '/'); 
```

[这](http://docs.oracle.com/javase/tutorial/java/data/characters.html)是一个很好的例子，说明了如何正常使用这个字符。

从它的外观来看，您最好也执行以下操作：

```
String text1="C:\\Documents\\User\\sample"; 
```

而不是在字符串初始化后替换。

# groovy - 在 Groovy 中使用键作为字符串和值作为列表的映射

> ID：12236743
> 
> 赞同：43
> 
> 时间：2012-09-02T14:29:50.393
> 
> 标签：groovy, map

谁能给我举个例子，说明如何`Map`在 Groovy 中使用 a`String`作为键和 a`List`作为值？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-04T09:35:35.790

Groovy 接受几乎所有 Java 语法，因此有多种选择，如下图所示：

```
// Java syntax 

Map<String,List> map1  = new HashMap<>();
List list1 = new ArrayList();
list1.add("hello");
map1.put("abc", list1); 
assert map1.get("abc") == list1;

// slightly less Java-esque

def map2  = new HashMap<String,List>()
def list2 = new ArrayList()
list2.add("hello")
map2.put("abc", list2)
assert map2.get("abc") == list2

// typical Groovy

def map3  = [:]
def list3 = []
list3 << "hello"
map3.'abc'= list3
assert map3.'abc' == list3 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-02T15:30:29.210

```
def map = [:]
map["stringKey"] = [1, 2, 3, 4]
map["anotherKey"] = [55, 66, 77]

assert map["anotherKey"] == [55, 66, 77] 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-08-28T19:48:25.147

在将地图/列表作为地图中的值处理时，另一个有用的小部分是`withDefault(Closure)`groovy 中地图上的方法。而不是执行以下代码：

```
Map m = [:]
for(object in listOfObjects)
{
  if(m.containsKey(object.myKey))
  {
    m.get(object.myKey).add(object.myValue)
  }
  else
  {
    m.put(object.myKey, [object.myValue]
  }
} 
```

您可以执行以下操作：

```
Map m = [:].withDefault{key -> return []}
for(object in listOfObjects)
{
  List valueList = m.get(object.myKey)
  m.put(object.myKey, valueList)
} 
```

默认情况下也可以用于其他事情，但我发现这对我来说是最常见的用例。

API： [http ://www.groovy-lang.org/gdk.html](http://www.groovy-lang.org/gdk.html)

地图-> withDefault（关闭）

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-05-30T10:39:37.790

你不需要声明 Map groovy 在内部识别它

```
def personDetails = [firstName:'John', lastName:'Doe', fullName:'John Doe']

// print the values..
    println "First Name: ${personDetails.firstName}"
    println "Last Name: ${personDetails.lastName}" 
```

[http://grails.asia/groovy-map-tutorial](http://grails.asia/groovy-map-tutorial)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-26T06:34:46.743

[Joseph](https://stackoverflow.com/a/32278783/622975)忘记在他的示例中使用`withDefault`. 这是我最终使用的代码：

```
Map map = [:].withDefault { key -> return [] }
listOfObjects.each { map.get(it.myKey).add(it.myValue) } 
```

# - 包裹

> ID：12236747
> 
> 赞同：0
> 
> 时间：2012-09-02T14:30:18.130
> 
> 标签：

有关 Java、Scala、Python 和其他语言中包的使用或命名的问题。

# actionscript-3 - 仅对 MOVIECLIP 的可见内容进行命中测试

> ID：12236749
> 
> 赞同：1
> 
> 时间：2012-09-02T14:30:33.110
> 
> 标签：actionscript-3, flash, flash-cs5, flash-cs4

我已经使用形状掩盖了位图并将其转换为影片剪辑。现在只有蒙版的图像在影片剪辑内。我已经为这个影片剪辑添加了一个鼠标单击事件侦听器，并且仍然对整个影片剪辑进行了单击。我如何设法仅单击影片剪辑的可见区域。

`

```
//img is a bitmap on stage and s1 is an irregular shape on the stage which is a movieclip
img.mask = s1;

var bmp:Bitmap = new Bitmap(new BitmapData(img.width,img.height,true));
bmp.bitmapData.draw(img);
var n:MovieClip = new MovieClip();

n.addChild(bmp);

addChild(n);

trace(s1.width + " " + s1.height);
trace(n.width + " " + n.height);
n.addEventListener(MouseEvent.CLICK, clicked);
removeChild(s1);
removeChild(img);

function clicked(m:MouseEvent):void
{
            trace(n.hitTestPoint(n.mouseX,n.mouseY, false));
            trace("clikckedek kkc kkeke");
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:37:56.823

您不能将您的点击处理程序移动到掩码（代码中的 s1）吗？

这应该只允许在可见圆圈内单击：

```
import flash.events.MouseEvent;
import flash.display.Sprite;

var shape:Sprite = addChild(new Sprite()) as Sprite;
shape.graphics.beginFill(0xFF0000, 1);
shape.graphics.drawRect(0,0,200,200);
shape.x = shape.y = 50;

var masque:Sprite = shape.addChild(new Sprite()) as Sprite;
masque.graphics.beginFill(0x00FF00, 1);
masque.graphics.drawCircle(100,100,100);
masque.buttonMode = masque.useHandCursor = true;
shape.mask = masque;

function handleMasqueClick($e:MouseEvent):void
{
    trace("CLICK");
}

masque.addEventListener(MouseEvent.CLICK, handleMasqueClick); 
```

不确定我是否理解 - 这就是你想要的吗？

否则，如果您的意思是要避免在蒙版区域内对位图的透明部分产生正面影响，则需要获取鼠标在蒙版上单击的位置并针对位图本身对该点进行测试（请参阅: [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#hitTest%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#hitTest%28%29) ) - 可能需要一些[localToGlobal/GlobalToLocal](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#localToGlobal%28%29)杂耍来获取所有内容同坐标空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:48:39.113

我使用“获取像素”的技巧让它工作。鼠标点击只在彩色像素上而不是白色像素上。

```
 function clickHandler (event:MouseEvent):void
{
    //check if the bitmap inside the object that was clicked has a transparent pixel at the current mouse position
    var mcAlpha:String = (event.currentTarget.getChildAt(0).bitmapData.getPixel32(event.localX,event.localY) >> 24 & 0xFF).toString(16);

    if (mcAlpha == "0")
    {
        trace ("transparent!");
    }
    else
    {
        trace ("CLICK!!!");
    }
} 
```

# c++ - 类方法与 static 和 const 的交互

> ID：12236750
> 
> 赞同：-2
> 
> 时间：2012-09-02T14:30:36.853
> 
> 标签：c++, oop, class, methods

代码：

```
 #include <iostream>
    using namespace std;

    class Item
    {
        int num;
    public:
        Item(int i) : num(i) {};
        int getNum() const { return num; }
    };

    class ItemPool
    {
    public:
        Item* getItem (int);
    };

    Item* ItemPool::getItem (int n)
    {
        static Item myX(0);
        if (n%2) return &myX;
        else return new Item(n);
    }

    void main()
    {
        ItemPool coll;
        for (int i=0; i<100; i++)
        {
                  Item* anX = coll.getItem(i);
                  cout<<anX->getNum()<<’\n’;
        }
    } 
```

问题：

1）这个程序在执行中有哪些**语义问题？**

2) 只改变 main() 函数，使程序的行为保持不变，但消除了这个问题。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:33:43.547

语义问题是该`ItemPool::getItem()`方法可以返回指向动态分配对象或静态对象的指针。不清楚谁拥有动态分配的对象的所有权，调用者无法知道他们是否必须解除分配对象，而不知道`ItemPool::getItem()`.

我认为没有办法改变消除问题*并*保持程序行为相同。程序行为是错误的，因此解决问题会改变其行为。

您可以修改`main()`为`Items`在`i%2==0`. `cout`但这会改变程序的行为，因为不再有内存泄漏。

```
void main()
{
  ItemPool coll;
  for (int i=0; i<100; i++)
  {
    Item* anX = coll.getItem(i);
    std::cout << anX->getNum() << "\n";
    if (i%2) == 0 delete anX;
  }
} 
```

# sql - MySql 每月持续时间矩阵

> ID：12236754
> 
> 赞同：1
> 
> 时间：2012-09-02T14:30:53.647
> 
> 标签：sql, matrix, duration

我正在尝试编写一个查询，该查询将显示每月工作时间的持续时间矩阵。我正在努力实现这一目标。

![在此处输入图像描述](../Images/ec2189989c856b63f4beba4dfc6fa8e9.png)

我目前有这个。 ![在此处输入图像描述](../Images/9606ed6df2c68154a3bd899df482d9d6.png)

正确的输出应该是 ![在此处输入图像描述](../Images/ecb169b2eeac2047cf5715a05f9c1820.png)

我的 SQL 是

```
`SELECT WEEK(start) as weekId,
                (
                    选择总和（TIME_TO_SEC（TIMEDIFF（停止，开始）））
                    FROM tbl_time_clock
                    WHERE WEEKDAY（开始）=0
                ) 作为星期一，
                (
                    选择总和（TIME_TO_SEC（TIMEDIFF（停止，开始）））
                    FROM tbl_time_clock
                    WHERE WEEKDAY（开始）=1
                ) 作为星期二，
                (
                    选择总和（TIME_TO_SEC（TIMEDIFF（停止，开始）））
                    FROM tbl_time_clock
                    WHERE WEEKDAY（开始）=2
                ) 作为星期三，
                (
                    选择总和（TIME_TO_SEC（TIMEDIFF（停止，开始）））
                    FROM tbl_time_clock
                    WHERE WEEKDAY（开始）=3
                ) 作为星期四，
                (
                    选择总和（TIME_TO_SEC（TIMEDIFF（停止，开始）））
                    FROM tbl_time_clock
                    WHERE WEEKDAY（开始）=4
                ) 作为星期五，
                (
                    选择总和（TIME_TO_SEC（TIMEDIFF（停止，开始）））
                    FROM tbl_time_clock
                    WHERE WEEKDAY（开始）=5
                ) 作为星期六，
                (
                    选择总和（TIME_TO_SEC（TIMEDIFF（停止，开始）））
                    FROM tbl_time_clock
                    WHERE WEEKDAY（开始）=6
                ) 作为星期天
            FROM tbl_time_clock
            WHERE MONTH(start) = {$monthId} AND user_id = {$userId}
            按周分组（开始）`

```

表看起来像

```
╔═════════╦═════════════════════╦═════════════════ ════╗
║ user_id ║ 开始 ║ 停止 ║
╠═════════╬═════════════════════╬═════════════════ ════╣
║ 1 ║ 2012-08-28 08:14:49 ║ 2012-08-28 10:14:49 ║
║ 1 ║ 2012-08-25 10:00:32 ║ 2012-08-25 16:21:57 ║
╚═════════╩═════════════════════╩═════════════════ ════╝

```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:33:42.927

你不需要子查询。

通常只**按两个字段分组**，并让您的编程语言进行演示（创建表格）：

```
SELECT 
    WEEK(start) as weekId,
    WEEKDAY(start) as weekDay,
    TIME_TO_SEC(TIMEDIFF(stop, start))
FROM tbl_time_clock
WHERE MONTH(start) = {$monthId} AND user_id = {$userId}
GROUP BY WEEK(start), WEEKDAY(start) 
```

如果你的 SQL 本身必须真的给出一个矩阵（但为什么？），试试这个：

```
SELECT 
    WEEK(start) as weekId,
    SUM( if( WEEKDAY(start)=0,TIME_TO_SEC(TIMEDIFF(stop, start))),0) as Monday,
    SUM( if( WEEKDAY(start)=1,TIME_TO_SEC(TIMEDIFF(stop, start))),0) as Tuesday,
    SUM( if( WEEKDAY(start)=2,TIME_TO_SEC(TIMEDIFF(stop, start))),0) as Wednesday,
    SUM( if( WEEKDAY(start)=3,TIME_TO_SEC(TIMEDIFF(stop, start))),0) as Thursday,
    SUM( if( WEEKDAY(start)=4,TIME_TO_SEC(TIMEDIFF(stop, start))),0) as Friday,
    SUM( if( WEEKDAY(start)=5,TIME_TO_SEC(TIMEDIFF(stop, start))),0) as Saturday,
    SUM( if( WEEKDAY(start)=6,TIME_TO_SEC(TIMEDIFF(stop, start))),0) as Sunday,
FROM tbl_time_clock
WHERE MONTH(start) = {$monthId} AND user_id = {$userId}
GROUP BY WEEK(start) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:18:02.607

看起来您需要在每个子查询中限制星期。为此，请为您的内部表添加一个别名，以便可以在内部查询中引用来自外部查询的值。Monday 子查询如下所示：

```
(
     SELECT SUM(TIME_TO_SEC(TIMEDIFF(stop, start)))
     FROM tbl_time_clock AS tbl_inner
     WHERE WEEKDAY(tbl_inner.start)=0
     AND WEEK(tbl_inner.start)=tbl_outer.week_start
) AS Monday 
```

外部表应该在约束子查询执行之前进行分组，否则每周会有多个结果。因此，您的外部 FROM 子句应如下所示：

```
FROM (
    select WEEK(start) AS week_start FROM tbl_time_clock GROUP BY WEEK(start)
    WHERE MONTH(start) = {$monthId} AND user_id = {$userId}
) as tbl_outer 
```

编辑：固定。另外，我同意 Konerak 的观点，可能不需要矩阵，他的 SQL 解决方案更好。留下这个，因为它展示了如何修改给定的 SQL 以获得解决方案。

# iphone - 取消注册通知委托的设备

> ID：12236764
> 
> 赞同：0
> 
> 时间：2012-09-02T14:31:52.007
> 
> 标签：iphone, ios, notifications, push

只是一个简单的问题，UIApplicationDelegate 协议中是否有任何方法可以确认设备已成功取消注册远程通知？

我知道以下确认设备注册成功的委托方法，但想知道它的对应方法：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
```

谢谢， 奥贝德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:49:28.333

不，没有。只有`application:didFailToRegisterForRemoteNotificationsWithError`未能注册远程通知。

您不能以编程方式取消注册远程通知，因为这样做没有意义。注册并不意味着您实际上会收到通知。

用户自己必须在“通知中心”下的设置应用程序中关闭特定应用程序的通知。

所以不要混淆。它只是不需要。如果需要，Apple 会这样做……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:50:25.377

据我了解，您无法从应用内的远程通知中取消注册。我认为第一次尝试注册时会出现询问您是否同意接收推送通知的对话框，之后您可以从“设置”应用程序控制注册。

您可以通过检查返回的值来检查当前是否在应用程序内启用了推送通知

```
[[UIApplication sharedApplication] enabledRemoteNotificationTypes] 
```

# android - 我应该设置哪些相机参数来使用 Android 相机检测激光点

> ID：12236765
> 
> 赞同：0
> 
> 时间：2012-09-02T14:31:55.070
> 
> 标签：android, image-processing

我正在制作 Android 应用程序来跟踪激光点。

我只是在填充具有 RGB 值的数组。然后寻找最亮的像素。

我正在使用以下相机参数：

```
 parameters.setPreviewSize(320, 240);
 parameters.setPreviewFrameRate(10);
 parameters.setSceneMode(Camera.Parameters.SCENE_MODE_FIREWORKS);
 parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO); 
```

当激光点与相机的距离较小时，结果很好。但是激光点离光源太远或太近会产生问题。

有没有更好的解决方案。？

我应该使用 OpenCV 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:46:59.077

为了获得最佳结果，请更改您的标准；与其寻找最亮的像素，不如尝试寻找“最红”的像素。假设激光点发出红光。您可以通过以下方式获取像素的红色值；

```
Color.red(pixel); 
```

或者

```
pixel<<8;
pixel>>>24; 
```

**编辑**

白色和明亮的灯光仍然具有很好的红色值。为了增加过滤，可以为绿色和蓝色设置一个阈值。当这些像素值超过阈值时，您可以跳过它们，因为它们可能是白色而不是纯红色。

# android - 将图像共享到其他应用程序

> ID：12236778
> 
> 赞同：2
> 
> 时间：2012-09-02T14:33:37.020
> 
> 标签：android, image, share

在我的应用程序中，我可以获取屏幕截图并将其保存到 SD 卡中。我想知道是否可以将它从我的应用程序共享到 Whatsapp，例如，就像画廊应用程序一样。

在图库中，您有机会将文件“分享”到 Whatsapp、Facebook 或 Twitter。

我可以从我的应用程序中执行相同的操作吗？如何？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T14:40:52.210

是的你可以。

```
@TargetApi(Build.VERSION_CODES.LOLLIPOP)
@SuppressWarnings( "deprecation" )
public static Intent shareImage(Context context, String pathToImage) {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP)
        shareIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    else
        shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_DOCUMENT);

    shareIntent.setType("image/*");

    // For a file in shared storage.  For data in private storage, use a ContentProvider.
    Uri uri = Uri.fromFile(context.getFileStreamPath(pathToImage));
    shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
    return shareIntent;
} 
```

这是一个详细的链接：[http ://android-developers.blogspot.com/2012/02/share-with-intents.html](http://android-developers.blogspot.com/2012/02/share-with-intents.html)

所以只需添加一个“分享”按钮并执行`startActivity(shareIntent)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:58:06.630

结合这两个答案，我明白了！谢谢你们！

```
private void shareIt() {
    //sharing implementation here

    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    sharingIntent.setType("image/*");

    Uri uri = Uri.fromFile(file);
    sharingIntent.putExtra(Intent.EXTRA_STREAM, uri);

    startActivity(Intent.createChooser(sharingIntent, "Share via"));

    } 
```

# c# - 远程验证到 ASP.NET 页面

> ID：12236779
> 
> 赞同：0
> 
> 时间：2012-09-02T14:33:37.317
> 
> 标签：c#, asp.net, http, post

我正在尝试使用用户名和密码远程登录一些 ASP.NET 页面。我试图通过创建**HttpWebRequest**对象并使用 POST 方法将其与参数一起发送，但没有成功。

还有其他方法吗？或者也许我做错了什么，有人可以在这里发布示例吗？我试图访问的页面是 ASP.NET WebForms 页面（带有回发和东西）。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:42:04.023

这取决于您使用的身份验证类型。如果您使用基本或 NTLM 身份验证，则设置 HttpWebRequest 的[Credentials](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx)属性。使用`request.Credentials = CredentialCache.DefaultCredentials`通常有效。上一个链接上的示例应该可以帮助您入门。

如果您使用表单身份验证，则取决于您的登录页面的设计。创建一个传递凭据的 Web 方法可能更容易，该方法返回正确格式的 cookie（或用于后续身份验证的任何内容）。

像往常一样，请记住传递未加密的凭据（例如，使用上述想法的基本身份验证或表单身份验证）允许恶意用户从网络中嗅出凭据。

# java - Netbeans：在普通 Java 项目中使用 JavaMail

> ID：12236783
> 
> 赞同：1
> 
> 时间：2012-09-02T14:34:30.913
> 
> 标签：java, jakarta-ee, netbeans, jakarta-mail, netbeans-7

我正在创建一个能够发送电子邮件的桌面应用程序。我下载了 mail.jar 和 javaee.jar 并将其添加到我的项目库中。但是，当我尝试使用它时，它给了我错误

```
java.lang.ExceptionInInitializerError
Caused by: java.lang.RuntimeException: Uncompilable source code - package javax.mail does not exist 
```

我将这些包导入为，

```
import javax.mail.* 
```

它添加正确，如下图所示。请帮忙！！我怎样才能使这项工作？

![在此处输入图像描述](../Images/ef236a210795539fdcc72367dcff4792.png)

# c++ - 如何将python函数作为c++函数的回调

> ID：12236787
> 
> 赞同：4
> 
> 时间：2012-09-02T14:34:51.280
> 
> 标签：c++, python, boost-python

> **可能重复：**
> [使用 boost::python 将回调从 python 传递到 c++](https://stackoverflow.com/questions/7204664/pass-callback-from-python-to-c-using-boostpython)

我必须制作一个python函数作为c++函数的回调。怎么办？在哪里可以找到一些例子？我想使用 boost.python。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:33:18.723

我的方法（不是唯一的方法）

在 C++ 中，我有一个通过以下方式提供回调的类：

```
struct Mesh {
 template<class Visitor>
  void visitChildren(Visitor& v)
  {
     [...]
     v.visit([...])
  }
} 
```

然后当我将类导出到 python 时（仍然是 C++）

```
struct ChildrenVisitor 
{
   ChildrenVisitor(PyObject* self)
        : self(self) 
   {}

  void visit( /* .... */ )
  {
    call_method<void>(self, "visit" /*, [...] */ );
  }

 private:
    PyObject* self; // 1
}; 
```

将访问者本身导出到 python

```
typedef ChildrenVisitor ClassT;
class_<ClassT, boost::noncopyable >("ChildrenVisitor",
    init<PyObject*>() ); 
```

并为`Mesh`您的出口做

```
.def("visitChildren", &Mesh::template visitChildren<ChildrenVisitor> ) 
```

我总是使用`...`可以插入任何论点的地方。

在python中你做这样的事情

```
class MyVisitor(ChildrenVisitor): 
  def __init__(self):
    ChildrenVisitor.__init__(self,self)

  def visit(self):
    # do whatever you want 
```

我还喜欢创建一个`ChildrenVisitor`接受 lambda 函数的子类，这使得用 python 单行编写访问者。

* * *

哦，顺便说一句。如果您想稍后调用该函数，那么您需要将 C++ 实现更改为类似这样

```
struct ChildrenVisitorBase 
{
  virtual void visit( /* .... */ ) = 0;
};

struct Mesh {
  void registerCallback(shared_ptr<ChildrenVisitorBase> v)
  {
     visitors.push_back(v)
  }

  void doSomeWork() {
    // ...
    for(int i=0; i < visitors.size(); ++i)
      visitors[i]->visit( /* ... */ )
  }

  std::vector<  shared_ptr<ChildrenVisitorBase> > visitors;
} 
```

并制作`ChildrenVisitor`工具`ChildrenVisitorBase`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:28:16.510

[这个食谱](http://code.activestate.com/recipes/65210-implementing-c-function-callbacks-using-python/)回答了你的问题。

如果你想作为回调的函数在编译时已经知道，你应该使用`PyEval_CallObject(...);`. 如果必须在运行时定义函数，请使用配方中显示的方案来接收函子指针。

# class - 在类声明c#中声明一个未知类型

> ID：12236788
> 
> 赞同：0
> 
> 时间：2012-09-02T14:34:54.820
> 
> 标签：class, types, declaration, var

好吧，我不应该是第一个提出这个问题的人。但我还没有找到解决我的问题的方法。也许我只是不知道确切的术语。

我目前正在（用 c# 编写）一个必须处理不同类型游戏玩家的程序。

IE：

```
public class Gamer {

  public int ID { set; get; }
  public string Name { set; get; }

public Gamer(int ID, string Name) 
{
  this.ID = ID;
  this.Name = Name;
} 
```

然后我在具有不同属性的不同类型的玩家（例如国际象棋、围棋、高尔夫）之间进行区分：

```
public class ChessPlayer : Gamer {

  public int ELORank { set; get; }

  public ChessPlayer(int ID, string Name, int ELORank) 
  {
    this.ID = ID;
    this.Name = Name;
    this.ELORANK = ELORank;
  }
}

public class TennisPlayer : Gamer {

  public int SinglesRank { set; get; }
  public int DoublesRank { set; get; }
  public bool LeftHanded { set; get; }

  public TennisPlayer(int ID, string Name,
                      int SinglesRank, int DoublesRank bool LeftHanded) 
  {
    this.ID = ID;
    this.Name = Name;
    this.SinglesRank = SinglesRank;
    this.DoublesRank = DoublesRank;
    this.LeftHanded = LeftHanded;
  }
} 
```

然后我有一个静态类，我在其中编写当前参与的 Gamers：

```
public static class Game{
  public static int Type { set; get; } //0 = Chess, 1 = Tennis
  public static var Gamer { set; get; }
} 
```

这样我就可以在 ButtonClick 上写：

```
private void ButtonClick (Sender object, Event e)
{
  ArrayList Participants = new ArrayList;
  switch (Game.type)
  {
    case 0: //Chess
    {
      [...] //Add chess player to ArrayList
      break;
    Game.Gamer = Participants.ToArray(typeof(ChessPlayer)) as ChessPlayer[];
    }
    case 1: //Tennis
    {
      [...] //Add tennis player to ArrayList
      Game.Gamer = Participants.ToArray(typeof(TennisPlayer)) as TennisPlayer[];
      break;
    }

  }
} 
```

好吧，我想这样做，但是

```
public static var Gamer { set; get; } 
```

只是不允许，因为你的类声明中不能有 var 。

这就是为什么我目前正在使用类 AllGamer，它具有 ChessPlayer 和 TennisPlayer 等的每个构造函数和属性。它正在工作。但我认为我最初的想法会更好。

我对 c# 很陌生，这是我的第一个真正的 OOP 项目。因此，如果您有任何想法，我真的很乐意听到/阅读它们。是否有可能使用未确定的类型或在运行时确定类型（类似于“var”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:38:10.870

因为 ChessPlayer 和 TennisPlayer 都是 Gamer，所以可以创建一个 Gamer 类型的属性

```
 public Gamer TheGamer {get;set;} 
```

另一种方法是定义一个`Interface`，说`IGamer`并让您的 Players 实现该接口

```
 public IGamer TheGamer {get;set;} 
```

# jquery - 在多背景 div 中更改一个背景图像的位置

> ID：12236792
> 
> 赞同：2
> 
> 时间：2012-09-02T14:35:36.060
> 
> 标签：jquery, html, css, background-position

我有一个简单的 HTML :`<div id="wrapper"></div>`和这个样式表：

```
#wrapper{

        position: absolute;

        width: 400px;
        height: 400px;     

        background-image: url(img1.png), url(img2.png);

        background-repeat: no-repeat, no-repeat;

        background-position: top center, center center;

        background-color: green;
        border: 1px solid black;

} 
```

如上面的样式表所示`#wrapper`，在不同的位置有两个背景图像。我想在鼠标单击时更改**第二个图像位置，****而不对第一个图像位置应用任何更改**。我必须使用什么语法？

我的jQuery代码：

```
$("#wrapper").click(function(){
    this.css("background-position": " ? , bottom right " );
}); 
```

我认为`?`应该替换为类似`!important`但`!important`不适用于在第一张图像上应用不更改的东西。

两个背景图像的位置会在不同的地方发生变化，我现在不知道第一个图像位置是什么，我可以将其位置保存在一个变量中，但我宁愿使用本机解决方案，如果有
任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:41:21.053

使用多个背景，背景和涉及背景的所有其他属性都是逗号分隔的列表，所以您所要做的就是使用与“不”相同的 CSS 规则对第一个背景图像的位置进行任何更改：

```
$("#wrapper").on('click', function(){
    $(this).css("background-position", "top center, bottom right");
}); 
```

另一种选择是在类中设置背景位置，然后只交换类：

```
.bg1 {background-position: top center, center center;}
.bg2 {background-position: top center, bottom right;} 
```

-

```
$("#wrapper").on('click', function(){
    $(this).toggleClass('bg1 bg2');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:41:29.567

您需要明确指定两个图像的位置（即使是一个不变的位置，因为据我所知，没有办法跟踪哪个图像是哪个）：

```
$('#wrapper').click(
    function(){
        $(this).css({
            'background-position': 'top center, center center'
        });
    }); 
```

另外，请注意本机 DOM`this`不能使用 jQuery 方法，您必须使用 jQuery`$(this)`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T14:44:20.293

您需要读取第一个位置的原始值，然后将其与更改的第二个值一起重新分配。

```
$("#wrapper").click(function(){
   var first = $(this).css("background-position").split(',')[0];
   $(this).css("background-position", first + ", bottom right " );
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T14:48:23.413

改变背景位置 2

这会将第二个背景位置（逗号后）替换为`bottom right`：

```
$('#wrapper').click(function() {
    $(this).css('background-position', function() {
        return this.style.backgroundPosition.replace(/,(.*)$/, ', bottom right');
    });
}); 
```

改变背景位置 1

这会将第一个背景位置（逗号之前）替换为`bottom right`：

```
$('#wrapper').click(function() {
    $(this).css('background-position', function() {
        return this.style.backgroundPosition.replace(/(.*),/, 'bottom right, ');
    });
}); 
```

如果元素只有两个背景并且我们想要更改每个背景图像的位置或任何其他属性，此解决方案是一个不错的选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-20T12:53:37.097

纯 CSS：

```
body {

  background-image:
    url(https://...image1),
    url(https://...image2);

  background-position:
    top 10% left 10%,
    top 10% right 10%;
} 
```

# objective-c - 如何删除 NSManagedObjectContext 的所有实例

> ID：12236793
> 
> 赞同：2
> 
> 时间：2012-09-02T14:36:04.283
> 
> 标签：objective-c, ios, core-data, restkit, nsmanagedobjectcontext

我有一个应用程序，要求用户在每次使用时输入代码。输入新代码时，我需要删除 Core Data 中的所有内容。我遇到的问题是我正在使用 RestKit，它允许您使用多个`NSManagedContext`s（例如`[NSManagedObjectContext contextForCurrentThread]`）。

Core Data 有没有办法删除所有上下文，以便`AppDelegates`销毁上下文以及当前线程中的所有上下文？

也许发送一个通知和任何有`contextForCurrentThread`它可以删除自己或删除其所有内容的东西？

# performance - MongoDB 数据架构性能

> ID：12236794
> 
> 赞同：3
> 
> 时间：2012-09-02T14:36:15.183
> 
> 标签：performance, mongodb, schema-design

我试图了解 MongoDB 文档中数组和哈希的内部分配和放置（据我所知，这是通过数组实现的）。

在我们的领域中，我们的文档包含数千到数十万个键值对，其逻辑分组深度可达 5-6 级（想想嵌套散列）。

我们用一个点来表示键中的嵌套，例如 ，`x.y.z`在插入 MongoDB 时会自动变成如下所示：

```
{
    "_id" : "whatever",
    "x" : {
        "y" : {
            "z" : 5
        }
    }
} 
```

最常见的操作是增加一个值，我们使用 atomic 执行此操作`$inc`，通常使用单个更新命令一次增加 1000+ 个值。随着时间的推移添加新密钥，但并不频繁，例如每天 100 次。

我想到另一种表示方法是不在名称中使用点，而是使用其他分隔符并创建一个平面文档，例如，

```
{
    "_id" : "whatever",
    "x-y-z" : 5
} 
```

鉴于键值对的数量以及`$inc`更新和新键插入方面的使用模式，我正在寻找关于两种方法之间权衡的指导：

*   磁盘空间开销

*   `$inc`更新性能

*   新键插入的性能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:42:58.420

MongoDB 中文档的磁盘存储采用 BSON 格式。这里有 BSON 格式的详细描述：- [http://bsonspec.org/#/specification](http://bsonspec.org/#/specification)

虽然使用短键名可以节省一些磁盘空间（因为您可以通过查看规范看到，键名嵌入在文档中），但在我看来，两者之间几乎没有净差异根据使用的磁盘空间进行设计——您使用分隔符 (-) 使用的额外字节通过不必为单独的键值使用字符串终止符而被买回。

两种格式的 $inc 更新应该花费几乎相同的时间，因为它们都将是内存中的操作。与从磁盘读取文档所需的时间相比，内存更新时间的任何改进都将是最小的舍入误差。

新键插入的性能也应该几乎相同。如果添加新的键/值对使新文档足够小以适合磁盘上的旧位置，那么所发生的就是更新内存版本并写入日志条目。最终，内存版本将被写入磁盘。

如果文档的增长超出了先前为其分配的空间，则新的键插入会带来更多问题。在这种情况下，服务器必须将文档移动到新位置并更新指向该文档的所有索引。这通常是一个较慢的操作，应该避免。但是，您正在讨论的架构更改不应影响文档移动的频率。再一次，我认为这是一次洗礼。

我的建议是使用最适合开发人员生产力的模式。如果您遇到性能问题，那么您可以就如何扩展系统或提高性能或两者兼而有之提出单独的问题。

# ruby-on-rails - 将 ActiveSupport::OrderedHash 转换为简单哈希

> ID：12236799
> 
> 赞同：0
> 
> 时间：2012-09-02T14:37:36.513
> 
> 标签：ruby-on-rails, memcached

嗨，我正在尝试在 memcached 中缓存查询结果，但不幸的是我无法做到，因为该对象是 ActiveRecord::OrderedHash 对象：

```
result = Car.where(:brand => 'BMW').order(:model_name).group(:model_name).count(:model_name) 
#=> {'120d' => 23, '316i' => 3, '525d' => 50} which is a ActiveRecord::OrderedHash if i ask .class
Rails.cache.write('cached_result', result) 
```

这将返回以下错误：

键“cached_result”的编组错误：无法使用默认 proc 转储哈希您正在尝试缓存无法序列化到 memcached 的 Ruby 对象。/Users/nk/.rvm/gems/ruby-1.9.3-p194@au/gems/dalli-2.1.0/lib/dalli/server.rb:277:in `dump'

解决这个问题的最佳/最简单的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:06:08.463

这应该可以解决问题。由于该`to_hash`方法还返回一个`OrderedHash`对象，而不是一个`Hash`对象，因此必须采用不同的路线：

```
result = Car.where(:brand => 'BMW').order(:model_name).group(:model_name).count(:model_name)

# make a simple array of the OrderedHash and put it in a "normal" one
h = Hash[result.to_a]
h.class  # => Hash 
```

# java - 使用 WSSpringServlet 进行 Spring 自动装配

> ID：12236816
> 
> 赞同：1
> 
> 时间：2012-09-02T14:39:52.190
> 
> 标签：java, spring, jax-ws, autowired

我正在开发一个使用`com.sun.xml.ws.transport.http.servlet.WSSpringServlet`（JAX-WS RI Spring 插件）部署 JAX-WS Web 服务的应用程序。应用程序被设置为让端点类（用 注释`@WebService`）调用一个或多个服务，这些服务又调用 DAO。

似乎 bean 的自动装配在端点类中可以拉入我的服务层，但是服务层中带有注释的任何东西`@Autowired`都无法拉入 DAO。我没有加载 Spring `DisptacherServlet`，因为我没有使用此应用程序托管任何其他 Web 内容`ContextLoaderListener`，并且`WSSpringServlet`.

有什么方法可以在应用程序中的所有类中进行自动装配工作？或者，我应该考虑以不同的方式部署我的 Web 服务吗？

此外，当您使用 Spring 而不加载`DispatcherServlet`. 例如使用 Spring-Quartz 集成。尽管我没有尝试使用 Spring 管理的 Quartz 作业进行自动装配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:17:15.050

因此，经过大量研究（以及我的头发拉扯），整个问题似乎已经归结为不是野餐。基本上在开发的早期，我已经放置了一行代码用于测试，这些代码只是在我的 Service inline 实例中创建而不是将其连接起来。显然，因此 Spring 没有管理我的类来自动连接任何东西。删除内联实例化并使用自动装配实例解决了这个问题。

```
 *facepalm*
  *facepalm*
  *facepalm* 
```

# objective-c - 在 NSView 中调整 Grippy/Triangle 的大小

> ID：12236817
> 
> 赞同：0
> 
> 时间：2012-09-02T14:40:01.630
> 
> 标签：objective-c, xcode, cocoa

我想创建一个 NSView 子类，它在视图的右下角包含一个调整大小的三角形/grippy。这个想法是，您可以从 IB 将其设置为任何自定义视图的类，它会自动将其转换为可调整大小的区域。例如，您可以将 NSTextField 放入此自定义视图中，分配边界，这应该使文本字段可调整大小。

在我继续这样做之前，是否有一些东西已经有这种行为？如果没有，解决问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:21:59.487

我不知道有什么东西会自动为你做这件事。除了使任意控件用户可调整大小之外，还有一些事情需要考虑（z 顺序和碰撞）。

也就是说，我假设您知道如何在自定义视图中绘制基本手柄（如果不知道，请阅读基本的 Cocoa 绘图指南并在遇到困难时发布具体问题）。除此之外，您还需要研究 Cocoa 事件处理指南的[鼠标处理事件部分，并在](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html)[跟踪区域](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html)内实现鼠标拖动行为（您将为绘制抓握的同一区域创建该区域 - 您也可以为该区域设置一个调整大小的光标）。从这里拖动将相应地设置视图的框架。

# css - 基于 CSS 的表格布局：行内块放置的不一致行为

> ID：12236822
> 
> 赞同：0
> 
> 时间：2012-09-02T14:40:38.097
> 
> 标签：css

我正在尝试使用固定宽度的内联块重新创建表格元素，并且我在间距元素中遇到了来自浏览器（Chrome 和 IE）的明显不一致的行为。

这是问题的图像：

![在此处输入图像描述](../Images/11ec63b7dc1fc24d8dd97bb3e6d7274e.png)

问题是前两行中的第一行（它应该作为标题并且是页面的静态 HTML 的一部分）`span`在右侧得到一个奇怪的间距 - 正如你可以从 CSS 中看到的那样，有一个边距0 声明（这显然是一个 WIP，有些`span`应该被`div`s 等替换，所以请多多包涵。）。

如果我改为在运行时通过 Javascript 动态添加行，我会得到下面的两行 - 这是预期的行为。在蓝色中，您可以找到这些行的容器 - 100% 的`div`元素，包括所有这些。我使用这种方法而不是普通表的另一个原因是我希望动态数据行可滚动，而使用`table`.

这是HTML：

```
 <span class="cssTRC">
            <span>
                <span>Day</span>
                <span>Loc</span>
                <span>Nagare</span>
                <span>Pcs</span>
                <span>Packs</span>
            </span>
            <span>
                <span>Thu 30 Aug</span>
                <span>E5-1</span>
                <span>{only DI}</span>
                <span>480</span>
                <span>1</span>
            </span>
    </span>
   <span id="ctblrcOrdHist" class="cssTRC">
         <span>
              <span>Thu 30 Aug</span>
              <span>E5-1</span>
              <span>DI</span>
              <span>480</span>
              <span>1</span>
         </span> 
         <span>
            <span>Thu 30 Aug</span>
            <span>KE-1</span>
            <span>DI</span>
            <span>500</span> 
            <span>1</span>
         </span>
      </span> 
```

和 CSS，定义如下：

```
.cssTH>span>span,.cssTRC>span>span
{
    display:inline-block;
    text-overflow:ellipsis;
    white-space:nowrap;
    overflow:hidden;
    font-size:1em;
    box-sizing:border-box;
    width:5em;
    padding:0.2em;
    margin:0;
    border:0 solid red/*#E8EEF4;*/;
    border-width:0 0 1px 1px;
}
.cssTH>span, .cssTRC>span
{
    display:block;
}
.cssTRC
{
    border:0 solid #E8EEF4;
    border-width:1px 1px 0 0 ;
    display:block;
    /*max-height:200px;
    overflow-y:auto;*/
    box-sizing:content-box;
} 
```

问题显然是如何在运行时不添加伪标题的情况下获得前两行的预期行为（这听起来很可怕）。

**编辑**

我写下我认为更方便的解决方案，这样它也可以作为基本 CSS 表格布局的一个小例子，以防有人需要它：

```
 <div>
                 <span>Day</span
                ><span>Loc</span
                ><span>Nagare</span
                ><span>Pcs</span
                ><span>Packs</span>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:45:36.240

`</span>`使用时和之间不要留空格（`<span>`在使用`inline-block`两个元素时，两个元素之间的任何类型的空格都很重要`display: inline-block`）。

像这样：

```
<span>Day</span><span>Loc</span> 
```

当您通过 JavaScript 添加它们时，在结束标记和下一个开始标记之间不会插入空格，这就是为什么在这种情况下看起来不错的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:45:43.600

跨度之间的空格导致的问题 -[**演示**](http://jsfiddle.net/zrsUk/)

我`float`在这个例子中使用了修复。有关解决此问题的更多方法，您可以查看[此处](https://stackoverflow.com/a/12183374/1499781)

# java - 带有 Hibernate 映射的 BeanCreationException（使用 Spring 和 Maven）

> ID：12236824
> 
> 赞同：0
> 
> 时间：2012-09-02T14:40:54.867
> 
> 标签：java, spring, hibernate, maven

我正在尝试正确建立不同实体之间的关系。

查看代码我认为一切正常且连贯（我已验证属性与 Hibernate 映射配置文件中建立的名称相同），但是，它无法编译。所以很明显这是不行的。显示的错误如下：

```
org.springframework.beans.factory.BeanCreationException: Error creating
bean with name 'org.springframework.dao.annotation.
PersistenceExceptionTranslationPostProcessor#0' defined in class path
resource [spring.cfg.xml]: Initialization of bean failed; nested 
exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'sessionFactory' defined in class path
resource [spring.cfg.xml]: Invocation of init method failed; nested
exception is org.hibernate.HibernateException: Unable to instantiate
default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer] 
```

pom.xml 文件如下

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.igalia.mswl</groupId>
<artifactId>snippr</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>snippr Maven Webapp</name>
<url>http://maven.apache.org</url>

<!-- =================================================================== -->
<!-- Default values for properties.These default values are expected to
    be valid for most profiles.Specific profiles can overwrite values when necessary. -->
<properties>
    <!-- Data source properties -->
    <dataSource.user>test</dataSource.user>
    <dataSource.password>test</dataSource.password>
    <dataSource.jndiName>jdbc/testdb</dataSource.jndiName>
    <testDataSource.user>${dataSource.user}</testDataSource.user>
    <testDataSource.password>${dataSource.password}</testDataSource.password>
    <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
    <spring-security.version>3.0.5.RELEASE</spring-security.version>
</properties>

<!-- =================================================================== -->
<!-- Profiles. * The build is always executed by selecting at least two
    non-exclusive profiles. By default, such profiles are "dev" and "postgresql"
    (meaning "use PostgreSQL assuming a development environment"). * General
    profiles. There are two general (database-independent) profiles: "dev" and
    "prod". The former is used for development (including testing) and the latter
    is used for production (including testing). As shown below, two dataSources
    (databases schemas) are used in both profiles: one for running (dataSource)
    and another one for the Maven test fase (testDataSource). Note the Maven
    test fase is executed both with development and production profiles. * Database-specific
    profiles. There is a profile for each supported database. * Specific profiles
    can be defined to better adapt to a particular environment by overwriting/adding
    properties and/or including other chunks of valid XML. * Usage: + mvn <<goal>>
    => Execute <<goal>> with default profiles. + mvn -Pdev,<<database>> <<goal>
    => Execute <<goal>> with "dev" and <<database>> profiles. + mvn -Pprod,<<database>>
    <<goal>> => Execute <<goal>> with "prod" and <<database>> profiles. + Note
    that when using -P option all desired profiles must be specified (e.g. "-Pprod"
    with the intention to select "prod" and the default database profile is not
    correct; "-Pprod,<<database>>" must be used instead). * Examples: + mvn <<goal>>
    + mvn -Ppostgresql,prod <<goal>> + mvn -Ppostgresql,dev <<goal>> -->

<profiles>
    <!-- Development profile -->
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <!-- SnippR environment properties -->
            <snippr.mode>dev</snippr.mode>
            <!-- Hibernate properties -->
            <hibernate.show_sql>true</hibernate.show_sql>
            <hibernate.format_sql>true</hibernate.format_sql>
            <hibernate.use_sql_comments>true</hibernate.use_sql_comments>
            <hibernate.hbm2ddl.auto>update</hibernate.hbm2ddl.auto>
        </properties>
    </profile>

    <!-- MySQL profile -->
    <profile>
        <id>mysql</id>
        <properties>
            <!-- JDBC driver properties -->
            <jdbcDriver.groupId>mysql</jdbcDriver.groupId>
            <jdbcDriver.artifactId>mysql-connector-java</jdbcDriver.artifactId>
            <jdbcDriver.version>5.0.5</jdbcDriver.version>
            <jdbcDriver.className>com.mysql.jdbc.Driver</jdbcDriver.className>
            <!-- Data source properties -->
            <dataSource.url>jdbc:mysql://localhost/testdb</dataSource.url>
            <!-- Hibernate properties -->
            <hibernate.dialect>org.hibernate.dialect.MySQLInnoDBDialect</hibernate.dialect>
        </properties>
    </profile>

    <!-- PostgreSQL profile -->
    <profile>
        <id>postgresql</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <!-- JDBC driver properties -->
            <jdbcDriver.groupId>postgresql</jdbcDriver.groupId>
            <jdbcDriver.artifactId>postgresql</jdbcDriver.artifactId>
            <jdbcDriver.version>8.3-603.jdbc4</jdbcDriver.version>
            <jdbcDriver.className>org.postgresql.Driver</jdbcDriver.className>
            <!-- Data source properties -->
            <dataSource.url>jdbc:postgresql://localhost/testdb</dataSource.url>
            <!-- Hibernate properties -->
            <hibernate.dialect>org.hibernate.dialect.PostgreSQLDialect</hibernate.dialect>
            <!-- <databasetable.prefix>public.</databasetable.prefix> -->
        </properties>
    </profile>

</profiles>

<!-- =================================================================== -->
<!-- Repository management -->
<repositories>
    <repository>
        <id>zkoss</id>
        <url>http://mavensync.zkoss.org/maven2/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
    </repository>
    <repository>
        <id>central</id>
        <url>http://repo1.maven.org/maven2</url>
        <releases>
            <enabled>true</enabled>
        </releases>
    </repository>
</repositories>

<!-- =================================================================== -->
<!-- Dependency management -->
<dependencies>

    <!-- JUnit -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.4</version>
        <scope>test</scope>
    </dependency>

    <!-- Log4j -->
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <!-- ZK -->
    <dependency>
        <groupId>org.zkoss.zk</groupId>
        <artifactId>zk</artifactId>
        <version>5.0.11</version>
    </dependency>
    <dependency>
        <groupId>org.zkoss.zk</groupId>
        <artifactId>zul</artifactId>
        <version>5.0.11</version>
    </dependency>
    <dependency>
        <groupId>org.zkoss.zk</groupId>
        <artifactId>zkplus</artifactId>
        <version>5.0.11</version>
    </dependency>

    <dependency>
        <groupId>org.zkoss.zk</groupId>
        <artifactId>zkspring-core</artifactId>
        <version>3.0</version>
    </dependency>
    <dependency>
        <groupId>org.zkoss.zk</groupId>
        <artifactId>zkspring-security</artifactId>
        <version>3.0</version>
    </dependency>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <!-- Hibernate -->
    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jta_1.0.1B_spec</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.5.Final</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.5.4</version>
    </dependency>

    <!-- JDBC driver -->
    <dependency>
        <groupId>${jdbcDriver.groupId}</groupId>
        <artifactId>${jdbcDriver.artifactId}</artifactId>
        <version>${jdbcDriver.version}</version>
    </dependency>

    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring-security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring-security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring-security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-acl</artifactId>
        <version>${spring-security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${spring-security.version}</version>
    </dependency>
</dependencies>

<build>
    <finalName>snippr</finalName>

    <!-- =============================================================== -->
    <!-- Filtering -->
    <resources>

        <!-- Apply filtering to files matching the following expressions in src/main/resources. -->
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
            <includes>
                <include>*spring.cfg.xml</include>
                <include>*hibernate.cfg.xml</include>
                <include>jetty-env.xml</include>
            </includes>
        </resource>

        <!-- Continue considering resources the files in src/main/resources, but
            without applying filtering. -->
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>

    <testResources>
        <!-- Apply filtering to files matching the following expressions in src/test/resources. -->
        <testResource>
            <directory>src/test/resources</directory>
            <filtering>true</filtering>
            <includes>
                <include>*spring.cfg-test.xml</include>
                <include>*hibernate.cfg-test.xml</include>
            </includes>
        </testResource>

        <!-- Continue considering resources the files in src/test/resources, but
            without applying filtering. -->
        <testResource>
            <directory>src/test/resources</directory>
        </testResource>
    </testResources>

    <!-- Maven plugin -->
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <verbose>true</verbose>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.18</version>
            <configuration>
                <jettyEnvXml>target/classes/jetty-env.xml</jettyEnvXml>
                <reload>manual</reload>
                <stopPort>9966</stopPort>
                <stopKey>stop</stopKey>

                <!-- Log to the console. -->
                <requestLog implementation="org.mortbay.jetty.NCSARequestLog">
                    <append>true</append>
                </requestLog>
            </configuration>

            <dependencies>
                <dependency>
                    <groupId>${jdbcDriver.groupId}</groupId>
                    <artifactId>${jdbcDriver.artifactId}</artifactId>
                    <version>${jdbcDriver.version}</version>
                </dependency>
            </dependencies>

        </plugin>

    </plugins>

</build>
</project> 
```

Snippr.hbm.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="org.snippr.business.entities" default-access="field">

<!-- User -->
<class name="User" table="users">
    <id name="id" access="property">
        <generator class="native" />
    </id>

    <property name="firstName" column="first_name" />
    <property name="lastName" column="last_name" />
    <property name="username" column="user_name" unique="true" />
    <property name="password" column="password" />
    <property name="email" column="email" />
    <property name="enabled" column="enabled" />
    <property name="accountNonExpired" column="account_non_expired" />
    <property name="credentialsNonExpired" column="credentials_non_expired" />
    <property name="accountNonLocked" column="account_non_locked" />

    <set name="roles" table="users_roles" lazy="false">
        <key column="user_id" />
        <many-to-many column="role_id" entity-name="org.snippr.business.entities.Role" />
    </set>
    <set name="snippets" inverse="true" cascade="all-delete-orphan" >
        <key column="user_id" />
        <one-to-many class="org.snippr.business.entities.Snippet" />
    </set>
    <set name="labels" inverse="true" cascade="all-delete-orphan" >
        <key column="user_id" />
        <one-to-many class="org.snippr.business.entities.Label" />
    </set>
    <set name="comments" inverse="true"  cascade="all-delete-orphan" >
        <key column="user_id" />
        <one-to-many class="org.snippr.business.entities.Comment" />
    </set>
</class>

<!-- Role -->
<class name="Role" table="roles">
    <id name="id" access="property">
        <generator class="native" />
    </id>

    <property name="roleName" column="role_name" />
</class>

<!-- Snippet -->
<class name="Snippet" table="snippet">
    <id name="id" access="property">
        <generator class="native" />
    </id>

    <property name="title" unique="true" />
    <property name="description" />
    <set name="snippetCodes" inverse="true" cascade="all-delete-orphan">
        <key column="snippet_id" />
        <one-to-many class="org.snippr.business.entities.SnippetCode" />
    </set>
    <many-to-one name="user" class="org.snippr.business.entities.User"
        column="user_id" not-null="true" />
    <many-to-one name="label" class="org.snippr.business.entities.Label"
        column="label_id" not-null="true" />
</class>

<!-- SnippetCode -->
<class name="SnippetCode" table="snippet_code">
    <id name="id" access="property">
        <generator class="native" />
    </id>

    <property name="code" unique="false" type="text" />
    <many-to-one name="snippet" class="org.snippr.business.entities.Snippet"
        column="snippet_id" not-null="true" />
</class>

<!-- Label -->
<class name="Label" table="label">
    <id name="id" access="property">
        <generator class="native" />
    </id>

    <property name="name" unique="false" />

    <many-to-one name="user" class="org.snippr.business.entities.User"
        column="user_id" not-null="true" />
    <set name="snippets" inverse="true" cascade="save-update">
        <key column="label_id" />
        <one-to-many class="org.snippr.business.entities.Snippet" />
    </set>
</class>

<!-- Comment -->
<class name="Comment" table="comment">
    <id name="id" access="property">
        <generator class="native" />
    </id>

    <property name="text" column="text"/>
    <property name="email" column="email"/>
    <property name="url" column="url"/>

    <many-to-one name="user" class="org.snippr.business.entities.User"
        column="user_id" not-null="true" />
</class>

</hibernate-mapping> 
```

Maven下载的.jar文件如下

*   antlr-2.7.6.jar aopalliance-1.0.jar aspectjrt-1.6.8.jar
*   aspectjtools-1.5.4.jar aspectjweaver-1.6.8.jar bsh-2.0b4.jar
*   commons-collections-3.1.jar commons-fileupload-1.2.1.jar
*   commons-logging-1.1.1.jar dom4j-1.6.1.jar
*   geronimo-jta_1.0.1B_spec-1.1.1.jar
*   hibernate-commons-annotations-3.2.0.Final.jar
*   hibernate-core-3.6.5.Final.jar hibernate-jpa-2.0-api-1.0.0.Final.jar
*   javassist-3.12.1.GA.jar jta-1.1.jar log4j-1.2.16.jar
*   postgresql-8.3-603.jdbc4.jar slf4j-api-1.6.1.jar
*   spring-aop-3.0.3.RELEASE.jar spring-asm-3.0.5.RELEASE.jar
*   spring-beans-3.0.5.RELEASE.jar spring-context-3.0.5.RELEASE.jar
*   spring-context-support-3.0.3.RELEASE.jar
*   spring-core-3.0.5.RELEASE.jar spring-expression-3.0.3.RELEASE.jar
*   spring-jdbc-3.0.5.RELEASE.jar spring-orm-3.0.5.RELEASE.jar
*   spring-security-acl-3.0.5.RELEASE.jar
*   spring-security-config-3.0.5.RELEASE.jar
*   spring-security-core-3.0.5.RELEASE.jar
*   spring-security-taglibs-3.0.5.RELEASE.jar
*   spring-security-web-3.0.5.RELEASE.jar
*   spring-test-3.0.5.RELEASE.jar
*   spring-tx-3.0.5.RELEASE.jar spring-web-3.0.5.RELEASE.jar
*   zcommon-5.0.11.jar zcommons-el-1.1.0.jar zk-5.0.11.jar
*   zkplus-5.0.11.jar zkspring-core-3.0.jar zkspring-security-3.0.jar
*   zul-5.0.11.jar zweb-5.0.11.jar

任何 Java 专家都能够看到这里发生了什么或提供任何线索？正如我所说，我已经验证了名称属性，并且没有看到任何拼写错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:50:57.090

妈的！我觉得自己真的很愚蠢。我确信我已经验证了该实例的所有属性。

该错误是由于其中一个名为“Comment”的类中的错误引起的。我已经阅读了堆栈跟踪中的最新错误，但如果我继续阅读堆栈跟踪，我可以找到以下内容：

```
Caused by: org.hibernate.PropertyNotFoundException: field [user] not found on org.snippr.business.entities.Comment
at org.hibernate.property.DirectPropertyAccessor.getField(DirectPropertyAccessor.java:182)
at org.hibernate.property.DirectPropertyAccessor.getField(DirectPropertyAccessor.java:189)
at org.hibernate.property.DirectPropertyAccessor.getField(DirectPropertyAccessor.java:174)
at org.hibernate.property.DirectPropertyAccessor.getGetter(DirectPropertyAccessor.java:197)
at org.hibernate.mapping.Property.getGetter(Property.java:304)
at org.hibernate.tuple.entity.PojoEntityTuplizer.buildPropertyGetter(PojoEntityTuplizer.java:297)
at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:155)
at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:77) 
```

类评论中没有属性“用户”。映射和类 Comment 之间存在不一致。**映射引用属性 user，但 Comment 有属性 Set users**。班级不正确（我把关系 1-N 弄错了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:46:45.740

有时，当您的类路径中没有 javassist.jar 时会发生此错误。如我所见，您已宣布。确保您拥有类属性的所有 getter 和 setter。

# objective-c - 以编程方式卸载 iOS 设备上的所有视图

> ID：12236840
> 
> 赞同：0
> 
> 时间：2012-09-02T14:42:59.140
> 
> 标签：objective-c, cocoa-touch, viewdidload, viewdidunload, appdelegate

*编辑标题*

我正在使用 Core Data 存储从服务器收集的一些数据。在`appDelegate`'s`applicationDidBecomeActive`中，我检查应用程序是否需要下载新数据（从我服务器上的版本变量）。如果它有旧信息，它会下载新数据。

问题是，在我的某些观点中，我有`tableViews`. `Core Data`这些从in 中提取的数据数组中获取数据`viewDidLoad`。打开应用程序时，`viewDidLoad`已经调用了 ，然后它更新了 中的数据`Core Data`，然后当我使用 输入视图时`tableView`，所有行都是错误的。就我而言，所有行都显示与第一行相同的图像，并且没有任何文本。我在想旧数组有一些损坏的数据需要重新加载。在我写这篇文章时，我意识到`viewDidLoad`需要再次调用。或者至少是`viewDidLoad`. 我不想把它移到`viewDidAppear`或`willAppear`，因为这意味着这种情况每次都会发生。我想过强制重启这个过程，但我读到这是不可能的，而且苹果无论如何都会拒绝强制退出。

实际上，我只需要知道如何以编程方式从 卸载所有视图`AppDelegate`，以便它们必须`viewDidLoad`再次调用。或者再强制一个`viewDidLoad`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:21:37.093

如果您不能使用获取的结果控制器，您可以注册`NSManagedObjectContextObjectsDidChangeNotification`：

```
[[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(contextChanged:)
    name:NSManagedObjectContextObjectsDidChangeNotification
    object:theManagedObjectContext]; 
```

并仅在必要时重新加载数据：

```
- (void)contextChanged:(NSNotification *)note
{
    // reload your table data
} 
```

不要忘记删除观察者，例如`dealloc`：

```
[[NSNotificationCenter defaultCenter] removeObserver:self] 
```

# jquery - 有 2 个时 jQuery 选择 div。

> ID：12236841
> 
> 赞同：2
> 
> 时间：2012-09-02T14:43:03.270
> 
> 标签：jquery, field

先简单介绍一下我的剧本。它创建好友请求的 php/html 渲染。您可能知道，一次可以有 1 到多个好友请求。现在我的 jQuery 脚本只适用于第一个，所以我确实需要一些指导来让两个对多个功能正常工作。

请注意，我的 div 对每个人都有不同的 id。

首先这是我的html

```
 <div class='fRequest'>
<h3>Pending Friend Requests:</h3><div class='friendRequest' id='0'><img src='[url]' alt='Charles Williamson'/> Charles Williamson<a id='4' class='friendConfirm' href='#' 
        style='border:1px solid #dadada; background:#fff; margin-left: 
        10px; line-height: 60px; padding: 4px 4px; color:gray; text-decoration:none;'>
        Confirm</a></br></div><div class='friendRequest' id='1'><img src='[url]' alt='Rachel Cole'/> Rachel Cole<a id='5' class='friendConfirm' href='#' 
        style='border:1px solid #dadada; background:#fff; margin-left: 
        10px; line-height: 60px; padding: 4px 4px; color:gray; text-decoration:none;'>
        Confirm</a></br></div></div> 
```

第二个是我的 jQuery。

```
$(document).ready(function(){
    $(".friendAdded").css('display', 'none');

    var frid = $(".friendConfirm", ".friendConfirm").attr('id');

    $(".friendConfirm#"+frid).click(function(){

        $.get("JSON/addFriend.php?fid="+frid,
            function(data){
            $(".friendAdded").append(data);
            $(".friendAdded").show() })
    });
    $(".closeOwe").click(function(){
        $(".friendAdded").css('display', 'none')
        location.reload();
        });

}); 
```

如何使此代码适用于两个或多个好友请求。

PS。我对 jquery 还很陌生，所以还在学习。很难找到这方面的教程。

感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:46:05.693

`.click()`将事件处理程序绑定到具有 class 的所有元素`friendConfirm`，然后将单击的元素（`id`由 引用`this.id`）连接到`$.get()`url：

```
$(document).ready(function(){
    $(".friendAdded").css('display', 'none');

    $(".friendConfirm").click(function() {
        $.get("JSON/addFriend.php?fid="+this.id,
            function(data) {
              $(".friendAdded").append(data);
              $(".friendAdded").show() 
            }
        );
    });

    $(".closeOwe").click(function() {
        $(".friendAdded").css('display', 'none')
        location.reload();
    });
});​ 
```

# google-cloud-messaging - Android GCM：注册错误

> ID：12236845
> 
> 赞同：0
> 
> 时间：2012-09-02T14:43:49.200
> 
> 标签：google-cloud-messaging

我创建了我的 GCM 项目，我设法注册和接收消息，但我仍然得到：

```
[DataMsgMgr] broadcast intent callback: result=CANCELLED forIntent
{ act=com.google.android.c2dm.intent.RECEIVE cat=[com.redbend.client]
(has extras) } 
```

在类似的问题中，我看到此错误是由于在清单中错误地注册接收器导致接收器获得取消注册意图而不是接收意图。我成功接收到消息，但在 logcat 中仍然出现此错误。有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T14:15:21.497

最终问题是，在提交意图后，我没有提出：

```
setResult(Activity.RESULT_OK, null, null); 
```

希望它会为其他人节省时间......

# android - android:configChanges="orientation" 导致标签卡住

> ID：12236848
> 
> 赞同：1
> 
> 时间：2012-09-02T14:44:05.057
> 
> 标签：android, android-fragments, android-manifest, android-orientation, android-tabs

我有一个使用 actionbarsherlock 的应用程序我用这个

```
android:configChanges="orientation" 
```

在清单文件中停止在旋转时重新创建选项卡片段

现在在旋转时，片段不会被重新创建并且工作正常，但是标签卡住了，我无法选择另一个标签，直到我回到原来的方向。

这是我的主要活动

```
public class class_main extends SherlockFragmentActivity implements ActionBar.TabListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_class_main);

    getSupportActionBar()
    .setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab newTab0 = getSupportActionBar().newTab();

    newTab0.setText("main");
    newTab0.setTabListener(this);

    ActionBar.Tab newTab1 = getSupportActionBar().newTab();

    newTab1.setText("News");
    newTab1.setTabListener(this);

    ActionBar.Tab newTab2 = getSupportActionBar().newTab();

    newTab2.setText("Calendar");
    newTab2.setTabListener(this);

    getSupportActionBar().addTab(newTab0);

    getSupportActionBar().addTab(newTab1);

    getSupportActionBar().addTab(newTab2);

    if (savedInstanceState != null) {
        getSupportActionBar().setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_class_main, menu);
    return super.onCreateOptionsMenu(menu);
}

public void onTabSelected(Tab tab, FragmentTransaction ft) {
    {
        if(tab.getPosition()==0)
        {
        mainFragment frag = new mainFragment();
        ft.replace(android.R.id.content, frag);
        }
        else if(tab.getPosition()==1)
        {
        newsFragment frag = new newsFragment();
        ft.replace(android.R.id.content, frag);
        }
        else if(tab.getPosition()==2)
        {
        calendarFragment frag = new calendarFragment();
        ft.replace(android.R.id.content, frag);
        }

}

public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

public void onTabReselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
}

}
} 
```

# git - Git 非快进更新被拒绝合并远程更改

> ID：12236854
> 
> 赞同：26
> 
> 时间：2012-09-02T14:45:16.660
> 
> 标签：git, github

我该如何解决这个问题？我正在尝试提交，但出现以下错误。

git push origin monty_svm_dev

```
To git@github.com:  ! [rejected]        monty_svm_dev -> monty_svm_dev
(non-fast-forward) error: failed to push some refs to
'git@github.com:/mygit.git' To prevent you from losing history,
non-fast-forward updates were rejected Merge the remote changes before
pushing again.  See the 'Note about fast-forwards' section of 'git
push --help' for details. root@li409-202:~/mypath# 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-02T14:54:31.790

先做`git pull origin monty_svm_dev`_

发生的事情是远程的更改比您的分支更新。

因此，在您进行`push`更改之前，您需要先获取并合并遥控器上的更改。

您可以通过执行`git checkout your_branch`, 然后执行此操作：

`git fetch origin your_branch`然后一个
`git merge your_branch`

或者

```
git pull origin your_branch # fetch and merge in one operation 
```

`monty_svm_dev`您的分支是 master 或您的分支名称（我认为似乎是您的情况）

完成此操作（并解决任何冲突）后，您可以执行`git push origin monty_svm_dev`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:05:59.527

这基本上是因为当你

> git 拉

从一个分支，两个操作发生 fetch 和 merge。现在，如果您的本地有一些更改，那么 git 将不允许您在提交更改之前推送它。

如果遥控器的更改仍未拉入本地并合并，也会出现此问题，因此您需要再次拉取然后推送它。如果不能解决问题请回复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T13:15:03.027

做一个 Git 拉动。然后它将远程分支中最近的代码更改带入您的本地。然后你就可以推动你的改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-30T17:13:11.537

`git push`当用户忘记在命令后发出命令时会出现此问题`git commit`。使用 git 时，请始终确保基本步骤。

> 在使用 git 的理想周期中，请始终检查以下 git 命令是否按以下顺序依次使用：

```
git pull
git add
git commit
git push 
```

我个人避免发布关于堆栈上 git 的大多数问题，因为我总是将我的 git 命令活动与上述顺序相一致。

我创建了一个首字母缩略词以确保我不会忘记，我希望它对读者有用，即：

> pcp（读作：pack push where (p=git​​ push, a=git add, ck=git commit, push=git push)。

我记住 git push、add、commit、pull 的方法是：

> 获取包推送（意思是：git包然后推送）。

总之，记住要“git”包然后“push”。

解决问题：我想添加我最常用的恢复 git 命令：

```
git checkout -- path/to/file/fileName.something #undo changes in file 
```

> 上面撤消了文件中的更改...类似的可以应用于使用 * 作为文件名的多个文件，同样可以应用于多个以空格分隔的目录。

```
git reset filename.txt 
```

> 以上从阶段中删除文件...在此命令之后，我们可以安全地执行 git commit 并且 git 只会提交我们处于阶段的那些文件，这意味着文件“filname.txt”不会被提交）

```
git pull origin your_intended_branch 
```

更改与 your_intended_branch 中的最新合并，这基本上合并了您提交但未推送的更改。一旦一切顺利，只需执行推送：

```
git push 
```

# javascript - 在 google api v3 中使用地理自动完成功能获取邮政编码

> ID：12236857
> 
> 赞同：1
> 
> 时间：2012-09-02T14:45:38.080
> 
> 标签：javascript, google-maps-api-3

这是我正在使用的代码：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

当我在地理自动完成文本字段中选择一个地址时，我希望相应的邮政编码出现在另一个文本字段中，这可能吗？如果有人可以帮助我找到解决方案，我会很高兴。

在做了一些研究后，我发现了这个：

```
var zip = address[address.length - 1].long_name = results[0].address_components; 
```

但我对如何使用此代码获取邮政编码感到困惑？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:12:23.410

在我看来：

1.  该响应中不一定总是有邮政编码。
2.  如果有，最好的方法是搜索结果的address_components，查找类型为“postal_code”的，并使用它，就像[这个例子](http://www.geocodezip.com/v3_GoogleEx_places-autocomplete_postal_code.html)

# javascript - Google Closure Annotating 不会告诉我我错了

> ID：12236862
> 
> 赞同：6
> 
> 时间：2012-09-02T14:46:28.487
> 
> 标签：javascript, compiler-warnings, google-closure-compiler, google-closure

我正在尝试 Google Closure，特别是用于强制类型安全的注释内容。为了测试我做错了什么，尽管编译器不会告诉我它是......

这是代码：

```
// ==ClosureCompiler==
// @output_file_name default.js
// @compilation_level SIMPLE_OPTIMIZATIONS
// ==/ClosureCompiler==

/**
 * A card.
 * @constructor
 * @param {String} cardName The exact name of the card
 * @param {Kinetic.Layer} layer The layer for the card
 */
function CardObject(cardName, layer)
{
    /** @type {Number} */
    var number = cardName;
} 
```

所以，我有一个变量`number`，我说它是 a `Number`，我尝试为它分配一个字符串。这应该是不可能的吧？虽然编译器不会告诉我...

为什么它不告诉我这是错的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T15:45:12.807

Closure Compiler 使用[警告级别](https://developers.google.com/closure/compiler/docs/api-ref#warn)来确定在编译过程中启用了哪些检查。三个警告级别是：

*   安静的
*   默认
*   详细

例如，使用编译级别`SIMPLE_OPTIMIZATIONS`，您仍然会收到警告级别设置为的类型检查警告`VERBOSE`。

```
// ==ClosureCompiler==
// @output_file_name default.js
// @compilation_level SIMPLE_OPTIMIZATIONS
// @warning_level VERBOSE
// ==/ClosureCompiler==

/**
 * A card.
 * @constructor
 * @param {String} cardName The exact name of the card
 * @param {Kinetic.Layer} layer The layer for the card
 */
function CardObject(cardName, layer)
{
    /** @type {Number} */
    var number = cardName;
} 
```

**输出**

```
Number of warnings: 2

JSC_TYPE_PARSE_ERROR: Bad type annotation. Unknown type Kinetic.Layer at line 5
character 10  
* @param {Kinetic.Layer} layer The layer for the card
          ^
JSC_TYPE_MISMATCH: initializing variable
found   : (String|null|undefined)
required: (Number|null) at line 10 character 13
var number = cardName;
             ^ 
```

要准确了解与每个警告级别相关联的检查，以下是来自 WarningLevels.java 的相关代码。

# 安静的

```
/**
 * Silence all non-essential warnings.
 */
private static void silenceAllWarnings(CompilerOptions options) {
  // Just use a ShowByPath warnings guard, so that we don't have
  // to maintain a separate class of warnings guards for silencing warnings.
  options.addWarningsGuard(
      new ShowByPathWarningsGuard(
          "the_longest_path_that_cannot_be_expressed_as_a_string"));

  // Allow passes that aren't going to report anything to be skipped.

  options.checkRequires = CheckLevel.OFF;
  options.checkProvides = CheckLevel.OFF;
  options.checkMissingGetCssNameLevel = CheckLevel.OFF;
  options.aggressiveVarCheck = CheckLevel.OFF;
  options.checkTypes = false;
  options.setWarningLevel(DiagnosticGroups.CHECK_TYPES, CheckLevel.OFF);
  options.checkUnreachableCode = CheckLevel.OFF;
  options.checkMissingReturn = CheckLevel.OFF;
  options.setWarningLevel(DiagnosticGroups.ACCESS_CONTROLS, CheckLevel.OFF);
  options.setWarningLevel(DiagnosticGroups.CONST, CheckLevel.OFF);
  options.setWarningLevel(DiagnosticGroups.CONSTANT_PROPERTY, CheckLevel.OFF);
  options.checkGlobalNamesLevel = CheckLevel.OFF;
  options.checkSuspiciousCode = false;
  options.checkGlobalThisLevel = CheckLevel.OFF;
  options.setWarningLevel(DiagnosticGroups.GLOBAL_THIS, CheckLevel.OFF);
  options.setWarningLevel(DiagnosticGroups.ES5_STRICT, CheckLevel.OFF);
  options.checkCaja = false;
} 
```

# 默认

```
/**
 * Add the default checking pass to the compilation options.
 * @param options The CompilerOptions object to set the options on.
 */
private static void addDefaultWarnings(CompilerOptions options) {
  options.checkSuspiciousCode = true;
  options.checkUnreachableCode = CheckLevel.WARNING;
  options.checkControlStructures = true;
} 
```

# 详细

```
/**
 * Add all the check pass that are possibly relevant to a non-googler.
 * @param options The CompilerOptions object to set the options on.
 */
private static void addVerboseWarnings(CompilerOptions options) {
  addDefaultWarnings(options);

  // checkSuspiciousCode needs to be enabled for CheckGlobalThis to get run.
  options.checkSuspiciousCode = true;
  options.checkGlobalThisLevel = CheckLevel.WARNING;
  options.checkSymbols = true;
  options.checkMissingReturn = CheckLevel.WARNING;

  // checkTypes has the side-effect of asserting that the
  // correct number of arguments are passed to a function.
  // Because the CodingConvention used with the web service does not provide a
  // way for optional arguments to be specified, these warnings may result in
  // false positives.
  options.checkTypes = true;
  options.checkGlobalNamesLevel = CheckLevel.WARNING;
  options.aggressiveVarCheck = CheckLevel.WARNING;
  options.setWarningLevel(
      DiagnosticGroups.MISSING_PROPERTIES, CheckLevel.WARNING);
  options.setWarningLevel(
      DiagnosticGroups.DEPRECATED, CheckLevel.WARNING);
} 
```

请注意，`options.checkTypes = true;`仅为 VERBOSE 警告级别设置。正如[Speransky Danil](https://stackoverflow.com/users/1550807/speransky-danil)指出的那样，在使用编译级别时也启用了类型检查`ADVANCED_OPTIMIZATIONS`。

此外，警告类别可以通过使用编译器标志的 Closure Compiler 应用程序（jar 文件）单独控制：

*   --jscomp_off
*   --jscomp_warning
*   --jscomp_error

可以指定的警告等级如下：

*   访问控制
*   ambiguousFunctionDecl
*   检查正则表达式
*   检查类型
*   检查变量
*   常量
*   常量属性
*   已弃用
*   重复消息
*   es5严格
*   外部验证
*   文件概述标签
*   全球这个
*   internetExplorerChecks
*   无效转换
*   缺少属性
*   非标准JsDocs
*   严格模块深度检查
*   类型失效
*   未定义名称
*   未定义变量
*   未知定义
*   无用代码
*   能见度

例如，可以单独启用类型检查警告：

```
--jscomp_warning=checkTypes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:22:48.160

您应该只选择高级优化模式：

```
// @compilation_level ADVANCED_OPTIMIZATIONS 
```

然后对于此代码，例如：

```
// ==ClosureCompiler==
// @output_file_name default.js
// @compilation_level ADVANCED_OPTIMIZATIONS
// ==/ClosureCompiler==

/**
* @param {String} str
*/
function func(str) {
  /** @type {Number} */
  var num = str;
} 
```

会有警告：

```
JSC_TYPE_MISMATCH: initializing variable
found   : (String|null)
required: (Number|null) at line 6 character 10
var num = str; 
```

我想你知道，但如果不知道，你可以在这里在线玩它：http: [//closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

# algorithm - 查找三个值中较大值和较小值的最有效算法

> ID：12236863
> 
> 赞同：3
> 
> 时间：2012-09-02T14:46:38.120
> 
> 标签：algorithm, comparison, performance

编辑：有人正在阅读这篇文章的奇怪变化，我想添加最后一件事。假设有问题的三个值已经在内存中并且它们没有改变，我计算出不少于 14 条指令来实现这一壮举。

如果有人可以的话，我非常喜欢这一点。

[顶部编辑结束]

问题很简单。我有三个整数值，我需要找到最大和最小的。最大我的意思不是最小或介于两者之间，反之亦然。

由于无法在网上找到“优质解决方案”，我不得不自己尝试。

```
if(a > b) {
  if(a > c) {
    high = a;
    if(b > c) {
      low = c;
    }
    else {
      low = b;
    }
  }
  else {
    if(b > c) {
      high = b;
      low = c;
    }
    else {
      high = c;
      low = b;
    }
  }
}
else if(a > c) {
  if(b > c) {
    high = b;
    low = c;
  }
  else {
    high = c;
    low = b;
  }
}
else {
  low = a;
  if(b > c) {
    high = b;
  }
  else {
    high = c;
  }
} 
```

假设我没有犯任何错误，这应该使用三个条件来解决问题。

假设它按预期工作，我实际上对我的努力很满意，但是我的目的是找到最有效的算法，所以我现在问你那是什么。

最好的祝福。

编辑：我已经审查了迄今为止提出的解决方案，它们都很好。

到目前为止我最喜欢的。

```
if(a>b) {
  max = a;
  min = b;
}
else {
  max = b;
  min = a;
}
if(c>max)
  max = c
else if(c< min)
  min = c 
```

2-3个信号和2-3个条件句，如果我没记错的话。这很让人佩服。

上面的小修改，使用'a'作为'min'的别名。

```
if(a>b) {
  max = a;
  a = b;
}
else {
  max = b;
}
if(c>max)
  max = c
else if(c< a)
  a = c 
```

如果只有一种简单的方法来交换变量......好吧，我唯一能想到的是可以消除对“max”的需要，至少在 C 和 C 派生中，肯定不会有效，除了在内存使用方面，我可以多花 4 个字节。;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T14:48:54.933

因为你只有 3 我会使用类似的东西：

```
Maximum = max(a, max(b,c))
Minimum = min(a, min(b,c)) 
```

我不确定您使用的是哪种语言，但大多数语言都有一个内置或易于访问的 max 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T14:54:05.443

```
if(a>b){swap(a,b);    /* in other words: a=a^b;b=a^b;a=a^b; */}
if(a>c){swap(a,c);    /*in other words: a=a^c;c=a^c;a=a^c;  */}
if(b>c){swap(b,c);    /*in other words: b=b^c;c=b^c;b=b^c;  */}
//now a is the smallest, c is the largest, but names are changed
high=c;
low=a; 
```

如果你绝望了，

```
void swap(int & x, int & y)  //<--- yes it needs to be pass by reference
{
    __asm
    {
       movaps xmm5,[x]
       movaps xmm6,[y]   
       movaps [x],xmm6
       movaps [y],xmm5   //i cant say anything without trying ^^
    }

    return;

} 
```

只有 3 次比较=更少的 cpu 错误分支预测和总循环指令将足够小以适合 cpu-loop-cache（decoded-inst.cache）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-02T16:02:59.987

```
def min_max(a, b, c):
    if a > b:
        min, max = b, a   # two assignments
    else:
        min, max = a, b   # ditto

    if c > max:
        max = c
    elif c < min:
        min = c

    return (min, max) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T14:53:10.887

也许

```
 highest = a; lowest = a;
 if (b>a)
 {
     highest = b;
 }
 else
 {
     lowest = b;
 }
 if (c>highest)
 {
     highest = c;
 }
 else
 {
     if (c<lowest)
     {
         lowest = c;
     }
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T14:59:33.557

这使用 3 个比较和 3 或 4 个分配。

```
min = max = a;

if a < b
    max = b
else
    min = b

if b < c
    if c > a:
        max = c
else
    if c < a:
        min = c 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-02T16:02:14.457

此解决方案使用 between `2`to`3`比较。

返回值是一对（最小值，最大值）。

*   从给定的 3 个号码中选择 2 个号码。
*   比较它们，让我们称较小的一个`a`和较大的一个`b`。
*   让我们拨打未被选中的号码`c`。
*   如果 c>=b 则返回 (a, c)。
*   如果 c>=a 则返回 (a, b)。
*   返回（c，b）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-02T15:47:31.167

计算/枚举开关应该给编译器足够的自由来最小化（条件）跳转的数量：

```
#include <stdio.h>

static inline void minmax3(int*themin,int*themax, int a, int b, int c)
{
switch(
          1 * (a>b)
        + 2 * (a>c)
        + 4 * (c>b)
        ) {
        case 0: *themin = a; *themax = b; break;
        case 1: *themin = b; *themax = a; break;
        case 2: *themin = c; *themax = b; break;
        case 3: *themin = b; *themax = a; break;
        case 4: *themin = a; *themax = c; break;
        case 5: *themin = b; *themax = c; break;
        case 6: *themin = b; *themax = c; break;
        case 7: *themin = b; *themax = a; break;
        }
return ;
}

int main(void)
{
int a,b,c,mi,ma;

for (a=0; a <3; a++) {
        for (b=0; b <3; b++) {
                for (c=0; c <3; c++) {

                        minmax3( &mi, &ma, a, b, c);
                        printf("a=%d b=%d c=%d min=%d max=%d\n"
                        , a, b, c, mi, ma
                        );
        }}}
return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-02T15:54:59.060

```
if(a>=b)
 {if(a>=c)
   {MAX=a;
    MIN=c;
    if(c>=b)
     MIN=b;
     }
  else
   MAX=c,MIN=b;
 }
else
{if(b>=c)
   {MAX=b;
    MIN=c
    if(c>=a)
     MIN=a;
     }
  else
   MAX=c,MIN=a;
 } 
```

# javascript - IE10桌面和metro的区别

> ID：12236867
> 
> 赞同：2
> 
> 时间：2012-09-02T14:46:59.230
> 
> 标签：javascript, microsoft-metro, activex, internet-explorer-10

我想检测用户何时使用 Metro vs Desktop IE10。

我在网上搜索了很多，我发现的结论是，如果用户以 IE10 Metro 风格或桌面风格运行，没有 100% 的方法可以找出（使用代码）。然后我找到了一些网站，它有一个检测activeX的avascript。

**这足以检测 Metro vs Desktop 吗？**

代码如下：

```
 <html>
<body>
<script type="text/javascript">
var myActiveX = null;
var isActiveXCapable = false;

function InitMyActiveX() {

  try {
    new ActiveXObject("");
  }
  catch (e) {
    // FF has ReferenceError here
    if (e.name == 'TypeError' || e.name == 'Error') {
      isActiveXCapable = true;
    }
  }
  try {
    myActiveX = new ActiveXObject("My.ActiveX");
  }
  catch (e) {
    myActiveX = null;
  }

  if (myActiveX != null) {
    document.getElementById("myInfo").innerHTML = myActiveX.GetSomeInfo();
  } else {

    document.getElementById("CallMyActiveX").setAttribute("disabled", "disabled");

    if (!isActiveXCapable) {
      document.getElementById("myInfo").innerHTML = "Browser does not support ActiveX";
    } else {
      document.getElementById("myInfo").innerHTML = "MyActiveX is not installed";
    }
  }
}

function DoSomething() {
InitMyActiveX();
  if (myActiveX != null) {
    var s = myActiveX.DoSomething();
    document.getElementById("myResult").innerHTML = s;
  }

}
</script>

<div id="myInfo"></div>
<input type="button" id="CallMyActiveX" value="Call me" onclick="DoSomething()"  />
<div id="myResult"></div>
</body>
</html> 
```

仅在 IE10 桌面上执行时，我看到“未安装 MyActiveX”。在 Firefox 中，我得到：“未安装 MyActiveX”。我会在 IE10 Metro 风格中得到相同的结果吗？这将有助于确定是否在地铁中运行？

如果这不正确并且无法区分它们，那么我如何完全模仿 IE10 桌面中的 Metro 风格？我如何完全禁用activeX，这样它会给我与metro Ie10相同的结果？

谢谢， 塔尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:52:44.593

在爬网寻找解决方案以确定我的 IE10 是作为桌面版还是 Metro 版运行后，我最终将所有内容汇总在以下函数中：

```
function checkForIE10MetroStyle() {
var result = false;
if (window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints >= 2) {
    var platF = navigator.platform;
    var cpu = navigator.cpuClass;

    if (platF.toLowerCase() == 'win64' || cpu.toLowerCase() == 'arm') {
        // both potential platforms found - now search deeper
        try {
            // IE10 Metro does not support ActiveX
            new ActiveXObject("htmlfile");
        } catch (e) {
            // finally check for fullscreen-mode
            result = (window.innerWidth == screen.width && window.innerHeight == screen.height);
        }
    }
}

return result; 
```

}

不幸的是，没有确切的可能性 100% 确定......但首先我检查 msPointerEnabled 和（但这不是必需的）是否至少有两个“接触点”可用。由于我的脚本在触摸版和鼠标版之间会有所不同，因此我需要进行此检查-您可以简单地将其省略。

但是由于 IE10 还支持 msPointerEnabled，因此我遵循许多人建议的平台字符串...结合 CPU，因为 MS Surface 运行 ARM。最后是两点：ActiveX 和分辨率...

但不幸的是，如果你想的话，即使所有这些点都可以用具有触摸功能的台式机/笔记本电脑来模拟......嗯，到目前为止很难让你的桌面 IE10 但并非不可能。

如果 MS 能够实现一个简单的属性来判断是否触摸以及桌面或地铁，我会喜欢它......但他们没有。

希望我的代码可以帮助你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T21:17:41.430

IE10 Metro 和 IE10 桌面版的功能几乎相同（IE10 桌面支持插件，IE10 Metro 不支持）。如果您希望用户使用桌面版本并且他们使用的是 Metro 版本，那么最好的方法是引导他们使用桌面版本。考虑到用户是 IE10 Metro 版，你希望他使用 IE10 桌面版，他可以在导航栏中点击 2 次打开桌面版....这将是最好的方法![从 IE10 Metro 版打开 IE10 桌面版](../Images/f8e2824e7852b1f95634f895726dcf82.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T10:02:33.103

继 Tomaž Ščavničar 的回答之后，如果有帮助，您似乎可以强制用户使用桌面版本。

这个 SO 帖子有更多信息：

[强制 UI/Metro 中的 IE10 切换到桌面模式](https://stackoverflow.com/questions/16267667/forcing-ie10-in-ui-metro-to-switch-to-desktop-mode)

# z3 - MaxSAT/MaxSMT 示例

> ID：12236873
> 
> 赞同：2
> 
> 时间：2012-09-02T14:48:03.333
> 
> 标签：z3

我在以下链接 [http://research.microsoft.com/en-us/um/redmond/projects/z3/group_maxsat_ex.html找到了“ *MaxSAT* / MaxSMT](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__maxsat__ex.html)示例”， 但它只提供 C 代码。

我对如何直接使用 Z3 编码感兴趣？有人可以给我一个例子吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T01:07:48.983

Z3 文档中的 MaxSAT/MaxSMT 示例的主要目的是演示如何使用 API`Z3_check_assumptions`为 MaxSAT 实现两个不同的过程。该示例包含几条解释基本思想的注释和对 Fu 和 Malik 的论文的参考。该论文详细描述了`fu_malik_maxsat`本示例中的过程中使用的算法。还有其他 MaxSAT 算法可以在 Z3 API 的顶部实现。

Z3 SMT 2.0 前端（即 z3 可执行文件）不直接支持 MaxSAT/MaxSMT。然而，可以为`check-sat`命令提供假设。对 MaxSAT 感兴趣的用户应该使用 MaxSAT 示例作为起点。

# z3 - 如何使用 z3 在定点中获得变量约束？

> ID：12236874
> 
> 赞同：1
> 
> 时间：2012-09-02T14:48:07.843
> 
> 标签：z3, z3-fixedpoint

我希望得到像d>=0.0这样的定点phi中元素的约束，如何在Z3中实现呢？

```
(set-option :produce-models true)
(set-option :dl_engine 1)
(set-option :dl_pdr_use_farkas true)
(declare-var c Real)
(declare-var d Real)
(declare-var lambda Real)
(declare-rel phi(Real))
(rule 
   (=>
      (and
        (>= lambda 0.0)
        (phi c)
      )
      (phi (+ c lambda))
   )
)
(rule 
    (=>
       (= c 0.0)
       (phi c)
    )
)
(rule
     (=>
        (phi c)
        (phi d)
     )
 )
(query (phi d)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:23:17.567

从定点引擎获取信息有两个主要选项。:print-answer true 将导致引擎显示一个或多个满足查询的实例（取决于引擎）。:print-certificate true 将导致引擎打印一条线索来解释答案。如果无法满足查询，则 PDR 引擎将打印一个查询为空的证书（当然，如果它收敛）。

目前，dl 引擎将答案（当查询满足时）打印
为沿着满足查询的跟踪的谓词的合取。所以：

```
(query (phi d) 
  :print-answer true) 
```

将返回：

```
sat
(and (query!0 0.0) (phi 0.0)) 
```

意味着可以导出值 0.0。我计划在未来的版本中更改这种格式，因为格式并不是真正一致的，但我希望这对你有用。

您也可以使用以下方式调用它：

```
(query (phi d) 
  :print-certificate true) 
```

并且它返回一个类似的连词（但带有一个省略十进制符号的漂亮打印机）。

# python - Python Fabric + 数据库中的多主机配置

> ID：12236877
> 
> 赞同：1
> 
> 时间：2012-09-02T14:48:24.597
> 
> 标签：python, database, django, deployment, fabric

我正在开发 Django 应用程序，以协助使用 Fabric 部署 Python 应用程序的过程。

我对 Fabric 和 Django 都有一定的了解，但我不确定我应该如何/应该如何使用它们以便能够在服务器上运行部署和其他任务，而不是将配置存储在数据库中。

问题是，我已经将所有需要的服务器凭据存储在数据库中，并且希望能够使用它们而不是在 fabfile.py 中声明特定的主机（或者可能以某种方式参数化它们，以调用 ie. sth like "fab server1_from_database deploy"） . 我需要能够从 Django 应用程序本身添加/编辑/删除主机，而无需编辑 fabfile.py。

有没有可能实现这一目标？

感谢您的帮助，我完全被困在这里...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:07:32.997

这并不难做到。在您的 fabfile 中，`env`使用来自数据库的凭据初始化对象：

```
from fabric.api import *

credentials = load_credentials_from_your_db()
for (hostname, username, password) in credentials:
    host_string = username + '@' + hostname
    env.hosts.append(host_string)
    env.passwords[host_string] = password 
```

它未经测试，但文档说它应该可以工作。

# python - 在模板标签中导入 Markdown2

> ID：12236881
> 
> 赞同：0
> 
> 时间：2012-09-02T14:48:39.277
> 
> 标签：python, django, import, django-templates, importerror

我的博客需要 Markdown 语法。我决定使用[python-markdown2 库](https://github.com/trentm/python-markdown2)。我遵循 TDD 流程，因此我创建了导入 Markdown 库的测试，并且它可以正常工作。然后我只需要转换一些输出，以便所有测试都通过。我认为它更像是一个演示逻辑，所以我创建了模板标签，我想在其中导入库......据我所知。问题是我无法导入该库！我调试了几个小时，仍然找不到原因。

几个事实：

1.  它之前是在*tests.py*中导入的（所以它确实存在），
2.  不使用外部库，模板标签工作正常；

准确的错误信息：

```
TemplateSyntaxError at /article/1/foo-bar/
'cheese' is not a valid tag library: ImportError raised loading blog.templatetags.cheese: cannot import name markdown 
```

这是*templatetags/cheese.py*：

```
from django import template
import markdown2

register = template.Library()

@register.filter
def eggs(value):
    return value 
```

这是模板：

```
{% load cheese %} 
```

PS如果需要，[完整的错误](https://gist.github.com/3600252)和[所有代码](https://github.com/daGrevis/daGrevis.lv/tree/task_%237)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:31:20.693

回溯显示了您的 github 存储库中不存在的内容：在 templatetags 目录中有一个名为 的文件，该文件在文件出现时`markdown2.py`导入。删除此文件，它应该会找到正确的文件。`cheese``import markdown2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-22T15:51:32.310

从控制台，在项目目录中激活您的 Virtualenv，尝试：

```
pip install markdown2 
```

这对我有帮助，遇到同样的问题。我已经检查过，使用

```
pip freeze 
```

实际上并没有安装 markdown2，甚至认为它已在 PyCharm 中显示。

# gwt - 在 Chrome 扩展中使用 GWT，带有清单版本 2，沙盒

> ID：12236884
> 
> 赞同：0
> 
> 时间：2012-09-02T14:48:56.680
> 
> 标签：gwt, google-chrome-extension, sandbox

有谁知道使用 GWT 的 chrome 扩展的完整示例是通过使用沙盒 GWT 页面（并通过 postMessage 进行通信）在清单版本 2 下工作的？

我的尝试在沙盒页面中加载 nocache.js 文件失败：

```
frameDoc = scriptFrame.contentDocument; 
```

带有“不安全的 JavaScript 尝试使用 URL about 访问框架：来自具有 URL 的框架的空白...域、协议和端口必须匹配。”

GWT 模块是用 xsiframe 编译的。

Sanboxing 完成如下：

```
 "sandbox": {
    "pages": [
      "gwtSandbox.html"
    ]} 
```

gwtSandbox.html：

```
<head>
    <meta charset="utf-8" />

    <title>Hello</title>

    <script type="text/javascript" src="js/gwtSandbox.js"></script>

</head>

<body>

    <!-- GWT -->
    <script type="text/javascript" src="compiledgwt/modulename.nocache.js"></script>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:33:02.653

[在这里您可以找到问题的答案](http://lmatusz.blogspot.com/2012/09/google-web-toolkit-240-developer-plugin.html)

但是，当将最新的 gwtquery 1.2.0 与大多数插件一起使用时，会出现奇怪的错误，这会阻止（如 java.lang.ArrayIndexOutOfBounds 异常）加载整页描述。

# ios - facebook 和 pinterest 如何实现他们的 LIKE 方法

> ID：12236886
> 
> 赞同：0
> 
> 时间：2012-09-02T14:49:19.450
> 
> 标签：ios, uibutton, selector

假设他们没有 API，他们如何实现 LIKE 按钮？

例如。我在视图中设置了一个按钮

```
UIButton *likeButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [likeButton setTitle:@"Like" forState:UIControlStateNormal];
    [likeButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    likeButton.frame=CGRectMake(10, 10, 100,30); 
```

带有一个选择器来检测喜欢按钮

```
[likeButton addTarget:self action:@selector(likeButtonPressedAction:) forControlEvents:UIControlEventTouchUpInside]; 
```

是否可以将 USER 传递给 likeButtonPressedAction 选择器，以便我知道按下 LIKE 的是哪个用户？即我可以检测LIKE 按钮是否被按下，但我不确定如何检测LIKE 属于谁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:57:05.907

似乎最好的方法是使用标签来识别所需的视图。

# zend-form - Zend Framework 2 - 表单翻译

> ID：12236888
> 
> 赞同：0
> 
> 时间：2012-09-02T14:49:31.650
> 
> 标签：zend-form, zend-framework2, zend-translate

我有一个关于 Zend Framework 2 Form translate 的问题。现在我无法将表单错误消息从英语翻译成意大利语（我的语言）。

我尝试将 module.config.php 设置如下：

```
//...
'translator' => array(
    'locale' => 'it_IT',
    'translation_file_patterns' => array(
        array(
            'type' => 'phparray',
            'base_dir' => __DIR__. '/../language/form_errors',
            'pattern' => '%s.php'
        )
    ),
), 
```

并且该文件当前加载在 Translator 类中。问题是：即使我写了表单错误的索引（或消息），它也不会翻译表单消息。

```
return array(
'Skeleton Application' => 'Applicazione Scheletro',
"IS_EMPTY" => 'Il valore non può essere vuoto'
); 
```

但是，如果我使用 $translator->translate('Skeleton Application') 它就像一个魅力......任何提示？

多谢指教。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:29:18.843

那是因为您需要翻译英文错误消息，这不是“IS_EMPTY”，而是类似于“此输入是必需的，不能为空”。

我建议您使用 gettext 翻译。它仍然非常快，但为您提供了一些强大的工具来翻译和从源中获取翻译字符串（例如 PoEdit）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:17:03.760

所有验证消息都已翻译。您可以在目录中找到翻译文件：“resources/languages/”。

看看这个： [http ://packages.zendframework.com/docs/latest/manual/en/modules/zend.validator.messages.html](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.validator.messages.html)

# android - 如何快速填充图库和 Imageswitcher？

> ID：12236889
> 
> 赞同：1
> 
> 时间：2012-09-02T14:49:54.377
> 
> 标签：android, optimization, memory-leaks, android-gallery, imageswitcher

```
public class MainActivity extends Activity implements ViewSwitcher.ViewFactory, OnItemSelectedListener {  
 private Gallery gallery;                                                                            
 private ImageSwitcher imageSwitcher;                               
 private ImageAdapter ia;   
 private int res_id;
 private Bitmap mBitmap;

 @Override  
 public void onCreate(Bundle savedInstanceState) {  
      super.onCreate(savedInstanceState);  
      setContentView(R.layout.activity_main);  

      gallery = (Gallery) findViewById(R.id.gallery);                    
      imageSwitcher = (ImageSwitcher) findViewById(R.id.image_switcher);  

      imageSwitcher.setFactory(this);             
      imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,  
                android.R.anim.fade_in));  
      imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,  
                android.R.anim.fade_out));  

      ia = new ImageAdapter(this);  
      gallery.setAdapter(ia);  

      //Event listener
      gallery.setOnItemSelectedListener(this);  
 }  
 public boolean onCreateOptionsMenu(Menu menu)
 {
     MenuInflater menuInflater = getMenuInflater();
     menuInflater.inflate(R.layout.menu, menu);
     return true;
 }
 public boolean onOptionsItemSelected(MenuItem item)
 {

     switch (item.getItemId())
     {
         case R.id.menu_save:

        mBitmap = BitmapFactory.decodeResource(getResources(),res_id);

        String filename = "barca_"+res_id+".jpg";
        File sd = Environment.getExternalStorageDirectory();
        String full_path=sd.getAbsolutePath()+"/BarcaWallpapers/";
        File temp=new File(full_path);
        temp.mkdirs();
        File dest = new File(temp,filename);
        try {
               FileOutputStream out = new FileOutputStream(dest);
               mBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
              Toast.makeText(this, "Saved in Folder "+full_path, Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
               e.printStackTrace();
              Toast.makeText(this, "error", Toast.LENGTH_LONG).show();
        }
         return true;

     case R.id.menu_set_wallpapaer:
         final WallpaperManager wallpaperManager = WallpaperManager.getInstance(MainActivity.this);

        try{

        wallpaperManager.setResource(res_id);
        Toast.makeText(this,"Wallpaper Set", Toast.LENGTH_SHORT).show();
         }
        catch(Exception e)
        {
            Toast.makeText(this, "error setting wallpaper", Toast.LENGTH_SHORT).show();

        }
         return true;

     default:
         return super.onOptionsItemSelected(item);
     }
 }    
 public void onNothingSelected(AdapterView<?> parent) {  
 } 

 public void onItemSelected(AdapterView<?> parent, View view, int position, long id) { 
     int imageResourceId = (Integer) ia.getItem(position); 

     res_id=imageResourceId;

     imageSwitcher.setImageResource(imageResourceId);

}  

public View makeView() {  
     ImageView i = new ImageView(this);  
     i.setScaleType(ImageView.ScaleType.FIT_CENTER); 

     i.setLayoutParams(new ImageSwitcher.LayoutParams(LayoutParams.FILL_PARENT,
             LayoutParams.FILL_PARENT));
     return i;  
}  

 private class ImageAdapter extends BaseAdapter {  
      private Context context;  

      private ImageAdapter(Context context) {  
           this.context = context;  
      }  

      private int[] IMAGE_IDS = {  
               R.drawable.img1,R.drawable.img2,R.drawable.img3,R.drawable.img4,R.drawable.img5,R.drawable.img6,

                   };  

      public int getCount() {  
           return IMAGE_IDS.length;  
      }  

      public Object getItem(int position) {  
           return IMAGE_IDS[position];  
      }  

      public long getItemId(int position) {  
          return IMAGE_IDS[position];
      }  

      public View getView(int position, View convertView, ViewGroup parent) {  

             ImageView imageView;
    if (convertView == null) {  
        imageView = new ImageView(context);

        imageView.setLayoutParams(new Gallery.LayoutParams(120,120));

        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(IMAGE_IDS[position]);

    return imageView;

      }  
 } 
```

}

我有壁纸应用程序的上述代码。活动 xml 布局文件包含一个画廊视图和其下方的图像切换器，用户可以在其中浏览和导航画廊，并且相应的图像在图像切换器下方打开。然后用户可以将图像设置为墙纸或保存到 SD 卡。上面的代码非常适用于小图像，但对于像我打算在应用程序中使用的大图像，则失败得很惨。应用程序在内存不足时崩溃（openglrenderer 内存不足）。我该如何解决？请帮助我，我在这个问题上花了很多小时。谢谢

# node.js - 在测试环境中运行 mocha 测试？

> ID：12236890
> 
> 赞同：23
> 
> 时间：2012-09-02T14:49:55.780
> 
> 标签：node.js, mocha.js

我似乎无法告诉 mocha 在测试环境中运行我的测试套件。

**应用程序.js**

```
app.configure('test', function(){
  app.set('port', 3002);
}); 
```

**测试/some-test.coffee**

```
app = require('../../app')

process.env.NODE_ENV = 'test'

describe 'some test', ->
  it 'should pass', -> 
```

由于我需要应用程序，因此当我运行我希望看到的测试时

`Express server listening on port 3002`

相反，我看到

`Express server listening on port 3000`

在 app.js 的开发配置块中设置不同的端口号会产生

`Express server listening on port [whatever port I set in development block in app.js]`

我无法让我的测试在测试环境中运行。有什么建议么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-02T17:37:46.037

1.  您需要在需要之前定义 NODE_ENV `app.js`：

    ```
    process.env.NODE_ENV = 'test'

    app = require('../../app')

    describe 'some test', ->
      it 'should pass', -> 
    ```

2.  您不能通过 更改侦听端口`app.set`。只有一种方法可以设置端口 - 将其传递给`listen`方法。你可以这样做：

    ```
    var express = require('express');
    var app = express();

    app.get('/', function(req, res){
      res.send('hello world');
    });

    var port = 3000;

    app.configure('test', function(){
      port = 3002;
    });

    app.listen(port); 
    ```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-05-29T17:36:41.983

我会采取与 Vadim 不同的方法。使用 Vadim 的示例，您可以改为根据您的`process.env.NODE_ENV`值加载环境设置。我知道我的方法还有另一个步骤，但它更简洁、可扩展，并且可以防止在您的逻辑中添加测试条件。

这种方法使用[dotenv](https://www.npmjs.org/package/dotenv)，然后在应用程序的根目录中定义一个`default`和一个环境文件。`test`这些文件将允许您在不更改 JavaScript 的情况下重新配置应用程序中的属性。

1.  `dependency`在您的文件中添加 dotenv 作为 a`package.json`然后将新软件包安装到您的`node_modules`文件夹中：

    **包.json**

    ```
    {
      ...
      "dependencies": {
        ...
        "dotenv": "0.2.8"
      }
    } 
    ```

    **命令行**

    ```
    $ npm install 
    ```

2.  更改您`app.js`的端口，以便端口使用从加载的 .env 文件中设置的环境值。

    ```
    // Load .env files from root based on the NODE_ENV value
    require('dotenv').load();

    var express = require('express');
    var app = express();

    app.get('/', function(req, res){
      res.send('hello world');
    });

    var port = process.env.port || 3000;
    -----------^

    app.listen(port); 
    ```

3.  在您的文件夹根目录中创建两个文件`.env`& `.env.test`，只需在下面添加一行。这些文件在每一行都有简单的键值对，当前缀为`process.env.`.

    **.env**

    ```
    port=3000 
    ```

    **.env.test**

    ```
    port=3002 
    ```

4.  从命令行或当您调用测试时，我会设置`NODE_ENV`：

    ```
    $ NODE_ENV=test mocha <TEST_FOLDER>/*.js
      ---------^ 
    ```

当您在所有其他情况下运行应用程序而不进行设置`NODE_ENV`时，默认`.env`文件中的值将被加载到`process.env`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-18T16:33:44.667

`npm install --save-dev cross-env`

### 添加`cross-env NODE_ENV=test`package.json 的脚本块

`package.json`

```
 "scripts": {
    "test-unit": "cross-env NODE_ENV=test mocha src/**/*.unittest.js --colors",
  }, 
```

# ios - 如何使用编辑样式将操作分配给 rightbarbuttonitem？

> ID：12236892
> 
> 赞同：0
> 
> 时间：2012-09-02T14:50:08.290
> 
> 标签：ios, xcode, uinavigationcontroller, uibarbuttonitem, uibarbuttonitemstyle

我在导航栏中的视图中有一个编辑 rightbarbuttonitem。我在故事板/IB 的帮助下设置它，而不是通过编程方式。现在，我想要的只是在按下“完成”barbuttonitem（而不是编辑）时分配一个动作。

有没有办法实现它？我手动尝试过`-(IBAction)`，但它不起作用。另外，我想对 UITableView 中的选定项目执行操作。所以如果你给我一个想法，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:49:51.900

该按钮调用该方法

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated 
```

您可以实现它，每次点击您的编辑/完成按钮时都会调用它。您所要做的就是检查按钮的标题属性以查看它何时显示完成以及何时显示编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:59:37.150

如果您将按钮声明为 IBOutlet，那么您需要做的就是使用 .m 上的合成变量，如下所示：

```
_yourBarButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(runMethod)];
self.navigationItem.rightBarButtonItem = _yourBarButton; 
```

然后你必须声明你的运行方法：

```
-(void)runMethod
{
    //do stuff
} 
```

# bash - 是否可以使用 passwd 自动化 ssh 登录（不是无密码 ssh）

> ID：12236894
> 
> 赞同：4
> 
> 时间：2012-09-02T14:50:16.607
> 
> 标签：bash, ssh, passwords

无论安全问题如何，我都想通过将密码放入脚本文件（以明文形式）来自动化 ssh 登录。例如，我尝试了以下，但没有成功......

> 回声“我的密码”| ssh -X root@remote_node_address

它仍然提示输入密码...

编辑：我知道设置无密码 ssh（实际上已经这样做了）。我真正的问题是如何自动化设置无密码 ssh 的过程......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T16:27:14.900

## 使用 Expect 自动化

您可以使用[Expect](http://expect.sourceforge.net/)来通过 SSH 驱动密码验证。例如：

```
#!/usr/bin/expect -f
set timeout -1
spawn ssh -o PubkeyAuthentication=no host.example.com
expect -exact "Password: "
send -- "secret\r"
expect {\$\s*} { interact } 
```

该脚本是一个非常基本的示例，在遇到故障或在非标准远程*TERM*（如 GNU 屏幕）下运行时并不是特别健壮，但它适用于常见情况。您还可以使用**expect-dev包中的***/usr/bin/autoexpect*根据手动会话生成您自己的自定义脚本。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:22:05.110

您将需要使用公钥身份验证，请参阅

[http://www.ece.uci.edu/~chou/ssh-key.html](http://www.ece.uci.edu/~chou/ssh-key.html)

为了为现有主机添加新密钥，您需要自动更新远程机器上 ~/.ssh/authorized_keys 中的公钥

这很容易做到

```
ssh-keygen -t rsa -b 1024 -f ~/.ssh/new-key -P ""
cat ~/.ssh/new-key.pub | ssh root@target-host 'cat >> ~/.ssh/authorized_keys' 
```

然后您可以使用新密钥访问主机

```
ssh -i ~/.ssh/new-key root@remote-host 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T15:09:16.847

我最近遇到[空。](http://empty.sourceforge.net/)我很惊讶它似乎并不为人所知，因为当出现“如何自动化 ssh”之类的问题时很少有人谈论它。

我在 openwrt 上使用它，它有一个大小约为 7KB 的包，没有依赖关系，而 tcl 包约为 440KB。你可以直接在shell中使用它。

“empty 是一个实用程序，它提供了一个接口来在伪终端会话 (PTY) 下执行和/或与进程交互。这个工具在设计用于与 telnet、ssh、ftp 等交互式程序通信的 shell 脚本编程中绝对有用. 在某些情况下，空可以是 TCL/expect 或其他类似编程工具的最简单替代"

例如：

```
#!/bin/sh

empty -f -i in -o out telnet foo.bar.com
empty -w -i out -o in "ogin:" "luser\n"
empty -w -i out -o in "assword:" "TopSecret\n"
empty -s -o in "who am i\n"
empty -s -o in "exit\n" 
```**

# php - php文本分析

> ID：12236896
> 
> 赞同：1
> 
> 时间：2012-09-02T14:50:26.237
> 
> 标签：php, text, artificial-intelligence, analyzer

我需要设计一个页面。用户将上传一些word doc并输入几个问题，并提供该问题的多个答案。这个问题与他刚刚上传的文档有关。现在我必须分析该文档并从他提供的选项（答案）中选择最佳答案。

我正在研究并发现了这一点。[http://nlp.lsi.upc.edu/freeling/index.php?option=com_content&task=view&id=12&Itemid=41](http://nlp.lsi.upc.edu/freeling/index.php?option=com_content&task=view&id=12&Itemid=41)

任何人都可以参考一些库或最好的方法来完成这项工作。我知道这并不简单，但欢迎任何帮助。

# java - ATM如何在并发环境中工作

> ID：12236897
> 
> 赞同：4
> 
> 时间：2012-09-02T14:50:36.203
> 
> 标签：java, multithreading, concurrency

一个简单的例子：

```
 class Account{
           private String account_name;
           private String password;
           private double balance;

           public synchronized double getBalance(){
                  return balance;
           }
           public synchronized void setBalance(double add){
                  balance += add;
           }
      } 
```

据我了解，获取与对象关联的锁不会阻止其他线程访问该对象。它们必须是相同的锁才能防止访问。

因此，如果两个人尝试在不同的 ATM 上访问同一个帐户，那么它将创建该`Account`对象的两个不同实例，对吗？那么它不是用同一个锁看守的，对吧？

假设人 A（线程 A）试图将钱存入帐户，而同时人 B（线程 B）试图获得帐户的总余额。

它是如何工作的 ？他们是否缓存了正在使用的时间，以便在下一个请求进来时`Account`返回相同的对象？`Account`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T14:57:45.600

同步方法将锁定对象实例。但是，如果有一种方法，则可能会发生不同步的并发访问。

ATM 机不会访问您的帐户 - 银行服务器会。ATM机只是一个客户端。因此，从 2 个不同的 ATM 访问同一个帐户将受到银行服务器的保护，该服务器的内存/数据库中只有一个该帐户的实例（可能受到某种锁定机制的保护，而不是用 Java 编写的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:24:35.330

> 据我了解，获取与对象关联的锁不会阻止其他线程访问该对象。它们必须是相同的锁才能防止访问。

正确的。如果多个线程试图获取一个简单的锁，那么只有 on 将被允许继续。不过，锁不一定需要与单个对象关联。您也可以为其他任务创建[锁。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/package-summary.html)

> 因此，如果两个人尝试在不同的 ATM 上访问同一个帐户，那么它将创建此 Account 对象的两个不同实例，对吗？那么它不是用同一个锁看守的，对吧？假设人 A（线程 A）试图将钱存入帐户，而同时人 B（线程 B）试图获得帐户的总余额。它是如何工作的 ？他们是否在使用时缓存帐户，以便在下一个请求进入时返回相同的帐户对象？

有点，你描述的是一个分布式锁定场景，这是完全不同的。正如有人已经提到的，ATM 会将交易发回银行处理，那里的服务器将处理并发问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:02:21.223

我最好的猜测是他们正在使用像缓存这样的对象池，当请求到来时，它会通过使用一些唯一标识符（如帐号）来搜索池中存在的特定对象（帐户）。如果存在引用将被返回。否则，它将从持久数据源加载到池中，并将创建并返回新的引用。因此，即使是两个用户（线程）也尝试同时访问它。服务器不会为每个实例创建两个实例。

其次，如果一个类中有多个同步方法，并且如果一个线程当前正在同步方法中执行，则所有其他尝试访问同一对象的任何同步方法的线程都将被阻止（暂停执行），直到第一个线程存在同步方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T14:55:24.180

这取决于系统的实施方式。通常你有一个类的实例，每个实例都有一个与之关联的隐式锁，或者你可以创建一个简单的

> 私有对象锁；

然后每个人（无论是 ATM 还是银行员工或其他人）都必须明确获得这个锁。归根结底，它归结为系统是如何设计和实现的——锁定原语就是这样——原语。由设计者/实现者来使用并在每个组件中适当地使用它们 - 一致的锁定。此外，在这种情况下，我会选择原子替身并省去获取潜在重对象锁的麻烦。

# cassandra - Apache Cassandra 远程访问

> ID：12236898
> 
> 赞同：26
> 
> 时间：2012-09-02T14:50:46.420
> 
> 标签：cassandra, remote-access

我已经在远程 Ubuntu 服务器上安装了 Apache Cassandra。如何允许远程访问 Apache Cassandra 数据库？以及如何建立联系？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-02T22:52:28.843

对 Cassandra 的远程访问是通过其节俭端口（尽管请注意 JMX 端口可用于执行一些有限的操作）。

thrift 端口`cassandra.yaml`由`rpc_port`参数定义，默认为 9160。您的 cassandra 节点应该绑定到服务器网卡的 IP 地址 - 它不应该`127.0.0.1`或者`localhost`是环回接口的 IP，绑定到此将阻止直接远程访问。`rpc_address`您使用cassandra.yaml 中的参数配置绑定地址。将此设置为`0.0.0.0`“侦听所有网络接口”，这可能适合您，也可能不适合您。

要建立连接，您可以使用：

*   cassandra 发行版的 bin 目录中的 cassandra-cli 提供了简单的 get/set/list 操作，并且依赖于 Java
*   提供对 cassandra 的 CQL 访问的 cqlsh shell，这取决于 Python
*   更高级别的接口，例如[Apollo](http://www.codefreun.de/en/apollo-en)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-16T08:14:53.657

对于现在发现这个问题的任何人来说，最佳答案已经过时了。

Apache Cassandra 的节俭接口已弃用，将在 Cassandra 4.0 中删除。默认客户端端口现在是 9042。

正如 Tyler Hobbs 所说，您需要确保[rpc_address](http://cassandra.apache.org/doc/latest/configuration/cassandra_config_file.html#rpc-address "rpc地址")参数未设置为 127.0.0.1 或 localhost（默认为 localhost）。如果将其设置`0.0.0.0`为侦听所有接口，则还需要将[broadcast_rpc_address](http://cassandra.apache.org/doc/latest/configuration/cassandra_config_file.html#broadcast-rpc-address)设置为节点的公共或私有 IP 地址（取决于您计划如何连接到 Cassandra）

Cassandra-cli 也被弃用，Apollo 不再活跃。使用[cqlsh](http://cassandra.apache.org/doc/latest/tools/cqlsh.html)代替 cassandra-cli 并使用[Java 驱动程序](https://github.com/datastax/java-driver)代替 Apollo。

我不建议让 JMX 端口可以远程访问，除非您通过启用 SSL 和强身份验证[来正确保护它。](http://cassandra.apache.org/doc/latest/operating/security.html#jmx-access)

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-29T12:44:30.970

> 卡桑德拉 3.11.3

我做了以下工作来让我的工作。cassandra.yaml 的变化：

```
start_rpc: true

rpc_address: 0.0.0.0

broadcast_rpc_address: ***.***.***.*** 
```

broadcast_rpc_address 是安装 cassandra 的机器的地址

```
 seed_provider:
  - class_name: ...
    - seeds: "127.0.0.1, ***.***.***.***" 
```

在种子中，我添加/附加了运行 cassandra 的机器的 IP 地址。

我使用[tableplus](https://tableplus.io/)从 Windows 访问它。在tableplus中，我写了cassandra机器的ip地址，在我写的端口部分`9042`，使用了我用于ssh连接的用户名和密码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-01T18:53:06.407

对于使用 Azure 的任何人，问题可能是您需要创建一个公共 IP 地址，因为虚拟 IP 指向云服务本身而不是虚拟机。[你可以在这篇文章](https://stackoverflow.com/questions/29976998/how-to-connect-to-cassandra-remotely-using-devcenter/29993081#29993081)中找到更多信息

# android - 如何检查异步任务是否已在运行

> ID：12236899
> 
> 赞同：34
> 
> 时间：2012-09-02T14:50:55.343
> 
> 标签：android, android-asynctask

我有一个应用程序需要在启动时进行密集的数据库操作。该应用程序保存手机上联系人的本地副本，并在启动时与 android 联系人数据库同步。

如果用户启动应用程序，则会启动一个在后台执行数据库同步的异步任务。如果用户关闭应用程序，操作会继续运行，这很好。但是，如果用户再次打开应用程序，则会启动异步任务并产生错误。

无论如何检查任务是否已经从应用程序的不同实例运行？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-02T14:55:39.363

用于[`getStatus()`](http://developer.android.com/reference/android/os/AsyncTask.html#getStatus%28%29)获取您的`AsyncTask`. 如果状态为，[`AsyncTask.Status.RUNNING`](http://developer.android.com/reference/android/os/AsyncTask.Status.html)则您的任务正在运行。

**编辑：**您应该重新考虑您的实施并将`AsyncTask`可能的保留在`Service`或`IntentService`从网络上获取您的数据。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-07-10T07:22:04.577

是的，伙计们，这些是一些例子。

```
LoadMusicInBackground lmib = new LoadMusicInBackground();

if(lmib.getStatus() == AsyncTask.Status.PENDING){
    // My AsyncTask has not started yet
}

if(lmib.getStatus() == AsyncTask.Status.RUNNING){
    // My AsyncTask is currently doing work in doInBackground()
}

if(lmib.getStatus() == AsyncTask.Status.FINISHED){
    // My AsyncTask is done and onPostExecute was called
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-05T13:24:31.653

我已经设法用某种单例模式处理了这个问题。希望能帮助到你。

```
// fill the places database from a JSON object
public class myAsyncTask extends AsyncTask<Void,Integer,Integer> {

    Activity mContext = null;
    static AsyncTask<Void,Integer,Integer> myAsyncTaskInstance = null; 

    // Private Constructor: can't be called from outside this class
    private myAsyncTask(Activity iContext) {
        mContext = iContext; 
    }

    public static AsyncTask<Void, Integer, Integer> getInstance(Activity iContext) {
        // if the current async task is already running, return null: no new async task 
        // shall be created if an instance is already running
        if (myAsyncTaskInstance != null && myAsyncTaskInstance.getStatus() == Status.RUNNING) {
            // it can be running but cancelled, in that case, return a new instance
            if (myAsyncTaskInstance.isCancelled()) {
                myAsyncTaskInstance = new myAsyncTask(iContext);
            } else {
                // display a toast to say "try later"
                Toast.makeText(iContext, "A task is already running, try later", Toast.LENGTH_SHORT).show();    

                return null;
            }
        }

        //if the current async task is pending, it can be executed return this instance
        if (myAsyncTaskInstance != null && myAsyncTaskInstance.getStatus() == Status.PENDING) {
            return myAsyncTaskInstance;
        }

        //if the current async task is finished, it can't be executed another time, so return a new instance
        if (myAsyncTaskInstance != null && myAsyncTaskInstance.getStatus() == Status.FINISHED) {
            myAsyncTaskInstance = new myAsyncTask(iContext);
        }

        // if the current async task is null, create a new instance
        if (myAsyncTaskInstance == null) {
            myAsyncTaskInstance = new myAsyncTask(iContext);
        }
        // return the current instance
        return myAsyncTaskInstance;
    }

    @Override
    protected Integer doInBackground(Void... iUnUsed) {
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-02T14:58:36.957

我认为您应该检查`Application`in的概念`Android`。 [http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

事实上，没有这样的事情

> 应用程序的不同实例

. 对你所有的`Application`人来说总是一样的`Activities/Services.` 这意味着你已经离开`Activity`并再次打开它，2种情况是可能的：

1.  系统已经杀死了您的应用程序。在这种情况下`AsyncTask`已经死了，可以安全地开始一个新的
2.  `Application`还活着，所以可能`AsyncTask`还在运行。

在第二种情况下，我建议使用一些静态变量，指向这个`AsyncTask`或它的状态。如果您的应用在第二次打开时仍然存在 - 所有静态引用仍然有效，因此您可以成功操作。

PS：顺便说一下，在当前方法中，请注意您的应用程序可以随时被系统终止。所以`AsyncTask`可以随时被打断。它不适合您 - 请检查`IntentServices`- 组件，专为后台操作目的而设计。[http://developer.android.com/reference/android/app/IntentService.html](http://developer.android.com/reference/android/app/IntentService.html)

祝你好运！

# c++ - 多线程服务器在一个线程中处理多个客户端

> ID：12236903
> 
> 赞同：0
> 
> 时间：2012-09-02T14:51:46.713
> 
> 标签：c++, linux, sockets, c++11

我想使用 C++11 和标准 linux C-Librarys 创建一个多线程套接字服务器。

最简单的方法是为每个传入连接打开一个新线程，但必须有其他方法，因为 Apache 没有这样做。据我所知，Apache 在一个线程中处理多个连接。如何实现这样的系统？

我想创建一个线程，始终监听新客户端并将这个新客户端分配给一个线程。但是，如果所有线程当前都在执行“select()”，具有无限超时并且已经分配的客户端都没有做任何事情，那么客户端可能需要一段时间才能使用。

所以“select()”需要超时。将超时设置为 0.5 毫秒会很好，但我想工作量可能会增加太多，不是吗？

谁能告诉我如何实现这样一个系统，为每个线程处理多个客户端？PS：希望我的英语足够好让你明白我的意思；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:02:01.023

将多个请求多路复用到单个线程的标准方法是使用反应器模式。一个中心对象（通常称为 SelectServer、SocketServer 或 IOService）监视所有正在运行的套接字的请求，并在套接字准备好继续读取或写入时发出回调。

正如其他人所说，滚动自己可能是一个坏主意。处理超时、错误和跨平台兼容性（例如 linux 的 epoll、bsd 的 kqueue、windows 的 iocp）是很棘手的。对生产系统使用 boost::asio 或 libevent。

这是一个骨架 SelectServer （编译但未经测试）给你一个想法：

```
#include <sys/select.h>

#include <functional>
#include <map>

class SelectServer {
 public:
  enum ReadyType {
    READABLE = 0,
    WRITABLE = 1
  };

  void CallWhenReady(ReadyType type, int fd, std::function<void()> closure) {
    SocketHolder holder;
    holder.fd = fd;
    holder.type = type;
    holder.closure = closure;
    socket_map_[fd] = holder;
  }

  void Run() {
    fd_set read_fds;
    fd_set write_fds;
    while (1) {
      if (socket_map_.empty()) break;

      int max_fd = -1;
      FD_ZERO(&read_fds);
      FD_ZERO(&write_fds);
      for (const auto& pr : socket_map_) {
        if (pr.second.type == READABLE) {
          FD_SET(pr.second.fd, &read_fds);
        } else {
          FD_SET(pr.second.fd, &write_fds);
        }
        if (pr.second.fd > max_fd) max_fd = pr.second.fd;
      }

      int ret_val = select(max_fd + 1, &read_fds, &write_fds, 0, 0);
      if (ret_val <= 0) {
        // TODO: Handle error.
        break;
      } else {
        for (auto it = socket_map_.begin(); it != socket_map_.end(); ) {
          if (FD_ISSET(it->first, &read_fds) ||
              FD_ISSET(it->first, &write_fds)) {
            it->second.closure();
            socket_map_.erase(it++);
          } else {
            ++it;
          }
        }
      }
    }
  }

 private:
  struct SocketHolder {
    int fd;
    ReadyType type;
    std::function<void()> closure;
  };

  std::map<int, SocketHolder> socket_map_;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:25:01.117

首先，看看 using`poll()`而不是`select()`: 当您从不同线程使用大量文件描述符时，它会更好地工作。

为了让当前在 I/O 中等待的线程不再等待，我知道两种方法：

1.  您可以使用 向线程发送合适的信号`pthread_kill()`。调用`poll()`失败并`errno`设置为`EINTR`。
2.  一些系统允许从线程控制设备获取文件描述符。`poll()`当线程控制设备发出信号时，输入对应的文件描述符成功。参见，例如，[我们可以获取信号量或条件变量的文件描述符吗？](https://stackoverflow.com/questions/4335667/can-we-obtain-a-file-descriptor-for-a-semaphore-or-condition-variable).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:59:54.243

这不是一项微不足道的任务。

为了实现这一点，您需要维护所有打开的套接字（服务器套接字和当前客户端的套接字）的列表。然后使用*select()*函数，您可以向其提供套接字列表（文件描述符）。使用正确的参数，select() 将等待直到其中一个套接字发生任何事件。

然后，您必须找到导致 select() 退出并处理事件的套接字。对于服务器套接字，它可以是一个新的客户端。对于客户端套接字，可以是请求、终止通知等。

关于您在问题中所说的话，我认为您不太了解*select()* API。可以在不同线程中同时调用*select()*，只要它们不在同一个套接字上等待。然后，如果客户端没有做任何事情，它不会阻止服务器 select() 工作并接受新客户端。

如果您希望即使客户端没有做任何事情也能做一些事情，您只需要给 select() 一个超时时间。例如，您可能有一个定时器来定期向客户端发送信息。然后，您给 select 一个对应于您的第一个计时器到期的超时，并在 select() 返回时处理到期的计时器（以及任何其他并发事件）。

我建议您仔细阅读*select*手册页。

# jquery - jScrollPane div 在 Firefox 上向右移动

> ID：12236904
> 
> 赞同：0
> 
> 时间：2012-09-02T14:51:55.603
> 
> 标签：jquery, firefox, jscrollpane

我正在对一个网站进行最后的调整，突然我意识到在 Firefox 上 jScrollPane 中的内容完全向右移动了。在 Safari、Chrome 和 IE9 上都可以。我试图扭转我所做的一切，但似乎没有任何影响。

这是网址：[http ://bdbcreative.com/index3.htm#web-design.htm](http://bdbcreative.com/index3.htm#web-design.htm)

我完全被困住了，非常感谢您的任何想法。

最佳 - 乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:50:58.900

看来我想通了。我需要将应用于 .panes 类的溢出：隐藏 CSS 声明更改为溢出：继承。我认为这是必要的，因为我在选项卡中构建窗格的方式 - 在标准配置中可能不需要它。

为了真正让它工作，我设置了一个这样的 CSS 规则： .panes { overflow: inherit !important; }

"!important" 是覆盖 JavaScript 内联样式所必需的。

希望这对其他人有帮助。

最佳 - 乔

# angularjs - 如何扩展或覆盖angularjs中的现有过滤器？

> ID：12236905
> 
> 赞同：35
> 
> 时间：2012-09-02T14:52:13.080
> 
> 标签：angularjs

是否可以扩展现有的“标准”过滤器（`date`,`number`等`lowercase`）？在我的情况下，我需要从 YYYYMMDDhhmmss 格式解析日期，所以我想扩展（或覆盖）`date`过滤器而不是自己编写。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-09-21T05:17:43.137

我更喜欢实现[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)，这在 AngularJS 中非常容易。
如果我们以@pkozlowski.opensource 为例，我们可以将其更改为：

```
 myApp.config(['$provide', function($provide) {
  $provide.decorator('dateFilter', ['$delegate', function($delegate) {
    var srcFilter = $delegate;

    var extendsFilter = function() {
      var res = srcFilter.apply(this, arguments);
      return arguments[2] ? res + arguments[2] : res;
    }

    return extendsFilter;
  }])
}]) 
```

然后在您的视图中，您可以同时使用.. 标准输出和扩展行为。
使用相同的过滤器

```
<p>Standard output : {{ now | date:'yyyyMMddhhmmss' }}</p>
<p>External behavior : {{ now | date:'yyyyMMddhhmmss': ' My suffix' }}</p> 
```

这是一个说明这两种技术的工作小提琴：http: [//jsfiddle.net/ar8m/9dg0hLho/](http://jsfiddle.net/ar8m/9dg0hLho/)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-09-02T15:31:55.510

我不确定我是否正确理解了您的问题，但如果您想扩展现有过滤器的功能，您可以创建一个新过滤器来装饰现有过滤器。例子：

```
myApp.filter('customDate', function($filter) {
    var standardDateFilterFn = $filter('date');
    return function(dateToFormat) {
     return 'prefix ' + standardDateFilterFn(dateToFormat, 'yyyyMMddhhmmss');
    };
}); 
```

然后，在您的模板中：

```
{{now | customDate}} 
```

如上所述，如果您只是想根据给定格式格式化日期，可以使用现有的日期过滤器来完成：

```
{{now | date:'yyyyMMddhhmmss'}} 
```

这是说明这两种技术的工作 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/zVdJd/2/](http://jsfiddle.net/pkozlowski_opensource/zVdJd/2/)

请注意，如果未指定格式，AngularJS 将假定这是“中等”格式（确切的格式取决于语言环境）。检查[http://docs.angularjs.org/api/ng.filter:date](http://docs.angularjs.org/api/ng.filter:date)了解更多信息。

最后一句话：我对你问题的“解析”部分有点困惑。问题是过滤器用于将对象（在这种情况下为日期）解析为字符串，而不是反之。如果您要解析代表日期的字符串（来自输入），则必须查看 NgModelController#$parsers （检查[http://docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)中的“自定义验证”部分）。

# java - 在Java中加入四个二维数组

> ID：12236906
> 
> 赞同：3
> 
> 时间：2012-09-02T14:52:29.623
> 
> 标签：java, arrays, strassen

我正在尝试在 Java 中实现 Strassen 算法，我正处于需要将输出组合成单个矩阵/二维数组的步骤。我`System.arraycopy`用来复制数组，这适用于以自上而下的方式连接两个数组，但是，我还需要并排连接它们，我遇到了麻烦。我遇到了`ArrayOutOfBoundsException`。这是我的代码

```
static int[][] Consolidate(int[][] c11, int[][] c12, int[][] c21, int[][] c22) {
    /* check size compatibility */
    if(c11[0].length == c21[0].length && 
            c11.length == c12.length &&
            c21.length == c22.length &&
            c22[0].length == c12[0].length) {
        int _rowSize = c11.length + c21.length;
        int _colSize = c11[0].length + c12[0].length;
        int[][] retArray = new int[_rowSize][_colSize];

        int[][] ltArray = new int[_rowSize][c11[0].length];
        int[][] rtArray = new int[_rowSize][c12[0].length];

        System.arraycopy(c11, 0, ltArray, 0, c11.length);
        System.arraycopy(c21, 0, ltArray, c11.length, c21.length);
        System.arraycopy(c12, 0, rtArray, 0, c12.length);
        System.arraycopy(c22, 0, rtArray, c12.length, c22.length);

        System.arraycopy(ltArray, 0, retArray, 0, ltArray.length);
        System.arraycopy(rtArray, 0, retArray, ltArray.length, rtArray.length);
        return retArray;
    }
    return null;
} 
```

最后一行

```
System.arraycopy(rtArray, 0, retArray, ltArray.length, rtArray.length); 
```

抛出异常。有没有办法并排连接数组（以列方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:33:43.073

我想没有办法逐列连接，就像你可以在 octave 或 matlab 中那样。

这背后的原因是java支持**一维**数组。并且矩阵是一维数组，其中每个元素也是一个数组（不一定是相同的大小！）。

因此，在循环中逐个元素复制的最直接解决方案。

```
private static int[][] consolidate(int[][] a, int[][] b, int[][] c, int[][] d) {
        int n = a.length * 2;
        int[][] result = new int[n][n];
        copy(result, a, 0, 0);
        copy(result, b, 0, n / 2);
        copy(result, c, n / 2, 0);
        copy(result, d, n / 2, n / 2);
        return result;
    }

    private static void copy(int[][] result, int[][] a, int m, int n) {
        for (int i = 0; i < a.length; i++) {
            for (int j = 0; j < a.length; j++) {
                result[m + i][n + j] = a[i][j];
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:57:04.713

**编辑这是经过验证的答案**

您可以手动复制最后一部分。

代替

```
System.arraycopy(ltArray, 0, retArray, 0, ltArray.length);
System.arraycopy(rtArray, 0, retArray, ltArray.length, rtArray.length); 
```

和

```
//Commented both calls
//System.arraycopy(ltArray, 0, retArray, 0, ltArray.length);
//System.arraycopy(rtArray, 0, retArray, ltArray.length, rtArray.length);
for (int row = 0; row < ltArray.length; row++) {
    int colInTarget = 0;
    for (int col = 0; col < ltArray[row].length; col++,colInTarget++) {
        retArray[row][colInTarget] = ltArray[row][col];
    }
    for (int col = 0; col < rtArray[row].length; col++,colInTarget++) {
        retArray[row][colInTarget] = rtArray[row][col];
    }
} 
```

# python - 什么可以使 connection.send() 阻塞？（来自 conn1, conn2 = multiprocessing.Pipe() ）

> ID：12236907
> 
> 赞同：8
> 
> 时间：2012-09-02T14:52:43.670
> 
> 标签：python, multiprocessing, pipe

我正在调试从 2 个传感器收集信息的应用程序：一个网络摄像头和一个麦克风。

一般架构非常简单：

*   主进程通过管道将消息（start、stop、get_data）发送到子进程（每个进程一个）。
*   子进程收集数据并将其发送到主进程

子进程和主进程处于无限循环来处理命令（来自用户的主进程，来自主进程的子进程）。

它在全球范围内有效，但我无法停止子进程。

我已经记录了代码，它似乎发生了两件事：

1.  “停止”消息已发送，但未通过管道。
2.  子进程继续发送数据和 conn.send(data) 块。

该行为显然与连接状态相关，因为不发送任何内容的子进程没有此行为。不过，我看不出如何调试/修改当前架构，这似乎是合理的。

那么，是什么导致了这种阻​​塞行为以及如何避免呢？

这是在子进程中为无限循环的每次迭代执行的代码：

```
 def do(self):
        while self.cnx.poll():
            msg = self.cnx.recv()
            self.queue.append(msg)
        #==
        if not self.queue:
            func_name = 'default_action'
            self.queue.append([func_name, ])
        #==
        msg             = self.queue.pop()
        func_name, args = msg[0], msg[1:]
        #==
        res = self.target.__getattribute__(func_name)(*args)
        #==
        running = func_name != 'stop'
        #==
        if res and self.send:
            assert running
            self.output_queue.append(res[0])
        if self.output_queue and running:
            self.cnx.send(self.output_queue.popleft())
        #==
        return running 
```

**更新**：似乎管道不能同时在两端写入。如果将上述代码的最后几行更改为：

```
 if self.output_queue and running:
            if not self.cnx.poll(): 
                self.cnx.send(self.output_queue.popleft()) 
```

尽管默认情况下 Pipe 被记录为全双工并且此行为根本没有记录，但问题仍然存在。我一定是误会了什么。请赐教我！

**更新 2**：为了清楚起见，在这种情况下没有关闭连接。描述事件的顺序：

*   主进程发送消息（“停止”）（它在发送消息之前清空连接）
*   主进程进入一个（无限）循环，当子进程终止时该循环停止。
*   同时，子进程在发送中被阻塞，永远不会收到消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T01:20:33.897

全双工`multiprocessing.Pipe`实现为`socketpair()`. `.send`与套接字交谈时，调用可能会因所有正常原因而阻塞。根据您的描述，我认为您的阅读器很可能`Pipe`已退出阅读，并且数据已在内核的缓冲区中累积到您的`.send`阻塞点。

如果您明确`.close`接收方`SIGPIPE`，当您尝试`.send`. 如果您的接收连接超出范围，这可能会自动发生。您可以通过更加小心不要将引用（直接或间接）存储到接收端来解决问题，以便在该线程消失时释放它。

阻塞的简单演示`.send`：

```
import multiprocessing

a, b = multiprocessing.Pipe()

while True:
    print "send!"
    a.send("hello world") 
```

现在请注意，一段时间后它会退出打印“发送！”

# objective-c - 从 MailCore 的 Microsoft Exchange Imap 帐户发送电子邮件

> ID：12236908
> 
> 赞同：2
> 
> 时间：2012-09-02T14:52:56.550
> 
> 标签：objective-c, imap, exchange-server, mailcore

好的，所以我正在构建一个从您的电子邮件帐户获取和发送电子邮件的应用程序，但我遇到了障碍，该应用程序最不适合 POP3 帐户和 IMAP 帐户，但如果使用来自 Microsoft Exchange 服务器的交换 IMAP 帐户然后它会让你登录并抓取未读的电子邮件，但不发送任何内容，这是我用来发送电子邮件的

```
[CTSMTPConnection sendMessage:outMessage server:[dictData   valueForKey:@"SMTPServerName"] username:[dictData valueForKey:@"userEmailAddress"] password:[dictData valueForKey:@"password"] port:[[dictData objectForKey:@"SMTPPort"]intValue] useTLS:NO useAuth:YES]; 
```

是的，显然“用户名”并不总是电子邮件地址。我已经尝试了“useTLS”和“useAuth”部分的所有不同类型的设置组合（YES/NO、NO/YES、YES/YES、NO/NO）。我不断从 mailcore 收到一条错误消息，说“用户名或密码无效”。--- 这仅在我尝试从该帐户发送电子邮件时发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T15:03:54.190

使用基于 NSSockets 的单独 SMTP 类更好（也更稳定），它与 MailCore SMTP 客户端的工作相同。基于 NSSocket 的类在锁定服务器连接错误时将更具可读性。

我们在邮件项目中仅将 MailCore 用作 IMAP 部分。

# java - 包与类型冲突

> ID：12236909
> 
> 赞同：0
> 
> 时间：2012-09-02T14:52:57.830
> 
> 标签：java

> **可能重复：**
> [eclipse 3.4（ganymede）包与类型冲突](https://stackoverflow.com/questions/2674325/eclipse-3-4-ganymede-package-collision-with-type)

我是 Java 新手，但我尝试为游戏 Lineage2 编写脚本。

继承人的代码：

```
package ZergZ.ZTeleport;
import javolution.util.FastMap;
import com.l2jserver.Config;
import com.l2jserver.gameserver.handler.IVoicedCommandHandler;
import com.l2jserver.gameserver.model.actor.instance.L2PcInstance;
import com.l2jserver.gameserver.network.serverpackets.NpcHtmlMessage;
import com.l2jserver.gameserver.model.Location;
import com.l2jserver.gameserver.handler.VoicedCommandHandler;

public class ZTeleport implements IVoicedCommandHandler
{
    private static final String[] VOICED_COMMANDS =
    {
        "teleport"
    };
    @Override
    public boolean useVoicedCommand(String command, L2PcInstance activeChar, String params)
    {
        if (activeChar == null)
            return false;

        if (params.equalsIgnoreCase("aden"))
        {
            activeChar.teleToLocation(147736,-56243,-2781);
        }
        if (params.equalsIgnoreCase("gracia"))
        {
            activeChar.teleToLocation(-186742,244167,2675);
        }
        if (params.equalsIgnoreCase("pvp1"))
        {
            activeChar.teleToLocation(147736,-56243,-2781);
        }
        if (params.equalsIgnoreCase("pvp2"))
        {
            activeChar.teleToLocation(179337,221937,4475);
        }

    }
    @Override
    public String[] getVoicedCommandList()
    {
        return VOICED_COMMANDS;
    }

} 
```

当服务器启动 java 时说： 1\. \ZTeleport.java 中的错误（第 17 行）
包 ZergZ.ZTeleport；
               ^^^^^^^^^^^^^^^^^^^^ 包ZergZ.ZTeleport
与类型碰撞

该脚本位于 ZergZ/ZTeleport.java

我会给你另一个运行良好的脚本：

```
package custom.HeroCirclet;

import com.l2jserver.gameserver.model.actor.L2Npc;
import com.l2jserver.gameserver.model.actor.instance.L2PcInstance;
import com.l2jserver.gameserver.model.quest.Quest;
import com.l2jserver.gameserver.model.quest.QuestState;

public class HeroCirclet extends Quest
{
______
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:00:06.723

这是因为你有一个名为`ZTeleport`ZergZ 包的类和一个名为`ZergZ.ZTeleport`.

该`package`名称基本上是 Java 文件所在的项目目录。

这意味着如果`ZTeleport.java`在`ZergZ`目录中，那么包名是

```
package ZergZ; 
```

您没有在包声明中指定类名，并且目录用一个`.`而不是目录文件夹标记分隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:33:51.593

你说“脚本位于 ZergZ/ZTeleport.java”。这意味着该类`ZTeleport`属于包`ZergZ`。但是您已将其声明为属于不同的包，`ZergZ.ZTeleport`.

在您的第二个示例中，我敢打赌源文件位于 custom/HeroCirclet/HeroCirclet.java 中，它与其包声明相匹配，并且不会产生命名冲突。

您要么需要将源文件（人们通常不将 java 源文件称为“脚本”，顺便说一句）移动到与其声明的包匹配的目录中，要么更改包声明以匹配其位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:01:21.950

这里的冲突是在你的包名和你的类名之间，它们是相同的。如果您坚持通常的命名约定（以小写开头命名您的包和以大写开头命名您的类），您应该避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T15:03:16.487

您应该遵循 Java 命名约定。将您的包裹更改为：

```
package zergZ.zTeleport; // all name is begin with lower

// no change, but for clearer : all class name should begin with higher character  
public class ZTeleport implements IVoicedCommandHandler 
{
} 
```

在那之后，当然，您应该刷新或/并重建您的项目以查看它的工作原理。

希望这有帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T15:40:11.743

如果您看到它说的错误...

```
package ZergZ.ZTeleport;
           ^^^^^^^^^^^^^^^^^^^^
The package ZergZ.ZTeleport collides with a type 
```

所以基本上你已经在命名类和包的方式之间产生了冲突。如果您坚持 Java 约定，您可以将它们命名为：

```
// Notice the first character of package name is small character
package zergZ.zTeleport;

//  Class Name's first character is capital.
public class ZTeleport implements IVoicedCommandHandler{ 
    .. 
} 
```

# objective-c - 我不明白 Cocos2D+Box2D 示例上的 -(CGAffineTransform) nodeToParentTransform

> ID：12236912
> 
> 赞同：0
> 
> 时间：2012-09-02T14:53:30.437
> 
> 标签：objective-c, ios, cocos2d-iphone, geometry, box2d

我写这个问题是因为我不理解 Cocos2D for iPhone 提供的示例中的一段代码：

```
-(CGAffineTransform) nodeToParentTransform
{   
b2Vec2 pos  = body_->GetPosition();

float x = pos.x * PTM_RATIO;
float y = pos.y * PTM_RATIO;

if ( ignoreAnchorPointForPosition_ ) {
    x += anchorPointInPoints_.x;
    y += anchorPointInPoints_.y;
}

// Make matrix
float radians = body_->GetAngle();
float c = cosf(radians);
float s = sinf(radians);

if( ! CGPointEqualToPoint(anchorPointInPoints_, CGPointZero) ){
    x += c*-anchorPointInPoints_.x + -s*-anchorPointInPoints_.y;
    y += s*-anchorPointInPoints_.x + c*-anchorPointInPoints_.y;
}

// Rot, Translate Matrix
transform_ = CGAffineTransformMake( c,  s,
                                   -s,  c,
                                   x,   y );    

return transform_;
} 
```

它在 PhysicsSprite.mm 文件中。

也许是因为*我*的空间几何学很差，但如果有人能解释我，我非常感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:45:42.303

```
if( ! CGPointEqualToPoint(anchorPointInPoints_, CGPointZero) ){
    x += c*-anchorPointInPoints_.x + -s*-anchorPointInPoints_.y;
    y += s*-anchorPointInPoints_.x + c*-anchorPointInPoints_.y;
} 
```

上面的代码只是简单地将 xy 坐标轴逆时针旋转 $180-\theta$ 度，并将新坐标添加到从上述行之前的代码中获得的先前 x,y 坐标。

[http://en.wikipedia.org/wiki/Rotation_of_axes](http://en.wikipedia.org/wiki/Rotation_of_axes)提供了轴的旋转公式

# c - 文件描述符、文件指针和文件位置指示符之间的关系

> ID：12236913
> 
> 赞同：1
> 
> 时间：2012-09-02T14:53:56.213
> 
> 标签：c

我试图了解从文件中读取一些字节后文件位置指示器如何移动。我有一个名为“filename.dat”的文件，只有一行：“abcdefghijklmnopqrstuvwxyz”（不带引号）。

```
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main () {

    int fd = open("filename.dat", O_RDONLY);
    FILE* fp = fdopen(fd,"r");
    printf("ftell(fp): %ld, errno = %d\n", ftell(fp), errno);

    fseek(fp, 5, SEEK_SET); // advance 5 bytes from beginning of file
    printf("file position indicator: %ld, errno = %d\n", ftell(fp), errno);

    char buffer[100];
    int result = read(fd, buffer, 4); // read 4 bytes 
    printf("result = %d, buffer = %s, errno = %d\n", result, buffer, errno);
    printf("file position indicator: %ld, errno = %d\n", ftell(fp), errno);

    fseek(fp, 3, SEEK_CUR); // advance 3 bytes 
    printf("file position indicator: %ld, errno = %d\n", ftell(fp), errno);
    result = read(fd, buffer, 6);  // read 6 bytes 
    printf("result = %d, buffer = %s, errno = %d\n", result, buffer, errno);

    printf("file position indicator: %ld\n", ftell(fp));

    close(fd);
    return 0;
}

ftell(fp): 0, errno = 0
file position indicator: 5, errno = 0
result = 4, buffer = fghi, errno = 0
file position indicator: 5, errno = 0
file position indicator: 8, errno = 0
result = 0, buffer = fghi, errno = 0
file position indicator: 8 
```

我不明白为什么我第二次尝试使用`read`，我从文件中没有得到任何字节。另外，为什么当我使用从文件中读取内容时文件位置指示器不移动`read`？在第二个`fseek`，推进 4 个字节而不是 3 个也不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:25:43.730

使用`fseek`and`fread` **或** `lseek`and `read`，但不要混合使用这两个 API，它不会起作用。

A`FILE*`有自己的内部缓冲区。`fseek`可能只移动也可能不移动内部缓冲区指针。不能保证真正的文件位置指示器（`lseek`负责的）会发生变化，如果发生变化，也不知道变化了多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:28:55.197

首先要注意的是 read 调用将字符读入原始缓冲区，但 printf() 期望为 %s 参数传递以空字符结尾的字符串。您没有显式添加空终止符字节，因此您的程序可能会在缓冲区的前 4 个字节之后打印垃圾，但是您很幸运，并且您的编译器已将缓冲区初始化为零，因此您没有注意到这个问题。

该程序的基本问题是您将高级缓冲 FILE * 调用与低级文件描述符调用混合在一起，这将导致不可预知的行为。FILE 结构包含一个缓冲区和几个整数，以支持更有效和方便地访问文件描述符后面的文件。

基本上所有 f*() 调用（fopen()、fread()、fseek()、fwrite()）都期望所有 I/O 都将通过使用 FILE 结构的 f*() 调用来完成，因此缓冲区和FILE 结构中的索引值将是有效的。低级调用（read()、write()、open()、close()、seek()）完全忽略 FILE 结构。

我在你的程序上运行了 strace。strace 实用程序记录进程进行的所有系统调用。在你的 open() 调用之前，我已经省略了所有无趣的东西。

这是您的公开电话：

```
open("filename.dat", O_RDONLY)          = 3 
```

这是 fdopen() 发生的地方。brk 调用是内存分配的证据，大概是 malloc(sizeof(FILE)) 之类的。

```
fcntl64(3, F_GETFL)                     = 0 (flags O_RDONLY)
brk(0)                                  = 0x83ea000
brk(0x840b000)                          = 0x840b000
fstat64(3, {st_mode=S_IFREG|0644, st_size=26, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7728000 
```

这可能是 ftell() 的效果，或者只是 fdopen 的最后一部分，我不确定。

```
_llseek(3, 0, [0], SEEK_CUR)            = 0 
```

这是第一个 printf。

```
write(1, "ftell(fp): 0, errno = 0\n", 24) = 24 
```

这是第一个 fseek，它决定了到达文件中位置 5 的最简单方法是只读取 5 个字节并忽略它们。

```
_llseek(3, 0, [0], SEEK_SET)            = 0
read(3, "abcde", 5)                     = 5 
```

这是第三个 printf。请注意，没有 ftell() 调用的证据。ftell() 使用 FILE 结构中的信息，声称是准确的，因此不需要系统调用。

```
write(1, "file position indicator: 5, errn"..., 38) = 38 
```

这是您的 read() 调用。现在，操作系统文件句柄位于第 9 位，但 FILE 结构认为它仍位于第 5 位。

```
read(3, "fghi", 4)                      = 4 
```

第三个和第四个 printf 带有 ftell 指示位置 5。

```
write(1, "result = 4, buffer = fghi, errno"..., 37) = 37
write(1, "file position indicator: 5, errn"..., 38) = 38 
```

这是 fseek(fp, 3, SEEK_CUR) 调用。fseek() 决定将 SEEK_SET 返回到文件的开头，并将整个内容读入 FILE 结构的 4k 缓冲区。因为它“知道”它在位置 5，它“知道”它现在必须在位置 8。由于文件只有 26 字节长，因此 os 文件位置现在位于 eof。

```
_llseek(3, 0, [0], SEEK_SET)            = 0
read(3, "abcdefghijklmnopqrstuvwxyz", 4096) = 26 
```

第五个 printf。

```
write(1, "file position indicator: 8, errn"..., 38) = 38 
```

这是您的第二次 read() 调用。由于文件句柄位于 eof，因此它读取 0 个字节。它不会改变缓冲区中的任何内容。

```
read(3, "", 6)                          = 0 
```

第六个和第七个 printf 调用。

```
write(1, "result = 0, buffer = fghi, errno"..., 37) = 37
write(1, "file position indicator: 8\n", 27) = 27 
```

您的 close() 调用，然后进程退出。

```
close(3)                                = 0
exit_group(0)                           = ? 
```

# xcode - 如何将文件复制到xcode项目而不是根文件夹

> ID：12236915
> 
> 赞同：1
> 
> 时间：2012-09-02T14:54:11.223
> 
> 标签：xcode, project-management

在 xcode 中将文件拖到项目资源管理器中时，系统会询问您是否要在需要时将文件复制到项目中。如果您选中该框，则文件将复制到项目的根文件夹中。

有什么方法可以探索要将文件复制到的位置，我的意思是，是否可以将文件复制到根文件夹的子文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:01:23.110

将文件拖入您通常会将它们复制到项目资源文件夹中。

如果您希望能够从您的应用程序访问它们，最好将文件添加到主包或文档文件夹。

# c++ - 将队列处理为包含文件的文件夹。可能的问题？

> ID：12236916
> 
> 赞同：0
> 
> 时间：2012-09-02T14:54:20.767
> 
> 标签：c++, task-queue

我有一个可执行文件，需要在命令到达时处理数据库中的记录。现在，我正在通过 TCP 交换发出命令，但我不太喜欢它，因为 a) 会话之间的队列不持久 b) TCP 端口可能被锁定

我的想法是创建一个文件夹并在其中放置名称与我要发出的命令匹配的文件

像：

```
1.23045.-1.1
2.999.-1.1 
```

然后，在处理完命令后，该文件将被删除或移动到 Errors 文件夹。

这是可行的还是这种方法存在一些不可避免的问题？

PS 该进程将在Linux系统上使用，因此防病毒问题是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:59:07.083

是的，有几个。

首先，存在与使用文件系统相关的所有问题。防病毒程序就是其中之一（尽管我不明白为什么它不适用于 Linux - 没有删除锁？）。磁盘空间、文件和目录计数最大值是其他的。然后，打开文件限制和权限...

第二，比赛条件。如果有多个消费者，他们中的多个可能会在第一个消费者移除命令之前看到并开始处理该命令。

还有将命令转换为文件名的问题，反之亦然，并且为需要多次发出的单个命令提供不同的名称。（虽然这些是编程问题，而不是设计问题；它们只会让人烦恼。）

这些都可能不适用于您或您非常关心，在这种情况下，我说：去做吧。看看我们错过了现实生活会想出的东西。

不过，对于任何接近“严重”的事情，我可能会使用[MQ服务器。](http://en.wikipedia.org/wiki/Message_queue)

# bash - 推荐的命令行参数语法是什么？

> ID：12236919
> 
> 赞同：0
> 
> 时间：2012-09-02T14:54:32.987
> 
> 标签：bash, syntax, command-line-arguments

我正在编写一个可执行脚本（perl），它从命令行获取参数。这是一些不同的语法，我能想到：

1.  `myPerlScript 10 42`
2.  `myPerlScript myarg1=10 myarg2=42`
3.  `myPerlScript -myarg1=10 -myarg2=42`
4.  `myPerlScript myarg1 10 myarg2 42`
5.  `myPerlScript -myarg1 10 -myarg2 42`

我不喜欢选项 1。因为不可能以任意顺序给出参数，或者跳过依赖默认值的参数。我还想给出 2（或 3，...）维参数。这里再举一些例子：

1.  `myPerlScript myarg 10x20`
2.  `myPerlScript myarg=10x20`
3.  `myPerlScript -myarg 10x20`
4.  `myPerlScript -myarg=10x20`
5.  `myPerlScript -myarg=10 20`
6.  `myPerlScript -myarg=10,20`

*推荐的*语法是什么？或者你会推荐什么？它是否取决于情况和/或脚本的用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:58:59.643

我对 perl 了解不多，但在 ruby​​ 世界（以及我可以观察到的其他 unix）中，这似乎是最被接受的习语：

```
myPerlScript --myarg1 10 --myarg2 42 
```

单破折号和双破折号是有区别的。一些命令有两种形式：长（完整的命令名称）和短（单个字母，为简洁起见）。双破折号用于长格式，单破折号用于短格式。现实生活中的例子：

```
mysql --user root
mysql -u root 
```

我会说使用长格式的单破折号会让人们感到惊讶。不要那样做:)

我也可以推荐这本优秀的书：[Building awesome command-line applications in Ruby](http://pragprog.com/book/dccar/build-awesome-command-line-applications-in-ruby)。尽管它对您的价值较小，因为它是在 ruby​​ 中，而不是在 perl 中。

# google-app-engine - 如何手动设置任务第二次在 gae 队列中运行

> ID：12236922
> 
> 赞同：0
> 
> 时间：2012-09-02T14:55:04.523
> 
> 标签：google-app-engine, queue, task

我有一个在 GAE 队列中运行的任务。根据我的逻辑，我想确定任务是否会再次运行。

我不希望它通常由队列执行然后再次将其放入队列中，因为我希望能够检查“X-AppEngine-TaskRetryCount”并在多次尝试后退出尝试。

据我了解，似乎唯一会重新执行任务的情况是发生内部 GAE 错误（或者如果我的代码在“DeadlineExceededException”情况下花费太长时间......（而且我不想持有代码“人质”这么长:)）

如何以 GAE 设置 X-AppEngine-TaskRetryCount ++ 的方式将任务重新输入队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T19:55:02.200

您可以在 python 中使用 self.error() 以编程方式重试/重新启动任务。来自文档：App 引擎通过返回 200–299 范围之外的任何 HTTP 状态代码来重试任务

在任务开始时，您可以使用以下命令测试重试次数：

```
retries = int(self.request.headers['X-Appengine-Taskretrycount'])
if retries < 10 :
    self.error(409)
    return 
```

# python - 用于条件（|）匹配的python正则表达式

> ID：12236924
> 
> 赞同：0
> 
> 时间：2012-09-02T14:55:13.937
> 
> 标签：python, regex

寻找 python 正则表达式模式。似乎它必须存在，但它让我难住了。

如果我需要查找地址，并且我正在搜索的字符串可以是以下形式

```
address_is_after_123
 - or -
123_address_is_before 
```

请注意，可能有两个以上的排列，但我希望两个排列的解决方案可以扩展到更多。

我可以简单地创建多个正则表达式，但理想情况下我想要一个正则表达式。我得到的最好的是：

```
m = re.match("(?:address_is_after_(\d+)|(\d+)_address_is_before)",text) 
```

这可行，但我必须测试 m.group(1) 或 m.group(2) 是否具有该值。有没有办法编写正则表达式，以便如果匹配，我可以在不进行额外处理的情况下获取地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:07:54.277

您可以使用环视来做到这一点，前提是环视 ( `"address_is_after_"`) 的长度是恒定的：

```
>>> m = re.search(r"(?<=address_is_after_)\d+|\d+(?=_address_is_before)",text)
>>> m.group(0)
'123' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:07:25.503

您无需测试哪个组匹配。一个不匹配的组返回`None`，它被视为假`or`：

```
>>> for text in ["address_is_after_123", "123_address_is_before"]:
...             m = re.match("(?:address_is_after_(\d+)|(\d+)_address_is_before)",text)
...             print(m.group(1) or m.group(2))
...
123
123 
```

# iphone - 使用 ARC 在 C 数组中释放 Objective C 对象

> ID：12236927
> 
> 赞同：2
> 
> 时间：2012-09-02T14:55:33.033
> 
> 标签：iphone, ios5, xcode4.2, automatic-ref-counting

我不知道如何释放存储在老式 c 数组中的 Objective-C 对象。

（备注：在经过大量搜索后写这篇文章时，我想我在测试代码中发现了一个错误，所以这似乎是一个解决方案而不是一个问题。好吧，我花了很多时间在上面，所以我会发布无论如何...）

我想将旧代码转换为 ARC，因为我在调试与内存管理相关的错误上花费了太多时间（对不起——保留/释放规则根本没有固定在我的脊椎中，而且我真的需要几个小时找到丢失的保留，因为错误在不相关的时刻弹出，可能在内存清理期间或之后）。

所以我有一些带有 c 样式数组的现有代码（比如一个二维数组`UILabel*`），我可以很高兴地`calloc()`通过指针访问它们`array[col*colstride+row*rowstride]`，其中`array`类型为`UILabel **`; 假设`UILabel*`s 是按随机顺序填充的，所以我不能使用 an `NSMutableArray`。

现在在 ARC 中，编译器希望我将类型`array`设为 be `UILabel *__strong*`，看来（有些人将其写为`__strong UILabel **`）。

我不明白的是，我如何告诉 ARC 在需要释放`UILabel`对象时释放对象（比如在`dealloc()`使用 c 数组的对象中）。在试图理解这个问题时，我有一小部分对象，`Memory`并且`MemoryUnit`，前者试图存储后者的一个大型 c 数组。

```
-(Memory*)init {
  self = [super init];
  if (self) {
    MemoryUnit * unit = [[MemoryUnit alloc] init];
    array = (__strong id *) calloc(sizeof(MemoryUnit*), 1024);
    array[0] = unit;
  }
  return self;
}

-(void)dealloc {
  for (int i=0; i<1024; i++) array[i]=nil;
  free(array);
} 
```

在`MemoryUnit`我们有要存储在 c 数组中的对象（所以这`MemoryUnit`是在`UILabel`上面提到的地方）。为了测试我有代码

```
-(void)dealloc {
  NSLog(@"removed %x", (int)self);
} 
```

在它`dealloc()`的调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:23:36.907

*正如 Bryan 所说，我们需要堆栈溢出系统中的答案。所以我这样做：*

**解决方案**

显然，将 type 的数组元素设置`MemoryUnit *__strong`为`nil`会导致对象被释放，就好像这个元素已经在 a `@propetty`and `@synthesize`pair 语句中声明了一样。这实际上是在我认为[ARC 下指向 Objective-C 对象的 C 样式指针数组中提出的](https://stackoverflow.com/questions/11155275/c-style-array-of-pointers-to-objective-c-objects-under-arc)

（我发现 XCode 中的文档非常简洁，ARC 编译器定义只告诉我什么是不允许的，而不是提示如何正确地做事。）

# python-3.x - 如何使用 Python 和 PyQt4 启动默认应用程序

> ID：12236930
> 
> 赞同：5
> 
> 时间：2012-09-02T14:55:41.743
> 
> 标签：python-3.x, pyqt4

我正在使用 Python 3 和 PyQt4（以及 Kubuntu 12.04）。

我经常使用 QtCore.Qprocess.startDetached(QString program, QStringList arguments) 来启动一个程序来处理参数中指定的文件。

我想要一种相应的方式来开始处理指定的文件而不指定使用哪个程序。相反，我想启动可用的默认程序，例如 OpenOffice 或 LibreOffice 或任何其他指定为 .odt 文档文件的默认文字处理器的程序。

或者，有没有办法询问系统默认使用哪个程序？

/ingemar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:38:35.660

```
桌面服务。**openUrl** ( QUrl ( *'file:///home/test/test_document.odt'* ))
```

或者，您可以使用系统命令`xdg-open`(Linux) 和`start`(Windows)。

# c# - 键盘挂钩和更改用户输入

> ID：12236934
> 
> 赞同：0
> 
> 时间：2012-09-02T14:56:09.803
> 
> 标签：c#, c++, winapi, keyboard, hook

我想编写一个拦截用户输入并对其进行更改的软件。在 Windows 98 后期和正式不支持我们的语言之前，因此程序员决定发明一种基于 ASCII 字符 (ArmSCII) 和字体的书写方法，以便我们可以用我们的语言进行书写。该软件只是将英文输入更改为 ArmSCII 中的相关字符。该程序现在已经过时了。我想写一个新的。它应该是系统范围的。有什么建议可以连接到键盘并更改输入吗？C ， C++ 或 C# 没关系。我对他们都很好..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:19:48.170

这是一个键盘钩子，它拦截用户输入并将其更改为 `printf("ha ha, I intercepted your [%c] and changed it to [%c]\n", key, key+1);`

Win32 控制台 C/C++ 代码：

```
#define _WIN32_WINNT 0x0400
#pragma comment( lib, "user32.lib" )

#include <windows.h>
#include <stdio.h>

HHOOK hKeyboardHook;

__declspec(dllexport) LRESULT CALLBACK KeyboardEvent (int nCode, WPARAM wParam, LPARAM lParam)
{
    DWORD SHIFT_key=0;
    DWORD CTRL_key=0;
    DWORD ALT_key=0;

    if  ((nCode == HC_ACTION) &&   ((wParam == WM_SYSKEYDOWN) ||  (wParam == WM_KEYDOWN)))      
    {
        KBDLLHOOKSTRUCT hooked_key =    *((KBDLLHOOKSTRUCT*)lParam);
        DWORD dwMsg = 1;
        dwMsg += hooked_key.scanCode << 16;
        dwMsg += hooked_key.flags << 24;
        char lpszKeyName[1024] = {0};
        //lpszKeyName[0] = '[';

        int i = GetKeyNameText(dwMsg,   (lpszKeyName+1),0xFF) + 1;
        //lpszKeyName[i] = ']';

        int key = hooked_key.vkCode;

        SHIFT_key = GetAsyncKeyState(VK_SHIFT);
        CTRL_key = GetAsyncKeyState(VK_CONTROL);
        ALT_key = GetAsyncKeyState(VK_MENU);

        if (key >= 'A' && key <= 'Z')   
        {

            if  (GetAsyncKeyState(VK_SHIFT)>= 0) key +=32;

            if (CTRL_key !=0 && key == 'y' )
            {
               MessageBox(NULL, "CTRL-y was pressed\nLaunch your app here", "H O T K E Y", MB_OK); 
               CTRL_key=0;
            }

            if (CTRL_key !=0 && key == 'q' )
            {
                MessageBox(NULL, "Shutting down", "H O T K E Y", MB_OK); 
               PostQuitMessage(0);
            }

            //printf("key = %c\n", key);
            printf("ha ha, I intercepted your [%c] and changed it to [%c]\n", key, key+1);

            SHIFT_key = 0;
            CTRL_key = 0;
            ALT_key = 0;

        }

        //printf("lpszKeyName = %s\n",  lpszKeyName );
    //  printf("%s",  lpszKeyName );
    }
    return CallNextHookEx(hKeyboardHook,    nCode,wParam,lParam);
}

void MessageLoop()
{
    MSG message;
    while (GetMessage(&message,NULL,0,0)) 
    {
        TranslateMessage( &message );
        DispatchMessage( &message );
    }
}

DWORD WINAPI my_HotKey(LPVOID lpParm)
{
    HINSTANCE hInstance = GetModuleHandle(NULL);
    if (!hInstance) hInstance = LoadLibrary((LPCSTR) lpParm); 
    if (!hInstance) return 1;

    hKeyboardHook = SetWindowsHookEx (  WH_KEYBOARD_LL, (HOOKPROC) KeyboardEvent,   hInstance,  NULL    );
    MessageLoop();
    UnhookWindowsHookEx(hKeyboardHook);
    return 0;
}

int main(int argc, char** argv)
{
    HANDLE hThread;
    DWORD dwThread;

    hThread = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE)   my_HotKey, (LPVOID) argv[0], NULL, &dwThread);

    //ShowWindow(FindWindowA("ConsoleWindowClass", NULL), false);

    if (hThread) return WaitForSingleObject(hThread,INFINITE);
    else return 1;

} 
```

# c# - 将 Page.User.Identity.Name 与 sql 表中的值进行比较

> ID：12236941
> 
> 赞同：0
> 
> 时间：2012-09-02T14:56:22.157
> 
> 标签：c#, .net, sql, authentication

首先，如果答案在那里，我很抱歉。我看了又看，觉得这是一件很简单的事情，应该很明显。

我想确保只有添加事件的人才能修改它。简单的！

我已经有一个以 event_added_by 作为数据点的数据源。它正在填充一个 FormView。

```
 SelectCommand="SELECT * FROM [tbl_events] WHERE ([event_ID] = @event_ID)" 
```

我有 Page.User.Identity.Name。

我如何比较两者？我无法从 FormView 的标签中提取值，所以我需要找到另一种方法。

```
 if (!IsPostBack)
    {
        string uname = Page.User.Identity.Name;
        string owner = ""// this is where I need to grab the value from dsEvents;

        if (uname != owner)
        {
            //Send them somewhere saying they're not allowed to be here
        }

    } 
```

TIA 寻求帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:36:05.740

也许我误解了您已经在表格中存储了创建事件的人的名称，`tbl_events`并且您选择所有句子也带回了该信息，那么为什么不比较呢？直接从您的选择命令特定列返回的值与您的用户名？

# asp.net - 无法在 Application_Error 中捕获 403 错误

> ID：12236942
> 
> 赞同：2
> 
> 时间：2012-09-02T14:56:37.833
> 
> 标签：asp.net, iis

我在 IIS 7.5 中托管了 asp.net mvc 4 站点。我在 Application_Error 处理程序中手动处理所有 http 错误。一切都很好，除了 403 错误（例如导航到 时`http://mysite/App_Data`）。问题是 Application_Error 没有捕捉到这个错误。有人能告诉我如何让它工作吗？

编辑

我发现 Application_Error 只捕获托管模块中抛出的异常。由于 403 错误（在我的情况下是 403.14）是由非托管的 DirectoryListingModule 引发的，因此 Application_Error 无法捕获此错误。此外，它可能是由 RequestFilteringModule（也是非托管的）处理的 404.7 或 404.8 错误。我发现自定义处理这些错误的唯一方法是使用以下设置：

```
 <httpErrors errorMode="Custom" existingResponse="Replace">
      <error path="/Error/Forbidden" statusCode="403" subStatusCode="14" responseMode="ExecuteURL"/>
      <error path="/Error/NotFound" statusCode="404" subStatusCode="7" responseMode="ExecuteURL"/>
      <error path="/Error/NotFound" statusCode="404" subStatusCode="8" responseMode="ExecuteURL"/>
  </httpErrors> 
```

具有带有 NotFound 操作的 ErrorController。但是这种方法对我来说有一个缺点 - 导致错误的原始请求数据丢失（因为执行了子服务器端重定向）并且我无法获得它（至少我不知道如何） . 所以，现在我想改变我的问题：这是处理此类错误的唯一方法吗？使用 httpErrors 方法时有没有办法获取原始请求数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:15:27.330

在web.config 中设置`runAllManagedModulesForAllRequests`为.`true``modules``system.webServer`

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    ...
</system.webServer> 
```

# php - 在单个函数中使用插入和更新

> ID：12236943
> 
> 赞同：4
> 
> 时间：2012-09-02T14:56:57.220
> 
> 标签：php, mysql

我想知道是否有人能够阐明我如何克服这个问题。

我正在尝试在数据库中添加和更新信息，因此当用户第一次输入完成问卷时，它可以正常工作，但是当他们返回更新问卷**时，它会引发错误**，“请返回并重试” .

到目前为止，我已经根据给我的建议更新了 PHP 代码。

谢谢你。

PHP代码：

```
function updatePartCTQ_part1($questionAns, $memberid) {

//First Insert MemberID
$ctqmemberinsert = "INSERT INTO ctq_questionnaire (user_id) VALUES ('$memberid')";
$addresult = mysqli_query($ctqmemberinsert);

if ($addresult) {

    $update = "UPDATE ctq_questionnaire SET Item1= '{$questionAns[0]}', Item2 = '{$questionAns[1]}' WHERE user_id = '$memberid'";

    mysqli_query($conn, $update);

} else {
    echo 'Please go back and try again';
}
} 
```

任何帮助将不胜感激。

**完成的代码**

多亏了迈克尔和其他人，我才能让代码正常工作，所以我想我会发布一个更新，如果其他人遇到困难，他们可以看一眼代码的工作版本：

```
function updatePartCTQ_part1($questionAns, $memberid) {

//Check whether user exists
$exists = mysql_query("SELECT * FROM ct1_questionnaire WHERE user_id = '$memberid'");

if (mysql_num_rows($exists) === 0) {
    // Doesn't exist. INSERT User into Table

    $ctqmemberinsert = "INSERT INTO ctq_questionnaire (user_id) VALUES ('$memberid')";
    mysqli_query($ctqmemberinsert);
} 
    // UDPATE after INSERT

    $update = "UPDATE ctq_questionnaire SET Item1= '{$questionAns[0]}', Item2 = '{$questionAns[1]}, Item3 = '{$questionAns[2]}',  
    Item4 = '{$questionAns[3]}',Item5 = '{$questionAns[4]}', Item6 = '{$questionAns[5]}', Item7 = '{$questionAns[6]}', 
    Item8 = '{$questionAns[7]}', Item9 = '{$questionAns[8]}', Item10 = '{$questionAns[9]}', Item11 = '{$questionAns[10]}', 
    Item12 = '{$questionAns[11]}', Item13 = '{$questionAns[12]}', Item14 = '{$questionAns[13]}', Item15 = '{$questionAns[14]}'
    WHERE user_id = '$memberid'";

    mysql_query($update);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:03:52.967

你的`UPDATE`语法不正确。您不得重复`SET`关键字：

```
$update = "UPDATE ctq_questionnaire SET Item1= '{$questionAns[0]}', Item2 = '{$questionAns[1]}' WHERE user_id = '$memberid'";
//-------------------------------------------------------------^^^^^^^ no SET here 
```

为了可读性，建议将数组值括在 中`{}`，尽管您的方式应该可行。

请注意，`try/catch`由于`mysql_query()`不会引发异常，因此您的用处不大。相反，它只会`FALSE`在错误时返回。相反，将其存储在一个变量中并`TRUE/FALSE`像使用`INSERT`.

```
// We assume these values have already been validated and escaped with mysql_real_escape_string()...
$update = "UPDATE ctq_questionnaire SET Item1= '{$questionAns[0]}', Item2 = '{$questionAns[1]}' WHERE user_id = '$memberid'";
$upd_result = mysql_query($update);
if ($upd_result) {
  // ok
}
else {
  // error.
} 
```

最后，我怀疑您之前已经听说过，旧`mysql_*()`功能计划弃用。考虑迁移到支持预处理语句的 API，如 MySQLi 或 PDO。

### 更新

假设您在后续调用中有唯一索引或 PK `ctq_questionnaire.user_id`，则第一个查询将出错，而您的第二个查询将不会运行。最简单的解决方法是使用`INSERT IGNORE`，它将密钥违规视为成功。

```
$ctqmemberinsert = "INSERT IGNORE INTO ctq_questionnaire (user_id) VALUES ('$memberid')"; 
```

一个更复杂的解决方案是首先用 测试用户名是否存在于表中`SELECT`，如果不存在，则执行`INSERT`.

```
$exists_q = mysql_query("SELECT 1 FROM ct1_questionnaire WHERE user_id = '$memberid'");
if (mysql_num_rows($exists_q) === 0) {
  // Doesn't exist. Do the INSERT query
}
// proceed to the UDPATE after INSERTing if necessary 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:06:25.387

只需将您的插入更改为：

```
$ctqmemberinsert = "INSERT INTO `ctq_questionnaire` (`user_id`, `Item1`, `Item2`)
    VALUES ( '$memberid', '" . 
        mysql_real_escape_string($questionAns[0]) . "', '" . 
        mysql_real_escape_string($questionAns[1]) . "' )"; 
```

# android - Scala 隐式动态转换

> ID：12236944
> 
> 赞同：4
> 
> 时间：2012-09-02T14:56:57.820
> 
> 标签：android, scala

我想为 Android 创建一个 scala Views 助手

使用 trait 和 class 的这种组合

```
class ScalaView(view: View) {
  def onClick(action: View => Any) =
    view.setOnClickListener(new OnClickListener {
      def onClick(view: View) {
        action(view)
      }
    })
}

trait ScalaViewTrait {
  implicit def view2ScalaView(view: View) =
    new ScalaView(view)
} 
```

我可以这样写 onClick()

```
class MainActivity extends Activity with ScalaViewTrait {
//....
val textView = new TextView(this)
textView.onClick(v => v.asInstanceOf[TextView] setText ("asdas"))
} 
```

我担心的是我想避免投射`v`到`TextView`

`v`将始终是`TextView`if 应用于 a `TextView` `LinearLayout`if 应用于`LinearLayout`等等。

有什么方法`v`可以动态转换到应用的任何视图？

刚开始使用 Scala，我需要你的帮助。

**更新**

解决了请看下面我的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T18:32:45.303

这里的问题是，鉴于 Android API，您根本不可能拥有完整的类型安全性*以及*定义仅适用于`View`.

您的方法牺牲了类型安全，而 drexin 牺牲了（一些）便利性。像你一样，我愿意在这种情况下放弃类型安全，因为期待 Android 库的良好行为是合理的，但我会以不同的方式封装不愉快的内容。

首先，我会为`OnClickListener`这样定义一个包装器：

```
case class MyOnClickListener[V <: View](action: V => Any)
  extends OnClickListener {
  def onClick(view: View) = try action(view.asInstanceOf[V]) catch {
    case e: ClassCastException =>
      throw new RuntimeException("This should never happen!", e)
  }
} 
```

然后忘记它的`OnClickListener`存在（或者至少不要在我的代码中的其他任何地方使用它）。现在所有非类型安全的东西都捆绑在一个地方，我的`ScalaView`班级很干净，例如：

```
class ScalaView[T <: View](view: T) {
  def onClick(action: T => Any) =
    view.setOnClickListener(MyOnClickListener(action))
} 
```

您可能会遇到需要这种包装器的其他地方，并且这种方法允许您将所有丑陋的演员表等小心地包含在一个地方，而不是分散在整个代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:59:36.790

我设法做到了。这是如何

```
trait ScalaViewTrait {
  implicit def view2ScalaView[T <: View](view: T) =
    new ScalaView[T](view)
}

class ScalaView[T <: View](view: T) {
  def onClick(action: T => Any) =
    view.setOnClickListener(new OnClickListener {
      def onClick(view: View) {
        action(view.asInstanceOf[T])
      }
    })
} 
```

现在我可以像这样写 onClick

```
textView.onClick(v => v.setText("asdsa")) 
```

`v`实际上是一个`TextView`when`onClick`应用于 a`TextView`

PS。也许我会写一堆助手并将它们发布在 GitHub 上。<3 斯卡拉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:34:31.303

您可以代替对其进行简单的模式匹配而不是对其进行强制转换：

```
// ...
textView.onClick {
  case v: TextView => v.setText("foobar")
  case v => log.error("Expected TextView got %s.".format(v.getClass))
} 
```

# java - spring jdbctemplate 为 last_insert_id() 返回 0

> ID：12236948
> 
> 赞同：2
> 
> 时间：2012-09-02T14:57:23.887
> 
> 标签：java, spring

下面给出的代码总是为最后一个插入 id 返回零。你能解释一下这段代码有什么问题吗？

```
JdbcTemplate insert = new JdbcTemplate(dataSource);

        insert.update("INSERT INTO item (price, item_category) VALUES(?,?)",
            new Object[] { beverage.getPrice(), beverage.getItemCategory() });
        int id = insert.queryForInt( "SELECT last_insert_id()" );
        System.out.println(id);
        return insert.update("INSERT INTO beverage (id, name, quantity,size) VALUES(?,?,?,?)", new Object[] { id,beverage.getName(), beverage.getQuantity(),beverage.getSize() }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:02:26.677

上面的整个代码必须包装在一个事务中。否则`JdbcTemplate`，可以为所有语句使用来自池的不同连接并`last_insert_id()`绑定到事务。

使用`@Transactional`或将您的 JDBC 调用包装在[`TransactionTemplate`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html).

# qt - 在 Qt 中实时禁用小部件

> ID：12236960
> 
> 赞同：3
> 
> 时间：2012-09-02T14:58:39.567
> 
> 标签：qt, qt4

我有两个单选按钮。单击其中一个时，它应该禁用一些小部件并激活其他一些小部件。我该怎么做？

例如，如果我检查`radioButton1`，那么它应该立即禁用 lineEdit，如果我检查`radioButton2`它应该启用第一行编辑并禁用 lineEdit2。

所有这些都是实时的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T15:07:38.083

目前没有太多事情要做，一般的答案如下：

处理单选按钮的适当信号。使用此信号，您​​可以触发一个方法/循环，您可以在其中使用[`setEnabled(false)`](http://qt-project.org/doc/qt-4.8/qwidget.html#enabled-prop).

鉴于您的情况，您可能有类似于以下两种方法的方法，您可以根据收到的信号调用它们：

```
void OnRadioButton1()
{
    lineEdit->setEnabled(false);
    lineEdit2->setEnabled(true);
}

void OnRadioButton2()
{
    lineEdit->setEnabled(true);
    lineEdit2->setEnabled(false);
} 
```

这真的很简单。我不明白“实时”的整个概念在哪里发挥作用。这是对单个输入“事件”的单个响应。

当然，这也可以是具有特定（布尔）参数或其他任何东西的单个方法。但是鉴于我们在这里讨论的假设示例案例不一定反映您的真实代码，这至少应该为您提供一些想法。

# xcode - 无法在标签中显示对象的文本

> ID：12236973
> 
> 赞同：0
> 
> 时间：2012-09-02T15:00:42.150
> 
> 标签：xcode, object, text, label

我的目标是在标签中显示名为 Files 的自定义类的对象的文本。这是 Files.h ：

```
#import <Foundation/Foundation.h>

@interface Files : NSObject
    @property (nonatomic, retain) NSString *title;
    @property (nonatomic, retain) NSString *text;

@end 
```

这是 Files.m ：

```
#import "Files.h"

@implementation Files

@dynamic title;
@dynamic text;
@end 
```

这是我的应用程序的 .h 文件。标签称为 trackName：

```
#import <UIKit/UIKit.h>
#import "Files.h"

@interface FirstViewController : UIViewController

{
    Files *plainpalais;
}
@property (weak, nonatomic) IBOutlet UILabel *trackName;

-(Files*) chooseFile;

@end 
```

这是应用程序的 .m 文件：

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController
@synthesize trackName;

-(Files*)chooseFile
{
    return plainpalais;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    plainpalais.text=@"hello";
    plainpalais.title=@"plainpalais";
    trackName.text=plainpalais.title;

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setTrackName:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:        (UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

问题是标签 trackName 没有显示 plainpalais ......

感谢帮助 ！

PS：我是初学者，所以这可能是一个基本错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:33:30.080

您在实现中使用`@dynamic`了`Files.m`它告诉编译器您稍后将为这些属性提供getter/setter，即使用Objective-C 运行时。

我怀疑你想使用`@synthesize`而不是`@dynamic`. 例如，

```
#import "Files.h"

@implementation Files

@synthesize title;
@synthesize text;

@end 
```

此外，您实际上还没有在您提供给我们的代码中创建`Files`对象。该`chooseFile`方法似乎正在返回一个`nil`对象（假设您尚未在`plainpalais`其他地方初始化）。也许你应该`plainpalais`在一个`init`方法中初始化，例如

```
- (id)init {
    self = [super init];
    if (self) {
        plainpalias = [[Files alloc] init];
    }
    return self;
} 
```

不要忘记`release`这个对象`dealloc`（如果你不使用 ARC）。

# android - Facebook 通过 android 应用分享 - 更改“分享方式”的 url "

> ID：12236974
> 
> 赞同：1
> 
> 时间：2012-09-02T15:01:08.973
> 
> 标签：android, facebook, share

当有人从一个名为TestApp 的Android 应用程序中分享某些内容时，Facebook 帖子会写上“通过TestApp 共享”，并且它是可点击的。

是否可以将该链接更改为除现场 Facebook 应用程序之外的其他内容？例如将其更改为我在 Play 商店中的 android 应用程序的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:14:01.010

是的，这完全可以通过 Android Deep Linking - [https://developers.facebook.com/docs/mobile/android/deep_linking/](https://developers.facebook.com/docs/mobile/android/deep_linking/)

# matlab - 对 MATLAB 中向量的每个元素应用条件运算

> ID：12236976
> 
> 赞同：0
> 
> 时间：2012-09-02T15:01:24.503
> 
> 标签：matlab, rounding

我有一个这样的向量`V = [0.5,0.6,0.2,0.8...]`，我想将每个元素映射到最接近的整数 0 或 1。

这样做的功能或方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:02:52.397

`round()`正在这样做:) 很明显，我很傻！

# python - 找不到我的算法有什么问题

> ID：12236977
> 
> 赞同：0
> 
> 时间：2012-09-02T15:01:28.530
> 
> 标签：python, algorithm

我试图在 Codechef中解决[这个问题。](http://www.codechef.com/SEP12/problems/CROWD)现在根据问题，如果有 10 个房子，他可以选择连续的 3 个房子，或者 4，或 5，...或 10 个。现在`m`从房子中选择连续房子的方法`n`是`n-m+1`。所以我必须从 3 upto 开始`n-m+1`总结。也就是说，我将数字从,增加到 1。在 AP 中，值应该是（通过公式）。这就是这段代码的作用。但是我收到了错误的答案信息。我哪里错了？用于进行模幂运算，以便数字在任何阶段都不会超出范围。`m``n``n-2``n-1``((n-2)(n-1))/2``n(n+1)/2``pow`

```
testcase = int(raw_input())
m = 10**9 + 7
for i in xrange(0,testcase):
    n = int(raw_input())
    ans = ((pow(n,2,m)-3*n+2)/2)%m
    print ans 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:22:24.980

你也算，比如说，这个案子吗？

```
( * * * * * * * * * * )
  ^ ^ ^   ^ ^ ^ 
```

这只是一个我相信你跳过的例子。（如果我确实正确地遵循了您的算法）

这只是一个提示，尽管询问跑步比赛问题根本不合适。

# .net - foreach 循环内的 Selenium 导航

> ID：12236979
> 
> 赞同：0
> 
> 时间：2012-09-02T15:01:47.190
> 
> 标签：.net, selenium, foreach, webdriver

我遇到了导航问题。我从 html 表中获取行列表。我遍历这些行并从中刮取信息。但是在该行上还有一个链接，我单击该链接可以转到与要抓取的行相关的更多信息。然后我导航回带有原始表格的页面。这适用于第一行，但对于后续行，它会引发异常。

在第一次单击行内的链接后，我查看了我的行集合，但它们都没有像我单击链接之前那样的正确值。我相信当我导航到一个我没有得到的不同 URL 时会发生一些事情。

我的代码如下。我如何使它工作，以便我可以迭代父表，单击每行中的链接，导航到子表，但仍继续迭代父表中的行？

```
 private List<Document> getResults()
    {
        var documents = new List<Document>();

        //Results
        IWebElement docsTable = this.webDriver.FindElements(By.TagName("table"))
            .Where(table => table.Text.Contains("Document List"))
            .FirstOrDefault();

        var validDocRowRegex = new Regex(@"^(\d{3}\s+)");

        var docRows = docsTable.FindElements(By.TagName("tr"))
            .Where(row =>
                //It throws an exception with .FindElement() when there isn't one.
                row.FindElements(By.TagName("td")).FirstOrDefault() != null &&
                    //Yeah, I don't get this one either. I negate the match and so it works??
                !validDocRowRegex.IsMatch(
                    row.FindElement(By.TagName("td")).Text))
            .ToList();

        foreach (var docRow in docRows)
        {
            //Todo: find out why this is crashing on some documents.
            var cells = docRow.FindElements(By.TagName("td"));

            var document = new Document
            {
                DocID = Convert.ToInt32(cells.First().Text),
                PNum = Convert.ToInt32(cells[1].Text),
                AuthNum = Convert.ToInt32(cells[2].Text)
            };

            //Go to history for the current document.
            cells.Where(cell =>
                cell.FindElements(By.TagName("a")).FirstOrDefault() != null)
                .FirstOrDefault().Click();

            //Todo: scrape child table.

            this.webDriver.Navigate().Back();
        }

        return documents;
    } 
```

**更新：（回应吉姆埃文斯的回答）**

这看起来工作正常。

```
private List<Document> getResults()
    {
        var documents = new List<Document>();
        IWebElement docRow = null;
        int rowIndex = 0;

        while((docRow = this.getDocumentRow(rowIndex)) != null)
        {
            var cells = docRow.FindElements(By.TagName("td"));

            var document = new Document
        {
            DocID = Convert.ToInt32(cells.First().Text),
            PNum = Convert.ToInt32(cells[1].Text),
            AuthNum = Convert.ToInt32(cells[2].Text)
        };

            //Go to history for the current document.
            cells.Where(cell =>
                cell.FindElements(By.TagName("a")).FirstOrDefault() != null)
                .FirstOrDefault().Click();

            //Todo: scrape child table.

            this.webDriver.Navigate().Back();

            documents.Add(well);

            rowIndex++;
        }

        return documents;
    }

    private IWebElement getDocumentRow(int rowIndex)
    {
        try
        {
            IWebElement docsTable = this.webDriver.FindElements(By.TagName("table"))
                .Where(table => table.Text.Contains("Document List"))
                .FirstOrDefault();

            var validDocRowRegex = new Regex(@"^(\d{3}\s+)");

            var docRow = docsTable.FindElements(By.TagName("tr"))
                .Where(row =>
                    //It throws an exception with .FindElement() when there isn't one.
                    row.FindElements(By.TagName("td")).FirstOrDefault() != null &&
                        //Yeah, I don't get this one either. I negate the match and so it works??
                    !validDocRowRegex.IsMatch(
                        row.FindElement(By.TagName("td")).Text))
                .ElementAt(rowIndex);

            return docRow;
        }
        catch
        {
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:35:31.953

您的问题是，一旦您导航到新页面（在您的情况下通过 .Click() ），您的缓存元素就不再有效。每次页面加载时都会重建 DOM，包括在浏览器历史记录中导航时。因此，即使您正在加载一个已经导航到的页面，您也会获得一个新构建的 DOM，因此对先前构建的 DOM 的所有引用都是无效的。解决方案是在导航回上一页后重新找到您正在寻找的元素。

# c - 如何将大量变量发送到泛型函数？

> ID：12236980
> 
> 赞同：0
> 
> 时间：2012-09-02T15:01:52.213
> 
> 标签：c, unit-testing, void-pointers

我有一个函数`f`，定义如下：

```
struct s {
    void *data;
    struct s *next;
};

void
f(struct s **p, void *q)
{
    /* ... */
}

void *
g(struct s **p)
{
    /* ... */
} 
```

我必须使用很多不同的参数来测试这些函数。但是指向的指针`void`只能包含一个对象地址，对吗？那么如何在不使用临时变量（或者可能在宏中）的情况下自动执行以下操作。

```
f(p, 2);
f(p, 'c');
f(p, 3.14); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:05:11.483

临时变量是没有办法的（嗯，你可以使用一个静态变量，它肯定不是临时的！）因为你需要一个地址，因此你需要一个（非注册）变量。

但是，这并不意味着您需要额外的代码行：您可以使用类型化初始化程序（从 C99 开始）：

```
f(p, &(int){2});
f(p, &(double){3.14}); 
```

但是，该函数（正如您定义的那样）无法知道您刚刚传递给它的对象有多大，并且它*不能*只存储指针值，因为它是一个指向*非常*临时变量的指针。

（整数可以转换为指针并再次返回，但有一些限制，但您必须检查您的实现以获取详细信息。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:05:53.497

您可以查看此线程示例，它以类似的方式接受参数：

```
_beginthread( Bounce, 0, (void *) (structure_of_whatever_variables)  );
                            ^
                            |
                            |
                       This is the parameter of function Bounce 
```

[这是上述示例的来源。](http://msdn.microsoft.com/en-us/library/kdzttdcb%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:10:05.943

创建一个测试变量数组并创建一个 for 循环以逐个调用它。这样你就可以直接发送地址，也许这样的东西应该可以工作：

```
for (int i = 0; i < NumOfTestCases; i++)
{
    f(p, &pArrOfTestCases[i]);
} 
```

我希望这会有所帮助。

# mysql - Wordpress 数据库结构

> ID：12236981
> 
> 赞同：0
> 
> 时间：2012-09-02T15:02:08.987
> 
> 标签：mysql, database, wordpress, database-design

我想做一个 ajax 后置过滤器。过滤 wordpress 帖子元（自定义字段）。

我的帖子有演员、流派、持续时间等后元数据。

如果我使用来自 wordpress 的元数据制作脚本，我预计会出现性能问题。因此，我想构建一个包含 post-id 的自定义数据库表，然后是 post-meta 的副本。

我的结构将是这样的：

后身份演员流派持续时间

这是最有效的方法，还是我应该为每个后元制作单独的表格？

像这样：

表 1：身份识别后的演员

表 2：后 ID 类型

表 3 post-id 持续时间

它需要针对大型数据库和大流量进行优化。

*   我对数据库结构设计有点陌生，我也在阅读索引，他们有任务吗？
*   Actor 的值应该是：Brad Pitt 还是与他的名字相关的整数：232？

我也愿意接受比上述更好的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:30:07.243

Wordpress 看起来设计得非常糟糕，但它确实完成了工作并且做得很好。奇怪的是，它比我们通过研究它的设计所能想到的要高效得多。

如果要使用另一个表，则必须在发布更新时将其内容与 wp 数据库同步。可能并不容易。

我会在以下任何一个方向上解决这个问题：

### 1 做 wp 风格并优化

使用自定义帖子类型创建您的数据库。在 admin 中创建一个名为 ajax-actors 的页面，创建一个 page-ajax-actor.php 文件来处理查询并发送原始结果（无页眉，无页脚）。使用 ajax 调用 www.yoursite.com/ajax-actor。这将是“缓慢的”，因此您必须对其进行优化。确保您的 apc 运行时分配了足够多的内存。使用 wordpress 超级缓存或类似插件/使用反向代理

### 2 使用轻量级数据库

将 wordpress 用于您的编辑内容，并从头开始创建第二个轻量级数据库。通过这种方式，您可以针对特定内容优化数据库。

如果您要创建一个新网站，请使用第一种解决方案。它会更快，您会更快地让您的网站上线。然后，您可以使用收入来优化它，甚至进行彻底的重塑。

> Actor 的值应该是：Brad Pitt 还是与他的名字相关的整数：232？

您应该为每个实体类型使用一个表。主键必须是整数。然后你从其他表中引用这个主键。示例：表参与者 id：整数/主键名称：varchar/带索引

name 上的索引会减慢插入速度，但会显着加快使用演员姓名的搜索。在电影表中，您通过 id 引用演员。实际上，由于每部电影有几个演员，所以你需要一个像这样的表： Actors_Movie actor_id : integer movie_id : integer role : varchar （这部电影中这个演员的角色的名字是什么）

希望这可以帮助。

# c# - 我应该如何以及在哪里保存上传的用户资料（和相关）图片/视频/文件？

> ID：12236986
> 
> 赞同：0
> 
> 时间：2012-09-02T15:02:44.040
> 
> 标签：c#, .net, storage

在 WebMatrix 网站中，用户配置文件是从数据库动态生成的，我应该在哪里以及如何存储用户上传的内容？

我不希望此内容可以公开查看，除非用户选择将他们的个人资料设为公开可见，并且上传的内容可以公开查看。

但是我不能把它全部放在一个单独的目录中，因为您需要做的就是猜测这些内容的存储位置，然后浏览该目录中的文件列表。那么，我应该将它放在我的 \root 目录之外（我认为这在某些共享托管环境中是不可能的），还是应该以某种方式将此内容插入数据库？（我尽量避免这个选项）。

对于图像和视频之类的内容，我在想我应该使用受信任的存储提供程序/图像主机类型服务，在那里我将拥有用于存储和检索这些文件的 API 访问权限，然后只存储上传到文件的文件的链接我的数据库中的存储主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:34:29.540

你也可以

*   将额外文件与其他用户详细信息一起存储在数据库中。（在像这样实现存储之前，您可能想与数据库管理员讨论这个问题）
*   将文件放在您的 ASP.NET 应用程序可以访问但无法从 Web 访问的文件共享上。
*   关闭目录浏览并将文件放在那里。“每个人”不能浏览所有文件，但这确实意味着任何拥有直接链接的人都可以在不登录的情况下下载该文件。

我会选择选项 2：将文件放在无法从网络直接访问的目录中，并通过您的网络应用程序引导所有下载，以便您控制谁可以下载什么。

# sql - Rails 3.1 - 在开始日期和结束日期之间获取结果？

> ID：12236988
> 
> 赞同：0
> 
> 时间：2012-09-02T15:03:04.130
> 
> 标签：sql, ruby-on-rails-3, activerecord

我有一个事件列表站点，我目前正在`today`通过执行以下操作列出发生的事件：

```
def load_today_events
 @today_events = Event.find(:all, :conditions => ['start_date =?', Date.today])
end 
```

这工作得很好。

我最近介绍了一个`end_date`跨越一天以上的事件。

显然，一旦`start_date`通过上面的代码，事件就会从我的列表中消失。

我可能在这里遇到了精神障碍，但我一生都无法弄清楚如何显示开始日期已过但结束日期尚未结束的事件。

我想我想要一些类似的东西：

**查找`date.today`等于或介于`start_date`或之间的事件`end_date`**

任何想法如何最好地解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:33:06.210

不确定我是否理解正确，但这里有一些关于日期可以做什么的例子。
在下面的示例中，`current_date`是`postgresql`今天日期的函数。这将匹配 current_date 大于或等于 start_date 且小于 end_date 的事件。

```
@today_events = Event.where("current_date >=  ? and current_date <= ?", start_date, end_date) 
```

另一种方法可能是这样的：

```
@today_events = Event.where("start_date >=  ? and end_date <= ?", start_date, end_date) 
```

此示例显示来自当前日期间隔的事件。
这是基础知识，所以我希望你能适用于你自己的问题。

# django - Django模型具有相同模型的多重关系

> ID：12236992
> 
> 赞同：0
> 
> 时间：2012-09-02T15:03:25.110
> 
> 标签：django, django-models, model

我正在尝试为我的应用程序建模，但遇到了这个问题：

我有一个幻灯片，可以是图像、文本或视频。此外，图像和视频可以在同一用户的许多不同幻灯片和演示文稿中。

我还想存储幻灯片所属的演示文稿和插入日期（幻灯片必须有顺序）。

```
class Slide(models.Model):
    user = models.ForeignKey(User)
    presentation = models.ForeignKey(Presentation)
    insert_date = models.DateTimeField(auto_now_add=True) 
```

-

```
class Image(models.Model):
    def get_image_path(instance, filename):
        return os.path.join('users/images', str(instance.id), filename)

    user = models.ForeignKey(User)
    slide = models.ManyToManyField(Slide)
    image = models.ImageField(upload_to=get_image_path)
    insert_date = models.DateTimeField(, auto_now_add=True) 
```

-

```
class SlideText(models.Model):
    slide = models.OneToOneField(Slide)
    text = models.TextField() 
```

[视频模型将类似于图像]

这个模型的问题是幻灯片可以是空的，并且幻灯片可以包含图像和文本（以及视频），它不应该。

我可以想象这将是一个常见问题：某些项目有一些与“项目类型”相关的信息（即图像幻灯片、文本幻灯片......），那么常见的解决方案是什么？

任何帮助真的很感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:09:24.667

[通用关系](https://docs.djangoproject.com/en/1.4/ref/contrib/contenttypes/#generic-relations)是你想要的。

# entity-framework - 您如何处理实体框架中的深层关系树？

> ID：12236993
> 
> 赞同：2
> 
> 时间：2012-09-02T15:03:25.613
> 
> 标签：entity-framework, lazy-loading, eager-loading

我的模型设计中有一个非常深的关系树，即根实体包含一个实体集合，该集合包含更多其他实体的集合，该集合包含更多集合并且在...我开发了一个其他开发人员拥有的业务层用于执行操作，包括获取/保存数据。

然后，我正在考虑应对这种情况的最佳策略是什么。我不能允许在检索实体时，EF 解析所有依赖关系树，因为它将以很多无用的 JOIN 结束（没用，因为我可能不需要下一级的数据）。

*   如果我**禁用延迟加载**并**强制执行所需的急切加载**，它会按预期工作，但如果其他开发人员调用`child.Parent.Id`而不是`child.ParentId`尝试做一些新的事情（比如一开始没有考虑的新要求或功能），它会得到一个`NullReferenceException`if不包括该依赖项，这很糟糕……但这将是一个“快速错误”，并且可以立即修复。

*   如果我**启用延迟加载**，每次访问数据库时，访问`child.Parent.Id`而不是将以对数据库的独立查询结束。`child.ParentId`它不会失败，但更糟糕的是因为没有错误，只是性能下降，所有代码都应该审查。

我对这两种解决方案中的任何一种都不满意。

*   我不高兴拥有包含 null 或空集合的实体，而实际上，这不是真的。

*   我不喜欢让 EF 随时对数据库执行任意查询。如果可能的话，我想在一次拍摄中获得所有信息。

所以，我想出了几个可能的解决方案，包括**禁用延迟加载**和**强制加载**，但不确定哪个更好：

*   我可以创建一个`EntityBase`类，其中包含表中没有集合的数据，因此无法访问它们。以及包含关系的具体实现，问题是你没有太多的灵活性，因为 C# 不允许多重继承。

*   我可以创建接口来“屏蔽”隐藏在该方法调用中不可用的属性的对象。例如，如果我有一个`User.Roles`属性，为了向所有用户显示一个网格，我不需要解析该`.Roles`属性，因此我可以创建一个不包含此类属性的接口“IUserData”。

但如果这项额外的工作值得，我不这样做，也许快速`NullReferenceException`指示“此属性尚未加载”就足够了。

如果属性是虚拟的并且没有被覆盖/设置，是否可以抛出特定的异常类型？

你用什么方法？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T20:43:58.367

在我看来，您[试图保护开发人员](http://davybrion.com/blog/2009/04/educate-developers-instead-of-protecting-them/)免于了解他们在访问数据时正在做什么以及它可能对性能产生的影响 - 这可能会导致不必要的复杂 API，其中包含许多帮助类、基类、接口， ETC。

如果开发人员使用`user.MiddleName.Trim()`and `MiddleName`is`null`他得到 a`NullReferenceException`并且做错了什么，要么没有检查，要么没有`null`确保`MiddleName`将 a 设置为一个值。当他访问`user.Roles`并获得 a时也是`NullReferenceException`如此：他没有检查`null`或没有调用加载`Roles`用户的 API 的适当方法。

我想说：解释导航属性是如何工作的，如果开发人员不遵守规则，必须明确请求它们，并让应用程序崩溃。他需要理解错误并改正它。

作为帮助，您可以在 API 中以某种方式显式加载相关数据，例如使用以下方法：

```
public User GetUser(int userId);
public User GetUserWithRoles(int userId); 
```

或者：

```
public User GetUser(int userId, params Expression<Func<User,object>>[] includes); 
```

可以这样调用：

```
var userWithoutRoles = layer.GetUser(1);
var userWithRoles = layer.GetUser(2, u => u.Roles); 
```

您还可以利用*显式加载*而不是延迟加载来强制开发人员在他们想要加载导航属性而不只是访问该属性时调用方法。

两个补充说明：

> ...延迟加载...每次访问时都会以对数据库的独立查询结束。

“ *...尚未加载*”来完成此操作。如果导航属性已在同一上下文中加载，则再次访问该属性不会触发对数据库的查询。

> 如果可能的话，我想在一次拍摄中获得所有信息。

多个查询不一定会导致性能比一个带有很多`Include`s 的查询更差。事实上，复杂的急切加载[会导致在线上的数据倍增](https://stackoverflow.com/a/5522195/270591)，并使实体实现非常耗时且比多个延迟或显式加载查询慢。（[这是一个示例](https://stackoverflow.com/a/7780935/270591)`Include`，通过将查询的性能从带有 s 的单个查询更改为不带s 的超过 1000 个查询，查询的性能提高了 50 倍`Include`。）精髓是：您无法可靠地预测在特定情况下最佳加载策略是什么不衡量绩效（如果绩效在那种情况下很重要）。

# php - 使用 PHP 从 SimpleDB 获取数据

> ID：12236999
> 
> 赞同：0
> 
> 时间：2012-09-02T15:04:24.043
> 
> 标签：php, amazon-simpledb

如何从 SimpleDB 中获取数据？我想做的就是把数据放进去，然后把数据拿出来。看起来数据不容易取出，最终需要计算能力通过循环等方式提取。我说的对吗？

这是我提取数据的代码：

```
<?php
// Include the SDK
require_once 'sdk.class.php';

// Instantiate
$sdb = new AmazonSDB();

$select_expression = 'SELECT * FROM ' . $domain_name;
$next_token = null;

do {
  if ($next_token) {
    $response = $sdb->select($select_expression, array(
        'NextToken' => $next_token,
      ));
  } else {
    $response = $sdb->select($select_expression);
  }

  // Get Data for row 
  $body = $response->body->to_array()->getArrayCopy();

  echo "ID: " . $msgId . "<br>";

  $next_token = isset($response->body->SelectResult->NextToken)
    ? (string) $response->body->SelectResult->NextToken
    : null;
}
while ($next_token);

echo "<br>";
?> 
```

这是我要提取的数据的摘录。

```
Array
(
  [@attributes] => Array
    (
        [ns] => http://sdb.amazonaws.com/doc/2009-04-15/
    )

[SelectResult] => Array
    (
        [Item] => Array
            (
                [0] => Array
                    (
                        [Name] => 1
                        [Attribute] => Array
                            (
                                [0] => Array
                                    (
                                        [Name] => msgAddress
                                        [Value] => +2782555555
                                    )

                                [1] => Array
                                    (
                                        [Name] => msgType
                                        [Value] => S
                                    )

                                [2] => Array
                                    (
                                        [Name] => msgSubmitDate
                                        [Value] => 2012-09-02 15:48:46
                                    )

                                [3] => Array
                                    (
                                        [Name] => msgText
                                        [Value] => Test SMS message for ID no 1
                                    )

                            )

                    )

                [1] => Array
                    (
                        [Name] => 2
                        [Attribute] => Array
                            (
                                [0] => Array
                                    (
                                        [Name] => msgAddress
                                        [Value] => +27825555555
                                    )

                                [1] => Array
                                    (
                                        [Name] => msgType
                                        [Value] => P
                                    )

                                [2] => Array
                                    (
                                        [Name] => msgSubmitDate
                                        [Value] => 2012-09-02 15:48:46
                                    )

                                [3] => Array
                                    (
                                        [Name] => msgText
                                        [Value] => Test phone message for ID no 2
                                    )

                            )

                    )

                [2] => Array
                    (
                        [Name] => 3
                        [Attribute] => Array
                            (
                                [0] => Array
                                    (
                                        [Name] => msgAddress
                                        [Value] => name@domain.co.za
                                    )

                                [1] => Array
                                    (
                                        [Name] => msgType
                                        [Value] => E
                                    )

                                [2] => Array
                                    (
                                        [Name] => msgSubmitDate
                                        [Value] => 2012-09-02 15:48:46
                                    )

                                [3] => Array
                                    (
                                        [Name] => msgText
                                        [Value] => Test email message for ID no 3 to name@domain.co.za
                                    )

                            )

                    )

                [3] => Array
                    (
                        [Name] => 4
                        [Attribute] => Array
                            (
                                [0] => Array
                                    (
                                        [Name] => msgAddress
                                        [Value] => andrebruton
                                    )

                                [1] => Array
                                    (
                                        [Name] => msgType
                                        [Value] => P
                                    )

                                [2] => Array
                                    (
                                        [Name] => msgSubmitDate
                                        [Value] => 2012-09-02 15:48:46
                                    )

                                [3] => Array
                                    (
                                        [Name] => msgText
                                        [Value] => Test push notification message for ID no 4
                                    )

                            )

                    )

            )

    )
) 
```

我想要得到的是以下变量：

msgId（名称）、msgType、msgAddress、msgText、msgSubmitDate

如果我可以使用 $msgType = Body->SelectResult->Item->Name 或类似的东西来获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T07:55:48.203

使用 XPath 的执行速度将提高大约 100 倍。我还没有测试过这段代码，但 XPath 表达式应该非常接近：

```
$msgAddress = (string) $response->body->query('//Attribute[Name[text()="msgAddress"]]/Value')->first(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:44:42.707

我用一些旧的泰山代码弄清楚了。这适用于二维数组（类似于标准数据库的数据）

这是工作代码：

```
<?php
// Include the SDK
require_once 'sdk.class.php';

// Instantiate
$sdb = new AmazonSDB();

$select_expression = 'SELECT * FROM ' . $domain_name;
$next_token = null;

do {
  if ($next_token) {
    $response = $sdb->select($select_expression, array(
        'NextToken' => $next_token,
    ));
  } else {
    $response = $sdb->select($select_expression);
  }

  // Get Data for row 
  foreach ($response->body->SelectResult->Item as $item) 
    {
        $msgId = $item->Name;
      foreach ($item->Attribute as $attr)
        {
              if ($attr->Name == 'msgAddress') {
                  $msgAddress = $attr->Value;
                }
              if ($attr->Name == 'msgType') {
                  $msgType = $attr->Value;
                }
              if ($attr->Name == 'msgSubmitDate') {
                  $msgSubmitDate = $attr->Value;
                }
              if ($attr->Name == 'msgText') {
                  $msgText = $attr->Value;
                }
        }

      echo "<br>msgId: $msgId<br>";
      echo "msgAddress: $msgAddress<br>";
      echo "msgType: $msgType<br>";
      echo "msgSubmitDate: $msgSubmitDate<br>";
      echo "msgText: $msgText<br><br>";

    }

  $next_token = isset($response->body->SelectResult->NextToken)
    ? (string) $response->body->SelectResult->NextToken
    : null;
}
while ($next_token);

echo "<br>";
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:32:49.807

```
$body = $response->body->to_array()->getArrayCopy();
echo "ID: " . $msgId . "<br>";
//but $msgId is not set 
```