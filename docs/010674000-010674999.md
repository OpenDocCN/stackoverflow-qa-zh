# StackOverflow 问答 10674000-10674999

# php - 单击外部链接时如何模仿 Facebook 的行为

> ID：10674001
> 
> 赞同：0
> 
> 时间：2012-05-20T13:55:16.730
> 
> 标签：php, html, curl

基本上我想做的是，因为我为我的用户提供了在我的网站上分享评论和帖子中的链接的能力，当用户点击外部链接时让我的网站让它在我的页面中打开页面. 有点像脸书的做法。您将看到整个站点，但 facebook 的小导航栏将保留在您刚刚打开的站点的顶部。

我想复制这种行为，这样我就可以管理用户共享的链接，如果它们是无效或恶意的，则标记它们。所以我可以关掉它们。现在我已经在捕获链接并将它们存储在每个用户每个链接的基础上，以便我可以根据需要进行调节。但是为了让我的用户当前标记一个站点，他们必须回到我的站点，并遵循一个乏味的过程。我想做的是提供一个迷你导航，如果用户需要，它基本上可以选择在上面标记。也是为他们提供返回我网站的直接链接的一种方式。

所以我试图找出最好的方法。我应该通过 cURL 之类的东西拉取页面的全部内容，还是应该将它放在类似设置的框架中。或者，最好的方法是在跨平台和跨浏览器对桌面浏览器和移动浏览器友好的庄园中做到这一点。我可以预见如果我做类似 cURL 之类的事情，有人会恶意捣毁我，因为他们所要做的就是在某个地方转储一些卑鄙的代码，并且由于我的网站将它拾取并通过脚本拉取它，也许它会如何破坏我的网站，我不知道，我不经常使用 cURL 以了解是否存在任何重大风险。

那你说什么堆叠？某种 cURL 方法，框架，其他？有没有人可以指出一个很好的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:22:03.040

如果您使用框架，那么一些网站可以跳出它们。如果您使用 CURL，则需要解析所有 url（链接、图像、脚本、css）并将它们更改为您自己的，如果您想将用户保留在您的站点中。所以 CURL 看起来更可靠，但它需要你做很多工作，并且它为你的站点产生了更多的带宽。如果您想要基于 CURL 的解决方案，您可以尝试在网上查找 Web 代理示例。

这是一个基本的工作代码，可以帮助您入门：

```
$url = isset($_GET['url']) ? $_GET['url'] : 'http://amazon.co.uk/'; 
$html = file_get_contents2($url);

$doc = new DOMDocument();
@$doc->loadHTML($html);
$xml = simplexml_import_dom($doc);

$host = 'http://' .parse_url($url, PHP_URL_HOST);
$proxy = 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['SCRIPT_NAME'] . '?url=';

$items['a']         = 'href';
$items['img']       = 'src';
$items['link']      = 'href';
$items['script']    = 'src';

foreach ($items AS $tag=>$attr)
{
    $elems = $xml->xpath('//' . $tag);
    foreach ($elems AS &$e)
    {
        if (substr($e[$attr], 0, 1) == '/')
        {
            $e[$attr] = $host . $e[$attr];
        } 
        if ($tag == 'a')
        {
            $e[$attr] = $proxy . urlencode($e[$attr]);
        }   
    }
}

$xmls = $xml->asXml();
$doc->loadXML($xmls);
$html = $doc->saveHTML();
echo $html;

function file_get_contents2($address)
{   
    $useragent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1"; 

    $c = curl_init(); 
    curl_setopt($c, CURLOPT_URL, $address);
    curl_setopt($c, CURLOPT_USERAGENT, $useragent);     
    curl_setopt($c, CURLOPT_HEADER, 0);
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($c, CURLOPT_FRESH_CONNECT, 1);
    if (!$data = curl_exec($c)) 
    {
        return false; 
    } 

    return $data;
} 
```

# java - Spring3.0的jpetstore导入Springsource Tool Suite时出现Maven错误

> ID：10674002
> 
> 赞同：1
> 
> 时间：2012-05-20T13:55:27.207
> 
> 标签：java, spring, maven

我从 SVN 下载了 JPetstore，但有无法解决的 maven 错误

我尝试运行 maven-update 依赖项和 maven-update 项目配置，但没有帮助。

错误如下：

```
The container 'Maven Dependencies' references non existing library 
'C:\Users\YYC\.m2\repository\javax\servlet\jstl\1.2\jstl-1.2.jar

ArtifactDescriptorException: Failed to read artifact descriptor for 
org.springframework:spring-context-support:jar:3.0.0.BUILD-SNAPSHOT: 
```

Maven：2.2.1

Spring JPetstore [https://src.springframework.org/svn/spring-samples/jpetstore/trunk/org.springframework.samples.jpetstore/](https://src.springframework.org/svn/spring-samples/jpetstore/trunk/org.springframework.samples.jpetstore/)

我想了解错误并解决它们，以便我可以构建和运行 JPetStore 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:23:06.367

答案似乎是编辑[pom.xml](https://src.springframework.org/svn/spring-samples/jpetstore/trunk/org.springframework.samples.jpetstore/pom.xml)以引用**Spring 3.0.5.RELEASE**替换文件中的 3.0.0.BUILD-SNAPSHOT。

# iphone - iOS：让应用程序在后台运行

> ID：10674004
> 
> 赞同：23
> 
> 时间：2012-05-20T13:55:36.833
> 
> 标签：iphone, objective-c, ios, xcode4.3, background-process

如何让我的应用程序在后台运行？我是否必须越狱我的 iPhone 才能做到这一点？我只需要这个应用程序每隔设定的时间间隔从互联网上检查一些东西，并在需要时通知我，供我自己使用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-20T14:44:19.133

是的，不需要越狱。查看[Apple](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW23)文档的“实现长时间运行的后台任务”部分。

来自 Apple 的文档：Declaring Your App's Supported Background Tasks

对某些类型的后台执行的支持必须由使用它们的应用程序提前声明。应用程序使用其 Info.plist 文件声明对服务的支持。将 UIBackgroundModes 键添加到 Info.plist 文件中，并将其值设置为包含以下一个或多个字符串的数组：（请参阅上述链接中的 Apple 文档。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T14:00:26.307

使用本地通知来做到这一点。但这不会每次都检查。您必须设置检查特定事件的时间，您可以通过减少时间段来缩短此时间。阅读有关本地通知的更多信息以了解如何实现此目的：

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T14:00:41.580

我想这是你需要的

[当 iOS 应用程序进入后台时，是否会暂停冗长的任务？](https://stackoverflow.com/questions/6650717/when-an-ios-application-goes-to-the-background-are-lengthy-tasks-paused)

[iOS应用后台下载](https://stackoverflow.com/questions/4579810/ios-application-background-downloading)

这可能会帮助你...

享受编码:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-01T13:19:08.753

我找到了一种方法，通过播放静音让应用程序在后台运行

确保您在后台模式下选择了音频播放

另外，不要长时间使用这种方法，因为它会消耗 CPU 资源和电池电量，但我认为这是保持应用程序存活几分钟的合适方法。

只需创建一个实例`SilencePlayer`，调用`play()`然后`stop()`，当你完成

```
import CoreAudio

public class SilencePlayer {
    private var audioQueue: AudioQueueRef? = nil
    public private(set) var isStarted = false

    public func play() {
        if isStarted { return }
        print("Playing silence")
        let avs = AVAudioSession.sharedInstance()
        try! avs.setCategory(AVAudioSessionCategoryPlayback, with: .mixWithOthers)
        try! avs.setActive(true)
        isStarted = true
        var streamFormat = AudioStreamBasicDescription(
            mSampleRate: 16000,
            mFormatID: kAudioFormatLinearPCM,
            mFormatFlags: kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked,
            mBytesPerPacket: 2,
            mFramesPerPacket: 1,
            mBytesPerFrame: 2,
            mChannelsPerFrame: 1,
            mBitsPerChannel: 16,
            mReserved: 0
        )
        let status = AudioQueueNewOutput(
            &streamFormat,
            SilenceQueueOutputCallback,
            nil, nil, nil, 0,
            &audioQueue
        )
        print("OSStatus for silence \(status)")
        var buffers = Array<AudioQueueBufferRef?>.init(repeating: nil, count: 3)
        for i in 0..<3 {
            buffers[i]?.pointee.mAudioDataByteSize = 320
            AudioQueueAllocateBuffer(audioQueue!, 320, &(buffers[i]))
            SilenceQueueOutputCallback(nil, audioQueue!, buffers[i]!)
        }
        let startStatus = AudioQueueStart(audioQueue!, nil)
        print("Start status for silence \(startStatus)")
    }

    public func stop() {
        guard isStarted else { return }
        print("Called stop silence")
        if let aq = audioQueue {
            AudioQueueStop(aq, true)
            audioQueue = nil
        }
        try! AVAudioSession.sharedInstance().setActive(false)
        isStarted = false
    }

}

fileprivate func SilenceQueueOutputCallback(_ userData: UnsafeMutableRawPointer?, _ audioQueueRef: AudioQueueRef, _ bufferRef: AudioQueueBufferRef) -> Void {
    let pointer = bufferRef.pointee.mAudioData
    let length = bufferRef.pointee.mAudioDataByteSize
    memset(pointer, 0, Int(length))
    if AudioQueueEnqueueBuffer(audioQueueRef, bufferRef, 0, nil) != 0 {
        AudioQueueFreeBuffer(audioQueueRef, bufferRef)
    }
} 
```

在 iOS 10 和 Swift 4 上测试

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-20T14:48:31.937

我知道这不是您问题的答案，但我认为这是一个解决方案。

这假设您尝试定期检查某些内容或从 Internet 获取数据？

创建一个服务，在每个设定的时间间隔检查互联网是否有您想知道的任何内容，并创建一个推送通知来提醒您，如果服务器已关闭，或者您尝试监控的任何内容已更改状态。只是一个想法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T11:13:22.120

是的，你可以做这样的事情。为此，您需要在 info.plist 中设置条目以告诉操作系统我的应用程序将在后台运行。我已经这样做了，因为我想在特定时间戳之后将用户的位置传递给服务器。为此，我将“必需的后台模式”设置为“应用程序注册以进行位置更新”。

您可以编写 UIBackgroundTaskIdentifier 类型的处理程序。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-20T13:57:02.173

您已经可以在 applicationDidEnterBackground 方法中执行此操作

# prolog - 在序言中多次读取变量

> ID：10674007
> 
> 赞同：1
> 
> 时间：2012-05-20T13:56:16.770
> 
> 标签：prolog

我想用prolog（连接四）写一个简单的游戏。我想多次读取用户的输入，输入是列号。当我第二次阅读“Col”并输入不同的值时，它会崩溃并给出错误（我知道如何多次阅读）：

```
:- dynamic state/3.
:- dynamic top/2.

%% the problem is in the read here
play(Color, Col) :-
top(Col, Raw) -> addRing(Col, Raw, Color); (assert(top(Col,0)) ,addRing(Col, 0, Color)),
win(X,Y,Winner)
-> (write('Game over, winner is '),write(Winner));
(write('Your turn, column? '), read(Col), write('read column is '), write_ln(Col), play(red,Col)).

addRing(Col, Raw, Color):-
assert(state(Col,Raw,Color)),
Next is Raw + 1, retract(top(Col, Raw)), assert(top(Col, Next)).
win(X,Y, Winner) :-
state(X,Y, Color), N1 is X - 1, state(N1, Y, Color), N2 is N1 - 1, state(N2, Y, Color), N3 is N2 - 1, state(N3, Y, Color), Winner = Color.

%% the reset is some methods to determine the winner
win(X,Y, Winner) :-
state(X,Y, Color), N1 is Y - 1, state(X, N1, Color), N2 is N1 - 1, state(X,N2, Color), N3 is N2 - 1, state(X, N3, Color), Winner = Color.

win(X,Y, Winner) :-
state(X,Y, Color),
N1 is X + 1, M1 is Y + 1, state(N1, M1, Color),
N2 is N1 + 1, M2 is M1 + 1, state(N2, M2, Color),
N3 is N2 + 1, M3 is M2 + 1, state(N3, M3, Color),
Winner = Color.

win(X,Y, Winner) :-
state(X,Y, Color),
N1 is X + 1, M1 is Y - 1, state(N1, M1, Color),
N2 is N1 + 1, M2 is M1 - 1, state(N2, M2, Color),
N3 is N2 + 1, M3 is M2 - 1, state(N3, M3, Color),
Winner = Color. 
```

例如，要测试游戏，您可以通过调用来启动它`play(Red,0)`，然后它会询问列号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:34:06.210

我认为`Col`在递归调用中应该是`Col1`，即与头部不同的变量。

# android - Android - 标题背景图像的尺寸应该是多少？

> ID：10674008
> 
> 赞同：0
> 
> 时间：2012-05-20T13:56:18.087
> 
> 标签：android, android-layout

我正在尝试制作一个标题，它将有 4 或 5 个按钮......我还不确定。

这些按钮的文本长度会有所不同，不同的设备也会有不同的宽度，并且每个设备都有水平和垂直视图。所以我不确定我的背景图像在高度和宽度方面应该是什么，所以一切都很好地适合屏幕。

处理此问题的推荐或最佳实践方法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:21:20.467

您需要阅读 android 文档，特别是[Designing for Multiple Screens](http://developer.android.com/training/multiscreen/index.html)。

也许也[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)。

它将带您了解设置和支持您希望的设备所需的知识/操作。

# java - Vlcj 无法打开 mrl

> ID：10674011
> 
> 赞同：2
> 
> 时间：2012-05-20T13:56:50.917
> 
> 标签：java, video-streaming, vlcj

我正在使用 vlcj 将实时视频从网络摄像机流式传输到我的 java 应用程序中。问题是每当我尝试使用局域网地址来获取流时，代码都无法打开套接字。

错误如下：

```
[01ac1028] access_http access error: cannot connect to 192.168.19.14:81
[01ac1028] access_mms access error: cannot connect to 192.168.19.14:81
[01adb550] main input error: open of `http://@192.168.19.14:81' failed
[01adb550] main input error: Your input can't be opened
[01adb550] main input error: VLC is unable to open the MRL 'http://@192.168.19.14:81'. 
```

检查日志以获取详细信息。

谁能指导我如何消除这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:15:09.840

```
mediaPlayer.playMedia("dshow://", 
                    ":sout=#transcode{vcodec=h264,vb=800,fps=15,scale=1,width=1280,height=800,acodec=mp4a,ab=128,channels=2,samplerate=44100}:rtp{sdp=rtsp://@:5555/demo}",
                      ":no-sout-rtp-sap", 
                     ":no-sout-standard-sap", 
                      ":sout-all", 
                      ":sout-keep"); 
```

用这个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T06:47:02.047

那里可能有两件事出错：

*   确保你有防火墙的东西[为 VLC 启用防火墙](https://www.youtube.com/watch?v=Scp5--4YYnI)
*   确保 IP 摄像机处于活动状态且可用于通信（我的情况是问题所在），这是日志![从 VLC 播放器记录我的情况](../Images/a5ab4c0f475ae14a2fe83302da8cef52.png)

# c# - 部署后asp.net mvc 3 Web应用程序不起作用

> ID：10674021
> 
> 赞同：2
> 
> 时间：2012-05-20T13:57:42.117
> 
> 标签：c#, asp.net-mvc, sql-server-2008, razor

我已经在 IIS 7 上部署了 asp.net mvc 3 razor 视图引擎应用程序。服务器使用 windows server 2008 和 sql server 2008。安装了 asp.net mvc 3

我在 Visual Studio 2010 中单击了发布按钮。将其发布到本地文件夹，然后复制到服务器中。

我收到错误 >`Sorry, an error occurred while processing your request.`

此错误仅显示需要 sql 连接的视图，以便其他页面完美加载。

我确定我已经用正确的连接字符串更改了连接字符串。

请帮助我，网络中没有任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T06:32:13.607

首先，您必须知道导致错误视图出现的异常是什么。

我可以建议你三个选项。

1.  关闭`<customErrors`> 部分，`HandleError`过滤器将不起作用，您可以看到*真正的异常*。

2.  `HandleError`过滤器还将一个实例传递给错误视图，因此您可以通过访问该模型`HandleErrorInfo`在错误视图本身中显示完整的异常*（只是为了知道错误在生产中不是一个明智的想法） 。*

    ```
    @model System.Web.Mvc.HandleErrorInfo

    <p>
       The exception is: @Model.Exception
    </p> 
    ```

3.  您可以尝试记录所有未处理异常的**ELMAH**库。过滤器`HandleError`抑制异常并阻止它们被**ELMAH记录，因此在尝试****ELMAH**`HandleError`时最好关闭它们。您必须在单独的数据库中进行配置，它会提供一个列出所有最近错误的页面。**`ELMAH`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:07:04.697

检查以下内容：

*   您在 IIS 中将其部署到的应用程序池正在使用正确版本的 .NET（应该使用 .NET 4 集成模式应用程序池）
*   如果是阻止任何东西在 ASP.NET 中运行的错误，那么应该将错误记录到服务器上的事件日志中。检查应用程序和/或系统日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:11:17.720

该请求页面的某些代码中存在一些错误。所以 ASP.NET MVC 正在显示 error.cshtml 的内容。

您可以在 web.config 中禁用自定义错误页面，以便可以在浏览器中看到错误。请记住，不仅您，每个人都可以看到。因此，一旦找出问题所在，您最好将设置更改回来。您还可以将值设置为，`remoteonly`以便只有它在服务器上可见。这仅在您可以远程访问服务器时才有效。**

# ruby-on-rails - 没有路线匹配，用于 rails 3 中的命名路线

> ID：10674022
> 
> 赞同：1
> 
> 时间：2012-05-20T13:58:04.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我对导轨路由有疑问。

错误是：

```
No route matches {:controller=>"orders", :action=>"sell_item"} 
```

路由规则如下所示：

```
match 'orders/sell/:id' => 'orders#sell_item', as: 'sell_item' 
```

视图文件中的链接生成：

```
<%= link_to 'sell', sell_item_url, id: line_item.id %> 
```

OrdersController 中的函数

```
def sell_item(line_item_id)
  line_item = LineItem.find(line_item_id)
  line_item.status = 1
  line_item.save
end 
```

如果我从路由中删除“/：id”并从链接到中删除“，id：line_item.id”，它仍然会生成路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:02:13.060

代替

```
<%= link_to 'sell', sell_item_url, id: line_item.id %> 
```

尝试

```
<%= link_to 'sell', sell_item_url(line_item) %> 
```

Rails 应该根据对象为您构建路线。

看这里：

[http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects](http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects)

# xcode - 我的 iOS 模拟器不能从 root 帐户工作，但可以从用户帐户工作

> ID：10674024
> 
> 赞同：2
> 
> 时间：2012-05-20T13:58:19.740
> 
> 标签：xcode, xcode4.2, osx-lion, ios-simulator, root

从 root 帐户运行时只显示黑屏 iOS 模拟器。如何解决这个问题呢？

升级版：

```
sh-3.2# /Applications/Xcode.app/Contents/MacOS/Xcode 
com.apple.dt.instruments.backgroundinstruments: Already loaded
2012-05-20 21:57:32.871 Xcode[2538:107] ERROR: Failed to create an alert for ID "enabled" based on defaults: 1
2012-05-20 21:57:34.277 Xcode[2538:107] Error launching simulated application: Error Domain=DTiPhoneSimulatorErrorDomain Code=1 "iOS Simulator failed to install application." UserInfo=0x400e8b820 {NSLocalizedDescription=iOS Simulator failed to install application., DTiPhoneSimulatorUnderlyingErrorCodeKey=-1} 
```

升级版：

从 root 帐户启动 iOS 模拟器

链接：[pastebin.com/1Z8XxxcH](http://pastebin.com/1Z8XxxcH)

截图：[imageshack.us/photo/my-images/594/20120520101127pm.png](http://imageshack.us/photo/my-images/594/20120520101127pm.png)

# ios - 在 iOS 上，如何调用 applicationDidBecomeActive、loadView 和 viewDidLoad？

> ID：10674026
> 
> 赞同：1
> 
> 时间：2012-05-20T13:58:37.867
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller

方法`applicationDidBecomeActive`、`loadView`和`viewDidLoad`将在 iOS 应用程序中的适当时间被调用。对于`loadView`和`viewDidLoad`，它看起来是：

```
-(void) someMethod {

    //...

    [viewController loadView];
    [viewController viewDidLoad];

} 
```

他们是这样被调用的吗？调用它们的类是什么？（有没有源代码可以显示一个应用程序的启动流程？很多时候，我们只能看到头文件而看不到源代码）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:26:14.050

如果我很好地理解了您的问题，您想了解应用程序生命周期，这是真的吗？

好吧，我想苹果没有提供可以向您展示它的外观的源代码。

如果您想知道应用程序启动时会发生什么情况，我建议您阅读**Oleb**的[app-launch-sequence-ios-revisited](http://oleb.net/blog/2012/02/app-launch-sequence-ios-revisited/)。这是一个非常好的帖子。

 **关于您编写​​的方法，这些方法不应手动调用。是框架（通过 iOS）为您调用它们。

方法`loadView`和`viewDidLoad`是在`UIViewController`生命周期中调用的方法。

`loadView`当您无法创建故事板或 nib 文件时使用（覆盖） 。通过这种方式，您可以为您提供`UIViewController`一个全新的视角。来自苹果文档：

> 如果您无法在情节提要或 nib 文件中定义视图，请覆盖 loadView 方法以手动实例化视图层次结构并将其分配给视图属性。

换句话说：

```
- (void)loadView
{  
   UIView* myCustomView = ... // create the view here
   self.view = myCustomView;
} 
```

关于该`viewDidLoad`方法，当在内存中设置视图时调用此方法。完成后，您可以确定已设置出口，并且您可以执行其他初始化。

来自苹果文档：

> 在视图控制器将其视图层次结构加载到内存后调用此方法。无论视图层次结构是从 nib 文件加载还是在 loadView 方法中以编程方式创建，都会调用此方法。您通常覆盖此方法以对从 nib 文件加载的视图执行额外的初始化。

换句话说：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // additional initializations here
} 
```

最后，关于`applicationDidBecomeActive`方法（或委托，如果需要），调用它是为了让您的应用程序知道它从非活动状态移动到活动状态。

我建议您阅读[UIApplicationDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)和[UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)类参考。

如果您想简单地验证序列调用，请覆盖方法并放在`NSLog`那里。

希望能帮助到你。**

# c# - Outlook C# - 如何确定用户是否回复了邮件？

> ID：10674027
> 
> 赞同：1
> 
> 时间：2012-05-20T13:58:44.037
> 
> 标签：c#, outlook

在代码中，我想获取回复状态，用于显示“您在...上回复此消息”的一个 Outlook。

我尝试查看所有 MailItem 属性，但找不到任何类似的东西。

在此先感谢，尼科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:22:41.477

```
string SchemaTransportHeader = @"http://schemas.microsoft.com/mapi/proptag/0x10820040";

string repliedOn =  oMailItem.PropertyAccessor.GetProperty(SchemaTransportHeader).ToString(); 
```

如果它没有被回复或它拥有的 DateTime，它将返回空。

# php - SQL/PHP加入表，忽略多条记录

> ID：10674029
> 
> 赞同：1
> 
> 时间：2012-05-20T13:58:46.760
> 
> 标签：php, sql, join

我真的不知道如何寻找这个问题的解决方案，没有找到任何具体的东西，所以这里......

我有四个表，让我们简化它们：

```
 players
  =======
  id    name    surname
  1     John    Arbuckle
  2     Walter  White
  3     Don Draper
  4     Louis   CK
  5     Tyrion  Lannister
  6     Abed    Nadir

  sports
  ======
  id    sport
  1     football
  2     handball

  positions
  =========
  id    name    sport_id
  1     goalie  1
  2     defense 1
  3     attack  1
  4     goalie  2
  5     pivot   2
  6     wing    2
  7     center  2

  player_position
  ===============
  player_id position_id
  1         1
  1         2
  1         5
  2         7
  2         5
  3         2
  4         2
  5         1
  5         3
  6         7
  6         5 
```

因此，玩家可以在多个位置上进行多项运动。首先，我必须显示某项运动的球员名单，包括他们所打位置的列。

我开始使用的是 JOIN 语句，我将在其中加入这些表并为每个玩家 ID 设置多行。这很接近，但不是很正确。我需要得到的是这样的表格：

足球

```
 ID  name    surname     position
    1   John    Arbuckle    PHP array(goalie,defense) 
```

手球

```
 ID  name    surname     position
    1   John    Arbuckle    PHP array(pivot) 
```

编辑：所以我正在寻找的是 GROUP_CONCAT()。多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:56:09.860

```
select p.id, p.name, p.surname, group_concat(po.name)
from players p 
inner join player_position pp on pp.player_id = p.id
inner join positions po on po.id = pp.position_id
inner join sports s on s.id = po.sport_id
where s.sport = 'football'
group by p.id 
```

请参阅此[SQLFiddle 示例](http://sqlfiddle.com/#!2/2250d/12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:44:04.000

我不确定这是否万无一失（未经测试），但是……</p>

```
SELECT pp.`player_id` AS 'ID',s.`id` AS 'sport_id',s.`sport`,ps.`name` AS 'position',pl.`name`,pl.`surname` FROM `sports` s
INNER JOIN `positions` ps ON s.`id`=ps.`sport_id`
INNER JOIN `player_position` pp ON pp.`position_id`=ps.`id`
INNER JOIN `players` pl ON pl.`id`=pp.`player_id`
ORDER BY s.`id`,pp.`player_id`,ps.`id` 
```

这是一个更详细的版本：

```
SELECT
    s.`id` AS 'sport_id',s.`sport`,
    ps.`id` AS 'position_id',ps.`name` AS 'position',
    pl.`id` AS 'player_id',pl.`name`,pl.`surname`
FROM `sports` s
INNER JOIN `positions` ps ON s.`id`=ps.`sport_id`
INNER JOIN `player_position` pp ON pp.`position_id`=ps.`id`
INNER JOIN `players` pl ON pl.`id`=pp.`player_id`
ORDER BY s.`id`,pp.`player_id`,ps.`id` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T14:45:10.757

**对于足球：**

```
SELECT players.name, players.surname, positions.name 
FROM players, sports, positions, player_position 
WHERE sports.id = 1 AND positions.sport_id = sports.id AND payer_position.position_id = positions.id AND players.id = player_position.player_id; 
```

**对于手球：**

```
SELECT players.name, players.surname, positions.name 
FROM players, sports, positions, player_position 
WHERE sports.id = 2 AND positions.sport_id = sports.id AND payer_position.position_id = positions.id AND players.id = player_position.player_id; 
```

# sublimetext2 - 在 Sublime Text 2 中 - 重新打开构建输出

> ID：10674030
> 
> 赞同：32
> 
> 时间：2012-05-20T13:58:53.570
> 
> 标签：sublimetext2

在 Sublimt Text 2 中，当我使用构建系统 (make) 运行测试时，输出显示在构建输出窗格中。

但是，如果我按 Escape 关闭输出窗格（例如进行修复），我无法找到重新显示输出窗格以查看其他内容的方法。已尝试创建自定义键绑定以执行 show_panel“输出”，但无法使其正常工作。

米普？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-10-24T19:51:31.633

菜单快捷方式位于`Tools -> Build Results -> Show Build Results`.

我希望它`View`像所有其他视图选项一样位于菜单下...

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-05-21T07:00:34.267

正如您在`Packages/Default/Main.sublime-menu`“显示构建结果”的命令中看到的那样：

```
{
  "command": "show_panel", 
  "args": {
    "panel": "output.exec"
  },
  "caption": "Show Build Results",
  "mnemonic": "S"
}, 
```

所以自定义键绑定可能是这样的：

```
{ 
  "keys": ["ctrl+alt+super+r"],
  "command": "show_panel", 
  "args": {
    "panel": "output.exec"
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-27T09:49:33.383

以及隐藏面板的键绑定：

```
{
  "keys": ["ctrl+shift+2"], 
  "command": "hide_panel", 
  "args": {
    "panel": "output.exec"
   }
}, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-14T15:25:21.717

基于 akirk 的回答，您可以通过复制一些用于`escape`快捷方式的语法来切换构建结果面板。

将以下行添加到用户键绑定将完成部分技巧。正如之前的一些答案所报告的，该`hide_panel`命令将隐藏任何面板，再次按下它会显示 build_results。

```
{ 
    "keys": ["alt+b"], "command": "show_panel", "args": {"panel": "output.exec"},"context":
    [
        { "key": "panel_visible", "operator": "equal", "operand": false }
    ] 
},
{ 
    "keys": ["alt+b"], "command": "hide_panel", "args": {"panel": "output.exec"},"context":
    [
        { "key": "panel_visible", "operator": "equal", "operand": true }
    ] 
}, 
```

# arrays - 带有“ANY”的 PostgreSQL 查询不起作用

> ID：10674032
> 
> 赞同：34
> 
> 时间：2012-05-20T13:59:07.680
> 
> 标签：arrays, postgresql

```
SELECT "Ticket_id"  FROM "Tickets"
 WHERE "Status" = 1 AND ("Ticket_id" !=  ANY(array[1,2,3])) Limit 6 
```

结果是 1,2,3,4,5,6

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-20T17:33:59.177

你想用`ALL`，没有`ANY`。来自[精美手册](http://www.postgresql.org/docs/current/interactive/functions-comparisons.html#AEN18486)：

> **9.21.3。任何/一些（数组）**
> 
> ```
> expression operator ANY (array expression) 
> ```
> 
> ***[...] 使用给定的operator***计算左侧表达式并与数组的每个元素进行比较，这必须产生一个布尔结果。如果获得任何真结果，则结果`ANY`为“真”。

所以如果我们这样说：

```
1 != any(array[1,2]) 
```

那么我们会得到真实的，因为`(1 != 1) or (1 != 2)`它是真实的。`ANY`本质上是一个`OR`运算符。例如：

```
=> select id from (values (1),(2),(3)) as t(id) where id != any(array[1,2]);
 id 
----
  1
  2
  3
(3 rows) 
```

如果我们看一下[`ALL`，我们会看到](http://www.postgresql.org/docs/current/interactive/functions-comparisons.html#AEN18509)：

> **9.21.4。全部（数组）**
> 
> ```
> expression operator ALL (array expression) 
> ```
> 
> ***[...] 使用给定的operator***计算左侧表达式并与数组的每个元素进行比较，这必须产生一个布尔结果。如果所有比较结果为真，则结果`ALL`为“真”...

所以如果我们这样说：

```
1 != all(array[1,2]) 
```

然后我们会得到假因为`(1 != 1) and (1 != 2)`是假的，我们看到它`ALL`本质上是一个`AND`运算符。例如：

```
=> select id from (values (1),(2),(3)) as t(id) where id != all(array[1,2]);
 id 
----
  3
(1 row) 
```

如果要排除数组中的所有值，请使用`ALL`：

```
select "Ticket_id"
from "Tickets"
where "Status" = 1
  and "Ticket_id" != all(array[1,2,3])
limit 6 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T14:00:20.200

你的意思是：

```
"Ticked_id" NOT IN (1,2,3) 
```

# jquery - 在具有可变高度的固定页眉和页脚之间滚动内容

> ID：10674033
> 
> 赞同：0
> 
> 时间：2012-05-20T13:59:08.297
> 
> 标签：jquery, css

我有一个页眉和一个页脚，应该是`position: fixed`，
两者都有根据页面宽度改变高度的内容，我需要它们之间的内容是可滚动的，并且页眉和页脚不会覆盖它。
这是一个示例（问题）：http: [//jsfiddle.net/ilyaD/bNSZu/2/](http://jsfiddle.net/ilyaD/bNSZu/2/)
有什么解决方案的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:02:44.410

[**演示**](http://jsfiddle.net/bNSZu/5/)

使用`max-height`,`min-height`和 height 作为百分比。连同`overflow-y:auto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:03:37.670

您可以将 a 设置`max-height`为`#main`div 并将此样式添加到`#main`以触发滚动条

```
#main {
   overflow-y:auto; 
} 
```

[工作小提琴](http://jsfiddle.net/joycse06/bNSZu/4/)

# java - FontMetrics 设置字体？

> ID：10674035
> 
> 赞同：2
> 
> 时间：2012-05-20T13:59:18.210
> 
> 标签：java, swing, graphics, awt, fontmetrics

我正在制作一个程序，其中我需要在 FontMetrics 对象中设置字体。我之前已经创建了 fontmetrics，但现在我无法再访问 Graphics 对象了。然而，我想更改 FontMetrics 中的字体，即创建一个新的 FontMetrics，使用新的字体，但使用相同的图形上下文。

我可以使图形可用，但这会花费很多时间，而且这样做根本没有意义。有人知道更简单的方法吗？它看起来如此明显，它应该是一种方式，也许我只是错过了一些非常愚蠢的东西（我查看了文档但一无所获）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:13:17.503

可能最简单的方法是使用[`JComponent.getFontMetrics(Font)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getFontMetrics%28java.awt.Font%29). 此方法尊重*的*`JComponent`当前`FontRenderContext`（注意：`Component.getFontMetrics`不会尊重当前）。*`FontRenderContext`*

# javascript - jquery not() 没有按预期工作

> ID：10674037
> 
> 赞同：0
> 
> 时间：2012-05-20T13:59:46.803
> 
> 标签：javascript, jquery

```
<div class="row">
<img src="images/image.png" width="30" height="30" alt=""/>
<a href="#">View</a>
</div>

$(".row").not(".row a").click(function(){

             // irrelevant
        }) 
```

我不知道为什么这不起作用。单击“查看”时，我不想调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:38:52.370

这是你要找的吗？

```
$(".row").on('click',':not(a)', function(){
}); 
```

在除元素之外`'click'`的所有子元素上添加事件侦听器。`'.row'``'a'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:26:34.703

用这个：

```
 $(".row").click(function(){

 });

$('.row a').click(function(e){
      e.stopPropagation();   //this cancel the other events 
}); 
```

# php - 设置zend框架

> ID：10674038
> 
> 赞同：0
> 
> 时间：2012-05-20T13:59:58.437
> 
> 标签：php, zend-framework, netbeans

我正在尝试在我的 netbeans 上设置 Zend 框架。当我运行应用程序时，我收到以下错误：

```
Warning: require_once(Zend/Application.php) [function.require-once]: failed to open stream: No such file or directory in C:\Documents and Settings\maryb\Desktop\ZEND\ZendFrameworkQuickstart-20100208\public\index.php 
```

和以下错误：

```
Fatal error: require_once() [function.require]: Failed opening required 'Zend/Application.php' (include_path='C:\Documents and Settings\maryb\Desktop\ZEND\ZendFrameworkQuickstart-20100208\library;.;C:\xampp\php\PEAR') in C:\Documents and Settings\maryb\Desktop\ZEND\ZendFrameworkQuickstart-20100208\public\index.php on line 17 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:07:48.487

我认为您需要在所需路径中添加 Zend 库。查看`projectfolder/public/index.php`文件中的以下代码：

```
// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
))); 
```

# java - 使用 Spring、JPA 和 Hibernate 访问 Jboss 中配置的多个数据库/数据源

> ID：10674051
> 
> 赞同：3
> 
> 时间：2012-05-20T14:00:53.697
> 
> 标签：java, spring, hibernate, jpa, jboss

我有一个要求，我需要配置一个基于 Spring 的应用程序以使用两个数据库。我们有两个数据库，一个用于保存实时数据，另一个数据库用作数据仓库并包含存档数据（其结构与 Live db 完全相同）。

为简单起见，假设有搜索产品的请求。应用程序应该做的是在 Live 数据库中搜索产品详细信息，如果没有找到，它将检查存档数据库。

如果我需要配置这样的设置，我还需要配置数据源吗？搜索代码是否必须使用第一个数据源来检查实时数据库，如果没有找到，它将使用存档数据库运行另一个查询？

以上可能是可行的，但我想知道是否有更好的方法来做到这一点。例如，应用程序是否可以在单个数据源上工作，即使在后台它实际上与两个数据库一起工作？

该应用程序基于 Spring、JPA/Hibernate、SOAP 和 Mysql 数据库和 Jboss 7 作为应用程序服务器。

任何显示如何使用 Spring 和 Jboss 配置的示例都将非常有用。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T14:31:25.970

Spring 正是你想要的 - `AbstractRoutingDataSource`. 请参阅[此博客文章](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)了解如何使用它。在您的情况下，您需要在一个请求期间切换数据源，因此您需要有 2 个事务，通过更改数据源指示器在它们之间切换数据源`ThreadLocal`：

1.  对于这些 DAO，使用不同的包、类名或方法名来划分包装服务层
2.  通过注释向 Spring 指示服务层方法调用应该在它们自己的事务上下文中运行`@Transactional(propogation=Propogation.REQUIRES_NEW)`
3.  创建一个 Aspect（使用 AspectJ 注释`@Aspect`）以围绕服务层方法调用（使用`@Around`）`ThreadLocal`在方法调用之前设置值，并在之后取消设置它
4.  在 中`@Controller`，只需调用服务层方法。Aspect 将负责设置值以指示要使用的数据源，并且`AbstractRoutingDataSource`将在每个事务的上下文中使用该数据源。

# php - 如何处理 MYSQL & PHP 中的 DATE 类型？

> ID：10674052
> 
> 赞同：0
> 
> 时间：2012-05-20T14:01:02.930
> 
> 标签：php, mysql, sql, simpledateformat, date-formatting

我正在用 php 构建一个网站，并且在我的 MYSQL 表中使用 DATE 类型来存储日期。我遇到的问题是默认情况下以 YYYY-MM-DD 格式存储日期。但是我需要这种格式 DD-MM-YYYY 出现在我的 PHP 页面上，并且可以计算两个不同日期之间的天数。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:52:11.720

这是一种方法的示例：

```
$date_str = '2012-05-20'; //you get it from db
$date_now = strtotime($date_str);  //convert it to unix timestamp
$yesterday=$date_now-24*60*60;  //make calculations
echo 'yesterday was: '. date('d-m-Y',$yesterday);  //date() returns the date in format you need 
```

此处的进一步示例：[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:05:39.373

您可以使用[strtotime](http://php.net/manual/en/function.strtotime.php)将日期的字符串表示形式转换为 php 中的实际日期对象，然后使用[date](http://php.net/manual/en/function.date.php)函数将日期输出为您希望的任何字符串格式。此外，您可以`strtotime`执行日期计算。可以在[此博客文章](http://www.fayazmiraz.com/php-mysql-tutorial-how-to-use-mysql-date-correctly-in-php-date-function/)中找到更多信息。

```
$phpDate = strtotime($stringDateFromDb);
date('d-m-y', $dateFromDb);
strtotime('-3 days', strtotime($stringDateFromDb)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:05:59.590

那是显示问题。使用 mysql 的[`date_format()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数转换为您的显示要求，例如

```
SELECT date_format(datefield, '%d-%m-%Y'), ... 
```

# excel - 在 Excel 2007 中打印

> ID：10674058
> 
> 赞同：0
> 
> 时间：2012-05-20T14:01:34.180
> 
> 标签：excel, printing, ms-office

在工作中，我的任务是修复他们多年来一直使用的可怕电子表格。我正在寻找一种解决方案，允许我打印（双面打印，基本程序运行后的一段时间）相同的电子表格，但在打印下一个之前更新日期。如果这个项目是用 C 或 C++ 编写的，我可以处理它，但使用 Excel 表对我来说是不可能的。我一直在寻找几天的结束，无法得到任何工作。我不在乎什么特定的语言，我只是对 MS Office 编程一无所知。有什么建议么？

示例：电子表格在我正在寻找的伪代码中的工作簿 LCWB.XLS 中称为“LC”：

允许我选择 10 12 14 周的按钮或输入，并将该数字 * 7 存储在我们称为 X 的变量中以提供天数。

还将有“开始日期”存储在单元格“A1”中

日期被提供给程序以在每次迭代时更新日期，直到有 70 页的连续日期。

然后一个循环

while count <= X print excel worksheet LC update "date cell"="date cell" + 1

不需要保存任何东西，我希望这是有道理的，如果没有，我将上传部分实际工作表。我真的很想自己解决这个问题来学习，但我很困惑。就像我之前提到的，语言并不重要。Excel、VB、VC# 中的 VBA...运行它的计算机有 Win XP SP3 和 Office 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:59:59.887

如果工作表上除了日期没有变化，为什么还需要打印工作表？

我是一个打印提供商，并将其称为可变数据打印项目。就个人而言（知道设计软件），我会将所有日期放入 CSV 文件，然后将其余文档内容放入 InDesign。或者，您可以使用 M$ Word 的邮件合并功能......无论如何，文档中有一个字段（如套用信函），可以从 CSV 文件中提取日期。Word 或 InDesign 将生成多页文件供您打印，并在该字段所在的位置插入日期。

# google-app-engine - 寻址后端

> ID：10674065
> 
> 赞同：2
> 
> 时间：2012-05-20T14:02:32.510
> 
> 标签：google-app-engine, backend

Google 在[Addressing Backends 章节](https://developers.google.com/appengine/docs/java/backends/overview#Addressing_Backends)中表示，App Engine 不会按编号定位实例，而是选择后端的第一个可用实例。这让我想知道——“第一个可用实例”是什么？它是实例#1，还是被其他一些方法挑选出来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T00:18:15.577

其具体行为取决于您的实例是动态的还是常驻的。

对于动态实例，请求转到可以立即处理请求的第一个实例。如果没有实例可以立即处理请求，则请求排队或启动新实例，具体取决于排队设置。

对于常驻实例，请求被发送到负载最少的后端实例。

不同行为的原因是为了充分利用您的实例：驻留实例仍然存在，因此它们被平等利用，而动态实例仅在需要时生成，因此调度程序会尽量避免启动新实例能够。

# android - 廉价的 Android 7' 平板电脑 (800x480)：宽高比错误，圆圈看起来像省略号

> ID：10674070
> 
> 赞同：5
> 
> 时间：2012-05-20T14:02:58.157
> 
> 标签：android, geometry, aspect-ratio, ellipsis

我需要很多 Android 平板电脑来转售我的应用程序。我从互联网上买了一些（便宜的中国产品），但所有 7' 800x480 平板电脑都显示圆形为省略号（正方形为矩形），一切都被拉伸了......

有些是 Android 2.3.3，有些是 Android 4.0，但它们都显示了拉伸的 UI。

有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:23:37.023

在更新了一些新版本并更改了`sysconfig1.lhs`. 我所做的测试是在 Allwinner A10 平板电脑上进行的，特别是运行 Android 4.0.4 的 M703 型号。请注意，有许多设备具有相同（或相似）的硬件配置但名称不同。

我深入`sysconfig1.lhs`研究了系统映像中包含的内容，其中包含以下几行：

```
lcd_x = 800
lcd_y = 480 
```

以及对应的触摸屏数值：

```
ctp_screen_max_x = 800
ctp_screen_max_y = 480 
```

我测量了屏幕，看起来与塞拉芬的测量结果相同：155×86mm。为此，我尝试将这些值更改为 864×480 或 800×444。

不幸的是，这两种选择都没有解决问题。

864×480 只是截取了显示的 64 像素部分。

![照片864×480](../Images/1a1af57841cc46d0585c3af2eea49784.png) ![864×480的屏幕截图](../Images/c294de57e02cbebf2502a3506c9f4042.png)

800×444 使 SystemUI 崩溃（因为它不再符合条件`sw480dp`，因此预期该设备是手机）并留下 36 像素的间隙。

![照片800×444](../Images/324b66eae4dc5e7a40c2610e76f16036.png) ![800×444的屏幕截图](../Images/bedcc6cdd19d17266ae914ca417fa933.png)

也许屏幕分辨率需要在其他地方设置，但我相信是硬件配置错误。

还有很多其他的行`sysconfig1.lhs`对我来说毫无意义，例如：

```
lcd_dclk_freq            = 33
lcd_if                   = 0
lcd_hbp                  = 46
lcd_ht                   = 1055
lcd_vbp                  = 23
lcd_vt                   = 1050 
```

也许有一些改变像素比例的方法，但我还没有尝试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:13:10.350

它们可能是：

1.  屏幕物理尺寸与分辨率纵横比不匹配。屏幕的物理尺寸（宽度和高度）是多少？
2.  具有非方形物理像素

如果是其中任何一种情况，除非您可以进行一些严重的黑客攻击并更改分辨率，否则您无能为力。恐怕你得到你付出的代价。

# php - 在 PHP 中使用 curl 绕过验证码

> ID：10674078
> 
> 赞同：5
> 
> 时间：2012-05-20T14:04:43.163
> 
> 标签：php, session, cookies, curl, captcha

我正在尝试在验证码保护页面上自动化登录进度。我正在使用 Death By Captcha 将图像转换为文本，它似乎运行良好。我正在使用 curl 加载登录页面，检索验证码图像 url，将其发送到 DBC，取回文本并使用验证码文本向登录页面提交 POST 请求。

我遇到的问题是当我提交发布请求时验证码图像会发生变化。由于在通过浏览器重新加载/或错误提交表单时我没有得到相同的行为（我一遍又一遍地得到相同的图像），我假设问题与 cookie 或我的其他东西有关缺少与会话有关的内容。

这是我用来检索数据和提交表单的代码：

```
$ch = curl_init();  
// Not sure that I need it, just make sure that the session doesn't change...   
curl_setopt($ch, CURLOPT_COOKIESESSION, false);
curl_setopt($ch, CURLOPT_URL, $loginUrl);
// It seems that PHPSESSID cookie parameter might be the parameter that keep the image the same, but it didn't work. I even read it dynamically from the cookie file but it still didn't work
//curl_setopt($ch, CURLOPT_COOKIE, "PHPSESSID=2bp3nhkp3bgftfrr1rjekg03o2");
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookieName);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookieName);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, $loginUrl);
$result = curl_exec($ch);

// Resolve the captcha and append it to the post parameters
$captchaText = $this->resolveCaptcha($result);
$postData .= '&LoginForm%5BverifyCode%5D='.$captchaText;

// Resubmit the form with the updated form data
curl_setopt($ch, CURLOPT_REFERER, $loginUrl);           
curl_setopt($ch, CURLOPT_URL, $loginUrl);
curl_setopt ($ch, CURLOPT_POST, 1); //FIXED
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postData);           
$result = curl_exec($ch); 
```

当我打印最终结果时，我可以看到验证码文本已成功提交，但图像本身已更改......

我还附上了在标准 Firefox 会话中使用 Tamper 捕获的请求参数的屏幕截图（因此如果我遗漏了什么，有人可能会发现）。

![浏览器请求参数](../Images/edfe338e4ae29f7ac101096686b98aeb.png)

PHP/curl 提交代码完全适用于非基于验证码的网站，因此 POST 参数提交似乎正在工作。

可能是我在这里遗漏了一些非常基本的东西，任何帮助将不胜感激。

我还查看了这些帖子，但找不到我正在寻找的答案。

[CURL 如何使用验证码和会话登录](https://stackoverflow.com/questions/5800918/how-curl-login-with-captcha-and-session)

[如何使用 PHP cURL 检索验证码并保存会话？](https://stackoverflow.com/questions/2527729/how-to-retrieve-captcha-and-save-session-with-php-curl)

[https://stackoverflow.com/questions/8633282/curl-to-download-a-captcha-and-submit-it](https://stackoverflow.com/questions/8633282/curl-to-download-a-captcha-and-submit-it)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:15:47.313

你正在使用

```
curl_setopt ($ch, CURLOPT_POST, 0); 
```

在第二个 curl_exec 中。不应该

```
curl_setopt ($ch, CURLOPT_POST, 1); 
```

?

# javascript - DOMNodeInserted 事件循环

> ID：10674079
> 
> 赞同：1
> 
> 时间：2012-05-20T14:04:46.763
> 
> 标签：javascript, jquery, dom, google-chrome-extension, mutation-events

我正在为 facebook 开发一个 chrome 扩展（我的第四个问题左右......），它在“like”按钮旁边添加了一个自定义按钮。由于帖子会自动添加到新闻提要中而无需刷新页面，因此每次添加新帖子时我都必须添加脚本。

我使用`DOMNodeInserted`事件。

问题是当事件被调用时，我在页面中插入了一个新元素（按钮），它会产生一个循环！

我的脚本：

```
$(document).bind('DOMNodeInserted', function(event) {
    $(".like_link").after('<span class="dot"> · </span><button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}"><span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span></button>');
    $(".taheles_saving_message").hide();
}); 
```

[你可以在这里](https://stackoverflow.com/questions/10667935/add-an-element-when-domnodeinserted-event-called/10667964)看到我之前的问题

我厌倦了提问，所以我非常感谢任何回答/评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:33:45.200

这行得通吗？如果您不再插入任何`.like_link`元素，那么当您的元素插入发生时，这应该是一个无操作，因为它只查找包含 a 的节点插入 `.like_link`。

```
$(document).bind('DOMNodeInserted', function(event) {
    $(event.target).find(".like_link").after(
        '<span class="dot"> · </span>' +
        '<button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}">' +
            '<span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span>' +
        '</button>'
    );
    $(event.target).find(".taheles_saving_message").hide();
}); 
```

# c++ - 这段代码是线程安全的吗？

> ID：10674080
> 
> 赞同：0
> 
> 时间：2012-05-20T14:05:00.870
> 
> 标签：c++, multithreading, thread-safety, mutex

我正在重构一些耗时的函数，以便可以从线程调用它，但是我无法解决这个问题（对线程编程不太熟悉）。

在任何时候，用户都可以取消并且该功能将停止。我不想在用户取消后立即终止线程，因为它可能会导致一些数据完整性问题。相反，在函数的几个地方，我会检查函数是否已被取消，如果是，则退出。我只会在我知道可以安全退出的情况下这样做。

该函数的整个代码将在一个互斥体中。这是我想到的伪代码：

```
SomeClass::SomeClass() {
    cancelled_ = false;
}

void SomeClass::cancelBigSearch() {
    cancelled_ = true;
}

void SomeClass::bigSearch() {
    mutex.lock();

    // ...
    // Some code
    // ...

    // Safe to exit at this point
    if (cancelled_) {
        mutex.unlock();
        cancelled_ = false;
        return;
    } 

    // ...
    // Some more code
    // ...

    if (cancelled_) {
        mutex.unlock();
        cancelled_ = false;
        return;
    }   

    // ...
    // Again more code
    // ...

    if (cancelled_) {
        mutex.unlock();
        cancelled_ = false;
        return;
    }   

    mutex.unlock();
} 
```

因此，当用户开始搜索时，一个新线程会调用`bigSearch()`. 如果用户取消，`cancelBigSearch()`则调用并`cancelled_`设置一个标志。然后，当`bigSearch()`到达可以安全退出的点时，它将退出。

知道这是否都是线程安全的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:29:13.030

您应该使用另一个互斥锁锁定访问权限`cancelled_`，因此检查和设置不会同时发生。除此之外，我认为您的方法还可以

更新：另外，请确保不会抛出异常`SomeClass::bigSearch()`，否则互斥锁可能会保持锁定状态。为确保所有返回路径解锁互斥锁，您可能希望将代码的处理部分包围起来，`if (!cancelled_)`并仅在方法的最后返回（您`unlock()`对互斥锁进行了一次调用）。

更好的是，将互斥锁包装在 RAII（*Resource Allocation Is Initialization*的首字母缩写词）对象中，因此无论函数如何结束（异常或其他），互斥锁都可以保证被解锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:46:32.440

是的，这是线程安全的。但：

1.  处理器可以有单独的缓存和缓存它自己的副本`cancelled_`，通常互斥同步函数应用适当的缓存同步。
2.  编译器生成的代码，可能会对您的数据局部性做出无效假设，这可能导致无法及时更新`cancelled_`。一些特定于平台的命令可以在这里提供帮助，或者您可以简单地使用其他机制。

所有这些都会导致线程没有按您的意愿及时取消。

您的代码使用模式是简单的“信号”。所以你需要将信号传输到线程。信号模式允许多次触发相同的触发（信号），并在以后清除它。

这可以使用以下方法进行模拟：

*   原子操作
*   互斥保护变量
*   信号同步原语

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T23:46:16.190

它**不是**线程安全的，因为一个线程可以`cancelled_`同时读取另一个线程写入它，这是一个数据竞争，这是未定义的行为。

正如其他人所建议的那样，要么使用原子类型，要么使用`cancelled_`另一个互斥锁来保护它。

您还应该使用 RAII 类型来锁定互斥锁。

例如

```
void SomeClass::cancelBigSearch() {
  std::lock_guard<std::mutex> lock(cxlMutex_);
  cancelled_ = true;
}

bool SomeClass::cancelled() {
  std::lock_guard<std::mutex> lock(cxlMutex_);
  if (cancelled_) {
    // reset to false, to avoid caller having to lock mutex again to reset it
    cancelled_ = false;
    return true;
  }
  return false;
}

void SomeClass::bigSearch() {
  std::lock_guard<std::mutex> lock(mutex);

  // ...
  // Some code
  // ...

  // Safe to exit at this point
  if (cancelled())
    return;

  // ...
  // Some more code
  // ...

  if (cancelled())
    return;

  // ...
  // Again more code
  // ...

  if (cancelled())
    return;
} 
```

# android - 构建android开源项目

> ID：10674081
> 
> 赞同：-2
> 
> 时间：2012-05-20T14:05:05.533
> 
> 标签：android

我尝试构建 FBReader 项目（http://code.google.com/p/fbreaderplus/source/checkout）。如何添加 README.build 中描述的库？当我用 cygwin 制作项目时收到这样的消息：

```
make[2]: Entering directory `/cygdrive/c/Users/Argentum/Desktop/fbreader/zlibrar
y/text/src/model'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/cygdrive/c/Users/Argentum/Desktop/fbreader/zlibrary
/text/src/model'
make[2]: Entering directory `/cygdrive/c/Users/Argentum/Desktop/fbreader/zlibrar
y/text/src/area'
Compiling ZLTextParagraphBuilder.o ...In file included from ZLTextParagraphBuild
er.cpp:30:0:
ZLTextParagraphBuilder.h:26:29: fatal error: fribidi/fribidi.h: No such file or
directory
compilation terminated.
/cygdrive/c/Users/Argentum/Desktop/fbreader/zlibrary/text/../../makefiles/subdir
.mk:14: recipe for target `ZLTextParagraphBuilder.o' failed
make[2]: *** [ZLTextParagraphBuilder.o] Error 1
make[2]: Leaving directory `/cygdrive/c/Users/Argentum/Desktop/fbreader/zlibrary
/text/src/area'
Makefile:25: recipe for target `.objects' failed
make[1]: *** [.objects] Error 1
make[1]: Leaving directory `/cygdrive/c/Users/Argentum/Desktop/fbreader/zlibrary
/text'
Makefile:9: recipe for target `all' failed
make: *** [all] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:25:28.767

这个错误`ZLTextParagraphBuilder.h:26:29: fatal error: fribidi/fribidi.h: No such file or directory`告诉你它缺少 fribidi，[http: //www.fribidi.org/](http://www.fribidi.org/)

我不知道你怎么能通过配置阶段——它不应该检查库的存在吗？

无论如何安装 fribidi 并重试。

高温高压

# css - 左栏不是 100% 高度

> ID：10674083
> 
> 赞同：0
> 
> 时间：2012-05-20T14:05:21.400
> 
> 标签：css, css-float, html

我有一个绿色背景，应该沿着左栏的整个长度向下，直到页脚上方。我将所有相应的 div 设置为 100% 高度，但它停止了。

```
html, body { height: 100%; }

div#page-wrap {
  width:960px;
  height:100%;
  margin:0 auto;
  padding-bottom:10px;
}

div#body-wrapper {
   height:100%;
   position:relative;
}

nav#side-navigation {
   height:100%;
   width:185px;
   background-color:#C2F4C2;
   float:left;
}

div#content-wrap {
   width:775px;
   height:100%;
   float:right;
   position:relative;
   background:transparent url(../images/global/column_corner.gif) no-repeat top left;
} 
```

这是网站代码： http: [//freshbaby.com/v20/about_us/index.cfm](http://freshbaby.com/v20/about_us/index.cfm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:16:47.367

您可以使用“假列”，其中背景是列的容器元素中的垂直平铺背景图像。( `div#page-wrap`) 只要您的列的宽度是固定的，它就可以很好地工作:)

阅读[这篇文章](http://www.alistapart.com/articles/fauxcolumns/)了解更多详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:28:53.890

我发现这篇文章成功了：http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

# rest - 在我的情况下，哪个代理最适合 sencha touch 2？

> ID：10674084
> 
> 赞同：2
> 
> 时间：2012-05-20T14:05:30.737
> 
> 标签：rest, sencha-touch, sencha-touch-2

我想用 sencha touch2 构建一个本机应用程序，
但是我对 sencha touch 代理有点困惑
在我的应用程序中，我需要获取远程服务器数据，注册新用户，更新数据。
那么哪种代理最适合我的情况？Ajax、REST 还是 JSONP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T16:44:58.560

首先，请确保您`Ext.data.proxy.Rest`通过其文档详细信息充分了解：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest)

`Ext.data.proxy.Rest`是一个子类，`Ext.data.proxy.Ajax`所以这意味着你所做的一切实际上都会转化为一个`Ajax`请求。如果您的服务器端设计完全遵循 REST 模式，那么使用 REST 代理是理想的选择。但是，如果您的后端系统没有 URL 模式约定，您应该简单地使用 Ajax。事实上，在这种情况下，您仍然可以使用 REST，但您必须覆盖`buildUrl`与纯 Ajax 代理相比效率不高的方法。

`Ajax`并且`JSONP`对于同域或跨域策略基本不同。Ajax 用于同域请求，JSONP 用于跨域请求。

# jquery - 我将如何缩短这个 jQuery？

> ID：10674089
> 
> 赞同：3
> 
> 时间：2012-05-20T14:05:58.030
> 
> 标签：jquery

我对 jQuery 很陌生，所以请温柔一点。

我在网上找到了两篇文章：

1.  使用 jQuery 为翻转精灵添加淡入/淡出：http: [//css-tricks.com/fade-image-within-sprite/](http://css-tricks.com/fade-image-within-sprite/) （方式三：旧版支持版本）

2.  [使用 jQuery 动画悬停](http://www.incg.nl/blog/2008/hover-block-jquery/)

我已经使用了这两个示例并设法使它们一起工作：

[http://www.marccohen.co.uk/dev/menu_example.htm](http://www.marccohen.co.uk/dev/menu_example.htm)

一个列表中的翻转淡入淡出精灵也会触发另一个列表中的动画悬停，反之亦然。问题是我得到的 jQuery '非常'长而且对这个很新，我不知道如何缩短它：

```
$(function() {
$(".menuicon1")
.find("span")
.hide()
.end()
.hover(function() {
    $(this).find("span").stop(true, true).fadeIn({duration:300});
    $('ul.hover_block li.slide1').find('img').animate({top:'192px'},{queue:false,duration:150});
}, function() {
    $(this).find("span").stop(true, true).fadeOut({duration:300});
    $('ul.hover_block li.slide1').find('img').animate({top:'276px'},{queue:false,duration:150});
});
$(".menuicon2")
.find("span")
.hide()
.end()
.hover(function() {
    $(this).find("span").stop(true, true).fadeIn({duration:300});
    $('ul.hover_block li.slide2').find('img').animate({top:'192px'},{queue:false,duration:150});
}, function() {
    $(this).find("span").stop(true, true).fadeOut({duration:300});
    $('ul.hover_block li.slide2').find('img').animate({top:'276px'},{queue:false,duration:150});
});
$(".menuicon3")
.find("span")
.hide()
.end()
.hover(function() {
    $(this).find("span").stop(true, true).fadeIn({duration:300});
    $('ul.hover_block li.slide3').find('img').animate({top:'192px'},{queue:false,duration:150});
}, function() {
    $(this).find("span").stop(true, true).fadeOut({duration:300});
    $('ul.hover_block li.slide3').find('img').animate({top:'276px'},{queue:false,duration:150});
}); 
$(".menuicon4")
.find("span")
.hide()
.end()
.hover(function() {
    $(this).find("span").stop(true, true).fadeIn({duration:300});
    $('ul.hover_block li.slide4').find('img').animate({top:'192px'},{queue:false,duration:150});
}, function() {
    $(this).find("span").stop(true, true).fadeOut({duration:300});
    $('ul.hover_block li.slide4').find('img').animate({top:'276px'},{queue:false,duration:150});
}); 
$(".menuicon5")
.find("span")
.hide()
.end()
.hover(function() {
    $(this).find("span").stop(true, true).fadeIn({duration:300});
    $('ul.hover_block li.slide5').find('img').animate({top:'192px'},{queue:false,duration:150});
}, function() {
    $(this).find("span").stop(true, true).fadeOut({duration:300});
    $('ul.hover_block li.slide5').find('img').animate({top:'276px'},{queue:false,duration:150});
}); 
    $('ul.hover_block li.slide1').hover(function(){
    $(this).find('img').animate({top:'192px'},{queue:false,duration:150});
    $('.menuicon1').find("span").stop(true, true).fadeIn({duration:300});
}, function(){
    $(this).find('img').animate({top:'276px'},{queue:false,duration:150});
    $('.menuicon1').find("span").stop(true, true).fadeOut({duration:300});
});
    $('ul.hover_block li.slide2').hover(function(){
    $(this).find('img').animate({top:'192px'},{queue:false,duration:150});
    $('.menuicon2').find("span").stop(true, true).fadeIn({duration:300});
}, function(){
    $(this).find('img').animate({top:'276px'},{queue:false,duration:150});
    $('.menuicon2').find("span").stop(true, true).fadeOut({duration:300});
});         
    $('ul.hover_block li.slide3').hover(function(){
    $(this).find('img').animate({top:'192px'},{queue:false,duration:150});
    $('.menuicon3').find("span").stop(true, true).fadeIn({duration:300});
}, function(){
    $(this).find('img').animate({top:'276px'},{queue:false,duration:150});
    $('.menuicon3').find("span").stop(true, true).fadeOut({duration:300});
});             
    $('ul.hover_block li.slide4').hover(function(){
    $(this).find('img').animate({top:'192px'},{queue:false,duration:150});
    $('.menuicon4').find("span").stop(true, true).fadeIn({duration:300});
}, function(){
    $(this).find('img').animate({top:'276px'},{queue:false,duration:150});
    $('.menuicon4').find("span").stop(true, true).fadeOut({duration:300});
});             
    $('ul.hover_block li.slide5').hover(function(){
    $(this).find('img').animate({top:'192px'},{queue:false,duration:150});
    $('.menuicon5').find("span").stop(true, true).fadeIn({duration:300});
}, function(){
    $(this).find('img').animate({top:'276px'},{queue:false,duration:150});
    $('.menuicon5').find("span").stop(true, true).fadeOut({duration:300});
});                                 
}); 
```

真的很感谢任何建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:49:41.197

正如@Dave-Newton 已经正确提到的那样，为了缩短任何重复代码，您必须**识别**一遍又一遍重复的部分和**唯一**的部分。

在您的情况下（据我所知）有两个主要的代码块。

```
$(".menuicon1")
  .find("span")
  .hide()
  .end()
  .hover(function() {
    $(this)
      .find("span")
      .stop(true, true)
      .fadeIn({ duration: 300 });
    $('ul.hover_block li.slide1')
      .find('img')
      .animate({ top: '192px' },{ queue:false, duration: 150 });
  }, function() {
    $(this)
      .find("span")
      .stop(true, true)
      .fadeOut({ duration: 300 });
    $('ul.hover_block li.slide1')
      .find('img')
      .animate({ top: '276px' },{ queue: false, duration: 150 });
  }); 
```

显然，每次调用中只有 css 类的数字后缀不同。因此，您可以简单地创建一个接受数字输入并将其添加到动态部分的函数：

```
function createBlockHover(blockNumber) {
  $(".menuicon" + blockNumber)
    .find("span")
    .hide()
    .end()
    .hover(function() {
      $(this)
        .find("span")
        .stop(true, true)
        .fadeIn({ duration: 300 });
      $('ul.hover_block li.slide' + blockNumber)
        .find('img')
        .animate({ top: '192px' },{ queue:false, duration: 150 });
    }, function() {
      $(this)
        .find("span")
        .stop(true, true)
        .fadeOut({ duration: 300 });
      $('ul.hover_block li.slide' + blockNumber)
        .find('img')
        .animate({ top: '276px' },{ queue: false, duration: 150 });
    });
} 
```

之后，您仍然可以减少悬停调用中的过程，就像动画和淡入淡出一样。顶部和淡入淡出方向（入/出）在此处有所不同：

```
function fadeBlocks(blockNumber, fadeIn, top) {
  // fade the first block
  $('.menuicon' + blockNumber)
    .find("span")
    .stop(true, true)
    [fadeIn ? 'fadeIn' : 'fadeOut']({ 
      duration: 300 
    });

  // move the second
  $('ul.hover_block li.slide' + blockNumber)
    .find('img')
    .animate({ top: top + 'px' }, { queue: false, duration: 150 })
}

function createBlockHover(blockNumber) {
  $(".menuicon" + blockNumber)
    .find("span")
    .hide()
    .end()
    .hover(function() {
      fadeBlocks(blockNumber, true, 192);
    }, function() {
      fadeBlocks(blockNumber, false, 276);
    });
} 
```

我希望能稍微展示一下这个过程，这样你就会知道如何处理代码的后半部分。

[有关更多信息，请查看DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)代码的原理。

# python - 在具有不同变量的循环中创建实例

> ID：10674093
> 
> 赞同：4
> 
> 时间：2012-05-20T14:06:27.047
> 
> 标签：python

我想在循环中创建类实例。所有实例都需要分配给不同的变量。这些变量可以是一系列字母，例如 [a,b,c]。

```
class MyClass(object):
    pass

for i in something:
    #create an instance 
```

如果循环转了 3 次，我希望循环做出这样的事情：

```
a = MyClass()
b = MyClass()
c = MyClass() 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T14:30:16.823

以这种方式使用自变量名称有点奇怪。如上所示，使用字典或列表似乎更好。

把它从中间分开，怎么样

```
a,b,c = (MyClass() for _ in range(3)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:12:06.217

您可以使用`exec`. 另请参阅[在 Python 中修改本地变量](https://stackoverflow.com/questions/1450275/modifying-locals-in-python)

```
>>> class Foo(object): pass
... 
>>> for name in "abc":
...     exec "{0} = Foo()".format(name)
... 
>>> a
<__main__.Foo object at 0x10046a310>
>>> b
<__main__.Foo object at 0x10046a390>
>>> c
<__main__.Foo object at 0x10046a3d0> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T14:12:04.333

您可以创建一个包含所有实例的列表。例如：

```
instances = [MyClass() for i in range(0, N)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T14:12:10.903

不容易，做这样的事情通常是个坏主意。其他人可以详细说明原因，因为我不太清楚。

你可能会做的是

```
class MyClass(object):
    pass

list_of_insts = []
for i in something:
    #create an instance
    lists_of_insts.append(MyClass()) 
```

然后您可以在该列表中按位置引用每个：`lists_of_insts[0]`. 您还可以将它们分配给 a`dict`而不是列表，以便于访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T14:12:40.740

您可以有一个要命名对象的名称列表，然后在循环中，在创建和命名对象时将名称添加到全局命名空间。

```
list_of_names = ['a', 'b', 'c', 'd']
for name in list_of_names:
    globals()[name] = your_object() 
```

这里的人肯定会说这是一种不好的编码方式，没有给出任何令人信服的理由，但它直接解决了你的问题，没有任何进一步的列表或字典。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T14:12:12.590

将这些变量存储在字典中怎么样？像

```
variables = {}
varnames = ['a', 'b', 'c']
for i, something in enumerate(things):
    variables[varnames[i]] = MyClass() 
```

# twitter - 存储 Twitter 个人资料图片的最佳做法是什么

> ID：10674099
> 
> 赞同：1
> 
> 时间：2012-05-20T14:07:19.953
> 
> 标签：twitter, avatars

[GET users/profile_image/:screen_name](https://dev.twitter.com/docs/api/1/get/users/profile_image/%3ascreen_name)的 Twitter API 文档指出：

> 此方法仅应由应用程序开发人员用于查找或检查用户的个人资料图像 URL。此方法**不得**用作呈现给应用程序用户的图像源 URL。

此 API 调用返回一个 302 重定向到个人资料图片网址。使这些图像可用于某个应用程序的最佳做法是什么？看起来最简单的方法是使用生成的 url 字符串并将其嵌入到应用程序的 html 代码中（例如，在 img 标签的 src 中）。另一种方法是将图像本地存储为文件或 blob 字段。

是链接“不得”所涵盖的图像，还是意味着您不应调用 API，但您可以使用生成的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:14:14.100

过去，我只是将 URL 存储在数据库中，然后在需要呈现图像时重复使用该 url。

下拉和存储图像更加复杂，并且增加了访问应用程序上存储图像的依赖项。

我还建议您定期*重新获取*图片网址，因为用户有时会更改他们的个人资料图片。

推特 API 指出：

> 最终用户通过 Connect with Twitter 进行身份验证后，您必须清楚地显示最终用户的 Twitter 身份。Twitter 身份包括终端用户头像、Twitter 用户名和 Twitter“鸟”标记的可见显示。在您的服务上显示最终用户的关注者必须清楚地表明该关系与 Twitter 服务相关联。

# c# - 如何正确处理此代码？

> ID：10674102
> 
> 赞同：2
> 
> 时间：2012-05-20T14:08:08.427
> 
> 标签：c#, dispose, idisposable

我有一个相当大的项目，我尽量保持干净整洁。当我在 Visual Studio 中运行代码分析器时，我得到一个我觉得很烦人的可靠性错误。我真的很想学习如何解决它。这是我正在做的一个简化示例。

这是警告。

*警告 1 CA2000：Microsoft.Reliability：在方法“MyExampleClassForStackOverflow.AddFeed(string)”中，在对对象“new FeedClassExamle()”的所有引用超出范围之前调用 System.IDisposable.Dispose。*

这是我的示例代码：

```
class MyExampleClassForStackOverflow : IDisposable
{
    public ConcurrentDictionary<string, FeedClassExamle> Feeds { get; set; }

    public void AddFeed(string id)
    {
        //The warning is coming from this code block.
        //In the full code, the feed classes collects data on a specific 
        //interval and feeds them back using events.
        //I have a bunch of them and they need to be accessible so I 
        //store them in dictionaries using keys to effeciently find them.
        Feeds.TryAdd(id, new FeedClassExamle());
        Feeds[id].Start();
    }
    public void Dispose()
    {
        foreach (var item in Feeds)
            item.Value.Dispose();
    }
}

class FeedClassExamle : IDisposable
{
    public void Start()
    {

    }
    public void Dispose()
    {

    }
} 
```

为了测试代码，请使用：

```
using (var example = new MyExampleClassForStackOverflow())
{

} 
```

任何建议都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:20:53.647

如果 TryAdd 失败，该对象不会被 Disposed，因此请尝试显式执行此操作：

```
public void AddFeed(string id)
{
    FeedClassExample fce = new FeedClassExamle();
    if (!Feeds.TryAdd(id, fce))
    {
        fce.Dispose();
    } 
    Feeds[id].Start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:47:30.513

存在警告是因为代码分析工具无法确定对象是否会被正确处理。根据您的代码编写方式，该对象实际上不会被正确处理，但修复代码可能不会消除警告。

从根本上说，需要为每个`AddFeed`方法确保某些东西会调用它创建`Dispose`的每个`FeedClassExample`实例。最好的方法是避免创建一个`FeedClassExample`实例，如果一个实例已经存在于当前 ID 下的字典中。如果做不到这一点，该`AddFeed`方法应该处理`FeedClassExample`它创建的任何内容，但随后决定不存储在字典中，或者与字典中的那个交换（我不确定哪些方法`ConcurrentDictionary`支持这样做），然后`Dispose`是旧的一。基本要求是，在实际执行之外的任何时候，字典都将保存所有已创建但未销毁`AddFeed`的实例。`FeedClassExample`

It may be informative to add a destructor in your `FeedClassExample` class which does nothing except log a message. If you are calling `Dispose` on that class correctly, the destructor will never execute. If you fail to call `Dispose`, it will. Thus, if the destructor ever executes, you can know you're doing something wrong.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:36:34.917

仅在需要添加时才创建实例：

```
if (!Feeds.ContainsKey(id)) {
  Feeds.GetOrAdd(id, new FeedClassExamle());
} 
```

# sql-server-2008 - 在 tsql 中执行命令

> ID：10674104
> 
> 赞同：1
> 
> 时间：2012-05-20T14:08:17.843
> 
> 标签：sql-server-2008, xp-cmdshell

我怎样才能执行系统`dir`命令`xp_cmdshell`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:32:57.303

我没有看到任何问题，这里有一个例子：

*dstest*是一个远程服务器...

![在此处输入图像描述](../Images/c10106f9b7e1364a29404cac95712f98.png)

## 编辑

运行这个来激活：

```
EXEC sp_configure 'show advanced options', 1
GO
-- To update the currently configured value for advanced options.
RECONFIGURE
GO
-- To enable the feature.
EXEC sp_configure 'xp_cmdshell', 1
GO
-- To update the currently configured value for this feature.
RECONFIGURE
GO 
```

# mysql - mysql在一个表中汇总多组数据

> ID：10674110
> 
> 赞同：0
> 
> 时间：2012-05-20T14:09:56.393
> 
> 标签：mysql, group-by, sum

**编辑：我想我找到了解决方案，但我仍然想知道是否有人有更好的方法来做到这一点。添加“GROUP BY name”会产生正确的输出。**

我有一张这样的桌子：

```
Name    StartDate             EndDate
name0   2012-05-18 20:00:00   2012-05-18 20:00:01
name1   2012-05-18 20:00:00   2012-05-18 20:00:05
name0   2012-05-18 20:00:00   2012-05-18 20:00:01
name3   2012-05-18 20:00:00   2012-05-18 20:00:03
name4   2012-05-18 20:00:00   2012-05-18 20:00:07
name3   2012-05-18 20:00:00   2012-05-18 20:00:03
name8   2012-05-18 20:00:00   2012-05-18 20:00:12
name5   2012-05-18 20:00:00   2012-05-18 20:00:11
name1   2012-05-18 20:00:00   2012-05-18 20:00:05 
```

我正在尝试学习如何做两件事：

1) 列出不同的名称及其行数和总运行时间的总和

```
Name    Count   TotalRunTime
name0   2       2
name1   2       10
name3   2       6
name4   1       7
name5   1       11
name8   1       12 
```

我创建了以下查询来尝试同时执行这两项操作。它适用于单个名称，但我不知道如何使其“迭代”表中不同名称的列表。

```
SELECT
  Name,
  SUM(TIME_TO_SEC(TIMEDIFF(enddate,startdate))) TotalRunTime,
  COUNT(*) as TotalJobs
FROM results
WHERE name='name0'; 
```

产生：

```
+-------+-------------+-----------+
| Name  |TotalRunTime | TotalJobs |
+-------+-------------+-----------+
| name0 |     1023491 |        46 |
+-------+-------------+-----------+
1 row in set (0.00 sec) 
```

但我想要的是：

```
+-------+-------------+-----------+
| Name  |TotalRunTime | TotalJobs |
+-------+-------------+-----------+
| name0 |     1023491 |        46 |
| name1 |      971621 |        35 |
| name3 |      108843 |        22 |
| ...   |         ... |       ... |
+-------+-------------+-----------+
<N> rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:20:01.477

按名称字段分组是最好的解决方案：

```
SELECT
  Name,
  SUM(TIME_TO_SEC(TIMEDIFF(enddate,startdate))) TotalRunTime,
  COUNT(*) as TotalJobs
FROM results
WHERE name='name0'
GROUP BY Name; 
```

# r - R：使用遗传编程找到函数最小值

> ID：10674115
> 
> 赞同：1
> 
> 时间：2012-05-20T14:10:12.247
> 
> 标签：r, genetic-algorithm, genetic-programming

我目前正在使用[RGP](https://rsymbolic.org/projects/rgp/ "RGP")作为遗传编程库。如果有人对另一个库有想法（更好的文档，更积极的开发等），我想听听你的建议。

问题相当简单：给定 R 中具有 n 个参数的函数，我如何使用遗传编程找到全局最小值。我尝试修改其中一个[示例程序](https://rsymbolic.org/projects/rgp/wiki/Getting_Started "示例程序")，但似乎这个示例使用了线性回归，我认为这不适合我的情况。

有人有我可以使用的示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:03:45.110

我可以推荐使用[HeuristicLab](http://dev.heuristiclab.com)。实现了一些算法：遗传算法、进化策略、模拟退火、粒子群优化等，如果您正在研究实值函数的最小化，这些可能会很有趣。该软件用 C# 实现并在 Windows 上运行。它提供了一个 GUI，您可以在其中优化几个提供的测试功能（Rosenbrock、Schaffer、Ackley 等）。还有一个非常好的遗传编程 (GP) 实现，但从我的印象来看，你不需要 GP。在遗传编程中，您可以根据未知函数的输出数据进化出一个函数。我认为在你的情况下，函数是已知的，你需要找到那些最小化函数输出的参数。

该软件的最新主要版本于 2010 年向公众发布，此后在几个次要版本中得到了进一步开发。我们现在每年大约发布两次。有一个 google 小组，您可以在其中寻求帮助，该小组越来越活跃，并且有一些视频教程展示了该功能。观看 youtube 上的[导览视频](http://www.youtube.com/watch?v=NGnDC14Pfic)，不到 3 分钟即可概述这些功能。围绕着 Affenzeller 教授（元启发式研究领域的研究员）的研究小组开发了这个软件，并位于奥地利。我也是这个组的一员。

查看[howtos](http://dev.heuristiclab.com/howtos)如何在 GUI 中实现您的功能，或者，如果您了解 C#，如何将您的问题实现为插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:11:16.230

您可以使用**遗传算法**而不是 GP 来找到具有 n 个变量的函数的最小值。

基本上你要做的是：

*   分配初始值
*   生成 n 个染色体的初始种群
*   虽然（真）
    *   评估每个染色体的适应度 f(x, y)
        *   如果我们达到 f(x, y) 的满意解 → 退出循环
    *   创建选择方案（比赛选择）
    *   选择染色体（选择）：
        *   精英主义
        *   交叉
    *   创建突变
    *   改变重复的染色体
    *   替换原来的染色体群体
*   结束而

# java - 私钥分发技术？

> ID：10674117
> 
> 赞同：1
> 
> 时间：2012-05-20T14:10:46.060
> 
> 标签：java, encryption, rsa, private-key

我用 java rmi 客户端服务器制作了一个聊天应用程序。为了我使用 RSA 算法的消息的安全性，但我很难将私钥分发到对手的聊天中。也许我的朋友那里可以帮助如何将私钥分发给对手，以便他可以解密发送的聊天消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:16:13.430

首先，您永远不会分发私钥，而公钥可以公开（呃！）可用。您使用聊天第二方的人的公钥加密您的消息，他们使用他们的私钥解密它。您可以使用纯文本、电子邮件或将其发布在您的网站上发送您的公钥，以便其他人可以使用它加密他们给您的消息。

为了让您的生活更轻松，使用例如[ssl](/questions/tagged/ssl "显示标记为“ssl”的问题")进行投资——这要快得多，因为在使用非对称加密建立安全通道后，它会交换对称会话密钥并使用更快的对称加密。

实际上，公钥的分发也可能是一个问题。如果你的对手也可以修改传输（而不是只听你的传输通道），他/她可以发送你的伪造公钥。这就是为什么公钥（例如在网站上）需要由受信任的权威链（其公钥在网络浏览器中硬编码）签名的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:14:18.120

您需要使用的是非对称方案来传输信息。使用非对称加密，即使有人在监听，他们也不知道他们的密钥是什么。您可以使用它来加密消息，但通常您使用它来加密对称密钥，然后从那里使用它。

查看[此](http://en.wikipedia.org/wiki/Public-key_cryptography)内容以获取有关背景的更多信息。

至于如何在您的代码中执行此操作，我建议您按照“java 公钥库”的方式进行谷歌搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:27:51.757

RSA 是一种公钥加密技术，您的客户有一个公钥，而您有一个私钥，您可以使用私钥解密消息，即消息使用客户端公钥加密并使用您的私钥解密。你可以看看这个[http://www.di-mgt.com.au/rsa_alg.html](http://www.di-mgt.com.au/rsa_alg.html) 它非常详细地解释了它是如何工作的。这个PPT解释了如何在java中实现 它[www.cs.cityu.edu.hk/~cs4288/Java/RSA.doc](http://www.cs.cityu.edu.hk/%7Ecs4288/Java/RSA.doc) 它真的很有帮助。

希望能帮助到你！！

# php - PHP 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING，期待 ',' 或 ';' 在 C:\apache2triad\htdocs\imagedisplay.php 第 28 行

> ID：10674121
> 
> 赞同：-4
> 
> 时间：2012-05-20T14:11:52.340
> 
> 标签：php

我在执行代码期间遇到错误：

> PHP 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING，期待 ',' 或 ';' 在 C:\apache2triad\htdocs\imagedisplay.php 第 28 行

```
<?php

$dir= "C:\apache2triad\htdocs\phppgadmin\images\phpimages";

$file_display= array('jpg', 'jpeg', 'png', 'gif');

if(file_exists($dir)== false) 
{
  echo "directory x not found";
}
else
{
  $dir_content= scandir($dir);

  foreach($dir_content as $file)
  {
    $file_type = strtolower(end(explode('.', $file)));

    // echo "$file <br> ";

    if($file !=='.' && $file !=='..')
    {
      //echo "$file <br> ";   
      echo "<img src="', $dir, '/', $file, '" alt="', $file, '"/>";
    }      
  }   
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:14:42.780

```
echo "<img src="', $dir, '/', $file, '" alt="', $file, '"/>";
               ^^-- here 
```

你基本上有两个不同的字符串在这里背靠背，使这条线完全无效。

# iphone - 如何确定可可中的字符串编码？

> ID：10674131
> 
> 赞同：3
> 
> 时间：2012-05-20T14:12:35.020
> 
> 标签：iphone, objective-c, cocoa, encoding

如何确定可可中的字符串编码？最近我正在研究一个收音机播放器。有时 id3 标签文本会出现乱码。

这是我的代码：

```
CFDictionaryRef audioInfoDictionary;
UInt32 size = sizeof(audioInfoDictionary);
result = AudioFileGetProperty(fileID, kAudioFilePropertyInfoDictionary, &size, &audioInfoDictionary); 
```

ID3 信息在 audioInfoDictionary 中。有时 id3 不使用 utf8 编码，并且标题、艺术家名是乱码。

有没有办法确定字符串使用什么编码？

特别感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:49:41.743

虽然它是一个 NSString 对象，但没有特定的编码，因为它保证使用创建时确定的编码来表示放入其中的任何内容。请参阅文档的[使用编码部分](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW37)。

您从哪里获得 ID3 标签？您“接收”此信息的时间是确定其编码的最佳时间。有关初始化程序列表，请参阅[创建和初始化字符串](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW13)以及接下来的几节（用于文件和 url 创建）。其中一些允许您设置编码，而另一些则传回（通过引用）系统在创建字符串时确定的“最佳猜测”编码。查找带有“usedEncoding:”的方法以获取系统报告的猜测。

所有这一切真的取决于到底是什么给了你那个字符串。您是从文件（MP3）还是网络服务（互联网收音机）中读取它？如果是后者，服务器的响应应该包括编码，如果*那是*错误的，除了猜测之外没有什么可做的。

# lucene - Apache Lucene - 如何在没有并发问题的情况下更新现有索引？

> ID：10674137
> 
> 赞同：0
> 
> 时间：2012-05-20T14:13:14.060
> 
> 标签：lucene

我正在使用 Lucene Core 3.6。

我是在多用户环境的上下文中提出这个问题的，其中许多并发请求将进入`IndexSearcher`.

我可以`IndexWriter`使用相同的内容创建一个新的，`Directory`并且`Analyzer`我曾经最初填充索引并安全地写入它吗？是否有我必须注意的阻塞、同步或并发问题？

根据我的阅读，我相信新添加的文档在我打开一个新文档后立即可用，`IndexSearcher`但是我也读到出于性能原因，我希望`IndexSearcher`尽可能长时间地保持打开状态。对我来说，这意味着我必须跟踪何时写入索引，以便`IndexSearcher`在下一个请求时返回一个新的。

我怀疑我的`Directory`实施选择对此有影响。到现在我只用过`RAMDirectory`。

编辑：更新标题以更好地阐明我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:13:49.073

使用 SearchManager。Mike McCandless 有[一篇](http://blog.mikemccandless.com/2011/11/near-real-time-readers-with-lucenes.html)关于搜索管理器和 NRT 管理器的博客文章可能会有所帮助。

您可以在线阅读各种关于 Lucene 如何实现近实时 (NRT) 索引更新的文章，但要回答您的基本问题：应该只打开一个 IndexWriter，但在更新时会从该作者打开新的阅读器。尽可能长时间地保持阅读器打开是件好事，但由于使用 NRT 更新来自内存，因此它的周转速度非常快（通常为几十毫秒）。

# regex - F# 中的正则表达式

> ID：10674141
> 
> 赞同：1
> 
> 时间：2012-05-20T14:13:19.937
> 
> 标签：regex, f#

我想在 F# 中编写一个正则表达式，它表示**以 " 开头和结尾的**字符串，并且可以有任何 Unicode 字符序列，不包括双引号或换行符。

例如：

> “我想回家”
> 
> “我叫库克雅”
> 
> “”

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:24:14.813

您应该使用如下的正则表达式：

```
let regex = "^\".*\"$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:16:53.117

**泰这个**

```
"[^"]*?" 
```

*它可以工作，但解析和验证这种字符串你可能需要一个`stack`.*

# google-app-engine - java.security.AccessControlException：访问被拒绝（java.lang.RuntimePermission accessDeclaredMembers）

> ID：10674142
> 
> 赞同：2
> 
> 时间：2012-05-20T14:13:31.490
> 
> 标签：google-app-engine, resteasy, jboss-weld

我正在尝试将使用 Weld 1.1.8 的应用程序移植到 Google App Engine。我在 web.xml 中使用一个监听器来引导 Weld：

```
<listener>
  <listener-class>org.jboss.weld.environment.servlet.Listener</listener-class>
</listener> 
```

该应用程序在常规 Jetty 7 上启动良好。但在 GAE 上启动时，出现问题：

```
com.google.common.collect.ComputationException: java.security.AccessControlException: access denied (java.lang.RuntimePermission accessDeclaredMembers)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:397)
    at org.jboss.weld.resources.ClassTransformer.loadClass(ClassTransformer.java:163)
    at org.jboss.weld.bootstrap.BeanDeployer.loadWeldClass(BeanDeployer.java:108)
    at org.jboss.weld.bootstrap.BeanDeployer.addClass(BeanDeployer.java:79)
    at org.jboss.weld.bootstrap.BeanDeployer.addClasses(BeanDeployer.java:123)
    at org.jboss.weld.bootstrap.BeanDeployment.createBeans(BeanDeployment.java:184)
    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:350)
    at org.jboss.weld.environment.servlet.Listener.contextInitialized(Listener.java:182)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:202)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:123)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:446)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission accessDeclaredMembers)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:355)
    at java.security.AccessController.checkPermission(AccessController.java:567)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at com.google.apphosting.runtime.security.CustomSecurityManager.checkPermission(CustomSecurityManager.java:56)
    at java.lang.SecurityManager.checkMemberAccess(SecurityManager.java:1679)
    at java.lang.Class.checkMemberAccess(Class.java:2174)
    at java.lang.Class.getDeclaredMethods(Class.java:1807)
    at java.lang.Class.getEnclosingMethod(Class.java:919)
    at sun.reflect.generics.scope.ClassScope.computeEnclosingScope(ClassScope.java:50)
    at sun.reflect.generics.scope.AbstractScope.getEnclosingScope(AbstractScope.java:74)
    at sun.reflect.generics.scope.AbstractScope.lookup(AbstractScope.java:90)
    at sun.reflect.generics.scope.AbstractScope.lookup(AbstractScope.java:90)
    at sun.reflect.generics.factory.CoreReflectionFactory.findTypeVariable(CoreReflectionFactory.java:109)
    at sun.reflect.generics.visitor.Reifier.visitTypeVariableSignature(Reifier.java:165)
    at sun.reflect.generics.tree.TypeVariableSignature.accept(TypeVariableSignature.java:43)
    at sun.reflect.generics.repository.MethodRepository.getReturnType(MethodRepository.java:68)
    at java.lang.reflect.Method.getGenericReturnType(Method.java:254)
    at org.jboss.weld.introspector.jlr.WeldMethodImpl.of(WeldMethodImpl.java:70)
    at org.jboss.weld.introspector.jlr.WeldClassImpl.<init>(WeldClassImpl.java:235)
    at org.jboss.weld.introspector.jlr.WeldClassImpl.of(WeldClassImpl.java:119)
    at org.jboss.weld.resources.ClassTransformer$TransformTypeToWeldClass.apply(ClassTransformer.java:59)
    at org.jboss.weld.resources.ClassTransformer$TransformTypeToWeldClass.apply(ClassTransformer.java:50)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingValueReference.compute(ComputingConcurrentHashMap.java:355)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.compute(ComputingConcurrentHashMap.java:184)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.getOrCompute(ComputingConcurrentHashMap.java:153)
    at com.google.common.collect.ComputingConcurrentHashMap.getOrCompute(ComputingConcurrentHashMap.java:69)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:393)
    ... 25 more 
```

我尝试使用旧版本的 Weld 到 1.1.0 无济于事。有关如何解决此类问题的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:19:18.937

您遇到了沙盒限制。

特别是，`WeldClassImpl`构造函数遍历注解类的层次结构调用`WeldMethodImpl.of()`每个方法：如果有问题的类扩展了 JRE 或 API 类，那么沙箱将拒绝访问非公共方法；如果 does 类不属于应用程序，沙箱将完全拒绝所有访问。我认为您需要完整的堆栈跟踪来确定在这种情况下它是哪个。

如[文档中所述](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)：

> ## 反射
> 
> 允许应用程序对其自己的类进行完全的、不受限制的、反射式的访问。它可以查询任何私有成员、使用`java.lang.reflect.AccessibleObject.setAccessible()`和读取/设置私有成员。
> 
> 应用程序还可以反映 JRE 和 API 类，例如`java.lang.String`和`javax.servlet.http.HttpServletRequest`。但是，它只能访问这些类的公共成员，而不是受保护的或私有的。
> 
> 应用程序不能针对不属于自己的任何其他类进行反射，也不能使用该`setAccessible()`方法来规避这些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:46:39.437

似乎是一个匿名的番石榴函数是原因。

# php - 制作我自己的网站分析

> ID：10674143
> 
> 赞同：4
> 
> 时间：2012-05-20T14:13:42.713
> 
> 标签：php, sql, analytics

我认为谷歌分析并不是获得准确数字的最佳方式，因为没有在浏览器中启用 JavaScript 的用户不会被计算在内。因此，我想四处制作自己的 Anylytics。

我有一个表格，将记录用户的 IP 地址、页面 URL 和日期/时间。

然后，我在网站每个页面的底部都有一个脚本，然后它将运行 SQL 查询以将数据提交到数据库中。

这是脚本。

```
$page_viewed = mysql_real_escape_string($_SERVER['REQUEST_URI']);
if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
     $ip=$_SERVER['HTTP_CLIENT_IP'];
} elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
     $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
} else {
     $ip=$_SERVER['REMOTE_ADDR'];
}
$ip = mysql_real_escape_string($ip);
mysql_query("And then do the sql query.... "); 
```

由于这里的大多数人都是经验丰富的开发人员，我想知道您是否对我的脚本有任何改进或任何需要修改的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:18:13.763

这似乎是个坏主意……通常，分析发生的情况是当用户不支持 javascript 时，他们的浏览器会解析 html 标记中包含的内容。通常在这些中，您可以包含单个像素图像或类似的东西（图像的目的是调用您上面给出的代码）。使用此请求来获取有关没有 javascript 功能的客户的信息，而不是让每个人都陷入同一条船上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:22:59.893

如果您使用的是 Apache，这一切都会记录在您的日志文件中。您可以使用[http://awstats.sourceforge.net/](http://awstats.sourceforge.net/)之类的东西来分析它们。

如果您拥有值得分析的不支持 JS 的流量，那么使用 MySQL 和 PHP 进行日志记录将会杀死您的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:29:15.173

由于浏览器缓存和 javascript，您会发现日志文件分析也不是 100% 准确的。结合日志分析和页面标记是大多数网站的最佳选择。过去几年我都使用[过 Nihuo](http://www.loganalyzer.net)和谷歌分析，它们对我来说非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T14:33:24.933

正如上面提到的@Blowski，有更好的选择。我过去使用过[Mint](http://haveamint.com/)，这是一项令人难以置信的服务。它是用 PHP 编写的，既美观又易于理解。

我鼓励您花一些时间查看其[功能亮点](http://haveamint.com/about/feature_highlights)以及[截屏视频和屏幕截图](http://haveamint.com/about/screencasts_and_screenshots)，然后再花更多时间重新发明轮子 - 您的时间很宝贵。

# ninject - 使用 Ninject 注入区域内的控制器

> ID：10674151
> 
> 赞同：0
> 
> 时间：2012-05-20T14:14:30.293
> 
> 标签：ninject, ninject.web.mvc

有没有办法制作一个绑定，上面写着“当将 IService 注入区域内的任何控制器时，管理员注入此实例”？

我们在 Admin 中有许多控制器，它们可能使用相同的服务。我们可以为每个控制器编写绑定，但随后可能会使用相同的服务引入另一个控制器，而开发人员忘记专门为 Admin 连接它（它使用与其他区域或区域外不同的服务实现集）。

```
// this is the default
kernel.Bind<ICategorizationRepository<DirectoryCategory>>().To<CachedJsonCategorizationProvider<DirectoryCategory>>().InRequestScope();

// Admin bindings use noncaching repositories
kernel.Bind<ICategorizationRepository<DirectoryCategory>>().To<JsonCategorizationProvider<DirectoryCategory>>().WhenInjectedInto<Areas.Admin.Controllers.DirectoryCategorizationController>().InRequestScope();
kernel.Bind<ICategorizationRepository<DirectoryCategory>>().To<JsonCategorizationProvider<DirectoryCategory>>().WhenInjectedInto<Areas.Admin.Controllers.DirectoryEntryController>().InRequestScope();
// .. new controller that uses ICategorizationRepo might be created but the developer forgets to wire it up to the non caching repository - so the default one will be used, which is undesirable 
```

我想说：在管理区域内注入任何内容时，请使用此...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:09:54.200

写你自己的when条件。

```
.When(request => request.Target.Member.ReflectedType is a controller in the area namespace) 
```

@mare 更新：

我将用我如何解决它的详细信息来更新你的答案。您确实为我指明了正确的方向，并且很容易从您的答案中获得正确的解决方案。这就是我所做的：

```
// custom when condition
Func<IRequest, bool> adminAreaRequest = new Func<IRequest, bool>(r => r.Target.Member.ReflectedType.FullName.Contains("Areas.Admin"));

kernel.Bind<ICategorizationRepository<DirectoryCategory>>).To<JsonCategorizationProvider<DirectoryCategory>>().When(adminAreaRequest).InRequestScope(); 
```

由于我所有的控制器都在 xyz.Areas.Admin 命名空间中，因此 FullName 始终包含该字符串。如果我需要另一个自定义请求，我可以像处理这个请求一样轻松创建它。

# java - 调用方法时将代码设置为属性

> ID：10674154
> 
> 赞同：0
> 
> 时间：2012-05-20T14:14:45.647
> 
> 标签：java, lwjgl

这就是我调用方法的方式：

```
initButton(0, 0, 150, 50, "button.png", "PNG"); 
```

这是方法：

```
private void initButton(float x, float y, float width, float height, String imageFileName, String imageFileType) {
    buttonImages.add(loadResClass.loadTextures(imageFileType, imageFileName));
    buttonFloats.add(new Vector4f(x, y, width, height));
    float mouseX = Mouse.getX();
    float mouseY = Mouse.getY() - Display.getHeight();
    if(mouseY < 0){
        mouseY = mouseY * -1;
    }

    if(mouseX > x && mouseY > y && mouseX < x+width && mouseY < y+height){ 
        //do something
    }
} 
```

在调用 initButton 时，我想将一些代码设置为参数（或做类似的事情），而不是将代码放在 initButton 方法中而不是`//do something`注释中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:24:08.783

您可以使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)在运行时配置某些行为。该方法将策略对象作为参数。例如：

```
private void initButton(float x, float y, float width, float height, String imageFileName, String imageFileType, Strategy strategy) {
    // ...

    if(mouseX > x && mouseY > y && mouseX < x+width && mouseY < y+height){ 
        strategy.doWork();
    }
} 
```

并像这样调用：

```
initButton(0, 0, 150, 50, "button.png", "PNG", new SpecificStrategy()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:16:47.987

如果是 Swing，你可以传入一个 ActionListener 或者更好的是一个 AbstractAction。如果是其他 GUI 库，则传入 Runnable、Future 或其他允许您注入代码的接口。

这是什么图书馆？

**编辑 1**
您声明：

> 我没有使用任何 gui 库。

但你肯定是，无论是 Swing，还是 Android，或类似的，否则你怎么能与用户交互呢？

**编辑 2**
你说：

> 我没有使用任何 GUI 库。我用 LWJGL 画四边形

那么也许你想`Runnable`在这种情况下使用 a 。虽然我不确定你将如何听鼠标位置......

# clojure - 构建 uberwar 时出现 Lein 循环依赖错误的原因是什么？

> ID：10674155
> 
> 赞同：3
> 
> 时间：2012-05-20T14:14:47.690
> 
> 标签：clojure, leiningen, ring

构建 ring server-headless 可以工作——`lein ring server-headless`但是当我尝试构建 war 或 uberwar 时，我收到以下错误，并且无法弄清楚为什么会发生这种情况。

```
No namespaces to :aot compile listed in project.clj.
Exception in thread "main" java.lang.ExceptionInInitializerError, compiling:(ring/util/servlet.clj:62)
at clojure.lang.Compiler.analyzeSeq(Compiler.java:6416)
at clojure.lang.Compiler.analyze(Compiler.java:6216)
...

Caused by: java.lang.ExceptionInInitializerError
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at clojure.lang.RT.classForName(RT.java:2013)
at clojure.lang.Compiler$HostExpr.maybeClass(Compiler.java:938)
at clojure.lang.Compiler$HostExpr.access$400(Compiler.java:710)
at clojure.lang.Compiler.macroexpand1(Compiler.java:6342)
at clojure.lang.Compiler.analyzeSeq(Compiler.java:6395)
... 69 more
Caused by: java.lang.Exception: Cyclic load dependency: [ /servlet ]->/ring/util/servlet->[ /servlet ]
at clojure.core$check_cyclic_dependency.invoke(core.clj:5288)
at clojure.core$load.doInvoke(core.clj:5383)
at clojure.lang.RestFn.invoke(RestFn.java:408)
at clojure.lang.Var.invoke(Var.java:401)
at servlet.<clinit>(Unknown Source)
... 76 more 
```

我的 project.clj 文件是：

```
(defproject myproj "0.1"
:description "the sample"
:dependencies [
    [org.clojure/clojure "1.3.0"]
    [compojure "1.0.4"]
    [hiccup "1.0.0"]
    [clj-json "0.5.0"]
    [ring/ring "1.1.0"]
    [clj-http "0.1.1"]
]   
:plugins [
    [lein-ring "0.7.0"]
]   
:ring {:handler routes/start}) 
```

如果我删除了，`:ring {:handler routes/start}`那么我会在其他地方得到一个 NPE。

我不知道我是否在我的 project.clj 中遗漏了某些内容，或者是否特定版本的 lein 在这个用例中被破坏了。有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:26:25.873

我有同样的问题，在我的情况下，解决方案就像做一个一样简单

> 莱茵清洁

之前

> 莱因戒指超级战争

我认为实际问题是，在某些时候，我的处理程序指向了一个不正确/不存在的处理程序，并且在 target/classes 目录中留下了一个 servlet.clj。进行清理将删除此文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:19:07.130

我解决了这个问题，这对我来说有点错误。在这里发布答案，以防有人犯同样的错误。

我在 src/routes.clj 中有如下内容：

```
(defroutes main-routes
    (GET "/some/path" [& params] (some-code params))
    (route/resources "/")
    (route/not-found "not found"))

(def start (run-jetty (handler/site main-routes) {:port 8080})) 
```

这是设置路由的所有标准代码，并提供一个钩子以通过 lein ring server-headless 从命令行启动 jetty webapp。除了我将 start 声明为全局而不是函数。这意味着当我运行 lein ring server-headless 时，事情仍然有效，但是当我运行 lein ring uberwar 时，我最终得到了一个奇怪的配置——一个完整的码头服务器将尝试使用它的 servlet 启动，并且 uberwar 已经生成了一个 servlet 并且正在尝试将其打包成罐子。

当我将我的代码与组合示例进行比较时，我一直错过了这种差异，我猜是因为 def 和 defn 在光学上看起来非常相似。但无论如何，我只是做了这个改变来让它工作：

```
(defn start [] (run-jetty (handler/site main-routes) {:port 8080})) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:40:25.923

错误说明了一切，项目配置中缺少 :aot 参数。查看[此链接](http://asymmetrical-view.com/2010/06/08/building-standalone-jars-wtih-leiningen.html)以使用 :aot。

# javascript - 使用具有 !important 标记的 jquery 更改 div 的背景颜色

> ID：10674158
> 
> 赞同：16
> 
> 时间：2012-05-20T14:15:16.760
> 
> 标签：javascript, jquery

使用调用 .jsp 的插件，该插件使用其自己的外部托管样式表（它是一个 yelp 嵌入 - 试图操纵它的外观）。我要更改的一个元素上有一个 !important 标记，我似乎无法更改它...

我试过

```
<script type="text/javascript">
   $('.elementToChange').css({'background-color':'black'});​
</script> 
```

无济于事。想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-20T14:28:26.010

看起来在 jQuery 的更新版本（至少 1.7.2 和更高版本）中，您可以简单地设置 css：

```
$('#elementToChange').css('background-color', 'blue'); 
```

见[http://jsfiddle.net/HmXXc/185/](http://jsfiddle.net/HmXXc/185/)

在旧版本的 jQuery 和 Zepto 中，您必须先清除 css：

```
// Clear the !important css
$('#elementToChange').css('background-color', ''); 
```

然后使用以下方法重置它：

```
$('#elementToChange').css('background-color', 'blue'); 
```

或单线：

```
$('#elementToChange')
    .css('background-color', '')
    .css('background-color', 'blue'); 
```

请参阅[http://jsfiddle.net/HmXXc/186/](http://jsfiddle.net/HmXXc/186/)。

**原始答案**：

*注意：这可能是个坏主意，因为它会删除任何其他内联样式*

我会直接编辑样式属性

```
$('.elementToChange').attr('style', 'background-color: blue !important'); 
```

[http://jsfiddle.net/RichardTowers/3wemT/1/](http://jsfiddle.net/RichardTowers/3wemT/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T14:23:59.667

这是您的解决方案：

[http://jsfiddle.net/irrpm/bdhpp/2/](http://jsfiddle.net/irpm/bdhpp/2/)

这个想法是添加类：

```
$('.elementToChange').addClass('blackBg'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-18T17:07:41.500

您可以使用以下步骤操作！important css，您可以使用内联 css 或内部 css，或者您可以在预加载 css 的顺序之后加载自己的外部 css，它将帮助您用自定义 css 覆盖该 css。

```
 <html>
    <head>
    <!--
    //First Solution
    //PreloaderCSS
    //YourCustomCSS

    //Second Solution
    Internal CSS -->
    </head>
    <body>
<!--
Third solution
//Inline CSS
->
    </body>
    </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T13:14:37.367

您可以使用以下功能：

```
function replaceBGColorImportant(element,newColor){
    var styles = element.getAttribute('style');
    styles = styles?styles.split(';'):[];
    var newStyles = [];
    styles.map(function(x){
        if (x.split(':')[0] != "background-color")
            newStyles.push(x);
    });
    newStyles.push('background-color:#'+newColor+' !important');
    element.setAttribute('style',newStyles.join(';'));
} 
```

执行如下：

```
replaceBGColorImportant(document.body,'#009922'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-11T00:31:40.060

通过正则表达式： [https ://jsfiddle.net/7jj7gq3y/2/](https://jsfiddle.net/7jj7gq3y/2/)

HTML：

```
<div class="elementToChange" style=" background-color: yellow !important; width: 100px; height: 100px;"></div> 
```

JavaScript：

```
var setImportantStyle = function(element, attributeName, value) {
    var style = element.attr('style');
    if (style === undefined) return;
    var re = new RegExp(attributeName + ": .* !important;", "g");
    style = style.replace(re, "");
    element.css('cssText', attributeName + ': ' + value + ' !important;' + style);
}
setImportantStyle($('.elementToChange'), 'background-color', 'red'); 
```

# c - 在c中将队列作为参数传递

> ID：10674162
> 
> 赞同：-1
> 
> 时间：2012-05-20T14:16:21.950
> 
> 标签：c, parameters, queue

我在源文件 ac 和 bc 之间传递这样的队列

**文件：ac**

```
sq[a]=new_queue();

pthread_create(&st[a],NULL,sendPacket,sq[a]); 
```

**文件：公元前**

```
void *sendPacket(void *queue){

/* here i need to know which queue has come ,determine
   the index of queue how can I do it? */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:22:01.623

创建队列的更高级表示。似乎队列可以是一个`void *`（你没有显示它的实际类型，即`new_queue()`调用返回什么？），所以在添加附加参数的同时将它嵌入到一个结构中：

```
struct queue_state {
    void *queue;
    int  index;
}; 
```

然后实例化一个结构，并将指向它的指针传递给线程函数：

```
struct queue_state qsa = malloc(sizeof *qsa);
if(qsa != NULL)
{
  qsa->queue = new_queue();
  qsa->index = 4711; /* or whatever */
  pthread_create(&st[a], NULL, sendPacket, qsa);
} 
```

然后线程函数可以使用`struct`声明访问所有字段。当然，声明需要在`queue.h`两个 C 文件中都包含的共享标头（例如 ）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:24:55.430

你的问题描述很粗略。但至少据我了解，您实际上需要将 2 个参数传递给您的函数：（指向）队列（对我来说似乎是一个数组），以及该队列中的索引。

您不能将两个参数都打包在一个类型为 的变量中`void*`。你可以做的是声明一个包含所有需要参数的结构，填充它，并将指向它的指针传递给你的线程。

像这样（省略错误处理）：

```
struct Params
{
    queue* m_Queue;
    size_t m_Idx;
};

// ...
Params* pParams = new Params;
pParams->m_Queue = sq;
pParams->m_Idx = a;

pthread_create(&st[a],NULL,sendPacket, pParams);

void *sendPacket(void *pPtr)
{
    Params* pParams = (Params*) pPtr;

    // ...

    delete pParams;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:20:26.910

如果您只是将索引传递给函数，可能会更容易：

```
void *sendPacket(int queue_idx) {
    queue_t *queue = &sq[queue_idx];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T14:23:27.503

如果在*bc*中您可以访问`sq`，则可以将索引传递给队列。否则，您可以传递一个包含实际队列和索引的结构

# iphone - 自定义 UITableViewCell 在 [super dealloc] 上崩溃

> ID：10674165
> 
> 赞同：1
> 
> 时间：2012-05-20T14:16:34.590
> 
> 标签：iphone, objective-c, ios, memory-management, uitableview

我有一个 UITableViewCell 的子类，它在遇到 [super dealloc] 行时崩溃。我的单元格中有几个文本字段，错误消息是`*** -[UITextField release]: message sent to deallocated instance 0x739dfd0`

相关的代码片段如下（我确实有其他文本字段，但它们都以相同的方式处理。我怀疑它与将其添加到单元格的 contentView 有关。但我不知道如何更正它。

自定义 UITableViewCell 的 .h 文件：

```
@interface ExerciseTableViewCell : UITableViewCell {

    UITextField *textField1;

}

@property (nonatomic, retain) UITextField *textField1;

@end 
```

.m 文件：

```
@implementation ExerciseTableViewCell

@synthesize textField1;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code

    UIView *myContentView = self.contentView;

        UITextField *newTextField1 = [[UITextField alloc] init];

        self.textField1 = newTextField1;

        [newTextField1 release];

        [myContentView addSubview:textField1];

    }
    return self;
}

}

- (void)dealloc {
    [textField1 release];
    [super dealloc];
} 
```

我不明白为什么我会多次释放 textField？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:26:09.347

改变：

```
UITextField *newTextField1 = [[UITextField alloc] init];

self.textField1 = newTextField1;

[newTextField1 release];

[myContentView addSubview:textField1]; 
```

至：

```
self.textField1 = [[[UITextField alloc] init] autorelease];
[myContextView addSubview:self.textField1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:25:10.727

在本地声明文本字段并将其分配给全局声明的文本字段需要什么，只需使用

```
textField1 = [[UITextField alloc] init]; 
[myContentView addSubview:textField1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:49:02.173

将 textfield 对象设置为 nil 而不是释放它。其次，请在编码时使用正确的命名约定。

# java - 如何使用“org.json”包中的类将对象序列化为 JSON 字符串？

> ID：10674171
> 
> 赞同：3
> 
> 时间：2012-05-20T14:17:38.133
> 
> 标签：java, json

我试图找到任何有用的例子来解决这个简单的任务，但是，没有找到真正有用的东西。我是 Java 的初学者，我肯定需要一些帮助。

我有两个简单的 Java 类：

```
private class FMList {
    public List<FMItem> items = new ArrayList();
    public long size = 0;
    public int dirs = 0;
    public int files = 0;
    public String path = "";
}

private class FMItem {
    public boolean is_dir = false;
    public String[] ascii = {};
    public String name = "";
    public String mode = "";
    public long size = 0;
    public long mtime = 0;
    public boolean ext = false;
    public String cache = "";
} 
```

我的应用程序（小程序）创建 的实例`FMList`，将数据设置为对象属性，最后将对象序列化为 JSON 字符串。

首先，我尝试[了 Google Gson](http://code.google.com/p/google-gson/)库。Simple`new Gson().toJson(fmList)`完美地完成了这项工作，但是我的小程序未能开始给出 Gson 库有点像安全问题的异常。同时，applet 已签名并设置了所有 AccessController。

然后，我尝试使用[JSON 官方网站上](http://www.json.org/java/)的类。不再有例外，但那只是简单的`new JSONObject(fmList).toString()`给予`{}`。我知道它应该以不同的方式使用。

*使用包中的类将这个简单对象序列化为 JSON 字符串的正确方法是什么`"org.json"`？*

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T14:19:59.817

对于您正在使用的字段访问（不是 get/set 方法），您必须指定它们： [http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject(java.lang.Object, java. lang.String[])](http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject%28java.lang.Object,%20java.lang.String%5B%5D%29)

您要么使用 JSON Writer 要么使用“Stringer”（写入流或创建字符串）以获得漂亮的打印 json。

[http://www.json.org/javadoc/org/json/JSONWriter.html](http://www.json.org/javadoc/org/json/JSONWriter.html)

[http://www.json.org/javadoc/org/json/JSONStringer.html](http://www.json.org/javadoc/org/json/JSONStringer.html)

更新：也不能使用简单的 org.json 库来私有类。这工作正常：

```
public class Main {
    public static class FMList {
        public long size = 0;
        public int dirs = 0;
        public int files = 0;
        public String path = "";
    }

    public static void main(String[] args) {
        System.out.println(new JSONObject(new FMList(), new String[] { "dirs", "files" }).toString());
    }

} 
```

产生：`{"files":0,"dirs":0}`

更改为私人课程会产生：`{}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:20:27.377

JSONObject 期望使用 getter，但您的类仅使用公共变量而不是 getter：

```
JSONObject(java.lang.Object bean) 
      Construct a JSONObject from an Object using bean getters. 
```

[http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject(java.lang.Object](http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject(java.lang.Object) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:02:04.287

了解您正在寻找专门用于使用该`org.json`包进行序列化，但如果您对其他库开放，Xstream 真的很容易用于与 XML 相关的任务，例如 JSON 序列化。这是一个 JSON 教程：http: [//x-stream.github.io/json-tutorial.html](http://x-stream.github.io/json-tutorial.html)。

# css - 用javascript重新定位绝对元素

> ID：10674172
> 
> 赞同：0
> 
> 时间：2012-05-20T14:17:58.350
> 
> 标签：css, positioning

我可以问一下，根据我希望它在后面的另一个绝对定位的 div（z-indexed）的高度，使用 javascript 重新定位 div 是否会被认为是“不好的做法”？

主要内容 div 是绝对定位的，并且根据“动态生成”的内容在每个页面上具有可变的高度。我绝对定位它而不是相对定位，因为我最终在页面底部出现了一个空白，内容 div 仍然占据了页面上的原始空间。

在那个内容 div 的后面和下面，有一点重叠，我想要另一个 div。由于内容 div 是绝对定位的并且高度可变，因此我不能相对或绝对定位我的底部 div。所以我打算使用 javascript/jquery 来获取我的内容 div 的高度，并在页面上相对于它定位底部/后面的 div（使用绝对定位）。

这是不好的做法，还是正确的做法？

谢谢！

编辑：我认为这是一个客观的答案，无论它是正确的做事方式还是不...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:36:11.573

我不会认为它本身不好，但我会尽量避免使用 JavaScript 来进行页面的大布局。原因是布局是 CSS 的发明，大多数时候它足以完成工作。然而，有时你只需要使用 JavaScript，因为 CSS 不会削减它。

对于这样的事情，我通常使用一个 CSS 框架来完成所有这些繁重的工作。为此，我绝对更喜欢[yaml](http://www.yaml.de/)。

# javascript - 如何在 javascript 中创建与 CLASS 的链接？

> ID：10674177
> 
> 赞同：0
> 
> 时间：2012-05-20T14:18:36.960
> 
> 标签：javascript, xml

这是我在 StackOverflow 上的第一个问题，但我已经多次使用该网站，您总是帮助我回答问题。现在是时候分享我的疑问了，因为我在这里找不到类似的。

我的网站中有一个 Flash 横幅旋转器，它使用 XML 来配置将旋转的图像和链接。我无法访问源代码，因为它是商业版本。

我不能使用 jQuery 来旋转图像，因为我有一个下拉菜单，它总是落在横幅后面。我试过 z-index 但它在 IE 上不起作用。

其中一张图片是用来展示视频的，所以，当有人点击它时，我想要一个灯箱来打开并播放视频（我将使用 Sublimevideo.com）

现在的 XML 是这样的：

```
<slideshow>
    <photo image="path/image.jpg" url="link" target="_blank"></photo>
</slideshow> 
```

**我需要在这个链接中添加一个类，因为我希望它在灯箱中打开！！！**

所以我想知道做这样的事情：

```
window.location.href='link class="lightbox"'; 
```

但这不是一个选择，它没有奏效！

那么如何在 xml 文件的链接中添加 CLASS 呢？

我想知道使用 javascript，但如果您有任何其他选择，那就太好了！

非常感谢我的英语，我来自巴西=P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:03:39.390

你可以用一个可怕的 jQuery hack 来做到这一点：

```
$('*[href*="path/image.jpg"]')​.addClass('lightbox');​​​​​​​​​​ 
```

当然，如果您知道 HTML 的外观，您可以使用更具体/更不难看的选择器。

一个更好的解决方案是在服务器上添加类，这听起来应该是可能的。

# jquery - 缓存 POST：什么是合适的标题？

> ID：10674179
> 
> 赞同：0
> 
> 时间：2012-05-20T14:19:30.213
> 
> 标签：jquery, ajax, http, post

来自[RFC 2616](http://www.faqs.org/rfcs/rfc2616.html)，第 9.5 节（POST）：

> 对此方法的响应是不可缓存的，除非响应包含适当的 Cache-Control 或 Expires 标头字段。

什么是*合适的标题*？

背景：服务器响应以下标头，我担心响应可能会被缓存。示例响应标头：

```
Cache-Control:max-age=2592000, public
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:22
Content-Type:application/json
Date:Sun, 20 May 2012 13:46:06 GMT
Expires:Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive:timeout=15, max=100
Pragma:no-cache
Server:Apache/2.2.22 (Amazon)
Vary:Accept-Encoding,User-Agent
X-Powered-By:PHP/5.3.13 
```

发布请求是使用 jQuery 的`$.ajax`函数从 JavaScript 发出的，`cache`设置为`false`. 但是，jQuery 忽略了该选项。引用[截至 2012-05-20 CEST 的文档](http://api.jquery.com/jQuery.post)：

> 使用 POST 获取的页面永远不会被缓存，因此 jQuery.ajaxSetup() 中的缓存和 ifModified 选项对这些请求没有影响。

## 更新

难道是jQuery的文档是错误的？请参阅我[在 jQuery 论坛中的相关主题](http://forum.jquery.com/topic/shouldn-t-post-respect-cache-option#14737000003393023)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:27:44.320

这个头，

```
Cache-Control:max-age=2592000, public 
```

会导致响应被任何中介长时间缓存。响应有点混乱，因为`pragma: no-cache`与此相矛盾。但是，我怀疑只有某些较旧的代理才会查看编译指示标头。

jQuery 无法控制中间缓存，因此可能存在一些公共缓存，例如在您的 ISP 处，它们正在缓存响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:34:18.117

看起来令人困惑，`Cache-Control`看起来像启用缓存，而`Pragma`似乎`Expires`同时禁用缓存。无论如何，HTTP 状态码应该准确地说明请求是否被缓存。`200`- 未缓存，`304`或类似 - 已缓存。

# jquery - 我可以在使用 jQuery 的元素的 .change 函数中重用 select 元素的 id 吗？

> ID：10674181
> 
> 赞同：1
> 
> 时间：2012-05-20T14:19:52.243
> 
> 标签：jquery

我有许多选择，当它们更改值时，我将新值存储在 Windows 本地存储中。我所有的功能都重复相同的逻辑。有什么方法可以将这三者合二为一。注意windows本地存储名总是和select的元素ID一样。

```
var store = window.localStorage;

$('#AccountID')
   .change(function () {
       store.setItem('AccountID', $(this).val());
    });

$('#ExamID')
   .change(function () {
       store.setItem('ExamID', $(this).val());
    });

$('#PageID')
   .change(function () {
       store.setItem('PageID', $(this).val());
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:24:34.017

尝试

```
$('#AccountID, #ExamID,#PageID')
   .change(function () {store.setItem($(this).attr('id'), $(this).val());
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:23:19.620

您可以使用元素的 id 作为本地存储的键来轻松缩短它，如下所示：

```
var store = window.localStorage;

$('#AccountID, #ExamID, #PageID').change(function() {
  store.setItem(this.id, $(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T14:25:00.187

我认为最简单的方法是为您要跟踪的每个元素分配一个 CSS 类，然后绑定单个事件处理程序。

```
var store = window.localStorage;

$('select.tracked').change(function(){
    store.setItem($(this).attr('id'), $(this).val());
}); 
```

根据需要调整选择器以匹配您要跟踪的元素类型，例如`:input`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T14:22:58.987

我可能过于简化了（就像我通常做的那样:)

但这可能会有所帮助-

```
$('#AccountID')
   .change(function () {
       store.setItem($(this).attr('id'), $(this).val());
    }); 
```

就像你`$(this).val()`用来提取当前元素的值一样，你可以用它`$(this).attr('id')`来检索`id`当前元素的值并将其用作本地存储的键......

因此，为了使您的选择器更通用，您可以简单地为**所有**选择元素捕获一个`.change()`事件-

 **```
$('select')
   .change(function () {
       store.setItem($(this).attr('id'), $(this).val());
    }); 
```

如果这对您来说有点过于宽泛，您始终可以为您的相关选择元素匹配类，甚至在一个选择器中指定所有选择元素 -

`$('#AccountID, #ExamID, #PageID, #anotherSelect, #...')`**

# entity-framework - 从超过 3 个表中选择的实体 SQL

> ID：10674184
> 
> 赞同：-1
> 
> 时间：2012-05-20T14:20:12.303
> 
> 标签：entity-framework, entity

我是实体框架的新手，目前正在努力使用这种编程范式。我有这个查询，我想用 Entity SQL 编写。

```
SELECT      f.id,  f.personName,   c.Category,    j.busCode,    s.description,         f.StartDate, (SELECT COUNT(*) FROM Analysis WHERE id = f.id) As numOfAnalysis
FROM forms f
INNER JOIN Jobs j  ON f.id = j.id
INNER JOIN category c  ON j.categoryid = c.categoryid
INNER JOIN stage s  ON f.stageid = s.stageid
WHERE j.busCode NOT IN ('xyz', 'YYY')
ORDER BY startDate 
```

我可以从两个表中获取记录，但是一旦我使用导航属性添加第三个表，我就会得到错误表类别未在当前上下文中加载。我正在使用.net 3.5。请记住，EDM V2 没有外键，我认为遍历表关系的唯一方法是导航属性。

任何帮助将不胜感激。

谢谢

编码器74

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T19:33:00.420

如果你使用应该能够挂载这个 Linq 查询。我试图拼凑起来，但在匆忙中并没有这样复杂的测试。您可以将此参考用作支持：[http ://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

```
var result  = (from f in forms
            join j in Jobs on f.id equals j.id
            join c in Category on j.categoryid equals c.categoryid
            join s in stage on f.stageid equals s.stageid
            join a in Analysis on a.id equals f.id
            where !(new int[] { 'xyz', 'YYY' }).Contains(j.busCode)
            orderby f.StartDate
            select {
                id =f.id,
                personName = f.personName,   
                Category = c.Category,
                busCode = j.busCode,
                description = s.description,
                StartDate = f.StartDate, 
                numOfAnalysis = a.Count()
            }).ToList() 
```

胡里奥·斯派德

W&S 互联网解决方案

# javascript - 如何将输出从一页打印到另一页（跨域）？

> ID：10674185
> 
> 赞同：0
> 
> 时间：2012-05-20T14:20:13.483
> 
> 标签：javascript, jquery, ajax

我正在使用 ASP.NET 创建一个输出各种 javascript 代码的小脚本。( `document.write('aaa');`)

为了调用这个输出，我在任何我希望它显示的域上使用了一个简单的标签，它可以工作。在一个网站中，我需要每 X 秒刷新一次打印到页面的字符串。

在不更改基本标签的情况下，我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:28:30.163

据我了解，你有

1.  一个输出 javascript 代码的 asp.net 页面。此代码写入一个字符串。
2.  带有加载此页面并执行 javascript 的标记的网页

并且您想知道如何每 X 秒刷新一次字符串。

这是解决方案的开始：

1.  每 X 秒向函数添加一个 setTimeout 调用
2.  确保此函数清除写入字符串的区域
3.  通过更新 script.src 或在页面上附加新的脚本标记，确保此函数重新加载 asp.net 页面

我希望这能帮到您

# perl - Catalyst 不接受 DBIx 生成的架构

> ID：10674188
> 
> 赞同：2
> 
> 时间：2012-05-20T14:20:18.987
> 
> 标签：perl, catalyst, dbix-class

我正在使用[Catalyst::Plugin::AutoCRUD](http://search.cpan.org/~oliver/Catalyst-Plugin-AutoCRUD-2.120250/lib/Catalyst/Plugin/AutoCRUD.pm#TROUBLESHOOTING)并使用链接的 CPAN 页面中提供的说明生成 DBIx 模式。具体来说，我复制/粘贴了那里列出的命令，并仅更改了与我的数据库相关的详细信息（'pg' => 'mysql'、不同的用户名/密码等）。

我现在有一个模式 DBIC::Database::foo::Schema。Schema 既是一个包含我数据库中每个表的 *.pm 的文件，也是它自己的 Schema.pm。

我的配置文件包含以下条目：

```
<Model::AutoCRUD::DBIC>
  schema_class   Database::foo::Schema
  connect_info   dbi:mysql:dbname=foo
  connect_info   user
  connect_info   pass
  <connect_info>
      AutoCommit      1
  </connect_info>
</Model::AutoCRUD::DBIC> 
```

当我启动 AutoCRUD 服务器时，我收到以下错误消息：

```
Couldn't instantiate component "DemoApp::Model::AutoCRUD::DBIC", "Attribute (schema_class)
does not pass the type constraint because: Validation failed for
'Catalyst::Model::DBIC::Schema::Types::SchemaClass' with value Database::foo::Schema at
/Library/Perl/5.12/darwin-thread-multi-2level/Moose/Meta/Attribute.pm line 1275. 
```

由于我是 Catalyst 和这个插件的新手，我不知道如何解决这个问题。谷歌并不是很有帮助——我发现[了这个](http://www.gossamer-threads.com/lists/catalyst/users/26953)讨论，但据我所知，问题是 Catalyst 被指向了错误的 *.pm（尽管我可能误读了这个）。

如果这有帮助，这里是 Schema.pm 的内容：

```
use utf8;
package DBIC::Database::foo::Schema;

# Created by DBIx::Class::Schema::Loader
# DO NOT MODIFY THE FIRST PART OF THIS FILE

use strict;
use warnings;

use base 'DBIx::Class::Schema';

__PACKAGE__->load_namespaces;

# Created by DBIx::Class::Schema::Loader v0.07024 @ 2012-05-20 07:25:21
# DO NOT MODIFY THIS OR ANYTHING ABOVE! md5sum:cevz/k4rUWIcEhMl29r0QA

# You can replace this text with custom code or comments, and it will be preserved on  regeneration
1; 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:23:02.390

您的架构已命名`DBIC::Database::Foo::Schema`，但在您拥有的配置文件中`Database::foo::Schema`。这些名称区分大小写，因此要么更改架构路径和文件的名称，要么更正配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:54:25.427

[从Catalyst 手册](http://search.cpan.org/~zarquon/Catalyst-Manual-5.9004/lib/Catalyst/Manual/Tutorial/03_MoreCatalystBasics.pod#Create_Static_DBIx%3a%3aClass_Schema_Files)中完全重建 DBIC 类解决了这个问题。虽然我无法确定 Moose 在第一组类中不可接受的内容，但第二组类还有一个问题：`__PACKAGE__->meta->make_immutable;`为每个类（即在每个 *.pm 中）都生成了该行。将其注释掉并重新启动 Catalyst 会产生一个正常运行的 CRUD 应用程序。

# ios - 如何指定 iOS 硬件支持？

> ID：10674189
> 
> 赞同：1
> 
> 时间：2012-05-20T14:20:23.613
> 
> 标签：ios

我们可以指定我们的应用支持哪个 iOS 版本，有没有办法指定我们的应用支持哪些 iOS 硬件？（例如，iPad 2 及更高版本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:59:28.730

不，不是直接的。但是，我相信您可以指定产品系列（iPhone 与 iPad），以及所需的设备功能（例如相机等）。不过，这两者的结合有效地完成了你正在寻找的东西。请参阅[iOS App Programming Guide 中的声明所需的设备功能](https://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW10)。

# javascript - div 和 iframe 在页面中彼此并排

> ID：10674192
> 
> 赞同：0
> 
> 时间：2012-05-20T14:20:27.427
> 
> 标签：javascript, jquery, iframe, html, autoresize

我有一个包含左对齐菜单和右对齐 iframe 的 div，还有一个用于显示/隐藏 div 的 slideToggle 按钮，我想做的是让 iframe 在 div 消失时自动调整大小以占据整个页面的宽度，并在出现时为 div 留出空间，我该如何实现？

```
<script>
        $(document).ready(function(){
$(".flip").click(function(){
    $(".mmenu").slideToggle("slow");
  });
});
</script>
 <button class="flip">Show.Hide menu</button>
                     <div id="nav" class="mmenu" style="float: left; border-radius: 10px; position: fixed;
                             bottom: 75px;border: 5px solid #003366; bottom: 50px;">
                            <ul type="none">
                                <li><a target="collabsoft" href= "ProfilePage.php?property_variable=mine">My Profile</a></li>
                                        <li><a target="collabsoft" href= "viewMessages.php">Messages</a></li>
                                        <li><a target="collabsoft" href= "userHomepage.php">My Conferences</a></li>

                                    </ul>
                                </div>
                                <iframe scrolling="no" id="collabsoft" name="collabsoft" src="latestNews.php" style="position: relative;
                             width: 950px; height: 100%;></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:04:30.490

嗯，这是一个可能的解决方案。或者至少是一个开头：http: [//jsfiddle.net/86Vgz/](http://jsfiddle.net/86Vgz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:54:29.760

**你可以试试这个，我已经编辑了你的代码**

```
 <script>
    $(document).ready(function () {
        if ($("#nav").is(':visible')) {
            $("#iframe1").attr("width", "68%");
        }
        else {

            $("#iframe1").attr("width", "100%");

        }
        $(".flip").click(function () {
            if ($("#nav").is(':visible')) {
                $(".mmenu").slideToggle("slow");
                $("#iframe1").attr("width", "100%");
            }
            else {
                $(".mmenu").slideToggle("slow");
                $("#iframe1").attr("width", "68%");

            }
        });
        return false;
    });
</script>
<input type="button" class="flip" value="Show/Hide menu" />
<div>
    <div id="nav" class="mmenu" style="float: left; border-radius: 10px; border: 5px solid #003366;
        bottom: 50px;">
        <ul type="none">
            <li><a target="collabsoft" href="#">My Profile</a></li>
            <li><a target="collabsoft" href="#">Messages</a></li>
            <li><a target="collabsoft" href="#">My Conferences</a></li>
        </ul>
    </div>
    <iframe id="iframe1" scrolling="no" id="collabsoft" name="collabsoft" src="" style="height: 100%;">
    </iframe>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T15:00:33.397

基本上与 相同的解决方案`@Pakauji Pakau`，但对于一个稍微简单的情况：http: [//jsfiddle.net/RichardTowers/x6djM/1/](http://jsfiddle.net/RichardTowers/x6djM/1/)。

由于显示和隐藏不同的东西，我会明确地使用`show()`and`hide()`而不是`slideToggle()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T15:07:20.917

您还可以使用 DIV 占据左侧的空间并在单击时转移菜单的宽度

```
$(document).ready(function(){
    $("#nav").width($("#nav ul").outerWidth());
    $(".flip").click(function(){
    $(".mmenu").slideToggle("slow");
    $("#nav").width($("#nav ul").outerWidth());
}); 
```

需要更多的工作来保留动画

```
<body>
       <button class="flip">Show.Hide menu</button><br/>
   <div style="display:table;width:100%;border:solid 10px lime">
          <div id="nav" class="mmenu" style="display:table-cell">
             <ul type="none" style="border-radius: 10px; position: fixed; bottom: 75px;border: 5px solid #003366; bottom: 50px;">
                <li><a target="collabsoft" href= "ProfilePage.php?property_variable=mine">My Profile</a></li>
                <li><a target="collabsoft" href= "viewMessages.php">Messages</a></li>
                <li><a target="collabsoft" href= "userHomepage.php">My Conferences</a></li>

             </ul>
          </div>
          <iframe scrolling="no" id="collabsoft" name="collabsoft" style="position: relative; width: 100%; height: 100%;display:table-cell">XXX</iframe>
</div>
</body> 
```

# windows-runtime - WinRT：如何通过电子邮件将消息发送给特定的人？

> ID：10674193
> 
> 赞同：1
> 
> 时间：2012-05-20T14:20:38.737
> 
> 标签：windows-runtime, sharing

我目前正在尝试将[会议应用程序示例](http://slodge.blogspot.co.uk/2012/03/update-on-mvvmcross-sqlbits-conference.html)移植到 WinRT。

在这个应用程序中，用户可以通过某些功能向特定人员发送电子邮件 - 例如，在某些屏幕上，他们可以单击按钮向会议组织者、发言人之一或我 - 应用程序开发人员发送电子邮件。

我查看[了 MSDN 上的 WinRT 文档，](http://msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx)我能找到的唯一可能与电子邮件相关的合同是[共享](http://msdn.microsoft.com/en-us/library/windows/apps/hh758315.aspx)——这似乎也不允许您指定要共享的对象。

WinRT 中是否有一些简单的“发送电子邮件至”方法？例如WP7 中的[EmailComposeTask 之](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.emailcomposetask%28v=vs.92%29.aspx)类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:47:48.070

这是我所做的：

```
Uri uri = new Uri("mailto:" + emailAddress, UriKind.Absolute);
await Launcher.LaunchUriAsync(uri); 
```

它看起来很奇怪，但它确实有效。

这允许您设置电子邮件地址和主题，但不能设置完整的 HTML 正文。

使用共享合约，您可以设置主题和正文，但 - 实际上 - 不是地址。这是有道理的，因为毕竟您不知道您的内容将与哪个应用程序共享。它可能根本不是一个电子邮件应用程序，而是一个博客作者。

# php - Mod-rewrite.htaccess 不工作

> ID：10674194
> 
> 赞同：1
> 
> 时间：2012-05-20T14:20:41.587
> 
> 标签：php, apache, .htaccess, mod-rewrite

嗨，我之前在 Stack Over flow 上发布了一个问题，并且很幸运地收到了对我最初的问题的一些帮助，这帮助我更好地理解我想要实现的目标是可能的。

上一个问题在这里：访问[php url shorting](https://stackoverflow.com/questions/10557955/php-url-shortening)

我正在构建一个系统，用户可以在其中共享他们的个人资料在其他网站上，所以我想知道是否可以缩短实际的 url，这将提供他们个人资料的链接，就像这样，www.somedomain.com/users/profile .php?user=myusername 以简单地删除用户文件夹和个人资料页面，如下所示：www.somedomain.com/myusername

我的代码是：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule  /(.*) /users/profile.php?user=$1 
```

可悲的是发生了两件事，首先代码不起作用，其次当我添加此代码时，原始长域上的 css 停止工作。

任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:26:45.560

`code doesn't work`: 当然不会，因为它不正确。真的很想知道您是如何在没有正确测试的情况下最终接受其他问题的。无论如何，请使用此代码并替换您现有的 .htaccess 代码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php/?$ - [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule  ^(.*)$ users/profile.php?user=$1 [L,QSA,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:33:16.087

这是服务器故障问题。

1.  你正在运行 apache 吗？
2.  是否启用了 apache mod_rewrite 模块？

    debian：a2enmod 重写；/etc/init.d/apache2 重启

3.  是否为此目录启用了覆盖？如果使用默认虚拟主机：

    ```
    <Directory /var/www/>
            #AllowOverride None
            AllowOverride FileInfo
    </Directory> 
    ```

4.  什么显示error.log？尾 /var/log/apache2/error.log

5.  尝试简单版本：

代码：

```
RewriteEngine On
RewriteBase /
RewriteRule  ^profile.php profile.php [QSA,L]
RewriteRule  ^(.*)$ profile.php?user=$1 [QSA,L] 
```

# drupal - Drupal：日历导航器，放置

> ID：10674196
> 
> 赞同：0
> 
> 时间：2012-05-20T14:20:56.930
> 
> 标签：drupal

![在此处输入图像描述](../Images/3a076d511a37560333f497fc623cc89f.png)

我说的是红色标记的“导航器”。我需要将它们移开，以免它们弄乱我的设计。我试图改变很多不同的设置，但没有成功。

这是它的视图：

![在此处输入图像描述](../Images/b558c40efb9485eaa1e61aa4cf4d518c.png)

我应该怎么办？我正在使用以下主题：Pixture Reloaded 7.x-2.2 和 AT Core 7.x-2.2

模块：日历、混沌工具、视图、日期模块..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:49:17.067

我遇到了同样的问题，我昨天解决了一些 css 问题。我在这里与您分享我在我的案例中所做的事情，我认为我也会帮助您或至少在那里工作。

**首先**要修复日历导航的大按钮，您应该在名为“ul.pager li a”或“ul.pager li span”的某个 css 类中查看主题 css 文件，其中必须有一个类似于“display:block”的属性导致此按钮以这种方式显示。我刚刚评论了该属性，它们看起来应该是正常的。

在我的情况下，主题 css 文件是“navigation.css”，该文件中的这个属性位于第 375 行。也许在你的文件中可能是相似的，无论如何你可以检查并找到在哪里使用 firebug 扩展来检查那些按钮。

**第二个**用于修复此导航按钮的位置是类似的，但在日历模块本身的 css 文件中，在修改模块的核心 css 文件后，我建议您覆盖它，将其副本放在模板 css 文件夹中并声明它在模板的 .info 文件中。在我的情况下，文件是 calendar_multiday.css，在第 778 行和第 818 行中有类“.view .date-nav-wrapper .date-prev”和“.view .date-nav-wrapper .date-next”里面它们具有“右”和“左”属性，我控制了必须是此按钮的位置。

这是关于我如何解决它的工作，希望这也对你有用，但如果不是，问题就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:13:04.417

很明显，在 css 中有一些混淆。日历创建的元素很有可能继承了一些css属性。

简单的解决方法是查看他页面的源代码。使用 FireBug(for firefox) 或其他替代方法会更容易找到。您会发现一些 CSS 规则已应用于您的菜单。只需尝试启用和禁用一些 css 规则，看看会发生什么。

当您发现恶作剧时，只需编写一个具有更高优先级的 css 函数，这将否定其他全局规则。

# c# - ExecuteNonQuery 返回随机数而不是返回实际行

> ID：10674200
> 
> 赞同：0
> 
> 时间：2012-05-20T14:21:45.007
> 
> 标签：c#, sql-server-2005

我有以 xml 作为输入的存储过程。

执行 SP 的 C# 代码是

```
using (SqlConnection conn = new SqlConnection(connString))
{
    try
    {
        conn.Open();
        SqlCommand command = new SqlCommand("sp_Configure_Users", conn);
        command.CommandType = CommandType.StoredProcedure;
        var xmlData = new SqlParameter(parameterName: "@XMLDATA", value: GenerateXML(_userDetails));
        command.Parameters.Add(xmlData);

        count = command.ExecuteNonQuery();
        if (count > 0)
        {
            return count;
        }
        else
        {
            return 0;
        }
    }
    catch (SqlException  )
    {

    }
} 
```

GenerateXML 方法返回一个 xml 数据形式的字符串。在我存储的过程中，我删除了 SET NOCOUNT ON 以返回插入、删除或更新时的实际行数。如果我使用示例 xml 数据运行查询:-

```
<UserCollection>
    <InsertList><Users User_Id="438"  First_Name="Praveen"  Middle_Name=""  Last_Name="Kumar"  Designation_Id="1"  Email="" Contact_Number="96533"  Updated_By="pkumar"  />
    </InsertList>
    <UpdateList></UpdateList>
    <DeleteList></DeleteList>
</UserCollection> 
```

返回的值是 3 而不是 1，因为在我的集合中我只传递了一个需要插入的行。因为没有更新或删除的行。当 SP 必须返回 1 时，它如何返回 3？

存储的过程是

```
 set ANSI_NULLS ON
  set QUOTED_IDENTIFIER ON
   go

  ALTER PROCEDURE [dbo].[sp_Configure_Users]
@XMLDATA xml
  AS
 DECLARE @Users_Staging Table(
[User_Id] [int] NOT NULL,
[First_Name] [varchar](200) NOT NULL,
[Middle_Name] [varchar](200) NULL,
[Last_Name] [varchar](200) NOT NULL,
[Designation_Id] [int] NOT NULL,
[Email] [varchar](250) NOT NULL,
[Contact_Number] [varchar](50) NOT NULL,
[Updated_By] [varchar](255) NOT NULL
  )

  BEGIN

  Set nocount off
  Go    

  BEGIN TRY
  BEGIN TRANSACTION

  DECLARE @CurrDate datetime;
  SELECT @CurrDate = GETDATE();
   -- Insert statements for procedure 
  INSERT INTO Users
  ([User_Id]
  ,[First_Name]
  ,[Middle_Name]
  ,[Last_Name]
  ,[Designation_Id]
  ,[Email]
  ,[Contact_Number]
  ,[Updated_By]
  ,[Updated_Date]
  )
  Select    
XMLDATA.item.value('@User_Id[1]', 'int') AS User_Id,    
XMLDATA.item.value('@First_Name[1]', 'varchar(200)') AS First_Name,
XMLDATA.item.value('@Middle_Name[1]', 'varchar(200)') AS Middle_Name,
XMLDATA.item.value('@Last_Name[1]', 'varchar(200)') AS Last_Name,
XMLDATA.item.value('@Designation_Id[1]', 'int') AS Designation_Id,
XMLDATA.item.value('@Email[1]', 'varchar(250)') AS Email,
XMLDATA.item.value('@Contact_Number[1]', 'varchar(50)') AS Contact_Number,
XMLDATA.item.value('@Updated_By[1]', 'varchar(255)') AS Updated_By,
@CurrDate
  FROM @XMLDATA.nodes('//UserCollection/InsertList/Users') AS XMLDATA(item)

  -- Update statements for procedure 

  INSERT INTO @Users_Staging
       ([User_Id]
  ,[First_Name]
  ,[Middle_Name]
  ,[Last_Name]
  ,[Designation_Id]
  ,[Email]
  ,[Contact_Number]
  ,[Updated_By])

Select  
XMLDATA.item.value('@User_Id[1]', 'int') AS User_Id,    
XMLDATA.item.value('@First_Name[1]', 'varchar(200)') AS First_Name,
XMLDATA.item.value('@Middle_Name[1]', 'varchar(200)') AS Middle_Name,
XMLDATA.item.value('@Last_Name[1]', 'varchar(200)') AS Last_Name,
XMLDATA.item.value('@Designation_Id[1]', 'int') AS Designation_Id,
XMLDATA.item.value('@Email[1]', 'varchar(250)') AS Email,
   XMLDATA.item.value('@Contact_Number[1]', 'varchar(50)') AS Contact_Number,
XMLDATA.item.value('@Updated_By[1]', 'varchar(255)') AS Updated_By
  FROM @XMLDATA.nodes('//UserCollection/InsertList/Users') AS XMLDATA(item)

  UPDATE Users 
  SET First_Name=stgusr.First_Name,
  Middle_Name=stgusr.Middle_Name,
  Last_Name=stgusr.Last_Name,
  Email=stgusr.Email,
  Contact_Number=stgusr.Contact_Number,
  Updated_By=stgusr.Updated_By,
  Updated_Date=@CurrDate
  FROM Users usr INNER JOIN
  @Users_Staging stgusr
  ON usr.User_Id=stgusr.User_Id

-- Delete statements for procedure 

   DELETE Users
   WHERE User_Id
     IN (Select         
    XMLDATA.item.value('@User_Id[1]', 'int') AS User_Id
FROM @XMLDATA.nodes('//UserCollection/DeleteList/Users') AS XMLDATA(item))

   COMMIT TRANSACTION;

   END TRY

   BEGIN CATCH
--EXEC sp_rethrow_error;
ROLLBACK TRANSACTION;
    END CATCH; 
   END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:26:56.003

如果您的存储过程更新/插入的表上有触发器，它们将影响受影响的行数：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。
> [参考](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)。

建议您发布所涉及表的存储过程和架构/触发器。

# objective-c - 使用块比较 NSMutableArray

> ID：10674201
> 
> 赞同：0
> 
> 时间：2012-05-20T14:21:49.593
> 
> 标签：objective-c, nsmutablearray, nsarray

我有`NSMutableArray* names`，其中包含 NSStrings。我想用`caseInsensitiveCompare`方法对数组进行排序。

这是我写的代码：

```
names= [names sortedArrayUsingComparator: ^ NSComparisonResult (id obj1, id obj2)
            {
                return [obj1 caseInsensitiveCompare: obj2];
            }]; 
```

问题是它`sortedArrayUsingComparator`返回一个 NSArray 而不是 NSMutableArray，并且我在运行时收到此代码的警告和问题。
有没有办法将 NSArray 转换为 NSMutableArray？还是我必须复制所有元素？最后一个解决方案很昂贵：有人可以提出一个好的、低开销的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:31:32.110

请注意，您正在使用的函数的名称 ( `sortedArrayUsingComparator`) 告诉您它将返回一个数组而不是一个可变数组。使用 NSArray 的 mutableCopy 方法获取可变副本。

```
names= [[names sortedArrayUsingComparator: ^ NSComparisonResult (id obj1, id obj2)
       {
           return [obj1 caseInsensitiveCompare: obj2];
       } ] mutableCopy]; 
```

或者，更易于阅读/遵循：

```
NSArray *namesArray = [names sortedArrayUsingComparator:^NSComparisonResult (id obj1, id obj2) {
       return [obj1 caseInsensitiveCompare: obj2];
       }];
names = [namesArray mutableCopy]; 
```

# android - 我想把正方形排成一排

> ID：10674214
> 
> 赞同：1
> 
> 时间：2012-05-20T14:23:40.140
> 
> 标签：android, bitmap, ondraw

嗨朋友们，我想连续制作正方形，但我做不到。我的代码如下。你能帮助我吗？

```
int x=10,y=10;
@Override
protected void onDraw(Canvas canvas)
{
    super.onDraw(canvas);

    Paint p= new Paint();

    for(int i=1;i<6;i++)
    {
        canvas.drawBitmap(kutu, x,y, p);
        x +=50;
    }

    invalidate();
} 
```

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:53:33.833

两个问题：

*   您需要`x`在方法开始时重置`onDraw`（理想情况下，`x`应该是局部变量，而不是字段）

*   删除对`invalidate`

# objective-c - UIImageView 子类中的自定义初始化程序 - 是否需要覆盖 initWithImage 或 initWithFrame 初始化程序？

> ID：10674221
> 
> 赞同：0
> 
> 时间：2012-05-20T14:24:50.493
> 
> 标签：objective-c, ios, initialization

我的类是 UIImageView 的子类。我像这样创建我的自定义初始化程序

```
@interface FishView : UIImageView
@end

@implementation FishView

- (id)initWithFishType:(FishType)fishType {

    self = [super init];
    if (self) {
        //my custom initialization
    }
    return self;

} 
```

是否有必要覆盖initWithImage？

```
- (id)initWithImage:(UIImage)image
{
    self = [super initWithImage:image];
    if (self) {
        [self initWithFishType:FTNone];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:28:53.143

仅当您打算在代码中调用 initWithImage 并希望它做一些特别的事情时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T22:35:37.370

如果你想要额外的功能，你只需要覆盖。

但是，如果我将您的问题理解为：“我需要自定义初始化功能，它应该进入`initWithImage`还是`initWithFrame`？那么答案会更复杂。那么您实际上需要覆盖一堆初始化程序，请参阅

*   [如果一个类没有记录的指定初始化程序怎么办？](https://stackoverflow.com/questions/13146901/what-if-a-class-has-no-documented-designated-initializer/19235814#19235814)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T03:52:00.750

在 Swift 2 中，子类唯一必要的初始化器`UIImageView`是

```
required init?(coder: NSCoder) { super.init(coder: coder) } 
```

# c# - C# 中带有圆角边框的表单？

> ID：10674228
> 
> 赞同：12
> 
> 时间：2012-05-20T14:25:23.893
> 
> 标签：c#, visual-c#-express-2010, formborderstyle

我正在使用此代码使表单没有边框样式：

```
this.FormBorderStyle = FormBorderStyle.None; 
```

我需要在表格上制作圆形边缘。

有没有简单的方法？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:31:22.440

看看这个：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.region.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.region.aspx)

Form 类继承自 Control 类，因此请尝试执行与**Form 的 Region 属性**的链接相同的示例（当然也可以在 form 事件中执行）：

```
 // This method will change the square button to a circular button by 
// creating a new circle-shaped GraphicsPath object and setting it 
// to the RoundButton objects region.
private void roundButton_Paint(object sender, 
    System.Windows.Forms.PaintEventArgs e)
{

    System.Drawing.Drawing2D.GraphicsPath buttonPath = 
        new System.Drawing.Drawing2D.GraphicsPath();

    // Set a new rectangle to the same size as the button's 
    // ClientRectangle property.
    System.Drawing.Rectangle newRectangle = roundButton.ClientRectangle;

    // Decrease the size of the rectangle.
    newRectangle.Inflate(-10, -10);

    // Draw the button's border.
    e.Graphics.DrawEllipse(System.Drawing.Pens.Black, newRectangle);

    // Increase the size of the rectangle to include the border.
    newRectangle.Inflate( 1,  1);

    // Create a circle within the new rectangle.
    buttonPath.AddEllipse(newRectangle);

    // Set the button's Region property to the newly created 
    // circle region.
    roundButton.Region = new System.Drawing.Region(buttonPath);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-05T09:34:15.480

```
 public static void RoundBorderForm(Form frm)
    {

        Rectangle Bounds = new Rectangle(0, 0, frm.Width, frm.Height);
        int CornerRadius = 20;
        System.Drawing.Drawing2D.GraphicsPath path = new System.Drawing.Drawing2D.GraphicsPath();
        path.AddArc(Bounds.X, Bounds.Y, CornerRadius, CornerRadius, 180, 90);
        path.AddArc(Bounds.X + Bounds.Width - CornerRadius, Bounds.Y, CornerRadius, CornerRadius, 270, 90);
        path.AddArc(Bounds.X + Bounds.Width - CornerRadius, Bounds.Y + Bounds.Height - CornerRadius, CornerRadius, CornerRadius, 0, 90);
        path.AddArc(Bounds.X, Bounds.Y + Bounds.Height - CornerRadius, CornerRadius, CornerRadius, 90, 90);
        path.CloseAllFigures();

        frm.Region = new Region(path);
        frm.Show();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-07T18:18:46.003

我知道这个问题已经得到解答，我想添加一个替代方案和愚蠢但不是真正推荐的做法，因为您的问题不会将答案限制为代码......

*   创建一个空白的方形图像，背景颜色作为填充，然后将左上角的圆角擦除为透明，对所有角重复此操作
*   将一种不太可能的颜色设置为表单背景颜色
*   将此颜色设置为`TransparencyKey`表单上的
*   将图像添加为`PictureBox`并将它们放在相应的角落

*中提琴！*

# tdd - 在测试方法中使用相同的常数值有什么优缺点？

> ID：10674231
> 
> 赞同：1
> 
> 时间：2012-05-20T14:25:34.073
> 
> 标签：tdd

我对 TDD 很陌生。我正在阅读[TDD By Example](https://rads.stackoverflow.com/amzn/click/com/0321146530)，它说“永远不要尝试使用相同的常数来表示不止一件事”，并且它显示了一个`Plus()`方法示例。

在我看来，使用相同常量值的 Plus(1, 1) 和 Plus(1, 2) 之间没有区别。我想知道在测试方法中使用相同的常数值有什么优缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:32:54.740

我认为您误解了该声明。作者（恕我直言）试图传达的是，以下代码是灾难的根源。

```
const SomeRandomValue = 32;
...
// Plus testcase
Plus(SomeRandomValue, SomeRandomValue)
...
// Divide testcase
Divide(SomeRandomValue, SomeRandomValue) 
```

您有两个测试用例重用了一个非**描述性**常量。没有办法知道更改`SomeRandomValue`为`0`您的测试套件会失败。

一个更好的命名是这样的

```
const AdditionValue = 32;
const DivisorValue = 32;
...
// Plus testcase
Plus(AdditionValue, AdditionValue)
...
// Divide testcase
Divide(DivisorValue, DivisorValue) 
```

常量的用途应该很明显。在创建测试用例时，您不应该拘泥于*代码*重用的想法。

或者换句话说：

> 我认为在多个测试用例中重用该常量没有任何问题`DivisorValue`> 但是试图以代码重用的名义将一个值硬塞到一个非描述性变量中肯定是有问题的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T17:53:56.307

如果您在测试中使用相同的值 - 就像在`Plus(1, 1)`- 您的代码可能会因为错误的原因而工作。这是一个实现`Plus`，它将通过这样的测试，但通过不同值的测试失败。

```
public int Plus (int a, int b) {
    return a + a;
} 
```

避免这种风险的测试比让此类错误溜走的测试更好。

# objective-c - 在 Select 查询中用变量的值替换变量

> ID：10674232
> 
> 赞同：0
> 
> 时间：2012-05-20T14:25:34.803
> 
> 标签：objective-c, sql, ios, sqlite

这是我的情况，我想在选择查询中使用 NSString 变量：

```
NSString *arrayThemeList=@"element1, element2, element3";
if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
    {
        NSString *querySQL = [NSString stringWithFormat: 
                              @"SELECT * from table1 where type IN ?"];

        const char *query_stmt = [querySQL UTF8String];

        if (sqlite3_prepare_v2(contactDB, 
                               query_stmt, -1, &statement, NULL) == SQLITE_OK)
        {
            sqlite3_bind_text(statement, 1, [arrayThemeList UTF8String], -1, SQLITE_TRANSIENT);

            while (sqlite3_step(statement) == SQLITE_ROW)
            {

               //Do the rest work... 
```

显然，我想`arrayThemeList`在语句中使用 into 查询`bind`。

但是，这似乎没有给出想要的结果，我做错了什么吗？提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:30:46.103

IN 子句应将条目括在括号中。尝试：

```
 NSString *querySQL = [NSString stringWithFormat: 
                          @"SELECT * from table1 where type IN ( ? )"]; 
```

此外，您的字符串需要包含在内，因此将第一行更改为：

```
NSString *arrayThemeList=@"'element1', 'element2', 'element3'"; 
```

结果查询应该是：

```
SELECT * from table1 where type IN ( 'element1', 'element2', 'element3' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:00:30.123

如果要将变量绑定到 IN 列表的某些部分，则需要在 IN 列表周围加上一些括号，并且每个单独的值必须有一个占位符（问号）：

```
SELECT * FROM table1 WHERE type IN (?, ?, ?); 
```

然后绑定三个单独的值，每个占位符一个。没有办法（在大多数 SQL DBMS 中；我认为在 SQLite 中也没有）将值列表绑定到单个占位符。

如果您仅以单个字符串的形式获取数据，那么您将不得不在准备语句之前格式化 SQL，并且您放弃了重用具有不同值的准备好的语句的能力，并且您必须担心[SQL 注入](http://xkcd.com/327)。此外，如果您正在处理字符串值，则需要将每个字符串括在单引号中（并转义 - 通过加倍 - 任何嵌入的单引号）。

# ubuntu - python-software-properties 的文档

> ID：10674235
> 
> 赞同：5
> 
> 时间：2012-05-20T14:26:09.057
> 
> 标签：ubuntu

我正在编写一些 bash 脚本来配置我的 Linode 服务器。我正在尝试为 python-software-properties 包查找一些文档。安装此软件包增加了执行以下操作的能力：

```
$ add-apt-repository ppa:nginx/stable 
```

有人知道我在哪里可以找到有关 python-software-properties 的文档，或者知道它添加的额外命令吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:33:57.537

“知道它添加的额外命令” -`dpkg -L python-software-properties`仅显示`add-apt-repository`/usr/bin/ 中的，因此它是此软件包添加的唯一命令。

有关`man add-apt-repository`文档，请参阅。

# tic-tac-toe - 是否可以使用 4 * 4 板井字游戏应用 Minimax 或需要 Alpha-Beta 修剪？

> ID：10674241
> 
> 赞同：0
> 
> 时间：2012-05-20T14:26:19.797
> 
> 标签：tic-tac-toe, minimax, alpha-beta-pruning

我在 java 中实现了一个 3 * 3 Tic Tac Toe 游戏，仅应用 Minimax 算法。但是，当我将板尺寸更改为 4 * 4 时，程序似乎挂起。我想问我是否应该应用带有 alpha-beta 修剪的 Minimax 来解决这个问题，或者 Minimax 本身可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:04:39.527

如果您尝试进行全深度搜索，则需要使用 alpha-beta。一个朴素的 4 x 4 搜索树有 16 个！或大约 21 万亿个节点。许多这些节点不需要搜索，因为另一方通过在下一步中获胜或创建一个迫使稍后获胜 2 层的位置来反驳祖先位置。Alpha-beta 将让您在不遍历它们的情况下切掉其中一些搜索空间。

# c++ - 如何设计一个固定时间长度的循环缓冲区？

> ID：10674242
> 
> 赞同：0
> 
> 时间：2012-05-20T14:26:23.357
> 
> 标签：c++, algorithm

boost::circular_buffer 不能提供固定长度的缓冲区，例如大小为 5。

想象我有带有时间戳的实时数据流。我想在最后 5 分钟内保留所有元素的缓冲区。

天真地，我可以构建一个 std::list 的包装器，每次有一个新的数据点 D 进来，我 push_back(D)，然后对 pop_front() 超过 5 分钟的所有数据点做一个 while 循环。

这种设计的问题是，我必须为每个点构造一个新实例，这似乎是在浪费时间（这是一个使用非常频繁的对象）

这里有人有更优雅的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:30:03.237

列表或双端队列都适用于环形缓冲区。如果您的对象可以简单地复制并且很小，您可以只使用双端队列，而不必担心内存实例。如果你有更大的数据，你可以使用列表和自定义对象池（这样旧的未使用的对象将被重复使用以供将来添加）。

如果您不喜欢 std 集合对象池语义（在 C++11 之前很糟糕，我现在不确定），那么您可以简单地将指针存储在双端队列中并管理您自己的内存。

# html - 下拉菜单向上而不是向下

> ID：10674244
> 
> 赞同：2
> 
> 时间：2012-05-20T14:26:40.117
> 
> 标签：html, css, drop-down-menu

不知何故，我的下拉菜单没有下降，而是进入顶部：[http://fawky.de/fawky/powerbikes/index.html](http://fawky.de/fawky/powerbikes/index.html)这是我的完整 CSS，是什么阻止它下降吗？使用顶部：50px；也没有用。

[http://pastebin.com/YqifT4JW](http://pastebin.com/YqifT4JW)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:55:12.990

首先`position:absolute`从`.topmenu li`. 然后你应该使用`visibility: hidden;`而不是`display: none;`隐藏子菜单。这样子菜单被隐藏，但它的空间被保留（[更多信息](http://www.w3schools.com/css/css_display_visibility.asp)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:30:44.943

从`position:absolute`_`.topmenu li`

# iphone - 移除身体上的固定装置 (cocos2d/box2d)

> ID：10674252
> 
> 赞同：0
> 
> 时间：2012-05-20T14:28:07.917
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我有几个球在屏幕上弹跳，每个都有自己的身体，可以相互弹跳。用户可以拿起一个球并在屏幕上拖动它。

我想“杀死”选定的球，以便只要用户触摸它，它就会暂时从空间中移除。所以其他球会弹跳通过它，就好像它不存在一样。释放后，球将恢复其物理特性并可以继续弹跳。

我应该如何执行这个？我应该完全移除身体并在 touchEnded 时重新创建它吗？任何想法或帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:59:42.670

我相信您不能向现有机构添加/删除固定装置。实现您想要的方法是禁用主体（将其活动状态设置为 false）。您还可以更改它的碰撞过滤器/遮罩，使其不会与某些游戏对象发生碰撞，但仍会与世界边界发生碰撞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:52:49.100

您可以将 Box2D 主体包装在一个自定义类中，该类将保留定义（bodyDef 和 fixtureDef 是可重用的）然后您可以：

*   销毁/重新创建位置 0, 0 上由触摸移动的现有主体上的夹具
*   或在触摸位置销毁/重建整个身体

我相信管理固定装置对性能更好。

# macos - Mail.app 插件 - 工具栏按钮

> ID：10674253
> 
> 赞同：1
> 
> 时间：2012-05-20T14:28:11.193
> 
> 标签：macos, cocoa, email, plugins, apple-mail

如何在 Apple Mail 的工具栏中添加一个按钮？

据我了解，我需要“调整” MessageViewer 类的一些方法（这是 Mail.app 的第一响应者窗口）。多亏了几个开源邮件插件，我设法实现了一个可以显示窗口、工作表、对事件做出反应的基本插件。我还设法获得了 Mail.app 的类转储，其中列出了邮件的所有类/方法邮件应用程序。

我见过几个人声称已经实现了这个，还有一个免费的邮件存档插件在工具栏上添加了一个按钮..

你能指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:02:42.437

我不确定你的问题是什么。

[BetterDictionary](https://github.com/pooriaazimi/BetterDictionary)是我不久前写的一个 Dictionary.app 插件。查看[`-(void) initToolbarItems`](https://github.com/pooriaazimi/BetterDictionary/blob/master/BetterDictionary/BetterDictionary.m#L90)方法以了解我是如何做到的（应用程序如何到达那里？`+(void)load --> -(id)init --> -(void)initToolbarItems`）。

# android - 不是库中的 jar 文件

> ID：10674257
> 
> 赞同：0
> 
> 时间：2012-05-20T14:28:28.540
> 
> 标签：android, jar

我知道这是一个新手的问​​题，但我一直在寻找超过 3 个小时并没有找到答案..

我想在测试应用程序中实现一个库，但是直到现在，我使用的所有库都通过文件“jar”包含在项目中

我正在寻找这样的库：

[https://github.com/walkingice/gui-sliding-sidebar](https://github.com/walkingice/gui-sliding-sidebar)

...没有文件类型“jar”的地方

老实说，我不知道如何将这些库添加到我的项目中，我读到了这个：

```
$ Git clone <this project>

$ Cd <project>

$ Android update project-p.

$ Debug install android 
```

不知道有没有关系

很抱歉给您带来不便并感谢您的帮助

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:36:42.910

> 我正在寻找这样的库：

它不是图书馆。它是一个应用程序。

> 老实说，我不知道如何将这些库添加到我的项目中

您将该项目的相关源代码（可能还有资源）复制到您自己的项目中。

> 我读到了这个：

项目页面上的实际说明将在设备或模拟器上安装应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:34:11.657

您将需要编译该第三方项目，该项目将创建一个 jar（很可能；否则您需要自己创建 jar 以包含所有生成的 .class 文件）；然后像处理其他 jar 一样引用该 jar。

# java - 在 Play Framework 1.x 中保存模型之前执行一个方法

> ID：10674259
> 
> 赞同：0
> 
> 时间：2012-05-20T14:28:33.097
> 
> 标签：java, jpa, playframework, playframework-1.x

如何在保存模型之前执行方法？

例如，在用户模型中散列密码。

`@Before`模型似乎不存在注释。

我正在使用 PlayFramework 1.2.x

PS：我计划将它与 CRUD 模块一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:35:28.327

查看`Pre*`JPA 中的注释集合。例如[`PrePersist`](http://docs.oracle.com/javaee/6/api/javax/persistence/PrePersist.html)和[`PreUpdate`](http://docs.oracle.com/javaee/6/api/javax/persistence/PreUpdate.html)。

在您的模型中，只需将您需要的注释粘贴到您要调用的方法上。

```
@PrePersist
public void hashPassword(){
    // do stuff
} 
```

* * *

另一种选择可能是[覆盖特定模型的`save()`方法](https://stackoverflow.com/questions/5417647/save-and-save-models-methods-in-playframework/5419083#5419083)，但除非完全必要，否则我不会这样做。如果他们提供解决方案，我会坚持使用 JPA API，但这只是我的意见。

# javascript - Javascript中具有一定单元格大小的二维数组

> ID：10674260
> 
> 赞同：-5
> 
> 时间：2012-05-20T14:28:48.647
> 
> 标签：javascript

我想实现一个 2 dim 数组，每个单元格都具有相同的大小，因为我需要在画布上绘制它。（例如 10 像素）

我怎样才能做到这一点？

谢谢！

到目前为止的代码：

`Array[0][0] = myArray;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:43:48.080

Javascript 中没有二维数组，所以必须使用锯齿状数组，即数组数组。

使用文字数组对其进行初始化：

```
var arr = [[ 1, 2, 3 ], [ 4, 5, 6 ]]; 
```

或者 Array 构造函数：

```
var arr = new Array(10);
for (var i = 0; i < 10; i++) {
  arr[i] = new Array(10);
} 
```

数组不是视觉元素，因此要显示它，您将遍历每个外部和内部数组，并绘制代表每个项目的东西。

# objective-c - NSMutableDictionary 错误地设置对象

> ID：10674261
> 
> 赞同：0
> 
> 时间：2012-05-20T14:28:49.850
> 
> 标签：objective-c, ipad, singleton, nsmutabledictionary

我有一个单例类，我在其中设置了一个`NSMutableDictionary`被调用的`completedLevels`.

这就是我设置它的方式（在`init`我的单例方法中）：

```
 NSString *mainPath = [[NSBundle mainBundle] bundlePath];
        NSString *levelConfigPlistLocation = [mainPath stringByAppendingPathComponent:@"levelconfig.plist"];
        NSDictionary *levelConfig = [[NSDictionary alloc] initWithContentsOfFile:levelConfigPlistLocation];
        completedLevels = [[NSMutableDictionary alloc]init];
        NSMutableDictionary *levelSets = [[NSMutableDictionary alloc]init];
        NSMutableDictionary *levels = [[NSMutableDictionary alloc]init];
        NSMutableDictionary *stats = [[NSMutableDictionary alloc]init];

        [stats setObject:[NSNumber numberWithBool:NO] forKey:@"levelDone"];
        [stats setObject:[NSNumber numberWithInt:0] forKey:@"stars"];
        [stats setObject:[NSNumber numberWithInt:0] forKey:@"time"];
        [stats setObject:[NSNumber numberWithInt:0] forKey:@"bestTime"];

        for (int i = 1; i<=18; i++) {
            [levels setObject:stats forKey:[NSString stringWithFormat:@"level%d", i]];
        }

        for(int i= 1; i<=15;i++){
        NSString *lvlSet = [NSString stringWithFormat:@"levelSet%d", i];
            [levelSets setObject:levels forKey:lvlSet];
        }

        NSArray *categoriesArray = [levelConfig objectForKey:@"categoriesArray"];

        for (int i=0; i<[categoriesArray count]; i++) {
            NSString *category = [[levelConfig objectForKey:@"categoriesArray"]objectAtIndex:i];
            [completedLevels setObject:levelSets forKey:category];
        } 
```

我想解释一下我的所作所为：

我的意图是以这种形式创建一个字典：

```
 category =     {
        levelSet1 ={
              level1 ={
                 bestTime = 0;
                 levelDone = 0;
                 stars = 0;
                 time = 0;
                };
               level2={
                 bestTime = 0;
                 levelDone = 0;
                 stars = 0;
                 time = 0;
               };
              . 
              . 
              .
            }
          levelSet2 ={
              level1 ={
                 bestTime = 0;
                 levelDone = 0;
                 stars = 0;
                 time = 0;
                };
               level2={
                 bestTime = 0;
                 levelDone = 0;
                 stars = 0;
                 time = 0;
               };
              . 
              . 
              .
            }
         .
         . 
         .
       } 
```

在 levelSet 的情况下 %d 是从 1 到 15 的整数。

%d 在级别的情况下是从 1 到 18 的整数。

我有几个类别，因此有多组上​​面的示例。

这很好用，在调用 NSLog 时，字典会出现在我的控制台中。但是，当我想更改字典中的某些条目时，就会出现问题，如下例所示：

```
 NSString *category = [[GameStateSingleton sharedMySingleton]getCurrentCategory];
    NSString *levelSet = [NSString stringWithFormat:@"levelSet%d",[[GameStateSingleton sharedMySingleton]getSharedLevelSet]];
    NSNumber *currentLevel = [NSNumber numberWithInt:[[GameStateSingleton sharedMySingleton]getSharedLevel]];
    NSString *levelString = [NSString stringWithFormat:@"level%d", [currentLevel intValue]];

    NSMutableDictionary *categories = [[NSMutableDictionary alloc]initWithDictionary:
    [[GameStateSingleton sharedMySingleton]getCompletedLevels]];

    [[[[categories objectForKey:category]objectForKey:levelSet]objectForKey:levelString]setObject:[NSNumber numberWithBool:YES] forKey:@"levelDone"];

    [[GameStateSingleton sharedMySingleton]setCompletedLevels:categories];
    NSLog(@"%@",[[GameStateSingleton sharedMySingleton]getCompletedLevels]); 
```

解释一下：

当玩家完成关卡时，我希望`levelDone`条目更改其值。但是当我之后记录它时，突然所有`levelDone`类别的所有条目都变为布尔值 1。这是为什么呢？

**- - - - - - - - - - 更新 - - - - - - - - - - - -**

```
completedLevels = [[NSMutableDictionary alloc]init];
        NSMutableDictionary *levelSets = [[NSMutableDictionary alloc]init];
        NSMutableDictionary *levels = [[NSMutableDictionary alloc]init];
        NSMutableDictionary *stats = [[NSMutableDictionary alloc]init];

        [stats setObject:[NSNumber numberWithBool:NO] forKey:@"levelDone"];
        [stats setObject:[NSNumber numberWithInt:0] forKey:@"stars"];
        [stats setObject:[NSNumber numberWithInt:0] forKey:@"time"];
        [stats setObject:[NSNumber numberWithInt:0] forKey:@"bestTime"];

        for (int i = 1; i<=18; i++) {
            NSMutableDictionary *statsCopy = [stats mutableCopy];
            [levels setObject:statsCopy forKey:[NSString stringWithFormat:@"level%d", i]];
            [statsCopy release];
        }

        for(int i= 1; i<=15;i++){
            NSString *lvlSet = [NSString stringWithFormat:@"levelSet%d", i];
            NSMutableDictionary *levelsCopy = [levels mutableCopy];
            [levelSets setObject:levelsCopy forKey:lvlSet];
            [levelsCopy release];
        }

        NSArray *categoriesArray = [levelConfig objectForKey:@"categoriesArray"];

        for (int i=0; i<[categoriesArray count]; i++) {
            NSString *category = [[levelConfig objectForKey:@"categoriesArray"]objectAtIndex:i];
            NSMutableDictionary *levelSetsCopy = [levelSets mutableCopy];
            [completedLevels setObject:levelSetsCopy forKey:category];
            [levelSetsCopy release];

        } 
```

我检索和设置它的部分保持不变......

****__ *_* __ *_* __ *_* __ *_* __ *_* __** **解决方案** ***_* __ *_* __ *_* __ *_* __ *_* __ *_* ____****

 **```
NSMutableDictionary *mutableCopy = (NSMutableDictionary *)CFPropertyListCreateDeepCopy(kCFAllocatorDefault, (CFDictionaryRef)originalDictionary, kCFPropertyListMutableContainers); 
```

我用这种方法做了深拷贝。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:36:55.760

基本上，问题在于您将每个级别的级别字典设置为相同的统计对象：

```
 for (int i = 1; i<=18; i++) {
        [levels setObject:stats forKey:[NSString stringWithFormat:@"level%d", i]];
    } 
```

相反，您需要将它们分别设置为对象的不同可变副本：

```
 for (int i = 1; i<=18; i++) {
        NSMutableDictionary *statsCopy = [stats mutableCopy];
        [levels setObject:statsCopy forKey:[NSString stringWithFormat:@"level%d", i]];
        [statsCopy release];
    } 
```

那应该为您解决第一部分。但是，levelSets 也有同样的问题。基本上，每当您添加一个可变字典时，您都需要确定您是否尝试指向同一个可变对象（您希望它们保持同步），或者您是否想要该可变对象的副本（因此，它们独立运行）。当您考虑构建这种树结构时，这意味着您需要在每个级别上都查看它。

因此，查看其余代码，您还需要以相同的方式修复关卡集和类别，方法是在每个循环内制作一个可变副本，然后添加该可变副本而不是添加原始对象。而且，由于您想要改变字典内容的内容，因此每次制作包含另一个可变字典的可变副本时，您都需要在每个深度制作该副本。

您将不得不在深度构建这些东西或进行深度复制之间做出选择。还有另一个问题： [NSMutableDictionary 的深层可变副本](https://stackoverflow.com/questions/1950361/deep-mutable-copy-of-a-nsmutabledictionary) 很好地涵盖了可变字典的深层副本。或者，您可以反转结构的构建，以便构建每个字典，而不是复制，除了`stats`您可以轻松复制的字典。

深拷贝创建每个可变条目的副本，一直到最远的叶节点。如果您将 NSMutableDictionaries 视为一棵树，树的底部位于顶部（在您的情况下为 completedLevels），叶子作为您复制的统计信息 NSMutableDictionaries 的元素，您希望单独操作树的每个元素，无论是它是叶节点或任何中间节点。

可以作如下说明，这代表了 的内容`MyDictionary`：

```
 Top-A:
        Second-A-1
        Second-A-2
 Top-B:
        Second-B-1
        Second-B-2 
```

回顾一下，`MyDictionary`顶部有 2 个键（`Top-A`, `Top-B`），每个键都与一个单独的 NSMutableDictionary 对象相关联。这些 NSMutableDictionaries 中的每一个都有 2 个键，每个键与一个单独的对象相关联。

当你创建一个`-mutableCopy`of`MyDictionary`时，结果是一个`NSMutableDictionary`带有 2 个键 ( `Top-A`, `Top-B`) 的新的，每个键与一个 NSMutableDictionary 相关联。 **但是**，这些`NSMutableDictionary`对象实际上与 中的对象相同`MyDictionary`。这是一个浅拷贝，意味着有一个新的顶级对象（ 的可变副本`MyDictionary`），但与新字典中的每个键关联的对象与与 中的键关联的对象相同`MyDictionary`。因此，如果您`Top-A`在副本中更改与不同的 相关联`NSMutableDictionary`，那么`Top-A`in`MyDictionary`和副本将不再相同。但是，如果您更改与 关联的值`Second-A-1`，它将同时`MyDictionary`更改`MyDictionary`因为`Top-A`指向单个对象。

当您进行深度复制时，该实用程序会单独复制每个字典的每个元素，这意味着副本`MyDictionary`将具有与 中存在的元素不同的`Top-A`、`Second-A-1`、`Second-A-2`、`Top-B`等`MyDictionary`，因此，您可以更改任何字典（无论多深），而不必担心更改其他对象。**

# github - github README 中的代码着色

> ID：10674271
> 
> 赞同：13
> 
> 时间：2012-05-20T14:30:22.907
> 
> 标签：github

我使用 github。我的 README.md 包含代码示例。使用浏览器在 github 中查看我的 README 时，如何使此代码以彩色显示？我愿意使用要点，但不确定如何将它们集成到自述文件中。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-20T14:36:47.460

您可以像这样添加语言提示：

```
```javascript
// Your code here
``` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-06T09:29:30.533

像这样用```开始和结束块

```
```
// your code block here
``` 
```

或者，您可以像这样在第一个 ``` 之后添加语言标识符，如 'ruby'

```
```<language identifier>
//  your code block here
``` 
```

# php - 用组合框排序？

> ID：10674272
> 
> 赞同：0
> 
> 时间：2012-05-20T14:30:40.080
> 
> 标签：php, javascript, mysql, function

我需要你的帮助:)...当我们在组合框中选择“信息”列表时，自动显示类型为“信息”特征的文章，当我们在组合框中选择“Berita”列表时，自动显示类型为“信息”的文章'Berita' 的特征出现了.. 这是我的代码......它是一个长脚本 TT 并且它使用 post 方法.. 你能帮我让它简单一点吗？也许使用功能。谢谢之前

```
<form method="post" name="form2">
  <select name="type" id="type">
    <option value="Semua">Semua</option>
    <option value="Berita">Berita</option>
    <option value="Info">Info</option>
  </select>
  <input type="submit" id="type" />
</form>

<table width="200" border="1" class="tbl_art_content" id="results">
<tbody>
  <tr>
  </tr>
    <?php
        $i=0;
        $no=0;
            if($_POST['type'] == 'Semua')
            {
                $query_art = mysql_query("SELECT * FROM artikel_tbl ORDER BY id") or die(mysql_error());
            }
            else if ($_POST['type'] == 'Berita')
            {
                $query_art = mysql_query("SELECT * FROM artikel_tbl WHERE type = 'Berita' ORDER BY id") or die(mysql_error());
            }
            else if ($_POST['type'] == 'Info')
            {
                $query_art = mysql_query("SELECT * FROM artikel_tbl WHERE type = 'Info' ORDER BY id") or die(mysql_error());
            }
            else
            {
                $query_art = mysql_query("SELECT * FROM artikel_tbl ORDER BY id") or die(mysql_error());
            }
            while($show=mysql_fetch_array($query_art))
            { 
                $no++;
                if(($no%2)==0)
                    $color = '#f2f2f2'; 
                else
                    $color = '#f9f9f9';
    ?>
  <tr bgcolor="<?php echo $color; ?>" class="rows">
    <td class="chk_content"><input type="checkbox" name="checked<?php echo $i; ?>" value="<?php echo $show['id']; ?>"/></td>
    <td class="no_content"><?php echo $no; ?></td>
    <td class="middle_content"><?php echo $show['judul']; ?></td>
    <td class="middle_content"><?php echo $show['penulis']; ?></td>
    <td class="middle_content"><?php echo $show['type']; ?></td>
    <td class="middle_content"><img src=".././upload/artikel/<?php echo $show['foto']; ?>" width="144" height="88"/></td>
    <td class="middle_content"><?php echo $show['tanggal']; ?></td>
    <td class="aksi_content"><div id="aksi_table">
            <ul>
                <li><a href="table_artikel.php?edit=<?php echo $show['id']; ?>"><img src="images/Apps-text-editor-icon.png" width="20" height="20" /></a></li>
                <li><a href="table_artikel.php?delete=<?php echo $show['id']; ?>" onclick="return confirm('Hapus artikel?')";><img src="images/Remove-icon.png" width="20" height="20"/></a></li>
            </ul>
        </div><!-- end of aksi_table --></td>
  </tr>
    <?php
        $i++; 
        }
    ?>
    <input type="hidden" name="n" value="<?php echo $i; ?>" /> 
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:08:55.527

对于初学者，试试这个：

```
$type = '';
if(isset($_POST['type'])):
    $type = $_POST['type'];
endif;
if($type != 'Semua'):
    $query_art = mysql_query("
    SELECT    * 
    FROM      artikel_tbl 
    WHERE     type = '$type' 
    ORDER BY  id") or die(mysql_error());
else:
    $query_art = mysql_query("
    SELECT    * 
    FROM      artikel_tbl 
    ORDER BY  id") or die(mysql_error());
endif; 
```

# php - 从跨度字段提交值

> ID：10674277
> 
> 赞同：1
> 
> 时间：2012-05-20T14:30:57.007
> 
> 标签：php, jquery, html, submit, form-submit

我有一个带有提交按钮的 from

使用 jquery 后，页面将具有：

```
for(var i=0 ; i <10 ; i++){
    '<span class="ioAddConcept">'+ currentConcept[i] +'</span>\n\
                  with\n\
                  <span class="ioAddRelation">'+ currentRelation[i] +'</span>\n\'
} 
```

**（那段代码只是一个例子）**

变量 currentConcept[] 和 currentRelation[] 我使用 Ajax 从数据库中获取了它的值

```
**i am using PHP** 
```

我的问题是如何提交带有这两个变量的页面？

我的意思是在服务器上我希望是这样的

```
 $concepts = $_POST['currentConcept[]'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:33:26.307

将 ID 添加到 span 元素

```
<span id="ElementID"> your variable text here</span> 
```

然后使用jquery获取文本

```
var spanText = $('#ElementID').html(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:34:48.857

类似的东西

```
var currentConcept = $('currentConcept').html(); 
```

然后你可以在你的请求中将此 var 作为参数发送到服务器

**更新**

```
$("form").submit(function() {
     var currentConcept = $('.currentConcept').html();   // it's an Array
     var currentRelation = $('.currentRelation').html(); // it's an Array

   $.ajax({
     url     : // your URL,
     data    : 'currentConcept=' + currentConcept '&currentRelation=' + currentRelation,
     success : function( html ) {
             // write your code here
              }
}); 
```

}

```
// server side (php)
$currentConcept  = $_GET('currentConcept');
$currentRelation = $_GET('currentRelation'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T14:35:12.780

像这样在 jQuery 中获取这些值：

```
var ioAddConcept = $(".ioAddConcept").html();
var ioAddRelation = $(".ioAddRelation").html(); 
```

现在您可以将这些值设置到表单文本框中：

```
$('input.ioAddConcept').text( ioAddConcept );
$('input.ioAddRelation').text( ioAddRelation ); 
```

**或者**，如果您通过 AJAX 请求提交表单：

```
 $.ajax({
        url     : '/path/to/action.php',
        type    : 'POST',
        data    : 'value1=' + ioAddConcept '&value2=' + ioAddRelation,
        success : function( data ) {
                    alert(data);
                  }
    }); 
```

在服务器端获取这些值：

```
print_r( $_POST ); 
```

# linq-to-sql - Linq To SQL 删除具有双主键的映射对象

> ID：10674278
> 
> 赞同：1
> 
> 时间：2012-05-20T14:31:05.183
> 
> 标签：linq-to-sql

在 Linq To SQL 中，如何删除具有双主键的映射对象？如果只是从 EntitySet 中删除（），则 SubmitChanges（）失败

# themes - 如何在 Tumblr 主题中显示原始贡献者？

> ID：10674281
> 
> 赞同：1
> 
> 时间：2012-05-20T14:31:29.480
> 
> 标签：themes, tumblr

我已经在谷歌上搜索了一段时间，并浏览了[http://www.tumblr.com/docs/en/custom_themes](http://www.tumblr.com/docs/en/custom_themes)但我还没有找到在我的主题中的转发下显示“原始海报”的方法。

所以不是来源（我从他转发），而是最初将它贡献给 Tumblr 的用户（以及指向他/她帖子的链接。

希望有人知道。谢谢！//r

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:54:25.313

使用包含以下内容的 reblog 变量`Root`：

> `{ReblogRootName}`— 创建这篇文章的博客的标题。
> 
> `{ReblogRootTitle}` — 创建此帖子的博客的 URL。
> 
> `{ReblogRootURL}` — 创建这篇文章的博客的标题。

# java - ArrayList 和文件传输的问题

> ID：10674283
> 
> 赞同：3
> 
> 时间：2012-05-20T14:31:39.503
> 
> 标签：java, arraylist, file-transfer

我正在创建一个 TFTP 服务器。我可以很好地传输文件，但是大多数文件到达另一端时都不会打开。这是因为 ArrayList 的输出用于存储接收到的每个数据包的文件字节，将字节负载添加到文件的开头。例如。“¬í sr java.util.ArrayListxÒ™Ça I sizexp w ur [B¬óøTà xp ü!”。首先使用列表的原因是我创建的服务器无法告诉正在接收的文件的文件大小。因此，据我所知，我不能使用 byte[] 因为它需要用设定的长度进行初始化。有没有办法解决这个问题？

```
 WRQ WRQ = new WRQ();
            ACK ACK = new ACK();
            DatagramPacket outPacket;
            byte[] bytes;
            byte[] fileOut;
            List fileBytes = new ArrayList();
            outPacket = WRQ.firstPacket(packet);
            socket.send(outPacket);

            socket.receive(packet);

            while (packet.getLength() == 516){

            bytes = WRQ.doWRQ(packet);
            fileBytes.add(bytes);

            outPacket = ACK.doACK(packet);
            socket.send(outPacket);

            socket.receive(packet); 

            }

            bytes = WRQ.doWRQ(packet);
            fileBytes.add(bytes);

            outPacket = ACK.doACK(packet);
            socket.send(outPacket);

            ObjectOutputStream os;

            ByteArrayOutputStream byteStream = new ByteArrayOutputStream(5000);
            os = new ObjectOutputStream(new BufferedOutputStream(byteStream));
            os.flush();
            os.writeObject(fileBytes);
            os.flush();
            byte[] outFile = byteStream.toByteArray();
            os.close();

            FileOutputStream foStream = new FileOutputStream(filename);
            foStream.write(outFile);
            foStream.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:47:49.150

您将字节数组存储在 ArrayList 中，然后使用该`writeObject()`方法将整个 ArrayList 写入包装在 ObjectOutputStream 中的 ByteArrayOutputStream。

这使用本机对象序列化机制来保存 ArrayList 对象。它不会一个接一个地写入列表中的每个字节数组。明确一点：它使用对象序列化协议编写类名和 ArrayList 的内部结构。

您不需要 ArrayList。直接写入 ByteArrayOutputStream，甚至直接写入 FileOutputStream。照原样，您正在尝试

*   将字节写入列表
*   将列表中的字节写入字节数组
*   将字节数组写入文件。

直接写入输出文件（包装在 BufferedOutputStream 中用于缓冲）会更直接（和高效）

# php - 带有 2 个捆绑包的 symfony2 学说

> ID：10674286
> 
> 赞同：0
> 
> 时间：2012-05-20T14:32:19.827
> 
> 标签：php, symfony, doctrine, entity, bundles

我在实体 User 和实体 Contract 之间建立了 OnetoMany 关系。（一个用户可以拥有多个合约）

我有 2 个捆绑包，一个用于扩展 fosuser (Userbundle)，一个用于所有其他 ToolsBundle。

所以，我有一个用户列表，每个用户旁边都有链接。一个链接是合同，该合同路由到同一捆绑包（toolsBundle）中的控制器，当我尝试找到具有良好 ID 的合同时，它告诉我

> MyApp\UserBundle\Entity\Contract 类在第 194 行不存在 Symfony2/vendor/doctrine/lib/Doctrine/ORM/Proxy/ProxyFactory.php

当然合同在 MyApp\ToolsBundle\Entity\Contract

我不知道怎么了...

* * *

```
<?php

namespace Furter\ToolsBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use MyApp\ToolsBundle\Entity\Contract;
use MyApp\ToolsBundle\Form\ContractForm;

class DefaultController extends Controller
{
  public function editContractAction($id = null)
  {
    $message='';
    $em = $this->container->get('doctrine')->getEntityManager();

    if (isset($id)) 
    {

    $repository = $this->container->get('doctrine')
        ->getRepository('MyAppToolsBundle:Contract');

        $contract = $repository->findBy(
            array('id' => $id),
            array('end' => 'ASC'));

        if (!$contract)
        {
            $message='Aucun contrat trouvé';
        }
    }
    else 
    {
        $contract = new Contract();
    }

    $form = $this->container->get('form.factory')->create(new ContractForm(), $contract);

    $request = $this->container->get('request');

    if ($request->getMethod() == 'POST') 
    {
            $form->bindRequest($request);

    if ($form->isValid()) 
    {
        $em->persist($contract);
        $em->flush();
        if (isset($id)) 
        {
            $message='Contrat modifié avec succès !';
        }
        else 
        {
            $message='Contrat ajouté avec succès !';
        }
    }
    }

    return $this->container->get('templating')->renderResponse(
'MyAppToolsBundle:Admin:contract.html.twig',
    array(
    'form' => $form->createView(),
    'message' => $message,
    ));
} 
```

}

奇怪的是，如果我在没有 ID 的情况下进行编辑（要创建一个完美运行的合同，只有当我找到匹配项时...

我不知道这是否正确：

```
 $contract = $repository->findBy(
        array('id' => $id),
        array('end' => 'ASC')); 
```

但没关系我尝试了一个简单的

```
$contract = $em->getRepository('MyAppToolsBundle:Contract')->find($id); 
```

我有同样的错误。我被卡住了，我真的不知道为什么 symfony 认为该实体是我的另一个 Bundle 而不是我的 toolsBundle ......

谢谢。

编辑：我的合同课

```
<?php
namespace MyApp\ToolsBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 */
class Contract
{

    /**
     * @ORM\GeneratedValue
     * @ORM\Id
     * @ORM\Column(type="integer")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="MyApp\UserBundle\Entity\User", inversedBy="contracts")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    protected $user;

    /**
     * @ORM\Column(type="float")
     * @Assert\NotBlank()
     * @Assert\MinLength(2)
     */    
    private $rate;

    /**
    * @ORM\Column(type="date", nullable="true")
    */
    private $start;

    /**
    * @ORM\Column(type="date", nullable="true")
    */
    private $end;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set rate
     *
     * @param float $rate
     */
    public function setRate($rate)
    {
        $this->rate = $rate;
    }

    /**
     * Get rate
     *
     * @return float 
     */
    public function getRate()
    {
        return $this->rate;
    }

    /**
     * Set start
     *
     * @param date $start
     */
    public function setStart($start)
    {
        $this->start = $start;
    }

    /**
     * Get start
     *
     * @return date 
     */
    public function getStart()
    {
        return $this->start;
    }

    /**
     * Set end
     *
     * @param date $end
     */
    public function setEnd($end)
    {
        $this->end = $end;
    }

    /**
     * Get end
     *
     * @return date 
     */
   public function getEnd()
    {
        return $this->end;
    }

    /**
     * Set user
     *
     * @param MyApp\ToolsBundle\Entity\User $user
     */
    public function setUser(\MyApp\ToolsBundle\Entity\User $user)
    {
        $this->user = $user;
    }

    /**
     * Get user
     *
     * @return MyApp\ToolsBundle\Entity\User 
     */
    public function getUser()
    {
        return $this->user;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:45:03.620

我找到了 ！当你做类之间的关系时，symfony 添加一些函数（addContract 等。）它使用了错误的命名空间......

```
/**
 * Add contracts
 *
 * @param MyApp\UserBundle\Entity\Contract $contracts
 */
public function addContract(\MyApp\UserBundle\Entity\Contract $contracts)
{
    $this->contracts[] = $contracts;
} 
```

它应该是 ToolsBundle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:27:08.877

确保您已在 autoload.php 和 AppKernel.php 中注册了包 - 我曾经遇到过同样的问题，因为我没有将包添加到 AppKernel...

# c++ - std::list 是否有等效于 vector::reserve() 的方法？

> ID：10674289
> 
> 赞同：20
> 
> 时间：2012-05-20T14:32:58.380
> 
> 标签：c++, list, stl, vector

我有一个看起来像这样的类：

```
typedef std::list<char*> PtrList;
class Foo
{
public:
   void DoStuff();
private:
   PtrList m_list;
   PtrList::iterator m_it;
}; 
```

该函数`DoStuff()`基本上向其中添加元素`m_list`或从中删除元素，找到其中某个特殊元素的迭代器并将其存储在`m_it`. 需要注意的是，每个 的值`m_it`都用于 的每个后续调用`DoStuff()`。

**所以有什么问题？** 一切正常，除了分析显示由于调用 from导致操作员`new`被调用过多。`list::push_back()``DoStuff()`

为了提高性能，我想`m_list`在初始化时预分配内存，`Foo`如果它是`std::vector`. 问题是这会引入新的问题，例如：

1.  效率较低`insert`且`erase`元素较少。
2.  `m_it`一旦向量从一个调用更改为`DoStuff()`下一个调用，它就会变得无效。**编辑：** Alan Stokes 建议使用索引而不是迭代器来解决这个问题。

**我的解决方案：**我能想到的最简单的解决方案是实现一个还具有链表功能的对象池。这样我就得到了一个链表*，并且*可以为它预分配内存。

我错过了什么还是它真的是最简单的解决方案？我宁愿不“重新发明轮子”，而是使用标准解决方案（如果存在）。

任何想法、解决方法或启发性的评论将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T14:57:33.510

我认为您使用错误的容器。

如果你想要快速推回那么不要自动假设你需要一个链表，链表是一个慢速容器，它基本上适合重新排序。

更好的容器是 std::deque。双端队列基本上是一个数组数组。它分配一块内存并在您推回时占用它，当它用完时它将分配另一个块。这意味着它只会非常不频繁地分配，并且您不必提前知道容器的大小以提高效率，例如 std::vector 和`reserver`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T18:52:40.607

您可以使用该`splice`函数`std::list`来实现一个池。添加一个新的成员变量`PtrList m_Pool`。当要添加新对象且池不为空时，将值分配给池中的第一个元素，然后将其拼接到列表中。要擦除元素，请将其从列表中拼接到池中。

但是如果你不关心元素的顺序，那么 a`deque`可以快得多。如果要擦除中间的元素，请将最后一个元素复制到要删除的元素上，然后擦除最后一个元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T16:21:54.110

我的建议与 's 相同，请在编写任何重要代码之前`111111`尝试切换到。`deque`

但是，要直接回答您的问题：您可以使用`std::list`自定义分配器。这有点繁琐，我不会在这里详细介绍所有细节，但要点是您编写一个表示列表节点的内存分配策略的类。分配的节点`list`将是一个小的实现定义的数量，大于`char*`，但它们都将具有相同的大小，这意味着您可以仅针对该大小编写优化的分配器（内存块池而不是对象池），并且您可以向它添加功能，让您在需要的时候在分配器中保留您想要的任何空间。然后列表可以快速分配/释放。这使您无需重新实现任何实际`list`功能。

如果您（出于某种原因）要实现一个具有列表功能的对象池，那么您可以从`boost::intrusive`. 这在编写您自己的分配器时也可能很有用，用于跟踪您的空闲块列表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-20T15:09:04.083

列表和向量在管理对象的方式上完全不同。

Vector 将元素构建到给定容量的已分配缓冲区中。当容量耗尽时会发生新的分配。列表一个一个地分配元素，每个元素到一个单独分配的空间中。

当插入/删除某些东西时，向量元素会发生变化，因此，向量索引和元素地址是不稳定的。当插入/删除某些内容时，列表元素会重新链接，因此，列表迭代器和元素地址是稳定的。

使列表的行为类似于向量的一种方法是将默认分配器（每次调用时从系统分配）替换为另一个分配器，在更大的块中分配对象，在调用时将子块分配给列表它。这不是标准库默认提供的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T14:42:22.543

可能会使用`list::get_allocator().allocate()`. Afaik，由于 s 的非连续性质，默认行为是在何时获取内存`list`- 因此缺乏`reserve()`- 但使用该`allocator`方法并没有立即发生在我身上的主要缺点。如果您的程序中有一个非关键部分，在开始时或其他任何情况下，您至少可以选择在那个时候承受损害。

# java - 当我从 android ADB 调用我的网络服务时，带有 10.0.2.2 的非法字符

> ID：10674295
> 
> 赞同：0
> 
> 时间：2012-05-20T14:33:37.390
> 
> 标签：java, android, web-services, jakarta-ee, android-emulator

我用 netbeans (Java EE) 制作了一个 web 服务，我想与我的 Android 应用程序（用 eclipse 制作）进行通信。

例如，当我尝试交流时，我通过浏览器调用我的网络服务：

```
localhost:9999/SupRails_Start/resources/rest/mail@gmail.com/password 
```

...它给了我一个 JSON，...

对于 ADB，我将其称为 URI：

```
10.0.2.2:9999/SupRails_Start/resources/rest/mail@gmail.com/password 
```

但它给了我

```
java.lang.IllegalArgumentException: Illegal character in scheme at index 0: 10.0.2.2:0000/SupRails_Start/resources/rest/... 
```

当我将 JSON（从浏览器接收）复制粘贴到 php 页面并将其托管在网络上时，它可以完美运行！

这是我的 Android 项目的一部分：

```
WebService webService = new WebService("10.0.2.2:9999/SupRails_Start/resources/rest/wil.nad@gmail.com/root");
        Map<String, String> params = new HashMap<String, String>();
        String temp = webService.webGet("", params);
        Log.v("", "JSON received = "+temp); 
```

请帮助我我不明白我的错误......非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:42:34.790

您的 Web 服务 URL 不完整。有效 URL 的语法如下：

```
scheme://domain:port/path?query_string#fragment_id 
```

> 每个 URL 由以下部分组成：方案名称（通常称为协议），后跟一个冒号，两个斜杠，[注 1] 然后，根据方案，服务器名称（exp. ftp., www., smtp.等）后跟一个点 (.)，然后是域名[注 2]（或者 IP 地址）、端口号、要获取的资源或要运行的程序的路径，然后，对于诸如通用网关接口 (CGI) 脚本、查询字符串、[7][8] 和可选的片段标识符。

[[维基百科]](http://en.wikipedia.org/wiki/Uniform_resource_locator)

所以改变这个：

```
new WebService("10.0.2.2:9999/SupRails_Start/resources/rest/wil.nad@gmail.com/root") 
```

对此：

```
new WebService("http://10.0.2.2:9999/SupRails_Start/resources/rest/wil.nad@gmail.com/root") 
```

# include - 在 MPLAB X IDE 中使用外部头文件

> ID：10674297
> 
> 赞同：10
> 
> 时间：2012-05-20T14:33:37.780
> 
> 标签：include, mplab, c18

我有一个包含一些 .h 和 .c 文件的文件夹，我想在我的项目中使用头文件。

我已经使用“添加现有项目”将它们包含在我的项目的“头文件”文件夹中，但是当我尝试“#include”它们时，编译器（mplabc18\v3.41）说“无法找到文件 xyz.h”

那么，我应该怎么做才能使用这些文件而不将它们复制到项目文件夹中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-20T14:40:28.430

只需使用“添加”对话框将标题添加到项目中，然后选择“此文件用于此项目，使用相对路径”不记得它是否是 exac 此文本，但它类似于。

之后，只需在文件中进行正常声明：

```
#include "your_header.h" 
```

这应该可以正常工作。

**- 更新**

使用新的 MPLAB X

执行以下操作：

1.  单击文件-> 项目属性

2.  选择 Conf -> C18 (Global Options) -> mcc18
    For XC8, this is under Conf > XC8 compiler

3.  单击属性“包含目录”的“...”按钮

4.  点击“浏览按钮”

5.  找到你的项目目录

6.  单击打开，然后单击确定并应用

7.  构建您的应用程序！

现在它应该可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T01:21:56.053

我知道这是一个老问题，但我想添加另一个提示，因为我自己只是偶然发现了它。如果在 Windows 和 Linux 系统之间来回切换，一定要注意文件名中的大小写。在 Windows 上，这没关系。但是，在 Linux 上，您需要确保您的 #include 引用与实际文件具有相同的大小写。

如果文件在磁盘上保存为“UARTIO.INC”，则您的包含必须是：

```
#INCLUDE "UARTIO.INC"  **EXACTLY** 
```

如果你把它写成：

```
#INCLUDE "UARTIO.inc", or #INCLUDE "uartio.inc" 
```

它在 Windows 上可以正常工作，但在 Linux 上会因“无法找到包含文件”错误而失败。

请注意，将 MPLAB 设置为忽略大小写与此无关。

# swing - 对矩形应用不同的颜色

> ID：10674301
> 
> 赞同：0
> 
> 时间：2012-05-20T14:33:50.190
> 
> 标签：swing, graphics, swt

我有一个矩形。我想做一些带有颜色的动画。这意味着它应该开始在矩形中填充不同的颜色。它应该从左到右开始。例如我有四种颜色。红绿蓝橙。所以前 25% 应该用红色填充，接下来的 25% 用绿色填充，接下来的 25% 用蓝色填充，剩下的用橙色填充。首先，我尝试通过使用另一个矩形顶部的矩形来获得相同的结果。所以我可以一一改变矩形的颜色。但问题是，我无法删除那些子矩形的边框。这就是它在矩形中作为某种部分可见的原因。看起来好像我们用颜色将矩形分成了四个。我不想表现出来。我想开始使用不同的颜色。任何想法我该怎么做。我缺乏逻辑的东西。我们可以说一些不同颜色的进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:03:52.697

要使用 取出矩形的边框`Graphics`，您只需不调用图形函数进行绘制。例子：

```
public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D)g;

    //Rectangle with Color_1
    g2.setColor(color1); //This would be red
    g2.fill(rect1);

    //Rectangle with Color_2
    g2.setColor(color2); //This would be green
    g2.fill(rect2);

           ... //Repeat for other rectangles

    g2.dispose()
} 
```

现在程序化部分会更棘手。您必须分别增加每个矩形。

另一种方法是查看颜色混合。我真的不知道这是否是您需要的，但无论如何：

[http://www.java2s.com/Code/Java/2D-Graphics-GUI/Commoncolorutilities.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Commoncolorutilities.htm) [http://www.dbuggr.com/leothenerd/blend-rgb-color-function-java/](http://www.dbuggr.com/leothenerd/blend-rgb-color-function-java/)

您显然必须不断更改颜色，`g2.setColor(Color)`并不断更改颜色本身以满足您的需要。

# eclipse - 如何附加 com.sun.script.javascript 的源代码以在 Eclipse 中调试 RhinoScriptEngine

> ID：10674304
> 
> 赞同：1
> 
> 时间：2012-05-20T14:34:16.563
> 
> 标签：eclipse, rhino, openjdk

我想在 com.sun.script.javascript 包中调试 RhinoScriptEngine。要查看源代码，我附上了 openJDK openjdk-6-src-b25-01_may_2012。但是当我尝试进入任何方法时，例如 RhinoScriptEngine 或 ScriptEngineManager 它不起作用... eclipse 打开相应的类，但调试器不会单步执行源代码

如何解决这个问题并调试 RhinoScriptEngine 和 Rhino 本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:46:34.703

即使在 jdks 中，rt.jar 文件也可能在未启用调试的情况下编译。你检查过 RhinoScriptEngine 类是否有 a`LineNumberTable`和 a`LocalVariableTable`吗？

在我的情况下，jdk 和 jre 至少是用`LineNumberTable`. 所以我可以单步调试 jdk 类，可以看到字段和参数的值，但看不到局部变量的值。

您可以使用 javap 来反汇编一个类并查看实际提供了哪些信息，例如

```
javap -v -cp rt.jar com.sun.script.javascript.RhinoScriptEngine 
```

但我实际上并没有尝试调试 RhinoScriptEngine 类，因为我的 jdk 没有 RhinoScriptEngine 文件的源附件，而我发现的 openjdk 根本没有它。我认为它属于 java 的专有部分。

# html - 需要一种查找 div 内容的好方法的建议

> ID：10674308
> 
> 赞同：3
> 
> 时间：2012-05-20T14:34:56.760
> 
> 标签：html, regex, perl, dom

```
<div class="box notranslate" id="venueHours">
<h5 class="translate">Hours</h5>
<div class="status closed">Currently closed</div>
<div class="hours">
  <div class="timespan">
    <div class="openTime">
      <div class="days">Mon,Tue,Wed,Thu,Sat</div>
      <span class="hours"> 10:00 AM–6:00 PM</span>
    </div>
  </div>
  <div class="timespan">
    <div class="openTime">
      <div class="days">Fri</div>
      <span class="hours"> 10:00 AM–9:00 PM</span></div>
    </div>
    <div class="timespan">
      <div class="openTime">
        <div class="days">Sun</div>
        <span class="hours"> 10:00 AM–5:00 PM</span>
      </div>
    </div>
  </div>
</div> 
```

我正在尝试捕获所有`<div class="days">`and中的内容`<span class="hours">`。我想我可以在这个任务中使用正则表达式。但我也想学习任何有趣或专业的方法来捕获这样的特定 div 块。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T15:14:07.927

除了其他地方提到的 HTML 解析库之外，其他模块也具有 DOM 功能。参见例如[`Web::Query`](http://p3rl.org/Web%3a%3aQuery)和 Mojolicious' [`Mojo::DOM`](http://p3rl.org/Mojo%3a%3aDOM)。

这是一个使用`Mojo::DOM`CSS3 选择器的示例：

```
#!/usr/bin/env perl

use strict;
use warnings;

use 5.10.0;
use Mojo::DOM;

my $dom = Mojo::DOM->new(<<'HTML');
<div class="box notranslate" id="venueHours">
<h5 class="translate">Hours</h5>
<div class="status closed">Currently closed</div>
<div class="hours">
  <div class="timespan">
    <div class="openTime">
      <div class="days">Mon,Tue,Wed,Thu,Sat</div>
      <span class="hours"> 10:00 AM–6:00 PM</span>
    </div>
  </div>
  <div class="timespan">
    <div class="openTime">
      <div class="days">Fri</div>
      <span class="hours"> 10:00 AM–9:00 PM</span></div>
    </div>
    <div class="timespan">
      <div class="openTime">
        <div class="days">Sun</div>
        <span class="hours"> 10:00 AM–5:00 PM</span>
      </div>
    </div>
  </div>
</div>
HTML

say "div days:";
say $_->text for $dom->find('div.days')->each;

say "\nspan hours:";
say $_->text for $dom->find('span.hours')->each; 
```

或等效地：

```
say "div days:";
say for $dom->find('div.days')->map(sub{$_->text})->each;

say "\nspan hours:";
say for $dom->find('span.hours')->map(sub{$_->text})->each; 
```

输出：

```
div days:
Mon,Tue,Wed,Thu,Sat
Fri
Sun

span hours:
 10:00 AM–6:00 PM
 10:00 AM–9:00 PM
 10:00 AM–5:00 PM 
```

或者要获取对应天数的时间，可以使用`openTimes`div 的子元素：

```
say "Open Times:";
say for $dom->find('div.openTime')
            ->map(sub{$_->children->each})
            ->map(sub{$_->text})
            ->each; 
```

输出：

```
Open Times:
Mon,Tue,Wed,Thu,Sat
 10:00 AM–6:00 PM
Fri
 10:00 AM–9:00 PM
Sun
 10:00 AM–5:00 PM 
```

编辑： Daxim 已将类似的`Web::Query`代码作为评论发布，因此我将在此处重新发布它以获得更好的格式。我没有尝试过，但我一般相信他的代码。假设 HTML 在一个变量中`$html`：

```
use Web::Query qw(); 
my $w = Web::Query->new_from_html($html);
say "div days:";
say for $w->find('div.days')->text; 
say "\nspan hours:"; 
say for $w->find('span.hours')->text; 
say "Open Times:"; 
$w->find('div.openTime')->each(sub { say for $_->find('*')->text }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T14:39:36.430

使用特定于该任务的模块：[HTML::Parser](http://p3rl.org/HTML%3a%3aParser)、[HTML::Tree](http://p3rl.org/HTML%3a%3aTree)等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-20T14:40:36.693

匹配状态“当前关闭”的正则表达式：

```
/<\/h5><div[^>]*>([^<]*)/ 
```

匹配天数：

```
/<div class="days">([^<]*)/ 
```

匹配时间：

```
/<span class="hours">([^<]*)/ 
```

# java - JTextPane：KeyBindings 不适用于 StyledEditorKit

> ID：10674312
> 
> 赞同：3
> 
> 时间：2012-05-20T14:35:21.080
> 
> 标签：java, swing, jtextpane, key-bindings, keyevent

请看下面的代码

```
import java.awt.Color;    
import java.awt.Dimension;    
import java.awt.FlowLayout;    
import java.awt.event.ActionEvent;    
import java.awt.event.ActionListener;    
import java.awt.event.KeyEvent;
import java.util.ArrayList;    
import java.util.List;    
import java.util.logging.Level;    
import java.util.logging.Logger;    
import javax.swing.*;    
import javax.swing.text.*;    

    public class Form1 extends JFrame      
    {      
        private JTextPane textPane;      
        private JPanel south;    
        private JScrollPane scroll;      

        private String  content;      
        public String documentType;                

        private DefaultStyledDocument document;          
        int start, end, offset1,length1;         
        private JButton button;             
        JFrame frame;    

        public Form1()      
        {      

            //Declaring the instance variables      
            textPane = new JTextPane();      
            textPane.setMinimumSize(new Dimension(100,100));      

            button = new JButton("Bold");      
            button.addActionListener(new StyledEditorKit.BoldAction());     
             button.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_B,KeyEvent.CTRL_MASK),"key");
        button.getActionMap().put("key", new StyledEditorKit.BoldAction());

            document = (DefaultStyledDocument) textPane.getDocument();        

            //Creating the main window     
            south = new JPanel();      
            south.setLayout(new FlowLayout());      
            south.add(button);                          
            scroll = new JScrollPane(textPane);      

            getContentPane().add(scroll,"Center");      
            getContentPane().add(south,"South");                  

            setSize(800,600);    
            validate();    
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                          
        }     

        private class Action extends AbstractAction    
        {      
            public void actionPerformed(ActionEvent ae)      
            {              
                new StyledEditorKit.BoldAction();
            }
        }      

       public static void main(String[] args) throws Exception {       
            SwingUtilities.invokeLater(new Runnable()       
            {        
              @Override        
              public void run() {        
               Form1 f = new Form1();  
               f.setVisible(true);
              }        
            });        
          }       
    } 
```

在这里，用户可以输入任何文本，当他选择一个文本并单击“加粗”按钮时，该文本将变为粗体。但是，我也需要使用 CTRL+B 来完成。如您所见，我的尝试并未对该关键事件做出任何回应。我什至尝试将它添加到扩展 AbstractAction 的单独类中，但仍然没有好处。我怎样才能在这里实现 CTRL+B ？请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:56:10.073

当键绑定对我不起作用时，我首先查看的是 InputMap——我确定我使用的是正确的吗？嗯，你确定吗？默认使用`JComponent.WHEN_FOCUSED`，因此仅当您的组件具有焦点时才有效。

如果您希望它在其他时间工作，例如当绑定组件可见并且在焦点窗口中但不一定具有焦点本身时，也许您应该尝试不同的条件参数。尝试使用`JComponent.WHEN_IN_FOCUSED_WINDOW`开始。

IE，

```
InputMap inputMap = myComponent.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW); 
```

# css - CSS：如何改变“ul”位置？

> ID：10674323
> 
> 赞同：-1
> 
> 时间：2012-05-20T14:37:03.403
> 
> 标签：css

以下代码显示了一个弹出菜单。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>position ul</title>
<style type="text/css">

html, body, div, ul {
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
}
#main {
position:relative;
width:950px;
height:30px;
margin:75px auto 0;/*75px beneath top of page, auto distance from page's right/left   side*/
border:2px solid #8c8b4b;
}
#main li {
width:92px;
height:30px;
float:left;
list-style-type:none;
border:2px solid red;
}
#main li a { text-decoration:none; }
#main li ul li {
width:400px;
border:2px solid #8c8b4b;
height:30px;
}
li.menu1 { background-image:url('images/men1.png'); }
li.menu2 { background-image:url('images/men1.png'); }
.menu2 li a {
color:white;
font-weight:bold;
}
li.menu2 div {
position:absolute;
margin-left:-999em;
padding-top:200px;
}
li.menu2 ul {
top:400px;
list-style:none;
margin:0;
font-size:110%;
}
li.menu2:hover div { margin:0; }
li.menu2:hover ul li { clear:left; }
ul li ul.rounded-corner {
border:2px solid red;
height: 200px;
width:776px;
background-image:url(../banner/bg_to_sitepoint.gif);
background-repeat:no-repeat;
-webkit-border-radius:50px;
-moz-border-radius:50px;
border-radius:50px;
}
</style>
</head>
<body>
<ul id="main">
<li class="menu1"><a href="#">menu item1</a></li>
<li class="menu2">menu item2
    <div>
       <ul class="rounded-corner">
     <li><a href="#">submenu2 item1</a></li>
     <li><a href="#">submenu2 item2</a></li>
     <li><a href="#">submenu2 item3</a></li>
    </ul>
     </div>
   </li>
  </ul>
 </body>
</html> 
```

子菜单由位于 div 内的 ul 实体组成。我想改变 ul 在其祖先中的位置：一个 div。我添加：“顶部：100px；” 到“li.menu2 ul”选择器并看不到任何影响。“左”值也不好。谁能解释一下为什么我不能让那个 ul 在它的 div 中重新定位？我怎样才能让它移动到div中的其他地方？附件是我想更改的当前页面的屏幕截图。非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:34:11.457

给这个`div`

```
position:relative; 
```

如果添加

```
padding-top:100px; 
```

行不通试试

```
margin-top:100px; 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:43:58.760

您可以在 CSS 中添加 padding-top: 100px

```
li.menu2 ul {
  top:400px;
  list-style:none;
  margin:0;
  font-size:110%;
  padding-top:100px;
} 
```

如果这就是你的意思（以及我所理解的），请看这里 [http://jsfiddle.net/9NqDd/](http://jsfiddle.net/9NqDd/)

# javascript - 如何通过javascript设置盒子阴影？

> ID：10674324
> 
> 赞同：5
> 
> 时间：2012-05-20T14:37:10.800
> 
> 标签：javascript, css

我知道您可以执行以下操作：

```
element.style.box-shadow ="something"; 
```

我将如何涵盖 -moz 和 -webkit 扩展？

如果我做了`element.style.-webkit-box-shadow="something"`and `element.style.-moz-box-shadow="something"`，我会被覆盖吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T14:38:13.840

该选项被称为`webkitBoxShadow`,`mozBoxShadow`等 - 将 CSS 选项名称转换为`.style.`属性删除前导短划线，然后将其转换`lowercase-with-dashes`为`lowerCamelCase.`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T14:38:46.443

最好设置一个类，为各种浏览器声明这些阴影属性，并将该类附加到`className`目标元素的 。

就像是：

```
.shadowed{
    /*all shadow declarations for various browsers*/ 
    -o-
    -webkit-
    -moz-
    -ms-
    box-shadow
}

element.className += ' shadowed'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:38:33.637

```
element.style['-webkit-box-shadow'] = "something"; 
```

或者在 Mozilla 中：

```
element.style['-moz-box-shadow'] = "something"; 
```

# php - 提交后突出显示表单上的多项选择

> ID：10674325
> 
> 赞同：0
> 
> 时间：2012-05-20T14:37:26.147
> 
> 标签：php, jquery, html, post, get

下面的这个选择框在提交表单后会记住并突出显示 -one- 选择。但是当我将其设为多个时，它不会在提交后突出显示任何选择。关于如何实现这一目标的任何想法？

提前致谢。

```
<?php
$options_amount = array("0","1","2","3","4","5","6","7","8","9","10+");
$no_way = $_GET['no_way'];
?>

<select class="postform" name="no_way[]" multiple size="5">
<option <?php if ($no_way == 'all') { ?>selected="selected"<?php }?> value="all">Any</option>
<?php
foreach ($options_amount as $option) {
?><option <?php if ($no_way == $option) { ?>selected="selected"<?php }?> value="<?php echo $option; ?>"><?php echo $option; ?></option><?php }?>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:42:51.770

`$_GET['no_way']`仅处理您必须使用的单个参数`$_GET['no_way[]']`和`in_array($option, $no_way)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:42:42.027

我不确定这是否会有所帮助，但是您有没有机会尝试过使用`selected`而不是`selected="selected"`？

```
<option <?php if ($no_way == $option) { ?> selected<?php }?> value="<?php echo $option; ?>"><?php echo $option; ?></option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:46:45.287

这对我有用：

```
<?php
$options_amount = array("0","1","2","3","4","5","6","7","8","9","10+");
$no_way = $_GET['no_way'];
?>
<select class="postform" name="no_way[]" multiple size="5">
<option <?php if (in_array("all",$no_way)) { ?>selected="selected"<?php }?> value="all">Any</option>
<?php
foreach ($options_amount as $option) {
?><option <?php if (in_array($option,$no_way)) { ?>selected="selected"<?php }?> value="<?php echo $option; ?>"><?php echo $option; ?></option><?php }?>
</select> 
```

# javascript - 为什么 Google Maps DirectionsService 返回不同的路线？

> ID：10674330
> 
> 赞同：4
> 
> 时间：2012-05-20T14:38:33.620
> 
> 标签：javascript, google-maps, google-maps-api-3

我对 Google Maps DirectionsService 有奇怪的问题。如果输入数据相同，它会返回不同的路线。这是我的代码示例

```
var path = [];
path.push(new google.maps.LatLng(51.10600101811778, 17.025117874145508));
path.push(new google.maps.LatLng(51.1047951799623,17.02278971672058));
path.push(new google.maps.LatLng(51.10456276619924, 17.02208161354065));
path.push(new google.maps.LatLng(51.10131895649719, 17.029248476028442));
path.push(new google.maps.LatLng(51.100331957810134, 17.033969163894653));
path.push(new google.maps.LatLng(51.10001867395775, 17.032413482666016));

for (var i = 0; i <path.length-1; i++) {
    var request = {
        origin: path[i],
        destination: path[i+1],
        travelMode: google.maps.DirectionsTravelMode.WALKING
    }

    directionsService.route(request, function(results, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            selected_path = selected_path.concat(results.routes[0].overview_path);
            poly.setPath(selected_path);
            poly.setMap(map);
        }
    })
} 
```

第一次调用后，一个函数绘制了一条奇怪的折线，它总是连接起点和终点：

[![](../Images/aa9e5ce22a48fefa048bdb0172b19399.png)](https://imgur.com/Xs5Yx)

第二次调用，函数运行良好，路线绘制正确：

[![](../Images/dab5b5ba6643748fa5a519d92cfd918b.png)](https://imgur.com/fpMB3)

这只是输入静态数据的示例。通常我使用矩阵和动态标记上的动态数据，但总是如此。首先，起点与终点相连+其他点之间的奇怪连接。第二个调用函数运行良好。你们中有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T15:38:43.967

这只是一个猜测：我相信正在发生的事情是路径被无序连接，因为方向请求是异步的。（数据不一定按顺序返回）。我在下面所做的是将方向的每条腿按顺序放置在一个数组中，然后将数组展平为一个连续的列表，并仅在正确数量的请求成功返回后才显示。

我无法重现你的曲折，所以我不知道这个答案是否真的能解决问题。

```
// count number of directions requests that returned successfully
var count = 0;

for (var i = 0; i <path.length-1; i++) {
  var request = {
    origin: path[i],
    destination: path[i+1],
    travelMode: google.maps.DirectionsTravelMode.WALKING
  };

  // introduce variable scope to preserve value of i
  (function(i) {
     directionsService.route(request, function(results, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         selected_path[i] = results.routes[0].overview_path;
         count++;

         // draw path only if all segments are completed
         if(count == path.length-1) {
           //flatten selected_path into 1-d array
           selected_path = Array.prototype.concat.apply([], selected_path);
           poly.setPath(selected_path);
           poly.setMap(map);
         }
       }
     });
   })(i);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T06:08:29.950

我有同样的问题。您可以通过计时器调用该函数并将其设置为 250 毫秒以获得最佳结果。当您通过“for”循环调用服务时，会发生此问题。

这是方法：

```
//Counter for timer.
var counter2 = 0;

//Set a timer to pass latitude and longitude values to "draw_line()" function.
var timer = setInterval(function(){draw_way(new google.maps.LatLng(arrayLatitude[counter2], arrayLongitude[counter2]));

counter2 = counter2 + 1;

//Check if calue of timer is > "arrayLatitude.length" because if it becomes bigger it can't draw the way.

if(counter2 >= arrayLatitude.length)
{
    clearInterval(timer);

}
}, 250); 
```

# magento - 如何根据magento中的类别更改背景

> ID：10674336
> 
> 赞同：1
> 
> 时间：2012-05-20T14:39:07.430
> 
> 标签：magento, magento-1.6

我的 magento 网站中有 2 个类别，即“书籍”和“电子产品”。我想根据类别更改网站的背景。这意味着当我选择“电子”类别时，它将显示与“书籍”类别不同的​​背景。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:40:20.063

管理类别 -> 自定义布局 -> 自定义布局更新：

```
<reference name="head">
    <action method="addCss">
        <stylesheet>css/custom_category_1.css</stylesheet>
        <params>media="all"</params>
    </action>
</reference> 
```

在 css 中定义自定义背景。通过添加 !important 覆盖默认样式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T17:43:38.280

您可以使用 jquery 执行此操作

你需要去 app/design/frontend/base/default/template/catalog/category/

并编辑 view.phtml

前

```
<?php echo $this->getMessagesBlock()->getGroupedHtml() ?> 
```

添加此代码

```
<?php
if($_category->getId()==$mycatId):
?>
<script type="text/javascript">
$('body').css("background","url($imgUrl)");
</script>
<?php endif;?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T23:14:06.737

每个类别都有一个“自定义设计”选项卡，您可以在其中指定某些布局。如果您只想更改背景颜色，那么创建一个类别属性来保存十六进制值可能是最简单的。

网上有几个关于如何创建自己的类别属性的教程。如果你想要一个漂亮的界面来做到这一点，有这个扩展：[DeltaCats](http://www.magentocommerce.com/magento-connect/deltacats-6930.html)

# php - 检查租金的可用性

> ID：10674340
> 
> 赞同：0
> 
> 时间：2012-05-20T14:39:38.540
> 
> 标签：php, mysql

我正在为我的自行车租赁工作编写脚本，但我不知道如何检查 X 周期内的自行车可用性

数据库看起来像：

```
CustomerID    BicycleID    FromDATE    TillDATE     
    43           12       2012-05-20  2012-05-23
    43           14       2012-05-20  2012-05-23
    44           12       2012-05-27  2012-05-30
    44           15       2012-05-27  2012-05-30 
```

在我签订新合同或预订以检查或自行车在一段时间内可用之前，我是否可以运行脚本？

对此的任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-23T16:23:20.747

如果这些是简单的固定期限租赁，那么在 From 和 Till 之间搜索可用性很简单

```
Select count(*) from hiresTable
where $From < TillDATE
and $Till > FromDATE 
```

如果租赁条款不固定，这将不准确，因为两个雇员可能并排在搜索范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:47:22.537

我认为如果您可以以[TIMESTAMP](http://www.epochconverter.com/) ( [UNIX](http://www.unixtimestamp.com/index.php) ) 格式存储日期，那么您可以轻松地使用 > < = 运算符来比较所需的租赁期限和该自行车的不可用情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:42:17.427

请参阅[确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)：

要测试两个时段是否重叠，请使用`(StartDate1 <= EndDate2) and (StartDate2 <= EndDate1)`

```
SELECT * FROM reservations WHERE ? <= TillDATE AND FromDATE <= ? 
```

此查询中的第一个参数应该是新预订的开始日期，第二个参数应该是结束日期。

这将返回与新预订相冲突的所有预订。

# database - 从数据库而不是配置文件中读取 CodeIgniter 配置值

> ID：10674341
> 
> 赞同：4
> 
> 时间：2012-05-20T14:39:39.267
> 
> 标签：database, codeigniter, config

您可能知道，当您使用 CI 创建一个新项目时，您必须在 config/config.php 中**手动输入**基本 url、**加密密钥。**我正在努力克服这个问题，因此正在寻找一种**从数据库中****读取**这些值的方法——使客户的安装和整个设置**时间****减少**了很多。

 ******客户无法编辑 PHP 文件的变量，但很可能在一些指导下能够输入基本 url 并让系统自动填写加密密钥。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:53:04.723

当然！添加一个[钩子 - post_controller](http://codeigniter.com/user_guide/general/hooks.html)并通过该文件设置这些配置值。

`config/hooks.php`

```
$hook['pre_controller'][] = array(  'class'    => 'MyOtherClass',
                                    'function' => 'MyOtherfunction',
                                    'filename' => 'Myotherclass.php',
                                    'filepath' => 'hooks'); 
```

`hooks/myotherclass.php`

```
<?

class MyOtherClass {

    function MyOtherfunction() {

        $CI =& get_instance();

        $row = $CI->db->get_where('configs', array('site_id' => 1))->row();

        $CI->config->set_item('base_url', $row->base_url);

    }

} 
```

基本上，您在将它们用于任何控制器或类似设备之前设置这些值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-04T18:11:47.973

至于[Codeigniter 3.1.7](https://www.codeigniter.com/user_guide/general/hooks.html) `pre_controller`将无法工作，因为它会在初始化 时返回**NULL值**`$CI =& get_instance();`

**要解决这个问题：**

将挂钩点从 更改`pre_controller`为`post_controller_constructor`

**修改来源：**

`config/hooks.php`

```
$hook['post_controller_constructor'][] = array(  'class'    => 'MyOtherClass',
                                'function' => 'MyOtherfunction',
                                'filename' => 'Myotherclass.php',
                                'filepath' => 'hooks'); 
```

并且在`hooks/myotherclass.php`

```
<?

class MyOtherClass {

    function MyOtherfunction() {

        $CI =& get_instance();

        $row = $CI->db->get_where('configs', array('site_id' => 1))->row();

        $CI->config->set_item('base_url', $row->base_url);

    }

} 
```

现在它将起作用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T09:37:50.497

```
 class name extends CI_Controller {
    public $DB1;
    public $MSSQL;
    public function __construct()
     {
    parent::__construct();
        $userid = $this->session->userdata('userids');
          $this->load->model('kubix');
          $result = $this->kubix->databaseconncetion($userid);
        foreach ($result as $deta)
          {

      $this->MSSQL=$db['MSSQL'] = array(
      'hostname' => $deta["Db_base_ip"],
      'username' => $deta["Db_username"],
      'password' => $deta["db_password"],
      'database' => $deta["Db_base_name"],
      'dbdriver' => 'sqlsrv',
      'dbprefix' => '',
      'pconnect' => FALSE,
      'db_debug' => (ENVIRONMENT !== 'production'),
      'cache_on' => FALSE,
      'cachedir' => '',
      'char_set' => 'utf8',
      'dbcollat' => 'utf8_general_ci',
      'swap_pre' => '',
      'encrypt' => FALSE,
      'compress' => FALSE,
      'stricton' => FALSE,
      'failover' => array(),
      'save_queries' => TRUE);
      $this->DB1 = $this->load->database($this->MSSQL, TRUE);
    $sql = "SELECT  TOP 1 * FROM AccountsFinancialYearMaster where Active=1 ";
        $query = $this->DB1->query( $sql);
        $result= $query->result_array();
RETURN $result; 
```******

# c# - 我有一个 8bpp 1024 X 1024 大小的 PGM 格式图像，需要从中计算 GLCM（灰度共现矩阵）

> ID：10674344
> 
> 赞同：1
> 
> 时间：2012-05-20T14:40:27.267
> 
> 标签：c#, image, image-processing, glcm

图像很大，我使用`getPixel`and 和`setPixel`方法来访问位，但发现它太慢了，所以我去实现锁定和解锁位，但无法理解它。我也浏览了鲍勃鲍威尔的教程，但教程却看不懂。所以，我在这里寻求一些帮助以从图像中获取 GLCM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T05:27:10.330

GLCM 通常是一种计算量非常大的算法。它为每个邻居迭代每个像素。甚至 C++ 图像处理库也有这个问题。

然而，GLCM 确实非常适合并行（多线程）实现，因为每个参考像素的计算都是独立的。

关于使用锁定和解锁位，请参见下面的示例代码。要记住的一件事是，出于优化原因，可以填充图像。此外，如果您的图像具有不同的位深度或多个通道，您将需要相应地调整代码。

```
BitmapData data = image.LockBits(new Rectangle(0, 0, width, height), 
     ImageLockMode.ReadOnly, PixelFormat.Gray8);

byte* dataPtr = (byte*)data.Scan0;

int rowPadding = data.Stride - (image.Width);

// iterate over height (rows)
for (int i = 0; i < height; i++)
{
    // iterate over width (columns)
    for (int j = 0; j < width; j++)
    {
        // pixel value
        int value = dataPtr[0];

        // advance to next pixel
        dataPtr++;

    // at the end of each column, skip extra padding
    if (rowPadding > 0)
    {
        dataPtr += rowPadding;
    }
}

image.UnlockBits(data1); 
```

# android - Android - 翻译大于屏幕尺寸的视图会导致拖尾

> ID：10674347
> 
> 赞同：3
> 
> 时间：2012-05-20T14:40:32.233
> 
> 标签：android, animation, bitmap, translation, clipping

我正在尝试制作具有多个“屏幕”的游戏。如果用户走到屏幕边缘，应该会弹出一个动画，将当前屏幕移出并移入新屏幕。

我想用 TranslateAnimation 来做到这一点。首先，我计算一个包含第一个和第二个屏幕的位图，然后我想在视图“transitionView”中播放它，同时隐藏最初包含第一个屏幕的视图“levelView”。转换完成后，我想再次隐藏“transitionView”并在“levelView”中显示新屏幕。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/viewGroup" 
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <view
            class="at.test.game.ScreenTransitionTest2$LevelView"
            android:id="@+id/levelView" 
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

    <view
            class="at.test.game.ScreenTransitionTest2$TransitionView"
            android:id="@+id/transitionView" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="gone"/> 
</RelativeLayout> 
```

我第一次尝试使用 ImageView，但无论我使用什么设置，它总是会缩小位图。所以我现在创建了自己的视图，它只是从 (0, 0) 中绘制图像。由于发生了裁剪，我在 onCreate 方法中禁用了它：

```
((RelativeLayout)findViewById(R.id.viewGroup)).setClipChildren(false); 
```

动画如下所示：

```
this.transitionView.setBitmap(calculateBitmap(screen1, screen2));
TranslateAnimation a = new TranslateAnimation(
    Animation.ABSOLUTE, startx, Animation.ABSOLUTE, endx,
    Animation.ABSOLUTE, starty, Animation.ABSOLUTE, endy);
a.setDuration(3000);
a.setFillAfter(true); 
this.transitionView.setAnimation(a);
a.start(); 
```

我的问题：只有 480x800 的位图被正确渲染/移动（位图大约是 1000x880，它的起始坐标是（-40，-40），结束坐标（-520，-40））在这个区域之外（所以在底部屏幕和右侧，因为第二帧应该移入）而不是显示位图的其余部分，没有绘制或只是涂抹（见截图）

为什么位图没有在动画中正确绘制？我错过了一些设置吗？我为视图组尝试了“wrap_content”，但这也无济于事。还是不可能在整个屏幕上滑动更大的位图？

[屏幕截图 - 底部未绘制任何内容，右侧出现拖尾](http://stuff.schoellhammer.at/smearing.png)

# twitter - Twitter API - 是坏了还是我用错了？

> ID：10674351
> 
> 赞同：3
> 
> 时间：2012-05-20T14:40:37.240
> 
> 标签：twitter

当我要求它显示 10 条推文时，我得到了一条。当我说 11 时，我得到 3。但是当我说 20 时，我得到 20。我做错了什么吗？

这是我的代码：

```
 <div id="twitter" class="widget">
    <div class="twitter-header"></div>
    <div class="twitter-content">

    <ul id="twitter_update_list">
        <li>Twitter feed loading</li>
      </ul>

    </div>
    <div class="twitter-footer"></div>
</div>

<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script> 
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/trekradio.json?callback=twitterCallback2&count=10"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T06:48:06.490

问题是您没有在时间线上看到转推。可悲的是，使用您使用的方法，您无法使用

```
include_rts=1 
```

将行更改为

```
https://api.twitter.com/1/statuses/user_timeline.json
    ?screen_name=trekradio
    &include_rts=1
    &callback=twitterCallback2 
```

这将使用时间轴中的所有转推来检索 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T21:55:35.333

现在需要对 user_timeline 进行身份验证（请参阅：[https](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline) ://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline ），并且 API 的第 1 版已于 2013 年 6 月 11 日停用（请参阅：[https:// /dev.twitter.com/blog/api-v1-is-retired](https://dev.twitter.com/blog/api-v1-is-retired)）。

因此，如果有人卡在@Terence 答案上，请查看当前 API 中的更改。

# networking - SNMP：ifAdminStatus 与 ifOperStatus

> ID：10674354
> 
> 赞同：6
> 
> 时间：2012-05-20T14:41:19.133
> 
> 标签：networking, snmp, cisco

我对 ifAdminStatus 和 ifOperStatus 有疑问。这是使用 ifAdminStatus 输出的我的网络接口状态：

```
snmpwalk -Os -c public -v 1 192.168.1.1 1.3.6.1.2.1.2.2.1.7ifAdminStatus.1 = INTEGER: up(1)

ifAdminStatus.12 = INTEGER: down(2)
ifAdminStatus.13 = INTEGER: up(1)
ifAdminStatus.14 = INTEGER: up(1) 
```

这是使用 ifOperStatus 的相同列表：

```
snmpwalk -Os -c public -v 1 192.168.1.1 1.3.6.1.2.1.2.2.1.8

ifOperStatus.12 = INTEGER: down(2)
ifOperStatus.13 = INTEGER: down(2)
ifOperStatus.14 = INTEGER: down(2) 
```

如您所见，ifAdminStatus 报告 #13 和 #14 已启动，但 ifOperStatus 报告它们均已关闭。我知道 #13 已经启动并通过它传递数据包（这是我的 PPPoE Internet 连接接口）。根据 cisco 文档“**如果 ifAdminStatus is down(2) then ifOperStatus should be down(2).** ”这似乎不是这里的情况......

我的问题是-为什么报告的状态不同，仅使用 ifAdminStatus 来判断接口是否已启动并运行而不是 ifOperStatus 是否安全？

谢谢！

这是带有附加接口信息的 snmpwalk：

```
snmpwalk -Os -c public -v 1 192.168.1.1 1.3.6.1.2.1.2.2.1
[.....]
ifIndex.12 = INTEGER: 12    
ifIndex.13 = INTEGER: 13
ifIndex.14 = INTEGER: 14
[.....]
ifDescr.12 = STRING: etherip0
ifDescr.13 = STRING: ppp0
ifDescr.14 = STRING: tun1
[.....]
ifType.12 = INTEGER: ethernetCsmacd(6)
ifType.13 = INTEGER: ppp(23)
ifType.14 = INTEGER: other(1) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T17:46:32.313

`ifAdminStatus`显示接口是否启用操作

`ifOperStatus`显示接口是否已成功形成链接。

您引用的文档仅断言这`ifAdminStatus=down`意味着`ifOperStatus=down`. 12也是如此`ifIndex`。

`ifAdminStatus`报告`ifIndex`13 和 14 为*up*。因此，您从思科文档中引用的指南不适用。这些接口的运行状态仍然可以关闭，即使它们已启用运行。一个简单的情况是，如果没有电缆插入它们。

编辑

我一直在回答这个问题，我以为你有一个运行 IOS 的 Cisco 路由器。根据您的 snmpwalk，这实际上是一个 Linksys

```
sysDescr.0 = STRING: Linux Linksys E4200 2.6.24.111 #8614 
    Tue Dec 20 05:09:38 CET 2011 mips 
```

Based on the evidence I have seen, you just cant monitor ifOperStatus for your PPPoE connection; they didnt code that much functionality into the SNMP agent on the Linksys.

# c# - 如何使用 ADO.NET 使用复杂查询

> ID：10674355
> 
> 赞同：0
> 
> 时间：2012-05-20T14:41:20.880
> 
> 标签：c#, ado.net

```
SELECT 
    Wot.WorkOrderType,
    COUNT(CASE WHEN Wo.Status =  'C' THEN 1 END) as [Completed],
    COUNT(CASE WHEN Wo.Status = 'E' THEN 1 END) as [Error]
FROM WorkOrder_2002 Wo
INNER Join  WorkOrderType Wot ON Wo.WorkOrderTypeId= wot.Id
WHERE Wo.CreateTime BETWEEN '2012-04-01' AND '2012-05-15'
GROUP BY Wo.WorkOrderTypeId,Wot.WorkOrderType
ORDER BY Wo.WorkOrderTypeId,Wot.WorkOrderType 
```

我想使用上述查询通过 ADO.NET 检索记录（我想在 SqlCommand 中传递此查询）。我想在 where 子句中传递两个日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:46:39.217

```
SqlConnection connection = new SqlConnection(CONNECTIONSTRING);
connection.Open;

SqlCommand cmd = connection.CreateCommand();
cmd.CommandText = @"SELECT 
        Wot.WorkOrderType,
        COUNT(CASE WHEN Wo.Status =  'C' THEN 1 END) as [Completed],
        COUNT(CASE WHEN Wo.Status = 'E' THEN 1 END) as [Error]
    FROM WorkOrder_2002 Wo
    INNER Join  WorkOrderType Wot ON Wo.WorkOrderTypeId= wot.Id
    WHERE Wo.CreateTime BETWEEN @startdate AND @enddate
    GROUP BY Wo.WorkOrderTypeId,Wot.WorkOrderType
    ORDER BY Wo.WorkOrderTypeId,Wot.WorkOrderType";
cmd.Parameters.AddWithValue("@startdate", DateTime.Parse("2012-04-01"));
cmd.Parameters.AddWithValue("@enddate", DateTime.Parse("2012-05-15"));

// Do whatever you want with the SqlCommand now... 
```

# javascript - JavaScript 中的嵌套数组

> ID：10674357
> 
> 赞同：1
> 
> 时间：2012-05-20T14:41:44.723
> 
> 标签：javascript, arrays, nested

看看下面的代码，是否`theme[sprite].img`嵌套在里面`result[definition].data`（就像`theme[sprite].img`里面`theme[sprite]`一样）以及`.img`成为它自己的元素`result[definition]`？

```
result[definition].data = theme[sprite];
result[definition].img = theme[sprite].img; 
```

如果是这样的话，如果`result[definition].data.img`被删除会发生什么，那也会删除`result[definition].img`甚至`theme[sprite].img`？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:45:04.803

如果你 delete `result[definition].data.img`， then`theme[sprite].img`也将被删除，因为`result[definiton].data`和`theme[sprite]`是完全相同的单个对象。`result[definition].img`将保留其值，因为`result[definition]`它是在其属性中具有来自另一个对象的`.img`副本的单独对象。`.img`

不过，这与嵌套没有任何关系。您只需引用同一个对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T14:52:12.407

> 如果`result[definition].data.img`被删除了，那也会删除`result[definition].img`吗...

不，对象是引用类型。虽然删除会从 观察到`theme[sprite]` ，但*不会*从 观察到`result[definition]`。

因为`theme[sprite]`和`result[definition].data`是对同一个对象的引用，所以对该对象所做的任何更改都可以从对它的任何引用中观察到。

但是因为`result[definition].img`是对碰巧被另一个对象引用的不同对象的引用，所以它是一个完全唯一的引用，并且不受另一个对象中发生的事情的影响。

* * *

```

       +-----------+ +------------+
       | | 精灵 | |
 主题 | |-------->| |\     *v---删除此引用...*
       | | | | \
       +-----------+ +------------+ \   img    +-----------+
                                   ^ \ | |
                                  / \----> | |
                                 / | |
                                / +-----------+
                   定义/^
                              //
       +-----------+ / /
       | | //
结果 | |-------/                 图片       /
       | |----------------------------------/
       +-----------+
        *...不影响这个-----------^*
           *反之亦然*

```

如果您删除其中一个`img`属性，另一个将保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T15:07:55.707

Oleg 和 Cliffs 的答案是正确的。但是，我认为出于可视化目的，查看这些对象的实际形状可能很有用：

```
var definition = "Foo",
    sprite     = "Bar",

    result = {},
    theme  = {}
;

result[ definition ] = {}
// => result == { Foo : {} }

theme[ sprite ] = { img : "BAZ" }
// => theme == { Bar : { img : "BAZ" } }

result[ definition ].data = theme[ sprite ];
// => result == { Foo : {
//                  data : { img : "BAZ" }
//                }
//              }

result[ definition ].img  = theme[ sprite ].img;
// => result == { Foo : {
//                  data : { img : "BAZ" },
//                  img  : "BAZ"
//                }
//              }

delete result[ definition ].data.img;

console.log( result.[ definition ].data.img );
// => undefined

console.log( theme[ sprite ].img );
// => undefined

console.log( result[ definition ].img
// => "BAZ" 
```

# php - 共享主机中的 codeigniter .htaccess (mochahost)

> ID：10674363
> 
> 赞同：0
> 
> 时间：2012-05-20T14:42:29.607
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite, shared-hosting

我想在“ **mydomain.com** ”上安装 codeigniter，托管（共享）呈现下一种结构：

*   public_html/

*   404/
*   _私人的/
*   _vti_bin/
*   cgi-bin/
*   addondomain1.com/
*   addondomain2.com/
*   代码点火器

*   应用/
*   系统/

*   索引.php
*   .htaccess

**index.php**（修改）：

```
<?php
...
  $system_path = 'codeigniter/system';
  $application_folder = 'codeigniter/application';
... 
```

**.htaccess**（默认）：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

**仅当 url 具有“ mydomain.com** ”时，如何修改 .htaccess 以强制/应用重写条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:50:19.630

仅影响，在第一个之前`mydomain.com`添加一个`RewriteCond`匹配它的。 `%{HTTP_HOST}``RewriteCond`

```
RewriteEngine on
# Apply rewrite only to mydomain.com
# Use [NC] for case-insensitive matching
RewriteCond %{HTTP_HOST} ^mydomain.com$ [NC]
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果您还需要匹配`www.mydomain.com`，请将条件设为：

```
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain.com$ [NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T15:11:57.473

我在主机上为我工作的 htaccess

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L,QSA] 
```

# actionscript-3 - 以编程方式将类与文档关联

> ID：10674369
> 
> 赞同：0
> 
> 时间：2012-05-20T14:42:52.503
> 
> 标签：actionscript-3, flash

当按下按钮时，我想将我的类与文档相关联。我怎样才能以编程方式做到这一点？到目前为止，我已经尝试过这种方法：[如何以编程方式将 flash .fla 文件与文档类关联？](https://stackoverflow.com/questions/2941591/how-to-programmatically-associate-a-flash-fla-file-with-a-document-class)编译器告诉我没有名为 getDocumentDOM() 的函数。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T19:29:59.090

The document class is fixed, but you can easily instantiate new classes and add or remove them on the main timeline.

As someone commented, this is a design problem. Instead of using frames on the main timeline, select the content of your first frame and convert it into a library symbol and export it for ActionScript with a class name like "StartScreen".

You can then have the constructor of your main document class call `var start_screen:StartScreen = new StartScreen(); addChild( start_screen );` to instantiate it on the main timeline. You'll have to attach an event listener to the button, such as `start_screen.start_button.addEventListener( MouseEvent.CLICK, handler, false, 0, true );`. Your handler function can then call `removeChild( start_screen );` and add some other content in its place.

# javascript - 在不刷新页面的情况下，不能删除多个表格行

> ID：10674370
> 
> 赞同：3
> 
> 时间：2012-05-20T14:42:54.617
> 
> 标签：javascript, jquery, model-view-controller, tablerow

在 MVC 中，我通过迭代视图模型的“列表”在视图中构建了一个表。

```
@foreach(var item in Model)
{
<tr id="row-@item.name">
    <td>
        @item.type
    </td>
    <td >
        @Html.ActionLink((string)item.name, "Download", "FileUpload", new { rout = item.rout, fileName = item.name }, null)
    </td>
    <td>
        @item.size
    </td>
    <td>
        <a href="#" id="delete-file" del-url="@item.delete_url">Delete</a>
    </td>
</tr> 
```

}

当我加载页面时，我会得到一个文件列表，每个文件都有一个“删除”链接。

我用 jQuery 实现了一个基本的“删除行”方法：

```
$('#delete-file').click(function() {
    var delUrl = $(this).attr('del-url');
    $.post(delUrl, null, removeRow(),'json')
});

function removeRow() {
   $($('#delete-file').closest('tr')).fadeOut('slow');
} 
```

当我在其中一个文件行上单击“删除”时，它表现良好，但是，如果我单击另一个（删除），则没有任何反应。服务器上没有文件被删除，并且该行没有被删除，就好像它被完全忽略了一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:48:53.937

您需要使用`class="delete-file"`而不是`id="delete-file"`- 当然也需要使用相应的`$(".delete-file")`选择器。

ID 意味着每个文档都是唯一的，并且您的代码将处理程序绑定到第一个`id="delete-file"`元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T14:52:20.307

这是你的解决方案：

[http://jsfiddle.net/irpm/enEAt/1/](http://jsfiddle.net/irpm/enEAt/1/)

javascript是：

```
$('.delete-file').click(function(e) {
    $(this).closest('tr').remove();
});​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T14:53:22.403

您需要防止`<a>`元素的默认操作，并使用正确的选择器

```
$('.delete-file').click(function(e) {
    e.preventDefault();
    var self=this,
        delUrl = $(this).attr('del-url');
    $.post(delUrl, function() {
        $(self).closest('tr').fadeOut('slow');
    },'json');
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-20T14:54:05.633

这一行：

```
$.post(delUrl, null, removeRow(),'json'); 
```

简单地等同于：

```
$.post(delUrl, null, undefined, 'json'); 
```

因为`removeRow()`函数不返回任何东西。将该行更改为：

```
$.post(delUrl, null, removeRow,'json');   //Without '()' after 'removeRow' 
```

我猜你的`removeRow`功能不会像你预期的那样工作。该功能将隐藏所有行，但您只需隐藏单击“删除文件”的那一行。因此，您需要将该行的引用传递给`removeRow`函数。这是一种方法：

```
$('#delete-file').click(function() {
   var delUrl = $(this).attr('del-url');
   var $row = $(this).closest('tr');
   $.post(delUrl, null, function(){
       removeRow($row);
   },'json')
});

function removeRow($row) {   $row.fadeOut('slow');   } 
```

# iphone - BluetoothManager 框架通知列表

> ID：10674372
> 
> 赞同：2
> 
> 时间：2012-05-20T14:43:21.973
> 
> 标签：iphone, objective-c, ios, bluetooth, iphone-privateapi

我想获取 BluetoothManager 私有框架的所有通知。我一直在搜索，但只找到了两个（BluetoothAvailabilityChangedNotification 和 BluetoothDeviceDiscoveredNotification）。我对报告 iphone 是否连接/断开设备的通知很感兴趣。如果有人能给我一份所有通知的列表，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T19:40:35.563

我没有完整的列表，但这些是您感兴趣的：

```
BluetoothDeviceConnectFailedNotification
BluetoothDeviceConnectSuccessNotification
BluetoothDeviceDisconnectFailedNotification // haven't confirmed this one
BluetoothDeviceDisconnectSuccessNotification 
```

以下是其他一些：

```
BluetoothConnectabilityChangedNotification // fires when bluetooth is turned on/off
BluetoothAvailabilityChangedNotification // seems to fire once at app start)
BluetoothPowerChangedNotification
BluetoothDeviceDiscoveredNotification
BluetoothDeviceRemovedNotification
BluetoothPairingUserNumericComparisionNotification
BluetoothPairingPINResultSuccessNotification 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T10:33:11.570

在调用之前添加`[BluetoothManager sharedInstance]`：

```
CFNotificationCenterAddObserver(CFNotificationCenterGetLocalCenter(),
                                    NULL,
                                    bluetoothCallback,
                                    NULL,
                                    NULL,
                                    CFNotificationSuspensionBehaviorDeliverImmediately); 
```

在这个实现的某个地方，方法 void bluetoothCallback：

```
void bluetoothCallback (CFNotificationCenterRef center,
                 void *observer,
                 CFStringRef name,
                 const void *object,
                 CFDictionaryRef userInfo)
{
    if (CFStringGetCharacterAtIndex(name, 0) == 'B') { // stupid way to filter for only 'B'luetooth notifications
        NSLog(@"%@", name);
    }
} 
```

您的控制台日志现在向您显示所有蓝牙通知。

# c++ - 为什么在 C++ 中声明字符串时大小不同？

> ID：10674375
> 
> 赞同：1
> 
> 时间：2012-05-20T14:43:46.560
> 
> 标签：c++, c

我应该知道这一点，但我不知道，我认为这可能是我基础知识的一个重大差距，所以我想我应该问专家。

鉴于：

```
 char s1[] = { 'M', 'y', 'W', 'o', 'r', 'd' };
 char s2[] = "MyWord";

cout << strlen(s1)<<endl;
cout << strlen(s2)<<endl;

cout << sizeof(s1)<<endl;
cout << sizeof(s2)<<endl; 
```

为什么声明为`s1`9`strlen`而声明为`s2`6？额外的 3 来自哪里，它缺少空终止字符？

而且我知道这`sizeof(s2)`比 s2 大 1 字节，`sizeof(s2)`因为 s2 会自动添加空字符？

请温柔一点，TIA！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T14:46:55.230

`char s2[] = "MyWord";`由于 "" 声明，自动添加空终止符。

`s1`声明没有。当您执行`strlen`on`s1`时，结果为 9，这是因为它最终遇到了 \0 并停止了。`s1`不应与 strlen 一起使用，因为它不是空终止的。s1 上的 strlen 可能是 1,000。如果开启内存违规检测，s1 的 strlen 会崩溃。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T14:46:55.553

第一个缺少`\0`第二个中存在的隐式终止符。因此：

*   第一个`1`小于第二个，内存方面
*   做`strlen`第一个是未定义的行为（因为它缺少终止符）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T14:47:03.883

如您所说，缺少终止空字符。

当`strlen`函数被调用时`s1`，它会计算字符直到找到一个终止符`'\0'`。根据内存的初始化方式，您可能会得到不同的结果。

您的定义`s2`实际上相当于

```
char s2[] = { 'M', 'y', 'W', 'o', 'r', 'd', '\0' }; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-20T14:47:37.970

s1 只是偶然的 9；您只能在终止的字符串上使用 strlen 。将其声明为 char s1[] = { 'M', 'y', 'W', 'o', 'r', 'd', '\0' }; 看看会发生什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T14:48:40.143

strlen(s1) 可以返回任何大于 6 的值。因为他正在搜索第一个 '\0' 字符而您没有提供它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-20T15:29:59.603

在您的代码中，

*   `s1`并且`s2`是 的数组`char`。
*   `s1`最后一个元素是`d`，而`s2`最后一个元素是`\0`。

也就是说， 中多了一个字符`s2`。它是一个以空字符结尾的字符串，但`s1`不是以空字符结尾的字符串。

由于`s1`不是以 null 结尾的字符串，因此表达式`strlen(s1)`将调用**undefined behavior**，因为`strlen`将继续读取`s1`最后一个元素。

# python - 带有原始字符串前缀的 Python 正则表达式

> ID：10674376
> 
> 赞同：0
> 
> 时间：2012-05-20T14:43:47.323
> 
> 标签：python

我是 python 和正则表达式的新手。

我有这个正则表达式，我不知道这是什么目的

```
r'(\d+)\.(\d*)' 
```

我只知道它匹配从 0 到 9 的数字。

谁能帮我解释一下？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:48:52.383

它匹配包含一个或多个小数位、后跟一个小数位、后跟 0 个或多个小数位的字符串 - 即浮点数。它返回两个数字字符串。

例如，如果您在字符串“123.456”上尝试它，它将返回（“123”，“456”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:49:09.147

这会查找至少一位（或更多）后跟小数点和零位或更多位的数字。

这个[快速参考/备忘单](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/) 可能有助于查找构成正则表达式的部分。

这是一个非常好的关于正则表达式的[谷歌视频教程。](http://www.youtube.com/watch?v=kWyoYtvJpe4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:48:45.603

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html) 阅读它。它肯定比你在这里得到的任何答案都更有启发性。虽然匹配数字（1 或更多），后跟小数点和一些进一步的数字（0 或更多）

# c# - 在 Visual C# 中的窗体上添加边框颜色

> ID：10674383
> 
> 赞同：0
> 
> 时间：2012-05-20T14:44:40.170
> 
> 标签：c#, border, visual-c#-express-2010

好的，我用这段代码制作了一个表格：`this.FormBorderStyle = FormBorderStyle.None;`好的，我还用这段代码添加了一个边框半径：

```
[DllImport("Gdi32.dll", EntryPoint = "CreateRoundRectRgn")]
    private static extern IntPtr CreateRoundRectRgn
    (
        int nLeftRect, // x-coordinate of upper-left corner
        int nTopRect, // y-coordinate of upper-left corner
        int nRightRect, // x-coordinate of lower-right corner
        int nBottomRect, // y-coordinate of lower-right corner
        int nWidthEllipse, // height of ellipse
        int nHeightEllipse // width of ellipse
     );

    public Form4()
    {
        InitializeComponent();
        Region = System.Drawing.Region.FromHrgn(CreateRoundRectRgn(0, 0, Width, Height, 20, 20));
    } 
```

所以，我需要的是在与边界半径弯曲的表单周围添加一个小的黑色边框。我怎么做？

好的，我添加了这个，它有效，但它不符合边界，它只是海峡：`e.Graphics.DrawRectangle(Pens.Black, new Rectangle(0, 0, Width - 1, Height - 1));` 而且这个：

```
ControlPaint.DrawBorder(e.Graphics, this.ClientRectangle, Color.Black, ButtonBorderStyle.Solid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:57:57.810

覆盖表单的 OnPaintBackground() 方法，并使用传入的 e.Graphics 对象通过 Graphics 方法简单地绘制边框。

请注意，当您使用 Region(GraphicsPath) 构造函数时，您不必调用。同样的 GraphicsPath 也可以方便地绘制边框。

# android - 来自 getExtras() 的 NullPointerException

> ID：10674388
> 
> 赞同：8
> 
> 时间：2012-05-20T14:45:38.650
> 
> 标签：android, android-intent, nullpointerexception, bundle

我正在创建一个意图将数据从一个活动传输到另一个活动，如下所示：

```
Intent intent = new Intent(this, ActivityHighScore.class);
    intent.putExtra("USERNAME", username);
    intent.putExtra("PLAYERMOVES", playerMoves);

    this.startActivity(intent); 
```

然后我想检查所有这些数据在活动开始时是否存在，因为它可以从其他来源启动而无需设置这些数据。我使用这个语句：

```
 Bundle bundle = getIntent().getExtras();

    if (!bundle.getString("USERNAME").equals(null) && bundle.getInt("PLAYERMOVES") != 0){
        String username = bundle.getString("USERNAME");
        int playerMoves = bundle.getInt("PLAYERMOVES");
        addHighScore(username, playerMoves);

    } 
```

但这会导致空指针异常，我完全确定如何。我以为我正在掌握字符串和.equals（），但我认为它......任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-20T14:47:37.823

代替

```
Bundle bundle = getIntent().getExtras();

    if (!bundle.getString("USERNAME").equals(null) && bundle.getInt("PLAYERMOVES") != 0){
        String username = bundle.getString("USERNAME");
        int playerMoves = bundle.getInt("PLAYERMOVES");
        addHighScore(username, playerMoves);

    } 
```

和

```
 if (getIntent().getStringExtra("USERNAME") != null && (getIntent().getIntExtra("PLAYERMOVES", 0) != 0){
        String username = bundle.getString("USERNAME");
        int playerMoves = bundle.getInt("PLAYERMOVES");
        addHighScore(username, playerMoves);

  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-31T16:19:38.517

好吧，我有一个类似的问题。在我的情况下，`NullPointerException`当我检查 my`bundle.getString()`是否等于时发生`null`。

在我的情况下，这是我解决它的方法：

```
Intent intent = getIntent();        
if(intent.hasExtra("nomeUsuario")){
    bd = getIntent().getExtras();
    if(!bd.getString("nomeUsuario").equals(null)){
        nomeUsuario = bd.getString("nomeUsuario");
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-02T18:52:19.300

您正在做的方法是正确的。空指针异常来了，因为片段没有被正确的片段对象替换。 **这是工作代码活动类**

```
Bundle bundle = new Bundle();
bundle.putString("message", "helloo");
Home tm = new Home();
tm.setArguments(bundle);
fragmentTransaction = getSupportFragmentManager().beginTransaction();
fragmentTransaction.replace(R.id.frag,tm).commit();
getSupportActionBar().setTitle("Home");
item.setChecked(true);
drawerLayout.closeDrawers(); 
```

**在片段中接收的代码**

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    String myValue = getArguments().getString("message");
    Toast.makeText(getActivity(), myValue, Toast.LENGTH_SHORT).show();
    myview = inflater.inflate(R.layout.fragment_home, container, false);
    return myview;
} 
```

如果有帮助，请告诉我！

# xml - WHOIS 查询对象

> ID：10674389
> 
> 赞同：0
> 
> 时间：2012-05-20T14:45:41.387
> 
> 标签：xml, object, whois

好的....虽然我经常学习网络开发，但我知道我错过了一点基本信息，只是为了找出什么而苦苦挣扎。发生这种情况是因为有经验的程序员不关心重述基础知识。

无论如何，我正在尝试从 WHOIS 服务器检索信息，即 whois.apnic.net。现在这个查询工作正常并返回所有 1528 个字节

```
<?php
$abc=fsockopen("whois.godaddy.com", 43);
$xyz="website.com";
fputs($abc,$xyz);
$output = fread($abc,1528);
print_r($output);
if(!$output)
{
echo "there is no output";
}
?> 
```

但是这个只返回前两行

```
<?php
$abc=fsockopen("whois.apnic.net", 43);
$xyz="194.6.248.10";
fputs($abc,$xyz);
$output = fread($abc,1528);
print_r($output);
if(!$output)
{
echo "there is no output";
}
?> 
```

我在代码中尝试了很多修改，例如 fgets 而不是 fread，url 而不是 ip 地址，当我将 while(!feof($abc)) 条件放入之前的代码中时，它会返回所有内容，但是当我把它放入如果我删除时间限制，第二个代码它只是超时或继续工作。上述 IP 地址来自欧洲，但在线 Apnic WHOIS 工具提供了有关它的信息，并且 WHOIS API 文档还指出，Apnic 可以联系其他注册机构并检索有关任何 IP 地址的信息。

apnic 网站谈论发送和返回对象，只是“对象”，没有参考。我假设它在谈论 XML 对象。我只想要一个小的、基本的、简单的示例来说明如何查询此 API 并获取和输出“对象”。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:43:40.573

您要查找的 IP 地址在由 RIPE (Whois.ripe.net) 而非 APNIC 管理的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-07T22:46:36.523

```
 $whoisserver = 'whois.verisign-grs.com';
$domain = 'name.com';
$port = 43;
$timeout = 10;
$fp = @fsockopen($whoisserver, $port, $errno, $errstr, $timeout) or die("Socket Error " . $errno . " - " . $errstr);
fputs($fp, $domain . "\r\n");
while(!feof($fp)){
    $out .= fgets($fp);
}
fclose($fp); 
```

1.  .com whois whois.verisign-grs.com
2.  .net whois whois.verisign-grs.com
3.  .org whois whois.pir.org
4.  等等

服务网址：[http](http://akan.online/checkName.com) : //akan.online/checkName.com 星期六快乐

# android - 如何在 Android 中的类/活动之间传递值数据？

> ID：10674390
> 
> 赞同：2
> 
> 时间：2012-05-20T14:45:55.863
> 
> 标签：android, android-intent

例如，我有活动 1、活动 2、活动 3，最后是 valueAllActivity？如何将数据从活动 1、活动 2、活动 3 传递到 --> valueAllActivity？

将每个活动中的 INT 值传递给 valueAllActivity。

我是开发Android程序的新手，所以如果有人可以指导，那将是一种荣幸:) 谢谢

//活动1

```
package lynn.calculate.KaunterKalori;

import lynn.calculate.KaunterKalori.R;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;
import android.content.Intent;

public class Breakfast extends Activity {
public static int TotalKalori;

ArrayAdapter<String> FoodType1Adapter;
ArrayAdapter<String> DrinkType1Adapter;
String FoodTypeArray[] = { "","white bread"}
int[] valueFoodTypeArray = { 0,20};
String[] DrinkTypeArray = { "","tea"};
int[] valueDrinkTypeArray = { 0,201};

Spinner FoodTypeSpinner;
Spinner DrinkTypeSpinner;
TextView SarapanTotalKalori;

public void onCreate(Bundle savedInstancesState) {
    super.onCreate(savedInstancesState);
    setContentView(R.layout.breakfast);

    FoodTypeSpinner = (Spinner) findViewById(R.id.spinner1);
    DrinkTypeSpinner = (Spinner) findViewById(R.id.spinner2);
    SarapanTotalKalori = (TextView) findViewById(R.id.JumlahKalori);

    initializeSpinnerAdapters();
    // load the default values for the spinners
    loadFoodValue1Range();
    loadDrinkValue1Range();

}

// nk handle button --> refer calculate button
public void calculateClickHandler(View view) {
    if (view.getId() == R.id.button1) {

        // nk bace dkat spinner
        int food1 = getSelectedFood();
        int drink1 = getSelectedDrink();

        // kira kalori sarapan
        // view kalori sarapan

        int totalKalori1 = calculateSarapan(food1, drink1);
        SarapanTotalKalori.setText(totalKalori1 + "");

        //setttlBreakfast(totalKalori1);
        Intent b= new Intent(Breakfast.this, Lunch.class);
        b.putExtra("totalBreakfast",totalKalori1);
        Breakfast.this.startActivity(b);

        }
    }

public int getSelectedFood() {
    String selectedFoodValue = (String) FoodTypeSpinner.getSelectedItem();
    int index = 0;

    for (int i = 0; i < FoodTypeArray.length; i++) {
        if (selectedFoodValue.equals(FoodTypeArray[i])) {
            index = i;
            break;
        }
    }
    return valueFoodTypeArray[index];
}

public int getSelectedDrink() {
    String selectedDrinkValue = (String) DrinkTypeSpinner.getSelectedItem();
    int index = 0;
    for (int i = 0; i < DrinkTypeArray.length; i++) {
        if (selectedDrinkValue.equals(DrinkTypeArray[i])) {
            index = i;
            break;
        }
    }
    return valueDrinkTypeArray[index];

}

public int calculateSarapan(int food1, int drink1) {
    return (int) (food1 + drink1);
}

public void loadFoodValue1Range() {
    FoodTypeSpinner.setAdapter(FoodType1Adapter);
    // set makanan b4 pilih
    FoodTypeSpinner.setSelection(FoodType1Adapter.getPosition("400"));

}

public void loadDrinkValue1Range() {
    DrinkTypeSpinner.setAdapter(DrinkType1Adapter);
    DrinkTypeSpinner.setSelection(DrinkType1Adapter.getPosition("77"));
}

public void initializeSpinnerAdapters() {

    FoodType1Adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, FoodTypeArray);

    DrinkType1Adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, DrinkTypeArray);

}
} 
```

//活动2

```
package lynn.calculate.KaunterKalori;

import lynn.calculate.KaunterKalori.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class Lunch extends Activity {
public static int TotalKalori;
private int totalKalori1;
/* private int ttlLunch;

public void setttlLunch(int ttlLunch){
    this.ttlLunch=ttlLunch;
}
public int getttlLunch(){
    return ttlLunch;
} */

ArrayAdapter<String> FoodType2Adapter;
ArrayAdapter<String> DrinkType2Adapter;
ArrayAdapter<String> LaukType2Adapter;

String FoodType2Array[] = { "","Burger"};
int[] valueFoodType2Array = { 0, 150 };
String DrinkType2Array[] = { "","Pepsi" };
int[] valueDrinkType2Array = { 0,100 };
String LaukType2Array[] = { "","Wings" };
int[] valueLaukType2Array = { 0,200 };

Spinner FoodType2Spinner;
Spinner DrinkType2Spinner;
Spinner LaukType2Spinner;
TextView LunchTotalKalori;

protected void onCreate(Bundle savedInstancesState) {
    super.onCreate(savedInstancesState);
    setContentView(R.layout.lunch);

    FoodType2Spinner = (Spinner) findViewById(R.id.spinner1);
    LaukType2Spinner = (Spinner) findViewById(R.id.spinner2);
    DrinkType2Spinner = (Spinner) findViewById(R.id.spinner3);
    LunchTotalKalori = (TextView) findViewById(R.id.JumlahKalori);

    initializeSpinnerAdapters();

    loadFoodValue2Range();
    loadDrinkValue2Range();
    loadLaukValue2Range();

}

public void calculateClickHandler(View view) {
    if (view.getId() == R.id.button1) {

        int food2 = getSelectedFood2();
        int drink2 = getSelectedDrink2();
        int lauk2 = getSelectedLauk2();

        int totalKalori2 = calculateLunch(food2, drink2, lauk2);
        LunchTotalKalori.setText(totalKalori2 + "");
        Bundle extras = getIntent().getExtras();
        if (extras != null){
            totalKalori1 = extras.getInt("totalBreakfast");
            totalKalori2 = extras.getInt("totalLunch");
        }
        //setttlLunch(totalKalori2);

        Intent n= new Intent(Lunch.this, Dinner.class);
        n.putExtra("totalBreakfast", totalKalori1);
        n.putExtra("totalLunch", totalKalori2);
        Lunch.this.startActivity(n);

    }
}

public int getSelectedFood2() {
    String selectedFoodValue2 = (String) FoodType2Spinner.getSelectedItem();
    int index = 0;

    for (int i = 0; i < FoodType2Array.length; i++) {
        if (selectedFoodValue2.equals(FoodType2Array[i])) {
            index = i;
            break;
        }
    }

    return valueFoodType2Array[index];

}

public int getSelectedDrink2() {
    String selectedDrinkValue2 = (String) DrinkType2Spinner
            .getSelectedItem();
    int index = 0;

    for (int i = 0; i < DrinkType2Array.length; i++) {
        if (selectedDrinkValue2.equals(DrinkType2Array[i])) {

            index = i;
            break;
        }
    }

    return valueDrinkType2Array[index];
}

public int getSelectedLauk2() {
    String selectedLaukValue2 = (String) LaukType2Spinner.getSelectedItem();
    int index = 0;

    for (int i = 0; i < LaukType2Array.length; i++) {
        if (selectedLaukValue2.equals(LaukType2Array[i])) {

            index = i;
            break;
        }
    }

    return valueLaukType2Array[index];
}

public int calculateLunch(double food2, double drink2, double lauk2) {
    return (int) (food2 + drink2 + lauk2);
}

public void loadFoodValue2Range(){
    FoodType2Spinner.setAdapter(FoodType2Adapter);
    FoodType2Spinner.setSelection(FoodType2Adapter.getPosition("200"));
}

public void loadDrinkValue2Range(){
    DrinkType2Spinner.setAdapter(DrinkType2Adapter);
    DrinkType2Spinner.setSelection(DrinkType2Adapter.getPosition("77"));
}

public void loadLaukValue2Range(){
    LaukType2Spinner.setAdapter(LaukType2Adapter);
    LaukType2Spinner.setSelection(LaukType2Adapter.getPosition("2"));
}

public void initializeSpinnerAdapters(){

    FoodType2Adapter = new ArrayAdapter<String>(this, 
            android.R.layout.simple_spinner_item, FoodType2Array);

    DrinkType2Adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, DrinkType2Array);

    LaukType2Adapter = new ArrayAdapter<String>(this, 
            android.R.layout.simple_spinner_item, LaukType2Array);
}

} 
```

//活动3

```
package lynn.calculate.KaunterKalori;

import lynn.calculate.KaunterKalori.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class Dinner extends Activity {
public static int TotalKalori;
private int totalKalori1;
private int totalKalori2;
/*private int ttlDinner;

public void setttlDinner(int ttlDinner){
    this.ttlDinner=ttlDinner;
}
public int getttlDinner(){
    return ttlDinner;
} */

ArrayAdapter<String> FoodType3Adapter;
ArrayAdapter<String> ProteinType3Adapter;
ArrayAdapter<String> DrinkType3Adapter;

String FoodType3Array[] = { "","chicken chop" };
int[] valueFoodType3Array = { 0, 204};
String ProteinType3Array[] = { "","chicken breast",  };
int[] valueProteinType3Array = { 0, 40 };
String DrinkType3Array[] = { "","mineral water" };
int[] valueDrinkType3Array = { 0, 0};

Spinner FoodType3Spinner;
Spinner ProteinType3Spinner;
Spinner DrinkType3Spinner;
TextView DinnerTotalKalori;

protected void onCreate(Bundle savedInstancesState) {
    super.onCreate(savedInstancesState);
    setContentView(R.layout.dinner);

    FoodType3Spinner = (Spinner) findViewById(R.id.spinner1);
    ProteinType3Spinner = (Spinner) findViewById(R.id.spinner2);
    DrinkType3Spinner = (Spinner) findViewById(R.id.spinner3);
    DinnerTotalKalori = (TextView) findViewById(R.id.JumlahKalori);

    initializeSpinnerAdapters();

    loadFoodValue3Range();
    loadProteinValue3Range();
    loadDrinkValue3Range();

}

public void calculateClickHandler(View view) {
    if (view.getId() == R.id.button1) {

        int food3 = getSelectedFood3();
        int protein3 = getSelectedProtein3();
        int drink3 = getSelectedDrink3();

        int totalKalori3 = calculateDinner(food3, protein3, drink3);
        DinnerTotalKalori.setText(totalKalori3 + "");
        Bundle extras = getIntent().getExtras();
        if (extras != null){
            totalKalori1 = extras.getInt("totalBreakfast");
            totalKalori2 = extras.getInt("totalLunch");
            totalKalori3 = extras.getInt("totalDinner");
        }
        //setttlDinner(totalKalori3);
        Intent d= new Intent(Dinner.this, CalculateAll.class);
        d.putExtra("totalBreakfast", totalKalori1);
        d.putExtra("totalLunch", totalKalori2);
        d.putExtra("totalDinner", totalKalori3);
        startActivity(d);

    }

}

public int getSelectedFood3() {
    String selectedFoodValue3 = (String) FoodType3Spinner.getSelectedItem();

    int index = 0;

    for (int i = 0; i < FoodType3Array.length; i++) {
        if (selectedFoodValue3.equals(FoodType3Array[i])) {

        index = i;
        break;

        }

    }

    return valueFoodType3Array[index];

}

public int getSelectedProtein3() {
    String selectedProteinValue3 = (String) ProteinType3Spinner
            .getSelectedItem();
    int index = 0;

    for (int i = 0; i < ProteinType3Array.length; i++) {
        if (selectedProteinValue3.equals(ProteinType3Array[i])) {

            index = i;
            break;
        }
    }

    return valueProteinType3Array[index];
}

public int getSelectedDrink3() {
    String selectedDrinkValue3 = (String) DrinkType3Spinner
            .getSelectedItem();

    int index = 0;

    for (int i = 0; i < DrinkType3Array.length; i++) {
        if (selectedDrinkValue3.equals(DrinkType3Array[i])) {
            index = i;
            break;
        }
    }

    return valueDrinkType3Array[index];
}

public int calculateDinner(int food3, int protein3, int drink3) {
    return (int) (food3 + protein3 + drink3);
}

public void loadFoodValue3Range() {
    FoodType3Spinner.setAdapter(FoodType3Adapter);
    FoodType3Spinner.setSelection(FoodType3Adapter.getPosition("10"));
}

public void loadProteinValue3Range() {
    ProteinType3Spinner.setAdapter(ProteinType3Adapter);
    ProteinType3Spinner.setSelection(ProteinType3Adapter.getPosition("99"));
}
public void loadDrinkValue3Range(){
    DrinkType3Spinner.setAdapter(DrinkType3Adapter);
    DrinkType3Spinner.setSelection(DrinkType3Adapter.getPosition("10"));
}

public void initializeSpinnerAdapters(){

    FoodType3Adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, FoodType3Array);

    ProteinType3Adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, ProteinType3Array);

    DrinkType3Adapter = new ArrayAdapter<String>(this,     android.R.layout.simple_spinner_item, DrinkType3Array);

}

} 
```

// CalulateAllActivity - 我想把所有的值加起来 (int)

```
package lynn.calculate.KaunterKalori;

import lynn.calculate.KaunterKalori.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class CalculateAll extends Activity {

public static int TotalKalori;
private int totalKalori1;
private int totalKalori2;
private int totalKalori3;

ArrayAdapter<String> SexTypeAdapter;
String SexTypeArray[] = { "Lelaki", "Perempuan" };

Spinner SexTypeSpinner;
TextView TotalKaloriSehari;
TextView totalsarapan;

    public CalculateAll() {

}

@Override
public void onCreate(Bundle savedInstancesState) {
    super.onCreate(savedInstancesState);
    setContentView(R.layout.calculate_all);

    SexTypeSpinner = (Spinner) findViewById(R.id.spinnerSex);
    TotalKaloriSehari = (TextView) findViewById(R.id.JumlahKalori);

}

public void calculateClickHandler(View view) {
    if (view.getId() == R.id.buttonKiraAll) {
    //  public final int TotalKalori;

        Bundle extras = getIntent().getExtras();
        if (extras != null){
            totalKalori1 = extras.getInt("totalBreakfast");
            totalKalori2 = extras.getInt("totalLunch");
            totalKalori3 = extras.getInt("totalDinner");
        }
        //setttlLunch(totalKalori2);

        Intent n= new Intent(this, CalculateAll.class);
        n.putExtra("totalBreakfast", totalKalori1);
        n.putExtra("totalLunch", totalKalori2);
        n.putExtra("totalDinner", totalKalori3);
        startActivity(n);

        int TotalKalori = calculateTotalKalori(totalKalori1, totalKalori2, totalKalori3);
        TotalKaloriSehari.setText(TotalKalori+ "");

        // int ttlCAl =getttlBreakfast()+getttlLunch()+getttlDinner();
        //String finalString = Integer.toString(calcAll());
        //TextView tv1 = (TextView) findViewById(R.id.JumlahKalori);
        //tv1.setText(finalString);

    }

}

 public int calculateTotalKalori(int totalKalori1, int totalKalori2,
int totalKalori3) {
 return (int) (totalKalori1 + totalKalori2 + totalKalori3);

}

} 
```

感谢任何试图帮助我的人。非常感谢 :) 如您所知，我在开发程序的早期阶段，非常感谢大家:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:55:11.543

你会通过意图来做到这一点。假设 data1 和 data 2 是字符串，而 data3 是 int。

在您的第一个活动中，当您设置调用下一个活动的意图时：

```
Intent myIntent = new Intent(Activity1.this, Activity2.class);
myIntent.putExtra("Data1", data1);
myIntent.putExtra("Data2", data2);
myIntent.putExtra("Data3", data3);
Activity1.this.startActivity(myIntent); 
```

然后在活动 2 中：

```
Private String data1;
Private String data2;
Private int data3;

Bundle extras = getIntent().getExtras();
if (extras != null) {
    data1 = extras.getString("Data1");
    data2 = extras.getString("Data2");
    data3 = extras.getInt("Data3");
}
// other code
Intent myIntent = new Intent(Activity2.this, Activity3.class);
myIntent.putExtra("Data1", data1);
myIntent.putExtra("Data2", data2);
myIntent.putExtra("Data3", data3);
Activity2.this.startActivity(myIntent); 
```

依此类推，通过尽可能多的活动。

您可以使用任何您想要的标识符。上面我使用了 Data1、Data2、Data3。它们也可以称为 Make、Model 和 TopSpeed。只要你使用相同的 id 来获取数据，就像你用来放置它一样，就可以了。

**编辑**

我看到的几件事...

首先，`getExtra`在每个活动的 onCreate 方法中使用 来从包中获取数据。将意图调用下一个活动的意图放在您需要的任何地方。

然后，您的问题之一是在活动 2 中：

```
 if (extras != null){ 
        totalKalori1 = extras.getInt("totalBreakfast"); 
        totalKalori2 = extras.getInt("totalLunch"); 
    } 
```

你还没有把它`totalLunch`放进包里，所以你不应该尝试`get`它。删除该行。

活动 3 中的相同内容：

```
 if (extras != null){    
        totalKalori1 = extras.getInt("totalBreakfast");    
        totalKalori2 = extras.getInt("totalLunch");    
        totalKalori3 = extras.getInt("totalDinner");    
    } 
```

你还没有把它`totalDinner`放进包里，所以你不应该尝试`get`它。删除该行。

然后在`Calculate All`你设置一个不必要的意图并重新启动活动......在我看来它会导致一个无限循环：

```
 Intent n= new Intent(this, CalculateAll.class);         
    n.putExtra("totalBreakfast", totalKalori1);         
    n.putExtra("totalLunch", totalKalori2);         
    n.putExtra("totalDinner", totalKalori3);         
    startActivity(n); 
```

从“CalculateAll”活动中删除这整个部分。

我认为移动`getExtra`部件并删除不良数据将解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T14:52:22.460

你有几个选择：

1.  在活动之间移动时使用[意图传递数据。](http://developer.android.com/guide/topics/intents/intents-filters.html)
2.  使用通过扩展类创建的全局[应用程序](http://developer.android.com/reference/android/app/Application.html)`Application`状态 bean，然后您可以通过调用`getApplication()`方法在活动中访问它。
3.  如果共享数据将由用户提供，请使用[SharedPreferences api。](http://developer.android.com/reference/android/content/SharedPreferences.html)
4.  将数据持久化到[SQLite](http://developer.android.com/guide/topics/data/data-storage.html#db)数据库并在每个 Activity 中检索它，如果您希望即使在应用程序关闭并重新启动时数据仍然可用。

阅读[文档](http://developer.android.com/guide/topics/data/data-storage.html)，了解可以在应用程序中存储和检索数据的所有可用方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T15:03:04.787

你有一些可能性。

我更喜欢的一个是使用应用程序上下文......

创建一个新类，如：

```
public class DataApp extends Application{

    private int myInt;
    private MyCustomObject myObj;

    public int getMyInt()               {   return myInt;           }
    public void setMyInt(int i)     {   this.myInt = i; }
    public MyCustomObject getMyObj()                {   return myObj;       }
    public void setMyObj(MyCustomObject ob)     {   this.myObj = ob;}

} 
```

将此添加到您的清单中：

```
<application
        android:name=".DataApp"
...>
...

    </application> 
```

之后，当您需要传递数据时，您可以在活动中执行此操作：

```
DataApp dataInfo = (DataApp)getApplicationContext();

//set some data:

dataInfo.setMyObj(/*put the object*/); 
```

在您的其他活动中，您会得到这样的对象：

```
DataApp dataInfo = (DataApp)getApplicationContext();
MyCustomObject obj = dataInfo.getMyObj(); 
```

使用此选项，您可以传递所需的每种对象类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T14:48:41.990

将数据从一个活动传递到另一个活动的推荐方法是通过**意图**。

看看[这个教程](http://www.vogella.com/articles/AndroidIntent/article.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T14:52:09.947

要通过使用意图，只需这样做：

```
private String fUserName;

private String fPassword;

private Boolean fUseProxy;

private String fProxyAddress;

private Integer fProxyPort;

/** Called when the activity is first created. */

@Override   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.dashboard_activity);
        fProjectsButton = (Button) findViewById(R.id.dashProjectsButton);

         fUserName = "something";
         fPassword = "xxx";
         fUseProxy = false;
         fProxyAddress = "";
         fProxyPort = 80;

       fProjectsButton.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {

           Intent i = new Intent(CodeBaseClientDashBoardActivity.this, CodeBaseClientProjectsActivity.class);

           i.putExtra(CodeBaseClientSettingsActivity.PREFERENCE_API_USERNAME, fUserName);
           i.putExtra(CodeBaseClientSettingsActivity.PREFERENCE_PASSWORD, fPassword);
           i.putExtra(CodeBaseClientSettingsActivity.PREFERENCE_USE_PROXY, fUseProxy);
           i.putExtra(CodeBaseClientSettingsActivity.PREFERENCE_PROXY_ADDRESS, fProxyAddress);
           i.putExtra(CodeBaseClientSettingsActivity.PREFERENCE_PROXY_PORT, fProxyPort);

           startActivity(i);
        }
});
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T16:01:55.083

我在一个活动中使用了一个方法来调用另一个活动。它以两个变量（简历和玩家数量）开始游戏。

```
private void MethodToCallAnotherActivity(int resume, int players) {     
    Intent intent = new Intent(CurrentActivity.this, NextActivity.class);
    intent.putExtra(NextActivity.RESUME, resume);
    intent.putExtra(NextActivity.PLAYERS, players);
    startActivity(intent);
} 
```

在 NextActivity 的“onCreate”中，我使用了

```
int resume = getIntent().getIntExtra(Game.RESUME, 1); 
```

读取我想要的变量。

祝你好运！

# sql-server - 远程处理 SQL Server 时如何减少响应时间？

> ID：10674405
> 
> 赞同：0
> 
> 时间：2012-05-20T14:47:45.147
> 
> 标签：sql-server, vb.net, ado.net

我创建了一个 vb.net 应用程序，它通过 Internet 在远程位置使用 SQL Server 数据库。

有 10 个 vb.net 客户端同时工作。

问题在于插入新行或从数据库中检索行时发生的延迟时间，表单在处理数据库时似乎冻结了一段时间，我不想使用后台工作人员来克服冻结问题。

我想消除延迟时间并尽可能减少它

欢迎任何提示，建议或信息，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:37:48.647

嗯，2个问题：

> 表单在处理数据库时似乎冻结了一段时间，我不想使用后台工作人员来克服冻结问题。

虚荣、傲慢和现实很少混在一起。任何需要超过 SHORT 时间（0.1-0.5 秒）的操作都应该异步运行，这是保持 UI 响应的唯一方法。不管问题是什么，如果在互联网应用程序上需要更长的时间，请将它们解耦。

但：

> 问题在于插入新记录或从数据库中检索记录时发生的延迟时间，

那么，问题是什么？严重地。这是延迟问题（往返次数过多，使用更高效的 sql、批处理，因此每次后不发送 20 个 q1uestion 等待结果）还是服务器过载 - 从问题中不清楚这是否真的是延迟问题。

在最后：

> 我想消除延迟时间

向您信仰的任何神祈祷，以改变物理规则（主要是光速）或向您当地的医生祈祷，最终以低成本获得可行的量子隐形传态。数据包目前需要时间来传输，没有办法改变这一点。

检查您是否使用了太多的往返行程。永远不要（！）通过 SQL 远程使用 sql server - 放入 Web 服务并使其适合应用程序，甚至可能与您的屏幕 1:1 匹配，因此您可以在一次往返中请求数据并发送更新，不是十几个。当我们在 12 年前使用 .NET 中的自定义 ORM 做类似的事情时，我们使用了一个数据访问层，它在一次运行中接受多个查询并为它们返回多个结果集 - 所以一个有 10 个下拉菜单的表单可以要求所有 10 个一次往返的数据集。如果一个请求需要 0.1 秒的互联网时间 - 那么这将节省 0.9 秒。我们有一个包含大约 100 次（！）往返（创建一棵树）的表格，并将其降至不到 5 次 - 谈论“需要时间”到“哇，那里”。再加上它是异步的，对不起。

然后意识到移动大量数据很慢，除非你有即时的高带宽连接。

这正是异步的作用——如果您有无法优化的传输时间或延迟时间问题，并且不想使用异步，请继续提供糟糕的体验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:57:24.120

您可以异步执行 SQL 调用，让 Microsoft 处理后台进程。

[http://msdn.microsoft.com/en-us/library/7szdt0kc.aspx](http://msdn.microsoft.com/en-us/library/7szdt0kc.aspx)

请注意，这不会减少 SQL 服务器的响应时间，因为您必须尝试提高网络速度或提高 SQL 语句的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T16:55:32.883

您可能会做一些事情来加快速度，但是如果没有看到代码就很难说。

1.  如果您使用的是通用插入 - 开始使用存储过程
2.  如果您在每个命令之后都关闭连接，那么......那么不要。建立连接通常是更“昂贵”的操作之一
3.  增加两者之间的管道。
4.  添加索引
5.  调查您的 SQL Server，也许它没有以首选方式设置。

# entity - 命名实体标记语料库

> ID：10674418
> 
> 赞同：1
> 
> 时间：2012-05-20T14:48:56.203
> 
> 标签：entity, corpus

我正在同时寻找文本和语音（转录）中的英语新闻领域的命名实体标记语料库。如果有人有任何关于语料库的信息，请将链接发给我。

谢谢卡达卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:02:03.777

我发现[Open American National Corpus](http://www.anc.org/annotations.html)非常有用。他们确实提供了一个包含新闻文本和转录语音的[命名实体标记部分，但请注意，它是使用 BBN NE Tagger 标记的，而不是一群人。](http://www.anc.org/annotations/OANC-bbn-entities.zip)不过，我在使用这种语料库引导其他模型时取得了不错的结果。

祝你好运。我很想知道你的结果。

# php - BBCode 解析引号

> ID：10674423
> 
> 赞同：0
> 
> 时间：2012-05-20T14:49:32.093
> 
> 标签：php, regex, bbcode

好的，我目前正在尝试为我的自制论坛创建 bbcode。它工作得很好，直到我开始引用。这是我的功能：

```
public function forum_parse ($string)
{
    global $core, $path;
    $string = $this -> normal_parse ($string);

    $search = '/\[quote=([A-z0-9 -_\'"]+);([0-9]+)\](.*)\[\/quote\]/is';
    $replace = '<div class="quote"><p class="quote-author"><a href="' . $path . 'forum/viewtopic?p=$2">' . WRITTEN_BY . ' $1</a></p><p class="quote-content">$3</p></div>';

    return preg_replace ($search, $replace, $string);
} 
```

每个帖子只有一个报价时效果很好，但是当有更多报价时，问题就开始了。它显然不是从根引号开始并自行选择准确的结束标签。而且我没有足够的 RegEx 经验来修复它。有什么帮助吗？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:56:35.423

`.*`将尽可能多地消耗。将其更改为`.*?`将使其消耗尽可能少，这应该可以解决问题......只要您不考虑嵌套引号。

我相信，一个更好的解决方案是使用[这篇文章](https://stackoverflow.com/questions/488963/best-way-to-parse-bbcode)的答案，而不是自己发明。

# python - Bash/Python：打开 url 并打印前 10 个单词

> ID：10674424
> 
> 赞同：0
> 
> 时间：2012-05-20T14:49:36.587
> 
> 标签：python, bash, pipe

我需要使用管道（以及需要的任何其他 python 脚本）从文本中提取 10 个最常用的单词；输出是一个由空格分隔的全大写单词块。这个管道需要从任何外部文件中提取文本：我已经设法让它在 .txt 文件上工作，但我还需要能够输入一个 URL 并让它做同样的事情。

我有以下代码：

```
alias words="tr a-zA-Z | tr -cs A-Z | tr ' ' '\012' | sort -n | uniq -c | 
sort -r | head -n 10 | awk '{printf \"%s \", \$2}END{print \"\"}'" (on one line) 
```

这`cat hamlet.txt | words`给了我：

```
TO THE AND A  'TIS THAT OR OF IS 
```

为了使它更复杂，我需要排除任何“功能”词：这些是“非词汇”词，如“a”、“the”、“of”、“is”、任何代词（我、你、他） , 和任何介词（there, at, from）。

我需要能够`htmlstrip http://www.google.com.au | words`像上面那样输入并打印出来。

对于 URL 打开：我试图弄清楚的 python 脚本（我们称之为 htmlstrip）从文本中删除任何标签，只留下“人类可读”的文本。这*应该*能够打开任何给定的 URL，但我不知道如何让它工作。到目前为止我所拥有的：

```
import re
import urllib2
filename = raw_input('File name: ')
filehandle = open(filename)
html = filehandle.read()

f = urllib2.urlopen('http://') #???
print f.read()

text = [ ]
inTag = False

for ch in html:
    if ch == '<':
        inTag = True
    if not inTag:
        text.append(ch)
    if ch == '>':
        inTag = False

print ''.join(text) 
```

我知道这既不完整，也可能不正确 - 任何指导都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:38:37.390

**更新**：抱歉，刚刚阅读了关于纯 Python 的评论，没有任何额外的模块。是的，在这种情况下`re`，我认为，这将是最好的方法。

`pycURL`也许使用而不是删除标签会更容易，更正确`re`？

```
from StringIO import StringIO    
import pycurl

url = 'http://www.google.com/'

storage = StringIO()
c = pycurl.Curl()
c.setopt(c.URL, url)
c.setopt(c.WRITEFUNCTION, storage.write)
c.perform()
c.close()
content = storage.getvalue()
print content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:20:05.623

用于`re.sub`此：

```
import re

text = re.sub(r"<.+>", " ", html) 
```

对于脚本等特殊情况，您可以包含正则表达式，例如：

```
<script.*>.*</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:32:02.760

你可以像这样使用[scrape.py](http://zesty.ca/scrape/)和正则表达式：

```
#!/usr/bin/env python

from scrape import s
import sys, re

if len(sys.argv) < 2:
    print "Usage: words.py url"
    sys.exit(0)

s.go(sys.argv[1]) # fetch content
text = s.doc.text # extract readable text
text = re.sub("\W+", " ", text) # remove all non-word characters and repeating whitespace
print text 
```

然后只是： `./words.py http://whatever.com`

# jquery - jQuery 模态确认错误

> ID：10674426
> 
> 赞同：0
> 
> 时间：2012-05-20T14:49:53.030
> 
> 标签：jquery, modal-dialog

我正在学习 jQuery 网站上的一些教程，目前正在研究“模态确认对话框”。

我已经把[这个](http://www.mapmyfinds.co.uk/development/testdialog)页面放在一起，但我似乎无法在没有收到以下错误的情况下加载页面：

`Object doesn't support this property or method Line: 16`，这是我的代码中的这一行`$( "#dialog:ui-dialog" ).dialog( "destroy" );`：

我真的不知道为什么我会收到这个，我已经浏览了源文件，我想我有正确的 js 和 css 文件的链接。

我知道大多数人这可能是一个非常基本和初学者的错误，但我是 jQuery 的初学者，我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:51:54.597

只需简单地删除此行...

```
$("#dialog-confirm" ).dialog( "destroy" ); 
```

或者，如果您希望它起作用，请将该行放在对话框 init 的下方...并将其更改为类似的内容..

（但它肯定会删除对话框功能，所以删除它很简单）

你不需要放在`:ui-dialog`那里......你只是有一个选择错误..

如果它选择使用 id 使用`#` 并且当你选择使用类使用`.`

例子

**如果身份证**

```
<div id="dialog">a dialog msg</div>
<script>
$("#dialog").dialog("destroy");
</script> 
```

**如果上课**

```
<div class="dialog">a dialog msg/div>
<script>
$(".dialog").dialog("destroy");
</script> 
```

# python - Python 支持有限形式的多重继承。以什么方式限制？

> ID：10674428
> 
> 赞同：22
> 
> 时间：2012-05-20T14:50:02.883
> 
> 标签：python, inheritance, multiple-inheritance, concept

在 python 教程中，据说“ [Python 支持有限形式的多重继承](http://docs.python.org/release/2.6/tutorial/classes.html#multiple-inheritance)”。

有什么限制？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T16:21:13.790

我不确定 python 教程的作者所指的限制是什么，但我猜这部分与在 python 中实现方法/属性查找的方式有关（“方法解析顺序”或 MRO）。Python使用[C3超类线性化](http://en.wikipedia.org/wiki/C3_linearization)机制；这是为了解决所谓的“[钻石问题](http://en.wikipedia.org/wiki/Diamond_problem)”。

一旦你在你的类层次结构中引入了多重继承，任何给定的类都没有它继承的单个潜在类，它只有“MRO 中的下一个类”，即使对于那些期望它们继承自某些类的类也是如此特别是班级。

例如，如果`class A(object)`、`class B(A)`、`class C(A)`和`class D(B, C)`，则类的 MRO`D`是`D->B->C->A`。B 类可能被编写，可能是，认为它是 A 的后代，当它调用`super()`自身时，它会获得 A 上的方法。但这不再是真的；当 B 调用 时`super()`，它将在 C 上获得一个方法，如果它存在的话。

如果您在重写的方法中更改方法签名，这可能是一个问题。B 类在调用 super 时期望来自 A 类的方法的签名，而是从 C 中获取一个方法，该方法可能没有该签名（从 B 类的角度来看，可能会或可能不会实现所需的行为）。

```
class A(object):
    def __init__(self, foo):
        print "A!"

class B(A):
    def __init__(self, foo, bar):
        print "B!"
        super(B, self).__init__(foo)

class C(A):
    def __init__(self, foo, baaz):
        print "C!"
        super(C, self).__init__(foo)

class D(B, C):
    def __init__(self, foo, bar):
        print "D!"
        super(D, self).__init__(foo, bar)

print D.mro()
D("foo", "bar") 
```

在此代码示例中，类 B 和 C 合理地扩展了 A，并更改了它们的`__init__`签名，但正确地调用了它们预期的超类签名。但是当你像那样做 D 时，B 的有效“超类”变成了 C 而不是 A。当它调用 super 时，事情就会爆炸：

```
[<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>, <class '__main__.A'>, <type 'object'>]
D!
B!
Traceback (most recent call last):
  File "/tmp/multi_inherit.py", line 22, in <module>
    D("foo", "bar")
  File "/tmp/multi_inherit.py", line 19, in __init__
    super(D, self).__init__(foo, bar)
  File "/tmp/multi_inherit.py", line 9, in __init__
    super(B, self).__init__(foo)
TypeError: __init__() takes exactly 3 arguments (2 given) 
```

其他方法也可能发生同样的事情（如果它们调用`super()`），并且“钻石”不必只出现在类层次结构的根部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T12:44:51.213

除了@Matt Anderson 的回答之外，我认为这些限制实际上是针对旧式类（[Python 2.6 的教程仍然解决](http://docs.python.org/release/2.6/tutorial/classes.html#multiple-inheritance)）。

在 Python 3 教程中，文本现在是：[Python 也支持一种多重继承形式](http://docs.python.org/release/3.0.1/tutorial/classes.html#multiple-inheritance)。

# asp.net - 当我们尝试使用 C# 2.0 从 Tridion 2009 代理 LINK_INFO 表中获取一些数据时，服务器性能下降

> ID：10674431
> 
> 赞同：0
> 
> 时间：2012-05-20T14:50:19.630
> 
> 标签：asp.net, c#-2.0, tridion, tridion2009, tridion-content-delivery

实际上我试图在我们的页面上实现谷歌标记，以便我们的用户控件将在页面标题部分呈现以下 HTML 类型

```
<link rel="alternate" hreflang="en-GB" href="http://www.mysite.com/english/index.aspx" />

<link rel="alternate" hreflang="de-DE" href="http://www.mysite.com/de/german/index.aspx" />

<link rel="alternate" hreflang="en-DE" href="http://www.mysite.com/de/english/index.aspx" />

<link rel="alternate" hreflang="ru-RU" href="http://www.mysite.com/ru/russian/index.aspx" />

<link rel="alternate" hreflang="en-RU" href="http://www.mysite.com/ru/english/index.aspx" />

<link rel="alternate" hreflang="fr-FR" href="http://www.mysite.com/fr/french/index.aspx" />

<link rel="alternate" hreflang="it-IT" href="http://www.mysite.com/it/italian/index.aspx" />

<link rel="alternate" hreflang="ja-JP" href="http://www.mysite.com/jp/japanese/index.aspx" />

<link rel="alternate" hreflang="ko-KR" href="http://www.mysite.com/kr/korean/index.aspx" />

<link rel="alternate" hreflang="pt-BR" href="http://www.mysite.com/br/portuguese/index.aspx" />

<link rel="alternate" hreflang="zh-Hans-CN" href="http://www.mysite.com/cn/chinese/index.aspx" />

<link rel="alternate" hreflang="en-US" href="http://www.mysite.com/us/english/index.aspx" />

<link rel="alternate" hreflang="en-GB" href="http://www.mysite.com/uk/english/index.aspx" />

<link rel="alternate" hreflang="en-AU" href="http://www.mysite.com/au/english/index.aspx" />

<link rel="alternate" hreflang="en-AE" href="http://www.mysite.com/ae/english/index.aspx" /> 
```

在上面的 html 中，您可以从 Broker LINK_INFO 表中找到 HTML“/ae/english/index.aspx、/au/english/index.aspx 等”的这一部分，这个实现工作正常，直到我们使用 LIVE 代理数据库进入 LIVE 网站，并且当我们在 LIVE 上启用此功能时，我们的服务器性能由于代理数据库的点击而被杀死，并且似乎锁定了 LINK_INFO 表，因为我们的网站每天有 150 万次点击，上述功能的工作原理如下：

1.  每当加载任何网站页面时，它都会调用我们的代理，代理调用我们的 Web 服务，Web 服务调用我们的 SQL 过程，该过程会转到 LINK_INFO 表并根据传递给 SQL 过程的 PageID 取出结果列表。
2.  SQL 过程返回的 xml 结果然后被传递给我的 XSLT 使用它的控件，并在完整的 HTML 之上呈现出来。

似乎出了点问题，请建议是否有其他方法可以在不接触代理数据库的情况下实现上述功能。编写 Page EVENT 或自定义 Deployer 会有所帮助吗？

请推荐！！

注意：我们使用的是 Tridion 2009

编辑：代理 SQL 过程如下：

```
ALTER PROCEDURE [dbo].[GETDataFromLinkInfo] 
-- Add the parameters for the stored procedure here 
(@PageID INT) 
AS 
  BEGIN 
      -- SET NOCOUNT ON added to prevent extra result sets from 
      -- interfering with SELECT statements. 
      SET NOCOUNT ON; 

      -- Insert statements for procedure here 
      SELECT DISTINCT [PUBLICATION_ID] AS n, 
                      [URL]            AS u 
      FROM   [LINK_INFO] WITH(NOLOCK) 
      WHERE  Page_ID = @PageID 
             AND Component_Template_Priority > 0 
             AND PUBLICATION_ID NOT IN( 232, 481 ) 
      ORDER  BY URL 
      FOR XML RAW ('p'), ROOT ('ps'); 

      RETURN 
  END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:59:15.713

不支持直接查询数据库，这可能会使您的支持合同无效，并且 - 显然 - 规避了 Tridion Cache 的使用（这可能部分解释了您的性能问题）。建议：使用 Tridion LINKING API 来实现您想要实现的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T21:42:15.667

我希望您的实现中有一些标准代码，您可以在其中搜索一些适当的 Tridion API 链接。显然，如前所述，不支持直接查询 Tridion Broker，但对于 Tridon Core Linking 功能也没有任何意义。

无论如何，寻找看起来像这样的代码：

```
<tridion:ComponentLink runat="server" PageURI='tcm:12-1234-64'
                TemplateURI="tcm:0-0-0" ComponentURI="tcm:12-1233"
                LinkText="proper Tridion Linking in .NET" TextOnFail="true"/> 
```

尽快获取一些 Tridon 文档。与 Tridion 合作时，这是必须的！

祝你好运！

* * *

编辑：一个未经测试的代码示例，当使用 pageID（没有 TCM）调用方法 id 时，它应该能够在头部写出您的 Google Markup MultiLingual 链接：

```
using System;
using Tridion.ContentManager;
using Tridion.ContentManager.CommunicationManagement;
using Tridion.ContentManager.ContentManagement;
using Tridion.ContentManager.Templating;

namespace Website.TridionTBBs.Utilities
{
    /// <summary>
    /// Class exposing utility methods for frequent Tridion item methods.
    /// </summary>
    public static class TridionCustomUtilities
    {
        #region Constants

        public const string PageLinkGoogleMarkup = "<link rel=\"alternate\" hreflang=\"{0}\" href=\"{1}\" />\r\n";

        #endregion

        #region PageLinks
        /// <summary>
        /// This method will return the MultiLingual Google Markup link
        /// Relies on two important Webconfig entries where the publication and culture information is located
        /// <add key="publications" value="26,27,28,29,30,31,32,33,34" />
        /// <add key="tcm:0-26-1" value="en-GB" />
        /// <add key="tcm:0-27-1" value="de-DE" />
        /// etc...
        /// </summary>
        /// <param name="pageID">The PageId is provided from the page</param>
        static void GoogleMarkupPageLink(int pageID)
        {

            string[] publicationIDs = ConfigurationManager.AppSettings["publications"].Split(',');

            StringWriter s = new StringWriter();

            using (PageLink pageLink = new PageLink())
            {
                for (int i = 0; i < publicationIDs.Count; i++)
                {
                    Link link = pageLink.GetLink(String.Format("tcm:{0}-{1}", publicationIDs[i], pageID.ToString()));

                    if (link != null && link.IsResolved)
                    {
                        string linkUrl = link.Url;

                    }
                    string culture = ConfigurationManager.AppSettings[String.Format("tcm:0-{0}-1", publicationIDs[i])];

                    Response.Write(String.Format(PageLinkGoogleMarkup, culture, linkUrl));
                }
            }
        }
        #endregion
    }
} 
```

这将要求您在 web.config 中存储属于每个出版物的出版物和文化字符串。当然，您也可以将其存储在其他地方，但这似乎是网络服务器最快且压力最小的。当然，适当的缓存需要到位。

这将避免您必须编写自定义部署脚本或其他复杂的非标准 Tridion 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T22:36:11.097

每当您遇到数据库性能问题时，有两种方法可以快速解决问题：

1.  在查询（排序和过滤）中使用的列上添加附加索引
2.  将昂贵查询的结果缓存一段时间

在这种情况下，我肯定会查看索引，因为听起来您可能在实时数据库中缺少一些必要的 XML 索引。如果您对数据库操作不是很熟练，还可以考虑将生成的 HTML 片段保留在静态变量中，并将其重新用于后续请求。即使您只是这样做 5 分钟，您最终也会按因素减少对数据库的命中。

* * *

我认为关于对 Tridion 数据库使用 SQL 的警告现在已经足够了。从长远来看，您绝对应该寻找一种通过 Tridion Content Delivery API 获取相同信息的方法。我很确定在那里也可以轻松获得相同的信息，尽管我不完全确定您是否也可以像在这里一样快速地获得结果作为列表。

即使您走这条路可能会遇到类似的性能问题，但您至少会回到受支持的 Tridion 域。这意味着更多的 Tridion 社区成员可以帮助您。

一旦切换到使用 Tridion API，缓存肯定也是减少性能问题的一种选择。或者，您确实可以将语言/URL 列表作为单独的文件保存在磁盘上，并在每次部署相关内容时进行更新。Tridion 部署程序的扩展将是执行此操作的合乎逻辑的地方。如果您在 Google 上搜索“Tridion 部署程序扩展”，我很确定会出现一些好的结果。

# android - 安装错误，不知道怎么办

> ID：10674433
> 
> 赞同：1
> 
> 时间：2012-05-20T14:50:27.833
> 
> 标签：android

当我运行我的应用程序时，它不会启动，并在控制台中向我显示此消息：

```
[2012-05-20 17:36:58 - TravelersDictionary] Installation error:
INSTALL_FAILED_INSUFFICIENT_STORAGE 
[2012-05-20 17:36:58 - TravelersDictionary] Please check logcat output for more details.
[2012-05-20 17:36:58 - TravelersDictionary] Launch canceled! 
```

我确实检查了我的 Logcat，但没有任何东西是红色的。

这是最后 5 条 logcat 消息：

```
05-20 14:37:36.520: D/ExchangeService(438): Received deviceId from Email app: androidc259148960
05-20 14:37:36.520: D/ExchangeService(438): Reconciling accounts...
05-20 14:37:48.555: W/ThrottleService(75): unable to find stats for iface rmnet0
05-20 14:44:00.404: D/dalvikvm(75): GC_CONCURRENT freed 648K, 13% free 8475K/9735K, paused 12ms+11ms
05-20 14:44:32.975: D/dalvikvm(170): GC_CONCURRENT freed 397K, 13% free 6241K/7111K, paused 8ms+7ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:55:25.213

您会收到下一个错误：`Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE`正如错误所说，您的设备中没有足够的空间来安装该应用程序，因此请删除一些不需要的应用程序和其他数据，然后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:59:40.870

您的设备似乎已用完通常安装应用程序的内部存储空间。你有两个选择。删除一些应用程序，或者，由于您正在开发，如果您要达到的目标`API`级别高于`8 (Android 2.2)`，您可以`android:installLocation="preferExternal"`在`AndroidManifest.xml`文件中设置 , 。`Android`正如文档所说，将尝试将应用程序安装在外部存储中：

> 如果您声明“preferExternal”，您要求将您的应用程序安装在外部存储上，但系统不保证您的应用程序将安装在外部存储上。如果外部存储已满，系统会将其安装到内部存储上。

# javascript - 仅将后退按钮事件侦听器添加到特定页面

> ID：10674434
> 
> 赞同：1
> 
> 时间：2012-05-20T14:50:28.420
> 
> 标签：javascript, cordova

我正在研究 phonegap 并且我有一个 index.html 页面，我在其中向后退键添加了一个事件侦听器，它工作正常。

但我的问题是我只想在 index.html 和其他页面中覆盖后键功能，它应该具有默认的后键行为。我怎样才能做到这一点

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() { 
   document.addEventListener("backbutton", onBackKeyDown, false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:58:07.463

记录您当前显示的页面。回调可以测试你是否在 index.html 上，如果不是，返回`false`，传递事件（我认为）。

# ruby-on-rails - 在模型中渲染表单：nil:NilClass 的未定义方法“host_with_port”

> ID：10674435
> 
> 赞同：1
> 
> 时间：2012-05-20T14:50:51.133
> 
> 标签：ruby-on-rails, rails-activerecord

我正在渲染模型中包含表单的部分。好吧，这可能不是最明显的事情，但仍然：这就是我正在尝试的。

## 理由：

让我首先说明我为什么这样做（如果您有其他方式的建议，请随意）：

我正在为我的应用程序的用户构建一个简单的消息传递功能，以便当他们需要执行某个操作时，他们会通过消息得到通知，并且该消息包含要执行的数据和操作。

一个例子：用户正在收到加入给定组的邀请。邀请包含群组所有者的姓名、群组的名称和两个用于接受或忽略邀请的按钮。

## 编码：

这是消息模型：

```
class Message < ActiveRecord::Base

  def self.group_invitation(group, user)
    @m=Message.new({
                     :status => :unread,
                     :from_user_id => group.owner.id,
                     :to_user_id => user.id,
                     :type => :group_invitation,
                     :title => "Invitation to the group: #{group.name}.",
                     :message => ActionController::Base.new.send(:render_to_string,
                                :partial => 'messages/group_invitation',
                                            :locals => {:group => group,
                                                        :user => user}
                                                                 )
                  })
    @m.save!
  end
end 
```

这是我在模型中渲染的部分内容（即'messages/group_invitation'）：

```
<div>
  <h1> Invitation to <%= group.name %> </h1>
  <p>
    Hello <%= user.name %>,
  </p>
  <p>
    You have been invited by <%= group.owner.name %> to join the group
    <%= group.name %>.
  </p>
</div>

<div>
Please take one of the following action:
<br/>
     <%=  m= group.memberships.find_by_user_id(user.id)
       m.status = :validated
       render 'memberships/form', :membership => m, :method =>
       :put, :label => "Accept" %>
<br/>
    <%= render 'memberships/form', :membership => m, :method =>
      :delete, :label => "Ignore" %>
</div> 
```

其中“成员资格/表格”部分是：

```
<%= form_for membership, :html => {:method => method} do |f| %>
 <%= f.hidden_field :group_id %>
 <%= f.hidden_field :user_id %>
 <%= f.hidden_field :status %>
 <%= f.submit :value => label %>
<% end %> 
```

用户拥有在发送邀请时创建的组的成员资格，该组的状态为“已邀请”。用户将收到一条内部消息，其中包含将成员资格更新为“已验证”状态的能力。

如果没有表格，则可以正确生成邀请，但使用表格时，我在“会员资格/表格”部分的第一行收到以下错误：

```
undefined method `host_with_port' for nil:NilClass 
```

我假设我必须在某处包含/要求 urlherlpers 的定义，以便渲染生成正确的路径等。但我这样做的尝试并没有取得任何成功。

所以如果有一些聪明的人在看它，他可能会很友善地给我一些解决这个问题的想法。

非常感谢期待

# java - 如何初始化 org.apache.commons.math3.geometry.Vector？

> ID：10674437
> 
> 赞同：0
> 
> 时间：2012-05-20T14:51:16.557
> 
> 标签：java, apache, math, vector, geometry

我正在尝试通过导入**org.apache.commons.math3.geometry.Vector**创建一个矢量对象。
令我困惑的是如何制作它的实例。
我试过这样：
Vector v1 = new Vector(1, 2, 3);
但是 ide 说“ **‘向量’是抽象的，不能被实例化**”
有人知道这个类吗？谢谢。

PS 我使用的 (1, 2, 3) 可能会产生误导。我想要的是一个动态向量，我可以将它的维度分配给它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:54:43.613

尝试这个：

```
Vector v1 = new Vector3D(1, 2, 3); 
```

您需要一个实现 Vector 的类。javadocs 告诉您有三个选择：`Vector1D`、`Vector2D`和`Vector3D`。

为什么他们创建了一个我永远不会知道的一维向量。我通常称这些为“标量”。

如果您需要更大的向量，请使用`RealVector`及其子类`ArrayRealVector`.

您是否无法打开 javadocs 并自行研究？如果你自己做一点思考，你会取得更快的进步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:54:45.837

这是界面 -[矢量图](http://commons.apache.org/math/apidocs/org/apache/commons/math3/geometry/Vector.html)

您应该改用 Vector3D。如果您使用的是 Eclipse，您可以单击`Vector`并按下`Ctrl+T`以查看层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:22:37.490

如果您需要一个真正的具有点积等的数学向量，并且具有三个以上的元素，那么您似乎必须创建自己的实现 Vector 接口的类。使用 apache Vector3D 类作为模型并从那里扩展它。

如果您只是在寻找一个相对简单的元素数组，请改用此类：

[http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)

# symfony-1.4 - 避免 Symfony 中的“用户交叉访问”

> ID：10674439
> 
> 赞同：1
> 
> 时间：2012-05-20T14:51:30.160
> 
> 标签：symfony-1.4

我目前正在开发一个基于 Symfony 1.4 的项目。我正在使用 sfDoctrineGuardPlugin 来验证我的两种用户：用户和管理员。对于每个模块和模块中的每个操作，我使用凭据来防止执行未经授权的操作。

但是我面临一个问题：例如，如果用户想要编辑项目，则 URL 将类似于*frontend.php/project/edit/id/1*。在这里，我们假设项目#1 属于他。现在，假设项目#2 不属于他。如果他键入 URL *frontend.php/project/edit/id/2*，他将有权访问编辑表单，并且将能够编辑不属于他的项目。

我怎样才能防止这种行为？

我想避免在显示编辑表单之前验证每个可编辑模型的所有权......但我可以做不同的事情吗？

你有什么好的做法或建议来防止这种行为吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:53:37.237

由于您必须签入项目以了解是否允许当前用户编辑项目，我认为除了在操作部分进行编辑之前进行验证之外，您没有其他方法。你为什么不想这样做呢？

这个检查可以在 preExcute 函数中完成：

```
public function preExecute()
{
  $request = $this->getRequest()
  if ($request->hasParameter('id'))
  {
    $project = Doctrine_Core::getTable('Project')->find($request->getParameter('id'));
    $user_id = $this->getUser()->getGuardUser()->getId();

    $this->forward404If(
      $project->getUserId() !== $user_id, 
      'User #'.$user_id.' is not allowed to edit project #'.$project->getId()
    );
  }
} 
```

# php - 如何从我的数据库中获取字段“大小”的总和并将其打印在我的 php 页面中

> ID：10674442
> 
> 赞同：0
> 
> 时间：2012-05-20T14:51:40.293
> 
> 标签：php, sql

我有一个名为“照片”的表的数据库。在该表中，我有一列“大小”（这是我上传的照片的大小）。我想得到这些大小的总和并在我的 php 页面中打印总和。谁能给我一个示例代码（php代码中的sql代码）..？？

我试过这个：

```
$query = "SELECT SUM(ph_size) from photos";
$result= mysql_query($query,$con);
echo "<table border='1'>
<tr>
<th>SUM(ph_size)</th>
</tr>";

while($row = mysql_fetch_array($result))
{
//echo $row;
echo "<tr>";
echo "<td>" . $row['SUM(ph_size)'] . "</td>";
echo "</tr>";
}
echo "</table>"; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:54:40.703

您可以使用 sum 函数

```
$result=mysql_query("SELECT SUM(p.size) AS sum_of_photos_sizes FROM `photos` p WHERE 1");
if (mysql_num_rows($result)){
$data=mysql_fetch_array($result);
echo 'Total size of photos: '.$data['sum_of_photos_sizes'];
} 
```

# iphone - UITableViewCell 上的 UIPopoverController

> ID：10674446
> 
> 赞同：0
> 
> 时间：2012-05-20T14:51:57.553
> 
> 标签：iphone, objective-c, ios, uitableview, uipopovercontroller

我有一个`UITableView`单元格，里面有几个`UITextField`s。当用户单击其中一个文本字段时，会出现一个包含一些信息的弹出框。起初，他们必须在文本字段或弹出框之外单击以清除弹出框，然后再单击下一个文本框。因此，我随后将单元格添加`contentView`到弹出框控制器的`passThroughViews`属性中，以便他们可以随意单击该单元格中的不同文本字段，而不必先关闭弹出框控制器。但是，它使原始弹出框保持打开（这很好），然后也打开另一个相同的弹出框。

有没有办法在发送打开另一个命令之前判断一个弹出窗口是否已经打开？我想不出如何检测这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:11:37.973

如果每个单元格都控制弹出框的逻辑，您需要告诉您的自定义单元格来实现`UIPopoverControllerDelegate`协议，将弹出框的委托设置为`self`（单元格）并覆盖`popoverControllerDidDismissPopover`如下：

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    [self.pop dismissPopoverAnimated:YES]; // hide the popover
    self.pop = nil; // release the popover, this forces to create a fresh popover each time
} 
```

如果您愿意，您也可以删除该行`self.pop = nil;`，但请记住将其释放`dealloc`（我想您没有使用 ARC 代码，因为您正在使用`retainCount`）。正如**bbum**建议的那样，您不应该使用它`retainCount`来检查对象是否存在。

此外，如果您想查看弹出框是否已经可见，每个`UIPopoverController`实例都有一个名为的属性。`popoverVisible`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:19:43.827

好的，我做到了。对于其他发现此问题的人。除了其他答案之外，这就是我的做法。

我把我的视图控制器做成了一个`UIPopoverControllerDelegate`.

然后我创建了一个`BOOL`名为`myPopoverControllerOpen`.

当我创建我的弹出框时，我将其设置`BOOL`为是。然后使用委托方法`popoverDidDismissPopover`将其设置`BOOL`为`NO`.

`BOOL`然后我在呈现弹出框之前检查它的状态。

# glassfish-3 - 开源 Glassfish 3.1.1 和聚类

> ID：10674453
> 
> 赞同：0
> 
> 时间：2012-05-20T14:52:26.750
> 
> 标签：glassfish-3, cluster-computing

我想测试在集群上运行的 Web 应用程序以获取有关性能的信息。我创建了具有两个节点的集群。我还在 2 个节点上部署了应用程序，并且在管理面板 GlassFish 中显示了节点的 IP，我可以从中访问应用程序。

集群信息页面提供以下信息：

```
Multicast Port: 2048
Multicast Address: 228.9.3.1 
```

但是如果我键入给定的地址和端口资源，则找不到。我将此值更改为我的主机 IP 和端口，但问题是一样的。

难道我做错了什么？我应该做更多的事情来设置集群 IP 和端口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:08:05.180

为了配置您的集群端口，您应该检查实例属性。

这是路径：

```
Clusters -> <your cluster name> -> Instances -> <your instance name> -> Properties 
```

然后更改为您想要的值。

# jquery - 如何创建视图的路径以订阅bayeux.getClient().publish(

> ID：10674454
> 
> 赞同：1
> 
> 时间：2012-05-20T14:52:32.553
> 
> 标签：jquery, node.js, faye, bayeux

我正在使用 node js 和 faye 简单地将一些消息传递给客户端，

我创建一个节点服务器

```
var http = require('http'),
    faye = require('faye'),
    url =  require('url'),
    qs = require('querystring');
var POST;
var bayeux = new faye.NodeAdapter({mount: '/faye', timeout: 45});

function publish(request,response)
{
    var body = '';
    request.on('data', function (data) {
        body += data;
    });
    request.on('end', function () {
        POST = qs.parse(body);

        if(POST.secrete_key=="@#$werw*#@erwe*&^&*rw234234") // validate request using secret key
        {
            if(POST.root=="global"||POST.root=="web"){
                bayeux.getClient().publish(POST.channelWeb,{text: POST.textWeb});
            }
            if(POST.root=="global"||POST.root=="mobile"){
                bayeux.getClient().publish(POST.channelMobile,{text: POST.textMobile});
            }

            //eval(POST.auth_type+"_"+POST.update_type+"()");   
        }//end validate request
        else
        {
            response.writeHead(404);
            response.end('404 File not found');
        }
    });
    response.end();
}

// Handle non-Bayeux requests
var server = http.createServer(function (request,response)
{
    var pathRegex = new RegExp('^/publish/?$');
    var pathname = url.parse(request.url).pathname;
    if (pathRegex.test(pathname)) {
       publish(request, response);

    } else {
       render404(request, response);
    }
});

bayeux.attach(server);
server.listen(8000); 
```

我用来`bayeux.getClient().publish(`向特定客户端发布消息。

我创建了一个订阅 js

```
var client = new Faye.Client(n.node_url+':8000/faye/');
client.subscribe(n.channel, function(message) {

    obj.processNotification(obj,message.text,n.user_id,n.user_type,n.channel);
}); 
```

问题是，我不知道如何创建**频道**

在

```
bayeux.getClient().publish(channel, message); 
```

以及如何订阅它，请帮助。提前致谢 ................

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-25T07:48:48.480

基本上在服务器端，您可以创建一个逻辑来创建不同的频道并将其保存在您的数据库中，以便您的客户订阅它并使用它进行通信。

例如，可能有两个用户，A 和 B。用户 A 和 B 在您的服务器上登录的时间，您可以根据他们的用户 id 和名称以及一些动态数字的组合为每个用户创建两个频道。这为所有用户提供了默认频道来收听和订阅。这些通道可用于从服务器向客户端发送消息，这些消息可以作为对客户端的通知。

现在为了交流的目的，可以有一个所有用户都订阅的频道，例如OpenTalks，可以用来聊天。

您可以为一对一的对话进一步细化频道的制作。

```
bayeux.getClient().subscribe('/'+channel_name, message);
bayeux.getClient().publish('/'+channel_name, message); 
```

或者你可以使用

```
const faye = require('faye');
var client = new faye.Client('http://localhost:3000/faye',{timeout: 20});
client.connect();
client.subscribe('/'channel_name, function(message){console.log(message);});
client.publish ('/'+response1[0].channel_id, {channel_name: channel_name,message: message}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:40:56.437

您无需创建通道，也无需事先设置，只需发布​​到通道，该通道中的任何侦听器都将接收数据。

您的代码中已经有了订阅频道的代码：

```
var client = new Faye.Client(n.node_url+':8000/faye/');
client.subscribe(n.channel, function(message) {

    obj.processNotification(obj,message.text,n.user_id,n.user_type,n.channel);
}); 
```

# php - 无法通过 php curl 登录

> ID：10674461
> 
> 赞同：2
> 
> 时间：2012-05-20T14:53:28.440
> 
> 标签：php, curl, login

我想登录 [大学食品预订](http://stu24.kntu.ac.ir)，所以在谷歌浏览器中编辑 `action`表格并将数据发送到我的网站，看看当我按下提交按钮时发送了什么。

```
__LASTFOCUS=&__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=/wEPDwULLTEyMDgzNjUwNDIPZBYCAgMPZBYSAgEPDxYCHgRUZXh0BboB2LPbjNiz2KrZhSAg2KfZhNqp2KrYsdmI2YbbjNqp24wg2KfZgdiy2KfbjNi0INin2LnYqtio2KfYsSDZiCDYrtix24zYryDamNiq2YjZhiDYr9in2YbYtNqv2KfZhyDYtdmG2LnYqtuMINiu2YjYp9is2Ycg2YbYtduM2LHYp9mE2K/bjNmGINi32YjYs9uMINiv2KfZhti02qnYr9mHINio2LHZgiDZiCDaqdin2YXZvtuM2YjYqtixZGQCAw8PFgYfAAVL2YbYp9mFINqp2KfYsdio2LHbjCDZiCDaqdmE2YXZhyDYudio2YjYsSDYrtmI2K8g2LHYpyDZiNin2LHYryDZhtmF2KfYptuM2K8uHghDc3NDbGFzcwUHbWVzc2FnZR4EXyFTQgICZGQCBQ8PFgIeB1Zpc2libGVoZGQCBw8WAh8DaGQCCQ8PFgIfA2hkZAIVDw8WAh8ABbML2K/Yp9mG2LTYrNmI2YrYp9mGINiv2KfZhti02qnYr9mHINio2LHZgiDZiCDaqdin2YXZvtmK2YjYqtixINio2Ycg2YXZhti42YjYsSDYp9mB2LLYp9mK2LQg2KfYudiq2KjYp9ixINin2YrZhtiq2LHZhtiq2Yog2Ygg2LHYstix2Ygg2LrYsNinINmF2Yog2KjYp9mK2LPYqiDYqNmHINmG2qnYp9iqINiw2YrZhCDYqtmI2KzZhyDZhtmF2KfZitmG2K8uDQoNCjEt2YbYp9mFINqp2KfYsdio2LHZiiDZiCDYsdmF2LIg2LnYqNmI2LHYjCDYtNmF2KfYsdmHINiv2KfZhti02KzZiNmK2Yog2LTZhdinINmF2Yog2KjYp9i02K/YjCDaqdmHINm+2LMg2KfYsiDZiNix2YjYryDZhdmKINio2KfZitiz2Kog2LHZhdiyINi52KjZiNixINiu2YjYryDYsdinINiq2LrZitmK2LEg2K/Zh9mK2K8uDQoNCjIt2K/YsSDYtdmI2LHYqiDYudiv2YUg2KrZiNin2YbYp9mK2Yog2YjYsdmI2K8g2KjZhyDYs9mK2LPYqtmF2Iwg2KjZhyDZvtmK2LrYp9mFINio2KfZhNin2Yog2LXZgdit2Ycg2KrZiNis2Ycg2YbZhdmI2K/ZhyDZiCDYqNmHINmF2YbYuNmI2LEg2LHZgdi5INmG2YLYtSDYqNmHINmB2YrYtCDZgdix2YjYtNmKINiv2KfZhti02qnYr9mHINmF2LHYp9is2LnZhyDZhtmF2KfZitmK2K8uDQoNCjMt2KjZhyDZhdmG2LjZiNixINin2YHYstin2YrYtCDYp9i52KrYqNin2LEg2YXZiiDYqNin2YrYs9iq2Iwg2YXZhtmI2Yog2KfZgdiy2KfZiti0INin2LnYqtio2KfYsSDYsdinINqp2YTZitqpINmG2YXYp9mK2YrYryDZiCDYqNinINiv2LEg2K/Ys9iqINiv2KfYtNiq2YYg2YraqdmKINin2LIg2qnYp9ix2Kog2YfYp9mKINio2KfZhtqp2Yog2LnYttmIINi02KrYp9ioINqp2Ycg2K/Yp9ix2KfZiiDYsdmF2LIg2KfZitmG2KrYsdmG2KrZiijYsdmF2LIg2K/ZiNmFKSDZiCDYsdmF2LIgQ1ZWMiDZhdmKINio2KfYtNivLiDYp9iyINi32LHZitmCINiz2KfZhdin2YbZhyDYqNin2YbaqSDaqdi02KfZiNix2LLZiiDYp9mC2K/Yp9mFINmG2YXYp9mK2YrYry4NCg0KNC3YqNmHINmF2YbYuNmI2LEg2LHYstix2Ygg2LrYsNinINmF2Yog2KjYp9mK2LPYqiDYp9iyINi32LHZitmCINio2LHZhtin2YXZhyDYutiw2KfZitmKINi62LDYp9mKINmF2YjYsdivINmG2LjYsSDYrtmI2K8g2LHYpyDYp9mG2KrYrtin2Kgg2YbZhdmI2K/ZhyDZiCDYs9m+2LMg2KjYsSDYsdmI2Yog2YXYsdio2Lkg2LPZhNmBINmH2YXYp9mGINix2YjYsiDaqdmE2YraqSDZiCDYqtin2YrZitivINmG2YXYp9mK2YrYry4NCg0KNS3YqNmHINmF2YbYuNmI2LEg2KfZhti12LHYp9mBINin2LIg2LrYsNin2Yog2LHYstix2Ygg2LTYr9mH2Iwg2YXZiiDYqtmI2KfZhtmK2K8g2KrYpyDZitqpINix2YjYsiDZgtio2YQg2KfYsiDZhdmI2LnYryDYqtit2YjZitmEINi62LDYp9iMINio2Kcg2LXZgdixINmG2YXZiNiv2YYg2KrYudiv2KfYryDYutiw2Kcg2K/YsSDYsdmI2LIg2YXZiNix2K8g2YbYuNix2Iwg2YLYr9in2YUg2YbZhdin2YrZitivLmRkAhcPFgIfA2hkAhkPDxYCHwAFDlZlcnNpb24gOiA3Ljg5ZGQCGw8PFgIfAAWCASDaqdmE2YrZhyDYrdmC2YjZgiDYp9mK2YYg2KfYq9ixINi32KjZgiDZgtmI2KfZhtmK2YYg2YbYsdmFINin2YHYstin2LHZiiDZhdiq2LnZhNmCINio2Ycg2LTYsdqp2Kog2KzZh9in2YYg2q/Ys9iq2LEg2YXZitio2KfYtNivLiBkZGQaTTds32c97LYgZhFGpQ6mmaEMKg==&__EVENTVALIDATION=/wEWBALtyp+2DQKl1bKdCAK1qbT2CQKC3IfLCT5A0UwjzwbH6JTK21okH7qC0C74&txtusername=myusername&txtpassword=mypassword&btnlogin=ورود&
```

之后我用php和curl开发e代码来自动完成。

```
$post_fields = '__LASTFOCUS=&__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=/wEPDwULLTEyMDgzNjUwNDIPZBYCAgMPZBYSAgEPDxYCHgRUZXh0BboB2LPbjNiz2KrZhSAg2KfZhNqp2KrYsdmI2YbbjNqp24wg2KfZgdiy2KfbjNi0INin2LnYqtio2KfYsSDZiCDYrtix24zYryDamNiq2YjZhiDYr9in2YbYtNqv2KfZhyDYtdmG2LnYqtuMINiu2YjYp9is2Ycg2YbYtduM2LHYp9mE2K/bjNmGINi32YjYs9uMINiv2KfZhti02qnYr9mHINio2LHZgiDZiCDaqdin2YXZvtuM2YjYqtixZGQCAw8PFgYfAAVL2YbYp9mFINqp2KfYsdio2LHbjCDZiCDaqdmE2YXZhyDYudio2YjYsSDYrtmI2K8g2LHYpyDZiNin2LHYryDZhtmF2KfYptuM2K8uHghDc3NDbGFzcwUHbWVzc2FnZR4EXyFTQgICZGQCBQ8PFgIeB1Zpc2libGVoZGQCBw8WAh8DaGQCCQ8PFgIfA2hkZAIVDw8WAh8ABbML2K/Yp9mG2LTYrNmI2YrYp9mGINiv2KfZhti02qnYr9mHINio2LHZgiDZiCDaqdin2YXZvtmK2YjYqtixINio2Ycg2YXZhti42YjYsSDYp9mB2LLYp9mK2LQg2KfYudiq2KjYp9ixINin2YrZhtiq2LHZhtiq2Yog2Ygg2LHYstix2Ygg2LrYsNinINmF2Yog2KjYp9mK2LPYqiDYqNmHINmG2qnYp9iqINiw2YrZhCDYqtmI2KzZhyDZhtmF2KfZitmG2K8uDQoNCjEt2YbYp9mFINqp2KfYsdio2LHZiiDZiCDYsdmF2LIg2LnYqNmI2LHYjCDYtNmF2KfYsdmHINiv2KfZhti02KzZiNmK2Yog2LTZhdinINmF2Yog2KjYp9i02K/YjCDaqdmHINm+2LMg2KfYsiDZiNix2YjYryDZhdmKINio2KfZitiz2Kog2LHZhdiyINi52KjZiNixINiu2YjYryDYsdinINiq2LrZitmK2LEg2K/Zh9mK2K8uDQoNCjIt2K/YsSDYtdmI2LHYqiDYudiv2YUg2KrZiNin2YbYp9mK2Yog2YjYsdmI2K8g2KjZhyDYs9mK2LPYqtmF2Iwg2KjZhyDZvtmK2LrYp9mFINio2KfZhNin2Yog2LXZgdit2Ycg2KrZiNis2Ycg2YbZhdmI2K/ZhyDZiCDYqNmHINmF2YbYuNmI2LEg2LHZgdi5INmG2YLYtSDYqNmHINmB2YrYtCDZgdix2YjYtNmKINiv2KfZhti02qnYr9mHINmF2LHYp9is2LnZhyDZhtmF2KfZitmK2K8uDQoNCjMt2KjZhyDZhdmG2LjZiNixINin2YHYstin2YrYtCDYp9i52KrYqNin2LEg2YXZiiDYqNin2YrYs9iq2Iwg2YXZhtmI2Yog2KfZgdiy2KfZiti0INin2LnYqtio2KfYsSDYsdinINqp2YTZitqpINmG2YXYp9mK2YrYryDZiCDYqNinINiv2LEg2K/Ys9iqINiv2KfYtNiq2YYg2YraqdmKINin2LIg2qnYp9ix2Kog2YfYp9mKINio2KfZhtqp2Yog2LnYttmIINi02KrYp9ioINqp2Ycg2K/Yp9ix2KfZiiDYsdmF2LIg2KfZitmG2KrYsdmG2KrZiijYsdmF2LIg2K/ZiNmFKSDZiCDYsdmF2LIgQ1ZWMiDZhdmKINio2KfYtNivLiDYp9iyINi32LHZitmCINiz2KfZhdin2YbZhyDYqNin2YbaqSDaqdi02KfZiNix2LLZiiDYp9mC2K/Yp9mFINmG2YXYp9mK2YrYry4NCg0KNC3YqNmHINmF2YbYuNmI2LEg2LHYstix2Ygg2LrYsNinINmF2Yog2KjYp9mK2LPYqiDYp9iyINi32LHZitmCINio2LHZhtin2YXZhyDYutiw2KfZitmKINi62LDYp9mKINmF2YjYsdivINmG2LjYsSDYrtmI2K8g2LHYpyDYp9mG2KrYrtin2Kgg2YbZhdmI2K/ZhyDZiCDYs9m+2LMg2KjYsSDYsdmI2Yog2YXYsdio2Lkg2LPZhNmBINmH2YXYp9mGINix2YjYsiDaqdmE2YraqSDZiCDYqtin2YrZitivINmG2YXYp9mK2YrYry4NCg0KNS3YqNmHINmF2YbYuNmI2LEg2KfZhti12LHYp9mBINin2LIg2LrYsNin2Yog2LHYstix2Ygg2LTYr9mH2Iwg2YXZiiDYqtmI2KfZhtmK2K8g2KrYpyDZitqpINix2YjYsiDZgtio2YQg2KfYsiDZhdmI2LnYryDYqtit2YjZitmEINi62LDYp9iMINio2Kcg2LXZgdixINmG2YXZiNiv2YYg2KrYudiv2KfYryDYutiw2Kcg2K/YsSDYsdmI2LIg2YXZiNix2K8g2YbYuNix2Iwg2YLYr9in2YUg2YbZhdin2YrZitivLmRkAhcPFgIfA2hkAhkPDxYCHwAFDlZlcnNpb24gOiA3Ljg5ZGQCGw8PFgIfAAWCASDaqdmE2YrZhyDYrdmC2YjZgiDYp9mK2YYg2KfYq9ixINi32KjZgiDZgtmI2KfZhtmK2YYg2YbYsdmFINin2YHYstin2LHZiiDZhdiq2LnZhNmCINio2Ycg2LTYsdqp2Kog2KzZh9in2YYg2q/Ys9iq2LEg2YXZitio2KfYtNivLiBkZGQaTTds32c97LYgZhFGpQ6mmaEMKg==&__EVENTVALIDATION=/wEWBALtyp+2DQKl1bKdCAK1qbT2CQKC3IfLCT5A0UwjzwbH6JTK21okH7qC0C74&txtusername=8909103&txtpassword=temptemp&btnlogin=ورود&';
    $ch = curl_init("http://stu24.kntu.ac.ir/Login.aspx");;
    $cookie = fopen("temp.txt", "w+");
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
    curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
    curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8');
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
    $x = curl_exec($ch);
    echo ($x);
    curl_close($ch); 
```

但它会从服务器返回错误。

```
“/”应用程序中的服务器错误。

此页面的状态信息无效，可能已损坏。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Web.HttpException：此页面的状态信息无效并且可能已损坏。

源错误：

生成此未处理异常的源代码只能在调试模式下编译时显示。要启用此功能，请按照以下步骤之一，然后请求 URL：

1\. 在产生错误的文件顶部添加“Debug=true”指令。例子：

或者：

2) 将以下部分添加到应用程序的配置文件中：

请注意，第二种技术将导致给定应用程序中的所有文件都以调试模式编译。第一种技术将导致仅在调试模式下编译该特定文件。

重要提示：在调试模式下运行应用程序确实会产生内存/性能开销。在部署到生产场景之前，您应该确保应用程序已禁用调试。

堆栈跟踪：

[FormatException：Base-64 字符数组的长度无效。]
   System.Convert.FromBase64String(String s) +0
   System.Web.UI.ObjectStateFormatter.Deserialize（字符串输入字符串）+72
   System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Deserialize(String serializedState) +4
   System.Web.UI.Util.DeserializeWithAssert(IStateFormatter formatter, String serializedState) +37
   System.Web.UI.HiddenFieldPageStatePersister.Load() +113

[ViewStateException：无效的视图状态。
    客户端IP：209.54.48.51
    端口：47212
    用户代理：Mozilla/5.0（Windows；U；Windows NT 5.1；en-US；rv:1.9.0.8）Gecko/2009032609 Firefox/3.0.8
    视图状态：/wEPDwULLTEyMDgzNjUwNDIPZBYCAgMPZBYSAgEPDxYCHgRUZXh0BboB2LPbjNiz2KrZhSAg2KfZhNqp2KrYsdmI2YbbjNqp24wg2KfZgdiy2KfbjNi0INin2LnYqtio2KfYsSDZiCDYrtix24zYryDamNiq2YjZhiDYr9in2YbYtNqv2KfZhyDYtdmG2LnYqtuMINiu2YjYp9is2Ycg2YbYtduM2LHYp9mE2K/bjNmGINi32YjYs9uMINiv2KfZhti02qnYr9mHINio2LHZgiDZiCDaqdin2YXZvtuM2YjYqtixZGQCAw8PFgYfAAVL2YbYp9mFINqp2KfYsdio2LHbjCDZiCDaqdmE2YXZhyDYudio2YjYsSDYrtmI2K8g2LHYpyDZiNin2LHYryDZhtmF2KfYptuM2K8uHghDc3NDbGFzcwUHbWVzc2FnZR4EXyFTQgICZGQCBQ8PFgIeB1Zpc2libGVoZGQCBw8WAh8DaGQCCQ8PFgIfA2hkZAIVDw8WAh8ABbML2K/Yp9mG2LTYrNmI2YrYp9mGINiv2KfZhti02qnYr9mHINio2LHZgiDZiCDaqdin2YXZvtmK2YjYqtixINio2Ycg2YXZhti42YjYsSDYp9mB2LLYp9mK2LQg2KfYudiq2KjYp9ixINin2YrZhtiq2LHZhtiq2Yog2Ygg2LHYstix2Ygg2LrYsNinINmF2Yog2KjYp9mK2LPYqiDYqNmHINmG2qnYp9iqINiw2YrZhCDYqtmI2KzZhyDZhtmF2KfZitmG2K8uDQoNCjEt2YbYp9mFINqp2KfYsdio2LHZiiDZiCDYsdmF2LIg2LnYqNmI2LHYjCDYtNmF2KfYsd...]

[HttpException (0x80004005): 此页面的状态信息无效，可能已损坏。]
   System.Web.UI.ViewStateException.ThrowError（异常内部，字符串persistedState，字符串errorPageMes​​sage，布尔macValidationError）+106
   System.Web.UI.ViewStateException.ThrowViewStateError（异常内部，字符串持久状态）+14
   System.Web.UI.HiddenFieldPageStatePersister.Load() +217
   System.Web.UI.Page.LoadPageStateFromPersistenceMedium() +105
   System.Web.UI.Page.LoadAllState() +43
   System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+6785
   System.Web.UI.Page.ProcessRequest（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+242
   System.Web.UI.Page.ProcessRequest() +80
   System.Web.UI.Page.ProcessRequestWithNoAssert（HttpContext 上下文）+21
   System.Web.UI.Page.ProcessRequest（HttpContext 上下文）+49
   ASP.login_aspx.ProcessRequest(HttpContext 上下文) +37
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +181
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75

版本信息：Microsoft .NET Framework 版本：2.0.50727.3053；ASP.NET 版本：2.0.50727.3053
```

如果我`$post_fields`只限制用户名和密码，它将再次重定向到登录页面。问题出在哪里，我应该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:06:02.420

您的视图状态无效。尝试`urlencode`您的`$post_fields`如果这无济于事，请尝试首先访问登录页面并从那里获取 viestate ？

# python - python中向量数组的范数

> ID：10674464
> 
> 赞同：5
> 
> 时间：2012-05-20T14:53:34.627
> 
> 标签：python, arrays, numpy, norm

我有这个数组

```
 A = array([[-0.49740509, -0.48618909, -0.49145315],
   [-0.48959259, -0.48618909, -0.49145315],
   [-0.49740509, -0.47837659, -0.49145315],
   ..., 
   [ 0.03079315, -0.01194593, -0.06872366],
   [ 0.03054901, -0.01170179, -0.06872366],
   [ 0.03079315, -0.01170179, -0.06872366]]) 
```

这是 3D 矢量的集合。我想知道是否可以使用向量运算来获得一个具有每个向量范数的数组。

我试过了，`norm(A)`但没有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T15:09:54.340

手动操作可能是最快的（尽管总有一些我没有想到的巧妙技巧）：

```
In [75]: from numpy import random, array

In [76]: from numpy.linalg import norm

In [77]: 

In [77]: A = random.rand(1000,3)

In [78]: timeit normedA_0 = array([norm(v) for v in A])
100 loops, best of 3: 16.5 ms per loop

In [79]: timeit normedA_1 = array(map(norm, A))
100 loops, best of 3: 16.9 ms per loop

In [80]: timeit normedA_2 = map(norm, A)
100 loops, best of 3: 16.7 ms per loop

In [81]: timeit normedA_4 = (A*A).sum(axis=1)**0.5
10000 loops, best of 3: 46.2 us per loop 
```

这假设一切都是真实的。如果那不是真的，可以乘以共轭。

更新：Eric 的 using 建议`math.sqrt`不起作用——它不处理 numpy 数组——但使用 sqrt 而不是的想法`**0.5`是一个很好的想法，所以让我们测试一下。

```
In [114]: timeit normedA_4 = (A*A).sum(axis=1)**0.5
10000 loops, best of 3: 46.2 us per loop

In [115]: from numpy import sqrt

In [116]: timeit normedA_4 = sqrt((A*A).sum(axis=1))
10000 loops, best of 3: 45.8 us per loop 
```

我试了几次，这是我看到的最大的不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-13T09:35:55.607

只是有同样的问题，也许回答迟了，但这应该对其他人有所帮助。您可以在规范函数中使用**轴参数**

```
norm(A, axis=1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:55:32.420

[这个方法](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html)怎么样？此外，您可能想在帖子中添加一个 [numpy] 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T14:57:03.130

从未使用过 numpy，我猜：

```
normedA = array(norm(v) for v in A) 
```

# c# - 使用 Dijkstra 算法找到最短路径

> ID：10674468
> 
> 赞同：11
> 
> 时间：2012-05-20T14:54:25.843
> 
> 标签：c#, dijkstra

我需要找到图的 2 个顶点之间的最短路径。我有一个矩阵，其中包含所有权重。我该怎么做？目前，我有以下代码：

```
private int[] Dijkstra(int start, int end)
    {
        bool[] done = new bool[8];
        int[] parent = new int[8];
        for (int i = 0; i < parent.Length; i++)
            parent[i] = -1;
        int[] distances = new int[8];
        for (int i = 0; i < distances.Length; i++)
            distances[i] = int.MaxValue;
        distances[start] = 0;
        int current = start;
        while (!done[current])
        {
            done[current] = true;
            for (int i = 0; i < 8; i++)
            {
                if (graph[current, i] != int.MaxValue)
                {
                    int dist = graph[current, i] + distances[current];
                    if (dist < distances[i])
                    {
                        distances[i] = dist;
                        parent[i] = current;
                    }
                }
            }
            int min = int.MaxValue;
            for (int i = 0; i < 8; i++)
            {
                if (distances[i] < min&&!done[i])
                {
                    current = i;
                    min = distances[i];
                }
            }
        }
        return parent;
    } 
```

它可以工作，但是，但是我不知道如何让它找到例如 1 和 3 之间的最短路线，并返回 1=>4=>2=>3 之类的路线。
提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T15:09:39.770

Djikstra 的算法使用父数组来跟踪从开始到结束的最短路径。您将从 parent[end] 开始并遵循数组的条目，直到您重新开始。

一些伪代码：

```
List<int> shortestPath = new List<int>();
int current = end;
while( current != start ) {
     shortestPath.Add( current );
     current = parent[current];
}

shortestPath.Reverse(); 
```

对于函数，您唯一需要担心的是传入的开始值和结束值是否是适当的值（例如，它们是否实际表示图中的顶点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T15:12:15.383

到达目标顶点后，您可以使用父矩阵回溯到起始顶点的路径。类似的东西（假设有一条从源到目标的路径）：

```
void backtrack(int source, int dest, vector<int> &path) 
{
   path.push_back(dest);

   for(int vertex = parent[dest]; vertex != source; vertex = parent[vertex])
     path.push_back(vertex);

   path.push_back(source);
} 
```

注意：路径将以相反的顺序排列。

# java - Java - 在 try/catch 中执行 try/catch 是不好的做法吗？

> ID：10674474
> 
> 赞同：62
> 
> 时间：2012-05-20T14:54:56.210
> 
> 标签：java, exception, exception-handling, try-catch

如果发生异常，我有一些要执行的代码。但是该代码也可以生成异常。但我从未见过有人在另一个 try/catch 中执行 try/catch。

是我在做什么不好的做法，也许有更好的方法来做到这一点：

```
 Uri uri = Uri.parse("some url");
 Intent intent = new Intent(Intent.ACTION_VIEW, uri);

 try 
 {
     startActivity(intent);
 } 
 catch (ActivityNotFoundException anfe) 
 {
     // Make some alert to me

     // Now try to redirect them to the web version:
     Uri weburi = Uri.parse("some url");
     try
     {
         Intent webintent = new Intent(Intent.ACTION_VIEW, weburi);
         startActivity(webintent);
     }
     catch ( Exception e )
     {
         // Make some alert to me                        
     }
 } 
```

这似乎有点尴尬。有什么可能有问题吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-20T14:57:10.093

没关系，尽管如果您的异常处理逻辑如此复杂，您可能会考虑将其分解为自己的函数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-20T14:58:47.907

编写具有如此多嵌套级别的代码是一种不好的做法，尤其是在`try-catch`- 所以我会说：避免。~~另一方面，从`catch`块中抛出异常是不可原谅的罪，所以你应该非常小心。~~

`catch`我的建议 - 将你的逻辑提取到一个方法中（所以`catch`块很简单）并确保这个方法永远不会抛出任何东西：

```
Uri uri = Uri.parse("some url");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);

try 
{
    startActivity(intent);
} 
catch (ActivityNotFoundException anfe) 
{
    // Make some alert to me

    // Now try to redirect them to the web version:
    Uri weburi = Uri.parse("some url");
    Intent webintent = new Intent(Intent.ACTION_VIEW, weburi);
    silentStartActivity(webintent)
} 

//...

private void silentStartActivity(Intent intent) {
    try
    {
       startActivity(webintent);
    }
    catch ( Exception e )
    {
        // Make some alert to me                     
    }
} 
```

此外，您似乎（我可能错了）您正在使用异常来控制程序流。`ActivityNotFoundException`如果抛出不是*异常*情况但在正常情况下可能发生，请考虑标准返回值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T15:04:06.697

答案是否定的.. 100% 没问题.. 你可能不得不在 JDBC 和 IO 中使用很多这些，因为它们有很多异常需要处理，一个在另一个里面......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-05T06:06:48.227

如果您不想使用嵌套的 try 和 catch，这是替代解决方案，您也可以这样做：

```
 boolean flag = false;
 void test();
 if(flag)
  {
   test2();
  } 
```

测试方法在这里：

```
private void test(){
   try {
        Uri uri = Uri.parse("some url");
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent);
   }catch (ActivityNotFoundException anfe){
        System.out.println(anfe);
        flag =true;
     }
 } 
```

现在把剩下的代码放在第二种方法中：

```
public void test2(){
  Uri weburi = Uri.parse("some url");
        try
        {
           Intent webintent = new Intent(Intent.ACTION_VIEW, weburi);
           startActivity(webintent);
        }
        catch ( Exception e )
        {
            // Make some alert to me                     
        } 
```

# php - 添加换行符作为分隔符

> ID：10674475
> 
> 赞同：0
> 
> 时间：2012-05-20T14:55:00.463
> 
> 标签：php

我有一个函数，它使用逗号作为分隔符来从长字符串中断开名称/电子邮件对。我想修改这个函数，以便能够检测是否使用了换行符而不是逗号。下面是需要修改的函数：

```
$str = '"Fname Lname" <abc@email.com>, abc@gmail.com';
$pairs = explode( ",", $str );
foreach( $pairs as $pair ) {
  if( strpos($pair, '<') ) {
    $output = explode( "<", $pair );
    $output['0'] = trim( str_replace( "\"", "", $output['0'] ) );
    $output['1'] = trim( rtrim( $output['1'], ">" ) );
  } else {
    $output = array();
    $output['0'] = '';
    $output['1'] = $pair;
  }
  print_r($output); // Save it to database here
} 
```

我发现了一篇建议使用 file() 函数的帖子，但我不确定如何将这两者结合在一起。

```
$str = '"Fname Lname" <abc@email.com>, abc@gmail.com';
$pairs = file($str, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:02:41.050

php 中真正的换行符写为`"\n"`. 只需使用

```
$pairs = explode( "\n", $str ); 
```

请注意，`\`更改 的行为`n`，因此使其成为换行符。`"\n"`给出了一条漂亮的线，同时`"\\n"`给出`\n`了输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:00:31.747

试试这个，转换为换行符然后检查是否存在

```
$str=nl2br($str);
if (strpos($str,'<br />')!==false){
$pairs = array_filter(explode( "<br />", $str ));
} 
```

或者，您可以在应该捕捉换行符的空间上分开

```
if (strpos($str,' ')!==false){
$pairs = array_filter(explode( " ", $str ));
} 
```

笔记; 我添加了 array_filter 因为它会为你删除空值。另外，我建议在添加到您的数据库之前使用此处[http://php.net/manual/en/filter.filters.validate.php的 FILTER_VALIDATE_EMAIL。](http://php.net/manual/en/filter.filters.validate.php)

# php - Yii 中的动态表单

> ID：10674477
> 
> 赞同：1
> 
> 时间：2012-05-20T14:55:03.083
> 
> 标签：php, javascript, html, yii

这是我与 yi 的第一个项目。这是 db 模型的一部分：

```
 table       columns 
 iteration   [id,name,description]
 activity    [id,iteration_id,name,description,duration] 
```

因此，为了规划迭代中的活动，我的想法是打印一个包含列的表

```
[name,description,duration] 
```

默认情况下有 1 行（必需）和一个用于向表中添加新行的按钮。

我找到了[THIS](http://www.yiiframework.com/doc/guide/1.1/en/form.table) tuto 来收集表格输入。现在我只需要实现动态部分。我该怎么做？yii 有什么可以帮助完成这项任务的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:49:49.317

不，我猜 Yii 到目前为止还没有任何东西可以帮助你完成这项任务。也许有一些扩展，但我总是使用 jQuery 自己做这个。

# mongodb - MongoDb 聚合：按 x 选择所有组

> ID：10674484
> 
> 赞同：5
> 
> 时间：2012-05-20T14:55:50.343
> 
> 标签：mongodb, aggregation-framework

我正在尝试使用新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)将以下类似 SQL 的语句转换为 mongo-query 。

```
SELECT * FROM ...
GROUP BY class 
```

到目前为止，我已经设法编写了以下内容，效果很好 - 但只选择/返回了一个字段。

```
db.studentMarks.aggregate(
   {
     $project: {
        class : 1 // Inclusion mode
     }
   },
   {
     $group: {
        _id: "$class"
     }
   }
); 
```

我还尝试使用 $project pipelines exclude [mode](http://docs.mongodb.org/manual/reference/aggregation/#_S_project)，通过添加一个从不存在的字段名称，以欺骗 MongoDb 返回所有字段。虽然语法正确，但不返回任何结果。例如：

```
db.studentMarks.aggregate(
   {
     $project: {
        noneExistingField : 0 // Exclusion mode...
                              // Attempt to trick mongo into returning all fields
                              // sadly this fails - empty array is returned.
     }
   },
   {
     $group: {
        _id: "$class"
     }
   }
); 
```

我需要返回所有字段的原因是我不知道（将来）哪些字段将存在或不存在。例如，“学生”可能有字段 x、y、z 或没有。因此，出于一般目的，我需要“全选”，将结果按单个字段分组并返回 - 不必用于“学生标记”，可以用于任何类型的数据集，而不知道所有字段。

由于上述原因，我不能简单地预测所有必须返回的字段 - 再一次 - 因为我不会知道所有字段。

我希望有人知道使用新的聚合框架解决我的问题的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:07:26.773

根本不要在管道中使用项目运算符。

```
db.studentMarks.aggregate({
  $group: { _id: "$class" }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T17:14:42.610

您可以尝试按所有字段分组，将每个字段推送到数组。

下面试试。

## 选项1

```
    `db.StudentMarks.aggregate(
{
     $项目：{
        class : 1 // 包含模式
     }
   },
{ $组：{
        _id : "$class"
        ,field2: {$push: "$field2"}
        ,field3: {$push: "$field3"}
        ,field4: {$push: "$field4"}
}}, $sort{field2:-1})`
```

我没有在上面尝试过，但下面对我有用。

## 选项2

```
    `db.StudentMarks.aggregate(
{
    { $组：{
        _id : "$class"
        ,field2: {$push: "$field2"}
        ,field3: {$push: "$field3"}
        ,field4: {$push: "$field4"}
}}, $sort{field2:-1})`
```

结果

```
    `{
        “结果” ： [
                {
                        “_id”：59，
                        “字段2”：[
                                59,
                                59,
                                59
                        ],
                        “字段3”：[
                                ObjectId("51e7072086eretetterr0001"),
                                ObjectId("51e7076786cb343453535354"),
                                ObjectId("51e716598435353534345335")
                        ],
                        “字段4”：[
                                11111,
                                11111,
                                11111
                        ]
                },
                {
                        “_id”：58，
                        “字段2”：[
                                58,
                                58,
                                58,
                                58,
                                58
                        ],
                        “字段3”：[
                                ObjectId("51e469ad3843534535353535"),
                                ObjectId("51e7178f86cb349845667775"),
                                ObjectId("51e71df286cb349842456gtg"),
                                ObjectId("51e71ea686cb345646466466"),
                                ObjectId("51e71eac86cb346546464646")
                        ],
                        “字段4”：[
                                11111,
                                11111,
                                11111,
                                11111,
                                11111
                        ]
                }
        ],
        “好”：1
}`
```

# php - 对于 SQL 行计数，使用 PDO rowCount 或 count(*) AS 效率更高吗？

> ID：10674490
> 
> 赞同：3
> 
> 时间：2012-05-20T14:56:12.223
> 
> 标签：php, mysql

在我的脚本中，我有大约 15 个 SQL 查询，仅用于计算行数并将它们显示给用户。

最有效的方法是什么？

我应该使用：

```
$stmt=$cxn->prepare("SELECT id FROM items WHERE seller=?");
$stmt->execute(array($username));
echo $stmt->rowCount(); 
```

或这个：

```
$stmt=$cxn->prepare("SELECT count(*) as count FROM items WHERE seller=?");
$stmt->execute(array($username));   
while($row=$stmt->fetch(PDO::FETCH_ASSOC))
    echo $row['count']; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:00:03.477

简短的回答是 Count(*) 会更快。

但是，假设您不使用数据，如果您要选择数据并且想要计数，则使用第一种方法。

```
("SELECT id FROM items WHERE seller=?"); 
```

如果您在表上有一个索引，那么它几乎会立即返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:01:16.673

rowCount 命令不仅可以用于 SELECT 查询，还可以用于 UPDATE、INSERT 等。所以这是一个好处。

但是根据 PDO 文档：

> 不能保证适用于所有数据库，并且不应依赖于可移植应用程序。

因此，在您的情况下，我建议使用 count 而不必担心性能，尽管它会稍微快一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:59:48.513

使用 MySQL 行数会更快。PHP 和数据库之间需要更少的带宽。

# c++ - C++ new、delete、new[] 和 delete[]

> ID：10674495
> 
> 赞同：2
> 
> 时间：2012-05-20T14:57:00.797
> 
> 标签：c++, visual-c++

我目前正在开发自己的内存泄漏跟踪系统。

我正在使用 Microsoft Visual C++ 2008，我知道他们有一个内置的，但我一直在为自己制作一个，只是为了好玩。

但是，当我覆盖 new 和 new[] 命令时，无论我做什么，都会出现函数重新定义错误。

我对 Microsoft Visual C++ 的内部绑定了解不多，但我听说 CRT 已经定义了与我完全相同的宏。

我在这里和其他地方看到过针对这个相同问题的文章，但是人们似乎永远无法解决问题，或者永远不会就他们如何解决问题给出明确的答案。

这是我到目前为止的所有代码：

MLD.h：[http ://pastebin.com/SfHzNaeN MLD.cpp：](http://pastebin.com/SfHzNaeN) [http](http://pastebin.com/aRhsTZpv) : //pastebin.com/aRhsTZpv

所有代码都大致基于旧的翻转代码文章（如何检测内存泄漏）。抱歉，我不能给你一个直接链接，因为我没有 10 个代表来发布超过 2 个超链接。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:22:01.530

“函数重新定义错误”可能是因为您使用的是 MFC。

运行时库不应负责定义此类分配和解除分配功能。

当前代码的

```
struct MemLeakInfo
{
        unsigned int addr;
        unsigned int line;
        unsigned int size;
        unsigned char file;
}; 
```

不好。`unsigned int`即使在 32 位 Windows 中，也不能保证An足够大以容纳地址。相反，使用[**`intptr_t`**](https://stackoverflow.com/questions/1464174/size-t-vs-intptr-t).

此外，当前代码的

```
void* operator new(unsigned int Size, int Line, const char* File); 
```

不好。那应该是……

```
void* operator new( size_t Size, int Line, const char* File ); 
```

你需要一个对应的`operator delete`，比如……

```
void* operator delete( void* p, int Line, const char* File ); 
```

为了从失败的构造函数调用中释放内存。它只在那种非常特殊的情况下被调用。但是如果你没有它，那么你就有了泄漏，就像 MFC 曾经用于调试构建一样。

* * *

**编辑**：您现在提供的代码的固定版本：

文件 [minimal.h]：

*   `_MINIMAL_H`无效，因为它以下划线开头，后跟大写字母，这是保留的。改为`MINIMAL_H`。
*   要使用`size_t`，您需要包含`<stddef.h>`.
*   `_DEBUG`不是标准宏。这是一个微软主义。`assert`用于此目的的标准宏（查找 的文档）是`NDEBUG`.

```
#ifndef MINIMAL_H
#define MINIMAL_H

#include <stddef.h>     // std::size_t

#ifndef NDEBUG

void* operator new( size_t Size, int Line, const char* File );
void* operator new[]( size_t Size, int Line, const char* File );

void operator delete( void* ptr, int Line, const char* File );
void operator delete[]( void* ptr, int Line, const char* File ); 

#endif 

#ifndef NDEBUG

#define DEBUG_NEW new( __LINE__, __FILE__ )

#else

#define DEBUG_NEW new

#endif 

#endif //MINIMAL_H 
```

文件 [minimal.cpp]：

*   要使用`malloc`，您需要包含`stdlib.h`.
*   当您对以下代码中`#define new`的关键字造成严重破坏时。`new`
*   在 C 中，您永远不应该转换 的结果`malloc`，而在 C++ 中，您应该只在需要时转换某些东西。这里没有这种需要。只投射掩码错误，这不是一个好主意。
*   在错误情况下缺少返回。对于错误，您需要`throw std::bad_alloc`. 这是由神圣标准对这些功能的规范。

```
#include "Minimal.h"

//#define new DEBUG_NEW

#ifndef NDEBUG
#include <stdlib.h>     // malloc
#include <exception>    // std::bad_alloc

void* operator new( size_t const size, int, const char*)
{
    void* const ptr = malloc( size );

    if( !ptr ) { throw std::bad_alloc(); }
    return ptr;
};

void* operator new[]( size_t const size, int, const char*)
{
    void* const ptr = malloc( size );

    if( !ptr ) { throw std::bad_alloc(); }
    return ptr;
}

void operator delete(void* const ptr, int, const char*)
{
    free( ptr ); 
};

void operator delete[]( void* const ptr, int, const char* )
{
    free( ptr ); 
}; 

#endif 
```

# c - scatterv 后的分段错误

> ID：10674500
> 
> 赞同：2
> 
> 时间：2012-05-20T14:57:20.560
> 
> 标签：c, segmentation-fault, mpi, matrix-multiplication, scatter

```
 /**
     * BLOCK_LOW
     * Returns the offset of a local array
     * with regards to block decomposition
     * of a global array.
     *
     * @param  (int) process rank
     * @param  (int) total number of processes
     * @param  (int) size of global array
     * @return (int) offset of local array in global array
     */
    #define BLOCK_LOW(id, p, n) ((id)*(n)/(p))

    /**
     * BLOCK_HIGH
     * Returns the index immediately after the
     * end of a local array with regards to
     * block decomposition of a global array.
     *
     * @param  (int) process rank
     * @param  (int) total number of processes
     * @param  (int) size of global array
     * @return (int) offset after end of local array
     */
    #define BLOCK_HIGH(id, p, n) (BLOCK_LOW((id)+1, (p), (n)))

    /**
     * BLOCK_SIZE
     * Returns the size of a local array
     * with regards to block decomposition
     * of a global array.
     *
     * @param  (int) process rank
     * @param  (int) total number of processes
     * @param  (int) size of global array
     * @return (int) size of local array
     */
    #define BLOCK_SIZE(id, p, n) ((BLOCK_HIGH((id), (p), (n))) - (BLOCK_LOW((id), (p), (n))))

    /**
     * BLOCK_OWNER
     * Returns the rank of the process that
     * handles a certain local array with
     * regards to block decomposition of a
     * global array.
     *
     * @param  (int) index in global array
     * @param  (int) total number of processes
     * @param  (int) size of global array
     * @return (int) rank of process that handles index
     */
    #define BLOCK_OWNER(i, p, n) (((p)*((i)+1)-1)/(n))

    /*Matricefilenames:
      small matrix A.bin of dimension 100 × 50
      small matrix B.bin of dimension 50 × 100
      large matrix A.bin of dimension 1000 × 500
      large matrix B.bin of dimension 500 × 1000

    An MPI program should be implemented such that it can
    • accept two file names at run-time,
    • let process 0 read the A and B matrices from the two data files,
    • let process 0 distribute the pieces of A and B to all the other processes,
    • involve all the processes to carry out the the chosen parallel algorithm
    for matrix multiplication C = A * B ,
    • let process 0 gather, from all the other processes, the different pieces
    of C ,
    • let process 0 write out the entire C matrix to a data file.
    */

    #include <stdio.h>
    #include <stdlib.h>
    #include <mpi.h>
    #include "mpi-utils.c"
    void read_matrix_binaryformat (char*, double***, int*, int*);
    void write_matrix_binaryformat (char*, double**, int, int);
    void create_matrix (double***,int,int);
    void matrix_multiplication (double ***, double ***, double ***,int,int, int);

    int main(int argc, char *argv[]) {
        int id,p; // Process rank and total amount of processes
        int rowsA, colsA, rowsB, colsB; // Matrix dimensions
        double **A; // Matrix A
        double **B; // Matrix B
        double **C; // Result matrix C : AB
        int local_rows; // Local row dimension of the matrix A
        double **local_A; // The local A matrix
        double **local_C;  // The local C matrix

        MPI_Init (&argc, &argv);
        MPI_Comm_rank (MPI_COMM_WORLD, &id);
        MPI_Comm_size (MPI_COMM_WORLD, &p);

        if(argc != 3) {
            if(id == 0) {
                printf("Usage:\n>> %s matrix_A matrix_B\n",argv[0]);
            }       
            MPI_Finalize();
            exit(1);
        }

        if (id == 0) {
            read_matrix_binaryformat (argv[1], &A, &rowsA, &colsA);
            read_matrix_binaryformat (argv[2], &B, &rowsB, &colsB);
        }

        if (p == 1) {
            create_matrix(&C,rowsA,colsB);
            matrix_multiplication (&A,&B,&C,rowsA,colsB,colsA);

            char* filename = "matrix_C.bin";
            write_matrix_binaryformat (filename, C, rowsA, colsB);
            free(A);
            free(B);
            free(C);
            MPI_Finalize();
            return 0;
        }

        // For this assignment we have chosen to bcast the whole matrix B:
        MPI_Bcast (&B, 1, MPI_DOUBLE, 0, MPI_COMM_WORLD); 
        MPI_Bcast (&colsA, 1, MPI_INT, 0, MPI_COMM_WORLD);
        MPI_Bcast (&colsB, 1, MPI_INT, 0, MPI_COMM_WORLD);
        MPI_Bcast (&rowsA, 1, MPI_INT, 0, MPI_COMM_WORLD);
        MPI_Bcast (&rowsB, 1, MPI_INT, 0, MPI_COMM_WORLD);

        local_rows = BLOCK_SIZE(id, p, rowsA);

        /*    SCATTER VALUES    */

        int *proc_elements = (int*)malloc(p*sizeof(int)); // amount of elements for each processor
        int *displace = (int*)malloc(p*sizeof(int)); // displacement of elements for each processor
        int i;
        for (i = 0; i<p; i++) {
            proc_elements[i] = BLOCK_SIZE(i, p, rowsA)*colsA;
            displace[i] = BLOCK_LOW(i, p, rowsA)*colsA;
        }

        create_matrix(&local_A,local_rows,colsA);

        MPI_Scatterv(&A[0],&proc_elements[0],&displace[0],MPI_DOUBLE,&local_A[0],
                     local_rows*colsA,MPI_DOUBLE,0,MPI_COMM_WORLD);

        /*    END  SCATTER  VALUES  */  

        create_matrix (&local_C,local_rows,colsB);
        matrix_multiplication (&local_A,&B,&local_C,local_rows,colsB,colsA);

        /*    GATHER VALUES    */

        MPI_Gatherv(&local_C[0], rowsA*colsB, MPI_DOUBLE,&C[0],
              &proc_elements[0],&displace[0],MPI_DOUBLE,0, MPI_COMM_WORLD);

        /*    END  GATHER VALUES  */

        char* filename = "matrix_C.bin";
        write_matrix_binaryformat (filename, C, rowsA, colsB);  

        free (proc_elements);
        free (displace);    
        free (local_A);
        free (local_C);
        free (A);
        free (B);
        free (C);   
        MPI_Finalize ();
        return 0;
    }

    void create_matrix (double ***C,int rows,int cols) {
        *C = (double**)malloc(rows*sizeof(double*));
        (*C)[0] = (double*)malloc(rows*cols*sizeof(double));
        int i;
        for (i=1; i<rows; i++)
            (*C)[i] = (*C)[i-1] + cols;
    }

    void matrix_multiplication (double ***A, double ***B, double ***C, int rowsC,int colsC,int colsA) {
        double sum;
        int i,j,k;
        for (i = 0; i < rowsC; i++) {
            for (j = 0; j < colsC; j++) {
                sum = 0.0;
                for (k = 0; k < colsA; k++) {
                    sum = sum + (*A)[i][k]*(*B)[k][j];
                }
                (*C)[i][j] = sum;
            }
        }
    }

    /* Reads a 2D array from a binary file*/ 
    void read_matrix_binaryformat (char* filename, double*** matrix, int* num_rows, int* num_cols) {
        int i;
        FILE* fp = fopen (filename,"rb");
        fread (num_rows, sizeof(int), 1, fp);
        fread (num_cols, sizeof(int), 1, fp);
        /* storage allocation of the matrix */
        *matrix = (double**)malloc((*num_rows)*sizeof(double*));
        (*matrix)[0] = (double*)malloc((*num_rows)*(*num_cols)*sizeof(double));
        for (i=1; i<(*num_rows); i++)
            (*matrix)[i] = (*matrix)[i-1]+(*num_cols);
        /* read in the entire matrix */
        fread ((*matrix)[0], sizeof(double), (*num_rows)*(*num_cols), fp);
        fclose (fp);
    }

    /* Writes a 2D array in a binary file */
    void write_matrix_binaryformat (char* filename, double** matrix, int num_rows, int num_cols) {
      FILE *fp = fopen (filename,"wb");
      fwrite (&num_rows, sizeof(int), 1, fp);
      fwrite (&num_cols, sizeof(int), 1, fp);
      fwrite (matrix[0], sizeof(double), num_rows*num_cols, fp);
      fclose (fp);
    } 
```

我的任务是对矩阵 A 和 B 进行并行矩阵乘法，并将结果收集到矩阵 C 中。

我通过将矩阵 A 划分为行段来做到这一点，每个进程将使用它的部分来乘以矩阵 B，并从乘法中取回它的部分。然后我将收集过程中的所有部分并将它们放在一起到矩阵 C 中。

我已经发布了一个类似的问题，但是这段代码得到了改进，我已经取得了进步，但是在 scatterv 调用之后我仍然遇到分段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:51:59.187

所以我马上看到了一些问题：

```
 MPI_Bcast (&B, 1, MPI_DOUBLE, 0, MPI_COMM_WORLD); 
```

在这里，您传递的不是指向双精度的指针，而是指向指向双精度的指针的指针（B 定义为`double **B`），并且您告诉 MPI 跟随该指针并从那里发送 1 个双精度。那是行不通的。

你可能认为你在这里完成的是发送指向矩阵的指针，所有任务都可以从中读取数组——这是行不通的。这些进程不共享公共内存空间（这就是 MPI 被称为分布式内存编程的原因），并且指针不会去任何地方。你实际上将不得不发送矩阵的内容，

```
 MPI_Bcast (&(B[0][0]), rowsB*colsB, MPI_DOUBLE, 0, MPI_COMM_WORLD); 
```

并且您将必须确保其他进程提前为 B 矩阵正确分配了内存。

其他地方也有类似的指针问题：

```
 MPI_Scatterv(&A[0], ..., &local_A[0] 
```

同样， A 是指向 doubles ( `double **A`)的指针的指针`local_A`，并且您需要将 MPI 指向指向 doubles 的指针才能使其工作，例如

```
 MPI_Scatterv(&(A[0][0]), ..., &(local_A[0][0]) 
```

该错误似乎存在于所有通信例程中。

请记住，任何看起来像`(buffer, count, TYPE)`MPI 的东西都意味着 MPI 例程跟随指针`buffer`并在那里发送下一个`count`类型的数据`TYPE`。MPI 无法跟踪您发送的缓冲区中的指针，因为通常它不知道它们在那里。它只`(count * sizeof(TYPE))`从指针中获取下一个字节，`buffer`并与它们进行适当的通信。所以你必须向它传递一个指向 TYPE 类型数据流的指针。

说了这么多，如果你把事情缩小一点，和你一起工作会容易得多；现在您发布的程序包含许多无关紧要的 I/O 内容，这意味着没有人可以在不先弄清楚矩阵格式然后自己生成两个矩阵的情况下运行您的程序来查看会发生什么。在发布有关源代码的问题时，您真的想发布（a）一小部分源代码，它（b）重现问题并且（c）完全独立。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:24:35.210

考虑这是一个扩展评论，因为 Jonathan Dursi 已经给出了相当详尽的答案。您的矩阵确实以一种奇怪的方式表示，但至少您遵循了针对其他问题的建议，并将它们作为连续块分配空间，而不是为每一行单独分配空间。

鉴于此，您应该替换：

```
MPI_Scatterv(&A[0],&proc_elements[0],&displace[0],MPI_DOUBLE,&local_A[0],
             local_rows*colsA,MPI_DOUBLE,0,MPI_COMM_WORLD); 
```

和

```
MPI_Scatterv(A[0],&proc_elements[0],&displace[0],MPI_DOUBLE,local_A[0],
             local_rows*colsA,MPI_DOUBLE,0,MPI_COMM_WORLD); 
```

`A[0]`已经指向矩阵数据的开头，不需要指向它。这同样适用`local_A[0]`于调用的参数`MPI_Gatherv()`。

已经说过很多次了**——MPI 不进行指针追踪**，只适用于平面缓冲区。

我还注意到您的代码中的另一个错误 - 未正确释放矩阵的内存。您只是释放指针数组而不是矩阵数据本身：

```
free(A); 
```

真的应该变成

```
free(A[0]); free(A); 
```

# hadoop - Hadoop操作化

> ID：10674502
> 
> 赞同：0
> 
> 时间：2012-05-20T14:57:24.710
> 
> 标签：hadoop, hdfs

我已经准备好 hadoop 实现的所有部分——我有一个正在运行的集群，以及一个将活动数据推送到 HDFS 的客户端编写器。我有一个关于接下来会发生什么的问题。我了解我们针对已转储到 HDFS 中的数据运行作业，但我的问题是：

1）首先，我正在写入流并定期刷新 - 我正在通过 HDFS java 客户端中的线程写入文件，并且在我终止服务器之前我看不到文件出现在 HDFS 中。如果我写入足够的数据来填充一个块，它会自动出现在文件系统中吗？我如何才能拥有准备好由 M/R 作业处理的文件？

2) 我们什么时候运行 M/R 作业？就像我说的，我正在通过 HDFS java 客户端中的一个线程写入文件，并且该线程对文件进行了锁定以进行写入。我应该在什么时候发布该文件？这种互动如何运作？在什么时候针对该数据运行作业是“安全的”，以及在 HDFS 中的数据完成后会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:59:29.890

1.  写入数据以填充块，您将在系统中看到文件

2.  M/R 被提交给调度器，调度器负责根据数据运行它，我们不必担心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:58:16.917

我会尽量避免数据插入hadoop和处理结果之间的“硬”同步。我的意思是，在许多情况下，必须使用异步进程是最实际的：
a) 一个进程将文件放入 HDFS。在许多情况下 - 按日期构建目录结构很有用。
b) 为除最新数据之外的所有数据运行作业。
您可以在最近的数据上运行作业，但应用程序不应转发最新的结果。在任何情况下，工作通常需要超过几分钟的时间

另一点 - append 不是 100% 的主流，而是为 HBase 构建的高级东西。如果您在不使用它的情况下构建您的应用程序 - 您将能够使用其他不支持附加的 DFS，如亚马逊 s3。我们在本地文件系统中收集数据，然后在文件足够大时将它们复制到 HDFS。

# java - 保存在外部缓存中的文件在卸载时不会删除

> ID：10674503
> 
> 赞同：3
> 
> 时间：2012-05-20T14:57:30.167
> 
> 标签：java, android

[据说](http://developer.android.com/guide/topics/data/data-storage.html#ExternalCache)卸载时保存的文件`getExternalCacheDir()` 将被删除。

我已将下载的文件放在那里。3 台设备一切正常。但是对于一台搭载 Android 4.0 的三星 Galaxy S2，这些文件不会被删除。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T13:15:01.783

查看[getExternalCacheDir()](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir%28%29)文档：

> 该平台并不总是监控外部存储中的可用空间，因此可能不会自动删除这些文件。目前，平台删除此处文件的唯一时间是在运行时`JELLY_BEAN_MR1`或更高版本并`Environment.isExternalStorageEmulated()`返回 true。请注意，您应该管理将用于这些的最大空间，就像使用`getCacheDir()`.

看起来设备必须是 Android 4.2 及更高版本才能进行外部存储缓存。您可以让您的应用程序自行清理。请参阅[此处](https://stackoverflow.com/questions/8686673/how-to-know-my-app-is-uninstalled-from-the-device)以检测您的应用何时将被卸载。

# html - MVC3 - 模型到 HTML 表

> ID：10674508
> 
> 赞同：0
> 
> 时间：2012-05-20T14:58:13.090
> 
> 标签：html, asp.net-mvc-3, html-table

我有一个 OfferingCategoriesViewModel，其中包含 OfferingCategoryModel 的列表。

如何在我的视图中显示每个 OfferingCategoryModel 如下所示

![http://imgur.com/8fsEg](../Images/ee7bc96f8bbd7018003ee2b41d61a80a.png)

注意：理想情况下，我希望每行显示的模型数包含在 OfferingCategoriesViewModel 中。

我目前有这个：

```
<table>
    @foreach (var item in Model)
    {
        <tr>
            @foreach (Spice.TimeBank.Models.Category.OfferingCategoryModel category in Model.ListOfCategories)
            {
                <td>@category.Descripton</td>
            }
            -->
            @for (int i = item.Count(); i < 5; i++)
            {
                <td></td>
            }
        </tr>
    }
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:53:44.467

我知道您正在描述该布局中表格的使用，但我实际上建议`<div>`使用 css 的布局来获取块`float: left;`，以根据用户屏幕分辨率和窗口大小获得自排列布局。

这样您就不必担心要显示多少列，并且 html 和样式变得更清晰。

事实上，如果你以这种方式设计它，你可以只创建一个 MVC[`DisplayTemplate`](http://jacob.steelsmith.org/content/display-templates-partial-views-mvc-3-using-razor) 来呈现该模型的每个 div，并让 MVC 担心迭代你的项目。

编辑： [在这里](http://css.maxdesign.com.au/floatutorial/tutorial0405.htm)您可以找到有关如何使用的更多信息`float`：第 4 个教程可能特别有趣，因为它显示了一个与您的几乎相同的布局示例。

此外[，这里](http://www.guistuff.com/css/css_float.html)还有另一个非常好的使用浮动元素的良好信息来源，还有视觉示例。

# php - 如果变量还没有小数，如何将小数 (.00) 添加到变量中？

> ID：10674511
> 
> 赞同：0
> 
> 时间：2012-05-20T14:58:36.617
> 
> 标签：php

我有以下脚本，它根据用户设置的内容输出运费编号。用户应始终将数字设置为“0.00”或“5.00”或“10.00”，但我有一些用户无法阅读，因此他们将其设置为“5”或“10”，不带小数点。在输出中，我有它：

```
$output_box = $total['shipping']; 
```

如何更改它以便自动检测是否没有小数，并自动添加“.00”？

例如，如果金额为“4”，则应将其更改为“4.00”，但当金额为“4.10”或“5.00”时，不应执行任何操作。

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T15:00:27.497

使用[`number_format()`](http://php.net/number_format)：

```
$output_box = number_format($total['shipping'], 2);

php> echo number_format(13, 2)
13.00
php> echo number_format(13.37, 2)
13.37
php> echo number_format(1, 2)
1.00
php> echo number_format(4.10, 2)
4.10
php> echo number_format(4.2, 2)
4.20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T15:03:11.130

```
$output_box = sprintf("%01.2f", $total['shipping']); 
```

对此进行测试：

```
echo sprintf("%01.2f", 15);
echo sprintf("%01.2f", 10.156465);
echo sprintf("%01.2f", 0); 
```

输出：

```
15.00
10.16
0.00 
```

# mysql - mysqldumpslow 将输出写入文件

> ID：10674514
> 
> 赞同：1
> 
> 时间：2012-05-20T14:58:59.307
> 
> 标签：mysql, file, mysqldumpslow

有没有办法将 mysqldumpslow 命令输出写入文件？

我试过`/usr/bin/mysqldumpslow log_file /var/log/mysql/log-slow-queries.log > /var/log/mysqldumpslow.log`了，但我得到一个错误，说 mysqldumpslow 找不到 log_file。

请原谅我缺乏 Linux 命令行知识！

# php - 在 PHP 定义的函数中验证 OR 条件

> ID：10674517
> 
> 赞同：0
> 
> 时间：2012-05-20T14:59:28.750
> 
> 标签：php, conditional-operator

以下代码不起作用，有人可以提出替代方案，

```
if ((!defined('admin')) || !defined('moderator')) {
die('Access Denied !');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:02:40.103

```
if (!defined('admin') && !defined('moderator')) {
    die('Access Denied !');
} 
```

1.  您添加了太多 ()
2.  它可能应该是 AND 运算符，因为您想测试用户是否既不是管理员也不是版主。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T15:02:53.553

```
if (!defined('admin')) && !defined('moderator') {
  die('Access Denied !');
} 
```

# facebook-fql - 查询“喜欢”页面的过去事件未返回完整列表（如实际页面所示）

> ID：10674521
> 
> 赞同：0
> 
> 时间：2012-05-20T14:59:35.140
> 
> 标签：facebook-fql, fql.multiquery

用于查询的代码（如下）在它正常工作之前没有改变，但是[页面](http://utsarotaract.org/events.php?tab=past)突然开始只显示*许多*过去事件中的一个。QL 的功能是否以某种方式发生了变化，或者这只是一个我应该等待看看它是否通过的错误？

```
SELECT name, pic, start_time, end_time, location, description, eid 
FROM event 
WHERE end_time < now() 
AND eid IN ( 
    SELECT eid 
    FROM event_member 
    WHERE uid = XXXXXXXXX ) 
ORDER BY start_time DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:42:38.533

我不完全确定，但 FQL 关于 event_member 的文档可能是关键。您是否尝试过仅在`SELECT eid FROM event_member WHERE uid = XXXXXXXXX`没有包装器的情况下单独运行内部查询 ( ) 以查看它返回的内容？

[event_member 的 FQL 文档](https://developers.facebook.com/docs/reference/fql/event_member/)指出

> 如果您不指定 start_time，则只会返回未来的事件。

**编辑**：我认为这意味着您目前可能需要在`start_time < now()`其中指定或类似的东西。

（不过，如果是这种情况，我不确定您为什么要退回一件物品，因为这会与您的`end_time < now()`陈述冲突）。

我的第一个建议可能是使用 FQL 多查询将其拆分为多个查询，并确保 event_member 查询返回您所期望的。就像是：

```
"event_members":"SELECT eid 
FROM event_member 
WHERE uid = XXXXXXXXX"

"events":"SELECT name, pic, start_time, end_time, location, description, eid 
FROM event 
WHERE end_time < now() 
AND eid IN (SELECT eid FROM #event_members) 
ORDER BY start_time DESC" 
```

查看 event_members 包含您希望的所有条目 - 如果是，请在“events”查询中找到问题，如果没有，请在“event_members”查询中找到问题。

# sql - 具体复杂的 SQL 查询和 Django ORM？

> ID：10674523
> 
> 赞同：7
> 
> 时间：2012-05-20T14:59:43.410
> 
> 标签：sql, django, orm

我有一组表，其中包含用户创建和投票的内容。

表**内容_a**

```
id         /* the id of the content */
user_id    /* the user that contributed the content */
content    /* the content */ 
```

表**内容_b**

```
id
user_id
content 
```

表**内容_c**

```
id
user_id
content 
```

表**投票**

```
user_id         /* the user that made the vote */
content_id      /* the content the vote was made on */
content_type_id /* the content type the vote was made on */
vote            /* the value of the vote, either +1 or -1 */ 
```

我希望能够选择一组用户，并根据他们制作的内容的投票总和对他们进行排序。例如，

```
SELECT * FROM users ORDER BY <sum of votes on all content associated with user> 
```

有没有一种特定的方法可以使用 Django 的 ORM 来实现，还是我必须使用原始 SQL 查询？在原始 SQL 中实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T15:14:04.610

*更新*

假设模型是

```
from django.contrib.contenttypes import generic
from django.contrib.contenttypes.models import ContentType

class ContentA(models.Model):
    user = models.ForeignKey(User)
    content = models.TextField()

class ContentB(models.Model):
    user = models.ForeignKey(User)
    content = models.TextField()

class ContentC(models.Model):
    user = models.ForeignKey(User)
    content = models.TextField()

class GenericVote(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey()
    user = models.ForeignKey(User)
    vote = models.IntegerField(default=1) 
```

**选项 A. 使用`GenericVote`**

```
GenericVote.objects.extra(select={'uid':"""
CASE
WHEN content_type_id = {ct_a} THEN (SELECT user_id FROM {ContentA._meta.db_table} WHERE id = object_id)
WHEN content_type_id = {ct_b} THEN (SELECT user_id FROM {ContentB._meta.db_table} WHERE id = object_id)
WHEN content_type_id = {ct_c} THEN (SELECT user_id FROM {ContentC._meta.db_table} WHERE id = object_id)
END""".format(
ct_a=ContentType.objects.get_for_model(ContentA).pk,
ct_b=ContentType.objects.get_for_model(ContentB).pk,
ct_c=ContentType.objects.get_for_model(ContentC).pk,
ContentA=ContentA,
ContentB=ContentB,
ContentC=ContentC
)}).values('uid').annotate(vc=models.Sum('vote')).order_by('-vc') 
```

上面的`ValuesQuerySet`,（或 use `values_list()`）为您提供了 s 的 ID 序列`User()`，按票数降序排列。然后，您可以使用它来获取顶级用户。

**选项 B. 使用`User.objects.raw`**

当我使用时`User.objects.raw`，我得到了几乎相同的查询 w/ [forsvarir 给出的答案](https://stackoverflow.com/a/10794949/165603)：

```
User.objects.raw("""
SELECT "{user_tbl}".*, SUM("gv"."vc") as vote_count from {user_tbl},
    (SELECT id, user_id, {ct_a} AS ct FROM {ContentA._meta.db_table} UNION
     SELECT id, user_id, {ct_b} AS ct FROM {ContentB._meta.db_table} UNION
     SELECT id, user_id, {ct_c} as ct FROM {ContentC._meta.db_table}
    ) as c,
   (SELECT content_type_id, object_id, SUM("vote") as vc FROM {GenericVote._meta.db_table} GROUP BY content_type_id, object_id) as gv
WHERE {user_tbl}.id = c.user_id
    AND gv.content_type_id = c.ct
    AND gv.object_id = c.id
GROUP BY {user_tbl}.id
ORDER BY "vc" DESC""".format(
    user_tbl=User._meta.db_table, ContentA=ContentA, ContentB=ContentB,
    ContentC=ContentC, GenericVote=GenericVote, 
    ct_a=ContentType.objects.get_for_model(ContentA).pk,
    ct_b=ContentType.objects.get_for_model(ContentB).pk,
    ct_c=ContentType.objects.get_for_model(ContentC).pk
)) 
```

**选项 C. 其他可能的方式**

*   [根据 Michael Dunn 的建议](https://stackoverflow.com/a/10795583/165603)`vote_count`，对模型进行反规范化`User`或剖析模型，例如`UserProfile`或其他相关模型。如果您经常即时访问，这会表现得更好。`vote_count`
*   构建一个`UNION`为您执行 s 的数据库视图，然后将模型映射到它，这可以使查询的构建更容易。
*   在 Python 中进行排序，通常是处理大规模数据的最佳方式，因为有数十种工具包和扩展方式。

* * *

在使用 Django ORM 进行查询之前，您需要一些 Django 模型来映射这些表。假设它们是匹配和表的模型`User`，那么您可以`Voting``users``voting`

```
User.objects.annotate(v=models.Sum('voting__vote')).order_by('v') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T07:41:13.843

对于原始 SQL 解决方案，我在[这里在 ideone上创建了您的问题的粗略复制](http://ideone.com/Q0XTA)

数据设置：

```
create table content_a(id int, user_id int, content varchar(20));
create table content_b(id int, user_id int, content varchar(20));
create table content_c(id int, user_id int, content varchar(20));
create table voting(user_id int, content_id int, content_type_id int, vote int);
create table users(id int, name varchar(20));
insert into content_a values(1,1,'aaaa');
insert into content_a values(2,1,'bbbb');
insert into content_a values(3,1,'cccc');
insert into content_b values(1,2,'dddd');
insert into content_b values(2,2,'eeee');
insert into content_b values(3,2,'ffff');
insert into content_c values(1,1,'gggg');
insert into content_c values(2,2,'hhhh');
insert into content_c values(3,3,'iiii');
insert into users values(1, 'first');
insert into users values(2, 'second');
insert into users values(3, 'third');
insert into users values(4, 'voteonly');

-- user 1 net votes (2)
insert into voting values (1, 1, 1, 1);
insert into voting values (2, 3, 1, -1);
insert into voting values (3, 1, 1, 1); 
insert into voting values (4, 2, 1, 1); 

-- user 2 net votes (3)
insert into voting values (1, 2, 2, 1);
insert into voting values (1, 1, 2, 1);
insert into voting values (2, 3, 2, -1);
insert into voting values (4, 2, 2, 1);
insert into voting values (4, 2, 3, 1);

-- user 3 net votes (-1)
insert into voting values (2, 3, 3, -1); 
```

我基本上假设 content_a 的类型为 1，content_b 的类型为 2，content_c 的类型为 3。使用原始 SQL，似乎有两种明显的方法。首先是将所有内容联合在一起，然后将其与用户和投票表连接起来。我在下面测试了这种方法。

```
select users.*, sum(voting.vote)
from users, 
    voting, (
        SELECT     id, 1 AS content_type_id, user_id
        FROM         content_a
        UNION
        SELECT     id, 2 AS content_type_id, user_id
        FROM         content_b
        UNION
        SELECT     id, 3 AS content_type_id, user_id
        FROM         content_c) contents
where contents.user_id = users.id
and voting.content_id = contents.id
and voting.content_type_id = contents.content_type_id
group by users.id
order by sum(voting.vote) desc; 
```

另一种方法似乎是将内容表外部连接到投票表，而不需要联合步骤。这可能性能更高，但我无法测试它，因为 Visual Studio 一直在为我重写我的 sql ......我希望 SQL 看起来像这样（但我还没有测试过）：

```
select users.*, sum(voting.vote)
from users, voting, content_a, content_b, content_c
where users.id = content_a.user_id (+)
and users.id = content_b.user_id (+)
and users.id = content_c.user_id (+)
and ((content_a.id = voting.content_id and voting.content_type_id = 1) OR
     (content_b.id = voting.content_id and voting.content_type_id = 2) OR
     (content_c.id = voting.content_id and voting.content_type_id = 3))
group by users.id
order by sum(voting.vote) desc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:28:21.727

我会使用预先计算的值来做到这一点。首先制作一个单独的表来存储每个用户收到的投票：

```
class VotesReceived(models.Model):
    user = models.OneToOneField(User, primary_key=True)
    count = models.IntegerField(default=0, editable=False) 
```

然后在每次投票时使用 post_save[信号更新计数：](https://docs.djangoproject.com/en/dev/topics/signals/ "信号")

```
def update_votes_received(sender, instance, **kwargs):
    # `instance` is a Voting object
    # assuming here that `instance.content.user` is the creator of the content
    vr, _ = VotesReceived.objects.get_or_create(user=instance.content.user)
    # you should recount the votes here rather than just incrementing the count
    vr.count += 1 
    vr.save()

models.signals.post_save.connect(update_votes_received, sender=Voting) 
```

用法：

```
user = User.objects.get(id=1)
print user.votesreceived.count 
```

如果您的数据库中已经有数据，您当然必须在第一次手动更新投票计数。

# android - 对多个 AdView 使用一个 AdMob AdRequest？

> ID：10674526
> 
> 赞同：9
> 
> 时间：2012-05-20T15:00:12.043
> 
> 标签：android, admob, adview

我有一个 Android 应用程序，它有几个 AdView，到目前为止，每个 AdView 都有自己的 AdRequest。但是是否可以/推荐为每个 AdView 仅使用一个 AdRequest？这甚至有什么不同吗？（当然会有所不同，但值得考虑吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T18:23:29.327

您可以`AdRequest`对多个请求使用相同的。它只是一个简单的对象，其中包含有关您要加载的广告的一些元信息。

请记住，一个活动中只能显示一个 AdView。如果您真的希望在不同的活动中使用静态 AdRequest 对象，那将是可行的。但每次您想要加载广告时，创建一个新请求可能同样容易。

# events - Powershell：函数参数

> ID：10674527
> 
> 赞同：1
> 
> 时间：2012-05-20T15:00:23.867
> 
> 标签：events, powershell, event-viewer

我正在构建一个 powershell 函数，这样我就可以查询多台计算机的事件日志。我已经复制了下面需要帮助的代码。如果我不发送 eventID，我希望脚本找到所有事件 ID，我该如何实现？

```
#this would be the parameter part of the script
[String]$ComputerName = $env:COMPUTERNAME#Current computer 
[String[]]$EventLogNames=@("Application","System")#Main eventlogs 
[int[]]$EventIds = 1 #Event Ids 
[System.DateTime[]]$EventStartDate = (((Get-Date).addDays(-2)).date)#date 10 days ago 
[System.DateTime[]]$EventEndTime = (Get-Date)#date 10 days ago 

#This fits in the process section
$EventCritea = @{logname = $EventLogNames; StartTime=$EventStartDate; EndTime=$EventEndTime; ID=$EventIds}
Get-WinEvent -ComputerName $ComputerName -FilterHashTable $EventCritea  -ErrorAction SilentlyContinue 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:18:34.870

首先，您的另一个[问题](https://stackoverflow.com/questions/10674581/get-winevent-start-and-end-dates-not-filtering-records)修复了`$EventStartDate`and的类型`$EventEndTime`。

对于这个问题：逐步构建哈希表：

```
$filter = @{logname = $EventLogNames; StartTime=$EventStartDate; EndTime=$EventEndTime}

if ($EventIds -ne $null -and $EventIds.Length -gt 0) {
  $filter.ID=$EventIds
}

Get-WinEvent -ComputerName $ComputerName -FilterHashTable $filter #... 
```

# php - 获取自写的 Zend_Controller 实例

> ID：10674533
> 
> 赞同：1
> 
> 时间：2012-05-20T15:00:38.450
> 
> 标签：php, model-view-controller, zend-framework, controller

我有一个回调方法`setStatusCallback()`。我想覆盖`statusAction()`放置在我的`User_IndexController-Class`. 我知道我可以覆盖回调方法来`setStatusCallback()`使用

```
setStatusCallback(array(&$obj, 'statusAction')); 
```

然而，当我写

```
$obj = new User_IndexController();
setStatusCallback(array(&$obj, 'statusAction')); 
```

这不起作用，因为`User_IndexController()`需要`$request`. 我怎样才能得到一个实例`User_IndexController`？我不知道如何处理这个`$request`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:50:44.830

我不明白为什么你必须自己创建一个控制器对象的实例，Zend_Application 应该为你做。但是，如果您需要自己创建它，请尝试：

```
$obj = new User_IndexController(new Zend_Controller_Request_Http(),
                                new Zend_Controller_Response_Http()); 
```

您可以简单地创建一个`Zend_Controller_Request_Http`对象的实例并将其传递给`Zend_Controller_Action`构造函数，而没有特殊要求。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:54:44.617

我100%肯定，你做错了。我想不出有什么理由需要在使用之前准备好 Controller 对象。

使用 ZF 已经创建的请求和响应也可能是更好的主意。那些位于

```
Zend_Controller_Front::getInstance()->getRequest() // or ->getResponse() 
```

# ruby-on-rails - 如何在 Rails 应用程序中显示用户的四方名称和照片？

> ID：10674537
> 
> 赞同：2
> 
> 时间：2012-05-20T15:01:12.260
> 
> 标签：ruby-on-rails, omniauth, foursquare

Rails新手，所以任何帮助表示赞赏。

在遵循这个出色的 Railscast 之后，我获得了 Foursquare 授权：[http ://railscasts.com/episodes/241-simple-omniauth](http://railscasts.com/episodes/241-simple-omniauth)

但是，现在我想在用户/显示页面上显示用户名和照片。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:08:53.667

使用用户详细信息 - “返回给定用户 ID 的配置文件信息”。

文档在这里：[https](https://developer.foursquare.com/) ://developer.foursquare.com/ ，用户端点的文档在这里：[https](https://developer.foursquare.com/docs/users/users) ://developer.foursquare.com/docs/users/users 。

返回的 JSON 包含一个照片字段（此处描述：[https](https://developer.foursquare.com/docs/responses/user) ://developer.foursquare.com/docs/responses/user ）。

我发现使用和理解我们的 API 的最简单方法是这个探索工具： [https ://developer.foursquare.com/docs/explore.html#req=users/self](https://developer.foursquare.com/docs/explore.html#req=users/self)

# c# - 禁用 WPF 窗口的 Aero 玻璃/透明度？

> ID：10674540
> 
> 赞同：2
> 
> 时间：2012-05-20T15:01:44.390
> 
> 标签：c#, wpf

我可以以某种方式禁用我的 WPF 应用程序窗口的玻璃/透明度吗？

注意：我不想禁用 Aero，只禁用玻璃/透明度，对于我的窗户，而不是整个系统。

像这样的东西（`Enable Transparency`复选框），但仅适用于我的应用程序：

![在此处输入图像描述](../Images/8e85735738eda9ea1c34ceddee7429da.png)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-10T20:59:25.693

我知道这已经晚了，但对于其他人来说，你可以使用以下内容。它可能不会严格回答这个问题，因为这可能被认为是“禁用 Aero”，但它确实禁用了客户端窗口的透明度。

```
[DllImport("DwmApi.dll")]
public static extern int DwmSetWindowAttribute(IntPtr hwnd, int dwAttribute, ref int pvAttribute, int cbAttribute);

private const int DWMWA_NCRENDERING_POLICY = 2;
private const int DWMNCRP_DISABLED = 1;

private void OnLoaded(object sender, RoutedEventArgs e)
{
    var mainWindowHandle = new WindowInteropHelper(this).Handle;
    var policyParameter = DWMNCRP_DISABLED;

    DwmSetWindowAttribute(mainWindowHandle, DWMWA_NCRENDERING_POLICY, ref policyParameter, sizeof(int));
} 
```

您可以在此处找到更多信息[DwmSetWindowAttribute 函数](https://msdn.microsoft.com/en-us/library/windows/desktop/aa969524(v=vs.85).aspx)。

# objective-c - 更改元素值 nsmutablearray

> ID：10674541
> 
> 赞同：1
> 
> 时间：2012-05-20T15:01:51.737
> 
> 标签：objective-c, arrays

嗨，我有一个包含 200 个左右对象的数组。这些对象中的每一个都是另一个具有 6 个混合类型字段（整数、字符串和布尔值）的数组。

2个问题...

我可以搜索数组以找到具有特定元素的对象，即所有具有元素“A”= TRUE 的对象。

如何从其中一个对象更新单个元素？我是否必须找到该对象（从父数组中，因此我问第一个问题），删除它然后添加一个带有更新字段的新对象？似乎有点矫枉过正，但这是我需要做的吗？无论如何只是为了更新那个单一的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:41:46.347

是的，您可以搜索它，是的，如果您要更改值，则必须这样做。您可以使用 indexOfObjectPassingTest 来查找对象。在您发布的示例中，您将像这样使用它（假设您的对象是每个字典，其中一个字段为“A”）：

```
NSUInteger indx =[myArray indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
        return [[obj valueForKey:@"A"] isEqualToNumber:[NSNumber numberWithBool:TRUE]];
    }]; 
```

indx 将是数组中通过该测试的对象的索引。

# php - Codeigniter 表单验证错误陷入循环

> ID：10674544
> 
> 赞同：0
> 
> 时间：2012-05-20T15:02:07.057
> 
> 标签：php, codeigniter

我正在关注源文件可以在这里找到：[https ://github.com/JeffreyWay/Simple-CI-Authentication](https://github.com/JeffreyWay/Simple-CI-Authentication)

现在，当我尝试登录时，它不断循环说我有错误，在教程视频中他返回正常并且没有显示错误。

```
I get The Email Address field is required.The Password field is required. 
```

即使我为这两个有效的字段输入了输入，这也是我的代码：

应用程序/控制器/admin.php

```
<?php if(! defined('BASEPATH')) exit('No direct script access allowed');
class Admin extends CI_Controller
{
    public function index()
    {
        $this->load->library('form_validation');
        $this->form_validation->set_rules('email_address', 'Email Address', 'required|valid_email');
        $this->form_validation->set_rules('password', 'Password', 'required|min_length[4]');

        if ($this->form_validation->run() !== FALSE)
        {
            $this->load->model('Admin_model');
            $this->Admin_model->verify_user('test@admin.com', 'test');
            // then validation passed. get from the db.
        }

        $this->load->view('login_view');
    }
} 
```

应用程序/视图/login_view.php

```
<h1>Login</h1>

<?php echo form_open('admin'); ?>
<p>
    <?php 
        echo form_label('Email Address: ', 'email_address');
        echo form_input('Email Address', '', 'id="email_address"');
    ?>
</p>
<p>
    <?php 
        echo form_label('Password: ', 'password');
        echo form_password('Password', '', 'id="password"');
    ?>
</p>
<?php echo form_submit('submit', 'Login'); ?>
<?php echo form_close(); ?>

<div class="errors"><?php echo validation_errors(); ?></div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:17:59.873

您需要将视图中的表单输入更改为：

`form_input('email_address', '', 'id="email_address"');`

`form_password('password', '', 'id="password"');`

他们的名字必须与您在控制器规则中输入的名字相匹配。

# javascript - 如何使用由多行组成的 django 模板变量分配 javascript 变量？

> ID：10674547
> 
> 赞同：1
> 
> 时间：2012-05-20T15:02:32.230
> 
> 标签：javascript, django

我正在从 mysql 长文本字段中获取数据。它可以包含新行。此数据被传递给模板，我在模板中将此长文本数据分配给 javascript 变量。我现在遇到的问题是它会抱怨`unterminated string literal`.

这是因为它试图以这种方式分配数据

```
$("#id_review").val("kokokoeoarkgeorkgeorkgeorkg
er
g
gerag
earg
ea
gae
gr
er
gea
g
ear
ge
gae
rg
eagr

kok") 
```

我尝试编写一个自定义过滤器，将添加`"+`到每一行的末尾，但效果不太好。所以我想知道这个问题可以以某种方式解决吗？

我对过滤器的尝试

```
@register.filter
def escapenewline(value):
    return value.replace('\n', '\"+') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:06:58.350

使用 JSON 编码器创建可以在 JavaScript 代码中使用的有效字符串。

从快速搜索来看，Django 似乎没有为此提供模板过滤器，但添加起来应该不会太难。假设您的 json 过滤器被调用`tojson`，模板中的代码将如下所示：

```
$("#id_review").val({{ whatever|tojson }}); 
```

以下是过滤器的外观：

```
import json
@register.filter
def tojson(value):
    return json.dumps(value) 
```

# .htaccess - .htaccess 不起作用

> ID：10674548
> 
> 赞同：2
> 
> 时间：2012-05-20T15:02:38.493
> 
> 标签：.htaccess

我有以下 .htaccess 文件：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^mydomain.com
RewriteRule (.*) http://www.mydomain.com/$1 [R=301,L] 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^mykeyword$ news.php [L,QSA,NC] 
```

但是，当我打开 news.php 时，url 还是一样的，即 www.mydomain.com/news.php 而不是 www.mydomain.com/mykeyword

我进行以下测试：

```
RewriteEngine on 
RewriteRule ^test\.html$ test.php [L] 
```

我在我的服务器上上传了 2 个文件 test.html 和 test.php，在我输入 www.mydomain.com/test.html 后，我的 php 页面显示出来了，这意味着我的设置没有问题。我到底做错了什么？？？

任何帮助将不胜感激。

问候，佐兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:32:17.230

将您的 .htaccess 更改为此：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(mydomain\.com)$ [NC]
RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L] 

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+news\.php [NC]
RewriteRule ^ mykeyword [R=301,L]

RewriteRule ^mykeyword/?$ news.php [L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:26:09.320

重写规则将用户提供*的URL 转换**为*服务器看到的 URL。尝试浏览 www.mydomain.com/mykeyword - 您应该会看到 news.php 页面。

# java - Java 套接字：连接但没有流？

> ID：10674551
> 
> 赞同：2
> 
> 时间：2012-05-20T15:02:42.273
> 
> 标签：java, sockets, stream

我正在尝试编写一个小 SocketServer 和一个合适的 ClientApplet。连接有效（我回显传入/关闭连接），但服务器没有得到任何 InputStream。我只是无法解决问题，感觉有点失落：/

完整的项目在[这里](https://github.com/phunkei/socketserver)。

***这是我的服务器的负责部分：***

## 消息服务.java

```
public class MessageService implements Runnable {

private final Socket client;
private final ServerSocket serverSocket;

MessageService(ServerSocket serverSocket, Socket client) {
    this.client = client;
    this.serverSocket = serverSocket;
}

@Override
public void run() {
    PrintWriter out = null;
    BufferedReader in = null;
    String clientName = client.getInetAddress().toString();
    try {
        out = new PrintWriter(new OutputStreamWriter(client.getOutputStream()));
        in = new BufferedReader(new InputStreamReader(client.getInputStream()));
        String line;
        System.out.println("Waiting for "+clientName);

                    /* HERE I TRY TO GET THE STREAM */

        while((line = in.readLine()) != null) {
            System.out.println(clientName + ": " + line);
            out.println(line);
            out.flush();
        }
    }
    catch (IOException e) {
        System.out.println("Server/MessageService: IOException");
    }
    finally {
        if(!client.isClosed()) {
            System.out.println("Server: Client disconnected");
            try {
                client.close();
            }
            catch (IOException e) {}
        }
    }
}
} 
```

**部分客户**

## 队列输出.java

```
public class QueueOut extends Thread {
Socket socket;
public ConcurrentLinkedQueue<String> queue;
PrintWriter out;

public QueueOut(Socket socket) {
    super();
    this.socket = socket;
    this.queue = new ConcurrentLinkedQueue<String>();
    System.out.print("OutputQueue started");
}

@Override
public void start() {
    try {
        out = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()));
        System.out.println("Running outputqueue");
        while(true) {
            if(this.queue.size() > 0) {
                String message = this.queue.poll();
                System.out.println("Sending "+message);
                out.println(message+"\n");
            }
        }
    }
    catch (IOException ex) {
        System.out.println("Outputqueue: IOException");
    }
}

public synchronized void add(String msg) {
    this.queue.add(msg);
}
} 
```

我已将我的帖子缩减为（我认为）必要的部分:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:25:35.877

尝试在获取输出流之前获取输入流，即使您没有使用它，您也应该在客户端和服务器上匹配相反的顺序（如另一个类似线程中所述）。

编辑：

另请参阅[套接字编程](https://stackoverflow.com/questions/471342/java-socket-programming)

祝你好运！

# cross-browser - Three.js：平铺纹理、缓冲和浏览器兼容性

> ID：10674563
> 
> 赞同：2
> 
> 时间：2012-05-20T15:03:43.127
> 
> 标签：cross-browser, textures, buffering, three.js, tiling

我正在使用 html 5 画布开发一个项目。为此，我使用 three.js 库以简单橱柜的形状绘制了一些简单的立方体。我已经添加了环境照明、抗锯齿和纹理。如果一切顺利，它会渲染橱柜，您可以使用鼠标移动它。

目前的问题：

```
var textureMap = map: THREE.ImageUtils.loadTexture("wood1.jpg")
textureMap.wrapS = THREE.RepeatWrapping;
textureMap.wrapT = THREE.RepeatWrapping;
textureMap.repeat.x = 100;
textureMap.repeat.y = 100;
material = new THREE.MeshLambertMaterial(textureMap); 
```

1.  纹理当前在每个表面上拉伸。我更喜欢平铺，但似乎无法让它工作。上面的代码是我根据我在网站上找到的内容得出的最佳猜测（抱歉，无法与我当前的声誉分享更多链接）。它被注释掉了，因为它完全停止了脚本的运行。

2.  我曾经有一些滞后问题。快速搜索后，我找到了一个站点（抱歉，无法与我当前的声誉共享更多链接），它告诉我必须在主循环中设置一个超时，并且我应该使用第二个画布进行缓冲。添加超时就像一个魅力，但我仍然对缓冲画布很好奇。我不确定如何处理这个问题，因为我正在处理渲染器和画布。我什至不知道我是否还应该使用缓冲区，因为它现在似乎工作得很好，尽管将来当我尝试一次渲染更多网格时这可能会改变。

3.  我的代码目前只为我在 Firefox 中运行。Chrome 和 Internet Explorer 都只是显示一个空白屏幕。有什么想法我需要改变才能解决这个问题吗？

4.  当我在 Firefox 中运行代码时，橱柜起初完全是黑色的。当我（完全）移动它时，它会立即变为纹理。有任何想法吗？我可以想出一个肮脏的修复方法，在设置中将相机上下移动 1 个像素，但我宁愿不这样做。

我尝试将代码上传到[jsfiddle](http://jsfiddle.net/TVWYn/16/)（从 tinypic 导入[纹理](http://i50.tinypic.com/dcsdas.jpg)），但这并不顺利。当我使用外部图片时，要么我错误地导入了纹理，要么 jsfiddle 不喜欢它。但是，如果您下载纹理并将其放在与代码相同的文件夹中，您应该可以在 firefox 中打开它（仅适用于 firefox（参见问题 4））。因此，如果您想查看发生了什么：将代码复制到 .html 文件中并下载纹理。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Canvas demo</title>
<script type="text/javascript" src="http://www.html5canvastutorials.com/libraries/Three.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head> 
<body>  
<script type="text/javascript">

//three.js vars
var camera;
var scene;
var renderer;
var material;
var directionalLight;

//input vars
var lastX = 0;
var lastY = 450;
var clickX;
var clickY;
var mousedown;

function rerender(){
    //draw
    renderer.render(scene, camera); 
    //redraw after 25 ms (the 25 ms delay reduces lag)
    setTimeOut( requestAnimFrame(function(){rerender()}), 25);    
}

$(document).ready(function() {  
    //initialize renderer
    renderer = new THREE.WebGLRenderer({antialias : true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.domElement.id = "visiblecanvas";
    document.body.appendChild(renderer.domElement); 

    //camera
    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.y = -450;
    camera.position.z = 400;
    camera.rotation.x = 45.2;

    //scene
    scene = new THREE.Scene();

    //material

    //non-working tiled texture
    /*
    var textureMap = map: THREE.ImageUtils.loadTexture("wood1.jpg")
    textureMap.wrapS = THREE.RepeatWrapping;
    textureMap.wrapT = THREE.RepeatWrapping;
    textureMap.repeat.x = 100;
    textureMap.repeat.y = 100;
    */

    //workingg stretched texture
    material = new THREE.MeshLambertMaterial({map: THREE.ImageUtils.loadTexture("wood1.jpg")});

    //the cupboard

    //cube
    var cube1 = new THREE.Mesh(new THREE.CubeGeometry(300,50,10), material);
    cube1.overdraw = true;
    scene.add(cube1);

    //cube
    var cube2 = new THREE.Mesh(new THREE.CubeGeometry(300,10,300), material);
    cube2.overdraw = true;
    cube2.position.z += 150;
    cube2.position.y += 20;
    scene.add(cube2);   

    //cube
    var cube3 = new THREE.Mesh(new THREE.CubeGeometry(10,50,300), material);
    cube3.overdraw = true;
    cube3.position.z += 150;
    cube3.position.x += 145;
    scene.add(cube3);   

    //cube
    var cube4 = new THREE.Mesh(new THREE.CubeGeometry(10,50,300), material);
    cube4.overdraw = true;
    cube4.position.z += 150;    
    cube4.position.x -= 145;
    scene.add(cube4);   

    //cube
    var cube5 = new THREE.Mesh(new THREE.CubeGeometry(300,50,10), material);
    cube5.overdraw = true;
    cube5.position.z += 300;
    scene.add(cube5);

    // add subtle ambient lighting
    var ambientLight = new THREE.AmbientLight(0x555555);
    scene.add(ambientLight);

    // add directional light source
    directionalLight = new THREE.DirectionalLight(0xffffff);
    directionalLight.position.set(1, 1, 1).normalize();
    scene.add(directionalLight);

    //mousedown event
    $('#visiblecanvas').mousedown(function(e){
      clickX = e.pageX - this.offsetLeft + lastX;    
      clickY = e.pageY - this.offsetLeft + lastY;
      mousedown = true;
    });

    //mousemove event, act if mousedown
    $('#visiblecanvas').mousemove(function(e){
        if(mousedown) {
            var xDiff = e.pageX - this.offsetLeft - clickX;
            var yDiff = e.pageY - this.offsetLeft - clickY;

            lastX = -xDiff;
            lastY = -yDiff;

            camera.position.x = lastX;
            camera.position.y = -lastY;

            rerender();
        }
        delay(5);
    });

    //mouseup event
    $('#visiblecanvas').mouseup(function(e){
      mousedown = false;
    });

    //mouseleave event (mouse leaves canvas, stop moving cupboard)
    $('#visiblecanvas').mouseleave(function(e){
      mousedown = false;
    });        
    rerender();
});

//request new frame
window.requestAnimFrame = (function (callback){
        return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback){
            window.setTimeout(callback, 1000 / 60);
        };
})();

</script>
</body>
</html> 
```

谢谢参观！希望你能回答我的任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:44:11.623

1) 使用 JavaScript 控制台调试代码。

2) jsfiddle 缺少 jQuery。

3）这一行：

```
var textureMap = map: THREE.ImageUtils.loadTexture("wood1.jpg") 
```

一定是：

```
var textureMap = THREE.ImageUtils.loadTexture("wood1.jpg"); 
```

查看多余的`map:`和缺少的分号。

4）`repeat`纹理参数太大。默认值为 1，重复纹理一次。尝试将该值更改为 2、3、... 等等。

5)`delay`函数未定义，删除它

6)`setTimeOut`函数未定义（`setTimeout`?，JavaScript 区分大小写）

7）将函数重写为`rendererer`：

```
function rerender(){
    requestAnimFrame(rerender);

    renderer.render(scene, camera); 
} 
```

看看这个： http: [//paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

8) 移除对事件`rerender`内部函数的调用`mousemove`

9) IE 和 WebGL？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:10:52.153

尝试：

```
function rerender(){
    requestAnimFrame(rerender);

    renderer.render(scene, camera); 
} 
```

# php - Backbone.js：保存方法总是返回错误回调

> ID：10674564
> 
> 赞同：3
> 
> 时间：2012-05-20T15:03:43.210
> 
> 标签：php, javascript, backbone.js, callback

我知道人们可能会对为什么我不使用**rails**感到非常困惑，但我使用 php 感觉更好，因此我选择了它。我基本上是在尝试创建一个非常简单的**backbone.js**。我已经预定义了**urlRoot**和**url**函数。我已经对 php 进行了编码，只是简单地返回一条消息（使用**echo**）。

但无论我做什么，每当我尝试接收响应时，它总是落入**错误**回调。我确实得到了**responseText**作为响应，但是我仍然不明白为什么会触发错误回调。这是我的完整**html**和后端**php**代码。为什么总是去错误回调？我还想声明我收到标题

```
HTTP/1.1 200 OK
```

**HTML**（里面也有 Backbone.js）；

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
</head>
<body>
<div id='place'>
    <input id='clicker' type='button' value='Click Me'/>
</div>
<script type='text/javascript'>
(function($){
    Backbone.emulateHTTP=true;
    Backbone.emulateJSON=true;
    var URL=Backbone.Model.extend({
        initialize:function(){
            console.log("URL object has been created");
        },
        defaults:{
            url:'not actually defined'
        },
        urlRoot:'/StupidExample/server.php',
        url:function(){
            var base=this.urlRoot || (this.collection && this.collection.url) || "/";
            if(this.isNew()) return base;

            return base+"?id="+encodeURIComponent(this.id);
        }
    });

    var URLView=Backbone.View.extend({
        initialize:function(){
            console.log('URL View has been created');
        },
        el:('#place'),
        events:{
            "click #clicker":"alerter"
        },
        alerter:function(){
            console.log("I've been clicked");
            var obj=new URL();
            obj.save(obj.toJSON,{
            success:function(){
                console.log("Success")
            },
            error:function(model,response,xhr){
                console.log(model);
                console.log(response);
                console.log(xhr);
                console.log("Error");
            }
            });
        }
    });

    var urlView=new URLView();
})(jQuery);
</script>
</body>
</html> 
```

**PHP;**

```
<?php
echo "I've received something";
?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T17:53:42.193

您必须在`HTTP 200`响应中返回一个有效的 JSON 对象。Backbone 会在您的返回值上引发错误，`echo`因为它尝试将响应解析为 JSON，但失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:19:28.703

正如 Derick 所说，您需要返回 JSON，您可以通过将 php 文件更改为：

```
 <?php print json_encode(array( 'response' => 'success' )); 
```

但是您也不需要使用绝对路径作为您的 URL，因为 AJAX 不允许跨域，因此它必须是相对的。

# android - 如何将线性布局转换为图像

> ID：10674570
> 
> 赞同：5
> 
> 时间：2012-05-20T15:04:46.220
> 
> 标签：android, view, android-linearlayout

我想将完整`layout`的内容（`views`）转换为可绘制图像？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-20T16:38:23.143

试试下面的代码：

* * *

```
public class AndroidWebImage extends Activity {

ImageView bmImage; 
LinearLayout view;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      view = (LinearLayout)findViewById(R.id.screen);
      bmImage = (ImageView)findViewById(R.id.image);

      view.setDrawingCacheEnabled(true);
      // this is the important code :)  
      // Without it the view will have a dimension of 0,0 and the bitmap will be null          

      view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

      view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 

      view.buildDrawingCache(true);
      Bitmap b = Bitmap.createBitmap(view.getDrawingCache());
      view.setDrawingCacheEnabled(false); // clear drawing cache

      bmImage.setImageBitmap(b);   

};

} 
```

* * *

好好看看，你要使用：

```
 view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

 view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 
```

* * *

我使用了以下**main.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
   android:id="@+id/screen"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="@string/hello"
  />
<ImageView
  android:id="@+id/image"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
/>
</LinearLayout> 
```

* * *

## 结果是：

![在此处输入图像描述](../Images/9b5932eb5190f2f1d361a4ca93b57a54.png) [参考](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)

# php - 用于 Code Igniter 模型的完整抽象工厂模式

> ID：10674573
> 
> 赞同：3
> 
> 时间：2012-05-20T15:05:21.953
> 
> 标签：php, codeigniter, design-patterns, codeigniter-2, abstract-factory

我正在创建一个使用 MongoDB 作为数据库的网站，购买我还希望将来能够使用任何其他存储系统，所以我想使用抽象工厂模式的完整实现。通过完整的实现，我指的是：

*   “Database_factory”抽象类，客户端代码（控制器）应该使用它来创建工厂对象。
*   “Mongodb_factory”类，它扩展了 Database_factory 类。

*   代表一组查询的“客户”抽象类。

*   实现“客户”类的“Mongodb_customers”类。“Mongodb_customers”对象应该由“Mongodb_factory”返回。

我确切地知道如何使用纯 OO PHP 做到这一点。但我不知道如何将它与 CodeIgniter 提供的模型架构合并。

只使用“Customers”抽象类，然后使用“Mongodb_customers”来实现它很容易，但我也想使用工厂。

当你需要 CodeIgniter 中的模型时，你只需使用“$this->load->model('my_model');” 并使用它的功能，但是如何创建一个工厂对象，并使其返回您需要的具体模型，您可以通过接口（抽象类）使用它？

有没有机会实现这一目标？

感谢你们所有人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:30:23.963

嗯-所以你希望能够在不同的数据库实现之间切换。适配器模式不是更适合这个吗？您只需要创建一个包装新数据库的新模型并调用它。我认为抽象工厂只是为了创建一组相关/依赖对象而不暴露它们的具体类。如果这就是您想要做的，那么我认为您可以创建一个充当工厂的模型，然后创建扩展抽象类模型的其他模型（我从未尝试过，但我认为您可以尝试在类来扩展它）。这样，当您加载工厂时，您可以调用其中一种方法，其方法将为您加载正确的实现（加载发生在工厂的方法中）。

# c - 在 ANSI C 中解析 JSON

> ID：10674575
> 
> 赞同：20
> 
> 时间：2012-05-20T15:05:37.627
> 
> 标签：c, json

我想将 JSON 编码的数据读入 C 结构。json数据的结构是事先知道的，比较扁平，被一些C struct typedefs模仿。第三级左右的数组包含一个非常长的 JSON 对象列表，必须一次处理一个。

该代码旨在在非常受限的系统上运行，因此库不应动态分配内存。

我知道有[Crockford 的 JSON 库列表](http://www.json.org/)，但我不太确定哪一个最适合所述问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-20T17:52:04.357

试试[jsmn](https://github.com/zserge/jsmn) lib，我喜欢它可以解析任何只有两个 malloc 的 json 文件。

> jsmn 是一个用于解析 JSON 数据格式的简约库。它可以很容易地用于小型项目，也可以集成到嵌入式系统中。
> 
> jsmn 是一个不错的选择，因为：
> 
> *   它与 C89 编译器版本兼容
> *   它不使用动态内存分配
> *   它具有最小的开销
> *   它只需要一次解析JSON数据
> *   它没有依赖关系，甚至是 libc
> *   它是在 MIT 许可下分发的，因此您可以在您的专有项目中使用它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T15:10:48.987

尝试使用[json-c](https://github.com/json-c/json-c)是最常见的一种，它是开源的，也可以在 Windows (Win32) 上运行。

> JSON-C 实现了一个引用计数对象模型，使您可以轻松地在 C 中构造 JSON 对象，将它们输出为 JSON 格式的字符串，并将 JSON 格式的字符串解析回 JSON 对象的 C 表示形式。

# php - PHP 中的致命错误：超过 30 秒的最大执行时间

> ID：10674576
> 
> 赞同：1
> 
> 时间：2012-05-20T15:05:43.203
> 
> 标签：php, mysql

我的数据不是没有从数据库中获取。我不知道为什么。

```
mysql_connect("localhost","root","");
mysql_select_db("managment");

$q=mysql_query("select name,father_name,dob,qualification,identity_type,identity_no,gender,email,address1,city,state,country,phone_no,mobile_no,emergency_no,relation,address from employee");

echo <table border='1'>
    <tr>
        <th>NAME</th>
        <th>Fathet Name</th>
        <th>Dob</th>
        <th>Qualification</th>
        <th>Identity Type</th>
        <th>Identity No</th>
        <th>Gender</th>
        <th>Email</th>
        <th>address</th>
        <th>City</th>
        <th>State</th>
        <th>COUNTRY</th>
        <th>Phone</th>
        <th>Mobile</th>
        <th>Emergency No</th>
        <th>Relation</th>
        <th>Address</th>";

while($row=mysql_fetch_array($q));
{
    echo "<tr>
            <td>$row[name]</td>
            <td>$row[father_name]</td>
            <td>$row[dob]</td>
            <td>$row[qualification]</td>
            <td>$row[identity_type]</td>
            <td>$row[identity_no]</td>
            <td>$row[gender]</td>
            <td>$row[email]</td>
            <td>$row[address1]</td>
            <td>$row[city]</td>
            <td>$row[state]</td>
            <td>$row[country]</td>
            <td>$row[phone_no]</td>
            <td>$row[mobile_no]</td>
            <td>$row[emergency_no]</td>
            <td>$row[relation]</td>
            <td>$row[address]</td>
            </tr><br>";
}

echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:08:23.500

替换这个：

```
echo 
<table border='1'> 
```

有了这个：

```
echo "
<table border='1'> 
```

并替换这个：

```
while($row=mysql_fetch_array($q)); 
```

有了这个：

```
while($row=mysql_fetch_array($q)) 
```

此外，开始使用 PDO 或 mysqli_* 函数（），如 DCoder 已经建议的。mysql_* 函数现在已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:59:42.633

您可以像这样延长最大执行时间：

```
ini_set('max_execution_time', 600); //600 seconds = 10 minutes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T07:35:56.213

您还需要将变量包装在 {} 中并引用键

"$row[name]" 应该是 "{$row['name']}"

```
echo "<tr>
        <td>{$row['name']}</td>
        <td>{$row['father_name']}</td>
        <td>{$row['dob']}</td>
        <td>{$row['qualification']}</td>
        <td>{$row['identity_type']}</td>
        <td>{$row['identity_no']}</td>
        <td>{$row['gender']}</td>
        <td>{$row['email']}</td>
        <td>{$row['address1']}</td>
        <td>{$row['city']}</td>
        <td>{$row['state']}</td>
        <td>{$row['country']}</td>
        <td>{$row['phone_no']}</td>
        <td>{$row['mobile_no']}</td>
        <td>{$row['emergency_no']}</td>
        <td>{$row['relation']}</td>
        <td>{$row['address']}</td>
        </tr><br>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T15:08:38.740

您应该设置用户和密码（假设您有一个），如果您遇到的错误是您提到的错误，请在查询之前尝试这行代码：

```
void set_time_limit ( int $seconds ) 
```

一般来说，Jeroen 的回答可能会解决您的问题。

# linux - 将 windows 应用程序移植到 linux

> ID：10674577
> 
> 赞同：0
> 
> 时间：2012-05-20T15:05:47.843
> 
> 标签：linux, porting, freepascal

我有一个需要在 Linux 上移植的应用程序。我正在考虑使用 Free Pascal，问题是应用程序使用 Windows API 来执行诸如串行端口通信等任务......是否有适用于 linux 用户的 msdn，或者如果有 api，是否有一本介绍 linux 如何在内部工作的书。

我很困扰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T15:16:38.113

好吧，很遗憾地说，但是如果您的代码非常依赖于 Windows（不依赖于 VCL！），那么从一开始就编写应用程序而不是移植它可能会更快。

但如果只是串口问题，那么试试多平台 SynaSer 库，在这里找到它：http: [//synapse.ararat.cz](http://synapse.ararat.cz)。

希望这有帮助:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T20:54:27.413

Robert Love 有一本关于 Linux 系统编程的书 - 将涵盖该领域，而且 Love 的书通常都不错，因此值得一看。

从您的问题中并不完全清楚，但如果您担心 Windows 应用程序中对硬件控制功能的特定调用使其难以移植，我建议这是一种错位的恐惧。Windows 和 Linux 的运行原则是应用程序级程序员应该远离硬件，所有这些都应该由操作系统内核处理，并且只能通过系统调用被应用程序访问。由于不同操作系统的内核面临来自用户/应用程序的相似需求，它们往往具有执行相同类型事情的系统调用。有必要将系统调用相互匹配，但我看不出为什么这是不可能的。

可能更麻烦的是您的 Windows 应用程序可能严重依赖 Windows 执行程序的窗口代码/API。再次为您的代码找到类似物并非不可能，但可能会更复杂一些，例如在 Linux 中，这些东西通常根本不在内核中处理（与 Windows 不同）。

但是话又说回来，您的代码可能是针对像 Qt 这样的可移植工具包/库编写的，这会使事情变得容易得多。

无论如何祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:58:22.353

如果程序包含 GUI 代码，您必须使用 GTK/XLIB 等 Linux 库来创建窗口、表单、按钮等...

Windows 特定函数（如 EnterCriticalSection、WaitForSingleObject 或 _beginthreadex）必须替换为等效的 linux api 函数（可以在此处找到一个很好的教程：“www.ibm.com/developerworks/systems/library/es-MigratingWin32toLinux.html”）或者您可以使用[w2lpl](http://www.adontec.com/windows-to-linux-port-library.htm)或[wine等库](http://www.winehq.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T13:42:41.430

我在[http://www.adontec.com/windows-to-linux-port-library.htm发现了一个有用的库来解决这类问题](http://www.adontec.com/windows-to-linux-port-library.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-12T15:25:18.037

仅使用 WINE，我就获得了很棒的体验。( [https://www.winehq.org/](https://www.winehq.org/) ) 你根本没有真正移植你的应用程序。您只需确保它不违反 WINE 的一些基本约束并按原样运行它。WINE（虽然据说不是）是 Windows API 的模拟器，只会为您进行翻译。它对 API 的覆盖非常完整。

# c# - 在 C# 中生成一组数字的所有可能组合

> ID：10674579
> 
> 赞同：0
> 
> 时间：2012-05-20T15:05:54.693
> 
> 标签：c#, math, grouping, permutation, combinations

我正在寻找一种有效的方法来生成每个可能组合中的数字组合。所以，如果我有一个通用的整数列表 (1 - 120)，我希望一个结果实际上是所有 120 个数字，按从 1 到 120 的数字顺序排列，然后我需要这些数字顺序不同的所有其他组合.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:50:59.623

对于它的价值，以下是使用 LINQ 和递归对小范围（例如 1-8）进行操作的方法。

如果您尝试逐步增加范围，您将意识到为什么这种方法行不通。

```
static void Main(string[] args)
{
    int[][] combinations = GetCombinations(8).Select(c => c.ToArray()).ToArray();
    string s = string.Join("\n", combinations.Select(c => string.Join(",", c)));
    Console.WriteLine(s);
}

static IEnumerable<IEnumerable<int>> GetCombinations(int count)
{
    return GetCombinations(Enumerable.Range(1, count));
}

static IEnumerable<IEnumerable<int>> GetCombinations(IEnumerable<int> elements)
{
    if (elements.Count() == 1)
        return EnumerableSingle(elements);

    return elements.SelectMany((element, index) =>
        GetCombinations(elements.ExceptAt(index)).Select(tail =>
            tail.Prepend(element)));
}

static IEnumerable<T> ExceptAt<T>(this IEnumerable<T> source, int index)
{
    return source.Take(index).Concat(source.Skip(index + 1));
}

static IEnumerable<T> Prepend<T>(this IEnumerable<T> source, T element)
{
    return EnumerableSingle(element).Concat(source);
}

static IEnumerable<T> EnumerableSingle<T>(T element)
{
    return Enumerable.Repeat(element, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:32:04.953

好吧，当你找到了一种快速做到这一点的方法时，去申请诺贝尔奖吧。

您刚刚破坏了基于类似原理的所有现代加密机制 - 事实上，不可能快速计算两个（主要）数字的每个可能组合。

如果那是家庭作业，那你就开个玩笑。如果你真的认为有一个我们不告诉你的神奇隐藏的秘密，你就是——生活在妄想中。

抱歉，这是毫无意义的问题之一。

> 我正在寻找一种有效的方法

定义高效。我现在能看到的最有效的方法是抓住大量计算机并用蛮力进行。据说 NSA 现在可以在可接受的时间范围内为 128 个号码做到这一点；）

如果你的钱有限，最好的选择是争取时间。在某处放入一台带有太阳能电池板的小型机器，让它计算一段时间。据说根据世界的一个真实故事（如“银河系徒步旅行者指南”中所述），这就是地球存在的原因 - 计算出绝对答案者的问题，即 42。

第三种方法 - 迄今为止最有效的 - 就是使用 42 作为答案。如果它适合你，你就找到了问题，如果不是，它只是另一个失败。

对不起，我不得不让这不严重。人们经常提出“简单”的数学问题，这些问题只是落入因式分解类型的陷阱。

# events - Get-WinEvent 开始和结束日期不过滤记录

> ID：10674581
> 
> 赞同：2
> 
> 时间：2012-05-20T15:06:01.683
> 
> 标签：events, date, powershell

get-winevent 开始和结束日期不过滤记录。谁能告诉我为什么？我期望最近 2 天事件下方的代码，但我得到的日期可以追溯到 2010 年（我的 Windows 时钟日期是正确的）

```
[String]$ComputerName = $env:COMPUTERNAME#Current computer 
[String[]]$EventLogNames=@("Application","System")#Main eventlogs 
[System.DateTime[]]$EventStartDate = (((Get-Date).addDays(-2)).date)#date 10 days ago 
[System.DateTime[]]$EventEndTime = (Get-Date)

$EventCritea = @{logname = $EventLogNames; StartTime=$EventStartDate; EndTime=$EventEndTime}
Get-WinEvent -ComputerName $ComputerName -FilterHashTable $EventCritea  -ErrorAction SilentlyContinue 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T15:39:11.503

脚本中的错误是您的开始和结束日期/时间的类型 - 它们被声明为数组。

改变

```
[System.DateTime[]]$EventStartDate = (((Get-Date).addDays(-2)).date)
[System.DateTime[]]$EventEndTime = (Get-Date) 
```

至

```
[System.DateTime]$EventStartDate = (((Get-Date).addDays(-2)).date)
[System.DateTime]$EventEndTime = (Get-Date) 
```

或完全省略它们

```
$EventStartDate = (((Get-Date).addDays(-2)).date)
$EventEndTime = (Get-Date) 
```

# ruby-on-rails-3 - “评论”没有方法错误，无法找到并更正 nil 值以发表评论

> ID：10674582
> 
> 赞同：1
> 
> 时间：2012-05-20T15:06:15.437
> 
> 标签：ruby-on-rails-3, comments, polymorphic-associations

我对 Rails 比较陌生，正在尝试使用评论来实现我的第一个多态关联。

我正在运行 rails 3.2.3

编辑 - 当我尝试发表评论时，我的日志返回此错误：

```
Started POST "/comments" for 127.0.0.1 at 2012-05-20 13:17:38 -0700
Processing by CommentsController#create as HTML
Parameters: {"utf8"=>"✓",     "authenticity_token"=>"SOLcF71+WpfNLtpBFpz2qOZVaqcVCHL2AVZWwM2w0C4=", "comment"=>{"text"=>"Test this comment"}, "commit"=>"Create Comment"}
User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 101 LIMIT 1
Completed 500 Internal Server Error in 126ms

NoMethodError (undefined method `Comment' for nil:NilClass):
app/controllers/comments_controller.rb:13:in `create' 
```

我已经尝试了在 SO 和其他地方提供的许多不同的解决方案，包括下面 Jordan 的答案，我敢肯定，由于我自己的经验不足，但无法解决错误。

跟踪调用了 Comments Controller 中的第 13 行，我在下面的该行之后进行了注释以标记错误：

```
class CommentsController < ApplicationController
  def index
    @commentable = find_commentable
    @comments = @commentable.comments
  end

  def new
    @post = Post.find(params[:post_id])
  end

  def create
    @commentable = find_commentable
    @comment = @commentable.comments.build(params[:comment]) #<<<<LINE 13

    if @comment.save
      flash[:notice] = "Successfully created comment."
      redirect_to :id => nil
    else
      render :action => 'new'
    end
  end

  private

  def find_commentable
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end

    nil
  end
end 
```

职位控制器：

```
def show
@post = Post.find(params[:id])

respond_to do |format|
  format.html  # show.html.erb
  format.json  { render :json => @post }
end
end 
```

评论模板（在展后）

```
<ul id="comments">
  <% if @comments %>
     <h2>Comments</h2>
         <% @comments.each do |comment| %>
        <li><%= comment.text %></li>
      <% end %>
  <% else %>
       <h2>Comment:</h2>
  <% end %>
</ul>

<%= simple_form_for [@commentable,Comment.new], :html => { :class => 'form-horizontal', :multipart => true } do |f| %>
   <fieldset>
       <%= f.input :text %>
       Upload Photo <%= f.file_field :photo %>
  </fieldset>
  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
  </div>
<% end %> 
```

发布展示：

```
<p id="notice"><%= notice %></p>
<div class="row">
<div class="span2 offset1">
   <%= image_tag @post.photo.url(:show) %>
</div>
    <div class="span5">
            <h1><%= @post.title %></h1>
            <p><%= @post.index_text.html_safe %></p>
           <p><%= @post.show_text.html_safe %></p>
            <%= render "comments/comment" %>
            <%= render "comments/form" %>
            <% if can? :update, @course %>
                <%= link_to 'Edit Post', edit_post_path(@post), :class => 'btn btn-mini' %>
                <%= link_to 'Delete Post', @post, 
                                    confirm: 'Are you sure?', 
                                    method: :delete, 
                                    :class => 'btn btn-mini' %>
                 <%= link_to 'New Post', new_post_path, :class => 'btn btn-mini' %>
            <% end %>
     </div>

<nav class="span2 offset1">
    <ul class="well">
        <li>Category 1</li>
        <li>Category 2</li>
    </ul>
</nav>
</div>
<div class="row offset2">
    <%= link_to 'Back to Posts', posts_path, :class => 'btn btn-mini' %>
</div> 
```

路线：

```
 resources :posts, :has_many => :comments
  resources :comments 
```

很明显，有更多经验的人可以解决。让我知道是否有任何想法。布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:18:29.180

The problem is your find_commentable method.

Here are the params passed to your CommentsController#create:

```
Started POST "/comments" for 127.0.0.1 at 2012-05-20 13:17:38 -0700
Processing by CommentsController#create as HTML
Parameters: {"utf8"=>"✓",     "authenticity_token"=>"SOLcF71+WpfNLtpBFpz2qOZVaqcVCHL2AVZWwM2w0C4=", "comment"=>{"text"=>"Test this comment"}, "commit"=>"Create Comment"} 
```

Here is your CommentsController#create:

```
def create
  @commentable = find_commentable
  @comment = @commentable.comments.build(params[:comment]) #<<<<LINE 13

def find_commentable
  params.each do |name, value|
    if name =~ /(.+)_id$/
      return $1.classify.constantize.find(value)
    end
  end

  nil
end 
```

As you can see, find_commentable expects a param like xx_id (for example, comments_id) which it uses to search for an appropriate class (in case of comments_id, it will be Comment), otherwise it returns nil. Refer [classify and constantize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-classify) here.

Your params do not contain any such param. So, you always get a nil object.

Your find_commentable needs some rework. I think in case of nested_fields, it should be an expression like

```
/(.+)_attributes$/ 
```

instead of

```
/(.+)_id$/. 
```

And you need to have

```
:accepts_nested_attributes_for :commentable 
```

in your Comment model class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:25:57.400

问题是，`@commentable`就是`nil`，这意味着`CommentsController#find_commentable`正在返回`nil`。我认为您的正则表达式是正确的，因此这意味着发生了以下两件事之一`find_commentable`：

1.  没有`params`与您的正则表达式匹配的任何键。
2.  您的正则表达式匹配，但结果表中没有任何 id 为`value`.

像往常一样通过检查`params`数据库中的记录来调试它，以确保它们看起来像您期望的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:25:48.747

我尝试了上述两个答案，但问题仍然存在。

我最终咨询了一位朋友，他提出了以下解决方案，我喜欢这个解决方案，因为它比我最初的尝试更优雅并且更易于阅读（稍后，当我或其他人需要返回代码时）：

```
def find_commentable
  if params[:post_id]
    Post.find(params[:post_id])
  #elsif params[:other_id]
  #  Other.find(params[:other_id])
  else
    # error out?
  end
end 
```

一旦我启动并运行它们，注释掉的部分将引用其他关联。

# linux - 使用“include makefile”的正确方法是什么？

> ID：10674583
> 
> 赞同：3
> 
> 时间：2012-05-20T15:06:26.390
> 
> 标签：linux, unix, makefile

> **可能重复：**
> [通用 GNU makefile 目录路径](https://stackoverflow.com/questions/322936/common-gnu-makefile-directory-path)

在阅读[Recursive Make Considered Harmful](http://aegis.sourceforge.net/auug97.pdf)之后，我决定在我的下一个项目中使用“include makefile”。我有一个主 Makefile，其中包含两个位于不同目录中的子 Makefile。问题是子makefile中的路径是相对于他的目录的，所以当我从主Makefile中包含它时，他找不到文件。有没有办法在不改变路径的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:29:32.010

虽然这篇关于递归make和DAG树的文章是对的，但我大约半年前阅读了这篇文章并尝试使用其中描述的方法，发现递归make的“经典”方法更方便。考虑一下：

```
big_project
|--Makefile
|
|--sub_project_1
|  |--...
|  |--Makefile
|
|--sub_project_2
   |--...
   |--Makefile 
```

从`big_project`项目目录运行 make 非常棒，但是，如果按照文章中的建议进行操作，`sub_project_x`目录中将没有 Makefile，因此您将无法单独处理每个子项目。

# php - Cakephp如何从https重定向回http协议

> ID：10674585
> 
> 赞同：2
> 
> 时间：2012-05-20T15:06:28.743
> 
> 标签：php, cakephp, mod-rewrite, ssl

我了解如何在某些页面上强制使用 SSL，但如何在没有 https 连接的情况下重定向其他页面？

原因是我在其他页面上运行了外部 javascript 和图像，它们不需要是安全的，但是它使用 https 从我的安全支付页面重定向，并在其上创建带有红十字的挂锁。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:42:41.890

Cake Book 有一个[如何强制 SSL 的示例](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)：

```
public function forceSSL() {
    $this->redirect('https://' . env('SERVER_NAME') . $this->here);
} 
```

该`forceSSL()`函数用于 SecurityComponent 的回调，如果在没有 https 的情况下访问页面，则会调用该回调。

反过来就没有这样的回调，但是如果使用该函数`SecurityComponent::requireSecure`设置，则它是一个仅限 https 的所有操作的数组。`requireSecure()`

所以你可以在你的 AppController 中做这样的事情：

```
public function beforeFilter(){
    // Check if current action is secure but shouldn't be
    if( 
        $this->request->is('ssl')
        &&
        !in_array($this->request->params['action'], $this->Security->requireSecure) 
    ){
        // Redirect to the http URL
        $this->redirect('http://' . env('SERVER_NAME') . $this->here);
    }
} 
```

# token - 如何获取 openstack 令牌并对其进行验证？

> ID：10674588
> 
> 赞同：7
> 
> 时间：2012-05-20T15:07:00.137
> 
> 标签：token, identity, openstack

我遵循了本指南： http: [//keystone.openstack.org/api_curl_examples.html](http://keystone.openstack.org/api_curl_examples.html)

我似乎得到了一个有效的令牌：

```
curl -d '{"auth":{"passwordCredentials":{"username": "can", "password": "mypassword"}}}' -H "Content-type: application/json" http://url:35357/v2.0/tokens 
```

它返回：

```
{
"access": 
{
    "token": 
    {
        "expires": "2012-05-21T14:35:17Z", 
        "id": "468da447bd1c4821bbc5def0498fd441"
    }, 
    "serviceCatalog": {}, 
    "user": 
    {
        "username": "can",
        "roles_links": [],
        "id": "bb6d3a09ad0c4924bf20c1a32ccb5781",
        "roles": [],
        "name": "can"
    }
}
} 
```

但是当我来到接下来的几节来验证这个令牌时，我遇到了这个神奇的数字：`X-Auth-Token:999888777666`. **起初我以为这是我得到的令牌，但我错了。**

我想我可能错过了一些东西，所以我阅读了 openstack 文档中的相关部分（[http://keystone.openstack.org/configuration.html](http://keystone.openstack.org/configuration.html)和[http://docs.openstack.org/api/openstack-compute/programmer/content /](http://docs.openstack.org/api/openstack-compute/programmer/content/) )，但仍然不知道这个数字是怎么来的。

谁能向我解释

1.  那个神奇的数字是什么意思
2.  如何获得正确的价值，以便我可以获得工作令牌来管理 openstack 的其他部分

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T20:20:29.493

这个幻数（实际上是字符串）是 keystone.conf 文件中的 admin_token 设置。在 keystone.conf 设置的 [DEFAULT] 部分下

```
admin_token = abcd1234 
```

如果您不将其用于管理操作，您会看到类似

```
ubuntu@i-000004bc:~/devstack$ curl http://localhost:35357/v2.0/tenants
{"error": {"message": "The request you have made requires authentication.", "code": 401, "title": "Not Authorized"}} 
```

如果你确实使用它，你会看到类似

```
ubuntu@i-000004bc:~/devstack$ curl -H "X-Auth-Token: abcd1234" http://localhost:35357/v2.0/tenants
{"tenants_links": [], "tenants": [{"enabled": true, "description": null, "name": "demo", "id": "aee8a46babcb4e4286021c8f6ef996cd"}, {"enabled": true, "description": null, "name": "invisible_to_admin", "id": "de17fea45de148ada0a58e998e6c3e73"}, {"enabled": true, "description": null, "name": "admin", "id": "f34b0c8ab30e450489b121fbe723fde5"}, {"enabled": true, "description": null, "name": "service", "id": "fbe3e2e530fd47298cb2cba1b4afa3da"}]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:32:30.850

为了获取租户列表，在我们当前的实现中，我们使用管理员凭据进行身份验证，并使用返回的令牌来获取租户列表。该实现与身份验证令牌一起工作顺利。它可能与 admin_token 一起使用，但我尚未验证。

如果您看到您所指的示例，则使用了 2 种类型的端点

1.  指向端口 5000 的端点 - 公共端口
2.  指向端口 35357 的端点 - 管理端口

在访问管理端口的示例中，您需要将“X-Auth-Token”标头指定为 admin_token（在 keystone.conf 文件中指定）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T21:27:05.727

令牌本身在`dict["access"]["token"]["id"]`哪个部分将进入后续 HTTP 请求的标头，即

```
X-Auth-Token: 468da447bd1c4821bbc5def0498fd441 
```

值 999888777666 来自 curl 示例教程，绝对行不通。

至于令牌本身的价值，它是由 OpenStack 服务随机生成的，在您看来不应该包含任何有用的信息。

（顺便说一句，您可能不应该将令牌粘贴到论坛中，因为它们在 24 小时内有效，任何拥有令牌副本并可以访问您的计算端点的人都可以使用它来冒充您）。

# html - “返回上一页”链接是多余的吗？

> ID：10674591
> 
> 赞同：1
> 
> 时间：2012-05-20T15:07:38.850
> 
> 标签：html, back

我是从 Web 开发人员的角度提出这个问题的。我从这个站点发现表单页面上的“重置”按钮大多是多余的。我想知道“返回上一页”链接是否相同，因为所有浏览器都有一个后退按钮。

```
<a href='previous-page'>Back</a> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T15:10:29.530

这种事情很少见，除非在您浏览一系列表格的旧网站上。页面上的链接将避免重新提交表单。通常也会有一些解释为什么你应该点击链接而不是内置按钮。

当前的最佳实践消除了这种需要，现在这将是不合时宜的。

一些站点具有标记为“返回”并指向主页或其他索引页面的静态链接。这只是贴错标签或极端短视的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:15:09.610

它可能是冗余的，也可能不是冗余的，取决于页面。您的网站的组织方式可能是您进行了几次重定向；所以后退按钮不会像大多数用户期望的那样工作。我并不是说这是一个好习惯，但我看到很多网站都在做这样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:55:36.057

如果你的页面是在一个向导之类的。大多数时候，您会看到一个返回链接，在这种情况下，可以在查看前一页之前执行一些操作。

# c - 如何将包含 n 个元素的数组重新采样为包含 m 个元素的数组

> ID：10674594
> 
> 赞同：3
> 
> 时间：2012-05-20T15:08:07.327
> 
> 标签：c, math, approximation

我有一个包含 N 个测量值的数组，应该以图形的形式呈现，但图形只能是 M 像素宽，并且只能滚动 M 像素。

虽然 M 是常数，但 N 可以是从几万到几千的任何值。每次我需要显示图表时，我都知道 N 是什么，但是由于 N/M 不能是整数，所以我想以某种方式补偿累积的误差。

我正在使用普通的 C 语言，并且不能使用任何数学库。

编辑 2：数据相对均匀，偶尔会出现峰值，我不想在插值时错过这些峰值。

编辑 3：我正在寻找对任何大于 M 且小于 M 的 N 都足够好的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T15:21:54.857

一种好的解决方案不是迭代输入样本，而是迭代输出位置。也就是说，您将始终准确地绘制`M`像素。要计算`i`第 th 个像素的最近采样值，请使用数组偏移量：

```
[(i*N+M/2)/M] 
```

当然，仅使用最近的样本会产生非常*混叠*的结果（在较大的情况下丢弃大部分样本`N`）。如果您确定`N`总是大于`M`，一个好的但简单的方法是使用加权平均值对足够的相邻样本进行平均，这样每个样本的总权重为 1（端点的权重在相邻输出像素之间分配）。当然，您可以使用更精细的重采样算法，这些算法可能更合适（特别是如果您的数据类似于在频域中更有意义的音频样本），但对于内存和时钟周期要求严格的嵌入式设备，平均可能是您想要的方法。

# asp.net - 如何以编程方式在 ASPxGridView 中的 ASPxComboBox 中选择值

> ID：10674595
> 
> 赞同：5
> 
> 时间：2012-05-20T15:08:17.197
> 
> 标签：asp.net, aspxgridview

我需要使用 DevExpress ASPxGridView。我有一个数据源对象，它返回重要的两列，ObjectType 和 ObjectID。ObjectType 可以是 Patient 或 Physician。ObjectID 是一个 int 值，给出了患者或医生的 ID。希望这是有道理的。ObjectID 由 Patient 表或 Physician 表选择，它们是缩进表，因此我无法以任何方式加入它们。

表结构如下所示：

对象表：ObjectType varchar（“医师”或“患者”），ObjectID int

Dogs 表 ID int，名称 varchar

Cats 表 ID int，名称 varchar

我已经能够通过组合框编写适当的 objectType，并使用由数据源填充的两个控件 cbPatient 和 cbPhysician 编写 ObjectID。

我想不通的是，当我编辑 ASPxGridView 时，如何在 cbPatient 或 cbPhysician 中显示对象值。例如，如果 ObjectType 是 Cats 并且 ObjectID 是 1，那么我想在 cbCats 中显示与 ID 为 1 对应的名称。

这就是代码的外观。现在，无论出于何种原因，在某些情况下，所选值在某些时候变为空白。我不确定在什么事件中运行此代码。

```
protected void grid_HtmlRowCreated(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewTableRowEventArgs e)
{
    if (e.RowType != DevExpress.Web.ASPxGridView.GridViewRowType.EditForm) return;
    if (grid.IsNewRowEditing || grid.IsEditing)
    {
        int val = (int)grid.GetRowValues(grid.EditingRowVisibleIndex, "ObjectID" );

        ASPxComboBox cbPatient = ((ASPxComboBox)grid.FindEditRowCellTemplateControl(grid.Columns["PatientID"] as GridViewDataComboBoxColumn, "cbPatient"));
        if (val != 0)
        {
            string objectID = grid.GetRowValues(grid.EditingRowVisibleIndex, "ObjectID").ToString();

            if (cbPatient.Items.Count > 0)
            {
                cbPatient.Items[1].Selected = true;
            }
            else
            {
                cbPatient.DataSource = dsPatName;
                cbPatient.DataBindItems();
                if (cbPatient.Items.Count > 0)
                    cbPatient.Items[1].Selected = true;
            }

        }
    }

} 
```

这是 ASPX 代码。

```
</dx:GridViewDataComboBoxColumn>
<dx:GridViewDataComboBoxColumn Caption="Patient Name" FieldName="PatientID"  Name="PatName"  Visible="false">
    <PropertiesComboBox TextField="Name" ValueField="ID" ValueType="System.Int32"></PropertiesComboBox>
    <EditItemTemplate>
        <dx:ASPxComboBox ID="cbPatient" runat="server"  TextField="Name" ValueField="ID"
        Value='<%# Bind("PatientID") %>' AutoPostBack="false" ValueType="System.Int32" > </dx:ASPxComboBox>
    </EditItemTemplate>
</dx:GridViewDataComboBoxColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:43:26.973

我终于发现组合框会在数据绑定之后触发 DataBound 事件，该事件发生在 RowEditting 事件（或任何它被调用的事件）之后。我找到的最佳解决方案是这段代码。也许有一个更优雅的解决方案，但这有效。会话变量是为了避免在进行行更新时触发代码（是的，它也会触发，不要问我为什么）。

```
protected void cbPatient_DataBound(object sender, EventArgs e)
{
    object rightsindex = grid.GetRowValues(grid.EditingRowVisibleIndex, "Rights");
    if (rightsindex == null) return;
    int rights = Int32.Parse(grid.GetRowValues(grid.EditingRowVisibleIndex, "Rights").ToString());
    object objectID = grid.GetRowValues(grid.EditingRowVisibleIndex, "ObjectID");

    ASPxComboBox cbPatient = ((ASPxComboBox)grid.FindEditRowCellTemplateControl(grid.Columns["PatientID"] as GridViewDataComboBoxColumn, "cbPatient"));
    if (cbPatient != null && cbPatient.Items.Count > 1)
    {

        if (rights == 8)
        {
            ListEditItem pt = cbPatient.Items.FindByValue(objectID);
            if (pt != null && Session["PatientID"] == null)
            {
                cbPatient.Items[pt.Index].Selected = true;
                Session["PatientID"] = (Int32)pt.Value;

            }
        }
            //cbPatient.Items[1].Selected = true;
    }
} 
```

而在 ASP.NET

```
<dx:GridViewDataComboBoxColumn Caption="Patient Name" FieldName="PatientID"  Name="PatName"  Visible="false">
    <PropertiesComboBox DataSourceID="dsPatName" TextField="Name" ValueField="ID" ValueType="System.Int32">
    </PropertiesComboBox>
    <EditItemTemplate>
        <dx:ASPxComboBox ID="cbPatient" runat="server" DataSourceID="dsPatName" TextField="Name" ValueField="ID"
        Value='<%# Bind("PatientID") %>' AutoPostBack="false" ValueType="System.Int32" ondatabound="cbPatient_DataBound" > </dx:ASPxComboBox>
    </EditItemTemplate>
</dx:GridViewDataComboBoxColumn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:09:29.847

首先，您应该使用 GridView_RowDataBoundEvent 将数据绑定到 gridview 时触发，将您的代码放入其中。其次，为了能够在 ComboBox 中设置值，您应该执行以下操作：

```
//Ensure that the Dropdownlist dosn't have any value selected, otherwise it will give  an exception
DropDownList_Country.ClearSelection();
//You can use either FindByValue or FindByText
DropDownList_Country.Items.FindByValue("").Selected = true; 
```

# windows-phone-7 - Windows Phone 7 应用程序的应用程序标题的本地化 - windows 市场 hickup

> ID：10674598
> 
> 赞同：2
> 
> 时间：2012-05-20T15:08:38.077
> 
> 标签：windows-phone-7, localization, marketplace

基本上，我遵循微软提供的 How-to
[http://msdn.microsoft.com/en-us/library/ff967550(v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/ff967550(v=VS.92).aspx)
来本地化我的应用程序标题。
工作就像一个魅力，但现在我想将我的应用程序上传到 Windows 市场进行发布，我的应用程序标题到处都显示为

```
@AppResLib.dll, -100 
```

我应该忽略它吗？
它会“稍后”神奇地工作吗？
是我做错了什么，还是不可能在市场上拥有本地化的应用程序标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:56:59.563

好的，在 WP7 开发者论坛的提示下，我发现在 WMAppManifest.xml / 条目中

```
Title="@AppResLib.dll, -100" 
```

永远不会工作，因为正确的必须是

```
Title="@AppResLib.dll,-100" 
```

. 哎哟! 解决了。

# android - Android - Ant 版本的字符编码

> ID：10674599
> 
> 赞同：3
> 
> 时间：2012-05-20T15:08:38.647
> 
> 标签：android, character-encoding

在我的应用程序中，我从 List 中的类中写出硬编码字符串值的列表，如下所示：

```
getSalePricesMin().put(40000, "£40,000"); getSalePricesMin().put(60000, "£60,000"); 
getSalePricesMin().put(80000, "£80,000"); getSalePricesMin().put(100000, "£100,000"); 
getSalePricesMin().put(120000, "£120,000"); getSalePricesMin().put(180000, "£180,000"); 
```

它们显示在标准微调器中。
当我使用 Eclipse 构建应用程序时，“£”符号正确显示，但是，我需要使用 ant 发布，当我这样做时，我得到了错误的编码，如下所示。

![在此处输入图像描述](../Images/ad3991cfb93163f5b162e2468548ace4.png)

我尝试将 java.encoding=UTF-8 添加到 ant.properties 文件中，但这并没有改变。

有什么建议吗？多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:23:07.007

好的，

替换 \u00a3 的 £ 符号很有效。

```
getSalePricesMin().put(40000, "\u00a340,000");
getSalePricesMin().put(60000, "\u00a360,000");
getSalePricesMin().put(80000, "\u00a380,000");
getSalePricesMin().put(100000, "\u00a3100,000");
getSalePricesMin().put(120000, "\u00a3120,000"); 
```

# android - 如何将外部 JSON jar 文件导入 ANDROID 项目

> ID：10674601
> 
> 赞同：0
> 
> 时间：2012-05-20T15:08:44.840
> 
> 标签：android, eclipse, json, jar

我想将一些数据转换为 JSON 进行传输。但由于关于 JSON 的 android 方法相当繁琐。我创建了一个用户库并导入了一些我在 JSE 项目中经常使用的 JSON jar 文件。然后当我启动 android 项目时，会出现 Android 打包问题。在问题标签中，它表示“描述：转换为 Dalvik 格式失败，错误 1 ​​位置：未知类型：Android 打包问题”。我在互联网上检查了问题，并尝试通过清理项目来解决它。但是，它不起作用。有人有处理这个问题的经验吗？请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:10:59.793

> 我通过在 Java 构建路径中添加新库来导入 JSON jar

不要那样做。

相反，在您的项目中创建一个`libs/`目录并将 JAR 放在那里。如果您使用的是最新版本的 Eclipse 的 ADT 插件，则将您的 JAR 放入`libs/`其中会自动将其添加到您的构建路径中，并会自动将 JAR 的内容包含在您的 APK 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:16:38.017

选择项目

1.  右键单击转到属性并选择java构建路径。

2.选择库标签

3.点击添加外部jar。选择 jar 文件。单击确定。这就是你需要做的。

# iphone - 预缓存 UIView 的动画？

> ID：10674603
> 
> 赞同：1
> 
> 时间：2012-05-20T15:08:57.070
> 
> 标签：iphone, uiviewanimation, performance

我已经设置了一个 UIViewController 来保存另外两个控制器：

```
MainVC -> SubVC1
       -> SubVC2 
```

开始时，我展示了 SubVC1 的视图。然后用户可以切换到 SubVC2 的视图：

```
- (void)showOtherSide:(id)sender
{
   UIView *currentView = [self.view.subviews objectAtIndex:0];
   BOOL flipToRight;
   UIView *newView;
   if (currentView == subVC1.view)
   {
       newView = subVC2.view;
       flipToRight = YES;
   }
   else
   {
       newView = subVC1.view;
       flipToRight = NO;
   }

   [UIView beginAnimations:nil context:nil];
   [UIView setAnimationDuration:1.0];
   [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
   if (flipToRight)
   {
       [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:currentView cache:YES];
   }
   else
   {
       [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:currentView cache:YES];
   }

   [currentView removeFromSuperview];
   [self.view addSubview:newView];
   [UIView commitAnimations];
} 
```

现在的问题是，即使在模拟器中，第一次来回翻转也不会出现，而是用户立即看到新视图。因为我将动画缓存设置为 YES，所以下面的翻转显示了动画（至少在大多数情况下！）。我也尝试将动画代码放在 viewDidAppear: 方法中，但没有任何改进。

预缓存动画有什么好的做法吗？

# javascript - 导出 node.js 中的所有对象

> ID：10674607
> 
> 赞同：6
> 
> 时间：2012-05-20T15:09:49.323
> 
> 标签：javascript, node.js

我的一个 node.js 模块太大了，所以我把它分成几个更小的（子）模块。

我将所有相关对象复制并粘贴到每个子模块中，现在看起来像

```
var SOME_CONSTANT = 10;

function my_func() { etc... }; 
```

现在我想导出每个子模块中的所有内容，集体，而不必明确地说`exports.SOME_CONSTANT = SOME_CONSTANT`一百万次（我发现这既丑陋又容易出错）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:29:42.197

我假设您不想导出每个局部变量。

这些天我会设法自动化这个，但现在我经常使用这种技术。

```
 var x1 = { shouldExport: true  } ; 
```

// 在你喜欢的编辑器中创建一个宏来搜索和替换，这样

```
x1.name = value ; // instead of var name  = value 
```

和

```
name becomes x1.name 
```

// 模块主体

```
for ( var i in x1) { exports.better_longer_name[i]   = x1[i] ;} 
//or if you want to add all directly to the export scope  
for ( var i in x1) {  exports[i] = x1[i] ; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:46:39.230

```
module.exports = {
    SOME_CONSTANT_0 : SOME_CONSTANT_1 ,
    SOME_CONSTANT_1 : SOME_CONSTANT_2 ,
    SOME_CONSTANT_2 : SOME_CONSTANT_3
} 
```

那么为什么你需要那个“百万”常数来出口呢？

# python - 带有 python 列表和拆分的 IndexError 消息

> ID：10674609
> 
> 赞同：3
> 
> 时间：2012-05-20T15:10:18.863
> 
> 标签：python, python-2.7

我正在尝试学习 python 并深入研究字符串函数。作为一个简单的例子，我写了这个

```
# example line
# username:*:231:-2:gecos field:/home/dir:/usr/bin/false

FILENAME = "/etc/passwd"

filehandle = open(FILENAME, 'r')

lines = filehandle.readlines()

for line in lines:
        line = line.rstrip()
        fields = line.split(':')
        print fields[0] 
```

这个例子每次都有效，并给了我一个用户名。列表中的第一个字段。

这也适用 [0:6] 并打印所有字段。[:1] 也打印用户名。[-1] 也打印最后一个字段。

问题是[1]、[-2]、[2]等会导致这个错误

**文件“splits.py”，第 16 行，打印字段 [-2] IndexError: list index out of range**

我在这里做错了吗？我确定这很愚蠢，但是我正在查看的示例说我可以做 [1]、[2] 等等。

我不认为我的输入搞砸了，因为它是 /etc/passwd 和 [0] 和 [-1] 工作。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:17:56.153

听起来您的文件中有一些空行，可能在最后。

例子：

```
>>>line = ''
>>>fields = line.split(":")
>>>print fields[0]
''
>>>print fields[-1]
''
>>>print fields[0:6]
''
>>>print fields[1]
IndexError: list index out of range 
```

你可以像这样修复它：

```
for line in lines:        
    line = line.rstrip()
    fields = line.split(':')
    if len(fields) == 1:
        continue
    print fields[0] 
```

# javascript - 隐藏 div 24hr cookie javascript？

> ID：10674611
> 
> 赞同：1
> 
> 时间：2012-05-20T15:10:46.827
> 
> 标签：javascript, html, cookies, popup, hide

我想要一个简单的 JavaScript 代码，它允许我在单击预定义的时间时隐藏某个 div 元素。为了提供更多信息，我在主页加载时出现了一个建议框。我想要的是，当单击 div 关闭按钮时，它会设置一个 cookie 以保持框 div 关闭 24 小时（1 天）。简单来说，当按下 div 关闭按钮时，box div 会被隐藏 24 小时。注意：我有一个允许关闭按钮关闭框的 javascript，但它会加载每次刷新。

* * *

[http://i.stack.imgur.com/du1pA.jpg](http://i.stack.imgur.com/du1pA.jpg)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T15:16:32.277

尽管 TJ Crowder 在他的评论中说 stackoverflow 不是为了编写您的代码是正确的......我为您编写了一些代码。这是一个使用 jQuery 的解决方案。在其中，您将使用 a`<div id="popupDiv">...</div>`表示消息并在其中使用 id 为“close”的链接来关闭 div。

```
$(document).ready(function() {

  // If the 'hide cookie is not set we show the message
  if (!readCookie('hide')) {
    $('#popupDiv').show();
  }

  // Add the event that closes the popup and sets the cookie that tells us to
  // not show it again until one day has passed.
  $('#close').click(function() {
    $('#popupDiv').hide();
    createCookie('hide', true, 1)
    return false;
  });

});

// ---
// And some generic cookie logic
// ---
function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else var expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

function eraseCookie(name) {
  createCookie(name,"",-1);
} 
```

这是一个 js 小提琴：http: [//jsfiddle.net/FcFW2/1/](http://jsfiddle.net/FcFW2/1/)。运行一次，然后再次运行。第二次弹出窗口不显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:19:16.510

这应该让你开始：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

以下示例使用上述链接中声明的函数。

创建一个cookie：

```
// when the div is clicked
createCookie('hideSuggestionBox', 'true', 1); 
```

读取 cookie：

```
// when deciding whether to show or hide the div (probably on document ready)
if (readCookie('hideSuggestionBox') === 'true') {
    // do not show the box, the cookie is there
} else {
    // the cookie was not found or is expired, show the box
} 
```

# jquery - 如何将动态值传递给 Jquery 中的另一个插件选项（从手风琴到 localscroll）

> ID：10674618
> 
> 赞同：3
> 
> 时间：2012-05-20T15:11:40.907
> 
> 标签：jquery, scroll, accordion

所以这是我的设置。在我的页面上，我有两列。在左栏中，我有一个手风琴，在其下方，我有一些带有链接的文本。在右栏中，我有一些图片由左栏中文本内的链接控制。图像可以滚动。

在我的页面上，我有一个可以正常工作的手风琴，并且设置如下

```
$( "#accordion" ).accordion({
    autoHeight: false,
    navigation: true,
    change: function(event, ui) { dynamicOffsetValue(); }/*This here call's the dynamicOffsetValue function after the accordion has finished animation*/
}); 
```

然后我有一个函数可以给我一个包裹在手风琴周围的 div 的高度

```
function dynamicOffsetValue()
{
    var top = $("#accordion").height();/*IF I ALERT THIS THEN IT GIVES ME THE NUMBER I NEED*/
}

dynamicOffsetValue(); 
```

然后我还为右列中的图像设置了 localscroll 插件

```
 var scrollOptions = {
      target:div#overflow, /* the element that has the overflow and contains images*/
      offset:500,/*HOW TO I MAKE THIS EQUAL TO dynamicOffsetValue ???*/
      axis: 'xy',
      duration: 50,  
      easing: 'swing'
    };

$('.scrollContainer').localScroll(scrollOptions);/*.scrollContainer(this element wraps both left and right column) */ 
```

现在，当页面加载并且第一个手风琴打开并且用户单击文本内的链接时，图像就会滚动到我想要的位置。但是当 Accordion 在不同的状态下打开时，偏移值 500 是不够的。

我将如何去做，以便当用户点击手风琴时，dynamicOffsetvalue 被发送到 scrollOptions，然后当用户点击文本内的链接（这会触发 localscroll）时，读取新的偏移值？

希望所有这些都有意义。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:58:07.163

像往常一样，在发布这个问题后一点点时间，答案就来了。（我已经搞砸了两天）

这是我的最终设置。我想我的问题是文本中的链接仅在页面加载时才被分配给它们，因此忽略了对 scrollOptions 的任何更新。但是现在我已经在我的 dynamicOffset 函数中移动了所有 localscroll 设置，每次单击手风琴部分时都会重新分配它（localscroll），然后它（localscroll）读取新的更新偏​​移值。

```
 $( "#accordion" ).accordion({
        autoHeight: false,
        navigation: true,
        change: function(event, ui) { dynamicOffsetValue(); }/*This here call's the dynamicOffsetValue function after the accordion has finished animation*/
    });

    function dynamicOffsetValue()
    {
        var top = $("#accordion").height();/*IF I ALERT THIS THEN IT GIVES ME THE NUMBER I NEED*/

          var scrollOptions = {
          target:'div#overflow', /* the element that has the overflow and contains images*/
          offset:top,/*THIS NOW EQUALS TOP*/
          axis: 'xy',
          duration: 50,  
          easing: 'swing'
        };

    $('.scrollContainer').localScroll(scrollOptions);/*.scrollContainer(this element wraps both left and right column) */

    }

    dynamicOffsetValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:09:41.560

为什么不在链接（`href="#my_id"`）中使用锚点并将这些 id 添加到您想要的图像中，而不是设置偏移量？

# html - 将带有 HTML 标签的文本解析为 NSAttributedString

> ID：10674620
> 
> 赞同：1
> 
> 时间：2012-05-20T15:12:19.580
> 
> 标签：html, parsing, nsattributedstring

我有一个包含 HTML 标签的字符串，如下所示：

```
 @"Lorem ipsum... <b>Bold sting..</b>, then <em>emphasized sting...</em> 
normal text normal text <b>Bold sting..</b> etc...." 
```

我想将这些不同的部分存储在属性字符串中。那些不在标签中的应该有Times字体，黑色笔触颜色和14.0的字体大小，其他的应该有相同的属性加上粗体/强调的属性。

提前致谢。

编辑：

我找到了这个[指南](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)：但我对如何使用 NSRegularExpression 类有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:35:24.597

我想，您正在寻找的是[DTCoreText](https://github.com/Cocoanetics/DTCoreText)库

# jquery - 检测文本字段是否为空并触发一次代码，除非状态改变

> ID：10674622
> 
> 赞同：3
> 
> 时间：2012-05-20T15:13:12.123
> 
> 标签：jquery, input, keyup

我想检测这个文本字段是否为空，然后基于它运行一些代码。

**问题是：**我怎样才能只运行一次代码......然后每次文本字段的状态在一个期间发生变化时再次运行它`focus`

*   不同的状态是`empty`或`not empty`。

* * *

**进一步阐述：**

（这些 jsfiddle 中最重要的部分显示在控制台中。）

*   [这是每次键入时](http://jsfiddle.net/lollero/LncWS/)执行代码的代码的 jsfiddle（不是我想要的。只是初始代码。）。

    ```
    $('input').on("keyup", function() {

        var val = $(this).attr('value'),
            previous = $(this).prev();

        if ( val === '' ) {
            console.log('Empty');
        }
        else if ( val !== '' ) {
            console.log('Text');
        }

    }); 
    ```

*   [这是一个代码的jsfiddle，](http://jsfiddle.net/lollero/LncWS/1/)每个焦点执行一次代码（这有点接近我想要的）。

    **它仍然缺少的，我似乎无法完成的，是基本上每次在那个焦点期间状态发生变化时再次运行代码。**我怎么能那样做？

    ```
    $('input').on("focus", function() {

        $('input').one("keyup", function() {

            var val = $(this).attr('value'),
                previous = $(this).prev();

            if ( val === '' ) {
                console.log('Empty');
            }
            else if ( val !== '' ) {
                console.log('Text');
            }

        });

    }); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:31:42.643

您需要使用来自 ZURB 的名为 jQuery Text Change 的插件。做你想要的一切，还有一个叫做'hastext'和'notext'的触发动作，看看：

[http://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

那里也有演示。

我为你做了这个（使用那个插件）。

**现场演示：**

[http://jsfiddle.net/oscarj24/UtwNz/](http://jsfiddle.net/oscarj24/UtwNz/)

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:33:52.753

您可以保留该字段的值，并且仅在值的状态发生更改时触发：http: [//jsfiddle.net/xk6A5/9/](http://jsfiddle.net/xk6A5/9/)

# javascript - 当喂食 $2^4$ 时，这个幂函数不应该返回 12 吗？

> ID：10674625
> 
> 赞同：0
> 
> 时间：2012-05-20T14:33:31.383
> 
> 标签：javascript, math

我正在学习 JavaScript，其中一个练习是编写一个幂函数。我也应该学习数学，因为这听起来肯定很愚蠢。

我凭直觉知道 $2 ^ 4 = 16$，因为 $2 * 2 * 2 * 2 = 16$。但通读该函数，它似乎应该返回 12，而不是 16。

如果我们插入数字，它应该是这样的：$$2 * (2 * (4 - 1)) = 12$$

```
var power = function( base, exponent ) {
  if ( exponent === 0 ) return 1;
  return base * power( base, exponent - 1 );
};
power(2,4);
===> 16 
```

显然我一定是读错了函数。但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:47:31.230

您的函数编写正确，您可以从分析函数的结果开始，因为递归推进和指数减少。

1.  参数：2、4。结果：2 * 幂 (2, 3) = 2 * 8 = 16。
2.  参数：2、3。结果：2 * 幂 (2, 2) = 2 * 4 = 8。
3.  参数：2, 2。结果：2 * power (2, 1) = 2 * 2 = 4。
4.  参数：2, 1。结果：2 * power (2, 0) = 2 * 1 = 1。
5.  参数：2, 0。结果：1。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:40:33.317

这递归地返回 16。如果 $function$ 由 $f$ 表示：

f(2, 4)=2*f(2, 3)=\dots=2*2*2*2*f(2, 0)=2*2*2*2*1=16

更普遍，

f(a, b)=a*...*a*1 <- n 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:28:07.990

关键是**递归**。

```
power(2,4)
   = 2 * power(2,3)
   = 2 * (2 * power(2,2))
   = 2 * (2 * (2 * power(2,1)))
   = 2 * (2 * (2 * (2)))
   = 16 
```

`power`用较小的指数调用自身，它调用自身等，直到指数为 1，答案只是基数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T14:46:26.747

从头开始考虑函数的行为方式可能会有所帮助。

因此，当指数等于 $0$ 时，它将返回 $1$，这将乘以底数，所有这些都将再次乘以底数，依此类推，所以：

$$ (((2^0*2)*2)*2)\ldots)*2 $$

# bash - bash 中的行删除问题：将用户输入传递给 sed 与 grep？

> ID：10674632
> 
> 赞同：1
> 
> 时间：2012-05-20T15:14:25.920
> 
> 标签：bash, sed, grep, msys

MSYS 中的抨击问题：以下简单函数应删除与用户输入字符串匹配的所有行`$kwd`。

```
function delnote () {
   read kwd
   sed -e "/$kwd/d" -i ~/notes.txt
} 
```

相反，我不断收到*“sed -e expression #1, char 0: no previous regular expression”*错误。为什么？

我对 bash 和 sed（以及 MSYS）都是新手，所以我不确定这是将变量传递给 sed 还是以错误的方式使用引号的问题（我已经毫不费力地尝试用`""`许多`''`变体替换）。我尝试使用[此处提供的功能](https://stackoverflow.com/questions/4108850/passing-bash-arguments-into-sed-to-delete-lines)而不是我自己的功能，但仍然遇到相同的错误。

如果这是引号放错的问题，那么 sed 和 grep 在 bash 中处理用户输入的方式有什么区别？（与 sed 不同，`'"$*"'`在 grep 函数中使用确实有效。）

感谢您的任何帮助和解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:56:25.310

[好的，在复制上面链接的解决方案](https://stackoverflow.com/questions/4108850/passing-bash-arguments-into-sed-to-delete-lines%20)时，我似乎搞砸了。现在它可以工作了，像这样：

```
function delnote () {
  sed -e "/`echo $*`/d" -i ~/notes.txt;
} 
```

不过，作为非编码员和 n00b，我仍然希望能对我的初始版本有什么问题做出任何解释。另外，为什么`echo`似乎在这里解决了这个问题？谢谢。

# jquery-mobile - 首次加载时 JQuery Mobile Content Padding Top 不正确

> ID：10674635
> 
> 赞同：1
> 
> 时间：2012-05-20T15:14:49.167
> 
> 标签：jquery-mobile

我正在使用 jquery 1.1.0，我在这里有一个自定义标题

我已将此标题的 css 设置为 200px 的高度；（我对其进行了硬编码以进行测试，如果我将项目放在那里以使其动态达到 200 像素，那是一样的）

问题是当我转换到另一个页面时

$.mobile.changePage("#SurveyCreateView", "none", false, false);

第二页上的内容基本上忽略了我拥有的自定义标题的高度。（所以内容从顶部开始）如果我调整窗口大小或返回，然后再次导航到第二个视图，那么一切正常。

有人知道如何解决这个问题吗？

# sql - 将 SQL 数据库用作字典

> ID：10674637
> 
> 赞同：1
> 
> 时间：2012-05-20T15:14:54.853
> 
> 标签：sql, database, database-design, dictionary

我正在创建一个手机游戏，它从用户那里获取单词，然后验证它们以查看它们是否是英语词典中的有效单词。过去，我使用加载到游戏本地内存中的字典创建了一个类似的游戏。

这种方法的问题是我经常需要用新词更新字典。由于字典在内存中，添加新单词需要我完全更新应用程序。如果我使用 SQL 数据库作为字典，我可以很容易地添加单词，而无需更新应用程序，并且必须依靠用户去下载新的更新。

我的问题是，这种方法（设计或性能方面）有什么问题吗？我以前从未见过这样的事情。另外，我不需要定义。我只需要确保该单词是有效的英文单词。

如果这是糟糕的设计，有没有更好的选择？还是我最好只处理内存字典？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:19:09.270

SQL 数据库似乎有点矫枉过正。[您是否看过像Berkley DB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)这样的键值对存储？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:55:12.117

答案在很大程度上取决于应用程序的数据库开销。添加少量功能可能需要大量的处理能力和内存。

如果您已经在使用基于文件的方法，也许最简单的解决方案是定期轮询文件以检查更新（大小或修改时间）。找到后，将其加载到内存中。

在数据太大而无法放入内存的环境中，数据库将很有价值，因为数据库在管理内存和磁盘空间方面做得很好。

# ios - 将 Simperium 添加到现有 Core Data 项目会因断言失败而崩溃

> ID：10674638
> 
> 赞同：1
> 
> 时间：2012-05-20T15:14:55.180
> 
> 标签：ios, core-data, simperium

是）我有的：

*   iOS 5.1 核心数据项目。
*   我将 Mogenerator 用于我的核心数据类。

我做了什么：

*   我尝试将 Simperium 添加到我的应用程序并按照教程 (1) 和 (2)

我得到什么：

```
Simperium starting... 
*** Assertion failure in -[SPCoreDataExporter addMembersFrom:to:], /Users/kineticpoet/dev/simperium-ios-private/Simperium/SPCoreDataExporter.m:95 
```

我尝试了什么：

*   通读 (3)
*   删除模拟器上的应用程序（5.1）并安装新的。同样的问题。

我没有尝试在设备上安装，因为设备上的数据对我很重要。

我还能尝试什么？这里的问题到底是什么？
谢谢你。

[(1) https://simperium.com/tutorials/simpletodo-ios/](https://simperium.com/tutorials/simpletodo-ios/)
[(2) https://simperium.com/docs/ios/](https://simperium.com/docs/ios/)
[(3) https://simperium.com/docs/reference/](https://simperium.com/docs/reference/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:29:03.853

您的核心数据模型是否具有二进制属性？这些尚未完全支持，因此如果它们存在，您需要手动禁用它们：[Simperium 无法加载成员数据（不支持的类型）](https://stackoverflow.com/questions/10571694/simperium-couldnt-load-member-data-unsupported-type)

# eclipse-plugin - 无边框矩形

> ID：10674639
> 
> 赞同：0
> 
> 时间：2012-05-20T15:15:09.330
> 
> 标签：eclipse-plugin, swt, eclipse-rcp, draw2d

在draw2d中，如何绘制没有边框的图形？如何为矩形实现 CustomBorder 以去除边框？我知道如果我们实现一个扩展边框的类，在paint方法中我应该怎么做才能删除边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:34:39.253

图形没有边框，除非您通过调用`setBorder(..)`. 如果您只想要一个不绘制任何内容的空白图形，那么`new Figure()`就会给您。无需实现任何自定义边框或图形。如果您使用的是 a`Rectangle`那么这正是您将得到的：一个矩形；这可能是您对边界感到困惑的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:30:39.850

您可以禁用边框，`figure.setBorder(null);`也可以将其放入构造函数中：

```
public static  class BorderlessFigure extends Figure {
    public BorderlessFigure() {
        ToolbarLayout layout = new ToolbarLayout();
        setLayoutManager(layout);   
        setBorder(null);
        add(new Label("test"));  
    }
} 
```

如果你想要一个不画任何东西的边框，你可以扩展`org.eclipse.draw2d.AbstractBorder`：

```
public class NoBorderBorder extends AbstractBorder {
    @Override
    public void paint(IFigure f, Graphics g, Insets i) { }

    @Override
    public Insets getInsets(IFigure f) {
        return new Insets(0);
    }
} 
```

我不知道你为什么要这样做。

# php - composer.lock：它是如何工作的？

> ID：10674641
> 
> 赞同：90
> 
> 时间：2012-05-20T15:15:26.380
> 
> 标签：php, dependency-management, package-managers, composer-php

我试图理解这部分： http: [//getcomposer.org/doc/02-libraries.md#lock-file](http://getcomposer.org/doc/02-libraries.md#lock-file)

> 这个锁文件不会对其他依赖它的项目产生任何影响。只对主项目有影响”

这是否意味着如果项目 P 依赖于库 A，而库 A 依赖于库 B v1.3，则项目 P 不会关心库 B 的版本，而可能会安装 B 1.4？那有什么意义呢？

或者它是否意味着相反的意思，正如人们对依赖管理器所期望的那样？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2016-09-15T02:06:02.320

`composer.lock`记录安装的确切版本。这样您就可以与您的同事处于相同的版本中。

**作曲家安装**

*   检查`composer.lock`文件
*   如果没有，自动生成`composer.lock`文件（使用`composer update`）
*   `composer.lock`安装文件中记录的指定版本

**作曲家更新**

*   浏览`composer.json`文件
*   根据提到的版本标准（例如 1.12.*）检查更新（最新）版本的可用性
*   安装最新的可能（根据上述）版本
*   `composer.lock`使用已安装的版本更新文件

* * *

*所以在一个简单的清单中。*

**如果您想让所有同事都使用与您相同的版本...**

*   将您提交`composer.lock`给 GIT（或您拥有的 vcs）
*   要求其他人获取该版本的`composer.lock`文件
*   **始终用于** `composer install`获取正确的依赖项

**如果要将系统依赖升级到新版本**

*   检查 composer.json 文件以获取版本规范。
*   做一个`composer update`
*   这将`composer.lock`使用最新版本更改文件
*   将其提交到 GIT（或 vcs）
*   要求其他人得到它并`composer install`

以下将是一个很好的阅读
[https://blog.engineyard.com/2014/composer-its-all-about-the-lock-file](https://blog.engineyard.com/2014/composer-its-all-about-the-lock-file)

享受`composer.lock`文件的力量！

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-05-20T21:52:59.170

Composer 依赖项在`composer.json`. 第一次运行 composer install 或运行 composer update 时，`composer.lock`将创建一个名为的锁定文件。

引用的文档仅指锁定文件。如果你的项目 P 依赖于库 A 而 A 依赖于 B v1.3.***，那么如果 A 包含一个锁定文件，说有人运行“composer update”导致安装了 B v1.3.2，那么在你的项目中安装 A P 可能仍会安装 1.3.3，因为`composer.json`（不是`.lock`！）将依赖项定义为 1.3.*。

锁定文件始终包含准确的版本号，对于将您测试的版本传达给同事或发布应用程序时很有用。对于库来说，依赖信息`composer.json`是最重要的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-05T05:19:38.790

锁定文件的重点是记录已安装的确切版本，以便重新安装它们。这意味着，如果您的版本规范为 1.*，并且您的同事运行`composer update`安装 1.2.4，然后提交 composer.lock 文件，那么当您使用时`composer install`，您也将获得 1.2.4，即使是 1.3.0已被释放。这可确保从事该项目的每个人都有相同的确切版本。在这里阅读更多[作曲家：这都是关于锁定文件的](https://blog.engineyard.com/2014/composer-its-all-about-the-lock-file)

# asp.net - 在 ActionLink 中添加 div

> ID：10674643
> 
> 赞同：2
> 
> 时间：2012-05-20T15:16:36.490
> 
> 标签：asp.net, css, asp.net-mvc, asp.net-mvc-3

我有一个显示信息的磁贴，但也需要是一个链接。如果用户单击磁贴上的任何位置，则需要将他们带到适当的操作。

下面是我创建的图像。

![在此处输入图像描述](../Images/97cbd5d00a1fca29dd811279c382f42c.png)

的HTML

```
 <div class="tile">
        <div class="tile-text">Runs</div>
        <div class="tile-text details">Manage runs, routes, races, and goals</div>
        <div id="runs" class="tile-text live">You have a four mile run today</div>
    </div> 
```

现在，如果我创建一个 ActionLink，它将创建蓝色图块，但我不确定如何在 ActionLink 中获取三个子 div。

我尝试了以下 ActionLink：

```
@Html.ActionLink("Runs", "Index", "Run", null, new { @class = "tile-text" }) 
```

这将创建以下图像：

![在此处输入图像描述](../Images/1bb98ecb88d543970201892025e80ac0.png)

所以基本上，我如何让磁贴链接到动作并且仍然在其中包含所有三个子 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:20:38.140

如果需要，您可以在 上添加一个`onclick="window.location.href='link'"`属性`tile` `<div>`，并对其进行样式设置`cursor: pointer`以使其看起来像一个链接。

例子：

```
<div class="tile" onclick="window.location.href='link'">
    <div class="tile-text">Runs</div>
    <div class="tile-text details">Manage runs, routes, races, and goals</div>
    <div id="runs" class="tile-text live">You have a four mile run today</div>
</div> 
```

或者您可以将其`tile` `<div>`设为`<a>`元素并将其设置为样式`display: block`并包含适当的`width`and `height`，然后将其所有子元素设为`<span>`with `display: block`。

例子：

```
<style type="text/css">
    .tile, .tile-text { display: block; }
    // You could add width and height to .tile if needed.
    // Also, if you want to put tiles next to each other, inline-block for .tile
    // would be more appropriate.
</style>

<a class="tile" href="link">
    <span class="tile-text">Runs</span>
    <span class="tile-text details">Manage runs, routes, races, and goals</span>
    <span id="runs" class="tile-text live">You have a four mile run today</span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:51:30.340

这是 Radu 选项 2 的快速实现。您现在需要做的就是整理它并将内联 css 移动到名为 title 的类的 css 中。

```
<body>  
<a class="tile" href="#" style="width: 200px; height: 300px; background-color: lightblue; display: block;">
    <h3 class="tile-text">Runs</h3>
    <p class="tile-text-details">Manage runs, routes, races, and goals</p>
    <p class="runs" class="tile-text-live">You have a four mile run today</p>
</a>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:21:59.097

您需要将蓝色瓷砖作为实际图像。这个可点击的图像应该放在一个 div 中。

使用 CSS，您可以使用 z-index / 绝对定位将图像放在文本内容后面。

# compilation - eval-when 使用？

> ID：10674650
> 
> 赞同：15
> 
> 时间：2012-05-20T15:17:32.217
> 
> 标签：compilation, macros, lisp, common-lisp, eval-when

在阅读了大量有关 Lisp`eval-when`运算符的文档后，我仍然无法理解它的用途，我知道使用此运算符我可以控制表达式的评估时间，但我无法找出任何适用的示例？

最好的问候，utxeee。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-20T17:07:59.177

**Lisp 文件的编译**

以 Lisp 文件的编译为例。Lisp 编译器处理顶级表单。这些可以是任意的 Lisp 形式、DEFUN、DEFMACROS、DEFCLASS、函数调用……

文件编译器如何工作的整个故事太复杂了，无法在这里解释，但有几件事：

*   文件编译器为`(DEFUN foo () )`表单生成代码。但它不执行 defun 形式。因此在编译过程中知道有一个函数`FOO`，但是在编译过程中没有ˋFOOˋ的代码。编译器为已编译文件生成代码，但不将其保存在内存中。您不能在编译时调用这样的函数。

*   对于宏，这略有不同：`(DEFMACRO BAZ ...)`. 文件编译器不仅会编译宏并注意它的存在，还会使宏在编译时可用。它被加载到编译器*环境中*。

因此想象一下文件中的表单序列：

```
(defmacro baz ...)

(defun foo () (baz ...)) 
```

这是因为文件编译器知道宏`BAZ`，并且当它编译代码时`FOO`，它可以扩展宏形式。

现在让我们看下面的例子：

```
(defun bar (form) ...)

(defmacro baz (form) (bar form))

(defun foo () (baz ...)) 
```

以上将不起作用。现在宏通过调用它来`BAZ`使用该函数。`BAR`当编译器试图编译函数`FOO`时，它无法展开`BAZ`宏，因为`BAR`无法调用，因为代码`BAR`没有加载到编译时环境中。

有两种解决方案：

1.  使用单独的文件更早地编译**和**加载。`BAR`
2.  使用[EVAL-WHEN](http://www.lispworks.com/documentation/HyperSpec/Body/s_eval_w.htm#eval-when)

示例`EVAL-WHEN`：

```
 (eval-when (:compile-toplevel :execute :load-toplevel)
   (defun bar (form) ...)
 )

 (defmacro baz (form) (bar form))

 (defun foo () (baz ...)) 
```

现在`EVAL-WHEN`指示文件编译器在编译期间实际运行 DEFUN 表单。这样做的效果是：文件编译器现在知道`BAR`at *compile time*的定义。因此，当文件编译器需要`BAR`在宏扩展期间调用`BAZ`.

`:compile-toplevel`当编译文件后不需要该功能时，可以使用 only 。如果稍后使用它，那么我们需要确保它被加载。

所以`EVAL-WHEN`允许指定是否应该运行一段特定的代码

*   在编译文件期间
*   在加载文件期间
*   在执行期间

`EVAL-WHEN`在用户代码中不经常使用。如果你使用它，那么你应该问问自己是否真的需要它。

# c# - 确定性监控脉冲/等待并在生产者-消费者集合中实施超时

> ID：10674653
> 
> 赞同：2
> 
> 时间：2012-05-20T15:17:56.717
> 
> 标签：c#, .net, multithreading, .net-4.0, producer-consumer

我正在尝试实现一个支持消费者超时的并发生产者-消费者集合（多个生产者和消费者）。

现在实际的集合非常复杂（不幸的是 System.Collections.Concurrent 中没有任何东西可以完成这项工作），但我在这里有一个最小的示例来演示我的问题（看起来有点像`BlockingCollection<T>`）。

```
public sealed class ProducerConsumerQueueDraft<T>
{
    private readonly Queue<T> queue = new Queue<T>();
    private readonly object locker = new object();

    public void Enqueue(T item)
    {
        lock (locker)
        {
            queue.Enqueue(item);

            /* This "optimization" is broken, as Nicholas Butler points out.
            if(queue.Count == 1) // Optimization
            */
                Monitor.Pulse(locker); // Notify any waiting consumer threads.
        }
    }

    public T Dequeue(T item)
    {
        lock (locker)
        {
            // Surprisingly, this needs to be a *while* and not an *if*
            // which is the core of my problem.
            while (queue.Count == 0)
                Monitor.Wait(locker);

            return queue.Dequeue();
        }
    }

    // This isn't thread-safe, but is how I want TryDequeue to look.
    public bool TryDequeueDesired(out T item, TimeSpan timeout)
    {
        lock (locker)
        {
            if (queue.Count == 0 && !Monitor.Wait(locker, timeout))
            {
                item = default(T);
                return false;
            }

            // This is wrong! The queue may be empty even though we were pulsed!
            item = queue.Dequeue();
            return true;
        }
    }

    // Has nasty timing-gymnastics I want to avoid.
    public bool TryDequeueThatWorks(out T item, TimeSpan timeout)
    {
        lock (locker)
        {
            var watch = Stopwatch.StartNew();
            while (queue.Count == 0)
            {
                var remaining = timeout - watch.Elapsed;

                if (!Monitor.Wait(locker, remaining < TimeSpan.Zero ? TimeSpan.Zero : remaining))
                {
                    item = default(T);
                    return false;
                }
            }
            item = queue.Dequeue();
            return true;
        }
    }
} 
```

这个想法很简单：发现空队列的消费者等待收到信号，而生产者`Pulse`（注意：not `PulseAll`，这将是低效的）通知他们等待项目。

我的问题是这个属性 [`Monitor.Pulse`](http://msdn.microsoft.com/en-us/library/system.threading.monitor.pulse)：

> 当调用 Pulse 的线程释放锁时，就绪队列中的下一个线程**（不一定是被脉冲的线程）**获取锁。

这意味着消费者线程 C1 可以被生产者线程唤醒以消费项目，但*另一个*消费者线程 C2 可以在 C1 有机会重新获取锁之前获取锁，并消费项目，让 C1 与获得控制权时的空队列。

这意味着如果队列确实非空，我必须在每个脉冲上防御性地检查消费者代码，如果不是这种情况，则返回并空手等待。

我的主要问题是它效率低下 - 线程可能会被唤醒以完成工作，然后立即被送回再次等待。与此相关的一个结果是，当它应该是优雅的（请参阅参考资料）时，实现`TryDequeue`具有超时的 a 是不必要的困难和低效（请参阅参考资料）。`TryDequeueThatWorks``TryDequeueDesired`

**我怎样才能扭转`Monitor.Pulse`做我想做的事？或者，是否有另一个同步原语可以做到？`TryDequeue`有没有比我做的更有效和/或更优雅的方式来实现超时？**

仅供参考，这是一个测试，演示了我想要的解决方案的问题：

```
var queue = new ProducerConsumerQueueDraft<int>();

for (int consumer = 0; consumer < 3; consumer++)
    new Thread(() =>
    {
        while (true)
        {
            int item;

            // This call should occasionally throw an exception.
            // Switching to queue.TryDequeueThatWorks should make
            // the problem go away.
            if (queue.TryDequeueDesired(out item, TimeSpan.FromSeconds(1)))
            {
                // Do nothing.
            }
        }

    }).Start();

Thread.Sleep(1000); // Let consumers get up and running

for (int itemIndex = 0; itemIndex < 50000000; itemIndex++)
{
    queue.Enqueue(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:54:04.193

> 我的主要问题是它效率低下

它不是。您认为这是一种常见的情况，但这种比赛*很少*发生。一次在蓝月亮，充其量。while 循环是必要的，以确保它发生时*不会*出错。它会的。不要惹它。

事实上恰恰相反，锁设计是*有效*的，因为它确实允许发生竞争。并处理它。修补锁定设计非常危险，因为比赛发生的频率不够高。它们非常随机，无法进行足够的测试来*证明*更改不会导致失败。添加任何检测代码也不起作用，它会改变时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:59:07.083

这是一个简单的基于键的合并生产者-消费者队列：

```
public class ConflatingConcurrentQueue<TKey, TValue>
{
    private readonly ConcurrentDictionary<TKey, Entry> entries;
    private readonly BlockingCollection<Entry> queue;

    public ConflatingConcurrentQueue()
    {
        this.entries = new ConcurrentDictionary<TKey, Entry>();
        this.queue = new BlockingCollection<Entry>();
    }

    public void Enqueue(TValue value, Func<TValue, TKey> keySelector)
    {
        // Get the entry for the key. Create a new one if necessary.
        Entry entry = entries.GetOrAdd(keySelector(value), k => new Entry());

        // Get exclusive access to the entry.
        lock (entry)
        {
            // Replace any old value with the new one.
            entry.Value = value;

            // Add the entry to the queue if it's not enqueued yet.
            if (!entry.Enqueued)
            {
                entry.Enqueued = true;
                queue.Add(entry);
            }
        }
    }

    public bool TryDequeue(out TValue value, TimeSpan timeout)
    {
        Entry entry;

        // Try to dequeue an entry (with timeout).
        if (!queue.TryTake(out entry, timeout))
        {
            value = default(TValue);
            return false;
        }

        // Get exclusive access to the entry.
        lock (entry)
        {
            // Return the value.
            value = entry.Value;

            // Mark the entry as dequeued.
            entry.Enqueued = false;
            entry.Value = default(TValue);
        }

        return true;
    }

    private class Entry
    {
        public TValue Value { get; set; }
        public bool Enqueued { get; set; }
    }
} 
```

*（这可能需要一两次代码审查，但我认为总的来说这是理智的。）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T16:00:42.200

我写了一篇关于此的文章，可能会有所帮助：

[线程同步：Wait 和 Pulse 揭秘](http://simplygenius.net/Article/WaitPulse)

特别是，它解释了为什么需要`while`循环。

# javascript - Firebug 无法选择脚本

> ID：10674657
> 
> 赞同：4
> 
> 时间：2012-05-20T15:18:39.563
> 
> 标签：javascript, debugging, firebug, inline

我把事情搞砸了。在 firebug 中，我选择 scipts 选项卡，然后单击 inline 并选择我想通过一些断点逐步执行的脚本。我有理由确定我以前用脚本做过这个。

现在，在删除并重新安装 firebug、清除缓存等之后，挠头，当我选择任何脚本时，脚本会短暂显示，然后立即返回到包含脚本的 HTML 页面。如果我很快，当我选择脚本时，我可以向下滚动，当我停止时，它会自行逐行向上滚动，当它到达顶部时，它会返回包含脚本的 HTML 页面

所以从截图来看，下面有一些js脚本（剪掉了，不想分享名字）。我已经尝试使用 now 结果检查和取消检查内联。我感觉这与我对 js 和 web 编程的瑞士奶酪知识有关。

![](../Images/40856f51020ef5f8fba56f427e82c9a3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:46:00.500

我讨厌回答我自己的问题，但我不想让这篇文章不完整，所以感觉要改进答案。除非似乎没有进一步的活动，否则我不打算给自己检查。[我在issue #5134](http://code.google.com/p/fbug/issues/detail?id=5134)发现了一个错误修复，并安装了[此处](http://getfirebug.com/releases/firebug/1.10/firebug-1.10.0a6.xpi)找到的 1.10.0a6 更新，最后一件事是，当我切换下图所示的“Break on next”按钮时，自动滚动停止。（萤火虫下方的黄色暂停按钮。

![在此处输入图像描述](../Images/1c6a44d7af223359985221397b0fe584.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:32:48.150

我不确定如何在不必查看实时站点或一些可能指向某些解释的代码的情况下提供进一步的帮助。但是，这里有一些技巧可能会有所帮助。

我使用带有一个名为 Changes 的选项卡的 Firefox Aurora。或者也许我在某处安装了 Firebug 扩展。我忘了。但是用谷歌搜索，这可能是[Firediff](http://www.incaseofstairs.com/firediff/)。

该选项卡看起来像附加的图像，它将区分页面内的更改，然后您可能会知道发生了什么。它检测元素/属性更改（不确定内联脚本）。

P/s：不知怎的，现在不行了，忘记之前是怎么测试的了。上面的网址对此有更多解释。但一定要检查一下。上次对我有用。

![Firebug 更改扩展选项卡](../Images/7a734cce643b5ea4605cd22ee7ff531c.png)

# java - 使用 Netty 将 websockets 与运行在 tomcat 中的 Spring web 应用程序集成

> ID：10674659
> 
> 赞同：3
> 
> 时间：2012-05-20T15:18:48.397
> 
> 标签：java, spring, tomcat, websocket, netty

我有一个使用 Netty 的 Web 套接字服务器实现（比如监听端口 8081）和一个在 Tomcat 中运行的单独的 Spring Web 应用程序（在端口 80 中运行）。

我想以某种方式将所有到达 localhost:80/Websocket 的请求转发到我的 Netty 服务器的 8081 端口。这可能吗？由于 Tomcat 和 spring 是建立在 http 协议之上的，我想知道这怎么可能。

我想做的就是使用我现有的 spring web 应用程序中的 websocket 启用服务器推送。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:04:55.507

最简单的方法可能是在前面放置一个 nginx 服务器并将请求转发到 /Websockets，但是因为 Websockets 不是 Http 1.0，所以你不能使用普通的 ProxyPass 指令，而是根据[http://www.letseehere.com/ reverse-proxy-web-sockets](http://www.letseehere.com/reverse-proxy-web-sockets)可以通过一个特殊的插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:09:19.537

看看以下 2 个链接，它们展示了如何使用 spring 配置 netty。我已经在 grails 中完成了它，其中一个 netty 套接字服务器在 tomcat 中运行，在特定端口上侦听二进制数据包（不是 http）

[链接1 链接](https://stackoverflow.com/questions/3758970/using-java-nio-framework-in-spring-server/5778212#5778212) [2](https://stackoverflow.com/questions/5727898/how-to-use-netty-from-inside-a-web-app-steps-to-proper-configuration/5793937#5793937)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:41:16.050

为什么不在最新的 Tomcat (7.0.27) 中使用 WebSocket 支持？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T08:40:19.643

Netty 可以处理 HTTP。例如[http://static.netty.io/3.5/xref/org/jboss/netty/example/http/snoop/package-summary.html](http://static.netty.io/3.5/xref/org/jboss/netty/example/http/snoop/package-summary.html)

# sql - 数据库优先和 ORM

> ID：10674661
> 
> 赞同：0
> 
> 时间：2012-05-20T15:18:57.670
> 
> 标签：sql, database, nhibernate, orm

在构建企业解决方案时，数据库架构师制作 ER 模型并使用 SQL 方式创建表、过程、视图、索引等。

是否可以使用 nHibernate 将这种实体映射到类（即 POCO）？或者如何制作自己的绘图工具？

ps 我不想使用 DB first EF 解决方案 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:44:50.790

您可以使用[Visual NHibernate](http://www.slyce.com/)或[NHibernate 映射生成器](http://nmg.codeplex.com/)等工具从数据库生成映射。这些工具并不完美，但它们可以为您完成大部分工作，然后您可以根据需要修改它们生成的映射。

# java - 使用 BufferedOutputStream 通过 while 循环将字节写入文件。需要帮助

> ID：10674665
> 
> 赞同：0
> 
> 时间：2012-05-20T15:19:25.523
> 
> 标签：java, bufferedoutputstream

我正在尝试使用 BufferedOutputStream 将字节写入文件，但我需要它在 while 循环中工作。这意味着使用 TFTP 服务器。它写入的文件中绝对没有任何内容（这是毫无意义的）。谁能帮我这个？

```
 WRQ WRQ = new WRQ();
            ACK ACK = new ACK();
            DatagramPacket outPacket;
            BufferedOutputStream bufferedOutput = new BufferedOutputStream(new FileOutputStream(filename));
            byte[] bytes;
            byte[] fileOut;
            outPacket = WRQ.firstPacket(packet);
            socket.send(outPacket);

            socket.receive(packet);

            while (packet.getLength() == 516){

            bytes = WRQ.doWRQ(packet);
            bufferedOutput.write(bytes);

            outPacket = ACK.doACK(packet);
            socket.send(outPacket);

            socket.receive(packet); 

            }

            bytes = WRQ.doWRQ(packet);
            bufferedOutput.write(bytes);

            outPacket = ACK.doACK(packet);
            socket.send(outPacket); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:20:35.500

完成后，您不会关闭流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:23:31.437

您是否缺少 bufferedOutput.flush() 来清除所有缓冲数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:32:22.283

您将需要使用`BufferedOutputStream`'`flush()`方法，以便写出所有结果。调用该`close()`方法还会执行`flush()`.

[http://www.javapractices.com/topic/TopicAction.do?Id=8](http://www.javapractices.com/topic/TopicAction.do?Id=8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T15:26:44.727

只需尝试关闭您的`BufferedOutputStream`.

添加`bufferedOutput.close();`

如果您不关闭`OutputStream`，您可能会丢失缓冲数据，这可能就是您的情况。要么关闭它，要么冲洗它。

# sql-server - 如何构造 SSIS 表达式？

> ID：10674669
> 
> 赞同：0
> 
> 时间：2012-05-20T15:19:48.640
> 
> 标签：sql-server, ssis

我想在 SQL BDS 中使用派生列，并在派生列中执行以下操作：

1) 如果源列包含 NULL，则将其替换为“未知”

2）如果有值，则将其替换为给定的字符串。

到目前为止，我想出了这个，但我不熟悉这些表达式的语法，而且我不断收到错误：

```
ISNULL(Source) ? "Unknown" :  REPLACE("m", "m", "Pop memories" ), REPLACE("h", "h", "Pop     hits" ), REPLACE("a", "a", "Pop annual" ), REPLACE("y", "y", "Yearbook" ), REPLACE("bs", "bs", "Bestsellers" ) 
```

我很确定问题在于每次替换之间的逗号，但我不知道还能使用什么。有什么建议么？

编辑：

好的，我解决了。显然你必须嵌套 REPLACES 才能让它们像这样工作：

```
ISNULL(Source) ? "Unknown" :  REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(Source, "bs", "Bestsellers" ), "m", "Pop memories" ), "h", "Pop     hits" ) , "a", "Pop annual" ), "y", "Yearbook" ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:59:55.120

我建议不要使用这样的静态表达式。你的问题是，如果你有额外的情况，你必须找到并修改一个越来越复杂的表达式语句。

使用将源代码与描述相匹配的表进行查找转换将是一个更好的解决方案。您可以将查找设置为忽略空值，然后在派生列转换中包含一个简单的表达式，如下所示：

```
ISNULL(Description)?"Unknown":Description 
```

这样，如果您有新的源代码，您只需将它们添加到查找表中，而不必更改任何代码。

# wso2 - 如何一一发送请求？

> ID：10674674
> 
> 赞同：0
> 
> 时间：2012-05-20T15:20:48.140
> 
> 标签：wso2, wso2esb

我有这样的服务。客户端请求是多条记录。例如，客户端请求是：

```
parameter1, parameter2, parameter3, parameter4, parameter5
parameter1, parameter2, parameter3, parameter4, parameter5
parameter1, parameter2, parameter3, parameter4, parameter5
parameter1, parameter2, parameter3, parameter4, parameter5 
```

我需要将这些记录一一发送到实际服务。如何在 WSO2 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:11:52.220

在这种情况下，您可以将标注调解器与迭代调解器一起使用。在迭代中，您可以迭代每组参数，在迭代目标中，您可以使用每组参数对服务进行调用（使用调用调解器）。

您需要在[迭代中介](http://wso2.org/project/esb/java/4.0.3/docs/mediators/iterate.html)器中将顺序参数设置为true，以便一个接一个地调用它。Call Out 调解器调用是阻塞调用。所以它会阻塞直到响应到来。见[标注调解员](http://wso2.org/project/esb/java/4.0.3/docs/mediators/callout.html)

如果您能提供确切的消息格式，我将能够提供更多详细信息。示例消息会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:42:10.077

我假设您的数据格式如下

```
<data>
<record>param1</record>
<record>param2</record>
<record>param3</record>
<record>param4</record>
</data> 
```

如果是这种情况，并且您的要求是一个一个地遍历元素一个一个地发送这些数据。您可以使用 WSO2 ESB 的 iterate mediator 并遍历参数并一一发送。您必须在迭代调解器中将参数“sequential”设置为 true 以使其成为单线程。

见[http://wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Splitter](http://wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Splitter)

干杯，慈善机构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:06:29.130

如果您详细说明您的具体要求，回答会更容易。因此，我假设您的要求是以顺序方式将来自客户端的一些值发送到服务。为此，您可以简单地提取请求中的任何参数（作为使用属性中介的属性），然后使用每个参数顺序调用服务。（发送带有接收序列的中介）

# codeigniter - 为什么我在 jQuery 的自动完成搜索中看不到任何价值

> ID：10674675
> 
> 赞同：3
> 
> 时间：2012-05-20T15:20:49.370
> 
> 标签：codeigniter, jquery, codeigniter-2, codeigniter-url

为什么我从文本输入中看不到任何价值建议。我已经在 J​​SON 和 jQuery 中使用了自动完成代码。但是文本输入中没有显示任何值

书店/views/admin/auto_complete.php

```
<script>
    $('#swSearch').keypress(function () {
        var dataObj = $(this).closest('form').serializeArray();
        $.ajax({
            url: 'http://localhost/boostore/admin_d_book_groups/search',
            data: dataObj,
            dataType: 'json',
            success: function (data) {
                $("#suggestion_tab").html('');
                $.each(data.name, function (a, b) {
                    $("#suggestion_tab").append('<li>' + data.b + '</li>');
                });
                // Display the results
                ///alert(data);
            },
            "error": function (x, y, z) {
                // callback to run if an error occurs
                alert("An error has occured:\n" + x + "\n" + y + "\n" + z);
            }
        });
    });  
</script>
<div id="swSearch">
<form>
    <input type="text" value="" id="swSearch"  class="swSearch" />
</form>
    <div class="suggestion_tab" id="suggestion_tab"></div>

</div> 
```

Admin_d_book_groups 控制器

```
function search(){
        $searchterm = $this->input->post('search_hotel');
        echo json_encode($this->d_book_groups->sw_search($searchterm));
    } 
```

d_book_groups_model

```
function sw_search($searchterm)
    {
         $query = $this->db->order_by("bg_id", "desc")->like('bg_name', $searchterm, 'after')->get('d_book_groups');
        $data = array();
        foreach ($query->result() as $row)
        {
           $data[] = $row->bg_name;
        }
        return $data;             
        //return mysql_query("select * from hotel_submits where name LIKE '".$searchterm."'");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:28:17.307

`$config['compress_output'] = TRUE;`在你的`application/config/config.php`?

如果是，则不能直接从控制器方法输出内容。您必须使用视图。您可以创建一个简单的视图：

```
<?php echo $response; 
```

并像这样传递json数据：

```
function search() 
{
    $searchterm = $this->input->post('search_hotel');
    $data['response'] = json_encode($this->d_book_groups->sw_search($searchterm));
    $this->load->view('ajax/json_response', $data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:24:25.780

我不知道为什么，但你在这段代码中犯了一个错误：

```
$.each(data.name, function (a, b) {
    $("#suggestion_tab").append('<li>' + data.b + '</li>');
}); 
```

您不能在 $.each 方法中使用“data.b”，b 是 data.name 的对象以获得更多帮助，实际上“b”等于 data.name[a] (data.name[a] == b)

所以 data.b 是假的， (data.name[a] == b) && data.name[a] != data.b

在 $.each 循环中使用 console.log(b) 来查看你的数组对象（你需要 firefox 和 firebug 扩展）

```
$.each(data.name, function (a, b) {
    console.log(b);
}); 
```

我认为您想将每个名称放在 li 元素中，如果为真，请使用以下代码：

```
$.each(data, function (a, b) {
    $("#suggestion_tab").append('<li>' + b.name + '</li>');
}); 
```

// 这里 b.name == data[a].name

# java - 一次合并3个子数组

> ID：10674676
> 
> 赞同：0
> 
> 时间：2012-05-20T15:20:51.470
> 
> 标签：java, arrays, merge, divide-and-conquer

我正在制作一个实现合并排序算法的程序，但不是每次将它们分成两部分，而是每次将它们分成三部分并递归地对它们进行合并排序。万一我把你弄糊涂了，它基本上是一个归并排序，但不是用 2 个部分归并排序，而是每次归并排序 3，听起来很有趣吧？那么它绝对不是。

这是我的合并排序实现：

```
public static void mergesort(int[] data) {
    int elements = data.length;
    int sizeLeft;
    int sizeCenter;
    int sizeRight;

    if (elements > 2) {

        if (elements % 3 == 0) {
            sizeLeft = elements / 3;
            sizeCenter = elements / 3;
            sizeRight = elements / 3;
        } else if (elements % 3 == 1) {
            sizeLeft = (elements / 3) + 1;
            sizeCenter = elements / 3;
            sizeRight = elements / 3;
        } else { //if (elements % 3 == 2)
            sizeLeft = (elements / 3) + 1;
            sizeCenter = elements / 3;
            sizeRight = (elements / 3) + 1;
        }

        int[] left = makeArray(data, 0, sizeLeft);
        int[] center = makeArray(data, sizeLeft, sizeCenter);
        int[] right = makeArray(data, sizeLeft + sizeCenter, sizeRight);

        mergesort(left);
        mergesort(center);
        mergesort(right);

        merge(data, left, center, right);
    }
} 
```

这是合并方法：

```
public static void merge(int[] data, int[] left, int[] center, int[] right) {
    int[] temp = new int[left.length + center.length + right.length];
    int copiedTotal = 0;
    int copiedLeft = 0;
    int copiedCenter = 0;
    int copiedRight = 0;

    while ((copiedLeft < left.length)
            && (copiedCenter < center.length)
            && (copiedRight < right.length)) {

        if ((left[copiedLeft] < center[copiedCenter])
                && (left[copiedLeft] < right[copiedRight])) {

            temp[copiedTotal++] = left[(copiedLeft++)];
        } else if ((center[copiedCenter] < left[copiedLeft])
                && (center[copiedCenter] < right[copiedRight])) {
            temp[copiedTotal++] = center[copiedCenter++];
        } else {
            temp[copiedTotal++] = right[copiedRight++];
        }
    }

    while ((copiedLeft < left.length) && (copiedCenter < center.length)) {
        if (left[copiedLeft] < center[copiedCenter]) {
            temp[copiedTotal++] = left[copiedLeft++];
        } else{
            temp[copiedTotal++] = center[copiedCenter++];
        }
    }

    while ((copiedLeft < left.length) && (copiedRight < right.length)) {
        if (left[copiedLeft] < right[copiedRight]) {
            temp[copiedTotal++] = left[copiedLeft++];
        } else{
            temp[copiedTotal++] = right[copiedRight++];
        }
    }

    while ((copiedCenter < center.length) && (copiedRight < right.length)) {
        if (center[copiedCenter] < right[copiedRight]) {
            temp[copiedTotal++] = center[copiedCenter++];
        } else{
            temp[copiedTotal++] = right[copiedRight++];
        }
    }

    while (copiedLeft < left.length) {
        temp[copiedTotal++] = left[copiedLeft++];
    }

    while (copiedCenter < center.length) {
        temp[copiedTotal++] = center[copiedCenter++];
    }

    while (copiedRight < right.length) {
        temp[copiedTotal++] = right[copiedRight++];
    }
    System.arraycopy(temp, 0, data, 0, left.length + center.length + right.length);
//        for (int i = 0; i < data.length; i++) {
//            if ((copiedRight >= right.length) && (copiedCenter >= center.length)) {
//                data[i] = left[copiedLeft];    // take from left
//                copiedLeft++;
//            } else if ((copiedRight >= right.length) && (copiedLeft >= left.length)) {
//                data[i] = center[copiedCenter];    // take from left
//                copiedCenter++;
//            } else if ((copiedCenter >= center.length) && (copiedLeft >= left.length)) {
//                data[i] = right[copiedRight];    // take from left
//                copiedRight++;
//            } else if ((copiedLeft < left.length
//                    && left[copiedLeft] <= right[copiedRight])
//                    && left[copiedLeft] <= center[copiedCenter]) {
//
//                data[i] = left[copiedLeft];    // take from left
//                copiedLeft++;
//
//            } else if ((copiedRight >= right.length) && (copiedLeft >= left.length)
//                    || (copiedCenter < center.length
//                    && center[copiedCenter] <= right[copiedRight])
//                    && center[copiedCenter] <= left[copiedLeft]) {
//
//                data[i] = center[copiedCenter];    // take from center
//                copiedCenter++;
//            } else {
//                data[i] = right[copiedRight];
//                copiedRight++;// take from center
//            }
//
//        }
    }
} 
```

在合并方法内部的评论中，我尝试制作另一种合并方法，但结果并不好，事情变得更加复杂，但我把它留在那里以供参考。

问题是这根本不起作用，例如，如果我有：

输入：6 5 4 3 2 1

然后我会有：

输出：[2、1、4、3、6、5]

老实说，我为此非常努力，连续 2 天，我发现只有两个人甚至听说过这种合并排序，在谷歌搜索数小时后，我在这里只发现了一个类似的问题（这太复杂了，难以理解）和另一个线程在从未回答过的维基答案中。

任何帮助将不胜感激，当然我不是要求直接解决方案，因为我正在努力学习，但是提示和提示以及我做错了什么会对我有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:45:43.847

似乎问题在于，当您有一个 2 元素数组时，您不会对它做任何事情。你应该对其进行排序。如果你举个例子：[6,5,4,3,2,1]，在递归的第二步你有[2,1]；[4,3] 和 [6,5] 并像这样合并它们。如果您先对它们进行排序，您将获得正确的顺序。为了在合并功能中对它们进行排序，您应该添加：

```
if ((elements==2)&&(data[1]<data[0])){
 int aux = data[1];
 data[1] = data[0];
 data[0] = aux; 
```

}

希望能帮助到你。

**更新**

如果你想要一个纯粹的合并排序，你可以尝试（正如我在评论中解释的那样）添加以下代码：

```
if (elements==2){
 int[] center = [];
 int[] left = makeArray(data,0,1);
 int[] right =makeArray(data,1,1);

 mergesort(left); //you can call these methods or not, on a empty or 1 element array they dont have an effect
 mergesort(center);
 mergesort(right);

 merge(data, left, center, right); //it should work well when center is an empty array 
```

}

**更新 2** 你可以重构我展示的代码，让它看起来很漂亮。基本思想是您可以在 Java 中拥有一个空数组，并且您的合并函数可以正确处理它。希望我的观点更清楚一点。

# php - 使用 PHP 和 GD 在图像上写入文本

> ID：10674678
> 
> 赞同：1
> 
> 时间：2012-05-20T15:21:03.083
> 
> 标签：php, image, gd, watermark

我的网站有一个图片生成器。它允许访问者在图像上编写自定义文本。

我通过显示图片和使用 Javascript 来处理这种情况，因此他们可以在图片上书写（预览图片的外观）。在他们按下提交后，我得到 x&y 坐标、文本和字体大小。

（我也支持多种字体大小）

为了在图像上写入文本，我使用**ImageTTFText**函数。

好的，到目前为止一切都很好。现在我遇到的问题是如何知道句子何时太长而无法放在一行中。我遇到了**wordwrap**功能，但它不可靠。它根据字符数拆分句子。但是，例如，如果您输入十次“I”和十次“D”，您会发现宽度有所不同。

好的，然后我遇到了**ImageTTFBBox**，它会计算盒子的大小，所以我会知道它什么时候太长。好吧，这很好，但是那我怎么能拆分句子呢？（通过文字）。

如果有人能给我答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:40:44.937

我的逻辑是在每一行中添加尽可能多的单词，而不必删减一个单词。所以，我会在一行中添加一个单词，用 来检查它的渲染大小`ImageTTFBBox()`，然后重复直到行溢出（然后明显删除导致溢出的单词）。如果遇到行溢出的情况，一行只有一个字，那你就必须剪掉这个字。你会打电话`ImageTTFBBox()`很多很多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:18:52.960

如果您使用的是 HTML5，您可以在发送之前请求 Javascript 给您一些帮助。假设你有一个画布（甚至是在代码中创建的）和一个`ctxt`你可以做的上下文：

```
ctxt.font = "14pt Arial";
ctxt.textAlign = "left";
ctxt.fillStyle = "#000";
ctxt.fillText(text, x, y);
var metrics = ctxt.measureText(text);
var width = metrics.width; 
```

现在您知道您的文本有多宽，并且可以进行一些基本的自动换行。假设您的有效宽度（图像宽度减去内边距）为 180 像素，文本宽度为 679 像素。这是一个 +/- 25% 的比率 (26.05%)。使用该比率提取句子的前 25%，查看它是否适合宽度，绘制并向下移动一行。

# git - hg/mercurial 和 git 之间的哈希冲突？

> ID：10674680
> 
> 赞同：2
> 
> 时间：2012-05-20T15:21:12.853
> 
> 标签：git, mercurial

我正在考虑使用相同的数据库模型来表示混合设置中的 git 和 hg 变更集。那将允许我将 git-vs-hg 存储在存储库中。

我想知道，在 hg 和 git 算法之间是否存在已知的重叠，这会使两者之间的冲突比单独在 hg 和 git 中更容易发生冲突？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T15:29:31.320

你会好起来的。

他们都（目前）使用 SHA-1。由于 API 公开的哈希只是其十六进制表示，因此不会有额外的风险 - 这直接来自加密哈希的属性。

换句话说 - 在计算哈希之前使用什么处理并不重要。一旦数据通过散列，它们在统计意义上就会变得“统一”。*事后*处理可能会影响事情，但是，据我所知，没有后处理（SHA-1 生成 160 位或 20 字节 - git 和 mercurial 哈希都是 40 个字符的十六进制字符串，正如预期的那样）

# jquery - 根据屏幕大小调整 .resize 类的大小

> ID：10674681
> 
> 赞同：0
> 
> 时间：2012-05-20T15:21:32.570
> 
> 标签：jquery, screen-size

我有当前有效的代码

```
jQuery.event.add(window, "load", resizeFrame);
jQuery.event.add(window, "resize", resizeFrame);

function resizeFrame() 
{
var w = $(window).width();
$('.resize').css('width', (w <= 1680) ? 1680 : 1920);
} 
```

但现在我需要添加其他屏幕尺寸，例如：

```
$('.resize').css('width', (w <= 1280) ? 1280 : 1920);
$('.resize').css('width', (w <= 1024) ? 1024 : 1920); 
```

但我不确定如何将这些链接在一起，我尝试使用 || 但这没有用

帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:29:24.903

```
function resizeFrame() {
  var height = $(window).height(),
      width  = $(window).width(),
      resizeWidth;

  if (width <= 1024) {
    resizeWidth = 1024;
  } else if (width <= 1280) {
    resizeWidth = 1280;
  } else if (width <= 1680) {
    resizeWidth = 1680;
  } else {
    resizeWidth = 1920;
  }

  $('.resize').css('width', resizeWidth);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:32:06.083

```
$('.resize').css('width', function() {
  var width = 1920;
  if(w <= 1680 && w > 1280) {
    width = 1680;
  } else if(w <= 1280 && w > 1024) {
     width = 1280;
  } else if(w <= 1024) {
     width = 1024;
  }
  return width;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T16:00:22.950

它不像 if/else 那样可读，但您可以将一个三元组插入另一个三元组，然后执行以下操作：

```
$(window).on('resize', function() {
    var w = $(this).width(),
        width = w <= 1024 ? 1024 : w <= 1280 ? 1280 : w <= 1680 ? 1680 : 1920;
    $('.resize').css('width', width);
} 
```

# .net - 如何使用 Microsoft.Office.Interop.Word 以编程方式将文本框添加到另一个页面

> ID：10674682
> 
> 赞同：3
> 
> 时间：2012-05-20T15:21:33.653
> 
> 标签：.net, vb.net, interop, ms-word, office-interop

我可以使用以下代码将文本框插入 Word 文档：

```
Dim opProcedures As Word.Shape
opProcedures = oDoc.Shapes.AddTextbox(Microsoft.Office.Core.MsoTextOrientation.msoTextOrientationHorizontal, 0, 0, 456.75, 24.75)
opProcedures.TextFrame.TextRange.Text = "Operational Procedures" 
```

这会在文档的第一页添加一个文本框，但是即使我更改第一个（顶部）参数，我也无法将文本框移动到第二页（仅低于第一页，任何大于高度的值第一页消失）。

如何让文本框出现在文档的第二页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:49:02.143

您要么必须提供缺少的锚参数，使用代表第二页上的文本的范围（请参阅`AddTextBox`此处的文档：）

[http://msdn.microsoft.com/en-us/library/aa171543%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/aa171543%28v=office.11%29.aspx)

或者您必须在调用之前将活动选择移动到第二页`AddTextBox`。

# java - 从其他活动触发异步任务？

> ID：10674683
> 
> 赞同：0
> 
> 时间：2012-05-20T15:21:40.067
> 
> 标签：java, android, android-asynctask, android-activity

如何从我的主要活动中触发另一个活动中包含的 AsyncTasks？

```
public class DatabaseActivity extends Activity {
    private class DbReader extends AsyncTask<..> {
        @Override
        protected List<MyData> doInBackground(..) {
            //execute query etc
        }
    }

    private class DbSaver extends AsyncTask<..> {
        @Override
        protected void doInBackground(MyData data) {
            //save to dn
        }
    }

    private class DbRemover extends AsyncTask<..> {
        @Override
        protected void doInBackground(MyData data) {
            //remove in db
        }
    }
} 
```

如何从 MyApplication 触发扩展 Activitiy？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:28:48.693

我觉得你应该`use seperate class where AsyncTask is alone.`

当您的应用程序需要多个 AsyncTask 时，您应该使用单独的 AsyncTask 并调用它。

```
private class CommonTask extends AsyncTask<..> {
   public CommonTask(Foo foo){

       } 

        @Override
        protected void doInBackground(MyData data) {
            //remove in db
        }
    } 
```

不，您可以为构造函数传递不同的值，并从 Activity 中检查您想要的数据保存或删除或其他任何内容...

# django - 使用 through 过滤 ManyToManyField

> ID：10674687
> 
> 赞同：2
> 
> 时间：2012-05-20T15:21:56.700
> 
> 标签：django

我有模型：

```
class Player(models.Model) :
    ...
    teams = models.ManyToManyField("Team", through="PlayerTeam")

class Team(models.Model) :
    ...
    players = models.ManyToManyField("Player", through="PlayerTeam")

class PlayerTeam(models.Model) :
    player = models.ForeignKey(Player)
    team = models.ForeignKey(Team)
    date_begin = models.DateField()
    date_end = models.DateField(blank=True, null=True) 
```

我想获得所有在选定球队中比赛的球员（date_end 为空）。我试过这个：

```
team = get_object_or_404(Team, pk=id)
players = team.players.filter(date_end__isnull=True) 
```

但它不起作用，因为字段 'date_end' 不在 Player 模型中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:41:35.253

用这个：

```
players = team.playerteam_set.filter(date_end__isnull=True).values_list('player', flat=True) 
```

# java - 在 APi7 中使用内置的 android attr？

> ID：10674695
> 
> 赞同：1
> 
> 时间：2012-05-20T15:22:45.853
> 
> 标签：java, android

如何`?android:attr/`在 API 7 中使用 xml 元素？对于 API 15，它按预期工作，但较旧的会抛出错误。

```
<TextView
    ...
        android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
        android:paddingRight="?android:attr/listPreferredItemPaddingRight"
        android:minHeight="?android:attr/l  istPreferredItemHeightSmall" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:35:24.950

我认为这些是在`ICS`(14) 中引入的，因此您不能在以前版本的`Android`. 您可以随时查看它们指向的值（或引用）并直接在您的设备上使用它们，`Views`并为不同版本的 android 提供不同的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:40:43.627

如果您的目标是最低 API 级别 7，但取决于 API 15 的支持，这在很多情况下都不起作用。

现在已经说过，有一些属性可以在较低和较高 API 之间很好地转换，但很多都依赖于相应的 API 支持，因此您必须对此进行测试。

我的方法是选择我最低的 API，但使用更高的 API 构建并包含对较低 API 的支持包，从而提供一些更高级别的支持（例如片段）

要查看是否会遇到任何问题，您可以在清单中将最低 API 设置为 7，并在项目的 android 属性中添加 API 15。

然后使用 API 7 构建并部署到模拟器，如果效果很好，否则您将需要找到一种不同的方法来完成您想要完成的工作以支持这两个平台。

您还可以为不同的 API 级别创建不同的布局，您还可以在运行时检查某个类/方法在使用之前是否受支持，但这会给您的代码增加很多开销。

这需要小心，因为它很容易包含，并且 API 无法在您选择支持的最低级别上工作，但会错过在您的模拟器测试中得到锻炼的机会。

当我觉得我必须这样做时，我的方法是使用最低的 API 级别（项目中的 API 属性）进行编译，并确保所有这些情况都是已知的，并通过版本控制布局在代码中处理，或者被理解并已被执行

然后切换回更高的 API，您必须自律地执行此操作，否则可能会在发布时面临崩溃的风险，老实说，这通常不值得付出努力，因为您几乎总能找到 x-api 工作，但每种情况都不同。

# php - 为什么我不能以这种方式显示图像？

> ID：10674696
> 
> 赞同：0
> 
> 时间：2012-05-20T15:22:51.733
> 
> 标签：php, image, joomla

**已解决：我使用了文件夹的相对路径。**

请帮助我理解为什么我不能以这种方式在 Joomla 中显示图像：

```
$path= JURI::root();

$previewImgPath = $path.'images'.DS.'folder'.DS.'images'.DS.$id.'/folder'; 
```

我有：

```
Warning: opendir(http://www.domain.com/joomla/images/folder/images/4/folder/)    [function.opendir]: failed to open dir: not implemented in ... on line 61 
```

使用 PHP 显示图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:29:40.817

`JURI::root()`返回站点的基本*URL*。要获取站点的基本*路径，请改用*[`JPATH_BASE`相应版本的或等效版本](http://docs.joomla.org/How_to_find_your_absolute_path)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:27:27.257

您必须使用目录的相对路径，例如`images/folder/images/4/folder/`. opendir() 不适用于 HTTP 资源。

尝试这个：

```
$path= JURI::base();

$previewImgPath = $path.'images'.DS.'folder'.DS.'images'.DS.$id.'/folder'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:27:40.190

您无法使用 HTTP 打开目录。

使用类似的东西：

```
opendir($_SERVER['DOCUMENT_ROOT'].'/joomla/images/folder/images/4/folder/'); 
```

# authentication - Postfix dovecot SASL smtp auth

> ID：10674701
> 
> 赞同：0
> 
> 时间：2012-05-20T15:24:06.807
> 
> 标签：authentication, smtp, postfix-mta, sasl, dovecot

[我按照教程https://help.ubuntu.com/community/PostfixDovecotSASL](https://help.ubuntu.com/community/PostfixDovecotSASL)配置了我的电子邮件服务器

现在当我 telnet myserver.com 25 ehlo localhost

输出是

250-流水线 250-SIZE 10240000 250-VRFY 250-ETRN 250-STARTTLS 250-AUTH 普通登录 250-AUTH=普通登录 250-ENHANCEDSTATUSCODES 250-8BITMIME 250 DSN

===== 根据教程，“250-AUTH PLAIN LOGIN ,50-AUTH=PLAIN LOGIN”行意味着我正确配置了 myserver。但是我仍然在没有 auth login 的情况下发送了电子邮件。

真奇怪 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T03:01:00.370

如果您在其中声明了子网，则可以在没有身份验证的情况下发送邮件

$sudo postconf mynetworks

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:44:47.697

就像 ekini 说的那样，查看你的 main.cf 配置文件，看看 mynetworks 参数是否设置为 localhost（或 127.0.0.0/8 例如），这通常是这种情况发生的情况。

```
 mynetworks = 127.0.0.0/8 
```

这也应该设置为yes：

```
smtpd_sasl_auth_enable = yes 
```

尝试从其他地方连接...

# .htaccess - .htaccess 子域创建

> ID：10674707
> 
> 赞同：2
> 
> 时间：2012-05-20T15:24:58.083
> 
> 标签：.htaccess, subdomain

如果我在 .htaccess 中使用以下代码，我会创建哪些文件夹？我正在尝试建立一个网站制作网站，但子域创建部分让我很难过，这是代码：

```
#RewriteCond %{HTTP_HOST} !^www [NC]
#RewriteCond %{HTTP_HOST} ^(.+)\.mydomain\.com$ [NC]
#RewriteCond %{REQUEST_URI} !^/subdomains
#RewriteRule ^(.*) %{HTTP_HOST}$1
#RewriteRule ^(.*)\.mydomain\.com(.*) /subdomains/$1/$2

#RewriteCond %{HTTP_HOST} !^www [NC]
#RewriteCond %{HTTP_HOST} ^(.+)\.mydomain\.com$ [NC]
#RewriteCond %{REQUEST_URI} ^/subdomains
#RewriteRule ^(.*) %{HTTP_HOST}$1
#RewriteRule user/a.x /subdomains/index.php?a.x

#--------------
Options +FollowSymLinks
RewriteEngine on

RewriteRule user/(.*)/(.*) showpage.php?user=$1&page=$2 [nc] 
```

那么它会是一个用户文件夹吗？子域文件夹？使困惑 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:09:31.310

我认为你可以使用这样的代码：

```
RewriteCond %{HTTP_HOST} sub.domain.com $ [NC]
RewriteCond %{REQUEST_URI} !/sub/
RewriteRule ^(.*)$ sub/ [L]
RewriteCond %{HTTP_HOST} !(^domain.com $|^www.domain.com $) [NC]
RewriteRule ^\.*$ /error.html [L] 
```

这将是强大的......但也许它可以做得更好？

另一个答案可以在这里列出： [htaccess subdomain](https://stackoverflow.com/questions/5445978/htaccess-subdomain)

# ios - iOS 所需的 Windows Phone 7 页面转换/翻转卡片动画

> ID：10674713
> 
> 赞同：0
> 
> 时间：2012-05-20T15:25:45.313
> 
> 标签：ios, windows-phone-7, animation

我想为 iOS 应用程序实现与 Windows Phone 7 相同的翻牌动画。

在从一个页面导航到另一个页面时，它会从左到右位置逐个加载小部件。

如何为 iOS 实现相同的动画？

这是参考：[http ://www.youtube.com/watch?v=cVRT_KbYzHI](http://www.youtube.com/watch?v=cVRT_KbYzHI)

请帮助发布一些示例代码或其他提供的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:30:23.843

你可以使用 UIView 的 animateWithDuration:delay:options:animations:completion: 方法来实现这样的动画。文档在这里；搜索函数名：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

基本上你需要将你想要动画的视图放在一个循环中，每次将延迟增加 x 量。

# tcp - NSStream 每次关闭时都不会调用它的委托

> ID：10674714
> 
> 赞同：1
> 
> 时间：2012-05-20T15:25:52.763
> 
> 标签：tcp, connection, ssl, nsstream, cfstream

我有几个 NSStreams（进出 TLS）到服务器，我可以通过它们发送和接收数据就好了，但是在没有任何流量的情况下过了一段时间，可能 5 分钟后，连接似乎自行关闭，但我的代表确实没有用 NSStreamEventEndOccurred 调用，我只在尝试发送内容后得到 NSStreamEventErrorOccurred。

首先，连接不应该自行关闭，因为

-app 仍然处于活动状态

-设备未锁定

-它正在使用的wifi不会断开连接

- 远程服务器具有较长的 tcp 生命周期和 SO_KEEPALIVE 标志处于活动状态，iPhone 端在其本机套接字句柄上也处于活动状态。

尽管如此，我更关心为什么我的代表没有被调用而不是我的连接被关闭。

有任何想法吗？

谢谢

# debugging - 强制包的功能使用用户提供的功能

> ID：10674716
> 
> 赞同：7
> 
> 时间：2012-05-20T15:26:02.763
> 
> 标签：debugging, r

我遇到了一个`MNP`包问题，我追踪到一个不幸的调用`deparse`（其最大宽度限制为 500 个字符）。

**背景（如果您感到无聊，可以轻松跳过）**

因为`mnp`使用某种特殊的语法来允许不同的选择集（您包括在公式定义中），所以当调用它`cbind(choiceA,choiceB,...)`时，我的公式调用的左侧是 1700 个字符左右。由于最多支持500 个字符，因此in 中的行作为其第一个元素：`model.matrix.default``deparse``deparse``width.cutoff``sapply(attr(t, "variables"), deparse, width.cutoff = 500)[-1L]``model.matrix.default`

```
[1] "cbind(plan1, plan2, plan3, plan4, plan5, plan6, plan7, plan8, plan9, plan10, plan11, plan12, plan13, plan14, plan15, plan16, plan17, plan18, plan19, plan20, plan21, plan22, plan23, plan24, plan25, plan26, plan27, plan28, plan29, plan30, plan31, plan32, plan33, plan34, plan35, plan36, plan37, plan38, plan39, plan40, plan41, plan42, plan43, plan44, plan45, plan46, plan47, plan48, plan49, plan50, plan51, plan52, plan53, plan54, plan55, plan56, plan57, plan58, plan59, plan60, plan61, plan62, plan63, "       
[2] "    plan64, plan65, plan66, plan67, plan68, plan69, plan70, plan71, plan72, plan73, plan74, plan75, plan76, plan77, plan78, plan79, plan80, plan81, plan82, plan83, plan84, plan85, plan86, plan87, plan88, plan89, plan90, plan91, plan92, plan93, plan94, plan95, plan96, plan97, plan98, plan99, plan100, plan101, plan102, plan103, plan104, plan105, plan106, plan107, plan108, plan109, plan110, plan111, plan112, plan113, plan114, plan115, plan116, plan117, plan118, plan119, plan120, plan121, plan122, plan123, "
[3] "    plan124, plan125, plan126, plan127, plan128, plan129, plan130, plan131, plan132, plan133, plan134, plan135, plan136, plan137, plan138, plan139, plan140, plan141, plan142, plan143, plan144, plan145, plan146, plan147, plan148, plan149, plan150, plan151, plan152, plan153, plan154, plan155, plan156, plan157, plan158, plan159, plan160, plan161, plan162, plan163, plan164, plan165, plan166, plan167, plan168, plan169, plan170, plan171, plan172, plan173, plan174, plan175, plan176, plan177, plan178, plan179, "
[4] "    plan180, plan181, plan182, plan183, plan184, plan185, plan186, plan187, plan188, plan189, plan190, plan191, plan192, plan193, plan194, plan195, plan196, plan197, plan198, plan199, plan200, plan201, plan202, plan203, plan204, plan205, plan206, plan207, plan208, plan209, plan210, plan211, plan212, plan213, plan214, plan215, plan216, plan217, plan218, plan219, plan220, plan221, plan222, plan223, plan224, plan225, plan226, plan227, plan228, plan229, plan230, plan231, plan232, plan233, plan234, plan235, "
[5] "    plan236, plan237, plan238, plan239, plan240, plan241, plan242, plan243, plan244, plan245, plan246, plan247, plan248, plan249, plan250, plan251, plan252, plan253, plan254, plan255, plan256, plan257, plan258, plan259, plan260, plan261, plan262, plan263, plan264, plan265, plan266, plan267, plan268, plan269, plan270, plan271, plan272, plan273, plan274, plan275, plan276, plan277, plan278, plan279, plan280, plan281, plan282, plan283, plan284, plan285, plan286, plan287, plan288, plan289, plan290, plan291, "
[6] "    plan292, plan293, plan294, plan295, plan296, plan297, plan298, plan299, plan300, plan301, plan302, plan303, plan304, plan305, plan306, plan307, plan308, plan309, plan310, plan311, plan312, plan313)" 
```

当`model.matrix.default`针对 data.frame 中的变量进行测试时，它会返回一个错误。

**问题**

为了解决这个问题，我编写了一个新`deparse`函数：

```
deparse <- function (expr, width.cutoff = 60L, backtick = mode(expr) %in% 
  c("call", "expression", "(", "function"), control = c("keepInteger", 
                                                        "showAttributes", "keepNA"), nlines = -1L)  {
    ret <- .Internal(deparse(expr, width.cutoff, backtick, .deparseOpts(control), nlines))
    paste0(ret,collapse="")
  } 
```

但是，当我`mnp`再次运行并逐步执行时，它会出于相同的原因返回相同的错误（`base::deparse`正在运行，而不是我的`deparse`）。

这对我来说有点令人惊讶，因为我期望这个例子更典型，其中用户定义的函数暂时覆盖了基本函数：

```
> print <- function() {
+   cat("user-defined print ran\n")
+ }
> print()
user-defined print ran 
```

我意识到解决这个问题的正确方法是重写`model.matrix.default`，但作为调试工具，我很好奇如何强制它使用我的`deparse`以及为什么预期的（由我）的行为在这里没有发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T16:08:35.293

提供的功能`fixInNamespace`和`assignInNamespace`允许编辑现有功能。你可以试试......但我*不会*因为`deparse`看起来太危险了：

```
 assignInNamespace("deparse", 
                  function (expr, width.cutoff = 60L, backtick = mode(expr) %in% 
               c("call", "expression", "(", "function"), control = c("keepInteger", 
               "showAttributes", "keepNA"), nlines = -1L)  {
    ret <- .Internal(deparse(expr, width.cutoff, backtick, .deparseOpts(control), nlines))
    paste0(ret,collapse="")
                         }   , "base") 
```

帮助页面上有指示使用此类功能有限制，我不会对此类核心功能可能有额外的保护层感到惊讶。由于它通过副作用起作用，因此您不需要分配结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T15:56:50.900

这就是带有命名空间的包搜索函数的方式，如[第 1.6 节，](http://cran.r-project.org/doc/manuals/R-exts.html#Package-namespaces)[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)的包命名空间中所述

> 命名空间在加载后即被密封。密封意味着不能更改导入和导出，也不能更改内部变量绑定。密封允许命名空间机制的更简单的实现策略。密封还允许代码分析和编译工具准确地识别对应于函数体中的全局变量引用的定义。
> 
> 命名空间控制包中函数使用的变量的搜索策略。如果在本地没有找到，R 首先搜索包命名空间，然后是导入，然后是基本命名空间，然后是正常搜索路径。

# jquery - jQuery 代码以意想不到的方式进行

> ID：10674718
> 
> 赞同：2
> 
> 时间：2012-05-20T15:26:12.933
> 
> 标签：jquery, jquery-animate

由于某种原因，代码的行为很奇怪。这发生在 If Else 函数中。在 Else 部分，它应该在 1000 毫秒内淡出，然后删除该类，然后继续下一条语句。但显然第二个语句首先被调用，它使一切变得糟糕。:( 。

```
$(function() {

$(document).click(function(e) {
    if((e.target.id == 'RWorld') || (e.target.id == 'abc'))
    { 
    $(".sborder").fadeOut(1000, function() {

    $(".sborder").removeClass("sborder");
    });
    }

});

$("div#inner").children().click(function() {

//$("div#inner .sborder").removeClass("sborder");

var name = $(this).attr('id');

//alert($("div#inner").find("div").hasClass("sborder"));
if($(".sub"+name).hasClass("sborder"))
{
    $(".sub"+name).fadeOut(300, function() {
    $(".sub"+name).removeClass("sborder");
    });
}
else
{

    $(".sborder").fadeOut(1000, function() { 
    $(".sborder").removeClass("sborder");});       // The Problem is in here. This piece of Code doesnt work exactly as i thought it would ...

    $(".sub"+name).addClass("sborder").fadeIn(1000);

}
});
}); 
```

请帮忙 ：（。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:30:45.103

你的代码：

```
$(".sborder").fadeOut(1000, function() { 
$(".sborder").removeClass("sborder");});
$(".sub"+name).addClass("sborder").fadeIn(1000); 
```

使用正确的缩进：

```
$(".sborder").fadeOut(1000, function() { 
    $(".sborder").removeClass("sborder");
});
$(".sub"+name).addClass("sborder").fadeIn(1000); 
```

你可能想要的：

```
$(".sborder").fadeOut(1000, function() { 
    $(".sborder").removeClass("sborder");
    $(".sub"+name).addClass("sborder").fadeIn(1000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:47:49.740

您可能希望淡入与淡出同时发生，对吗？在这种情况下，您需要像这样缓存查询结果：

```
var $sborder = $(".sborder");
$sborder.fadeOut(1000, function() {
    $sborder.removeClass("sborder");
});
$(".sub" + name).addClass("sborder").fadeIn(1000); 
```

您的问题是 removeClass("sborder") 正在删除您添加到 $(".sub" + name) 的 sborder 类，因为它发生在 1 秒后。换句话说，事情发生的顺序如下：

1.  开始淡出目前有一类“sborder”的东西
2.  将“sborder”类添加到 $(".sub" + name)
3.  开始淡入 $(".sub" + name)
4.  在第 1 项之后 1 秒。开始淡出从**现在**具有“sborder”类的每个元素中删除“sborder”类，该类现在包括由于第 2 项而由 $(".sub" + name) 返回的每个元素。

在最佳实践说明中，使用 jQuery 时...

*   只要有可能，请尝试始终**从具有 id 或标记**名 ( $('#container .sborder') ) 的内容中向下钻取。在旧浏览器中按类搜索**可能会**非常慢，添加一些上下文意味着 jQuery 不必搜索整个文档。
*   只要有可能，尽量**缓存您的查询结果**。每次调用 $('.something') 时，它都会查询 DOM。因此，如果您将结果缓存在一个变量中，则只需进行一次查询。显然，只有在您知道 DOM 在此期间没有更改时才这样做。在我们的例子中，我们知道 DOM 发生了变化，但我们只想影响一秒钟前有“sborder”的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:56:14.807

```
$(".sborder").fadeOut(1000, function() { 
    $(this).removeClass("sborder"); // $(this) is enough to refer to current $('.sborder')
    $(".sub"+name).addClass("sborder").fadeIn(1000);
}); 
```

# sql-server - 一对多动态数据库关系问题

> ID：10674720
> 
> 赞同：0
> 
> 时间：2012-05-20T15:26:29.147
> 
> 标签：sql-server, database, tsql, database-design, relational-database

我只需要一些确认是这样设计的数据库是否可以。如果不是我在这里做错了什么。
我有以下表格：

```
TableA{TableAID,...}
TableB{TableBID,...}
TableC{TableCID,...}
etc. 
```

我有一张桌子，我用它就像某种“新闻提要”。当我在任何表 A、B、CI 中添加内容时，也会在此表中添加行。

```
Feed{FeedID, TypeID, ReferenceID,...} 
```

`FeedID`是 PK 自动增量
`TypeID`是引用类型表的数字，并且基于此 ID，我知道此表中的行来自表 A、B、C。
`ReferenceId`是表 A、B、C 中项目的 ID。
A、B、C 表都有不同的字段。
现在，当我想获取提要数据时，我还需要从每个表中获取一些数据以在应用程序中使用它。在我的查询中，我使用了很多`SELECT CASE CLAUSE`类似的东西：

我首先加入查询中的所有表（A，B，C）

```
...
CASE Feed.TypeId              
               WHEN 1 THEN tableA.someData
                           WHEN 2 THEN tableB.someData
                           WHEN 3 THEN tableC.someData
          END AS Data,
... 
```

![在此处输入图像描述](../Images/6675679eeef0142bdb460af7f2489115.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:12:31.963

如果不考虑此特定目的的适用性，您的超类型 - 子类型模型是“颠倒的”。

![在此处输入图像描述](../Images/0c0509bf9ebf227a5f3041650fd4b402.png)

所以 DDL 看起来像

```
CREATE TABLE Feed ( 
      FeedID               integer  IDENTITY(1,1) not null
    , FeedType             char(1)  not null
  --  Common_Columns_Here
    , Common_Column        varchar(20)
);
ALTER TABLE Feed ADD CONSTRAINT pk_Feed PRIMARY KEY (FeedID) ;

CREATE TABLE Feed_A ( 
      FeedID               integer  not null
  --  A_Specific_Columns_Here
    , A_Specific_Column    varchar(20)
);
ALTER TABLE Feed_A ADD
  CONSTRAINT  pk_Feed_A PRIMARY KEY (FeedID)
, CONSTRAINT fk1_Feed_A FOREIGN KEY (FeedID) REFERENCES Feed(FeedID) ;

CREATE TABLE Feed_B (
      FeedID               integer  not null
  --  B_Specific_Columns_Here
    , B_Specific_Column    varchar(20)
);
ALTER TABLE Feed_B ADD 
  CONSTRAINT  pk_Feed_B PRIMARY KEY (FeedID)
, CONSTRAINT fk1_Feed_B FOREIGN KEY (FeedID) REFERENCES Feed(FeedID) ;

CREATE TABLE Feed_C ( 
      FeedID               integer  not null
  --  C_Specific_Columns_Here
    , C_Specific_Column    varchar(20)
);
ALTER TABLE Feed_C ADD 
  CONSTRAINT  pk_Feed_C PRIMARY KEY (FeedID)
, CONSTRAINT fk1_Feed_C FOREIGN KEY (FeedID) REFERENCES Feed(FeedID) ; 
```

现在，为了从这个结构中读取，首先创建一个视图

```
create view vFeed as
select
      f.FeedID
    , FeedType
    , Common_Column
    , A_Specific_Column
    , B_Specific_Column
    , C_Specific_Column
from      Feed   as f
left join Feed_A as a on (a.FeedID = f.FeedID and f.FeedType = 'A')
left join Feed_B as b on (b.FeedID = f.FeedID and f.FeedType = 'B')
left join Feed_C as c on (c.FeedID = f.FeedID and f.FeedType = 'C')
; 
```

看看当我想选择我**知道来自 feed A 的**数据时会发生什么。请注意，`FeedType`此查询中未指定，仅指定属于`Feed_A`（和公共列）的列名。

```
select
      FeedID
    , Common_Column
    , A_Specific_Column
from vFeed; 
```

![在此处输入图像描述](../Images/02a8870c21d5a6b5df9aaf1c046b1a5c.png)

请注意，执行计划仅显示`Feed`和`Feed_A`表，查询优化器消除了表`_B`和`_C`; 没必要碰那两个。

换句话说，您可以通过仅使用查询中的特定列来请求特定的提要数据，并让优化器对其他所有内容进行排序——不需要`CASE ... WHEN ..`您的示例中的杂技。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:32:09.117

正如我在评论中所建议的（以及@Andomar 的智慧），我认为这样的事情会更好：

```
CREATE TABLE dbo.FeedTypes
(
  FeedTypeID INT IDENTITY(1,1) PRIMARY KEY,
  SomedataA INT,
  SomedataB VARCHAR(32),
  SomedataC DATETIME
  --, ... other columns
);

CREATE TABLE dbo.Feeds
(
  FeedID INT IDENTITY(1,1) PRIMARY KEY,
  FeedTypeID INT NOT NULL FOREIGN KEY
    REFERENCES dbo.FeedTypes(FeedTypeID)
  --, ... other columns
); 
```

您可以使用复杂的检查约束或触发器强制在给定类型的相关列中存在/不存在数据。但是，如果提要可以轻松更改类型，则必须具有相当复杂的逻辑（就像在当前模型中那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:04:43.403

`Feed`在表格的“新闻提要”中添加您希望显示的所有数据。这是重复的数据，但从长远来看，它会让你的生活更轻松。

它还确保您的新闻源保持历史正确性。这意味着当我更新三个表之一中的记录时，“旧”提要数据保持不变，而不是使用新值进行更新。

# c++ - 在 system() 中使用参数 char argv[]

> ID：10674721
> 
> 赞同：2
> 
> 时间：2012-05-20T15:26:35.207
> 
> 标签：c++, arguments, command-line-arguments

我需要从我的 c++ 代码中执行一个 perl 脚本。这是通过 system() 完成的。
现在我需要从我的代码中传递第二个参数：

```
int main(int argc, char * argv[]) 
```

像这样进入我的 system() ：

```
char *toCall="perl test.pl "+argv[1];
system(toCall); 
```

现在它带来了错误：“'const char [14]'和'char**'类型的无效操作数到二进制'operator +'”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T15:29:34.733

使用`std::string`，如

```
std::string const command = std::string( "perl test.pl " ) + argv[1];
system( command.c_str() ); 
```

您不能添加两个原始指针。

但是`std::string`提供了`+`运算符的重载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T15:30:38.087

您不能通过分配来创建连接字符串`char*`。您需要使用`std::string`或`std::ostringstream`：

```
std::ostringstream s;

s << "perl test.pl";
for (int i = 1; i < argc; i++)
{
    // Space to separate arguments.
    // You need to quote the arguments if
    // they can contain spaces.
    s << " " << argv[i];
}

system(s.str().c_str()); 
```

# c# - 在 .Net 中使用 ASTM 协议进行临床设备接口编程

> ID：10674725
> 
> 赞同：4
> 
> 时间：2012-05-20T15:27:17.960
> 
> 标签：c#, .net, serial-port, protocols, device

我们如何在 C# 中实现 ASTM 协议以从临床设备中读取数据？任何人都可以建议开源框架来编写 ASTM 段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-18T13:06:10.033

自 2008 年 3 月以来，我一直在这样做。我不知道一个。除此之外，并非所有这些诊断设备都与 ASTM 1394 100% 兼容。特别是包校验和计算不同。

但我有 Com 端口和 TCP-IP 级通信的基础设施。由于会发生数据丢失，通常不推荐直接使用 USB。为物理层构建基础设施是合乎逻辑的。因为它是一个真正的标准，但即使对于 HL7 人来说，也会粗心地使用段。在实践中，这可能会发生；让我们把病人的保险号码放在 11.segment 上！但它可能是标准的 5 位整数。他们不在乎。

看看这个**[http://makecircuits.com/blog/2010-06-25-astm-protocol.html](http://makecircuits.com/blog/2010-06-25-astm-protocol.html)** 但你应该自己写。

这些家伙说他们已经生产了一款支持 ASTM 的 RS232、蓝牙、HID、USB 或网络插座连接的产品 [http://www.deepsoftware.com/nrcomm/astm.html](http://www.deepsoftware.com/nrcomm/astm.html)它不是免费的，可能对我分享的各种原因。它说支持HID。如您所知，HID 是 USB 的 Human Interface Driver，只有少数诊断设备直接使用 USB。他们中的大多数使用 USB 将数据发送到他们的内部中心站，并通过 TCP/IP 为您提供。但是一些重要的设备直接支持 USB 但不支持 HID ，他们编写了自己的驱动程序。例如 Welch Allyn 的 Propaq LT，它是一款方便美军使用的显示器。

一切顺利！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-11T19:58:02.853

请注意 ASTM 1381 和 1394 协议规范现在由 CLSI 维护为 LIS01-xx 和 LIS02-xx ( [https://clsi.org/standards/products/automation-and-informatics/documents/lis01/](https://clsi.org/standards/products/automation-and-informatics/documents/lis01/) )。如果我没记错的话，有可用于[LIS01](https://www.nuget.org/packages/Essy.LIS.LIS01-A2/)和[LIS02](https://www.nuget.org/packages/Essy.LIS.LIS02A2/)的 nuget 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:23:59.637

不要认为有可用的开源。但您可以查看[http://www.deepsoftware.com/nrcomm/astm.html](http://www.deepsoftware.com/nrcomm/astm.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-18T16:51:29.633

您需要了解 ASTM 的第一步是您必须使用控制字符、、、，这些不是符号，这些不是字符串，这些不是数字。所以在c#es中第一步转换这些控制字符

`static string enq = char.ConvertFromUtf32(5); static string ack = char.ConvertFromUtf32(6);`

# javascript - squishit 给出 304（未修改）而不是 200（来自缓存）

> ID：10674726
> 
> 赞同：2
> 
> 时间：2012-05-20T15:27:27.010
> 
> 标签：javascript, css, bundle, browser-cache, squishit

我正在使用“SquishIt”来组合我的 .js 和 .css 文件。问题是当所有其他资源为 200（来自缓存）时，squishit 捆绑包会导致 304（未更改）。如果我以常规方式放置文件，我会得到想要的 200 结果。我的代码示例：

```
@MvcHtmlString.Create(@Bundle.JavaScript().Add("~/Scripts/Libs/jquery.cookie.js").Add("~/Scripts/Libs/jquery.dynatree.min.js").Add("~/Scripts/Libs/jquery.json-2.3.min.js").Add("~/Scripts/Libs/jsrender.js").Add("~/Scripts/Libs/jstorage.min.js").Add("~/Scripts/Common/utils.js").Add("~/Scripts/DataServices/AccountDataServices.js").Add("~/Scripts/AccountSelection.js").WithMinifier<SquishIt.Framework.Minifiers.JavaScript.MsMinifier>().Render("~/Scripts/AccSelectionscriptBandle_#.js")) 
```

结果：

![在此处输入图像描述](../Images/2c7c1dbcb369fd1dd4b1f3ecc9105ca5.png)

**编辑**：我正在使用“调试=假”；所有其他资源均为 200（来自缓存）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T20:06:11.353

我相信您走在正确的轨道上，但您需要更进一步，并在您的 clientCache 设置中添加一个选项（cacheControlCustom="must-revalidate"）：

```
 <staticContent>
      <!-- A clients cache will expire 90 days after it is loaded -->
      <!-- each static item is revalidated against the server to see if the LastModifiedDate is different than the If-Modified-Since date-->
      <!-- http://msdn.microsoft.com/en-us/library/ms689443.aspx -->
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="90.00:00:00" cacheControlCustom="must-revalidate"/>
    </staticContent> 
```

cacheControlCustom 强制对服务器进行检查，以比较特定静态文件的 lastModifiedDate 和 If-Modified-Since。设置 cacheControlMaxAge 只会让你到目前为止，特别是当你在服务器上修改文件时，你的客户端可能不会自动重新拉文件。您的设置（500 天）只会在文件在客户端计算机上保存 500 天后提取文件。如果这是你的意图，那就太好了。（此外，SquishIt 会屏蔽一些缓存行为，因为更改包中的 js/css 文件会生成不同的哈希名称。）

评论中的 Url 可能会从 MSDN 中解释更多。

# spring - Spring transaction propagation_required issue

> ID：10674731
> 
> 赞同：3
> 
> 时间：2012-05-20T15:27:59.457
> 
> 标签：spring, hibernate, spring-transactions

In our java project we are using ORM with hibernate and spring. I had problems in deleting persistent objects. For example this sample method gets entities by ids and then delete them:

```
@Transactional
public void remove(List<Long> ids) {
    SearchTemplate template = new SearchTemplate();
    template.addParameter("milestoneId",ids);
    List <InvoiceQueue> items = this.findByCriteria(template);
    ...
    this.delete(items);
} 
```

Method executes Ok without any exception but doesn't actually delete the items from the DB.

Adding the following annotation to the method definition `@Transactional(propagation = Propagation.REQUIRES_NEW)` solves the problem.

Can anyone explain why it doesn't work with the default propagation type PROPAGATION_REQUIRED.

Thanks in advance.

Environment details :

hibernate.version 3.5.5-Final, spring.version 3.0.5.RELEASE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:58:49.653

Really just repeating what @PeterBagyinszki said in his comment, but the reason quite probably is that the transaction within which your delete occurs gets rolled back due to some other part throwing an exception, and all the changes made during the transaction get canceled. With `Propagation.REQUIRES_NEW`, the delete is done within it's own separate nested transaction. The outcome of the nested transaction (committed or rolled back) won't affect the "outer" transaction and vice versa.

Check your logs to see what is causing the transaction to be rolled back, note that even something like a simple SELECT -query failing with something like NoResultException will cause the transaction to roll back, unless you explicitly state in the `@Transactional`-annotation it not to roll back on certain exceptions.

# sql - 在 PostgreSQL 中什么是 g(i)：FROM generate_subscripts($1, 1) g(i)？

> ID：10674735
> 
> 赞同：6
> 
> 时间：2012-05-20T15:29:13.297
> 
> 标签：sql, postgresql

这是在 postgres 手册中：

```
CREATE or replace FUNCTION mleast(a VARIADIC numeric[]) 
   RETURNS numeric 
AS $$
   SELECT min($1[i]) FROM generate_subscripts($1, 1) g(i);
$$ LANGUAGE SQL;

SELECT mleast(10, -1, 5, 4.4); 
```

如果我写：（省略 g(i) ）

```
CREATE or replace FUNCTION mleast(a VARIADIC numeric[]) 
   RETURNS numeric 
AS $$
  SELECT min($1[i]) FROM generate_subscripts($1, 1);
$$ LANGUAGE SQL;

SELECT mleast(10, -1, 5, 4.4); 
```

我收到：错误不存在列«i»

g(i)到底是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-20T21:46:23.293

generate_subscripts 是一个“set-returning 函数”，调用它时会返回多行。这就是为什么它最常放在 FROM 子句中的原因。

默认情况下，Postgres 内置的 generate_subscripts 的结果是匿名的，并且会自动使用任何名称作为句柄，以便在查询的其余部分中引用它。这就是 g(i) 的含义；它是 generate_subscripts 返回的表 (g) 和列 (i) 的别名。所以这个表达式：

`FROM generate_subscripts($1, 1) g(i)`

方法：

> 执行函数 generate_subscripts 并将其结果分配给一个名为“g”的表，其中有一列名为“i”

或以 SQL 形式：

`CREATE TABLE g ( i integer );`

`INSERT INTO g SELECT * FROM generate_subscripts(some_array, 1);`

`SELECT i FROM g ORDER BY i;`

如果没有该别名，则查询的 SELECT 部分不知道如何引用 generate_subscripts 生成的结果。

g(i) 和 gs(i) 的使用是 Postgres 世界的惯例。“g”或“gs”代表“generate_series”或“generate_subscripts”。“i”是“迭代器”的传统编程变量。您实际上可以使用您想要的任何别名，我鼓励您使用实际引用您正在尝试做的事情的别名，以改善未来的代码维护。例如：

`FROM generate_subscripts( $1, 1 ) as features(feature_no)`

[这些函数在 PostgreSQL 文档中有详细说明，参考](http://www.postgresql.org/docs/current/static/functions-srf.html)[文档如何编写 Set Returning Functions](http://www.postgresql.org/docs/9.1/static/xfunc-sql.html)也很有用（向下滚动到 35.4.8\. SQL Functions Returning Sets）。一旦你自己写了一个，你就会更清楚为什么需要一个别名来引用它的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T15:34:16.410

`g(i)`定义`generate_series()`函数返回的表（结果集）的结构。

它将别名分配给`g`具有名为的单个列的结果集`i`

# ruby-on-rails - 在 update_attributes 上保存引用的资源（在编辑时创建嵌套资源）

> ID：10674737
> 
> 赞同：0
> 
> 时间：2012-05-20T15:29:29.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, nested

我有类似问题跟踪系统的东西，其中存在问题并且他们有一些评论。

现在在一个页面上，我想给用户一个选项来编辑一些“问题”以及添加评论。编辑和问题是*/edit*之类的标准内容，但我也想创建评论并验证它是否为空白。

我发现我可以构建评论并为其制作表单，但是我应该如何同时检查问题属性和评论属性是否有效？因为每次更新后都应该有一条新评论，但如果问题属性无效，我不想创建新评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:35:59.827

您可以在各自的类中验证评论模型和问题模型。我不清楚您是否在问题中使用“accepts_nested_attributes_for”来发表评论。如果是，那么如果问题无效，标准的 IssueController#update 将不会保存记录，因此也不会创建评论记录。

这是标准的 IssueController#update：

```
class IssueController < ApplicationController

  def update
    @issue = Issue.find(params[:id])
    if @issue.update_attributes(params[:issue])
      redirect_to issues_path, notice: 'issue updated'
    else
      render action: 'edit'
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:34:59.300

我会通过首先向您的模型和模型添加`fails_validation?`方法来检查问题来解决这个问题。 `Issues``Comments`

其次，您必须手动加载`@issue`表单数据`params[]`并在保存之前对其进行验证（不能使用`update_attributes(params[:issue])`.）。创建一个新的`Comment`并通过`params[]`. 然后，您可以在两个模型上测试验证，`edit`如果其中一个失败，则返回操作。

如果两者都通过，您可以保存`@issue`，然后`@comment`正常。

```
def update
  @issue = Issue.find(params[:id])
  # manually transfer form data to the issue model
  @issue.title = params[:issue][:title]
  @issue.body = params[:issue][:body]
  #...

  @comment = @issue.comments.new(params[:comment])

  # validate both @issue and @comment
  if @issue.fails_validation? || @comment.fails_validation?
    flash[:error] =  "Your edits or your comment did not pass validation."
    render :action => "edit", 
  end

  # validation passed, save @issue then @comment
  respond_to do |format|
    if @issue.save
      @comment.save
      format.html { redirect_to @issue, notice: 'Issue successfully updated. Comment created' }
      format.json { head :ok }
    else
      format.html { render action: "edit" }
      format.json { render json: @issue.errors, status: :unprocessable_entity }
    end
  end
end 
```

不是最优雅的解决方案，但它应该可以工作。

# apache - 如何设置 mod_proxy 为某些文件提供服务，而其他文件由 apache 提供

> ID：10674743
> 
> 赞同：0
> 
> 时间：2012-05-20T15:29:47.273
> 
> 标签：apache, mod-proxy, tomcat5.5

我启用了 mod 代理来为我的 jsp 和 servlet 提供服务，它似乎工作正常。因此，如果我点击 localhost，它会向 tomcat 发出请求并执行它。想要的是servlet和jsp被转发到tomcat，而php由apache处理。JSP/Servlet 和 PHP 文件都在同一个文件夹中，我需要从 JSP?Servlet 调用 PHP，反之亦然。现在的问题是，如果我使用以下模式，PHP 也会被转发到 tomcat -

```
ProxyPass /auto http://serv.corp.com:8080/auto/ 
```

所有 JSP/Servlet 和 PHP 文件都在 webapps 文件夹中的 auto 文件夹中。

请帮助我将静态内容（即 PHP）路由到 apache。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:31:13.247

通过Apache服务器静态内容并通过appserver（在我的情况下为jboss）保留文件..

**`httpd.conf`Apache 的外观应为：** -

```
DocumentRoot   /usr/local/apache2/htdocs

ProxyPass   /   !

ProxyPass   /  https://www.example.com:8443/

ProxyPassReverse  /  https://www.example.com:8443/ 
```

例如，这里`/logo.gif`将由 Apache 直接从`/usr/local/apache2/htdocs/logo.gif file`.

其他一切都将由 appserver 提供服务。

希望它会有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:05:11.373

您想使用[ProxyPassMatch](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassmatch)而不是 ProxyPass。类似的东西（未经测试）

```
ProxyPassMatch ^/(.*\.php)$ ! 
```

# php - 从最后输入的十个值中选择最流行的条目

> ID：10674745
> 
> 赞同：2
> 
> 时间：2012-05-20T15:29:54.650
> 
> 标签：php, mysql, sql

我可以从最后十个条目中进行选择，但不确定如何从这十个条目中获得最受欢迎的？另外，我将如何计算最受欢迎的条目的数量并将其输出到百分比？

```
<?php 
    $sql = "SELECT data FROM table_answers ORDER BY id DESC LIMIT 10"; 
    $result = mysql_query ($sql, $db); 
    while ($row = mysql_fetch_array ($result)) 
    { 
         echo "[".$row['data']."]"; 
    } 
?> 
```

而且我也尝试过 WHERE 值，但它没有返回任何结果。

```
$sql = "SELECT data FROM table_answers WHERE id IN (SELECT id FROM table_answers
         ORDER BY id DESC LIMIT 10) ORDER BY popularity DESC LIMIT 1"; 
$result = mysql_query ($sql, $db); 
    while ($row = mysql_fetch_array ($result)) 
    { 
        echo " [".$row['data']."] ";  
    } 
```

有人知道我在这里可能做错了什么吗？请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:35:11.400

```
SELECT data
FROM (
    SELECT data
    FROM table_answers
    ORDER BY id DESC
    LIMIT 10
) t
ORDER BY popularity 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T15:37:48.687

这应该可以解决问题 -

```
SELECT tableorder.* 
FROM (SELECT * 
      FROM table
      ORDER BY id DESC 
      LIMIT 10) tableorder 
ORDER BY tableorder.popularity DESC 
LIMIT 1 
```

内部查询会根据 id 排序，得到前 10 名。外部查询会再次根据流行度对前 10 行进行排序，返回流行度最高的行。

# php - 数组项的Mongo索引

> ID：10674746
> 
> 赞同：0
> 
> 时间：2012-05-20T15:29:58.770
> 
> 标签：php, mongodb

下午好，

我想知道是否有人可以填写我。是否有可能找到一个数组对象的索引，它是文档中的一个数组？使用下面的文档，我想知道用户 ID 为 15 的项目内对象的索引（在本例中索引为 1）。

这可能吗？如果可以，我将如何去做这个 find()？

```
 {
      "_id" : ObjectId("4fb6c4791e1a121434000000"),
      "set" : "2",
      "items" : [{
                  "image" : "",
                  "userid" : 14
       }, {
                  "image" : "",
                  "userid" : 15
       }]
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:38:42.837

我不知道有任何方法可以让您直接执行此操作。我不知道您的架构的其余部分，或者本文档真正包含的内容，因此几乎不可能提出替代方案。（如果你更新问题，我会更新我的答案）

# iphone - 提取图像的 RGB 和 alpha 值

> ID：10674748
> 
> 赞同：1
> 
> 时间：2012-05-20T15:30:02.487
> 
> 标签：iphone, objective-c, ios, colors, color-picker

> **可能重复：**
> [如何从 UIImage (Cocoa Touch) 或 CGImage (Core Graphics) 获取像素数据？](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)
> [获取 UIImage 的像素颜色](https://stackoverflow.com/questions/3284185/get-pixel-color-of-uiimage)

我有一个场景，用户可以从图像中选择一种颜色，例如下面的一个：![在此处输入图像描述](../Images/0458e0f69d3522137e9916e65b250658.png)

根据用户在图像上的点击位置，我需要提取那个点的 RGB 和 alpha 值——或者说，像素。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:42:05.560

您需要`CGContextRef`从图像创建位图上下文 ( ) 并将`CGPoint`被点击的内容转换为数组偏移位置，以从像素数据中检索颜色信息。

看看[我的像素是什么颜色？](http://www.markj.net/iphone-uiimage-pixel-color/)对于教程和这个[类似的 Stack Overflow 问题](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)。

方法：

```
- (CGContextRef) createARGBBitmapContextFromImage:(CGImageRef) inImage 
```

> 使用正确的颜色空间返回一个`CGContextRef`表示作为参数传递的图像。此方法由以下方式调用：

```
- (UIColor*) getPixelColorAtLocation:(CGPoint) point 
```

> 这是您将调用以获取`UIColor`at 的 函数`CGPoint`。

请注意，这些方法位于 a 的子类中，`UIImageView`以使过程更简单。

# iphone - 从 NSString 设置 NSDate 不起作用

> ID：10674750
> 
> 赞同：0
> 
> 时间：2012-05-20T15:30:06.477
> 
> 标签：iphone, objective-c

`myObject.theEnd`并且`myObject.theStart`是字符串，它具有`Thu Feb 31`类似的日期格式......

```
NSDateFormatter *format=[[NSDateFormatter alloc] init];
        [format setDateFormat:@"EEE MMM dd"]; 
        NSDate *end = [format dateFromString:myObject.theEnd];
        NSDate *start = [format dateFromString:myObject.theStart];
        NSDate *current = [NSDate date]; 
```

`theEnd`什么时候`Thu Feb 31`，`NSDate *end`显示为`1970-5-19 14:30 +0000`。与`NSDate *start`和相同`NSDate *current`。

为什么是这样 ？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T15:42:45.453

我敢打赌`theEnd`没有显示为`1970-05-19 14:30 +0000`. 我敢打赌它的显示是`(null)`因为从来没有 2 月 31 日！例如我得到：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"EEE MMM dd"]; 
NSDate *end = [format dateFromString:@"Thu Feb 31"];
NSLog(@"end = %@", end); 
```

=>

```
2012-05-20 16:38:31.620 test-date[42307:707] end = (null) 
```

另外我敢打赌，您所在的时区是 UTC 以东 9.5 小时。实际上，`1970-05-19 14:30 +0000`当您解析`Sun May 20`. 例如，我目前在 BST，所以 UTC+0100 我得到：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"EEE MMM dd"]; 
NSDate *start = [format dateFromString:@"Sun May 20"];
NSLog(@"start = %@", start); 
```

=>

```
2012-05-20 16:38:31.621 test-date[42307:707] start = 1970-05-19 23:00:00 +0000 
```

由于它在当前时区（UTC格式）中解析为`1970-05-20 00:00:00`（没有年份，因此该组件为 " `0`" = ）。`1970``1970-05-19 23:00:00 +0000`

如果您想解决该问题，请将格式化程序的时区设置为 UTC：

```
[format setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
```

要将年份变为当前年份，您可以执行以下操作：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"EEE MMM dd"];
[format setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSDate *start = [format dateFromString:@"Sun May 20"];
NSLog(@"start = %@", start);

NSDate *today = [NSDate date];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *todayComponents = [gregorian components:NSYearCalendarUnit fromDate:today];
NSDateComponents *startComponents = [gregorian components:(NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:start];

[startComponents setYear:[todayComponents year]];
[startComponents setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

start = [gregorian dateFromComponents:startComponents];

NSLog(@"start = %@", start); 
```

它不是那么漂亮，但它确实有效。或者，您可以将当前年份附加到您传递给格式化程序的字符串并添加`yyyy`到格式化程序样式中：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"EEE MMM dd yyyy"];
[format setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSDate *today = [NSDate date];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *todayComponents = [gregorian components:NSYearCalendarUnit fromDate:today];

NSString *dateString = [NSString stringWithFormat:@"Sun May 20 %i", [todayComponents year]];

NSDate *start = [format dateFromString:dateString];
NSLog(@"start = %@", start); 
```

# http - SPDY 会默认压缩我的所有内容吗？

> ID：10674751
> 
> 赞同：2
> 
> 时间：2012-05-20T15:30:20.960
> 
> 标签：http, networking, compression, gzip, spdy

我只是不明白：我只是使用普通的 SPDY 服务器（node-spdy），我没有定义任何特殊的标头之类的`Content-Encoding`东西，也没有手动压缩我的内容。

**我的问题：**当我想压缩我的内容（不仅仅是标题）时，我必须自己手动压缩所有内容吗？或者 SPDY 会自动压缩我的内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T04:30:30.027

是的，SPDY 不压缩有效负载数据，只压缩标头。您必须自己压缩有效负载。

请参阅[https://groups.google.com/d/topic/spdy-dev/HXkhL6TASN4/discussion](https://groups.google.com/d/topic/spdy-dev/HXkhL6TASN4/discussion)了解为何删除 SPDY 数据压缩。

# database - MVD3 的实际例子：（传递性）如果 X ↠ Y 和 Y ↠ Z，那么 X ↠ (Z − Y)

> ID：10674753
> 
> 赞同：2
> 
> 时间：2012-05-20T15:30:34.393
> 
> 标签：database, normalization, database-normalization

我正在学习数据库规范化和连接依赖项和 5NF。我过得很艰难。谁能给我一些多值依赖规则的实际例子：

MVD3：（传递性）如果 X ↠ Y 和 Y ↠ Z，则 X ↠ (Z - Y)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:25:04.397

功能依赖/规范化理论和包括 BCNF 在内的规范形式是在所有数据属性（列/类型/...）在某种意义上是“原子”的假设上发展起来的。这种“某种意义”现在早已被弃用，但本质上它归结为“表格中的单个单元格值本身不能包含多个值”的概念。想一想，一个 ISBN 编号的文本 CSV 列表，一个在表格的单元格中显示为值的表格（真正的嵌套表格），......

现在想象一个示例，其中课程、教授和学习书籍用作课程材料。想象一下，所有这些都建模在一个 3 列的表格中，上面写着“教授 (P) 教授课程 (C) 并使用书籍 (B) 作为课程材料”。如果任何给定课程 (Cn) 可以使用多于一本书 (B) 并且任何给定教授 (Pn) 可以教授多于一门课程 (C) 并且可以有多个教授 (P) 教学任何给定的课程（Cn），那么这个表显然是全键的（键是完整的属性集 {P,C,B} ）。

这意味着该表满足 BCNF。

但现在想象一下，有一条规则大意是“任何给定课程（Cn）使用的书*集*必须相同，无论哪个教授教它。”。

在规范化发展为现在众所周知的形式的日子里，不允许拥有本身就是表（关系）的表列（关系属性）。（因为这样的设计被认为违反了 1NF，这个概念现在被认为是可疑的。）

想象一下，我们确实被允许将关系属性建模为关系类型。然后我们可以对我们的 3 列表（/relation）建模如下：“教授 (P) 教授课程 (C) 并使用*书籍集*(SB) 作为课程材料。”。属性 SB 将不再是 ISBN 编号，就像之前更明显的设计中那样，但它将是一个（可能是一元的）*RELATION*，包含整个 ISBN 编号集。如果我们像这样绘制我们的设计，然后我们考虑我们的规则“所有教授对同一门课程使用相同的书集”，那么我们看到该规则现在可以表示为从 (C) 到 (SB) 的 FD ！！！这意味着我们手头违反了较低的 NF ！！！

4 和 5 NF 是由这种问题引起的（其中单个属性值 - courseID (C)- 的出现导致要求出现*A MULTITUDE* of rows（多个 (B) ISBn 数字）很早就被识别上, 但没有当前被认为是最好的解决方案 (RVA), 被认为是一个有效的解决方案. 因此, 4 和 5 NF 被创建为“新的和进一步的范式”, 其中当时存在的 2、3 和如果 RVA 被认为是一种有效的设计方法，BC NF 已经足以应对当前的情况。

为了支持这一说法，让我们看看在使用 FD C->SB 的 {P,C,SB} 设计中应该做些什么来消除 NF 违规：

我们会将表拆分为两个单独的表 {P,C} 和 {C,SB}，键分别为 {P,C} 和 {C}。两个表都满足 BCNF。

但是我们仍然有这个*包含一组*ISBN 编号的 SB 属性。可以通过应用“UNGROUPING”之类的技术来解决这个问题。将此应用于我们的 {C,SB} 表将得到一个 {C,B} 表，其中 B 是 ISBN 书号（或您喜欢在数据库中使用的任何标识符），表的键是 {C ，乙}。如果我们消除了 4/5 NF 违规，这与我们将得到的设计完全相同！！！！

您可能还想看看[多值依赖违规？](https://stackoverflow.com/questions/7963832/multivalue-dependency-violation/8010728#8010728)

# sql - SQL View 和 WITH 子句的区别

> ID：10674761
> 
> 赞同：15
> 
> 时间：2012-05-20T15:31:56.450
> 
> 标签：sql, sql-view

这里的任何人都可以告诉我 VIEW 和 WITH 的区别，因为我搜索了很多地方，但我找不到任何关于它的信息。
我的想法是 VIEW 和 WITH 是相同的，除了 VIEWs 被保存为模式对象，但我可能是错的

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-20T15:47:41.010

SQL 视图和 with 子句非常相似。这里有一些区别。

视图在数据库中创建一个实际对象，具有相关的元数据和安全功能。With 语句只是单个查询的一部分。

在许多数据库中，视图都有选项，例如，对它们进行索引或“实例化”它们。

在某些数据库中，With 语句提供了使用递归 CTE 的机会。这对于视图是不可能的。

对于合并到查询中的简单子查询，它们非常相似。选择实际上取决于您是要创建可重用的代码（视图）还是专注于单个查询（with）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T15:45:23.830

从根本上说，视图的定义保存在数据库中，可以被任何查询重用，而 WITH 子句（或通用表表达式，或 CTE）与一个特定的查询相关联，只能通过复制来重用。

否则，它们将基本相同。

如果您使用递归 WITH 子句，那么您无法在 VIEW 中获得相同的结果，除非视图定义本身使用 WITH 子句（这是合法的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T15:43:44.673

简而言之，`WITH`是 DML 中使用的子句，是`VIEW`数据库对象。视图定义可能包含使用`WITH`. 您可以将其视为`WITH`在主 DML 之前定义的派生表（在 Microsoft 术语中）或内联视图（在 Oracle 中）的变体，并且能够引用自身（递归查询）

`WITH`也用于 SQLServer 中的不同上下文（查询提示）。

# php - PHP 显示中文字符：SET NAMES 'utf8' not working

> ID：10674762
> 
> 赞同：3
> 
> 时间：2012-05-20T15:31:59.157
> 
> 标签：php, utf-8, cjk

我正在尝试使用我拥有的数据库，但我无法在其中显示中文字符。该数据库实际上是一个MS Access文件，我用程序将其转换为mysql。无论如何，很多行中都有汉字，我无法让它们在任何浏览器中正确显示。

否则我可以正常显示汉字，如果我使用phpmyadmin查看表格也可以看到它们。我四处寻找解决此问题的方法，在我看来，通常的解决方法是执行“SET NAMES 'utf8'”查询，但这只会将显示的字符从问号更改为其他奇怪的符号。

如果我查看 phpmyadmin 排序规则是 utf8_general_ci 用于数据库和所有表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T15:36:51.633

对于 MySQL DB，这解决了这个问题：

```
$dbh = mysql_connect($hostname, $username, $password);    
mysql_select_db($db, $dbh);    
mysql_set_charset('utf8', $dbh); 
```

PDO解决方案：

```
$dbh = new PDO('mysql:host=$hostname;dbname=$db;charset=UTF-8', $username, $password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:47:29.277

您必须确保以下几点：

*   在导入之前，您要使用的表的字符集必须设置为 utf8。您还必须确保导入的数据实际上包含正确的 utf8 编码字符。
*   在导入时，您必须指定已建立会话的字符集（例如通过运行`SET NAMES utf8;`）
*   导入后，您应该编写一个小脚本来读取您知道其中包含特殊字符的行；脚本必须：
    *   使用`header('Content-Type: text/plain; charset=utf-8');`或您希望设置的任何 mime 类型
    *   为已建立的 MySQL 连接设置正确的字符集（utf8）

如果一切顺利，它应该可以正确显示您的数据。

# delphi - 在 Delphi 中使用偏移量复制内存

> ID：10674763
> 
> 赞同：6
> 
> 时间：2012-05-20T15:32:00.217
> 
> 标签：delphi, memory, copy

我想复制一个带有偏移量的内存块，可以吗？

这是我到目前为止的代码：

```
const
  SOURCE: array [0..5] of Byte = ($47, $49, $46, $38, $39, $61);
var
  Destination: Pointer;
begin
  // This is a full copy
  Move(SOURCE, Destination^, SizeOf(SOURCE));

  // If i want to copy from the third byte, is it possible?
  // I imagine the code should be, but it cannot be compiled.
  Move(Slice(SOURCE^, {Offset=}2)^, Destination^, SizeOf(SOURCE) - 2);
end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T15:38:52.063

目前尚不完全清楚您想要实现什么，但看起来像

```
MoveMemory(pointer(NativeUInt(Destination) + 2), @SOURCE[0], SizeOf(SOURCE) - 2) 
```

虽然我怀疑你真的想要

```
MoveMemory(pointer(NativeUInt(Destination) + 2), @SOURCE[2], SizeOf(SOURCE) - 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:55:54.357

要用于`Move()`复制数组的一部分，请执行以下操作：

```
Move(SOURCE[Offset], Destination^, SizeOf(SOURCE)-Offset); 
```

# python - 单击按钮时如何禁用文本抖动？

> ID：10674770
> 
> 赞同：2
> 
> 时间：2012-05-20T15:33:28.813
> 
> 标签：python, button, widget, tkinter, options

我正在使用 Tkinter，python 中的按钮。

问题是当我单击一个按钮时，按钮的文本会抖动。这可能是此小部件的默认行为，我不知道如何禁用它并使其成为静态。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:57:37.243

我假设您的意思是单击按钮时浮雕从凸起变为凹陷。

这是我在[http://wiki.tcl.tk/1048](http://wiki.tcl.tk/1048)上找到的（点击“显示讨论”查看）：

> 不幸的是，当您单击时使用的浮雕是硬编码的（如“凹陷”），因此如果不破解 Tk 内部结构以绑定按钮，您就无法为每个小部件配置它。

因此，解决此问题的最简单方法是始终使按钮看起来凹陷

```
MyButton = Tkinter.Button(
    self.frame, 
    text = "Foobar", 
    command = self.foobar, 
    relief=Tkinter.SUNKEN
) 
```

这样做的缺点是它可能会使按钮看起来没有响应。

您还可以使用按钮以外的小部件作为可点击项目（由 Joel Cornett 建议）。这是一个将标签用作按钮的简单示例：

```
import Tkinter

class main:
        def __init__(self,root):
                # make a label with some space around the text
                self.lbl1 = Tkinter.Label(root,
                                          width = 16, height = 4,
                                          text = "Foobar")                
                self.lbl1.pack()

                # Call a function when lbl1 is clicked
                # <Button-1> means a left mouse button click
                self.lbl1.bind("<Button-1>", self.yadda)
                self.lbl1.bind("<Enter>", self.green)
                self.lbl1.bind("<Leave>", self.red)

        def yadda(self, event):
                self.lbl1.config(text="Clicked!")

        def green(self, event):
                self.lbl1.config(bg="green")

        def red(self,event):
                self.lbl1.config(bg="red")

if __name__ == "__main__":
    root = Tkinter.Tk()
    main(root)
    root.mainloop() 
```

# doctrine-orm - Doctrine 自动创建所有数据库表？

> ID：10674775
> 
> 赞同：10
> 
> 时间：2012-05-20T15:33:50.763
> 
> 标签：doctrine-orm

有没有办法告诉学说在不使用此命令的情况下自动创建模式表：

```
doctrine:schema:update --force 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-07T22:23:30.473

使用 SchemaTool 和 EntityManager 你可以这样做：

```
$schemaTool = new \Doctrine\ORM\Tools\SchemaTool($entityManager);
$classes = $entityManager->getMetadataFactory()->getAllMetadata();
$schemaTool->createSchema($classes); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T19:03:37.947

我不确定你想做什么，但如果你想从 php 代码中做，你可以检查教义命令的工作原理并复制代码。你可以在这里找到它：

```
vendor/symfony/src/Symfony/Bundle/DoctrineBundle/Command/CreateDatabaseDoctrineCommand.php 
```

如果您检查执行方法，您将看到它是如何完成的。显然，您需要通过 DBAL DriverManager 建立连接，这使您可以访问模式对象，该对象又具有 createDatabase 方法。我自己没有尝试过。

# java - 如何定义正则表达式格式？

> ID：10674788
> 
> 赞同：-3
> 
> 时间：2012-05-20T15:36:14.053
> 
> 标签：java, android, regex

我有一个十进制数，`s`需要满足以下条件：

```
((s>=97 && s<=122 )&&(s>=65 && s<=90)&&(s>=48 && s<=57)&&
((s>=33 && s<=47)||(s>=58 && s<=64)||(s>=91 && s<=96)||(s>=123 && s<=126))){ 
```

int`s`实际上是基于 ASCII 表的十进制数。

上面的条件可以转换成正则格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:09:51.997

是的你可以。但你不应该。上面的条件是数字运算，因此如果将它们保留为数字运算，它们将是类型安全的、快速且易于理解的。

您列出的条件归结为以下内容：

```
if (s >= 33 && s <= 126) {
    switch ((int)s) {    
        case 47:
        case 57:
        case 64:
        case 90:
        case 97:
        case 122:
            return s == (int)s;
        default: 
            return true;    
    }
}
return false; 
```

我不确定`s == (int)s`事情会不会飞，因为我是 C# 人。该行的想法是如果`s`是整数则产生真，否则产生假。

简短而甜蜜的选择：

```
float[] temp = new float[] { 47, 57, 64, 90, 97 };
return s >= 33 && s <= 126 && (!temp.contains((int)s) || s == (int)s); 
```

以上是执行此操作的“正确”方法。如果您必须使用正则表达式，您可以使用以下方法：

```
String pattern = "([459]7|64|90|122)\\.[0-9]+";
return s >= 33 && s <= 126 && !s.toString().matches(pattern); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:02:51.270

如果您需要将大量范围条件解析为
没有重叠的正则表达式类，则可以使用这样的实用程序。不确定您是要嵌入
实用程序代码还是仅嵌入字符类结果。

不幸的是，我不是 Java 专家。所以这个实用程序是用 Perl 编写的。也许你
可以把它转换成 Java 或者只是用它来生成一个类。

这是一个 ASCII 样本，它只需要一个很大的条件并针对连续的数字范围（在本例中为 0 - 255）进行测试，
根据字符代码生成一个字符串，然后将字符串操作为有效字符班级。

**编辑：**需要两个分隔符；$pad 和 $range，它们应该在*条件*中有效的范围之外。

祝你好运！

```
$class = '';
$valid = 0;
$pad   = "\x{100}";
$range = "\x{101}";

for $s (0 .. 255)
{
   if (   ($s >= 33  && $s <= 47)
       || ($s >= 58  && $s <= 64)
       || ($s >= 91  && $s <= 96)
       || ($s >= 123 && $s <= 140)
       || ($s >  4   && $s <  25)
       || ($s >  180)
       || ($s == 0)
  )
   {
      $class .= chr($s);
      $valid = 1;
      # print $s,"\n";
   }
   else {
      $class .= $pad;
   }
}

if ( $valid)
{
   # Escape special class characters
      $class =~ s/([\[\]\-\^\\])/\\$1/g;

   # Compact range, insert delimiter, then remove padding
      $class =~ s/(\\?[^$pad])[^$pad]+(\\?[^$pad])/$1$range$2/g;
      $class =~ s/[$pad]//g;

   # Convert non-printable ASCII characters to hex (does not process delimeter)
      $class =  join '', 
              map { my $v = ord($_);
                    $v != ord($range) && ($v < 32 || ($v > 126 && $v < 256)) ?
                    sprintf("\\x%.2x", $v) : $_
              } split (//, $class);

   # Insert range operator's
      $class =~ s/[$range]/-/g;

   # Print class
      $class = '[' . $class . ']';
      print "\nEquivalent class = ", $class, "\n";
}

else {
    print "\nNothing in range!\n";
} 
```

输出 -

```
Equivalent class = [\x00\x05-\x18!-/:-@\[-`{-\x8c\xb5-\xff] 
```

# c++ - 如何与另一个继承类的继承类对话

> ID：10674793
> 
> 赞同：1
> 
> 时间：2012-05-20T15:36:41.277
> 
> 标签：c++, function, inheritance

在这里向您展示我的意思，如果没有代码就很难描述：

```
class Object
{ 
      // attributes..
};

class Attribute
{
    public:
    void myfunc(); 
};

class Character: public Object, public Attribute
{ 

};

void main()
{
    Object* ch = new Character;
    // How can I call the myfunc() from Attribute
    // tried static_cast<Attribute*>(ch);
} 
```

我只有一个对象类指针，我不知道它是字符对象还是继承自属性类的另一个对象，我知道该类继承自属性类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:52:57.610

*交叉投射*只能由 dynamic_cast 完成。

```
Object * o = new Character;
Attribute * a = dynamic_cast<Attribute*>(o);

if (!a) throw_a_fit();

a->myfunc(); 
```

但是，要使其工作，您必须具有多态基类（它们必须至少具有一个虚函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:01:48.277

如果你知道你有一个正确类型的对象，你可以显式地强制转换：

```
Object * ch = /* something that's a Character */

static_cast<Attribute *>(static_cast<Character *>(ch))->myfunc(); 
```

显然，如果 指向的最衍生对象`ch`的类型不是 的子类型，这将是不正确的`Attribute`。

If your class hierarchy is polymorphic (i.e. has at least one virtual function in each base class that you care about), then you can use `dynamic_cast` directly at runtime and check if it succeeded, but that is a comparatively expensive operation. By contrast, the static cast does not incur *any* runtime cost at all.

# android - 如何根据使用 i.putExtra 发送的字符串设置图像？

> ID：10674798
> 
> 赞同：0
> 
> 时间：2012-05-20T15:37:12.817
> 
> 标签：android, image, android-intent, imageview

我想将图像从 recipe_button_list.java 发送到 recipe_display_screen.java，而我当前的代码突出显示了我的代码中的一个错误......

这是在 recipe_button_list 中发送图像的方式：

```
Intent i= new Intent(getBaseContext(),recipedisplayscreen.class);
            //Sending data to the next screen
            i.putExtra("textView1", inputIngredients1.getText().toString());
            i.putExtra("textView2", inputMethod1.getText().toString());
            i.putExtra("image_string",R.drawable.blustudios);

            Log.e("n", inputMethod1.getText()+"."+ inputIngredients1.getText()); 
```

这是在 recipe_display_screen 中接收图像的方式：

```
Intent i = getIntent();
    String Ingredients = i.getStringExtra("textView1");
    String Method = i.getStringExtra("textView2");
    String RecipeImage = i.getStringExtra("image_string"); 
```

这就是它的设置方式（给出错误（highlights setImageResource）

```
 MethodDisplay.setText(Method);
    IngredientsDisplay.setText(Ingredients);
    RecipeDisplay.setImageResource(RecipeImage); 
```

我的错误是什么？？？

提前感谢：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:15:24.533

`R.drawable.blustudios`不是一个`String`。自动生成的`R.java`类包含实际上是资源 ID 的整数。

改变这一行...

```
String RecipeImage = i.getStringExtra("image_string"); 
```

……到这……

```
int RecipeImage = i.getIntExtra("image_string", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:40:34.377

您不能将图像作为字符串发送。您可以使用`Serialized`或`Parcable`。

我知道位图已经可以解析，也许 ImageView 也可以解析。如果不是，只需将 ImageView 保存为位图并发送即可。

无论如何，使用 setParcableExtra() 并与 get 相同。

您显然不了解在活动之间传递数据的概念。看看[这个](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)问题，你可能会从那里找出答案。

# c++ - 使用 C++ 模板的 TDD 技术

> ID：10674799
> 
> 赞同：1
> 
> 时间：2012-05-20T15:37:18.280
> 
> 标签：c++, templates, tdd

您在 TDD 中学到的第一件事是，为了使事物可测试，它们需要松散耦合。在大多数语言中，这是通过通过接口分离耦合来实现的，推迟依赖项的注入，以便模拟对象可以停靠到我们想要测试的实现

现在，在 C++ 中，我们当然可以完全按照这种方法使用抽象类作为接口，但我们也有模板编程的能力，它在编译时解决依赖关系

我见过太多的例子，如何使用标准方法进行 TDD，但模板编程的例子介于零和 zilch 之间。是的，我已经看到 Alexandrescu 使用策略模板参数来推迟选择实现的方法，但我想知道为什么这种方法没有更普遍。它是否会导致困难或令人不安的副作用？

简而言之，在使用模板和编译时多态进行编程时，遵循 TDD 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:50:18.783

在大多数情况下，我并没有看到它与通过继承进行的依赖注入有什么不同。只需编写一个实现模板所需概念的存根/模拟类，用该类实例化模板，然后从那里开始......就像它是我将从它继承的抽象接口一样，将它注入到我的对象中想要测试（可能在施工期间），然后运行我的测试......

非常简单的例子：

```
template < typename T >
T* create();

struct object {};

TEST_CASE(itCreates) {
  object * o = create<object>();
  o != 0;
  delete o;
} 
```

# c# - 空文本的文本框绑定默认值

> ID：10674810
> 
> 赞同：0
> 
> 时间：2012-05-20T15:38:49.820
> 
> 标签：c#, .net, wpf, wpf-controls

我想要一个`TextBox`在`Listview`DataTemplate 中，它绑定到一个 int 或 double 属性，`0`或者`0.0`在它为空时自动，即当整个文本`TextBox`被删除时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:56:48.327

您可以放入将空字符串转换为 0/0.0 in的[值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)`ConvertBack`。在绑定传播回源之后，绑定引擎通常会再次获取该值，因此您最终应该将其作为`Text`.

# google-maps-api-3 - 获取提供 GPS 位置的下一个方向帮助

> ID：10674817
> 
> 赞同：0
> 
> 时间：2012-05-20T15:39:45.560
> 
> 标签：google-maps-api-3, gps, augmented-reality

我正在研究基于增强现实的导航系统的概念验证项目。基本上，它应该为用户提供真实场景的视频，其中包含使用 GPS 位置创建的附加导航标志。

我需要做的不是一个完整有用的系统，而是一个概念证明。我主要有两个任务要做。处理场景的第一张真实图像以确定其中的道路，并使用 GPS 我将放置导航标志，如右转，直行在道路上。我在这里面临的挑战是如何获取所需的导航信息。我考虑过 Google Maps Api，但它需要你有你的谷歌主机。我还对如何从中获取方向进行了一些研究，但对于我的目的来说，结果的结构似乎不是很好。我的意思是我需要具有一定数量的输出并严格定义（例如右转、左转等），但它的输出非常非结构化。你觉得我怎么能完成这个任务。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:12:20.490

此链接可能有助于谷歌地图位置提取 [https://developers.google.com/maps/documentation/javascript/streetview](https://developers.google.com/maps/documentation/javascript/streetview)

您可以使用 Layar 或其他可用的 AR sdks（Metaio，QUalcomm 也提供一个）用于 AR 相关的 Overlays

祝你好运 ！

# opengl - openGL 中的嵌套显示列表

> ID：10674818
> 
> 赞同：2
> 
> 时间：2012-05-20T15:39:48.600
> 
> 标签：opengl

我有一个使用 glNewList(ListNum, GL_COMPILE) 编译的 openGL 显示列表（我们称之为列表 A）。第二个列表 B 被编译并执行，并包含对列表 A 的调用。

然后，应用程序中发生了需要重新编译列表 A 的更改。假设这本身不需要重新编译列表 B 是否安全？换句话说，虽然B本身没有重新编译，但我可以依赖B调用新版本的A吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:24:36.370

再一次，谷歌是我的朋友。根据[http://www.opengl.org/archives/resources/faq/technical/displaylist.htm](http://www.opengl.org/archives/resources/faq/technical/displaylist.htm)，它有效。

# java - BufferedOutputStream 没有将所有内容写入文件

> ID：10674821
> 
> 赞同：0
> 
> 时间：2012-05-20T15:40:29.993
> 
> 标签：java, fileoutputstream, tftp, bufferedoutputstream

我试图创建一个 TFTP 服务器，但是当它接收到一个文件时，似乎并非所有文件都保存在服务器上（缺少一些字节）。该文件创建良好，大部分数据已写入，但由于文件不完整，它被归类为损坏且无法打开。有谁知道如何解决这个问题？

主班

```
 WRQ WRQ = new WRQ();
            ACK ACK = new ACK();
            DatagramPacket outPacket;
            BufferedOutputStream bufferedOutput = new BufferedOutputStream(new FileOutputStream(filename));
            byte[] bytes;
            byte[] fileOut;
            outPacket = WRQ.firstPacket(packet);
            socket.send(outPacket);

            socket.receive(packet);

            while (packet.getLength() == 516){

            bytes = WRQ.doWRQ(packet);
            bufferedOutput.write(bytes);

            outPacket = ACK.doACK(packet);
            socket.send(outPacket);

            socket.receive(packet); 

            }

            bytes = WRQ.doWRQ(packet);
            bufferedOutput.write(bytes);

            bufferedOutput.close();

            outPacket = ACK.doACK(packet);
            socket.send(outPacket); 
```

WRQ 类

```
public class WRQ {

public DatagramPacket firstPacket(DatagramPacket packet) throws IOException{

    ACK ACK = new ACK();
    DatagramPacket ACKpacket = ACK.doACK(packet);

    //takes ACK packet and sets block # as 0 to signal that this is the first packet in a WRQ
    byte[] ACKcontents = new byte[3];
    ACKcontents = ACKpacket.getData();
    ACKcontents[2] = 0;
    ACKcontents[3] = 0;
    ACKpacket.setData(ACKcontents);

    return ACKpacket;

}

public byte[] doWRQ(DatagramPacket packet){

    int length = packet.getLength();
    byte[] packetData = packet.getData();
    byte[] data = new byte[length - 4];
    data = Arrays.copyOfRange(packetData, 4, length - 4);

    return data;

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:07:18.097

这段代码在我看来非常可疑：

```
byte[] packetData = packet.getData();
byte[] data = new byte[length - 4];
data = Arrays.copyOfRange(packetData, 4, length - 4); 
```

您的输出数组（数据）是 length ，但您只将字节`length - 4`复制到它。`length - 8`如果 packetData 中要忽略的字节是前 4 个字节，则应该是

```
data = Arrays.copyOfRange(packetData, 4, length); 
```

因为最后一个参数不是长度，而是`to`索引（不包括）。有关详细信息，请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28byte%5B%5D,%20int,%20int%29)。

# coronasdk - Corona SDK ScrollView 防止被遮盖的区域被触摸？

> ID：10674825
> 
> 赞同：1
> 
> 时间：2012-05-20T15:40:40.730
> 
> 标签：coronasdk

我想将我的新闻滚动视图设置为特定高度

有两种方法可以做到这一点

1 - 通过设置 height 属性，或 2 - 通过使用掩码

问题是当您更改 ScollView 大小时，它只会更改滚动视图的外观，并且不会阻止隐藏区域启用触摸？这是一个错误吗？

这是代码

```
 local widget = require "widget"

 local myscrollview = widget.newScrollView{
    height = 300,
    maskFile="mask.png"
 }

 local obj1 = display.newRect(0, 0, display.contentWidth, display.contentHeight)
 obj1:setReferencePoint( display.TopLeftReferencePoint ) 
 obj1:setFillColor(255,27,27)
 obj1.x = 0
 obj1.y = 0

 local obj2 = display.newRect(0, 0, display.contentWidth, display.contentHeight)
 obj2:setReferencePoint( display.TopLeftReferencePoint ) 
 obj2:setFillColor(0,27,27)
 obj2.x = 0
 obj2.y = 260

 myscrollview:insert(obj1)
 myscrollview:insert(obj2) 
```

有什么方法可以防止被遮盖的区域被触摸吗？

提前致谢

**这里更新的是 mask.png：**

![这是 mask.png](../Images/a449e77af94daec45bbcff9913ad3f7d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:17:17.910

我想我已经想通了：）

你必须添加这行代码

```
 myscrollview.isHitTestMasked = true 
```

看看你是否想要 [isHitTestMasked的文档](http://developer.anscamobile.com/node/10370)

感谢任何试图解决的人:)

# c++ - std::ostream 在函数结束时打印地址

> ID：10674826
> 
> 赞同：1
> 
> 时间：2012-05-20T15:40:42.803
> 
> 标签：c++

我有以下功能：

```
std::vector<double>residuals;
std::cout << Print_res(std::cout);
std::ostream& Print_res(std::ostream& os) const {

  os << "\tresidual" << std::endl;
  for (unsigned int i = 0 ; i < 22 ; i++) {
    os << "\t\t" << residuals[i] << std::endl;
  }
  os << std::flush;
  return os;
}; 
```

它正确打印残差，但在输出标记的末尾有一个地址，如下所示：

```
2275
2279.08
2224.0835
0x80c5604 
```

我该如何解决？编辑：在阅读了每个人的评论后，我用 as 替换了对函数`Print_res`的`std::copy`调用

```
 std::copy(residuals.begin(), residuals.end(), std::ostream_iterator<double>(std::cout,"\n")); 
```

并且没有打印地址，所以我认为我编写函数的方式有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T16:32:56.593

```
std::cout << Print_res(std::cout); 
```

这在全球范围内是不合法的，因此您发布的代码无效。如果这个语句是从一个函数执行的，那么`Print_res`将被调用，然后返回值`Print_res`也将被流式传输到`std::cout`. 这很可能不是你的意思。你可能只想要这个：

```
Print_res(std::cout); 
```

您的语句相当于：

```
std::cout << std::cout; 
```

在 C++03（您必须使用）中，`std::cout`有一个`operator void*`(from `std::basic_ios<char>`)，其结果就是正在打印的内容。

# python - 用 python 的 NLTK 计算动词、名词和其他词性

> ID：10674832
> 
> 赞同：20
> 
> 时间：2012-05-20T15:41:14.513
> 
> 标签：python, nlp, tagging, nltk, part-of-speech

我有多个文本，我想根据他们对不同词性（如名词和动词）的使用来创建它们的配置文件。基本上，我需要计算每个词性使用了多少次。

我已经标记了文本，但不知道如何进一步：

```
tokens = nltk.word_tokenize(text.lower())
text = nltk.Text(tokens)
tags = nltk.pos_tag(text) 
```

如何将每个词性的计数保存到变量中？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-20T15:49:40.900

该`pos_tag`方法为您返回一个 (token, tag) 对的列表：

```
tagged = [('the', 'DT'), ('dog', 'NN'), ('sees', 'VB'), ('the', 'DT'), ('cat', 'NN')] 
```

如果您使用的是 Python 2.7 或更高版本，那么您可以简单地使用：

```
>>> from collections import Counter
>>> counts = Counter(tag for word,tag in tagged)
>>> counts
Counter({'DT': 2, 'NN': 2, 'VB': 1}) 
```

要标准化计数（给你每个的比例），请执行以下操作：

```
>>> total = sum(counts.values())
>>> dict((word, float(count)/total) for word,count in counts.items())
{'DT': 0.4, 'VB': 0.2, 'NN': 0.4} 
```

请注意，在旧版本的 Python 中，您必须`Counter`自己实现：

```
>>> from collections import defaultdict
>>> counts = defaultdict(int)
>>> for word, tag in tagged:
...  counts[tag] += 1

>>> counts
defaultdict(<type 'int'>, {'DT': 2, 'VB': 1, 'NN': 2}) 
```

# java - Java：如何在没有主线访问的情况下确定启动参数？

> ID：10674836
> 
> 赞同：0
> 
> 时间：2012-05-20T15:41:41.977
> 
> 标签：java, command-line-arguments

我很想知道当您无法从主线访问参数数组时，是否可以确定 Java 应用程序的启动参数。

```
public static void main(String[] args)
{
    // Invokes my code without providing arguments.
    mycode();
}

public static void mycode()
{
    // Attempting to determine arguments here.
    // TODO GetArgs()
} 
```

我在这种情况下通过做一些插件工作而核心应用程序没有提供启动参数列表。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:49:50.150

除非给了他们插件，否则这种情况是不言而喻的（至少在 Java 中）。

如果您需要专门为您的插件设置一些选项，但无法访问命令行，则至少有两个选项：

*   选项文件（几种机制）
*   在命令行上设置系统参数

对于第二个选项，只需使用普通`-D`选项和命名空间参数名称，如：

```
java -Dcom.davelnewton.plugins.foo.bar=anOptionValue etc... 
```

[`System.getProperty(anOptionName)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperty%28java.lang.String%29)通过或其表亲之一检索它们。

IMO 选项文件是一个更好的 (ahem) 选项，即使您在命令行上指定文件路径，但如果您只有一个或两个选项，也许没有 - 只是取决于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:42:54.860

将参数传递给函数？

```
public static void main(String[] args)
{
    mycode(args);
}

public static void mycode(String[] args)
{
    String arg1 = args[0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:52:06.783

你可以这样做：

```
public static void main(String[] args)  
{  
    System.setProperty("cmdArgs", args);
    mycode();  
}  

public static void mycode()  
{  
    // Attempting to determine arguments here.  
    String[] args = System.getProperty("cmdArgs");

} 
```

# php - cpanel xml-api php 通知

> ID：10674838
> 
> 赞同：0
> 
> 时间：2012-05-20T15:41:51.007
> 
> 标签：php, cpanel

我收到以下通知，

```
Notice: Use of undefined constant username - assumed 'username'

........ 
```

以及生成它的代码，

```
$acct = array(username => $username, password => $password, domain => $domain); 
```

阿米在这里做错了什么。原始代码有这样的东西，

```
$acct = array( username => "someuser", password => "pass123", domain => "thisdomain.com"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:45:57.590

尝试引用密钥，如下所示：

```
$acct = array('username' => $username, 'password' => $password, 'domain' => $domain); 
```

# wxpython - Mac OSX Lion 上的 wxPython 和 py2app：无法导入 wx

> ID：10674839
> 
> 赞同：2
> 
> 时间：2012-05-20T15:42:00.473
> 
> 标签：wxpython, osx-lion, py2app

我需要使用 wxPython 创建一个独立的 python 应用程序，以使用 Mac OSX Lion（客户端的操作系统）。我只能使用带有 Snow Leopard 的 Mac，并用它来使用 py2app 构建应用程序。使用 Snow Leopard 可以正常工作，甚至不需要安装 wxPython。

然而，在 OSX Lion 上，wx 导入失败（未找到模块），即使在为 python2.7（Carbon）安装了 wxPython 之后也是如此。我可以从终端导入 wx（使用默认的 python - 2.7），但应用程序仍然无法在导入时找到 wx。

我使用了以下 setup.py：

```
from setuptools import setup

APP = ['main.py']
DATA_FILES = []
OPTIONS = {'arch': 'i386', 'argv_emulation': True}

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
) 
```

并使用`arch -i386 /usr/bin/python2.6 setup.py py2app`, 对其进行编译，以便能够在 32 位上运行它。

让它在 Lion 上运行、在 Snow Leopard 上编译的最佳方法是什么？我可以将 wxPython 包含在应用程序中，甚至包含 python 本身（以防它真的需要与 py2.6 一起运行）吗？我可以命令应用程序运行 /usr/bin/python2.6 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:59:58.587

根据聊天讨论，使用 Python 和 wxPython 的最新稳定版本，并确保 Python 是 OS X 10.6 和 10.7 版本。（并且不要尝试从源代码构建它们。）

# ruby - 动态变量 Jekyll 液体

> ID：10674846
> 
> 赞同：6
> 
> 时间：2012-05-20T15:43:10.550
> 
> 标签：ruby, jekyll, liquid

我想为我的 jekyll + 液体安装使用动态变量。我想使用动态变量名动态访问 _config.yml 文件。

最好用一个例子来解释：

**页：**

```
---
layout: default
title: title_homepage
--- 
```

**默认布局：**

```
{{ site.locales[site.default_locale].page.title }} 
```

**_config.yml：**

```
default_locale: "en"

locales:
  en:
    title_homepage: "This is my homepage title!"
  pirate:
    title_homepage: "Yaaawwwr. Homepage title." 
```

那么如何使用动态变量名访问 _config.yml 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:55:17.260

您要提取的标题来自站点配置。不是页面本身。您需要做的就是将默认布局列表中的调用更改为：

```
{{ site.locales[site.default_locale].title_homepage }} 
```

当您设置`default_locale: "en"`输出将是“这是我的主页标题！”。当您将 _config.yml 文件更新为 时`default_locale: "pirate"`，输出将是“Yaaawr. Homepage title”。我已经在 J​​ekyll 0.11.2 上对此进行了测试，它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:56:11.937

Jekyll 是一个静态网站生成器，它不能使用变量。但我想对于自己的语言环境，有一个简单的解决方案。

遵循这个文件结构（或类似的东西）：

```
root
  - _include
    home.html
  - _layout
    default.html
  - en
    index.html
  - pirate
    index.html
  index.html 
```

很简单，现在使用包含 {{content}} 并创建带有变量和单行的简单文件 {% include index.html %}

**_include/index.html：**

```
<h1>{{page.title}}</h1> 
```

**zh/index.html：**

```
---
layout: default
title: "This is my homepage title!"
---
{% include home.html %} 
```

**海盗/index.html：**

```
---
layout: default
title: "Yaaawwwr. Homepage title."
---
{% include home.html %} 
```

所以……就是这样。

现在创建一个页面变量来处理每个页面的语言环境 url....

我希望这会有所帮助。

# android - 以编程方式自动开机

> ID：10674849
> 
> 赞同：2
> 
> 时间：2012-05-20T15:43:52.363
> 
> 标签：android

我想在android完全关机时安排自动开机，而不是待机。为什么android在开始充电或放入充电电池时不会自动启动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:51:02.257

> 我想在 android 完全不待机时安排自动开机。

这是不可能的，除非通过定制硬件和固件。

> 为什么android在开始充电或放入充电电池时不会自动启动。

这取决于设备制造商。当您连接充电器时，某些设备会自动开始运行，至少在某些情况下（例如 Kindle Fire）是这样。欢迎您使用自己的能力构建自己的设备。这与操作系统无关，就像 Microsoft Windows 确定插入电源线时台式 PC 是否会打开一样。

# php - 无法在php中正确获取代码

> ID：10674853
> 
> 赞同：2
> 
> 时间：2012-05-20T15:45:25.237
> 
> 标签：php

我在 php 中使用循环设计了一个棋盘。棋盘一切都很好，但我无法将棋子放在正确的位置，因为循环，棋盘的每个方格都会重复相同的图片。谁能建议我应该改变什么。请参考我下面的代码。

```
<html>
<head>
<style>
th{
   width:80px;
   height:80px;
}
table{
   border: 5px solid orange;
   border-collapse:collapse;
}
td{
   width:80px;
   height:80px;
}
tr{
   width:80px;
   height:80px; 
}
h1{
   color:#6633FF;
}
</style>

<script type="text/javascript">

</script>
</head>
<body>
<?php
   echo"<h1 align='center'>SAJID Chess Board</h1>";

   echo"<table border='1' align='center'>";

   //Nested For loop starts
   for($i=1; $i<5; $i++)//this is the iteration construct starts from here
{
   echo"<tr>";
   for ($j=7; $j>=0; $j--) // For loop for 1st row

   {
   if(($j%2)==0){
   echo"<td bgcolor='grey'>";
   echo"<img src='king.gif'/>"; //here is the problem, the image of king throughout the chess board                 
   }
  else{
  echo"<td bgcolor='white'>";
  }

  echo"</td>";
  }//for loop ends
  echo "</tr>";

  echo "<tr>";

  for($j=0; $j<8; $j++){ // For loop for 2nd row

  if(($j%2)==0){
  echo"<td bgcolor='grey'>";
  }
  else{
  echo"<td bgcolor='white'>";
  }

  echo"</td>";
  }//for loop ends

  echo "</tr>";

  }//nested for loop ends

echo "</table>";

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:04:23.353

你需要重新设计你的循环，以获得正确的坐标，

这是我为你写的一个例子

```
 <html>
    <head>
        <style>
            th{
                width:80px;
                height:80px;
            }
            table{
                border: 5px solid orange;
                border-collapse:collapse;
            }
            td{
                width:80px;
                height:80px;
            }
            tr{
                width:80px;
                height:80px; 
            }
            h1{
                color:#6633FF;
            }
        </style>

        <script type="text/javascript">

        </script>
    </head>
    <body>
        <?php

          // Format $pictures[Row][Column];
          $pictures = array();

          //Row 1
          $pictures[1][1] = "Castle";
          $pictures[1][2] = "Horse";
          $pictures[1][3] = "Bishop";
          $pictures[1][4] = "King";

          //Row 2
           $pictures[2][1] = "Pawn";
           $pictures[2][2] = "Pawn";
           $pictures[2][3] = "Pawn";
           $pictures[2][4] = "Pawn";
           $pictures[2][5] = "Pawn";
           $pictures[2][6] = "Pawn";
           $pictures[2][7] = "Pawn";
           $pictures[2][8] = "Pawn";

            echo"<h1 align='center'>SAJID Chess Board</h1>";
            echo"<table border='1' align='center'>";

            for($i = 1; $i <= 8; $i++)
            {     
                echo "<tr>";
                for($j = 1; $j <=8; $j++)
                {
                    if( ($i+$j)%2 )
                    {
                        echo"<td bgcolor='grey'>";

                    }
                    else
                    {
                        echo"<td bgcolor='white'>";
                    }

                    if(isset($pictures[$i][$j]))
                        echo $pictures[$i][$j];

                    echo "</td>";
                }
                echo "</tr>";
            }

            echo "</table>";

        ?>
    </body>
</html> 
```

# facebook - 在 Facebook 活动中发布带有图片的消息

> ID：10674854
> 
> 赞同：1
> 
> 时间：2012-05-20T15:45:29.120
> 
> 标签：facebook, api, events, post, image

我首先尝试使用 Graph API Explorer 向事件添加帖子（所有权限都可以），但是当我发布时，只出现消息而不出现图片。我使用的唯一参数是消息和图片，所以我很困惑为什么它在只发布消息的期限内不起作用，只是因为我遵循这个[http://developers.facebook.com/docs/reference/ api/事件/](http://developers.facebook.com/docs/reference/api/event/)。

有什么建议吗？谢谢

# xml - 使用 XML 属性值通过 xsl-fo 将图像添加到 pdf

> ID：10674857
> 
> 赞同：3
> 
> 时间：2012-05-20T15:45:47.463
> 
> 标签：xml, xpath, xsl-fo

我正在使用 XSL-FO 从 XMl 文档制作 PDF。我需要使用 XML 文档中的名称导入图像。

示例 XML：

```
<newAlbums>
   <album cover="blaimage.jpg"/>
</newAlbums> 
```

我需要通过类似的声明来做到这一点：

```
<fo:external-graphic src="({})/> 
```

我需要在 src 属性中放入什么 XPath 才能导入图像？感谢您的帮助，这一直在杀死我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T15:52:33.680

基本上会这样`<fo:external-graphic src="{concat('url(', /newAlbums/album/@cover, ')')}">`。确切的 XPath 表达式将取决于您的 XML。例如，您很可能拥有多个专辑元素，因此`/newAlbums/album[1]/@cover`需要或类似元素。

# objective-c - 在 Xcode / Cocoa 中更改应用程序名称

> ID：10674861
> 
> 赞同：9
> 
> 时间：2012-05-20T15:46:18.567
> 
> 标签：objective-c, xcode, cocoa, xcode4, rename

在 Xcode中更改我的**Mac OS X应用程序名称的最有效方法是什么？**

*（我知道这很容易；我过去做过，但我真的不记得如何... :/)*

**我的意思是说 ：**

*   假设，我有一个**名为**`oldName`.
*   如何将其更改为`newName`，以便这个新名称出现在它应该出现的任何地方？（应用程序名称、包标识符、关于对话框、Dock 等）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-20T17:15:26.550

单击顶部左侧的项目，其中列出了与该项目关联的所有文件。按键盘上的回车键，然后简单地重命名它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T17:20:40.923

仅更改***-info.plist***文件中的***捆绑显示名称。***

 *它将更新写在应用程序图标下方的应用程序标题。我想这就是你所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:50:32.103

真诚地，我将在终端上使用 grep 手动更改所有出现的情况。

`cd yourprojectdirectory`

`grep -r oldName .`*

# c# - 从网页中检索图像 url

> ID：10674864
> 
> 赞同：2
> 
> 时间：2012-05-20T15:46:27.847
> 
> 标签：c#, html, windows-phone-7, exception-handling, html-agility-pack

```
string imgurlhard = doc.DocumentNode.
    Element("html").
    Element("body").
    Elements("div").Single(el => el.Attributes["id"].Value == "main").
    Elements("div").Single(el => el.Attributes["id"].Value == "onlineIntegrator").
    Elements("div").Single(el => el.Attributes["id"].Value == "results").
    Element("img").Attributes["src"].Value; 

MessageBox.Show(imgurlhard); 
```

这是要检索的网页的 URL：

```
http://integrals.wolfram.com/index.jsp?expr=sin(x)&random=false 
```

谁能告诉我我做错了什么，因为我抓住了一个`NullReferenceException`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:22:31.443

```
var image = doc.DocumentNode
    .Descendants("img")
    .Where(i => i.Attributes["class"] != null && i.Attributes["class"].Value == "traditionalForm")
    .Select(i => i.Attributes["src"].Value)
    .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:17:55.337

我建议使用 HTMLagility。

```
string image = Doc.DocumentNode.SelectSingleNode("//div[@id='traditionalForm']//img['src'][1]").Attributes["src"].Value; 
```

编辑

现在它应该可以工作了。

# nginx - Nginx 默认公共 www 位置？

> ID：10674867
> 
> 赞同：352
> 
> 时间：2012-05-20T15:46:49.097
> 
> 标签：nginx

我以前使用过 Apache，所以我知道默认的公共 Web 根目录通常是`/var/www/`.

我最近开始使用 nginx，但似乎找不到默认的公共 Web 根目录。

我在哪里可以找到 nginx 的默认公共 Web 根目录？

* * *

## 回答 #1

> 赞同：489
> 
> 时间：2013-01-07T14:04:33.693

如果使用 apt-get 在 Ubuntu 上安装，请尝试`/usr/share/nginx/www`.

**编辑：**

在更新的版本中，路径已更改为： `/usr/share/nginx/html`

**2019年编辑：**

也可以试试`/var/www/html/index.nginx-debian.html`。

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2012-06-20T20:59:38.340

如果您的配置不包含`root /some/absolute/path;`语句，或者它包含使用相对路径（如）的语句，`root some/relative/path;`则生成的路径取决于编译时选项。

[如果您自己下载](http://nginx.org/en/download.html] "www.nginx.org")并编译了源代码，那么可能是唯一能让您对这对您意味着什么做出有根据的猜测的情况。在这种情况下，路径将与`--prefix`所使用的内容相关。如果您没有更改它，则默认为`/usr/local/nginx`. 你可以找到参数 nginx 是用 via 编译的`nginx -V`，它`--prefix`列为第一个。

由于[该`root`指令默认为`html`](http://nginx.org/en/docs/http/ngx_http_core_module.html#root "nginx 文档")，因此这当然会`/usr/local/nginx/html`成为您问题的答案。

但是，如果您以任何其他方式安装 nginx，那么所有的赌注都将失败。您的发行版可能使用完全不同的默认路径。学习弄清楚你的选择分布使用什么样的默认值完全是另一项任务。

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2013-08-27T14:42:48.883

Debian 上的默认 Nginx 目录是`/var/www/nginx-default`.

您可以检查文件：`/etc/nginx/sites-enabled/default`

并找到

```
server {
        listen   80 default;
        server_name  localhost;

        access_log  /var/log/nginx/localhost.access.log;

        location / {
                root   /var/www/nginx-default;
                index  index.html index.htm;
        } 
```

根是默认位置。

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2016-09-05T17:06:49.343

'default public web root' 可以从 nginx -V 输出中找到：

```
nginx -V
nginx version: nginx/1.10.1
built with OpenSSL 1.0.2h  3 May 2016
TLS SNI support enabled
configure arguments: --prefix=/var/lib/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --pid-path=/run/nginx/nginx.pid --lock-path=/run/nginx/nginx.lock --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --user=nginx --group=nginx --with-ipv6 --with-file-aio --with-pcre-jit --with-http_dav_module --with-http_ssl_module --with-http_stub_status_module --with-http_gzip_static_module --with-http_v2_module --with-http_auth_request_module --with-mail --with-mail_ssl_module 
```

--prefix 值是问题的答案。对于根目录上方的示例是 /var/lib/nginx

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2018-01-29T20:18:27.760

对于 Ubuntu 和 docker 映像：

/usr/share/nginx/html/

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2015-09-09T22:45:54.217

在 Mac OS X 上，使用 brew 安装 nginx 会生成默认目录：

```
/usr/local/var/www 
```

所以：

```
root html 
```

方法

```
root /usr/local/var/www/html 
```

没有 html 目录，因此必须手动创建。

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2014-03-18T15:20:46.960

正如这里的大多数用户所说，它在这条路径下：

```
/usr/share/nginx/html 
```

这是默认路径，但您可以创建自己的路径。

您所需要的只是在 Web 服务器根树中创建一个并赋予它一些权限“不是 0777”，并且仅对一个用户且仅对该用户可见，但自路径结束以来，每个人都可以看到路径的结尾是您的文件和文件夹将被公众查看的内容。

例如，您可以像这样制作：

```
home_web/site1/public_html/www/ 
```

每当您在 Nginx 中创建虚拟主机时，您都可以自定义自己的根路径，只需在您的服务器块中添加如下内容：

```
 server {
    listen  80;
        server_name  yoursite.com;

root /home_web/site1/public_html/www/;
} 
```

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2014-09-01T11:24:37.357

您可以简单地将**nginx 的**根文件夹映射到您网站的位置：

```
nano /etc/nginx/sites-enabled/default 
```

在**默认**文件中，在服务器标签中查找**根目录**并更改您网站的默认文件夹，例如我的网站位于**/var/www**

```
server {
        listen 80 default_server;
        listen [::]:80 default_server ipv6only=on;

        root /var/www; <-- Here!
... 
```

当我评估 nginx、apache2 和 lighttpd 时，我将它们全部映射到位于**/var/www**的网站。我发现这是有效评估的最佳方式。

然后您可以启动/停止您选择的服务器，看看哪个性能最好。

例如

```
service apache2 stop
service nginx start 
```

顺便说一句，nginx 实际上非常快！

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2015-01-02T10:53:52.523

查看 nginx 配置文件以确定。此命令对您机器上配置的任何内容进行 greps：

```
cat /etc/nginx/sites-enabled/default |grep "root" 
```

在我的机器上是：`root /usr/share/nginx/www;`

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2012-05-20T16:05:25.950

nginx 的默认 web 文件夹取决于您的安装方式，但通常位于以下位置：

```
/usr/local/nginx/html
/usr/nginx/html 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2015-09-09T19:35:32.133

转储配置：

```
$ nginx -T
...
server {
    ...
    location / {
        root   /usr/share/nginx/html;
        ...
    }
    ...
} 
```

您得到的可能会有所不同，因为它取决于您`nginx`的配置/安装方式。

参考：

*   [`-T``man`页面上的选项](https://github.com/nginx/nginx/commit/9bd637659a87ae948979ab77cb5b4e7fc83e1068)

*   [`-T`帮助消息中的选项](https://github.com/nginx/nginx/blob/23946be384c42478f3dbc661f60ac0903d1b97f2/src/core/nginx.c#L391)

更新：如果/何时将`-T`选项添加到`nginx`. [vl-homutov](https://github.com/vl-homutov)于 2015 年 6 月 16 日在手册页中记录了它，该手册已成为[v1.9.2 版本](https://github.com/nginx/nginx/releases/tag/release-1.9.2)的一部分。甚至在[发行说明](https://github.com/nginx/nginx/commit/4b768adc2e55e828cd7fb9c73032749fc5f4762c)中也提到过。`-T`此后的每个版本中都存在该选项`nginx`，包括 Ubuntu 16.04.1 LTS 上可用的选项：

```
root@23cc8e58640e:/# nginx -h    
nginx version: nginx/1.10.0 (Ubuntu)
Usage: nginx [-?hvVtTq] [-s signal] [-c filename] [-p prefix] [-g directives]

Options:
  -?,-h         : this help
  -v            : show version and exit
  -V            : show version and configure options then exit
  -t            : test configuration and exit
  -T            : test configuration, dump it and exit
  -q            : suppress non-error messages during configuration testing
  -s signal     : send signal to a master process: stop, quit, reopen, reload
  -p prefix     : set prefix path (default: /usr/share/nginx/)
  -c filename   : set configuration file (default: /etc/nginx/nginx.conf)
  -g directives : set global directives out of configuration file 
```

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2016-04-07T14:59:44.853

运行命令 `nginx -V` 并查找`--prefix`. 使用该条目来定位您的默认路径。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2015-12-25T02:25:15.510

在 Mac 上使用 brew 安装 nginx：

/usr/local/etc/nginx/nginx.conf

```
location / { 
    root   html;  # **means /usr/local/Cellar/nginx/1.8.0/html and it soft linked to /usr/local/var/www**
    index  index.html;
} 
```

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2017-12-15T14:53:05.583

对于 CentOS、Ubuntu 和 Fedora，默认目录是`/usr/share/nginx/html`

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2016-11-24T06:58:58.637

对于 AWS EC2 Linux，您可以在此处找到：

```
/usr/share/nginx 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2014-02-05T12:01:58.430

请注意，nginx 服务器的默认索引页面也将显示根位置。从 Amazon Linux AMI 上的 nginx (1.4.3)，您将获得以下信息：

这是在 Amazon Linux AMI 上随 nginx 分发的默认 index.html 页面。它位于 /usr/share/nginx/html。

您现在应该将您的内容放在您选择的位置，并在 nginx 配置文件 /etc/nginx/nginx.conf 中编辑根配置指令

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2015-09-04T01:44:37.660

就我而言，它在`/usr/share/nginx/html`

您可以尝试通过执行搜索来查找

```
find / -name html 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2017-01-01T12:44:37.080

如果您使用的是 Ubuntu 14.04，您可以在以下路径找到 nginx www 目录：

```
yusuf@yusuf-he:/usr/share/nginx/html$ pwd
/usr/share/nginx/html
yusuf@yusuf-he:/usr/share/nginx/html$ 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2018-06-15T04:48:35.710

您可以搜索它，无论他们将它移动到哪里（系统管理员移动或更新版本的 nginx）

> **查找 / -name nginx**

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2017-03-11T02:36:26.897

你可以访问文件配置 nginx，你可以看到 root /path。在这个默认的 nginx apache 中`/var/www/html`

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2017-03-15T16:18:15.820

如果您需要找出在编译时定义的 nginx 公共根文件夹，您可以检查您的 access.log 文件。

1.  打开**nginx.conf**
2.  找到**log_format**指令
3.  **log_format**的值是一个模板字符串，用于将信息写入**access.log**文件。您可以将**$document_root**变量添加到此模板字符串，以将默认 www 根位置记录到文件中。

这是**nginx.conf**的 http 部分的示例，其中修改**了 log_format**指令，在字符串的开头添加了 $document_root：

```
 http {
        include       /etc/nginx/mime.types;
        default_type  application/octet-stream;

                  ## ADD $document_root HERE ##
        log_format  main  '$document_root $remote_addr - $remote_user [$time_local] "$request" '
                          '$status $body_bytes_sent "$http_referer" '
                          '"$http_user_agent" "$http_x_forwarded_for"';

        access_log  /var/log/nginx/access.log  main;

        etc. ....... 
```

4.  然后备份 conf.d 目录中的所有配置文件 *.conf 并在那里创建配置文件**test.conf**，其中包含以下几行：

    ```
    server{
        listen 80;
        server_name localhost;
    } 
    ```

    5.  将以下行添加到 /etc/hosts 文件：`127.0.0.1 localhost`

    6.  重新加载 nginx 配置：`nginx -s reload`

    7.  [向http://localhost](http://localhost)发送 GET 请求：`curl http://localhost`

    8.  检查**access.log**的最后一个字符串：`tail -n 1 /var/log/nginx/access.log`

这是此命令的示例输出，其中**/etc/nginx/html**是在编译时定义的默认文档根目录：

```
 /etc/nginx/html 127.0.0.1 - - [15/Mar/2017:17:12:25 +0200] "GET / HTTP/1.1" 404 169 "-" "curl/7.35.0" "-" 
```

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2019-07-16T18:22:54.697

***默认页面 web 分配在 var/www/html** ***默认配置服务器 etc/nginx/sites/avaliable/nginx.conf**

```
server {

    listen 80 default_server;
    listen [::]:80 default_server;

    root /var/www/html;

    index index.html index.php;

    server_name _;

    location /data/ {
        autoindex on;
    }

    location /Maxtor {
        root /media/odroid/;
        autoindex on;

    }

        # This option is important for using PHP.
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php7.1-fpm.sock;
    }
} 
```

***默认配置服务器 etc/nginx/nginx.conf**

内容..

```
user www-data;
worker_processes 8;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
    worker_connections 768;
    # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # SSL Settings
    ##

    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE
    ssl_prefer_server_ciphers on;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}

#mail {
#   # See sample authentication script at:
#   # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
# 
#   # auth_http localhost/auth.php;
#   # pop3_capabilities "TOP" "USER";
#   # imap_capabilities "IMAP4rev1" "UIDPLUS";
# 
#   server {
#       listen     localhost:110;
#       protocol   pop3;
#       proxy      on;
#   }
# 
#   server {
#       listen     localhost:143;
#       protocol   imap;
#       proxy      on;
#   }
#} 
```

**带有 ip 客户端的默认访问日志 var/log/nginx/...**

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2016-10-19T09:00:14.773

我在 Ubuntu 上的 nginx 是“nginx 版本：nginx/1.9.12 (Ubuntu)”，根路径是 /var/www/html/

Ubuntu 信息是：没有可用的 LSB 模块。发行商 ID：Ubuntu 描述：Ubuntu 16.04 LTS 版本：16.04 代号：xenial

实际上，如果你刚刚在 Ubuntu 上安装了 nginx，那么你可以去“/etc/nginx/sites-available”查看默认文件，有一个类似“root /web/root/path/goes/here”的配置。这就是你要找的。

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2018-04-13T06:29:02.470

在 Ubuntu 中，Nginx 默认的根目录位置是`/usr/share/nginx/html`

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2018-07-06T09:14:03.933

您可以在 /var/www/ 中找到它，这是 nginx 和 apache 的默认目录，但您可以更改它。步骤 1 转到以下文件夹 /etc/nginx/sites-available

第 2 步编辑默认文件，您可以在其中找到一个服务器块，在该块下将有一个名为 root 的行，它定义了该位置。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2019-03-14T06:01:10.383

在 ubuntu 19.04 中，我们在

> /usr/share/nginx/html

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2016-12-22T02:19:24.273

**对于 nginx/1.4.6 (Ubuntu)**

```
/etc/nginx$ cat /etc/nginx/sites-available/default | grep -i root
- root /usr/share/nginx/html; 
```

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2019-04-12T16:30:09.107

我在使用 nginx 运行 WordPress 网站的 Digital Ocean 上也遇到了这个问题。

我的解决方案是执行以下操作：

1.  使用以下内容修改`/etc/nginx/nginx.conf`文件：

```
server {
root /var/www/html;
} 
```

然后我不得不`sudo service nginx restart`

`nginx -V`命令还向您显示您的 nginx 配置文件的位置（我的被指向`/etc/nginx/nginx.conf`）

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2017-08-27T21:08:08.140

默认与编译nginx时脚本的`prefix`选项有关；`configure`这是来自 Debian 的一些奇怪示例：

```
% nginx -V | & tr ' ' "\n" | fgrep -e path -e prefix
--prefix=/etc/nginx
--conf-path=/etc/nginx/nginx.conf
--error-log-path=/var/log/nginx/error.log
--http-client-body-temp-path=/var/lib/nginx/body
--http-fastcgi-temp-path=/var/lib/nginx/fastcgi
--http-log-path=/var/log/nginx/access.log
--http-proxy-temp-path=/var/lib/nginx/proxy
--http-scgi-temp-path=/var/lib/nginx/scgi
--http-uwsgi-temp-path=/var/lib/nginx/uwsgi
--lock-path=/var/lock/nginx.lock
--pid-path=/var/run/nginx.pid 
```

随后，将默认值[`root`](http://nginx.org/r/root)设置[为`html`目录](http://ngx.su/src/http/ngx_http_core_module.c#ngx_http_core_merge_loc_conf)（根据[指令的](http://nginx.org/r/root)[文档`root`](http://nginx.org/r/root)），该目录恰好位于 内`prefix`，可以通过查看[`$document_root`](http://nginx.org/r/$document_root)简单配置文件中的变量来验证：

```
# printf 'server{listen 4867;return 200 $document_root\\n;}\n' \
    >/etc/nginx/conf.d/so.10674867.conf

# nginx -s reload && curl localhost:4867
/etc/nginx/html 
```

然而，像 Debian 这样的邪恶发行版似乎对其进行了相当多的修改，以让您更加开心：

```
% fgrep -e root -e include /etc/nginx/nginx.conf
    include /etc/nginx/mime.types;
    #include /etc/nginx/naxsi_core.rules;
    #passenger_root /usr;
    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;

% fgrep -e root -e include \
    /etc/nginx/conf.d/*.conf /etc/nginx/sites-enabled/*
/etc/nginx/conf.d/so.10674867.conf:server{listen 4867;return 200 $document_root\n;}
/etc/nginx/sites-enabled/default:   root /usr/share/nginx/www;
/etc/nginx/sites-enabled/default:       # include /etc/nginx/naxsi.rules
/etc/nginx/sites-enabled/default:   #   root /usr/share/nginx/www;
/etc/nginx/sites-enabled/default:   #   include fastcgi_params;
/etc/nginx/sites-enabled/default:   # deny access to .htaccess files, if Apache's document root
/etc/nginx/sites-enabled/default:#  root html;
/etc/nginx/sites-enabled/default:#  root html; 
```

因此，在这个 Debian 实例上，您可以看到 root 最终设置为`/usr/share/nginx/www`.

但是正如您在示例服务器配置中看到的那样，它将`$document_root`通过 http 提供其价值，配置 nginx 非常简单，您可以用一两行代码编写自己的配置，指定`root`满足您的确切需求所需的配置。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2019-05-13T11:41:13.557

Alpine Linux 根本没有任何默认位置。该文件`/etc/nginx/conf.d/default.conf`说：

```
# Everything is a 404
location / {
    return 404;
}

# You may need this to prevent return 404 recursion.
location = /404.html {
    internal;
} 
```

将那些替换`root /var/www/localhost/htdocs`为指向您想要的目录的行。然后`sudo service nginx restart`重新启动。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-10-23T13:17:20.227

导航到文件 $ cat /etc/nginx/nginx.conf

在 http --> server --> root 部分下的文件中

在这里，您将看到根目录的默认位置和所有错误页面。

# c++ - 在控制结构块中定义变量

> ID：10674874
> 
> 赞同：4
> 
> 时间：2012-05-20T15:48:10.673
> 
> 标签：c++

如果我在控制结构的块内定义一个变量，它是否只存在于该控制结构块的执行中而不存在于封闭函数的整个执行中？

还如何监视程序的确切内存使用情况及其更改（即：通过创建和销毁变量来更改内存使用情况）？

稍后添加：在下面的代码中，我知道 v 范围是 if 块，但我想知道 v 是在 if 块的开始/结束还是在函数 func 的开始/结束时在内存中创建/销毁的？

```
void func ()
{
    if (true)
    {
        int v;//automatic storage class
        v = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:49:30.827

> 如果我在控制结构的块内定义一个变量，它是否只存在于该控制结构块的执行中而不存在于封闭函数的整个执行中？

这取决于您在哪里***声明***变量而不是***定义***它。

该变量只能在您声明它的范围内访问。如果你明确地传递它，它*可以*在范围之外访问，但它是否仍然有效将取决于变量的*存储类型*。
例如：`static`变量在整个程序生命周期内保持活动状态，而
从函数返回自动变量的地址将导致未定义行为，因为该变量在函数返回后不再保持有效。

好读： [定义和声明有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

> 如何监控程序的确切内存使用情况及其更改（即：通过创建和销毁变量来更改内存使用情况）？

我相信您会想要获取有关动态分配对象的信息，因为自动对象只能在其范围内存活足够长的时间，它们会自动销毁，因此它们通常不会引起任何问题。

对于动态对象您可以使用内存分析工具（如**[valgrind 和 Massif](http://valgrind.org/docs/manual/ms-manual.html)** ） ，或者您可以[**为您的类**](https://stackoverflow.com/questions/7149461/why-would-one-replace-default-new-and-delete-operators)[**替换`new`和`delete`**](https://stackoverflow.com/questions/7149461/why-would-one-replace-default-new-and-delete-operators)运算符并收集诊断信息。

* * *

**编辑：**解决更新的 Q。

> 在下面的代码中，我知道`v`范围是`if`块，但我想知道是否`v`在 if 块的开始/结束或函数的开始/结束时在内存中创建/销毁`func`？

`v`当声明它的范围开始并且声明它的语句被执行时创建。`v`一旦作用域结束即`}`达到即被销毁。
这个概念用于形成 C++ 中使用最广泛的概念之一的基础，即**[资源分配是初始化（RAII）](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)**。每个 C++ 程序员都**必须**知道它。

通过这个经过修改的小**[代码示例](http://ideone.com/LhBkX)**可以很简单地演示和验证对象的创​​建和销毁：

```
#include<iostream>
class Myclass
{
    public:
        Myclass(){std::cout<<"\nIn Myclass Constructor ";}
        ~Myclass(){std::cout<<"\nIn Myclass Destructor";}
};

void func()
{
    std::cout<<"\nBefore Scope Begins";
    if (true)
    {
        Myclass obj;//automatic storage class
    }
    std::cout<<"\nAfter Scope Ends";
}

int main()
{
    std::cout<<"\nBefore Calling func()";
    func();
    std::cout<<"\nAfter Calling func()";
    return 0;
} 
```

输出是：

> 在调用 func()
> 之前 作用域开始之前
> 在 Myclass 构造函数
> 中 在 Myclass 析构函数中
> 作用域结束
> 之后 在调用 func() 之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:58:18.483

> 局部变量的范围仅限于声明下方的所有代码，直到封闭块结束。该变量对于包含在原始块中的任何其他块也是可见的。

[更多信息](http://nicomp.hubpages.com/hub/Scope-and-Lifetime-of-Variables-in-Cpp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T16:11:42.920

如果局部变量*是*一个对象，那么该对象的生命周期将在声明该变量的块的末尾结束。例子：

```
Foo x;            //  lifetime of "x" begins

{
    some_stuff();

    Foo y;        //  lifetime of "y" begins

    Foo & a = x;  //  local variable "a", no new object

    more_stuff();

}                 //  lifetime of "y" ends; "y" and "a" go out of scope

                  //  (lifetime of "x" ends with its surrounding scope,
                  //   or end of program if it was global) 
```

# android - 使浏览器 cookie 在 web 视图中可用

> ID：10674876
> 
> 赞同：3
> 
> 时间：2012-05-20T15:48:34.707
> 
> 标签：android, webview, android-webview, session-cookies

是否可以使默认浏览器的 cookie 在 web 视图中可用？我想使用 webview 进行身份验证，因为 webview 默认使用自己的 cookie 存储，所以我的用户必须第二次输入他们的凭据，这是我真正想避免的事情。

[编辑] 我忘记添加的内容：我使用 google 和 facebook 作为 openid-providers 进行登录，而且用户很可能已经使用此帐户登录。因此，在网络浏览器中，他们不需要输入他们的凭据，但在网络视图中却是。而且我真的认为在 webview 中要求输入 google 或 facebook 密码是不好的做法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T15:52:26.143

> 是否可以使默认浏览器的 cookie 在 web 视图中可用？

不，对不起。

> 我想使用 webview 进行身份验证，因为 webview 默认使用自己的 cookie 存储，所以我的用户必须第二次输入他们的凭据，这是我真正想避免的事情。

然后：

*   将`WebView`用于整个体验，或
*   使用用户选择的浏览器来获得整个体验，或者
*   使用 cookie 以外的东西进行会话跟踪（例如，`jsession`URL 中的值）

# windows-phone-7 - Bing GeoCode Search API 在 Windows Phone App 中查找本地业务

> ID：10674877
> 
> 赞同：3
> 
> 时间：2012-05-20T15:48:42.033
> 
> 标签：windows-phone-7, bing-maps

我在我的 WP7 应用程序中使用 Bing 搜索 API (http://dev.virtualearth.net/webservices/v1/searchservice/searchservice.svc?wsdl) 来查找印度的本地业务，但我没有得到任何结果作为响应。但是当我在美国搜索业务时，它给了我正确的结果。谁能告诉我搜索服务是否仅适用于美国而不适用于印度或任何其他国家/地区？如果它不支持，您能否建议在 WP7 应用程序中获取本地企业（例如印度海得拉巴附近的餐馆）数据的其他替代方法？提前致谢。

问候， 赛卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:10:00.673

首先，必应搜索 API 正在迁移到 Azure 市场，因此您需要查看以下内容：-

[http://www.bing.com/community/site_blogs/b/developer/archive/2012/05/17/bing-developer-update-2.aspx](http://www.bing.com/community/site_blogs/b/developer/archive/2012/05/17/bing-developer-update-2.aspx)

我目前正在将我的应用程序迁移到使用 Azure，因此我知道迁移指南中与您的搜索结果相关的市场相关的部分，因此您可以将搜索专门针对印度。有一个在线工具可用于确定要使用的搜索 URL 及其返回的结果，因此您应该能够快速确定通过 Azure 市场进行的 Bing 搜索是否返回所需的结果。

# gcc - arm-angstrom-linux-gnueabi-gcc 链接器无法链接到 uclibc

> ID：10674878
> 
> 赞同：2
> 
> 时间：2012-05-20T15:48:42.777
> 
> 标签：gcc, ld, uclibc, angstrom-linux, openembedded

我正在尝试为 angstrom linux 构建一个应用程序（在我的例子中，它使用 uclibc 而不是 libstdc++）。我正在使用 bitbake 和 openembedded。使用简单的工具链，我只需添加`-muclibc`标志即可成功构建。使用 bitbake 我的构建命令如下

```
arm-angstrom-linux-gnueabi-gcc -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp -mthumb-interwork -mno-thumb --sysroot=/home/hnsl/stuff/tmp/sysroots/armv7a-angstrom-linux-gnueabi -fexpensive-optimizations -fomit-frame-pointer -frename-registers -O2 -ggdb2 -Wl,-O1 -Wl,--hash-style=gnu -muclibc mainThread.cpp lib.cpp -lportaudio 
```

我在哪里`-muclibc mainThread.cpp lib.cpp -lportaudio`做的。Portaudio ( `-lportaudio`) 已成功链接。uclibc（我认为）链接失败；我收到这些错误：

```
 /tmp/ccW4SVb4.o: In function `main':
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/mainThread.cpp:68: undefined reference to `__cxa_end_cleanup'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/mainThread.cpp:68: undefined reference to `__cxa_begin_catch'
| /tmp/ccW4SVb4.o: In function `operator<< <std::char_traits<char> >':
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:513: undefined reference to `std::cerr'
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:513: undefined reference to `std::cerr'
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:513: undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, int)'
| /tmp/ccW4SVb4.o: In function `std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))':
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:113: undefined reference to `std::cerr'
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:113: undefined reference to `std::cerr'
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:113: undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)'
| /tmp/ccW4SVb4.o: In function `main':
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/mainThread.cpp:68: undefined reference to `__cxa_end_catch'
| /tmp/ccW4SVb4.o: In function `operator<< <std::char_traits<char> >':
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:511: undefined reference to `std::cerr'
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/ostream:511: undefined reference to `std::cerr'
| /tmp/ccW4SVb4.o: In function `std::basic_ios<char, std::char_traits<char> >::setstate(std::_Ios_Iostate)':
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/bits/basic_ios.h:148: undefined reference to `std::basic_ios<char, std::char_traits<char> >::clear(std::_Ios_Iostate)'
| /tmp/ccW4SVb4.o: In function `main':
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/mainThread.cpp:68: undefined reference to `__cxa_end_catch'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/mainThread.cpp:68: undefined reference to `__cxa_end_cleanup'
| /tmp/ccW4SVb4.o: In function `__static_initialization_and_destruction_0':
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/iostream:73: undefined reference to `std::ios_base::Init::Init()'
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/iostream:73: undefined reference to `std::ios_base::Init::~Init()'
| /home/hnsl/stuff/tmp/sysroots/x86_64-linux/usr/armv7a/lib/gcc/arm-angstrom-linux-gnueabi/4.5.3/../../../../arm-angstrom-linux-gnueabi/include/c++/4.5.3/iostream:73: undefined reference to `std::ios_base::Init::~Init()'
| /tmp/ccW4SVb4.o:(.ARM.extab+0x0): undefined reference to `__gxx_personality_v0'
| /tmp/ccW4SVb4.o:(.ARM.extab+0x28): undefined reference to `typeinfo for char const*'
| /tmp/ccUEShoN.o: In function `endOnError(void*, int, char*)':
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:23: undefined reference to `__cxa_allocate_exception'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:23: undefined reference to `typeinfo for char const*'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:23: undefined reference to `typeinfo for char const*'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:23: undefined reference to `__cxa_throw'
| /tmp/ccUEShoN.o: In function `initFramework(char**, void**, PaStreamParameters*, PaStreamParameters*)':
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:32: undefined reference to `__cxa_allocate_exception'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:32: undefined reference to `typeinfo for char const*'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:32: undefined reference to `typeinfo for char const*'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:32: undefined reference to `__cxa_throw'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:37: undefined reference to `__cxa_allocate_exception'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:37: undefined reference to `typeinfo for char const*'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:37: undefined reference to `typeinfo for char const*'
| /home/hnsl/stuff/tmp/work/armv7a-angstrom-linux-gnueabi/cphone-1.0.0-r1/lib.cpp:37: undefined reference to `__cxa_throw'
| collect2: ld returned 1 exit status 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:13:13.140

你真的应该用它`g++`来编译和链接 C++ 代码。它将负责为标准 C++ 库添加正确的包含路径和链接器选项。

可以使用 来执行此操作`gcc`，但始终`g++`同时使用编译和链接要容易得多。

# java - 尝试将 PDF 转换为带有字体的文本

> ID：10674880
> 
> 赞同：4
> 
> 时间：2012-05-20T15:48:54.697
> 
> 标签：java, pdf, fonts, pdfbox, txtextcontrol

我正在尝试阅读 PDF 文件并将文本存储在文本文件中。但是在这样做的同时，我还想同时存储字体信息。我知道 PDFbox for text stropping 和 fontbox for fonts 可以组合吗？

# qt - Qt 运动（线性）模糊

> ID：10674883
> 
> 赞同：4
> 
> 时间：2012-05-20T15:49:40.067
> 
> 标签：qt, blur, motion-blur

有没有简单的解决方案可以在 Qt 中为图像添加运动模糊？还没有找到任何关于模糊的好教程。我需要一些非常简单的东西，我可以理解，如果我能改变模糊角度，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:23:32.137

Qt 没有运动模糊过滤器。我查看了代码`QGraphicsBlurEffect`；它使用which 本身使用称为（指数模糊）`QPixmapBlurEffect`的内部辅助方法。`expblur`

`expblur``qt_blurrow`本身使用了两次一维模糊效果（X方向运动模糊，方法）。它将两个模糊之间的图像旋转 90 度，然后将其旋转回来。

所以实际上，Qt*有*运动模糊效果，但这只是内部的。所以需要自己写效果。为此，请查看 的代码`qt_blurrrow`，您可以在 Qt 源代码中找到该代码`src/gui/qpixmapfilter.cpp`。这将为您提供良好的过滤器质量，因为它是指数模糊过滤器而不是线性过滤器。

如果您不想深入研究 Qt 源代码，请从以下伪代码开始：

```
foreach pixel (x, y) in image {
    for dx = -r to r with x+dx within image {
        for dy = -r to r with y+dy within image {
            Add pixel (x+dx, y+dy) of the source image with ↩
            factor (matrix[dx, dy]) to the target image.
        }
    }
} 
```

其中矩阵可以这样定义（对于半径为 2 的水平运动模糊）：

```
0   0   0   0   0
0   0   0   0   0
0.1 0.2 0.4 0.2 0.1
0   0   0   0   0
0   0   0   0   0 
```

请注意，所有条目的总和必须为 1，或者您必须将颜色除以矩阵条目的总和。

当您想要允许 α 的任意角度（不仅仅是 90 度步长）时，为给定的半径 r 和角度 α 构建这个矩阵是很困难的。[编辑：请参阅评论 3 以轻松生成此类矩阵。]

# node.js - 带有 Express.js 虚拟主机的子域上的 Socket.IO

> ID：10674884
> 
> 赞同：3
> 
> 时间：2012-05-20T15:49:40.780
> 
> 标签：node.js, express, socket.io, connect

我的服务器上运行了两个 Express.js 应用程序。

一个普通的应用程序称为“main-app”，另一个使用 Socket.IO 的应用程序称为“socket-app”。

我在“mydomain.com”和“socket-app”在“socket.mydomain.com”的子域上运行“main-app”

我通过 Express 的内置 vhost 中间件将请求路由到套接字应用程序。

-- 在 main-app.js 里面 --

```
var express = require('express');
var app = module.exports = express.createServer();
app.use(express.vhost('socket.mydomain', require('./socket-app/app.js')));

app.listen(8080, function(){
  console.log("Express server listening on port %d in %s mode");
}); 
```

这工作正常，我可以看到我的套接字应用程序在 socket.mydomain 的端口 8080 上运行

但是，通过这里讨论的通过 vhost 运行 Socket.IO 应用程序时，websockets 超时并且没有接收到“升级”事件似乎存在问题[。](https://github.com/senchalabs/connect/issues/459)

所以我的问题是如何将这个“升级”事件从我的主应用程序传输到我的套接字应用程序，以便所有连接的套接字都能听到有人连接和断开连接？

我尝试从“主应用程序”中发出“升级”事件，但它似乎没有工作。

```
app.on('upgrade', function(req, socket) {
    socket.emit('upgrade', app);    
}); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T01:41:10.730

解决方案是在您的根应用程序中创建一个 Socket.IO 实例，该实例可由您的子域应用程序全局访问，然后在其自己的 Socket.IO 命名空间中运行每个应用程序以保持其自主权。

我刚刚构建了一个[简单的示例](http://chat.braitsch.io)，它运行聊天应用程序的三个实例，它们都共享同一个 Socket.IO 实例，该实例在根应用程序中声明。

如果您[克隆项目](http://github.com/braitsch/sub.socket.io)并按照说明设置本地子域，您可以看到聊天应用程序的每个实例独立于其他实例运行。

明天早上我会尝试写一篇博客文章，详细说明它是如何工作的。

**更新**

[这是一篇关于如何跨多个域共享 Socket.IO 实例的文章。](http://www.quietless.com/kitchen/building-a-node-js-chat-application-and-sharing-socket-io-across-multiple-subdomains/)

# db2 - DB2 Express V10.1 和 db2cc 二进制文件

> ID：10674887
> 
> 赞同：4
> 
> 时间：2012-05-20T15:49:47.043
> 
> 标签：db2

我刚刚安装了带有个性化安装的 DB2 Express v10.1，我在其中检查了所有复合材料，但找不到用于启动控制中心的 db2cc 二进制文件。

有人知道 db2cc 二进制文件是否已重命名、删除以及如何启动控制中心？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T17:11:13.777

从 DB2 9.7 开始，[不推荐使用](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.wn.doc/doc/i0054250.html)DB2 Control Center 。IBM在 DB2 10.1 中 [停止了它。](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.wn.doc/doc/i0058731.html)

Control Center（和其他相关工具）已被 IBM Data Studio 取代。[您可以从 IBM](http://www-304.ibm.com/support/docview.wss?uid=swg24032153)下载支持 DB2 10.1 的 Data Studio 3.1.1 版本。

# java - JTextArea 不显示文本

> ID：10674890
> 
> 赞同：4
> 
> 时间：2012-05-20T15:49:59.033
> 
> 标签：java, swing, jtextarea, swingworker

在我在 textarea 中显示文本的函数中，我编写了以下代码行，但它没有显示任何文本

```
 jTextArea1.setText( Packet +"\n" +jTextArea1.getText()); 
```

我正在使用 swingworker 执行后台任务，这是我的代码

```
public class SaveTraffic extends SwingWorker<Void, Void> {

public GUI f = new GUI();

@Override
public Void doInBackground() throws IOException {
              //some code
              sendPacket(captor.getPacket().toString()); 
              return null;
             }//end main function

@Override
public void done() {
    System.out.println("I am DONE");

}

public void sendPacket(String Packet) {

 f.showPackets(Packet);
} 
```

}

以及我在我的 GUI 表单中编写的以下代码行

```
 public  void showPackets(String Packet) {

 jTextArea1.append( Packet);

} 
```

解决方案：公共类 SaveTraffic 扩展 SwingWorker {

```
 public GUI f = new GUI();

     @Override
    public Void doInBackground() throws IOException {
    f.add(jTextPane1);
   // some code

   publish(captor.getPacket().toString());

   // the method below is calling sendPacket on the background thread
   // which then calls showPackets on the background thread
   // which then appends text into the JTextArea on the background thread
  //sendPacket(captor.getPacket().toString());

    return null;
   }

  @Override
   protected void process(List<String> chunks) {
   for (String text : chunks) {
     jTextPane1.setText(text);
     f.showPackets(text);
   }
  }

  @Override
  public void done() {
   System.out.println("I am DONE");

   } 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T15:51:16.950

而不是使用 setText() 使用 append()

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T15:52:39.793

您的问题是一个非常不完整的问题，一个没有足够信息来回答的问题，一个迫使我们猜测的问题，但基于您原始帖子中的这一行：

> 该函数被连续调用...

我猜，我敢打赌你有一个 Swing 线程问题。您可能需要阅读并使用 SwingWorker。

从这里开始了解 EDT 和 SwingWorkers：[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

是的，您的问题是您从后台线程中进行 Swing 调用引起的 Swing 并发问题。为避免这样做，您需要从 doInBackground 导出数据并在 Swing 事件线程上调用它。一种方法是通过发布/处理方法对：

```
public class SaveTraffic extends SwingWorker<Void, String> {

  public GUI f = new GUI();

  @Override
  public Void doInBackground() throws IOException {

     // some code

     publish(captor.getPacket().toString());

     // the method below is calling sendPacket on the background thread
     // which then calls showPackets on the background thread
     // which then appends text into the JTextArea on the background thread
     //sendPacket(captor.getPacket().toString());

     return null;
  }

  @Override
  protected void process(List<String> packetTextList) {
     for (String packetText : packetTextList) {
        sendPacket(packetText); //edit, changed to match your code
     }
  }

  @Override
  public void done() {
     System.out.println("I am DONE");

  }

  public void sendPacket(String Packet) {

     f.showPackets(Packet);
  }
} 
```

查看我上面链接的教程和 SwingWorker API 以获取更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T15:55:21.370

由于您的代码片段太小而无法给出正确答案，我能想到：

1.  当你在更新的时候`jTextArea`，`Packet`是空的吗？你能检查一下吗。

2.  调用此方法`jTextArea`时是否有任何文字？如果没有并且`Packet`为空，您将看不到任何结果。

编辑：根据评论：

要附加文本，请使用[append](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29)，另请阅读[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

虽然我希望`setText`至少第一次显示文本，但请参见下面的最低示例代码：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class TestJTextArea {
    static void init() {
        JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());
        final JTextArea textArea = new JTextArea();
        frame.add(textArea, BorderLayout.NORTH);
        final JTextField textField = new JTextField();
        frame.add(textField,BorderLayout.CENTER);
        JButton button = new JButton("Add");
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                textArea.setText(textField.getText());
            }
        });
        frame.add(button,BorderLayout.SOUTH);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        init();
    }
} 
```

对此，我也同意 @Hovercraft Full Of Eels 的观点，即您可能有 Swing 线程问题，或者只是使用 append 来附加文本

# templates - 等效于 Glu 中的 Chef 模板

> ID：10674892
> 
> 赞同：3
> 
> 时间：2012-05-20T15:50:14.910
> 
> 标签：templates, deployment, configuration, chef-infra

[Chef 中的模板](http://wiki.opscode.com/display/chef/Templates)非常适合生成配置文件 - 您有用于创建文件的模板引擎，并且您可以在多个级别传递参数 - 默认、基于角色、节点。

[部署自动化平台glu](https://github.com/linkedin/glu)有类似的东西吗？

我能找到的唯一类似的就是[这个](https://github.com/linkedin/glu/blob/master/scripts/org.linkedin.glu.script-jetty/src/main/groovy/JettyGluScript.groovy)设置码头的例子。如果您查看脚本的末尾，您会看到一些多行字符串，这些字符串用作特定文件的文件内容。这可以工作，但似乎有些混乱，我希望有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:30:20.703

glu 没有任何内置的模板机制。

话虽如此，就像您在示例中指出的那样，您可以使用`shell.saveContent()`允许您`@xxx@`自动替换值的 api。您替换的“字符串”不必在 glu 脚本本身内，并且可以使用`shell.cat(url)`api 从 url 中简单地读取。

如果您想更复杂，glu 脚本只需用 groovy 编写，因此您可以使用 groovy 附带的模板机制：http: [//groovy.codehaus.org/Groovy+Templates](http://groovy.codehaus.org/Groovy+Templates)

# c# - Google 数据登录 YouTube？

> ID：10674897
> 
> 赞同：2
> 
> 时间：2012-05-20T15:50:42.087
> 
> 标签：c#, youtube, gdata

如何在 C# 中使用 GData 从 youtube 登录/注销？创建浏览器实例并在页面上显示视频会更快，还是有办法将其直接嵌入到您的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:47:06.287

如果您使用的是 .NET 客户端库 (http://code.google.com/p/google-gdata/)，那么它将在需要时使用您提供的凭据为您进行身份验证：

[https://developers.google.com/youtube/2.0/developers_guide_dotnet#Authentication](https://developers.google.com/youtube/2.0/developers_guide_dotnet#Authentication)

使用 GData API 时，没有明确的注销方法，您可以使您的令牌无效，但如果您不使用它，它也会在一段时间后过期。关于如何使令牌失效的具体细节根据所采用的身份验证机制（OAuth、AuthSub、ClientLogin）而有所不同。

# iphone - UITableView 错误

> ID：10674903
> 
> 赞同：-1
> 
> 时间：2012-05-20T15:51:19.520
> 
> 标签：iphone, ios, xcode, cocoa-touch, uitableview

伙计们。我有表格视图控制器和模式视图。有时关闭模态视图后，我的表格视图没有滚动。可能你知道，问题出在哪里？PS：我的模态视图非常“沉重”，但它不应该引起问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:02:52.493

我见过类似的行为。我敢打赌，当您的模态可见时，由于出现内存警告，您的表格视图控制器正在被卸载（您提到模态是“沉重的” - 我假设您的意思是在内存占用方面很重）。然后在您关闭模式时重新加载它。我经常看到表格视图在最初加载时无法滚动。

我认为我过去使用的解决方法是将表格视图的框架高度更改为更大，然后再回到正确的大小`viewWillAppear:`。我建议你尝试这样的事情。

与此同时，我认为您应该尝试确定一个显示问题的简单示例项目并将[其归档为雷达](http://bugreport.apple.com/)。

# spotify - 是否存在与手动更改玩家位置相对应的事件？

> ID：10674911
> 
> 赞同：2
> 
> 时间：2012-05-20T15:52:33.470
> 
> 标签：spotify

我想防止用户手动更改当前曲目的位置。我的想法是拦截这个事件：

```
data: Object
contextclear: false
curcontext: false
curtrack: false
playstate: false
repeat: false
shuffle: false
volume: false
__proto__: Object
type: "playerStateChanged"
__proto__: Object 
```

但每次我点击播放/暂停时，这个事件也会被捕获。这个动作有特殊类型的事件吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:58:45.293

目前，无法禁用搜索栏从用户获取操作。Soundrop 通过从后端连续同步播放时间来解决这个问题。

此功能正在考虑中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:58:58.410

只要当前上下文、当前曲目、播放状态、重复、随机播放或音量发生变化，就会触发该事件，正如您可以从属性中看到的那样。检查哪个属性设置为`true`让您知道实际发生了什么。

至于拦截事件以阻止它们，我怀疑那会起作用。播放器的 JS 事件更像是通知 - 除非您通过手动将播放状态设置回您想要的状态来“破解”它，否则您无法真正阻止这种事情。

# java - HtmlUnit 修改传出请求？如何？

> ID：10674923
> 
> 赞同：0
> 
> 时间：2012-05-20T15:54:47.267
> 
> 标签：java, htmlunit

我正在尝试在 HtmlUnit 发出请求之前对其进行修改，我做了很多谷歌搜索并在他们的常见问题解答中找到了这个

[http://htmlunit.sourceforge.net/faq.html#HowToModifyRequestOrResponse](http://htmlunit.sourceforge.net/faq.html#HowToModifyRequestOrResponse)

> 如何修改传出请求或传入响应？您可以继承 HttpWebConnection 并将 getResponse() 覆盖为：
> 
> ```
>  new WebConnectionWrapper(webClient) {
> 
>         public WebResponse getResponse(WebRequest request) throws IOException {
>             WebResponse response = super.getResponse(request);
>             // modify the response by creating a new WebResponse
>             return response;
>         }
>     }; 
> ```

单击提交按钮后，我正在尝试修改请求，如下例所示

```
page = submitButtonSend.click(); 
```

这应该怎么写，以便我可以在发出请求之前修改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:59:49.460

```
public WebResponse getResponse(WebRequest request) throws IOException {
    modifyRequest(request);
    return super.getResponse(request);
} 
```

# ios - Theos/Logos 钩子集 ivar/property

> ID：10674931
> 
> 赞同：1
> 
> 时间：2012-05-20T15:56:01.127
> 
> 标签：ios, jailbreak

我正在尝试`CLLocationManager's`使用徽标挂钩委托属性的设置。我当前的代码如下所示：

```
%hook CLLocationManager
-(void)startUpdatingLocation
{
    %orig;

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"test"
        message:@"hello!"
        delegate:nil
        cancelButtonTitle:@"Bye"
        otherButtonTitles:nil];
    [alert show];
    [alert release];
}
%end 
```

我想覆盖委托属性的设置，这样我就可以创建一个代理类来过滤发送到应用程序的位置。有没有什么漂亮的方法可以使用徽标来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:15:13.317

是的。将属性设置器视为一种常规方法，您可以这样做：

```
%hook CLLocationManager
- (void) setDelegate:(id<CLLocationManagerDelegate>)delegate {
    // set up your proxy / whatever you're looking to do

    %orig;
}
%end 
```

# forms - 如何检查表单提交 ASP 经典

> ID：10674933
> 
> 赞同：13
> 
> 时间：2012-05-20T15:56:13.380
> 
> 标签：forms, post, asp-classic

我在 ASP 经典中设置了一个表单，它会在提交后重新加载（动作自我）

但是这次它显示的是以前提交的结果，那么如何检查是否已经进行了 POST 提交呢？

就像在 PHP 中一样：

```
if($_POST['submit']) {
  show results...
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-20T17:03:33.323

你有几个选择：

**方法1** - 检查请求方法：

```
If Request.ServerVariables("REQUEST_METHOD") = "POST" Then
    'Show Results...
End If 
```

**方法 2** - 在表单中添加一个带有值的隐藏字段，然后检查该值是否已发布：

```
If Request.form("HiddenValue") = "1" Then
    'Show Results...
End If 
```

**方法 3** - 检查 request.form 集合是否包含项目：

```
If Request.Form.Count > 0 Then
    'Show Results...
End If 
```

**方法 4** - 发布到查询字符串（即`action`to`<form>`集合`?post=yes`）

```
If Request.QueryString("post") = "yes" Then
    'Show Results...
End If 
```

**选哪一个？**

我的首选选项是方法 4——因为它在地址栏中很容易看到正在发生的事情——如果出于某种原因我想避免在 url 中显示这种详细程度，我倾向于使用选项 3，因为它很容易实现，不需要对源表单进行任何更改并且是可靠的。至于其他两种方法：

*   **方法 1——**如果我不能 100% 控制服务器，我倾向于避免依赖服务器变量——这没有真正的理由，只是我倾向于使用的一般习惯。
*   **方法 2** – 您可以将隐藏字段替换为始终包含值的另一个字段。

# jquery - jquery设置要提交的url

> ID：10674937
> 
> 赞同：4
> 
> 时间：2012-05-20T15:56:26.690
> 
> 标签：jquery, jquery-ui

我有一个带有此验证的表格

# jQuery

```
$("#aioForm").on('submit',function(e){
        var errorCount = 0;
        $('span.errorMessage').text('');
        // checkign for multiple select [now you have one]
        var select = $('#addIO select').filter(function(){
            return this.selectedIndex == 0;
        }).next('span').text('Please select a cell');
        // checking for inputs
        var input = $("#aioForm input[type=text]").filter(function() {
            return !this.value;
        }).next('span').text("fill the name please");
        // no error checking
        if(input.length==0 && select.length == 0){
            $(this)[0].submit(); // submit form if no error
        }
        e.preventDefault();
    }); 
```

如果没有错误我想在提交之前设置要提交的 url，我的意思是在声明之前

```
$(this)[0].submit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:58:42.857

```
if(input.length==0 && select.length == 0){
   $(this).attr('action', 'url_to_submit').submit(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T15:59:23.100

你需要使用：

```
$(this).submit(); 
```

**编辑：（** *在OP评论之后）*

如果您想使用 javascript 中的某些特定值提交表单：

在表单中添加两个字段，如下所示：

```
<input type='hidden' name='currentRelation' id='currentRelation'>
<input type='hidden' name='currentConcept' id='currentConcept'> 
```

现在在 jQuery 中，您需要在提交之前执行此操作：

```
// Get values from HTML (According to your previous question)
var ioAddConcept = $(".ioAddConcept").html();
var ioAddRelation = $(".ioAddRelation").html();

// Set these values to hidden fields
$('#ioAddConcept').text( ioAddConcept );
$('#ioAddRelation').text( ioAddRelation );

// Now submit form
$(this).submit(); 
```

现在在服务器端：

```
print_r( $_POST ); 
// OR 
print_r( $_GET ); 
```

# python - 有人能解释一下为什么这个日期时间比较在 python 中显示输出的方式吗？

> ID：10674940
> 
> 赞同：0
> 
> 时间：2012-05-20T15:56:43.240
> 
> 标签：python, datetime

我正在解析一个原子提要。提要中有一个更新的标签。它的值为**2012-05-20T02:24:56Z**。我以这种方式将此信息插入到表中。

```
cursor.execute('Insert into Timing (LastUpdatedTime) Values(?)',
                (testFeed.feed.updated,)) 
```

之后，我从表中获取值并以这种方式将其转换为日期时间

```
cursor.execute("Select LastUpdatedTime from Timing")
lastUpdatedTime=datetime.strptime(list(cursor.fetchone())[0],
                '%Y-%m-%dT%H:%M:%SZ').isoformat() 
```

lastUpdatedTime 的值为**2012-05-20T02:24:56**

现在，当我将 testFeed.feed.updated 的值与 lastUpdatedTime 进行比较以检查提要是否有任何新条目时，我的比较给出了我无法理解的输出。

```
print testFeed.feed.updated == lastUpdatedTime 
```

这将返回错误打印 testFeed.feed.updated > lastUpdatedTime

这返回真。比较时变量的值： testFeed.feed.updated= **2012-05-20T02:24:56Z** lastUpdatedTime= **2012-05-20T02:24:56**

数据库中的列是文本类型。

testFeed.feed.updated 的类型是 unicode

lastUpdatedTime 的类型是字符串

使用 python 2.7.2，在 Ubuntu 11.10 上工作

它在将 unicode 对象转换为 datetime `currentFeedTime=datetime.strptime(str(testfeed.feed.updated),'%Y-%m-%dT%H:%M:%SZ').isoformat()`然后与以前的时间进行比较后工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:55:20.467

你看到的行为对我来说很有意义，因为`testFeed.feed.updated`最后有一个额外的“Z”。

话虽如此，如果您要进行日期/时间比较，我认为您最好将两个日期都转换为`datetime.datetime`，因此类似于：

为了`lastUpdatedTime`

```
cursor.execute("Select LastUpdatedTime from Timing")
# Note that I'm not converting this to a string.
lastUpdatedTime=datetime.strptime(list(cursor.fetchone())[0],'%Y-%m-%dT%H:%M:%SZ') 
```

而不是`testFeed.feed.updated`：

```
feedUpdatedTime=datetime.strptime(testFeed.feed.updated,'%Y-%m-%dT%H:%M:%SZ') 
```

然后比较两者：

```
print feedUpdatedTime == lastUpdatedTime 
```

# php - Jquery选项卡保持打开的选项卡在url中是subid

> ID：10674947
> 
> 赞同：0
> 
> 时间：2012-05-20T15:57:28.740
> 
> 标签：php, javascript, jquery, html

我正在使用 jquery 选项卡，并尝试在每个选项卡中进行分页，但一切正常，但是，如果我单击以转到第二个选项卡上的下一页，它可以正常工作，但会将我传送到打开的第一个选项卡，所以您必须继续单击第二个选项卡才能查看新内容。我的问题是如何做到这一点，以便当用户单击分页中的下一页时，内容会刷新但相同的选项卡保持打开状态。

我关于如何将其合并到我当前代码中的计划是使用 url`mail.php?page=2&tid=2`

其中 page=2 是工作正常的分页的参考，但我希望 tid（标签 ID）使其成为打开的标签。

这是您可能认识的标签的 javascript

```
$(document).ready(function() {

    //Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return false;
    });

}); 
```

以及标签的 html（必须注释掉列表）

```
//<div id="tabsX">   <div id="tabContent">   <ul class="tabs">
   // <!--<li><a id="all" href="#all" class="all">All</a></li>-->
   // <li><a href="#inbox" class="inbox"></a></li>
   // <li><a href="#outbox" class="outbox"></a></li>
   // <li><a href="#compose" class="compose"></a></li>
    //<li><a href="#trash" class="trash"></a></li>
   // 

   // </ul> 
```

以及选项卡内容的 html（仅显示一个作为示例，没有内容，因为要显示的内容太多）

```
<div id="inbox" class="tab_content">
      <div id="inbox_header" style="display:table-cell; vertical-align:middle">
      <!---content--->          

      </div><!---end inbox_content--->

</div><!---end inbox---> 
```

我真的很感激任何帮助，因为我似乎无法为自己找到任何解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:11:44.940

[您可以从此处](https://stackoverflow.com/a/901144/344304)使用以下函数来捕获`tid`javascript 中的参数

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

然后像这样更改您的代码

```
var tabIndex = parseInt(getParameterByName('tid'),10);
$("ul.tabs li").eq(tabIndex - 1).addClass("active").show(); //Activate first tab
$(".tab_content").eq(tabIndex - 1).show(); //Show first tab content 
```

所以你的完整`js`代码将是

```
function getParameterByName(name)
    {
      name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
      var regexS = "[\\?&]" + name + "=([^&#]*)";
      var regex = new RegExp(regexS);
      var results = regex.exec(window.location.search);
      if(results == null)
        return "";
      else
        return decodeURIComponent(results[1].replace(/\+/g, " "));
    } 
$(document).ready(function() {

    //Default Action
    $(".tab_content").hide(); //Hide all content

    var tabIndex = parseInt(getParameterByName('tid'),10);
    if(!tabIndex)
       tabIndex = 1;
    $("ul.tabs li").eq(tabIndex - 1).addClass("active").show(); //Activate first tab
    $(".tab_content").eq(tabIndex - 1).show(); //Show first tab content

    //On Click Event
    //  add you onlick code here

  )}; 
```

我加入`-1`是`eq`因为它是`0-based`. 在此处查看文档[$.eq](http://api.jquery.com/eq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:53:21.490

我建议查看 jquery 选项卡的文档。您可以使用许多选项。cookie 选项：

```
$( ".selector" ).tabs({ cookie: { expires: 30 } }); 
```

> 将最新选择的选项卡存储在 cookie 中。如果未定义所选选项，则使用 cookie 确定最初选择的选项卡。需要 cookie 插件，该插件也可以在下载构建器的 development-bundle>external 文件夹中找到。该对象需要具有 cookie 插件期望作为选项的形式的键/值对。可用选项（示例）：{ expires: 7, path: '/', domain: 'jquery.com', secure: true }。从 jQuery UI 1.7 开始，还可以通过 name 属性定义正在使用的 cookie 名称。

此外，您可以使用选定的选项。这使您可以指定在初始化时应打开哪个选项卡：

```
$( ".selector" ).tabs({ selected: 3 }); 
```

第三个选项是通过 ajax 调用加载选项卡的内容。

# jquery - Liferay 首次登录 Portlet CSS 问题

> ID：10674948
> 
> 赞同：3
> 
> 时间：2012-05-20T15:57:34.583
> 
> 标签：jquery, css, internet-explorer, liferay, portlet

我向 Liferay 添加了一个首次登录 portlet。然后我添加了一些 CSS 和 jQuery 代码。它适用于除 IE 之外的所有浏览器。我在使用 IE 时遇到的问题是它不会加载 CSS 和 jQuery 文件。基本上我的意思是，当我在 IE 上运行 portlet 时，没有来自 jQuery 的 CSS 样式和交互。同样，它在所有其他浏览器上都可以正常工作。

我在IE8上测试。它仅以纯 html 格式显示。没有 CSS 样式影响它。除非我在每个 html 元素中嵌入 css 代码。然后它工作正常。但我不想将 jsp 和 css 文件结合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:46:33.710

在 IE 上无法解释之前，我已经使用这个技巧来“修复”css/js 加载错误（其他浏览器也是如此）。

```
http://localhost:8080/?strip=0&js_fast_load=0 
```

当然要替换您的主机、端口和门户上下文 url。

# python - 如何在python中的不同类上使用相同的对象？

> ID：10674953
> 
> 赞同：3
> 
> 时间：2012-05-20T15:57:43.457
> 
> 标签：python, oop, class

这可能是一个非常基本的问题。

我有一些对象，我想创建一次，然后由我的应用程序的许多类使用，例如“logging”和“db”。每次不同的班级想要做某事时，我都不想与数据库建立新的连接。

所以我的想法是创建一个像这样的类：

```
class MyDB(object):
    mydb=createMySQLconnection() 
```

然后我会做“从......导入MyDB”并使用MyDB.mydb

它会工作吗？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:59:24.593

这会起作用，但没有理由创建一个类。只需将`mydb`模块作为独立变量放入。

通常，当您在其他编程语言中使用[单例](https://en.wikipedia.org/wiki/Singleton_pattern)时，您可以在 Python 中使用模块。

# jquery - jQuery find() 确实适用于 Chrome 和 Firefox，但不适用于 IE

> ID：10674956
> 
> 赞同：1
> 
> 时间：2012-05-20T15:58:12.570
> 
> 标签：jquery, internet-explorer, cross-browser, xml-parsing

这是我从 Web 服务获得的对提交的 Url 的响应。

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/xml;charset=UTF-8
Content-Language: en-US
Transfer-Encoding: chunked
Date: Sun, 20 May 2012 15:35:52 GMT
Connection: close

841
<!--?xml version="1.0" encoding="UTF-8"?-->
<doi_records>
  <doi_record owner="10.1016" timestamp="2012-04-21 12:08:25">
    <crossref>
      <journal>
        <journal_metadata language="en">
          <full_title>Procedia - Social and Behavioral Sciences</full_title>
          <abbrev_title>Procedia - Social and Behavioral Sciences</abbrev_title>
          <issn media_type="print">18770428</issn>
        </journal_metadata>
        <journal_issue>
          <publication_date media_type="print">
            <month>1</month>
            <year>2011</year>
          </publication_date>
          <journal_volume>
            <volume>15</volume>
          </journal_volume>
          <special_numbering>C</special_numbering>
        </journal_issue>
        <journal_article publication_type="full_text">
          <titles>
            <title>The effect of teaching the cognitive and meta-cognitive strategies (self-instruction procedure) on verbal math problem-solving performance of primary school students with verbal problem- solving difficulties</title>
          </titles>
          <contributors>
            <person_name contributor_role="author" sequence="first">
              <given_name>Narges</given_name>
              <surname>Babakhani</surname>
            </person_name>
          </contributors>
          <publication_date media_type="print">
            <month>1</month>
            <year>2011</year>
          </publication_date>
          <pages>
            <first_page>563</first_page>
            <last_page>570</last_page>
          </pages>
          <publisher_item>
            <item_number item_number_type="sequence-number">S1877042811003211</item_number>
            <identifier id_type="pii">S1877042811003211</identifier>
          </publisher_item>
          <doi_data>
            <doi>10.1016/j.sbspro.2011.03.142</doi>
            <resource>http://linkinghub.elsevier.com/retrieve/pii/S1877042811003211</resource>
          </doi_data>
        </journal_article>
      </journal>
    </crossref>
  </doi_record>
</doi_records>
0 
```

用户输入一个输入一个变量是一个表单并点击一个`<button>`，ajax调用触发并获取上述数据。然后根据返回的 xml 进行适当的操作。这就是我正在做的事情：

```
<script type="text/javascript">
...
if ($('input:text[name=ident]').val() !=  "")
{
    $.post("<?php echo site_url('con/met/') ?>",
    {doi:$('input:text[name=ident]').val()}, 
    function(responseText){ parseXmlDoi(responseText)},  
    "html"
);
...
}
</script> 
```

这是我的 parseXmlDoi 函数：

```
function parseXmlDoi(xml)
{

    $('#debug').fadeIn();
    $('#debug').html('');

    if ($(xml).find('error').text())
    {
        $('#debug').html('<div dir="rtl" class=\"message warning\"><p>error</p></div>');
    }
    else if ($(xml).find('book').text())
    {
        $('#debug').html('<div dir="rtl" class=\"message info\"><p>this is a book</p></div>');
    }
    else if ($(xml).find('journal').text())
    {

        // do some stuff

    }
    else
    {
         $('#debug').html('<div dir="rtl" class=\"message error\"><p> something is wrong</p></div>');

    }
} 
```

问题：在基于上述 Xml 的 Chrome 和 Firefox 中，它可以工作并且可以执行`// do some stuff`，但在 IE 上它说`something is wrong`这意味着它`find()`不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:29:25.497

您明确告诉 jQuery 将响应视为 HTML 而不是 XML，因此您得到的是一个字符串。然后你调用`$()`那个字符串，它告诉它把它解析*为 HTML*，而不是 XML。

我看不出有任何理由覆盖默认处理，但我怀疑这可能是问题所在，因为 IE 不太喜欢它不知道的 HTML 标记。

试试这个：

```
$.post(
    "<?php echo site_url('con/met/') ?>",
    {doi:$('input:text[name=ident]').val()},
    parseXmlDoi,
    "xml" // Or leave this off, your content type should trigger XML handling
); 
```

...并将开头更改`parseXmlDoi`为：

```
function parseXmlDoi(xmlDoc)
{
    var $xml = $(xmlDoc);

    // ...now, use $xml.find...//
} 
```

通过告诉 jQuery 将响应视为 XML，您将获得一个已解析的 XML 文档，并将其传递给您的成功函数。然后，我们使用`$()`将该 XML 文档包装在一个 jQuery 实例中，以便您可以`find`在其上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:22:31.037

好的，我得到了答案：

我设法从`url`Ajax中获取了确切的 xml，`POST`因此除了信息之外，响应变成了相同的`header`。

并编辑了我的 Ajax 调用：

```
$.ajax({
 url:"<?php echo site_url('con/met/') ?>",
 type:"POST",
 data:{doi : $('input:text[name=ident]').val()},
 dataType: "html", //this should be html because the php page uses echo to give data back
 success: function(data)
 {
     var xml;
     if (jQuery.browser.msie) { //for IE
       xml = new ActiveXObject("Microsoft.XMLDOM");
       xml.async = false;
       xml.loadXML(data);
     } else { //for non IE
       xml = data;
     }
     parseXmlDoi(xml);
   }   
}); 
```

# java - 我可以在 JavaFx2.0 中嵌入 Swing 或 SWT 组件吗？

> ID：10674959
> 
> 赞同：1
> 
> 时间：2012-05-20T15:58:32.303
> 
> 标签：java, swing, swt, javafx-2

每个人！我又遇到麻烦了。我在使用IP Camera的时候遇到了一个很大的问题，就是当我使用JavaFx Component (ImageView)来显示从IP Camera传输过来的图像时，imageview中显示的图片不流畅，变成空白经常，无论我如何尝试。但是在我使用 Javafx 2.0 重建项目之前，我已经完成了带有 Swing 和 SWT 组件的 IP Camera 部分，所以我想知道我是否可以将 Swing 或 SWT 组件嵌入到 JavaFx2.0 中，如果你知道怎么做就更好了使用 Javafx2.0 显示来自 IP 摄像机的图片。谢谢大家。希望你能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:22:25.490

不，新的 JavaFx 2 与 Swing/AWT 不兼容，并且没有官方支持将 Swing 组件嵌入到 .

[然而， ThingsFX](http://thingsfx.com/)团队似乎正在研究[一种](http://rkennke.wordpress.com/2011/10/27/embedding-swing-components-within-javafx-2-scenes/)将 Swing 组件嵌入到 FX Scene 中的技巧。

暂时什么都没有，虽然...

# c# - 使用 C# 和 Oauth 进行 Google+ 流式写入

> ID：10674960
> 
> 赞同：0
> 
> 时间：2012-05-20T15:58:36.607
> 
> 标签：c#, oauth, google-plus

无论如何，是否可以使用 OAuth 从 C# winform 应用程序发布到 google+ 流上？..请不要认为这是重复的。我在stackoverflow中看到了很多关于相同的帖子。但是，据所有人说，google+只提供只读API。但是，我认为现在情​​况发生了变化。有一种方法可以做到这一点。但是如何？..请放一些光

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:57:05.980

直到今天，仍然没有“公开的”官方支持的方式来使用 API 在 Google+ 流上发帖。（您可以使用 +1 或分享按钮发帖，但这不是您想要的。）

# ruby-on-rails - Rails 3 - 通过参数中的值创建和保存具有隐藏字段的对象 - 'Called id for nil' 错误

> ID：10674961
> 
> 赞同：0
> 
> 时间：2012-05-20T15:58:38.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hidden-field

在我的应用程序中，我有从参数接收值的控制器。之后我应该使用这个值来保存对象（我使用隐藏字段）。但我收到这样的错误：`Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id`当我按下`Create`按钮时。我该如何解决这个问题？

控制器：

```
# encoding: UTF-8
class AttendancesController < ApplicationController
  before_filter :authenticate_teachers, :only => [ :new, :create ]

  def new
    @teacher_subjects = current_user.teacher.subjects
    @pupil = get_pupil_from_params( params )
    @attendance = Attendance.new
  end

  def create
    @teacher_subjects = current_user.teacher.subjects
    @attendance = Attendance.new( params[:attendance] )

    if @attendance.save
      redirect_to journals_path( :class_code => params[:class_code],
                                   :subject_name => params[:subject_name] )
      flash[:success] = "Success!"
    else
      flash.now[:error] = @attendance.errors.full_messages
                                      .to_sentence :last_word_connector => ", ",
                                                   :two_words_connector => ", "
      render 'new'
    end
  end

  private

    def get_pupil_from_params( params )
      pupil = Pupil.where( "id = ?", params[:p_id] ).first
    end    
end 
```

看法

```
<%= form_for @attendance, :html => {:class => "form-horizontal"} do |f| %>
  <%= field_set_tag do %>
    <%= hidden_field_tag :class_code, params[:class_code] %>
    <%= hidden_field_tag :subject_name, params[:subject_name] %>
    <%= f.hidden_field :pupil_id, :value => @pupil.id %>

    <div class="control-group">
      <%= f.label :visited, "Did pupil visit lesson?", :class => "control-label" %>
      <div class="controls">
        <%= label_tag nil, nil, :class => "radio" do %>
          <%= f.radio_button :visited, true %>
          Yes
        <% end %>

        <%= label_tag nil, nil, :class => "radio" do %>
          <%= f.radio_button :visited, false %>
          No
        <% end %>
      </div>
    </div>

    <%= f.submit "Create", :class => "btn btn-large btn-success" %>
  <% end %>
<% end %> 
```

在我按下“创建”按钮后，我得到这样的哈希：

```
{"utf8"=>"✓",
 "authenticity_token"=>"kgNoJfivDEzqpLJYF5QK9vQS99Cq9app5ujPDC4lKKI=",
 "class_code"=>"11v",
 "subject_name"=>"Math",
 "attendance"=>{"pupil_id"=>"1"},
 "commit"=>"Create"} 
```

我的模型：

```
class Attendance < ActiveRecord::Base
  belongs_to :pupil
  belongs_to :lesson

  validates :pupil_id, :presence => { :message => "should exist" }

  validates :lesson_id, :presence => { :message => "should exist" }

  validates :visited,
              :inclusion => { :in => [true, false],
                              :message => "should be chosen"
                            }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:19:22.270

如果出勤未能保存，您将尝试重新呈现有错误的表单，但您没有`@pupil`在控制器的`create`方法中设置值 - 所以它将是`nil`在`@pupil.id`视图中调用的时间。

这可能是您的问题，但是为了确保我们需要知道是否`Attendance`有任何验证，并且我们需要查看异常的行号 - 所以如果这不是问题，请发布它们！

# ruby - Ruby 块 - 包装和自定义超类方法（使用 define_method 和块）

> ID：10674966
> 
> 赞同：3
> 
> 时间：2012-05-20T15:59:31.573
> 
> 标签：ruby, binding, closures

想象一下，您经常需要将一组来自超类的方法包装在一些静态代码或方面，但每个方法的结果/不同的行数很少，例如，将更新通知包装在数组方法周围以获得可观察的数组。

我的第一个想法是，我希望使用一个类级别的方法，例如：

```
class MyArray < Array
  extend ObserverHelper # defines :wrap_method

  wrap_notify(:[]=) do |index_or_range, *args|
    [self[index_or_range], super(index_or_range, *args)]
    # much nicer it would be to define
    # removed = self[index_or_range]
    # added = super(index_or_range, *args)
    # but this makes it even more complicated (suggestions welcome!)
  end
...
end 
```

到现在为止还挺好。现在如何实现 :wrap_method？我最有希望的方法已经走到了这一步。由于超级而不起作用：

```
require 'observer'

module ObserverHelper
  include Observable

  def wrap_notify(meth, &block)
    define_method meth,->(*args) {
      removed, added = instance_exec(*args, &block)
      changed
      notify_observers(removed, added)
      added
    }
  end
end 
```

错误：

*   如果直接在数组子类上定义：超级在方法外调用

*   如果在模块中定义并包含到数组中：“不支持定义到多个类的单例方法的超级；这将在 1.9.3 或更高版本中修复”或“分段错误”，如果该方法具有正确的返回值）

我搜索了一段时间，但没有找到改变闭包绑定的可取解决方案，但是，也许我错过了一些东西，或者你可以不解决它？

Rails 通过评估字符串来做这些事情，还不确定我是否想这样。性能尚不重要，但会很重要。因此，我需要有关不同可能性和性能问题的反馈。

最后，我运行了两个更详细的解决方案。首先，传递实例，没有 super 也没有 self：

```
 wrap_observer(:[]=) do |instance, index_or_range, *args|
    [instance[index_or_range], instance.send(meth, index_or_range, *args)]
  end 
```

另一种使用 wrap_observer 作为 instance_method：

```
 def []=(index_or_range, *args)
    wrap_observer do
      [self[index_or_range], super(index_or_range, *args)]
    end
  end 
```

我认为这是可取的。

DSL 的解决方案可能是在没有包装器的情况下定义方法，然后迭代定义的方法添加它。

是否有更多方法可以使用我想要的 DSL 来解决这个高性能和可维护的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:56:00.247

重新绑定块的唯一方法是用它定义一个方法，这也允许使用 super。因此，您需要定义两种方法——可以使用模块来完成：

```
module ObserverHelper
  def wrap_notify(meth, options={}, &block)
    override = Module.new do
        define_method(meth, &block)
    end
    notifier = Module.new do
        define_method meth do |*args|
            removed, added = super(*args)
            options ||= {}
            changed
            notify_observers(removed, added)
            after
        end
    end
    include override
    include notifier
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:56:57.830

此外，我想回答我自己的问题，因为这种方法基本上不起作用。方法更加多样化（例如，如前所述 []= 适用于数字和范围，但其他方法不适用），我找到了一个通用解决方案：

```
 define_method(meth) do |*args, &block|
        old_state = Array.new(self)
        r = super(*args,&block)
        new_state = Array.new(self)
        old_state.delete_if{|e| (i = new_state.index(e)) && new_state.delete_at(i)}
        unless new_state.empty? and old_state.empty?
          changed
          notify_observers(old_state, new_state, meth)
        end
        r
      end 
```

因此，我可以在一个循环中覆盖所有方法，无需破解。基本上我将它用作后备和测试参考，而我实现了更专业的方法。

# google-chrome-extension - 是否可以开发一个浏览器插件，当用户尝试访问某些网站时，它可以自动将用户重定向到新的 url？

> ID：10674969
> 
> 赞同：0
> 
> 时间：2012-05-20T16:00:18.703
> 
> 标签：google-chrome-extension, firefox-addon

比如安装了插件，当你访问[www.google.com](http://www.google.com)时，你会被重定向到[www.mysite.com](http://www.mysite.com) 我想为此开发一个 chrome/firefox 插件，但我不知道是否可以.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:27:52.983

有可能，您首先需要获取当前活动选项卡的 id，然后您可以在此选项卡中打开另一个位置，演示：

```
chrome.tabs.query({active: true}, function(tabArray) {                      
        var currentURL = tabArray[0].url;
        if(currentURL == "https://www.google.com/"){
            chrome.tabs.update(tabArray[0].id, {url: yournewurl});
        }
}); 
```

如果你想自动检查currenturl是否是google，那么你需要把这段代码放到background.html中，并强制后台总是检查活动的url，当标签被更新时，所以要触发上面的代码，你应该使用`chrome.tabs.onUpdated.addListener(redirect);`where redirect可以是 background.html 中包含上层代码的函数。吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:55:58.280

好吧，更简单的方法是使用[webRequest API](http://code.google.com/chrome/extensions/webRequest.html)：

```
chrome.webRequest.onBeforeRequest.addListener(
  function(details) { return {url: "http://www.mysite.com"}; },
  {urls: ["*://www.google.com/*"],
  ["blocking"]
); 
```

# ruby - Sinatra 的友好 URL

> ID：10674972
> 
> 赞同：0
> 
> 时间：2012-05-20T16:00:24.363
> 
> 标签：ruby, sinatra, rack, friendly-url

无论如何，是否可以为 sinatra 实现友好的 URL，例如，

我希望用户看到[http://xyz.io/username/title](http://xyz.io/username/title)而不是 [http://xyz.io/username/posts/xdsfsdfsdfsd/title](http://xyz.io/username/posts/xdsfsdfsdfsd/title)

但仍然路由到第二个 URL。

是否可以使用 Sinatra/Rack 实现这一目标，或者是否有任何红宝石可以完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:56:42.713

将处理请求的代码放在一个普通的 Ruby 方法中，然后简单地让两个路由都调用该方法作为它们的操作。

```
def handle_request
   #params hash is available here as in normal route block
end

get '/:username/posts/:id/:title' do
  handle_request
end

get '/:username/:title' do
  handle_request
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:17:49.777

## 选项 1：从 'nice' URL 重定向到 'real' URL

```
get "/:user/:title" do
  user, title = params.values_at('user','title')
  id = find_id_from_title_and_user( user, title )
  redirect url("/#{user}/posts/#{id}/#{title}")
end 
```

## 选项 2：让“丑陋”的 URL 始终看起来“不错”

当用户加载丑陋的 URL 时，将地址栏（无需重新加载页面）更改为更漂亮的 URL：

```
<!-- on the 'ugly' page -->
<script type="text/javascript">
  // Make the address bar lie about what our address is
  // See: https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history
  history.pushState({}, window.title, calculateNiceURLString());
</script> 
```

*还需要选项 1（或对“不错的”URL 进行一些处理）才能重新加载和添加书签。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T00:59:31.590

FriendlyId 与 ActiveRecord 一起使用，而 Activerecord 可用于 Sinatra。按照此博客教程[http://danneu.com/posts/15-a-simple-blog-with-sinatra-and-active-record-some-useful-tools/](http://danneu.com/posts/15-a-simple-blog-with-sinatra-and-active-record-some-useful-tools/)了解如何进行。之后我所做的就是将friendly_id 放在我的gemfile 中，然后运行

```
bundle
rake db:create_migration NAME=add_slug_to_posts 
```

编辑新创建的迁移看起来像

```
class AddSlugToPosts < ActiveRecord::Migration
    def change
        add_column :posts, :slug, :string
        add_index :posts, :slug, unique: true
    end
end 
```

然后运行

```
rake db:migrate 
```

在我的 app.rb 文件中需要它之后（需要'friendly_id'），并确保将这两行放在我的 Post 类的顶部

```
class Post < ActiveRecord::Base
    extend FriendlyId
    friendly_id :title, use: :slugged
...
end 
```

无论我在 url、params hash 还是任何地方引用 :id，无论是在 app.rb 中还是视图中的链接，我都将其更改为 :slug。slug 是一个唯一标识符，因此它工作正常。我已经在数据库中有一些帖子，所以我只需运行 tux 然后手动输入 slug

```
a = Post.find(1)
a.save 
```

（并更改数字）为每个条目，friendly_id 自动创建 slug。它还将在创建任何新帖子时创建所有 slug。美丽！顺便说一句，我的版本是

```
activerecord = 3.2.13
friendly_id = 4.0.9
ruby = 1.9.3 
```

# batch-file - 计算批处理脚本中两个变量的总和

> ID：10674974
> 
> 赞同：67
> 
> 时间：2012-05-20T16:00:27.377
> 
> 标签：batch-file, variables, dosbox

这是我第一次在 Stack Overflow 上，所以请对这个问题宽容。我一直在尝试使用批处理编程并使用 DOSbox 在我的 linux 机器上运行它们。

这是我一直在使用的代码：

```
@echo off
set a=3
set b=4
set c=%a%+%b%
echo %c%
set d=%c%+1
echo %d% 
```

它的输出是：

```
3+4
3+4+1 
```

我将如何添加这两个变量而不是回显该字符串？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-20T16:41:55.123

您需要`/a`在 set 命令上使用该属性。

例如，

```
set /a "c=%a%+%b%" 
```

这允许您在 set 命令中使用[算术表达式](http://ss64.com/nt/set.html)，而不是简单的串联。

您的代码将是：

```
@set a=3
@set b=4
@set /a "c=%a%+%b%"
echo %c%
@set /a "d=%c%+1"
echo %d% 
```

并会输出：

```
7
8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-09T01:48:09.113

[根据此处](http://ss64.com/nt/set.html)找到的有用的运算符列表[可以将运算符视为数学表达式] ，您可以通过使用**+=**运算符而不是**+**运算符来告诉批处理编译器您正在操作变量而不是固定数字。

希望我有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T03:53:18.067

```
@ECHO OFF
TITLE Addition
ECHO Type the first number you wish to add:
SET /P Num1Add=
ECHO Type the second number you want to add to the first number:
SET /P Num2Add=
ECHO.
SET /A Ans=%Num1Add%+%Num2Add%
ECHO The result is: %Ans%
ECHO.
ECHO Press any key to exit.
PAUSE>NUL 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T04:13:20.150

您可以求解任何方程，包括使用以下代码添加：

```
@echo off

title Richie's Calculator 3.0

:main

echo Welcome to Richie's Calculator 3.0

echo Press any key to begin calculating...

pause>nul

echo Enter An Equation

echo Example: 1+1

set /p 

set /a sum=%equation%

echo.

echo The Answer Is:

echo %sum%

echo.

echo Press any key to return to the main menu

pause>nul

cls

goto main 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T11:29:09.423

```
@ECHO OFF
ECHO Welcome to my calculator!
ECHO What is the number you want to insert to find the sum?
SET /P Num1=
ECHO What is the second number? 
SET /P Num2=
SET /A Ans=%Num1%+%Num2%
ECHO The sum is: %Ans%
PAUSE>NUL 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-10-21T22:35:29.003

这是我的

```
echo Math+ 
ECHO First num:
 SET /P a= 
ECHO Second num:
 SET /P b=
 set /a s=%a%+%b% 
echo Result: %s% 
```

# iphone - 保存音频文件并在视图之间导航

> ID：10674981
> 
> 赞同：0
> 
> 时间：2012-05-20T16:01:13.613
> 
> 标签：iphone, objective-c, ios, audio

在视图之间导航后，我无法保存录制的音频文件并播放它们。

我一直在使用[http://www.techotopia.com/index.php/Recording_Audio_on_an_iPhone_with_AVAudioRecorder_%28iOS_4%29上的教程](http://www.techotopia.com/index.php/Recording_Audio_on_an_iPhone_with_AVAudioRecorder_%28iOS_4%29)

我已经添加了一行来保存音频文件，所以我`prepareForAudioRecording`看起来像下面的代码。这个方法在`viewDidLoad`.

```
-(void) prepareForAudioRecording
{
    btnPlay.enabled = NO;
    btnStop.enabled = NO;

    NSArray *dirPaths;
    NSString *docsDir;

    dirPaths = NSSearchPathForDirectoriesInDomains(
                                                   NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDir
                               stringByAppendingPathComponent:@"page1.caf"];

    //this line added to save the audio file
    [audioPlayer.data writeToFile:soundFilePath atomically:YES];

    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    NSDictionary *recordSettings = [NSDictionary 
                                    dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithInt:AVAudioQualityMin],
                                    AVEncoderAudioQualityKey,
                                    [NSNumber numberWithInt:16], 
                                    AVEncoderBitRateKey,
                                    [NSNumber numberWithInt: 2], 
                                    AVNumberOfChannelsKey,
                                    [NSNumber numberWithFloat:44100.0], 
                                    AVSampleRateKey,
                                    nil];

    NSError *error = nil;

    audioRecorder = [[AVAudioRecorder alloc]
                     initWithURL:soundFileURL
                     settings:recordSettings
                     error:&error];

    if (error)
    {
        NSLog(@"error: %@", [error localizedDescription]);

    } else {
        [audioRecorder prepareToRecord];
    }
} 
```

正如我所说，我可以录制音频，然后在同一个视图控制器中播放音频，但是当我离开视图并返回它时，我无法播放录音。

首先，播放和停止按钮被禁用，我认为这应该只在第一次加载视图时发生 - 但即使我启用它们并按下播放按钮，也没有音频。

下面是我的播放、停止和录制按钮的其他方法。

```
- (IBAction)playAudio:(id)sender {
    if (!audioRecorder.recording)
    {
        btnStop.enabled = YES;
        btnRecord.enabled = NO;

        //if (audioPlayer)
            //[audioPlayer release];
        NSError *error;

        audioPlayer = [[AVAudioPlayer alloc] 
                       initWithContentsOfURL:audioRecorder.url                                    
                       error:&error];

        audioPlayer.delegate = self;

        if (error)
            NSLog(@"Error: %@", 
                  [error localizedDescription]);
        else
            [audioPlayer play];
    }
}

-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    btnRecord.enabled = YES;
    btnStop.enabled = NO;
}
-(void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error
{
    NSLog(@"Decode Error occurred");
}
-(void)audioRecorderDidFinishRecording:(AVAudioRecorder *)recorder successfully:(BOOL)flag
{
}
-(void)audioRecorderEncodeErrorDidOccur:(AVAudioRecorder *)recorder error:(NSError *)error
{
    NSLog(@"Encode Error occurred");
}

- (IBAction)recordAudio:(id)sender {
    if (!audioRecorder.recording)
    {
        btnPlay.enabled = NO;
        btnStop.enabled = YES;
        [audioRecorder record];
    }
}

- (IBAction)stopAudio:(id)sender {
    btnStop.enabled = NO;
    btnPlay.enabled = YES;
    btnRecord.enabled = YES;

    if (audioRecorder.recording)
    {
        [audioRecorder stop];
    } else if (audioPlayer.playing) {
        [audioPlayer stop];
    }
} 
```

我知道那里有很多代码要查看，但如果我遗漏了什么，请告诉我。我真的很感激这方面的任何帮助，谢谢。

**编辑1**：好的，我做了更多调查并打开了保存我的音频文件的文件夹。音频记录良好，文件大小约为 400KB。当我推送到下一个视图控制器时，文件大小保持在 400KB。但是，一旦我按下后退按钮（不是导航栏中预编程的按钮），文件大小就会变为 4KB；一个空文件。我的后退按钮的代码很简单：

```
- (IBAction)backPressed:(id)sender {
    [self.navigationController popViewControllerAnimated:YES];
} 
```

请帮忙！

**编辑 2**：导航栏中的后退按钮也会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:11:26.583

您正在`audioPlayer`分配`audioRecorder.url`. 如果发生了*什么事*，`audioRecorder`它`url`可能是无效的。

尝试`audioPlayer`这样设置：

```
- (IBAction)playAudio:(id)sender {
    if (!audioRecorder.recording)
    {
        btnStop.enabled = YES;
        btnRecord.enabled = NO;

        NSArray *dirPaths;
        NSString *docsDir;

        dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        docsDir = [dirPaths objectAtIndex:0];
        NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"page1.caf"];

        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

        NSError *error;

        audioPlayer = [[AVAudioPlayer alloc] nitWithContentsOfURL:soundFileUR                                    
                                                            error:&error];

        audioPlayer.delegate = self;

        if (error)
            NSLog(@"Error: %@",[error localizedDescription]);
        else
            [audioPlayer play];
    }
} 
```

# clang - 当我在 C++ 中使用块时，会复制或引用对象吗？

> ID：10674983
> 
> 赞同：1
> 
> 时间：2012-05-20T16:01:19.823
> 
> 标签：clang, objective-c-blocks, objective-c++

想象一下这个 C++ 代码（它使用 clang 的块语言扩展）。

```
auto now = std::chrono::system_clock::now();

std::async(^ {
  auto time = now;
  // ...
}); 
```

将是什么类型的`time`？会是`decltype(now)`还是`decltype(now)&`？如果是后者，我如何确保在块运行之前复制它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T16:06:24.953

`decltype(now)`根据[块语言规范](http://clang.llvm.org/docs/BlockLanguageSpec.txt)，对象被复制，其类型为。

> 堆栈本地对象通过复制 const 构造函数复制到 Block 中。如果不存在这样的构造函数，则认为从 Block 复合语句中引用此类对象是错误的。

# node.js - 如何比较nodejs中的两个fileStat.mtime？

> ID：10674984
> 
> 赞同：7
> 
> 时间：2012-05-20T16:01:22.797
> 
> 标签：node.js, date

见代码：

```
var fs = require('fs');

var file = "e:/myfile.txt";

fs.stat(file, function(err, stat1) {
  console.log(stat1.mtime);
  fs.stat(file, function(err, stat2) {
    console.log(stat2.mtime);
    console.log(stat1.mtime == stat2.mtime);
    console.log(stat1.mtime === stat2.mtime);
  });
}); 
```

结果：

```
Sun, 20 May 2012 15:47:15 GMT
Sun, 20 May 2012 15:47:15 GMT
false
false 
```

我在执行期间没有更改文件。但是你可以看到，无论`==`或`===`，它们都不相等。

如何`mtime`在nodejs中比较两个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T04:16:52.407

用于`date.getTime()`比较：

```
function datesEqual(a, b) {
    return a.getTime() === b.getTime();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T16:47:53.763

`==`on objects 测试对象是否相等。但是，`<`并`>`为 Date 对象正确地完成工作，因此您可以简单地使用此函数来比较两个对象：

```
function datesEqual(a, b) {
    return !(a > b || b > a);
} 
```

# java - android.os.NetworkOnMainThreadException -- Android 的 Twitter 客户端

> ID：10674986
> 
> 赞同：2
> 
> 时间：2012-05-20T16:01:30.707
> 
> 标签：java, android, twitter, client

我使用来自 tutsplus.com 的关于为 Android 构建 twitter 客户端的教程。我已经构建了整个应用程序，当我运行它时，Eclipse 的 logcat 中出现以下错误。

android.os.NetworkOnMainThreadException - 阅读一些东西，它必须处理我正在调用的 API 级别。目前我正在为 API 15 的 4.0.3 构建。在 API 11 之后，您不能在与 UI 相同的线程中进行网络调用。这背后的原因不是为了让 UI 停止或崩溃。网络调用必须在 AsyncTask 或 Service 中。

我的问题/问题/问题的长短是教程制作者无助于纠正问题，所以这就是我在这里的原因。我在下面发布代码，希望有人可以帮助我将网络部分移动到 AsyncTask 或服务中。

```
package com.jasonsdesign.tweetxy;

import twitter4j.ProfileImage;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;
import twitter4j.auth.RequestToken;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.database.DatabaseUtils;
import android.database.sqlite.SQLiteDatabase;
import android.net.Uri;
import android.os.Bundle;
import android.provider.BaseColumns;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.ListView;

public class TweetxyActivity extends Activity implements OnClickListener {

/**developer account key for this app*/
public final static String TWIT_KEY = "";
/**developer secret for the app*/
public final static String TWIT_SECRET = "";
/**app url*/
public final static String TWIT_URL = "tweetxy-android:///";

private String LOG_TAG = "TweetxyActivity";

/**Twitter instance*/
private Twitter tweetxyTwitter;
/**request token for accessing user account*/
private RequestToken tweetxyRequestToken;
/**shared preferences to store user details*/
private SharedPreferences tweetxyPrefs;
/**main view for the home timeline*/
private ListView homeTimeline;
/**database helper for update data*/
private TweetxyDataHelper timelineHelper;
/**update database*/
private SQLiteDatabase timelineDB;
/**cursor for handling data*/
private Cursor timelineCursor;
/**adapter for mapping data*/
private UpdateAdapter timelineAdapter;
/**broadcast receiver for when new updates are available*/
private BroadcastReceiver tweetxyStatusReceiver;

//set the profile image display
ProfileImage.ImageSize imageSize = ProfileImage.NORMAL;

/*
 * onCreate behaves differently on first run and subsequent runs
 * - if first run take to Twitter sign in page to grant the app permission
 * - subsequent runs fetch and present the user home timeline
 */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    //get the preferences
    tweetxyPrefs = getSharedPreferences("TweetxyPrefs", 0);
    //find out if the user preferences are set
    if(tweetxyPrefs.getString("user_token", null)==null) {
            //no user preferences so prompt to sign in
        setContentView(R.layout.main);
            //get a twitter instance for authentication
        tweetxyTwitter = new TwitterFactory().getInstance();
            //pass developer key and secret
        tweetxyTwitter.setOAuthConsumer(TWIT_KEY, TWIT_SECRET);
            //try to get request token
        try 
        {
                //get authentication request token
            tweetxyRequestToken = tweetxyTwitter.getOAuthRequestToken(TWIT_URL);
        }
        catch(TwitterException te) { Log.e(LOG_TAG, "TE "+te.getMessage()); }
        //setup button for click listener
        Button signIn = (Button)findViewById(R.id.signin);
        signIn.setOnClickListener(this);
    }
    else 
    {
        //user preferences are set - get timeline
        setupTimeline();
    }

}

/**
 * Click listener handles sign in and tweet button presses
 */
public void onClick(View v) {
    //find view
    switch(v.getId()) {
        //sign in button pressed
    case R.id.signin:
            //take user to twitter authentication web page to allow app access to their twitter account
        String authURL = tweetxyRequestToken.getAuthenticationURL();
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authURL)));
        break;
        //user has pressed tweet button
    case R.id.tweetbtn:
            //launch tweet activity
        startActivity(new Intent(this, TweetxyTweet.class));
        break;
    default:
        break;
    }
}

/*
 * onNewIntent fires when user returns from Twitter authentication Web page
 */
@Override
protected void onNewIntent(Intent intent) {

    super.onNewIntent(intent);
    //get the retrieved data
    Uri twitURI = intent.getData();
    //make sure the url is correct
    if(twitURI!=null && twitURI.toString().startsWith(TWIT_URL)) 
    {
        //is verification - get the returned data
        String oaVerifier = twitURI.getQueryParameter("oauth_verifier");
        //attempt to retrieve access token
        try
        {
                //try to get an access token using the returned data from the verification page
            AccessToken accToken = tweetxyTwitter.getOAuthAccessToken(tweetxyRequestToken, oaVerifier);
                //add the token and secret to shared prefs for future reference
            tweetxyPrefs.edit()
                .putString("user_token", accToken.getToken())
                .putString("user_secret", accToken.getTokenSecret())
                .commit();
                //display the timeline
            setupTimeline();

        }
        catch (TwitterException te)
        { Log.e(LOG_TAG, "Failed to get access token: "+te.getMessage()); }
    }
}

/**
 * setupTimeline displays the user's main home Twitter timeline
 */

private void setupTimeline() {

    //set the layout
    setContentView(R.layout.timeline);
        //setup onclick listener for tweet button
    LinearLayout tweetClicker = (LinearLayout)findViewById(R.id.tweetbtn);
    tweetClicker.setOnClickListener(this);
        //retrieve the timeline
    try 
    {
            //get reference to the list view
        homeTimeline = (ListView)findViewById(R.id.homeList);
            //instantiate database helper
        timelineHelper = new TweetxyDataHelper(this);
            //get the database
        timelineDB = timelineHelper.getReadableDatabase();

        //query the database, most recent tweets first
        timelineCursor = timelineDB.query("home", null, null, null, null, null, "update_time DESC");
        //manage the updates using a cursor
        startManagingCursor(timelineCursor);
        //instantiate adapter
        timelineAdapter = new UpdateAdapter(this, timelineCursor);
        //apply the adapter to the timeline view
        //this will make it populate the new update data in the view
        homeTimeline.setAdapter(timelineAdapter);
        //instantiate receiver class for finding out when new updates are available
        tweetxyStatusReceiver = new TwitterUpdateReceiver();
        //register for updates
        registerReceiver(tweetxyStatusReceiver, new IntentFilter("TWITTER_UPDATES"));

        //start the service for updates now
        this.getApplicationContext().startService(new Intent(this.getApplicationContext(), TimelineService.class));
    }
    catch(Exception te) { Log.e(LOG_TAG, "Failed to fetch timeline: "+te.getMessage()); }
}

/**
 * Class to implement broadcast receipt for new updates
 */
class TwitterUpdateReceiver extends BroadcastReceiver 
{
    /**
     * When new updates are available, a broadcast is received here
     */

    @Override
    public void onReceive(Context context, Intent intent) {
        //delete db rows
        int rowLimit = 100;
        if(DatabaseUtils.queryNumEntries(timelineDB, "home")>rowLimit) {
            String deleteQuery = "DELETE FROM home WHERE "+BaseColumns._ID+" NOT IN " +
                    "(SELECT "+BaseColumns._ID+" FROM home ORDER BY "+"update_time DESC " +
                            "limit "+rowLimit+")";  
            timelineDB.execSQL(deleteQuery);
        }       

        timelineCursor = timelineDB.query("home", null, null, null, null, null, "update_time DESC");
        startManagingCursor(timelineCursor);
        timelineAdapter = new UpdateAdapter(context, timelineCursor);
        homeTimeline.setAdapter(timelineAdapter);
    }
}

/*
 * When the class is destroyed, close database and service classes
 */
@Override
public void onDestroy() {
    super.onDestroy();
    try 
    {
        //stop the updater service
        stopService(new Intent(this, TimelineService.class));
        //remove receiver register
        unregisterReceiver(tweetxyStatusReceiver);
        //close the database
        timelineDB.close();
    }
    catch(Exception se) { Log.e(LOG_TAG, "unable to stop service or receiver"); }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:07:04.120

[除了https://developer.android.com/reference/android/os/AsyncTask.html](https://developer.android.com/reference/android/os/AsyncTask.html)提供的东西，你还需要什么？您对 AsyncTask 的使用有什么具体问题吗？

你把有问题的行放在doInBackground() 中。如果它有结果，您可以将结果处理代码放在 doInBackground() 中，如果它不操作 UI。如果它确实对 UI 进行了更改，则将其放入 onPostExecute() 中。

然后将引发异常的行替换为：

新的 MyTask().execute(param);

请记住，这之后的代码会立即执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T04:37:47.337

我认为没有必要保留您的问题，您目前面临的大多数问题都可以通过 AsyncTask 的使用来解决，该使用在[Here](http://developer.android.com/reference/android/os/AsyncTask.html)上有很好的记录。我建议您不要将本教程用作您的应用程序/项目的框架，而是将其用作了解如何设置自己的项目的指南。如果您创建自己的 AsyncTask 并使用它从网络获取数据会更好，因为在主任务或除 AsynTasks 之外的大多数任务中获取网络相关数据通常会因为它抛出的异常而被皱眉。

# sql-server - 通过 xp_cmdshell 获取文件内容

> ID：10674987
> 
> 赞同：2
> 
> 时间：2012-05-20T16:01:38.313
> 
> 标签：sql-server, windows, command-line, xp-cmdshell

有没有办法从 windows xp 命令提示符获取文件？我尝试运行`xp_cmdshell 'type [path to file]'`，但是当我将这些数据插入其他文件并将其重命名为 file.exe（即可执行文件）时，它不起作用。任何建议如何以我可以使用的方式获取文件内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:42:51.230

您可以在文件上使用 BULK INSERT 并将文件视为具有一行和一列的表。这应该允许您将文件直接读入 VARBINARY 字段

像这样：

```
CREATE TABLE FileRead
(
  content VARBINARY(MAX)
)

BULK INSERT FileRead FROM [FilePath] 
```

这要求 SQL Server 有权访问您尝试读取的文件。听起来您正试图从您无权访问的服务器“获取”可执行文件？:-)

# javascript - y 的值是如何分配的

> ID：10674989
> 
> 赞同：0
> 
> 时间：2012-05-20T16:01:45.407
> 
> 标签：javascript

我在看这个功能

```
function foo(x) {
  var tmp = 3;
  return function (y) {
    alert(x + y + (++tmp));
  }
}
var bar = foo(2); // bar is now a closure.
bar(10); 
```

当我运行它时，变量得到以下值

x = 2，y = 10 tmp = 3。

现在我看到在 foo(2) 中 x 被传递为 2。所以可以理解 x 得到 2 的值。但是 bar(10) 将值 0 分配给 y。怎么样？我对接收函数如何知道 10 是 bar(10) 分配的 y 值感到困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:04:45.593

`foo(2)`返回一个接受一个参数 ( `y`) 的匿名函数。当您设置`bar`为 的返回值时`foo(2)`，`bar`将成为对该匿名函数的引用。

因此，当您调用时，您`bar(10)`调用的是匿名函数`foo`返回，因此`10`被设置为参数`y`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:07:46.323

这是一个*闭包*。

当你写：

```
var bar = foo(2); 
```

它实际上是在*调用* `foo`，所以最终结果是：

```
var bar = function (y) {
    alert(2 + y + (++tmp));
} 
```

其中`tmp`是闭包范围内的值。

因此，随后调用：

```
bar(10); 
```

正在传递`10`给*该*函数，结果是：

```
alert(2 + 10 + (++tmp)); 
```

`tmp`每次调用创建的*任何*函数时都会增加`foo`

# r - 将混合数字、分数和整数的字符向量转换为数字

> ID：10674992
> 
> 赞同：8
> 
> 时间：2012-05-20T16:01:50.897
> 
> 标签：r, fractions

我正在尝试编写一个 R 函数来将分数和混合数字转换为小数。例如

```
mixedToFloat <- function(x){
    x <- sub(' ', '+', x, fixed=TRUE)
    return(unlist(lapply(x, function(x) eval(parse(text=x)))))
}

> mixedToFloat(c('1 1/2', '2 3/4', '2/3', '11 1/4', '1'))
[1]  1.5000000  2.7500000  0.6666667 11.2500000  1.0000000 
```

这适用于我能想到的大多数情况，但感觉有点骇人听闻。有没有更标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T21:01:04.827

**1）**这用于`strapplyc`提取数字，然后`calc`将它们放入标准格式，将它们转换为数字并执行计算：

```
library(gsubfn)

ff <- c('1 1/2', '2 3/4', '2/3', '11 1/4', '1')
calc <- function(s) {
    x <- c(if (length(s) == 2) 0, as.numeric(s), 0:1)
    x[1] + x[2] / x[3]
}
sapply(strapplyc(ff, "\\d+"), calc) 
```

**2)**另一种方法是将每个表达式转换为有效的 R 代码，然后解析和评估每个表达式。

```
sapply(sub(" ", "+", ff), function(x) eval(parse(text = x)))
##      1 1/2      2 3/4        2/3     11 1/4          1 
##  1.5000000  2.7500000  0.6666667 11.2500000  1.0000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:08:52.673

任何不那么“hackish”的东西都必须解析您的输入并将它们与许多预定义的模式相匹配。我想出了这个：

```
mixedToFloat <- function(x){
  is.integer  <- grepl("^\\d+$", x)
  is.fraction <- grepl("^\\d+\\/\\d+$", x)
  is.mixed    <- grepl("^\\d+ \\d+\\/\\d+$", x)
  stopifnot(all(is.integer | is.fraction | is.mixed))

  numbers <- strsplit(x, "[ /]")

  ifelse(is.integer,  as.numeric(sapply(numbers, `[`, 1)),
  ifelse(is.fraction, as.numeric(sapply(numbers, `[`, 1)) /
                      as.numeric(sapply(numbers, `[`, 2)),
                      as.numeric(sapply(numbers, `[`, 1)) +
                      as.numeric(sapply(numbers, `[`, 2)) /
                      as.numeric(sapply(numbers, `[`, 3))))
}

mixedToFloat(c('1 1/2', '2 3/4', '2/3', '11 1/4', '1'))
# [1]  1.5000000  2.7500000  0.6666667 11.2500000  1.0000000 
```

# java - netbeans 无法识别 ArrayUtil

> ID：10674997
> 
> 赞同：3
> 
> 时间：2012-05-20T16:03:00.180
> 
> 标签：java, netbeans

我正在使用以下语句

```
int[] numList = ArrayUtil.randomIntArray(100, 100); 
```

我已经进口了

```
import java.util.*; 
```

所以在这里导入正确的类是不可能的。我正在尝试创建一个包含 100 个数字的数组并用 1-100 的随机数填充该数组，但是 netbeans 在“ArrayUtil”下放了一条红线我用鼠标浏览它以读取错误“找不到符号, Symbol: variable ArrayUtil" 为什么在我导入了所有需要的类后会发生这种情况

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T16:04:24.007

如果你想使用他们的库，你需要下载并导入[Apache Commons 。](http://commons.apache.org/)它不是标准 Java API 的一部分。

或者自己创建函数；

```
public int[] randomIntArray(int length, int size) {
  Random r = new Random();
  int[] numbers = new int[length];
  for(int i = 0; i < length; i++) {
    numbers[i] = r.nextInt(size+1);
  }
  return numbers;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T16:48:53.693

你可以从[这里下载](http://mirrors.ibiblio.org/pub/mirrors/maven/commons-lang/jars/commons-lang-2.3.jar)

该链接适用于 commons lang 2.3