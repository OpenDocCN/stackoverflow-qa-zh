# StackOverflow 问答 11012000-11012999

# zend-framework - CodeIgniter 的 Zend Framework 和 Yii 的 Sparks 包管理替代方案？

> ID：11012000
> 
> 赞同：-2
> 
> 时间：2012-06-13T09:31:02.717
> 
> 标签：zend-framework, codeigniter, yii, package

ZF 和 Yii 中是否有 CodeIgniter 的 Sparks 包管理的替代方案？

*Sparks 是 Codeigniter 的包管理系统，可让您立即将高质量的库安装到您的应用程序中。* -> 来自[http://getsparks.org/](http://getsparks.org/)

Zend 框架有类似的东西吗？还是伊？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:01:41.367

Yii 还没有包管理工具。

你可以在这里找到扩展列表：[http ://www.yiiframework.com/extensions/](http://www.yiiframework.com/extensions/)

他们中的大多数都有安装说明，大多数时候只涉及将内容提取到 extensions/ 或 components/ 文件夹。

# java - TCP 上的对象或字符串（xml）

> ID：11012001
> 
> 赞同：0
> 
> 时间：2012-06-13T09:31:03.757
> 
> 标签：java, jakarta-ee, networking, tcp

我正在实现一个低延迟的实时应用程序，它应该推送过多的消息。

我想问一下通过 TCP 连接发送序列化对象或纯长字符串（将在客户端解析为 XML）与性能方面有何不同？

我说的是毫秒。

谢谢，雷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:50:15.027

如果您在谈论毫秒，请忘记将对象序列化/反序列化为 XML。

首先，Object 到 XML 的序列化/反序列化已经花费了一些时间。正如@Brian Agnew 所指出的，您还需要认真检查您的 XML 序列化方法。

其次，TCP 上的 XML（字符串）对带宽不友好，因此需要更长的时间来传输。Google Protocol Buffers 在这方面提供了一些优势，尽管它实际上取决于您的消息的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:59:13.263

查看[https://github.com/eishay/jvm-serializers/wiki/Home/25fd014e66738268670adaf44ff5408ba2244d37](https://github.com/eishay/jvm-serializers/wiki/Home/25fd014e66738268670adaf44ff5408ba2244d37)，其中比较了 java 中的对象序列化框架

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:34:48.277

与所有这些类型的问题一样，我会制作一些方法的原型并衡量结果。

特别是，您没有指定您的 XML 序列化方法（例如 XStream、JAXB、通过 SAX 解析等），仅此一项就会显着影响您的结果。

我也很感兴趣您正在考虑（我认为）Java 对象序列化与 XML，并建议您也考虑诸如 JSON 或 Google 协议缓冲区之类的方法，仅举两例。

最后，请参阅诸如此类的问题[，](https://stackoverflow.com/questions/647779/high-performance-serialization-java-vs-google-protocol-buffers-vs)它提供了丰富的进一步信息。

# ajax - 在 Ajax 响应中渲染 ExtJs 控件

> ID：11012002
> 
> 赞同：0
> 
> 时间：2012-06-13T09:31:09.397
> 
> 标签：ajax, extjs, calendar, request, textfield

我正在尝试使用 Ajax 在 Ext.Window() 中加载 ExtJs 控件，但它不通过 ajax 加载。

我想要的是在 ExtJs 日历的新事件窗口中，我正在进行 ajax 调用，作为响应，我发送带有 ExtJs 控件的 Html，但 ExtJs 控件没有出现在此屏幕中。那么我该怎么做呢？

// 我的 Ajax 请求...

```
var win = new Ext.Window({
       name:"new-event",
        modal:true,
        autoTabs:true,
       shadow:true,
       width:680,
       id:'new-event',
       height:500,
       autoScroll:false,
       autoLoad:{
           url:'new'
       },
       title:"New Event"
    });
win.show(); 
```

// 我在响应中发送的响应 Html（Json 编码）

```
<ext:TextField name="name" allowBlank="false" enablekeyevents="true">
   <prop:Actions>
      <ext:Action onevent="focus">
         <prop:Handler>
            getFocus("1");
         </prop:Handler>
      </ext:Action>
      <ext:Action onevent="blur">
         <prop:Handler>
            lostFocus("1");
         </prop:Handler>
      </ext:Action>
   </prop:Actions>
</ext:TextField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:04:38.347

您是否尝试在自动加载时启用脚本？将以下行添加到您的自动加载代码中

```
autoLoad:{
    url:'new'
    // Here add the scripts enabling
    ,scripts: true
}, 
```

# c# - c# DirectShow graphbuilder 输出文件名问题

> ID：11012004
> 
> 赞同：0
> 
> 时间：2012-06-13T09:31:21.663
> 
> 标签：c#, wpf, directshow, directshow.net

我是使用 Directshow 的新手。我非常愿意发布我编写的代码页面，但我希望有人可以解释或提示正确的解决方案方向，以便我自己弄清楚。

基本上，我有一个 WPF 程序，它显示一个窗口，可以预览我的网络摄像头——这已经完成并且正在工作。现在我正试图让它记录预览 - 使用 graphBuilder.SetOutputFileName 完成

但是，每次我显示记录另一个会话的窗口时，都会覆盖它记录的最后一个文件，即使我再次调用 graphBuilder.SetOutputFileName ！

所以我的问题是如何更改输出文件名来录制第二个视频。我知道我错过了一些东西，但不知道是什么。

提前致谢。富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:29:44.237

过滤器图通常会在您的初始文件中从头开始创建媒体文件，`Run`然后在`Stop`. 下次您重复调用时，您只需从空（覆盖）文件中重新启动它。没有附加。如果您想保留之前录制的内容，您需要通过提供新名称或复制/重命名完成的文件来切换文件。

# jquery - jquery、ajax 和提交表单

> ID：11012006
> 
> 赞同：0
> 
> 时间：2012-06-13T09:31:24.143
> 
> 标签：jquery, ajax, forms, preventdefault

我正在尝试使页面中的所有表单在提交时执行某些操作，并使用此 jQuery 代码防止它们的默认行为：

```
$("form").not("#loginf").submit(function (){
    event.preventDefault();
    var inputs = $(this).serialize();
    $.ajax({
      url: "pages/"+page+".php",
      type: "POST",  
      data: inputs+'&action='+param,
      cache: false
    }).done(function( html ) {
        update(html);
        rs();
    }).fail(function (){
        window.location = "/CMS/";
    });
}); 
```

和这个 html 表单（只有其中 1 个）：

```
<form method="POST" name="cpass">
    <span class="brow"><span class="label">סיסמא ישנה:</span><input type="password" name="oldp" /></span>
    <span class="brow"><span class="label">סיסמא חדשה:</span><input type="password" name="newp" /></span>
    <span class="brow"><span class="label">וידוא סיסמא:</span><input type="password" name="rnewp" /></span>
    <span class="brow"><input type="submit" name="cpasssub" value="שנה סיסמא"/></span>
</form> 
```

问题是 jQuery 函数甚至没有被执行（我通过在那里放置一个警报来检查）。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:33:18.747

您错过了`event`提交中的参数

```
 $("form").not("#loginf").submit(function (event){ 
```

# c# - WP7 Custom MultiColumnStackPanel Items 子项已经有父项

> ID：11012007
> 
> 赞同：1
> 
> 时间：2012-06-13T09:31:26.573
> 
> 标签：c#, silverlight, windows-phone-7, mobile

我正在使用[此](http://mobile.dzone.com/articles/multi-column-stackpanel-0)站点中的示例来创建 MultiColumnStackPanel。

然而有一个问题。加载页面后，堆栈面板看起来很好，与示例完全相同。但是当我导航到下一页然后返回上一页时，我得到了一个例外：

```
无效操作异常
```

带有以下消息：

```
元素已经是另一个元素的子元素。
```

.

所以我认为原始自定义堆栈面板中包含的项目正在添加到新的自定义堆栈面板中。但是，为什么**MultiColumnStackPanel**被“刷新”并且**MultiColumnStackPanel.Items**仍然存在？

还有其他人对此问题有解释/解决方案吗？

提前致谢

.

**MultiColumnStackPanel 类：**

```
public class MultiColumnStackPanel : StackPanel
{
    public int NumberOfColumns { get; set; }

    public static readonly DependencyProperty ItemsProperty =
            DependencyProperty.Register("Items",
            typeof(Collection<UIElement>),
            typeof(MultiColumnStackPanel),
            new PropertyMetadata(new Collection<UIElement>()));

    public Collection<UIElement> Items
    {
        get { return (Collection<UIElement>)GetValue(ItemsProperty); }
    }

    public MultiColumnStackPanel()
    {
        Loaded += (s, e) =>
        {
            LoadItems();
        };
    }

    void LoadItems()
    {
        Children.Clear();

        if (Items != null)
        {
            StackPanel sp = CreateNewStackPanel();
            foreach (UIElement item in Items)
            {
                sp.Children.Add(item);
                if (sp.Children.Count == NumberOfColumns)
                {
                    Children.Add(sp);
                    sp = CreateNewStackPanel();
                }
            }

            if (sp.Children.Count > 0)
                Children.Add(sp);
        }
    }

    private StackPanel CreateNewStackPanel()
    {
        Orientation oppositeOrientation;

        if(this.Orientation.Equals(Orientation.Vertical))
            oppositeOrientation = Orientation.Horizontal;
        else
            oppositeOrientation = Orientation.Vertical;

        return new StackPanel() { Orientation = oppositeOrientation };
    }
} 
```

**xml 示例：**

```
<model:MultiColumnStackPanel x:Name="customStackPanel" Orientation="Horizontal" NumberOfColumns="2">
    <model:MultiColumnStackPanel.Items>
        <Rectangle Height="80" Width="80" Margin="10" Fill="Green" />
        <Rectangle Height="80" Width="80" Margin="10" Fill="Green" />
        <Rectangle Height="80" Width="80" Margin="10" Fill="Green" />
        <Rectangle Height="80" Width="80" Margin="10" Fill="Green" />
    </model:MultiColumnStackPanel.Items>
</model:MultiColumnStackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:41:40.950

我想通了，并认为我会分享我的发现。

在 MultiColumnStackPanel 的构造函数中，函数`LoadItems()`绑定到`Loaded`StackPanel 的事件。

当导航到下一页然后导航回来时，MultiColumnStackPanel 并没有像我之前想的那样被再次创建。MultiColumnStackPanel的`Loaded`事件只是再次触发。

```
public MultiColumnStackPanel()
{
    Loaded += (s, e) =>
    {
        LoadItems();
    };
} 
```

然后我看到每次`LoadItems()`调用该函数时都会清除该对象的子对象。删除它就可以了，如果孩子们已经在场，则无需`Items`再次从列表中添加它们。

```
void LoadItems()
{
    // Children.Clear();

    if (Items != null && (Children == null || Children.Count == 0))
    {
        StackPanel sp = CreateNewStackPanel();
        foreach (UIElement item in Items)
        {
            sp.Children.Add(item);
            if (sp.Children.Count == NumberOfColumns)
            {
                Children.Add(sp);
                sp = CreateNewStackPanel();
            }
        }
        if (sp.Children.Count > 0)
            Children.Add(sp);
    }
} 
```

有时你只需要一点自我反省 =)

**编辑**

再注意一点，`ItemsProperty`不应该是静态的

```
public static readonly DependencyProperty ItemsProperty = // <-- remove static
    DependencyProperty.Register("Items",
    typeof(Collection<UIElement>),
    typeof(MultiColumnStackPanel),
    new PropertyMetadata(new Collection<UIElement>())); 
```

# linq - 元素具有不同类型的两个列表的相对补集

> ID：11012008
> 
> 赞同：1
> 
> 时间：2012-06-13T09:31:38.280
> 
> 标签：linq

我希望删除列表中的所有元素，这些元素可以与另一个不同类型的列表中的元素进行比较，这些元素不具有共同的继承性，但我确实有一个相等功能。一个例子可能会更清楚：

鉴于脚手架

```
bool isSomeSortOfEqual(Bottle b, Printer p){
  //implementation
}

List<Bottle> bottles = getBottles();
List<Printer> printers = getPrinters(); 
```

我想做这样的事情：

```
List<Bottle> result = bottles.Except(printers, (b, p => isSomeSortOfEqual(b, p)); 
```

.NET 中是否有任何内置函数，或者我应该手动实现它？除了stackoverflow上的.NET之外，与相对补充相关的问题似乎都没有处理不同类型的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:45:35.050

没有任何比赛？

```
from b in bottles
where !printers.Any(p => isSomeSortOfEqual(b, p))
select b; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:48:17.150

这个怎么样？基本思想是将列表转换为`List<object>`然后使用 .Except 和`IEqualityComparer<object>`

```
 class A
    {
        public int Ai;
    }
    class B
    {
        public int Bi;
    }

    public class ABComparer : IEqualityComparer<object>
    {
        public bool Equals(object x, object y)
        {
            A isA = x as A ?? y as A;
            B isB = x as B ?? y as B;

            if (isA == null || isB == null)
                return false;

            return isA.Ai == isB.Bi;
        }

        public int GetHashCode(object obj)
        {
            A isA = obj as A;
            if (isA != null)
                return isA.Ai;

            B isB = obj as B;
            if (isB != null)
                return isB.Bi;

            return obj.GetHashCode();
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            List<object> As = new List<object> { new A { Ai = 1 }, new A { Ai = 2 }, new A { Ai = 3 } };
            List<object> Bs = new List<object> { new B { Bi = 1 }, new B { Bi = 1 } };

            var except = As.Except(Bs, new ABComparer()).ToArray();
            // Will give two As with Ai = 2 and Ai = 3
        }
    } 
```

# importerror - imagej 中的导入错误。导入实用程序。服务？

> ID：11012017
> 
> 赞同：0
> 
> 时间：2012-06-13T09:32:11.887
> 
> 标签：importerror, imagej

我正在尝试在 ImageJ 上运行这个 CannyEdge 检测算法。代码在给出的链接上。问题是它无法导入文件中给出的实用程序。服务。我找不到任何这样的插件。请帮忙。

```
 http://svg.dmi.unict.it/iplab/imagej/Plugins/Edge%20Detectors/Canny/EdgeDetection/edge/Canny_.java 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:31:23.423

该文件也是插件源代码的一部分 - 您可以从以下位置下载它：

[http://svg.dmi.unict.it/iplab/imagej/Plugins/Edge%20Detectors/Canny/EdgeDetection/utility/Service.java](http://svg.dmi.unict.it/iplab/imagej/Plugins/Edge%20Detectors/Canny/EdgeDetection/utility/Service.java)

# internet-explorer - IE 页面被强制进入 IE7 文档模式

> ID：11012019
> 
> 赞同：6
> 
> 时间：2012-06-13T09:32:16.353
> 
> 标签：internet-explorer, doctype, x-ua-compatible

我一直在调查一个问题并且正在努力寻找新的想法，所以我想我会看看是否有人可以提供帮助。

我有一个在 Chrome 和 Firefox 中显示良好的页面。它在 IE9 中也可以正常显示，但是我们的一些客户必须使用兼容模式……当以兼容模式查看页面时，出于某种原因，它会强制以 IE7 文档模式显示。

该页面的第一行是 !DOCTYPE HTML，还有：

```
meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1 
```

我认为应该强制页面以最新的文档模式显示。

当我在 F12 Developer Tools 中浏览 HTML 时，html 的第一行已被注释掉：

```
!-- DOCTYPE HTML -- 
```

谁能建议我可以尝试解决此问题的任何方法，即强制页面以 IE9 文档模式显示？当我在开发人员工具中手动将文档模式更改为 IE9 时，页面显示正常 - 所以我只需要找出为什么 IE 强制使用 IE7 文档模式而不使用默认值。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T04:15:23.050

您可以看到我对类似问题的回答：[X-UA-Compatible 设置为 IE=edge，但它仍然不会停止 Compatibility Mode](https://stackoverflow.com/questions/6156639/x-ua-compatible-is-set-to-ie-edge-but-it-still-doesnt-stop-compatibility-mode/9338959#9338959)。

如果用户在“兼容性视图”设置对话框中切换了某些选项，例如“在兼容性视图中显示 Intranet 站点”或“在兼容性视图中显示所有站点”，则元标记不会覆盖文档类型，听起来可能是这种情况对于您的一些客户，无论是他们的意图还是他们公司的政策。

要强制它退出兼容性视图，您必须在托管服务器上而不是在提供的文件中设置 X-UA-Compatible；对于 .NET，您通常会像下面的示例一样在 web.config (IIS7) 中设置它，或者将其添加到 Web 应用程序属性 (IIS6) 的自定义 Http 标头中。

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <clear />
      <add name="X-UA-Compatible" value="IE=EmulateIE8" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

# php - 如何在一个控制器中返回 HTML 或 JSON(PHP)

> ID：11012032
> 
> 赞同：1
> 
> 时间：2012-06-13T09:33:14.053
> 
> 标签：php, json, rest, yii

我有一个有 2 页的 Yii 网站`site.com/user/create`和`site.com/user/create.json`

我需要为两个页面设置一个控制器。

1.  我如何为这些制定路线 - 我试过了`<controller:\w+>/<action:\w+>.json'=>'<controller>/<action>`）但它没有帮助
2.  如何在控制器中识别请求是针对 JSON 还是 HTML - 我已经尝试过`$_SERVER['CONTENT_TYPE']`，在 REST 客户端中没问题，但在浏览器中我收到了 PHP 通知`Undefined index: CONTENT_TYPE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:18:54.083

至少有两种方法：

1.  `Yii::app()->request->getRequestUri();`将为您提供请求 URI - 最后检查它的 .json 扩展名。您在问题中的路由规则应该可以工作并将请求发送到正确的控制器和操作。
2.  您可以像这样制定路由规则：

    ```
    <controller:\w+>/<action:\w+>.json'=>'<controller>/<action>/format/json 
    ```

    然后检查`format`您的操作中的参数。

我建议第二种方式，因为它是可扩展的。

# sorting - 如何使用 Thrust 库以较低的精度对键进行排序

> ID：11012040
> 
> 赞同：1
> 
> 时间：2012-06-13T09:33:37.933
> 
> 标签：sorting, cuda, thrust, radix-sort

我有一组整数值，我想使用 Thrust 对它们进行排序。在这种排序中是否有可能只使用一些高位/低位。如果可能的话，我不想使用用户定义的比较器，因为它将使用的算法从基数排序更改为合并排序，并大大增加了经过的时间。

我认为当所有数字在一个位上具有相同的值时，在排序时会跳过该位，因此使用尽可能低的位号是否可行，并希望它就足够了。（即：对于 5 位，使用 8 位的 char 并将高 3 位设置为 0）

例子：

```
sort<4, 0>(myvector.begin(), myvector.end())
sort<4, 1>(myvector.begin(), myvector.end()) 
```

仅使用 4 位排序，高或低..

类似于 [http://www.moderngpu.com/sort/mgpusort.html](http://www.moderngpu.com/sort/mgpusort.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:25:47.713

Thrust 的接口抽象出算法实现细节，例如当前排序策略之一是基数排序这一事实。由于底层排序实现可能会从版本到版本、后端到后端，甚至调用到调用，因此用户无法传达要排序的位数。

幸运的是，通常不需要这种明确的信息。在适当的时候，Thrust 的当前排序实现将检查排序键并在零位中省略多余的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:31:33.683

~~使用transformer_iterator怎么样？这是一个简短的示例（按第一位排序），您可以根据自己的目的编写自己的一元函数。~~

```
#include <iostream>
#include <thrust/device_vector.h>
#include <thrust/iterator/transform_iterator.h>
#include <thrust/sort.h>

using namespace std;
struct and_func : public thrust::unary_function<int,int>
{
    __host__ __device__
        int operator()(int x)
        {
            return 8&x;
        }
};
int main()
{
    thrust::device_vector<int> d_vec(4);
    d_vec[0] = 10;
    d_vec[1] = 8;
    d_vec[2] = 12;
    d_vec[3] = 1;
    thrust::sort_by_key(thrust::make_transform_iterator(d_vec.begin(), and_func()),
                 thrust::make_transform_iterator(d_vec.end(), and_func()),
                 d_vec.begin());
    for (int i = 0; i < 4; i++)
        cout<<d_vec[i]<<" ";
    cout<<"\n"<<endl;
    return 0;
} 
```

# sql-server - 如何在 BEGIN ... END 块中使用 USE？

> ID：11012043
> 
> 赞同：0
> 
> 时间：2012-06-13T09:33:54.433
> 
> 标签：sql-server, tsql

试图让单个 SQL 脚本适用于多个环境，但该`USE`语句会导致*其他*环境出错，即在下面的示例中，当针对 SQL02 运行时`USE [application]`，即使在`BEGIN ... END`?

```
-- connected to SQL02
DECLARE @STAGE INTEGER = 3
IF @@SERVERNAME = 'SQL02' 
    SET @STAGE = 1
IF @@SERVERNAME = 'SQL03' 
    SET @STAGE = 2

IF @STAGE = 1 
    BEGIN
        IF EXISTS ( SELECT  *
                    FROM    [application_tst].[sys].[database_principals]
                    WHERE   name = N'qauser' ) 
            BEGIN
                USE [application_tst]
                --rest of code
            END
    END

IF @STAGE = 2 
    BEGIN
        IF EXISTS ( SELECT  *
                    FROM    [application].[sys].[database_principals]
                    WHERE   name = N'qauser' ) 
            BEGIN
                USE [application]
                --rest of code
            END
    END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:50:27.227

您将需要在任何地方使用明确的三部分名称，而不是使用`USE`. USE 是一个执行时间命令，您的批处理将无法按预期*编译*，因为您希望名称解析发生，就像在*编译期间**执行*USE 一样。

 *```
-- connected to SQL02
DECLARE @STAGE INTEGER = 3
IF @@SERVERNAME = 'SQL02' 
    SET @STAGE = 1
IF @@SERVERNAME = 'SQL03' 
    SET @STAGE = 2

IF @STAGE = 1 
    BEGIN
        IF EXISTS ( SELECT  *
                    FROM    [application_tst].[sys].[database_principals]
                    WHERE   name = N'qauser' ) 
            BEGIN
                select from [application_tst].dbo.table
                insert into [application_tst].dbo.table
                --rest of code, using explicit 3 part names
            END
    END

IF @STAGE = 2 
    BEGIN
        IF EXISTS ( SELECT  *
                    FROM    [application].[sys].[database_principals]
                    WHERE   name = N'qauser' ) 
            BEGIN
                select from [application].dbo.table
                insert into [application].dbo.table
                --rest of code, using explicit 3 part names
            END
    END 
```

另一种方法是使用[动态 sql](http://www.sommarskog.se/dynamic_sql.html)，这将延迟编译直到被调用。*

# java - 从 JSON 解析字符串数组

> ID：11012044
> 
> 赞同：3
> 
> 时间：2012-06-13T09:33:54.677
> 
> 标签：java, json

我有这个 JSON 对象：

```
{"error":null,
 "result":[{"id":"1234567890",
            "count":1,
            "recipients":
            ["u3848",
               "u8958",
               "u7477474"
            ],
            "dateCreated":"2012-06-13T09:13:45.989Z"
           }]
 } 
```

我正在尝试找到一种将`recipients`数组正确解析为`String[]`对象的方法。

是否有捷径可寻？

**编辑：**

找到了包含结果所需的所有内容的答案：[Sending and Parsing JSON Objects](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T07:19:30.520

做我想做的事情是这样的：

```
JSONArray temp = jsonObject.getJSONArray("name");
int length = temp.length();
if (length > 0) {
    String [] recipients = new String [length];
    for (int i = 0; i < length; i++) {
        recipients[i] = temp.getString(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:03:46.667

I always suggest my favorite library [json-lib](http://json-lib.sourceforge.net/usage.html) to handle JSON stuffs.

You can use [JSONArray](http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/JSONArray.html) to convert to `Object[]`, although it's not `String[]`, you can still use it because every `Object` has `toString()` method.

```
String sYourJsonString = "['u3848', 'u8958', 'u7477474']";
Object[] arrayReceipients = JSONArray.toArray (JSONArray.fromObject(sYourJsonString));
System.out.println (arrayReceipients [0]); // u3848 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:44:26.683

您可以尝试将 xstream 与 json 序列化程序一起使用。看看[这个链接](http://xstream.codehaus.org/json-tutorial.html)

# c# - XMS.Net 2.1.0.0/1 CWSMQ0282E

> ID：11012046
> 
> 赞同：3
> 
> 时间：2012-06-13T09:33:59.567
> 
> 标签：c#, .net, ibm-mq

我们使用 XMS.Net 连接到 WebSphere MQ 服务器 V7；这在 V6 服务器上一直运行良好，但自从“对方”升级到 V7 后，我们遇到了一些麻烦。大部分已经修复，但现在我偶然发现了一个我无法解释的错误，也找不到任何关于：

```
CWSMQ0282E: A null value has been used for argument BUFFER = <> NULL within method ImportMQMDMesageBuffer(WmqSession, WmqDestination, MQMD,byte[],int,int).
The preceding method detected an invalid  null argument.
If necessary, recode the application to avoid the error condition.
Stacktrace:    at IBM.XMS.Client.WMQ.WmqReceiveMarshal.ImportMQMDMesageBuffer(MQMessageDescriptor mqmd, Byte[] buffer, Int32 dataStart, Int32 dataEnd)
   at IBM.XMS.Client.WMQ.WmqAsyncConsumerShadow.Consumer(Phconn hconn, MQMessageDescriptor mqmd, MQGetMessageOptions mqgmo, Byte[] pBuffer, MQCBC mqcbc)
   at IBM.WMQ.Nmqi.UnmanagedNmqiMQ.NmqiConsumerMethodUM(Int32 hconn, IntPtr structMqmd, IntPtr structMqgmo, IntPtr buffer, IntPtr structMqcbc) 
```

*关于这个错误的原因，我认为*我知道的唯一一件事是我们发送了一条消息，我期待 CoA 和 CoD 消息；我期待这些在队列中，当我关闭我的消费者监听这些消息时，其余的工作正常。

我完全不知道发生了什么……

**编辑**

这是最小的测试用例：

```
using System;
using System.Configuration;
using System.Text;
using IBM.XMS;

namespace TestApp
{
    class Program
    {
        static void Main(string[] args)
        {
            //Setup unhandled exception "logging"
            AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

            //Change this to your own needs!
            string QueueManager = "CONTOSO";
            string Channel = "MYCOMPANY.CONTOSO.TCP";
            string Queue = "MYCOMPANY.REPORTQ";
            string HostIP = "192.168.1.29"
            int Port = 1416;

            //Create connection
            var factoryfactory = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
            var connectionfactory = factoryfactory.CreateConnectionFactory();

            connectionfactory.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, QueueManager);
            connectionfactory.SetStringProperty(XMSC.WMQ_HOST_NAME, HostIP);
            connectionfactory.SetIntProperty(XMSC.WMQ_PORT, Port);
            connectionfactory.SetStringProperty(XMSC.WMQ_CHANNEL, Channel);
            connectionfactory.SetIntProperty(XMSC.WMQ_BROKER_VERSION, XMSC.WMQ_BROKER_V2);
            connectionfactory.SetIntProperty(XMSC.WMQ_CONNECTION_MODE, XMSC.WMQ_CM_CLIENT_UNMANAGED);

            var connection = connectionfactory.CreateConnection();
            connection.ExceptionListener = new ExceptionListener(OnXMSExceptionReceived);

            //Create session
            var session = connection.CreateSession(false, AcknowledgeMode.ClientAcknowledge);

            //Create consumer
            var queue = session.CreateQueue(string.Format("queue://{0}/{1}", QueueManager, Queue));
            queue.SetIntProperty(XMSC.WMQ_TARGET_CLIENT, XMSC.WMQ_TARGET_DEST_MQ);  //Prevent automatic RFH (or JMS) headers in messages...
            var consumer = session.CreateConsumer(queue);
            consumer.MessageListener = new MessageListener(OnMessageReceived);  //Messages received will be handled by OnMessageReceived

            //Start the connection (which starts the consumer to listen etc.)
            Console.WriteLine("Starting");
            connection.Start();
            Console.WriteLine("Started; press any key to stop");

            //Now we wait...
            Console.ReadKey();

            //Tear down the connection
            Console.WriteLine("Stopping");
            connection.Stop();
            Console.WriteLine("Stopped; press any key to end application");

            //Keep the console around
            Console.ReadKey();
        }

        private static void OnMessageReceived(IMessage message)
        {
            Console.WriteLine("Message received");
            if (message is IBytesMessage)
            {
                var bytesmsg = (IBytesMessage)message;
                var data = new byte[bytesmsg.BodyLength];
                Console.WriteLine(Encoding.UTF8.GetString(data));
            }
            else
            {
                //The message is not an IBytesMessage, check to see if it is a Feedback-type message
                if (message.PropertyExists(XMSC.JMS_IBM_FEEDBACK))
                {
                    //Figure out which type of feedback message this is
                    int feedback = message.GetIntProperty(XMSC.JMS_IBM_FEEDBACK);
                    switch (feedback)
                    {
                        case MQC.MQFB_COA:
                            Console.WriteLine("COA received");
                            break;
                        case MQC.MQFB_COD:
                            Console.WriteLine("COD received");
                            break;
                        default:
                            //Unknown feedback type
                            Console.WriteLine("Unknown feedback");
                            break;
                    }
                }
                else
                {
                    //The message is not a feedback message; we don't know what this is so it's unexpected.
                    Console.WriteLine("Unexpected message received");
                }
            }

            Console.WriteLine("Acknowledging");
            message.Acknowledge();
            Console.WriteLine("Acknowledged");
        }

        private static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
        {
            //Uh oh
            Console.WriteLine("*** UnhandledException ***");
            Console.WriteLine((e.ExceptionObject as Exception).Message);
            Console.WriteLine("******************************");
        }

        private static void OnXMSExceptionReceived(Exception ex)
        {
            //Uh oh
            Console.WriteLine("*** OnXMSExceptionReceived ***");
            Console.WriteLine(ex.Message);
            Console.WriteLine("******************************");
        }
    }
} 
```

创建一个新的（控制台）项目，添加对 IBM.XMS.dll 的引用（C:\Program Files (x86)\IBM\WebSphere MQ\Tools\Lib\IBM.XMS.dll）并运行该项目。将任何消息放入报告队列中，看看会发生什么。

当连接到 V6 服务器时一切正常，V7 导致异常被抛出。

我们也尝试更新到 2.1.0.1 但无济于事......

**编辑**

这是我所看到的： ![添加了更多的写入行，但崩溃很明显](../Images/d0dfe034cc8ee38b025bccb5f905f70b.png)

[这是我的跟踪日志](http://pastebin.com/raw.php?i=P7q1x1ML)（抱歉，无法在此处添加它，因为我的消息将超过 30000 个字符长），[这](http://pastebin.com/raw.php?i=vuXRDDC9)是一个更详细的日志（traceSpecification “all”而不是“debug”）。

我还尝试将（测试）应用程序切换到 .Net V2.0.50727.5456，但这也无济于事。

**编辑**

我似乎已将其范围缩小到“空”的 CoA 和 CoD；当使用 MQRO_COA_WITH_DATA 或 MQRO_COA_WITH_FULL_DATA（与 CoD 相同）而不是 MQRO_COA 发送消息时，不会发生 CWSMQ0282E 错误。所以 XMS.Net 似乎在 CoA 和 CoD 的空体上崩溃了。我需要确认一些事情以确保它不是由我的项目中的其他东西干扰引起的，但我很确定这是原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:57:26.050

据我所知，这个例外确实发生在“空”CoA 的 en CoD 上。`MQRO_COA_WITH_DATA`当使用/ `MQRO_COD_WITH_DATA`（甚至更大的`MQRO_COA_WITH_FULL_DATA`/ ）发送消息时，`MQRO_COD_WITH_FULL_DATA`不会发生异常。我们将向 IBM 提交“PMR”以确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:12:06.423

异常似乎是因为收到的消息没有消息正文。如果收到的消息是由于 MQRO_COD 或 MQRC_COA 选项（在发送原始消息时设置）将没有任何消息正文。当 XMS 试图处理没有任何正文的消息时，它就会遇到麻烦。

我对使用 MQ v6 时这是如何工作的感到困惑。您可能需要检查发送原始消息的应用程序是否已延迟更改。

此外，对于 XMS 处理任何消息，传入消息必须包含所需的 JMS 标头。MQRO_COD/MQRO_COA 由队列管理器自动生成，不包含 JMS 标头。

关于上面代码片段的其他一些建议：

1) 的实例`IPEndpoint`并不是真正需要的。您可以简单地将主机名或 IP 地址设置为字符串，将端口号设置为整数。

2）`XMSC.RTT_BROKER_PING_INTERVAL`连接WMQ时无需设置。

3）由于您在创建会话时使用过`AcknowledgeMode.AutoAcknowledge`，因此无需调用方法。`message.Acknowledge()``OnMessageReceived`

# iphone - 如何以编程方式复制cloudme中的文件夹

> ID：11012047
> 
> 赞同：0
> 
> 时间：2012-06-13T09:34:03.807
> 
> 标签：iphone, cloud, directory, copy-paste, webdav

我想让我的 iphone 应用程序可以使用[这个站点](https://github.com/ccgus/flycode/tree/master/WebDAV)中的 flycode 连接到一些 webdav 服务器，我已经完成了所有的实现，但是我在[cloudme 服务器](http://www.cloudme.com/)中复制文件夹时遇到了问题。我在另一个 webdav 服务器中没有这个问题。我在这个过程中的响应代码是 403，响应字符串是：

响应字符串：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"/>
<title>Error 403 COPY needs a file as source</title>
</head>
<body>
<h2>HTTP ERROR: 403</h2>
<p>Problem accessing /myApp/xios/Documents/myDirectory///. Reason:
<pre>    COPY needs a file as source</pre></p>
<hr /><i><small>Powered by Jetty://</small></i>

</body>
</html> 
```

这是我在飞行代码 webdav 中用来调用复制方法的代码：

```
NSURL *urlFrom = [[NSURL alloc] initWithScheme:@"https" host:[prefs objectForKey:@"idiskhost"] path:fromPath];

    NSURL *urlTo = [[NSURL alloc] initWithScheme:@"https" host:[prefs objectForKey:@"idiskhost"] path:[NSString stringWithFormat:@"%@/",forPath]];

[[[MyAppWebDAVRequest requestToURL:urlFrom] synchronous] copyToDestinationURL:urlTo]; 
```

cloudme 是否支持复制文件夹？还是我的代码有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:56:05.283

我已经解决了这种情况，问题是CloudMe没有授予任何复制文件夹的权限，我现在从系统响应日志中获得了这个。

# android - 从 C2DM 获得 401 响应

> ID：11012050
> 
> 赞同：0
> 
> 时间：2012-06-13T09:34:10.397
> 
> 标签：android

我从谷歌得到例外说：

```
java.io.IOException: Received authentication challenge is null 
```

我读到这是重现 401 错误。所以这

```
Indicates that the ClientLogin AUTH_TOKEN used to validate the sender is invalid. 
```

但是我已经成功注册并使用 ClientLogin 登录了所有内容。那么可能有什么问题呢？

我还需要在这里重新注册我的应用程序吗？

[为 C2DM 欢呼](https://developers.google.com/android/c2dm/signup?hl)

因为我没有谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:43:51.577

让你在给定的链接上注册你的应用程序。此外，您应该在联系电子邮件地址中提到的邮件 ID 上从 C2DM 收到邮件。

# jakarta-ee - Java EE：当用户超过连接池中定义的数量时

> ID：11012055
> 
> 赞同：4
> 
> 时间：2012-06-13T09:34:13.450
> 
> 标签：jakarta-ee, servlets, connection-pooling

我正在开发一个基于 Java EE 的应用程序，使用 Tomcat 作为服务器和 MySQL 作为数据库。我已经为 50 个用户配置了连接池。

现在我的问题是，如果在给定时间有 51 个用户（同时）访问该应用程序，那么第 51 个用户会发生什么？（因为应用程序一次只支持 50 个连接）

**我的要求是，对于第 51 个用户，我需要显示一条消息，例如“请在其他时间后访问”。**

这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T09:56:14.947

50 个连接池意味着您的 WebApp 到您的数据库的连接最多为 50 个，这并不意味着可以同时连接到您的应用程序的最大用户数。

即使很多用户同时使用您的应用程序，也并不意味着所有用户都将使用与 DB 的连接（例如，空闲、查看静态页面、从缓存中获取数据等）。

您没有提及您正在使用什么连接池，但我假设您正在使用任何体面的库并适当地使用它，例如每次完成查询时调用 connection.close() 以将连接返回到池。

如果是这种情况，请不要担心，如果池全部用完，则下一个用户将排队，直到一个连接返回池。

因此，您可以添加超时来检测此队列时间，例如，如果在 5 到 10 秒内 DriverManager.getConnection() 未返回，则假设池已满并将用户重定向到带有该消息的静态页面。

请务必记录此事件，因此如果您知道大部分时间池何时已满，那么是时候增加最大连接数了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:42:19.580

连接池本身由 Tomcat 管理，这使其对您的应用程序不可见。简而言之，您作为开发人员不知道也不应该关心它。

相反，您可以（并且应该）做的是确保您保持连接的时间不会超过您实际需要的时间。这样一来，您就不会让连接池一无所获。

至于你的问题？Tomcat 将第 51 个连接请求放入队列中，一旦有可用的连接请求，就会建立实际连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:37:37.480

如果您的应用程序编写正确，您将检查池外的连接，仅将它们挂起足够长的时间以执行操作，然后立即将它们返回池以供其他人使用。

如果您这样做，您很可能能够通过 50 个连接为超过 50 个用户提供服务。

如果每个会话都挂在一个连接上，那么你就犯了一个错误。那永远无法扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-18T06:09:17.777

连接池通常包含最大连接配置参数，它指定与 db 的最大连接设置。一旦连接被释放，它就会返回到池中。在选择池的**maxConnections**时，您必须非常明智。这个数字必须是连接数，在正常用户流量场景下可以处理数据库连接需求。如果遇到这种情况，在大多数情况下，连接数超过了**maxConnections**，那么您必须增加此数量。就您而言，我认为您将能够轻松地同时为 50 多个用户提供服务。除此之外，它还取决于您的应用程序逻辑。它不能不必要地保持更长的连接时间，并且一旦完成连接就必须释放连接。

然而，一些连接池的实现，也允许连接池的大小在不同的时间，在应用程序的不同负载下变化。

# ruby-on-rails - 能够自动更新 API 文档

> ID：11012057
> 
> 赞同：3
> 
> 时间：2012-06-13T09:34:15.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api

我正在开发一个为外部开发人员提供 API 的网站。

每当更新 API（即修改参数、新端点等）时，我都必须手动更新文档。

所以我正在研究如何自动完成这个过程。这是我希望实现的目标：一旦我的源代码更新并提交到我的源代码控制，某种 API 注册表将被更新。所以我的文档可以是一个引用注册表并向查看者显示最新 API 的应用程序。

我的网站基于 Ruby on Rails。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:58:48.733

RDoc 是根据您的源代码自动生成的，它是 Rails 的默认设置。您的代码需要有据可查，但如果是，您可以运行

```
bundle exec rake doc:app 
```

并且您的应用程序将生成可从`doc/app/index.html`. 我会看一下，看看这些文档是否符合您的需求。“类和模块索引”侧边栏中的链接包含所有方法的列表以及它们的源代码的可扩展视图。

我使用自定义 rake 任务将所有文档放在 Rails 公共文件夹中，以便直接从我的网站访问，并允许我添加多个自定义页面。我想你做一些只解析你的 API 文件的类似事情不会那么难。

链接：

[RDoc 语法帮助](http://rdoc.sourceforge.net/doc/)

[Github 上的项目](http://github.com/rdoc/rdoc/)

# c# - 在 ASP.Net 运行时按名称隐藏 GridView 列

> ID：11012059
> 
> 赞同：19
> 
> 时间：2012-06-13T09:34:20.563
> 
> 标签：c#, gridview, hide, asp.net-4.0

是否可以在运行时按名称显示/隐藏 GridView 列？

我可以通过索引来做到这一点，如下所示：

```
gridReviews.Columns[4].Visible = false; 
```

但是我想做以下事情：

```
gridReviews.Columns["Name"].Visible = false; 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T10:28:00.647

您可以使用以下代码：

```
foreach (DataControlField col in gridReviews.Columns)
        {
            if (col.HeaderText == "Name")
            {
                col.Visible = false;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T17:51:58.040

如果您可以访问用于绑定gridview的数据并且gridview列与数据表的顺序相同（并且AutoGenerateColumns = false），则可以通过列名间接访问gridview：

```
//Make ID column invisible by column name
gv.Columns[dt.Columns[ID].Ordinal].Visible = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-25T21:35:43.433

未针对 ASP.NET 进行测试...下一行是针对 Windows 窗体解决方案...

因为这个问题在 Windows 表单关键字的顶部也是如此发布这个..

```
my_gridview.Columns["ColumnName"].Visible = false; 
```

# iphone - MKMapView - 删除注释会导致应用程序崩溃

> ID：11012067
> 
> 赞同：11
> 
> 时间：2012-06-13T09:35:15.460
> 
> 标签：iphone, ios, xcode, cocoa-touch, ios5

通过以下方式从我的地图视图中删除注释：

```
 if ([[self.mapView annotations] count] > 0)
{
    [self.mapView removeAnnotations:[self.mapView annotations]];
} 
```

导致我的应用程序崩溃，但出现以下异常：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: 'Cannot remove an observer <MKAnnotationContainerView 0xe87b420> for the key path "title" from <PFAnnotation 0x10851230> because it is not registered as an observer.' 
```

注释通过以下方式添加：

```
 CLLocationCoordinate2D pinPosition;
for (int index = 0; index < [array count]; index++)
{        
    Station *aStation = [array objectAtIndex:index];
    PFAnnotation *stationPin = [[PFAnnotation alloc] init]; //StationPinView
    pinPosition = CLLocationCoordinate2DMake([[aStation valueForKey:@"latitude"] doubleValue], [[aStation valueForKey:@"longitude"] doubleValue]);
    stationPin.stationName = [aStation valueForKey:@"stationName"];
    stationPin.stationPosition = pinPosition;
    stationPin.stationLength = [aStation valueForKey:@"platformLength"];

    [self.mapView addAnnotation:stationPin];
    [stationPin release];        

} 
```

我的 PFAnnotation.h 是：

```
@interface PFAnnotation : NSObject <MKAnnotation>
{
    NSString *stationName;
    CLLocationCoordinate2D stationPosition;
    NSNumber *stationLength;

}

@property (nonatomic, retain) NSString *stationName;
@property CLLocationCoordinate2D stationPosition;
@property (nonatomic, retain) NSNumber *stationLength;

@end 
```

我的 PFAnnotation.m 是：

```
@implementation PFAnnotation

@synthesize stationName;
@synthesize stationPosition;
@synthesize stationLength;

- (CLLocationCoordinate2D)coordinate;
{
    return stationPosition; 
}

- (NSString *)title
{
    return stationName;

}

- (NSString *)subtitle
{
    if (stationLength == nil)
        return nil;
    else
        return [NSString stringWithFormat:@"Platform Length: %@ft",stationLength];
}

- (void)dealloc {
    [stationName release];
    [stationLength release];
    [super dealloc];
} 
```

我在其他一些线程中读到，从后台线程设置注释属性是上述错误的原因。但在我的情况下，情况并非如此，因为每件事都是在主线程上执行的。请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T12:59:31.187

好的..终于解决了！！！我认为这是由于在添加注释期间提供的动画。由于有许多注释是与动画背靠背添加的，并且在动画开始之前注释也被删除，因此可能有对已发布注释的引用（这是我的猜测）。此外，在每个 regionDidChangeAnimated 调用上都进行了删除+添加过程，这可能在删除和添加过程之间产生了重叠。无论如何，我是如何解决的，我提供了一个计时器，它只会在每个 regionDidchangeAnimated 之后的 1 秒后触发，以确保用户完成了拖动操作。因此避免了不必要的添加+删除注释，我能够避免崩溃。感谢所有在这里花时间支持我的人，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:10:28.050

在您的 PFAnnotation 类中，您是否像在协议中一样声明了标题和副标题属性？

[http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotation_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotation_Protocol/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:21:25.097

如果您的 PFAnnotation 确实有不正确的字符串值设置器获取器：

从这里：[http ://cocoadevcentral.com/d/learn_objectivec/](http://cocoadevcentral.com/d/learn_objectivec/)

二传手：

```
- (void) setCaption: (NSString*)input
{
    [caption autorelease];
    caption = [input retain];
} 
```

吸气剂：

```
- (NSString*) caption 
{
    return caption;
} 
```

释放：

```
- (void) dealloc
{
    [caption release];
    [super dealloc];
} 
```

另外 - 以这种方式提供坐标更容易：（也适用于 ios 3.1.3）

```
stationPin.stationPosition = (CLLocationCoordinate2D) {[[aStation valueForKey:@"latitude"] doubleValue], [[aStation valueForKey:@"longitude"] doubleValue]} 
```

比（仅来自 ios 4）

```
stationPin.stationPosition = CLLocationCoordinate2DMake([[aStation valueForKey:@"latitude"] doubleValue], [[aStation valueForKey:@"longitude"] doubleValue]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:15:34.733

请检查是否在代码中的任何地方都明确删除了属性“title”的观察者。

# web-services - WSDL：没有为消息定义元素类型

> ID：11012074
> 
> 赞同：3
> 
> 时间：2012-06-13T09:35:31.130
> 
> 标签：web-services, wsdl, axis2, bpel, apache-ode

我正在使用 Eclipse BPEL Designer 插件创建服务编排，但它自动生成的 WSDL 文件存在问题。

这是 WSDL：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
   <definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ws.invocation.import" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:wsdl="http://services.lolsystem.it" name="ImportOrchestration" targetNamespace="http://ws.invocation.import">

   <plnk:partnerLinkType name="ImportType">
      <plnk:role name="ImportRole" portType="wsdl:ImportServicePortType"/>
   </plnk:partnerLinkType>
   <import location="ImportModule.wsdl" namespace="http://services.italsystem.it"/>
<types>
   <schema xmlns="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://ws.invocation.import">

     <element name="ImportOrchestrationRequest" type="tns:ImportOrchestrationReqType">
           </element>

   <element name="singleEntry">
            <complexType>
                <sequence>
                    <element minOccurs="0" name="name" nillable="true" type="string"/>
                    <element minOccurs="0" name="content" nillable="true" type="base64Binary"/>
                </sequence>
            </complexType>
        </element>

              <element name="ImportOrchestrationResponse">
            <complexType>
                <sequence>
                    <element name="result" type="string"/>
                </sequence>
            </complexType>
        </element>

        <complexType name="ImportOrchestrationReqType">
            <sequence minOccurs="1" maxOccurs="unbounded">
                <element name="file" type="tns:SingleFile"></element>
            </sequence>
        </complexType>

        <complexType name="SingleFile">
            <sequence>
                <element name="name" type="string"></element>
                <element name="content" type="base64Binary"></element>
            </sequence>
        </complexType>
    </schema>
</types>

<message name="ImportOrchestrationRequestMessage">
    <part name="payload" type="tns:ImportOrchestrationReqType"/>
</message>
<message name="ImportOrchestrationResponseMessage">
    <part element="tns:ImportOrchestrationResponse" name="payload"/>
</message>

<!-- portType implemented by the ImportOrchestration BPEL process -->
<portType name="ImportOrchestration">
    <operation name="process">
        <input message="tns:ImportOrchestrationRequestMessage"/>
        <output message="tns:ImportOrchestrationResponseMessage"/>
    </operation>
</portType>   

<plnk:partnerLinkType name="ImportOrchestration">
    <plnk:role name="ImportOrchestrationProvider" portType="tns:ImportOrchestration"/>
</plnk:partnerLinkType>

<binding name="ImportOrchestrationBinding" type="tns:ImportOrchestration">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="process">
        <soap:operation soapAction="http://ws.invocation.import/process"/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
</binding>

<service name="ImportOrchestration">
    <port binding="tns:ImportOrchestrationBinding" name="ImportOrchestrationPort">
        <soap:address location="http://localhost:8080/ode/processes/ImportOrchestration"/>
    </port>
</service>
</definitions> 
```

现在，问题在于 Eclipse for Eclipse 验证器的 WSDL 格式正确。我使用 Apache ODE 作为 BPEL 引擎，它基于 Axis2。问题是当我尝试部署我的 BPEL 进程时，Axis 引擎给了我一个错误，它是：

“没有为消息 ImportOrchestrationRequestMessage 定义元素类型”

有人可以给我一些建议来理解这个错误以及如何纠正它吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:00:46.657

你可以尝试以下
`<message name="ImportOrchestrationRequestMessage"> <part name="payload" element="tns:ImportOrchestrationRequest"/> </message>`

问题是您的绑定是文档文字，在这种情况下，应该使用“元素”而不是“类型”来配置消息部分

高温高压

# jquery - 使用 backstretch 插件的随机背景图像幻灯片

> ID：11012078
> 
> 赞同：1
> 
> 时间：2012-06-13T09:35:36.140
> 
> 标签：jquery

这是交易。我正在使用一个名为 backstretch 的插件，它可以全屏显示我的背景图像并制作幻灯片。

这就是我[现在所拥有的](http://jsfiddle.net/Autodealers/32KE5/)（[插件网站](http://srobbin.com/jquery-plugins/backstretch/)）。

现在，我希望图像每次都是随机的。假设我有 3 张图片，就像：

```
2, 3, 1
3, 1, 2
1, 2, 3
1, 3, 2 
```

在一行中，这将是：`2, 3, 1, 3, 1, 2, 1, 2, 3, 1, 3, 2`

注意：图像必须避免重复，例如：`2, 3, 1, 1, 2, 3`

任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:48:37.140

用于`math.Random();`从您的数组中提供一个随机索引，将其放置在一个 while 循环中并执行此操作，直到您获得不同的数字。IE。

```
oldIndex = index;
while (oldIndex == index) {
   index = Math.floor((Math.random()*images.length));
   } 
```

编辑：要从随机图像开始，请在调用 backstretch 之前使用 random 方法

```
index = Math.floor((Math.random()*images.length));
$.backstretch(images[index], {
    speed: 500
}); 
```

你的[小提琴](http://jsfiddle.net/32KE5/9/)

编辑2：

在与 OP 要求（在评论中）讨论之后，他们需要一个不完全随机的滑块。在再次选择其中任何一个索引之前，需要确保所有索引都已使用，然后在为空时重新设置。

通过将索引列表填充到单独的数组中，我们可以在使用它们时从数组中删除它们直到为空，然后重新填充。我们还保留了以前的索引，这样即使在重置时图像也不会重复。最终结果[在这里](http://jsfiddle.net/32KE5/12/)

# gwt - GWT 或其他带有 Spring WebFlow/MVC 框架的表示层技术

> ID：11012080
> 
> 赞同：0
> 
> 时间：2012-06-13T09:35:40.383
> 
> 标签：gwt, spring-mvc, spring-webflow, presentation-layer

首先，我以前从未使用过 GWT。我在 HTML/CSS/JS/JSP 方面有很好的经验。

我正在寻找人们对 Google Web Toolkit 是否适合我正在开发的全新网络应用程序的意见。

*   一个很大的要求是 UI 有吸引力且设计良好（看起来不像笨重的 Java/Swing 应用程序）。
*   它应该看起来像任何典型的基于 HTML/CSS/JS 的现代网站。
*   这是一个内部公司应用程序，因此不需要 SEO。
*   JSF 不是一个选项。

使用的 Web 应用程序框架将是 Spring Webflow 和 Spring MVC。它将使用轻量级控制器与服务层进行通信。

对于我想要实现的目标，Spring Tiles 与 JSP 结合是否会比 GWT 更容易或更灵活？

欢迎 GWT 和其他选项的优点/缺点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:07:47.273

**GWT的优势**

*   您真的不需要了解任何 JavaScript，因为您所有的客户端代码都将使用 Java

这通常是人们选择 GWT 的主要原因。他们是懂 Java 但不懂 Javascript 的后端开发人员，而且他们真的不想学习它。不过，你应该小心这一点。GWT 是一个非常完整和复杂的框架，其中包含许多特定于 GWT 的概念。即使您将使用 Java 进行编码，您仍然需要阅读许多教程和文档，然后才能构建干净的 GWT 应用程序

*   即用型小部件，例如日期选择器、动态表格、布局面板、弹出窗口

它并不是真正特定于 GWT。其他前端框架，如 jQuery 或 Dojo 或其他任何东西也可以为您提供这些。您可以查看[GWT Showcase](http://gwt.google.com/samples/Showcase/Showcase.html)以了解 GWT 提供的内容。

*   GWT 为您处理了许多复杂且具有潜在危险的事情。

诸如跨浏览器支持、国际化、图像和静态资源捆绑、前端安全、与服务器的 Ajax 通信、事件和 MVP（就像 MVC）框架支持之类的东西。看看[文档](https://developers.google.com/web-toolkit/doc/latest/DevGuide)，它做得非常好，非常彻底。

*   调试很简单

GWT 有两种不同的“模式”。当您为生产构建应用程序时，gwt 将为您编写到 javascript 的前端编译所有 java 代码。此 javascript 将在您客户的浏览器中执行。但是当你在开发时，你可以运行你的应用程序，而无需将你的 java 代码编译成 javascript。这使您可以使用调试器来调试您的界面。这是一个非常好的工具。

**GWT 的缺点**

*   正如我之前所说，GWT 是一个完整的框架，具有特定的概念。不要认为仅仅因为它在 java 中并且你知道 java 就不必学习新东西。

*   将 GWT 与后端框架接口并不容易

GWT 客户端代码与服务器通信的最常见方式是使用 GWT RPC 机制。这意味着您将需要有实现特定接口的 servlet。您应该明确阅读有关[客户端-服务器通信](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)的文档，看看它是否适合 Spring。在 SO 或 Google 上进行搜索应该会为您提供设置应用程序的指导。

# java - Xerces、外部模式和默认命名空间

> ID：11012085
> 
> 赞同：1
> 
> 时间：2012-06-13T09:36:01.123
> 
> 标签：java, xerces

我有一个 XSD 文件：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="someNameSpace"
    xmlns="someNameSpace"
    elementFormDefault="qualified">
...
</xs:schema> 
```

在 Java 代码中：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setIgnoringElementContentWhitespace(true);
dbf.setIgnoringComments(true);
dbf.setFeature("http://apache.org/xml/features/validation/schema", true);
dbf.setFeature("http://apache.org/xml/features/validation/schema-full-checking", true);
dbf.setAttribute("http://apache.org/xml/properties/schema/external-schemaLocation", "someNameSpace file:///home/.../schema.xsd");

DocumentBuilder builder = dbf.newDocumentBuilder();
builder.setErrorHandler(new SomeHandlerImpl());
Document doc = builder.parse(input); 
```

输入是一个文件，开头为：

```
<?xml version="1.0" encoding="UTF-8"?>
<projekt xmlns="someNameSpace"> 
```

如果我删除命名空间并改用`http://apache.org/xml/properties/schema/external-noNamespaceSchemaLocation`属性`http://apache.org/xml/properties/schema/external-schemaLocation`，它就可以工作。但是对于命名空间，我完全不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:32:36.963

我已经解决了。架构应该像这样开始：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://some/namespace/identifier"
    xmlns="http://some/namespace/identifier"
    elementFormDefault="qualified"> 
```

根开始标签是这样定义的：

```
<rootElement xmlns="http://some/namespace/identifier"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://some/namespace/identifier whatever.xsd"> 
```

最后我更新了我的代码：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
SchemaFactory scf = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
URL schemaUrl = getClass().getResource(SCHEMAFILE);

dbf.setNamespaceAware(true);
dbf.setSchema(schema);

DocumentBuilder builder = dbf.newDocumentBuilder();
builder.setErrorHandler(errHandler);
Document doc = builder.parse(input); 
```

# mysql - 根据每小时 groupby 从统计表中计算唯一用户

> ID：11012086
> 
> 赞同：1
> 
> 时间：2012-06-13T09:36:04.783
> 
> 标签：mysql

我们的 Facebook 应用程序有一个统计数据库。我们的输出之一是基于时间范围的唯一 Facebook 用户。如果我们的客户选择每日使用情况，我们会向他们展示每小时唯一 Facebook 用户的图表。

我的问题是独特的价值观。首先，这是表中的相关列：

```
timestamp---facebookID---actionID---producerID 
```

我目前的查询是：

```
SELECT HOUR(timestamp) as Hour, COUNT(DISTINCT facebookID) as Events 
FROM `e4s_analytic_data` 
WHERE actionID = 'ax' AND producerID = '2' AND timestamp BETWEEN'12-06-11 0:00:00' and '12-06-11 23:59:59'
GROUP BY HOUR(timestamp) 
```

`facebookID`这为每小时提供唯一访问者（基于）。但是如果`id = 123`在 14 年访问过，然后在 17 年再次访问过，他将被计算两次——第一次在 14 年，然后在 17 年。

为了解决这个问题，我尝试添加一个内部查询，该查询将提供早前表中已经存在的所有 id。

我想将表中已经列出的所有 facebookID 从 0（一天的开始）到当前时间（从外部的每一行获取`SELECT`）并将它们从外部删除`SELECT`。这样每个`COUNT`人都只会包含新的 Facebook ID。这是我尝试过的：

```
SELECT HOUR(timestamp) as Hour, COUNT(DISTINCT facebookID) as Events 
FROM `e4s_analytic_data` 
WHERE actionID = 'ax' AND producerID = '2' AND timestamp between '12-06-11 0:00:00' and '12-06-11 23:59:59' 
AND facebookID NOT IN
    ( SELECT facebookID FROM `e4s_analytic_data`
      WHERE actionID = 'ax' AND producerID = '2' AND    
      HOUR(timestamp) >= 0 AND HOUR(timestamp) < Hour
    )
GROUP BY HOUR(timestamp) 
```

但它给了我这个错误：

```
Unknown column 'Hour' in 'where clause' 
```

我该如何解决这个问题？谢谢。

**编辑：样本数据：**

```
timestamp--------------facebookID--------producerID-------actionID
2012-06-13 12:38:55  ******6513406        2               ax
2012-06-13 08:49:55  ******6513406        2               ax 
```

该查询在 8 时返回 1 个唯一访问者，在 12 时返回 1 个唯一访问者。我只想在 8 时返回 1 个唯一访问者，因为在 12 时它是来自 8 的同一访问者。

# java - 比较两个屏幕截图不能正常工作-java

> ID：11012087
> 
> 赞同：2
> 
> 时间：2012-06-13T09:36:06.280
> 
> 标签：java, image, compare, screenshot

我正在尝试制作两张相差 6 秒的屏幕截图，看看网站上是否有一些变化。

但是我的代码告诉我，屏幕截图总是不同的，即使我在屏幕上没有任何变化的情况下测试它。

我究竟做错了什么？

```
Toolkit toolkit = Toolkit.getDefaultToolkit();
Dimension screensize = toolkit.getScreenSize();
Rectangle rectangle = new Rectangle(0,0,screensize.width,screensize.height);

Robot robot = new Robot();
BufferedImage image1 = robot.createScreenCapture(rectangle); 
System.out.println("screenshot "+i+"");
Thread.sleep(6000);
BufferedImage image2 = robot.createScreenCapture(rectangle);
System.out.println("screenshot "+(i+10)+"");

int x1 = image1.getWidth();
    int x2 = image2.getWidth();
    if ( x1 != x2 ) {
        System.out.println( "Widths are different: " + x1 + " != " + x2 );
        return;
    }

    int y1 = image1.getHeight();
    int y2 = image2.getHeight();
    if ( y1 != y2 ) {
        System.out.println( "Heights are different: " + y1 + " != " + y2 );
        return;
    }

    for ( int x = 0; x < x1; x++ ) {
        for ( int y = 0; y < y1; y++ ){
            int p1 = image1.getRGB( x, y );
            int p2 = image2.getRGB( x, y );
            if ( p1 != p2 ) {
                System.out.println("Pixel is different at x/y " + x + "/" + y + ": " + p1 + " != " + p2 );
                return;
            }
        }
    }

    System.out.println( "Images are identical" ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:50:45.253

我尝试了您的代码，但由于 Eclipse 控制台中的光标闪烁，我的像素有所不同。

然后我遇到了动画图标的问题（任务栏中的进程资源管理器）

最后它说图像相同。

注意：鼠标不是事物的一部分：

> 创建包含从屏幕读取的像素的图像。此图像不包括鼠标光标。

# database - 如何预填充 sqlite 数据库？

> ID：11012091
> 
> 赞同：1
> 
> 时间：2012-06-13T09:36:11.263
> 
> 标签：database, sqlite

我需要用随机数据（字母、数字和@）预先填充 SQLite 数据库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:37:49.677

您可以使用[`INSERT`语句](http://www.sqlite.org/lang_insert.html)来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:17:14.630

SQLite 包含一个[random() 函数](http://www.sqlite.org/lang_corefunc.html)。

您可以使用它来生成要插入的记录。

例如 ：

```
insert into sampleTable (colint, colchar) values (RANDOM(), CAST(RANDOM() AS TEXT)) 
```

在实际情况下，您可能还应该将它与`min`and结合起来`max`，以便产生符合您需要的值。

# iphone - 自动释放和属性

> ID：11012092
> 
> 赞同：0
> 
> 时间：2012-06-13T09:36:12.627
> 
> 标签：iphone, objective-c, ios, properties

关于以下课程，我有几个问题要问

```
#import <Cocoa/Cocoa.h>

@interface SomeObject {
    NSString *title;
}

@property (retain) NSString *title;

@end

   implementation SomeObject

    @synthesize title;

    -(id)init {
        if (self=[super init])
        {
            self.title=[NSString stringWithFormat:@"allyouneed"];
        }

        return self;
    }

-(void)testMethod{
self.title=[[NSString alloc] init] ;
}

    -(void)dealloc {
        self.title=nil;

        [super dealloc];
    } 
```

1.  在 .h 文件中添加属性时是否需要声明标题和子项。添加@property (retain) NSString *title 是否不够？线。

2.我需要在init和testMethod中自动释放对标题的分配吗？如果那为什么？

有人可以向我解释这些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:48:54.230

1-您不需要在标题中声明 iVar。你也可以使用

```
@synthesize myVar = _myVar; 
```

如果您想使用不同的 iVar 名称

2- 声明一个属性“保留”意味着每次为该属性分配一个新对象时，它会自动释放前一个对象并保留新对象。

因此，如果您使用 stringwithFormat 之类的便捷方法，该属性将为您保留该对象。

如果你想使用 alloc-init，对我来说最好的方法是：

```
NSString *str = [NSString alloc] init];
self.title = str;
[str release]; 
```

此外，在 dealloc 中将 nil 分配给属性是正确的，因为该属性将释放它拥有的对象，并且它在 nil 上调用了 retain ，它没有做任何事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:40:48.130

1..h不需要声明title，声明property就够了。

2.在init中使用self.title时，不需要自动释放释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:41:27.323

1.  您不需要添加，因为它是自动完成的（我猜是从 Xcode 4 开始）。

2.  在初始化中-您不需要，因为它已经返回了一个`autoreleased`对象..

`testMethod`因为你正在分配它，所以你需要在哪里..

您总是必须释放您使用创建的任何对象`alloc`，`copy`或者`new`.... AMEN.. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:36:50.123

请注意，在初始化方法和 dealloc 方法中使用访问器方法并不是一个好的做法。请查看这个答案：[为什么我不应该在 init/dealloc 中使用 Objective C 2.0 访问器？](https://stackoverflow.com/questions/192721/why-shouldnt-i-use-objective-c-2-0-accessors-in-init-dealloc)

同样在 Apple 的内存管理指南中：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)

# linux - 内核模块，它将仅转储用户进程的已修改堆页面

> ID：11012094
> 
> 赞同：0
> 
> 时间：2012-06-13T09:36:19.243
> 
> 标签：linux, memory-management, linux-kernel, kernel-module, crash-dumps

内核模块有什么方法**可以跟踪哪些所有页面都写在堆中**，

当用户应用程序写入 malloced 页面时（示例如下 ptr[1] =3）？

**真正的用途是，我正在编写一个内核模块，它将只转储用户进程的修改堆页面**

```
int main()
{
        char *ptr;
        ptr = malloc(10);

        ptr[1] =3;
        return 0;

} 
```

# iphone - 如何为 UIButton 赋予跳跃动画？

> ID：11012097
> 
> 赞同：2
> 
> 时间：2012-06-13T09:36:30.037
> 
> 标签：iphone, animation, uibutton

我想`UIButton`在它的y位置<100时跳转。跳转动画就像每当拖动按钮并到达y位置小于100时它会跳转3次并且它的新位置是随机在屏幕上的。

提前谢谢:-)

# sql - 查询以检查sql server中的重叠范围？

> ID：11012099
> 
> 赞同：7
> 
> 时间：2012-06-13T09:36:36.773
> 
> 标签：sql, sql-server, sql-server-2008

我有我的桌子

```
 From_Range      ToRange
   1                999
   9000             10000
   2000             5000 
```

当我尝试插入范围值 1000 - 3000 时，它应该会失败，因为此新范围内的某些值介于现有范围 2000 - 5000 之间。如何检查输入范围是否在现有范围内？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-13T09:48:40.690

找到重叠的最简单方法是这样的：

```
IF EXISTS (SELECT 1 FROM table WHERE @myValueLo <= ExistingRangeEnd AND @myValueHi >= ExistingRangeStart)
  -- Overlaps
ELSE
  -- Doesn't overlap 
```

如果您将上述条件与下图中的每个条形进行比较，则可以证明这是有效的：

```
Existing range:         |-------------------|
Overlaps:       |-------------|       |------------|
                |----------------------------------|
                           |-------------|
Not overlaps:   |-----|                       |----| 
```

在所有重叠情况下，这两个测试都是正确的：

*   现有范围的*开始日期*总是在新范围的*结束日期之前*
*   现有范围的*结束日期*在新范围的*开始日期之后*

不重叠的那些未通过此测试中的一项或多项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T09:43:50.710

这对我来说很好

```
DECLARE @From Decimal = 2000
DECLARE @TO Decimal =5000

SELECT COUNT(ID)
FROM TABLENAME
WHERE  
(
 (
 @From BETWEEN OPEN_HRS AND (CLOSE_HRS - 1) 
 OR 
 @TO BETWEEN (OPEN_HRS + 1) AND CLOSE_HRS 
 ) 
OR
 (
 OPEN_HRS BETWEEN @From AND (@TO - 1)
 OR 
 CLOSE_HRS BETWEEN (@From + 1) AND @TO
 )
) 
```

# c# - 使用 linq 从 xml 中删除重复元素（具有特定值）

> ID：11012101
> 
> 赞同：0
> 
> 时间：2012-06-13T09:36:48.273
> 
> 标签：c#, xml, linq

如果我有这个 xml

```
<?xml version="1.0" encoding="utf-8"?>
<super>
  <A value="1234">
    <a1 xx="000" yy="dddddd" />
    <a1 xx="111" yy="eeeeee" />
    <a1 xx="222" yy="ffffff"/>
  </A>
</super> 
```

我需要完全删除 a1 元素（具有 xx=222）。为什么使用我的代码不会发生这种情况？我意识到只有将它放置在第一个元素时才会删除它（即，如果我想删除具有 x=000 的 a1 ，它将从第一个元素开始删除它），这是为什么呢？

代码有什么问题？？

```
var employee = from emp in element.Elements("A")
    where (string)emp.Element("a1").Attribute("xx") == "222"
    select emp.Element("a1");

foreach (var empployee_1 in employee)
{
    empployee_1.Remove();
}

element.Save(@"TheLocation"); 
```

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:59:38.893

你可以试试这个，

```
 using System.Linq;
 using System.Xml.Linq;
 using System.Xml.XPath;

 var element = XElement.Parse(@"<?xml version=""1.0"" encoding=""utf-8""?>
                            <super>
                              <A value=""1234"">
                                <a1 xx=""000"" yy=""dddddd"" />
                                <a1 xx=""111"" yy=""eeeeee"" />
                                <a1 xx=""222"" yy=""ffffff""/>
                              </A>
                            </super>");

  // select all the a1's that have xx = 222
  var a1Elements = element.XPathSelectElement("A/a1[@xx='222']"); 

  if (a1Elements != null)
     a1Elements.Remove();

  Console.WriteLine(element); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:21:50.123

试试这个

```
 IEnumerable<XElement> element = from element1 in doc.Elements("A") select element1;            

            foreach (XElement xe in element.Elements())
            {
                if (xe.Attribute("xx").Value == "222")
                    xe.Remove();
            } 
```

# c# - Ajax 更新面板工作非常缓慢

> ID：11012104
> 
> 赞同：0
> 
> 时间：2012-06-13T09:36:56.833
> 
> 标签：c#, asp.net, ajax, updatepanel

我有一个 Ajax 组合框，其中包含一个名为 comboContacts 的联系人列表，并带有“创建新联系人”选项。如果选择了现有联系人，则从数据库中检索联系人的电话号码和电子邮件，并将电话号码插入另一个 Ajax 组合框，并将电子邮件插入文本框。如果选择“创建新联系人”，则会在页面上打开一个带有文本框以及保存和取消按钮的小型注册表单。电话组合和电子邮件文本框以及新的联系表单都位于单独的更新面板中，它们中的每一个的触发器都是 comboContacts 组合框的 SelectedIndexChanged 事件。如果选择“创建新联系人”，则需要很长时间才能做出反应，如果选择现有联系人，则也需要很长时间才能做出反应。多个 updatePanel 对同一事件做出反应是否存在问题？有没有更好和更简单的替代 Ajax updaePanel 而不使用或使用最少的 JavaScript？

# javascript - 如何重用一个jquery函数

> ID：11012107
> 
> 赞同：-2
> 
> 时间：2012-06-13T09:37:14.883
> 
> 标签：javascript, jquery

> **可能重复：**
> [JQuery: $(window).resize() 在加载时不起作用](https://stackoverflow.com/questions/2597152/jquery-window-resize-doesnt-work-on-load)

我有下面的 jQuery 函数。我想用它两次。一次调整窗口大小并再次加载页面，而无需重复自己。我已经尝试了以下可以调整浏览器窗口大小的方法，但是当我尝试在页面加载时再次运行它时，该功能不起作用。

```
 window.onresize = function resize(event) {
    if(window.innerWidth < 620 ){
        $('#secondaryNav').hide();
        $('#search form').prependTo('div.content');
    } else{
        $('#secondaryNav').show();
        $('.content form').appendTo('#search');
    }

}

window.onload =  resize(event); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:38:09.727

```
function resize(event) {
    if(window.innerWidth < 620 ){
        $('#secondaryNav').hide();
        $('#search form').prependTo('div.content');
    } else{
        $('#secondaryNav').show();
        $('.content form').appendTo('#search');
    }

}

window.onresize = resize:

window.onload = resize; 
```

# iphone - UIView 和 UIViewController 的区别

> ID：11012109
> 
> 赞同：1
> 
> 时间：2012-06-13T09:37:32.173
> 
> 标签：iphone

我是 iPhone 开发的新手。我搜索了很多，但无法弄清楚 UIView 和 UIViewController 之间的主要区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:43:20.467

UIView 是我们用来显示我们的东西的对象，这是 MVC 模式的实现，你可以在这里[uiview vs viewcontroller](https://discussions.apple.com/thread/3813430?start=0&tstart=0) 和这里[uivew vs uiview controller看到你的答案](https://stackoverflow.com/questions/1151422/uiview-vs-uiviewcontroller)

# c# - Linq Group by in lambda 表达式

> ID：11012116
> 
> 赞同：0
> 
> 时间：2012-06-13T09:37:52.767
> 
> 标签：c#, linq, lambda

我有`Model`以下列表：

```
 Id                  Name
----------------------------------------------------
    1                   john
    1                   john
    1                   john
    2                   jennifer
    2                   jennifer
    3                   smith 
```

我想将其分组`Model`以显示以下结果

```
 Id                  Name
----------------------------------------------------
    1                   john
    2                   jennifer
    3                   smith 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:41:13.290

如果`Model`实现[`IEquatable<Model>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)，那么它是微不足道的：

```
var noDuplicates = list.Distinct(); 
```

`Model`如果实现该接口没有意义，您可以使用[此重载](http://msdn.microsoft.com/en-us/library/bb338049.aspx)，`Distinct`让您在侧面指定相等标准。的文档[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)有一个关于如何实现的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:45:24.700

```
 ILookup<int, string> lookup =
                list
                .ToLookup(p => p.Id,
                          p => p.Name);

            foreach (IGrouping<int, string> group in lookup)
            {
                Console.WriteLine(group.Key);
                foreach (string name in group)
                    Console.WriteLine("    {0}", name);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:56:07.593

从模型组 v 中的 v 通过 v.id 进入 g 选择 g

# servlets - http 状态 404 servlet 操作不可用

> ID：11012118
> 
> 赞同：0
> 
> 时间：2012-06-13T09:37:52.873
> 
> 标签：servlets, struts, action, http-status-code-404

提交 jsp 文件时出现以下错误：

> HTTP 状态 404 - Servlet 操作不可用类型 状态报告消息 Servlet 操作不可用 描述 请求的资源（Servlet 操作不可用）不可用。

我的应用程序看起来像：

+WebAppl
       +src
            +com.ss.user.actions.authentication
                 +IndexAction.java
      +jsp
            +index.jsp
            +login.jsp
      +web-inf
            +struts-config.xml
            +web-xml
            +etc 其他一些文件

在 index.jsp 文件中，我有一个表单，如下所示：

```
<form method="post" action="<%=request.getContextPath()%> /authentication/Index.do">
<input type="submit" value="PressMe"/>  
</form> 
```

在 struts-confif 中，我定义了以下操作：

```
<action path="/authentication/Index" scope="request" type="com.ss.user.actions.authentication.IndexAction">
            <forward name="success" path="/jsp/login.jsp" />
</action> 
```

索引操作.java

```
public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        return mapping.findForward(SUCCESS);} 
```

我知道错误 404 表示找不到文件，并且给定的路径可能有错误，但我无法弄清楚。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:45:21.040

请检查您的**.xml 文件**，如果有一些语法错误，那么您也会看到此错误。
检查丢失的标签/不完整的标签。

# css - CSS webkit 高度

> ID：11012129
> 
> 赞同：1
> 
> 时间：2012-06-13T09:38:25.557
> 
> 标签：css, webkit

我有一个 div 框的问题，它必须得到一个特定的高度：241px。在所有浏览器中它都显示正确，但在 chrome 和 safari 中它只有 230px 高度

是否有可能，例如，使用 css hack 仅在 webkit 浏览器中修改此框？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T09:44:41.637

通过将 CSS 规则放置在引用 webkit 特定属性的媒体查询中，可以仅在基于 webkit 的浏览器上应用 CSS 规则：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    /* webkit specific CSS */
    div#mydiv { height:241px; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T22:46:15.320

我很好奇您的问题是否源于盒子尺寸设置。

可能是因为这个原因我提供了这个答案，并且因为三十多点指出接受的答案并不能帮助你理解你为什么会遇到这个问题。

对我来说，chrome 不会显示 box-sizing: padding-box 所以我不得不使用最有效的边框框，除了如果我依赖于高度，在它旁边排列的元素不会得到相同的渲染。这是因为在 mozilla 中使用填充框的最终高度将比 chrome 中设置为边框框的元素少两个像素。

解决方案是使元素保持一致。所以我需要使用我的另一个元素（我想要排列的那个）并使其分别使用边框框和填充框。我可以尝试通过使用您的答案来告诉它根据浏览器具有不同的高度，但我认为这不是最好的主意。

```
-webkit-box-sizing: padding-box;
-moz-box-sizing: padding-box;
box-sizing: border-box; 
```

# android - 哪些 Android 版本支持 SPP 类 0x00？

> ID：11012131
> 
> 赞同：1
> 
> 时间：2012-06-13T09:38:36.120
> 
> 标签：android, class, bluetooth, device, spp

我想知道哪些 Android 操作系统版本支持蓝牙 SPP。我知道可以使用某些应用程序（例如“https://play.google.com/store/apps/details?id=info.zornsoftware.bluetoothclasszero&hl=pl”）来解决问题。不过，我想知道 Adnroid 的人是否最终在最近的任何 Android 版本中解决了这个问题。

谢谢你的时间。

问候！乌卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:45:16.223

根据[这个](https://stackoverflow.com/a/4037619/966550)答案，它可用于 Android 2.0 及更高版本。有关更多信息，请阅读[此](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)

# django - 如何在 django 的单个实例中捆绑多个表单

> ID：11012134
> 
> 赞同：1
> 
> 时间：2012-06-13T09:38:49.300
> 
> 标签：django, forms, django-forms

主要问题是是否有任何方法将许多 django 表单捆绑到单个实例中，以明确我需要解释我的问题：

我创建了一堆需要协同工作以显示单个视图的表单类。

```
 from_form = move_forms.WaypointForm(prefix="marker-from", instance=move.from_place)
    to_form = move_forms.WaypointForm(prefix="marker-to", instance=move.to_place)
    #Notice that last two form are of the same class 
    through = ThroughFormset(prefix="through", queryset=move.waypoints_db.all())
    path_form = move_forms.CarMovePathForm(path=move.path)
    date_form = move_forms.MoveForm(instance=move)

    #put all this into context instance and render 
```

所有这些表单基本上都显示/编辑相同的数据库实例 --- 但通过应用程序以不同的配置重用（所以我不能只是手动创建将封装它的类）。

网页中有很多表单很麻烦，例如我必须编写这样的代码：

```
 if transportation_form.is_valid() and from_form.is_valid() and \
    to_form.is_valid() and through.is_valid() and path_form.is_valid(): 
```

我无法将干净的表单属性传递给视图，因为大多数 viev 都以这种方式使用多种表单。

是否有任何明智的方法来捆绑这些表格——或者只是我的设计被破坏了（如果是的话如何修复它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:56:03.800

那这个呢

```
from_form = move_forms.WaypointForm(
    request.POST or None,
    prefix="marker-from",
    instance=move.from_place)
# ... other forms declared the same way

forms = {
    'from_form': from_form,
    'to_form':  to_form,
    # ...
}
if all(f.is_valid() for f in forms.values()):
    # ...
    return redirect('success')
return render(request, 'template.html', {'forms': forms}) 
```

# c# - 从浏览器控制我的应用程序？

> ID：11012140
> 
> 赞同：2
> 
> 时间：2012-06-13T09:39:15.913
> 
> 标签：c#, wpf, wcf

我正在尝试从我的应用程序中获得更多功能。

atm 我在系统上有一个 WPF 应用程序，我想做的是在同一系统上打开一个网站/html 页面，其中包含控件，因此 WPF 应用程序可以理解它需要更改它的值，因为用户在基于网络的版本上进行了更改。

我认为这不是 WCF，因为客户端系统上不会涉及任何服务器。

有人可以指导我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:49:03.880

一件好事是当任何事情发生变化时，底层系统向 WPF 客户端“通知”——否则客户端将不得不频繁轮询以检测变化。

实现此目的的一种可能方法是添加 WCF 服务层，WPF 客户端和网站都使用该服务层与底层系统（例如数据库）进行通信。由于 WCF 支持回调协定，如果通过网站对底层系统进行更改，WCF 服务可以通知 WPF 客户端，因为 WCF 服务会“注意到”。

假设您在后台有一个数据库。WPF 应用程序和网站都可以对数据库进行更改，但如果网站进行更改，则 WPF 应用程序不会收到通知。

通过 WCF 服务路由更改，WCF 服务可以对数据库进行实际更改，然后通知所有连接的 WPF 客户端已进行更改。然后客户端可以获取新数据。

# python - 使用 mechanize python 提交多部分/表单数据？

> ID：11012141
> 
> 赞同：0
> 
> 时间：2012-06-13T09:39:27.513
> 
> 标签：python, post, http-headers, http-post, mechanize

我正在尝试使用 mechanize 发出 multipart/form-data 的 POST 请求，这是我实际发帖时从 firefox live http 标头中看到的样子：

```
http://example.com/new/example

POST /new/example HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://example.com/new/example
Cookie: tmgioct=c32MbAGn1sTuZrH8etPqVNU5; __qca=P0-495598852-1339139301054; __utma=189990958.911848588.1339139302.1339556345.1339561805.32; __utmz=189990958.1339139302.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); logged_in=1; tog_appearance_fieldset=fieldset_open; __utmc=189990958; pfu=42375294; pfp=h2YrFoaTr5LtrVys8PMmKNdyuoeA9FNLakxGzrJK; pfe=1371048319; __utmb=189990958.5.10.1339561805
Content-Type: multipart/form-data; boundary=---------------------------41184676334
Content-Length: 2947
-----------------------------41184676334
Content-Disposition: form-data; name="UPLOAD_IDENTIFIER"

0ad3af1c502c7cb59577b01720ee58ff014810c4
-----------------------------41184676334
Content-Disposition: form-data; name="post[state]"

2
-----------------------------41184676334
blahblahblahblah....

-----------------------------41184676334-- 
```

这是我的代码：

```
browser = mechanize.Browser()

url = "http://example.com/new/example"
header = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0', 
    'Referer': 'http://example.com/new/example',
    'Content-Type': 'multipart/form-data; boundary=---------------------------41184676334'
}

data = "-----------------------------41184676334\rContent-Disposition: form-data; name="UPLOAD_IDENTIFIER"\r\r0ad3af1c502c7cb59577b01720ee58ff014810c4\r-----------------------------41184676334\rContent-Disposition: form-data; name="post[state]"\r\r2\r-----------------------------41184676334\rblahblahblahblah....\r\r-----------------------------41184676334--\r"

req = urllib2.Request(url, data, header)

response = browser.open(req, timeout = 30)
response.close() 
```

我不知道为什么它不起作用。有人知道吗？请帮帮我。

顺便问一下，它与边界有关吗？我在上面的代码中使用随机数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:48:04.893

从[MIME 媒体类型 RFC 2046](https://www.rfc-editor.org/rfc/rfc2046#section-4.1.1)：

> 任何 MIME“文本”子类型的规范形式必须始终将换行符表示为 CRLF 序列。

您的代码仅使用回车符 ('\r')；您还需要添加换行符 ( `\n`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T07:21:22.613

```
browser.form.enctype = "application/x-www-form-urlencoded" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T03:43:26.390

最终使用`requests`模块来完成任务。事实证明，它更加方便和可靠。

您可以查看此页面以获取详细信息：[POST a Multipart-Encoded File](http://docs.python-requests.org/en/master/user/quickstart/#post-a-multipart-encoded-file)

# php - Google Api 获取用户电子邮件地址

> ID：11012142
> 
> 赞同：1
> 
> 时间：2012-06-13T09:39:29.610
> 
> 标签：php, google-analytics, google-api

我正在使用 Google Api PHP 客户端登录用户。我想获取用户电子邮件地址。我有以下代码。

范围：

```
$client->setScopes('https://www.googleapis.com/auth/userinfo.profile'); 
```

代码：

```
$request = new apiHttpRequest("https://www.googleapis.com/oauth2/v2/userinfo?alt=json");
$userinfo = $client->getIo()->authenticatedRequest($request);

$response = $userinfo->getResponseBody();
print "<pre>" . print_r(json_decode($response, true), true) . "</pre>"; 
```

这仅给我以下详细信息

> ```
> Array
> (
>     [id] => 110084312800396764
>     [name] => Harsha M V
>     [given_name] => Harsha M
>     [family_name] => V
>     [picture] => https://lh6.googleusercontent.com/-Xusc8lwgLIQ/AAAAAAAAAAI/AAAAAAAAAAA/sOthy23uJGk/photo.jpg
>     [locale] => en
> ) 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:32:48.643

在数组中设置范围就可以了。

```
$this->client->setScopes(array('https://www.googleapis.com/auth/analytics.readonly', 'https://www.googleapis.com/auth/userinfo.email', 'https://www.googleapis.com/auth/userinfo.profile')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T08:48:25.267

```
https://www.google.com/accounts/AuthSubRequest?next=http://www.example.com/index.php&scope=https://www.googleapis.com/auth/userinfo.email%20https://www.googleapis.com/auth/analytics.readonly&secure=0&session=1 
or
https://www.google.com/accounts/AuthSubRequest?next=http://www.example.com/index.php&scope=email+https://www.googleapis.com/auth/analytics.readonly&secure=0&session=1 
```

以上两个链接都适用于我的 php

# c++-cli - 在 c++/cli 中检查控件是否为按钮

> ID：11012147
> 
> 赞同：3
> 
> 时间：2012-06-13T09:39:48.970
> 
> 标签：c++-cli

如何检查以下代码中的 Control^ 是否为 Button^？

```
System::Void DisableControls(Control ^parent)
{
    for each (Control^ c in parent->Controls)
    {
       if(c== /*Check for Button*/)
       {
         //Do something
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:51:19.690

您可以为此使用[`GetType()`](http://msdn.microsoft.com/en-us/library/system.type.gettype.aspx)和：[`typeid`](http://msdn.microsoft.com/en-us/library/kwd9abya.aspx)

```
if (c->GetType() == Button::typeid) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:34:49.650

您没有指定您使用的是 WinForms 还是 WPF。WinForms 按钮[System.Windows.Forms.Button](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.aspx)没有任何内置子类，但 WPF 按钮[System.Windows.Controls.Button](http://msdn.microsoft.com/en-us/library/system.windows.controls.button.aspx#inheritanceContinued)确实有一些子类，如果您使用的是这些子类之一，如果与 相比，您会错过它`typeid`。

相反，我会进行动态转换（相当于`as`C# 中的关键字），并检查是否为空。

```
Button b = dynamic_cast<Button^>(c);
if(b != nullptr) { ... } 
```

# iphone - iPhone sdk- 在 KALViewController 中保存上次选择的日期

> ID：11012151
> 
> 赞同：0
> 
> 时间：2012-06-13T09:40:02.417
> 
> 标签：iphone, objective-c, ios, ios4

我使用 KALViewcontroller API 在我的 iPhone 应用程序中显示日历。我想保存最后选择的日期，并在日历再次出现时将其显示为“突出显示”。目前它显示今天的日期。

在**KALViewController.m**中，一个函数*-(void)showAndSelectToday*负责显示今天的日期并突出显示今天的图块。

```
 [[self calendarView] selectTodayIfVisible];

//where *calendarView* is
- (KalView*)calendarView 
{ 
    checkDateConf = TRUE; 
    checkDate = FALSE; 
    return (KalView*)self.view; 
} 
```

在**KalView.m 中**

```
 [gridView selectTodayIfVisible]; 
```

//其中gridView是KalGridView gridView;

在**KALGridView.m 中**

*声明*了 selectTodayIfVisible**

 *```
 - (void)selectTodayIfVisible
{
  KalTileView *todayTile = [frontMonthView todaysTileIfVisible];
  if (todayTile)
    self.selectedTile = todayTile;
} 
```

请指导我如何突出显示选定的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:23:34.893

为了检测选择了哪个日期，我这样做了：

在 KalViewController 中查找 didSelectDate（委托方法）并添加通知帖子。

```
#pragma mark KalViewDelegate protocol

    - (void)didSelectDate:(KalDate *)date
    {
  //NSLog(@"DID select DATE:%@",date);
  self.selectedDate = [date NSDate];
  [[NSNotificationCenter defaultCenter] postNotificationName:@"DATA_SELECTED" object:[NSString stringWithFormat:@"%@",date]];
  NSDate *from = [[date NSDate] cc_dateByMovingToBeginningOfDay];
  NSDate *to = [[date NSDate] cc_dateByMovingToEndOfDay];
  [self clearTable];
  [dataSource loadItemsFromDate:from toDate:to];
  [tableView reloadData];
  [tableView flashScrollIndicators];
} 
```

然后在您使用 Kal 的视图控制器中收到此帖子，就像：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(userSelectDate:) name:@"DATA_SELECTED" object:nil]; 
```

调用的方法是：

```
-(void)userSelectDate:(NSNotification*)notification{
    NSLog(@"date selected:%@",[notification object]);
} 
```*

# perl - 使用 Plack 和 Middlewares 时将默认 perl 的 IO 切换为 utf-8 是否正确？

> ID：11012155
> 
> 赞同：6
> 
> 时间：2012-06-13T09:40:15.930
> 
> 标签：perl, utf-8, plack

两个出发点：

*   在他对[*为什么现代 Perl 默认避免使用 UTF-8 的*](https://stackoverflow.com/a/6163129)[回答中？](https://stackoverflow.com/a/6163129)*tchrist 指出了确保在 Perl 中正确处理 Unicode 所需的 52 件事。答案显示了带有一些`use`语句的样板代码。关于使用 Unicode 的一个类似问题是[如何使用现代 perl 和 utf8 默认设置“使用 My::defaults”？](https://stackoverflow.com/questions/6412799/perl-how-to-make-use-mydefaults-with-modern-perl-utf8-defaults)*
**   PSGI[规范](http://p3rl.org/PSGI)在设计上是面向字节的。我有责任对所有内容进行编码/解码，因此对于 Plack 应用程序，正确的方法是对输出进行编码和对输入进行解码，例如：

    ```
    use Encode;
    my $app = sub {
        my $output = encode_utf8( myapp() );
        return [ 200, [ 'Content-Type' =>'text/plain' ], [ $str ] ];
    }; 
    ```* 

 *使用是否正确

```
use uni::perl; # or any similar 
```

在 PSGI 应用程序和/或我的模块中？

[`uni::perl`](http://search.cpan.org/perldoc?uni::perl)将 Perl 的默认 IO 更改为 UTF-8，因此：

```
use open qw(:std :utf8);
binmode(STDIN,   ":utf8");
binmode(STDOUT,  ":utf8");
binmode(STDERR,  ":utf8"); 
```

这样做会破坏 Plack 或其中间件中的某些内容吗？或者是为 Plack 编写应用程序的唯一正确方法，在打开时显式编码/解码，所以没有[`open`pragma](http://perldoc.perl.org/open.html)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:41:21.757

你真的不想在 Plack 上默认设置`STDIN`/`STDOUT`为 UTF-8 模式，因为你不知道它们是否会是二进制数据传输。例如，如果这些文件句柄是 FastCGI 协议连接器，它们将携带编码的二进制结构而不是 UTF-8 文本。因此，它们不能定义编码层，否则这些二进制结构将被破坏或拒绝为无效。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-13T09:10:56.090

在现代 GNU/Linux 系统上，您应该在全局范围内完全切换到 UTF-8。这意味着设置

```
LANG="xx_YY.UTF-8"
PERL_UNICODE=SDAL
PERL5OPT=-Mutf8 
```

在您的`/etc/environment`或`/etc/sysconfig/i18n`或`/etc/default/locale`或您的系统配置文件中。由于[RHEL/Centos 错误](https://bugs.centos.org/view.php?id=6585)，我符号链接`/etc/environment`到`sysconfig/i18n`.

依赖二进制输入的脚本应设置`binmode`为 STDIN/OUT/ERR(?) 或`use open`pragma 或应使用`-C0`选项调用。

问题是某些`DBD`驱动程序有问题，例如[DBD::JDBC](https://rt.cpan.org/Public/Bug/Display.html?id=49517)，您必须手动设置 utf8 标志。

```
use Encode qw/_utf8_on/;
map { _utf8_on $_; } @strings; 
```*

# objective-c - 类似于 Objective-C 中的 Java 注释

> ID：11012156
> 
> 赞同：4
> 
> 时间：2012-06-13T09:40:16.153
> 
> 标签：objective-c, annotations, metadata

我正在Objective c中寻找Java注释（一种使用元数据标记字段或方法的方法）之类的东西，但我找不到任何真正替代此Java功能的东西。

有没有办法在 Objective-C 中实现与 Java 注释相同的结果？

基本上在实际情况下，我试图标记类中我想用序列化器导出的一些字段，我想标记类中必须导出或序列化的所有字段......

还有其他方法可以标记这些字段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:30:12.713

我想你可能正在寻找：**ObjectiveCAnnotate**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-13T18:28:43.467

官方说，Objective-C 中没有类似 java 的注解支持。但是有一个可能的解决方法来实现这个目标。使用格式化的注释作为注释，然后编写一个解析器来解析这些注释注释并将它们保存为一个文件，您可以在运行时从中读取注释。

我已经实现了一个名为 ROAnnotation 的项目，它使用此方法在类/方法/属性中为 Objective-C 提供运行时类似 java 的键值对注释。我认为这就是你所需要的。

[GitHub 上的 ROAnnotation](https://github.com/jibeex/ROAnnotation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:44:03.530

提供有关类（及其实例）的元数据的最常见方法似乎是提供返回信息的类方法。

例如，在您的情况下，具有要序列化的属性名称的数组。

# android - 从 listview 获取数据并检查 if else

> ID：11012158
> 
> 赞同：0
> 
> 时间：2012-06-13T09:40:29.390
> 
> 标签：android, listview, if-statement

在我的应用程序中，我使用的是列表视图。我需要对列表视图中的选定数据执行 if else 检查。为此，我创建了以下代码。当我显示所选值时，它显示正确。但它没有在循环内检查。

```
mainListView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
        String level = (String) (mainListView.getItemAtPosition(myItemInt));
        //  Toast.makeText(Listactivity.this, "" + level, 2000).show(); 

        if(level == "level-1")
        {
            Toast.makeText(Listactivity.this, "" + "selected levelel1", 2000).show();
        }
        else if(level == "level-2")
        {
         Toast.makeText(Listactivity.this, "" + "selected level 2", 2000).show();
        }
        else if(level == "level-3")
        {
         Toast.makeText(Listactivity.this, "" + "selected level3", 2000).show();
        }
        else
        {
         System.out.println("Level s not available");
        }

        }

     });
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:53:33.060

请尝试比较字符串这样做

```
if(level.equalsIgnoreCase("level-1")){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:44:06.210

要比较 String 这样做

```
if(level.equals("level-1")){
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:45:23.350

`Use .equals()`.因为`==`比较`Strings Refrences not Characters of strings.`

使用比较字符串`.equals() when String is object`。当您将字符串声明为字符串文字时，您可以使用比较字符串`==`

```
 if(level.equals("level-1"))
        {
            Toast.makeText(Listactivity.this, "" + "selected levelel1", 2000).show();
        }
        else if(level.equals("level-2"))
        {
         Toast.makeText(Listactivity.this, "" + "selected level 2", 2000).show();
        } 
```

# objective-c - 类别中的核心文本泄漏

> ID：11012160
> 
> 赞同：0
> 
> 时间：2012-06-13T09:40:30.693
> 
> 标签：objective-c, ios, memory-leaks, core-text, objective-c-category

我为 NSAttributedString 找到了一个类别，它们返回包含给定宽度的属性字符串本身的矩形的高度。不幸的是， Instruments 表示其中存在泄漏。你能告诉我它在哪里吗？

```
@interface NSAttributedString (Height)
    - (CGFloat)boundingHeightForWidth:(CGFloat)inWidth;
@end

@implementation NSAttributedString (Height)

- (CGFloat)boundingHeightForWidth:(CGFloat)inWidth
{
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFMutableAttributedStringRef)self); 
    CGSize suggestedSize = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, CFRangeMake(0, 0), NULL, CGSizeMake(inWidth, CGFLOAT_MAX), NULL);
    CFRelease(framesetter);
    return suggestedSize.height ;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:26:42.650

有时静态分析和仪器可以报告泄漏的误报。从您的类别来看，那里似乎不应该有任何泄漏，所以我假设您可以忽略这一点。

# c# - Telerik Radgrid 导出文件名

> ID：11012161
> 
> 赞同：6
> 
> 时间：2012-06-13T09:40:31.333
> 
> 标签：c#, asp.net, telerik, rad-controls

有谁知道如何提供`file name`给导出的文件`Telerik RadGrid`，导出的文件可以是任何格式的pdf，excel或word

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:58:40.690

来源：[网格/MS Excel/MS Word/CSV](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/exporting/defaultcs.aspx)

> 使用 RadGrid.ExportSettings.FileName 属性，一个字符串，指定将创建的文件的名称（不带扩展名）。根据使用的方法自动添加文件扩展名尝试`FileName`在`ItemCommand`事件中设置如下所示。

来自：[何时设置 RadGrid.ExportSettings.FileName](http://www.telerik.com/community/forums/aspnet-ajax/grid/when-to-set-radgrid-exportsettings-filename.aspx)

```
protected void Radgrid1_ItemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName == RadGrid.ExportToPdfCommandName)
    {
        Radgrid1.ExportSettings.FileName = "yourfilename";
    }
    if (e.CommandName == RadGrid.ExportToExcelCommandName)
    {
        Radgrid1.ExportSettings.FileName = "yourfilename";
    }
    if (e.CommandName == RadGrid.ExportToWordCommandName)
    {
        Radgrid1.ExportSettings.FileName = "yourfilename";
    }
} 
```

参考：
[在启用 Ajax 的情况下将 RadGrid 内容导出到 Excel/Word/CSV/PDF](http://www.telerik.com/community/code-library/aspnet-ajax/general/export-radgrid-content-to-excel-word-csv-pdf-with-ajax-enabled.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:47:42.103

`ExportSettings`您可以在网格的属性（而不是）上设置文件名以及其他用于导出的选项`MasterTableView`。例如：

```
myGrid.ExportSettings.FileName = "file";
myGrid.ExportSettings.Excel.Extension = "xls";
myGrid.MasterTableView.ExportToExcel(); 
```

# java - 我们可以将 soundpool id 从一个活动传递到另一个活动吗？

> ID：11012170
> 
> 赞同：1
> 
> 时间：2012-06-13T09:40:58.843
> 
> 标签：java, android, android-intent, soundpool

我是安卓新手。我正在开发一个应用程序，我需要为不同的活动加载许多声音池。我的问题是我们可以在单个活动中加载所有声音池并将该 ID 传递给捆绑包中需要的不同活动吗？（互联网）。

或者有没有其他方法可以做到这一点？

（目标是减少在不同活动中加载相同声音池所需的时间）

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:52:39.713

您可以在您的应用程序中覆盖/实现[Application](http://developer.android.com/reference/android/app/Application.html) 类，您可以在其中加载您的声音池并在您的其他活动中调用[getApplication](http://developer.android.com/reference/android/app/Activity.html#getApplication%28%29)

# c# - 按名称从列表中获取条目

> ID：11012176
> 
> 赞同：2
> 
> 时间：2012-06-13T09:41:03.980
> 
> 标签：c#, forms, linq, list

我有一个表格列表：

```
List<Form> xxx = new List<Form>(); 
```

如何确定它是否包含由某个名称标识的任何表单，例如：

```
xxx.Contains() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:46:09.720

尝试使用 FindAll 功能

```
List<Form> xxx = new List<Form>();
int count = xxx.FindAll(x => x.Name.Equals("YourFormName")).Count(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:43:27.017

```
var result = list.Where(r => r.Name == "YourName").ToList(); 
```

编辑：（根据codeparkle）

由于您正在检查表单列表中是否存在具有名称的表单，因此您可能会获得结果计数并查看它是否大于 0

```
if(result.Count > 0) 
{
//Form found in the list
} 
```

在您的情况下，更好的方法是使用[Enumerable.Any](http://msdn.microsoft.com/en-us/library/bb534972.aspx)

你可以做：

```
if (list.Any(r => r.Name == "YourName"))
    {
    //Form found in the list
    } 
```

请记住，您必须包含`System.Linq;`在您的 using 语句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:44:58.670

你还没有真正展示你在做什么，但这是你应该做的：

使用`Contains`，您只能检查指定的实例是否在列表中。相反，您可以使用该`Enumerable.Any`方法检查任意谓词：

```
using System.Linq;

// ...

xxx.Any(item => item.Name == yourDesiredName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:47:06.680

尝试以下[LINQ 表达式](http://msdn.microsoft.com/en-us/library/bb397906.aspx)：

```
var forms = from form in FormList  
            where form.Name == "A_FORM_NAME"
            select form; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:49:40.277

您可以遍历您的列表并返回第一个`Form.Name`匹配您的搜索词：

```
foreach (Form form in xxx) 
{
    if (form.Name == "Whatever") 
    {
        return form.Name;
    }
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-13T09:47:18.990

为什么你不只是为每个表单放置一个属性来定义另一个表单。

然后您可以为每个表单实例检查此属性

# macos - bash脚本mv命令不起作用

> ID：11012177
> 
> 赞同：0
> 
> 时间：2012-06-13T09:41:07.533
> 
> 标签：macos, bash, mv

我正在尝试编写一个脚本，在登录 OSX Lion 时重命名文件。

到目前为止，这是我的脚本：

```
#!/bin/bash
if [ -f /Users/$1/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin ]; then
    mv ~/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin ~/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin1
    say "Successful"
else
    say "Unsuccessful"
fi 
```

我创建了一个执行脚本的 LoginHook。我知道它在登录时执行，因为计算机在找到“ksadmin”文件时会说话。我知道它找到了“ksadmin”文件，因为计算机显示“成功”。我还手动重命名了文件，注销，重新登录，计算机显示“不成功”。

问题是脚本没有将“ksadmin”重命名为“ksadmin1”。我写的命令正确吗？

任何想法都会很棒。

摩根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:32:49.083

感谢 cdarke、Miquel 和 mVChr 的帮助。问题的解决方法如下：

```
#!/bin/bash
if [ -f /Users/$1/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin ]; then
    mv /Users/$1/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin /Users/$1/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin1
    say "Successful"
else
    say "Unsuccessful"
fi 
```

我用于部署的版本：

```
#!/bin/bash
    if [ -f /Users/$1/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin ]; then
        mv /Users/$1/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin /Users/$1/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/MacOS/ksadmin1
    fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:13:59.610

ksadmin 的权限是什么？如果它对您的登录 ID 是只读的并且 ksadmin1 已经存在，那么您可能需要一个 mv -f。此外，您可能希望将“~”扩展为绝对路径。不确定您的脚本何时执行，但也许 bash 还不能扩展它。

# python - 嵌套（高分）列表的冒泡排序错误 - python

> ID：11012179
> 
> 赞同：0
> 
> 时间：2012-06-13T09:41:09.093
> 
> 标签：python, python-2.7, bubble-sort

对于我的软件专业工作，我必须创建一个程序。综上所述，高分列表在写入文件之前需要进行排序。为此，我使用了冒泡排序，但无法使用内置排序功能。从中读取数据的文本文件存储在嵌套列表中。文本文件如下所示：

```
NameOne
10
NameTwo
15
NameThree
9 
```

这是我有但不起作用的冒泡排序代码：

```
b_not_sorted = True
while b_not_sorted:
    counter = 0
    b_not_sorted = False
    for counter in range(len(highest_scores) - 1):
        if highest_scores[counter] < highest_scores[counter + 1]:
            b_not_sorted = True
            highest_scores[counter], highest_scores[counter+1] = highest_scores[counter+1], highest_scores[counter]
        counter = counter + 1 
```

我需要将分数从高到低排序。任何帮助将不胜感激，您将在我的计划学分中得到适当的认可:)。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:52:58.073

这里有一个提示：

`while`检查您的外循环运行了多少次。它应该运行不止一次，对吗？无论如何，总是会发生什么导致循环退出？

尝试逐行浏览代码并查看每一点发生的情况。

`b_not_sorted = False`外循环末尾的语句导致外循环只执行一次就退出。您需要将该语句移动到代码的另一部分。尝试在您的脑海中更改`b_not_sorted`to的名称：`I_still_need_to_go_through_the_list`

显然在第一行：

```
while I_still_need_to_go_through_the_list: 
```

它应该是 True，因为您根本没有浏览过列表。你不知道它是否有序。

并在该行之后：

```
if highest_scores[counter] < highest_scores[counter + 1]: 
```

当然，我们仍然需要再次通过，因为我们只是对列表进行了更改，并且需要确保不需要进一步的更改。

但是，如果不进行任何更改呢？`I_still_need_to_go_through_the_list`应该是`False`那时。嗯。如果我们把它`I_still_need_to_go_through_the_list = False`放在循环*之前*，`for`那么`False` *除非*我们对列表进行更改，否则这正是我们想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:53:37.667

你在`b_not_sorted = False`第一次迭代之后就在做，但它不应该在那里！该算法在完成排序之前停止。

你应该`b_not_sorted = True`只做`if highest_scores[counter] < highest_scores[counter + 1]`

* * *

此外，交换代码在 Python 中看起来更好。而不是`temp_var`只使用这样做：

```
highest_scores[counter], highest_scores[counter+1] = highest_scores[counter+1], highest_scores[counter] 
```

Python 风格指南建议你不要写`== True`or `== False`in`if`语句。像这样做：

```
while b_not_sorted: 
```

# css - IE9 css 问题，强制使用 float:left / float:right

> ID：11012180
> 
> 赞同：0
> 
> 时间：2012-06-13T09:41:10.180
> 
> 标签：css, internet-explorer-9, css-float

我在使用 IE9 时遇到了一点问题，只是想不通，我在 CSS 中创建了一个带有线性渐变的按钮，它在 Chorme、Firefox 和 Safari 中完美显示，但在 IE9 中却没有

[http://ubizzo.co.uk/img/ie9.png](http://ubizzo.co.uk/img/ie9.png)

[http://ubizzo.co.uk/img/ch-fi-sa.png](http://ubizzo.co.uk/img/ch-fi-sa.png)

第一个图片链接是 IE9，第二个图片链接是所有其他浏览器，我可以让它工作的唯一方法是如果我在 CSS 中添加 float:left 或 float:right ，如下所示，但这显然会搞砸布局，我已经尝试使用 float:none 但这也不起作用，我在一个空白的 html 文件中尝试了这个，只是为了排除任何冲突的 css 但仍然不起作用:-s

```
.purchase {
    margin-top: 5px;
    display: block;
    width: auto;
}

.purchase a {
    margin-top: 10px;
    margin-bottom: 10px;
    padding: 5px 10px;
    cursor: pointer;
    border: none;
    color: #fff;
    line-height: 1em;
    width: auto;
    **float: left;**
    border-image: initial;
    text-align: center;

    border: solid 1px #189199;

    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;

    background: -moz-linear-gradient(top, #19d7e3, #12A4B3);
    background: -webkit-gradient(linear, left top, left bottom, from(#19d7e3), to(#12A4B3));
    background: -moz-linear-gradient(top, #19d7e3, #12A4B3);

    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#19d7e3', endColorstr='#12A4B3');
}

.purchase a:hover {

    background: -moz-linear-gradient(top, #12A4B3, #19d7e3);
    background: -webkit-gradient(linear, left top, left bottom, from(#12A4B3), to(#19d7e3));
    background: -moz-linear-gradient(top, #12A4B3, #19d7e3);

    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#12A4B3', endColorstr='#19d7e3');

    color: #ffffff;
} 
```

感谢您的帮助，亚当。

[http://jsfiddle.net/gdmP8/](http://jsfiddle.net/gdmP8/) - 请注意，该按钮仅在您添加 float:left/right 后才会显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:10:49.767

应用此 css thi 将适用于我在 chrome、Firefox、safari、opera、ie-7、ie-8、ie-9 中签入的所有浏览器

```
background: #12a4b3; /* Old browsers */
background: -moz-linear-gradient(top,  #12a4b3 0%, #19d7e3 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#12a4b3), color-stop(100%,#19d7e3)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #12a4b3 0%,#19d7e3 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #12a4b3 0%,#19d7e3 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #12a4b3 0%,#19d7e3 100%); /* IE10+ */
background: linear-gradient(top,  #12a4b3 0%,#19d7e3 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#12a4b3', endColorstr='#19d7e3',GradientType=0 ); /* IE6-9 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:44:28.967

IE 9 中的浮动问题通常是由于标头错误造成的。检查这个：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

*取自[IE9 Float with Overflow:Hidden and Table Width 100% Not Displaying](https://stackoverflow.com/questions/10305631/ie9-float-with-overflowhidden-and-table-width-100-not-displaying-properly) （不确定是否重复）*

你可能应该使用现在的标准`linear-gradient`（或者至少`-ms-linear-gradient`而`-o-linear-gradient`不是仅仅使用 moz 和 webkit 特定的渐变）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:45:00.953

你在 Opera 中也会遇到同样的问题，你为什么不坚持一个简单的 IE 按钮图像翻转？

# android - 从 NFC 和 Android 开始

> ID：11012186
> 
> 赞同：1
> 
> 时间：2012-06-13T09:41:30.007
> 
> 标签：android, bluetooth, wifi, nfc, android-wireless

我对 NFC 很陌生，但对 Android 很熟悉。我在 StackOverflow、Google 和 Wikipedia 上找到了它的一些定义。我已经下载了用于 NFC 的 Android SDK。经过大量谷歌搜索后，我想到了一些无法解决的问题

*   NFC和其他无线（蓝牙WiFi）有什么区别
*   我有 HTC 手机，在[Wikipedia](https://en.wikipedia.org/wiki/List_of_NFC_enabled_handsets)上，我发现我的手机不支持 NFC。我可以使用 NFC SDK for Android 作为 NFC 手机吗？
*   NFC中有标签的概念，我不明白。
*   NFC 带给我们什么？我的意思是它是编码 API 还是一个库？
*   我可以做些什么来启用我的移动 NFC？

任何从事过 NFC 工作的人。对于初学者来说，理解这些问题非常重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:02:16.223

NFC 是一种非常近距离的无线通信（小于 2 厘米），无法与蓝牙或 WiFi 相比，因为它的速度要差得多——因此它不适合传输大量数据。

要使用 NFC，您的手机需要一个 NFC 芯片，该芯片具有一个微型内部天线，能够接收来自相应标签的 NFC 信号（实际上您的手机甚至可以为这些标签提供能量）。所以标签只是一个没有自己能源资源（至少是被动资源）的微型芯片，可以存储一些数据（通常小于 1kb）。

NFC 用于实现安全的数据传输，例如使用信用卡付款或其他一些用例。

遗憾的是，没有办法只在手机上启用 NFC - 有一些外部 NFC 套件可以通过 USB 工作，但这些套件不受官方支持 - 所以你必须为此购买一部新手机（比如新的 HTC 或三星那些）。

最好的祝愿，蒂姆

# java - 使用 Java-PNS 向 iPhone 发送推送通知时出错？

> ID：11012191
> 
> 赞同：0
> 
> 时间：2012-06-13T09:41:47.723
> 
> 标签：java, iphone, apple-push-notifications, bouncycastle, jce

我正在使用 javaPNS_2.2.jar 文件向 iPhone 设备发送推送通知消息。

我的代码是：

```
PushNotificationPayload payload = PushNotificationPayload.complex();

/* Customize the payload */ 
payload.addAlert("Hello World!");
payload.addCustomDictionary("mykey1", "My Value 1");
payload.addCustomDictionary("mykey2", 2);

/* Push your custom payload */
String keystore = "C:/1.0Eywa_Baba/PushNotificationKey.p12";
String password = "Eywa@12";
boolean production = false;
String devices = "C81DD339-F5C1-529F-BEC4-6C8622BA0BFD";
List<PushedNotification> notifications = Push.payload(payload, 
                                                      keystore, 
                                                      password, 
                                                      production, 
                                                      devices); 
```

但是，我收到错误：

```
log4j:WARN No appenders could be found for logger (javapns.notification.Payload).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main" java.lang.NoClassDefFoundError: org/bouncycastle/jce/provider/BouncyCastleProvider
  at javapns.notification.PushNotificationManager.initializeConnection(PushNotificationManager.java:105)
  at javapns.Push.sendPayload(Push.java:171)
  at javapns.Push.payload(Push.java:149) 
  at com.example.SendMSG.send(SendMSG.java:35)
  at com.example.APNDemo1.main(APNDemo1.java:20)
Caused by: java.lang.ClassNotFoundException: org.bouncycastle.jce.provider.BouncyCastleProvider
  at java.net.URLClassLoader$1.run(Unknown Source)
  at java.net.URLClassLoader$1.run(Unknown Source)
  at java.security.AccessController.doPrivileged(Native Method)
  at java.net.URLClassLoader.findClass(Unknown Source)
  at java.lang.ClassLoader.loadClass(Unknown Source)
  at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
  at java.lang.ClassLoader.loadClass(Unknown Source) 
```

是什么导致了这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T07:09:20.463

在项目的类路径中包含 bcprov-jdk15-140 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:34:31.683

在您的项目中包含 bouncycastle 库。

# javascript - 使用 Javascript 和 Prototype 防止多次提交

> ID：11012192
> 
> 赞同：0
> 
> 时间：2012-06-13T09:41:47.757
> 
> 标签：javascript, html, forms, prototypejs

我尝试通过 Prototype API 使用 Javascript 防止 HTML 表单中的多次提交。这是我用来解决这个问题的片段：

```
function preventMultipleSubmits() {
    this.select('input[type="submit"]').invoke('disable');
    return true;
}

document.observe('dom:loaded', function() {
    var forms = $A(document.getElementsByTagName('form'));
    forms.each(function(form) {
        form.observe('submit', preventMultipleSubmits)
    });
}); 
```

该片段的问题是提交表单不再调用服务器端。我知道 IE 浏览器不太支持 CCS 选择器，但问题也与 Firefox 有关，我想先关注 FF。

环境和工具：

*   火狐13.0
*   原型 1.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:41:37.843

```
this.select('input[type="submit"]').invoke('disable'); 
```

这似乎只是将 disabled 属性添加到`submit`按钮。您仍然可以通过 enter 提交单字段表单。

你可以尝试这样的事情：

```
<script type="text/javascript">
function preventMultipleSubmits(event) {
    if (this.hasClassName('allow-one-time-submit')) {
        this.removeClassName('allow-one-time-submit');
        // don't stop the event
    } else {
        alert('You already submitted');
        event.stop();
    }
}

document.observe('dom:loaded', function() {
    var forms = $A(document.getElementsByTagName('form'));
    forms.each(function(form) {
        // add Class Name to each and every form on load
        form.addClassName('allow-one-time-submit');
        form.observe('submit', preventMultipleSubmits)
    });

});
</script>

<form action="http://www.example.com/path/to/action" class="allow-one-time-submit">
    <input type="text">
    <input type="submit" value="Submit">
</form> 
```

# magento - Magento 按 entity_id 排序

> ID：11012195
> 
> 赞同：3
> 
> 时间：2012-06-13T09:41:50.627
> 
> 标签：magento

有谁知道如何`entity_id`在前端显示为可排序属性？我去管理属性，我不能`entity_id`像它说的那样添加为属性

“属性码‘entity_id’已被系统保留，请尝试其他属性码”

因此，我尝试在 Magento 使用以下 SQL CMD 的整个数据库中进行搜索：

```
select attribute_id from eav_attribute where attribute_code = 'updated_at'; 
```

它返回零结果，我尝试了其他属性并且显示...

有谁知道我如何将其添加`entity_id`为属性，因为我什至无法使其可见，因为即使在整个数据库中搜索该值时我也不知道 attribute_id # 是什么。

这是我用来使属性在 magento 的管理部分可见的代码：

```
UPDATE `catalog_eav_attribute` 
SET `is_visible` = '1' 
WHERE `catalog_eav_attribute`.`attribute_id` = 105; 
```

我已经尝试搜索高低几天，并尝试不同的变化 - 所以停留在这一点上，任何帮助都会很棒。

如果有帮助，我正在使用 Magento Enterprise 12.2，但老实说，数据库与社区版本没有太大区别，唯一的区别是添加的模块，但在产品方面几乎相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:47:29.487

这是令人惊讶的讨厌 - 我无法在数据库中简单地看到这样做的方法，因为 entity_id 不是标准属性（它实际上只是一个关键字段）并且核心代码在三个地方重复相同的逻辑（呃） .

自旧版 Magento 以来，它也发生了很大变化，因此许多关于此的教程和论坛帖子不再适用。

您可以做的是添加“entity_id”作为新的排序选项，类似于“最佳价值”作为排序选项存在的方式。在以下示例中，我将其标记为“最新”

通常的警告适用：您应该在扩展中执行此操作（或至少在 /local/ 覆盖中），但在 Community Edition 1.7 中需要覆盖的三个核心文件方法是：

Mage_Adminhtml_Model_System_Config_Source_Catalog_ListSort

```
public function toOptionArray()
{
    $options = array();
    $options[] = array(//benz001
            'label' => Mage::helper('catalog')->__('Newest'),
            'value' => 'entity_id'
        );  //end benz001       
    $options[] = array(
        'label' => Mage::helper('catalog')->__('Best Value'),
        'value' => 'position'
    );
    foreach ($this->_getCatalogConfig()->getAttributesUsedForSortBy() as $attribute) {
        $options[] = array(
            'label' => Mage::helper('catalog')->__($attribute['frontend_label']),
            'value' => $attribute['attribute_code']
        );
    }
    return $options;
} 
```

然后 Mage_Catalog_Model_Category_Attribute_Source_Sortby

```
 /**
 * Retrieve All options
 *
 * @return array
 */
public function getAllOptions()
{
    if (is_null($this->_options)) {
        $this->_options = array(
        array(//benz001
            'label' => Mage::helper('catalog')->__('Newest'),
            'value' => 'entity_id'
        ),  //end benz001
        array(
            'label' => Mage::helper('catalog')->__('Best Value'),
            'value' => 'position'
        ));
        foreach ($this->_getCatalogConfig()->getAttributesUsedForSortBy() as $attribute) {
            $this->_options[] = array(
                'label' => Mage::helper('catalog')->__($attribute['frontend_label']),
                'value' => $attribute['attribute_code']
            );
        }
    }
    return $this->_options;
} 
```

然后是 Mage_Catalog_Model_Config

```
 public function getAttributeUsedForSortByArray()
{
    $options = array(
        'entity_id' => Mage::helper('catalog')->__('Newest'),   //benz001   
        'position'  => Mage::helper('catalog')->__('Position'),             
    );
    foreach ($this->getAttributesUsedForSortBy() as $attribute) {
        /* @var $attribute Mage_Eav_Model_Entity_Attribute_Abstract */
        $options[$attribute->getAttributeCode()] = $attribute->getStoreLabel();
    }

    return $options;
} 
```

有了这些，刷新缓存并刷新，然后您可以在配置、类别页面和前端选择按 Newest/entity_id 排序。

注意：即使您关闭了缓存，刷新缓存仍然是一个好主意 - 即使禁用了缓存，部分管理员也会被缓存。

# javascript - 如何从谷歌地理编码解析 json (jquery)？

> ID：11012196
> 
> 赞同：3
> 
> 时间：2012-06-13T09:41:55.153
> 
> 标签：javascript, jquery, google-code

我正在尝试使用纬度和经度来获取城市名称。

谷歌地理编码支持此选项并称为“[反向地理编码](https://developers.google.com/maps/documentation/geocoding/?hl=ru#ReverseGeocoding)”。正如示例中所写的那样，我必须对此链接发出获取请求：

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true_or_false 
```

它以 json 格式返回我的数组，你可以试试。

我如何在 jquery 中解析这个 json？

我试图这样做：

```
 $.ajax({
      url: 'http://maps.googleapis.com/maps/api/geocode/json',
      type: 'get',
      data: {
        'latlng':lat+","+longit,
        'sensor': false
      },
      dataType: 'jsonp',
      success: function(result){

        console.log(results)

      },
      error: function(xhr,ajaxOptions,thrownError){
        console.log(xhr.status);
        console.log(ajaxOptions);
        console.log(thrownError);
      }

  }) 
```

我得到了这个数组，但无法解析。它说：

> **Uncaught SyntaxError: Unexpected token :**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:23:39.807

简短的回答；你不能：这里不支持 JSONP（或者至少实际上没有记录为支持），请改用[Geocoder](https://developers.google.com/maps/documentation/javascript/geocoding)类。

谷[歌地理编码 API 说：](https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests)

> 希望在 JavaScript 应用程序中使用此服务？查看 Google Maps API v3 的 Geocoder 类。

似乎谷歌只提供纯 JSON，由于同源策略，您无法在自己的页面中解析 - 但如果您是例如，您可以使用它。在另一个没有该限制的服务器上运行的 php 应用程序。因此，如果您想在网页上使用它，使用他们的 Geocoder 类是可行的方法 - 无论如何它都会为您完成解析工作。

--

当您使用 dataType="jsonp" 时，jQuery 会尝试通过创建 SCRIPT 元素并将 src 属性设置为查询字符串来加载结果。然后浏览器最终得到返回的 json，并尝试解析它，因为它是一个自包含的 javascript 文件——这就是失败的原因。

问题是 JSON 不是有效的纯独立 javascript：例如，返回的 JSON 字符串：

```
{ "results" : [ { "address_components" : [ 
```

...无法解析 - 这就是导致错误的原因。另一方面，如果是的话，

```
var foo = { "results" : [ { "address_components" : [ 
```

或者

```
callback({ "results" : [ { "address_components" : [ ...  } ) 
```

*那么*它将是有效的javascript。后者是jsonp实际依赖返回的。

底线是您正在取回有效的 JSON，但由于相同的源策略，您不能直接通过 XmlHttpRequest 访问它；并且因为它不是 JSONP 的函数，所以你不能通过 JSONP 依赖的 SCRIPT 后门来使用它来解决相同的起源问题。在网页上使用它的唯一选择是使用 Google 为您提供的类 - 因为它们也来自 Google 站点，所以它们*可以*访问 JSON 并成功解析它 - 并将处理后的结果返回给您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:43:16.413

尝试`dataType: jsonp,`代替`dataType: jsomp,`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:06:44.287

尝试在 ajax 设置中添加以下内容：

```
 contentType: "application/json; charset=utf-8"; 
```

**编辑 ：**

这是我在萤火虫中看到的：

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "285",
               "short_name" : "285",
               "types" : [ "street_number" ]
            },
            {
               "long_name" : "Bedford Ave",
               "short_name" : "Bedford Ave",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Williamsburg",
               "short_name" : "Williamsburg",
               "types" : [ "neighborhood", "political" ]
            },
            {
               "long_name" : "Brooklyn",
               "short_name" : "Brooklyn",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "New York",
               "short_name" : "New York",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Kings",
               "short_name" : "Kings",
               "types" : [ "administrative_area_level_2", "political" ]
            },

            .
            .
            . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:13:39.187

问题似乎是 ajax 请求没有返回任何内容。大概一个空字符串不是有效的 JSON？

编辑：现在它是！我第一次尝试下面的“小提琴”时，Firebug 报告了对请求的空响应！

# java - 将谷歌Chrome浏览器集成到eclipse中

> ID：11012202
> 
> 赞同：9
> 
> 时间：2012-06-13T09:42:33.603
> 
> 标签：java, eclipse, swt

我正在尝试使用 SWT 浏览器创建应用程序。是否可以将 Google Chrome 作为浏览器集成到 Eclipse 中（而不是作为外部网络浏览器）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:07:51.260

不，从当前稳定版本的 google chrome 开始，您不能在 SWT 中使用它。原因是 google chrome（本质上是 chromium）不支持 ActiveX（如 IE、Firefox、Safari 等），但基于[NPAPI](http://en.wikipedia.org/wiki/NPAPI)。（**注意：**我正在考虑您正在使用 Windows 机器，因为您在问题中没有提到！）

但是有些项目正在尝试制作可嵌入的铬版本。请参阅以下链接：

1.  [铬嵌入](http://code.google.com/p/chromiumembedded/)
2.  [谷歌浏览器可以嵌入吗？](https://stackoverflow.com/questions/2162173/is-google-chrome-embeddable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T15:20:31.170

错误 405031 - [浏览器] 实现 Chromium 支持

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=405031](https://bugs.eclipse.org/bugs/show_bug.cgi?id=405031)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T05:42:36.710

您可以通过 Eclipse UI 进行设置。

转到：窗口 > 首选项 > 常规 > Web 浏览器

选择“使用外部浏览器”单选按钮

单击“新建”按钮添加新的浏览器，例如。铬合金 ！

单击应用 + 确定

......你有它的工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:50:42.170

如果您无法通过 UI，请尝试编辑以下文件中的设置。

```
YOUR-WORKSPACE\.metadata\.plugins\org.eclipse.core.runtime\.settings
```

将有一个名为`org.eclipse.ui.browser.prefs`使用任何文本编辑器打开它并更改适当值的文件，它是自我描述的，您可以轻松找出要更改的内容和所有内容。在修改之前有一个相同的备份。

希望这对您有所帮助。

编辑：重新启动您的 Eclipse 以实现上述更改。

# css - 我需要一个 div 坐在另一个 div 的角落， OVER 另一个 div

> ID：11012205
> 
> 赞同：2
> 
> 时间：2012-06-13T09:42:47.257
> 
> 标签：css, html, positioning

**HTML**

```
<body onload="MM_preloadImages('images/enterroll.gif')">
<div id="wrapper">
<div id="enterlogo"><img src="images/entrylogo.gif" width="600" height="600" alt="enterlogo" /></div>
<div id="enter"><a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('enter','','images/enterroll.gif',1)"><img src="images/enter.gif" alt="enter" name="enter" width="300" height="300" border="0" id="enter2" /></a></div>
</div>
</body> 
```

**CSS**

```
body {
    background-color: #CCC;
}
#wrapper {
    height: 750px;
    width: 750px;
}
#enterlogo {
    height: 600px;
    width: 600px;
    margin-top: 10%;
    margin-left: auto;
    margin-right: auto;
}
#enter {
    height: 300px;
    width: 300px;
} 
```

所以我真正需要做的就是让输入 div 位于包装器 div 的右下角。

为此，我需要它覆盖 enterlogo div！我查看了很多关于 z-index 和 float right 定位方法的帖子，但它们似乎都达不到要求。

任何帮助都将不胜感激，我打电话给朋友，他说将 enterlogo div 中的图像作为背景并将其他图像放入该 div 可能会有所帮助.. 我看不出它是如何工作的！

*PS翻转图像将是一个链接，它将成为页面上唯一的div片段。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:45:32.187

使用`position: absolute`，像这样：

```
#wrapper {
    position: relative;
}
#enter {
    position: absolute;
    right: 0;
    bottom: 0;
} 
```

这是一个演示：http: [//jsfiddle.net/thirtydot/Nd2jQ/](http://jsfiddle.net/thirtydot/Nd2jQ/)

以下是有关其工作原理的更多信息：http: [//css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:02:07.890

我相信您过度使用`javascript`了..您应该只使用 CSS 来满足您的所有要求（*并在此过程中简化您的`html`*..

```
<body>
    <div id="wrapper">
        <div id="enterlogo"></div>
        <a href="#" id="enter"></a>
    </div>
</body> 
```

和

```
body {
    background-color: #CCC;
}
#wrapper {
    height: 750px;
    width: 750px;
    position:relative;
}
#enterlogo {
    height: 600px;
    width: 600px;
    margin-top: 10%;
    margin-left: auto;
    margin-right: auto;
    background: url('images/entrylogo.gif') top left no-repeat;
}
#enter {
    display:block;
    height: 300px;
    width: 300px;
    background: url('images/enter.gif') top left no-repeat;
    position:absolute;
    bottom:0;
    right:0;
}
#enter:hover {
    background-image: url('images/enterroll.gif');
} 
```

**演示在** [http://jsfiddle.net/gaby/WL96s/](http://jsfiddle.net/gaby/WL96s/)

# objective-c - 这个里面有白色加号的蓝色圆圈是从哪里来的？

> ID：11012206
> 
> 赞同：-1
> 
> 时间：2012-06-13T09:42:48.717
> 
> 标签：objective-c

有谁知道这个带有白色加号的蓝色圆圈来自哪里？它存在于许多苹果应用程序中。在界面生成器中找不到。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:54:01.217

使用它来获取添加符号

```
UIButton *myButton1 = [UIButton buttonWithType:UIButtonTypeContactAdd]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:44:44.303

我相信你说的`UIButton`是`UIButtonTypeContactAdd`风格。

# math - 缩放和滚动后 HitArea 的偏移量

> ID：11012213
> 
> 赞同：1
> 
> 时间：2012-06-13T09:43:20.313
> 
> 标签：math, android-layout

缩放和滚动后 getHitRect 的偏移量是多少。可以计算缩放后点击区域的偏移量 - (event.getX() / ZoomLayout.mScaleFactor + ZoomLayout.mClipBound.left) 但是我还没有计算出缩放和滚动后点击区域的偏移量。

```
public class ZoomLayout extends RelativeLayout implements OnDoubleTapListener, OnGestureListener{

//ScalingFactor i.e. Amount of Zoom
static float mScaleFactor = 1.0f;

// Maximum and Minimum Zoom
private static float MIN_ZOOM = 1.0f;
private static float MAX_ZOOM = 2.0f;

//Different Operation to be used 
    private final int NONE_OPERATION=0;
    private final int DRAG_OPERATION=1;
    private final int ZOOM_OPERATION=2;
    private float mWidth= 1280;
    private float mHeight=800; 

// Mode to select the operation
    private int mode;

//Track X and Y coordinate of the finger when it first touches the screen
    private float mInitialX = 0f;
    private float mInitialY = 0f;

// Track the Bound of the Image after zoom to calculate the offset  
static Rect mClipBound;

// mDetector to detect the scaleGesture for the pinch Zoom  
private ScaleGestureDetector mDetector;

// mDoubleTapDetector to detect the double tap 
private GestureDetector mDoubleTapDetector;

//Pivot point for Scaling
static float gx=0,gy=0;

boolean mdrag=false,mZoom=false;

public ZoomLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        setWillNotDraw(false);
        mClipBound = new Rect();
        // Intialize ScaleGestureDetector
        mDetector = new ScaleGestureDetector(getContext(), new ZoomListener());
        mDoubleTapDetector = new GestureDetector(context,this);
        mDoubleTapDetector.setOnDoubleTapListener(this);
    }

    public ZoomLayout(Context context) {
        super(context);
        setWillNotDraw(false);
        mClipBound = new Rect();
        // Intialize ScaleGestureDetector
        mDetector = new ScaleGestureDetector(getContext(), new ZoomListener());
        mDoubleTapDetector = new GestureDetector(context,this);
        mDoubleTapDetector.setOnDoubleTapListener(this);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        // Handles all type of motion-events possible
        switch(event.getAction() ) {

        case MotionEvent.ACTION_DOWN:
            // Event occurs when the first finger is pressed on the Screen

            Log.d("ZoomPrint", "Event: Action_Down " );
            mInitialX = event.getX();
            mInitialY = event.getY();

        break;
        case MotionEvent.ACTION_POINTER_DOWN:
            //Event occurs when the second finger is pressed down

            Log.d("ZoomPrint", "Event: Action_Pointer_Down " );
            // If second finger is pressed on the screen with the first set the Mode to Zoom operation
            mode=ZOOM_OPERATION;

            break;  
        case MotionEvent.ACTION_POINTER_UP:
            Log.d("ZoomPrint", "Event: Action_Pointer_UP " );
            mdrag=true;

        case MotionEvent.ACTION_UP: 
            //Event occurs when all the finger are taken of the screen
            Log.d("ZoomPrint", "Event: Action_UP " );
            //If all the fingers are taken up there will be no operation 
            mode = NONE_OPERATION;
            mdrag=false;

            break;  

        }
        // give the event to the mDetector to get the scaling Factor
            mDetector.onTouchEvent(event);

        // give the event to the mDoubleTapDetector for the doubleTap 
            mDoubleTapDetector.onTouchEvent(event);

        if(!mdrag)
            invalidate();

    return true;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        onTouchEvent(ev);
        return super.onInterceptTouchEvent(ev);
    //  return true;
    }

    @Override
    public ViewParent invalidateChildInParent(int[] location, Rect dirty) {
        return super.invalidateChildInParent(location, dirty);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b)
    {
        int count = getChildCount();
        for(int i=0;i<count;i++){
            View child = getChildAt(i); 
            if(child.getVisibility()!=GONE){
                RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)child.getLayoutParams();
                child.layout(
                    (int)(params.leftMargin ), 
                    (int)(params.topMargin ), 
                    (int)((params.leftMargin + child.getMeasuredWidth()) ), 
                    (int)((params.topMargin + child.getMeasuredHeight())) 
                    );
            }
        }
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {

        //Save the canvas to set the scaling factor returned from detector
        canvas.save(Canvas.MATRIX_SAVE_FLAG);

        canvas.scale(mScaleFactor, mScaleFactor,gx,gy);     

        super.dispatchDraw(canvas);

        mClipBound = canvas.getClipBounds();

          canvas.restore();
    }

    private class ZoomListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {

            @Override
            public boolean onScale(ScaleGestureDetector detector) {
                // getting the scaleFactor from the detector
                mScaleFactor *= detector.getScaleFactor();              // gives the scaling factor from the previous scaling to the current
            //  Log.d("ZoomPrint", "detector scaling Factor" + mScaleFactor);

                gx = detector.getFocusX();
                gy = detector.getFocusY();
                // Limit the scale factor in the MIN and MAX bound
                mScaleFactor= Math.max(Math.min(mScaleFactor, MAX_ZOOM),MIN_ZOOM);
            //  Log.d("ZoomPrint", "Bounded scaling Factor" + mScaleFactor);

                /*//Force canvas to redraw itself only if the one event is to happen (say Zooming only ) else do not invalidate here for multi operations
                   As what we de for scrolling or panning will not reflect here. So we will add this in onDraw method 
                invalidate();*/
                 // Here we are only zooming so invalidate has to be done
            //  invalidate();
             //  requestLayout();

                // we have handle the onScale 
                return true;
            }

        }

        @Override
        public boolean onDoubleTap(MotionEvent e) {

        // Make the mScaleFactor to its normal value
            if(mScaleFactor>1.0f)
            {
                    mScaleFactor=1.0f;
            }
        // Force the canvas to redraw itself again as the changes has been occured.
        invalidate();
        requestLayout();
            return false;
        }

        @Override
        public boolean onDoubleTapEvent(MotionEvent e) {
        //  Log.d("ZoomPrint", "OnDoubleTapEvent");
            return false;
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
        //  Log.d("ZoomPrint", "OnSingleTap");
            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2,
                float velocityX, float velocityY) {
            return false;
        }

        @Override
        public void onLongPress(MotionEvent e) {

        }

     @Override
            public boolean onScroll(MotionEvent e1, MotionEvent e2,
                    float distanceX, float distanceY) {

                    int distX= (int) distanceX, distY =(int) distanceY;

        //Log.d("Print"," X " + this.mClipBound.left +" Y " + this.mClipBound.right + " b "+ this.mClipBound.bottom + " g" + this.mClipBound.top) ;

        Log.d("Print", "Scroll X " + distanceX + " Y " + distanceY);    

                if(this.mClipBound.left<=0)
                    this.scrollTo(-280, 0);
                else if(this.mClipBound.top<=0)
                    this.scrollTo(0, -250);
                    else if (this.mClipBound.right>=1047)
                        this.scrollTo(280, 0);
                    else if (this.mClipBound.bottom>=800)
                        this.scrollTo(0, 250);
                    else
                    this.scrollBy((int)distanceX,(int)distanceY);

                    return true;

            }

        @Override
        public void onShowPress(MotionEvent e) {

        }

        @Override
        public boolean onSingleTapUp(MotionEvent e) {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:46:30.807

您需要在滚动功能期间翻译画布。我在我的代码中以这种方式完成了它：

```
canvas.translate(getScrollX(), getScrollY()); 
```

getScrollX 和 Y 是滚动量。

# mysql - MySQL: Selecting all the rows which are related with a particular value from another row

> ID：11012218
> 
> 赞同：1
> 
> 时间：2012-06-13T09:43:32.273
> 
> 标签：mysql

I have the following mysql table. I have been trying to select all the rows which are related with the row that has `B` as value in the `code` column. The relation is based on the value of the column `trans_id`

```
id   trans_id  code  amount   side
1      1         A    200     left
2      1         B    200     right
3      2         J    100     right
4      2         C    100     right
5      2         B    200     left
6      3         A    630     right
7      3         K    630     left 
```

My Expected Result:

```
 id   trans_id  code  amount   side
  1      1         A    200     left
  3      2         J    100     right
  4      2         C    100     right 
```

Could you please tell me what should be the mysql query to achieve this?

Thanks :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:09:25.617

The following query should return the results you want. This uses a select query to return results to the WHERE clause.

```
SELECT * FROM yourTable 
WHERE trans_id IN (
    SELECT trans_id FROM yourTable WHERE code='B'
) 
AND code!='B' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:56:37.177

Your question is unclear, but as far as I understand, you could use a self join like this:

```
select a.id, 
       a.trans_id, 
       a.code, 
       a.amount, 
       a.side 
    from table as a
    inner join table as b on (a.id=b.trans_id and b.code='B'); 
```

This will return the row with table.id=2:

```
id   trans_id  code  amount   side
2      1         B    200     right 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:08:06.810

```
select 
    t1.* 
from 
    table_name t1 
        inner join table_name t2 on t1.trans_id = t2.trans_id 
where 
    t2.code = 'B' and 
    t2.code <> t1.code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:48:10.417

If I'm understanding your problem correctly then a subquery would get you what you need.

```
SELECT * FROM yourTable WHERE id IN (SELECT trans_id FROM yourTable WHERE code='B') 
```

# file-upload - Yii框架，上传文件不起作用

> ID：11012219
> 
> 赞同：2
> 
> 时间：2012-06-13T09:43:33.173
> 
> 标签：file-upload, yii

我有一个表格，我想上传一个文件。这是我的代码：

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
   'id'=>'show-form',
   'enableAjaxValidation'=>false,
       'htmlOptions' => array('enctype' => 'multipart/form-data'),

)); ?>

<fieldset>
    <legend>DATI TECNICI</legend>

        <div class="row">
           <?php echo $form->labelEx($model,'tec_data_file'); ?>
           <?php echo $form->fileField($model,'tec_data_file',array('size'=>45,'maxlength'=>45)); ?>
           <?php echo $form->error($model,'tec_data_file'); ?>
        </div>
</fieldset>
<?php $this->endWidget(); ?>

</div><!-- form --> 
```

提交后数据库中没有添加任何内容，我用 firebug 进行了一些调试，发现`filefield`生成的代码如下：

```
<input id="ytShow_tec_data_file" type="hidden" name="Show[tec_data_file]" value="">
<input id="Show_tec_data_file" type="file" name="Show[tec_data_file]" maxlength="45" size="45"> 
```

并且两个数据由`$_POST`for发送`tec_data_file`（这是我在 db 中的文件字段）。第一个 var 是空的（我认为它与第一个隐藏输入有关）。第二个包含我的文件。当我将变量分配给我的模型以进行保存时：

```
$modelPhoto->attributes = $_POST['Photo']; 
```

得到`tec_data_file`一个空字符串！所以没有任何东西上传到我的数据库。任何人都知道如何解决这个问题？如果你需要更多我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:01:46.023

你需要类似的东西：

```
$model = new Photo;
$model->attributes = $_POST['Photo'];
$model->image = CUploadedFile::getInstance($model,'file'); 
```

`file`字段名称在哪里。

我没有测试过这个，它来自文档。

# iphone - 自动化 Localizable.strings？

> ID：11012223
> 
> 赞同：1
> 
> 时间：2012-06-13T09:43:40.873
> 
> 标签：iphone, ios, localization, internationalization, automation

所以，在我的项目中，我有 10 种语言和 10 个 Localizable.strings 文件。我刚刚创建了 Localizable.strings 文件，每种语言的文件。现在它们包含 "key" = "value" 对，并且键和值都是英语（默认语言）。

我的语言都已翻译并保留在 Excel 文件中。

问题是，与手动复制每个单词或为此编写脚本相比，如何才能更快地将所有语言插入这些文件中？也许已经有一个现有的工具来解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T12:39:14.077

我找到了一种从 Excel 文档中组合 localizable.strings 文件的简单方法。

在 Excel 文档中，我在特定列中插入“”=“”符号。通过从角落向下拖动 Excel 单元格，可以轻松地完成所有单词，以便将内容从该单元格复制到您将其拖动到的所有单元格中。（抱歉解释混乱）

因此，该文档包含与 localizable.strings 相同的符号和单词。我只是将所有内容复制到文本文件，删除标签，将扩展名更改为 .strings。（遗憾的是没有保存评论）。

编辑：您可以将 Excel 中的内容复制到 Sublime Text，然后查找和替换选项卡（如果有）。将生成的内容复制到正确的 Xcode .string 文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:34:37.767

[Localization Suite](http://www.loc-suite.org/)是一款通过自动化和简化本地化过程真正为您节省大量时间的应用程序。我不知道他们是否支持从 excel 导入（以节省您传输字符串对的时间），但它是免费的，似乎是一个完整的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-02T10:46:40.380

我有一个用于在 iOS 和 Android 中执行这些任务的内部脚本，我刚刚将它作为 Gem 开源。您可以在这里查看它：http: [//github.com/mrmans0n/localio](http://github.com/mrmans0n/localio)

它还可以根据要求从 Google Drive 和本地 Excel 文件中打开电子表格。

你只需要安装 gem

```
gem install localio 
```

**并在您的项目目录中有一个名为Locfile**的自定义 DSL 文件，其中包含引用您的项目和本地化文件的信息。在您的情况下，使用 Excel 文件的示例可能很简单：

```
platform :ios
source :xls, :path => 'YourExcelFileGoesInHere.xls'
output_path 'Resources/Localizables/' 
```

.xls 文件应该具有某种格式，这可能与您现在拥有的非常相似。你只需要克隆这个内容并用你的翻译填充它：[https ://docs.google.com/spreadsheet/ccc?key=0AmX_w4-5HkOgdFFoZ19iSUlRSERnQTJ4NVZiblo2UXc](https://docs.google.com/spreadsheet/ccc?key=0AmX_w4-5HkOgdFFoZ19iSUlRSERnQTJ4NVZiblo2UXc)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-28T10:16:40.670

以下是我遵循的步骤：

1.  在 Windows 上将 .strings 的扩展名更改为 .txt
2.  打开excel并转到文件>打开
3.  选择要打开的文件。这应该会出现一个导入向导
4.  按照步骤并将分隔字符指定为 =

你完成了

# java - 你能解释一下所谓的 Java 标准计算哈希码的方法吗？

> ID：11012224
> 
> 赞同：1
> 
> 时间：2012-06-13T09:43:45.273
> 
> 标签：java, math, hashcode

我最近必须重写 Java 中的`equals`and`hashCode`方法。因此，我寻找一种快速有效的方法来计算哈希码。

Java 开发人员似乎同意以下方法：

```
 int hash = 23;
    hash = hash * 37 + paramOne;
    hash = hash * 37 + paramTwo;
    // And so on... 
```

这可能是简单的算术，但我真的不明白。有什么保证？什么是极端情况？有没有更好（相当简单）的方法来做到这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:50:05.063

`hashCode()` [用 Joshua Bloch 的话来说（解释类中方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode%28%29)的默认实现`String`，即 : `s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]`）：

> 选择值 31 是因为它是一个奇数素数。如果它是偶数并且乘法溢出，则信息将丢失，因为乘以 2 相当于移位。使用素数的优势不太明显，但它是传统的。31 的一个很好的特性是乘法可以用移位和减法代替以获得更好的性能：31 * i == (i << 5) - i。现代虚拟机自动进行这种优化。

如需进一步阅读，请参阅[this](https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier)和[this](https://stackoverflow.com/questions/1835976/what-is-a-sensible-prime-for-hashcode-calculation)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:47:27.763

这是关于主要因素的。看看[这个答案](https://stackoverflow.com/a/3613382/25141)。

如果您只是在寻找一种快速且实用的方法，并且您对性能没有重大顾虑，请查看 Apache Commons Lang [HashCodeBuilder](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html)或类似的库函数。有一个[等效的构建](http://commons.apache.org/lang/api/org/apache/commons/lang3/builder/EqualsBuilder.html)器`equals`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:46:58.523

Joshua Bloch 在他的“Effective Java”的第 3 章中告诉您如何正确地覆盖 equals 和 hashCode。谷歌它并阅读它。

他是集合 API 的编写者，*现在*是 Google 的首席 Java 架构师。这对我来说已经足够权威了。

# java - 'java.lang.ClassCastException：资源不能转换为 java.lang.Comparable'

> ID：11012226
> 
> 赞同：4
> 
> 时间：2012-06-13T09:43:51.480
> 
> 标签：java, exception

我有一个有两个端口的连接器。两个端口有一个共同的根为`Resource`. 我正在尝试为这两个端口找到共同的根。

我需要一组用于一个端口（p1）的元素，可以通过`getParent`方法找到。对于另一个端口（p2），我需要检查集合中是否存在 p2 的任何元素。虽然我需要这个方法来返回一个 type 的对象`Resource`，但我在这一点上有点卡住了。我收到以下错误。

> 加载时出现意外问题：'java.lang.ClassCastException: policy.vddl.model.Resource cannot be cast to java.lang.Comparable' java.lang.ClassCastException: vddl.model.Resource cannot be cast to java.lang.Comparable at java.util.TreeMap.compare(Unknown Source) at java.util.TreeMap.put(Unknown Source) at java.util.TreeSet.add(Unknown Source) at vddl.product.Product.findCommonRoot(Product.java:357)

```
private Element findCommonRoot(Connector connector)
{

    List<Port> portList = getListOfPort(connector);
    Port p1 = portList.get(0);
    Set<Element> portElementSet = new TreeSet<Element>();

    Element pathElement = p1.getParent();
    while (pathElement != null)
    {
        portElementSet.add(pathElement);
        pathElement = pathElement.getParent();
    }

    Port p2 = portList.get(1);
    Element pathElement2 = p2.getParent();

    for(Element e: portElementSet)
    {
        if(portElementSet.contains(pathElement2))
            pathElement2 = e;
    }

    return pathElement2;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:45:24.023

`TreeSet`对元素进行排序`Comparable`，因此您需要确保您的 Element 实现`Comparable`

如果您无权访问源代码，则可以在构造函数中`Element`传递`Comparator`[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#TreeSet%28java.util.Comparator%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T09:48:10.113

如果不需要对元素进行排序，`HashSet`请改用。未排序，不需要元素可比较。`TreeSet``HashSet`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:45:44.910

`TreeSet`是一个排序集。`object`您添加的任何内容`TreeSet`都应实现`Comparable`接口。有关树集上的添加方法，请参阅[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#add%28E%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:46:45.517

你`Element`必须实现`Comparable`接口。

# javascript - 聚类标记，如果它在一个聚类中

> ID：11012231
> 
> 赞同：1
> 
> 时间：2012-06-13T09:44:09.387
> 
> 标签：javascript, google-maps, markerclusterer

我有一个用于聚类标记的谷歌地图代码，我想检查标记是否在聚类中。我使用库 MarkerClustererPlus v3。

```
<script type="text/javascript">
    function initialize() {
        var markers = [];
        var mlen = 5;
        for(i = 0; i < mlen; i++) {
            var r1 = (Math.random()*180-90);
            var r2 = (Math.random()*180-90);
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(r1,r2),
                title:"Marker: " + (i+1)
            });
            markers.push(marker);
        }
        var map = new google.maps.Map(document.getElementById("map_canvas"),
        {
            zoom : 1,
            center : new google.maps.LatLng(0,0),
            scaleControl : true,
            mapTypeControl : true,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        });
        for(i = 0; i < mlen; i++) {
            markers[i].setMap(map);
        }
        markerClusterer = new MarkerClusterer(map, markers, {
            zoomOnClick : false,
            maxZoom : 22,
            gridSize : 130
        });
        for(i = 0; i < markers.length; i++) {
                    //how to check if marker is in a cluster or not????
            alert(markers[i].isInCluster);//true or false
                    //or how to define a isInCluster(marker)
        }
    } 
```

和 html 代码

```
<body onload="initialize()" onunload="GUnload()">
    <div id="map_canvas" style="width: 500px; height: 300px"></div>
</body> 
```

有人有什么想法吗？它也可以在屏幕外标记。

感谢提示：初学者

# .net - 如何使用 XmlnsDefinitionAttribute 的 AssemblyName 属性

> ID：11012242
> 
> 赞同：0
> 
> 时间：2012-06-13T09:44:55.103
> 
> 标签：.net, xaml

我正在尝试从另一个程序集引用 XAML 中的程序集 A。A 是在 .NET v2 中构建的，因此它不能在内部应用 XmlnsDefinitionAttribute。而不是通过使用在 XAML 中引用程序集

```
<UserControl xmlns:a="clr-namespace:Namespace.In.A;assembly=A" /> 
```

一直以来，我都想使用[XmlnsDefinitionAttribute](http://msdn.microsoft.com/en-us/library/system.windows.markup.xmlnsdefinitionattribute.aspx "XmlnsDefinitionAttribute")的 AssemblyName 属性，例如

```
<Assembly: XmlnsDefinitionAttribute("http://schema/a", _
                "Namespace.In.A", _
                AssemblyName:="A")> 
```

这似乎不起作用，因为在 A 中定义的类的任何 XAML 实例都会在编译时导致错误“类型引用找不到名为...的公共类型”。我找不到 XmlnsDefinitionAttribute 的 AssemblyName 属性的文档或示例。有谁知道如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:25:55.883

我相信`XmlnsDefinitionAttribute`必须在相关大会中定义。因此，您的 XmlnsDefinitionAttribute 必须在程序集 A 中。您可以将其放在 AssemblyInfo.cs 文件中。

# iphone - iPhone 应用程序：仅在小视图中播放视频

> ID：11012246
> 
> 赞同：0
> 
> 时间：2012-06-13T09:45:00.417
> 
> 标签：iphone, ios5, video, uiwebview, mpmovieplayercontroller

在我的 iPhone 应用程序中，我想在一个小视图中播放视频。

视频应自动开始播放，播放暂停和全屏按钮应隐藏。

![在此处输入图像描述](../Images/317c5bdbc8730804f034cbf2a5122580.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:50:07.303

您要做的是手动设置`MPMoviePlayerController`视图的框架，并将控件样式设置为`MPMovieControlStyleNone`. 很像下面这个..

```
....
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:url]];
[player setControlStyle:MPMovieControlStyleNone];

//this is where you create your `embedded` view size
player.view.frame = CGRectMake(0, 0, 200, 300);

[self.view addSubview:player.view];
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:07:29.283

```
 MPMoviePlayerController *player = [[MPMoviePlayerController alloc] init];
[player prepareToPlay];
player.shouldAutoplay = NO;
player.allowsAirPlay = YES;
player.scalingMode = MPMovieScalingModeAspectFit;
[player.view setFrame:CGRectMake(0,0,300,320)];
[viewPlayer addSubview:player.view];

    self.moviePlayer = player;//declare MPMoviePlayerController class object globaly for play and push the vedio if you want to add this functionality 
```

希望，这对你有帮助.... :)

# c++ - C++ 图像处理

> ID：11012248
> 
> 赞同：5
> 
> 时间：2012-06-13T09:45:01.580
> 
> 标签：c++, image

所以我为游戏制作了这个程序，需要帮助让它更自动化一些。

该程序接收图像，然后显示它。我正在OpenGL中的纹理上执行此操作。当我截取游戏截图时，它通常是 700x400 左右。我将高度和宽度输入到我的程序中，通过添加空白将图像调整为 1024x1024（使其成为 POT 纹理以获得更好的兼容性）（原始图像保持在左上角并一直到 (700,400) 和rest 只是空白；有人知道这个术语吗？）然后将其加载到我的程序中并调整角，因此只显示从 (0,0) 到 (700,400) 的部分。

这就是我处理图像显示的方式。现在，我想让这个自动化。所以我会拍一张 700x400 的图片，将它传递给程序，该程序将获取图像的宽度和高度（700x400），通过添加空白将其调整为 1024x1024，然后加载它。

那么有人知道能够做到这一点的 C++ 库吗？不过，我仍然会手动截取屏幕截图。

我正在使用 Simple OpenGL Image Library (SOIL) 加载图片 (.bmp) 并将其转换为纹理。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:58:28.430

您实际上不必通过添加空格来正确显示图像来调整大小。事实上，这样做的效率非常低，尤其是因为您以 .bmp 格式存储图像。

SOIL 能够在加载纹理时自动添加空白空间——也许只是尝试按原样加载文件，而不做任何操作。

**来自土壤文档：**

> 可以自动将图像重新缩放到下一个最大的二次方大小
> 
> 可以为 GUI 元素或闪屏加载矩形纹理（需要 GL_ARB/EXT/NV_texture_rectangle）

无论如何，您不必使用纹理在屏幕上显示像素。我假设您没有使用着色器进行渲染 - 如果它全部通过固定管道，则有[`glDrawPixels`](http://www.opengl.org/sdk/docs/man/xhtml/glDrawPixels.xml)功能，这将更简单。只要记住将您的 SOIL 调用更改为 `SOIL_load_image`.

# ios - 使用 iOS 的故事板呈现登录

> ID：11012250
> 
> 赞同：1
> 
> 时间：2012-06-13T09:45:15.183
> 
> 标签：ios, login, storyboard

我有一个简单的 iOS 主从应用程序 - > 在 iPad 上它是一个拆分视图，在 iPhone 上它是一个简单的带有导航的表格视图

现在我需要先登录，但我找不到合适的解决方案。

我认为应用程序中唯一应该决定是否需要显示登录的部分是 AppDelegate。但是我将如何连接我的故事板才能在 iPhone 和 iPad 上都做到这一点？

另一个想法是从登录开始并在不再需要时将其关闭。但我也无法在 iPad 上推送或模态显示拆分视图......

你将如何解决这个问题？没有故事板很容易……但对我来说，有了故事板似乎很难……但我不得不承认，到目前为止我还没有任何故事板经验……

感谢您的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T10:04:21.717

[http://maybelost.com/2011/12/tutorial-storyboard-app-with-core-data/](http://maybelost.com/2011/12/tutorial-storyboard-app-with-core-data/)

下载此示例应用程序。它包含一个使用 CoreData 的登录。它非常简单:)

几周前，我也将它用于我的第一次登录，它就像魅力一样。

希望对你也有帮助！

# java - 用单反斜杠替换双反斜杠

> ID：11012253
> 
> 赞同：8
> 
> 时间：2012-06-13T09:45:17.990
> 
> 标签：java, string, character-encoding, replace, backslash

我有一个字符串“\\u003c”，它属于 UTF-8 字符集。由于存在双反斜杠，我无法将其解码为 un​​icode。我如何从“\\u003c”中得到“\\u003c”？我正在使用java。

我试过了，

```
myString.replace("\\\\", "\\"); 
```

但无法实现我想要的。

这是我的代码，

```
String myString = FileUtils.readFileToString(file);
String a = myString.replace("\\\\", "\\");
byte[] utf8 = a.getBytes();

// Convert from UTF-8 to Unicode
a = new String(utf8, "UTF-8");
System.out.println("Converted string is:"+a); 
```

文件的内容是

> \u003c

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-19T02:28:19.467

您可以使用[`String#replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String str = "\\\\u003c";
str= str.replaceAll("\\\\\\\\", "\\\\");
System.out.println(str); 
```

它看起来很奇怪，因为第一个参数是一个定义正则表达式的字符串，并且在字符串文字*和*`\`正则表达式中都是一个特殊字符。要真正将 a放入我们的搜索字符串中，我们需要在文字中对它 ( ) 进行转义。但要真正将 a放入*正则表达式*中，我们还必须在正则表达式级别对其进行*转义*。因此，要从字面上输入一个字符串，我们需要写入字符串字面量；为了让正则表达式引擎得到两个字面量，我们也需要对它们进行转义，所以我们最终得到. 那是：*`\``\\``\`**`\\``\\\\``\\``\\\\\\\\`***

 ***```
字符串文字字符串含义到正则表达式
－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－ −−−−−−−−−−−−−−−−
\ 转义下一个字符 取决于下一个字符
\\ \ 转义下一个字符
\\\\ \\ 字面量 \
\\\\\\\\ \\\\ 字面意思 \\

```

在替换参数中，即使它不是正则表达式，它仍然会特别处理`\`和`$`- 因此我们也必须在替换中转义它们。因此，要在替换中获得一个反斜杠，我们需要在该字符串文字中添加四个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T15:41:34.220

不确定您是否仍在寻找问题的解决方案（因为您有一个已接受的答案），但我仍会将我的答案添加为**所述问题**的可能解决方案：

```
String str = "\\u003c";
Matcher m = Pattern.compile("(?i)\\\\u([\\da-f]{4})").matcher(str);
if (m.find()) {
    String a = String.valueOf((char) Integer.parseInt(m.group(1), 16));
    System.out.printf("Unicode String is: [%s]%n", a);
} 
```

### 输出：

```
Unicode String is: [<] 
```

[**`Here is online demo of the above code`**](http://ideone.com/Chm3H)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-26T15:57:02.570

关于“用单反斜杠替换双反斜杠”或更一般地，“用`\`不同的简单字符串替换包含 的简单字符串`\`”的问题（这不完全是 OP 问题，而是其中的一部分）：

该线程中的大多数答案都提到`replaceAll`，这是此处工作的错误工具。更简单的工具是`replace`，但令人困惑的是，OP 声明`replace("\\\\", "\\")`对他不起作用，这也许就是所有答案都集中在`replaceAll`.

***给有 JavaScript 背景的人的重要提示***： *请注意，[`replace(CharSequence, CharSequence)`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence))在 Java 中确实替换了所有出现的子字符串 - 与 JavaScript 不同，它只替换第一个！*

> 用指定的文字替换序列替换此字符串中与文字目标序列匹配的每个子字符串。

另一方面，[`replaceAll(String regex, String replacement)`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))更多文档[也在这里](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceAll(java.lang.String))- 将这两个参数视为比常规字符串更多：

> 请注意，替换字符串中的反斜杠 () 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同。

（这是因为`\`并且`$`可以用作对捕获的正则表达式组的反向引用，因此如果您想按字面意思使用它们，则需要转义它们）。

换句话说， 和 的第一个和第二个参数的`replace`行为`replaceAll`不同。因为`replace`您需要`\`在两个参数中加倍（字符串文字中反斜杠的标准转义），而在 中`replaceAll`，您需要将其加倍！（标准字符串转义 + 函数特定转义）

**综上所述，对于简单的替换，一个应该坚持`replace("\\\\", "\\")`（它只需要一个转义，而不是两个）。**

[https://ideone.com/ANeMpw](https://ideone.com/ANeMpw)

```
System.out.println("a\\\\b\\\\c");                                 // "a\\b\\c"
System.out.println("a\\\\b\\\\c".replaceAll("\\\\\\\\", "\\\\"));  // "a\b\c"
//System.out.println("a\\\\b\\\\c".replaceAll("\\\\\\\\", "\\"));  // runtime error
System.out.println("a\\\\b\\\\c".replace("\\\\", "\\"));           // "a\b\c" 
```

[https://www.ideone.com/Fj4RCO](https://www.ideone.com/Fj4RCO)

```
String str = "\\\\u003c";
System.out.println(str);                                // "\\u003c"
System.out.println(str.replaceAll("\\\\\\\\", "\\\\")); // "\u003c"
System.out.println(str.replace("\\\\", "\\"));          // "\u003c" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-22T23:31:30.283

另一种选择，捕获两个斜线之一并将两个斜线替换为捕获的组：

```
public static void main(String args[])
{
    String str = "C:\\\\";
    str= str.replaceAll("(\\\\)\\\\", "$1");

    System.out.println(str);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-13T06:18:13.213

尝试使用，

> myString.replaceAll("[\\\\]{2}", "\\\\");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T09:55:01.240

这是用于将双反斜杠替换为单反斜杠

```
public static void main(String args[])
{
      String str = "\\u003c";
      str= str.replaceAll("\\\\", "\\\\");

      System.out.println(str);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T10:26:56.973

`"\\u003c"`根本不“属于 UTF-8 字符集”。它是*五个*UTF-8 字符：' `\`'、'0'、'0'、'3' 和 'c'。这里真正的问题是为什么那里有双反斜杠？或者，*他们*真的存在吗？您的问题可能完全不同吗？如果字符串`"\\u003c"`在您的源代码中，则在运行时根本没有双反斜杠，无论您的问题是什么，它都不涉及在存在双反斜杠的情况下进行解码。***

# android - ExpandableListViewFragment

> ID：11012260
> 
> 赞同：1
> 
> 时间：2012-06-13T09:45:27.843
> 
> 标签：android, android-listview

我正在开发一个应用程序，其中两个片段在一个活动中。

一个是`ExpandableListViewFragment`，另一个是对应的布局片段。

第一个片段将显示`expandableListItem`单击任何组或子项的任何项目。然后与该项目 ( ) 对应的布局`expandableListItem`将在其他片段中膨胀。我做了这些使用`ListView`但不是在`ExpandableListView`.

请帮助我。提前致谢。

PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:58:15.067

我想你需要的只是：

ExpandableListView，一个扩展 BaseExpandableListAdapter 的适配器，以及 groupView 和子视图的相应布局。

扩展 BaseExpandableListAdapter 会迫使您实现一些方法，但是一旦您考虑它们，它并不是很难理解。

诀窍都在适配器内部。您可以为父级和子级扩展布局。看看我的例子：

这样，您的父视图会随着父布局而膨胀，而子视图也会随着它们的相应布局而膨胀。希望能帮助到你。

```
public class ExpadableAdapter extends BaseExpandableListAdapter {
Activity context;

List<Movie> listObjects;

private static LayoutInflater inflaterParent = null;
private static LayoutInflater inflaterChild = null;

private ImageLoader imageLoader; 
//on the constructor pass on the list of objects
public ExpadableAdapter(Activity context, List<Object> listObjects) {
    context = context;
    this.listObjects = listObjects; 
    inflaterParent = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflaterChild = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public Object getChild(int groupPosition, int childPosition) {
    //in this case I fetch the children on a DB, you can as well have a two dimensions array at first
    List<Day> parentChildren = DBUtils.getObjectChildren(context, listObjects.get(groupPosition).getId());
    return parentChildren.get(childPosition);
}

public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
}

public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {

    Object object = listObjects.get(groupPosition);
    //the first inflation for children views
    View vi = convertView;
    if(convertView==null)
        vi = inflaterChild.inflate(R.layout.child_layout, null);

    List<Day> listChildren = DBUtils.getChildren(context, listObjects.get(groupPosition).getId());

    TextView textView = (TextView) vi.findViewById(R.id.child_layout_textview);
    return vi;
}

public int getChildrenCount(int groupPosition) {
    return listObjects.get(groupPosition).getCount();
}

public Object getGroup(int groupPosition) {
    return listObjects.get(groupPosition);
}

public int getGroupCount() {
    return listObjects.size();
}

public long getGroupId(int groupPosition) {
    return groupPosition;
}

public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    View vi=convertView;
    //the parent inflater.
    if(convertView==null)
        vi = inflaterParent.inflate(R.layout.parent_layout, null);

    TextView textView=(TextView)vi.findViewById(R.id.parent_layout_text_view);;
    textView.setText(listObjects.get(groupPosition).getName());

    return vi;
}

public boolean hasStableIds() {
    return true;
}

public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
}
} 
```

# java - 如何在 Hibernate 中映射一个合格的关联？

> ID：11012264
> 
> 赞同：1
> 
> 时间：2012-06-13T09:45:41.713
> 
> 标签：java, hibernate, dictionary, hibernate-mapping

我试图映射这三个类：

```
@Entity
class Photo {
...
@ManyToOne
private Map<User, Coordinate> labelledIn;
...
}

@Entity
class User {
...
@OneToMany (mappedBy ="labelledIn") 
private Set<Photo> labelledPhotos;
...
}

@Embedded 
class Coordinate { ... } 
```

我收到了这个错误：

```
Caused by: org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.redex.model.Photo.labelledIn references an unknown entity: java.util.Map 
```

我可以在我的数据库中映射这个合格的关联吗？如果我不能，我该如何以不同的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:52:14.417

采用

```
@OneToMany
private Map<User, Coordinate> labelledIn; 
```

相反`@ManyToOne`。正如@JB Nizet 所说，与集合建立多对一关系是没有意义的。

有关更多详细信息，请查看此处：[2.2.5.3.4。索引集合（列表、地图）](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-association-collections-overview)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:50:48.997

这种关系只能引用其他 JPA 实体。如果你想要`one user -> many photos`and `one photo -> one user`，你必须尝试这样的事情：

```
class User {
    @OneToMany
    private Set<Photo> photos;
}

class Photo {
    @ManyToOne
    private User user;
} 
```

# android - 浏览器上的 android 后退键不会启动以前的活动

> ID：11012273
> 
> 赞同：1
> 
> 时间：2012-06-13T09:46:30.563
> 
> 标签：android, browser, android-activity, android-intent

我期待在我目前正在开发的一个小应用程序中出现相当奇怪的行为。

该应用程序包含两个活动。从第一个活动开始，我通过一个意图启动 webbbrowser。当我在浏览器中按下返回键时，即使我在启动之前手动关闭了应用程序，它也会返回到 SECOND 活动。

**1) 第一个活动**

```
final Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(mWebShopURL));
startActivity(intent); 
```

**第一个活动像这样启动第二个活动**

```
Intent intent = new Intent(getApplicationContext(), SecondActivity.class);
Bundle b = new Bundle();
b.putString("product", mProduct);
intent.putExtras(b);
startActivity(intent); 
```

**2）第二个活动->第一个活动**

```
onBackPressed(); 
```

**AndroidManifest**

```
 <activity
        android:name=".FirstActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity
        android:name=".SecondActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:58:47.147

如果我是正确的你`onBackPressed()`在你的第二个活动中覆盖。不要这样做将`onBackPressed()`代码放在评论中并尝试。希望它会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:27:44.367

如果您希望第二个活动完成并在用户点击您在评论中提到的简单“后退按钮”时消失，那么不要调用`onBackPressed()`. 请打电话`finish()`。这将使第二个活动消失并将用户返回到第一个活动。

您的问题是您从未从堆栈中删除第二个活动，这就是从浏览器返回显示该活动的原因。

# caching - IIS 7 输出缓存 - 识别缓存的文件列表

> ID：11012275
> 
> 赞同：1
> 
> 时间：2012-06-13T09:46:35.073
> 
> 标签：caching, iis-7, outputcache, performancecounter

我们可以在 IIS7 中获取输出缓存 URL 的列表吗？

我试图弄清楚它在我们的服务器中的使用效率如何。

请参阅显示性能计数器的附加屏幕截图。![性能计数器](../Images/0c50e6948fc2cd5e7fd274d5afcc15ac.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T18:33:13.587

不确定它是否是您正在寻找的但正在运行

```
netsh http show cachestate 
```

将在缓存对象的内核模式下向您显示当前缓存了哪些对象

# git - git svn fetch 不更新最近创建的分支

> ID：11012280
> 
> 赞同：3
> 
> 时间：2012-06-13T09:46:57.297
> 
> 标签：git, git-svn

我最近刚刚在我们的 subversion 存储库中创建了一个分支。由于某种原因，运行 git-svn 看不到分支。我能想到的唯一一件事是主干在分支后面，因为自创建分支以来，主干上没有任何提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:40:14.587

您可以尝试使用 SmartGit 打开您的存储库并尝试从中获取。它是 git-svn 兼容的，但基于另一个引擎，所以可能没有这个错误（如果它是一个错误）。

如果它没有帮助，则更有可能是您的项目配置/布局有问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T10:18:11.227

如果你的 svn repo 的布局是这样的，

```
  https://server/repo/trunk
  https://server/repo/branch1
  https://server/repo/branch2

```

然后将这些添加到您的 .git/config 中，

```
[svn远程“svn”]
    网址 = https://svn/repo
    fetch = trunk:refs/remotes/trunk
[svn远程“分支1”]
    网址 = https://svn/repo
    fetch = branch1:refs/remotes/branch1
[svn远程“分支2”]
    网址 = https://svn/repo
    fetch = branch2:refs/remotes/branch2

```

```
% git svn 获取 svn
% git svn 获取分支1
% git svn 获取分支2

```

# java - Java 中的正则表达式，它会发现 `I` 的出现，除非 `ARTICLE I` 出现

> ID：11012291
> 
> 赞同：0
> 
> 时间：2012-06-13T09:47:32.540
> 
> 标签：java, regex

我想要一个正则表达式，它会`I`从字符串中找到

但不管`I`什么时候`ARTICLE I`来或`ARTICLE III`来

我做了正则表达式，但它计算出现时`ARTICLE I`出现

```
(?:(^I[ ]|[ ]I[, ]|[ ]I$|(!ARTICLE[ ]I+$))) 
```

除此之外，它在所有情况下都能很好地工作，即使`ARTICLE III`是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:56:46.277

您可以使用[负面的lookbehind](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html) :（`(?<!ARTICLE )(\bI+\b)`不确定您到底想捕捉什么，但这应该可以帮助您入门。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:57:57.380

我猜后面的`ARTICLE`标记是罗马数字。所以这是我的解决方案：

```
String s = "KSLJFI ARTICLE III SPIOEWF ARTICLE I ASDKJHJK OSDIF ARTICLE IV SKDJFHJSOIFPOEIF";
String temp = s.replaceAll("ARTICLE\\s+\\b[IVXLCDM]+\\b", ""); 
```

您可以匹配`I`临时字符串中的任何内容，而不必担心它会匹配`I`in`ARTICLE`或`I`in 罗马数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:58:20.550

```
public static void main(String args[]) {
    String s="ARTICLE II";
    String[] ss=s.split("(\\s+)I+");

    for(int i=0;i<ss.length;i++) {
        System.out.println(ss[i]);
    }
} 
```

# c++ - 我应该将 MinGW 用于 C++/CMake 项目以最小化 MS 的 DLL 的依赖关系吗？

> ID：11012292
> 
> 赞同：1
> 
> 时间：2012-06-13T09:47:33.280
> 
> 标签：c++, mingw

当我使用 Visual Studio 时，我的可执行文件依赖于 microsoft redistributable package - 部署 MS 运行时 DLL 的包。这对我来说很烦人。如果我使用 MinGW，我的可执行文件会有什么缺点？

我还想尝试与由 MinGW 构建的 lib-avcodec/avformat 链接，我没有自己的思维能力从 src 在 VS 中构建它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:51:41.867

如果使用 MinGW，您将依赖于 mingw 附带的 DLL。将一个供应商更改为另一个供应商并不是什么大问题。

如果您已经有 MS 项目，请查看静态链接 MS 库的可能性（在项目选项中为某些 VisualStudio 项目提供了有关创建时间的选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:22:20.163

您可以使用 MinGW 静态链接所有内容。使用`-static`链接器标志。

不需要重新分发任何 DLL，但您必须确保在 c++ 中，没有异常通过 DLL 边界传递（因此在这种情况下，请确保每个 C++ 库都是静态链接的）。

# asp.net - 如何在 Telerik RadGrid 的 AsyncPostback 中注册PostbackControl

> ID：11012293
> 
> 赞同：0
> 
> 时间：2012-06-13T09:47:36.400
> 
> 标签：asp.net, vb.net, telerik

我在一个页面中有一个 RadGrid，该页面有一个母版页，其中包含一个围绕内容的 UpdatePanel。

我已经成功地在第一次加载时为其上的导出按钮运行了 RegisterPostbackControl，因此：

```
Private Sub uxGrid_ItemCreated(ByVal sender As Object, 
                               ByVal e As GridItemEventArgs)
    If TypeOf e.Item Is GridCommandItem Then
        Dim sc As ScriptManager = CType(Master.FindControl("Sc"), ScriptManager)
        RegisterPostBackControl(e.Item.FindControl("ExportToCSVButton"))
    End If
End Sub 
```

这可行，如果我按下导出按钮，它会执行完整的回发并导出文件。

我在该页面上有另一个控件（日期控件），它更改了网格的内容，并且异步回发。

问题是，一旦我完成了一次异步回发，我就无法再次注册控件，并且导出按钮不再触发完整的回发。我已经尝试将 RegisterPostback 放在我能想到的许多不同的地方——RenderComplete、Init、Load、PreRender 等，但似乎无济于事。一旦它处于异步回发中，我就无法注册它。

我尝试过的其他一些代码：

```
For Each cmdItem As GridCommandItem In 
                  uxResponse.MasterTableView.GetItems(GridItemType.CommandItem)
    sc.RegisterPostBackControl(cmdItem.FindControl("ExportToCSVButton")) 
```

我知道我可以完全关闭异步回发，但我更愿意拥有响应能力，这是唯一被破坏的东西。

有没有其他人遇到过这个问题并对其进行了排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:08:54.740

我通过绕过问题对其进行了排序：我修改了 aspx 页面，使其上始终有一个导出按钮（不是动态创建的），将其注册为回发，并使用 CSS 将新按钮放在与旧按钮相同的位置.

不是特别好，但它可以作为一个杂物。

如果没有人知道更好的方法，我会在一段时间内将其标记为答案。

# svn - STS 中的 SVN 选项 - 现有的 Maven 项目

> ID：11012296
> 
> 赞同：0
> 
> 时间：2012-06-13T09:47:40.153
> 
> 标签：svn, maven, subclipse, sts-springsourcetoolsuite

我是 STS 和 SVN 的新手。在我的工作站中，我将 SVN 签出文件夹中的源代码（Maven 项目）。我已使用选项 Import --> Maven --> Existing Maven Projects 将该 maven 项目导入 SpringSource 工具套件 (STS)。像这样导入后，我可以使用代码，我现在在我的机器上拥有什么。但我不能在 STS 中使用 SVN 选项，如更新、提交和注释。我没有启用这些功能。我在我的 STS 工具中安装了 Subclipse for SVN。请指导我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T06:29:27.000

要将 SVNKit 作为 Eclipse 插件安装或确保安装了最新版本，请使用[http://eclipse.svnkit.com/1.8.x/](http://eclipse.svnkit.com/1.8.x/)作为 Eclipse Update Manager 中的更新站点位置。

```
In Eclipse menu select Help->Software Updates
Then choose 'Available Software' tab
Click 'Add Site...' button
Type http://eclipse.svnkit.com/1.8.x/ in the 'Location' field and press 'OK'.
Check the new site (it should appear in the list of update sites) and follow further steps as prompted by Eclipse. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T07:11:10.840

```
or 
```

在 Eclipse 中，转到帮助菜单 → 安装新软件... 单击添加... [http://community.polarion.com/projects/subversive/download/eclipse/3.0/kepler-site/](http://community.polarion.com/projects/subversive/download/eclipse/3.0/kepler-site/) 在位置复制 URL Subversive SVN Connectors 单击 OK 检查 Subversive SVN Connectors 单击 Next，然后按照说明完成安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:21:49.893

如果它已经在 SVN 中，那么您想使用 SVN 资源管理器查找项目并从那里结帐。（Subclipse 是一个*不错的*插件） Subclipse 1.6.x 更新站点 - [http://subclipse.tigris.org/update_1.6.x](http://subclipse.tigris.org/update_1.6.x) （但是你可能想要 1.7、1.8）

安装“用于子剪辑的 M2E 连接器”，您将获得一个很棒的新选项，称为“作为 Maven 项目签出”，它将在 STS 工作区中将项目和所有子模块作为 Maven 项目拉出。您将拥有完整的还原历史记录，并且可以提交。

Eclipse Extras 更新站点的 Maven 集成 - [http://m2eclipse.sonatype.org/sites/m2e-extras](http://m2eclipse.sonatype.org/sites/m2e-extras)

# jsf-2 - 如何在primefaces的日历组件中将currentdate设置为mindate？

> ID：11012301
> 
> 赞同：12
> 
> 时间：2012-06-13T09:47:48.530
> 
> 标签：jsf-2

我正在使用 primefaces 的日历组件。我想设置`mindate=currentdate.`我想限制用户选择当前日期之前的日期。我正在使用 JSF2.0。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T10:24:17.240

只需以通常的方式将其绑定为 bean 属性即可。

```
<p:calendar ... mindate="#{bean.currentDate}" /> 
```

顺便说一句，您创建当前日期的方式很笨拙。只需调用`Date`自己的构造函数就足够了。`Calendar`为此目的使用 只会带来不必要的开销。

```
private Date currentDate = new Date();

public Date getCurrentDate() {
    return currentDate;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-08-17T19:06:46.613

```
<p:calendar mindate="today"> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-22T12:02:37.560

尝试这个，

```
 <p:calendar mindate="calwidget.today()" widgetVar="calwidget" value="#{bean.date}"> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-04T18:01:28.737

如果您使用的是omnifaces，您可以这样做：

```
<p:calendar ... mindate="#{now}" /> 
```

# java - 了解 JVM 中的对象开销

> ID：11012302
> 
> 赞同：9
> 
> 时间：2012-06-13T09:48:00.230
> 
> 标签：java, memory, object, jvm, overhead

我正在学习 java，我记得在某处读到 java 对象在 JVM 内部有一些开销，虚拟机出于管理原因使用了这些开销。所以我的问题是，有人能告诉我是否以及如何在 HotSpot JVM 中获取对象的总大小，以及它可能带来的任何开销吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T09:52:21.703

你不能直接得到开销。开销的数量取决于实现，并且可能因许多因素而异（例如，精确的 JVM 版本，以及您使用的是 32 位还是 64 位 JVM）。

然而，可以相当安全地假设，在 HotSpot 等典型的现代 JVM 实现中，每个对象的开销**在 8 到 16 个字节之间**。数组的开销通常比其他对象大 4 个字节（包含整数数组长度）。

也可以看看：

*   [在 Java 中，确定对象大小的最佳方法是什么？](https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object)
*   [Java 对象的内存使用：一般指南](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:52:38.930

我发现[这篇文章内容](http://www.ibm.com/developerworks/java/library/j-codetoheap/index.html?ca=drs-)丰富，尽管我对表中提到的一些值有一些疑问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T14:39:48.533

这是对象头、对象开销、数组头、对象引用的片段。希望它对某人有所帮助，如果不是 OP，因为这是一个很老的问题。

```
 private static int OBJ_HEADER;
    private static int ARR_HEADER;
    private static int INT_FIELDS = 12;
    private static int OBJ_REF;
    private static int OBJ_OVERHEAD;
    private static boolean IS_64_BIT_JVM;

     static {
    String arch = System.getProperty("sun.arch.data.model");

    IS_64_BIT_JVM = (arch == null) || arch.contains("32");
    OBJ_HEADER = IS_64_BIT_JVM ? 16 : 8;
    ARR_HEADER = IS_64_BIT_JVM ? 24 : 12;
    OBJ_REF = IS_64_BIT_JVM ? 8 : 4;
    OBJ_OVERHEAD = OBJ_HEADER + INT_FIELDS + OBJ_REF + ARR_HEADER;
       } 
```

我应该说我只知道解决方案，但我还没有弄清楚为什么会这样。这就是为什么人们应该在他们的代码中留下评论......哦，好吧，当我弄清楚时，我会分享它背后的逻辑。

# c# - 使用 NDepend 查找方法的所有用途（包括通过接口）

> ID：11012315
> 
> 赞同：7
> 
> 时间：2012-06-13T09:48:29.183
> 
> 标签：c#, ndepend, cqlinq

使用[NDepend](http://www.ndepend.com/)，我怎样才能找到特定方法或属性的所有直接和间接用途？

特别是，我需要找到通过使用路径某处**的接口发生的用法。**谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:34:20.680

右键单击 UI 中任意位置的方法，然后选择菜单：*选择方法... > ...正在使用我（直接或间接）*会导致代码查询，例如：

```
from m in Methods 
let depth0 = m.DepthOfIsUsing("NUnit.Core.NUnitFramework+Assert.GetAssertCount()")
where depth0  >= 0 orderby depth0
select new { m, depth0 } 
```

问题是这样的查询提供了间接使用，但不查找**通过接口**（或在基类中声明的重写方法）发生的调用。

希望您可以通过以下查询获得您所要求的内容：

```
// Retrieve the target method by name
let methodTarget = Methods.WithFullName("NUnit.Core.NUnitFramework+Assert.GetAssertCount()").Single()

// Build a ICodeMetric<IMethod,ushort> representing the depth of indirect
// call of the target method.
let indirectCallDepth = 
   methodTarget.ToEnumerable()
   .FillIterative(
       methods => methods.SelectMany(
          m => m.MethodsCallingMe.Union(m.OverriddensBase)))

from m in indirectCallDepth.DefinitionDomain
select new { m, callDepth = indirectCallDepth[m]  } 
```

此查询的两个基石是：

*   调用[FillIterative()](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel.ExtensionMethodsHelpers~FillIterative.html)以递归方式选择间接调用。
*   顾名思义，对属性[IMethod.OverriddensBase](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel.IMethod~OverriddensBase.html)的调用。对于方法**M**这将返回在基类或接口中声明的所有方法的可枚举，由**M**覆盖。

# c# - http post请求在asp.net中不起作用

> ID：11012321
> 
> 赞同：2
> 
> 时间：2012-06-13T09:48:48.037
> 
> 标签：c#, asp.net, httpwebrequest

我想将用户输入的英文内容翻译成印地语。因此，每当用户单击翻译按钮时，我都会向 googletranslator 网站发送 HTTP 发布请求（用户输入英文文本）。

但我得到一个运行时异常，说“WebException 被捕获”和“无法连接到远程服务器”。

我已经关闭了我的防火墙和病毒软件...

可能是什么问题...

我是否需要设置或更改我的 Web 应用程序的设置...

请指导我摆脱这个问题......

![在此处输入图像描述](../Images/501e78dde8d5830a99a288bbebe7f31a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:02:49.990

根据评论，您可以使用以下代码：

```
 System.Net.WebProxy pry = new System.Net.WebProxy("192.168.1.100", 2);
            pry.Credentials = CredentialCache.DefaultCredentials;
            GlobalProxySelection.Select = pry; 
```

其中**192.168.1.100**是代理地址，**2**是端口号。

在发出任何 Http 请求之前使用代码。

这总是对我有用。

如果您遇到任何问题，请告诉我。

**编辑**

在创建 Web 请求对象之前使用代码

示例我之前使用此代码：

```
System.Net.HttpWebRequest webReq = (System.Net.HttpWebRequest)System.Net.WebRequest.Create("http://www.domain.com/horoscopes/daily/my.xml"); 
```

# c# - HTML onclick 触发代码而不点击

> ID：11012324
> 
> 赞同：1
> 
> 时间：2012-06-13T09:48:58.933
> 
> 标签：c#, html, onclick

我的代码在没有点击的情况下执行（这会导致空指针，因为它调用得太早了），这是我的代码：

Site.Master

```
<input type="submit" onclick="<%MvcApplication2.MvcApplication.hc.setLang("nl");%>"    value="submit"> 
```

我对这种情况有 3 个问题

*   <%..%> 之间的代码是在编译时执行的吗？
*   这甚至会起作用吗（将 <%%> 放入 onclick 中）？
*   有没有更好的方法从我的 C# 类中调用方法？

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:52:14.683

> 是因为它在编译时执行 <%..%> 之间的代码吗？

那是正确的。

代码中断在传递给客户端之前在服务器端呈现。

如果您只想运行这个`onclick`，`input`您可以使用[AJAX](http://api.jquery.com/jQuery.ajax/)对该方法进行服务器端调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:59:02.010

正确 - 调用页面时正在评估传递给 onclick 的值，因为它是服务器端代码 - 您需要

例如，我将创建一个返回设置语言的控制器方法

控制器：

```
public string setlanguage(string id){
//set your language
return "some string value";
} 
```

控制器（带无效）

```
public void setlanguage(string id){
//set your language
} 
```

html:

```
<input type="submit" onclick="setLanguage('nl');"    value="submit">

<script type="text/javascript">
function setLanguage(lang)
$.post('@Url.Action("setlanguage","controllername")/' + lang,function(){
//no result has been returned
});
}
</script> 
```

值得注意的是，如果您没有返回值，那么页面语言的任何更改都可能在下次页面加载之前不会反映出来 - 使用完整的回发可能会更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:55:12.093

您应该将单击按钮时运行的代码放在函数内，然后将函数名称传递给 onclick 属性。

通过这种方式，您可以轻松知道您的代码是否正确。

# android - 为安卓应用导入并设置布拉德利手

> ID：11012332
> 
> 赞同：0
> 
> 时间：2012-06-13T09:49:38.310
> 
> 标签：android, iphone, fonts

我最近开发了一个 iPhone 应用程序并尝试制作一个与 android 类似的版本。

一切都很顺利，除了 android 不支持 bradley hand 作为我的按钮和标签上使用的文本字体。

我知道您可以导入自己的文本字体，但我在谷歌上搜索并找不到任何提示：

*   如何做到这一点，或者可能是在线某处的有用教程
*   **但更重要**的是，我在哪里可以获得要导入的 bradley hand 字体源？

我在 mac 上使用 eclipse SDK。

有哪位高人可以帮帮我吗？

干杯菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:54:39.110

1）`assets/fonts`在您的项目目录中创建文件夹。
2) 将字体文件放在`fonts`目录中
3) 在您要使用字体的活动中，执行以下操作：

`private static Typeface sTypeface;
if (sTypeface == null) {
sTypeface = Typeface.createFromAsset(getContext().getAssets(), "fonts/you_font_filename.ttf");
}
TextView mTextView = (TextView) findViewById(R.id.you_textview);
mTextView .setTypeface(sTypeface);`

# c# - AES解密MySQL中的整行

> ID：11012334
> 
> 赞同：1
> 
> 时间：2012-06-13T09:49:46.100
> 
> 标签：c#, mysql, encryption, aes

我使用的代码块如下：

```
SELECT * FROM crypted_tbl WHERE Username=AES_ENCRYPT('aydu', 'usa2010'); 
```

当我使用这个命令时，我得到

```
”`‡œ™uûx“¢Í®i
‘¨åµüÐzêlæZ1­ØÝ
GN“bˆg(ž÷’8 
```

（用户名、密码、授权类型）

如何使用 MySQL 命令解密整行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:06:53.230

恐怕您将不得不显式解密每一列，而不是尝试解密 *. 如果您只使用 MySQL，则必须执行以下操作：

```
SELECT AES_DECRYPT(column1, 'seed'), AES_DECRYPT(column2, 'seed'), etc.
WHERE Username=AES_ENCRYPT('aydu', 'usa2010'); 
```

如果您想在 c# 或其他平台中构建语句，那么您可以查询表结构并动态构建 SELECT 语句，这样您就不必将每个列名硬编码到 SELECT 中。请注意在每次查询之前查询表结构会影响性能。

```
SELECT * FROM `information_schema`.`tables`
WHERE table_name = 'crypted_tbl'; 
```

# java - 一个套接字的多个客户端连接

> ID：11012339
> 
> 赞同：-1
> 
> 时间：2012-06-13T09:50:04.550
> 
> 标签：java, sockets, networking

我有一个基于套接字的服务器，它接受客户端连接。问题是服务器只能接受一个客户端连接。我希望它接受多个客户。

服务器代码：

```
 class Conn extends Thread{
        ServerSocket ss;
        Socket s;
        public void run()
        {
            status.setText(status.getText()+"connecting");
            try{
            while(true)
            {
            ss=new ServerSocket(3000);
            s=ss.accept();
            Read r=new Read(s);
            r.start();
            }
            }catch(Exception e){}
        }            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:17:10.797

在`Conn`课堂上，输入如下内容：

```
try {
    ss = new ServerSocket(3000);
    while(true) {
        s = ss.accept();
        Read r = new Read(s);
        r.start();
    }
} catch (Exception e) {} 
```

打开服务器套接字，并在一个循环中接受所有传入的连接并处理它们以启动一个新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:54:11.467

您可以将连接的客户端保留在列表中，然后将传入的字符串发送给所有客户端，而不是仅将其发送给编写消息的客户端

# mysql - 如何找到必须具有 N > 1 个关联的行作为避免 N+1 查询的条件

> ID：11012342
> 
> 赞同：0
> 
> 时间：2012-06-13T09:50:11.943
> 
> 标签：mysql, polymorphic-associations

给定下表：

```
id  category_id categorizable_id  categorizable_type
66  22          67                Image
72  22          75                Image
74  15          71                Image
104 15          67                Image
126 15          113               Image 
```

现在我想通过左连接选择那些“图像”，他们的 category_ids 是 22***和***15 我的 sql 目前看起来像这样：

```
SELECT images.id FROM images 
  LEFT OUTER JOIN category_links 
    ON images.id = category_links.categorizable_id AND category_links.categorizable_type = 'Image' 
    where 
      category_links.category_id = "22" AND
      ( 
        select count(*) from category_links 
          where category_links.categorizable_id = images.id AND 
          category_links.categorizable_type = 'Image' AND 
          category_links.category_id = "15"
      ) 
```

如何重写以消除对子查询的需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:04:47.257

如果没有子查询，您将无法有效地执行此操作，但情况还有改进的余地：

```
SELECT * FROM
    (SELECT images.id, COUNT(l.categorizable_id) AS occurrences
     FROM images i
     LEFT OUTER JOIN category_links l
     ON i.id = l.categorizable_id AND l.categorizable_type = 'Image'
     WHERE l.category_id IN (15, 22)
     GROUP BY l.categorizable_id) temp
WHERE occurrences = 2; 
```

这里的主要优点是配置此查询非常容易：您指定要搜索的`IN(...)`类别以及这些类别中有多少必须与`occurrences = N`测试匹配。

因此，上述查询将返回属于这两个类别的所有图像；如果`occurrences >= 1`它会返回任一类别或两者中的图像；等等

如果您使用`HAVING`而不是`WHERE`检查，您可能会丢失子`occurrences`查询，但这通常不是一个好主意，因为本质上它会逐行过滤子查询的结果（如上文所述），因此性能会受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:07:12.973

如果你想要不同的图像 id，那么你可以使用 distinct。

```
SELECT distinct images.id, 
COUNT(links.categorizable_id) AS occurrences
FROM images i
LEFT OUTER JOIN category_links links
ON i.id = links.categorizable_id AND links.categorizable_type = 'Image'
WHERE links.category_id IN (15, 22)
GROUP BY links.categorizable_id) temp
Having Count(links.categorizable_id) >= 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:45:00.120

```
SELECT
    a.id
FROM
    images a
INNER JOIN
    category_links b ON a.id = b.categorizable_id
WHERE
    b.categorizable_type = 'Image'
    AND 
    b.category_id IN (22, 15)
GROUP BY
    a.id
HAVING
    COUNT(*) = 2 
```

# iphone - LocationManager 在 IOS 的后端工作

> ID：11012343
> 
> 赞同：0
> 
> 时间：2012-06-13T09:50:12.327
> 
> 标签：iphone, ios

我正在使用 iPhone 上的 LocationManager 开发一个位置跟踪应用程序。以下是我的问题。如果用户点击iphone上的Home键，意味着应用程序切换到后端，位置管理器的线程是否仍然有效？位置管理器会更新当前位置吗？以下是示例代码。

```
CLLocationManager *_locationManager;

- (void)startStandardUpdates {
    if (nil == locationManager) {
        locationManager = [[CLLocationManager alloc] init];
    }

    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    // Set a movement threshold for new events.
    locationManager.distanceFilter = kCLLocationAccuracyNearestTenMeters;

        //Will the thread still work even the application is switched to background?
    [locationManager startUpdatingLocation]; 

    CLLocation *currentLocation = locationManager.location;
    if (currentLocation) {
        PAWAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        appDelegate.currentLocation = currentLocation;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:00:29.600

*   ***来自开发者网站的注释***

有几种方法可以在后台跟踪用户的位置，其中大多数实际上并不需要您的应用程序在后台连续运行：

```
The significant-change location service (Recommended)

Foreground-only location services

Background location services 
```

对于不需要高精度位置数据的应用，强烈建议使用重大变化位置服务。使用此服务，仅当用户的位置发生重大变化时才会生成位置更新；因此，它非常适合社交应用程序或为用户提供非关键、位置相关信息的应用程序。如果应用程序在发生更新时被挂起，系统会在后台将其唤醒以处理更新。如果应用程序启动此服务然后终止，系统会在新位置可用时自动重新启动应用程序。此服务在 iOS 4 及更高版本中可用，并且仅在包含蜂窝无线电的设备上可用。

仅前台和后台位置服务都使用标准位置核心位置服务来检索位置数据。唯一的区别是，如果应用程序暂停，仅前台位置服务将停止提供更新，如果应用程序不支持其他后台服务或任务，则很可能会发生这种情况。仅前台位置服务适用于仅在前台时需要位置数据的应用程序。

为用户提供持续位置更新（即使在后台）的应用程序可以通过在其 Info.plist 文件中包含 UIBackgroundModes 键（带有位置值）来启用后台位置服务。在 UIBackgroundModes 键中包含此值不会阻止系统挂起应用程序，但它确实告诉系统它应该在有新的位置数据要传递时唤醒应用程序。因此，此键有效地让应用程序在后台运行，以便在位置更新发生时处理它们。

[在此处输入链接描述](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:06:51.543

也许你应该记录你的位置。

后台还有一个关于locationmanager的非常有用的教程。

这可能会帮助你。

唯一的问题是，苹果不太喜欢这个，可能会在后台 20 分钟后杀死你的应用程序。

[http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)

祝你好运，

如果您有任何问题，请随时问他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:35:55.913

位置管理器，如果您不停止或释放它，它将继续运行，直到应用程序被暂停。如果您在 info.plist 中设置了所需的后台操作，则可以允许它无限期地继续更新。在这种情况下，如果您的应用被暂停，它会在事件中唤醒您的应用。

话虽如此，在后台调用方法可能非常困难。

如果您计划在后台状态下使用该服务，有许多考虑因素。线程和锁定、缺少 UI 和运行循环空闲问题比比皆是。你应该认真评估你想要完成的事情，并考虑用最简单的方式来实现它。电池寿命是便携式设备的头号问题。您的功能必须对用户最有利，以保证能源使用。如果您锁定设备或干扰用户操作，您将不会成为受欢迎的客人。

您可以在 github 上查看我自己的处理程序示例，它可以为您提供一些见解和解决方案：

[TTLLocationHandler](https://github.com/dsdavids/TTLocationHandler)

# jasper-reports - 如何在 JasperReports 中进行分组？

> ID：11012346
> 
> 赞同：2
> 
> 时间：2012-06-13T09:50:22.653
> 
> 标签：jasper-reports

我正在使用以 XML 作为数据源的JasperReports*生成**pdf 。*

 *我有桌子 ![在此处输入图像描述](../Images/3b97b2f82cc303c8b631435706ae4af8.png)

XML如下：

```
<multiplerecord type="PAF_DETAILS">
    <record PAFNO="PAF121" MINCOMM="5" INVOICENO="BILL000000121" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
    <record PAFNO="PAF122" MINCOMM="5" INVOICENO="BILL000000122" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
    <record PAFNO="PAF123" MINCOMM="5" INVOICENO="BILL000000123" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
    <record PAFNO="PAF124" MINCOMM="5" INVOICENO="BILL000000124" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
    <record PAFNO="PAF125" MINCOMM="5" INVOICENO="BILL000000125" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
    <record PAFNO="PAF124" MINCOMM="5" INVOICENO="BILL000000124" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 2"/>
    <record PAFNO="PAF122" MINCOMM="5" INVOICENO="BILL000000122" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 2"/>
    <record PAFNO="PAF123" MINCOMM="5" INVOICENO="BILL000000123" TYPE="Exclusive" CATEGORY="Category I" SLABNO="Slab 2"/>
    <record PAFNO="PAF126" MINCOMM="5" INVOICENO="BILL000000126" TYPE="Non - Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
    <record PAFNO="PAF127" MINCOMM="5" INVOICENO="BILL000000127" TYPE="Non - Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
    <record PAFNO="PAF128" MINCOMM="5" INVOICENO="BILL000000128" TYPE="Non - Exclusive" CATEGORY="Category I" SLABNO="Slab 1"/>
  </multiplerecord> 
```

这是如何在*JasperReports*中使用*iReport 4.5.1*实现的。
我是JR新手。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:54:07.850

您可以使用：

```
<group name="Type">
    <groupExpression><![CDATA[$F{TYPE}]]></groupExpression>
</group> 
```

组可以包含组页眉、组页脚……您可以在 JasperReport 中使用多个组。确保数据正确排序，排序应与定义的组相对应。在您的示例中进行排序似乎已经可以了。您可以在 iReport 设计器中轻松定义组。*

# javascript - Jquery 和闭包或函数引用不起作用？

> ID：11012348
> 
> 赞同：1
> 
> 时间：2012-06-13T09:50:35.650
> 
> 标签：javascript, jquery

我认为这与在不同范围内运行的函数有关，在该范围内无法访问 jquery 库（显示为下面第二行的最后一个参数）

```
var funcExpandHeight = container.animate({
    height: '300px'
}, 300, function () {});
foo.animate({
    height: 'show'
}, 300, funcExpandHeight); 
```

第一行有效，然后崩溃`'f.easing[i.animatedProperties[this.prop]] is not a function'`

如下图所示，将这些线组合在一起，操作成功完成。

```
 foo.animate({
     height: 'show'
 }, 300, function () {
     container.animate({
         height: container[0].scrollHeight + 'px'
     }, 300, function () {})
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:51:27.863

第三个参数`.animate()`是回调函数，但在您的第一个代码中，您只是传递了一个变量。

```
var funcExpandHeight = function() {
   container.animate({height: '300px'}, 300, function(){});
}
foo.animate({height: 'show'}, 300, funcExpandHeight); 
```

* * *

### 笔记

的配置**[`.animate()`](http://api.jquery.com/animate/)**如下：

```
.animate( properties [, duration] [, easing] [, complete] ) 
```

where`[]`表示可选。

在您的代码中，您没有给出`easing`so，第三个参数将被视为完整的回调函数。

### 有关更多详细信息，请参见上面的链接。

# .net - 如何将会话数据加密为令牌以授权后续 Web 服务调用？

> ID：11012356
> 
> 赞同：1
> 
> 时间：2012-06-13T09:51:04.213
> 
> 标签：.net, encryption, azure, wcf-security, acs

我有一个需要防止未经授权的用户访问的 Web 服务。我需要根据用户名和密码公开一个 Web 服务操作来授权用户。对用户验证请求的响应应包含安全令牌。该安全令牌包含客户端应用程序可以使用的一些嵌入式用户属性，但在加密时，也将用于验证后续 Web 服务操作。未加密的令牌看起来像这样：

```
UID=444; DTE=2012-06-01T14:01:54.9571247Z; GID=1; WID=00:1C:B3:04:85:11; SID=lit3py55t21z5v55vlm25s55; 
```

我可以使用对称密钥算法，因为密钥可以是客户端和服务器之间的共享密钥（我控制两者）。我使用 SHA1 和 256 的密钥大小实现了以下[Rijndael 示例。](http://www.obviex.com/samples/Encryption.aspx)

这段代码[经常在互联网上被引用](https://www.google.com/search?ie=UTF-8&q=%22Encrypts%20specified%20plaintext%20using%20Rijndael%20symmetric%20key%20algorithm%22)，但[微软自己声明与 Rijndael 相关](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndael%28v=vs.90%29.aspx)：

> **Rijndael**类是[Aes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes%28v=vs.90%29.aspx)算法的前身。您应该使用[Aes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes%28v=vs.90%29.aspx)算法而不是**Rijndael**。有关详细信息，请参阅.NET 安全博客中的[Rijndael 和 AES 之间的差异条目。](http://go.microsoft.com/fwlink/?LinkId=200932)

我应该有任何安全问题吗？如果是这样，您将如何更改示例代码，或者任何人都可以提供更好、更安全的示例？

最后，作为替代方案，我正在考虑使用[Windows Azure 访问控制服务](http://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/)针对我自己的身份提供者颁发安全令牌，并使用该令牌作为单独的调用来获取用户帐户数据。由于应用程序在 Azure 中运行，这会是更好的实现方式吗？有人愿意分享他们在这样的架构中使用 ACS 的经验吗？

顺便说一句：客户端应用程序是 iOS 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:13:53.843

您可以使用**FormsAuthentication.Encrypt**方法，而不是自己构建一些东西。此方法将加密并**签署**您的 FormsAuthenticationTicket（此“票证”可以包含带有附加信息的用户名）。通过签署您的票，它还可以防止篡改（这是基于机器密钥）。

加密票证只是您可以发送到移动设备的字符串。然后，对于每个其他请求，您可以简单地发送令牌并在服务器端解密它。这就是身份验证部分。

现在，如果您想将加密数据发送到您的客户端，我建议您只需通过 HTTPS 传输数据（这同样适用于您的令牌）。

参考：http: [//msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx)

# events - 如何区分 GXT 中的 Events.OnClick 和 Events.OnDoubleClick

> ID：11012362
> 
> 赞同：0
> 
> 时间：2012-06-13T09:51:32.397
> 
> 标签：events, gwt, grid, gxt, double-click

我正在使用 Ext GWT 2.2.4。在我们的应用程序中，我们在 Grid 上绑定**onClick**事件，并在单击时进行服务器调用以获取数据。我们在对话框中显示结果。

问题是，如果用户多次点击单元格，我们会在同一个对话框中得到重复的数据。我还放了“getListStore().removeAll()”语句来清除模型并重新填充以在对话框中显示新数据。

PS。我也尝试过绑定 Events.onDoubleClick 事件，但它并没有解决我的问题，因为即使双击也调用了两次“单击 - 单击”。

非常感谢您的帮助。我一直在这个论坛寻找解决方案，有类似的帖子，但我没有找到任何解决方案。

这是代码：

```
 grid.addListener(Events.OnClick, new Listener<GridEvent<ModelData>>() {

       public void handleEvent(GridEvent<ModelData> be) {
            performAction(be);
       }
  });

  private void performAction (GridEvent<ModelData> be) {
            AppEvent event = new AppEvent(Events.onClick);
            dispatcher.dispatch(event);
  } 
```

# c# - ComponentLink 作为 Publication 级别的元数据，找到使用对应 Component 的页面

> ID：11012365
> 
> 赞同：0
> 
> 时间：2012-06-13T09:51:35.907
> 
> 标签：c#, tridion

在 TBB 中，我试图使用 Criterias 和 Query 查找页面，该页面使用具有特定 TcmUri 的组件。

我在 sdllive 上搜索了一个示例，但没有找到。

有人可以举个例子说明我该怎么做吗？

完整的场景是这样的：

我将 ComponentLink 设置为出版物上的元数据字段。此 ComponentLink 是一个登录组件。使用该组件的页面提供了网站的登录功能。现在，我在发布站点管理员时从出版物中读取元数据，获取用作 ComponentLink 的组件的 tcmId（我已经这样做了）并找到正在使用该组件的页面（登录页面）以获得路径此登录页面并将其写入 web.config。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:11:30.810

如果组件在页面中作为组件表示，那么为什么不直接使用组件链接来查找它呢？将组件的 URI 存储在 Web.Config 中，如果这对您来说最简单，请使用以下内容：

```
const string currentPageId = "tcm:6-123-64";
TcmUri itemUri = new TcmUri(ConfigurationManager.AppSettings["MyLoginComponent"]);
ComponentLink componentLink = new ComponentLink(itemUri.PublicationId);

string loginUrl =
    componentLink.GetLink(currentPageId, itemUri.ToString(), "tcm:0-0-0", "", "",
                          false, false).Url; 
```

如果您希望在发布时使用 TBB 找到此内容：

```
RepositoryLocalObject context = null;
if (package.GetByName(Package.ComponentName) == null)
    context = (RepositoryLocalObject)engine.GetObject(
               package.GetByName(Package.ComponentName));
else
    context = (RepositoryLocalObject)engine.GetObject(
               package.GetByName(Package.ComponentName));

Repository contextPublication = context.ContextRepository;
if (contextPublication.Metadata == null) return;
ItemFields metadata = 
     new ItemFields(contextPublication.Metadata, contextPublication.MetadataSchema);
if (!metadata.Contains("MyLoginComponentField")) return;

ComponentLinkField myLoginComponentField = (ComponentLinkField)metadata["MyLoginComponentField"];
Component loginTarget = myLoginComponentField.Value;

UsingItemsFilter filter = new UsingItemsFilter(engine.GetSession())
                                {
                                    InRepository = contextPublication, 
                                    ItemTypes = new[] {ItemType.Page}
                                };

foreach (Page page in component.GetUsingItems(filter))
{
    string url = page.PublishLocationUrl;
} 
```

如果该组件用于多个页面，那么这将包含列表中最后一页的 URL - 确保不是这种情况......我可以在代码中正确处理，但我认为我应该不要做所有的功课。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:39:03.757

我采用了 Nuno 建议的方法，我现在拥有的方法如下：

```
 StringBuilder url = new StringBuilder();
        RepositoryLocalObject context = null;
        if (package.GetByName(Package.ComponentName) == null)
            context = (RepositoryLocalObject)engine.GetObject(
                       package.GetByName(Package.PageName));
        else
            context = (RepositoryLocalObject)engine.GetObject(
                       package.GetByName(Package.ComponentName));

        Repository contextPublication = context.ContextRepository;

        _log.Debug("Starting checking the metadata");
        if (contextPublication.Metadata != null)
        {
            ItemFields metadata =
             new ItemFields(contextPublication.Metadata, contextPublication.MetadataSchema);
            if (metadata.Contains("LoginPage"))
            {
                _log.Debug("LoginPage metadata field found in " + metadata.ToXml().OuterXml);
                ComponentLinkField myLoginComponentField = (ComponentLinkField)metadata["LoginPage"];
                Component loginTarget = myLoginComponentField.Value;

                UsingItemsFilter filter = new UsingItemsFilter(engine.GetSession())
                {

                   // InRepository = contextPublication,
                    ItemTypes = new[] { ItemType.Page }

                };

                foreach (comm.Page page in loginTarget.GetUsingItems(filter))
                {
                    if(PublishEngine.IsPublished(page))
                    {
                        url.Append(" url: ").Append(page.PublishLocationUrl);
                    }
                }
            }
        }
        return url.ToString(); 
```

现在我只是将所有页面路径作为单个字符串读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:00:22.000

Nuno 是对的 - Tridion 的动态组件链接功能将完全满足您的需求。Nuno 的示例使用应用程序配置数据，但您可以像您在问题中所建议的那样轻松地使用发布数据来引用您的登录组件。

有时您没有明显的组件可以链接到页面上。例如，主页或子站点主页通常实际上没有内容。如果是这样，那么您也可以通过在作为链接目标的页面上放置一个虚拟组件并使用不呈现任何额外输出的模板来呈现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T09:51:31.423

我设法通过实现此方法来过滤版本：

```
public static bool IsPageLastVersion(Page page)
    {
        bool isLastVersion = false;
        if (page != null)
        {
            List<VersionedItem> pageVersions = page.GetVersions().ToList();
            pageVersions.Sort((v1, v2) => v1.Version.CompareTo(v2.Version));
            int lastVersion = pageVersions.Last().Version;
            isLastVersion = lastVersion == page.Version;
        }
        return isLastVersion;
    } 
```

# iphone - 如何在下一个按钮单击+iphone上更改图像

> ID：11012366
> 
> 赞同：0
> 
> 时间：2012-06-13T09:51:37.497
> 
> 标签：iphone

我想通过使用 uiimage 视图更改下一个按钮单击时的图像。我正在使用以下链接获取图像。

[http://01s.in/webservices/ratemypic/getData.php?db_table=image](http://01s.in/webservices/ratemypic/getData.php?db_table=image)

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:57:22.080

```
//Are you getting the image or not ...   
//if yes then  just make the button action method let say...... 

changeImage:(id)sender{
  UIButton *btn = (UIButton*)sender
  [btn setImage:yourUIImage forControlState:UIControleStateNormal];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:01:11.690

当您想更改按钮图像时，只需使用波纹管...

```
[yourButton setImage:[UIImage imageWithName:@"yourImageName"] forControlState:UIControleStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:01:39.830

首先使用解析这个字符串

```
NSArray *tempArry = [firstArryStr componentsSeparatedByString@".png"]; 
```

现在 tempArray 将包含图像名称。在按钮操作中，您可以使用 index（它是静态 var）来迭代此数组并在 imageview 中显示图像，如下所示：

```
UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png"],[tempArray objectAtIndex:index]];
index++; 
```

并检查 index == [tempArray length] 是否，然后将其重置为 0。在 UIImageView 中使用此图像。

# c# - SAP 和 .Net 通过 SOAP

> ID：11012367
> 
> 赞同：1
> 
> 时间：2012-06-13T09:51:39.447
> 
> 标签：c#, .net, soap, sap

在不久的将来，我必须为 SAP 和其他程序之间的集成开发一个接口。看来我们将通过使用 SOAP 协议使用 SAP Business Connector (SBC) 来做到这一点。但直到现在我还没有使用 SOAP。我试图通过谷歌搜索，但没有找到可以理解的东西。现在我虚脱了:-)

谁能告诉我如何在.Net 上开发 SOAP 客户端？还有教程、文章或类似的东西？如果有人给我这样的链接以及带有 SAP SOAP 客户端的代码示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:53:20.147

> 谁能告诉我如何在.Net 上开发 SOAP 客户端？

使用 WCF 客户端：http: [//msdn.microsoft.com/en-us/library/ms735103.aspx](http://msdn.microsoft.com/en-us/library/ms735103.aspx)

想法是使用命令或 Visual Studio 中的“添加服务引用”对话框生成强类型代理类，`svcutil.exe`并指向公开的 SOAP Web 服务的 WSDL 端点：

```
svcutil http://foo.com/MyService/SomeService?wsdl 
```

这将生成一个强类型类，您可以将其集成到您的项目中并直接调用其上的 SOAP 方法。

# java - 如何使用文件中的值绘制折线图？

> ID：11012368
> 
> 赞同：0
> 
> 时间：2012-06-13T09:51:40.587
> 
> 标签：java, android, file

我正在制作一个 android 应用程序，它可以告诉您您的尺寸与理想尺寸相比的差异。我想添加一个函数来跟踪输入大小并用折线图显示。一些细节：

1.  我尝试将“achartengine”用作库。
2.  每当用户输入他的体重（双倍）时，都应该将其添加到文件中。
3.  通过读取文件中的重量值，它应该绘制一个折线图。

如何将文件中的值重复保存为双精度数组列表？那么，如何使用这些值来绘制折线图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:05:57.457

我只想让你用来`AchartEngine`绘制图表。请参阅此[链接](http://www.achartengine.org/content/demo.html)。您将在那里找到演示

# sql - 用于在 Web 上进行测试的 SQL Server

> ID：11012370
> 
> 赞同：10
> 
> 时间：2012-06-13T09:51:45.587
> 
> 标签：sql, sql-server, database, tsql

是否有可能连接到网络上的 SQL Server 数据库并在那里创建一些表查询等以用于测试目的？

当您不想安装 SQL Server（例如，您在另一个操作系统上）但仍然对该技术感兴趣时，这将很有用。如果也有可能以编程方式连接到那里创建的数据库，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:55:29.063

`SQL Fiddle`您可以在 SQL Server 2008 R2 或 2012 模式下使用和运行查询：

[http://sqlfiddle.com/](http://sqlfiddle.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:55:59.423

查看[http://sqlfiddle.com/](http://sqlfiddle.com/)

> 用于轻松在线测试和共享数据库问题及其解决方案的工具。

![SQL 小提琴截图](../Images/ce07cd7b488c9ec35822cff8f59af4f3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:56:42.200

您必须为在云上使用的任何服务器付费，MS 提供[SQL 数据库](http://www.windowsazure.com/en-us/home/features/data-management/)（SQL Azure 的名称相当模糊）

[亚马逊](http://aws.amazon.com/windows/)最近也开始提供 SQL Server 云托管。

您可以支付一个月的测试费用，然后数据库将被删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T08:02:03.760

像 freesqldatabase.com 这样的网站将为您提供凭据，以便免费免费连接到他们的 SQL Server 数据库以进行测试。您还可以利用网络托管中的 Google 或 Amazon 免费层来免费创建和访问 sql 数据库。

用于测试目的的最佳选择是在您的 PC 上创建一个本地数据库，您可以像在网络上一样免费访问该数据库，而且操作非常简单。这是我发现的一个视频，可以为您指明正确的方向。它将向您展示如何创建可用于测试目的的本地数据库 [https://www.youtube.com/watch?v=M5DhHYQlnq8&ab_channel=ChrisDyck](https://www.youtube.com/watch?v=M5DhHYQlnq8&ab_channel=ChrisDyck)

# android - 水平 facebook 样式 silder

> ID：11012372
> 
> 赞同：1
> 
> 时间：2012-06-13T09:51:53.160
> 
> 标签：android, facebook, android-layout, android-side-navigation

我最近一直在使用您的 facebook 风格的 android 滑块，我想知道您是否可以帮助我。我需要使滑块从另一侧滑动。所以不是一开始从左向右滑动，我需要它从右向左滑动。

你能解释一下你是怎么为我做的吗？

谢谢

问候，菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:59:46.117

只需按照以下步骤，

1）创建一个水平滚动视图。

2）动态添加两个视图。

3) 使用 Layout Inflater 为两个视图充气。

4）然后将孩子 1 设置为初始视图而不是孩子 0 ，这样它看起来就像从右到左而不是从左到右移动。

这是关于类似 Facebook 的布局的对话。

[布局动画 Android[Facebook]](https://stackoverflow.com/q/8586945/603744)

还有一个，

[如何在 Android 上制作 Facebook 的应用新菜单？](https://stackoverflow.com/q/8428416/603744)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:10:05.827

你可以试试这个......

```
 public class AnimateActivity extends Activity {
/** Called when the activity is first created. */

private int oldLeft;
private int oldTop;
private int newBottom;
private int newTop;
private int screenHeight;
private int animToPostion;
private Display display;
private boolean menuOpen = true;
private AnimationListener AL;
LinearLayout fakelayout;
LinearLayout bottomlayout;
Button home;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    fakelayout=(LinearLayout)findViewById(R.id.fakelayout);
    bottomlayout=(LinearLayout)findViewById(R.id.bottomlayout);
    home=(Button)findViewById(R.id.home);

    display = getWindowManager().getDefaultDisplay();
    screenHeight = display.getHeight();

    int calcAnimationPosition = (screenHeight /2);
    animToPostion = screenHeight - calcAnimationPosition;          
    newBottom = animToPostion;
    if (menuOpen == true) {

        RelativeLayout.LayoutParams param = new RelativeLayout.LayoutParams(
                 RelativeLayout.LayoutParams.FILL_PARENT,animToPostion);
        fakelayout.setLayoutParams(param);

    }
    home.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(menuOpen){

                animslideUp();
                menuOpen = false;
            }else{

                animSlideDown();
                menuOpen = true;
            }
        }
    });

    // Animation

    AL = new AnimationListener() {

        public void onAnimationEnd(Animation arg0) {
            // TODO Auto-generated method stub
            if (menuOpen == false) {         

                Log.i("onAnimationEnd", "menu is open now");
                bottomlayout.layout(0, 0,
                         bottomlayout.getMeasuredWidth(), bottomlayout.getMeasuredHeight());

            } else if (menuOpen == true) {
                fakelayout.setVisibility(View.VISIBLE);

            }
        }

        public void onAnimationRepeat(Animation arg0) {
            // TODO Auto-generated method stub

        }

        public void onAnimationStart(Animation arg0) {
            // TODO Auto-generated method stub

        }};

}
public void animslideUp() {

    fakelayout.setVisibility(View.GONE);
    Log.e("in animslideUp", "true");

    oldTop=bottomlayout.getTop();
    newTop =0;

    Log.w("oldTop",""+oldTop);
    Log.w("newTop",""+newTop);

    TranslateAnimation slideUp = new TranslateAnimation(0, 0, oldTop, newTop);
    slideUp.setDuration(500);
    slideUp.setFillEnabled(true);
    slideUp.setAnimationListener(AL);
    bottomlayout.startAnimation(slideUp);

}                          

public void animSlideDown() {

    Log.d("in animslideDown", "true");

    oldTop=bottomlayout.getTop();
    newTop = animToPostion;
    Log.w("oldTop",""+oldTop);
    Log.w("newTop",""+newTop);

    TranslateAnimation slideDown = new TranslateAnimation(0, 0, oldTop,newTop);
    slideDown.setDuration(500);
    slideDown.setFillEnabled(true);
    slideDown.setAnimationListener(AL);
    bottomlayout.startAnimation(slideDown);

}
    } 
```

它的 XML 是：

```
 <?xml version="1.0" encoding="utf-8"?>
            <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                   android:layout_width="fill_parent"
                   android:layout_height="fill_parent"
                   android:orientation="vertical" >

                        <LinearLayout
                        android:id="@+id/fakelayout"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical" 
                        android:visibility="visible"
                        </LinearLayout>

<LinearLayout
    android:id="@+id/bottomlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:layout_below="@+id/fakelayout"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:background="@drawable/topbar"
        android:orientation="horizontal"
         >
        <Button
            android:id="@+id/home" 
            android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/home"/>
    </LinearLayout>
</LinearLayout>

    </RelativeLayout> 
```

# asp.net - 在 Windows Server 2008 上为 ASP.NET 应用程序配置静态 IP 地址

> ID：11012373
> 
> 赞同：1
> 
> 时间：2012-06-13T09:51:57.670
> 
> 标签：asp.net, configuration, windows-server-2008-r2, static-ip-address

我有一个安装了 Windows server 2008 的系统。配置 IIS 后，我在此系统上部署了 ASP.NET Web 应用程序。此应用程序运行良好，用户可以在 LAN 上访问。现在，我希望它制作一个服务器，以便可以在 Internet 上访问它。我从网络提供商那里获得了静态 IP 地址。我应该如何在具有 windows server 2008 的系统上配置此静态 IP 地址？

等待尽快回复。谢谢大家。

# c++ - Visual Studio 调试器做什么，什么时候条件应该给出错误

> ID：11012375
> 
> 赞同：2
> 
> 时间：2012-06-12T13:51:50.570
> 
> 标签：c++, debugging, visual-studio-2010

我正在调试一些代码，每次都需要中断，当字符串中的字符（const char *）等于某个值时。

所以我放了断点并附加条件，例如：`s[0] == 'e'`。但是我正在调试的代码在 CRT 中，并且有可能，这`s == 0`是真的。所以“寻址空指针”应该给出某种错误。是的-我可以给那里条件`s != 0`，但这不会那么有趣:)

我很好奇，调试器在尝试评估这种情况时会做什么？它将如何在内部表现？显然它没有给出任何错误，也没有在这个断点上停止`s == 0`

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:00:52.820

从未尝试过，但我认为它会停止执行。我的假设基于此：

`If you set a breakpoint condition with invalid syntax, a warning message appears immediately. If you specify a breakpoint condition with valid syntax but invalid semantics, a warning message appears the first time the breakpoint is hit. In either case, the debugger breaks execution when the invalid breakpoint is hit. The breakpoint is skipped only if the condition is valid and evaluates to false.`

[来源](http://msdn.microsoft.com/en-us/library/7sye83ce.aspx)。

# google-maps - 用ajax调用时谷歌地图没有显示正确的大小

> ID：11012378
> 
> 赞同：0
> 
> 时间：2012-06-13T09:52:19.307
> 
> 标签：google-maps, google-maps-api-3

我在使用 ajax（smartAjax 插件）提取内容的网站上使用谷歌地图。然而，地图被放置在“联系我们”页面上，如果我第一次调用这个页面，地图会完整显示，如果我点击返回即“我们的概念”，然后再次点击“联系我们”，地图仅部分显示。我已经为此奋斗了数周，对此我真的无法获得任何帮助。

有没有人可以在这里看看并告诉我在使用 ajax 调用地图后我可以做些什么来使地图完整显示？

在这里： [请在此处查看网站。](http://mark-i-mark.com/lab/eys/public/ajax1.html)

我将不胜感激任何帮助。

干杯

**更新** 解决方案由 jayarjo 发布

```
google.maps.event.addListenerOnce(map, 'idle', function() {
    google.maps.event.trigger(map, 'resize');
    map.setCenter(point); // be sure to reset the map center as well
}); 
```

这是使用 ajax 时必须包含的内容，它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:39:35.080

您可以尝试修改地图`initialize()`功能。不要在`map`每次点击链接时初始化。

```
var map;
function initialize() {
    var myOptions = {
        center: new google.maps.LatLng(-34.397, 150.644),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map"), myOptions);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:00:21.000

正如我在评论中所写，您的 javascript 代码有几个错误。如果你修复了这些，很可能这个问题也将得到修复。

但是，快速破解是编写以下行：

```
google.maps.event.trigger(map, 'resize'); 
```

在您的代码中的某处，就在用户更改为“联系我们”选项卡之后。

# php - (PHP) 插入的数据在 MySQL 中显示为“数组”

> ID：11012384
> 
> 赞同：-1
> 
> 时间：2012-06-13T09:52:38.230
> 
> 标签：php, mysql, arrays

[网站。](http://comfyshoulderrest.com/guestvibe/index.php)

这感觉像是一个常见问题，但对 Google 来说却是一个难题！

正如代码中的注释中所解释的，插入该值以前不是问题，但是当我在`INSERT`其下方添加其他查询时停止工作。

```
$user = $_POST['name'];
$night = $_POST['club'];
$query = mysql_query("SELECT day FROM nights WHERE name = '$night'");
$email = $_POST['email'];

while ($row = mysql_fetch_assoc($query)) {

    $date = getFullDateString($row['day']);
    $date2 = getDateString($row['day']);

}

// this one previously worked but now enters into the database with $user as "Array"
mysql_query("INSERT INTO guestlists (guest, night, date) VALUES('$user', '$night', '$date') ") or die(mysql_error());

$guest1 = $_POST['name1'];
$guest2 = $_POST['name2'];

// these were added later and work fine but seem to have had an effect on the query above
mysql_query("INSERT INTO guestlists (guest, night, date) VALUES('$guest1', '$night', '$date') ") or die(mysql_error());
mysql_query("INSERT INTO guestlists (guest, night, date) VALUES('$guest2', '$night', '$date') ") or die(mysql_error());

foreach ($_POST as $key){
    if (is_array($key)){
        foreach ($key as $key2 => $value){
            mysql_query("INSERT INTO guestlists (guest, night, date) VALUES('$value', '$night', '$date') ") or die(mysql_error());

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:58:05.293

在您的网站中，您有：

```
<input class='input' type='text' name='name["+currentArrayNum+"]' value='' /> 
```

生成表单。`name[...]`参数最终在 php 中，因为`$_POST['name']`它将是一个数组。如果您将其强制为字符串，则该字符串将为`Array`. 因此`$user`，使用 , 对它进行迭代并`foreach`处理每个名称。

另外，请阅读sql注入！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:11:47.783

您应该将访客 HTML 输入重命名为，`guests[]`而不是`name`再次使用。您有命名冲突。

您需要在您的 javascript 代码中解决此问题：

```
var name = $("<p><input class='input' type='text' name='guests[]' value='' /></p>"); 
```

在您的 HTML 代码中：

```
<input class="input" type="text" name="guests[]" /> 
```

之后，您的 PHP 代码应将 guest 变量作为数组处理：

```
$guests = $_POST['guests'];

foreach ($guests as $guest)
{
    mysql_query("INSERT INTO guestlists (guest, night, date) VALUES('$guest', '$night', '$date') ") 
    or die(mysql_error());
} 
```

请注意，您不需要 go `guests[1]`,`guests[2]`等`guests[3]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:58:07.273

您的页面上有一些 Javascript 正在插入如下所示的表单字段：

```
<input class="input" type="text" name="name[5]" value=""> 
```

该`name="name[5]"`部分是导致您出现问题的原因 -`$_POST['name']`提交时它会变成一个数组。您需要重构该代码。

# xml - 使用命令行工具“缩小”XML 的简洁方法？

> ID：11012388
> 
> 赞同：1
> 
> 时间：2012-06-13T09:52:43.853
> 
> 标签：xml, build-automation

在我的项目中，我有一堆用于用户界面和字符串翻译的 XML 文件，每个文件都有以下结构：

```
<?xml version="1.0" encoding="UTF-8" ?>
<messages>
    <message id="x">
        <!-- Text node or arbitrary XHTML markup in here -->
    </message>
    <message id="y">
        <!-- Text node or arbitrary XHTML markup in here -->
    </message>
    <message id="z">
        <!-- Text node or arbitrary XHTML markup in here -->
    </message>
    ...
</messages> 
```

作为我构建过程的一部分，我想将这些文件“缩小”为一个 XML 文件，从而每个`<message>`标签及其所有子标签都嵌入在一个`<messages>`标签中。

我目前的解决方案是使用 grep 从每个文件中提取 XML 序言、打开消息标记和关闭消息标记，并将结果连接到一个新文件，在连接 XML 序言和打开消息之后，最后连接关闭消息标签。这个解决方案......相当混乱且容易出错。

那么，我如何使用任何命令行 XML 工具来自动化这个过程呢？我可以使用 xmlpatterns 和/或 XSL 转换之类的东西吗？

附带问题：我将如何验证每个`<message>`标签都有一个 ID 属性，并且最终文档中的所有 ID 属性值都是唯一的？我知道我可以通过 DTD 完成第一部分，但第二部分是否也在 DTD 领域中，还是我需要做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:31:18.910

经过一些研究和实验，我想出了以下解决方案：

首先，我创建了一个 XML，其中包含我想要组合在一起的所有 XML 文件的列表：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="merge-messages.xsl"?>
<bundles>
    <bundle>file1.xml</bundle>
    <bundle>file2.xml</bundle>
    <bundle>file3.xml</bundle>
    ...
</bundles> 
```

然后我编写了一个 XSL 转换，`<message>`从索引文件中列出的每个文件中选择标签：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="no" indent="yes"/>

    <xsl:template match="/bundles">
        <messages>
            <xsl:apply-templates select="document(bundle)/messages/message"/>
        </messages>
    </xsl:template>

    <xsl:template match="message">
        <xsl:copy-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

我在我的项目中使用了 Qt，而 Qt 恰好包含一个名为 xmlpatterns 的工具，它可以执行 XSL 转换。因此，我能够在构建过程中包含以下命令，并在每次构建时自动“缩小”我的 XML 文件。

```
xmlpatterns merge-messages.xsl messages-index.xml -output messages.xml 
```

# actionscript-3 - 将变量引用传递给函数

> ID：11012390
> 
> 赞同：0
> 
> 时间：2012-06-13T09:52:50.243
> 
> 标签：actionscript-3

我有图像数组，我需要循环抛出它们以获取 url 并通过此函数**loadImage**加载它们，该函数工作正常并加载图像，当我将图像添加到它时，我的问题与 Movieclip**块**添加到循环中的最后一个影片剪辑？

```
var relatedJSON = JSON.decode(e.target.data);
    var relatedStories = relatedJSON.stories;
    if(relatedStories.length > 0){
        for(var j:Number=0;j<relatedStories.length;j++){
            if(relatedStories[j].yahki_thumb){
                var one = j+1;
                var block = related_stories.getChildByName('related_stories_block'+one);
                // load the image
                loadImage({
                    path:relatedStories[j].yahki_thumb,
                    success:function(e:Event,my_loader:Loader)
                    {
                        my_loader.width = this[block].width;
                        my_loader.height = this[block].height;
                        this[block].img.addChild(my_loader);
                    },
                    error:function(e:Event)
                    {
                        // error
                        echo('error to load an image');
                    }
                });
            }
        }
        // replay button event
        //replay
    }else{
        // error
        echo('no related stories');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:02:33.200

在循环内试试这个：

```
 var that:* = this;
   (function(block:*):void{
       loadImage({
                path:relatedStories[j].yahki_thumb,
                success:function(e:Event,my_loader:Loader)
                {
                    my_loader.width = that[block].width;
                    my_loader.height = that[block].height;
                    that[block].img.addChild(my_loader);
                },
                error:function(e:Event)
                {
                    // error
                    echo('error to load an image');
                }
            });
   })(block); 
```

由于加载是异步的，因此在调用成功函数时，`block`值已经具有`related_stories.getChildByName('related_stories_block'+relatedStories.length)`值。这就是原因，元素被添加到最后`MovieClip`。

# php - 当 foreach 循环对变量进行时 PHP 函数错误处理和返回

> ID：11012393
> 
> 赞同：1
> 
> 时间：2012-06-13T09:53:09.710
> 
> 标签：php

****关于如何在 php 面向对象编码中处理此类问题的问题/困惑 ****

我有客户类，我需要为客户暂停服务，但是当客户有待处理的服务工作类型时，我需要为调用函数返回一个 false 来执行错误处理（我不能在这里这样做，因为它可能是电子邮件、输出或 html）

但是我很困惑如何处理这个问题，就像使用下面的代码一样，它只会在我猜的 foreach 循环的最后一个条件下返回 false，关于如何从编码的角度处理这个问题的任何想法

```
 /**
   * return false on failier 
   * Customer suspend all services for this customer
   * 
   */
  public function suspendServices(){

    $pending=false; 

    foreach ($this->services() as $service) {

    $pending = $service->hasPendingWorktypes();

    if($pending === true) {
        return false;
    }   
    $service->state()->changeTo(8);  

    }//end of foreach services 

  }//end of function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:12:55.607

Exceptions 非常适合这项工作。然后，调用服务的业务方法可以继续有效地处理该部分以获得正确的结果。

```
public function suspendServices(){

    $pending=false; 

    foreach ($this->services() as $service) {

    $pending = $service->hasPendingWorktypes();

    if($pending === true) {
        throw new PendingExcpetion(); //Throw the exception
    }   
    $service->state()->changeTo(8);  

    }//end of foreach services 
} 
```

# objective-c - 摆脱 JSON 变量符号 () [] {} for ObjectiveC 变量

> ID：11012395
> 
> 赞同：0
> 
> 时间：2012-06-13T09:53:14.890
> 
> 标签：objective-c, xcode, json

我正在尝试通过 -JSON 代码从 TableWeb 中“选择”信息

在 xCode 中，当我“NSLog”时，它看起来像这样的信息：我试图摆脱那些符号 () []。我怎样才能只接收变量值？谢谢你们

```
2012-06-13 12:24:54.572 Gym31Vads[5628:16103] (
    204
)

2012-06-13 12:33:33.911 Gym31Vads[5628:16103] (
    204
)

2012-06-13 12:35:12.830 Gym31Vads[5628:16103] (
    204
) 
```

这是我在网上的 JASON 代码：

```
$var_email=$_POST['mail'];
$query = mysql_query(" SELECT `pk` FROM `adidas` WHERE `mail` = ('{$var_email}') LIMIT 1);
$users = array();
while ($row = mysql_fetch_array($query))
{ 
    $users = array($row['pk']);
}
echo json_encode($users); 
```

这是ObjectiveC代码：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];        
NSString * urlString = [NSString stringWithFormat:@"myURLselectPK.php"];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString*paramDataString=[NSString stringWithFormat:@"mail=%@",txt_mail.text];
NSData*paramData=[paramDataString dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody:paramData];
NSURLResponse *response;
NSError *error;

NSData *aData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSURL*url=[NSURL URLWithString:@"myURLselectPK.php"];

NSData*data=[NSData dataWithContentsOfURL:url];

NSError*err=nil;
NSMutableDictionary*jsondict=[NSJSONSerialization JSONObjectWithData:aData options:kNilOptions error:&err];

NSMutableArray*json=(NSMutableArray*)[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&err];

NSLog(@"%@",jsondict);

NSError *error2; 
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsondict 
                                                       options:NSJSONWritingPrettyPrinted 
                                                         error:&error2];
NSString*Str=[[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSString*str_screen=[NSString stringWithFormat:@"%@",Str];

lbl_pk_check.text=[NSString stringWithFormat:@"%@",Str]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:11:18.513

`NSLog`在您的变量周围显示 ( ) 以表示它是您正在打印的数组。如果您只想显示数组内部的值，则必须首先获取它，无论是使用字典时按键还是打印数组时按索引。

无论如何，您似乎对您所展示的内容过于关注`NSLog`。显示的不是变量的实际值，而只是要在日志中显示的字符串表示形式。实际上，您的变量不会有任何 ( ) 或 [ ] 符号，而只有 204 包含在数组容器中。

附带说明一下，您正在打印`NSMutableDictionary *jsondict`变量，但实际上您内部有一个数组。您正在使用的 JSON 反序列化方法返回了一个（很可能）不可变数组，您应该将其分配给`NSArray *`变量。如果你想要一个可变对象，你必须调用`[NSMutableArray arrayWithArray:]`方法，你不能简单地将一个对象转换为另一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:50:29.400

NSLog 是一个诊断工具。对于如何使用说明符格式化对象，您没有任何选择`%@`。如果您想要其他格式，则需要自己构建字符串。例如，要记录不带括号的数组的内容：

```
NSMutableString* logString = [[NSMutableString alloc] init];
for (id anObject in myArray)
{
    if ([logString length] > 0)
    {
        [logString appendString: @", "]; 
    }
    [logString appendString: [anObject description]];
}
NSLog(%@", lofString); 
```

你不能对这些东西做任何事情：

```
2012-06-13 12:35:12.830 Gym31Vads[5628:16103] 
```

一点也不。

# php - 任何加快价格索引器的方法

> ID：11012397
> 
> 赞同：0
> 
> 时间：2012-06-13T09:53:27.740
> 
> 标签：php, magento

在我们维护的一家商店中，价格指数更新需要很长时间。在分析过程时，我注意到捆绑价格索引器使用的查询需要 40 秒才能执行，如果您问我，这太长了。这个查询将重复大约 8 次，所以难怪索引问题为什么这么慢。

有什么我可以做的吗。如果通过解释分析查询并且没有给出可以进行的优化。还有其他选择吗？我很想听听他们的意见。

查询如下所示：

```
SELECT `e`.`entity_id`, 
       `cg`.`customer_group_id`, 
       `cw`.`website_id`, 
       IF(IF(Ifnull(tas_tax_class_id.value_id, -1) > 0, tas_tax_class_id.value, 
             tad_tax_class_id.value) IS NOT NULL, IF( 
       Ifnull(tas_tax_class_id.value_id, -1) > 0, tas_tax_class_id.value, 
                                                  tad_tax_class_id.value), 0) 
       AS
       `tax_class_id`, 
       1 
       AS `price_type`, 
       IF(IF(ta_special_from_date.value IS NULL, 1, IF( 
             ta_special_from_date.value <= cwd.website_date, 1, 0)) > 0 
          AND IF(ta_special_to_date.value IS NULL, 1, IF( 
                  ta_special_to_date.value >= cwd.website_date, 1, 0)) > 0 
          AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
              tas_special_price.value, 
                  tad_special_price.value) > 0 
          AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
              tas_special_price.value, 
                  tad_special_price.value) < 100, IF( 
       Ifnull(tas_special_price.value_id, -1) > 0, tas_special_price.value, 
                                                  tad_special_price.value), 0) 
       AS
       `special_price`, 
       tp.min_price 
       AS `tier_percent`, 
       IF(IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, 
          tad_price.value) IS
          NULL, 0, IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, 
                   tad_price.value)) 
       AS `orig_price`, 
       IF(IF(IF(ta_special_from_date.value IS NULL, 1, IF( 
                   ta_special_from_date.value <= cwd.website_date, 1, 0)) > 0 
             AND IF(ta_special_to_date.value IS NULL, 1, IF( 
                     ta_special_to_date.value >= cwd.website_date, 1, 0)) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) < 100, 
          IF( 
             Ifnull(tas_special_price.value_id, -1) > 0, 
          tas_special_price.value, 
                                                     tad_special_price.value), 0 
          ) > 0, 
       Round( 
       IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, tad_price.value) 
       * ( IF( 
       IF 
       (ta_special_from_date.value IS NULL, 1, IF( 
             ta_special_from_date.value <= 
             cwd.website_date, 1, 0)) > 0 
             AND IF(ta_special_to_date.value IS NULL, 1, IF( 
                     ta_special_to_date.value >= cwd.website_date, 1, 0)) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) < 100, 
           IF( 
             Ifnull(tas_special_price.value_id, -1) > 0, 
           tas_special_price.value, 
                                                     tad_special_price.value), 0 
           ) / 100 
       ), 4), IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, 
              tad_price.value)) 
                       AS `price`, 
       IF(IF(IF(ta_special_from_date.value IS NULL, 1, IF( 
                   ta_special_from_date.value <= cwd.website_date, 1, 0)) > 0 
             AND IF(ta_special_to_date.value IS NULL, 1, IF( 
                     ta_special_to_date.value >= cwd.website_date, 1, 0)) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) < 100, 
          IF( 
             Ifnull(tas_special_price.value_id, -1) > 0, 
          tas_special_price.value, 
                                                     tad_special_price.value), 0 
          ) > 0, 
       Round( 
       IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, tad_price.value) 
       * ( IF( 
       IF 
       (ta_special_from_date.value IS NULL, 1, IF( 
             ta_special_from_date.value <= 
             cwd.website_date, 1, 0)) > 0 
             AND IF(ta_special_to_date.value IS NULL, 1, IF( 
                     ta_special_to_date.value >= cwd.website_date, 1, 0)) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) < 100, 
           IF( 
             Ifnull(tas_special_price.value_id, -1) > 0, 
           tas_special_price.value, 
                                                     tad_special_price.value), 0 
           ) / 100 
       ), 4), IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, 
              tad_price.value)) 
                       AS `min_price`, 
       IF(IF(IF(ta_special_from_date.value IS NULL, 1, IF( 
                   ta_special_from_date.value <= cwd.website_date, 1, 0)) > 0 
             AND IF(ta_special_to_date.value IS NULL, 1, IF( 
                     ta_special_to_date.value >= cwd.website_date, 1, 0)) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) < 100, 
          IF( 
             Ifnull(tas_special_price.value_id, -1) > 0, 
          tas_special_price.value, 
                                                     tad_special_price.value), 0 
          ) > 0, 
       Round( 
       IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, tad_price.value) 
       * ( IF( 
       IF 
       (ta_special_from_date.value IS NULL, 1, IF( 
             ta_special_from_date.value <= 
             cwd.website_date, 1, 0)) > 0 
             AND IF(ta_special_to_date.value IS NULL, 1, IF( 
                     ta_special_to_date.value >= cwd.website_date, 1, 0)) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) > 0 
             AND IF(Ifnull(tas_special_price.value_id, -1) > 0, 
                 tas_special_price.value, 
                     tad_special_price.value) < 100, 
           IF( 
             Ifnull(tas_special_price.value_id, -1) > 0, 
           tas_special_price.value, 
                                                     tad_special_price.value), 0 
           ) / 100 
       ), 4), IF(Ifnull(tas_price.value_id, -1) > 0, tas_price.value, 
              tad_price.value)) 
                       AS `max_price`, 
       IF(tp.min_price IS NOT NULL, Round(IF(Ifnull(tas_price.value_id, -1) > 0, 
                                          tas_price.value, tad_price.value) 
                                                                       - ( 
                                          IF(Ifnull(tas_price.value_id, -1) > 0, 
                                          tas_price.value, tad_price.value) * ( 
                                          tp.min_price / 100 ) ), 4), NULL) 
       AS
       `tier_price`, 
       IF(tp.min_price IS NOT NULL, Round(IF(Ifnull(tas_price.value_id, -1) > 0, 
                                          tas_price.value, tad_price.value) 
                                                                       - ( 
                                          IF(Ifnull(tas_price.value_id, -1) > 0, 
                                          tas_price.value, tad_price.value) * ( 
                                          tp.min_price / 100 ) ), 4), NULL) 
       AS
       `base_tier` 
FROM   `catalog_product_entity` AS `e` 
       CROSS JOIN `customer_group` AS `cg` 
       CROSS JOIN `core_website` AS `cw` 
       INNER JOIN `core_store_group` AS `csg` 
               ON csg.group_id = cw.default_group_id 
       INNER JOIN `core_store` AS `cs` 
               ON cs.store_id = csg.default_store_id 
       INNER JOIN `catalog_product_website` AS `pw` 
               ON pw.product_id = e.entity_id 
                  AND pw.website_id = cw.website_id 
       INNER JOIN `catalog_product_index_website` AS `cwd` 
               ON cw.website_id = cwd.website_id 
       LEFT JOIN `catalog_product_index_tier_price` AS `tp` 
              ON tp.entity_id = e.entity_id 
                 AND tp.website_id = cw.website_id 
                 AND tp.customer_group_id = cg.customer_group_id 
       INNER JOIN `catalog_product_entity_int` AS `tad_status` 
               ON tad_status.entity_id = e.entity_id 
                  AND tad_status.attribute_id = 80 
                  AND tad_status.store_id = 0 
       LEFT JOIN `catalog_product_entity_int` AS `tas_status` 
              ON tas_status.entity_id = e.entity_id 
                 AND tas_status.attribute_id = 80 
                 AND tas_status.store_id = cs.store_id 
       LEFT JOIN `catalog_product_entity_int` AS `tad_tax_class_id` 
              ON tad_tax_class_id.entity_id = e.entity_id 
                 AND tad_tax_class_id.attribute_id = 81 
                 AND tad_tax_class_id.store_id = 0 
       LEFT JOIN `catalog_product_entity_int` AS `tas_tax_class_id` 
              ON tas_tax_class_id.entity_id = e.entity_id 
                 AND tas_tax_class_id.attribute_id = 81 
                 AND tas_tax_class_id.store_id = cs.store_id 
       INNER JOIN `catalog_product_entity_int` AS `ta_price_type` 
               ON ta_price_type.entity_id = e.entity_id 
                  AND ta_price_type.attribute_id = 470 
                  AND ta_price_type.store_id = 0 
       LEFT JOIN `catalog_product_entity_decimal` AS `tad_price` 
              ON tad_price.entity_id = e.entity_id 
                 AND tad_price.attribute_id = 60 
                 AND tad_price.store_id = 0 
       LEFT JOIN `catalog_product_entity_decimal` AS `tas_price` 
              ON tas_price.entity_id = e.entity_id 
                 AND tas_price.attribute_id = 60 
                 AND tas_price.store_id = cs.store_id 
       LEFT JOIN `catalog_product_entity_decimal` AS `tad_special_price` 
              ON tad_special_price.entity_id = e.entity_id 
                 AND tad_special_price.attribute_id = 61 
                 AND tad_special_price.store_id = 0 
       LEFT JOIN `catalog_product_entity_decimal` AS `tas_special_price` 
              ON tas_special_price.entity_id = e.entity_id 
                 AND tas_special_price.attribute_id = 61 
                 AND tas_special_price.store_id = cs.store_id 
       LEFT JOIN `catalog_product_entity_datetime` AS `ta_special_from_date` 
              ON ta_special_from_date.entity_id = e.entity_id 
                 AND ta_special_from_date.attribute_id = 62 
                 AND ta_special_from_date.store_id = 0 
       LEFT JOIN `catalog_product_entity_datetime` AS `ta_special_to_date` 
              ON ta_special_to_date.entity_id = e.entity_id 
                 AND ta_special_to_date.attribute_id = 63 
                 AND ta_special_to_date.store_id = 0 
       INNER JOIN `cataloginventory_stock_status` AS `ciss` 
               ON ciss.product_id = e.entity_id 
                  AND ciss.website_id = cw.website_id 
WHERE  ( e.type_id = 'bundle' ) 
       AND ( IF(Ifnull(tas_status.value_id, -1) > 0, tas_status.value, 
             tad_status.value) = 1 ) 
       AND ( ta_price_type.value = 1 ) 
       AND ( e.entity_id IN( 99, 228, 248, 249, 
                             251, 252, 257, 263, 275 ) ) 
       AND ( ciss.stock_status = 1 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:30:05.487

这是一个解释如何减少特定查询的线程。我没有花时间亲自尝试，当我这样做时，我会寻求将修复作为一个模块，但更快的方法是将文件的副本放在“代码/本地”文件夹中。

[http://www.magentocommerce.com/boards/viewthread/38818/P90/#t367525](http://www.magentocommerce.com/boards/viewthread/38818/P90/#t367525)

# c++ - 使用模板创建类的新实例，不知道如何处理错误

> ID：11012398
> 
> 赞同：0
> 
> 时间：2012-06-13T09:53:31.897
> 
> 标签：c++, templates, pointers, binary-search-tree, dereference

我会尽量保持代码简短。

我正在尝试使用模板制作**二进制****搜索**树（**简称**BST ）。

 **在我的添加功能中，我遇到了一个错误，我确定我以某种方式滥用了模板

由于模板，所有这些代码都在一个 .h（头文件）文件中。

**编辑：** const Type & 错误是因为我摆弄，它实际上不在我编译的代码中，而是来自上一个关于堆栈溢出的问题

```
template <typename Type>
class BSTNode {   // Binary Search Tree nodes
  private:
    int key;      // we search by key, no matter what type of data we have
    Type data;
    BSTNode *left;
    BSTNode *right;

  public:
    BSTNode (int, Type);     // key, data
    bool add (int, Type);
}; 
```

添加功能：

```
template <typename Type>
bool BSTNode<Type>::add(int newKey, Type newData) {
  if (newKey < this->key) {
    if (left == NULL) {
      this->left = new BSTNode<Type>(int newKey, Type newData);
    }
  } else {
    this->right = new BSTNode<Type>(int newKey, Type newData);
  }
  return false;
} 
```

这是我得到错误的地方：

```
this->left = new BSTNode<Type>(int newKey, Type newData); 
```

int 之前的预期主表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:55:57.367

您不是专门滥用模板，而是滥用参数！

```
this->left = new BSTNode<Type>(int newKey, Type newData); 
```

应该看起来更像

```
this->left = new BSTNode<Type>(newKey, newData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:55:33.580

它应该`this->left = new BSTNode<Type>(newKey, newData);`没有任何类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:56:12.490

错误很明显：

```
 bool add (int, Type); 
```

对比

```
 bool add(int newKey, const Type &newData) 
```

您应该将类​​定义中的声明更改为：

```
 bool add (int, const Type&); 
```

并从语句中删除类型：

```
 this->right = new BSTNode<Type>(int newKey, Type newData);
 this->right = new BSTNode<Type>(int newKey, Type newData); 
```

应该

```
 this->right = new BSTNode<Type>(newKey, newData);
 this->right = new BSTNode<Type>(newKey, newData); 
```**

# objective-c - 创建一个带有前导零的 NSString 分钟和秒

> ID：11012400
> 
> 赞同：2
> 
> 时间：2012-06-13T09:53:37.573
> 
> 标签：objective-c, string, cocoa, cocoa-touch, formatting

我需要不断更新标签中的播放时间。我得到了`NSTimeInterval currentProgress = self.moviePlayerController.currentPlaybackTime;`返回双值的时间。但我需要显示的格式是“MM:SS”（00:00）。我试过下面的代码

```
NSTimeInterval currentProgress = self.moviePlayerController.currentPlaybackTime;

float min = floor(currentProgress/60);
float sec = round(currentProgress - min * 60); 
```

当进度时间为 10 分 10 秒时，它显示得非常好，如“10:10”。但这里的问题是，如果进度时间是 1 分 7 秒，它会在标签中显示“1:7”。我的预期显示是“01:07”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T10:01:33.850

```
NSString *time = [NSString stringWithFormat:@"%02d:%02d", (int)min, (int)sec]; 
```

尝试这个。应该只是工作！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T10:06:10.780

这应该可以解决问题：

```
int seconds = (int)currentProgress % 60;
int minutes = currentProgress / 60;

NSString *result = [NSString stringWithFormat:@"%02d:%02d", minutes, seconds]; 
```

格式说明符将`%02d`自动用 0 填充，以便该字段*至少有*2 个字符宽。

# linux-kernel - wait_event 和 wake_up 之间的竞争条件

> ID：11012406
> 
> 赞同：2
> 
> 时间：2012-06-13T09:54:04.390
> 
> 标签：linux-kernel, ipc, linux-device-driver, race-condition

我有一个驱动程序想要向用户发送有关状态更改的通知。在当前实现中，它使用 proc 文件系统来执行此操作。读取过程循环`read()`到 proc 文件系统。直到内核得到一个导致函数中断的`read()`块。这是基本代码（删除了所有不需要的混乱）：`wait_event_interruptible()``write_new_data()``call wake_up_interruptible()`

```
static int flag=0;
DECLARE_WAIT_QUEUE_HEAD(info_wq);

//user process call read() on /proc/myfile to get to this function
int my_proc_read (struct file *filp, char *buf, size_t count, loff_t *pos)
{
    wait_event_interruptible(info_wq, flag != 0);
    flag = 0;

    //copy buffers to user
    return 0;
}

//when an interrupt comes it schedules this function on the systems' work queue
void write_new_data ()
{
    //fill buffer with data
    flag = 1;
    wake_up_interruptible(&info_wq);
} 
```

现在考虑以下流程：

1.  用户进程调用`read()`，然后等待。
2.  中断发生 ->`write_new_data()`被调用。写入数据和调用`wake_up_interruptible()`。
3.  `read()`被唤醒，读取数据但进程没有重新运行读取（没有计划运行，因为下一次中断而没有到达它......）。
4.  中断发生 ->`write_new_data()`再次触发，调用`wake_up_interruptible()`但没有等待线程正在等待......
5.  进程调用读取和阻塞。

注意：这一切都发生在单处理器系统上。而且只有一个线程读取和一个线程写入新数据。

如何避免错过第二次中断？（一种解决方案是使用 netlink 套接字，但我想知道是否有办法在 /proc 土地上做到这一点）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T11:10:59.487

丹，这是 wait_event_interruptible 的代码：

```
#define wait_event_interruptible(wq, condition)             \
({                                  \
    int __ret = 0;                          \
    if (!(condition))                       \
        __wait_event_interruptible(wq, condition, __ret);   \
    __ret;                              \
}) 
```

如果在 "if (!(condition))" 和 "__wait_event_interruptible" 之间发生中断，则将发生睡眠并且读取过程将被阻塞，直到发生另一个中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T11:04:03.347

由于在调用`wait_event_interruptible`and之间可能会发生中断`flag = 0`，因此它会以不希望的方式影响`flag`变量。

请注意，即使在 UP 机器上，内核也可能是抢占式的，具体取决于配置，因此代码会受到影响。

另外，我建议不要使用简单的“int”标志。相反，您应该使用`atomic_t`和`atomic_dec/inc_*`操作。查看内核内部完成的实现，它的作用与您在此处所做的类似。

关于问题本身：

如果您查看代码，`wait_event_interruptible`您会发现如果条件为真，睡眠不会发生 - 所以您的问题不是问题。

# ruby-on-rails - 在 Ruby on Rails 应用程序中设置 json max_nesting 选项

> ID：11012407
> 
> 赞同：2
> 
> 时间：2012-06-13T09:54:10.220
> 
> 标签：ruby-on-rails, ruby, json

我正在将 Ruby on Rails 应用程序从 3.0 迁移到 3.1，并且在更改 JSON 后端时遇到了一些问题。

该行`ActiveSupport::JSON.decode(some_variable)`给了我 MultiJson::DecodeError `nesting of 20 is too deep`。我试图解码的变量确实是严重嵌套的（最多 29 个级别）。

最大嵌套级别应该可以通过`:max_nesting`选项（[使用 HTTParty 检索 JSON 时出现“嵌套太深”错误](https://stackoverflow.com/questions/9917666/nesting-too-deep-error-while-retrieving-json-using-httparty)）进行更改，但这似乎不起作用。

两者都`ActiveSupport::JSON.decode(some_variable, :max_nesting => false)`导致`ActiveSupport::JSON.decode(some_variable, :max_nesting => 100)`相同的错误。

有没有办法传递`max_nesting`选项或将其设置为应用程序范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:22:33.487

`ActiveSupport::JSON`使用 multi-json gem 进行编码和解码操作。multi-json gem 支持多种引擎，支持的选项会有所不同。

您可以通过运行检查您正在使用的引擎

```
require 'multi_json'
puts MultiJson.engine 
```

我的是，`MultiJson::Adapters::Yajl`但其他选择也是可能的。Multi-json 似乎不会以相同的方式将选项传递给每个引擎，所以我建议直接使用 JSON-gem。

如果您使用的是 json-gem，您可以跳过 ActiveSupport-chain 并使用[JSON.parse](http://flori.github.com/json/doc/classes/JSON.html#method-i-parse)解析您的数据，您可以`:max_nesting`直接将选项传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:57:26.673

试试这个猴子补丁

```
module JSON
  class << self
    def parse(source, opts = {})
      opts = ({:max_nesting => 100}).merge(opts)
      Parser.new(source, opts).parse
    end
  end
end 
```

# jquery - 使用可在 html 文件中排序的 jquery 重新排序现有 div

> ID：11012412
> 
> 赞同：0
> 
> 时间：2012-06-13T09:54:24.430
> 
> 标签：jquery, html

我有像这样的html文件

```
<div id="sortable"><div id="div1">Item 1</div> <div id="div2">Item 2 </div></div> 
```

我在 div id "sortable" 上应用了 jquery sortable，我成功地对 div 进行了排序并得到了订单。现在我还必须将订单保存在 html 文件中。帮我保存订单并根据订单重新设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:56:46.870

`#sortable`您可以通过调用直接从 div 中“获取”HTML`$('#sortable').html()`

# android - 带索引字母的字符串资源

> ID：11012414
> 
> 赞同：5
> 
> 时间：2012-06-13T09:54:45.060
> 
> 标签：android

我在任何地方都没有找到它，所以我问。如何编写具有上索引的字符串？最好在资源方面。例如，我想将平方米写为 m2，其中 2 是上索引。

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-13T10:04:25.020

如果仅适用于 ² 和 ³：这些可在 UTF 00B2 resp 中获得。00B3 所以你可以只使用实体符号：`The area is 2 m\u00B2.`. 如果您的键盘支持，或者直接使用该字符，或者将其复制并粘贴到文件中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T09:57:46.137

试试这个

```
M<sup>2</sup> 
```

或者你可以使用`textview.setText(Html.fromHtml("M<sup>2</sup>"));`

**编辑：**

这是我的 string.xml

```
<string name="hello">Hello World<sup>2</sup></string> 
```

# java - 在小程序中显示字符串的反转

> ID：11012417
> 
> 赞同：-2
> 
> 时间：2012-06-13T09:54:54.260
> 
> 标签：java, applet

我是Java编程新手。我需要编写一个小程序来显示字符串的反转。我应该显示每个字符都在飞行并以相反的顺序排列。有人可以指导我如何做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:03:16.803

把你的问题（作业？）分解成几个步骤：

*   你知道如何制作小程序吗？如果没有，请搜索“java小程序教程”
*   你知道如何显示文本吗？如果没有，请查看 JLabel 文档
*   你知道如何随着时间的推移改变事物吗？如果不是，请查看 javax.swing.Timer 文档（注意有多个名为 Timer 的类，获取 Swing 一个）
*   想要获得精美的动画吗？如果是，请搜索“java 自定义绘画教程”（或者查看 JavaFX，这应该会使动画更容易）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:05:22.670

```
 import javax.swing.*;
     import java.awt.BorderLayout;
     import java.awt.event.*;

     public class ShowReverse extends JApplet implements ActionListener {
     private JLabel reverseLabel;
     private JTextField inputField;
      private JButton clickButton;

      // Kicks off applet
      public void init() {
      reverseLabel = new JLabel();
     inputField = new JTextField();
      clickButton = new JButton("Reverse");

     // Add event listener to button
      clickButton.addActionListener(this);

     // Add the input field at the top, label in the middle and button at bottom
      add(inputField, BorderLayout.NORTH);
      add(reverseLabel, BorderLayout.CENTER);
       add(clickButton, BorderLayout.SOUTH);
        }

       // When button is clicked, it performs this action.
       // Set the label to the result of our reverse function.
        public void actionPerformed(ActionEvent e) {
       if (e.getSource() == clickButton) {
         reverseLabel.setText( reverse(inputField.getText() ));

           }
       }

      // reverses a string by simply looping through the characters backwards
        // and builds the string.
          private String reverse(String text) {
             if (text.length() > 1) {
               String reversed = "";

                for (int i = text.length() - 1; i >= 0; i--) {
               reversed += Character.toString(text.charAt(i));
               }

            return reversed;

           }
           else { return text; }

         }
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:05:21.607

I think if you need flying characters, you should use Graphics instead of just text. You represent each letter as image or set of figures and then swap due to reversing algorithm.

But, first of all you need to understand how to draw in applet. Hope this article helps [http://www.wikihow.com/Use-Graphics-in-a-Java-Applet](http://www.wikihow.com/Use-Graphics-in-a-Java-Applet)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T18:32:55.117

String 类不能有 Reverse 方法，因为它是不可变的。所以我们可以使用 StringBuffer 来修改给定的 String。在这里我们可以将 t1(TextField) 的给定输入反转为 t2(TextField)。但是 textfield 方法 setText(String) 接受一个必须在 String 中的参数，然后我们可以使用 toString() 方法将 StringBuffer 值转换为 String 值。

显示这个例子：

```
 import java.awt.*;

    import java.applet.Applet;

    import java.awt.event.*;

    public class rev extends Applet implements ActionListener

    {

    Button b;
    TextField t,t1;

    public void init()
    {
        b=new Button("Reverse");

        Label l=new Label("enter a your Name");
        add(l);
        t=new TextField(" ",15);
        add(t);
        Label l1=new Label("The reverce ");
        add(l1);
        t1=new TextField(" ",15);
        add(t1);
        b.addActionListener(this);
        add(b);
        setLayout(new FlowLayout(FlowLayout.LEADING));
    }
    public void actionPerformed(ActionEvent e)
    {
        String sa=t.getText();
        StringBuffer a = new StringBuffer(sa);
        t1.setText(t.getText()+"  "+a.reverse().toString());

    }
   } 
```

# sencha-touch - Sencha：将图像设置为面板的背景

> ID：11012423
> 
> 赞同：2
> 
> 时间：2012-06-13T09:55:22.263
> 
> 标签：sencha-touch, extjs, panel, background-image

我想将 sencha 中的背景图像设置为面板：

**编辑**

```
Ext.define('components.NewPanel', {
extend: 'Ext.Panel',
style: {
    background:'#ffffff',
    backgroundImage: 'url(icon.PNG)',
    backgroundSize: '10% 85%',
    backgroundRepeat: 'no-repeat',
    backgroundPosition: 'bottom left',
},

initialize: function () {

    var newIcon=Ext.create('Ext.Img', {
        src: "image1.png",
        cls: "img",
        scope: this,
        listeners: {
                    tap: {
                        fn :function (img, evt) {
                            Ext.Msg.alert("This is a test");
                        },// function
                    }// tap
        }//listeners
    });//create
    this.add([newIcon]);
},
config: {
    layout: {
        type: 'fit'
    }
}

}); 
```

但什么都没有显示。该怎么办？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-20T08:18:09.280

I had to set the background of the panel body to transparent, because otherwise that white background prevented my image from showing. Try adding this:

```
bodyStyle: 'background: transparent;', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:36:12.700

你可以这样做

```
 Ext.define('MyApp.view.WelcomePanel', {
    extend: 'Ext.form.Panel',
    alias: 'widget.WelcomePanel',

    config: {
        style:"background-color:white;",
        itemId:'WelcomePanel',
        fullscreen:true,
        layout: 'card',
        html:'<div align="center" style="background-color:white;" ><img src="http://src.sencha.io/http://yoursite.com/splash.png" ></div>',
        items: [
                {xtype:'MainPanel', docked:'top'},

        ]
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-08T13:29:23.330

使用`bodyStyle`配置

```
Ext.create('Ext.panel.Panel', {
        border: false,
        bodyStyle: {
        'background': 'url(wall.jpg) !important'
         }
        //another config
        ....
    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:28:35.693

试试这个@bi，我们开始吧！

```
var panel = new Ext.Panel({
    id:'pnl1',
    fullscreen:true,
    style: {
        background:'#ffffff',
        backgroundImage: 'url(path/image/your_image.PNG)',
        backgroundSize: '100% 100%',
        backgroundRepeat: 'no-repeat',
        backgroundPosition: 'bottom left',
    },
    html: '<img class="logo" src="path/image/another_image_yours.jpg"/>',
    layout: {
        type:'card',
    },
    items:[]
}) 
```

创建此面板，之后您可以使用它。尝试创建单个并首先查看您的图像。

`backgroundSize: x y`是图像的大小，是图像`backgroundPosition: x y`的位置。

我希望能帮助你。：） 再见

# javascript - 一个功能中断另一个。可能吗？

> ID：11012424
> 
> 赞同：0
> 
> 时间：2012-06-13T09:55:24.283
> 
> 标签：javascript

是否可以通过另一个功能停止一个功能？

我想要这样的东西：

```
 function foo()
 {
   bar();
   /*if is ok, then continue, else break*/
 }

 function bar()
 {
   if(!/**condition**/) stop foo();
 } 
```

*我知道这可以通过使用这样的东西来实现：*

```
 function foo()
  {
    if(!bar()) return;
  } 
```

**但也许有更好的方法？**

样本 ：

```
 var dk = new function() {
   this.doSomething() {
     this.em("some_id") || return;
   };

    this.em(data) { 
      return document.getElementById(data);
    };
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:59:57.510

在您的函数内部，您无法告诉调用函数停止执行。

您建议的第二个版本是实现此行为的常见做法 - 如果函数成功则让函数返回`true`，如果不成功`false`，则让调用函数决定要做什么（即中断其执行）。

另一种方法可能是抛出异常。你应该考虑自己在你的情况下什么可能更有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:01:23.277

我想你已经回答了自己..

`bar()`函数可以进行所有你想要的检查或代码然后它返回`true`或`false`调用函数`foo()`

根据返回的值，您决定是继续执行代码还是停止代码执行。

# java - 没有导航没有例外

> ID：11012425
> 
> 赞同：0
> 
> 时间：2012-06-13T09:55:25.953
> 
> 标签：java, jsf

xhtml 页面中的表单：

```
<h:form>
            <h:selectOneMenu id="gender" required="true"
                requiredMessage="#{msg['field.email.REQUIRED']}"
                value="#{registerController.gender}">
                <f:selectItems value="#{registerController.genders}" var="gender"
                    itemLabel="#{gender}" itemValue="#{gender}"></f:selectItems>
            </h:selectOneMenu>

            <p:commandButton value="Cont"
                action="#{registerController.genderEntered()}" />
            <h:link value="Back" outcome="/view/login.xhtml" />

        </h:form> 
```

注册控制器.java

```
public String genderEntered(){
        return "email.xhtml";
    } 
```

我删除 required="true" 但问题仍然存在。也不例外，但导航不去 email.xhtml

# android - java.net.socketException：协议不支持的地址族

> ID：11012430
> 
> 赞同：0
> 
> 时间：2012-06-13T09:55:36.687
> 
> 标签：android, web-services, socketexception

我创建了一个 android 应用程序：这是我的代码：

```
package com.retailer.client;

 import android.app.Activity;
 import android.os.Bundle;
 import org.ksoap2.SoapEnvelope;
  import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.widget.TextView;

public class RetailerActivity extends Activity {
private static final String SOAP_ACTION = "http://ws.retailer.com/customerData";
private static final String METHOD_NAME = "customerData";
private static final String NAMESPACE = "http://ws.retailer.com";
private static final String URL = "http://10.0.0.55:8085/javaws/services/RetailerWS?wsdl";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);  

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array

        TextView tv = new TextView(this);

        for(int i = 0; i<resultArr.length;i++){
        tv.append(resultArr[i]+"\n\n");
       }
        setContentView(tv);

    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

但是当我调试时它出现了： **05-24 17:46:26.031: D/SntpClient(71): request time failed: java.net.SocketException: Address family not supported by protocol**

它是如何清除的..请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:58:27.877

您是否在 AndroidManifest.xml 中包含了权限？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# java - Google AppEngine 应用程序 (Java) 中用于登录的 Google 帐户和 Facebook 帐户

> ID：11012434
> 
> 赞同：1
> 
> 时间：2012-06-13T09:55:58.773
> 
> 标签：java, facebook, google-app-engine

目前，我的应用程序只允许用户使用他们的谷歌帐户登录。我现在正在允许 Facebook 帐户用于该网站。

由于只有 google 帐户是身份验证方法，因此我使用 UserService 来检查用户是否已登录：

```
 UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser(); 
```

由于我将添加 Facebook 帐户，检查用户是否登录的最佳方法是什么？在谷歌帐户或脸书帐户上？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:58:24.810

Facebook 登录的工作方式与 Google 不同，您需要实现 Facebook 的 OAuth 流程：[https ://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

当用户返回您的站点时，他们将拥有一个`access_token`，您可以使用它来查询 Facebook Graph API。

# iphone - 错误 - 目标 C - '应用程序试图以模态方式呈现活动控制器 我想使用 UIImagePickerController 从 iPad 应用程序的照片库中加载照片。我正在使用以下代码行： -(IBAction)photolibrarypressed:(id)sender{ // / Create window //self.window = [[U 问问题 user425243 问问题 2012-06-13T09:56:03.377 5799 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我想使用 UIImagePickerController 从 iPad 应用程序的照片库中加载照片。我正在使用以下代码行： -(IBAction)photolibrarypressed:(id)sender{ // / Create window //self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; NSLog(@"hi"); // Set up the image picker controller and add it to the view //imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; //[window addSubview:imagePickerController.view]; //UIImagePickerController *picker= [[UIImagePickerController alloc]init]; //picker.delegate = self; //picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; UIImagePickerController *picker= [[UIImagePickerController alloc]init]; picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; picker.delegate = self; UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:picker]; self.popoverController = popover; popoverController.delegate = self; [popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; [self presentModalViewController:picker animated:YES]; //[picker release]; imageView = [[UIImageView alloc] initWithFrame:[window bounds]]; // Set up the image view and add it to the view but make it hidden [window addSubview:imageView]; imageView.hidden = YES; [window makeKeyAndVisible]; } 但是，我收到以下错误： Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present modally an active controller <splitviewdetailviewcontroller: 0="" 1="" 2="" 4="" 404="" 我无法理解。="" 该应用程序属于="" splitview="" 类型，我同时使用了="" webview="" 和="" imageview。所以，当我点击按钮照片库时，我需要进入="" imageview（我想）。="" 有人可以帮我解决问题吗？我对目标="" c="" 很陌生。谢谢。="" 您已经获得了同时运行="" iphone="" ipad="" 的代码。如果您使用的是="" ipad，则应删除该行="" [self="" presentmodalviewcontroller:picker="" animated:yes];="" 如果您使用的是="" 或="" ipod，则应删除该行="" [popovercontroller="" presentpopoverfrombarbuttonitem:sender="" permittedarrowdirections:uipopoverarrowdirectionup="" 或者，如果您想在="" 上运行您的应用程序，请使用="" if="" 语句找出它在哪个设备上运行：="" ([uidevice="" currentdevice].userinterfaceidiom="=" uiuserinterfaceidiompad)="" {="" display="" in="" a="" popover="" for="" the="" permittedarrowdirections:uipopoverarrowdirectionany="" }="" else="" modally="" iphoneobjective-ciosxcodeipad="" 回答="" this="" answer="" is="" useful="" 于="" 2012-06-13t10:17:09.220="" related="" android="" -="" 在="" xmpp="" openfire="" 中从名册中删除一个朋友="" c#="" 将="" dto="" 传递给我的="" viewmodels="" 构造函数以映射属性="" json="" 如何在="" liferay="" portlet="" 中进行会话管理？="" java="" 使用="" esapi="" 时允许百分比符号的模式="" asp.net-mvc-4="" 操作模型，然后在视图中反映它="" matplotlib="" cartopy="" 立体投影的直线穿过杆="" apache-pig="" 在本地模式下运行时在="" pig="" 中设置其他="" jars="" 属性="" 在登录按钮的事件上创建会话变量="" internet="" explorer="" 显示="" 但="" web="" 应用程序仍在运行="" mysql="" 如何在同一行中分组结果：使用="" 的多对多关系="" reference="" php × 1429865="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：11012438
> 
> 赞同：1
> 
> 时间：
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想使用 UIImagePickerController 从 iPad 应用程序的照片库中加载照片。我正在使用以下代码行：

```
-(IBAction)photolibrarypressed:(id)sender{

  // / Create window
 //self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
 NSLog(@"hi");
// Set up the image picker controller and add it to the view

//imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
//[window addSubview:imagePickerController.view];

//UIImagePickerController *picker= [[UIImagePickerController alloc]init];
    //picker.delegate = self;
    //picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

UIImagePickerController *picker= [[UIImagePickerController alloc]init];

picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
picker.delegate = self;

UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:picker];
self.popoverController = popover;          
popoverController.delegate = self;
[popoverController presentPopoverFromBarButtonItem:sender  permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

[self presentModalViewController:picker animated:YES];
//[picker release];
imageView = [[UIImageView alloc] initWithFrame:[window bounds]];
// Set up the image view and add it to the view but make it hidden
 [window addSubview:imageView];
imageView.hidden = YES;
[window makeKeyAndVisible];     

} 
```

但是，我收到以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present modally an active controller <splitViewDetailViewController: 
```

我无法理解。

该应用程序属于 SplitView 类型，我同时使用了 WebView 和 ImageView。所以，当我点击按钮照片库时，我需要进入 ImageView（我想）。

有人可以帮我解决问题吗？我对目标 C 很陌生。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:17:09.220

您已经获得了同时运行 iPhone 和 iPad 的代码。如果您使用的是 iPad，则应删除该行

```
[self presentModalViewController:picker animated:YES]; 
```

如果您使用的是 iPhone 或 iPod，则应删除该行

```
[popoverController presentPopoverFromBarButtonItem:sender  permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

或者，如果您想在 iPad 和 iPhone 上运行您的应用程序，请使用 if 语句找出它在哪个设备上运行：

```
if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {

    // Display in a popover for the iPad
    [popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} else {

    // Display modally for the iPhone
    [self presentModalViewController:picker animated:YES];

} 
```</splitviewdetailviewcontroller:>

# sql - 将用户权限仅限于一个特定的数据库

> ID：11012441
> 
> 赞同：7
> 
> 时间：2012-06-13T09:56:06.247
> 
> 标签：sql, postgresql, privileges, createuser

PostgreSQL 版本 9.1，

我正在使用默认用户登录数据库：“postgres”，我的数据库包含默认角色“public”

我拥有的数据库列表，

1.数据库1

2.数据库2

3.数据库3

现在，我需要创建一个只有“database2”权限的用户“newuser”，它不应该登录到其他数据库。

我尝试使用这种语法

```
create role newuser with login nosuperuser nocreatedb nocreaterole noinherit password 'newpassword';
revoke all privileges on database database1, database3 from newuser; 
```

但是“newuser”仍然可以登录到其他数据库（database1/database3），它可以从其他模式中选择表。（未列出公共架构中的表）

请任何人向我解释创建用户并向他们授予权限的正确程序。

我需要一个只能对特定数据库拥有所有权限的用户，他不应该登录到其他数据库:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-05T21:14:08.567

您可以通过运行以下命令删除数据库用户的权限：

```
REVOKE ALL PRIVILEGES ON DATABASE database_name FROM username; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T10:34:51.557

您是否尝试过撤销连接到数据库的[权限？](http://www.postgresql.org/docs/9.1/static/sql-revoke.html)这也应该禁止对数据库进行任何进一步的操作。

```
REVOKE CONNECT ON DATABASE your_db FROM user; 
```

* * *

经过一番挖掘，很明显，为什么上面不起作用。也许[汤姆莱恩](http://archives.postgresql.org/pgsql-general/2008-12/msg00727.php)的答案会给你一个更好的解决方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-12T14:58:07.660

默认情况下，所有`public`模式都可供普通（非超级用户）用户使用。为防止这种情况，请以超级用户身份登录并发出命令：

```
REVOKE ALL ON DATABASE somedatabase FROM PUBLIC; 
```

这将撤销所有用户对给定数据库的所有权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:06:27.030

好吧，我总是这样做的方式是通过[`pg_hba.conf`](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)，尽管我怀疑它也应该以您尝试的方式成为可能。

人们会期望撤销所有特权以拒绝与所列实体的任何事情。所以没有联系，更不用说实际选择了。我们可能在这里忘记了一些显而易见的事情。

无论如何，这应该很容易使用配置文件解决。添加`newuser`并仅列出您要允许的数据库。它将有效地拒绝从该用户到任何其他数据库的任何连接。显然，除了您已经拥有的权限设置之外，还可以使用它。

# mysql - LOAD_FILE() 函数的替代方案？

> ID：11012445
> 
> 赞同：4
> 
> 时间：2012-06-13T09:56:14.743
> 
> 标签：mysql

我已经搜索并找到了这篇文章（http://stackoverflow.com/questions/1814297/cant-load-file-data-in-the-mysql-directory），但它对我不起作用。

我是 Ubuntu 12.04，MySQL 版本是 5.5.22-0ubuntu1

我已经以 root 身份登录 MySQL，所以授权应该没问题：

```
mysql> show grants;
+---------------------------------------------------------------------+
| Grants for root@localhost                                           |
+---------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
| GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION        |
+---------------------------------------------------------------------+ 
```

我正在尝试将文本文件中的一些数据插入 MySQL 数据库，但该`LOAD_FILE`功能似乎无法正常工作

我创建了一个测试文件，权限为 777 并复制到安装的根目录（我尝试将所有者/组更改为 root:root 和 mysql:mysql 仍然不行）：

```
mysql> select load_file('/test.txt');
+------------------------+
| load_file('/test.txt') |
+------------------------+
| NULL                   |
+------------------------+
1 row in set (0.00 sec) 
```

但如果我试试这个：

```
mysql> select load_file('/etc/hosts'); 
```

它工作正常。如果我将测试文件复制到`/etc`它仍然失败。

有没有人见过这个或者可以指出我加载到数据库的另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:00:25.950

要使用`load_file`，必须满足以下条件（来自[文档](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_load-file)）：

1.  该文件必须位于服务器主机上
2.  您必须指定文件的完整路径名，并且您必须具有`FILE`权限。
3.  该文件必须可供所有人读取，并且其大小小于`max_allowed_packet`字节。
4.  如果`secure_file_priv`系统变量设置为非空目录名，则要加载的文件必须位于该目录中。

如果文件包含您要执行的 SQL 语句，则更简单的方法可能是将其通过管道输入：

`mysql -u foo -p dbname < filename.sql`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T14:01:25.820

Adding this for future reference. Probably won't help the OP.

As noted before, [AppArmor](http://en.wikipedia.org/wiki/AppArmor) is to blame. You need to whitelist the paths needed for load_file into the provided profile which can be found here: /etc/apparmor.d/usr.sbin.mysqld. The apparmor.d documentation can be found [here](http://manpages.ubuntu.com/manpages/precise/en/man5/apparmor.d.5.html). This is the recommended way as AppArmor has its reasons to be there.

Alternatives:

*   This is the unrecommended method. Disable the usr.sbin.mysqld profile so you won't expose all the services. Simply link the profile to /etc/apparmor.d/disable with `ln -s /etc/apparmor.d/usr.sbin.mysqld /etc/apparmor.d/disable/usr.sbin.mysqld`. Reload the profiles with `/etc/init.d/apparmor restart`. It probably makes sense for a development machine.
*   This is the highly unrecommended method, if you don't *actually* need AppArmor. The profiles can be unloaded with `/etc/init.d/apparmor teardown`. Disable the init script with `update-rc.d -f apparmor remove`.

All the above stuff requires root privileges, but I skipped the ever repetitive `sudo` in front of all the commands.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T19:43:13.940

考虑一下这个单线（注意，我在 Ubuntu 上）：

```
printf "$(cat update_xml.sql)" "$(cat my.xml | sed s/"'"/"\\\'"/g)" | mysql -h myRemoteHost -u me -p*** 
```

在 update_xml.sql 中有：

```
UPDATE
   myTable
SET
   myXmlColumn = '%s'
WHERE
   ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T07:34:55.730

我不是 MySQL 专家，但我观察到 MySQL 5.5 版与 UBUNTU OS 存在问题。

即使遵循[mysql docs](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_load-file) LOAD_FILE() 中的文档也没有工作。有一个名为 apparmour 的服务，阻止函数 LOAD_FILE() 执行，我尝试停止该服务但它仍然存在.....

我知道这并不能解决你的问题，但至少它会帮助你找到问题所在......

# c# - sys.application 和 sys.webforms 未定义

> ID：11012447
> 
> 赞同：1
> 
> 时间：2012-06-13T09:56:21.437
> 
> 标签：c#, jquery, asp.net, ajax

我有一个母版页，一个页面（aspx）和一个控件（ascx）

## 错误信息

我在页面上收到三个错误。

```
1\. Sys.Application is undefined
at this line (function() {var fn = function() {$get...);})();Sys.Application.initialize(); 
2\. Sys.Application is undefined
[Break On This Error] (function() {var fn = function() {$get...};Sys.Application.add_load(fn);})(); 
3.Sys.WebForms is undefined
[Break On This Error] var prm = Sys.WebForms.PageRequestManager.getInstance(); 
```

* * *

我已经粘贴了与错误消息相关的代码。

控件中的代码--------

```
jQuery.noConflict();
    jQuery(document).ready(function () {
        BlockUI("<%=pnlAddEdit.ClientID %>");
        jQuery.blockUI.defaults.css = {};
    });
    function BlockUI(elementID) {
        var prm = Sys.WebForms.PageRequestManager.getInstance(); //error at this line
        prm.add_beginRequest(function () {
            jQuery("#" + elementID).block({ message: '<table  align = "center" border=1><tr><td>' +
     '<img src="images/loadingAnim.gif"/></td></tr></table>',
                css: {},
                overlayCSS: { backgroundColor: '#f1f1f1', opacity: 12.2
                }
            });
        });
        prm.add_endRequest(function () {
            jQuery("#" + elementID).unblock();
        });
    } 
```

母版页中的代码------------

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

Aspx 页面中的代码 -----------

```
<%@ Register     Assembly="AjaxControlToolkit"     Namespace="AjaxControlToolkit"     TagPrefix="asp" %> 
```

* * *

我该如何解决这个问题。我不知道。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:05:08.927

出现此错误是因为您的页面上没有包含`asp:ScriptManager`，或者您在此 ScriptManager 加载其脚本之前调用此函数。

因此，如果您`asp:ScriptManager`在页面上包含了 ，那么您可以做的第二个想法是在页面加载后（在 PageLoad 上）调用它们。

添加脚本管理器调用的更好位置是在母版页上。

# ms-access - 访问不会更改或删除关系

> ID：11012453
> 
> 赞同：0
> 
> 时间：2012-06-13T09:56:53.717
> 
> 标签：ms-access, ms-access-2007

我有一个包含 8 个表的数据库。我感兴趣的 2 是“catelogue”和“tracklisting”。最初，当我构建数据库时，我认为将目录表与跟踪列表相关联的最佳方法是在目录号上。所述产品例如。CDRPM 1254。从那时起，我决定并学习不是更好的方法是使用主键 ID。我在我的跟踪列表表中添加了一个新字段，名为“Look Up To Cat”。之前用于引用的字段称为“TRACKLISTING_CAT_NO”。从 catelogue.Cat_No 更改关系后。- tracklisting.TRACKLISTING_CAT_NO。to catelogue.ID - tracklisting.Look Up To Cat，catelogue 表仍在使用旧连接。

我正在使用access 2007，加入是一对多的。当我删除 TRACKLISTING_CAT_NO. feild 然后我得到该字段对话框的输入参数，因为现在它引用了一个不存在的字段。

我已经删除了关系，对其进行了编辑，压缩并修复了数据库。没有任何帮助。我也用谷歌搜索过，但无济于事。

非常感谢任何有帮助的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:14:32.347

问题似乎出在查询中，而不是在表中。检查您的查询`JOIN`并将其更改为指向您的新字段

# python - 仅处理 Django 中查询集的子集（并返回原 始查询集）

> ID：11012454
> 
> 赞同：1
> 
> 时间：2012-06-13T09:56:57.537
> 
> 标签：python, django, slice, django-queryset

我在 Django 中有一个通用列表视图，它返回大约 300 个对象（除非执行搜索）。

我将分页设置为仅显示 10 个对象。

所以我查询数据库，然后遍历对象，处理它们并在显示之前添加额外的值。我注意到所有 300 个对象都完成了处理，并且在处理后完成了分页。所以我只想对要显示的对象进行处理以提高性能。

我计算查询集中应该处理的对象的索引，第 1 页的 0-10、第 2 页的 11-20、第 3 页的 21-30 等。

现在我只想处理显示范围内的对象，但返回完整的查询集（因此类型视图按预期工作）。

最初我尝试过：

```
for object in queryset[slice_start:slice_end] :
     # process things here

return queryset 
```

但是切片似乎返回了一个新的查询集，而原始查询集对象没有任何计算值。

目前我的解决方案是：

```
index = -1
for object in queryset:
     index += 1   
     if index < slice_start or index > slice_end : continue
     # process things here
return queryset 
```

现在这可行，但对于 Python 来说似乎相当 hacky 和不优雅。有没有更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:07:50.517

如果您使用的是 Django 的`Paginator`类 ( [docs](https://docs.djangoproject.com/en/dev/topics/pagination/) )，那么您可以请求当前页面并遍历视图中的这些对象：

```
from django.core.paginator import Paginator

# in the view:
p = Paginator(objects, 2)
page = p.page(current_page)
for o in page.object_list:
    # do processing
    pass 
```

您可以`current_page`从请求的参数（例如，中的`page`参数`request.GET`）中获取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:08:52.130

您应该对 的结果进行处理`page.object_list`，这将保证只包含该页面的对象。

# javascript - 选择除一个以外的所有 div

> ID：11012455
> 
> 赞同：3
> 
> 时间：2012-06-13T09:57:03.143
> 
> 标签：javascript, jquery, jquery-selectors, dom-traversal

```
<div id="main">
 <div class="a"></div>
 <div class="b"><p>not me</p></div>
 <div class="b"></div>
 <div class="b"></div>
 <div class="c"></div>
</div> 
```

我们如何编写一个选择器来选择`all divs with class b`除了谁的孩子之外`<p>not me</p>`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T09:58:55.633

```
$('div.b:not(:has(p))')......... 
```

或可读版本

```
$('div.b').filter(function(){
    return !$(this).find('p').length;
}); 
```

如果你也想匹配内容：

```
$('div.b').filter(function(){
    return $(this).find('p').text() !== "not me";
}); 
```

[**现场演示**](http://jsfiddle.net/HGQj4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:01:51.307

**演示** [http://jsfiddle.net/46nC5/1/](http://jsfiddle.net/46nC5/1/)

由于您正在专门寻找为`class b`您制作的演示，因此分享。

在此演示中，您将看到 not me 逐渐消失，其余部分将保持原样。

即用`:not`+`:has`可以做到

**代码**

```
$('div.b:has(p)').​ 
```

**或者**

```
$('div.b:not(:has(p))') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:05:02.110

```
$('div.b').filter(function () {
    return $(this).find('p:contains(not me)').length == 0;
}) 
```

[jsFiddle 演示](http://jsfiddle.net/sswhJ/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T10:12:14.570

这将为您提供**两个**具有**class="b"**且**没有 p 的 div**（段落）

[**现场演示**](http://jsfiddle.net/PK36Z/)

```
$('div.b:not(:has(p))') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T10:21:06.660

我通常做的最好的方法：

```
$('div.b').filter(function () {
   return !$(this).hasClass('notMe');
});

<div id="main">
     <div class="a"></div>
     <div class="b notMe"><p>not me</p></div>
     <div class="b"></div>
     <div class="b"></div>
     <div class="c"></div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T10:05:58.003

这是另一个

```
$("div.b:contains('not me')") 
```

编辑：对不起，这里没有

```
$("div.b:not(:contains('not me'))") 
```

# mysql - 如何在 MySQL 中为此条件添加约束？

> ID：11012457
> 
> 赞同：0
> 
> 时间：2012-06-13T09:57:10.190
> 
> 标签：mysql, sql, database-design, foreign-keys, constraints

我的表如下所示：

```
CREATE TABLE IF NOT EXISTS `entry_title` (
  `entry_title_id` int(11) NOT NULL AUTO_INCREMENT,
  `entry_id` int(11) NOT NULL,
  `accepted` tinyint(1) DEFAULT NULL,
  `entry_title_lang` char(2) CHARACTER SET ascii NOT NULL,
  `entry_title_value` varchar(255) NOT NULL,
  `entry_title_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`entry_title_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

表中的一行代表网站内容的标题。

这个想法是任何人都可以提交一个新的（希望改进的）标题。

然后社区接受或放弃更改。

如果接受标志等于`NULL`这表示更改正在等待社区审核。0 被解释为丢弃，1 被接受。

该网站显示最新的标题，`timestamp`其中接受的标志等于`1`。

当一项更改正在等待审核时，在未决更改被接受或拒绝之前，我无法提交其他更改。

因此，我希望在我的数据库中设置一个约束，以确保每个`entry_id`值为 is 的位置`accepted`只有一行`NULL`。

我考虑过使用一个单独的字段`pending_review`，它是`1`or`NULL`并将 UNIQUE 约束与`entry_id`.

这样做的问题是，当更改被接受或拒绝时，我会以某种方式需要取消设置该字段，并且该级别的一致性将需要另一个约束，这种约束会导致与上述更简单的解决方案相同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:07:17.547

[更新]在标准驱动的理想世界中：

```
CHECK(NOT EXISTS(SELECT 1 FROM entry_title WHERE accepted IS NULL GROUP BY entry_id HAVING COUNT(*) > 1)) 
```

唉，我们生活在不完美的世界里。看到这个[问题](https://stackoverflow.com/questions/6195881/what-sql-databases-support-subqueries-in-check-constraints)

因此，请改用具有相同逻辑的触发器。

[更新-触发]

就像是

```
CREATE TRIGGER triggerName BEFORE INSERT ON entry_title FOR EACH ROW
BEGIN
    IF EXISTS(SELECT 1 FROM entry_title 
              WHERE accepted IS NULL AND entry_id = NEW.entry_id 
              GROUP BY entry_id 
              HAVING COUNT(*) > 1) THEN
        SIGNAL SQLSTATE '45000'
    END IF;
END 
```

并且在更新之前也做同样的事情。免责声明，我没有检查这个。

# aptana - 如何在 Aptana Studio 中更改 *sass.rb 文件的语法 hihglightning？

> ID：11012461
> 
> 赞同：0
> 
> 时间：2012-06-13T09:57:14.633
> 
> 标签：aptana, syntax-highlighting, sass

我正在使用 Aptana，并且在 Rails 上我有 .sass 扩展名为 .rb 的文件，例如 screen.css.sass.rb 。

我怎样才能让 Aptana 能够将 .sass.rb 扩展名突出显示为 sass 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:37:38.687

不幸的是，这是 Eclipse 的一个尚未解决的问题。[您可以在https://bugs.eclipse.org/bugs/show_bug.cgi?id=89859](https://bugs.eclipse.org/bugs/show_bug.cgi?id=89859)中添加您的投票。

# c# - TryParse() - 为什么这段代码返回 0，结果不应该是 -1？

> ID：11012462
> 
> 赞同：8
> 
> 时间：2012-06-13T09:57:14.867
> 
> 标签：c#, .net, console, tryparse

请参阅以下代码：

```
string test = "";
int output = -1;

if (int.TryParse(test, out output))
{
    Console.WriteLine("Parsed");
}

Console.WriteLine(output); 
```

失败时`TryParse()`，不应该跳过块，`Console.WriteLine("Parsed")`不调用并且值`output`相同（-1）吗？

它回来了`0`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T09:59:27.337

来自[MSDN](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)：

> **当此方法返回时，如果转换成功或****转换失败**，则包含与字符串中包含的数字等效的 32 位有符号整数值。**`zero`**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-13T09:59:33.877

的实现`TryParse` **必须**在返回之前默认`out`参数，否则它将无法编译 -***无论***`out`您是否已从调用方初始化参数。*任何*带有参数的方法都是这种情况，`out`并不特定于`TryParse`.

当解析失败时，编码它的人选择[将参数默认为零。](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

重要的部分是你不应该认为任何`out`参数方法在传入时都会尊重参数的原始值`out`。事实上，它*永远不会*尊重参数，因为编译器会报告：

> 使用未分配的输出参数'blah'

如果您在方法内分配给它之前尝试使用参数值。因此，您实际上可以保证您作为`out`参数分配和提供的任何值都将被忽略/覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T09:59:26.380

如果它失败，它将`return false`不会执行 if 语句中的代码。

如果转换失败，它也会重新调整`0`，这就是为什么`output=0`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T10:02:01.753

在 C# 中，`out`必须将参数分配给并且最初不能从中读取。（当方法启动时，`out`参数被视为未初始化的变量。）

因此，之前的值`output`是无关紧要的。它必须由编写方法的人覆盖`TryParse`，否则无法编译。

同时，该`TryParse`方法无法访问 的先前值`output`。因此，必须选择一些值。在这种情况下，[开发人员选择了`0`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx).

# iphone - iOS 中的 SQLite 安全性

> ID：11012465
> 
> 赞同：1
> 
> 时间：2012-06-13T09:57:31.793
> 
> 标签：iphone, objective-c, ios, sqlite

我正在开发使用 sqllite db 的应用程序。我想为数据库提供安全性。有什么方法可以为 SQLite DB 提供安全性，以便没有人可以通过黑客设备或其他方式读取它。

我们应该提供任何加密还是苹果提供自己的安全性？提供应用程序数据库安全性的方法有哪些？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:09:38.120

@Quentin 的评论是正确的 - 只要有人可以物理访问您的设备，破解它只是时间问题。但是，您可以使那段时间花费很长时间，以至于不值得。

如果你要加密你的数据库，解密密钥也必须存储在设备上（假设你希望它离线工作）。您可以使用钥匙串来存储此密钥 - 然后他们必须破解[iPhone 的钥匙串](https://developer.apple.com/library/mac/#documentation/security/conceptual/keychainServConcepts/02concepts/concepts.html)才能访问您的数据。

另一种选择是只让您的应用程序在线工作 - 将密钥存储在您的服务器上并让用户登录并进行身份验证，然后再将密钥传递回应用程序。这需要您做更多的工作，但会确保密钥和数据存储在不同的位置。

最后（也是最安全的），您可以将所有内容存储在您的服务器上 - 这样您就可以自己控制数据和密钥，并且防盗不会产生丝毫影响。但是，如果您的数据集很大，这可能会使您的应用程序的用户界面更加复杂。而且它显然无法离线工作:)

# background - 在后台模式或应用程序终止后使用 didFinishLaunchingWithOptions 处理位置事件

> ID：11012467
> 
> 赞同：0
> 
> 时间：2012-06-13T09:57:39.517
> 
> 标签：background, cllocationmanager, cllocation

我在位置管理器初始化中调用 startMonitoringSignificantLocationChanges。

我希望如果有一个位置事件 didFinishLaunchingWithOptions 将被启动并执行以下代码。（包括后台模式和应用程序是否被终止）

**该应用程序冻结**（当我在不同位置的后台几个小时后尝试启动它时出现黑屏）

当我收到位置事件时，可能我做错了。如果有人知道问题出在哪里，我将不胜感激。

顺便说一句，没有办法模拟这种位置事件，而是物理地移动到具有不同蜂窝塔的不同位置。在那儿？... :(

位置控制器.m：

```
- (id)init
{
    self = [super init];
    if (self != nil) {
        self.locationManager = [[[CLLocationManager alloc] init] autorelease];
        self.locationManager.delegate = self;
        self.locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
        [self.locationManager startUpdatingLocation];
        [self.locationManager startMonitoringSignificantLocationChanges];
        [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(stop) userInfo:nil repeats:NO];
    }
    return self;
}
appdelegate.m : 
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    id locationValue = [launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey];
    if (locationValue)
    {
        [[LocationController sharedInstance] startMonitoringSignificantLocationChanges];
        UIApplication *app  = [UIApplication sharedApplication];
        bgTask = [app beginBackgroundTaskWithExpirationHandler:^{ 
            [app endBackgroundTask:bgTask]; 
            bgTask = UIBackgroundTaskInvalid;
            }];
        [self updateLocationService];
        return YES;
    }
}
- (void) updateLocationService {
    [[LocationController sharedInstance] start];
    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(stop) userInfo:nil repeats:NO];    
}
- (void) stop {
    [[LocationController sharedInstance] stop];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:23:20.437

如果没有设置 UIApplicationLaunchOptionsLocationKey，您的 didFinishLaunchingWithOptions: 方法不会返回任何内容。

只需将 return 语句移到 if 子句之外：

```
if (locationValue)
{ 
    ... 
}
return YES; 
```

# android - 推送通知无法取消注册

> ID：11012470
> 
> 赞同：0
> 
> 时间：2012-06-13T09:57:48.973
> 
> 标签：android, push-notification

```
private void unregister() {
    Intent unregIntent = new Intent(
            "com.google.android.c2dm.intent.UNREGISTER");
    unregIntent.putExtra("app",
            PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    startService(unregIntent);
} 
```

我调用此函数但返回给我

`com.google.android.c2dm.intent.REGISTRATION`而不是`com.google.android.c2dm.intent.UNREGISTRATION`？

当我打电话时`unregister()`，它运行

```
if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) {
        final String registrationId = intent
                .getStringExtra("registration_id");
        String deviceId = Secure.getString(context.getContentResolver(),
                Secure.ANDROID_ID);
        sendRegistrationIdToServer(deviceId, registrationId);
        System.out.println(registrationId.toString());
        // createNotification(context, registrationId);
    } 
```

这是我的`androidmanifest.xml`，是否需要添加注销？

```
<receiver
        android:name=".C2DM_RegistrationReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="oriental.orientalOnePaper" />
        </intent-filter>
    </receiver>
    <receiver
        android:name=".C2DM_MessageReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />

            <category android:name="oriental.orientalOnePaper" />
        </intent-filter>
    </receiver> 
```

# nhibernate - NHibernate：控制双向多对多。从一个实体添加并从另一个实体删除

> ID：11012474
> 
> 赞同：0
> 
> 时间：2012-06-13T09:57:57.573
> 
> 标签：nhibernate, fluent-nhibernate, many-to-many

我有 2 个具有多对多关系的表。用户可以有很多组，组可以有很多用户。

```
public class User
{
   public virtual Guid Id { get; set; }
   public virtual UInt64 UserId { get; set; }
   public virtual IList<Group> Groups{ get; set; }
}

public class Group
{
   public virtual Guid Id { get; set; }
   public virtual Guid GroupGuid  { get; set; }
} 
```

我使用 Fluent NHibernate 来自动映射它们，如下所示：

```
.Override<User>(obj => obj.HasManyToMany(x => x.Groups).Table("UserToGroup").Cascade.AllDeleteOrphan()) 
```

结果 Nhibernate 生成 3 个表：1.用户 - 映射对象表 2\. 组映射对象表 3\. UserToGroup - 生成的关联表

要求是在这些表上具有以下功能： 1\. AddUser(UInt64 UserId, IEnumerable groups) 2\. RemoveGroup(GroupGuid groupGuild) 3\. Dictionary> GetGroupToUsers();

AddUser 方法正常工作，所有表已更新正常： * 在 User 表中插入新用户。OK * 在组表中插入新组。OK * 在 UserToGroup 表中插入新的关系记录。好的

我使用以下代码添加用户（包括组）：

```
public void AddUser(User userData, IList<Guid> groupIds)
{
   User user = new User();
   user.UserId = userData.UserId;

   IList<User> Users = new List<Users();
   Users.Add(user);

   IList<Group> groups = new List<Group>();

   foreach (Guid groupId in groupIds)
   {
      Group grp = new Group();
      grp.GroupGuid = groupId;
      grp.Users = Users;
      groups.Add(grp);
   }

   user.Groups = groups;
   Session.Save(user);
} 
```

我使用以下代码删除组：

```
public void RemoveGroup(GroupGuid groupGuild)
{
     IList<Group> groupsToRemove = Session.QueryOver<Group>().Where(
            row => row.GroupGuid == groupGuild).List();
     foreach (Group group in groupsToRemove)
     {
          group.Users.Clear();
          Session.Delete(group);
     }
} 
```

RemoveGroup 方法失败，出现以下异常：

```
threw exception: 
NHibernate.Exceptions.GenericADOException: could not delete: [StorageObject.Group#11111111-1111-1111-1111-111111111111][SQL: DELETE FROM "Group" WHERE Id = ?] ---> System.Data.SqlServerCe.SqlCeException: The primary key value cannot be deleted because references to this key still exist. [ Foreign key constraint name = FK4B29424018FA0CD4 ] 
```

我了解不能删除 Group 表，因为引用 UserToGroup 表指向 Group 表。

1.  第一个问题：我怎样才能让休眠来理解我希望能够从双方控制这种多对多关系：添加用户和组 - 从用户端。并删除组 - 从组方面

我试图将 Inverse 移动到 User 表，但在这种情况下，当我添加 User 时，关联表不会被填充。

定义这种多对多关系的最佳方法是什么？

更新：我尝试的另一种方法是在此配置中的组中也有用户列表 removeGroup 是 wokring 但 addUser 不适用于特定场景：

```
public class Group
{
   public virtual Guid Id { get; set; }
   public virtual Guid GroupGuid  { get; set; }
   public virtual IList<User> Users{ get; set; }
}

public class User
{
   public virtual Guid Id { get; set; }
   public virtual UInt64 UserId { get; set; }
   public virtual IList<Group> Groups{ get; set; }
} 
```

现在我有一个双向的多对多。我的流利映射是：

```
.Override<User>(obj => obj.HasManyToMany(x => x.Groups).ParentKeyColumn("UserId").ChildKeyColumn("GroupId").Table("UserToGroup").Cascade.SaveUpdate()
.Override<Group>(obj => obj.HasManyToMany(x => x.Users).ParentKeyColumn("GroupId").ChildKeyColumn("UserId").Table("UserToGroup") 
```

如果我使用此配置 RemoveGroup 工作正常，但 AddUser 不适用于以下情况：当添加包含相同组的 2 个用户时，关联表删除第一个关系并仅保留最后一个引用，而不是同时拥有两个关系。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:30:30.853

尝试在 Group 中添加一个逆向集合：

```
public class Group
{
    public virtual Guid Id { get; set; }
    public virtual Guid GroupGuid  { get; set; }
    public virtual IList<User> Users { get; set; }
} 
```

在您的映射中：

```
.Override<Group>(obj => obj.HasManyToMany(x => x.Users).Table("UserToGroup").Inverse().Cascade.SaveUpdate()) 
```

您的删除方法：

```
public void RemoveGroup(GroupGuid groupGuild)
{
     IList<Group> groupsToRemove = Session.QueryOver<Group>().Where(
            row => row.GroupGuid == groupGuild).List();
     foreach (Group group in groupsToRemove)
     {
          group.Users.Clear();   // Removes references from all users pointing to that group
          Session.Delete(group);
     }
} 
```

提交事务时，应自动删除引用。我自己从未尝试过，但它可能对你有用。

# android - 如何在android中设置视图的x位置

> ID：11012478
> 
> 赞同：0
> 
> 时间：2012-06-13T09:58:14.767
> 
> 标签：android, position, android-linearlayout

根据我的网络服务中的对象，我在运行时创建了许多图像视图和文本视图。我正在水平创建linearLayout并将imageviews和textviews添加到布局中，现在的问题是文本与图像相对，并且图像的宽度不同，所以我想设置我的textviews的x位置，以便它们看起来都对齐如何做到这一点,

我尝试了absolutelayout（不推荐使用警告），setx（没有显示方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:03:45.803

I presume you mean this is a vertical LinearLayout, and each text/image combo is added below the previous one? In that case, you could have two LinearLayouts next to each other like two columns, adding the images to one and the text fields to the other. Then the widest image would stretch its layout to that width and all text fields would be just to the right of it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:10:42.560

您可以在运行时使用基于面板高度和宽度的调整大小的图像在运行时调整图像大小查看此堆栈溢出线程 [调整图像大小 java getScaledInstance](https://stackoverflow.com/questions/7252983/resizing-image-java-getscaledinstance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:14:12.847

`weight`在 ImageView 和 TextView 中使用属性

# android - 禁用 PagerAdapter/ViewPager 中的手势

> ID：11012497
> 
> 赞同：13
> 
> 时间：2012-06-13T09:58:58.563
> 
> 标签：android, android-layout, android-viewpager

首先对我糟糕的英语感到抱歉。

我`PagerAdapter`和 3一起工作`Views`。它工作正常。我可以通过正常手势和 Buttonclicks 切换视图。但我想禁用手势。是否可以仅使用 buttonClicks 切换视图并禁用手势？

这是`PagerAdapter`：

```
public class MyPagerAdapter extends PagerAdapter {

        public int getCount() {
            return 3;
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.back;
                break;
            case 1:
                resId = R.layout.stock;
                break;
            case 2:
                resId = R.layout.menu;
                break;
            }

            View view = inflater.inflate(resId, null);

            ((ViewPager) collection).addView(view, 0);

            return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2); 

        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public Parcelable saveState() {
            return null;
        }
    } 
```

**已解决**：

```
 final View touchView = findViewById(R.id.remotePager);
    touchView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T10:08:29.463

覆盖`onTouchListener()`并返回 false 以禁用滑动分页。

```
public boolean onTouchEvent(android.view.MotionEvent ev) {
        if (super.onTouchEvent(ev)) {
            return false;
        }
} 
```

# android - 在 osmdroid 中使用 MylocationOverlay

> ID：11012499
> 
> 赞同：0
> 
> 时间：2012-06-13T09:59:00.000
> 
> 标签：android, mapping, location, osmdroid, mylocationoverlay

我无法让 MyLocationOverlay 工作，我搜索它并尝试了许多代码，但没有一个有效的代码。我只会黑屏。我需要它来跟踪用户位置。我设法通过常规覆盖来跟踪用户位置，但我注意到对于每个新位置，地图都会再次下载（这非常麻烦且不实用）。

使用常规叠加的代码：

```
import java.util.ArrayList;
import org.osmdroid.DefaultResourceProxyImpl;
import org.osmdroid.ResourceProxy;
import org.osmdroid.tileprovider.tilesource.TileSourceFactory;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;
import org.osmdroid.views.overlay.ItemizedIconOverlay;
import org.osmdroid.views.overlay.ItemizedOverlay;
import org.osmdroid.views.overlay.OverlayItem;
import org.osmdroid.views.util.constants.MapViewConstants;

import android.app.Activity;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.Menu;
import android.widget.Toast;

public class OnlineTracking extends Activity implements LocationListener, MapViewConstants 
{
    private MapView mMapView; 
    private MapController mapController; 
    private LocationManager mLocMgr; 
    private ItemizedOverlay<OverlayItem> mMyLocationOverlay; 
    private ResourceProxy mResourceProxy; 

ArrayList<OverlayItem> items;

@Override 
public void onCreate(Bundle savedInstanceState) 
{ 
    super.onCreate(savedInstanceState); 
    mResourceProxy = new DefaultResourceProxyImpl(getApplicationContext()); 
    setContentView(R.layout.main); 
    initilaizeMap();
    mLocMgr = (LocationManager) getSystemService(LOCATION_SERVICE); 
    mLocMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 3, this);      
} 

public void initilaizeMap()
{
    mMapView = (MapView) this.findViewById(R.id.mapView); 
    mMapView.setTileSource(TileSourceFactory.MAPNIK); 
    //mMapView.setUseDataConnection(false);
    mMapView.setBuiltInZoomControls(true); 
    mMapView.setMultiTouchControls(true); 
    mapController = this.mMapView.getController(); 
    mapController.setZoom(15); 
    mapController.setCenter(new GeoPoint(15.610762,32.540345));  
}

public void displayLocation(GeoPoint loc)
{
    //mapController.setCenter(loc);
    items = new ArrayList<OverlayItem>(); 
    // Put overlay icon a little way from map center
    items.add(new OverlayItem("Here you are", "we will keep track of you", loc));
    /* OnTapListener for the Markers, shows a simple Toast. */ 
    this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(items, 
            new ItemizedIconOverlay.OnItemGestureListener<OverlayItem>() { 
                @Override 
                public boolean onItemSingleTapUp(final int index, 
                        final OverlayItem item) { 
                    Toast.makeText( 
                            OnlineTracking.this, 
                            "single tap" + item.mTitle, Toast.LENGTH_LONG).show(); 
                    return true; // We 'handled' this event. 
                } 
                @Override 
                public boolean onItemLongPress(final int index, 
                        final OverlayItem item) { 
                    Toast.makeText( 
                            OnlineTracking.this,  
                            "longPress '" + item.mTitle ,Toast.LENGTH_LONG).show(); 
                    return false; 
                } 
            }, mResourceProxy); 
    mMapView.getOverlays().clear();
    this.mMapView.getOverlays().add(this.mMyLocationOverlay); 
    //mMapView.invalidate();
}

public void onLocationChanged(Location location)
{ 
    int lat = (int) (location.getLatitude() * 1E6); 
    int lng = (int) (location.getLongitude() * 1E6); 
    GeoPoint gpt = new GeoPoint(lat, lng); 
    displayLocation(gpt);
} 

@Override 
public void onProviderDisabled(String arg0) {} 

@Override 
public void onProviderEnabled(String provider) {} 

@Override 
public void onStatusChanged(String provider, int status, Bundle extras) {} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:04:02.497

似乎这不是开发人员错误。我尝试运行以下使用 osmdroid 的示例项目：

[http://android-er.blogspot.it/2012/06/add-mylocationoverlay-on-openstreetmap.html](http://android-er.blogspot.it/2012/06/add-mylocationoverlay-on-openstreetmap.html)

`MyLocationOverlay`在运行 Android 2.2 的模拟器上，我在实例化的早期出现黑屏。我尝试在具有相同规格但运行 Android 4.2 的模拟设备下运行相同的项目，并且它有效。

我真的无法解释为什么会发生这种情况，就我而言，我选择使用传统方法和典型`ItemizedIconOverlay`

# asp.net - 在 ASP.net 中创建图表

> ID：11012501
> 
> 赞同：0
> 
> 时间：2012-06-13T09:59:04.027
> 
> 标签：asp.net, c#-4.0, mschart

我正在做一个项目，需要使用 asp:chart 控件添加一个额外的图像。不幸的是，我以前从未使用过这个控件，而且使用起来有点复杂，所以我需要一些帮助。

基本上，我需要创建一个包含两个图例和两列的堆积柱形图。第一列是“收入”并堆叠三个值。（工资、利息和其他。）第二列是“费用”并叠加两个值。（抵押，其他。）每个价值都有它自己的价值。
收入图例应在左侧，费用列在右侧。这些图例应显示其相关值的文本和值以及带有值的“总计”标签。

对于这个任务，我只需要处理两列上的 5 个值，但是 asp:chart 控件很大，我淹没在它的所有选项中。他们希望它昨天准备好，所以没有压力。它已经过期了...... :-)

不，这不是家庭作业。如果是这样，我将有实用的文档和额外的操作信息。因为我的老板希望我添加这个，所以他只是给我绝对没有任何信息可以使用，除了已经包含其他几个图表的代码，它们都不像这个，而且都是由以前的受害者完成的，每个人都使用自己的编码风格. 基本上，项目代码是一团糟，作为文档毫无用处。（令人惊讶的是，只要我只对这些图形使用 asp:chart，它就可以工作。）

我遇到的最大问题是正确堆叠值。因为我有两列和 3 个值，所以可以用三个系列来解决，每个系列都有第 1 列和第 2 列的点。不幸的是，这将收入和支出放在同一个标​​签中，这不是我想要的。
如果我将其设为 5 系列，对于每个值一个点，那么第二列不会从正确的高度开始。所以这也行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:03:38.553

You can download Samples for Chart Control from msdn which give you complete in depth knowledge of how to use them

[http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=1591](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=1591)

For learning see these blogs as well

[http://www.4guysfromrolla.com/articles/072209-1.aspx](http://www.4guysfromrolla.com/articles/072209-1.aspx) [http://weblogs.asp.net/scottgu/archive/2008/11/24/new-asp-net-charting-control-lt-asp-chart-runat-quot-server-quot-gt.aspx](http://weblogs.asp.net/scottgu/archive/2008/11/24/new-asp-net-charting-control-lt-asp-chart-runat-quot-server-quot-gt.aspx)

# iphone - UIWebView 崩溃

> ID：11012503
> 
> 赞同：1
> 
> 时间：2012-06-13T09:59:19.040
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiwebview

我有一个`UIWebView`将加载文件。为 webview 提到的所有支持的文档都在工作。但有时，`UIWebView`每当我快速来回移动时，它就会崩溃。我的意思是我一次又一次地点击返回并打开文件。如果我这样做，我的应用程序就会崩溃。

知道为什么会这样吗？它适用于视频、音频和 txt 文件，但对于 Office 文档和数字、页面文档来说却是奇怪的崩溃。

请帮帮我！

```
-(void) backBtnPressed
{
    [_webView stopLoading];
    if ([_webView superview])
    {      
        [_webView removeFromSuperview];
        self.navigationItem.rightBarButtonItem = nil;
    }
}

- (void) loadFile:(NSString*)filePath
{
    NSURL*  url = [NSURL fileURLWithPath:filePath];
    NSURLRequest*   request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
    [webView setScalesPageToFit:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:04:05.080

执行此操作并检查您遇到的错误。

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
    {
       NSLog("Error=%s",error);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:07:27.607

如果您要从一个视图控制器移动到另一个视图控制器，请执行以下操作

```
[webView stopLoading];
webView.delegate = nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T05:08:44.007

问题解决。将 UIWebView 设置为 nil 并在 WebView 中再次加载请求。但现在最多只能在最坏的情况下应用程序崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T05:18:17.760

尝试这个 ：

```
-(void)viewWillDisappear:(BOOL)animated
    {
        if([webView isLoading])
        {
            [webView stopLoading];
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:03:23.073

在控制器的 dealloc 中将 webview 的委托属性设置为 nil

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-04T07:06:08.600

只需在此处添加此内容，以免其他人犯同样的初学者错误：

请记住，这`webView.delegate`是一个**弱引用**。如果您将其设置为其他内容，`self`如果没有其他对它的引用，您的委托可能会被破坏，这将导致各种崩溃。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-01T06:11:48.523

尝试执行以下操作。这个对我有用。

```
[webView stopLoading];
[webView release];
webView = nil;
webView.delegate = nil; 
```

# asp.net - 动态 crmservice asmx 和缓存

> ID：11012504
> 
> 赞同：1
> 
> 时间：2012-06-13T09:59:24.477
> 
> 标签：asp.net, dynamics-crm, dynamics-crm-4

我有一个自定义应用程序，它使用 crmservice.asmx 从动态 crm 4 中检索联系人。

问题：我在自定义应用程序中搜索联系人但没有找到。我去 MSCRM 并创建联系人。当我尝试在我的自定义应用程序中再次搜索时，我仍然找不到该联系人。

它必须为 crmservice.asmx 缓存，因为当我在 10 分钟后尝试时，会在我的自定义应用程序中找到该联系人。

但是如何管理 crmservice.asmx 上的缓存设置？

我的实例化代码

```
Private Const CRMServiceUrl As String = "https://*****/mscrmservices/2007/crmservice.asmx"
Private Const MetadataServiceUrl As String = "https://*****/MSCRMServices/2007/MetadataService.asmx"
Private Const OrganizationName As String = "****"
Private Const Username As String = "****"
Private Const Password As String = "****"
Private Const Domain As String = "****"

Private ReadOnly _service As CrmService.CrmService
Private ReadOnly _metadataService As MetadataService.MetadataService

Public Sub New()
    Dim crmServiceToken As New CrmAuthenticationToken()
    crmServiceToken.AuthenticationType = Microsoft.Crm.Sdk.AuthenticationType.AD
    crmServiceToken.OrganizationName = OrganizationName

    Dim metadataServiceToken As New MetadataService.CrmAuthenticationToken()
    metadataServiceToken.AuthenticationType = Microsoft.Crm.Sdk.AuthenticationType.AD
    metadataServiceToken.OrganizationName = OrganizationName

    Dim credentials As ICredentials = New NetworkCredential(Username, Password, Domain)

    _service = New CrmService.CrmService()
    _service.Url = CRMServiceUrl
    _service.CrmAuthenticationTokenValue = crmServiceToken
    _service.Credentials = credentials

    _metadataService = New MetadataService.MetadataService()
    _metadataService.Url = MetadataServiceUrl
    _metadataService.CrmAuthenticationTokenValue = metadataServiceToken
    _metadataService.Credentials = credentials
End Sub 
```

以及获取联系人的方法

```
Public Function GetContact(ByVal request As GetContactRequest) As contact Implements ICRM.GetContact
    Dim query As New QueryExpression()
    query.EntityName = EntityName.contact.ToString()
    query.ColumnSet = New AllColumns()

    Dim condition As ConditionExpression
    Dim expr As New List(Of ConditionExpression)

    condition = New ConditionExpression()
    condition.AttributeName = "statecode"
    condition.[Operator] = ConditionOperator.Equal
    condition.Values = New Object() {0}
    expr.Add(condition)

    If request.ContactId <> Guid.Empty Then
        condition = New ConditionExpression()
        condition.AttributeName = "contactid"
        condition.[Operator] = ConditionOperator.Equal
        condition.Values = New String() {request.ContactId.ToString}
        expr.Add(condition)
    End If
    If Not String.IsNullOrEmpty(request.CustomerCode) Then
        condition = New ConditionExpression()
        condition.AttributeName = "new_orgcustomerno"
        condition.[Operator] = ConditionOperator.Like
        condition.Values = New String() {request.CustomerCode + "%"}
        expr.Add(condition)
    End If

    If Not String.IsNullOrEmpty(request.ContactSeq) Then
        condition = New ConditionExpression()
        condition.AttributeName = "new_contact_seq"
        condition.[Operator] = ConditionOperator.Like
        condition.Values = New String() {request.ContactSeq + "%"}
        expr.Add(condition)
    End If

    Dim filter As New FilterExpression()
    filter.FilterOperator = LogicalOperator.[And]
    filter.Conditions = expr.ToArray

    query.Criteria = filter
    Dim contacts As BusinessEntityCollection = _service.RetrieveMultiple(query)

    If contacts.BusinessEntities.Length > 0 Then
        Dim a As contact = DirectCast(contacts.BusinessEntities(0), contact)
        Return a
    Else
        Return Nothing
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:54:18.167

这只是一个建议，但我认为它与缓存无关。可能的问题是权限问题或条件问题。我的意思是，如果您在以某个用户身份登录 CRM 时创建了联系人，但尝试在其他 CRM 用户下检索之前创建的联系人。或者可能是您添加到条件列表中的其他列，可能其中的一些列没有您认为存在的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:13:51.407

已解决：通过使用 Retrieve() 而不是 RetrieveMultiple() 我立即获得了联系。

这意味着通过其他列搜索新创建的联系人，我无法立即访问它（必须等待几分钟）。我必须使用contactid。

# xpages - 未找到 XPages Mobile 目标视图：尝试导航时为空

> ID：11012505
> 
> 赞同：0
> 
> 时间：2012-06-13T09:59:24.337
> 
> 标签：xpages

尝试使用数据视图或大纲创建移动导航，并且视图呈现正常，但是当我单击一个条目时，我得到一个对话框。

dojox.mobile.view#preformTransition：找不到目标视图：null

任何想法为什么我会收到此错误？

我正在使用 8.5.3 UP1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:59:27.687

当您尝试转换到的视图不存在时，您会收到此错误。因此，您应该有一个带有一个或多个 appPage 控件的 singlePageApp 控件，目标应该是其中一个 appPages 的“pageName”属性的值。

你能检查一下 appPage 的 pageName 是否存在并且没有错别字等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:43:27.710

使用 extlib 大纲控件时出现相同的错误。试图打开另一个 xsp 移动页面。

# eclipse - 清理项目和构建 J2me 项目时删除资源时出错

> ID：11012509
> 
> 赞同：6
> 
> 时间：2012-06-13T09:59:32.873
> 
> 标签：eclipse, java-me, lwuit, s60

我正在使用 S60 SDK 运行 Eclipse pulsar 以进行 j2me 开发并使用 LWUIT.jar 但在清理我的项目时出现以下错误

```
Errors occurred during the build.
Errors running builder 'Preverification Builder' on project 'YokeApp'.
Problems encountered while deleting resources.
Could not delete 'H:\Bitbucket\6-6-12 Yoke ME\yoke-j2me\.mtj.tmp\verified\libs\LWUIT_MIDP.jar'.
Problems encountered while deleting files.
Could not delete: H:\Bitbucket\6-6-12 Yoke ME\yoke-j2me\.mtj.tmp\verified\libs\LWUIT_MIDP.jar.
Problems encountered while deleting resources.
Could not delete 'H:\Bitbucket\6-6-12 Yoke ME\yoke-j2me\.mtj.tmp\verified\libs\LWUIT_MIDP.jar'.
Problems encountered while deleting files.
Could not delete: H:\Bitbucket\6-6-12 Yoke ME\yoke-j2me\.mtj.tmp\verified\libs\LWUIT_MIDP.jar. 
```

我将 LWUIT.jar 添加到我在项目中创建的文件夹 /lib/ 中。
我不明白为什么我会收到这个错误？

最初 Eclipse 被加载，然后我去文件夹`mtj.tmp\verified\lib\LWUIT_MIDP.jar`并删除它。它已成功删除，但是当我清理我的项目时，它再次创建，然后我运行我的项目，然后我试图通过中止它的竞争执行来清理我的项目，但是什么？？...同样的问题又回到了上面提到的问题。为什么会发生这种情况并解决它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T11:09:51.270

转到指定路径并手动删除文件。刷新项目并重试，这必须解决您的问题。

# ruby - Capistrano 的 run_locally 不打印到控制台？

> ID：11012511
> 
> 赞同：1
> 
> 时间：2012-06-13T09:59:34.103
> 
> 标签：ruby, deployment, capistrano

假设我的食谱中有一个自定义任务，如下所示：

```
task :custom_task1 do    
  run_locally "cap -S config=blah another_custom_task
end 
```

和

```
task :another_custom_task do
  puts "hi"
end 
```

然后，不会打印“hi”。如何解决或克服这种情况？它不允许我使用命令行。

编辑：

为什么我不能使用记录器？Capistrano，默认情况下说话太多 - 所以我有一个设置，将它的记录器设置为只喊出重要的错误。所以不能使用 logger.info 或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:05:14.137

Try to use [`Logger`](http://rdoc.info/github/capistrano/capistrano/master/Capistrano/Logger):

```
logger.info "hi" 
```

# facebook - 在 facebook 应用程序中使用 facebook 评论

> ID：11012513
> 
> 赞同：0
> 
> 时间：2012-06-13T09:59:34.603
> 
> 标签：facebook

我正在尝试将使用社交插件的 facebook 评论框添加到将作为 facebook 应用程序在 facebook 内运行的应用程序中。

当我通过其 url 查看应用程序时，它工作正常，但是当我在 dev facebook 应用程序中查看应用程序时，评论插件不会加载。有谁知道这是否可能或是否需要任何其他设置。

我尝试将 data-href 设置为提供应用程序的 url，而 facebook 应用程序的 url 似乎都不起作用

```
<div class="fb-comments" data-href="[MYDOMAIN]” data-num-posts="30" data-width="470"></div> 
```

该代码只是来自 fb js sdk 的标准片段

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '[MYAPPID], // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    FB.Canvas.setAutoGrow();
    // Additional initialization code here
  };

// Load the SDK Asynchronously
(function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
 }(document)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:19:27.137

尝试提供频道文件和频道网址。

来自[Facebook JavaScript SDK 文档](http://developers.facebook.com/docs/reference/javascript/)： *“...包含跨框架通信的代码的页面可能会导致社交插件在没有 channelUrl 的情况下显示为空白...”*

```
FB.init({
    appId      : 'YOUR_APP_ID', // App ID
    channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
}); 
```

# powershell - 如何设置动态参数的默认值？

> ID：11012514
> 
> 赞同：5
> 
> 时间：2012-06-13T09:59:34.697
> 
> 标签：powershell

我尝试将 System.ComponentModel.DefaultValueAttribute 添加到 RuntimeDefinedParameter 的 AttributeCollection，但它不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-22T14:40:51.180

Chrissy 的示例可能是正确的方法，但我无法检索默认值。指定默认值时，$PSBoundParameters 中不存在该参数。

我们应用的“解决方法”是将 $PSBoundParameter["Background"] 绑定到我们想要的默认值。`$PSBoundParameters["Background"] = "Transparent"`

扩展 Chrissy 的示例：

```
DynamicParam  {
    [void][System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
    $colorlist = [System.Enum]::GetNames([System.Drawing.KnownColor])

    $attributes = New-Object System.Management.Automation.ParameterAttribute
    $attributes.ParameterSetName = "__AllParameterSets"
    $attributes.Mandatory = $false

    # Background color
    $validationset = New-Object -Type System.Management.Automation.ValidateSetAttribute -ArgumentList $colorlist
    $collection = New-Object -Type System.Collections.ObjectModel.Collection[System.Attribute]
    $collection.Add($attributes)
    $collection.Add($validationset)
    $background = New-Object -Type System.Management.Automation.RuntimeDefinedParameter("Background", [String], $collection)
    $PSBoundParameters["Background"] = "Transparent"

    $newparams = New-Object System.Management.Automation.RuntimeDefinedParameterDictionary
    $newparams.Add("Background", $background)

    return $newparams
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-14T14:52:06.563

正如 Bartek 建议的那样，可以使用 Value 属性，如下面的代码所示

```
DynamicParam  {
    [void][System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
    $colorlist = [System.Enum]::GetNames([System.Drawing.KnownColor])

    $attributes = New-Object System.Management.Automation.ParameterAttribute
    $attributes.ParameterSetName = "__AllParameterSets"
    $attributes.Mandatory = $false

    # Background color
    $validationset = New-Object -Type System.Management.Automation.ValidateSetAttribute -ArgumentList $colorlist
    $collection = New-Object -Type System.Collections.ObjectModel.Collection[System.Attribute]
    $collection.Add($attributes)
    $collection.Add($validationset)
    $background = New-Object -Type System.Management.Automation.RuntimeDefinedParameter("Background", [String], $collection)
    $background.Value = "Transparent"

    $newparams = New-Object System.Management.Automation.RuntimeDefinedParameterDictionary
    $newparams.Add("Background", $background)

return $newparams
} 
```

这里重要的一行是 $background.Value = "Transparent" 其中 $background 是一个 RunTimeDefinedParameter。

对于那些好奇的人。我最初尝试将其用作属性，但 ParameterAttributes 中没有可用的 .Value。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:28:28.990

System.Management.Automation.RuntimeDefinedParameter 具有“值”属性，所以我想我会用它来设置默认值。它有点工作（当我调试脚本时，我可以使用 $PSCmdlet.GetDynamicParameters() 看到这个“默认”值）但我没有运气在实际函数中访问它（它在 $pscmdlet.GetDynamicParameters() 调用上“死”了） .

无论如何：当我指定值时，我的函数显示的是绑定值而不是默认值。

不确定它是否有帮助，而且当参数是动态的时，我几乎看不到任何默认值的用例。很想知道你为什么需要它。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-24T13:04:40.133

它不完全是您所需要的，但至少是一个很好的解决方法（需要 PowerShell 3.0）：

您可以使用 为所有函数的所有参数设置默认值`$PSDefaultParameterValues`。请参阅[https://technet.microsoft.com/en-us/library/hh847819.aspx](https://technet.microsoft.com/en-us/library/hh847819.aspx)或使用 PowerShell 帮助`about_Parameters_Default_Values`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-17T21:07:34.907

**更新：
我在我的 PowerShell 函数中发现了一个错误`Test-DynamicParameter`，这导致了一个错误的结论。下面，在 PowerShell 函数中，我将注释掉错误的行。此外，最后一个示例输出已更改。再次，我将注释更改。**

好的，所以回答的每个人在如何设置动态参数的“默认”值方面都是正确的。（剧透警报/tl；博士：没有这样的事情。）现在，让我先说我即将演示的功能是通过 PowerShell 5.1 执行的。以下是我在测试中发现的。

首先，我用来测试动态参数和默认值的函数：

```
 function Test-DynamicParameter {
    [CmdletBinding()]
    Param (
        [switch]$UseDynamicParameterDefault2000
    )

    dynamicparam {
        # $RequestTimeout parameter
        $attributeCollection = New-Object Collections.ObjectModel.Collection[Attribute]
        $attributeCollection.Add((New-Object Management.Automation.ParameterAttribute -Property @{ ParameterSetName = "__AllParameterSets" }))
        $attributeCollection.Add((New-Object Management.Automation.ValidateScriptAttribute { $_ -ge 0 }))

        $RequestTimeoutParameter = New-Object Management.Automation.RuntimeDefinedParameter RequestTimeout, int, $attributeCollection
        # This line uses an incorrect name for the dynamic parameter, which caused
        # incorrect results in my original post. The corrected line
        # appears below this commented out, incorrect line.
        #$RequestTimeoutParameter.Value = $(if ($PSBoundParameters.UseDynamicParameterDefault1) { 2000 } else { 120000 })
        $RequestTimeoutParameter.Value = $(if ($PSBoundParameters.UseDynamicParameterDefault2000) { 2000 } else { 120000 })

        $dynamicParams = New-Object Management.Automation.RuntimeDefinedParameterDictionary
        $dynamicParams.Add('RequestTimeout', $RequestTimeOutParameter)

        $dynamicParams
    }

    process {
        $RequestTimeoutParameter | Format-List

        if ($PSBoundParameters.ContainsKey('UseDynamicParameterDefault2000')) {
            Write-Host "`$PSBoundParameters contains 'RequestTimeout'? $($PSBoundParameters.ContainsKey('RequestTimeout'))"
            Write-Host "`$RequestTimeout default: 2000"
            if ($PSBoundParameters.ContainsKey('RequestTimeout')) {
                # UPDATE: The following line should have used $PSBoundParameters to access the RequestTimeout parameter and has been corrected below
                #Write-Host "`$RequestTimeout = $RequestTimeout (Bound)"
                Write-Host "`$RequestTimeout = $($PSBoundParameters['RequestTimeout']) (Bound)"
            } else {
                # UPDATE: To be safe, also access $RequestTimeout here via $PSBoundParameters
                #Write-Host "`$RequestTimeout = $RequestTimeout (Default Value)"
                Write-Host "`$RequestTimeout = $($PSBoundParameters['RequestTimeout']) (Default Value)"
            }
        } else {
            Write-Host "`$PSBoundParameters contains 'RequestTimeout'? $($PSBoundParameters.ContainsKey('RequestTimeout'))"
            Write-Host "`$RequestTimeout default: 120000"
            if ($PSBoundParameters.ContainsKey('RequestTimeout')) {
                Write-Host "`$RequestTimeout = $($PSBoundParameters['RequestTimeout']) (Bound)"
            } else {
                # UPDATE: Again, use $PSBoundParameters
                #Write-Host "`$RequestTimeout = $RequestTimeout (UnBound, Default Value)"
                Write-Host "`$RequestTimeout = $($PSBoundParameters['RequestTimeout']) (UnBound, Default Value)"
            }
        }
    }
} 
```

现在执行该函数的一些测试（同样，使用 PowerShell 5.1）：

```
PS C:\> Test-DynamicParameter

Name          : RequestTimeout
ParameterType : System.Int32
Value         : 120000
IsSet         : True
Attributes    : {__AllParameterSets, System.Management.Automation.ValidateScriptAttribute}

$PSBoundParameters contains 'RequestTimeout'? False
$RequestTimeout default: 120000
$RequestTimeout =  (Unbound, Default Value)

PS C:\> Test-DynamicParameter -RequestTimeout 3000

Name          : RequestTimeout
ParameterType : System.Int32
Value         : 3000
IsSet         : True
Attributes    : {__AllParameterSets, System.Management.Automation.ValidateScriptAttribute}

$PSBoundParameters contains 'RequestTimeout'? True
$RequestTimeout default: 120000
$RequestTimeout = 3000 (Bound)

PS C:\> Test-DynamicParameter -UseDynamicParameterDefault2000

Name          : RequestTimeout
ParameterType : System.Int32
### UPDATE: Due to incorrect code, this line was wrong...
### Value         : 120000
Value         : 2000
IsSet         : True
Attributes    : {__AllParameterSets, System.Management.Automation.ValidateScriptAttribute}

$PSBoundParameters contains 'RequestTimeout'? False
$RequestTimeout default: 2000
$RequestTimeout =  (Default Value)

PS C:\> Test-DynamicParameter -UseDynamicParameterDefault2000 -RequestTimeout 3000

Name          : RequestTimeout
ParameterType : System.Int32
Value         : 3000
IsSet         : True
Attributes    : {__AllParameterSets, System.Management.Automation.ValidateScriptAttribute}

$PSBoundParameters contains 'RequestTimeout'? True
$RequestTimeout default: 2000
### UPDATE: This line is incorrect when the PowerShell function is corrected.
### $RequestTimeout = 3000 (Bound)
###
$RequestTimeout = 3000 (Bound)

PS C:\> 
```

~~好的，所以我从这个输出中学到了一些东西。一个是我在构造动态参数时尝试使用`$PSBoundParameters`它来设置其默认值（为 2000 或 120000）。但是，这不起作用，因为尚未处理参数。~~ *（我错了，你可以`$PSBoundParameters`在构造动态参数时使用。）*发生的情况是创建了参数，然后绑定了发送到 cmdlet 中的各种参数的值。在指定动态参数的值的情况下，动态参数的`Value`属性被更新。那么，从这个意义上说，该`Value`属性**不是**动态参数的默认值；它是参数***的***值。

~~因此，在我尝试根据其他（绑定）参数的值设置动态参数的“默认”值的函数中，这不起作用，并且该值`120000`始终设置为动态参数的初始值。~~ *（由于我的编码错误，这是真的。但是一旦更正了代码，这个陈述就是错误的。）*

好的，但是当我没有指定`-RequestTimeout <n>`cmdlet 的调用时，在 cmdlet 中引用会`$RequestTimeout`导致 null 值。是什么赋予了？如何获得我在参数上设置的默认值？这很容易。我仍然可以访问`$RequestTimeoutParameter`用于构建参数定义的变量。正如您在输出中看到的那样，我将其写出来，您可以看到`Value`属性已设置。此外，如果`-RequestTimeout <n>`指定，则`$RequestTimeoutParameter.Value`使用从命令调用传入的值更新属性。

我希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-19T14:12:38.180

为什么不检查参数是否由用户指定，如果不是，例如在开始块中为参数提供一个值；

```
function Get-Something {
    param()
    dynamicparam{
        <Definition of dynamic parameter "ThisIsADynamicParam">
    }
    begin {
        if (-not $PSBoundParameters.ContainsKey('ThisIsADynamicParam') {
            $PSBoundParameters.Add('ThisIsADynamicParam','DefaultValue')
        }

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-08T14:27:25.440

这可能很明显，但我还没有看到有人特别提到这一点，但如果你结合了fourpastmidnights 的出色解释、chrissy 的初步回答和 Tomas 的聪明建议。

您*可以*将根据用户提供的输入更改的动态参数的值动态分配给 $PSBoundParameter 字典，从而实现在未指定任何内容时提供可访问的默认值的预期效果，同时在用户输入的事件中更新它假如。

```
 dynamicParam {
    if ($Param1 -eq $True) {
        #Create Abstract Object
        $paramDictionary = New-Object -TypeName System.Management.Automation.RuntimeDefinedParameterDictionary
        $attributeCollection = New-Object -TypeName System.Collections.ObjectModel.Collection[System.Attribute]

        #Define Param attributes
        $attribute = New-Object System.Management.Automation.ParameterAttribute
        $attribute.Mandatory = $false
        $attributeCollection.Add($attribute)

        #Create Param
        $Name = 'DynamicParam1'
        $dynParam = New-Object -TypeName System.Management.Automation.RuntimeDefinedParameter($Name, [bool], $attributeCollection)
        $dynParam.value = $true
        $paramDictionary.Add($Name, $dynParam)
        $PSBoundParameters["$name"] = $dynParam.Value
    }
    $paramDictionary
} 
```

因此，此示例将允许您访问`$PSBoundParameters.DynamicParam1`默认值`$true`或用户提供的值（如果提供了值）的值。

据我所知，该行`$PSBoundParameters["$name"] = $dynParam.Value`必须在“默认”赋值语句之后`$dynParam.value = $true`。

这是在 PS 7.1 上测试的

# mobile - Appcelerator \ Titanium - 跨平台开发

> ID：11012518
> 
> 赞同：1
> 
> 时间：2012-06-13T09:59:47.930
> 
> 标签：mobile, appcelerator

我正在寻找构建一个适用于 iOS 和 BlackBerry 的移动应用程序。我一直在关注 Appcelerator 平台，该平台似乎非常值得推荐，但我仍然看不到如何轻松地为这两个平台构建。

问题是它看起来对于 iOS 需要在 MAC 上构建，而对于 BlackBerry，它需要在 Windows 中构建！那么针对这两个平台的最简单设置是什么？我真的只需要在两台不同的机器上分别进行构建吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:32:17.557

这个问题有下载 SDK for mac 的说明，但是用户似乎在运行模拟器时遇到了问题。

[如何在 Mac OS 上开发黑莓应用程序？](https://stackoverflow.com/questions/4629174/how-to-develop-blackberry-apps-on-mac-os)

如果这不起作用，您总是可以在 Mac 上使用 Windows 的 vm 并将钛项目创建为操作系统和 vm 之间的共享项目

# asp.net - 将跨域添加到 Azure Blob 存储的根目录

> ID：11012521
> 
> 赞同：3
> 
> 时间：2012-06-13T10:00:09.627
> 
> 标签：asp.net, flash, azure, azure-blob-storage

我正在尝试从 Flash 访问 azure 上的一些资产。这需要一个跨域文件位于 blob 的根目录，即[http://xxxxxxx.blob.core.windows.net/crossdomain.xml](http://xxxxxxx.blob.core.windows.net/crossdomain.xml)

我发现使用 Azure 存储资源管理器似乎没有办法将文件添加到根目录，我发现这篇文章[http://www.odity.co.uk/articles/azure-crossdomain-xml-inside-root -of-blob-storage/](http://www.odity.co.uk/articles/azure-crossdomain-xml-inside-root-of-blob-storage/)详细介绍了一种程序化方法。但是我已经实现了代码并尝试测试并收到以下错误，这表明我可能无法将文件添加到根目录？

```
<Error>
<Code>OutOfRangeInput</Code>
<Message>
One of the request inputs is out of range. RequestId:5853bdc0-89ed-47f6-986e-f42badd38e75 Time:2012-06-13T09:37:58.0222882Z
</Message>
</Error> 
```

谁能澄清这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:16:38.113

你能发布你用来创建根容器的代码吗？

除此之外，您还可以使用 CloudBerry 创建 $root 容器并将文件上传到它：

[http://blog.cloudberrylab.com/2010/04/cloudberry-explorer-for-azure.html](http://blog.cloudberrylab.com/2010/04/cloudberry-explorer-for-azure.html)

![在此处输入图像描述](../Images/388b4427964ad86cc0363548e0077754.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T16:39:26.833

实现此目的的一种简单方法是创建一个名为“$root”的特殊（blob）容器（root 以 $ 符号开头）。在这个容器中放置的任何东西的 url 都可以写为根目录下，所以不要写

**http://{my-storage-url}/$root/myFile**

您可以使用：

**http://{my-storage-url}/myFile**

最后一步是将 crossdomain.xml 文件复制到 $root 容器。我使用 Visual Studio 来管理 azure 存储 blob 中的文件。

*   也可以看看

    [使用根容器](http://msdn.microsoft.com/en-us/library/windowsazure/hh488356.aspx)

*   使用 crossdomain.xml 时要小心，因为它会使您的站点容易受到攻击。

# performance - 在虚拟化环境中执行数值计算？

> ID：11012522
> 
> 赞同：0
> 
> 时间：2012-06-13T10:00:18.290
> 
> 标签：performance, virtualization, numerical-methods, scientific-computing, hpc

我想知道在虚拟化设置中会有什么样的性能影响数值计算？更具体地说，在相当快的 x86_64 多核机器上，在虚拟化 Windows 操作系统中运行受 CPU 限制的 C++ 代码，而不是在本机 Linux 操作系统中，我会期望什么样的性能损失？

我很乐意根据需要添加精度，但由于我对虚拟化了解不多，我不知道哪些信息是相关的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:36:04.100

进程只是一堆线程，它们是以顺序方式执行的指令流。在现代虚拟化解决方案中，就 CPU 而言，主机和客户进程一起执行，不同之处仅在于后者的 I/O 被捕获和虚拟化。内存也是虚拟化的，但这或多或少发生在硬件 MMU 中。来宾指令由 CPU 直接执行，否则它将不是虚拟化而是仿真，只要它们不访问任何虚拟化资源，它们的执行速度就会与主机指令一样快。最后，这一切都取决于 CPU 能够如何应对不断增加的正在运行的进程。

有一些轻量级的虚拟化解决方案，如 Solaris 中的区域，它对进程空间进行分区，以呈现操作系统的多个副本，但这一切都发生在单个操作系统内核的保护伞下。

*纯计算*代码的性能损失非常小，通常低于 1-2%。问题在于，实际上所有程序都读取和写入数据，而计算代码通常会读取和写入大量数据。即使使用英特尔 VT-* 或 AMD-V 等解决方案，虚拟化 I/O 通常也比直接 I/O 慢得多。

确切的数字很大程度上取决于特定的硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:11:00.077

受到@Mitch Wheat 无可争辩的断言的刺激，即我在这里的原始帖子不是答案，这里尝试将其改写为答案：

我主要从事能源领域的高性能计算。我的科学家同事运行的一些计算需要 O(10^5) CPU 小时，我们正在认真考虑在不久的将来 O(10^6) CPU 小时的工作。

从我们的代码中榨取每一滴性能，我得到了丰厚的报酬，如果我能将我们的一些程序的运行时间缩短 1%，我认为这是一天的好工作。有时我需要一个月的时间才能获得这种性能改进，当然我可能会很慢，但对我们的科学家来说仍然具有成本效益。

因此，当聪明的销售人员提供最新最好的数据中心软件（虚拟化是其中一个方面）时，我不寒而栗，在我看来，这些软件只会将我的代码束缚在 250,00dwt 油轮上的一堆锚链上（即是一个比喻）。

我已经仔细阅读了这个问题，并理解 OP 并没有提出虚拟化会有所帮助，我提供的是从业者的观点。如果这仍然是过多的评论，请执行 SO 并投票关闭，我保证不会被冒犯！

# cuda - Thrust::sort 和 transform_iterator

> ID：11012525
> 
> 赞同：1
> 
> 时间：2012-06-13T10:00:47.910
> 
> 标签：cuda, transform, thrust, stable-sort

我想对一个整数值列表进行排序，但在对它们进行排序之前，我应该将它们划分为一个数字 N。所以我会有一些重复的键，我将在列表中使用这个重复的 stable_sort。

我的问题是，分割所有值并将分割后的值存储在列表中然后执行排序，或者使用transform_iterator哪个更好？正在使用 transform_iterator 将排序算法从 radix_sort 更改为 merge_sort，因为它们有巨大的时间差异。

例如：

```
//already sorted according to another parameter
thrust::device_vector<int> myvalues...

//we want to group them..
thrust::transform(myvalues.begin(), myvalues.end(), groups.begin(), divide_by_n(N));
thrust::stable_sort_by_key(groups.begin(), groups.end(), myvalues.begin(); 
```

或者

```
first = thrust::make_transform_iterator(myvalues.begin(), divide_by_n(N));
last  = thrust::make_transform_iterator(myvalues.end(),   divide_by_n(N));
thrust::stable_sort_by_key(first, last, myvalues.begin()); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:54:41.597

根据这篇文章（来自@JaredHoberock 的评论），第二个不起作用。 [如何使用 Thrust 库以较低的精度对键进行排序](https://stackoverflow.com/questions/11012040/how-to-sort-with-less-precision-on-keys-with-thrust-library/11126833#11126833)

# bash - shell 脚本中的 `kill -0 $pid` 有什么作用？

> ID：11012527
> 
> 赞同：147
> 
> 时间：2012-06-13T10:00:50.033
> 
> 标签：bash, shell, scripting, signals, kill

基本上，'0' 代表什么信号，因为[在这里](http://lxr.linux.no/linux+v2.6.16.60/include/asm-i386/signal.h#L34)我看到 SIGNAL 数字从 1 开始。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-06-13T10:16:04.647

将信号发送`0`给给定`PID`只是检查是否有任何具有给定的进程`PID`正在运行，并且您有权向其发送信号。

有关详细信息，请参阅以下联机帮助页：

*杀死(1)*

```
$ man 1 kill
...
If sig is 0, then no signal is sent, but error checking is still performed.
... 
```

*杀死(2)*

```
$ man 2 kill
...
If sig is 0, then no signal is sent, but error checking is still performed; this 
can be used to check for the existence of a process ID or process group ID.
... 
```

* * *

## 回答 #2

> 赞同：132
> 
> 时间：2013-01-12T18:08:44.293

### 这是一个很好的问题，因为...

...很难找到有关此特殊信号的文档。不管其他人怎么说，在`man 1 kill`基于 Debian 的系统中唯一提到这个信号的是：

> 特别有用的信号包括 HUP、INT、KILL、STOP、CONT 和 0。

不是特别有用，特别是如果您还不知道信号的作用。的输出也没有列出它`kill -l`，因此除非您已经知道它，否则您不会知道它。

### 在哪里可以找到它

在 Debian 和 Ubuntu 系统上，输出部分`man 2 kill`说：

> 如果 sig 为 0，则不发送信号，但仍进行错误检查；这可用于检查进程 ID 或进程组 ID 是否存在。

### 有什么好处

您可以使用它`kill -0`来检查进程是否正在运行。考虑这些例子。

```
# Kill the process if it exists and accepts signals from
# the current user.
sleep 60 &
pid=$!
kill -0 $pid && kill $pid

# Check if a PID exists. When missing, this should result
# in output similar to:
#    bash: kill: (6228) - No such process
#    Exit status: 1
kill -0 $pid; echo "Exit status: $?" 
```

您还可以使用`kill -0`来确定当前用户是否有权向给定进程发出信号。例如：

```
# See if you have permission to signal the process. If not,
# this should result in output similar to:
#     bash: kill: (15764) - Operation not permitted
#     Exit status: 1
sudo sleep 60 &
kill -0 $!; echo "Exit status: $?" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-03-26T11:12:11.597

`kill -0 $pid`是检查进程id（pid）的进程是否存在。

使用时要小心`kill -0 $pid`检查进程是否存在，因为

1.  一旦预期的进程退出，它的 pid 就可以分配给其他新创建的进程。（因此不能确定特定进程是否存在）

2.  在僵尸进程的情况下，哪个子进程正在等待父进程调用等待。在这里，它保存 $pid 并在该进程未运行时给出肯定的结果。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-13T10:11:55.997

此命令检查 $pid 中具有 PID 的进程是否处于活动状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-11T05:20:08.660

`kill -0 $pid`用于检查正在运行的进程是否处于`$pid`活动状态。但这可能很棘手，因为一旦进程退出并运行新进程，就可以重新分配进程 ID。

可以使用`killall -0 <process name>`来了解特定进程是否正在运行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-10T12:50:50.670

## 发送`EXIT`信号或发送`0`到进程将：

1.  检查进程是否存在。
2.  对进程进行各种错误检查（PID、PGID 等...）。
3.  成功后它不会发送任何输出`stdout`。
4.  如果有问题，请发送错误消息`stderr`。
5.  如果进程已失效（即僵尸），则给您一个误报。

**更明确地说，对你的 shell 脚本有用的函数是：**

```
function isProcess ()
{
    kill -s EXIT $1 2> /dev/null
} 
```

成功时不会返回任何文本`stdout`，但失败时会返回错误消息`stderr`（但我已将该错误消息重定向到`/dev/null`）。

**如果您担心 defunct/zombie 进程状态**，那么您需要使用`ps`，最好带有`--no-headers`开关。

```
#!/bin/ksh

function trim ()
{
    echo -n "$1" | tr -d [:space:]
}

function getProcessStatus ()
{
    trim $(ps -p $1 -o stat --no-headers)
}

function isZombie ()
{
    typeset processStatus=$(getProcessStatus $1)

    [[ "$processStatus" == "Z" ]]
    return $?
} 
```

# typo3 - Typo3 - 带有 direct_mail 的自定义电子邮件通讯

> ID：11012528
> 
> 赞同：2
> 
> 时间：2012-06-13T10:00:53.110
> 
> 标签：typo3, html-email, newsletter

我正在建立一个时事通讯，开始是这样的：

```
DEAR ###USER_gender### ###USER_first_name### ###USER_last_name### 
```

哪些输出

```
DEAR ###USER_gender### JOHN DOE 
```

我希望它将性别标记替换为“小姐”和“先生”，具体取决于价值。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:25:43.010

必须将额外的字段添加到字段列表中（请参阅[文档](http://typo3.org/extension-manuals/direct_mail/3.0.1/view/3/4/)）。但我不确定这是否会自动适用于非字符串字段。也许[使用钩子](http://www.typo3.net/forum/beitraege/newsletter/90796/)是您的解决方案，或者使用[另一个](http://typo3.org/extensions/repository/view/directmail_personalization)向 tt_address 添加新字段的扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:06:31.850

另一种解决方案是嵌套标记：

`###GENDER_*###USER_gender###*###`

然后将您的内容扭曲到一个新的模板对象中：

```
10 = TEMPLATE
10 {
  template < yourAlreadyProcessedContent
  marks {
    GENDER_m = TEXT
    GENDER_m.value = Sir
  }
} 
```

这有点不寻常，但有时它非常有用。

（我个人用它来替换 tt_content 记录中的版本号。）

**编辑：**

调试器示例：

下载[介绍包](http://typo3.org/download/)并安装它。之后，`Welcome`使用以下步骤将新模板记录添加到页面：

```
temp.mainTemplate = TEMPLATE
temp.mainTemplate {
  template = TEXT
  template.value = (
    Foo
    ###CONTENT###
    ###CONTENT###
    Bar
  )
  subparts {
    CONTENT < styles.content.get
  }
}

page = PAGE
page {
  typeNum = 0
  10 = TEMPLATE
  10 {
    template < temp.mainTemplate
    marks {
        TEST = TEXT
        TEST.value = ok
    }
} 
```

现在包括`CSS Styled Contnet`并启用以下选项：

`clear constants`, `clear setup`,`rootlevel`

输出应如下所示：

```
Foo

Congratulations ...

Bar 
```

如果您添加`###TEST###`到欢迎页面上的 tt_content 记录，它将被替换为`ok`.

这也适用于直邮。

**编辑：** 对不起，这只适用于渲染过程中使用的*正常扩展。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T10:17:53.363

有点晚了，但这是`direct_mail`& `tt_address`.. 中称呼的最佳解决方案，非常适合我。个性化标记只是`###USER_salutation###,`

[https://blog.webentwickler.at/individuelle-marker-in-direct-mail/](https://blog.webentwickler.at/individuelle-marker-in-direct-mail/)

# wordpress - 检索有关 wordpress 媒体库中文件的信息

> ID：11012530
> 
> 赞同：0
> 
> 时间：2012-06-13T10:00:59.553
> 
> 标签：wordpress

我正在从页面上的媒体部分输出一些文件（我正在使用一个名为相关链接的插件来执行此操作）。我可以访问文件的 id....我需要根据这个 id 查询 wordpress 以获取上传日期和描述。

我该怎么做呢？在 codex 中找不到这方面的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:02:54.363

我正在使用这个解决方案：[http ://www.emmanuelgeorjon.com/eg-attachments-1233/](http://www.emmanuelgeorjon.com/eg-attachments-1233/)

祝你好运！:)

# android - Android 从服务错误中访问活动元素

> ID：11012541
> 
> 赞同：0
> 
> 时间：2012-06-13T10:01:35.683
> 
> 标签：android, android-activity, android-service

我有一项通过警报管理器每 1 分钟运行一次的服务。该服务使用活动的变量。因此，每 1 分钟触发一次服务，并从活动中的变量中读取数据。当android自动终止活动时，就会出现问题。所以现在服务运行但由于活动不再存在而无法访问变量。

这个问题的解决方案是什么？我能做些什么 ？我可以禁止android关闭活动还是可以做其他事情？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:09:36.397

将数据存储在 SharedPreferences 或 Sqlite 数据库中，并从 SharedPreferences 或 Sqlite 数据库访问它。

Activity 或应用程序关闭后，此数据不会丢失。

谢谢。

# python - 一个设备可以有两个 UMDF 驱动程序吗？

> ID：11012544
> 
> 赞同：1
> 
> 时间：2012-06-13T10:01:46.133
> 
> 标签：python, driver, arduino, maya, umdf

这似乎是一个奇怪的问题，但我想知道是否可以将两个驱动程序与一个外围设备相关联？

我问的原因是我正在使用 Arduino 微控制器为[Maya构建输入设备。](http://en.wikipedia.org/wiki/Autodesk_Maya)Arduino 已经有自己的设备驱动程序，但我正在考虑开发一个[UMDF](http://en.wikipedia.org/wiki/Windows_User_Mode_Driver_Framework)驱动程序来获取通过串行端口从 Arduino 传入的数据并对其进行预处理以准备进入 Maya。

现在，我有两个 Python 程序正在运行——一个在 Maya 外部运行的 32 位 Python 程序，它侦听串行端口并将数据转换为 64 位版本 Maya 中的第二个 64 位程序可以理解的形式并在 Maya 场景中使用。这工作得很好，但是每次我想在 Maya 中使用这个设备时都必须启动那个外部服务器程序有点烦人。如果我可以让 UMDF 驱动程序准备好在适当类型的数据从 Arduino 输入时开始运行，那么这将非常有帮助。这种方法会奏效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:45:02.190

与其说是答案，不如说是评论/建议，但也许值得花一些时间检查过滤器驱动程序是否会为您完成这项工作。在[WDM](http://en.wikipedia.org/wiki/Windows_Driver_Model)中，您可以将其放在该设备的驱动程序堆栈上的内核设备驱动程序之上，并使用它来预处理您的设备数据。我认为在 UMDF 中也是可能的。

请参阅*[创建新的筛选器驱动程序 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/hardware/hh454832%28v=vs.85%29.aspx)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:52:53.853

您可能总是尝试使用[Teensy/Teensyduino](http://www.pjrc.com/teensy/)而不是 Arduino 来实现虚拟键盘、鼠标、操纵杆或其他 HID 设备。这不需要 Windows 驱动程序，并且从 Maya 访问键盘或操纵杆可能比串行端口更容易。

# c# - Visual Studio SOAP 服务引用客户端：请参阅 XML 消息

> ID：11012551
> 
> 赞同：2
> 
> 时间：2012-06-13T10:02:10.830
> 
> 标签：c#, .net, visual-studio-2010, web-services

我已经使用 wsdl 文件构建了基于 SOAP 的客户端，并且效果非常好。我现在遇到的一个问题是 - 我需要查看正在发送和接收的原始 SOAP 格式消息（请求和响应）。

有什么方法可以获取 XML 请求/响应？

```
SomeClient Client = new SomeClient();
var response = Client.SomeMethod(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:04:23.030

如果这是出于调试目的，您可以配置跟踪：http: [//msdn.microsoft.com/en-us/library/ty48b824.aspx](http://msdn.microsoft.com/en-us/library/ty48b824.aspx)。或者使用[Fiddler](http://www.fiddler2.com/fiddler2/)来捕获 HTTP 流量。

# c# - 与 ElasticSearch 相比，MongoDB 仅作为 NoSQL 数据库提供了哪些优势

> ID：11012552
> 
> 赞同：12
> 
> 时间：2012-06-13T10:02:15.200
> 
> 标签：c#, .net, mongodb, cloud, elasticsearch

我对 NoSql 数据库很陌生，但我真的很喜欢带有官方 c# 驱动程序的 MongoDB。它目前是我正在编写的 MVC 应用程序的后端，其简单性和速度使我的生活更轻松。

但是，我在应用程序中已经到了需要非常好的搜索的地步。我曾经使用 Solr，但对 ElasticSearch 很感兴趣。

ElasticSearch，据我所知（从非常肤浅的层面），可以做 MongoDB 作为文档数据库所能做的一切。

所以，如果我已经在使用 NoSql 数据库，并且我需要很好的搜索，那么 Mongo 有什么意义吗？用例是什么？

**Mongo更快吗？更容易使用？是 BSON 数据类型和驱动程序吗？为什么不使用 ElasticSearch 作为我的数据库？**

我目前正在使用 AppHarbor 并且喜欢“The Cloud”。我讨厌 IT，只想专注于我的应用程序。话虽如此，到目前为止我看到的唯一优势是：

*   已经有许多“云”MongoDB 提供商。使用 ElasticSearch，我必须自己设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:34:37.247

这个问题问得好。我问过自己同样的问题，并想出了以下答案。

1.  ElasticSearch 没有备份数据的好方法。例如，快速搜索“ElasticSearch 备份”和“mongodb 备份”。MongoDB 有关于如何备份数据的工具和文档。虽然有关于如何备份 ElasticSearch 数据的文档，但该文档似乎并不成熟。
2.  一般来说，MongoDB 有更好的文档。特别是它的管理文档比 ElasticSearch 要好得多。
3.  MongoDB 提供商业支持。您目前可能不关心商业支持，但很高兴知道它可用。
4.  MongoDB 内置了 MapReduce，而 ElasticSearch 没有。这可能不是什么大事，但值得注意。

我个人的看法是，如果您不能承受丢失数据的损失，我不会使用 ElasticSearch。我可以看到使用 ElasticSearch 作为需要实时分析的主要数据存储，但没有任何长期数据保留要求。否则，我建议同时使用 MongoDB 和 ElasticSearch。ElasticSearch 有一个 MongoDB River 插件。这使得自动更新 ElasticSearch 索引变得非常容易。

# c# - 如何在wpf中突出显示当前输入的文本框文本

> ID：11012555
> 
> 赞同：1
> 
> 时间：2012-06-13T10:02:17.417
> 
> 标签：c#, wpf

```
public partial class MultiTexbox_2 : Window
{
    Control texbox_full_details = null;      //get all textbox property and method in when gotfocused
    Control button_full_details;             //get all button property and method in when click event
    Button keyboard_button;     //behave like button

    public MultiTexbox_2()
    {
        this.InitializeComponent();

        // Insert code required on object creation below this point.
    }

    private void btn_a_Click(object sender, RoutedEventArgs e)
    {
        button_full_details = (Control)sender;
        all_in_one();

        //var caretIndex = txt_diplay_1.CaretIndex;
        //txt_diplay_1.Text = txt_diplay_1.Text.Insert(caretIndex, btn_a.Content.ToString());
        //txt_diplay_1.Focus(); 
        //txt_diplay_1.CaretIndex = caretIndex + 1;    

    }

     private void btn_b_Click(object sender, RoutedEventArgs e)
    {
        button_full_details = (Control)sender;

        all_in_one();
    }

    private void btn_c_Click(object sender, RoutedEventArgs e)
    {
        button_full_details = (Control)sender;

        all_in_one();
    }

    private void txt_diplay_1_GotFocus(object sender, RoutedEventArgs e)
    {
        texbox_full_details = (Control)sender;           

    }

    private void txt_diplay_2_GotFocus(object sender, RoutedEventArgs e)
    {
        texbox_full_details = (Control)sender;
    }

    public void all_in_one()
    {
        keyboard_button = button_full_details as Button;
        if (texbox_full_details != null)
        {
            //TextBox tb = texbox as TextBox;
            //tb.Text += btn.Content;

            TextBox txt_box = texbox_full_details as TextBox;
            var caret_index = txt_box.CaretIndex;
            txt_box.Text = txt_box.Text.Insert(caret_index, keyboard_button.Content.ToString());
            txt_box.Focus();
            txt_box.CaretIndex = caret_index + 1;               
        }           

    }
} 
```

它的输出将是这样的

![结果1](../Images/e1b74dc23e026297e044f426b461836b.png)

但需要这样的输出

![结果2](../Images/5e6fa97e93598b281557ba125f360afd.png)

单击按钮时，它的内容将绑定在文本框中。此时当前绑定的文本框文本的背景颜色、字体颜色和字体大小应该改变。我应该怎么做才能得到那种输出。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:05:20.097

Look into SelectedText, SelectionStart and SelectionLength. [http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.aspx)

```
tb.SelectionStart = tb.Length - 1;
tb.SelectionLength = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:23:17.770

好的，所以您希望在给定条件下，您的 TextBox 文本缩放。
所以首先创建一个具有两个属性的类：EditedText 和 IsZoomed 例如：

```
public class ZoomableText
{
    public string EditedText { get; set; }
    public Boolean IsZoomed { get; set; }
} 
```

然后使用 Xaml：在 IsZoomed 上使用带有 DataTrigger 的样式，并在 IsZoomed 为 true 时更改所需的文本方面。您可以在窗口资源或应用程序资源中声明此样式。例子 ：

```
 <Style TargetType="TextBox" x:Key="LargerWhenFocusedTextBox">
        <Setter Property="FontSize" Value="12" />
        <Setter Property="FontWeight" Value="Normal" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsZoomed}" Value="True">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontWeight" Value="Bold" />
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

要使用它，只需执行以下操作：

```
 <StackPanel >
        <TextBox  Text="{Binding EditedText}" 
                  Style="{StaticResource LargerWhenFocusedTextBox}"  />
        <ToggleButton IsChecked="{Binding IsZoomed}" Content="Zoomed?" />
      </StackPanel > 
```

您将在其中将 StackPanel 的 DataContext 设置为 ZoomableText 对象的实例。

您可能希望使 ZoomableText 对象在其属性上实现 INotifyPropertyChanged。

对于当前更改，请处理 ToggleButton 的 Checked 事件。

请注意，如果您没有为样式提供 Key，它将自动应用于您的所有 TextBox。

# android - Android中圆角位图的边框

> ID：11012556
> 
> 赞同：23
> 
> 时间：2012-06-13T10:02:21.000
> 
> 标签：android, bitmap, border, rounded-corners

我用下面的方法制作了一个圆角的位图。现在我想在位图周围画一条线。

```
private BitmapDrawable roundCornered(BitmapDrawable scaledBitmap, int i) {

        Bitmap bitmap = scaledBitmap.getBitmap();

        result = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(),
                Bitmap.Config.ARGB_8888);
        canvas = new Canvas(result);

        color = 0xff424242;
        paint = new Paint();
        rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        rectF = new RectF(rect);
        roundPx = i;
        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(Color.BLUE);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);
        BitmapDrawable finalresult = new BitmapDrawable(result);
        return finalresult;
    } 
```

我得到了下面的图像，但我的实际需要是我必须在图像周围画一个边框。

![](../Images/9439034918256a304d12d204c09f6961.png)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-22T12:32:46.790

我为自己整理了以下内容。

```
public static Bitmap getRoundedCornerBitmap(Bitmap bitmap, int color, int cornerDips, int borderDips, Context context) {
    Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(),
            Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(output);

    final int borderSizePx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, (float) borderDips,
            context.getResources().getDisplayMetrics());
    final int cornerSizePx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, (float) cornerDips,
            context.getResources().getDisplayMetrics());
    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
    final RectF rectF = new RectF(rect);

    // prepare canvas for transfer
    paint.setAntiAlias(true);
    paint.setColor(0xFFFFFFFF);
    paint.setStyle(Paint.Style.FILL);
    canvas.drawARGB(0, 0, 0, 0);
    canvas.drawRoundRect(rectF, cornerSizePx, cornerSizePx, paint);

    // draw bitmap
    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    canvas.drawBitmap(bitmap, rect, rect, paint);

    // draw border
    paint.setColor(color);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth((float) borderSizePx);
    canvas.drawRoundRect(rectF, cornerSizePx, cornerSizePx, paint);

    return output;
} 
```

当然，感谢[http://ruibm.com/?p=184](http://ruibm.com/?p=184)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:14:09.023

如何准备像下面这样的 9-patch 图像并将其设置为背景使用`android:background`

![在此处输入图像描述](../Images/bbb11e840a112583eb8165b735ad4c6d.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-08T11:46:11.260

我使用**BitmapShader**和**drawRoundRect**做它，它对我有用，看看截图

![在此处输入图像描述](../Images/8b7db35588a5a28a0e22bd0156f57d2d.png)

```
RectF roundRect; // the Rect you have to draw into
Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

// draw the border at bottom
mPaint.setStyle(Paint.Style.FILL);
mPaint.setColor(mBorderColor);
canvas.drawRoundRect(roundRect, mRadius, mRadius, mPaint);

// ------------------ draw scheme bitmap
roundRect.set(itemRect.left + mBorderSize, itemRect.top + mBorderSize, itemRect.right - mBorderSize, itemRect.bottom - mBorderSize);
Shader shader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
mPaint.setShader(shader);
canvas.drawRoundRect(roundRect, mRadius, mRadius, mPaint);
mPaint.setShader(null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-08T12:08:22.207

我做了很多搜索以通过代码实现该效果，在我找到另一种方法之前，它还不够完美，你可以看到每个角落的锯齿，我设置了 Paint.setAntiAlias(true), Paint.setDither(true), Paint.setFilterBitmap （真的），但它不起作用，所以我希望有人能帮助我。 ![在此处输入图像描述](../Images/95eedda9de002b320a0b758a6f826965.png)

```
RectF roundRect = new RectF(itemRect);

Bitmap bitmap = scheme.getSchemeBitmap(getResources());

mPaint.setStyle(Paint.Style.FILL);
mPaint.setColor(mSchemeSelectedColor);
canvas.drawRoundRect(roundRect, mSchemeCornerRadius, mSchemeCornerRadius, mPaint);

roundRect.set(itemRect.left + mBorderSize, itemRect.top + mBorderSize, itemRect.right - mBorderSize, itemRect.bottom - mBorderSize);
Path clipPath = new Path();
clipPath.addRoundRect(roundRect, mSchemeCornerRadius, mSchemeCornerRadius, Path.Direction.CW);
canvas.save(Canvas.CLIP_SAVE_FLAG);
canvas.clipPath(clipPath);
canvas.drawBitmap(bitmap, null, roundRect, mPaint);
canvas.restore(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:07:57.770

不幸的是，Android 中没有漂亮而简洁的“边框”参数，但最简单的方法是将其封装在另一个布局中，将父布局的背景设置为边框颜色/可绘制，然后在其上设置填充。填充将出现在您的 BitmapDrawable 周围。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-26T07:29:45.510

我的方式：

```
 public static Bitmap getRoundedCornerBitmap1(Bitmap bitmap, int color, int cornerDips, int borderDips) {

            Bitmap output = Bitmap.createBitmap(bitmap.getWidth()+2*borderDips,
                    bitmap.getHeight()+2*borderDips,
                    Bitmap.Config.ARGB_8888);

            Canvas canvas = new Canvas(output);

            canvas.drawColor(Color.TRANSPARENT);

            final RectF rectF = new RectF(0, 0, output.getWidth(), output.getHeight());
            final Paint paint = new Paint();
            // prepare canvas for transfer
            paint.setAntiAlias(true);
            paint.setStrokeWidth((float) borderDips);
            paint.setColor(Color.WHITE);
            paint.setStyle(Paint.Style.FILL);

            canvas.drawRoundRect(rectF, borderDips, borderDips, paint);

            canvas.drawBitmap(bitmap, borderDips, borderDips, null);
            bitmap.recycle();
            return output;
        } 
```

**结果**

[![在此处输入图像描述](../Images/b5ae2a9285bea27cbc8fdfdf40bacfb5.png)](https://i.stack.imgur.com/kYMjg.png)

# android - 寻求外行解释未决意图概念

> ID：11012557
> 
> 赞同：5
> 
> 时间：2012-06-13T10:02:29.177
> 
> 标签：android, android-pendingintent

这是一个相当陈旧的问题，但坦率地说，我还没有找到能满足我好奇心的答案。

亲爱的读者，在您跳到 android 开发人员参考资料粘贴我之前，请注意我已经阅读了 Intent / Pending Intent 文档，但尚未解决我的困惑。

让我印象深刻的是 Intent 模型是 android 系统的核心，因此是高度通用的。正因为如此，我看到的关于它的用法的例子往往是多种多样的。这种变化混淆了我正在尝试学习的概念，这令人沮丧。

我的问题很简单，但可能很难用简单的术语来解释。我了解意图是对其他活动的消息，并且其他活动可以声明对它们的清单感兴趣。待处理的意图，意图的包装，让我感到困惑。

1.  我看到有关权限和令牌的文档。我明白了，但是为什么需要将待处理的意图作为一个单独的实体——它会启用什么行为？
2.  待处理的意图会导致哪些活动/任务生命周期行为？
3.  什么时候需要广播接收器？
4.  广播接收器的限制是什么？

我意识到这些是严重的新手问题（我是），但我非常想了解这些核心概念，所以我不必依赖示例/指南/官方文档。

欢迎任何反馈。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:23:01.857

PendingIntent 的主要目的是给另一个应用程序书面许可来代替你做某事。应用程序被允许做的事情基本上受到以下两个因素的限制：

*   能见度。其他应用程序无法调用未提供公开可见（或任何）意图过滤器的服务或活动等组件。它们只能由您的应用程序使用指定其包和类名的显式意图来调用。
*   权限。每个应用程序都可以请求一定数量的权限。这些大多是预定义的权限，但您也可以选择定义自己的权限，尽管我从未使用过。您的应用程序不能做任何超出这些权限的事情。

现在，通过未决意图，您可以克服这两个限制，如果*具有*所需权限和可见性来做某事的应用程序允许*您*代替她做某事。例如，一个应用程序可以允许您调用她的其中一个私有活动，如果它为您提供了一个未决意图，其中包含所述活动的显式意图。

[编辑] 例如，它们与警报管理器一起使用。它通过给它一个（待定的）意图来告诉警报管理器什么和什么时候做。由于您的应用程序在时间到来时可能不再存在，因此警报管理器必须为您发送它。这意味着这些意图只能做警报管理器被允许做的事情，而不是你的应用程序被允许做的事情。如果允许警报管理器简单地做任何事情，那么每个应用程序都可以通过使用警报管理器作为代理来做任何事情。因此，您必须使用挂起的意图来专门授予警报管理器为您的特定意图所需的权限。[/edit]

除此之外，与常规意图没有太大区别，至少就使用而言。它确实会因粘性意图等而变得更加复杂，但至少据我所知，这就是它的一般要点。

当您想要对某些[系统事件](http://developer.android.com/reference/android/content/Intent.html)或其他应用程序的事件做出反应时，需要广播接收器。广播接收器是不可见的，它不创建任何形式的视图，也不涉及任何形式的用户交互。优点是无论您的应用程序（或者更确切地说，您的活动）当前是否正在运行，这都可能发生。

A broadcast receiver is only granted about 10 seconds to do stuff, after that it gets killed by the system. So if you want to perform any kind of long running processes you'll have to use a background service, or open up an Activity to let your users do stuff.

# playframework - 是否可以使用 javaagent 运行 Play Framework 2.0 服务器？

> ID：11012562
> 
> 赞同：5
> 
> 时间：2012-06-13T10:03:05.293
> 
> 标签：playframework, playframework-2.0, javaagents

我希望能够使用 javaagent 运行 Play Framework 2.0 服务器。

网络上的一些资源（请参阅[此处](https://newrelic.com/docs/java/java-agent-installation)和[此处](https://groups.google.com/forum/?fromgroups#!searchin/play-framework/javaagent/play-framework/Gn-38WIn8S0/wuBMRvS4PL8J)）表明这可以通过附加`-javaagent:/path/to/agent.jar`来完成，`play run`但它似乎对我不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:02:08.853

我在 Heroku 中使用它，工作正常如下（在我的 Procfile 中）：

```
 play ${JAVA_OPTS} ${MYCONFIG} -javaagent:/newrelic/newrelic.jar run 
```

我的**newrelic**文件夹位于根目录下，与**app处于同一级别**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:25:26.983

SBT 的 java 命令行在文件夹中的“ ”`build.bat`批处理文件 (Win) 或“ `build`” shell 脚本 (U*X) 中定义`%PLAY2_HOME%/framework`

您可以通过调整那里定义的参数来添加 javagent 或调整 SBT/Play2 使用的其他 JVM 设置。这可能是 Heroku 的聪明人已经做过的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T20:32:37.733

在不修改脚本的情况下，没有干净的方法可以将 -javaagent 参数传递给使用 play 2.0.1-2.0.4 的 java 命令调用。

我能够使用以下技术使 javaagent 工作：

```
# Modify the play/framework/build script to include an extra environment variable
sed -i 's/^java\( \${PLAY_OPTS}\)\?/java ${PLAY_OPTS}/' ${playPath}/framework/build 
```

然后可以像这样传递 -javaagent 参数：

```
export PLAY_OPTS='-javaagent:/lib/newrelic/newrelic.jar'

${playPath}/play -Dconfig.file=conf/prod.conf -Dlogger.file=conf/prod-logger.xml start 
```

**更新**

一个不幸的旁注——我刚刚从 New-Relic 支持中发现，New-Relic 现在绝对不支持 play-framework 2.x (2012-10-04)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T11:23:26.840

示例不起作用的原因是因为示例适用于 Play 1.x，而您使用的是 play 2.x。Play 1.x 使用 Java（通过 python 脚本），而 Play 2 使用 SBT。

您需要配置 SBT。我不是 SBT 专家，但从谷歌搜索，我会认为只是运行

```
play -javaagent:/path/to/agent.jar 
```

然后`run`一旦控制台启动就可以解决问题，但如果这不起作用，那么就是找出如何将 javaagent 语法添加到 SBT 控制台的情况。

# twitter-bootstrap - Twitter Bootstrap“.container”类：如何在语义上使用它？

> ID：11012563
> 
> 赞同：5
> 
> 时间：2012-06-13T10:03:06.143
> 
> 标签：twitter-bootstrap, less, mixins, template-mixins

一天前，我决定玩转 Twitter Bootstrap。发现它制作精良，但我不喜欢所有那些污染我的 html 的类。

所以我正在尝试使用 Less 来使其更具语义化。**在我跨入 .container**类之前，我做得很好。**“mixins.less”**文件（第 580 行）中有一个 mixin，用于设置容器宽度。但是如果不直接在 html 中包含该类，我就无法使其工作。将其放入自定义文件时，我总是会遇到编译错误。我尝试将其复制并插入到我的文件中，但没有成功……有人经历过这个吗？

当然，我可以手动强制宽度，但我认为这不是最好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T06:43:39.977

[这](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html)是迄今为止我发现的最好的治疗方法。借用作者的例子：

大多数人使用这个：

```
<div class="row">
  <div class="span6">...</div>
  <div class="span6">...</div>
</div> 
```

如果你像我一样，那么你正试图做到这一点：

```
<!- our new, semanticized HTML -->
<div class="article">
  <div class="main-section">...</div>
  <div class="aside">...</div>
</div>

<!-- its accompanying Less stylesheet -->
.article {
  .makeRow();        // Mixin provided by Bootstrap
  .main-section {
    .makeColumn(10); // Mixin provided by Bootstrap
  }
  .aside {
    .makeColumn(2); // Mixin provided by Bootstrap
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:18:15.383

上面答案的问题是 makeRow() 和 makeColumn() 混合没有响应。我期待着写语义类名，但我没有看到写例如**row**和**span6 offset1**类名时的结果。

您可以查看[https://github.com/twitter/bootstrap/issues/2242](https://github.com/twitter/bootstrap/issues/2242)以获取更多信息。

# validation - 使用 BigDecimal 进行 Struts2 验证

> ID：11012564
> 
> 赞同：0
> 
> 时间：2012-06-13T10:03:06.587
> 
> 标签：validation, struts2

在我的数据库中，我已将字段的类型从 VARCHAR 更改为 DECIMAL。因此，我将 java 模型类中的类型从 String 更改为 BigDecimal。

在我之前的 XML 验证文件中，我有一个 requiredString fieldValidator。如果我离开它，每次我在表单字段中输入值（一个大的小数）时，requiredString fieldValidator 都会触发。（可能应该将 String 转换为 BigDecimal 的参数拦截器存在问题）。

无论如何，对于同一个字段，我有另一个字段验证器，它是一个正则表达式。

所以我想如果我不使用requieredString，只使用正则表达式验证器就可以了，但不是。如果我不填写该字段，则不会触发错误。

所以..总结一下：

我的行动有一个受益人类的字段。在 Beneficiairy 类中，我有一个 BigDecimal 字段。我的 xml 验证文件就像这个字段：

```
<field name="benef.nirBenef">
    <field-validator type="regex">
        <param name="expression"><![CDATA[^(1|2)\d{14}$]]></param>
        <message key="error.securityNumber"/>
    </field-validator> 
```

当该字段为空时，验证说没问题。

为什么 ？

当我使用 requiredstring 验证器时，即使值很好，验证也会显示它是错误的

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:09:20.933

我找到了……任何物体都是一样的……

*/ 创建一个文件，说明哪些字段是复杂的 文件名称：name_of_the_action-conversion.properties

例如我的动作类是 BenefInfos.java，所以我的属性文件是：BenefInfos-conversion.properties

```
benef.nirBenef=model.BigDecimalConverter
benef.nirAssure=model.BigDecimalConverter 
```

该值是模型包中我的转换器类 BigDecimalConverter 的名称

*/ 创建 BigDecimalConverter.java

```
public class BigDecimalConverter extends DefaultTypeConverter {

@Override
public Object convertValue(Map Context, Object values, Class classe) {
    BigDecimal field = null;

    if(classe == BigDecimal.class) {
        String value = ((String[]) values)[0];
        field = new BigDecimal(value);
    }

    return field;
} 
```

}

*/现在如果你想验证，你必须创建自己的验证器。这样做：

*/ 添加 validators.xml 来声明你自己的验证器：

```
<validators>
    <validator name="socialsecurityformat" 
        class="validator.SocialSecurityValidator"
    />
</validators> 
```

*/创建验证器类（这里是SocialSecurityValidator）

```
public class SocialSecurityValidator extends FieldValidatorSupport{
  public void validate(Object o) throws ValidationException {
    String fieldName = this.getFieldName();

    if(this.getFieldValue(fieldName, o) != null) {
        String value = ((BigDecimal)this.getFieldValue(fieldName, o)).toString();
        Pattern p = Pattern.compile("^(1|2|7)\\d{14}$");
        Matcher m = p.matcher(value);

        if(!m.matches()) {
            addFieldError(fieldName, o);
        }
    }
  } 
```

}

*/ 最后在验证 xml 文件中，您使用自己的验证器。

```
<field name="benef.nirBenef">
    <field-validator type="required">
        <message key="error.requiredField"/>
    </field-validator>
    <field-validator type="socialsecurityformat">
        <message key="error.securityNumber"/>
    </field-validator>
</field> 
```

希望这会有所帮助

# emacs - Emacs 缩进行功能

> ID：11012570
> 
> 赞同：3
> 
> 时间：2012-06-13T10:03:29.590
> 
> 标签：emacs, elisp

我尝试在 emacs 中缩进 sql 文件行，我认为 c-indent-line 对我来说非常好，所以我将这段代码写入我的 init 文件：

```
(defun my-sql-mode ()
    (setq indent-line-function 'c-indent-line)
    )

(add-hook 'sql-mode-hook 'my-sql-mode) 
```

但是当我使用制表符缩进该行时，它总是给我“错误类型参数：stringp，nil”的提示。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:28:40.567

Emacs 中的缩进通常是智能的，但它不是魔法。

`c-indent-line`是设计用于 C 和 C++ 代码的函数。它在其他情况下可能不起作用，这不足为奇，而且我不确定您在面对 SQL 代码时期望它做什么？

恐怕答案很简单：不要那样做。

但是，如果您告诉我们您希望它做什么，那么有人可能会提供帮助。

# cakephp - get user id of just registered user in CakePHP

> ID：11012571
> 
> 赞同：0
> 
> 时间：2012-06-13T10:03:34.450
> 
> 标签：cakephp, cakephp-2.1

How can i retrieve the user id of a user who has recently register.. in CakePHP 2.1 ie

right now, user with name `poo` entered some registeration credentials like `username` and `password` and

database structure is below

## users

```
id  Auto_Increment
username
password 
```

now, once the user is created , i want to display a message to user as

**You have registered successfully and you id is xxx** these xxx are integer number

* * *

Code for register.ctp view

```
echo $this->Form->create('User');
echo $this->Form->input('first_name', array('label'=>'First Name'));
echo $this->Form->end('Register'); 
```

* * *

Code for controller

```
 public function register(){
            if ($this->request->is('post')){

                if ($this->User->save($this->request->data)){

                   // $this->Session->setFlash('User is created' . $this->YourModel->id);
                    $this->Session->setFlash(__('You have registered successfully and your ID is %s', $this->YourModel->id));
                    $this->redirect(array('action'=>'index'));
                } else {
                    $this->Session->setFlash('Cannot register a user');
                }

            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:19:08.907

调用模型的 save() 函数后，可以通过属性获得刚刚添加的 ID

`$this->YourModel->id;`

您可以将 ID 传递给视图，或者只创建一条 Flash 消息：

```
$this->Session->setFlash(__('You have registered successfully and your ID is %s', $this->YourModel->id));` 
```

请参阅[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-save-array-data-null-boolean-validate-true-array-fieldlist-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-save-array-data-null-boolean-validate-true-array-fieldlist-array)

# php - webmatrix and php directing to another page

> ID：11012574
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:03:40.020
> 
> 标签：php, mysql

I have a simple application that I would like to read data from mysql. My index page include simple form to send data to server to process , especially to match data against database.

```
<form action="page.php" method="post">

</form> 
```

In the page.php, I do the following

```
define('DATABASE','Users');
define('TABLE','poll');
define('HOST','localhost');
define('USER','root')
define('PASSWORD','');
$conn=mysql_connect(HOST,USER,PASSWORD) or die("Unable to connect to specified DB");
mysql_select_db(DATABASE); etc 
```

But when I submit the form, I receive the 500.0 error message that claims the unmatched ISAPI setup module. I am thinking webmatrix offer all configuration by default, do you have any idea of how to fix this ? Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:40:21.013

```
 $conn = mysql_connect("localhost", "username", "password");
 if(!$conn)
 {
die('Could not connect '.mysql_error());
 }
 mysql_select_db("dbname"); 
```

# .net - 允许在窗口上保持比例的同时调整大小

> ID：11012579
> 
> 赞同：1
> 
> 时间：2012-06-13T10:03:54.620
> 
> 标签：.net, wpf, mvvm, resize, window

我想要一个用户可以调整大小的窗口，并且我希望这个窗口保持比例（如果可能的话，MVVM 方式！）。

我有两种不同的方法：

*   处理`SizeChangedEvent`and 调整`Width`or `Height`。工作但窗口在调整大小时有非常奇怪的动画。
*   处理`MouseUp`事件，调整`Width`或`Height`用户释放按钮时（调整大小时）。不幸的是，`MouseUp`当您在调整大小后释放 LeftButton 时，该事件不会触发。我不能使用`MouseBinding`，因为`MouseGesture`没有“MouseUp”参数，只有一个`LeftClick`！

你能帮我，给我建议、代码、链接或任何有用的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:25:00.210

您采用的第一种方法是正确的，另一种方法是`win32 interop`按照以下帖子中的说明使用 -

[http://blog.mikeobrien.net/2009/09/maintaining-aspect-ratio-when-resizing.html](http://blog.mikeobrien.net/2009/09/maintaining-aspect-ratio-when-resizing.html)

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/b0df3d1f-e211-4f54-a079-09af0096410e](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/b0df3d1f-e211-4f54-a079-09af0096410e)

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/77b566aa-be88-47a4-8c29-b1e44946348e/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/77b566aa-be88-47a4-8c29-b1e44946348e/)

其他类似的 SO 线程 -

[如何在 WPF 窗口中只允许统一调整大小？](https://stackoverflow.com/questions/386484/how-can-i-only-allow-uniform-resizing-in-a-wpf-window)

[调整 WPF 窗口的大小，但保持比例？](https://stackoverflow.com/questions/2471867/resize-a-wpf-window-but-maintain-proportions)

但是要完全消除闪烁效果会很困难。

# css - 如何在 jquerymobile 中将两个内联按钮缩放到设备宽度？

> ID：11012585
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:04:24.010
> 
> 标签：css, jquery-mobile

如何在 jquerymobile 中将两个内联按钮缩放到设备宽度。

```
<a href="#faq" data-role="button" data-inline="true">FAQ</a>
<a href="#help" data-role="button" data-inline="true">HELP</a><br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:09:13.340

尝试使用简单的 CSS

```
a {
    display: inline-block;
    width: 50%;
} 
```

或者，如果您希望每个按钮成为整个屏幕宽度，请使用`width: 100%`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:09:52.590

尝试使用**ui-grids**

```
<div class="ui-grid-a">
<div class="ui-block-a"><a href="#faq" data-role="button">FAQ</a>
</div>
<div class="ui-block-b"><a href="#help" data-role="button">HELP</a>    </div>
</div><!-- /grid-a --> 
```

# windows - Why my UPnP device doesn't return services registered in UPnP SCPD xml file?

> ID：11012591
> 
> 赞同：2
> 
> 时间：2012-06-13T10:04:48.547
> 
> 标签：windows, delphi, upnp

I register a UPnP device with:

```
var o: IUPnPRegistrar;
    W: string;
    R: HRESULT;
begin
  w := TFile.ReadAllText('UPnPDevice_Desc.xml');
  o := CoUPnPRegistrar.Create as IUPnPRegistrar;
  R := o.RegisterDevice(w, ...);
end; 
```

File UPnPDevice_Desc.xml:

```
<?xml version="1.0"?>
<root xmlns="urn:schemas-upnp-org:device-1-0">
<specVersion>
    <major>1</major>
    <minor>0</minor>
</specVersion>

<device>
    <pnpx:X_deviceCategory xmlns:pnpx="http://schemas.microsoft.com/windows/pnpx/2005/11">Other</pnpx:X_deviceCategory>
<!--<pnpx:X_hardwareId xmlns:pnpx="http://schemas.microsoft.com/windows/pnpx/2005/11">Microsoft/SampleDevice/10000/urn:microsoft-com:device:SampleDimmerDevice:1</pnpx:X_hardwareId>-->
<!--    <df:X_containerId xmlns:df="http://schemas.microsoft.com/windows/2008/09/devicefoundation">{8C7B310D-90F8-40D4-B5EA-71D81821DEA6}</df:X_containerId>-->
    <deviceType>urn:example-com:device:uPnPDevice:1</deviceType>
    <friendlyName>My UPNP Device Hosted by Windows</friendlyName>
    <manufacturer>Example Company</manufacturer>
    <manufacturerURL>http://www.example.com/</manufacturerURL>
    <modelDescription>My UPnP Device</modelDescription>
    <modelName>uPnPDevice</modelName>
    <modelNumber>1001</modelNumber>
    <modelURL>http://www.example.com/</modelURL>
    <serialNumber>123456</serialNumber>
    <UDN>uuid:RootDevice</UDN>
    <UPC>00000-00001</UPC>

    <serviceList>
      <service>
        <serviceType>urn:schemas-upnp-org:service:SwitchPower:1</serviceType>
        <serviceId>urn:upnp-org:serviceId:SwitchPower:1</serviceId>
        <controlURL></controlURL>
        <eventSubURL></eventSubURL>
        <SCPDURL>UPnPDevice_SCPD.xml</SCPDURL>
      </service>
    </serviceList>

    <presentationURL>DimmerPresentation.htm</presentationURL>
</device>
</root> 
```

File UPnPDevice_SCPD.xml:

```
<scpd xmlns="urn:schemas-upnp-org:service-1-0">
<specVersion>
    <major>1</major>
    <minor>0</minor>
</specVersion>
<actionList>
    <action>
        <name>MagicOn</name>
    </action>
</actionList>
<serviceStateTable>
    <stateVariable>
        <name>OSMajorVersion</name>
        <dataType>i4</dataType>
    </stateVariable>
    <stateVariable>
        <name>OSMinorVersion</name>
        <dataType>i4</dataType>
    </stateVariable>
    <stateVariable>
        <name>OSBuildNumber</name>
        <dataType>i4</dataType>
    </stateVariable>
    <stateVariable>
        <name>OSMachineName</name>
        <dataType>string</dataType>
    </stateVariable>
</serviceStateTable>
</scpd> 
```

I can confirm the UPnP device has been hosted in UPnP device host service by using IUPnPDeviceFinder or M-SEARCH to find the device.

The registry

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\UPnP Device Host\Description 
```

also contain the corresponding information:

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\UPnP Device Host\Description\{00BB4949-F3B2-4F5A-B534-C6FE61B71F4E}]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\UPnP Device Host\Description\{00BB4949-F3B2-4F5A-B534-C6FE61B71F4E}\Files]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\UPnP Device Host\Description\{00BB4949-F3B2-4F5A-B534-C6FE61B71F4E}\Files\{B11E040A-6858-48BA-B1BD-85B4E8FCBA73}]
"Filename"="M:\\uPNP\\D16\\Win32\\Debug\\UPnPDevice_SCPD.xml"
"Mimetype"="text/xml; charset=\"utf-8\""

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\UPnP Device Host\Description\{00BB4949-F3B2-4F5A-B534-C6FE61B71F4E}\UDN Mappings]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\UPnP Device Host\Description\{00BB4949-F3B2-4F5A-B534-C6FE61B71F4E}\UDN Mappings\uuid:RootDevice]
@="uuid:00bb4949-f3b2-4f5a-b534-c6fe61b71f4e" 
```

When query for services of the UPnP device using

```
var Enum: IEnumVARIANT;
    Fetched: Cardinal;
    K: OleVariant;
    P: IUPnPService;
    W: WideString;
    D: IUPnPDevice
begin
  ...
  if D.Services.Count > 0 then begin
    Enum := D.Services._NewEnum as IEnumVARIANT;
    Enum.Reset;
    while Enum.Next(1, K, Fetched) = S_OK do begin
      P := IDispatch(K) as IUPnPService;
    end;
  end;
end; 
```

The D.Services.Count is 1 but the Enum doesn't fetch any services. Variable Fetched always return 0.

If I have query for Media Player UPnP device, It did return the services available.

Any ideas what's wrong with my UPnP Device that doesn't return services as indicated in SCPD xml file?

Once I registered the device, the XML description will change to:

```
<root xmlns="urn:schemas-upnp-org:device-1-0">
    <specVersion>
        <major>1</major>
        <minor>0</minor>
    </specVersion>

    <device>
        <pnpx:X_deviceCategory xmlns:pnpx="http://schemas.microsoft.com/windows/pnpx/2005/11">Other</pnpx:X_deviceCategory>
<!--
<pnpx:X_hardwareId xmlns:pnpx="http://schemas.microsoft.com/windows/pnpx/2005/11">Microsoft/SampleDevice/10000/urn:microsoft-com:device:SampleDimmerDevice:1</pnpx:X_hardwareId>
-->
<!--
<df:X_containerId xmlns:df="http://schemas.microsoft.com/windows/2008/09/devicefoundation">{8C7B310D-90F8-40D4-B5EA-71D81821DEA6}</df:X_containerId>
-->
        <deviceType>urn:example-com:device:uPnPDevice:1</deviceType>
            <friendlyName>My UPNP Device Hosted by Windows</friendlyName>
            <manufacturer>Example Company</manufacturer>
            <manufacturerURL>http://www.example.com/</manufacturerURL>
            <modelDescription>My UPnP Device</modelDescription>
            <modelName>uPnPDevice</modelName>
            <modelNumber>1001</modelNumber>
            <modelURL>http://www.example.com/</modelURL>
            <serialNumber>123456</serialNumber>
            <UDN>uuid:9742f52d-f39f-4eaf-9ecf-bb742e9d79e9</UDN>
            <UPC>00000-00001</UPC>
            <serviceList>
                <service>
                    <serviceType>urn:schemas-upnp-org:service:SwitchPower:1</serviceType>
                    <serviceId>urn:upnp-org:serviceId:SwitchPower:1</serviceId>
                    <controlURL>
                        /upnphost/udhisapi.dll?control=uuid:9742f52d-f39f-4eaf-9ecf-bb742e9d79e9+urn:upnp-org:serviceId:SwitchPower:1
                    </controlURL>
                    <eventSubURL>
                        /upnphost/udhisapi.dll?event=uuid:9742f52d-f39f-4eaf-9ecf-bb742e9d79e9+urn:upnp-org:serviceId:SwitchPower:1
                    </eventSubURL>
                    <SCPDURL>
                        /upnphost/udhisapi.dll?content=uuid:40c39217-e93b-4d0a-b5e0-abc582b2a2ed
                    </SCPDURL>
                </service>
            </serviceList>
        <presentationURL>
            /uuid:9742f52d-f39f-4eaf-9ecf-bb742e9d79e9/DimmerPresentation.htm?/upnphost/udhisapi.dll?content=uuid:9742f52d-f39f-4eaf-9ecf-bb742e9d79e9+uuid:9742f52d-f39f-4eaf-9ecf-bb742e9d79e9
        </presentationURL>
    </device>
</root> 
```

Note the controlURL, eventSubURL and SCPDURL has been changed. Accessing

```
http://localhost:2869/upnphost/udhisapi.dll?content=uuid:40c39217-e93b-4d0a-b5e0-abc582b2a2ed 
```

return exact content as file UPnPDevice_SCPD.xml.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:11:23.893

SCPD 文档必须添加 XML 声明。例如：`<?xml version="1.0"?>`

```
<?xml version="1.0"?>
<scpd xmlns="urn:schemas-upnp-org:service-1-0">
...
</scpd> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:54:50.187

我已经针对设备和服务 XSD 验证了您的 XML，它们没有问题。[我建议使用Intel Device Spy](http://opentools.homeip.net/dev-tools-for-upnp)等外部工具检查您正在运行的 SwitchPower 设备，以了解您的 SCPD 是否真的由该设备提供服务。我有点怀疑`SCPDURL`前面没有斜线。根据 DeviceArchitecture，它“必须与设备描述所在的 URL 相关”，因此如果它不以斜杠开头，则可能会构建一些有趣的 URL。这样你确实得到了一个服务（因为设备描述提到了它）但它无法获得任何关于它的信息，所以你可能会得到某种无效的初始化。只是一个理论。这一切都取决于那些我一无所知的 IUPnP* 实现。

第二个想法，SwitchPower 有几个你没有在 SCPD 中指定的必需功能。但这可能不是问题，只要您（尚未）尝试以标准方式访问服务。

# regex - PowerShell regex to match only the first occurence in each row in a .csv

> ID：11012593
> 
> 赞同：2
> 
> 时间：2012-06-13T10:04:54.057
> 
> 标签：regex, powershell, csv

Let's say I have a .csv file that looks a little like that:

```
"first_foo","first_foo"
"first_bar","first_bar"
"second_foo","second_foo"
"second_bar","second_bar" 
```

And with a PS script I'd like to make it look like this:

```
"first","first_foo"
"first","first_bar"
"second","second_foo"
"second","second_bar" 
```

I was thinking about using something like this:

```
$regex=[regex]"first*";
$regex.Replace('"first_foo","first_foo"',"first",1) 
```

But it doesn't work. I'm new to powershell and don't use regex so often so I probably made noob mistakes... Do you guys have a solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:12:47.700

看起来内容没有标题，您可以在运行时添加它们。此示例替换 col1 值并从字符串末尾删除 '_foo' 或 '_bar'：

```
Import-Csv test.csv -Header col1,col2 | Foreach-Object {
    $_.col1 = $_.col1 -replace '(_foo|_bar)$'
        $_
}

col1   col2      
----   ----      
first  first_foo 
first  first_bar 
second second_foo
second second_bar 
```

# vb.net - Shell in .Net displaying file not found

> ID：11012594
> 
> 赞同：1
> 
> 时间：2012-06-13T10:04:58.287
> 
> 标签：vb.net

Folks,

I was using Shell("LPR -P " & IP & " -S " & IP & "c:\label.txt", AppWinStyle.Hide) in my code earlier in my code to send print to printer. suddenlt it stopped working. i started getting file not found error. then i chanegd my code to below, but still no show. now i an getting the following error

> System.ComponentModel.Win32Exception was caught
> ErrorCode=-2147467259 Message=The system cannot find the file specified NativeErrorCode=2 Source=System StackTrace: at System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo) at System.Diagnostics.Process.Start() at xxxxxx.LPRProcess(String pstrFilePath, String pstrQueue, String pstrPrinter) in I:\Visual Studio 2010\Projects\xxxxxx\ScanInSn.vb:line 201 InnerException:

New code

```
 Private Function LPRProcess(ByVal pstrFilePath As String, ByVal pstrQueue As String, ByVal pstrPrinter As String) 
    Dim prcLprInfo As New ProcessStartInfo 
    prcLprInfo.FileName = "Lpr" 
    prcLprInfo.CreateNoWindow = True 
    prcLprInfo.WindowStyle = ProcessWindowStyle.Hidden 
    prcLprInfo.UseShellExecute = False 
    prcLprInfo.RedirectStandardOutput = True 
    prcLprInfo.Arguments = "-S " & pstrPrinter & " -P " & pstrQueue & " """ & pstrFilePath & """" 
    Dim prcLpr As New Process 
    Dim strOutput As String 
    Try 
        'Stage = "Run Process.Start( )" 
        prcLpr.StartInfo = prcLprInfo 
        prcLpr.Start() 
        strOutput = prcLpr.StandardOutput.ReadToEnd() 
        'Stage = "Process started, wait for it to exit" 
        If Not prcLpr.HasExited Then prcLpr.WaitForExit() 
    Catch ex As Exception 
        Throw New Exception("Error running LPR process: " & ex.Message) 
    Finally 
        prcLpr.Close() 
        prcLpr.Dispose() 
    End Try 
    If strOutput.Length > 0 Then 
        Throw New Exception("LPR ERROR: " & strOutput) 
    End If 
End Function 
```

Any ideas? (using .net 4.0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T09:21:50.693

通过更改 Visual Studio 项目 Prpperties 中的设置解决了该问题。

Visual Studio > 项目 > 属性 > 编译 > 目标 CUP。

将设置更改为“AnyCPU”。

它被设置为 64 位。

谢谢汤姆和史蒂夫的帮助..

# c# - 更新gridview后，用户输入在列中为空白

> ID：11012600
> 
> 赞同：1
> 
> 时间：2012-06-13T10:05:17.037
> 
> 标签：c#, asp.net, .net, gridview, oracle11g

在网格视图中单击更新后，代码成功运行。但是当我在另一个网页中检索数据时，我更新的列是空白的。我不知道为什么会这样。这是更新和显示的代码：这是用于更新

```
 protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
         string v =     System.Configuration.ConfigurationManager.ConnectionStrings["harish"].ConnectionString;
         con = new OracleConnection(v);
         con.Open();

         string query = "update leave_module1 set name='"+GridView1.Rows[e.RowIndex].Cells[0].Text+"'";
         OracleCommand cmd = new OracleCommand(query, con);
         cmd.ExecuteNonQuery();
         ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('The Data has been added');</script>;");
         GridView1.EditIndex = -1;
         con.Close();    
} 
```

这就是 loadgrid()

```
 protected void loadgrid()
{

     string v = System.Configuration.ConfigurationManager.ConnectionStrings["harish"].ConnectionString;
        con = new OracleConnection(v);
        con.Open(); 
        cmd = new OracleCommand("select *  from leave_module1 where '"+TextBox1.Text+"' between fd and td", con);
        dr = cmd.ExecuteReader();

        GridView1.DataSource=dr;
        GridView1.DataBind();
        con.Close();
        dr.Close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:11:24.127

你没有提到你的任何`where`子句`update query`，查询应该是这样的

```
Update tableName set ColumnName = 'Value'
where IDcolumn = 1 
```

其次，您应该使用存储过程而不是这种方法。

空白列记录必须是因为您的代码（`GridView1.Rows[e.RowIndex].Cells[0].Text`）提供了空白数据，您应该通过调试来检查它并在运行时观察它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:13:06.210

您的更新语句没有`where`子句，因此将更新表中的所有行。这可能是你想要的，也可能不是。

您的`select`陈述也可能在语法上存在缺陷。它只会成功返回行，其中有一列的值的名称包含在名为的列中的值和`TextBox1.Text`名为的列中的值之间的值。`fd``td`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:11:29.617

这些是可能的解决方案或我认为会有所帮助的整个解决方案的一部分：

*   检查是否在 row_updating 事件之前没有调用 loadgrid()，因为它会导致网格丢失更改并返回正常视图。
*   还可以从此链接检查 n 理解：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdating.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdating.aspx)
*   不要将 sql 查询或连接字符串名称编码在页面后面，而是使用存储过程或使用一些包含可访问的字符串常量的类，这些都是通过解决方案。
*   始终使用 sql 参数并停止使用字符串 concats，因为它会导致 sql 感染问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T08:09:22.907

当页面回发时，gridviews 的值会被刷新。如果要保留 Gridview 中的值，则必须将这些值放入 Viewstate 中以进行进一步操作。在回发之前，您必须使用 Viewstate.add() 在视图状态中添加 Gridview 值。viewstate.add("key",value);

希望它可以帮助你。

# iphone - Designing a Login and Registration form using a table view

> ID：11012604
> 
> 赞同：0
> 
> 时间：2012-06-13T10:05:26.693
> 
> 标签：iphone, xcode

I am new to the iPhone development.I want to design a login form for an app which uses a table view .also the user verification from a server.Kindly guide me .A detailed and simplistic explanation would be gr8ly appleciated.....thanx..:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:14:20.803

已经有漂亮的完全开发的组件可以做到这一点。检查例如：[http](http://escoz.com/open-source/quickdialog) ://escoz.com/open-source/quickdialog 。在那里你可以找到一个完整的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:11:28.493

你需要有自定义的 UITableViewCell。

查看本教程：[自定义 UITableViewCell](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)

您也可以从那里下载示例源代码以便更好地理解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:19:04.553

如果你使用的是iOS5.0，那么你可以使用storyboard来创建静态tableview，如下：

[http://www.techotopia.com/index.php/Using_an_Xcode_Storyboard_to_Create_a_Static_Table_View](http://www.techotopia.com/index.php/Using_an_Xcode_Storyboard_to_Create_a_Static_Table_View)

# javascript - ExtJS application will not start

> ID：11012605
> 
> 赞同：2
> 
> 时间：2012-06-13T10:05:28.420
> 
> 标签：javascript, extjs

I am new to ExtJS (4.1) and now I am trying to make an MVC application work, but there seems to be a bug somewhere. Here is my `app.js`:

```
Ext.Loader.setConfig({enabled:true});

console.log("out");

Ext.application({
name: 'FI',

controllers:['ListController'],
launch: function() {
    console.log("launch");
   }
}); 
```

and this is the `ListController`:

```
Ext.define('Fi.controller.ListController', {
extend: 'Ext.app.Controller',
id: 'installBaseListController',
init: function() {

    console.log("init");
   }
}); 
```

All the needed js files are loaded properly and no errors are displayed in the console.

However, the only message displayed is `"out"`, meaning that the controller does not get instantiated and the applicationa itself doesn't start. Why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:51:27.853

应用程序被命名为`'FI'`（大写`I`），但控制器打开`Fi`（小写`i`）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T06:16:34.400

备查：

当您获得任何相关文件/类时也会发生这种情况 Ext.define('Xxx.xxx.Xxxx') 拼写错误（区分大小写）

或者，任何 launch/init/initComponent 函数拼写错误（区分大小写）。

# wcf - JSON WCF Method not allowed

> ID：11012606
> 
> 赞同：2
> 
> 时间：2012-06-13T10:05:28.673
> 
> 标签：wcf

I have WCF with contract like that

```
 [WebInvoke(Method = "POST",
ResponseFormat = WebMessageFormat.Json,
RequestFormat = WebMessageFormat.Json,
UriTemplate = "UpdateEncounterStatus/{BookingID}/{BookingStatus}")]
        public void UpdateEncounterStatus(string BookingID, string BookingStatus) 
```

and I call it using

```
http://localhost:1185/PMAHost/Service.svc/UpdateEncounterStatus/141/sfsa 
```

but it give

the web.config is

```
<?xml version="1.0"?>
<configuration>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="All" propagateActivity="true">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type=""/>
          </add>
          <add name="xml">
            <filter type=""/>
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="All">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type=""/>
          </add>
          <add name="xml">
            <filter type=""/>
          </add>
        </listeners>
      </source>
      <source name="XMLService.dll" switchValue="Warning, ActivityTracing">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type=""/>
          </add>
          <add name="xml">
            <filter type=""/>
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="C:\XMLServiceTrace.svclog"
           type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
           name="xml"
           traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
        <filter type=""/>
      </add>
    </sharedListeners>
    <trace autoflush="true"/>
  </system.diagnostics>
  <connectionStrings> 
```

```
 <roleManager enabled="true" />
    <membership>
      <providers>
        <remove name="AspNetSqlMembershipProvider"/>
        <add name="AspNetSqlMembershipProvider"
             type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
             connectionStringName="Login"
             enablePasswordRetrieval="false"
             enablePasswordReset="true"
             requiresQuestionAndAnswer="false"
             applicationName="/"
             requiresUniqueEmail="false"
             passwordFormat="Hashed"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="1"
             minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10"
             passwordStrengthRegularExpression="" />
      </providers>
    </membership>

    <authentication mode="Windows"/>
    <customErrors mode="RemoteOnly"/>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="PMAService.PMA">
        <endpoint address="" binding="webHttpBinding" contract="PMAService.IPMA" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp />
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <webHttpBinding>
        <binding name="defaultRest">
          <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="64" maxNameTableCharCount="2147483647" />
          <security mode="None" />
        </binding>
      </webHttpBinding>
    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <modules>
      <remove name="WebDAVModule" />
    </modules>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:28:39.093

该`UpdateEncounterStatus`方法标记为 POST 请求，当您尝试从浏览器地址栏发出请求时，您正在发出 GET 请求，因此您得到`405 Method Not Allowed error`. 要解决此问题，您必须使用`WebGet`或标记该方法`WebInvoke(Method="GET")`

**更新**：在您的情况下，您正在执行更新操作，因此根据 REST，您不应将其更改为 GET only POST。

# hadoop - 如何使用hadoop继续输入

> ID：11012609
> 
> 赞同：0
> 
> 时间：2012-06-13T10:06:00.970
> 
> 标签：hadoop, mapreduce

我有一个案例，我使用 Hadoop 来监听/接收来自 JMS 队列的消息。如果队列有消息则触发 map/reduce 程序，所以我们不希望 map reduce 死掉，我们需要循环多次执行 map/reduce 代码。

我的问题是：

1.  `public boolean nextKeyValue() throws IOException` 使用这种方法，我们每次都返回键和值。如果我返回 false，则 map reduce 代码将运行到完成。如果我返回 true，map/reduce 代码将等待下一个键值，而不是调用 reduce 方法。那么有什么方法可以在 map 方法之后运行 reduce 方法，并且 nextKeyValue 返回 true 以等待 JMS 队列下一条消息？

2.  或者任何人对 Hadoop 读取继续数据源有好的想法，然后并行执行映射/减少，与 Hstreaming 相同的功能？

# java - Java中的二维变换（平移、旋转、缩放）程序

> ID：11012611
> 
> 赞同：1
> 
> 时间：2012-06-13T10:06:05.817
> 
> 标签：java, swing, awt, transformation, graphics2d

我对 2D 转换程序有疑问

我有源代码

```
import java.awt.*;
import java.awt.geom.Line2D;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class House extends JPanel {

    MyCanvas canvas;
    JSlider sliderTransX, sliderTransY, sliderRotateTheta, sliderRotateX,
        sliderRotateY, sliderScaleX, sliderScaleY, sliderWidth;
    double transX = 0.0;
    double transY = 0.0;
    double rotateTheta = 0.0;
    double rotateX = 150.0;
    double rotateY = 150.0;
    double scaleX = 1.0;
    double scaleY = 1.0;
    float width = 1.0f;

    public House() {
        super(new BorderLayout());
        JPanel controlPanel = new JPanel(new GridLayout(3, 3));
        add(controlPanel, BorderLayout.NORTH);

        controlPanel.add(new JLabel("Translate(dx,dy): "));

        sliderTransX = setSlider(controlPanel, JSlider.HORIZONTAL, 0, 300, 150,
            100, 50);
        sliderTransY = setSlider(controlPanel, JSlider.HORIZONTAL, 0, 300, 150,
            100, 50);

// To control rotation
        controlPanel.add(new JLabel("Rotate(Theta,ox,oy): "));
        sliderRotateTheta = setSlider(controlPanel, JSlider.HORIZONTAL, 0, 360,
            0, 90, 45);

        JPanel subPanel = new JPanel();
        subPanel.setLayout(new GridLayout(1, 2));

        sliderRotateX = setSlider(subPanel, JSlider.HORIZONTAL, 0, 300, 150,
            150, 50);

        sliderRotateY = setSlider(subPanel, JSlider.HORIZONTAL, 0, 300, 150,
            150, 50);
        controlPanel.add(subPanel);

// To control scaling
        controlPanel.add(new JLabel("Scale(sx,sy)x10E-2:"));

        sliderScaleX = setSlider(controlPanel, JSlider.HORIZONTAL, 0, 200, 100,
            100, 10);

        sliderScaleY = setSlider(controlPanel, JSlider.HORIZONTAL, 0, 200, 100,
            100, 10);

// To control width of line segments
        JLabel label4 = new JLabel("Width Control:", JLabel.RIGHT);
        sliderWidth = new JSlider(JSlider.HORIZONTAL, 0, 20, 1);
        sliderWidth.setPaintTicks(true);
        sliderWidth.setMajorTickSpacing(5);
        sliderWidth.setMinorTickSpacing(1);
        sliderWidth.setPaintLabels(true);
        sliderWidth.addChangeListener(new ChangeListener() {

            public void stateChanged(ChangeEvent e) {
                width = sliderWidth.getValue();
                canvas.repaint();
            }
        });
        JPanel widthPanel = new JPanel();
        widthPanel.setLayout(new GridLayout(1, 2));
        widthPanel.add(label4);
        widthPanel.add(sliderWidth);
        add(widthPanel, BorderLayout.SOUTH);

        canvas = new MyCanvas();
        add(canvas, "Center");
    }

    public JSlider setSlider(JPanel panel, int orientation, int minimumValue,
        int maximumValue, int initValue, int majorTickSpacing,
        int minorTickSpacing) {
        JSlider slider = new JSlider(orientation, minimumValue, maximumValue,
            initValue);
        slider.setPaintTicks(true);
        slider.setMajorTickSpacing(majorTickSpacing);
        slider.setMinorTickSpacing(minorTickSpacing);
        slider.setPaintLabels(true);
        slider.addChangeListener(new ChangeListener() {

            public void stateChanged(ChangeEvent e) {
                JSlider tempSlider = (JSlider) e.getSource();

                if (tempSlider.equals(sliderTransX)) {
                    transX = sliderTransX.getValue() - 150.0;
                    canvas.repaint();
                } else if (tempSlider.equals(sliderTransY)) {
                    transY = sliderTransY.getValue() - 150.0;
                    canvas.repaint();
                } else if (tempSlider.equals(sliderRotateTheta)) {
                    rotateTheta = sliderRotateTheta.getValue() * Math.PI / 180;
                    canvas.repaint();
                } else if (tempSlider.equals(sliderRotateX)) {
                    rotateX = sliderRotateX.getValue();
                    canvas.repaint();
                } else if (tempSlider.equals(sliderRotateY)) {
                    rotateY = sliderRotateY.getValue();
                    canvas.repaint();
                } else if (tempSlider.equals(sliderScaleX)) {
                    if (sliderScaleX.getValue() != 0.0) {
                        scaleX = sliderScaleX.getValue() / 100.0;
                        canvas.repaint();
                    }
                } else if (tempSlider.equals(sliderScaleY)) {
                    if (sliderScaleY.getValue() != 0.0) {
                        scaleY = sliderScaleY.getValue() / 100.0;
                        canvas.repaint();
                    }
                }
            }
        });
        panel.add(slider);

        return slider;
    }

    class MyCanvas extends Canvas {

        public void paint(Graphics g) {
            Graphics2D g2D = (Graphics2D) g;

            g2D.translate(transX, transY);
            g2D.rotate(rotateTheta, rotateX, rotateY);
            g2D.scale(scaleX, scaleY);

            BasicStroke stroke = new BasicStroke(width);
            g2D.setStroke(stroke);

            drawHome(g2D);
        }

        public void drawHome(Graphics2D g2D) {
            Line2D line1 = new Line2D.Float(100f, 200f, 200f, 200f);
            Line2D line2 = new Line2D.Float(100f, 200f, 100f, 100f);
            Line2D line3 = new Line2D.Float(100f, 100f, 200f, 100f);
            Line2D line5 = new Line2D.Float(200f, 100f, 200f, 200f);

            g2D.draw(line1);
            g2D.draw(line2);
            g2D.draw(line3);
            g2D.draw(line5);
        }
    }

    public static void main(String[] a) {
        JFrame f = new JFrame();
        f.getContentPane().add(new House());
        f.setDefaultCloseOperation(1);
        f.setSize(700, 550);
        f.setVisible(true);
    }
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:59:36.743

不要不必要地混合 AWT 和 Swing 组件：extend`JPanel`和 override `paintComponent()`。调用`super.paintComponent(g)`将清理渲染，并`RenderingHints`改进旋转绘图。

```
class MyCanvas extends JPanel {

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2D = (Graphics2D) g;
        g2D.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);

        g2D.translate(transX, transY);
        g2D.rotate(rotateTheta, rotateX, rotateY);
        g2D.scale(scaleX, scaleY);

        BasicStroke stroke = new BasicStroke(width);
        g2D.setStroke(stroke);

        drawHome(g2D);
    }
...
} 
```

# c# - 使用 SignalR、NHibernate 和 Ninject 减少依赖关系

> ID：11012612
> 
> 赞同：2
> 
> 时间：2012-06-13T10:06:06.367
> 
> 标签：c#, nhibernate, dependency-injection, signalr

一个建筑问题。我有一个很好的解耦 MVC3 解决方案，其中一些项目运行良好。

> ```
> Proj.Core           - interfaces for data classes and services
> Proj.Services       - interfaces for model services
> Proj.Data.NH        - implementations of the data interfaces
> Proj.Services.NH    - implementations of the data / model services
> Proj.Infrastructure - setting up Ninject and NHibernate
> Proj.Tests          - unit tests
> Proj.Web            - the MVC project 
> ```

我已经将 NHibernate 设置为基础结构项目中的每个请求的会话，因此 Proj.Web 不需要引用 NHibernate（或 Ninject，就此而言）。我现在介绍 SignalR，它非常适合用于快速聊天应用程序。我在 Web 项目中放置了一个 SignalR 集线器。我现在想将聊天消息保存在数据库中，这让我有些困惑。

我想使用一项服务（我们称之为`PostService`），因此 SignalR 集线器不依赖于 NHibernate。我的其他服务被注入到控制器的构造函数中，会话被注入到服务的构造函数中。

由于 SignalR 集线器挂起，与控制器不同，`PostService`（作为 注入到构造函数中`IPostService`）不能将会话注入到其构造函数中，因为不会有会话。如果有，它将永远存在，这对于交易来说时间太长了。

我可以将会话工厂注入到 中`PostService`，并且每个方法都可以使用事务，例如

```
private void WithTransaction(Action<ISession> action)
{
    using (var session = _sessionFactory.OpenSession())
    using (var tx = session.BeginTransaction())
    {
        action(session);
        tx.Commit();
    }
}

public IPost Post(string message)
{
    WithTransaction(session =>
        {
            session.Save(new Post(message));
        });
} 
```

然后集线器将调用`_postService.Post(message);`

但是，一旦该`Post`方法做了更多的事情，我会想使用我现有的一些服务来做这些事情，因为它们已经被编写和单元测试过。由于会话是在方法中创建的，因此我无法将服务注入`PostService`构造函数，因为它们接受会话进入其构造函数。

所以，我想我有以下选择，但我不确定 a）这是一个完整的列表，还是 b）这是最好的选择：

`IDependencyResolver`一、在构造函数中注入an `PostService`，在方法中创建自己需要的服务`Post`，将session传入构造函数。System.Web.Mvc 和 SignalR 中有一个`IDependencyResolver`，因此这将（取决于`PostService`所在的项目）引入对任一库的依赖。

二、修改服务，使每个使用会话的方法都有一个作为参数传入。在没有 session 参数的情况下重载它，然后调用新的。MVC 服务调用将使用第一个，并且`PostService`将使用第二个，例如

```
public void SaveUser(IUser user) 
{
    Save(_session, user);
}

public void SaveUser(ISession session, IUser user) 
{
    session.Save(user);
} 
```

三、不要使用现有的服务。做`PostService`自己的事，即使有一些重复（例如获取用户详细信息等）

四。从服务的构造函数中删除 ISession，并将其传递给每个方法（并相应地处理`Controller`s'。

V. 别的东西。

我想我倾向于第一个，但我不确定`PostService`住在哪里。如果它进入 Proj.Services.NH，那么我将不得不引入对 System.Web.Mvc 或 SignalR 的依赖，这是我不想做的。如果它存在于 Proj.Web 中，那么我将不得不引入对 NHibernate 的依赖，我也不想这样做。它不属于 Proj.Infrastructure，因为它是应用程序代码。它应该有自己的项目，依赖于所有东西，还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:24:18.330

我会使用某种汽车工厂来提供您需要的额外服务。因此，您可以将`PostService`构造函数编写为：

```
public PostService( Func<INeededService1> factory1,Func<INeededService2> factory2 ...)
{
...
} 
```

然后使用[这个扩展](https://github.com/ninject/ninject.extensions.factory)让这些工厂自动工作（通过查询容器）。

# objective-c - 将十六进制转换为 NSString

> ID：11012613
> 
> 赞同：0
> 
> 时间：2012-06-13T10:06:06.807
> 
> 标签：objective-c, nsstring, hex

我有这个字符串

```
NSString * str = @ "01 00 00 41 8B 00 01 00 00 40 BC 00 01 00 00 43 0D 00"; 
```

我尝试使用此功能将其转换为 NSacii

```
- (NSString *)hexToString:(NSString *)string {
    NSMutableString * newString = [[NSMutableString alloc] init];
    NSScanner *scanner = [[NSScanner alloc] initWithString:string];
    unsigned value;
    while([scanner scanHexInt:&value]) {
        [newString appendFormat:@"%c",(char)(value & 0xFF)];
    }
    string = [newString copy];
    [newString release];
    return [string autorelease];
} 
```

它工作完美，但是当我想将字符串转换为十六进制时我找不到 00 这意味着结果是 01 41 8B 01 40 BC 01 43 0D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:41:03.823

```
- (NSString *)hexToString:(NSString *)string {
    NSMutableString * newString = [[NSMutableString alloc] init];
    NSScanner *scanner = [[NSScanner alloc] initWithString:string];
    unsigned value;
    while([scanner scanHexInt:&value]) {
       if (value==0 )
        {

            [newString appendString:@"\0"];

        }
        else
        {
            [newString appendFormat:@"%c",(char)(value & 0xFF)];
        }
    }
    string = [newString copy];
    [newString release];
    return [string autorelease];
} 
```

# vba - 动态构建下拉列表？

> ID：11012619
> 
> 赞同：5
> 
> 时间：2012-06-13T10:06:29.713
> 
> 标签：vba, excel, excel-2007

我需要动态构建一个下拉列表，在将特定文本输入单元格后，我执行一些 SQL 并`Dropdown`从返回的行构建一个。

事件如何集中在一个单元格（而不是整个电子表格）的值上？

我必须在创建之前将 SQL 行值“粘贴”到电子表格中`Dropdown`吗？是否可以在 VBA 中填充 ，`Dropdown`而不必将值粘贴到电子表格上，然后突出显示它们以创建`Dropdown`？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T10:12:40.990

不，不必在工作表中粘贴值来创建下拉菜单。看这个例子

```
Option Explicit

Sub Sample()
    Dim dvList As String

    '~~> You can construct this list from your database
    dvList = "Option1, Option2, Option3"

    '~~> Creates the list in Sheet1, A1
    With Sheets("Sheet1").Range("A1").Validation
        .Delete
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
        xlBetween, Formula1:=dvList
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With
End Sub 
```

# groovy - 如何为 Groovy Category 类中的方法设置别名

> ID：11012621
> 
> 赞同：1
> 
> 时间：2012-06-13T10:06:41.590
> 
> 标签：groovy, dsl

我创建了一个类：`NumberHelper`

它有方法：`roll(num)`

我想给它起别名，比如`rollOnce`，所以我写道：

```
static def rollOnce = NumberHelper.&roll 
```

当我调用`rollOnce`. 如何在 groovy 中做到这一点？

更多详情：

首先，我们为自己的业务实现 Number 类，用 Java

```
 def userBuildScript = findScript(name) as Closure
    use (NumberHelper, StringHelper, UserHelper){
        // first make the user object
        // then
        userBuildScript.call(preBuildUser, businessNumberObject)
    } 
```

我们为我们的 Number 类写了一个类别类，就是上面的 NumberHelper。

并在构建脚本中：

```
 user(someRole) { user, number ->
         it.someProperty = number.roll() // here, an exception throw
    }

    groovy.lang.MissingMethodException: No signature of method: xxx.xx.x.user.biz.Number,roll() is applicable for argument types 
```

这些信息是否足以帮助我找到原因？

并感谢您的回答，谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:11:26.463

只要原始的滚动方法也是静态的，您所拥有的就应该起作用。这在 groovy 1.8.6 中对我来说很好：

```
class NumberHelper {
    static def roll(num) {
        return new Random().nextInt(num) + 1
    }

    static def rollOnce = NumberHelper.&roll
}

def roll = NumberHelper.roll(6)
assert roll <= 6 && roll >= 1

rollOnce = NumberHelper.rollOnce(10)
assert rollOnce <= 10 && rollOnce >= 1 
```

# mongodb - 如何在erlang中访问从mongodb获取的数据？

> ID：11012623
> 
> 赞同：0
> 
> 时间：2012-06-13T10:06:45.803
> 
> 标签：mongodb, erlang

我使用[mongodb-erlang](https://github.com/mongodb/mongodb-erlang)驱动程序在 erlang 中访问 mongo db。我的一些命令执行：

```
34> {ok, Conn} = mongo:connect({localhost, 27017}).                                                          
{ok,{connection,{"localhost",27017},
                <0.89.0>,false,infinity}}

35> {ok, Data} = mongo:do(safe, master, Conn, homeweb, fun() -> mongo:find_one(user, {apartmentId, 1}) end).
{ok,{{'_id',{<<79,180,252,18,220,119,245,66,215,79,71,61>>},
            apartmentId,1.0,email,<<"e@mail.com">>,password,
            <<"efe6398127928f1b2e9ef3207fb82663">>}}} 
```

数据是一个元组。

例如在 php 数组中是从 find 请求返回的，我可以`id`使用这样的代码：`$id = $result['_id'];`.

问题是：如何在 Erlang 中访问从 db 中获取的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:43:44.367

通过[模式匹配](http://www.erlang.org/doc/reference_manual/patterns.html)。在这种情况下，“数据”保存结果，因此您可能会执行以下操作：

```
1> {{'_id', {Id}, apartmentId, ApartmentId, email, Email, password, Password}} = Data.
{{'_id',{<<79,180,252,18,220,119,245,66,215,79,71,61>>},
        apartmentId,1.0,email,<<"e@mail.com">>,password,
        <<"efe6398127928f1b2e9ef3207fb82663">>}} 
```

以大写字母开头的单词将保存这些值，例如，您可以打印它们：

```
2> ApartmentId.
1.0
3> Email.
<<"e@mail.com">>
4> Password.
<<"efe6398127928f1b2e9ef3207fb82663">>
5> Id.
<<79,180,252,18,220,119,245,66,215,79,71,61>> 
```

编辑：当您运行查询时，您实际上是在进行模式匹配。请注意= 运算符左侧的**{ok, Data} = 。**这有效地匹配结果是 {ok, Data} 形式的元组，*并且*由于 Data 未绑定到该点，因此将其分配给查询结果。

EDIT2：由于本例中的 Data 是 bson()，因此您可以参考 erlang bson 模块（用作 mongodb erlang 驱动程序的依赖项）：[http](http://api.mongodb.org/erlang/bson/) ://api.mongodb.org/erlang/bson/ 。在这种情况下，您可以使用特定的函数，例如 bson:lookup/2 和 bson:fields/1，将 bson() 文档作为参数传递（来自 mongodb:find_one/2 的结果）

# jquery - 无法在 Android 浏览器和模拟器中覆盖 jquery 移动搜索/过滤字段的标准图标

> ID：11012624
> 
> 赞同：0
> 
> 时间：2012-06-13T10:06:49.377
> 
> 标签：jquery, search, mobile, icons, field

我想用 android 特定图标替换框架列表视图搜索字段（设置时：data-filter="true"）中 jquery mobile 的标准图标。我找到了负责任的选择器并用我自己的方式覆盖了 jQM 的路径。在我的桌面浏览器（FF、Safari）上一切看起来都很好，但是一旦我启动模拟器，搜索字段中就再也没有图标了。

这是我的课程，正如我在桌面浏览器上所说的那样，但在模拟器或设备上却不行：

```
/* search icon (magnifier) at the beginning of search field */
.ui-icon-searchfield:after{
    background: url(../img/mdpi/2-action-search-dark.png) -5px -5px;
    height: 30px;
    width:30px;
    top: .8em;
    left: 0;

    border-radius: 0;
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    -webkit-border-radius: 0;
}

/* delete icon (X) at the end of search field */
.ui-icon-delete{
    background: url(../img/mdpi/1-navigation-cancel-dark.png) -7px -7px;
    height: 18px;
    width:18px;
    border-radius: 0;
    opacity: .7;

    border-radius: 0;
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    -webkit-border-radius: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:33:14.767

经过几个小时的尝试，我自己解决了我的问题。问题是图像一直在背景中，但完全不正确！

有一个名为 background-size 的新 CSS3 功能。这导致我的背景图像太大而且比例不正确。所以我将它设置为我的实际图像的大小（背景大小：32px 32px;），瞧，它显示在每个浏览器中！

```
/* search icon */
.ui-icon-searchfield:after{
    background-image: url(../img/mdpi/2-action-search-dark.png) 0 0;
    background-size: 32px 32px;
    height: 32px;
    width:32px;      
    margin-top: .15em;
    top: 0;
    left: 0;

    border-radius: 0;
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    -webkit-border-radius: 0;
}

/* delete icon */
.ui-icon-delete{
    background-image: url(../img/mdpi/1-navigation-cancel-dark.png);
    background-position: -7px -7px;
    background-size: 32px 32px;
    background-color: transparent;
    height: 32px;
    width:32px;
    border-radius: 0;
    opacity: .7;

    border-radius: 0;
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    -webkit-border-radius: 0;
} 
```

# emacs - emacs font for western and Other like rtl

> ID：11012627
> 
> 赞同：6
> 
> 时间：2012-06-13T10:07:00.963
> 
> 标签：emacs, fonts, elisp, persian, emacs24

In office like libreOffice we have two type font in style, western font and CTL font.

all English font use western font and other things like persian and arabic font use CTL font.

![libre office example ](../Images/98f63bc182e427116ba4d3df08b4723d.png)

in emacs 24 i want western text use this settings

```
 '(default ((t (:stipple nil :background "black" :foreground "chartreuse" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 96 :width normal :family monaco )))) 
```

and all rtl and persian text use some thing diffrent.

how can this be happen?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T18:54:43.103

I found a simple way to use another font for a range of character, for example for Arabic sub set. use this in your init file :

```
(set-fontset-font
   "fontset-default"
   (cons (decode-char 'ucs #x0600) (decode-char 'ucs #x06ff)) ; arabic
   "DejaVu Sans Mono") 
```

See [Modifying Fontsets](http://www.gnu.org/software/emacs/manual/html_node/emacs/Modifying-Fontsets.html)

# postgresql - 计算postgresql上两个时间戳之间的月份？

> ID：11012629
> 
> 赞同：42
> 
> 时间：2012-06-13T10:07:03.900
> 
> 标签：postgresql

我想计算两个日期之间的月数。

正在做 ：

```
SELECT TIMESTAMP '2012-06-13 10:38:40' - TIMESTAMP '2011-04-30 14:38:40'; 
```

返回：0 年 0 月 409 天 20 小时 0 分钟 0.00 秒

所以：

```
SELECT extract(month from TIMESTAMP '2012-06-13 10:38:40' - TIMESTAMP '2011-04-30 14:38:40'); 
```

返回 0。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-10-09T12:30:21.570

`age`函数返回区间：

```
age(timestamp1, timestamp2) 
```

然后我们尝试从区间中提取年份和月份并相应地添加它们：

```
select extract(year from age(timestamp1, timestamp2)) * 12 +
extract(month from age(timestamp1, timestamp2)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-17T02:31:43.970

该`age`函数给出了一个合理的间隔来使用：

```
SELECT age(TIMESTAMP '2012-06-13 10:38:40', TIMESTAMP '2011-04-30 14:38:40'); 
```

返回`1 year 1 mon 12 days 20:00:00`，然后您可以轻松地使用它`EXTRACT`来计算月数：

```
SELECT EXTRACT(YEAR FROM age) * 12 + EXTRACT(MONTH FROM age) AS months_between
FROM age(TIMESTAMP '2012-06-13 10:38:40', TIMESTAMP '2011-04-30 14:38:40') AS t(age); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-08-20T10:25:01.487

请注意，当您尝试使用日历月差时， [@](https://stackoverflow.com/users/412591/angelin-nadar) ram和[@angelin投票最多的答案并不准确。](https://stackoverflow.com/users/2754166/ram-sharma)

```
select extract(year from age(timestamp1, timestamp2))*12 + extract(month from age(timestamp1, timestamp2)) 
```

例如，如果您尝试这样做：

```
select extract(year from age('2018-02-02'::date, '2018-03-01'::date))*12 + extract(month from age('2018-02-02'::date , '2018-03-01'::date)) 
```

**结果将为 0**，但从 3 月到 2 月之间的月份，无论日期之间的天数如何，都应为 1。

所以公式应该像下面这样说我们从timestamp1和timestamp2开始：

((year2 - year1)*12) - month1 + month2 = 两个时间戳之间的日历月

在 pg 中将被翻译为：

```
select ((extract('years' from '2018-03-01 00:00:00'::timestamp)::int -  extract('years' from '2018-02-02 00:00:00'::timestamp)::int) * 12) 
    - extract('month' from '2018-02-02 00:00:00'::timestamp)::int + extract('month' from '2018-03-01 00:00:00'::timestamp)::int; 
```

您可以创建如下函数：

```
CREATE FUNCTION months_between (t_start timestamp, t_end timestamp)
RETURNS integer
AS $$
select ((extract('years' from $2)::int -  extract('years' from $1)::int) * 12) 
    - extract('month' from $1)::int + extract('month' from $2)::int
$$
LANGUAGE SQL
IMMUTABLE
RETURNS NULL ON NULL INPUT; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-07T08:32:50.963

如果要多次执行此操作，则可以定义以下[函数](http://www.postgresql.org/docs/9.1/static/sql-createfunction.html)：

```
CREATE FUNCTION months_between (t_start timestamp, t_end timestamp)
    RETURNS integer
    AS $$
        SELECT
            (
                12 * extract('years' from a.i) + extract('months' from a.i)
            )::integer
        from (
            values (justify_interval($2 - $1))
        ) as a (i)
    $$
    LANGUAGE SQL
    IMMUTABLE
    RETURNS NULL ON NULL INPUT; 
```

这样你就可以

```
SELECT months_between('2015-01-01', now()); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-12T18:25:47.803

```
SELECT date_part ('year', f) * 12
      + date_part ('month', f)
FROM age ('2015-06-12', '2014-12-01') f 
```

结果：6个月

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T10:25:42.100

给出两个日期的月差

```
 SELECT ((extract( year FROM TIMESTAMP '2012-06-13 10:38:40' ) - extract( year FROM TIMESTAMP '2011-04-30 14:38:40' )) *12) + extract(MONTH FROM TIMESTAMP '2012-06-13 10:38:40' ) - extract(MONTH FROM TIMESTAMP '2011-04-30 14:38:40' ); 
```

结果：14

必须分别提取两个日期的月份，然后提取两个结果的差异

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T10:32:26.417

我曾经有过同样的问题并写了这个......它很丑陋：

```
postgres=>  SELECT floor((extract(EPOCH FROM TIMESTAMP '2012-06-13 10:38:40' ) - extract(EPOCH FROM TIMESTAMP '2005-04-30 14:38:40' ))/30.43/24/3600);
 floor 
-------
    85
(1 row) 
```

在此解决方案中，“一个月”被定义为 30.43 天，因此它可能会在较短的时间跨度内产生一些意想不到的结果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-11T18:00:37.187

按年和月提取将按月计算：

```
select extract(year from age('2016-11-30'::timestamp, '2015-10-15'::timestamp)); --> 1
select extract(month from age('2016-11-30'::timestamp, '2015-10-15'::timestamp)); --> 1
--> Total 13 months 
```

这种方法可以维持几个月的分数（感谢 tobixen 的除数）

```
select round(('2016-11-30'::date - '2015-10-15'::date)::numeric /30.43, 1); --> 13.5 months 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-16T02:00:18.440

试试这个解决方案：

```
SELECT extract (MONTH FROM age('2014-03-03 00:00:00'::timestamp, 
'2013-02-03 00:00:00'::timestamp)) + 12 * extract (YEAR FROM age('2014-03-03   
00:00:00'::timestamp, '2013-02-03 00:00:00'::timestamp)) as age_in_month; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-24T08:47:35.053

```
SELECT floor(extract(days from TIMESTAMP '2012-06-13 10:38:40' - TIMESTAMP
'2011-04-30 14:38:40')/30.43)::integer as months; 
```

给出一个近似值，但避免重复时间戳。这使用了来自[tobixen 的答案的](https://stackoverflow.com/a/11013023/19501)提示，即除以 30.43 代替 30，以便在计算月份时长时间跨度不那么不正确。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-02T22:08:35.563

我做了一个这样的函数：

```
/* similar to ORACLE's MONTHS_BETWEEN */
CREATE OR REPLACE FUNCTION ORACLE_MONTHS_BETWEEN(date_from DATE, date_to DATE)
RETURNS REAL LANGUAGE plpgsql
AS
$$
DECLARE age INTERVAL;
declare rtn real;
BEGIN
    age := age(date_from, date_to);
    rtn := date_part('year', age) * 12 + date_part('month', age) + date_part('day', age)/31::real;
    return rtn;
END;
$$; 
```

甲骨文示例）

```
SELECT MONTHS_BETWEEN
(TO_DATE('2015-02-02','YYYY-MM-DD'), TO_DATE('2014-12-01','YYYY-MM-DD') ) 
"Months" FROM DUAL;
--result is: 2.03225806451612903225806451612903225806 
```

我的 PostgreSQL 函数示例）

```
select ORACLE_MONTHS_BETWEEN('2015-02-02'::date, '2014-12-01'::date) Months;
-- result is: 2.032258 
```

根据结果​​，您可以使用 CEIL()/FLOOR() 进行舍入。

```
select ceil(2.032258)  --3
select floor(2.032258) --2 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-08-13T22:01:53.463

尝试;

```
select extract(month from  age('2012-06-13 10:38:40'::timestamp, '2011-04-30 14:38:40'::timestamp)) as my_months; 
```

# c++ - 与自己的班级交友“>>”

> ID：11012630
> 
> 赞同：0
> 
> 时间：2012-06-13T10:07:07.997
> 
> 标签：c++, operator-overloading

我有以下课程，我与`cout`它成为朋友，现在我正在尝试与它成为朋友，`cin`但我得到一个错误......谁能帮助我，或者告诉我我做错了什么？

错误：

> c:\mingw\bin../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_algo.h:2215:4：错误：将'const RANgle'作为'int RANgle的'this'参数传递： :operator<(RANgle)' 丢弃限定符 [-fpermissive]

类`RAngle`：

```
class RAngle
{
    private:
        int *x,*y,*l;
    public:
        int solution,prec;
        RAngle(){
            this->x = 0;
            this->y = 0;
            this->l = 0;
        }

        RAngle(int i,int j,int k){
            this->x = &i;
            this->y = &j;
            this->l = &k;
        }

    friend istream& operator >>( istream& is, RAngle &ra)
    {
        is >> ra->x;
        is >> ra->y;
        is >> ra->l;

        return is ;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:16:18.697

没有足够的代码来回答您的问题。但是从错误中我会说你，你`int RAngle::operator<(RAngle)`没有定义为 const 方法，你在某个地方使用它，你只有 const。

`operator<`另外，make或其他比较运算符返回 int也不是很实用，因为这可能会导致误解。这样的运营商应该返回`bool`。

所以，会有这样的事情`bool RAngle::operator<(const RAngle& other) const { /*...*/ }`。这个主题在[这里](https://stackoverflow.com/questions/4421706/operator-overloading)和[这里](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)都有介绍。

**更新**此代码完全奇怪。为什么要使用指针`int`？为什么要将某些数据设为私有？构造函数`RAngle(int i,int j,int k)`不会像你想象的那样工作。

# javascript - 侦听特定操作的 js 小书签（在本例中是提交表单）

> ID：11012631
> 
> 赞同：1
> 
> 时间：2012-06-13T10:07:10.383
> 
> 标签：javascript, jquery, html

澄清一下，我说的是监听网络用户在任何页面上的任何操作。然后，该函数将侦听所有表单提交，并在遇到它正在寻找的表单提交 url 时委托给另一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:09:28.573

书签只是由用户触发的一段 JavaScript。只需做您通常会做的事情，以便收听表单提交（[调用`addEventListener`它们](https://developer.mozilla.org/en/DOM/element.addEventListener)）。

小书签仅在运行它的页面上运行。如果您想要在用户访问的每个页面上自动运行的东西，您需要一个浏览器扩展程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:14:50.690

这个

```
var forms = document.getElementsByTagName("FORM");
for (var i = 0, iMax = forms.length; i < iMax; ++i) {
   forms[i].addEventListener("submit", yourFunction, false);
} 
```

...应该在提交任何表单之前触发*yourFunction 。*

# emacs - AUCTeX：自定义'fill-nobreak-predicate'挂钩以尊重大括号

> ID：11012634
> 
> 赞同：2
> 
> 时间：2012-06-13T10:07:16.413
> 
> 标签：emacs, autofill, auctex

在编写 LaTeX 代码时，我使用以下 C-ish 缩进/支撑样式：

```
\foo{
  blah blah... this line is getting too long and should be wrapped
} 
```

每当我需要根据选项（本例中为 50 ）重新包装（技术上，*重新填充*）块/段落时，我点击. 这也改变了大括号的位置：`fill-column``M-q`

```
\foo{ blah blah blah... this line is getting too
  long and should be wrapped } 
```

这伤害了我的眼睛:-(事实上，我想将牙套*保持*在*原来的位置*，即：

```
\foo{ 
  blah blah blah... this line is getting too
  long and should be wrapped 
} 
```

我想我应该`fill-nobreak-predicate`为 AUCTeX 添加一个自定义钩子，或者自定义`paragraph-start`and `paragraph-separate`，但是我对 emacs lisp 不是那么熟练...

由于这个问题可能适用于任何标记文本模式，请随意填写以将其移至上游。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:57:14.540

实际上，没有fill-nobreak-predicate（顾名思义）是为了避免在某些地方断线，而您想在某些地方*强制*断线。您可能会得到更好的服务`paragraph-separate`：声明仅包含`}`或`\cmd{`不应被视为段落的一部分的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:55:35.960

在@Stefan 的建议下，我想出了这个，似乎工作得很好，对于简单的测试，

```
(add-hook 'LaTeX-mode-hook
          '(lambda ()
            (setq paragraph-separate (concat " *}\\|^ *\\\\[a-zA-Z]* ?{\\|"
                                              paragraph-separate)))) 
```

# python - 同时处理多个版本？

> ID：11012639
> 
> 赞同：1
> 
> 时间：2012-06-13T10:07:44.377
> 
> 标签：python, opencv

我目前正在开发一个基于 Opencv 的应用程序（[更多信息在这里](http://jlengrand.github.com/FaceMovie/)）。为了确保一切正常，我想用多个版本的 OpenCV（2.3、2.4）尝试相同的代码。

这主要针对 Linux 开发，但我也不介意为 Windows 找到解决方案。

作为奖励，如果我还可以在包的版本和其他从源代码编译的版本之间切换，我真的很高兴。

我目前正在考虑的解决方案是下载并编译几个版本（没有 make install），然后手动使用选择的发布文件夹进行导入。这并不能解决包安装问题，从长远来看可能无法真正使用

实现这一目标的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:17:57.050

[Virtualenv](http://pypi.python.org/pypi/virtualenv)似乎是一个很好的解决方案：

> virtualenv 是一个创建隔离 Python 环境的工具。
> 
> ...
> 
> 想象一下，您有一个应用程序需要 LibFoo 版本 1，但另一个应用程序需要版本 2。您如何同时使用这两个应用程序？

# wordpress - WordPress - 使用 inštrukcije 找不到页面

> ID：11012640
> 
> 赞同：0
> 
> 时间：2012-06-13T10:07:46.047
> 
> 标签：wordpress, idn

我有一个名为 inštrukcije 的域，其中包括 š 字符。

我使用 IDN 翻译器将其翻译为：xn--intrukcije-19b.si

我在这个域上安装了新的 WordPress：http: [//xn--intrukcije-19b.si/](http://xn--intrukcije-19b.si/)

当我尝试浏览页面时，我得到：

> 在此服务器上找不到请求的 URL /pages/。

我认为这可能是域的问题 - 我有巴尔干字符 inštrukcije 所以我在 MySQL 中更改了表 wp_options 条目 siteurl 从[http://inštrukcije.si](http://xn--intrukcije-19b.si)到[http://xn--intrukcije-19b.si](http://xn--intrukcije-19b.si)（其中我用于域...）

但是页面仍然无法正常工作...

还有什么可能是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:44:43.787

解决！

我必须做的：

1.  去设置永久链接
2.  从帖子名称更改为默认值
3.  再次从默认更改为 postname

现在正在工作...

# function - clojure 中表达式的布尔值

> ID：11012643
> 
> 赞同：3
> 
> 时间：2012-06-13T10:07:54.603
> 
> 标签：function, clojure, boolean

clojure 中是否有任何函数可以计算给定表达式的布尔值？我的意思是，如果表达式为 nil 或 false，那么此函数返回 false，否则返回 true？

```
(to-bool nil) ; => false
(to-bool false) ; => false
(to-bool java.util.Date.) ; => true
(to-bool true) ; => true
(to-bool 7) ; => true 
```

类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T10:16:28.923

`boolean`这是。

```
(boolean nil) ; => false
(boolean false) ; => false  (I assume you expect false, not true here!)
(boolean (java.util.Date.)) ; => true
(boolean true) ; => true
(boolean 7) ; => true 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-13T10:39:12.873

clojure 中只有两个逻辑假：假，无。

```
user=> (if false :true :false)
:false
user=> (if nil :true :false)
:false
user=> (if [] :true :false)
:true
user=> (if () :true :false)
:true
user=> (if #{} :true :false)
:true
user=> (if 1 :true :false)
:true
user=> (if 0 :true :false)
:true
user=> (if (java.util.Date.) :true :false)
:true 
```

# python - 使成员方法成为默认参数

> ID：11012646
> 
> 赞同：0
> 
> 时间：2012-06-13T10:08:17.723
> 
> 标签：python, jython, jython-2.5

这是我想做的事情：

```
class demo(object):
    def a(self):
        pass

    def b(self, param=self.a):  #I tried demo.a as well after making a static
        param() 
```

问题显然是无法访问函数声明行中的类。有没有办法像在 c(++) 中一样添加原型？

目前我使用了一个丑陋的解决方法：

```
def b(self, param=True): #my real function shall be able to use None, to skip the function call
    if param == True:
        param = self.a

    if param != None: #This explainds why I can't take None as default,
                      #for param, I jsut needed something as default which was 
                      #neither none or a callable function (don't want to force the user to create dummy lambdas)
        param() 
```

那么是否有可能在没有这种丑陋的工作环境的情况下实现顶部描述的东西？注意：我绑定到大约是 python 2.5 的 Jython（我知道有 2.7，但我无法升级）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:16:00.577

简短的回答：没有。

我认为最好的方法是，如果您希望能够传递 , 等对象`None`，`True`请创建一个自定义占位符对象，如下所示：

```
default_value = object()

class demo(object):
    def a(self):
        pass

    def b(self, param=default_value):
        if param is default_value:
            self.a()
        else:
            param() 
```

您*可以*将`a`函数用作 的默认值`b`，如下所示：

```
 def b(self, param=a): 
```

这将`a`在之前定义的时间内起作用`b`。**但是**该函数`a`与绑定方法不同`self.a`，因此您需要在调用它之前绑定它，并且您需要一些方法来区分传递的可调用方法和默认方法`a`，以便您可以绑定后者但是不是前者。这显然比我建议的相对较短且易读的代码要混乱得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:57:56.003

不要告诉任何人我给你看了这个。

```
class demo:
    def a(self): print(self, "called 'a'")
    def b(self, param): param(self)
demo.b.__defaults__ = (demo.a,)

demo().b() 
```

（在 2.x 中，`__defaults__`拼写为`func_defaults`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:18:46.877

您可以将方法名称放在函数定义中：

```
class Demo(object):

    def a(self):
        print 'a'

    def b(self, param='a'):
        if param:
            getattr(self, param)() 
```

但是，您仍然需要检查是否`param`具有是否为 的值`None`。请注意，这种方法不应用于不受信任的输入，因为它允许执行该类的任何功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T10:23:01.510

我喜欢[lazyr](https://stackoverflow.com/users/566644/lazyr)的[**回答**](https://stackoverflow.com/a/11012754/241039)，但也许你会更喜欢这个解决方案：

```
class Demo(object):
    def a(self):
        pass

    def b(self, *args):
        if not args:
            param=self.a
        elif len(args)>1:
            raise TypeError("b() takes at most 1 positional argument")
        else:
            param=args[0]
        if param is not None:
            param() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T10:27:49.073

我也更喜欢lazyr的答案（我通常`None`用作默认参数），但您也可以使用关键字参数来更明确地说明它：

```
def b(self, **kwargs):
    param = kwargs.get('param', self.a)
    if param: param() 
```

仍然可以`None`作为参数使用，导致`param`不被执行。但是，如果您不包含关键字参数`param=`，它将默认为`a()`。

```
demo.b() #demo.a() executed

demo.b(param=some_func) #some_func() executed

demo.b(param=None) #nothing executed. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T11:09:11.870

我将*再次*回答这个问题，与我之前的回答相矛盾：

简短的回答：是的！（有点）

在方法装饰器的帮助下，这是可能的。代码很长，有点难看，但是用法很短很简单。

问题是我们只能使用未绑定的方法作为默认参数。那么，如果我们创建一个包装函数——一个装饰器——*在调用真正的函数之前绑定参数*呢？

首先，我们创建一个可以执行此任务的辅助类。

```
from inspect import getcallargs
from types import MethodType
from functools import wraps

class MethodBinder(object):
    def __init__(self, function):
        self.function = function

    def set_defaults(self, args, kwargs):
        kwargs = getcallargs(self.function, *args, **kwargs)
        # This is the self of the method we wish to call
        method_self = kwargs["self"]

        # First we build a list of the functions that are bound to self
        targets = set()
        for attr_name in dir(method_self):
            attr = getattr(method_self, attr_name)
            # For older python versions, replace __func__ with im_func
            if hasattr(attr, "__func__"):
                targets.add(attr.__func__)

        # Now we check whether any of the arguments are identical to the 
        # functions we found above. If so, we bind them to self.
        ret = {}
        for kw, val in kwargs.items():
            if val in targets:
                ret[kw] = MethodType(val, method_self)
            else:
                ret[kw] = val

        return ret 
```

因此，实例`MethodBinder`与方法（或者更确切地说将成为方法的函数）相关联。`MethodBinder`s 方法`set_defaults`可以被赋予用于调用*关联*方法的参数，它将绑定关联方法的任何未绑定方法，`self`并返回可用于调用关联方法的 kwargs dict。

现在我们可以使用这个类创建一个装饰器：

```
def bind_args(f):
    # f will be b in the below example
    binder = MethodBinder(f)

    @wraps(f)
    def wrapper(*args, **kwargs):
        # The wrapper function will get called instead of b, so args and kwargs
        # contains b's arguments. Let's bind any unbound function arguments:
        kwargs = binder.set_defaults(args, kwargs)

        # All arguments have been turned into keyword arguments. Now we
        # may call the real method with the modified arguments and return
        # the result.
        return f(**kwargs)
    return wrapper 
```

现在我们已经把丑陋抛在脑后，让我们展示一下简单而漂亮的用法：

```
class demo(object):
    def a(self):
        print("{0}.a called!".format(self))

    @bind_args
    def b(self, param=a):
        param()

def other():
    print("other called")

demo().b()
demo().b(other) 
```

这个秘籍使用了一个相当新的 Python 补充，`getcallargs`来自`inspect`. 它仅在较新版本的 python2.7 和 3.1 中可用。

# c# - C#字符串加密性能

> ID：11012647
> 
> 赞同：0
> 
> 时间：2012-06-13T10:08:20.993
> 
> 标签：c#, performance, encryption

我有一个类，其中包含一堆需要在保存之前加密的字段，就像这样；

```
class MyClass
{
   public string CustomerName{ get; set; }
   public string Address1{ get; set; }
   public string Address2{ get; set; }
   public string Town{ get; set; }
   public string Postcode{ get; set; }

   // updated
   public DateTime RegistrationDate { get; set; } // don't encrypt
} 
```

加密此对象中的字段的最高效方法是什么？如果我们必须加密 100 或 1000 个这样的对象呢？（我们可以利用 TPL 吗？）

**更新**：
有些字段可能不需要加密，所以我不想加密整个班级。
.NET4 是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:27:48.477

假设您最终想要加密字段，无论您的应用程序层是什么，您都必须自己计时才能获得系统和配置的结果。一般来说，您可以使用并行任务进行压缩，如以下示例代码所示：

```
 RijndaelManaged csp = new RijndaelManaged() { Mode = CipherMode.CBC, Padding = PaddingMode.ISO10126 };
    // TODO: define Key and IV
    Stopwatch encryptionTime = Stopwatch.StartNew();
    Parallel.For(0, 1000, i =>
        {
            string fieldValue = "abcdef...";
            byte[] fieldBytes = UTF8Encoding.UTF8.GetBytes(fieldValue);
            byte[] fieldEncrypred;
            using (var ms = new MemoryStream())
            using (var cs = new CryptoStream(ms, csp.CreateEncryptor(), CryptoStreamMode.Write))
            {
                cs.Write(fieldBytes, 0, fieldBytes.Length);
                cs.FlushFinalBlock();
                fieldEncrypred = ms.ToArray();
            }
        });
    encryptionTime.Stop();
    Console.WriteLine(encryptionTime.Elapsed.TotalMilliseconds); 
```

您可以修改上述内容以满足您的需求并执行您自己的测试。

对于上述示例，您将需要：

```
using System;
using System.Diagnostics;
using System.IO;
using System.Security.Cryptography;
using System.Text;
using System.Threading.Tasks; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:28:37.533

首先，序列化整个对象（例如使用 protobuf-net），然后使用[CryptoStream](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)加密序列化的字节。

如果生成的字节通常很小（例如小于 256KB），您可以将它们存储在 sql 数据库中的 varbinary(MAX) 字段中。如果它们通常较大，则最好将它们作为文件存储在文件系统中。

# javascript - 如何编写用于嵌入 Flash 内容的 HTML

> ID：11012648
> 
> 赞同：0
> 
> 时间：2012-06-13T10:08:24.223
> 
> 标签：javascript, html, flash

我有一些 MSN 视频的 URL 为[http://video.in.msn.com/watch/video/the-help-theatrical-trailer/fcvrtnl7](http://video.in.msn.com/watch/video/the-help-theatrical-trailer/fcvrtnl7)，

我想以这样的方式创建一个 HTML 文档，这样如果我加载该 HTML 文档，那么只有下面提到的链接中存在的正在运行的 Flash 内容应该出现。我已经创建了一个 HTML 文档，但是当我加载它时，我只能在我的页面上看到 Flash 播放器，它没有在其中播放任何视频内容。

下面提到的是HTML代码。请告知我是否缺少任何 Javascript 的执行，如果是，那么如何确定哪些是所需的 Javascript 以将视频加载到 Flash 播放器中。

```
<html>
<body topmargin="0" leftmargin="0">
<embed 
    type="application/x-shockwave-flash" 
    src="http://img.widgets.video.s-msn.com/v/5407.02/fl/player/current/player.swf"     
    width="800" height="450"  "autoplay=false"  
    type="application/x-shockwave-flash"  
    id="rich_embed_460916691"  
    data="http://img.widgets.video.s-msn.com/v/5407.02/fl/player/current/player.swf"  
    PARAM=""  
    bgcolor="#000000"  
    allowScriptAccess="always"  
    quality="high"  
    wmode="window"  
    allowFullScreen="true"
    flashvars="playlistmin=11&ps=10&mode=destination&ifs=true&playAdBeforeFirstVid=true&endslateTime=1&slateAd=true&pl=false&adaptiveBuffering=false&hideShare=false&hideInfo=true&hideSearch=true&hideMoreVideos=true&hidePlaylist=true&rst=v5&mkt=en-in&fr=dest_en-in&reportingType=dest&brand=v5%5e800x450&adEventTimeout=15&adFull=Web&adPartial=Partial&adModelType=MSN&adDivs=ux1_2_1_300x60ad_msn%2c300%2c60%3bplayer1000x650ad%2c1000%2c650%3bplayer1380x1024ad_temp%2c1380%2c1024%3bplayer1380x650ad%2c1380%2c650&timePlaying=60&videosPlayed=1&ad=true&vc=catalog.video.msn.com&vce=edge1.catalog.video.msn.com%2cedge2.catalog.video.msn.com%2cedge3.catalog.video.msn.com%2cedge4.catalog.video.msn.com&vci=img1.catalog.video.msn.com%2cimg2.catalog.video.msn.com%2cimg3.catalog.video.msn.com%2cimg4.catalog.video.msn.com&msnlink=true&linkOverride2=http%3a%2f%2fvideo.in.msn.com%2f%3fmkt%3den-in%26vid%3d%7b0%7d%26from%3d&linkBack=http%3a%2f%2fvideo.in.msn.com%2f&ap=true&widgetId=ux1_2_1_1_5&rv=true&rvp=false&versionPath=%2fv%2f5407.02%2f&qualityOverride=LO"
    />
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:23:36.803

在您所指的页面上有一个“分享”按钮。
如果单击它，它会为您提供可以复制和粘贴的代码：

```
<iframe 
    width="432" 
    height="243" 
    frameborder="0" 
    marginwidth="0" 
    marginheight='0' 
    scrolling="no" 
    src="http://hub.video.msn.com/embed/b7dad6f8-9355-4ccc-8b1b-d6eea6f28764/?vars=bWt0PWVuLWluJmJyYW5kPXY1JTVlODAweDQ1MCZsaW5rb3ZlcnJpZGUyPWh0dHAlM2ElMmYlMmZ2aWRlby5pbi5tc24uY29tJTJmJTNmbWt0JTNkZW4taW4lMjZ2aWQlM2QlN2IwJTdkJTI2ZnJvbSUzZCZsaW5rYmFjaz1odHRwJTNhJTJmJTJmdmlkZW8uaW4ubXNuLmNvbSUyZiZjb25maWdDc2lkPU1TTlZpZGVvJmNvbmZpZ05hbWU9c3luZGljYXRpb25wbGF5ZXImc3luZGljYXRpb249dGFnJnBsYXllci5mcj1zaGFyZWVtYmVkLXN5bmRpY2F0aW9u">
  <A href="http://video.in.msn.com/?mkt=en-in&vid=b7dad6f8-9355-4ccc-8b1b-d6eea6f28764&from=shareembed-syndication&src=v5:embed:syndication:" target="_new" title="The Help: Theatrical trailer">Video: The Help: Theatrical trailer</A>
</iframe> 
```

正如@GabrielTheron 建议的那样，它是一个 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:14:20.467

我不是这里的专家，但也许 iframe 可能更容易/更好地使用？我知道这是在网页中使用外部内容（尤其是 Flash 内容）的一种很常见的方式。

# django - django 使用 api 密钥查看简单的访问控制

> ID：11012651
> 
> 赞同：0
> 
> 时间：2012-06-13T10:08:34.627
> 
> 标签：django, web-services, api

我有一个简单的 web 服务应用程序，它需要对允许访问它的应用程序进行某种控制。

我不需要 oauth 或类似的东西，我想要的只是生成某种需要随请求一起发送的密钥。我可以手动生成这些密钥，不需要自动化。但是如果它被滥用，我必须能够关闭对特定密钥的访问。

我对如何做到这一点有一些想法，但想向您请教一些最佳实践技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:25:47.000

您可能会受到 Tastypie 生成 API 密钥的方法的启发。[请参阅此处](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/models.py#L35)的相关代码。

在您的特定情况下，您似乎将拥有许多同时有效的 API 密钥。所以你应该替换这个：

```
user = models.OneToOneField(User, related_name='api_key') 
```

和：

```
user = models.ForeignKey(User, related_name='api_keys') 
```

您应该添加一个类似于以下内容的字段：

```
is_valid = models.BooleanField(default=True) 
```

这将表示与 a 关联的某个键`user`是否有效。

# php - PCNTL - 在当前子进程退出时分叉新子进程

> ID：11012652
> 
> 赞同：0
> 
> 时间：2012-06-13T10:08:36.240
> 
> 标签：php, process, pcntl

我编写了一个具有以下流程的代码：

```
function parent(){
   // fork two process and call the process_callback function
}

function process_callback(){
   // poll for id
   // process data
   // ???????
} 
```

使用 PCNTL 我正在运行两个同时进行的进程，它们轮询并对数据执行一些操作。要求是，当一个进程处理完 ID 后，它应该终止，并且应该启动一个新进程，该进程将再次轮询并处理一个新 ID。

在最后一行`??????`我可以`process_callback()`再次调用（递归），但这不会增加系统中的内存吗？这就是为什么我宁愿让这个进程死掉并创建一个新的进程，它又称之为`process_callback`

# xpath - 如何使用 Xpath 可视化器

> ID：11012654
> 
> 赞同：6
> 
> 时间：2012-06-13T10:09:06.600
> 
> 标签：xpath

我已经从 [http://www.huttar.net/dimitre/XPV/TopXML-XPV.html](http://www.huttar.net/dimitre/XPV/TopXML-XPV.html) 链接下载了 XPath Visualizer 版本 1.4 文件夹，该链接与 IE 兼容。我目前使用的是 Internet Explorer 8，然后打开了“XPathMain.htm”文件从下载的文件夹中尝试浏览“authors.xml”并将xpath表达式设为//*并点击“处理文件”按钮，但我没有得到任何输出。我是否需要在浏览器中配置任何内容或包含任何 jscript。“自述”文件中没有提到任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:26:32.860

您可以使用[Xpath Explorer](http://www.google.co.in/url?sa=t&rct=j&q=xpe%20jar&source=web&cd=3&ved=0CGkQjBAwAg&url=http://sourceforge.net/projects/xpe/files/xpe/20030304/xpe.jar/download&ei=f4fhT8K1H-2RiQeQ6oWmDw&usg=AFQjCNEpvNO2otCYFGM0Pw6mXD0qKEFrFg) 也可以查看[此站点](http://chris.photobooks.com/xml/default.htm)以获取在线 XPATH 评估器。

如果有预算，请选择[XML SPY](http://www.altova.com/xmlspy/xpath-analyzer.html)。

# mysql - MySQL 不会在简单的选择查询中使用我定义的索引

> ID：11012658
> 
> 赞同：4
> 
> 时间：2012-06-13T10:09:14.807
> 
> 标签：mysql, sql, database-indexes

我一直在尝试在查询中使用索引，但无济于事。它已定义，但未使用。

这是我的索引

```
Table  | Non_unique | Key_name   | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment  
--------------------------------------------------------------------------------------------------------------------------------------------------------
alerts |          1 | date_index |            1 | date        | A         |        9825 |     NULL | NULL   |      | BTREE 
```

这是我的查询+解释：

```
EXPLAIN SELECT latitude, longitude, msg_id
        FROM alerts
        FORCE INDEX(date_index)
        WHERE date>1336312075;

| id | select_type | table  | type | possible_keys | key  | key_len | ref  | rows | Extra       |
--------------------------------------------------------------------------------------------------------
|  1 | SIMPLE      | alerts | ALL  | date_index    | NULL | NULL    | NULL | 9825 | Using where | 
```

该表有 9825 行，而我选择的日期是最新的 9 行之一。所以它应该只扫描了 9 行。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:19:01.543

**只是一个猜测**：你的`date`专栏是什么类型的？是否有可能，该值`1336312075`不是 type `date`？在这种情况下，数据库可能会将`date`列中的所有值转换为类型，`1336312075`而不是转换`1336312075`为`date`可能使索引无用的列类型。

可能的解决方案：将您的值转换为`date`列的类型：

```
where date > convert_to_the_type_of_date_column(1336312075) 
```

# iphone - 图数据源中的内存泄漏

> ID：11012664
> 
> 赞同：0
> 
> 时间：2012-06-13T10:09:41.637
> 
> 标签：iphone, ios, memory, sqlite, memory-leaks

我最近继承了一个使用 sqlite3 数据库的大型项目，目前我正在努力解决分散在各处的大量内存泄漏。在无法解决它们之后，有几个泄漏让我感到困惑和士气低落。方法中的这个循环会泄漏大量字节，但看起来非常简单，我根本不知道如何更改它以防止泄漏。

```
...
    while ((ret=sqlite3_step(selStmt))==SQLITE_ROW) 
    { 

        GraphData *item = [GraphData alloc];

        item.key = sqlite3_column_int(selStmt, 0);
        item.value = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selStmt,1)];

        [newData addObject:item]; 

        [item release], item = nil;

    }
...

    @interface GraphData : NSObject{

    NSInteger key;
    NSString *value;
}

@property (nonatomic, readwrite) NSInteger key;
@property (nonatomic, retain) NSString *value;

-(id)initWithPrimaryKey:(NSInteger) xid;
-(id)initWithName:(NSString *)n key:(NSInteger)i;

@end

    #import "GraphData.h"

@implementation GraphData

@synthesize  key,value;

-(id)initWithPrimaryKey:(NSInteger) xid{

    self.key = xid;
    self.value = @"";

    return self;

}
-(id)initWithName:(NSString *)n key:(NSInteger)i{

    self.key = 0;
    self.value = n;

    return self;

}

@end 
```

此数据源类中的几乎所有泄漏都来自此循环。

我希望这是我没有经验的微不足道的事情。

感谢您花时间看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:12:11.007

您的 GraphData 类中没有 dealloc。

```
- (void)dealloc {
    [value release];
    [super dealloc];
} 
```

（我假设您没有使用 ARC，因为您`release`在第一个代码片段中有。我真的建议转换为 ARC - 这种泄漏消失了。）

# java - OpenGL ES 渲染错误

> ID：11012669
> 
> 赞同：4
> 
> 时间：2012-06-13T10:09:59.727
> 
> 标签：java, android, opengl-es, draw

好吧，我在这里遇到了 opengl ES 的问题（顺便说一下，刚刚开始了解它）。所以这里有一些代码

*GLExample.java*

```
 package com.android.OpGL;

import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;

public class GLExample extends Activity {

    GLSurfaceView ourSurface;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ourSurface = new GLSurfaceView(this);
        ourSurface.setRenderer(new GLRendererEx());

        setContentView(ourSurface);
    }
} 
```

*GLRendererEx.java*

```
package com.android.OpGL;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLSurfaceView.Renderer;

public class GLRendererEx implements Renderer {

    private GLTriangleEx tri;

    public GLRendererEx(){
        tri = new GLTriangleEx();
    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {
        // TODO Auto-generated method stub
        gl.glDisable(GL10.GL_DITHER);
        gl.glClearColor(.8f, 0f, .2f, 1f);
        gl.glClearDepthf(1f);

    }

    @Override
    public void onDrawFrame(GL10 gl) {
        // TODO Auto-generated method stub
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        tri.draw(gl);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        // TODO Auto-generated method stub

    }

} 
```

*GLTriangleEx.java*

```
 package com.android.OpGL;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.ShortBuffer;

import javax.microedition.khronos.opengles.GL10;

public class GLTriangleEx {

    private float vertices[]= {
        0f, 1f, //(0,1) point
        1f, -1f,//(1,-1)
        -1f,-1f//(-1,-1)
    };

    private FloatBuffer vertBuff;

    private short[] pIndex = {0,1,2};

    private ShortBuffer pBuff;

    public GLTriangleEx(){

        ByteBuffer bBuff = ByteBuffer.allocate(vertices.length *4);
        bBuff.order(ByteOrder.nativeOrder());
        vertBuff = bBuff.asFloatBuffer();
        vertBuff.put(vertices);
        vertBuff.position(0);

        ByteBuffer pbBuff = ByteBuffer.allocateDirect(pIndex.length * 2);
        pbBuff.order(ByteOrder.nativeOrder());
        pBuff = pbBuff.asShortBuffer();
        pBuff.put(pIndex);
        pBuff.position(0);
    }

    public void draw(GL10 gl){
        gl.glFrontFace(GL10.GL_CW);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertBuff);
        gl.glDrawElements(GL10.GL_TRIANGLES, pIndex.length, GL10.GL_UNSIGNED_SHORT, pBuff);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    }
} 
```

这就是 LOGCAT 中的内容

```
06-13 10:06:34.074: INFO/ActivityManager(71): Displayed com.android.OpGL/.GLExample: +1s391ms
06-13 10:06:34.493: ERROR/OpenGLES(727): Application com.android.OpGL (SDK target 10) called a GL11 Pointer method with an indirect Buffer.
06-13 10:06:34.523: WARN/dalvikvm(727): threadid=9: thread exiting with uncaught exception (group=0x40015560)
06-13 10:06:34.523: ERROR/AndroidRuntime(727): FATAL EXCEPTION: GLThread 10
06-13 10:06:34.523: ERROR/AndroidRuntime(727): java.lang.IllegalArgumentException: Must use a native order direct Buffer
06-13 10:06:34.523: ERROR/AndroidRuntime(727):     at com.google.android.gles_jni.GLImpl.glVertexPointerBounds(Native Method)
06-13 10:06:34.523: ERROR/AndroidRuntime(727):     at com.google.android.gles_jni.GLImpl.glVertexPointer(GLImpl.java:1121)
06-13 10:06:34.523: ERROR/AndroidRuntime(727):     at com.android.OpGL.GLTriangleEx.draw(GLTriangleEx.java:42)
06-13 10:06:34.523: ERROR/AndroidRuntime(727):     at com.android.OpGL.GLRendererEx.onDrawFrame(GLRendererEx.java:31)
06-13 10:06:34.523: ERROR/AndroidRuntime(727):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1363)
06-13 10:06:34.523: ERROR/AndroidRuntime(727):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118)
06-13 10:06:34.553: WARN/ActivityManager(71):   Force finishing activity com.android.OpGL/.GLExample 
```

如您所见，它说错误就在这里，`gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertBuff);`但我不明白出了什么问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T10:16:08.350

很清楚问题是什么：

```
... called a GL11 Pointer method with an indirect Buffer. 
```

`vertBuff`缓冲区需要`direct`确保它不会在内存中移动。您需要使用类中的[allocateDirect(int)](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/ByteBuffer.html#allocateDirect%28int%29)方法`ByteBuffer`。

然后，您获取该`ByteBuffer`方法返回的对象并将其转换为 FloatBuffer，如[本例所示。](http://www.java2s.com/Tutorial/Java/0180__File/ConvertByteBuffertoaFloatBuffer.htm)

祝你好运！

# xml - XmlReader 的 ReadString 方法删除/忽略 CDATA 标记

> ID：11012670
> 
> 赞同：3
> 
> 时间：2012-06-13T10:09:59.780
> 
> 标签：xml, xmlreader

我的行为非常奇怪，无法识别问题。在以下代码片段中，预期的结果是

```
<![CDATA[<air:FareInfo Key="10T"></air:FareInfo>/>]]> 
```

但我得到

```
<air:FareInfo Key="10T"></air:FareInfo>/> 
```

为什么输出中缺少 CDATA 标记？我只是使用 XmlReader.ReadString() 并忽略 CDATA 标记。

```
 string xml = "<FareInfo>" + 
        "<![CDATA[<air:FareInfo Key=\"10T\">" + 
            "</air:FareInfo>/>]]>" + 
        "</FareInfo>";

        Encoding encoding = new UTF8Encoding();
        byte[] buffer = encoding.GetBytes(xml);
        MemoryStream stream = new MemoryStream(buffer);

        XmlReaderSettings settings = new XmlReaderSettings();
        XmlReader reader = XmlReader.Create(stream, settings);

        reader.Read();

        string output = reader.ReadString();

        Console.Write(output); 
```

在这方面的任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:43:51.090

这样做： -

```
 switch (reader.NodeType) {
      case XmlNodeType.Text:
          Console.Write(reader.Value);
          break;
       case XmlNodeType.CDATA:
           Console.Write("<![CDATA[{0}]]>", reader.Value);
           break;
 } 
```

# grails - Grails 有许多脚手架

> ID：11012678
> 
> 赞同：1
> 
> 时间：2012-06-13T10:10:58.720
> 
> 标签：grails, has-many, scaffolding

我是 Grails 的新手，想为 HasMany-Relationship 建模，如下所示：

```
class Comment {
    String content

    static constraints = {}
}

class Text {
    String content

    static hasMany = [comments: Comment]

    static constraints = {}
} 
```

问题是，这个脚手架不起作用，它在调用创建视图时会产生错误。我正在使用 Grails 2.0.4。使用搜索后，我来到了[这个堆栈溢出线程](https://stackoverflow.com/questions/823137/grails-dynamic-scaffold-with-hasmany-is-it-a-bug-or-am-i-misconfiguring)。

他们讨论了同样的错误，但他们说，他们手动更改了视图。作为一个新人，我的问题是：我怎样才能改变视图，以便我可以对一个文本做很多评论？

格雷茨

# cassandra - Apache Cassandra 中的数据插入失败

> ID：11012681
> 
> 赞同：2
> 
> 时间：2012-06-13T10:11:18.993
> 
> 标签：cassandra, hector

## 我的配置

具有两个节点的集群：

*   节点 1：硬件：Intel Xeon 2.83 GHz（4 核），24GB RAM，Dell VIRTUAL DISK SCSI 500GB
    系统：Windows Server 2008 R2 x64
    Java 版本：7 更新 4 x64
    Apache Cassandra 版本：1.1.1

*   节点 2：硬件：Intel Xeon 2.83 GHz（4 核），8GB RAM，Dell VIRTUAL DISK SCSI 500GB
    系统：Windows Server 2008 R2 x64
    Java 版本：7 更新 4 x64
    Apache Cassandra 版本：1.1.1

Cassandra服务器配置：

```
heap size: 4 GB
seed_provider:
    - class_name: org.apache.cassandra.locator.SimpleSeedProvider
      parameters:
         - seeds: "xxx.xxx.xxx.10,xxx.xxx.xxx.11"
listen_address: xxx.xxx.xxx.10
rpc_address: 0.0.0.0
rpc_port: 9160
rpc_timeout_in_ms: 20000
endpoint_snitch: PropertyFileSnitch 
```

cassandra-topology.properties

```
xxx.xxx.xxx.10=datacenter1:rack1
xxx.xxx.xxx.11=datacenter1:rack1
default=datacenter1:rack1 
```

## 问题

我已经使用 CLI 命令处理了键空间和列族：

```
create keyspace testks with placement_strategy = 'org.apache.cassandra.locator.NetworkTopologyStrategy' and strategy_options = {datacenter1:2};
use testks;
create column family testcf; 
```

然后我启动了我的 Java 应用程序，它使用 Hector 客户端将 50 000 000 行插入到创建的列族中。客户端连接到节点 1。大约 30 秒后（插入了 160 000 行）节点 1 上的 Cassandra 服务器抛出异常：

```
ERROR [COMMIT-LOG-ALLOCATOR] 2012-06-13 10:26:38,393 AbstractCassandraDaemon.java (line 134) Exception in thread Thread[COMMIT-LOG-ALLOCATOR,5,main]
java.io.IOError: java.io.IOException: Rename from c:\apache-cassandra\storage\commitlog\CommitLog-7345742389552.log to 7475933520374 failed
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:127)
    at org.apache.cassandra.db.commitlog.CommitLogSegment.recycle(CommitLogSegment.java:204)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator$2.run(CommitLogAllocator.java:166)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator$1.runMayThrow(CommitLogAllocator.java:95)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Rename from c:\apache-cassandra\storage\commitlog\CommitLog-7345742389552.log to 7475933520374 failed
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:105)
    ... 5 more 
```

然后，几秒钟后，节点 2 上的 Cassandra 服务器抛出了相同的异常：

```
ERROR [COMMIT-LOG-ALLOCATOR] 2012-06-14 10:26:44,005 AbstractCassandraDaemon.java (line 134) Exception in thread Thread[COMMIT-LOG-ALLOCATOR,5,main]
java.io.IOError: java.io.IOException: Rename from c:\apache-cassandra\storage\commitlog\CommitLog-7320337904033.log to 7437675489307 failed
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:127)
    at org.apache.cassandra.db.commitlog.CommitLogSegment.recycle(CommitLogSegment.java:204)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator$2.run(CommitLogAllocator.java:166)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator$1.runMayThrow(CommitLogAllocator.java:95)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: Rename from c:\apache-cassandra\storage\commitlog\CommitLog-7320337904033.log to 7437675489307 failed
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:105)
    ... 5 more 
```

之后，我的应用程序无法再插入任何数据。Hector 从 Thrift 获得 TimedOutException：

```
Thread-4 HConnectionManager.java 306 012-06-14 10:12:56,034      HConnectionManager operateWithFailover      WARN    %Could not fullfill request on this host CassandraClient<xxx.xxx.xxx.10:9160-10> 
Thread-4 HConnectionManager.java 307 2012-06-14 10:12:56,034     HConnectionManager operateWithFailover      WARN    %Exception:  
me.prettyprint.hector.api.exceptions.HTimedOutException: TimedOutException()
    at me.prettyprint.cassandra.service.ExceptionsTranslatorImpl.translate(ExceptionsTranslatorImpl.java:35)
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:264)
    at me.prettyprint.cassandra.model.ExecutingKeyspace.doExecuteOperation(ExecutingKeyspace.java:97)
    at me.prettyprint.cassandra.model.MutatorImpl.execute(MutatorImpl.java:243)
    at patrycjusz.nosqltest.db.cassandra.CassandraHectorDbAdapter.commitTransaction(CassandraDbAdapter.java:63)
    at patrycjusz.nosqltest.DbTest.insertData(DbTest.java:459)
    at patrycjusz.nosqltest.gui.InsertPanel.executeTask(NePanel.java:154)
    at patrycjusz.nosqltest.gui.InsertPanel$1.run(NePanel.java:141)
    at java.lang.Thread.run(Unknown Source)
Caused by: TimedOutException()
    at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:20269)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:922)
    at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:908)
    at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:246)
    at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:243)
    at me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation.java:103)
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:258)
    ... 8 more 
```

我该如何解决？也许我做错了什么？

问候， Patrycjusz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:52:18.220

Apache Cassandra 不完全支持 Java 7。 [http://www.datastax.com/docs/1.1/install/install_rpm](http://www.datastax.com/docs/1.1/install/install_rpm)

> Java7 不是“推荐”的

正如您所发现的，使用 1.6 没有问题...

# asp.net - 用户控制与服务器控制

> ID：11012682
> 
> 赞同：4
> 
> 时间：2012-06-13T10:11:20.290
> 
> 标签：asp.net, html, visual-web-developer-2010

我试图理解`html`和`asp.net`。

看来（如果我错了，请纠正*我*！）我在我的 web 项目的 aspx 页面上编写的代码并不都是 html。相反，当用户从他们的 url 发出 html 请求时，它们是由某些“ASP.Net”编译器运行的代码（因此，感谢`runat server`“编译器”理解非 html 标签，例如`<asp`）。然后——“编译器”使用此代码动态创建一个 html 页面。例如 – 这会将 a 转换`Button`为`input`.

这是真的？如果是这样，那么，什么是用户控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:17:06.583

ASP.NET 具有服务器端控件（例如按钮、超链接、网格视图等）。这些都生成可由 C#/VB.NET 代码处理的服务器端事件 (Button1_OnClick)。

```
<asp:Button ID="btnCopyText" runat="server" /> // Calls the server side btnCopyText code

public void btnCopyText_Click(object sender, EventArgs e) {

} 
```

HTML 有它自己的控件，由客户端的浏览器（客户端）呈现。

```
 <button onclick="copyText()">Copy Text</button> // Calls the copyText() function (Client Side) 
```

ASP.NET 按钮在服务器端呈现，然后作为标准 HTML 按钮（如上所示）传递给客户端。

自定义用户控件是由程序员创建的 ASP.NET 服务器端控件，它可能包含多个 ASP.NET 服务器端控件，例如一个 GridView 和一个按钮）。例如，当单击按钮时，它会重新加载 GridView 中的数据。这为 ASP.NET 开发人员提供了一种方法来编写一个自定义控件并在需要时重用它，而不是编写样板代码（重复相同的代码）。

[http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:19:16.283

是的，所有 asp.net 控件都呈现为 html，但 runat server 告诉它是一个服务器控件。

用户控件是一种复合控件，其工作方式与 ASP.NET 网页非常相似——您可以将现有的 Web 服务器控件和标记添加到用户控件，并为控件定义属性和方法。然后，您可以将它们嵌入到 ASP.NET 网页中，它们在其中充当一个单元

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:16:17.363

**asp.net 是一种编程工具，可帮助您**快速轻松地生成 html 代码，最终目标是完整的 html 页面，其中包含需要显示的所有其余组件，例如脚本、图像、ajax 调用等。

用户控件，就像一个也呈现 html 的对象，但您可以在许多不同的页面或同一页面上多次使用它。

例如，用户控件可以渲染图像和产品的详细信息，然后如果您在转发器中使用它，您可以使用一个控件和一个循环来渲染数据库中的所有产品。

> 我在我的 web 项目的 aspx 页面上编写的代码并不都是 html。

您在 aspx 页面上编写的内容实际上是让 asp.net 解析和呈现最终 html 页面的编程代码。Asp.net 允许您拥有内部代码和 html 和其他文本，并使用 asp.net 特殊标记和声明将必须解析的部分与其余文本分开。

# encoding - 理解文件编码

> ID：11012687
> 
> 赞同：0
> 
> 时间：2012-06-13T10:11:49.417
> 
> 标签：encoding, utf-8, character-encoding, latin1

在 Eclipse 中，我有一个文件，其中写有：

```
onclick='obj1.help_open_new_window(fn1(), "/redir/url_name")' 
```

在 Eclipse 编辑菜单-> 设置编码中，我看到了这个：

![在此处输入图像描述](../Images/e4149f06c34e4aef732ea8bda98f28ef.png)

现在我使用相同的对话框将编码更改为 UTF-8，文本更改为：

```
onclick='obj1.help_open_new_window(fn1(),�"/redir/url_name")' 
```

我所知道的是，如果这没有发生，那么我的网站就会正常工作。为什么会发生这种情况，我该怎么做才能防止这种情况发生？

我确实有一些关于编码的知识：[Ã‚ 和 nbsp 之谜解释](http://weblogs.java.net/blog/kohsuke/archive/2008/01/a_and_nbsp_myst.html) [了每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.java.net/external?url=http://www.joelonsoftware.com/articles/Unicode.html)但我仍然不明白为什么会发生这种情况。随意转到字节级别（文件如何存储）只是为了解释它。

***更新***：这是我的理解：如果文件被编码，`latin-1`那么每个字符都是一个字节，`. 它应该是`hex(32)`。现在，当我将其转换为 utf-8 时，它仍然存在`hex(32)`，而且绝对是`. 这使我相信在 latin-1 中，`它不是`hex(32)`两个字节的组合。这怎么可能？```

 ``* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:19:53.150``

# android - 如何创建自定义呼叫接收应用程序？

> ID：11012691
> 
> 赞同：1
> 
> 时间：2012-06-13T10:12:06.130
> 
> 标签：android, android-intent, android-ui

是否可以使用我们自己的 UI 来开发一个应用程序来接收电话而不是默认的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:19:27.407

有一些应用程序只是改变了呼叫接收的方式，但其余的由本机完成

[http://www.appsbeyond.com/apps/my-call-screens](http://www.appsbeyond.com/apps/my-call-screens)

[https://play.google.com/store/apps/details?id=com.lowveld.ucs&hl=en](https://play.google.com/store/apps/details?id=com.lowveld.ucs&hl=en)

[https://play.google.com/store/apps/details?id=com.andromigsm.fscifree&hl=en](https://play.google.com/store/apps/details?id=com.androminigsm.fscifree&hl=en)

[http://www.xda-developers.com/android/change-your-call-screen-with-ultimate-call-screen-hd/](http://www.xda-developers.com/android/change-your-call-screen-with-ultimate-call-screen-hd/)

# dynamics-crm-2011 - 自定义 html 表单上的 Dynamics CRM 2011 功能区

> ID：11012694
> 
> 赞同：0
> 
> 时间：2012-06-13T10:12:25.943
> 
> 标签：dynamics-crm-2011, ribbon

我有一个从 Dynamics CRM 2011 调用的自定义 asp.net 网站，我需要它看起来与 CRM 2011 标准窗口完全一样。

我设法创建了几乎所有的自定义 web 控件，它们看起来像是来自 Dynamics CRM 2011，除了一个功能区。

我试图从 CRM 中取出并清理 HTML，但到目前为止效果不是很好。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:23:28.920

我不确定您还能做什么 Grigory - 无论如何，复制现有的 HTML 只会是一个良好的开端。这些不是看起来特别复杂的对象（一些带有背景图像和翻转效果的 div）。不能手工制作吗？

没有办法重用本机控件，而且我不知道您可以出去购买任何商业广告。

# php - PHP Array to json，如何去掉一些双引号？

> ID：11012695
> 
> 赞同：1
> 
> 时间：2012-06-13T10:12:31.527
> 
> 标签：php, arrays, json, double-quotes

在将 php 数组编码为 json 时，我遇到了一个小而奇怪的问题。

我需要防止 array() 在特定值周围添加双引号。

这是php数组：

```
$coordinates="[".$row["lat"].",".$row["lng"]."]";  
$egUser=array(              

            "geometry"=>array(
                "type"=>"$type",
                "coordinates"=>$coordinates                 
        ),

            "type2"=>"$type2",
            "id"=>$id
        );
$arrayjson[]=$egUser; 
```

使用 json_encode 返回以下 json ：

```
var member = {
"type": "FeatureCollection",
"features": [{
    "geometry": {
        "type": "Point",
        "coordinates": "[46.004028,5.040131]"
    },
    "type2": "Feature",
    "id": "39740"
}] 
```

};

如您所见，坐标包含在双引号内 >

```
"coordinates": "[46.004028,5.040131]" 
```

我如何摆脱这些报价？我需要有以下内容>

```
"coordinates": [46.004028,5.040131] 
```

我有点困惑，所以欢迎任何帮助:) 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:17:21.843

那是因为`$coordinates`是字符串类型。

```
$coordinates="[".$row["lat"].",".$row["lng"]."]"; 
```

`$coordinates`像这样创建

```
$coordinates = array($row["lat"],$row["lng"]); 
```

# android - 如何从谷歌电视应用程序的画廊中挑选视频？

> ID：11012696
> 
> 赞同：0
> 
> 时间：2012-06-13T10:12:32.190
> 
> 标签：android, gallery, google-tv

我已经尝试过 Intent.ACTION_GET_CONTENT 和 Intent.ACTION_PICK 但似乎 Google tv 中没有任何活动来处理这些意图。

谷歌电视是否有任何标准的画廊应用程序来处理这些意图？

# php - 如何使用javascript获取密码字段值？请我帮忙，我从早上就被困在上面

> ID：11012698
> 
> 赞同：0
> 
> 时间：2012-06-13T10:12:38.173
> 
> 标签：php, javascript, html

我`document.getElementById("password").value`用来接收密码类型输入字段。

请帮忙！

该表格还有一个`action="authenticate_signup.php"`

它显示好像未检索到密码字段值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:21:05.537

检查您的元素 ID 是否定义正确。

它应该按预期工作，没有安全限制。您甚至可以在输入类型之间切换，例如： document.getElementById("password").type = 'textbox';

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:47:42.850

```
var password = document.getElementById('password');

if(password.value==""){
    alert('No password entered!');
} 
```

就是这么简单。这应该有效。您可能还有其他一些阻止此代码执行的 javascript 错误。尝试在 firefox 或 chrome 中使用控制台来查看该错误。

# jmeter - 如何收集 jmeter 运行时测量值并创建图表

> ID：11012705
> 
> 赞同：0
> 
> 时间：2012-06-13T10:12:55.757
> 
> 标签：jmeter

我正在寻找一种从命令行运行 jmeter 的方法，在执行期间将数据从摘要报告收集到某个文件（比如每 x 秒）。然后将保存的文件加载到 jmeter 以查看收集到的指标的时间线图。

我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:28:19.757

自动从结果中获取图形的最简单方法是使用外壳脚本和“ [JMeterPluginsCMD](http://code.google.com/p/jmeter-plugins/wiki/JMeterPluginsCMD) ”插件，该插件允许您从命令行创建图形图像。

就像是：

```
#!/bin/bash

cd /where/jmeter/is/installed

# Run Test
./jmeter.sh -n -t /path/to/mytest.jmx -l /directory/to/store/results.jtl

# Generate PNG File using plugin
java -jar CMDRunner.jar --tool Reporter --generate-png test.png --input-jtl /directory/to/store/results.jtl --plugin-type ResponseTimesOverTime --width 800 --height 600 
```

从摘要报告中读取数据需要做更多的工作，但我想你可以用 awk 做一些事情，但是我怀疑这种方法不是明确需要的，并且读取 jtl 文件（在测试完成后）会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:09:39.670

由于这已经回答了问题，我将提供 .png 图像的替代方案，即 .html 页面。请看一下这个答案：

[https://stackoverflow.com/a/11191109/169277](https://stackoverflow.com/a/11191109/169277)

# device-driver - 如何在驱动程序级别提取图像文件名？

> ID：11012707
> 
> 赞同：0
> 
> 时间：2012-06-13T10:12:56.293
> 
> 标签：device-driver, minifilter

我想在微过滤器文件系统驱动程序中提取进程映像名称。我正在做这样的事情，但我得到一个蓝屏死机。可能是缓冲区分配错误？

```
status = ZwQueryInformationProcess( NtCurrentProcess(),
                                    ProcessImageFileName,
                                    buffer,
                                    returnedLength,
                                    &returnedLength ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:27:29.937

不推荐使用使用`ZwQueryInformationProcess`来获取进程信息。

最好的方法是使用`PsSetCreateProcessNotifyRoutine`并`PsSetLoadImageNotifyRoutine`准备您自己的流程列表。

# c++ - STL 元编程 - 我的模板类的哪些类型是在编译时创建的？

> ID：11012708
> 
> 赞同：1
> 
> 时间：2012-06-13T10:13:00.217
> 
> 标签：c++, stl, metaprogramming, template-meta-programming

首先道歉，我不确定我的问题标题是否准确地解释了我的问题 - 我已经通过谷歌查看过，但我不确定我的搜索查询中需要哪些术语，所以答案可能已经在那里（甚至在 StackOverflow 上）。

我有一个模板类，它基本上如下所示 - 它使用单例模式，因此一切都是静态的，我不是在寻找关于为什么我将键存储在一个集合中并使用字符串等的评论，除非它实际上提供了一个解决方案。这门课还有更多内容，但这与问题无关。

```
template<typename T>
class MyClass 
{
private:
  //Constructor and other bits and peices you don't need to know about
  static std::set<std::string> StoredKeys;
public:
  static bool GetValue(T &Value, std::string &Key)
  {
    //implementation
  }

  static SetValue(const T Value, std::string &Key)
  {
    //implementation
    StoredKeys.Insert(Key);
  }

  static KeyList GetKeys()
  {
    return KeyList(StoredKeys);
  }
}; 
```

稍后在应用程序的其他部分中，我想获取所有值的所有键 - 无论类型如何。

虽然我相当有信心，目前该类只使用了 3 或 4 种类型，所以我可以编写如下内容：

```
KeyList Keys = MyClass<bool>::GetKeys();
Keys += MyClass<double>::GetKeys();
Keys += MyClass<char>::GetKeys(); 
```

每次使用新类型时都需要更新。如果它没有在任何地方使用，它也有实例化类的缺点。

我认为（再次我可能是错的）元编程是这里的答案，也许是某种宏？

我们正在使用 boost，所以我猜 MPL 库在这里可能有用吗？

STL 的这个方面对我来说有点新，所以我很乐意阅读并尽可能多地学习，只要我确切知道我需要学习什么来设计解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:37:59.870

移入`StoredKeys`非模板基类`class MyClassBase`，或将`AllStoredKeys`静态成员添加到非模板基类。

或者，创建一个调用 from 的静态 init 方法，`SetValue`该方法添加指向`StoredKeys`静态列表的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:46:38.453

没有魔法。如果您需要枚举用于`MyClass`在程序中实例化的所有类型，那么您必须在某处显式枚举它们。不知何故。而且您必须在列表更改时手动更新列表。

使用模板元编程，您需要手动更新的位置数量可以减少到一个，但您确实需要那个位置。

幸运的是，在这个特定的问题中，您*不需要*枚举所有类型。您只需将所有密钥存储在一组中，而不是将它们分成几组。您可以创建一个通用的非模板库`MyClass`并添加到`static std::set<std::string> StoredKeys`那里（或者`multiset`如果在不同类型特定的集合中可能存在相同的键，则可以将其添加到该库中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:50:03.363

第一个回答：不可能！模板类实际上没有共同的“泛型”（如在 java 中），而是一个单独的类，它们彼此之间没有任何关系。

第二个回答：有一个解决方法。可以定义一个基类，该基类`MyClassBase`定义所有模板化子类共享的属性。问题是您在这里有一个单例模式，这可能会使情况更加复杂。我认为解决方案可能如下所示：

```
class MyClassBase {
  static std::vector<MyClassBase*> childs;

  static KeyList getAllKeys(){
       //iterate over childs here and call ->GetKeys
  }

  virtual KeyList GetKeys() = 0;

  template<typename T>
  static T* instance() {
     T* instance = MyClass<T>::instance();
     if(std::find(childs.begin(), childs.end(), instance) != childs.end()){
       childs.push_back(instance);
     }
     return instance;
  }
}; 
```

请原谅我的任何语法错误；我只是在 Stackoverflow 编辑器中输入了它，但我认为它应该让我的观点清楚。

**编辑：** 我刚刚看到我也命名了子类的单例方法`instance()`。这可能行不通。给它一些其他的名字`privateInstance()`。然后你必须`T* instance = MyClass<T>::instance();`改为`T* instance = MyClass<T>::privateInstance();`

# java - 使用 Jetty 和 Maven 上传文件

> ID：11012710
> 
> 赞同：1
> 
> 时间：2012-06-13T10:13:09.367
> 
> 标签：java, maven, jetty

我想使用 Jetty 将文件上传到我的服务器我已经尝试过[Jetty 文档](http://docs.codehaus.org/display/JETTY/File+Upload+in+jetty6)中的示例，但它不起作用。它抛出一个异常：

```
java.lang.ClassNotFoundException: org.mortbay.servlet.MultiPartFilter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:53:38.120

既然您说您使用 Eclipse Jetty，那么正确的[类包](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-servlets/src/main/java/org/eclipse/jetty/servlets/MultiPartFilter.java)是：

```
org.eclipse.jetty.servlets.MultiPartFilter 
```

**请注意，不建议对 jetty-8 使用过滤器，因为 Servlet 3.0 规范添加了一种通过 servlet API 访问此类信息的替代方法。**

# events - Umbraco 开始剃刀 - 列出所有新闻项目

> ID：11012711
> 
> 赞同：0
> 
> 时间：2012-06-13T10:13:12.653
> 
> 标签：events, date, razor, umbraco, nodes

嗨，我有一个节点事件，并且有 6 种类型的“eventItem”，它们是子级。在我的主页上，我想列出 eventItem 类型的所有节点并列出 eventDate。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:59:00.237

使用 razor 您可以执行以下操作：

```
@{
    dynamic eventFolder = Library.NodeById(1234);

    <ul>
    @foreach (var event in eventFolder.Children)
    {
        <li>@event.eventDate.ToShortDateString() - @event.Name</li>
    }
    </ul>
} 
```

显然，将“1234”替换为事件文件夹的实际 ID，然后将 razor 脚本放在宏中，并将宏放在主页模板上，这样就可以了。

# android - 像果冻一样的安卓动画

> ID：11012713
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:13:19.377
> 
> 标签：android, android-animation

我正在寻找像android中的果冻这样的图像动画。由于我是新手，请建议我可以帮助我的好代码或链接！！！

谢谢普拉文·多迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:19:16.817

我建议你使用集成在[libgdx](http://code.google.com/p/libgdx/)框架中的 box2d 物理库。

# c# - 以编程方式更改 RadTimePicker 值

> ID：11012714
> 
> 赞同：1
> 
> 时间：2012-06-13T10:13:34.273
> 
> 标签：c#, asp.net, browser

我无法从 WebBrowser 控件以编程方式更改 RadTimePicker 值（它是用于操作某些网站的自动化工具）

![日期时间选择器](../Images/8b288da680b29e39ca2e35614271ffe5.png)

我正在使用 Firefox 的 Firebug 插件来找到正确的控件来更改其值。但是，当我在应用程序中找到日期文本框并更改其值 arg 时 - 没有任何反应。

您能否指出我如何在 RadDatPicker 中更改日期的正确方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:23:07.277

为了在选择器中设置一个值，您应该使用它的 SetSelectedDate() 方法为其分配一个日期。

```
var datePicker = $find("<%= RadDatePicker1.ClientID %>");            
datePicker.set_selectedDate(new Date()); 
```

这应该解决它：

```
window.frames[0].$find('ctl00_ContentPlaceHolder1_RadDatePicker1').set_selectedDate(new Date('2020/10/12')) 
```

# iphone - 如何在drawInRect之后删除文本？

> ID：11012715
> 
> 赞同：1
> 
> 时间：2012-06-13T10:13:38.907
> 
> 标签：iphone, nsstring

我有一个名为 BackgroundText 的 UIView 子类来绘制一些文本。

```
-(void) drawRect:(CGRect)rect
{
    [@"synchronized." drawInRect:CGRectMake(0, 29, 320, 60) withFont:bigFont lineBreakMode:UILineBreakModeTailTruncation alignment:UITextAlignmentRight];
} 
```

--

```
backgroundText = [[MMRoomBackgroundText alloc] initWithFrame:CGRectMake (0, 142 + 44, 320, 80)];
[self.view addSubview:backgroundText]; 
```

我希望 `[backgroundText removeFromSuperview];`可以从屏幕上删除这些文本，但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:18:48.157

您需要调用`setNeedsDisplay`视图并检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T12:25:35.463

我希望这能帮到您。

这里***LoadingBG 是我的视图***，***LoadingText 是我的标签***，我将文本放入标签中并将标签添加到视图中，然后当我不需要文本时从 SuperView 中删除视图。

**对于添加文本：**

```
UIView * LoadingBG = [UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 460);
UILabel *LoadingText = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 50)] autorelease];
LoadingText.text = @"Loading...";
LoadingText.backgroundColor = [UIColor clearColor];
[LoadingBG addSubview:LoadingText]; 
```

**对于删除文本：**

```
[LoadingBG removeFromSuperview]; 
```

在这里，我对视图和标签使用了固定大小。您可以使用您想要的作为框架。

# php - 特定模板文件中的 Wordpress 元框未保存

> ID：11012717
> 
> 赞同：0
> 
> 时间：2012-06-13T10:13:43.667
> 
> 标签：php, wordpress, wordpress-theming, meta-boxes

我的元框保存似乎有问题，不完全确定我做错了什么。任何帮助将不胜感激！

**这是我的函数文件：**

```
add_action( 'add_meta_boxes', 'cd_meta_box_add' );

function cd_meta_box_add()  
{
    $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ;
    $template_file = get_post_meta($post_id,'_wp_page_template',TRUE);

    if ($template_file == 'golf.php')
    {
        add_meta_box ( 
            'golf-times', 
            'Golf Opening Times & Prices', 
            'cd_meta_box_cb', 
            'page', 
            'normal', 
            'high' 
        );
    }
}

function cd_meta_box_cb( $post )
{
    $values = get_post_custom( $post->ID );
    $times = isset( $values['golf_meta_box_times'] ) ? esc_attr( $values['golf_meta_box_times'][0] ) : '';
    $prices = isset( $values['golf_meta_box_prices'] ) ? esc_attr( $values['golf_meta_box_prices'][0] ) : '';
    wp_nonce_field( 'golf_meta_box_nonce', 'meta_box_nonce' );
    ?>
    <div style="overflow: hidden;">
        <div style="width: 45%; float: left;">
            <p><label for="golf_meta_box_times">Opening Times</label></p>
            <p><textarea type="text" name="golf_meta_box_times" id="golf_meta_box_times" rows="5" style="width: 90%;" value="<?php echo $times; ?>"> </textarea></p>
        </div>
        <div style="width: 45%; float: left;">
            <p><label for="golf_meta_box_prices">Prices</label></p>
            <p><textarea type="text" name="golf_meta_box_prices" id="golf_meta_box_prices" rows="5" style="width: 90%;" value="<?php echo $prices; ?>"> </textarea></p>
        </div>
    </div>
    <?php   
}

add_action( 'save_post', 'cd_meta_box_save' );
function cd_meta_box_save( $post_id )
{
    if( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return;

    if( !isset( $_POST['meta_box_nonce'] ) || !wp_verify_nonce( $_POST['meta_box_nonce'], 'golf_meta_box_nonce' ) ) return;

    if( !current_user_can( 'edit_post' ) ) return;

    $allowed = array( 
        'a' => array(
            'href' => array()
        )
    );

    if( isset( $_POST['golf_meta_box_times'] ) )
        update_post_meta( $post_id, 'golf_meta_box_times', wp_kses( $_POST['golf_meta_box_times'], $allowed ) );

    if( isset( $_POST['golf_meta_box_prices'] ) )
        update_post_meta( $post_id, 'golf_meta_box_prices', wp_kses( $_POST['golf_meta_box_prices'], $allowed ) );

}
?> 
```

如果有人知道如何进行此保存，那将是一个很大的帮助！

我在显示数据时也遇到了问题——但我只能假设那是它实际上没有保存的地方哈哈！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:08:47.103

`functions.php`据我所知，无法输出 HTML。将您的 html 包装在一个字符串中并返回它，您的文件可能会返回错误。

您的 add_meta_box 代码似乎是正确的，可能不满足条件，您确定要通过 get 发送数据吗？

# javascript - ReadySetRaphael 无法正确渲染 SVG

> ID：11012718
> 
> 赞同：2
> 
> 时间：2012-06-13T10:13:46.590
> 
> 标签：javascript, svg, raphael

我正在尝试通过[readysetraphael.com运行](http://readysetraphael.com)[http://upload.wikimedia.org/wikipedia/commons/9/95/Continents.svg](http://upload.wikimedia.org/wikipedia/commons/9/95/Continents.svg) ，但我无法让它生成 SVG。它返回 div 的正确大小，但是当您检查元素时，它看起来好像路径正在从屏幕上绘制出来。

如果我在 Illustrator 中打开 SVG 并重新保存，我可以让它工作，但随后我失去了分组，Raphael 绘制了各个路径并将组数组留空。我真的需要保留大陆组，因为我必须在大陆级别与地图进行交互。

我也使用了不同的 raphael 生成器，结果是一致的。有没有人有任何想法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:39:00.507

您似乎想要的是将 <g> 元素上的转换应用于子元素。[Inkscape](http://inkscape.org)可以帮助您做到这一点，同时保持我认为的元素不变。

1.  在 inkscape 中打开 Continents.svg 文件
2.  打开菜单“文件 > 首选项”
3.  在对话框中找到“转换”部分
4.  选中“商店转换：”下的“优化”
5.  关闭对话框
6.  保存存档

变换现在应该已应用于路径。

# javascript - 在用户导航到其他 URL 之前触发的浏览器事件

> ID：11012723
> 
> 赞同：4
> 
> 时间：2012-06-13T10:14:06.263
> 
> 标签：javascript, html

对于兼容 HTML5 的浏览器，我们是否在用户导航到其他 URL 之前触发了事件？

如果用户通过单击链接或更改 location.href 导航到其他页面，我的要求是弹出一个确认对话框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:17:27.443

我猜你正在寻找[onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)

# jquery - 根据分辨率更改字体大小

> ID：11012724
> 
> 赞同：15
> 
> 时间：2012-06-13T10:14:08.390
> 
> 标签：jquery, html, css, screen-resolution

我正在开发一个网页，它的不同段落使用不同的大小，h...等等。我正在使用**em**大小：**font-size: 2em;** ， 举个例子。但是，当我将屏幕分辨率更改为较低时，我希望该尺寸更小。

为此，我尝试了以下代码：

```
<script>
        if ( screen.width > 1600)
        {
            document.write('<style>#centered h1 { font-size: 2em; } </style>');
        }
        else if (screen.width <= 1600 && screen.width >= 1360)
        {
            document.write('<style>#centered h1 { font-size: 1.7em; } </style>');
        }
        else if (screen.width < 1360 && >= 1024)
        {
            document.write('<style>#centered h1 { font-size: 1.4em; } </style>');
        }
        else
        {
            document.write('<style>#centered h1 { font-size: 0.8em; } </style>');
        }
    </script> 
```

第一：它不起作用......
第二：我认为应该有更清洁的方法......

所以，问题是：如何为我的字体使用不同的大小，或者如何让它们适应不同的分辨率？

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-13T10:21:44.880

### 尝试使用这个概念证明 CSS：

```
html { font-size: 62.5%; }
body { font-size: 1em;}

@media (max-width: 300px) {
    html { font-size: 70%; }
}

@media (min-width: 500px) {
    html { font-size: 80%; }
}

@media (min-width: 700px) {
    html { font-size: 120%; }
}

@media (min-width: 1200px) {
    html { font-size: 200%; }
} 
```

### [jsFiddle 上的](http://jsfiddle.net/matmuchrapna/2tQ5T/1/)工作演示

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T10:18:05.443

您想使用媒体查询而不是 JS。或者，使用 JS 向主体添加一个类，然后使用它来定位你想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-28T18:03:11.237

最好的解决方案是**视口大小的排版**

**有很多原因。这里有两个：**

1.  在屏幕上阅读文本时有一个舒适的行长。我不想踢马蜂窝，但假设它大约有 80 个字符。这些单元让您感觉完美，然后将这种体验扩展到任何尺寸的屏幕。
2.  它们使您可以将排版标题及其附带的内容的大小关系紧密结合起来。

**他们是如何工作的**

三个值中任何一个的一个单位是视口轴的 1%。“视口” == 浏览器窗口大小 == 窗口对象。如果视口为 40 厘米宽，则 1vw == 0.4 厘米。

对于 font-size 的使用，我猜它是一个具有该大小的“字母”，但正如我们所知，在非等宽字体中，字母的宽度是相当随意的。我发现你只需要调整这些值就可以得到你想要的。这基本上就是我们所做的，对吧？

*   1vw = 视口宽度的 1%
*   1vh = 视口高度的 1%
*   1vmin = 1vw 或 1vh，以较小者为准
*   1vmax = 1vw 或 1vh，以较大者为准

> ```
> h1 {
>   font-size: 5.9vw;
> }
> h2 {
>   font-size: 3.0vh;
> }
> p {
>   font-size: 2vmin;
> } 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T10:25:01.103

正如 lanzz 所指出的，您可以使用相对于屏幕分辨率的字体大小（em 或 pt）。或者，您也可以按照“http://www.w3.org/TR/css3-mediaqueries/#width”在您的 css 文件中使用媒体查询

```
@media screen and (min-width: 400px) and (max-width: 700px) { … } 
```

您可以设置任何最小和最大宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:18:14.273

`em`大小是相对于父元素的大小。您可能希望以`pt`单位（1pt = 1/72 英寸）设置字体大小，这些单位与分辨率无关，并且设计为在任何分辨率下看起来都相同。

# android - Android NewsReader 演示项目问题

> ID：11012728
> 
> 赞同：0
> 
> 时间：2012-06-13T10:14:14.617
> 
> 标签：android, eclipse

[我从这里](http://developer.android.com/shareables/training/NewsReader.zip)下载了 android 演示新闻阅读器项目，并使用 Import > Existing Projects Into Workspace 将其导入到 eclipse 中。我还将 android-support-v4.jar 添加到构建路径中，就像这里所说的[那样](http://developer.android.com/resources/samples/newsreader/index.html)

我遇到的问题与访问资源有关。这是我得到的错误。

```
Description Resource    Path    Location    Type
ReaderTutorial/src/com/example/android/newsreader   line 143    Java Problem
android.app.ActionBar cannot be resolved to a variable  NewsReaderActivity.java     /NewsReaderTutorial/src/com/example/android/newsreader  line 151    Java Problem
error: Error retrieving parent for item: No resource found that matches the given name 'android:style/Widget.Holo.Light.ActionBar.TabView'. style.xml   /NewsReaderTutorial/res/values-v11  line 23 Android AAPT Problem
error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.NoActionBar'.  style.xml   /NewsReaderTutorial/res/values-v11  line 33 Android AAPT Problem
error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.  style.xml   /NewsReaderTutorial/res/values-v11  line 28 Android AAPT Problem
error: Error: No resource found that matches the given name: attr 'android:actionBarTabStyle'.  style.xml   /NewsReaderTutorial/res/values-v11  line 30 Android AAPT Problem
error: Error: No resource found that matches the given name: attr 'android:actionBarTabTextStyle'.  style.xml   /NewsReaderTutorial/res/values-v11  line 29 Android AAPT Problem
FragmentTransaction cannot be resolved to a type    CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 54 Java Problem
FragmentTransaction cannot be resolved to a type    CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 76 Java Problem
FragmentTransaction cannot be resolved to a type    CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 84 Java Problem
OnNavigationListener cannot be resolved to a type   CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 35 Java Problem
R cannot be resolved to a variable  ArticleActivity.java    /NewsReaderTutorial/src/com/example/android/newsreader  line 51 Java Problem
R cannot be resolved to a variable  HeadlinesFragment.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 75 Java Problem
R cannot be resolved to a variable  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 76 Java Problem
R cannot be resolved to a variable  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 80 Java Problem
R cannot be resolved to a variable  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 82 Java Problem
R cannot be resolved to a variable  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 86 Java Problem
R cannot be resolved to a variable  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 101    Java Problem
R cannot be resolved to a variable  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 152    Java Problem
R cannot be resolved to a variable  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 183    Java Problem
Tab cannot be resolved to a type    CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 54 Java Problem
Tab cannot be resolved to a type    CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 76 Java Problem
Tab cannot be resolved to a type    CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 84 Java Problem
TabListener cannot be resolved to a type    CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 35 Java Problem
The import android.app.ActionBar cannot be resolved CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 19 Java Problem
The import android.app.ActionBar cannot be resolved CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 20 Java Problem
The import android.app.ActionBar cannot be resolved CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 21 Java Problem
The import android.app.FragmentTransaction cannot be resolved   CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 22 Java Problem
The method getActionBar() is undefined for the type NewsReaderActivity  NewsReaderActivity.java /NewsReaderTutorial/src/com/example/android/newsreader  line 137    Java Problem
The method onNavigationItemSelected(int, long) of type CompatActionBarNavHandler must override or implement a supertype method  CompatActionBarNavHandler.java  /NewsReaderTutorial/src/com/example/android/newsreader  line 65 Java Problem 
```

我知道这没什么可做的，但是我一直在四处寻找，但找不到任何东西，因为它是一个全新的演示。

我认为可能是没有生成 R.java 文件，因为我在我的 gen 目录中找不到它。我曾尝试清理项目并重新启动 Eclipse，但它们没有工作。

任何帮助都会很重要。

迪斯科

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:37:19.933

已经有一段时间了，但这为我解决了问题。
您是否导入：

```
import android.app.ActionBar; 
```

出于某种原因，我的项目有：

```
import android.app.ActionBar.Tab;
import android.app.ActionBar.TabListener; 
```

`import android.app.ActionBar;`它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:29:55.753

您需要将构建目标更改为 API 级别 11 或更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T17:32:32.340

您需要点击 Android Manifest.xml 文件下的项目属性文件，并将目标从 8 更改为您的目标 13 或以上。

# c# - c#重写url参数

> ID：11012729
> 
> 赞同：3
> 
> 时间：2012-06-13T10:14:16.177
> 
> 标签：c#, asp.net, url-rewriting

我有一个简单的任务，没有简单的解决方案。我在浏览器中有一个参数需要更改或重写

例如 www.contoso.com/countries.aspx?country=UK

我只需要重写参数而不检查 url，因此它可能显示为：

www.contoso.com/countries.aspx?country=France

我尝试过类似的事情，但没有快乐

```
string parameter2 = Request.QueryString["country"];
Context.RewritePath(parameter2.Replace("?country=", "France")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:28:24.727

你可以这样做：

`var url = "www.contoso.com/countries.aspx?country={0}";`

`var country = "UK";`

`url = String.Format(url, country);`

或者，您可以这样做：

`var url = Request.Url.AbsolutePath;`

`var country = Request.QueryString["country"];`

`url = url.Replace(country, "UK");`

然后：

`Response.Redirect(url);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:19:01.837

你能不能把整个 URL 读成一个字符串，把它分成'？' 然后将您的新位添加到字符串的第一部分？

像这样的东西：

```
 var url = Request.QueryString;
    var newUrl = url.split('?');
    url = newUrl[0] + "?country=France"; 
```

我不知道这是否可行，这只是一个想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:29:04.257

如果要替换完整的查询字符串，请使用

```
newVal = string.LastIndexOf("?"); 
```

进而

```
URL.Replace(oldVal, newVal); 
```

或者，如果您在查询字符串中只有一个参数并且只想替换它的值，请使用

```
newVal = string.LastIndexOf("=");
URL.Replace(oldVal, newVal); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:01:20.233

查看[此](https://stackoverflow.com/a/3814281/1004522)详细回复以解决您的问题。

# c# - 如何在编译的表达式树中调试或设置中断语句？

> ID：11012731
> 
> 赞同：12
> 
> 时间：2012-06-13T10:14:20.003
> 
> 标签：c#, linq, debugging, expression-trees

如果外部库包含 LINQ 提供程序，并且在执行动态表达式树时引发异常，那么在引发该表达式时如何中断？

例如，我使用第三方 LINQ2CRM 提供程序，它允许我调用 的`Max<TSource, TResult>()`方法`IQueryable`，但是当它抛出一个 时`InvalidCastException`，我无法在抛出异常时当场中断，因此很难查看堆栈跟踪，因为它是当调试器在我的代码中破坏它时已经展开。我已经为提到的异常设置了“break on throw”。我的调试设置是：

![在此处输入图像描述](../Images/2f6b6101153590e30302a4b192eb96ff.png)

* * *

澄清我想要打破的确切位置。我*不想*中断 LINQ 表达式，而是希望在执行表达式树时中断，或者换句话说，当`IQueryable`扩展方法`Max()`调用 LINQ 提供程序提供的覆盖时中断。堆栈跟踪的顶部看起来像这样，这是我想进入的地方（或单步执行，或其他）：

```
at XrmLinq.QueryProviderBase.Execute[T](Expression expression)
at System.Linq.Queryable.Max[TSource,TResult](IQueryable`1 source, Expression`1 selector) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T01:58:01.507

我可能不理解这个问题，但不是实际中断（这似乎不可能），而是在表达式树中放置一个 try-catch 并记录异常就足够了吗？

```
static void Main(string[] args)
{
    var logExceptionMethod = typeof (Program).GetMethod("LogException", BindingFlags.Static | BindingFlags.NonPublic);
    var createFileMethod = typeof (System.IO.File).GetMethod("Create", new[] {typeof(string)});

    // Parameter for the catch block
    var exception = Expression.Parameter(typeof(Exception));

    var expression =
        Expression.TryCatch(
        Expression.Block(typeof(void),
            // Try to create an invalid file
            Expression.Call(createFileMethod, Expression.Constant("abcd/\\"))),

            // Log the exception from the catch                  
            Expression.Catch(exception, Expression.Call(logExceptionMethod, exception)));

    Expression.Lambda<Action>(expression).Compile()();
}

static void LogException(Exception ex)
{
    Console.WriteLine(ex.Message + "\r\n" + ex.StackTrace);
} 
```

控制台输出：

```
The filename, directory name, or volume label syntax is incorrect.

at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
at System.IO.File.Create(String path)
at lambda_method(Closure ) 
```

# jquery - 幻灯片图像，带有 jquery 循环的视频

> ID：11012745
> 
> 赞同：0
> 
> 时间：2012-06-13T10:15:26.027
> 
> 标签：jquery

我正在尝试使用图像和视频创建幻灯片。幻灯片正在运行，但是当视频正在运行时，幻灯片转到下一张幻灯片，因为 jquery 超时.. 我希望先完成视频，然后再转到下一张幻灯片，即使视频也需要 5 分钟才能运行。

任何人都可以帮助我吗？

这是剧本。。

```
<head>
<script src="js/jquery-1.4.4.min.js" type="text/javascript"></script>
<script src="js/jquery.cycle.all.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
$('#myslides').cycle({
    fit: 1, pause: 2
});
});
</script>

<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />

</head>
<body>

<?php

  echo " < table border=0 align=center width=1280 bgcolor=#FA9C56 CLASS='deepsea' >";
  echo "< tr height=65><td><img src=images/logo.png width=50 height=50 border=0>< /td>
  < td align=left width=100%>< font class=fakultas>< font color=#F3F60F>< strong>Fakultas Ilmu Sosial & Politik < /strong></ font>< /td>< /tr>";
  echo "< /table>";
?>
< div id="myslides">
< ?php

include "config/koneksi.php";
$tanggalku = date("Y-m-d");

$cek_query= mysql_query("SELECT * FROM pengumuman a JOIN pengumuman_detail b ON     a.id_pengumuman=b.id_pengumuman and     deadline_pengumuman > '$tanggalku'");

while ($rs=mysql_fetch_array($cek_query))
{

  echo "< table border=0 align=center width=1200>";

  echo "< tr>";
  echo "< td align=center  width=100%>";
  echo "< font class=judul><font color=#111111><strong>".$rs[judul_pengumuman]."    </strong>< /font>";
  echo "< /td>";
  echo "< /tr>";
  echo "< tr>";
  echo "< td width=1200>";  
  echo '< tr>< td>< hr class="style2">< /td>< /tr>';
  echo "< /td>";
  echo "< /tr>";

  echo "< tr>";

  if ( $rs[status]=='F')
  {
  echo "< td  align=center>";
  echo "< img src='foto/".$rs[file_upload]."'  border=2 >";
  echo "< /td>";
  }
  elseif ( $rs[status]=='V')
  {
   echo "< td  align=center>";
  ?>

        < OBJECT ID="MediaPlayer" WIDTH=320 HEIGHT=331 CLASSID="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95" STANDBY="Loading Windows Media Player components..." TYPE="application/x-oleobject">
        <  PARAM NAME="FileName" VALUE="video-filename.wmv">
    <  PARAM name="ShowControls" VALUE="true">
    <  param name="ShowStatusBar" value="true">
    <  PARAM name="ShowDisplay" VALUE="true">
    <  PARAM name="autostart" VALUE="true">
    <  EMBED TYPE="application/x-mplayer2" SRC="ABBG.avi" NAME="MediaPlayer" WIDTH=820 HEIGHT=451 ShowControls="0" 
    ShowStatusBar="1" ShowDisplay="1" autostart="1"> </EMBED>
    </OBJECT> 

  < ?php
        echo "< /td>";
  }
  else
  {
  echo "< td width=1200 align=center>";
  echo " ".$rs[isi_pengumuman_detail]."";
  echo "< /td>";
  }

  echo "< /tr>";

  echo "< /table>";
}

?>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:28:51.470

您可以使用`$('#myslides').cycle('toggle');`来打开和关闭幻灯片。您可以使用该`after: mycallback`选项来检测正在显示的幻灯片是否为视频。如果是，请暂停循环，开始播放视频。

最后，您需要找到一种方法来分派即使视频完成**或**用户通过转到下一张幻灯片来覆盖它。在这种情况下，您`$('#myslides').cycle('toggle');`再次调用以重新打开幻灯片。

了解视频事件的最简单方法是使用支持这些事件的播放器，例如 jwplayer。它也会对您的访客更好。

# java - Swing 客户端上的 Apache Shiro - 身份验证授权的 EJB 3.1 案例

> ID：11012746
> 
> 赞同：5
> 
> 时间：2012-06-13T10:15:27.893
> 
> 标签：java, swing, jboss, ejb-3.0, shiro

**一般案例**：一个简单的应用程序，它通过 EJB (3.1) 公开其服务 - 其中大多数是无状态会话 bean（这里没有什么好玩的）和基于 SWING 的客户端，它们通过远程接口调用这些服务并执行它们必须做的事情。

**安全**性：我想对这个调用周期进行身份验证/授权，当然还要保护我的服务。显而易见的答案是在服务器中使用 JAAS 并在底层服务器上使用任何自定义布线设置。这仍然是一个选择

***Apache Shiro***：很多人都在谈论 Apache Shiro，事实上它具有非常简单的 API 和机制——可能独立于应用程序服务器。

技术问题：

1.  **会话**：就我而言，我没有 HTTP 会话——据我所知，Shiro 至少需要某种我需要传递的 SESSION ID。在不污染我的业务 API 的情况下，在我的 RMI/IIOP 调用中向服务器注入用户凭据的任何好方法？

2.  **服务器端实现**：对于我经历过的少数资源，我想我可以通过从 Singleton Ejb 3.1 bean 中“引用它”来实现 Shiro DefaultSecurityManager。还有其他想法吗？然后我可以轻松地创建一个拦截器并将其添加到我的远程调用中——所以当一个新调用通过我的远程 EJB 方法时——Shiro 拦截器来验证我的用户或检查特定权限。

任何评论/提示/示例？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:26:56.560

从 shiro 开始，尝试使用 ServiceLocator 模式。EJB 的查找在容器（JBoss、Netweaver、Weblogig 等）之间是不同的。

在 Application Server 中，尝试使用基于容器的安全约束（@RolesAllowed、@PermitAll、@Deny...）。JAAS 将使用用户的主体创建主题，因此只需使用容器授权（@RolesAllowed、@PermitAll、@Deny...）。当您从一个容器迁移到另一个容器时会更好。

# c++ - glutswapbuffers 实际上做了什么？

> ID：11012747
> 
> 赞同：8
> 
> 时间：2012-06-13T10:15:27.360
> 
> 标签：c++, opengl, glut

前缓冲区指针现在是否指向后缓冲区？或者前缓冲区内容被后缓冲区更新？如果是这样，整个块的内容被更新还是只更新了更改的内容？

opengl.org 上 glutswapbuffers 的描述是

> 在当前窗口使用的层上执行缓冲区交换。具体来说， glutSwapBuffers 将当前窗口使用的图层的后台缓冲区的内容提升为前台缓冲区的内容。然后后台缓冲区的内容变得未定义。

最后一句是什么意思？后台缓冲区现在指向空？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T15:22:18.447

> > 然后后台缓冲区的内容变得未定义。
> 
> 最后一句是什么意思？

这确实意味着，在交换之后，后台缓冲区的内容可能就是一切。它可能是前端缓冲区、随机数据、你度假的照片等等。它*没有定义*，你不应该对它做任何假设。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:37:27.950

这意味着，过剩并不能保证在后缓冲区变为前缓冲区后，现在返回的缓冲区将是有意义的，就像您假设它包含以前在“旧”前缓冲区中的信息一样。我想，它是这样做的，否则你需要第三个缓冲区以这种方式交换缓冲区，这在高性能 3D 中是不可接受的

# ruby-on-rails - 不要使用 imap 将电子邮件标记为已读/已查看

> ID：11012748
> 
> 赞同：0
> 
> 时间：2012-06-13T10:15:37.330
> 
> 标签：ruby-on-rails, ruby, imap

在我的 Rails 应用程序中，我有一个使用 imap 读取电子邮件的 rake 任务。电子邮件已阅读并标记为已读/已查看。我不想将电子邮件标记为已读/已查看。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:21:50.567

[http://www.rubydoc.info/stdlib/net/1.9.2/Net/IMAP/FetchData](http://www.rubydoc.info/stdlib/net/1.9.2/Net/IMAP/FetchData)

当您获取电子邮件时，您会收到标记。您想删除 \Seen 标志。

# java - 使用变量名称获取变量的值，作为变量值传递

> ID：11012751
> 
> 赞同：1
> 
> 时间：2012-06-13T10:15:45.520
> 
> 标签：java

使用 Java，我必须从 XML 文件中获取多组值才能在我的代码中使用。碰巧的是，我检索的值之一是静态变量的名称（其值在类文件中定义。）我需要找到一种方法来使用名称获取静态变量的值我从 XML 文件中得到的变量。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:17:45.550

您可以使用[`Class.forName`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)来加载类（如有必要；如果您直接引用它，请使用`ClassName.class`），然后[`Class#getField`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getField%28java.lang.String%29)为此[`Field#get`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#get%28java.lang.Object%29)：

```
import java.lang.reflect.*;

public class GetTheStatic {
    public static final void main(String[] args) {
        String className;
        String fieldName;
        Class cls;
        Field fld;
        String value;

        if (args.length != 2) {
            System.out.println("Need [classname] [fieldName]");
            System.exit(-1);
        }

        try {
            className = args[0];
            fieldName = args[1];

            cls = Class.forName(className);
            fld = cls.getField(fieldName);
            value = (String)fld.get(cls);
            System.out.println("Field value is " + value);
            System.exit(0);
        }
        catch (Exception e) {
            System.out.println("Exception: " + e.getMessage());
            System.exit(-1);
        }
    }
} 
```

假设我有这个其他类：

```
public class TheStatic {
    public static String foo = "bar";
} 
```

然后这个：

```
java GetTheStatic TheStatic foo
```

输出

```
字段值为 bar
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:22:09.907

使用反射，如下：

```
Field f1 = <ClassHavingTheStaticField>.class.getDeclaredField("<staticFieldName>");
Object o = f1.get(null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:22:20.860

使用反射 API，您可以获得类的静态变量名称，如下所示。

```
Field[] fields = YourClass.class.getDeclaredFields(); 
```

然后您可以迭代它们并与您的 xml 名称值进行比较。

# android - 将Android ICS移植到华为Ascend G300-U8818

> ID：11012759
> 
> 赞同：0
> 
> 时间：2012-06-13T10:16:18.843
> 
> 标签：android, android-4.0-ice-cream-sandwich

华为Ascend G300-U8818自带android 2.3.6 os版本。

我已经成功编译了android ICS的源代码

**是否可以在华为 G300-U8818 上移植安卓 ICS？**

**如果可以移植，那么设备性能将如何受到影响？**

华为官网对将安卓ICS移植到华为G300-U8818保持沉默。

我如何确保移植是否可行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:42:57.827

官网称g300将在第三季更新至安卓4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:44:13.920

[http://www.modaco.com/forum/650-huawei-ascend-g300-g300modacocom/](http://www.modaco.com/forum/650-huawei-ascend-g300-g300modacocom/)

已经在中国推出的 ics 在英国运行良好

U8815和u8818是同一个设备

# image - 如何从位图创建透明的 png 图像？

> ID：11012761
> 
> 赞同：4
> 
> 时间：2012-06-13T10:16:21.760
> 
> 标签：image, delphi, bitmap, png, alpha-transparency

我的任务是：

1.  创建一个 TBitmap 对象。
2.  用透明颜色填充它（alpha = 0）。
3.  将此位图分配给 TPngImage。
4.  保存具有 Alpha 透明度的 PNG 文件。

我怎样才能在 Delphi XE 中做到这一点？

```
var
  Png: TPngImage;
  X, Y: Integer;
  Bitmap: TBitmap;
begin
  Bitmap := TBitmap.Create();
  Bitmap.PixelFormat := pf32bit;
  Png := TPngImage.Create();
  try
    Bitmap.SetSize(100, 100);

    // How to clear background in transparent color correctly?
    // I tried to use this, but the image in PNG file has solid white background:
    for Y := 0 to Bitmap.Height - 1 do
      for X := 0 to Bitmap.Width - 1 do
        Bitmap.Canvas.Pixels[X, Y]:= $00FFFFFF;

    // Now drawing something on a Bitmap.Canvas...
    Bitmap.Canvas.Pen.Color := clRed;
    Bitmap.Canvas.Rectangle(20, 20, 60, 60);

    // Is this correct?
    Png.Assign(Bitmap);
    Png.SaveToFile('image.png');
  finally
    Png.Free();
    Bitmap.Free();
  end;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:11:49.110

或多或少是[多林答案](https://stackoverflow.com/a/6950006/576719)的副本。它展示了如何制作透明的 png 图像以及如何清除背景。

```
uses
  PngImage;
...

var
  bmp: TBitmap;
  png: TPngImage;
begin
  bmp := TBitmap.Create;
  bmp.SetSize(200,200);

  bmp.Canvas.Brush.Color := clBlack;
  bmp.Canvas.Rectangle( 20, 20, 160, 160 );

  bmp.Canvas.Brush.Style := bsClear;
  bmp.Canvas.Rectangle(1, 1, 199, 199);

  bmp.Canvas.Brush.Color := clWhite;
  bmp.Canvas.Pen.Color := clRed;
  bmp.Canvas.TextOut( 35, 20, 'Hello transparent world');

  bmp.TransparentColor := clWhite;
  bmp.Transparent := True;

  png := TPngImage.Create;
  png.Assign( bmp );
  png.SaveToFile( 'C:\test.png' );

  bmp.Free;
  png.Free;
end; 
```

# openssl - openssl SSL_accept 错误

> ID：11012762
> 
> 赞同：1
> 
> 时间：2012-06-13T10:16:22.463
> 
> 标签：openssl

我需要让用户能够在 SSL 和非 SSL 通信之间切换。为此，SSL 代码查找特定的命令包，关闭 SSL 内容并开始正常的 TCP/IP 通信。这工作正常。但是，当我尝试重新启动一切以在 SSL 模式下运行时，我从 SSL_accept 收到 -2 错误。一定有什么东西我没有清理，但是经过大量搜索清理建议后我没有找到它，所有这些我都扔了，如下所示：

```
 SSL_shutdown(ssl);
    SSL_CTX_free(ctx);
BIO_free(acc);
CONF_modules_unload(1);
OBJ_cleanup();
EVP_cleanup();
ENGINE_cleanup();
CRYPTO_cleanup_all_ex_data();
ERR_remove_state(0);
ERR_free_strings(); 
```

很难相信在那之后还有什么需要清理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:20:44.180

您应该发布更多代码以确切了解您是如何收到错误的。如果你做一个`SSL_get_error`失败的 SSL_accept，你到底收到了什么？

从这些建议中，我可以看到你正在做一个`BIO_free`，有时依赖它可能会关闭连接的底层`BIO_METHOD`，我假设你正在为下一个 SSL_accept 重用它，这可能是问题所在：

> 调用 BIO_free() 也可能对底层 I/O 结构产生一些影响，例如它可能会在某些情况下关闭被引用的文件。有关更多详细信息，请参阅各个 BIO_METHOD 描述。

来自 BIO_free [man](http://www.openssl.org/docs/crypto/BIO_new.html)。

如果你想重用连接，你应该`BIO_pop` [在这里](http://www.openssl.org/docs/crypto/BIO_s_accept.html)检查。

# xml - 从文件系统中读取 xml

> ID：11012763
> 
> 赞同：0
> 
> 时间：2012-06-13T10:16:28.080
> 
> 标签：xml, node.js

我将 xml 文件存储在文件系统中。我想在不解析的情况下读取 xml 文件并将其放在浏览器表单 node.js 程序中。我为此尝试了以下代码：

```
 var filePath="./hotel.xml";
    var fileContent=fs.readFileSync(filePath);
    console.log(fileContent); 
```

但它给了我奇怪的输出。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:00:54.723

我使用以下方法解决了这个问题：

```
 fs.readFile('./hotel.xml', 'utf8', function(err, data) {
        if(err) 
        {
            return console.log(err);
        }
        res.send(data);
    }); 
```

# git - git 检查提交提交的时间

> ID：11012768
> 
> 赞同：9
> 
> 时间：2012-06-13T10:16:49.203
> 
> 标签：git

如何判断给定时间 git 存储库中存在什么版本？

假设我有一个共享存储库，多个用户可以将更改推送到其中，并且我想在过去某一天的 12:00 冻结快照。

如果有人在 11:30 进行本地提交，但仅在 12:30 将其推送到中央存储库，我可以稍后检测到吗？

我是否可以检测到是否有人在 12:00 之后采取行动修改了本地提交以记录提交日期为 11:30，然后将其推送到上游？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T10:20:46.987

Git 本身不会跟踪此信息，但我能够查看服务器本身 git 存储库中“objects”目录中提交对象文件的文件创建时间戳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:29:14.853

你可以使用一个钩子，可能是[post-receive 钩子](http://schacon.github.com/git/git-receive-pack.html#_post_receive_hook)来自己存储所需的信息，或者简单地启用 reflog（它在裸存储库中默认禁用）。reflog 会自动跟踪分支的本地历史记录，例如。`git reflog -1 --format=%H master@{12:00}`会告诉你主裁判在 12:00 指向什么提交。

注意 reflog 过期了，你可以通过[gc.reflogexpire](http://schacon.github.com/git/git-config.html#)配置过期时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:59:47.660

`git`当事物被推入存储库（或为此而获取）时不会记录，只有提交本身的两个时间戳，所以我认为没有一种可靠的方法可以做到这一点，而无需编写可以在某处存储额外元数据的钩子您，或依赖 git-daemon、ssh 或您的 http 服务器完成的日志记录，具体取决于用于推送/获取的方法。

# perl - perl Net::Telnet 基础

> ID：11012769
> 
> 赞同：1
> 
> 时间：2012-06-13T10:16:53.820
> 
> 标签：perl, buffer, telnet

如[Net::Telnet 的 cpan 文档中](http://search.cpan.org/~jrogers/Net-Telnet-3.03/lib/Net/Telnet.pm)所述：

**所有输出都被刷新，而所有输入都被缓冲。每个对象都包含自己的输入缓冲区。**

粗略地说，是不是我发送的命令被称为*输出*，结果被称为*输入*，因为它被缓冲了？

我有以下代码用于发送命令和接收结果。

```
sub sendCmd {
my $t = shift @_;
my $query = shift @_;
$t->buffer_empty;
print "Sending command $query to telnet target\n";
@out = $t->cmd(String => $query,Timeout => 70,
            Errmode => 'return',Prompt => '/#/');
push(@out, ${$t->buffer});
$t->buffer_empty;
return @out;
} 
```

这里的问题是，如果我有以下类型的循环：

```
while(1)
{
    @res1 = sendCmd('cmd1');
    print @res1,"\n";
    @res2 = sendCmd('cmd2');
    print @res2,"\n";
} 
```

这给出了一段时间的预期交替输出，但在那之后：

**问题 1**：我观察了一段时间后 - cmd1 的结果显示为 cmd2 的结果，反之亦然。

**问题 2**：命令本身可能会附加到结果中。

请帮我解决这两个问题。同时我正在考虑恢复等待 - 打印组合。

谢谢。

# mysql - 使用 JSF 的登录页面

> ID：11012771
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:16:55.847
> 
> 标签：mysql, jsf, jsf-2, login

如果成功，谁能帮我读取数据库值并将其传递到 jsf 中的下一页。

这是我的代码。

```
 <!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
template="/templates/template.xhtml"
xmlns:rich="http://richfaces.org/rich">

<ui:define name="body">
    <h:form>

        <rich:panel header="Employee Log In Page" style="width: 315px">
            <h:panelGrid columns="2">

                <h:outputText value="EmployeeId: " />

                <h:inputText id="employeeId" value="">

                    <f:validateLength minimum="30" maximum="30" />

                </h:inputText>

                <h:outputText id= "password" value="PassWord: " />

                <h:inputText value="">

                    <f:validateLength minimum="15" maximum="15" />
                </h:inputText>
                <h:commandButton action="#{ }" value="Log In" />
            </h:panelGrid>
        </rich:panel>
    </h:form>
</ui:define>
</ui:composition> 
```

连接性.java

```
 import java.sql.DriverManager;
   import java.sql.ResultSet;
  import java.util.ArrayList;

  import antlr.collections.List;

   import com.model.UserDetails;
 import com.mysql.jdbc.Connection;
  import com.mysql.jdbc.Statement;

 public class Connectivity {

public static void main(String[] argv) {

    System.out.println("-------- MySQL JDBC Connection Testing ------------");

int i=0;

Connection con ;
Statement ps;
ResultSet rs;

  try
  {
  Class.forName("com.mysql.jdbc.Driver");
  con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/LeaveApp",
"root","root");

  ps = (Statement) con.createStatement();
  rs = ps.executeQuery("select * from Login");
  while(rs.next()){
  System.out.println(rs.getString(1));
  System.out.println(rs.getString(2));
  System.out.println(rs.getString(3));

  i++;

  }

  }
  catch (Exception e)
  {
  System.out.println("Error Data : " + e.getMessage());
  }
}  
} 
```

用户详细信息.java

```
 package com.model;

       public class UserDetails {
public int login_id;
public String user_name;
public String user_password;
public int getLogin_id() {
    return login_id;
}
public void setLogin_id(int login_id) {
    this.login_id = login_id;
}
public String getUser_name() {
    return user_name;
}
public void setUser_name(String user_name) {
    this.user_name = user_name;
}
public String getUser_password() {
    return user_password;
}
public void setUser_password(String user_password) {
    this.user_password = user_password;
}

} 
```

我需要验证登录页面。怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:01:20.607

在视图中设置值和操作方法：

```
<h:outputText value="EmployeeId: " />
<h:inputText id="employeeId" value="#{userDetails.employeeId}">
   <f:validateLength minimum="30" maximum="30" />
</h:inputText>
<h:outputText id="password" value="PassWord: " />
<h:inputText value="#{userDetails.password}">
   <f:validateLength minimum="15" maximum="15" />
</h:inputText>
<h:commandButton action="#{userDetails.login}" value="Log In" /> 
```

并声明这些字段并在您的支持 bean 中定义此方法：

```
private Integer employeeId;
private String password;

public String login() {      
   String result = null;
   boolean isValidUser = userDao.login(employeeId, password);  // verification user's data in db   
   if (isValidUser) {
      result = "success";
   } else { 
      result = "fail";
   }
   return result;
}

public Integer getImployeeId() {
   return employeeId;
}

public void setEmployeeId(Integer employeeId) {
   this.employeeId = employeeId;
}

public String getPassword() {
   return password;
}

public void setPassword(String password) {
   this.password = password;
} 
```

# rest - 经典 ASP amazon s3 休息授权

> ID：11012777
> 
> 赞同：12
> 
> 时间：2012-06-13T10:17:15.007
> 
> 标签：rest, asp-classic, vbscript, amazon-s3, wsh

我对我在这里做错了什么感到困惑......

```
<script language="javascript" runat="server">
  function GMTNow(){return new Date().toGMTString()}
</script>
<%

Const AWS_BUCKETNAME = "uk-bucketname"
Const AWS_ACCESSKEY = "GOES HERE"
Const AWS_SECRETKEY = "SECRET"
LocalFile = Server.Mappath("/test.jpg")

Dim sRemoteFilePath
    sRemoteFilePath = "/files/test.jpg" 'Remote Path, note that AWS paths (in fact they aren't real paths) are strictly case sensitive

Dim strNow
    strNow = GMTNow() ' GMT Date String

Dim StringToSign
    StringToSign = Replace("PUT\n\nimage/jpeg\n\nx-amz-date:" & strNow & "\n/"& AWS_BUCKETNAME & sRemoteFilePath, "\n", vbLf)

Dim Signature
    Signature = BytesToBase64(HMACSHA1(AWS_SECRETKEY, StringToSign))

Dim Authorization
    Authorization = "AWS " & AWS_ACCESSKEY & ":" & Signature

Dim AWSBucketUrl
    AWSBucketUrl = "http://s3.amazonaws.com/" & AWS_BUCKETNAME

With Server.CreateObject("Microsoft.XMLHTTP")
    .open "PUT", AWSBucketUrl & sRemoteFilePath, False
    .setRequestHeader "Authorization", Authorization
    .setRequestHeader "Content-Type", "image/jpeg"
    .setRequestHeader "Host", AWS_BUCKETNAME & ".s3.amazonaws.com"  
    .setRequestHeader "x-amz-date", strNow
    .send GetBytes(LocalFile) 'Get bytes of local file and send
    If .status = 200 Then ' successful
        Response.Write "<a href="& AWSBucketUrl & sRemoteFilePath &" target=_blank>Uploaded File</a>"
    Else ' an error ocurred, consider xml string of error details
        Response.ContentType = "text/xml"
        Response.Write .responseText
    End If
End With

Function GetBytes(sPath)
    dim fs,f
set fs=Server.CreateObject("Scripting.FileSystemObject")
set f=fs.GetFile(sPath)
GetBytes = f.Size
set f=nothing
set fs=nothing
End Function

Function BytesToBase64(varBytes)
    With Server.CreateObject("MSXML2.DomDocument").CreateElement("b64")
        .dataType = "bin.base64"
        .nodeTypedValue = varBytes
        BytesToBase64 = .Text
    End With
End Function

Function HMACSHA1(varKey, varValue)
    With Server.CreateObject("System.Security.Cryptography.HMACSHA1")
        .Key = UTF8Bytes(varKey)
        HMACSHA1 = .ComputeHash_2(UTF8Bytes(varValue))
    End With
End Function

Function UTF8Bytes(varStr)
    With Server.CreateObject("System.Text.UTF8Encoding")
        UTF8Bytes = .GetBytes_4(varStr)
    End With
End Function
%> 
```

现在得到错误。

```
msxml3.dll error '800c0008'

The download of the specified resource has failed.

/s3.asp, line 39 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T20:49:32.603

据我所知，我想解释一下 S3 Rest Api 的工作原理。
首先，您需要了解签署亚马逊接受的字符串应该是什么。

**格式 ：**

```
StringToSign = HTTP-Verb + "\n" +
    Content-MD5 + "\n" +
    Content-Type + "\n" +
    Date + "\n" +
    CanonicalizedAmzHeaders +
    CanonicalizedResource; 
```

**生成签名字符串：**

```
Signature = Base64( HMAC-SHA1( YourSecretAccessKeyID, UTF-8-Encoding-Of( StringToSign ) ) ); 
```

**传递授权标头：**

```
Authorization = "AWS" + " " + AWSAccessKeyId + ":" + Signature; 
```

不幸的是，您将逐字节播放，因为没有为经典 asp 发布任何 SDK。所以，**应该通过阅读整个页面来理解** [http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)

对于要签名的字符串，如您在上面看到的格式，API 保留了三个本机标头。**Content-Type**、**Content-MD5**和**Date**。这些标头必须存在于字符串中才能签名，即使您的请求在没有标头名称的情况下它们不是空的，只是它的值。有一个例外，如果请求中已经存在标头，`Date`则标头必须在字符串中为空才能签名。`x-amz-date`然后，如果请求具有规范的亚马逊标头，您应该将它们添加为键值对，例如`x-amz-headername:value`. 但是，对于多个标头，还需要考虑另一个例外情况。多个标头应合并为一个标头，其中值以逗号分隔。

**正确的**

> x-amz-headername:value1,value2

**错误的**

> x-amz-headername:value1\n
> x-amz-headername:value2

**最重要的是**，标头必须按其在字符串中的组升序进行签名。首先是按升序排列的保留标头，然后是按升序排列的规范标头。

我建议使用[`DomDocument`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757878%28v=vs.85%29.aspx)功能来生成 Base64 编码的字符串。此外，您可以使用 .Net 的互操作来代替 Windows 脚本组件（.wsc 文件），例如`System.Security.Cryptography`使用`System.Text`. 所有这些互操作性都在当今的 IIS Web 服务器中可用。
因此，作为示例，我编写了以下脚本只是将文件发送到您指定的存储桶。考虑并测试它。
假定的本地文件名是`myimage.jpg`并且将以相同的名称上传到存储桶的根目录。

```
<script language="javascript" runat="server">
function GMTNow(){return new Date().toGMTString()}
</script> 
```

```
<%
Const AWS_BUCKETNAME = "uk-bucketname"
Const AWS_ACCESSKEY = "GOES HERE"
Const AWS_SECRETKEY = "SECRET"

LocalFile = Server.Mappath("/test.jpg")

Dim sRemoteFilePath
    sRemoteFilePath = "/files/test.jpg" 'Remote Path, note that AWS paths (in fact they aren't real paths) are strictly case sensitive

Dim strNow
    strNow = GMTNow() ' GMT Date String

Dim StringToSign
    StringToSign = Replace("PUT\n\nimage/jpeg\n\nx-amz-date:" & strNow & "\n/"& AWS_BUCKETNAME & sRemoteFilePath, "\n", vbLf)

Dim Signature
    Signature = BytesToBase64(HMACSHA1(AWS_SECRETKEY, StringToSign))

Dim Authorization
    Authorization = "AWS " & AWS_ACCESSKEY & ":" & Signature

Dim AWSBucketUrl
    AWSBucketUrl = "https://" & AWS_BUCKETNAME & ".s3.amazonaws.com"

With Server.CreateObject("MSXML2.ServerXMLHTTP.6.0")
    .open "PUT", AWSBucketUrl & sRemoteFilePath, False
    .setRequestHeader "Authorization", Authorization
    .setRequestHeader "Content-Type", "image/jpeg"
    .setRequestHeader "Host", AWS_BUCKETNAME & ".s3.amazonaws.com"  
    .setRequestHeader "x-amz-date", strNow
    .send GetBytes(LocalFile) 'Get bytes of local file and send
    If .status = 200 Then ' successful
        Response.Write "<a href="& AWSBucketUrl & sRemoteFilePath &" target=_blank>Uploaded File</a>"
    Else ' an error ocurred, consider xml string of error details
        Response.ContentType = "text/xml"
        Response.Write .responseText
    End If
End With

Function GetBytes(sPath)
    With Server.CreateObject("Adodb.Stream")
        .Type = 1 ' adTypeBinary
        .Open
        .LoadFromFile sPath
        .Position = 0
        GetBytes = .Read
        .Close
    End With
End Function

Function BytesToBase64(varBytes)
    With Server.CreateObject("MSXML2.DomDocument").CreateElement("b64")
        .dataType = "bin.base64"
        .nodeTypedValue = varBytes
        BytesToBase64 = .Text
    End With
End Function

Function HMACSHA1(varKey, varValue)
    With Server.CreateObject("System.Security.Cryptography.HMACSHA1")
        .Key = UTF8Bytes(varKey)
        HMACSHA1 = .ComputeHash_2(UTF8Bytes(varValue))
    End With
End Function

Function UTF8Bytes(varStr)
    With Server.CreateObject("System.Text.UTF8Encoding")
        UTF8Bytes = .GetBytes_4(varStr)
    End With
End Function
%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:57:41.497

Amazon Signature 的 url 编码方式必须与 VBSCript 的编码方式略有不同。以下函数将正确编码结果：

JScript 版本：

```
function amazonEncode(s)
{
    return Server.UrlEncode(s).replace(/\+/g,"%20").replace(/\%2E/g,".").replace(/\%2D/g,"-").replace(/\%7E/g,"~").replace(/\%5F/g,"_");
} 
```

VBScript 版本：

```
function amazonEncode(s)
    dim retval
    retval = Server.UrlEncode(s)
    retval = replace(retval,"+","%20")
    retval = replace(retval,"%2E",".")
    retval = replace(retval,"%2D","-")
    retval = replace(retval,"%7E","~")
    retval = replace(retval,"%5F","_")
    amazonEncode = retval
end function 
```

至于 base64，我使用了 .NET 已经为它构建的功能。我必须创建一个 DLL 来包装它，以便我可以从 JScript（或 VBScript）中使用它。

以下是创建该 dll 的方法：

```
Download the free C# 2010 Express and install it.
You also need to use two other tools that you won’t have a path to, so you will need to add the path to your PATH environment variable, so at a cmd prompt search for regasm.exe, guidgen.exe and sn.exe (you might find several versions – select the one with the latest date).
•   cd\
•   dir/s regasm.exe
•   dir/s sn.exe
•   dir/s guidgen.exe

So as an example, a COM object that has just one method which just returns “Hello”:
Our eventual aim is to use it like this:
<%@Language=JScript%>
<%
var x = Server.CreateObject("blah.whatever");
Response.Write(x.someMethod());
%>

or 

<%@Language=VBScript%>
<%
dim x
set x = Server.CreateObject("blah.whatever")
Response.Write x.someMethod()
%>

•   Start C# and create a new project
•   Select “Empty Project”
•   Give it a name – this becomes the namespace by default (the blah in the sample above)
•   Next save the project (so you know where to go for the next bit).  This will create a folder structure like so:
o   blah    this contains your solution files that the editor needs (blah.sln etc)
   blah    this contains your source code and project files
•   bin
o   Debug           the compiled output ends up here
•   Next, using the cmd console, navigate to the root blah folder and create a key pair file:
   sn –k key.snk
•   Next you need a unique guid (enter guidgen at the cmd prompt)
o   Select registry format
o   Click “New Guid”
o   Click “Copy”
•   Back to C# editor – from the menu, select Project – Add Class
•   Give it a name – this is the whatever in the sample above
•   After the opening brace just after the namespace line type:
   [GuidAttribute(“paste your guid here”)]
   remove the curly brackets from your pasted guid
•   You will need to add another “using” at the top
  using System.Runtime.InteropServices;
•   Finally you need to create someMethod

The final C# code looks like this (the bits in red may be different in your version):
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace blah
{
    [GuidAttribute("AEF4F27F-9E97-4189-9AD5-64386A1699A7")]
    public class whatever
    {
        public string someMethod()
        {
            return "Hello";
        }
    }
}

•   Next, from the menu, select Project – Properties
o   On the left, select Application and, for the Output type dropdown, select “Class Library”
o   On the left, select Signing and tick the “Sign the assembly” box, then browse to the key.snk file you made earlier
o   Save the properties (CTRL-S)
•   Next build the dll (Press F6) – This will create a dll in the Debug folder
•   Open a cmd window as administrator (right click cmd.exe and select “Run as Administrator”)
•   Navigate to the Debug folder and enter the following to register the assembly:
  regasm blah.dll /tlb:blah.tlb /codebase blah

That’s it – the above is a genuine COM component and will work in other applications, the example below allows for event handling and only really works in ASP due to the default property mechanism of ASP: 
```

base64 的代码是：

```
 // returns a base 64 encoded string that has been encrypted with SHA256
    // parameters:
    //  s   string to encrypt
    //  k   key to use during encryption
    public string getBase64SHA256(string s, string k)
    {
        HMACSHA256 sha = new HMACSHA256();
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        sha.Key = encoding.GetBytes(k);
        byte[] hashBytes = sha.ComputeHash(encoding.GetBytes(s));
        return System.Convert.ToBase64String(hashBytes);
    }

    // returns a base 64 encoded string that has been encrypted with SHA1
    // parameters:
    //  s   string to encrypt
    //  k   key to use during encryption
    public string getBase64SHA1(string s, string k)
    {
        HMACSHA1 sha = new HMACSHA1();
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        sha.Key = encoding.GetBytes(k);
        byte[] hashBytes = sha.ComputeHash(encoding.GetBytes(s));
        return System.Convert.ToBase64String(hashBytes);
    } 
```

您将需要相关用途：

```
using System.Security.Cryptography; 
```

在计算 SHA 和 base64 之前，完整的签名必须具有按字母顺序排列的所有查询字符串名称-值对。这是我的签名创建函数版本：

```
function buildAmazonSignature(host,req,qstring)
{
    var str="", i, arr = String(qstring).split("&");

    for (i=0; i<arr.length; i++)
        arr[i] = arr[i].split("=");
    arr.sort(amazonSortFunc);

    for (i=0; i<arr.length; i++)
    {
        if (str != "")
            str += "&";

        str += arr[i][0] + "=" + arr[i][1];
    }

    str = "GET\n"+host+"\n"+req+"\n"+str;

    var utils = Server.CreateObject("FMAG.Utils");
    var b64 = utils.getBase64SHA256(str, "xxxxxxxxxx");
    utils = null;

    return amazonEncode(b64);
}

function amazonSortFunc(a,b)
{
    return (a[0]<b[0])?-1:((a[0]>b[0])?1:0);
} 
```

VBScript 没有很好的数组排序工具，所以你必须自己解决这个问题 - 抱歉

我也有这种格式的时间戳：

YYYY-MM-DDTHH:MM:SSZ

查询字符串中的内容还包括以下内容：

```
AWSAccessKeyId
SignatureMethod
SignatureVersion
Version
Expires
Action 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T21:13:05.580

非常感谢您提出这个问题，为我的 S3 备份服务**启动 WSH/VBScript 帮助很大；-)**

我没有太多时间，所以我不会详细介绍我从 Chris 的代码中更改的内容，但请在下面找到我的**完美运行的小原型脚本**;-)

这只是一个 WSH/VBScript，所以你不需要 IIS 来运行它，你只需要将内容粘贴到一个扩展名为“.vbs”的文件中，然后你就可以**直接执行它**;-)

```
Option Explicit
'-- Amazon Web Services > My Account > Access Credentials > Access Keys --'
Dim strAccessKeyID: strAccessKeyID = "..."
Dim strSecretAccessKey: strSecretAccessKey = "..."
'-- Parameters: --'
Dim strLocalFile: strLocalFile = "..."
Dim strRemoteFile: strRemoteFile = "..."
Dim strBucket: strBucket = "..."
'-- Authentication: --'
Dim strNowInGMT: strNowInGMT = NowInGMT()
Dim strStringToSign: strStringToSign = _
  "PUT" & vbLf & _
  "" & vbLf & _
  "text/xml" & vbLf & _
  strNowInGMT & vbLf & _
  "/" & strBucket + "/" & strRemoteFile
Dim strSignature: strSignature = ConvertBytesToBase64(HMACSHA1(strSecretAccessKey, strStringToSign))
Dim strAuthorization: strAuthorization = "AWS " & strAccessKeyID & ":" & strSignature
'-- Upload: --'
Dim xhttp: Set xhttp = CreateObject("MSXML2.ServerXMLHTTP")
xhttp.open "PUT", "http://" & strBucket & ".s3.amazonaws.com/" & strRemoteFile, False
xhttp.setRequestHeader "Content-Type", "text/xml"
xhttp.setRequestHeader "Date", strNowInGMT 'Yes, this line is mandatory ;-) --'
xhttp.setRequestHeader "Authorization", strAuthorization
xhttp.send GetBytesFromFile(strLocalFile)
If xhttp.status = "200" Then
  WScript.Echo "The file has been successfully uploaded ;-)"
Else
  WScript.Echo "There was an error :-(" & vbCrLf & vbCrLf & _
  xhttp.responseText
End If
Set xhttp = Nothing
'-- NowInGMT ------------------------------------------------------------------'
Function NowInGMT()
  'This is probably not the best implementation, but it works ;-) --'
  Dim sh: Set sh = WScript.CreateObject("WScript.Shell")
  Dim iOffset: iOffset = sh.RegRead("HKLM\System\CurrentControlSet\Control\TimeZoneInformation\ActiveTimeBias")
  Dim dtNowGMT: dtNowGMT = DateAdd("n", iOffset, Now())
  Dim strDay: strDay = "NA"
  Select Case Weekday(dtNowGMT)
    Case 1 strDay = "Sun"
    Case 2 strDay = "Mon"
    Case 3 strDay = "Tue"
    Case 4 strDay = "Wed"
    Case 5 strDay = "Thu"
    Case 6 strDay = "Fri"
    Case 7 strDay = "Sat"
    Case Else strDay = "Error"
  End Select
  Dim strMonth: strMonth = "NA"
  Select Case Month(dtNowGMT)
    Case 1 strMonth = "Jan"
    Case 2 strMonth = "Feb"
    Case 3 strMonth = "Mar"
    Case 4 strMonth = "Apr"
    Case 5 strMonth = "May"
    Case 6 strMonth = "Jun"
    Case 7 strMonth = "Jul"
    Case 8 strMonth = "Aug"
    Case 9 strMonth = "Sep"
    Case 10 strMonth = "Oct"
    Case 11 strMonth = "Nov"
    Case 12 strMonth = "Dec"
    Case Else strMonth = "Error"
  End Select
  Dim strHour: strHour = CStr(Hour(dtNowGMT))
  If Len(strHour) = 1 Then strHour = "0" & strHour End If
  Dim strMinute: strMinute = CStr(Minute(dtNowGMT))
  If Len(strMinute) = 1 Then strMinute = "0" & strMinute End If
  Dim strSecond: strSecond = CStr(Second(dtNowGMT))
  If Len(strSecond) = 1 Then strSecond = "0" & strSecond End If
  Dim strNowInGMT: strNowInGMT = _
    strDay & _
    ", " & _
    Day(dtNowGMT) & _
    " " & _
    strMonth & _
    " " & _
    Year(dtNowGMT) & _
    " " & _
    strHour & _
    ":" & _
    strMinute & _
    ":" & _
    strSecond & _
    " +0000"
  NowInGMT = strNowInGMT
End Function
'-- GetBytesFromString --------------------------------------------------------'
Function GetBytesFromString(strValue)
  Dim stm: Set stm = CreateObject("ADODB.Stream")
  stm.Open
  stm.Type = 2
  stm.Charset = "ascii"
  stm.WriteText strValue
  stm.Position = 0
  stm.Type = 1
  GetBytesFromString = stm.Read
  Set stm = Nothing
End Function
'-- HMACSHA1 ------------------------------------------------------------------'
Function HMACSHA1(strKey, strValue)
  Dim sha1: Set sha1 = CreateObject("System.Security.Cryptography.HMACSHA1")
  sha1.key = GetBytesFromString(strKey)
  HMACSHA1 = sha1.ComputeHash_2(GetBytesFromString(strValue))
  Set sha1 = Nothing
End Function
'-- ConvertBytesToBase64 ------------------------------------------------------'
Function ConvertBytesToBase64(byteValue)
  Dim dom: Set dom = CreateObject("MSXML2.DomDocument")
  Dim elm: Set elm = dom.CreateElement("b64")
  elm.dataType = "bin.base64"
  elm.nodeTypedValue = byteValue
  ConvertBytesToBase64 = elm.Text
  Set elm = Nothing
  Set dom = Nothing
End Function
'-- GetBytesFromFile ----------------------------------------------------------'
Function GetBytesFromFile(strFileName)
  Dim stm: Set stm = CreateObject("ADODB.Stream")
  stm.Type = 1 'adTypeBinary --'
  stm.Open
  stm.LoadFromFile strFileName
  stm.Position = 0
  GetBytesFromFile = stm.Read
  stm.Close
  Set stm = Nothing
End Function 
```

亲爱的stone-edge-technology-VBScript-mates (*)，**让我知道**它是否也适合您；-)

(*) 这是对 Spudley 评论的引用，见上文 ;-)

# php - 使用 php pdo 在 oracle 中插入 blob

> ID：11012785
> 
> 赞同：0
> 
> 时间：2012-06-13T10:17:37.863
> 
> 标签：php, oracle, pdo, oracle11g

我必须在 oracle 视图中插入 blob。在这种情况下，没有机会将此 EMPTY_BLOB() 与返回子句一起使用。像这样：“插入表（a，b，c）值（a，b，EMPTY_BLOB（））将c返回：photo”因为返回不`t work in views I need a method to create empty blob before inserting data, but i don`知道如何使用PDO。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:27:41.693

在连接到 ORA DB 的 PHP 中，我最近解决了一个插入问题`CLOB`，应该以同样的方式处理。

在我的情况下，在绑定时将数据作为字符插入就足够了，我将字符长度设置为绑定长度。但是您可以尝试使用一个函数`TO_BLOB()`，该函数需要将输入转换为`RAW`：

```
INSERT INTO my_blob_table (my_blob_column) VALUES (TO_BLOB(UTL_RAW.CAST_TO_RAW('some binary data as string'))) 
```

或者通用`TO_LOB()`应该可以工作（转换为`CLOB`或`BLOB`取决于源/目标列）：

```
INSERT INTO my_blob_table (my_blob_column) VALUES (TO_LOB('some binary data as string')) 
```

**编辑：**使用谷歌我发现这些应该工作：

*   如果我们有一`long`列要转换为`clob/blob`：

```
create table t1 (id int, my_blob blob);
create table t2 (id int, my_long long);
insert into t2 values (1, rpad('*',4000,'*'));
insert into t1 select id, to_lob(my_long) from t2; 
```

*   如果我们有一`long raw`列要转换为`blob`：

```
create table t1 (id int, my_blob blob);
create table t2 (id int, my_long_raw long raw);
insert into t2 values (1, rpad('*',4000,'*'));
insert into t1 select id, to_blob(my_long_raw) from t2; 
```

这应该工作......见[here](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:13213885403654)和[here](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:510622111991)。

# ios - 根据触摸的粗线或细线

> ID：11012786
> 
> 赞同：2
> 
> 时间：2012-06-13T10:17:38.080
> 
> 标签：ios, core-graphics, draw

我在我的应用程序中使用核心图形进行绘图。

我想根据触摸速度画一条粗线或细线...

我编写了以下代码来绘制粗线或细线。

在我能够使用 panGestureRecognizer 跟踪速度并且我已经将它应用于线宽，因此我能够根据触摸的速度绘制粗线和细线。

但主要问题是绘制的线条看起来不平滑。

所以，如果我成功地画出平滑的粗线或细线，那就太好了。

```
- (void)handlePanGesture:(UIPanGestureRecognizer *)panGestureRecognizer
{

    if (panGestureRecognizer.state == UIGestureRecognizerStateBegan)
    {

        // retrieve touch point
        currentPoint = [panGestureRecognizer locationInView:panGestureRecognizer.view];

        previousPoint = currentPoint;

    }

    if (panGestureRecognizer.state == UIGestureRecognizerStateChanged)
    {

        currentPoint = [panGestureRecognizer locationInView:panGestureRecognizer.view];

        previousPoint = currentPoint; 

        float vel = [self ccpLength:[panGestureRecognizer velocityInView:panGestureRecognizer.view]];

        tmplinewidth    =   vel /   166.0f;

        tmplinewidth    =   clampf(tmplinewidth, 2, 20);

    }

    if (panGestureRecognizer.state == UIGestureRecognizerStateEnded)
    {

    }
} 
```

# java - java applet - 某些操作是否会从网页迁移？

> ID：11012787
> 
> 赞同：0
> 
> 时间：2012-06-13T10:17:42.743
> 
> 标签：java, applet

如果用户从 applet 网页迁移到我网站的其他网页，我想在 java applet 中执行一些操作。我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:20:02.917

您应该必须覆盖`stop()`或`destroy()`小程序生命周期方法。

# jqgrid - 即使在 jqGrid 中搜索结束后，如何保持检查用户检查的行？

> ID：11012795
> 
> 赞同：0
> 
> 时间：2012-06-13T10:18:12.843
> 
> 标签：jqgrid

每当我们在 jqGrid 中选择行并在最后执行搜索操作时，搜索都会重新加载网格，并且所有用户选中的行都未选中....我希望即使在搜索执行后也能选择选定的行，或者我们转到下一页。

有没有人解决这个问题？？？？？？我需要它紧急

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:58:30.413

您应该在搜索之前记住选择的行，然后再选择它们。例如，您定义 onSearch 事件：

```
var selected_rows = [];

onSearch: function(){
    selected_rows = $('#your_grid').jqGrid('getGridParam', 'selarrrow');
} 
```

然后定义 gridComplete 事件，以便它选择行（如果有）：

```
gridComplete: function(){
    $.each(selected_rows, function(_, row_id){
        $("#your_grid").jqGrid('setSelection', row_id, false);
    });
    selected_rows = [];
} 
```

您可以以类似的方式使用 onPaging 事件来处理分页。

# java - 为什么第二个参数不被视为正则表达式？

> ID：11012798
> 
> 赞同：-2
> 
> 时间：2012-06-13T10:18:33.273
> 
> 标签：java, regex, string

我遇到了一个关于 java regex 的有趣问题 [是否有正则表达式方法可以用另一组字符替换一组字符（如 shell tr​​ 命令）？](https://stackoverflow.com/questions/11010090/is-there-a-regular-expression-way-to-replace-a-set-of-characters-with-another-se) 所以我尝试了以下方法：

```
 String a = "abc";
                a = a.replaceAll("[a-z]", "[A-Z]"); 
```

现在，如果我得到 print a 输出是

```
 [A-Z][A-Z][A-Z] 
```

在这里，我认为编译器将第一个参数作为 gegex，而不是第二个参数。

那么这段代码有什么问题还是其他原因呢？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:21:52.337

这就是 replaceAll 的工作方式。

请参阅[API](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
public String replaceAll(String regex, String replacement) 
```

用给定的替换替换此字符串中与给定正则表达式匹配的每个子字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:23:18.843

相关问题的答案是非常明确的“否”，因此这不足为奇。

正如您从[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)中看到的那样，第二个参数确实是用作替换的常规字符串：

> **参数：**
> 
> *   `regex`– 这个字符串要匹配的正则表达式
> *   `replacement`– 为每个匹配替换的字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:20:09.517

第二个参数是简单的字符串，它将根据[API被替换](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:20:12.120

如果要将小写转换为大写，可以在 String 类中使用 toUpperCase 函数。对于`tr`实用程序的等效功能，我认为 Java 不支持（直到 Java 7）。

替换字符串通常按字面意思表示，除了`$n`n 表示正则表达式中捕获组的编号的序列。这将使用匹配中捕获的字符串作为替换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:29:41.287

我认为正则表达式是一种表达条件的方式（即给定的字符串是否与该表达式匹配）。考虑到这一点，您要问的意思是“请用……另一个条件替换我的字符串中匹配的内容”，这没有多大意义。

现在，通过尝试了解您要查找的内容，我觉得您想在字符类之间找到一些自动映射（例如 [az] -> [AZ]）。据我所知，这不存在，您必须自己编写（前面提到的 toUpperCase() 除外）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T10:30:01.923

```
 public String replaceAll(String regex, String replacement) 
```

第一个参数是正则表达式，如果子字符串与将被第二个参数替换的模式匹配，如果你想将小写转换为大写使用

```
 toUpperCase() 
```

方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T13:34:23.330

您应该查看[jtr](http://jtr.sourceforge.net/)。使用示例：

```
String hello = "abccdefgdhcij";
CharacterReplacer characterReplacer;

try {
    characterReplacer = new CharacterReplacer("a-j", "Helo, Wrd!");
    hello = characterReplacer.doReplacement(hello);
} catch(CharacterParseException e) {
}

System.out.println(hello); 
```

输出：

```
Hello, World! 
```

# mongodb - MongoDB：如何将两个集合/数据库合并为一个？

> ID：11012799
> 
> 赞同：12
> 
> 时间：2012-06-13T10:18:37.097
> 
> 标签：mongodb, database, nosql

我有两个名为：`DB_A`和`DB_B`.

每个数据库都有一个同名的集合，称为`store`.

两个集合都有很多具有完全相同结构的文档`{ key:" key1", value: "value1" }`等。

实际上，我应该只创建`DB_A`所有文档并将其插入到`DB_A`. 但是后来当我进行第二轮插入时，我犯了一个错误，输入了错误的名称作为数据库名称。

所以现在，每个数据库都有 32GB 的大小，我希望合并两个数据库。

一个问题/限制是现在可用的可用空间只有 15GB，所以我不能只是`copy`从`DB_B`to `DB_A`.

我想知道我是否可以执行某种“移动”来合并两个数据库？我更喜欢最有效的方法，因为简单地将 32GB 重新插入`DB_A`将需要相当长的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T11:56:07.457

我认为最简单（也许是唯一）的方法是编写一个脚本，将两个数据库文档一个接一个地合并。

1.  从 DB_B 获取第一个文档。
2.  如果需要，将其插入 DB_A。
3.  从 DB_B 中删除它。
4.  重复直到完成。

您可能只想批量读取文档，而不是从源数据库 (DB_B) 中删除文档。这应该更高效，但编码稍微困难一些（特别是如果你从未做过这样的事情）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-15T15:56:42.720

开始`Mongo 4.2`，新的聚合阶段[`$merge`](https://docs.mongodb.com/master/reference/operator/aggregation/merge/index.html)可用于将集合的内容合并到另一个数据库中的另一个集合中：

```
// > use db1
// > db.collection.find()
//   { "_id" : 1, "key" : "a", "value" : "b" }
//   { "_id" : 2, "key" : "c", "value" : "d" }
//   { "_id" : 3, "key" : "a", "value" : "b" }
// > use db2
// > db.collection.find()
//   { "_id" : 1, "key" : "e", "value" : "f" }
//   { "_id" : 4, "key" : "a", "value" : "b" }
// > use db1
db.collection.aggregate([
  { $merge: { into: { db: "db2", coll: "coll" } } }
])
// > use db2
// > db.collection.find()
//   { "_id" : 1, "key" : "a", "value" : "b" }
//   { "_id" : 2, "key" : "c", "value" : "d" }
//   { "_id" : 3, "key" : "a", "value" : "b" }
//   { "_id" : 4, "key" : "a", "value" : "b" } 
```

默认情况下，当目标集合和源集合包含相同的文档时`_id`，`$merge`会将目标集合中的文档替换为源集合中的文档。为了自定义此行为，请检查`$merge`'s`whenMatched`参数。

# c# - 如何在 ASP.NET 中轮询目录？

> ID：11012803
> 
> 赞同：1
> 
> 时间：2012-06-13T10:18:51.390
> 
> 标签：c#, asp.net

我想轮询一个目录以检查新文件是否已添加到 ASP.NET Web 应用程序 (C#) 中的目录中。如果添加了任何新文件，我想读取该文件。

谁能给我一个想法如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:25:34.787

通常你会使用[这个`FileSystemWatcher`类](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)。但是，您还有另一个问题。Web 应用程序并不真正适合后台进程。通常，您*可以*通过使用后台任务和线程来摆脱它，但这可能不是一个好主意。始终假设您的 Web 应用程序是无状态的，并且可以随时由服务器重新启动。

问你自己：

*   什么会触发这个投票？
*   应用程序将如何响应此轮询？

Web 应用程序本质上是一个请求/响应系统。因此，任何服务器端逻辑（例如轮询）都应该由请求触发。但是一旦给出回应，投票会变成什么样子呢？假设您在 Web 应用程序中创建了一个线程，该线程将在后台进行轮询。当它找到东西时会做什么？那时没有请求/响应与之交互。

是否可以将此轮询委托给另一个应用程序？也许是 Windows 服务？然后，为了响应在轮询期间发现的某些内容，它可以修改 Web 应用程序数据库中的值。这样，未来对 Web 应用程序的请求将看到更新的状态。

这将在架构级别上更清晰地分离关注点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:23:22.417

您可以在事件中使用`FileSystemWatcher`和创建实例。`Application_Start`

示例代码：

```
protected void Application_Start(
    Object sender, EventArgs e)
{
    FileSystemWatcher fsw =
        new FileSystemWatcher(
        Server.MapPath( “.” ) );
    Application.Add( “myfsw” , fsw );
    // Add event handlers here
    fsw.EnableRaisingEvents = true;
} 
```

应用程序结束时处理它。

```
protected void Application_End(
    Object sender, EventArgs e)
{
    FileSystemWatcher fsw =
        (FileSystemWatcher
        )Application[“myfsw”];
    Application.Remove( “myfsw” );
    fsw.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:11:22.657

首先在您的程序加载后检查目录内容并将其保存为列表。然后添加一个计时器。计时器将检查目录的内容并将当前内容与上次记录的内容进行比较。比较之后可以看到目录中有哪些文件被修改了。

您可以根据需要更改计时器的频率。

希望能帮助到你。

编辑：

调用 GetDirectoryContent(); 在你程序的加载中。

```
 FileInfo[] lastUpdatedFies;
 FileInfo[] temporaryFiles; 
 private void GetDirectoryContent()
 { 
    DirectoryInfo di = new DirectoryInfo("c:/mydirectorypath/"); 
    lastUpdatedFies = di.GetFiles(".");
  }

private void GetDirectoryContent()
{
    DirectoryInfo di = new DirectoryInfo("c:/mydirectorypath/");
    lastUpdatedFies = di.GetFiles("*.*");

}

protected void tmrDirectory_Tick(object sender, EventArgs e)
{
    DirectoryInfo di = new DirectoryInfo("c:/mydirectorypath/");
    temporaryFiles = di.GetFiles("*.*");

    foreach (FileInfo f in lastUpdatedFies)
    { 
        //compare the list of files and do whatever you want.
        // you can track any kind of data this way.
    }
}` 
```

您还可以调整定时器频率。在此示例中，我只是跟踪文件。因此，只有删除或添加文件时，您才能了解。如果您想跟踪文件大小，也可以以相同的方式进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:41:02.243

不清楚，你想用这些文件做什么。如果您想读取这些文件并缓存它们以供将来输出，您可以使用 ASP.NET 缓存和特定目录上的 CacheDependency 和一个回调，它将重新读取目录并将新文件添加到缓存中。你应该看看[Cache.Insert](http://msdn.microsoft.com/ru-ru/library/cc491414.aspx)方法和 CacheDependency[构造函数](http://msdn.microsoft.com/ru-ru/library/3tfwsbfk.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:23:31.127

当应用程序启动事件时，在 global.asmx 中添加 Filewatcher。

# javascript - 如何检查输入框是否仅包含数字或逗号？

> ID：11012804
> 
> 赞同：-4
> 
> 时间：2012-06-13T10:18:53.537
> 
> 标签：javascript, jquery

鉴于：

```
 var input_val = $('#field').val(); 
```

如何检查 input_val 是否仅包含数字或逗号？该解决方案必须在 4 个主要浏览器中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:23:38.980

`/^(\d|,)+$/.test(input_val)``true`只要`input_val`只包含数字和/或逗号，就会返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:23:17.233

使用以下功能

```
function containsNumbersAndCommasOnly(str) {
     return /^[0-9,]+$/.test(str);
} 
```

通过调用

```
if (containsNumbersAndCommasOnly(input_val)) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T03:19:59.027

这是来自@Adil 的回复和来自[不同帖子](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)的社区帖子回答的组合。两者的组合比单独的效果更好，但仍然存在一些问题...... 12,12,12 在这里有效，1,,,,,,,,,,9 正如@mplungjan 所指出的那样。

就我的目的而言，这是我愿意去的，但擅长正则表达式的人可能会添加一个解决方案，用于检测单个逗号后跟但不是前面至少 3 位数字的实例。

```
if(!(!isNaN(parseFloat(n)) && isFinite(n))){
    return /^(\d|,)+$/.test(n);
}else{
    return true;
} 
```

# apache - Apache Solr 中的词干

> ID：11012812
> 
> 赞同：1
> 
> 时间：2012-06-13T10:19:22.463
> 
> 标签：apache, solr, solrj, stemming, porter-stemmer

我正在使用 Apache Solr 来索引数据，并且我想使用词干分析器。我使用了 solr 示例 schema.xml 中给出的“text_en_splitting”字段类型，因为它包含“PorterStemFilterFactory”。我对数据进行了索引，当我在“分析”页面中进行测试时，它显示了词干结果。但是当我搜索时，我发现它没有使用词干结果，因此我没有得到任何回应。例如，我索引了“写”，但当我用“写”搜索时，它没有响应。在这里需要一些帮助。

提前致谢。

# c# - Infragistics xamChart 数据表中的数据绑定日期时间列？

> ID：11012813
> 
> 赞同：1
> 
> 时间：2012-06-13T10:19:25.070
> 
> 标签：c#, wpf, data-binding, charts, infragistics

需要通过 xamChart 以以下格式显示数据：

```
time   | v1  | v2  | ... | vn
-------+-----+-----+-   -+-----
t1     |     |     | ... |       
t2     |     |     | ... |  
...    .     .     . ... . 
tm     |     |     | ... | 
```

`v1 - vn`设计时未知标签在哪里（ *n*也是未知的）。`t1 - tm`是我想要在 X 轴上的日期时间值。其他单元格包含一些数字。

我需要的是一张像下面这样的图表，但将时间作为 X 轴标签，而不仅仅是索引。

![xamChart](../Images/2d75491fefaf95ef572a406087cd33d7.png)

这是我使用的代码：

```
foreach (var column in dataTable.Columns.OfType<DataColumn>().Skip(1))
{
    var s = new Series
                {
                    DataSource = dataTable,
                    DataMapping = column.ColumnName,
                    ChartType = ChartType.Line,
                    Label = column.ColumnName,
                };

    queriesChart.Series.Add(s);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:39:29.207

您可以通过 XamDataChart 使用 CategoryDateTimeAxis 和 DataTemplate 作为标签来完成此操作：

```
<ig:CategoryDateTimeXAxis 
    x:Name="xmXAxis" 
    DateTimeMemberPath="Label"  
    ItemsSource="{Binding}" 
    Label="{StaticResource XAxisLabelTemplate }"> 
```

数据模板：

```
<DataTemplate x:Key="XAxisLabelTemplate">
    <StackPanel Orientation="Vertical">
        <TextBlock Text="{Binding Item.Date, Converter={StaticResource igStringFormatConverter}, ConverterParameter=MM/dd/yy}" 
                    TextAlignment="Center" Foreground="#CCCCCC" Height="15" Width="65" Margin="0,4,0,0"/>                 
        <TextBlock Text="{Binding Item, Converter={StaticResource igStringFormatConverter}, ConverterParameter=T}"
                    TextAlignment="Center" Foreground="#CCCCCC" Height="15" Width="65"/>
    </StackPanel>   
</DataTemplate> 
```

转换器：

```
class igStringFormatConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        DateTime dt = (DateTime)value;
        string fmtDt = String.Format("{0:" + parameter.ToString() + "}", dt);          
        return fmtDt;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

# modelica - Modelica 执行顺序

> ID：11012814
> 
> 赞同：3
> 
> 时间：2012-06-13T10:19:25.083
> 
> 标签：modelica

刚开始使用 Modelica 并无法理解它是如何工作的。

在下面的模型“方法”中，第二行使用 qInflow 和 qOutflow 来评估 der(h)，但它们还没有收到值！（它们没有在方法的“数据”中定义）？代码执行的顺序是什么。

```
equation
 assert(minV >= 0, "minV must be greater or equal to zero");
 der(h)=(qInflow - qOutflow)/area;
 qInflow=if time > 150 then 3*flowLevel else flowLevel;
 qOutflow=Functions.LimitValue(minV, maxV, -flowGain*outCtr);
 error=ref - h;
 der(x)=error/T;
 outCtr=K*(error + x);
end FlatTank; 
```

来自[http://www.mathcore.com/resources/documents/ie_tank_system.pdf](http://www.mathcore.com/resources/documents/ie_tank_system.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:50:34.297

当来自使用命令式语义的语言和系统时，这是一个可以理解的混淆点。但是 Modelica 不是这样工作的。

使用 Modelica 时，重要的是要了解一个`equation`部分包含方程式，**而不是分配**。考虑一下，如果我给你以下*等式*：

```
x + y = 3;
x + 2*y = 5; 
```

如果您了解这是一个数学上下文，那么您可以确定它`x`的值必须为 1 且`y`必须为 2。换句话说，您必须求解联立方程组。您会注意到，这些等式的左侧**不是**变量（通常），它们是表达式。等式只是将左侧的一个表达式与右侧的另一个表达式相等的关系。此外，这种关系**总是**正确的，因此顺序无关紧要。

这与具有命令式语义的命令式编程语言完全不同。但它也非常强大，因为您可以说明这些关系（线性方程组、非线性方程组、隐式方程等），编译器将找出解决它们的最有效方法。

回到您的示例，当您查看问题中的代码时，您将这些方程式解释为赋值语句。这个概念得到了加强，因为它们恰好在左侧有变量。但它们确实是方程式。在基于方程的系统中，您不必担心给定变量是否已被分配给先前。相反，要求只是对于每个变量都存在（某处）一个方程，并且没有额外的方程。换句话说，您应该具有与未知数相同数量的变量，并且方程组具有唯一解。这就是 Modelica 所需要的。

现在，Modelica 支持您习惯的那种命令式语义。但它们只能在特殊情况下使用，因为它们限制了数学行为的解释，从而干扰了允许 Modelica 编译器生成真正快速代码的符号操作。所以这不仅仅是风格的问题。如果可能的话，你应该使用方程，Modelica 中的算法只能作为最后的手段。

最后一点。有些人可能想知道“你是在告诉我，这些方程将被放入一些巨大的方程组中，并通过矩阵求逆或 Newton-Raphson 之类的方法来求解？当它显然可以用更简单的方法求解时，为什么要让它变得如此复杂？ ！” 但它不会作为一个巨大的方程组来解决。如果它可以作为一组简单的作业来解决，**它将**. 这是将应用的不同符号操作技术中的一种（在众多技术中）。其实这是Modelica的一个关键点……你不用担心优化求解方法，这个工具会搞定的。更重要的是，如果您以确实出现同时系统的方式连接组件，您也无需担心这一点。Modelica 工具可以为您处理此类“代数循环”，它们将对其进行优化以找到计算效率最高的公式，并且不会依赖于您针对这些情况重新制定模型。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:27:48.643

在对 Modelica 模型运行 Modelica 工具之前，您无法知道方程在 Modelica 模型中的执行顺序（您可以对源模型中的任何方程重新排序并获得相同的结果）。然后该命令仅适用于具有您使用的设置的此工具。

这是 OpenModelica 编译器选择的顺序 (omc +s +simCodeTarget=Dump model.mo)：

> `error = ref - h;`
> `outCtr = K * (error + x);`
> `der(x) = DIVISION(error, T, #SHARED_LITERAL_2(String#);`
> `qOutflow = LimitValue(minV, maxV, (-flowGain) * outCtr);`
> `qInflow = if time > 150.0 then 3.0 * flowLevel else flowLevel;`
> `der(h) = DIVISION(qInflow - qOutflow, area, #SHARED_LITERAL_3(String#);`

这个例子有点无聊，因为没有等式的左边和右边改变了位置（`h = error - ref`如果没有选择 h 作为状态变量等，这将是可行的）。

# objective-c - 将 UIBarButtonItem 向下移动几个像素？

> ID：11012818
> 
> 赞同：1
> 
> 时间：2012-06-13T10:19:36.613
> 
> 标签：objective-c, xcode, uinavigationbar, uibarbuttonitem, backbarbuttonitem

我创建了一个`UINavigationBar`比苹果默认导航栏高一点的自定义。

我似乎找不到将`UIBarButtonItem`向下移动到两条虚线之间直接居中的方法。

是否有捷径可寻？我试过创建一个自定义按钮，但没有成功。理想情况下，我只想将默认的后退按钮向下移动几个像素。

![在此处输入图像描述](../Images/f41d5c5e99ea5b4feb79355f6885db28.png)

用于创建`UINavigationBar`自定义标题图像的代码和`UIBarButtonItem`：

```
 //Create image for navigation background
UIImage *NavigationPortraitBackground = [[UIImage imageNamed:@"navbackground.png"]
                                         resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UINavigationBar appearance] setBackgroundImage: NavigationPortraitBackground
                                   forBarMetrics:UIBarMetricsDefault];

//Centered title image
UIImageView *headerImage = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"hometitle.png"]];
    [headerImage setFrame: CGRectMake(0, 0, 180, 49)];
self.navigationItem.titleView = headerImage;

UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] init];
[backBarButtonItem setTintColor: [UIColor colorWithRed:0 green:69.0/255 blue:118.0/255 alpha:1]];
[backBarButtonItem setStyle: UIBarButtonItemStylePlain];
    self.navigationItem.backBarButtonItem = backBarButtonItem;
[backBarButtonItem release]; 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:22:45.133

使用自定义视图创建 UIBarButtonItem。这个自定义视图将是一个 UIView，其中实际的 UIButton（作为子视图）从顶部放置 x 个像素（x=您想要将其向下移动的像素数）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T10:51:30.230

对不起

```
UIButton *myButton1 = [UIButton buttonWithType:UIButtonTypeCustom];  
 [myButton1 setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];   myButton1.showsTouchWhenHighlighted = YES;  
 myButton1.frame = CGRectMake(0.0, 3.0, 50,30);  
  [myButton1 addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside]; UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithCustomView:myButton1];    
 self.navigationItem.leftBarButtonItem = leftButton; 
```

# java - 如何从我的 jar 文件中访问资源文件夹中的文件夹？

> ID：11012819
> 
> 赞同：154
> 
> 时间：2012-06-13T10:19:39.673
> 
> 标签：java, list, resources, directory

我的项目根目录中有一个资源文件夹/包，我“不想”加载某个文件。如果我想加载某个文件，我会使用 class.getResourceAsStream 就可以了！！我真正想要做的是在资源文件夹中加载一个“文件夹”，在该文件夹内的文件上循环并获取每个文件的流并读入内容......假设文件名在运行时之前没有确定... 我该怎么办？有没有办法在你的 jar 文件中获取文件夹中的文件列表？请注意，包含资源的 Jar 文件与运行代码的 jar 文件相同...

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-11-19T13:43:05.630

最后，我找到了解决方案：

```
final String path = "sample/folder";
final File jarFile = new File(getClass().getProtectionDomain().getCodeSource().getLocation().getPath());

if(jarFile.isFile()) {  // Run with JAR file
    final JarFile jar = new JarFile(jarFile);
    final Enumeration<JarEntry> entries = jar.entries(); //gives ALL entries in jar
    while(entries.hasMoreElements()) {
        final String name = entries.nextElement().getName();
        if (name.startsWith(path + "/")) { //filter according to the path
            System.out.println(name);
        }
    }
    jar.close();
} else { // Run with IDE
    final URL url = Launcher.class.getResource("/" + path);
    if (url != null) {
        try {
            final File apps = new File(url.toURI());
            for (File app : apps.listFiles()) {
                System.out.println(app);
            }
        } catch (URISyntaxException ex) {
            // never happens
        }
    }
} 
```

当您在 IDE 上运行应用程序（而不是 jar 文件）时，第二个块才起作用，如果您不喜欢，可以将其删除。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-05T07:13:02.667

试试下面的。
制作资源路径`"<PathRelativeToThisClassFile>/<ResourceDirectory>"` 例如，如果您的类路径是 com.abc.package.MyClass 并且您的资源文件位于 src/com/abc/package/resources/ 中：

```
URL url = MyClass.class.getResource("resources/");
if (url == null) {
     // error - missing folder
} else {
    File dir = new File(url.toURI());
    for (File nextFile : dir.listFiles()) {
        // Do something with nextFile
    }
} 
```

你也可以使用

```
URL url = MyClass.class.getResource("/com/abc/package/resources/"); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-03-03T05:17:01.327

我知道这是很多年前的事了。但只是为了其他人遇到这个话题。您可以做的是使用`getResourceAsStream()`带有目录路径的方法，输入 Stream 将具有该目录中的所有文件名。之后，您可以将 dir 路径与每个文件名连接起来，并在循环中为每个文件调用 getResourceAsStream。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-06T18:15:21.617

当我试图从打包在 jar 中的资源中加载一些 hadoop 配置时，我遇到了同样的问题……在 IDE 和 jar（发行版）上。

我发现`java.nio.file.DirectoryStream`最好在本地文件系统和 jar 上迭代目录内容。

```
String fooFolder = "/foo/folder";
....

ClassLoader classLoader = foofClass.class.getClassLoader();
try {
    uri = classLoader.getResource(fooFolder).toURI();
} catch (URISyntaxException e) {
    throw new FooException(e.getMessage());
} catch (NullPointerException e){
    throw new FooException(e.getMessage());
}

if(uri == null){
    throw new FooException("something is wrong directory or files missing");
}

/** i want to know if i am inside the jar or working on the IDE*/
if(uri.getScheme().contains("jar")){
    /** jar case */
    try{
        URL jar = FooClass.class.getProtectionDomain().getCodeSource().getLocation();
        //jar.toString() begins with file:
        //i want to trim it out...
        Path jarFile = Paths.get(jar.toString().substring("file:".length()));
        FileSystem fs = FileSystems.newFileSystem(jarFile, null);
        DirectoryStream<Path> directoryStream = Files.newDirectoryStream(fs.getPath(fooFolder));
        for(Path p: directoryStream){
            InputStream is = FooClass.class.getResourceAsStream(p.toString()) ;
        performFooOverInputStream(is);
        /** your logic here **/
            }
    }catch(IOException e) {
        throw new FooException(e.getMessage());     
    }
}
else{
    /** IDE case */
    Path path = Paths.get(uri);
    try {
        DirectoryStream<Path> directoryStream = Files.newDirectoryStream(path);
        for(Path p : directoryStream){
            InputStream is = new FileInputStream(p.toFile());
            performFooOverInputStream(is);
        }
    } catch (IOException _e) {
        throw new FooException(_e.getMessage());
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-12T06:57:18.230

以下代码将所需的“文件夹”作为 Path 返回，无论它是否在 jar 中。

```
 private Path getFolderPath() throws URISyntaxException, IOException {
    URI uri = getClass().getClassLoader().getResource("folder").toURI();
    if ("jar".equals(uri.getScheme())) {
      FileSystem fileSystem = FileSystems.newFileSystem(uri, Collections.emptyMap(), null);
      return fileSystem.getPath("path/to/folder/inside/jar");
    } else {
      return Paths.get(uri);
    }
  } 
```

需要java 7+。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-18T09:29:09.803

另一种解决方案，您可以这样做`ResourceLoader`：

```
import org.springframework.core.io.Resource;
import org.apache.commons.io.FileUtils;

@Autowire
private ResourceLoader resourceLoader;

...

Resource resource = resourceLoader.getResource("classpath:/path/to/you/dir");
File file = resource.getFile();
Iterator<File> fi = FileUtils.iterateFiles(file, null, true);
while(fi.hasNext()) {
    load(fi.next())
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-29T08:47:52.860

正如其他答案所指出的那样，一旦资源位于 jar 文件中，事情就会变得非常难看。在我们的例子中，这个解决方案：

[https://stackoverflow.com/a/13227570/516188](https://stackoverflow.com/a/13227570/516188)

在测试中工作得很好（因为在运行测试时代码没有打包在 jar 文件中），但在应用程序实际正常运行时不起作用。所以我所做的是......我对应用程序中的文件列表进行了硬编码，但是我有一个测试从磁盘读取实际列表（可以这样做，因为它在测试中有效）并且如果实际列表不'与应用返回的列表不匹配。

这样我的应用程序中就有了简单的代码（没有技巧），*而且*我确信我没有忘记在列表中添加一个新条目，这要归功于测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-24T18:16:03.890

下面的代码从自定义资源目录中获取 .yaml 文件。

```
ClassLoader classLoader = this.getClass().getClassLoader();
            URI uri = classLoader.getResource(directoryPath).toURI();

            if("jar".equalsIgnoreCase(uri.getScheme())){
                Pattern pattern = Pattern.compile("^.+" +"/classes/" + directoryPath + "/.+.yaml$");
                log.debug("pattern {} ", pattern.pattern());
                ApplicationHome home = new ApplicationHome(SomeApplication.class);
                JarFile file = new JarFile(home.getSource());
                Enumeration<JarEntry>  jarEntries = file.entries() ;
                while(jarEntries.hasMoreElements()){
                    JarEntry entry = jarEntries.nextElement();
                    Matcher matcher = pattern.matcher(entry.getName());
                    if(matcher.find()){
                        InputStream in =
                                file.getInputStream(entry);
                        //work on the stream

                    }
                }

            }else{
                //When Spring boot application executed through Non-Jar strategy like through IDE or as a War.

                String path = uri.getPath();
                File[] files = new File(path).listFiles();

                for(File file: files){
                    if(file != null){
                        try {
                            InputStream is = new FileInputStream(file);
                           //work on stream

                        } catch (Exception e) {
                            log.error("Exception while parsing file yaml file {} : {} " , file.getAbsolutePath(), e.getMessage());
                        }
                    }else{
                        log.warn("File Object is null while parsing yaml file");
                    }
                }
            } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-14T12:48:52.160

如果您使用的是 Spring，您可以使用`org.springframework.core.io.support.PathMatchingResourcePatternResolver`和处理`Resource`对象而不是文件。这在 Jar 文件的内部和外部运行时有效。

```
PathMatchingResourcePatternResolver r = new PathMatchingResourcePatternResolver();
Resource[] resources = r.getResources("/myfolder/*"); 
```

然后，您可以使用`getInputStream`和来自的文件名访问数据`getFilename`。

请注意，如果您尝试在`getFile`Jar 中运行时使用，它仍然会失败。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-10-31T17:31:42.920

在我的 jar 文件中，我有一个名为 Upload 的文件夹，该文件夹中还有其他三个文本文件，我需要在 jar 文件之外有一个完全相同的文件夹和文件，我使用了以下代码：

```
URL inputUrl = getClass().getResource("/upload/blabla1.txt");
File dest1 = new File("upload/blabla1.txt");
FileUtils.copyURLToFile(inputUrl, dest1);

URL inputUrl2 = getClass().getResource("/upload/blabla2.txt");
File dest2 = new File("upload/blabla2.txt");
FileUtils.copyURLToFile(inputUrl2, dest2);

URL inputUrl3 = getClass().getResource("/upload/blabla3.txt");
File dest3 = new File("upload/Bblabla3.txt");
FileUtils.copyURLToFile(inputUrl3, dest3); 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2014-06-17T18:02:03.257

简单...使用 OSGi。在 OSGi 中，您可以使用 findEntries 和 findPaths 遍历 Bundle 的条目。

* * *

## 回答 #12

> 赞同：-28
> 
> 时间：2012-06-13T10:28:48.960

这个[链接](http://www.jugpadova.it/articles/2006/02/05/accessing-a-resource-within-a-jar)告诉你怎么做。

神奇的是 getResourceAsStream() 方法：

```
InputStream is = 
this.getClass().getClassLoader().getResourceAsStream("yourpackage/mypackage/myfile.xml") 
```

# php - 使用 php 更新/追加数据到 xml 文件

> ID：11012820
> 
> 赞同：4
> 
> 时间：2012-06-13T10:19:40.480
> 
> 标签：php, xml, simplexml

这听起来很简单，但我仍然想在论坛中发布这个问题。我有一个 xml 文件，需要在主要元素之后附加数据并保存 xml 文件而不覆盖现有的 xml 文件，而是将数据附加到现有数据并更新 xml 文件。

例如，我的 xml 数据看起来与此类似：

```
<maincontent>
    <headercontent>
        <product num="2102">
            <name>MSG</name>
            <category>Wellness</category>
            <available content="YES"></available>
        </product>
        <product num="2101">
            <name>YSD</name>
            <category>Music</category>
            <available content="NO"></available>
        </product>
        <product num="2100">
            <name>RCS</name>
            <category>Media</category>
            <available content="YES"></available>
        </product>
    </headercontent>
</maincontent> 
```

我想添加另一个包含所有信息的产品，并将新添加的数据附加到顶部，以便新添加的数据应该位于 headercontent 之后。

要添加的数据：

```
 <product num="2103">
            <name>AGB</name>
            <category>Movies</category>
            <available content="YES"></available>
        </product> 
```

更新后的 xml 文件应如下所示：

```
<maincontent>
    <headercontent>
        <product num="2103">
                <name>AGB</name>
                <category>Movies</category>
                <available content="YES"></available>
    </product>
        <product num="2102">
            <name>MSG</name>
            <category>Wellness</category>
            <available content="YES"></available>
        </product>
        <product num="2101">
            <name>YSD</name>
            <category>Music</category>
            <available content="NO"></available>
        </product>
        <product num="2100">
            <name>RCS</name>
            <category>Media</category>
            <available content="YES"></available>
        </product>
    </headercontent>
</maincontent> 
```

任何有用的建议或一段示例代码都会非常有帮助。

编辑：

对不起，我没有发布任何 php 代码，我的错。这是我一直在处理的代码：

谢谢

```
<?php

 $xmldoc = new DomDocument();    
    $xmldoc->formatOutput = true;

    $productNum = "2103";
    $name = "AGB";
    $category = "Movies";
    $content = "YES";

    if($xml = file_get_contents('main.xml')){
        $xmldoc->loadXML($xml);

        $root = $xmldoc->firstChild;        

        $newElement = $xmldoc->createElement('product');
        $root->appendChild($newElement);
        $numAttribute = $xmldoc->createAttribute("num");
        $numAttribute->value = $productNum;
        $newElement->appendChild($numAttribute);   

        $nameElement = $xmldoc->createElement('name');
        $root->appendChild($nameElement);
        $nameText = $xmldoc->createTextNode($name);
        $nameElement->appendChild($nameText);

        $categoryElement = $xmldoc->createElement('category');
        $root->appendChild($categoryElement);
        $categoryText = $xmldoc->createTextNode($category);
        $categoryElement->appendChild($categoryText);

        $availableElement = $xmldoc->createElement('available');
        $root->appendChild($availableElement);
        $availableAttribute = $xmldoc->createAttribute("content");
        $availableAttribute->value = $content;
        $availableElement->appendChild($availableAttribute);   

        $xmldoc->save('main.xml');
    }
?> 
```

我的 xml 文件得到了更新，但数据被添加到第一个孩子并且也在底部，相反我想在如上所示之后和开头添加数据。这是我的输出：

```
<maincontent>
    <headercontent>
        <product num="2102">
            <name>MSG</name>
            <category>Wellness</category>
            <available content="YES"/>
        </product>
        <product num="2101">
            <name>YSD</name>
            <category>Music</category>
            <available content="NO"/>
        </product>
        <product num="2100">
            <name>RCS</name>
            <category>Media</category>
            <available content="YES"/>
        </product>
    </headercontent>
<product num="2103"/><name>AGB</name><category>Movies</category><available content="YES"/></maincontent> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T12:07:00.100

这将起作用。

```
<?php
$xmldoc = new DomDocument( '1.0' );
$xmldoc->preserveWhiteSpace = false;
$xmldoc->formatOutput = true;

$productNum = "2103";
$name = "AGB";
$category = "Movies";
$content = "YES";

if( $xml = file_get_contents( 'main.xml') ) {
    $xmldoc->loadXML( $xml, LIBXML_NOBLANKS );

    // find the headercontent tag
    $root = $xmldoc->getElementsByTagName('headercontent')->item(0);

    // create the <product> tag
    $product = $xmldoc->createElement('product');
    $numAttribute = $xmldoc->createAttribute("num");
    $numAttribute->value = $productNum;
    $product->appendChild($numAttribute);

    // add the product tag before the first element in the <headercontent> tag
    $root->insertBefore( $product, $root->firstChild );

    // create other elements and add it to the <product> tag.
    $nameElement = $xmldoc->createElement('name');
    $product->appendChild($nameElement);
    $nameText = $xmldoc->createTextNode($name);
    $nameElement->appendChild($nameText);

    $categoryElement = $xmldoc->createElement('category');
    $product->appendChild($categoryElement);
    $categoryText = $xmldoc->createTextNode($category);
    $categoryElement->appendChild($categoryText);

    $availableElement = $xmldoc->createElement('available');
    $product->appendChild($availableElement);
    $availableAttribute = $xmldoc->createAttribute("content");
    $availableAttribute->value = $content;
    $availableElement->appendChild($availableAttribute);

    $xmldoc->save('main.xml');
}
?> 
```

希望这可以帮助。

# glassfish - JAX-RS 自定义路径参数验证器

> ID：11012821
> 
> 赞同：3
> 
> 时间：2012-06-13T10:19:41.570
> 
> 标签：glassfish, jersey, jax-rs, resteasy, bean-validation

我目前正在试验一些 RESTful JAX，我想验证自定义输入。通常正则表达式会很好，但我需要进行更广泛的检查（约 10 种不同的正则表达式模式）。我在搜索 jaxrs 验证时发现[了这个页面。](http://java.net/projects/jax-rs-spec/pages/Validation)我注意到它说“草稿”，但我想我会试一试。

我这样写我的参数注释：

```
@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = FooBarValidator.class)
public @interface FooBarParam
{
} 
```

验证器如下所示：

```
@Provider
public class FooBarValidator
        implements ConstraintValidator<FooBar, Long>
{
    @Override
    public void initialize(FooBar constraintAnnotation)
    {
    }

    @Override
    public boolean isValid(Long value, ConstraintValidatorContext context)
    {
        // validation goes here, this is a test validation
        return (value > 50);
    }
} 
```

Web 服务如下所示：

```
@javax.ejb.Stateless
@Path("test")
public class testRS
{
    @GET
    @Path("foobar/{fooBar: [0-9]+}")
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.TEXT_PLAIN)
    public String testService(@FooBar @PathParam("fooBar") Long fooBar)
    {
        return "tested with: " + fooBar;
    }
} 
```

但是，如果我使用浏览器使用“http://localhost:8080/jaxtest/rest/test/foobar/11”调用我的 Web 服务，则会调用 Web 服务，并且会看到“tested with: 11”。Web 服务工作正常，除了验证器没有被调用。

我尝试在验证器类和注释接口中设置断点，但没有一个被命中。

我有一个偷偷摸摸的怀疑，我正在做一些不可能的事情，因为参考文档中的“草稿”标题。因此，如果我做错了什么或有其他选择，我很高兴听到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:27:42.450

感谢@PiotrKochański 给我的提示，我已经成功地实现**了**我想要的。最大的问题是我必须使用 Glassfish。默认情况下，Glassfish 使用 Jersey 来处理 JAX 内容。

我花了 10 多个小时的努力才完成这个，所以让这对于任何偶然发现这个的人来说都是一个节省时间的方法。

首先，**使用 Maven**，这让你的生活变得如此轻松。

第二步，将 JBoss 存储库添加到您的 pom.xml

```
<repositories>
    <repository>
        <id>jboss-public-repository-group</id>
        <name>JBoss Public Maven Repository Group</name>
        <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
        <layout>default</layout>
        <releases>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
        </releases>
        <snapshots>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
        </snapshots>
    </repository>
</repositories> 
```

第三步，给pom.xml添加依赖

```
<!-- Needed for validator interceptors -->
<dependency>
    <groupId>org.jboss.seam.rest</groupId>
    <artifactId>seam-rest</artifactId>
    <version>3.1.0.Final</version>
</dependency>
<!-- JBoss' RS implementation -->
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxrs</artifactId>
    <version>2.3.4.Final</version>
</dependency>
<!-- Because I use JSON I need RESTeasy be able to handle this --> 
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jettison-provider</artifactId>
    <version>2.3.4.Final</version>
</dependency>
<!-- This is THE part that integrates validation in RESTeasy -->
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-hibernatevalidator-provider</artifactId>
    <version>2.3.4.Final</version>
</dependency> 
```

最后一个依赖花了我很长时间。[@PiotrKochański 指出的文档](https://docs.jboss.org/seam/3/rest/latest/reference/en-US/html/rest.validation.html)没有提到这一点。但是在[另一个版本的文档中，](https://docs.jboss.org/resteasy/docs/2.3-RC1/userguide/html/Validation.html)我发现了这一点：

> API 实现和 RESTEasy 之间的集成是通过 resteasy-hibernatevalidator-provider 组件完成的。为了集成，我们需要在类路径中添加resteasy-hibernatevalidator-provider和hibernate-validator。使用 maven 只需包含以下依赖项：

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-hibernatevalidator-provider</artifactId>
    <version>2.3-RC1</version>
</dependency> 
```

第四步是将其添加到 web.xml

```
<context-param>
    <param-name>resteasy.scan</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <param-name>resteasy.servlet.mapping.prefix</param-name>
    <param-value>/rest</param-value>
</context-param>
<listener>
    <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
</listener>
<servlet>
    <servlet-name>REST Service</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

第五步是修改 Web 服务类，如下所示：

```
@javax.ejb.Stateless
@Path("test")
public class testRS
{
    @GET
    @Path("foobar/{fooBar}")
    @Produces(MediaType.APPLICATION_JSON)
    @org.jboss.resteasy.spi.validation.ValidateRequest
    public String testService(@FooBar @PathParam("fooBar") Long fooBar)
    {
        return "tested with: " + fooBar;
    }
} 
```

第六步是修改`@interface`为：

```
@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = FooBarValidator.class)
public @interface FooBarParam
{
    String message() default "{constraint.FooBar}";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
} 
```

也作为奖励；我遇到[了 Emmanuel Bernard 的关于 Bean Validation 的演示文稿，](http://vimeo.com/18738120)我想我可以分享一下，因为它解释了很多有趣的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:30:46.303

您找到的页面是关于应该进入 JAX-RS 2.0 的提案之一（这不是最终的，也没有实现）。计划是让 JAX-RS 2.0 与 Bean Validation 集成 - 但正如我所说，这还没有实现。

目前，如果要验证输入，可以将参数声明为 String（而不是 Long），并将验证作为资源方法的一部分。如果验证通过，则转换为 Long。

# php - if (!$variablename) 在 PHP 中做了什么？

> ID：11012822
> 
> 赞同：4
> 
> 时间：2012-06-13T10:19:46.817
> 
> 标签：php, operators, not-operator

我知道这`!=`是“不相等”，但是当你有这个时它意味着什么：

```
if(!$something) 
```

我的第一个猜测与异常有关，但环顾谷歌并没有返回任何东西。

那么这有什么作用呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T10:23:02.210

变量中的任何内容都将[转换为布尔值](http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)（变量本身当然保持不变），然后`!`对生成的布尔值执行 NOT 操作 ( )。转换将发生，因为`!`它是一个[逻辑运算符](http://www.php.net/manual/en/language.operators.logical.php)并且仅适用于布尔值。

> 转换为布尔值时，以下值被视为 FALSE：
> 
> *   布尔值 FALSE 本身
> *   整数 0（零）
> *   浮点数 0.0（零）
> *   空字符串和字符串“0”
> *   一个元素为零的数组
> *   具有零成员变量的对象（仅限 PHP 4）
> *   特殊类型 NULL（包括未设置的变量）
> *   从空标签创建的 SimpleXML 对象

**提示：**如果变量预计不是布尔值，您可能需要使用更具体的值，例如`isset($variable)`、`empty($variable)`、`$variable === ''`等，具体取决于您要检查的内容。详情请查看手册。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T10:21:52.757

它与以下内容相同：

```
if((bool)$something != true) { 
```

见：[http ://www.php.net/manual/en/control-structures.if.php](http://www.php.net/manual/en/control-structures.if.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T10:21:45.707

```
if (!$something) { 
```

相当于

```
if ($something == false) { 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T10:21:25.410

检查 $something 是否是虚假的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T10:21:09.363

它只是意味着“如果不是什么”。

```
if (!false) {
   this_happens_because_not_false_is_true();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T10:24:09.450

`if(!$variable)`相同，`if($variable == false)`因此它检查 $variable 是否为假
查看@bažmegakapa[答案](https://stackoverflow.com/questions/11012822/what-does-ifvariblename-do-in-php/11012868#11012868)以查看哪些值被认为是假的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T10:26:20.367

它将变量转换为变量的`boolean`等价物。这可以在几种情况下给出：

```
<?php

    // Case 1: $variable is boolean
    $variable = true;
    $variable = !$variable; // Changes to false;
    var_dump($variable); // bool(false)

    // Case 2a: $variable is a positive integer
    $variable = 5;
    $variable = !$variable; // Changes to false;
    var_dump($variable); // bool(false)

    // Case 2b: $variable is an integer other than 0
    $variable = 0;
    $variable = !$variable; // Changes to false;
    var_dump($variable); // bool(true)

    // Case 2c: $variable is a negative integer
    $variable = -5;
    $variable = !$variable; // Changes to false;
    var_dump($variable); // bool(false)

    // Case 3a: $variable is string
    $variable = "Hello";
    $variable = !$variable; // Changes to false;
    var_dump($variable); // bool(false)

    // Case 3b: $variable is empty string
    $variable = "";
    $variable = !$variable; // Changes to false;
    var_dump($variable); // bool(true)
?> 
```

简而言之，它与`empty()`功能相反！:)

希望这可以帮助！:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-13T10:23:27.117

检查是否`$something`为假。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-13T10:23:51.030

它检查是否`!$something`为假或者你可以理解它（如果不是$something）然后{//这将执行}并且如果$something存在那么this不会进入if

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-13T10:24:31.553

!$variable 是“非”逻辑运算符 [http://uk3.php.net/manual/en/language.operators.logical.php](http://uk3.php.net/manual/en/language.operators.logical.php)

它需要一个布尔值并翻转它。真变假，假变真。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-21T16:29:39.263

我曾经遇到过以下代码

```
 if (!$this->error) {
      return false;
    } else {
    return true;
    } 
```

我想“如果没有错误，为什么是错误的？那是错误的！” 因为我想“！” 运算符等于“NOT”。并交换了回报。但是每次错误条件代码都会运行。然后学会了。“！” 运算符将变量转换为布尔值。空变量转换为“假”。以及带有“！”的“if”语句 操作员像这样运行“如果这个布尔值为假，则返回假，否则返回真。！:)

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2012-06-13T11:15:20.167

```
if($somethin == ""){
}

Or

if($somethin != ""){
} 
```

# android - 相对布局中的 tabhost

> ID：11012823
> 
> 赞同：0
> 
> 时间：2012-06-13T10:19:55.993
> 
> 标签：android, android-layout, android-widget

早上好，我可以在相对布局中放置标签而不出错吗？我无法让它工作。放置代码和图像是我想要得到的（tabhost上方的webview，它必须在按钮下）

![这就是我想要得到的](../Images/1965183a4187329879e641af102d524e.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="100px"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="-" />

    <Button
        android:id="@+id/button2"
        android:layout_width="100px"
        android:layout_height="wrap_content"
        android:layout_above="@+id/webView1"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/button1"
        android:text="+" />

      <TabHost 
        android:id="@+id/tabHost" 
        android:layout_width="match_parent"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="match_parent"
        android:layout_below="@+id/button1"
        android:layout_centerHorizontal="true" />

 <FrameLayout android:layout_width="wrap_content"
  android:layout_height = "wrap_content"
  android:id=  "@android:id/tabcontent">

    <LinearLayout 
        android:id="@+id/tabX1"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

                <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="500px"

        />

    </LinearLayout>  

    <LinearLayout 
        android:id="@+id/tabX2"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    </LinearLayout>     

    </FrameLayout>
    <TabWidget android:id="@android:id/tabs"
        android:layout_width="match_parent"   
             android:layout_height ="wrap_content">
           </TabWidget>
</TabHost>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/button2"
        android:ems="10" >

        <requestFocus />
    </EditText>

   </RelativeLayout>
   </LinearLayout> 
```

编辑

这是错误：

"" 未设置所需的 layout_width 属性：(1) 设置为 "wrap_content" (2) 设置为 "match_parent" "" 未设置所需的 layout_height 属性：(1) 设置为 "wrap_content" (2) 设置为 " match_parent" "" 未设置所需的 layout_width 属性：(1) 设置为 "wrap_content" (2) 设置为 "match_parent" "" 未设置所需的 layout_height 属性：(1) 设置为 "wrap_content" (2) 设置到“match_parent”TabHost 需要一个 ID 为“android:id/tabs”的 TabWidget。

您必须提供 layout_width 属性。您必须提供 layout_height 属性。异常详细信息记录在窗口 > 显示视图 > 错误日志中

# iphone - 如何在 imagepicker 中设置 imagepicker.tag=value

> ID：11012824
> 
> 赞同：1
> 
> 时间：2012-06-13T10:19:55.847
> 
> 标签：iphone, objective-c, ios, xcode

我是 iphone sdk 的新手，当我设置 imagepicker.tag=vaule(100) 时会产生错误，所以任何人都可以帮我解决这个问题

```
 `  imagepicker=[[UIImagePickerController alloc]init];
    imagepicker.delegate=self;
    imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker animated:YES];` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:28:41.090

```
imagepicker=[[UIImagePickerController alloc]init];
imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
[self presentModalViewController:imagepicker animated:YES];
imagepicker.view.tag = 100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:22:32.417

`tag`是 的一个属性`UIView`。`UIImagePickerController`是 的子类`UIViewController`。它没有`tag`属性。

# c# - 使用 UDP 而非 HTTP 部署 XML Web 服务

> ID：11012826
> 
> 赞同：0
> 
> 时间：2012-06-13T10:20:06.087
> 
> 标签：c#, visual-studio-2010, web-services, iis-7, udp

正如我已经弄清楚的那样。我想在 IIS 上创建一个 Web 服务来测试我的 Web 服务。但我的问题是，我必须选择绑定类型。有 HTTP，net.tcp .... 但我不仅与客户端有 HTTP 连接。在我的情况下，我必须使用他们的 IP 地址（它存储在数据库中）向客户端发送数据。所以我的问题是我应该如何配置它。服务器端也包含此代码

```
public void Notify(string ipAddress) //List<string> ipList
    {
        try
        {
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

            IPAddress ip = IPAddress.Parse(ipAddress);

            IPEndPoint endPoint = new IPEndPoint(ip, 15000);
            string notification = "new_update";
            byte[] sendBuffer = Encoding.ASCII.GetBytes(notification);
            sock.SendTo(sendBuffer, endPoint);
            sock.Close();
        }
        catch
        {
        }
    } 
```

我还想知道有关配置 IIS 以部署具有更多详细信息的 Web 服务的任何资源。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:02:54.927

部署 Web 服务与在 IIS7 管理器中部署网站相同。这段代码在 IIS7 上运行良好，但是在世界场景中使用这段代码时会出现问题。与客户端服务器概念的偏差（例如：客户端同时充当服务器）。Web 服务可以通过在 Web 方法中使用以下代码来获取客户端 IP 地址

```
string IPAddress = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
string port = HttpContext.Current.Request.ServerVariables["REMOTE_PORT"];
if (IPAddress == null)
{ 
            IPAddress = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
} 
```

但这不会提供客户端的真实 IP 地址。这取决于网络设备和 ISP 策略。因此，在采用这种方法之前最好重新考虑设计。但这在本地网络中有效。

# php - 在哪里创建以及如何调用视图中的函数 -- cakephp

> ID：11012829
> 
> 赞同：2
> 
> 时间：2012-06-13T10:20:16.173
> 
> 标签：php, cakephp

例如，我有一个视图 calculate.ctp ，在里面我想调用一个函数 add(7,5); 那么它当然会显示输出。

我将在哪里创建函数

```
function add($num1, $num2)
{
 $ans = $num1 + $num2;
 return $ans;
} 
```

以及如何在calculate.ctp 中调用该函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:25:27.030

我认为它更好地为您的常用功能创建一个助手并将您的常用功能放在这个助手中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:22:29.510

/app/Config/boostrap.php 是添加全局函数的有用位置。

或者，您是否考虑过将功能包装在 Helper 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-04T01:19:12.420

在 CakePHP 3.* 中，您也可以使用 Helpers。

[https://book.cakephp.org/3.0/en/views/helpers.html#creating-helpers](https://book.cakephp.org/3.0/en/views/helpers.html#creating-helpers)

[https://stackoverflow.com/a/50165754/935330](https://stackoverflow.com/a/50165754/935330)

# c# - 直接在 U 盘中写入字节

> ID：11012830
> 
> 赞同：0
> 
> 时间：2012-06-13T10:20:19.940
> 
> 标签：c#, windows, security, usb

我们都知道U盘里面有一个flash来存储数据，但是和FAT/NTFS等文件系统一起。我的要求是把数据写在flash上​​而不是封装在文件或文件系统上，即数据应该放在直接在闪存中，没有任何文件/文件系统。有可能吗，如果是，那么如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:25:58.347

这是可行的，但不是 C#。您需要使用 C（或 C++）编写内核模式驱动程序过滤器来执行此操作。不幸的是，我不能推荐任何好的英文文献，但一个好的起点可能是[Microsoft Installable File System Kit](http://msdn.microsoft.com/library/windows/hardware/gg463062)及其文档。

# java - Stacktrace 的异常只包含 java 库调用

> ID：11012831
> 
> 赞同：8
> 
> 时间：2012-06-13T10:20:41.370
> 
> 标签：java, swing, error-handling, jtable, stack-trace

如果错误的堆栈跟踪（不在主线程中发生）不包含您的任何方法，可以采取哪些可能的措施来找出问题所在？有问题的完整跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
    at java.util.Vector.elementAt(Unknown Source)
    at javax.swing.table.DefaultTableColumnModel.getColumn(Unknown Source)
    at javax.swing.plaf.basic.BasicTableHeaderUI.getHeaderRenderer(Unknown Source)
    at javax.swing.plaf.basic.BasicTableHeaderUI.getHeaderHeight(Unknown Source)
    at javax.swing.plaf.basic.BasicTableHeaderUI.createHeaderSize(Unknown Source)
    at javax.swing.plaf.basic.BasicTableHeaderUI.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at javax.swing.ViewportLayout.preferredLayoutSize(Unknown Source)
    at java.awt.Container.preferredSize(Unknown Source)
    at java.awt.Container.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at javax.swing.ScrollPaneLayout.layoutContainer(Unknown Source)
    at java.awt.Container.layout(Unknown Source)
    at java.awt.Container.doLayout(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validate(Unknown Source)
    at javax.swing.RepaintManager.validateInvalidComponents(Unknown Source)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

我目前正在尝试使用 SwingWorker 在后台运行一个进程，该进程最终会使用新数据更新 JTable。与此任务相关的所有代码都太大而无法在此处发布，我想知道是否有办法缩小错误来源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T10:31:52.190

stacktrace 可能不包含您的任何方法，但这并不意味着它不包含您创建的任何对象，在这种情况下，问题很可能位于您的`TableModel`.

为了调试这样的堆栈跟踪，我通常使用以下方法之一：

*   想一想你在哪里使用那些标准的 JDK 类，通过查看堆栈跟踪，你已经可以很好地了解出了什么问题（从这个问题的答案可以看出，因为我们只有堆栈跟踪）
*   在您的 IDE 中放置一个“异常断点”，这至少允许您使用调试器并获得更多信息，然后是堆栈跟踪中可用的信息。可能更容易识别您自己的对象并了解问题在代码中的位置
*   将 JDK 源代码附加到您的项目中，并在 JDK 源代码中放置一个常规断点，以便您可以开始调试。
*   不使用标准的 JDK 对象，而是对常规 JDK​​ 类进行匿名扩展，并通过调用`super`. 这允许您在有问题的对象的有问题的方法中放置断点

这一切都归结为相同的（除了第一种方法）：让我的调试器运行，这样我就可以更仔细地检查所有相关对象以了解哪里出了问题。一旦你理解了问题，解决它大部分时间都是微不足道的

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T10:23:46.240

您的 JTable（或您的新模型）没有列，当内部代码调用`DefaultTableColumnModel.getColumn`.

确保您的表的大小不是 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T14:16:08.763

通常，此类堆栈跟踪（Swing 布局/绘制期间的 NPE 或 IndexOutOfBounds，请参阅跟踪中的 RepaintManager/Look&Feel 类）是由于您未在 EDT（事件调度线程）上创建/修改 Swing 组件引起的。这包括更新像 TableModel 这样的 Swing 数据模型，它会触发将导致重绘的事件。

搜索“java swing 并发教程”以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:32:10.003

@Vulcan 解决了您的具体问题。

通常，如果堆栈跟踪不涉及您的任何方法，请查找您之前修改过的东西，现在正在由某个守护线程执行。例如，在这种情况下，你把桌子弄乱了，在绘图时，没有使用你的任何方法，事情就向南了。

其他要查找的内容是无效的配置参数，例如配置文件、命令行参数、环境变量等。

就是这样，如果你的方法没有导致错误，那么它就是在把事情搞砸之前发生的事情。

当然，在极少数情况下，您可能会发现错误！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:35:10.077

您可以调试 java.* 类，使用`rt.jar`和配置 IDE 以允许跟踪和单步执行这些类。然后在堆栈跟踪的上部方法中放置一个断点，并尝试弄清楚您对导致错误的可视组件做了什么。

或者，只有分析堆栈跟踪才能给出有关问题的提示，例如在这种情况下是`getColumn()`有问题的行，因此您对表格列所做的任何事情都应该如此。该索引`0 >= 0`为您提供有关预期或实际存在的列数的另一个提示。

通常，您需要深入了解组件的行为才能找出根本原因。

# grails - 服务圣杯的多种方法

> ID：11012834
> 
> 赞同：0
> 
> 时间：2012-06-13T10:21:01.120
> 
> 标签：grails, grails-orm, transactionscope, grails-2.0, spring-transactions

我在我的 grails 应用程序中创建了一项服务。在该服务中，有 25 种方法。一些方法用于获取数据并传递给控制器​​，一些方法用于应用业务逻辑，另一些用于数据库数据 CRUD 操作。

编写具有不同行为的多个方法来服务是个好主意吗？我是否必须使服务具有事务性？

以及默认方法的用途是什么

```
def serviceMethod() {

    } 
```

?

此方法是在我创建新服务时创​​建的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:07:09.870

> 编写具有不同行为的多个方法来服务是个好主意吗？

服务中的多个方法非常好，如果服务中的方法与上下文相关，它就很有意义。

以一个名为`springSecurityService`. 您会期望其中包含的方法与 Spring 安全操作相关。你不会期望在`sendMail`那里找到一种方法。

> 我必须使服务事务化吗？

如果您在该服务中执行数据库操作（主要是写入！），则应该使服务具有事务性。当您的服务是事务性的时，您可以在发生故障时回滚数据库操作。

> 默认方法有什么用

默认方法只是一个占位符。随意编辑或删除它：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:08:16.263

服务在 Grails 中默认是事务性的 - [http://grails.org/doc/latest/guide/services.html#declarativeTransactions](http://grails.org/doc/latest/guide/services.html#declarativeTransactions)

由`serviceMethod`CreateService 脚本生成。这只是一个示例，因此您可以根据需要将其删除。

您可以将所有业务逻辑放在服务中。[这很方便，但请注意，这更像是一种称为贫血域模型](http://www.martinfowler.com/bliki/AnemicDomainModel.html)的反模式

恕我直言，您应该尝试遵循面向对象的原则，并将您的大部分业务流程放在域类中。当有一个涉及多个域对象的复杂过程时，也许你可以把它放在一个服务中。

# ruby-on-rails - 如何在 ruby on rails 中正确包含 jquery ui（带样式）？

> ID：11012836
> 
> 赞同：2
> 
> 时间：2012-06-13T10:21:05.943
> 
> 标签：ruby-on-rails, jquery-ui

我在这里看到了一些信息，但对我来说似乎听不到。

我包含`//= require jquery-ui`在 application.js 中

我应该在哪里放置带有样式的目录以及应该如何调用它？你能提供一步一步的指导吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:56:11.207

您只需将样式表和 javascripts 如下所示

```
 directories path for javascript

     vendor -> assets -> javascript 
```

并要求 application.js 中的文件

```
 //= require jquery-ui
        //= require_self
       //= require_tree .         

      directories path for style sheets

     vendor -> assets -> stylesheets

       *=require style
       *= require_tree . 
```

它肯定会为你工作

# java - apache james 邮件服务器发送电子邮件

> ID：11012841
> 
> 赞同：2
> 
> 时间：2012-06-13T10:21:35.943
> 
> 标签：java, apache, james

嗨，我正在使用 apache james 电子邮件服务器 2.3.2 通过我的 Java 应用程序发送电子邮件，我已经设置它并使用 JavaMail API 1.4。我正在尝试向 gmail/yahoo 等邮件服务器发送电子邮件。

我可以将邮件发送到 localhost 上的帐户（本地运行的 James 帐户），但不能发送到外部电子邮件服务器。

我也更改了 /apps/config.xml 。我在 james 上有我的 MyMailet 示例。它没有抛出任何异常。但 mailet*.log 就像：

```
13/06/12 15:20:13 INFO  James.Mailet: MyMailet#init called
13/06/12 15:20:13 INFO  James.Mailet: RemoteAddrNotInNetwork: Authorized addresses: [127.0.0.1/255.255.255.255]
13/06/12 15:20:13 INFO  James.Mailet: RemoteDelivery: Total number of delayTime attempts exceeds maxRetries specified. Increasing maxRetries from 1 to 6
13/06/12 15:20:17 INFO  James.Mailet: MyMailet#service callednull from test@localhost
13/06/12 15:20:23 INFO  James.Mailet: RemoteDelivery: Attempting delivery of Mail1339581017690-0 to host 192.168.15.186 at 192.168.15.186 for addresses [shreyas1910@gmail.com]
13/06/12 15:20:23 INFO  James.Mailet: RemoteDelivery: null
13/06/12 15:20:23 INFO  James.Mailet: RemoteDelivery: Temporary exception delivering mail (Mail1339581017690-0: 
13/06/12 15:20:23 INFO  James.Mailet: RemoteDelivery: Storing message Mail1339581017690-0 into outgoing after 0 retries 
```

dnsserver*.log 就像：

```
13/06/12 15:20:13 INFO  dnsserver: DNS Server is: 192.168.15.3

james*.log like:
13/06/12 15:20:13 INFO  James: JAMES init...
13/06/12 15:20:13 INFO  James: Local host is: IISD27
13/06/12 15:20:13 INFO  James: Handling mail for: 97.74.180.1
13/06/12 15:20:13 INFO  James: Handling mail for: iisd27
13/06/12 15:20:13 INFO  James: Handling mail for: gmail.com
13/06/12 15:20:13 INFO  James: Handling mail for: 74.125.236.182
13/06/12 15:20:13 INFO  James: Handling mail for: 74.125.236.181
13/06/12 15:20:13 INFO  James: Handling mail for: 127.0.0.1
13/06/12 15:20:13 INFO  James: Handling mail for: localhost
13/06/12 15:20:13 INFO  James: Local users repository opened
13/06/12 15:20:13 INFO  James: Private Repository LocalInbox opened
13/06/12 15:20:13 INFO  James: JAMES ...init end 
```

和 cofig.xml 就像：

```
 <processor name="transport">
        <mailet match="All" class="RemoteDelivery">
        <outgoing> file://var/mail/outgoing/ </outgoing>

            <gateway>192.168.15.186</gateway>//My IP addresss. Tried with smtp.gmail.com also
            <gatewayPort>25</gatewayPort>
            <gatewayusername>user123</gatewayusername>
        <gatewayPassword>pass123</gatewayPassword>

        <!-- Set the HELO/EHLO name to use when connectiong to remote SMTP-Server -->

        <mail.smtp.localhost>myMailServer</mail.smtp.localhost>

        </mailet>

  </processor> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:44:29.190

我认为由此引起的问题：

电子邮件服务器在接受任何邮件之前都会执行反向 dns 查询。他们检查电子邮件来自的域的 ip 以及电子邮件真正来自的 ip。

如果域的 ip 和电子邮件发件人的 ip 不匹配，邮件服务器会认为电子邮件是垃圾邮件或垃圾邮件。

在这里，因为您的域（我不知道它是什么 :-? ）在电子邮件服务器发送反向 dns 查询没有获得 IP 并认为您的邮件是垃圾邮件或垃圾邮件时不是有效地址。

有关更多信息，请查看：[http ://wiki.junkemailfilter.com/index.php/Fixing_Reverse_DNS](http://wiki.junkemailfilter.com/index.php/Fixing_Reverse_DNS)

# iphone - 如何在单击图像时执行操作

> ID：11012842
> 
> 赞同：0
> 
> 时间：2012-06-13T10:21:44.503
> 
> 标签：iphone

我正在开发一个应用程序，我想要的是当用户单击图像视图中的图像时

应该触发一个动作（例如单击按钮时）。

我不想要按钮图像。我只想要一个图像视图和操作。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:25:38.113

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected)];
    singleTap.numberOfTapsRequired = 1;
    imageView.userInteractionEnabled = YES;
    [imageView addGestureRecognizer:singleTap];
    [singleTap release];

-(void)tapDetected{
    NSLog(@"single Tap on imageview");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:32:15.533

根据您的评论，如果您想了解图像的索引，那么您可以通过`tag`图像视图的属性来做到这一点。根据需要分配图像视图的`tag`属性并获取`tag`on **Touch 事件**。

例如 ：

添加`UITapGestureRecognizer`

```
ITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                action:@selector(tap:)];
tap.numberOfTapsRequired = 1;

[self addGestureRecognizer:tap];

[tap release]; 
```

使用它的委托方法：`- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event`

```
// called when touch is began or when user touches 
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    UITouch *touch = [touches anyObject]; 

    int indexOfImageView = touch.view.tag;
} 
```

希望对你有帮助...

# arrays - 是否可以在 VBA 中定义结构或对象数组？

> ID：11012844
> 
> 赞同：5
> 
> 时间：2012-06-13T10:21:45.777
> 
> 标签：arrays, object, excel, vba

我必须在 Excel 宏（yuk！）中实现一些东西，为此我想使用结构或对象的数组。（这在 Excel VBA 中甚至可能吗？）

问题是，我只能找到极少的文档。有人可以提供一些指向良好 VBA 文档的指针，或者关于使用 VBA 结构的建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T10:41:01.837

也许您正在寻找 Type 结构？

[http://www.cpearson.com/excel/classes.aspx](http://www.cpearson.com/excel/classes.aspx)（向下滚动一点）

然后我想你会将它与 VBA 数组结合使用。

[http://www.cpearson.com/excel/vbaarrays.htm](http://www.cpearson.com/excel/vbaarrays.htm)

希望能有所帮助。

# java - 使用 Okapi 方案计算文档相似度

> ID：11012846
> 
> 赞同：1
> 
> 时间：2012-06-13T10:21:46.463
> 
> 标签：java, lucene, similarity

我发现 Okapi 相似度度量可用于从这里[http://www2002.org/CDROM/refereed/643/node6.html](http://www2002.org/CDROM/refereed/643/node6.html)和本文[http://singhal.info/ieee2001.pdf计算文档相似度](http://singhal.info/ieee2001.pdf)

我想使用带有 Lucene 的 Okapi 相似性方案计算文档集合的文档之间的相似性

例如，我的文档集合中有 10 个文档（doc #A、#B、#C、#D 等）。我将选择一个文档作为查询文档。说文档#A。然后对于查询文档的每个 term=1..n ，我将计算

```
idfOfQueryTerm = log (totalNumIndexedDocs - docFreq + 0.5)/(docFreq + 0.5) 
```

那我就拿`sum of (idfOfQueryTerm) from 1 to n`; `idfOfQueryDoc= sum of (idfOfQueryTerm)` 然后对于每 10 个文档（包括查询文档），我会根据首先选择的查询文档的查询词，通过这个等式计算文档的总词频。

```
tfOfDocument={2.2 * termFrq }/ { 1.2 * ( 0.25 + 0.75 * docLength / this.avgDocLength ) + termFrq } 
```

所以我最终会得到 10`tfOfDocument`个值，每个文档一个值，一个`idfOfQueryDoc`值。

然后我可以使用这两种方法计算查询文档与其他文档之间的相似度。

1）查询文档和文档#B=的相似性`idfOfQueryDoc* tfOfDocument #B`

2）查询文档和文档#B=的相似性`idfOfQueryDoc* tfOfDocument #B* tfOfDocument#queryDoc`

我想知道，我对 Okapi 相似度度量的理解是否正确？

以上两种方法中哪种方法最适合计算文档相似度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:49:27.853

基于第一个链接，查询文档与另一个文档的相似度为：

```
sim(query, doc) = sum(t in terms(query), freq(t, query) * w(t, doc)) 
```

哪里（来自第二个链接，由于我认为链接中的公式不正确而略有修改）

```
w(t, doc) = idf(t) * (k+1)*freq(t, doc) / (k*(1-b + b*ls(doc)) + freq(t, doc))
ls(doc) = len(doc)/avgdoclen 
```

并且`idf(t)`是您的`idfOfQueryTerm`，是文档`freq(t, doc)`中术语的频率。`t``doc`

选择 b=0.25 和 k = 1.2 你得到

```
w(t, doc) = idf(t) * 2.2*freq(t, doc) / (1.2*(0.25+0.75*ls(doc)) + freq(t, doc)) 
```

*注意*：这两个链接给出的方程式略有不同，尽管不同之处主要在于称重，而不是基本原理

# java - 异步发送邮件

> ID：11012854
> 
> 赞同：2
> 
> 时间：2012-06-13T10:22:19.593
> 
> 标签：java, email, jms

我有四个具有相同数据库结构但数据不同的数据库服务器。目前，当新数据插入数据库时​​，我的应用程序会获取这些数据、创建模板并发送电子邮件。

我想将发送电子邮件与我的应用程序分开。例如，某些线程将每 10 分钟启动一次。它从我的四个数据库服务器中选择数据，连接到邮件服务器并向用户发送电子邮件。

可以使用 JMS 或类似的东西吗？

感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:44:14.417

我通过创建一个邮件表（每个数据库可能一个）并在其中保存模板和数据（或主题/正文）来做同样的事情。一个单独的进程可能是 Quartz 或您自己的池线程读取该表并连接到邮件服务器并发送电子邮件并更新电子邮件状态。

通过这种方式，您可以在任何给定时间检查任何电子邮件的状态，甚至可以重新发送任何电子邮件。该表需要在 1 天或 1 周后清除/归档，具体取决于表大小。

# delphi - 排序字典

> ID：11012856
> 
> 赞同：4
> 
> 时间：2012-06-13T10:22:24.737
> 
> 标签：delphi, generics, sorting, dictionary, delphi-xe

我对通用集合没有经验。我需要对 TDictionary 进行排序。

```
type TSearchResult = TPair<Integer,double>;

var
   target_results : TDictionary<Integer, double>;
   session_search_results : array[0..max_searches] of TArray<TSearchResult>; 
```

我正在使用此代码进行排序

```
 session_search_results[session_search_id]:= target_results.ToArray;
   TArray.Sort<TSearchResult>(session_search_results[session_search_id],
                    TComparer<TSearchResult>.Construct(
                              function(const L, R: TSearchResult): Integer
                              begin
                                 Result := Round(R.Value - L.Value);
                              end
                    )); 
```

为什么我会因此遇到访问冲突？我究竟做错了什么？

补充：

如果我遍历数组

```
 for i:= 0 to Length(session_search_results[session_search_id])-1 do
      MyDebug(IntToStr(session_search_results[session_search_id][i].Key)+' = value = '
            + FloatToStr(session_search_results[session_search_id][i].Value)); 
```

我得到以下输出：

```
Debug Output: ==>CoreSearchText: array length=8<== Process TestApp.exe (2536)
Debug Output: ==>100007 = value = 19,515<== Process TestApp.exe (2536)
Debug Output: ==>100003 = value = 2,4<== Process TestApp.exe (2536)
Debug Output: ==>100005 = value = 12<== Process TestApp.exe (2536)
Debug Output: ==>100008 = value = 2,4<== Process TestApp.exe (2536)
Debug Output: ==>100002 = value = 2,4<== Process TestApp.exe (2536)
Debug Output: ==>100004 = value = 2,4<== Process TestApp.exe (2536)
Debug Output: ==>100009 = value = 40,515<== Process TestApp.exe (2536)
Debug Output: ==>100001 = value = 15<== Process TestApp.exe (2536) 
```

应用排序时，访问冲突会使应用程序崩溃。阵列似乎没问题。可能是什么原因？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T20:11:53.190

这似乎是 XE 中的一个代码生成错误（也存在于 XE2 中），重新声明的通用记录和优化已打开。

这个程序重现了这个错误：

```
program Project1;

{$APPTYPE CONSOLE}
{$O+}

uses
  Generics.Collections,
  Generics.Defaults,
  SysUtils;

type
  TSearchResult = TPair<Integer, Integer>;

function Compare(const L, R: TSearchResult): Integer;
begin
  Result := R.Value - L.Value;
end;

var
  values: TArray<TSearchResult>;
begin
  try
    SetLength(values, 3);
    TArray.Sort<TSearchResult>(values, TComparer<TSearchResult>.Construct(Compare));
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

我已将其报告为[QC #106391](http://qc.embarcadero.com/wc/qcmain.aspx?d=106391)。

一种可能的解决方案是将 {$O-} 添加到包含对 TArray<T>.Sort 的调用的单元中。

# ios - 使用 CFTypeRef 和 A RC 时出错

> ID：11012860
> 
> 赞同：1
> 
> 时间：2012-06-13T10:22:38.027
> 
> 标签：ios, keychain, cftypes

我基本上按照[本教程](http://josebolanos.wordpress.com/2012/03/16/core-data-passwords-in-keychain/)进行操作，很快就意识到该项目无法编译，因为我使用的是 ARC。我设法使用`__bridge`(>.>) 抑制了所有错误，但我仍然收到一条错误消息，并且我设法阅读[了这个堆栈问题](https://stackoverflow.com/questions/7827730/iphone-fetch-data-dictionary-from-keychain)，但不明白如何将解决方案应用于我的问题。

基本上给我问题的方法如下所示：

```
+ (NSString*)getPasswordForKey:(NSString*)aKey
{
 NSString *password = nil;

 NSMutableDictionary *searchDictionary = [self dictionaryForKey:aKey];

 [searchDictionary setObject:(__bridge id)kSecMatchLimitOne forKey:(__bridge id)kSecMatchLimit];
 [searchDictionary setObject:(id)kCFBooleanTrue forKey:(__bridge id)kSecReturnData];

 NSData *result = nil;
 SecItemCopyMatching((__bridge CFDictionaryRef)searchDictionary, (CFTypeRef *)&result);

 if (result)
 {
    password = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];

 }
 return password;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:28:16.590

我认为您通过尝试转换指针到指针的参数来进行不必要的复杂类型转换。这个怎么样：

```
CFTypeRef result = NULL;
BOOL statusCode = SecItemCopyMatching((__bridge CFDictionaryRef)searchDictionary, &result);
if (statusCode == errSecSuccess) {
    NSData *resultData = CFBridgingRelease(result);
    password = [[NSString alloc] initWithData:resultData encoding:NSUTF8StringEncoding];
} 
```

# php - 发布到用户提要 > 图像丢失

> ID：11012865
> 
> 赞同：1
> 
> 时间：2012-06-13T10:22:59.910
> 
> 标签：php, image, facebook-graph-api, facebook-php-sdk

我的应用程序正在向用户 Facebook 提要发布。一切正常，但图片不见了。我不知道为什么。

这是 $facebook->api 方法使用的数组：

```
Array
(
    [message] => MyText
    [link] => MyLink
    [name] => MyName
    [picture] => https://lala.herokuapp.com/images/oceanblue.png
    [caption] => MyCaption
    [description] => MyDescription
) 
```

该图像是可访问的（不是上面的真实网址），并在我在浏览器中打开该网址时显示。

api 返回对象如下所示：

```
Array
(
    [id] => 652685341_10151011701170342
) 
```

非常感谢您的帮助，谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T15:23:08.477

我想做同样的事情。您无法将远程图片上传到 facebook，您需要将图片保存在您的服务器上，所以我将图片下载到我的服务器上然后上传。这是我的代码：

```
/**
 * Post photo on facebook
 * This function requires the user to be logged in
 * This function requires the 'publish_stream' permission
 * 
 * Fetches the picture from remote URL and uploads it to facebook
 * @param string $picture Picture URL
 * @param string $description Description to place in caption
 * @param string $link Link to place in caption
 * @param string $albumId Id of the previously created album
 */
function postPhotoOnFacebook($picture, $description, $link, $albumId){
    global $userId, $facebook;

    $tempFilename = $_SERVER['DOCUMENT_ROOT'].'/temp/';
    $tempFilename .= uniqid().'_'.basename($picture);

    if ($userId) {
        try {
        if($imgContent = @file_get_contents($picture)){
            if(@file_put_contents($tempFilename, $imgContent)){
                $photo_details = array('message' => "$link $description");
                $photo_details['image'] = '@' . realpath($tempFilename);
                $data = $facebook->api('/'.$albumId.'/photos', 'post', $photo_details);

                unlink($tempFilename);
            }
        }
        } catch (FacebookApiException $e) {
            error_log($e);
            $userId = null;
        }
    }
} 
```

这个堆栈问题很有帮助：[将远程照片上传到上传](https://stackoverflow.com/questions/7116359/upload-a-remote-photo-to-an-upload)

希望有帮助！

# c# - 来自另一个 DLL 的 DLL 设置

> ID：11012869
> 
> 赞同：0
> 
> 时间：2012-06-13T10:23:04.340
> 
> 标签：c#, xml, asp.net-mvc, dll

我有一个使用 foo.dll 的 MVC 项目，但是 foo.dll 使用 smu.dll 所以基本上我从不在我的 MVC 项目中引用 smu.dll。我面临的问题是，在我的 MVC 项目中，我希望能够将 ssettings 存储在 web.config 中，以便 smu.dll 可以读取。

我们尝试同时使用 applicationsettings 和 appsettings 而没有效果，当我直接从 MVC 或任何其他程序引用 smu.dll 时，它会毫无问题地获取设置。smu.dll 的设置是否必须进入 foo.dll app.config？

**编辑** 你好再次朋友，谢谢你的回答。

看完评论后我才发现自己做错了什么。在 MVC 中，在 Views 文件夹中有一个 web.config，在项目的根目录中有一个 web.config。当我在“视图”-web.config 中使用 sectionGroup 和 applicationSettings 时，smu.dll 没有读取配置。然后我将 smu.dll 改为读取 appsettings，然后将 appSettings 放入“root”-web.config，然后 dll 读取配置文件。我希望这是有道理的，但我对此并不陌生，并且仍在学习。

无论如何，这终于可以工作了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:40:14.610

那么，您有一个 MVC 项目和两个类库（foo 和 smu）？

MVC -> Foo（通过项目参考） Foo -> Smu（通过项目参考）

在 web.config 的 AppSettings 中，您有 smu 应该选择的设置吗？

Smu 不应该只接受一个参数，而不关心它来自哪里，例如

如果 Smu 是一个数据访问类，并且它需要一个连接字符串 - 它需要允许用户做的只是向它发送一个连接字符串？那么，您可以从 Foo 发送它（因为此类可以访问您的配置设置）？

# razor - 在 VS2012 和 ReSharper 中引用代码完成

> ID：11012879
> 
> 赞同：2
> 
> 时间：2012-06-13T10:23:31.257
> 
> 标签：razor, resharper, code-completion, visual-studio-2012

给定具有以下 Razor 代码的视图：

```
@Url.Action("Index", "Home") 
```

我想像这样添加一个 Area 参数：

```
@Url.Action("Index", "Home", new { Area = "Manage" }) 
```

但是当我开始打字时，会发生这种情况：

```
@Url.Action("Index", "Home", new object{Area = ""Manage"}) // broken double quote 
```

如何阻止 Visual Studio 完成损坏的双引号，这样我就不必为每个链接播放俄罗斯方块？ReSharper 会导致这种情况吗？我找不到它的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:40:13.283

如果您在属性内键入代码，例如

```
<a href="@Url.Action("Index", "Home", new { Area = "Manage" })"> 
```

那么 ReSharper 可能会错误地添加引号，导致“管理”。这应该在上一个 ReSharper 7.0 EAP 版本中修复。在以前的版本中，尝试关闭 ReSharper | 选项 -> 环境 | 编辑器 -> 自动插入对括号，括号和引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:38:55.677

我发现该功能非常漂亮，但如果您不想让它挡道，那么：
1\. 转到“工具”>“选项”。
2\. 展开“文本编辑器”节点。
3\. 展开“HTML”节点。
4\. 取消选中“键入时插入属性值引号”字段。

如果您有 ReSharper，请执行以下操作：
1\. 转到 ReSharper -> 选项 -> Intellisense -> 常规。
2\. 检查 Visual Studio 选项。

这将使 ReSharper 脱离智能感知循环。

# javascript - JavaScript 中断标签的可移植性如何？

> ID：11012887
> 
> 赞同：1
> 
> 时间：2012-06-13T10:23:49.890
> 
> 标签：javascript, language-features

JavaScript 的一个鲜为人知的特性是您可以在嵌套循环和 switch 语句之间使用`break`标签`continue`：

```
i_loop: for (i = 0; i < 10; i++) {
    j_loop: for (j = 0; j < 10; j++) {
        if (i == 3 && i < j)
            break i_loop;
    }
} 
```

此功能是以下问题的答案：

*   [打破Javascript中嵌套循环的最佳方法？](https://stackoverflow.com/q/183161/149391)

*   [如何打破javascript中的嵌套循环？](https://stackoverflow.com/q/1564818/149391)

我的问题是，它的便携性如何？[MSDN 文档](http://msdn.microsoft.com/en-us/library/d3666y5k%28v=vs.94%29)有一长串受支持的 IE 版本。[Mozilla 文档](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)说它是在 JavaScript 1.2（1997 年发布）中实现的，并且它是在 ECMA-262，第 3 版（1999 年）中实现的。这样一来，标签应该非常便携，但我可以指望它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:26:39.197

根据[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Statements/break)，自“ECMA-262，第 3 版”标准（于 1999 年 12 月发布，所以我相信不应该有一个浏览器不支持它：）

# ruby - 使用 Ruby 删除字段

> ID：11012889
> 
> 赞同：1
> 
> 时间：2012-06-13T10:23:51.077
> 
> 标签：ruby, mongodb

通常用于从 MongoDB 中的集合中删除一些字段`$unset`。我可以在 Ruby 中做些什么来实现这一点？我试图阅读[这个](http://api.mongodb.org/ruby/current/Mongo/Collection.html#remove-instance_method)，但我不明白如何使用它。我是 Ruby 新手，仍在学习使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:31:07.667

该`$unset`运算符通过[此处](http://api.mongodb.org/ruby/current/Mongo/Collection.html#update-instance_method)记录的用于 ruby​​ 驱动程序的`update`命令使用。

退后一步，标准的（10gen 维护的）MongoDB Ruby 驱动程序绝对可以做 mongodb 可以做的所有事情。它从字面上公开了 mongodb 的全部功能，就像其他语言中的 mongodb 驱动程序一样。所以不用担心能用任何特定的语言做 mongo 的事情。

您可能想知道流行的 ODM 层的功能，因为它们各不相同。ODM 层将 mongodb 文档映射到本地语言对象。在 Ruby 中，[mongoid](http://mongoid.org/)是最流行的 ODM。正如@Tilo 指出的那样，它还支持通过其更高级别的 API 从文档中显式删除字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:16:22.093

请检查 Mongoid 的这个问题：

[https://github.com/mongoid/mongoid/pull/635](https://github.com/mongoid/mongoid/pull/635)

```
p = Product.first
p.raw_attributes.delete :foo
p.save 
```

# php - 从“Ymd H:i:s”格式的日期数组中获取最新日期

> ID：11012891
> 
> 赞同：28
> 
> 时间：2012-06-13T10:23:54.147
> 
> 标签：php, arrays, date, max, date-comparison

我有`Y-m-d H:i:s`格式如下的日期数组：

```
array(5) { 
    [0]=> string(19) "2012-06-11 08:30:49" 
    [1]=> string(19) "2012-06-07 08:03:54" 
    [2]=> string(19) "2012-05-26 23:04:04" 
    [3]=> string(19) "2012-05-27 08:30:00" 
    [4]=> string(19) "2012-06-08 08:30:55" 
} 
```

我想知道***最近的日期***。

换句话说，今天是 2012 年 6 月 13 日，哪个日期时间最接近今天的日期？

从我的示例数组中，我期待`2012-06-11 08:30:49`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-13T11:01:18.607

使用[`max()`](http://php.net/max)、[`array_map()`](http://php.net/array_map)和[`strtotime()`](http://php.net/strtotime)。

```
$max = max(array_map('strtotime', $arr));
echo date('Y-m-j H:i:s', $max); // 2012-06-11 08:30:49 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-13T10:29:25.250

执行循环，将值转换为日期，并将最新的值存储在 var 中。

```
$mostRecent= 0;
foreach($dates as $date){
  $curDate = strtotime($date);
  if ($curDate > $mostRecent) {
     $mostRecent = $curDate;
  }
} 
```

类似的东西......你明白了如果你想要今天之前的最新消息：

```
$mostRecent= 0;
$now = time();
foreach($dates as $date){
  $curDate = strtotime($date);
  if ($curDate > $mostRecent && $curDate < $now) {
     $mostRecent = $curDate;
  }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-13T10:29:28.967

按日期对数组进行排序，然后得到数组的前值。

```
$dates = array(5) { /** omitted to keep code compact */ }
$dates = array_combine($dates, array_map('strtotime', $dates));
arsort($dates);
echo $dates[0]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-02T14:22:07.623

```
$dates = [
    "2012-06-11 08:30:49" 
    ,"2012-06-07 08:03:54" 
    ,"2012-05-26 23:04:04" 
    ,"2012-05-27 08:30:00" 
    ,"2012-06-08 08:30:55" 
];
echo date("Y-m-d g:i:s",max(array_map('strtotime',$dates))); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T10:35:13.243

那是我的变种。它适用于未来的日期。

```
$Dates = array( 
    "2012-06-11 08:30:49", 
    "2012-06-07 08:03:54", 
    "2012-05-26 23:04:04",
    "2012-05-27 08:30:00",
    "2012-06-08 08:30:55",
    "2012-06-12 07:45:45"
);
$CloseDate = array();
$TimeNow = time();
foreach ($Dates as $Date) {
  $DateToCompare = strtotime($Date);
  $Diff = $TimeNow - $DateToCompare;
  if ($Diff < 0) $Diff *= -1;
  if (count($CloseDate) == 0) {
    $CloseDate['Date'] = $Date;
    $CloseDate['Diff'] = $Diff;
    continue;
  }
  if ($Diff < $CloseDate['Diff']) {
    $CloseDate['Date'] = $Date;
    $CloseDate['Diff'] = $Diff;
  }
}

var_dump($CloseDate); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T11:15:11.670

我相信，以下是找到最近日期的最短代码。您可以更改它以查找最近日期的索引或查找将来或过去的最近日期。

```
$Dates = array( 
"2012-06-11 08:30:49", 
"2012-06-07 08:03:54", 
"2012-05-26 23:04:04",
"2012-05-27 08:30:00",
"2012-06-08 08:30:55",
"2012-06-22 07:45:45"
);

$close_date = current($Dates);
foreach($Dates as $date)
    if( abs(strtotime('now') - strtotime($date)) < abs(strtotime('now') - strtotime($close_date)))
        $close_date = $date;

echo $close_date; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T10:29:36.957

这是我的建议：

```
$most_recent = 0;

foreach($array as $key => $date){
    if( strtotime($date) < strtotime('now') && strtotime($date) > strtotime($array[$most_recent]) ){
        $most_recent = $key;
    }
}

print $array[$most_recent]; //prints most recent day 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-13T10:31:32.907

```
$arrayy = array(
    "2012-06-11 08:30:49","2012-06-07 08:03:54","2012-05-26 23:04:04",
    "2012-05-27 08:30:00","2012-06-08 08:30:55" 
);

function getMostRecent($array){
    $current = date("Y-m-d h:i:s");
    $diff1 = NULL;
    $recent = NULL;
    foreach($array as $date){
        if($diff = strcmp($current,$date)){
            if($diff1 == NULL){
                $diff1 = $diff;
                $recent = $date;
            }
            else{
                if($diff < $diff1){
                    $diff1 = $diff;
                    $recent = $date;
                }
            }
        }
    }
    return $recent;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-08T18:54:24.167

试试这个：

```
public function getLargerDate(array $datas) {
    $newDates = array();
    foreach($datas as $data){
        $newDates[strtotime($data)] = $data;
    }
    return $newDates[max(array_keys($newDates))];
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-31T06:45:13.773

**试试这个作品 100%**

```
function getRecentDate($date_list,$curDate){
$curDate = strtotime($curDate); 
    $mostRecent = array();
    foreach($date_list as $date){                                             
       $diff = strtotime($date)-$curDate;
       if($diff>0){
        $mostRecent[$diff] = $date;
       }
    }   
    if(!empty($mostRecent)){
        ksort($mostRecent);            
        $mostRecent_key = key($mostRecent);
        if($mostRecent_key){
            return $mostRecent[$mostRecent_key];
        }
    }else{
        return false;
    }
}
$date_list = array('15-05-2015','14-01-2015','18-03-2015','20-10-2016','12-12-2014','12-12-2015');
$curDate = '14-01-2015';    
$get_recent = getRecentDate($date_list,$curDate);
if($get_recent){
    echo $get_recent;
}else{
    echo 'No recent date exists';
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-21T08:46:48.120

经过近 10 年和近 50,000 次浏览量，似乎没有人能从树上看到森林。

日期时间戳数组的格式非常适合简单的字符串比较。`max()`除了获得最高/最新的字符串之外，绝对没有理由调用任何东西。您的`Y-m-d H:i:s`格式化值可以作为字符串进行比较，因为单位整数的排列顺序是从最大到最小。所有整数都始终用零填充。从字面上看，不需要任何准备。

代码：（[演示](https://3v4l.org/AdoDV)）

```
$dates = [
    "2012-06-11 08:30:49",
    "2012-06-07 08:03:54",
    "2012-05-26 23:04:04",
    "2012-05-27 08:30:00",
    "2012-06-08 08:30:55",
];

echo max($dates);
// 2012-06-11 08:30:49 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-05-19T08:44:01.870

```
$DatesList = array( '2015-05-19', '2015-09-17', '2015-09-24', '2015-10-02', '2015-10-23', '2015-11-12', '2015-12-25' );

$counter = 0; 
$currentDate = date("Y-m-d");
foreach ($DatesList as $dates)
{
    if($dates >= $currentDate)
    {
        $storeDates[$counter] = $dates;
        $counter++;
    }
}
$closestDate = current($storeDates);
echo $closestDate; 
```

# php - 用户注册表单在 Internet Explorer 9 中不起作用

> ID：11012899
> 
> 赞同：0
> 
> 时间：2012-06-13T10:24:27.753
> 
> 标签：php, html, internet-explorer-9

在我的智慧中以 Internet Explorer 9 中的表单问题结束 - 该表单在所有其他浏览器中都可以正常工作，甚至可以在我的离线服务器上的 IE9 中工作，但是当您在线提交表单时，它什么也不做。表格清空

链接到此处的实际表格：

[http://www.bloggabase.com/account/signup/blog](http://www.bloggabase.com/account/signup/blog)

任何帮助将不胜感激。处理表单的代码都是 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:31:39.233

它在 IE9 中工作得非常好，只需尝试清空缓存并检查您的 Internet 速度，因为某些页面以较低的速度无法正常打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:27:42.740

据我所知，在这里工作。尝试清除缓存等

# iphone - splitView/Objective C - 无法从第二个 tableViewController 更新 detailView

> ID：11012902
> 
> 赞同：1
> 
> 时间：2012-06-13T10:24:40.460
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个拆分视图应用程序。MasterView 是 UITableViewController，详细视图是 web 视图。在选择条目的主窗格中，会出现另一个表视图（使用另一个 tableviewcontroller 创建以避免复杂性），并且详细视图显示与条目相关的一些页面。这一切都很好。

现在我希望第二个表格视图也一样，即在选择一个条目时，详细视图应该相应地更新。但它没有得到更新。我在第一个 tableViewController 类中创建了以下函数：

```
-(void) display:(NSString*)theUrl
{    
    NSLog(@"%@", theUrl);
    NSURL *myUrl = [NSURL URLWithString:theUrl];

    NSURLRequest *request = [NSURLRequest requestWithURL:myUrl];
    splitViewDetailViewController *detailViewController = 
    self.detailViewController;

    detailViewController.webView.scalesPageToFit = YES;

    [detailViewController.webView loadRequest:request];
} 
```

我从 secondTableViewController 调用这个函数，它被调用但细节视图没有得到更新。在 secondTableViewController 的 didSelectRowAtIndex 方法中，我这样做：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  

    NSString *urlString=@"http://www.google.com";

    NSURL *myUrl = [NSURL URLWithString:urlString];

    NSURLRequest *request = [NSURLRequest requestWithURL:myUrl];
    splitViewSecondViewController *secondDetailViewController = [[splitViewSecondViewController alloc] init];
    secondDetailViewController.detailViewController=self.detailViewController;

    [self.navigationController pushViewController:secondDetailViewController animated:YES];

    self.detailViewController.webView.scalesPageToFit = YES;

    [self.detailViewController.webView loadRequest:request];
} 
```

但是随后出现以下运行时错误： `Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFConstantString stringByAppendingString:]: nil argument`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:08:07.277

表视图控制器.h

```
@protocol TableViewControllerDelegate
-(void)display:(NSString*)theUrl :(NSInteger)index;
@end

id<tableViewControllerDelegate>_delegate;
@property(nonatomic,assign) id<tableViewControllerDelegate>_delegate; 
```

表视图控制器.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    selectedIndex = indexPath.row;
    [self.ResultTbl reloadData];
    [_delegate display:(NSString*)theUrl :selectedIndex];
} 
```

主视图（拆分视图）.h

```
#import "tableViewController.h"

@interface MasterViewController : UIViewController <tableViewControllerDelegate> 
```

主视图（拆分视图）.m

```
-(void)display:(NSString*)theUrl :(NSInteger)index
{
    NSLog(@"%@", theUrl);
    NSURL *myUrl = [NSURL URLWithString:theUrl];

    NSURLRequest *request = [NSURLRequest requestWithURL:myUrl];
    splitViewDetailViewController *detailViewController = self.detailViewController;

    detailViewController.webView.scalesPageToFit = YES;

    [detailViewController.webView loadRequest:request];
} 
```

# apache - 如何在url中隐藏php扩展？

> ID：11012903
> 
> 赞同：1
> 
> 时间：2012-06-13T10:24:41.493
> 
> 标签：apache, .htaccess

我正在尝试从 url 中删除 php 扩展名，但它对我不起作用。我使用的是 Windows 7，带有 apache2.2.17 和 php5.3。现在我已将其配置为

在 .htaccess 文件中

```
OPTIONS -Indexes
IndexIgnore *

Options +FollowSymLinks

RewriteEngine On
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L] 
```

在 httpd.conf 中启用 mod_rewrite 为

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

和

```
<Directory "D:/Apache/htdocs">
    Options Indexes FollowSymLinks ExecCGI MultiViews
    AllowOverride all
    Order allow,deny
    Allow from all
</Directory> 
```

在 php.ini 中

```
expose_php = On 
```

在进行这些配置之后，我仍然无法从我的 Windows 机器中的 url 中删除 php 扩展，但同样的事情在 ubuntu 服务器中工作。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:52:37.440

这可能会回答您的问题：

> 重写规则 ^/([^-]*)$ /$1.php

它适用于根目录。

> RewriteRule ^catalog/([^-]*)$ catalog/$1.php

或者您可以编写自动脚本：

> 重写规则 ^/([^-] *)/([^-]* )$ /$1/$2.php

但这是针对“httpd.conf”文件的。

其中： ([^-]*) 表示变量；$1, $2 表示转换为变量即

www.verity.com/foo/bar => verity.com/foo/bar.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T22:24:59.220

改用这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(([A-Za-z0-9\-]+/)*[A-Za-z0-9\-]+)?$ $1.php 
```

通过这样做，您将能够调用 example.com/abc.php 作为 example.com/abc

# html - 当按钮处于“活动状态”时，我想让所有图像都成为“活动”的图片

> ID：11012905
> 
> 赞同：0
> 
> 时间：2012-06-13T10:24:48.653
> 
> 标签：html, css

我创建了一个由三部分组成的灵活按钮。
我用一张照片做了三个部分。我认为它被称为“精灵”什么的

这是CSS。

```
.commonButtonLeft, .commonButtonContent, .commonButtonRight
{
    background-image:url(img/commonbutton.png);
}

.commonButtonLeft
{
    float:left;
    height:40px;
    background-repeat:no-repeat;
    background-position:left;
    width:14px;
}

.commonButtonContent
{
    float:left;
    height:40px;
    background-repeat:no-repeat;
    background-position:center;
    text-align:center;
}

.commonButtonRight
{
    height:40px;
    background-repeat:no-repeat;
    background-position:right;
    width:14px;
    float:left;
} 
```

现在我为单击的按钮创建了另一张图片“commonbutton_onclick.png”。
我添加了以下课程。

```
.commonButtonLeft:active, .commonButtonContent:active, .commonButtonRight:active
{
    background-image:url(img/commonbutton_onclick.png);
} 
```

效果不好。
当我单击区域“.commonButtonContent”时，该区域仅成为活动图片。
我想让所有类都成为“commonbutton_onclick.png”。
顺便说一句，在这种情况下我不能使用 css3。
请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:32:35.013

首先，如果项目是 div，你需要使用`:hover`，而不是`:active`。

也许是单个 div 中的整个按钮（commonButton 类）。这样你就可以做这样的事情。当容器悬停在任何地方时，这将导致所有 3 个 div 发生变化，而不是针对单个部分的悬停。

这是一个[JSFiddle](http://jsfiddle.net/kcv3h/2/)来演示。

```
.commonButton .commonButtonLeft
{
    ...
}
.commonButton .commonButtonRight
{
    ...
}
.commonButton .commonButtonContent
{
    ...
}

.commonButton:hover .commonButtonLeft
{
    ...
}
.commonButton:hover .commonButtonRight
{
    ...
}
.commonButton:hover .commonButtonContent
{
    ...
} 
```

# android - 如何在另一个活动中使用一个活动？

> ID：11012911
> 
> 赞同：2
> 
> 时间：2012-06-13T10:25:25.750
> 
> 标签：android, android-layout, android-intent

只是我使用[Chart Engine Android](http://www.achartengine.org/index.html)创建了图表 ，我使用了数据库中的数据来使用图表的值。现在我有一项活动，主要用于显示带有左侧菜单选项的图表。因此，每当我调用图表活动时，它都会单独显示自己的活动。我想使用左侧菜单选项将该图表活动嵌入到我的主要活动中。可能吗？我正在使用 android 4.0 如何解决这个任务？请朋友们帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:27:57.823

听起来您的应用程序将受益于使用[Fragments](http://developer.android.com/training/basics/fragments/index.html)开发人员网站有一些您应该阅读的非常好的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:30:24.773

您不能在 Android 中将 Activity 嵌入到另一个 Activity 中，因为 Activity 是独立的对象。

从 android 3.0 开始，您可以使用 Fragments，它们是 Activities 子元素，您可以以多种不同的方式组合它们。例如，让您的 Activity 使用一个左侧片段来显示项目列表，并使用右侧片段来显示所选项目的详细信息。

您应该查看[Fragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)文档以在您的应用程序中实现这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T10:39:46.220

试试活动组。 [http://developer.android.com/reference/android/app/ActivityGroup.html](http://developer.android.com/reference/android/app/ActivityGroup.html)

# ios - 更新我的苹果开发者计划后，我什么时候可以添加新设备

> ID：11012913
> 
> 赞同：1
> 
> 时间：2012-06-13T10:25:29.187
> 
> 标签：ios

我已达到可添加到我的开发者帐户的最大设备数（100 台设备）。现在我迫切需要添加一个新设备。我的开发者计划将在下个月到期。我知道我们可以在实际到期日期前 60 天续订。如果我今天更新我的开发者帐户。我能有机会添加新设备吗？我知道在添加新设备之前我必须删除所有不需要的设备。我的主要问题是“**我是否有机会在更新我的开发者计划后立即添加新设备**”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T07:56:12.817

你可以在这里找到信息：

[https://developer.apple.com/support/ios/program-renewals.html](https://developer.apple.com/support/ios/program-renewals.html)

那里说：

> **续订会员资格后，我可以重置已分配用于测试和临时分发的设备吗？**
> 
> 是的。每个会员年度最多可以分配 100 台设备进行测试和临时分发。在新会员年度开始时，团队代理和管理员可以移除设备并将其开发团队的可用设备数量恢复到 100 台设备。

因此，您也可以在续订会员资格之前移除设备，但在您续订会员资格之前，它们仍会计入 100 台设备的限制。您还可以在这里找到：

[https://devforums.apple.com/message/658872#658872](https://devforums.apple.com/message/658872#658872)

> 请注意，在您每年续订帐户之前，您从该列表中删除的任何设备仍将计入设备限制。

因此，关于您的问题：在续订会员资格之前（即直到以前的会员资格结束的那一天），似乎不可能添加新设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:29:06.390

与 2012 年第一季度一样，Apple 允许开发人员移除未使用的开发设备。但是，最大设备的配额仍然是 100。

另一方面，如果您认为 100 台设备不足以满足您的项目/公司的需求，您可以邮寄给 Apple 以免费增加额外配额。我目前有 120 个设备配额。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T14:29:47.257

等了一个月后，我今天重置了所有设备。

我将分享并清除我为重置设备所做的工作。

1.  我的开发者会员年是从 4 月 1 日开始。
2.  我在一个月前更新了我的会员资格，但没有收到重置设备的消息。
3.  今天（太平洋时间 4 月 1 日凌晨 3 点）我收到了重置设备的弹出窗口，并且我已经重置了所有未使用的设备。
4.  如果有人对重置设备选项有任何疑问。我会回答它，并确保它会对您有所帮助。

谢谢，VJ

# adfs2.0 - 使用带有 Live Id 的 ADFS 2 作为声明提供程序

> ID：11012918
> 
> 赞同：3
> 
> 时间：2012-06-13T10:25:47.097
> 
> 标签：adfs2.0, windows-live-id, liveid

有没有人成功地将 ADFS2 配置为使用 Live Id（或 Google、Yahoo 等）作为声明提供程序，如果是的话，您从哪里获得配置说明（请分享它们）我以前曾设法在 Azure 中使用 ACS连接到 Live Id 和 ADFS，但想将 ADFS 用作“HUB”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:18:42.477

AD FS 2.0 本身*不允许*针对自定义身份验证存储进行身份验证：它只能对 Active Directory 帐户进行身份验证。（此时请参阅[我的这个答案以](https://stackoverflow.com/questions/4313512/can-i-use-adfs-2-0-to-authenticate-certain-users-against-sql-server/4938662#4938662)获取官方文档。）

[在对另一个 StackOverflow 问题的回答](https://stackoverflow.com/questions/2827298/does-adfs2-0-provide-custom-authentication-stores/3064173#3064173)中提出了一个解决方案，尽管措辞有点误导。如果您阅读[实际的博客文章](http://blogs.msdn.com/b/card/archive/2010/01/27/customizing-the-ad-fs-2-0-sign-in-web-pages.aspx)，您会发现他们添加了额外的 STS。AD FS 2.0 对该其他 STS 具有“声明提供者信任”，并重定向到它（如果“主域发现”设置正确）。然后，其他 STS 以它喜欢的任何方式执行身份验证（例如，使用 Google 或 Live 帐户），将令牌发送回 AD FS，然后运行其声明规则。

因此，在该解决方案中，不是 AD FS 2.0针对替代存储进行*身份验证，而是**重定向到 STS，后者*针对该存储进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:35:37.527

这可以通过与 ADFS 联合的自定义 STS 实现。

这个想法是构建一个 STS，它本身使用 OAuth2 来验证用户，然后（可选）执行自己的 Active Directory 查询以找到具有相同电子邮件地址的用户并从 AD 读取角色。然后自定义 Sts 将所有声明返回给您的应用程序。

正如 Marnix 指出的那样，在 adfs 页面而不是身份提供者页面上提供凭证的混合方法是可能的。这相当困难，因为它涉及在您的 sts 上设置 wstrustfeb2005 端点。我有一个关于如何做到这一点的六部分教程：http: [//netpl.blogspot.com/2011/08/adfs-20-quest-for-customizing-adfs-sign.html](http://netpl.blogspot.com/2011/08/adfs-20-quest-for-customizing-adfs-sign.html)

尽管如此，后一种方法要困难得多，而暴露与 adfs 联合的被动 sts 不会花费您很长时间。

# ant - 仅在文件更改时运行 ant 任务

> ID：11012923
> 
> 赞同：2
> 
> 时间：2012-06-13T10:26:03.773
> 
> 标签：ant

在 Ant 中，我试图完成一个简单的任务：如果修改了几个文件，则应该运行编译器。我见过很多使用 OutOfDate、UpToDate 和 Modified 的解决方案。我不想使用 OutOfDate 和 UpToDate，因为如果文件在同一天被修改，我将无法使用该任务。我可以使用修改，但无法从修饰任务调用另一个任务 - 我的编译器任务。除了这些还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T15:35:51.803

将`<uptodate>`以下内容`<antcall>`与条件一起使用`<target>`将为您提供所需的内容：

```
<project name="ant-uptodate" default="run-tests">
    <tstamp>
        <format property="ten.seconds.ago" offset="-10" unit="second" 
            pattern="MM/dd/yyyy hh:mm aa"/>
    </tstamp>

    <target name="uptodate-test">
        <uptodate property="build.notRequired" targetfile="target-file.txt">
            <srcfiles dir= "." includes="source-file.txt"/>
        </uptodate>

        <antcall target="do-compiler-conditionally"/>
    </target>

    <target name="do-compiler-conditionally" unless="build.notRequired">
        <echo>Call compiler here.</echo>
    </target>

    <target name="source-older-than-target-test">
        <touch file="source-file.txt" datetime="${ten.seconds.ago}"/>
        <touch file="target-file.txt" datetime="now"/>
        <antcall target="uptodate-test"/>
    </target>

    <target name="source-newer-than-target-test">
        <touch file="target-file.txt" datetime="${ten.seconds.ago}"/>
        <touch file="source-file.txt" datetime="now"/>
        <antcall target="uptodate-test"/>
    </target>

    <target name="run-tests" 
        depends="source-older-than-target-test,source-newer-than-target-test"/>
</project> 
```

# sql - 将一列求和到某一行（使用 GROUP BY 和 OVER）？

> ID：11012924
> 
> 赞同：1
> 
> 时间：2012-06-13T10:26:14.103
> 
> 标签：sql, sql-server

我有一张表格，列出了不同活动的持续时间。看起来像

```
id duration  
1  15  
2  30    
3  30  
4  45  
5  30 
```

...ETC

我想总结这些活动

```
for (lastActivity=1 to 5)
  SELECT id, SUM(duration) FROM durations
  WHERE id<=lastActivity 
```

产生类似的输出

```
id endtime  
1  15
2  45
3  75  
4  120  
5  150 
```

其中每一行将活动的持续时间相加，直到其在列表中的位置。

这似乎是一项容易的任务（并且可能是），但我无法弄清楚 sql 应该如何产生这样的输出。我曾尝试将 GROUP BY 与 OVER 子句一起使用，但也许有更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:31:04.007

```
you can use running total 
```

检查这篇文章

[在 sqlserver stackoverflow 中运行总计](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:38:10.293

```
SELECT t.id, 
       t.duration, 
       rt.runningTotal 
FROM   mytable t 
       CROSS apply (SELECT Sum(duration) AS runningTotal 
                    FROM   emp 
                    WHERE  id <= t.id) AS rt 
ORDER  BY t.id 
```

该`APPLY`运算符允许您为查询的外部表表达式返回的每一行调用表值函数。表值函数作为右输入，外部表表达式作为左输入。对来自左输入的每一行评估右输入，并将生成的行组合起来作为最终输出。APPLY 运算符生成的列列表是左侧输入中的一组列，后跟右侧输入返回的列列表。

注意：要使用`APPLY`，数据库兼容级别必须至少为 90。这是在 sql server 2005 中引入的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:38:36.287

这将根据您的实际表的大小而降低，但这应该可以解决问题：可以在[此处找到一些有趣的阅读](http://www.sqlservercentral.com/articles/T-SQL/68467/)

```
SELECT 1 as id,  15    as num into #test
UNION ALL SELECT 2,  30     
UNION ALL SELECT 3,  30   
UNION ALL SELECT 4,  45   
UNION ALL SELECT 5,  30  

select 
t1.id
,MAX(t1.num) as id_num
,SUM(t2.num) as running_total
from #test t1
LEFT OUTER JOIN #test t2 on t2.id <= t1.id
GROUP BY
t1.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:50:24.787

试试这个 ：

```
select d2.ID,sum(d1.duration) 
from durations d1,durations d2
where d1.id<=d2.id
group by d2.id 
```

# c# - jQuery WebMethod 解析错误

> ID：11012931
> 
> 赞同：0
> 
> 时间：2012-06-13T10:26:39.433
> 
> 标签：c#, jquery, .net

我似乎在从 jQuery 调用 WebMethod 时遇到问题，我使用这篇文章作为我的起点：

[http://www.misfitgeek.com/2011/05/calling-web-service-page-methods-with-jquery/](http://www.misfitgeek.com/2011/05/calling-web-service-page-methods-with-jquery/)

**JS**

```
 function WebMethod(fn, paramArray, successFn, errorFn) 
     {
        //----------------------------------------------------------------------+
        // Create list of parameters in the form:                               |
        // {'paramName1':'paramValue1','paramName2':'paramValue2'}              |
        //----------------------------------------------------------------------+
        var paramList = '';
        if (paramArray.length > 0) {
            for (var i = 0; i < paramArray.length; i += 2) {
                if (paramList.length > 0) paramList += ',';
                paramList += '"' + paramArray[i] + '":"' + paramArray[i + 1] + '"';
            }
        }

        paramList = '{' + paramList + '}';

        //----------------------------------------------------------------------+
        // Call the WEB method                                                  |
        //----------------------------------------------------------------------+
        $.ajax({
            type: 'POST',
            url: 'ContractView.aspx' + '/' + fn,
            contentType: 'application/json; charset=utf-8',
            data: paramList,
            dataType: 'json',
            success: successFn,
            error: errorFn
        });
    }; 
```

我正在像这样传递这个方法：

```
 $(".editableField").keydown(function(e) {

                    WebMethod('PriceContract',
                            [
                             'AQ', aq.val(),
                             'SOQ', soq.val()
                            ], updateTextFields, failed);

        }); 
```

**C#**（注意这些是测试方法，忽略逻辑..）

```
 [WebMethod]
        public static ContractsListPricing PriceContract(string AQ, string SOQ)
        {
            ContractsListPricing clp = new ContractsListPricing();

           // clp.Aq = nAQ * 2;
           // clp.Soq = nSOQ * 2;

            return clp;
        } 
```

在调试 JS 时， paramList 似乎是正确的 JSON（或者我相信）：

> {"AQ":"140000","SOQ":"1169"}

这会导致解析错误，我不确定为什么。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:14:03.053

哦，不，请永远不要像以前那样使用字符串操作来手动构建 JSON。这绝对是可怕的。看看[这篇文章](http://encosia.com/using-complex-types-to-make-calling-services-less-complex/)。

这是正确的方法：

```
function WebMethod(fn, paramArray, successFn, errorFn) {
    var paramList = { };
    if (paramArray.length > 0) {
        for (var i = 0; i < paramArray.length; i += 2) {
            paramList[paramArray[i]] = paramArray[i + 1];
        }
    }

    $.ajax({
        type: 'POST',
        url: 'ContractView.aspx' + '/' + fn,
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify(paramList),
        dataType: 'json',
        success: successFn,
        error: errorFn
    });
} 
```

Notice the usage of the `JSON.stringify` method to properly JSON encode the `paramList` object. This method is natively built into modern browsers. If you need to support legacy browsers you could include the [json2.js](https://github.com/douglascrockford/JSON-js) script to your page.

# jquery - 我怎样才能解绑和重新绑定 jqzoom

> ID：11012939
> 
> 赞同：2
> 
> 时间：2012-06-13T10:27:03.960
> 
> 标签：jquery

我试过取消绑定并重新绑定 jqzoom，如下所示：

```
$('.jqzoom').unbind(); 

$('.jqzoom').jqzoom(options); 
```

但是什么都没发生。任何人都可以帮助我如何做到这一点？

链接： http: [//www.mind-projects.it/projects/jqzoom/](http://www.mind-projects.it/projects/jqzoom/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:31:34.633

尝试

```
$.jqzoom.disable('.jqzoom') 
```

接着

```
$.jqzoom.enable('.jqzoom') 
```

正如`jquery.jqzoom-core.js`文件的解压缩源代码中所建议的那样，行`686`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T21:58:21.017

jQzoom 没有办法做到这一点，但这没关系，因为你总是可以自己做到这一点。

与任何其他 jQuery 插件一样，该过程是相同的。所有 jquery 插件基本上都做同样的事情。首先，他们将一些数据与元素相关联。假设您有这样的图像。

```
<a class="zoom_link"><img id="product_thumb_image" src="...link to image..." /></a> 
```

并且您也有小图像，您可以单击并更改大图像。例如，您有产品的大图像和同一产品的其他一些不同角度的小图像。这些是小图像。

```
<div id="small_images">

<a href="javascript:void(0)" rel="{gallery:'gal402', smallimage:'i1.jpg',  largeimage:'l1.jpg'}">
<img src="i1.jpg" />
</a>
<a href="javascript:void(0)" rel="{gallery:'gal402', smallimage:'i2.jpg',  largeimage:'l2.jpg'}">
<img src="i2.jpg" />
</a>

</div> 
```

既然你这样调用 jqzoom

```
jQuery('.zoom_link').jqzoom({'preloadImages':true, zoomType: 'innerzoom' }); 
```

然后你需要像这样删除数据：

```
jQuery('.zoom_link').removeData('jqzoom') 
```

但这还不够，因为您仍然有绑定到需要删除的元素的事件侦听器，否则您将无法在同一元素上重新启用 jqzoom。以下是您的操作方法 ***（不带参数的 unbind() 会删除所有事件侦听器。）***

```
jQuery('.zoom_link').unbind();
/* These are the elements that jqzoom created */
jQuery('.zoomPad').unbind();
jQuery('.zoomPup').unbind();

/* For small images */
jQuery('#small_images').find('img').unbind();
jQuery('#small_images').find('a').unbind(); 
```

最后，我们需要通过在其中添加一些其他元素来恢复 jqzoom 更改的原始元素内容。

```
i = jQuery('.product_thumb_image').clone();
jQuery('.zoom_link').html( i.prop('outerHTML') ); 
```

上面的代码所做的是克隆里面的图像，并用我们调用 jqzoom 之前的图像替换“ **zoom_link ”元素的全部内容。**在此之后，您可以再次调用 jqzoom 并且它将起作用。

```
jQuery('.zoom_link').jqzoom({'preloadImages':true, zoomType: 'innerzoom' }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:05:20.953

```
$('.jqzoom').removeData('jqzoom'); 
```

为我工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T17:04:37.583

`removeData`如果您在使用或`disable`禁用 jqzoom时遇到问题，您可以试试这个：

```
$('.jqzoom').data('jqzoom').disable(); 
```

事实上，在 jquery.jqzoom-core.js 的第 686 行下，你会发现这两个方法：

```
 disable: function (el) {
        var api = $(el).data('jqzoom');
        api.disable();
        return false;
    },
    enable: function (el) {
        var api = $(el).data('jqzoom');
        api.enable();
        return false;
    }, 
```

希望对您有所帮助！

# java - 如何从 http 响应字段 Liferay-Portal、服务器中删除 http 标头？

> ID：11012942
> 
> 赞同：3
> 
> 时间：2012-06-13T10:27:08.933
> 
> 标签：java, jsp, servlets, liferay, portlet

与 liferay 合作时，它总是说门户作为回应：

```
Liferay-Portal:Liferay Portal Community Edition 6.1.0 CE (Paton / Build 6100 / January 6, 2012)
Server:GlassFish Server Open Source Edition 3.1.1 
```

我怎样才能删除这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:32:05.520

无法删除添加到`HttpServletResponse`对象的标头。处理这个问题的唯一方法是使用`Wrapping the HttpServletResponse`对象`Filter`并吃掉你想忽略的标题。

这是要使用的示例代码，

```
public class EatHeadersFilters implements Filter
{
   private List<String> headers;
   public void init(FilterConfig filterConfig) throws ServletException
   {
      String headersString = filterConfig.getInitParameter("headers");
      String[] strings = headersString.split(",");
      headers = Arrays.asList(strings);
   }

   public void doFilter(ServletRequest request, ServletResponse response,
         FilterChain filterChain) throws IOException, ServletException
   {
       filterChain.doFilter(request, 
           new HttpServletResponseWrapper((HttpServletResponse) response){
              public void addHeader(String headerName, String headerValue)
              {
                  if(!headers.contains(headerName)){
                   super.addHeader(headerName, headerValue);
                  } else {
                   //eat the header
                  }
              }
         });
    }

   public void destroy()
   {
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:23:18.720

Ramesh 是正确的，但这是纯粹的 Servlet 实现。请检查接口`com.liferay.portal.kernel.servlet.WrapHttpServletResponseFilter`。它是由相同的目的提供的。它将在 Portlet 上下文中工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T17:20:18.720

您可以在 portal-ext.properties 中使用以下键来仅显示应用名称和版本（例如社区）

```
http.header.version.verbosity=partial 
```

那不应该显示特定版本。

原始资源位于[http://arunkumarsrm.blogspot.com/2012/11/liferay-611-ga2-application-security.html](http://arunkumarsrm.blogspot.com/2012/11/liferay-611-ga2-application-security.html)

您也可以进一步查看以下票证以熟悉提供的补丁（我没有尝试过）

[http://issues.liferay.com/browse/LPS-2748](http://issues.liferay.com/browse/LPS-2748)

[http://issues.liferay.com/browse/LPS-9011](http://issues.liferay.com/browse/LPS-9011)

* *UPD：**实际上您可以使用以下选项完全禁用服务器信息：

```
# portal-ext.properties:
http.header.version.verbosity=Liferay Portal Community Edition 
```

并遵循 /tomcat-7.0.27/conf/server.xml 中的配置

```
<Connector
  URIEncoding="UTF-8"
  connectionTimeout="20000"
  port="8080"
  protocol="HTTP/1.1"
  redirectPort="8443"
  server="My Server!"
 /> 
```

资源：[http ://tech-annex.blogspot.com/2013/01/hidding-server-signaturebanner.html](http://tech-annex.blogspot.com/2013/01/hidding-server-signaturebanner.html)

# android - 为什么在以前不需要时开始排除我自己的应用程序的资源？

> ID：11012943
> 
> 赞同：7
> 
> 时间：2012-06-13T10:27:13.603
> 
> 标签：android, admob, adt, proguard

我最近遇到了[一个令人费解的问题](https://stackoverflow.com/q/11006305/576267)，没有任何解释，但我[设法解决了](https://stackoverflow.com/a/11008325/576267)。

该解决方案本身给我带来了一个问题，因为*我不明白它*：它迫使我指示 Proguard 完全忽略有关我自己的应用程序包的所有**警告**。

```
-dontwarn com.bta.** 
```

除了不得不忽略关于我的开发中最容易出错的代码（最常更改的代码）的警告这一令人不安的问题之外，我还对两个问题感到困惑：

1.  为什么这个需求突然出现了？（我以前从来不需要这样做。）
2.  为什么我开发的其他项目/应用程序不需要这样做？

我相信我引入的一些新代码或库导致了这种情况（AdMob？），但对此有何解释？为什么第三方库会强制我关闭有关*我自己的*应用程序资源的警告？

**完全关闭关于***我自己的*应用程序包的警告（就像我所做的那样）有什么副作用？

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T16:19:18.447

回答我自己的问题：

在浪费了太多时间来调试应该可以节省我时间的工具之后，我发现了问题的根源。[这是 Android SDK 工具中的一个错误](http://code.google.com/p/android/issues/detail?id=27940#c25)。它被记录为已在 r17 中解决，但我使用的是今天最新的（2012 年 6 月 18 日），**但尚未解决！**（见评论 24）。[评论 25](http://code.google.com/p/android/issues/detail?id=27940#c25)还描述了允许我现在进行实际开发的解决方法。

错误是复杂系统中的事实。但是，Proguard 和向 Proguard 提供输入的构建工具都不能提供任何有用的错误消息（实际上它们完全相反），这表明[谷歌推荐](http://developer.android.com/sdk/eclipse-adt.html#installing)的 Android 开发工具的“方法论”存在某些问题。**

# android - Android：适用于 HTC 智能手机的 ADB 驱动程序

> ID：11012944
> 
> 赞同：26
> 
> 时间：2012-06-13T10:27:18.317
> 
> 标签：android, adb, driver

我一直在调试具有 ADB 驱动程序的 HTC Desire。现在我被迫在 HTC 智能手机上调试，但我在任何地方都找不到驱动程序。我希望使用的标准 HTC 驱动程序（运行 Android 2.2）没有被识别为适用于 HTC 智能手机（运行 Android ICS）的正确驱动程序。

我必须通过 Eclipse Helios 在 HTC 智能手机上启用启动和 USB 调试的其他选项是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-13T10:29:23.557

使用[HTCSync 版本：3.3.21](http://dl4.htc.com/managed-assets/support/software/htc-sync/htc_sync_setup_3.3.21.exe)。它也有USB驱动程序。我安装了它，之后我可以调试我的应用程序。[在这里](http://www.htc.com/au/support/content.aspx?id=185626)阅读它的帮助。

享受！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-09T18:17:36.943

HTC Sync 是一个该死的过时软件。

最新的裸驱动程序似乎维护在[这个 XDA 线程](http://forum.xda-developers.com/showthread.php?t=2191279)中。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-11T01:00:54.150

您可以强制 Windows 使用标准的 Google ADB 驱动程序，方法是选择“浏览我的计算机以查找驱动程序软件”，浏览到 Google USB 驱动程序文件夹，然后“让我从计算机上的驱动程序列表中选择”。这应该让您选择“Android ADB Interface”作为非 Google 手机的驱动程序。

安装后，它可以正常使用 ADB 和 Eclipse 开发。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-11-25T11:30:26.427

**在没有**HTC Sync 臃肿软件的情况下，您可以这样做：

1.  [从http://www.htc.com/au/support/content.aspx?id=6196](http://www.htc.com/au/support/content.aspx?id=6196)下载 HTC 同步

2.  开始设置

3.  安装程序将报告需要先安装一些其他组件。

    如果您查看列表，您会发现驱动程序是其中的一部分。

4.  按“确定”，这将安装驱动程序，一些 DOS 框会闪烁。

5.  实际的 HTC 同步设置开始。**中止安装**。

6.  玩得开心！我不需要重新启动。我什至不必重新插入设备。

在 Windows 7 64 位上测试。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-24T05:59:35.740

[我从这里](http://developer.android.com/sdk/win-usb.html)安装了 Google Windows USB ADB 驱动程序

按照 Nook Simple Touch 的步骤进行操作。那个程序，发现是[here](http://forum.xda-developers.com/wiki/BN_Nook_Simple_Touch/Installing_ADB)

您是否将以下行粘贴到`adt-bundle-windows-x86\sdk\extras\google\usb_driver\android_winusb.inf`文件中的两个位置：

```
; HTC One X
%SingleAdbInterface% = USB_Install, USB\VID_0BB4&PID_0CED
%CompositeAdbInterface% = USB_Install, USB\VID_0BB4&PID_0CED&MI_01 
```

然后我不得不杀死 ADB 服务器并重新启动它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T11:01:33.497

为了减少一个混乱。

如上所述，对于 Windows 7 64 位，我使用了以下链接： [http ://androiddrivers.net/htc-android-drivers/download-htc-one-x-64-bit-windows-drivers/](http://androiddrivers.net/htc-android-drivers/download-htc-one-x-64-bit-windows-drivers/)

虽然当您提取文件时，驱动程序包含在 Vista_x64 文件夹中。这很令人困惑，但它在 Windows 7 下安装得非常好。我现在可以轻松地在 HTC-One X 上调试我的应用程序。

安装驱动程序的步骤： 1\. 右键单击​​计算机 -> 属性 2\. 单击左侧窗格中的设备管理器 3\. 在 USB 设备或 Android USB 设备下找到您的 HTC 设备。4\. 右键单击​​ -> 更新驱动程序 5\. 找到包含驱动程序的解压目录，即“HTC_Driver_64\HTCDriver\Driver Files\Vista_x64” 6\. 单击下一步并安装驱动程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-15T08:39:27.113

对于那些不想安装 HTC bloatware 的人，我从包中提取了 USB 驱动程序并将其托管在我的网站上，我希望它可以帮助任何可能仍在苦苦挣扎的人。

[Windows 7/8 HTC 安卓 USB 驱动程序](http://www.hassang.com/htc-usb-driver-for-windows-8-and-possibly-windows-7)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-27T11:58:14.660

虽然当您提取文件时，驱动程序包含在 Vista_x64 文件夹中。这很令人困惑，但它在 Windows 7 下安装得非常好。我现在可以轻松地在 HTC-One X 上调试我的应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-11T21:51:57.883

我无法在任何地方找到仅供下载的驱动程序。我连接了设备，它要求安装 HTC Sync Manager，它安装了驱动程序。但是，同步管理器与 ADB 发生冲突——它出于某种原因一直将其关闭。所以，我卸载了同步管理器。这让司机们留在原地。重新连接设备后，adb 工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-23T05:50:23.890

在将 HTC 手机与 Eclipse 连接时遇到问题的人。他们必须从 HTC 网站安装 HTC-SYNC。htc sync 也包含了 USB 调试驱动。

这是链接：[http ://www.htc.com/au/support/content.aspx?id=6196](http://www.htc.com/au/support/content.aspx?id=6196)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-17T07:21:05.950

我已经安装了 HTC 同步管理器，它可以识别手机。

[http://www.htc.com/us/support/software/htc-sync-manager.aspx](http://www.htc.com/us/support/software/htc-sync-manager.aspx)

# python - emencia.django.newsletter django 1.4 的日期时间问题

> ID：11012945
> 
> 赞同：0
> 
> 时间：2012-06-13T10:27:20.200
> 
> 标签：python, django, timezone

我正在使用`emencia.django.newsletter`. 当我运行“python manage.py send_newsletter”时出现此错误

`if self.newsletter.sending_date <= datetime.now() and \ TypeError: can't compare offset-naive and offset-aware datetimes`

这就是错误的来源：

```
def can_send(self):

    """Check if the newsletter can be sent"""
if self.test:
    return True

if self.newsletter.sending_date <= datetime.now() and\
   (self.newsletter.status == Newsletter.WAITING or\
    self.newsletter.status == Newsletter.SENDING):
    return True

return False 
```

我使用 Django 1.4

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:51:14.657

您的`sending_date`价值是*时区意识*，但`datetime.now()`时*区天真*。正如错误消息所说，您无法比较它们。

答案是`now`在进行比较之前转换为时区感知日期时间。

```
import datetime
from django.utils.timezone import utc

now = datetime.datetime.utcnow().replace(tzinfo=utc)
if self.newsletter.sending_date <= now and \
    ... 
```

有关更多信息，请参阅 Django 文档关于[naive and aware datetime objects](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#naive-and-aware-datetime-objects)。

# mysql - MySQL 记录的计数频率

> ID：11012957
> 
> 赞同：2
> 
> 时间：2012-06-13T10:28:35.163
> 
> 标签：mysql, sql

桌子：

```
laterecords
-----------
studentid - varchar
latetime - datetime
reason - varchar

students
--------
studentid - varchar -- Primary
class - varchar 
```

我想做一个查询以显示以下内容：

```
Sample Report

Class      No of Students late  1 times  2 times   3 times  4 times    5 & more 
Class A        3                  1       0         2         0         0
Class B        1                  0       1         0         0         0 
```

我下面的查询可以显示第一列结果：

```
SELECT count(Distinct studentid), class FROM laterecords, students
WHERE students.studenid=laterecords.studentid AND
GROUP BY class 
```

我只能想到获取每一列的结果并将它们存储到 php 数组中。然后将它们回显到 HTML 中的表格中。

有没有更好的 SQL 方法来执行上述操作？mysql查询怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:32:56.680

试试这个：

```
SELECT
    a.class,
    COUNT(b.studentid) AS 'No of Students late',
    SUM(b.onetime) AS '1 times',
    SUM(b.twotime) AS '2 times',
    SUM(b.threetime) AS '3 times',
    SUM(b.fourtime) AS '4 times',
    SUM(b.fiveormore) AS '5 & more'
FROM
    students a
LEFT JOIN
    (
        SELECT
            aa.studentid,
            IF(COUNT(*) = 1, 1, 0) AS onetime,
            IF(COUNT(*) = 2, 1, 0) AS twotime,
            IF(COUNT(*) = 3, 1, 0) AS threetime,
            IF(COUNT(*) = 4, 1, 0) AS fourtime,
            IF(COUNT(*) >= 5, 1, 0) AS fiveormore
        FROM 
            students aa
        INNER JOIN
            laterecords bb ON aa.studentid = bb.studentid
        GROUP BY 
            aa.studentid
    ) b ON a.studentid = b.studentid
GROUP BY
    a.class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:54:23.687

怎么样 ：

```
SELECT numlates, `class`, count(numlates)
FROM
  (SELECT count(laterecords.studentid) AS numlates, `class`, laterecords.studentid
   FROM laterecords,
        students
   WHERE students.studentid=laterecords.studentid
   GROUP BY laterecords.studentid, `class`) aliastbl
GROUP BY `class`, numlates 
```

# windows - 在 shell 脚本中用 Progra~1 替换 Program Files

> ID：11012963
> 
> 赞同：0
> 
> 时间：2012-06-13T10:28:52.677
> 
> 标签：windows, windows-shell

我想要一个脚本/命令，它将所有出现的“程序文件”替换为没有空格 Progra~1 win XP 上的 windows shell 脚本

XP shell 中有没有办法做到这一点？我一直在搜索，找不到任何示例 sudo CURRENT_PATH=%PATH% NEW_PATH= replace all "Program Files" with Progra~1

然后我将使用 setx 设置新路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:08:15.520

您可以在脚本中使用下面的简单 dos 命令

设置 p = %PATH% 设置 CLEAN_PATH=%p:Program Files=Proga~1% echo CLEAN_PATH

# html - CSS中的文件夹结构

> ID：11012968
> 
> 赞同：4
> 
> 时间：2012-06-13T10:29:10.780
> 
> 标签：html, css, directory

任何人都可以请帮忙。

我正在刷新我对 HTML 和 CSS 的了解（自从我使用这些语言以来已经 4 年了），并且在我拥有的文件夹结构中引用图像时遇到了麻烦。随附的图像显示了我的项目的文件夹结构。[![在此处输入图像描述](../Images/53bd1e931f484174f3945a805e9da0ae.png)](https://i.stack.imgur.com/xtWjf.jpg)

我想要做的是从我的 CSS 文件夹中的 index.css 文件中，使用以下代码行从我的 Images 文件夹中访问图像 Logo 1.png 以用作背景。

```
body 
{
    background-color: #FFFEF0;
    background-image: url(./Images/Logo 1.png);
} 
```

但是，这似乎不起作用，我看不到图像。我也尝试过../Images/Logo 1.png，但这也不起作用。从我的 index.html 中，我可以使用 ./Images/Logo 1.png 从 Images 文件夹中获取要显示的图像（注意 ../ vs ./）

我这样做是否正确？我在谷歌上做了一些关于引用相对路径的挖掘，但没有任何很好的例子。

谁能告诉我我哪里出了问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:31:29.460

如果您的 URL 包含空格，您应该真正将引用括在引号中，并将空格字符替换为`%20`：

```
background-image: url('../Images/Logo%201.png'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:33:07.760

添加 2 个点，在文件夹中上一层，所以如果你的图片在一个文件夹中，然后你的 css 在另一个文件夹中，你需要上一层，然后进入你的图像文件夹，例如：

```
background-image: url(../Images/Logo 1.png); 
```

您可能还会遇到在文件名中使用空格的问题，请尝试使用下划线 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:33:42.487

如果您在 css 中使用图像，则需要放置与 css 文件相关的源文件，所以如果您的结构如下：

```
index.html
css
  style.css
images
  background.jpg 
```

你的CSS应该是这样的：

```
background: url(../images/background.jpg); 
```

也不要在文件名中使用空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T10:33:53.070

1.  使用 .. 在目录中上一级
2.  引用 url（可选，但建议最好的跨浏览器支持）
3.  不要使用空格，请尝试使用下划线
4.  简化事物的好习惯：文件夹和文件小写，这样您就不必记住大小写

    背景图像：url（“../images/logo_1.png”）；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:39:18.843

两个问题，首先带有 url 的东西应该在这样的引号中

```
background-image: url("../Image/Logo 1.png"); 
```

其次，单点引用指向 css 文件所在的当前目录，因此当您使用“./Image/Logo 1.png”时，它会尝试在 CSS 文件夹中找到一个名为 image 的文件夹。您需要使用双点（“..”）在文件目录中上一级。这应该可以解决它，假设您的 html 正确包含 css 文件。

# data-structures - 创建结构的“数据”和“类型”有什么区别？

> ID：11012969
> 
> 赞同：5
> 
> 时间：2012-06-13T10:29:18.267
> 
> 标签：data-structures, types, abap

我找到了 2 个创建结构的示例。

这个有`TYPES`：

```
TYPES : BEGIN OF employee_information,
            name TYPE c LENGTH 20,
            surname TYPE c LENGTH 20,
            tel_no TYPE n LENGTH 12,
          END OF employee_information. 
```

而另一个`DATA`：

```
DATA : BEGIN OF employee_information,
            name TYPE c LENGTH 20,
            surname TYPE c LENGTH 20,
            tel_no TYPE n LENGTH 12,
          END OF employee_information. 
```

我阅读了 SAP 库中的文档主题“[语句类型和数据](https://help.sap.com/viewer/product/SAP_NETWEAVER_700/7.0.36/en-US?q=The%20Statements%20TYPES%20and%20DATA)”，但我不明白为什么我们使用这些不同的术语`TYPES`来`DATA`创建结构化数据类型。

你能解释一下区别吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T12:28:55.447

首先，创建 TYPE 是较新且推荐使用的方法。

当您创建一个数据时，假设是一个内部表；

```
DATA: BEGIN OF employee_information OCCURS 0,             "itab with header line
            name TYPE c LENGTH 20,
            surname TYPE c LENGTH 20,
            tel_no TYPE n LENGTH 12,
      END OF employee_information. 
```

您可以拥有带有标题行的内部表。但这是旧方法。

当你使用 TYPE 来声明一个内部表时，你可以同时使用它的标题和它的内容；

```
 TYPES: BEGIN OF t_employee_information,
            name TYPE c LENGTH 20,
            surname TYPE c LENGTH 20,
            tel_no TYPE n LENGTH 12,
  END OF t_employee_information.

  DATA: employee_information TYPE STANDARD TABLE OF t_employee_information INITIAL SIZE 0,      "itab
        employee_information TYPE t_employee_information.                    "work area (header line) 
```

例如：您可以使用此 TYPE 来创建任意数量的内部表，例如：

```
 DATA: employee_information_1 TYPE TABLE OF t_employee_information, "itab1
        employee_information_1 TYPE t_employee_information.          "work area1 (header line)
  DATA: employee_information_2 TYPE TABLE OF t_employee_information, "itab2
        employee_information_2 TYPE t_employee_information.          "work area2 (header line)
  DATA: employee_information_3 TYPE TABLE OF t_employee_information, "itab3
        employee_information_3 TYPE t_employee_information.          "work area3 (header line) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T12:31:45.247

该`TYPES`语句创建一个数据类型，它是用于创建数据对象的模板。
该`DATA`语句创建一个数据对象，它是数据类型的一个实例，并占用与其类型指定的内存空间一样多的内存空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:27:49.103

首先是您发布的这段代码肯定是错误的，您将类型开头为`employee_information`并以`personel_bilgileri`.

问题是第二个声明定义了`employee_information`具有结构的变量`name, surname and tel_no`。在第二种情况下，您定义一个 type `employee_information`。然后您可以定义这种结构化类型的变量，例如`DATA: l_str_employee_information TYPE`employee_information`。

# iphone - 阻止身体移动。iPhone 上的花栗鼠

> ID：11012970
> 
> 赞同：1
> 
> 时间：2012-06-13T10:29:20.360
> 
> 标签：iphone, ios, cocoa-touch, chipmunk

我有一个带有单个 cpShape 的 cpBody，它漂浮在我的场景中，与其他物体等碰撞。我怎样才能轻松地让这个身体停留在一个地方，并像一个静止的障碍物一样呆在一个地方，这样它就不再移动但仍然与其他身体发生碰撞。

当用户点击它时，我只想阻止身体移动。这就是我问的原因。我不是花栗鼠方面的专家，但我认为这一定很容易。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T19:26:17.390

使用公共 API 执行此操作的方式是从空间中移除身体和形状。创建一个与旧动态体具有相同位置/旋转的新静态体。使用 cpShapeSetBody() 将 body 更改为新的静态，然后将 shape 读取到空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:47:47.423

您可以调用`cpBodySetMass`INFINITY，并强制对象与`cpBodySleep`. 这就是静态对象在内部实现的方式（至少在质量方面）。

**编辑**

我不确定您是否需要`cpBodySleep`在此之后打电话，但我认为打电话没有什么坏处。

修改`cpBody.h`放在`#define CP_ALLOW_PRIVATE_ACCESS 1`开头。然后从`cpBody*`，访问`->node.idleTime`并将其设置为 INFINITY。

**编辑 2**

上述解决方案是一个可行的解决方案，但在 SE 实践方面不是很好。最好定义一个使对象成为静态或动态的函数，这样您就可以在不禁用整个对象的私有属性的情况下调用。

# android - 如何在没有 root 访问权限的情况下获取已安装应用程序的 APK？

> ID：11012976
> 
> 赞同：238
> 
> 时间：2012-06-13T10:29:36.713
> 
> 标签：android, root, apk

我正在尝试在没有 root 权限的情况下提取已安装的 Android 应用程序的 APK 文件。

我认为这是不可能的，因为非系统应用程序的所有 APK 文件都位于 /data/app 中，访问该文件夹需要 root 权限。然后我发现 Google Play 商店中有许多应用程序似乎可以访问 APK 文件，即使在非 root 设备上也是如此。

有人能告诉我这是怎么可能的吗？没有备份应用程序可以在没有root的情况下备份APK文件吗？

* * *

## 回答 #1

> 赞同：452
> 
> 时间：2012-06-13T10:42:13.647

无需root权限即可访问/data/app；该目录的权限是 rwxrwx--x。对目录具有执行权限意味着您可以访问它，但是缺少读取权限意味着您无法获得其内容的列表——因此，为了访问它，您必须知道您将要访问的文件的名称。Android 的包管理器会告诉你给定包的存储 apk 的名称。

要从命令行执行此操作，请使用`adb shell pm list packages`获取已安装包的列表并找到所需的包。

通过包名，我们可以使用`adb shell pm path your-package-name`.

并且知道完整的目录，我们终于可以使用`adb pull full/directory/of/the.apk`

感谢@tarn 指出在 Lollipop 下，apk 路径将是`/data/app/your-package-name-1/base.apk`

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-08-08T18:04:42.523

Android 将序列号附加到包名称以生成最终的 APK 文件名（这可能会因 Android OS 的版本而异）。以下命令序列适用于*非 root 设备*：

1.  获取所需包的 APK 文件的完整路径名。

    ```
    adb shell pm path com.example.someapp 
    ```

    这给出的输出为：`package:/data/app/com.example.someapp-2.apk`。

2.  将 APK 文件从 Android 设备拉到开发框中。

    ```
    adb pull /data/app/com.example.someapp-2.apk 
    ```

拉取成功后 APK 的位置会在你的 pc/laptop 上的 ../sdk/platform-tools/base.apk。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-04-22T14:37:41.317

您不需要 ROOT 权限即可获取已安装应用程序的列表。

您可以使用 android PackageManager 来完成。

下面是一个小代码片段。

```
final PackageManager pm = getPackageManager();
//get a list of installed apps.
List<ApplicationInfo> packages =  pm.getInstalledApplications(PackageManager.GET_META_DATA);

for (ApplicationInfo packageInfo : packages) {
    Log.d(TAG, "Installed package :" + packageInfo.packageName);
    Log.d(TAG, "Apk file path:" + packageInfo.sourceDir);
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-10-07T21:05:27.923

在 Nougat(7.0) Android 版本上运行`adb shell pm list packages`以列出设备上安装的软件包。然后运行`adb shell pm path your-package-name`显示apk的路径。使用 adb 将包复制到 Downloads 后`adb shell cp /data/app/com.test-1/base.apk /storage/emulated/0/Download`。然后通过运行将 apk 从 Downloads 拉到您的机器上`adb pull /storage/emulated/0/Download/base.apk`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-14T10:32:40.343

1.  检查已安装 apk 的列表（以下命令还列出了它的安装路径和包名称）。 **adb shell pm list packages -f**
2.  使用**adb pull /package_path/package name /path_in_pc** （包路径和包名可以从上面的命令1中得到。）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-03T12:43:42.653

当您安装了 Eclipse for Android 开发时：

*   将您的设备用作调试设备。在您的手机上：设置 > 应用程序 > 开发并启用 USB 调试，请参阅 [http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)
*   在 Eclipse 中，打开 DDMS 窗口：Window > Open Perspective > Other... > DDMS，参见[http://developer.android.com/tools/debugging/ddms.html](http://developer.android.com/tools/debugging/ddms.html)
*   如果您看不到您的设备，请尝试（重新）为您的设备安装 USB 驱动程序
*   在中间窗格中选择选项卡“文件资源管理器”并转到系统 > 应用程序
*   现在您可以选择一个或多个文件，然后单击顶部的“从设备中提取文件”图标（选项卡右侧）
*   选择目标文件夹 - tada！

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-01-08T16:55:10.123

我有一个`does not exist error`

这是我如何使它工作的：

```
adb shell pm list packages -f | findstr zalo

package:/data/app/com.zing.zalo-1/base.apk=com.zing.zalo

adb shell

mido:/ $ cp /data/app/com.zing.zalo-1/base.apk /sdcard/zalo.apk
mido:/ $ exit

adb pull /sdcard/zalo.apk Desktop

/sdcard/zalo.apk: 1 file pulled. 7.7 MB/s (41895394 bytes in 5.200s) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-14T10:54:30.867

**List PackageManager.getInstalledApplications()**将为您提供已安装应用程序的列表，ApplicationInfo.sourceDir 是 .apk 文件的路径。

```
// in oncreate
   PackageManager pm = getPackageManager(); 
   for (ApplicationInfo app : pm.getInstalledApplications(0)) {
 Log.d("PackageList", "package: " + app.packageName + ", sourceDir: " + app.sourceDir);
 }

//output is something like
D/PackageList(5010): package: com.example.xmlparse, sourceDir: /data/app   /com.example.xmlparse-2.apk
D/PackageList(5010): package: com.examples.android.calendar, sourceDir: /data/app/com.examples.android.calendar-2.apk
D/PackageList(5010): package: com.facebook.katana, sourceDir: /data/app/com.facebook.katana-1.apk
D/PackageList(5010): package: com.facebook.samples.profilepicture, sourceDir: /data/app/com.facebook.samples.profilepicture-1.apk
D/PackageList(5010): package: com.facebook.samples.sessionlogin, sourceDir: /data/app/com.facebook.samples.sessionlogin-1.apk
D/PackageList(5010): package: com.fitworld, sourceDir: /data/app/com.fitworld-2.apk
D/PackageList(5010): package: com.flipkart.android, sourceDir: /data/app/com.flipkart.android-1.apk
D/PackageList(5010): package: com.fmm.dm, sourceDir: /system/app/FmmDM.apk
D/PackageList(5010): package: com.fmm.ds, sourceDir: /system/app/FmmDS.apk 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-22T02:17:22.590

我找到了一种在非 root 设备中获取 APK 包名称的方法。它不是那么优雅，但一直有效。

**第 1 步**：在您的设备上，打开目标 APK

**第 2 步**：在 PC cmd 窗口中，键入以下命令：

```
 adb shell dumpsys activity a > dump.txt 
```

因为这个命令的输出很多，推荐重定向到一个文件。

**第 3 步**：使用任何编辑器打开此 dump.txt 文件。

对于 Android 4.4 之前的设备：
文件的开头将如下所示：

```
ACTIVITY MANAGER ACTIVITIES (dumpsys activity activities)  
  Main stack:  
  * TaskRecord{41aa9ed0 #4 A com.tencent.mm U 0}  
    numActivities=1 rootWasReset=true userId=0  
    affinity=com.tencent.mm  
    intent={act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10600000 cmp=com.tencent.mm/.ui.LauncherUI}  
    realActivity=com.tencent.mm/.ui.LauncherUI  
    askedCompatMode=false  
    lastThumbnail=null lastDescription=null  
    lastActiveTime=19915965 (inactive for 10s)  
    * Hist #9: ActivityRecord{41ba1a30 u0 com.tencent.mm/.ui.LauncherUI}  
        packageName=com.tencent.mm processName=com.tencent.mm 
```

包名在第 3 行，本例中为**com.tencent.mm**。

对于 Android 4.4 及更高版本：
dumpsys 输出发生了一些变化。尝试搜索“Stack #1”，包名会在它下面非常接近。

另外，搜索“baseDir”，您将找到 apk 文件的完整路径！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-04T14:26:26.520

打开 ES explorer -> 按下左上角的 Menu 按钮（三个水平条纹） -> 在 Libraries 部分中选择 APPs。

因此，您将获得所有用户应用程序的列表。找到您的应用程序并长按选择它。然后按右下角的“更多”并选择“发送”。然后您可以使用不同的选项，例如您可以选择“ES Save To”以便将.apk 文件保存到您的主目录或其他任何地方。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-12-01T16:54:56.300

*或者您可以从Google Play*获取“蓝牙文件传输”并将主文件夹设置为`/system/`. 然后你甚至可以去`/`。

# django - Django select all values() 与可为空的相关字段

> ID：11012977
> 
> 赞同：0
> 
> 时间：2012-06-13T10:29:40.263
> 
> 标签：django, django-models, django-queryset, django-orm

我有这样的模型：

```
class Vendor(models.Model):
    title = models.CharField()

class Product(models.Model):
    ...
    vendor = models.ForeignKey(Vendor, null=True, blank=True)
    stock = models.ManyToManyField(Supplier, through='Stock')

class Stock(models.Model):
    in_stock = models.BooleanField(default=True)
    supplier = models.ForeignKey('catalog.Supplier', related_name='supplier_stock')
    product = models.ForeignKey('catalog.Product', related_name='product_stock')
    priority = models.IntegerField(default=0) 
```

我设计了这样的模型，因为一个产品可以由不同的供应商提供，我需要知道哪个供应商有这个产品的库存。

所以，在我看来，我希望得到所有结果的值，以减少查询的数量和一些特定的逻辑。它也用不同的复制我的产品行`Stock`，在python中我将它们分组。

在我看来，我使用：

```
Product.objects.all().values(
    'id', 'title', 'vendor_code', 'vendor__title', 'price', 
    'product_stock__in_stock', 'stock__title', 'stock__id', 'stock__priority') 
```

由于供应商相关模型的 INNER JOIN 和 null=True，它返回的不是产品模型的所有记录。它只返回设置了供应商参考的值。

如果我使用 'vendor' 而不是 'vendor__title' 它会返回比前一个结果更多的结果，因为在 vendor 字段中我可以获得`{...'vendor': *id goes here*...}`or `{...'vendor': None...}`，但我需要`vendor__title`那里的值。那么有什么建议，如何实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:15:42.667

从更改`vendor__title`为`product_stock__product__vendor__title`帮助我解决了我的问题。

# python - 在 Pandas 中创建类似 Excel 的 SUMIFS

> ID：11012981
> 
> 赞同：6
> 
> 时间：2012-06-13T10:29:47.637
> 
> 标签：python, pandas

我最近了解`pandas`并很高兴看到它的分析功能。我正在尝试将 Excel 数组函数转换为 Pandas 等效于我为创建性能归因报告而创建的自动化电子表格。在此示例中，我根据其他列中的条件在 Excel 中创建了一个新列：

```
={SUMIFS($F$10:$F$4518,$A$10:$A$4518,$C$4,$B$10:$B$4518,0,$C$10:$C$4518," ",$D$10:$D$4518,$D10,$E$10:$E$4518,$E10)} 
```

该公式是根据特定条件对“F”数组​​（安全权重）中的值求和。“A”数组（投资组合ID）为某个数字，“B”数组（证券ID）为零，“C”数组（组描述）为“”，“D”数组（开始日期）为行的日期我所在的行，“E”数组（结束日期）是我所在行的日期。

在 Pandas 中，我使用的是 DataFrame。在具有前三个条件的数据帧上创建一个新列是直截了当的，但我在最后两个条件下遇到了困难。

```
reportAggregateDF['PORT_WEIGHT'] = reportAggregateDF['SEC_WEIGHT_RATE']
          [(reportAggregateDF['PORT_ID'] == portID) &
           (reportAggregateDF['SEC_ID'] == 0) &
           (reportAggregateDF['GROUP_LIST'] == " ") & 
           (reportAggregateDF['START_DATE'] == reportAggregateDF['START_DATE'].ix[:]) & 
           (reportAggregateDF['END_DATE'] == reportAggregateDF['END_DATE'].ix[:])].sum() 
```

显然，最后两个条件中的 .ix[:] 并没有为我做任何事情，但是有没有办法使总和以我所在的行为条件而不循环？我的目标是不做任何循环，而是使用纯向量操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-20T03:31:48.830

您想使用 apply 函数和 lambda：

```
>> df
     A    B    C    D     E
0  mitfx  0  200  300  0.25
1     gs  1  150  320  0.35
2    duk  1    5    2  0.45
3    bmo  1  145   65  0.65 
```

假设我想对列 C 乘以 E 求和，但前提是列 B == 1 且 D 大于 5：

```
df['matches'] = df.apply(lambda x: x['C'] * x['E'] if x['B'] == 1 and x['D'] > 5 else 0, axis=1)
df.matches.sum() 
```

将其分为两个步骤可能更简洁：

```
df_subset = df[(df.B == 1) & (df.D > 5)]
df_subset.apply(lambda x: x.C * x.E, axis=1).sum() 
```

或简单地使用乘法来提高速度：

```
df_subset = df[(df.B == 1) & (df.D > 5)]
print sum(df_subset.C * df_subset.E) 
```

你想在没有循环的情况下解决这个问题是绝对正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:18:50.890

我确信有更好的方法，但这是在循环中完成的：

```
for idx, eachRecord in reportAggregateDF.T.iteritems():
reportAggregateDF['PORT_WEIGHT'].ix[idx] = reportAggregateDF['SEC_WEIGHT_RATE'][(reportAggregateDF['PORT_ID'] == portID) &            
    (reportAggregateDF['SEC_ID'] == 0) &            
    (reportAggregateDF['GROUP_LIST'] == " ") &             
    (reportAggregateDF['START_DATE'] == reportAggregateDF['START_DATE'].ix[idx]) &             
    (reportAggregateDF['END_DATE'] == reportAggregateDF['END_DATE'].ix[idx])].sum() 
```

# javascript - 在 Jquery Ajax IE 之后访问 getElementsByName 数组

> ID：11012984
> 
> 赞同：2
> 
> 时间：2012-06-13T10:29:57.760
> 
> 标签：javascript, jquery, ajax, internet-explorer

我有一个公司表格列表，表格列表中每个公司名称旁边都有一个 [+] 按钮。当用户单击 [+] 时，javascript 函数使用 jquery ajax 获取并在单击的行下方附加一个新的表格行，然后将显示一个缩进的部门列表。

一切都很好......直到我们到达我们心爱的IE。我使用的是 IE 8，没有在以前的版本上尝试过。

点击前的表格列表项 HTML：

```
<tr id="row1">
<td align="center">
<div id="button1" class="on" onclick="javascript:expandDepartments(1)"></div>
</td>
<td>Company 1</td>
</tr> 
```

onClick 函数：

```
 <script>
    function expandDepartments(s_cid) {
        if ($('#button'+s_cid+'').hasClass('on')) {
            $('#button'+s_cid+'').removeClass('on').addClass('off');
            if ( document.getElementsByName('rowafter'+s_cid+'').length == 0) { //if the department list does not exist for this company (first time getting departments)

                $.ajax({
                    type: 'POST',
                    url: 'ajax/common.php',
                    dataType: 'html',
                    data: 'a=getHomePageDepartments&cid='+s_cid+'',
                    success: function(txt){
                        setTimeout(function(){
                            $('#homeCompaniesList tbody').find('#row'+s_cid+'').after(txt);
                        },1000);
                    }
                });

            }else{ //otherwise, just re-show the row again, no need to request it again

                setTimeout(function(){
                    var x = document.getElementsByName('rowafter'+s_cid+'');
                    for(var k=0;k<x.length;k++)
                        x[k].style.display = '';
                    },1000);

            }

        } else if ( $('#button'+s_cid+'').hasClass('off') ) { //hide the row when MINUS image clicked

            $('#button'+s_cid+'').removeClass('off').addClass('on');
            var x = document.getElementsByName('rowafter'+s_cid+'');
            alert(x.length);
            for(var k=0;k<x.length;k++)
                x[k].style.display = 'none';

        }
    }
</script> 
```

包含多个部门的公司的 HTML 输出：

```
<tr style="display:;" name="rowafter1"><*td data not important*..
<tr style="display:;" name="rowafter1">
<tr style="display:;" name="rowafter1">
<tr style="display:;" name="rowafter1">
<tr style="display:;" name="rowafter1"> 
```

现在，看看 javascript 函数，行：alert(x.length);

在 Firefox 中，它会提示 5 在 IE 中，它会提示 0

这告诉我，在 IE 中无法访问使用 jquery ajax 注入页面的 HTML 元素，我不知道为什么。我需要为ie设置一个ajax参数吗？不确定..请协助。

ta

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:34:43.930

IE 有[问题`getElementsByName`](http://webbugtrack.blogspot.com/2007/08/bug-411-getelementsbyname-doesnt-work.html)

或者，为什么不使用 jQuery？

```
var x = $('*[name="rowafter'+s_cid+'"]'); //get all elements with name rowafterN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:35:12.197

`getElementsByName()`在 < IE9 中不起作用。如果您使用的是 jQuery，请使用`attribute`选择器：

```
var x = $('[name="rowafter' + s_cid + '"]');
alert(x.length); 
```

# html - 用于排列 DIV 的 CSS 样式

> ID：11012986
> 
> 赞同：-2
> 
> 时间：2012-06-13T10:30:04.257
> 
> 标签：html, css, xhtml

我有几个我想要安排的 DIV，如下所示[Div Layout design](https://www.dropbox.com/s/6mc2po14wvibyrn/Chart_Layout.png)

下面是我尝试使用 CSS 实现布局的 HTML：

```
<body>
<div class="page">

<div>

        <div style="margin: 2px 0 2px 0px; text-align: center; font-size: large">
            <span>Chart Title</span>
        </div>

        <div style="float: left;display:block;">
            <span>Y-Axis Title</span>
        </div>

        <div id="Chart1">
        <!--Chart would be displayed here-->
        </div>

        <div style="clear:both; margin: 2px 0 2px 0px; text-align: center; ">
            <span>X-Axis Title</span>
        </div>

</div>

</div> 
```

任何人都可以帮助我在 CSS 中实现图像中提到的布局吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:40:59.370

如果您没有问题，`position: absolute`那么这应该可以工作：

```
#Chart1, .chart-title, y-title, x-title {
  position: absolute;
}

.chart-title {
  top: 0;
  left: 0;
  right: 0;
  height: 50px;
  width: 200px;
  margin: 0 auto;
}

.x-title {
  bottom: 0;
  left: 0;
  right: 0;
  height: 50px;
  width: 200px;
  margin: 0 auto;
}

.y-title {
  top: 0;
  bottom: 0;
  left: 0;
  height: 200px;
  width: 50px;
  margin: auto 0;
}

#Chart1 {
  top: 50px;
  bottom: 50px;
  left: 50px;
  right: 0;
} 
```

这为您提供了 div 布局。对于 y-title 的垂直文本，您可能需要进行某种转换。你当然必须用适当的类命名你的 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:25:49.243

我刚刚添加了一些样式，检查一下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<div class="page">

<div>

        <div style="margin: 2px 0 2px 0px; text-align: center; font-size: large; width:100%;display:block;">
            <span>Chart Title</span>
        </div>

        <div style="float: left;display:block;height:400px; width:19%;">
            <span>Y-Axis Title</span>
        </div>

        <div id="Chart1" style="flot:left;display:block; height:400px; width:100%;">
        Chart would be displayed here
        </div>

        <div style="clear:both; margin: 2px 0 2px 0px; text-align: center;display:block;  width:100%;">
            <span>X-Axis Title</span>
        </div>

</div>

</div>
</body>
</html> 
```

![已编辑代码的屏幕截图](../Images/af7dcbb1c8eaaebbabe55e2434f919d7.png)

# windows - Windows 内核级全局临界区

> ID：11012988
> 
> 赞同：2
> 
> 时间：2012-06-13T10:30:15.960
> 
> 标签：windows, driver, kernel, critical-section, wdk

我正在从内核级驱动程序（来自 IOControl 功能）写入用户空间缓冲区，我需要确保用户级程序/服务不会在驱动程序完成写入之前覆盖缓冲区或读取它给它。

有没有办法（如果有，首选方式是什么）在 Windows 上的内核模式驱动程序中输入一种“全局临界区”，允许驱动程序在短时间内获得在系统范围内处理的独占权，以便驱动程序可以保证对用户空间中的缓冲区的独占访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:36:52.067

考虑到您在评论中的回复，实现此目的的一种方法是维护与每个系统处理器关联的内核模式线程，并在您写入缓冲区时将它们的 IRQL 提升到 DPC。DPC IRQL 不允许线程调度，因此用户模式应用程序将无法控制。

注意：这是问题的答案，但基本上我同意评论说你不应该这样做。您可能应该重新设计驱动程序，以便它在用户模式缓冲区可以随时更改的假设下工作。

# java - Java泛型：声明泛型类型的映射值

> ID：11012989
> 
> 赞同：5
> 
> 时间：2012-06-13T10:30:16.200
> 
> 标签：java, generics, casting

我是仿制药的新手。

有一个`Map`喜欢

```
private static Map<String, Object> map; 
```

和类似的方法

```
public <T> T getObject(final Class<T> myClass) {
    return (T)map.get(myClass);
} 
```

如何更改地图声明以便在从方法返回时不必进行强制转换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T10:35:18.460

您需要创建一个泛型类，而不是泛型方法：

```
public class MyClass<T> {
   private Map<String, T> map;

   public T getObject(final String key) {
    return map.get(key);
   }
} 
```

另外，我将参数从类更改为字符串。如果 map.get() 需要一个字符串，那么传递一个类是没有意义的。

编辑：我没有注意到地图是静态的。如果您可以将其更改为非静态而不破坏程序的其他部分，那么这可能会起作用。如果你不能，那么你就无法避免演员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:32:32.330

您无法避免强制转换操作，因为 get() 方法返回 Object 请参阅[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html#get%28java.lang.Object%29)了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:45:49.577

如果您愿意放弃`static`地图的修饰符，则可以这样做：

```
public class MyClass<T> {

    private Map<String, T> map;

    public T getObject(final Class<T> myClass) {
        return map.get(myClass);
    }
} 
```

否则：

> 在以下任何地方引用泛型类 C 的类型参数是编译时错误：
> 
> *   C 的静态成员的声明

（摘自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.2)），这会阻止您使用参数化类来实现上述目的。

*但是，您*尝试做的是从另一个成员（碰巧也是静态的）引用参数化**方法的类型参数，这也是无法访问的。**

# php - Websockets 在线部署

> ID：11012993
> 
> 赞同：1
> 
> 时间：2012-06-13T10:30:46.247
> 
> 标签：php, html, websocket

我正在从事一个涉及 websockets 的 web 开发项目。使用 wamp 服务器在本地服务器上一切正常。

在线出现问题，为 websocket 配置了专用服务器（激活了 php 扩展），我可以毫无问题地运行服务器。

然而连接失败，客户端无法连接。这不是端口或防火墙的问题，客户端可以访问服务器但握手未完成。

我使用[PHPWebSocket](https://github.com/Flynsarmy/PHPWebSocket-Chat/blob/master/class.PHPWebSocket.php)：

没有很多关于在 web 服务器上部署 websockets 的文档，它在本地通常工作得很好。

如果有人遇到同样的问题或知道出了什么问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:57:40.293

**问题解决了**

PHPwebsocket 使用 ID 来区分客户端和关联的套接字。

所以，在 $this->read 上，我们有一些情侣：

clientID => 套接字

问题就在那里，函数socket_select不关心id。因此，取决于实施...

**在本地 (Windows)**

输入 ：

```
{
0 => ressource #5,
1 => ressource #6
} 
```

输出 ：

```
{
**1** => ressource #6
} 
```

**在线（Debian）**

输入 ：

```
{
0 => ressource #5,
1 => ressource #6
} 
```

输出 ：

```
{
**0** => ressource #6
} 
```

这种关系在第二种情况下不再保持，这会导致其余过程出现问题。

为了解决这个问题，我添加了一个循环来重新定义 id ：

```
foreach($this->wsRead as $id => $socket2){
    if($socket2 ==$socket)
    $clientID = $id;
    } 
```

循环后 $clientID 设置为正确的值。

# php - 何时在 Symfony2 的前端/核心方法中调用 ->flush()？

> ID：11012999
> 
> 赞同：4
> 
> 时间：2012-06-13T10:30:59.087
> 
> 标签：php, symfony, doctrine, flush

我们**在决定将 ->flush() 调用**放在 Symfony2 应用程序中的什么位置时遇到了麻烦。请让我们看看**您是否可以“启发”**我们。

我们的应用程序非常大。它目前有大约 30 个捆绑包。我们有 2 个独立的开发团队：一个负责前端（控制器 + 树枝），另一个负责核心（数据库 + 服务 + 模型等）。

前端是一个项目（有自己的包，没有任何理论模型、逻辑或服务，但有树枝、公共图像和 css 和控制器），并且存在于一个存储库中。

Core 是另一个项目（有自己的包，提供服务、模型对象等，内部有教义对象，没有控制器或树枝），并且存在于另一个 repo 中。

这种方法的目标是我们的产品提供不同的前端（Core+Frontend1 用于网络，Core+Frontend2 用于移动设备，Core+Frontend3 用于支持团队，具有一个特殊的网络来管理普通用户）。因此，所有“逻辑”都在“核心”中，并且一个或其他前端项目正在使用相同的服务，因此核心的改进可以改进所有部署，而无需重新测试每一块前端。

所以......我们正在尝试让控制器永远不要访问学说对象，而是访问“建模层”，所以如果持久层发生变化，控制器和树枝（即：所有前端）保持不变，所以我们只需要重新测试核心而不是前端。

我们正在尝试以这样一种方式制作一个模型，即所有对数据库的访问都以“封装”的形式进行，因此控制器不会访问该原则，而是访问反过来使用原则的“服务”。假设我们处理对象“cars”和“people”，那么控制器可以访问“cars_manager”服务或“people_manager”服务，从中执行所有必要的操作（创建对象、检索对象等）。

**你会把同花跟注放在哪里？**

示例（在**伪代码中，**以使其更易于阅读）：

```
controller AjaxJsonAddDriverToCar( $CarId, $DriverId )
{
    try
    {
        $Cars = getService( "core.cars_manager" );
        $Car = $Cars->getCarById( $CarId );
        $Car->addDriver( $DriverId );
        $Result = JSON_OK;
    }
    catch
    {
        $Result = JSON_FAIL;
    }

    return $Result;
} 
```

假设控制器不知道核心是如何实现的......它不应该得到学说并对其执行 ->flush() 。

欢迎灵感。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:01:41.707

为了避免从控制器调用flush，我建议将所有更新数据库的代码封装到一个服务方法中，该方法最后调用flush()，在这种情况下，如果服务不会调用flush()方法抛出异常。

在您给出的示例中，这可以通过替换来完成：

```
 $Cars = getService( "core.cars_manager" );
    $Car = $Cars->getCarById( $CarId );
    $Car->addDriver( $DriverId );
    $Result = JSON_OK; 
```

和：

```
 $Cars = getService( "core.cars_manager" );
    $Cars->addDriverToCar($CarId, $DriverId);
    $Result = JSON_OK; 
```

和 CarsManager::addDriverToCar 将类似于：

```
 $Car = $this->getCarById( $CarId );
    $Car->addDriver( $DriverId );
    $this->getEntityManager()->flush(); 
```

然而，这是一个相当简单的例子，因为它只更新一个实体，而刷新的美妙之处在于它保存了对您添加/删除/更新的所有实体的更改，构成了一个工作单元的完成。

您描述的方法提到了特定于实体的管理器。虽然复杂实体的管理器没有理由不能拥有创建/更新/删除各种类型的多个实体的方法，但值得考虑管理器类的职责。对于每个实体类型都有一个管理器来处理该实体的简单查找和 CRUD 类型操作，然后在实体管理器和处理特定功能或一组功能的控制器之间有一个额外的管理器层，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:46:22.850

我的第一个想法是**某种主动记录**，您可以在其中告诉汽车进行自我保护。由于 Car 只是样板代码，因此它可以了解数据库实现并访问一些服务。

我的第二个想法是**汽车经理应该知道储蓄**，所以这将与实体经理非常相似，你会告诉他同花，他同花。您基本上会抽象实体管理器并使他更易于使用（因为没有直接使用的存储库）。

我的第三个想法是wtf。我了解您想将前端与后端分开。我不明白为什么前端不能对模型进行操作，但需要对样板代码进行操作。有趣的是：如果模型改变了，你的层也会改变。如果您不想更改图层，也可以不更改模型（两种方式都一样）。例如，您想从数据库中删除一个字段：删除注释并忽略它。没有造成伤害。如果重命名它，您始终可以使用旧的 getter 和 setter，并使用新名称进行操作。等等。

当然我没有看到全貌，但你可能想再考虑一遍；）

这里有另一个想法：也许你只想**告诉抽象层整个事情是成功还是失败**，他会做所有需要做的事情（刷新数据库、写日志、发送电子邮件等等）。如果您可以将用例缩小到成功和失败，并且服务知道该做什么，那么这可能是最简单的解决方案。