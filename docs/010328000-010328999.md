# StackOverflow 问答 10328000-10328999

# testing - 玩！使用另一个配置文件自动测试

> ID：10328000
> 
> 赞同：0
> 
> 时间：2012-04-26T06:01:48.220
> 
> 标签：testing, playframework-1.x

我有兴趣使用另一个配置文件运行自动测试：

```
play auto-test --%specialconfig 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:49:02.180

你可以这样做，但你的个人资料必须以 test- 开头，所以你可以这样做 --%test-specialconfig

# sql - 内连接上的内连接？

> ID：10328004
> 
> 赞同：0
> 
> 时间：2012-04-26T06:02:44.557
> 
> 标签：sql, db2

```
 **TableFruits**                        **TableNames**
   RecId    RId      FruitId       Price         RId  FruitId       Name
     1      A1        Null           3$           A1      1        Mango
     2      A2         2             4$           A2      2       Tomato 
```

由于 TableFruits 中 FruitId 下有 Null 我想从 TableNames 中获取它

```
Select a.RecId,a.RId,b.FruitId from TableFruits a INNER JOIN TableNames b on a.RId=b.RId 
```

1.  如何在此 SQL 语句中应用联接以包含表 2 中的 FruitNames（我无法更改表的顺序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:04:47.183

```
Select a.RecId,a.RId,a.FruitId, b.Name
from TableFruits a 
LEFT OUTER JOIN TableNames b on a.RId=b.RId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:20:01.840

```
SELECT a.RecId
     , a.RId
     , COALESCE(a.FruitId, b.FruitId) AS FruitId
     , b.Name
FROM TableFruits a 
  JOIN TableNames b 
    ON b.RId = a.RId  ; 
```

由于您可能在 中存在不匹配`RId`，因此您需要一个外连接。`LEFT`,`RIGHT`或`FULL`, 取决于可能发生不匹配的一侧。

MySQL 没有`FULL JOIN`，因此您可以执行以下操作：

```
SELECT a.RecId
     , a.RId
     , COALESCE(a.FruitId, b.FruitId) AS FruitId
     , b.Name
FROM TableFruits a 
  LEFT JOIN TableNames b 
    ON b.RId = a.RId 

UNION ALL

SELECT NULL
     , NULL
     , b.FruitId
     , b.Name
FROM TableFruits a 
  RIGHT JOIN TableNames b 
    ON b.RId = a.RId 
WHERE a.RId IS NULL  ; 
```

# php - 连接php服务器和android应用

> ID：10328010
> 
> 赞同：0
> 
> 时间：2012-04-26T06:03:03.417
> 
> 标签：php, android, json, latitude-longitude

我试图连接我的应用程序来获取用户的位置。现在我希望它使用 mysql 数据库在 php 服务器上更新它。它在代码的某些部分给出错误

```
TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
String deviceid = telephonyManager.getDeviceId();

    //this is JSON part to put your information inside it
    String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\",\"deviceid\":\""+deviceid+"\"}}";

    HttpClient httpClient = new DefaultHttpClient();

    // Post method to send data to server
    HttpPost post = new HttpPost("http://location.site.net/storeg.php");

}
        InputStream is; 

        String result = ""; 
        //the year data to send 
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(); 
        nameValuePairs.add(new BasicNameValuePair("deviceid", +deviceid));
        nameValuePairs.add(new BasicNameValuePair("latitude", +latitude));
        nameValuePairs.add(new BasicNameValuePair("longitude", +longitude));
        { 

        //http post 
        try{ 
                HttpClient httpclient = new DefaultHttpClient(); 
                HttpPost httppost = new HttpPost("http://location.site.net/storeg.php"); 
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
                HttpResponse response = httpclient.execute(httppost);  
                HttpEntity entity = response.getEntity(); 
                is = entity.getContent(); 
                Log.e("log_tag", "connection success "); 
                Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show(); 
        }catch(Exception e){ 
                Log.e("log_tag", "Error in http connection "+e.toString()); 
                Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show(); 

        } 
        //convert response to string 
        try{ 
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 
                StringBuilder sb = new StringBuilder(); 
                String line = null; 
                while ((line = reader.readLine()) != null) { 
                        sb.append(line + "\n"); 
                        Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show(); 
                } 
                is.close(); 

                result=sb.toString(); 
        }catch(Exception e){ 
               Log.e("log_tag", "Error converting result "+e.toString()); 
            Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show(); 

        } 

        //parse json data 
        try{ 
                JSONArray jArray = new JSONArray(result); 
                for(int i=0;i<jArray.length();i++){ 
                       JSONObject json_data = jArray.getJSONObject(i); 
                        Log.i("log_tag","deviceid: "+json_data.getInt("deviceid")+ 
                                ", latitude: "+json_data.getString("latitude")+ 
                                ", longitude: "+json_data.getInt("longitude")); 
                        Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show(); 
               } 

        }catch(JSONException e){ 
                Log.e("log_tag", "Error parsing data "+e.toString()); 
                Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show(); 
        } 
    } 
} 
```

**.add**部分出错。请帮我解决这个问题，代码会发布纬度和经度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:03:38.323

从这些行中删除“+”号

```
 nameValuePairs.add(new BasicNameValuePair("deviceid", +deviceid));
    nameValuePairs.add(new BasicNameValuePair("latitude", +latitude));
    nameValuePairs.add(new BasicNameValuePair("longitude", +longitude)); 
```

把它们变成

```
 nameValuePairs.add(new BasicNameValuePair("deviceid", deviceid));
    nameValuePairs.add(new BasicNameValuePair("latitude", latitude));
    nameValuePairs.add(new BasicNameValuePair("longitude", longitude)); 
```

我认为这应该有效

# android - onActivityResult() 永远不会在嵌套的 Activity 中调用

> ID：10328014
> 
> 赞同：0
> 
> 时间：2012-04-26T06:03:10.973
> 
> 标签：android, android-activity, android-fragments, android-tabhost

我有下一个 UI 层次结构：

`FragmentActivity`->`Fragment`和`TabHost`LocalActivityManager -> MyNestedActivity

MyNestedActivity 位于`Fragment`. 当我调用`startActivityForResult()`MyNestedActivity 时，`Activity`正常启动，但`onActivityResult()`从未调用过。

但是，如果我使用 MyNestedActivity 打开`startActivity()`，则`onActivityResult()`可以正常工作。

我什么时候必须上钩`onActivityResult()`？`FragmentActivity`进进进出`Fragment`？我必须如何将结果发送到我的 MyNestedActivity？

解决了：

在此 UI 层次结构中`onActivityResult()`未调用。我只是将 MyNestedActivity 更改为`Fragment`，我的层次结构变为`FragmentActivity`-> `Fragment`。现在`onActivityResult()`工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:24:14.433

`onActivityResult()`在嵌套中`Activity`不被 Android 调用。

在嵌套活动中获取活动结果的正确方法是：

1.  `startActivityForResult()`来自主机`Activity`（不是来自嵌套！），

2.  `Activity`在主机中接收结果`Activity`，

3.  将结果分派`Activity`到嵌套`Activity`的 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:09:22.073

如果`startActivityForResult()`要从 Fragment 调用，则必须`onActivityResult()`在 Fragment 类中而不是在宿主 Activity 中设置方法。有关更多信息，请参阅[此链接](http://developer.android.com/reference/android/app/Fragment.html#onActivityResult%28int,%20int,%20android.content.Intent%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T23:19:09.883

我们遇到了这个[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/65oLmvIlgFM](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/65oLmvIlgFM)问题，并通过将活动启动模式更改为 singleInstace 或 singleTask 以外的方式来解决它。

# mysql - 将大量文本存储在一个值为 varchar （数据库）的值中

> ID：10328023
> 
> 赞同：0
> 
> 时间：2012-04-26T06:03:48.720
> 
> 标签：mysql, database

我在前端应用程序中有一个非常简单的文本框（例如 php，尽管语言无关紧要），并且正在插入到下面定义的数据库中表的描述列中：

表（ID[主键]，描述[varchar（255）]）

尽管这种情况不会经常发生，但有时需要为一个元组插入超过 255 个字符。我可以增加 varchar 的长度，但元组大小有限制，因此为了安全起见，请将其保持在建议的最大值 255。

我能弄清楚如何做到这一点的唯一方法是拥有 2 个表格并将文本分成 255 个字符块。表定义为：

表 1（ID[主键]........）

Table2 (ID, table1ID[表 1 的外键] 描述[varchar(255)])

有没有更好的方法来实现这一目标？

编辑：Mysql 版本 5.5.11 不知道有文本数据类型。应该是新的。听起来像是一种应用程序对象，但它是否足够灵活，可以平均存储 150 个字符并且 10% 的时间存储接近 5000 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:07:44.397

如果使用 MySQL 5.0.3 或更高版本，您只需增加`VARCHAR`. 根据[手册](http://dev.mysql.com/doc/refman/5.0/en/char.html)：

> 列中的值`VARCHAR`是可变长度的字符串。在 MySQL 5.0.3 之前，长度可以指定为 0 到 255 之间的值，在 5.0.3 和更高版本中可以指定为 0 到 65,535 之间的值。MySQL 5.0.3 及更高版本中 a 的有效最大长度`VARCHAR`取决于最大行大小（65,535 字节，所有列共享）和使用的字符集。请参阅[第 E.7.4 节，“表列数和行大小限制”</a>。](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)
> 
> [](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)

 [要做到这一点，你会这样做：

```
ALTER TABLE tablename MODIFY description VARCHAR(...) [NOT] NULL; 
```](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html) 

[或者您可以使用以下](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)[`TEXT`](http://dev.mysql.com/doc/refman/5.1/en/blob.html)类型：

```
ALTER TABLE tablename MODIFY description TEXT [NOT] NULL; 
```

# php - Jquery切换行为不一致

> ID：10328024
> 
> 赞同：2
> 
> 时间：2012-04-26T06:03:56.310
> 
> 标签：php, javascript, jquery, google-chrome, jquery-mobile

我在动态创建的切换按钮上发生了一些奇怪的行为。它们似乎在 firefox 上运行良好，但在 Chrome 和 Safari 上，以及 iPhone 的 safari 浏览器上，div 内容的显示和隐藏是不一致的，直到您刷新页面，然后所有按钮似乎都可以正常工作。

如果您查看下面的链接，然后选择任何选项（例如，进入决赛、顶级击球手、顶级保龄球手等），您将被带到一个充满切换按钮的页面，但内容不显示。

```
http://m.bestoddsindia.com/#/odds/cricket/competitions-level1/competitions-level2/display-all-outright-odds.php?comp1=Indian Premier League 
```

通常前几个按钮不起作用，但其余的会。这真的很奇怪。有谁知道是什么原因造成的？请注意，javascript 和 list 元素包含在 php while 循环中，以从数据库中获取正确的值，并且 $idName = "bettype" 。$i; （其中 $i 在每次循环过程中递增。）

**JAVASCRIPT**

```
<script type="text/javascript">
$(document).ready(function(){
  $("#button<? echo $idName; ?>").click(function(){
    $(".divider<? echo $idName; ?>").toggle();
  });
});
</script> 
```

**HTML**

```
<li class="dropdown-tap-bg">
<div class="dropdown-tap" id="button<?php echo $idName; ?>">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="70%" align="left"><span class="result"><?php echo ucwords($row_mainvalues['result']);?></span></td>
    <td align="left" class="price"><?php echo $row_mainvalues['Highest_Price'];?></td>
    <td align="right">
    <table class="show-all-bookmakers" width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="center" valign="middle">Show/Hide<br/>Bookmakers</td>
      </tr>
    </table>
    </td>
  </tr>
</table>
</div></li>

<li class="divider<?php echo $idName; ?> dropdown-secondaryodds-panel" style="display:none">
<!-- div content ->
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:10:47.513

我建议更改您的代码以使用类而不是 ID。这样，您可以为所有按钮赋予相同的类，并使用一个选择器来找到它们并（在黑暗中）绑定它们。`id`您使用的迭代器用于设置一个属性`data-id`，您可以在单击委托中访问该属性，使用该属性`$(this).attr("data-id")`又可以用来显示或隐藏您尝试切换的特定元素。

# iphone - 以编程方式计算 UITableViewCell 高度包含“ ”或“\n”的文本

> ID：10328027
> 
> 赞同：2
> 
> 时间：2012-04-26T06:04:07.943
> 
> 标签：iphone, ios, uitableview, row-height

我想使用代码计算单元格高度。我的文本包含 html 实体等`<br>,<b>`。我尝试了以下或类似的代码 -

```
//create a CGFloat variable
CGFloat _height = 0;
//find out the size for your text. Instead of 255 insert the width of your label
CGSize _textSize = [yourString sizeWithFont:[UIFont systemFontOfSize:kFontSize] constrainedToSize:(CGSize) { 255, 9999 }];
//add the height of that CGSize variable to your height in case you will need to add more values
_height += _textSize.height; 
```

它适用于单行代码和纯文本，但包含 html 标签的文本存在问题。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:10:42.593

试试这个与细胞高度相关的教程，试着用谷歌搜索这个 [http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

# ruby - Ruby：（重新）从另一个块/方法定义变量？

> ID：10328031
> 
> 赞同：0
> 
> 时间：2012-04-26T06:04:20.127
> 
> 标签：ruby

我不知道如何准确地表达这个，但我试图定义许多变量，然后重新定义它们，而不需要重写许多变量中的每一个，并在我编写的每个新块中创建冗余代码。变量定义来自多个数据库的数组元素。这是我正在使用的缩小样本：

```
def lots_of_vars(array)
  name = array[1]
  membership = array[2]
  spouse = array[3]
  ....
  lap12 = array[36]
end

def second_block
  #database1 => [ "Randy", true, "Nancy", 2, 17, false...
  lots_of_vars(database1)
  return unless membership
  puts "Lap progress for #{name} and #{spouse}: #{lap1}, #{lap2}... #{lap12}..."
end

def third_block
  #database2 => [ "Steven", true, nil, 0, 5, false...
  lots_of_vars(database2)
  return unless spouse.empty? or spouse.nil?
  puts "Weekly progress for #{name}: #{lap1}, #{lap5}, #{lap6}, #{lap10}..."
end 
```

第二个和第三个块需要从第一个块/方法定义的所有变量。但是我如何传递所有这些变量？我读过的一个例子建议我将它们全部作为参数传递，例如：

```
def second_block(name, membership, spouse...) 
```

但这与在两个块中定义每个变量两次一样混乱。处理这种情况的简单、干燥的方法是什么？如果我需要澄清我的问题中的任何内容，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:21:50.987

您想要的是创建一个 Struct，它是一个表示数据结构的简单类。结构将按位置获取其参数，这正是您想要的，因为您可以将数组放入方法调用中（将数组转换为参数列表）

所以

```
Thing = Struct.new(:name, :membership, :spouse, :lap12)

array = ['Larry', 'gold', 'Sue', 2.2]
thing = Thing.new(*array)

#note that the splat (*) is equivalent to saying
# Thing.new(array[0], array[1], array[2], array[3])

thing.name # => "Larry"
thing.lap12 # => 2.2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:43:56.480

绝对使用 struct 的方法是最好的方法之一。

你也可以这样做：

**这里是龙，不要在家里尝试！:)**

```
class Foo

  def lots_of_vars(array)
    name = array[0]
    email = array[1]
    description = array[2]

    binding
  end

  def bar
    array = ['Luke', 'my@email.com', 'Lorem ipsum']
    eval('"My name is #{name}, email: #{email}, here is description: #{description}"', lots_of_vars(array))
  end

end

foo = Foo.new
foo.bar 
```

有关更多详细信息，您可以查看这篇关于 ruby​​ 的不错的博客文章`binding` [http://onestepback.org/index.cgi/Tech/Ruby/RubyBindings.rdoc](http://onestepback.org/index.cgi/Tech/Ruby/RubyBindings.rdoc)

# python - 如何杀死 http 挂起的连接？

> ID：10328035
> 
> 赞同：1
> 
> 时间：2012-04-26T06:04:37.193
> 
> 标签：python, http, mechanize, urllib2

我正在编写一个脚本来抓取一些有趣的网页以供以后研究，它是以多线程方式编程的。我注意到的问题是，无论我使用什么库，例如`mechanize`or`urllib2`或`urllib`，运行几个小时后总是有挂起的连接。我已经尝试过使用他们单独的超时选项以及`socket.setdefaulttimeout`选项，但没有任何效果。两到三个小时后，它总是以 20 到 30 个挂起的连接告终。

这让我很困扰。有没有更好的方法来解决这个问题？我如何杀死这些连接？

# vb.net - 更改打印的默认页面大小

> ID：10328036
> 
> 赞同：-1
> 
> 时间：2012-04-26T06:04:43.157
> 
> 标签：vb.net, printing, crystal-reports

我有一个 vb.net 应用程序，它使用 2 个水晶报表来打印报表。第一份报告是 A4，第二份是 A5。

我的代码如何访问打印机默认设置并将默认纸张尺寸每次更改为 A4 和 A5，而无需手动执行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:47:35.653

这有效，但不适用于 MS Word：

```
 Dim pp As New System.Drawing.Printing.PrintDocument
        For i = 0 To pp.DefaultPageSettings.PrinterSettings.PaperSizes.Count - 1
            If pp.DefaultPageSettings.PrinterSettings.PaperSizes.Item(i).Kind = System.Drawing.Printing.PaperKind.A4 Then
                pp.DefaultPageSettings.PaperSize = pp.DefaultPageSettings.PrinterSettings.PaperSizes.Item(i)
                Exit For
            End If
        Next 
```

# java - 河内塔 Java 递归

> ID：10328038
> 
> 赞同：3
> 
> 时间：2012-04-26T06:04:44.983
> 
> 标签：java, recursion

大家晚上好，

我有一个关于我的班级正在做的关于递归的家庭作业的快速问题。我们的想法是我们有这个河内塔程序，我们需要编写一个主程序来制作一个表格，显示数字 5-25，以及解决那个大小的塔需要多少步，例如

5 ---- 31 步

6 ---- 63 步

ETC...

我在这样做时遇到了一些麻烦，因为 TowersOfHanoi 课程设置为打印出每一步，我认为我们不应该摆脱它，但我不太确定。

这是 TowersOfHanoi 课程

```
public class TowersOfHanoi {
    private int totalDisks;
    private int count;

    public TowersOfHanoi(int disks) {
        totalDisks = disks;
        count = 0;
    }

    public void solve() {
        moveTower (totalDisks,1,3,2);
    }

    private void moveTower(int numDisks, int start, int end, int temp) {
        if (numDisks ==1) {
            moveOneDisk(start,end);
        }
        else {
            moveTower (numDisks-1, start, temp, end);
            moveOneDisk (start, end);
            moveTower (numDisks-1, temp, end, start);
        }
    }

    private void moveOneDisk(int start, int end) {
        count = count+1;
        System.out.println("Move one disk from "+start+" to "+end+" - Move "+count);
    }
} 
```

现在我只需要编写一个 main 来创建该表，而无需打印出每个塔的每一个动作，但我不确定如何去做。任何帮助深表感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:10:14.817

您将需要`TowersOfHanoi`为每个要解决难题的磁盘提供一个类对象。为此，您将`main`通过传递不同的参数（从 5 到 25）在方法中创建这些对象。一旦构造了对象，您只需调用`solve`它的方法。

我将把实现留给你，因为这是标记为作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:09:33.883

您可以删除 moveOneDisk 中的打印语句，然后在调用 main 中的递归方法后编写将输出计数的打印语句。

```
private void moveOneDisk(int start, int end) {
    count = count+1;
    //System.out.println("Move one disk from "+start+" to "+end+" - Move "+count);
}

public static void main(){
TowersOfHanoi tower = TowersOfHanoi(5);
tower.solve();
system.out.print(tower.count);
}//end of main 
```

删除 moveOneDisk 中的 print 语句将使得不会报告每一次移动，但计数仍会增加。然后您可以在使用类成员计数构造表时分配所需的任何变量。在这种情况下， tower.count

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T17:30:16.033

包中期；

```
public class TowersofHanoi {
    public int totalDisks;
    public static int count;

    public TowersofHanoi(int disks) {
        totalDisks = disks;
        count = 0;
    }

    public void solve() {
        moveTower (totalDisks,1,3,2);
    }

    private void moveTower(int numDisks, int start, int end, int temp) {
        if (numDisks ==1) {
            moveOneDisk(start,end);

        }
        else {
            moveTower (numDisks-1, start, temp, end);

            moveOneDisk (start, end);
            moveTower (numDisks-1, temp, end, start);
        }
    }

    private void moveOneDisk(int start, int end) {
        count = count+1;
        //System.out.println("Move one disk from "+start+" to "+end+" - Move "+count);
    }
    public static void main(){
        TowersofHanoi tower = new TowersofHanoi(5);
        tower.solve();

        System.out.println(tower.count);
        }

} 
```

# prolog - 如何在 prolog 中进行类型检查？

> ID：10328040
> 
> 赞同：4
> 
> 时间：2012-04-26T06:04:47.470
> 
> 标签：prolog, typechecking

所以我是 prolog 的新手，我想实现一个类型检查器。我应该怎么做？这将是一个例子：

```
String s; int i; i = s.length(); // OK (example given in the homework) 
```

当我问教授如何输入内容时，它看起来像这样：

```
instance(s, string). 
```

太好了，除非这样做了，否则 i 的统一在查询结束时会丢失，所以如果我要说，等于事实并这样称呼它，

```
equals(i, s, '.', 'length'). 
```

我怎样才能检查我是什么。所以我只是很难知道从哪里开始。这是一个家庭作业，所以只需要一些建议，帮助了解如何进行我的第一个 prolog 项目。提前致谢。

编辑：作业

编写一个 Prolog 程序，该程序可以根据 JLS 对给定 Java 程序的方法调用进行类型检查。事实库可以是
您编写的任何重要的 Java 程序中定义的方法的任何编码，至少还可以是下面列出的那些。在查询
模式下，它必须检查潜在的匹配；例如允许“println(string)”。您不需要对那些不需要的 JLS 规则进行编码。（上面给出的示例之一。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:09:42.270

我打算将以下内容作为起点。这是我的形式化：

```
type(string). 
```

意味着 string 是变量的可用类型

```
signature(=, [X, X, nil]). 
```

意味着中缀运算符 = 接受两个相同类型的参数并且不返回任何内容。

```
is_instance(X, Y) 
```

意味着这`X`是一个类型的实例`Y` 为了测试事情，我创建了一个包含在我的谓词变量中的“语句”`Input`列表`test/0`。然后我递归地测试事情是否正常。您必须将第三个子句实现为递归调用，以查明现在表达式中的类型是否正常。

我所做的 atm 是在我的第一个主要`check/2`条款中，我处理`instance/2`术语，而在接下来的一个中，我处理所有其余部分。

```
:- dynamic is_instance/2.

type(string).
type(int).

signature(=, [X, X, nil]).

test :-
    retractall(is_instance(_, _)),
    Input = [instance(s, string), instance(i, int), =(i, length(s))],
    check(Input, ReturnTypes),

check([], []).
check([instance(Variable, Type)|Terms], [nil|ReturnTypes]) :-
    !,
    ( is_instance(Variable, _) -> syntax_error('Variable already declared')
    ; \+ type(Type) -> syntax_error('Using a non-existing type'),
    ; Term =.. [is_instance, Variable, Type],
      assertz(Term)),
    check(Terms, ReturnTypes).

check([Term|Terms], [Type|ReturnTypes]) :-
    Term =.. [Name|Arguments],
    % Here we have to call ourselves with our list of arguments
    % and then check that everything is fine and then we'll unify Type
    % with the return value of Name.
    check(Terms, ReturnTypes). 
```

我希望它能帮助你开始。

# asp.net-mvc - 动态创建菜单并更改该菜单的文本

> ID：10328043
> 
> 赞同：0
> 
> 时间：2012-04-26T06:04:53.650
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在 ASP.NET MVC 3 中是全新的，我需要创建一个应用程序，其中已经创建了一个菜单，我需要添加另一个名为 Inbox（未读消息的编号）的菜单项。

出于测试目的，我需要使用计时器并每隔一段时间增加计数器变量并将该文本绑定到收件箱中。也就是说，5 秒后我的计数器变量值为 1，然后菜单应显示收件箱（1），10 秒后我的计数器变量值为 2，然后菜单应显示收件箱（2）。

我对所有视图都有相同的控制器，我还需要实现计时器。那么，有什么想法可以在不影响其控制器的情况下实现计时器并更改菜单名称。

目前我的菜单容器看起来像这样。

```
<div id="menucontainer">
    <ul id="menu">
        <li>@Html.ActionLink("Home", "Index", "Home")</li>
         <li>@Html.ActionLink("About", "About", "Home")</li>
         <li>@Html.ActionLink("Video", "Video", "Home")</li>
         <li>@Html.ActionLink("Social", "Social", "Home")</li>
         <li>@Html.ActionLink("Photos", "Photos", "Home")</li>
         <li>@Html.ActionLink("Blog", "Blog", "Home")</li>
         <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
         <li>@Html.ActionLink("Inbox","Inbox","Home")</li>
     </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:14:37.250

我会做这样的事情：

```
<div id="menucontainer">
    <ul id="menu">
        <li>@Html.ActionLink("Home", "Index", "Home")</li>
         <li>@Html.ActionLink("About", "About", "Home")</li>
         <li>@Html.ActionLink("Video", "Video", "Home")</li>
         <li>@Html.ActionLink("Social", "Social", "Home")</li>
         <li>@Html.ActionLink("Photos", "Photos", "Home")</li>
         <li>@Html.ActionLink("Blog", "Blog", "Home")</li>
         <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
         <li><a href="@Url.Action("Inbox","Home")">Inbox <span class="message-count"></span></a></li>
     </ul>
 </div> 
```

在 Javascript 中（使用 jQuery 让事情变得更简单）

```
function checkInbox() {
    var url = '@Url.Action("GetInboxCount","Services")';
    $.get(url, { userId : @UserId }, function(data) {
        if(data != null) $(".message-count").text(data); // update count
    });
} 
```

并且在 DOM 就绪区域中，只需设置间隔

```
(function() {
    checkInbox(); // check for the first time
    setInterval(checkInbox(), 30 * 1000); // and every 30 seconds
}); 
```

创建一个名为的控制器`Services`并添加一个输出 JSON 的方法，例如：

```
public class ServicesController : Controller
{
    var db = yourDatabaseContext;

    public JsonResult GetInboxCount(int userId)
    {
        inboxCount = db.GetInboxCountByUserId(userId);
        return Json(inboxCount, JsonRequestBehavior.AllowGet);
    }
} 
```

# c++ - qt-everywhere-opensource-src-4.8.1 中没有 qtCreator

> ID：10328044
> 
> 赞同：0
> 
> 时间：2012-04-26T06:05:01.310
> 
> 标签：c++, qt, compilation

我已经下载并编译成功qt但是没有QtCreator，只有设计器，助手+其他dll。除了编译这个源代码之外，我还应该做其他事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:22:03.830

您需要下载 Qt-creator。它不包含在 Qt 源代码中。

# php - PHP 4.4.9 和匹配的 mysql、phpmyadmin 和 apache

> ID：10328048
> 
> 赞同：0
> 
> 时间：2012-04-26T06:05:12.667
> 
> 标签：php, mysql, linux, apache, phpmyadmin

我对 linux、php 和 mysql 还很陌生。我正在运行 CentOS 5，我必须在上面安装 PHP 4.4.9（这是必需的版本）。我也想安装 apache、mysql 和 php myadmin 但不知道哪个版本匹配 PHP 4.4.9 以及如何安装。请帮助我在 CentOS 5 上安装所有上述给定的 4（即 PHP 4.4.9 和相应的 mysql、apache 和 php myadmin）。如果需要任何其他配置，也请告诉我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:17:16.493

你永远不会再安装php4了！

安装 PHP、MySQL 和 Apache 没什么大不了的，这里有一个详细的教程（针对 CentOS 5）： http: [//www.howtoforge.com/installing-apache2-with-php5-and-mysql-support-on-centos- 5.3灯](http://www.howtoforge.com/installing-apache2-with-php5-and-mysql-support-on-centos-5.3-lamp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:20:15.937

我必须建议您升级您的托管环境。但是现在，如果您只想这样做，请按照以下链接中提供的步骤进行操作

[http://devblog.darkobulatovic.com/?p=4](http://devblog.darkobulatovic.com/?p=4)

# python - 在python中沿参数化曲线查找给定弧距的位置

> ID：10328050
> 
> 赞同：0
> 
> 时间：2012-04-26T06:05:17.613
> 
> 标签：python, geometry, distance

我有一个参数化的二维曲线： (x,y) = f(t)

函数 f 是任意的但可微分，因此我可以使用标准公式计算出沿曲线任意点的微分弧长 ds。通过数值积分微分弧长公式，我还可以得到从起点到曲线上任意点的总弧长 S(t)。我可以控制计算的准确性。

我想从曲线的起点找到总弧长 S = D 的点 (x,y)。如果实现是在 python 中，那就更好了。我将多次这样做，它是计算应用程序的一部分，我需要严格控制准确性和对收敛的信心。

我不知道求根是否是最好的方法，但我的问题相当于 g(t) = S(t) - D 的求根问题，因为 S( t) 不是。不精确的函数评估不仅会影响准确性，还会影响 g(t) 的单调性。我从一开始就尝试进行紧密的数值积分，但这需要很长时间。我很确定会收敛到我所需的容差，求根算法在进行时必须懒惰地控制积分精度，一开始就要求草率的评估，并随着根算法的收敛而提高精度。

有这样的东西随手可得吗？有没有另一种聪明的方法来做到这一点？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:14:57.757

你能发布一些代码，并告诉我们它有什么问题吗？

这是我计算 t 的版本，其中 S(t) == D：

```
from scipy.integrate import quad
from scipy.optimize import fsolve
from math import cos, sin, sqrt, pi

def circle_diff(t):
    dx = -sin(t)
    dy = cos(t)
    return sqrt(dx*dx+dy*dy)

def sin_diff(t):
    dx = 1
    dy = cos(t)
    return sqrt(dx*dx+dy*dy)

def curve_length(t0, S, length):
    return quad(S, 0, t0)[0] - length

def solve_t(curve_diff, length):    
    return fsolve(curve_length, 0.0, (curve_diff, length))[0]

print solve_t(circle_diff, 2*pi)
print solve_t(sin_diff, 7.640395578) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:11:47.917

好的，@HYRY，这是一个很大程度上基于你的代码片段。您给了我成功所需的提示：使用“quad”而不是“quadrature”。所以我至少会投票给你的答案，但我想补充一下。

首先，您的代码运行速度很快，但比我所追求的精度差了大约 5 个位置。我在您的示例中添加了 quadtol 和 opttol 以尝试说明求积和求根精度的相互作用。我还添加了一个基于默认高容差的循环以暴露速度差异。

sin 示例在准确性方面比圆圈更敏感。我还添加了一条参数化曲线，其弧长由超几何函数给出，并且注释掉了“brentq”选项，因为 fsolve 在此示例中失败，并且在任何情况下，甚至 brentq 在此任务中都相等或更好。

“正交”很慢，但表现出预期的行为：求根速度、准确性和成功随正交容差而变化。

相比之下，“quad”似乎忽略了所要求的容差并总是产生更准确的答案。这种未经要求的准确性会很烦人或需要解释，但它在示例上的运行速度也非常快，以至于我不确定我的问题是否有趣了。谢谢！

```
from scipy.integrate import quad, quadrature
from scipy.optimize import fsolve, brentq 
from math import cos, sin, sqrt, pi, pow

def circle_diff(t): 
    dx = -sin(t) 
    dy = cos(t) 
    return sqrt(dx*dx+dy*dy) 

def sin_diff(t): 
    dx = 1 
    dy = cos(t) 
    return sqrt(dx*dx+dy*dy) 

def hypergeom_diff(t):
    """ y = t^5 x = t^3 """
    dx = 3*t*t
    dy = 5*pow(t,4)
    return sqrt(dx*dx+dy*dy)

def curve_length(t0, S, length,quadtol): 
    integral = quad(S, 0, t0,epsabs=quadtol,epsrel=quadtol)
    #integral = quadrature(S, 0, t0,tol=quadtol,rtol=quadtol, vec_func = False)
    return integral[0] - length 

def solve_t(curve_diff, length,opttol=1.e-15,quadtol=1e-10):
    return fsolve(curve_length, 0.0, (curve_diff, length,quadtol), xtol = opttol)[0] 
    #return brentq(curve_length, 0.0, 3.2*pi,(curve_diff, length, quadtol), rtol = opttol)

for i in range(1000):
    y = solve_t(circle_diff, 2*pi)

print 2*pi
print solve_t(circle_diff, 2*pi)
print solve_t(sin_diff, 7.640395578)
print solve_t(circle_diff, 2*pi,opttol=1e-5,quadtol=1e-3)
print solve_t(sin_diff, 7.640395578,opttol = 1e-12,quadtol=1e-6)
print "hypergeom"
print solve_t(hypergeom_diff, 2.0,opttol = 1e-12,quadtol=1e-12)
print solve_t(hypergeom_diff, 2.0,opttol = 1e-12,quadtol=1e-6) 
```

# android - onScroll 实现无限滚动

> ID：10328054
> 
> 赞同：1
> 
> 时间：2012-04-26T06:06:17.617
> 
> 标签：android

预期的输出是数据应该加载一次，然后为每个后续滚动加载。但相反，它一次加载列表视图中的所有数据。

```
public class ViewPage extends ListActivity{

ListView lv;
ListAdapter ld;
int size=3;

ArrayList<String> filename = new ArrayList<String>();
Cursor contactcursor;
ArrayAdapter<String> arr_ad;
int contact_column_index;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mylist);

    String[] proj = { ContactsContract.Contacts.DISPLAY_NAME };
    contactcursor = managedQuery(ContactsContract.Contacts.CONTENT_URI, proj, null, null, null);
    contact_column_index = contactcursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME);
    lv = (ListView)findViewById(android.R.id.list);
    contactcursor.moveToFirst();
        for(int i=0;i<size;i++)
        {

            filename.add(contactcursor.getString(contact_column_index));
            if(!contactcursor.moveToNext())
                break;
        }

        arr_ad = new ArrayAdapter<String>(ViewPage.this, android.R.layout.simple_list_item_1, filename);
        setListAdapter(arr_ad);

        lv.setOnScrollListener(new EndlessScrollListener());
}

public class EndlessScrollListener implements OnScrollListener {

private int visibleThreshold = size;
private int currentPage = 0;
private int previousTotal = 0;
private boolean loading = true;

public EndlessScrollListener() 
{

}

public EndlessScrollListener(int visibleThreshold) 
{
    this.visibleThreshold = visibleThreshold;
}

@Override
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {
    // TODO Auto-generated method stub

    /*Runnable action = new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        }
    };
    runOnUiThread(action);*/

    Toast.makeText(ViewPage.this, "In" , 1).show();
     if (loading) 
     {
         if (totalItemCount > previousTotal) 
         {
            loading = false;
            previousTotal = totalItemCount;
            currentPage++;
         }
     }
     if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) 
     { 

            for(int i=0;i<size;i++)
            {

                if(!contactcursor.moveToNext())
                    break;

                filename.add(contactcursor.getString(contact_column_index));

            }

            arr_ad.notifyDataSetChanged();

            loading = true;
            Toast.makeText(ViewPage.this,totalItemCount+" "+visibleItemCount+" "+firstVisibleItem+" "+visibleThreshold+" ", 1).show();
     }
}

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
    // TODO Auto-generated method stub

}

}
} 
```

neverscrolllistener 类中的 onscroll 方法运行并加载完整的数据，甚至没有完成滚动。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:19:12.563

onScroll 被调用了很多，在我看来，在滚动时执行该逻辑非常昂贵。

我实现了为我的适配器添加一个简单逻辑的目标，请查看我刚才给出的这个[答案。](https://stackoverflow.com/questions/8237287/load-data-when-scrolling-to-listview/8237491#8237491)

# r - 如何在 R 中自动执行命令？

> ID：10328062
> 
> 赞同：2
> 
> 时间：2012-04-26T06:06:48.633
> 
> 标签：r

我有一个非常基本的问题。

我是 R 的新用户，这些天我正在使用一个 R 包进行分析，我必须运行该包的 R 命令列表才能获得所需的输出。我想制作我的分析管道并将其自动化，以便我可以使用一个带有所需参数的 R 命令来完成我的工作。

我们在 shell 脚本中做的这类工作（我们在其中添加了许多 linux 命令、awk/sed/perl 行

请提供一些有关如何执行此操作的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T06:31:11.850

假设这是我的分析管道：我想从具有均值`MU`和标准差的正态分布中生成 10 个数字`SD`，然后对它们执行其他操作：

```
MU <- 1  # the mean
SD <- .5 # standard deviation
NUMBER_TO_GENERATE <- 10

x <- rnorm(NUMBER_TO_GENERATE, mean=MU, sd=SD)
# ... more analysis here. 
```

目前我将这些命令复制粘贴到 R 终端中。有几种方法可以“自动化”这一点。

### 1.写一个函数

我将要执行的命令列表包含在一个大函数中，并将我的参数作为函数参数：

```
myFunction <- function( MU, SD, NUMBER_TO_GENERATE ) {
    x <- rnorm(NUMBER_TO_GENERATE, mean=MU, sd=SD)
    # ... rest of analysis
} 
```

现在在 RI 中可以做`myFunction(1, .5, 10)`，将我必须输入的命令数量减少到 1。

### 2\. 编写脚本

我可以写一个脚本文件`myScript.r`。这就像一个 bash 脚本，只是它是一个 R 命令列表。

我可以*把*我原来的命令列表放在那里，或者我可以把我的函数放在那里，并在底部加上一条附加语句`myFunction(1,.5,10)`。

然后*在*R 中，我可以这样做：

```
source('myScript.r') 
```

它将运行脚本中的所有 R 命令。

### 3.从外壳

如果你想从 shell 获取这个脚本，我建议你有一个`myScript.r`包含函数的文件。

然后检查[Rscript](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/Rscript.html)（你可以`?Rscript`从 R 中）。这是默认安装的 R，您可以使用它从 unix/windows 命令行执行 R 命令。

例如：

```
[mathematical.coffee@bar ~]$ Rscript -e '1+1'
[1] 2 
```

特别是，您可以将方法 1) 和 2) 与`Rscript`执行以下操作：

```
[mathematical.coffee@bar ~]$ Rscript -e 'source("myScript.R"); myFunction( 1, .5, 10 )' 
```

运行你的功能。

或者您当然可以只将 包含`myFunction(1, .5, 10)`在您的 中`myScript.R`，在这种情况下您可以这样做`Rscript myScript.R`。

前者的优点是如果你想做 shell 脚本（我只提到这一点是因为你在问题中提到了 bash 脚本）。在*bash*脚本中，我们可以执行以下操作：

```
#!/bin/bash
MU=1;
SD=.5;
NUM=10;

Rscript -e "source('myScript.r'); myFunction($MU,$SD,$NUM)" 
```

但是，我主张不要将 bash 脚本与 R 脚本混合使用——正如我之前提到的，我只提到这个选项是因为您在问题中提到了 bash/unix 脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:15:36.433

函数可能是您正在寻找的

```
foo <- function() {
 data <- data.frame(a=1:10, b=10:1)
 plot(data)

  # many more commands here
} 
```

然后你可以打电话`foo()`并运行所有命令。

有关更深入的信息，请参阅[R 帮助。](http://cran.r-project.org/doc/manuals/R-intro.html#Writing-your-own-functions)

您也`source()`可能感兴趣，请参阅`?source`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T07:14:42.097

另一种选择是使用 Rscript 运行您的程序。可以使用函数访问命令行中的参数`args <- commandArgs(trailingOnly=TRUE)`（它们作为列表返回）

例如，使用上面的 math.coffee 示例，您的脚本看起来像

输入“contributors()”以获取更多信息，输入“citation()”以了解如何在出版物中引用 R 或 R 包。

```
args <- commandArgs(trailingOnly=TRUE)
MU <- as.numeric(args[[1]])  # the mean
SD <- as.numeric(args[[2]]) # standard deviation
NUMBER_TO_GENERATE <- as.integer(args[[3]])

rnorm(NUMBER_TO_GENERATE, mean=MU, sd=SD)
doOtherStuff(x) 
```

然后你可以调用你的函数`Rscript myscript.R 2.0 0.1 100`

如果您想对参数做一些更有趣的事情（例如 --filename），您可以使用 optparse 库。[http://www.r-bloggers.com/passing-arguments-to-an-r-script-from-command-lines/](http://www.r-bloggers.com/passing-arguments-to-an-r-script-from-command-lines/)

# r - 使用 searchTwitter() 在 R 中使用最大推文的 twitter 包

> ID：10328066
> 
> 赞同：1
> 
> 时间：2012-04-26T06:07:16.163
> 
> 标签：r, twitter

在 R 中的 Twitter 包中，可以检索的最大推文数为 1500。如果我想检索 5000，我得到

```
 a<-searchTwitter("#cricket",n=5000)
      Error in out$error : $ operator is invalid for atomic vectors 
```

有什么方法可以帮助获得更多针对特定关键字的推文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:55:15.770

如果您未通过身份验证，则 1500 是 Twitter API ( [https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search) ) 施加的限制，尽管您的错误消息与我的不同，即奇怪的：

```
 install.packages("twitteR")
          library(twitteR)
          BBC <- searchTwitter("BBC", n=1500)
          length(BBC)
          [1] 1500
          BBC <- searchTwitter("BBC", n=5000)
          Error in .self$twFromJSON(out) : Error: Invalid query 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T10:21:59.283

1500 限制是由`twitteR`包强加的，API 的限制是基于 15 分钟窗口内的请求数。它在[这里](https://dev.twitter.com/rest/public/rate-limiting)解释。

# java - 我如何在一个类中有一个 JTextArea，并在另一个类中打印到一个 JTextArea？

> ID：10328074
> 
> 赞同：0
> 
> 时间：2012-04-26T06:08:09.030
> 
> 标签：java, swing, user-interface, jtextarea

我有两节课。一个用于运行程序，另一个用于作为 GUI。使用简单的 out.print 构建了第一个，但后来我意识到我需要将输出放在`JTextArea`控制台而不是控制台中。所以我为它整理了一个 gui，但我不知道是把 gui 放在我的跑步课上还是从跑步课上调用我的 gui。这是运行代码

```
import com.jcraft.jsch.*;
import java.awt.*;
import javax.swing.*;
import javax.swing.JTextArea;
import java.util.Vector;

public class Sftp{
static JTextArea guiConsole = new JTextArea(10,10);
  public static void main(String[] arg){

    try{
      JSch jsch=new JSch();

      String host=null;
      if(arg.length>0){
        host=arg[0];
      }
      else{
        host=JOptionPane.showInputDialog("Enter username@hostname",
                                         System.getProperty("user.name")+
                                         "@localhost"); 
      }
      String user=host.substring(0, host.indexOf('@'));
      host=host.substring(host.indexOf('@')+1);
      int port=22;

      Session session=jsch.getSession(user, host, port);

      // username and password will be given via UserInfo interface.
      UserInfo ui=new MyUserInfo();
      session.setUserInfo(ui);

      session.connect();

      Channel channel=session.openChannel("sftp");
      channel.connect();
      ChannelSftp c=(ChannelSftp)channel;

      java.io.InputStream in=System.in;

      java.util.Vector<String> cmds=new java.util.Vector<String>();
      byte[] buf=new byte[1024];
      int i;
      String str;
      int level=0;

      while(true){
    guiConsole.append("sftp> ");
    cmds.removeAllElements();
        i=in.read(buf, 0, 1024);
    if(i<=0)break;

        i--;
        if(i>0 && buf[i-1]==0x0d)i--;
        //str=new String(buf, 0, i);
        //guiConsole.append("|"+str+"|");
    int s=0;
    for(int ii=0; ii<i; ii++){
          if(buf[ii]==' '){
            if(ii-s>0){ cmds.addElement(new String(buf, s, ii-s)); }
        while(ii<i){if(buf[ii]!=' ')break; ii++;}
        s=ii;
      }
    }
    if(s<i){ cmds.addElement(new String(buf, s, i-s)); }
    if(cmds.size()==0)continue;

    String cmd=cmds.elementAt(0);
    if(cmd.equals("quit")){
          c.quit();
      break;
    }
    if(cmd.equals("exit")){
          c.exit();
      break;
    }
    if(cmd.equals("rekey")){
      session.rekey();
      continue;
    }
    if(cmd.equals("compression")){
          if(cmds.size()<2){
        guiConsole.append("compression level: "+level);
            continue;
      }
      try{
        level=Integer.parseInt(cmds.elementAt(1));
        if(level==0){
          session.setConfig("compression.s2c", "none");
          session.setConfig("compression.c2s", "none");
        }
        else{
              session.setConfig("compression.s2c", "zlib@openssh.com,zlib,none");
              session.setConfig("compression.c2s", "zlib@openssh.com,zlib,none");
        }
      }
      catch(Exception e){}
          session.rekey();
      continue;
    }
    if(cmd.equals("cd") || cmd.equals("lcd")){
          if(cmds.size()<2) continue;
      String path=cmds.elementAt(1);
      try{
        if(cmd.equals("cd")) c.cd(path);
        else c.lcd(path);
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("rm") || cmd.equals("rmdir") || cmd.equals("mkdir")){
          if(cmds.size()<2) continue;
      String path=cmds.elementAt(1);
      try{
        if(cmd.equals("rm")) c.rm(path);
        else if(cmd.equals("rmdir")) c.rmdir(path);
        else c.mkdir(path);
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("chgrp") || cmd.equals("chown") || cmd.equals("chmod")){
          if(cmds.size()!=3) continue;
      String path=cmds.elementAt(2);
      int foo=0;
      if(cmd.equals("chmod")){
            byte[] bar=cmds.elementAt(1).getBytes();
            int k;
            for(int j=0; j<bar.length; j++){
              k=bar[j];
          if(k<'0'||k>'7'){foo=-1; break;}
          foo<<=3;
          foo|=(k-'0');
        }
        if(foo==-1)continue;
      }
      else{
        try{foo=Integer.parseInt(cmds.elementAt(1));}
        catch(Exception e){continue;}
      }
      try{
        if(cmd.equals("chgrp")){ c.chgrp(foo, path); }
        else if(cmd.equals("chown")){ c.chown(foo, path); }
        else if(cmd.equals("chmod")){ c.chmod(foo, path); }
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("pwd") || cmd.equals("lpwd")){
           str=(cmd.equals("pwd")?"Remote":"Local");
       str+=" working directory: ";
          if(cmd.equals("pwd")) str+=c.pwd();
      else str+=c.lpwd();
      guiConsole.append(str);
      continue;
    }
    if(cmd.equals("ls") || cmd.equals("dir")){
      String path=".";
      if(cmds.size()==2) path=cmds.elementAt(1);
      try{
       Vector vv=c.ls(path);
        if(vv!=null){
          for(int ii=0; ii<vv.size(); ii++){
          //    guiConsole.appendln(vv.elementAt(ii).toString());

                Object obj=vv.elementAt(ii);
                if(obj instanceof com.jcraft.jsch.ChannelSftp.LsEntry){
                   guiConsole.append(((com.jcraft.jsch.ChannelSftp.LsEntry)obj).getLongname());
                }

          }
        }
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("lls") || cmd.equals("ldir")){
      String path=".";
      if(cmds.size()==2) path=cmds.elementAt(1);
      try{
        java.io.File file=new java.io.File(path);
        if(!file.exists()){
          guiConsole.append(path+": No such file or directory");
              continue; 
            }
        if(file.isDirectory()){
          String[] list=file.list();
          for(int ii=0; ii<list.length; ii++){
        guiConsole.append(list[ii]);
          }
          continue;
        }
        guiConsole.append(path);
      }
      catch(Exception e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("get") || 
       cmd.equals("get-resume") || cmd.equals("get-append") || 
       cmd.equals("put") || 
       cmd.equals("put-resume") || cmd.equals("put-append")
       ){
      if(cmds.size()!=2 && cmds.size()!=3) continue;
      String p1=cmds.elementAt(1);
          //  String p2=p1;
      String p2=".";
      if(cmds.size()==3)p2=cmds.elementAt(2);
      try{
        SftpProgressMonitor monitor=new MyProgressMonitor();
        if(cmd.startsWith("get")){
          int mode=ChannelSftp.OVERWRITE;
          if(cmd.equals("get-resume")){ mode=ChannelSftp.RESUME; }
          else if(cmd.equals("get-append")){ mode=ChannelSftp.APPEND; } 
          c.get(p1, p2, monitor, mode);
        }
        else{ 
          int mode=ChannelSftp.OVERWRITE;
          if(cmd.equals("put-resume")){ mode=ChannelSftp.RESUME; }
          else if(cmd.equals("put-append")){ mode=ChannelSftp.APPEND; } 
          c.put(p1, p2, monitor, mode); 
        }
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("ln") || cmd.equals("symlink") || cmd.equals("rename")){
          if(cmds.size()!=3) continue;
      String p1=cmds.elementAt(1);
      String p2=cmds.elementAt(2);
      try{
        if(cmd.equals("rename")) c.rename(p1, p2);
        else c.symlink(p1, p2);
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("stat") || cmd.equals("lstat")){
          if(cmds.size()!=2) continue;
      String p1=cmds.elementAt(1);
      SftpATTRS attrs=null;
      try{
        if(cmd.equals("stat")) attrs=c.stat(p1);
        else attrs=c.lstat(p1);
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      if(attrs!=null){
            guiConsole.append(attrs.toString());
      }
      else{
      }
      continue;
    }
    if(cmd.equals("readlink")){
          if(cmds.size()!=2) continue;
      String p1=cmds.elementAt(1);
      String filename=null;
      try{
        filename=c.readlink(p1);
            guiConsole.append(filename);
      }
      catch(SftpException e){
        guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("realpath")){
          if(cmds.size()!=2) continue;
      String p1=cmds.elementAt(1);
      String filename=null;
      try{
        filename=c.realpath(p1);
            guiConsole.append(filename);
      }
      catch(SftpException e){
          guiConsole.append(e.toString());
      }
      continue;
    }
    if(cmd.equals("version")){
      guiConsole.append("SFTP protocol version "+c.version());
      continue;
    }
    if(cmd.equals("help") || cmd.equals("?")){
      guiConsole.append(help);
      continue;
    }
        guiConsole.append("unimplemented command: "+cmd);
      }
      session.disconnect();
    }
    catch(Exception e){
      guiConsole.append(e.toString());
    }
    System.exit(0);
  }

  public static class MyUserInfo implements UserInfo, UIKeyboardInteractive{
    public String getPassword(){ return passwd; }
    public boolean promptYesNo(String str){
      Object[] options={ "yes", "no" };
      int foo=JOptionPane.showOptionDialog(null, 
             str,
             "Warning", 
             JOptionPane.DEFAULT_OPTION, 
             JOptionPane.WARNING_MESSAGE,
             null, options, options[0]);
       return foo==0;
    }

    String passwd;
    JTextField passwordField=(JTextField)new JPasswordField(20);

    public String getPassphrase(){ return null; }
    public boolean promptPassphrase(String message){ return true; }
    public boolean promptPassword(String message){
      Object[] ob={passwordField}; 
      int result=
      JOptionPane.showConfirmDialog(null, ob, message,
                    JOptionPane.OK_CANCEL_OPTION);
      if(result==JOptionPane.OK_OPTION){
    passwd=passwordField.getText();
    return true;
      }
      else{ return false; }
    }
    public void showMessage(String message){
      JOptionPane.showMessageDialog(null, message);
    }
    final GridBagConstraints gbc = 
      new GridBagConstraints(0,0,1,1,1,1,
                             GridBagConstraints.NORTHWEST,
                             GridBagConstraints.NONE,
                             new Insets(0,0,0,0),0,0);
    private Container panel;
    public String[] promptKeyboardInteractive(String destination,
                                              String name,
                                              String instruction,
                                              String[] prompt,
                                              boolean[] echo){
      panel = new JPanel();
      panel.setLayout(new GridBagLayout());

      gbc.weightx = 1.0;
      gbc.gridwidth = GridBagConstraints.REMAINDER;
      gbc.gridx = 0;
      panel.add(new JLabel(instruction), gbc);
      gbc.gridy++;

      gbc.gridwidth = GridBagConstraints.RELATIVE;

      JTextField[] texts=new JTextField[prompt.length];
      for(int i=0; i<prompt.length; i++){
        gbc.fill = GridBagConstraints.NONE;
        gbc.gridx = 0;
        gbc.weightx = 1;
        panel.add(new JLabel(prompt[i]),gbc);

        gbc.gridx = 1;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.weighty = 1;
        if(echo[i]){
          texts[i]=new JTextField(20);
        }
        else{
          texts[i]=new JPasswordField(20);
        }
        panel.add(texts[i], gbc);
        gbc.gridy++;
      }

      if(JOptionPane.showConfirmDialog(null, panel, 
                                       destination+": "+name,
                                       JOptionPane.OK_CANCEL_OPTION,
                                       JOptionPane.QUESTION_MESSAGE)
         ==JOptionPane.OK_OPTION){
        String[] response=new String[prompt.length];
        for(int i=0; i<prompt.length; i++){
          response[i]=texts[i].getText();
        }
    return response;
      }
      else{
        return null;  // cancel
      }
    }
  }

/*
  public static class MyProgressMonitor implements com.jcraft.jsch.ProgressMonitor{
    JProgressBar progressBar;
    JFrame frame;
    long count=0;
    long max=0;

    public void init(String info, long max){
      this.max=max;
      if(frame==null){
        frame=new JFrame();
    frame.setSize(200, 20);
        progressBar = new JProgressBar();
      }
      count=0;

      frame.setTitle(info);
      progressBar.setMaximum((int)max);
      progressBar.setMinimum((int)0);
      progressBar.setValue((int)count);
      progressBar.setStringPainted(true);

      JPanel p=new JPanel();
      p.add(progressBar);
      frame.getContentPane().add(progressBar);
      frame.setVisible(true);
      System.guiConsole.appendln("!info:"+info+", max="+max+" "+progressBar);
    }
    public void count(long count){
      this.count+=count;
      System.guiConsole.appendln("count: "+count);
      progressBar.setValue((int)this.count);
    }
    public void end(){
      System.guiConsole.appendln("end");
      progressBar.setValue((int)this.max);
      frame.setVisible(false);
    }
  }
*/

  public static class MyProgressMonitor implements SftpProgressMonitor{
    ProgressMonitor monitor;
    long count=0;
    long max=0;
    public void init(int op, String src, String dest, long max){
      this.max=max;
      monitor=new ProgressMonitor(null, 
                                  ((op==SftpProgressMonitor.PUT)? 
                                   "put" : "get")+": "+src, 
                                  "",  0, (int)max);
      count=0;
      percent=-1;
      monitor.setProgress((int)this.count);
      monitor.setMillisToDecideToPopup(1000);
    }
    private long percent=-1;
    public boolean count(long count){
      this.count+=count;

      if(percent>=this.count*100/max){ return true; }
      percent=this.count*100/max;

      monitor.setNote("Completed "+this.count+"("+percent+"%) out of "+max+".");     
      monitor.setProgress((int)this.count);

      return !(monitor.isCanceled());
    }
    public void end(){
      monitor.close();
    }
  }

  private static String help =
"      Available commands:\n"+
"      * means unimplemented command.\n"+
"cd path                       Change remote directory to 'path'\n"+
"lcd path                      Change local directory to 'path'\n"+
"chgrp grp path                Change group of file 'path' to 'grp'\n"+
"chmod mode path               Change permissions of file 'path' to 'mode'\n"+
"chown own path                Change owner of file 'path' to 'own'\n"+
"help                          Display this help text\n"+
"get remote-path [local-path]  Download file\n"+
"get-resume remote-path [local-path]  Resume to download file.\n"+
"get-append remote-path [local-path]  Append remote file to local file\n"+
"*lls [ls-options [path]]      Display local directory listing\n"+
"ln oldpath newpath            Symlink remote file\n"+
"*lmkdir path                  Create local directory\n"+
"lpwd                          Print local working directory\n"+
"ls [path]                     Display remote directory listing\n"+
"*lumask umask                 Set local umask to 'umask'\n"+
"mkdir path                    Create remote directory\n"+
"put local-path [remote-path]  Upload file\n"+
"put-resume local-path [remote-path]  Resume to upload file\n"+
"put-append local-path [remote-path]  Append local file to remote file.\n"+
"pwd                           Display remote working directory\n"+
"stat path                     Display info about path\n"+
"exit                          Quit sftp\n"+
"quit                          Quit sftp\n"+
"rename oldpath newpath        Rename remote file\n"+
"rmdir path                    Remove remote directory\n"+
"rm path                       Delete remote file\n"+
"symlink oldpath newpath       Symlink remote file\n"+
"readlink path                 Check the target of a symbolic link\n"+
"realpath path                 Canonicalize the path\n"+
"rekey                         Key re-exchanging\n"+
"compression level             Packet compression will be enabled\n"+
"version                       Show SFTP version\n"+
"?                             Synonym for help";
} 
```

这是gui。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CommandBox extends JPanel implements ActionListener {
protected JTextField textField;
protected JTextArea textArea;
private final static String newline = "\n";

public CommandBox() {
    super(new GridBagLayout());

    textField = new JTextField(20);
    textField.addActionListener(this);

    textArea = new JTextArea(5, 20);
    textArea.setEditable(false);
    JScrollPane scrollPane = new JScrollPane(textArea);

    //Add Components to this panel.
    GridBagConstraints c = new GridBagConstraints();
    c.gridwidth = GridBagConstraints.REMAINDER;

    c.fill = GridBagConstraints.HORIZONTAL;
    add(textField, c);

    c.fill = GridBagConstraints.BOTH;
    c.weightx = 1.0;
    c.weighty = 1.0;
    add(scrollPane, c);
}

public void actionPerformed(ActionEvent evt) {
    String text = textField.getText();
    textArea.append(text + newline);
    textField.selectAll();

    //Make sure the new text is visible, even if there
    //was a selection in the text area.
    textArea.setCaretPosition(textArea.getDocument().getLength());
}

private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("VSI");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Add contents to the window.
    frame.add(new CommandBox());

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    //Schedule a job for the event dispatch thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
} 
```

我的问题是你会怎么做。你是程序员，比我熟练得多，知识渊博。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:23:13.097

如果为`JTextArea`in GUI 类创建 getter，则可以`JTextArea`通过在要输出文本的类中创建对象来设置文本。请参见下面的示例：

```
CommandBox commandBox = new CommandBox();
commandBox.getTextArea().setText("Your text"); 
```

# javascript - 错误“未定义”为空或不是 Internet Explorer 中的对象

> ID：10328075
> 
> 赞同：2
> 
> 时间：2012-04-26T06:08:21.533
> 
> 标签：javascript, internet-explorer, magento

在我的 magento 代码中有 1 个文件。文件名 - header.phtml

我收到错误，例如“未定义”为空或不是对象。

如果我从 IE 本身调试该页面，它将破坏“var hashIndex = frameId.indexOf('#');”中的代码 从以下代码。

```
function getFrameId()
{
    var qs = parseQueryString(window.location.href);
    var frameId = qs["frameId"];

    var hashIndex = frameId.indexOf('#');

    if (hashIndex > -1)
    {
        frameId = frameId.substring(0, hashIndex);
    }

    return frameId;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T03:16:09.623

IE 不支持 indexOf。您将需要编写自己的 indexOf 函数。例如：

```
//Implement indexOf. (IE/mshta doesn't have it)
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (obj, fromIndex) {
    if (fromIndex == null) {
        fromIndex = 0;
    } else if (fromIndex < 0) {
        fromIndex = Math.max(0, this.length + fromIndex);
    }
    for (var i = fromIndex, j = this.length; i < j; i++) {
        if (this[i] === obj)
            return i;
    }
    return -1;
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:10:56.407

'undefined' 为 null 或不是对象意味着您调用任何方法的 java 脚本对象为 null 或不支持该特定方法的值。

在这种情况下`var frameId = qs["frameId"];`，我认为这返回了 null，你能看到 qs 包含的内容以及是否有任何与 frameid 键关联的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:44:18.863

尝试

```
 console.debug(qs); 
```

在 Firefox 或 chrome 中检查该对象。您不仅可以确认对象中是否有 frameId 属性，还可以检查该对象的所有内容，并可能在不同的对象键中找到您要查找的信息.

# android - 取消选中时Android Checkbox要求确认两次

> ID：10328078
> 
> 赞同：1
> 
> 时间：2012-04-26T06:08:40.933
> 
> 标签：android, checkbox, dialog, oncheckedchanged

我的代码中有一个 CheckBox，如果它被选中，用户不应该只是取消选中它。这就是我决定在 Checkbox 上实现 onCheckedChangeListener 的原因。

如果选中并单击，则要求确认，否则不要求确认。当要求确认（通过对话框）并且用户取消时，复选框必须保持（或再次设置为）选中状态。所以我在单击取消按钮时实现了“CheckBox.setChecked(true)”，现在我的确认被询问了两次。我不知道如何摆脱这个。

以下是相关代码：

```
 mEventAttendingCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {      
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(isChecked){
                //do nothing
            } else {
                Context mContext = EventSingleViewActivity.this;
                final Dialog dialog = new Dialog(mContext);

                dialog.setCancelable(true);

                Button confirmButton = (Button) dialog.findViewById(R.id.confirmButton);    
                confirmButton.setOnClickListener(new View.OnClickListener() { 
                    @Override
                    public void onClick(View v){ 
                        //do something
                    }
                });

                Button cancelButton = (Button) dialog.findViewById(R.id.cancelButton);  
                cancelButton.setOnClickListener(new View.OnClickListener() { 
                    @Override
                    public void onClick(View v) { 
                        dialog.dismiss();
                        mEventAttendingCheckBox.setChecked(true);
                    }
                });

                dialog.show();

            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T06:15:24.330

实现 on `CLickListener instead of onCheckChanged`.. 因为 on CLick 仅在用户单击它时才被调用，.. 但是即使您`setChecked()`在代码中说 OnCheckChanged 也会被调用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:33:31.567

使用相同的代码`boolean flag= false`

在您的其他条件检查中，

```
if(flag == false)
 // open dialog
else
 // just uncheck button 
```

首先设置`flag = true`确认按钮的onClick，然后取消选中该复选框。并`flag = false`首先设置取消按钮的onClick，然后选中复选框。

# iphone - 如何以编程方式在 iPhone 应用程序中编辑和标记视频？

> ID：10328079
> 
> 赞同：0
> 
> 时间：2012-04-26T06:08:42.850
> 
> 标签：iphone, video

在 iPhone 应用程序中，我们如何以编程方式编辑录制的视频？是否有任何特定的 API 可以逐帧编辑视频？

另外，我想用一些文本标记一个视频帧。就像我们对 FB 上的照片所做的那样，只有在这种情况下，它必须对视频进行标记。播放视频时，标签必须可见。

任何帮助都会有所帮助...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:25:09.780

[AVFoundation](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)是您可能正在寻找的 API。`AVFoundation`不仅仅是您可能认为的媒体播放器。它还能够进行视频/音频编辑。

去年的 WWDC 会议是提供更多信息和示例的一个非常好的来源。

# powershell - 输出 PSBound 参数

> ID：10328083
> 
> 赞同：5
> 
> 时间：2012-04-26T06:09:34.607
> 
> 标签：powershell, parameters

我想输出已传递给我的脚本以包含在电子邮件中的任何参数的值。

我试过这个：

```
foreach ($psbp in $PSBoundParameters)
{
    $messageBody += $psbp | out-string + "`r`n"
} 
```

但它没有用。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T07:59:13.053

$PSBoundParameters 是一个哈希表，使用 GetEnumerator 展开它的项目

```
foreach($psbp in $PSBoundParameters.GetEnumerator())
{
    "Key={0} Value={1}" -f $psbp.Key,$psbp.Value
}

function Get-PSBoundParameters
{
    [CmdletBinding()]    
    Param($param1,$param2,$param3)

    foreach($psbp in $PSBoundParameters.GetEnumerator())
    {
            "Key={0} Value={1}" -f $psbp.Key,$psbp.Value
    }
}

PS> Get-PSBoundParameters p1 p2 p3 | ft -a

Key=param1 Value=p1
Key=param2 Value=p2
Key=param3 Value=p3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:51:10.213

```
function test 
{
    param($a, $b)

    $psboundparameters.Values
    $psboundparameters.Keys
}

test "Hello" "World" 
```

# javascript - JavaScript 错误“函数外的返回语句”

> ID：10328084
> 
> 赞同：0
> 
> 时间：2012-04-26T06:09:43.810
> 
> 标签：javascript, asp.net, c#-4.0

这是我的代码。插入查询触发后，我在代码中调用 JavaScript 函数。但我收到错误“函数外的返回语句”。

```
ClientScript.RegisterStartupScript(GetType(), "id", "return showPatientInfo('" + txtPatientID.Text + "');",true);

function showPatientInfo(pid) {
    //alert(pid);
    RedirectToPage("Create_Order.aspx", "pid=" + pid);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:54:56.917

我真的很想将您的代码重写为更惯用的 JavaScript。在此过程中，我发现 formBypassQueryString 变量从未被分配，这可能会导致问题。这是我的版本：

```
function showPatientInfo(pid) {
  redirectToPage("Create_Order.aspx", "pid=" + pid);
  return false;
}

function redirectToPage(pageName, queryString) {
  if (pageName === "" || queryString === "") return;

  var keyValues = queryString.split("&"),
      form = createQueryStringForm(pageName);

  for (var i = 0; i < keyValues.length; i++) {
    var keyValue = keyValues[i].split("="),
        field = createQueryStringField(keyValue[0], keyValue[1]);

    form.appendChild(field);
  }

  form.submit();
}

function createQueryStringField(name, value){
  var field = document.createElement('input');

  field.setAttribute('type', 'hidden')
  field.setAttribute('name', name)
  field.setAttribute('value', value)

  return field;
}

function createQueryStringForm(pageName){
  var form = document.createElement('form');

  form.setAttribute('id', 'form-bypass-query-string');
  form.setAttribute('method', 'POST');
  form.setAttribute('action', pageName);

  return form;
} 
```

# attributes - 如何在 XSD 中为受限属性添加限制

> ID：10328085
> 
> 赞同：0
> 
> 时间：2012-04-26T06:09:52.110
> 
> 标签：attributes, for-loop, xsd, restrictions

我的要求是：我需要验证一个 xml，它有一个元素“Term”，其属性为 termType、ValueName、Value。我需要对 termType 添加一个限制，这样，当我将**termType**属性值设为“表达式”时，ValueName 应该只能是 IF 或 ELSE 或 THEN，如果**valueName**值为“IF”，则**值**应该是“1”只要。我怎样才能做到这一点？

xml 看起来像：

```
<Term termType="Input" value="97397D89-C044-47CC-8153-267CBBE71D29" valueName="PolicyType"/>
**<Term termType="expression" value="1" valueName="IF"/>**
<Term termType="mask" value="" valueName=""/> 
```

我试过的对应XSD是：

```
<xs:simpleType name="termType">
 <xs:restriction base="xs:string">
              <xs:enumeration value="expression" />...
 </xs:restriction>
</xs:simpleType>
<xs:complexType name="TermType">
 <xs:attribute name="termType" use="required" type="termType" />
 <xs:attribute name="value" use="required" type="xs:string" />
 <xs:attribute name="valueName" use="required" type="xs:string" />
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:13:57.813

这种条件限制是相当常见的要求，但 XSD 不支持。

# ruby - URI.unescape 在尝试将“%C3%9Fą”转换为“ßą”时崩溃

> ID：10328086
> 
> 赞同：2
> 
> 时间：2012-04-26T06:09:55.833
> 
> 标签：ruby, encoding, character-encoding, crash, uri

我正在使用 [URI.unescape](http://ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI/Escape.html#method-i-unescape)转义文本，不幸的是我遇到了奇怪的错误：

```
 # encoding: utf-8
 require('uri')
 URI.unescape("%C3%9Fą") 
```

结果是

```
 C:/Ruby193/lib/ruby/1.9.1/uri/common.rb:331:in `gsub': incompatible character encodings: ASCII-8BIT and UTF-8 (Encoding::CompatibilityError)
    from C:/Ruby193/lib/ruby/1.9.1/uri/common.rb:331:in `unescape'
    from C:/Ruby193/lib/ruby/1.9.1/uri/common.rb:649:in `unescape'
    from exe/fail.rb:3:in `<main>' 
```

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T06:16:49.517

不知道为什么，但你可以使用`CGI.unescape`方法：

```
# encoding: utf-8
require 'cgi'
CGI.unescape("%C3%9Fą") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T21:17:56.797

`URI.unescape`非 ASCII 输入的实现被破坏。[1.9.3 版本](https://github.com/ruby/ruby/blob/ruby_1_9_3/lib/uri/common.rb#L330)如下所示：

```
def unescape(str, escaped = @regexp[:ESCAPED])
  str.gsub(escaped) { [$&[1, 2].hex].pack('C') }.force_encoding(str.encoding)
end 
```

使用的正则表达式是`/%[a-fA-F\d]{2}/`. 所以它通过字符串寻找一个百分号后跟两个十六进制数字；块`$&`中将是匹配的文本（例如'%C3'）并且`$&[1,2]`是没有前导百分号（`'C3'`）的匹配文本。然后我们调用[`String#hex`](https://ruby-doc.org/core/String.html#method-i-hex)将该十六进制数转换为 Fixnum ( `195`) 并将其包装在 Array ( `[195]`) 中，以便我们可以使用它[`Array#pack`](https://ruby-doc.org/core/Array.html#method-i-pack)来为我们进行字节修饰。问题是这`pack`给了我们一个二进制字节：

```
> puts [195].pack('C').encoding
ASCII-8BIT 
```

ASCII-8BIT 编码也称为“二进制”（即没有特定编码的纯字节）。然后该块返回该字节并[`String#gsub`](https://ruby-doc.org/core/String.html#method-i-gsub)尝试插入正在处理的 UTF-8 编码副本中`str`，`gsub`您会得到错误：

> 不兼容的字符编码：ASCII-8BIT 和 UTF-8 (Encoding::CompatibilityError)

因为您不能（通常）将二进制字节填充到 UTF-8 字符串中；你经常可以侥幸逃脱：

```
URI.unescape("%C3%9F")         # Works
URI.unescape("%C3µ")           # Fails
URI.unescape("µ")              # Works, but nothing to gsub here
URI.unescape("%C3%9Fµ")        # Fails
URI.unescape("%C3%9Fpancakes") # Works 
```

一旦您开始将非 ASCII 数据混合到您的 URL 编码字符串中，事情就会开始分崩离析。

一个简单的解决方法是在尝试解码之前将字符串切换为二进制：

```
def unescape(str, escaped = @regexp[:ESCAPED])
  encoding = str.encoding
  str = str.dup.force_encoding('binary')
  str.gsub(escaped) { [$&[1, 2].hex].pack('C') }.force_encoding(encoding)
end 
```

另一种选择是将 推`force_encoding`入块中：

```
def unescape(str, escaped = @regexp[:ESCAPED])
  str.gsub(escaped) { [$&[1, 2].hex].pack('C').force_encoding(encoding) }
end 
```

我不确定为什么`gsub`在某些情况下失败但在其他情况下成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T01:27:18.283

为了扩展 Vasiliy 建议使用的答案`CGI.unescape`：

从 Ruby 2.5.0 开始，`URI.unescape`已过时。

请参阅[https://ruby-doc.org/stdlib-2.5.0/libdoc/uri/rdoc/URI/Escape.html#method-i-unescape](https://ruby-doc.org/stdlib-2.5.0/libdoc/uri/rdoc/URI/Escape.html#method-i-unescape)。

“此方法已过时，不应使用。取而代之的是，根据您的具体用例使用 CGI.unescape、URI.decode_www_form 或 URI.decode_www_form_component。”

# iphone - 添加动画以显示将商品添加到标签栏徽章的用户

> ID：10328087
> 
> 赞同：-4
> 
> 时间：2012-04-26T06:10:03.263
> 
> 标签：iphone

我注意到有一些应用程序，当我点击一个按钮时，它会显示一个动画，看起来像是从按钮掉落到 uitabbaritem，并且 uitabbaritem 的徽章会增加。

我尝试在我的应用程序中进行粉碎，但没有结果

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:02:23.853

我写了[一篇博客文章](http://ronnqvist.tumblr.com/post/23234805389/unobtrusive-hints-of-joy "将视图动画化到标签栏项目")，描述了如何将视图动画化到标签栏项目以及您可能遇到的问题。

# jsf - 如何改进现有 Struts Web 应用程序的 UI？

> ID：10328091
> 
> 赞同：0
> 
> 时间：2012-04-26T06:10:24.323
> 
> 标签：jsf, user-interface, struts, primefaces

在 Struts 中创建了一个现有的 Web 应用程序。需要完全重做 UI。改善 UI 的最佳方法是什么？在现有的 Struts 代码中引入像 PrimeFaces 这样的 JSF 组件是个好主意吗？或者有哪些可用选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:52:05.657

很难将 Struts 与 JSF 结合起来，因为这是两个试图做同样事情的不同框架。因此，在实践中，您最终会重写您的应用程序。JSF 页面和 JSP（由 Struts 使用）具有不同的生命周期，JSF Bean 的工作方式与 Struts Actions 不同。

关键是要利用你已经拥有的东西并使你的 JSP 看起来更好。我会选择好的 JavaScript UI 库并使用它重写 JSP 页面。如果您想要完整的解决方案，ExtJS 是一个非常好的解决方案。如果您想创建自定义解决方案，请查看 jQuery、Backbone 和 Mustache 模板引擎。

# c# - 泛化构造函数以在 C# 中对数组进行操作

> ID：10328097
> 
> 赞同：3
> 
> 时间：2012-04-26T06:11:21.097
> 
> 标签：c#, arrays

我想知道如何在数组的每个元素上应用构造函数，然后返回一个构造对象数组。具体来说，我正在使用 C# 的`TreeNode`. 我想要的概念如下：

```
string[] animals = {"dog","cat","mouse"};
TreeNode[] animalNodes = TreeNode[](animals); 
```

哪里`TreeNode[](animals)`会产生累积效应

```
animalNodes[0] = TreeNode("dog");
animalNodes[1] = TreeNode("cat");
animalNodes[2] = TreeNode("mouse"); 
```

我知道我可以`foreach`手动加载这样的结构，但如果可能的话，我正在寻找优雅的“单线”方式。我一直在努力寻找如何做到这一点，但找不到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T06:15:14.890

一些 LINQ 可以解决问题：

```
TreeNode[] animalNodes = animals.Select(a => new TreeNode(a)).ToArray(); 
```

扩展方法在[`Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)列表的每个成员上执行指定的委托（在此处通过 lambda 指定），并创建结果列表（`IEnumerable<TreeNode>`在本例中）。然后[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)使用扩展方法从结果中创建一个数组。

或者，您可以使用 LINQ 的查询语法：

```
TreeNode[] animalNodes = (from a in animals select new TreeNode(a)).ToArray(); 
```

对于这两个示例，编译器生成的代码是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:23:02.487

这是一种不同的语法，它会给出与您已经得到的其他正确答案相同的结果。

```
TreeNode[] animalNodes = (from animal in animals select new TreeNode(animal)).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:47:37.503

虽然其他答案可能有效，但我提出以下替代方案。

我这样做的主要原因是其他示例要求您实际上使代码看起来*更*复杂一些，很明显您正在寻找清理代码，并使分配看起来更简单。如果您要在应用程序的不同位置创建这些 TreeNode，此解决方案也将为您提供帮助（其他解决方案将要求您将分配代码复制并粘贴到您正在创建 TreeNode 数组的每个位置。

让你的分配代码更干净的成本，是将混乱转移到其他地方（但老实说并不是很混乱，因为它真的很简单）

### 首先，创建一个类来为您构建 TreeNode 数组

```
public static class TreeNodeBuilder
{
    public static TreeNode[] FromStringArray(String[] array)
    {
        TreeNode[] returnValue = new TreeNode[array.Length];

        for(int i = 0; i < array.Length; i++)
        {
            returnValue[i] = new TreeNode(array[i]);
        }

        return returnValue;
    }
} 
```

### 然后在您的分配代码中，您可以使用以下内容：

```
String[] animals = {"dog", "cat", "mouse"};
TreeNode[] animalNodes = TreeNodeBuilder.FromStringArray(animals); 
```

### 结论

This (IMHO) is a better option than using LINQ as the other answers provide, mostly for code clarity, maintainability, and the separation you can achieve by putting all of this logic in a different file (a file like `TreeNodeBuilder.cs`).

For what it is worth you could also use the LINQ code provided in the other answers inside the above `FromStringArray` function (if you wanted to get the best of both worlds).

Anyways, my two cents :) Hope you find it helpful.

# javascript - 如何检测 div 上的内容更改事件

> ID：10328102
> 
> 赞同：15
> 
> 时间：2012-04-26T06:11:50.087
> 
> 标签：javascript, jquery, dom, html

我正在尝试让编辑器到目前为止一切正常，但现在我需要制作一个处理程序，它可以检测 div 中所做的任何更改或 div 中编辑的任何内容

```
<?php $row="testing content" ?>
<!-- my editor section-->
<div id="editor">
    <div id="options">
        <span><a id="iimg">Insert Image from gallery</a></span>
        <span>Upload image to gallery</span>
        <span><a id="iheading">Heading</a></span>
    </div>
    <div id="product_descriptioncontent" contenteditable="true"><?php echo $row; ?>
    </div><!-- viewable editor -->
    <input type="hidden" name="textareacontent" value="" id="textareacontent" >
    <!-- hidden field to submit values -->
</div>
<!-- end of editor section -->
<div id="imc"></div> <!-- image gallery loading section -->

<script>
$(document).ready(function(){

    $('#iheading').click(function(){
    $('#product_descriptioncontent').append('<h1>Heading</h1>');
    });

    $('#iimg').click(function(){
        $('#imc').load('imagegallery.php',function(){
        $('#gallery img').on('click',function(){
            $('#product_descriptioncontent').append('<img  src="http://localhost/sites/site_pics/otherpic/1.png"><br>&nbsp;');
    });
    });
    });
    $('#product_descriptioncontent').change(function(){
    alert("pppp");// how to capture this event
    });
});
</script> 
```

我在 jsfiddle [http://jsfiddle.net/bipin000/UJvxM/1/](http://jsfiddle.net/bipin000/UJvxM/1/)上放置了一些代码， 感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:34:48.997

尝试为[DOMCharacterDataModified](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent)添加处理程序。可能是更清洁的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T07:20:24.253

你喜欢吗？[http://jsfiddle.net/Ralt/hyPQC/](http://jsfiddle.net/Ralt/hyPQC/)

```
document.getElementById( 't' ).onkeypress = function( e ) {
    var evt = e || window.event
    alert( String.fromCharCode( evt.which ) )
}​ 
```

它不是在等待一个`change`事件，它有点毫无意义。

相反，它正在监听`onkeypress`事件。每次用户更改此 div 的内容（通过向其添加字符）时，都会触发该事件。

您还可以查看如何点击角色（使用`String.fromCharCode( evt.which )`）。

PS：针对您的特定情况的完整 jQuery 解决方案将是：

```
$( '#product_descriptioncontent' ).on( 'keypress', function() {
    $( '#your-hidden-input' ).val( $( this ).text() )
    // Or
    $( '#your-hidden-div' ).text( $( this ).text() )
} ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T06:41:12.563

您可以将自定义事件绑定到 div 并在更改时触发该事件

Stack Snippets 和[jsFiddle](http://jsfiddle.net/RKLmA/)中的演示：

```
$(function() {

  $('#wrapper').bind("contentchange", function() {
    console.log("Captured content change event"); 
  });

  $("#btn").click(function() {
    $('#wrapper').html("new value").trigger("contentchange");
  });

});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

<div id="wrapper"></div>
<input type="button" id="btn" value="click here">
```

# c# - C# WinForms 如何在 TreeView 中停止 Ding 声音

> ID：10328103
> 
> 赞同：2
> 
> 时间：2012-04-26T06:11:50.773
> 
> 标签：c#, winforms, treeview, keydown

如果您在 TreeView 的 keydown 事件中打开任何模式对话框（或者如果焦点位于 TreeView 上，则在 KeyPreview=true 的表单中）您会听到令人讨厌的 DING！

我如何防止它发生？

此 ding 通常是未处理键事件的信号（例如，默认情况下 TextBox 将为 Ctrl+A 等进行 ding）。但是，设置 e.Handled 或 e.SuppressKeyPress 对 TreeView 中的模态对话框没有帮助。除了打开模式对话框之外，它在做任何事情时都会有所帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T06:29:11.190

当您在其中一个事件中抽取消息循环时，本机 Windows 树视图控件会变得非常古怪。标准的解决方案是延迟事件的处理，直到所有事件都完成。使用 Control.BeginInvoke() 方法很容易做到。在这种情况下也工作过：

```
 private void treeView1_KeyDown(object sender, KeyEventArgs e) {
        e.Handled = e.SuppressKeyPress = true;
        this.BeginInvoke(new Action(() => 
            (new Form1()).ShowDialog()
        ));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:01:24.463

[使用ProcessCmdKey](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.processcmdkey.aspx)捕获击键对我有用。覆盖表单的此方法：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == (Keys.O | Keys.Control))
    {
        openFileDialog1.ShowDialog();
        return true;
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

返回 true 以表明击键已被表单消耗并停止进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-20T01:35:10.253

万一它对某人有帮助...

我在 TreeView 上遇到了同样的问题，除了我在 KeyPreview 设置为 true 的情况下处理表单中的事件。

就我而言，我只是忘记设置`e.Handled = true;`.

# php - PHP 输出缓冲循环和 Jquery Ajax

> ID：10328106
> 
> 赞同：2
> 
> 时间：2012-04-26T06:12:06.073
> 
> 标签：php, jquery, ajax, comet, infinite-loop

我正在阅读很多关于彗星编程的东西，但我在想这种实现是否可行。

这是我的脚本

```
$.ajax({
   url:"mypage.php",
   onProgress:{function(rsp){ //i know there is no such function like this
     $("#mydiv").append(rsp+"<br>");
   }}
}); 
```

这是我的 mypage.php

```
<?php
    while(true){
    ob_start();
      echo time();
    ob_flush();
    }
    ?> 
```

现在我想要的是我的 ajax 请求会在进程中获取结果。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:25:27.377

要发生这种情况，您必须使用彗星技术....请参考

[显示 Ajax 调用进度的最佳方式是什么？](https://stackoverflow.com/questions/3901495/what-is-the-best-way-of-showing-progress-on-an-ajax-call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:44:34.923

如果您只想抓紧时间，这就是轮询方式。为什么要使用资源进行无限循环。

```
<?php
//polling.php
if(isset($_GET['poll']) && $_GET['poll']=='1'){
$out = array('thetime'=>date("F j, Y, g:i:s a")); 
echo json_encode($out);
die;
}
?>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
function poll(){
   setTimeout(function(){

      $.ajax({ url: "http://localhost/polling.php?poll=1",cache: false,
      success: function(data){
      //Do something with returned json
      $("#time").replaceWith("<p id=\"time\">The Server Time & Date is: "+ data.thetime +"</p>");
        //Next poll
        poll();
      }, dataType: "json"});
     // 1/2 a sec
  }, 500);
}

$(document).ready(function(){
    poll();
});
</script>

<p id="time">The Server Time & Date is: <?php echo date("F j, Y, g:i:s a");?></p> 
```

# javascript - 在任意 JavaScript 对象的选择框中绑定 optionValue 和 optionText

> ID：10328108
> 
> 赞同：0
> 
> 时间：2012-04-26T06:12:10.503
> 
> 标签：javascript, binding, knockout.js, html-select

我可以绑定optionsText，但不能绑定optionsValue。两个功能应该相同吗？

呈现的 html：（价值在哪里？）

```
<option value="">ROSSFORD D</option> 
```

**看法：**

```
 <select multiple="multiple" width="75" id="foo" name="campaign[precincts][]" data-bind="options: campaign_precincts, optionsText: function(item) { 
                       return item.precinct_location.id 
                   }, optionsValue: function(foo) {return foo.precinct_location.id }> </select> 
```

**查看型号：**

```
 var newCampaign = function() {
    this.items = ko.observableArray();
    this.freeText = ko.observable("");
    this.campaign_precincts = ko.observableArray();
    this.selectedPct = ko.observable();
    this.campaignName = ko.observable();
    this.userParty = ko.observable("");

    self = this;
    var question = this.freeText();

    this.searchMe = function() {
    console.log (self.userParty());
    self.items([]);
    self.userParty()
        if (this.freeText() != "") {
         // search by city
         $.getJSON('/search.json?q=' + this.freeText(), function (data) {
            if (data) {
              console.log(data)
              data.forEach(function(item) { self.items.push(item) })
            }
          });
        // search by zipcode
        $.getJSON('/search.json?z=' + this.freeText(), function (data) {
            if (data) {
              data.forEach(function(item) { self.items.push(item) })
            }
          });
        }
    }.bind(this); 

    this.addPrecinct = function(pct) {
      // returs false if pct is not a member of the array
      x = function(a,b){return!!~a.indexOf(b)}
      if ( x(self.campaign_precincts(),pct) == false) {
        self.campaign_precincts.push(pct);
      }; 
    }.bind(this);

    this.removePct = function() {
      self.campaign_precincts.pop(self.selectedPct());
    }
};

ko.applyBindings(new newCampaign()); 
```

**js对象：**

```
data.precinct_location.city => "string"
data.precinct_location.id => 1234 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:54:48.453

KO 代码目前不考虑是否将 a 函数传递给`optionsValue`. 它有一个问题，并谈论在这里为绑定选项添加更全面和灵活的选项：[https ://github.com/SteveSanderson/knockout/pull/154](https://github.com/SteveSanderson/knockout/pull/154)

现在，您确实需要映射您的数据（即使只是在客户端），以便可以直接从数组项上的属性中读取值。如果您在这部分需要任何帮助，我很乐意提供帮助。

# c - %d 长整数

> ID：10328109
> 
> 赞同：3
> 
> 时间：2012-04-26T06:12:12.560
> 
> 标签：c, printf, long-integer, scanf

下面的代码是否正确？据我了解，它不应该正常工作，但在 Dev-C++ 编译器上，它可以。有人可以详细解释一下吗？

```
#include<limits.h>

int main()
{
long int num_case=LONG_MAX;

scanf("%d",&num_case);

printf("%ld",num_case);
return 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T06:16:04.013

就像标准 C 库告诉您不要做的大多数事情一样，它会调用未定义的行为。未定义意味着它可能在某些条件下工作，但在您最不期望的时候崩溃。

在这种情况下，它之所以有效，是因为`long int`和`int`实际上是相同的数字表示：四字节，二进制补码。对于另一个平台（例如 x86-64 Linux），情况可能并非如此，您可能会看到某种问题。特别是，8 字节的高位字节`long int`将保持未初始化状态。

**编辑：**问“但它会崩溃”是*错误的想法*。`long int`根据语言标准，仅将未初始化的字节读入类型变量就可以使 C 程序崩溃。我们不需要找到一个这样做的平台示例，就可以理解该程序是错误指定的。这就是我想说的。C 不会马上把规则手册扔给你，它会等到你移植并打破最初的假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:17:03.493

正如 RageD 所说，你真的应该在`scanf()`通话中使用 %ld 。它起作用的原因是因为在您的系统上（或者在我看来），`int`并且`long int`大小相同（可能是 4），因此`scanf()`不会覆盖它不应该覆盖的任何内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:19:54.343

通常在 32 位系统上 long int 有 32 位（与 int 相同），而在 64 位系统上 long int 有 64 位（与 long long int 相同）。如果您希望您的代码可移植，请将 scanf 与“%ld”一起使用。

# objective-c - DBLCDTempBlack 仅适用于 UILabel 中的某些字母

> ID：10328110
> 
> 赞同：1
> 
> 时间：2012-04-26T06:12:15.503
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uilabel

我正在使用[此](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)代码来实现选框效果。我想要像字体一样的数字时钟，所以我给了字体

```
 UIFont *lcdFont = [UIFont fontWithName:@"DBLCDTempBlack" size:60.0]; 
 self.font = lcdFont ; 
```

但我只为一些随机字符获得这种字体。我只使用大写字母。我希望 i 用于 UILabel 中的所有字符。为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:25:05.530

您的代码没有问题——该字体中只有某些字符。（为什么？谁知道呢。）对于那些丢失的字体，操作系统会自动回退到另一种字体。

如果您想使用更广泛的字符集绘制 LCD 外观的文本，您需要在其他地方找到这样的字体并将其捆绑到您的应用程序中。

# drupal - 阿拉伯语和英语的 Drupal 不同主题

> ID：10328112
> 
> 赞同：0
> 
> 时间：2012-04-26T06:12:18.543
> 
> 标签：drupal, drupal-6, drupal-theming

我用英文创建了一个 drupal 网站，现在我想在这个网站上添加一个阿拉伯语版本。我已经添加并启用了 i18n 模块，现在我在管理员的内容创建和编辑页面中有语言切换选项。我想显示英语和阿拉伯语的不同主题（例如 mytheme 和 mytheme-ar）。但是我如何设置drupal根据URL显示主题，例如当URL为example.com/ar时显示mytheme-ar，当example.com时显示mytheme。

有人可以提出解决方案吗？我已经尝试设置一个cookie并根据cookie从includes/theme.inc设置主题。但我认为会有一个更直接的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:56:52.570

看看[ThemeKey 模块](http://drupal.org/project/themekey)。它可以更改由您创建的复杂（或简单）规则确定的主题。

# sql-server-2008 - 如何在 Visual Studio 2010 中捕获从 SQL Server 引发的异常（内部异常）

> ID：10328113
> 
> 赞同：2
> 
> 时间：2012-04-26T06:12:19.347
> 
> 标签：sql-server-2008, exception-handling

我想捕获从 SQL SERVER 引发的 INNER 异常，并在 WPF 的 MessegeBox 中显示该异常

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-26T06:24:27.730

这是您可以使用的一种方法：

```
 try
        {
            //Some commands that can raise an exception
        }
        catch (Exception e)
        {
            Exception inner = e.InnerException ?? e;
            while (inner.InnerException != null)
            {
                inner = inner.InnerException;
            }
            //inner exception will contain the innerest exception

        } 
```

# javascript - Facebook 图标在 Internet Explorer 8 中不可点击

> ID：10328114
> 
> 赞同：1
> 
> 时间：2012-04-26T06:12:39.847
> 
> 标签：javascript, jquery, asp.net, facebook, internet-explorer-8

我无法单击 中的`FaceBook`图标`Internet Explorer - 8 and 9`。

### **[这是我的 JsFiddle](http://jsfiddle.net/f6ctA/)**。

它在`IE(7)`FF 中运行良好。

## 标记

```
<div style="z-index: 1000;" class="footershareBox">
    <ul>
        <li><strong>Share</strong> </li>
        <li><span id="ctl00_ucFootercontainer_ucSocialShareIcons_lbFB"><a type="icon_link"
            name="fb_share" target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fdish.amplio.biz%2FUSASatellite&amp;t=DISH%20Retailer%20USA%20Satellite%2C%20Inc.%2C%20Denver%2C%20CO&amp;src=sp"
            style="text-decoration: none;"><span class="FBConnectButton_Simple"><span class="FBConnectButton_Text_Simple">
                Facebook</span></span></a><script type="text/javascript" src="http://static.ak.fbcdn.net/connect.php/js/FB.Share"></script></span>
        </li>
        <li><a target="_blank" id="ctl00_ucFootercontainer_ucSocialShareIcons_aLinkedin"
            href="http://www.linkedin.com/shareArticle?url=http://dish.amplio.biz/USASatellite&amp;title=DISH+Retailer+Dish+User%2c+Denver%2c+CO&amp;summary=Save+with+DISH.+Why+would+you+ever+pay+more+for+TV%3f&amp;source=DISHNetwork">
            <img alt="" src="/Images/linkedin_share.gif" id="imgLinkedIn">LinkedIn</a> </li>
        <li><a target="_blank" id="ctl00_ucFootercontainer_ucSocialShareIcons_aTwitter" href="http://twitter.com/share?url=http://dish.amplio.biz/USASatellite&amp;text=DISH+Retailer+Dish+User%2c+Denver%2c+CO - Save+with+DISH.+Why+would+you+ever+pay+more+for+TV%3f&amp;related=dish">
            <img alt="" src="/Images/twitter_share.gif" id="imgTwitter">Twitter</a> </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:33:41.420

尝试添加..

```
display:block; 
```

在您的跨度样式标签中...

编辑[JsFiddle](http://jsfiddle.net/f6ctA/3/)

# javascript - 单击Javascript中的按钮显示android DatePicker

> ID：10328117
> 
> 赞同：2
> 
> 时间：2012-04-26T06:13:04.153
> 
> 标签：javascript, android, html, datepicker

这是我的要求：我正在将一个 html 文件加载到 WebView 上。我在 html 文件中有一个按钮来选择日期。当我单击该按钮时，我想打开 android 日期选择器对话框。选择日期后，我想在 html 文件中显示所选日期。谁能指导我。请。HTML：

```
 <input type="button" value="Select Date" onClick="openDatePickerDialog()" />
 <p id = "date">--</p> 
```

Javascript：

```
 function openDatePickerDialog() {
   AndroidFunction.openDatePickerDialog();
 }

function callFromActivity(date) {
document.getElementById('date').innerHTML = date;
 } 
```

我的活动：

```
 public class MainActivity extends Activity {
WebView myBrowser;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    myBrowser = (WebView)findViewById(R.id.mybrowser);

    final MyJavaScriptInterface myJavaScriptInterface = new MyJavaScriptInterface(this);
    myBrowser.addJavascriptInterface(myJavaScriptInterface, "AndroidFunction");

    myBrowser.getSettings().setJavaScriptEnabled(true); 

    myBrowser.loadUrl("file:///android_asset/test.html");      

}

public class MyJavaScriptInterface 
{
    private int mYear;
    private int mMonth;
    private int mDay;
    static final int DATE_DIALOG_ID = 0;

    Context mContext;

    MyJavaScriptInterface(Context c)
    {
        mContext = c;
    }

    public void openDatePickerDialog()
    { 
        Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);

        //updateDisplay();

        showDialog(DATE_DIALOG_ID);
    }
    private void updateDisplay() {

        String date = new StringBuilder().append(mMonth + 1).append("-")
        .append(mDay).append("-")
        .append(mYear).append(" ").toString();

        Toast.makeText(getApplicationContext(), date, Toast.LENGTH_LONG).show();

        myBrowser.loadUrl("javascript:callFromActivity(\""+date+"\")");
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, 
                int monthOfYear, int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            updateDisplay();
        }
    };

    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(MainActivity.this,
                    mDateSetListener,
                    mYear, mMonth, mDay);
        }
        return null;
    }

}
 } 
```

问题：当我点击按钮时，我没有得到 DatePicker 对话框。我哪里错了？我的方法正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:38:49.940

这是我使用的示例代码，来自此处的代码：

在 html 代码中，添加 2 个 javascript 函数：

```
// Fonction d'appel calendrier Android
function f_CallCalendar(Tag)
{
    MSSAndroidFunction.openDatePickerDialog(Tag);
}
// Fonction de retour de la date
function callFromActivity_RetDate(Tag, data) {
    document.Form.vDate.value = data;
} 
```

Tag 是要完成的输入表单的 id。您可以像这样调用 javascript 函数：

```
<input name="vDate" type="text" size="11" />&nbsp;
<input name="Submit" type="button" onclick="f_CallCalendar('vDate')" value="Calendrier*" /> 
```

这是实现的java代码。请注意，MyJavaScriptInterface 是在 MainActivity 中声明的：

```
public class MainActivity extends Activity 
        implements TextWatcher{
    WebView MainWebView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        MainWebView = (WebView)findViewById(R.id.main_webview);
        MainWebView.getSettings().setJavaScriptEnabled(true);
        final MyJavaScriptInterface myJavaScriptInterface = new MyJavaScriptInterface(this);
        MainWebView.addJavascriptInterface(myJavaScriptInterface, "MyJavaScriptInterface");
    }

    // Classe de prise en charge du java privé
    public class MyJavaScriptInterface
    {
        public String m_szTagId;

        Context mContext;

        MyJavaScriptInterface(Context c)
        {
            mContext = c;
        }

        public void openDatePickerDialog(String szTagId)
        {
            m_szTagId = szTagId;
            Calendar c = Calendar.getInstance();
            DatePickerDialog dp = new DatePickerDialog(mContext, new OnDateSetListener() {
                public void onDateSet(DatePicker view, int year,
                        int monthOfYear, int dayOfMonth) {
                    String szDate = String.format("%02d/%02d/%04d", dayOfMonth, monthOfYear+1, year);
                    MainWebView.loadUrl("javascript:callFromActivity_RetDate(\""+m_szTagId+"\", \""+szDate+"\")");
                } }, c.get(Calendar.YEAR), c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));
            dp.show();
        }

    } // Class MyJavaScriptInterface

} // class MainActivity 
```

就这个。希望这能有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:34:05.453

```
public void openDatePickerDialog()
{ 
    Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);

    //updateDisplay();
    DatePickerDialog dp = new DatePickerDialog(this,
            mDateSetListener,
            mYear, mMonth, mDay);
    dp.show();
} 
```

你能试试这个吗？

# c# - 从 C# 中的 datagrid 单元格获取值

> ID：10328118
> 
> 赞同：0
> 
> 时间：2012-04-26T06:13:06.757
> 
> 标签：c#, datagrid

如何从数据网格中的某个单元格获取信息？我希望当一个人单击第 7 列中的按钮时发生一个事件，但该事件取决于第一列中的值。这就是我所拥有的，但什么也没发生。

```
if (InventoryDataGridView.CurrentCell.ColumnIndex == 7)
            {

                if(InventoryDataGridView[0,0].Equals("Books"))
                {
                    Books open = new Books();
                    open.Show();
                }

        } 
```

虽然什么都没有发生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:18:54.197

```
InventoryDataGridView[0,0] 
```

仅指DataGridViewCell。该类有一个 Value 属性，其中包含单元格的值。

因此该行应如下所示：

```
if(InventoryDataGridView[0,0].Value.Equals("Books"))
{
  //
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:22:59.990

如果您使用 WPF，那么您必须尝试以下操作：

```
for (int j = 0; j < dataGrid1.Columns.Count; j++)
            {
                for (int i = 0; i < dataGrid1.Items.Count - 1; i++)
                {
                    string s=(dataGrid1.Items[i] as DataRowView).Row.ItemArray[j].ToString();
                }
            } 
```

i,j 是坐标。所以你可以玩它。

参考：[http ://subrat308.blogspot.in/2012/02/wpf-get-cell-value-from-datagrid-cellij.html](http://subrat308.blogspot.in/2012/02/wpf-get-cell-value-from-datagrid-cellij.html)

# c - C结构中的对齐/填充

> ID：10328126
> 
> 赞同：0
> 
> 时间：2012-04-26T06:13:56.703
> 
> 标签：c

我正在查看我的项目中的代码。

以下是定义如下的结构：

```
typedef struct {
    ULONG gatewayIp;
    UBYTE status;
        UBYTE align;
    UWORD info;
    ULONG magicTemp;
    uword stationCode;
} GatewayStatus; 
```

我的问题是为什么我们在上述结构之间保持一致。

我教编译器负责对齐，如以下链接中所述。 [http://vcfaq.mvps.org/lang/11.htm](http://vcfaq.mvps.org/lang/11.htm)

无论上述结构如何，我都会概括我的问题在什么情况下我们必须以编程方式对齐以及编译器会为我们做什么？

如果两台机器具有不同的字节序类型，即一台 m/c 是大字节序而另一台是低字节序，是否需要填充？

请澄清我的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:08:02.887

我想它可以清楚地表明在那个位置会有一个填充字节。如果将来有人想添加字节字段，这可能很有用。

另一种情况是，如果该结构在没有对齐要求的系统上使用（通常是 8 位架构的情况），但仍应具有与大型机器上相同的布局。在这种情况下，结构定义需要显式填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:16:38.263

编译器默认对齐数据以获得最大可对齐字节，这取决于机器。对于 linux GCC 编译器默认进行 4 字节对齐。

如果我们想要对齐 8、16、32 等......字节，我们需要明确告诉编译器。

# iphone - -[UITableView _setupTableViewCommon] iphone 模拟器日志错误

> ID：10328127
> 
> 赞同：1
> 
> 时间：2012-04-26T06:14:16.053
> 
> 标签：iphone, memory-leaks, uitableview, crash

请解决，当我在 iphone 模拟器中运行 amy 应用程序时出现此错误

> 单步执行直到退出函数 -[UITableView _setupTableViewCommon]

和应用程序崩溃`[window makeKeyAndVisible];`

但代码在设备上运行良好。

# sql - 查询中的错误，例如“聚合可能不会出现在 Where 子句中”

> ID：10328130
> 
> 赞同：0
> 
> 时间：2012-04-26T06:14:43.483
> 
> 标签：sql

```
ALTER PROCEDURE Sp_Num_Tracking 
@UserID int

AS
BEGIN
declare @lastLogonDate datetime;
ALTER PROCEDURE Sp_num_Tracking 
@UserID int

AS
BEGIN
declare @lastLogonDate datetime;
declare @CurrentLogonDate datetime;
declare @onemonthtime datetime;
declare @frmbeg int;
declare @oneweektime datetime;

select @lastLogonDate=  max( crimedate) from tblcrime where UserID=@UserID
set @CurrentLogonDate=getdate()
set @onemonthtime=dateadd(mm,-1,@CurrentLogonDate)
set @oneweektime=dateadd(dd,-7,@CurrentLogonDate)
select @frmbeg=  max(crimeID)-min(CrimeID)  from tblcrime 

SELECT count(o.crimeID)
from tblcrime o
inner join  
tblContractor ts 
on o.MainContractorID=ts.ContractorID

inner join 
tblBusiness tb 
on o.MainContractorBUID=tb.BusinessID
inner join tblservant tw on
o.servantID=tw.servantID

inner join tblUser u 
on  u.ContractorID=o.MainContractorID

where count(o.crimeID) between @lastLogonDate and @onemonthtime or count(o.crimeID) between @lastLogonDate and @oneweektime

END 
```

但是它给出了这样的错误“聚合可能不会出现在 WHERE 子句中，除非它位于 HAVING 子句或选择列表中包含的子查询中，并且正在聚合的列是外部引用”。我想修改哪一部分....请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:17:00.453

任何由查询上的聚合确定的值都必须放入 HAVING 中，因为它是在聚合查询上评估的，而不是在源查询上。您还需要告诉它您想按什么分组计数。

试试这个例子，假设你想找到符合你标准的人的 MAINCONTRACTORID：

```
SELECT 
   count(o.crimeID),
   o.MainContractorID
from tblcrime o
inner join  
tblContractor ts 
on o.MainContractorID=ts.ContractorID

inner join 
tblBusiness tb 
on o.MainContractorBUID=tb.BusinessID
inner join tblservant tw on
o.servantID=tw.servantID

inner join tblUser u 
on  u.ContractorID=o.MainContractorID

GROUP BY 
   o.MainContractorID
HAVING 
   count(o.crimeID) between @lastLogonDate and @onemonthtime or count(o.crimeID) between @lastLogonDate and @oneweektime 
```

注意：聚合是由一组结果的函数确定的任何值，这些结果将分组，如 COUNT、SUM、AVG..

# php - Git - 从接收后结帐中排除配置文件

> ID：10328131
> 
> 赞同：2
> 
> 时间：2012-04-26T06:14:47.537
> 
> 标签：php, git, git-post-receive

我有一个正在本地工作的 git 项目。这是一个 PHP 项目，带有一个存储 MySQL 数据库连接信息的配置文件。我的本地 MySQL 设置与远程设置不同。

在我的遥控器上，我有一个接收后挂钩，可以将文件签出到服务器上的文件夹：

```
#!/bin/sh
GIT_WORK_TREE="../demo" git checkout -f
chmod +x hooks/post-receive 
```

我怎么能告诉这个结帐不包括（覆盖配置文件），因为它会用我的本地配置文件替换远程配置文件？我尝试将我的本地配置文件添加到 .gitignore，但似乎没有这样做。

知道如何从结帐中排除配置文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:17:02.053

正确的解决方案是根本不提交您的`config.php`（或任何名称），而是将其放入`.gitignore`并提交`config.php.example`。

因此，只需从存储库中删除配置文件，在远程计算机上重命名它，拉取以便您拥有最新的提交（这将删除文件），然后将其移回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:20:04.750

你可以试试这个

运行命令：

```
git rm -r --cached . 
```

这会从索引中删除所有内容，然后运行：

```
git add . 
```

提交它：

```
git commit -m ".gitignore is now working" 
```

# codeigniter - 在 Pyrocms 中管理登录重定向

> ID：10328141
> 
> 赞同：4
> 
> 时间：2012-04-26T06:15:50.780
> 
> 标签：codeigniter, pyrocms

我需要以这样的方式管理登录，它应该在成功登录后将控件重定向到在 pyrocms 中调用登录方法的页面。

默认情况下，它将控制权返回给主页。例如，我想去画廊页面，但它需要用户登录，因此它将控制重定向到登录页面，现在我想在用户成功登录后将控件重定向回画廊页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:15:59.170

最后，我提供了适合我的确切解决方案。

每当用户尝试查看需要用户登录的图库页面（受限页面）时，我们只需在控制器方法中的 $redirect_to 中指定成功登录后要重定向的 URL：

```
$this->session->set_userdata('redirect_to',$redirect_to); 
```

然后它会自动将控件重定向到所需的页面。因为在用户控制器中，登录功能是这样开发的：

```
$redirect_to = $this->input->post('redirect_to') ? $this->input->post('redirect_to') : $this->session->userdata('redirect_to'); 
```

希望这会在某个时候帮助你

# hadoop - 在hadoop Map-Reduce中，如何知道map任务结束或文件分割结束

> ID：10328143
> 
> 赞同：2
> 
> 时间：2012-04-26T06:15:52.100
> 
> 标签：hadoop, mapreduce, cloudera

hadoop 中的 map 任务处理输入文件的 64/128 MB 拆分。它从输入拆分的第一行开始处理直到结束。我需要了解如何知道地图任务何时完成处理其输入拆分。换句话说，在 shuffle 和 sort 开始之前。hadoop库中有什么方法可以回答我的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T06:31:11.657

类的`cleanup`方法`Mapper`允许您在映射器处理完输入拆分后执行代码，只需以与覆盖方法相同的方式覆盖它`map`。

如果那不是您所追求的，也许`Counter`可以解决您的问题？

# c++ - 分配字符串时 char* new 和 delete [] 错误

> ID：10328144
> 
> 赞同：7
> 
> 时间：2012-04-26T06:15:53.137
> 
> 标签：c++, memory, runtime-error, new-operator, delete-operator

我需要一个 C++ 复习。为什么这会产生内存异常？

```
pear = new char[1024];
pear = "happy go lucky";
delete [] pear; // exception 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T06:18:37.527

```
pear = new char[1024]; 
```

1024 个字符的内存从堆中分配并`pear`指向它的开头。

```
pear = "happy go lucky"; 
```

`pear`现在指向位于只读段中的字符串文字，并且先前分配的内存被泄漏。

```
delete [] pear; 
```

您尝试释放只读字符串，这是一种未定义的行为，表现为运行时异常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T06:18:23.700

> pear = "祝你好运";

这*将替换*由 分配的指针`new char[]`。所以现在你`delete[] pear`尝试释放静态分配的字符串。

那很糟。你只能用`delete`你分配的东西`new`。而且由于您覆盖（并丢失）了该指针，因此您不能`delete`这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T06:19:55.927

您正在做的是分配`pear`给堆上分配的字符数组，然后重新分配它以指向位于静态位置的字符串。如果您尝试删除它将出错，因为您不应该删除该静态位置中的内容。

# c++ - 在大型程序中难以跟踪 SIGSEGV 分段错误

> ID：10328149
> 
> 赞同：0
> 
> 时间：2012-04-26T06:16:19.580
> 
> 标签：c++, segmentation-fault, heap-corruption

我很抱歉发布了一个已被多次询问的问题（我刚刚阅读了其中的 10 页），但我找不到解决方案。

我正在开发一个分别使用 OpenGL 和 Portaudio 的多线程图形/音频程序。音频线程使用我为音频处理对象制作的库。SIGSEGV 可能发生 20% 的时间（调试时少得多），并且在使用新的流信息（采样率、矢量大小等）重置音频对象的负载时发生。Code::blocks 每次故障发生时，调试器都会将故障声明为来自不同的地方。

这是音频处理循环：

```
while(true){
    stream->tick();
    menuAudio.tick();
    {
        boost::mutex::scoped_lock lock(*mutex);
        if(channel->AuSwitch.resetAudio){
            uStreamInfo newStream(channel->AuSwitch.newSrate, 
                 channel->AuSwitch.newVSize, channel->AuSwitch.newChans);
            menuAudio.resetStream(&newStream);
            (*stream) = newStream;
            menuAudio.resetStream(stream);
            channel->AuSwitch.resetAudio = false;
        }
    }
} 
```

它检查来自图形线程的信息，告诉它重置音频并运行补丁对象的 resetStream 函数，这基本上是音频对象的向量并运行它们中的每一个：

```
void uPatch::resetStream(uStreamInfo* newStream)
{
    for(unsigned i = 0; i < numObjects; ++i){
/*This is where it reports this error: Program received signal SIGSEGV,  
Segmentation fault. Variables: i = 38, numObjects = 43 */
        objects[i]->resetStream(newStream); 
    }
} 
```

有时它会声明 SIGSEGV 来自不同的位置，但由于在使用调试器运行时它很少会出错，这是我唯一能发生的。

由于对象太多，我不会发布他们所有的重置代码，但作为一个例子：

```
void uSamplerBuffer::resetStream(uStreamInfo* newStream)
{
    audio.set(newStream, false);
    control.set(newStream, true);
    stream = newStream;
    incr = (double)buffer->sampleRate / (double)stream->sampleRate;
    index = 0;
} 
```

audio.set 代码在哪里：

```
void uVector::set(uStreamInfo* newStream, bool controlVector)
{
    if(vector != NULL){
        for(unsigned i = 0; i < stream->channels; ++i)
            delete[] vector[i];
        delete vector;
    }
    if(controlVector)
        channels = 1;
    else
        channels = newStream->channels;
    vector = new float*[channels];
    for(unsigned i = 0; i < channels; ++i)
        vector[i] = new float[newStream->vectorSize];
    stream = newStream;
    this->flush();
} 
```

我最好的猜测是这是一个堆栈溢出问题，因为它只发生在大量对象上，并且它们每个都单独运行良好。也就是说，音频流本身运行良好并且以类似的方式运行。此外，循环`objects[i]->resetStream(newStream);`应该在每个成员函数之后弹出堆栈，所以我不明白为什么它会 SIGSEGV。

有什么意见/建议吗？

**编辑：**

这是一个错误删除的内存问题。应用程序验证程序在错误点使其出现故障，而不是识别为源自其他位置的偶尔故障。问题出在 uVector 流设置函数中，因为该类的目的是用于使用多维数组的音频向量`stream->channels`，并可以选择使用一维数组作为控制信号。删除以重新分配内存时，我不小心设置了所有 uVector，无论使用流-> 通道删除的类型如何。

```
if(vector != NULL){
    for(unsigned i = 0; i < stream->channels; ++i)
        delete[] vector[i];
    delete vector;
} 
```

它应该在哪里：

```
if(vector != NULL){
    for(unsigned i = 0; i < this->channels; ++i)
        delete[] vector[i];
    delete vector;
} 
```

所以它正在删除它不应该访问的内存，这破坏了堆。我很惊讶段错误并没有更频繁地发生，因为这似乎是一个严重的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:32:13.253

我可以节省内存，您可以尝试使用[Electric Fence](http://perens.com/FreeSoftware/ElectricFence/)（或[DUMA](http://duma.sourceforge.net/)，它的孩子）之类的工具来查看它是否是您执行的越界写入。通常这些类型的段错误（非永久性的，仅有时发生）是某个地方先前缓冲区溢出的遗留物。

您也可以尝试使用 Valgrind，它的效果与上述 2 个工具相同，但执行速度较慢。

另外，尝试检查发生这种情况时您正在访问的错误地址的值是多少：它看起来是否有效？有时，一个值可以为您遇到的错误提供非常丰富的信息（通常：尝试访问 0x12 处的内存，其中 0X12 是循环中的计数器 :)）。

对于堆栈溢出...我建议尝试增加被指控线程的堆栈大小，看看是否重现了该错误。如果不是经过多次尝试，您就会发现问题所在。

至于窗户：

*   [如何调试堆损坏错误？](https://stackoverflow.com/questions/1010106/how-to-debug-heap-corruption-errors)
*   [Win32下的堆损坏；如何定位？](https://stackoverflow.com/questions/1069/heap-corruption-under-win32-how-to-locate)
*   [https://stackoverflow.com/search?q=windows+memory+corruption&submit=search](https://stackoverflow.com/search?q=windows+memory+corruption&submit=search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:41:33.653

我认为您只是将其作为堆栈溢出问题。:)

严肃地说，像这样的错误通常是在它们不再存在的内存位置访问对象的结果。在您的第一个代码块中，我看到您`newStream`在堆栈上创建，其范围仅限于它所属的 if 语句。然后将其复制到取消引用的指针 ( `*stream`)。是否为班级定义了安全且正确的作业`uStreamInfo`？如果没有明确定义，编译器会悄悄地为对象分配提供成员副本，这对于像`int`and这样的简单原语是可以的`double`，但对于动态分配的对象则不一定。`*stream`可能会留下一个指向由 分配的内存的指针`newStream`，但在`newStream`超出范围。现在，该 RAM 中的数据仍然存在，并且暂时看起来是正确的，但由于内存被释放，它可能随时损坏，就像崩溃前一样。:)

我建议密切注意何时分配和解除分配对象，以及哪些对象拥有哪些其他对象。您还可以采取分而治之的方法，注释掉大部分代码并逐渐启用更多代码，直到您看到崩溃再次开始发生。该错误可能出现在最近重新启用的代码中。

# c++ - 双值的sprintf格式

> ID：10328150
> 
> 赞同：5
> 
> 时间：2012-04-26T06:16:24.483
> 
> 标签：c++, c, unix, printf

在 UNIX 中`double`使用将值转换为字符串时，我遇到了一个特定问题。`sprintf()`

例如我有两个值：

```
double a = 0.009984354523452;
double b = 0.01; 
```

转换时，我正在使用：

```
sprintf(somestringvar, "Double value : %.15f \n", a);
sprintf(diffstringvar, "Double value : %.15f \n", b); 
```

转换为字符串。

我的问题是'a'，该值打印正确，但对于'b'的值，尾端附加了0。请提供任何将“a”和“b”表示为精确值的常用方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T06:19:58.703

打印 b 时会得到零，因为您告诉 printf 打印小数点后 15 位 ( `%.15f`)，并且它很乖巧地这样做了。要获得“准确”的信息，您可能会使用 simple 获得更好的运气`%g`。

* * *

[根据最近的评论更新]

事情真的取决于你所说的“确切”。如果确切地说，您的意思是“用户最初输入的内容”，那么双精度可能不是您的最佳选择。也许将值存储为字符串，然后在需要在计算中使用它时将其转换为双精度值可能会起作用。一旦基于文本的十进制数转换为双精度数，它通常不再与文本完全相同。虽然`printf()`or`ostream`会尽职尽责地打印出 double 所持有的内容（有时它很幸运，并且它打印的内容看起来与原始值相同），但问题是 double 本身不再持有实际的原始值。事实上，它从来没有这样做过。

或者，您可能更喜欢精确的数字实现，而不是像双精度数这样的固有近似值。例如，MySQL 具有支持完美精度的[NUMERIC 和 DECIMAL](http://dev.mysql.com/doc/refman/5.5/en/fixed-point-types.html)类型，但代价是强制您提前指定整数和小数位数。这称为[任意精度算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)，并且在 C/C++ 中有用于执行此操作的库。

# java - Java 线程 - 同步（本）

> ID：10328154
> 
> 赞同：2
> 
> 时间：2012-04-26T06:16:47.980
> 
> 标签：java, multithreading, synchronized

请看下面的程序

```
public class TestVolatile implements Runnable {

    public static volatile int counter;
    public static String lock = "lock";

    public static void main(String[] args) {
        Thread t1 = new Thread(new TestVolatile(),"Thread-1");
        Thread t2 = new Thread(new TestVolatile(),"Thread-2");
        t1.start();
        t2.start();
    }

    public void run() {
        synchronized(this) {
            System.out.println(Thread.currentThread()+"-"+counter);
            counter++;
        }
    }
} 
```

如果我多次运行这个程序，我会得到 3 个不同的结果。

首先是

> 线程[Thread-1,5,main]-0
> 线程[Thread-2,5,main]-0

第二个是

> 线程[Thread-1,5,main]-0
> 线程[Thread-2,5,main]-1

第三是

> 线程[Thread-1,5,main]-1
> 线程[Thread-2,5,main]-0

但是如果将锁定对象从“this”更改为“lock”，我会得到 2 个不同的结果

首先是

> 线程[Thread-1,5,main]-0
> 线程[Thread-2,5,main]-1

第二个是

> 线程[Thread-1,5,main]-1
> 线程[Thread-2,5,main]-0

我在编写程序时的假设是，在任何一种情况下，“计数器”都不应该在两个语句中都为 0。
有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:23:40.973

您创建了两个 TestVolatile 对象。“this”关键字指的是在线程中运行的 TestVolatile 对象。因此，您不会在第一个示例中对同一对象进行同步。

如果您像这样更改代码，那么第一个示例开始工作：

```
public static void main(String[] args) {
    TestVolatile testVolatile = new TestVolatile();
    Thread t1 = new Thread(testVolatile,"Thread-1");
    Thread t2 = new Thread(testVolatile,"Thread-2");
    t1.start();
    t2.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:35:19.703

这可能不是您要查找的内容，但如果您想避免使用`synchronized`and `volatile`，您应该使用以下实例`AtomicInteger`： [http ://docs.oracle.com/javase/6/docs/api/java/util/并发/原子/AtomicInteger.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)

使用该`getAndIncrement`方法显示与您的示例相同的行为。

```
public class TestVolatile implements Runnable {

    public static AtomicInteger counter = new AtomicInteger();
    public static void main(String[] args) {
        Thread t1 = new Thread(new TestVolatile(),"Thread-1");
        Thread t2 = new Thread(new TestVolatile(),"Thread-2");
        t1.start();
        t2.start();
    }

    public void run() {
        System.out.println(Thread.currentThread() + " - " + counter.getAndIncrement());
    }

} 
```

# iphone - 在不同的 UIViewControllers 中重用自定义 UITableView

> ID：10328167
> 
> 赞同：3
> 
> 时间：2012-04-26T06:18:15.967
> 
> 标签：iphone, ios, uitableview, code-reuse

我正在为 iOS 5.1 开发 iPhone 应用程序。我构建了一个 UIViewController，它有一个 UITableView 和一个 UISearchDisplayController 和其他视图，所有这些都以某种方式与表相关。UIVIewController 是表格的委托和数据源，并对表格和搜索显示控制器进行一些自定义（图形和业务相关）。到目前为止，一切正常。

问题是现在我想将同一张表（可能具有相同类型的不同元素子列表）放在不同的控制器（应用程序的不同屏幕）中。我试图将我的控制器的 tableView 添加为其他控制器中的子视图，但它不起作用。我试图将我的表重建为 UIView 的子类（而不是 UIViewController）并将其添加为子视图，但它既不工作（它从 NIB 文件加载视图，但它的所有属性，包括 IBOutlets，其中 nil 或 0x000000 ）。

经过大量搜索，我没有找到任何关于如何在不同控制器中重用 tableview 的示例。有什么提示吗？有什么例子吗？我应该将它构建为 UIViewController 还是 UIView？哪个类应该是 table 和 searchdisplay 的委托，记住我要重用的大部分逻辑是委托中的代码？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:57:24.370

最简单的解决方案不是创建自己的 Datasource 类（可能作为单例），然后将其与其他控制器重用吗？这样，您获取和管理数据的方式就从显示方式中抽象出来了。就是它应该的样子。这就是 MVC 的全部意义所在。

# iphone - 如何在 iPhone 中创建一段时间的提醒，例如在 30 分钟内提醒我

> ID：10328168
> 
> 赞同：3
> 
> 时间：2012-04-26T06:18:18.087
> 
> 标签：iphone, objective-c, notifications, push-notification, uilocalnotification

嗨，我正在开发一个提醒应用程序。

我需要在某个特定时间后显示提醒警报。

**但不是**在我们设置日期选择器的时候。

*就像我有一个“10 分钟内提醒”按钮*

```
-(IBAction)ReminderClick:(id)sender
{
} 
```

***当用户按下按钮时，10 分钟后需要显示警报。***

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T06:32:19.930

您需要为此功能代码使用 UILocalNotification 看起来像

```
UIApplication* app = [UIApplication sharedApplication];
        UILocalNotification* notifyAlarm = [[UILocalNotification alloc] init];

        NSDate *date1=[fire dateByAddingTimeInterval:60];
        notifyAlarm.fireDate = date1;
        notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];
        //notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];
        notifyAlarm.repeatInterval =NSWeekCalendarUnit ;
        notifyAlarm.soundName =soundString;
        notifyAlarm.alertBody =snoozeBody;
        notifyAlarm.userInfo=snoozeDict;
        //notifyAlarm.alertLaunchImage=@"in.png";
        [app scheduleLocalNotification:notifyAlarm]; 
```

[你可以按照这个http://www.icodeblog.com/tag/uilocalnotification/](http://www.icodeblog.com/tag/uilocalnotification/)的教程

[http://blog.mugunthkumar.com/coding/iphone-tutorial-scheduling-local-notifications-using-a-singleton-class/](http://blog.mugunthkumar.com/coding/iphone-tutorial-scheduling-local-notifications-using-a-singleton-class/)

[http://www.iostipsandtricks.com/ios-local-notifications-tutorial/](http://www.iostipsandtricks.com/ios-local-notifications-tutorial/)

[http://www.youtube.com/watch?v=tcVoq488-XI](http://www.youtube.com/watch?v=tcVoq488-XI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:24:55.300

您必须为此使用 UILocalNotificaion

# sql-server-2008-r2 - 数据库连接中止

> ID：10328173
> 
> 赞同：0
> 
> 时间：2012-04-26T06:18:46.480
> 
> 标签：sql-server-2008-r2

我使用 SQL Server 2008 R2 创建了我的数据库。然后尝试使用 Visual C# Developer 2010 附加它。

它给了我一个错误。附上![在此处输入图像描述](../Images/7a1122410cb6b5850203477bbe1fa6a3.png)截图

谢谢孙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:23:15.070

要解决您的问题，您需要升级到 SQL Server 2008。Express 版很好，只要数据库大小小于 4Gb。

# java - 方法不起作用？

> ID：10328177
> 
> 赞同：-1
> 
> 时间：2012-04-26T06:19:03.453
> 
> 标签：java

更新代码：

```
import java.util.*;

public class Main {

/**
 * @param args
 */
static int[] C;
static int[] D;
static String P;

public static void main(String[] args) {
    C = new int[10];
    D = new int[10];
    getNumber();
}

private static void getNumber() {
    System.out
            .println("Enter your first number with spaces in between digits.");
    Scanner S = new Scanner(System.in);
    String O = S.nextLine();
    String[] A = new String[10];
    A = O.split(" ");
    for (int X = 0; A.length > X; X++) {
        C[X] = toNumber(A[X]);
    }
    String P = S.nextLine();
    String[] B = new String[10];
    B = P.split(" ");
    for (int Y = 0; B.length > Y; Y++) {
        C[Y] = toNumber(A[Y]);
    }
    System.out.print(C[0]);
    remainders();
}

private static void remainders() {
    for (int A = 0; C.length > A; A++) {
        if (D[1] * C[A] >= 10) {
            Integer B = new Integer(D[1] * C[A]);
            Character E = B.toString().charAt(0);
            P.concat(E.toString());
        }
    }
    for (int A = 0; C.length > A; A++) {
        if (D[0] * C[A] >= 10) {
            Integer B = new Integer(D[1] * C[A]);
            Character E = B.toString().charAt(0);
            P.concat(E.toString());
        }
    }
    System.out.print(P);
}

private static int toNumber(String string) {
    if (string.equals("0")) {
        return 0;
    } else if (string.equals("1")) {
        return 1;
    } else if (string.equals("2")) {
        return 2;
    } else if (string.equals("3")) {
        return 3;
    } else if (string.equals("4")) {
        return 4;
    } else if (string.equals("5")) {
        return 5;
    } else if (string.equals("6")) {
        return 6;
    } else if (string.equals("7")) {
        return 7;
    } else if (string.equals("8")) {
        return 8;
    } else if (string.equals("9")) {
        return 9;
    } else {
        return 0;
    }
}

} 
```

出于某种原因，它打印的最后一件事是`null`. 我很确定问题出在`toNumber`方法上，但我不知道出了什么问题。如果除此之外代码还有其他问题，请告诉我。请帮忙。编辑：问题似乎与剩余方法有关，请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T06:23:44.443

使用`string.equals(n)`方法测试是否`string`为`n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:48:19.207

字符串常量以这种方式进行比较：`"0".equals(string)`. 字符串文字是实际`String`对象，您可以在它们上调用任何 String 方法。而且您应该更喜欢在常量上调用方法，因为可以保证它们存在，而变量可以是`null`. 你不需要重新发明轮子。Java有丰富的SDK。只需使用

```
int x = Integer.valueOf(a[X]); 
```

如果您只想要数字 0-9，那么只需测试

```
if (0 <= x && x <= 9) {
  //valid continue
} else {
  //invalid state handling
} 
```

# windows - 如何在 WP7 中选择索引处的对象？

> ID：10328179
> 
> 赞同：0
> 
> 时间：2012-04-26T06:19:14.780
> 
> 标签：windows, arrays, windows-phone-7, indexing

我有一个指定颜色的数组，

```
Object[] l_colarray = new Object[13] { Colors.Black,Colors.Blue,Colors.Brown,Colors.Cyan,Colors.DarkGray,
                Colors.Gray,Colors.Green,Colors.LightGray,Colors.Magenta,Colors.Orange,Colors.Purple,Colors.Red,Colors.White}; 
```

我如何选择一个索引，（objectatindex：i，在 iOS 中使用）。请帮我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:22:01.013

您所说的“选择索引”并不是很清楚。你的意思是简单的：

```
object color = l_colarray[index]; 
```

? 请注意，如果所有值都是`Color`您最好的值：

```
Color[] colors = { Colors.Black, Colors.Blue, Colors.Brown, Colors.Cyan,
    Colors.DarkGray, Colors.Gray, Colors.Green, Colors.LightGray,
    Colors.Magenta, Colors.Orange,Colors.Purple,Colors.Red,Colors.White };

...

Color color = colors[index]; 
```

笔记：

*   当您在与其声明相同的语句中初始化数组变量时，您不需要“new TypeName []”部分
*   使用“new TypeName[] { ... }”时不需要指定大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:24:59.543

假设您正在谈论在 ui 中进行选择...

[在http://www.windowsphonegeek.com/tips/WP7-ListBox-SelectedItem](http://www.windowsphonegeek.com/tips/WP7-ListBox-SelectedItem)有一组关于列表框和选定项（和选定索引）的优秀问答集

您需要的答案取决于您如何在列表框中输入 sata - 例如，您是否使用数据绑定。

简单来说，如果您使用代码隐藏来操作列表框，那么您可以使用：

```
 ListBox1.SelectedIndex = 6; 
```

* * *

如果您正在谈论objective-c语言级别选择...那么您可以在c#中使用数组访问器：

```
 var item = l_colarray[6]; 
```

* * *

从 iOS 开始到 wp7 移植的一个好地方是[http://wp7mapping.interoperabilitybridges.com/library](http://wp7mapping.interoperabilitybridges.com/library)

# php - 如何在一定的时间间隔内通过openx滚动广告？

> ID：10328180
> 
> 赞同：0
> 
> 时间：2012-04-26T06:19:17.403
> 
> 标签：php, openx

我是openx的初学者。我需要在我的网站中每10秒更改一次广告。如果我重新加载浏览器，我发现广告会发生变化。我尝试每10秒重新加载一次浏览器以通过javascript更改广告，但它需要一个而重新加载页面，这每 10 秒发生一次，所以没有网站可以看到。我发现 openx 广告的 javascript 是在 ajs.php 中创建的。我正在考虑在那里编辑一些代码。但在我做一些愚蠢的事情并使这个网站无用之前。我想知道是否有另一种更好的方法每 10 秒更改一次广告（而不是滚动）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:59:28.867

您可以使用 OpenX 的 iframe 标签来做到这一点：

```
<!--/* OpenX iFrame Tag v2.8.9 */-->

<iframe id='a123456' name='a123456' src='http://www.yourdomain.com/www/delivery/afr.php?refresh=10&amp;zoneid=1' frameborder='0' scrolling='no' width='728' height='90'><a href='http://www.yourdomain.com/www/delivery/ck.php?n=a123456' target='_blank'><img src='http://www.yourdomain.com/www/delivery/avw.php?zoneid=1&amp;n=a123456' border='0' alt='' /></a></iframe> 
```

如果您使用调用代码生成器，则会有一个名为“Refresh”的字段，它将导致该区域每 X 秒刷新一次。

# macos - 开火造成房间问题

> ID：10328182
> 
> 赞同：0
> 
> 时间：2012-04-26T06:19:41.973
> 
> 标签：macos, xmpp, openfire

我正在使用 open fire 创建 jabber 服务器，但是当我创建聊天室时，它显示以下异常

例外：

```
java.lang.IllegalArgumentException: Illegal JID: chat1@conference.202.56.215.54@conference.201.54.215.54
    at org.xmpp.packet.JID.(JID.java:554)
    at org.xmpp.packet.JID.(JID.java:508)
    at org.jivesoftware.openfire.admin.muc_002droom_002dedit_002dform_jsp._jspService(muc_002droom_002dedit_002dform_jsp.java:90)... 
```

请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:16:51.350

嗯，这是一个非法的 JID。我不知道您是如何创建房间的，但是当您只需要房间名称时，您似乎正在指定一个完整的 JID 作为名称。

因此，当将服务域添加到提供的名称以生成完整的 JID 时，您现在有一个无效的名称（@service.name 重复）。

# json - J2ME：JSON 序列化/反序列化

> ID：10328197
> 
> 赞同：1
> 
> 时间：2012-04-26T06:20:44.787
> 
> 标签：json, serialization, java-me, lwuit

我想为**J2ME**序列化和反序列化（从 POJO）JSON 对象。我确实使用了一些可用的工具，如 GSON 等。由于它们使用 Java 反射，J2ME 不支持相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:16:22.693

`JSONParser`是 LWUIT4IO 的一部分，尽管它有一些仅在[Codename One](http://www.codenameone.com/)中修复的错误。Codename One 还包含一个类似于 XPATH 的 JSON/XML 处理包。

# java - 查看 Jasper 报告时出现异常“无法连接到数据库：找不到适合数据库的驱动程序”

> ID：10328199
> 
> 赞同：2
> 
> 时间：2012-04-26T06:20:57.493
> 
> 标签：java, jasper-reports, netbeans-7

我正在使用碧玉报告 4.5.1。我刚刚包含了 jasper-reports-4.5.1 所需的所有依赖项。我收到以下异常

```
Could not connect to the database: No suitable driver found for CatalogNew No suitable driver found for CatalogNew.
Apr 26, 2012 1:01:51 PM net.sf.jasperreports.engine.query.JRJdbcQueryExecuter <init>
WARNING: The supplied java.sql.Connection object is null. 
```

在执行以下代码时。

```
 databaseName=ReportDriver.databaseName;
  userName=ReportDriver.userName;
  password=ReportDriver.password;
 Class.forName("net.sourceforge.jtds.jdbc.Driver");
 jdbcConnection = DriverManager.getConnection(databaseName,userName,password); 
```

我还在 IReport-4.5.1 安装的 lib 文件夹中包含了数据库 lib jtds.1.2.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:14:10.707

显然`ReportDriver.databaseName`包含数据库*名称*（“CatalogNew”），而不是 JDBC *URL*。

但该方法`DriverManager.getConnection()`需要一个 JDBC **URL**。

很可能您需要执行以下操作：

```
String baseURL "jdbc:jtds:sqlserver://localhost/";
jdbcConnection = DriverManager.getConnection(baseURL + databaseName,userName,password); 
```

您需要替换`localhost`为运行 SQL Server 实例的服务器的名称。

有关连接 URL 的更多详细信息，请参阅 jTDS 文档：http:
[//jtds.sourceforge.net/faq.html#urlFormat](http://jtds.sourceforge.net/faq.html#urlFormat)

# javascript - 如何从浏览器的 cookie 存储中删除 sessionid

> ID：10328201
> 
> 赞同：3
> 
> 时间：2012-04-26T06:21:03.500
> 
> 标签：javascript, browser, sessionid, jsessionid

单击注销按钮时，我想在浏览器中注销我的 Web 应用程序。并且只想用 js 代码实现它。所以，没有注销 servlet。这意味着，我需要删除现在使用并存储在浏览器内存中的 sessionid，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T06:28:25.953

1.  出于安全原因，您所有的会话 cookie 都应该是 httpOnly。这将确保 cookie 无法在 javascript 中访问，并会降低 XSS 附加的风险。这也意味着不能只在客户端清除 cookie。

2.  当用户单击注销时，您可能有兴趣清除服务器端资源。至少为此，您应该访问服务器。

综上所述。我建议您对您的 servlet 进行 AJAX 调用，这可以清除您的 cookie 并释放为该会话分配的服务器端资源。

如果您仍然不相信并且必须使用 javascript 清除 cookie，请参阅 SO question [delete cookies using javascript](https://stackoverflow.com/questions/5976912/clear-cookies-using-javascript)

# css - 什么背景：透明 url(); 做？

> ID：10328204
> 
> 赞同：6
> 
> 时间：2012-04-26T06:21:31.717
> 
> 标签：css, background

我看到了一个css代码

```
 body { background: transparent url ('background.jpg') repeat scroll;} 
```

透明值有什么作用？我试过用谷歌搜索这个，但没有帮助。background.jpg 不会覆盖它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T06:22:16.950

`transparent`是颜色。一个元素可以同时具有背景图像和背景颜色。

以上等价于：

```
body {
    background-color: transparent;
    background-image: url('background.jpg');
    background-repeat: repeat;
    background-attachment: scroll;
} 
```

通常，如果背景图像无法加载，或者图像包含透明区域，或者图像没有重复填充整个区域（在您的示例中当然不是这种情况），颜色通常很重要。

但是，由于`transparent`是“初始值”，因此在使用`background`速记时永远不需要，因为速记会自动将所有未指定的属性设置为其初始值。

`transparent`因此，作为背景颜色有意义的唯一用例包括：

1.  不使用速记，而是直接使用`background-color`属性；
2.  使用它来覆盖另一个直接应用于该元素的选择器。

一个例子是

```
body.foo { background-color: blue; }
body.foo.bar { background-color: transparent; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T06:31:01.017

实际上，这不是必需的。

> [http://www.w3.org/TR/CSS21/colors.html#background](http://www.w3.org/TR/CSS21/colors.html#background)
> 给定一个有效的声明，'background' 属性首先将所有单独的背景属性设置为其初始值，然后分配在声明中给出的显式值。

由于`background-color`的初始值为[，`transparent`](http://www.w3.org/TR/CSS21/colors.html#propdef-background-color)因此在设置时会隐式应用`background:url(...);`

更准确地说，您的样式规则相当于

```
background-color: transparent;
background-image: url(...);
background-repeat: repeat;
background-attachment: scroll;
background-position: 0% 0%; 
```

在这两种情况下。

但是，许多作者（包括我自己）更喜欢显式设置值

*   为了可读性
*   以防止任何浏览器错误，或者只是
*   因为他们不知道更好

# google-app-engine - App Engine 开发环境 - db.get() ReferenceProperty 查询随机错误

> ID：10328206
> 
> 赞同：0
> 
> 时间：2012-04-26T06:21:42.783
> 
> 标签：google-app-engine

我有以下数据存储模型：

```
class FeatureCategory(db.Model):
    name_eng = db.StringProperty(required=True)
    name_spa = db.StringProperty()
    name_por = db.StringProperty()
    device_type = db.ReferenceProperty(DeviceType, required=True, collection_name='feature_categories') 
```

```
class Feature(db.Model):
    name = db.StringProperty(required=True)
    category = db.ReferenceProperty(FeatureCategory, required=True, collection_name='features')
    desc_eng = db.StringProperty()
    desc_spa = db.StringProperty()
    desc_por = db.StringProperty() 
```

在执行几个 db.get(db.Key('key_string')) 和引用对象后，我遇到了错误，例如：

```
feats = dbmodel.Feature.all()
for feat in feats:
    cat = feat.category 
```

在开发环境中。如果我停止服务器并重新启动，它将适用于某些查询并返回以下错误。有什么想法可以解决这个问题吗？

```
Traceback (most recent call last):
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/Users/danielgarcia/Documents/workspace/rfpbuilder/src/get.py", line 50, in get
    cat = feat.category
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 3686, in __get__
    instance = get(reference_id)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 1536, in get
    return get_async(keys, **kwargs).get_result()
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 592, in get_result
    return self.__get_result_hook(self)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1467, in __get_hook
    entities = rpc.user_data(entities)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/datastore.py", line 600, in local_extra_hook
    return extra_hook(result)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 1506, in extra_hook
    model = cls1.from_entity(entity)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 1441, in from_entity
    return cls(None, _from_entity=entity, **entity_values)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 973, in __init__
    prop.__set__(self, value)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 613, in __set__
    value = self.validate(value)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 2815, in validate
    value = super(StringProperty, self).validate(value)
  File "/Applications/Development/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 640, in validate
    raise BadValueError('Property %s is required' % self.name)
BadValueError: Property name is required 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:36:15.270

下次请缩进代码。错误消息`Property name is required`表明您的某些 Feature 实体没有`name`属性，该属性在您的模型中标记为必需。

# javascript - Javascript:DIV AppendChild

> ID：10328210
> 
> 赞同：10
> 
> 时间：2012-04-26T06:21:55.793
> 
> 标签：javascript, appendchild

在下面的代码`"objTo"`中是一个 div，我需要在其中插入多个 div。当我第一次使用代码时它的工作。但在下一次它覆盖现有代码时。

```
 <script>

var divtest= document.createElement("div");        
divtest.innerHTML = "<div>new div</div>"         
objTo.appendChild(divtest)
    </script> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-26T06:35:55.883

我为您制作了一个非常简单的工作版本：

[http://jsfiddle.net/hQKy9/](http://jsfiddle.net/hQKy9/)

多次点击一直有效：

**脚本**

```
function addDiv() {
    var objTo = document.getElementById('container');
    var divtest = document.createElement("div");
    divtest.innerHTML = "new div";
    objTo.appendChild(divtest);
} 
```

**html**

```
<div id="container"></div>

<input type="button" onclick="addDiv();" value="Click here to add div"/> 
```

# lua - 如何检查Lua中的值是否为空？

> ID：10328211
> 
> 赞同：18
> 
> 时间：2012-04-26T06:21:57.563
> 
> 标签：lua, conditional

在Lua中检查某物是否为空的条件的正确方法是什么？`if x == ""`并且`f x ~= ""`似乎不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T07:23:19.977

Lua 是一种**动态的基于类型的语言**。
任何变量都可以包含以下类型之一：*nil*、*boolean*、*number*、*string*、*table*、*function*、*thread*或*userdata*。
表中任何没有值的变量（包括`_G`全局变量所在的表）都会给出`nil`索引时的值。当您将表变量设置为 时`nil`，它实质上是“取消声明”它（完全从内存中删除该条目）。
当一个`local`变量被声明时，如果它没有被立即赋值，它被赋予一个值`nil`. 与表变量不同，当您将`local`变量设置为 时`nil`，它不会*“*取消声明”它（它只有一个值`nil`）。

在 Lua 中，一个空字符串 ( `""`) 仍然是一个“值”——它只是一个大小为零的字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-10T02:55:14.007

我最近也遇到了这个问题。如果数据库值为“空白”（非空），LuaSQL 将返回空字符串。一种hacky方法，但这是我解决它的方法：

```
if (string.len(x) >= 1) then
    ...
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T09:40:20.520

您的字符串中可能有空格、换行符或其他不可见字符。所以你认为它是“空的”，但事实并非如此。这通常发生在您从用户那里获取输入并且必须键入“enter”才能完成时 - “enter”最终出现在字符串中。

您需要的是一个函数，它告诉您字符串是否为“空白” - 为空，或空格/制表符/换行符列表。这是一种方法：

```
function isBlank(x)
  return not not tostring(x):find("^%s*$")
end 
```

用法：

```
if isBlank(x) then
  -- ...
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-22T00:45:10.187

我将假设 OP 的意思是“您如何判断变量何时未分配”。

例子：

```
local x 
```

变量 x 为“空”，它被初始化为“nil”。（不是文本“nil”，而是一个枚举值，表示该变量未赋值。在 Lua 中定义为 nil，在其他一些语言中定义为 NULL。）

现在分配 xa 值。例子：

```
x="" 
```

现在 x 不是零。另一个例子：

```
x=0 
```

x 不为零。

尝试运行此代码，它应该使您清楚地了解情况。

```
local x
if x==nil then print("x is nil") end

x=0
if x==nil then print( "This line won't be written") end

x=""
if x==nil then print( "and this line won't be written") end 
```

第一个*if*语句将评估为 true 并调用 print 语句。第 2 和第 3 个*if*语句为假，打印语句将不会被执行。

总之，使用“==nil”来检查变量是否为“空”（更恰当地说是“nil”）。

# java - 将像 2,4,5,6,7,8,10,12,14,15,16 这样的字符串转换为 2,4-8,10,12,14-16

> ID：10328214
> 
> 赞同：4
> 
> 时间：2012-04-26T06:22:08.883
> 
> 标签：java, arrays, string, integer

我想使用 java 将字符串输入如 2,3,6,7,8,10,12,14,15,16 转换为 2-3,6-8,10,12,14-16

我尝试使用下面的代码

```
 Vector ar=new Vector();

        int lastadded=0;

        String ht="";

        String [] strarray=str.split(",");

        strarray=sortArray(strarray);

        Vector intarray=new Vector();

        for(int i=0;i<strarray.length;i++)
        {

        int temp=1;
            for(int j=1;j<=intarray.size();j++)
            {
                if(Integer.parseInt(strarray[i])==Integer.parseInt(intarray.get(j-1).toString()))
                {
                 temp=0;
                }
            }
            if(temp==1)
            {
                intarray.add(Integer.parseInt(strarray[i]));
                ar.add(Integer.parseInt(strarray[i]));
            }

        }

       ht="";
       String strdemo="";
       for(int i=0;i<intarray.size();i++)
       {

            if(ht=="")
            {

                ht=ar.get(i)+"";
        lastadded=i;
            }

        else
         {
             strdemo=(String)ht;
            if(strdemo.length()==ar.get(0).toString().length())
            {

   if(Integer.parseInt(strdemo.substring(0))==Integer.parseInt(ar.get(i).toString())-1)
             {
                 strdemo=strdemo+"-"+ar.get(i);
                 lastadded=Integer.parseInt(ar.get(i).toString());
                 ht=strdemo;
             }
             else
             {
                 strdemo=strdemo+","+ar.get(i);
                 lastadded=Integer.parseInt(ar.get(i).toString());
                 ht=strdemo;
             }
            }
            else if(strdemo.length()==3)
            {
                 strdemo=(String)ht;
                 if(Integer.parseInt(strdemo.substring(strdemo.length()-1,strdemo.length()))==Integer.parseInt(ar.get(i).toString())-1)
                 {
                     strdemo=strdemo.substring(0,strdemo.length()-2)+"-"+Integer.parseInt(ar.get(i).toString());
                     lastadded=Integer.parseInt(ar.get(i).toString());
                     ht=strdemo;
                 }
                 else
                 {
                     strdemo=strdemo+","+Integer.parseInt(ar.get(i).toString());
                     lastadded=Integer.parseInt(ar.get(i).toString());
                     ht=strdemo;
                 }
            }//Else IF
            else{
                strdemo=(String)ht;
                int de=1;

                int ddd=lastadded;
                 if(ddd==Integer.parseInt(ar.get(i).toString())-1)
                 {
                      int lastaddedlen=(lastadded+"").length();
                      String symbol=strdemo.substring(strdemo.length()-lastaddedlen-1,strdemo.length()-lastaddedlen);
                     if(symbol.equalsIgnoreCase("-"))
                       strdemo=strdemo.substring(0,strdemo.length()-lastaddedlen-1)+"-"+Integer.parseInt(ar.get(i).toString());
                     else
                     strdemo=strdemo+"-"+Integer.parseInt(ar.get(i).toString());
                     lastadded=Integer.parseInt(ar.get(i).toString());
                     ht=strdemo;
                 }
                 else
                 {
                     strdemo=strdemo+","+Integer.parseInt(ar.get(i).toString());
                     lastadded=Integer.parseInt(ar.get(i).toString());
                     ht=strdemo;
                 }
            }
    }
} 
```

**这里`sortArray`函数对数组进行降序排序并返回**

```
protected static String[] sortArray(String ss[])
    {
        String temp;
        for(int i=0;i<ss.length;i++)
        {
            for(int j=0;j<ss.length;j++)
            {
             if(Integer.parseInt(ss[i])<Integer.parseInt(ss[j]))
             {
                temp=ss[i];
                ss[i]=ss[j];
                ss[j]=temp;
             }
            }
        }
        return ss;
    } 
```

对于某些输入，我没有得到一致的结果，例如对于 `2,3,6,7,8,10,12,14,15,16`它给出的以下情况`2-3,6-8,10,12,14-16`（**这是正确的**），而对于`2,4,5,6,7,8,10,12,14,15,16`它给出`2-8,10,12,14-16 (which actually should have been` **2,4-8,10,12,14-16**`)`

代码哪里不一致是我需要找出的..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:35:52.757

这在 Java 中非常丑陋和冗长，但这里有一个版本。请注意，它在最后使用来自 Spring 的 StringUtils 来完成将 String 集合转换为逗号分隔字符串的简单但也很丑陋的过程。

关键是使用一个单独的类来对数值范围进行建模。让这个类知道如何把自己变成一个字符串。那么你就不会有太多关于附加到 StringBuilder 的逻辑了。

另外，试着从收藏的角度来思考。这总是让事情变得更清楚。伪代码类似于：`String`变为`List<Integer>`变为`List<Range>`，最终变为`String`。

```
public class Ranges {

    // A class that models a range of integers
    public static class Range {
        private int low;
        private int high;

        public Range(int low, int high) {
            this.low = low;
            this.high = high;
        }

        public int getHigh() {
            return high;
        }

        public void setHigh(int high) {
            this.high = high;
        }

        @Override
        public String toString() {
            return (low == high) ? String.valueOf(low) : String.format("%d-%d", low, high);
        }
    }

    public static void main(String[] args) {
        String input = "2,3,6,7,8,10,12,14,15,16";

        // Turn input string into a sorted list of integers
        List<Integer> inputNumbers = new ArrayList<Integer>();
        for (String num : input.split(",")) {
            inputNumbers.add(Integer.parseInt(num));
        }
        Collections.sort(inputNumbers);

        // Flatten list of integers into a (shorter) list of Ranges
        Range thisRange = null; // the current range being built
        List<Range> ranges = new ArrayList<Range>();
        for (Integer number : inputNumbers) {
            if (thisRange != null && number <= thisRange.getHigh() + 1) {
                // if we are already building a range (not null) && this new number is 
                // the old high end of the range + 1, change the high number.
                thisRange.setHigh(number);
            } else {
                // create a new range and add it to the list being built
                thisRange = new Range(number, number);
                ranges.add(thisRange);
            }
        }

        // Join List<String> into a single String
        String result = StringUtils.collectionToCommaDelimitedString(ranges);
        System.out.println("result = " + result);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:44:07.877

这是我的实现。希望这有帮助。

您必须将这些值传递给例如`int[] a = {2,3,4,5,6,7,8,10,12, 14,15,16,18,19,21,22,26};` 以下方法。

```
public List<String> listIntRange(int[] values)
{
    List<String> intRangeList = new ArrayList<String>();

    int first = 0;
    int current = 0;
    int prev = 0;
    int count = 0;

    if (values == null || values.length < 1)
        return intRangeList;

    first = prev = values[0];
    int index = 1;
    boolean range = false;
    for(index = 1; index < values.length; index++)
    {
        current = values[index];
        if(current - prev == 1)
        {
            range = true;   
            prev = current;
            continue;
        }

        if(range == true)
        {
            intRangeList.add(first + "-" + prev);
        }
        else
        {
            intRangeList.add("" + first);
        }

        first = current;
        prev = current;
        range = false;

    }

    if(range == true)
    {
        intRangeList.add(first + "-" + current);
    }
    else
    {
        intRangeList.add("" + current);
    }

    return intRangeList;
} 
```

打印出 intRangeList 中的值时，输出如下：

```
2-8,10,12,14-16,18-19,21-22,26, 
```

请忽略最后一个逗号“，”。

# java - 检索 wifi 连接状态（Android）

> ID：10328215
> 
> 赞同：3
> 
> 时间：2012-04-26T06:22:14.907
> 
> 标签：java, android, wifi

我已按照[以下链接](https://stackoverflow.com/questions/4374862/how-to-programatically-create-and-read-wep-eap-wifi-configurations-in-android/4374934#4374934)连接到本地 wifi。它工作完美。我能够连接到我的本地wifi。

但是，我真的想要wifi的当前状态，我正在使用以下代码来获取wifi的状态。但不幸的是，我只能获得“禁用”、“启用”和“扫描”状态，我真的很想接收其他中间状态。

你能告诉我我做错了什么吗？

```
public class ConnectionChangeReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

        NetworkInfo info = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
        Message msg = new Message();
        msg.what = 5;
        Bundle b = new Bundle();
        String sStatus = "UnKnown";
        switch(info.getDetailedState()){
        case AUTHENTICATING:
            sStatus = "Authenticating...";
            break;
        case    CONNECTED:
            sStatus = "Connected";
            break;
        case    CONNECTING:
            sStatus = "Connecting...";
            break;
        case    DISCONNECTED:
            sStatus = "Disconnected";
            break;
        case    DISCONNECTING:
            sStatus = "Disconnecting...";
            break;
        case    FAILED:
            sStatus = "Failed";
            break;
        case    IDLE:
            sStatus = "Idle";
            break;
        case    OBTAINING_IPADDR :
            sStatus = "Obtaining IP Address...";
            break;
        case    SCANNING:
            sStatus = "Scanning...";
            break;
        case    SUSPENDED:
            sStatus = "Suspended";
            break;
        }
        b.putString("status", sStatus);
        msg.setData(b);
        mHandler.sendMessage(msg);
    }
} 
```

我通过以下方式注册广播接收器

```
IntentFilter filter = new IntentFilter(
        ConnectivityManager.CONNECTIVITY_ACTION);
    registerReceiver(networkStateReceiver, filter); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T06:36:10.930

注册一个接收器::

```
mIntentFilter = new IntentFilter();
  mIntentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
  mIntentFilter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
  mIntentFilter.addAction(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION);
  registerReceiver(mReceiver, mIntentFilter);

public void onReceive(Context context, Intent intent)
   {
    String action  = intent.getAction();
    if(action.equals(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION))
    {
    }else if(action.equals(WifiManager.WIFI_STATE_CHANGED_ACTION))
    {
     int iTemp = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,
       WifiManager.WIFI_STATE_UNKNOWN);
     LogUtil.d(LOG_SET, "+++++++-----------wifiStateReceiver------+++++++", DEBUG);
     checkState(iTemp);
    }else if(action.equals(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION))
    {
     DetailedState state =WifiInfo.getDetailedStateOf((SupplicantState)
     intent.getParcelableExtra(WifiManager.EXTRA_SUPPLICANT_CONNECTED));
     changeState(state);
     LogUtil.d(LOG_SET, "------------>>>>SUPPLICANT_STATE_CHANGED_ACTION<<<<<<-------", DEBUG);
    }
    else if(action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION))
    {
        DetailedState state=
       ((NetworkInfo)intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO)).getDetailedState();
       changeState(state);
     }
   }
   private void changeState(DetailedState aState)
    {
     LogUtil.d(LOG_SET, ">>>>>>>>>>>>>>>>>>changeState<<<<<<<<<<<<<<<<"+aState, DEBUG);
   if (aState == DetailedState.SCANNING)
   {
   Log.d("wifiSupplicanState", "SCANNING");
   }
   else if (aState == DetailedState.CONNECTING)
   {
   Log.d("wifiSupplicanState", "CONNECTING");
   }else if(aState == DetailedState.OBTAINING_IPADDR)
   {
   Log.d("wifiSupplicanState", "OBTAINING_IPADDR");
   }
   else if (aState == DetailedState.CONNECTED)
   {
   Log.d("wifiSupplicanState", "CONNECTED");
   }
   else if (aState == DetailedState.DISCONNECTING)
   {
    Log.d("wifiSupplicanState", "DISCONNECTING");
   }
   else if (aState == DetailedState.DISCONNECTED)
   {
    Log.d("wifiSupplicanState", "DISCONNECTTED");
   }
   else if (aState == DetailedState.FAILED)
   {
   }
  }

  public void checkState(int aInt)
  {
   LogUtil.d(LOG_SET,"==>>>>>>>>checkState<<<<<<<<"+aInt, DEBUG);
   if (aInt == WifiManager.WIFI_STATE_ENABLING)
    {
    Log.d("WifiManager", "WIFI_STATE_ENABLING");
    }
   else if (aInt== WifiManager.WIFI_STATE_ENABLED)
   {
   Log.d("WifiManager", "WIFI_STATE_ENABLED");
    }
    else if (aInt == WifiManager.WIFI_STATE_DISABLING)
    {
    Log.d("WifiManager", "WIFI_STATE_DISABLING");
    }
    else if (aInt == WifiManager.WIFI_STATE_DISABLED)
    {
    Log.d("WifiManager", "WIFI_STATE_DISABLED");
    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:31:41.733

而不是使用

```
NetworkInfo info = intent.getParcelableExtra(ConnectivityManager
                                                           .EXTRA_NETWORK_INFO); 
```

尝试使用

```
int extraWifiState = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE ,
     WifiManager.WIFI_STATE_UNKNOWN); 
```

[**关注这个博客**](http://android-er.blogspot.in/2011/01/turn-wifi-onoff-using.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T23:21:10.517

此代码有效：

```
IntentFilter mIntentFilter = new IntentFilter();
mIntentFilter.addAction(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION);
registerReceiver(receiverWifi, mIntentFilter);

class WifiReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context c, Intent intent) {
        String action  = intent.getAction();
        if(action.equals(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION)){
            Log.d("WifiReceiver", ">>>>SUPPLICANT_STATE_CHANGED_ACTION<<<<<<");
            SupplicantState supl_state=((SupplicantState)intent.getParcelableExtra(WifiManager.EXTRA_NEW_STATE));
            switch(supl_state){
            case ASSOCIATED:Log.i("SupplicantState", "ASSOCIATED");
                break;
            case ASSOCIATING:Log.i("SupplicantState", "ASSOCIATING");
                break;
            case AUTHENTICATING:Log.i("SupplicantState", "Authenticating...");
                break;
            case COMPLETED:Log.i("SupplicantState", "Connected");
                break;
            case DISCONNECTED:Log.i("SupplicantState", "Disconnected");
                break;
            case DORMANT:Log.i("SupplicantState", "DORMANT");
                break;
            case FOUR_WAY_HANDSHAKE:Log.i("SupplicantState", "FOUR_WAY_HANDSHAKE");
                break;
            case GROUP_HANDSHAKE:Log.i("SupplicantState", "GROUP_HANDSHAKE");
                break;
            case INACTIVE:Log.i("SupplicantState", "INACTIVE");
                break;
            case INTERFACE_DISABLED:Log.i("SupplicantState", "INTERFACE_DISABLED");
                break;
            case INVALID:Log.i("SupplicantState", "INVALID");
                break;
            case SCANNING:Log.i("SupplicantState", "SCANNING");
                break;
            case UNINITIALIZED:Log.i("SupplicantState", "UNINITIALIZED");
                break;
            default:Log.i("SupplicantState", "Unknown");
                break;

            }
            int supl_error=intent.getIntExtra(WifiManager.EXTRA_SUPPLICANT_ERROR, -1);
            if(supl_error==WifiManager.ERROR_AUTHENTICATING){
                Log.i("ERROR_AUTHENTICATING", "ERROR_AUTHENTICATING!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
            }
        }
    }
}

<receiver
    android:name=".MyActivity$WifiReceiver"
    android:process=":remote" >
</receiver> 
```

# c++ - 在 Windows 服务和 win32 应用程序 C++ 之间使用 IPC

> ID：10328217
> 
> 赞同：3
> 
> 时间：2012-04-26T06:22:39.553
> 
> 标签：c++, windows

我已经编写了一个 Windows 服务，我想与一个 win32 应用程序（桌面）进行通信（IPC），谁能告诉我我应该做什么来进行这种通信。在我的情况下，我的服务是服务器，其他进程是客户端。每当用户在他的机器上启动进程时，进程都应该与服务建立连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:21:49.540

我已经编写了支持您描述的命名管道的服务。我不需要做任何特别的事情来设置客户端打开和读/写命名管道的权限。在开发我的代码时，我发现以下 Microsoft 文章很有用：

“完整的服务示例”： http: [//msdn2.microsoft.com/en-us/library/bb540476](http://msdn2.microsoft.com/en-us/library/bb540476(VS.85).aspx) (VS.85).aspx “使用完成例程的命名管道服务器”：http: [//msdn.microsoft.com/ en-us/library/aa365601(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365601(VS.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-09T06:12:21.413

以下是 Windows 上的进程间通信选项列表： 1\. 组件对象模型 (COM) 2\. 远程过程调用 (RPC) 3\. Windows 套接字

您可以将服务类型设置为自动，这意味着它会在机器启动并运行后启动，请参考。 [https://www.codeguru.com/cpp/wp/system/sharedmemory/article.php/c2879/Shared-Memory-Inter-Process-Communication-IPC.htm](https://www.codeguru.com/cpp/w-p/system/sharedmemory/article.php/c2879/Shared-Memory-Inter-Process-Communication-IPC.htm)

# c - 使用指向数组元素的指针进行选择排序

> ID：10328224
> 
> 赞同：2
> 
> 时间：2012-04-26T06:23:19.453
> 
> 标签：c, arrays, sorting, pointers

我在使用指针算术而不是使用常规索引表示法执行选择排序时遇到问题。我必须这样做的原因是为了课堂作业。关键是要学会使用没有“作弊索引”（`pointer + i`）的指针算法，其中`i`的索引是这样的：`array[i]`.

在调用排序函数之前，我分配了一个包含 1000 个结构的数组。类型定义如下：

```
typedef struct
{
    char* name;
    char* art;
    int rating;
} ENTRY; 
```

这个想法是我读了一个包含 ASCII 艺术的文件。每件艺术品都被投入到自己的结构中。这是文本文件中的一个“条目”：

```
Jean Pajerek
  |\_____/|
  |[o] [o]|
  |   V   |
  |       |
 -ooo---ooo-
# 4 
```

这是一只猫头鹰！但我需要做的是将名称、艺术和评级存储在结构的相应字段中。我的阅读功能完美无缺。我分配了 1000 个结构的数组，然后将文本文件读入其中。它只包含 18 张图片，所以不用担心。

现在让我们谈谈我的选择排序功能。我首先查看了使用索引表示法的整数数组的选择排序算法，然后我尝试使其适应我的要求。

1.  使用指针算术
2.  在结构而不是整数周围移动

所以这里是代码：

```
void sort(ENTRY* aryptr, int* counter)
{
    ENTRY* slow;
    ENTRY* fast;
    ENTRY* lastmin;
    ENTRY min;
    ENTRY temp;
    int i;
    int j;

    printf("\n\n...SORTING\n\n\n");

    slow = aryptr;

    for (i=0; i < *counter - 2; i++)
    {
        min = *slow;        

        fast = slow + 1;
        for (j = i + 1; j < *counter-1; j++)
        {
            if (strcmp(fast->name, min.name) < 0 )
            {
                min = *fast;
                lastmin = fast;
            }
            fast++;           
        }

        temp = *slow;
        *slow = min;
        *lastmin = temp;

   slow++;      

    }
} 
```

我使用`i`and`j`作为计数器，因为我觉得测试类似的东西`walker->name != NULL`是不安全的。（我是否应该尝试使用 NULL 测试？这对我来说似乎更“逻辑上令人满意”，如果我可以保证最后一个元素之后的东西实际上是 NULL ......）不管我用什么来跟踪我的慢速和快速指针的位置，我对排序有疑问。

问题是这样的：我有这个 art.txt 文件，里面有很多不同的艺术作品。有些艺术品出自同一个人之手。

```
VOLDEMORT
(art is hippogryph)
# 1
EDDARD STARK
(art is turtle)
# 4
EDDARD STARK
(art is owl)
# 3   
TONY STARK
(art is blob)
#1
EDDARD STARK
(art is dragon)
#5 
```

当我完成排序时，同一作者的艺术作品将在数组中彼此相邻。我不在乎同一个人的艺术顺序。假设我用我的代码对其进行排序：我得到这样的东西。

```
EDDARD STARK
(art is turtle)
# 4
EDDARD STARK
(art is owl)
# 3      
EDDARD STARK
(art is dragon)
#5
EDDARD STARK
(art is turtle)
# 4
TONY STARK
(art is blob)
#1
VOLDEMORT
(art is hippogryph)
# 1 
```

由 EDDARD STARK 排序的艺术块将在 END 的那个块中拥有第一件艺术作品的副本。我查看了我的逻辑，打印了各种要调试的东西，但我仍然无法弄清楚问题出在哪里。我想我只是看不到它，因为我已经看了我自己该死的代码这么久了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:38:47.877

```
void sort(ENTRY* aryptr, int* counter)
{
    ENTRY* slow;
    ENTRY* fast;
    ENTRY* lastmin;
    ENTRY min;
    ENTRY temp;
    int i;
    int j;

    printf("\n\n...SORTING\n\n\n");

    slow = aryptr;

    for (i=0; i < *counter - 2; i++)
    {
        min = *slow;        

        fast = slow + 1;
        for (j = i + 1; j < *counter-1; j++)
        {
            if (strcmp(fast->name, min.name) < 0 )//comparison
            {
                min = *fast;//save data to min
                lastmin = fast;//save position to last min
            }
            fast++;//increment index
        }

        //problematic, always swapping. need if statement. Lastmin
        //May go unassigned, then "slow" will be duplicated to "lastmin"
        temp = *slow;
        *slow = min;
        *lastmin = temp;//at first run through

   slow++;      //increment index

    }
} 
```

# hdfs - 如何将输入文件自动放入hdfs？

> ID：10328226
> 
> 赞同：1
> 
> 时间：2012-04-26T06:23:24.530
> 
> 标签：hdfs

在 Hadoop 中，我们总是通过 -put 命令手动放置输入文件。有什么方法可以使这个过程自动化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:33:44.453

没有将文件输入到 Hadoop 文件系统的自动化过程。但是，可以使用一个命令 -put 或 -get 多个文件。

这是 Hadoop shell 命令的网站 [http://hadoop.apache.org/common/docs/r0.18.3/hdfs_shell.html](http://hadoop.apache.org/common/docs/r0.18.3/hdfs_shell.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:19:01.740

我不确定您将多少文件放入 HDFS，但查看文件然后将它们放入的一种解决方案是 Apache Flume。[这些幻灯片](http://www.slideshare.net/cloudera/clouderas-flume)提供了不错的介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:25:38.673

您可以使用 Fabric 库和 python 自动执行此过程。在函数中编写 hdfs put 命令，您可以为多个文件调用它，并对网络中的多个主机执行相同的操作。Fabric 应该非常有助于在您的场景中实现自动化。

# android - 日历显示事件的旧日期？

> ID：10328227
> 
> 赞同：1
> 
> 时间：2012-04-26T06:23:28.500
> 
> 标签：android, calendar

我正在开发一个android应用程序，我需要在其中提供一些日历功能，例如添加事件和显示事件，插入没有问题，因为我使用以下代码

```
 Date date = new Date();

        System.out.println("dateselected is    " + dateselected);
        try {

            date = new SimpleDateFormat("yyyy-MM-dd").parse(dateselected);
        } catch (java.text.ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        startTime = date.getTime();

        System.out.println("startTime is    " + startTime);

        Calendar cal = Calendar.getInstance();       
        Intent intent = new Intent(Intent.ACTION_EDIT);  
        intent.setType("vnd.android.cursor.item/event");
        intent.putExtra(" THE TESTING EVENT ");
        intent.putExtra("beginTime", startTime);

        intent.putExtra("endTime", startTime+60*60*1000);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        finish();
        startActivityForResult(intent,0); 
```

以这种方式显示事件

```
intent.setData(Uri.parse("content://com.android.calendar/events/" + 

                    String.valueOf(eventid[pos])));

            System.out.println(" >8 "); 
            //Android 2.1 and below.
            //intent.setData(Uri.parse("content://calendar/events/" + String.valueOf(calendarEventID)));    

            startActivity(intent); 
```

但问题是，无论我选择了哪个日期，也无论事件 ID 是什么，它都只显示一个日期和时间，

**`5:30 am , 1 January 1970`**

虽然活动标题是正确的

**我正在三星galaxy pop android 2.2.1上测试**

我应该怎么做才能消除此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:43:42.527

我从这里得到了这个问题的解决方案

[如何使用意图查看日历数据？](https://stackoverflow.com/questions/9798997/how-to-using-intents-to-view-calendar-data)

并使用以下代码传递了额外的意图来显示具有所选日期的日历事件。

```
intent.putExtra("beginTime", beginMilliTS);
intent.putExtra("endTime", endMilliTS); 
```

# ios - isKindOfClass 抓取标签

> ID：10328228
> 
> 赞同：0
> 
> 时间：2012-04-26T06:23:37.457
> 
> 标签：ios, xcode, uiscrollview, tags, uibutton

我只是想抓取ScrollView中的按钮标签1~5，其他数据不需要抓取

```
(void)layoutScrollImages
{
    UIImageView *view = nil;
    NSArray *subviews = [weekscroll subviews];

    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            NSLog(@"%d",view.tag);
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;
            curXLoc += (wScrollObjWidth);
        }   
    }
    NSLog(@"subviews = %@",subviews);
    [weekscroll setContentSize:CGSizeMake((wNumImages * wScrollObjWidth), [weekscroll bounds].size.height)];
}

    subviews = (
    "<UIImageView: 0x1ba330; frame = (313 61; 7 5); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x1bac00>>",
    "<UIImageView: 0x1bc900; frame = (315 59; 5 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x1bdde0>>",
    "<UIButton: 0x1bd380; frame = (0 1; 50 66); opaque = NO; layer = <CALayer: 0x1bd410>>",
    "<UIButton: 0x1bd690; frame = (50 0; 50 66); opaque = NO; layer = <CALayer: 0x1bd720>>",
    "<UIButton: 0x1bd9a0; frame = (100 0; 50 66); opaque = NO; layer = <CALayer: 0x1bda30>>",
    "<UIButton: 0x1bc570; frame = (150 0; 50 66); opaque = NO; layer = <CALayer: 0x1bc600>>",
    "<UIButton: 0x1beaa0; frame = (300 0; 50 66); opaque = NO; tag = 1; layer = <CALayer: 0x1beb30>>",
    "<UIButton: 0x1bff40; frame = (350 0; 50 66); opaque = NO; tag = 2; layer = <CALayer: 0x1c0920>>",
    "<UIButton: 0x1c0e60; frame = (400 0; 50 66); opaque = NO; tag = 3; layer = <CALayer: 0x1c0ef0>>",
    "<UIButton: 0x1c1430; frame = (450 0; 50 66); opaque = NO; tag = 4; layer = <CALayer: 0x1c14c0>>",
    "<UIButton: 0x1c1a00; frame = (500 0; 50 66); opaque = NO; tag = 5; layer = <CALayer: 0x1c1a90>>",

    "<UIButton: 0x1cb340; frame = (1800 0; 50 66); opaque = NO; layer = <CALayer: 0x1cb3d0>>",
"
)UIImageView: 0x1ba330; frame = (313 61; 7 5); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:43:27.203

根据打印的日志，只有 UIButton 具有标签，并且在您正在处理 UIImageView 的示例代码中，因此请根据您的要求使用给定的代码。

我已将您的代码修改如下，请检查一下。

```
for (id objView in subviews)
{
    if ([objView isKindOfClass:[UIImageView class]])
    {
        UIImageView *imgView = (UIImageView*) objView;
        if (imgView.tag > 0)
        {
            NSLog(@"%d",imgView.tag);
            CGRect frame = imgView.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            imgView.frame = frame;
            curXLoc += (wScrollObjWidth);
        }
    }   
} 
```

或者如果你只想抓取 UIButtons，

```
for (UIButton *btnView in subviews)
{
    if ([btnView isKindOfClass:[UIButton class]] && btnView.tag > 0)
    {
        NSLog(@"%d",btnView.tag);
        CGRect frame = btnView.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        btnView.frame = frame;
        curXLoc += (wScrollObjWidth);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:42:11.767

你想要标签大于 0 的按钮是正确的.. 那你为什么要检查 [UIImageView class].. ？

您找到标签大于 0 的按钮的条件应该是：

```
if ([aView isKindOfClass:[UIButton class] && (aView.tag > 0)]) {
} 
```

# c# - 通过 Windows 服务启动和停止并发线程

> ID：10328234
> 
> 赞同：2
> 
> 时间：2012-04-26T06:24:10.107
> 
> 标签：c#, .net, multithreading, mef

我是 .NET 环境的新手。我需要一个 Windows 服务，它的`Start`方法`Stop`将调用一个特定的类，分别是 MainContext 的 Start 和 Stop 方法。MainContext 类将包含通过[MEF](http://mef.codeplex.com/)加载的扩展列表。每个扩展都需要以并发方式作为单独的线程运行。

该类`MainContext`将包含两个公共方法`Start`和`Stop`，它们的返回类型都是 void 并且不包含任何参数。在调用`Start`方法时，它将以并发方式为通过 MEF 加载的每个扩展启动线程。而该`Stop`方法将停止该方法启动的所有线程`Start`。

在这种情况下，最好的线程实践是什么？我很困惑。我应该使用`System.Threading.Tasks.Task`类或`System.Threading.Thread`类进行多线程还是应该使用任何其他技术？哪个更适合我的要求并为我提供更多的灵活性和稳定性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:23:59.490

我使用 MAF 做过类似的事情，通过插件监视文件服务器、数据库和 Web 服务。Windows 服务在每个加载项中调用 Start 和 Stop 方法，从而启用或禁用 System.Timer.Timers。实际处理是在每个计时器的经过事件处理程序上完成的，该处理程序在一个池线程上运行。

其中一个加载项监视使用进程间通信的数据库表，以便我可以从 UI 应用程序监视和控制其他加载项。

# android - Android 谷歌地图开发错误

> ID：10328235
> 
> 赞同：1
> 
> 时间：2012-04-26T06:24:10.277
> 
> 标签：android, google-maps

我试图让谷歌地图为我的项目工作，但我不断收到下面的错误。

```
-04-26 18:18:13.088: E/AndroidRuntime(430): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.googlemaps/com.googlemaps.HelloGoogleMaps}: java.lang.ClassNotFoundException: com.googlemaps.HelloGoogleMaps in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.googlemaps-2.apk]
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.os.Handler.dispatchMessage(Handler.java:99)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.os.Looper.loop(Looper.java:130)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.app.ActivityThread.main(ActivityThread.java:3683)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at java.lang.reflect.Method.invokeNative(Native Method)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at java.lang.reflect.Method.invoke(Method.java:507)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at dalvik.system.NativeStart.main(Native Method)
-04-26 18:18:13.088: E/AndroidRuntime(430): Caused by: java.lang.ClassNotFoundException: com.googlemaps.HelloGoogleMaps in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.googlemaps-2.apk]
-04-26 18:18:13.088: E/AndroidRuntime(430):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
-04-26 18:18:13.088: E/AndroidRuntime(430):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

manifest.xml 文件。哎呀！您的修改无法提交，因为：

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

```
<?xml version="1.0" encoding="utf-8"?><manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.googlemaps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.INTERNET" />

<application>
    <uses-library android:required="true" android:name="com.google.android.maps" />

    <activity
        android:name=".HelloGoogleMaps"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-26T06:29:08.887

请将此添加到您的应用程序的 mainfest.xml 中。

```
<uses-library android:name="com.google.android.maps" /> 
```

# grails - 使用 Kendo UI 上传文件

> ID：10328238
> 
> 赞同：1
> 
> 时间：2012-04-26T06:24:21.877
> 
> 标签：grails, kendo-ui

我必须在我的 grails 应用程序中使用 Kendo ui 添加上传文件功能。我还必须知道如何更改上传位置。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:47:11.447

这是我们提出的动态更改 Kendo UI 上传小部件上的 saveUrl 的解决方案。

控制器代码：

```
public class MediaController : ApiControllerBase
{
    public Task<HttpResponseMessage> Post()
    {
        var queryVals = Request.RequestUri.ParseQueryString();
        string idValue = queryVals["id"].ToString();

        ... CODE REMOVE FOR BREVITY
    }
} 
```

和脚本代码：

```
<div style="width:45%">
            <input class="upload" name="files" id="files" type="file" upload-id="02ebeebf-98aa-459b-b41f-49028fa37e9c" />
           <input class="upload" name="files2" id="file1" type="file" upload-id="499499D3-1C80-4930-8C8D-C87F17884D3F" />
        </div>

        <script>
            $(document).ready(function () {
                $(".upload").kendoUpload({
                    async: {
                        saveUrl: "/API/Media",
                        autoUpload: true
                    },
                    upload: function onUpload(e) {
                        var uploadId = e.sender.wrapper.prevObject.attr("upload-id");
                        e.sender.options.async.saveUrl = "/api/media?id=" + uploadId;
                    },
                });
            });

        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:45:28.690

在此处查看 KendoUI 上传配置文档：http://www.kendoui.c​​om/documentation/ui-widgets/upload/ [configuration.aspx](http://www.kendoui.com/documentation/ui-widgets/upload/configuration.aspx)

异步对象上的 saveUrl 选项允许您轻松设置提交文件的处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T15:59:38.143

您可以更改 saveUrl 属性。代码应如下所示：

```
this.documentUpload.options.async.saveUrl = '/newUrlStr'; 
```

# php - Google Chrome（和 IE）拒绝使用 PHP 中的 setcookie 方法设置我的 cookie

> ID：10328242
> 
> 赞同：0
> 
> 时间：2012-04-26T06:24:31.793
> 
> 标签：php, google-chrome, cookies, web

我正在寻找关于 stackoverflow 的答案，但他们都无法解决我的问题。我有一个网站托管在[http://machine/~lcavaill/folder/](http://machine/~lcavaill/folder/)

在php中我使用

```
setcookie( COOKIE_AUTH, $cookie, $expiration, COOKIE_PATH, COOKIE_DOMAIN, false, true ) 
```

具有以下变量

```
define( 'COOKIE_DOMAIN', 'machine' );
define( 'COOKIE_PATH', '/~lcavaill/folder/' );
define( 'COOKIE_AUTH', 'foobar' );
$expiration = time() + 300; 
```

在查看响应标头时，我肯定会找到 Set-Cookie 标头

```
Set-Cookie:test=lcavaille%7C1335420792%7C44baaa2b2eb43cfb8ab2d66f74afd11e; expires=Thu, 26-Apr-2012 06:13:12 GMT; path=/~lcavaill/folder/; domain=machine; httponly 
```

但是对于另一个页面上的下一个请求，cookie 没有设置，我在 Chrome（或 IE）的任何地方都找不到它，但它在 Firefox 中按预期工作。

到目前为止，我检查了：

1.  如果客户端和服务器时间同步
2.  如果 Chrome 隐私设置正常（允许设置本地数据已启用且无异常）
3.  $_SERVER["HTTP_HOST"] 匹配 COOKIE_DOMAIN 变量
4.  启用/禁用 http_only
5.  将 cookie 路径设置为 /
6.  将过期时间设置为 0

你对我有什么想法吗？！

干杯，狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T13:07:36.537

我有同样的问题。

更重要的是，setcookie() 在我的开发服务器（win7 64bit，wamp，php 5.3.9）上的 FF34、Chrome39 和 IE8 和 IE11 上工作（返回 true），但它会在生产站点（debian，php 5.4）上返回 false .35) 适用于 Chrome 和 IE。

经过一番谷歌搜索并仔细阅读[**setcookie()**](http://php.net/manual/en/function.setcookie.php)手册后，我发现（我之前错过了一些东西）手册说：`"If output exists prior to calling this function, setcookie() will fail and return FALSE."`

起初我不确定到底是什么`If output exists prior to calling this function`意思，但显然浏览器不应该有任何输出来设置 cookie。

在我在任何输出之前移动有问题的代码行之后，问题就消失了，代码可以在上述浏览器（开发和生产服务器）以及最新的 FF 和 Android 上的 Chrome 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:31:18.157

这些只是一个疯狂的猜测，但是：

*   一些浏览器会忽略重定向响应中的 set-cookie 标头： [Safari 不设置 Cookie 但 IE / FF 设置](https://stackoverflow.com/questions/1144894/safari-doesnt-set-cookie-but-ie-ff-does)
*   或在本地主机和 IP 地址上： [http ://code.google.com/p/chromium/issues/detail?id=56211](http://code.google.com/p/chromium/issues/detail?id=56211)

# parsing - 解析错误：语法错误，app/design/frontend/base/default/template/catalog/product/new.phtml 中的意外 T_STRING 在第 37 行

> ID：10328245
> 
> 赞同：-5
> 
> 时间：2012-04-26T06:24:52.470
> 
> 标签：parsing, magento, syntax

解析错误：语法错误，app/design/frontend/base/default/template/catalog/product/new.phtml 中的意外 T_STRING 位于第 37 行：

```
<?php echo $this->getReviewsSummaryHtml($_product, 'short') ?> 
```

如何修改它。提前谢谢。
只是它显示在主页上。

**原来的：**

```
<?php $i=0; foreach ($_products->getItems() as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
    <ul class="products-grid">
    <?php endif ?>
        <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135) ?>" width="135" height="135" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" /></a>
            <h3 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->htmlEscape(Mage::helper('core/string')->truncate($_product->getName(),60,'鈥?)); ?></a></h3>
            <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
            <?php echo $this->getPriceHtml($_product, true, '-new') ?>
    <div ><img src="http://www.onlyforcars.com/images/freeshipping.jpg" width="97" height="14" alt="Free Shipping" /></div>
            <div class="actions">
                <?php if($_product->isSaleable()): ?>
                    <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a rel="nofollow" href="<?php echo $this->getAddToWishlistUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if ($_compareUrl = $this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a rel="nofollow" href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
        </li>
    <?php if ($i%$_columnCount==0 || $i==count($_products)): ?>
    </ul>
    <?php endif ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:37:12.213

这是由您的`Mage::helper('core/string')->truncate()`调用的第三个参数引起的，其中结尾字符串分隔符似乎丢失了。

您会收到`unexpected T_STRING`错误，因为解释器到达下一个字符串 ( `'short'`)，同时知道尚未找到前一个字符串结尾。

替换此行

```
<h3 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->htmlEscape(Mage::helper('core/string')->truncate($_product->getName(),60,'鈥?)); ?></a></h3> 
```

用这条线

```
<h3 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->htmlEscape(Mage::helper('core/string')->truncate($_product->getName(),60,'鈥?')); ?></a></h3> 
```

# java - 构建路径和源包有什么区别？

> ID：10328251
> 
> 赞同：0
> 
> 时间：2012-04-26T06:25:13.787
> 
> 标签：java, eclipse

> **可能重复：**
> [类路​​径和构建路径有什么区别](https://stackoverflow.com/questions/3529459/what-is-the-difference-between-class-path-and-build-path)

我正在使用 eclipse 构建一个带有 struts2 框架的动态 web 项目。一开始，我把struts.xml放在WEB-INF目录下，构建路径，但是我运行web项目失败。我在src目录下做了一个源码包，放入struts.xml，web项目就可以正常运行了。

我很困惑在源包中放置一个java文件意味着将响应的编译类放在bin目录和class_path中，这使得其他类可以找到它，那么eclipse中的构建路径动作是做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:33:52.800

源路径条目是一个文件夹，Eclipse 将在其中查找 JAVA 文件，构建路径条目是一个位置（文件夹/ja​​r），Eclipse/java 将在其中查找 CLASS 文件。

源路径条目中的所有文件都将被编译（如果是 .java），然后（与其他非 java 文件一起）复制到项目配置中指定的输出文件夹。这些文件与编译器**javaC**相关。

构建路径条目仅与运行时**java**相关。

# css - iPad web app 桌面版全屏

> ID：10328254
> 
> 赞同：-2
> 
> 时间：2012-04-26T06:25:34.133
> 
> 标签：css, ios, ipad

我的网页在设备上的浏览器上运行良好，但是当我保存到该网页的主屏幕并从中打开时，从桌面图标打开它时会退出一些屏幕尺寸问题。如何解决这个问题。

我的CSS代码如下

```
 *, body, div, h1, h2, h3, h4, h5, h6, p, ul, li, img, nav, header, section {
margin: 0; padding: 0; border: 0;
    }

   /* Styles */
     body {
     width:2048px;
     height:748px;
     background-color: #fff;
     overflow: hidden;
    font-family:Verdana, Geneva, sans-serif;
    }
    #container {
position:absolute;
width: 2048px; margin:0; 
overflow-x:hidden;
overflow-y:hidden;
padding: 0;
    }

   .panel{
background-image:url(image/testing_file_1.png);
background-repeat:no-repeat;
height:748px;
width:1024px;
position:relative;
float: left;
padding:0;
bottom:0;
top:0;
margin:0;
display:inline;
}
   .main_heading{
float:left;
margin:47px 0 0 60px;
font-size:24px;
font-weight:bold;
color:#FFF;
    }
    .main_heading_two{
float:left;
margin:47px 0 0 60px;
font-size:24px;
font-weight:bold;
color:#FFF;
    }
   .menu {
float:right;
margin: 39px 18px 0 0;
height:47px;
background-repeat:no-repeat;
    }

    .menu ul li {
list-style:none;
float:left;
    }

    .menu ul li a {
text-decoration:none;
display:block;
    }

    .menu .active {
text-decoration:none;
background-image:url();
    }

   .menu .stix {
width:2px;
font-size:0px;
background-image:url(image/seperator.gif);
background-repeat:no-repeat;
padding:0;
height:47px;
    }

    .midmenu {
list-style-type:none;
float:left;
height:62px;
width:61px;
margin: 248px 0 0 0;

    }
   .midmenu1 {
float:right;
list-style-type:none;
height:62px;
width:61px;
margin: 248px -500px 0 0px;
   }

   .rightclass img{
padding: 2px 20px;
float:right;
width:459px;
height:560px;
z-index:10;}
   .text_paragraph{
float:left;
width:450px;
color:#FFF;
margin-left:80px;
margin-top:-525px;
   }
   .text_paragraph_1{
float:left;
width:420px;
color:#FFF;
margin-left:80px;
margin-top:-464px;
    }
   .text_paragraph_1 ul{
float:left;
color:#FFF;
margin-left:40px;
margin-top:5px;
    }
   .text_paragraph_1 ul li{
margin-top:5px;
    }
    .text_paragraph_2{
float:left;
width:450px;
color:#FFF;
margin-left:80px;
margin-top:-285px;
   }
    .text_paragraph_2 ul{
float:left;
color:#FFF;
margin-left:40px;
margin-top:5px;
   }
   .text_paragraph_2 ul li{
margin-top:5px;
font-style:italic;
   }
   .text_paragraph_2 p{
float:left;
color:#FFF;
margin-top:5px;
   }
   .linkbutton{
margin:-70px 0 0 70px;
float:left;}
   small
   {
font-size:9px;
    }

   .rightclass_one img{
margin: 2px 21px;
float:right;
width:459px;
height:560px;
z-index:10;}
    .midmenu_1 {
list-style-type:none;
float:left;
height:62px;
width:61px;
margin: -45px 0 0 0;

    }
    .midmenu_2 {
float:right;
list-style-type:none;
height:62px;
width:61px;
margin: -45px -500px 0 0px;
    }
    .right_text{
float:right;
color:#000;
margin-right:-470px;
width:440px;
text-align:center;
margin-top:-270px;}
   .image_21{

   float:right;
    margin-right:-390px;
    margin-top:-190px;}

   .ratemeter{
float:right;
margin-right:-410px;
margin-top:20px;}
   .image_one{
  float:right;
  margin-right:-450px;
  margin-top:92px;
  z-index:5;
   }
 .image_two{
 float:right;
 margin-top:93px;
 margin-right:-254px;
 z-index:10;
  }
   .image_one_one{
 float:right;
 margin-top:95px;
 margin-right:-317px;
 z-index:10;
 }
 .image_two_two{
  float:right;
  margin-right:-452px;
  margin-top:92px;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:34:03.540

尝试从您的网页中将其放在您的脑海中：

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta content="minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no" name="viewport" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:58:04.153

好的...这完全清楚，为什么你有一个固定的高度......在你的身体里，你将高度设置为 748px ......这不是可变的。尝试这样的事情：

我在我的 webapp 中使用了它，它运行良好：

```
body {
    position: relative;
    margin: 0;
    -webkit-text-size-adjust: none;
    min-height: 416px;
    -webkit-touch-callout: none;
} 
```

我试图编辑您的代码，但我不知道它是否适合您。请试一试：

```
 body {
     width:2048px;
     min-height:748px;
     background-color: #fff;
     overflow: hidden;
     font-family:Verdana, Geneva, sans-serif;

     -webkit-text-size-adjust: none;
     -webkit-touch-callout: none;
     margin: 0;
     position: relative;
    } 
```

# upload - 是否可以使用内部通配符证书签署应用程序并将其上传到 App Store？

> ID：10328256
> 
> 赞同：0
> 
> 时间：2012-04-26T06:25:55.067
> 
> 标签：upload, app-store, certificate, wildcard, provisioning

我刚刚提交了一个旧应用程序的更新，我想我在内部分发证书中使用了通配符。Apple 向我确认该应用程序正常，并且更新已在 App Store 中。我很担心，因为该证书很快就会过期，而且我担心我的应用程序在那之后在 AppStore 中将无法运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:41:15.487

如果应用程序获得批准，并且您按时续订开发者注册，则用于提交应用程序的证书或条款是否过期不再重要。该应用程序将继续为任何从 iTunes 应用程序商店下载或购买它的客户服务，基本上是永远。

# android - location 和 currentBestLocation 来自哪里？在 Android 开发指南（获取用户位置）中

> ID：10328260
> 
> 赞同：5
> 
> 时间：2012-04-26T06:26:43.313
> 
> 标签：android, gps, location, userlocation

我阅读了有关在 Android Dev Guid 中[获取用户位置](http://developer.android.com/guide/topics/location/obtaining-user-location.html)的教程，并尝试将其调整为以下代码..但我不知道应该输入哪个位置值`isBetterLocation(Location location, Location currentBestLocation)`

**Example.class**

```
 private LocationManager locman;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

            String context = Context.LOCATION_SERVICE;
            locman = (LocationManager)getSystemService(context);

            Criteria criteria = new Criteria();
            criteria.setAccuracy(Criteria.ACCURACY_FINE);
            criteria.setAltitudeRequired(false);
            criteria.setBearingRequired(false);
            criteria.setPowerRequirement(Criteria.POWER_LOW);

            String provider = locman.getBestProvider(criteria, true);
            locman.requestLocationUpdates(
                    provider,MIN_TIME, MIN_DISTANCE, locationListener);

        }

        private LocationListener locationListener = new LocationListener(){

        @Override
        public void onLocationChanged(Location location) {
            // What should i pass as first and second parameter in this method
            if(isBetterLocation(location1,location2)){
               // isBetterLocation = true > do updateLocation 
               updateLocation(location);
            }
        }

        @Override
        public void onProviderDisabled(String provider) {}
        @Override
        public void onProviderEnabled(String provider) {}
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {}

       };

     protected boolean isBetterLocation(Location location, Location currentBestLocation) {
         if (currentBestLocation == null) {
            // A new location is always better than no location
            return true;
         }
          //Brief ... See code in Android Dev Guid "Obtaining User Location"
     } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T08:45:43.213

真的没那么难。代码的作用是接收找到的位置的持续更新；您可以让多个听众收听不同的提供商，因此这些更新可能或多或少取决于提供商（例如 GPS 可能比网络更准确）。`isBetterLocation(...)`评估侦听器找到的位置是否实际上比您已经知道的位置更好（并且应该在您的代码中引用）。isBetterLocation(...) 代码有据可查，所以应该不难理解，但第一个参数**location**是提供者找到的新位置，**currentBestLocation**是您已经知道的位置。

我使用的代码与您的代码大致相同，只是我不只是采用最佳提供商。处理程序的内容是因为我不想继续更新，只需在两分钟的最大时间范围内找到对我来说足够准确的最佳位置（GPS 可能需要一点时间）。

```
private Location currentBestLocation = null;
private ServiceLocationListener gpsLocationListener;
private ServiceLocationListener networkLocationListener;
private ServiceLocationListener passiveLocationListener;
private LocationManager locationManager;

private Handler handler = new Handler();

public void fetchLocation() {
    locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    try {
        LocationProvider gpsProvider = locationManager.getProvider(LocationManager.GPS_PROVIDER);
        LocationProvider networkProvider = locationManager.getProvider(LocationManager.NETWORK_PROVIDER);
        LocationProvider passiveProvider = locationManager.getProvider(LocationManager.PASSIVE_PROVIDER);

        //Figure out if we have a location somewhere that we can use as a current best location
        if( gpsProvider != null ) {
            Location lastKnownGPSLocation = locationManager.getLastKnownLocation(gpsProvider.getName());
            if( isBetterLocation(lastKnownGPSLocation, currentBestLocation) )
                currentBestLocation = lastKnownGPSLocation;
        }

        if( networkProvider != null ) {
            Location lastKnownNetworkLocation = locationManager.getLastKnownLocation(networkProvider.getName());
            if( isBetterLocation(lastKnownNetworkLocation, currentBestLocation) )
                currentBestLocation = lastKnownNetworkLocation;
        }

        if( passiveProvider != null) {
            Location lastKnownPassiveLocation = locationManager.getLastKnownLocation(passiveProvider.getName());
            if( isBetterLocation(lastKnownPassiveLocation, currentBestLocation)) {
                currentBestLocation = lastKnownPassiveLocation;
            }
        }

        gpsLocationListener = new ServiceLocationListener();
        networkLocationListener = new ServiceLocationListener();
        passiveLocationListener = new ServiceLocationListener();

        if(gpsProvider != null) {
            locationManager.requestLocationUpdates(gpsProvider.getName(), 0l, 0.0f, gpsLocationListener);
        }

        if(networkProvider != null) {
            locationManager.requestLocationUpdates(networkProvider.getName(), 0l, 0.0f, networkLocationListener);
        }

        if(passiveProvider != null) {
            locationManager.requestLocationUpdates(passiveProvider.getName(), 0l, 0.0f, passiveLocationListener);
        }

        if(gpsProvider != null || networkProvider != null || passiveProvider != null) {
            handler.postDelayed(timerRunnable, 2 * 60 * 1000);
        } else {
            handler.post(timerRunnable);
        }
    } catch (SecurityException se) {
        finish();
    }
}

private class ServiceLocationListener implements android.location.LocationListener {

    @Override
    public void onLocationChanged(Location newLocation) {
        synchronized ( this ) {
            if(isBetterLocation(newLocation, currentBestLocation)) {
                currentBestLocation = newLocation;

                if(currentBestLocation.hasAccuracy() && currentBestLocation.getAccuracy() <= 100) {
                    finish();
                }
            }
        }
    }

    @Override
    public void onStatusChanged(String s, int i, Bundle bundle) {}

    @Override
    public void onProviderEnabled(String s) {}

    @Override
    public void onProviderDisabled(String s) {}
}

private synchronized void finish() {
    handler.removeCallbacks(timerRunnable);
    handler.post(timerRunnable);
}

/** Determines whether one Location reading is better than the current Location fix
 * @param location  The new Location that you want to evaluate
 * @param currentBestLocation  The current Location fix, to which you want to compare the new one
 */
protected boolean isBetterLocation(Location location, Location currentBestLocation) {
    //etc
}

private Runnable timerRunnable = new Runnable() {

    @Override
    public void run() {
        Intent intent = new Intent(LocationService.this.getPackageName() + ".action.LOCATION_FOUND");

        if(currentBestLocation != null) {
            intent.putExtra(LocationManager.KEY_LOCATION_CHANGED, currentBestLocation);

            locationManager.removeUpdates(gpsLocationListener);
            locationManager.removeUpdates(networkLocationListener);
            locationManager.removeUpdates(passiveLocationListener);
        }
    }
}; 
```

# c++ - 霍夫曼解码快疯了

> ID：10328261
> 
> 赞同：2
> 
> 时间：2012-04-26T06:26:43.607
> 
> 标签：c++, huffman-code

问题是我可以第一次解码数据流，但是它会变成一个无限循环并一遍又一遍地显示相同的值......我正在使用 borland C++。解码首先将文本 a 到 z 保存在一个数组中，然后获取输入数据流，然后使用 strcpy 切割数组的内容，然后与第一个数组的内容进行比较，如果找到匹配项，则对应的 ASCII被打印。

代码：

```
#include<conio.h>
#include<iostream.h>
#include<string.h>
#include <stdio.h>
#include <stdlib.h>

using namespace std;

int codes[512];
char cut_stream[100];
char input_stream[100];
char decoded_stream[256];
int test,count,cut_start,cut_end,length_of_stream,final,temp_loop_s,temp_loop_e,temp_num,comp_num,send;
void select_num(int select)
{
 int output;
 output = select + 64;
 cout << char(output);
}
void decode()
{
cout<<"\nEnter the data stream ";//<<endl;
cin >> input_stream;
length_of_stream = strlen(input_stream);
//cout<<  length_of_stream ; //only for debugging
/********************************************
              the code starts here...
********************************************/
count = length_of_stream;

//count -= count;
for(int ini =0; ini<=count ; ini++)
{
for( final=1;final<=count;final++)
{
strncpy(cut_stream, &input_stream[ini], final);
//cut_start = cut_start + 1;
/*********************************************
                          compare
*********************************************/
temp_num = atoi(cut_stream);
for(int z= 1;z<=26;z++)
{
comp_num = codes[z];
if(comp_num == temp_num)
{
send  =z;
select_num(send);
test =1;
comp_num =0;
break;
}
}

if( test ==1)
{
 test =0;
 ini = final-1; // the increment will be given on the next for loop so it is reduced here
 //final =0;
  //cout<< "im in test";

 break;

}
}

}
cout<< "end";
 while(1);
}

//cout<< decoded_stream;
//while(1);

void main()
{
cut_start =0;
cut_end = 1;
 cout <<  "Huffman decoder" <<  endl;
 cout <<  "Enter the codes for a-z" <<  endl;
 for(int i =1;i<=3;i++)
 {
 cin >> codes[i];
 }
  decode();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:38:39.133

代码中至少有两个主要错误：

代码[] 数组大部分是未初始化的，即使您稍后访问数组以获取最多 26 个左右的索引，您也只能读取三个数字。

对 strncpy() 的调用被破坏，因为 strncpy() 在复制最大字符数时不会以空值终止字符串；也就是说，当您在 final 设置为 1 的情况下调用 strncpy() 时，strncpy() 会复制一个字符并且不会附加终止 NUL 字符，这将导致 atoi() 失败。

此外，如果您在霍夫曼编码中使用“0”和“1”字符，这无论如何都不会起作用，因为数字“01”和“1”都将被 atoi() 解释为 1（一），即使它们是不同的代码。如果这真的是霍夫曼编码，那么您根本不应该使用 atoi() 和整数，而应该使用二进制或字符串。

使用树数据结构更好地完成霍夫曼解码。查找任何有关算法的标准书籍以供参考。

# opengl - OpenGL中的3D相机旋转：如何防止相机抖动？

> ID：10328262
> 
> 赞同：0
> 
> 时间：2012-04-26T06:26:43.893
> 
> 标签：opengl, camera, rotation, jogl, quaternions

我对 OpenGL 和 3D 编程相当陌生，但我已经开始根据[http://www.cprogramming.com/tutorial/3d/quaternions.html](http://www.cprogramming.com/tutorial/3d/quaternions.html)的教程使用四元数来实现相机旋转。这都是使用 JOGL 用 Ja​​va 编写的。

我意识到这类问题被问了很多，但我一直在寻找，找不到有效的解决方案，所以我认为这可能是我的代码的问题。

所以问题是如果我在一个或多个轴上进行两次不同的连续旋转，就会出现抖动和奇怪的旋转。沿 a 轴的第一次旋转，无论是负向还是正向，都可以正常工作。但是，如果我沿 a 轴正向旋转，然后在该轴上负向旋转，则旋转将前后抖动，就好像它在进行正向和负向旋转之间交替一样。

如果我自动旋转（例如向左旋转 500 次，然后向右旋转 500 次），那么它似乎工作正常，这让我认为这可能与按键有关。但是，如果我绕 x 轴旋转然后绕 y 轴旋转，旋转也是不正确的（因为没有更好的词）。

无论如何，我有一个渲染器类，带有以下用于绘制“场景节点”的显示循环：

```
private void render(GLAutoDrawable drawable) {
    GL2 gl = drawable.getGL().getGL2();
    gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);

    gl.glMatrixMode(GL2.GL_PROJECTION);
    gl.glLoadIdentity();
    glu.gluPerspective(70, Constants.viewWidth / Constants.viewHeight, 0.1, 30000);
    gl.glScalef(1.0f, -1.0f, 1.0f); //flip the y axis

    gl.glMatrixMode(GL2.GL_MODELVIEW);
    gl.glLoadIdentity();

    camera.rotateCamera();
    glu.gluLookAt(camera.getCamX(), camera.getCamY(), camera.getCamZ(), camera.getViewX(), camera.getViewY(), camera.getViewZ(), 0, 1, 0);
    drawSceneNodes(gl);
}

private void drawSceneNodes(GL2 gl) {
    if (currentEvent != null) {
        ArrayList<SceneNode> sceneNodes = currentEvent.getSceneNodes();
        for (SceneNode sceneNode : sceneNodes) {
            sceneNode.update(gl);
        }
    }

    if (renderQueue.size() > 0) {
        currentEvent = renderQueue.remove(0);
    }
} 
```

旋转在相机类中执行如下：

```
public class Camera {
    private double width;
    private double height;
    private double rotation = 0;

    private Vector3D cam = new Vector3D(0, 0, 0);
    private Vector3D view = new Vector3D(0, 0, 0);
    private Vector3D axis = new Vector3D(0, 0, 0);

    private Rotation total = new Rotation(0, 0, 0, 1, true);

    public Camera(GL2 gl, Vector3D cam, Vector3D view, int width, int height) {
        this.cam = cam;
        this.view = view;
        this.width = width;
        this.height = height;
    }

    public void rotateCamera() {
        if (rotation != 0) {
            //generate local quaternion from new axis and new rotation
            Rotation local = new Rotation(Math.cos(rotation/2), Math.sin(rotation/2 * axis.getX()), Math.sin(rotation/2 * axis.getY()), Math.sin(rotation/2 * axis.getZ()), true);

            //multiply local quaternion and total quaternion
            total = total.applyTo(local);

            //rotate the position of the camera with the new total quaternion
            cam = rotatePoint(cam);

            //set next rotation to 0
            rotation = 0;
        }
    }

    public Vector3D rotatePoint(Vector3D point) {
        //set world centre to origin, i.e. (width/2, height/2, 0) to (0, 0, 0)
        point = new Vector3D(point.getX() - width/2, point.getY() - height/2, point.getZ());

        //rotate point
        point = total.applyTo(point);

        //set point in world coordinates, i.e. (0, 0, 0) to (width/2, height/2, 0) 
        return new Vector3D(point.getX() + width/2, point.getY() + height/2, point.getZ());
    }

    public void setAxis(Vector3D axis) {
        this.axis = axis;
    }

    public void setRotation(double rotation) {
        this.rotation = rotation;
    }
} 
```

rotateCamera 方法从新的旋转和先前的旋转生成新的永久四元数，而 rotatePoint 方法只是将一个点乘以从永久四元数生成的旋转矩阵。

旋转轴和旋转角度通过简单的按键设置如下：

```
 @Override
public void keyPressed(KeyEvent e) {
    if (e.getKeyCode() == KeyEvent.VK_W) {
        camera.setAxis(new float[] {1, 0, 0});
        camera.setRotation(0.1f);
    }
    if (e.getKeyCode() == KeyEvent.VK_A) {
        camera.setAxis(new float[] {0, 1, 0});
        camera.setRotation(0.1f);
    }
    if (e.getKeyCode() == KeyEvent.VK_S) {
        camera.setAxis(new float[] {1, 0, 0});
        camera.setRotation(-0.1f);
    }
    if (e.getKeyCode() == KeyEvent.VK_D) {
        camera.setAxis(new float[] {0, 1, 0});
        camera.setRotation(-0.1f);
    }
} 
```

我希望我已经提供了足够的细节。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:54:51.687

关于抖动：我在您的代码中看不到任何渲染循环。render方法是怎么触发的？通过计时器还是通过事件？

围绕两个轴旋转时的旋转混乱可能与您需要旋转第二个旋转的轴以及第一个轴的总旋转这一事实有关。您不能只应用围绕全局坐标系的 X 或 Y 轴的旋转。您必须围绕相机的上轴和右轴应用旋转。

我建议您创建一个相机类来存储相机的向上、向右和视图方向矢量，并将您的旋转直接应用于这些轴。如果这是一个类似 FPS 的相机，那么您需要围绕绝对 Y 轴而不是向上矢量水平旋转相机（向左/向右看）。这也将导致相机的新右轴。然后，您围绕新的右轴垂直（向上/向下）旋转相机。但是，当相机直接向上或向下看时，您必须小心，因为在这种情况下，您不能使用视图方向和向上向量的叉积来获得正确的向量。

# javascript - 通过单击按钮打开 html 选定列表

> ID：10328269
> 
> 赞同：0
> 
> 时间：2012-04-26T06:27:22.750
> 
> 标签：javascript, html

我在网页中创建了一个选项列表，我想用一个按钮打开选择列表，`<div>`当从列表中选择一个选项时，所选值也出现在 div 上。

所以在这里我希望javascript属性在按钮上打开列表点击这样的东西

```
document.getElementById('selectedlist').open. 
```

任何机构对此有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:40:00.720

看看[http://code.google.com/p/expandselect/](http://code.google.com/p/expandselect/)。我想这就是你想要的。然后你可以像这样打开选择。

```
ExpandSelect("myselect_id") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T05:31:38.743

这是在单击按钮时打开（切换）选择框的简单 Javascript 代码。

```
<script type="text/javascript">
    function expandSelect(id){
    var select_flag = document.getElementById('select_flag').value;
        if(select_flag==1){
            var select_box = document.getElementById(id);
            select_box.size = 1;
            document.getElementById('select_flag').value = 0;
        }else{
            var select_box = document.getElementById(id);
            select_box.size = select_box.options.length; 
            document.getElementById('select_flag').value = 1;
        }
   }
</script>

<button onclick="expandSelect('select_box')"> Toggle Select Box </button>

<div id="container">
    <select name="select_box" id="select_box" >
        <option value="">Select</option>
        <option value="">option1</option>
        <option value="">option2</option>
        <option value="">option3</option>
        <option value="">option4</option>
        <option value="">option5</option>
        <option value="">option6</option>
    </select>
    <input type="hidden" name="select_flag" id="select_flag" value="0">
</div> 
```

# flex4 - 在 flex 中设计和打印收据格式

> ID：10328272
> 
> 赞同：0
> 
> 时间：2012-04-26T06:27:38.310
> 
> 标签：flex4, flash-builder

我想在 flex中设计**收据。**

如果我想显示一些无边框的表格单元格，我应该使用哪个控件来显示表格？我还想像在 Excel 中那样合并表格中的单元格。

任何人都可以在单击按钮时给我打印收据的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:25:42.887

请在 flex 中准备您的收据布局，然后检查您的布局是否正确。如果正确，则放置一个按钮并在按钮的单击事件中记下打印作业代码。确保在单击事件时请隐藏按钮直到打印完成（意味着调用 upto 发送方法）

请为您的应用程序参考 PrintJob 类的 ActionScript，以通过您的 flex 应用程序打印收据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:24:39.090

我可能会使用带有 customItemRenderer 的 List 控件或带有一些精美文本格式的 textArea。至于为您提供代码，我很乐意为您完成的代码提供输入，或者为您指明正确的方向，但无法为您完成工作。祝你好运。

# telerik - Telerik radTreeListView UI 虚拟化

> ID：10328276
> 
> 赞同：0
> 
> 时间：2012-04-26T06:27:53.287
> 
> 标签：telerik

嘿嘿，

我正在使用 RadTreeListView 控件加载大量数据，它似乎不支持 UI 虚拟化，UI 冻结并且根本没有响应。

数据量为 400 行。

如果它支持 UI 虚拟化，你有什么想法吗？

-氨基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:58:15.453

问题解决了，我不得不在 RadTreeListView 控件中添加 MinHeight="300" Height="550"

# html - 处理不同浏览器中不支持的游标

> ID：10328278
> 
> 赞同：0
> 
> 时间：2012-04-26T06:28:13.443
> 
> 标签：html, css

我想在表格单元格悬停时将光标更改为单元格（粗加号）

我用了

```
tr:hover td {
    cursor: cell;
} 
```

看起来它不适用于chrome，但适用于firefox。

游标列表 [http://www.css3.com/css-cursor/](http://www.css3.com/css-cursor/) 和 [http://www.sitepoint.com/css3-cursor-styles/#fbid=2MQ0iRM9or2](http://www.sitepoint.com/css3-cursor-styles/#fbid=2MQ0iRM9or2) 说它在 chrome 中受支持。

一项工作可以是为光标创建图像。

我正在寻找其他更好的解决方法/

或者管理不同浏览器的光标的最佳实践是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:37:51.770

在 Firefox 中，单元格光标似乎默认为十字准线。我只需设置您的光标并将其留给浏览器，然后再决定如何处理它。换句话说，保留你拥有的 CSS，只要你想要的光标是规范中的标准，它就会随着时间的推移慢慢被采用，并有一定程度的优雅降级。

您的另一个选择是使用 JavaScript。如果你喜欢 jQuery，周围似乎有一些插件可以使用图像来做到这一点。

这是我挖出来的一个看起来很简单的：

[http://jquery.kidsil.net/examples/customcursor/example.html](http://jquery.kidsil.net/examples/customcursor/example.html)

祝你好运！

# security - 代码注入的旧时代结束了吗？

> ID：10328279
> 
> 赞同：-1
> 
> 时间：2012-04-26T06:28:21.983
> 
> 标签：security, stack-overflow, buffer-overflow, code-injection, shellcode

我想知道，既然所有更新的操作系统都通过 ASLR、Canary Checks 和其他此类方法防止堆栈和堆类型溢出，内存损坏漏洞是否仍然普遍存在？鉴于系统管理员有能力并保护系统免受暴力或 libc 攻击，老实说，我看不到许多其他方法。对于有人攻击系统，我唯一能想象的就是覆盖堆栈上的函数指针，但仅此而已。也许如果有人找到一种预测随机数的聪明方法，依赖随机结果的方案可能会被击败，但这似乎不太可能。现在看来，利用他人系统的唯一方法是欺骗 root 或管理员安装您的软件。代码注入的旧时代结束了吗？我'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:13:36.077

如果已经安装了易受攻击的软件，则无需欺骗管理员安装您的软件。使用更高级别的结构来注入操作系统命令要容易得多。例如：允许将文件上传到任意位置的 Web 应用程序，使用用户可控输入来构建 OS 命令的 Web 应用程序。

# javascript - 需要替换特定单词的字体

> ID：10328281
> 
> 赞同：3
> 
> 时间：2012-04-26T06:28:40.977
> 
> 标签：javascript, jquery, css, fonts, font-family

我想将字体系列（Arial）更改为 HTML 文档中存在的单词“AAAAA”。该词可以多次来自 DB，但我需要单独替换该单个词的字体。

我认为它将由 JavaScript 完成。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:45:54.340

假设我们需要格鲁吉亚

```
 .geo{
    font-family:Georgia;
    font-style:italic;
    font-weight:bold;
    font-size:19px;
  } 
```

## *[演示](http://jsbin.com/arupaj/3/edit)*

```
var $els = $('body *'); // iterate through all elements // or define specific for performance.

$els.each(function(){ 
  $(this).html($(this).text().replace(/AAAAA/g, '<span class="geo">AAAAA</span>')); 
}); 
```

如果`<span>`可能会给您带来问题（通常通过 DOM 使用）...我建议使用`<font>`：`<font class="geo">AAAAA</font>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:50:38.673

```
$.fn.changeWord = function (str, className) {
    var regex = new RegExp(str, "gi");
    return this.each(function () {
        this.innerHTML = this.innerHTML.replace(regex, function(matched) {
            return "<span class='" + className + "'>" + matched + "</span>";
        });
    });
}; 
```

叫它

```
$('#myDiv').changeWord('specialWord', 'sw'); 
```

[**演示。**](http://jsfiddle.net/x9BSn/3/)

**更新：** [**演示。**](http://jsfiddle.net/x9BSn/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:19:54.330

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            //$('body').replaceWith( $('<div></div>').append($(body).clone()).html().replace(/AAAA/g, '<span style="font-family: Arial; color:red;">AAAA</span>');

            //Or

            // global and case sensitive search in string
            $('#replaceTest2').replaceWith($('<div></div>').append($('#replaceTest2').clone()).html().replace(/AAAA/g, '<span style="font-family: Arial; color:red;">AAAA</span>'));
            // global and case insensitive search in string
            $('#replaceTest3').replaceWith($('<div></div>').append($('#replaceTest3').clone()).html().replace(/AAAA/gi, '<span style="font-family: Arial; color:red;">AAAA</span>'));
        });
    </script>
    <style type="text/css">
        body
        {
            font-family: Batang;
            font-style: italic;
            font-weight: bolder;
        }
    </style>
</head>
<body>
    <h1>
        Original Text
    </h1>
    <div id="replaceTest1">
        Hi.. testing <span style="font-family: Ebrima;">test aaaa</span>
        <div>
            <span style="font-family: Bookshelf Symbol 7; font-style: normal;">rreee AAAA </span>
            test
        </div>
    </div>
    <h1>
        Original Text Replace ( global and case sensitive search in string )
    </h1>
    <div id="replaceTest2">
        Hi.. testing <span style="font-family: Ebrima;">test aaaa</span>
        <div>
            <span style="font-family: Bookshelf Symbol 7; font-style: normal;">rreee AAAA </span>
            test
        </div>
    </div>
    <h1>
        Original Text Replace ( global and case insensitive search in string )
    </h1>
    <div id="replaceTest3">
        Hi.. testing <span style="font-family: Ebrima;">test aaaa</span>
        <div>
            <span style="font-family: Bookshelf Symbol 7; font-style: normal;">rreee AAAA </span>
            test
        </div>
    </div>
</body>
</html> 
```

# java - gwt-maven-插件。服务器端热重新部署

> ID：10328282
> 
> 赞同：0
> 
> 时间：2012-04-26T06:29:00.633
> 
> 标签：java, gwt, maven

我在我的项目中配置了 gwt-maven-plugin，并通过“run as - Web application”启动它。但我没有得到服务器端热重新部署。只有在重新启动托管模式后，我才能看到服务实现的变化。有任何想法吗？谢谢。

我的 POM：org.apache.maven.plugins maven-war-plugin 2.2 src/main/webapp/WEB-INF/web.xml **/web.xml

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>${gwt.version}</version>
            <executions>
                <execution>
                    <configuration>
                        <module>my.app.home.ModuleName</module>
                        <draftCompile>true</draftCompile>
                        <style>PRETTY</style>
                        <webAppDirectory>src/main/webapp</webAppDirectory>

                    <!--    <runTarget>my.app.home.ModuleName/ModuleName.html</runTarget> -->

                    </configuration>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# python - 替换列表中的字符串值

> ID：10328289
> 
> 赞同：2
> 
> 时间：2012-04-26T06:29:58.803
> 
> 标签：python, string, list

我有一个清单：

```
s = ["sam1", "s'am2", "29"] 
```

我想`'`从整个列表中替换。
我需要输出为

```
s = ["sam1", "sam2", "30"] 
```

目前我正在遍历列表。
有没有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T06:34:32.783

你可以试试这个：

```
 s = [i.replace("'", "") for i in s] 
```

但正如所指出的，这仍在遍历列表。我想不出在某些时候不包含列表的某种迭代（显式或*隐式*）的任何解决方案。

如果您想要处理大量数据并且担心速度，您可以通过计时来评估各种方法并选择最快的方法，否则我会坚持使用您认为最易读的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:33:55.717

您还可以使用`map`and `lambda`：

`map(lambda a: a.replace("\'",""),s)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T06:44:43.880

山姆，

这是我能想到的最接近的方法，无需迭代。最终，它以某种方式在非常原子的级别上进行迭代。

```
s = ["sam1", "s'am2", "29"]
x = ','.join(s).replace("'","").split(",") 
```

# java - 如何在登录屏幕上重定向 Spring 安全并发会话控制“消息”？

> ID：10328290
> 
> 赞同：7
> 
> 时间：2012-04-26T06:30:06.173
> 
> 标签：java, spring, jakarta-ee, spring-security, spring-webflow

我有 Web 应用程序，其中我使用了 Spring 框架。对于并发会话控制，我使用了 spring 功能，一旦该用户登录到另一个会话，他/她的前一个会话将过期，只有 1 个登录会话将为 1 个用户维护。

现在在这种情况下，我收到此消息“*此会话已过期（可能是由于同一用户尝试多个并发登录）。* ”

但我在浏览器的完整白页上收到此消息。我希望这条消息只出现在我的登录屏幕上。

这是我为用户处理并发会话的 Spring Security xml 的一部分。

```
<security:session-management invalid-session-url="/login.jsp?error=sessionExpired" session-authentication-error-url="/login.jsp?error=alreadyLogin">
                    <security:concurrency-control max-sessions="1" error-if-maximum-exceeded="false" />
</security:session-management> 
```

任何专门用于自定义此消息并将此消息重定向到所需 Web 应用程序页面的链接将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T04:53:38.107

Original XML entry in spring-security.xml

```
<security:session-management session-authentication-error-url="/login.jsp?error=alreadyLogin">
                    <security:concurrency-control max-sessions="1" error-if-maximum-exceeded="false" />
</security:session-management> 
```

Just You have to added following parameter in xml to redirect the Login expired action or invalid session url

expired-url="url value"

invalid-session-url="url value"

Modified XML entry

```
<security:session-management invalid-session-url="/login.jsp?error=sessionExpired" session-authentication-error-url="/login.jsp?error=alreadyLogin">
                    <security:concurrency-control max-sessions="1" expired-url="/login.jsp?error=sessionExpiredDuplicateLogin" error-if-maximum-exceeded="false" />
</security:session-management> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:17:54.033

在 jar spring-security-core 中有 .properties 文件。

您需要使用应用程序中的自定义消息覆盖所需的属性。

# c# - 使用 c# 在 ASP.net 中更改背景图像

> ID：10328293
> 
> 赞同：2
> 
> 时间：2012-04-26T06:30:20.783
> 
> 标签：c#, asp.net, css, visual-studio

我目前正在尝试设计一个网页，我已将背景图像设置为我网站文件夹中的图像。asp.net 代码显示为：

正文背景="ProtectedPages/Storage/green.png"

我想知道是否有一种方法可以使用 c# 代码通过按钮来更改它。我正在努力做到这一点，以便网站的用户可以从选项列表中更改背景图像，任何帮助将不胜感激:)

干杯，约翰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:15:43.577

改变你的身体标签如下

身体 id="bdy1" runat="服务器"

现在更改您的 .aspx.cs 页面

在页面加载时写下以下内容

1）如果你想要图像背景然后

bdy1.Attributes.Add("style", "background:url(images/tulips.jpg);");

2）如果你想要颜色作为背景然后

bdy1.Attributes.Add("style", "background:teal");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:55:19.623

要动态更改背景，您需要执行以下操作。

在 aspx 页面中放置下拉列表和按钮，如下所示。

```
<input type="button" value="Change BG" onclick="ChangeBG();" />
<asp:DropDownList ID="DropDownList1" runat="server" >
    <asp:ListItem>bg_1.jpg</asp:ListItem>
    <asp:ListItem>bg_2.jpg</asp:ListItem>
    <asp:ListItem>bg_3.jpg</asp:ListItem>
    <asp:ListItem>bg_4.jpg</asp:ListItem>        
</asp:DropDownList> 
```

在 head 部分定义 javascript 函数如下

```
<script type="text/javascript" language="javascript" >
    function ChangeBG() {
        var ddl = document.getElementById("DropDownList1");
        var strimg = ddl.options[ddl.selectedIndex].value;
        document.body.background = strimg;
    }
</script> 
```

然后最重要的是在 body 的加载事件上调用 ChangeBG() 函数。

```
<body onload="ChangeBG();"  > 
```

您还可以在下拉更改事件中设置背景。

希望这会帮助你..快乐编码....

# java - 在 XYLineChart 上显示 X 值

> ID：10328294
> 
> 赞同：1
> 
> 时间：2012-04-26T06:30:20.993
> 
> 标签：java, swing, jfreechart

我想在 XY 折线图上显示 X 值 如下所示： 我该怎么做？ ![在此处输入图像描述](../Images/1b55164990862cacf36e9c9617d8ddbd.png) **我想像这样显示它：** ![在此处输入图像描述](../Images/02e393cf366b618652e413f613bdf93d.png) 这是我显示折线图的代码：

```
public class LineChartDemo6{
public static void main(String arg[]){
  XYSeries series = new XYSeries("Average Weight");
  series.add(20.0, 20.0);
  series.add(40.0, 20.0);
  series.add(55.0, 20.0);
  series.add(70.0, 20.0);
  XYDataset xyDataset = new XYSeriesCollection(series);
  JFreeChart chart = ChartFactory.createXYLineChart
  ("XYLine Chart using JFreeChart", "Age", "Weight",
 xyDataset, PlotOrientation.VERTICAL, true, true, false);
  ChartFrame frame1=new ChartFrame("XYLine Chart",chart);
  frame1.setVisible(true);
  frame1.setSize(300,300);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:19:42.990

您可以`XYItemLabelGenerator`向绘图的渲染器添加一个，如本[示例](https://stackoverflow.com/a/6770477/230513)和本[示例所示](https://stackoverflow.com/a/3158958/230513)。看起来*ArgumentIndex* `{1}`是域值。

附录：您的[示例](http://pastebin.com/siU9Q92p)运行良好；它只需要一点额外的*余量*。

```
ValueAxis range = plot.getRangeAxis();
range.setUpperMargin(0.20); 
```

![在此处输入图像描述](../Images/b97d717307ddbdd6a76e5452f1385bad.png)

# opencv - 大小和响应在 SURF 关键点中究竟代表什么？

> ID：10328298
> 
> 赞同：20
> 
> 时间：2012-04-26T06:30:39.883
> 
> 标签：opencv, feature-detection, surf, template-matching, video-tracking

我正在使用 OpenCV 2.3 进行关键点检测和匹配。但是我对检测算法给出的`size`和参数有点困惑。`response`它们到底是什么意思？

根据 OpenCV 手册，我无法弄清楚：

> `float size`：有意义的关键点邻域的直径
> 
> `float response`：选择最强关键点的响应。可用于进一步排序或二次抽样

我认为跟踪的最佳点是响应最高的点，但似乎并非如此。那么，我如何对 surf 检测器返回的一组关键点进行二次采样，以仅在可追踪性方面保留最好的关键点呢？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-26T12:33:43.523

# 尺寸和响应

SURF是一个blob检测器，简而言之，一个特征的大小就是blob的大小。更准确地说，OpenCV 返回的大小是近似 Hessian 算子长度的一半。大小也称为比例，这是由于斑点检测器的工作方式，即在功能上等于首先用高斯滤波器在几个尺度上模糊图像，然后对图像进行下采样，最后检测具有固定大小的斑点。请参阅下图，显示 SURF 特征的大小。每个特征的大小是绘制圆的半径。从特征中心到圆周的线表示角度或方向。在此图像中，斑点检测过滤器的响应强度是彩色编码的。您可以看到大多数检测到的特征响应较弱。（查看全尺寸图片[在这里](https://i.stack.imgur.com/0SuqI.jpg)）

![冲浪功能](../Images/99f9adb8335decfbe01925afa5dc86da.png)

此直方图显示了上图中特征的响应强度分布：

![显示响应强度分布的直方图](../Images/776916a0079d9b393131e1a6404deb64.png)

# 要跟踪哪些特征？

最强大的特征跟踪器跟踪所有检测到的特征。特征越多，鲁棒性越强。但是跟踪大量特征是不切实际的，因为我们经常希望限制计算时间。要经常跟踪的特征数量应该针对每个应用程序进行经验调整。通常将图像划分为规则的子区域，并且在每个子区域中保持跟踪 n 个最强的特征。通常选择 n 使得每帧总共检测到大约 500~1000 个特征。

# 参考

阅读[描述 SURF 的期刊论文](ftp://ftp.vision.ee.ethz.ch/publications/articles/eth_biwi_00517.pdf)肯定会让您对它的工作原理有一个很好的了解。尽量不要陷入细节中，特别是如果您的背景不是机器/计算机视觉或图像处理。SURF 检测器乍一看似乎非常新颖，但整个想法是使用积分图像（早在 SURF 之前就已被其他方法使用）估计 Hessian 算子（一种成熟的滤波器）。如果你想很好的理解 SURF 而你又不熟悉图像处理，你需要回去阅读一些介绍材料。最近我遇到[了一本免费的新书](http://www.computervisionmodels.com/)，它的第 13 章对特征检测做了很好的简要介绍。并非其中所说的所有内容在技术上都是正确的，但这是一个很好的起点。[在这里](http://www.ipol.im/pub/algo/or_speeded_up_robust_features/)，您可以找到另一个很好的 SURF 描述，其中有几张图片显示了每个步骤的工作原理。在该页面上，您会看到此图像：

![冲浪斑点](../Images/3499bf0885de8416ee129a735b16b4da.png)

您可以看到白色和黑色的斑点，这些斑点是 SURF 在多个尺度上检测并估计它们的大小（OpenCV 代码中的半径）的斑点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T11:50:05.873

1.  “大小”是原始图像中描述符所覆盖区域的大小（它是通过在比例空间中对原始图像进行下采样获得的，因此它根据它们的比例从关键点到关键点而变化）。

2.  “响应”确实是一个点“有多好”的指标（粗略地说，就角落而言）。

3.  好的点对于静态场景检索是稳定的（这是 SIFT/SURF 描述符的主要目的）。在跟踪的情况下，您可能会出现好点，因为被跟踪的对象位于良好的背景上，一半在阴影中......然后因为这种情况发生变化（光线变化，遮挡......）而消失。因此，不能保证跟踪任务总是有一个好点。

# java - Java ConcurrentMap - 键在地图中的位置

> ID：10328302
> 
> 赞同：1
> 
> 时间：2012-04-26T06:31:04.290
> 
> 标签：java, treemap, fifo

我有一个有趣的问题需要帮助。我已经为两个单独的条件实现了几个队列，一个基于 FIFO，另一个基于键的自然顺序（ConcurrentMap）。也就是说，您可以想象两个队列具有相同的数据，只是排序不同。如果我根据某些标准在 ConcurrentMap 中找到键，我有一个问题（我正在寻找一种有效的方法），那么在 FIFO 映射中找到键的“位置”的最佳方法是什么。本质上我想知道它是第一个键（这很容易），还是说它是第 10 个键。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:32:49.580

没有用于访问 FIFO 映射中的订单的 API。你可以做到的唯一方法是迭代`keySet()`，`values()`或`entrySet()`计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:39:52.150

如果您可以使用 a `ConcurrentNavigableMap`，则 的大小`headMap`正是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:34:44.037

我相信下面的代码可以完成这项工作。我将 element --> key 的实现保留为抽象方法。请注意用于为元素分配递增数字的计数器。另请注意，如果`add(...)`被多个线程调用，则 FIFO 中的元素只是松散排序的。这迫使幻想`max(...)`和`min(...)`逻辑。这也是为什么位置是*近似*的。第一个和最后一个是特殊情况。首先可以明确指出。最后一个很棘手，因为当前的实现返回一个真实的索引。

由于这是一个大概位置，我建议您考虑让 API 返回一个`float`between`0.0`和`1.0`来指示队列中的相对位置。

如果您的代码需要使用除 之外的其他方式支持删除`pop(...)`，您将需要使用近似大小，并将返回更改为`((id - min) / (max - min)) * size`，并使用所有适当的`int`/`float`强制转换和舍入。

```
public abstract class ApproximateLocation<K extends Comparable<K>, T> {

    protected abstract K orderingKey(T element);

    private final ConcurrentMap<K, Wrapper<T>> _map = new ConcurrentSkipListMap<K, Wrapper<T>>();
    private final Deque<Wrapper<T>> _fifo = new LinkedBlockingDeque<Wrapper<T>>();
    private final AtomicInteger _counter = new AtomicInteger();

    public void add(T element) {
        K key = orderingKey(element);
        Wrapper<T> wrapper = new Wrapper<T>(_counter.getAndIncrement(), element);
        _fifo.add(wrapper);
        _map.put(key, wrapper);
    }

    public T pop() {
        Wrapper<T> wrapper = _fifo.pop();
        _map.remove(orderingKey(wrapper.value));
        return wrapper.value;
    }

    public int approximateLocation(T element) {
        Wrapper<T> wrapper = _map.get(orderingKey(element));
        Wrapper<T> first = _fifo.peekFirst();
        Wrapper<T> last = _fifo.peekLast();
        if (wrapper == null || first == null || last == null) {
            // element is not in composite structure; fifo has not been written to yet because of concurrency
            return -1;
        }
        int min = Math.min(wrapper.id, Math.min(first.id, last.id));
        int max = Math.max(wrapper.id, Math.max(first.id, last.id));
        if (wrapper == first || max == min) {
            return 0;
        }
        if (wrapper == last) {
            return max - min;
        }
        return wrapper.id - min;
    }

    private static class Wrapper<T> {
        final int id;
        final T value;

        Wrapper(int id, T value) {
            this.id = id;
            this.value = value;
        }
    }
} 
```

# sharepoint - 以下 MOSS 2007 代码可 能导致内存泄漏？

> ID：10328310
> 
> 赞同：0
> 
> 时间：2012-04-26T06:31:37.170
> 
> 标签：sharepoint, moss

下面的代码是否泄漏内存？如果是这样，有什么优化它的建议吗？

```
SPWeb web = (SPWeb)properties.Feature.Parent; // comes from the event receiver
//... lots of other code

// the below is the focal point.
foreach (SPWeb childWeb in web.Webs) 
{
    try
    {
        // lots of heavy processing with the childWebs
    }
    finally
    {
        if (childWeb != null)
        {
            childWeb.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:54:21.263

您发布的代码应该没问题。但是，根据您在 try 语句中对 childWeb 所做的操作，它可能会导致内存泄漏。你可以发布整个代码吗？你怀疑内存泄漏吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:37:47.733

According to [Disposing Objects](http://msdn.microsoft.com/en-us/library/ee557362.aspx), your code matches the Good Coding Practice for SPWeb.Webs.

As mentioned on that page, I would recommend downloading and using [SPDisposeCheck](http://archive.msdn.microsoft.com/SPDisposeCheck) as both verification of correct code and identification of potential memory leaks.

# python - 包装一个带有指针数组的函数

> ID：10328314
> 
> 赞同：1
> 
> 时间：2012-04-26T06:31:47.513
> 
> 标签：python, c, interface, swig

我有一个`struct a { }`定义。我的 C 函数`struct a` 通过引用获取一个数组，然后在其中填充数据。所以它接受一个论点`struct a **`。我想使用 SWIG 接口从 Python 调用此函数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T11:53:35.990

您可以使用 SWIG 和 Python 完成此操作。我已经设置了以下 test.h 文件来演示：

```
struct a {
  int val;
};

static void populate(struct a **list) {
  int count = 0;
  // Terminate when NULL entry found
  while (*list) {
    (*list)->val = count++;
    ++list;
  }
} 
```

populate 函数采用`struct a**`您所描述的 a ，假设列表以 NULL 结尾并对列表的每个元素执行某些操作。

我选择将它暴露给 Python 的方式是作为一个函数，它接受一个整数，即要使用的列表的大小，然后返回结果列表，因为这是映射“通过返回的语义”的最佳方式论据”在我看来成立。

我设置了一个基本模块文件：

```
%module test

%{
#include "test.h"
%} 
```

然后添加了一个类型映射，它根据指定给 Python 函数的大小准备一个输入列表：

```
%typemap(in,numinputs=1) struct a ** (int len=0) {
  len = (int)PyInt_AsLong($input);
  $1 = malloc(sizeof(struct a*)*(len+1));
  $1[len] = NULL;
  for (int i = 0; i < len; ++i) {
    $1[i] = malloc(sizeof(struct a));
  }
} 
```

基本上，它将参数视为整数，为指针数组分配内存，然后为元素本身指向的对象分配一些内存。（我单独分配它们以便 SWIG/Python 可以单独处理每个项目的引用计数，这比为所有元素分配一个块更简单）

编写完该类型映射后，我添加了另一个类型映射，它负责获取调用函数的结果并将其转换回 PyList：

```
%typemap(argout) struct a ** {
  // Push into PyList for return
  $result = PyList_New(len$argnum);
  for (int i = 0; i < len$argnum; ++i) {
     PyObject *element = SWIG_NewPointerObj(SWIG_as_voidptr($1[i]), SWIGTYPE_p_a, SWIG_POINTER_OWN);
     PyList_SET_ITEM($result, i, element);
  }
} 
```

它利用了`len`我们在 in 类型映射中创建的变量，尽管由于它是 NULL 终止的，我们可以再次计算长度。`struct a`然后，我们为传递给`populate`函数的每个对象使用一个包装对象（由 SWIG/Python 拥有）填充 Python 列表中的每个项目。请注意，如果类型名称不同，您将需要更改`SWIGTYPE_p_a`为适当的`SWIGTYPE`. （这些可以从生成的包装源中找到）。

最后，我们需要为 C 端的列表取消分配内存，方法是：

```
%typemap(freearg) struct a ** {
  free($1);
} 
```

然后让 SWIG 使用这些类型映射来包装头文件本身：

```
%include "test.h" 
```

我编译了这个：

```
痛饮 -python -Wall test.i
gcc -Wall -Wextra test_wrap.c -I/usr/include/python2.6 -o _test.so -std=c99 -shared

```

然后运行以下 Python 进行检查：

```
import test

r=test.populate(100)
print r[0].val 
```

这个例子有几点需要注意：

*   没有错误检查，例如`test.populate("Hello world")`会做坏事，`PyList_New`可能会失败，如果确实失败了，我们需要释放单个元素，而不仅仅是列表
*   如果内存所有权语义不同，则需要`SWIG_POINTER_OWN`适当更改
*   如果您不想在 Python 接口上指定列表的大小（例如，它是已知的或以其他方式固定），您可以将 更改`numinputs=1`为 0 并`len`在 in 类型映射中进行相应设置。
*   如果您的函数采用列表和指定其长度的整数而不是使用以 NULL 结尾的列表，则可以将其扩展为[多参数类型映射](http://www.swig.org/Doc1.3/Typemaps.html#Typemaps_multi_argument_typemaps)。

编译/运行此示例所需的所有代码都包含在此答案中，但如果您希望将其放在一个方便的 tarball 中，我也将其[放在我的网站上](http://static.lislan.org.uk/~ajw/pyarrout.tar.gz)。即使该链接应该断开，答案仍然有效。

# php - Yubikey php 集成

> ID：10328316
> 
> 赞同：0
> 
> 时间：2012-04-26T06:31:54.573
> 
> 标签：php, authentication

所以我使用 Yubikey 已经有一段时间了，现在想将它集成到我的管理部分。

我在这里找到了一个很棒的课程：[http ://code.google.com/p/yubikey-php-webservice-class](http://code.google.com/p/yubikey-php-webservice-class)

唯一的问题是，它会检查：

[yubikeytest.php]

```
if (md5 (substr ($otp, 0, 12).":".$_POST['username']) != $token_id) 
```

这意味着 i 必须已经在数据库中有一个令牌 ID。

但我不知道如何创建原始令牌并将其放入数据库中，因为 $token_id 必须 = OTP 和用户名的 md5 哈希，但我们都知道 otp 是一次，因此永远不会 = 原始令牌。

我是不是做错了什么，我如何才能以尽可能少的麻烦来实现这一点？

我想要做的是保留我当前的身份验证，但是对于那些拥有/想要使用 yubiekey 进行身份验证的用户，他们可以向我们注册他们的密钥 <- 我想知道如何以及每次登录，这些用户在登录期间将被要求输入 yubiekey OTP。

请帮助，一旦我得到一个合适的解决方案，我会让任何其他用户都可以访问它，以使这个过程更容易，因为这个主题没有太多信息。

PS。另外，如果我正在寻找的内容已经在脚本中，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:19:04.793

YubiKey OTP 由两部分构成，最后 32 个字符是加密的 OTP，之前的字符（默认为 12 个）是静态公共 id，用于标识密钥。所以上面的代码只对公共 id 进行 md5 处理，您可以从给定密钥的任何 OTP 中获取。

对于 php 解决方案，还有 Yubico 维护的 php-yubico 项目：[http ://code.google.com/p/php-yubico/](http://code.google.com/p/php-yubico/)

# php - php html_entity_decode 怎么用

> ID：10328322
> 
> 赞同：1
> 
> 时间：2012-04-26T06:32:23.863
> 
> 标签：php, html-encode

我正在尝试将 HTML 实体从源字符串转换为等效的文字字符。

例如：

```
 <?php

    $string = "Hello &#8211; World";
    $converted = html_entity_decode($string);

    ?> 
```

虽然这正确地转换了屏幕上的实体，但当我查看 HTML 代码时，它仍然显示显式实体。我需要更改它，以便它在我没有在 HTML 页面中使用字符串时从字面上转换实体。

关于我做错了什么的任何想法？

仅供参考，我将转换后的字符串发送到 Apple 的推送通知服务：

```
 $payload['aps'] = array('alert' => $converted, 'badge' => 1, 'sound' => 'default');
    $payload = json_encode($payload); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:36:49.277

你从哪里得到结果，例如，实体仍然在哪里显示？你`error_log`是转换后的吗？

也许您需要将其他两个参数添加到`html_entity_decode`，因为`json_encode`要求字符串是 UTF-8 编码的。尝试这个：

```
$converted=html_entity_decode($string,ENT_COMPAT,"UTF-8"); 
```

**编辑**是的，在我的 phpsh 中检查过，你肯定需要添加两个参数（尤其是 UTF-8）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:40:02.627

要将实体解码为字符，`html_entity_decode`需要知道您希望字符使用哪种编码。“ü”可以用 Latin-1、UTF-8、UTF-16 和许多其他编码表示。默认值为 Latin-1。`&#8211;`(–, EN DASH) 不能用 Latin-1 表示。因此它保持不变。Tell`html_entity_decode`将其解码为可以表示该字符的编码，例如 UTF-8：

```
html_entity_decode($str, ENT_COMPAT, 'UTF-8') 
```

# java - Google App Engine Java 错误

> ID：10328323
> 
> 赞同：2
> 
> 时间：2012-04-26T06:32:24.580
> 
> 标签：java, google-app-engine

几天前，我刚开始在 Eclipse Indigo 中使用 Google App Engine 1.6.4，但我遇到了后端问题。

每当我尝试使用 servlet 或 JSP 时，我都会感到很烦

```
java.lang.UnsupportedClassVersionError: org/msamogh/MyServlet : Unsupported major.minor version 51.0 
```

我尝试将我的 JRE 更改为 Java 6，但错误仍然存​​在。有谁知道如何解决这一问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:00:28.333

*major.minor*版本 51.0 似乎表明您的类是使用 Java 7 编译的。请确保完成以下操作：

*   使用 Java 6 JDK 启动 Eclipse。
*   将 Eclipse 中的默认 JVM 设置为 Java 6 JDK。
*   将默认和/或项目编译器设置设置为使用*1.6*目标。

通常，您需要确保您的运行时 JRE 能够理解您的编译代码。如果您尝试在*1.6 JRE 上运行为**1.7*编译的代码，您将收到上述错误。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:33:44.157

当你这样做时，你的输出是什么 `java -version`？这将告诉您正在运行的 JVM 是什么版本。

不支持`major.minor version 51.0 error`可能意味着：

应用程序在较低的 Java 版本上运行，然后是用于编译它的版本

尝试添加一个如下所示的 SYSTEM VARIABLE：`JRE_HOME = C:\PROGRAM FILES\JAVA\JRE7`或`JRE6`随您编译它的 JDK 1.7 或更高版本包一起提供。*

# javascript - jQuery - 使用作为函数参数传入的匿名函数作为 jQuery 回调函数

> ID：10328325
> 
> 赞同：1
> 
> 时间：2012-04-26T06:32:41.757
> 
> 标签：javascript, jquery, function, callback, anonymous

这最好通过代码示例来解释，所以任何人都可以解释为什么（在技术方面）传递给测试的匿名函数在 jQuery 隐藏事件之后没有被调用？

更新：对于这个例子来说，这是指什么并不重要，但为了清楚起见，让我们说测试功能在全局范围内，这是一个锚元素。

```
test(this, function() {
    alert('Called by anonymous function!');
});

function test(object, callback) {
    $(object).hide('slow', callback);
} 
```

改变：

```
$(object).hide('slow', callback); 
```

到：

```
$(object).hide('slow', callback()); 
```

作品。这是因为回调不是当前上下文或全局窗口对象中的命名函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:05:56.423

您的代码应该看起来更像这样

```
test(this, function() {...}); 
```

您没有在代码中调用匿名函数，但我不确定该语法实际上是做什么的

查看这个工作示例的小提琴[http://jsfiddle.net/L4NxD/2](http://jsfiddle.net/L4NxD/2)

编辑，对小提琴进行了更多编辑，以更好地复制原始代码。使用[http://jsfiddle.net/L4NxD/1](http://jsfiddle.net/L4NxD/1)和[http://jsfiddle.net/L4NxD/](http://jsfiddle.net/L4NxD/)来获取早期版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:43:36.843

这是正确的做法。

[http://jsfiddle.net/6dFm6/6/](http://jsfiddle.net/6dFm6/6/)

在隐藏动画之后调用 remove 将删除对象并导致动画回调不被调用。

它在 jsfiddle.net/6dFm6/1 中起作用的原因是因为回调在运行时执行，并且在回调事件期间传递和调用值。

有关“functionName()”作为回调返回的内容的不同程度的清晰度，请参阅这些文章。调用似乎返回了“未定义”，但是执行仍然在正确的时间发生。

[什么时候在回调函数名后使用 ()？](https://stackoverflow.com/questions/10954979/when-to-use-after-a-callback-function-name)

[在 JavaScript 中，如果我用括号调用函数会有所不同吗？](https://stackoverflow.com/questions/3246928/in-javascript-does-it-make-a-difference-if-i-call-a-function-with-parentheses)

[回调函数 - 括号的使用](https://stackoverflow.com/questions/6589497/callback-function-use-of-parentheses)

[将命名函数用作jquery ajax成功回调时是否需要括号](https://stackoverflow.com/questions/12164354/do-i-need-parenthesis-when-using-a-named-function-as-an-jquery-ajax-success-call)

[javascript语法：函数调用和使用括号](https://stackoverflow.com/questions/593509/javascript-syntax-function-calls-and-using-parenthesis)

# java - 我应该怎么做才能使用 Imageio JAI 加载 DicomImage？

> ID：10328327
> 
> 赞同：1
> 
> 时间：2012-04-26T06:32:54.533
> 
> 标签：java, image, dicom

我正在开发应用程序以在 netbeans 平台中加载 Dicom 图像..我开发了应用程序，但它给了我空指针异常..所以是否缺少任何 jsr api 或插件，我没有找到我错的地方..我添加了源代码请在这里分享你的想法

```
 package org.netbeans.GuiImage;

            import com.sun.media.jai.widget.DisplayJAI;
            import java.awt.Dimension;
            import java.awt.event.ActionEvent;
            import java.awt.event.ActionListener;
            import java.awt.image.BufferedImage;
            import java.awt.image.RenderedImage;
            import java.awt.image.renderable.ParameterBlock;
            import java.io.File;
            import java.io.FileInputStream;
            import java.io.FileOutputStream;
            import java.util.Iterator;
            import javax.imageio.*;
            import javax.imageio.stream.FileImageInputStream;
            import javax.imageio.stream.FileImageOutputStream;
            import javax.media.jai.JAI;
            import javax.media.jai.PlanarImage;
            import javax.media.jai.RenderedOp;
            import javax.swing.*;
            import org.netbeans.api.settings.ConvertAsProperties;
            import org.openide.awt.ActionID;
            import org.openide.awt.ActionReference;
            import org.openide.util.NbBundle;
            import org.openide.windows.TopComponent;
            import javax.swing.filechooser.FileFilter;
            import javax.swing.filechooser.FileNameExtensionFilter;

            @ConvertAsProperties(dtd = "-//org.netbeans.guiimage//run//EN",autostore = true)
            @TopComponent.Description(preferredID = "run",
            persistenceType = TopComponent.PERSISTENCE_ALWAYS)
            @TopComponent.Registration(mode = "editor", openAtStartup = true)
            @ActionID(category = "Window", id = "org.netbeans.guiimage.run")
            @ActionReference(path = "Menu/Window" /*
            * , position = 333
            */)
            @TopComponent.OpenActionRegistration(displayName = "#CTL_runAction",
            preferredID = "run")

            public final class run extends TopComponent implements ActionListener{

                private JPanel jPanel1 = new JPanel();
                private JLabel jLabel1 = new JLabel();
                private JTabbedPane jtp=new JTabbedPane();
                private ImageIcon img = new ImageIcon("E:/tif/v1.TIF");
                private JFrame jFrame1 = new JFrame();
                private JButton jButton1 = new JButton("open");
                private JButton jButton2 = new JButton("save");
                private JFileChooser jfc = new JFileChooser();
                private File filePath = new File("E:/Images/Image1.png");
                private String filename;
                private BufferedImage bi=null;
                private FileInputStream fis;
                private FileOutputStream fos;
                private FileImageOutputStream fios;
            int retVal;
            private RenderedImage image=null;
            private ImageReader reader;
            private FileImageInputStream fiis;
            private Iterator iter , witer;
            private RenderedOp result=null;
            private ImageWriter writer;
            private DisplayJAI djai;
            private JScrollPane jsp;
            // private DicomFileDialog dicomFileDialog;

                //private FileImageInputstream fiis = new FileImageInputStream(filePath);
                FileNameExtensionFilter filter = new FileNameExtensionFilter(
                    "png,dcm Images", "dcm", "png");

                public run(){
                    initComponents();
                    setName(NbBundle.getMessage(run.class,"CTL_run"));
                    setToolTipText(NbBundle.getMessage(run.class, "HINT_run"));
                }

                private void initComponents() {

                    jsp.add(jButton1);
                    jsp.add(jButton2);
                    jButton1.addActionListener(this);
                    jsp.setPreferredSize(new Dimension(300, 300));

                    javax.swing.GroupLayout jFrame1Layout = new javax.swing.GroupLayout(jFrame1.getContentPane());
                    jFrame1.getContentPane().setLayout(jFrame1Layout);
                    jFrame1Layout.setHorizontalGroup(
                            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGap(0, 400, Short.MAX_VALUE));
                    jFrame1Layout.setVerticalGroup(
                            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGap(0, 300, Short.MAX_VALUE));
                    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
                    this.setLayout(layout);
                    layout.setHorizontalGroup(
                            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jsp, javax.swing.GroupLayout.DEFAULT_SIZE, 400, Short.MAX_VALUE));
                    layout.setVerticalGroup(
                            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jsp, javax.swing.GroupLayout.DEFAULT_SIZE, 300, Short.MAX_VALUE));
                }

                @Override
                public void componentOpened() {

                }

                @Override
                public void componentClosed() {

                }

                void readProperties(java.util.Properties p) {
                // do the read
            }
            void writeProperties(java.util.Properties p) {
                // handle the store
            }

            @Override
            public void actionPerformed(ActionEvent e) {

                if(e.getSource() == jButton1){
                        //Add a custom file filter and disable the default
                        //(Accept All) file filter.
                        jfc.addChoosableFileFilter(new FileFilter() {

                @Override
                public boolean accept(File filePath) {
                        if (filePath.isDirectory()) {
                        return (true);
                    }
                    String extension = Utils.getExtension(filePath);
                    if (extension != null) {
                        if (extension.equals(Utils.dicom)
                                || extension.equals(Utils.dcm)
                                || extension.equals(Utils.dic)
                                || extension.equals(Utils.tif)) {
                            return true;
                        } else {
                            return false;
                        }
                    }
                    return false;
                }

                @Override
                public String getDescription() {
                    return "*.dcm,"              
                        + "*.dicom,"
                        + "*.TIF,"
                        +"*.tif,"
                        + "*.dic";
                }
            });
                        jfc.setAcceptAllFileFilterUsed(false);

                        int retVal = jfc.showOpenDialog(this);

                        System.out.println(e.getActionCommand());

                        if(retVal == JFileChooser.APPROVE_OPTION){

                                filePath = jfc.getSelectedFile();

                                filename = filePath.getName();

                                System.out.println("Selected file:");
                                System.out.println(filename);

                    try {
                        fiis = new FileImageInputStream(new File(filename));
                        iter = ImageIO.getImageReaders(fiis);
                        reader = (ImageReader) iter.next();

                        reader.setInput(fiis);
                        image = reader.readAsRenderedImage(0, reader.getDefaultReadParam());

                        double scaleFactor = 0.5;
                        ParameterBlock params = new ParameterBlock();
                        params.addSource(image);
                        params.add(scaleFactor);

                        result = JAI.create("", params);

                        witer = ImageIO.getImageWritersByFormatName("DICOM");
                        writer = (ImageWriter) witer.next();
                        fios = new FileImageOutputStream(new File(filename));
                        writer.setOutput(fios);
                        writer.write(result);
                        djai.set(result);
                        jsp.setViewportView(djai);
                       }
            catch(Exception ex){
                //error dialog - invalid file type
                System.out.println("Invalid file type, please try again");

      JOptionPane.showMessageDialog(this, "File Not Recognized", "Error!",  JOptionPane.ERROR_MESSAGE);
            }
        }
        else if(retVal == JFileChooser.CANCEL_OPTION){
            System.out.println("User cancelled operation");
        }}

    private void setResizable(boolean b) {
     throw new UnsupportedOperationException("Not yet implemented");
   }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:00:55.990

你确定 ImageIO 有 dicom 的读/写器吗？我知道 JDK 不直接支持它，那么您是否编写或使用了任何 SPI ？

我敢打赌 ImageIO.getReaderFormatNames() 没有列出 dicom。

因此，要实际加载您的 dicom 图像，您要么必须编写/查找图像 spi（有关更多信息，请参阅[ImageIO.scanForPlugins](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#scanForPlugins%28%29 "ImageIO.scanForPlugins")的 javadoc ），或者使用另一个 api，例如[pixelmed](http://www.pixelmed.com/)提供的那个。

编辑：仔细检查后，看起来 dcm4che 确实提供了 SPI。您需要类路径中的 dcm4che-imageio-XXX.jar 文件。

# java - 安装eclipse java SE-1.7

> ID：10328328
> 
> 赞同：2
> 
> 时间：2012-04-26T06:33:01.810
> 
> 标签：java, windows, eclipse, ide

我想开始学习 java，但 Eclipse 给我带来了一些麻烦。

首先，我是 Java 的初学者，对此几乎一无所知。我想使用“JavaSe-1.7”。除了使用最新版本之外，我没有明确的理由使用它。下载 Eclipse（Java 开发人员的 Eclipse IDE）后，我创建了一个新的 Java 项目并选择了“使用执行环境 JRE：JavaSE-1.7”。这直接弹出了通知“当前工作区的默认编译器合规级别为 1.6。新项目将使用项目特定的编译器合规级别 1.7.'。我完成了项目的创建并开始学习一些教程。

但是我直接注意到我有 2 个错误，这些错误没有解释任何内容或有来源。我忽略了它并开始输入并尝试导入“java.io.console”，但是它说“无法解析导入 java.io”，我不知道它的原因是什么，也不知道如何解决这个问题。

想要一些指示进入正确的方向。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T06:38:49.693

检查您的 Eclipse 首选项：Java -> 已安装的 JRE。您正在使用的那个应该被标记，它应该是一个 JDK 而不仅仅是一个 JRE。

还要检查项目的构建路径：右键单击项目 -> 属性 -> Java 构建路径 检查“库”文件夹中是否存在 JRE 系统库，如果不存在，请使用“添加库”->“JRE 系统库” " 然后选择正确的一个（从已安装的 JDK 中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T06:41:19.553

您可能没有正确设置 JDK/JRE。

检查以下内容：

*   您安装了 JDK 还是仅安装了 JSE？需要 JDK 来将 .java 文件编译为 .class 文件。没有它，你只能**运行**java程序，不能开发它们。如果没有，请从 Oracle 网站下载并安装它。

*   签入 Eclipse，如果您也在那里安装了 JRE。您只需要指定安装路径。您可以通过“窗口->首选项”菜单访问此屏幕。看这个截图：

![在此处输入图像描述](../Images/b791d7bdfd6548b3f4083c15be20563d.png)

您收到的有关项目特定编译器合规级别的消息不是问题，它只是意味着您的工作区设置为符合 java 1.6，但您的项目将符合 java 1.7 标准。此外，Java 7 通常没有任何问题。

路径可能不同，特别是如果您没有运行 *nix 操作系统。只需将位置指向您安装 JDK 的位置。

# ruby - 如何编写文档中缺少代码的代码示例？

> ID：10328329
> 
> 赞同：0
> 
> 时间：2012-04-26T06:33:05.500
> 
> 标签：ruby, documentation

现在我的文档中有以下示例代码：

```
some_keeper = SomeKeeper.new
some_keeper.report
# ...
# save the report to a file
# ...
some_keeper.fix! 
```

`save the report to a file`稍后不会填写，它会像文档中的那样保持不变，一个“缺失的代码”片段。

**文档中是否有“代码缺失”的标准？**

注意：我正在用 Ruby 编写文档，并使用 Yardoc 作为文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:38:08.797

可以在[此处](http://rubydoc.info/docs/yard/file/docs/Tags.md#taglist)找到可用标签的列表。没有遗漏标签，但您可以添加注释。但是，您也可以使用 define_tag 定义自己的标签。

这意味着您可以定义自己的`@missing`标签。

[http://rubydoc.info/docs/yard/file/docs/Tags.md#Adding_Custom_Tags](http://rubydoc.info/docs/yard/file/docs/Tags.md#Adding_Custom_Tags)

# variables - Groovy - 将字符串分配给 int 类型的变量会产生一个数字

> ID：10328331
> 
> 赞同：0
> 
> 时间：2012-04-26T06:33:23.317
> 
> 标签：variables, groovy, assign

分配空字符串或带有字母的字符串会导致 GroovyCastException。分配带有数字值的字符串会导致数字。这里发生了什么操作？

```
 int var_1 = 2;
    println var_1 // 2
    var_1 = ""
    println var_1 // GroovyCastException

    int var_1 = 2;
    println var_1 // 2
    var_1 = "2"
    println var_1 // 50 
```

什么操作/秒导致 50？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:36:11.867

它将“2”视为*单个*字符串，并将该字符的 Unicode 值 (U+0032 = '2') 分配给变量。例如，我怀疑你是否这样做：

```
var_1 = "A"
println var_1 
```

你会在控制台上看到 65

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:51:16.693

当你做这样的事情

```
var_1 = "2"
println var_1 
```

然后打印出与字符“2”对应的 Unicode 值，即 50。同样，如果您尝试打印“B”或“C”的 Unicode 值，那么您将得到 66 或 67 作为结果。

您可以通过执行以下操作打印结果 50：

```
int var_1 = "2"
println var_1 
```

# javascript - jQuery 和 HTML 表单

> ID：10328342
> 
> 赞同：0
> 
> 时间：2012-04-26T06:34:25.457
> 
> 标签：javascript, jquery, html, forms, submit

我有一个动态添加了 HTML 表单的 iframe。我需要父页面有一个按钮来提交此表单（到 iframe 中设置的页面），但随后也能够接收返回值。

我正在努力的部分是如何接收返回值。提交表单很好，但是让父页面接收返回值 - 就像使用 AJAX 请求一样 - 让我望而却步。

这是我想要实现的那种事情的一个例子：

```
<html>
<head>
    etc...

    <script type="text/javascript">

        $(doument).ready(function() {

            $("#myFormButton").click(function () {

                // This is what doesn't exist, a callback with the data
                // this is what I would like to acheive somehow...
                $("#myForm").submit(function(data) {

                    // do stuff with the data
                });
            });
        });

    </script>
</head>
<body>
    <iframe>
        etc...

        <form action="mypage.ashx">
            various inputs...
        </form>

        etc...
    </iframe>
</body>
</html> 
```

非常感谢大家的帮助，

理查德·休斯

# mysql - MySQL 索引以及何时对它们进行分组

> ID：10328343
> 
> 赞同：0
> 
> 时间：2012-04-26T06:34:29.867
> 
> 标签：mysql

我仍在努力寻找在 MySQL 中使用 INDEXES 的最佳方法。您如何知道何时将它们合并在一起以及何时将它们分开？

以下是 Wordpress 帖子表中的索引。看看 post_name、post_parent 和 post_author 是如何分开的？然后他们有 type_status_date 这是4个字段的混合？

[http://img215.imageshack.us/img215/5976/screenshot20120426at431.png](http://img215.imageshack.us/img215/5976/screenshot20120426at431.png)

我不明白这背后的逻辑？任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:37:49.560

这将是一个有点长的答案，但我们开始了。请注意，我不打算在这里处理数据库引擎的差异（MyISAM 和 InnoDB 有不同的方式来实现我试图描述的内容）

关于索引，您必须了解的第一件事是它是存储在磁盘上的单独数据结构。通常这是一个 b-tree 数据结构，包含您已索引的列，还包含指向表中行的指针（**此指针通常是主键**）。

与数据一起存储的唯一索引是主键索引。**因此主键索引是表。**

假设您有以下表定义。

```
CREATE  TABLE `Student` (
 `StudentNumber` INT NOT NULL ,
 `Name` VARCHAR(32) NULL ,
 `Surname` VARCHAR(32) NULL ,
 `StudentEmail` VARCHAR(32) NULL ,
 PRIMARY KEY (`StudentNumber`) ); 
```

因为我们在 StudentID 上有一个主键，所以会有一个包含主键和索引中其他列的索引。如果您必须查看索引中的数据，您可能会看到类似这样的内容。

```
1 , John ,Doe ,Jdoe@gmail.com 
```

**如您所见，这是表数据再次向您显示主键索引是表。**

StudentNumber 列已编入索引，这使您可以有效地在其上搜索其余数据与密钥一起存储。因此，如果运行以下查询：

```
SELECT * FROM Student WHERE StudentNumber=1 
```

MySQL 将使用主索引快速查找行并读取与索引列一起存储的数据。由于有索引 MySQL 可以使用索引对 b-tree 进行有效的二叉查找操作。

此外，在执行搜索后检索数据时，MySQL 可以从索引中读取数据，因此我们在索引中**使用 1 操作**来检索数据。现在，如果我运行以下查询：

```
SELECT * FROM Student WHERE Name ='Joe' 
```

MySQL 将检查是否存在可用于加快查询速度的索引。但是在我的例子中，名称上没有索引，因此 MySQL 会从第一行到最后一行一次从表中顺序读取一行。

在每一行，它将根据 where 子句评估该行并返回匹配的行。所以基本上它从上到下读取主键索引。记住主键索引是表。

如果我运行以下语句：

```
 ALTER TABLE `TimLog`.`student` 
ADD INDEX `ix_name` (`Name` ASC) ;
 ALTER TABLE `TimLog`.`student` 
ADD INDEX `ix_surname` (`Surname` ASC) ; 
```

MySQL 将在 Student 表上创建新索引。这将存储在磁盘上的表之外，其中的数据如下所示：

```
Data in ix_Name
John, 1 <--PRIMARY KEY VALUE

Data in ix_Surname
Doe, 1  <--PRIMARY KEY VALUE 
```

请注意 ix_Name 索引中的数据是名称和主键值。太好了，所以如果我运行前面的 select 语句，MySQL 将读取 ix_name 索引并获取匹配项的主键值，然后使用主键索引来获取其余数据。

**所以从索引中获取数据的操作数是 2**。在索引中找到匹配的行，然后在主键上进行查找以获取行数据。

您现在有以下查询：

```
SELECT * FROM Student WHERE Name='John' AND surname ='Doe' 
```

这里 MySQL 不能同时使用两个索引，因为这会浪费操作。如果 MySQL 必须在此查询中使用两个索引，则会发生以下情况（*这不应该发生*）。

```
1 Find in the ix_Name the rows with the value John
2 Read the primary key that matches to get the row data
3 Store the matching results
4 Find in the ix Surname the rows with the value Doe
5 Read the primary key that matches to get row data.
6 Store the matching results
7 Take the Name results and Surname results and merge them
8 Return query results. 
```

这确实是对 IO 的浪费，因为 MySQL 会读取该表两次。基本上使用一个索引会比尝试使用两个更好（我将在 momnet 中解释原因）。MySQL 将选择 1 个索引用于这个简单的查询。

那么 MySQL 如何决定使用哪个索引呢？

MySQL 在内部保留有关索引的统计信息。这些统计数据基本上告诉 MySQL 索引的唯一性。因此，为了论证，假设姓氏索引 (ix_surname) 比名称索引 (ix_name) MySQL 使用姓氏索引 (ix_surname) 更独特。

因此查询检索将是这样的：

```
1 Use the ix_surname and find rows that match the value Doe
2 Read the primary key and apply the filter for the value John on the actual column data in the row.
3 Return the matched row. 
```

如您所见，此搜索中的操作数量要少得多。我已经过度简化了很多技术细节。索引是一个有趣的东西，但你必须从我如何以最少的 IO 获取数据的角度来看待它。

希望它现在像泥巴一样清澈！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:36:55.487

MySQL 通常一次不能使用多个索引。这意味着，例如，当您有一个对两个字段进行过滤或排序的查询时，您会将它们都放入同一个索引中。

WordPress 可能有一个通用查询，用于过滤和/或排序`post_type`,`post_status` *和* `post_date`. 对它们代表什么进行有根据的猜测，这可能是 WordPress 的帖子列表页面的核心查询。所以这三个字段被放入同一个索引中。

# spring - Spring 2.5 和 Spring 3.1 的区别：ModelAndView

> ID：10328347
> 
> 赞同：4
> 
> 时间：2012-04-26T06:34:55.647
> 
> 标签：spring, spring-mvc

在 Spring2.5 中我们编写控制器如下：

```
@Controller
public class HelloWorldController{

 @RequestMapping(value="/welcome",method = RequestMethod.GET)
protected ModelAndView handleRequestInternal(HttpServletRequest request,
    HttpServletResponse response) throws Exception {

    ModelAndView model = new ModelAndView("hello");
    model.addObject("msg", "hello world");

    return model;
} 
```

}

在春季 3.1 中：

```
@RequestMapping(value="/welcome",method = RequestMethod.GET)
public String printWelcomeString(ModelMap model) {

    model.addAttribute("message", "hello world);
    return "hello";

} 
```

printwelcomeString() 函数返回一个字符串而不是 ModelAndView。

任何人都可以解释一下吗？它将如何运作？hello.jsp 如何让模型显示？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:42:07.353

Spring 3.5 还没有发布我希望你的意思是 Spring 3.1。

`return ModelAndView`是一种老式的代码编写方式，在 Spring 2.0 中使用。在 spring 3.0 添加之后，您可以同时返回 ModelAndView 或 nameView 。

我建议你总是返回 String (view Name)，因为 Spring MVC 的一些高级特性将无法正常工作：

示例： [Spring MVC 3.1 RedirectAttributes 不起作用](https://stackoverflow.com/questions/8637043/spring-mvc-3-1-redirectattributes-is-not-working)

# matlab - Matlab 函数和参数

> ID：10328352
> 
> 赞同：2
> 
> 时间：2012-04-26T06:35:39.850
> 
> 标签：matlab

假设我们有一个函数定义为：

> 函数（f，df，x0）

其中 f 是一个函数，df 是它的导数，x0 是一个初始点。我们如何在命令行中定义 f ？你使用内联定义吗？那么df和x0呢？如果 df 是渐变怎么办？此外，如果 x0 是有序对，您如何在命令行中定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:46:34.053

要将函数作为变量传递，您需要使用*函数句柄*。演示这一点的一种简单方法是使用*匿名函数*的函数句柄。一个简单的匿名函数可以定义如下：

```
handle = @(arglist)anonymous_function 
```

因此，要创建一个添加 2 个数字的匿名函数，您可以执行以下操作：

```
f = @(a,b)a+b; 
```

您可以像使用任何其他功能一样使用它

```
>> f(1,2)

ans =

     3 
```

如果df只是一个简单的数值，可以定义如下：

```
df = 0.4 
```

要定义一对值，您可以这样做：

```
X0=[1 2] 
```

最后，您可以将它们与这个示例函数放在一起（将它放在一个名为 myfunc 的文件中）。. .

```
function out = myfunc(f,df,x0)

out = df * f(x0(1), x0(end)); 
```

这是你想要的吗？我对“x0 是有序对”感到有些困惑。

# c# - 在 aspx 或 ascx 文件中查找用户控件的所有引用

> ID：10328353
> 
> 赞同：6
> 
> 时间：2012-04-26T06:35:45.000
> 
> 标签：c#, asp.net, visual-studio-2010, search

我正在研究 asp.net 网站，拥有大量用户控件（ascx）和 webforms（aspx）。当我需要查找任何特定用户控件的引用（在其他控件或其他网络表单中使用它）时，我遇到了问题。

通过右键单击用户控件的类名，然后单击**查找所有引用**仅查找.cs 文件中使用的引用，它没有找到控件在**aspx**或**ascx**文件中的用法。

任何机构都可以建议是否有任何方法可以找到我的控件的用法。或 Visual Studio 尚不支持任何此类功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:03:41.687

[ReSharper](http://www.jetbrains.com/resharper/)可以为您做到这一点。在任何 .aspx、.ascx 或 .cs 文件中*单击鼠标右键 ->“查找用法” 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T02:36:16.267

另一种方法是 ascx 文件必须包含在 aspx 文件中。因此，例如，如果您的控制文件名为“testing.ascx”，那么在 ascx 文件中它会显示类似“~/controls/”testing.ascx”的内容。因此，这是查看包含 ascx 的所有文件的一种非常简单的方法是，是通过powershell。

我会去你的文件所在的powershell目录，然后输入（只需将文件的字符串，如“testing”插入到这个命令中，它就会给你它包含的文件）：GetChildItem -recurse | Select-String -pattern "你要搜索的字符串" | 组路径 | 选择名称

# android - 支持 OpenGL ES 2.0 的 Android SDK 模拟器？

> ID：10328357
> 
> 赞同：0
> 
> 时间：2012-04-26T06:35:57.883
> 
> 标签：android, android-emulator

最近在网上看一些教程的时候，看到这个视频提示Android SDK现在支持OpenGL ES 2.0：

[http://www.youtube.com/watch?feature=player_embedded&v=T--vFtyZvc4](http://www.youtube.com/watch?feature=player_embedded&v=T--vFtyZvc4)

热情地，我在我的模拟器中添加了“GPU Emulation”选项并尝试运行一个基本的 HelloOpenGLES20 应用程序，但是我遇到了这个错误，以及一些没有意义的空指针异常：

```
Sorry!
The application
LessonOneActivity (process
lesson.One has stopped
unexpectedly. Please try again.

Force close 
```

该应用程序在显示一些旋转三角形的真实 Android 手机上运行良好，我想知道是否有人遇到过我面临的问题，我已经做了相当多的谷歌搜索，但找不到解决方案 =(

这是日志：

```
04-26 06:42:08.782: D/AndroidRuntime(577): Shutting down VM
04-26 06:42:08.813: W/dalvikvm(577): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-26 06:42:08.842: E/AndroidRuntime(577): FATAL EXCEPTION: main
04-26 06:42:08.842: E/AndroidRuntime(577): java.lang.RuntimeException: Unable to resume activity {lesson.One/com.learnopengles.android.lesson1.LessonOneActivity}: java.lang.NullPointerException
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2120)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.os.Looper.loop(Looper.java:130)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-26 06:42:08.842: E/AndroidRuntime(577):  at java.lang.reflect.Method.invokeNative(Native Method)
04-26 06:42:08.842: E/AndroidRuntime(577):  at java.lang.reflect.Method.invoke(Method.java:507)
04-26 06:42:08.842: E/AndroidRuntime(577):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-26 06:42:08.842: E/AndroidRuntime(577):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-26 06:42:08.842: E/AndroidRuntime(577):  at dalvik.system.NativeStart.main(Native Method)
04-26 06:42:08.842: E/AndroidRuntime(577): Caused by: java.lang.NullPointerException
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.opengl.GLSurfaceView.onResume(GLSurfaceView.java:512)
04-26 06:42:08.842: E/AndroidRuntime(577):  at com.learnopengles.android.lesson1.LessonOneActivity.onResume(LessonOneActivity.java:46)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.Activity.performResume(Activity.java:3832)
04-26 06:42:08.842: E/AndroidRuntime(577):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2110)
04-26 06:42:08.842: E/AndroidRuntime(577):  ... 12 more
04-26 06:42:13.292: I/Process(577): Sending signal. PID: 577 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:58:21.300

我已经运行了代码，异常是由于模拟器仍然不支持 GLES20。如果您打印更多信息，您会发现这`supportsEs2`是错误的。

为什么即使`GPU Emulation`设置为 true 模拟器也不支持 GLES20 取决于系统。如果是在Linux上开发，可能和显卡有关。 [这](https://stackoverflow.com/questions/10179187/android-emulator-black-screen-with-gpu-emulation-yes)是一个类似的问题，有一些可能的解决方案。至少你可以试试。

编辑：

根据[官方网站](http://developer.android.com/guide/developing/devices/emulator.html#accel-graphics)，您需要将您的模拟器目标设置为 API 15 (rev03) 或更高版本。

# javascript - javascript cookie 的最长生命周期

> ID：10328361
> 
> 赞同：15
> 
> 时间：2012-04-26T06:36:15.150
> 
> 标签：javascript, cookies

Javascript 持久性 cookie 可接受的最大到期时间值是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T06:43:44.583

**阅读**：[Cookie 的过期和最长使用期限](http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age)

javascript cookie 的生命周期取决于您在创建 cookie 时设置的时间量，例如将生命周期设置为 10 分钟

```
expiry = new Date();   
expiry.setTime(date.getTime()+(10*60*1000)); 
// Ten minutes   
 // Date()'s toGMTSting() method will format the date correctly for a cookie   
document.cookie = "visited=yes; expires=" + expiry.toGMTString(); 
```

没有办法可以设置终身饼干......即没有过期的cookie

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-09T16:05:25.220

Forever cookie：如果您每次阅读 cookie 时都重新编写它，将过期日期设置为未来某个荒谬的日期，例如：10 年后，则可能。

对于这不是永远的，你假设网页不会被阅读超过 10 年，在这种情况下有什么意义。你认为我们在 10 年后仍会使用 cookie :-)

另外，cookie 的寿命仅与存储在其上的硬件一样长。你会在 10 年内使用相同的硬件吗？

注意：读取 cookie 然后立即写入我发现在某些计算机上存在问题的相同 cookie（原因未知）。修复将写入 cookie 嵌入超时：

```
var x=getCookie('mycookie');
setTimeout('saveCookie("mycookie", x)',1000) 
```

getCookie 和 saveCookie 是您必须在此示例中创建的函数，并且 saveCookie 函数将 cookie 寿命设置为 10 年

以技术发展的速度，那是“永远” :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-11T01:35:57.150

使用最大值`milliseconds-since-the-epoch`，可以生成一个到期日期，它表示 cookie 保持活动的“最长可能时间”。

```
var key = 'foo';
var value = 'bar';
var expiryDate = new Date(8640000000000000).toUTCString();
var cookie = `${key}=${value};expires=${expiryDate}`;
console.log(cookie);
```

# osx-snow-leopard - 华硕无线实用程序 Mac 崩溃

> ID：10328367
> 
> 赞同：-1
> 
> 时间：2012-04-26T06:37:07.633
> 
> 标签：osx-snow-leopard

我购买了华硕 USB 无线设备，为我的 mac pro 10.6.8 安装了提供的应用程序。我插入密钥，它会发现网络，但是当我尝试连接到其中任何一个时，应用程序就会崩溃。我就这个问题联系了华硕，但我想也许这里有人可以帮助解码苹果错误报告，这样我就可以解决这个问题并重新上线。

贝娄是错误： [http ://dumpz.org/200425/](http://dumpz.org/200425/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:15:47.207

我也有同样的问题。我唯一的解决方案是到 wps 选项卡并通过 PBS 按钮连接，记住按下路由器上的 wps 按钮。这仅在您可以实际访问路由器并且在咖啡店等中没有用处时才有效。

该设备可以访问开放网络 - 尝试访问安全网络显然存在错误。

# c# - ObservableCollection 在 SelectionChanged 上获取项目

> ID：10328370
> 
> 赞同：2
> 
> 时间：2012-04-26T06:37:23.257
> 
> 标签：c#, .net, wpf, combobox, observablecollection

我有一个 WPF 组合框：

```
<ComboBox ... ItemsSource="{Binding Source={StaticResource viewModel}, Path=getItems, Mode=OneTime}" x:Name="combobox" SelectionChanged="combobox_SelectionChanged">
    ...
</ComboBox> 
```

有很多项目。

还有我的 ViewModel 类：

```
public class ViewModel
{
    private readonly ObservableCollection<ObjectA> _objectACollection= new ObservableCollection<ObjectA>(); 

    public ViewModel()
    { 
        _objectACollection.Add(new ObjectA("Text 1", "Text", "Text"));
        _objectACollection.Add(new ObjectA("Text 2", "Text", "Text"));
        _objectACollection.Add(new ObjectA("Text 3", "Text", "Text"));
    }

    public void combobox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Trace.WriteLine(combobox.SelectedIndex);
    }

    public ObservableCollection<ObjectA> getItems
    {
        get { return _objectACollection; }
    }
} 
```

和 selectionChanged 监听器：

```
private void combobox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    Trace.WriteLine(combobox.SelectedIndex);
} 
```

显示组合框，当我选择某些内容时，我得到集合对象的索引。但是有什么方法可以将对象归还给我吗？例如：我选择了 ComboBox（索引 0）中的第一个元素，如何从索引为 0 的 _objectACollection 中获取（在 combobox_SelectionChanged 侦听器中）对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:48:44.470

ComboBox 有 SelectedItem 属性。我认为您可以将 SelectedItem 与 TwoWay 与您的 VM 绑定。以下是示例。我希望这会有所帮助。

```
<ComboBox ... ItemsSource="{Binding Source={StaticResource viewModel}, Path=getItems, Mode=OneTime}" x:Name="combobox"  SelectedItem="{Binding SelectedObjectA, Mode=TwoWay}">
...
</ComboBox> 
```

您应该在 VM 中添加 SelectedObjectA 属性。您可以从 VM.SelectedObjectA 属性中获取所选项目。

```
 private ObjectA _SelectedObjectA;
    public ObjectA SelectedObjectA
    {
        get
        {
            return _SelectedObjectA;
        }
        set
        {
            if (_SelectedObjectA == value)
                return;

            _SelectedObjectA = value;

            // Notifu changed here
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:42:18.373

您可以使用combobox.SelectedItem。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:30:41.033

也许您可以尝试使用实现`ICollectionView`接口的集合，我相信其中有一些。它会为您跟踪集合中的选定项目，而无需`SelectedObjectA`在视图模型上使用单独的属性。所以你可以拥有：

```
> <ComboBox ... ItemsSource="{Binding Source={StaticResource viewModel},
> Path=**SomeICollectionView**, Mode=OneTime}" x:Name="combobox"> ...
> </ComboBox> 
```

要从 viewmodel 类中获取所选项目，您所要做的就是`SomeICollectionView.CurrentItem`

# django - Python Django UnboundLocalError

> ID：10328372
> 
> 赞同：0
> 
> 时间：2012-04-26T06:37:45.040
> 
> 标签：django

我是 django 的新手。

我的views.py下有这段代码

```
poll_list = []

@login_required
@never_cache
def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        return detail(request, poll_id, error_message="You didn't select a choice.")
    else:
        if request.session.get('voted_on', False):
            poll_list = []
            request.session['voted_on'] = poll_list

        if poll_id in request.session.get('voted_on', []):
            return detail(request, poll_id, has_voted="You have already voted.")

        selected_choice.votes += 1
        selected_choice.save()

        poll_list.append(poll_id)
        request.session['voted_on'] = poll_list
        return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))
    return HttpResponse("You're voting on poll %s." % poll_id) 
```

我收到了这个错误：

```
UnboundLocalError at /polls/3/vote/
local variable 'poll_list' referenced before assignment 
```

请帮助我..我不明白为什么我不断收到这个错误。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:44:35.477

您收到此错误是因为在您的方法中，您只是`poll_list`在 if 条件中创建变量。因此，如果该条件为假，则没有`poll_list`，因此当您尝试在 中使用它时`poll_list.append(poll_id)`，Python 会给您该错误。

我认为您要做的是使用您在方法之外声明的全局变量，这不是做您想做的事情的正确方法。

“错误”的解决方法是添加`global poll_list`您的方法。

正确的解决方法是重组您的方法：

```
# poll_list = [] - not needed

@login_required
@never_cache
def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        return detail(request, poll_id, error_message="You didn't select a choice.")
    else:
        poll_list = request.session.get('voted_on', [])

        if poll_id in poll_list:
            return detail(request, poll_id, has_voted="You have already voted.")

        selected_choice.votes += 1
        selected_choice.save()

        poll_list.append(poll_id)
        request.session['voted_on'] = poll_list
        return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))
    return HttpResponse("You're voting on poll %s." % poll_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:40:53.523

分配给名称会使编译器认为它是本地的。`global poll_list`在函数的开头使用来改变它。

但这会导致其他问题，因此无论如何您都应该重新架构该功能。

# android - 支持一个apk用于平板和手机屏幕的多个屏幕

> ID：10328374
> 
> 赞同：-1
> 
> 时间：2012-04-26T06:37:56.923
> 
> 标签：android

我已经使用 layout-h600dp 自定义布局文件在平板电脑上运行相同的 .apk 文件为移动设备和平板屏幕创建了一个应用程序。但我遇到了一个问题。平板电脑上的屏幕显示没有完全出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:50:03.993

见下图：

[http://3.bp.blogspot.com/-p5bJpmwLhE4/TmtdTGyZnmI/AAAAAAAAADg/u06CDhu3x34/s1600/4.JPG](http://3.bp.blogspot.com/-p5bJpmwLhE4/TmtdTGyZnmI/AAAAAAAAADg/u06CDhu3x34/s1600/4.JPG)

在您的 android 清单文件中进行更改。

另请参阅下面的链接，它可能会对您有所帮助。

[http://dj-android.blogspot.in/2011/09/how-to-support-multiple-screens-in.html](http://dj-android.blogspot.in/2011/09/how-to-support-multiple-screens-in.html)

另一件事是从清单文件中的所有活动声明中删除它

android:configChanges="keyboardHidden|orientation"

或者

android:configChanges="方向"

上述更改后生成新的 .APK 文件。

欲了解更多信息，请参阅：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:41:26.317

您可以在应用程序中制作 2 个布局

*   **res->layout** => 这将是普通的移动屏幕
*   **res->layout-xlarge** => 这将用于平板电脑

并添加清单

```
android:smallScreens="true"
android:normalScreens="true"
android:largeScreens="true" 
```

在支持屏幕标签中。

# javascript - Bootstrap > 隐藏下拉项并根据媒体查询保持最小的导航栏

> ID：10328376
> 
> 赞同：0
> 
> 时间：2012-04-26T06:38:05.303
> 
> 标签：javascript, css, twitter-bootstrap, dhtml, media-queries

问题：在移动设备上加载 Bootstrap 站点时，菜单会因为 nav-collapse media-query CSS 而消失。我想要的是保留一个没有下拉项目的简约菜单。那可能吗？

如果我要添加另一个仅具有顶级 <li> 的简单导航栏，我如何应用媒体查询来执行 If-Else 以根据屏幕尺寸选择合适的导航栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:41:29.557

使用 Bootstrap 响应式，菜单的媒体查询是

```
@media (max-width: 979px) { } 
```

您可以首先删除`.nav-collapse`此媒体查询中的所有样式（因此无论浏览器宽度如何，您都拥有相同的菜单），然后重新修改样式以实现您想要的。如果我没记错的话，这些样式在 650 行左右。

这比添加另一个菜单更好，这在语义上很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:12:35.767

```
@media (max-width: 768px) {
 .navbar ul.dropdown-menu, .navbar li.dropdown b.caret {
   display: none;
 }
} 
```

这将隐藏小于 768 像素的屏幕的下拉菜单。

通过悬停时打开其他代码下拉菜单（而不是单击），当媒体查询隐藏菜单项时，我可以使用单击重定向到页面。

# jquery - 如何从表示为变量的单选按钮中获取检查值？

> ID：10328382
> 
> 赞同：0
> 
> 时间：2012-04-26T06:38:39.593
> 
> 标签：jquery

我想检查一些单选按钮的值。使用表达式时这不是问题：

```
 $("input[name='radioname']:checked").val(); 
```

但是当我需要使用来自变量的 DOM 对象时，我遇到了一种情况，如下所示：

```
var obj = $("[name=myradio1]"); 
```

现在我正在使用变量 obj 进行操作。

请解释如何从**obj**变量中获取检查值

这是html代码：

```
<input id="answer_21" type="radio" value="21" name="answer[1]">
<input id="answer_22" type="radio" value="22" name="answer[1]"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:42:24.333

## 更新

```
if (obj.is(':checked')){
  var val = obj.val();
} 
```

* * *

> 请解释如何从 obj 变量中获取检查值

您可以像这样使用`is()`和`:checked`过滤选择器：

```
var isChecked = obj.is(':checked'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:51:14.680

好吧...这行得通，我不知道它是否可以写得更好，可能可以...

```
if (obj.is(':checked')){

        for (a=0; a<obj.length; a++)
            {
            if(obj[a].attributes[3].ownerElement.checked)
                {
                console.log(obj[a].attributes[3].ownerElement.defaultValue)  ;
                }

            }
        } 
```

# shell - 如何获取 shell 脚本执行的剩余时间？

> ID：10328383
> 
> 赞同：0
> 
> 时间：2012-04-26T06:38:40.597
> 
> 标签：shell

我有一个脚本可以根据要求做不同的事情。它从用户那里获取选项并相应地执行命令。所以问题是我怎样才能找到总执行的剩余时间。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:45:28.303

在运行它们之前，您可能必须估计每个命令将花费多少时间，然后在每个命令完成时从总数中减去。

您可以通过根据您的估计和实际时间之间的差异重新调整每个命令完成时的总时间和剩余时间来改进这一点。

为了让它更清晰，您可以记录调用的时间并使用它来做出更好的猜测，但我认为这对于一个脚本来说太过分了。

但是，要完全正确是不可能的。参照。[http://xkcd.com/612/](http://xkcd.com/612/)

# sencha-touch - 覆盖失败并出现错误

> ID：10328386
> 
> 赞同：3
> 
> 时间：2012-04-26T06:38:51.900
> 
> 标签：sencha-touch, sencha-touch-2

使用 Sencha Touch 2.0.0 我试图覆盖一个类的行为。
我正在关注这些[文档](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-define)和[有关该主题的论坛帖子](http://www.sencha.com/forum/showthread.php?173350-Concerns-over-Ext.override%28%29-being-deprecated)
但使用以下代码：

```
Ext.define('MP.service.Override', {
    extend: 'Ext.Base',
    override: 'Ext.Ajax',

    request: function(cfg) {
        console.log('overriden');
        this.callOverridden(arguments);
    }
}); 
```

我在控制台中收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'override' 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T09:11:25.397

Ext.Ajax 类是 Ext.data.Connection 类的单例实例，因此不能以这种方式覆盖它。

您可以替换单例的功能，而不是创建“适当的”覆盖。

一种方法是执行以下操作：

```
Ext.Ajax.request = Ext.Function.createInterceptor(Ext.Ajax.request, function(){ 
    console.log('override');
}); 
```

唯一的问题是您只能在原始函数*之前*添加新代码，但类似的技术可以帮助您解决这个问题。

可以在这里找到一个相关的问题：[sencha touch override ext.ajax](https://stackoverflow.com/questions/16971028/sencha-touch-override-ext-ajax)

# java - 如何将用户名和密码字段放入黑莓文本框？

> ID：10328387
> 
> 赞同：0
> 
> 时间：2012-04-26T06:39:07.953
> 
> 标签：java, blackberry

如何将用户名和密码字段放入文本框中？

```
usernameField = new EditField("USERNAME:", "");
passwordField = new PasswordEditField("PASSWORD:", "");
add(usernameField);
vm.add(new LabelField("\n"));
add(passwordField);
ButtonField buttonField_1 = new ButtonField( "Login",ButtonField.FIELD_HCENTER );
add( buttonField_1 );   
ButtonField buttonField_2 = new ButtonField( "Forgot Password",ButtonField.FIELD_HCENTER );
add( buttonField_2 );   
buttonField_1.setMargin(100, 10, 10, 10);
//popup1();
buttonField_1.setChangeListener( new FieldChangeListener() {
    public void fieldChanged( Field arg0, int arg1 ) {
        if (usernameField.getTextLength() == 0 || passwordField.getTextLength() == 0) {
            Dialog.alert("You must enter a username and password");
        } else {
            profile();
        }
    }
});

buttonField_2.setChangeListener( new FieldChangeListener() {
    public void fieldChanged( Field arg0, int arg1 ) {
        UiApplication.getUiApplication().pushScreen(new Forgot_Pwd());
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:37:53.257

[http://keraisureshvblackberry.blogspot.in/2012/02/on-last-post-we-have-study-lablefiled.html](http://keraisureshvblackberry.blogspot.in/2012/02/on-last-post-we-have-study-lablefiled.html)

该博客帮助您创建用户名和密码文本框

如果您从归档中获取文本，则可以使用 **usernameField.getText()**和**passwordField.getText()**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:13:17.357

[TextField - 在用户开始输入文本之前显示提示](https://stackoverflow.com/questions/6393951/textfield-show-hint-before-user-starts-typing-text)

你可以试试那个链接。它有助于制作盒子，但即使我一直在努力创造一个和你建议的一样的盒子。如果有人有更多的想法，将不胜感激。

# jquery-validate - Jqplot 日期轴渲染器

> ID：10328388
> 
> 赞同：0
> 
> 时间：2012-04-26T06:39:14.240
> 
> 标签：jquery-validate, jqplot

我必须根据以下代码中的日期在 x 轴上显示日期：

```
for(i=0;i<ticks1.length;i++)
{
   ptt.push([ticks1[i],data1[i]]);    
   ntt.push([ticks1[i],data2[i]]);    
} 
```

WHERE ticks1 包含日期。

我想在 jqplot 中绘制 dateaxis 图表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:37:47.620

您是否在 for 循环中缺少 var，如果我错了，请原谅我。我认为您的 ptt 和 ntt 是两个不同的系列，如果您想要这种类型的代码，请检查以下链接中的第三个示例：- [http://www.jqplot.com/tests/line-charts.php](http://www.jqplot.com/tests/line-charts.php)。

你将不得不像这样添加 data[] 东西

```
var ptt = []; 
```

对于 (var i=0;i

var ntt = []; 对于 (var i=0;i

和 ..

```
 var plot3 = $.jqplot('chart3', [ntt, ptt],
{ //option string}); 
```

您还需要添加数据渲染

```
title:'Default Date Axis',
axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer}},
series:[{lineWidth:4, markerOptions:{style:'square'}}] 
```

干杯！..

# css - 页面背景图片的定位

> ID：10328397
> 
> 赞同：0
> 
> 时间：2012-04-26T06:40:18.943
> 
> 标签：css, html

我有两个图像，一个图像的尺寸为 1800 X 1140，另一个褪色图像的尺寸为 1 X 1140。我需要将这两个图像组合起来，使第一个图像应该出现一半，第二个图像应该像渐变一样淡化第一个图像。我按如下方式实现了 div。

```
<div style="background:url('first-img.png') no-repeat fixed top center transparent;">
   <div style-"background:url('second-img.png') repeat fixed bottom center transparent;">

   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:07:19.340

嘿，现在您可以像这样定义相对位置和绝对位置

```
Define your parent postion relative and child define absolute 
```

**CSS**

```
 .parent{
position:relative;
    width:500px;
    height:200px;
    border:solid 1px green;
    background:url('first-img.png') no-repeat fixed top center transparent;
}

.child{
position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
    border:solid 2px red;
    background:url('second-img.png') repeat fixed bottom center transparent;
} 
```

**HTML**

```
 <div class="parent">
       <div class="child">
    -------
       </div>
    </div> 
```

根据您的设计更改宽度和高度...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:49:54.400

您使用的方法是正确翻转bg图像的垂直和水平位置..正确的顺序是水平第一和垂直第二代码将是这样的

```
<div style="background:url('first-img.png') no-repeat fixed center top transparent;">
   <div style-"background:url('second-img.png') repeat fixed center top transparent;">

   </div>
</div> 
```

并为 div 添加确切的宽度和高度

# jquery - Jquery中的自动除法和求和值

> ID：10328400
> 
> 赞同：1
> 
> 时间：2012-04-26T06:40:47.427
> 
> 标签：jquery, math

***请先参考示例链接以了解我的问题。***

首先我划分一个值并将每个划分的值显示到输入文本字段中。

你可以在这里看到示例.. [http://fahidmohammad.in/demo/sample/](http://fahidmohammad.in/demo/sample/)

示例链接中--total为要分期的金额，分期数为分期数。

我知道你可能在想什么……我到底需要什么，对吗？

这是该过程的第二阶段：

现在我有了拆分，我实际上需要的是，如果我从任何拆分输入中更改值，则下一个值或其余值应自动与总金额相加。

例如...

```
Total Amount = 9000
Number of installment = 3

Split1 = 3000
Split2 = 3000
Split3 = 3000 
```

如果我决定更改`split1 to 4000`，那么剩余的拆分应该自动求和。

例如..

```
Split1 = 4000
Split2 = 2500 [auto sum]
Split3 = 2500 [auto sum] 
```

数学上我知道这个过程，但我如何在 jquery 中完成这个，因为拆分的数量可能会因用户输入而异。

正确的方法是什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T00:13:35.903

这是你需要做的...

我建议首先添加元素，例如

```
var numInst = $('input[name="ni"]').val();
var total = $('input[name="ta"]').val();
var payment = total / numInst;

for(var i = 0; i < total; i++){
    $('<input/>').attr({
        'type' : 'text',
        'name' : 'sum[]'
    }).val(payment).addClass('installment').appendTo('#inner');
} 
```

我是徒手写的，所以给出或接受一些错误......但这是一种更有效的方法，而不是将字符串附加为 html。

对于您的分期付款 onchange 事件：

```
$('.installment').change(function(){
    var numInst = $('input[name="ni"]').val();
    var total = $('input[name="ta"]').val();
    var otherPayment = (total - $(this).val()) / (numInst - 1);

    $(this).addClass('dontChange');

    $.each($('.installment'),function(i, val){
        if(!($(this).hasClass('dontChange')){
            $(this).val(otherPayment);
        }
    });

    $(this).removeClass('dontChange');
}); 
```

就像我说的，我徒手完成了这一切，但我认为逻辑是可靠的。只需将一个类添加到临时手动更改的类，然后循环通过分期付款类文本框并将值更改为等于总数，减去手动输入的值，除以 1 减去 ni 等于的付款。

我可以预见的唯一问题是，如果不为那些手动更改的框设置标志，如果用户更改另一个分期付款框，任何更改都将被覆盖。

简单的解决方法是移动 $(this).removeClass('dontChange'); 从分期付款 onchange 函数到您的 ni 和 ta onchange 处理程序末尾的行。只需将 $(this) 更改为 $('.installment')

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:49:42.667

棘手的部分是弄清楚用户想要有目的地覆盖哪些拆分字段。从用户体验的角度来看，我建议拆分字段是文本并添加一个用户将明确检查的复选框。诸如“自定义值”之类的东西。如果一个人决定自定义第二个字段，它最终会看起来像这样：

```
split 1 =  2000   [ ] enter custom value
split 2 = [4000]  [X] enter custom value
split 3 =  2000   [ ] enter custom value 
```

然后，您将知道 a) 拆分数量（基于分期付款输入中的值）和 b) 用户选择设置为自定义值的拆分数量。

然后数学是 TOTAL AMOUNT -（每个自定义字段加在一起）/剩余拆分字段。

# html - HTML5 - 如何流式传输大型 .mp4 文件？

> ID：10328401
> 
> 赞同：88
> 
> 时间：2012-04-26T06:40:50.267
> 
> 标签：html, video, streaming, large-files

我正在尝试设置一个非常基本的 html5 页面，该页面加载一个 20MB 的 .mp4 视频。看来浏览器需要下载整个内容，而不是只播放视频的第一部分并在其余部分进行流式传输。

[这篇文章](https://stackoverflow.com/questions/6683418/inline-video-large-file-with-buffer)是我在搜索时找到的最接近的东西......我尝试了手刹和数据转圈，但似乎都没有任何区别：

关于如何做到这一点或是否有可能的任何想法？

这是我正在使用的代码：

```
<video controls="controls">
    <source src="/video.mp4" type="video/mp4" />
    Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-04-26T09:16:50.510

1.  [确保`moov`(metadata) 在`mdat`(audio/video data)](http://multimedia.cx/eggs/improving-qt-faststart/)之前。这也称为“快速启动”或“网络优化”。例如，[Handbrake 有一个“Web Optimized”复选框](https://handbrake.fr/docs/en/latest/advanced/web-optimised.html)，[ffmpeg](https://www.ffmpeg.org/ffmpeg-formats.html#mov_002c-mp4_002c-ismv)和[avconv](https://libav.org/avconv.html#mov_002c-mp4_002c-ismv)有输出选项`-movflags faststart`。
2.  确保您的 Web 服务器报告正确的内容类型 (video/mp4)。
3.  [确保您的 Web 服务器配置为处理字节范围请求](https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariWebContent/CreatingVideoforSafarioniPhone/CreatingVideoforSafarioniPhone.html#//apple_ref/doc/uid/TP40006514-SW6)。
4.  确保您的 Web 服务器没有在 mp4 文件的压缩之上应用 gzip 或 deflate 压缩。

您可以使用`curl -I http://yoursite/video.mp4`或使用浏览器（[Chrome](https://stackoverflow.com/a/4423097/112212)、[Firefox](https://stackoverflow.com/a/15191856/112212)）中的开发人员工具检查 Web 服务器发送的标头（如果已缓存，请重新加载页面）。HTTP 响应标头应包括**Content-Type: video/mp4**和**Accept-Ranges: bytes**，并且没有**Content-Encoding:**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-31T10:24:15.543

这是我用来在 C# (MVC) 中创建 Web API 控制器的解决方案，它将提供具有字节范围（部分请求）的视频文件。部分请求允许浏览器只下载它需要播放的视频，而不是下载整个视频。这使其效率更高。

请注意，这只适用于最新版本。

```
var stream = new FileStream(videoFilename, FileMode.Open, FileAccess.Read , FileShare.Read);

var mediaType = MediaTypeHeaderValue.Parse($"video/{videoFormat}");

if (Request.Headers.Range != null)
{
    try
    {
        var partialResponse = Request.CreateResponse(HttpStatusCode.PartialContent);
        partialResponse.Content = new ByteRangeStreamContent(stream, Request.Headers.Range, mediaType);

        return partialResponse;
    }
    catch (InvalidByteRangeException invalidByteRangeException)
    {
        return Request.CreateErrorResponse(invalidByteRangeException);
    }
}
else
{
    // If it is not a range request we just send the whole thing as normal
    var fullResponse = Request.CreateResponse(HttpStatusCode.OK);

    fullResponse.Content = new StreamContent(stream);
    fullResponse.Content.Headers.ContentType = mediaType;

    return fullResponse;
} 
```

# oracle - Oracle 上的缓慢批量更新

> ID：10328408
> 
> 赞同：3
> 
> 时间：2012-04-26T06:41:31.267
> 
> 标签：oracle, jdbc, jdk1.6, performance, batch-updates

在旧的 Oracle 服务器（据我所知是 8i）上使用 JDBC 时，我遇到了一个非常令人困惑和奇怪的问题。我在那里准备了一张桌子，里面有大约 10 列、数字、varchars、一个 raw(255) 和一些日期，没有限制，没有键等。在那方面，一切都可能很快。之后，我的应用程序似乎真的很慢（在大约 30-50 秒内插入 25,000 个数据......）。我的环境是几乎最新的 1.6 JDK，来自 10.2.0 Oracle 的 ojdbc14 驱动程序。所以我删掉了那个代码部分并分别测试了这些东西。关于代码的一些背景信息，这是它的基本部分

```
Class.forName("oracle.jdbc.driver.OracleDriver"); // I tried with oracle.jdbc.OracleDriver too
Connection conn = DriverManager.getConnection("thin url", "user", "pass");
conn.setAutoCommit(false);
PreparedStatement pstmt = conn.prepareStatement(SQL_STMT); // SQL_STMT is a simple <i>INSERT INTO tablename (column1, column2, column3) VALUES (value1, value2, value3)</i> command with 10 parameters

for(int i = 0; i < numOfData; ++i) {
   pstmt.setObject(objects[i]); // objects has the data for example. I also tried setInt, setDate, etc with the corresponding types, does not speeds it up
   pstmt.addBatch();
}
pstmt.executeBatch();
conn.commit();
conn.setAutoCommit(true);
pstmt.close();
conn.close(); 
```

我认为这很简单。我还尝试使用本地 H2 DB 进行此操作，速度非常快，甚至 500,000 个数据也需要 0 毫秒才能将其插入相同的结构（显然不是 0 毫秒，只是它太快了，我无法测量它）。我今天将尝试使用 ojdbc6 和更新的 oracle。我的怀疑是 ojdbc14 驱动程序和 jdk 1.6.idontknow 相互之间存在一些问题。

*我在处理 FINEST 级别的executeBatch*时追踪了 ojdbc14 ，我看到了我认为的数千个转换，*oracle.jdbc.driver.DBConversion.stringToDriverCharBytes*等等。这些代码大部分时间都过去了，正如我所见，只有最后一个命令才是“真正的交易”。提交、参数化 pstmt 等并不慢，只是 executeBatch。

仅供参考，用这个旧的 jdbc 驱动程序读取速度很快，只是插入速度非常慢。

那么，大家有什么想法吗？我可以使用什么样的驱动程序来使这些更快并至少与一些基本操作兼容所有可用的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:29:31.390

从“数千次转换”可能存在的延迟来看，我建议使用 Oracle OCI 驱动程序。它应该更快，因为它是用本机代码编写的。除此之外，这很可能是网络延迟问题。

# java - 导出为 PDF 时在 JasperReport 中获取“OCR A Std”OCR 挂钩字符

> ID：10328412
> 
> 赞同：3
> 
> 时间：2012-04-26T06:41:49.310
> 
> 标签：java, pdf, jasper-reports, report, ocr

我创建了一个使用 OCR 字符串的 Jasper 报告。使用的字体是 Windows 7 预装的“OCR A Std”。我已经将它与我正在使用的其他字体一起打包在一个字体扩展 jar 中。导出到 PDF 工作正常，没有问题，唯一的问题是，我似乎不能使用一些额外的 OCR 字符。

具体来说，我需要 OCR Hook、OCR Chair 和 OCR Fork 字符。在[字体规范](http://en.wikipedia.org/wiki/OCR-A_font)中，字符具有 unicode 代码 U+2440、U+2441 和 U+2442。尝试插入特殊符号时，我在 Microsoft Word 中获得的信息相同。

如果我尝试使用这些字符来输出它们，我会得到一个空字符串。

```
 <parameter name="ocr-codes" class="java.lang.String" isForPrompting="false">
      <defaultValueExpression><![CDATA["\u2440\u2441\u2442"]]></defaultValueExpression> 
    </parameter> 
```

经过一些试验，我得到了 OCR Chair 和 OCR Fork 字符，`(char)240`但`(char)254`找不到 OCR Hook 字符。

我在整个项目中使用的编码是 UTF-8。

任何想法为什么无法通过 unicode 访问这些字符，或者哪个是第三个字符的正确代码？

# ios - 核心数据关系删除自定义规则

> ID：10328415
> 
> 赞同：0
> 
> 时间：2012-04-26T06:42:09.403
> 
> 标签：ios, iphone, core-data, relationship

我正面临这个问题，我有 2 个通过“一对多”关系连接的托管对象子类。当我删除父对象时，我想在开始删除所有子对象之前对每个子对象执行一些操作。
我知道我可以为之前执行这些操作的父对象执行自定义删除，但我想知道在删除开始之前是否存在某种通知或验证发送也适用于子对象。
最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:47:44.923

这很简单：只需`prepareForDeletion`在您的`NSManagedObject`子类中实现即可。

替代方法是使用：

```
- willTurnIntoFault
- didTurnIntoFault 
```

有关更多信息，[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)就是这样。

# .net - linq 实体框架中的联合

> ID：10328416
> 
> 赞同：0
> 
> 时间：2012-04-26T06:42:10.207
> 
> 标签：.net, entity

我想在实体框架中执行以下工作，这些工作可以很容易地在 sql 中完成。

```
select 0 as employeeid, 'Select' as employeeName 
union

Select employeeid, employeeName from tblemployee where IsActive=true 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:00:33.587

也许是这样的：

和`UNION`

```
var t= Enumerable
         .Range(0,1)
         .Select (e =>
                    new{employeeid=0,employeeName="Select"})
       .Union(
          db.tblemployee
          .Select (u =>
                   new {employeeid=u.employeeid,employeeName=u.employeeName} )); 
```

和`UNION ALL`

```
var t= Enumerable
         .Range(0,1)
         .Select (e =>
                    new{employeeid=0,employeeName="Select"})
       .Concat(
          db.tblemployee
          .Select (u =>
                   new {employeeid=u.employeeid,employeeName=u.employeeName} )); 
```

其中 db 是数据上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:21:09.930

假设它`tblemployee`被映射到一个名为的实体`Employee`并且您`DbContext`有一个`Employee`名为 s的集合`Employees`，您可以执行以下操作：

```
var allEmployeesPlusAnEmptyOne = 
    new[] { new Employee { EmployeeId = 0, Name = "Select" } }
    .Concat(dbContext.Employees.Where(e => e.IsActive)); 
```

...正如@Arion 所提到的，`Union()`如果您希望实体框架删除重复的对象，您可以使用，尽管我认为不会有任何重复对象。

# javascript - 如何在中间显示选择列表选择？

> ID：10328418
> 
> 赞同：1
> 
> 时间：2012-04-26T06:42:14.083
> 
> 标签：javascript, list, selection

我需要知道，是否可以将选择列表的选定项目垂直居中（使用 javascript）：

![在此处输入图像描述](../Images/7e67298b10d9c0e797db6558cec3ea2c.png)

### 我的方法

首先，我尝试选择项目，然后滚动列表。但这是不可能的，因为我通过谷歌发现。更改垂直滚动的唯一方法是选择一个项目。

所以第二种方法是选择一个索引加3的项目。所以列表会向下滚动到这个项目。之后，我选择了“真实”索引。但它不起作用，因为该项目将始终在底部被选中。

### 问题

现在我在这里想问一下，是否可以将选定的列表项放到列表的中间？

以及如何完成 ;)

问候弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:45:03.070

因为下拉列表是由浏览器处理的并且不能很好地操作，所以您必须自己重新创建下拉列表的行为。

嵌套的 div 应该与`overflow: scroll;`.

然后，您可以使用 javascript 拥有的任何 scrollTo 解决方案。

# java - 使用 Hive JDBC 执行程序时出错

> ID：10328419
> 
> 赞同：3
> 
> 时间：2012-04-26T06:42:16.900
> 
> 标签：java, jdbc, hive

我为 Hive JDBC 编写了这个小程序。最初它执行得很好，但是当我现在突然尝试运行时，我得到了错误。

## 程序：

```
import java.io.FileWriter;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class SampleHiveProgram
{
    String lyear="";
    String lquarter="";
    String driverName = "org.apache.hadoop.hive.jdbc.HiveDriver";
    public static void main(String[] args)
    {
        SampleHiveProgram s=new SampleHiveProgram();
        s.startHiveThriftServer();
        s.quarterTable();
    }

    public void startHiveThriftServer()
    {
        try
        {   
            String cmd = "/home/hadoop/sqoop-1.3.0-cdh3u1/bin/StartHiveThriftServer.sh"; // this is the command to execute in the Unix shell           
            // create a process for the shell
            ProcessBuilder pb = new ProcessBuilder("bash", "-c", cmd);
            pb.redirectErrorStream(true); // use this to capture messages sent to stderr
            Process shell = pb.start();
            InputStream shellIn = shell.getInputStream(); // this captures the output from the command
            // wait for the shell to finish and get the return code
            // at this point you can process the output issued by the command
            // for instance, this reads the output and writes it to System.out:
            int c;
            while ((c = shellIn.read()) != -1)
            {
                System.out.write(c);
            }
            int shellExitStatus = shell.waitFor();
            // close the stream
            shellIn.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
            System.exit(1);
        }
    }

    public void quarterTable()
    {
        try
        {
            String start="2010-01-01";
            String end="2011-01-01";
            System.out.println("in quarter table...");
            //create connection with database
            Class.forName(driverName);
            Connection con = DriverManager.getConnection("jdbc:hive://localhost:10000/default", "", "");
            String sql=null;
            Statement stmt = con.createStatement();
            ResultSet res=null;

            sql="drop table TmpQuarterTable";
            System.out.println("Dropping the Quarter Table...");
            res = stmt.executeQuery(sql);

            //Creating Quarter Table
            sql="create table TmpQuarterTable (year string, quarter string, quarterstart string, quarterend string, quartername string)" +
                " ROW FORMAT DELIMITED FIELDS TERMINATED BY ',' LINES TERMINATED BY '\012' STORED AS TEXTFILE ";
            System.out.println("Creating the Quarter Table...");
            res = stmt.executeQuery(sql);

            //create the file
            FileWriter fw=new FileWriter("/home/hadoop/Quarter.txt");

            //convert string date to calendar date
            DateFormat formatter =new SimpleDateFormat("yyyy-MM-dd");
            Date sdate=(Date)formatter.parse(start);
            Date edate=(Date)formatter.parse(end);

            Calendar c1=Calendar.getInstance();
            Calendar c2=Calendar.getInstance();

            c1.setTime(sdate);
            c2.setTime(edate);

            int q=0;
            String QuarterEndDate=null;
            int resultMonthCount=0;
            int resultYear =0;
            int resultMonth =0;

            Calendar c3=Calendar.getInstance();
            c3.setTime(c1.getTime());     
            while(c3.compareTo(c2)<=0)
            {
                      if(c3.get(Calendar.MONTH)>=0 && c3.get(Calendar.MONTH)<=2)
                      {
                          q=1;
                          QuarterEndDate=Integer.toString(c3.get(Calendar.YEAR))+"-04-01";
                      }
                      else if(c3.get(Calendar.MONTH)>=3 && c3.get(Calendar.MONTH)<=5)
                      {
                          q=2;
                          QuarterEndDate=Integer.toString(c3.get(Calendar.YEAR))+"-07-01";
                      }
                      else if(c3.get(Calendar.MONTH)>=6 && c3.get(Calendar.MONTH)<=8)
                      {
                          q=3;
                          QuarterEndDate=Integer.toString(c3.get(Calendar.YEAR))+"-10-01";
                      }
                      else if(c3.get(Calendar.MONTH)>=9 && c3.get(Calendar.MONTH)<=11)
                      {
                          q=4;
                          QuarterEndDate=Integer.toString(c3.get(Calendar.YEAR)+1)+"-01-01";
                      }
                      //Got the QuarterEndDate (YYYY-MM-DD)
                      //split the QuarterEndDate into qdate and create quarter_end_date
                      String[] qdate=QuarterEndDate.split("-");
                      Calendar quarter_end_date=Calendar.getInstance();
                      quarter_end_date.set(Integer.parseInt(qdate[0]),Integer.parseInt(qdate[1]),Integer.parseInt(qdate[2]));
                      System.out.println("quarter_end_date : "+quarter_end_date);

                      //YY
                      String YY=Integer.toString(c3.get(Calendar.YEAR));

                      //quarter start date = quarter end date - 1
                      Calendar quarter_start_date=Calendar.getInstance();
                      quarter_start_date.set(quarter_end_date.get(Calendar.YEAR),quarter_end_date.get(Calendar.MONTH),quarter_end_date.get(Calendar.DATE));
                      quarter_start_date.add(Calendar.YEAR, -1);

                      //year
                      String year=Integer.toString(quarter_start_date.get(Calendar.YEAR));
                      System.out.println("year : "+year);

                      //month
                      String months=null;
                      if(quarter_start_date.get(Calendar.MONTH)<10)
                          months="0"+Integer.toString(quarter_start_date.get(Calendar.MONTH));
                      else
                          months=Integer.toString(quarter_start_date.get(Calendar.MONTH));
                      System.out.println("month : "+months);

                      //day
                      String day=null;
                      if(quarter_start_date.get(Calendar.DATE)<10)
                          day="0"+Integer.toString(quarter_start_date.get(Calendar.DATE));
                      else
                          day=Integer.toString(quarter_start_date.get(Calendar.DATE));
                      System.out.println("day : "+day);

                      //adding 3 months
                      resultMonthCount = c3.get(Calendar.MONTH) + 3;
                      resultYear =  c3.get(Calendar.YEAR);
                      resultMonth = resultMonthCount - resultYear * 12;

                      System.out.println("YEAR : "+resultYear);
                      c3.set(Calendar.YEAR, resultYear);

                      System.out.println("MONTH : "+resultMonthCount);
                      c3.set(Calendar.MONTH, resultMonthCount);    
                      System.out.println("c3 : "+c3.getTime());

                      //YY,q,startDate,endDate,quartername   ------->>   write to file
                      String QuarterStartDate=year+"-"+months+"-"+day;                 
                      String quarterName=YY+"\"Q\""+q;                 
                      fw.write(YY+","+q+","+QuarterStartDate+","+QuarterEndDate+","+quarterName+"\n");

            }//end of while
            fw.close();

            String filepath = "/home/hadoop/Quarter.txt";
            sql = "load data local inpath '" + filepath + "' overwrite into table TmpQuarterTable";
            System.out.println("Running: " + sql);
            stmt.executeUpdate(sql);
        }
        catch(Exception e)
        {
            e.printStackTrace();
            System.exit(1);
        }

    }
} 
```

错误类似于：线程“main”中的异常 java.lang.IncompatibleClassChangeError: class com.facebook.fb303.FacebookService$Client has interface org.apache.thrift.TServiceClient as super class

## 错误为：

```
Exception in thread "main" java.lang.IncompatibleClassChangeError: class com.facebook.fb303.FacebookService$Client has interface org.apache.thrift.TServiceClient as super class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.hadoop.hive.jdbc.HiveConnection.<init>(HiveConnection.java:93)
    at org.apache.hadoop.hive.jdbc.HiveDriver.connect(HiveDriver.java:104)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at SampleHiveProgram.quarterTable(SampleHiveProgram.java:64)
    at SampleHiveProgram.main(SampleHiveProgram.java:22) 
```

我是怎么了？我已经添加了 Hive 所需的所有 jar。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T18:11:30.697

您是否有不同版本的 thrift 和 libthrift 闲逛？听起来这些类是使用一个版本的 thrift 生成的，但尝试在运行时使用不同版本的 libthrift。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-21T11:52:09.643

当我尝试针对**HIVE运行示例****JDBC**时，我遇到了同样的错误。**然后我将libfb*.jar**的位置添加到类路径中，它对我来说效果很好。我从 JDBC 执行中学到的是，它需要大量的 jar 文件，这些文件需要在类路径中明确提及。我的类路径看起来像这样（JDBC 执行绝对需要最后几个 jar）

 ****```
[cloudera@quickstart ownjava]$ echo $CLASSPATH
/etc/hadoop/conf:/usr/lib/hadoop/lib/*:/usr/lib/hadoop/.//*:/usr/lib/hadoop-hdfs/./:/usr/lib/hadoop-hdfs/lib/*:/usr/lib/hadoop-hdfs/.//*:/usr/lib/hadoop-yarn/lib/*:/usr/lib/hadoop-yarn/.//*:/usr/lib/hadoop-mapreduce/lib/*:/usr/lib/hadoop-mapreduce/.//*:/usr/lib/hive/lib/:/usr/lib/hive/lib/hive-exec.jar:/usr/lib/hive/lib/hive-exec-0.12.0-cdh5.1.0.jar:/usr/lib/hive/lib/hive-service.jar:/usr/lib/hive/lib/hive-service-0.12.0-cdh5.1.0.jar:/usr/lib/hive/lib/hive-metastore.jar:/usr/lib/hive/lib/hive-metastore-0.12.0-cdh5.1.0.jar:/home/cloudera/ownjava/:/usr/lib/hive/lib/hive-jdbc-0.12.0-cdh5.1.0.jar:/usr/lib/hive/lib/hive-jdbc.jar:/usr/lib/hive/lib/libfb303-0.9.0.jar:/usr/lib/hive/lib/jdo-api-3.0.1.jar:/usr/lib/hive/lib/antlr-runtime-3.4.jar 
```****

# jquery - 如果另一个 td 显示特定文本，如何选择和禁用复选框

> ID：10328423
> 
> 赞同：1
> 
> 时间：2012-04-26T06:42:24.950
> 
> 标签：jquery, checkbox

我是 Jquery 的新手，非常感谢任何帮助。

我的表有很多行，其中一些为错误：

```
 <td>
            Error:
           <input name="[0].ValidationResult" type="hidden" value="Error:" />
        </td>

        <td>
            <input data-val="true" data-val-required="The isChecked field is required." name="[0].isChecked" type="checkbox" value="true" /><input name="[0].isChecked" type="hidden" value="false" />
        </td> 
```

我想弄清楚是否禁用与错误相同的行中的复选框：

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:53:27.393

此逻辑在服务器上完成，但如果由于某种原因您需要使用 javascript 执行此操作：

```
$(':hidden[value="Error:"]')
    .closest('tr')
    .find('td :checkbox')
    .attr('disabled', 'disabled')
    .attr('checked', 'checked'); 
```

正如评论部分所指出的，如果您使用的是 jQuery 1.6+，则[`.prop()`](http://api.jquery.com/prop/)应该使用该方法而不是`.attr`：

```
$(':hidden[value="Error:"]')
    .closest('tr')
    .find('td :checkbox')
    .prop('disabled', true)
    .prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:53:50.933

一种方法是给包含错误的单元格一个特定的类，并在 jQuery 选择器中使用该类。

```
<td class="errorTd>
     Error:
     <input name="[0].ValidationResult" type="hidden" value="Error:" />
</td>

<td>
    <input data-val="true" data-val-required="The isChecked field is required." name="[0].isChecked" type="checkbox" value="true" /><input name="[0].isChecked" type="hidden" value="false" />
</td> 
```

现在您可以使用 class="errorTd" 禁用单元格中的输入，如下所示：

```
$('.errorTd input').attr('disabled', 'disabled'); 
```

# php - 在特定时间后刷新页面元素

> ID：10328427
> 
> 赞同：1
> 
> 时间：2012-04-26T06:43:09.317
> 
> 标签：php, time, hyperlink, delay

我不太擅长代码，所以请使用外行术语回答！

我有广播网站，我在其中隐藏链接，直到一天中的特定时间（即广播时间）这是我用来执行此操作的代码：

```
<?php
date_default_timezone_set('Europe/London');
$currtime = date('Hi');
// Change time
$starttime = 2200;  
$endtime = 2300; 
$endtime = $endtime + 2400;
$endtest = $currtime + 2400;

?>
<?php

if( $currtime >= $starttime && $endtest <= $endtime ){
?>
<a href="*broadcastlink*">LIVE NOW</a>
<?php
}
else{
?>
Live at 22:00
<?php
}
?> 
```

目前用户必须手动刷新页面，这有点混乱。

我知道这可以很容易地使用 javascript 每 x 秒刷新一次整个页面来完成，但我不想这样做，因为我有另一段代码显示了一个“类似 Facebook”的弹出窗口，它不会关闭 5 分钟除非他们点击喜欢，否则刷新整个页面会不断显示弹出窗口。

请有人可以编写一个脚本，以便我可以将刷新脚本链接到上面的 php 脚本，以便在链接显示容器刷新的时间，我环顾四周，到目前为止没有发现任何合适的？

在此先感谢您的帮助-非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:54:27.797

坏消息是 PHP 不能强迫浏览器做任何事情。您需要带有 ajax 的 javascript 来实现这一点。但是如果在客户端禁用了javascript怎么办。php 中有一个小技巧。

这是你可以做的。

确定直播开始的秒数

```
$numOfSeconds = $starttime - $currtime; 
```

然后，一旦您知道要在几秒钟后刷新浏览器，这就是您可以使用 php 完成的方法。

```
header( "refresh:$numOfSeconds;urltoanywhere.php" ); 
```

这将带您到您希望在特定时间后访问的任何 URL。如果您想刷新，请定义指向同一页面的 url。你可以扩展这个逻辑来实现你想要的方式。

**更新1：**

以下是我测试过的工作代码。希望这对你有帮助:)

```
<?php
ob_start();
date_default_timezone_set('Europe/London');
$currentPage = $_SERVER['PHP_SELF'];
$currentTimestamp = strtotime(date('Y-m-d H:i:s'));
//Define your startTime here in {Year-Month-Day Hour:Minute:Second} format
$startTime = '2012-04-26 21:57:00';
//Define your endTime here in {Year-Month-Day Hour:Minute:Second} format.
$endTime = '2012-04-27 22:00:00';
$startTimestamp = strtotime($startTime);
$endTimestamp = strtotime($endTime);
$numOfSecondsToReload = $startTimestamp - $currentTimestamp;
if($currentTimestamp >= $startTimestamp && $currentTimestamp <= $endTimestamp):
?>
<a href="*broadcastlink*">LIVE NOW</a>
<?php else: ?>
<p>Live at <?php echo date('H:i', $startTimestamp); ?></p>
<?php header( "refresh:$numOfSecondsToReload;$currentPage"); ?>
<?php endif; ?> 
```

**Update2：**重新加载特定的 div 内容。这是您可以使用的代码。

```
<div id="live">
    <?php
    ob_start();
    date_default_timezone_set('Europe/London');
    $currentPage = $_SERVER['PHP_SELF'];
    $currentTimestamp = strtotime(date('Y-m-d H:i:s'));
    $startTime = '2012-04-27 12:42:20';
    $endTime = '2012-04-28 22:00:00';
    $startTimestamp = strtotime($startTime);
    $endTimestamp = strtotime($endTime);
    $numOfSecondsToReload = $startTimestamp - $currentTimestamp;
    if($currentTimestamp >= $startTimestamp && $currentTimestamp <= $endTimestamp):
    ?>
    <a href="*broadcastlink*">LIVE NOW</a>
    <?php else: ?>
    <p>Live at <?php echo date('H:i', $startTimestamp); ?></p>
    <?php endif; ob_end_flush(); ?>
    <div id="timeremaining" hidden><?php echo $numOfSecondsToReload * 1000; ?></div>
</div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    var numOfMiliSecondsToReload = $('#timeremaining').html();
    var timeToReload = (numOfMiliSecondsToReload >= 0) ? numOfMiliSecondsToReload : 86400000;
    $(function() {
        $(function() { setTimeout( reloadDiv, timeToReload ); });
        function reloadDiv() { $('#live').load(location.href);}
    });
</script> 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:49:30.257

没有人会为你工作，所以不要等别人为你写剧本。

既然您知道什么时候应该隐藏一些链接，那么您可以计算隐藏它们所需的时间。做这样的事情：

*   用户在 11:50 发出请求，但您计划在 12:00 隐藏链接，十分钟后
*   您的服务器计算 11:50 到 12:00 之间的秒数。看一下[time()](http://php.net/manual/en/function.time.php)和[strtotime()](http://php.net/manual/en/function.strtotime.php)函数。
*   您的服务器将页面返回给用户，并返回应该隐藏链接之前的秒数。您可以将该数据作为隐藏的表单值返回
*   然后，在 Javascript 中，您使用[setTimeout()](http://www.w3schools.com/js/js_timing.asp)方法调用 JavaScript 函数，该函数在 X 时间（直到 12:00 的秒数）内隐藏链接。
*   如果您将秒数写为如上所述的隐藏值，那么您可以在 JavaScript 中使用 document.getElementById('hidden_​​form_value').value 获取该值。

# php - __() 函数在 PHP 中的全球化和本地化

> ID：10328432
> 
> 赞同：0
> 
> 时间：2012-04-26T06:43:35.370
> 
> 标签：php, localization, globalization

我正在致力于全球化和本地化..

我在博客中得到了一个有趣的东西，那就是 __() 函数，并且听到很多人使用这个函数来实现全球化。我阅读了它的 PHP 内置函数，但有些人通过包含一些对象文件来使用它。但没有得到了实际的解决方案..

我首先通过编写以下代码来测试 __() 函数：

```
<?php
echo __("some text");
?> 
```

PHP给了我这个错误：

```
Fatal error: Call to undefined function __() in D:\wamp\www\test\globalization.php on line 3 
```

然后我将它与 use_helper() 函数一起使用，如下所示：

```
<?php
use_helper('I18N');
echo __("some text");
?> 
```

但它再次给出错误..

```
Fatal error: Call to undefined function use_helper() in D:\wamp\www\test\globalization.php on line 2 
```

基本上就是这样；我需要知道的是.. 有没有最简单的 PHP 全球化和本地化方法？以及上面的 __() php 函数是如何工作的.. 我还需要在其中包含什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:46:50.143

`__()`不是 PHP 中包含的函数。PHP 有一个`_()`函数，它是 的别名[`gettext`](http://php.net/gettext)，它使用 Gettext 系统进行本地化。`__()`是本地化助手的流行名称，许多框架使用它来实现自己的本地化功能。

换句话说：使用 PHP 的 gettext 函数，或者自己动手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:46:50.243

仅当您使用实现此方法的框架时：Wordpress、Kohana 等。请参阅[此 SO 答案。](https://stackoverflow.com/a/2427907/76734)

# java - 在 Java (Android) 中拆分字符串数组

> ID：10328433
> 
> 赞同：0
> 
> 时间：2012-04-26T06:43:35.557
> 
> 标签：java, android, arrays

假设我有一个如下所示的 String[]：

```
private String[] motherOfStrings = {
  "stringA",
  "stringB",
  "stringC",
  "stringD",
  "stringE",
} 
```

我可以像这样将它拆分成多个 String[] 吗？

```
private String[] childOfString1 = {
  "stringA",
  "stringB",
  "stringC",
}

private String[] childOfString2 = {
  "stringD",
  "stringE",
} 
```

多谢你们 ：）

*ps，我做了一些搜索，但大多数指南（如果不是全部）都是关于将 String[] 拆分为 Strings，而不是另一个 String[]。这甚至可能吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:52:10.263

您可以`split()`对数组中的每个字符串使用方法。

```
String stringByWhichYouWantToSplit = "C";
String[][] splittedStrings = new String[motherOfStrings][];
for(int i = 0; i < motherOfStrings.length; i++)
    splittedStrings[i] = motherOfStrings.split(stringByWhichYouWantToSplit); 
```

...如果您想将字符串拆分为`"C"`...

**编辑：**

现在，当您编辑问题时，我看到了您想要的。您必须创建两个数组并将`motherOfStrings`. 您可以使用[System.arraycopy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:46:16.150

循环遍历数组并将每个拆分`String`为`String[]`或更好地维护一个`List<String>`

# list - 如何解决列表中的浮点数错误[haskell]

> ID：10328435
> 
> 赞同：0
> 
> 时间：2012-04-26T06:43:45.893
> 
> 标签：list, haskell, floating-point

> **可能重复：**
> [Haskell 范围和浮点数](https://stackoverflow.com/questions/7290438/haskell-ranges-and-floats)

例如，当我输入

```
[0.1, 0.3 ..1] 
```

我明白了：

```
[0.1,0.3,0.5,0.7,0.8999999999999999,1.0999999999999999] 
```

我期望：

```
[0.1,0.3,0.5,0.7,0.9] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:47:36.147

尝试

```
map (/10) [1, 3 .. 10] 
```

反而。

* * *

问题是浮点数使用二进制分数，而二进制分数不能精确地表示十进制分数。因此，您会遇到错误并且错误会累积。

二进制分数不能精确表示 1/5，就像十进制分数不能精确表示 1/3 一样——我们能做的最好的就是 0.33333....

`[0.1, 0.3 .. 1]`是简写

```
[0.1,
 0.1 + 0.2,
 0.1 + 0.2 + 0.2,
 0.1 + 0.2 + 0.2 + 0.2,
 0.1 + 0.2 + 0.2 + 0.2 + 0.2,
 0.1 + 0.2 + 0.2 + 0.2 + 0.2 + 0.2] 
```

* * *

另一个问题是，当下一个元素*超过限制的一半以上*时，列表将在第一个~~*等于或超过限制*~~~~的元素之后~~*停止，这就是你拥有该元素的原因。*`1.0999999999999999`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:20:31.397

该表达式`[e1, e2 .. e3]`被评估为`enumFromThenTo e1 e2 e3`，对于浮点数意味着（来自[The Haskell 98 Report](http://www.haskell.org/onlinereport/basic.html)）：

> 对于 Float 和 Double， enumFrom 系列的语义由上面的 Int 规则给出，除了当元素变得大于`e3+i/2`正增量 i 或当它们小于`e3+i/2`负 i 时列表终止。

这意味着浮点数的最后一个元素`[e1, e2 .. e3]`通常大于`e3`，并且可以达到`e3+(e2-e1)/2 - ε`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:13:59.210

这是浮点数在计算机中如何表示的问题。带有浮点数的简单算术通常不会按预期运行。重复算术会累积“舍入误差”，这意味着当您重复添加数字（例如）时，结果会逐渐变差。

在某些情况下，您可以通过使用不同的数字表示来避免这些问题。例如，如果您只关心有理数，则可以使用`Rational`类型。所以你可以这样做：

```
[0.1,0.3..1] :: [Rational] 
```

这导致：

```
[1 % 10,3 % 10,1 % 2,7 % 10,9 % 10,11 % 10] 
```

这是没有舍入误差的正确答案；每个数字仅表示为两个`Integer`s 的比率。根据您的具体情况，这可能是比使用浮点数更好的选择。

这仍然超出了上限，但这比从浮点数中得到的舍入误差更容易处理。

请注意，对于某些性能关键的浮点数可能会更快。**

# javascript - 如何使用 Javascript 处理上传的文件

> ID：10328439
> 
> 赞同：3
> 
> 时间：2012-04-26T06:44:02.553
> 
> 标签：javascript, file

我正在尝试使用 Javascript 处理 XML 文件。

```
xhttp.open("GET","exportproject.xml",false); 
```

我想要做的是，让用户使用文件上传器指定文件（而不是将其硬编码为 exportproject.xml），然后使用 Javascript 进行处理，而不是将其发送到服务器。

可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T07:23:49.743

您可能想看看 HTML5 FileReader API - [http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T07:29:36.247

如果您不介意需要现代浏览器（基本上，即 9+）的解决方案，您可以使用带有基本`<input type="file">`.

看看[这个](http://www.html5rocks.com/en/tutorials/file/dndfiles/)链接，有很多很好的例子可以帮助你入门。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-26T07:15:20.353

Javascript 无法从客户端机器（浏览器运行的地方）读取文件。那将是违反安全规定的。您必须将文件提交到服务器并进行处理。

# ruby - Ruby 名称错误 - 未初始化的常量

> ID：10328440
> 
> 赞同：2
> 
> 时间：2012-04-26T06:44:03.663
> 
> 标签：ruby, learn-ruby-the-hard-way

我正在做[练习](http://ruby.learncodethehardway.org/book/ex47.html)，并且`NameError:Unitialized Constant MyUnitTests::Room`在运行 test_ex47.rb 时得到了锻炼。

test_ex47.rb：

```
require 'test/unit'
require_relative '../lib/ex47'

class MyUnitTests < Test::Unit::TestCase
    def test_room()
        gold = Room.new("Gold Room", """This room has gold in it you can grab. There's a doo to the north.""")
    assert_equal(gold.name, "GoldRoom")
    assert_equal(gold.paths, {})
end

def test_room_paths()
    center = Room.new("Center", "Test room in the center.")
    north = Room.new("North", "Test room in the north.")
    south = Room.new("South", "Test room in the south.")

    center.add_paths({:north => north, :south => south})
    assert_equal(center.go(:north), north)
    assert_equal(center.go(:south), south)
end

def test_map()
    start = Room.new("Start", "You can go west and down a hole.")
    west = Room.new("Trees", "There are trees here, you can go east.")
    down = Room.new("Dungeon", "It's dark down here, you can go up.")

    start.add_paths({:west => west, :down => down})
    west.add_paths({:east => start})
    down.add_paths({:up => start})

    assert_equal(start.go(:west), west)
    assert_equal(start.go(:west).go(:east), start)
    assert_equal(start.go(down).go(up), start)
end

end 
```

ex47.rb 位于 lib 文件夹中，如下所示：

```
class Room
aatr_accessor :name, :description, :paths

def initialize(name, description)
    @name = name
    @description = description
    @paths = {}
end

def go(direction)
    @paths[direction]
end

def add_paths(paths)
    @paths.update(paths)
end
end 
```

错误：

```
Finished tests in 0.000872s, 3440.3670 tests/s, 0.0000 assertions/s.

  1) Error:
test_map(MyUnitTests):
NameError: uninitialized constant MyUnitTests::Room
    test_ex47.rb:22:in `test_map'

  2) Error:
test_room(MyUnitTests):
NameError: uninitialized constant MyUnitTests::Room
    test_ex47.rb:6:in `test_room'

  3) Error:
test_room_paths(MyUnitTests):
NameError: uninitialized constant MyUnitTests::Room
    test_ex47.rb:12:in `test_room_paths'

3 tests, 0 assertions, 0 failures, 3 errors, 0 skips] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:58:25.733

这里的问题是您在第 3 行的 MyUnitTests 类中创建了一个 Room 对象。Ruby 认为您想要使用一个名为 MyUnitTest::Room 的类，但它并不存在。您需要使用绝对类引用，如下所示：

```
class MyUnitTests < Test::Unit::TestCase
    def test_room()
        gold = ::Room.new("Gold Room", """This room has gold in it you can grab. There's a doo to the north.""")
    assert_equal(gold.name, "GoldRoom")
    assert_equal(gold.paths, {})
end 
```

注意到第 3 行 Room.new 之前的 :: 了吗？这告诉 Ruby 你想从顶级名称空间创建一个 Room 对象:)

我希望这能回答你的问题。

编辑：您还需要将对 Room 类的其他引用更改为 ::Room。抱歉，由于缩进，我认为只有顶部有问题。仔细观察会发现其余部分也需要 :: 。

# java - 为 netbeans 项目创建可执行包

> ID：10328443
> 
> 赞同：2
> 
> 时间：2012-04-26T06:44:17.453
> 
> 标签：java, deployment, netbeans

> **可能重复：**
> [使用 Netbeans 导出 JAR](https://stackoverflow.com/questions/4498047/export-jar-with-netbeans)

我创建了一个 NetBeans 项目，现在我想从该项目创建一个包。因为这是我在 NetBeans 中的第一个项目。任何人都可以帮助我从我的项目中创建一个包以进行分发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:19:19.363

扩展.exe的问题：

我有使用 Winrun4J 为我的 Java 应用程序生成 exe 启动器的良好经验。它非常易于设置和生成，并且支持 32 位和 64 位 Windows。

您甚至可以将所有需要的 jar*放入*exe。

[http://winrun4j.sourceforge.net/](http://winrun4j.sourceforge.net/)

**但是**（因为您似乎是 Java 新手）：exe 只是一个包装器。它仍然需要在您启动 exe 的系统上安装 Java 运行时！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:11:54.633

如果您想编写桌面应用程序。它将在 Windows、OS X 和 *nix 上运行，用 Java 编写它们并使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接部署它们。

> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、**桌面集成、**文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

我**突出**显示与您的下一条评论相关的部分。

> 我可以将自己的图标图像赋予可执行文件吗？

为什么用户会看到 .jar（或 .exe）？JWS 提供桌面集成，它可能包含桌面快捷方式和/或受支持操作系统上的菜单项。其中任何一个都可以具有您提供的图像（在限制范围内）。

* * *

[`deployJava.js`](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit)在运行小程序或提供 JWS 应用程序链接之前， 该脚本会检查用户是否具有所需的最低版本（如果没有，则帮助他们安装）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:15:16.480

1.  如果您在开发环境中有多个项目，请确保您已将要分发的项目设置**为主**项目。可以通过左窗格中项目名称上的鼠标右键单击菜单来完成。
2.  单击菜单：“运行 -> 清理并构建主项目”
3.  检查您的项目文件夹，`dist`在您的项目文件夹中找到文件夹。有 *.jar 文件。它是打包编译好的项目文件。

# sql - MS SQL 触发器无法执行哪些实例？

> ID：10328445
> 
> 赞同：0
> 
> 时间：2012-04-26T06:44:27.367
> 
> 标签：sql

我正在创建一种机制来监视表上插入和删除的数据。我的问题是，触发器有多可靠？触发器失败的实例有哪些？

结构很简单，一个表，两个触发器，一个用于插入，一个用于删除。两个触发器都会将数据（“deleted `<id>`”、“inserted `<id>`”）插入另一个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:49:28.387

触发器会一直执行，但是如果在触发器执行过程中出现未处理的异常，整个事务会被回滚。

# java - 在 Android 中设置可滚动的日期和时间选择器

> ID：10328448
> 
> 赞同：0
> 
> 时间：2012-04-26T06:44:39.013
> 
> 标签：java, android, date, time, calendar

我想在我的活动中制作日期时间选择器，它应该是可滚动的，不可点击意味着像 Iphone 中的钛一样。所以我尝试使用日期时间选择器但没有用。因此，如果有人有想法或任何源代码链接，请提供帮助。帮助赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:52:49.813

您可以在谷歌中搜索 android 的鼓选择器或日期滑块。

无论如何检查这个链接

[https://github.com/sys1yagi/AndroidPractice/tree/master/DrumPicker/trunk](https://github.com/sys1yagi/AndroidPractice/tree/master/DrumPicker/trunk)

# javascript - JavaScript中构造函数和作为构造函数调用的函数返回对象之间有什么区别？

> ID：10328449
> 
> 赞同：11
> 
> 时间：2012-04-26T06:44:39.863
> 
> 标签：javascript, function, constructor

我知道这不是推荐的方法，但是如果我声明以下函数，然后将它们作为构造函数调用，那么生成的对象之间会有什么区别（如果有的话）？

```
function Something() {
    this.foo = "bar";
}

function something2() {
    var that = {};
    that.foo = "bar";
    return that;
}

var x = new Something();
var y = new something2();
var z = something2(); 
```

`x`即,`y`和`z`这里有什么不同？

写构造函数不是`something2`更好的方法吗，因为不管你使用`new`与否都不会影响函数的结果？

BTW这里应该`something2`大写吗？（我认为不会因为 Crockford 如此坚持大写，因为函数会破坏全局命名空间......）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T06:49:46.490

简而言之：

```
new something2() instanceof something2 === false 
```

相关地，如果您扩展示例以使用原型属性

```
Something.prototype.method = function () { };
something2.prototype.method = function () { }; 
```

你会发现在后一种情况下原型没有被继承：

```
typeof (new Something()).method === "function"
type (new something2()).method === "undefined" 
```

* * *

真正的答案是你正在利用完全不同的底层机制。调用 with`new`调用[[[Construct]]](http://es5.github.com/#x13.2.2)机制，该机制涉及根据`.prototype`构造函数的属性设置 [[Prototype]] 属性。

但是在 [[Construct]] 算法的第 8--10 步中发生了一件有趣的事情：在设置一个新的空对象，然后附加它的 [[Prototype]] 之后，它对实际对象执行 [[Call]]构造函数，使用这个新的空加原型对象作为`this`. 然后，在第 9 步中，如果结果证明该构造函数返回了一些东西——它会丢弃`this`它花费所有时间设置的原型绑定、作为对象传递的对象！

注意：您可以通过以下方式访问对象的 [[Prototype]]（与构造函数的 不同`.prototype`）`Object.getPrototypeOf`：

```
Object.getPrototypeOf(new Something()) === Something.prototype // steps 5 & 6
Object.getPrototypeOf(new something2()) === Object.prototype // default 
```

* * *

回答一些元问题：

*   不，不要大写`something2`，因为它是工厂函数而不是构造函数。如果某些东西是大写的，那么它应该具有构造函数语义，例如`new A() instanceof A`.
*   如果您担心破坏全局命名空间的危险，您应该开始使用[严格模式](http://www.2ality.com/2011/01/javascripts-strict-mode-summary.html)，将其放在`"use strict";`文件的顶部。严格模式的许多不错的清理之一是`this`默认为`undefined`，而不是全局对象，因此例如调用构造函数而不使用`new`将导致构造函数尝试将属性附加到的那一刻出错`undefined`。
*   工厂函数（又名“闭包模式”）通常是构造函数和类的合理替代品，只要您 (a) 不使用继承；(b) 不构造该对象的太多实例。后者是因为，在闭包模式中，您将每个方法的新实例附加到每个新创建的对象，这对内存使用不利。IMO 闭包模式的最大收益是使用[“私有”变量](http://javascript.crockford.com/private.html)的能力（这是[一件好事](https://softwareengineering.stackexchange.com/questions/143736/why-do-we-need-private-variables)，不要让任何人告诉你：P）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:49:19.330

在第二种情况下，返回的对象没有从构造函数继承任何东西，所以这样使用它没有什么意义。

```
> var x = new Something();
> var y = new something2();
> var z = something2(); 
```

> 即这里的 x、y 和 z 有什么不同？

`x`继承自`Something`，既不继承，`y`也不`z`继承自`something2`。

> 写构造函数的方式不是更好，因为无论你是否使用 new 都不会影响函数的结果？

作为构造函数调用是没有意义的，`something2`因为它返回的对象不是分配给它`this`的继承自的新构造的对象`something2.prototype`，这是其他人在调用时可能期望得到的`new something2()`。

> 顺便说一句，something2 应该在这里大写吗？（我认为不会因为 Crockford 如此坚持大写，因为函数会破坏全局命名空间......）

不，因为将其称为构造函数有点毫无意义，因此将其描述为构造函数会产生误导。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:00:38.123

我想说最重要的是返回对象的原型。

```
 function Something() {
       this.foo = "bar";
  }

  Something.prototype = {
    // Something prototype code
    hello: function(){
     //...
    }
  }

  function something2() {
     var that = {};
     that.foo = "bar";
     return that;
  }

  something2.prototype = {
      // something2 prototype code
      greetings : function() {
      //...
      }
  }

  var x = new Something();
  var y = new something2();
  var z = something2();

  typeof x.hello === function // should be true
  typeof y.greetings === undefined // should be true
  typeof z.greetings === undefined // should be true 
```

换句话说，我会说你不是用 something2 来实例化对象，你是在创建从 Object 继承的纯粹的新对象。

1.  *当您使用new*关键字时，Something() 将为您提供“Something”类型的新对象。
2.  something2() 将为您提供“Object”类型的新对象，它将立即返回一个新的空对象。
3.  new something2 效率低下，因为您正在创建一个空白范围，从中创建一个新对象

    ```
    var that = {}; 
    ```

    这相当于

    ```
    var that = new Object(); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T06:56:24.810

调用函数作为构造函数（即使用 new `keyword`）运行以下步骤：

1.  创建一个新对象
2.  将该对象的原型设置为`prototype`函数属性中的对象
3.  在该对象的上下文中执行构造函数（即`this`是新对象）
4.  返回该对象（如果构造函数没有`return`语句）

因此，您的第二个解决方案将只返回一个具有属性“foo”的普通对象。但既不是`y`也不`z`是`instanceof Something2`，也不是从该原型继承。有这样的函数，是的，但它们不应该被称为构造函数（没有大写命名，没有调用`new`）。它们属于工厂模式。

如果您想要一个可以在没有 new 的情况下执行的构造函数，请使用该代码：

```
function Something(params) {
    if (! this instanceof Something)
         return new Something(params);
    // else use "this" as usual
    this.foo = "bar";
    ...
 } 
```

# c - 如何读取从文件中读取的特定行

> ID：10328455
> 
> 赞同：0
> 
> 时间：2012-04-26T06:45:03.273
> 
> 标签：c

我已经设法将文件中的所有行读取到一个 char 数组中，但是当我想读取特定行时，即第 254 行，如下例所示，我总是在文件的最后一行中获取数据。知道有什么问题。谢谢你。这是代码示例：

```
 while (fgets(line,2000,fp)!=NULL
{
 readData [n] = line;
 n++;
}
printf ("print line after %s\n",readData [254]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:47:38.250

您每次都在复制指针。所以最后`readData`数组的每个条目都将指向同一个内存。尝试复制数据：

```
readData[n] = strdup(line); 
```

并记住`free`何时完成。如果您没有`strdup`或不想使用它：

```
readData[n] = malloc(strlen(line) + 1);
strcpy(readData[n], line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:47:21.743

我猜“readData”是一个 char*s 数组，所以当你说`readData[n] = line`你总是将数组设置为相同的数据“缓冲区”时。

你需要一些更像

```
char buffer[numLines][colsPerLine];
char line[colsPerLine];
while (fgets(line,2000,fp)!=NULL
{
   strcpy(buffer[n], line); // copy contents of line into the buffer
   n++;
}
printf ("print line after %s\n",buffer[254]); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T06:47:33.073

您可以使用搜索指针将光标移动到第 no 行。然后应用阅读线。希望它会奏效。

# php - 如何使用 Highcharts 导出整个页面或 html 内容而不仅仅是图表？

> ID：10328457
> 
> 赞同：10
> 
> 时间：2012-04-26T06:45:28.067
> 
> 标签：php, javascript, jquery, image, highcharts

嗨，我的所有图表都可以很好地导出，highcharts 我正在为我的 php 项目获取图表

但问题是

我希望将 html 内容或整个页面与图表一起导入，而不仅仅是图表

有可能吗？

谁能帮我

或在这里显示一个示例小提琴[http://jsfiddle.net/YBXdq/](http://jsfiddle.net/YBXdq/)

我需要导出图表下方的文本

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T09:29:44.083

有很多直接和间接的方法可以实现这一点

*   使用 HTML 画布：[http ://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

*   使用`wkhtmltoimage`

例子

```
 exec('wkhtmltoimage --quality 50 http://www.bbc.com bbc.jpg'); 
```

*   使用`wkhtmltopdf`+`ImageMagic`

    -- 将网页转换为`pdf`使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)

    -- 转换`pdf`为`jpg` 使用 ImageMagic

例子

```
exec("convert a.pdf a.jpg"); 
```

*   使用 PHP [imagegrabwindow](http://www.php.net/manual/de/function.imagegrabwindow.php)和[imagegrabscreen](http://php.net/manual/de/function.imagegrabscreen.php)

例子

```
$browser = new COM("InternetExplorer.Application");
$handle = $browser->HWND;
$browser->Visible = true;
$browser->Navigate("http://localhost");

/* Still working? */
while ($browser->Busy) {
    com_message_pump(4000);
}
$im = imagegrabwindow($handle, 0);
$browser->Quit();

header("Content-Type: image/png");
imagepng($im);
imagedestroy($im); 
```

高级示例

-- 另请参阅[使用 PHP 获取网站截图](http://www.inkplant.com/code/website-screenshots-with-php.php)

对于可能的问题：[让 imagegrabscreen 工作](https://stackoverflow.com/questions/631449/getting-imagegrabscreen-to-work)

*   使用[Webshort](https://github.com/umpirsky/webshot)并从 php 调用它，`exec`如果你安装了 python

例子

```
exec("python webshot.py https://example.com/webshot/php example.png"); 
```

*   下载和使用[网站缩略图生成器](http://www.zubrag.com/scripts/website-thumbnail-generator.php)

例子

```
webthumb.php?url=http://www.google.com&x=150&y=150 
```

*   使用[切箱机](http://keepnote.org/boxcutter/)

例子

```
exec('boxcutter -f image.png'); 
```

*   [使用GrabzIt](http://grabz.it/api/php/)在 PHP 中捕获屏幕截图

例子

```
$grabzIt = new GrabzItClient("APPLICATION KEY", "APPLICATION SECRET");
$id = $grabzIt->TakePicture("http://www.google.com", "http://www.example.com/GrabzItHandler.php"); 
```

*   使用[wimg.ca](http://wimg.ca)

当前页面的示例

```
 http://wimg.ca/https://stackoverflow.com/questions/10328457/how-to-export-the-whole-page-or-html-content-with-highcharts-not-just-the-chart/10330701#10330701 
```

*   [TimThumb – PHP 图像调整器](http://www.binarymoon.co.uk/projects/timthumb/)

例子

```
 timthumb.php?src=http://www.google.com/&webshot=1 
```

我认为已经给出了足够多的例子

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T06:11:47.377

您可以尝试打印页面，或使用 php 文件函数制作 pdf 以获得所需的 html 内容。

或者你可以试试baba告诉的方法来获取图像:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T08:42:43.830

我找到了一个用于导出图表**（打印）的简单解决方法**

和

**我没有使用任何插件，只是简单的旧 css 和一些 javascript**

在我的情况下是

我想用页面的一些特定html内容打印图表

或者在我的情况下，我想删除**页眉、页脚和左侧菜单**

我不想显示按钮或不必要的内容

并且只显示页面内容、描述表和图表

所以这就是我如何实现它。

## **> CSS :-**

* * *

```
<style type="text/css">
@media print{
@page
        {
            size: auto;   /* auto is the initial value */
            margin: 0mm;  /* this affects the margin in the printer settings */
        }
  body{ background-color:#FFFFFF; background-image:none; color:#000000 }
  .navimainbg{ display:none;}
  .printhide{ display:none;}
  .usercontent-footer{ display:none;}
  .linkBTN{ display:none;}
  .userheader{ display:none;}
  .user-profile-left{ display:none;}
  #userbgcontent{ width:100%;}
}
</style> 
```

我们在这里专注于打印页面时隐含的打印 css

根据您的使用情况，通过其类或 ID 访问您不想打印的 div 或页面部分

例如

我不想显示按钮

```
 .linkBTN{ display:none;} 
```

可以通过javascript简单地调用。

## **Javascript :->**

* * *

```
<script type="text/javascript">

function printpage()
{

window.print()
}

<script type="text/javascript"> 
```

我们可以调用打印函数来打印页面减去我们不想通过单击按钮在我的例子中调用函数“printpage”打印页面的元素，因为你可以看到这个按钮在打印时也不会显示为 printhide 类显示打印时设置为无

```
<input title="Print a Printer Friendly Page" class ="printhide" type="button" value="Print this page" onclick="printpage()"> 
```

如果你想打印更多，它不是打印高图表以外的简单方法吗

**唯一的缺点是，有时由于缺少渲染图像的大小，当您想要将图像与某些内容一起显示时，图像会向下滑动。它将转到下一页。除了经过测试的工作。**

# asp.net - 如何在gridview中的单元格上提醒javascript函数

> ID：10328459
> 
> 赞同：1
> 
> 时间：2012-04-26T06:45:31.063
> 
> 标签：asp.net, gridview

`gridview`我禁用了我的特定单元格，`page load`如下所示

```
grdInvoice.Rows[grdInvoice.Rows.Count-1]
          .Cells[6].Enabled = false; 
```

现在我想为这个单元格应用一个 javascript 警报功能

我试过这个

```
grdInvoice.Rows[grdInvoice.Rows.Count-1]
          .Cells[6].Attributes.Add["onclick"]="f1();" 
```

我的功能如下

```
<script type="text/javascript">
function f1() {
    alert('no more rows found to copy');
} 
```

但对我不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:47:14.567

您可以设置如下属性。

```
grdInvoice.Rows[grdInvoice.Rows.Count - 1].Cells[6].Attributes.Add("disabled", "disabled");
grdInvoice.Rows[grdInvoice.Rows.Count - 1].Cells[6].Attributes.Add("onclick", "javascript:f1();"); 
```

试试这个..希望这会帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:36:28.980

您可以使用 RowDataBound 事件。像这样：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        int? index = Session["LastIndex"] as int?;

        if (index != null && e.Row.RowType == DataControlRowType.DataRow && e.Row.RowIndex == index)
        {
            e.Row.Attributes["onclick"] = "f1()";
        }
    } 
```

但是你应该在会话中有最后一个索引值。

我不知道您是如何绑定网格的，但一种选择是：

```
 List<ClassName> data = GetData(...);
    GridView1.DataSource = data;
    GridView1.DataBind();
    Session["LastIndex"] = data.Count - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:38:01.343

您可以尝试的一件事是您可以像这样为特定单元格分配一个唯一的 css 类

```
grdInvoice.Rows[grdInvoice.Rows.Count-1]
          .Cells[6].CssClass = "className"; 
```

[广告然后在页面加载后执行脚本（在此处](https://stackoverflow.com/questions/807878/javascript-that-executes-after-page-load)参考此链接）

使用 jQuery

```
$(document).ready(function(){ 
$(".className").live("click", function(){
alert('no more rows found to copy');
});
}); 
```

# java - 企业应用程序中的 ThreadLocal 使用

> ID：10328464
> 
> 赞同：14
> 
> 时间：2012-04-26T06:46:00.650
> 
> 标签：java, jakarta-ee, ejb, thread-local

如果我的 web 应用程序和 ejb 应用程序在同一台机器上（在同一个 JVM 上）并且所有 ejb 调用都是本地调用，那么`ThreadLocal`在将信息从 web 传递到 ejb 时使用会产生任何问题吗？

如果 ejb 调用是远程的，有什么解决方法吗？`ThreadLocal`信息是否可以从 Web 应用程序到 ejb 应用程序？`ThreadLocal`在这种情况下是否建议使用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T07:00:10.730

对于第一个问题，只要在每次调用结束时去掉 ThreadLocal 变量就没有问题。这很重要，因为容器（servlet 或 ejb）通常使用线程池并因此重用线程，这有两个影响：一个“调用”可能会看到来自先前调用的线程本地信息，以及如果您在不停止 JVM 的情况下从容器中删除应用程序有些类可能不会被垃圾回收，因为它们仍然被容器线程引用。因此，将数据放在 try / finally 块中的 threadlocal 中，并在 finally 部分中删除。

这是一篇文章，展示了一种处理问题的方法：[Web 应用程序中的 ThreadLocal](http://niklasschlimm.blogspot.com/2012/04/threading-stories-threadlocal-in-web.html)

对于第二个问题，因为数据是线程本地的，它不会随远程调用一起提供，您必须在接口中添加一个参数，在一侧提取线程本地数据并在另一侧重新创建它......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T10:19:42.137

使用 EJB 3.1 时，您可以使用 EJBContext 的[上下文数据在](http://docs.oracle.com/javaee/6/api/javax/ejb/EJBContext.html#getContextData%28%29)[EJBContext](http://docs.oracle.com/javaee/6/api/javax/ejb/EJBContext.html)中传递上下文信息。这只是一个.`Map<String,Object>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-03T07:14:40.917

不应在 EJB 上下文中使用 ThreadLocal。不能保证 EJB 方法调用都在同一个线程上（当然应该如此）。

在 EJB 中有一种不同的方法，称为[TransactionSyncrhonizationRegistry](http://docs.oracle.com/javaee/5/api/javax/transaction/TransactionSynchronizationRegistry.html)。有关详细信息，请参阅[说明/用法](http://www.adam-bien.com/roller/abien/entry/how_to_pass_context_in)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T07:01:03.223

> 所有 ejb 调用都是本地调用，使用 ThreadLocal 会产生任何问题吗？

不，你自己回答了你的问题。由于调用是本地的，它们在一个线程的上下文中执行。

> 如果 ejb 调用是远程的，有什么解决方法吗？

在远程调用的情况下，Java EE 容器将在另一个 JVM 中运行，它将产生自己的线程来处理传入的 RMI 请求，远程 Java EE 容器无法知道在其上声明的线程局部变量另一边。将其作为参数对象传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T06:51:16.590

这取决于你传递什么信息！第一个问题太笼统了。我建议在[这里](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)阅读与 ThreadLocal 相关的 JavaDoc 。

ThreadLocal 来自应用程序的服务器端，用于让线程安全地调用 Thread 对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T07:05:10.093

对于本地调用，`ThreadLocal`只要一切都在同一个线程中完成，应该可以正常工作。

对于可能在不同服务器上运行的远程调用，您将需要提出其他方法。要么将所有值作为参数传递（这将起作用，但会在代码中引入复杂性），要么使用分布式缓存之类的东西，例如[Hazelcast](http://www.hazelcast.com/)，它的功能类似于`HashMap`所有集群节点都可以访问的 global 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-03T11:56:37.400

`ThreadLocal`不能 100% 确定地在 Web 应用程序中使用。您根本无法保证一个线程将用于一个会话。在我看来，这可能会导致很难找到安全漏洞！

`ctx.getContextData()`对我不起作用，它总是返回`null`！

我也试过了`TransactionSynchronizationRegistry`，但我也得到`null`了。

唯一有效的是使用 JAAS 作为解决方法。但这不是一个好的解决方案。

# php - 在创建的 Joomla 模块中链接背景 CSS 图像

> ID：10328468
> 
> 赞同：0
> 
> 时间：2012-04-26T06:46:18.053
> 
> 标签：php, javascript, css, joomla, module

我最近创建了一个 Joomla 模块，它是一个滑块。唯一的问题是它通过 Background:Url CSS 属性加载图像，并且图像位于模块的文件夹中，但它似乎不想链接，除非我插入完整的 URL。

我注意到“baseurl ?>”是他们链接样式表的方式，但这似乎不想在 Background:Url CSS 属性上工作。

请提供任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:34:36.927

图片的 url 必须相对于 CSS 文件路径。

如果您的 CSS 文件位于*modules/mod_touchheader/css/style.css*，那么您的图像 url 必须是*url(../tmpl/images/h-slider-1.jpg)*。

# android - 我们可以为 android 应用程序进行静默更新吗？

> ID：10328471
> 
> 赞同：1
> 
> 时间：2012-04-26T06:46:32.927
> 
> 标签：android, auto-update, android-install-apk, silent-installer

有没有办法为企业应用程序进行自动静默更新？我们有一个仅适用于本地网络和 WEB 服务的应用程序。平板电脑通过 Wi-Fi 工作，但由于安全原因无法访问互联网。我们需要得到类似这样的功能：

1.  管理员对服务器进行了一些更新。
2.  应用程序下载文件并自动更新，无需用户进行任何额外操作。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:00:30.630

仅当设备已植根时，才可能在没有 android 市场的情况下进行此类升级，请参阅： [https ://stackoverflow.com/a/15085540/516188](https://stackoverflow.com/a/15085540/516188)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:18:47.963

这完全取决于您的要求。您无法使用新的 apk 文件进行更新，但您可以在后台下载文件而无需用户通知，如果您有嵌入式 Web 界面，您可以完全更改您链接/嵌入应用程序的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:53:07.983

您可以在后台下载您的应用程序 apk 文件 => 调用安装程序（使用服务）或使用 C2DM，但它**必须询问用户的**更新权限。google play 上的所有应用都是这样做的。也许你可以反编译google play并找到一些隐藏的权限。

# android - 在android中下载应用程序时如何获取声音

> ID：10328474
> 
> 赞同：0
> 
> 时间：2012-04-26T06:46:47.470
> 
> 标签：android, notifications

当应用程序在安卓手机中下载时，我想听到一些声音。

当我通过网络从 android 市场下载应用程序时，我想听到一些警报声。谁能建议我如何得到这个？

提前致谢

```
SoundActivity.java
------------------

    public class SoundActivity extends BroadcastReceiver {
        public void onReceive(Context context, Intent intent)
        {
          if("android.intent.action.DOWNLOAD_COMPLETED".equals(intent.getAction()))
          {
              String PATH_TO_FILE = "/mnt/sdcard/MLKDream_64kb.mp3"; 
            //   MediaPlayer player=MediaPlayer.create(this, R.raw.sirensound);
                  MediaPlayer player = new MediaPlayer();
                  try {
                      Log.v("play mpe","play mpe");
                       player.setDataSource(PATH_TO_FILE);
                       player.prepare();
                       player.start();
                 } catch (IllegalArgumentException e) {
                       // TODO Auto-generated catch block
                       e.printStackTrace();
                 } catch (IllegalStateException e) {
                       // TODO Auto-generated catch block
                       e.printStackTrace();
                 } catch (IOException e) {
                       // TODO Auto-generated catch block
                       e.printStackTrace();
                 }
          }

Manifest.xml
-------------
   <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sound"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver 
        android:name=".SoundActivity"
        android:exported="true"
        android:icon="@drawable/ic_launcher" >
        <intent-filter>
            <action android:name="android.intent.action.DOWNLOAD_COMPLETE" />
         </intent-filter>
     </receiver>

    </application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:50:00.320

下载完成后系统可能会有广播，只需制作一个接收该广播的应用程序并在广播到达时播放声音。

像这样：

```
public class DownloadChecker extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent)
    {
      if("android.intent.action.DOWNLOAD_COMPLETED".equals(intent.getAction()))
      {
         //play a sound here 
      }
    } 
```

}

在标签`Manifast.xml`内部试试这个`application`

```
<receiver 
        android:name=".DownloadChecker "
        android:exported="true"
        android:icon="@drawable/icon" >
        <intent-filter>
            <action android:name="android.intent.action.DOWNLOAD_COMPLETE" />
         </intent-filter>
     </receiver> 
```

我希望有效，我无法测试它

# c++ - 为什么我在希望控制台上加载 dll 时收到“无效的命令名称“MZ””？

> ID：10328490
> 
> 赞同：0
> 
> 时间：2012-04-26T06:48:05.880
> 
> 标签：c++, dll, tcl, swig

我有一个库，并且使用 swig 生成了相同的 tcl 绑定。如果我原来的 lib dll 是 xyz.dll，那么生成的 dll 就是 xyz_tcl.dll。但是当我尝试加载 dll 时，它会显示“无效的命令名称“MZ””。谁能告诉我这可能是什么原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:02:49.273

几乎可以肯定是 DLL的`MZ`前几个字节（它是文件格式的“幻数”）所以猜测你正在尝试做：

```
source xyz_tcl.dll 
```

那是行不通的。它包含与 Tcl 集成的编译 C 代码，但不是 Tcl 脚本。相反，您需要执行以下操作：

```
load xyz_tcl.dll 
```

当然，它*应该*被构建到一个包中（这是一个包含所需 DLL 和文件的目录`pkgIndex.tcl`），然后你可以这样做：

```
package require xyz 
```

（该`pkgIndex.tcl`文件包含有关如何在必要时使用其他文件定义包的说明`load`。`source`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T06:56:32.523

我认为某些东西（tcl？）正在尝试将 DLL 作为脚本执行 - Windows 可执行文件的前两个字节是“M”和“Z”。

由于历史原因，每个 Win32 可执行文件在实际 Win32 PE 标头之前都有一个小的 16 位 MS-DOS 标头，并且 16 位标头的签名字节是“MZ”。

# drupal - 如何在drupal中插入页面

> ID：10328494
> 
> 赞同：-1
> 
> 时间：2012-04-26T06:48:34.767
> 
> 标签：drupal, drupal-7

我已经在 drupal 中安装了时间线并启用了它。我创建了一个页面调用“mypage.php”，它从 mysql 读取数据并创建一个 xml 文件。然后我将它传递给 java 脚本，该脚本在时间线库的支持下在网页中创建时间线。

我无法在 drupal 中运行这个 mypage.php。如何将它添加到drupal？任何人都可以帮助解决这个问题。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:34:40.690

为什么你不使用模块而不是 php 文件。我认为页面模块最适合你。

# mysql - 如何为我的 mysql 启用 ssl

> ID：10328495
> 
> 赞同：2
> 
> 时间：2012-04-26T06:48:36.873
> 
> 标签：mysql, ssl, configuration, binary

我最近使用 apt-get 安装了 mysql。由于它可以安装的最高版本是mysql 5.1.X，所以它是这样做的。当我检查二进制文件时，它没有 SSL 支持。可能当时这个二进制文件可能没有用它编译。

现在我想在我的主服务器和服务器之间启用 SSL 复制。我怎样才能做到这一点。

```
Do I need to proceed with fresh binary installation which has SSL support..
OR
Do we have any work around to enable SSL to my existing installation. 
```

# android - 如何在Android中以编程方式获取铃声“/system/media/audio/ringtones”的路径？

> ID：10328497
> 
> 赞同：3
> 
> 时间：2012-04-26T06:48:44.573
> 
> 标签：android, path, directory, ringtone

默认情况下，我在 /system/media/audio/ringtones 有一些带有铃声的设备。我想以编程方式获取该路径。我的意思是我想以编程方式从我的设备获取铃声目录路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T07:37:21.813

从 Android 2.2 开始，您可以使用`DIRECTORY_RINGTONES`获取默认铃声目录

```
Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_RINGTONES) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:30:57.103

您应该检查[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)。getDefaultUri() 方法应该做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:49:33.763

如果您想使用铃声，请使用[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)，因为铃声可能存储在其他几个目录中。`RingtoneManager`为您提供设备中所有可能的铃声。还要检查[http://developer.android.com/guide/topics/data/data-storage.html#AccessingExtFiles](http://developer.android.com/guide/topics/data/data-storage.html#AccessingExtFiles)和[DIRECTORY_RINGTONES](http://developer.android.com/reference/android/os/Environment.html#DIRECTORY_RINGTONES)。

要直接回答您的问题，没有环境变量查询它，您将获得默认的铃声目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T09:29:50.857

```
Intent i =new Intent(Intent.ACTION_VIEW);

Uri u = Uri.withAppendedPath(MediaStore.Audio.Media.INTERNAL_CONTENT_URI, "1");

i.setData(u);

startActivity(i); 
```

# java - 客户端向服务器请求公共

> ID：10328501
> 
> 赞同：1
> 
> 时间：2012-04-26T06:49:10.047
> 
> 标签：java, swing, sockets, concurrency

//这是请求服务器将公钥发送给客户端的代码

```
package gameserver;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Scanner;
import java.net.Socket;
import java.io.*;
import javax.swing.JFrame;
import java.awt.*;
import javax.swing.*;

public class GameClient  extends JFrame implements ActionListener {

    private JButton b1 = new JButton("press");

    public GameClient () {
       GridLayout layout = new GridLayout(3, 0, 0, 0);
       setLayout(layout);
       setSize(320,150);

       add(b1);
       b1.addActionListener(this);

    }

    public static void main(String args[]) {
      java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                 GameClient frame = new GameClient();
                 frame.setVisible(true);
            }
      });
    }  

   public void actionPerformed(ActionEvent ae) {
       if (ae.getSource() == b1) {
            Socket socket = null;
            ObjectInputStream in = null;
            ObjectOutputStream out = null;

            Scanner console = new Scanner(System.in);

            try {
                socket = new Socket("127.0.0.1", 12346);
                in = new ObjectInputStream(socket.getInputStream());
                out = new ObjectOutputStream(socket.getOutputStream());
                Object result;
                result = in.readObject();

                System.out.println(result);
            } catch (IOException ioe) {
                ioe.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                try {
                    if (in != null) {
                        in.close();
                    } 
                    if (out != null) {
                        out.close();
                    }
                    if (socket != null) {
                        socket.close();
                    }
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }
            }           
       }

   } 
} 
```

//服务器代码，客户端连接时将公钥发送给客户端

```
package gameserver;

import java.io.*;
import java.net.*;
import java.security.*; 
import javax.crypto.*; 

public class GameServer {
    public static void main(String arg[]) {
        try {
            ServerSocket ss = new ServerSocket(12346);

                        while(true) {
            Socket s = ss.accept();
            ClientHandler ch = new ClientHandler(s);
                        ch.start();

                        }
        }
        catch(IOException ioe) {
            ioe.printStackTrace();
        }
    }
}

class ClientHandler extends Thread  {

    Socket socket;
    KeyPair keyPair = null;

    public ClientHandler(Socket socket)  {
        this.socket = socket;

    }

    public KeyPair genKeyPair () {

        try {
            KeyPairGenerator keyGen = KeyPairGenerator.getInstance("RSA"); 
            keyGen.initialize(1024); 
            keyPair = keyGen.generateKeyPair(); 
            //PrivateKey privateKey = keyPair.getPrivate();
            //PublicKey publicKey = keyPair.getPublic();

        } catch (NoSuchAlgorithmException e) {
            System.out.println(e.getMessage());
        }   
        return keyPair;
    }

    public void run() {
        try {             

            ObjectInputStream Ois = new ObjectInputStream(socket.getInputStream());               
            ObjectOutputStream Oos = new ObjectOutputStream(socket.getOutputStream());

            keyPair = genKeyPair ();
            PublicKey publicKey = keyPair.getPublic();
            Oos.writeObject(publicKey);

            socket.close();
        } catch(IOException ioe) {
            ioe.printStackTrace();
        }
    }

} 
```

问题是，当我按下按钮时，客户端似乎没有连接到服务器，什么也没有收到，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:03:42.607

您的代码在此行被阻止：

```
 ObjectInputStream Ois = new ObjectInputStream(socket.getInputStream()); 
```

从文档

> 创建一个从指定 InputStream 读取的 ObjectInputStream。从流中读取序列化流标头并进行验证。此构造函数将阻塞，直到相应的 ObjectOutputStream 已写入并刷新标头。
> 
> 如果安装了安全管理器，则此构造函数将在由覆盖 ObjectInputStream.readFields 或 ObjectInputStream.readUnshared 方法的子类的构造函数直接或间接调用时检查“enableSubclassImplementation”SerializablePermission。

使固定：

改变你的

```
ObjectInputStream Ois = new ObjectInputStream(socket.getInputStream());               
ObjectOutputStream Oos = new ObjectOutputStream(socket.getOutputStream()); 
```

到

```
ObjectOutputStream Oos = new ObjectOutputStream(socket.getOutputStream());
ObjectInputStream Ois = new ObjectInputStream(socket.getInputStream()); 
```

# android - 在android中管理HTTP响应

> ID：10328507
> 
> 赞同：1
> 
> 时间：2012-04-26T06:49:46.380
> 
> 标签：android, http, android-2.3-gingerbread

我正在从 android 中的 AsyncTask 向服务器发送 HTTP 发布请求发布请求。

我在管理响应方面面临的问题。这里我是如何阅读回复的。

```
HttpEntity entity =response.getEntity();
if (entity != null) {

    DataInputStream in = new DataInputStream( entity.getContent());
    String str;
    while (( str = in.readLine()) != null){

    Log.e("Debug","Server Response second url"+str); 

 }
   in.close();
} 
```

问题是我得到的响应是零散的，但我希望它们是一体的

*当前响应*

```
 Server Response second url
 Server Response second url<header><status>Success</status><message>Check the Numbers:
 Server Response second url123456.</message><vbal>5005</vbal></header> 
```

*预期响应*

```
<header><status>Success</status><message>Check the Numbers:123456.</message><vbal>5005</vbal></header> 
```

如果我将它变成一件，我可以轻松解析 xml 响应并获取所需的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:55:43.320

这应该适合你：

```
StringBuilder sb = new StringBuilder();
String str;
while ((str = in.readLine()) != null) {
    sb.append(str);
}
in.close();
str = sb.toString(); //here you have the string you need.
Log.e("Debug","Server Response second url" + str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:58:31.400

如果您有 Apache 公共资源：

```
Reader in = new InputStreamReader(entity.getContent(), "UTF-8");

StringWriter writer = new StringWriter();
IOUtils.copy(in, writer);

String str = writer.toString(); 
```

除此以外，

```
final char[] buffer = new char[0x10000];
StringBuilder out = new StringBuilder();
Reader in = new InputStreamReader(entity.getContent(), "UTF-8");

try {
    int read;

    do {
        read = in.read(buffer, 0, buffer.length);
        if (read > 0)
            out.append(buffer, 0, read);
    } while (read >= 0);
} finally {
  in.close();
}

String str = out.toString(); 
```

# android - 使活动等待特定时间段

> ID：10328509
> 
> 赞同：0
> 
> 时间：2012-04-26T06:49:53.323
> 
> 标签：android, android-activity

我的应用程序活动中有以下代码片段。

如果用户是第一次登陆活动，那么唯一会发生的事情就是将布尔变量更改`shouldSleep`为`true`.

此后，`else`将执行包含**每 60 秒****生成的`notification`**部分。

但主要问题是，如果我执行此代码，则活动***永远不会***显示，因为它一直在 else 部分循环，因此继续休眠。

我想要的是剩余的应用程序应该每 60 秒正常运行一次`else`，这个方法的一部分应该被执行。
我想这与它有关，`AsyncTask`但我对此没有太多了解。

知道怎么做吗？在此先感谢您的帮助。

```
boolean shouldSleep=false;
private void ShowNotification() 
{
    //DO SOME TASK

    if (shouldSleep) 
    {
        Thread.sleep(60000);
        //DO SOME TASK
    } 

    else
   {
        shouldSleep = true;
   }

        /** Calling the method recursively so that it always runs. */
        ShowNotification();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:58:29.360

也许您可以使用 Timer 对象：

```
new Timer().schedule(new TimerTask() {
    @Override
    public void run() {
        //This code is run all 60seconds
        myBooleanVar = true;
        //If you want to operate UI modifications, you must run ui stuff on UiThread.
        Activity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                Activity.this.changeUiStuff();
            }
        });
    }
}, 60000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:58:49.457

只需使用[Timer](http://developer.android.com/reference/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)。您可以每 60 秒运行一次任务，而不是线程方法：

```
new Timer().schedule(task, delay, period); 
```

期间 = 60*1000

# android - 如何在 EditText 中执行验证

> ID：10328516
> 
> 赞同：0
> 
> 时间：2012-04-26T06:50:14.353
> 
> 标签：android, android-edittext

我必须`EditBox`检查用户输入的号码是否正确。为此，我想调用这样一个事件，该事件允许用户在`EditBox`数字正确时输入数字，否则，如果数字不正确，则不允许用户输入`EditBox`. 怎么做？任何例子都会对我有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T06:52:29.290

在其 beforeTextChangedMethod() 中使用`onTextChangedListener()`和验证 .. 像这样的东西..

```
 ((EditText)findViewById(R.id.et_testo)).addTextChangedListener(new TextWatcher() {

    public void afterTextChanged(Editable s) {
        ((TextView)findViewById(R.id.numcaratteri)).setText(String.format(getString(R.string.caratteri), s.length()));

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // Validate here

    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub

    }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T07:17:57.117

```
final Pattern pattern = Pattern.compile("[0-9]");
editText.addTextChangedListener(new TextWatcher() {

    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
        Matcher matcher = pattern.matcher(s);
        if (matcher.find())
        {
            s.replace(0, s.length(), s.toString().replaceAll("[0-9]", ""));
        }
    }

    public void beforeTextChanged(CharSequence s, int start,
            int before, int count) {
        // TODO Auto-generated method stub
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T06:56:42.837

您将不得不使用[TextWatcher](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)。

你可以去[这里](http://blog.donnfelker.com/2011/11/23/android-validation-with-edittext/)。这里也给出了例子，你可以参考一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:18:44.547

您可以使用 2 种方式
1\. textwatcher
2\. Inputfilter
我附上了包含两者的代码

```
public class MainActivity extends Activity {   
EditText editTxt;  
private TextView regresult;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
    editTxt =(EditText)findViewById(R.id.editID);
    regresult = (TextView)findViewById(R.id.txtID);
    String urName=editTxt.getText().toString();

    editTxt.setFilters(new InputFilter[]{new DecimalDigitsInputFilter()});      
    editTxt.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {    
        }           
        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
        }           
        @Override
        public void afterTextChanged(Editable s) {
              if (editTxt.getText().toString().matches("(^([0-9]{0,3})?)(\\.[0-9]{0,1})?$"))
                {
                    regresult.setText("");
                }
                else
                {
                    regresult.setText("invalid number");
                }
        }
    });
}}  

class DecimalDigitsInputFilter implements InputFilter
{   
Pattern mPattern;

public DecimalDigitsInputFilter()
{
    mPattern = Pattern.compile("(^([0-9]{0,2})?)(\\.[0-9]{0,1})?$"); //here u can give your required pattern
}
@Override
public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
    // TODO Auto-generated method stub
     Matcher matcher = mPattern.matcher(dest);
        if(!matcher.matches())
        {
            return "";
        }
        return null;
}} 
```

# android - android activty start from service 总是显示甚至重新启动应用程序。重新启动应用程序时需要启动第一个活动

> ID：10328519
> 
> 赞同：1
> 
> 时间：2012-04-26T06:50:37.473
> 
> 标签：android, service, android-activity

我有一个活动 A. 现在我开始使用服务

```
startService(new Intent(A.this,Service.class)); 
```

现在经过一段时间（因为它在后台执行某些任务，您可以在手机中的任何位置移动，所以让我们留在手机主屏幕上）服务停止并启动另一个显示结果的活动 B（现在 B 在顶部）。当前我在屏幕 B 上。我的问题是当我在 B 上并按返回时，它不显示活动 A。即使我从应用程序存在（通过后退按钮），我再次启动应用程序它显示活动 B。因为我的开始活动是 A，所以我想展示 A 而不是 B。请指导我如何做到这一点。

# shared-libraries - GNU/Libtool 交叉编译

> ID：10328521
> 
> 赞同：1
> 
> 时间：2012-04-26T06:50:42.690
> 
> 标签：shared-libraries, gnu, cross-compiling, autotools, libtool

我有一个非常基本的问题`GNU/Libtool`。我的项目是由构建`GNU/autotools`并包含由构建的共享对象`GNU/Libtool`。我想`i386`在机器上编译共享对象`x86-64`，所以我这样做：

```
$ ./configure --build=i386
checking for a BSD-compatible install... /usr/bin/install -c
...
checking whether to build shared libraries... no
checking whether to build static libraries... yes
...
config.status: executing depfiles commands
config.status: executing libtool commands
$ 
```

配置脚本告诉我不支持共享库，`make`命令失败。如何解决这个交叉编译问题？

[我应该在Libtool 手册](http://www.gnu.org/software/libtool/manual/libtool.html)中找到答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:45:08.940

`--build`通常用于[加拿大交叉](http://en.wikipedia.org/wiki/Cross_compiler#Canadian_Cross)编译之类的东西。您可能想要使用该`--host`选项。您尚未指定系统类型，但如果`./config.guess`给出如下内容：

`x86_64-apple-darwin`或者`x86_64-pc-linux-gnu`

然后你会指定

`--host=i386-apple-darwin`或者`i386-pc-linux-gnu`

此外 - 您可能需要设置一些编译器标志来强制生成 32 位代码。例如，

`env CC="gcc -m32" ./configure --host=....`

通常，该`-m32`选项就足够了 - 您无需为该`--host`选项而烦恼。

# hadoop - Map Reduce - 无法获得正确的密钥

> ID：10328523
> 
> 赞同：1
> 
> 时间：2012-04-26T06:50:48.067
> 
> 标签：hadoop, mapreduce

嗨，我正在编写 map reduce 代码来查找最高温度。问题是我得到了最高温度但没有相应的钥匙。

```
public static class TemperatureReducer extends Reducer<Text,IntWritable,Text,IntWritable>{

Text year=new Text();

int maxTemperature=Integer.MIN_VALUE;
    public void reduce(Text key, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {

        for(IntWritable valTemp:values) {
            maxTemperature=Math.max(maxTemperature, valTemp.get());
        }

        //System.out.println("The maximunm temperature is " + maxTemperature);
        context.write(year, new IntWritable(maxTemperature));
    }
} 
```

映射器想象

```
1955  52
1958  7
1985  22
1999  32 
```

等等。

它正在覆盖密钥并打印所有数据。我只想要最高温度和年份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:02:21.110

我发现您的代码示例有一些问题：

1.  重置reduce方法中的maxTemperature（作为第一条语句），此时你有一个错误，它会输出所有前面的键/值看到的最高温度

2.  你在哪里配置的内容`year`？实际上你不需要，只需调用`context.write(key, new IntWritable(maxTemperature);`，因为输入键是年份

3.  您可能想要创建一个 IntWritable 实例变量并重新使用它，而不是在写出输出值时创建一个新的 IntWritable （这是一个效率问题，而不是您的问题的潜在原因）

# c# - 如何使用正则表达式找到文本文件中的每个特定字符串

> ID：10328534
> 
> 赞同：0
> 
> 时间：2012-04-26T06:51:53.477
> 
> 标签：c#, regex

我需要搜索并获取“”的每个实例`# XXX YYY`，另一个示例是“ `# LOL foo`”或“#HAHALOL omgpls”（对不起，我缺乏想象力：P。如果我可以在文本文件中获取搜索中所有命中的索引基于此会很好。

在一个文本文件中。我已经尝试过几次正则表达式，但我似乎无法让它工作。

“#”总是在那里，然后是一个空格，然后是一个未知长度的字符串，但通常少于 5 个字符。然后再次出现一个空格，然后再次出现长度未知的相同字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:54:35.960

试试这个正则表达式

```
#\s\w+\s\w+ 
```

例子

```
bool ok = System.Text.RegularExpressions.Regex.IsMatch("# XXX YYY", @"#\s\w+\s\w+");

\s  --> space
\w  --> any word character
+   --> variable length 
```

请参阅此处的[快速参考](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

编辑：

```
MatchCollection matches = Regex.Matches("abcde # XXX YYY  abcde", @"#\s\w+\s\w+");
foreach(Match  m in matches)
{
    string value = m.Value;
    int indexOfInput = m.Index;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:14:05.963

如果您在句子中只谈论几个单词或一个单词，那么您必须匹配以下模式

```
"#aaaa"
"#aa aa"
"#aa      aaaaa" 
```

正确的正则表达式必须是这样的：

```
"#\w+ ?\s?\w+" 
```

这匹配：

```
\w+ - 1-N words
?\s - presence or absence of a space after first word
?\w+ - presence or absence of a second word with 1-N number of characters 
```

# python - 如何获得二维计数器的长度

> ID：10328537
> 
> 赞同：-1
> 
> 时间：2012-04-26T06:52:35.053
> 
> 标签：python

建立计数器：

```
class Counters:
    def __init__(self,cats)
        self.form = collections.defaultdict(collections.Counter) 
```

我得到第一个维度的长度：

```
len(counters.form.items()) 
```

如何获得第二维的长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:08:39.447

如果你想在 python 中使用二维数组，你应该这样实现它：

```
x = 2
y = 3
nestedArray = [[0]*y for a in xrange(x)] 
```

那么数组长度将是 x*y。

或者更好的是，**使用 classes**：

```
class NestedArray(object):
    def __init__(self, x, y, defaultValue=0):
        self.x = x
        self.y = y
        self.array = [[defaultValue]*y for a in xrange(x)]

    def __len__(self):
        return self.x * self.y

    def __getitem__(self, key):
            return self.array[key]

    def __setitem__(self, key, value):
            self.array[key] = value 
```

# java - 如何为 AppEngine 实体添加创建时间

> ID：10328540
> 
> 赞同：2
> 
> 时间：2012-04-26T06:53:05.420
> 
> 标签：java, google-app-engine, objectify

我在 AppEngine 上使用 Objectify 来持久化实体。

在几个实体中，我想存储creationTime 和lastUpdateTime。

我的意图是在第一次创建实体时将 creationTime 添加到实体中。而 LastUpdate 时间应该更新，只要实体更新。

对于 lastUpdateTime，我可以轻松地使用`@PrePersist`附加挂钩来修改 lastUpdateTime。

但是每当我对实体进行更新时，我都想保留creationTime。

现在一种解决方案是获取 creationTime，然后将其添加到我的实体中。

有什么方法我不必在每次保存之前获取 creationTime ？

我尝试了组合，`@NotSaved(IfNull)`然后将 creationTime 设置为 null 希望 Objectify 会忽略这一点，但实际行为是它将在数据存储上设置 creationTime=null。

作为参考，我的实体如下所示：

```
public class TestEntity {
  @Id
  Long id;
  Date creationTime;
  Date lastUpdateTime;
  String mutableField;
  ...
  // Constructor1
  public TestEntity(Long id, Date date, String mutableField) {
    this.id = id;
    creationTime = date;
    lastUpdateTime = date;
    this.mutableField = mutableField;
  }

  // Constructor2
  public TestEntity(Long id, String mutableField) {
    this.id = id;
    lastUpdateTime = new Date();
    this.mutableField = mutableField;
  }
} 
```

编辑1：
对不起。我认为我的问题不完整。我修改了我的 TestEntity 定义。让我们假设这个 TestEntity 包含两个不可变字段（id，creationTime）和两个可变字段（lastUpdateTime，mutableField2）。

现在根据上下文，有可能这五个字段都发送给客户端，然后客户端更新 mutableFields 并发送更新可变字段的请求。

为了讨论的简单，让我们假设使用 Session 和其他一些方式（例如 NameSpace），我们可以确保允许 User 修改这个实体。

现在我的意图是执行以下操作：
* 第一次创建实体时，使用构造函数1。
* 当客户端请求这个实体时，服务器发送（id 和 mutablefield）。
* 客户端发送请求以使用 mutableField 的新值和 Id 更新实体。
* 现在在服务器端，我想在不丢失创建时间的情况下更新可变字段。

现在这可以通过首先从 DataStore 中获取实体，然后更新 mutableField 并再次持久化来完成。我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:59:41.133

使用您的构造函数。

```
public class TestEntity {
    public TestEntity(...your normal init params...) {
        creationTime = new Date();
    }
} 
```

# grails - Grails 集成测试是否符合其名称？

> ID：10328542
> 
> 赞同：4
> 
> 时间：2012-04-26T06:53:09.100
> 
> 标签：grails, integration-testing, grails-orm

有时我会遇到一个问题，即名称以“IntegrationTests”结尾的 Grails 集成测试不起作用，并出现异常，表明 GORM 方法尚未添加到域类中。将这些测试重命名为“*IntegrationTest”（最后没有 s）后，它们工作正常。

一个简短的例子：

```
class MyIntegrationTests {
    @Test
    void myTest() {
        assert MyDomainClass.count() == 0
    }
} 
```

将失败并出现以下异常：

```
Failure:  myTest(de.myproject.MyIntegrationTests)
  groovy.lang.MissingMethodException: No signature of method: de.myproject.MyDomainClass.count() is applicable for argument types: () values: []
Possible solutions: count(), ident(), print(java.io.PrintWriter), print(java.lang.Object), getCount(), wait()
at de.myproject.MyIntegrationTests.myTest(MyIntegrationTests.groovy:9) 
```

将 MyIntegrationTests 重命名为 MyIntegrationTest 后，测试通过。

根据测试的名称，是否发生了某种魔术？我在 Grails 文档中找到的只是：“测试也可以使用 Test 的后缀而不是 Tests。”有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T06:38:25.850

我最终自己找到了“*Test”和“*Tests”行为不同的原因：不同的后缀改变了测试运行的顺序。更糟糕的是，确切的顺序取决于平台。因此，我的测试在本地 (OSX) 以不同于我的 CI 机器 (Linux) 的顺序运行，从而产生了不同的结果。

但是，为什么以某种顺序发生异常是一个完全不同的问题，我（还）还没有弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:59:27.520

只要文件在`integration`文件夹中，这应该可以正常工作。你确定你没有在`unit`测试文件夹中，然后将它移动到`integration`重命名的文件夹中吗？或者您可能正在使用 intellij 并且您进行了“junit”测试而不是“grails”？

您遇到的错误似乎暗示 grails 在运行测试时没有启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:40:24.643

如果没有后缀，您的测试将不会执行`Tests`。

复制自 Grails 文档主页 (http://grails.org/doc/latest/guide/testing.html)：

> 默认的类名后缀是 Tests，但从 Grails 1.2.2 开始，也支持后缀 Test。

j-

# android - 应用程序在 Android 2.1 及更低版本上崩溃（NullPointer 异常）

> ID：10328546
> 
> 赞同：0
> 
> 时间：2012-04-26T06:53:34.353
> 
> 标签：android, nullpointerexception, android-tabhost

我有一个带有以下 onCreate 方法的 FragmentActivity，它似乎在使用 Android 2.1 或更低版本的移动设备上崩溃。关于可能导致此错误的任何想法？

启动此活动时引发的异常：

```
04-25 20:00:41.834: E/AndroidRuntime(381): Uncaught handler: thread main exiting due to  uncaught exception
04-25 20:00:41.877: E/AndroidRuntime(381): java.lang.NullPointerException 
04-25 20:00:41.877: E/AndroidRuntime(381):  at    android.widget.TabHost.dispatchWindowFocusChanged(TabHost.java:295)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:661)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:661)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:661)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:661)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1819)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.os.Looper.loop(Looper.java:123)
04-25 20:00:41.877: E/AndroidRuntime(381):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-25 20:00:41.877: E/AndroidRuntime(381):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 20:00:41.877: E/AndroidRuntime(381):  at java.lang.reflect.Method.invoke(Method.java:521)
04-25 20:00:41.877: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-25 20:00:41.877: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-25 20:00:41.877: E/AndroidRuntime(381):  at dalvik.system.NativeStart.main(Native Method) 
```

我的 FragmentTabs 课程的一部分

```
public class FragmentTabs extends SherlockFragmentActivity
{
protected static final int RESULT_CLOSE_APPLICATION = 666;
protected static final int RESULT_RESET_USER = 667;
LoginController loginControl;
Context ctx;
Fragment lastFragment;
int initRun;
boolean isRoot;

/**
 * Decklare tabs and associate them with their respective initial fragments.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_tabs);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayShowHomeEnabled(false);
    bar.setDisplayShowTitleEnabled(false);
    ActionBar.Tab tabA = bar.newTab().setText("Forside");
    ActionBar.Tab tabB = bar.newTab().setText("Indstil");
    ActionBar.Tab tabC = bar.newTab().setText("Mere");

    tabA.setTabListener(new MyTabsListener(new FrontpageFragment()));
    tabB.setTabListener(new MyTabsListener(new SettingsFragment()));
    tabC.setTabListener(new MyTabsListener(new MoreFragment()));

    bar.addTab(tabA);
    bar.addTab(tabB);
    bar.addTab(tabC);

} 
```

我尝试了[此处](https://stackoverflow.com/questions/8449007/android-tabhost-nullpointer)提供的答案，但我认为该解决方案不适用于我的应用程序。我确实认为它与“标签栏”有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:10:17.030

一种解决方法可能是扩展 Android 提供的 TabHost 并检查 mCurrentView 是否为空，然后在布局 xml 中引用扩展类。

FixedTabHost.java：

```
package org.test.view;
public class FixedTabHost extends TabHost{

    public FixedTabHost(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public FixedTabHost(Context context) {
        super(context);
    }

    @Override
    public void dispatchWindowFocusChanged(boolean hasFocus) {
        // API LEVEL <7 occasionally throws a NPE here
        if(getCurrentView() != null){
            super.dispatchWindowFocusChanged(hasFocus);
        }

    }

} 
```

布局.xml：

```
<org.test.view.FixedTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

</org.test.view.FixedTabHost> 
```

确保 xml 标记包含您的 FixedTabHost.java 的包！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:26:34.063

我有同样的问题。虽然我最终无法解决它，但我至少已经有了一些可能会有所帮助的提示：

在 Android 2.1 中，TabHost.dispatchWindowFocusChanged 方法尚未检查 mCurrentView 的空值：（来自 Android 源 v2.1 中的 TabHost.java）

```
@Override
public void dispatchWindowFocusChanged(boolean hasFocus) {
    mCurrentView.dispatchWindowFocusChanged(hasFocus);
} 
```

在 Android 2.2 及更高版本中，已插入此空值检查：（来自 Android 源 v2.2 中的 TabHost.java）

```
@Override
public void dispatchWindowFocusChanged(boolean hasFocus) {
    if (mCurrentView != null){
        mCurrentView.dispatchWindowFocusChanged(hasFocus);
    }
} 
```

我不知道为什么 mCurrentView 在这里为空。但这至少解释了为什么它只发生在 Android 2.1 而不是 2.2+。

# fedora - 创建适用于 upstart 和 systemd 的 fedora rpm？

> ID：10328553
> 
> 赞同：0
> 
> 时间：2012-04-26T06:53:58.430
> 
> 标签：fedora, rpm, upstart

我已经建立了一个服务，我想通过 rpm 分发它，并且应该在不同的 Fedora 版本上工作。由于它是一项服务，它应该与系统集成，因此可以执行以下操作：

```
$ service myapp start 
```

问题是fedora在版本9 到14 中使用了**upstart** ，从15 开始使用**systemd 。**我可以为这两个系统执行此操作，但我不确定如何正确打包它。

我想我必须为 Fedora 版本构建不同的 rpm。唯一不同的是要复制到不同位置的一些文件。

我应该如何处理这些差异？在 .spec 文件或 Makefile 中？还是应该使用两个不同的 .spec 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:01:10.377

在规范文件中执行此操作。为 upstart 和 systemd 脚本使用单独的源，并[根据所构建的 Fedora 版本](https://fedoraproject.org/wiki/Packaging:DistTag)包含适当的脚本。因此，单个规范文件可以处理这两种情况。

# c++ - 在函数调用上调用 sizeof 会跳过实际调用函数！}

> ID：10328554
> 
> 赞同：7
> 
> 时间：2012-04-26T06:54:02.747
> 
> 标签：c++, sizeof

我碰巧偶然发现了这段代码。

```
int x(int a){
    std::cout<<a<<std::endl;
    return a + 1;
}

int main()
{
    std::cout<<sizeof(x(20))<<std::endl;
    return 0;
} 
```

我预计它会打印 20，然后是 4。但它只打印 4。为什么会这样？优化具有副作用（打印到 IO/文件等）的功能不是不正确吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T06:56:11.900

`sizeof`是编译时运算符，并且从不计算操作数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T06:56:02.233

`sizeof`实际上是一个运算符，它在编译时进行评估。

编译器可以评估它，因为返回类型的大小`x`是固定的；它在程序执行期间不能改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T06:59:35.337

`sizeof()`给出数据类型的大小。在您的情况下，它不需要调用函数来获取数据类型。

我怀疑 sizeof 也在编译时而不是运行时做它的业务......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T07:00:24.200

让我引用 c++03 标准，#5.3.3。

> sizeof 运算符产生其操作数的对象表示中的字节数。**操作数要么是一个未计算**的表达式，要么是 一个带括号的类型 ID。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T06:56:15.603

sizeof 的结果是在 C++ 的编译时间内计算的。所以有对 x(20) 的函数调用

# iphone - 是否可以将单词包装在 UITableViewSectionIndex 中？

> ID：10328561
> 
> 赞同：8
> 
> 时间：2012-04-26T06:54:34.723
> 
> 标签：iphone, objective-c, ios, uitableview

我想将单词包装在 UItableView 右侧显示的部分索引中。

问题是，如果字长增加，部分索引宽度也会增加，表格视图单元格内容视图大小减小。我不想显示部分索引数组对象的子字符串。因为我想在部分 i 中显示整个单词必须把它包起来。

```
-(NSArray*) sectionIndexTitlesForTableView:(UITableView *)tableView
{
    NSMutableArray *array = [[NSMutableArray alloc] init];

    for (int i = 0; i <[keys count]; i++) {
        NSString *str = [self.keys objectAtIndex:i];
           [array addObject:str];
    }

    NSArray *a =[NSArray arrayWithArray:array];
    [array release];
    return a;
} 
```

sectionIndextitle 方法返回的数组中的对象很长，我想换行。

有谁知道怎么做？

![在此处输入图像描述](../Images/1ae351b564cdfdc49ec2ed0dceddc991.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:11:07.410

您只能将自己的“部分索引视图”创建为自定义 UIView

这样做很容易

只需计算你的 tableview 的高度，计算你的部分的数量

然后在上面画出你的章节标题

```
- (void)drawRect:(CGRect)rect 
```

然后检测触摸事件

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

计算你触摸了哪个部分，然后调用 tableview 方法

```
- (void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated; 
```

然后把它放在你的tableview上，轻松完成！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:34:24.903

It seems that your answer is no but the following should solve the problem behind your question.

I would use this function instead tableView:viewForHeaderInSection: on the UITableViewDelegate protocol. More information can be found in the documentation here [UITableViewDelegate Docs](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html). Note – tableView:heightForHeaderInSection: must also be implemented. This combination of functions will allow you to return a view with a UILabel subview that has numberOfLines set to 0, i.e. as many as necessary, and the text set to whatever value you need.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:15:49.703

只需`str`在添加之前检查'' `NSMutableArray`，它是否有一个或多个单词？并选择您想要的范围并将其添加到您的数组中..

用于`NSmakeRange`制作要在每个部分的索引中显示的字符范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:01:23.873

不能将节索引包装到多行。这在默认 UI 中没有意义。自定义标题是完成此任务的最佳选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T09:17:44.970

为部分创建自定义标题标题。在那里，您可以使用标签并根据标题的长度为其分配行数。您还需要相应地设置节标题的高度。

# javascript - youtube 视频无法在 Iphone 上连续播放

> ID：10328563
> 
> 赞同：1
> 
> 时间：2012-04-26T06:54:53.897
> 
> 标签：javascript, iphone, api, youtube, web

我正在使用 Youtube Javascript API 在 iphone web 上编程。我有一个这样的视频列表

```
var playlist = "9Adbr-lipP8,OCK5FX0Y-7A,0k2Zzkw_-0I";

function onPlayerReady(event) 
{
if (player) 
    {
        try 
        {
            player.loadPlaylist(playlist);

        }
        catch (err) {}
    }
} 
```

播放器也播放第一个视频，但无法播放第二个视频。我看到第二个开头有全尺寸广告（如果你在 Youtube 网站上打开它）。这会导致错误：

`Your browser does not currently recognize any of the video formats available. Click here to visit our frequently asked questions about HTML5 video.`

我的源代码在 Android 中运行良好，只有 Iphone 有问题。如果播放列表只有一个该视频，则效果很好。也许 QuickTime 不支持广告（我不知道）。

如果有任何帮助，我将不胜感激。谢谢

# google-chrome - 从 Chrome 中模拟有限的带宽？

> ID：10328568
> 
> 赞同：213
> 
> 时间：2012-04-26T06:55:21.267
> 
> 标签：google-chrome, google-chrome-extension, bandwidth-throttling

有没有办法可以在 Chrome 中模拟各种连接速度？

我需要能够以不同的速度检查[http://localhost 。](http://localhost)

我知道有独立的应用程序可以做到这一点，但我宁愿在 Chrome 中做到这一点。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-11-01T19:39:10.480

如果您正在运行 Linux，以下命令对此非常有用：

```
trickle -s -d 50 -w 100 firefox 
```

`-s`告诉命令独立运行，告诉`-d 50`它将带宽限制为 50 KB/s，`-w 100`将峰值检测窗口大小设置为 100 KB。`firefox`告诉命令启动 Firefox，并将所有这些速率限制应用于它尝试加载的任何站点。

**更新**

Chrome 38 现已推出，包括节流功能。要找到它，请调出开发者工具：Ctrl+Shift+I 在我的机器上完成，否则菜单->更多工具->开发者工具会将您带到那里。

然后通过单击开发人员工具面板左上角的手机来切换设备模式（请参阅下面的工具提示）。

![切换设备模式](../Images/710c251ba7d0d7332bed08832d1924f2.png)

然后像这样激活节流。

![激活 Chrome 限制](../Images/12cdd02c2d499d062012803ad3448b25.png)

如果你觉得这有点笨拙，我上面的建议适用于 Chrome 和 Firefox。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-04-26T08:17:34.507

我推荐[Charles Proxy——](http://charlesproxy.com)你可以选择放慢单个站点的速度，也有一大堆 HTTP 检查工具。

**编辑：**

截至 2014 年 6 月，Chrome 现在可以在 DevTools 中本地执行此操作 - 不过您需要 Chrome 38。

可以通过工具栏末尾的下拉菜单从“网络”选项卡访问该选项。

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2014-10-11T09:43:15.463

从**Chrome 38**开始，您无需任何插件即可执行此操作。只需单击检查元素（或`F12`热键），然后单击`toggle device mod`（`phone`按钮）

![在此处输入图像描述](../Images/ece6f9f59cd508a9b4a23871ec72f314.png)

你会看到这样的东西：

![在此处输入图像描述](../Images/22ce816d458dfcc61a802582bdc29d03.png)

在许多其他功能中，它允许您模拟特定的互联网连接（3G、GPRS）

* * *

## 回答 #4

> 赞同：65
> 
> 时间：2015-08-21T10:05:59.493

从今天开始，您可以在 Google Chrome Canary 中本地限制您的连接`46.0.2489.0`。只需打开开发工具并转到网络选项卡：

[![在此处输入图像描述](../Images/4abd4abaa792ae53cf43551fe611c53f.png)](https://i.stack.imgur.com/aHe7X.png)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-10-27T00:15:50.420

正如[迈克尔所说](https://stackoverflow.com/a/10328945/1608072)，Chrome 扩展 API 没有提供可靠的方法来做到这一点。*另一方面：*有一个软件我自己已经使用了很长时间了。

试试[Sloppy](http://www.dallaway.com/sloppy/)，一个模拟低带宽的 Java 应用程序。它独立于浏览器，非常易于使用，而且最重要的是，它是免费的！

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-04-03T15:07:13.857

如果您使用的是 Mac，Chrome 开发团队推荐使用“网络链接调节器工具”

任何一个：

```
Xcode > Open Developer Tool > More Developer Tools > Hardware IO Tools for Xcode 
```

或者如果你不想安装 Xcode：

```
Go to the Apple Download Center and search for Hardware IO Tools 
```

[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2018-02-05T10:21:20.197

原文：[https ://helpdeskgeek.com/networking/simulate-slow-internet-connection-testing/](https://helpdeskgeek.com/networking/simulate-slow-internet-connection-testing/)

使用 Chrome 模拟慢速连接 如果您的系统上尚未安装 Chrome，请继续安装它。完成后，打开一个新选项卡，然后按 CTRL + SHIFT + I 打开开发人员工具窗口或单击汉堡包图标，然后单击更多工具，然后单击开发人员工具。

[![在此处输入图像描述](../Images/c00abffc8a3ce6f438c281776ccbb9e0.png)](https://i.stack.imgur.com/2zIKN.png)

这将打开开发人员工具窗口，该窗口可能停靠在屏幕右侧。我更喜欢它停靠在屏幕底部，因为您可以看到更多数据。为此，请单击三个垂直点，然后单击中间停靠位置。

[![在此处输入图像描述](../Images/4b88f3e9e14e31e75fc5d62950e5eb68.png)](https://i.stack.imgur.com/gj5li.png)

现在继续并单击“网络”选项卡。在右侧，您应该会看到一个名为 No Throttling 的标签。

[![在此处输入图像描述](../Images/ff203352a9d66dc0ff7d7fffcff2e088.png)](https://i.stack.imgur.com/8hVrP.png)

如果单击它，您将获得一个预配置速度的下拉列表，您可以使用它来模拟慢速连接。

[![在此处输入图像描述](../Images/9ebc2f29cc5143b90fb0e499faebd929.png)](https://i.stack.imgur.com/n25Ba.png)

选项范围从离线到 WiFi，数字显示为延迟、下载、上传。最慢的是GPRS，其次是Regular 2G，然后是Good 2G，然后是Regular 3G，Good 3G，Regular 4G，DSL，然后是WiFi。选择其中一个选项，然后重新加载您所在的页面或在地址栏中输入另一个 URL。只需确保您位于显示开发人员工具的同一选项卡中。限制仅适用于您启用它的选项卡。

如果要使用自己的特定值，可以单击“自定义”下的“添加”按钮。单击添加自定义配置文件按钮以添加新配置文件。

[![在此处输入图像描述](../Images/103567a25feb7670bf885ceb87c6d93e.png)](https://i.stack.imgur.com/J7FXT.png)

使用 GPRS 时，www.google.com 的加载时间高达 16 秒！总体而言，这是一款内置于 Chrome 中的出色工具，可用于在较慢的连接上测试网站加载时间。如果您有任何问题，请随时发表评论。享受！

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2014-06-16T16:56:29.387

现在，在 Chrome Canary 中，您可以限制网络吞吐量。这可以在开发工具控制台的“仿真”选项卡的“网络”选项中完成。

您可能需要激活 Chrome 标志“启用开发人员工具实验”(chrome://flags/#enable-devtools-experiments) (chrome://flags) 才能看到这个新功能。您可以为移动连接模拟一些低带宽（GSM、GPRS、EDGE、3G）。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-09-08T15:12:34.460

如果您不熟悉 Fiddler - 请这样做。它是一个很棒的 HTTP 调试工具。您还可以选择限制带宽。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-26T07:24:42.600

我认为您要求的内容不能仅由 chrome 完成。我能找到的最接近的是[this](http://www.thechromesource.com/tag/throttle-http-requests-chrome/)，这不是你想要的。我得到一个 chrome 插件来做到这一点会很困难。

在本地机器上运行的网络代理可以达到你想要的效果。例如，搜索“节流代理”就会出现[这种](http://www.ngcoders.com/downloads/internet-speed-simulator-proxy-throttler)情况。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-06-27T10:06:02.623

正如[Chrome 移动仿真页面](https://developer.chrome.com/devtools/docs/mobile-emulation)所建议的那样，您可以在 Windows 上使用[Clumsy](http://jagt.github.io/clumsy/index.html) ，在 Mac OS X 上使用[Network Link Conditioner ，在 Linux 上使用](http://nshipster.com/network-link-conditioner/)[dummynet](http://info.iet.unipi.it/~luigi/dummynet/)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-08-31T09:53:14.883

如果您使用的是 OSX，则可以使用：**Network Link Conditioner**

[![在此处输入图像描述](../Images/77c31e4b20b0fd7f2d7689fbd0dd06fa.png)](https://i.stack.imgur.com/Wuq9Z.png)

在这里您可以选择不同的配置文件，即。100% 丢失、3G、DSL 等

请在下面找到下载网络链接调节器的[链接](https://stackoverflow.com/questions/9659382/installing-apples-network-link-conditioner-tool)

# php - 需要一个 PHP 脚本来解析这个以“ID”为条件的 XML

> ID：10328569
> 
> 赞同：-2
> 
> 时间：2012-04-26T06:55:23.387
> 
> 标签：php, xml, parsing, xml-parsing, parser-generator

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Catalog SYSTEM "http://store.yahoo.com/doc/dtd/Catalog.dtd">
<Catalog StoreID="yhst-34564052343" StoreName="test.com" PublishTimestamp="1332786206">
<Item ID="10170090" TableID="yd-item">
<ItemField TableFieldID="more-image3" Value="test1"/>
<ItemField TableFieldID="price-range" Value="23"/>
<ItemField TableFieldID="more-image4" Value="test2"/>
<ItemField TableFieldID="name" Value="Liquid Light Drop 1 Pendant Light"/>
</Item>
 <Item ID="10170191" TableID="yd-item">
<ItemField TableFieldID="more-image3" Value="test3"/>
<ItemField TableFieldID="price-range" Value="34"/>
<ItemField TableFieldID="more-image4" Value="test4"/>
<ItemField TableFieldID="name" Value="Liquid Light Drop 4 Pendant Light"/>
</Item>
</Catalog> 
```

我需要输出，如果 ID 10170191 通过，那么输出如下所示：

```
more-image3:-test3
price-range:-34
more-image4:-test4
name:-Liquid Light Drop 4 Pendant Light 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:21:15.657

尝试这个：

```
<?php
$xml='<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Catalog SYSTEM "http://store.yahoo.com/doc/dtd/Catalog.dtd">
<Catalog StoreID="yhst-34564052343" StoreName="test.com" PublishTimestamp="1332786206">
<Item ID="10170090" TableID="yd-item">
<ItemField TableFieldID="more-image3" Value="test1"/>
<ItemField TableFieldID="price-range" Value="23"/>
<ItemField TableFieldID="more-image4" Value="test2"/>
<ItemField TableFieldID="name" Value="Liquid Light Drop 1 Pendant Light"/>
</Item>
 <Item ID="10170191" TableID="yd-item">
<ItemField TableFieldID="more-image3" Value="test3"/>
<ItemField TableFieldID="price-range" Value="34"/>
<ItemField TableFieldID="more-image4" Value="test4"/>
<ItemField TableFieldID="name" Value="Liquid Light Drop 4 Pendant Light"/>
</Item>
</Catalog>';

$xml=simplexml_load_string( $xml );
$xpath=$xml->xpath( '//Catalog/Item[@ID="10170191"]' );
foreach( $xpath as $result ) {
    foreach( $result->ItemField as $path ) {
        echo $path['TableFieldID'] . ': ' . $path['Value'] . '<br />';
    }
}
?> 
```

希望这可以帮助。

# .net - 在 Win7 上使用 Bonjour 而不安装框架

> ID：10328570
> 
> 赞同：1
> 
> 时间：2012-04-26T06:55:24.953
> 
> 标签：.net, windows, bonjour

我下载了适用于 windows 的 Bonjour SDK，并从 Chat 示例中了解了如何将 bonjour 服务添加到程序中。这工作得很好。但是在新安装的 Win 7 机器上，我只会收到错误消息。

在任何程序可以运行 Bonjour 之前，我是否总是必须安装 Bonjour 框架，还是我只是发送了错误的 dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:43:56.093

是的。您必须分发框架。

在开发机器上安装 SDK 后，在 C:\Program Files\Bonjour\Installer（或安装它的自定义路径）中，有两个安装程序（32 位和 64 位）。您应该在运行程序之前分发并安装它们。

您可以在此处阅读更多信息：[https ://developer.apple.com/softwarelicensing/agreements/bonjour.html#bonjourwin](https://developer.apple.com/softwarelicensing/agreements/bonjour.html#bonjourwin)

# android - 在 HTTP POST 中发送参数

> ID：10328576
> 
> 赞同：0
> 
> 时间：2012-04-26T06:55:59.643
> 
> 标签：android, http-post

我正在使用此代码[http://stunningco.de/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/](http://stunningco.de/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)将图像发送到我的网络服务器代码工作正常但我希望能够发送一些附加参数。

我如何发送它们，我尝试构建这样的 url 请求[http://www.mywebserver.com/postdata?param1=somevalue¶m2=somevalue](http://www.mywebserver.com/postdata?param1=somevalue&param2=somevalue)但网络服务器从未重新整理它们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:02:06.853

我不知道您是如何对自定义服务器进行编程的，但是您以正确的方式传递了附加参数（通过 GET，而不是 POST）。

如果您从头开始，通过读取 HTTP 协议数据包并手动解释它们，那么您将在第一行请求的 URL 之后获得 GET 参数，并且必须首先使用“？”分割 url 字符将url从参数中分割出来，然后'&'将不同的参数分割成一个数组，然后使用'='字符将每个参数分割成一个键和一个值。

如果不是这种情况并使用了某种 pyhon/Java/VB.NET 库，请告诉我们是哪一个。

# caching - 缩放和集群 JPA

> ID：10328581
> 
> 赞同：11
> 
> 时间：2012-04-26T06:56:08.580
> 
> 标签：caching, jakarta-ee, jpa, memcached, ehcache

我在 jboss7 上组装了一个常规的 Java EE 应用程序，它将在数据层中使用 JPA。我想让这个应用程序随着负载的增加而扩展。虽然很清楚如何扩展 Web 层：创建更多机器并将它们放在负载均衡器后面，但扩展数据层却不那么重要。

我可能可以集群我的数据库（MySQL）。仍然，这使 JPA 层不聚集。理想情况下，JPA 将通过使用由 MySQL 支持的（集群）内存缓存来扩展。

当我环顾四周时，所有关于 JPA 缩放的信息似乎都是 3-4 年的历史。人们谈论 ehcache、memcached 和 infinispan。我不确定这是否仍然是最新的。

谁能告诉我 Java EE 集群和扩展的最新技术，尤其是在数据层。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T13:29:01.510

各种缓存策略仍然是扩展 JPA/Hibernate 的方式（您基本上在问题中命名了最流行的选项）。据我所知，在这个领域 4 到 5 年以来没有发生什么特别的事情。您还没有提到的另一个选项是 JBoss Cache。所以 JPA/Hibernate 的二级缓存仍然在这方面占主导地位。

为什么这里没有进展？我的疯狂猜测是，首先，需要可扩展应用程序的人往往会在需要高性能的领域忽略 JPA 和 Hibernate。通常人们使用穿着 Spring Framework JDBCTemplate 助手和事务管理的 SQL。那么可伸缩性就是这个领域的数据库能力问题。

另一个趋势是使用 No-SQL 数据库。有很多解决方案：MongoDB、CouchoDB、Cassandra、Redis 等等。这些通常是 Google BigTable 之类的键值存储（这过于简单化，但或多或​​少是该方法背后的想法），如果您接受它们的局限性（关系不再容易管理等），它们的扩展性就像地狱一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T13:36:33.417

解决方案有很多，解决方案主要分为两大类：

*   扩展数据库
*   使用集群缓存来减少数据库负载

EclipseLink 支持数据分区，以便跨一组数据​​库实例分片数据，

见：http: [//java-persistence-performance.blogspot.com/2011/05/data-partitioning-scaling-database.html](http://java-persistence-performance.blogspot.com/2011/05/data-partitioning-scaling-database.html)

您还可以使用 MySQL 集群，

见： [http ://www.mysql.com/products/cluster/](http://www.mysql.com/products/cluster/)

Oracle TopLink Grid 提供 EclipseLink JPA 支持，以作为分布式缓存与 Oracle Coherence 集成，

见： [http ://www.oracle.com/technetwork/middleware/ias/tl-grid-097210.html](http://www.oracle.com/technetwork/middleware/ias/tl-grid-097210.html)

EclipseLink 的缓存通过缓存协调支持集群，

见： [http ://wiki.eclipse.org/EclipseLink/Examples/JPA/CacheCoordination](http://wiki.eclipse.org/EclipseLink/Examples/JPA/CacheCoordination)

# java - 计算最后一个星期日之前的 1 周和从今天到最后一个星期日

> ID：10328584
> 
> 赞同：1
> 
> 时间：2012-04-26T06:56:13.617
> 
> 标签：java, mysql, date, jdbc

我在我的 MySQL 表中存储了一些日期和时间作为时间戳。我现在要做的是检索特定用户从上周日到上周日（一周工作）工作的每一天。另一个选项是从今天到上周日（当前周）每天检索。有些员工不是每天都工作。

我不知道如何用 Java 编写代码或者是否有特定的 MySQL 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:16:28.437

在 Java 中，您可以充分利用 Calendar 类来查找上一个星期日：

`Calendar c = Calendar;`
`c.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);`
`Date lastSunday = c.getTime();`

然后，您可以减少 1 WEEK_OF_MONTH 以找到之前的星期日：

`c.add(Calendar.WEEK_OF_MONTH, -1);`
`Date sundayBeforeThat = c.getTime();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T01:45:49.303

# javascript - firefox 或 chrome 是否为打开 SSL 会话的扩展提供 API？

> ID：10328589
> 
> 赞同：0
> 
> 时间：2012-04-26T06:56:28.750
> 
> 标签：javascript, firefox, google-chrome, ssl

firefox 或 chrome 是否为打开 SSL 会话的扩展提供 API？我只找到 firefox 和 chrome 的 API 来发送正常的 http 请求。但我需要我通过我的扩展发送的加密信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:35:32.980

对于 Firefox 附加组件，[请求模块](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/request.html)允许您发出 Web 请求。它没有明确说明，但它也会处理 https 请求。

# javascript - Javascript 原型行为

> ID：10328593
> 
> 赞同：5
> 
> 时间：2012-04-26T06:56:33.867
> 
> 标签：javascript, prototype, delegation

我有一个方法可以让我在创建新对象时选择原型对象（复制自“Javascript：The Good Parts”一书）：

```
Object.create = function(o) {
    var F = function() {};
    F.prototype=o;
    return new F();
} 
```

现在说，我有一个对象：

```
var car = {
   model: "Nissan"
}; 
```

我基于这个对象创建了一个新对象，使用“创建”方法：

```
var car1 = Object.create(car); 
```

然后我可以向 car 添加一个属性，它将动态添加到 car1（动态原型）。所以例如：

```
car.year=2011;      // Gets added to "car"...
alert(car1.year);   // ... Is also avaialable to car1 
```

**Q1）这种行为表明“年份”已添加到汽车的原型中，这就是它可用于 car1 的原因。它是否正确？如果没有，那么“年”在哪里添加，为什么“汽车”和“汽车1”都可以使用它？**

此外，根据委托规则，如果在对象上找不到方法，它将搜索其原型，然后检查链上的所有原型，直到找到 Object.prototype。所以现在，如果我输入这样的内容：

```
Object.prototype.originCountry = "Japan";
alert(car.originCountry);   // Outputs Japan
alert(car1.originCountry);  // Outputs Japan 
```

到现在为止还挺好; 但是，如果我这样做：

```
Object.carColor= "White";
alert(car.carColor);   // Error! 
```

**Q2）当我向“汽车”添加属性时（参见上面的*car.year*示例，它被添加到汽车的原型中。但是，当我向对象添加属性时，它不会被添加到对象的原型中？如果确实添加了到 Object 的原型，那么根据委托规则，为什么“汽车”不能使用它？**

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:14:31.540

当你这样做时：

```
Object.carColor = "White"; 
```

然后该属性`carColor`不会添加到`Object`的原型中。它现在是 的财产`Object`。要查看您的期望，您会做的是：

```
Object.prototype.carColor = "White"; 
```

然后在那之后：

```
alert(({}).carColor); // Will alert "White" 
```

所以这里发生的事情就是这样。创建的任何对象`{}`（包括空对象）都是 的新实例，`Object`因此共享 . 原型中设置的任何内容的属性`Object`。

至于你的`Object.create`功能是如何工作的。让我们逐行看一下：

```
 1\. var F = function() {}; 
```

您只需创建一个新函数，一个本质上是空白的对象。您使用函数而不是类似函数的原因`{}`是因为函数可以与`new`调用相结合以创建该对象的新实例，其中该函数将充当构造函数。

```
2\. F.prototype=o; 
```

您将新空白函数的原型设置为您创建的对象。现在，这纯粹是一个参考。它不是深拷贝。我的意思是，随着对象的`o`变化，对象的任何实例也会发生变化（实际上它们不会改变，但它们会“似乎”改变。稍后会详细介绍）。

```
3\. return new F(); 
```

现在您只需创建该函数的一个新实例，它有一个原型作为您传递的对象。

当您执行以下操作时：

```
var car1 = Object.create(car); 
```

你得到一个`car1`具有原型的对象 has `car`。所以当你这样做时：

```
car.year = 2011 
```

这不像`car1`变化。它更像是原型所指的对象发生了变化。因此，当您执行以下操作时：

```
car1.year 
```

对一个被调用的属性进行搜索（首先在原型中，然后在对象中）`year`，结果证明原型拥有它，因此`car1.year`将返回`2011`。

所以底线是这样的：

1.  原型在实例之间共享。
2.  更改 an 的属性`Object`不会体现在任何实例更改中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:10:17.287

在您的第一个示例中，您将添加到您的原型中，`car1`因为`car === F.prototype`和`car1 instanceof F`. 所以对 Q1：是的。

`Object`是所有对象的构造函数，`F`对你的`car1`. 如果你在 上添加一些东西`Object.prototype`，它将在所有对象上都可用——这就是你不应该这样做的原因，这种不可枚举的属性会弄乱所有的 for-in-loops。如果您设置`Object`构造函数的属性，则从它继承的内容不会发生任何变化。不要忘记：`Object`等于`F`函数，而不是`o`原型设置的参数。`new Object()`就像`Object.create(Object.prototype)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:10:36.223

该函数不允许您选择原型对象，它创建一个 nmew 对象构造函数，将对象参数作为原型，然后基于构造函数返回一个新对象。

该新对象将从对象参数继承方法和属性。这是为了允许创建从其他对象继承的新对象。

这样做的原因（顺便说一下 Object 是一个核心 javascript 对象，不应该被扩展）

```
Object.prototype.originCountry = "Japan";
alert(car.originCountry);   // Outputs Japan
alert(car1.originCountry); 
```

而这并没有

```
Object.carColor= "White"; 
```

是因为首先扩展了Object的原型对象，这意味着使用Object构造函数构建的对象将继承那些方法和属性。

当后者是我们所说的静态函数时，它不会传递给从 Object 构造函数创建的对象。

我建议阅读更多关于 Javascript 中的原型继承的信息。这里有几个链接。

[http://www.webreference.com/programming/javascript/prototypal_inheritance/index.html](http://www.webreference.com/programming/javascript/prototypal_inheritance/index.html) http://www.htmlgoodies.com/html5/tutorials/javascript-prototypical-inheritance-explained.html#fbid=xEJ2PwtH2Oh

[http://unscriptable.com/2007/04/17/inheritance-explained/](http://unscriptable.com/2007/04/17/inheritance-explained/)

# java - 返回一个字符串和整数

> ID：10328604
> 
> 赞同：2
> 
> 时间：2012-04-26T06:58:03.187
> 
> 标签：java

我如何返回一个字符串和一个整数？假设我想返回学生姓名，这是一个字符串，他们的标记是一个整数。

我不能做标记=标记+元素+（元素2+名称）；这会创建不兼容的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:02:01.727

在这种情况下，我的建议是创建一个包含此信息的新类。例如命名它`StudentMark`。

```
class StudentMark {
  private final String name;
  private final int mark;

  public StudentMark(String name, int mark) {
     this.name = name;
     this.mark = mark;
  }
  public String getName() { return name; }
  public int getMark() { return mark; }
} 
```

然后在具有名称和标记的方法中要返回的位置，就这样做。

```
return new StudentMark("Samuel", 3.2); 
```

在这里，您还可以添加您可能需要的任何其他有趣的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:00:13.850

创建班级学生并返回学生

```
class Student{
  private String name;
  private int mark;
  //assessor+ contructors

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:59:33.547

你需要为它定义一个类。该类应该有两个属性：一个字符串和一个整数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:00:38.563

定义一个包含两个值的类并返回该类的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T07:09:25.273

创建一个具有名称和标记的私有变量的类。并覆盖 toString() 方法。

```
 public class Student{
    private int marks;
    private String name;
    //provde setters and getters for marks and name

    public String toString(){
return getName()+getMarks();
  }  
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-19T12:27:15.713

在你的`Student`课堂上，你可以有一个方法：

```
 public String printNameAndGrade() {
    return "Name: " + this.getName() + "\n " + "Grade: " +  this.getGrade();
} 
```

然后使用 Student 对象引用调用它：

```
Student st1 = new Student("Gabe Logan", 97);
System.out.println(st1.printNameAndGrade()); //use `println` method to display it. 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-26T07:01:43.030

您可以使用两个元素的 Array 或 List 并将值放在那里。不幸的是，这会丢失所有类型的信息。

您可以使用保留类型信息的 Map，但可能会令人困惑，因为您会期望任意数量的条目。

最简洁的选择是创建一个包含两个元素的简单类。

# iphone - 更改默认邮件编辑器导航按钮的颜色

> ID：10328607
> 
> 赞同：1
> 
> 时间：2012-04-26T06:58:21.267
> 
> 标签：iphone

我使用导航栏类别为导航栏着色。一切正常。但是当我添加邮件编辑器选择器时，导航栏会被着色，但按钮默认为蓝色。我怎样才能改变这些？

我在类别的导航栏中使用了图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:59:50.580

```
mailer.navigationBar.tintColor = [UIColor yourColor]; 
```

这可能会帮助你:)

# sql - 比较一个表中的两个选择值

> ID：10328615
> 
> 赞同：2
> 
> 时间：2012-04-26T06:59:02.460
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是我的桌子：

**我的表**：`Id, Title, Point, Date`

所以我需要检查所有的点和日期`Title = 'member1'`是否等于所有的点和日期`Title = 'member2'`然后`Set @flag = 1`否则`Set @flag = 0`确切的两个选择是：

```
Select Point, Date From MyTable Where Title = 'member1' 
```

和

```
Select Point, Date From MyTable Where Title = 'member2' 
```

我需要检查所有行是否相等。你的建议是什么？

**更新**：

假设以下示例：

```
Title  Point     Date

T1      1   2012-04-26 07:14:34.000
T1      2   2012-07-26 07:14:34.000
T1      3   2012-06-26 07:14:34.000
T1      4   2012-05-26 07:14:34.000
T2      1   2012-04-26 07:14:34.000
T2      2   2012-07-26 07:14:34.000
T2      3   2012-06-26 07:14:34.000
T2      4   2012-05-26 07:14:34.000
T3      4   2012-05-26 07:14:34.000
T3      3   2012-06-26 07:14:34.000
T4      1   2012-04-26 07:14:34.000
T4      2   2012-07-26 07:14:34.000
T4      3   2012-06-26 07:14:34.000
T4      4   2012-05-27 07:14:34.000 -- 26 to 27
T5      2   2012-12-27 07:14:34.000
T5      6   2012-05-27 07:14:34.000
T5      3   2012-07-26 07:14:34.000 
```

在此示例中，只有 T1 值和 T2 值相等，而其他值不相等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:19:34.753

这是我将如何做到的。计划是获取每个结果集，然后将其转换为 XML 并比较两个 XML 结果。容易得多（在我看来）。

```
CREATE TABLE MyTable
(
[id] integer identity,
[Title] varchar(1024),
[Point] int,
[Date] datetime
);

insert into MyTable([Title], [Point], [Date])
values('T1',      1,   '2012-04-26 07:14:34.000'),
('T1',      2,   '2012-07-26 07:14:34.000'),
('T1',      3,   '2012-06-26 07:14:34.000'),
('T1',      4,   '2012-05-26 07:14:34.000'),
('T2',      1,   '2012-04-26 07:14:34.000'),
('T2',      2,   '2012-07-26 07:14:34.000'),
('T2',      3,   '2012-06-26 07:14:34.000'),
('T2',      4,   '2012-05-26 07:14:34.000'),
('T3',      4,   '2012-05-26 07:14:34.000'),
('T3',      3,   '2012-06-26 07:14:34.000'),
('T4',      1,   '2012-04-26 07:14:34.000'),
('T4',      2,   '2012-07-26 07:14:34.000'),
('T4',      3,   '2012-06-26 07:14:34.000'),
('T4',      4,   '2012-05-27 07:14:34.000'),
('T5',      2,   '2012-12-27 07:14:34.000'),
('T5',      6,   '2012-05-27 07:14:34.000'),
('T5',      3,   '2012-07-26 07:14:34.000');

-- your original queries
Select Point, Date From MyTable Where Title = 'T1';
Select Point, Date From MyTable Where Title = 'T2';

-- first I am going to just get each one as XML
SELECT [Point], [Date]
FROM MyTable 
WHERE Title = 'T1'
FOR XML PATH('');

SELECT [Point], [Date]
FROM MyTable 
WHERE Title = 'T2'
FOR XML PATH('');

-- first just get the two results into one result set
select t.FirstCheck, t.SecondCheck
from (
    select (SELECT [Point], [Date]
              FROM MyTable 
             WHERE Title = 'T1'
               FOR XML PATH('')) as FirstCheck,
           (SELECT [Point], [Date]
              FROM MyTable 
             WHERE Title = 'T2'
               FOR XML PATH('')) as SecondCheck
) as t;

-- now for the real check.

declare @flag int;

select @flag = case when t.FirstCheck = t.SecondCheck  then 1 else 0 end 
from (
    select (SELECT [Point], [Date]
              FROM MyTable 
             WHERE Title = 'T1'
               FOR XML PATH('')) as FirstCheck,
           (SELECT [Point], [Date]
              FROM MyTable 
             WHERE Title = 'T2'
               FOR XML PATH('')) as SecondCheck
) as t;
-- this should return 1
select @flag as Flag;

select @flag = case when t.FirstCheck = t.SecondCheck  then 1 else 0 end 
from (
    select (SELECT [Point], [Date]
              FROM MyTable 
             WHERE Title = 'T1'
               FOR XML PATH('')) as FirstCheck,
           (SELECT [Point], [Date]
              FROM MyTable 
             WHERE Title = 'T3'
               FOR XML PATH('')) as SecondCheck
) as t;
-- this should return 0
select @flag as Flag; 
```

如果我了解您要做什么，那么应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:04:20.580

我猜您需要检查成员 2 中是否缺少成员 1，反之亦然，因此您需要同时检查两种方式。如果您在一系列日期之间执行此操作（下面的代码将是所有日期），则可以使用整数表一次性完成，并且效率更高。

```
IF NOT EXISTS (
SELECT
    Point,
    Date
FROM 
    MyTable aa
LEFT OUTER JOIN MyTable bb
ON aa.point = bb.point
AND aa.date = bb.date

WHERE 
    aa.title = 'member1'
AND bb.title = 'member2'
AND bb.title IS NULL

UNION 

SELECT
    Point,
    Date
FROM 
    MyTable aa
LEFT OUTER JOIN MyTable bb
ON aa.point = bb.point
AND aa.date = bb.date

WHERE 
    aa.title = 'member2'
AND bb.title = 'member1'
AND bb.title IS NULL
)
SELECT @Flag = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:53:22.053

这不会赢得任何选美或表演比赛，但应该足够了。它的要点是

*   获取每个标题的计数
*   `MyTable`在您喜欢比较的所有字段上加入自身
*   将两者加入各自的计数表
*   仅选择两个计数匹配的结果

**SQL 语句**

```
;WITH cnt (Title, cnt) AS (
  SELECT  Title, COUNT(*)
  FROM    MyTable
  GROUP BY
          Title
)  
SELECT  DISTINCT mt1.Title
        , mt2.Title
FROM    MyTable mt1
        INNER JOIN MyTable mt2 ON mt1.Point = mt2.Point 
                                  AND mt1.Date = mt2.Date 
                                  AND mt1.Title < mt2.Title
        INNER JOIN cnt cnt1 ON cnt1.Title = mt1.Title
        INNER JOIN cnt cnt2 ON cnt2.Title = mt2.Title        
WHERE   cnt1.cnt = cnt2.cnt 
```

# android - Android - AVD 中的蓝牙支持

> ID：10328617
> 
> 赞同：0
> 
> 时间：2012-04-26T06:59:28.310
> 
> 标签：android, bluetooth, avd

有没有办法在运行 android 版本 2.3 或 4 的 AVD 上启用蓝牙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:20:00.080

AFAIK，不可能。

您可以随时`Window-Avd Manager - New - Hardware`为您的 AVD 添加支持，而蓝牙永远不会存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:40:25.467

这是[一个项目](https://github.com/cheng81/Android-Bluetooth-Simulator)！那应该模拟你需要的东西。

# asp.net - 在鼠标悬停时设置变量

> ID：10328622
> 
> 赞同：2
> 
> 时间：2012-04-26T06:59:49.237
> 
> 标签：asp.net, variables, razor, set, mouseover

每个人。长期潜伏者，第一次海报=）

首先提前感谢任何阅读我的问题并考虑帮助我的人。我将具体说明我正在尝试做什么，因为我不能只要求某人修复我的代码。

我有一个网页，在整个页面中以拇指样式视图显示我们打开的项目。每个项目都在它自己的容器 div 中。每个容器都包含项目第一页的快照图像缩略图，并且该图像设置为向左浮动，从而在右侧的 div 中留下一条空间。右边的这个空间有 5 个图标在图像的一侧。每个图标代表项目负责人、成员、部门和状态。

就是这样的布局。这是一个 ASP.NET MVC Razor cshtml 网站，因此每个项目都有一个模型保存每个项目的信息（project.Id、project.Leader、project.Crew 等）。我的目标是能够将鼠标悬停在每个图标上并让它显示该图标的信息。

我遇到的麻烦是当我将鼠标悬停在图标上并且它需要@project.Leader 时，它不知道我要哪个项目来寻找它的领导者。所以我在想最好的方法是当我将鼠标悬停在该项目的“容器 div”上时，将 div 的 id 设置为一个变量，这样当我将鼠标悬停在图标上时，我可以使用该变量来告诉它我正在调用哪个项目。领导者。

我希望这是有道理的 =) 任何想法都会有很大帮助，但请理解我不是本地编码器，所以我很容易混淆。

感谢大家阅读！！！！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:16:08.167

使用[jQuery](http://jquery.com/)，您可以获取被点击元素的父级：

```
$(".project-icon").hover(function() {
    var target = $(this);
    var container = target.parent();

    // You can use a class on the image to get it from the parent container:
    var image = container.find(".project-image");

    // Or you can get the container's id:
    var id = container.attr("id");
}); 
```

当然，您可以使用纯 javascript 来做到这一点，但是您的任务是确保您的代码在任何地方都能正常工作。像 jQuery 这样的工具包会为您处理这些细节。每个做你想做的事情的人都强烈推荐它们。

# css - Wordpress 标题中的 Superfish 菜单在下拉菜单中创建滚动条

> ID：10328625
> 
> 赞同：0
> 
> 时间：2012-04-26T06:59:58.880
> 
> 标签：css, wordpress, drop-down-menu, superfish, scrollbars

所以我试着浏览了这里的所有帖子，但我找不到我的问题在任何地方都被复制（尽管我更多地谈论我的谷歌能力而不是我的情况的独特性）

基本上，我有一个基于 wordpress 的网站 (vegasonthemic.com)，使用 superfish 插件作为导航菜单。我可以访问每个页面顶部导航栏中的下拉菜单项，除了个别艺术家的帖子项目。（所有艺术家/声学男/点击其中一张图片。）

当我转到这样的页面时：http: [//vegasonthemic.com/portfolio-item/nate-ridgely-2012-04-19/](http://vegasonthemic.com/portfolio-item/nate-ridgely-2012-04-19/)并尝试访问“所有艺术家”下拉菜单，它并没有一直显示firefox 和 IE 以及在 chrome 中创建这些粗糙的滚动条。

我已经尝试调整 z-indexes 和 overflow:visible;s 来满足我的小心脏的内容，但无法弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:04:58.287

在您的 css 中，容器需要像这样可见的溢出

```
#container {
    width: 1280px;
    overflow: visible;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:13:37.390

`overflow:auto;`从容器中取出

```
#container {
     overflow: auto; /*Remove this*/(from style.css (line 121))} 
```

# javascript - PhoneGap 外部主机通配符

> ID：10328630
> 
> 赞同：2
> 
> 时间：2012-04-26T07:00:28.583
> 
> 标签：javascript, cordova, connection, wildcard, whitelist

我在 iPhone 的 PhoneGap 应用程序中使用 js 库。我不知道我的 js 库联系了哪些其他外部站点，所以我需要一种将所有连接列入白名单的方法，仅用于测试。我怎么做？

我的应用程序只是默默地失败，它不会从库的启动位置继续。（当我在浏览器中运行应用程序时，它运行良好）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T07:19:46.093

尝试将`ExternalHosts`Phonegap.plist 中的属性值设置为`*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:10:16.557

我认为您需要将域名添加到**PhoneGap.plist**文件或**Cordova.plist**。

而且您的应用程序在浏览器中运行良好。因此，在浏览器源代码中，您可以检查代码中存在的外部链接。

您想通过互联网访问/链接哪个文件，您需要在 plist 文件中添加该服务器域。假设我已经像这样添加了 jquery

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css">
<script src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script> 
```

现在我需要添加`code.jquery.com`PhoneGap.plist-> ExternalHosts 数组作为字符串。

# iphone - 如何使用多个自定义按钮和背景图像显示警报消息？

> ID：10328631
> 
> 赞同：-2
> 
> 时间：2012-04-26T07:00:32.070
> 
> 标签：iphone, ios5

嗨，如何实现多个自定义按钮的代码警报消息代码以及如何为警报消息设置背景自定义图像，以便为我在 iphone 中的请求提供指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:15:56.180

我会像这样自己去，

```
UIView *myAlertView = [[UIView alloc] initWithFrame:CGRectMake(50.0, 190.0, 110.0, 100.0)];
myAlertView.backgroundColor=[UIColor clearColor];
[self.view addSubview:myAlertView];

UIImageView *imgAlertBack = [[UIImageView alloc] initWithFrame:myAlertView.frame];
imgAlertBack.image = [UIImage imageNamed:@"AlertBackgroundImageWithNiceCurves.png"];
[myAlertView addSubview:imgAlertBack];

[myAlertView addSubview:<add your buttons>]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:08:30.973

实现和自定义警报视图非常困难，有一些关于此的教程，请遵循此 [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

[自定义 UIAlertView](https://stackoverflow.com/questions/551530/customizing-uialertview)

[http://kwigbo.com/post/318396305/iphone-sdk-custom-uialertview-background-color](http://kwigbo.com/post/318396305/iphone-sdk-custom-uialertview-background-color)

[如何创建自定义 UIAlertView](https://stackoverflow.com/questions/1765599/how-to-create-custom-uialertview)

# lotus-notes - 荷花笔记-荷花文字与交响曲

> ID：10328636
> 
> 赞同：0
> 
> 时间：2012-04-26T07:00:59.787
> 
> 标签：lotus-notes

我想使用 lotusscript 创建 Lotus symphony 邮件合并。我知道所有的方法和类，但不知道如何使用这些类和方法...请有人帮助我吗？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:30:08.237

很容易。

1.  首先创建一个使用联系人模板的数据库（或者您可以使用您的联系人数据库。

2.  在 Symphony 中创建您的文档。（我只使用了 Notes 中的嵌入式生产力工具）。

3.  选择工具->邮件合并。

4.  单击左侧显示的浏览，选择包含联系人的 NSF 文件。

在此之后，您应该会出现一个“插入字段”列表。您可以将这些添加到您的文档中。

然后单击“完成合并”并选择所需的选项。（比 LS 恕我直言更容易）。

... 至于 LotusScript。以下内容应该可以帮助您入门。

[http://www.ibm.com/developerworks/lotus/library/symphony-toolkit/](http://www.ibm.com/developerworks/lotus/library/symphony-toolkit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:38:50.063

如果您不知道如何使用类和方法，那么您根本就不了解它们。这是一个初学者，我记得我从头开始自学 lotusscript，但是一旦你掌握了基础知识，它就非常强大。

```
dim s as new notesSession 'Instantiate a session object
dim db as notesDatabase
dim view as notesView
dim doc as notesDocument 

set db = s.currentDatabase  'This allows you access to the properties of the current database
set view = db.getView("<Your view name>")
if not view is nothing then
    set doc = view.getFirstDocument

else
    msgbox "Sorry, can't find view " & <your view name>
end if 
```

Lotus Notes 基于容器模型，数据库包含文档、视图、代理等，文档包含字段，字段包含具有值的项目等。从外部开始，逐步向下，从小处着手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:24:16.880

```
Dim symdoc As SymphonyApplication
Set symdoc = New SymphonyApplication
Dim documents As SymphonyDocuments
Set documents = symdoc.Documents
Dim document As SymphonyDocument
Set document = documents.AddDocument(”",True,True) ‘ Syntax is below
‘Set document = documents.AddDocument(Template, AsTemplate, Visible)
Dim range As SymphonyTextRange
Set range = document.Content.End
Call range.InsertBefore(”My Symphony document”) 
```

这是获取 Symphony 文档的示例代码。现在你可能会得到一个更好的主意。

# c# - .NET 中命名捕获组的正则表达式模式是什么？

> ID：10328644
> 
> 赞同：22
> 
> 时间：2012-04-26T07:01:29.780
> 
> 标签：c#, .net, regex

我正在努力使用一种正则表达式模式，该模式会将文本从字符串中提取到命名组中。

一个（有点武断的）示例将最好地解释我想要实现的目标。

```
string input =
    "Mary Anne has been to 949 bingo games. The last was on Tue 24/04/2012\. She won with the Numbers: 4, 6, 11, 16, 19, 27, 45";

string pattern =
    @"(?<Person>\w+?) has been to (?<NumberOfGames>\d+?) bingo games. The last was on (?<Day>...?) (?<Date>...?). She won with the Numbers: (?<Numbers>...?)";

Regex regex = new Regex(pattern);
var match = regex.Match(input);

string person = match.Groups["Person"].Value;
string noOfGames = match.Groups["NumberOfGames"].Value;
string day = match.Groups["Day"].Value;
string date = match.Groups["Date"].Value;
string numbers = match.Groups["Numbers"].Value; 
```

我似乎无法让正则表达式模式工作，但我认为上面解释得很好。基本上我需要得到人名，游戏数量等。

任何人都可以解决这个问题并解释他们制定的实际正则表达式模式吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-26T07:13:48.383

```
 string pattern = @"(?<Person>[\w ]+) has been to (?<NumberOfGames>\d+) bingo games\. The last was on (?<Day>\w+) (?<Date>\d\d/\d\d/\d{4})\. She won with the Numbers: (?<Numbers>.*?)$"; 
```

其他帖子提到了如何提取组，但是这个正则表达式与您的输入相匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T07:08:37.683

查看以下[文档`Result()`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.result.aspx)：

> 返回指定替换模式的扩展。

您不想要任何替换模式，因此这种方法不是正确的解决方案。

你想访问匹配的组，所以这样做：有[一个`Groups`property](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)。

这样，您的代码将如下所示：

```
string title = match.Groups["Person"].Value;
string drawNumber = match.Groups["NumberOfGames"].Value; 
```

此外，正如 russau 正确指出的那样，您的模式与您的文本不匹配：`Date`不仅仅是三个字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T07:08:51.223

试试这个：

```
string pattern = @"(?<Person>\w+?) has been to (?<NumberOfGames>\d+?) bingo games. The last was on (?<Day>...?) (?<Date>\d+/\d+/\d+). She won with the Numbers: (?<Numbers>...?)"; 
```

您的正则表达式与字符串的日期部分不匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T07:05:57.790

假设正则表达式有效，获取命名组的代码将是这样的：

```
string title = match.Groups["Person"].Value;
string drawNumber = match.Groups["NumberOfGames"].Value; 
```

# android - 从 Handler 调用的 AsyncTask 不会执行 doInBackground

> ID：10328645
> 
> 赞同：12
> 
> 时间：2012-04-26T07:01:40.893
> 
> 标签：android, android-asynctask

我正在开发的应用程序使用后台线程通过 API 下载图像列表，然后以幻灯片形式显示图像。

有一个后台任务（当前为 AsyncTask）来定期获取新图像。

我没有收到关于错误线程等的任何错误消息，只是 AsyncTasks 的第二个实例不会运行 doInBackground 方法。

以下是 Activity 中的一些代码：

```
private DownloadTask mDownloadTask = null;
private Handler mHandler;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            if(mDownloadTask != null) {
                mDownloadTask.cancel(true);
            }
            mDownloadTask = new DownloadTask();
            mDownloadTask.execute((Void[]) null);
        }
    };

    mDownloadTask = new DownloadTask();
    mDownloadTask.execute((Void[]) null);
} 
```

`DownloadTask`看起来像这样：

```
@Override
protected List<String> doInBackground(Void... voids) {
     // Download list of URLs from server, etc.
}

@Override
protected void onPostExecute(List<String> urls) {
    mHandler.sendEmptyMessageDelayed(111, 5000);
} 
```

处理程序将被调用，onPreExecute（在 AsyncTask 中）将被调用，并且 DownloadTask 的初始运行（在 中`onCreate`）也可以工作。

根据这个问题：[Android SDK AsyncTask doInBackground not running (subclass)](https://stackoverflow.com/questions/9119627/android-sdk-asynctask-doinbackground-not-running-subclass)，它可能与 SDK15 相关。

感谢您的任何提示。

* * *

**更新**当我收到 Handler 可能不在 UI 线程中的评论时（这很奇怪，`Thread.currentThread`在 onCreate 和 Handlers`handleMessage`方法中都是一样的，我将`handleMessage`方法修改为：

```
mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                if(mDownloadTask != null) {
                    mDownloadTask.cancel(true);
                }
                mDownloadTask = new DownloadTask();
                mDownloadTask.execute((Void[]) null);
            }
        });
    }
}; 
```

仍然没有成功。

* * *

**更新**完整的 DownloadTask 类

```
class DownloadTask extends AsyncTask<Void, Void, List<String>> {

    @Override
    protected void onPreExecute() {
        // Cancel the animation.
        if (mSlideshowAnimation != null) {
            mSlideshowAnimation.cancel(true);
        }

        mImageView1.setVisibility(View.GONE);
        mImageView2.setVisibility(View.GONE);
        animate(mProgressBar).alpha(1.0f).setDuration(500).start();

        Log.d(TAG, "Download preparation done.");
    }

    @Override
    protected List<String> doInBackground(Void... voids) {
        Log.d(TAG, "Download");
        SharedPreferences s = getSharedPreferences("access", Context.MODE_PRIVATE);
        String token = s.getString("token", null);

        Log.d(TAG, "Downloading slideshows.");

        List<String> urls = new ArrayList<String>();
        Slideshow[] slideshows = new Api(SlideshowActivity.this).getSlideshows(token);
        for (Slideshow slideshow : slideshows) {
            urls.addAll(slideshow.getAllPhotoUrls());
        }

        Log.d(TAG, "Downloading slideshows: " + slideshows.length);

        for (String url : urls) {
            try {
                url = Api.HOST + url;

                if (!Cache.fileExists(Cache.getCacheFilenameForUrl(SlideshowActivity.this, url))) {
                    Cache.cacheStream(SlideshowActivity.this, HttpHelper.download(SlideshowActivity.this, url), url);
                } else {
                    Log.d(TAG, "Cached: " + url);
                }
            } catch (IOException e) {
                Log.e(TAG, "Error while downloading.", e);
            }
        }

        Log.d(TAG, "Downloading slideshows finished.");

        return urls;
    }

    @Override
    protected void onPostExecute(List<String> urls) {
        Log.d(TAG, "download successful");
        animate(mProgressBar).alpha(0.0f).setDuration(500).start();

        mCurrentImageIndex = -1;
        mImageUrls = urls;

        mSlideshowAnimation = new SlideshowAnimation();
        mSlideshowAnimation.execute((Void[]) null);

        mHandler.sendEmptyMessageDelayed(111, 5000);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T02:20:15.773

感谢与 Waqas 的有益讨论（谢谢！）我终于在我的代码中发现了错误。事实上，上面写的所有内容都是正确的，并且可以按原样工作。我的问题是第二个任务阻止了第一个任务，反之亦然。

在 Google 网上论坛上找到这篇文章可能是一个巧合：[http](http://groups.google.com/group/android-developers/browse_thread/thread/f0cd114c57ceefe3?tvc=2&q=AsyncTask+in+Android+4.0) ://groups.google.com/group/android-developers/browse_thread/thread/f0cd114c57ceefe3?tvc=2&q=AsyncTask+in+Android+4.0 。建议参与线程的每个人都仔细阅读此讨论。

AsyncTask 将线程模型切换为串行执行器（再次），这与我似乎拥有 2 个 AsyncTasks 的方法不兼容。

最后，我将“下载”的处理切换为经典`Thread`，并在必要时使用`Handler`发布消息取消幻灯片。使用处理程序`sendEmptyMessageDelayed`我将在一段时间后简单地重新创建下载线程以刷新数据。

感谢所有评论和答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:09:27.283

`Handler`是android中的一种线程，AsyncTask也运行在不同的线程中。当您使用 AsyncTask 时，规则很少..

> 要使此类正常工作，必须遵循一些线程规则：
> 
> 任务实例必须在 UI 线程上创建。必须在 UI 线程上调用 execute(Params...)。不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。该任务只能执行一次（如果尝试第二次执行将引发异常。）

所以它清楚地说 AsyncTAsk 必须从 UI 线程调用。当你从不是 UI 线程的 Handler 调用它时……

也试试这个

```
mHandler = new Handler() {
@Override
public void handleMessage(Message msg) {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            if(mDownloadTask != null) {
                mDownloadTask.cancel(true);
            }
           if([isCancelled()][1]){
            mDownloadTask = new DownloadTask();
            mDownloadTask.execute((Void[]) null);
          } // i assume your task is not getting cancelled before starting it again..
        }
    });
  }
}; 
```

而且文档也这么说..

> Handler有两个主要用途：
> 
> (1) 安排消息和可运行文件作为未来某个时间点执行；(2) 将要在与您自己的线程不同的线程上执行的操作排入队列。

# asp.net - ValidationSummary 后面代码中的RequiredFieldValidator

> ID：10328647
> 
> 赞同：0
> 
> 时间：2012-04-26T07:01:51.360
> 
> 标签：asp.net, vb.net, validation

我正在动态创建问题列表（表格中的标签和文本框）。有些问题需要填写，所以我也在后面的代码中创建了RequiredFieldValidators。

为了显示 ErrorMessages，我使用了 ValidationSummary。我想要做的是在文本框和验证摘要中的问题旁边显示一个“*”。

在 aspx 页面上可以这样做：

```
<asp:RequiredFieldValidator ID="reqFieldValWOline" runat="server" CssClass="errorLabelNoBox"
                                        ControlToValidate="txtWOline" ErrorMessage="the question">*
            </asp:RequiredFieldValidator> 
```

（标签之间的“*”）摘要将显示错误消息。

我怎样才能在后面的代码中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:57:33.143

设置验证器的 Text 属性，例如

```
reqFieldValWOline.Text = "*" 
```

# php - 从数组中获取 MongoId

> ID：10328653
> 
> 赞同：1
> 
> 时间：2012-04-26T07:02:23.093
> 
> 标签：php

我如何自己调用 id ？

```
Array
(
    [0] => Array
        (
            [_id] => MongoId Object
                (
                    [$id] => 4f98930cb1445d0a7d000001
                )
        )

) 
```

我以为会是：

```
echo $userInfo[0]['_id']->['$id']; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:16:55.557

由于 _id 是一个[MongoId](http://php.net/manual/en/class.mongoid.php)对象，您应该像这样访问它的公共成员：

```
echo $userInfo[0]['_id']->id; 
```

编辑： MongoId $id 字段[以美元符号开头，](http://www.php.net/manual/en/class.mongoid.php#104850)因此您可能必须通过 {'$id'} 调用它，否则 PHP 将无法正确解析它。（感谢@cKendrick）

```
echo $userInfo[0]['_id']->{'$id'}; 
```

# spree - 1.1.0.rc2 版本中的 Spree api 密钥

> ID：10328654
> 
> 赞同：0
> 
> 时间：2012-04-26T07:02:23.207
> 
> 标签：spree

我已经生成了一个版本**为 1.1.0.rc2**的 spree 网站，现在我无法在 users 标签下找到之前版本的 spree 中可用的 generate api key 选项。

我需要生成用于将 spree 与 ting 开发的 OpenERP 模块 esale_spree 集成的 api 密钥。

注意：esale_spree 是 OpenERP 和 spree 站点的连接器模块。

问：他们是否从用户标签中删除了 generate api key 选项？问：支持此功能的最后一个大礼包版本是哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:50:44.020

这是一个已知的问题。1.1 版本中缺少该按钮。您控制台中的以下代码将生成一个 API 密钥。

```
Spree::User.find_by_email("spree@example.com").generate_api_key! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T09:11:55.653

我发现以下为我工作

```
Spree::User.find_by_email("spree@example.com").spree_generate_api_key! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T11:16:33.487

当我通过控制台访问它时，我实际上发现这对我有用

`Spree::User.find_by_email("spree@example.com").generate_spree_api_key!`

我通过查看此页面中的狂欢文档部分找到了它：“#generate_api_key ⇒ 对象”

[http://www.rubydoc.info/gems/spree_backend/2.4.2/Spree/Admin/UsersController](http://www.rubydoc.info/gems/spree_backend/2.4.2/Spree/Admin/UsersController)

```
# File 'app/controllers/spree/admin/users_controller.rb', line 82

def generate_api_key
    if @user.generate_spree_api_key!
       flash[:success] = Spree.t('api.key_generated')
    end
    redirect_to edit_admin_user_path(@user)
end 
```

# junit - NetBeans IDE 和 Selenium 2.0 WebDriver // 错误：捕获异常 [错误：不支持的命令 [isTextPresent]]

> ID：10328656
> 
> 赞同：1
> 
> 时间：2012-04-26T07:02:25.783
> 
> 标签：junit, webdriver, selenium-webdriver

每当 Selenium IDE 测试用例中有“assertTextPresent”命令时，当导出到 JUint 4 时，我们就会出现以下错误：

// 错误：捕获异常 [错误：不支持的命令 [isTextPresent]]

每次出现

我知道有一种解决方法，但这可以自动化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:48:41.803

并非每个绑定都支持它。

所以不，唯一的方法是做变通方法，或者为 Selenium 项目做出贡献并自己将其放入绑定中:)

# java - 我应该返回 List 还是 ArrayList？

> ID：10328658
> 
> 赞同：12
> 
> 时间：2012-04-26T07:02:40.097
> 
> 标签：java, arraylist, interface

我发现自己同意返回一个接口而不是一个具体的类。

原因很简单，我想要松耦合。

但是会有其他影响或权衡吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-26T07:10:58.803

最好返回适合您的界面的最通用类型。

如果有某种原因`ArrayList`本质上适合您返回的数据，那么您应该使用它。通常很好，但如果返回的值本质上是无序的`List`，您也可以考虑使用：`Collection`

![Java 集合层次结构图](../Images/872d935fb1a264c41651da7a574e3437.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T07:07:24.023

对于像 List 或 ArrayList 这样的类型，不应该有任何复杂性，您应该将 List 提升[代码返回到 interface](http://en.wikipedia.org/wiki/Design_Patterns)。

你会发现自己这样做受到限制，如果这是来自像[CopyOnWriteArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)这样的 Concurrency 包，并且你正在使用像[addIfAbsent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html#addIfAbsent%28E%29)这样的方法，它没有在 List 接口中定义。

因此，如果您返回 ArrayList 或任何具体实现，您可以使用未在合同（`List`接口）中定义的 API，但是您在从特定实现更改为其他内容（从`ArrayList`到`LinkedList`）时受到限制，因为每个人都在使用您的 API 必须根据您的更改进行更改。我认为期望太高了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T07:06:49.493

这意味着您将无法为返回的对象调用`ArrayList`不是接口方法的方法。`List`

但是，如果对象是一个`ArrayList`你可以做一个演员。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-26T07:08:58.330

返回具体类的唯一原因可能是调用者需要知道这个具体实现，或者可能是具体实现上的附加接口。例如，在Android中，你经常不得不使用`ArrayList`，因为框架不知道如何正确序列化泛型`List`接口。

# c++ - 当我们从用户那里得到输入时，为什么我们需要一个缓冲区？

> ID：10328661
> 
> 赞同：2
> 
> 时间：2012-04-26T07:03:03.117
> 
> 标签：c++, buffer, cin

当我们从用户那里得到输入时，为什么我们需要一个缓冲区？

例如：

```
chat arr[10];
cin>>arr;
// or
cin.get(arr,10); 
```

我读到有一个名为缓冲区的临时变量，用于存储用户键入的输入。所以：

1.  编译器是否仅在 char 数组的情况下使用缓冲区？如果答案是“否”，那么它什么时候使用？

2.  在上面的示例中，编译器使用缓冲区的原因是什么？

3.  如果我上面示例中的缓冲区是一个数组，编译器如何选择它的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:38:39.020

由于各种原因，涉及多个中间缓冲区：

1.  操作系统有一个内部缓冲区。这在一定程度上取决于输入设备：磁盘的物理读取是按扇区进行的，因此必须使用扇区大小倍数的缓冲区；键盘输入通常会缓冲到换行符为止，以允许有限程度的编辑（退格等）；等等。这对应用程序几乎是透明的，尽管它确实意味着即使只读取一个字符，读取也不会返回，直到用户输入换行符。

2.  istream 使用的streambuf 有一个缓冲区。这样做是为了减少对操作系统的请求数量。这个缓冲区的大小通常取决于 streambuf 的类型；a`filebuf`通常会针对平台文件 IO 进行优化——大到足以有效减少请求，但不会大到导致分页。在某些系统上，对于某些类型的文件，可能会将`filebuf`其缓冲区替换为文件的内存映射。

streambuf 具有允许在一定程度上修改其缓冲区管理的功能。但是，很少使用它们。图书馆的作者通常做得很好，你不能轻易改进它。

关于`>>`操作员：这种缓冲都发生在较低的级别。运算符（实际上是来自 a的`>>`所有输入`istream`）将对单个字符或字符数组的请求转发到 streambuf。这种将字符的实际输入与它们的解析解耦是设计的基础`istream`：`istream` 只处理解析；它包含一个指向处理实际输入的流缓冲区的指针。（某些解析函数也可能包含缓冲区。例如，`>>`of an`int`可能会在开始实际转换之前收集缓冲区中的数字序列。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:05:40.990

必须有一些地方来存储输入（从外部收集的数据）。缺少这一点，就很难理解*为什么要*进行输入。

即使对于其他数据类型——最明显的数字保存在`int`、`long`和`float`（称为*标量类型*）——也必须声明一个变量来分配足够的存储空间来存储结果：

```
long  n;
double  d;
cin >> n;
cin >> d; 
```

编译器不选择它的大小。你必须声明它；通常可以将其设置得过大，但过小会导致多种问题。

# java - 将 GUI 引用传递给其他编辑它们的类的最佳方法

> ID：10328662
> 
> 赞同：0
> 
> 时间：2012-04-26T07:03:11.057
> 
> 标签：java, pass-by-reference

我有一个正在开发的客户端/服务器 MMORPG，我想正确地做事（尽管不可能）。我的问题是：将对我的 GUI 项（JInternalFrame、JPanels 等）的引用传递给我的类以侦听来自服务器的命令/回复的最佳方式是什么。现在这就是我正在做的事情，它很快就会变得很大。

```
MyCommandReciever(DataInputStream commandIn, DefaultListModel modelUserList, JInternalFrame skillsFrame, Container skillsPanelHeader, Container skillsPanelContent, JInternalFrame characterFrame){
    this.commandIn = commandIn;
    this.modelUserList = modelUserList;
    this.skillsFrame = skillsFrame;
    this.skillsPanelHeader = skillsPanelHeader;
    this.skillsPanelContent = skillsPanelContent;
    this.characterFrame = characterFrame;
} 
```

我不想继续将越来越多的 JInternalFrames 传递给 MyCommandReciever。

做这样的事情有意义吗？？

```
Component[] c = panel.getComponents();
for(int i = 0; i < c.length; i++) {
    System.out.println(c[i].getClass().getSimpleName());
} 
```

或者有没有一种方法可以在我的主类中创建我的主类（包括我的 GUI）的实例，并将其传递给 MyCommandReciever，以便它可以访问所有内容（可能像这样）：

```
MyCommandReciever(DataInputStream commandIn, DefaultListModel modelUserList, MyClient m){ 
```

如果最后一种方法是可行的方法（我希望不是，我是否需要将它从创建它的实例的类（Character.java 创建 MyClient.java 的实例）传递给它自己（ MyClient.java)，然后将它从 MyClient.java 传递给 MyCommandReciever.java？

抱歉，如果最后一个问题太令人困惑......让我分解一下：

Character.java 内部：

```
if (playSuccess.contains("true")){
    z++; //to turn off the commandIn functionality in Character screen when MyClient is running
    frame.dispose();
    new MyClient(accountName, playWho, commandIn, messageIn, commandOut, messageOut, sM, sC); 
```

在 MyClient.java 中：

```
commandReciever = new MyCommandReciever(commandIn, modelUserList, skillsFrame, skillsPanelHeader, skillsPanelContent, characterFrame); 
```

所以在 character.java 中我必须创建 MyClient 的实例（并分配给变量），但同时将该分配的变量传递给 MyClient。（现在我正在输入这个它甚至似乎不可能）。

请指导我：D 显然，我把我的大脑包裹在了最后一个想法上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:34:48.920

您可以做的是使用称为“观察者”或“事件源”的模式：

1.  定义命令接收器和主类之间的接口，以及当有趣的事情发生时命令接收器应该调用的方法。
2.  （显然，命令接收器应该持有对实现此接口的对象的引用，以便能够发送事件。）
3.  在主类中实现接口——通过主类本身或嵌套类——并通过更新接口来响应来自命令接收器的事件。将实现传递给命令接收器。

这样，命令接收器和用户界面就完全解耦了，如果在某个时候您决定使用`JInternalFrame`数据显示以外的东西，您不必在数百个地方更改代码。

您也可以考虑使用 MVC 或其众多兄弟姐妹之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:15:11.877

这是我决定采用的方法。感谢您的其他建议，但是对于我的需求来说似乎有点复杂：

在我的主要 gui 类中：

```
commandReciever = new MyCommandReciever(commandIn, this); //passing in instance of my main gui class 
```

在我的命令接收类（与服务器对话的类）中：

```
MyClient m; //for access to the GUI pieces

MyCommandReciever(DataInputStream commandIn, MyClient m){
    this.commandIn = commandIn;
    this.m = m;
} 
```

我如何从命令接收器类编辑主 gui 类的组件的示例：

```
m.modelUserList.clear();
for (int i = 0; i < CharactersList.length; i++){
    m.modelUserList.addElement(CharactersList[i]);
} 
```

# c++ - g ++ CreateProcess：没有这样的文件或目录

> ID：10328663
> 
> 赞同：3
> 
> 时间：2012-04-26T07:03:23.247
> 
> 标签：c++, qt, compilation

我正在尝试从源代码构建 Qt Creator。伙计们，我已经参考这个错误检查了stackoverflow上的帖子，并确保`PATH`为我的编译器设置了环境变量。我还按照 Qt 的说明进行操作`README`，但出现以下错误：

```
g++ CreateProcess: no such file or directory. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-08T10:17:17.547

编译器的路径`g++`应该添加到**系统变量** `PATH`中，而不是**用户变量**中。

# javascript - 如何在 JavaScript 中检测浏览器“最小化”和“最大化”状态？

> ID：10328665
> 
> 赞同：23
> 
> 时间：2012-04-26T07:03:27.670
> 
> 标签：javascript

我试图找到浏览器*最小化*和*最大化*状态，因为我想相应地点击 AJAX 请求浏览器状态。

有谁知道如何使用 JavaScript 检测浏览器状态？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-26T07:12:36.813

我认为检测这些状态的唯一可靠方法是检查 HTML5 提供的[可见性 API](https://developer.mozilla.org/en/DOM/Using_the_Page_Visibility_API)（这仍然是一个实验性功能），它提供了某些属性和事件

```
document.hidden // Returns true if the page is in a state considered to be hidden to the user, and false otherwise.

document.visibilityState // Returns a string denoting the visibility state of the document 
```

您还可以对可见性的变化做出反应

```
document.addEventListener("visibilitychange", function() {
  console.log(document.hidden, document.visibilityState);
}, false); 
```

请记住，这不适用于跨浏览器，仅在某些浏览器版本中可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-10T10:54:17.923

这是[Piotrek De](https://stackoverflow.com/users/577812/piotrek-de)对另一个问题的[回答](https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active/23108930#23108930)：

> GitHub 上有一个简洁的库：
> 
> [https://github.com/serkanyersen/ifvisible.js](https://github.com/serkanyersen/ifvisible.js)
> 
> 例子：
> 
> ```
> // If page is visible right now
> if( ifvisible.now() ){
>   // Display pop-up
>   openPopUp();
> } 
> ```
> 
> 我已经在我拥有的所有浏览器上测试了 1.0.1 版，并且可以确认它适用于：
> 
> *   IE9、IE10
> *   法郎 26.0
> *   铬 34.0
> 
> 可能还有所有较新的版本。
> 
> 不完全适用于：
> 
> *   IE8 - 始终指示选项卡/窗口当前处于活动状态（.now() 始终为我返回 true）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T07:23:35.843

我使用此代码

```
window.addEventListener('blur', function(){
   console.log('blur');
}, false);

window.addEventListener('focus', function(){
   console.log('focus');
}, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T07:12:15.927

您可以尝试使用 Page Visibility API，它具有布尔属性 document.hidden (document.webkitHidden)，它还可以检测当前页面是最小化还是最大化。它还取决于用户是否关注当前浏览器选项卡：

[https://developers.google.com/chrome/whitepapers/pagevisibility](https://developers.google.com/chrome/whitepapers/pagevisibility)

[https://developer.mozilla.org/en/DOM/Using_the_Page_Visibility_API](https://developer.mozilla.org/en/DOM/Using_the_Page_Visibility_API)

# c# - 带有复选框的 ASPxGridView 错误

> ID：10328672
> 
> 赞同：1
> 
> 时间：2012-04-26T07:04:23.733
> 
> 标签：c#, asp.net, .net, aspxgridview

我有一个带复选框的网格。Sometimes, when select row and click ADD button it's not work and debugger show me that haven't selected row. 这是一个代码：

```
protected void GridView_CustomCallback(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewCustomCallbackEventArgs e)
    {
        ASPxGridView grid = sender as ASPxGridView;
        List<object> ids = grid.GetSelectedFieldValues("ID");
        if (ids.Count > 0)
        { ......... }
}
SelectAllCheckbox _SelectAll;
    if (!(MyGV.Columns[0] is GridViewCommandColumn))
        {
            _SelectAll = new SelectAllCheckbox() { GridClientInstanceName = MyGV.ClientInstanceName };
            Common.AddCommandColumn(MyGV, 0, _SelectAll);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:20:20.307

希望这可以帮助。这里使用了事件 RowDataBound。

```
private string chkGridColHeaderId = string.Empty;

protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.Header)
        {
            CheckBox chkAll = (CheckBox)e.Row.FindControl("chkSelectAll");
            chkAll.Attributes.Add("onclick", "SelectAll(this.checked)");
            chkGridColHeaderId = chkAll.ClientID;

        }
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            CheckBox chkSelect = (CheckBox)e.Row.FindControl("chkSelect");

            chkSelect.Attributes.Add("onclick", "if(!this.checked)document.getElementById('" + chkGridColHeaderId + "').checked = false;");
        }

    } 
```

# sockets - UDP 本地套接字可靠性

> ID：10328674
> 
> 赞同：0
> 
> 时间：2012-04-26T07:04:29.290
> 
> 标签：sockets, udp

据我了解，UDP 是一种不可靠的协议。在我正在工作的一个项目中，建议将本地 UDP 套接字作为两个进程之间的 IPC 的平均值。本地 UDP 是否完全可靠？我想是的，但只是想确认一下。

如果是，本地 UDP 和域套接字有什么区别？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:55:49.420

UDP 在任何情况下都不可靠。例如，如果接收者没有像消息到达一样快地读取消息，那么它的接收缓冲区将溢出并且所有额外的消息都将被丢弃。

UDP 和域套接字之间的区别在于，域套接字实际上只是两个套接字与另一个套接字通信，而 UDP 将 IP 堆栈的两个实例粘贴在两个套接字之间。这是一个很好的描述：

[unix 域套接字与互联网套接字](http://lists.freebsd.org/pipermail/freebsd-performance/2005-February/001143.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:20:39.340

没有任何保证。毕竟是UDP。某人的实现可能会忽略您发送的每一秒数据包，无论是本地的还是远程的，但仍然是有效的实现。

实际上，您与其他进程之间存在多个级别的操作系统交互，其中任何一个都可能因任何原因而失败。

命名管道或类似的可能是更好的选择。或者，如果您需要可靠的套接字，TCP。

# http - 如何知道内容长度

> ID：10328675
> 
> 赞同：2
> 
> 时间：2012-04-26T07:04:34.300
> 
> 标签：http, http-headers

我希望能够在不下载远程文件的情况下知道它的大小。我知道有一些解决方案使用“Content-length”标头值，但对于某些链接，此标头丢失。在这种情况下，一个解决方案是下载整个文件，但是如果文件大于 1Gb 会发生什么情况。

下载管理器使用什么方式来找出远程文件的大小？

如果您有任何语言的解决方案，我会接受。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:11:38.883

`Content-length`是一个可选的标头，它指定 HTTP 协议中资源的长度。

这里有一些细节：[HTTP/1.1: Header Field Definitions - 14.13 Content-Length](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13)

基本上，这是值得注意的部分：

> 应用程序应该使用这个字段来指示消息体的传输长度，除非这被第 4.4 节中的规则禁止。

第[4.4 节消息长度](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.4)也应该对您有所帮助。

> 我知道有一些使用“Content-length”标头的解决方案，但对于少数链接它不存在。

如果服务器不发送任何类型的 Content-Length，则无法确定大小（4.4 节中描述的特殊情况除外）。因此，下载管理器**不会事先知道**长度，并且**会**下载它获得的所有内容，直到服务器停止向它提供数据。

# iphone - 删除现有 ios 应用程序的新版本，当其二进制文件尚未上传时

> ID：10328676
> 
> 赞同：1
> 
> 时间：2012-04-26T07:04:43.247
> 
> 标签：iphone, objective-c, ios, app-store, app-store-connect

我试图在 iTunes Connect 中为现有应用程序上传新版本。我还没有上传二进制文件。它的状态是准备上传。现在我想从我的 iTunes Connect 帐户中删除这个版本。我该如何实现它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:14:53.793

你不能，你可以改变版本号等等，但你不能删除它。

当您准备上传新版本时，不要上传任何二进制文件并更改版本号和更新文本。

# c++ - 在 Arduino 中使用 Accessor 方法传递数据

> ID：10328686
> 
> 赞同：1
> 
> 时间：2012-04-26T07:05:48.930
> 
> 标签：c++, arduino, accessor

我对 C++ 非常缺乏经验，但是我需要将它用于我正在从事的这个项目。我正在使用 Arduino Mega 来读取和记录 LED 阵列。我让代码连续工作，但现在我试图通过定义我自己的库和类来整理它。当我尝试使用访问器传递简单的数据（如引脚号和超时）时，它们总是返回 0。或者当我尝试在串行端口上打印它们进行测试时似乎就是这种情况。这是我的代码

沉积物记录器.h

```
#ifndef SEDIMENTLOGGER_H
#define SEDIMENTLOGGER_H

#include "/home/marrabld/Programming/Arduino/arduino-1.0/libraries/QTRSensors/QTRSensors.h"
#include <Arduino.h>

#define NUM_SENSORS 8
//==================================================
// This header should hold 3 small classes used for :
//--------------------------------------------------
// 1\. sedimentSensor
//     Dealing with sensorHardware
// 2\. sedimentWriter
//     Reading and writing data
// 3\. sedimentTimer
//     Reading and writing to the RTC
//--------------------------------------------------
// 
//==================================================

class sedimentSensor
{
 public:
  QTRSensorsRC sensor1;
  QTRSensorsRC sensor2;
  sedimentSensor(); //default constructor
  ~sedimentSensor();
  void  calibrateSensors();
  unsigned int *SensorValues1(){return sensorValues1;};
  unsigned int *SensorValues2(){return sensorValues2;};
  int SampleDelay(){return sampleDelay;};
  int EmitterPin1();

 private:
  // Map pins to LED numbers
  // first LED array
  int led1;
  int led2;
  int led3;
  int led4;
  int led5;
  int led6;
  int led7;
  int led8;
  int emitterPin1;
  //second Array
  int led9;
  int led10;
  int led11;
  int led12;
  int led13;
  int led14;
  int led15;
  int led16;
  int emitterPin2;

  int  timeout; // waits for 2.5 seconds for sensor outputs to go low
  long sampleDelay; // 1 second
  int numSensors;

  unsigned int sensorValues1[];
  unsigned int sensorValues2[];

}; 
```

沉积物记录器.cpp

```
#include "sedimentLogger.h"
#include <Arduino.h>
#include <QTRSensors.h>
//#include "/home/marrabld/Programming/Arduino/arduino-1.0/libraries/QTRSensors/QTRSensors.h"
sedimentSensor::sedimentSensor()
{
  //Constructor
  int led1 = 24;
  int led2 = 26;
  int led3 = 28;
  int led4 = 30;
  int led5 = 32;
  int led6 = 34;
  int led7 = 36;
  int led8 = 38;
  int emitterPin1 = 22;
  //second Array
  int led9 = 25;
  int led10 = 27;
  int led11 = 29;
  int led12 = 31;
  int led13 = 33;
  int led14 = 35;
  int led15 = 37;
  int led16 = 39;
  int emitterPin2 = 23;

  int  timeout = 2500; // waits for 2.5 seconds for sensor outputs to go low
  int sampleDelay = 1000; // 1 second

  QTRSensorsRC sensor1 ((unsigned char[]) {led1,led2,led3,led4,led5,led6,led7,led8},numSensors, timeout,emitterPin1);
  QTRSensorsRC sensor2 ((unsigned char[]) {led9,led10,led11,led12,led13,led14,led15,led16},numSensors,timeout,emitterPin2);

  unsigned int sensorValues1[NUM_SENSORS];
  unsigned int sensorValues2[NUM_SENSORS];
};

sedimentSensor::~sedimentSensor()
{
};

int sedimentSensor::EmitterPin1()
{return emitterPin1;};

void sedimentSensor::calibrateSensors()
{
  Serial.begin(9600);

  unsigned int _delay = 500;
  delay(_delay);
  pinMode(13,OUTPUT);
  for(int i = 0; i<400; i++)
    {
      sensor1.calibrate();
      sensor2.calibrate();
    }
  digitalWrite(13,LOW);

  //TODO WRITE MAX AND MIN VALS TO FILE
  Serial.print("Array 1 Min :: ");
  for (int i = 0; i < NUM_SENSORS; i++)
  {
    Serial.print (sensor1.calibratedMinimumOn[i]);
    Serial.print(' ');
  }
  Serial.println();
  Serial.print("Array 2 Min :: ");
  for (int i = 0;i< NUM_SENSORS; i++)
  {
    Serial.print (sensor2.calibratedMinimumOn[i]);
    Serial.print(' ');
  }

  Serial.println();
  Serial.print("array 1 Max :: ");
  // print the calibration maximum values measured when emitters were on
  for (int i = 0; i < NUM_SENSORS; i++)
  {
    Serial.print(sensor1.calibratedMaximumOn[i]);
    Serial.print(' ');
  }
  Serial.println();
  Serial.print("array 2 Max :: ");
  // print the calibration maximum values measured when emitters were on
  for (int 
  i = 0; i < NUM_SENSORS; i++)
  {
    Serial.print(sensor2.calibratedMaximumOn[i]);
    Serial.print(' ');
  }

  Serial.println();
  Serial.println();
  delay(_delay); 

}; 
```

主程序

```
#include <QTRSensors.h>
#include <Arduino.h>
//#include "/home/marrabld/Programming/Arduino/arduino-1.0/libraries/QTRSensors/QTRSensors.h"
#include "sedimentLogger.h"
#include <Wire.h>
#include "/home/marrabld/Programming/Arduino/arduino-1.0/libraries/RTClib/RTClib.h"

sedimentSensor sedLog;//= sedimentSensor();

void setup()
{
  Serial.begin(9600);
  sedLog.calibrateSensors(); 
}

void loop()
{
  unsigned int position1 = sedLog.sensor1.readLine(sedLog.SensorValues1()); // guessing its passing SensorValues as 0s
  unsigned int position2 = sedLog.sensor2.readLine(sedLog.SensorValues2());

  unsigned char i;
  for (i = 0; i < NUM_SENSORS; i++)
    {
      Serial.print(sedLog.SensorValues1()[i] * 10/10001);      
      Serial.print(' ');
    }
  Serial.println(position1);
  for (i=0;i < NUM_SENSORS; i++)
    {
      Serial.print(sedLog.SensorValues2()[i]*10/1001);
      Serial.print(' ');
    }
  Serial.print("  ");
  Serial.println(position2);
  delay(sedLog.SampleDelay()); // No delay

  Serial.println(sedLog.SampleDelay()); // prints zero and shouldn't
  Serial.println(sedLog.EmitterPin1()); // prints zero and shouldn't
} 
```

校准传感器会在 LED 按应有的短暂亮起时被调用。但即使是打印出串口的校准值也是垃圾。如果我在主循环中编写所有这些代码，它会按预期工作。

任何帮助理解出了什么问题将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:47:02.960

在您的`sedimentSensor`构造函数中，您正在声明与成员变量同名的新*局部变量。*
从它们中删除类型以将其转换为对成员的分配。
还要`NUM_SENSORS`在类定义中放入数组声明。

# javascript - 使用行视图的主干表视图 - 如何构建？

> ID：10328687
> 
> 赞同：11
> 
> 时间：2012-04-26T07:05:52.583
> 
> 标签：javascript, backbone.js, backbone-views

我有一组希望在表格视图中呈现的模型。每个模型应由表中的一行表示，并且应使用模板生成该行。我应该能够将事件处理程序附加到该行（例如单击），以便在事件警报时发出有关与该行关联的模型的一些特定信息。

我见过与此类似的事情的一种常见方法是将每一行分成它自己的视图，并有一个父视图（在这种情况下说是表）使用行视图生成要包含在你的代码中的 html . 但是我无法弄清楚这如何与模板一起使用。

在这种情况下，我不能将事件专门附加到 RowView，因为它没有引用 dom 元素（`this.el`对于主干），它只是返回一个字符串。我怎样才能实现我想要的，同时使用模板来最大容量？

问题不是专门针对事件、模板化或使用嵌套视图，而是更多关于使用 Backbone 实现这种输出的正确方法。

示例代码（也在[小提琴](http://jsfiddle.net/9avm6/4/)中）：

```
/** View representing a table */
var TableView = Backbone.View.extend({
    tagName: 'table',
    render: function() {
        var rows = _.map(this.collection.models, function(p) {
            return new RowView({model: p}).render();                        
        });
        $('body').html(this.$el.html(rows.join('')));
    }
});

/** View representing a row of that table */
var RowView = Backbone.View.extend({
    render: function() {
        // imagine this is going through a template, but for now
        // lets just return straight html.
        return '<tr>' + 
                '<td>' + this.model.get('name') + '</td>' + 
                '<td>' + this.model.get('age') + '</td>' +
               '</tr>';
    }
});

var data = [
    {'name': 'Oli', 'age': 25},
    {'name': 'Sarah', 'age': 20}];

/** Collection of models to draw */
var peopleCollection = new Backbone.Collection(data);
var tableView = new TableView({collection: peopleCollection});
tableView.render(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T08:10:14.860

处理视图层次结构的一种方法是让每个视图呈现其子视图并将它们附加到其`el`. 然后每个视图根据其模型/集合处理事件。

要将 HTML 作为视图注入`el`并控制容器元素，可以使用[setElement](http://documentcloud.github.com/backbone/#View-setElement)方法

> **设置元素** `view.setElement(element)`
> 
> 如果您想将 Backbone 视图应用到不同的 DOM 元素，请使用 setElement，它还将创建缓存的 $el 引用并将视图的委托事件从旧元素移动到新元素。

您的示例可以重写为

```
var rowTemplate=_.template("<tr>"+
     "<td class='name'><%= name %></td>"+
     "<td class='age'><%= age %></td>"+
     "</tr>");

/** View representing a table */
var TableView = Backbone.View.extend({
    tagName: 'table',

    initialize : function() {
        _.bindAll(this,'render','renderOne');
    },
    render: function() {
        this.collection.each(this.renderOne);
        return this;
    },
    renderOne : function(model) {
        var row=new RowView({model:model});
        this.$el.append(row.render().$el);
        return this;
    }
});

/** View representing a row of that table */
var RowView = Backbone.View.extend({  
    events: {
        "click .age": function() {console.log(this.model.get("name"));}
    },

    render: function() {
        var html=rowTemplate(this.model.toJSON());
        this.setElement( $(html) );
        return this;
    }
});

var data = [
    {'name': 'Oli', 'age': 25},
    {'name': 'Sarah', 'age': 20}];

/** Collection of models to draw */
var peopleCollection = new Backbone.Collection(data);
var tableView = new TableView({collection: peopleCollection});
$("body").append( tableView.render().$el ); 
```

还有一个小提琴[http://jsfiddle.net/9avm6/5/](http://jsfiddle.net/9avm6/5/)

# jquery - 添加jquery文件后更新面板不起作用

> ID：10328690
> 
> 赞同：2
> 
> 时间：2012-04-26T07:06:12.963
> 
> 标签：jquery, asp.net, updatepanel

添加 jquery 文件后，我的更新面板无法正常工作，如果没有它，它运行良好，但是一旦我将它放入其中，就不会刷新更新面板？有任何想法吗？

当我添加 jquery-1.7.2.min.js 文件时出现问题。

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="MLIVRtelephone.aspx.vb" Inherits="MLIVRtelephone" %>

<%@ Register Assembly="OrgChart" Namespace="OrgChart.Core" TagPrefix="cc1" %>

<%@ Register src="Header.ascx" tagname="Header" tagprefix="uc1" %>

<%@ Register assembly="Telerik.Web.UI" namespace="Telerik.Web.UI" tagprefix="telerik" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

    <style type="text/css">
        .style1
        {
            height: 23px;
        }

        #drop {
min-height: 100px;
width: 200px;
border: 3px dashed #ccc;
margin: 10px;
padding: 10px;
}
html .RadOrgChart .rocItem {
width: 120px;
}

.middle
{
text-align:center;
}
    </style>

    <uc1:Header ID="Header1" runat="server" />
<head runat="server">
<link href="CSS/style.css" rel="stylesheet" type="text/css" />
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<title></title>

</head>
<body>
<form id="form1" runat="server">
              <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true">
            </asp:ScriptManager>

<table style="width:100%;">
    <tr>
        <td width="800px" class="style1">
                         <div id="layout" runat="server">
            <br />
            <telerik:RadOrgChart ID="RadOrgChart1" runat="server" EnableViewState="true">
                   <ItemTemplate>

           <asp:Button CausesValidation = "false" OnClick="getlayer" runat="server" ID="LinkButtonNode" Text='<%# DataBinder.Eval(Container.DataItem, "Text") %>' CommandArgument='<%# DataBinder.Eval(Container.DataItem, "Text")%>' CssClass="middle"></asp:Button>
       </ItemTemplate>
            </telerik:RadOrgChart>
                                        <br />
              </div>
        </td>
        <td align="right" class="style1">
                            <div align="left" id="layer" runat="server">
            </div>
            <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false" >
            </asp:UpdatePanel></td>
    </tr>
    <tr>
        <td width="800px">
            &nbsp;</td>
        <td align="center">

        </td>
    </tr>
    <tr>
        <td width="800px">
            &nbsp;</td>
        <td>
            &nbsp;</td>
    </tr>
</table>

    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:10:07.900

这没有任何意义，jQuery 是一个 javascript 库，仅引用它不会导致任何事情。

我能想到的唯一选择是您正在使用其他使用`$`jQuery 等符号的库。

尝试将您的代码更改为：

```
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
$.noConflict(); 
```

您可能`Telerik RAD controls`正在使用引用 jQuery 并且您覆盖了它们的引用。

# html - 当我使用动态链接的 CSS 单击菜单时，如何选择菜单？

> ID：10328692
> 
> 赞同：1
> 
> 时间：2012-04-26T07:06:32.270
> 
> 标签：html, css, html-lists

我有一个名为 header.php 的通用菜单页面，我已将其包含在我的索引和另一个页面中。现在我要实现一个工具，通过它，当我单击它时它将选择菜单，当我单击另一个菜单时，选择将跳转到该菜单。但问题是，这里我使用的是动态页面（只有两个页面）一个 index.php，另一个假设是 details.php，并且我使用链接作为

这是我正在使用的 CSS

```
 div.DHeader03 div.DHeader03MenuTop{background-color:#333;height:31px;float:left;width:100%;}div.DHeader03 div.DHeader03MenuTop a{padding:5px 10px 5px 10px;color:#ccc;float:left;}div.DHeader03 div.DHeader03MenuTop a:hover{color:#fff;background-color:#000;} 
```

下面是我的 header.php 页面代码（仅限菜单部分）

```
<div class="DHeader03">
    <div class="DHeader03MenuTop">
        <a href="http://www.banglanews24.com/new/categorizednews.php?newtype=15">Home</a>
        <a href="http://www.banglanews24.com/new/categorizednews.php?newtype=3">About</a>

    </div>
    <div class="DHeader03MenuBottom">
        <a href="http://www.banglanews24.com/new/categorizednews.php?newtype=33">Test</a>
        <a href="http://www.banglanews24.com/new/categorizednews.php?newtype=17">Contact</a>

    </div>
</div> 
```

现在我的问题是，在这种情况下我该**如何实现呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:49:27.147

如果重点是创建一个带有下拉和悬停、选定、链接等的菜单。我可能会建议您使用无序列表。例如。

```
<ul>
  <li>
    <a href="www.something here">link</a>
  </li>
  <li>
    <a href="www.something here">link II</a>
  </li>
</ul> 
```

然后做出适当的造型。我建议您查看此菜单下拉示例。[http://lwis.net/free-css-drop-down-menu/](http://lwis.net/free-css-drop-down-menu/)。不错的 CSS 启动，满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T10:23:57.910

你可以试试这样..

```
<style type="text/css"> 
    li.selected {
        background-color: #f90;
    }
</style>

<script>
$('ul.DHeader03 li a').click(
function(e) {
    e.preventDefault(); // prevent the default action
    e.stopPropagation; // stop the click from bubbling
    $(this).closest('ul').find('.selected').removeClass('selected');
    $(this).parent().addClass('selected');
}); 
</script>

<ul class="DHeader03">
<div class="DHeader03MenuTop">
    <li><a href="http://www.ngorg.com/?m=1">Home</a></li>
    <li><a href="http://www.ngorg.com/?m=2">About</a></li>

</div>
<div class="DHeader03MenuBottom">
    <li><a href="http://www.ngorg.com/?m=3">Test</a></li>
    <li><a href="http://www.ngorg.com/?m=4">Contact</a></li>
</div>
</ul> 
```

# xml - XSD：导入复杂类型不起作用

> ID：10328695
> 
> 赞同：4
> 
> 时间：2012-04-26T07:06:51.430
> 
> 标签：xml, xsd

`schema.xsd`我在外部文件中有一个带有自定义类型的 XML 模式`types.xsd`。我不知道为什么我的复杂类型`typeComplex`没有正确验证。像这样的简单类型`typeSimple`可以正常工作。那有什么问题？

日食说：

> cvc-complex-type.2.4.a：发现以元素“a”开头的无效内容。需要 '{"http://www.example.org/types":a}' 之一。

架构.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.org/schema" elementFormDefault="qualified"
    xmlns:t="http://www.example.org/types">

    <xs:import schemaLocation="types.xsd" namespace="http://www.example.org/types" />

    <xs:element name="root">
        <xs:complexType>
            <xs:all>
                <xs:element name="simple" type="t:typeSimple" />
                <xs:element name="complex" type="t:typeComplex" />
            </xs:all>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

类型.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.org/types" xmlns="http://www.example.org/types"
    elementFormDefault="qualified">

    <xs:simpleType name="typeSimple">
        <xs:restriction base="xs:string">
            <xs:length value="3" />
        </xs:restriction>
    </xs:simpleType>

    <xs:complexType name="typeComplex">
        <xs:sequence>
            <xs:element name="a" type="xs:string" />
            <xs:element name="b" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

text.xml - 对 xsd 无效 - 为什么？

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns="http://www.example.org/schema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.example.org/schema schema.xsd " xmlns:t="http://www.example.org/types">
    <simple>XXX</simple>
    <complex>
        <a></a> <!-- not valid here; Eclipse say: cvc-complex-type.2.4.a: Invalid content was found starting with element 'a'. One of '{"http://www.example.org/types":a}' is expected. -->
        <b></b>
    </complex>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:29:52.570

我所做的是我想要使用`<xs:include />`.

架构.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.org/schema" elementFormDefault="qualified">

    <xs:include schemaLocation="types.xsd" />

    <xs:element name="root">
        <xs:complexType>
            <xs:all>
                <xs:element name="simple" type="typeSimple" />
                <xs:element name="complex" type="typeComplex" />
            </xs:all>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

类型.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">

    <xs:simpleType name="typeSimple">
        <xs:restriction base="xs:string">
            <xs:length value="3" />
        </xs:restriction>
    </xs:simpleType>

    <xs:complexType name="typeComplex">
        <xs:sequence>
            <xs:element name="a" type="xs:string" />
            <xs:element name="b" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:46:07.193

您的实例文档被声明为命名空间“http://www.example.org/schema”内的“根”类型的实例。这可以。在本文档中，您希望使用命名空间“http://www.example.org/types”中的类型，因此您已将这个命名空间包含在前缀中。这也很好。

但是，当您使用“http://www.example.org/types”命名空间中包含的类型时，您将忽略您在 xmlns 声明中定义的前缀。

引用这些类型的正确方法：

```
<root xmlns="http://www.example.org/schema" 
      xmlns:t="http://www.example.org/types">
  <simple>XXX</simple>
  <complex>
    <t:a></t:a>
    <t:b></t:b>
  </complex>
</root> 
```

**更新**

您的替代方案是：

使用不合格的类型 - 只需将架构定义更改为 make `elementFormDefault="unqualified"`。这意味着您现在可以这样做：

```
<root xmlns="http://www.example.org/schema">
  <simple xmlns="">XXX</simple>
  <complex xmlns="">
    <a></a>
    <b></b>
  </complex>
</root> 
```

或者，不要使用 XSD 架构。这意味着您可以只使用格式良好的 xml：

```
<root>
  <simple>XXX</simple>
  <complex>
    <a></a>
    <b></b>
  </complex>
</root> 
```

# sharepoint-2010 - 在 SharePoint 2010 上开发 Web 部件

> ID：10328698
> 
> 赞同：1
> 
> 时间：2012-04-26T07:06:55.170
> 
> 标签：sharepoint-2010, web-parts

我第一次尝试使用 SharePoint 2010 进行 SharePoint Web 部件开发。我在服务器上安装了 SharePoint 2010，我想在其他系统上开始 Web 部件开发。但是当我尝试在该系统上创建一个 Web 部件项目时，它说：

“此计算机上未安装 SharePoint 服务器。必须安装 SharePoint 服务器才能使用 SharePoint 项目。”

请谁能告诉我如何进行 Web 部件开发。

真的有必要在我们要开发 SharePoint Web 部件的每个开发系统上安装 SharePoint 服务器吗？

我认为有一种方法可以在服务器上安装 SharePoint，并将所有开发系统连接到该服务器并在其上开发 Web 部件。

如果有人知道解决此问题的方法，请帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:11:21.857

您当然可以在未安装 SharePoint 的系统上开发 Web 部件。虽然，使用 SharePoint*更*容易做到这一点。我通常在安装了 SharePoint 和开发工具的虚拟机（我使用 VMware Workstation）中进行开发。这为您提供了一个直接开发到 SharePoint 环境的环境，而 VM 为您提供了简单的快照功能。

[如果您想在没有 SharePoint 的情况下进行开发，请考虑使用WSPBuilder](http://wspbuilder.codeplex.com/ "WSPBuilder")之类的东西，而不是 Visual Studio SharePoint 项目（需要连接）。您还需要制作一些 SharePoint 程序集的本地副本以在您的项目中引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:22:50.680

如果您想在 Visual Studio 2010 中使用 SharePoint 2010 开发工具，您必须在本地安装 SharePoint。

您可以在不使用这些工具的情况下进行 SharePoint 开发，该过程在[Inside Windows SharePoint Services 的第 2 章中进行了描述](http://msdn.microsoft.com/en-us/library/ff798298.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:38:17.827

您必须需要在要开发 sharepoint webpart 的环境中安装 sharepoint 服务器。否则，对服务器系统进行远程停止并在那里开发sharepoint webpart。

# c# - 使用 Roslyn 进行编译时源代码修改

> ID：10328700
> 
> 赞同：23
> 
> 时间：2012-04-26T07:07:06.383
> 
> 标签：c#, .net, msbuild, roslyn

是否可以在 CI 服务器上的 MSBuild 任务中使用 Roslyn 编译之前修改源代码？我已经成功地在 VS 中做我想做的事，但我想知道在 VS 之外是否有可能。目前我正在研究工作区 API 和编译器 API，它们似乎是实现这一目标的正确工具，但我仍然不确定这是否可能？特别是我担心返回我对 MSBuild 所做的更改以使其继续工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T17:13:08.387

这绝对是我们正在考虑的一个场景。今天有几个问题使它有点困难：

1.  由于您已经在 msbuild 中，因此您无法使用 Workspace API 加载项目/解决方案。
2.  要使用常规编译器 API，您需要自己构建一个编译，这可能是一堆工作。

将来，我们希望提供“从 csc/vbc 命令行字符串创建工作区”，这将使这更容易。

看一下[*Hooking into the compiler (csc.exe or vbc.exe) 本身*](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/eef3c6a8-5650-4de2-9768-3c7c9d79641c)和[*Problem with using Roslyn in a MS Build Task*](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/ed1c8476-002f-4c47-bb76-f605cc5e351b)以了解之前的一些讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T14:26:55.627

关于[在 MS Build Task 中使用 Roslyn 的问题](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/ed1c8476-002f-4c47-bb76-f605cc5e351b)，

```
 public class MyTask : Task 
```

将 Task 更改为 AppDomainIsolatedTask 是一种快速修复。我没有msdn帐户，所以我将在此处发布。希望它可以提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:11:44.297

我个人无法对此进行测试，（因此，如果您愿意，请将此“答案”视为评论），但是阅读有关 Roslyn 的内容，尤其是[此](http://blogs.msdn.com/b/csharpfaq/archive/2011/11/03/using-the-roslyn-syntax-api.aspx)博客条目，看起来应该是[可能的](http://blogs.msdn.com/b/csharpfaq/archive/2011/11/03/using-the-roslyn-syntax-api.aspx)（查找“重写“ 段落。

显然，您可以从源代码构造一个语法树（我猜对于编译器来说这并不奇怪），然后使用 API 对其进行修改，最后将其写回字符串/文件或其他任何内容。

另请参阅有关 Roslyn 语法树概念的[MSDN](http://msdn.microsoft.com/en-us/vstudio/hh500769#Toc306015673) ，以及有关“语法转换”的[演练。](http://msdn.microsoft.com/en-us/hh543920)

# php - 如果第一个命令发生错误，如何通过 PHP 继续命令

> ID：10328701
> 
> 赞同：2
> 
> 时间：2012-04-26T07:07:06.327
> 
> 标签：php, command, system, xvfb

我想通过 PHP 执行几个命令，

```
//DISPLAY setting
$command1 = 'export DISPLAY=:1';    
$last_line1 = system($command , $rtn);

//use Xvfb
$command2 = 'Xvfb :1 -screen 0 '.$width.'x'.$height.'x24 &';
$last_line2 = system($command , $rtn);

//open firefox
$command3 = 'firefox -display :1 -width '.$width.' -height '.$height.' -P "webshot" &';
$last_line3 = system($command , $rtn);

//open URL
$command4 = 'firefox -display :1 -remote "openurl('http://www.google.com')" &';
$last_line4 = system($command , $rtn); 
```

command3 出现一些错误，但可以忽略。我想继续执行command4，但是command3出现了一些错误，所以无法执行。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:10:46.307

`error_reporting(0)`在页面顶部定义..虽然这不是一个好的编程习惯，但它是您问题的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:33:17.850

我认为，您应该使用 try catch 来捕获与系统命令相关的异常

# java - 通过接口实例化不能调用具体实现方法

> ID：10328707
> 
> 赞同：1
> 
> 时间：2012-04-26T07:07:40.953
> 
> 标签：java, interface

```
List <String> list = new ArrayList<String>();
list.trimToSize(); 
```

由于`trimToSize()`只出现在界面中`ArrayList`，而不出现在`List`界面中，如果我实例化为一个`interface`而不是一个具体的类，这是丢失的功能之一吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:09:46.043

您只能调用您正在调用的类型提供的方法。如果您想调用该`trimToSize( )`方法，那么您需要先`list`转换为`ArrayList`：

```
( (ArrayList) list ).trimToSize( ); 
```

# java - Jconsole 不能在 linux 机器上工作

> ID：10328711
> 
> 赞同：2
> 
> 时间：2012-04-26T07:08:15.967
> 
> 标签：java, memory-leaks, jconsole

我的 Java 应用程序部署在 WebLogic Server 上。我想监视我的应用程序，看看它是否泄漏了任何内存。
当我在本地机器上运行 jconsole 时，我只需要在命令提示符下编写 jconsole，但是当我通过 putty 连接到 linux 机器并运行此命令时，它只会等待很长时间。
如何为这台 linux 机器运行 JConsole。
我也尝试远程运行它，但它也无法在命令提示符下运行我写了 jconsole host:port 然后它要求输入用户名和密码，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:31:15.987

如果可以，我会使用 VisualVM，但您需要能够显示 X-Windows 应用程序才能有机会显示 JConsole 或 VisualVM。尝试`xterm &`从您的控制台运行。在此之前，您将无法使用任何图形应用程序。

要远程连接，您需要设置 JMX 以允许这样做。您可以从一开始就关闭安全性，或者更好的解决方案是设置用户名和密码。

# c# - 将任何无效的 url 或任何不存在的 url 发送到 asp.net mvc3 中的自定义控制器？

> ID：10328712
> 
> 赞同：1
> 
> 时间：2012-04-26T07:08:24.920
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, global-asax

我是 asp.net mvc3 的新手。我正在构建我的站点，在该站点中我遇到了一个问题，即我有一个命名的控制器`Home`和一个命名的方法，`Index`并且此索引方法现在根据这种情况采用参数 id，有效的 url 应该是这样的**“http://www .counterexample.com/Home/Index/1"**但是如果用户键入这样的 url，我应该怎么做**"http://counterexample.com/whatsisthis"**。它肯定会给出`404`错误，但我想这样做，当任何人键入这样的 URL 时，他应该被重定向到我的另一个名为`Thunder`on 方法的控制器，`ErrorDetails`并且用户在 / 之后在 url 中键入的所有字符都应该作为参数进入此方法，如下所示

```
 public class ThunderController : Controller
{
    public ActionResult ErrorDetails (string id)
    {
        var params = id ; // and the text "whatisthis" should store in param . 
        return View();
    }

} 
```

请注意，用户可以输入任何网址，例如

1.  [http://counterexample.com/whatsisthis/this](http://counterexample.com/whatsisthis/this)
2.  [http://counterexample.com/whatsisthis/this/call](http://counterexample.com/whatsisthis/this/call)

我希望所有这些 URL 或任何不存在的 URL 都应该重定向到我的方法 'ErrorDetails' 。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:15:57.580

您可以在 web.config 文件上设置自定义错误。

```
<customErrors mode="RemoteOnly" >
   <error statusCode="404" redirect="/Thunder/ErrorDetails/" />
 </customErrors> 
```

一旦抛出 404 错误，用户将被重定向到 ErrorDetails 视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:13:36.923

像这样使用[自定义错误](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)（web.config）：

```
<customErrors mode="On" >
   <error statusCode="404" redirect="/Thunder/ErrorDetails/" />
   <!-- You can add other error codes or a generic one for other status codes here -->
</customErrors> 
```

# php - php - 使用 SimpleXML 解析 OAI PMH 文件

> ID：10328716
> 
> 赞同：3
> 
> 时间：2012-04-26T07:08:32.440
> 
> 标签：php, curl, simplexml, oai

我正在尝试 使用 SimpleXML解析此文件： [http ://mdc.cbuc.cat/cgi-bin/oai.exe?verb=ListRecords&metadataPrefix=oai_dc&set=afcecemc&from=2011-06-21&until=2011-06-21。](http://mdc.cbuc.cat/cgi-bin/oai.exe?verb=ListRecords&metadataPrefix=oai_dc&set=afcecemc&from=2011-06-21&until=2011-06-21)

我可以获得所有元素，但那些在标签内的元素。它说标签是空的。这是我的代码。

```
function getXMLfile($URL) {
    $chDyn = curl_init();
    curl_setopt ($chDyn, CURLOPT_URL, $URL);
    curl_setopt($chDyn, CURLOPT_RETURNTRANSFER, 1);
    $xml = curl_exec($chDyn);
    curl_close($chDyn);

    try {
        $xmlObj = new SimpleXMLElement($xml);
    }
    catch (Exception $e) { echo $e; }

    return $xmlObj;
}

$cdmURL = "http://mdc.cbuc.cat/cgi-bin/oai.exe?verb=ListRecords&metadataPrefix=oai_dc&set=afcecemc";

$xmlObj = getXMLfile($cdmURL);
$xmlNode = $xmlObj->ListRecords;

foreach ($xmlNode->record as $rNode) {
    var_dump($rNode->children());
} 
```

但输出是这个：

```
[...]
["metadata"]=>
  object(SimpleXMLElement)#8 (0) {
} 
```

该元素不为空！我知道该解决方案在某种程度上与使用“命名空间”有关，但我不知道如何使它起作用。

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:26:24.810

要使用自己的命名空间访问子级，您必须告知`SimpleXMLElement`您希望子级不在默认语言中。见[`SimpleXMLElement::children`](http://php.net/simplexmlelement.children)。

您链接的文档使用了多个名称空间，因此如果您是新手，可能会有些困惑。

以下是一些示例代码，它扩展了您的代码（并稍微简化了加载，但我认为您理解它）以访问第一个记录元素内的子项（我打破了循环）：

```
$url = 'http://mdc.cbuc.cat/cgi-bin/oai.exe?verb=ListRecords&metadataPrefix=oai_dc&set=afcecemc&from=2011-06-21&until=2011-06-21';

$xmlObj = simplexml_load_file($url);

$xmlNode = $xmlObj->ListRecords;

foreach ($xmlNode->record as $rNode) {
    var_dump($rNode->children());
    var_dump($rNode->metadata->children('oai_dc', 1));
    var_dump($rNode->metadata->children('oai_dc', 1)->dc->children('dc', 1));
    break;
} 
```

这给出了以下输出，我猜这就是您正在寻找的：

```
object(SimpleXMLElement)#7 (2) {
  ["header"]=>
  object(SimpleXMLElement)#9 (3) {
    ["identifier"]=>
    string(29) "oai:mdc.cbuc.cat:afcecemc/521"
    ["datestamp"]=>
    string(10) "2011-06-21"
    ["setSpec"]=>
    string(8) "afcecemc"
  }
  ["metadata"]=>
  object(SimpleXMLElement)#10 (0) {
  }
}
object(SimpleXMLElement)#10 (1) {
  ["dc"]=>
  object(SimpleXMLElement)#8 (0) {
  }
}
object(SimpleXMLElement)#7 (12) {
  ["title"]=>
  string(12) "Puig d'Assas"
  ["creator"]=>
  string(26) "Gallardo i Garriga, Antoni"
  ["date"]=>
  string(19) "[Entre 1912 i 1928]"
  ["relation"]=>
  array(2) {
    [0]=>
    string(72) "Paper; gelatina i plata; positiu; blanc i negre; horitzontal; 12 x 17 cm"
    [1]=>
    string(27) "Estudi de la Masia Catalana"
  }
  ["subject"]=>
  string(9) "Muntanyes"
  ["coverage"]=>
  string(32) "Puig d'Assas ; Osona ; Catalunya"
  ["description"]=>
  array(2) {
    [0]=>
    string(2) "Bo"
    [1]=>
    string(163) "Títol atorgat pel catalogador. Informació extreta dels àlbums de l'EMC: Situació: Puig d'Assas. Facilitada per: Antoni Gallardo i Garriga. Facilitada en: 1928."
  }
  ["publisher"]=>
  string(33) "Centre Excursionista de Catalunya"
  ["source"]=>
  string(29) "Memòria Digital de Catalunya"
  ["type"]=>
  string(5) "Image"
  ["rights"]=>
  string(49) "http://creativecommons.org/licenses/by-nc-nd/3.0/"
  ["identifier"]=>
  string(35) "http://mdc.cbuc.cat/u?/afcecemc,521"
} 
```

# .net - 如何在 wf4.0 中倒带活动？

> ID：10328720
> 
> 赞同：0
> 
> 时间：2012-04-26T07:08:45.997
> 
> 标签：.net, workflow-foundation-4

假设工作流服务 (xamlx) 中有 5 个活动，第 2 和第 5 个活动需要用户通过任何控制机制再次运行。请帮助我如何控制它以及如何重新运行这些活动。流程图是一种解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:07:32.440

没有标准方法来重置工作流中的执行指针。您需要对工作流程中的逻辑进行建模。

# javascript - 哪个 jQuery 事件处理程序适用于页面加载？

> ID：10328722
> 
> 赞同：5
> 
> 时间：2012-04-26T07:08:55.063
> 
> 标签：javascript, jquery, onload-event

我有一个简单的页面，只是试图将加载事件附加到文档。我不确定在 jQuery 中使用哪个事件处理程序来执行此操作。我试过了`$()`，但似乎都没有在正确的时间运行代码。我应该使用,吗？还是我做错了什么。这是一个示例：`$(document).ready``.load``.on``.live`

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
    $(document).ready(
        showWidth()
    );
    function showWidth() {
        alert($('#textTitle').width());
    }
</script>
</head>
<body>
<div class="page">
        <div id="title">
            <h1 id="textTitle">yo</h1>
        </div>
</div>
</body>
</html> 
```

当我运行此警报时，将显示`null`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:09:57.730

您忘记将代码写入函数。

```
$(document).ready(function() {
        showWidth();
    }); 
```

或者只是简单地

```
 $(function() {
        showWidth();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:14:37.570

试试这个[http://jsfiddle.net/vdCwE/](http://jsfiddle.net/vdCwE/)

另外，您确定在您的页面中包含 jQuery 吗？我没有在你的代码中看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:15:34.753

有两种加载状态。一种是“DOM 就绪”，只需使用即可询问

```
// the long way
$(document).ready(function() { console.log("dom ready"); });
// the short way
$(function() { console.log("dom ready"); }); 
```

或者您想等待实际页面（图像、iFrame 等）的“加载”，然后您可以使用

```
$(window).load(function() { console.log("everything should be loaded"); }); 
```

# sql - 从多个表中选择

> ID：10328726
> 
> 赞同：2
> 
> 时间：2012-04-26T07:09:15.653
> 
> 标签：sql, sql-server, sql-server-2008, select

表 B，表 C。

表 A 有 ID，col1

```
ID    COL1
1      abc
2      bcd 
```

表 B 有 col2, col3

```
col2 col3
bcc  abc
acc  bcd 
```

表 C 有 ID,col4

```
ID col3
1   qwe
1   tre
1   uid
2   jkj
2   jwekj 
```

现在，我需要选择 ID、COL1、COL2、计数（表 C 中的 ID）。样本输出将是

```
ID  COL1  COL2  CNT
1   abc   bcc    3
2   bcd   acc    2 
```

有人可以帮我吗？表 A 和 B 使用 COl1 和 COL3 连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:04:06.013

```
select A.ID, A.Col1, B.Col2, Count(*) AS Cnt 
from A
inner join B ON B.Col3 = A.Col1
left join C ON C.ID = A.ID
Group By A.ID, A.Col1, B.Col2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:13:16.400

```
select  a.id
,       max(a.col1)
,       avg(b.col2)
,       count(distinct c.ID)
from    TableA a
join    TableA b
on      a.col1 = b.col3
left join
        TableC c
on      c.id = a.id
group by
        a.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:15:18.500

为什么不通过 ID 加入表 A 和表 C 并获得计数？

```
SELECT TableA.ID, TableA.COL1, TableB.COL2, COUNT(TableC.*)
FROM TableA
INNER JOIN TableB ON TableB.COL3 = TableA.COL1
INNER JOIN TableC ON TableC.ID = TableA.ID
GROUP BY TableA.ID, TableA.COL1, TableB.COL2
ORDER BY TableA.ID, TableA.COL1, TableB.Col2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:10:53.377

```
select A.iD, A.Col1,B.col2, 
       (select count(*) from tableC C where C.id=A.ID) as cnt
from tableA A join tableB B on A.col1=b.col3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T07:26:45.093

```
declare @A  table(ID int, col1 varchar(50))
declare @B  table(col2 varchar(50), col3 varchar(50))
declare @C  table(ID int, col4 varchar(50))

INSERT INTO @A(ID, col1) values(1, 'abc')
INSERT INTO @A(ID, col1) values(2, 'bcd')

INSERT INTO @B(col2, col3) values('bcc'  , 'abc')
INSERT INTO @B(col2, col3) values('acc'  , 'bcd')

INSERT INTO @C(ID, col4) values('1'  , 'qwe')
INSERT INTO @C(ID, col4) values('1'  , 'tre')
INSERT INTO @C(ID, col4) values('1'  , 'uid')
INSERT INTO @C(ID, col4) values('2'  , 'jkj')
INSERT INTO @C(ID, col4) values('2'  , 'jwekj')

-- The query
SELECT a.ID, a.col1, b.col2, (SELECT COUNT(c.ID) FROM @C c WHERE c.ID = a.ID) CNT
FROM @A a join @b b ON a.col1 = b.col3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T07:15:18.827

```
SELECT A.ID, A.COL1, B.COL2, (SELECT COUNT(C.ID) FROM C) AS CNT
FROM A INNER JOIN B ON A.COL1=B.COL3 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T07:15:41.360

也许是这样的：

```
SELECT
    TableA.COL1,
    TableB.col2,
    (
        SELECT
            COUNT(*)
        FROM
            TableC
        WHERE
            TableC.ID=TableA.ID
    )
FROM
    TableA
    JOIN TableB
        ON TableA.COL1=TableB.col3 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T07:15:43.120

```
Select 
    a.Id, a.col1, b.col2, count(c.*) As Cnt
From A as a
Inner Join B as b on a.col1 = b.col3
Inner Join C as c on a.Id    = c.Id
Group By a.Id, a.col1, b.col2 
```

# jsf-2 - 命令按钮的操作不起作用

> ID：10328740
> 
> 赞同：0
> 
> 时间：2012-04-26T07:10:12.970
> 
> 标签：jsf-2, primefaces

我有一个包含许多按钮的**工具栏。**这些按钮必须是指向其他 xhtml 页面的链接。但它们不起作用。这是我的代码：

```
 <h:form>
            <p:toolbar>  
                <p:toolbarGroup align="left">  
                    <p:commandButton id="btn1" type="button" action="faces/Genseignant" value="Gestion Enseignants" icon="ui-icon-folder-open" />  

                    <p:commandButton id="btn2" type="button" action="Gclasse" value="Gestion Classes" icon="ui-icon-folder-open" />  

                    <p:commandButton id="btn3" type="button" action="Getudiant" value="Gestion Etudiants" icon="ui-icon-folder-open" />

                    <p:commandButton id="btn4" type="button" action="Gmatiere" value="Gestion Matières" icon="ui-icon-folder-open" />

                    <p:commandButton id="btn5" type="button" action="Gsalle" value="Gestion Salles" icon="ui-icon-folder-open" />

                    <p:commandButton id="btn6" type="button" value="Gestion Horaires" icon="ui-icon-folder-open" />

                    <p:separator />  

                </p:toolbarGroup>  

                <p:toolbarGroup align="right">  
                    <p:menuButton value="Options">  
                        <p:menuitem value="Acceuil" action="Genseignant"/>  
                        <p:menuitem value="Déconnectté(e)" />  
                    </p:menuButton>  
                </p:toolbarGroup>  

            </p:toolbar>
        </h:form> 
```

当我使用 MenuBar 尝试此操作时，它可以正常工作。请有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:16:21.157

删除`type="button"`属性。否则不能以这种方式使用命令按钮。

从浏览器源代码中可以明显看出区别：

**这是带有** 的按钮`type="button"`：

```
<button id="myform:btn1" type="button" role="button" aria-disabled="false"> 
```

这是**没有** `type="button"`默认设置的按钮`type="submit"`：

```
<button id="myform:btn1"   
        onclick="PrimeFaces.ab({formId:'myform',source:'myform:btn1',
                                process:'@all'}); return false;" 
        type="submit" role="button" 
        aria-disabled="false"> 
```

# performance - 检查一个巨大列表中的流媒体项目

> ID：10328743
> 
> 赞同：2
> 
> 时间：2012-04-26T07:10:15.857
> 
> 标签：performance, list, stream, lookup

这是我们试图解决的问题。我们正在处理大量项目的大量流数据。我们还有一个预定义的项目列表。我们需要检查流中的每个项目是否属于我的预定义列表，该列表非常庞大（大约 400 万个项目）。查找/检查操作应尽可能高效

如果这里的人们可以帮助我指出我可以阅读的论文/算法以正确的方式解决这个问题，那就太好了。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:29:50.230

在找到解决方案之前，您可能希望缩小一些假设范围

*   您的预定义列表是否适合主内存？
*   访问模式会是什么样子？大多数流式传输的项目是相同的类型，还是所有类型都被平等地表示？
*   您的物品是否很小（整数/短字符串）？如果没有，是否每个都附有唯一标识符？
*   预定义列表是静态的还是会改变？多频繁？

一般来说，您需要维护对象的哈希表（或表示这些对象的唯一键）并在每个对象通过您的流进入时查找它。哈希表提供*快速*查找，如果您的数据集是静态的，它们非常适合您描述的用例。但是，在某些情况下，其他解决方案可能会表现得更好，上述问题应该揭示是否是这种情况。

为了进一步阅读，我将向您介绍 Wikipedia 上的[Data Structures](http://en.wikipedia.org/wiki/Data_structure)和[Big-O](http://en.wikipedia.org/wiki/Big_O_notation) notation 文章

**编辑：**我编写了这个快速程序来测量 python 中的哈希查找性能：

```
#!/usr/bin/python

import random
import string
import time

# return a random username, all lowercase, between n and m characters long
def generate_username(min_length = 5, max_length = 10):
    n = random.randint(min_length, max_length)
    return ''.join(random.sample(string.ascii_lowercase, n))

# Build a hash table of 4mil usernames (the 'predefined items')
users = set()
for i in xrange(4000000):
    users.add(generate_username())

# Build a 'stream' of usernames to check against the hash table
stream = []
for i in xrange(10000000):
    stream.append(generate_username())

# Measure performance of hash lookups for 10mil usernames
start = time.clock()
for name in stream:
    if name in users:
        pass #print "%s is present" % name
end = time.clock()

print "%fs (%f - %f)" % (end - start, start, end) 
```

结果：

```
3.660000s (238.100000 - 241.760000) 
```

因此，在 Python 中，您可以在 4 秒内检查 1000 万个用户名，相当于流式传输 >17MB/s。你真的需要多快？:)

# xsd - 在 Enterprise Architect 中生成 XSD 时控制 XSD 序列中元素的顺序

> ID：10328749
> 
> 赞同：2
> 
> 时间：2012-04-26T07:10:37.580
> 
> 标签：xsd, enterprise-architect

我尝试过，但在 Enterprise Architect 中生成 XSD 时找不到任何属性来控制**XSD 序列元素中的元素顺序。**

如果您能对此有所了解，我将不胜感激:)

谢谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:06:34.200

在帮助文件的“XML Schema 配置文件”主题中，有一个与 <<XSDelement>> 关联的标签，名为**position**：

*“导致在包含 complexType 的序列模型组中对元素进行排序。重复和无效的位置标记值被忽略并导致 UML 属性的未定义排序。缺少位置值会导致按指定分配定义的位置，使用剩余元素以未定义的顺序填充缺失的位置。"*

# asp.net - ASP.NET - 将输入数据作为纯文本电子邮件发送

> ID：10328750
> 
> 赞同：1
> 
> 时间：2012-04-26T07:10:44.943
> 
> 标签：asp.net, email

我有一个 aspx 表单，里面有一堆文本框、下拉列表、复选框。当此输入控件充满必要的数据时，我想将此信息作为电子邮件发送。假设我有一个包含申请人姓名的文本框，一个列出职业的下拉列表等等。所以我希望电子邮件包含相同的信息，如

```
 Name:Anthony Brian 
 Occupation: Surgeon
 ...... 
```

我该怎么做？

编辑：如果有人感兴趣，这是aspx：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="WriteMail.aspx.cs"     
 Inherits="WriteMail" %>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0        
 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
 <title></title>
 <style type="text/css">
    .style2
    {
        width: 203px;
    }
    .style3
    {
        width: 226px;
    }
    .style4
    {
    }
    .style6
    {
        width: 198px;
    }
    .style7
    {
        width: 204px;
    }
    </style>
    </head>
    <body>
   <form id="form1" runat="server">
   <div align="center" style="font-weight: bold; font-family: tahoma; font-size: 12px;
    margin-bottom: 10px;">
    Hörmətli istifadəçi!</div>
   <div align="center" style="font-family: tahoma; font-size: 12px;margin-bottom:   
   30px;">
    <span class="style2"><span class="style10">Azərbaycan Respublikası Dövlət Sosial  
   Müdafiə
        Fonduna məktub göndərmək ücün aşağıdakı formanı doldurun.(* - vacib sahələr)  
   </span></span></div>
  <div id="main">
    <table>
        <tr>
            <td class="style6">
                &nbsp;Adınız* :</td>
            <td class="style7">
                Soyadınız* :</td>
            <td class="style3">
                &nbsp;Atanızın adı*</td>
        </tr>

        <tr>
            <td class="style6">
                <asp:TextBox ID="TextBox2" runat="server" Width="182px"></asp:TextBox>
            </td>
            <td class="style7">
              &nbsp;<asp:TextBox ID="TextBox3" runat="server" Width="182px"></asp:TextBox>
            </td>
            <td class="style3">
                &nbsp;<asp:TextBox ID="TextBox4" runat="server" Width="182px"></asp:TextBox>
            </td>
        </tr>

        <tr>
            <td class="style6">
                &nbsp;</td>
            <td class="style7">
                &nbsp;</td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                &nbsp;Ölkə*:&nbsp;</td>
            <td class="style7">
              &nbsp;Şəhər*:&nbsp;</td>
            <td class="style3">
                &nbsp;&nbsp; &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                <asp:TextBox ID="TextBox5" runat="server" Width="182px"></asp:TextBox>
            </td>
            <td class="style7">
                <asp:TextBox ID="TextBox6" runat="server" Width="182px"></asp:TextBox>
            </td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                &nbsp;</td>
            <td class="style7">
                &nbsp;</td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                &nbsp;Ünvan*:</td>
            <td class="style7">
                &nbsp;</td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style4" colspan="3">
                <asp:TextBox ID="TextBox7" runat="server" Width="602px"></asp:TextBox>
            </td>
        </tr>

        <tr>
            <td class="style6">
                &nbsp;</td>
            <td class="style7">
                &nbsp;</td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                Telefon kodu və nömrəsi*:</td>
            <td class="style7">
                Email*:</td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                <asp:TextBox ID="TextBox8" runat="server" Width="182px"></asp:TextBox>
            </td>
            <td class="style7">
                <asp:TextBox ID="TextBox9" runat="server" Width="182px"></asp:TextBox>
            </td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                &nbsp;</td>
            <td class="style7">
                &nbsp;</td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                Yaşınız*:</td>
            <td class="style7">
                Cinsiniz*:</td>
            <td class="style3">
                &nbsp;</td>
        </tr>

        <tr>
            <td class="style6">
                <asp:TextBox ID="TextBox10" runat="server" Width="66px"></asp:TextBox>
            </td>
            <td class="style7">
                <asp:CheckBoxList ID="CheckBoxList1" runat="server" 
                    RepeatDirection="Horizontal">
                    <asp:ListItem Value="1">Kişi</asp:ListItem>
                    <asp:ListItem Value="2">Qadın</asp:ListItem>
                </asp:CheckBoxList>
            </td>
            <td class="style3">
                &nbsp;</td>
        </tr>

    </table>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:15:24.130

这是用于从您的代码隐藏文件发送电子邮件的 ac# 片段：

```
        public bool SendEmail(string to, string subject, string body) {

            // 从 Web.config 获取 SMTP 服务器的主机名
            字符串主机名 = ConfigurationManager.AppSettings["SMTP"];
            // 示例：添加
            // 到 Web.config 的部分
            字符串用户 = ConfigurationManager.AppSettings["SMTP_user"];
            字符串 pwd = ConfigurationManager.AppSettings["SMTP_pwd"];

            MailMessage 邮件 = 新的 MailMessage();
            mail.From = new MailAddress("your@email.com", "Name");
            mail.To.Add(to);
            mail.Subject = 主题；
            邮件.正文 = 正文；
            邮件.IsBodyHtml = 假；
            SmtpClient 客户端 = 新 SmtpClient(主机名);
            client.Credentials = new System.Net.NetworkCredential(user,pwd);
            尝试 {
                客户端.发送（邮件）；
                返回真；
            } 捕捉（异常）{
                返回假；
            }

        }

```

祝你好运；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:49:57.690

您可以使用下面的代码从您的 aspx 页面获取详细信息并将其作为电子邮件正文发送。

```
public string GetHtmlBody()
{
    String strHTMLBody = String.Empty;

    if (TextBox2.Text.ToString().Trim() != "")
    {
        strHTMLBody = strHTMLBody + "Name : " + TextBox2.Text.ToString().Trim() + "<br/>"; 
    }
    if (TextBox3.Text.ToString().Trim() != "")
    {
        strHTMLBody = strHTMLBody + "Surname : " + TextBox3.Text.ToString().Trim() + "<br/>";
    }
    if (TextBox2.Text.ToString().Trim() != "")
    {
        strHTMLBody = strHTMLBody + "Occupation : " + TextBox4.Text.ToString().Trim();
    }

    // like wise you can get other details in same way in string variable.

    return strHTMLBody;

}
public bool SendEmail(string to, string subject)
{

    // get the hostname of the SMTP server from Web.config
    string hostname = ConfigurationManager.AppSettings["SMTP"];
    // Example: add 
    //          to the  section of Web.config
    string user = ConfigurationManager.AppSettings["SMTP_user"];
    string pwd = ConfigurationManager.AppSettings["SMTP_pwd"];

    MailMessage mail = new MailMessage();
    mail.From = new MailAddress("your@email.com", "Name");
    mail.To.Add(to);
    mail.Subject = subject;
    mail.Body = GetHtmlBody();
    mail.IsBodyHtml = true ;
    SmtpClient client = new SmtpClient(hostname);
    client.Credentials = new System.Net.NetworkCredential(user, pwd);
    try
    {
        client.Send(mail);
        return true;
    }
    catch (Exception)
    {
        return false;
    }

} 
```

希望这会帮助你......快乐的编码......

# sql-server-2008 - IBM Webserver 7 上的 JNDI 异常

> ID：10328753
> 
> 赞同：2
> 
> 时间：2012-04-26T07:10:48.017
> 
> 标签：sql-server-2008, spring, jdbc, jndi, websphere-7

连接到数据库时，我的项目代码中出现以下异常。

我正在使用部署我的战争的 IBM WebSphere 7 服务器。我正在使用 spring jdbc 模板来处理我的数据库连接。我的数据库是 MSSQL server 2008 R2。我也在使用服务器上配置的数据源。

以下是我在日志中遇到的异常：

`[ERROR] 2012-04-25 21:40:23,364 com.mt.servlets.GetEmployeeTimeDataServlet - JndiObjectTargetSource failed to obtain new target object; nested exception is com.ibm.websphere.naming.CannotInstantiateObjectException: Exception occurred while the JNDI NamingManager was processing a javax.naming.Reference object. [Root exception is java.lang.reflect.InvocationTargetException]`

值得注意的是，这个例外是一次性的。在刷新页面或尝试再次连接时，不会出现此异常。我在互联网上查了一下，但找不到任何解决方案。由于这种异常很少发生，因此很难确定原因。

任何人都可以让我知道为什么会出现此异常以及可以解决此问题的方法吗？

谢谢

# actionscript-3 - Flex 本地鼠标位置

> ID：10328754
> 
> 赞同：2
> 
> 时间：2012-04-26T07:10:49.490
> 
> 标签：actionscript-3, apache-flex, flex4.5

这是我的示例代码

```
 <canvas id="myCanvas" x="200" y="200" height="300" width="500"  mouseOver="onOver" />
private function onOver(event:MouseEvent):void
{
trace(mouseX,mouseY);
} 
```

它给了我对我的应用程序 MouseX 和 MouseY 的尊重，但我想尊重我的 Canvas。请帮助我任何人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:16:51.077

试试这个可能对你有帮助

```
 <?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
<![CDATA[
 import mx.core.Application;

private function click(evt:MouseEvent):void
 {
 var pt:Point = new Point( this.butt.x, this.butt.y );
 var global:Point = Application.application.localToGlobal( pt );

trace( "local_x: " + pt.x + " x " + pt.y );
 trace( "global_x: " + global.x + " x " + global.y );

var p:Point = stage.nativeWindow.globalToScreen(new Point(this.butt.x, this.butt.y));

 trace(p.x + " x " + p.y);
 var na:NativeWindow = new NativeWindow(new NativeWindowInitOptions());
  na.visible = true;
 na.width = 100;
  na.height = 100;
 na.x = p.x;
 na.y = p.y;
  na.activate();

}
]]>
</mx:Script>

<mx:Button x="10" y="10" id="butt" label="Click" click="click(event)" />

 </mx:WindowedApplication> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:55:34.153

尝试以下跟踪： -

```
trace(event.target.mouseX);
trace(event.target.mouseY); 
```

# sql - MS SQL 根据两个表检索某些结果

> ID：10328755
> 
> 赞同：1
> 
> 时间：2012-04-26T07:10:49.723
> 
> 标签：sql, sql-server

我有以下代码，但它显示了由于 UNION 的所有记录：

```
'WITH x AS
( 
  SELECT m, ' + @columnlist + ', rn = ROW_NUMBER() OVER (PARTITION BY ClientNric ORDER BY m DESC) 
  FROM  
  (   
    SELECT m = ''' + @table1 + ''', * FROM ' + @table1 + '
    UNION ALL  
    SELECT m = ''' + @table2 + ''', * FROM ' + @table2 + '
  ) AS y 
) 
SELECT ' + @columnlist + ', DataState = m 
  FROM x  
  WHERE rn = 1;'

exec(@sql) 
```

我需要的结果如下：

```
table1 
ID   Name 
1    TestA 
2    TestB     
3    TestC 
4    TestD 

table2 
ID   Name 
1    TestE 
2    TestF     
3    TestG 
4    TestD 

Results: 
Name     DataState 
TestA    table1 
TestB    table1 
TestC    table1 
TestD    table2 
```

能指教如何达到效果吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:32:50.637

我认为左连接应该可以完成这项工作：

```
SELECT
  t1.Name,
  DataState = COALESCE(t2.DataState, 'table1')
FROM table1 t1
  LEFT JOIN (
    SELECT
      Name,
      DataState = 'table2'
    FROM table2
  ) t2 ON t1.Name = t2.Name 
```

或者也许连接应该在`ID`列上，我不确定。无论如何，这至少应该给你一个想法。

# c# - 如何使用sharpsvn检查颠覆URL是文件还是目录

> ID：10328756
> 
> 赞同：3
> 
> 时间：2012-04-26T07:10:50.410
> 
> 标签：c#, svn, c#-4.0, sharpsvn

首先，如果您认为这个问题完全愚蠢，我很抱歉。

我正在开发一个用户可以输入 SVN URL 的应用程序。它可以是目录或文件。我正在使用sharpsvn。

我的目标是以某种方式知道这个 url 是目录还是文件。

例如：svn://svnrepository/Directory/pascal.cs 或 svn://svnrepository/DirectoryName

都是有效的条目。我的工作是区分两者并指出前者是文件而后者是目录的事实。

这可以使用 sharpsvn 来完成吗？

感谢和问候加根

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:26:19.383

Condireng，它不仅是真正颠覆的包装，对你来说*应该*足以执行

```
svn info $path$ 
```

在结果集中必须有`Node Type`字符串。那将给您描述它 a`directory`或`file`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:33:14.137

您可以使用以下方法之一：

*   [svnlook 属性列表](http://www.humbug.in/docs/svnbook-en/svn.ref.svnlook.html)
*   `svn info`
*   `svn ls ... -depth empty`

最后两个在“[检查 svn 存储库 url 不存在](https://stackoverflow.com/questions/868033/check-that-an-svn-repository-url-does-not-exist)”中进行了说明。

[您可以按照“如何使用 SharpSVN 访问 SVN 预提交消息？](https://stackoverflow.com/questions/1380685/how-can-i-get-access-to-the-svn-pre-commit-message-using-sharpsvn) ”的示例将这些调用封装在 SVNSharp 挂钩中。

# sql - 找不到光标和表格

> ID：10328759
> 
> 赞同：1
> 
> 时间：2012-04-26T07:11:08.297
> 
> 标签：sql, oracle, plsql, cursor

我有一个程序可以从某些表中选择 MAX，但由于某种原因它无法找到这些表。有人可以帮助我吗？

```
declare
varible1 varchar2 (255);
temp varchar2 (255);
last_val number(9,0);
 cursor c1 is Select distinct table_name from user_tab_cols order by table_name;
begin
FOR asd in c1
LOOP
temp := asd.table_name;
varible1  := '"'||temp||'"';
select max("id") into last_val from varible1 ;
END LOOP;
end; 
```

例如，第一个表名是acceptance_form，对于select，我需要使用“acceptance_form”。

修改后的代码：

```
declare
varible1 varchar2 (255);
temp varchar2 (255);
last_val number(9,0);
 cursor c1 is Select distinct table_name from user_tab_cols where column_name = 'id';
begin
FOR asd in c1
LOOP
temp := asd.table_name;
execute immediate 'select NVL(max('||'id'||'),0) from "'||varible1||'"' into last_val;
END LOOP;
end; 
```

不能因为 db 区分大小写 Oracle express 10g 表和行是这样创建的

```
CREATE TABLE "ADMINMME"."acceptance_form"
(
    "group_id" NUMBER(9, 0), 
    "id" NUMBER(4, 0) DEFAULT '0' NOT NULL , 
    "is_deleted" NUMBER(4, 0), 
    "name" NVARCHAR2(30) NOT NULL 
); 
```

你能告诉我如何处理这个不存在的异常序列吗？没关系，异常在错误的块中:)

```
declare
temp varchar2 (255);
last_val number(9,0);
 cursor c1 is Select distinct table_name from user_tab_cols where column_name = 'id';
begin
FOR asd in c1
LOOP
temp := asd.table_name;
execute immediate 'select NVL(max("id"),0)+1 from "'||temp||'"' into last_val;
begin
EXECUTE IMMEDIATE 'drop sequence "seq_'|| temp||'"';
EXECUTE IMMEDIATE 'create SEQUENCE "seq_'|| temp ||'" MINVALUE '||last_val||'MAXVALUE                 999999999999999999999999999 INCREMENT BY 1 NOCACHE';
EXECUTE IMMEDIATE 'select '||temp||'.nextval from dual';
EXECUTE IMMEDIATE 'ALTER SEQUENCE "seq_'||temp||'" INCREMENT BY 1';
exception when others then
null;
end;
END LOOP;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:20:51.493

动态 sql 不能以这种方式工作。

```
declare
varible1 varchar2 (255);
temp varchar2 (255);
last_val number(9,0);
 cursor c1 is Select distinct table_name from user_tab_cols order by table_name;
begin
  FOR asd in c1
  LOOP
  temp := asd.table_name;
  begin
    execute immediate 'select max(id) from '||temp into last_val;
    dbms_output.put_line('max(id) for table: ' ||temp||' = '||last_val);
  exception when others then
     dbms_output.put_line('Failed to get max(id) for table: ' ||temp);
  end;
  END LOOP;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:21:14.813

您不能使用变量作为表名。

您可以做的是将完整的 sql 语句创建为字符串并使用 execute immediate

以下是一些示例：http: [//docs.oracle.com/cd/B19306_01/appdev.102/b14261/dynamic.htm#CHDGJEGD](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/dynamic.htm#CHDGJEGD)

# php - 如何在 jquery 日历中添加更多过去的年份

> ID：10328764
> 
> 赞同：2
> 
> 时间：2012-04-26T07:11:40.917
> 
> 标签：php, jquery, html, calendar

我正在使用修改后的（遵循从stackoverflow中获取的修改代码）jquery日历，但我想添加更多过去的年份并且无法选择日期..在这个日历中请帮助我该怎么做？html文件中使用的修改脚本是这样的： -

```
<script>
      $(document).ready(function() {
        $(".datepicker").datepicker( {
            changeMonth: true,
            changeYear: true,
            showButtonPanel: true,
            dateFormat: 'dd MM yy',
            onClose: function(dateText, inst) { 
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).datepicker('setDate', new Date(year, month, 1));
            },
            beforeShow : function(input, inst) {
                if ((datestr = $(this).val()).length > 0) {
                    year = datestr.substring(datestr.length-4, datestr.length);
                    month = jQuery.inArray(datestr.substring(0, datestr.length-5), $(this).datepicker('option', 'monthNames'));
                    $(this).datepicker('option', 'defaultDate', new Date(year, month, 1));
                    $(this).datepicker('setDate', new Date(year, month, 1));
                }
            }
        });
      });
      </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:18:25.337

尝试这个 ：

```
 $(".datepicker").datepicker({ 
    yearRange: '1700:2050', 
```

年份范围为您提​​供更多年份

# ruby - 让 Nokogiri 决定是使用#fragment 还是#parse

> ID：10328771
> 
> 赞同：2
> 
> 时间：2012-04-26T07:11:54.647
> 
> 标签：ruby, xml, nokogiri

我有一段 HTML，我想用 Nokogiri 解析，但我不知道它是一个完整的 HTML 文档（带有 DOCTYPE 等）还是一个片段（例如，只是一个包含一些元素的 div）。

这对 Nokogiri 产生了影响，因为它应该使用 #fragment 来解析片段，而使用 #parse 来解析完整文档。

有没有办法确定给定的文本是片段还是完整的 HTML 文档？

丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:35:28.077

取决于您的页面的垃圾程度，但是

```
/^(?:\s*<!DOCTYPE)|(?:\s*<html)/ 
```

在大多数情况下应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:32:33.607

最简单的方法是查找强制`<html>`标记，例如使用正则表达式`/<html[\s>])/`（允许属性）。

这足以解决您的问题吗？

# jquery - 在 Backbone View 的事件哈希中使用自定义 jquery 插件

> ID：10328772
> 
> 赞同：2
> 
> 时间：2012-04-26T07:11:57.853
> 
> 标签：jquery, jquery-plugins, backbone.js

我已经扩展了 jquery 以具有这样的`returnPress`事件处理程序：

```
jQuery.fn.returnPress = function(x) {
    return this.each(function() {
        jQuery(this).keypress(function(e) {
            if((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
                x();
                return false;
            } else {
                return true;
            }
        });
    });
}; 
```

我可以在我的观点中使用上述内容：

```
this.$('#inputId').returnPress(function(){
    doSomething();
}); 
```

但是我想在 Backbone View 的`event`哈希中使用它，如下所示：

```
events : { "returnPress #inputId" : "doSomething" } 
```

这可能吗？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:22:02.153

事件哈希正在获取您可以绑定的事件，因此事件哈希与 doig 相同：

```
this.$('#inputId').on ('returnPress', function(){
  doSomething();
}); 
```

# dart - 飞镖和 3D 图形

> ID：10328773
> 
> 赞同：4
> 
> 时间：2012-04-26T07:11:59.427
> 
> 标签：dart

我想知道 Dart 是如何处理或将如何处理图形部分的。我知道 WebGl，但它是用 javascript 编写的。Dart 确实有它的 api，但它会得到它自己的东西。为它制作的 3d 库。并且在您看来，网络上 3d/2d/etc 的未来是什么。我知道网站会变得像应用程序。我知道最终将获胜的技术必须是开源的，否则公司可能会采取自己的方向。我还认为网站中使用的 3d 图形和 2d 之间的差距会缩小。对于这个问题，flash 有答案（意思是让某些东西看起来你使用语言 A，而只是让它成为 3d 你使用语言 B，这是不正确的方式，因为两者都是图形。）但它属于一家公司。但是所有其他的东西，比如 webgl，opengl，统一太复杂了，只能在很少的地方工作。手机和台式机将具有相同的图形功能，除了尺寸......我不确定谷歌的 3d 眼镜。

我很想学闪光……但不是。不需要以这种方式制作使用 css 和 html 的按钮，但要使其成为 3d 而无需 hack，您需要学习 1 吨库和整个 javascript。

# search - 如何刷新solr中的索引？

> ID：10328774
> 
> 赞同：0
> 
> 时间：2012-04-26T07:12:05.537
> 
> 标签：search, solr

我已经更改了 schema.xml 中的一个索引，现在想要刷新所有现有文档..

怎么做 ？我不想再次上传所有文件...

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:34:40.820

如果您更改了架构，您必须重新编制索引。当然是在重启 Solr 之后。

更新：如果“添加一个额外的索引”是指添加一个核心，则该核心是空的，因此您必须在那里添加您需要的任何内容。如果您更改字段的分析方式或添加字段等，您必须再次重新索引，您的文档不会更改以反映您所做的更改，直到您重新索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T17:51:38.777

你是如何索引数据的？如果您从数据库中获取数据，您可以使用数据导入处理程序并使用增量导入查询。delta-import 只会更新新添加的字段。查看此链接以获取完整文档：

[http://wiki.apache.org/solr/DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)

# pagination - 用于在 Drupal 7 中显示合并数组的自定义分页

> ID：10328776
> 
> 赞同：0
> 
> 时间：2012-04-26T07:12:16.947
> 
> 标签：pagination, drupal-7, drupal-views

我在 Drupal 7 中的站点中实现了带有视图的搜索功能。我有一个用于此视图的自定义模板，我在其中使用 views_query_alter 显示合并的数组。因此，如果我为视图应用分页，就会出错。它对视图的结果进行分页，而不是我自定义的结果。

我需要实现分页以在视图模板中显示这个合并的数组。任何解决方案都会非常有帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:31:29.053

如果使用视图模块，可以在视图配置页面设置分页。您可以按页面设置所需的结果。

# php - How to extract specific array keys and values to another array?

> ID：10328780
> 
> 赞同：42
> 
> 时间：2012-04-26T07:12:34.170
> 
> 标签：php, arrays

I have an array of arrays like so:

```
array( array(), array(), array(), array() ); 
```

the arrays inside the main array contain 4 keys and their values. The keys are the same among all arrays like this:

```
array( 'id' => 'post_1',
       'desc' => 'Description 1',
       'type' => 'type1',
       'title' => 'Title'
     );

array( 'id' => 'post_2',
       'desc' => 'Description 2',
       'type' => 'type2',
       'title' => 'Title'
     ); 
```

So I want to create another array and extract the `id` and `type` values and put them in a new array like this:

```
array( 'post_1' => 'type1', 'post_2' => 'type2'); // and so on 
```

The keys in this array will be the value of `id` key old arrays and their value will be the value of the `type` key.

So is it possible to achieve this? I tried searching [php.net Array Functions](http://php.net/manual/en/ref.array.php) but I don't know which function to use?

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-08-21T09:41:19.540

PHP 5.5 introduced an array function that does exactly what you want. I'm answering this in hopes that it may help someone in future with this question.

The function that does this is [`array_column`](http://www.php.net/manual/en/function.array-column.php). To get what you wanted you would write:

```
array_column($oldArray, 'type', 'id'); 
```

To use it on lower versions of PHP either use the accepted answer or take a look at how this function was implemented in PHP and use this library: [https://github.com/ramsey/array_column](https://github.com/ramsey/array_column)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-26T07:14:59.567

Just use a good ol' loop:

```
$newArray = array();
foreach ($oldArray as $entry) {
    $newArray[$entry['id']] = $entry['type'];
} 
```

# android - Android HashMap 问题

> ID：10328783
> 
> 赞同：0
> 
> 时间：2012-04-26T07:12:42.563
> 
> 标签：android, hashmap

实际上我必须在数据中使用 HTML 文本，所以有人建议我使用 `HashMap<String,Spanned>`，我使用它，但经常遇到错误。

**问题链接：** [HTML HASHMAP 问题 RSS 提要](https://stackoverflow.com/questions/6200322/hashmap-error-i-cant-load-data-from-string)

```
menuItems.addAll(map); 
```

我一般用`HashMap<String,String>`。请就此给出你的答案。。

```
// creating new HashMap
HashMap<String, Spanned> map = new HashMap<String,Spanned>();

Element e = (Element) nl.item(i);

// adding each child node to HashMap key => value

map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
map.put(KEY_LINK,parser.getValue(e, KEY_LINK));
map.put(KEY_DATE,parser.getValue(e, KEY_DATE));

//Log.i("desxcr",   map.put(KEY_DESC,parser.getValue(e, KEY_DESC)));
// adding HashList to ArrayList
menuItems.addAll(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:44:35.827

可以使用跨接。您需要做的是使用**Html.from**从您的资源中取出跨度值。见下文：

```
Spanned spnd = Html.fromHtml(getString(R.string.your_resource_string));
map.put("yourKey", spnd); 
```

# iphone - 将 NSData 写入/读取到文件失败

> ID：10328784
> 
> 赞同：1
> 
> 时间：2012-04-26T07:12:44.060
> 
> 标签：iphone, objective-c, nsdata, nsfilemanager

我有一个内存缓存，我想将其写出到文件中`viewWillDisappear`并在`viewDidLoad`. 我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSArray *fileArray = [fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];
    NSString *filePath = [NSString stringWithFormat:@"%@cache_%d", [fileArray lastObject], self.index];
    NSURL *fileUrl = [NSURL URLWithString:filePath];
    if ([fileManager fileExistsAtPath:filePath]) {
        self.thumbnailsCache = [NSDictionary dictionaryWithContentsOfURL:fileUrl];
    }
}

- (void)viewWillDisappear:(BOOL)animated
{
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSArray *fileArray = [fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];
    NSString *filePath = [NSString stringWithFormat:@"%@cache_%d", [fileArray lastObject], self.index];
    NSURL *fileUrl = [NSURL URLWithString:filePath];
    [self.thumbnailsCache writeToURL:fileUrl atomically:YES];
} 
```

基于一些 NSLog 和调试，它似乎成功地写入了文件，但尝试读取它只是说找不到文件。我究竟做错了什么？谢谢。

编辑：`self.thumbnailsCache`是一个`NSDictionary`对象`NSData`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:16:33.073

您正在`filePath`错误地创建您的。

`fileArray`是 URL 的数组，而不是 NSStrings（这是您的代码所假设的）。

因此，如果您将最后一个 URL 作为您要使用的缓存目录，您可以通过以下方式创建缓存文件：

```
NSURL * cacheURL = (NSURL *)[fileArray lastObject];
if(cacheURL)
{
    NSURL * fileToWrite = [cacheURL URLByAppendingPathComponent: [NSString stringWithFormat:@"%@cache_%d", self.index]];
} 
```

或者，在您的代码上下文中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSArray *fileArray = [fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];
    NSString *filePath = [NSString stringWithFormat:@"%@cache_%d", [fileArray lastObject], self.index];

    NSURL * cacheURL = (NSURL *)[fileArray lastObject];
    if(cacheURL)
    {
        NSURL * fileToRead = [cacheURL URLByAppendingPathComponent: [NSString stringWithFormat:@"%@cache_%d", self.index]];
        if(fileToRead && ([fileManager fileExistsAtPath:fileToRead]) {
                self.thumbnailsCache = [NSDictionary dictionaryWithContentsOfURL:fileToRead];
        }
    }
}

- (void)viewWillDisappear:(BOOL)animated
{
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSArray *fileArray = [fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];
    NSString *filePath = [NSString stringWithFormat:@"%@cache_%d", [fileArray lastObject], self.index];

    NSURL * cacheURL = (NSURL *)[fileArray lastObject];
    if(cacheURL)
    {
        NSURL * fileToWrite = [cacheURL URLByAppendingPathComponent: [NSString stringWithFormat: @"%@cache_%d", self.index]];
        if(fileToWrite)
        {
            [self.thumbnailsCache writeToURL:fileToWrite atomically:YES];
        }
    }
} 
```

# android - 如何在android中解析xsd模式

> ID：10328785
> 
> 赞同：0
> 
> 时间：2012-04-26T07:12:45.660
> 
> 标签：android, parsing, xsd

我正在使用soap webService 并使用它收到了xsd 模式格式的响应。我不知道如何解析它，我已经尝试了代码但它不起作用，有人可以帮助我。

我的主要课程是

```
public class Mylearning extends ListActivity {
    //ArrayList<cat> list = null;
    private static final String SOAP_ACTION="http://yyy.mobi/GetLearningPortalsList";
    private static final String METHOD_NAME ="GetLearningPortalsList";
    private static final String NAMESPACE ="http://yyy.mobi/";
    private static final String URL = "http://webservices.yyy.mobi/MobileLMSServices.asmx";
    private Bundle bundleResult = new Bundle();
    private JSONObject JSONObj;
    private JSONArray JSONArr;
    //private ArrayList<HashMap<String, Object>> myList;
    SoapObject request;
    TextView tv;
    TextView tv1;
    TextView tv2;               
    ListView mainListView;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylearning);

        //mainListView = (ListView) findViewById(R.id.main_listview);
        request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("SiteURL","http://www.yyy.mobi/");
        request.addProperty("PageID","1");
        request.addProperty("SearchText","");

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();   

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        SoapObject result = null;
        envelope.setOutputSoapObject(request);
        AndroidHttpTransport sab = new AndroidHttpTransport(URL);
        sab.debug = true;
        try {
            sab.call(SOAP_ACTION, envelope);
            if (envelope.getResponse() != null) {
                result = (SoapObject) envelope.bodyIn;
                String[] values = new String[result.getPropertyCount()];
                int j = result.getPropertyCount();
                String repons=result.toString();
            //  Log.d("result",repons.toString());
                Document doc = XMLfunctions.XMLfromString(repons);
                int numResults = XMLfunctions.numResults(doc);

                if((numResults <= 0)){
                    Toast.makeText(Mylearning.this, "Geen resultaten gevonden", Toast.LENGTH_LONG).show();  
                    finish();
                }

                 NodeList nodes = doc.getElementsByTagName("result");
                for (int i = 0; i < nodes.getLength(); i++) {                           
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element)nodes.item(i);
                    map.put("Course", XMLfunctions.getValue(e, "Course"));
                    map.put("Description", "Description:" + XMLfunctions.getValue(e, "Description"));
                    map.put("icon", "icon: " + XMLfunctions.getValue(e, "icon"));
                    mylist.add(map);            
                }

                ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.rowmylearning, 
                        new String[] { "Course", "Description","icon" }, 
                        new int[] { R.id.txt1, R.id.txt2,R.id.img1 });

                setListAdapter(adapter);
                final ListView lv = getListView();

                lv.setTextFilterEnabled(true);  
                lv.setOnItemClickListener(new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                        @SuppressWarnings("unchecked")
                        HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                        Toast.makeText(Mylearning.this, "Course '" + o.get("Course") + "' was clicked.", Toast.LENGTH_LONG).show(); 

                    }
                });

            }
        }

                catch (Exception e) {
                    e.printStackTrace();
                }

            }
} 
```

我的 Xmlfunction 类是

```
public class XMLfunctions {

    public final static Document XMLfromString(String repons){

        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(repons));
          //  Log.d("message",repons.toString());
            doc = db.parse(is);
            Log.d("doc", doc.toString());
        } catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;

    }

     public final static String getElementValue( Node elem ) {
         Node kid;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling() ){
                     if( kid.getNodeType() == Node.TEXT_NODE  ){
                         return kid.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }
    public static int numResults(Document doc){     
        Node results = doc.getDocumentElement();
        int res = -1;

        try{
            res = Integer.valueOf(results.getAttributes().getNamedItem("count").getNodeValue());
        }catch(Exception e ){
            res = -1;
        }

        return res;
    }

    public static String getValue(Element item, String str) {       
        NodeList n = item.getElementsByTagName(str);        
        return XMLfunctions.getElementValue(n.item(0));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:33:49.960

看看[这个讨论](https://stackoverflow.com/questions/8767389/how-to-send-soap-request-and-parse-soap-response-in-xml-format-in-android)

您可以使用[ksoap2](http://code.google.com/p/ksoap2-android/)一个 SOAP 客户端库来解析响应

# jsp - 如何处理多个用户同时访问网页而不在任何用户端关闭套接字

> ID：10328786
> 
> 赞同：0
> 
> 时间：2012-04-26T07:12:49.077
> 
> 标签：jsp, database-connection, database-server

我有一个问题，我尝试将两个或多个 Web 浏览器/具有不同选项卡的相同浏览器登录到同一个网页，会出现错误提示

> io异常：套接字关闭

同时刷新/登录时在任一侧。

我应该使用多线程开放连接吗？如果是的话怎么做？任何人都可以帮助解决这个问题吗？该程序是用 JSP 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:34:17.597

确保您没有在代码中的*任何位置*`Connection`将 SQL 声明和存储为静态或实例变量。

 *例如，这很*糟糕*：

```
public class SomeClass {

    private Connection connection;
    // Or
    private static Connection connection;

} 
```

它应该在您执行 SQL 查询的*同一方法块中声明、创建和关闭。*

所以，这*很好*：

```
public class SomeDAO {

    public SomeEntity find(Long id) throws SQLException {
        Connection connection = null;
        // ...

        try {
            connection = database.getConnection();
            // ...
        }
        finally {
            // ...
            if (connection != null) try { connection.close(); } catch(SQLException ignore) {}
        }

        return someEntity;
    } 
```

### 也可以看看：

*   [使用 MVC 和 DAO 模式在 JSP 页面的 HTML 中显示 JDBC ResultSet](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)*

# windows - 应用程序的两个文档文件夹之一未在 Windows 上保存

> ID：10328788
> 
> 赞同：2
> 
> 时间：2012-04-26T07:13:08.833
> 
> 标签：windows, ipad, ios4, xcode4.2, itunes

我有一个应用程序，其中应用程序的文档目录中有两个文件夹。一个。缩略图。湾。录音。

录音目录的内容：.caf 格式的录音，这些记录的命名类似于“Recording#[number]”+[datetime]。录制文件名称的几个示例：

```
2012-04-26 06/11/50 +0000.caf
2012-04-26 06/11/37 +0000.caf 
```

所以问题是，当我使用 iTunes 在 MAC 上同步我的 iPad 时，我可以保存两个文件夹，即缩略图和录音。但是当我在 Windows 上同步时，记录文件夹不保存。缩略图文件夹保存没有问题，但是当我保存录音文件夹时，它没有出现，意味着它根本没有保存。

我尝试了一种补救措施，即更改录制文件的名称，例如：Recording1.caf 如果我使用这样的命名约定保存录制的文件，那么录制文件夹在 Windows 上保存没有问题。

我想在这里提到的另一件事是，当使用附加日期时间的录制名称时，在 MAC 上同步，将其发送到 Windows，文件使用 quicktime 播放没有问题。（这很明显，但不想错过任何东西。）

我想在这里问什么，为什么当名称带有日期时间时它不保存在 Windows 上。就是这个问题，不改名字就解决不了。因为这个应用程序的以前用户的录音是用日期时间保存的，所以当用户更新到新版本时，我必须先更改所有这些名称。

# java - 如何在回调 servlet 中获取“请求令牌”？

> ID：10328791
> 
> 赞同：0
> 
> 时间：2012-04-26T07:13:26.143
> 
> 标签：java, oauth, linkedin, scribe

我已经将此问题发布到[scribe-java github](https://github.com/fernandezpablo85/scribe-java/issues/255)。我想知道，`Token`如果我只有一个`String`来自 LinkedIn 服务器的对象，我可以在我的回调 servlet 中获取对象。这就是 Scribe 希望我检索“访问令牌”的方式：

```
OAuthService#getAccessToken(token, verifier); 
```

我不能`token`从 a实例化`String`，因为它的构造函数也需要 a `secret`。有人可以解释我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:13:05.567

[长话短说](https://github.com/fernandezpablo85/scribe-java/issues/255)，您应该将`Token`对象保留在请求之间，或者至少保留两个符合它的字符串并像这样重新创建：

`Token t = new Token(token, secret);`

# wpf - 带有绑定参数的 MarkupExtension

> ID：10328802
> 
> 赞同：10
> 
> 时间：2012-04-26T07:14:19.123
> 
> 标签：wpf, binding

我正在研究一个自定义项`MarkupExtension`，其中我需要来自 XAML 的非字符串参数来构造新对象。是否可以在范围内的字段上使用非字符串参数绑定`DataContext`？

换句话说，我怎么能做这样的事情？

```
<ListBox ItemsSource="{Binding Source={local:MyMarkupExtension {x:Type Button},IncludeMethods={Binding Source=CustomerObject.IsProblematic}}}" /> 
```

在哪里`IncludeMethods=CustomerObject.IsProblematic`给我这个错误：

> 无法在“TypeDescriptorExtension”类型的“IncludeMethods”属性上设置绑定。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T07:26:46.097

只能在 DependencyObject 的 DependencyProperty 上设置“绑定”——这是真的。问题是`MarkupExtension`类不是从 派生的`DependencyObject`，这就是为什么不能在它的属性上设置绑定的原因。

**[编辑]**

解决方法是使用[ValueConverters](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。另一种解决方法是更改​​ C# 语言以允许多重继承。顺便说一句，在 Silverlight 中`MarkupExtension`实现了`IMarkupExtension`接口，所以我尝试在我的自定义扩展中实现它并从中派生它`DependecyObject`，在那里添加`DependencyProperty`并设置绑定。它不会崩溃，但绑定实际上是在调用 ProvideValue()**之后设置的。**因此，即使在 Silverlight 中也没有解决方案（或者很难 - 请参阅[Klaus78 的答案](https://stackoverflow.com/a/10329383/951186)中提供的链接）。在 WPF MarkupExtension 中没有实现任何接口，所以你不能绑定到它的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:00:18.927

这个链接是关于

[具有可绑定属性的自定义标记扩展](http://blogs.profitbase.com/tsenn/?p=73)

编辑有人让我注意到这仅适用于 Silverlight，因为在 WPF MarkupExtension 中没有实现 IMarkupExtension 接口。（谢谢 EvAlex）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T22:37:13.950

我找到了解决这个问题的方法。
主要思想是为每个需要绑定的参数定义附加属性。

```
public class MarkupExtensionWithBindableParam : MarkupExtension
{
    public BindingBase Param1 { get; set; } // its necessary to set parameter type as BindingBase to avoid exception that binding can't be used with non DependencyProperty

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        IProvideValueTarget target = serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;
        DependencyObject targetObject;
        DependencyProperty targetProperty;

        if (target != null && target.TargetObject is DependencyObject && target.TargetProperty is DependencyProperty)
        {
            targetObject = (DependencyObject)target.TargetObject;
            targetProperty = (DependencyProperty)target.TargetProperty;
        }
        else
        {
            return this; // magic
        }

        // Bind the Param1 to attached property Param1BindingSinkProperty 
        BindingOperations.SetBinding(targetObject, MarkupExtensionWithBindableParam.Param1BindingSinkProperty, Param1);

        // Now you can use Param1

        // Param1 direct access example:
        object param1Value = targetObject.GetValue(Param1BindingSinkProperty);

        // Param1 use in binding example:
        var param1InnerBinding = new Binding() { Source = targetObject, Path = new PropertyPath("(0).SomeInnerProperty", Param1BindingSinkProperty) }); // binding to Param1.SomeInnerProperty
        return param1InnerBinding.ProvideValue(serviceProvider); // return binding to Param1.SomeInnerProperty
    }

    private static DependencyProperty Param1BindingSinkProperty = DependencyProperty.RegisterAttached("Param1BindingSink", typeof(object)// set the desired type of Param1 for at least runtime type safety check
                       , typeof(MarkupExtensionWithBindableParam ), new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.Inherits));
} 
```

用法很简单：

```
<TextBlock Text="{local:MarkupExtensionWithBindableParam Param1={Binding Path='SomePathToParam1'}}"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-13T14:14:53.027

正如其他人所说，请首先考虑使用[ValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。这是操作绑定的正确方法。

但是，如果您仍然想使用 MarkupExtension 绑定到视图模型或数据上下文，那么您可以在标记扩展类中手动创建绑定。这类似于@nicolay.anykienko 采用的方法，但我们不需要创建附加属性。

例如，我创建了一个货币符号标记扩展。默认行为是使用`CultureInfo.CurrentCulture`但少数视图模型具有自己的 CultureInfo 属性，这些属性与当前文化不同。因此，对于这些视图模型，XAML 需要绑定到此属性。请注意，这可以使用 Converter 轻松完成，但为了举例，这里是标记扩展：

```
public class CurrencySymbolExtension : MarkupExtension
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        var targetProvider = (IProvideValueTarget)serviceProvider.GetService(typeof(IProvideValueTarget));
        var targetElement = targetProvider.TargetObject as FrameworkElement;
        var targetProperty = targetProvider.TargetProperty as DependencyProperty;

        if (!String.IsNullOrEmpty(CultureBindingPath) &&
            targetElement != null &&
            targetProperty != null)
        {
            // make sure that if the binding context changes then the binding gets updated.
            targetElement.DataContextChanged +=
                (sender, args) => ApplyBinding(targetElement, targetProperty, args.NewValue);

            // apply a binding to the target
            var binding = ApplyBinding(targetElement, targetProperty, targetElement.DataContext);

            // return the initial value of the property
            return binding.ProvideValue(serviceProvider);
        }
        else
        {
            // if no culture binding is provided then use the current culture
            return CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol;
        }
    }

    private Binding ApplyBinding(DependencyObject target, DependencyProperty property, object source)
    {
        BindingOperations.ClearBinding(target, property);

        var binding = new Binding(CultureBindingPath + ".NumberFormat.CurrencySymbol")
        {
            Mode = BindingMode.OneWay,
            Source = source,
            FallbackValue = CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol,
        };

        BindingOperations.SetBinding(target, property, binding);
        return binding;
    }

    public string CultureBindingPath { get; set; }
} 
```

然后按如下方式使用：

```
<!-- Standard Usage -->
<TextBlock Text="{local:CurrencySymbol}"/>

<!-- With DataContext Binding -->
<TextBlock Text="{local:CurrencySymbol CultureBindingPath=ViewModelCulture}"/> 
```

视图模型上的属性在哪里`ViewModelCulture`用作绑定的源。

# c - 整数赋值中的舍入误差

> ID：10328805
> 
> 赞同：1
> 
> 时间：2012-04-26T07:14:38.087
> 
> 标签：c, floating-point, printf, rounding, scanf

你如何解释这里发生的舍入？我认为将浮点值分配给 Int 总是会导致小数点后的价值损失？

```
int z=39.99999999999999999999999;
printf("%d",z); // gives 40 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:16:40.553

你不可能有足够的双精度来容纳所有这些 9。

```
>>> '%.15f' % 39.9999999999999
'39.999999999999901'
>>> '%.15f' % 39.99999999999999
'39.999999999999993'
>>> '%.15f' % 39.999999999999999
'40.000000000000000' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T08:33:37.837

正如您所说：C 的浮点到整数转换会截断（丢弃）小数部分。

您使用的是哪个编译器？我相信该分配不是在运行时完成的，它可能是编译器问题。

参考：[comp.lang.c 常见问题列表](http://c-faq.com/fp/round.html)

# asp.net-mvc - 具有插件和多租户支持的 ASP.NET MVC 应用程序以及单独的 AppDomains？

> ID：10328811
> 
> 赞同：5
> 
> 时间：2012-04-26T07:15:13.203
> 
> 标签：asp.net-mvc, asp.net-mvc-3, serialization, mef, appdomain

**问题**

我有一个带有**插件/模块架构**和**多租户支持**的 ASP.NET MVC 3 应用程序。MEF 用于解决依赖关系和加载可插拔部件。

每个模块由控制器、视图和其他对象组成（从物理上讲，它是一个程序集）。模块被加载到租户中。

简单的配置可能如下所示：

**租户 1：**

*   模块 A，版本 1.0 (ModuleA.dll)
*   模块 B，版本 1.0 (ModuleB.dll)

**租户 2：**

*   模块 B，版本 1.0 (ModuleB.dll)

不同模块和不同版本的DLL分别存储在不同的物理位置。并且应用程序在一个 AppDomain 上运行（默认一个）。

但是，如果我们想做不同租户使用不同模块版本的配置，我们会遇到在不同版本中加载相同程序集的问题。这意味着下面的场景不能完全正常工作，因为在从 ModuleB 解析类型期间，我们遇到了组合不匹配异常（版本 1.0 和 1.5 已加载到 MEF 中，但只有一个程序集已通过程序集加载器加载到 AppDomain 中）。

**租户 1：**

*   模块 A，版本 1.0 (ModuleA.dll)
*   模块 B，版本 1.0 (ModuleB.dll)

**租户 2：**

*   模块 A，版本 1.5 (ModuleB.dll)

**解决方案？**

所以我们想出了一种解决方案，即将**不同的租户及其模块/程序集加载到单独的 AppDomains**中。这意味着从我们的示例中，Tenant1 和 Tenant2 被加载到 AppDomain1 和 AppDomain2 中。在 ASP.NET MVC 管道中，我们连接到控制器工厂以选择合适的应用程序域，如下所示：

*   请求默认处理 AppDomain（Web 应用程序启动的那个）
*   控制器工厂
    *   从请求中获取 Tenant_Id 并从适当的 AppDomain 解析适当的控制器（我们有 Tenant_Id->Tenant->AppDomain 关系）
        *   返回 ControllerProxy （这是一个代理类，实现了 IController 并继承 MarshalByRefObject 以便能够在不同的 App Domians 之间传递控制器）
*   动作调用者
    *   在控制器代理对象上调用正确的操作，现在执行发生在底层应用程序域中
    *   **在这里我们遇到了问题**，因为动作调用者无法将不可序列化的 RequestContext 传递给另一个应用程序域（换句话说，controllerProxy.Execute(RequestContext context) 正在引发关于序列化的异常）

**问题）：**

*   如何以一种很好的方式在应用程序域之间传递 RequestContext（不可序列化对象）？
*   是否可以连接到管道中的另一个步骤以将执行重定向到底层应用程序域（在控制器工厂之前？）
*   或者关于这个问题的另一种解决方案的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:40:13.153

不可能。如果您尝试使用不同的 AppDomain，ASP.NET 会再次出现并困扰您。

相反，使用基于角色的授权来控制对不同模块的访问。

我刚刚写了一篇关于 ASP.NET MVC3 中的插件系统的文章：http: [//blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:55:27.800

这并不能直接回答您关于 ASP.NET MVC 中的多个应用程序域的问题。但是，关于其他选项，您可能需要查看托管应用程序框架（又名 System.Addin）。它是 .NET Framework 的一部分，与 MEF 类似，它支持动态加载模块。但是，它内置了跨应用程序域拆分这些模块的功能。它可能更适合您的需求。不过，我不确定它与 ASP.NET MVC 的匹配程度如何。

[MSDN 上](http://msdn.microsoft.com/en-us/library/bb384200.aspx)的这份文档应该让您开始使用 MAF。

# android - 从移动浏览器单击网页的按钮启动 Android 应用程序 .. 开发插件

> ID：10328813
> 
> 赞同：1
> 
> 时间：2012-04-26T07:15:18.170
> 
> 标签：android

此实现的基本目标最初是使用 Android 应用程序将文件上传到特定文件服务器位置。成功上传后，会向用户发送一封带有下载按钮（在网页上）的电子邮件。我想为用户提供首先下载然后使用我的 Android 应用程序将文件上传到不同文件服务器位置的功能。

**脚步**

i> 从设备的移动浏览器打开网页并单击下载按钮。

ii> 下载按钮通常将 zip 文件下载到移动设备的 SDCard。但是，当用户单击“下载”按钮时，我想提供不同的功能。

选项列表显示给用户：

a>存储到 SDCard

b>我的Android应用程序（Android已经安装在设备上）

当用户单击 Store to SDCard 选项时，zip 文件将自动存储在 SDCard 上。但如果用户点击我的 android 应用程序，该应用程序将启动并移动到特定屏幕。在那个屏幕上，我将有一个按钮，可以选择将 zip 文件保存到文件服务器。

当用户单击按钮时，首先我需要将 zip 文件下载到设备 SDCard 上的临时文件夹，然后将其上传到不同的文件服务器位置。

有关此插件开发的任何提示/建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:23:57.293

您应该查看 android url 方案。检查[这个](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)SO 问题。可能会帮助你。

# ubuntu-10.04 - Ubuntu 升级（Windows 7 双启动）

> ID：10328818
> 
> 赞同：0
> 
> 时间：2012-04-26T07:15:24.277
> 
> 标签：ubuntu-10.04

我目前在 Windows 7 旁边安装了 Ubuntu 10.04，并且想卸载它，以便我可以使用 12.04。在网上看了看似乎卸载起来相当复杂而不会遇到任何问题。

有谁知道在不破坏我的笔记本电脑的情况下卸载的白痴证明方式。在处理操作系统时，我不是那么技术

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:18:34.027

[https://wiki.ubuntu.com/PrecisePangolin/TechnicalOverview/Beta2](https://wiki.ubuntu.com/PrecisePangolin/TechnicalOverview/Beta2)

有一个部分叫做：从 Ubuntu 11.10 或 Ubuntu 10.04 LTS 升级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:56:52.267

1.  将要保存的数据从现有 Ubuntu 备份到外部驱动器。2\. 准备新的 Ubuntu LiveCD。
2.  从新的 LiveCD 启动并安装新的 Ubuntu 而不是旧的 - Ubuntu 安装程序应该有这样的选项。
3.  然后从外部驱动器恢复您的数据。我就是这样做的。

# c# - HQL 中的转义冒号（使用 geography::STGeomFromWKB(...)）

> ID：10328820
> 
> 赞同：0
> 
> 时间：2012-04-26T07:15:32.600
> 
> 标签：c#, sql-server, nhibernate, fluent-nhibernate

我希望有人可以给我一个与流畅的 NHibernate 使用相关的提示。由于冒号被视为参数，我无法使以下代码块工作。有什么办法可以逃脱它们吗？

```
_session.CreateSQLQuery(
  "insert into disposal_site"
  + "(geom, description) "
  + "VALUES (geography::STGeomFromWKB(:wkb,4326), :description)")
  .SetBinary("wkb", entity.wkb)
  .SetString("description", entity.description)
  .ExecuteUpdate() 
```

任何帮助将不胜感激！

最好的问候，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:35:46.757

一个可能的解决方案（未尝试过）是使用没有冒号的名称注册您的函数。

您可以通过从相应的方言（例如[MsSql2008Dialect](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/MsSql2008Dialect.cs "MsSql2008Dialect.cs 源码")）继承并`RegisterFunction`在构造函数中使用来做到这一点。

# qt - Qt - 专注于网页的指定区域

> ID：10328821
> 
> 赞同：0
> 
> 时间：2012-04-26T07:15:34.220
> 
> 标签：qt, webkit, scroll

我正在尝试使用能够打开网页的 QT 创建一个插件，但我只希望窗口专注于 300x300 像素区域。该区域位于页面中间的某个位置。

我能够加载页面然后执行滚动操作，但这似乎不是很干净。

有谁知道这是否可能？我检查了 QtWebFrame 类参考： [http](http://doc.qt.io/archives/qt-4.7/qwebframe.html) ://doc.qt.io/archives/qt-4.7/qwebframe.html 但也许我遗漏了一些东西。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:57:16.497

如果您不需要与页面交互，您可以调用[`QWebFrame::render(QPainter* painter, const QRegion& clip)`](http://qt-project.org/doc/qt-4.8/qwebframe.html#render-2)并将其绘制到小部件上，指定`clip`为所需区域。

# linq - 林克排名

> ID：10328827
> 
> 赞同：0
> 
> 时间：2012-04-26T07:15:55.197
> 
> 标签：linq

有一个通用的数字列表，比如说

{980, 850,700, 680}---n 个

我尝试将上面的列表与十进制数字进行比较。比如说 690.，我需要的 O/p 是，得到我要输入的数字的排名（“692）。即，所需的 O/P 应该是 Ranking =“4”

我怎样才能获得上述场景的 O/p ..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:59:19.020

您的问题不清楚，我不确定在扮演什么角色`690`。

假设用户可以输入一个数字，并且您希望在插入该数字时在列表中找到该数字的排名（索引）。还假设您的列表应该按降序排序，因为您希望新的位置`int`根据它的值：

```
var input = 692;
var numbers = new List<int>() { 980, 850, 700, 680 };
var firstLower = numbers.OrderByDescending(i => i)
    .Select((i, index) => new { Value = i, Index = index })
    .FirstOrDefault(x => x.Value < input);
var rank = firstLower == null ? numbers.Count + 1 : firstLower.Index + 1; 
```

请注意，`OrderByDescending`如果您的列表已经排序，这可能是多余的，但我假设您的示例数据只是意外排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:40:26.950

继亚历克斯的帖子之后，我认为您正在寻找

```
var numbers = new List<int>() { 980, 850, 700, 680 };
var dec = new Decimal(692.0);
var temp = numbers.Count(x => x > dec) + 1; 
```

这将返回您正在寻找的职位

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:29:48.400

如果要在列表中查找十进制输入与 int 的完全匹配，可以使用 FindIndex。

```
 var numbers = new List<int>() { 980, 850, 700, 680 };
    var dec = new Decimal(680.0);
    var res = numbers.FindIndex(x => x == dec); 
```

它返回匹配的从 0 开始的位置。

# json - 如何将 JSON 代码转换为映射

> ID：10328832
> 
> 赞同：-2
> 
> 时间：2012-04-26T07:16:11.053
> 
> 标签：json, map

使用 org.json.jar

我知道将 JSON 代码转换为 JSONObject

```
JSONObject fieldsJson = new JSONObject("{\"a\":\"b\"}"); 
String value= fieldsJson.getString("a"); 
```

但是如何将 JSON 代码转换为映射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:44:38.837

`String str = "{\"age\":\"23\",\"name\":\"ganlu\"}"; JSONObject jobj = JSONObject.fromObject(str); Map<String,String> tmpMap = (Map) JSONObject.toBean(jobj,Map.class); Set<String> keys = tmpMap.keySet(); for(String key : keys){ System.out.println(key+":"+tmpMap.get(key)); }`

愿这对你有所帮助。

# .net - .net base.dispose() 也在关闭其他形式。

> ID：10328835
> 
> 赞同：0
> 
> 时间：2012-04-26T07:16:18.280
> 
> 标签：.net, winforms, dispose

我在我的应用程序中使用了两种形式，让说 A 和 B。在关闭 AI 时，我需要在 A 的 dispose 方法中调用 base.dispose()，否则有时我会因为内存问题看到应用程序的一些意外行为。Form B 是 Form B = new Form 本地声明的表单，由 ShowDialog 方法显示。当我在表单 A 中调用 base.dispose() 时，它也会关闭表单 B。但我需要保持表格 B 的打开状态。有什么建议么 ？

谢谢， 阿比纳夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:23:30.967

由于表格 A 拥有表格 B，这是预期的行为。

将 Form B 的声明和创建作为全局资源移动到您的应用程序中，`Program.cs`并从 Form A 调用`Show()`FormB 的方法。

`ShowDialog`意味着一个模态对话框，这在您描述的场景中没有意义。如果您确实需要，请分配一个全局所有者并将其用于`ShowDialog(owner)`

顺便提一句。专注于内存问题的根本原因，而不是尝试围绕它实现基于 UI 的看门狗功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:02:38.820

在您的应用程序设置中，您可以定义关闭模式（在主窗体上关闭或在最后一个窗体上关闭）。尝试将其设置为在最后一个表单上关闭。

更新：我自己尝试过并关闭调用者（在另一个表单上调用 ShowDialog() 的表单也会关闭对话框本身，我想这是设计使然。

但是，使用这段代码，我可以创建一个对话框，关闭调用者并且对话框仍然存在：

```
// inside formA
private void button2_Click(object sender, EventArgs e)
{
    var owner = new Form();
    var dialog = new FormB();

    // attach to the dialog.button1.Click event to force a close
    // of the current formA instance.
    // button1.modifiers has (at least) to be set internal
    dialog.button1.Click += (x, y) => this.Close();
    dialog.ShowDialog(owner);

    dialog.Dispose();
    owner.Dispose();
} 
```

现在，如果我单击 FormB 中的 button1，FormA 将关闭，Form B 仍然存在。FormA 不是 MainForm。

# asp.net-mvc-3 - 在 URL 中使控制器名称可见，但参数不可见

> ID：10328836
> 
> 赞同：0
> 
> 时间：2012-04-26T07:16:20.053
> 
> 标签：asp.net-mvc-3, url, asp.net-mvc-routing

有没有办法在 MVC3 中创建一个仅包含控制器名称但不包含其参数的 URL 我做了`@url.Action("action","controller",the model)`一个我希望用户看到的操作；'/controller/action' 不是 '/controller/action?....&..&..' 我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:42:06.590

您可以使用 MVC 控制库。我做了类似的事情而不需要 contrlib

```
public static class UrlExtensions
{
    public static string Action<TController>(this UrlHelper urlHelper, Expression<Action<TController>> expression) where TController : Controller
    {
        return BuildUrlFromExpression(urlHelper.RequestContext, urlHelper.RouteCollection, expression);
    }

    public static string ActionWithParameters<TController>(this UrlHelper urlHelper, Expression<Action<TController>> expression) where TController : Controller
    {
        return BuildUrlFromExpressionWithParameters(urlHelper.RequestContext, urlHelper.RouteCollection, expression);
    }

    public static RedirectToRouteResult Redirect<TController>(this TController controller, Expression<Action<TController>> expression) where TController : Controller
    {
        var valuesFromExpression = ExpressionHelper.GetRouteValuesFromExpressionWithParameters(expression);

        return new RedirectToRouteResult(valuesFromExpression);

    }

    private static string BuildUrlFromExpression<TController>(RequestContext context, RouteCollection routeCollection, Expression<Action<TController>> action) where TController : Controller
    {
        var valuesFromExpression = ExpressionHelper.GetRouteValuesFromExpression(action);
        var virtualPathForArea = RouteCollectionExtensions.GetVirtualPathForArea(routeCollection, context, valuesFromExpression);
        if (virtualPathForArea != null)
            return virtualPathForArea.VirtualPath;
        return null;
    }

    private static string BuildUrlFromExpressionWithParameters<TController>(RequestContext context, RouteCollection routeCollection, Expression<Action<TController>> action) where TController : Controller
    {
        var valuesFromExpression = ExpressionHelper.GetRouteValuesFromExpressionWithParameters(action);
        var virtualPathForArea = RouteCollectionExtensions.GetVirtualPathForArea(routeCollection, context, valuesFromExpression);
        if (virtualPathForArea != null)
            return virtualPathForArea.VirtualPath;
        return null;
    }
}

public static class ExpressionHelper
{
    public static RouteValueDictionary GetRouteValuesFromExpression<TController>(Expression<Action<TController>> action) where TController : Controller
    {
        MethodCallExpression call;
        return GetRouteValuesFromExpression(action, out call);
    }

    public static RouteValueDictionary GetRouteValuesFromExpressionWithParameters<TController>(Expression<Action<TController>> action) where TController : Controller
    {
        MethodCallExpression call;
        var rvd = GetRouteValuesFromExpression(action, out call);
        AddParameterValuesFromExpressionToDictionary(rvd, call);
        return rvd;
    }

    private static RouteValueDictionary GetRouteValuesFromExpression<TController>(Expression<Action<TController>> action, out MethodCallExpression call) where TController : Controller
    {
        if (action == null)
            throw new ArgumentNullException("action");
        call = action.Body as MethodCallExpression;
        if (call == null)
            throw new ArgumentException("MustBeMethodCall", "action");
        string name = typeof(TController).Name;
        if (!name.EndsWith("Controller", StringComparison.OrdinalIgnoreCase))
            throw new ArgumentException("TargetMustEndInController", "action");
        string str = name.Substring(0, name.Length - "Controller".Length);
        if (str.Length == 0)
            throw new ArgumentException("CannotRouteToController", "action");
        string targetActionName = GetTargetActionName(call.Method);
        var rvd = new RouteValueDictionary();
        rvd.Add("Controller", (object)str);
        rvd.Add("Action", (object)targetActionName);
        var linkAreaAttribute = typeof(TController).GetCustomAttributes(typeof(ActionLinkAreaAttribute), true).FirstOrDefault() as ActionLinkAreaAttribute;
        if (linkAreaAttribute != null)
        {
            string area = linkAreaAttribute.Area;
            rvd.Add("Area", (object)area);
        }
        return rvd;
    }

    public static string GetInputName<TModel, TProperty>(Expression<Func<TModel, TProperty>> expression)
    {
        if (expression.Body.NodeType == ExpressionType.Call)
            return GetInputName((MethodCallExpression)expression.Body).Substring(expression.Parameters[0].Name.Length + 1);
        else
            return expression.Body.ToString().Substring(expression.Parameters[0].Name.Length + 1);
    }

    public static PropertyInfo GetPropertyInfo<TModel, TValue>(Expression<Func<TModel, TValue>> expression)
    {
        var member = expression.Body as MemberExpression;
        if (member == null)
            return null;
        var propInfo = member.Member as PropertyInfo;

        return propInfo;
    }

    private static string GetInputName(MethodCallExpression expression)
    {
        var expression1 = expression.Object as MethodCallExpression;
        if (expression1 != null)
            return GetInputName(expression1);
        else
            return expression.Object.ToString();
    }

    private static string GetTargetActionName(MethodInfo methodInfo)
    {
        if (methodInfo == null) throw new ArgumentNullException("methodInfo");
        var name = methodInfo.Name;
        if (methodInfo.IsDefined(typeof (NonActionAttribute), true))
        {
            throw new InvalidOperationException(string.Format(Helpers.MyFormat, "CannotCallNonAction {0}", name));
        }

        var actionNameAttribute = methodInfo.GetCustomAttributes(typeof (ActionNameAttribute), true).OfType<ActionNameAttribute>().FirstOrDefault();
        if (actionNameAttribute != null)
            return actionNameAttribute.Name;
        if (methodInfo.DeclaringType.IsSubclassOf(typeof (AsyncController)))
        {
            if (name.EndsWith("Async", StringComparison.OrdinalIgnoreCase))
                return name.Substring(0, name.Length - "Async".Length);
            if (name.EndsWith("Completed", StringComparison.OrdinalIgnoreCase))
                throw new InvalidOperationException(string.Format(Helpers.MyFormat, "CannotCallCompletedMethod: {0}", name));
        }
        return name;
    }

    private static void AddParameterValuesFromExpressionToDictionary(RouteValueDictionary rvd, MethodCallExpression call)
    {
        var parameters = call.Method.GetParameters();
        if (parameters.Length <= 0)
            return;
        for (int index = 0; index < parameters.Length; ++index)
        {
            var expression = call.Arguments[index];
            var constantExpression = expression as ConstantExpression;
            var obj = constantExpression == null ? CachedExpressionCompiler.Evaluate(expression) : constantExpression.Value;
            rvd.Add(parameters[index].Name, obj);
        }
    }
} 
```

从您的角度来看，您现在可以这样做，必须传递默认值才能使 LINQ 表达式起作用，但它们不会被呈现

```
@(Url.Action<MyController>(x => x.MethodName(null, 0, 0))) 
```

# php - 将字符串值转换为常量

> ID：10328838
> 
> 赞同：4
> 
> 时间：2012-04-26T07:16:22.327
> 
> 标签：php, variables

我定义了一个常量，

```
define("TEST", "good"); 
```

我现在有`$post = "TEST";`

我只是想将此“测试”转换为常数。

例如： echo`$post;`它应该打印`good`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T07:18:17.770

```
echo constant($post); 
```

[http://php.net/constant](http://php.net/constant)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:18:57.693

检查PHP的`constant()`

[http://in.php.net/constant](http://in.php.net/constant)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:19:05.353

只需删除引号..就足够了..

```
define("TEST", "good");
$post = TEST;
echo $post; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:19:15.623

您应该使用不带引号的定义，如下所示：

```
define("TEST", "good");
$post = TEST;
echo $post; 
```

# c++ - 从终结器对非托管内存的访问冲突

> ID：10328845
> 
> 赞同：-1
> 
> 时间：2012-04-26T07:16:47.850
> 
> 标签：c++, memory-management, c++-cli, finalizer, unmanaged-memory

我试图从 c++/cli 终结器中清理非托管类的内存，它给了我 AcessViolation 错误。我做这样的事情：

```
MyClass::!MyClass()
{

    if(_unmanaged)
    {
    _unmanaged->Delete();
    _unmanaged = 0;
    }
} 
```

有谁知道，有什么问题吗？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:36:05.360

好吧，我有一个猜测。

终结器在它自己的线程中工作，因此当您尝试手动处理对象时，可能会出现竞争条件。

我看到了您关于“已删除对象”的评论，但我会再次检查它。

```
MyClass::~MyClass()
{
   this->!MyClass();

   GC::KeepAlive(this);
} 
```

# javascript - 使用 ctrl+enter 提交 google+ 回复，但无法向提交按钮发送“点击”事件

> ID：10328848
> 
> 赞同：0
> 
> 时间：2012-04-26T07:16:59.357
> 
> 标签：javascript, google-chrome, plugins, google-plus

我想使用 Ctrl+Enter 来提交 Google+ 回复，但是当我向提交按钮发送“点击”事件时它不起作用。这是[plus.google.com](http://plus.google.com)的 chrome 插件。

```
document.onkeydown=function(e){
if(e.ctrlKey&&e.keyCode==13){
    div_id=document.activeElement.id;
    div_id=div_id.substr(0,3);
    editorid=div_id.substr(0,2)+String.fromCharCode(div_id.charCodeAt(2)-1);
    postbuttonid=editorid+'.post';
    console.log(postbuttonid);
    postbutton=document.getElementById(postbuttonid);
    evt=document.createEvent("MouseEvents"); 
    evt.initEvent("click", true, true); 
    postbutton.dispatchEvent(evt);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T21:20:59.400

我建议你使用 jQuery：

```
jQuery("#:2s.post").click(); 
```

上面的代码应该可以工作，假设正如您的评论之一所述，您要单击的按钮的 ID 为“：2s.post”。

我希望这对你有用。如果您无法直接包含 jQuery，您可以尝试以下操作：

```
/*--- Create a proper unsafeWindow object on browsers where it doesn't exist
    (Chrome, mainly).
    Chrome now defines unsafeWindow, but does not give it the same access to
    a page's javascript that a properly unsafe, unsafeWindow has.
    This code remedies that.
*/

if (typeof unsafeWindow === "undefined") {
    unsafeWindow    = ( function () {
        var dummyElem   = document.createElement('p');
        dummyElem.setAttribute ('onclick', 'return window;');
        return dummyElem.onclick ();
    } ) ();
    if(typeof unsafeWindow === "undefined") {
        unsafeWindow = window;
    }
}
// END PROPER unsafeWindow

var script = unsafeWindow.document.createElement("SCRIPT");
    script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js';
    script.type = 'text/javascript';
    unsafeWindow.document.getElementsByTagName("head")[0].appendChild(script);
    script.addEventListener('load', function(){ 
        jQ = unsafeWindow['jQuery'];
        $ = jQ.noConflict(true); // keep jQuery local so you don't accidentally override/overwrite any variables
        requiresjQuery($);
    }, false); 
```

在这种情况下，您的代码实际上看起来更像：

```
function requiresjQuery($) { // put any code in here that requires jQuery; I actually recommend putting all of your code in here.
    $("#:2s.post").click();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:19:51.500

尝试`document.forms.yourForm.submit();`

# ruby-on-rails - 错误的 ELF 类：ELFCLASS32 Ruby on Rails、Heroku

> ID：10328851
> 
> 赞同：1
> 
> 时间：2012-04-26T07:17:04.343
> 
> 标签：ruby-on-rails, heroku, pg

我已经在 heroku 上运行这个应用程序大约 3 个月了，没有任何问题。但是当我推送最后一次更新时，我在运行 heroku run rake db:migrate 时遇到了这个错误。

> /app/vendor/bundle/ruby/1.9.1/gems/pg-0.13.2/lib/pg_ext.so：错误的 ELF 类：ELFCLASS32 - /app/vendor/bundle/ruby/1.9.1/gems/pg- 0.13.2/lib/pg_ext.so

我不确定还有什么可以帮助的。

我正在使用导轨 3.2.1

我昨天从 11.10 升级到 Ubuntu 12.04 LTS，都是 32 位的，我知道这个错误与 32 到 64 位的兼容性问题有关。我认为这可能是问题的一部分，但我不确定它为什么刚刚开始或如何解决它。

Heroku 用他们的替换了 database.yml 文件，我也在 heroku 端运行了 bundle install 。任何帮助都会得到帮助

```
*** LOCAL GEMS ***

actionmailer (3.2.3, 3.2.1, 3.2.0, 3.1.1)
actionpack (3.2.3, 3.2.2, 3.2.1, 3.2.0, 3.1.3, 3.1.1)
activeadmin (0.4.3, 0.4.2)
activemodel (3.2.3, 3.2.2, 3.2.1, 3.2.0, 3.1.3, 3.1.1)
activerecord (3.2.3, 3.2.1, 3.2.0, 3.1.1)
activerecord-jdbc-adapter (1.2.2)
activerecord-jdbcsqlite3-adapter (1.2.2)
activeresource (3.2.3, 3.2.1, 3.2.0, 3.1.1)
activesupport (3.2.3, 3.2.2, 3.2.1, 3.2.0, 3.1.3, 3.1.1)
acts_as_indexed (0.7.8)
addressable (2.2.7, 2.2.6)
ansi (1.4.2, 1.4.1)
arel (3.0.2, 3.0.0, 2.2.3, 2.2.1)
awesome_nested_set (2.1.3)
babosa (0.3.7)
backbone-on-rails (0.9.1.0)
backup (3.0.23)
bcrypt-ruby (3.0.1)
bootstrap-sass (2.0.1)
bourbon (1.4.0)
builder (3.0.0)
bundler (1.0.21 ruby)
capybara (1.1.2)
childprocess (0.3.1)
chronic (0.6.7)
chunky_png (1.2.5)
client_side_validations (3.1.3)
cocaine (0.2.1)
coffee-rails (3.2.2, 3.2.1, 3.1.1)
coffee-script (2.2.0)
coffee-script-source (1.3.1, 1.2.0, 1.1.3)
commonjs (0.2.5)
compass (0.11.7)
copycopter_client (2.0.0)
daemon_controller (1.0.0, 0.2.6)
daemons (1.1.8)
devise (2.0.4, 2.0.1, 2.0.0, 1.5.2)
devise_invitable (1.0.1)
diff-lcs (1.1.3)
dragonfly (0.9.12)
dynamic_form (1.1.4)
eco (1.0.0)
eco-source (1.1.0.rc.1)
ejs (1.0.0)
erubis (2.7.0)
eventmachine (0.12.10)
execjs (1.3.0, 1.2.13, 1.2.12, 1.2.9)
factory_girl (2.6.0)
factory_girl_rails (1.7.0)
faker (1.0.1)
faraday (0.7.5)
fastercsv (1.5.4)
fastthread (1.0.7)
ffi (1.0.11)
flutie (1.3.3)
foreman (0.40.0)
formtastic (2.1.0, 2.0.2)
friendly_id (4.0.4)
fssm (0.2.8.1)
globalize3 (0.2.0)
gon (2.2.2)
guard (1.0.1)
guard-rspec (0.7.0)
haml (3.1.4)
haml-rails (0.3.4)
haml_rails (0.1.0)
has_scope (0.5.1)
hashie (1.2.0)
heroku (2.16.2)
hike (1.2.1)
hpricot (0.8.6, 0.8.5)
htmldiff (0.0.1)
i18n (0.6.0)
inherited_resources (1.3.1, 1.3.0)
jdbc-sqlite3 (3.7.2)
journey (1.0.3, 1.0.1, 1.0.0)
jquery-rails (2.0.2, 2.0.1, 2.0.0, 1.0.19)
json (1.6.6, 1.6.5, 1.6.4, 1.6.3, 1.6.2)
json_pure (1.6.5)
kaminari (0.13.0)
launchy (2.0.5)
less (2.1.0, 2.0.11)
less-rails (2.2.0, 2.1.8)
letter_opener (0.0.2)
libv8 (3.3.10.4 x86-linux)
mail (2.4.4, 2.4.1, 2.3.3, 2.3.0)
meta_search (1.1.3)
mime-types (1.18, 1.17.2)
minitest (2.11.1)
multi_json (1.3.1, 1.2.0, 1.1.0, 1.0.4)
multipart-post (1.1.4)
mysql (2.8.1)
mysql2 (0.3.11)
newrelic_rpm (3.3.2)
nifty-generators (0.4.6)
nokogiri (1.5.0)
oauth (0.4.5)
oauth2 (0.5.1)
omniauth (1.0.1)
omniauth-facebook (1.1.0)
omniauth-google-oauth2 (0.1.8)
omniauth-identity (1.0.0)
omniauth-linkedin (0.0.6)
omniauth-oauth (1.0.0)
omniauth-oauth2 (1.0.0)
omniauth-twitter (0.0.7)
open4 (1.3.0)
orm_adapter (0.0.7, 0.0.6, 0.0.5)
paper_trail (2.6.3)
paperclip (2.7.0)
passenger (3.0.11)
pg (0.13.2, 0.13.0, 0.12.2, 0.12.0, 0.11.0)
pjax_rails (0.1.10)
Platform (0.4.0)
polyamorous (0.5.0)
polyglot (0.3.3)
POpen4 (0.1.4)
popen4 (0.1.2)
rack (1.4.1, 1.4.0, 1.3.6, 1.3.5)
rack-cache (1.2, 1.1)
rack-mount (0.8.3)
rack-pjax (0.5.5)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.1, 3.2.0, 3.1.1)
railties (3.2.3, 3.2.1, 3.2.0, 3.1.1)
rake (0.9.2.2, 0.9.2)
rake-compiler (0.7.9)
rdoc (3.12, 3.11)
redcarpet (2.1.1)
refinerycms (2.0.3)
refinerycms-authentication (2.0.3)
refinerycms-core (2.0.3)
refinerycms-dashboard (2.0.3)
refinerycms-images (2.0.3)
refinerycms-pages (2.0.3)
refinerycms-resources (2.0.3)
responders (0.9.1, 0.6.5)
rest-client (1.6.7)
rspec (2.8.0)
rspec-core (2.8.0)
rspec-expectations (2.8.0)
rspec-mocks (2.8.0)
rspec-rails (2.8.1)
ruby_parser (2.3.1)
rubyXL (1.2.5)
rubyzip (0.9.6.1, 0.9.5)
sass (3.1.15, 3.1.12, 3.1.11)
sass-rails (3.2.5, 3.2.4, 3.2.3, 3.1.5)
selenium-webdriver (2.13.0)
seo_meta (1.3.0)
sexp_processor (3.2.0)
simple_form (2.0.1, 2.0.0, 1.5.2)
spork (0.9.0)
sprockets (2.1.2, 2.0.3)
sqlite3 (1.3.5, 1.3.4)
squeel (0.9.5)
ssl_requirement (0.1.0)
stringex (1.3.2)
term-ansicolor (1.0.7)
test-loop (13.0.1)
therubyracer (0.10.0, 0.9.10, 0.9.9)
thin (1.3.1)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
truncate_html (0.5.4)
turn (0.9.4, 0.9.1, 0.8.3)
twitter-bootstrap-rails (2.0.4)
tzinfo (0.3.33, 0.3.32, 0.3.31)
uglifier (1.2.4, 1.2.3, 1.2.2, 1.2.1, 1.2.0, 1.1.0)
warden (1.1.1, 1.1.0)
watchr (0.7)
whenever (0.7.3)
will_paginate (3.0.3)
xpath (0.1.4)
yajl-ruby (1.1.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:49:56.850

已解决：我需要从推送到 heroku 的 slug 中删除我的供应商文件夹。我需要做的就是。

```
git rm vendor -r -f 
```

然后将 vendor/* 添加到我的 .gitignore 文件中

我希望这有帮助

# android - 带有 2.3.6 的 Galaxy Note 上的蓝牙 SPP

> ID：10328852
> 
> 赞同：3
> 
> 时间：2012-04-26T07:17:19.020
> 
> 标签：android, bluetooth

我在使用 android 2.3.6 的三星 Galaxy Note 上遇到蓝牙 SPP 问题 - 它可以工作一段时间，但突然连接被终止 - 在其他手机上可以连续工作。这里是它发生的日志部分

```
D/BLZ20_ASOCKWRP(11288): asocket_read
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLIN ] (0x1)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_read: read 43 bytes out of 43 on fd 46
D/BLZ20_ASOCKWRP(11288): asocket_write
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLOUT ] (0x4)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_write: wrote 10 bytes out of 10 on fd 46
I//system/bin/btld(11351): btlif_bts_api_data_cb: btlif_bts_api_data_cb : hdl 35, len 10
I//system/bin/btld(11351): bts_alloc_buf: hdr:0x405241a4, max 1712, offset 20, len 0 
I//system/bin/btld(11351): bts_alloc_buf: peer mtu 127
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_WRITE_EVT
I//system/bin/btld(11351): rfc_setup_rx_buf: pushed in queue p_buf #0: 0x405241a4, len:0, offset:20
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I/BluetoothPolicyService( 2767): getBluetoothDataTransferAllowed 
D/BLZ20_ASOCKWRP(11288): asocket_read
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLIN ] (0x1)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_read: read 9 bytes out of 9 on fd 46
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I/BluetoothPolicyService( 2767): getBluetoothDataTransferAllowed 
D/BLZ20_ASOCKWRP(11288): asocket_read
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLIN ] (0x1)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_read: read 67 bytes out of 67 on fd 46
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I/BluetoothPolicyService( 2767): getBluetoothDataTransferAllowed 
D/BLZ20_ASOCKWRP(11288): asocket_read
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLIN ] (0x1)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_read: read 69 bytes out of 69 on fd 46
D/BLZ20_ASOCKWRP(11288): asocket_write
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLOUT ] (0x4)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_write: wrote 10 bytes out of 10 on fd 46
I//system/bin/btld(11351): btlif_bts_api_data_cb: btlif_bts_api_data_cb : hdl 35, len 10
I//system/bin/btld(11351): bts_alloc_buf: hdr:0x405370b0, max 1712, offset 20, len 0 
I//system/bin/btld(11351): bts_alloc_buf: peer mtu 127
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_WRITE_EVT
I//system/bin/btld(11351): rfc_setup_rx_buf: pushed in queue p_buf #0: 0x405370b0, len:0, offset:20
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I/BluetoothPolicyService( 2767): getBluetoothDataTransferAllowed 
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
D/BLZ20_ASOCKWRP(11288): asocket_read
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLIN ] (0x1)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_read: read 65 bytes out of 65 on fd 46
I/BluetoothPolicyService( 2767): getBluetoothDataTransferAllowed 
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
I//system/bin/btld(11351): jw_if_rfcomm_cl_cback: jw_if_rfcomm_cl_cback event=BTA_JV_RFCOMM_DATA_IND_EVT
I//system/bin/btld(11351): jv_forward_data_to_jni: BTA_JV_RFCOMM_DATA_IND_EVT bta hdl 2
D/BLZ20_ASOCKWRP(11288): asocket_read
I/BLZ20_WRAPPER(11288): blz20_wrp_poll: nfds 2, timeout -1 ms
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: transp poll : (fd 46) returned r_ev [POLLIN ] (0x1)
D/BLZ20_WRAPPER(11288): blz20_wrp_poll: return 1
D/BLZ20_WRAPPER(11288): blz20_wrp_read: read 0 bytes out of 0 on fd 46
I/BLZ20_WRAPPER(11288): blz20_wrp_read: connection aborted
D/BLZ20_WRAPPER(11288): blz20_wrp_read: set errno 103 (Software caused connection abort) l.1910 
D/BLZ20_ASOCKWRP(11288): asocket_abort [46,47,48]
I/BLZ20_WRAPPER(11288): blz20_wrp_shutdown: s 46, how 2
D/BLZ20_WRAPPER(11288): blz20_wrp_shutdown:  fd (-1:46), bta 2, rc 1, wflags 0x800, cflags 0x0, port 9050
I/BLZ20_WRAPPER(11288): blz20_wrp_shutdown: shutdown socket
D/BLZ20_WRAPPER(11288): blz20_wrp_write: wrote 1 bytes out of 1 on fd 48
D/BLZ20_ASOCKWRP(11288): asocket_destroy
D/BLZ20_ASOCKWRP(11288): asocket_abort [46,47,48]
I/BLZ20_WRAPPER(11288): blz20_wrp_shutdown: s 46, how 2
D/BLZ20_WRAPPER(11288): blz20_wrp_shutdown:  fd (-1:46), bta 2, rc 1, wflags 0x800, cflags 0x0, port 9050
I/BLZ20_WRAPPER(11288): blz20_wrp_shutdown: shutdown socket
D/BLZ20_WRAPPER(11288): blz20_wrp_write: wrote 1 bytes out of 1 on fd 48
I/BLZ20_WRAPPER(11288): blz20_wrp_close: s 48
D/BLZ20_WRAPPER(11288): blz20_wrp_close: std close (48)
I/BLZ20_WRAPPER(11288): blz20_wrp_close: s 47
D/BLZ20_WRAPPER(11288): blz20_wrp_close: std close (47)
I/BLZ20_WRAPPER(11288): blz20_wrp_close: s 46
D/BLZ20_WRAPPER(11288): blz20_wrp_close:  fd (-1:46), bta 2, rc 1, wflags 0x800, cflags 0x0, port 9050 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:03:22.073

问题是我经常在没有可用数据的情况下进行后续的读取调用。虽然这在大多数手机上运行良好（ read 只返回 0 bytes read ） - 这在某些三星手机上失败 - 一种解决方案是通过 available() 检查在读取之前是否有实际可用的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:00:13.763

我偶然发现的更多细节。这似乎与三星 BT 堆栈生成的垃圾邮件数量有关。我有一个每秒生成约 10.5k 数据的 BT 设备。当连接到有此问题的三星设备时，我每秒只能获得大约 3k 的数据。最终堆栈崩溃了。我知道在 android 设备上进行日志记录很昂贵，并且按照 ligi 的建议进行操作会减少堆栈生成的消息量；我认为这是根本原因。

就我而言，用 a 包装我正在读取的流`BufferedInputStream`似乎已经解决了问题，并使我回到 10.5 k/s。

# android - seekTo() 函数在 VideoView 中不起作用

> ID：10328854
> 
> 赞同：8
> 
> 时间：2012-04-26T07:17:26.220
> 
> 标签：android

我的应用程序出现问题，我想像这样使用该`seekTo()`功能`VideoView`：

```
videoView.seekTo(time);
videoView.start(); 
```

它在 中运行良好`android 2.2`，但在或更高版本中不起作用`android 2.3`......有人会告诉我为什么？它困扰了我好几天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:17:20.000

`VideoView.start()`仅在查找完成后才应调用 to 。调用`VideoView.seekTo()`启动搜索但不幸的`VideoView`是不支持`OnSeekCompleteListener`通知搜索实际完成所需的。

您可以自定义`VideoView`以支持`OnSeekCompleteListener`，如[我对 7990784 的回答](https://stackoverflow.com/questions/7990784/videoview-not-playing-video-from-desired-position/11938019#11938019)所示。

`onSeekComplete()`然后您可以通过调用注册接收`setOnSeekCompleteListener()`。然后，您的侦听器实现应调用`VideoView.start()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:53:17.247

为了正确操作该方法`seekTo()`，视频状态应处于`PlaybackState`。

在`VideoView` [此处查看源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/android/widget/VideoView.java#VideoView.isInPlaybackState%28%29)以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T14:33:23.943

您是否尝试过**Vitamio**库中的 VideoView 类？

[维生素](https://github.com/yixia/VitamioBundle)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T12:26:37.870

该解决方案应该有效。问题可能是里面的媒体播放`videoView`器没有创建。

通过改变设备的方向很容易测试。我就是这样测试的。

```
videoView.setOnPreparedListener(onPreparedListener);
private MediaPlayer.OnPreparedListener onPreparedListener = new MediaPlayer.OnPreparedListener() {
    public void onPrepared(MediaPlayer mp) {
        mp.seekTo(videoPosition);
    }
}; 
```

# mysql - 从多列中选择 DISTINCT

> ID：10328856
> 
> 赞同：0
> 
> 时间：2012-04-26T07:17:52.413
> 
> 标签：mysql, select, distinct

这是一个有点复杂的查询，但我有一个斯诺克比赛数据库，并且正在尝试生成谁打过并赢得了最多决定性帧的统计数据（如果您不了解比赛，请不要担心规则）。

桌子：

```
ID player1  player2   bestOf     player1Score      player2Score
1   1           2          9          5                   0
2   2           1          9          5                   4
3   1           2          9          5                   4
4   2           1          9          4                   5 
```

我想要做的是如下所示：

```
SELECT COUNT(*) AS played, DISTINCT(player1,player2) AS playerID 
FROM matches 
WHERE (player1Score=BestOf / 2 + 0.5 AND player2Score=BestOf / 2 - 0.5) 
GROUP BY playerID 
```

上面的查询不起作用，因为我相信 DISTINCT 不支持多列。我从上表中寻找的结果是：

```
playerID played  won
1           3      2
2           3      1 
```

表中的第一行不显示，因为它不是最后一帧。

我尝试了各种变化，例如：

```
SELECT GROUP(player1,player2)
SELECT player1 + player2 AS playerID, select DISTINCT(playerID)
SELECT (player1 + player2) AS playerID GROUP BY playerID 
```

和其他几个。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:44:43.150

我实际上并没有你的表，所以我的 sql 可能有很多语法错误。但希望我能理解这个总体思路。我们可以计算player1获胜的决胜局列表，并将其与player2获胜的决胜局列表合并。只要我们将获胜者的列名重命名为相同的字符串（'player'），这些表的并集应该产生一个表，标出每个人获胜的次数。

```
select player, count(*) as num_won from ((select player1 as player from matches where player1Score - player2Score = 1) union (select player2 as player from matches where player2Score - player1Score = 1)); 
```

这应该为您提供从每个玩家的 id 到他们获胜的次数的映射。

然后考虑

```
select player, count(*) as num_played from ((select player1 as player from matches where abs(player1Score - player2Score) = 1) union (select player2 as player from matches where abs(player2Score - player1Score) = 1)); 
```

使用 abs 函数应该可以帮助您发现每个玩家玩的决定帧游戏的数量。现在我们结合这两个表来得到你的最终答案

```
select players_table.player, players_table.num_played, winners_table.num_won from (select player, count(*) as num_won from ((select player1 as player from matches where player1Score - player2Score = 1) union (select player2 as player from matches where player2Score - player1Score = 1)) winners_table), (select player, count(*) as num_played from ((select player1 as player from matches where abs(player1Score - player2Score) = 1) union (select player2 as player from matches where abs(player2Score - player1Score) = 1)) players_table) where winners_table.player == players_table.player; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:06:41.020

```
create table temp_score
select playerid, count(*) as won 
FROM(
  Select   case  when player1score > player2score then  player1 else player2 end as playerid
    from score
    where
    (player2Score=Round(BestOf / 2 + 0.5,0) AND player1Score=round(BestOf / 2 - 0.5,0))
    or
    (player1Score=Round(BestOf / 2 + 0.5,0) AND player2Score=round(BestOf / 2 - 0.5,0))
) a
group by playerid

Select playerid,won, (Select SUM(won) from temp_score)  as TotalPlayed  from temp_score 
```

# asp.net - ReCaptcha 密钥问题。无法创建密钥

> ID：10328858
> 
> 赞同：0
> 
> 时间：2012-04-26T07:17:59.513
> 
> 标签：asp.net, recaptcha

我正在使用 Asp.Net。我需要在我的一个页面中使用 ReCaptcha。我正在尝试创建一个密钥以便我可以使用 ReCaptcha。但我不知道究竟是什么问题，但我一直收到错误消息。这是图片

![步骤1](../Images/be086c42e78312fef8f410dfae7e3985.png)![错误](../Images/6ef9ad8fd64d705a15119d085c4b874d.png)

任何人都可以帮助我。可能是什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:35:59.170

[http://groups.google.com/group/recaptcha/browse_thread/thread/3e8f724eaa2addb5?pli=1](http://groups.google.com/group/recaptcha/browse_thread/thread/3e8f724eaa2addb5?pli=1)

看看这个，他们目前有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:54:26.053

我想我以前遇到过这个问题。必须获得一个全局密钥并使用它，我认为，但不确定......无论如何，有点尴尬。

# ios - 在 iOS 和 Xcode 上，如何自动包含 initWithCoder？

> ID：10328861
> 
> 赞同：1
> 
> 时间：2012-04-26T07:18:10.960
> 
> 标签：ios, xcode, cocoa-touch, uiview, xcode-template

据说当一个UIView对象是用程序员的代码创建的时候，`initWithFrame`就是用来初始化的方法，但是当UIView对象是用NIB创建的时候，`initWithCoder`就是用来初始化的。

当在 Xcode 中创建 UIView 的新子类时，有没有办法让它创建正确`initWithCoder`的，因为现在创建的常用方法是`initWithFrame`，我想知道 Xcode 中是否有一些步骤我做错了所以它`initWithFrame`改为创建——我可以让它`initWithCoder`改为创建吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:18:10.477

您可以调整您的**Xcode 模板**文件（用于`UIView`子类）并将`initWithCoder`方法放入 - 这样您就不必每次都重写它。

如果您想知道如何编辑这些模板文件，请在此处查看我的答案：

[如何更改 Xcode 的整个版权声明模板？](https://stackoverflow.com/questions/10097192/how-to-change-entire-copyright-notice-template-for-xcode/10097202#10097202)

# android - java.lang.RuntimeException：无法实例化活动谷歌地图

> ID：10328864
> 
> 赞同：-1
> 
> 时间：2012-04-26T07:18:19.457
> 
> 标签：android, google-maps

这是清单文件。哎呀！您的问题无法提交，因为：

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

```
<?xml version="1.0" encoding="utf-8"?><manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.googlemaps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name=".HelloGoogleMaps"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      </application>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:58:10.553

您没有提供布局，但是当我在 MapView 控件中使用错误的 Map API 密钥时，我遇到了同样的问题。在 Eclipse 下，您必须从“debug.keystore”生成密钥，而**不是**您的分发密钥库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:29:13.297

这是添加权限的问题。我在做项目时也遇到了这个问题。

您错过了一项权限。找到那个并给它。

# jquery - 图像在 jquery 轮播中重复

> ID：10328866
> 
> 赞同：1
> 
> 时间：2012-04-26T07:18:21.120
> 
> 标签：jquery, arrays

请在此处查看小提琴：http: [//jsfiddle.net/2C8fy/29/](http://jsfiddle.net/2C8fy/29/)

我遇到的麻烦是，有时当您单击减少按钮然后切换到增加按钮或反之亦然时，最后的一些幻灯片会被复制。您在顶部看到的图像是存储在数组中的图像。它们就像那样存储，然后用户可以循环浏览数组。为什么切换按钮时有些幻灯片会重复？

我的理论是我使用数组的方式有问题，但我似乎无法指出它。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:27:03.103

您使用了错误的变量。代替：

`var newImgSR = imgArr[a].clone();`与 `var newImgSR = imgArr[b].clone();`在`function slide_img_right()`

# hibernate - 如何在 JPQL 中选择多个 count() 选择的总和

> ID：10328868
> 
> 赞同：3
> 
> 时间：2012-04-26T07:18:33.293
> 
> 标签：hibernate, jpa, hql, jpql, ejbql

以下 SQL 语句的等效 JQPL 语句是什么：

```
SELECT (SELECT COUNT(*) FROM foo) + (SELECT COUNT(*) FROM bar) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:25:00.773

您可以将上述查询与[EntityManager 的 createNativeQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String%29)函数一起使用，请参见下面的示例类：

```
package facades;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

@Stateless
@LocalBean
public class CustomFacade {

    @PersistenceContext(unitName = "TestJPQLPU")
    private EntityManager em;

    public CustomFacade(){}

    /**
     * Gets the count of all records in tables foo and bar.
     * @return number of records as Long.
     */
    public Long getCountOfObjects(){    
        Query countQuery = em.createNativeQuery("SELECT((SELECT COUNT(*) FROM Foo) + (SELECT COUNT(*) FROM Bar))");
        Long count = (Long) countQuery.getSingleResult();        
        return count;
    }
} 
```

# android - android：实现谷歌地图（在气球覆盖点击上传图片）

> ID：10328871
> 
> 赞同：0
> 
> 时间：2012-04-26T07:18:44.090
> 
> 标签：android, google-maps

我正在制作一个应用程序，我必须在其中使用护目镜地图，并且我正在显示 pin 以显示当前位置。现在我希望当我点击黄色图像时它应该重定向到画廊，并且从画廊用户可以选择图像并且它应该被上传代替黄色图像。对此的任何帮助将不胜感激。

![在此处输入图像描述](../Images/93c7b73935d1ec08bbe487153a60c4af.png) 基本上**点击黄色按钮我想打开画廊并让用户上传这张照片。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:05:55.143

你必须创建一个自定义覆盖类（它扩展了 ItemizedOverlay）并覆盖它的 onTap 方法来做你想做的事。

# java - org.apache.commons.net 包中的时间戳类

> ID：10328880
> 
> 赞同：2
> 
> 时间：2012-04-26T07:19:15.517
> 
> 标签：java, ntp

我想在我的应用程序中使用时间戳（我正在使用 JAVA）。我被要求使用网络时间协议（NTP）。我在谷歌中搜索过，我找到了一个包“org.apache.commons. net”，其中有一个 TimeStamp 类。我已经通过[此链接](http://www.java-frameworks.com/java/commons/org/apache/commons/net/ntp/TimeStamp.java.html)了解有关该类的更多信息。我应该将什么传递给这个类的构造函数（每个构造函数的意义是什么）。实际上 TS 类应该返回我们的时间戳，而不是要求输入时间戳。我对此感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:34:54.447

您可以使用构造函数的以下重载来创建 TimeStamp 对象。

```
 public TimeStamp(Date d) 
```

将 java.util.Date 的对象作为参数传递。

这将为您提供一个时间戳值，该值表示为相对于 1900 年 1 月 1 日的 0 小时以秒为单位的 64 位无符号定点数。

主要的意义在于它是一种协议，一种不同系统所遵循的标准。网络中存在的不同系统的时钟可能不同步，并且可能不了解其他系统如何测量时间，可能遵循不同的时区。使用 NTP 他们将时钟与 UTC 同步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:24:18.237

您可以使用静态 getCurrentTime() 来获取一个时间戳，该时间戳表示测量到最接近毫秒的当前时间：

```
Timestamp myTs = Timestamp.getCurrentTime(); 
```

# performance - CouchDB - 将 MapReduce 结果传递给第二个 MapReduce 函数

> ID：10328884
> 
> 赞同：2
> 
> 时间：2012-04-26T07:19:19.933
> 
> 标签：performance, couchdb, mapreduce

在此处的 Map/Reduce 和 CouchDB 中排名业余。我有一个 CouchDB，其中填充了大约 600,000 行数据，这些数据表示记录的视图。我的愿望是生成一个图表，显示整个数据集的每条记录的点击量。

我已经实现了 Map/Reduce 函数来进行分组，如下所示：

```
function(doc) {
  emit(doc.id, doc);
} 
```

和：

```
function(key, values) {
    return values.length;
} 
```

现在因为仍然有相当数量的减少值，我们只想要图上的 100 个数据点，所以这不是很有用。另外，它需要永远运行。

我可以只检索每 X 行，但*理想*的做法是将这些缩减的结果传回另一个缩减函数，该函数取其值的平均值，这样我最终会得到一组很好的结果，比如 100 个结果，这对放入高级概览图以查看命中分布。

这可能吗？（如果是这样，键是什么？）或者我只是在我的 MapReduce 代码中搞砸了一些东西，导致它的性能非常差，从而允许我在我的应用程序代码中执行此操作？仅返回 33,500 个结果。

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:02:54.197

回答我自己的问题：

1.  根据[这篇文章](http://www.ibuildings.co.uk/blog/archives/1291-Some-thoughts-on-CouchDB.html)，CouchDB 不支持将 Map/Reduce 输出作为输入传递给另一个 Map/Reduce 函数，尽管文章指出其他项目（如[迪斯科](http://discoproject.org/)）确实支持这一点。

2.  自定义服务器端处理可以通过 CouchDB 列表的方式执行 - 例如，[按值排序](http://geekiriki.blogspot.co.nz/2010/08/couchdb-using-list-functions-to-sort.html)。

# javascript - 我需要一个通用的javascript“等待功能可用”

> ID：10328885
> 
> 赞同：5
> 
> 时间：2012-04-26T07:19:23.700
> 
> 标签：javascript, closures

我发现了这个优秀的代码片段[让我的用户脚本等待其他脚本加载](https://stackoverflow.com/questions/5092726/make-my-userscript-wait-for-other-scripts-to-load)，它向我展示了如何在调用函数之前等待函数可用。

目前我的脚本中有这个本地代码，我把它放在一起对我有用

```
waitForFnc();

function waitForFnc() {
    if (typeof Portal.Management_Init == "undefined") {
        window.setTimeout(waitForFnc, 50);
    }
    else {
        Portal.Management_Init();
    }
} 
```

但是，我想写一个通用版本的“waitForFnc”，因为我需要在几个地方做同样的事情。就像是

```
waitForFnc(Portal.Management_Init);

function waitForFnc(fnc) {
    if (typeof fnc == "undefined") {
        window.setTimeout(waitForFnc(fnc), 50);
    }
    else {
       fnc();
    }
} 
```

我传递函数的名称，当它可用时在其中调用。上面的代码不起作用，但我不确定如何解决它。

问候保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:55:02.100

您正在尝试做的事情有一些潜在的问题。如果在 Portal 定义之前调用 waitForFnc()，你将得到一个空属性访问异常。如果您正在尝试一个真正通用的解决方案，您可能必须使用 eval() *gasp*

在此过程中，让我们添加对将参数传递给我们正在等待的函数的支持。

```
function waitForFn(fnName, args){
    var fn;
    try{
        eval("fn = " + fnName);
        if(fn){
            fn.apply(null, args);
        }else{
            setTimeout(function(){waitForFn(fnName, args);}, 50);
        }
    }catch(e){
        setTimeout(function(){waitForFn(fnName, args);}, 50);
    }
}

waitForFn("Portal.Management_Init", [arg0, arg1]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:27:53.400

基本上，当执行这行代码时：`window.setTimeout(waitForFnc(fnc), 50);`，在设置超时之前评估“waitForFnc”。虽然您需要将调用语句作为参数传递。

这是你如何做到的：

```
window.setTimeout(function() {waitForFnc(fnc);}, 50); 
```

这是做什么的，它定义了一个函数，就像你将它写入变量一样：

```
var myFunc = function() {
    waitForFnc(fnc);
}; 
```

这个函数还没有执行，它只是被定义了。然后你将它传递给“setTimeout”：

```
window.setTimeout(myFunc, 50); 
```

这使得“setTimeout”在 50 毫秒后执行该功能。当它发生时，它会调用`waitForFnc(fnc)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:28:26.077

在您的代码中替换：

```
window.setTimeout(waitForFnc(fnc), 50); 
```

关闭：

```
window.setTimeout(function() {waitForFnc(fnc)}, 50); 
```

但是我可以问你为什么需要这么奇怪的代码吗？我宁愿希望有一个 API 允许注册一些回调：

```
Portal.onManagementInitAvailable(fn); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:16:39.420

根据您正在加载的内容，您也许可以利用 require.js 来为您处理这个问题；这基本上就是它的用途：[http ://requirejs.org/docs/why.html#9](http://requirejs.org/docs/why.html#9)

# c# - 邮件消息类 C#

> ID：10328886
> 
> 赞同：4
> 
> 时间：2012-04-26T07:19:25.317
> 
> 标签：c#

谁能告诉我有什么区别：

1) 发件人和发件人

这些是 MailMessage 类的属性。还有一个名为回复的属性。这样做的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:23:44.143

wiki 上电子邮件的摘录：

**标头字段：**消息标头应至少包括以下字段：

**发件人：**电子邮件地址，以及可选的作者姓名。在许多电子邮件客户端中，除非通过更改帐户设置，否则无法更改。

另请注意，“发件人：”字段不必是电子邮件的真实发件人。一个原因是很容易伪造“发件人：”字段并让邮件看起来来自任何邮件地址。可以对电子邮件进行数字签名，这很难伪造，但此类签名需要额外的编程，并且通常需要外部程序来验证。一些 ISP 不会中继声称来自非他们托管的域的电子邮件，但很少（如果有）检查以确保“发件人：”字段中指定的人甚至电子邮件地址是一个与连接相关联。一些 ISP 将电子邮件身份验证系统应用于通过其 MTA 发送的电子邮件，以允许其他 MTA 检测可能来自他们的伪造垃圾邮件。

**发件人：**在“发件人”字段中列出的代表作者行事的实际发件人的地址（秘书、列表管理员等）。

[http://en.wikipedia.org/wiki/Email](http://en.wikipedia.org/wiki/Email)上的详细信息

例如，gmail 使用 from/sender 字段从与您的 gmail 帐户不同的电子邮件地址发送电子邮件（验证后）。

**ReplyTo**已过时。请改用ReplyToList，它可以接受多个地址。它获取或设置邮件消息的回复地址。如果您想回复已发送的电子邮件，则会将其发送到这些地址。

# java - 数据库连接上的 Java 垃圾收集器

> ID：10328887
> 
> 赞同：2
> 
> 时间：2012-04-26T07:19:43.010
> 
> 标签：java, jdbc

关于垃圾收集器的问题。如果我创建了数据库连接并在数据库上执行了一些操作，之后我没有使用连接对象的时间更长，垃圾收集器可以释放我的连接。我希望以后使用此连接。

编辑：只是为了确认，如果我创建了我的连接是在 webapp 的上下文级别，那么情况如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T07:23:58.247

如果您保持对对象的*强*引用，`Connection`那么垃圾收集器将永远不会触及您的对象，并且数据库连接将保持不变。请记住，它不能被多个线程使用。

另一方面，如果您保持打开连接的时间过长，一些底层资源（如 TCP/IP 套接字）可能会中断。

如果您丢失了对连接的最后一个引用（通过覆盖它或设置为`null`），垃圾收集器*将*释放与连接和连接本身关联的所有 Java 对象。但它不会释放底层数据库连接，因此您必须始终显式调用：

```
connection.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:23:42.647

JVM 垃圾收集简而言之：如果您或其他任何人引用了一个对象，那么 JVM 就不允许对其进行垃圾收集。如果您没有对它的引用，那么 JVM 在它想要之前不必*对它进行垃圾收集。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:23:15.110

只要您保留对它的引用，连接就不会被垃圾收集。因此，理论上您可以随心所欲地继续使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:23:20.760

如果你不再引用连接对象，那么它就是垃圾回收的成员，但你不能保证它会被 gc 垃圾回收。这完全取决于gc。

如果您想在将来使用它，最好将其设为全局对象。这样您的应用程序将保留一个引用，并且它不会成为垃圾收集的成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T07:23:47.450

取决于您的连接参考类型。如果你有强引用，那么它不会被垃圾收集，但如果你有弱引用，那么它将有资格进行 GC。

如果它由静态或实例级别持有，则不会被垃圾收集。

但是，不要长时间保持数据库连接（考虑到每个数据库都有连接数量的限制），您应该在需要时释放并重新获取。

您还应该考虑使用 ConnectionPool 进行更好的连接管理。

# r - ggplot2 标题填充？如何调整？

> ID：10328888
> 
> 赞同：4
> 
> 时间：2012-04-26T07:19:44.300
> 
> 标签：r, ggplot2

似乎标题周围有一些填充物，我不知道如何更改，有什么想法吗？

```
xy <- data.frame(x=1:10, y=10:1)
plot <- ggplot(data = xy)+ geom_point(aes(x = x, y =  y))
plot <- plot + opts(plot.background = theme_rect(colour = 'purple', fill = 'pink', size = 3, linetype='dashed'))
plot
plot + opts(title = 'Graph Title')
plot 
```

如果你运行这个，在你的屏幕上放一张纸（老派，我知道）与标题中 G 和 T 的顶部对齐，然后再次运行这个情节，你会看到你的上方有一些灰色纸。我只能认为这表明标题周围有一些填充？或者同样地，如果你在没有标题的情况下运行它并将纸张（上方）与粉红色背景的末端对齐，然后在标题的情况下运行它，G 和 T 的顶部在纸张下方。

示例本质上来自[https://github.com/hadley/ggplot2/wiki/Graph-Panel-Attributes](https://github.com/hadley/ggplot2/wiki/Graph-Panel-Attributes)

这表明有一个行高选项，但它似乎什么也没做[http://www.inside-r.org/packages/cran/ggplot2/docs/theme_text](http://www.inside-r.org/packages/cran/ggplot2/docs/theme_text)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:55:30.573

所以这是一个黑客：

```
p <- plot + opts(title = 'Graph Title')
p <- ggplot_gtable(ggplot_build(p))
p$heights[[2]] <- p$heights[[2]]-unit(0.5, "lines")
grid.draw(p) 
```

此代码删除填充。

但我建议发送功能请求：[https ://github.com/hadley/ggplot2/issues?milestone=](https://github.com/hadley/ggplot2/issues?milestone=)

# python - django 1.3记录timedrotatingfilehandler在每次写入时截断文件

> ID：10328895
> 
> 赞同：3
> 
> 时间：2012-04-26T07:20:13.013
> 
> 标签：python, django, logging, django-views

我正在使用 django 1.3 的日志记录功能并尝试实现 timedrotatingfilehandler 以每小时轮换一次日志。记录器在每小时后成功轮换一次，但似乎在每个日志请求期间它都会截断文件。该文件只有最后一条写入的消息。这是 django 处理程序中的问题还是我错过了某个地方。日志记录字典如下：

```
LOGGING = {
'version': 1,
'disable_existing_loggers': True,
'formatters': {
    'standard': {
        'format' : "%(asctime)s:%(pathname)s:%(lineno)s: %(message)s",
        'datefmt' : "%d/%b/%Y %H:%M:%S"
    },
},
'handlers': {
    'logfile': {
        'level':'DEBUG',
        'class':'logging.handlers.TimedRotatingFileHandler',
        'filename': "/tmp/log1.log",
    'when' : 'hour',
    'interval' : 0,
        'formatter': 'standard',
    },
},
'loggers': {
    'collection': {
        'handlers': ['logfile'],
        'level': 'DEBUG',
    },
}
} 
```

请注意：当间隔设置为 1 时，日志不会旋转。这是 django 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:15:16.280

你需要设置：

```
'when' : 'H',
'interval' : 1, 
```

从代码中，支持当前的“何时”事件：

*   S - 秒
*   M - 分钟
*   H - 小时
*   D - 天
*   午夜 - 午夜翻身
*   W{0-6} - 在某一天翻转；0 - 星期一

间隔是要计数的间隔数（例如，当 == 'H' 和间隔 == 2 时将产生 2 小时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:38:09.227

每当您创建日志文件时，只需在文件名中添加日期时间戳即可。这将确保文件永远不会被截断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T08:06:07.580

我猜有多个进程写入您的日志文件，在这种情况下，您可以使用[ConcurrentLogHandler](https://pypi.python.org/pypi/ConcurrentLogHandler/0.9.1)来避免截断。

# javascript - 删除最近的输入

> ID：10328898
> 
> 赞同：0
> 
> 时间：2012-04-26T07:20:28.450
> 
> 标签：javascript, jquery, html, input

好的，我有输入对象，当它被改变时它会添加另一个..当你点击时
还有删除（`izdzēst`）链接，它应该删除最后一个输入字段.. 那怎么办？（删除的功能是`dzest`）

我想问题出在`$(this)`?

```
<input name="userfile[]" type="file" size=40 />
&nbsp;<a href="#" onclick="dzest();return false" class="link" name="dzest" style="font-weight:normal; display:none;">Izdzēst</a><br /> 

<script>
function dzest(){
     $(this).closest('input').remove();
}
$("input[type=file]").change(function() {
    $('<input name="userfile[]" type="file" />').appendTo('body');
    $('<a href="#" onclick="dzest();return false" class="link" name="dzest" style="font-weight:normal; display:inline;">Izdzēst</a><br/>').appendTo('body');
    $('.link').css('display','inline');

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:29:08.570

*   `this`在您的代码中指的是`window`对象而不是锚点。
*   `closest`表示最接近的元素**parent**，`input`永远不能成为父母，所以你可能是说`prev()`

* * *

**固定代码**

```
$('<a href="#" onclick="dzest(this);return false" class="link" name="dzest" style="font-weight:normal; display:inline;">Izdzēst</a><br/>').appendTo('body');
<a href="#" onclick="dzest(this);return false" 
```

和功能：

```
function dzest(obj){
     $(obj).prev('input').remove();
} 
```

您还可以使用不显眼的事件处理程序和委托事件。

```
$('body').on('click', '.link', function(){
        $(this).prev('input').remove();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:23:12.067

尝试这样做，而不是丢失 onclick 属性。

```
$('a[name=dzest]').on('click', function() {
    $(this).closest('input').remove();
}); 
```

或者为删除添加一个 ID 以简化选择器。

# c# - 使用ajax从rest服务调用中捕获异常的最佳方法

> ID：10328899
> 
> 赞同：0
> 
> 时间：2012-04-26T07:20:28.557
> 
> 标签：c#, ajax, model-view-controller, rest

所以我使用ajax调用休息服务：

```
$("#loginsubmit").on('click', function () {
    showtooltip('Please wait...', false);
    $('#loginsubmit').attr("disabled", true);
    $.ajax({
        url: '@Utility.ConstructRestURL("Authenticate/Login")',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({
            client: {
                SessionID: '@Utility.GetSession(Utility.GetConfigString("ClientSessionID"))'
            },
            loginfo: {
                u: $("#loginusername").val(),
                p: $("#loginpassword").val()
            }
        }),
        success: function (response) {
            if (response.LoginResult.SessionID != null || response.LoginResult.UserID != null || response.LoginResult.SourceIP != null) {
                $.post('@Url.Action("SaveSession", "Auth")', response.LoginResult, function (msg) {
                    window.location.replace(msg.url);
                });
            } else {
                showtooltip('Login failed.', false);
                $('#loginsubmit').removeAttr("disabled");
            }
        },
        error: function (xhr, ajaxOptions, error) {
            showtooltip(xhr.status + ': ' + error, false);
            $('#loginsubmit').removeAttr("disabled");
        }
    });
}); 
```

大多数服务返回一个类对象：

```
 [WebInvoke(UriTemplate = "Login", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    public CModel.DTO.UserSessionDTO Login(CModel.Entities.ClientAuthentication client, CModel.DTO.LoginCredentials loginfo)
    {
        loginfo.i = System.Web.HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
        CModel.Logic.IAuthenticate svc = CModel.Logic.ConfigAndResourceComponent.Container().Resolve<CModel.Logic.IAuthenticate>();
        CModel.Entities.UserSession session = svc.Login(client, loginfo);
        CModel.DTO.UserSessionDTO copied = Mapper.Map<CModel.Entities.UserSession, CModel.DTO.UserSessionDTO>(session);
        return copied;
    }  

public class UserSessionDTO
{
    public string SourceIP { get; set; }
    public string SessionID { get; set; }
    public long UserID { get; set; }
} 
```

发生异常时：

![在此处输入图像描述](../Images/ac8bb315272acead95048ad6f81a4fce.png)

它在客户端显示“ `400: Bad request`”错误（从 ajax 返回的错误）。
我想让 ajax 显示的是异常消息“InvalidLogin”。

我的解决方案是这样，但我不知道该怎么做。

当抛出异常时，rest-project 将调用一些构造错误消息的方法，构造的消息将作为返回值。

或者如果你有更好的想法，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:44:58.603

如果使用 REST 服务，`WebFaultException`应该使用，如果使用 SOAP 服务，那么`FaultException`.

# javascript - JSLint 语法逗号或分号

> ID：10328905
> 
> 赞同：1
> 
> 时间：2012-04-26T07:20:58.183
> 
> 标签：javascript, jslint

嗨，我在第二行遇到编译错误，我正在使用 JSLint。

```
t.dat = dataObj;
t.medianTime = t.dat.medianTime || t.MEDIAN_TIME, 
```

为语句添加分号或逗号有什么区别。请有人建议 JSLint 的正确文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:26:02.500

在 JavaScript 中，分号将结束语句，而逗号用于将多个变量声明收集到一个语句中（以及其他用途）。例如：

```
var myNumericVar = 1,
    myBooleanVar = false; 
```

这将相当于

```
var myNumericVar = 1;
var myBooleanVar = false; 
```

回到您的问题，如果您用分号替换逗号，JSLint 应该停止抱怨。

# sql - PLSQL 中的时区转换

> ID：10328907
> 
> 赞同：5
> 
> 时间：2012-04-26T07:21:05.960
> 
> 标签：sql, oracle, plsql, plsqldeveloper

我需要将 sysdate 和时间转换为特定的时区，如 EST。我不能假设我当前的时区。

如何在plsql中转换它？请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T17:37:14.037

假设您有一个`TIMESTAMP WITH TIME ZONE`（例如`systimestamp`），您可以使用该`AT TIME ZONE`语法。例如，我可以`systimestamp`通过指定不同的时区名称来获取当前时区并将其转换为 UTC (GMT)、东部和太平洋时区。

```
SQL> ed
Wrote file afiedt.buf

  1  select systimestamp at time zone 'UTC' current_time_in_utc,
  2         systimestamp at time zone 'Us/Eastern' current_time_in_est,
  3         systimestamp at time zone 'US/Pacific' current_time_in_pst
  4*   from dual
SQL> /

CURRENT_TIME_IN_UTC
---------------------------------------------------------------------------
CURRENT_TIME_IN_EST
---------------------------------------------------------------------------
CURRENT_TIME_IN_PST
---------------------------------------------------------------------------
26-APR-12 05.36.11.802000 PM UTC
26-APR-12 01.36.11.802000 PM US/EASTERN
26-APR-12 10.36.11.802000 AM US/PACIFIC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-16T19:42:58.020

Oracle 已经有一个时区表：

```
SELECT tzname, tzabbrev from V$TIMEZONE_NAMES
SELECT TZ_OFFSET('US/Eastern') FROM DUAL; 
```

获取 EPT 中的当前时间以用于 SQL 语句：

```
select to_timestamp(to_char(TRUNC(LOCALTIMESTAMP - 5/1440, 'MI'),'mm/dd/yyyy hh24:mi'),'mm/dd/yyyy hh24:mi') FROM DUAL; 
```

Oracle 的 11g SQL 参考非常好，可在此处在线获取：http: [//docs.oracle.com/cd/B28359_01/server.111/b28286/toc.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/toc.htm)

您可以快速查找以下功能，我相信您会发现这些功能会有所帮助：

*   当前时间戳
*   数据库时区
*   本地时间戳
*   截断（日期）
*   会话时区
*   sys_extract_utc
*   系统时间戳
*   to_timestamp
*   to_timestamp_tz
*   tz_offset

    更改会话集 TIME_ZONE = '+00:00'; -- 您现在将看到 UTC 时间而不是 EPT

不同时区的当前日期和时间

以当地通行时间返回当前日期和时间（sysdate）

```
 Select sysdate from dual;

select LOCALTIMESTAMP FROM DUAL; 
```

以 UTC 格式返回当前日期

```
select LOCALTIMESTAMP at time zone '+00:00' FROM DUAL 
```

-- 尝试使用 localtimestamp、to_timestamp 和 to_timestamp_tz，而不是使用 sysdate 和 to_date。它们类似于 sysdate 和 to_date，但添加了时区功能。

```
select LOCALTIMESTAMP at time zone '+00:00' FROM DUAL; –- returns essentially the same as sysdate but in UTC

or 

ALTER SESSION SET TIME_ZONE = 'UTC';
select LOCALTIMESTAMP FROM DUAL –- after setting session time_zone to ‘UTC’ this will now return a UTC timestamp 
```

时区转换 以 UTC 格式获取当前时间以用于 SQL 语句。

```
-- Get current time in UTC format and subtract 5 minutes.

    LOCALTIMESTAMP at time zone '+00:00' - 5/1440

-- Trunc the time to eliminate seconds

TRUNC(LOCALTIMESTAMP at time zone '+00:00' - 5/1440, 'MI')

-- Convert to characters then back to datetime. 

to_timestamp(to_char(TRUNC(LOCALTIMESTAMP at time zone '+00:00' - 5/1440, 'MI'),'mm/dd/yyyy hh24:mi'),'mm/dd/yyyy hh24:mi')

-- Select from dual to show it works. 

select to_timestamp(to_char(TRUNC(LOCALTIMESTAMP at time zone '+00:00' - 5/1440, 'MI'),'mm/dd/yyyy hh24:mi'),'mm/dd/yyyy hh24:mi') FROM DUAL;

Get the current time in EPT for use in a SQL statement.

    -- Get current time in UTC format and subtract 5 minutes.
    ALTER SESSION SET TIME_ZONE = 'US/Eastern'; -- set to EPT time
    select LOCALTIMESTAMP from dual - 5/1440
-- Trunc the time to eliminate seconds

    TRUNC(LOCALTIMESTAMP - 5/1440, 'MI')

    -- Convert to characters then back to datetime. 
    to_timestamp(to_char(TRUNC(LOCALTIMESTAMP - 5/1440, 'MI'),'mm/dd/yyyy hh24:mi'),'mm/dd/yyyy hh24:mi')

    -- Select from dual to show it works. 
    select to_timestamp(to_char(TRUNC(LOCALTIMESTAMP - 5/1440, 'MI'),'mm/dd/yyyy hh24:mi'),'mm/dd/yyyy hh24:mi') FROM DUAL; 
```

返回 DB 和 Session 时区函数

```
ALTER SESSION SET TIME_ZONE = '+00:00';  -- you will now see times in UTC instead of EPT
ALTER SESSION SET NLS_DATE_FORMAT = 'MM/DD/YYYY HH24:MI:SS';

ALTER SESSION SET TIME_ZONE = '+00:00';  -- you will now see times in UTC instead of EPT
ALTER SESSION SET TIME_ZONE = 'UTC'; -- set to UTC time same as command above
SELECT DBTIMEZONE , SESSIONTIMEZONE, CURRENT_TIMESTAMP, LOCALTIMESTAMP, systimestamp, sysdate FROM DUAL; -- see the results
ALTER SESSION SET TIME_ZONE = 'US/Eastern'; -- set to EPT time
SELECT DBTIMEZONE , SESSIONTIMEZONE, CURRENT_TIMESTAMP, LOCALTIMESTAMP, systimestamp, sysdate FROM DUAL; -- see the results

SELECT TO_TIMESTAMP_TZ('05/16/2014 11:26:48 -04:00',
   'MM/DD/YYYY HH:MI:SS TZH:TZM') FROM DUAL;

SELECT tzname, tzabbrev from V$TIMEZONE_NAMES where tzabbrev = 'EPT';
SELECT TZ_OFFSET('US/Eastern') FROM DUAL;

-- The following example casts a null column in a UNION operation as TIMESTAMP WITH LOCAL TIME ZONE using the sample tables oe.order_items and oe.orders:

SELECT order_id, line_item_id,
   CAST(NULL AS TIMESTAMP WITH LOCAL TIME ZONE) order_date
   FROM order_items
UNION
SELECT order_id, to_number(null), order_date
   FROM orders; 
```

日期时间和时区 (TO_TIMESTAMP_TZ)

```
TO_TIMESTAMP_TZ converts char of CHAR, VARCHAR2, NCHAR, or NVARCHAR2 datatype to a value of TIMESTAMP WITH TIME ZONEdatatype. 
```

示例：以下示例将字符串转换为 TIMESTAMP WITH TIME ZONE 的值：

```
SELECT TO_TIMESTAMP_TZ('1999-12-01 11:00:00 -8:00',
   'YYYY-MM-DD HH:MI:SS TZH:TZM') FROM DUAL;
TO_TIMESTAMP_TZ('1999-12-0111:00:00-08:00','YYYY-MM-DDHH:MI:SSTZH:TZM') 
```

以下示例使用示例表 oe.order_items 和 oe.orders 将 UNION 操作中的空列转换为 TIMESTAMP WITH LOCAL TIME ZONE：

```
SELECT order_id, line_item_id,
   CAST(NULL AS TIMESTAMP WITH LOCAL TIME ZONE) order_date
   FROM order_items
UNION
SELECT order_id, to_number(null), order_date
   FROM orders; 
```

设置日期和时间格式

```
ALTER SESSION SET NLS_DATE_FORMAT = 'MM/DD/YYYY HH24:MI:SS';
SELECT CURRENT_TIMESTAMP, LOCALTIMESTAMP FROM DUAL; 
```

设置当前/本地时区

```
ALTER SESSION SET TIME_ZONE = '-5:00';
ALTER SESSION SET NLS_DATE_FORMAT = 'MM/DD/YYYY HH24:MI:SS';
SELECT CURRENT_TIMESTAMP, LOCALTIMESTAMP FROM DUAL; 
```

当地时间 (LOCALTIMESTAMP)

LOCALTIMESTAMP 以数据类型 TIMESTAMP 的值返回会话时区中的当前日期和时间。此函数与 CURRENT_TIMESTAMP 的区别在于 LOCALTIMESTAMP 返回一个 TIMESTAMP 值，而 CURRENT_TIMESTAMP 返回一个 TIMESTAMP WITH TIME ZONE 值。

```
ALTER SESSION SET TIME_ZONE = '-5:00';
    ALTER SESSION SET NLS_DATE_FORMAT = 'DD-MON-YYYY HH24:MI:SS';
    SELECT CURRENT_TIMESTAMP, LOCALTIMESTAMP FROM DUAL; 
```

以下语句使用正确的格式掩码来匹配 LOCALTIMESTAMP 的返回类型：

```
 INSERT INTO local_test VALUES
   (TO_TIMESTAMP(LOCALTIMESTAMP, 'DD-MON-RR HH.MI.SSXFF PM'));

The code above is required to include the TIME ZONE portion of the return type of the function 
```

当前时间戳 (CURRENT_TIMESTAMP)

CURRENT_TIMESTAMP 以数据类型 TIMESTAMP WITH TIMEZONE 的值返回会话时区中的当前日期和时间。时区偏移量反映了 SQL 会话的当前本地时间

```
 ALTER SESSION SET TIME_ZONE = '-5:0';
ALTER SESSION SET NLS_DATE_FORMAT = 'DD-MON-YYYY HH24:MI:SS';
    SELECT SESSIONTIMEZONE, CURRENT_TIMESTAMP FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T12:48:00.420

这个怎么样？

```
select to_timestamp_tz(to_char(sysdate,'YYYY-MM-DD HH24:MI:SS') || ' ' || 'FROM_TIME_ZONE', 'YYYY-MM-DD HH24:MI:SS TZR') at time zone 'TO_TIME_ZONE'
from dual; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T17:28:38.940

尝试这个：

```
CREATE TABLE TIMEZONES (ZONE          CHAR(1) PRIMARY KEY,
                        NAMES         VARCHAR2(25) NOT NULL,
                        OFFSET_HOURS  NUMBER NOT NULL); 
```

按如下方式填充它：

```
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('Z', 'GMT', 0);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('N', '-1', -1);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('O', '-2', -2);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('P', '-3', -3);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('Q', '-4 EDT', -4);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('R', 'EST CDT', -5);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('S', 'CST MDT', -6);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('T', 'MST PDT', -7);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('U', 'PST', -8);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('V', '-9', -9);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('W', '-10', -10);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('X', '-11', -11);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('Y', '-12', -12);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('A', '1', -1);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('B', '2', -2);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('C', '3', -3);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('D', '4', -4);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('E', '5', -5);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('F', '6', -6);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('G', '7', -7);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('H', '8', -8);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('I', '9', -9);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('K', '10', -10);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('L', '11', -11);
INSERT INTO TIMEZONES (ZONE, NAMES, OFFSET_HOURS) VALUES ('M', '12', -12); 
```

鉴于上述情况，您可以这样做

```
SELECT SYS_EXTRACT_UTC(SYSTIMESTAMP) + (tz.OFFSET_HOURS / 24)
  FROM TIMEZONES tz
  WHERE tz.NAMES LIKE '%EDT%'; 
```

或者

```
 WHERE tz.ZONE = 'Q' 
```

获取-4时区的当地时间。

分享和享受。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T08:28:12.293

以下将为您提供当前的 EST 时间（[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time) - 5 小时），而不考虑夏令时：

```
SELECT SYS_EXTRACT_UTC(SYSTIMESTAMP) FROM DUAL 
```

为了考虑夏令时，您有 2 个选项：

1.  编写一个函数来计算夏令时更改发生在哪些日期
2.  填充包含这些日期的表

如果您只需要支持 EST 时区，那么编写一个函数可能是要走的路；否则我建议填充一个包含这些日期的表格，因为它们[在时区之间有所不同](http://www.timeanddate.com/time/dst/2012a.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-18T23:17:20.907

到目前为止，所有方法在使用当前时间戳时都可以很好地工作。然而，我注意到甲骨文`tz_offset`会给你主要的时间偏移量。例如，七月，

```
SELECT TZ_OFFSET('US/Eastern') FROM DUAL; 
```

结果为“-04:00”。1 月，相同的语句导致“-05:00”。因此，如果要转换存储在数据库中的日期（而不是当前系统或会话时间），则必须进行一些开发。

你可能会注意到

```
SELECT TZ_OFFSET('EST') FROM DUAL; 
```

总是返回“-05:00”。不幸的是，对其他美国标准时间（中部、山区和太平洋）的快速测试显示了不同的结果。运行以下命令自己查看。在 DST 生效时，我在 6 月 16 日运行了以下命令。

```
SELECT TZ_OFFSET('US/Eastern'), TZ_OFFSET('EST'),  TZ_OFFSET('EST5EDT') FROM DUAL;
SELECT TZ_OFFSET('US/Central'), TZ_OFFSET('CST'),  TZ_OFFSET('CST6CDT') FROM DUAL;
SELECT TZ_OFFSET('US/Mountain'), TZ_OFFSET('MST'),  TZ_OFFSET('MST7MDT') FROM DUAL;
SELECT TZ_OFFSET('US/Pacific'), TZ_OFFSET('PST'),  TZ_OFFSET('PST8PDT') FROM DUAL;

-04:00      -05:00      -04:00
-05:00      -05:00      -05:00
-06:00      -07:00      -06:00
-07:00      -07:00      -07:00 
```

结果有些令人沮丧。从快速采样来看，几乎所有 tz_offset 查询似乎都以当前流行时间响应。这在您处理当前时间的转换时很有用，但在处理从数据库中提取的时间时会变得平淡无奇。

现在，我可以编写代码来确定我是处于标准时间还是现行时间。但是，我看不到在`tz_offset`标准时间或日光时间持续拉动 a 的方法，只是普遍存在。

这使得开发人员需要像上面 Bob Jarvis 所做的那样创建自己的表来解决问题，就像我在下面的代码中所做的那样。

```
ALTER SESSION SET NLS_DATE_FORMAT = 'MM/DD/YYYY HH24:MI:SS';

Declare
-- ******** User declarations begin here ******** --

-- ******** User declarations end here ******** --

/*******************  All Declarations of Variables and Functions below this point support Time Zone Conversion (Convert_TZ function) *******************/  
  -- TimeZone Conversion Procedure

  -- User Input (Parameters)
  input_date date := TO_TIMESTAMP_TZ('7/1/2009 18:00','mm/dd/yyyy hh24:mi');  -- Try: LocalTimestamp; or TO_TIMESTAMP('2/1/2009 13:00','mm/dd/yyyy hh24:mi')
  --input_date date := LocalTimestamp;
  input_TZ varchar(3) := 'GMT';  -- Exmaples: EST, EDT or EPT for Eastern Standard, Daylight or Prevailing, respectively.
  output_TZ varchar(3) := 'EPT';  -- 

  -- Variables
  type date_array is table of date;
  return_date date := localtimestamp;
  temp_date date := to_date('10/27/1974 02:00','mm/dd/yyyy hh24:mi');
  type str_array is table of varchar2(10);
  dow_list str_array;

   Function dst_start_stop (input_date DATE) 
        RETURN date_array
    AS
        year_part number(4);
        start_week number(1) := 0;  -- week of month: -1=last, 1=1st, 2=nd, 0=fixed date (like 1974 and 1975)
        stop_week number(1) := 0;   -- week of month: -1=last, 1=1st, 2=nd, 0=fixed date (like 1974 and 1975)
        dst_start date := to_date('01/06/1974 23:59','mm/dd/yyyy hh24:mi');
        dst_stop date := to_date('10/27/1974 23:59','mm/dd/yyyy hh24:mi');
        dst_date date := dst_start;
        dst_msg varchar2(500) := ' ';
        inc_dec number := 0;
        Cnt number(1) := 0;
        dst_dow number(1) := 1;  --  1=Sunday, 2=Monday, etc.
        i number;
        dst_range date_array;
   BEGIN
      dst_range := date_array();
      dst_range.extend(2);
      dst_range(1) := temp_date;
      dst_range(2) := temp_date;
      DBMS_OUTPUT.PUT_LINE('  ** Start: dst_start_stop Func **');
      --insert into dst_range values(dst_start,dst_stop);
      --dst_range(1) := dst_start;
      --dst_range(2) :=  dst_stop;
      year_part := to_number(to_char(input_date,'YYYY'));
      DBMS_OUTPUT.PUT_LINE('      Year: '||year_part);

      -- Determine DST formula based on year of input_date
      If year_part > 9999 Then  --   Invalid TempYear > 9999
          dst_msg := 'N/A.  I can''t guess if DST will be applied after 9999\.  Standard Time returned.  ';
          Goto found_start_stop;
      ElsIf year_part >= 2007 Then --   2007 forward.  Latest DST Rules used after 2007.
          dst_msg := '2007 forward: Third National DST Standard.  ';
          --dst_msg := dst_msg || 'Spring Forward 2:00 AM second Sunday in March (skip 02:00:00 through 02:59:59, I.E. skip from 01:59:59 to 03:00:00).  '
          --dst_msg := dst_msg || 'Fall Back 2:00 AM first Sunday in November (repeat 02:00:00 to 02:59:59, I.E. jump back from 02:59:59 to 02:00:00 once).  '
          DBMS_OUTPUT.PUT_LINE('    '||dst_msg);
          dst_start := to_date('03/01/'||year_part||' 02:00','mm/dd/yyyy hh24:mi');
          start_week := 2; -- 2nd Sunday in March
          dst_stop := to_date('11/01/'||year_part||' 02:00','mm/dd/yyyy hh24:mi');
          stop_week := 1;  -- 1st Sunday in November
      ElsIf year_part >= 1987 Then  --   1987 thru 2006.
          dst_msg := '1987 thru 2006: Second National DST Standard.  ';
          --dst_msg := dst_msg || 'Spring Forward 2:00 AM first Sunday in April (skip 02:00:00 through 02:59:59, I.E. skip from 01:59:59 to 03:00:00).  ';
          --dst_msg := dst_msg || 'Fall Back 2:00 AM last Sunday in October (repeat 02:00:00 to 02:59:59, I.E. jump back from 02:59:59 to 02:00:00 once).  ';
          DBMS_OUTPUT.PUT_LINE('    '||dst_msg);
          start_week := 1; 
          dst_start := to_date('04/01/'||year_part||' 02:00','mm/dd/yyyy hh24:mi');
          stop_week := -1;  
          dst_stop := to_date('10/31/'||year_part||' 02:00','mm/dd/yyyy hh24:mi');
      ElsIf year_part >= 1976 Then  --   1976 thru 1986 OLD DST Rules used 1961 thru 1973.
          dst_msg := '1976 thru 1986: First National DST Standard (resumed after 1974-1975 extended DST trials).  ';
          --dst_msg := dst_msg || 'Spring Forward 2:00 AM last Sunday in April (skip 02:00:00 through 02:59:59, I.E. skip from 01:59:59 to 03:00:00).  ';
          --dst_msg := dst_msg || 'Fall Back 2:00 AM last Sunday in October (repeat 02:00:00 to 02:59:59, I.E. jump back from 02:59:59 to 02:00:00 once).  ';
          DBMS_OUTPUT.PUT_LINE('    '||dst_msg);
          start_week := -1; 
          dst_start := to_date('04/30/'||year_part||' 02:00','mm/dd/yyyy hh24:mi');
          stop_week := -1;  
          dst_stop := to_date('10/31/'||year_part||' 02:00','mm/dd/yyyy hh24:mi');
      ElsIf year_part = 1975 Then  --   1975 Trial.
          dst_msg := '1975 Trial of Extended DST.  ';
          --dst_msg := dst_msg || 'Spring Forward 2:00 AM Feb 23 (skip 02:00:00 through 02:59:59, I.E. skip from 01:59:59 to 03:00:00).  ';
          --dst_msg := dst_msg || 'Fall Back 2:00 AM Oct 26, the last Sun in Oct (repeat 02:00:00 to 02:59:59, I.E. jump back from 02:59:59 to 02:00:00 once).  ';
          DBMS_OUTPUT.PUT_LINE('    '||dst_msg);
          dst_start := to_date('02/23/1975 02:00','mm/dd/yyyy hh24:mi');
          dst_stop := to_date('10/26/1974 02:00','mm/dd/yyyy hh24:mi');
          Goto found_start_stop;
      ElsIf year_part = 1974 Then  --   1974 Trial.
          dst_msg := '1974 Trial of Extended DST.  ';
          --dst_msg := dst_msg || 'Spring Forward 2:00 AM Jan 6 (skip 02:00:00 through 02:59:59, I.E. skip from 01:59:59 to 03:00:00)).  ';
          --dst_msg := dst_msg || 'Fall Back 2:00 AM Oct 27 (repeat 02:00:00 to 02:59:59, I.E. jump back from 02:59:59 to 02:00:00 once).  ';
          DBMS_OUTPUT.PUT_LINE('    '||dst_msg);
          dst_start := to_date('01/06/1974 02:00','mm/dd/yyyy hh24:mi');
          dst_stop := to_date('10/27/1974 02:00','mm/dd/yyyy hh24:mi');
          Goto found_start_stop;
      ElsIf year_part >= 1961 Then  --   1961 thru 1973 First National DST Standard.
          dst_msg := '1961 thru 1973: First National DST Standard.  ';
          --dst_msg := dst_msg || 'Spring Forward 2:00 AM last Sunday in April (skip 02:00:00 through 02:59:59, I.E. skip from 01:59:59 to 03:00:00).  ';
          --dst_msg := dst_msg || 'Fall Back 2:00 AM last Sunday in October (repeat 02:00:00 to 02:59:59, I.E. jump back from 02:59:59 to 02:00:00 once).  ';
          start_week := -1; 
          dst_start := to_date('04/30/'||input_date||' 02:00','mm/dd/yyyy hh24:mi');
          stop_week := -1;  
          dst_stop := to_date('10/31/'||year_part||' 02:00','mm/dd/yyyy hh24:mi');
      ElsIf year_part >=1900 Then  --   DST was applied inconsistently or not at all
          dst_msg := 'N/A.  Before 1961, DST was applied inconsistently across states or not at all.  Standard Time returned.  ';
          Goto found_start_stop;
      ElsIf year_part < 1900 Then  --   Invalid year_part
          dst_msg := 'N/A. DST never active before 1900';
          Goto found_start_stop;
      Else  --   Invalid year_part 
          dst_msg := 'N/A.  Error.  Invalid datetime value.';
          Goto found_start_stop;
      End If;   
      DBMS_OUTPUT.PUT_LINE('  The code specified the following DST rules for the input date ('||input_date||').  '||dst_msg);
      if start_week > 0 then
        DBMS_OUTPUT.PUT_LINE('    Start on '||dow_list(dst_dow)||' #'||start_week||' of '||trunc(dst_start,'W')||'. ');
      else
        DBMS_OUTPUT.PUT_LINE('    Starts '||start_week||' from the last '||dow_list(dst_dow)||' of '||trunc(dst_start,'W')||'. ');
      end if;
      if stop_week > 0 then
        DBMS_OUTPUT.PUT_LINE('    End on '||dow_list(dst_dow)||' #'||stop_week||' of '||trunc(dst_stop,'W')||'. ');
      else
        DBMS_OUTPUT.PUT_LINE('    Ends '||stop_week||' from the last '||dow_list(dst_dow)||' of '||trunc(dst_stop,'W')||'. ');
      end if;
      DBMS_OUTPUT.PUT_LINE('    ');

      /* Apply formula determined above to find dst start and stop times for the year of the input_date.
            This section is skipped if start/stop already determined or indeterminant. 
      */
        -- DstStartDay 
        inc_dec := start_week/abs(start_week);  -- results in +1 or -1
        Cnt := 0; i:=0;
        while (Cnt < abs(start_week) and i<20) loop
          i:=i+1;
          if (to_char(dst_start,'D') = dst_dow) then 
            Cnt := Cnt + 1; 
            --DBMS_OUTPUT.PUT_LINE('    Found '||dow_list(dst_dow))||' '||Cnt||': '||dst_start)
          end if;
          if (Cnt < abs(start_week)) then 
            dst_start := dst_start + inc_dec; 
          end if;
        end loop;
        case inc_dec
          when 1 then
            DBMS_OUTPUT.PUT_LINE('  Spring forward on  '||dow_list(dst_dow)||' #'||Cnt||' of the month: '||dst_start);
          else
            DBMS_OUTPUT.PUT_LINE('  Spring forward on the last'||dow_list(dst_dow)||'of the month: '||dst_start);
        end case;
      -- DstStopDay 
        inc_dec := stop_week/abs(stop_week);  -- results in +1 or -1
        Cnt := 0; i :=0;
        while (Cnt < abs(stop_week) and i <20) loop -- to_char(dst_stop,'D') > 1 loop
          i:=i+1;
          if (to_char(dst_stop,'D') = dst_dow) then 
            dst_stop := dst_stop + inc_dec; 
            Cnt := Cnt + 1; 
          end if;
          if (Cnt < abs(stop_week)) then 
            dst_stop := dst_stop + inc_dec; 
          end if;
        end loop;
        case inc_dec
          when 1 then
            DBMS_OUTPUT.PUT_LINE('  Fall back on  '||dow_list(dst_dow)||' #'||Cnt||' of the month: '||dst_stop);
          else
            DBMS_OUTPUT.PUT_LINE('  Fall back on the last'||dow_list(dst_dow)||'of the month: '||dst_stop);
        end case;
    <<found_start_stop>>
      dst_range(1) := dst_start; 
      DBMS_OUTPUT.PUT_LINE('      dst_range(1): '||to_char(dst_range(1),'mm/dd/yyyy hh24:mi')||' = '||dst_start);
      dst_range(2) := dst_stop;
      DBMS_OUTPUT.PUT_LINE('      dst_range(2): '||to_char(dst_range(2),'mm/dd/yyyy hh24:mi')||' = '||dst_stop);
      DBMS_OUTPUT.PUT_LINE('  ** Finish: dst_start_stop Func **');
      Return dst_range;
   END dst_start_stop;

   Function is_dst_now
        Return boolean
      AS
          --type date_array is table of date;
          dst_range date_array;
          curr_time date := LocalTimestamp;
      Begin
          dst_range := date_array();
          dst_range.extend(2);
          dst_range := dst_start_stop(curr_time);
          If (dst_range(1) <= curr_time and curr_time < dst_range(2))  then 
            DBMS_OUTPUT.PUT_LINE('DST is  active.');
            Return True;
          Else
            DBMS_OUTPUT.PUT_LINE('DST is NOT active.');
            Return False;
          End If;  
   End;

   FUNCTION dst_offset (prevailing_date DATE, dst_start DATE, dst_stop DATE) 
        RETURN number
      AS
            offset_days number :=0;
      BEGIN

          DBMS_OUTPUT.PUT_LINE('  Starting dst_offset sub-function:');
          DBMS_OUTPUT.PUT_LINE('        where (input date, DST start, DST stop) = '||to_char(prevailing_date,'mm/dd/yyyy hh24:mi')
                                ||', '||to_char(dst_start,'mm/dd/yyyy hh24:mi')||', '||to_char(dst_stop,'mm/dd/yyyy hh24:mi'));

          If (dst_start <= prevailing_date and prevailing_date < dst_stop) then 
            offset_days :=1/24;
            DBMS_OUTPUT.PUT_LINE('        input date is between dst start and stop');
          Else
            offset_days :=0;
            DBMS_OUTPUT.PUT_LINE('        input date is not between dst start and stop');
          End If;
          DBMS_OUTPUT.PUT_LINE('        Result: DST Offset days = '||offset_days);
          DBMS_OUTPUT.PUT_LINE('                          hours = '||(offset_days*24)); 
          Return offset_days;
   END dst_offset;

-- Begin  --move this down under the function -- ******************

   FUNCTION Convert_TZ (input_date DATE, input_tz varchar2, output_tz varchar2) 
   RETURN date
   AS
        -- Variables
        input_sz varchar(3) := substr(input_TZ,1,1)||'S'||substr(input_TZ,3,1);
        input_sz varchar(3) := substr(output_TZ,1,1)||'S'||substr(output_TZ,3,1);
        temp_str varchar2(1000);
        dst_range date_array;
        input_dst_offset number := 0;
        input_tz_offset number := 0;
        input_date_st date; --standard time
        gmt_date date;
        output_dst_offset number := 0;
        output_tz_offset number := 0;
        output_date date;
        output_date_pt date; -- prevailing time
        tz_offset_str varchar2(30);
        --orig_nls_date_format varchar2(30) := NLS_DATE_FORMAT;
        --TempYear number(4,0) := to_char(TempDate,'YYYY');  -- or := trunc(PrevailingTime, YYYY);

   BEGIN 

      DBMS_OUTPUT.PUT_LINE('Starting Pl/sql procedure.  ');

      DBMS_OUTPUT.PUT_LINE('Input Date: '||to_char(input_date,'mm/dd/yyyy hh24:mi')||' '||input_tz||'.  ');
      -- Find DST start/stop dates  
      dst_range := date_array();
      dst_range.extend(2);
      dst_range := dst_start_stop(input_date);
      DBMS_OUTPUT.PUT_LINE('DST date range determined.  ');
      DBMS_OUTPUT.PUT_LINE('      dst_range(1): '||to_char(dst_range(1),'mm/dd/yyyy hh24:mi')||' = '||dst_range(1));
      DBMS_OUTPUT.PUT_LINE('      dst_range(2): '||to_char(dst_range(2),'mm/dd/yyyy hh24:mi')||' = '||dst_range(2));

      -- Convert Input Date from input time zone to GMT
        If upper(input_TZ) in ('GMT','UCT') then
            -- If input TZ is GMT, we can skip this conversion!
            DBMS_OUTPUT.PUT_LINE('    Input Time is ('||to_char(input_date,'mm/dd/yyyy hh24:mi')||' '
                                  ||input_tz||' GMT).  No conversion required.  ');
            input_tz_offset := 0;
            input_dst_offset := 0; 
            gmt_date := input_date;
        Else
            -- Convert from local prevailing to local standard time
                -- Get input_dst_offset 
                Case upper(substr(input_TZ,2,1)) 
                  When 'S' then 
                    -- already in standard time, not conversion needed.
                    input_dst_offset := 0; -- duplicative
                    DBMS_OUTPUT.PUT_LINE('Standard time ('||input_tz||') entered; no dst offset.' );
                          --input_tz_offset := input_tz_offset;
                  Else 
                    -- run dst_offset function to convert from prevailing or daylight time to standard time.
                    input_dst_offset := dst_offset(input_date, dst_range(1), dst_range(2));
                    input_date_st := input_date - input_dst_offset; 
                    DBMS_OUTPUT.PUT_LINE('Daylight Saving Time Effective ('||to_char(input_date,'mm/dd/yyyy hh24:mi')||' '
                                          ||input_tz||'); 1 hour offset; input DST offset = '||input_dst_offset);
                    DBMS_OUTPUT.PUT_LINE('        where (input_date, dst_start, dst_stop) = '
                                          ||to_char(input_date,'mm/dd/yyyy hh24:mi')
                                          ||' '||input_tz||', '||dst_range(1)||', '||dst_range(2)||', ');
                    DBMS_OUTPUT.PUT_LINE('        which adjusts '||to_char(input_date,'mm/dd/yyyy hh24:mi')||' '||input_tz
                                          ||' daylight to '||input_date_st||' standard time.  ');
                End Case;

            -- Convert from local standard time to GMT
                SELECT TZ_OFFSET((SELECT max(tzname) FROM V$TIMEZONE_NAMES where tzabbrev = input_TZ)) 
                INTO tz_offset_str 
                FROM DUAL;

                input_tz_offset := ( substr(tz_offset_str,1,3)/24 + substr(tz_offset_str,5,2)/1440 );
                If is_dst_now then 
                  input_tz_offset := input_tz_offset - 1/24;
                End if;
                DBMS_OUTPUT.PUT_LINE('    input_tz_offset (fractional days): '||input_tz_offset||'. ');
                DBMS_OUTPUT.PUT_LINE('    input_tz_offset (hours): '||input_tz_offset*24||'. ');
                gmt_date := input_date_st - input_tz_offset;

        End If;

        -- Convert input date from GMT to requested output time zone
        DBMS_OUTPUT.PUT_LINE('  ');
        DBMS_OUTPUT.PUT_LINE('Starting output_date analysis. ');
        If upper(output_TZ) in ('GMT','UCT') then
            -- If desired output TZ is GMT, we can skip this conversion!
            output_tz_offset := 0;
            output_dst_offset := 0; 
            output_date := gmt_date;
            DBMS_OUTPUT.PUT_LINE('    Requested output format is GMT: ('||to_char(output_date,'mm/dd/yyyy hh24:mi')||' '||output_tz||').  No conversion required.  ');
        Else
            -- Get output_dst_offset 
                Case upper(substr(output_TZ,2,1)) 
                  When 'S' then 
                    output_dst_offset := 0; -- duplicative
                    DBMS_OUTPUT.PUT_LINE('Standard time ('||output_TZ||') entered; no dst offset.' );
                  Else
                    output_dst_offset := dst_offset(gmt_date + output_tz_offset, dst_range(1), dst_range(2));
                End Case;
            -- Convert from GMT to local standard time
                SELECT TZ_OFFSET((SELECT max(tzname) FROM V$TIMEZONE_NAMES where tzabbrev = output_TZ)) INTO tz_offset_str FROM DUAL;
                output_tz_offset := ( substr(tz_offset_str,1,3)/24 + substr(tz_offset_str,5,2)/1440 );
                DBMS_OUTPUT.PUT_LINE('    output_tz_offset (fractional days): '||output_tz_offset||'. ');
                DBMS_OUTPUT.PUT_LINE('    output_tz_offset (hours): '||output_tz_offset*24||'. ');
                If is_dst_now then 
                  output_tz_offset := output_tz_offset - 1/24;
                  DBMS_OUTPUT.PUT_LINE('    tz_offset correction... ');
                  DBMS_OUTPUT.PUT_LINE('      output_tz_offset (fractional days): '||output_tz_offset||'. ');
                  DBMS_OUTPUT.PUT_LINE('      output_tz_offset (hours): '||output_tz_offset*24||'. ');
                End if;

                    output_date := gmt_date + output_tz_offset + output_dst_offset;        
                    DBMS_OUTPUT.PUT_LINE('          gmt_date: '||gmt_date);
                    DBMS_OUTPUT.PUT_LINE('  output_tz_offset: '||output_tz_offset);
                    DBMS_OUTPUT.PUT_LINE(' output_dst_offset: '||output_dst_offset);

                    DBMS_OUTPUT.PUT_LINE('Daylight Saving Time ('||output_TZ||') offset = '||output_dst_offset);
                    DBMS_OUTPUT.PUT_LINE('        where (output_date, dst_start, DST_stop) = '||output_date||', '||dst_range(1)||', '||dst_range(2));
                    DBMS_OUTPUT.PUT_LINE('        which adjusts '||output_date||' standard to '||output_date_pt||' daylight time.  ');
        End If;

        DBMS_OUTPUT.PUT_LINE('Output Date = '||to_char(output_date,'mm/dd/yyyy hh24:mi')||' '||output_tz||'.  ');

    Goto AllDone;

    <<FoundError>>      

    <<AllDone>>
      DBMS_OUTPUT.PUT_LINE('   ');
      DBMS_OUTPUT.PUT_LINE('***    Results     ***');
      DBMS_OUTPUT.PUT_LINE('   ');

      if input_dst_offset <> 0 then
        temp_str := 'daylight saving';
      else
        temp_str := 'standard';
      end if;
      DBMS_OUTPUT.PUT_LINE('    Input Date: '||to_char(input_date,'mm/dd/yyyy hh24:mi')||' '||input_tz||', which falls in  '||temp_str||' time.  ');
      DBMS_OUTPUT.PUT_LINE('    GMT Date: '||to_char(gmt_date,'mm/dd/yyyy hh24:mi')||' UTC/GMT.  ');
      DBMS_OUTPUT.PUT_LINE('    Output Date: '||to_char(output_date,'mm/dd/yyyy hh24:mi')||' UTC/GMT.  ');
      if output_dst_offset <> 0 then
        temp_str := 'daylight saving';
      else
        temp_str := 'standard';
      end if;
      DBMS_OUTPUT.PUT_LINE('    All Done.  Return Value: '||to_char(output_date,'mm/dd/yyyy hh24:mi')||' '||output_tz||'.  ');
      DBMS_OUTPUT.PUT_LINE('   ');
      DBMS_OUTPUT.PUT_LINE('*** End of Results ***');
      DBMS_OUTPUT.PUT_LINE('   ');
      DBMS_OUTPUT.PUT_LINE('LocalTimestamp EPT: '||LocalTimestamp);
      DBMS_OUTPUT.PUT_LINE('LocalTimestamp GMT:'||LOCALTIMESTAMP at time zone '+00:00');

      Return output_date;
   END;  
/*********************** End of Declarations of Variables and Functions for Time Zone Conversion (Convert_TZ function) *********************/  
Begin  
/*********************** Start of Procedural Code for  Time Zone Conversion (Convert_TZ function) *********************/  
     /* DOW list is required for Time Zone Conversion (Convert_TZ function) and should not be deleted. */
      dow_list := str_array();
      dow_list.extend(7);
      dow_list(1) := 'Sun';
      dow_list(2) := 'Mon';
      dow_list(3) := 'Tue';
      dow_list(4) := 'Wed';
      dow_list(5) := 'Thu';
      dow_list(6) := 'Fri';
      dow_list(7) := 'Sat';

     /* Next 2 lines are example of use of Time Zone Conversion (Convert_TZ function). */
      return_date := Convert_TZ (input_date, input_tz, output_tz);
      DBMS_OUTPUT.PUT_LINE('ta-dah! '||return_date);
/*********************** End of Procedural Code for Time Zone Conversion (Convert_TZ function) *********************/  

-- ******** User coded begins here ******** --
End; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-05T21:24:53.930

```
RTRIM( TO_CHAR( systimestamp at time zone 'GMT', 'DD-MON-YYYY HH24:MI:SS TZR' ))
RTRIM( TO_CHAR( systimestamp at time zone 'EST', 'DD-MON-YYYY HH24:MI:SS TZR' ))
RTRIM( TO_CHAR( systimestamp at time zone 'PST', 'DD-MON-YYYY HH24:MI:SS TZR' ))

output:
   05-NOV-2014 17:20:10 GMT
   05-NOV-2014 12:20:10 EST
   05-NOV-2014 09:20:10 PST

substr('05-NOV-2014 09:20:10 PST', -3, 3)   will return 'PST'

RTRIM (EXTRACT (HOUR from systimestamp ))
output:  17    (notice the 17 is in GMT time) 
```

# ios - 在没有“super”关键字的情况下调用 super

> ID：10328915
> 
> 赞同：3
> 
> 时间：2012-04-26T07:22:33.487
> 
> 标签：ios, objective-c, iphone, objective-c-runtime

我想实现 Xcode 3 中的“修复并继续功能”。

**上下文**：

主要思想是：当我需要“快速修复某些东西”时，我不会重新编译项目。我正在`Attacker class`使用“更新”方法实现进行小编译，将其加载到内存中并替换在运行时实现的 VictimClass 方法`incorrect`。我认为这种方法会比完整的项目重新编译更快。

当我完成修复时，我只是将`Attacker class`方法源复制到`Victim class`.

**问题**

目前，我不知道`[super ...]`在 Attacker 类中调用的正确性如何。

例如，我有 VictimClass

```
@interface VictimClass : UIView @end
@implementation VictimClass
- (void)drawRect:(CGRect)rect {
  [super drawRect:rect];
}
@end

@interface AttackerClass : NSObject @end
@implementation AttackerClass 
- (void)drawRect:(CGRect)rect {
  [super drawRect:rect];
  [self setupPrettyBackground];
}
@end
....

// EXCHANGE IMPLEMENTATIONS
Method m = class_getInstanceMethod([AttackerClass class], @selector(drawRect:));
const char * types = method_getTypeEncoding(m);
IMP attackerImp = method_getImplementation(m);

class_replaceMethod([VictimClass class], @selector(drawRect:), attackerImp, types);

// Invoking drawRect on Victim
VictimClass * view = /* */;
[view setNeedsDisplay]; 
```

此时，当`drawRect:`方法被调用时，这将导致异常，因为`drawRect:`会在 NSObject 类上调用，而不是在 UIView 类上调用

所以，我的问题是，`[super drawRect:]`在 AttackerClass 中调用的正确性如何，才有可能在运行时正确交换实现？

主要思想是提供一种方法来正确地用攻击者的类方法替换受害者类中的任何方法。一般来说，你不知道，超类`Victim class`。

**更新**：添加了替换实现代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T09:28:01.837

你不得不

1.  获取接收者类（例如 with `object_getClass(rcv)`）
2.  然后得到它的超类（用`class_getSuperclass(class)`）
3.  然后得到它的实现（用`class_getMethodImplementation(superclass, sel)`）
4.  然后打电话给小鬼。

完毕

如果您得到 nil 或 NULL，请在任何步骤停止。

哦，这一切似乎很愚蠢。但我认为这个问题只是缺乏背景来了解这种黑客攻击的动机。

**[更新]**

对未来读者的解释：

关键字在`super`编译时解析。因此，在运行时更改方法时，它不是预期的事情。旨在在运行时注入某个对象（及其类层次结构）的方法必须通过运行时进行超级调用，如上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:34:11.477

假设您所做的运行时更改涉及修改超类，您必须执行以下操作：

```
@implementation AttackerClass 
-(void) drawRect:(CGRect)rect
{
    if( [super respondsToSelector:@selector(drawRect:)] )
    {
        [super drawRect:rect];
    }
    [self setupPrettyBackground];
}
@end 
```

这将检查超类是否“知道” ，并且在没有选择器`drawRect:`的情况下不调用它。`super``drawRect:`

因此，当超类是时`NSObject`，`drawRect:`消息将不会被发送。当您将其更改为`UIView`在运行时（无论您的原因是什么），都可以安全地发送消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:08:46.810

一种方法是使用 objc_msgSendSuper。您的方法**-[AttackerClass drawRect:]**将具有以下实现：

```
- (void)drawRect:(CGRect)rect {
  struct objc_super superTarget;
  superTarget.receiver = self;
  superTarget.class = object_getClass(self);
  objc_msgSendSuper(&superTarget, @selector(drawRect:), rect);
  [self setupPrettyBackground];
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-26T07:29:34.567

但是，当 NSObject 没有该方法时，为什么需要为超类 NSObject 调用 draw rect 方法呢？只是不要这样做......只是在 VictimClass drawrect 中调用它

# c# - WPF 设计时应用文化

> ID：10328917
> 
> 赞同：0
> 
> 时间：2012-04-26T07:22:44.633
> 
> 标签：c#, wpf, visual-studio, cultureinfo, currentuiculture

我们正在开发一个本地化的英语/阿拉伯语应用程序，我需要`System.Threading.Thread.CurrentThread.CurrentUiCulture`在设计时将两种文化中的任何一种设置为与运行时设置的值不同的值。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:43:35.653

Check this out [http://geekswithblogs.net/lbugnion/archive/2009/09/05/detecting-design-time-mode-in-wpf-and-silverlight.aspx](http://geekswithblogs.net/lbugnion/archive/2009/09/05/detecting-design-time-mode-in-wpf-and-silverlight.aspx), you can then set the Language accordingly with something like

```
FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement), new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.Name))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:24:51.413

设置**xml:lang**属性。

此属性描述特定元素及其子元素的文化。此属性的值会更改 WPF 中多个功能的行为。例如，它改变了断字、拼写检查、数字替换、复杂的脚本整形和字体回退的行为。有关在 XAML 中设置 xml:lang 处理的详细信息，请参阅 WPF 的全球化。

[http://msdn.microsoft.com/en-us/library/ms788718.aspx](http://msdn.microsoft.com/en-us/library/ms788718.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:11:47.743

`WPF Localization Extension`允许您设置设计时语言（并且它具有其他功能，例如允许您在运行时通过 WPF 更改语言而无需代码隐藏等）。

在这里查看：[http ://wpflocalizeextension.codeplex.com/](http://wpflocalizeextension.codeplex.com/)

# oracle-adf - 如何在 adf 树节点中添加指向 jsp 页面的链接？

> ID：10328921
> 
> 赞同：0
> 
> 时间：2012-04-26T07:23:15.727
> 
> 标签：oracle-adf

我已经制作了一个 adf 树，但我无法为每个子节点添加链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:50:45.033

您没有提到您是否在 WebCenter Portal 应用程序中。但是，如果您在 Portal Application 中，您可以借助 NavigationContext 进行导航，您可以在[文档](http://docs.oracle.com/cd/E25178_01/webcenter.1111/e10148/jpsdg_view_comps.htm)中找到更多信息和示例。您也可以使用来自支持 bean 的 NavigationContext。您可以定义您的 commandLink 的 actionListener 并通过该方法您可以从后端以及从 jspx 页面导航到各个页面。

如果您不在 Portal 应用程序中，在 Fusion Web 应用程序中，您应该通过 adfc-config.xml 的控制流案例来定义您的导航。不要使用 FacesConfig 进行导航。阅读本[文档](http://docs.oracle.com/cd/E23943_01/web.1111/b31974/taskflows.htm)以了解导航系统的工作原理。

由于您处于树模型中，并且如果您需要参数，那么您可以将一些值设置为会话：

```
<af:tree value="#{ConnectorTest.model}" var="node" > 
     <af:commandLink text="#{node.text}" action="#{node.action}">
          <af:setPropertyListener from="#{node.value}" to="#{sessionScope.value}" type="action"/>
     </af:commandLink>
</af:tree> 
```

此处操作将在 adfc-config 中定义。如果您不需要传递参数，则忽略 af:setPropertyListener 但您应该在配置文件中定义操作。

希望这会有所帮助。

* * *

编辑：

假设您有两个页面：Page1.jspx 和 Page2.jspx。现在您需要按以下方式在 adfc-config.xml 中定义操作（特别是 from-action）：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<adfc-config xmlns="http://xmlns.oracle.com/adf/controller" version="1.2">
  <view id="p1">
    <page>/path-to-the/Page1.jspx</page>
  </view>
  <view id="p2">
    <page>/path-to-the/Page2.jspx</page>
  </view>

  <control-flow-rule>
    <from-activity-id>p1</from-activity-id>
    <control-flow-case>
      <from-outcome>goToP2</from-outcome>
      <to-activity-id>p2</to-activity-id>
    </control-flow-case>
  </control-flow-rule>
</adfc-config> 
```

现在，如果您有一个 commandLink: `<af:commandLink id="link" action="goToP2" />`将导航到 Page2.jspx。action 属性也接受 el 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:36:00.863

`<af:switcher>`如果要为不同的子节点显示不同的操作，可以使用标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:33:16.547

你的意思是在子节点上添加超链接吗？

```
<af:tree var="node" value="#{myBean.myTree.root}" id="t1" focusListener="#{myBean.eventMethod}">
<af:commandLink text="#{node.firstname}" />
</af:tree> 
```

当您单击节点时，它会触发焦点事件并调用接受 FocusEvent obj 作为参数的方法 eventMethod，在此方法中您设置导航规则等......

试试看

# android - imageView.setImageBitmap(Bitmap) 极大地减慢了我的应用程序

> ID：10328922
> 
> 赞同：3
> 
> 时间：2012-04-26T07:23:17.967
> 
> 标签：android, user-interface, bitmap, imageview, android-canvas

我写了一个小应用程序，它应该显示一个转速计，它可以通过蓝牙获取有关 rpm 的数据。当数据发生变化时，我旋转针和其他一些图像视图以在屏幕上显示当前值。

旋转代码：

```
bMapRpm=bMapcanvasBackTacho.copy(bMapcanvasBackTacho.getConfig(), true);
canvasRpm.setBitmap(bMapRpm);
canvasRpm.save();
canvasRpm.rotate((float)Rpmdegree+(float)Rpmcurrentdegree,bMapRpm.getWidth()/2,bMapRpm.getHeight()/2);
canvasRpm.drawBitmap(bMapNadel,0,0,paint);
canvasRpm.restore(); 
```

bMapcanvasBackTacho 只是一个透明背景。bMapNadel 是针的位图。bMapRpm 是画布的位图

更新我总是调用的imageView：

```
ivNadel.setImageBitmap(bMapRpm); 
```

我通过注释掉部分代码来尝试减慢应用程序的速度。在将 setImageBitmap() 注释掉后，减速消失了。

是否有人知道如何以其他方式更新 imageView，或者我可以更改以使其更快地工作？

谢谢=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:28:57.027

您可以做两件事：
首先，不要在`copy()`每次需要更新时调用，`Bitmap`这会创建一个新的`Bitmap`并且既耗时又消耗内存。
二是`invalidate()`呼吁`ImageView`。这将通知视图发生了某些变化，并且当您完全替换位图时，它无需更新正在发生的任何其他事情，它会重新绘制自己。

最后，您甚至可能想要创建自己的 View 实现，以便您可以在`onDraw()`那里覆盖并执行旋转。

# sql - 如何按帐户代码长度对帐户求和？

> ID：10328937
> 
> 赞同：0
> 
> 时间：2012-04-26T07:24:05.687
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有 2 个表：DimAccounts 和 FactBudget。

DimAccounts 示例：

```
AccountKey  AccountCode     AccountName AccountGroup    AccountType
1.6 1         6 1               NN          6               S
1.6 10        6 10              MMM         6               S
1.6 101       6 101             TTT         6               S
1.6 1010      6 1010            IIII        6               B
1.6 1011      6 1011            OOOO        6               B
1.6 1012      6 1012            KKK         6               B 
```

事实预算示例：

```
TimeKey    AccountKey   Debit   Credit
20110719    1.6 1010    20.00   5.00
20110719    1.6 1011    15.00   0.00
20110719    1.6 1000    5.00    0.00
20110719    1.6 1012    10.00   5.00
20110719    1.6 1112    10.00   0.00 
```

在 FactBudget 中有许多只有 B 类型的帐户。我需要获取帐户类型 S（总和）的借方和贷方总和。

示例数据的解决方案示例：

```
TimeKey   AccountKey   Debit    Credit
20110719    1.6 1     60.00    10.00
20110719    1.6 10    50.00    10.00
20110719    1.6 101   45.00    10.00 
```

要计算总和帐户 1.6 101（带空格的 7 个符号）的借方和贷方，我们需要对所有帐户进行子串化，实际上预算最多 7 个符号（1.6 1012 -> 1.6 101、1.6 1112 -> 1.6 111、1.6 1011->1.6 101）然后它们在哪里相等（1.6 101 = 1.6 101）以按时间键分组并汇总借方和贷方。

要计算总和帐户 1.6 1（带空格的 5 个符号）的借方和贷方，我们需要对所有帐户进行子串化，实际上预算最多为 5 个符号（1.6 1012 -> 1.6 1、1.6 1112 -> 1.6 1、1.6 1011->1.6 1）然后它们在哪里相等 (1.6 1 = 1.6 1) 以按 timekey 分组并汇总借方和贷方:) 等等。

那么，如何通过 TimeKey 和 AccountKey 获取 S Accounts Debit 和 Cred Sum？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:46:26.970

基本上，您可以接受[这个答案](https://stackoverflow.com/questions/10233358/how-to-sum-accounts/10234985#10234985)，只需更改其中一个连接条件：

```
SELECT
  f.TimeKey,
  s.AccountKey,
  SUM(f.Debit) AS Debit,
  SUM(f.Credit) AS Credit
FROM DimAccounts s
  INNER JOIN DimAccounts b ON **b.AccountCode LIKE s.AccountCode + '%'**
  /* alternatively: ON s.AccountCode = LEFT(b.AccountCode, LEN(s.AccountCode)) */
  INNER JOIN FactBudget  f ON f.AccountKey = b.AccountKey
WHERE s.AccountType = 'S'
  AND b.AccountType = 'B'
GROUP BY
  f.TimeKey,
  s.AccountKey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:53:01.217

```
SELECT      F.TimeKey,
            D.AccountKey,
            SUM(F.Debit) Debit,
            SUM(F.Credit) Credit
FROM        DimAccounts D
INNER JOIN  FactBudget F ON F.AccountKey LIKE D.AccountKey + '%'
WHERE       D.AccountType = 'S'
GROUP BY    F.TimeKey,
            D.AccountKey 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:50:41.330

也许是这样的：

```
SELECT
    FactBudget.TimeKey,
    DimAccounts.AccountKey,
    SUM(FactBudget.Debit) AS Debit,
    SUM(FactBudget.Credit) AS Credit
FROM
    DimAccounts
    JOIN FactBudget
        ON DimAccounts.AccountKey=
           SUBSTRING(FactBudget.AccountKey,0,DATALENGTH(DimAccounts.AccountKey)+1)
WHERE
    DimAccounts.AccountType='S'
GROUP BY
    FactBudget.TimeKey,
    DimAccounts.AccountKey 
```

# python - 在生成带有由标记分隔的元素的字符串时避免键入冗余

> ID：10328938
> 
> 赞同：1
> 
> 时间：2012-04-26T07:24:13.053
> 
> 标签：python, string, design-patterns, refactoring

假设我有一个单词列表，我想将它们全部打印出来，用逗号和空格分隔。因此，例如，假设列表`l`包含项目`['banana', 'apple', 'pear']`，我想生成字符串`"banana, apple, pear"`

现在，我用来解决问题的方法如下：

```
s = ""
s += l[0]
for i in range(1, len(l)):
    s += ", %s" % l[i] 
```

或与上述非常相似的东西。问题是第 2 行的额外分配看起来有点混乱和多余，因为它与第 4 行几乎相同，除了添加了一个逗号和一个空格。虽然这对于非常小的表达式来说不是太大的问题，但寻找大表达式可能会变得相当烦人和不愉快。例如，如果不是`l[0]`，我们可能会`foo(bar(l[0]) + foobar(l[0]) + ...`觉得不得不在下面几行重复非常相似的语句是不对的。有没有更好的方法来实现所需的结果而无需额外的冗余？这可能包括特定于 python 标准库的答案或可以跨多种语言使用的通用模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:26:45.083

在 Python 中，可以简单地编写：

```
s = ', '.join(l) 
```

例如：

```
>>> l = ['banana', 'apple', 'pear']
>>> ', '.join(l)
'banana, apple, pear' 
```

> 这可能包括 [...] 可以跨多种语言使用的通用模式。

在其他语言中，我通常使用的模式如下（这里用伪 Java 表示）：

```
for (int i = 0; i < l.length; i++) {
  if (i != 0) {
    s += ", ";
  }
  s += l[i];
} 
```

这避免了重复分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:26:48.290

你可以使用加入：`s = ', '.join(l)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:27:40.053

您可以使用[`str.join`](http://docs.python.org/library/stdtypes.html#str.join)：

```
", ".join(l) 
```

# iphone - 在 iOS 应用中，即使没有添加主自定义 UIView，我仍然可以将其他视图对象添加为子视图吗？

> ID：10328940
> 
> 赞同：0
> 
> 时间：2012-04-26T07:24:20.693
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiview

奇怪的是，在其他一些iOS应用程序中，我创建了一个Single View应用程序，然后添加`MainView.h`了`MainView.m`它的子类`UIView`，但是在另一个程序中，我没有添加这样的类，但可以立即这样做：

```
ShapeView *sv;

sv = [[ShapeView alloc] initWithFrame:CGRectMake(10, 170, 140, 140)];
[self.view addSubview:sv]; 
```

里面`ViewController.m`。当然，`ShapeView.m`必须实现`drawRect`正确绘制形状。但是为什么我们这次不需要添加`MainView.h`and first 并且仍然绘制一些主视图？`MainView.m`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:31:25.307

您不必为任何应用程序添加`MainView.h`和`.m`。仅当您想要自己的自定义`UIView`名称“MainView”时才需要这样做。如果您不需要自己绘制视图或视图的一部分，视图控制器 + XIB/NIB 可以很好地工作。

您的应用程序中的 main `UIViewController`（如您提到的从单一视图应用程序模板创建的）创建一个`UIView`从默认 NIB/XIB 加载的默认值。加载视图后，它`self.view`在您的代码中可用。`UIViewController`

其实与之`MainView`相比也没什么特别的`ShapeView`。它们都是自定义的`UIView`子类。

# python-3.x - 在 Python 中获取像素属性

> ID：10328943
> 
> 赞同：1
> 
> 时间：2012-04-26T07:24:36.250
> 
> 标签：python-3.x, pixels

我在 Windows 7 上使用 Python3。我想获取所有属性，如颜色强度、颜色等。在我用鼠标选择的屏幕区域的所有像素中。选择可以是任何形状，但现在矩形和正方形都可以。我想在屏幕的任何区域执行此操作。

你们能指导我如何在Python中做到这一点吗？

PS：如果该方法可以在所有平台上运行，那将不胜感激。

谢谢， 阿希克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:08:57.130

您需要使用某种跨平台的 GUI 工具包，例如 GTK 或 KDE，也许 Tk 或 wx 也可以，我不知道。

然后如何做取决于您选择的工具包。

# eclipse - 可以移动 Eclipse 的 tmp 目录吗？

> ID：10328944
> 
> 赞同：6
> 
> 时间：2012-04-26T07:24:36.513
> 
> 标签：eclipse, performance, move, temporary-directory

我正在尝试通过将我的项目放在 RAM 磁盘上来加速 Eclipse（目前卡在一台缓慢的笔记本电脑和一个沉重的 Eclipse 项目中）。非常适合加载项目等，但是当我构建它时，它似乎在 %APPDATA% 的目录中读取和写入了很多内容（似乎从项目名称中生成了一个名称）。这使得它实际上比平时慢...

那么......有没有办法可以移动eclipse的tmp目录？最好不要在进程中移动其他应用程序的 tmp 目录。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T13:34:07.583

可能通过设置*eclipse.ini*`java.io.tmpdir`中调用的属性找到了一种方法。似乎至少在构建期间发生了大多数读/写活动的地方发生了变化。例如：

 *```
-vmargs
-Xms128m
-Xmx1024m
-XX:MaxPermSize=256M
-Djava.io.tmpdir=E:\tmp 
```

不确定它是否必须在 -vmargs 之后，但这似乎仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T07:17:18.097

它可以通过 Djava.io.tmpdir 属性
-> 在项目的根目录上右键单击选择运行或调试，然后在：
在项目的运行/调试配置中
-> 运行配置
-> 参数 ->
在 VM 中参数
写入您的临时目录
示例的完整路径：如果您想在**F 驱动器中选择一个文件夹****JAVATmp** ， 则将 VM 参数传递为： **-Djava.io.tmpdir=F:\JAVATmp***

# c++ - 将一对存储在 QObject 子类中

> ID：10328946
> 
> 赞同：0
> 
> 时间：2012-04-26T07:24:50.123
> 
> 标签：c++, qt, qt4, qml

我的问题是指问题[Subclass of QObject, qRegisterMetaType, and the private copy constructor](https://stackoverflow.com/questions/956335/subclass-of-qobject-qregistermetatype-and-the-private-copy-constructor)。根据它，应该可以将 QObject 的子类注册为 QVariant 可以存储的元类型。我有这个代码：

```
#ifndef MODELROWREFERENCE_HPP
# define MODELROWREFERENCE_HPP

#include <QObject>

#include <QDataStream>

class ModelRowReference :
  public QObject
{
  Q_OBJECT

  Q_PROPERTY(QObject* model READ model WRITE setModel)
  Q_PROPERTY(int row READ row WRITE setRow)

public:
  ModelRowReference(QObject* = 0);
  ModelRowReference(QObject*, int, QObject* = 0);

  ModelRowReference(ModelRowReference const&);

  QObject* model() const;
  void setModel(QObject*);

  int row() const;
  void setRow(int);

private:
  QObject* model_;
  int row_;
};

Q_DECLARE_METATYPE(ModelRowReference)

//////////////////////////////////////////////////////////////////////////////
inline ModelRowReference::ModelRowReference(QObject* parent) :
  QObject(parent),
  model_(0)
{
}

//////////////////////////////////////////////////////////////////////////////
inline ModelRowReference::ModelRowReference(QObject* m, int r,
  QObject* parent) :
  QObject(parent),
  model_(m),
  row_(r)
{
}

//////////////////////////////////////////////////////////////////////////////
inline ModelRowReference::ModelRowReference(ModelRowReference const& other) :
  QObject(other.parent()),
  model_(other.model_),
  row_(other.row_)
{
}

//////////////////////////////////////////////////////////////////////////////
inline QObject* ModelRowReference::model() const
{
  return model_;
}

//////////////////////////////////////////////////////////////////////////////
inline void ModelRowReference::setModel(QObject* m)
{
  model_ = m;
}

//////////////////////////////////////////////////////////////////////////////
inline int ModelRowReference::row() const
{
  return row_;
}

//////////////////////////////////////////////////////////////////////////////
inline void ModelRowReference::setRow(int r)
{
  row_ = r;
}

//////////////////////////////////////////////////////////////////////////////
inline QDataStream& operator<<(QDataStream& out, ModelRowReference const& p)
{
  QObject* model(p.model());

  out << QByteArray(reinterpret_cast<char const*>(&model), sizeof(model));
  out << p.row();

  return out;
}

//////////////////////////////////////////////////////////////////////////////
inline QDataStream& operator>>(QDataStream& in, ModelRowReference& r)
{
  QByteArray a;

  in >> a;

  r.setModel(*reinterpret_cast<QObject**>(a.data()));

  int row;

  in >> row;

  r.setRow(row);

  return in;
}

#endif // MODELROWREFERENCE_HPP 
```

但它甚至没有编译：

```
modelrowreference.hpp:36:1: error: expected constructor, destructor, or type conversion before 'inline' 
```

答案是，这可能做错了，还是我做错了什么？我知道我可以采用指针方式（注册 ModelRowReference*），但是谁会删除指针呢？可能会创建数千个 ModelRowReference 实例，而模型对象的生命周期会延长到程序结束。

我想要实现的是将这对（模型、行）暴露给 QML 程序。如果我通过 QPair 执行此操作，QML 程序将无法访问该对的成员。

我正在使用 Qt4.8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:48:12.810

你可能需要`#include <QMetaType>`.

# java - Android - 致命异常：OutOfMemoryError：位图大小超出 VM 预算？

> ID：10328953
> 
> 赞同：-3
> 
> 时间：2012-04-26T07:25:16.827
> 
> 标签：java, android

我编写了这段代码，它应该从资产或 sd 卡加载位图。通常位图不会太大， <1mb , 1280x800 ，但有时它会给我一个**OutOfMemoryError: bitmap size超出VM预算**错误，但是当我尝试再次重新加载它时，大多数情况下它加载正常。

任何想法这里可能有什么问题？

谢谢！:)

```
 try
    {

    GirlBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.girl);
    GirlBitmapBG = BitmapFactory.decodeResource(getResources(), R.drawable.bg);

                if ( ForeNameSource.equals("ass") )
                {
                    try {
                        InputStream ims = getAssets().open( "girls" +"/"+ ForeName );
                        GirlBitmap = BitmapFactory.decodeStream(ims);
                    } catch (IOException e) { e.printStackTrace(); }
                }
                else
                {
                    GirlBitmap = BitmapFactory.decodeFile(ForeName);
                }

                if ( BgNameSource.equals("ass") )
                {
                    try {
                        InputStream imsBg = getAssets().open( "girls" +"/"+ BgName );
                        GirlBitmapBG = BitmapFactory.decodeStream(imsBg);
                    } catch (IOException e) { e.printStackTrace(); }
                }
                else
                {
                    GirlBitmapBG = BitmapFactory.decodeFile(BgName);
                }
    }
    catch(OutOfMemoryError e){
      Log.e("out of memory","too big!");  /// sometimes crashes here.
      Toast.makeText(this, "Bitmap too big!", 1500).show();
    }

    if ( ReSize )
    {
    WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();

    float ReSizeCoofGirl =  (float)display.getHeight() / (float)GirlBitmap.getHeight();
    if ( ReSizeCoofGirl > 1 ) { ReSizeCoofGirl = 1; }

    float ReSizeCoofBG =  (float)display.getHeight() / (float)GirlBitmapBG.getHeight();
    if ( ReSizeCoofBG > 1 ) { ReSizeCoofBG = 1; }

    // also sometimes crash comes from the line below.
    GirlBitmap = Bitmap.createScaledBitmap(GirlBitmap, (int) (GirlBitmap.getWidth()*ReSizeCoofGirl), (int) (GirlBitmap.getHeight()*ReSizeCoofGirl), false);
    GirlBitmapBG = Bitmap.createScaledBitmap(GirlBitmapBG, (int) (GirlBitmapBG.getWidth()*ReSizeCoofBG), (int) (GirlBitmapBG.getHeight()*ReSizeCoofBG), false);
    }

    drawView.invalidate();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:02:02.397

查看开发者网站上添加的这个新资源：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html) （查看屏幕右侧的示例项目）

# c++ - 如何实现像 Qt::LeftDockWidgetArea 这样的枚举名称

> ID：10328954
> 
> 赞同：2
> 
> 时间：2012-04-26T07:25:17.840
> 
> 标签：c++, qt, enums

使用 Qt 时，许多函数都采用类似标志 Qt::LeftDockWidgetArea 的参数。

即使我查看了 Qt 源代码，我也无法理解如何实现这种命名行为。它是通用的 C++ 还是特定于 Qt 的？

假设我有一个班级**MyClass**：

```
class MyClass {
    public:
        MyClass();
        void setFlag(???);
}; 
```

我想这样调用 setFlag 方法：

```
MyClass mc;
mc.setFlag(MyClass::flag1 | MyClass::flag2) 
```

flag1 和 flag2 应该只是 0x01 和 0x02，这是一个枚举吗？我必须在哪里声明？该方法的论点是什么？

如果这很明显，我很抱歉，但我不明白。

**解决方案（来自答案）**

很好。通过阅读下面的答案，我添加了这个：（请注意，我并不真正需要标志，只是来自枚举的数字，这大大简化了它）

```
namespace MyNames {
    typedef enum {
        FA = 0,
        FB = 1
    } Field;
}

class MyClass
{
    public:
        MyClass();
        char getField(MyNames::Field f) const;
}; 
```

这确实允许以下调用（不）：

```
mc.getField(MyNames::FA) //OK
mc.getField(1)           //not OK 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:36:17.550

看看 的定义`Qt::LeftDockWidgetArea`：

```
enum DockWidgetArea {
    LeftDockWidgetArea = 0x1,
    RightDockWidgetArea = 0x2,
    TopDockWidgetArea = 0x4,
    BottomDockWidgetArea = 0x8,

    DockWidgetArea_Mask = 0xf,
    AllDockWidgetAreas = DockWidgetArea_Mask,
    NoDockWidgetArea = 0
};

Q_DECLARE_FLAGS(DockWidgetAreas, DockWidgetArea) 
```

请注意`Q_DECLARE_FLAGS`通过创建`QFlags`typedef 实现您所询问的行为的宏。请参阅[http://qt-project.org/doc/qt-4.8/qflags.html#Q_DECLARE_FLAGS](http://qt-project.org/doc/qt-4.8/qflags.html#Q_DECLARE_FLAGS)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T07:36:14.850

如果您仔细查看 Qt 文档（[http://doc.qt.io/archives/qt-4.7/qt.html#DockWidgetArea-enum](http://doc.qt.io/archives/qt-4.7/qt.html#DockWidgetArea-enum)对于您的特定情况），您会看到 Qt 使用模板化的 QFlags 类来存储以类型安全的方式对枚举值进行 OR 组合。

编辑：看起来有两种答案，因为你的问题不是很清楚。仔细阅读您的问题后，我认为以下是您想要的。

```
class MyClass {
    public:
        enum Flags{
            Flag1 = 0x01,
            Flag2 = 0x02
        }
        MyClass();
        void setFlag(int Flags);//Not type-safe but works.
        void setFlag(Flags<MyClass::Flags> Flags);//Type-safe but you have to create a Flags class yourself
}; 
```

更多解释可以在这里的一个老问题中找到： [How to use enums as flags in C++?](https://stackoverflow.com/questions/1448396/how-to-use-enums-as-flags-in-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:35:12.443

您将在以下位置找到此（或类似内容）`src\corelib\global\qnamespace.h`：

```
#ifndef Q_MOC_RUN
namespace
#else
class Q_CORE_EXPORT
#endif
Qt { 
```

这通常变得简单

```
namespace Qt { 
```

要引用在此`Qt`命名空间内声明的名称（例如`LeftDockWidgetArea`），请在其前面加上`Qt::`.

# ios4 - 在 iOS 4.x 中以模态方式呈现新视图控制器时更改导航栏色调颜色

> ID：10328955
> 
> 赞同：3
> 
> 时间：2012-04-26T07:25:24.877
> 
> 标签：ios4, presentmodalviewcontroller, email-client, navigationbar, tintcolor

在我的视图控制器中，我有以下代码

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSLog(@"%s",__PRETTY_FUNCTION__);

    self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:201.0/255.0 green:201.0/255.0 blue:201.0/255.0 alpha:1.0];
} 
```

在此视图中，当我单击按钮时，我正在`MFMailComposeViewController`模态地呈现。当我`MFMailComposeViewController`以模态方式呈现时，导航栏的颜色与`viewWillAppear`. 我想要默认的蓝色，因为 Apple 告诉不要自定义此视图。这是我尝试过的代码

代码 1：

```
-(void)sendEmailWithWithRecipients:(NSArray*)recipients andData:(NSData*)data {

    if ([MFMailComposeViewController canSendMail]){

        MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init]; 

        mailComposeViewController.mailComposeDelegate = self;

        self.navigationController.navigationBar.tintColor = nil;
        [self presentModalViewController:mailComposeViewController animated:YES];
        [mailComposeViewController release]; 
    }  
    else {
        [self showAlertWithTitle:@"Alert" andMessage:@"Can not send email. Please check your email settings."];
    }
} 
```

但上面的代码不适用于色调

代码2：设置色调颜色`viewWillDisappear`

```
-(void)viewWillDisappear:(BOOL)animated {
    NSLog(@"%s",__PRETTY_FUNCTION__);
    self.navigationController.navigationBar.tintColor = nil;
    [super viewWillDisappear:animated];
} 
```

代码 2 也不起作用。

但这在 iOS5 中运行良好，**无需**在. 它不工作 iOS 4.x`tintColor = nil``MFMailComposeViewController``viewWillDisappear`

有人对此有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:52:36.687

**您可以通过访问yourController**的（您正在预设的 ViewController）**topViewController 来自**定义导航栏的色调颜色。

前任 ：

```
[self presentModalViewController:yourController animated:YES];
yourController.topViewController.navigationController.navigationBar.tintColor = 
    [UIColor (Your Color)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:18:23.090

尝试设置导航栏样式而不是色调。色调颜色和条形样式的副作用略有不同，因此虽然我不完全了解您的需求，但它可能正是您正在寻找的。

```
[self.navigationController.navigationBar setBarStyle:UIBarStyleDefault]; 
```

或者

```
self.navigationController.navigationBar.barStyle = UIBarStyleDefault; 
```

并确保您在模态视图控制器的上下文中执行此操作，而不是之前的视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:32:30.930

而不是 nil 试试这个`[UIColor ClearColor];`

# c - 使用 sleep 功能时如何增加计数？

> ID：10328956
> 
> 赞同：2
> 
> 时间：2012-04-26T07:25:25.810
> 
> 标签：c, signals, sleep

嘿伙计们，我似乎迷路了。我应该能够在无限循环内增加子项的计数，并在每次父项发送信号时打印计数，这应该是每 1 秒。我写了我的代码，但我认为使用 fork 后，子进程和父进程同时运行，但事实并非如此，所以我不确定如何解决这个问题。任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:36:28.963

子进程应该能够运行`[sleep()](http://linux.die.net/man/3/sleep)`，并让父进程`SIGALRM`唤醒它。也许你让孩子坐在一个[忙碌的循环](http://en.wikipedia.org/wiki/Busy_waiting)中，消耗了太多的 CPU 以至于父母没有像预期的那样运行。

当然，如果你展示你的代码，这些问题的答案会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:44:05.913

你所描述的应该在理论上有效。

编写并行代码可能很棘手，尤其是使用`fork()`，如果您不熟悉该过程。

这是我的建议：在整个代码中添加一堆调试打印，例如：

```
int pid = fork();
if(pid == -1) {
    printf("Fork failed!\n");
} else if (pid) {
    printf("I'm the parent!\n");
    // Do stuff
    printf("Parent exiting\n");
    exit(0);
} else {
    printf("I'm the child!\n");
    // Do stuff
    printf("Child exiting\n");
    exit(0);
} 
```

然后您可以查看您的程序是否按照应有的方式运行。

还要向您的信号处理程序添加一条`printf()`语句，以便确保它被调用。

# python - 我们可以在 Plone 中为同一站点中的不同文件夹激活不同的工作流程吗

> ID：10328958
> 
> 赞同：2
> 
> 时间：2012-04-26T07:25:30.693
> 
> 标签：python, plone

在 plone 的站点设置菜单的类型中，由于我们可以选择不同的内容类型并同时将其与不同的工作流相关联，所以问题是是否也可以为 plone 站点中的不同文件夹设置不同的工作流。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:26:21.437

你检查过[CMF Placeful Workflow](http://plone.org/products/cmfplacefulworkflow)吗？

转到 Plone 配置屏幕 -> 插件产品 -> 检查“Workflowpolicy (CMFPlacefulWorkflow) 1.5.6”（在我的情况下 = Plone 4.1.4）。

来自 Placeful Workflow 上的文档：“CMFPlacefulWorkflow：一种 Plone 产品，允许您定义工作流策略，将内容类型定义为可应用于 Plone 站点的任何子文件夹的工作流映射。”

在我看来，这应该完全符合您的要求。

祝你好运。

# codeigniter - 回调函数的错误消息不显示

> ID：10328959
> 
> 赞同：0
> 
> 时间：2012-04-26T07:25:37.187
> 
> 标签：codeigniter, hmvc

我有以下代码：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login extends MY_Controller
{

function __construct()
{
    parent::__construct();
    $this->load->model('users/user_model');
    $this->load->library('form_validation');
}

function _load_login_page()
{
    $this->load->model('sysconfig/sysconfig_model');

    $a = $this->sysconfig_model->get_sysconfig();
    $row = $a[0];

    $this->lang->load('klas',$row->sysconfig_language);

    $data['sys_name'] = $row->sysconfig_system_name;        
    $data['template_name'] = $row->systemplate_name; 
    $data['css_script'] = base_url().'assets/'.$row->systemplate_name;

    if($row->sysconfig_maintenance === 'Y')
    {
        $this->load->view('sysconfig/maintenance',$data);
    } 
    else {

        $this->load->view('login',$data);
    }
}

function index()
{            
    $this->form_validation->set_rules('username', 'Username', 'trim|required|max_length[12]|xss_clean|callback_check_auth');
    $this->form_validation->set_rules('password','Password','trim|required');

    if($this->form_validation->run($this) == FALSE)
    {
       $this->_load_login_page();     
    } else {
        redirect('welcome','refresh');
    }

}

function check_auth()
{
    if($this->user_model->authentication())
    {
        return TRUE;
    }

    $this->form_validation->set_message('check_auth',$this->lang->line('invalid_username'));
    return FALSE;
}
?> 
```

用户模型.php

```
<?php

class User_Model extends CI_Model
{
function authentication() 
 {
    $this->db->where('useracc_id', $this->input->post('username'));
    $this->db->where('useracc_password', md5($this->input->post('password')));
    $q = $this->db->get('base_useracc');

    if($q->num_rows() == 1)
    {
        $session_data = array('isUserLogged'=>TRUE);

        $this->session->set_userdata($session_data);

        return TRUE;
    } 
 }
?> 
```

从这里我们可以看到如果用户没有填写用户名和密码字段，它将显示错误并且一切都按预期工作。问题是，如果用户提供了无效的用户名或密码，则不会显示错误消息。

对于信息，我已经放入`$lang['invalid_username'] = 'Invalid username or password';`了语言文件。

我正在使用 HMVC 技术进行此操作。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:26:40.713

来自 HMVC wiki 页面：

使用 MX 进行表单验证时，您需要扩展 CI_Form_validation 类，如下所示，然后将当前控制器作为 $CI 变量分配给 form_validation 库。这将允许您的回调方法正常运行。（这也在 CI 论坛上讨论过）。IE：

```
<?php
/** application/libraries/MY_Form_validation **/ 
class MY_Form_validation extends CI_Form_validation 
{
    public $CI;
}

<?php
class Xyz extends MX_Controller 
{
    function __construct()
    {
        parent::__construct();

        $this->load->library('form_validation');
        $this->form_validation->CI =& $this;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:05:02.777

您似乎没有将任何数据传递给您的回调函数。回调函数期望输入字段的值作为参数传递。我认为您不能将其作为表单验证回调来工作，因为身份验证方法可能需要同时知道密码和用户名。目前，您没有将任何数据传递给您的 check_auth 方法，或者实际上没有传递给您的 user_model->authentication() 方法。这就是为什么 form_validation 忽略它的原因。

与其将 check_auth 作为回调调用，不如先运行 form_validation（这确实是它的用途 - 检查数据是否正确和已清理），然后将表单中的值作为 if 语句的一部分传递给 check_auth 函数。您将无法使用 form_validation set_message 方法来显示错误，但我认为这是一种更简洁的方法。

总而言之，使用 form_validation 检查您收到的数据是否正常，如果不是，则显示相关消息。根据该信息对用户进行身份验证是一个单独的过程，我认为它不属于验证。你看得到差别吗？

# hibernate - 没有 Spring 的 Hibernate 事务管理

> ID：10328963
> 
> 赞同：1
> 
> 时间：2012-04-26T07:26:08.447
> 
> 标签：hibernate, jdbc, transactions

我想在没有 Spring 的情况下使用 Hibernate，我以这种方式设置 Hiberante：

```
<property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
<property name="hibernate.current_session_context_class">thread</property> 
```

但现在我得到了这个例外：

```
org.hibernate.HibernateException: get is not valid without active transaction 
```

有什么方法可以让 Hibernate 像 Spring 一样自动管理事务？我必须手动打开和关闭交易吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:40:57.270

好吧，至少不是根据[参考指南。](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html)在托管和 JTA 环境中使用事务有多种选择，但您必须编写`Transaction`代码

# extjs - 在 ExtJs 中调用用户定义的函数

> ID：10328970
> 
> 赞同：0
> 
> 时间：2012-04-26T07:26:42.600
> 
> 标签：extjs

我是 ExtJs 的新手，我设计了一个如下的输入表单，

```
var HouseForm = new Ext.FormPanel({     
        renderTo: "HouseCreation",
        frame: true,
        url: url+'/lochweb/loch/house/persist', 
        title: 'Create House',
        bodyStyle: 'padding:5px',           
        width: 500,
        items: [{
                xtype: 'textfield',
                fieldLabel: 'Name',
                name: 'name',
                allowBlank:false
                },{
                xtype: 'textfield',
                fieldLabel: 'TaxId',
                name: 'taxId',              
                allowBlank:true
                }
    });

    var win = new Ext.Window({
        layout:'fit',
        closable: false,
        resizable: true,
        plain: true,
        border: false,
        items: [HouseForm]
    });
    win.show();
    }); 
```

我需要手动验证用户输入，所以我需要调用我的函数来验证用户输入。如何**定义和调用函数，除了****fit**之外还有其他布局吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:33:04.233

您可以简单地将您的函数/方法写在同一个 .js 文件中，然后像往常一样调用它们，即 () 。它会起作用的。

关于布局，ExtJS 中有多种可用的布局。[这](http://dev.sencha.com/deploy/ext-4.0.0/examples/layout-browser/layout-browser.html)是显示 ExtJS 中所有可能布局的示例和最少代码的链接。

# java - java 正则表达式搜索和替换模块

> ID：10328973
> 
> 赞同：2
> 
> 时间：2012-04-26T07:26:46.157
> 
> 标签：java, regex, substitution

Perl 对内联搜索和替换替换具有全面的正则表达式支持。Java模块中有类似的东西吗？有 Jakarta Regexp 项目，但它处于冰上。与具有调用 Perl5Compiler 的 Perl5Util 的 ORO 相同。没测试过，不知道有没有其他问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:01:21.273

从 Java 1.4 开始，正则表达式通过 java.util.regex 包内置到该语言中。此外，还有一些方便的方法，例如`String.matches`.

```
"The quick brown fox".matches("ick") == true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:28:57.743

有一个名为[QuickRex](http://sourceforge.net/projects/quickrex/)的 Eclipse 插件。

# git - 'reset hard head' 和 'reset hard' 和有什么不一样？

> ID：10328976
> 
> 赞同：3
> 
> 时间：2012-04-26T07:26:48.453
> 
> 标签：git, git-reset

`git reset --hard HEAD`我是 git 新手，所以问题可能很简单，和之间有什么区别`git reset --hard`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:28:17.090

`HEAD`当您未指定该参数时，是隐含的。

但是，您可以做例如`git reset --hard HEAD^`在 HEAD 处取消提交，即以重写历史的方式撤消它。

# iphone - 一个 iPhone 应用程序的多个版本的显示名称相同

> ID：10328977
> 
> 赞同：0
> 
> 时间：2012-04-26T07:26:53.033
> 
> 标签：iphone, ios, bundle, product

我可以为一个 iPhone 应用程序的多个版本分配相同的显示名称吗？我现在正在完成的游戏有 4 个版本：

*   仅限 iPhone - 付费
*   仅限 iPhone - 免费
*   仅限 iPad - 付费
*   仅限 iPad - 免费

跳板上显示的名字很长，几乎不适合图标下方的空间。再加一个字符，它会被截断。因此，如果我添加任何后缀（即“HD”、“free”或“HD free”），它将无法阅读。

我的问题是：如果我分配相同的产品名称（这会更改捆绑名称和捆绑显示名称）并制作不同的图标来指示版本，Apple 会拒绝我的应用程序吗？

我想以前有人尝试过这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:34:13.430

您可以轻松地为多个版本使用相同的显示名称 - 经过测试。

我在 App Store 中有几个姊妹应用程序，它们都共享相同的显示名称（和不同的图标）。它们后来被合并到一个应用程序中，但您的问题的答案是：这不应该是一个问题。

只要确保这不会让您的客户感到困惑。

# c# - 从我的应用程序备份 postgresql 数据库

> ID：10328978
> 
> 赞同：0
> 
> 时间：2012-04-26T07:26:55.110
> 
> 标签：c#, postgresql, backup

我有一个包含基于 Postgresql 的数据库的应用程序。我想使用我的应用程序备份这个数据库。例如。我想单击程序菜单中的一个选项并想获取带有数据库备份的文件。我获得了该数据库的所有管理员权限。应用程序是在 .net 4.0 (C#)、windows 窗体中编写的。

我该如何解决我的问题？

* * *

我试过了，但它不起作用：

```
 string zapytanie = @"pg_dump WFR > C:\kopia";
                string pol = Ustawienia.ConnectionString;
                NpgsqlConnection conn = new NpgsqlConnection(pol);
                conn.Open();
                NpgsqlCommand comm = conn.CreateCommand();
                comm.CommandText = zapytanie;

                comm.ExecuteNonQuery();
                conn.Close(); 
```

错误：

错误：42601：“pg_dump”处或附近的语法错误

堆栈跟踪：

```
w Npgsql.NpgsqlState.<ProcessBackendResponses_Ver_3>d__a.MoveNext()
   w Npgsql.ForwardsOnlyDataReader.GetNextResponseObject()
   w Npgsql.ForwardsOnlyDataReader.GetNextRowDescription()
   w Npgsql.ForwardsOnlyDataReader.NextResult()
   w Npgsql.ForwardsOnlyDataReader..ctor(IEnumerable`1 dataEnumeration, CommandBehavior behavior, NpgsqlCommand command, NotificationThreadBlock threadBlock, Boolean synchOnReadError)
   w Npgsql.NpgsqlCommand.GetReader(CommandBehavior cb)
   w Npgsql.NpgsqlCommand.ExecuteNonQuery()
   w Faktury_i_Rachunki_2.Forms.FrmKopiaBezp.BtUtworzKopie_Click(Object sender, EventArgs e) w D:\nwfr3\Faktury i Rachunki 2.0\Forms\FrmKopiaBezp.cs:wiersz 38 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:41:57.753

`pg_dump.exe`也许您可以在您的应用程序中包含 Windows 女士（和所需的 dll）的二进制副本。然后使用 GUI 中的适当参数调用它。

（您可以使用[Dependency Walker](http://www.dependencywalker.com/)找出所需的库`pg_dump.exe`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:51:33.070

`pg_dump`是一个工具而不是一个 SQL 命令。您需要使用`Process.Start`.

pg_dump 输出一个 SQL 脚本。所以你需要一些方法来捕捉标准的SQL脚本形式出来。可以通过以下方式实现：[http ://www.c-sharpcorner.com/UploadFile/edwinlima/SystemDiagnosticProcess12052005035444AM/SystemDiagnosticProcess.aspx](http://www.c-sharpcorner.com/UploadFile/edwinlima/SystemDiagnosticProcess12052005035444AM/SystemDiagnosticProcess.aspx)

# php - 如何处理移动应用程序开发中的“语义 URL 攻击”

> ID：10328980
> 
> 赞同：1
> 
> 时间：2012-04-26T07:27:14.127
> 
> 标签：php, android, iphone, security

我是一名 iOS 开发人员并开发了一个 Web 服务应用程序，该应用程序已在 App Store 上架了一年。现在我决定让这个应用程序跨平台可用——从 Android 开始，为此我聘请了一名 Android 开发人员。

在此之前，所有与 Web 相关的代码和数据（PHP / MySQL / XML）都是由我一个人管理和获取的——所以我不太担心安全性。但是现在，随着另一位开发人员的加入，我有以下担忧：

该应用程序发送 POST 请求，其中包括要获取的行数 - 然后 PHP 脚本从 MySQL 获取这么多行并以格式良好的 XML 返回它们。我担心的是，现在员工也将了解整个过程，尽管他无法直接访问 PHP 脚本或 MySQL 数据库，但他仍然可以通过多种方式滥用它。例如，他可以在 Web 浏览器上创建一个包含 100000 行的 POST 请求的 URL，这将让他拥有 XML 中的所有数据。

应该采取什么措施来应对这种情况？（是的，在上述特定情况下，我可以强制将硬限制设为 40，但这不是一个理想或通用的解决方案。）

顺便说一句，我对这个主题进行了广泛的谷歌研究，据我所知，上述问题被称为[“语义 URL 攻击”](http://en.wikipedia.org/wiki/Semantic_URL_attack)。但我无法找到正确的解决方案。建议使用“[会话](http://books.google.com/books?id=HuDy3EYTK1YC&pg=PT32&lpg=PT32&dq=Semantic%20URL%20attack&source=bl&ots=DFy57Dv-gA&sig=Jm8OtiUN-uRFEi9hWvXlnTeTzWo&hl=en&sa=X&ei=dPCYT5DONsXTrQeCu_21AQ&redir_esc=y#v=onepage&q=Semantic%20URL%20attack&f=false)”，但根据我的理解，“会话”只有在我们有基于密码的用户身份验证时才有用——这不是我的应用程序的功能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:42:51.800

首先，您必须意识到，如果您没有保护并允许任何事情，那么人们将能够做任何事情，就这么简单。据我了解，您不想使用标准保护措施：即具有登录凭据的用户，并使用针对每个案例的防御性编程。

好的，那么一个部分解决方案是计算哈希：

*   您想使用参数 P 查询服务器
*   你计算 H=hash(P)
*   您将 ?p=P&h=H 发送到服务器
*   您的服务器接收 ?p=P&h=H 并计算 H'=hash(P)
*   如果 H' != H，则服务器拒绝回答

您必须在 php 和您的移动应用程序中计算相同的确定性哈希函数，最好是一个非常复杂的哈希函数，将您自己的暗加密算法与 md5、sha1、同步线程等混合。

如果您担心攻击者使用正确的哈希重复旧查询，您可以进行更复杂的握手：首先向客户端发送一个随机数，该数字将作为哈希的一部分进行计算。或者基于日期时间、IP 或其他的东西。

当然，如果攻击者对你的代码进行逆向工程，他可以找出哈希函数，但这至少需要他做一些工作。如果你想让他的工作更难，你可以混淆你客户的代码。

作为见证，我在不需要注册的服务上使用了这种技术来对付蹩脚的攻击者。除非攻击者是专业人士并且非常想要您的私人数据，否则它会起作用。

# php - 如何仅查看 $_SERVER['PHP_SELF'] 的文件名而不是 GET 附加的值

> ID：10328981
> 
> 赞同：2
> 
> 时间：2012-04-26T07:27:14.470
> 
> 标签：php

在我的一个页面`image.php?id=somenumber`中，我`<?php echo $_SERVER['PHP_SELF']; ?>`用于在公共侧边栏中识别此页面。但是使用它也会产生我不想要`$_SERVER['PHP_SELF']`的 id 值。`image.php?id=32`

我如何只获取文件名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:42:12.487

`$_SERVER['SCRIPT_NAME']`，如果您至少使用 Apache，应该涵盖您需要的内容。它应该是不带查询字符串且相对于文档根目录的已执行脚本（与`SCRIPT_FILENAME`、`REQUEST_URI`或`PHP_SELF`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:33:34.980

```
$parts = explode('/', $_SERVER["SCRIPT_NAME"]);
$file = $parts[count($parts) - 1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T07:39:50.060

您可以简单地使用它来切断查询字符串：

```
$_SERVER['SELF']=array_shift(explode('?',$_SERVER['SELF'])); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T07:40:29.327

```
echo parse_url('http://dummy.com/'.$_SERVER['SELF'], PHP_URL_PATH); 
```

该`http://dummy.com/`部分仅存在，因为 parse_url 不能与相对 url 一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T07:37:50.220

您使用的是什么版本的 PHP？我的 (5.3.3) 没有 $_SERVER['SELF']。

$_SERVER['PHP_SELF'] 虽然给出了脚本名称（image.php）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-29T07:17:46.957

```
$fileName=explode("/",$_SERVER['SCRIPT_NAME']);
echo end($fileName); 
```

# php - 使用 php 反序列化数据库数组时出错

> ID：10328982
> 
> 赞同：0
> 
> 时间：2012-04-26T07:27:17.453
> 
> 标签：php

嗨，我的 mySQL 数据库中存储了以下序列化 PHP 数组：

```
 a:2:{s:6:"access";a:116:{i:0;s:17:"catalog
/attribute";i:1;s:23:"catalog/attribute_group";i:2;s:16:"catalog/category";i:3;s
:16:"catalog/download";i:4;s:19:"catalog/information";i:5;s:20:"catalog/manufact
urer";i:6;s:14:"catalog/option";i:7;s:15:"catalog/product";i:8;s:14:"catalog/rev
iew";i:9;s:18:"common/filemanager";i:10;s:13:"design/banner";i:11;s:13:"design/l
ayout";i:12;s:14:"extension/feed";i:13;s:16:"extension/module";i:14;s:17:"extens
ion/payment";i:15;s:18:"extension/shipping";i:16;s:15:"extension/total";i:17;s:1
6:"feed/google_base";i:18;s:19:"feed/google_sitemap";i:19;s:20:"localisation/cou
ntry";i:20;s:21:"localisation/currency";i:21;s:21:"localisation/geo_zone";i:22;s
:21:"localisation/language";i:23;s:25:"localisation/length_class";i:24;s:25:"loc
alisation/order_status";i:25;s:26:"localisation/return_action";i:26;s:26:"locali
sation/return_reason";i:27;s:26:"localisation/return_status";i:28;s:25:"localisa
tion/stock_status";i:29;s:22:"localisation/tax_class";i:30;s:21:"localisation/ta
x_rate";i:31;s:25:"localisation/weight_class";i:32;s:17:"localisation/zone";i:33
;s:14:"module/account";i:34;s:16:"module/affiliate";i:35;s:13:"module/banner";i:
36;s:17:"module/bestseller";i:37;s:15:"module/carousel";i:38;s:15:"module/catego
ry";i:39;s:15:"module/featured";i:40;s:18:"module/google_talk";i:41;s:18:"module
/information";i:42;s:13:"module/latest";i:43;s:16:"module/slideshow";i:44;s:14:"
module/special";i:45;s:12:"module/store";i:46;s:14:"module/welcome";i:47;s:16:"p
ayment/alertpay";i:48;s:24:"payment/authorizenet_aim";i:49;s:21:"payment/bank_tr
ansfer";i:50;s:14:"payment/cheque";i:51;s:11:"payment/cod";i:52;s:21:"payment/fr
ee_checkout";i:53;s:14:"payment/liqpay";i:54;s:20:"payment/moneybookers";i:55;s:
14:"payment/nochex";i:56;s:15:"payment/paymate";i:57;s:16:"payment/paypoint";i:5
8;s:26:"payment/perpetual_payments";i:59;s:14:"payment/pp_pro";i:60;s:17:"paymen
t/pp_pro_uk";i:61;s:19:"payment/pp_standard";i:62;s:15:"payment/sagepay";i:63;s:
22:"payment/sagepay_direct";i:64;s:18:"payment/sagepay_us";i:65;s:19:"payment/tw
ocheckout";i:66;s:28:"payment/web_payment_software";i:67;s:16:"payment/worldpay"
;i:68;s:27:"report/affiliate_commission";i:69;s:22:"report/customer_credit";i:70
;s:21:"report/customer_order";i:71;s:22:"report/customer_reward";i:72;s:24:"repo
rt/product_purchased";i:73;s:21:"report/product_viewed";i:74;s:18:"report/sale_c
oupon";i:75;s:17:"report/sale_order";i:76;s:18:"report/sale_return";i:77;s:20:"r
eport/sale_shipping";i:78;s:15:"report/sale_tax";i:79;s:14:"sale/affiliate";i:80
;s:12:"sale/contact";i:81;s:11:"sale/coupon";i:82;s:13:"sale/customer";i:83;s:19
:"sale/customer_group";i:84;s:10:"sale/order";i:85;s:11:"sale/return";i:86;s:12:
"sale/voucher";i:87;s:18:"sale/voucher_theme";i:88;s:15:"setting/setting";i:89;s
:13:"setting/store";i:90;s:17:"shipping/citylink";i:91;s:13:"shipping/flat";i:92
;s:13:"shipping/free";i:93;s:13:"shipping/item";i:94;s:23:"shipping/parcelforce_
48";i:95;s:15:"shipping/pickup";i:96;s:19:"shipping/royal_mail";i:97;s:12:"shipp
ing/ups";i:98;s:13:"shipping/usps";i:99;s:15:"shipping/weight";i:100;s:11:"tool/
backup";i:101;s:14:"tool/error_log";i:102;s:12:"total/coupon";i:103;s:12:"total/
credit";i:104;s:14:"total/handling";i:105;s:19:"total/low_order_fee";i:106;s:12:
"total/reward";i:107;s:14:"total/shipping";i:108;s:15:"total/sub_total";i:109;s:
9:"total/tax";i:110;s:11:"total/total";i:111;s:13:"total/voucher";i:112;s:9:"use
r/user";i:113;s:20:"user/user_permission";i:114;s:15:"shipping/pickup";i:115;s:
7:"sale/ad";}s:6:"modify";a:116:{i:0;s:17:"catalog/attribute";i:1;s:23:"catalog/
attribute_group";i:2;s:16:"catalog/category";i:3;s:16:"catalog/download";i:4;s:19:
"catalog/information";i:5;s:20:"catalog/manufacturer";i:6;s:14:"catalog/option";i:
7;s:15:"catalog/product";i:8;s:14:"catalog/review";i:9;s:18:"common/filemanager";
i:10;s:13:"design/banner";i:11;s:13:"design/layout";i:12;s:14:"extension/feed";i:
13;s:16:"extension/module";i:14;s:17:"extension/payment";i:15;s:18:"extension/
shipping";i:16;s:15:"extension/total";i:17;s:16:"feed/google_base";i:18;s:19:
"feed/google_sitemap";i:19;s:20:"localisation/country";i:20;s:21:"localisation/
currency";i:21;s:21:"localisation/geo_zone";i:22;s:21:"localisation/language";
i:23;s:25:"localisation/length_class";i:24;s:25:"localisation/order_status";i:
25;s:26:"localisation/return_action";i:26;s:26:"localisation/return_reason";i:27;
s:26:"localisation/return_status";i:28;s:25:"localisation/stock_status";i:29;s:22:
"localisation/tax_class";i:30;s:21:"localisation/tax_rate";i:31;s:25:"localisation/
weight_class";i:32;s:17:"localisation/zone";i:33;s:14:"module/account";i:34;s:16:
"module/affiliate";i:35;s:13:"module/banner";i:36;s:17:"module/bestseller";i:37;s:
15:"module/carousel";i:38;s:15:"module/category";i:39;s:15:"module/featured";i:40;
s:18:"module/google_talk";i:41;s:18:"module/information";i:42;s:13:"module/latest";
i:43;s:16:"module/slideshow";i:44;s:14:"module/special";i:45;s:12:"module/store";i:
46;s:14:"module/welcome";i:47;s:16:"payment/alertpay";i:48;s:24:"payment/authoriz
enet_aim";i:49;s:21:"payment/bank_transfer";i:50;s:14:"payment/cheque";i:51;s:11:
"payment/cod";i:52;s:21:"payment/free_checkout";i:53;s:14:"payment/liqpay";i:54;
s:20:"payment/moneybookers";i:55;s:14:"payment/nochex";i:56;s:15:"payment/paymat
e";i:57;s:16:"payment/paypoint";i:58;s:26:"payment/perpetual_payments";i:59;s:14:
"payment/pp_pro";i:60;s:17:"payment/pp_pro_uk";i:61;s:19:"payment/pp_standard";i:
62;s:15:"payment/sagepay";i:63;s:22:"payment/sagepay_direct";i:64;s:18:"payment/
sagepay_us";i:65;s:19:"payment/twocheckout";i:66;s:28:"payment/web_payment_softw
are";i:67;s:16:"payment/worldpay";i:68;s:27:"report/affiliate_commission";i:69;s
:22:"report/customer_credit";i:70;s:21:"report/customer_order";i:71;s:22:"report
/customer_reward";i:72;s:24:"report/product_purchased";i:73;s:21:"report/produc
t_viewed";i:74;s:18:"report/sale_coupon";i:75;s:17:"report/sale_order";i:76;s:18
:"report/sale_return";i:77;s:20:"report/sale_shipping";i:78;s:15:"report/sale_ta
x";i:79;s:14:"sale/affiliate";i:80;s:12:"sale/contact";i:81;s:11:"sale/coupon";i
:82;s:13:"sale/customer";i:83;s:19:"sale/customer_group";i:84;s:10:"sale/order";
i:85;s:11:"sale/return";i:86;s:12:"sale/voucher";i:87;s:18:"sale/voucher_theme";
i:88;s:15:"setting/setting";i:89;s:13:"setting/store";i:90;s:17:"shipping/cityli
nk";i:91;s:13:"shipping/flat";i:92;s:13:"shipping/free";i:93;s:13:"shipping/item"
;i:94;s:23:"shipping/parcelforce_48";i:95;s:15:"shipping/pickup";i:96;s:19:"ship
ping/royal_mail";i:97;s:12:"shipping/ups";i:98;s:13:"shipping/usps";i:99;s:15:"sh
ipping/weight";i:100;s:11:"tool/backup";i:101;s:14:"tool/error_log";i:102;s:12:"t
otal/coupon";i:103;s:12:"total/credit";i:104;s:14:"total/handling";i:105;s:19:"to
tal/low_order_fee";i:106;s:12:"total/reward";i:107;s:14:"total/shipping";i:108;s:  15:"total/sub_total";i:109;s:9:"total/tax";i:110;s:11:"total/total";i:111;s:13:"
total/voucher";i:112;s:9:"user/user";i:113;s:20:"user/user_permission";i:114;s:1
5:"shipping/pickup";i:115;s:7:"sale/ad";}} 
```

现在我正在使用以下步骤来反序列化这个数组：

```
 $user_group_query = $this->db->query("SELECT permission FROM " . DB_PREFIX . "user_group WHERE user_group_id = '" . (int)$user_query->row['user_group_id'] . "'");

            $permissions = unserialize($user_group_query->row['permission']); 
```

但我收到错误消息：

```
 Notice: unserialize() [function.unserialize]: Error at offset 0 of 7081 bytes in D:\wamp\www\UI\system\library\user.php on line 23 
```

为什么我收到这个错误？？？如果有人遇到类似的问题，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:48:12.080

就像快速猜测空格在字符串中的方式一样，在尝试反序列化之前在序列化字符串之前添加一个 trim() 。

# java - 如何从 Mysql Db 在 struts2 中显示 blob 类型的图像

> ID：10328983
> 
> 赞同：0
> 
> 时间：2012-04-26T07:27:24.663
> 
> 标签：java, jsp, struts2, blob

Blob 类型的图像正在到达 JSP 页面，但它的格式不可读。

服务方式：

```
Iterator itr = list.iterator();
if (itr.hasNext()) {
     Membersdetails get = (Membersdetails) itr.next();
     repCurrentImage = get.getRepPicture();
}
return repCurrentImage; 
```

和我的行动课：

```
repCurrentImage = sdf.getrepImage(loginId); 
```

最后是我的 JSP 页面：

```
<img src="<s:property value="repCurrentImage"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:56:39.850

看起来您正在尝试将图像的内容直接嵌入到 JSP 中......这将不起作用，您只能提供一个 url（最好使用 struts2 url 标签构造，它将引用将返回流结果的操作并获取所需的参数来选择您的图像）。

这个问题/答案显示了一个用于呈现图片的结果类型的操作：[How to display image(bolb type) in jsp page from mySql DB in Struts 2 using Hibernate](https://stackoverflow.com/questions/10330503/how-to-display-imagebolb-type-in-jsp-page-from-mysql-db-in-struts-2-using-hibe)

我的经验是，一个好的数据库数据类型是 MEDIUMBLOB，任何较小的图像截断都成为问题（您只会看到文件的第一部分，因为这是可以存储的所有内容，尽管它可能在生产中是最好的确保文件适合！）。

# python - RESTful Python WSGI Web 框架

> ID：10328985
> 
> 赞同：3
> 
> 时间：2012-04-26T07:27:43.050
> 
> 标签：python, rest, web, wsgi, web-frameworks

> **可能重复：**
> [Python REST（Web 服务）框架的建议？](https://stackoverflow.com/questions/713847/recommendations-of-python-rest-web-services-framework)

我正在寻找一个 RESTful Python（最好是 Python 3）网络框架。它应该有以下几点：

*   可配置的 URL
*   网址生成
*   支持文件上传
*   身份验证（http 基本身份验证，基于 cookie）
*   内容协商
*   基于WSGI
*   使用请求的资源不支持的 HTTP 动词正确回答请求的能力（例如：如果有人发送`PUT`但资源仅支持`POST`and `GET`，则应用程序应使用允许的方法`POST`和回答`GET`）
*   支持缓存标头
*   转换/渲染结果

你会推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:09:36.870

你应该看一下这个[链接](https://stackoverflow.com/a/920181/430408)，Python REST（Web 服务）框架的建议？在此链接中，*@martin*为开发您自己的 rest-api 提供了非常好的示例。我不知道任何满足您所有需求的 RESTful 框架，但您可以开发自己的。

你可以检查[Flask](http://flask.pocoo.org/)和[Bottle](http://bottlepy.org/docs/dev/)。它们是用于 Python 的快速、简单和轻量级的 WSGI 微型 Web 框架......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:03:14.147

金字塔 1.3 支持 python 3.2

[http://www.pylonsproject.org/projects/pyramid/about](http://www.pylonsproject.org/projects/pyramid/about)

文档：[http ://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/)

请求：[http ://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/webob.html#request](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/webob.html#request)

查看配置装饰器： http: [//docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/viewconfig.html](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/viewconfig.html)

能够将每个请求方法的特定视图写入相同的路由，例如

```
@view_config(route_name='wiki', renderer='base.pt', request_method='POST')
def view(request):
    return {'a': None}

@view_config(route_name='wiki', renderer='base.pt', request_method='PUT')
def view(request):
    return {'a': None} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:28:15.567

听起来您对 HTTP 有一定的经验。你应该看看[CherryPy](http://www.cherrypy.org)，它更像是一个 HTTP 框架，而不是一个 Web 框架。这种观点允许您以其他框架通常试图对您隐藏的方式来利用 HTTP。CherryPy 可以完成您要求的所有事情：灵活的配置是它的卖点之一，它附带了用于缓存、Allow 标头、身份验证和协商的工具。3.2 版放弃了用于处理上传的限制性 cgi 模块，现在支持上传临时文件、流式传输和基于媒体类型的自动预处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T07:52:58.427

非阻塞网络服务器和框架[Tornado](http://www.tornadoweb.org/)看起来很有前途。它有点像[web.py](http://webpy.org/)，带有一个事件驱动模型，如 JavaScript 框架[node.js](http://nodejs.org/)（但使用更方便的语言）。但我还没有测试过。

# google-docs - 是否会自动检测到 Google 数据服务器上的数据损坏？

> ID：10328992
> 
> 赞同：5
> 
> 时间：2012-04-26T07:28:29.403
> 
> 标签：google-docs, google-docs-api, google-drive-api

我正在尝试对使用 Google Docs/Google Drive 进行长期数据存储的可靠性有一定的把握。大概当文件被上传或自动同步时，传输是使用 md5sum 验证的——我看到这些是根据 Google Docs API 保存为元信息的。并且由于该文件被镜像到多个服务器，因此可能还会验证这些传输中的每一个。

但随后该文件在那里放置了多年。我不改变它，所以不会触发同步。Google 是否偶尔会验证 md5sum 没有更改，以防止文件的静默损坏 - 如果发现不一致则修复文件？还是 md5sum 元信息只是一个静态值，代表几年前首次上传时文件的样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:23:20.387

我不会担心这个。我们无法分享具体细节，但托管在 Google 上的数据会经过检查以防损坏，并且会被多次复制。

不过，这并不能阻止您上传损坏的数据。因此，如果数据一致性对您至关重要，您可能会使用只读 MD5 校验和字段上传后确保您刚刚上传到云端硬盘的文件具有正确的 MD5。

# java - 如何使用 Java 和 Axis 1.4 获取 SOAP 请求消息

> ID：10328994
> 
> 赞同：4
> 
> 时间：2012-04-26T07:28:33.663
> 
> 标签：java, logging, axis, soap-client

出于日志记录的目的，我需要获取 SOAP 请求和 SOAP 响应的内容。一般来说，我有两种选择：

*   扩展部分 Axis API (BasicHandler) 并创建一个拦截器，它将为我记录所有内容。

*   或者我可以“手动”记录日志，即仅将 Axis 的实用程序用作客户端 - 不进行扩展。

由于某些原因，项目的方法指向我手动实现日志记录。到目前为止，我设法得到这样的 SOAP 响应：

```
 private void getSOAPasString(Call call) {

    try {
        MessageContext context = call.getMessageContext();
        SOAPMessage message = context.getMessage();

        // Create transformer
        TransformerFactory tff = TransformerFactory.newInstance();
        Transformer tf;
        tf = tff.newTransformer();

    // Get reply content
    Source sc = message.getSOAPPart().getContent();

    // Set output transformation
    StreamResult result = new StreamResult(System.out);
    tf.transform(sc, result);

    System.out.println(result);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println();
} 
```

但我还没有设法得到请求消息 - 你能帮我吗？是否可以获得请求 SOAP 消息？如何？