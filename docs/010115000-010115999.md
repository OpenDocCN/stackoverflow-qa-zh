# StackOverflow 问答 10115000-10115999

# extjs - 在 ExtJS 中，调用 Model.save() 还是 Store.Sync() 更好？

> ID：10115001
> 
> 赞同：12
> 
> 时间：2012-04-11T22:42:16.773
> 
> 标签：extjs

每个的后果是什么？

`Model.save()`例如，我看到使用来自服务器的结果自动刷新模型。我不确定是否`sync()`可以。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T05:32:37.827

> 使用来自服务器的结果自动刷新模型

`Store.sync()`也会刷新修改过的记录（前提是您正确设置了服务器响应）。

所以，从技术上讲，这两种方法都是一样的。但是，在我看来，您`Model.save()`只能在一种情况下使用：当您没有`store`. 为什么？因为当您拥有 store 并且仍然使用时`Model.save()`，这意味着您已经为`store`和设置了连接（代理）配置`model`。这意味着你有重复的代码，这可能更难维护。

因此，总而言之，您`Model.save()`仅在使用**独立模型**`form`时使用，而不使用存储（当您拥有未连接到任何网格的情况时可能会出现这种情况。因此您为这种形式创建独立模型），并`Store.sync()`在其他情况下使用。

# c++ - C++ 缺少初始化程序错误

> ID：10115005
> 
> 赞同：2
> 
> 时间：2012-04-11T22:42:35.857
> 
> 标签：c++, debugging

我在编译时收到此错误（g++ 4.4.6）：

```
main.cpp: In function ‘int main()’:
main.cpp:27: error: expected initializer before ‘:’ token
main.cpp:33: error: expected primary-expression before ‘for’
main.cpp:33: error: expected ‘;’ before ‘for’
main.cpp:33: error: expected primary-expression before ‘for’
main.cpp:33: error: expected ‘)’ before ‘for’
main.cpp:33: error: expected initializer before ‘:’ token
main.cpp:36: error: could not convert ‘((list != 0u) ? (list->SortedList::~SortedList(), operator delete(((void*)list))) : 0)’ to ‘bool’
main.cpp:37: error: expected primary-expression before ‘return’
main.cpp:37: error: expected ‘)’ before ‘return’ 
```

我的代码如下：

```
#include <iostream>
#include "Student.h"
#include "SortedList.h"

using namespace std;

int main() {
    SortedList *list = new SortedList();

    Student create[100];
    int num = 100000;

    for (Student &x : create) { // <--Line 27
        x = new Student(num);
        num += 10;
    }

    for (Student &x : create)
    list->insert(&x);

    delete list;
    return 0;
} 
```

任何可能知道错误来源的人都会有很大帮助。此外，Student 和 SortedList 是在其 .h 文件中声明的对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T22:46:52.993

根据[GCC 网站上的这个页面](http://gcc.gnu.org/projects/cxx0x.html)，基于范围的 for 仅在 g++ 4.6 及更高版本中可用，因此您必须将代码转换为正常`for`循环或使用`std::for_each`或其他东西，或升级您的编译器。

# c# - 使用 Linq 将 xml 解析为 ObservableCollection。使用 wpf c# 将数据绑定到数据网格

> ID：10115007
> 
> 赞同：3
> 
> 时间：2012-04-11T22:42:50.453
> 
> 标签：c#, wpf, linq, data-binding

我是 linq、wpf 和 C# 的新手。我设法研究了实现功能组件的方法。我已经成功地攻击了数据绑定，但我在性能上苦苦挣扎。我正在读取一个静态外部 xml 文件（即数据库），并希望使用 wpf 数据网格将其显示给用户。额外的信息是我正在使用用户控制的 wpf 组合框来过滤网格中显示了多少来自数据库的数据。我想使用 linq 来完成这项任务，但我似乎无法让它正确执行。

C# 文件：

```
namespace ReadPipeXMLDB 
```

{
public partial class ReadDB : Window, INotifyPropertyChanged { private XDocument xmlDoc = null;
常量字符串 ALL = "全部";

```
 // Constructor
    public ReadDB()
    {
        InitializeComponent();

        // Load xml            
        xmlDoc = XDocument.Load("DataBase.xml");
        this.DataContext = this;                    
    }

    private ObservableCollection<CPipeData> _col;
    public ObservableCollection<CPipeData> Col
    {
        get { return _col; }
        set
        {
            if (_col == value)
                return;

            _col = value;
            OnPropertyChanged(() => Col);
        }
    }

    private ObservableCollection<CMfgData> _mfgCollection;
    public ObservableCollection<CMfgData> MfgCollection
    {
        get { return _mfgCollection; }
        set
        {
            if (_mfgCollection == value)
                return;

            _mfgCollection = value;
            OnPropertyChanged(() => MfgCollection);
        }        
    }

    private ObservableCollection<string> _mfgNames;
    public ObservableCollection<string> MfgNames
    {
        get { return this._mfgNames; }
        set
        {
            if (this._mfgNames == value)
                return;

            this._mfgNames = value;
            OnPropertyChanged(() => MfgNames);
        }
    }

    #region Notify Event Declaration and Definition

    public event PropertyChangedEventHandler PropertyChanged;

    public virtual void OnPropertyChanged<T>(Expression<Func<T>> property)
    {
        PropertyChangedEventHandler eventHandler = this.PropertyChanged;
        if (eventHandler != null)
        {
            var memberExpression = property.Body as MemberExpression;
            eventHandler(this, new PropertyChangedEventArgs(memberExpression.Member.Name));
        }
    }

    #endregion

    public class CMfgData : ReadDB
    {
        private string _mfgName;
        //private ObservableCollection<CPipeData> _pipeDataCollection;

        /*public CMfgData(string mfgName, CPipeData pipeData)
        {               
            _mfgName = mfgName;
            _pipeData = pipeData;
        }*/

        #region CMfgData Property Definitions

        public string MfgName
        {
            get { return _mfgName; }
            set
            {
                if (_mfgName == value)
                    return;

                _mfgName = value;
                OnPropertyChanged(() => MfgName);
            }
        }

       /* public ObservableCollection<CPipeData> PipeDataCollection
        {
            get { return _pipeDataCollection; }
            set
            {
                if (_pipeDataCollection == value)
                    return;

                _pipeDataCollection = value;
                OnPropertyChanged(() => PipeDataCollection);
            }
        }*/

        #endregion
    }

    public class CPipeData : ReadDB
    {
        // PipeData Property Declarations
        private string _nominal;
        private string _sched;
        private string _id;
        private string _od;
        private string _wt;

        public CPipeData()
        {
            _nominal = "";
            _sched = "";
            _id = "";
            _od = "";
            _wt = "";
        }

        // Constructor
        public CPipeData(string nominal, string sched, string id, string od, string wt)
        {
            _nominal = nominal;
            _sched = sched;
            _id = id;
            _od = od;
            _wt = wt;
        }

        #region CPipeData Property Definitions

        public string Nominal
        {
            get { return _nominal; }
            set
            {
                if (_nominal == value)
                    return;

                _nominal = value;
                OnPropertyChanged(() => Nominal);
            }
        }

        public string Sched
        {
            get { return _sched; }
            set
            {
                if (_sched == value)
                    return;

                _sched = value;
                OnPropertyChanged(() => Sched);
            }
        }

        public string ID
        {
            get { return _id; }
            set
            {
                if (_id == value)
                    return;

                _id = value;
                OnPropertyChanged(() => ID);
            }
        }

        public string OD
        {
            get { return _od; }
            set
            {
                if (_od == value)
                    return;

                _od = value;
                OnPropertyChanged(() => OD);
            }
        }

        public string WT
        {
            get { return _wt; }
            set
            {
                if (_wt == value)
                    return;

                _wt = value;
                OnPropertyChanged(() => WT);
            }
        }

        #endregion  
    }

    private void mfgrComboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        // Update database grid 
        if (mfgrComboBox1.SelectedValue is string)
        {                
            PopulateGrid(mfgrComboBox1.SelectedValue as string);
        }
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {                    
        /*MfgCollection = new ObservableCollection<CMfgData>(                                
            from mfg in xmlDoc.Root.Elements("Mfg")                               
            //where mfg.Attribute("name").Value == comboValue
            select new CMfgData
            {
                MfgName = mfg.Attribute("name").Value,
                PipeDataCollection = 
                    new ObservableCollection<CPipeData>
                    (from pipe in mfg.Elements("pipe")                                
                    select new CPipeData
                    {    
                        Nominal = pipe.Element("Nominal").Value, 
                        Sched = pipe.Element("Schedule").Value, 
                        ID = pipe.Element("ID").Value, 
                        OD = pipe.Element("OD").Value, 
                        WT = pipe.Element("Wall_Thickness").Value
                    })

            });*/
    }

    private void mfgrComboBox1_Loaded(object sender, RoutedEventArgs e)
    {
        // Make sure xml document has been loaded            
        if (xmlDoc != null)
        {                              
            ObservableCollection<string> tempCollection =  new ObservableCollection<string>(                
                from n in xmlDoc.Root.Elements("Mfg").Attributes("name")
                select n.Value);                

            // Add the additional "All" filter
            tempCollection.Insert(0, ALL);

            // Assign list to member property. This is done last so the property event gets fired only once                
            MfgNames = tempCollection;                

            PopulateGrid(ALL);                
        }
    }

    private void PopulateGrid(string comboValue)
    {
        if (mfgrComboBox1.Items.IndexOf(comboValue) > -1)
        {                    
            Col = new ObservableCollection<CPipeData>(
                from mfg in xmlDoc.Root.Elements("Mfg")
                where mfg.Attribute("name").Value == comboValue
                from pipe in mfg.Elements("pipe")
                select new CPipeData
                {
                    Nominal = pipe.Element("Nominal").Value,
                    Sched = pipe.Element("Schedule").Value,
                    ID = pipe.Element("ID").Value,
                    OD = pipe.Element("OD").Value,
                    WT = pipe.Element("Wall_Thickness").Value
                });
        }
    }
} 
```

}

xml:

```
<Window x:Class="ReadPipeXMLDB.ReadDB"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
    Title="Standard Pipe Sizes" Height="849" Width="949" Loaded="Window_Loaded">

<Grid>        

    <!-- Manufactuer filter combobox -->
    <ComboBox Name="mfgrComboBox1"
              ItemsSource="{Binding Path=MfgNames}"  
              SelectedIndex="0"
              Height="23" Width="286"
              HorizontalAlignment="Left" VerticalAlignment="Top"                  
              Margin="20,20,0,0" SelectionChanged="mfgrComboBox1_SelectionChanged" Loaded="mfgrComboBox1_Loaded" />     

    <!-- Units combobox -->
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="320,20,0,0" Name="dimensionsComboBox2" VerticalAlignment="Top" Width="87" />              

    <!-- Pipe database display grid -->
    <DataGrid Name="dataGrid1" IsReadOnly="True" AutoGenerateColumns="False" Margin="20,60,20,20" ItemsSource="{Binding Col}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Nominal"  Binding="{Binding Path=Nominal}"/>
            <DataGridTextColumn Header="Schedule" Binding="{Binding Path=Sched}"/>
            <DataGridTextColumn Header="ID" Binding="{Binding Path=ID}"/>
            <DataGridTextColumn Header="OD" Binding="{Binding Path=OD}"/>
            <DataGridTextColumn Header="Wall Thickness" Binding="{Binding Path=WT}" Width="*"/>
        </DataGrid.Columns>                       
    </DataGrid>        
</Grid> 
```

XML:

```
<DBRoot>
   <Mfg name="A Manufac">
    <pipe>
      <Nominal>testdata</Nominal>
      <Schedule>testdata</Schedule>
      <OD>testdata</OD>
      <Wall_Thickness>testdata</Wall_Thickness>
      <ID>testdata</ID>
    </pipe>
    <pipe>
      <Nominal>testdata</Nominal>
      <Schedule>testdata</Schedule>
      <OD>testdata</OD>
      <Wall_Thickness>testdata</Wall_Thickness>
      <ID>testdata</ID>
    </pipe>
  </Mfg>
  <Mfg name="B Manufac">
    <pipe>
      <Nominal>testdata</Nominal>
      <Schedule>testdata</Schedule>
      <OD>testdata</OD>
      <Wall_Thickness>testdata</Wall_Thickness>
      <ID>testdata</ID>
    </pipe>
    <pipe>
      <Nominal>testdata</Nominal>
      <Schedule>testdata</Schedule>
      <OD>testdata</OD>
      <Wall_Thickness>testdata</Wall_Thickness>
      <ID>testdata</ID>
    </pipe>
    </Mfg>
  </DBRoot> 
```

PopulateGrid 调用很慢，因为每次组合框更改值时我都会创建一个新的 ObservableCollection。我不习惯使用集合和 linq，所以如果有人可以为我提供更强大的替代方案，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:58:05.183

您可以通过直接绑定到 XML 文件来省去一些麻烦：

XAML

```
<Grid>
    <Grid.DataContext>
        <XmlDataProvider Source="DataBase.xml"/>
    </Grid.DataContext>

    <StackPanel>
        <ComboBox ItemsSource="{Binding XPath=/DBRoot/Mfg}" Name="comboBox" SelectedIndex="0">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding XPath=@name}"/>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
        <DataGrid ItemsSource="{Binding ElementName=comboBox, Path=SelectedItem}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding XPath=Nominal}" Header="Nominal"/>
                <DataGridTextColumn Binding="{Binding XPath=Schedule}" Header="Schedule"/>
                <DataGridTextColumn Binding="{Binding XPath=OD}" Header="OD"/>
                <DataGridTextColumn Binding="{Binding XPath=Wall_Thickness}" Header="Wall Thickness"/>
                <DataGridTextColumn Binding="{Binding XPath=ID}" Header="ID"/>
            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:04:15.583

哦，我的天啊。您的问题从 ObservableCollection<string> MfgNames 开始。String 没有智能，您每次都在从头开始构建数据。使用一个类。

```
public class Mfg
{
    public string Name { get; private set; }

    public ObservableCollection <CPipeData> pipes { .... 
```

然后在细节中你只需绑定

```
ItemsSounce="{binding ElementName=cbMfg Path=SelectedItem.Pipes}" 
```

在 MSDN.Microsoft.Com 上查找 Master Detail

如果多个 Mfg 使用相同的管道，那么您将使用该关系创建一个哈希集并将该哈希集传递给 Mfg 并使用来自该单个哈希集的 LINQ 过滤器。覆盖 GetHash。

# java - ConcurrentIdentityWeakKeyHashMap 和整数键

> ID：10115008
> 
> 赞同：2
> 
> 时间：2012-04-11T22:42:51.373
> 
> 标签：java, integer, hashmap, netty, internal

虽然是内部的，但我认为一般使用 ConcurrentIdentityWeakKeyHashMap 是安全的。但是，以下代码：

```
ConcurrentIdentityWeakKeyHashMap map = new ConcurrentIdentityWeakKeyHashMap();
for(int key = 0;  key < 132; key++){
     map.put(key, key);
 }
for(int key = 0;  key < 132; key++){
     System.out.println(map.get(key));
 } 
```

产生：

```
0
1
..
124
125
126
127
null
null
null
null 
```

这是我的错误还是误解（即“不应与整数一起使用”或“仅供内部使用”）？

编辑：根据 Lucianos 的评论，我稍微修改了代码，使其在列表和地图中引用（我希望至少）相同的 Integer：

```
 ArrayList<Integer> list = new ArrayList<Integer>(132);
 ConcurrentIdentityWeakKeyHashMap<Integer, Integer> map = new ConcurrentIdentityWeakKeyHashMap<Integer, Integer>();
 for(int key = 0;  key < 132; key++){
     Integer key2 = key;
     list.add(key2);
     map.put(key2, key2);
 }
 for(int key = 0; key < 132; key++){
     System.out.println(map.get(list.get(key)));
 } 
```

现在，它起作用了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:45:54.387

Integer 类中预缓存了最多 127 个整数，因此它们永远不会被垃圾回收。

# c# - 将大文件流式传输到 Web 服务

> ID：10115011
> 
> 赞同：6
> 
> 时间：2012-04-11T22:43:00.423
> 
> 标签：c#, web-services, stream, asmx

我们有一个 Web 服务 (asmx)，它采用字节数组缓冲区并将其流式传输到外部文件服务以进行存储和归档。它由生成相当小文件 (3-5M) 的 Windows 服务调用，因此创建一个字节数组大小并将其作为参数提供给 Web 服务调用到目前为止运行良好。

我的任务是向文件队列中添加一个新作业，该作业可能会生成大于 70M 的文件。显然`byte[]`，这样的大小会压倒系统内存，所以我一直在寻找解决方案。Web 服务有一个将 a`FileStream`作为参数而不是 a的内部方法`byte[]`，因此我尝试将 FileStream 方法显示为 WebMethod。我已经更新了 Windows 服务中的引用，但是发生了一件奇怪的事情：FileStream 参数附加了一个命名空间说明符（类似于`CallingWindowsService.ExternalWebServiceFileManager.FileStream`），并且这个指定的对象没有文件名作为构造函数，所以我无法打开特定文件.

我完全不知道如何处理这个问题。有没有其他人这样做过 - 将大量数据流式传输*到*Web 服务 - 如果是这样，最好的方法是什么？我的网络服务将需要 a`byte[]`或`FileStream`.

查看其他一些消息，看起来 MTOM（不熟悉它）可能是一个解决方案，但我不确定如何在我的 Web 方法中设置它或让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:47:00.473

您可以尝试一些事情，您没有提及您使用的协议或托管它的方式，所以我假设它可能是 IIS7 和您使用的肥皂。在 Web 服务的 web.config 文件中，您可以添加以下内容，这将增加允许传输的文件大小而不会出现 404 错误：

```
 <system.web>
     <httpRuntime executionTimeout="999999" maxRequestLength="2097151" />
     ...
  </system.web> 
```

您可能想要对 Web 服务的 web.config 文件执行的第二件事以允许大文件传输：

```
 <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2000000000" />
      </requestFiltering>
    </security>
  </system.webServer> 
```

另一种可能：

```
<location path="Copy.asmx"> <!-- Name of you asmx -->
    <system.webServer>
      <security>
        <requestFiltering>
          <requestLimits maxAllowedContentLength="104857600"/> <!-- 100 megs -->
        </requestFiltering>
      </security>
    </system.webServer>
  </location> 
```

通过 Web 服务发送 byte[] 的主要问题是它们被放入 SOAP 主体中，该主体被编码为 base 64 字符串。像这样对文件进行编码会使soap 正文中的文件大小增加三分之二（即，6 MB 的文件通过网络变成9 MB 的文件）。

另一种可能性是在传输之前将您的数据“分块”分成更小的部分，这可能是您所需要的。根据网络速度、服务器资源等因素，chunkSize（设置为 500KB）可能是提高上传性能的关键因素。

```
/// <summary>
/// Chunk the file and upload
/// </summary>
/// <param name="filename"></param>
private void UploadVideo(string filename)
{
    #region Vars
    const int chunkSize = 512000;
    byte[] bytes = null;
    int startIndex, endIndex, length, totalChunks;           

    WS.UploadRequest objRequest = new WS.UploadRequest();            
    #endregion

    try
    {
        if (File.Exists(filename))
        {
            using (WS.UploadService objService = new WS.UploadService())
            {
                using (FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read, FileShare.Read))
                {
                    //// Calculate total chunks to be sent to service
                    totalChunks = (int)Math.Ceiling((double)fs.Length / chunkSize);

                    //// Set up Upload request object
                    objRequest.FileName = filename;
                    objRequest.FileSize = fs.Length;

                    for (int i = 0; i < totalChunks; i++)
                    {
                        startIndex = i * chunkSize;
                        endIndex = (int)(startIndex + chunkSize > fs.Length ? fs.Length : startIndex + chunkSize);
                        length = endIndex - startIndex;
                        bytes = new byte[length];

                        //// Read bytes from file, and send upload request
                        fs.Read(bytes, 0, bytes.Length);
                        objRequest.FileBytes = bytes;
                        objService.UploadVideo(objRequest);
                    }
                }

            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(string.Format("Error- {0}", ex.Message));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:17:37.300

`ASMX`Web 服务是不应该用于新开发的遗留技术。

它缺少的功能之一是支持流式传输和大文件。特别是，一条消息在发送到客户端的途中将在内存中最多重复四次。

`WCF`确实支持真正的流媒体。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T01:19:59.550

正如@John Saunders 所说，Web 服务对流和大文件大小处理的支持很差，您可以使用压缩通过 Web 服务传输文件，而不是发送原始文件。

# c# - 如何创建 Exchange 邮箱？

> ID：10115014
> 
> 赞同：1
> 
> 时间：2012-04-11T22:43:29.017
> 
> 标签：c#, powershell, exchange-server-2010

我正在尝试在 C# 中创建一个 Exchange 邮箱。以下代码不会产生错误，但它似乎也没有像我期望的那样创建邮箱：

```
private void buttonCreateUser_Click(object sender, EventArgs e)
{
    Boolean Success = CreateUser(textBoxFirstName.Text, textBoxLastName.Text,
        textBoxAlias.Text, textBoxPassword.Text,
        comboBoxDomain.SelectedItem.ToString(),
        comboBoxOrganizationalUnit.SelectedItem.ToString());

    if (Success)
    {
        labelStatus.Text = "User Created";
    }
    else
    {
        labelStatus.Text = "There Is Some Error";
    }

}

public Boolean CreateUser(string FirstName, string LastName, string Alias,
    string PassWord, string DomainName, string OrganizationalUnit)
{
    string Name = FirstName + " " + LastName;
    string PrincipalName = FirstName + "." + LastName + "@" + DomainName;

    Boolean success = false;
    RunspaceConfiguration rsConfig = RunspaceConfiguration.Create();
    SecureString spassword = new SecureString();
    spassword.Clear();

    foreach (char c in PassWord)
    {
        spassword.AppendChar(c);
    }

    PSSnapInException snapInException = null;
    PSSnapInInfo info = rsConfig.AddPSSnapIn(
        "Microsoft.Exchange.Management.PowerShell.E2010", out snapInException);
    Runspace myRunSpace = RunspaceFactory.CreateRunspace(rsConfig);
    myRunSpace.Open();
    Pipeline pipeLine = myRunSpace.CreatePipeline();

    Command myCommand = new Command("New-MailBox");
    myCommand.Parameters.Add("Name", Name);
    myCommand.Parameters.Add("Alias", Alias);
    myCommand.Parameters.Add("UserPrincipalName", PrincipalName);
    myCommand.Parameters.Add("Confirm", true);
    myCommand.Parameters.Add("SamAccountName", Alias);
    myCommand.Parameters.Add("FirstName", FirstName);
    myCommand.Parameters.Add("LastName", LastName);
    myCommand.Parameters.Add("Password", spassword);
    myCommand.Parameters.Add("ResetPasswordOnNextLogon", false);
    myCommand.Parameters.Add("OrganizationalUnit", OrganizationalUnit);
    pipeLine.Commands.Add(myCommand);
    pipeLine.Invoke();
    myRunSpace.Dispose();

    success = true;

    return success;
} 
```

我没有收到错误，所以我不知道我做错了什么。

**更新**

我正在为此使用 Web 服务。如果我使用 Windows 应用程序运行相同的代码，它可以工作，但不能使用 WebService？我应该在 Exchange Server 中进行任何更改吗？虽然我可以使用 Get-MailBox 获取 MailBox 的信息，但 New-MailBox 不能创建用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-20T18:33:34.277

几天来，我一直在为这个问题苦苦挣扎（在这周之前，我对 C# 作为一门语言一无所知）。无论如何，对于像我这样的人，希望实现这一点，但苦苦挣扎，这里有一个对我有用的例子：

我们使用 Exchange2010，我可以在没有安装交换工具的机器上运行它。

```
using System.Management.Automation;
using System.Management.Automation.Remoting;
using System.Management.Automation.Host;
using System.Collections.ObjectModel;
using Microsoft.PowerShell.Commands;

static string createmailbox(string name, string alias, string email, string database, string UPN)
        {

            SecureString spassword = new SecureString();
            string PassWord = "<set default password here or read in input from form>";
            spassword.Clear();

            foreach (char c in PassWord)
            {
                spassword.AppendChar(c);
            }

            string orgunit = "<define the OU here if you always use the same one, alternatively, add as parameter in function call>";
            string dc = "<similarly, add DC here if needed, or call  from function>";
            PSCredential newCred = (PSCredential)null;
            WSManConnectionInfo connectionInfo = new WSManConnectionInfo(new Uri("<put in CAS server FQDN here>/powershell?serializationLevel=Full"),
                "http://schemas.microsoft.com/powershell/Microsoft.Exchange", newCred);
            connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Kerberos;
            Runspace runspace = RunspaceFactory.CreateRunspace(connectionInfo);
            PowerShell powershell = PowerShell.Create();

            PSCommand command = new PSCommand();
            command.AddCommand("New-Mailbox");
            command.AddParameter("-Name", name);
            command.AddParameter("-Alias", alias);
            command.AddParameter("-UserPrincipalName", email);
            command.AddParameter("-PrimarySMTPAddress", email);
            command.AddParameter("-Password",spassword);
            // (ConvertTo-SecureString -AsPlainText "P4ssw0rd" -Force)
            command.AddParameter("-Database", database);
            command.AddParameter("-OrganizationalUnit", orgunit);
 //           command.AddParameter("-Email", email);
            command.AddParameter("-DomainController", dc);
            powershell.Commands = command;
            try
            {
                runspace.Open();
                powershell.Runspace = runspace;
                Collection<PSObject> results = powershell.Invoke();
                return results.ToString();
            }
            catch (Exception ex)
            {
                string er = ex.InnerException.ToString();

            }
            finally
            {
                runspace.Dispose();
                runspace = null;

                powershell.Dispose();
                powershell = null;

            }
        } 
```

我的用例是通过 WPF 表单，因此参数是从表单上的文本框填充的。我已经将密码（我们为共享邮箱设置了默认密码并且用户帐户被禁用）、OU 和域控制器等设置为静态文本，但它们也可以通过变量轻松调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:37:09.070

I get the solution for this .I change permission leval of inproxy.dll and whooooo its working great ...

# php - 如何确保我的 MySQL 数据库中快速变化的数据在 php 脚本中准确表示？

> ID：10115016
> 
> 赞同：3
> 
> 时间：2012-04-11T22:43:43.893
> 
> 标签：php, mysql

我有一个包含大量游戏对象的数据库，以下 3 个 PHP 脚本正在查询这些对象。

1.  **列出对象：**获取包含我需要的所有项目的 JSON 对象
2.  **添加对象：**将对象添加到数据库中
3.  **重置：**擦除桌子上的所有对象

他们三个都在某种程度上起作用。虽然，时间不匹配。当游戏调用重置函数时，它会重新启动。当游戏重新启动时，它会自动加载所有对象。不幸的是，这里的问题是，如果游戏刚刚被重置，对象仍然会被脚本 1 拉取。

我知道*事务*，但我从未使用过它们，也不知道如何在这里实现它们，因为我的事务涉及来自在不同时间运行的不同脚本的事物。

奖励积分：这个设置（AS3 > php > MySQL）会让我在繁重的负载中遇到麻烦吗？游戏可能会被 10、100、1000 人接受，关于这个主题我能读到什么吗？

**编辑：新想法/问题**

目前，擦除工作如下：对象表有一个字段“已删除”，当调用重置方法时，该字段设置为“1”。将现有数据复制到存档表中然后截断活动表可能更聪明......

**编辑：这是我正在使用的（相关）PHP代码**

添加对象：

```
if ($db_found) {

$x = $_GET['x'];
$y = $_GET['y'];
$type = $_GET['type'];
$name = $_GET['name'];
$text = $_GET['text'];

$SQL = "INSERT INTO bodies  (x,y,type,name,text)
VALUES ('".$x."','".$y."','".$type."','".$name."','".$text."' )";

if (!mysql_query($SQL))
  {
  die('Error: ' . mysql_error());
  }

};

mysql_close($db_handle); 
```

列出/获取对象：

```
if ($db_found) {

$SQL = "SELECT * FROM bodies WHERE deleted = 0";
$res = mysql_query($SQL);

    $rows = array();
    while($r = mysql_fetch_assoc($res)) {
        print $r['x'] . ','
        . $r['y']
        . ','
        . $r['type']
        . ','
        . $r['name']
        . ','
        . $r['text']
        .  ';';
    }

};
mysql_close($db_handle); 
```

重置：（**编辑 2）**

```
mysql_query("LOCK TABLES bodies WRITE;");

$SQL = " DELETE FROM bodies";

if (!mysql_query($SQL))
  {
  die('Error: ' . mysql_error());
  }
};

mysql_query("UNLOCK TABLES;"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:01:28.440

[如何在 MySQL 中进行事务处理。](https://dev.mysql.com/doc/refman/5.5/en/commit.html)

在您的情况下，您可能对事务的原子性和隔离性感兴趣，这意味着在重新启动游戏时，您希望确保在重置尚未完全完成之前，没有人可以获取您的任何中间数据。在事务中进行重置将确保此属性*。（*截断见下文）

对于事务中涉及的所有表，您将需要 InnoDB 作为引擎。MyISAM 不支持事务。

更改事务中的大量数据可能会导致高查询延迟，因为事务使用特殊的撤消/重做日志能够撤消您在事务中所做的所有事情，如果您决定这样做的话`ROLLBACK`。

开始新游戏时我不会擦桌子。而是在开始新游戏时给你的数据一个`game_id`并使用一个新的。`game_id`如今，空间不应该成为真正的问题。这样做的好处是您在重置游戏时 几乎不需要[锁定桌面。](https://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)

如果必须，请务必`TRUNCATE`在清理桌子时使用。据我所知`TRUNCATE`，在 MySQL 中无法回滚，因此在事务中执行它不会做任何有用的事情。

我认为如果使用得当，PHP/MySQL 会表现良好，即使对于更大的访问者数量也是如此。您可以使用[xdebug](http://xdebug.org/)或[MySQL 慢查询日志](https://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html)等分析工具来跟踪和消除性能瓶颈。

# javascript - 使用 JQuery 在动态 JQuery UI 对话框中为动态创建的表单元素设置值

> ID：10115017
> 
> 赞同：3
> 
> 时间：2012-04-11T22:43:47.633
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试从服务中读取数据（返回 JSON 对象）并在动态 JQuery UI 对话框中创建一个可编辑的表单，以便最终用户可以使用它来进行更改和提交。麻烦的是，当我从服务器获取数据时，我似乎无法在表单中设置数据。如果我不使用对话框，那么一切正常。

我创建了一个关联的[JSFiddle](http://jsfiddle.net/UQSVW/1/)，以防万一。

```
var dialog_box = $('<div></div>');
var animal = { kind : "Cat", has_whiskers : true };
var s = $('<select />', {
    "id":"s1"
}).append(
    $('<option />', 
        {
            value:"Dog", 
            text:"Dog"
        }
    ),
    $('<option />', 
        {
            value:"Cat", 
            text:"Cat"
        }
    ),
    $('<option />', 
        {
            value:"Bird", 
            text:"Bird"
        }
    )
);
s.appendTo(dialog_box);

// doesn't work
$('#s1 option:[value="'+ animal.kind +'"]').prop('selected', true);

var new_div = $('<div/>').html('<input type="checkbox" id="has_whiskers_checkbox" />');

new_div.appendTo(dialog_box);

(animal.has_whiskers) ? $("#has_whiskers_checkbox").prop("checked", true) : $("#has_whiskers_checkbox").prop("checked", false);

dialog_box.dialog({
     autoOpen: false,
     modal: true,
     buttons: {
         "OK": function() {
              console.log("OK Pressed");
              $( this ).dialog( "close" );
              $( this ).remove();
           }
        }
}).dialog('open'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:52:28.393

```
$('#s1 option:[value="'+ animal.kind +'"]', dialog_box).prop('selected', true); 
```

[例子](http://jsfiddle.net/heera/UQSVW/2/)

# java - JOGL 纹理不起作用

> ID：10115018
> 
> 赞同：3
> 
> 时间：2012-04-11T22:43:54.243
> 
> 标签：java, opengl, colors, textures, jogl

我正在尝试填充木材的圆环纹理，但只留下一种颜色：

[img http://dl.dropbox.com/u/70996029/Screenshots/Screenshot-2012-04-12_01.28.44.png](http://dl.dropbox.com/u/70996029/Screenshots/Screenshot-2012-04-12_01.28.44.png)

图像为 128x128 png。我究竟做错了什么？

```
public void init(GLAutoDrawable drawable) {
        gl = drawable.getGL().getGL2();

        gl.glEnable(GL2.GL_DEPTH_TEST);
        gl.glDepthFunc(GL2.GL_LESS);

        gl.glEnable(GL2.GL_LIGHTING);
        gl.glEnable(GL2.GL_LIGHT0);

        gl.glMatrixMode(GL2.GL_PROJECTION);
        gl.glOrtho(-17.0, 17.0, -17.0, 17.0, -17.0, 17.0);
        gl.glMatrixMode(GL2.GL_MODELVIEW);
    }
public void display(GLAutoDrawable drawable)
    {
        gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);
        float mat_diffuse[] = { 0.5f, 0.5f, 0.8f, 1.0f };
        gl.glMaterialfv(GL2.GL_FRONT, GL2.GL_DIFFUSE, mat_diffuse, 0);
        glut.glutSolidTorus(2, 5, 80, 80);

        gl.glRotatef(90, 1, 0, 0);
        gl.glTranslatef(5, 0, 0);

        Texture texture = null;

        try {
            texture = TextureIO.newTexture(new File("D:\\Program Files\\eclipse\\projects\\rotation OGL\\src\\wood.png"), true);
            texture.setTexParameterf(gl, GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_LINEAR);
            texture.setTexParameterf(gl, GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_LINEAR);
        } catch (Exception e) {
            e.printStackTrace();
        }
        gl.glEnable(GL2.GL_TEXTURE_2D);

        texture.bind(gl);
        texture.enable(gl);

        glut.glutSolidTorus(2, 5, 80, 80);

        texture.disable(gl);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:49:49.987

尝试为您的几何体 [生成一些纹理坐标。](http://www.glprogramming.com/red/chapter09.html#name7)

`glutSolidTorus()`不会为您生成任何内容。

# installation - Installshield 安装要求（搜索已安装应用程序的最佳方式）

> ID：10115021
> 
> 赞同：1
> 
> 时间：2012-04-11T22:44:05.510
> 
> 标签：installation, installshield, requirements

通过 installshield 项目，我想知道检查 SQL Server 和 Crystal Reports Viewer 是否已安装的最佳途径是什么？我正在考虑检查注册表，但不确定 Local_Machine 或 Current_User 是否是更好的选择？或者也许完全是一个替代选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:43:20.293

我倾向于根据我的实际身体依赖性进行搜索，即。例如，如果我需要 Oracle 客户端，我会搜索 oci.dll。这是一种逐案的基础：

注册通常成本较低。如果您搜索一个目录，硬盘驱动器还不错。递归搜索很昂贵。

SQL Server 可能不需要按说法进行搜索。您的 SQL 依赖项到底是什么？客户端连接工具？数据库实例？某个版本或任何版本？与实例名称相同。您可以实际连接到的正在运行的数据库实例？

如果您正在对 SQL 服务器执行 SQL 脚本，则可以使用 SqlLogin 对话框来建立连接。

# python - `inspect.trace()` 与 `traceback`

> ID：10115022
> 
> 赞同：13
> 
> 时间：2012-04-11T22:44:07.130
> 
> 标签：python, debugging, python-3.x, stack-trace

我对两个对象之间的区别感到困惑：

*   `inspect.trace()`处理异常时返回的帧列表
*   `sys.exc_info()[2]`由（或在调用中传递给`sys.excepthook`）返回的回溯

这两个对象是否包含相同的信息，只是组织成不同的数据结构？如果没有，什么是另一个没有的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T23:36:02.107

从 inspect.trace 的文档中：

> 检查。**跟踪**（[上下文]）
> 
> 返回当前帧与引发当前正在处理的异常的帧之间的堆栈的帧记录列表。列表中的第一个条目表示调用者；最后一个条目表示引发异常的位置。

这表明它提供了一种很好的方法来分割和切分`sys.exc_info()[2]`你得到的帧。

其中，如果您查看源代码：

```
def trace(context=1):
    """Return a list of records for the stack below the current exception."""
    return getinnerframes(sys.exc_info()[2], context) 
```

（与[3.2](http://hg.python.org/cpython/file/3.2/Lib/inspect.py#l1077)或[2.7](http://hg.python.org/cpython/file/2.7/Lib/inspect.py#l1056)相同），这正是它所做的，但它通过`getinnerframes`，它根据文档字符串用一些有用的信息对其进行注释：

> 获取回溯帧和所有较低帧的记录列表。
> 
> 每条记录都包含一个框架对象、文件名、行号、函数名、上下文行列表和上下文中的索引。

而且，因为我很好奇这实际上意味着什么：

```
import sys
import inspect
from pprint import pprint

def errorer():
    raise Exception('foo')

def syser():
    try:
        errorer()
    except Exception, e:
        tb = sys.exc_info()[2]
        print tb.tb_frame
        print tb.tb_lasti
        print tb.tb_lineno
        print tb.tb_next

def inspecter():
    try:
        errorer()
    except Exception, e:
        pprint(inspect.trace()) 
```

其中，当从提示中调用时，同时回想其中许多字段和对象具有[易于查找的](http://docs.python.org/library/inspect.html#types-and-members)定义：

```
>>> syser()
<frame object at 0x1441240>
6
10
<traceback object at 0x13eb3b0>
>>> inspecter()
[(<frame object at 0x14a5590>,
  '/tmp/errors.py',
  22,
  'inspecter',
  None,
  None),
 (<frame object at 0x14a21b0>,
  '/tmp/errors.py',
  8,
  'errorer',
  None,
  None)] 
```

（行号跳来跳去，因为我弄乱了格式）

`inspect.trace()`显然更好一点。

# php - 将 CSS 添加到 JQuery 验证错误消息

> ID：10115026
> 
> 赞同：-1
> 
> 时间：2012-04-11T22:44:21.297
> 
> 标签：php, mysql, ajax, forms

我一直在整理我的第一个 Ajax 驱动的表单（[此处](http://thenally.com/work/ajax-php/)），最终目标是将表单数据发送到 MySQL 数据库。我对 PHP 和 Javascript 的经验很少，因此采用 JQuery Formwizard 作为我的选择路径。该表单效果很好，但是我没有太多运气找到资源来帮助我编写我的“process.php”脚本。

默认情况下，表单当前返回一个字符串，例如 item1=foo&item2=bar...，它会在提交时显示。我附上了下面的 JS 和我的 process.php 文件的要点，但我不确定这两者是如何联系在一起的。提交按钮似乎根本没有指向脚本。表格有点长，但很简单，所以我只包含了一些。非常感谢，

麦克风

**HTML (片段)**

```
<form action="path/to/process-form.php" method="POST" id="demoForm" class="bbq">

                <div id="fieldWrapper">

                    <span class="step" id="first">

                        <span class="font_normal_07em_black">Manufacturer Information</span><br />

                        <p class="section-desc">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In non est est. Quisque sit amet tellus nulla, 
                        eget molestie velit. Morbi dapibus ornare purus eget ultrices. In et massa ac diam vulputate auctor. 
                        Curabitur ut velit nisi, vel suscipit ligula. Donec non tellus id mauris ornare laoreet sed quis massa. 
                        </p>

                        <br />

                        <div class="clear-line"></div>

                        <br />

                        <label for="manu_name">Manufacturer</label><br />
                        <input class="input_field_12em" name="manu_name" id="manu_name" /><br />

                        <label for="manu_web">Website</label><br />
                        <input class="input_field_12em" name="manu_web" id="manu_web" value="http://" /><br />

                        <label for="manu_email">Email</label><br />
                        <input class="input_field_12em" name="manu_email" id="manu_email" /><br />

                        <label for="manu_phone">Phone</label><br />
                        <input class="input_field_12em" name="manu_phone" id="manu_phone" />
                        <label for="manu_phone_ext">ext</label>
                        <input class="input_field_12em" name="manu_phone_ext" id="manu_phone_ext" /><br />

                        <label for="manu_info">Additional Info</label><br />
                        <textarea class="input_field_12em" name="manu_info" id="manu_info"></textarea><br />

                    </span> 
```

**...继续**

```
 <div id="demoNavigation">                           
                    <input class="navigation_button" id="back" value="Back" type="reset" />
                    <input class="navigation_button" id="next" value="Next" type="submit" />
                </div>

</form> 
```

**JS**

```
$(function(){
                        $("#demoForm").formwizard({ 
                            formPluginEnabled: true,
                            validationEnabled: true,
                            focusFirstInput : true,
                            formOptions :{
                                        type:'POST',
                                success: function(data){$("#status").fadeTo(5000,1,function(){ $(this).html("Product successfully submitted!").fadeTo(5000, 0); })},
                                beforeSubmit: function(data){$("#data").html("data sent to the server: " + $.param(data));},
                                dataType: 'json',
                                resetForm: true
                            },
                            validationOptions : {
                                rules: {

                                <!-- Manufacturer validation -->

                                    manu_name: "required",
                                    manu_email: {
                                        email: true
                                    },

                                },
                                messages: {
                                    required: "This field is required.",
                                    email: "Please enter a valid email address."
                                }
                                }
                            });
                        }); 
```

**PHP** (过程-form.php)

```
<?php

include('dbconnect.php');

/* manufacturer */

$manu_name  = $_POST['manu_name'];
$manu_web   = $_POST['manu_web'];
$manu_email     = $_POST['manu_email'];
$manu_phone     = $_POST['manu_phone'];
$manu_phone_ext = $_POST['manu_phone_ext'];
$manu_info  = $_POST['manu_info'];

$manu_name  = mysqli_real_escape_string($manu_name);
$manu_web   = mysqli_real_escape_string($manu_web);
$manu_email     = mysqli_real_escape_string($manu_email);
$manu_phone     = mysqli_real_escape_string($manu_phone);
$manu_phone_ext = mysqli_real_escape_string($manu_phone_ext);
$manu_info  = mysqli_real_escape_string($manu_info);

$query = "INSERT INTO pd_products
        (manu_name,manu_web,manu_email,manu_phone,manu_phone_ext,manu_info) 
         VALUES ('$manu_name','$manu_web','$manu_email','$manu_phone','$manu_phone_ext','$manu_info')";

if (!mysqli_query($query,$con))
  {
  die('Error: ' . mysqli_error());
  }
mysqli_close($con)

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:59:02.873

确保将 HTML 中的 "form action="path/to/process-form.php"" 更改为表单所在的实际路径。

mysqli_query($query,$con) 应该是带有链接的 mysqli_query($con,$query)，他们查询。另外，为什么不直接使用 mysql_query($query,$con)？

似乎您正在使用大量不必要的代码来做一些简单的事情。

将 HTML 和 PHP 放在一个 .php 文件中（确保 PHP 在大括号中），将表单操作更改为它自己的名称（提交给它自己），然后去掉 javascript。

在此处检查 PHP 表单验证： http: [//php.net/manual/en/filter.filters.validate.php](http://php.net/manual/en/filter.filters.validate.php)

# android - 阻止 android 应用程序关闭

> ID：10115027
> 
> 赞同：1
> 
> 时间：2012-04-11T22:44:26.863
> 
> 标签：android, sms, broadcast

我正在使用 BroadcastReceiver 通过我的应用程序接收 SMS 消息，然后根据消息内容编辑数据库。该应用程序在打开时可以正常工作，但是如果我将其长时间打开并自动关闭，则应用程序将在收到消息时强制关闭（我认为 BroadcastReciever 仍在工作，但该应用程序的其余部分已关闭）。有什么方法可以防止应用程序在收到短信时关闭或恢复它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:01:14.587

如果您希望接收器是持久的，您应该考虑为您的应用程序使用 a[`Service`](http://developer.android.com/reference/android/app/Service.html)而不是标准`Activity`。*仅*当执行返回其正常进程优先级并可以由系统根据需要终止时，才[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle)将存在于标准活动中的 s 视为前台服务。*`onReceive``Activity`*

 *从：[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle)

> **流程生命周期**
> 
> 当前正在执行 BroadcastReceiver 的进程（即当前在其 onReceive(Context, Intent) 方法中运行的代码）被认为是前台进程，并且将由系统保持运行，除非在极端内存压力的情况下。
> 
> 从 onReceive() 返回后，BroadcastReceiver 不再处于活动状态，它的托管过程仅与在其中运行的任何其他应用程序组件一样重要。这一点尤其重要，因为如果该进程仅托管 BroadcastReceiver（用户从未或最近没有与之交互的应用程序的常见情况），那么在从 onReceive() 返回时，系统将认为其进程为空并主动终止以便资源可用于其他更重要的流程。
> 
> 这意味着，对于运行时间较长的操作，您通常将 Service 与 BroadcastReceiver 结合使用，以在整个操作期间保持包含进程的活动状态。

有关创建服务的更多信息：

> **开发人员指南**
> 有关如何创建服务的详细讨论，请阅读[服务开发人员指南](http://developer.android.com/guide/topics/fundamentals/services.html)。*

# c# - 根据类型切换行为的最佳方式

> ID：10115028
> 
> 赞同：6
> 
> 时间：2012-04-11T22:44:28.430
> 
> 标签：c#, polymorphism

> **可能重复：**
> [C# - 有没有比这更好的选择来“打开类型”？](https://stackoverflow.com/questions/298976/c-sharp-is-there-a-better-alternative-than-this-to-switch-on-type)

考虑经典：

```
class Widget { }
class RedWidget : Widget { }
class BlueWidget : Widget { } 
```

在大多数情况下，在我的 UI 中，我可以将所有`Widget`s 视为相同。但是，有一些细微的差异，我需要`if`或`switch`通过。

可能的方法：

**枚举指标**- 由构造函数设置

```
enum WidgetVariety { Red, Blue }

class Widget {
    public WidgetVariety Variety { get; protected set; }
}

class RedWidget : Widget {
    public RedWidget() {
        Variety = Red;
    }
}

// Likewise for BlueWidget...

switch (mywidget.Variety) {
case WidgetVariety.Red:
    // Red specific GUI stuff

case WidgetVariety.Blue:
    // Blue specific GUI stuff
} 
```

**采用`is`**

```
Widget w = ...;
if (w is RedWidget) {
    (RedWidget)w ...
}
else if (w is BlueWidget) {
    (BlueWidget)w ...
} 
```

我使用这个的原因是 1) 大部分代码已经在某种程度上以这种方式编写，但更丑陋。2) 90% 的代码是相同的——基本上 GridView 中的一列需要根据类型进行不同的处理。

你会推荐哪个？（或者有人有更好的解决方案吗？）

* * *

**编辑**我知道我可能会被推荐给访问者模式，但在这种情况下，对于稀疏的、微小的差异来说，这似乎很复杂。

**编辑 2** 因此，我很难整理出的一个特别区别是这列在两种类型之间是不同的。在一种情况下，它检索一个`bool`值，并将其分配给网格单元。在另一种情况下，它获取一个字符串值。

我想在这种情况下，很明显我可以定义：

```
public object virtual GetColumn4Data();

public override GetColumn4Data() { return m_boolval; }

public override GetColumn4Data() { return m_mystring; } 
```

由于使用`object`. 但是，这*是*我在单元格中分配的属性类型，所以这**当然**是有道理的！

今天在办公室太久了，看来...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T22:49:12.443

还有另一种可能。使用虚拟调度：

```
class Widget
{
    public virtual void GuiStuff() { }
} 
class RedWidget : Widget
{
    public override void GuiStuff()
    {
        //... red-specific GUI stuff
        base.GuiStuff();
    }
} 
class BlueWidget : Widget
{
    public override void GuiStuff()
    {
        //... blue-specific GUI stuff
        base.GuiStuff();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T22:49:40.063

[子类型多态](http://en.wikipedia.org/wiki/Subtype_polymorphism)是最好的解决方案，避免这种检查是创建 OO 的主要原因之一。

`Widget`可能有一个方法（可能是抽象的） ，`DoSomething()`然后会覆盖它。`RedWidget``BlueWidget`

另请参阅 Martin Fowler 的[Replace Conditional with Polymorphism](http://martinfowler.com/refactoring/catalog/replaceConditionalWithPolymorphism.html)：

> Seen：您有一个条件，它根据对象的类型选择不同的行为。
> 
> 重构：将条件的每个分支移动到子类中的覆盖方法。使原始方法抽象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:42:12.890

对于编辑#2 下的问题，您可以使用泛型类来使类型在子类之间有所不同，尽管它可能对您有用，也可能不适合您，具体取决于您的设计。它可能会导致其他艰难的设计决策。

粗略的例子：

```
internal abstract class BaseClass
{
   protected object mValue; // could also be defined as a T in BaseClass<T>

   public object GetColumn4Data { get { return mValue; } }
}

// this is a group of classes with varying type
internal abstract class BaseClass<T> : BaseClass
{
   public T GetTypedColumn4Data 
   {
      get { return (T)mValue; } 
      set { mValue = value; }
   }
}

// these are not really necessary if you don't plan to extend them further
// in that case, you would mark BaseClass<T> sealed instead of abstract
internal sealed class BoolSubClass : BaseClass<bool>
{
   // no override necessary so far
}

internal sealed class StringSubClass : BaseClass<string>
{
   // no override necessary so far
} 
```

但是请注意，您无法真正获得在某些属性或方法上具有不同返回类型的单个引用类型。`BaseClass`引用最多只能返回一个通用类型（如）`object`。

# android - Android webview和浏览器在简单段落上崩溃

> ID：10115030
> 
> 赞同：0
> 
> 时间：2012-04-11T22:44:39.117
> 
> 标签：android, html, webview, crash

以下 HTML 使 2.2 模拟器和 Kindle Fire 上的内置 Android 浏览器崩溃。为什么？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Android Crash Test</title>
</head>
<body>
<p>2012</p>
<p>&nbsp;</p>
<p>L A R I D I A N</p>
<p>Cedar Rapids, Iowa</p>
</body></html> 
```

当从我的程序内部加载到一个 webview 对象时，它也会崩溃。

似乎所有的部分都是关键的。如果我用“test”替换“2012”，它将起作用。但是，如果我用另一个数字替换“2012”，它将失败。

更新：在 Android 浏览器中运行时，浏览器会退出并将我发送回启动器。当我将此文档加载到我的应用程序中并在 WebView 中显示时，我得到以下输出：

```
04-12 11:01:52.679: I/DEBUG(31284): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
04-12 11:01:52.679: I/DEBUG(31284): Build fingerprint: 'generic/sdk/generic/:2.2/FRF91/43546:eng/test-keys'
04-12 11:01:52.689: I/DEBUG(31284): pid: 15480, tid: 15523  >>> com.mycompany.myapp <<<
04-12 11:01:52.689: I/DEBUG(31284): signal 11 (SIGSEGV), fault addr 00000021
04-12 11:01:52.699: I/DEBUG(31284):  r0 00000000  r1 00000000  r2 00000002  r3 00000176
04-12 11:01:52.699: I/DEBUG(31284):  r4 00000000  r5 00000001  r6 002bc438  r7 000012d0
04-12 11:01:52.709: I/DEBUG(31284):  r8 46d1bd10  r9 41853f1c  10 00247020  fp 41853f18
04-12 11:01:52.719: I/DEBUG(31284):  ip 46d1b3f0  sp 46d1b320  lr a8446c55  pc a84c8414  cpsr 00000030
04-12 11:01:52.759: D/MainActivity(15480): onReceivedTitle Android Crash Test
04-12 11:01:52.799: I/ActivityManager(59): Displayed activity com.mycompany.myapp/.MainActivity: 2790 ms (total 2790 ms)
04-12 11:01:52.839: D/MainActivity(15480): onProgressChanged = 50
04-12 11:01:53.649: I/DEBUG(31284):          #00  pc 001c8414  /system/lib/libwebcore.so
04-12 11:01:53.659: I/DEBUG(31284):          #01  pc 00146c50  /system/lib/libwebcore.so
04-12 11:01:53.719: I/DEBUG(31284):          #02  pc 00147404  /system/lib/libwebcore.so
04-12 11:01:53.749: I/DEBUG(31284):          #03  pc 00147c6c  /system/lib/libwebcore.so
04-12 11:01:53.779: I/DEBUG(31284):          #04  pc 001410ca  /system/lib/libwebcore.so
04-12 11:01:53.789: I/DEBUG(31284):          #05  pc 001414a4  /system/lib/libwebcore.so
04-12 11:01:53.819: I/DEBUG(31284):          #06  pc 00132f1a  /system/lib/libwebcore.so
04-12 11:01:53.789: I/DEBUG(31284):          #05  pc 001414a4  /system/lib/libwebcore.so
04-12 11:01:53.819: I/DEBUG(31284):          #06  pc 00132f1a  /system/lib/libwebcore.so
04-12 11:01:53.819: I/DEBUG(31284):          #07  pc 00053446  /system/lib/libwebcore.so
04-12 11:01:53.839: I/DEBUG(31284):          #08  pc 00077d72  /system/lib/libwebcore.so
04-12 11:01:53.839: I/DEBUG(31284):          #09  pc 000783e4  /system/lib/libwebcore.so
04-12 11:01:53.869: I/DEBUG(31284):          #10  pc 001bb56c  /system/lib/libwebcore.so
04-12 11:01:53.869: I/DEBUG(31284):          #11  pc 00054dd2  /system/lib/libwebcore.so
04-12 11:01:53.879: I/DEBUG(31284):          #12  pc 0005668e  /system/lib/libwebcore.so
04-12 11:01:53.909: I/DEBUG(31284):          #15  pc 00206782  /system/lib/libwebcore.so
04-12 11:01:53.909: I/DEBUG(31284):          #16  pc 00042a64  /system/lib/libwebcore.so
04-12 11:01:53.929: I/DEBUG(31284):          #17  pc 00042c46  /system/lib/libwebcore.so
04-12 11:01:53.929: I/DEBUG(31284):          #18  pc 001b450e  /system/lib/libwebcore.so
04-12 11:01:53.949: I/DEBUG(31284):          #19  pc 000551ee  /system/lib/libwebcore.so
04-12 11:01:53.969: I/DEBUG(31284):          #20  pc 0005520e  /system/lib/libwebcore.so
04-12 11:01:53.969: I/DEBUG(31284):          #21  pc 0020954a  /system/lib/libwebcore.so
04-12 11:01:53.969: I/DEBUG(31284):          #22  pc 000565b2  /system/lib/libwebcore.so
04-12 11:01:53.999: I/DEBUG(31284):          #23  pc 0020ae0c  /system/lib/libwebcore.so
04-12 11:01:53.999: I/DEBUG(31284):          #24  pc 0020b318  /system/lib/libwebcore.so
04-12 11:01:54.019: I/DEBUG(31284):          #25  pc 0020b37a  /system/lib/libwebcore.so
04-12 11:01:54.019: I/DEBUG(31284):          #26  pc 0020b4c4  /system/lib/libwebcore.so
04-12 11:01:54.038: I/DEBUG(31284):          #27  pc 0020ad18  /system/lib/libwebcore.so
04-12 11:01:54.049: I/DEBUG(31284):          #28  pc 0020ac26  /system/lib/libwebcore.so
04-12 11:01:54.058: I/DEBUG(31284):          #29  pc 0008d93a  /system/lib/libwebcore.so
04-12 11:01:54.069: I/DEBUG(31284):          #30  pc 0008d9e4  /system/lib/libwebcore.so
04-12 11:01:54.098: I/DEBUG(31284):          #31  pc 001378fa  /system/lib/libwebcore.so
04-12 11:01:54.098: I/DEBUG(31284): code around pc:
04-12 11:01:54.118: I/DEBUG(31284): a84c83f4 6801b510 680b31c8 bd104798 20006943 
04-12 11:01:54.118: I/DEBUG(31284): a84c8404 695be001 2b003001 4770d1fb 1c82b510 
04-12 11:01:54.118: I/DEBUG(31284): a84c8414 065a7fd3 6a43d502 d1112b00 42882300 
04-12 11:01:54.118: I/DEBUG(31284): a84c8424 6983d00e d10b2b00 d0092800 2a006982 
04-12 11:01:54.118: I/DEBUG(31284): a84c8434 2900d108 68c4d002 d003428c e7f368c0 
04-12 11:01:54.118: I/DEBUG(31284): code around lr:
04-12 11:01:54.118: I/DEBUG(31284): a8446c34 00000c94 00001254 00000175 fff22041 
04-12 11:01:54.128: I/DEBUG(31284): a8446c44 d05e2d00 1c204f6a 21009701 fbdef081 
04-12 11:01:54.128: I/DEBUG(31284): a8446c54 d02f2800 7fcc1c81 d40006a2 9c00e0bc 
04-12 11:01:54.138: I/DEBUG(31284): a8446c64 6ac39f15 681259e2 d0234293 68946899 
04-12 11:01:54.138: I/DEBUG(31284): a8446c74 d10342a1 68d268df d01b4297 9f149c00 
04-12 11:01:54.138: I/DEBUG(31284): stack:
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2e0  00000000  
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2e4  00000000  
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2e8  00000000  
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2ec  002bc3a4  [heap]
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2f0  00000000  
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2f4  00000000  
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2f8  00000000  
04-12 11:01:54.138: I/DEBUG(31284):     46d1b2fc  00000001  
04-12 11:01:54.148: I/DEBUG(31284):     46d1b300  00000020  
04-12 11:01:54.148: I/DEBUG(31284):     46d1b304  00000000  
04-12 11:01:54.198: I/DEBUG(31284):     46d1b308  a8670849  /system/lib/libwebcore.so
04-12 11:01:54.198: I/DEBUG(31284):     46d1b30c  fffab914  
04-12 11:01:54.228: I/DEBUG(31284):     46d1b310  46d1b384  
04-12 11:01:54.228: I/DEBUG(31284):     46d1b314  00000000  
04-12 11:01:54.228: I/DEBUG(31284):     46d1b318  df002777  
04-12 11:01:54.228: I/DEBUG(31284):     46d1b31c  e3a070ad  
04-12 11:01:54.228: I/DEBUG(31284): #00 46d1b320  00000000  
04-12 11:01:54.228: I/DEBUG(31284):     46d1b324  a8446c55  /system/lib/libwebcore.so
04-12 11:01:54.228: I/DEBUG(31284): #01 46d1b328  a8742090  /system/lib/libwebcore.so
04-12 11:01:54.228: I/DEBUG(31284):     46d1b32c  000012d0  
04-12 11:01:54.228: I/DEBUG(31284):     46d1b330  00000000  
04-12 11:01:54.228: I/DEBUG(31284):     46d1b334  46d1b72c  
04-12 11:01:54.238: I/DEBUG(31284):     46d1b338  00000000  
04-12 11:01:54.238: I/DEBUG(31284):     46d1b33c  00000000  
04-12 11:01:54.238: I/DEBUG(31284):     46d1b340  00000001  
04-12 11:01:54.238: I/DEBUG(31284):     46d1b344  00000000  
04-12 11:01:54.238: I/DEBUG(31284):     46d1b348  002c4320  [heap]
04-12 11:01:54.259: I/DEBUG(31284):     46d1b34c  002875d4  [heap]
04-12 11:01:54.259: I/DEBUG(31284):     46d1b350  00000001  
04-12 11:01:54.259: I/DEBUG(31284):     46d1b354  00000000  
04-12 11:01:54.259: I/DEBUG(31284):     46d1b358  00000000  
04-12 11:01:54.259: I/DEBUG(31284):     46d1b35c  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b360  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b364  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b368  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b36c  00000001  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b370  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b374  0027c0c8  [heap]
04-12 11:01:54.278: I/DEBUG(31284):     46d1b378  00001254  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b37c  00000c94  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b380  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b384  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b388  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b38c  00000000  
04-12 11:01:54.278: I/DEBUG(31284):     46d1b390  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b394  00000004  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b398  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b39c  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3a0  0000000b  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3a4  00000001  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3a8  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3ac  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3b0  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3b4  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3b8  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3bc  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3c0  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3c4  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3c8  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3cc  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3cc  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3d0  002bc44c  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3d4  002bc44c  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3d8  002bc44c  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3dc  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3e4  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3e8  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3ec  00000000  
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3f0  002bc3a4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3f4  002bc3a8  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3f8  002bc3ac  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b3fc  002bc3b0  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b400  002bc3b4  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b404  002bc3b8  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b408  002bc3bc  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b40c  002bc3c0  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b410  002bc44c  [heap]
04-12 11:01:54.288: I/DEBUG(31284):     46d1b414  002bc458  [heap]
04-12 11:01:54.338: I/DEBUG(31284):     46d1b418  002bc468  [heap]
04-12 11:01:54.338: I/DEBUG(31284):     46d1b41c  00000000  
04-12 11:01:54.338: I/DEBUG(31284):     46d1b420  00000000  
04-12 11:01:54.338: I/DEBUG(31284):     46d1b424  00000000  
04-12 11:01:54.338: I/DEBUG(31284):     46d1b428  00000000  
04-12 11:01:54.338: I/DEBUG(31284):     46d1b42c  00000000  
04-12 11:01:54.338: I/DEBUG(31284):     46d1b430  002bc3a6  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b434  002bc3aa  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b438  002bc3ae  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b43c  002bc3b2  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b440  002bc3b6  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b444  002bc3ba  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b448  002bc3be  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b44c  002bc3c2  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b450  002bc456  [heap]
04-12 11:01:54.348: I/DEBUG(31284):     46d1b454  002bc466  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b458  002bc470  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b45c  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b460  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b464  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b468  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b46c  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b470  002bc3a4  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b474  002bc3a8  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b478  002bc3ac  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b47c  002bc3b0  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b480  002bc3b4  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b484  002bc3b8  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b488  002bc3bc  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b48c  002bc3c0  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b490  002bc44c  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b494  002bc458  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b498  002bc468  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b49c  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4a0  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4a4  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4a4  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4a8  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4b0  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4b4  0000000a  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4b8  0000000a  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4bc  0000000f  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4c0  00000005  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4c4  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4c8  a8670360  /system/lib/libwebcore.so
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4cc  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4d0  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4d4  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4d8  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4dc  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4e0  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4e4  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4e8  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4ec  46d1b4cc  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4f0  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4f4  01000020  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4f8  00010100  [heap]
04-12 11:01:54.378: I/DEBUG(31284):     46d1b4fc  a830c7af  /system/lib/libwebcore.so
04-12 11:01:54.378: I/DEBUG(31284):     46d1b500  46d1b50c  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b504  46d1b654  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b508  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b50c  00000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b510  41000000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b514  41800000  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b518  46d1b654  
04-12 11:01:54.378: I/DEBUG(31284):     46d1b51c  0027c0c8  [heap]
04-12 11:01:54.429: I/DEBUG(31284):     46d1b520  002c4320  [heap]
04-12 11:01:54.429: I/DEBUG(31284):     46d1b524  002bbd88  [heap]
04-12 11:01:54.429: I/DEBUG(31284):     46d1b528  46d1b7d4  
04-12 11:01:54.429: I/DEBUG(31284):     46d1b52c  a8447409  /system/lib/libwebcore.so
04-12 11:01:57.099: D/Zygote(33): Process 15480 terminated by signal (11)
04-12 11:01:57.118: I/ActivityManager(59): Process com.mycompany.myapp (pid 15480) has died.
04-12 11:01:57.148: I/WindowManager(59): WIN DEATH: Window{45103a20 com.mycompany.myapp/com.mycompany.myapp.MainActivity paused=false}
04-12 11:01:57.248: I/UsageStats(59): Unexpected resume of com.android.launcher while already resumed in com.mycompany.myapp
04-12 11:01:57.288: W/InputManagerService(59): Got RemoteException sending setActive(false) notification to pid 15480 uid 10036 
```

# javascript - 使用 http 请求传递日期时间

> ID：10115033
> 
> 赞同：0
> 
> 时间：2012-04-11T22:44:44.540
> 
> 标签：javascript, mysql, datetime, date

我需要使用 GET 方法将日期时间（以 2012-09-23 21:00:00 格式由下拉框生成并使用 javascript（即客户端）转换为该格式）传递给 php 文件，然后获取 mysql 记录按那个时间排序。

度过这个日期的最佳方式是什么？我考虑的选项是：

*   为每条信息制作单独的获取参数*（例如 ?startYear=2012&startMonth=09&startDay=23&startHour=....）* 这可能有效，但如果我添加更多不同的过滤器会怎样。那里会很忙。或者这不是问题？
*   传递时间戳。我认为这是最好的选择。但是，当我将日期转换为时间戳时，它给了我不正确的结果。该功能将在下面。
*   通过使用 encodeURIComponent 预处理传递 2012-09-23 21:00:00 格式

有什么建议么？

* * *

日期到时间戳的转换（与第 2 点相关）：

```
function getTimestamp(str) {
  var d = str.match(/\d+/g); // extract date parts
  return +new Date(d[0], d[1] - 1, d[2], d[3], d[4], d[5]); // build Date object
} 
```

# spring-mvc - 从 Sitemesh 迁移到 Apache Tiles

> ID：10115034
> 
> 赞同：1
> 
> 时间：2012-04-11T22:44:46.410
> 
> 标签：spring-mvc, tiles, spring-webflow, tiles2, apache-tiles

我正在使用 spring-mvc 和 spring-webflow 开发自己的项目。在阅读了一些关于 spring webflow 和 ajax 的文章后，我了解到更好的选择是使用 Apache Tiles 来呈现视图。

在 Sitemesh 中，我使用了一个标签调用 head ()。模板中使用的该标签允许在生成的 HTML 上呈现页面的整个 head 属性。

有没有办法在 Apache Tiles 中实现这一点？根据我的阅读，我认为我必须执行以下操作：

两个 jps，一个带有页面主体，另一个带有头部定义。这是一个包含模板、页面和图块定义的示例，以便更好地理解。

瓷砖定义

```
<tiles-definitions>
  <definition name="base" template="/WEB-INF/view/templates/tileslayout.jsp">
    <put-attribute name="title" value="Held - main page"/>
    <put-attribute name="body" value=""/>
    <put-attribute name="head" value=""/>
  </definition>

  <definition name="company.edit" extends="base">
    <put-attribute name="head" value="/WEB-INF/view/company/editHeader.jsp"></put-attribute>
    <put-attribute name="body" value="/WEB-INF/view/company/edit.jsp"></put-attribute>
  </definition>

</tiles-definitions> 
```

模板：

```
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %> 
<html>
<head>
 -- css and scripts --
 <tiles:insertAttribute name="head"  ignore="true"/>
<!--  <decorator:head /> -->
</head>

<body>

--- menu definition ---

<div class="container-fluid">
    <tiles:insertAttribute name="body"/>
<!--   <decorator:body/> -->
</div>
<hr/>      
<footer>
    -----
</footer>

</body>
</html> 
```

公司页面

```
<div class="container">
-- the page html code
</div> 
```

总公司页面

```
<meta name="menu" content="company" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
.error {
    color: red;
}
</style>
<script type="text/javascript">
    $(document).ready(function() {
        $('#name').focus();
    });
</script> 
```

有时头部可能更复杂。

生成的 html 没问题。但我不喜欢为应该简单的东西定义两个 jps。

我做错了什么？

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:01:26.430

你所拥有的是正确的。Sitemesh 使用的装饰模式可以解决这个问题，而 Tiles 使用的组合则不能。但是，我不会说这很令人担忧。

组合是概念上更简单的策略，并且资源密集度较低。很高兴您正在学习 Tiles，这两个系统不是排他性的，可以是互补的。

瓷砖是将您的页面分解为瓷砖。您所拥有的与当前允许的瓷砖一样好。您已经发现在头部有重新出现的脚本，因此已将其拼贴在一起。尽管它不像您建议的那样最小，但如果您将所有站点功能放入单个脚本文件中，加载将需要很短的时间，但这样做之后不会因为缓存而产生开销。

如果安全是一个问题（即您的应用程序中有不同的安全级别，并且不想通过公开他们的 JS 来放弃高级用户甚至能够做到的事情），那么您可以让瓦片属性使用 EL 来定义哪些瓦片引入。为此，请使用 2.2.2 版图块并使用图块侦听器“org.apache.tiles.extras.complete.CompleteAutoloadTilesListener”，这将允许在图块定义中使用通配符、EL、OGNL 和 MVEL。下面将展示 wldcards 如何大大减少定义的大小：

您的第二个定义“company.edit”如果您有多个公司，并且有多个动词，那么您可以编写以下定义：

```
<definition name="*.*" extends="base">
  <put-attribute name="head" value="/WEB-INF/view/{1}/{2}Header.jsp"></put-attribute>
  <put-attribute name="body" value="/WEB-INF/view/{1}/{2}.jsp"></put-attribute>
</definition> 
```

现在您可以简单地在 /WEB-INF/view/ 下创建一个又一个公司，以及 editHeader、viewHeader 等。

如果您升级到 2.2.2 并使用“org.apache.tiles.extras.complete.CompleteAutoloadTilesListener”，因为您需要编写多种解释表达式的方法：

```
<definition name="WILDCARD:*.*" extends="base">
  <put-attribute name="head" value="/WEB-INF/view/{1}/{2}Header.jsp"></put-attribute>
  <put-attribute name="body" value="/WEB-INF/view/{1}/{2}.jsp"></put-attribute>
</definition> 
```

如果您决定决定将特定安全级别的所有 JS 放入一个磁贴中，您可以通过以下方式获得适当的磁贴：

```
<put-attribute name="head" value="/WEB-INF/view/{1}/OGNL:'session.securityLevel'+'.jsp'"></put-attribute> 
```

OGNL 是默认的 Struts2 表达式语言，在您的情况下，您将使用适当的 EL 或 MVEL。

# hibernate - 服务注入控制器（Spring MVC）

> ID：10115037
> 
> 赞同：0
> 
> 时间：2012-04-11T22:44:57.253
> 
> 标签：hibernate, jsp, spring-mvc

嗨，我有一个 Spring Web 应用程序，我已经将它构建到控制器阶段，我可以将我的 Daos 注入到我的服务中。现在，当我想将我的服务注入到我的控制器中时，我得到了一个依赖于 Dao 的错误，并进一步降低了 sessionFactory。我不想再次注入这些，因为这最终会导致我最终创建一个数据源，但我有我的 Daos 用于数据访问，他们已经知道 sessionFactory。我在这里错过了什么吗？

这是示例代码片段：

我的服务：

```
@Service("productService")
@Transactional
public class ProductServiceImpl implements ProductService {
    private ProductDao productDao;

    @Autowired
    public void setDao(ProductDao productDao) {
        this.productDao = productDao;
    }
} 
```

我的控制器

```
@Controller
@WebServlet(name="controllerServlet", loadOnStartup=/*...*/, urlPatterns={/*...*/})
public class ControllerServlet extends HttpServlet {
    boolean isUserLogedIn = false;

    @Autowired
    private ProductService productService;

    public void setProductService(ProductService productService){
        this.productService = productService;
    }
} 
```

堆栈跟踪：

```
 javax.servlet.ServletException: Servlet.init() for servlet mvcServlet threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
         org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
  org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:            565)
     org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
          java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
          java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        java.lang.Thread.run(Thread.java:662)
            root cause

            org.springframework.beans.factory.BeanCreationException: Error creating                bean with name 'controllerServlet': Injection of autowired dependencies failed; nested   exception is org.springframework.beans.factory.BeanCreationException: Could not autowire   field: private com.phumzile.acme.services.ProductService  com.phumzile.acme.client.web.controller.ControllerServlet.productService; nested exception   is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of   type [com.phumzile.acme.services.ProductService] found for dependency: expected at least 1   bean which qualifies as autowire candidate for this dependency. Dependency annotations:   {@org.springframework.beans.factory.annotation.Autowired(required=true)}
org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.p ostProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) 
```

Servlet 上下文：

```
<context:component-scan base-package="com.phumzile.acme.client" />
<!-- Enables the Spring MVC @Controller programming model -->
<mvc:annotation-driven />
</beans> 
```

应用配置：

```
<bean id="propertyConfigurer"
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="locations">
<list>
<value>configuration.properties</value>
</list>
</property>
</bean>
    <context:annotation-config/> 
<context:component-scan base-package="com.phumzile.acme" />
<import resource="db-config.xml" />
    </beans> 
```

数据库配置

```
 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close">
    <property name="idleConnectionTestPeriod" value="10800"/>
     <property name="maxIdleTime" value="21600"/>

    <property name="driverClass">
        <value>${jdbc.driver.className}</value>
    </property>
    <property name="jdbcUrl">
        <value>${jdbc.url}</value>
    </property>
    <property name="user">
        <value>${jdbc.username}</value>
    </property>
    <property name="password">
        <value>${jdbc.password}</value>
    </property>

        </bean>
      <bean id="sessionFactory"

          class="org.springframework.orm.hibernate3.a
           nnotation.AnnotationSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
      <property name="annotatedClasses">
        <list>
        <!-- Entities -->
            <value>com.phumzile.acme.model.User</value>
            <value>com.phumzile.acme.model.Person</value>
            <value>com.phumzile.acme.model.Company</value>
            <value>com.phumzile.acme.model.Product</value>
            <value>com.phumzile.acme.model.Game</value>
            <value>com.phumzile.acme.model.Book</value>
        <!-- Entities -->

        </list>
    </property>
    <property name="packagesToScan" value="com.phumzile.acme" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${jdbc.hibernate.dialect
      </prop>
            <prop key="hibernate.hbm2ddl.auto">validate</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory">
        <ref bean="sessionFactory" />
    </property>

</bean>
<tx:annotation-driven />
    </beans> 
```

配置.属性

```
 jdbc.driver.className=com.mysql.jdbc.Driver
    jdbc.url=jdbc:mysql://localhost:3306/mydb
    jdbc.username=root
    jdbc.password=root
    jdbc.hibernate.dialect=org.hibernate.dialect.MySQLDialect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:23:32.310

您的 applicationContext.xml 中的组件扫描可能过于广泛。您可能正在双重扫描您的控制器。尝试制作它`<context:component-scan base-package="com.phumzile.acme.services,com.phumzile.acme.repository" />`。（假设您的 daos 在存储库包中的某个位置。）

# meteor - 您如何保护客户端 MongoDB API？

> ID：10115042
> 
> 赞同：31
> 
> 时间：2012-04-11T22:45:22.217
> 
> 标签：meteor

我不希望我的所有用户都能够插入/销毁数据。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-12T01:43:26.907

虽然还没有记录的方法可以做到这一点，但这里有一些代码应该可以满足您的需求：

```
Foo = new Meteor.Collection("foo");
...
if (Meteor.is_server) {
   Meteor.startup(function () {
       Meteor.default_server.method_handlers['/foo/insert'] = function () {};
       Meteor.default_server.method_handlers['/foo/update'] = function () {};
       Meteor.default_server.method_handlers['/foo/remove'] = function () {};
   });
} 
```

这将禁用默认的插入/更新/删除方法。客户端可以尝试插入到数据库中，但是服务器什么也不做，当服务器响应时客户端会注意到并删除本地创建的项目。

插入/更新/删除仍将在服务器上工作。您需要使用在服务器上运行的 Meteor.methods 方法来完成任何数据库写入。

当身份验证分支登陆时，所有这些都会改变。一旦发生这种情况，您将能够提供验证器来检查和授权服务器上的数据库写入。这里有更多细节： http://news.ycombinator.com/item?id= [3825063](http://news.ycombinator.com/item?id=3825063)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-12T00:27:11.987

**[更新]** 现在有一个官方的和记录的身份验证包，它提供了不同的解决方案来保护集合。

在 CRUD 级别上：

> [服务器] collection.allow(options) 和 collection.deny(options)。限制此集合的默认写入方法。一旦在集合上调用其中任何一个，该集合上的所有写入方法都会受到限制，而不管不安全的包如何。

并且还`insecure`可以从客户端删除完整的写访问权限。

来源：[开始使用 Auth](https://github.com/meteor/meteor/wiki/Getting-Started-with-Auth)（感谢@dan-dascalescu）

* * *

[旧答案]

显然，正在研究 Auth Package(?) 应该避免任何用户像现在一样完全控制数据库。还有人建议通过定义您自己的突变（方法）并在他们尝试执行未经授权的操作时使它们失败来提出现有的解决方案（解决方法）。我没有得到更好的结果，但我认为这通常是必要的，因为我怀疑 Auth 包会让你在行级别上实现通常的身份验证逻辑，但可能只在 CRUD 方法上。得看看开发者怎么说。

[编辑] 发现一些似乎证实了我的想法的东西：

> 目前，客户端被授予对集合的完全写入权限。他们可以执行任意 Mongo 更新命令。一旦我们建立了身份验证，您将能够限制客户端对插入、更新和删除的直接访问。我们也在考虑验证器和其他类似 ORM 的功能。

这个答案的来源：

[在客户端访问数据库，就像在服务器端使用流星一样](https://stackoverflow.com/questions/10110743/accessing-to-db-at-client-side-as-in-server-side-with-meteor)

[https://stackoverflow.com/questions/10100813/data-validation-and-security-in-meteor/10101516#10101516](https://stackoverflow.com/questions/10100813/data-validation-and-security-in-meteor/10101516#10101516)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-25T16:45:54.053

更简洁的方式：

```
_.each(['collection1', 'collection2'], function(collection){
    _.each(['insert','update', 'remove'], function(method){
      Meteor.default_server.method_handlers['/' + collection + '/' + method] = function(){}
    });
}); 
```

或者让它更地道：

扩展流星：

```
_.extend(Meteor.Collection.prototype, {
  remove_client_access: function(methods){
    var self = this;
    if(!methods) methods = ['insert','update','remove'];
    if(typeof methods === 'String') methods = [methods];
    _.each(methods, function(method){
      Meteor.default_server.method_handlers[self._prefix + method] = function(){}
    });
  }
}); 
```

调用更简单：

```
List.remove_client_access() // restrict all
List.remove_client_access('remove') //restrict one
List.remove_client_access(['remove','update']) //restrict more than one 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T02:56:33.140

我是 Meteor 的新手，但到目前为止我遇到的是这两点

1.  `find`您可以通过向服务器端命令中的命令添加参数来限制客户端可以访问数据库的内容`publish`。然后，当客户端调用时`Collection.find({})`，返回的结果与服务器端的结果相对应，例如`Collection.find({user: this.userId})`（另请参阅[发布 Meteor.users 的某些信息以及 Meteor.user](https://stackoverflow.com/questions/13151879/publish-certain-information-for-meteor-users-and-more-information-for-meteor-use)和[http://docs.meteor 的更多信息。 com/#meteor_publish](http://docs.meteor.com/#meteor_publish) )

2.  内置的一件事（我有流星 0.5.9）是客户端只能`update`通过 id 进行项目，而不是使用选择器。如果有不符合要求的尝试，则会将错误记录到客户端的控制台。`403: "Not permitted. Untrusted code may only update documents by ID."`（请参阅[理解“不允许。不受信任的代码只能按 ID 更新文档。”Meteor 错误](https://stackoverflow.com/questions/15464507/understanding-not-permitted-untrusted-code-may-only-update-documents-by-id-m)）。

鉴于第 2 点，您需要`Meteor.methods`在服务器端使用`Meteor.call`.

# c++ - 模板成员函数指针

> ID：10115048
> 
> 赞同：0
> 
> 时间：2012-04-11T22:46:15.400
> 
> 标签：c++, templates, member-function-pointers

我目前有一个问题，VS2010 唠叨在“Nuke”的构造函数中使用的“TFunctionPointer”作为数据成员是未定义的。有人可以向我解释这是为什么吗？很感谢任何形式的帮助。

```
template<typename T>
typedef void (T::* TFunctionPointer)();

class Nuke
{
public:
    Nuke( TFunctionPointer pFunction );
    virtual ~Nuke();

private:
    TFunctionPointer m_pFunction;

}; 
```

// 编辑

我想要做的是允许在销毁 Nuke 对象时存储和调用任何类型的类的函数指针。RAII 的一个转折点。但我想这是不可能的。谢谢你们的帮助。

// 编辑

显然 Boost::shared_ptr 是我正在寻找的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T22:47:51.170

模板类型定义在 C++ 中是不合法的。

您可以做的（在“旧”和“新”C++ 中）是这样的：

```
template <typename T>
struct TFunctionPointer
{
    typedef void (T::*Type)();
};

class Nuke
{
public:
    Nuke( TFunctionPointer<Nuke>::Type pFunction );
    virtual ~Nuke();

private:
    TFunctionPointer<Nuke>::Type m_pFunction;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:48:47.267

C++ 不支持模板类型定义，因此`template<typename T> typedef`是非法的。

如果您可以使用 C++11，您也许可以使用模板别名。我不太确定成员函数指针是否可以做到这一点并且不能保证语法正确，但我希望它类似于以下内容：

```
template <typename T>
using TFunctionPointer = void(T::*)(); 
```

当然 VS2010 可能无论如何都不支持。

无论如何，您的`Nuke`类没有为 提供类型`TFunctionPointer`，因此即使该 typedef 合法，您也试图传递模板而不是具体类型，这是不可能的。

您可以将函数指针包装成一个类型并使用正确的实例化：

```
template<typename T> struct FunctionPointer { typedef void (T::*Type)(); };
class Nuke {
public:
    Nuke(FunctionPointer<Nuke>::Type pFunction);
    virtual ~Nuke();
private:
    FunctionPointer<Nuke>::Type m_pFunction;

}; 
```

# java - 提取和执行任意 Java 字节码序列

> ID：10115051
> 
> 赞同：0
> 
> 时间：2012-04-11T22:46:37.230
> 
> 标签：java, assembly, bytecode, bytecode-manipulation, bcel

给定 Java Class A 的 .class 文件，有没有办法（例如使用 BCEL、ASM 等）提取给定的字节码序列（假设它是一个基本块），将其放在单独的位置，然后再执行那个字节码序列？

示例：源代码具有以下行 ... a += b; b += 21; . .

我只能访问字节码表示。我想提取这些字节码并将它们视为黑匣子。在 A 类的指令中，而不是源代码行 'a += b;' 我希望它指向这个外部黑盒 X，它包含适当的缺失字节码序列。我想向黑盒提供堆栈帧上的所有必要变量（例如，a、b 的当前值，也许是要在黑盒 X 中使用的方法参数......），然后，在执行字节码序列后，黑匣子会将控制权连同新更新的帧变量一起返回给原始 A 类...

感谢您的任何想法。

编辑：

正如下面所建议的，最合理的黑盒应该是存根类文件中的存根方法。那么问题就变成了，我如何最合理地从这个指令序列创建这个格式良好的存根类和方法，以及如何将控制权从原始 A 类转移到。理想情况下，这将在编译时“离线”完成时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:50:57.093

在符合 JVM 规范的 Java 实现上执行字节码的唯一方法是将字节码放入（格式良好的）类文件中并加载该文件。（这意味着字节码需要包装在类文件的“方法”中，因为这是字节码唯一可以去的地方。）

此外，字节码必须遵守字节码验证器强制执行的所有安全规则。这将限制您执行任意序列的能力。

如果您只是想弄清楚字节码序列的作用，那么您最好手动执行它，或者使用某种字节码模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:46:16.263

棘手的部分是如何识别指令序列。我可以考虑在序列的开头和结尾通过行号或一些标记方法调用来做到这一点。

当你把它整理好后，你可以使用 ASM 的分析包来计算局部变量和堆栈槽的类型，并将它们作为某些方法的参数公开，你可以在其中复制字节码序列。

我[来自 AOSD'07 的文章](http://asm.ow2.org/current/asm-transformations.pdf)应该可以为您提供一个使用 ASM 的良好起点。Replace Method Body 和 Inline Method 部分描述的转换与您可能需要使用的转换非常相似。

# php - 在 PHP 中如何获取包含 PREPARE 和 EXECUTE 的 SQL 查询返回的行？

> ID：10115052
> 
> 赞同：2
> 
> 时间：2012-04-11T22:46:37.887
> 
> 标签：php, mysql, sql, database

如何使用 PHP获取[此 SQL 查询返回的行：](https://stackoverflow.com/questions/211329/quick-selection-of-a-random-row-from-a-large-table-in-mysql/213242#213242)

```
SET @r := (SELECT ROUND(RAND() * (SELECT COUNT(*) FROM mytable)));
SET @sql := CONCAT('SELECT * FROM mytable LIMIT ', @r, ', 1');
PREPARE stmt1 FROM @sql;
EXECUTE stmt1; 
```

设置等于上述值`$query`然后照常执行**不会**返回任何结果。`mysql_query($query)`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:19:37.367

这样做，看看它是否有效

```
mysql_query('SET @r := (SELECT ROUND(RAND() * (SELECT COUNT(*) FROM mytable)));');
mysql_query('SET @sql := CONCAT('SELECT * FROM mytable LIMIT ', @r, ', 1');');
$resource = mysql_query('PREPARE stmt1 FROM @sql;EXECUTE stmt1;'); 
```

不要忘记在第二条指令中转义 sql**

# iphone - 使用 Git 恢复到 Xcode 4 中的最后一次提交

> ID：10115053
> 
> 赞同：1
> 
> 时间：2012-04-11T22:46:42.150
> 
> 标签：iphone, git

我们刚刚从 SVN 迁移到 Git。在试图清理一些未使用的文件。我在删除一个我认为我们没有使用的文件夹之前保存了。我没有把它推到原点。我意识到我们毕竟使用了文件夹中的一个文件，并且想恢复到我上次的提交。这是在我自己的主分支上。我在 Xcode 中找不到这样做的方法。我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T23:02:19.297

您可以在此处查看 rsanchezsaez 的答案：[Xcode 4 git integration](https://stackoverflow.com/questions/5302367/xcode-4-git-integration)

> **Xcode 4 不允许您在用户界面中检出旧提交，除非您为该提交创建了新分支。**不过，您可以从命令行执行此操作。为此，请使用项目文件夹中的以下命令
> 
> **$ git log --format=oneline**
> 
> 获取您想要去的提交的哈希码，然后使用：
> 
> **$ git checkout 所需的哈希码**
> 
> 签出该特定版本。在那里，您可以进行测试、更改，并可能创建一个新分支。如果您在未创建新分支的情况下进行提交，您将丢失当前分支中较新的提交。如果您想在对旧版本执行一些测试后返回最新提交，请使用：
> 
> **$ git结账大师**
> 
> 再次注意，如果您在不创建新分支的情况下从旧代码版本进行新提交，这将不起作用，因为当前分支中的新提交会被取消引用。

另外，请在询问之前考虑搜索 SO。许多问题已经被问及并得到了回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:05:52.597

从命令行运行一个名为的程序`gitk`- 这将允许您可视化您当前拥有的提交。找到您想要的提交的 ID（例如上一个提交）并在您的分支上执行以下操作：

```
git tag JustInCase
git reset --hard <commit ID> 
```

Refresh `gitk`，如果您对结果满意，请使用以下命令删除标签：

```
git tag -d JustInCase 
```

如果您对此不满意，请执行以下操作：

```
git reset --hard JustInCase
git tag -d JustInCase 
```

为您形象化：

1) 开始

![在此处输入图像描述](../Images/947be4c534b27d39aa94aff8b9b2826b.png)

2）在标记并将分支重置为上一个提交之后。

![在此处输入图像描述](../Images/d7b2af0bbadd1fe05bcca201409f2882.png)

3) 删除标签并`Reload`在`gitk`.

![在此处输入图像描述](../Images/c799a6dbea4e302b841d87cd2f864a50.png)

# haskell - 对 Haskell 中的自定义数据类型感到困惑

> ID：10115057
> 
> 赞同：6
> 
> 时间：2012-04-11T22:47:06.037
> 
> 标签：haskell, types

**任务：**我正在尝试创建一个自定义数据类型并让它能够打印到控制台。我还希望能够使用 Haskell 的自然排序对其进行排序。

**问题：**现在写，我无法编译这段代码。它抛出以下错误：`No instance for (Show Person) arising from a use of 'print'`.

**到目前为止我所拥有的：**

```
-- Omitted working selection-sort function

selection_sort_ord :: (Ord a) => [a] -> [a]
selection_sort_ord xs = selection_sort (<) xs

data Person = Person { 
    first_name :: String, 
    last_name :: String,   
    age :: Int }            

main :: IO ()
main = print $ print_person (Person "Paul" "Bouchon" 21) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T22:50:10.437

您需要一个`Show`实例来将类型转换为可打印的表示形式 (a `String`)。获得一个的最简单方法是添加

```
deriving Show 
```

到类型定义。

```
data Person = Person { 
    first_name :: String, 
    last_name :: String,   
    age :: Int }
      deriving (Eq, Ord, Show) 
```

获取最常用的实例。

如果您想要一个不同的`Ord`实例，如评论中所建议的那样，而不是派生该实例（继续派生`Eq`，`Show`除非您希望这些实例具有不同的行为），请提供一个类似的实例

```
instance Ord Person where
    compare p1 p2 = case compare (age p1) (age p2) of
                      EQ -> case compare (last_name p1) (last_name p2) of
                              EQ -> compare (first_name p1) (first_name p2)
                              other -> other
                      unequal -> unequal 
```

`compare`或者如果您愿意，可以在定义中使用模式匹配，

```
 compare (Person first1 last1 age1) (Person first2 last2 age2) =
        case compare age1 age2 of
          EQ -> case compare last1 last2 of
                  EQ -> compare first1 first2
                  other -> other
          unequal -> unequal 
```

首先根据年龄进行比较，然后是姓氏，最后，如果需要，还有名字。

# jquery - 隐藏（不删除）所有 HTML 标签 - Jquery

> ID：10115061
> 
> 赞同：1
> 
> 时间：2012-04-11T22:47:14.633
> 
> 标签：jquery

我将如何使用 jquery 隐藏所有 HTML 标签。不是删除而是隐藏。我是否必须单独指定每个标签，还是有更强大/可扩展的解决方案？

**示例字符串：**

```
My name is <b>Joe</b> and I like <span style="color:red;">long walks</span> on the <i>beach</i>. 
```

**结果**

```
My name is and I like on the . 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T22:49:41.047

您可以隐藏特定父项的所有子元素。

由于隐藏元素的后代无论如何都不会显示，因此无需遍历所有元素`find("*")`：

```
$("#theParent").children().hide(); 
```

或者，正如 gdoron 建议的那样：

```
$("#theParent > *").hide(); 
```

上面可能会更快，因为它使用纯 CSS 选择器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T22:49:47.253

`$('*').hide()`将删除所有文档的所有标签。`$('#parent *').hide()`父元素内的所有元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T22:49:44.660

听起来您想隐藏特定包含元素的后代。

```
$(container).find('*').hide(); 
```

jQuery 也有一个简写形式：

```
$('*', container).hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T22:50:23.183

`$('p *').hide()`如果整个文本都在一个`<p>`元素中，您可以执行类似的操作。

如果您只想隐藏它们，但仍然占用空间，请将它们的可见性设置为隐藏

```
$('p *').css('visibility', 'hidden'); 
```

元素仍会占用空间，但不可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T22:50:25.727

只要你有一个父容器就很容易:)

```
<div id='myDiv'>
    My name is <b>Joe</b> and I like <span style="color:red;">long walks</span> on the <i>beach</i>.
</div>

<script>
    $('#myDiv:child').hide();
</script> 
```

# android - 什么是 Android 上的“滑块中断”

> ID：10115065
> 
> 赞同：8
> 
> 时间：2012-04-11T22:47:45.083
> 
> 标签：android, amazon-appstore

不得不问这个问题我觉得自己像个白痴，但我不知道 Android 上的滑块中断是什么，并且搜索 Google 和 Stackoverflow 什么也没找到。亚马逊向我发送了我的应用程序的拒绝通知，因为除了主要活动（他们称之为“弹出窗口”）之外的所有活动都不能很好地响应滑块中断。我在应用程序的任何地方都没有搜索栏，所以这不是他们所指的“滑块”。

此外，有问题的视图之一根本不是新活动，而是列表视图。它在“滑块中断”时消失。据我所知，在这种情况下，我无法控制列表视图对话框的作用。一旦我弄清楚滑块中断是什么，我如何告诉列表视图在它发生时不要关闭？我想我可以跟踪列表视图是否打开并在 onResume 或任何处理滑块中断的函数中调用。但是在不知道什么是滑块中断的情况下，它会使测试变得困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T14:47:30.023

我对亚马逊也有同样的问题。我提交了一张票，这是回复：

> 在具有翻转键盘的设备上会发生滑块中断。当应用程序运行时，键盘被翻转。

# amazon-ec2 - 亚马逊云混乱，我的 ubuntu 实例用哪个产品？

> ID：10115069
> 
> 赞同：-1
> 
> 时间：2012-04-11T22:47:55.503
> 
> 标签：amazon-ec2, amazon-web-services

我需要设置一个亚马逊服务器。我总是在这里“在亚马逊 ec2 上设置 ubuntu”，这在理论上听起来很简单，但是这些其他的东西是什么！

[![](../Images/e038f007a57410f7fc52e93fba760d11.png)](https://i.stack.imgur.com/2DThg.png)

主要问题是`"sure I can google ec2 setup, but are these other web services offerings any better suited for me than ec2"`

有这么多，有点压倒性的。我需要运行一个可以编码和处理数据的服务器，是我需要的 ec2 实例还是其他？如果这太模糊了，那么至少在这里粘贴一些资源来为我指明正确的方向

谢谢你的任何见解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:58:22.843

您需要 EC2 - 只需转到 AWS 文档中的[EC2 入门指南](http://docs.amazonwebservices.com/gettingstarted/latest/computebasics-linux/)，它将引导您完成需要做的事情。

# model-view-controller - 在 ExtJS 中，callParent() 与 initConfig 与超类

> ID：10115070
> 
> 赞同：14
> 
> 时间：2012-04-11T22:48:08.330
> 
> 标签：model-view-controller, extjs

这些片段有什么区别？：

```
constructor: function(config) {
    this.initConfig(config);
}

constructor: function(config) {
    this.callParent(arguments);
}

constructor: function(config) {
    this.superclass.constructor.call(this, config);
} 
```

而且，覆盖其他方法有什么不同`constructor`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-12T01:20:21.727

第二个和第三个片段在功能上是等效的。`callParent`只是调用父函数而不是通过`superclass`属性的更清洁和更简单的方法。

第一个例子完全不同。一方面，它不调用父级的构造函数。这通常是个坏消息。基类通常有一些需要完成的初始化，忘记为构造函数（和 initComponent）调用父类是常见的错误来源。

`initConfig`是一种方便的方法，它将：

*   将对象的初始配置与传入的配置合并
*   为配置中的所有属性创建 getter 和 setter
*   将配置应用于对象

这与调用父构造函数完全不同。调用父构造函数的作用完全取决于它的编写目的。有些会使用`initConfig`，有些不会，还有一些会做与 initConfig 类似的事情，但是是手动的。

没有必要使用`initConfig`，有时甚至很危险。但这完全是另一回事（对于 Ext 4.1，initConfig 看起来希望是无害的，并且不包含与 4.0 相同的危险副作用）

## 边注

只是要指出。在第二个和第三个片段中，不需要构造函数。如果您的构造函数仅调用父构造函数，那么您可以完全不使用构造函数。

# mysql - “LEFT JOIN TableB ON TableA.name = TableB.name”中“TableB”的任何值？

> ID：10115072
> 
> 赞同：1
> 
> 时间：2012-04-11T22:48:16.167
> 
> 标签：mysql, sql

全部，

我正在查看一些基本的 MySQL`JOIN`教程。杰夫阿特伍德在他的博客上[给出了一个例子，如下所示：](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

```
SELECT * FROM TableA
LEFT OUTER JOIN TableB
ON TableA.name = TableB.name 
```

在我看来，从语义的角度来看，查询不需要`TableB`第二行的提及。我理解正确吗？在我看来，所有信息都已在第 3 行中可用。

我并不是想对 SQL 语言的效率提出任何类型的麻烦，我只是想了解`TableB`在这种情况下还是在其他情况下，提到这一点是否会带来任何新信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:53:34.630

`TableB`仅出现在第三行，因为您要加入的列不是唯一命名的。

例如，假设您想在列和上加入`TableA`和，其中只有一个名为 ciolum的列，并且只有一个名为 的列。然后你可以这样写：`TableB``Foo``Bar``TableA``Foo``TableB``Bar`

```
SELECT * FROM TableA 
  LEFT OUTER JOIN TableB 
  ON Foo = Bar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T22:53:58.633

它不会带来新信息，但确实会带来精确度和为表命名的能力：

```
SELECT a.* FROM TableA a
LEFT OUTER JOIN TableBWhichHasAReallyLongUnweildyName b
ON a.name = b.name 
```

请注意，在这个公式中，我既可以明确要求 a 中的数据，也可以在第 3 行中更容易地计算出连接。但是，编译器不会有非任意的指导来获取关于使用哪个表的信息除非我明确声明。考虑一下这是否是 SQL 的工作方式：

```
SELECT b.* FROM TableA a
LEFT OUTER JOIN 
ON TableA.name = TableB.name b
WHERE TableB.value v > 1 
```

我是说 tableB 别名为“b”，还是 TableB.name 别名为“b”？这只是令人困惑；最好是明确和权威的。

# c# - 按值查找 RadListBox 项，服务器端

> ID：10115075
> 
> 赞同：0
> 
> 时间：2012-04-11T22:49:03.107
> 
> 标签：c#, telerik, radgrid

我会在代码隐藏的 RadListBox 中找到传输特定项目。据我所知，`FindItemByValue`是一个客户端功能。是否有等效的服务器端？

这是我现在拥有的，但`FindItemByValue`总是返回 null。

```
RadListBoxItem item = CompanyListBox.FindItemByValue(comp.ID.ToString());
CompanyListBox.Transfer(item, CompanyListBox, CompanyDestBox); 
```

这似乎应该工作，但我不知道如何开始`FindItemByValue`工作。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:24:29.843

您可以使用 FindItemByValue 或 FindItemByText，您是否可能正在查找文本而不是值，或者您的列表框由于回发问题而为空？

[http://www.telerik.com/help/aspnet-ajax/listbox-working-with-items-server-side.html](http://www.telerik.com/help/aspnet-ajax/listbox-working-with-items-server-side.html)

# sql - 在 SQL Server 中为存储过程插入和更新

> ID：10115083
> 
> 赞同：0
> 
> 时间：2012-04-11T22:49:50.613
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures

我在 SQL Server 中有一个这样的表：

```
varID(PK)    dataID(PK)  is_used
A            1           0
B            1           0 
```

然后，如果组合存在，我将加载数据以将 is_used 更新为 1 `varID/dataID`，否则将其添加。

所以我必须插入/更新这些`varID/dataID`组合。

```
varID(PK)    dataID(PK)  
B            1           
C            1 
```

所以更新后的表格如下所示：

```
varID(PK)    dataID(PK)  is_used
A            1           0
B            1           1
C            1           1 
```

最简单的方法是什么？我将在存储过程中执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T23:03:30.397

过程尝试更新`is_used`给定的密钥。如果不成功，则插入新行。请注意，我将 0 作为 is_used 的默认值 - 我认为 is_used = 1 for (C, 1) 是一种疏忽。

```
create proc AddVarDataCombo (@varID varchar(100), @dataID int)
as
   set nocount on

   update ATable
      set is_used = 1
    where varID = @varID
      and dataID = @dataID

   if @@rowcount = 0
   begin
      insert into ATable 
           values (@varID, @dataID, 0)
   end 
```

# java - 有没有一个java函数可以在鼠标进入屏幕时将鼠标坐标更改为屏幕中心？

> ID：10115084
> 
> 赞同：0
> 
> 时间：2012-04-11T22:49:51.487
> 
> 标签：java

我知道有一个鼠标运动侦听器可以检查鼠标何时进入应用程序。当用户进入应用程序时，有没有办法让鼠标移动到屏幕的中心？这方面的一个例子来自游戏 Minecraft。一旦用户将鼠标指针悬停在应用程序内，鼠标点就会位于屏幕的中心，任何鼠标移动都会指示您正在查看的内容。我正在尝试实现这一点，但我只想知道如何使鼠标坐标更改为屏幕的原点，而不会使鼠标指针本身从人体动作中移到屏幕上。

```
 public static void main(String[] args) {
    Jogl3DApp display = new Jogl3DApp();
    // make display listen for mouse events
    display.addMouseListener(display);
    // make display listen for keyboard events
    display.addKeyListener(display);
    // Uncomment the following line to create a timer object and start it
    // generating events, one every 30 milliseconds
    new Timer(10, display).start();
    // make display listen for the OpenGL graphics events
    display.addGLEventListener(display);

    // create a GUI window
    JFrame window = new JFrame("Jogl Application");
    // make window contain the display object
    window.setContentPane(display);

    window.setLocation(100, 100);
    window.setVisible(true);
    // A JFrame object's size includes the window decorations, like
    // the title bar and borders. So if you want a 500x500 drawing space,
    // you must set the window size a little bit bigger than that. Insets
    // gives
    // you the size of the decorations, so you make the window of size
    // 500x500
    // plus the size of the decorations.
    Insets insets = window.getInsets();
    window.setSize(500 + insets.right + insets.left, 500 + insets.top
            + insets.bottom);

    // kills thread (in particular the timer event thread) when window is
    // closed
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}
     public void display(GLAutoDrawable drawable) {

    // get the OpenGL context object
    GL gl = drawable.getGL();
    GLU glu = new GLU();
    GLUT glut = new GLUT();
    // clear the window
    gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);

    // replace what follows with your own drawing code
    gl.glMatrixMode(GL.GL_MODELVIEW);
    gl.glLoadIdentity();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:53:11.760

你可以使用`java.awt.Robot`类。我不相信在用户与屏幕交互时移动鼠标是一个很好的 UX 选择，但该课程应该让你开始了解你需要的东西。

```
final Robot robot = new Robot();
robot.mouseMove(100, 100); 
```

[机器人 - Javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)

# javascript - 摆脱 fancybox iframe 上无用的滚动条

> ID：10115086
> 
> 赞同：1
> 
> 时间：2012-04-11T22:50:08.717
> 
> 标签：javascript, html, css, fancybox

我有一些内容想用fancybox 在iframe 中显示。当我使用它时，即使所有内容都在其中，它也会弹出水平和垂直滚动条。在 Firefox 中检查它显示，当我点击`html`所有内容时，所有内容都在里面，但在突出显示的框之外还有一点剩余。下一个级别是`iframe.fancybox-iframe`包括滚动条。我查看了css，它的填充和边距设置为零，所以我不知道为什么会有滚动条。现在就我仅有的选项而言`autoSize:false`。我想要显示的页面正文中只有一个表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T14:27:21.923

如果有人想知道使用哪个类名

```
.fancybox-inner {
    overflow: hidden !important;
} 
```

如果你发现一个小的白色背景，你可以使用重置它

```
.fancybox-skin {
    background: inherit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:53:16.897

尝试将其添加到 css：

```
.style{
   overflow: hidden;
} 
```

如果没有帮助，请发布您的 HTML 和 CSS。

# sqlalchemy - SQL Alchemy 返回 id 列表

> ID：10115092
> 
> 赞同：0
> 
> 时间：2012-04-11T22:50:28.773
> 
> 标签：sqlalchemy, pylons

我正在使用 SQL Alchemy，我想返回一个文档 ID 列表。Id 是文档表中的主键。我当前的查询返回一个元组列表。

```
userDocs = session.query(Document.idDocument).filter(Document.User_idUser == user.idUser).all() 
```

我想要一个 id 列表的原因是我可以使用 in_(userDocs) 搜索另一个表。

所以另一个解决方案是能够使用元组进行搜索。我目前使用 userDocs 从我的第二个查询中没有返回任何内容。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:47:26.290

您无需进行中间查询，一次即可完成所有操作！

```
things = session.query(Things) \
                .join(Thing.documents) \
                .filter(Document.User_idUser==user.idUser) 
```

`relationship()`您只需通过其在预期实体上查询 Document 的属性。

# mysql - JSTL SQL 更新行数？

> ID：10115093
> 
> 赞同：0
> 
> 时间：2012-04-11T22:50:29.757
> 
> 标签：mysql, sql, jstl

是否可以计算 jstl 中的 sql update 语句影响的行数？

我试图这样做，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:24:25.070

根据[JSTL TLD Docs](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)，该`var`属性指定包含行数的变量的名称，因此按照您的示例

```
reqConfirmBooking != 0 
```

应该管用。

# java - Java的Flattr API？

> ID：10115096
> 
> 赞同：2
> 
> 时间：2012-04-11T22:50:45.710
> 
> 标签：java, android, flattr

是否有官方（或维护良好的）Java 库来使用 Flattr API？应该在服务器端和 Android 上工作。对于 Android，是否有类似于 Facebook 提供的舒适 SSO 解决方案，其他应用程序可以将身份验证委托给官方应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T07:15:14.197

有[flattr4j](http://flattr4j.shredzone.org)，它（由我自己）积极维护，并且可以在服务器端和 Android 上运行。

# algorithm - 确定图是否为 K 顶点连接

> ID：10115114
> 
> 赞同：2
> 
> 时间：2012-04-11T22:53:03.297
> 
> 标签：algorithm, runtime, depth-first-search, connectivity

我正在寻找一种多项式时间算法，该算法以图形 G 和整数 K 的形式接受输入，并确定 G 是否是 K 顶点连接的。我认为这可能会利用深度优先搜索。我可以看到使用非多项式解决方案是如何实现的，即仅删除 K 个随机顶点，运行 DFS 以检查连通性，然后使用不同的顶点组再次执行此操作。〜O（n ^ K）的运行时间虽然有点多，但显然可以将其降低到多项式时间。知道我在这里缺少什么吗？我想这与我们在运行 DFS 后得到的非树顶点有关，但我不完全确定我在寻找什么？提前致谢！

编辑：要清楚，我*不想*确定图表的连通性。相反，输入时给出了一个数字 k，我希望检查该图是否是 k 连接的。它*不会*产生给出图形连通性的答案，只是一个是或否。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T17:50:26.800

您*可以*在多项式时间内计算输入图的顶点连通性，即使 k 不固定，请参阅[https://en.wikipedia.org/wiki/K-vertex-connected_graph#Computational_complexity](https://en.wikipedia.org/wiki/K-vertex-connected_graph#Computational_complexity)

# c# - 将非参考值传递给 Task

> ID：10115115
> 
> 赞同：0
> 
> 时间：2012-04-11T22:53:05.820
> 
> 标签：c#, parallel-processing, task

在将 int 变量传递给诸如本例中的任务时，我经常会得到奇怪的结果：

```
List<List<object>> ListToProcess = new List<List<object>>();

// place some lists in list to process
foreach (var temp in Foo)
    ListToProcess.Add(temp);

foreach (var tempArray in ListToProcess)
{
    // initialize each list in ListToProcess                    
}

int numberOfChunks = ListToProcess.Count; 
Task[] tasks = new Task[numberOfChunks];
for (int counter = 0; counter < numberOfChunks; counter++)
{
    tasks[counter] = Task.Factory.StartNew(() =>
        {
            // counter is always = 5  why?   <---------------------------
            var t = ListToProcess[counter];                        
        });
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:01:58.713

这称为闭包。您没有使用变量的值，而是使用了变量本身。当代码执行时，它使用执行时的值，而不是定义任务时的值。

要解决此问题，我相信您会执行以下操作：

```
for (int counter = 0; counter < numberOfChunks; counter++)
{
    int cur = counter;
    tasks[counter] = Task.Factory.StartNew(() =>
    {
        // counter is always = 5  why?   <---------------------------
        var t = ListToProcess[cur];                        
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:01:18.420

无法保证何时访问 StartNew 的 Action 块中的“计数器”变量。可能发生的情况是所有 5 个值都循环通过，并创建了任务，然后安排任务运行。

当它们运行时，将执行以下操作：

```
var t = ListToProcess[counter]; 
```

但在这个阶段，计数已经等于 5。

也许你应该看看并行集合？

```
ListToProcess.AsParallel().ForAll(list => dosomething(list)); 
```

该地区还有许多其他选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:02:13.407

```
 for (int counter = 0; counter < numberOfChunks; counter++)
    {
        var referenceVariable = new{val=counter};
        tasks[counter] = Task.Factory.StartNew(() =>
            {
                var t = ListToProcess[referenceVariable.val];                        
            });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:02:14.810

由于变量被捕获，您可以通过在每个循环中重新声明一个新变量来解决这个问题。

```
for (int counter = 0; counter < numberOfChunks; counter++)
{
    int localCounter = counter;
    tasks[localCounter] = Task.Factory.StartNew(() =>
        {
            // counter is always = 5  why?   <---------------------------
            var t = ListToProcess[localCounter];                        
        });
} 
```

# java - 当preferredSize 为非默认值时，JButton 不采用动作名称

> ID：10115118
> 
> 赞同：1
> 
> 时间：2012-04-11T22:53:13.760
> 
> 标签：java, swing, netbeans, action, jbutton

我刚刚注意到，当至少以下两件事为真时，a`JButton`不会将其文本更改`NAME`为耦合对象的值：`Action`

*   按钮的`preferredSize`属性不是默认值。
*   按钮的`text`属性不是默认的“”（空）。

可能还有其他属性值组合使按钮忽略操作的名称，但是当我将其中一个或另一个设置为默认值时，它可以工作。

我将明确说明该操作已**正确注册**，并且该`hideActionText`属性为**false**。另外，我应该说我是通过*Netbeans GUI 设计器*中的*属性面板*设置这些属性的。

 *一些谷歌搜索没有带来任何结果。这是正常行为吗？可以解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T23:27:08.537

我想说两件事：

1.  为什么要强制 JButton 的 preferredSize （否则它只是基于它包含的文本和图标）？
2.  如果您想要来自动作名称的文本，为什么要设置 JButton 的文本？

我在所描述的行为中没有看到任何问题。如果未提供文本，则默认为操作的名称（如果有）。否则，它将是空的。如果您想强制使用preferredSize，就这样吧，在某些情况下，您有权这样做。

如果您希望出现动作名称，只需不要在 JButton 上设置另一个“文本”值。

编辑

* * *

如果我设置了文本而不是preferredSize，我仍然会看到按钮文本（即使文本太小太适合，你的文本上会出现“...”）。在此 SSCCE 上自行测试：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.io.IOException;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;

public class Main {

    public static void main(String[] args) throws IOException {
        JFrame frame = new JFrame();
        frame.setTitle("frame");
        final JButton button = new JButton(new AbstractAction("Action text") {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.err.println("Hello");
            }
        });
        button.setText("Button text which is a lot longer");
        button.setPreferredSize(new Dimension(100, 30));
        frame.add(button);
        frame.pack();
        frame.setVisible(true);
    }
} 
```*

# python - Python-请求关闭 http 连接

> ID：10115126
> 
> 赞同：64
> 
> 时间：2012-04-11T22:54:13.473
> 
> 标签：python, http, urllib2, httplib, python-requests

我想知道，你如何关闭与请求（python-requests.org）的连接？

有了`httplib`它`HTTPConnection.close()`，但我如何对请求做同样的事情？

代码：

```
r = requests.post("https://stream.twitter.com/1/statuses/filter.json", data={'track':toTrack}, auth=('username', 'passwd'))
for line in r.iter_lines():
    if line:
        self.mongo['db'].tweets.insert(json.loads(line)) 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-19T22:37:27.020

我认为关闭连接的更可靠方法是明确告诉服务器以[符合 HTTP 规范](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)的方式关闭它：

> HTTP/1.1 为发送者定义了“关闭”连接选项，以发出响应完成后连接将被关闭的信号。例如，
> 
> ```
>  Connection: close 
> ```
> 
> 在请求或响应标头字段中表示在当前请求/响应完成后，连接不应被视为“持久”（第 8.1 节）。

标`Connection: close`头被添加到实际请求中：

```
r = requests.post(url=url, data=body, headers={'Connection':'close'}) 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2017-08-14T23:13:05.887

我来这个问题是为了解决这个问题`"too many open files" error`，但我`requests.session()`在我的代码中使用。几次搜索后，我在[Python 请求文档](https://2.python-requests.org/en/master/user/advanced/#session-objects)上找到了一个答案，该答案建议使用该`with`块，以便即使存在未处理的异常也关闭会话：

```
with requests.Session() as s:
    s.get('http://google.com') 
```

如果你不使用 Session 你实际上可以做同样的事情：[https ://2.python-requests.org/en/master/user/advanced/#session-objects](https://2.python-requests.org/en/master/user/advanced/#session-objects)

```
with requests.get('http://httpbin.org/get', stream=True) as r:
    # Do something 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-04-11T23:47:07.100

[正如这里](https://stackoverflow.com/questions/3272653/in-what-conditions-are-closing-a-http-connection-necessary/3272700#3272700)所讨论的，实际上并没有 HTTP 连接之类的东西，httplib 所指的 HTTPConnection 实际上是底层 TCP 连接，它根本不了解您的请求。请求将其抽象出来，您将永远看不到它。

最新版本的 Requests 实际上确实在您发出请求后保持 TCP 连接处于活动状态。如果您确实希望关闭 TCP 连接，您可以将请求配置为不使用[keep-alive](http://docs.python-requests.org/en/latest/user/advanced/#keep-alive)。

```
s = requests.session()
s.config['keep_alive'] = False 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-07-19T03:29:14.063

请使用`response.close()`关闭以避免“打开的文件过多”错误

例如：

```
r = requests.post("https://stream.twitter.com/1/statuses/filter.json", data={'track':toTrack}, auth=('username', 'passwd'))
....
r.close() 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-10-16T14:23:21.917

在 Requests 1.X 上，连接在响应对象上可用：

```
r = requests.post("https://stream.twitter.com/1/statuses/filter.json",
                  data={'track': toTrack}, auth=('username', 'passwd'))

r.connection.close() 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-20T11:08:04.607

这对我有用：

```
res = requests.get(<url>, timeout=10).content
requests.session().close() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-10T14:53:28.017

要删除请求中的“keep-alive”标头，我只是从 Request 对象创建它，然后使用 Session 发送它

```
headers = {
'Host' : '1.2.3.4',
'User-Agent' : 'Test client (x86_64-pc-linux-gnu 7.16.3)',
'Accept' : '*/*',
'Accept-Encoding' : 'deflate, gzip',
'Accept-Language' : 'it_IT'
}

url = "https://stream.twitter.com/1/statuses/filter.json"
#r = requests.get(url, headers = headers) #this triggers keep-alive: True
s = requests.Session()
r = requests.Request('GET', url, headers) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-25T03:15:11.903

根据最新的请求（2.25.1），`requests.<method>`默认关闭连接

```
with sessions.Session() as session:
    return session.request(method=method, url=url, **kwargs) 
```

[https://github.com/psf/requests/blob/master/requests/api.py#L60](https://github.com/psf/requests/blob/master/requests/api.py#L60)

因此，如果您使用最新版本的请求，似乎我们不需要自己关闭连接。

此外，如果您需要使用同一会话发送多次请求，最好使用`requests.Session()`而不是多次打开/关闭连接。前任：

```
with requests.Session() as s:
    r = s.get('https://example.org/1/')
    print(r.text)
    r = s.get('https://example.org/2/')
    print(r.text)
    r = s.get('https://example.org/3/')
    print(r.text) 
```

# amazon-ec2 - 如何检查/查询与 ec2 机器的活动 rdp 连接？

> ID：10115131
> 
> 赞同：2
> 
> 时间：2012-04-11T22:54:52.937
> 
> 标签：amazon-ec2, remote-desktop, remote-access, rdp, terminal-services

我有几台 ec2 机器，需要查询到这些机器的任何 RDP 会话（连接）。我尝试了各种方法，但我收到拒绝访问或“RPC 服务器不可用”消息。虽然 3389 端口是开放的。

这是我尝试过的方法的报告：

1.  RDP - 有效。
2.  Ping - 无法 ping。
3.  终端服务 - 说“找不到服务器”。
4.  查询会话 - 说“RPC 服务器不可用”。
5.  Get-TSSession（power shell 中的终端服务模块） - 说“RPC 服务器不可用”。

我相信我在正确理解终端服务或 ec2 实例时遇到了问题。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:35:34.047

您在 EC2 上，因此您需要应对安全组以及实例上的本地防火墙。

对于这些 Windows 机器的远程管理，您需要确保您的安全组设置允许对 TCP 139、TCP 445、UDP 137、UDP 138 的入站访问，并且这些机器上的本地防火墙也允许入站访问。

不要向世界开放这些端口——只允许从众所周知的静态 IP 地址访问，或使用 VPC。

# jquery - 如何刷新调用 RedirectToAction 的视图？

> ID：10115132
> 
> 赞同：2
> 
> 时间：2012-04-11T22:55:03.543
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, redirect

如何在调用重定向（或等效）的控制器方法中刷新视图？

**查看（索引.cshtml）：**

```
@model ViewModel

@Html.EditorFor(model => model.First)
@Html.EditorFor(model => model.Last)

@Html.EditorFor(model => model.Junk)

// call is invoked to PerformMagic as such:

onComplete: function (event, queueID, fileObj, response, data) 
{
   $.ajax(
   { url: '@Url.Action("PerformMagic","Home")',
       data: { first: $("#fname").val() },
      })
   } 
```

**Junk.cshtml（编辑器模板）**

```
 @model Models.Junk

 <div>
    @Html.LabelFor(model => model.ID)
    @Html.EditorFor(model => model.ID)
</div>
<div>
    @Html.LabelFor(model => model.Name)
    @Html.EditorFor(model => model.Name)
    @Html.ValidationMessageFor(model => model.Name)
</div> 
```

**控制器：**

```
// Called from jquery client
public string PerformMagic(string Id)
{
    ViewModel model = dbContext.GetPersistedView();
    model.Junk.Add(new junk);

    // I need to update my view here but this doesn't update the view (model updates fine)....
    // ...after a refresh on the browser of course the new junk in the model is displayed.
    return RedirectToAction("Index", model);  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T22:59:48.303

看起来您正在提出`ajax`请求。

您不能重定向`ajax`请求！您应该做的是返回模型的 Json 值并在客户端更新页面：

```
public string PerformMagic(string Id)
{
    ViewModel model = dbContext.GetPersistedView();
    model.Junk.Add(new junk);

    return Json(model);
} 
```

**jQuery：**

```
onComplete: function(event, queueID, fileObj, response, data) {
    $.ajax({
        url: '@Url.Action("PerformMagic","Home")',
        data: {
            first: $("#fname").val()
        },
        success: function(response) {
            $('#First').val(response.First);
            $('#Last').val(response.Last);
            $('#Junk').val(response.Junk);...
        }
    })
}​ 
```

# django - 在 Django 管理员中，有没有办法显示模型的一对多对象的实际链接列表？

> ID：10115137
> 
> 赞同：4
> 
> 时间：2012-04-11T22:55:44.680
> 
> 标签：django, django-admin

如果这太复杂或不是正确的做事方式，请随时将我链接到其他内容或只是告诉我我应该以另一种方式做...

基本上，我正在做一个有客户的项目，每个客户都有任意数量的网站。所以 Websites 模型对 Client 模型有一个 ForeignKey。网站管理页面非常深入，每个客户可能有 10 个或更多网站，所以我不想让它们都显示为内联，因为那看起来真的很混乱和疯狂。

我想要的是，当您转到管理面板并单击“客户”时，您会被带到更改页面，其中包含您要为客户编辑的基本内容，然后是每个实际链接的内联客户的网站管理页面。像这样：

# 更改客户端

### 一般的

姓名：

地址：

电话：

### 网站

链接编辑网站 1

链接编辑网站 2

链接编辑网站 3

链接编辑网站 4

链接编辑网站 5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T23:15:59.007

您可以使用`TabularInline`仅包含指向模型更改页面的链接：

```
class ClientAdmin(admin.ModelAdmin):
    # everything as normal
    inlines = WebsiteInline,

class WebsiteInline(admin.TabularInline):
    model = Website
    fields = 'link',
    readonly_fields = 'link',
    def link(self, instance):
        url = reverse("admin:myapp_website_change", args = (instance.id,))
        return mark_safe("<a href='%s'>%s</a>" % (url, unicode(instance)))

admin.site.register(Client, ClientAdmin)
admin.site.register(Website) 
```

请参阅我最近的问题[如何将一个对象的 Django 管理页面中的链接添加到相关对象的管理页面？](https://stackoverflow.com/questions/9919780/how-do-i-add-a-link-from-the-django-admin-page-of-one-object-to-the-admin-page-o)这是关于如何做到这一点，但有几对模型，而不仅仅是一个。

# asp.net - Web API 无法解析 System.Web.Http 中的符号 Http，缺少什么？

> ID：10115141
> 
> 赞同：12
> 
> 时间：2012-04-11T22:55:54.013
> 
> 标签：asp.net, asp.net-web-api

我有一个网络表单项目。
我使用 nuget 通过运行`Install-Package WebApi.All`
我创建一个类来安装 Web API

```
public class CartController : System.Web.Http.ApiController 
```

但它无法解析 System.Web.Http 中的符号 Http，我缺少什么依赖项？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T14:34:44.960

ASP.NET Web API 的包名称不是“WebApi.All”。ASP.NET Web API (Beta) 的包是“AspNetWebApi”。尝试运行以下命令：

```
Install-Package AspNetWebApi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:46:35.317

尝试将它与[包管理器控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)中的确切关键字一起使用。这包括依赖项`WebApi.Enhancements`，`WebApi.OData`.

> 安装包 WebApi.All -版本 0.6.0

有关更多信息，请查看 NuGet [WebApi.All 0.6.0](http://nuget.org/packages/WebApi.All)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-17T12:15:11.683

另一种方法是使用“NuGet 包管理器”。

您可以通过右键单击解决方案资源管理器中的项目来简单地使用“NuGet 包管理器”，然后搜索“Web API”术语。从那里安装它。

[![NuGet 包管理器](../Images/d14f31a21f9843a46e7fc2ba7c2fc3d4.png)](https://i.stack.imgur.com/65S9E.png)

# android - 从 Android 应用程序安全地写入远程数据库

> ID：10115146
> 
> 赞同：0
> 
> 时间：2012-04-11T22:56:35.987
> 
> 标签：android, database, security

我想我必须做某种 API，Android 应用程序将参数发送到 php 文件或类似文件。

我正在考虑一个具有某种高分列表的应用程序。我将如何确保提交的高分值实际上是通过应用程序实现的？假设此人达到 9001 分。现在，如果这只会导致某种 file.php?score=9001 调用，那么对于人们找到 php-location 并提交他们喜欢的任何内容，我感到不是很安全。

对这类问题有任何意见吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:09:19.010

由于您无法验证请求的来源，因此无法确保 100% 安全，但有一种方法可以让破解高分变得稍微困难​​一些。它基本上仍然是通过默默无闻的安全性，但它需要深入研究实际的应用程序二进制文件，而不仅仅是查看网络连接。

首先，为您的应用选择一个“密码”。不仅发送分数，还发送与分数连接的密码的加密哈希（例如，SHA-256 或其他东西）。在服务器端，重新计算与 score 连接的密码的哈希值，并检查它是否与提交的哈希值匹配。如果不是，则拒绝分数提交。现在这比最初的方法更安全，因为查看应用程序发出的请求不会让您伪造分数。但是，从应用程序中查看二进制代码仍将允许攻击者恢复密码并伪造分数提交，但这非常复杂，可能足以满足您的目的。

当然，这不排除能够复制分数（一旦知道正确的哈希值，您可以根据需要多次提交分数）。如果你甚至想阻止这种情况，提交分数必须这样：从服务器请求（随机）ID号，哈希分数+ID+密码，提交分数+哈希，然后服务器检查这个哈希是否正确。服务器需要记住 ID 号，所以这有点涉及到编程。一个更简单的解决方案是将每个分数与球员姓名相关联，并且每个球员只允许 1 个分数。然后你可以散列密码+名称+分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:59:50.010

下午好！

最好通过 POST 与服务器通信。因此，您可以将附加参数（例如密钥）从您的应用程序发送到服务器并在那里检查。

PHP示例：

```
<?
$key = trim(htmlspecialchars($_POST['KEY']));

if ($key == 'your_secret_string') {
   //write data to DB
}
?> 
```

# java - 在这些情况下会发生死锁吗？

> ID：10115148
> 
> 赞同：1
> 
> 时间：2012-04-11T22:57:05.143
> 
> 标签：java, concurrency, deadlock

在这些 Java 情况下会发生死锁
1-

```
synchronized(obj) {
   obj.syncMethod(); // the method signature: public synchronized void syncMethod() {...}
} 
```

2-

```
synchronized(obj) {
  if (condition) 
     throw new Exception(); // deadlock because obj lock is not released?
  // do other stuff
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:03:11.870

1.  不会发生死锁。您已经持有*obj*的锁。

2.  如果抛出异常，则释放锁。请参阅此处的问题：

[在同步子句中抛出异常的副作用？](https://stackoverflow.com/questions/2019339/side-effects-of-throwing-an-exception-inside-a-synchronized-clause)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:22:10.027

1.  No deadlock will occur - Java's locks are *reentrant*, that is, while a thread is holding a lock (in your case on obj) it can enter synchronized blocks requiring the same lock without problem (a synchronized method is synchronized on **this**, which is obj in your case too).
2.  The lock will be released when the synchronized block is left, no matter whether an exception causes the thread to leave it or not.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:03:25.470

如果您没有在`synchronized`块中捕获异常，那么您的锁将被释放并且不会发生死锁。有关详细信息，请参见[此处](http://www.jguru.com/faq/view.jsp?EID=245377)。

# javascript - 对文件的时间/延迟进行基准测试

> ID：10115149
> 
> 赞同：1
> 
> 时间：2012-04-11T22:57:15.993
> 
> 标签：javascript, benchmarking

我有兴趣对文件的时间/延迟进行基准测试。这是一个场景，我想获取三个文件`http://something.com/script1.js`、`http://something.com/script2.js`和`http://something.com/script3.js`，并且我想比较这些文件在 Web 浏览器中加载的时间。

我正在寻找某种工具或 chrome 扩展来允许我这样做。

（我意识到这不是一个编程问题，但我很绝望）

这不需要特定于 javascript，可以是任何页面、图像等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:04:39.187

如果您只是在寻找加载时间而不是执行，只需将它们全部包含在空白页面中，打开页面，打开 chrome 开发工具，选择“网络”选项卡，刷新页面，网络选项卡将显示三个文件加载和请求的每一位需要多长时间。如果您想要执行，我认为有一些网页可以测试

# c# - 将 json 字符串反序列化为对象 - Silverlight

> ID：10115151
> 
> 赞同：3
> 
> 时间：2012-04-11T22:57:21.033
> 
> 标签：c#, json, silverlight-4.0, dictionary, json.net

今天下午我花了很长时间尝试在字符串中实现 JSON 的反序列化，起初我使用**DataContractJsonSerializer**因为我的环境是 Silverlight 但是它似乎不支持使用开箱即用的字典（在许多其他所以问题）。

作为替代方案，我决定暂时使用 JSON.NET（基于上述 SO 问题的答案）并且我遇到了以下问题。

我想反序列化下面的 JSON：

```
{
    "disclaimer": "This data is collected from various providers and provided free of charge for informational purposes only, with no guarantee whatsoever of accuracy, validity, availability or fitness for any purpose; use at your own risk. Other than that - have fun, and please share/watch/fork if you think data like this should be free!",
    "license": "Data collected from various providers with public-facing APIs; copyright may apply; not for resale; no warranties given.",
    "timestamp": 1334183999,
    "base": "USD",
    "rates": {
                "AED": 3.6732,
                "AFN": 48.400002,
                "ALL": 106.669998,
             }
} 
```

并将其放在以下对象中（字典中的双精度是必需的）：

```
public class ExchangeData
{
    public string disclaimer { get; set; }
    public string license { get; set; }
    public string timestamp { get; set; }
    public string @base { get; set; }
    public Dictionary<string, double> rates { get; set; }
} 
```

我最近尝试实际让它工作的尝试如下：

```
StreamReader reader = new StreamReader(args.Result);
ExchangeData data = JsonConvert.DeserializeObject<ExchangeData>(reader.ReadToEnd()); 
```

但这会导致以下异常：

**无法从程序集“System.Core，Version=3.7.0.0，Culture=neutral，PublicKeyToken=969DB8053D3322AC”加载类型“System.Dynamic.IDynamicMetaObjectProvider”。**

根据你所看到的，我的方法是完全错误的，还是我只是犯了一个小学生的错误（或两者兼而有之！）

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:31:28.590

我认为这会对您有所帮助：

```
JavaScriptSerializer ser = new JavaScriptSerializer();
ExchangeData foo = ser.Deserialize<ExchangeData>(args.Result); 
```

我不确定你是否需要使用 StreamReader，你用它做什么？

顺便说一句，我假设`args.Result`是 json 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:03:54.317

异常消息本身似乎是此 SO 问题中提出的已知问题：

[迁移到 JSON.NET 4.0.3 破坏了我的应用程序](https://stackoverflow.com/questions/7780389/moving-to-json-net-4-0-3-broke-my-app)

在使用 Nuget 安装具有所有必要依赖项的最新包后（我之前从 CodePlex 项目手动下载了 .DLL），代码无需额外更改即可工作。

感谢提供解决方案的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:25:01.347

根据你的例外：（[一个简单的谷歌搜索拉出了这个答案](http://www.intersoftpt.com/Community/ClientUI/Could-not-load-type-SystemDynamicIDynamicMetaObjectProvider-from-assembly-Error/)）

> 您的项目似乎正在引用旧版本的 Silverlight 运行时。
> 
> 要检查，请在 Visual Studio 中调出项目属性，并确保将 Silverlight 版本设置为 4.0。
> 
> 您可能还需要仔细检查 System.Windows.Controls.Navigation 程序集，确保它引用的是通常位于 [Program Files]\Microsoft SDKs\Silverlight\v4.0\Libraries\Client\System.Windows 中的最新版本。 Controls.Navigation.dll

以及以下内容：

```
"rates": {
            "AED": 3.6732,
            "AFN": 48.400002,
            "ALL": 106.669998,
         } 
```

在 JSON 中不是一个 Array，它是一个对象。一个数组看起来像：

```
"rates": [
            "AED": 3.6732,
            "AFN": 48.400002,
            "ALL": 106.669998,
         ] 
```

因此，要么你必须让源正确地格式化它的 JSON，要么你需要手动设置这个特定片段的反序列化来填充字典。

# postgresql - PostgreSQL hstore 数组列上的索引

> ID：10115152
> 
> 赞同：3
> 
> 时间：2012-04-11T22:57:41.500
> 
> 标签：postgresql, indexing, hstore

我知道您可以在 hstore 列中的字段上创建索引。我知道您还可以在数组列上创建 GIN 索引。

但是在 hstore 数组上创建索引的语法是什么？

例如

```
CREATE TABLE customer (
    pk serial PRIMARY KEY,
    customer hstore,
    customer_purchases hstore[]
); 
```

假设客户购买的 hstore 可能是类似的哈希

```
productId -> 1
price -> 9.99 
```

我在 customer_purchases hstore[] 中有一个数组

我想在 customer.customer_purchases[]-> productId 上创建一个索引

这可能吗？我尝试了 CREATE INDEX 语法的不同组合，但它们似乎都不支持 hstore 数组中的索引字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T04:14:21.337

我认为您误解了 PostgreSQL `Array`。An`Array`实际上只是一个字符串。您不能索引`HSTORE`数组中的对象（在本例中为 s），因为它不是`TABLE`.

相反，创建一个额外的表：

```
CREATE TABLE customer (
    pk bigserial PRIMARY KEY,
    customer hstore
);

CREATE TABLE purchases (
    pk bigserial PRIMARY KEY,
    customer_pk bigint not null,
    purchase hstore not null,
    constraint "must be a valid customer!" 
        foreign key (customer_pk) references customer(pk)
); 
```

另外，你为什么在这里使用`HSTORE`s ？

如果您*必须*`INDEX`基于`"purchase"` `HSTORE`此处创建一个，请执行以下操作：

```
CREATE OR REPLACE FUNCTION purchase_amount(purchase hstore) returns float as $$
    select ($1 -> 'price')::float;
$$ language 'SQL' IMMUTABLE;

CREATE INDEX "purchases by price" ON purchases (purchase_amount(purchase)); 
```

这只是理解`HSTORE`类型的练习吗？或者您是否有一些真实的用例可以使您对真实数据的所有这些混淆都值得？

# sql - SQL 外键

> ID：10115153
> 
> 赞同：1
> 
> 时间：2012-04-11T22:57:47.373
> 
> 标签：sql, phpmyadmin, foreign-keys, foreign-key-relationship

我使用 phpmyadmin 中的语法创建表：

```
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS info;

CREATE TABLE users (
  user_id int unsigned NOT NULL auto_increment,
  email varchar(100) NOT NULL default '',
  pwd varchar(32) NOT NULL default '',
  isAdmin int(1) unsigned NOT NULL,
  PRIMARY KEY  (user_id)
) TYPE=INNODB;

CREATE TABLE info (
  info_id int unsigned NOT NULL auto_increment,
  first_name varchar(100) NOT NULL default '',
  last_name varchar(100) NOT NULL default '',
  address varchar(300) NOT NULL default '',
  zipcode varchar(100) NOT NULL default '',
  personal_phone varchar(100) NOT NULL default '',
  mobilephone varchar(100) NOT NULL default '',
  faxe varchar(100) NOT NULL default '',
  email2 varchar(100) NOT NULL default '',
  country varchar(100) NOT NULL default '',
  sex varchar(1) NOT NULL default '',
  birth varchar(1) NOT NULL default '',

  email varchar(100) NOT NULL default '',
  PRIMARY KEY  (info_id),
  FOREIGN KEY (email) REFERENCES users(email) ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB; 
```

但显示错误：

> “#1064 - 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 11 行的 'TYPE=INNODB' 附近使用正确的语法”

如果我在创建表的末尾删除 TYPE=INNODB ，它将显示错误：

> “#1005 - 无法创建表 'curriculo.info' (errno: 150)”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:03:12.083

在创建结束时尝试“Engine=INNODB”。（不是类型）

如果您没有它，它可能无法工作，因为它取决于您在 mysql 首选项中的默认引擎类型... MyIsam（最常见的默认引擎）不支持外键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:18:49.953

使用`ENGINE = INNODB`，不使用`TYPE = InnoDB`。

来自 MySQL 文档，版本 5.1，[`CREATE TABLE`语法](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)：

> **笔记**
> 
> 较旧的`TYPE`选项与`ENGINE`. `TYPE` **自 MySQL 4.0起已弃用**，但仍支持 MySQL 5.1 的向后兼容性（MySQL 5.1.7 除外）。***从 MySQL 5.1.8 开始，它会产生一个警告***。**它在 MySQL 5.5 中被删除**。您不应该`TYPE`在任何新应用程序中使用，并且应该立即开始转换现有应用程序以使用 ENGINE。（请参阅第 D.1.64 节，“MySQL 5.1.8 中的更改（未发布）”。）

* * *

如果你想拥有这个外键：

```
FOREIGN KEY (email) REFERENCES users(email) 
```

`users(email)`应该有一个约束`UNIQUE`。所有外键都应引用主键或唯一键。您希望`info`表中的一行引用（通过 FK）一个且只有一个用户（用户表中的行）。

* * *

尽管（出于各种原因）最佳实践是将窄（小）和恒定宽的列作为外键。你`email`是 100 个字符，可以是 100 到 300 个字节（取决于字符集）。因此，您可以考虑将`user_id`其用作 FK，它只有 4 个字节宽：

```
CREATE TABLE info (
  ...
             ---- email varchar(100) NOT NULL default '',   
             ---- removed
  user_id int unsigned NOT NULL, 
  PRIMARY KEY  (info_id),
  FOREIGN KEY (user_id) REFERENCES users(user_id)
      ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB; 
```

# ios - 应用程序在后台或关闭时的自定义通知

> ID：10115160
> 
> 赞同：0
> 
> 时间：2012-04-11T22:58:55.277
> 
> 标签：ios, uilocalnotification

当我在后台的应用程序全部关闭时，是否可以创建通知。

我的意思是：如果我的应用程序在某个时间点进入后台，我想在 iPhone 的主屏幕上获得带有警报视图的通知。

警报视图必须包含我的自定义描述文本。

是否可以？如果这是可能的，那么版本 iOS 应该提供这个选项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:17:03.893

是的，您可以使用本地通知。

[https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

iOS 4.0 中引入了本地通知

# jquery - mouseover 和 mouseout 的问题

> ID：10115162
> 
> 赞同：3
> 
> 时间：2012-04-11T22:59:05.720
> 
> 标签：jquery, mouseover, mouseout, mouseenter, mouseleave

我有图像网格，当鼠标悬停在任何给定图像上时，该图像的较大版本将成为原始网格图像的叠加层，其版本稍大。

鼠标悬停效果很好。但是 mouseout 和 mouseleave 都会导致较大的图像立即淡出。鼠标是否结束。

```
 function imageSize(img){
              var theImage = new Image();
              $(theImage).load(function() {
                var imgwidth = this.width;
                var imgheight = this.height;
                var position = img.parent().position()
                var index = img.parent().index();

                ///calculate top
                var top     = (position.top -((imgheight-img.height())/2));
                var left    = (position.left -((imgwidth-img.width())/2));

                /// place image in img_pop
                var clone;
                clone = '<div class="pop_img clone'+index+'"></div>';
                $(clone).insertAfter($('BODY'));

                $('.pop_img.clone'+index+'').css({
                    'width'                 :   img.width(),
                    'height'                :   img.height(),
                    'top'                   :   position.top,
                    'left'                  :   position.left,
                    'backgroundImage'       :   'url('+theImage.src+')',
                });

                    $('.pop_img.clone'+index+'').stop().animate({
                        'height'    :   imgheight,
                        'top'       :   top,
                        'width'     :   imgwidth,
                        'left'      :   left,
                    },300,'easeInOutQuad');

              });
              theImage.src = img.attr('src');
            }

            $('.am-wrapper img').live('mouseenter',function(){
                imageSize($(this));
            });

            $('.am-wrapper img').live('mouseleave',function(){
                thisIndex = $(this).parent().index();
                $('.pop_img.clone'+thisIndex+'').fadeOut('200');
            }); 
```

理想情况下，当鼠标悬停在相应的网格图像上时，我希望叠加图像保持可见和原位。当用户放置另一个网格图像的鼠标时，旧的叠加层会淡出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:09:51.097

问题是当覆盖层弹出时，它会阻止底层元素的鼠标事件。它基本上从它下面的任何东西中窃取鼠标事件。因此，您会`mouseout`在下面的元素上获得一个事件。

在相对于底层元素的鼠标位置上触发有点棘手。您可能需要创建一个`mousemove`事件来查看鼠标是否离开原始 div 的边界。

如果您可以使用稍微不同的功能，则可以`mouseout`在叠加图像上触发。

这是一个演示，我与一个图像网格放在一起，当您使用`mouseenter`另一个网格元素（不在覆盖之下）时，它会关闭其他覆盖：

演示：http: [//jsfiddle.net/jtbowden/29U93/](http://jsfiddle.net/jtbowden/29U93/)

其他几点注意事项：

1.  你为什么用`new Image()`？只需使用 jQuery 的内置克隆功能。
2.  你在做`$(clone).insertAfter($('BODY'))`。您不能在`body`合法后附加任何内容。你需要做`appendTo('body')`。

**编辑**：

我意识到有一种相当简单的方法可以做到这一点！

在图像网格的顶部创建一个具有高 z-index 的透明网格，其中的 div 与您的网格项目相匹配。使用这些来触发您的叠加层弹出（在透明网格下）。

演示：http: [//jsfiddle.net/jtbowden/S6AvH/1/](http://jsfiddle.net/jtbowden/S6AvH/1/)

此演示手动创建透明网格，并使用 javascript 放置它，但您可以使用 javascript 来完成整个事情。

# javascript - 为什么 scrollTop、pageYOffset 和 height 都不起作用？

> ID：10115166
> 
> 赞同：1
> 
> 时间：2012-04-11T22:59:59.453
> 
> 标签：javascript, height, scrollbar, offset, scrolltop

我试图检测浏览器窗口上是否有垂直滚动条（如果内容超过窗口高度并溢出）。我已经尝试过`document.body.scrollTop`,`window.pageYOffset`和`document.body.style.height`...  **这些**都不起作用！

在`window.alert`对使用这些属性初始化的变量进行测试时，无论是否有滚动条，`pageYOffset`总是返回**0 ，而另外两个返回似乎是一个空字符串。**

我唯一的想法是可能是 CSS 定位冲突导致了这种情况，但似乎没有这样的冲突......任何想法，解决方案，解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:07:49.137

这个

```
window.innerWidth - document.documentElement.clientWidth 
```

返回浏览器窗口垂直滚动条的宽度，`0`如果没有滚动条。

所以，你可以有一个功能......

```
function windowHasVerticalScrollbar () {
    return window.innerWidth - document.documentElement.clientWidth > 0;
} 
```

不幸的是，IE8 和 IE7 不支持该`window.innerWidth`值，因此该技术在这些浏览器中不起作用。（但是，它确实适用于 IE9 和所有其他浏览器）。

此外，由于`documentElement`是`<html>`元素（网页的根元素），如果您在该元素上设置样式（如边距、绝对定位等），计算可能会返回错误的结果。

# c# - 如何在 C# 中动态设置 DataGridView 的源？

> ID：10115167
> 
> 赞同：0
> 
> 时间：2012-04-11T23:00:01.363
> 
> 标签：c#, datagridview

我有一些存储数据的列表

`List<List<string>> data = new List<List<string>>();`

如何正确分配它`dataGridView.DataSource`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:03:51.043

```
List<List<string>> data = new List<List<string>>();
dataGridView.DataSource = data;
dataGridView.Databind(); 
```

正如一些海报所说，这是针对 Windows 窗体的，在这种情况下，您可以（根据 MSDN）jst 设置数据源而不是数据绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:11:51.690

这里的问题是（显然）DataGridView DataSource 属性不知道如何显示`List<List<string>>`. 一种方法是将您的列表组合成一个 DataGridView 可以绑定的对象。这里有几种方法可以做到这一点：

**到数据表：**

要将您转换`List<List<string>>`为 DataTable，我借用了[此处](https://stackoverflow.com/questions/6344939/how-to-convert-listliststring-to-a-datatable)的代码并创建了此扩展方法：

```
static class ListExtensions { 
    public static DataTable ToDataTable(this List<List<string>> list) { 
        DataTable tmp = new DataTable();
        tmp.Columns.Add("MyData");
        // Iterate through all List<string> elements and add each string value to a new DataTable Row.        
        list.ForEach(lst => lst.ForEach(s => tmp.Rows.Add(new object[] {s})));

        return tmp; 
    } 
} 
```

现在您可以使用此扩展方法从您的 DataTable 中获取`List<List<string>>`您可以绑定到 DataGridView 的数据表：

```
dataGridView.DataSource = data.ToDataTable(); 
```

**对于匿名类型 List：**

这是执行此操作的代码：

```
dataGridView.DataSource = data.SelectMany(lst => lst)
                              .Select(s => new { Value = s }).ToList(); 
```

我们需要匿名类型，因为如果没有一点帮助，DataGridView 将无法在 List 属性中显示字符串值，如此[处](https://stackoverflow.com/questions/479329/how-to-bind-a-string-list-to-a-datagrid)所述。

* * *

当然，这两种方法都有缺点，但我确实相信这些方法是您的最佳选择。

# c# - Ping / PingReply 的单元测试 - 模拟？

> ID：10115168
> 
> 赞同：3
> 
> 时间：2012-04-11T23:00:10.250
> 
> 标签：c#, visual-studio, unit-testing, mstest, rhino-mocks

我希望找到一种方法来对我的 ping 功能进行单元测试，或者能够用 RhinoMocks 模拟它

这是我希望能够进行单元测试的代码的简单示例：

```
public PingReply PingMachine(string machineName)
{
    Ping ping = new Ping();
    return ping.Send(machineName);
}

public bool IsOnline(string machineName)
{
    var reply = PingMachine(machineName);
    if (reply.Status == IPStatus.Success)
    {
        return true;
    }
    return false;
} 
```

除了创建我自己的 IPing 接口并将 Ping 转换为 IPing 并为此添加另一个构造函数和一堆工作之外，有没有办法轻松地对其进行单元测试，或者我不应该浪费我的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:16:07.457

我在您的示例中看到的唯一困难是`new Ping()`通话。在某些时候，您可能想要验证是否`Send`使用正确的数据调用，目前这几乎是不可能的。对象的创建通常使用[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)进行抽象，因此如果您确实遇到了问题`new Ping()`，我建议将 ping 创建委托给此类工厂并将其注入您的测试类。您的代码可能如下所示：

```
// some minor injection work
public TestedClass(IPingFactory pingsFactory)
{
    this.pingsFactory = pingsFactory;
}

public PingReply PingMachine(string machineName)
{
    IPing ping = pingsFactory.Create();
    return ping.Send(machineName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T02:07:00.110

听起来您已经知道使代码可测试的好方法：依赖抽象。不要使用 a `Ping`， use `IPing`，并`IPing`通过构造函数将 be 提供给将要使用它的类。

查看像[Ninject](http://www.ninject.org/)这样的 IOC 容器可以让您的生活更轻松，尤其是在您连接大量依赖项的情况下。

至于你是否应该，我对“我应该让这段代码可测试并为它编写测试”的回答总是响亮的**YES**。

可以这样想：你有这个方法，`IsOnline(string machineName)`. 假设您正在其他地方编写代码，并且您想测试该代码。但是该代码使用`IsOnline`！突然之间，测试变得更加困难。如果您可以模拟您的 ping 提供类，那么测试将是一件轻而易举的事。

# java - 指向这些方法的 uri(s) 会是什么样子

> ID：10115169
> 
> 赞同：1
> 
> 时间：2012-04-11T23:00:14.993
> 
> 标签：java, rest, jersey

我在以下位置遇到了以下帖子

[在 Java 中处理 URI（RESTful）中的多个参数](https://stackoverflow.com/questions/6127507/handling-multiple-parameters-in-a-uri-restfully-in-java)

我只是好奇以下是有效资源吗？

```
@Path("Client/{client}/users")
public class UserPage 
{
@GET
@Produces(MediaType.TEXT_HTML)
public String userChoice(@PathParam(value = "client") final String client) 
{****Method here which handles a list of 'users'****}

@GET
@Path("{name}")
@Produces(MediaType.TEXT_HTML)
public String userPage(@PathParam(value = "client") final String client,  @PathParam(value = "name") final String name)
{****Method here which handles 'user' information****}} 
```

我特别好奇 uri 会调用 userpage 方法的 {name} 方法吗？{} 在这里如何工作？我认为 {} 应该包含路径类的名称，例如，如果类的路径是“/Client”，那么它应该是 {client}。有什么建议么 ？想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:17:25.523

您定义的资源足够有效，但根据您要执行的操作的描述，您需要将源更改为如下所示：

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/Client/{client}/users")
public interface UserPage {
   @GET
   @Produces(MediaType.TEXT_HTML)
   public String userChoice(@PathParam(value = "client") final String client);

   @GET
   @Path("/{name}")
   @Produces(MediaType.TEXT_HTML)
   public String userPage(@PathParam(value = "client") final String client,
         @PathParam(value = "name") final String name);
} 
```

假设根 URI *http://www.example.com:8080*，那么以下情况成立：

*   *在http://www.example.com:8080/Clients/10/users*上调用 GET将调用`userChoice`资源实现类上的方法。`client`的值为*10*。
*   *在http://www.example.com:8080/Clients/10/users/Bob*上调用 GET 将调用`userPage`资源实现类上的方法。`client`的值为*10*`name` ，的值为*Bob*。

花括号语法用于包含定义路径参数值的正则表达式。另外，请注意，我在您的类级别路径中包含了一个前导斜杠 ('/') - 省略它会导致路径不匹配（在大多数情况下）。

# jquery - 带有未存储在数据库中的 has_many 的 jquery tokenInput

> ID：10115186
> 
> 赞同：0
> 
> 时间：2012-04-11T23:02:33.283
> 
> 标签：jquery, ruby-on-rails-3, carmen

我是 Rails 新手，所以如果我不以 Rails 方式执行此操作，请指出正确的方向。我将 carmen gem 用于状态列表，它们没有存储在数据库中。

我遵循了使用 tokenInput 插件的这个[rails cast](http://asciicasts.com/episodes/258-token-fields)，但是我的情况有点不同，因为状态 ID 没有存储在数据库中，而且我只有一个 has_many，而不是一个 has_many through 关系。

tokenInput 期望 JSON 像`[{"id": "id_here", "name":"name_val"}]`. 由于我在数据库中没有状态 ID，因此我通过将状态代码映射到 id 键并将状态名称映射到名称键（即`[{"id": "NC", "name":"North Carolina"}]` ）在文件控制器中手动创建 JSON 对象

添加状态时一切正常，但是当用户从编辑页面上的 tokenInput 中删除状态时，我需要删除状态。

我可以通过以下方式做到这一点：

1.  在 state_tokens setter 方法中删除与活动相关的所有文件，然后创建新文件。

2.  在 tokenInput onDelete 回调中添加代码以调用归档控制器销毁方法。

您将实施哪个选项，还有其他我没有想到的方法吗？

模型：

```
class Campaign < ActiveRecord::Base

  has_many :filings
  attr_accessible :state_tokens

  def state_tokens
    self.filings.map {|r| {:id => r.state, :name => Carmen::Country.coded('US').subregions.coded(r.state).name}}.to_json
  end

  def state_tokens=(ids)
    state_codes = ids.split(",")
    state_codes.each do |s|
      Filing.find_or_create_by_campaign_id_and_state(self.id, s )
    end
  end 
```

控制器：

```
class FilingsController < ApplicationController  
  def index   
    @filtered = Carmen::Country.coded('US').subregions.select {|r| r.name.downcase.include? "#{params[:q]}".downcase}
    respond_to do |format|  
      format.html  
      format.json { render :json => @filtered.map {|r| {:id => r.code, :name => r.name}}}
    end  
  end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T00:35:04.467

我决定选择选项 1，然后删除/替换现有记录。如果您认为有更好的方法，请告诉我。

# ruby-on-rails - Memcached 大小限制究竟代表什么文件系统实体存储？

> ID：10115187
> 
> 赞同：7
> 
> 时间：2012-04-11T23:02:39.897
> 
> 标签：ruby-on-rails, heroku, memcached

下午好，

我在 Heroku 上的应用程序中连接了 Memcached。免费托管计划的限制为 Memcached 5MB 和 Memcachier 25MB。作为几乎所有东西的新手，我只是希望澄清这究竟代表什么。

我在配置文件中设置了 DalliStore，并为 Rack::Cache 设置了典型选项。我的元存储在 Memcache 中，实体存储设置在文件系统上。

问题：

1.  这是否意味着我的 5/25MB 限制仅被我存储的有关每个缓存片段的元信息使用？这是否意味着我可以存储大量关于免费计划的信息？
2.  Rack::Cache 和 Memcache（通过 Dalli 存储）之间的细分/故事究竟是什么？它们有不同的用途吗？他们在做同样的事情吗？即下面的代码是多余的

    `config.cache_store = :dalli_store`

和

```
config.action_dispatch.rack_cache = {
  :verbose      => true,
  :metastore    => Dalli::Client.new,
  :entitystore  => 'file:tmp/cache/rack/body',
  :allow_reload => false
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T18:01:34.647

我一直在努力解决类似的问题。

首先，让我们弄清楚我们的术语。

*   **Memcached**：在某处的服务器上运行的进程（d 代表守护进程），它实际上将键值对存储在内存中。
*   **cache_store**：Rails 缓存存储（`Rails.cache`），带有一个 API，可以配置为使用不同的 Ruby 软件实现。一种设置`config.cache_store`是`:memory_store`使用内存中的实现。另一个设置是`:dalli_store`指定使用 dalli gem，它在后台与您的 memcached 服务器建立可能的远程连接。
*   **Dalli Store**：我假设您的意思是由 dalli gem 支持的 Rails 缓存，它将值物理存储在 memcached 中。
*   **Rack::Cache**：Rack 中间件，将标头（Expires、Cache-Control、ETag 等）插入到 HTTP 响应中，还充当反向代理缓存，尽可能在请求到达 Rails 堆栈之前对其进行处理。见[网站](http://rtomayko.github.com/rack-cache/)。

为了让 Rack::Cache 在请求到达 Rails 堆栈和应用程序的其余部分之前处理它们，它必须在某处存储响应 + 元数据。它存储东西的位置由`config.action_dispatch.rack_cache = { ... }`设置配置。

请注意，这是与*不同*的设置`config.cache_store = :dalli_store`。他们不必是相关的。我认为这就是很多混乱的来源。但在实践中，我们可能希望它们都使用 memcached，这意味着使用 dalli 实现。但是，它们每个都有自己的`Dalli::Client`实例。（此外，您的 session_store 可能是相关的，但不一定是。）

Heroku cedar 堆栈有一个[临时文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)，无法在 dyno 之间共享。但是，Heroku 自己建议仅使用带有 Rack::Cache的[tmp 文件存储](https://devcenter.heroku.com/articles/rack-cache-memcached-static-assets-rails31)`entitystore`，而将 memcached 用于`metastore`.

至于实际存储在 Rack::Cache 元存储中的内容，这些是[rack-cache v1.2`Rack::Cache::MetaStore`](https://github.com/rtomayko/rack-cache/blob/1.2/lib/rack/cache/metastore.rb#L8)类的文档：

```
The MetaStore is responsible for storing meta information about a
request/response pair keyed by the request's URL.

The meta store keeps a list of request/response pairs for each canonical
request URL. A request/response pair is a two element Array of the form:
  [request, response]

The +request+ element is a Hash of Rack environment keys. Only protocol
keys (i.e., those that start with "HTTP_") are stored. The +response+
element is a Hash of cached HTTP response headers for the paired request. 
```

因此，为了回答您的问题，HTTP 请求标头和 HTTP 响应标头存储在 Rack::Cache 元存储中。另一方面，Rack::Cache entitystore 存储整个响应体（即 HTML）。

由于[您不能在 Heroku 上可靠地使用页面缓存](https://devcenter.heroku.com/articles/caching-strategies#page-caching)，这意味着您可能正在使用动作缓存和片段缓存。动作和片段缓存使用您的 Rails 缓存存储（不是机架缓存）。但是，如果您将它们都设置为物理上使用同一个 memcached 服务器，它们都将有助于内存使用。动作和部分缓存存储实际的 HTML。

为了更深入地了解您的实际使用情况，如果您使用 memcachier，请运行以下命令在浏览器中打开分析仪表板。

```
heroku addons:open memcachier 
```

有关获取 memcached 统计信息的更多信息，请参阅[此问题](https://stackoverflow.com/questions/9541817/heroku-memcache-rackcache-stats)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T16:28:36.867

嗯，这不是那么容易回答的。

首先，您可能不会在 Heroku 文件系统上存储任何内容，~~因为它不可写~~. 因此，您应该将所有内容存储在 Memcache 中。因此，在免费计划中，您将存储 5/25mb 的数据，包括实体和元数据。

正如文档所说（对于 Cedar 堆栈）：

> 每个 dyno 都有自己的临时文件系统，以及最近部署的代码的新副本。在其生命周期内，dyno 可以将文件系统用作临时暂存器，但它写入的文件对任何其他 dyno（包括应用程序中的其他 dyno）都是不可见的，并且在停止或重新启动 dyno 的那一刻，任何写入的文件都将被丢弃。

因此，是的，使用文件系统似乎相当可行，特别是如果您使用的是单个测功机。

关于 Rack::Cache 和 Memcache 之间的区别： Memcache 是一种服务器，它在内存中存储键/值对以及一些额外的好属性。`config.cache_store = :dalli_store`配置`Rails.cache`是对可以使用的不同缓存机制的抽象。它是通用的，您可以将其用于任意键/值存储、操作和片段缓存。

另一方面，Rack::Cache 是 Varnish 的替代品，允许您缓存整个请求。

# javascript - 在使用 Javascript OnBlur OnFocus 执行 AJAX 存储之前检查表单字段的更改？如何？

> ID：10115188
> 
> 赞同：0
> 
> 时间：2012-04-11T23:02:40.637
> 
> 标签：javascript, compare, onblur, onfocus

如果 this.value 不等于''，我目前正在每个 onblur 上执行 AJAX 查询存储，但是对于用户在表单中切换而不更改任何内容，这是一个疯狂的数据库查询命中数（是的，我检查对于实际数据库查询脚本的更改，但仍然如此）。

这是我目前正在做的事情：

```
<input type="text" name="EUName" id="EUName" value="[whateverdynamicvalue]"
class="contentextformtxt" onblur="if (this.value == '') 
{this.value = '[whateverdynamicvalue]';} else { UpdateEUData();return false; } " /> 
```

else 显然是通过 AJAX 提交表单。

我想做的是使用 OnFocus 捕捉用户 OnFocuses 时的内容，然后对照 this.value OnBlur 检查它是否有任何变化。我不确定我是否走在正确的轨道上（不是很擅长 javascript），但这就是我目前所拥有的。

```
<input type="text" name="EUAddress1" id="EUAddress1" value=" [whateverdynamicvalue] "
class="contentextformtxtlarge" onblur="if (this.value == '' || this.value == originalfvalue)
{this.value = ' [whateverdynamicvalue] ';} else { UpdateEUData();return false; } " 
onfocus="Var originalfvalue = this.value" /> 
```

我不确定这是否是最佳实践，但无论哪种方式，它都行不通。任何关于如何修复的建议都会很棒！最重要的是，我只是想找出一种减少服务器流量的方法。我原本只是将它与动态值进行比较，但问题是如果有人将值从值x更改为值y，然后尝试将其更改回值x，显然将其与动态值进行比较将不允许它更新，因为它仍然认为值是值 x，而不是它已更改为值 y。因此，为什么我要弄清楚 javascript 路由。

任何帮助将不胜感激！乙脑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:05:49.447

使用`onchange`事件。当用户选项卡或单击字段时触发它，但与`onblur`它不同的是，它仅在值实际更改时才会发生。

# ruby-on-rails - ruby 'mikel/mail' 回复字段

> ID：10115192
> 
> 赞同：4
> 
> 时间：2012-04-11T23:03:03.850
> 
> 标签：ruby-on-rails, ruby, email, mail-gem

我正在使用以下样式解析电子邮件

```
message = Mail.new(body)   #where body is the RAW source from the email server
message.subject #=> the subject of the message as a string
message.from #=> shows who the email is from 
```

如果存在“回复”字段，我将如何获得它的值？宝石能做到吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T23:08:50.603

你想要的`reply_to`方法：

```
message.reply_to
# => ["user@example.com"] 
```

如果没有设置回复，它将为零：

```
message.reply_to
# => nil 
```

我建议查看[RDoc 文档](http://rdoc.info/github/mikel/mail/frames)，特别是[Message 对象](http://rdoc.info/github/mikel/mail/Mail/Message)。这将向您显示您的`message`实例上可用的所有方法。

# mysql - MD5 密码发送到 INT 的 mysql 字段

> ID：10115200
> 
> 赞同：-1
> 
> 时间：2012-04-11T23:03:36.100
> 
> 标签：mysql, int, md5, field

我正在向 sql 数据库发送加密密码（在 md5 中）。意外地，我向整数列发送了 md5 加密。我输入的密码是“test”，在我的数据库中显示为“5”，然后我输入了“qwertyqwerty”的密码，显示为“2147483647”出于好奇，谁能向我解释这是怎么回事? 为什么 int 值如此不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:06:12.493

MD5 不对密码进行加密，而是对其进行哈希处理。

哈希是一种单向函数，它接受给定的输入并创建可预测的输出（即，给定的输入将始终具有相同的输出），理想情况下，即使非常相似的输入也会产生截然不同的输出。

MD5 哈希是 128 位。如果您尝试将这 128 位写入 32 位 SQL 列，肯定会发生一些截断。

如果不了解用于生成 MD5 的特定代码，将其转换为整数，然后将其写入 SQL，就无法理解为什么在一种情况下你得到一个小数字，而在另一种情况下你得到一个最大值签名 int。如果您想发布代码，我很高兴对此发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:07:13.660

我不能说为什么第一个值显示为 5（我必须查看散列），但您的第二个值显示为它所做的，因为这是整数列可以容纳的最大值。

当 mysql 将您的字符串 MD5 哈希转换为整数（或尝试）时，它超过了整数可以容纳的最大值，因此它保存了最大整数。

# windows-8 - 您能否构建一个启动网站而不是 Metro 应用程序的 Windows 8 Live Tile？

> ID：10115203
> 
> 赞同：3
> 
> 时间：2012-04-11T23:03:57.470
> 
> 标签：windows-8, microsoft-metro

Live Tiles 是 Windows 8 上 Metro 应用程序的“前门”。您能否改为启动网站而不是 Metro 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T10:11:54.213

你能写一个只做一件事的应用程序，那就是用指定的 Uri 启动浏览器：

```
Launcher.LaunchUriAsync(new Uri("http://my.website.com")); 
```

这样做的好处是它被表示为传统的应用程序而不是固定的站点，因此您可以根据需要设置磁贴的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T23:39:29.733

我能找到的最接近的东西是固定站点或站点图块。您似乎无法自定义这些站点图块的外观，但您可以使用通知计数来更新它们。

[http://blogs.msdn.com/b/ie/archive/2012/04/03/pinned-sites-in-windows-8.aspx](http://blogs.msdn.com/b/ie/archive/2012/04/03/pinned-sites-in-windows-8.aspx)

# uiwebview - 当 UIWebView 加载超过特定时间时打开 UIAlertView

> ID：10115206
> 
> 赞同：1
> 
> 时间：2012-04-11T23:04:27.923
> 
> 标签：uiwebview, loading, nstimer, uialertview

如果 Web 视图加载时间超过 10 秒，我会尝试提醒用户。错误是万一互联网连接速度慢或没有互联网连接。问题是这段代码不起作用。

在第一种情况下，我尝试在 Web 视图开始加载时启动计时器。然后要么什么都不做就过期，或者在 10 秒后显示一个警报，表明 web 视图加载非常慢或根本不加载。

在第二种情况下，我尝试在 web 视图启动时启动计时器，并在 10 秒后显示警报或在计时器到期之前使计时器无效。

两者似乎都无法正常工作。

```
- (void)viewDidLoad
{
timer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(webViewLoading) userInfo:nil repeats:YES];

webViewLoadTimer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(showAlert) userInfo:nil repeats:NO];

[super viewDidLoad];
[self configureView];
}

-(void)showAlert
{
 UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Warning"
                      message: @""
                      delegate: self
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil, nil];
if (self.bgWebView.loading){[alert show];}    
} 
```

我尝试将计时器放在以下方法中，但无论设备是否连接到互联网，它都会每次发出警报。它似乎并没有无效。

```
-(void)webViewLoading
{
  if (self.bgView.loading) 
  {
    [self.avBackGround startAnimating];
     webViewLoadTimer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(showAlert) userInfo:nil repeats:NO];
  }
  else
  {
    [self.avBackGround stopAnimating];
    [webViewLoadTimer invalidate];
  }

  if (self.icnWebView.loading) 
  {
    [self.avIcon startAnimating];
  }
  else 
  {
    [self.avIcon stopAnimating];
  }
} 
```

如果我错过了关于此的帖子，我深表歉意。我似乎无法把它放在一起。

谢谢你的帮助！

# nhibernate - NHibernate 忽略 GeneratedBy.Identity()

> ID：10115214
> 
> 赞同：0
> 
> 时间：2012-04-11T23:05:56.860
> 
> 标签：nhibernate, fluent-nhibernate

我正在尝试使用 NHibernate 序列化一个中等复杂的对象图*

实际映射是通过 FNH 完成的，但我已经转储了 HBM 文件并确认生成的 XML 符合 NHibernate 约定。

这是 HBM 的一个片段，仅供参考：

```
<class xmlns="urn:nhibernate-mapping-2.2" schema="obsv" optimistic-lock="version" name="Spc.Ofp.Tubs.DAL.Entities.PurseSeineActivity, TubsDAL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="s_daylog">
<id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
  <column name="s_daylog_id" not-null="true" />
  <generator class="identity" />
</id> 
```

此映射产生以下 SQL（通过 SQL 调试，为便于阅读而截断）：

```
INSERT INTO obsv.s_daylog (/* columns 0 thru 20 snipped */s_daylog_id /* <-- PK from mapping! */) 
VALUES (/* parameters snipped */@p21); 
select SCOPE_IDENTITY();@p21 = NULL [Type: Int32 (0)] 
```

我*相信*“select SCOPE_IDENTITY();”的存在 文本确认 NHibernate 部分理解应该发生的事情。我只是不明白为什么它将 PK 列写入插入查询。

我一直在使用映射来很好地阅读图表，所以我相当肯定这不是一个基本的映射问题。

FWIW，级联设置为无（出于其他原因，我需要使用这些实体而不会对对象图产生影响）。

*适度复杂，我的意思是我有一个对象，它有 6 到 10 个属性，这些属性是子实体的列表。很多这些子实体也有子实体。在最复杂的情​​况下，根实体下有 5 代实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:59:17.147

我认为这是因为您的映射似乎不正确。

根据[NHibernate Reference](http://www.nhforge.org/doc/nh/en/#mapping-declaration-id)，id 标签有一个“column”属性来设置列名，而不是子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:51:52.293

尝试使用`dynamic-insert="true"`：

```
<class xmlns="urn:nhibernate-mapping-2.2" dynamic-insert="true" schema="obsv" optimistic-lock="version" name="Spc.Ofp.Tubs.DAL.Entities.PurseSeineActivity, TubsDAL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="s_daylog"> 
```

# matlab - 错误：“double”类型的输入参数的未定义函数或方法“svmtrain”

> ID：10115219
> 
> 赞同：0
> 
> 时间：2012-04-11T23:06:35.160
> 
> 标签：matlab, svm, libsvm

我在跑步

```
SVMStruct = svmtrain(xTrain, yTrain); 
```

我得到的错误是

```
Undefined function or method 'svmtrain' for input arguments of type 'double' 
```

我很确定 xTrain 和 yTrain 是矩阵：

```
size(xTrain)
ans =
544    28

size(yTrain)
ans =
544     1 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:21:21.600

听起来该`svmtrain`功能不在您的路径上。如果

```
which svmtrain 
```

显示“svmtrain not found”，那么你应该确保你有生物信息学工具箱（输入`ver`并查看它是否在列表中）并且它在你的[路径](http://www.mathworks.co.uk/help/techdoc/ref/path.html)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T14:08:24.533

正如其他人所说，您可能缺少*生物信息学工具箱。*但也可能是您想要 LibSVM 库。我必须运行的第三方代码就是这种情况。在这里获取图书馆：[http ://www.csie.ntu.edu.tw/~cjlin/libsvm/](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:52:31.890

的第二个参数`svmtrain`应该是整数或逻辑向量，其中每一行中的值对应于训练矩阵/向量的同一行中的值。如果您尝试为训练数据输出双精度值，听起来您的情况可能会更加**回归。**在这种情况下，您可能需要研究回归算法。如果你仍然想要多类**分类**，你需要相应地调整你的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:33:41.583

是的，生物信息学工具箱是关键！使用更长的密钥安装它！您将在自定义安装选择中看到它！

# r - R使用while循环查找时间步数

> ID：10115222
> 
> 赞同：1
> 
> 时间：2012-04-11T23:07:00.803
> 
> 标签：r, while-loop

我需要找出我的方程将运行多少个时间步，直到种群灭绝（N = 0）。我很确定这不会发生，因为我使用的是几何增长方程。

```
lambda=0.8
TimeSteps=10

# From previous example 
t=-c(1:TimeSteps)
N=-numeric()
N0=10
N[1]=N0
for(t in 1:TimeSteps) {
   N[t+1]=(N[t]*lambda)
} 
```

我试图说明时间步长将等于 N 小于或等于零的 x 值。

# jquery - 偏移错误的位置

> ID：10115223
> 
> 赞同：0
> 
> 时间：2012-04-11T23:07:01.220
> 
> 标签：jquery, tooltip, offset

我想添加一个带有动态位置变化的工具提示。这是js代码：

```
$('a[rel=tooltip]').mouseover(function(e) {
        //Grab the title attribute's value and assign it to a variable
        var tip = $(this).attr('title');    
        //Remove the title attribute's to avoid the native tooltip from the browser
        $(this).attr('title','');   
        //Append the tooltip template and its value
        $(this).append('<div id="tooltip"><div class="tipHeader"></div><div class="tipBody">' + tip + '</div></div>');//Show the tooltip with faceIn effect
        $('#tooltip').fadeIn('500');
        $('#tooltip').fadeTo('10',0.9);
    }).mousemove(function(e) {
        //Keep changing the X and Y axis for the tooltip, thus, the tooltip move along with the mouse
        $('#tooltip').css('top', e.pageY + 10 );
        $('#tooltip').css('left', e.pageX + 20 );
    }).mouseout(function() {
        //Put back the title attribute's value
        $(this).attr('title',$('.tipBody').html());
        //Remove the appended tooltip template
        $(this).children('div#tooltip').remove();
    }); 
```

我的页面： http: [//pododezhdoy.ru/catalog/women/nizhnee_bele/](http://pododezhdoy.ru/catalog/women/nizhnee_bele/)

**问题：**为什么脚本确定错误的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:01:15.453

什么位置应该是对的？此代码显示图像上方的工具提示。

```
 var itempos = $(this).parent().position();
    $('#tooltip').css('top', itempos.top + 'px' );
    $('#tooltip').css('left', itempos.left + 'px' ); 
```

# iphone - plist 值丢失

> ID：10115224
> 
> 赞同：0
> 
> 时间：2012-04-11T23:07:03.367
> 
> 标签：iphone, ios, plist

好的，我在过去 2 天里试图解决这个问题。我有一个控制我的属性列表的类，它用作单例类，因此它只实例化一次，并且它还有一个用于将值保存到 plist 的方法。

无论您做什么，plist 都能正常工作，直到您从多任务栏中删除应用程序（即完全关闭应用程序），然后 plist 中的所有值都重置为 null。但是 plist 不会丢失。

所以我现在在想，也许我正在覆盖我在根文档目录中为读写能力创建的 plist 中的值。我希望通过我的代码示例，你们可能能够发现我的错误......我不确定我还需要添加什么......如果你有任何问题可以帮助你帮助我回答这个问题，那么请让我知道。

任何帮助将不胜感激，我的孩子们的孩子们将首次向您展示。

```
#import "EnginePropertiesController.h"

static EnginePropertiesController *sharedMyManager = nil;

@implementation EnginePropertiesController

@synthesize pSignature;
@synthesize pVersion;
@synthesize rNumber;
@synthesize dVReturned;
@synthesize cacheValue;

@synthesize manu;
@synthesize mod;
@synthesize submod;

#pragma mark Singleton Methods
+ (id)sharedManager {
    @synchronized(self) {
        if (sharedMyManager == nil)
            sharedMyManager = [[self alloc] init];
    }
    return sharedMyManager;
}
- (id)init {
    if (self = [super init]) {

            // get paths from root direcory
            NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
            // get documents path
            NSString *documentsPath = [paths objectAtIndex:0];
            // get the path to our Data/plist file
            NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"EngineProperties.plist"];
            NSLog(@"myplist path read = %@", plistPath);

            // check to see if Data.plist exists in documents
            if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
            {
                // if not in documents, get property list from main bundle
                plistPath = [[NSBundle mainBundle] pathForResource:@"EngineProperties" ofType:@"plist"];

            }

            // read property list into memory as an NSData object
            NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
            NSString *errorDesc = nil;
            NSPropertyListFormat format;
            // convert static property liost into dictionary object
            NSDictionary *tempRoot = (NSMutableDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
            manu = [cacheValue objectForKey:@"Manu"];
            mod = [cacheValue objectForKey:@"Mod"];
            submod = [cacheValue objectForKey:@"SubMod"];
            if (tempRoot && [tempRoot count]){
                // assign values
                self.pVersion = [tempRoot objectForKey:@"PSignature"];
                self.pVersion = [tempRoot objectForKey:@"PVersion"];
                self.rNumber = [tempRoot objectForKey:@"RNumber"];
                self.dVReturned = [tempRoot objectForKey:@"DVReturned"];
                cacheValue = [tempRoot objectForKey:@"Cache Value"];
        }
    }
    return self;
}

- (void) saveData:(NSString *)methodName pSignature:(NSString *)TemppSignature pVersion:(NSNumber *)TemppVersion rNumber:(NSNumber *)TemprNumber dVReturned:(NSNumber *)TempdvReturned cacheValue:(NSNumber *)cValue
{
    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"EngineProperties.plist"];

    // set the variables to the values in the text fields
    self.pSignature = TemppSignature;
    self.pVersion = TemppVersion;
    self.rNumber = TemprNumber;
    self.dVReturned = TempdVReturned;

    //This checks with methodName I would like to save the value from
    //The reason for this is there are 3 different cache values I get at seperate times to save This if statment just makes sure they are in the correct order.
    if ([methodName isEqualToString:@"Getmanu"]) {
        self.manu = cValue; 
    } else if ([methodName isEqualToString:@"GetMod"]) {
        self.mod = cValue;
    } else if ([methodName isEqualToString:@"GetSubMod"]) {
        self.submod = cValue;
    }        

    //Set up cacheValue Dictionary that will be added to the property list root dictionary
    self.cacheValue = [NSDictionary dictionaryWithObjectsAndKeys:
                       manu, @"Manu",
                       mod, @"Mod",
                       subMod, @"SubMod", nil];

    //Pass appropriate values into plist
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjectsAndKeys:
                               protocolSignature, @"Protocol Signature",
                               pVersion, @"Protocol Version",
                               rNumber, @"Request Number",
                               dVReturned, @"Data Version returned",
                               cacheValue, @"Cache Value", nil];

    NSString *error = nil;
    // create NSData from dictionary
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

    // check is plistData exists
    if(plistData) {
        // write plistData to our Data.plist file
        [plistData writeToFile:plistPath atomically:YES];
    } else {
        NSLog(@"Error in saveData: %@", error);
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:19:30.243

## 问题：零值

这是一个问题： pVersion 被分配了两次，而 pSignature 仍然存在`nil`。

```
self.pVersion = [tempRoot objectForKey:@"PSignature"];
self.pVersion = [tempRoot objectForKey:@"PVersion"]; 
```

这应该是

```
self.pSignature = [tempRoot objectForKey:@"PSignature"];
self.pVersion = [tempRoot objectForKey:@"PVersion"]; 
```

这反过来又会导致节省时间的麻烦：

```
NSDictionary *plistDict = [NSDictionary dictionaryWithObjectsAndKeys:
                           pSignature, @"PSignature",
                           pVersion, @"PVersion",
                           rNumber, @"RNumber",
                           dVReturned, @"DVReturned",
                           cacheValue, @"Cache Value", nil]; 
```

这个构造函数不知道它有多少个参数，它只是一直运行直到它命中`nil`。如果`pSignature`为 nil，它将保存一个空字典。

## 修复：强大的 NSDictionary 创建

虽然直接的解决方案是修复`pSignature`阅读，但使用`dictionaryWithObjectsAndKeys:`. 最好单独存储每个对象，使用`setObject:forKey`. 如果对象为 nil，则会引发异常，因此在调用之前进行测试。

```
NSMutableDictionary *plistDict = [NSMutableDictionary dictionary];
if (pSignature) [plistDict setObject:pSignature forKey:@"PSignature"];
if (pVersion) [plistDict setObject:pVersion forKey:@"PVersion"];
// ... and so on. 
```

## 替代方案：NSCoding

存储的另一种选择是序列化。请参阅[档案和序列化编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)。这需要权衡：虽然保存和加载在工作时更简单，但生成的文件可读性较差。

## 调试

最后，三个地方可以放置日志语句、断点或对话框，以帮助解决此类情况：

1.  记录正在加载的字典和正在保存的字典。如果您打开应用程序并立即触发保存，字典是否相同？
2.  检查发送到零终止方法的第一个参数，例如`arrayWithObjects:`and`dictionaryWithObjectsAndKeys:`
3.  在模拟器上，记录用于保存的路径并在 Finder 中打开它。那里有文件吗？如果是属性列表，你可以在 XCode 中打开它，看看它是否有你期望的内容。

# java - Android 开发人员错误地引用了旧 API 的“方法已弃用”标签？

> ID：10115225
> 
> 赞同：2
> 
> 时间：2012-04-11T23:07:03.703
> 
> 标签：java, android, deprecated

特别是，[PrefencesActivity 中方法的文档](http://developer.android.com/reference/android/preference/PreferenceActivity.html#addPreferencesFromResource%28int%29)显示了许多已弃用的方法。但是，未弃用的方法主要在 Honeycomb（API 级别 11）中引入。看来，如果您像我一样在预Honeycomb API 中进行编码，则不推荐使用这些方法。

所以我的问题是，我是否正确地对其进行了逆向工程，这是一个文档错误吗？不推荐使用的评论实际上应该说“从 API 11 开始不推荐使用”还是给出其他指示，如果编码 Gingerbread 或更早，这些确实是唯一的选择方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:11:20.337

不，不完全是。不推荐使用的方法仍然按照它们通常的方式运行，这只是意味着它们可能在未来的版本中不受支持，并且您不应该在新代码中使用它们。也就是说，如果您的目标是运行旧版本操作系统的设备，您别无选择，只能使用已弃用的方法。

# javascript - 如何在网页中创建二维网格？

> ID：10115226
> 
> 赞同：-3
> 
> 时间：2012-04-11T23:07:05.997
> 
> 标签：javascript, html, webpage

如何在网页中创建网格 (10X10) 并允许用户单击网格中的任何位置并以大约一位十进制记录 (x,y) 位置，例如覆盖值 0.0~10.0 或 0.1~9.9？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:11:23.240

使用 a[`<canvas>`](https://developer.mozilla.org/en/HTML/Canvas)作为网格，并[附加一个`click`事件监听](https://developer.mozilla.org/en/DOM/element.addEventListener)器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:15:37.980

您可以使用鼠标事件对象的 clientX 和 clientY 属性记录鼠标点击：

```
document.addEventListener('click', function(event){event.clientX;event.clientY;}, false); 
```

上面的代码只是一个演示，它甚至不是跨浏览器兼容的。`event.clientX`并`event.clientY`按住鼠标坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:26:18.420

## *[演示](http://jsbin.com/uzadoy/edit#javascript,html,live)*

我使用了 jQuery 库。

```
var boxX = 0;
var boxY = 0;
var box = '<div class="box" />'; // define the .box element

for(var i = 0; i<100;i++){       // create 100 boxes
  $('#grid').append(box);
}

$('.box').on('click',function(){
  boxX = $(this).position().left;
  boxY = $(this).position().top;
  $(this).text('X='+ boxX +' , Y='+ boxY);
}); 
```

而不是`.position()`（从父元素获取元素位置）
，您可以使用`.offset()`从窗口边界获取元素偏移量。

# java - 将打印到 Windows CMD 的所有内容存储在一个文件中

> ID：10115234
> 
> 赞同：1
> 
> 时间：2012-04-11T23:07:54.827
> 
> 标签：java, windows, cmd

有什么方法可以将 Windows 7 命令提示符上发生的所有事情保存在一个文件中。这样我就可以看到控制台上打印了哪些内容。我正在从命令提示符运行一个多线程 Java 程序 -

```
java -server -Xms512m -Xmx512m -XX:PermSize=512m -XX:MaxPermSize=512m -Duser.timezone=GMT-7 –jar BatchMain.jar -taskId V3-PERSONALIZATIONGEO-SAMPLE-TASK -noofthreads 1 -timeout 5 -numberOfIP 1000 -privateIPAddress false 
```

它会在命令提示符上打印很多东西，我想将所有这些打印在控制台上的东西存储到一个文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:12:30.383

您可以在命令后写“> outfile.name”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:25:04.447

就 Java 编程而言，您必须制作某种日志系统才能将程序的所有输出写入一个文件，或者如果您正在寻找组织，则可以写入多个文件。如果你只需要数据的某些片段和部分，我推荐使用这种方法。

[Dwrd 的回答](https://stackoverflow.com/a/10115263/1311659)是正确的。但是，如果您只需要输出的某些部分（例如 IP 地址），这将不是您要查找的代码 从程序的开始到结束，所有输出都将写入您指定的文件。为了更清楚地了解手头的主题，您将使用以下代码：

```
java -server -Xms512m -Xmx512m -XX:PermSize=512m -XX:MaxPermSize=512m -Duser.timezone=GMT-7 –jar BatchMain.jar -taskId V3-PERSONALIZATIONGEO-SAMPLE-TASK -noofthreads 1 -timeout 5 -numberOfIP 1000 -privateIPAddress false > myLog.txt 
```

这样做的缺点是命令提示符屏幕不会有任何输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T23:40:11.527

您可以直接在程序中或在控制台上捕获输出。

## 在控制台上

如果您想获得绝对的一切（STDOUT 和 STDERR），您需要重定向 STDOUT（来自 System.out）和 STDERR（来自 System.err）。您可以将两者重定向到同一个文件（添加`> log.txt 2>&1`到控制台命令的末尾），也可以将它们记录到不同的文件（添加`> BatchMain.log 2> BatchMain.err`到控制台的末尾）。

记录到单个文件 log.txt：

```
java -server -Xms512m -Xmx512m -XX:PermSize=512m -XX:MaxPermSize=512m -Duser.timezone=GMT-7 –jar BatchMain.jar -taskId V3-PERSONALIZATIONGEO-SAMPLE-TASK -noofthreads 1 -timeout 5 -numberOfIP 1000 -privateIPAddress false > log.txt 2>&1 
```

记录到单独的文件 BatchMain.log 和 BatchMain.err：

```
java -server -Xms512m -Xmx512m -XX:PermSize=512m -XX:MaxPermSize=512m -Duser.timezone=GMT-7 –jar BatchMain.jar -taskId V3-PERSONALIZATIONGEO-SAMPLE-TASK -noofthreads 1 -timeout 5 -numberOfIP 1000 -privateIPAddress false > BatchMain.log 2> BatchMain.err 
```

## 直接在您的程序中

在您的`main(String[] args)`方法（或其他适当的位置）中，将 System.out 和 System.err 设置为直接打印到文件（或同一个文件，如果您愿意）。例如：

```
package com.example.logging;

import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintStream;

public class LogToFiles {

    public static void main(String[] args) throws FileNotFoundException {
        System.setOut(new PrintStream("example.log"));
        System.setErr(new PrintStream(new FileOutputStream("example.err"), true));

        System.out.println("System.out example");
        System.err.println("System.err example");
    }

} 
```

如果您希望输出在控制台上也可见，您可以更进一步并插入您自己的中间 PrintStream 来执行此操作。

## 其他需要考虑的事项

请注意，Java 缓冲 System.out，因此如果您将 STDOUT 和 STDERR 记录到同一个文件中，您最终可能会得到包含两个 PrintStreams 交织的无意义输出，或者 STDOUT 中的某些内容可能会比相关消息打印得晚得多打印到 STDERR。一种解决方法是酌情调用`System.out.flush()`，但如果您将大量文本记录到`System.out`.

`System.out.println()`我建议不要使用[Java Logging](http://docs.oracle.com/javase/1.4.2/docs/guide/util/logging/overview.html)或[Log4J](http://logging.apache.org/log4j/)将所有内容打印到控制台并尝试捕获该输出，或者更进一步并使用[Apache Commons Logging](http://commons.apache.org/logging/)，它可以配置为在内部使用前两个系统中的任何一个。真正令人敬畏的部分是您不必猜测哪个类打印了每条日志消息，因为您会自动得到它。

如果您使用日志框架，您还可以通过设置单个变量来调整日志输出的详细程度——这将在发布时派上用场。

# c++ - 如何在等待程序启动混乱/GTK +时制作加载/介绍动画弹出窗口

> ID：10115235
> 
> 赞同：1
> 
> 时间：2012-04-11T23:08:22.677
> 
> 标签：c++, c, user-interface, gtk, clutter

我的程序需要几秒钟才能启动。我在 GUI 上使用混乱，我决定尝试弹出一些东西来表明程序正在启动。我只想让徽标弹出并旋转，然后在程序启动时消失。

所以在混乱中，我想我可以在主函数的第一部分创建一个新的舞台（窗口）添加一个演员，让演员旋转。该窗口将立即弹出，但没有内容，但在您启动混乱的主循环之前不会显示内容。

所以我只是想知道如何使用 clutter 或 GTK+ 来实现这一点。

如果你熟悉 reaper 4，录音程序，这个程序做的事情类似于我想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:16:00.727

您想要的称为启动画面。我对混乱不熟悉，但我发现了这个[GTK 闪屏示例](http://ricochen.wordpress.com/2009/10/12/splash-screen-with-gtk/)。

但是，我认为您以错误的方式处理问题。启动画面不是一个好主意，因为您只是增加了开销。你需要的是通过做一些 CPU 和/或 IO 分析来提高你的启动性能。按需加载东西，而不是一次全部加载会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:54:02.330

不幸的是，我对 Clutter 不熟悉。但我很确定如果没有在任何高级库中运行的主循环，将很难渲染动画。我会尝试将导致延迟的代码放入单独的线程中，并在启动完成时通知主循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T10:50:30.737

我使用的是这样的东西：

```
string splashfile = path_templ + "/splashimg.png";

GtkWidget *image=gtk_image_new_from_file(splashfile.c_str());
gtk_container_add(GTK_CONTAINER(SplashWindow), image);

gtk_widget_show_all(SplashWindow);

//Cycle through all iterations (refresh everything in the GUI)
while (gtk_events_pending()){
    gtk_main_iteration();
}
sleep(1);

(... rest of code ...)

gtk_main ();
gdk_threads_leave (); 
```

尤其是等待事件的最后一部分是关键

# scala - Scala SBT Akka Actors 的 application.conf

> ID：10115236
> 
> 赞同：22
> 
> 时间：2012-04-11T23:08:46.750
> 
> 标签：scala, sbt, akka

我想知道..你把`application.conf`配置演员的文件放在哪里？我正在尝试做[这里](http://typesafe.com/resources/getting-started/tutorials/getting-started-with-akka-scala.html#overriding-configuration-externally-optional)正在做的事情，但 SBT 没有收到文件 - 我的印象是 SBT 会找到`application.conf`并自动将其添加到我的`-classpath`. 我目前`application.conf`在`/project/application.conf`

我得到的错误是：

```
[ERROR] [04/11/2012 16:08:13.174] [HittingTimeSystem-akka.actor.default-dispatcher-2] [akka://HittingTimeSystem/user/master] error while creating actor
akka.config.ConfigurationException:router Actor[akka://HittingTimeSystem/user/master/workerRouter] needs external configuration from file (e.g. application.conf) 
```

谢谢！-kstruct

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-12T01:04:19.380

如果你把它放进去，它应该最终出现在类路径中`src/main/resources/application.conf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T11:16:24.833

刚刚更新：

```
//  val conffactory = ConfigFactory.load() //  from 'src/test/resources' if 'sbt test'
//  val conffactory = ConfigFactory.load() //  from 'src/main/resources' if 'sbt run'
    val conf = ConfigFactory.parseFile(new File("config/application.conf")).getConfig("my") // from '/config' where / - root of app 
```

# java - 播放随机声音 onTouch

> ID：10115238
> 
> 赞同：0
> 
> 时间：2012-04-11T23:09:09.350
> 
> 标签：java, android, touch-event

我正在尝试播放随机声音 onTouch 事件（当前正在工作），但声音实际上播放了两次 onTouch 事件，而不是按预期播放一次。我假设这是由于 UP 和 Down onTouch 事件。有什么想法吗？

注意：我在测试时注释掉了额外的随机声音文件。

```
package com.tmapps.wiub;

import java.util.Random;
import com.tmapps.wiub.SoundManager;
import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.Window;
import android.view.WindowManager;

public class Soundboard extends Activity {
    private SoundManager mSoundManager;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // FULLSCREEN CODE
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.main);

        mSoundManager = new SoundManager();
        mSoundManager.initSounds(getBaseContext());
        mSoundManager.addSound(0, R.raw.sound0);

     // COMMENTED OUT WHILE TESTING  
     // mSoundManager.addSound(1, R.raw.sound1);
     // mSoundManager.addSound(2, R.raw.sound2);
     // mSoundManager.addSound(3, R.raw.sound3);
     // mSoundManager.addSound(4, R.raw.sound4);
     // mSoundManager.addSound(5, R.raw.sound5);
     // mSoundManager.addSound(6, R.raw.sound6);
     // mSoundManager.addSound(7, R.raw.sound7);
     // mSoundManager.addSound(8, R.raw.sound8);
     // mSoundManager.addSound(9, R.raw.sound9);

    };

        Random r = new Random();
        int x = r.nextInt(1);

        switch (evt.getAction()) 
        {
            case MotionEvent.ACTION_DOWN:
            mSoundManager.playSound(x);
            return super.onTouchEvent(evt);

            case MotionEvent.ACTION_UP:
            break;
            default:
            break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:13:36.523

那是因为 ACTION_DOWN 和 ACTION_UP 都在触发，只在其中一个上实现代码

```
 public boolean onTouchEvent(MotionEvent evt) 
    {
        switch (evt.getAction()) 
        {
            case MotionEvent.ACTION_DOWN: 
            break;
            case MotionEvent.ACTION_UP:
            break;
            default:
            break;
        }
        return true;
    } 
```

# iphone - 嵌套推送动画可能导致导航栏损坏

> ID：10115240
> 
> 赞同：0
> 
> 时间：2012-04-11T23:09:27.590
> 
> 标签：iphone, objective-c, ios, ipad

在我的一个视图控制器中，假设 A，我有以下内容：

```
 OnbViewController *on = [[OnbViewController alloc] initWithNibName:nibName bundle:nil];
        onboardingTutorial.delegate_ = self;
self.test = on
 UINavigationController *nController = [[UINavigationController alloc] initWithRootViewController:self.test]
[self presentModalViewController:nController]
[nController release]; 
```

然后在 OnbViewController 里面我推到了导航控制器：

```
[self.navigationController pushViewController:someViewController]; 
```

然后在 didSelectRowForIndexPath: 我调用了一个委托，它是 A，在我调用的委托函数中，我尝试通过执行以下操作再次推送：

```
[self.test pushViewController:someOtherViewController]; 
```

然后这给了我这个错误：

```
nested push animation can result in corrupted navigation bar
Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
   Unbalanced calls to begin/end appearance transitions for <someOtherViewController: 0x6f942e0>. 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:30:45.997

相当复杂的调用顺序，但我看到的第一个问题是，您似乎是在 OnbViewController 上调用 pushViewController，而不是在其 navigationController 上。也许改变`[self.test.navigationController pushViewController:someOtherViewController];`就足够了？

编辑：在进一步研究这一点时，我注意到“嵌套推送动画”中的“动画”。onbViewController 是在 viewWillAppear 期间或类似的早期推送到 someViewController 吗？也许跳过第二个动画会起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:32:15.340

这是在那里创建的指针的真正纠结。self.test 是导航控制器 (nController) 的根 vc。您以模态方式呈现 nController，然后将其他视图控制器推送到它的 vc 堆栈上。

然后，当那个堆栈仍然存在时，你推入 self.test，这就像再次推入根。

让获取 didSelectRow 消息的 VC 进行推送。您仍然可以告诉代表它发生了。

# java - 在 ASyncTask.execute() 之后从 Activity 执行 x()

> ID：10115243
> 
> 赞同：4
> 
> 时间：2012-04-11T23:09:42.033
> 
> 标签：java, android, multithreading, android-activity, android-asynctask

这是一个我不知道该怎么做。基本上，我有一个 ASyncTask 类，它在后台照常工作。我想在它完成后做点什么。现在，在您继续说“只使用 onPostExecute()”之前，有一个问题。我需要运行的方法是在活动中，而不是在任务类中。

在我看来，我有两个选择。

## A：

```
 CustomTask task = new CustomTask();
    task.execute(passedParams);
            //when(task.execute is finished)
            {
                doX();
            } 
```

我希望我可以这样做，因为它是如此简单，让我检查任务何时完成，而不必不断地轮询它的活动和活动的 getStatus()。我不认为我会这么幸运，但如果有人有办法做到这一点，那就太好了

## 乙：

将活动作为参数传递给 ASyncTask。这很混乱，我对使用它不满意，但除此之外和对象引用，我不知道它是否会起作用

```
 CustomTask task = new CustomTask();
    task.execute(passedParams,MyActivity); 
```

然后在 PostExecute 任务中，我可以让它调用 MyActivity.doX();

* * *

## C：

第三种方法是使 asynctask 成为活动本身的私有类，但我真的想将它分开。可重用性和其他 -</p>

对此有什么想法吗？

综上所述，task.execute 完成后需要 doX() 。任何想法表示赞赏。

* * *

## 丁：

好的，我知道我在这里很顺利。我一直在想新的解决方案。可以从任何地方调用的类方法或静态方法。

```
public class ProfileSettings extends Activity
{
      public static void doX()
      {
          //Logic...
      }
} 
```

从异步任务

```
MyActivity.doX(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T23:20:19.620

选项 B 应该可以工作，有时是一个不错的选择，但有时我会为此使用匿名类。当您从活动中调用它时：

```
CustomTask task = new CustomTask() {
    @Override
    protected void onPostExecute(Long result) {
        super.onPostExecute(result);
        MyActivity.this.doX();
    }
}.execute(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T00:33:05.597

**选项 A：**

Android API 已经为此提供了内置函数[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)：

```
CustomTask task = new CustomTask();
task.execute(passedParams);
Result result = task.get(); // <- Block UI thread and waiting for AsyncTask finish.
this.doX(result); 
```

如您所见，这是一种不好的做法，因为它阻塞了 UI 线程并可能导致 ANR 异常，这样做实际上是牺牲了 AsyncTask 的好处，并使其与 UI 线程同步运行。

* * *

**选项 B 和 C**：

两者都是正确的做事方式，通过在 onPostExecute() 方法中调用 doX() 方法，

AsyncTask，顾名思义，就是与 UI 线程异步运行一个后台线程，一旦后台线程结束，就会在 UI 线程上调用 onPostExecute 方法。在项目构建时无法准确判断 onPostExecute 方法何时被调用（即 doInBackground 方法何时完成），因为它是在应用程序运行时确定的，我们唯一知道的是 onPostExecute 方法保证在 UI 线程上被调用在未来的某个时刻，换句话说，当在项目构建时编写代码时，我们永远无法确切知道 doInBackground 何时完成并且代码执行会跳回到 onPostExecute 方法之外的 UI 线程（除非您在代码中实现一些等待机制，例如 Option一个）。所以 onPostExecute 方法的目的是处理 doInBackground 方法完成后的所有内容，

选项 B 和 C 的区别在于 AsyncTask 是作为内部类还是单独的类来实现。这已在 StackOverflow 中被多次询问和讨论。大多数人认为出于可重用性等原因将它们分开是好的。从我的角度来看，我不同意。Java 编程语言有它的理由提供内部类语法来适应一些特殊的编码情况，当从 OOP 角度谈论代码重构时，更多地从问题抽象层面思考，而不是简单地在代码层面从 Activity 类中剥离内部类。正如您在示例中看到的那样，通过将 AsyncTask 从 Activity 中分离出来，您不会获得任何真正的好处，而是会增加代码复杂性（需要在类之间传递 Activity 上下文引用）来解决问题。

我认为您真正的问题是我们是否应该将 AsyncTask 内部类实现与 Activity 隔离。为了更好地重构 OOP 代码（可重用性、可测试性等），请查看我在此[StackOverflow 问题](https://stackoverflow.com/questions/8295003/best-way-to-manage-the-progressdialog-from-asynctask/8317071#8317071)中的答案，了解如何正确地将业务层与应用程序 UI 层隔离开来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-27T17:15:01.833

我能够使用接口实现此功能：

[http://howcanisolve.com/38646/android-java-equivalent-of-ios-block-callbacks](http://howcanisolve.com/38646/android-java-equivalent-of-ios-block-callbacks)

```
public interface ICallbacks { 
public void onResponse(JSONObject response);
public void onError(VolleyError error);
} 
```

然后在您的例程代码中放置一个新的回调实例：

```
public static void getPassagesForFirebaseUser(FirebaseUser user,
Context context, ICallbacks events) { 
  //here code and call ICallbacks methods
  if(result){ events.onResponse(response); }
  if(error){ events.onError(err); }
} 
```

最终您可以使用以下方法调用该方法：

```
getPassagesForFirebaseUser(user, context, new ICallbacks(){
  @Override
  public void onResponse(JSONObject response){
      //Success !!!
  }
  @Override
  public void onError(VolleyError response){
      //Error !!!
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:15:51.983

选项 B 通常更安全。但即便如此，你也需要小心。您需要将您的（不仅仅是类）的*实例*存储在. 如果在任务运行时被销毁（如果用户按下*后退*按钮怎么办？），您需要将此通知任务，以便任务不会尝试调用 dead 上的方法。`Activity``ASyncTask``Activity`*`Activity`*

 *如果`Activity`它恢复生机（例如，在屏幕旋转之后），那么您需要将新`Activity`的重新附加到正在运行的任务中。

这些东西很繁琐。*

# ruby - 如何打印数组？

> ID：10115246
> 
> 赞同：0
> 
> 时间：2012-04-11T23:10:02.083
> 
> 标签：ruby, arrays, iteration

我有数组：

```
example = ['foo', 'bar', 'quux'] 
```

我想迭代它并打印它，所以它`foo bar quux`会`['foo', 'bar', 'quux']`像：`each``for`

**注意：**我不能只做:`example[0];example[1]`等，因为数组的长度是可变的。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T23:12:42.547

这里：

```
puts array.join(' ') # The string contains one space 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T23:12:51.380

```
example.join(" ") #=> foo bar quux. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T23:13:50.617

如果你曾经`each`打印，它会工作得很好：

```
example.each {|item| print item; print " " } #=> foo bar quux 
```

但是，如果您想要的是一个项目用空格分隔的字符串，这就是该`join`方法的用途：

```
example.join(' ') #=> "foo bar quux" 
```

我怀疑您的问题是您将打印与迭代混淆了，因为`each`它只是返回原始数组 - 如果您想要在其中打印内容，您需要像我在上面的示例中那样实际打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:31:25.780

如果它们可以打印在彼此下方，请使用

```
puts example

=> 
foo
bar
quux 
```

否则使用其他答案中的解决方案

```
puts example.join(" ") 
```

# string - 带双引号的参数列表在 Bash 中无法正确传递

> ID：10115247
> 
> 赞同：0
> 
> 时间：2012-04-11T23:10:17.697
> 
> 标签：string, bash

我有一个调用另一个 Bash 脚本的 Bash 脚本。被调用的脚本会做一些修改和检查一些事情，转移，然后传递调用者命令行的其余部分。

在被调用的脚本中，我已验证我已管理好所有内容并准备好调用。这是我输入的一些调试风格的代码：

```
echo $SVN $command $@ > /tmp/shimcmd
bash /tmp/shimcmd
$SVN $command $@ 
```

现在，在 /tmp/shimcmd 你会看到：

```
svn commit --username=myuser --password=mypass --non-interactive --trust-server-cert -m "Auto Update autocommit Wed Apr 11 17:33:37 CDT 2012" 
```

也就是说，构建的命令都在一行上，非常好，包括 -m "my string with spaces" 部分。

这是完美的。它的“bash /tmp/shimcmd”执行也很完美。

但我当然不想要这个愚蠢的 tmp 文件之类的（只用它来调试）。问题是直接调用命令，而不是通过 shim 文件：

```
$SVN $command $@ 
```

导致 svn 命令本身不接收带空格的引号字符串——它使“-m “我的带空格的字符串”参数乱码，并把命令当作“-m 我的带空格的字符串”传递。

我尝试了各种疯狂的逃生方法，但都无济于事。不敢相信它这么严重地缠着我。同样，通过将相同的内容 ($SVN $command $@) 回显到文件然后执行该文件，就可以了。但是直接调用会使引用的字符串出现乱码。仅此元素即可。

有任何想法吗？

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:26:15.097

这是演示问题的一种方法：

```
$ args='-m "foo bar"'
$ printf '<%s> ' $args
<-m> <"foo> <bar"> 
```

这是一种避免它的方法：

```
$ args=( -m "foo bar" )
$ printf '<%s> ' "${args[@]}"
<-m> <foo bar> 
```

在后一种情况下， args 是一个数组，而不是带引号的字符串。

请注意，顺便说一句，它必须是`"$@"`，而不是`$@`，才能获得这种行为（其中避免了字符串拆分，有利于尊重数组条目的边界）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:29:06.533

你试过了吗：

```
eval "$SVN $command $@" 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:41:35.417

这个

```
echo -n -e  $SVN \"$command\"  > /tmp/shimcmd
for x in "$@"
  do
     a=$a" "\"$x\"
  done
echo -e " " $a >> /tmp/shimcmd
bash /tmp/shimcmd 
```

或者干脆

```
$SVN "$command" "$@" 
```

# vba - 我需要创建一个 Microsoft Word 宏来自动将图像大小调整为像素宽度

> ID：10115248
> 
> 赞同：1
> 
> 时间：2012-04-11T23:10:19.680
> 
> 标签：vba, ms-word

我正在为报告集构建宏库，但在许多情况下，我在报告中作为示例显示的图像需要调整为以下像素宽度之一：

*   300像素
*   400像素
*   500像素
*   600像素
*   700像素

我尝试创建一个宏，通过像素宽度更改每个图像的确切宽度，但它似乎忽略了纵横比并拉伸图像。是否可以使用宏锁定纵横比？

实际上，我想要的只是一个非常短的宏，它将图像的宽度调整 [X] 像素，并且什么都不做 - 但是，与任何其他调整大小的宏一样，我不断得到高度的怪异。

是否有仅按像素宽度调整大小的宏语言？

* * *

这是我一直在使用的百分比大小代码示例：

```
Sub FNG_setsize75percent()
'
' FNG_setsize75percent Macro
'
'
    Selection.Find.ClearFormatting
    With Selection.Find
        .Text = "^g"
        .Replacement.Text = "^p"
        .Forward = True
        .Wrap = wdFindAsk
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    Dim PercentSize As Integer
     PercentSize = 75
     If Selection.InlineShapes.Count > 0 Then
         Selection.InlineShapes(1).ScaleHeight = PercentSize
         Selection.InlineShapes(1).ScaleWidth = PercentSize
     Else
         Selection.ShapeRange.ScaleHeight Factor:=(PercentSize / 100), _
           RelativeToOriginalSize:=msoCTrue
         Selection.ShapeRange.ScaleWidth Factor:=(PercentSize / 100), _
           RelativeToOriginalSize:=msoCTrue
     End If

    End With
    Selection.InlineShapes(1).LockAspectRatio = msoTrue
End Sub 
```

现在，如果我真的可以使用类似的东西，我的猜测是我可以使用类似的东西：

```
Sub Img500px
    Selection.InlineShapes(1).LockAspectRatio = msoTrue
    Selection.InlineShapes(1).Width = 375#
    Selection.InlineShapes(1).Height = (Selection.InlineShapes(1).AbsoluteWidth / 375#) * Selection.InlineShapes(1).Height

End Sub 
```

除了一个小问题：它仍然不起作用。

```
Sub Img500px
    With Selection.Find
        .Text = "^g"
        .Replacement.Text = "^p"
        .Forward = True
        .Wrap = wdFindAsk
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
     Selection.InlineShapes(1).Width = 375#
     Selection.InlineShapes(1).Height = (Selection.InlineShapes(1).Width / 375#) * Selection.InlineShapes(1).Height

     End With
     Selection.InlineShapes(1).LockAspectRatio = msoTrue

End Sub 
```

这也不起作用。

因此，虽然“这是一个简单的数学问题”似乎可以解决它，但它仍然没有按预期工作。

这真的很简单：

500 像素/英寸/任何锁定纵横比，根据纵横比调整高度。

我同意这应该是一个“简单的数学问题”，但代码仍然没有做你应该做的事情。

当然，我可能只使用外部宏程序，而不是再尝试使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:53:20.160

您可以通过一些数学来保持纵横比固定：

```
Sub Tester()
    ResizeWidth Selection.InlineShapes(1), 200
End Sub

Sub ResizeWidth(s, newWidth As Double)
    s.Height = (s.Width / newWidth) * s.Height
    s.Width = newWidth
End Sub 
```

编辑：这（设置 LockAspectRatio）也适用于我 - 高度会自动调整。

```
Sub ResizeWidth(s, newWidth As Double)
    s.LockAspectRatio = msoTrue
    s.Width = newWidth
End Sub 
```

# php - 比较 2 列并删除不匹配的

> ID：10115249
> 
> 赞同：1
> 
> 时间：2012-04-11T23:10:21.533
> 
> 标签：php, mysql

```
$db->query("DELETE FROM   probid_auction_media 
WHERE auction_id NOT IN SELECT DISTINCT auction_id FROM probid_auctions"); 
```

这是我正在使用的代码，我想做的是将 probid_auction_media 中的auction_id 列与 probid_auctions 中的auction_id 列进行比较，并从 probid_auction_media 中删除任何不是数学的列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:12:21.483

你需要括号：

```
DELETE FROM   probid_auction_media 
WHERE auction_id NOT IN 
      ( SELECT auction_id FROM probid_auctions ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:12:48.667

你缺少括号。此外， a`DISTINCT`可能不是必需的：

```
DELETE FROM probid_auction_media
    WHERE auction_id NOT IN (SELECT auction_id FROM probid_auction) 
```

# javascript - facebook照片/图像垂直对齐？

> ID：10115252
> 
> 赞同：0
> 
> 时间：2012-04-11T23:11:14.957
> 
> 标签：javascript, html, css, facebook, vertical-alignment

facebook 如何垂直对齐其照片？我检查了他们的 img 标签及其父标签。父级不使用填充，img 不使用边距。有垂直对齐，但我认为它不适用于这种情况（请参阅[Image not vertical-align:middle](https://stackoverflow.com/questions/6420123/image-not-vertical-alignmiddle)）。我通常使用边距（有时使用 javascript）垂直对齐，所以我对 facebook 如何在没有填充或边距的情况下做到这一点很感兴趣。有谁知道他们是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:40:36.713

使用显示的测试代码：table-cell

1.  *参考[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp) *
2.  **[http://anotherfeed.com/stack/css/valign.php](http://anotherfeed.com/stack/css/valign.php)的测试页**

* * *

```
<!DOCTYPE html>
<html>
<head>

<title>StackOverflow on Another Feed</title>

<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
</head>
<body>
<div style="height: 500px; min-height: 500px; width: 500px; border: 1px solid; display: table-cell; vertical-align: middle; text-align: center">
<img src="http://anotherfeed.com/facebook_icon.png" style="display: inline-block; margin-left: auto; margin-right: auto;" />
</div>
</body>
</html> 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:20:34.820

**在 facebook 的网站上做了一些研究后，我找到了答案，这里是代码**

```
<!DOCTYPE html>
 <html>
 <head>
<style type="text/css">
        .img_contain {

            height: 700px;
            text-align: center;
            line-height: 700px;
            border: #333333 1px solid;
        }
        .img_contain img {
            display: inline-block;
            vertical-align: middle;
        }

    </style>
</head>
<body>
    <div class="img_contain">
        <img src="images/image.jpg" />
    </div>
</body>
    </html>

Only thing i was missing is adding <!DOCTYPE html> at the top of the document.Now its working. 
```

还有一件事，父级的高度和行高应该相等，并且应该大于它包含的图像的高度

# jquery - jQuery 缓动与旧菜单上的 CSS 类

> ID：10115253
> 
> 赞同：0
> 
> 时间：2012-04-11T23:11:16.887
> 
> 标签：jquery, jquery-ui, navigation, jquery-animate, easing

我正在使用一个较旧的导航系统，该系统使用 jQuery + CSS 来扩展垂直菜单的父级 -> 子级。我想将其更改为使用动画而不是 b/c 我想在翻转时添加填充+调整速度。

这是我希望转换的当前块：

```
jQuery('ul#nav-main-links > li.standby').mouseenter(function() {
    if (!jQuery(this).hasClass('selected')) {
     jQuery('ul#nav-main-links > li.exposed').attr('class', 'standby');
     this.className='exposed';
    }
}); 
```

菜单的当前 CSS

```
#inner-wrapper #nav-main #nav-main-links {
}
#inner-wrapper #nav-main #nav-main-links li {
  /*height:38px;*/
  margin-bottom:1px;/*width:181px;*/
}
#inner-wrapper #nav-main #nav-main-links li a {
  display:block;
  padding-right:13px;
  font:14px/38px 'TitilliumText14L800wt', Arial, sans-serif;
}
#inner-wrapper #nav-main #nav-main-links li a:link,
#inner-wrapper #nav-main #nav-main-links li a:visited {
  background:transparent url('/includes/images/sprite-nav-main.png') no-repeat scroll 0 -38px;
  color:#292929;
  line-height:38px;
}
#inner-wrapper #nav-main #nav-main-links li a:hover,
#inner-wrapper #nav-main #nav-main-links li a:active {
  background:transparent url('/includes/images/sprite-nav-main.png') no-repeat scroll 0 -76px;
  color:#292929;
}
#inner-wrapper #nav-main #nav-main-links li.selected a,
#inner-wrapper #nav-main #nav-main-links li.selected a:link,
#inner-wrapper #nav-main #nav-main-links li.selected a:visited,
#inner-wrapper #nav-main #nav-main-links li.selected a:hover,
#inner-wrapper #nav-main #nav-main-links li.selected a:active {
  background:transparent url('/includes/images/sprite-nav-main.png') no-repeat scroll 0 0;
  color:#fff;
}
#inner-wrapper #nav-main #nav-main-links li.exposed a,
#inner-wrapper #nav-main #nav-main-links li.exposed a:link,
#inner-wrapper #nav-main #nav-main-links li.exposed a:visited,
#inner-wrapper #nav-main #nav-main-links li.exposed a:hover,
#inner-wrapper #nav-main #nav-main-links li.exposed a:active {
  background:transparent url('/includes/images/sprite-nav-main.png') no-repeat scroll 0 -76px;
  color:#292929;
}
#inner-wrapper #nav-main #nav-main-links li ul {
  display:none;
}
#inner-wrapper #nav-main #nav-main-links li.selected ul,
#inner-wrapper #nav-main #nav-main-links li.exposed ul {
  display:block;
  left:10px;
  position:relative;
  width:171px;
}
#inner-wrapper #nav-main #nav-main-links li.selected ul li {
  border-bottom:1px solid #4f4f4f;
  margin-bottom:0;
}
#inner-wrapper #nav-main #nav-main-links li.exposed ul li {
  border-bottom:1px solid #adaaa2;
  margin-bottom:0;
}
#inner-wrapper #nav-main #nav-main-links li.selected ul li a,
#inner-wrapper #nav-main #nav-main-links li.selected ul li a:link,
#inner-wrapper #nav-main #nav-main-links li.selected ul li a:visited {
  background-color:#000;
  background-image:none!important;
  font:12px/26px 'TitilliumText14L400wt', Arial, sans-serif;
}
#inner-wrapper #nav-main #nav-main-links li.exposed ul li a,
#inner-wrapper #nav-main #nav-main-links li.exposed ul li a:link,
#inner-wrapper #nav-main #nav-main-links li.exposed ul li a:visited {
  background-color:#d0ccc3;
  background-image:none!important;
  color:#292929;
  font:12px/26px 'TitilliumText14L400wt', Arial, sans-serif;
}
#inner-wrapper #nav-main #nav-main-links li.selected ul li a:hover,
#inner-wrapper #nav-main #nav-main-links li.selected ul li a:active {
  color:#eb5d21;
  background-image:none!important;
}

#inner-wrapper #nav-main #nav-main-links li.exposed ul li a:hover,
#inner-wrapper #nav-main #nav-main-links li.exposed ul li a:active {
  color:#eb5d21;
  background-image:none!important;
} 
```

这是我目前正在使用的内容：

```
<script>
$(document).ready(function(){  
    $('ul#nav-main-links > li.standby').mouseover(function() {
        if (!$(this).hasClass('selected')) {
            $(this).switchClass("standby","exposed",600)
        }
    });
    $('ul#nav-main-links > li.standby').mouseout(function() {
        if (!$(this).hasClass('selected')) {
            $(this).switchClass("exposed","standby",600);
        }
    });
});     
</script> 
```

到目前为止，我无法减少紧张感。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:22:22.293

我根据 jquery 手风琴重新设计了菜单以使用此插件[http://bassistance.de/jquery-plugins/jquery-plugin-accordion/](http://bassistance.de/jquery-plugins/jquery-plugin-accordion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:21:28.967

有多种方法可以达到您想要的效果。

如果您的班级更改了以下属性：

```
.my-class {
    height      : 200px;
    width       : 200px;
    padding-top : 10px;
} 
```

`.animate()`然后，您可以将属性及其值复制到调用中，而不是将此类添加到元素中：

```
$(SELECTOR).animate({
    height      : 200px,
    width       : 200px,
    padding-top : 10px
}, 500); 
```

或者，您可以使用 CSS3 过渡来创建动画效果：

```
.my-class {
    height      : 200px;
    width       : 200px;
    padding-top : 10px;

    -webkit-transition : all 0.5s linear;
       -moz-transition : all 0.5s linear;
        -ms-transition : all 0.5s linear;
         -o-transition : all 0.5s linear;
            transition : all 0.5s linear;
} 
```

这消除了对 JS 代码进行任何更改的需要，但它只适用于现代浏览器。

另一种选择是使用`.switchClass()`jQuery UI 函数，它可以动画化从一个类到另一个类的变化，这样您可以将 CSS 保存在样式表中，将 JS 保存在一个地方，并且仍然可以动画化 CSS 属性的变化。

*   浏览器对 CSS3 过渡的支持： http: [//caniuse.com/#feat=css-transitions](http://caniuse.com/#feat=css-transitions)
*   CSS3 过渡文档：[https ://developer.mozilla.org/en/CSS/transition](https://developer.mozilla.org/en/CSS/transition)
*   jQuery UI 的文档：http `.switchClass()`: [//jqueryui.com/demos/switchClass/](http://jqueryui.com/demos/switchClass/)

# uiimage - iOS 4中的UITabBar setSelectionIndicatorImage

> ID：10115256
> 
> 赞同：0
> 
> 时间：2012-04-11T23:11:29.913
> 
> 标签：uiimage, uitabbarcontroller, uitabbar

我想知道如何将图像用于UITabBar中的选定项目，在ios5中我会这样做：

```
[[myTabBar tabBar] setSelectionIndicatorImage:[UIImage imageNamed:@"TabBar_Activated.png"]]; 
```

但在 iOS 4 中，该行给我一个错误，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:39:12.090

试试这个..当您选择标签时，这将显示图像...

```
[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"selection-tab.png"]]; 
```

这将为标签栏设置图像...

```
UITabBarItem *tab1 = [[UITabBarItem alloc] initWithTitle:@"Me" image:[UIImage imageNamed:@"tab-me.png"] tag:1];
//Set this tabitem in current view's tabBar.
[self setTabBarItem:tab1]; 
```

# iphone - 在情节提要中使用 UIPageViewController

> ID：10115257
> 
> 赞同：6
> 
> 时间：2012-04-11T23:11:34.283
> 
> 标签：iphone, xcode, ios5, storyboard, uipageviewcontroller

我正在寻找`UIPageViewController`与 Xcode 的故事板一起使用。我能找到的唯一例子是[这个](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)关于如何`UIPageViewcontroller`使用单独的 xib 文件实现的教程。

但是在本教程中，它`UIPageViewController`是在扩展类中以编程方式实例化的`UIViewController`。这使得翻译故事板如何解释`UIPageViewcontroller`（作为其自身的实例）变得复杂。

任何有关如何`UIPageViewController`使用 Xcode 的故事板创建功能的帮助将不胜感激。

**更新：**我设法通过使用默认页面控制器模板在 Xcode 中创建一个新项目来解决此问题。它使用了故事板并且很容易理解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T19:09:27.090

更新：我设法通过使用默认页面控制器模板在 xcode 中创建一个新项目来解决此问题。它使用了故事板并且很容易理解。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-26T14:34:46.210

将 Xcode 项目设置为 PageViewController 是实现此目的的一种方法，但是如果您想在现有的故事板中包含一个 PageViewController，您也可以这样做。

如果您将 PageViewController 场景拖放到情节提要上并连接一个 segue，则可以推送到该 PageViewController。然而，故事板中似乎存在一些错误，用于正确设置 PageViewController，例如，您无法连接委托和数据源。

解决此问题的一种简单方法是在您的 init 方法中简单地连接委托/数据源：

```
- (instancetype) initWithCoder:(NSCoder *)aDecoder
{
    if(self = [super initWithCoder:aDecoder])
    {
        self.delegate = self;
        self.dataSource = self;
    }
    return self;
} 
```

这将导致您的委托和数据源方法被正确调用，当然假设您希望数据源和委托是 PageViewController。设置完成后，您需要确保在加载视图时存在视图控制器。您可以使用 viewDidLoad 中 PageViewController 类的 setViewControllers 方法来完成此操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self setViewControllers:@[sweetViewController] direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished) {
        NSLog(@"Hooray I set my initial viewcontroller for my page view controller");
    }];
} 
```

创建 PageViewController 后，它将从您的 sweetViewController 开始，然后根据需要开始调用您的数据源和委托方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-25T17:23:15.633

使用 Xcode 7 有一种简单的方法可以做到这一点。让 ViewController 成为您的数据源并在一个 Storyboard 场景中委托，并将您的 UIPageViewController 嵌入到 ContainerView 中。然后在 ViewController 的 prepareForSegue 方法中捕获 UIPageViewController。

例如在斯威夫特：

```
override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {

    if let identifier = segue.identifier where identifier == "yourPageVCIdentifier"{
        if let pageController = segue.destinationViewController as? UIPageViewController {
            pageController.dataSource = self
            pageController.delegate = self
            self.pageVC = pageController
        }
    }
} 
```

# mysql - mysql：将表的所有列从varchar更改为decimal

> ID：10115258
> 
> 赞同：1
> 
> 时间：2012-04-11T23:12:11.570
> 
> 标签：mysql

我有一个表，其中包含所有 varchar 类型的列，但数据实际上是数字，即十进制（6,2）会更合适。如果有很多列，如何将所有列从 varchar 更改为 decimal。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:25:39.560

您可以使用 将单个列更改为十进制`ALTER TABLE tablename MODIFY COLUMN columnname DECIMAL(6,2);`。任何可以转换为数字的字符串都将被转换，其他的将被更改为零。

如果您想确定以非破坏性方式执行此操作，您可以改为`ALTER TABLE ADD COLUMN`添加一个小数列，然后添加，然后`UPDATE tablename SET decimalcolumn = textcolumn`使用 SELECT 检查任何不相等的行（它会将类型转换作为比较，所以和是相等的，如你所愿）。 `textcolumn``decimalcolumn``"5"``5.00`

我不知道有一种方法可以一次自动将相同的转换应用于多个列，尽管您可以使用 PHP 或其他编程语言通过从表中选择一行、遍历返回的列并运行 MODIFY 来实现每一个人。如果只有几列，手动完成可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:24:44.770

MySQL 的`ALTER TABLE`语句支持一次更改多个列。事实上，在一个语句中尽可能多地更改表的模式是首选和强烈推荐的。这是因为 MySQL 复制整个表来进行模式更改，但每个`ALTER TABLE`语句只复制一次。在修改非常大的表时，这是一个重要的节省时间！

也就是说，您可以通过几种方式排练您的更改。

首先，我会使用开发数据库来测试所有这些，而不是生产数据库。然后您可以使用`CREATE TABLE ... LIKE ...`来创建一个结构相同的表，然后使用`INSERT INTO ... SELECT * FROM ...`来复制数据。现在您可以尝试使用`ALTER TABLE ... MODIFY COLUMN ... DECIMAL(6,2)`. 如果您在一个列上执行此操作并收到消息`0 Warnings`，那么该列将毫无意外地转换，您可以测试下一个列。如果您确实收到警告，那么`SHOW WARNINGS`将显示其中的一些，以便您知道 MySQL 遇到了什么问题。

根据您对数据的了解程度，您还可以执行许多不同`SELECT`的 s 来查找和过滤它，以查看其中有多少可能超出范围或无法转换（例如，空白或文本而不是数字）。

是的，这种方法需要一些时间，但是一旦您对此感到满意，您可以将所有`MODIFY COLUMN`子句组合到一个语句中并在真实表上运行它。

# asp.net - 将页面方法添加到 ASP MVC 项目的正确方法？

> ID：10115259
> 
> 赞同：1
> 
> 时间：2012-04-11T23:12:16.840
> 
> 标签：asp.net, asp.net-mvc, pagemethods, webmethod

我刚刚开始使用 ASP.NET 和 MVC 模型。我已经围绕基本概念进行了研究，并且有一些模型、控制器和视图工作正常。我知道如何将 Web 方法和页面方法添加到 Web 服务，但无法为 MVC 项目弄清楚。

我（认为）我需要在我的项目中添加一个页面方法作为响应 AJAX 请求的正确方法。这是我的控制器的样子：

```
namespace MyProject
{
    public class OrderController : Controller
    {
        public ActionResult Place (ProductSku sku)
        {           
            var order = Order.NewOrder(sku);
            var db = new SystemDiscsLib.Database();
            db.SaveOrder(order);

            return View(order);
        }

        [WebMethod]
        public static string GetDate ()
        {
            return DateTime.Now.ToString();
        } 
```

发布到`/Order/Place`工作正常，并创建显示内容的视图`Views/Order/Place.aspx`，每个人都很高兴。但是，任何请求都会因错误而`/Order/GetDate`失败`The resource cannot be found`。我（认为）我已通过将其添加到我的`Web.config`, 下正确启用了页面方法`system.web`：

```
 <httpModules>
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </httpModules> 
```

我没有视图`GetDate`，因为我不想要视图，我只会返回 JSON 数据。[根据本文](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)`EnablePageMethods`，我打算使用 JQuery，所以我没有做这些`ScripManager`事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T23:27:18.220

PageMethods 用于 WebForms，而不是 MVC。改变你的方法看起来更像这样：

```
public JsonResult GetDate()
{
  return Json(DateTime.Now.ToString());
} 
```

请注意，该方法不再是静态的，您不应使用该`[WebMethod]`属性。

# css - 有时 Cassette 不会重写背景图像规则

> ID：10115264
> 
> 赞同：2
> 
> 时间：2012-04-11T23:12:34.017
> 
> 标签：css, asp.net-mvc-3, image, cassette

上下文： http: [//getcassette.net/documentation/stylesheets](http://getcassette.net/documentation/stylesheets)

具体来说：

> CSS 中的图像 URL 被重写。例如，文件 ~/styles/main.css，其内容为：
> 
> ```
> body { background-image: url(img/bg.jpg); } 
> ```
> 
> 转化为：
> 
> ```
> body { background-image: url(/_assets/images/styles/img/bg_25cb72e61bd5ag2_jpg); 
> ```

* * *

现在在我的特殊情况下，例如，在我的 .less 文件中，我可能有这样的规则：

```
.ribbon {
    background: url("/Public/image/blue-rib.png") no-repeat;
} 
```

并且 Cassette 应该重写它并且浏览器实际上接收到这个规则：

```
.ribbon {    
    background: url("/_cassette/file/Public/images/blue-rib_81ab1e7f2fdb27c91a9e9b41eed420390e21f7e0.png") no-repeat;
} 
```

并且图像显示正常。

在这种特殊情况下，使用相同的想法，后台规则**不会**被盒式磁带重写，用户会收到我在 .less 文件中手动输入的常规规则。

以下是事实：

*   工作规则和非工作规则都在同一个 .less 文件中。
*   该图像正确地位于我的 Visual Studio 项目的文件夹`/Public/images`中。
*   使用 Google Chrome 网络工具，我可以看到规则是`background: url("/Public/image/blue-rib.png") no-repeat;`- 没有像 Cassette 那样重写。

关于这可能是什么原因的任何想法？

我尝试在 web.config 中更改为 debug=false，运行应用程序，但没有任何效果。

尝试切换回 debug=true 并且仍然没有骰子。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:46:18.323

图像是否存在于磁盘上？卡带跳过它找不到的图像。

另外，切换到 CSS 相对 URL 是否有效？

# excel - Matlab绘制一个excel单元格

> ID：10115265
> 
> 赞同：4
> 
> 时间：2012-04-11T23:12:41.057
> 
> 标签：excel, matlab, rgb

有人可以帮我在matlab中通过rgb绘制一个excel单元格吗？我希望第 10 个单元格将由 rgb 绘制。

```
values{1}(1,:) = {'1', '2', '3', '4', '5', '6', '7', '8', '9', '10'};
headers = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'};
xlswrite('example.xls', [headers; values{1}]); 
```

十分感谢 ：]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:48:17.117

您可以使用以下过程为现有文件中的单元格着色：

```
values = {'1', '2', '3', '4', '5', '6', '7', '8', '9', '10'};
headers = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'};
rgb = [255 0 0]; %# if you have 0 to 1 values multiply by 255 and round
clr = rgb * [1 256 256^2]'; %'# convert to long number Excel understands

e = actxserver ('Excel.Application'); %# open Activex server
filename = fullfile(pwd,'example.xls'); %# full path required
if exist(filename,'file')
    ewb = e.Workbooks.Open(filename); %# open the file
else
    error('File does not exist.') %# or create a new file
end
esh = ewb.ActiveSheet;
for c = 1:numel(values)
    esh.Range(strcat(headers{c},values{c})).Interior.Color = clr;
end
ewb.Save
ewb.Close(false)
e.Quit 
```

您还可以使用十六进制值指定 RGB 颜色并使用`hex2dec`. 在这种情况下，顺序应该相反，例如`0000FF`红色。

# vb.net - 写入多个打开的文本流

> ID：10115267
> 
> 赞同：0
> 
> 时间：2012-04-11T23:12:47.150
> 
> 标签：vb.net, filesystemobject

我是 vb.net 的新手。我有很多使用 vb 6 的经验。我想知道的是如何替换文件系统对象。具体来说，我想使用文本流数组。我将如何在 vb.net 中编写以下内容

为简单起见，我假设我有一个 1 字节长的文本文件，并且只是从 0 到 9 的一系列重复 #。我希望任何有 1 的记录都转到 tsout(1) , 2 到 tsout(2) 等...

```
dim fso as new filesystemobject, tsIN as textstream, tsOut(10) as textstream
dim lineIN, i
set tsin = fso.opentextfile("C:\input.txt",forreading,false)
for i = 1 to 10
 set tsout(i) = fso.createtextfile("C:\output" & i & ".txt",true)
next
do while not tsin.atendofstream
 linein = mid(tsin.readline,1,1)
 tsout(linein).writeline(linein)
loop
for i = 1 to 10
 tsout(i).close
next
tsin.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:18:19.740

使用`System.IO.StreamWriter`s 和`System.IO.StreamReader`s：

```
Using in As New StreamReader("C:\input.txt")
    Dim out(9) As StreamWriter

    For i As Integer = 0 To 9
        out(i) = New StreamWriter("C:\output" & i & ".txt")
    Next

    While in.Position < in.Length
        Dim l As Integer = Integer.Parse(in.ReadLine().Substring(1, 1))

        out(l).WriteLine(l.ToString())
    End while

    For i As Integer = 0 To 9
        out(i).Close()
        out(i).Dispose()
    Next
End Using 
```

注意：这假定`Imports System.IO`在文件的开头或项目范围内。

# xml - 检查 XML NODE 是否为空

> ID：10115273
> 
> 赞同：0
> 
> 时间：2012-04-11T23:13:09.543
> 
> 标签：xml, vb.net, xmlnode

无论如何在到达代码的这一部分之前在这里检查一个空值吗？

```
tmpLabelData(0) = m_node.Item("CONTAINER_NAME").InnerText 
```

一些 XML 有它，而另一些则没有。我似乎找不到处理这些 null 的好方法？

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:34:33.463

```
If Not m_node.Item("CONTAINER_NAME") Is Nothing AndAlso _
       Len(m_node.Item("CONTAINER_NAME").InnerText) > 0 Then

   tmpLabelData(0) = m_node.Item("CONTAINER_NAME").InnerText 

End If 
```

# objective-c - 为用户调整大小并关闭时保存 NSWindow 大小

> ID：10115280
> 
> 赞同：21
> 
> 时间：2012-04-11T23:13:51.890
> 
> 标签：objective-c, interface-builder, resize, nswindow

我注意到 OS X 上的所有应用程序似乎都保存了您设置的大小。下次打开它时，它通常处于相同的位置和大小。

我正在制作一个应用程序，我注意到在调整大小后，如果我再次启动应用程序，它只是我在 Xcode 4 的 IB 中设置的大小，而不是我在启动时调整它的大小。

每次更改窗口大小时，我是否必须手动保存？或者有没有更简单的方法通过 IB 做到这一点？（如果改变任何东西，我的窗口确实设置了最小尺寸。）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-11T23:25:35.160

苹果让它变得简单。在界面生成器中，对于您的窗口，只需在`Autosave`字段中输入一个唯一的名称，它将以该名称保存在全局用户默认值下。例如

![在此处输入图像描述](../Images/a14c091357cb3cb2e35642cd8c0091d1.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T23:25:01.080

当您在 Interface Builder 中选择主窗口时，应该`Autosave`在属性检查器中调用一个属性。把任何名字放在那里对我来说都是诀窍。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-09T11:25:46.747

在 IB 中设置**`Autosave`**名称后，我可以看到我的窗口框架正在保存到它的首选项文件中，但自动恢复仍然不起作用。然后我记得取消选中**常规**设置下的**系统偏好****`Close windows when quitting an app`**设置中的复选框，并且窗口位置按预期恢复。

 ***** * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-29T20:06:26.580

如果你没有使用 IB 创建你的窗口，你可以在 Swift 中设置这个属性：

```
setFrameAutosaveName(_ name: NSWindow.FrameAutosaveName) 
```

（该`frameAutosaveName`属性`get`仅）

例如：

```
windowController.window?.setFrameAutosaveName("appWindow") 
```****

# sql - 在 SQL 中添加两个时间戳

> ID：10115281
> 
> 赞同：0
> 
> 时间：2012-04-11T23:14:01.623
> 
> 标签：sql, sql-server-2005

我在 sql`date1 varchar(4)`和`date2 varchar(4)`. 日期格式就是`HHmm`HH 是小时，mm 是分钟。

无论如何，在 SQL 中我们可以将两个时间戳相加并计算出多少小时和分钟？

例如

```
date1 = 0230  date2 = 0145 will total 0415
date1 = 0030  date2 = 0035 will total 0105 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:34:09.460

```
declare @d1 varchar(4), @d2 varchar(4), @dif int

set @d1 = '0230'
set @d2 = '0145'

set @dif = (CAST(left(@d1, 2) as int) * 60) + (CAST(left(@d2, 2) as int) * 60) + CAST(right(@d1, 2) as int) + CAST(right(@d2, 2) as int)

select RIGHT('00' + cast(floor(@dif / 60) as varchar), 2) + RIGHT('00' + CAST(@dif % 60 as varchar),2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:19:40.327

不确定这些真的是时间戳，什么不将它们存储为整数？

无论如何..不确定是否有mysql功能。您可以浏览：[http](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html) ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html 不确定它会提供多少帮助。如果您将它们存储为秒，那么您可以简单地让 mysql 添加它们，否则将它们拉入脚本中，将它们转换为秒，将它们加在一起，然后在需要时转换为更易读的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:22:40.327

试试这个（使用时间或日期时间）：

```
 select ADDTIME(time1,time2); 
```

在 mysql 中，时间的形式是

```
'01:02:03' 
```

日期时间是

```
 '2003-12-31 01:02:03' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:26:06.927

如果您碰巧使用 SQL Server，您也可以使用此处描述的 DATEDIFF 函数：http: [//msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

这将使您获得日期时间值的任何部分之间的差异。DATEADD 也可能对此有用，具体取决于您要如何处理它。

# java - 新的/奇怪的 Java “try()”语法？

> ID：10115282
> 
> 赞同：58
> 
> 时间：2012-04-11T23:14:04.127
> 
> 标签：java, syntax, try-catch

在使用 Eclipse 中的自定义格式选项时，在其中一个示例代码中，我看到了如下代码：

```
/**
 * 'try-with-resources'
 */
class Example {
    void foo() {
        try (FileReader reader1 = new FileReader("file1"); FileReader reader2 = new FileReader("file2")) {

        }
    }
} 
```

我从来没有见过`try`这样的用法，而且我已经用 Java 编码 9 年了！有谁知道你为什么要这样做？这样做的可能用例/好处是什么？

我看到的另一段代码，我认为是一个非常有用的速记，所以我也在这里分享它，它的作用很明显：

```
/**
 * 'multi-catch'
 */
class Example {
    void foo() {
        try {
        } catch (IllegalArgumentException | NullPointerException | ClassCastException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-11T23:15:13.673

它是在 Java 7 中添加的。它被称为[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语句。

/编辑

还不如把这个也扔在这里。`Lock`如果你使用这样的包装类，你可以使用 try-with-resources 语句来管理s：

```
public class CloseableLock implements Closeable {
    private final Lock lock;

    private CloseableLock(Lock l) {
        lock = l;
    }

    public void close() {
        lock.unlock();
    }

    public static CloseableLock lock(Lock l) {
        l.lock();
        return new CloseableLock(l);
    }
}

try(CloseableLock l = CloseableLock.lock(lock)) { // acquire the lock
    // do something
} // release the lock 
```

但是，由于您必须为每个资源声明一个变量，因此这样做的好处是值得商榷的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T23:16:24.970

这是 Java 7 的新 try-with-resources 声明：http: [//download.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html](http://download.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T23:16:55.277

这些是 JDK7 中引入的更改。

第一个语句是 try-with-resources。我不知道它们存在的确切原因，但异常通常是由输入流等引起的，我想它只是提高了可读性。编辑：感谢其他回答者，我阅读了 javadoc，现在我知道它将关闭所有实现 AutoCloseable 的 i/o 流，`finally`在很多情况下都不需要块

第二个是多捕获，当您有不同的异常以完全相同的方式处理时，这非常方便。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T23:17:59.033

它被称为资源尝试。这是一种不必自己清理的方法，因为语言会为你做这件事。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-13T11:50:00.047

用法与`using(Resource)`中相同`C Sharp`，这意味着当您的程序离开此代码块时，此资源将自动回收。（只是我的看法）

> try-with-resources 语句确保每个资源在语句结束时关闭。任何实现 java.lang.AutoCloseable 的对象，包括所有实现 java.io.Closeable 的对象，都可以用作资源

[try-with-resources 声明](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-11T05:06:25.133

它是在 java 7 中添加的。它被称为 try with resources。在 java 7 版本中引入了 Try with resources 语句功能。Try with resource 语句是声明一个或多个语句的 try 语句。资源是程序完成后必须关闭的对象。

在 java 7 之前，我们使用 finally 块来关闭我们在程序中使用过的资源。在 finally 块中，我们必须手动关闭我们在程序中使用的所有资源。有关更多信息，您可以访问[尝试资源](http://www.youstupidcoder.com/2017/11/try-with-resources-with-java-9.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T00:49:50.937

这被称为尝试资源。在使用资源的尝试中，在资源部分中声明的任何类型的可关闭流都将在尝试语句完成后关闭。所以它几乎是一个

```
try{
InputStream is;
//Stuff
}finally{
is.close()
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-27T13:08:01.430

try-with-resources 语句是声明一个或多个资源的 try 语句。资源是程序完成后必须关闭的对象。try-with-resources 语句确保每个资源在语句结束时关闭。任何实现 java.lang.AutoCloseable 的对象，包括所有实现 java.io.Closeable 的对象，都可以用作资源。

# c++ - 如何获取 WinRT 上的逻辑 CPU 数量？

> ID：10115283
> 
> 赞同：4
> 
> 时间：2012-04-11T23:14:14.717
> 
> 标签：c++, winapi, boost, microsoft-metro, windows-runtime

我正在尝试为 WinRT 编译 Boost 1.49.0。我把它归结为一种方法：GetSystemInfo()，它在 boost::thread::hardware_concurrency() 中用于获取系统上逻辑处理器的数量。

我还没有在 WinRT 中找到任何替代品。

有没有我可以使用的替代方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T23:04:22.600

[`GetNativeSystemInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724340(v=vs.85).aspx)您可以调用Metro 风格应用程序中允许的 Windows API 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T23:47:28.210

似乎没有一种简单的方法可以在 WinRT 中获取此信息。如果您只想知道处理器架构，那么您可以使用`Windows.System.ProcessorArchitecture`，但这不会告诉您有多少逻辑 CPU 可用。`Windows.System.Threading`也不告诉你这些信息。

要获取有关物理 CPU 的信息，我在 MSDN 论坛上发现[了这个问题](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/02bf17f2-419b-46a6-9882-4fe21d988db1)，这表明我们可以使用[DeviceEnumeration](http://code.msdn.microsoft.com/windowsapps/Device-Enumeration-Sample-a6e45169)来获取此信息。通过使用[GUID_DEVICE_PROCESSOR](http://msdn.microsoft.com/en-us/library/ff545776%28VS.85%29.aspx) ({97FADB10-4E33-40AE-359C-8BEF029DBDD0}) 的 GUID，您可以枚举所有处理器。

在 Javascript 中，这应该看起来像这样 - 对于 C++ 示例，请参阅MSDN 上的[设备枚举示例：](http://code.msdn.microsoft.com/windowsapps/Device-Enumeration-Sample-a6e45169)

```
Windows.Devices.Enumeration.DeviceInformation.findAllAsync('"System.Devices.InterfaceClassGuid:="{97FADB10-4E33-40AE-359C-8BEF029DBDD0}""')
.then(function (info) {
    for (var i = 0; i < info.length; i++) {
        var device = info[i];
    }
}); 
```

在我的机器上，这给了我各种设备、声卡、PCI 和 USB 处理器，所以我不确定是否有更好的方法来获取 CPU，但我确实得到了我拥有的 CPU 的信息

```
"Intel(R) Core(TM) i7 CPU       Q 740  @ 1.73GHz" 
```

不幸的是，这个信息似乎没有包含一个简单的标志来告诉你 CPU 的数量，因此我认为很难获得多个逻辑 CPU。我建议你在 MSDN 论坛上提问。他们通常反应灵敏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:40:46.277

System.Environment.ProcessorCount 应该给你核心的数量。

# mongodb - 跳过 mongo 上限集合

> ID：10115284
> 
> 赞同：5
> 
> 时间：2012-04-11T23:14:15.593
> 
> 标签：mongodb, pymongo

我在 mongodb 中有一个非常大的上限集合。鉴于上限集合结构是可预测的（即预定义排序、预定义内存占用等），是否有更好的方法来获取插入的最新项目上的光标而不是迭代？

换句话说，我现在正在做的是获取我的集合的大小 (n)，然后创建一个游标，设置 skip=n-1 以将我放在集合的末尾。然后我迭代光标并处理集合中的所有新添加。

这种方法的问题是我的收藏量很大。假设有 1100 万条记录。这需要 20 分钟才能跳过。这意味着当我的光标开始发出数据时，它落后了 20 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:03:01.723

您是否尝试过为集合建立索引并使用 $gt - 尽管索引会对集合的写入速度产生一些影响，但这应该会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:01:08.170

试试 db.cappedCollection.find().limit(1).sort({$natural:-1}) 。

# foursquare - 如何验证 Foursquare Checkin 的有效性？

> ID：10115285
> 
> 赞同：0
> 
> 时间：2012-04-11T23:14:57.053
> 
> 标签：foursquare

使用 Foursquare API，有什么方法可以确定用户离他签到的地点有多远？返回的`checkin`对象没有任何指示用户 GPS 坐标是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:43:32.170

Foursquare 故意不公开“作弊”位或用户设备通过 API 报告与场地的距离。绝大多数foursquare用户不会作弊，用户报告的位置与场地位置之间的大多数“不规则”是由于GPS精度差或用户在某个地点进行“后签到”。他们所在的位置，但忘了早点入住。

我对开发人员的建议是：作弊是要么忽略它和/或在事后检测它。

*   **忽略作弊**：尝试检测作弊的成本/收益比通常不值得。不仅要努力建立一个有效的系统，而且你会经常出现误报，惩罚合法使用，导致你剥夺用户试图按预期使用系统的权利，这不是他们自己的过错。如果你仍然担心，那么你可以设计你的系统，让用户要么通过作弊获得很少的收益（他们只是剥夺了自己，或者奖励是物质的，所以他们一无所获）或者会有反对作弊的社会压力（例如foursquare的朋友-范围内的排行榜意味着如果用户公然作弊，朋友们通常会很清楚，从而抵消了作弊用户的任何实际利益）

*   **事后**检测作弊：当您可以查看用户的整个活动而不是尝试在每次签到时做出决定时，您将有更好的运气/精确检测作弊事后。经常作弊的用户应该很容易通过使用简单规则的周期性工作来检测。一个在 100 次签到中作弊的用户将更难被发现，但无论您选择采用何种机制，这都是正确的（而且偶尔的假阴性比偶尔的假阳性更好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:37:50.397

也许。

来自[Checkin 响应对象的 API 文档](https://developer.foursquare.com/docs/responses/checkin)：

> **签入响应**
> 
> **location** *可选*如果此签入的类型是“shout”或“venueless”，则此字段可能存在，并且可能包含 lat、lng 对和/或名称，提供有关用户当前位置的非结构化信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:51:51.817

我认为使用当前 API 进行正常签入是无法做到的。`ll`（纬度和经度）甚至不是[当前 API 版本](https://developer.foursquare.com/docs/checkins/add)中签入的必填字段。

# google-app-engine - version.myappid.appspot.com 和 version.latest.myappid.appspot.com 有什么区别？

> ID：10115290
> 
> 赞同：4
> 
> 时间：2012-04-11T23:15:46.743
> 
> 标签：google-app-engine

Google App Engine 文档指出，访问已部署应用的特定版本的 URL 是 .latest..appspot.com。然而，GAE 管理员网页链接到版本选项卡中的 ..appspot.com 并省略了“最新”。

知道“最新”是做什么用的吗？它实际上不需要吗？是否省略它不会为您提供为该特定版本部署的最新代码？

参考： [https ://developers.google.com/appengine/docs/java/config/appconfig](https://developers.google.com/appengine/docs/java/config/appconfig)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:24:44.247

该`*.latest.app.appspot.com`约定最初是访问特定版本应用程序的唯一方法。不久前，这已更改为直接将它们作为子域直接访问；`latest`被保留为特例，以免破坏旧的 URL。

# foursquare - 如何获得用户在 Foursquare Checkin 上获得的积分数？

> ID：10115297
> 
> 赞同：2
> 
> 时间：2012-04-11T23:16:51.543
> 
> 标签：foursquare

我查看了 Foursquare API 文档，但找不到让 Foursquare 告诉我用户为特定签到获得多少积分的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T10:06:00.747

[`checkin`](https://developer.foursquare.com/docs/responses/checkin)响应具有`score`文档中未（尚未）提及的字段：

```
 "score":  {
    "scores":  [
       {
        "points": 3,
        "icon": "https://foursquare.com/img/points/discovery-venue3.png",
        "message": "First time at Frauenkirche"
      },
       {
        "points": 2,
        "icon": "https://foursquare.com/img/points/discovery.png",
        "message": "First among friends to check in at Frauenkirche"
      }
    ],
    "total": 5
  } 
```

# php - 会话不会继续重定向

> ID：10115305
> 
> 赞同：3
> 
> 时间：2012-04-11T23:17:35.070
> 
> 标签：php, session, set, session-variables

这是代码：

```
final public function login($email) {
    $this->email = mysql_real_escape_string($email);
    $this->q = "SELECT id FROM users WHERE mail = '$this->email'"; 
    $this->r = mysql_query($this->q);
    $this->id = mysql_result($this->r, 0);
    $_SESSION['id'] = "$this->id";

    header('Location: me.php');
    exit;
    } 
```

我不确定当我重定向会话时不会留下来。我已经在当前页面上回应了它，它显示了。有什么解决办法吗？我有一个全局命名空间，因此会话设置在所有文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:21:24.913

每当您在 PHP 中处理会话时，您应该使用`session_start()`将会话数据加载到内存中。

每个页面只调用`session_start()`一次。

# security - JAAS + 来自数据库的身份验证

> ID：10115307
> 
> 赞同：0
> 
> 时间：2012-04-11T23:17:39.027
> 
> 标签：security, jakarta-ee, jboss, ejb-3.0, jaas

我正在尝试使用 JAAS 从数据库执行身份验证我已经像这样配置了 login-config.xml

```
<application-policy name="e-procurment_domaine">
<authentication>
<login-module code="org.jboss.security.auth.spi.DatabaseServerLoginModule" flag="required">
<module-option name = "dsJndiName">BasepfeDS</module-option> 
<module-option name="securityDomain">java:/jaas/e-procurment_domaine</module-option>
<module-option name="principalsQuery">SELECT pass FROM personne WHERE login=?</module-option>
<module-option name="rolesQuery">SELECT disc  FROM personne  WHERE login=?</module-option>
</login-module>
</authentication>
</application-policy> 
```

我写了一个测试：这个

```
@Test
    public void testFindALL() {
        System.out.println("Debut  test de la méthode findALL");

//       WebAuthentication wa=new WebAuthentication();
//       wa.login("zahrat", "zahrat");
        securityClient.setSimple("zahrat", "zahrat");

        try {
            securityClient.login();
        } catch (LoginException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Acheteur acheteur = new Acheteur();
        System.out.println("" + acheteurRemote.findAll().size());

        // } catch (EJBAccessException ex) {
        // System.out.println("Erreur attendue de type EJBAccessException: "
        // + ex.getMessage());

        // } catch (Exception ex) {

        // ex.printStackTrace();
        // fail("Exception pendant le test find ALL");
        System.out.println("Fin  test find ALL");}

    // } 
```

测试失败，我不知道为什么，但是当我使用 .property 文件的方法更改 polycy 时，它可以工作..

我在会话 BEAN 类上使用注释

```
@SecurityDomain("e-procurment_domaine")
@DeclareRoles({"acheteur","vendeur","physique"})
@RolesAllowed({"acheteur","vendeur","physique"}) 
```

以及方法的会话注释

```
@RolesAllowed("physique")
    @Override
    public List<Acheteur> findAll() {
        log.debug("fetching all Acheteur");
        return daoGenerique.findWithNamedQuery("Acheteur.findAll");
    } 
```

我认为测试可以访问我的数据库是否需要 mysql DRIVER 或 JBOSS 上的特殊配置？

* * *

堆栈跟踪是：

```
 javax.ejb.EJBAccessException: Invalid User
    at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2.java:161)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:41)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.core.context.CurrentInvocationContextInterceptor.invoke(CurrentInvocationContextInterceptor.java:47)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.interceptor.EJB3TCCLInterceptor.invoke(EJB3TCCLInterceptor.java:86)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.stateless.StatelessContainer.dynamicInvoke(StatelessContainer.java:392)
    at org.jboss.ejb3.session.InvokableContextClassProxyHack._dynamicInvoke(InvokableContextClassProxyHack.java:53)
    at org.jboss.aop.Dispatcher.invoke(Dispatcher.java:91)
    at org.jboss.aspects.remoting.AOPRemotingInvocationHandler.invoke(AOPRemotingInvocationHandler.java:82)
    at org.jboss.remoting.ServerInvoker.invoke(ServerInvoker.java:898)
    at org.jboss.remoting.transport.socket.ServerThread.completeInvocation(ServerThread.java:791)
    at org.jboss.remoting.transport.socket.ServerThread.processInvocation(ServerThread.java:744)
    at org.jboss.remoting.transport.socket.ServerThread.dorun(ServerThread.java:548)
    at org.jboss.remoting.transport.socket.ServerThread.run(ServerThread.java:234)
    at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:216)
    at org.jboss.remoting.Client.invoke(Client.java:1961)
    at org.jboss.remoting.Client.invoke(Client.java:804)
    at org.jboss.aspects.remoting.InvokeRemoteInterceptor.invoke(InvokeRemoteInterceptor.java:60)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.tx.ClientTxPropagationInterceptor.invoke(ClientTxPropagationInterceptor.java:61)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.security.client.SecurityClientInterceptor.invoke(SecurityClientInterceptor.java:65)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:77)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.async.impl.interceptor.AsynchronousClientInterceptor.invoke(AsynchronousClientInterceptor.java:143)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.remoting.PojiProxy.invoke(PojiProxy.java:62)
    at $Proxy12.invoke(Unknown Source)
    at org.jboss.ejb3.proxy.impl.handler.session.SessionProxyInvocationHandlerBase.invoke(SessionProxyInvocationHandlerBase.java:185)
    at $Proxy11.findAll(Unknown Source)
    at com.soutem.test.UtilsateurSessionBean.testFindALL(UtilsateurSessionBean.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
    at org.jboss.aspects.remoting.InvokeRemoteInterceptor.invoke(InvokeRemoteInterceptor.java:72)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.tx.ClientTxPropagationInterceptor.invoke(ClientTxPropagationInterceptor.java:61)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.security.client.SecurityClientInterceptor.invoke(SecurityClientInterceptor.java:65)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:77)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.async.impl.interceptor.AsynchronousClientInterceptor.invoke(AsynchronousClientInterceptor.java:143)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.remoting.PojiProxy.invoke(PojiProxy.java:62)
    at $Proxy12.invoke(Unknown Source)
    at org.jboss.ejb3.proxy.impl.handler.session.SessionProxyInvocationHandlerBase.invoke(SessionProxyInvocationHandlerBase.java:185)
    at $Proxy11.findAll(Unknown Source)
    at com.soutem.test.UtilsateurSessionBean.testFindALL(UtilsateurSessionBean.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:39:01.570

它有效，与此政策

```
 <application-policy name="testDB"> <authentication><login-module code="org.jboss.security.auth.spi.DatabaseServerLoginModule"flag="required">
<module-option name="dsJndiName">java:/BasepfeDS</module-option><module-option name="principalsQuery"> select pass from personne  where login=?</module-option><module-option name="rolesQuery"> select disc, 'Roles' from personne where login=?</module-option></login-module></authentication> 
```

JBOSS 文档非常有用且清晰[http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html_single/index.html#sect-DatabaseServerLoginModule](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html_single/index.html#sect-DatabaseServerLoginModule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:13:09.960

当然，MySQL 驱动程序必须部署到 JBoss。并且您必须在 JBoss 配置控制台中定义名为“BasepfeDS”的 JDBC 连接。

Full Stack Trace 对调试更有帮助...

# java - C2DM 寄存器频率

> ID：10115309
> 
> 赞同：1
> 
> 时间：2012-04-11T23:17:57.103
> 
> 标签：java, android, android-c2dm

我正在测试 C2DM 服务。[我按照这个指南](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)实现了我的代码，并制作了一个用于发送消息的小 php 脚本，一切运行正常。

然后我重新启动手机并（不打开应用程序）发送了另一条消息，它也收到了，所以我多久执行一次**com.google.android.c2dm.intent.REGISTER**以始终接收消息？每次安装一次或更频繁？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:35:16.827

> 这是在移动设备上运行的 Android 应用程序注册以接收消息时发生的事件序列：
> 
> 1.  当应用程序第一次需要使用消息服务时，它会触发一个注册 Intent 到 C2DM 服务器。这个注册Intent（com.google.android.c2dm.intent.REGISTER）包括sender ID（即授权给应用发送消息的账号，一般是应用开发者设置的账号的邮箱地址） ，以及应用程序 ID。
> 2.  如果注册成功，C2DM 服务器会广播一个 REGISTRATION Intent 给应用程序一个注册 ID。应用程序应存储此 ID 以供以后使用。**请注意，Google 可能会定期刷新注册 ID，因此您在设计应用程序时应了解 REGISTRATION Intent 可能会被多次调用。您的应用程序需要能够做出相应的响应。**
> 3.  为了完成注册，应用程序将注册 ID 发送到应用程序服务器。应用程序服务器通常将注册 ID 存储在数据库中。
> 
> 注册 ID 会一直持续到应用程序明确取消注册，或者直到 Google 为您的应用程序刷新注册 ID。

来自[Google Android C2DM](http://code.google.com/android/c2dm/)

# java - android中的SharedPreference（告诉朋友+禁用对话框通知）

> ID：10115310
> 
> 赞同：0
> 
> 时间：2012-04-11T23:17:58.667
> 
> 标签：java, android

我正在开发一个具有共享偏好的 android 应用程序，其中包含： - 铃声（完成）

*   禁用对话框通知（闹钟、短信、彩信）（还没有，请阅读代码内的注释）

- 告诉朋友（我确定我的代码是正确的，但我不确定如何使用共享偏好设置 + 我现在确定应该使用的位置和方法 - 请阅读代码中的注释）

```
 public class Setting extends PreferenceActivity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs);
}
@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    String ringtonePreference;
    // Get the xml/preferences.xml preferences
                    SharedPreferences prefs = PreferenceManager
                                    .getDefaultSharedPreferences(getBaseContext());
     ringtonePreference = prefs.getString("ringtonePref",
                                    "DEFAULT_RINGTONE_URI");

}
  //disable all Notification (Alarm , SMS,MMS) 
     //what is the method that i should put this code at it? onStart?onDestroy?or what?
 SharedPreferences sharedPreferences = this.getPreferences(MODE_PRIVATE);
boolean hideNotification = sharedPreferences.getBoolean("checkbox", false);

if(!hideNotification)
    alertDialog.show();
}

 //tell friend
 //i am not sure if this is right place to this code
     //if it is the right place then what is the method that i should put this code at it?onStart?onActivityResult?or what?

SharedPreferences prefs1 = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
 TellFriendPreference = prefs1.getString("tellfriend","null");
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);
    String str= item.toString();
    if(str=="Tell Friends"){
        Toast.makeText(this,"First", Toast.LENGTH_LONG).show();
        //Go to tell friend activity 
        //Intent i = new Intent (Help.this, .class);
        //startActivity(i);
        Intent intent = new Intent(android.content.Intent.ACTION_SEND);
        intent.setType("text/plain");
        intent.putExtra(android.content.Intent.EXTRA_TEXT, "Check out  s Application for Android. Download it today from http://s.com");  
        startActivity(Intent.createChooser(intent, "Tell friends:")); 

        startActivity(intent);

 } 
```

这是 prefs.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

   <PreferenceCategory android:title="Second Category" >
    <RingtonePreference
        android:name="Ringtone Preference"
        android:key="ringtonePref"
        android:summary="Select a ringtone"
        android:title="Ringtones" />

    <CheckBoxPreference
        android:defaultValue="true"
        android:key="checkbox"
        android:summary="Check the Box"
        android:title="Disable Notification" />
    <Preference
         android:name="tell Preference"
         android:key="tellfriend"
        android:summary="if u want to tell ur friends by usinf"
        android:title="Tell Friend" />
     </PreferenceCategory>

   </PreferenceScreen> 
```

请帮助我，我应该在几个小时后提交

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:46:29.940

我解决了我的问题。我只是在另一个活动中告诉朋友，我的代码是正确的。

# c++ - 如何知道是否从特定函数c ++调用了函数

> ID：10115318
> 
> 赞同：1
> 
> 时间：2012-04-11T23:19:24.280
> 
> 标签：c++, callstack

我想知道是否有办法知道一个函数是否是从其他特定函数调用的。

```
doc(){
foo();
}

bar() {
doc();
}

foo() {
if (bar in the callStack ) { /* do this */}
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:20:37.840

如果不使用许多特定于平台的技巧，您将无法做到这一点。调试器会为您提供该信息，但一般情况下，如果不使用 C++ 中的 ASM 黑客程序，您将无法访问堆栈。

如果你必须这样做，那么你的设计就有问题。您想做什么以便我们可以提供帮助？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T23:26:57.720

并不是说这是一个好主意或好的设计，但当然您可以使用另一个全局标志，例如：

```
doc(){
   foo();
}

int inBar = 0;

bar() {
   inBar = 1;
   doc();
   inBar = 0;
}

foo() {
if (inBar) { /* do this */}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T23:51:07.503

您应该使用适合您的编译器的库。

对于 GCC，您可以考虑[Backtraces](http://www.gnu.org/software/libc/manual/html_node/Backtraces.html)。这个基于 GCC builtins [c/c++: call stack v.2](http://stupefydeveloper.blogspot.com.br/2009/09/cc-call-stack-v2.html)。

对于 Visual CI，听说过[StackWalk64](http://msdn.microsoft.com/en-us/library/ms680650%28VS.85%29.aspx)，但我自己从未使用过。

当然，您也可以制作自己的“痕迹”，但我认为这不是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:49:16.213

您可以修改 bar() 以在进入时将全局布尔值设置为 true，在退出时设置为 false。在 foo() 中测试 bool 会告诉你是否在 bar() 调用堆栈中。

```
namespace {
   bool test_bar = false;

}

void bar( ) {
   test_bar = true;

   // do stuff

   test_bar = false;
} 
```

如果您需要以上内容在多线程环境中工作，那么全局 bool 将必须是线程本地的（使用类似 boost::thread_specific_ptr 的东西）这种结构应该只用于跟踪难以捕获的竞争条件调试器，它是一个快速而肮脏的工具，其他用途表明设计不佳。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T23:53:51.487

> 如何知道是否从特定函数c ++调用了函数

你不能那样做。但是，您可以向函数添加布尔参数

```
foo(bool calledFromBar = false) {
     if (calledFromBar) { /* do this */}
} 
```

并从栏设置此标志。然而，这将导致另一个问题——没有什么可以阻止任何其他函数设置标志。

我认为这个（附加问题）可以这样解决：

```
class BarFlag{
private:
    bool flag;
protected:
    friend void doc();
    BarFlag(bool flag_)
    :flag(flag_){
    }
public:
    inline operator bool() const{
        return flag;
    }
    BarFlag()
    :flag(false){
    }
}

void foo(BarFlag flag = BarFlag()){
     if (flag){/*do it*/}        
}

//somewhere else
void doc(){
   foo(BarFlag(true));
} 
```

# php - MongoDB/doctrine：不能在 $and 中嵌套 $or

> ID：10115321
> 
> 赞同：6
> 
> 时间：2012-04-11T23:19:53.477
> 
> 标签：php, mongodb, doctrine, doctrine-odm

我`$or`在一个`$and`操作中嵌套多个二操作数操作时遇到问题。[这个讨论](https://groups.google.com/d/topic/doctrine-user/fVkPvHZwQAE/discussion)的结论听起来与我需要的相似，但我无法让它发挥作用。这是我正在尝试做的JavaScript：

```
db.Business.find(
  {
    $and:
      [
        { $or: [{nm: /American/}, {dsc: /American/}] },
        { $or: [{nm: /Mega/}, {dsc: /Mega/}] }
      ]
  }
) 
```

这适用于 MongoDB 交互式 shell。

这里有一些对我来说看起来不错但不起作用的 PHP（在指示的地方导致无限递归）：

```
$q = $doctrineOdm->createQueryBuilder('Business');
foreach (array('American','Mega') as $keyword) {
  $r = new \MongoRegex('/'.$keyword.'/i');
  $q->addAnd(
    $q->addOr($q->expr()->field('nm')->equals($r))
      ->addOr($q->expr()->field('dsc')->equals($r))
  );
}
print_r($q->getQuery()->getQuery()); // infinite recursion
$cursor = $q->getQuery()->execute(); 
```

有任何想法吗？

[交叉张贴在这里](https://groups.google.com/d/topic/doctrine-user/y5VqSEfB9Es/discussion)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T02:04:51.893

听起来您需要先构建一个单独的子查询，然后再将其添加到`$q`.

`$q->addAnd(...)`立即评估并将其自身添加到`$q`，但您希望它等待。

我没有安装这个包，所以我无法测试，但这只是一个预感。希望能帮助到你。

```
$q = $doctrineOdm->createQueryBuilder('Business');
foreach (array('American','Mega') as $keyword) {
  $r = new \MongoRegex('/'.$keyword.'/i');
  $q->addAnd(
    $q->expr()->addOr($q->expr()->field('nm')->equals($r))
              ->addOr($q->expr()->field('dsc')->equals($r))
  );
}
print_r($q->getQuery()->getQuery()); // infinite recursion
$cursor = $q->getQuery()->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T08:55:29.080

您可以尝试如下：

```
$filters = array(
     new \MongoRegex('/American/i'),
     new \MongoRegex('/Mega/i')
);
$q = $doctrineOdm->createQueryBuilder('Business')
                 -> field('nm')  ->in($filters)
                 -> field('dsc') ->in($filters);

print_r($q->getQuery()->getQuery()); // infinite recursion
$cursor = $q->getQuery()->execute(); 
```

# linux - 在 EC2 实例上设置 SSL 证书

> ID：10115322
> 
> 赞同：20
> 
> 时间：2012-04-11T23:20:13.507
> 
> 标签：linux, ssl, amazon-ec2, amazon-web-services, ssl-certificate

我很难在我的 EC2 微型实例上设置 SSL 证书（它是从 NameCheap 购买的 Comodo PositiveSSL）（我使用的是基于 CentOS 的 Amazon Linux AMI 2012.3，如果我没记错的话）。

这是我所做的：

1.  我安装了 mod_ssl 和 OpenSSL

2.  我在 EC2 的实例安全组上启用了端口 443

3.  我按照 Comodo 的建议将 *.key 和 *.crt 文件改成 777

4.  我确定 IP 地址和文件路径是正确的（在示例中放了一堆 0，但在我的 ssl.conf 中**是正确的）**

5.  我将此 VirtualHost 条目添加到 ssl.conf

* * *

```
<VirtualHost 00.000.000.00:443>
   ############# I tried both with & without this section ##############
   ServerName www.mydomain.com:443

   ServerAlias www.mydomain.com
   DocumentRoot /var/www
   ServerAdmin webmaster@mydomain.com
   ######################################################################

   SSLEngine on
   SSLCertificateKeyFile /etc/ssl/mydomain_com.key
   SSLCertificateFile /etc/ssl/mydomain_com.crt
   SSLCertificateChainFile /etc/ssl/mydomain_com.ca-bundle
</VirtualHost> 
```

* * *

**然后我重新启动了 apache** ...但我**仍然无法访问** [https://www.mydomain.com/](https://www.mydomain.com/)！！！

我检查了[ssltool.com](http://ssltool.com)，它说

```
The Common Name on the certificate is: ip-00-00-00-000

The certificate chain consists of:
SomeOrganization, ip-00-00-00-000\. Expires on: Apr 10 13:39:41 2013 GMT - that's 363 days from today.
The site tested mydomain.com is NOT the same as the Subject CN ip-00-00-00-000!. 
```

我什至将 VistualHost 复制到 httpd.conf 而不是 ssl.conf 并重新启动 apache，但都是徒劳的。

这几天我一直在用头撞墙。我很确定我错过了一个小东西来完成这项工作，我只是不知道到底是什么。

如果有人能提出一些建议来完成这项工作，我将不胜感激！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-12T01:15:48.477

有时这部分

```
<VirtualHost _default_:443> 
```

*防止*您使用真正的 SSL 证书。如果是这种情况，请注释**VirtualHost *default***或将 SSLCertificate* 属性移至它，即。

```
<VirtualHost _default_:443>
  SSLCertificateKeyFile /etc/ssl/mydomain_com.key
  SSLCertificateFile /etc/ssl/mydomain_com.crt
  SSLCertificateChainFile /etc/ssl/mydomain_com.ca-bundle
</VirtualHost> 
```

确保在那之后重新启动apache。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-25T13:41:19.133

## **亚马逊**现在提供**证书管理器**！（免费）

如果您使用 Elastic Beanstalk，这是一种新的做法：它是免费的，您可以避免由于配置而导致的错误，并且在 vue 的性能点上它是一个更好的选择：

> 由于 ELB 支持 SSL 卸载，将证书部署到负载均衡器（而不是部署到其后面的 EC2 实例）将减少实例需要处理的加密和解密工作量。

来自文档：

> 新的 AWS Certificate Manager (ACM) 旨在简化和自动化许多传统上与 SSL/TLS 证书管理相关的任务。ACM 负责处理数字证书的配置、部署和更新的复杂性！ACM 提供的证书由 Amazon 的证书颁发机构 (CA)、Amazon Trust Services (ATS) 进行验证。
> 
> 更好的是，您可以免费完成所有这些工作。通过 AWS Certificate Manager 预置的 SSL/TLS 证书是免费的！
> 
> ACM 将允许您在几分钟内开始使用 SSL。请求证书后，您只需单击几下即可将其部署到弹性负载均衡器和 Amazon CloudFront 分配。之后，ACM 可以处理定期续订，而无需您采取任何行动。

文档：

[https://aws.amazon.com/fr/blogs/aws/new-aws-certificate-manager-deploy-ssltls-based-apps-on-aws/](https://aws.amazon.com/fr/blogs/aws/new-aws-certificate-manager-deploy-ssltls-based-apps-on-aws/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-07T11:12:33.770

查看您的列表，您可能忘记启用虚拟主机的配置。

```
sudo a2enmod ssl
sudo a2ensite default-ssl
sudo /etc/init.d/apache2 restart 
```

这里有关于如何在 EC2 上安装 SSL 证书的完整指南[https://medium.com/@adnanxteam/how-to-add-ssl-certificate-to-laravel-on-ec2-aws-18104cc036d1](https://medium.com/@adnanxteam/how-to-add-ssl-certificate-to-laravel-on-ec2-aws-18104cc036d1)

# php - PHP/MySQL 限制字符

> ID：10115331
> 
> 赞同：0
> 
> 时间：2012-04-11T23:21:27.283
> 
> 标签：php, mysql, css, dynamic, limit

以下是我正在处理的内容的预览： ![在此处输入图像描述](../Images/c3ed8f20feb87f5b3215ae09430b7150.png)

标题、文本和图像都是基于用户动态创建的。他们可以选择是否要添加图片，并且可以选择在标题和主要内容中放置什么文本。

**不能**有任何滚动，所以它必须是可见的并且不能超过那个白色的底部。

我的问题是......我怎样才能限制正文的文本？

*   如果标题很大并且下降到两行，并且有一张图片，那么为了留在行中而不超过白色，它必须限制在一定数量的字符内。

*   但是另一个用户可以决定没有图片并将标题保持在一行中，这样用户将有更多的文字要写，所以限制应该不同。

我想对我来说令人困惑的部分是......如果用户没有图片并且标题很短，并创建了一些非常长的文本以适应大小，但后来决定添加图像......然后那个长文本现在将不再适合。所以现在..我不能限制文本，因为它已经在那里了。

我希望这是有道理的。如果有人可以帮助我解决这个问题并给我一些想法，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:28:17.293

将此用于用户输入用于添加文本的任何内容。它可以限制他们使用的字符，只需更改 250 值。

```
<script>
        function countChar(val){
                                var len = val.value.length;
                                if (len >= 250) {
                                    val.value = val.value.substring(0, 250);
                                }else {
                                    $('#charNum').text(250 - len);
                                }
        };

    </script

<textarea id="field" name="description" onKeyUp="countChar(this)"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:29:31.200

有几个不同的选择需要考虑。您可能希望限制用户可以为初学者输入的文本数量，以确保它不会溢出。

我可能会做的一件事是在页面上找到您喜欢的最大字符数，并在数据库的输出上使用 substr 以确保它永远不会显示更多。

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

您可以有一个“更多”链接，这样访问者可以根据需要阅读更多内容，但不会破坏布局。我会为逻辑使用基本的 if 语句（如果图片存在，则将文本修剪为此，如果不存在等）。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T23:36:01.623

它不仅是`text`你需要的，`limit`也是`image thumbnail`影响你网页风格的

为了限制字符串的数量..我会在这里使用脚本表单[php trim a string](https://stackoverflow.com/questions/8997176/php-trim-a-string)

```
function trim_word($str, $length, $suffix = '...') 
{
    $len = strlen($str);

    if ($len < $length) return $str;

    $pattern = sprintf('/^(.{%d,}?)\b.*$/', $length);
    $str = preg_replace($pattern, '$1', $str);
    $str = trim($str);
    $str .= $suffix;

    return $str;
} 
```

它修剪文本并确保它始终以一个单词结尾...

您可以使用[http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)生成`thumbnail`固定大小的所有您需要做的设置您想要的高度和宽度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T23:56:57.130

用一个你想要的没有填充的固定高度的容器 div 包围整个东西，并在里面放置另一个没有边距和没有固定高度的内部 div，然后当用户更改内容时创建一个 javascript 函数来检查内部是否div是<容器div；如果没有，则不允许用户进行更改-这样您就可以直接解决问题。

```
<script>
function checkDivs() {
 if(inner.style.height >= container.style.height) {
 //prevent change
 }
}
</script>
<div id='container'>
  <div id='inner'>
  //User-defined content
  </div>
</div> 
```

此功能将附加到用户将通过其编辑内容的任何 GUI，至于如何防止更改，我必须更多地了解您的程序。

# php - CakePHP 在 X 天后过期发布

> ID：10115338
> 
> 赞同：-1
> 
> 时间：2012-04-11T23:22:16.727
> 
> 标签：php, cakephp, cakephp-2.0

使用博客教程，我想有一个选项，您可以在“主”索引页面上查看帖子，直到帖子活跃 x 天。在 x 天的这段时间之后，我希望在数据库中将帖子设置为“过期”。任何人都可以阐明实现这一目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:28:22.980

可能最好的方法是使用 SQL 选择语句。MySQL 有许多内置的日期方法。但首先，我们需要定义您想要完成的任务。另请注意，我们使用的字段 ( `created_at`, `allotted_time`) 都是`DATE`字段。

您要做的只是显示*当前正在运行的*帖子。由于我们知道广告开始的日期，我们可以从当前日期中减去开始日期，以计算出距离广告到期还有多长时间。这可以通过`DATEDIFF`函数和`CURDATE`函数来完成。

```
DATEDIFF(CURDATE(), `created_at`) 
```

如果您尝试执行上述语句，您会注意到它返回一个整数，即自广告首次创建以来经过的天数。由于`DATEDIFF`返回一个整数，我们还需要转换`allotted_time`为一个整数。

```
DATEDIFF(`allotted_time`, `created_at`) 
```

现在我们知道广告已经运行了多少时间，以及它必须在创建之日后运行多少天。显然，如果广告在创建日期和分配时间之间运行的天数少于它仍在运行的天数。

```
WHERE DATEDIFF(CURDATE(), `created_at`) < DATEDIFF(`allotted_time`, `created_at`) 
```

把这些放在一起，我们会得到一个类似的声明。

```
SELECT `id`
FROM `ads`
WHERE
    DATEDIFF(CURDATE(), `created_at`) < DATEDIFF(`allotted_time`, `created_at`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:45:59.267

如果您使用分页，则使用：

**注意** ***这里 $x 是你的 intarval***

```
$this->Post->recursive = 0;
$this->paginate = array(
            'conditions' => array('DATEDIFF(CURDATE(), DATE(Post.created)) >' => $x)
        );
$this->set('posts', $this->paginate()); 
```

对于正常的 find() 使用这个：

```
$this->Post->find('all', 
                   array(
                    'conditions' => array('DATEDIFF(CURDATE(), DATE(Post.created)) >' => $x)
                   )
                 ); 
```

# html - 在 HTML5 视频上全屏显示时，自定义控件仍然适用吗？

> ID：10115345
> 
> 赞同：12
> 
> 时间：2012-04-11T23:23:25.333
> 
> 标签：html, custom-controls, html5-video, fullscreen

我已经为我的 HTML5 视频制作了自定义控件，但我不知道如何在全屏时仍然应用该 CSS。

这是我控制的[[网站] 。](http://www.inwebson.com/demo/html5-video/demo1/)

在此站点上，您会注意到，当您单击全屏按钮时，自定义控件会丢失，并且视频会恢复为默认`<video>`控件。

有谁知道当你全屏时如何让这些自定义控件样式/CSS仍然适用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T21:34:04.713

我回答了我自己的问题，关键是自定义控件在里面，`<div>`其中包括您想要全屏拍摄的视频。在我下面的代码中，这`<div>`称为“videoContainer”。

这是我用来解决这个问题的链接。 [http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/ControllingMediaWithJavaScript/ControllingMediaWithJavaScript.html](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/ControllingMediaWithJavaScript/ControllingMediaWithJavaScript.html)

这是在 webkit 和 mozilla 浏览器中进入和退出全屏模式的 JS 代码：

```
var $video=$('video');
//fullscreen button clicked
$('#fullscreenBtn').on('click', function() {
$(this).toggleClass('enterFullscreenBtn');
    if($.isFunction($video.get(0).webkitEnterFullscreen)) {
              if($(this).hasClass("enterFullscreenBtn"))
                  document.getElementById('videoContainer').webkitRequestFullScreen();                          
              else 
              document.webkitCancelFullScreen();    
    }  
    else if ($.isFunction($video.get(0).mozRequestFullScreen)) {
              if($(this).hasClass("enterFullscreenBtn"))
                  document.getElementById('videoContainer').mozRequestFullScreen(); 
               else 
                  document.mozCancelFullScreen();   
    }
    else { 
           alert('Your browsers doesn\'t support fullscreen');
    }
}); 
```

这是HTML：

```
<div id="videoContainer">
      <video>...<source></source>
      </video>
      <div> custom controls 
            <button>play/pause</button>
            <button id="fullscreenBtn" class="enterFullscreenBtn">fullscreen</button>
      </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-26T23:47:58.437

**显示自定义控制器**

```
#customController{
  -------------------;
  -------------------;
  -------------------;
  z-index: 2147483647;
} 
```

**隐藏本机控制器**

```
video::-webkit-media-controls {
  display:none !important;
}
video::-webkit-media-controls-enclosure {
  display:none !important;
} 
```

# java - AspectJ 适用于 Java 7？

> ID：10115347
> 
> 赞同：2
> 
> 时间：2012-04-11T23:23:50.437
> 
> 标签：java, eclipse, aspectj

我在Eclipse（AJDT）中安装了AspectJ，但是在我使用AspectJ项目时Java 7的具体方法被标记为错误。

我怀疑 AspectJ 是否适用于 Java 7，或者这是 Eclipse 或 AJDT 的问题。

**编辑：**问题是 AJDT 尚不支持 AspectJ for Java 7。AspectJ 有一些 IDE 支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:27:10.550

您需要 AspectJ 1.7.0 M1（或更高版本）才能与 Java 7 兼容。[http://www.eclipse.org/aspectj/doc/released/README-170.html](http://www.eclipse.org/aspectj/doc/released/README-170.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:29:05.523

从[aspectJ网页](http://www.eclipse.org/aspectj/)：

“AspectJ 1.7.0.M1 现在可供下载。有关更多信息，请参阅自述文件。**这是我们第一个基于 Java7 编译器的里程碑。** ”所以它应该可以工作。你有没有搜索过？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:39:13.520

您应该从这个更新站点安装 AspectJ 开发工具 (AJDT) 的快照版本：

[http://download.eclipse.org/tools/ajdt/37/dev/update](http://download.eclipse.org/tools/ajdt/37/dev/update)

# iphone - iPhone应用程序，导航控制器不起作用？

> ID：10115348
> 
> 赞同：1
> 
> 时间：2012-04-11T23:24:19.810
> 
> 标签：iphone, ios, uitableview, uinavigationcontroller, uitabbar

我在标签栏中有 4 个标签。在其中一个选项卡中，我想使用导航，即当我从列表中单击一个项目时，它应该转到有关它的一些详细信息页面。我有列表页面，其中有导航栏和项目列表。我可以滚动它们，但是当我单击它们中的任何一个时，会发生选择动画，控制台会记录真实的行值，它甚至会打印来自详细信息页面的构造函数的日志指令，但我看不到显示详细信息页面。（顺便说一句，Xcode 3.2.6 和 iOS 4.3）

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
        NSString *rowValue = [myStrings objectAtIndex:indexPath.row];
        NSLog(rowValue);
        //[Utility setStr:rowValue];
        [self.myTable deselectRowAtIndexPath:indexPath animated:TRUE];

            //DETAILS PAGE HERE!!!!
        RestViewController * rest= [[RestViewController alloc] init];
        rest.scoreLabel.text = rowValue;
        [self.navigationController pushViewController:rest animated:TRUE];
        [rest release];
 } 
```

有人有什么想法吗？提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:23:41.283

仅`pushViewController:`当您的视图控制器堆栈由 UINavigationController 管理时才能使用。如果您尝试推送的 viewController 不是由 Navigation Controller 管理的，则不会发生任何事情。

听起来如果您的应用程序就是这种情况。确保您的 View Controller 层次结构是这样设置的：

1.  你有一个`UITabBarController`在顶层。
2.  您正在使用的选项卡应该管理一个`UINavigationController`
3.  您的 tableViewController 应设置为`rootViewController`#2 中的导航控制器

# windows - 通过 Platform Builder 将设备驱动程序添加到 Windows CE 6.0

> ID：10115349
> 
> 赞同：4
> 
> 时间：2012-04-11T23:24:21.807
> 
> 标签：windows, embedded, windows-ce, platform-builder

我正在尝试将设备驱动程序添加到我通过 Platform Builder 创建的 Windows CE 6.0 映像中。

用于威盛 6656 芯片组（用于许多 USB Wi-Fi 适配器/加密狗）的驱动程序可在制造商的网站上找到，包含几个文件：.PDB、.REG、.BIB、.DLL、.MAP 和.REL。

我知道 REG 文件必须导入到我的 OSDesign.reg 中，BIB 文件到我的 OSDesign.bib 中，并且 DLL 必须放在我的图像的 /Windows 文件夹中。我不明白如何处理剩余的文件（PDB、MAP 和 REL）。

有人可以在这件事上帮助我吗？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T02:31:10.640

要包含到操作系统中，您只需要 REG、BIB 和 DLL。其余文件包含调试符号、链接器信息等，大概是为了以防万一您遇到错误并想要对其进行调试。奇怪的是你得到了这些，但没有源代码。仍然，对于包含在您的操作系统中以供使用，它们是不相关的。

# tcl - 获取未评估的 tcl 参数

> ID：10115353
> 
> 赞同：2
> 
> 时间：2012-04-11T23:24:35.490
> 
> 标签：tcl, language-lawyer

我想要做的是将 tcl proc 的参数解析为字符串而不进行任何评估。例如，如果我有一个简单的过程，它只是打印出它的参数：

```
proc test { args } {
    puts "the args are $args"
} 
```

我想做的是这样称呼它：

```
test [list [expr 1+1] [expr 2+2]] 
```

并且没有 tcl 评估`[list [expr 1+1] [expr 2+2]]`. 或者即使它评估了它，我仍然希望拥有原始命令行。因此，通过上面简单的“测试”过程，我希望能够返回：

```
参数是 [list [expr 1+1] [expr 2+2]]
```

这在 tcl 8.4 中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:45:40.460

你*不能*用 Tcl 8.4（及之前）做到这一点；语言设计使这成为不可能。解决方法是传入未经计算的参数（并用大括号括起来）。然后，您可以随意打印它们。要获得他们的评估表格，您需要在您的过程中执行此操作：

```
set evaluated_x [uplevel 1 [list subst $unevaluated_x]] 
```

这有点混乱！

* * *

如果您使用的是 Tcl 8.5，您将有另一种选择：

```
set calling_code [dict get [info frame -1] cmd] 
```

`info frame -1`获取一个字典，其中包含调用当前过程的上下文中当前命令的描述，其键`cmd`是在应用替换规则之前的实际命令字符串。这应该是您想要的（尽管请注意它包含命令名称本身）。

这不适用于 8.4，也*不会*被向后移植。你可能想升级！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:30:07.583

将参数传递给 test 时，[将它们括在大括号中](http://www.tcl.tk/man/tcl8.4/TclCmd/Tcl.htm#M9)，例如：test {[list [expr 1+1] [expr 2+2]]}

# c++ - OpenGL/Eigen3 的逆运动学：不稳定的雅可比伪逆

> ID：10115354
> 
> 赞同：7
> 
> 时间：2012-04-11T23:24:39.080
> 
> 标签：c++, opengl, eigen

我正在尝试使用 OpenGL、Eigen3 和[“Jacobian pseudoinverse”](http://math.ucsd.edu/~sbuss/ResearchWeb/ikmethods/iksurvey.pdf)方法来实现简单的逆运动学测试。

该系统使用“Jacobian transpose”算法运行良好，但是，一旦我尝试使用“pseudoinverse”，关节就会变得不稳定并开始摇晃（最终它们完全冻结 - 除非我使用“Jacobian transpose”后备计算）。我调查了这个问题，结果发现在某些情况下 Jacobian.inverse()*Jacobian 的行列式为零，不能倒置。但是，我在互联网（Youtube）上看到了其他声称使用相同方法的演示，他们似乎没有这个问题。所以我不确定问题的原因在哪里。代码附在下面：

*。H：

```
struct Ik{
    float targetAngle;
    float ikLength;
    VectorXf angles;
    Vector3f root, target;
    Vector3f jointPos(int ikIndex);
    size_t size() const;
    Vector3f getEndPos(int index, const VectorXf& vec);
    void resize(size_t size);
    void update(float t);
    void render();
    Ik(): targetAngle(0), ikLength(10){
    }
}; 
```

*.cpp：

```
size_t Ik::size() const{
    return angles.rows();
}

Vector3f Ik::getEndPos(int index, const VectorXf& vec){
    Vector3f pos(0, 0, 0);
    while(true){
        Eigen::Affine3f t;
        float radAngle = pi*vec[index]/180.0f;
        t = Eigen::AngleAxisf(radAngle, Vector3f(-1, 0, 0))
            * Eigen::Translation3f(Vector3f(0, 0, ikLength));
        pos = t * pos;

        if (index == 0)
            break;
        index--;
    }
    return pos;
}

void Ik::resize(size_t size){
    angles.resize(size);
    angles.setZero();
}

void drawMarker(Vector3f p){
    glBegin(GL_LINES);
    glVertex3f(p[0]-1, p[1], p[2]);
    glVertex3f(p[0]+1, p[1], p[2]);
    glVertex3f(p[0], p[1]-1, p[2]);
    glVertex3f(p[0], p[1]+1, p[2]);
    glVertex3f(p[0], p[1], p[2]-1);
    glVertex3f(p[0], p[1], p[2]+1);
    glEnd();
}

void drawIkArm(float length){
    glBegin(GL_LINES);
    float f = 0.25f;
    glVertex3f(0, 0, length);
    glVertex3f(-f, -f, 0);
    glVertex3f(0, 0, length);
    glVertex3f(f, -f, 0);
    glVertex3f(0, 0, length);
    glVertex3f(f, f, 0);
    glVertex3f(0, 0, length);
    glVertex3f(-f, f, 0);
    glEnd();
    glBegin(GL_LINE_LOOP);
    glVertex3f(f, f, 0);
    glVertex3f(-f, f, 0);
    glVertex3f(-f, -f, 0);
    glVertex3f(f, -f, 0);
    glEnd();
}

void Ik::update(float t){
    targetAngle += t * pi*2.0f/10.0f;
    while (t > pi*2.0f)
        t -= pi*2.0f;
    target << 0, 8 + 3*sinf(targetAngle), cosf(targetAngle)*4.0f+5.0f;

    Vector3f tmpTarget = target;
    Vector3f targetDiff = tmpTarget - root;
    float l = targetDiff.norm();
    float maxLen = ikLength*(float)angles.size() - 0.01f;
    if (l > maxLen){
        targetDiff *= maxLen/l;
        l = targetDiff.norm();
        tmpTarget = root + targetDiff;
    }

    Vector3f endPos = getEndPos(size()-1, angles);
    Vector3f diff = tmpTarget - endPos;

    float maxAngle = 360.0f/(float)angles.size();

    for(int loop = 0; loop < 1; loop++){
        MatrixXf jacobian(diff.rows(), angles.rows());
        jacobian.setZero();
        float step = 1.0f;
        for (int i = 0; i < angles.size(); i++){
            Vector3f curRoot = root;
            if (i)
                curRoot = getEndPos(i-1, angles);
            Vector3f axis(1, 0, 0);
            Vector3f n = endPos - curRoot;
            float l = n.norm();
            if (l)
                n /= l;
            n = n.cross(axis);
            if (l)
                n *= l*step*pi/180.0f;
            //std::cout << n << "\n";

            for (int j = 0; j < 3; j++)
                jacobian(j, i) = n[j];
        }

        std::cout << jacobian << std::endl;
        MatrixXf jjt = jacobian.transpose()*jacobian;
        //std::cout << jjt << std::endl;
        float d = jjt.determinant();
        MatrixXf invJ; 
        float scale = 0.1f;
        if (!d /*|| true*/){
            invJ = jacobian.transpose();
            scale = 5.0f;
            std::cout << "fallback to jacobian transpose!\n";
        }
        else{
            invJ = jjt.inverse()*jacobian.transpose();
            std::cout << "jacobian pseudo-inverse!\n";
        }
        //std::cout << invJ << std::endl;

        VectorXf add = invJ*diff*step*scale;
        //std::cout << add << std::endl;
        float maxSpeed = 15.0f;
        for (int i = 0; i < add.size(); i++){
            float& cur = add[i];
            cur = std::max(-maxSpeed, std::min(maxSpeed, cur));
        }
        angles += add;
        for (int i = 0; i < angles.size(); i++){
            float& cur = angles[i];
            if (i)
                cur = std::max(-maxAngle, std::min(maxAngle, cur));
        }
    }
}

void Ik::render(){
    glPushMatrix();
    glTranslatef(root[0], root[1], root[2]);
    for (int i = 0; i < angles.size(); i++){
        glRotatef(angles[i], -1, 0, 0);
        drawIkArm(ikLength);
        glTranslatef(0, 0, ikLength);
    }
    glPopMatrix();
    drawMarker(target);
    for (int i = 0; i < angles.size(); i++)
        drawMarker(getEndPos(i, angles));
} 
```

![截屏](../Images/fe8a2bc16111a22e96ce6d545cd458ca.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T23:54:33.247

听起来你的系统太僵硬了。

1.  尝试使用 Eigen SVD 方法：请参阅[http://eigen.tuxfamily.org/dox-2.0/TutorialAdvancedLinearAlgebra.html](http://eigen.tuxfamily.org/dox-2.0/TutorialAdvancedLinearAlgebra.html)。这在计算上更加密集，但也可能更安全。如果要解决 aX=b 问题，最好使用专用于反转矩阵的方法。（a 是您的雅可比行列式，X 是您想要的）。
2.  最后，尝试通过将对角线乘以 1.0001 之类的因子来欺骗矩阵的条件。这不会改变太多的解决方案（特别是对于游戏），但可以更好地解决问题。
3.  我很好奇您为什么选择不使用 RK4 之类的时间迭代方案。

编辑：我没有阅读你的大量文章，所以我删除了对弹簧的引用。我猜在您的情况下，这些元素将具有某种形式的机械相互作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:36:54.030

像这样的东西应该工作。

```
VectorXf solveViaSVD(const MatrixXf & jacobian,const VectorXf & diff) {
     Eigen::JacobiSVD<MatrixXf> svd (jacobian,ComputeThinU | ComputeThinV);
     return svd.solve(diff);
} 
```

`J*J'`问题是，正如您所说，当 ( ) 是奇异的时，您的方法无法计算伪逆。

[维基百科](http://en.wikipedia.org/wiki/Singular_value_decomposition#Pseudoinverse)说：“[伪逆]是通过用它的倒数替换每个*非零*对角线条目而形成的”。计算失败的“非零”点`pinv(A)`。`inv(A'*A)*A'`

# wpf - WPF 中的 Children 和 Controls 属性背后的想法是什么？

> ID：10115357
> 
> 赞同：-1
> 
> 时间：2012-04-11T23:25:12.633
> 
> 标签：wpf, wpf-controls, naming-conventions

我不知道这是否应该继续程序员，但我认为它在这里是相关的。

作为一名熟练的 WPF 程序员，我经常想知道人们在设计 WPF 时在命名约定方面的想法。

为什么有时会有一个称为 Children 的属性来访问控件的子级，而有时却有一个等效的属性，只是称为 Controls 呢？他们在这里想什么？

另一个例子是 Popup 控件。它没有 Content 属性，而是具有 Child 属性。为什么要这么做？对我来说，这只是令人困惑。

所以我想知道它是否有一个合乎逻辑的原因，这可能也有助于我理解下次我需要进行一些快速编程时调用的属性。

如果背后没有理由，那么我只能说[WAT](https://www.destroyallsoftware.com/talks/wat)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:28:09.450

我从未见过`Controls`房产；至于`Child`vs `Content`:`Content`可以是任何对象，例如数据，而 a`Child`必须是`FrameworkElement`控件层次结构中的某个对象。对我来说，这很有意义。

# javascript - 像 jQuery 这样的大型 javascript 命名空间

> ID：10115358
> 
> 赞同：1
> 
> 时间：2012-04-11T23:25:24.560
> 
> 标签：javascript, jquery

我有一个非常大的 javascript 文件：超过 9,000 行。代码如下所示：

```
var GlobalVar1 = "";
var GlobalVar2 = null;

function A() {...}

function B(SomeParameter) {...} 
```

我正在使用谷歌编译器，全局变量和函数被重命名为 a,b,c... 并且有一个很好的变化，以后可能会与一些外部代码发生冲突。

我想要做的是像 jquery 库一样组织我的代码，其中所有内容都可以通过 $ 访问。有没有办法给我的代码命名，例如，一切都在 # 字符后面。

我想让这个来调用我的代码：

```
#.GlobalVar
#.functionA(SomeParameter) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:36:19.890

旁注：该`#`字符不是有效的变量名（请参阅[此问题](https://stackoverflow.com/questions/1661197/valid-characters-for-javascript-variable-names)）。常见的“速记”是下划线`_`和美元`$`。我记得读到美元的使用意味着机器生成的代码，但这在很大程度上被忽视了，正如你在 jQuery 中看到的那样。

最熟悉的技术是这样的：

```
(function($) {
  $.a = function() { ... }
  $.b = 1000;
})(myNamespace);

myNamespace.a( ... ); 
```

无论哪种方式，我认为您必须在代码中对*某个*变量进行分配。

或者，您可以指定类似类的内容：

```
function MyClass() {
  var f = 0;

  function a() { return f; }
  function b(value) { f = value; }
  function c() { f *= f; }

  this.get = a;
  this.set = b;
  this.square = c;
}

var myInstance = new MyClass(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T23:39:01.760

您必须将所有库包装在一个闭包中以保护您的局部变量。您希望全局访问的成员应该分配给全局上下文对象（在浏览器中是`window`）。

```
(function(){
  var GlobalVar1 = "";
  var GlobalVar2 = null;

  function A() {...}

  function B(SomeParameter) {...}

  //  some function accessible globally with `window.C()` or just `C()`:
  window.C = function() {}
})(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T23:27:42.447

```
var $$ = {
    A: function() {
        alert('namespace rules!');
    },
    B: function() {
        alert('foo');
    }
}
$$.A();
$$.B();
​ 
```

**[现场演示](http://jsfiddle.net/45N3x/)**

​​​​​​​​​​​​​​​​等等...

请注意，我从更改为`#`，`$$`因为`#`变量名称非法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T23:30:47.083

```
var # = {
    GlobalVar1: "",
    GlobalVar2: null,

    A: function() {

    },

    B: function(SomeParameter) {

    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T00:03:58.503

另一种方法——如果你已经在使用 Closure Compiler——是使用它的特性来处理命名空间。

例子：

**mylib.js**：

```
goog.provide('mynamespace.whatever');

var globalVar1='foo';

mynamespace.whatever.functionA=function(txt){
    alert('A: '+txt+' '+globalVar1);
};

mynamespace.whatever.functionB=function(){
    alert('B: '+txt+' '+globalVar1);
}; 
```

**主.js**：

```
goog.require('mynamespace.whatever');

mynamespace.whatever.functionA('hello world'); 
```

* * *

如果你想在编译后的代码之外使用未混淆的函数/变量，你可以使用：

```
goog.exportProperty(object, publicName, symbol) 
```

和

```
goog.exportSymbol(publicPath, object, opt_objectToExportTo) 
```

看看：[http ://closure-library.googlecode.com/svn/docs/closure_goog_base.js.html](http://closure-library.googlecode.com/svn/docs/closure_goog_base.js.html)

# php - php 照片 -> 无效请求

> ID：10115366
> 
> 赞同：1
> 
> 时间：2012-04-11T23:26:18.483
> 
> 标签：php, facebook, request, photo

嗨，首先对不起我的英语。

我想显示个人资料照片，所以我这样做：

```
<?php

  try {

    $fql = "select cover_object_id from album where type='profile' and owner = $user";
$param  =   array(
 'method'    => 'fql.query',
 'query'     => $fql,
 'callback'  => ''
);
$fqlResult   =   $facebook->api($param);

  } 
  catch (FacebookApiException $e) {
    error_log($e);
   }

$coverpid=$fqlResult[0]['cover_object_id'];

  try {

    $fql = "select src_big from photo where object_id=$coverpid";
$param  =   array(
 'method'    => 'fql.query',
 'query'     => $fql,
 'callback'  => ''
);
$fqlResult   =   $facebook->api($param);

  } 
  catch (FacebookApiException $e) {
    error_log($e);
   }

$url_photo=$fqlResult[0]['src_big'];
echo '<img src="' . $url_photo . '">';

$bdd->exec("UPDATE user SET url_photo = '$url_photo'  WHERE user_id = '$user'");

?> 
```

我可以显示照片，然后再次显示照片并减少 api 请求数，我将照片的 url 记录在我的数据库中。但问题：网址给了我一个有效的请求。

如何进行？我想我需要在 url 中添加一个访问令牌，但我不知道如何获得它......

你能帮助我吗 ？非常感谢。

PS：我有 user_photos 权限

# objective-c - 在目标 c 中返回 156112 而不是 1 的字符串到 int 的转换

> ID：10115367
> 
> 赞同：2
> 
> 时间：2012-04-11T23:26:30.217
> 
> 标签：objective-c, string, integer, type-conversion

我有一个带有值的 NSMutableDictionary。其中一个值是 NSString“1”。

我是这样理解的：

```
NSString *currentCount = [perLetterCount valueForKey:firstLetter]; 
```

然后我将其转换为 int：

```
int newInt = (int)currentCount; 
```

我都这样显示：

```
NSLog(@"s: %@, i: %i", currentCount, newInt); 
```

结果我得到了这个：

```
 c: 1, i: 156112 
```

我究竟做错了什么 ？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T23:34:52.510

您正在做的是将指针（存储字符串对象 currentCount 的数据的地址）转换为整数。看起来整数是 156112。

要获取 NSString 的数值，您需要调用其值方法之一：

```
[ currentCount intValue ]  or currentCount.intValue // for an int;
[ currentCount integerValue ] or currentCount.integerValue // for an NSInteger;
[ currentCount floatValue ] or currentCount.floatValue // for a float, and so on. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T23:28:04.417

试试`int newInt = currentCount.intValue`吧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T23:42:20.573

如上所述，您可以使用：

```
int newInt = [currentCount intValue]; 
```

但是，如果字符串不包含数字，则返回零。如果零是字符串中的有效数字并且字符串没有数字也是有效的，这将很困难。

当字符串不包含一个有效时，从字符串中获取整数的方法是：

```
NSScanner *scanner = [NSScanner scannerWithString:currentCount];

int newInt;
if (![scanner scanInt:&newInt]) {
    NSLog(@"Did not find integer in string:%@", currentCount);
} 
```

# php - PHP MySQL过滤结果

> ID：10115370
> 
> 赞同：0
> 
> 时间：2012-04-11T23:27:01.790
> 
> 标签：php, mysql, sql

我目前正在为广播电台构建脚本，需要以下脚本的帮助：

```
$yesterday = strtotime('yesterday');
$yesterdow = date('l',$yesterday);
$order = "SELECT * FROM timetable WHERE day = '$yesterdow' ORDER BY time";
$result = mysql_query($order); 
```

假设要做的是从 00:00 到 23:00 返回前一天的时间表。但是目前它只在 01:00 到 23:00 之间返回。有什么办法可以让 00:00 包含在内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:32:53.240

您可以在收到 $yesterday 之前使用`date_default_timezone_set`必要的时区更改时区。

例如 date_default_timezone_set('America/Los_Angeles');

# javascript - “使用严格”对实时站点安全吗？

> ID：10115372
> 
> 赞同：16
> 
> 时间：2012-04-11T23:27:09.220
> 
> 标签：javascript, use-strict

“使用严格”；看起来很棒，我们真的很想在我们的商店使用它。但是，我们只是想要它，以便我们（开发人员）可以找到严格性问题；我们非常不想让我们的网站在之前运行良好的情况下为我们的实际客户中断。

现在，我们可以使用一些服务器端逻辑来实现这一点：

```
{% if debug %}<script>"use strict";</script>{% endif %} 
```

...除了“使用严格”在逐个文件的基础上运行，因此实际上不会起作用（好吧，除非我们开始在服务器端处理我们所有的 JS 文件）。

所以，我的问题是：**在页面加载时是否会检查所有“使用严格”检查的内容，或者“使用严格”是否有可能在页面加载后发现错误？** 如果是前者，我们可以直接使用“use strict”，不用担心，因为我们会先在开发中加载我们的网站，然后再加载到现场。但是，如果是后者，我们似乎不走运，因为我们无法测试所有可能的运行时条件（同样，我们不想在之前没有错误的情况下为我们的用户犯错误）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T23:30:32.990

是后者。在`strict mode`运行时，Javascript 解释器可能会在运行时抛出错误消息，而在非严格模式下不会抛出错误消息。

另一方面，这些错误中的大多数都是“好错误”，这意味着它们实际上有助于不破坏您的代码。

例如

```
function foo() {
    "use strict";
    bar = true;
}

foo(); 
```

这会抛出

```
"ReferenceError: assignment to undeclared variable bar" 
```

在严格模式下，这是一件**好事**。在非严格模式下，我们只会创建一个名为 的全局变量`bar`，这可能不是我们想要的。还有很多其他情况会`strict mode`阻止程序员做一些愚蠢/坏/不需要的事情并抛出错误消息。但同样，您**希望**有这些错误而不是一些奇怪的错误。

进一步阅读[MDN](https://developer.mozilla.org/en/JavaScript/Strict_mode)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T23:32:25.333

如果我理解正确，是的，严格模式绝对有可能在页面加载后捕获错误。例如：

```
'use strict';

setTimeout(function() {
    undefined = 42; // Causes a TypeError
}, 1000);

// 点击这里查看演示。
```

你可以做的很简单：当你转移到生产环境时，你应该缩小你的 JavaScript。只要确保`'use strict'`在缩小过程中被删除。

如果做不到这一点，请尝试确保您的代码没有严格错误。严格模式通常在语义方面发挥作用，而不是因为用户输入奇怪，甚至不是因为语法。抓住所有病例应该不会太难。（但缩小和删除`'use strict'`是一个更好的解决方案。）

# c++ - 分段错误 C++

> ID：10115374
> 
> 赞同：0
> 
> 时间：2012-04-11T23:27:17.253
> 
> 标签：c++, segmentation-fault

我收到以下代码的“分段错误（核心转储）”运行时错误：

```
#include <iostream>
#include "Student.h"
#include "SortedList.h"

using namespace std;

#define BOUNDS 100

int main() {

    SortedList *list = new SortedList();  // points to the sorted list object
    Student *create[BOUNDS];  // array to hold 100 student objects
    int num = 100000;   // holds different ID numbers

    // fills an array with 100 students of various ID numbers
    for (int i = 0; i < BOUNDS; i++) {
        create[i] = new Student(num);
        num += 10;
    }

    // insert all students into the sorted list
    for (int i = 0; i < BOUNDS; i++)
    list->insert(create[i]);

    // individually deletes each student
    num = 100000;
    for (int i = 0; i < BOUNDS; i++) {
        delete list->find(num);
    num += 10;
    }

    // insert all students into the sorted list
    for (int i = 0; i < BOUNDS; i++)
    list->insert(create[i]);

    num = 100000;
    for (int i = 0; i < BOUNDS; i++) {
    list->remove(num);
    num += 10;
    }

    cout << "test2" << endl;
    delete list;
    return 0;
} 
```

我已将错误缩小到`delete list;`行（或先出现的任何一个）。我只是想知道为什么会这样以及如何解决它。关于这个问题的任何见解都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:32:24.050

你有两个我可以看到的问题。

首先，在这个循环中：

```
for (int i = 0; i < BOUNDS; i++) {
    x = new Student(num);
    num += 10;
} 
```

您正在创建一堆动态`Student`s 并将最新的放入其中，`x`而前一个则丢失了。这会`Student`动态创建 100 个，其中 99 个被泄露。`Student`此外，它不会像上面的评论所说的那样用 s 填充数组。我不确定您要在这里做什么，所以我无法评论您需要做什么。

其次，你在`delete`这里打电话：

```
delete list->find(num); 
```

在`Student`自动存储（堆栈）中的 s 上（因为您在列表中填充了指向保存自动s 的`Student`s 的指针），这会导致未定义的行为，并且可能是您的段错误的原因。您不需要释放这些s，因为当数组在.`create``Student``Student``main`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:30:51.983

您肯定在泄漏内存：

```
// fills an array with 100 students of various ID numbers
for (int i = 0; i < BOUNDS; i++) {
    x = new Student(num);
    num += 10;
} 
```

`x`除非 ctor 以`Student`某种方式神奇地将自身插入到某个可以跟踪指针的位置，否则在此代码段中会泄漏。

这可能或可能与坠机有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:33:12.273

在不知道如何`StudentList`实施的情况下，这有点像在黑暗中拍摄，但是......

`list->insert(&create[i]);`正在将*堆栈分配*的对象添加到列表中，然后`delete list->find(num);`尝试删除此*堆栈分配*的对象。您不能`delete`堆叠分配的对象。

除此之外，您的第一个`for`循环正在泄漏内存。

而我一直是忍者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:33:58.503

这条线有问题：

```
list->insert(&create[i]); 
```

此时，`create`已分配，但没有放入任何内容。可能的结果`x = new Student(num)`应该分配在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T23:39:20.760

“创建”数组在堆栈上分配。您正在尝试删除堆栈分配的内存，这就是您收到此错误的原因。

删除列表->查找（编号）；

# java - java.lang.IndexOutOfBoundsException：索引 0 无效，大小为 0

> ID：10115375
> 
> 赞同：1
> 
> 时间：2012-04-11T23:27:17.597
> 
> 标签：java, android, database, arrays, json

我是 android 新手 - 我正在尝试使用来自外部数据库的数据填充 textviews 但我收到此错误（下面的 LogCat） .

**日志猫**

```
04-11 23:10:56.084: E/AndroidRuntime(333): FATAL EXCEPTION: main
04-11 23:10:56.084: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thickcrustdesigns.ufood/com.thickcrustdesigns.ufood.recipePage}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-11 23:10:56.084: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 23:10:56.084: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
04-11 23:10:56.084: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-11 23:10:56.084: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-11 23:10:56.084: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
04-11 23:10:56.084: E/AndroidRuntime(333): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
04-11 23:10:56.084: E/AndroidRuntime(333):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
04-11 23:10:56.084: E/AndroidRuntime(333):  at java.util.ArrayList.get(ArrayList.java:311)
04-11 23:10:56.084: E/AndroidRuntime(333):  at com.thickcrustdesigns.ufood.recipePage.onCreate(recipePage.java:44)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-11 23:10:56.084: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-11 23:10:56.084: E/AndroidRuntime(333):  ... 11 more 
```

**食谱页面**

```
package com.thickcrustdesigns.ufood;

import java.util.ArrayList;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.os.Bundle;
import android.content.Intent;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class recipePage extends Activity {

    TextView txt_Recipe;
    TextView txt_Ingredients;
    TextView txt_Method;
    Button btn_bk;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recipepage);
        Bundle data = getIntent().getExtras();
        String recipe = data.getString("recipie");

        ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();

        nvp.add(new BasicNameValuePair("request", "recipe"));
        nvp.add(new BasicNameValuePair("recipe", recipe));

        ArrayList<NameValuePair> nvp2 = new ArrayList<NameValuePair>();
        nvp2.add(new BasicNameValuePair("request", "ingredients"));
        nvp2.add(new BasicNameValuePair("recipe", recipe));

        ArrayList<JSONObject> jsondefs = Request.fetchData(this, nvp);
        String title = null;
        try {
            title = jsondefs.get(0).getString("Name");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String method = null;
        try {
            method = jsondefs.get(0).getString("Method");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        ArrayList<JSONObject> jsonIngredients = Request.fetchData(this, nvp2);

        String ingredients = ""; 

        for (int i = 0; i < jsonIngredients.size(); i++){
            String ji = null;
            try {
                ji = jsonIngredients.get(i).getString("Name") + "\n";
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            ingredients += ji; 
        }

        txt_Recipe.setText(title);
        txt_Method.setText(method);
        txt_Ingredients.setText(ingredients);

        // Listening to button event
        btn_bk.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                Intent i = new Intent(getApplicationContext(),
                        UFoodAppActivity.class);
                startActivity(i);

            }
        });
    }
} 
```

**请求.java**

```
package com.thickcrustdesigns.ufood;

import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;

import android.widget.ListView;

//import android.widget.TextView;

public class CatogPage extends ListActivity {

    ListView listView1;
    Button btn_bk;
    String[] defs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.definition_main);

        btn_bk = (Button) findViewById(R.id.btn_bk);

        listView1 = (ListView) findViewById(android.R.id.list);

        ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();
        nvp.add(new BasicNameValuePair("request", "categories"));

        ArrayList<JSONObject> jsondefs = Request.fetchData(this, nvp);

        defs = new String[jsondefs.size()];

        for (int i = 0; i < jsondefs.size(); i++) {
            try {
                defs[i] = jsondefs.get(i).getString("Name");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        uFoodAdapter adapter = new uFoodAdapter(this, R.layout.definition_list,
                defs);

        listView1.setAdapter(adapter);
        ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String item = defs[position];
                Intent i = new Intent(getApplicationContext(), Results.class);
                i.putExtra("category", item);
                startActivity(i);
            }
        });

        btn_bk.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                Intent i = new Intent(getApplicationContext(), CatogPage.class);
                startActivity(i);
            }

        });

    }

} 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:31:05.403

开始查看 recipePage.java 的第 44 行

```
com.thickcrustdesigns.ufood.recipePage.onCreate(recipePage.java:44)
04-11 23:10:56.084: E/AndroidRuntime(333):  at     
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-11 23:10:56.084: E/AndroidRuntime(333):  at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

更多细节：

以下行未填充`jsondefs`

```
 ArrayList<JSONObject> jsondefs = Request.fetchData(this, nvp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:33:16.630

看起来这个调用是不安全的：

```
 ArrayList<JSONObject> jsondefs = Request.fetchData(this, nvp);
    String title = null;
    try {
        title = jsondefs.get(0).getString("Name"); //<--- Here jsondefs could be empty
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

如果 jsondefs 为空，您可能会看到您提到的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:34:21.410

很可能是由其中一个抛出的`jsondefs.get(0)`……您应该添加一个`if(!jsondefs.isEmpty())`和一个打印某些内容的 else，以便您知道问题出在哪里。

# c# - 在 Parallel,Foreach 循环中安全地限制类调用的数量

> ID：10115388
> 
> 赞同：2
> 
> 时间：2012-04-11T23:28:33.677
> 
> 标签：c#, multithreading

我有一个简单的 foreach 循环，它基于 while 循环和静态 int 来限制自己。如果我不限制它，如果我限制它，我的 CPU 会保持在 10% 以下，我的 CPU 会上升到 99/100%。如何安全地限制对 Paralell.Foreach 中某个类的调用次数？

```
static int ActiveThreads { get; set; }
static int TotalThreads { get; set; }

var options = new ParallelOptions();
options.MaxDegreeOfParallelism = 1;
Parallel.ForEach(urlTable.AsEnumerable(),options,drow =>
{
    using (var WCC = new MasterCrawlerClass())
    {
        while (TotalThreads <= urlTable.Rows.Count)
        {
            if (ActiveThreads <= 9)
            {
                Console.WriteLine("Active Thread #: " + ActiveThreads);
                ActiveThreads++;
                WCC.MasterCrawlBegin(drow);
                TotalThreads++;
                Console.WriteLine("Done Crawling a datarow");
                ActiveThreads--;
            }
        }
    }
}); 
```

我需要限制它，是的，我知道 Max Parallelism 有它自己的限制，但是，在服务器中的 CPU 达到该限制之前，我的开关就会陷入困境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:45:26.313

两件事情 ：

1）您似乎没有使用您`ParallelOptions()`在此示例中创建的内容。

2）您可以使用`Semaphore`if 出于某种原因您不想使用`ParallelOptions`.

```
 Semaphore sm = new Semaphore(0, 9);

 // increment semaphore or block if = 9
 // this will block gracefully without constantly checking for `ActiveThreads <= 9`
 sm.WaitOne();

 // decrement semaphore
 sm.Release(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:14:17.680

> 我有一个简单的 foreach 循环，它基于 while 循环和静态 int 来限制自己。如果我不限制它，如果我限制它，我的 CPU 会保持在 10% 以下，我的 CPU 会上升到 99/100%。

这很奇怪。这可能是您限制循环并发的方式的结果，顺便说一句，这似乎导致每个循环`drow`被爬网多次。我怀疑那是你想要的。由于爬网操作受 IO 限制，您的 CPU 利用率较低。

如果您真的想将并发调用数限制`MasterCrawlBegin`为 9，请设置`MaxDegreesOfParallelism = 9`. and的`while`循环和维护`TotalThreads`将`ActiveThreads`不起作用。作为旁注，您正在以非线程安全的方式递增和递减计数器。

将您的代码更改为如下所示。

```
int ActiveThreads = 0;
var options = new ParallelOptions(); 
options.MaxDegreeOfParallelism = 9; 
Parallel.ForEach(urlTable.AsEnumerable(),options,drow => 
{
  int x = Interlocked.Increment(ref ActiveThreads);
  Console.WriteLine("Active Thread #: " + x); 
  try
  {
    using (var WCC = new MasterCrawlerClass()) 
    { 
      WCC.MasterCrawlBegin(drow); 
    }
  }
  finally
  {
    Interlocked.Decrement(ref ActiveThreads);
    Console.WriteLine("Done Crawling a datarow"); 
  } 
}); 
```

# android - 对多按钮有线耳机的反应

> ID：10115389
> 
> 赞同：15
> 
> 时间：2012-04-11T23:28:54.160
> 
> 标签：android, button, controls, headphones

我正在使用插入 Galaxy Nexus (ICS 4.0.2)的一对*a-JAYS 四耳机（有线遥控器/麦克风上有 3 个按钮）进行一些实验。*

我的问题是，只有中间按钮被我编写的测试应用程序“识别”，即在按下时使用**KeyCode 79触发****Intent.ACTION_MEDIA_BUTTON**和/或**Activity.onKeyDown**回调。

 **按下另外两个按钮不会触发任何前面的方法。有关信息，这些耳机及其 3 个按钮适用于 Apple iPhone 和 Apple 电脑（至少 MacBookPro 2011），如包装盒上所宣传的那样......

首先，我认为 Android 或我的设备根本无法处理有线插孔遥控器上的多个按钮（即使这听起来很奇怪......）但后来我尝试使用一副 HTC 的耳机（带有一个他们的欲望设备）有 3 个按钮。中间按钮的反应方式与我的 a-JAYS 相同，但其他两个按钮也可以使用**KeyCodes 87**和**88**识别，分别是**Play Previous**和**Play Next 媒体**键。

因此，似乎设备或 Android 的低层根本无法捕获某些耳机按钮信号：/（至少那些不是**87**和**88**的）

任何人都知道如何让 Android 能够识别来自 Apple 兼容耳机等耳机的其他按钮/信号？这是否意味着为 ICS 编写的低级别驱动程序或者我错过了一些非常明显的东西？

任何帮助将非常感激。如果需要，可以发布我的测试应用代码。

干杯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T18:17:08.333

目前无法通过 android 框架的软件识别来自音量控制按钮的信号/电阻（1.525-1.495 V 用于降低音量，1.619-1.587 V 用于提高音量）。我认为这与 Apple 在指定音量控制方面拥有专利有关，因此 Google 不会向开发人员发布该框架如何通过耳机插孔上的第四个连接器识别特定信号。耳机上的中心/麦克风/动作按钮通常可以工作，它缩短了从 ~2V 到 ~​​0V 的路径，Apple 不拥有这方面的专利。如果有人能够自己弄清楚如何与输入进行交互，那将是巨大的。我很想学习应用程序开发并找到解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-04T09:28:28.200

这个问题看起来更复杂：http: [//david.carne.ca/shuffle_hax/shuffle_remote.html](http://david.carne.ca/shuffle_hax/shuffle_remote.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T00:13:15.263

我必须强调，我不是这个主题的专家，但从我到目前为止所阅读和尝试的内容来看，我得出的结论是，让 Android 手机响应 iPhone 耳机的音量按钮并非不可能，但出于某种原因，性能是差/落后。

有一些应用程序试图做到这一点，但它们对于日常使用来说太不可靠了。我想问题是触发信号可能必须在比大多数常规应用程序访问权限更低的操作系统级别上实现。

解决方案可能是某种 ROM 模组...

如果你能实现这一点，我相信这对 Android 社​​区来说将是一件大事，也许对你来说是一个好生意。

亲切的问候，您的匈牙利同胞 Gergő

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T14:17:54.713

将耳机插入插孔时，您必须按住中间按钮。这将使麦克风在 Android 上工作。它适用于我的 HTC Thunderbolt。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T23:53:01.247

我相信这是一个硬件问题（至少在 Apple 耳机方面）。如果您查看那些插头上的插头，它们有四个触点，而不是正常的三个触点。我敢打赌他们会通过那个额外的联系来运行他们的按钮信号。AFAIK，没有与插孔匹配的 Android 设备。

所以，最终我不相信你可以让带按钮的苹果耳机适用于安卓系统（就按钮功能而言）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-04T10:59:23.677

您必须始终保持中间位置才能正常工作。如果你放手而不播放音乐，它会说不支持配件，但如果你播放音乐然后放手，它只会停止音乐，直到你再次按住它。也许用胶带把中间的按钮关得很紧？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-02T09:47:46.353

如果您查看四个触点、tip-ring-ring-sleeve (TRRS)，并知道大多数耳机组是：

*   提示：左
*   环1：对
*   环2：接地
*   袖子：麦克风

（1/4 英寸专业音频立体声插头被称为 TRS - tip-ring-sleeve）

尽管有些将接地和麦克风触点颠倒，但就设备如何识别您拥有的不同按钮而言，您需要知道的是这些按钮在接地和麦克风触点之间短路。（在 IR 之前，VCR 的老式有线遥控器使用电阻来实现不同的功能）

现在你要找出发生了什么的作业是：

1.  测量每个按钮的环 2 和套筒之间的电阻
2.  找出它是短暂的还是恒定的
3.  如果您有其他一些正常工作的耳机/麦克风设备，请测量这些阻抗（电阻）

我不知道你想怎么做，但你可以购买具有正确阻抗的电阻器，以便从 Android 设备中获得你想要的功能，问题是，你知道设备有什么功能吗？触发该功能的那些阻抗是什么。

daniel@destinypatrolsoftware.com**

# html - Firefox 中的自动换行错误，适用于 safari 和 chrome

> ID：10115393
> 
> 赞同：0
> 
> 时间：2012-04-11T23:29:22.583
> 
> 标签：html, css, firefox, word-wrap

请在 firefox 和 chrome 或 safari 等其他浏览器中以 html 格式查看以下代码。

[ ] ( ) 和其他 \W 字符似乎会导致自动换行产生过早的换行

正如 Firefox 所指定的，自动换行已完全实现。

```
<style>
    div.working {background:blue; height:400px; width:130px;}
    div.notWorking {background:red; height:400px; width:130px;}
    div {oveflow:hidden; word-wrap: break-word; font-family:monospace}
</style>

<div class="working">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</div>

<div class="notWorking">[X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X][X]</div> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:07:43.823

如果您打算避免过早变形，我列出了一个完整的特殊字符/字符串列表来避免。

```
'][',')(','}{','-','><','\/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:31:25.280

`word-wrap`这与财产无关；Firefox 认为`[X][X]`是一个单词，并且会适当地换行。我不知道触发这种特殊行为的标点符号列表是什么。

# python - 如何测试某个属性是否存在于某些 XML 中

> ID：10115396
> 
> 赞同：17
> 
> 时间：2012-04-11T23:29:29.623
> 
> 标签：python, xml, lxml

我有一些通过 lxml 在 python 中解析的 XML。

我遇到了一些元素有属性而一些没有的情况。

如果它们存在，我需要提取它们，但如果它们不存在则跳过它们 - 我目前正在着陆错误（因为我的方法是错误的......）

我已经部署了一个 testfornull，但这并不适用于所有情况：

代码：

```
if root[0][a][b].attrib == '<>': 
 ByteSeqReference = "NULL"
else:
 ByteSeqReference = (attributes["Reference"]) 
```

XML A：

```
<ByteSequence Reference="BOFoffset"> 
```

XML B：

```
<ByteSequence Endianness = "little-endian" Reference="BOFoffset"> 
```

XML C:

```
<ByteSequence Endianness = "little-endian"> 
```

XML D：

```
 <ByteSequence> 
```

我目前的方法只能处理A，B或D。它不能处理C。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-11T23:31:43.717

我很惊讶对一个通常不存在的属性的空值进行测试*——*你应该做的是检查它是否存在，而不是它是否为空：

```
if 'Reference' in current_element.attrib:
  ...do something with it... 
```

# java - Maps 的线程安全，在应用程序范围的 bean 中私下使用，并且仅在构建后用于现成目的

> ID：10115399
> 
> 赞同：1
> 
> 时间：2012-04-11T23:29:50.663
> 
> 标签：java, multithreading, jsf, concurrency, thread-safety

我有一个适用于所有用户的 bean，它将 ids-> 名称存储在&地图`@ApplicationScoped`中，反之亦然。`Trove``java.util`

我只是在构建 bean*或（如果网站管理员手动刷新的情况下）构建地图一次。*

在 bean 方法中，我只是将`get()`与地图一起使用，因此不修改地图。这将是线程安全的，因为它仅用于准备好的目的吗？我不会与外部的任何其他 bean 共享地图，也不会在我的代码中随时修改地图（添加/删除条目）。

另外，在这种情况下是否需要使字段成为最终字段？

**豆代码如下：**

```
@ApplicationScoped
@ManagedBean(name="directory", eager=true)
public class directory {

    private static TIntObjectHashMap<String> idsToNamesMap;
    private static TreeMap<String, Integer> namesToIdsMap;

    @PostConstruct
    public void buildDirectory(){
        // building directory here ....
    }

    public String getName(int topicId){
        return idsToNamesMap.get(topicId);
    }    

    public List<Entry<String, Integer>> searchTopicsByName(String query){
        return new ArrayList(namesToIdsMap.subMap(query, true, query+"z", true).entrySet());
    }        
} 
```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:53:57.230

构建对象后可能存在可见性问题。也就是说，在您的构造函数调用之后，映射可能会显示为填充到填充它们的线程，但不一定填充到其他线程，至少不是马上。此类问题在[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)的第 3 章中进行了广泛讨论。但是，我认为如果您将地图声明为`volatile`：

```
private static volatile TIntObjectHashMap<String> idsToNamesMap;
private static volatile TreeMap<String, Integer> namesToIdsMap; 
```

你应该没问题。

**更新**

再次查看您的代码时，我刚刚意识到了一些事情。这些地图是`static`- 为什么它们被构造函数填充到实例上下文中？首先，它使读者感到困惑。其次，如果创建了多个对象实例，那么您将对映射进行额外的写入，而不仅仅是一个，可能在其他线程正在读取它们时。

您应该将它们设为非`static`，或将它们填充到[静态初始化块](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T00:00:06.143

在这种情况下，您不必将它们声明为 volatile 或使用任何类型的同步进行保护。只要构造线程将构建它们并与主内存同步。

为此，构造线程只需对 volatile 变量进行一次写入或进入/退出同步锁。这将通过内存屏障，所有本地线程数据都将在主线程中。然后所有其他线程读取此数据将是安全的。

甚至更多 - 不必要的易失性或同步块 - 会导致严重的性能损失 - 每次访问变量时都会通过内存屏障 - 这是一项昂贵的操作

# maven-2 - Glassfish 应用程序无法与 Maven 库（gf-client）一起使用

> ID：10115400
> 
> 赞同：3
> 
> 时间：2012-04-11T23:29:52.103
> 
> 标签：maven-2, glassfish, jms, jndi

对于学校作业，我收到了一个使用 JNDI 和 JMS 和 Glassfish（3 开源版本）的 Netbeans 项目。此应用程序使用的所有 Glassfish 库均由绝对路径引用，所有其他库（在“lib”文件夹中）均由相对路径引用。

由于我的小组正在使用版本控制系统，因此“lib”文件夹包含在存储库中。这很好用，因为它是一个小项目。然而，Glassfish 库是有问题的，因为我是 Linux 用户，而其他人是 Windows 用户。我们通过让 Netbeans 处理库路径来解决这个问题。

选择的解决方案“有效”，但不是最佳解决方案。我认为 Maven 会是一个更好的解决方案。

然而，“gf-client”库出现了问题。每当我使用 Maven“gf-client”时，应用程序都会抛出异常：

```
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial 
```

两个库都有“3.1.2”作为版本。库的结构看起来相同，两个 MANIFEST.MF 文件也是。然而，两个文件的大小和 md5sum 并不相等。

我已经尝试了所有可以在默认 Maven 存储库中找到的“gf-client”库，但没有一个有效。没有其他图书馆给我带来问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T11:53:13.183

能够通过将其添加到我的 pom.xml 来解决它：

```
<dependency>
    <groupId>org.glassfish.main.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1.2</version>
</dependency> 
```

gf-client jar 是指其他 jar 中的类。它缺少的第一堂课可能是`java.naming.factory.initial`。但是在解决这个问题之后，它仍然需要一堆其他的类。对我来说最快的方法是添加 glassfish-embedded-all 依赖项。

# android - 加载 Activity 时的 ProgressDialog

> ID：10115403
> 
> 赞同：2
> 
> 时间：2012-04-11T23:30:03.877
> 
> 标签：android, handler, progressdialog

我在 SO 中发现这段代码在`ProgressDialog`加载时显示`Activity`：

```
progDailog = ProgressDialog.show(MyActivity.this, "Process", "please wait....", true, true);

new Thread(new Runnable() {
    public void run() {
        // code for load activity
}).start();

Handler progressHandler = new Handler() {
    public void handleMessage(Message msg1) {
        progDailog.dismiss();
    }
}; 
```

但我总是得到这个例外：

> java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

感谢您对此问题的任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T06:57:52.960

这是我要做的，
**AsyncTask**在后台做“繁重的工作”：

```
public class MyTask extends AsyncTask<String, String, String> {
  private Context context;
  private ProgressDialog progressDialog;

  public MyTask(Context context) {
    this.context = context;
  }

  @Override
  protected void onPreExecute() {
    progressDialog = new ProgressDialog(context);
    progressDialog.show();
  }

  @Override
  protected String doInBackground(String... params) {
    //Do your loading here
    return "finish";
  }

  @Override
  protected void onPostExecute(String result) {
    progressDialog.dismiss();
    //Start other Activity or do whatever you want
  }
} 
```

启动异步任务：

```
MyTask myTask = new MyTask(this);
myTask.execute("parameter"); 
```

当然，您可以更改**AsyncTask**的通用类型以匹配您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:31:19.230

问题是因为您试图在工作线程中创建处理程序。这不可能。在 onCreate() 或主 UI 的其他位置创建您的处理程序。您可以从您的工作线程向您的处理程序发送消息。这是因为 Android 不允许您从除主 UI 线程本身之外的任何其他线程修改 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T02:08:21.633

您需要在主线程上而不是在 OnClick 内部创建处理程序。

# jquery - 从不同的 div 问题切换类

> ID：10115408
> 
> 赞同：0
> 
> 时间：2012-04-11T23:30:38.463
> 
> 标签：jquery, selector

所以我有一个页面显示多个包含“评论”的“帖子”。我的代码：

```
<div class="post">
    This is a post
    <span class="toggleComments">Hide/Show Comments</span>
    <div class="comment">This is a comment</div>
</div>
<div class="post">
    This is another post
    <span class="toggleComments">Hide/Show Comments</span>
    <div class="comment">This is another comment</div>
    <div class="comment">This is a third comment</div>
</div> 
```

所以这是我的问题：我有一个`toggleComments`包含“切换”评论 div 的类的跨度。我通过以下方式实现了这一目标：

```
$('.toggleComments').click(function(){
    $('.comment').toggle();
}); 
```

问题是，通过单击链接，`.comment`所有评论都隐藏/出现的 div 表单，有没有办法让来自同一帖子的评论切换效果，而不是来自所有帖子的评论？

编辑：使用 .toggleComments 行更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:38:58.893

尝试：

```
$('.toggleComments').click(function(){
    $(this).siblings('.comment').toggle();
}); 
```

**更新**以反映 OP 的更新 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:42:51.890

假设在您想要切换评论`.toggleComments`的同一内部，您会找到父级，然后在其中找到要切换的适当评论：`.post``.post`

```
$('.toggleComments').click(function(){
    $(this).closest(".post").find(".comment").toggle();
}); 
```

正如您从其他答案中看到的那样，有很多方法可以`.comment`在同一包含 div 中查找对象。这样做而不是引用同级的优点是，`.post`即使将来对 HTML 的布局进行了一些调整，它也会在公共父级中的任何位置找到它们。我更喜欢使这种类型的代码尽可能健壮，以应对未来的 HTML 调整，只要它不损害任何重要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:43:10.480

我认为你应该做这样的事情。[演示在这里](http://jsfiddle.net/f7QuB/2/)

```
$('.toggleComments').click(function(){
    var thisParent = $(this).parents('.post');
    thisParent.find('.comment').toggle();
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:43:41.000

**[演示 JSBIN](http://jsbin.com/uzadoy/2/edit)**

如果你有类似的东西：

```
<div class="post">
    This is a post
    <div class="toggleComments">SHOW COMMENTS</div>
    <div class="comment">This is a comment</div>
</div> 
```

...比这应该有帮助。

```
$('.toggleComments').click(function(){
    $(this).nextAll('.comment').toggle();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T23:44:46.077

发生这种情况是因为您所有的“.comment”和“.toggleComments”都是同一个选择器。

如果您将这些更改为唯一的，它们将起作用。IE：

```
<div class="post-1">
    This is a post
    <a class="toggle-1">Toggle Comments</a>
    <div class="comment-1">This is a comment</div>
</div>
<div class="post-2">
    This is a post
    <a class="toggle-2">Toggle Comments</a>
    <div class="comment-2">This is a comment</div>
</div>
$('.toggle-1').click(function(){
    $('.comment-1').toggle();
});
$('.toggle-2').click(function(){
    $('.comment-2').toggle();
}); 
```

这是 jsfiddle [http://jsfiddle.net/Uh9hJ/](http://jsfiddle.net/Uh9hJ/)

编辑：顺便说一句，使用兄弟姐妹更好，这个人说得对：[https ://stackoverflow.com/a/10115482/864488](https://stackoverflow.com/a/10115482/864488)

# mercurial - Mercurial 手动合并不启动融合

> ID：10115412
> 
> 赞同：5
> 
> 时间：2012-04-11T23:30:59.917
> 
> 标签：mercurial, merge, meld

阅读[完全手动 Mercurial 合并](https://stackoverflow.com/q/685151/343834)后，我有这样的`.hgrc`：

```
[ui]
merge = meld

[merge-tools]
meld.priority = 1
meld.premerge = False
meld.args = $local $other $base 

[merge-patterns]
** = meld 
```

但是，`hg merge -r REV`只是有效，我没有得到我所缺少的东西......

我想进行手动合并以删除其他分支引入的一些更改。另一个分支有一个影响多个文件的变更集，我不想全部修改它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T01:27:46.210

我有两个猜测。要么你的配置设置没有被选中，要么你没有足够的冲突让 Mercurial 考虑你的合并需要解决。

你可以检查前者`hg showconfig`——确保你看到你的融合设置。

如果它们出现，那么您要合并的两个变更集之间可能没有足够的冲突。即使 premerge 设置为 false，仍然需要一些需要合并的东西。两个变更集中的同一文件中是否存在实际更改？也许尝试`hg merge --tool internal:fail`然后检查`hg resolve --list`看看那里有什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T11:48:12.660

我正在按照您的指示在进行差异时使用 MELD。我明白了：

```
 hg meld file.F
usage:
    meld                       Start with no windows open
    meld <dir>                 Start with VC browser in 'dir'
    meld <file>                Start with VC diff of 'file'
    meld <file> <file> [file]  Start with 2 or 3 way file comparison
    meld <dir>  <dir>  [dir]   Start with 2 or 3 way directory comparison

meld: error: no such option: -a 
```

这个 -a 选项来自哪里？

# c# - 如何在操作参数中将字符串转换为 BigInt？

> ID：10115414
> 
> 赞同：0
> 
> 时间：2012-04-11T23:31:15.163
> 
> 标签：c#, asp.net-mvc

我有一个要显示的视图，为此我有一个接受字符串（StudentID）的控制器。这是我的控制器操作：

```
public ActionResult ShowStudent(string StudentID)
{
    ViewData.Model = student.vwStudent.Where(s => s.StudentID == StudentID);
    return View();
} 
```

现在在这里，StudentId 中有前导零。例如 00003345、000000223 等。因此，要显示特定学生的视图，我必须在 url 中输入确切的字符串“00003345”：“http://Students/ShowStudent/00003345”我希望能够显示即使我在 url 中输入“3345”也可以查看：“http://Students/ShowStudent/3345”，但出现错误。

我尝试传递 Long(Int64) 参数而不是字符串并将 StudentID 转换为 ViewData.Model 中的字符串，例如：

```
ViewData.Model = student.vwStudent.Where(s => s.StudentID == StudentID.ToString()); 
```

但我收到一个错误：

> LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式。

编辑：像这样将其解析为 Int64 有什么问题：

```
ViewData.Model = student.vwStudent.Where(s => Int64.Parse(s.StudentID) == Int64.Parse(StudentID)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T23:42:58.603

下面的工作吗？

```
public ActionResult ShowStudent(string StudentID)
{
    var padded = StudentID.PadLeft(8, '0');
    ViewData.Model = student.vwStudent.Where(s => s.StudentID == padded);
    return View();
} 
```

或者，如果 StudentID 并不总是添加到 8 个字符，您可能必须使用底层 SQL LIKE 运算符查询所有可能的 StudentID：

```
var students = student.vwStudent.Where(s => s.StudentID.EndsWith(StudentID)); 
```

然后遍历这些结果以寻找正确的匹配。

最后，如果您希望使用底层 SQL IN 运算符将所有可能的匹配项发送到查询以获得精确返回：

```
public ActionResult ShowStudent(string StudentID)
{
    var possibleStudents = Enumerable.Range(StudentID.Length, 8 - StudentID.Length).Select(l => StudentID.PadLeft(l, '0'));
    ViewData.Model = student.vwStudent.Where(s => possibleStudents.Contains(s.StudentID));
    return View();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T23:43:31.360

如果您的数据库包含一个大整数，并且您发送的内容更小……您将得到一个`stack overflow`. 您需要将该字符串解析为有用的内容：

```
ViewData.Model = student.vwStudent.Where(s => s.StudentID == long.Parse(StudentID)); 
```

但是，这似乎不是问题（即使问题明确指出“如何将字符串转换为大整数”）。

根据您的描述 ( `StudentId's have leading zeros in them`) 和您的评论`I have to enter it exactly "00003345"`，我将假设此方法需要一些*逻辑*。另一方面，我不太确定，因为您的问题表明 StudentIds 的长度不同。？！

```
public ActionResult ShowStudent(string StudentID)
{
 while( StudentID.Length < 8 )
 {
  StudentID = "0" + StudentID;
 }
 ViewData.Model = student.vwStudent.Where(s => s.StudentID == StudentID);
 return View();
} 
```

或者更有趣：

```
public ActionResult ShowStudent(string StudentID)
{
 var x = student.vwStudent.Where(s => s.StudentID == StudentID).FirstOrDefault();
 while( x != null && StudentID.Length < 15)
 {
  StudentID = "0" + StudentID;
  x = student.vwStudent.Where(s => s.StudentID == StudentID).FirstOrDefault();
 }
 ViewData.Model = x;
 return View();
} 
```

或稍微干燥器：

```
public ActionResult ShowStudent(string StudentID)
{
    Student s;
    while( (s=students.FirstOrDefault( x => x.StudentId == StudentId )) == null ) {
        StudentId = "0" + StudentId;
        if( StudentId.Length > 15 ) break;
    }

    return View( s );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T23:44:24.073

LINQ 需要能够将所有函数转换为底层数据存储，这可能就是您收到该错误消息的原因。但是，如果我正确理解您的问题，您应该能够通过以下方式完成您正在寻找的内容：

```
public ActionResult ShowStudent(long studentId)
{
    var studentIdStr = studentId.ToString( "D9" );  // 9-digit number, padded w/ zeros
    ViewData.Model = student.vwStudent.Where(s => s.StudentId == studentIdStr);
    return View();
} 
```

顺便说一句，将模型传递给视图的标准方法不是通过设置`ViewData.Model`，而是将其传递给`View`方法：

```
public ActionResult ShowStudent(long studentId)
{
    var studentIdStr = studentId.ToString( "D9" );  // 9-digit number, padded w/ zeros
    return View( student.vwStudent.Where(s => s.StudentID == studentIdStr) );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T23:46:07.757

这是个有趣的问题。如果StudendID 以前导零存储，那么任何内置MVC 函数都将构造具有相同值的URL（即**使用**前导零）。但是您可以更改 Controller 方法以获取字符串，然后将其转换为 Int64，然后自己添加零`.PadLeft()`，模型绑定应该仍然有效。

```
public ActionResult ShowStudent(string StudentID) 
{ 
    string paddedStudentID = Convert.ToInt64(StudentID).ToString().PadLeft(9, '0');
    ViewData.Model = student.vwStudent.Where(s => s.StudentID == paddedStudentID); 
    return View(); 
} 
```

不过，我不确定这会增加多少价值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:29:42.740

感谢大家的帮助，我听取了您的一些建议，并得出了一个适合我的解决方案。

我能够通过在我的 SQL 中进行转换来解决这个问题：

```
CAST(CAST(StudentID AS bigint) AS nvarchar(33)) AS StudentID 
```

然后在我的控制器中转换它：

```
var StudentID = Convert.ToString(Int64.Parse(StudentId));

ViewData.Model = student.vwStudent.Where(a => a.StudentID == StudentId); 
```

# php - php + facebook 在好友列表中搜索图表

> ID：10115416
> 
> 赞同：-3
> 
> 时间：2012-04-11T23:31:21.390
> 
> 标签：php, javascript, facebook

我用 fb php sdk 检索用户的朋友列表。然后，当我的用户在输入框中输入时，我想根据输入向他展示包含单独 div 中输入的字母的朋友（我认为最好的方法是使用 javascript）。类似于 ajax 预测搜索框，但在我的情况下，我有用户“预加载”了 fb php sdk。你能帮我如何/我应该从哪里开始吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:18:22.240

首先，您需要使用您的 API 获取用户的好友列表

```
$user_friends = $facebook->api('/me/friends');
$friends_details = json_decode(file_get_contents('https://graph.facebook.com/me/friends?access_token=<your access token>']), true); 
```

然后你应该把所有东西都插入你的数据库，

```
for($i=0;$i<sizeof($friends_details);$i++){
   $friend_id = $friends_details['data'][$i]['id'];
   $friend_name = $friends_details['data'][$i]['name'];
} 
```

现在用你的 sql 查询完成它。

最后，当用户搜索朋友姓名时，您可以进行 ajax 调用以将其显示在单独的 div 中。

# ms-access - Access 2007：插入查询

> ID：10115421
> 
> 赞同：0
> 
> 时间：2012-04-11T23:31:44.043
> 
> 标签：ms-access, insert

我正在处理 Access 2007 中的两个表，下面的查询导致零记录。我想将客户 ID 复制到事务表中。

INSERT INTO Transactions (NAME_ID) SELECT ID FROM Clients WHERE not exists (select * from Transactions where Transactions.Name=Clients.Name);

提前谢谢你，巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:37:53.250

您需要 UPDATE 查询，而不是 INSERT

```
UPDATE clients INNER JOIN transactions ON clients.Name = transactions.Name  
SET transactions.Name_ID = [clients].[ID]; 
```

UPDATE 之后的部分定义表之间的连接 SET 之后的部分定义要更新的项目

# cocos2d-iphone - Box2d 动态子弹体沉入静态体

> ID：10115422
> 
> 赞同：1
> 
> 时间：2012-04-11T23:31:57.627
> 
> 标签：cocos2d-iphone, box2d, collision, bullet

我正在使用 box2d 在 cocos2d 中制作游戏，但遇到了一些问题。

我让程序遍历 tilemap 的 (.tmx) 行和列，搜索“collidable”属性设置为“true”的图块。如果找到，则在该图块的位置设置一个方形静态 box2d 主体（带有固定装置和所有）。所以本质上，我应该在迭代完成后在我需要的地方设置一堆方形物体（取决于瓷砖地图）。我还有一个由手势控制的方形动态主体（向上手势向上滑动，向下手势向下滑动等），它应该只在四个方向之一上移动：上、下、左、右。身体的恢复是 0.0f，因此它会在没有反弹的情况下停止撞击，并且摩擦也是 0.0f，因为不需要它（世界重力是 0.0f，也是 0.0f）。

当动态物体与正方形墙碰撞时，就会出现问题。我通过根据手势设置身体的速度来控制身体的运动。向右移动的一个例子是：

```
#define bodyVel 100
...
if (gestureRight)
{
body->SetLinearVelocity( b2Vec2(bodyVel / PTM_RATIO, 0) );
} 
```

我将身体设置为子弹，这样当它与墙壁碰撞时不会嵌入，但我遇到了一些奇怪的结果。一个例子是这样的：

我将身体向右移动到墙上，它停止了。好的。接下来，我想向上移动它，所以我向上示意。好的。但是，有时，当它在墙上滑动时，身体似乎“抓住”了什么东西，它会失去控制并朝多个方向旋转。坏的。

我能想到的唯一解释是，动态体实际上是在第一个接触的头时嵌入到墙上的，并且当它在下一个给定的运动手势时向上滑动时，它被卡在了构成墙壁的正方形的边缘，并从笔直的路径中变得刺耳。我通过将身体设置为固定旋转（根本不旋转）来确认这个奇怪的活动，因此，它不会失去控制，而是简单地停止。鉴于我的假设，这是意料之中的。所以动态的身体正在变得嵌入是我想说的。

我不明白为什么会发生这种情况，因为我将身体设置为像子弹一样行事，以避免完全像这样的问题。我想要物体做的就是能够沿着笔直的路径移动——无论是向上、向下、向左还是向右——在与墙壁接触时停止，并沿着墙壁移动而不受构成墙壁的物体的干扰.

我觉得除非我对子弹体的工作原理有误解，否则正在发生的嵌入不应该成为问题。

我还使用 DebugDraw 来查看方形静态物体是否创建了一个齐平的墙，他们确实做到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:07:35.647

不幸的是，这是 Box2d 中的一个已知问题......[来自常见问题解答](http://code.google.com/p/box2d/wiki/FAQ)：

> **基于瓷砖的环境**
> 
> 为您的地形使用多个框可能效果不佳，因为类似框的字符可能会卡在内部角落。Box2D 的未来更新应该允许边缘链上的平滑运动。一般来说，您应该避免使用矩形字符，因为碰撞容差仍会导致不希望出现的阻碍。
> 
> 有关更多信息，请参阅此帖子： [http ://box2d.org/forum/viewtopic.php?f=3&t=3048](http://box2d.org/forum/viewtopic.php?f=3&t=3048)

# assembly - 转换内存地址

> ID：10115424
> 
> 赞同：0
> 
> 时间：2012-04-11T23:32:02.253
> 
> 标签：assembly

我一直在寻找这个问题，但似乎找不到。如果我在 GDB 反汇编代码中，如何将 0xfffffff4 之类的内容转换为 -0xc（我在网上找到了值）

我正在尝试实现它在 Perl 中的完成方式。我使用的是十六进制，但我不知道我在做什么：

```
print hex(shift); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:35:30.027

这是二进制补码[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

所以，你所做的就是反转每一位，然后加 1。

例如 0xffffff04 将变为 0x000000fb+1=0x000000fc

编辑：要改回来，你做同样的事情：所以 0x000000fc 会变成 0xffffff03+1=0xffffff04

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:35:40.653

在 32 位寄存器或内存访问中，`0xfffffff4` *is* `-0xc`（或`-12`）——假设是现代 CPU 架构，所有这些架构都使用二进制补码。

# android - 有没有更好的方法来做到这一点？- android文本颜色变化

> ID：10115425
> 
> 赞同：1
> 
> 时间：2012-04-11T23:32:10.747
> 
> 标签：android, android-layout, android-edittext

我想在编辑文本中突出显示名称，
所以我有一个包含这些单词的字符串数组。
我创建了以下代码，如果在单词数组中找到它，则突出显示在edittext中写入的单词：

```
final Handler handler = new Handler();
final Runnable r = new Runnable()
{
    public void run() 
    {
        String allText = mac.getText().toString();
        for(int i=0;i<allText.length();i++){
            for(int j=0;j<darkBlue.length;j++){
                if(allText.indexOf(darkBlue[j])!=-1){
                    Spannable WordtoSpan = new SpannableString(allText);        
                    WordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), allText.indexOf(darkBlue[j]), allText.indexOf(darkBlue[j])+darkBlue[j].length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    mac.setText(WordtoSpan);
                    mac.setSelection(mac.getText().length());//put the cursor at the end of the text.
                }
            }
        }
        handler.postDelayed(this, 1000);
    }
};

handler.postDelayed(r, 1000); 
```

问题是，UI 每隔一秒就会再次渲染，因此不让我与键盘交互，而且它的行为都很缓慢。
您是否知道更好的替代方法，用于从字符串数组中突出显示 android 的 textedit 中的几个单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:07:53.333

好吧，您的算法当然可以优化 - 请参阅我稍后在帖子中的示例。但更重要的是，正如另一位发帖人所说，最好将工作转移到另一个线程，然后只发布重要的东西。一个常见的误解是，通过在处理程序中发布，您在不同的线程中运行，但事实并非如此。在另一个线程中进行处理并仅发回操作 UI 的部分：（包括一些算法更改，如果不清楚或者我完全搞砸了，请告诉我 :)）

```
private void startWork() {
  new Thread(doWork).start();
}

Runnable doWork = new Runnable() {
  while (true) { // alter this condition to meet your needs
    for(int j=0;j<darkBlue.length;j++){
      String subText = mac.getText().toString();
      int length = darkBlue[j].length();
      int sub = subText.indexOf(darkBlue[j]);
      int index = 0;
      while(sub > 0){)
       index += (sub + length);
       colorSpan(Color.Blue, (index - length), index);
       allText = allText.substring(sub + length);
       sub = subText.indexOf(darkBlue[j]);
      }
    }
    try {
      Thread.sleep(1000);
    }
    catch (InterruptedException e) {
    }
  }
}

private void colorSpan(Color color, final int start, final int stop) {
  handler.post(new Runnable() {
    public void run() {
      String allText = mac.getText().toString();
      Spannable WordtoSpan = new SpannableString(allText);        
      WordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), start, stop, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
      mac.setText(WordtoSpan);
      mac.setSelection(mac.getText().length());
    }
  });
} 
```

注意：我这样做有点匆忙，如果有任何明显的错误，请原谅我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:43:15.353

仅将 setText 和 setselection 发布到 ui 线程。所有不直接与 ui 元素交互的东西都应该在另一个线程上完成

# mysql - mysql中的varchar和复合主键？

> ID：10115433
> 
> 赞同：1
> 
> 时间：2012-04-11T23:32:57.350
> 
> 标签：mysql, performance, primary-key, varchar

我正在开发一个日志数据库，在这种情况下记录的组件的 ID 不是由数据库本身决定的，而是由发送报告的系统决定的。系统id是唯一的varchar，组件的id是由系统决定的（在某个遥远的地方），所以当组件的主键是system_id + component_id时保证唯一性。

我想知道的是这种方法是否有效。我可以使用自动递增的整数作为 id，但这意味着我必须在插入之前执行选择操作，以便我可以获得这个生成的 id，而不是使用系统提供的已知字符串 id。

数据库将是小规模的，不超过几十个系统，每个系统都有几十个组件，并且可能有数千个组件更新（另一个表）。旧更新将定期转储到文件中并从数据库中删除，因此它永远不会变得“大”。

有什么推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:52:19.833

我倾向于将自动递增的整数作为主键并将索引放在 system_id 和 component_id 上。您在插入之前的选择将非常便宜且快速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:32:23.240

我相信您会发现使用 varchar() 键可以很好地执行数百万行的表。

这很容易测试。只需导入您的数据。

# spring - Tomcat + OSGi：未找到 Catalina 服务

> ID：10115434
> 
> 赞同：4
> 
> 时间：2012-04-11T23:33:03.537
> 
> 标签：spring, tomcat, osgi, catalina, spring-dm

尝试在 virgo-tomcat-server-3.0.2.RELEASE 上启用带有 Web 支持的 Spring DM 时，我得到了异常：

```
ERROR WebExtender-Init
org.springframework.osgi.web.deployer.tomcat.TomcatWarDeployer
No Catalina Service found, bailing out
org.springframework.osgi.service.ServiceUnavailableException: 
service matching filter=[(objectClass=org.apache.catalina.Service)] unavailable 
```

这些是我添加到服务器的捆绑包：

*   catalina.osgi-5.5.23-SNAPSHOT.jar
*   catalina.start.osgi-1.0.0.jar
*   spring-osgi-web-1.2.1.jar
*   spring-osgi-web-extender-1.2.1.jar

以前有人遇到过这个错误吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:02:48.300

你不需要在pickup目录中添加catalina jar，因为Tomcat Virgo Server默认支持tomcat。您必须添加 catalina jar 文件才能在 Equinox OSGI 服务器上运行 Tomcat。

Spring 动态模块已于 2009 年底成为 Eclipse Gemini Blueprint 项目。所有新开发（包括 2.x）现在都通过 Eclipse 基金会托管和发布

Eclipse Gemini Blueprint 可以认为是 Spring DM 2.x，Spring DM 1.x 的继承者。

Tomcat Virgo Server 内置了所有 Blueprint Services(Spring DM) jar 文件。您可以[在此处](http://static.springsource.org/osgi/docs/2.0.0.M1/reference/html-single/#web%3aspring-mvc)参考如何将 Spring MVC 与 Gemini Blueprint Services 一起使用。

这个论坛讨论了同样的[问题。](http://www.eclipse.org/forums/index.php/m/842877/)

# web-services - 搜索结果分页，最佳实践

> ID：10115438
> 
> 赞同：0
> 
> 时间：2012-04-11T23:33:37.707
> 
> 标签：web-services, search, pagination

我通过来自几个不同提供商的 WS 请求获得了一些结果，然后我收集并订购结果并将它们展示给用户。

结果的数量在 0 到 60-70 之间，平均为 10-20。我的问题是：如何处理分页？我试图找出最适合我的情况的解决方案，因为我已经找到了几种方法来做到这一点......而且我确信我错过了其他好的（可能更好）的解决方案......我认为的解决方案到现在：

1) 通过 Web 服务为每个页面（15 个结果）创建一个新的聚合搜索。这很愚蠢，但由于平均结果数为 10-20，因此不会经常使用分页。

2）将所有结果保存在数据库中作为临时缓存，然后一次显示15个结果

3）在单个页面中加载所有结果，但使用 Jquery 分页插件（客户端？）仅显示 15 个页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:54:47.360

Are you really sure that someday the web services aren't going to start returning a lot more results? What if someday there is a bug in one of them where it accidentally returns 50,000 copies of the same result to you? In each of your solutions:

1.  A larger than expected number of results would cause you to spam the web services with repeated requests for the same results, as users page through them.

2.  A larger than expected number of results will end up temporarily taking up space in your database. Also, in a web app, how will you know when to clear the cache?

3.  A larger than expected number of results will end up as a huge page in the user's browser, possibly not rendering correctly until the whole thing is downloaded.

I really like option 3\. The caching is done at the place where the data is wanted, there are no redundant hits to the web services, and paging will be super fast for the users.

If you're really certain no more than 60-70 results will ever be returned, and/or that your users will never want a really large number of results, you could combine option 3 with a cap on the number of results you will return.

Even in the worst case where the web services return erroneous/unexpected results, you could trim it to the first so many, send them down to the browser, and paginate them there with JavaScript.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:42:45.743

这取决于 1 个结果有多大，但如果您最多有 60-70 个结果，我不希望分页，尤其是在不经常出现的情况下。更好的用户体验。

# c++ - 二叉搜索树 C++

> ID：10115442
> 
> 赞同：0
> 
> 时间：2012-04-11T23:34:10.377
> 
> 标签：c++, data-structures, linked-list, nodes, binary-search-tree

我试图实现一个简单的二叉搜索树来练习。我试图只添加值并打印节点中的值。但是，我没有得到节点中值的正确升序。这是我所拥有的：

```
struct Node
{
    int data;
    Node* leftN;
    Node* rightN;

};

typedef Node* Node_ptr;
Node_ptr head;

//INSERT_VALUE FUNCTION
Node* insert_value(Node_ptr leaf, int key)
{
    //Root case when there is no set value yet  
    if(leaf == NULL)
    {
        leaf = new Node;
        head = leaf;
        cout << "Make the first node" << endl;
        leaf->data = key;
        leaf->leftN = NULL;
        leaf->rightN = NULL;
        return leaf;
    }   
    //Left child Node
    if(key < leaf->data)
    {
        //Search for a spot in the tree to add a Node (left value < root value < right value)
        //This is only true for the left child Node
        if(leaf->leftN != NULL)
            insert_value(leaf, key);
        //We have found a spot in the tree to add a new Node and add the value of key
        else 
        {
            cout << "Insert-left" << endl;
            leaf->leftN = new Node;
            leaf = leaf->leftN;
            leaf->data = key;
            leaf->leftN = NULL;
            leaf->rightN = NULL;
            return leaf;
        }
    }

    //Right child Node
    else if(key >= leaf->data)
    {
        //Search for a spot to add a new Node in the tree (only amongst the right child Nodes)
        if(leaf->rightN != NULL)
            insert_value(leaf, key);    
        //Once we have found a spot to add a new Node, append the new Node
        else
        {
            cout << "Insert-right" << endl;
            leaf->rightN = new Node;
            leaf = leaf->rightN;    
            leaf->data = key;
            leaf->leftN = NULL;
            leaf->rightN = NULL;
            return leaf;
        }
    }   
}

//PRINT FUNCTION
void printTree(Node_ptr leaf)
{
    if(leaf == NULL)
        return;
    printTree(leaf->leftN);
    cout << "Data element: " << leaf->data << endl;
    printTree(leaf->rightN);
}

//MAIN
int main()
{
    Node_ptr root = NULL;
    int i;

    //initialize values
    for(i = 1; i < 12; i+=2)
        root = insert_value(root, i);
    root = head;
    for(i = 0; i < 11; i+=2)
        root = insert_value(root, i);
    root = head;
    printTree(root);

    root = head;
    cout << "Head Node: " << root->data << endl;

    return 0;
} 
```

当我打印结果时，我得到的是：0、2、4、6、8、10、1、3、5、7、9、11，头节点的值为1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:45:08.550

因为您将插入称为：

```
 root = insert_value(root, i); 
```

您插入的位置始终使用从最后一次插入开始的子树。除了重新开始添加奇数的时间，当您开始插入头部时。

如果您创建一个`class BinarySearchTree`包含头指针的 a 和一个采用`int value`调用的 insert 方法`Node::insert( head, value )`，那么您可以只在该类上调用 insert ，而不向它传递一个节点，并且它总是可以看到插入使用的根递归开始的树。

只有我，但我会有一个 Node 的构造函数，它接受一个`int`并将指针初始化为 NULL。这样你就不必在插入方法中这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:43:13.967

在叶子->节点？!= NULL 情况，我认为不是打电话

```
insert_value(leaf, key); 
```

你想说

```
leaf->node? = insert_value(leaf->node?, key) 
```

在哪里 ？当然是 L 或 R。

您可能会考虑为该方法添加注释，如下所示：

```
// Adds the given key to the (sub-)tree rooted at node* then returns the new root
// of that (sub-)tree.
node *insert_value_and_return_root(node *root, int value) { ... } 
```

# c# - 需要帮助制定正则表达式来解析数据

> ID：10115443
> 
> 赞同：0
> 
> 时间：2012-04-11T23:34:19.967
> 
> 标签：c#, regex

基本上，

我有想要从文本块中吐出的文本。但是，我大部分都保留了正则表达式，它要么太少[跳过一节]，要么太多[阅读下一节的一部分]。它基本上需要阅读我从银行对账单中提取的文本。我已经尝试过更多地阅读正则表达式，但是我仍然不知道该怎么做。

下面是一些示例，让你们了解我正在尝试做的事情。

```
_4XXXXXXXXXXXXXX9_
_SOU THE HOME DEPOT 431      POMPANO BEACH * FL
AUT  020112 DDA PURCHASE_
_2/1_DEBIT POS_3.15_ 
```

下划线基本上是我要提取的部分。基本上除了 DEBIT POS 之外的所有东西。

我正在使用的正则表达式是：

```
\A
(?<SerialNumber>\b[0-9]{13,16}\b)
(?<Description>.) 'PROBLEM HERE'
(?<PostingDate>
(?:1[0-2]|[1-9])/(?:3[01]|[12][0-9]|[1-9]))
(?<Amount>[,0-9]+\.[0-9]{2})
\Z 
```

我无法将描述设置为任何长度的字符，因为我不知道文本部分的最大长度。我也不知道是2行描述还是1行。这主要让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:58:22.090

我想你想先将每四行连接在一起作为一行：

```
var file = @"C:\temp.txt";
var lines = System.IO.File.ReadAllLines(file);
var buffer = new List<String>();

for (var i = 0; i < lines.Length; i++ )
{
    if (i % 4 == 0) { buffer.Add(""); }
    buffer[buffer.Count - 1] += lines[i] + " ";
}

buffer.ForEach(b => Console.WriteLine(b)); 
```

然后，您实际上可以解析缓冲区中的每个条目，就好像它是一行一样。这可以使用正则表达式或字符串子字符串轻松完成。比尝试跨行更容易。

上面的代码不是最干净的，但它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:42:24.533

看起来像不使用正则表达式的另一个简单答案。[`File.ReadAllLines()`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)如果每一个都是行，那么解析每一行 就不会那么难了。

```
public class Order
{
  public string SerialNumber { get; set; }
  public string Description { get; set; }
  public DateTime PostingDate { get; set; }
  public Decimal Amount { get; set; }

  public void SetSerialNumberFromRaw(string serialNumber)
  {
    // Convert to required type, etc.
    this.SerialNumber = <someConvertedValue>;
  }
  public void <OtherNeededValueConverters>
}    

List<string> lines = File.ReadAlllines("<filename").ToList();
List<Order> orders = new List<Order>();

Order currentOrder = null;
foreach (string line in lines)
{
  if (currentOrder = null)
  {
    currentOrder = new Order();
    orders.Add(currentOrder);
    currentOrder.SetSerialNumberFromRaw(line);
  }
  else
  {
    if (line.Contains("DEBIT POS", CultureInfo.CurrentCultureIngoreCase))
    { 
      currentOrder.SetPostingDateAndAmount(line);
      currentOrder = null;
    }
    else
    {
      currentOrder.SetAppendDescription(line);
    }
  }
} 
```

# java - 在 Fedora 16 上启动新安装的 Eclipse 时出现 java 错误

> ID：10115446
> 
> 赞同：2
> 
> 时间：2012-04-11T23:34:40.240
> 
> 标签：java, eclipse, fedora, x86-64

操作系统：Fedora 16、64 位架构

尝试打开新安装的 Eclipse Indigo 时出现以下错误：

进程 /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/bin/java 被信号 6 (SIGABRT) 杀死

我通过下载 tar.gz 并将其解压缩到 /opt 来安装 Eclipse

然后我在 /usr/bin 中创建了一个可执行文件，还在 /user/share/applications 中创建了一个启动器

Eclipse 飞溅打开它让我选择一个工作区，但是当我选择一个并点击 OK 时，它崩溃了

错误日志文件可以在[这里找到](https://bugzilla.redhat.com/show_bug.cgi?id=811754)

即使升级到 Java 7 后问题仍然存在

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:50:00.157

我忘了提到这是在 KDE 中

我登录了 GNOME——Eclipse 打开没问题

当我回到 KDE 时，错误消失了。我现在可以使用 Eclipse :)

所以问题就解决了。我仍然想知道出了什么问题。

# jquery - Unity 游戏未在 Fancybox iframe 中运行

> ID：10115449
> 
> 赞同：0
> 
> 时间：2012-04-11T23:35:03.993
> 
> 标签：jquery, html, iframe, fancybox, unity3d

我正在尝试使用 iframe 将我的 Unity 游戏嵌入 Fancybox。当我在单独的网页中打开它时它运行良好，但嵌入时它不会加载。这是我在页面顶部的代码：

[http://pastebin.com/embed_js.php?i=tJsjwVnH](http://pastebin.com/embed_js.php?i=tJsjwVnH)

这是我用来尝试在fancybox中调出游戏的代码：

[http://pastebin.com/embed_js.php?i=dsHKVt4n](http://pastebin.com/embed_js.php?i=dsHKVt4n)

我真的很感激任何帮助，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:27:19.113

您正在将此类绑定到 fancybox: `fancybox_swf`，但您的锚点具有其他类：`fancybox_unity`。此外，您没有任何`data-`属性可以将尺寸传递给 fancybox。

我想你的锚应该看起来像

```
<a class="fancybox_swf fancybox.iframe" title="Shoot The Hoop" href="unity/WebPlayer.html" data-width="600" data-height="320">
 <img src="images/shootthehoop.png" alt="Shoot The Hoop" />
</a> 
```

设置`data-width`和`data-height`值作为您的方便，然后您可以使用[您的 fancybox 脚本](http://pastebin.com/embed_js.php?i=tJsjwVnH)。

请注意，您必须设置 HTML5 `DOCTYPE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:30:21.927

哦，糟糕，我不小心剪掉了我粘贴的代码的错误部分！我打算编辑掉fancybox_swf，但我删掉了fancybox_unity。无论如何，事实证明我的主机不支持 unity3d 文件，这就是它无法正常工作的原因，我最终将它托管在其他地方，但您的代码完美地链接到了 fancybox，所以谢谢！

# jquery - 似乎无法让 JQuery 在 MVC3 中工作

> ID：10115453
> 
> 赞同：1
> 
> 时间：2012-04-11T23:35:21.833
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我正在尝试复制此面板/手风琴界面：

[http://layout.jquery-dev.net/demos/complex.html](http://layout.jquery-dev.net/demos/complex.html)

我以为这很简单。我将所有 div 标签复制到 index.cshtml 并引用了 _Layout.cshtml 中的相应 jquery 文件

没有任何效果。当我将所有代码移至一个简单的 html 时，一切正常。

关于在 mvc3 中实现这种类型的 jquery 接口，我有什么不明白的地方吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:40:42.323

我的团队正在使用带有 MVC 3 的 jQuery 和 jQuery UI。没有真正聪明的技巧。我们使用的是 Cassette，但网站上的 JavaScript 文件仍然可以直接访问。IE 这会起作用：

```
<script src="/scripts/someDir/jquery.js"></script> 
```

我假设你在脚本标签上得到了 404（你可以在 Firebug 网络面板中检查这个）。您可能只需要确保 jQuery 和插件已安装并调整脚本的路径。

# vb.net - Visual Basic .NET 中消息框中的按钮

> ID：10115460
> 
> 赞同：0
> 
> 时间：2012-04-11T23:35:58.040
> 
> 标签：vb.net

我正在编写一个井字游戏程序，并且我已经设置了棋盘，并且该游戏适用于大多数人。决定谁赢。我现在要做的是在确定获胜者后，会弹出一个消息框并显示谁获胜。我希望消息框包含两个按钮。一个带有文字“Ok for new game”的按钮和带有文字“Cancel to exit”的第二个按钮。我正在使用 Visual Basic 2010 Express。

这是我的代码：

```
Public Class Form1
    Private turn As Integer = 1
    Private play() As String = {"O", "X"}
    Private board(2, 2) As String

    Private Structure arrayIndex
        Dim x As Integer
        Dim y As Integer
    End Structure

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        For x As Integer = 1 To 9
            Dim b As New Button With { _
                .Width = 80, _
                .Height = 80, _
                .Text = "", _
                .Location = New Point(60 + (((x - 1) Mod 3) * 80), 60 + (((x - 1) \ 3) * 80)), _
                .Tag = New arrayIndex With {.x = (x - 1) Mod 3, .y = (x - 1) \ 3}}
            Me.Controls.Add(b)
            AddHandler b.Click, AddressOf buttons_click

        Next
        Me.SetClientSizeCore(360, 360)

    End Sub

    Private Sub buttons_click(ByVal sender As System.Object, ByVal e As System.EventArgs)
        If DirectCast(sender, Button).Text <> "" Then Return
        DirectCast(sender, Button).Text = play(turn Mod 2)
        Dim index As arrayIndex = DirectCast(DirectCast(sender, Button).Tag, arrayIndex)
        board(index.x, index.y) = play(turn Mod 2)
        turn += 1
        winner()
    End Sub

    Private Sub winner()
        Dim rows(7) As String

        rows(0) = board(0, 0) & board(1, 0) & board(2, 0)
        rows(1) = board(0, 1) & board(1, 1) & board(2, 1)
        rows(2) = board(0, 2) & board(1, 2) & board(2, 2)
        rows(3) = board(0, 0) & board(0, 1) & board(0, 2)
        rows(4) = board(1, 0) & board(1, 1) & board(1, 2)
        rows(5) = board(2, 0) & board(2, 1) & board(2, 2)
        rows(6) = board(0, 0) & board(1, 1) & board(2, 2)
        rows(7) = board(2, 0) & board(1, 1) & board(0, 2)

        For x As Integer = 0 To 7
            If rows(x).Length = 3 AndAlso (rows(x)(0) = rows(x)(1) AndAlso rows(x)(0) = rows(x)(2)) Then
                MessageBox.Show(rows(x)(0) & "'s winsssss!", "We have a winner!", MessageBoxButtons.OKCancel, MessageBoxIcon.Information)
            If DialogResult.OK Then
            turn = 1
            ReDim board(2, 2)
            For Each ctrl As Control In Controls
            ctrl.Text = ""
            Next
            Return
            Else
               Me.Close()

            End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:54:46.993

最简单的方法是创建一个新`Form`的作为`MessageBox`. 有很多`API`要定制的，`MessageBox`但会给你额外的时间。所以这就是你要做的。

*   创建一个新表单
*   将 MaximizeButton、MinimizeButton 和 ShowOnTitleBar 设置为`False`
*   设置`FormBorderStyle`为 FixedDialog 所以它不会很大
*   在其上添加两个按钮（`Ok for new game`和`Cancel to exit`）
*   设置`StartUpPosition`为`CenterForm`

将此代码添加到`On for New Game Button`（**点击事件**）

```
DialogResult = DialogResult.Yes 
```

将此代码添加到`Cancel to exit`（**点击事件**）

```
DialogResult = DialogResult.No 
```

游戏结束后，尝试调用您创建的新表单。

```
Dim xForm as new frmAsk ' Assuming that frmAsk is the name of your new form
If xForm.showDialog = DialogResult.Yes Then
    ' New game here
Else
    ' exit game
End If 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T02:33:01.753

你为什么不试试这个：

```
If Msgbox("Your text here") <> MsgboxResult.Yes then
    Exit
Else
    Your code there to continue the game.
End if 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:31:55.317

试试这个

```
Select Case msgbox("You Win! Do you want to play another game?",vbYesNo)
    case vbYes
        'add code to start a new game
    case vbNo
        'add code to exit your app
        Unload Me
End Select 
```

# objective-c - 为什么我的函数没有在我的 AppDelegate 中运行？

> ID：10115463
> 
> 赞同：0
> 
> 时间：2012-04-11T23:36:03.930
> 
> 标签：objective-c, ios

我想要一个函数在我的 iOS 应用程序首次启动时运行，所以我把它放在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

在 AppDelegate.m 中。但是，当我的应用程序启动时，我的函数没有被调用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:41:24.627

我猜您的 AppDelegate 没有被创建和/或添加为应用程序的代表。您是使用 XIB 还是以编程方式执行此操作？

检查您的 -init 和/或 -awakeFromNib 例程是否正在被调用。

# ruby-on-rails - find_commentable 返回 nil:NilClass 的未定义方法 `comments'

> ID：10115467
> 
> 赞同：3
> 
> 时间：2012-04-11T23:36:53.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`undefined method 'comments' for nil:NilClass`当我尝试创建新评论（多态关系）时，我不断在我的 create 方法中得到一个。我已经浏览了有关此的其他几个问题，但似乎无法找到我的表单/控制器有什么问题。

这是我的通用部分评论：

```
<%= form_for [@commentable, Comment.new] do |f| %>
  <%= f.text_area :content %>
  <%= f.submit "Post" %>
<% end %> 
```

请注意，这是在我的 traveldeal/show 页面中呈现的。表单呈现良好。如果我更改 form_for 以传递参数`[@commentable, @comment]`，我会得到`undefined method`NilClass:Class 的错误 model_name'

路线.rb

```
resources :users 
resources :traveldeals

resources :traveldeals do
  resources :comments
end

resources :users do
  resources :comments
end 
```

Railscasts 将上述内容写为`resources :traveldeals, :has_many => :comments`，但我相信这是过时的语法。

评论控制器.rb

```
class CommentsController < ApplicationController
  before_filter :authenticate, :only => [:create, :destroy]

  def new
    @comment = Comment.new
  end

  def create
    @commentable = find_commentable
    @comment = @commentable.comments.build(params[:comment])
    @comment.user_id = current_user.id

   if @comment.save
      flash[:success] = "Successfully saved comment."  
      redirect_to root_path
    else
      redirect_to current_user
    end
  end

private

  def find_commentable
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end
    nil
   end

end 
```

编辑：添加了解决方案，因此上面的代码对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:29:39.860

你有`@commentable`你的`form_for`，但是那个变量在哪里设置？它似乎没有设置，我认为这是错误的原因。另请参阅[我](https://stackoverflow.com/a/10116592/84631)对[您其他问题的回答](https://stackoverflow.com/questions/10113981/refactoring-form-for-create-method-for-comments-in-a-polymorphic-association)。

# c# - 在配置文件中动态注入基于值的 WCF ServiceContract 的具体实现

> ID：10115468
> 
> 赞同：1
> 
> 时间：2012-04-11T23:36:56.850
> 
> 标签：c#, .net, wcf, ninject, ninject-3

假设我有以下服务合同和两个具体实现：

```
[OperationContract]
public interface ISearchService {
    public ICollection<string> Search(string text);
}

[SearchServiceBehaviour]
public class SolrSearchService : ISearchService {
    public ICollection<string> Search(string text) {
        // Implementation...
    }
}

[SearchServiceBehaviour]
public class SqlSearchService : ISearchService {
    public ICollection<string> Search(string text) {
        // Implementation...
    }
} 
```

这些属性带有 a `ServiceBehavior`，以便我可以在服务运行时基于配置文件创建实例：

```
public class SearchServiceBehaviour : Attribute, IServiceBehavior {
    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) {
        foreach (var item in serviceHostBase.ChannelDispatchers) {
            var dispatcher = item as ChannelDispatcher;

            if (dispatcher != null) {
                dispatcher.Endpoints.ToList().ForEach(e => {
                    e.DispatchRuntime.InstanceProvider = new SearchServiceInstanceProvider();
                });
            }
        }
    }
}

public class SearchServiceInstanceProvider : IInstanceProvider {
    public object GetInstance(InstanceContext instanceContext, Message message) {
        // Should cache and only do this at an interval.
        ConfigurationManager.RefreshSection("appSettings");
        var index = ConfigurationManager.AppSettings["UseSolr"] as string;

        bool UseSolr;
        bool.TryParse(index, out UseSolr);

        if (UseSolr)
            return new IndexedSearchService();
        else
            return new SearchService();
    }
} 
```

我的问题是如何根据配置文件中的变化值使用 Ninject 注入具体实现？看来我应该做以下事情：

```
public class SearchServiceModule : NinjectModule {
    private bool UseSolr;

    public SearchServiceModule() {
        // Should cache and only do this at an interval.
        ConfigurationManager.RefreshSection("appSettings");
        var index = ConfigurationManager.AppSettings["UseSolr"] as string;

        bool.TryParse(index, out UseSolr);
    }

    public override Load() {
        if (UseSolr)
            Bind<ISearchService>().To<SolrSearchService>();
        else 
            Bind<ISearchService>().To<SqlSearchService>();
    }
} 
```

然后在`InstanceProvider`：

```
public object GetInstance(InstanceContext instanceContext, Message message) {
    return _kernel.Get<ISearchService>();
} 
```

但是，在我更改配置文件中的值后，Ninject 中的绑定不会更改。有没有办法根据配置文件中的值更改绑定？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T23:50:05.433

您的模块的行为与您预期的不同，因为存在同名的字段和局部变量。

还可以查看条件绑定。。什么时候（）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:54:50.967

您在 Windows 服务中自托管。保存 .config 文件不会自动导致 Windows 服务回收并注意到您的 .config 更改（与 IIS 不同）。因此，如果您在启动时构建内核，则不会触发重新构建它。

您将不得不更改您的实现以使用该`.When()`方法根据配置设置有条件地提供实现。看起来像这样：

```
public override Load() 
{ 
    Bind<ISearchService>().To<SolrSearchService>().When(r => ShouldUseSolr());
    Bind<ISearchService>().To<SqlSearchService>().When(r => !ShouldUseSolr());
}

private static ShouldUseSolr()
{
    // Should cache and only do this at an interval.  
    ConfigurationManager.RefreshSection("appSettings");  
    var index = ConfigurationManager.AppSettings["UseSolr"] as string;  

    bool result;

    bool.TryParse(index, out result);  

    return result;
} 
```

# c# - 当另一个数据绑定下拉列表更改时更新数据绑定下拉列表控件

> ID：10115471
> 
> 赞同：0
> 
> 时间：2012-04-11T23:37:02.340
> 
> 标签：c#, asp.net, drop-down-menu

我有两个数据绑定下拉列表：

```
if (!IsPostBack)
    {
        ddlSelectProgram.DataSource = new PEIATableAdapters.programTableAdapter().GetData();
        ddlSelectProgram.DataBind();

        ddlSelectSurveyType.DataSource = new PEIATableAdapters.ParticpantSurveyFormIDsTableAdapter().GetFormIDsByProgramID(ProgramID);
        ddlSelectSurveyType.DataBind();

        BindData();
    } 
```

页面加载时，对 BindData 的调用正在正确填充 grdResults：

```
 private void BindData()
{
    PEIATableAdapters.ParticipantSurveysTableAdapter adapter = new PEIATableAdapters.ParticipantSurveysTableAdapter();

    grdResults.DataSource = adapter.GetDataByFormID(FormID);        
    grdResults.DataBind();
} 
```

但是，当返回页面并通过单击提交按钮再次调用 DataBind 时，不会传入在 ddlSelectProgram 中选择的值。提交按钮的单击事件只是调用 Databind() 并且事件正在触发。

以下是 ProgramID 和 FormID 的属性：

```
protected int ProgramID
{
    get
    {
        return Convert.ToInt32(ddlSelectProgram.SelectedValue);
    }
    set
    {
        ddlSelectProgram.SelectedValue = value.ToString();
    }
}

protected int FormID
{
    get
    {
        return Convert.ToInt32(ddlSelectSurveyType.SelectedValue);
    }
    set
    {
        ddlSelectSurveyType.SelectedValue = value.ToString();
    }
} 
```

如何将两个控件绑定在一起，以便在更改 ddl_SelectProgram 时更改 ddlSelectSurveyType？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:07:58.250

页面加载时仅填充 ddlSelectSurveyType。然后使用 autoPostBack 并在 ddlSelectSurveyType 的值更改时捕获事件。然后在您知道 ProgramID 被选中后填充您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:12:52.513

在标记中将属性 AutoPostBack="True" 添加到 ddlSelectProgram，并在代码隐藏中将事件处理程序添加到 ddlSelectProgram 的 SelectedIndexChanged 事件。在该事件中绑定 ddlSelectSurveyType。

# xmpp - 服务器推送数百万个并发连接

> ID：10115477
> 
> 赞同：7
> 
> 时间：2012-04-11T23:38:04.173
> 
> 标签：xmpp, websocket, messaging, publish-subscribe, server-push

我正在构建一个分布式系统，该系统可能由数百万个客户端组成，这些客户端都需要保持开放（最好是 HTTP）连接以等待来自服务器（在其他地方运行）的命令。消息/命令的负载不会很高，可能是一条消息/秒/1000 个客户端，这意味着它将是 1000 个消息/秒@100 万个客户端。=> 它基本上是关于并发连接的。

要求也很简单。一种方式消息传递（服务器->客户端），每个“通道”只有 1 个客户端。

我在技术方面非常开放（xmpp / websockets / comet / ...）。我使用 Google App Engine 作为服务器，但不幸的是，他们的“渠道”对我不起作用（配额太低且没有 Java 客户端）。XMPP 是一种选择，但非常昂贵。到目前为止，我使用的是 URL Fetch 和 pubnub，但他们刚刚开始为连接收费（大时代）。

所以：

1.  有没有人知道可以以负担得起的方式为我做到这一点的服务？我发现大多数连接都受到限制或高额收费。

2.  有自己实现这种服务器的经验吗？我实际上已经这样做了，它工作得很好（基于 Tomcat 和 NIO），但我还没有时间实际设置一个大型负载测试环境（部分是因为这仍然是一个后备解决方案，我更喜欢一个久经沙场的消息服务器）。您对每 GB 获得多少用户有任何经验吗？有什么硬性限制吗？

我的架构还允许对 msg 服务器进行分段，但我想最大化并发连接，因为 msg 处理 CPU 开销很小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T23:32:30.650

同时，我使用 netty.io 实现了我自己的消息服务器。Netty 使用 Java NIO 并且扩展性非常好。对于空闲连接，我得到每个连接 500 字节的内存占用。我只做非常简单的消息转发（没有缓存、存储或其他花哨的东西），但在小型亚马逊实例（1ECU / 1.6GB）上很容易获得 1000 - 1500 msg / sec（每个半 KB）。

否则，如果您正在寻找（付费）服务，那么我可以推荐 spire.io（他们不收取连接费用，但每条消息的价格更高）或 pubnub（他们确实收取连接费用，但每条消息更便宜）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T09:14:12.280

您必须更多地关注构建这种环境的架构。首先，如果您要自己编写套接字管理，则不要使用 Thread per Client Socket。使用异步方法接收和发送数据。如果您的消息很小，WebSockets 可能太重了。因为它实现了框架，它必须单独应用于每个套接字的每个消息（缓存可用于不同版本的 WebSockets 协议），这使得它们处理两个方向的速度变慢：接收和发送，特别是因为数据屏蔽.

可以创建数百万个套接字，但只有最先进的技术才能做到这一点。Erlang 能够处理数百万个连接，并且具有相当大的可扩展性。如果您希望使用其他更高级别的技术拥有数百万个连接，那么您需要考虑对您要完成的任务进行集群。

例如，使用将跟踪所有处理服务器的网关服务器。并拥有它们的数据（IP、端口、负载（如果它是一个内部网络，防火墙和端口转发可能在这里很方便）。客户端软件连接到该网关服务器，网关服务器检查负载最少的服务器并发送 ip 和端口到客户端。客户端使用提供的地址直接创建到工作服务器的连接。这样你将拥有网关，它也可以处理授权，并且不会长时间保持连接，所以其中一个可能就足够了。许多正在发布的工作人员数据和保持连接。

这与您的需求非常相关，可能不适合您的解决方案。

# ruby - 如何在 Rails 之外将 mock_models 与 RSpec 一起使用？

> ID：10115478
> 
> 赞同：3
> 
> 时间：2012-04-11T23:38:07.713
> 
> 标签：ruby, activerecord, rspec

我目前正在开发一个 Ruby 项目，该项目由 Redis DB、EventMachine 和 Sinatra（用于轻量级 API）组成。我们正在使用 RSpec 进行测试，到目前为止，一切都很顺利。

然而，现在我们需要开始（最少）与 MySQL 数据库对话。我们决定走 ActiveRecord 的路线（只是因为它**太棒**了！），到目前为止一切都很顺利。但是，我们的测试遇到了一个小问题。我在网上找到了一些使用RSpec 的资源，但是，我不断得到`mock_model`：`mock`

```
undefined method `mock_model'
undefined method `mock' 
```

错误。在不安装整个 Rails 框架的情况下，我需要使用什么宝石才能使它们工作（看起来有点矫枉过正）。

**或者**

我应该使用哪些其他模拟/存根方法/宝石来模拟我的 AR 模型？我真的很喜欢语法的灵活性，例如：

```
@user = double(NS::UserAccount)
@car = double(NS::Car)
NS::UserAccount.stub(:find).with(@valid_user_id).return(@user)
NS::Car.stub(:find).with(@valid_car_id).return(@car) 
```

**更新**

我的 Gemfile 如下所示：

```
group :test do
  gem 'rspec',                '~> 2.8.0'
  gem 'rspec-expectations',   '~> 2.8.0'
  gem 'rspec-mocks',          '~> 2.8.0'      
  gem 'autotest-standalone'
  gem 'em-spec',              '~> 0.2.6'
  gem 'rack-test',            '~> 0.6.1'
  gem 'factory_girl',         '~> 3.1.0'
end 
```

此外，在`spec_helper.rb`文件的顶部，我有以下内容：

```
require 'bundler/setup'
Bundler.require(:test, :development) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:27:52.230

对于 Active Record 模型，RSpec 有方法`mock_model`，它会自动创建几个存根，所有 Ruby on Rails 模型都通用，并接受哈希。

因此，要`mock_model`在 Rails 之外使用，您应该连接 Active Record 和[rspec-rails](https://github.com/rspec/rspec-rails)扩展。

为了确保您可以查看[此处](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/mocks.rb)`mock_model`定义的位置。

# php - 如何搜索对象以查看它们是否包含特定值？

> ID：10115480
> 
> 赞同：5
> 
> 时间：2012-04-11T23:38:24.630
> 
> 标签：php, drupal, search, object

我有各种看起来像这样的对象：

```
Array
(
[0] => stdClass Object
    (
        [tid] => 18
        [vid] => 1
        [name] => test
        [description] => 
        [format] => 
        [weight] => 0
        [depth] => 0
        [parents] => Array
            (
                [0] => 0
            )

    )

[1] => stdClass Object
    (
        [tid] => 21
        [vid] => 1
        [name] => tag
        [description] => 
        [format] => 
        [weight] => 0
        [depth] => 0
        [parents] => Array
            (
                [0] => 0
            )

    )
) 
```

基本上我需要找出这些对象中存在 [name] 值的天气，我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T23:48:29.427

要检查`name`属性是否存在于对象中：

```
if(isset($obj->name)) {
    // It exists!
} 
```

所以，如果你想找到那些具有`$name`属性的对象：

```
$result = array_filter($myArray, function($x) {
    return isset($x->name);
}); // Assuming PHP 5.3 or higher 
```

# python - 调整列表小部件的行高

> ID：10115481
> 
> 赞同：1
> 
> 时间：2012-04-11T23:38:53.973
> 
> 标签：python, qt

所以我正在使用 pyqt，我试图用包含图标和旁边一些文本的项目填充我的列表。我的图标在插入列表时会缩小，而且我的字体非常小。如何增加所有内容的大小（即图标和文本的大小）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:50:41.653

图标大小和字体可以用 和 设置在视图小部件`setIconSize`上`setFont`。

# c++ - 无法从其他类的函数访问对象的参数

> ID：10115492
> 
> 赞同：1
> 
> 时间：2012-04-11T23:39:55.390
> 
> 标签：c++, oop

我有几节课。

```
class DRAW {
private:
    unsigned int back_texture;
    unsigned int hero_texture;

public:
    DRAW();
    ~DRAW();
    void start_draw();
    void draw_back();
    void draw_hero();
    void end_draw();

};
class HERO {

private:
    float x,y,w,h; //coordinates
    float hp; //health

public:
    friend class DRAW;

    HERO(float x1, float y1, float w1, float h1, float hp1);
    ~HERO();

    void set_posX(float x1);
    void set_posY(float y1);
    void set_height(float h1);
    void set_width(float w1);
    void set_health(float hp1);

    float get_posX();
    float get_posY();
    float get_height();
    float get_width();
    float get_health();

    void move(char direrion);

}; 
```

我在程序的主函数（**hero = new HERO()**）中创建了对象。我正在尝试从 draw_hero() 函数访问对象 hero 的参数。

```
void DRAW :: draw_hero() {

glBindTexture(GL_TEXTURE_2D, hero_texture);

glBegin(GL_QUADS);

glTexCoord2d(0,0); glVertex2f(hero->get_posX(),hero->get_posY());
glTexCoord2d(1,0); glVertex2f(hero->get_posX() + hero->get_width(),hero->get_posY());
glTexCoord2d(1,1); glVertex2f(hero->get_posX() + hero->get_width(),hero->get_posY() + hero -> get_height());
glTexCoord2d(0,1); glVertex2f(hero->get_posX(),hero->get_posY());
glEnd();

} 
```

当我编译时，我发现： **draw.h:83:32: error: 'hero' is not declared in this scope**

它有什么问题？

**添加：**主要看起来像这样：

```
int main (int argc, char* argv[] ) {

 /* DECLARATION */

SDL_Event event;

SYSTEM* system;

bool isRunning = true;

Uint8* key;

static HERO* hero;
hero = new HERO(300,300, 40, 40, 100);

DRAW* image = new DRAW;
DRAW();
.
.
.
    /* RENDERING */

    image -> start_draw();
    image -> draw_back();
    image -> end_draw(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:52:40.080

用类似的参数声明你的函数

```
void DRAW :: draw_hero(HERO * hero) {/* rest of the code*/} 
```

并在调用时将指向已创建对象的指针传递`hero`给函数。

# sonarqube - Sonar 使用 oracle 作为数据库连接

> ID：10115497
> 
> 赞同：0
> 
> 时间：2012-04-11T23:40:27.087
> 
> 标签：sonarqube

如何配置 sonar.properties 文件使 sonar 连接到 oracle 表达式版数据库？谁能给我一些例子？顺便说一句，我在运行 windows xp 的 32 位机器上本地安装了声纳和 oracle EX。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:35:48.787

在 sonar.properties 文件中，您只需注释掉与 Derby 相关的行，并取消注释与 Oracle 相关的行，就这么简单。

例如：

```
#sonar.jdbc.url:                            jdbc:derby://localhost:1527/sonar;create=true
...
sonar.jdbc.url:                            jdbc:oracle:thin:@localhost/XE 
```

# android - 与android中的服务线程相关

> ID：10115498
> 
> 赞同：0
> 
> 时间：2012-04-11T23:40:30.350
> 
> 标签：android

服务由单个活动启动 4 次，一个服务创建了多少个线程？如果服务由 4 个不同的活动启动，那么会创建多少个线程？从intentService继承的服务中必须实现哪个功能？在这个函数中需要创建多少个线程？

```
public class HelloService extends Service {
  private Looper mServiceLooper;
  private ServiceHandler mServiceHandler;

  // Handler that receives messages from the thread
  private final class ServiceHandler extends Handler {
      public ServiceHandler(Looper looper) {
          super(looper);
      }
      @Override
      public void handleMessage(Message msg) {
         long endTime = System.currentTimeMillis() + 5*1000;
          while (System.currentTimeMillis() < endTime) {
              synchronized (this) {
                  try {
                      wait(endTime - System.currentTimeMillis());
                  } catch (Exception e) {
                  }
              }
          }
          // Stop the service using the startId, so that we don't stop
          // the service in the middle of handling another job
          stopSelf(msg.arg1);
      }
  }

  @Override
  public void onCreate() {

    HandlerThread thread = new HandlerThread("ServiceStartArguments",
            Process.THREAD_PRIORITY_BACKGROUND);
    thread.start();

     mServiceLooper = thread.getLooper();
    mServiceHandler = new ServiceHandler(mServiceLooper);
  }

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {
      Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();

      Message msg = mServiceHandler.obtainMessage();
      msg.arg1 = startId;
      mServiceHandler.sendMessage(msg);

      // If we get killed, after returning from here, restart
      return START_STICKY;
  }

  @Override
  public IBinder onBind(Intent intent) {
      return null;
  }

  @Override
  public void onDestroy() {
    Toast.makeText(this, "service done", Toast.LENGTH_SHORT).show(); 
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:49:52.280

> 服务由单个活动启动 4 次，一个服务创建了多少个线程？

要看。您`Service`在 中创建了一个新线程`onCreate`，因此如果它从未被杀死，那么您将只创建 1 个线程。如果它确实被杀死了，那么每次你开始你的`Service`.

> 如果服务由 4 个不同的活动启动，那么会创建多少个线程？

和上面一样。

> 从intentService继承的服务中必须实现哪个功能？

您可能会尝试阅读[文档`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)，您会发现您想要实施[`onHandleIntent`](http://developer.android.com/reference/android/app/IntentService.html#onHandleIntent%28android.content.Intent%29).

> 在这个函数中需要创建多少个线程？

零。

# ruby - 确定代码段的长度

> ID：10115499
> 
> 赞同：1
> 
> 时间：2012-04-11T23:40:33.027
> 
> 标签：ruby, parsing, code-metrics

是否有一种工具可以解析 Ruby 脚本（MRI/YARV）并统计每个模块/类/方法定义的行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T02:53:30.697

[Saikuro](http://saikuro.rubyforge.org/)会这样做。它也包含在[metric_fu](http://metric-fu.rubyforge.org/)中，这使得运行 Saikuro 和许多其他代码度量工具变得容易。

（请注意，`saikuro`宝石可能不是您想要的，而是`Saikuro`带有大写的“S”。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:03:23.853

MRI/YARV 是什么意思？脚本没有与之关联的实现。不过，该工具可能与特定实现相关联。

[Ruby Toolbox 的代码度量](https://www.ruby-toolbox.com/categories/code_metrics)部分可能有这样的工具。

# asp.net - 允许逗号分隔的 lis 中的每个电子邮件地址的前导和尾随空格

> ID：10115506
> 
> 赞同：0
> 
> 时间：2012-04-11T23:41:35.980
> 
> 标签：asp.net, regex, validation

我正在使用以下正则表达式来验证以逗号分隔的电子邮件地址列表。只要输入使得每个电子邮件地址没有前导和尾随空格，它就可以很好地工作。我愿意接受此列表中每个电子邮件地址的前导和尾随空格。我怎样才能做到这一点？

```
 <asp:RegularExpressionValidator ID="emailAddressesListValidator"  Display="Dynamic"
     ControlToValidate="stringTextBox" runat="server"  ForeColor="Red" 
     ErrorMessage="Invalid List. Please input a comma separated list of email addresses."
     ValidationExpression="^((\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)*([,])*)*$"> 
   </asp:RegularExpressionValidator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:44:42.870

通过将正则表达式更改为下面的表达式，我能够使其工作。

```
ValidationExpression="^(\s*(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)*([,])*\s*)*$" 
```

# php - 使用 unix & php 获取子文件夹的名称以放入 .csv

> ID：10115507
> 
> 赞同：1
> 
> 时间：2012-04-11T23:41:50.027
> 
> 标签：php, unix, csv, sed, cat

我有一个 zip 文件，当我解压缩时，有几个子文件夹，每个子文件夹都包含一个名为 report.csv 的 csv：

```
the_folder/
    1234/report.csv
    abcd/report.csv
    jklm/report.csv
    5678/report.csv 
```

每个 CSV 都有列和内容，例如：

```
almonds, biscuits, cookies, dog_biscuits 
123, 321, 333, 444
555, 666, 777, 888
444, 551, 555, 999 (and so on for 75 lines or so) 
```

我想将它们放入一个组合的 CSV 文件中。我一直在 PHP 文件中使用 exec 来执行此操作：

```
exec("cat /path/the_folder/*/report.csv > /path/combined.csv"); 
```

然后使用 sed 删除重复的“almonds, biscuits, cookies, dog_biscuits”标题行。

现在我需要获取子文件夹的名称并将它们放入combined.csv 的行中。

因此，将在 CSV 中添加一列（“subfolder_name”），然后在该列中添加该行所在文件夹的名称。就像是

```
almonds, biscuits, cookies, dog_biscuits, subfolder_name
123, 321, 333, 444, 1234
555, 666, 777, 888, 1234
444, 551, 555, 999, abcd
333, 333, 111, 222, abcd
111, 222, 444, 333, abcd (etc and so on for 300 lines) 
```

最聪明、最简单、最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:06:22.440

尝试这个：

```
$folder_list = array(); // USE YOUR CODE TO GET FOLDER LIST
$combined_output = "";
$folder_i = 0;
foreach ($folder_list as $folder) {
   $file = file($folder . "/report.csv");
   foreach ($file as $line_i => $line) {
      if (($folder_i == 0 && $line_i == 0) || $line_i > 0) {
         $combined_output .= $line . PHP_EOL;
      }
   }
   $folder_i++;
}

$f = fopen("combined.csv", "w+");
fwrite($f, $combined_output);
fclose($f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:19:37.500

发射器：

```
@header
@(output)
@header, subfolder_name
@(end)
@(next :args)
@(collect)
@folder/@subfolder/@file.csv
@  (next `@folder/@subfolder/@file.csv`)
@header
@  (collect :vars ())
@line
@    (output)
@line, @subfolder
@    (end)
@  (end)
@(end) 
```

跑：

```
$ txr catname.txr folder/*/*.csv
animal, sound, subfolder_name
dog, bark, abcd
horse, neigh, abcd
cat, meow, efgh
cow, moo, efgh 
```

数据：

```
$ ls -R folder/
folder/:
abcd  efgh

folder/abcd:
a.csv

folder/efgh:
e.csv

$ cat folder/abcd/a.csv 
animal, sound
dog, bark
horse, neigh

$ cat folder/efgh/e.csv 
animal, sound
cat, meow
cow, moo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:21:19.743

你可以试试

```
$folderList = array (
        "1234/report.csv",
        "abcd/report.csv",
        "jklm/report.csv",
        "5678/report.csv" 
);

$combinedCSV = "result_combine.csv";
$headers = array (
        "almonds",
        "biscuits",
        "cookies",
        "dog_biscuits" 
);
touch ( $combinedCSV );

$fp = fopen ( $combinedCSV, 'w' );
fputcsv ( $fp, $headers ); // Add headers
foreach ( $folderList as $file ) {
    if (($handle = fopen ( $file, "r" )) !== FALSE) {
        while ( ($data = fgetcsv ( $handle, 1000, "," )) !== FALSE ) {
            if ($data [0] == "almonds") // Remove Headers
                continue;
            fputcsv ( $fp, $data );
        }
        fclose ( $handle );
    }
}

fclose($fp); 
```

我希望它有帮助

谢谢

# json - JSON child object with dojo/data/ObjectStore

> ID：10115518
> 
> 赞同：1
> 
> 时间：2012-04-11T23:43:09.180
> 
> 标签：json, dojo

Given the following JSON data:

```
[
{
    "pk": 2, 
    "model": "corkboard.announcement", 
    "fields": {
        "body": "Test announcement 2 body.", 
        "date": "2012-04-10T00:59:12Z", 
        "title": "Test Announcement 2"
    }
}, 
{
    "pk": 1, 
    "model": "corkboard.announcement", 
    "fields": {
        "body": "Test Announcement 1 body.", 
        "date": "2012-04-10T00:58:56Z", 
        "title": "Test Announcement 1"
    }
}
] 
```

I'm creating a dojox/DataGrid but I can't seem to find a way to access "fields" children.

Here is the javascript:

```
<script>
        var announcementStore, dataStore, grid;
        require(["dojo/store/JsonRest", "dojo/store/Memory", "dojo/store/Cache", "dojox/grid/DataGrid", "dojo/data/ObjectStore", "dojo/query", "dojo/domReady!"], 
            function(JsonRest, Memory, Cache, DataGrid, ObjectStore, query){
            announcementStore = Cache(JsonRest({target:"/corkboard/announcements/"}), Memory());
            grid = new DataGrid({
                store: dataStore = ObjectStore({objectStore: announcementStore}),
                structure: [
                    {name:"Title", field:"title", width: "200px"},
                    {name:"Body", field:"body", width: "200px", editable: true}
                ]
            }, "target-node-id");
            grid.startup();
            query("#save").onclick(function(){
                dataStore.save();
            });
        });
</script> 
```

I tried using fields.title and fields.body when defining the field, but that didn't work.

In this example, how would I access "fields" children?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:48:36.327

You need to use the `formatter` method in the structure of the grid like below.

```
{name:"Title",field:"_item",widht:"200px",formatter:function(item){return item.fields.title}} 
```

Remember, you need to passs `_item` in the `field`, which will give you entire row in the formatter method and using dot notation, you can return the reuqired data

# groovy - checkstyle 最大方法长度不适用于 groovy

> ID：10115524
> 
> 赞同：2
> 
> 时间：2012-04-11T23:43:33.897
> 
> 标签：groovy, checkstyle

我有一个限制最大方法长度的 checkstyle 规则。它似乎无法在 groovy 文件上正常工作，我怀疑这与 checkstyle 如何处理闭包有关。

一般来说，checkstyle 在 groovy 上运行良好还是有其他工具更适合 groovy 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T02:37:19.643

我推荐使用[CodeNarc](http://codenarc.sourceforge.net/)来检查 Groovy 代码。它是为此目的而设计的。[MethodSize](http://codenarc.sourceforge.net/codenarc-rules-size.html#MethodSize)规则是您应该使用的特定规则。

使用 Checkstyle 是个坏主意，因为它无法理解 Groovy 语法，因为它是 Java 语言的超集。它肯定无法解析闭包。

# python - 在 scipy 中计算成对距离时出现内存错误

> ID：10115525
> 
> 赞同：6
> 
> 时间：2012-04-11T23:43:36.033
> 
> 标签：python, numpy, scipy, cluster-analysis

我正在尝试将层次聚类应用于我的数据集，该数据集由 14039 个用户向量组成。每个向量有 10 个特征，其中每个特征基本上是该用户标记的标签的频率。我正在使用 Scipy api 进行聚类。现在我需要计算这 14039 个用户之间的成对距离，并将 tis 距离矩阵传递给链接函数。

```
 import scipy.cluster.hierarchy as sch
  Y = sch.distance.pdist( allUserVector,'cosine')
  set_printoptions(threshold='nan')
  print Y 
```

但是我的程序在计算距离矩阵本身时给了我 MemoryError

```
 File "/usr/lib/pymodules/python2.7/numpy/core/numeric.py", line 1424, in array_str
    return array2string(a, max_line_width, precision, suppress_small, ' ', "", str)
  File "/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py", line 306, in array2string
    separator, prefix)
  File "/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py", line 210, in _array2string
    format_function = FloatFormat(data, precision, suppress_small)
  File "/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py", line 392, in __init__
    self.fillFormat(data)
  File "/usr/lib/pymodules/python2.7/numpy/core/arrayprint.py", line 399, in fillFormat
    non_zero = absolute(data.compress(not_equal(data, 0) & ~special))
MemoryError 
```

知道如何解决这个问题吗？我的数据集是否太大？但我想集群 14k 用户不应该太多，否则会导致内存错误。我在 i3 和 4 Gb Ram 上运行它。我也需要应用 DBScan 聚类，但这也需要距离矩阵作为输入。

任何建议表示赞赏。

编辑：只有当我打印 Y 时我才会收到错误。任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T23:55:01.127

您可能真的用完了 RAM。找到 N 个对象之间的成对距离意味着存储 N^2 个距离。在您的情况下，N^2 将是 14039 ^ 2 = 1.97 * 10^8。如果我们假设每个距离只占用 4 个字节（几乎可以肯定不是这种情况，因为它们必须保存在某种可能具有非恒定开销的数据结构中），那么计算结果为 800 兆字节。对于解释器来说，这是很多内存。32 位架构只允许最多 2 GB 的进程内存，而您的原始数据仅占其中的 50% 左右。由于数据结构的开销，您可能会看到比这更高的使用量——我不能说多少，因为我不知道 SciPy/numpy 背后的内存模型。

我会尝试将您的数据集分解成更小的集合，或者不构建完整的距离矩阵。您可以将其分解为更易于管理的块（例如，大约 1000 个元素的 14 个子集），并在每个块和所有向量之间进行最近邻处理——然后您正在考虑将一个数量级更少的加载到内存中一次（14000 * 1000，14 次而不是 14000 * 14000 一次）。

**编辑：** agf 在两个方面都是完全正确的：我错过了你的编辑，当它试图构造代表你的矩阵的巨大字符串时，问题可能就出现了。如果它正在打印浮点值，并且我们假设每个元素打印 10 个字符，并且每个字符存储一个字节的字符串，那么您正在查看的内存使用量正好为 2 GB。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T05:34:53.130

好吧，层次聚类对于大型数据集没有多大意义。在我看来，这实际上是一个教科书的例子。层次聚类的问题在于它并没有真正构建合理的集群。它构建了一个树状图，但是对于 14000 个对象，树状图变得几乎无法使用。并且很少有层次聚类的实现具有从树状图中提取合理聚类的非平凡方法。另外，在一般情况下，层次聚类非常复杂`O(n^3)`，这使得它很难扩展到大型数据集。

DBSCAN 在技术上*不需要*距离矩阵。事实上，当你使用距离矩阵时，它会很*慢*，因为计算距离矩阵已经是`O(n^2)`。即便如此，您也可以`O(n^2)`通过以每次计算两次距离为代价实时计算距离来保护 DBSCAN 的内存成本。DBSCAN 访问每个点一次，因此使用距离矩阵除了对称增益之外几乎没有任何好处。从技术上讲，你可以做一些巧妙的缓存技巧来减少它，因为 DBSCAN 也只需要知道哪些对象低于 epsilon 阈值。`O(n^2)`当 epsilon 选择合理时，与计算距离矩阵相同的 CPU 成本相比，动态管理邻居集将使用更少的内存。

任何真正好的 DBSCAN 实现（它都拼写为大写，顺便说一句，因为它是缩写，而不是扫描）但是应该支持索引结构，然后在`O(n log n)`运行时运行。

在[http://elki.dbs.ifi.lmu.de/wiki/Benchmarking](http://elki.dbs.ifi.lmu.de/wiki/Benchmarking)他们在 110250 对象数据集和 8 个维度上运行 DBSCAN，非索引变体需要 1446 秒，索引只有 219 的变体。大约速度提高 7 倍，包括索引建立。（但它不是 python）同样，OPTICS 使用索引快 5 倍。在我的实验中，他们的 kmeans 实现比 WEKA kmeans 快了大约 6 倍，并且使用的内存要少得多。他们的单链路层次聚类也是一个优化的`O(n^2)`实现。实际上，到目前为止我见过的唯一一种不是天真的`O(n^3)`矩阵编辑方法。如果您愿意超越python，那可能是一个不错的选择。

# paypal - PayPal 会回收 PayerIds 吗？我将私人信息链接到 PayerIds

> ID：10115532
> 
> 赞同：0
> 
> 时间：2012-04-11T23:44:24.417
> 
> 标签：paypal

我现在正在更改我的在线商店。我决定完全删除帐户......这样用户就可以直接去贝宝快速结账并付款。

我先做贝宝部分，然后我重定向回我的网站，让他们填写送货地址、账单地址，然后在提交订单前查看信息。

到目前为止，我注意到如果您登录到贝宝帐户，贝宝总是会发回相同的 PayerID。此外，如果您没有登录贝宝帐户（而只是在您的信用卡上打卡），它将在未来返回该信用卡的相同 payerID。

跟踪送货地址以创建地址簿并将其链接到 payerID 对我来说是否安全？这样，返回的贝宝客户将能够选择一个保存的地址......

贝宝会回收这些 ID……还是它们总是独一无二的，并且不担心我向其他客户展示其他人的信息……

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:59:37.883

不，PayerID 对每个帐户都是唯一的。他们永远不会因同一个帐户而改变。

# android - 如何在 android 的 ContentProvider 中获取系统服务？

> ID：10115533
> 
> 赞同：0
> 
> 时间：2012-04-11T23:44:37.163
> 
> 标签：android, nullpointerexception

我有这样的类结构：

```
public class DHTContentProvider extends ContentProvider {
    private Networking networking = new Networking();
    public boolean onCreate() {
         networking.init();
    }
    public class Networking extends Service {
         public void init() {
              TelephonyManager tel = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE); 
         }
    }
} 
```

Networking 是 DHTContentProvider 的子类。当我运行它时总是 NullPointerException。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:34:17.923

也许您应该删除它们“上下文”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:14:02.197

调用`getContext()`以检索 a `Context`，然后调用`getSystemService()`该上下文。

# c - 释放内存问题导致我的 c 程序崩溃但在调试时不会崩溃？

> ID：10115534
> 
> 赞同：0
> 
> 时间：2012-04-11T23:44:43.903
> 
> 标签：c, debugging, memory, crash, valgrind

我以前在使用同一个程序时遇到过麻烦，因为它会分配大量内存。我摆脱了大多数问题，但我仍然遇到一个特定问题。当我在 Eclipse 中运行我的程序时，它编译得很好，但它会因这条消息而崩溃

```
*** glibc detected *** /home/user/workspace/TTPrueba/Debug/TTPrueba: free(): invalid pointer: 0xb6bc0588 *** 
```

当我用 Valgrind 运行它时，它告诉我这个

```
==31580== Process terminating with default action of signal 11 (SIGSEGV)
==31580==  Access not within mapped region at address 0x0
==31580==    at 0x804BEA3: termino (Menu.c:899)
==31580==    by 0x804BE05: computar_transformadas (Menu.c:840) 
```

所以问题是它试图释放一个无效的内存地址，但是我在调​​试模式下一步一步地去，程序永远不会崩溃！！！！:(

知道为什么会发生这样的事情吗？为什么它在调试时工作但在运行时不工作？这是非常奇怪的行为。

```
for(phi=0;phi<360;phi++){

      for(j=0;j<par.param1[phi][0];j++){

              for(o=0;o<(par.prueba[phi][j][1]-par.prueba[phi][j][0]);o++){//AQUI 849

                 free(par.pixels[phi][j][o]);//HERE IS LINE 899 WHERE IT ALWAYS CRASHES

                 if(o==(par.prueba[phi][j][1]-par.prueba[phi][j][0]-1))
                     free(par.pixels[phi][j]);

              }

          free(par.prueba[phi][j]);

      } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:56:41.853

这并不奇怪。例如，如果 par.pixels[phi][j][o] 未初始化。它可以包含任何内容，在调试器环境中，您有不同的内存布局 par.pixels[phi][j][o] 可能会变为 0，因此 free 不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:50:25.370

一个可能的原因 - 调试器可能正在更改事物的内存布局，因此当内存损坏时，它恰好位于“不碍事”的地方。

或者调试器可能会导致分配的内存归零，这可能不会在生产运行中发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:59:19.357

我看到的一个问题是你 free `par.pixels[phi][j][o]`where`o`从零开始循环，然后*access* `par.pixels[phi][j][0]`，它刚刚被释放了！

您还释放`par.pixels[phi][j]`但继续循环访问`par.pixels[phi][j]`和释放不再有效的指针。

# php - 尝试在 PHP 中使用 mysql 中的数组以某种方式格式化 json

> ID：10115536
> 
> 赞同：2
> 
> 时间：2012-04-11T23:44:50.053
> 
> 标签：php, mysql, json

我正在尝试为我的网站构建一个宁静的网络服务。我有一个使用以下代码的 php mysql 查询：

```
function mysql_fetch_rowsarr($result, $taskId, $num, $count){
  $got = array();
  if(mysql_num_rows($result) == 0)
    return $got;
  mysql_data_seek($result, 0);
  while ($row = mysql_fetch_assoc($result)) {
    $got[]=$row;
}
  print_r($row)
  print_r(json_encode($result));
  return $got; 
```

它使用上面代码中的 print_r($data) 返回以下内容

```
Array ( [0] => Array ( [show] => Blip TV Photoshop Users TV [region] => UK [url] => http://blip.tv/photoshop-user-tv/rss [resourceType] => RSS / Atom feed [plugin] => Blip TV ) [1] => Array ( [show] => TV Highlights [region] => UK [url] => http://feeds.bbc.co.uk/iplayer/highlights/tv [resourceType] => RSS / Atom feed [plugin] => iPlayer (UK) ) ) 
```

这是它返回的json：

```
 [{"show":"Blip TV Photoshop Users TV","region":"UK","url":"http:\/\/blip.tv\/photoshop-user-tv\/rss","resourceType":"RSS \/ Atom feed","plugin":"Blip TV"},{"show":"TV Highlights","region":"UK","url":"http:\/\/feeds.bbc.co.uk\/iplayer\/highlights\/tv","resourceType":"RSS \/ Atom feed","plugin":"iPlayer (UK)"}] 
```

我正在使用以下代码将一些项目添加到数组中，然后将其转换为 json 并返回 json。

```
 $got=array(array("resource"=>$taskId,"requestedSize"=>$num,"totalSize"=>$count,"items"),$got); 
```

使用以下代码将其转换为 json 并返回。

```
 $response->body = json_encode($result);
 return $response; 
```

这给了我以下json。

```
[{"resource":"video","requestedSize":2,"totalSize":61,"0":"items"},[{"show":"Blip TV Photoshop Users TV","region":"UK","url":"http:\/\/blip.tv\/photoshop-user-tv\/rss","resourceType":"RSS \/ Atom feed","plugin":"Blip TV"},{"show":"TV Highlights","region":"UK","url":"http:\/\/feeds.bbc.co.uk\/iplayer\/highlights\/tv","resourceType":"RSS \/ Atom feed","plugin":"iPlayer (UK)"}]] 
```

API 的使用者想要以下格式的 json，我不知道如何让它以这种方式出现。我已经搜索并尝试了所有我能找到的东西，但仍然没有得到它。而且我什至还没有开始尝试获取 xml 格式

```
 {"resource":"video", "returnedSize":2, "totalSize":60,"items":[{"show":"Blip TV Photoshop Users TV","region":"UK","url":"http://blip.tv/photoshop-user-tv/rss","resourceType":"RSS / Atom feed","plugin":"Blip TV"},{"show":"TV Highlights","region":"UK", "url":"http://feeds.bbc.co.uk/iplayer/highlights/tv","resourceType":"RSS / Atom feed","plugin":"iPlayer (UK)"}]} 
```

我很感激这方面的任何帮助。我已经设置了具有只读访问权限的数据库副本，并且可以提供所有有帮助的源代码，我会警告你我刚刚学习 php，我学会了基本编程，fortran 77 所以 php 非常混乱我猜很臃肿。

OK 上面关于 json 编码的问题已经回答了。API 使用者还希望特殊字符“/”不要被转义，因为它是一个 URL。我在 json_encode 中尝试了“JSON_UNESCAPED_SLASHES”并得到以下错误。

```
 json_encode() expects parameter 2 to be long 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:48:33.417

你的`$result`线应该看起来像

```
$result=array(
    "resource"=>$taskId,
    "requestedSize"=>$num,
    "totalSize"=>$count,
    "items" => $got
); 
```

# java - Runnable 中的 ThreadLocal 与局部变量

> ID：10115537
> 
> 赞同：12
> 
> 时间：2012-04-11T23:45:00.397
> 
> 标签：java, multithreading, thread-local

其中哪一个`ThreadLocal`或局部变量`Runnable`将是首选？出于性能原因。我希望使用局部变量会给 cpu 缓存等提供更多机会。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T23:46:20.027

> 优先选择 ThreadLocal 或 Runnable 中的局部变量中的哪一个。

如果您有一个在线程类（或`Runnable`）中声明的变量，则局部变量将起作用，您不需要`ThreadLocal`.

```
new Thread(new Runnable() {
    // no need to make this a thread local because each thread already
    // has their own copy of it
    private SimpleDateFormat format = new SimpleDateFormat(...);
    public void run() {
       ...
       // this is allocated per thread so no thread-local
       format.parse(...);
       ...
    }
}).start(); 
```

另一方面，`ThreadLocal`当您执行公共代码时，s 用于在每个线程的基础上保存状态。例如，`SimpleDateFormat`（不幸的是）不是线程安全的，因此如果您想在由多个线程执行的代码中使用它，您需要将一个存储在 a 中`ThreadLocal`，以便每个线程都有自己的格式版本。

```
private final ThreadLocal<SimpleDateFormat> localFormat =
    new ThreadLocal<SimpleDateFormat>() {
        @Override
        protected SimpleDateFormat initialValue() {
            return new SimpleDateFormat(...);
        }
     };
...
// if a number of threads run this common code
SimpleDateFormat format = localFormat.get();
// now we are using the per-thread format (but we should be using Joda Time :-)
format.parse(...); 
```

An example of when this is necessary is a web request handler. The threads are allocated up in Jetty land (for example) in some sort of pool that is outside of our control. A web request comes in which matches your path so Jetty calls your handler. You need to have a `SimpleDateFormat` object but because of its limitations, you have to create one per thread. That's when you need a `ThreadLocal`. When you are writing reentrant code that may be called by multiple threads and you want to store something per-thread.

Instead, if you want pass in arguments to your `Runnable` then you should create your own class and then you can access the constructor and pass in arguments.

```
new Thread(new MyRunnable("some important string")).start();
...
private static class MyRunnable implements {
    private final String someImportantString;
    public MyRunnable(String someImportantString) {
        this.someImportantString = someImportantString;
    }
    // run by the thread
    public void run() {
       // use the someImportantString string here
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T23:52:52.577

Whenever your program could correctly use either of the two (`ThreadLocal` *or* local variable), choose the local variable: it will be more performant.

`ThreadLocal` is for storing per-thread state past the execution scope of a method. Obviously local variables can't persist past the scope of their declaration. If you needed them to, that's when you might start using a `ThreadLocal`.

Another option is using `synchronized` to manage access to a shared member variable. This is a complicated topic and I won't bother to go into it here as it's been explained and documented by more articulate people than me in other places. Obviously this is not a variant of "local" storage -- you'd be sharing access to a single resource in a thread-safe way.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-15T16:49:09.220

I was also confused why i need ThreadLocal when i can just use local variables, since they both maintain their state inside a thread. But after a lot of searching and experimenting i see why is ThreadLocal needed.

I found two uses so far -

1.  Saving thread specific values inside the same shared object
2.  Alternative to passing variables as parameters through N-layers of code

**1:**

If you have two threads operating on the same object and both threads modify this object - then both threads keep losing their modifications to each other.

To make this object have two separate states for each thread, we declare this object or part of it ThreadLocal.

Of course, ThreadLocal is only beneficial here because both threads are sharing the same object. If they are using different objects, there's no need for the objects to be ThreadLocal.

**2:**

The second benefit of ThreadLocal, seems to be a side effect of how its implemented.

A ThreadLocal variable can be .set() by a thread, and then be .get() **anywhere** else. .get() will retrieve the same value that **this** thread had set anywhere else. We'll need a globally available wrapper to do a .get() and .set(), to actually write down the code.

When we do a threadLocalVar.set() - its as if its put inside some global "map", where **this** current thread is the key.

As if - someGlobalMap.put(Thread.currentThread(),threadLocalVar);

So ten layers down, when we do threadLocalVar.get() - we get the value that **this** thread had set ten layers up.

threadLocalVar = someGlobalMap.get(Thread.currentThread());

So the function at tenth level does not have to lug around this variable as parameter, and can access it with a .get() without worrying about if it is from the right thread.

Lastly, since a ThreadLocal variable is a copy to each thread, of course, it does not need synchronization. I misunderstood ThreadLocal earlier as an alternative to synchronization, that it is not. It is just a side effect of it, that we dont need to synchronize the activity of this variable now.

Hope this has helped.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T00:42:40.537

This question is answered by the simple rule that a variable should be declared in the smallest possible enclosing scope. A `ThreadLocal` is the largest possible enclosing scope so you should only use it for data that is needed across many lexical scopes. If it can be a local variable, it should be.

# wcf - 使用 WCF 时 Protobuf 网络未序列化

> ID：10115538
> 
> 赞同：3
> 
> 时间：2012-04-11T23:45:04.563
> 
> 标签：wcf, protobuf-net

我正在尝试使用 protobuf 序列化我的 WCF 调用，但似乎该对象没有被客户端序列化。需要注意的一些事项：

*   我正在使用共享 DTO 库。
*   我正在使用 ChannelFactory 来调用服务（因此类型不会丢失它们的数据成员属性）。
*   我可以仅使用普通的 protobuf.net 代码序列化和反序列化对象，因此类型本身似乎没问题
*   我正在使用 protobuf.net 的 2.0.0.480 版本
*   我没有发布服务代码，因为问题出在外发消息上（下面发布的消息日志）
*   如果我不使用 protobuf 端点行为，客户端和服务可以正常工作。

我的主要方法如下

```
static void Main(string[] args)
    {
        Base.PrepareMetaDataForSerialization();
        FactoryHelper.InitialiseFactoryHelper(new ServiceModule());
        Member m = new Member();
        m.FirstName = "Mike";
        m.LastName = "Hanrahan";
        m.UserId = Guid.NewGuid();
        m.AccountStatus = MemberAccountStatus.Blocked;
        m.EnteredBy = "qwertt";
        ChannelFactory<IMembershipService> factory = new ChannelFactory<IMembershipService>("NetTcpBinding_MembershipService");
        var client = factory.CreateChannel();

        using (var ms = new MemoryStream())
        {
            Serializer.Serialize<Member>(ms, m);
            Console.WriteLine(ms.Length.ToString());
            ms.Position = 0;
            var member2 = Serializer.Deserialize<Member>(ms);
            Console.WriteLine(member2.EnteredBy);
            Console.WriteLine(member2.FirstName);
        }

        var result = client.IsMemberAllowedToPurchase(m);

        System.Console.Write(result.IsValid.ToString());
        factory.Close();
        var input = Console.ReadLine();
    } 
```

我的客户端配置如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<configSections>
</configSections>
<system.serviceModel>
<bindings>
  <netTcpBinding>
    <binding name="NetTcpBinding_Common" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
      hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288"
      maxBufferSize="1000065536" maxConnections="10" maxReceivedMessageSize="1000000">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
      <security mode="Transport">
        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
        <message clientCredentialType="Windows" />
      </security>
    </binding>
  </netTcpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="Proto.Common.EndpointBehavior">
      <protobuf />
    </behavior>
  </endpointBehaviors>
</behaviors>
<extensions>
  <behaviorExtensions>
    <add name="protobuf" type="ProtoBuf.ServiceModel.ProtoBehaviorExtension, protobuf-net, Version=2.0.0.480, Culture=neutral, PublicKeyToken=257b51d87d2e4d67" />
  </behaviorExtensions>
</extensions>
<client>
  <endpoint address="net.tcp://mikes-pc:12002/MembershipService.svc"
    behaviorConfiguration="Proto.Common.EndpointBehavior" binding="netTcpBinding"
    bindingConfiguration="NetTcpBinding_Common" contract="PricesForMe.Core.Entities.ServiceInterfaces.IMembershipService"
    name="NetTcpBinding_MembershipService">
    <identity>
      <userPrincipalName value="Mikes-PC\Mike" />
    </identity>
  </endpoint>
</client>
<diagnostics>
  <messageLogging
       logEntireMessage="true"
       logMalformedMessages="true"
       logMessagesAtServiceLevel="true"
       logMessagesAtTransportLevel="true"
       maxMessagesToLog="3000"
       maxSizeOfMessageToLog="2000"/>
</diagnostics>
</system.serviceModel>
<startup>
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
</startup>
<system.diagnostics>
<sources>
  <source name="System.ServiceModel"
          switchValue="Information, ActivityTracing"
          propagateActivity="true">
    <listeners>
      <add name="traceListener"
          type="System.Diagnostics.XmlWriterTraceListener"
          initializeData="E:\Work\Logs\IMembershipServiceWcfTrace_Client.svclog"  />
    </listeners>
  </source>
  <source name="System.ServiceModel.MessageLogging">
    <listeners>
      <add name="messages"
      type="System.Diagnostics.XmlWriterTraceListener"
      initializeData="E:\Work\Logs\IMembershipServiceWcfTrace_Client_messages.svclog" />
    </listeners>
  </source>
</sources>
</system.diagnostics>
</configuration> 
```

记录客户端消息后，我在日志中得到以下条目

```
 <MessageLogTraceRecord>
    <s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope">
    <s:Header>
    <a:Action s:mustUnderstand="1">http://www.pricesforme.com/services/MembershipService/IsMemberAllowedToPurchase</a:Action>
    <a:MessageID>urn:uuid:8b545576-c453-4be6-8d5c-9913e2cca4bf</a:MessageID>
    <ActivityId CorrelationId="b4e9361f-1fbc-4b2d-b7ee-fb493847998a" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">6d712899-62fd-4547-9517-e9de452305c6</ActivityId>
    <a:ReplyTo>
    <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
    <VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink"></VsDebuggerCausalityData>
    </s:Header>
    <s:Body>
    <IsMemberAllowedToPurchase xmlns="http://www.pricesforme.com/services/">
    <proto></proto>
    </IsMemberAllowedToPurchase>
    </s:Body>
    </s:Envelope>
    </MessageLogTraceRecord> 
```

从上面的日志消息中可以看出，proto 条目中没有数据。我的成员类如下所示：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Runtime.Serialization;
    using PricesForMe.Core.Entities.Common;
    using PricesForMe.Core.Entities.Ordering;

    namespace PricesForMe.Core.Entities.Members
    {
        /// <summary>
        /// This entity represents a member or user of the site.
        /// </summary>
        [DataContract]
        [Serializable]
        public class Member: User
        {
            public Member()
                :base()
            {
                EntityType = Entities.EntityType.Member;
            }

            [DataMember(Order = 20)]
            public int Id { get; set; }

            [DataMember(Order = 21)]
            public string MemberName { get; set; }

            [DataMember(Order = 22)]
            public PaymentInfo DefaultPaymentMethod { get; set; }

            [DataMember(Order = 23)]
            public MemberAccountStatus AccountStatus { get; set; }

            #region static

            public static readonly string CacheCollectionKey = "MemberCollection";

            private static readonly string CacheItemKeyPrefix = "Member:";

            public static string GetCacheItemKey(int id)
            {
                return CacheItemKeyPrefix + id.ToString();
            }

            #endregion
        }
    } 
```

父用户类如下所示：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Runtime.Serialization;
    using System.Diagnostics.Contracts;

    namespace PricesForMe.Core.Entities.Common
    {
        /// <summary>
        /// This class represents a user in the system.  For example, a user could be a member or a merchant user.
        /// </summary>
        [DataContract]
        [Serializable]
        public class User: Base
        {
            public User()
                :base()
            {
                EntityType = Entities.EntityType.User;
            }

            [DataMember(Order = 10)]
            public Guid UserId { get; set; }

            [DataMember(Order = 11, Name = "First Name")]
            public string FirstName { get; set; }

            [DataMember(Order = 12, Name = "Last Name")]
            public string LastName { get; set; }

            }
        }
    } 
```

基类如下所示：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Runtime.Serialization;
    using System.Diagnostics.Contracts;
    using System.ComponentModel.DataAnnotations;
    using System.Reflection;
    using ProtoBuf.Meta;

    namespace PricesForMe.Core.Entities
    {
        /// <summary>
        /// This is the base class for all entities involved in the request/response pattern of our services
        /// </summary>
        /// <remarks>
        /// The objects derived from this class are used to transfer data from our service classes to our UIs and back again and they should 
        /// not contain any logic.
        /// </remarks>
        [DataContract]
        [Serializable]
        public abstract class Base
        {
            public Base()
            {
                //Set some defaults for this
                EnteredBy = System.Environment.UserName;
                EnteredSource = System.Environment.MachineName;
            }

            /// <summary>
            /// This is the record timestamp
            /// </summary>
            [DataMember(Order = 2)]
            public DateTime RecordTimeStamp { get; set; }

            /// <summary>
            /// This is the name of the user who last edited the entity
            /// </summary>
            [DataMember(Order = 3)]
            public string EnteredBy { get; set; }

            /// <summary>
            /// This is the source of the last edited entity
            /// </summary>
            [DataMember(Order = 4)]
            public string EnteredSource { get; set; }

            [DataMember(Order = 5)]
            private PricesForMe.Core.Entities.Common.ValidationResult _validationResult = null;
            /// <summary>
            /// Data on the validity of the entity.
            /// </summary>
            public PricesForMe.Core.Entities.Common.ValidationResult ValidationData
            {
                get
                {
                    _validationResult = Validate();
                    return _validationResult;
                }
                set
                {
                    _validationResult = value;
                }
            }

            /// <summary>
            /// Flag denoting if the record is a new record or not.
            /// </summary>
            /// <remarks>
            /// To flag an entity as an existing record call the "FlagAsExistingReport()" method.
            /// </remarks>
            public bool IsNewRecord
            {
                get
                {
                    return _isNewRecord;
                }
            }

            [DataMember(Order = 6)]
            protected bool _isNewRecord = true;
            /// <summary>
            /// Flags the entity as a record that already exists in the database
            /// </summary>
            /// <remarks>
            /// This is a method rather than a field to demonstrait that this should be called with caution (as opposed to inadvertantly setting a flag!)
            /// <para>
            /// Note that this method should only need to be called on object creation if the entity has a composite key.  Otherwise the flag is
            /// set when the id is being set.  It should always be called on saving an entity.
            /// </para>
            /// </remarks>
            public void FlagAsExistingRecord()
            {
                _isNewRecord = false;
            }

            public virtual PricesForMe.Core.Entities.Common.ValidationResult Validate()
            {
                if (_validationResult == null)
                {
                    _validationResult = new PricesForMe.Core.Entities.Common.ValidationResult();
                    _validationResult.MemberValidations = new List<Common.ValidationResult>();
                    _validationResult.RulesViolated = new List<Common.ValidationRule>();
                }
                return _validationResult;
            }

            /// <summary>
            /// This is the type of entity we are working with
            /// </summary>
            [DataMember(Order = 7)]
            private EntityType _entityType = EntityType.Unknown;
            public EntityType EntityType
            {
                get
                {
                    return _entityType;
                }
                protected set
                {
                    _entityType = value;
                }
            }

            /// <summary>
            /// Flag to say if the id generated for this class need to be int64 in size.
            /// </summary>
            [DataMember(Order = 9)]
            public bool IdRequiresInt64 { get; protected set; }

            /// <summary>
            /// This method tells us if the database id has been assigned.  Note that this does
            /// not mean the entity has been saved, only if the id has been assigned (so the id could be greater than 0, but the
            /// entity could still be a NewRecord
            /// </summary>
            /// <returns></returns>
            [DataMember(Order = 8)]
            public bool HasDbIdBeenAssigned { get; protected set; }

            private Guid _validationId = Guid.NewGuid();
            public Guid EntityValidationId
            {
                get
                {
                    return _validationId;
                }
            }

            /// <summary>
            /// Converts an object into another type of object based on the mapper class provided.
            /// </summary>
            /// <remarks>
            /// This method allows us to easily convert between objects without concerning ourselves with the mapping implementation.  This
            /// allows us to use various mapping frameworks (e.g. Automapper, ValueInjector) or create our own custom mapping.
            /// </remarks>
            /// <typeparam name="TDestination">The type we want to convert to</typeparam>
            /// <typeparam name="KMapper">The mapping type</typeparam>
            /// <returns>The new type</returns>
            public TDestination ConvertTo<TDestination, TSource, KMapper>()
                where KMapper : IEntityMapper<TDestination, TSource>
                where TSource : class
            {
                return Base.ConvertToItem<TDestination, TSource, KMapper>(this as TSource);
            }

            /// <summary>
            /// Returns all known child types
            /// </summary>
            public IEnumerable<Type> GetAllTypes()
            {
                Assembly current = Assembly.GetCallingAssembly();
                List<Type> derivedTypes = new List<Type>();
                var allTypes = current.GetTypes();
                foreach (var t in allTypes)
                {
                    if (t.IsAssignableFrom(typeof(Base)))
                    {
                        derivedTypes.Add(t);
                    }
                }
                return derivedTypes;
            }

            #region Static Methods
            /// <summary>
            /// Converts a list of one type to a list of another type
            /// </summary>
            /// <typeparam name="TDestination">The type we want to convert to</typeparam>
            /// <typeparam name="TSource">The source type</typeparam>
            /// <typeparam name="KMapper">The mapper class</typeparam>
            /// <param name="source">The source list of items.</param>
            /// <returns></returns>
            public static List<TDestination> ConvertToList<TDestination, TSource, KMapper>(IEnumerable<TSource> source)
                where KMapper : IEntityMapper<TDestination, TSource>
                where TSource : class
            {
                List<TDestination> result = new List<TDestination>();
                KMapper mapper = Activator.CreateInstance<KMapper>();
                foreach (var item in source)
                {
                    result.Add(mapper.Convert(item));
                }
                return result;
            }

            public static TDestination ConvertToItem<TDestination, TSource, KMapper>(TSource source)
                where KMapper : IEntityMapper<TDestination, TSource>
                where TSource : class
            {
                //Return default (i.e. null for ref objects) if the source is null.
                if (source == null) { return default(TDestination); }

                KMapper mapper = Activator.CreateInstance<KMapper>();
                return mapper.Convert(source);
            }

            private static object _metaLock = new object();
            private static bool _metaDataPrepared = false;
            /// <summary>
            /// Creates protobuf type models from the entities in this assembly
            /// </summary>
            public static void PrepareMetaDataForSerialization()
            {
                lock (_metaLock)
                {
                    if (_metaDataPrepared) { return; }

                    Assembly current = Assembly.GetExecutingAssembly();
                    var allTypes = current.GetTypes();
                    foreach (var t in allTypes)
                    {
                        checkType(t);
                    }
                }
            }

            private static void checkType(Type type)
            {
                Assembly current = Assembly.GetExecutingAssembly();
                var allTypes = current.GetTypes();
                int key = 1000;
                foreach (var t in allTypes)
                {
                    if (t.IsSubclassOf(type) && t.BaseType == type)
                    {
                        RuntimeTypeModel.Default[type].AddSubType(key, t);
                        key++;
                    }
                }
            }

            #endregion
        }
    } 
```

base 上的`PrepareMetaDataForSerialization`方法为 protobuf.net 配置 RuntimeModel，但我前面提到，序列化和反序列化在 WCF 之外工作正常，所以我认为 DTO 是可以的。非常感谢有关可能导致问题的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:33:55.747

ķ; 元素名称看起来是正确的（`proto`, 匹配`XmlProtoSerializer.PROTO_ELEMENT`），所以 protobuf-net 肯定会尝试做一些事情。它也不包括`@nil`表示`null`，所以它知道有数据。除此之外，它将对象序列化为 a`MemoryStream`并将其写入为 base-64（与`byte[]`etc 的表示方式相同，如果启用了类似的功能，则允许 WCF 静默自动提升数据`MTOM`）。所以问题变成了“为什么我的类型会序列化为空？”

`DataContract`/的使用`DataMember`很好，并且与我现有的 WCF 集成测试相匹配。

我想知道这有多少是由于继承（显示的成员中只有一个与具体类型相关，我会冒险猜测`Blocked`它`0`具有特殊处理）。

但是，我不能足够强调您当前的继承处理是多么不安全。数字很​​重要，反射不能保证重新排序。我强烈建议您重新审视这一点，并使继承编号更可预测。

非常小的观察，但不需要存储`EntityType`- 它完全是冗余的，可以通过多态性处理而无需存储。

`_metaDataPrepared`此外，还有一个从未设置为 true的重要错误。

然而！最终我无法重现这个；我已经使用您的代码（或大部分代码）来生成[集成测试](http://code.google.com/p/protobuf-net/source/browse/trunk/Examples/Issues/SO10115538.cs)，并且 - 它通过了；含义：使用 WCF、`NetTcpBinding`您的类（包括您的继承修复代码）和 protobuf 打包，它就*可以工作*。通过网络传输的数据是我们期望的数据。

很高兴尝试进一步提供帮助，但我需要能够重现它......现在，我不能。

我要做的第一件事是添加缺失`_metaDataPrepared = true;`的内容，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:57:17.340

我认为您需要根据[这个](https://stackoverflow.com/questions/6130871/protobuf-net-wcf-response-is-empty)SO 使用 ProtoContract 而不是 DataContract？此外，请确保在配置服务引用时设置“在引用的程序集中重用类型”。根据[这个](https://stackoverflow.com/questions/1775082/datacontract-serialization-with-protobuf-net-r275)SO，他们支持数据合同，但您必须设置订单 [DataMember(Order = 0)] （至少这对我有用）。

# gdb - 带代码的 gdb 拆分视图

> ID：10115540
> 
> 赞同：131
> 
> 时间：2012-04-11T23:45:22.017
> 
> 标签：gdb

我只是在 gdb 中调试一个程序，不知何故我发现了一个我以前从未见过甚至听说过的新功能，一个拆分视图，除了给出命令外，我还可以查看和浏览代码：

![对不起图片，但ttys没有截图。](../Images/49c12b9b624055e5aa25eaac09cde5b5.png)

这是什么？我做了什么，或者更具体地说，我怎样才能再次获得这种分屏模式？这种模式是否有名称，或者我可以在某处阅读有关如何使用它的信息？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-12T00:01:19.580

它被称为 TUI（不开玩笑）。例如以`gdbtui`or `gdb -tui`...开头

* * *

另请参阅[Ciro Santilli](https://stackoverflow.com/users/895245)的**[回答](https://stackoverflow.com/a/51301717)**。据我所知，它在 2012 年不可用，但绝对值得一看。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-02-15T14:21:13.227

`ctrl`您可以通过 push +`x`和`ctrl`+动态触发它`a`。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2013-11-21T06:44:00.043

它有两种变体。

1.  只看代码按

一起按`CTRL` `X`，然后 `1`

2.  查看源代码和程序集

同时按“CTRL”“X”，然后按“2”

[http://www.cs.fsu.edu/~baker/ada/gnat/html/gdb_23.html](http://www.cs.fsu.edu/~baker/ada/gnat/html/gdb_23.html)

带有代码和程序集的视图的屏幕截图。 ![在此处输入图像描述](../Images/fd2841399b036e69abc6c13b3fd25e51.png)

[还可以查看这个惊人的 Github 项目。](https://github.com/cyrus-and/gdb-dashboard)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-07-12T09:17:59.407

**GDB 仪表板**

[https://github.com/cyrus-and/gdb-dashboard](https://github.com/cyrus-and/gdb-dashboard)

GDB 仪表板使用[官方的 GDB Python API](https://sourceware.org/gdb/onlinedocs/gdb/Python-API.html)并在 GDB 停止时打印您想要的信息，例如在 a 之后`next`，如[本机`display`命令](https://sourceware.org/gdb/onlinedocs/gdb/Auto-Display.html)。

与 TUI：

*   更健壮，因为它只是打印到标准输出而不是将外壳置于更神奇的诅咒状态，例如：

    *   `vi`模式`.inputrc`导致问题：[https ://superuser.com/questions/180512/how-to-turn-off-gdb-tui/927728#927728](https://superuser.com/questions/180512/how-to-turn-off-gdb-tui/927728#927728)
    *   程序 stdout / stderr 破坏了你的界面：[GDB in TUI mode: how to deal with stderr's interaction with the ui](https://stackoverflow.com/questions/26291629/gdb-in-tui-mode-how-to-deal-with-stderrs-interaction-with-the-ui)
*   从 Python 高度可配置：您可以选择要输出的内容以及每个部分的大小，具体取决于您正在调试的内容。

    最有用的视图已经实现：源代码、程序集、寄存器、堆栈、内存、线程、表达式……但是使用 GDB Python API 上公开的任何信息应该很容易扩展它。

    TUI 只允许显示源、程序集和寄存器中的两个，仅此而已。当然，除非你想修改它的 C 源代码 ;-)

[![在此处输入图像描述](../Images/de0d129ee1fdc2547c98e3b39cd2aac0.png)](https://i.stack.imgur.com/mHC8f.png)

我相信 GDB 应该提供开箱即用的设置并默认打开，这样会吸引更多的用户。

哦，主要开发人员[Andrea Cardaci 反应迅速](https://github.com/cyrus-and)，非常棒。大赞。

另请参阅：[如何在交互式调试期间突出显示和着色 gdb 输出？](https://stackoverflow.com/questions/209534/how-to-highlight-and-color-gdb-output-during-interactive-debugging/17341335#17341335)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-11-27T09:05:05.677

您也可以使用命令“-”（破折号）从 gdb shell 启动它。不知道如何动态关闭它。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-06-30T14:37:39.397

在 gdb 中键入`layout`命令，将显示拆分窗口。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-06-13T18:22:12.167

当 GDB 处于标准模式时，使用`win`会自动切换到 TUI 模式。
TUI 模式的其他命令：

*   `info win`
    列出并给出所有显示窗口的大小。
*   `focus next | prev | src | asm | regs | split`
    将焦点设置到命名窗口。此命令允许更改活动窗口，以便滚动键可以影响到另一个窗口。

[在此处](http://www.cs.fsu.edu/~baker/ada/gnat/html/gdb_23.html)阅读更多帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-25T03:17:29.753

还有一个用于 GDB 的接口工具，称为 cgdb。即使有一些颜色突出显示。"ESC" 切换到代码视图，"i" 切换回 gdb

[![CGDB](../Images/e69bfdb44cbd22307920f0b9867bf189.png)](https://i.stack.imgur.com/XBTEN.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-25T20:04:38.550

tui 模式显然受到了 emacs 的启发——当我点击 ^Xo 时偶然发现了它，它在 emacs 的拆分窗口之间切换——当我应该做的是切换到不同的程序时，我有时会心不在焉地点击它。无论如何，这会导致另一个尚未提及的功能，您可以使用 ^Xo 将光标从代码窗口（您可以滚动的地方）移动到命令行，反之亦然。

# mysql - MySQL 性能；大数据表还是多数据表？

> ID：10115542
> 
> 赞同：1
> 
> 时间：2012-04-11T23:45:30.733
> 
> 标签：mysql, performance, join, normalization

我有一个要重建的会员数据库。每个成员在主成员表中都有 1 行。从那里我将使用 JOIN 来引用其他表中的信息。我的问题是，什么对以下性能更好：

1 个数据表，指定数据类型，然后指定数据。例子：

**数据ID | 会员编号 | 数据类型 | 数据** 1 | 1 | 电子邮件 | test@domain.com
2 | 1 | 电话 | 1234567890
3 | 2 | 电子邮件 | test@domain2.com

**或者**

制作一个包含所有电子邮件地址的表格，然后制作一个包含所有电话号码等的表格，然后使用具有多个连接的 select 语句会更好吗

请记住，此数据库将从成员表中的 75000 多行开始，实际上将包括电话、电子邮件、传真、名字和姓氏、公司名称、地址城市州邮编（意味着每个成员至少有一个其中但可以有多个（通常每个成员 1-3 个），因此超过 75000 个电话号码、电子邮件地址等）

**所以基本上，加入 1 个超过 750,000 行的表或加入 7-10 个超过 75,000 行的表**

**编辑：**当我们插入需要与数据库中现有数据匹配的销售数据时，该数据库的性能成为一个问题，因此获取 10k 行销售和联系数据的 CSV 文件并查询数据库以尝试查找哪个成员CSV 中哪个销售行的属性？哦，是的，这是在网络服务器上完成的，而不是本地机器（不是我的选择）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:00:22.283

构建此结构的明显方法是为您需要跟踪的每个数据项（电子邮件、电话等）创建一个包含一列的表。如果一个特定的数据项可以在每个成员中出现不止一次，那么这取决于该项目与该成员之间关系的确切性质：如果该项目可以自然地出现可变次数，则将它们放入其中是有意义的具有成员表外键的单独表。但是，如果数据项可以在一组有限的、固定的角色（例如，家庭电话号码和手机号码）中多次出现，那么在成员表中为每个角色创建一个不同的列会更有意义。

如果您在此设计中遇到性能问题（我个人认为 75000 并没有那么多 - 如果您有索引来正确支持您的查询，它应该不会出现问题），那么您可以对数据进行分区。Mysql 支持本地分区 (http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)，它本质上将行集合分布在单独的物理隔间（分区）上，同时维护一个逻辑隔间（表）。这里的明显优势是您可以继续查询逻辑表，而无需手动将多个地方的数据捆绑在一起。

如果您仍然认为这不是一个选项，您可以考虑垂直分区：也就是说，将列组甚至单个列放在自己的表中。如果您有一些查询总是需要一组特定的列，而其他查询倾向于使用另一组列，那么这是有道理的。只有这样，应用这种垂直分区才有意义，因为连接本身会降低性能。

（如果你真的需要数十亿，那么你可以考虑分片——也就是说，使用单独的数据库服务器来保持行的分区。只有当你可以快速限制需要查询的分片数量时，这才有意义查找特定的成员行，或者您是否可以有效地并行查询所有分片。就我个人而言，您似乎不需要这个。）

我强烈建议不要制作单个“数据”表。这基本上会将自然是一列的每一件事分散到一行。这需要一大堆连接，并使编写原本非常简单的查询变得复杂。不仅如此，它还使得几乎不可能为您的数据创建适当、有效的索引。最重要的是，它很难对数据应用约束（例如根据数据类型强制执行数据类型和数据项的长度）。

在少数情况下，这样的设计可能有意义，但提高性能并不是其中之一。（参见：实体属性值反模式[http://karwin.blogspot.com/2009/05/eav-fail.html](http://karwin.blogspot.com/2009/05/eav-fail.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:50:46.167

您应该研究`scaling out`与`scaling up`数据库有关的情况。除了上述研究之外，如果您不期望大量数据，我建议您在我们的案例中使用一张表。`dimensions`如果你是，那么在数据库设计中查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:22:13.783

75k对于数据库来说真的不算什么。您甚至可能没有注意到具有这么多索引的好处（无论如何索引:)）。

重点是，尽管您应该了解“横向扩展”系统，但大多数数据库 MySQL 都可以通过分区来解决这个问题，从而允许您的数据访问代码仍然是真正的声明性与编程性，以确定您正在寻址/查询的对象。重要的是要注意分片与分区，但老实说，当您开始超过接近 9+ 位而不是 5+ 位计数的记录时，对话就是对话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T01:51:05.053

两者都不使用尽管第一个选项的变体是正确的方法。创建一个“查找”表，用于存储数据类型（邮件、电话等）的值。然后在“数据”表中使用查找表中的 id。这样你实际上有 3 张桌子而不是 2 张桌子。对于这样的经典多对多关系的最佳实践

# iphone - 如何在 iPhone 的 xCode 中生成 3 位随机数

> ID：10115546
> 
> 赞同：0
> 
> 时间：2012-04-11T23:45:57.043
> 
> 标签：iphone, c++, xcode, iphone-developer-program

问题是我需要使用这样的代码，但它不适用于`char`变量。你能帮我写代码，或者展示我们如何用数组来做吗？

代码：

```
char numeroMaquina[0] = arc4random() % 9;

switch(numeroMaquina[0]) {
        case 0:
            numeroMaquina[0] = 1;

            break;
        case 1:
            numeroMaquina[0] = 2;

            break;
        case 2:
            numeroMaquina[0] = 3;

            break;
        case 3:
            numeroMaquina[0] = 4;

            break;
        case 4:
            numeroMaquina[0] = 5;

            break;
        case 5:
            numeroMaquina[0] = 6;

            break;
        case 6:
            numeroMaquina[0] = 7;

            break;
        case 7:
            numeroMaquina[0] = 8;

            break;
        case 8:
            numeroMaquina[0] = 9;

            break;
    }

    int numeroMaquina2 = arc4random() % 9;
    switch(numeroMaquina2) {
        case 0:
            numeroMaquina2 = 1;

            break;
        case 1:
            numeroMaquina2 = 2;

            break;
        case 2:
            numeroMaquina2 = 3;

            break;
        case 3:
            numeroMaquina2 = 4;

            break;
        case 4:
            numeroMaquina2 = 5;

            break;
        case 5:
            numeroMaquina2 = 6;

            break;
        case 6:
            numeroMaquina2 = 7;

            break;
        case 7:
            numeroMaquina2 = 8;

            break;
        case 8:
            numeroMaquina2 = 9;

            break;
    }

    int numeroMaquina3 = arc4random() % 9;
    switch(numeroMaquina3) {
        case 0:
            numeroMaquina3 = 1;

            break;
        case 1:
            numeroMaquina3 = 2;

            break;
        case 2:
            numeroMaquina3 = 3;

            break;
        case 3:
            numeroMaquina3 = 4;

            break;
        case 4:
            numeroMaquina3 = 5;

            break;
        case 5:
            numeroMaquina3 = 6;

            break;
        case 6:
            numeroMaquina3 = 7;

            break;
        case 7:
            numeroMaquina3 = 8;

            break;
        case 8:
            numeroMaquina3 = 9;

            break;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T00:00:05.603

这看起来像有人被这个词支付的代码。总而言之，您的代码似乎相当于：

```
char NumeroMaquina[3];

for (int i=0; i<3; i++)
   NumerMaquina[i] = arc4random() % 9 + 1; 
```

我不确定你想要完成什么。也许你真的想要它

```
NumeroMaquina[i] = arc4random() % 9 + '1'; 
```

那么数组中的每个元素都是可打印的数字吗？

如果（如标题所示）您只想要一个三位数的随机数，则使用以下内容可能更容易：

```
int number = arc4random() % 1000; 
```

编辑：为了避免得到 0，你会使用：

```
int number = arc4random() % 999 + 1; 
```

...如果你想要它在一串字符中，你可以将它转换为`sprintf`（例如）：

```
char as_string[4];

sprintf(as_string, "%3d", number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T00:23:29.497

```
int myNumber = arc4Random()%899 + 100; 
```

这将为您提供 100 到 999 之间的随机数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:50:29.340

我认为 iPhone 支持 C++11/libc++，所以：

如果你想要 3 个非零数字，你可以这样做：

```
#include <random>

int main() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    std::mt19937 engine(seed);

    char digits[4] = {};
    std::generate(std::begin(digits),std::end(digits)-1,
      std::bind(std::uniform_int_distribution<char>('1','9'),std::ref(engine)));
} 
```

或者可能

```
int n = std::uniform_int_distribution<int>(0,9*9*9-1)(engine); // 3 digit number in base 9
char digits[4] = {n/9/9%9 + '1',n/9%9 + '1', n%9 + '1'}; // don't use '0' as a digit symbol 
```

# xcode - 为什么归档时 xcode 4.3.2 会挂起？

> ID：10115551
> 
> 赞同：4
> 
> 时间：2012-04-11T23:46:47.997
> 
> 标签：xcode, osx-lion, unity3d

当我试图归档一个构建时，xcode 挂着五颜六色的死亡旋转轮。它曾经工作得很好，但我不能再浏览存档了，除非我手动删除存档文件。不过，我可以毫无问题地构建设备。我手动删除了存档中的所有内容（通过删除实际的存档文件），存档/管理器窗格显示正常，因为其中没有任何内容（因为我删除了存档）。但是当我再次尝试存档时，它会构建，然后尝试再次打开存档/组织器窗口，然后挂起。它生成的存档文件虽然是大约 30 兆的存档文件......但我害怕使用它..

当死亡之轮在旋转时，打开“活动监视器”会显示以下内容：“xcodebuild”的 CPU 使用率约为 80%，“opendirectoryd”的 CPU 使用率约为 30%。

我在 Lion 上卸载并重新安装了 XCode 4.3.2，但没有任何结果。

我也在从 Unity3D 构建项目..

有人在另一个线程中提到了以下内容：“我遇到了类似的问题，我发现我所做的符号链接是从 /Developer/usr/bin 到 /usr/bin 的问题的原因（因为 Xcode 4.3 移动了一些执行人员） "

我没有这样的事情发生。并且将所有类移动到一个新的“项目”并没有帮助，因为每次我在 Unity 中构建时，该项目都是全新的。

XCode 4.3.2 Mac OS X (10.7.3)

任何想法或建议都会对我很有帮助。什么都可以。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T16:40:56.283

快速解决方案：执行以下命令：xcode-select -switch /Applications/Xcode.app/Contents/Developer/

我是如何找到解决方案的：

打开 opendirectoryd 调试日志：“odutil set log debug”

在 /var/logs/opendirectoryd.log 文件中搜索。

我不断看到这块日志一遍又一遍地发送垃圾邮件：

* * *

2012-04-12 11:29:28.420 CDT - 31053.1185984，模块：SystemCache - 用于更多工作的信号量

2012-04-12 11:29:28.420 CDT - 31053.1185984，模块：SystemCache - 完成响应对象 0x7fae5b21acb0，请求完成

2012-04-12 11:29:28.420 CDT - 31053 - 客户端：“xcodebuild”，以 0 个会话、0 个节点和 0 个活动请求退出

2012-04-12 11:29:28.421 CDT - 触发器 - 新节点触发器监视 'opendirectoryd:nodes;(register|unregister);.*'

2012-04-12 11:29:28.421 CDT - semaphore_wait 将等待 - 会员呼叫的最大数量已经在飞行中

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 客户端：xcodebuild，UID：501，EUID：501，GID：20，EGID：20

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 添加到全局请求列表 - 新计数 1

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - mbr_identifier_to_uuid 请求，UID：501

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - semaphore_wait 将等待 - max_active_work

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - semaphore_wait 将等待 - workq

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 提交到管道

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 执行请求管道

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 缓存命中 - dev14 (0x59574CC0)

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 提交到响应管道

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 执行响应管道 - 0x10ba2f670

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - mbr_identifier_to_uuid 完成，交付 1 个结果

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 从全局请求列表中删除

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 用于更多工作的信号量

2012-04-12 11:29:28.421 CDT - 31053.1185985，模块：SystemCache - 完成响应对象 0x10ba2f670，请求完成

2012-04-12 11:29:28.421 CDT - 31053 - 客户端：“xcodebuild”，以 0 个会话、0 个节点和 0 个活动请求退出

2012-04-12 11:29:28.422 CDT - 触发器 - 新节点触发器监视 'opendirectoryd:nodes;(register|unregister);.*'

2012-04-12 11:29:28.422 CDT - semaphore_wait 将等待 - 会员呼叫的最大数量已经在飞行中

2012-04-12 11:29:28.422 CDT - 31053.1185986，模块：SystemCache - 客户端：xcodebuild，UID：501，EUID：501，GID：20，EGID：20

2012-04-12 11:29:28.422 CDT - 31053.1185986，模块：SystemCache - 添加到全局请求列表 - 新计数 1

2012-04-12 11:29:28.422 CDT - 31053.1185986，模块：SystemCache - mbr_identifier_to_uuid 请求，UID：501

2012-04-12 11:29:28.422 CDT - 31053.1185986，模块：SystemCache - semaphore_wait 将等待 - max_active_work

2012-04-12 11:29:28.422 CDT - 31053.1185986，模块：SystemCache - semaphore_wait 将等待 - workq

我在 google 中搜索了这些字符串之一，并在苹果的开发者论坛上找到了以下隐藏的解决方案：

“似乎旧的 xcodebuild 命令被新的 Xcode 安装程序留下了。在执行 'xcode-select -switch /Applications/Xcode.app/Contents/Developer/' 和 'make clean' 后，项目完美构建。”

确实，它现在有效。一定是一些不正确的奇怪符号链接。许多其他人似乎对 opendirectoryd 和损坏的符号链接有问题，导致 CPU 大幅飙升。

# ssrs-2008 - 如何在 SSRS 2008 的每一页上重复一个固定大小的表格

> ID：10115556
> 
> 赞同：2
> 
> 时间：2012-04-11T23:47:14.810
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

我在 SSRS 报告中有一个小表格（固定数量的标题和行），我需要在报告的每一页上重复。我的报告是由跨越多个页面的较大表格驱动的，我需要较小的静态表格在每一页上重复。是否可以在不将较小的表嵌入主表标题行的情况下实现这一点？

# python - python 类变量按值查找

> ID：10115558
> 
> 赞同：3
> 
> 时间：2012-04-11T23:47:30.970
> 
> 标签：python, performance, variables, dictionary, static

我有一个带有用于错误/状态代码查找的静态变量的类。以 HTTP 状态码为例

```
class Foo(object):
    OK = 200
    Not_Modified = 304
    Forbidden = 403
    Internal_Server_Error = 500 
```

现在我需要根据代码（200、403 等）检索口头状态（'OK'、'Not_Modified' 等）。我不能修改类的结构，因为其他程序正在使用它。所以我创建了一个`description_by_val`包含以下内容的字典`{code : description}`：

```
from collections import Hashable

class Foo(object):
    OK = 200
    Not_Modified = 304
    Forbidden = 403
    Internal_Server_Error = 500
    description_by_val = dict((value, key)
        for key, value in locals().iteritems()
            if not key.startswith("__") and value and isinstance(value, Hashable))

>>> Foo.description_by_val[200]
'OK' 
```

现在我对性能和代码实践有疑问。

*   每次我打电话`Foo.description_by_val`都会导致字典重新生成吗？即使数据集非常小，这也不好，因为这会被调用数百万次。
*   这种方法简直是不好的做法吗？我不想手动手动创建字典，我认为它应该是一个静态变量。

任何想法？

**更新：**

我的同事刚刚向我指出，我可以在创建过程中打印一些东西，`description_by_val`看看它是否会被重新生成。

```
>>> from collections import Hashable
>>> 
>>> def show(key):
...     print key
...     return True
... 
>>> 
>>> class Foo(object):
...     OK = 200
...     Not_Modified = 304
...     Forbidden = 403
...     Internal_Server_Error = 500
...     description_by_val = dict((value, key)
...         for key, value in locals().iteritems()
...             if not key.startswith("__") and key and isinstance(value, Hashable) and show(key))
... 
OK
Forbidden
Internal_Server_Error
Not_Modified
>>> 
>>> Foo.description_by_val
{200: 'OK', 304: 'Not_Modified', 403: 'Forbidden', 500: 'Internal_Server_Error'}
>>> Foo.description_by_val
{200: 'OK', 304: 'Not_Modified', 403: 'Forbidden', 500: 'Internal_Server_Error'}
>>> Foo.description_by_val[200]
'OK' 
```

我现在很高兴我不必担心性能。我想知道它为什么会这样:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T23:52:29.767

你的想法是合理的。字典不会每次都重新生成，只会在第一次创建时重新生成。查找是高效且可靠的，这不太可能导致我可以看到的问题。使用这种反向字典很常见，而且您也`isinstance(value, Hashable)`可以在一个好地方进行检查。你应该没事。

-- 已编辑 --

您的代码很好，我只是错过了尾随括号。

# java - 为双向链表的实现编写添加方法，当我向其中添加对象时排序

> ID：10115559
> 
> 赞同：2
> 
> 时间：2012-04-11T23:47:46.023
> 
> 标签：java, list, sorting

基本上如前所述，我有自己的双向链表实现，我希望它在使用 compareTo 方法添加对象时对其进行排序。

```
public void add(E c)
{
Node<E> finger = head;
while (finger != null && ((finger.value().compareTo(c)) > 0))
    finger = finger.Next();

if(finger != null && finger.Next() != null && finger.Previous() != null)
{
    Node<E> n = new Node<E>(c);
    n.setPrev(finger);
    n.setNext(finger.Next());
    finger.Next().setPrev(n);
    finger.setNext(n);
    count++;
}
else if(finger !=null && finger.Next() == null && finger.Previous() != null)
    this.addLast(c);
else if(finger !=null && finger.Next() != null && finger.Previous() == null)
    this.addFirst(c);
else{this.addFirst(c);}     
} 
```

然后我跑

```
DList<String> DD = new DList<String>();
DD.add("d");
DD.add("e");
DD.add("f");
DD.add("a");
DD.add("b");
DD.add("c");
DD.add("g");
DD.add("h");

for(int i = 0; i < DD.size();i++)
    System.out.print(DD.get(i)); 
```

并且输出是 hgcbafed。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:56:42.060

```
Node<E> finger = head;
if(null == head){
    head = new Node<E>(c);
    return;
}

while (finger.next != null && ((finger.value().compareTo(c)) > 0))
    finger = finger.Next();    
Node n = new Node<E>(c);
n.next = finger.next;//n.setNext(finger.getNext();
finger.next = n;//finger.setNext(n); 
```

# jboss - 将注释从 JBoss Seam 更改为 CDI (JEE6)

> ID：10115561
> 
> 赞同：5
> 
> 时间：2012-04-11T23:48:05.313
> 
> 标签：jboss, seam, java-ee-6, cdi

我们正在将我们的应用程序从 JBoss Seam 迁移到 CDI (JEE6)，因此我们正在更改一些注释，例如 @In 和 @Out，我们发现很多信息很有帮助，但是我们在尝试找出如何替换时遇到了一些麻烦具有特定模式的注释：

对于@In 注释

```
@Name("comprobantes")//context name
...
@In(create=false,value="autenticadoPOJO",required=false)
    private UsuarioPOJO autenticadoPOJO; 
```

我们可以使用 CDI 中的@Inject，但是如何为这种情况设置上下文变量的名称呢？

对于@Out 注释

```
@Out(scope = ScopeType.SESSION, value = "autenticadoPOJO", required = false) 
```

我读过一些博客，他们说我可以在 CDI 中使用@Produces，我们如何在添加此注释之前或之后设置范围？

我感谢任何帮助或任何有用的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:05:26.003

恐怕没有像 1:1 兼容性这样的东西`@Out`。

从技术上讲，`@Out`Seam 2 是通过一个拦截器来实现所有方法调用的——结果证明这是一个相当大的性能瓶颈。

在 CDI 中，大多数托管 bean 都是代理的，这使得以 Seam 2 方式实现喷射在技术上是不可能的。

您可以做的（嗯，您实际上*必须*做的）是遍历所有用法，`@Out`并用一些 @Producer 逻辑单独替换它。在这里查看[这个官方示例](http://docs.jboss.org/weld/reference/latest/en-US/html/example.html)。在 Seam 2 中，您会将经过身份验证的用户投射到会话范围内，而在 CDI 中，一个小的生产者方法（几乎）做同样的事情。

希望这会给您一个良好的开端，请随时提出更多问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T01:25:13.173

[http://docs.jboss.org/weld/reference/1.0.0/en-US/html/producermethods.html](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/producermethods.html)

8.1。生产者方法的范围

生产者方法的范围默认为@Dependent，因此每次容器注入此字段或解析为相同生产者方法的任何其他字段时都会调用它。因此，每个用户会话可能有多个 PaymentStrategy 对象实例。

要改变这种行为，我们可以在方法中添加一个@SessionScoped 注解。

```
@Produces @Preferred @SessionScoped
public PaymentStrategy getPaymentStrategy() {
   ...
} 
```

# java - JTable在更改时加载值，在加载时显示进度条

> ID：10115564
> 
> 赞同：2
> 
> 时间：2012-04-11T23:48:22.700
> 
> 标签：java, swing, jtable, tablemodel, tablecellrenderer

所以我正在使用一个`JTable`，它有**AK**列。**A**和**B**是唯一可编辑的。**如果有人编辑A**中的空行，我会调用 API 来获取**B ，然后我会调用 DB 来获取****B**存在的所有行。如果有人编辑**B**中的空行，我会进行与检索相同的调用也来自该行的数据库。该调用返回 0-N 行。**如果返回 0 行，我将更改除B**之外的所有行的值****为 N/A 否则我使用数据填充行。一旦填充，我使所有列不可编辑。数据库调用发生在它自己的线程中，因为一旦调用返回，我创建自己的记录对象，我将其添加到表模型中。****

 ****我有自己的`TableModel`a`TableModelListener`来保存数据并处理值的变化。

这是我的问题。我正在使用`TableCellRenderer`和使用*cellrenderer*来查看值是否已更改，如果是，则我会进行调用并根据需要进行填充。当从数据库中提取大量行时，加载和制作所有记录需要一段时间，因此我尝试使用 a`ProgressBar`向用户显示屏幕不仅被冻结，它还在进行中，并且正在进行多少。然而，出现的框架是空白的，什么都没有显示。我觉得我在做某事不正确或遗漏了什么。非常感谢任何帮助。

一些代码来理解我在说什么

```
public class MyPanel extends JPanel {
    private JTable myTable;
    private MyTableModel tm;
    //OTHER FIELDS

    public static void createPanel() {
           tm = new MyTableModel(columnnames);
           myTable = new JTable(tm);

           TableColumn account = myTable.getColumnModel().getColumn(
            MyTableModel.ACCOUNT_INDEX);
    account.setCellRenderer(new MyTableRenderer(
            MyTableModel.ACCOUNT_INDEX));
    }
}

public class MyTableRenderer extends DefaultTableCellRenderer{

   protected int interactiveColumn;

   public MyTableRenderer(int interactiveColumn) {
        this.interactiveColumn = interactiveColumn;
    }

   public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {
        Component c = super.getTableCellRendererComponent(table, value,
                isSelected, hasFocus, row, column);
        if (column == interactiveColumn && hasFocus) {
             //DO DB and API CALLS HERE
             //IF DB CALL DISPLAY A NEW FRAME WITH PROGRESSBAR
        }
        return c;
   }
} 
```

格式问题抱歉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T00:02:03.887

使用[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)，它允许您在`TableModel`检查结果集时更新您的结果。

附录：不要尝试`TableModel`从渲染器更新。您可以在您的实施`CellEditor`结束后更新模型，方法是在`getCellEditorValue()`. 这样，当下次为任何修改的单元格调用渲染器时，修改后的数据将可用。此相关[示例](https://stackoverflow.com/a/10067560/230513)概述了该方法。

附录：`getCellEditorValue()`在编辑结束后调用，但启动工作人员`setValueAt()`可以更可靠地访问目标行和列。****

# mysql - 光标的最后部分使用触发器两次插入 MYSQL

> ID：10115568
> 
> 赞同：0
> 
> 时间：2012-04-11T23:48:54.793
> 
> 标签：mysql, loops, triggers, cursor

我在 MySQL 中使用触发器来执行以下操作：

当我将新客户端添加到客户端表时，它应该在“客户端类型”表中创建一组条目，将客户端 ID 链接到一组类型 ID（client1、type1 client1、type2）等...

但是，当触发器运行时，数据库会两次插入最后一种类型的条目。所以最后两个条目是（client1，type9 client1，type9）。

触发代码如下：

```
AFTER INSERT ON `nmsTicket`.`client`
FOR EACH ROW
BEGIN

   DECLARE done BOOLEAN DEFAULT 0;
   DECLARE a CHAR(2);

   DECLARE types CURSOR
   FOR
   SELECT typeID FROM type;

   DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done=1;

   OPEN types;

 REPEAT
      FETCH types INTO a;

       INSERT INTO clientType(id_type, id_client) VALUES (a,new.idClient);

   UNTIL done END REPEAT;

   CLOSE types; 
```

我已经看过几次了，但我不明白为什么它会表现出这种行为；最后一个之前的所有条目都可以正常工作。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:41:38.780

我不确定您为什么在触发器中使用游标 - 除非您绝对需要，否则应该避免这种情况（请参阅此处，例如[Optimal MySQL settings for queries that deliver大量数据？](https://stackoverflow.com/questions/4129071/optimal-mysql-settings-for-queries-that-deliver-large-amounts-of-data/4144514#4144514)）

下面是一个使用交叉连接而不是游标的简化示例（减去参照完整性）。此外，您会注意到我没有在 client_types 表上使用代理主键，而是使用复合主键来更好地执行数据完整性。

**架构**

```
drop table if exists client_type; --your type table
create table client_type
(
type_id tinyint unsigned not null auto_increment primary key,
name varchar(255) unique not null
)
engine=innodb;

drop table if exists client;
create table client
(
client_id int unsigned not null auto_increment primary key,
name varchar(255) not null
)
engine=innodb;

drop table if exists client_types; -- your clienttype table
create table client_types
(
client_id int unsigned not null,
type_id tinyint unsigned not null,
primary key (client_id, type_id) -- ** note use of composite primary key **
)
engine=innodb;

delimiter #

create trigger client_after_ins_trig after insert on client
for each row
begin

insert into client_types (client_id, type_id) 
select
 c.client_id,
 ct.type_id
from
 client c
cross join client_type ct
where
 c.client_id = new.client_id
order by
 ct.type_id;

end#

delimiter ; 
```

**测试**

```
mysql> insert into client_type (name) values ('type one'),('type two'),('type three');
Query OK, 3 rows affected (0.03 sec)

mysql> insert into client (name) values ('client A'),('client B');
Query OK, 2 rows affected (0.04 sec)

mysql> select * from client_type;
+---------+------------+
| type_id | name       |
+---------+------------+
|       1 | type one   |
|       3 | type three |
|       2 | type two   |
+---------+------------+
3 rows in set (0.00 sec)

mysql> select * from client;
+-----------+----------+
| client_id | name     |
+-----------+----------+
|         1 | client A |
|         2 | client B |
+-----------+----------+
2 rows in set (0.00 sec)

mysql> select * from client_types;
+-----------+---------+
| client_id | type_id |
+-----------+---------+
|         1 |       1 |
|         1 |       2 |
|         1 |       3 |
|         2 |       1 |
|         2 |       2 |
|         2 |       3 |
+-----------+---------+
6 rows in set (0.00 sec) 
```

希望这可以帮助 ：）

# android - 处理 BOOT_COMPLETED 动作的多个广播接收器？

> ID：10115571
> 
> 赞同：0
> 
> 时间：2012-04-11T23:49:09.893
> 
> 标签：android

是否可以在单个应用程序中在 BOOT_COMPLETED 上运行多个 BroadcastReceiver？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:58:20.347

是的，但没有理由这样做，因为您可以简单地将它们全部放在一个 BroadcastReceiver 中。

由于每个都将运行，ON_BOOT_COMPLETED，它会产生相同的结果，而不是系统猪。

# javascript - 获取表单中选中复选框的值以分隔字符串（动态命名）

> ID：10115574
> 
> 赞同：-1
> 
> 时间：2012-04-11T23:49:24.153
> 
> 标签：javascript, dynamic

标题解释了大部分..

```
var formobj = document.h1;
for (var j = 0; j < formobj.elements.length; j++) {
            if (formobj.elements[j].type == "checkbox" && formobj.elements[j].checked) {
                    //WHAT GOES HERE?
            } 
```

我想在任何选中的复选框的值之后动态命名字符串，例如 string1、string2、string3 等。如何动态命名它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:52:59.753

我想知道我是否正确理解了这个问题，但不仅仅是：

```
formobj.elements[j].id = 'string'+j; 
```

# php - 学习如何在 php 和 mysql 中加密密码的起点在哪里？

> ID：10115585
> 
> 赞同：0
> 
> 时间：2012-04-11T23:51:04.720
> 
> 标签：php, mysql, encryption

我有兴趣了解如何将加密密码从 php 表单发送到 mysql 数据库。什么是一个好的起点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:53:22.597

看看这里：[基本安全，PHP mySQl](https://stackoverflow.com/questions/2701954/basic-security-php-mysql)

在这里： http: [//php.net/manual/en/faq.passwords.php](http://php.net/manual/en/faq.passwords.php)

记住散列是你所追求的，而不是加密。散列是一种方式，加密是可逆的（解密它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:06:30.007

这与 MySQL 无关，而是关于 SQLite 加密和动态反向（[http://sqlite.biz/index.php?area=Main&page=DBcTutorial](http://sqlite.biz/index.php?area=Main&page=DBcTutorial)）这是一个 pear 库，因此您可以在[http://pear.php获得它.net](http://pear.php.net)并使用与 MySQL 相同的机制。

# c# - javascript 元素的大小无法正常工作

> ID：10115587
> 
> 赞同：1
> 
> 时间：2012-04-11T23:51:18.773
> 
> 标签：c#, javascript, jquery, windows-phone-7, xaml

我有一个在 WP7 C# 应用程序中使用的 javascript 函数，由于某种原因存在大小问题。截至目前，该功能正常工作，但我有三个项目显示为我的 webbrowser 控件顶部的菜单栏，它们不会根据我认为我会如何完成此操作来调整大小。我的功能的尺寸部分如下

Javascript

```
...
pf=doc.createElement('div');
            pf.id='pf';
            var s=pf.style;
            s.position='absolute';
            s.zIndex='999';
            s.top=(scT||scBT)+'px';
            s.left=(scL||scBL)+'px';
            s.width='100%';
            s.height='9%';
            //s.backgroundColor='#FFFF00';
            s.backgroundColor='green';

            //var st = doc.createElement("P");
            //p.style.height='50%';
            //p.style.width='15%';
            //text = doc.createTextNode('Search: ');
            //p.appendChild(text);
            //p.appendChild(doc.createTextNode('Search: '));
            //pf.appendChild(p);
            pf.appendChild(doc.createTextNode('Search: '));

            qt=doc.createElement('input');
            qt.id='qt';                 
            qt.type='text';
            qt.style.height='85%'
            qt.style.width='50%';
            pf.appendChild(qt);

            var sb=doc.createElement('input');              
            sb.type='button';
            sb.value='Find';
            sb.style.height='100%';
            sb.style.width='20%';
... 
```

这样做的结果是在 webbrowser 页面顶部加载了一个栏，它充当在页面上查找功能。我已经根据正常工作的网页尺寸调整了 pf 的大小，并且我正在尝试制作`pf.appendChild(doc.createTextNode('Search: '));`、`qt=doc.createElement('input');`和的高度`sb=doc.createElement('input');`匹配页面顶部显示的 pf 菜单栏的高度。到目前为止，只有 sb 的高度（设置为 100%）与 pf 的高度匹配，而将 qt 设置为 100% 与 pf 的高度不匹配（它根据当前显示的网页的高度尺寸而变化）。另外，我不知道是否有办法设置 pf.appendChild(doc.createTextNode('Search: ')); 的高度 虽然我尝试过的在上面被注释掉了。有没有办法让它们始终与 pf 菜单栏的高度相同？此外，在高度尺寸较大的页面上，文本太小以至于无法阅读，有没有办法相应地放大文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:35:46.023

您可以尝试使用 offsetHeight，如果 Height 属性不起作用，或者您可以在 style.Heigth 中设置高度。如果您使用 VS IDE，您可以调试 javascript 元素以查看正确的属性，或者可以设置一些具有静态值的虚拟元素。

# java - Java POJO 中的字段、变量、属性和属性有什么区别？

> ID：10115588
> 
> 赞同：167
> 
> 时间：2012-04-11T23:51:27.087
> 
> 标签：java, pojo

当提到具有 getter/setter 的 Java POJO 的内部私有变量时，我使用了以下术语：

*   场地
*   多变的
*   属性
*   财产

以上有什么区别吗？如果是这样，正确使用的术语是什么？当这个实体被持久化时，是否有不同的术语可以使用？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-04-12T00:06:43.020

从这里：[http ://docs.oracle.com/javase/tutorial/information/glossary.html](http://docs.oracle.com/javase/tutorial/information/glossary.html)

* * *

*   场地

    *   类的数据成员。除非另有说明，否则字段不是静态的。

* * *

*   财产

    *   用户可以设置的对象的特征，例如窗口的颜色。

* * *

*   属性

    *   未在上述词汇表中列出

* * *

*   多变的

    *   由标识符命名的数据项。每个变量都有一个类型（例如 int 或 Object）和一个作用域。另请参见类变量、实例变量、局部变量。

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2012-04-11T23:55:56.113

就在这里。

**变量**可以是局部的、字段的或常量（尽管这在技术上是错误的）。它像属性一样模糊。另外，你应该知道有些人喜欢调用**final**非静态（本地或实例）变量

“**价值观**”。这可能来自新兴的 JVM FP 语言，如 Scala。

**字段**通常是实例类上的私有变量。这并不意味着有 getter 和 setter。

**属性**是一个模糊的术语。它很容易与 XML 或 Java Naming API 混淆。尽量避免使用该术语。

**属性**是 getter 和 setter 的组合。

*下面的一些例子*

```
public class Variables {

    //Constant
    public final static String MY_VARIABLE = "that was a lot for a constant";

    //Value
    final String dontChangeMeBro = "my god that is still long for a val";

    //Field
    protected String flipMe = "wee!!!";

    //Property
    private String ifYouThoughtTheConstantWasVerboseHaHa;

    //Still the property
    public String getIfYouThoughtTheConstantWasVerboseHaHa() {
        return ifYouThoughtTheConstantWasVerboseHaHa;
    }

    //And now the setter
    public void setIfYouThoughtTheConstantWasVerboseHaHa(String ifYouThoughtTheConstantWasVerboseHaHa) {
        this.ifYouThoughtTheConstantWasVerboseHaHa = ifYouThoughtTheConstantWasVerboseHaHa;
    }

} 
```

还有很多组合，但是我的手指越来越累了:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-01T21:32:30.703

如果您的问题是通过使用 JAXB 提示并想要选择正确的`XMLAccessType`，我有同样的问题。JAXB [Javadoc](https://jaxb.java.net/nonav/2.2.6/docs/api/)说“字段”是一个非静态、非瞬态的实例变量。“属性”有一个 getter/setter 对（所以它应该是一个私有变量）。“公共成员”是公共的，因此可能是一个常数。同样在 JAXB 中，“属性”指的是 XML 元素的一部分，如`<myElement myAttribute="first">hello world</myElement>`.

一般来说，Java“属性”似乎可以定义为至少具有 getter 或其他一些允许您获取其值的公共方法的字段。也有人说一个属性需要有一个setter。对于这样的定义，上下文就是一切。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-10T09:24:34.060

Dietel 和 Dietel 有一种很好的方式来解释字段与变量。

“一个类的静态变量和实例变量一起被称为它的字段。” （第 6.3 节）

“仅当需要在类的多个方法中使用变量或程序应在调用类方法之间保存其值时，才应将变量声明为字段。” （第 6.4 节）

所以一个类的字段是它的静态或实例变量——即用类范围声明。

参考 - Dietel P., Dietel, H. - Java™ How To Program (Early Objects)，第十版 (2014)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-28T20:01:56.933

如果您从 Hibernate 中获取线索：

Hibernate 使用其字段读取/写入对象的状态。Hibernate 还将 Java Bean 样式属性映射到 DB Schema。休眠访问用于加载/保存对象的字段。如果映射是通过属性完成的，hibernate 使用 getter 和 setter。

**封装区分意味着你在哪里有一个字段的getter/setter，它被称为属性，我们在setMethod中隐藏了该属性的底层数据结构，我们可以防止在setter中进行不必要的更改。封装所代表的一切...**

**字段**必须在使用前声明和初始化。主要用于课堂内部使用。

**属性**可以由 setter 更改，并且由 getter 公开。这里的字段价格有getter/setter，所以它是财产。

```
class Car{
 private double price;
 public double getPrice() {…};
 private void setPrice(double newPrice) {…};
}

<class name="Car" …&gt;
<property name="price" column="PRICE"/>
</class> 
```

类似地使用**fields**，[在休眠中，推荐使用 fields 进行 MAP 的方式，其中 private int id; 被注释为@Id，但使用属性你有更多的控制]

```
class Car{
  private double price;
}
<class name="Car">
<property name=" price" column="PRICE" access="field"/>
</class> 
```

Java doc 说：字段是类的数据成员。字段是非静态的、非瞬态的实例变量。字段通常是实例类上的私有变量。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-12-29T15:25:21.820

Java中*变量、字段、属性、属性*的区别：

**变量**是赋予内存位置的名称。它是程序中存储的基本单位。

**字段**是类的数据成员。除非另有说明，否则字段可以是公共的、静态的、非静态的和最终的。

**属性**是字段的另一个术语。它通常是一个可以直接访问的公共字段。

*   在 NetBeans 或 Eclipse 中，当我们键入一个类的对象并在那个点 (.) 之后它们给出一些称为属性的建议。

**属性**是用于字段的术语，但它通常具有 getter 和 setter 组合。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-29T21:20:01.710

变量由字段和非字段组成。

字段可以是：

1.  静态字段或
2.  非静态字段也称为实例化，例如 x = F()

非字段可以是：

1.  局部变量，字段的模拟，但在方法内部而不是在所有方法外部，或
2.  参数，例如 x = f(y) 中的 y

总之，变量之间的关键区别在于它们是字段还是非字段，这意味着它们是在方法内部还是在所有方法之外。

基本示例（对不起我的语法，我只是一个初学者）

```
Class {    
    //fields    

    method1 {              
         //non-fields    

    }    
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-03-28T22:13:03.387

**Java 变量、字段、属性**

*   `variable`- 命名存储地址。每个变量都有一个定义内存大小、属性和行为的类型。Java 变量的类型有：`class variable`, `instance variable`, `local variable`,`method parameter`

```
//pattern
<Java_type> <name> ;

//for example
int myInt;
String myString;
CustomClass myCustomClass; 
```

*   `field`- 成员变量或数据成员。它是一个`variable`内部`class`(`class variable`或`instance variable`)

*   `attribute`- 在某些文章中，您会发现`attribute`它是`object`. 操作通过它定义一组特征。`class variable``Object``attributes`

```
CustomClass myCustomClass = new CustomClass();
myCustomClass.myAttribute = "poor fantasy"; //`myAttribute` is an attribute of `myCustomClass` object with a "poor fantasy" value 
```

[【Objective-C属性】](https://stackoverflow.com/a/66282129/4770877)

*   `property`- `field`+ 有界`getter/setter`。它具有字段语法，但使用底层的方法。`Java`不支持纯形式。看看`Objective-C`，，，`Swift`_`Kotlin`

例如`Kotlin`样本：

```
//field - Backing Field
class Person {
    var name: String = "default name"
        get() = field
        set(value) { field = value }
}

//using
val person = Person()
person.name = "Alex"    // setter is used
println(person.name)    // getter is used 
```

[[Swift 变量、属性...]](https://stackoverflow.com/a/60913330/4770877)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-10T10:09:51.717

实际上，这两个术语通常用于表示同一事物，但也有一些例外情况。字段可以存储对象的状态。此外，所有字段都是变量。所以很明显，可以有不是字段的变量。因此，查看 4 种类型的变量（类变量、实例变量、局部变量和参数变量）我们可以看到类变量和实例变量可以影响对象的状态。换句话说，如果一个类或实例变量发生变化，对象的状态就会发生变化。所以我们可以说类变量和实例变量是字段，而局部变量和参数变量不是。

如果您想更深入地了解，可以前往以下来源：-

[http://sajupauledayan.com/java/fields-vs-variables-in-java](http://sajupauledayan.com/java/fields-vs-variables-in-java)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-08T12:21:32.973

这个问题很老，但是变量和字段之间的另一个重要区别是，字段在声明时会获得默认值。另一方面，变量必须被初始化。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-20T16:59:33.970

我的理解如下，我并不是说这是100％正确，我可能会误会..

**变量**是您声明的东西，默认情况下可以更改并具有不同的值，但也可以明确表示为最终的。在 Java 中，这将是：

```
public class Variables {

    List<Object> listVariable; // declared but not assigned
    final int aFinalVariableExample = 5; // declared, assigned and said to be final!

    Integer foo(List<Object> someOtherObjectListVariable) {
        // declare..
        Object iAmAlsoAVariable;

        // assign a value..
        iAmAlsoAVariable = 5;

        // change its value..
        iAmAlsoAVariable = 8;

        someOtherObjectListVariable.add(iAmAlsoAVariable);

        return new Integer();
    }
} 
```

所以基本上，变量是任何被声明并可以保存值的东西。例如，上面的方法 foo 返回一个变量。它返回一个 Integer 类型的变量，该变量保存新 Integer() 的内存地址；您在上面看到的所有其他内容也是变量，listVariable、a​​FinalVariableExample 并在此处解释：

字段是范围更清晰（或具体）的变量。在上面的示例中，从方法 foo 的范围返回的变量并不清楚，因此我不会将其称为字段。另一方面，iAmAlsoVariable 是一个“本地”字段，受方法 foo 的范围限制，而 listVariable 是一个“实例”字段，其中字段（变量）的范围受对象范围的限制。

属性是可以访问/变异的字段。任何公开 getter / setter 的字段都是属性。

我不知道属性，我还想重申一下，这是我对变量、字段和属性的理解。

# com - 从旧 ASP 调用时 .Net COM 的配置文件

> ID：10115589
> 
> 赞同：1
> 
> 时间：2012-04-11T23:51:27.393
> 
> 标签：com, configuration, .net

那里！我有一个用 .Net Framework 4 编写的库。该库通过 System.Runtime.InteropServices 将一些对象公开为 COM，这些对象已在 regasm 实用程序中注册。这些对象旨在供旧的（不是 .Net）ASP 页面使用，该页面在 IIS6（Windows Server 2003）上运行 .Net Framework 2（我知道！！！）的应用程序下配置。

一切似乎都正常，除了配置文件。当 .Net 4 COM 对象尝试访问 System.Configuration.ConfigurationManager 以查找连接字符串时，它会收到空引用异常。该网站有一个Web.config文件，显然连接字符串在那里，但库找不到它。我认为这是因为 Web.config 用于在 IIS 下运行的 .Net 应用程序，而 COM 库被视为外部组件。

我不知道库可能还在哪里寻找配置文件。更改 FW4 文件夹中的 machine.config 有效，但我想知道是否还有其他位置可以使用，因为 machine.config 是系统范围的，我不想污染它，尤其是连接字符串。我尝试在 DLL 文件夹中添加一个 mylibrary.dll.config 文件，但它也不起作用。

提前致谢

# ruby - 检查文件名是文件夹还是文件

> ID：10115591
> 
> 赞同：77
> 
> 时间：2012-04-11T23:51:40.207
> 
> 标签：ruby, file

我有一小段 Ruby 代码：

```
files.each do |file|
  FileUtils.mkdir_p(File.dirname(target))    
  FileUtils.cp_r(file, target, :verbose => true)
end 
```

我想添加一张支票

```
if file is a folder
  # do this
if file is a file
  # do that 
```

如何在 Ruby 中实现？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-04-11T23:56:56.463

您可以使用`File.directory?("name")`和/或`File.file?("name")`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-12T06:28:39.447

检查[`Pathname#directory?`](https://ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html#method-i-directory-3F)和检查也是一个好主意[`Pathname#file?`](https://ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html#method-i-file-3F)

# javascript - Jquery - 如何在drupal视图中只影响一个节点

> ID：10115592
> 
> 赞同：0
> 
> 时间：2012-04-11T23:52:19.227
> 
> 标签：javascript, jquery, drupal, views

当我在 drupal 视图中单击一个节点时，它会切换视图中每个节点的主体，而不仅仅是我单击的节点。如何让 jquery 仅切换我正在单击的节点？这是我的节点模板头部的代码（node-type.tpl.php）

```
 <script>
 $("button").click(function () {
 $(".more").toggle();
 });
 </script> 
```

以及要切换的主体代码。

```
 <div class="more"><?php print $node->content['body']['#value']; ?></div> 
```

目前，它在我的整个视图中使用“更多”类切换每个 div，而不仅仅是在我单击的节点中。如何将其限制为仅单击的节点？

如果一次只打开身体，我也会喜欢它。IE; 当点击不同的节点时，前一个节点的主体切换为关闭。

我敢肯定这可能很容易，但我似乎无法弄清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:58:43.693

按钮相对于`.more`哪里？

如果按钮在`.more`元素中，你想做这样的事情：

```
$("button").click(function () {
    $('.more').hide();
    $(this).closest(".more").show();
}); 
```

如果按钮不是 的父级或祖先`.more`，您将需要做更多的事情。如果按钮与元素的顺序相同`.more`（并且没有任何不相关的按钮），您可以这样做：

```
$("button").click(function () {
    $('.more').hide();
    $('.more').eq( $('button').index( $(this) ) ).show();
}); 
```

`.more`但是，最好使用 an`id`和 a`href`或一些 jQuery 数据将按钮链接到内容：

```
<button class='morebutton' data-more="#more1">Button 1</button>
<button class='morebutton' data-more="#more2">Button 2</button>
<div class='more' id="more1">More Number 1</div>
<div class='more' id="more2">More Number 2</div> 
```

脚本：

```
$(".morebutton").click(function () {
    $('.more').hide();
    $( $(this).data('more') ).show();
}); 
```

演示：http: [//jsfiddle.net/jtbowden/EfUxt/](http://jsfiddle.net/jtbowden/EfUxt/)

有一些库可以帮助处理这些情况，例如 jQuery UI 选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:00:27.823

您可能需要 jQuery UI 选项卡[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)或其他一些 jQuery 选项卡解决方案。

# python - PyBrain：从头开始创建网络时，您如何以及在哪里创建偏见？

> ID：10115600
> 
> 赞同：6
> 
> 时间：2012-04-11T23:52:48.567
> 
> 标签：python, neural-network, pybrain

按照[PyBrain](http://pybrain.org/)文档[Building Networks with Modules and Connections](http://pybrain.org/docs/tutorial/netmodcon.html)，我正在分段构建神经网络（与使用 buildNetwork 快捷方式相反）。我正在构建一个简单的 3 层（输入、隐藏、输出）神经网络。如何正确添加偏置单元？

我猜我构建了一个`BiasUnit`模块，如下所示：

```
b = BiasUnit(name='bias')
network.addModule(b) 
```

这是正确的方法吗？我必须创建`FullConnection`对象吗？如果是这样，我应该连接什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T00:31:45.710

Realized PyBrain 是开源的，我的 Python 目录中有源代码。我打开了 C:\Python27\Lib\site-packages\pybrain\tools\shortcuts.py 文件。在这个文件中，我找到了 buildNetwork 函数并查看了它是如何添加 BiasUnit 的。相关代码在这里：

```
...
n = Network()
# linear input layer
n.addInputModule(LinearLayer(layers[0], name='in'))
# output layer of type 'outclass'
n.addOutputModule(opt['outclass'](layers[-1], name='out'))
if opt['bias']:
    # add bias module and connection to out module, if desired
    n.addModule(BiasUnit(name='bias'))
    if opt['outputbias']:
        n.addConnection(FullConnection(n['bias'], n['out']))
# arbitrary number of hidden layers of type 'hiddenclass'
for i, num in enumerate(layers[1:-1]):
    layername = 'hidden%i' % i
    n.addModule(opt['hiddenclass'](num, name=layername))
    if opt['bias']:
        # also connect all the layers with the bias
        n.addConnection(FullConnection(n['bias'], n[layername]))
# connections between hidden layers
... 
```

基本上，它看起来像是创建了一个 BiasUnit 并将其连接到每个隐藏层，也可以选择连接到输出层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T16:51:08.213

这里有一个[简单的例子](https://github.com/pybrain/pybrain/blob/977acf5f362ffa3c71a944210fd6d9f7695df053/examples/supervised/backprop/backpropanbncn.py)：

```
n = RecurrentNetwork()
n.addModule(TanhLayer(hsize, name = 'h'))
n.addModule(BiasUnit(name = 'bias'))
n.addOutputModule(LinearLayer(1, name = 'out'))
n.addConnection(FullConnection(n['bias'], n['h']))
n.addConnection(FullConnection(n['h'], n['out']))
n.sortModules() 
```

请注意，这`BiasUnit`与`TanhLayer`有效地使该`h`层成为具有偏差的层有关。

# c# - DataAnnotations 似乎无法在使用验证器的值类型上正确运行

> ID：10115609
> 
> 赞同：0
> 
> 时间：2012-04-11T23:53:51.590
> 
> 标签：c#, data-annotations

为什么这总是返回true？

```
 class Program
    {
        static void Main(string[] args)
        {
            Person p = new Person();
            p.Age = 24;

            ICollection<ValidationResult> results = new Collection<ValidationResult>();
            bool isValid = Validator.TryValidateObject(p, new ValidationContext(p, null, null), results);

            Console.WriteLine("Valid = {0}",isValid);

            foreach (var result in results)
            {
                Console.WriteLine(result.ErrorMessage);
            }

            Console.ReadKey();
        }
    }

    public class Person
    {
        [Required(ErrorMessage = "You have to identify yourself!!")]
        public int Id { get; set; }

        public decimal Age { get; set; }    

    } 
```

我的用法有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T23:56:17.847

`int`是一个值类型，永远不可能是`null`.

A`new Person()`将有一个`Id`of `0`，它将满足`[Required]`。
一般来说，`[Required]`对值类型是无用的。

要解决此问题，您可以使用 nullable `int?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:23:42.160

另一种选择是使用[RangeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute.aspx)。当 Id 为 时，这应该会出错`< 1`。

```
public class Person
{
    [Range(1, int.MaxValue, ErrorMessage = "You have to identify yourself!!")]
    public int Id { get; set; }

    public decimal Age { get; set; }    

} 
```

# android - 在 Android 的 Renderscript 中，使用 rs_script_call 结构来限制在 rsForEach 调用期间操作的分配范围

> ID：10115616
> 
> 赞同：2
> 
> 时间：2012-04-11T23:54:32.353
> 
> 标签：android, renderscript

使用 Android 的 RenderScript，我试图限制在 rsForEach 调用期间操作的分配范围。根据文档，您可以通过传入 rs_script_call 结构来实现这一点，但是每当我尝试这样做时，应用程序就会崩溃。

rs_script_call 结构如何正确设置并传递给 rsForEach 调用？

我使用 HelloCompute RenderScript 示例作为代码的基础。最低 Android sdk 版本设置为 15，因此使用需要 6 个参数的 rsForEach。这是改编后的 mono.rs：

```
#pragma version(1)
#pragma rs java_package_name(com.example.android.rs.hellocompute)

const static float3 gMonoMult = {0.299f, 0.587f, 0.114f};

void init() {
}

void root(const uchar4 *v_in, uchar4 *v_out) {
    float4 f4 = rsUnpackColor8888(*v_in);

    float3 mono = dot(f4.rgb, gMonoMult);
    *v_out = rsPackColorTo8888(mono);
}

void runRestricted(rs_script script, rs_allocation in_alloc, rs_allocation out_alloc) {
     struct rs_script_call restrict_for;
     restrict_for.strategy = RS_FOR_EACH_STRATEGY_DONT_CARE;
     restrict_for.xStart = 0;
     restrict_for.xEnd = 16;
     restrict_for.yStart = 0;
     restrict_for.yEnd = 0;
     restrict_for.zStart = 0;
     restrict_for.zEnd = 0;
     restrict_for.arrayStart = 0;
     restrict_for.arrayEnd = 0;
     rsForEach(script, in_alloc, out_alloc, NULL, 0, &restrict_for);
     //rsForEach(script, in_alloc, out_alloc);
} 
```

从以下 Java 调用：

```
mRS = RenderScript.create(this);

mInAllocation = Allocation.createFromBitmap(mRS, mBitmapIn,
                                                Allocation.MipmapControl.MIPMAP_NONE,
                                                Allocation.USAGE_SCRIPT);
mOutAllocation = Allocation.createTyped(mRS, mInAllocation.getType());

mScript = new ScriptC_mono(mRS, getResources(), R.raw.mono);

//mScript.forEach_root(mInAllocation, mOutAllocation);
mScript.invoke_runRestricted(mScript, mInAllocation, mOutAllocation);
mOutAllocation.copyTo(mBitmapOut); 
```

以下是在 Android 4.0.4 的 Nexus S 上运行的应用程序日志的一部分：

```
04-12 00:27:25.632: V/RenderScript(18747): rsContextCreate dev=0x18798c0
04-12 00:27:25.636: V/RenderScript(18747): 0x183b6a0 Launching thread(s), CPUs 1
04-12 00:27:25.656: V/ScriptC(18747): Create script for resource = mono
04-12 00:27:25.656: I/bcc(18747): LIBBCC build time: 2012/03/25 20:11:25
04-12 00:27:25.656: I/bcc(18747): LIBBCC build revision: 31e50d678d2a8aa28c6f38cccebfa3da2f78df4a (git)
04-12 00:27:25.675: D/StopWatch(18747): StopWatch calcFileSHA1 time (us): 17709 
04-12 00:27:25.679: D/StopWatch(18747): StopWatch calcFileSHA1 time (us): 2350 
04-12 00:27:25.679: D/bcc(18747): Read object file size 1020
04-12 00:27:25.679: E/RenderScript(18747): ScriptC sym lookup failed for _Z9rsForEach9rs_script13rs_allocationS0_PKvjPK14rs_script_call
04-12 00:27:25.679: E/bcc(18747): Unable to resolve symbol: _Z9rsForEach9rs_script13rs_allocationS0_PKvjPK14rs_script_call
04-12 00:27:25.679: D/StopWatch(18747): StopWatch bcc: PrepareExecutable time (us): 1284 
04-12 00:27:25.679: E/bcc(18747): Symbol not found: .rs.dtor
04-12 00:27:25.683: A/libc(18747): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1) 
```

# asp.net-mvc-3 - asp.net mvc 日志框架

> ID：10115621
> 
> 赞同：1
> 
> 时间：2012-04-11T23:54:57.847
> 
> 标签：asp.net-mvc-3, logging

我们需要一个日志框架来允许我们执行以下操作

1.  记录所有未处理的异常
2.  记录用户访问的页面并能够重现他们的历史记录（这样我们就可以尝试更好地优化网站以适应用户使用模式）
3.  记录我们可能希望在代码的不同位置输出的任何自定义消息，即。警告/信息
4.  记录 asp.net 成员资格成功/失败
5.  记录任何其他系统相关事件

我已经看到 ELMAH 将执行 #1，asp.net 健康监控似乎将处理 #4 和 #5 以及可能的 #2（虽然不是 100% 确定），以及类似 NLog 或 Log4Net将照顾＃3。

[我确实找到了](http://dotnetdarren.wordpress.com/2010/07/29/logging-in-mvc-part-5-the-model-and-data-layer/)有关实现所有这些的教程，但我想知道是否有必要拥有所有这些库仅用于这种类型的日志记录，看起来有点多，然后你有尝试将它们组合成标准类型的开销如果这就是你将如何显示它们的视图。

还有比这更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:10:51.320

我个人喜欢让不同的系统记录不同类型的数据。在我看来，这些都是不同的日志角色域。分析师不应该关心#1 异常，那些是针对开发人员的，开发人员应该关心#2（Google Analytics 或 Adob​​e SiteCatalyst）。我觉得允许不同的系统根据需要记录并以不同的方式分发记录信息是合适的，尽管正如你所说的那样有点多。

这个问题可能应该在 Programmers.StackExchange.Com 上问过。

# haskell - 在 Haskell 中访问自定义数据类型的成员

> ID：10115623
> 
> 赞同：46
> 
> 时间：2012-04-11T23:55:21.267
> 
> 标签：haskell

假设我在 Haskell 中有以下自定义数据类型和函数：

```
data Person = Person { first_name :: String, 
                       last_name :: String,
                       age :: Int 
                     } deriving (Eq, Ord, Show) 
```

如果我想创建一个函数`print_age`来打印一个人的年龄，像这样：`print_age (Person "John" "Smith" 21)`，我将如何编写`print_age`来访问年龄参数？我是一个面向对象的人，所以我在这里没有我的元素。我基本上是在寻找 Person.age 的等价物。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-11T23:58:43.907

函数应用是前缀，所以`age person`会对应`person.age()`OOP语言中的通用。该`print_age`函数可以通过函数组合来定义

```
print_age = print . age 
```

或点满

```
print_age person = print (age person) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-12T00:04:34.937

这称为记录语法，[LYAH 有一个很好的部分](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#record-syntax)。

当使用记录定义数据类型时，Haskell 会自动定义与记录同名的函数作为访问器，因此在这种情况下`age`是年龄字段的访问器（它具有 type ），对于and`Person -> Int`也是类似的。`first_name``last_name`

这些是普通的 Haskell 函数，因此被称为 like`age person`或`first_name person`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-12T04:14:09.413

除了`age`其他答案中提到的功能外，有时使用模式匹配也很方便。

```
print_age Person { age = a } = {- the a variable contains the person's age -} 
```

有一个非常无害的扩展，允许您跳过命名位：

```
{-# LANGUAGE NamedFieldPuns #-}
print_age Person { age } = {- the age variable contains the person's age -} 
```

...还有另一个，不同社区成员以不同程度的不信任看待，这使您甚至可以跳过说出要纳入范围的字段：

```
{-# LANGUAGE RecordWildCards #-}
print_age Person { .. } = {- first_name, last_name, and age are all defined -} 
```

# ruby-on-rails - 您如何直接访问 Omniauth facebook 图片网址？

> ID：10115624
> 
> 赞同：1
> 
> 时间：2012-04-11T23:55:51.853
> 
> 标签：ruby-on-rails, omniauth

使用 Omniauth 版本 1.0.2，目前当我调用`env["omniauth.auth"]["info"]["image"]`以获取当前用户的图像时，我得到一个 URL：
`http://graph.facebook.com/100002739564577/picture?type=square`
这将重定向到我想要的实际 jpeg url：
`http://profile.ak.fbcdn.net/hprofile-ak-ash2/532749_100003719364175_332972681_a.jpg`

是否可以直接在rails中获取jpeg url？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:22:17.470

如果您想显示图像，您不一定必须这样做。这有效： `<img src="http://graph.facebook.com/100002739564577/picture?type=square" />`

但是，如果您必须这样做，请尝试以下操作：

```
url = URI.parse('http://graph.facebook.com/100002739564577/picture?type=square')
res = Net::HTTP.get_response(url)
res['location'] #returns the image URL 
```

# xcode - 在运行时加载不存在的 .xib

> ID：10115641
> 
> 赞同：0
> 
> 时间：2012-04-11T23:58:10.390
> 
> 标签：xcode, exception, runtime, xib, nib

我创建了一个 IB 文件并将其链接到 MyAVController 类。但后来我改变了主意，在 MyAVController 类中以编程方式完成所有布局。所以我从项目中删除了 IB 文件（MyAVController.xib）。我的项目编译成功。但是，当程序启动时，我收到以下错误：

'NSInternalInconsistencyException'，原因：'-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“MyAVController”笔尖，但未设置视图出口。

我在这里看到了类似的问题 ['NSInternalInconsistencyException'，原因：'-[UIViewController _loadViewFromNibNamed:bundle:] 加载了 GameView 笔尖，但未设置视图出口](https://stackoverflow.com/q/5464010/1299585)

但我认为在我的情况下，应用程序正在寻找在运行时加载不存在的 MyAVController.xib。我错过了什么吗？提前感谢您的评论。

-完全困惑的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:06:09.290

尝试在您的代码“在工作区中编辑/查找”中搜索 MyAVController - 这应该会显示它尝试加载它的位置。

# xml - 视窗 8 /WP7 。隔离存储设置与 XML

> ID：10115648
> 
> 赞同：1
> 
> 时间：2012-04-11T23:58:48.700
> 
> 标签：xml, windows-phone-7, isolatedstorage

我在一个 xml 文件中有很多数据（元素周期表的所有元素）。

我应该在每次应用程序启动时加载还是使用在 IsolatedStorageSettings 中创建元素对象列表？

第二个允许吗？哪一个会更有效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:54:07.823

就个人而言，我会手动序列化文件并存储它，然后在启动时反序列化它 - 我假设您拥有的元素周期表一次用于多个元素。

将这些数据保存在像`IsolatedStorageSettings`.

`ISS`通常建议用于应用程序设置或在使用应用程序时随时间变化的数据。您的情况并非完全如此。

# c++ - Opencv 中的 PCA 项目和 backproject

> ID：10115650
> 
> 赞同：1
> 
> 时间：2012-04-11T23:58:58.640
> 
> 标签：c++, ubuntu, opencv, computer-vision, pca

我在 Ubuntu Opencv 工作。我正在尝试对单个图像进行 PCA 分析。我采用 3 通道图像并将其更改为具有 3 列和 r*c 行数的单通道图像。r 和 c 是行和原始图像的列。当我在 PCA 上进行反投影后尝试显示重建图像时，它给了我一个绿色图像。这是我的代码

```
Mat pcaset=cvCreateMat(image->height*image->width,image->nChannels,CV_8UC1);
for(int i=0;i<image->height;i++)
    {
        for(int j=0;j<image->width;j++)
        {
            for(int k=0;k<image->nChannels;k++)
            (ptrpcaset+i*pcaset.step)[k]=((ptrimage+i*image->widthStep)[3*j+k]);

       }

    }
int nEigens=3;
    Mat databackprojected;
    PCA pca(pcaset,Mat(),CV_PCA_DATA_AS_ROW,nEigens);
    Mat dataprojected(pcaset.rows,nEigens,CV_8UC1);
    pca.project(pcaset,dataprojected);
    pca.backProject(dataprojected,databackprojected);
    Mat backprojectnorm;//(databackprojected.rows,nEigens,CV_8UC1);
    normalize(databackprojected,backprojectnorm,0,255,NORM_MINMAX,-1);
    Mat finaldataafterreshaping(image->height,image->width,CV_8UC3);
    uchar* finalptr=(uchar*)finaldataafterreshaping.data;
    uchar* ptrnorm=(uchar*)backprojectnorm.data;

    int x=0,y=0,i=0;

    while(i<backprojectnorm.rows)
    {
        while(x<image->height)
        {
            while(y<image->width)
            {
                for(int k=0;k<image->nChannels;k++)
                {
                    (finalptr+x*finaldataafterreshaping.step)[3*y+k]=(ptrnorm+i*backprojectnorm.step)[k];
                }
                y=y+1;i=i+1;
            }
            x=x+1;y=0;
        }
    }
imshow("Reconstructed data",finaldataafterreshaping); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:29:44.430

您需要进行以下更改：

```
(ptrpcaset+(j + i*image->width)*pcaset.step)[k]=((ptrimage+i*image->widthStep)[3*j+k]); 
```

因为您在转换数据时没有考虑 j 坐标，因此最后您只将图像的最后一行保存在新矩阵中。

当您重塑数据时，您需要执行以下操作：

```
float* val = (float*)&(ptrnorm+i*backprojectnorm.step)[(k*4)];
(finalptr+x*finaldataafterreshaping.step)[3*y+k]=*val; 
```

因为你得到的矩阵是 type`float`而不是`uchar`. 所以你需要某种转换。我不确定这样做是否是个好主意，但它确实有效。我建议你看看 OpenCV 2 的 C++ API，它可以更好地处理这些事情。

`while(i<backprojectnrom.rows)`此外，不需要整个循环。

# javascript - 带有方向和动画的jQuery toggleClass

> ID：10115651
> 
> 赞同：-1
> 
> 时间：2012-04-11T23:59:01.550
> 
> 标签：javascript, jquery

我按照教程在滚动后向我的网站添加了一个固定标题，并且该网站的徽标出现在固定部分。

那行得通，代码：

```
var nav_container = $(".nav-container");
var nav = $("nav");
var logo = $("logo");

nav_container.waypoint({
    handler: function(event, direction) {
        nav.toggleClass('sticky', direction=='down');
        logo.toggleClass('logo_sticky', direction=='down');
        if (direction == 'down')
            nav_container.css({ 'height' : nav.outerHeight() });
        else
            nav_container.css({ 'height' : 'auto' });
    });
}); 
```

如何在徽标中添加淡入延迟，使其不会突然出现？

我试过的版本：

```
logo.toggleClass('logo_sticky', direction=='down').delay(500).fadeIn('slow');

logo.delay(500).toggleClass('logo_sticky', direction=='down').fadeIn('slow'); 
```

（在切换类之前）

```
logo.delay(500).fadeIn('slow')
logo.toggleClass('logo_sticky', direction=='down'); 
```

（在toggleClass之后）

```
logo.toggleClass('logo_sticky', direction=='down');
logo.delay(500).fadeIn('slow') 
```

老实说，我已经尝试了我想到的每一个组合，哈哈，我正在尝试的新版本也不起作用：

```
$(function() {
        var nav_container = $(".nav-container");
        var nav = $("nav");
        var logo = $("logo");
        $.waypoints.settings.scrollThrottle = 30;

        nav_container.waypoint({
            handler: function(event, direction) {
                if (direction == 'down'){
                    nav_container.css({ 'height':nav.outerHeight() });
                    nav.addClass('sticky', direction=='down').stop();
                    logo.css({"visibility":"visible"}).fadeIn("slow");
                }
                else{
                    nav_container.css({ 'height':'auto' });
                    nav.removeClass('sticky', direction=='down').stop();
                    logo.css({"visibility":"hidden"});
                }
                },
            offset: function() {
                return (0);
            }   
        });
    }); 
```

但是如果我而不是fadeIn put toggle它会动画变化但方向不好（img出现然后切换到消失）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:11:02.063

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

[http://api.jquery.com/fadein/](http://api.jquery.com/fadein/)

采用`$(yourLogoSelector).delay(delayAmount).fadeIn();`

这是证明它有效的证据[http://jsfiddle.net/6d8cf/](http://jsfiddle.net/6d8cf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T16:20:09.480

似乎fadeIn仅在您没有属性可见性的CSS时才有效：隐藏，但显示：无...

你可以做一个`element.hide();`然后`element.fadeIn()`。因为 hide() 改变了页面的布局，因为它消除了其中的项目，这是我遇到的解决方案：

```
 $(function() {
  // Do our DOM lookups beforehand
        var nav_container = $(".nav-container");
        var nav = $("nav");
        var logo = $("logo");
        $.waypoints.settings.scrollThrottle = 30;

        nav_container.waypoint({
            handler: function(event, direction) {
                if (direction == 'down'){
                    nav_container.css({ 'height':nav.outerHeight() });
                    nav.addClass('sticky', direction=='down').stop();
                    logo.css('opacity',0).animate({opacity:1}, 1000);
                }
                else{
                    nav_container.css({ 'height':'auto' });
                    nav.removeClass('sticky', direction=='down').stop();
                    logo.css('opacity',1).animate({opacity:0}, 1000);
                }
                },
            offset: function() {
                return (0);
            }   
        });
    }); 
```

# php - php 添加时间

> ID：10115653
> 
> 赞同：0
> 
> 时间：2012-04-11T23:59:16.370
> 
> 标签：php, time

为什么 $now2 不起作用？

```
$now = date('Y-m-d H:i:s', time()); 
$now2 = date("Y-m-d H:i:s", strtotime( "$now + 0.5 secs")); 
```

或者我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:03:43.753

它现在工作的原因是因为`PHP`不承认`0.5 secs`有有效

`0.5 secs`不是有效的日期格式..但它是有效的`microtime`

尝试

```
$now = date('Y-m-d H:i:s', time());
var_dump(strtotime( "$now + 1 secs")); 
```

输出

```
int 1334188908 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T00:15:48.837

time() 返回自纪元以来的**秒数。**它对几分之一秒一无所知。如果您需要这种级别的准确性，则需要使用 microtime()（请参阅： http: [//php.net/manual/en/function.microtime.php](http://php.net/manual/en/function.microtime.php)）

编辑：您当然不能在 date() 格式中使用 microtime，因此您需要事先进行计算然后使用它。如同：

```
$now = microtime(true);
$newtime = $now + 0.5;

echo date("Y-m-d H:i:s", round($newtime,0) ); 
```

根据您的要求，您可能更喜欢使用与 round() 不同的函数来使 $newtime 和 integer 再次适合使用 date() 进行格式化

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T00:15:01.930

Unix 时间戳（即`time()`返回）的分辨率仅为 1 秒。所以你不能增加半秒。

# php - php中的mysql语法错误，输入phpmyadmin时工作正常

> ID：10115656
> 
> 赞同：0
> 
> 时间：2012-04-11T23:59:40.807
> 
> 标签：php, mysql, sql, for-loop, phpmyadmin

我正在尝试使用在 for 循环中递增的数组来查询我的数据库。出于某种原因，无论我做什么，这都行不通，

我得到错误：

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ')' 附近使用正确的语法”

当在 PHPMyAdmin 中查询数据库时，一切都很好，所以我假设 for 循环中的某些东西搞砸了。有任何想法吗？

我的代码：-

```
 <?php
$submitclick=$_GET["submitclick"];
if($submitclick==1)
{
require('json.php');
$selec=$_GET["selec"];
$selec=str_replace("'","",$selec);
error_reporting(E_ALL);
mysql_connect("localhost", "seamus", "password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("seamus") or die("No such database");
$sql1 = sprintf("SELECT event FROM attends WHERE student = '%s'",$selec);
$result1 = mysql_query($sql1)
  or die(mysql_error());

while ($row1 = mysql_fetch_array($result1))
 {
  $eve[] = $row1['event'];
 }

for($f=0;$f<count($eve);$f++)
{
$sql = sprintf("SELECT event.id, teaches.staff, day, start, duration, room FROM event JOIN module ON (event.module=module.id) JOIN isin ON (event.id=isin.event) JOIN teaches ON (event.id=teaches.event) JOIN attends ON (event.id=attends.event) WHERE event.id = '%s')",$eve[$f]);
$result = mysql_query($sql)
  or die(mysql_error());  
 $i=0;

while ($row = mysql_fetch_array($result))
    {
     $key =$row['day'].$row['start'];
     $event[$key] = $row['id'];
     $room[$row['id']] = $row['room'];
     $lect[$row['id']] = $row['staff'];
   $time[$i]= $row['duration'];
   $i++;
    }
}     
   $i=0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:02:27.593

你在这里有一个额外的括号，就在`'%s'`：

```
... WHERE event.id = '%s')",$eve[$f]); 
```

只需将其删除，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:03:03.037

换行：

```
$sql = sprintf("SELECT event.id, teaches.staff, day, start, duration, room FROM event JOIN module ON (event.module=module.id) JOIN isin ON (event.id=isin.event) JOIN teaches ON (event.id=teaches.event) JOIN attends ON (event.id=attends.event) WHERE event.id = '%s')",$eve[$f]); 
```

至：

```
$sql = sprintf("SELECT event.id, teaches.staff, day, start, duration, room FROM event JOIN module ON (event.module=module.id) JOIN isin ON (event.id=isin.event) JOIN teaches ON (event.id=teaches.event) JOIN attends ON (event.id=attends.event) WHERE event.id = %d)",$eve[$f]); 
```

因为 event.id 是一个整数。

希望有帮助。

# silverlight - 代码隐藏 for 循环中的动画，使用 RenderTransform

> ID：10115657
> 
> 赞同：1
> 
> 时间：2012-04-11T23:59:43.523
> 
> 标签：silverlight

是否可以在代码隐藏中而不是 xaml 中以“老派”方式制作动画？

我只想要一个指向具有“反弹效果”的东西的箭头，我可以在自己的 for 循环中轻松做到这一点。但我不知道如何在循环内刷新或进行定时器延迟。我已经将图像放置在代码隐藏中的位置。我想做的就是这个简单的动画......

```
public void validationArrow()
{

    var validationArrow = new Image();
    validationArrow.Source = new BitmapImage(new Uri("/SlProject;component/arrow.png", UriKind.RelativeOrAbsolute));
    LayoutRoot.Children.Add(validationArrow);
    validationArrow.Stretch = Stretch.None;
    validationArrow.VerticalAlignment = System.Windows.VerticalAlignment.Top;
    validationArrow.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
    var arrowPosition = new TranslateTransform { X = 0, Y = 0 };
    validationArrow.RenderTransform = arrowPosition;

    validationArrow.Name = "validationArrow";

    for (int i = 150; i >= 0; i--)
    {
        arrowPosition.X = i;
        validationArrow.RenderTransform = arrowPosition;
        // how can I refresh screen and do some timing here?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:52:18.823

没有像旧学校那样的学校；）在这里，这应该可以帮助您。您可以使用传递给 BuildEasing 方法的毫秒和 Y 平移值来更改“反弹”效果的速度和距离。

```
 private void RunStoryboard()
    {
        var arrowImage = new Image();
        arrowImage.RenderTransform = new CompositeTransform();
        arrowImage.Source = new BitmapImage(new Uri("/SlProject;component/arrow.png", UriKind.RelativeOrAbsolute));
        LayoutRoot.Children.Add(arrowImage);

        Storyboard storyboard = new Storyboard();
        storyboard.Children.Add(BuildKeyFrame(arrowImage));
        storyboard.Begin();
    }

    private DoubleAnimationUsingKeyFrames BuildKeyFrame(Image target)
    {
        DoubleAnimationUsingKeyFrames kf = new DoubleAnimationUsingKeyFrames();
        Storyboard.SetTarget(kf, target);
        Storyboard.SetTargetProperty(kf, new PropertyPath("(UIElement.RenderTransform).(CompositeTransform.TranslateY)"));

        kf.KeyFrames.Add(BuildEasing(100, 10));
        kf.KeyFrames.Add(BuildEasing(200, 0));
        kf.KeyFrames.Add(BuildEasing(300, 10));
        kf.KeyFrames.Add(BuildEasing(400, 0));
        kf.KeyFrames.Add(BuildEasing(500, 10));
        kf.KeyFrames.Add(BuildEasing(600, 0));

        return kf;
    }

    private EasingDoubleKeyFrame BuildEasing(int ms, int value)
    {
        return new EasingDoubleKeyFrame()
        {
            KeyTime = KeyTime.FromTimeSpan(new TimeSpan(0, 0, 0, 0, ms)),
            Value = value
        };
    } 
```

# rest - 解释与类和实例相关的 RestEasy 提供者、资源和单例？

> ID：10115658
> 
> 赞同：1
> 
> 时间：2012-04-11T23:59:52.753
> 
> 标签：rest, resteasy

我正在构建一个由储藏室和工作场所组成的 JAX-RS 应用程序。库房拥有一组 Java 类，可以实例化（通过 AJAX）以在工作场所创建这些类的命名实例。

到目前为止，我可以通过在 RestEasy 应用程序中将它们声明为“单身人士”来引用仓库和工作场所的罚款

```
 singletons.add(StockPlace.getInstance());
    singletons.add(WorkPlace.getInstance()); 
```

我无法理解如何理解应该如何处理库房内容类。我想要达到的效果是，当我动态创建库类之一的实例时，可以通过 REST 命令动态访问该实例。我尝试了以下各种排列：

```
 classes.add(SomeComponent.class); 
```

我想我缺少关于类如何作为创建实例的工厂的 Java 概念的知识，以及这两者如何与 RestEasy 所称的类、单例（单例是类，但 RestEasy 将它们注册为实例）和资源（实例？）。

我怀疑我最终需要动态注册新实例，但也找不到这样做的方法。在给定 ServletContext 的情况下，我确实找到了一种方法，但我也无法访问它。有人可以让我走上正确的轨道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:40:31.780

我们对这个问题的最终回答是退出 RestEasy 并转换为[DropWizard](http://dropwizard.codahale.com/)。这个问题和许多其他问题都消失了，一切都变得容易了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:14:40.553

由于我没有找到不涉及将另一整层复杂性（Spring）绑定到 RestEasy 的答案，因此我发现可行的解决方案在上面的最终评论中进行了概述。也就是说，不要依赖于向实例发送远程消息，除非应用程序是真正无状态的（例如，实例不会跨消息持续存在）。仅将远程消息发送到在请求中持续存在的单例。每条这样的消息都可以识别所需的实例（在我的例子中通过 String id），并且单例可以作为普通 POJO 转发到识别的实例。

我仍然不明白为什么 RestEasy 无条件地将非单例（实例）视为短暂的。无状态不是对 REST 的限制，只是对何时可以使用 GET 方法（幂等调用）的限制。PUT 和 POST 调用既不是无状态的也不是幂等的。

当然，据我了解，请随时纠正我。我的重点是让这个应用程序上线，而不是探索 RestEasy、REST 的每一个角落，当然也不是 Spring。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:00:01.770

我相信我知道你在追求什么，但我至少应该让你朝着正确的方向前进。

您需要将带注释的 RESTEasy 类添加到注册表中。下面是我用于最近项目的类。它添加到单例中（根据您所做的），但它也添加到注册表中。

```
public class RESTEasyServerApplication extends javax.ws.rs.core.Application
{
    // The RESTEasy registry
    @Autowired
    protected org.jboss.resteasy.spi.Registry registry;

    // The annotated RESTEasy handler classes
    private Set<Object>  singletons = new HashSet<Object>();
    private List<Object> handlers   = new ArrayList<Object>();

    public RESTEasyServerApplication()
    {}

    @Override
    public Set<Object> getSingletons()
    {
        return singletons;
    }

    // Spring injection support
    public void setHandlers( List<Object> handlers )
    {
        for( Object handler : handlers )
        {
            if( registry != null )
            {
                // Save a reference to the handler
                this.handlers.add( handler );

                // Register the handler with RESTEasy
                registry.addSingletonResource( handler );
            }

            singletons.add( handler );
        }
    }

    // Spring injection support
    public List<Object> getHandlers()
    {
        return handlers;
    }
} 
```

我用的是Spring，下面是相关配置：

```
<!-- RESTeasy/Spring integration -->
<import resource="classpath:springmvc-resteasy.xml" />

<!-- RESTeasy server application -->
<bean id="application" class="blah.blah.resteasy.RESTEasyServerApplication">
    <property name="handlers">
        <list>
            <!-- Application specific handler classes -->
            <ref bean="sample"/>
        </list>
    </property>
</bean> 
```

应该很容易修改/添加一个方法来接受单个带注释的 RESTEasy 类并使其根据需要动态工作。注册表在 springmvc-resteasy.xml 文件中定义。

# java - 什么是位模式？

> ID：10115659
> 
> 赞同：3
> 
> 时间：2012-04-11T23:59:59.650
> 
> 标签：java, variables, design-patterns, bit, scjp

我正在读一本书，它引用了以下内容：

> 对于原始变量，将一个变量分配给另一个变量意味着一个变量的内容（位模式）被复制到另一个变量中……引用变量的内容是位模式……

请帮助我理解这里的“位模式”是什么意思。这是说变量的内存地址的另一种方式吗？

例如，以下两个变量的位模式是什么样的

1.  诠释 x;
2.  Time 上课时间；
3.  整数 y;

因此，例如，如果“int x = 4”并且该 4 位于内存地址 X77348，那么将复制到另一个引用的内容是什么？00000100（二进制为 4）？或 X77348

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T00:01:39.557

不是原始变量的内存地址。原始变量的内存地址的**内容**。

同样，对于引用，它是引用变量的内存地址的**内容**。（请记住，在幕后，Java 引用本质上是一个指针。因此，与引用相关的“位模式”就是那个指针（它指向对象所在的堆上的任何位置））。

# html - Meteor 应用程序对 SEO 有什么影响？

> ID：10115672
> 
> 赞同：20
> 
> 时间：2012-04-12T00:01:36.223
> 
> 标签：html, seo, meteor

查看 todos 列表示例的渲染 HTML 源代码，body 标记中的代码为零。这对 SEO 有何影响？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-12T01:04:43.087

**编辑**：Meteor 现在支持向蜘蛛提供静态 HTML。

来自：[http ://docs.meteor.com/#spiderable](http://docs.meteor.com/#spiderable)

Meteor 可以提供静态 HTML 吗？流星网站可以被谷歌索引吗？

是的。添加“spiderable”智能包以支持向搜索引擎发送静态 HTML，并提供有效链接。spiderable 包实现了 Google 的 AJAX Crawling Specification。有关详细信息，请参阅可抓取的文档。

这个版本的spiderable是专门为搜索引擎设计的。Meteor 的未来版本还将在初始页面加载时将 HTML 发送到 Web 浏览器。Meteor 模板系统是专门为支持这个用例而设计的。

**旧的和现在的错误答案：**

来自： http: [//meteor.com/faq/can-meteor-serve-static-html](http://meteor.com/faq/can-meteor-serve-static-html)

Meteor 可以提供静态 HTML 吗？Meteor 是否可以在客户端禁用 JavaScript 的情况下工作？流星网站可以被谷歌索引吗？

Meteor 经过精心设计以支持这个重要的用例，但它不在当前的 Meteor 版本中。它将成为我们即将发布的路由版本的一部分，这将使构建知道当前 URL 的 Meteor 站点变得容易。

简而言之，服务器端渲染的工作方式是 Meteor 应用程序在服务器上启动并允许渲染页面。然后会话状态被序列化（使用与热代码推送相同的迁移技术），应用程序被冻结并推送到浏览器，如果浏览器支持 JavaScript，则可以选择重新启动它。由于 Meteor 模板基于 HTML 字符串，而不是 DOM 操作，因此无需在服务器上运行 DOM 仿真包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:10:27.577

因为蜘蛛没有 js 执行，这意味着他们只会在头脑中获得关于页面的任何信息，这并不是真的很好，但是看起来他们的网站你仍然可以拥有静态内容以及在其他内容中流式传输如果您的静态内容是在谈论关键短语、指向其他网站的链接等与您想要的关键字相关的内容，那么这对 SEO 来说会很好

# html - CSS/HTML 不透明度

> ID：10115676
> 
> 赞同：0
> 
> 时间：2012-04-12T00:02:45.050
> 
> 标签：html, css, opacity

我的代码有点问题。我的页面上有一个透明/玻璃状的导航栏。我正在尝试在其上添加徽标，但是当我这样做时，徽标也是透明的并且可以看穿它。

我认为问题可能是导航栏出现在徽标之前，但在我的代码中，我的徽标先出现。

```
#nav {
background: #000;
height: 40px;
opacity: 0.15;
border-bottom-right-radius: 0.6em;
border-bottom-left-radius: 0.6em;
}

<div style="border-bottom-right-radius: 0.6em; 
                    border-bottom-left-radius: 0.6em;
                    box-shadow: 0px 0px 7px #000000;
                    width: 960px;">
            <div id="nav">

            </div>
        </div> 
```

徽标图像只是一个常规的 < img > 标签，其中心位置有一点样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:23:04.257

您的问题表明徽标位于导航容器之外，但您的症状表明它是导航栏的子项。即使不是，您的代码也存在缺陷，您很快就会在 nav 元素的子元素上遇到类似问题。

CSS opacity 设置改变整个元素的不透明度，包括子元素。尝试使用 rgba 设置背景颜色：

```
#nav {
    background: #000;
    background: rgba(0,0,0,.15);
    height: 40px;
    border-bottom-right-radius: 0.6em;
    border-bottom-left-radius: 0.6em;
} 
```

rgba 背景在旧浏览器（IE8 及之前）中会失败，#000 背景是他们的后备。

您还可以创建一个半透明的 png 文件并将其设置为后备背景，这将适用于 IE7 及更高版本（如果您使用[png 透明度 hack](http://24ways.org/2007/supersleight-transparent-png-in-ie6) ，则适用于 IE6 ）：

```
#nav {
    background: url('semitransparent.png');
    background: rgba(0,0,0,.15);
    height: 40px;
    border-bottom-right-radius: 0.6em;
    border-bottom-left-radius: 0.6em;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:08:26.110

如果您在“#nav”中有徽标，它将是透明的。您必须为徽标提供：

```
.logo{position:absolute;} 
```

并将其移到导航上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T04:35:01.580

我想你应该想要这个。

**CSS**

```
#nav {
background: rgba(0,0,0,0.1);
height: 40px;
border-bottom-right-radius: 0.6em;
border-bottom-left-radius: 0.6em;
color:black;
    margin:10px 0 0 0;
    position:relative;
    padding-left:110px;
}
.logo{
    position:absolute;
    top:0;
    left:0;
    width:100px;
    height:25px;
    background:green;
} 
```

**HTML**

```
<div style="border-bottom-right-radius: 0.6em;
                    border-bottom-left-radius: 0.6em;
                    box-shadow: 0px 0px 7px #000000;
                    width: 960px;margin:10px 0 0 10px;">
            <div id="nav">

                <div class="logo">Logo here </div>

your navi here
            </div>
        </div> 
```

现场演示[http://jsfiddle.net/rohitazad/yNMbt/](http://jsfiddle.net/rohitazad/yNMbt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T00:14:29.247

您可以尝试提高图像的 z 水平，使其在视觉顺序中“浮动”在其他元素之上。

```
<img src="image.png" style="z-index: 1000" /> 
```

尽管听起来您的图像正在从父元素继承样式。如果您将图像放置在#nav 元素中，那么可能就是这种情况。确保`opacity: 1;`在这种情况下设置图像样式。

旁注：您可能还希望将样式从元素标签中提取出来并放入您的 CSS 中以使其更清晰。

# php - 在整个 for 循环中更改 php 变量名

> ID：10115677
> 
> 赞同：3
> 
> 时间：2012-04-12T00:02:54.660
> 
> 标签：php

我有一个要重命名的数组，以便根据 for 循环所在的数字存储值。我尝试了这样的事情，但它给了我一个错误。

```
for ($i =0;$i<4;$i++){

$array.$i = array();

push stuff into array;

} 
```

所以在下一次迭代中，数组被称为array1，然后是array2，依此类推。做这个的最好方式是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T00:07:06.053

从字面上回答你的问题：

```
$arrayName = 'array' . $i;
$$arrayName = array();
$$arrayName[] = ... 
```

你*真正*想要的是一个多维数组：

```
$array[$i] = array();
$array[$i][] = ...; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:05:58.090

您想使用[变量 variables](http://php.net/manual/en/language.variables.variable.php)，其中双美元符号表示变量的名称取自变量。

```
$varname = "array";
for ($i =0;$i<4;$i++){
    $newvarname = $varname . $i
    $$newvarname = new array()
    push stuff into array;
} 
```

我要补充一点，在这些情况下，一个更简单的解决方案通常是使用一个数组，其中所需的变量名称是索引。因此，您不必创建`$array1`,`$array2`等，而是：

```
$arrays = array (
    'array1' => array(stuff),
    'array2' => array(stuff),
    'array3' => array(stuff),
    'array4' => array(stuff)
} 
```

至少，我发现跟踪起来更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:09:03.850

您应该能够使用变量变量的 $$ 表示法来引用数组（参见：[http](http://www.php.net/manual/en/language.variables.variable.php) ://www.php.net/manual/en/language.variables.variable.php ）。

所以，这样的事情应该可以工作（未经测试）：

```
for ($i =0;$i<4;$i++){

  $thisArrayName = 'array'.$i;
  $$thisArrayName = array();

  push stuff into array;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T00:11:00.160

你需要数组数组

```
for ($i =0;$i<4;$i++){

   $array[$i] = array();

    push stuff into array;
} 
```

# javascript - Jquery slideViewer 无法正确显示

> ID：10115681
> 
> 赞同：1
> 
> 时间：2012-04-12T00:03:18.487
> 
> 标签：javascript, jquery, slideshow

我正在创建一个相册幻灯片，并使用此站点的代码： [http](http://www.gcmingati.net/wordpress/wp-content/lab/jquery/imagestrip/imageslide-plugin.html) ://www.gcmingati.net/wordpress/wp-content/lab/jquery/imagestrip/imageslide-plugin.html 。

我已经合并了编写的代码，并且幻灯片可以正常工作，但无法正常工作。第一个图像正确显示，但随后的每个图像都没有正确排列，最后一个图像根本不显示。无论我有多少图像，最后一张图像的问题都会发生。如果我只显示 4 张图像，则图像 #4 不会显示。如果我显示 8 张图像，则图像 #8 不会显示。

你可以在这里查看我的幻灯片：http: [//jvidell.com/harlowlake.html](http://jvidell.com/harlowlake.html)

关于为什么它在第一张图像之后没有正确排列并且没有显示最后一张图像的任何想法或想法？

这是图像的 HTML：

```
 <div id="galleryMargin">
 <div id="gallery" class="svw" style="width: 750px; height: 498px;">
 <ul>
 <li><img src="img/harlowLake/HL001a.jpg" /></li>
 <li><img src="img/harlowLake/HL002a.jpg" /></li>
 <li><img src="img/harlowLake/HL003a.jpg" /></li>
 <li><img src="img/harlowLake/HL004a.jpg" /></li>
 </ul>
 </div> 
 </div> 
```

这是脚本：

```
 <script type="text/javascript">
$(window).bind("load", function() {
$("div#gallery").slideView()
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:11:09.343

问题是您在幻灯片图像上设置了边框，这使整个图像的宽度大于容器的宽度。因此，只需删除边框，您应该会看到最后一张图片。

```
img {
/*border: 1px solid black;*/ /*Remove this line*/
display: inline;
} 
```

# sinatra - sinatra oauth2-provider 的 oauth 令牌

> ID：10115693
> 
> 赞同：1
> 
> 时间：2012-04-12T00:04:12.670
> 
> 标签：sinatra, oauth-2.0, oauth-provider

我是 Sinatra 的新手，想让它与 oauth2-provider gem 一起工作。我按照说明[https://github.com/songkick/oauth2-provider#readme](https://github.com/songkick/oauth2-provider#readme)并查看了示例。但是在我获得 access_token 之后，我无法使用它从 Oauth 端点获取信息。它会生成 401 not Unauthorized 错误。从我的应用程序中，我确实请求 [http://localhost:9292/me?access_token=](http://localhost:9292/me?access_token=)，我尝试了 html 请求和 json 请求，但没有成功。

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T04:29:29.497

看起来您使用 HTTP 与 HTTPS 完成了请求。你现在尝试设置`Songkick::OAuth2::Provider.enforce_ssl = false`吗？

# android - Android交互通信

> ID：10115705
> 
> 赞同：1
> 
> 时间：2012-04-12T00:06:22.270
> 
> 标签：android, android-intent

嗨，我是一个完全的 android 新手，所以我的问题可能看起来很愚蠢。

我想制作一个有两个活动的程序，其中一个是 TinyCalActivity1，另一个是 TinyCalActivity2。

我的意图是我可以制作一个按钮来在这个活动之间切换，

```
package my.app.tinyCal;

    public class TinyCalActivity1 extends Activity {
    /** Called when the activity is first created. */

    Button myButton;
    EditText myEdit;
    //Intent i = new Intent(TinyCalActivity1.this, TinyCalActivity2.class);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myButton = (Button)findViewById(R.id.Next);
        myEdit = (EditText)findViewById(R.id.entry);
        CharSequence thisNum = "1234565";
        myEdit.setText(thisNum);

        OnClickListener myListener = new OnClickListener(){
            public void onClick(View v){
            }
        };

        myButton.setOnClickListener(myListener);
    }
} 
```

和 TinyCalActivity2。

但是，当我编写此行并在我的 android AVD 中运行时，它告诉我有一个错误。

```
Intent i = new Intent(this, TinyCalActivity2.class); 
```

eclipse中没有错误提示，我不知道为什么。我将 TinyCalActivity2.java 创建为与 TinyCalActivity1.java 文件位于同一文件夹中的单独文件。我已经在我的 AndroidManifest.xml 中注册了 TinyCalActivity2。

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T04:12:04.210

如果你把你的代码

```
Intent i = new Intent(this, TinyCalActivity2.class); 
```

在按钮单击事件中，则`this`指的是按钮而不是 ACTIVITY。因此，您需要将其提及为

```
Intent i = new Intent(TinyCalActivity1.this, TinyCalActivity2.class); 
```

这可能会解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T04:35:20.940

你可以试试这个方法。

```
myButton.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
            Intent i = new Intent(this, TinyCalActivity2.class);
            finish();
            }
        }; 
```

# scala - 在 Scala 中扩展 SortedMap

> ID：10115708
> 
> 赞同：1
> 
> 时间：2012-04-12T00:06:36.143
> 
> 标签：scala, collections

我正在尝试在 Scala 中扩展 SortedMap，但我遇到了 SortedMapLike 和 canBuildFrom 的一些问题（最后一个我什至无法正确输入）。这是一些代码；首先是伴随对象：

```
object Timeline {
  ...
  def newBuilder[A]: Builder[(Long, A), Timeline[A]] = 
    new ListBuffer[(Long, A)] mapResult fromSeq

  def fromSeq[A](buf: Seq[(Long, A)]): Timeline[A] = 
    new Timeline(buf toMap)

  def empty[A] = Timeline[A](Map[Long, A]())
} 
```

然后上课（是的，我所有的时间线都是从`Long`到`A`）：

```
final class Timeline[A] private(t: Map[Long, A]) 
  extends SortedMap[Long, A] 
  with SortedMapLike[Long, A, Timeline[A]] {

  private[this] lazy val iMap = 
    TreeMap(t.toArray: _*)(Ordering.fromLessThan[Long](_ > _))

  override def newBuilder: Builder[(Long, A), Timeline[A]] = Timeline.newBuilder
  override def empty: Timeline[A] = Timeline.empty

  def -(key: Long) = Timeline(iMap - key)
  def get(key: Long) = iMap.get(key)
  def rangeImpl(from: Option[Long], until: Option[Long]) = 
    Timeline(iMap.rangeImpl(from, until))
  def iterator = iMap.iterator
  def ordering = iMap.ordering
} 
```

我不确定以上所有内容都是实现此目的的正确方法，但现在是我什至无法正确输入的部分：

```
implicit def canBuildFrom[A]: CanBuildFrom[Timeline[A], A, Timeline[A]] =
  new CanBuildFrom[Timeline[A], A, Timeline[A]] {
    def apply(): Builder[(Long, A), Timeline[A]] = newBuilder[A]
    def apply(from: Timeline[A]): Builder[(Long, A), Timeline[A]] = newBuilder[A]
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:03:01.500

看来我输入错误`canBuildFrom`：

```
implicit def canBuildFrom[A]: CanBuildFrom[Timeline[A], (Long, A), Timeline[A]] = 
  new CanBuildFrom[Timeline[A], (Long, A), Timeline[A]] {
    def apply(): Builder[(Long, A), Timeline[A]] = newBuilder[A]
    def apply(from: Timeline[A]): Builder[(Long, A), Timeline[A]] = newBuilder[A]
  } 
```

# javascript - innerHTML 导致 ul 自动关闭

> ID：10115711
> 
> 赞同：3
> 
> 时间：2012-04-12T00:06:49.340
> 
> 标签：javascript, html-lists, innerhtml

我试图通过从缓存的文本文件中提取并循环浏览推文来显示 Twitter 提要。工作正常，直到我尝试将这些推文变成一个列表。li 元素正确地附加到 innerHTML，但开头的 ul 自动关闭，结尾的 ul 消失了。

```
function twitterStatusCallback(obj) {
   if(obj && obj.length){
       document.getElementById('twitter_status').innerHTML += "<ul>";
       var len = obj.length;

      for(var i = 0; i < len; i++){
    //Only get tweets less than 7 days old.
    if ((relativeTimeNumeric(obj[i].created_at)) < (8*24*60*60)) { 

    var tweet = obj[i];

        document.getElementById('twitter_status').innerHTML += "<li>" + linkify(tweet.text);
        document.getElementById('twitter_status').innerHTML += relativeTime(tweet.created_at) +"</li>";

   }
   }
  document.getElementById('twitter_status').innerHTML += "</ul>"; 
}
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T00:09:48.627

如何构建一个字符串，然后在它完全构建后将其分配给innerHTML（这样您就永远不会注入损坏的html）。一点一点地把坏掉的 html 烧到浏览器里肯定会出问题，因为浏览器不能存储坏掉的 dom 树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:10:36.140

这可能是浏览器特定的问题。我建议先为 innerHTML 构造一个字符串，然后在函数末尾分配它。

IE：

```
var temp = "<ul>";
temp += "<li">;

etc...

document.getElement.innerHTML = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T00:29:53.167

更干净

```
​var ul=document.createElement('ul');
for(i=0;i<len;i++)
{
    var li=document.createElement('li');
    li.innerHTML=linkify(tweet.text)+" "+relativeTime(tweet.created_at);
    ul.appendChild(li);
}

document.getElementById('twitter_status').appendChild(ul); 
```

[这里](http://jsfiddle.net/heera/gyw9c/1/)有一个例子。

# ruby-on-rails - Rails 引擎上的资产重载：需要辅助 gem 资产文件失败

> ID：10115712
> 
> 赞同：6
> 
> 时间：2012-04-12T00:06:58.120
> 
> 标签：ruby-on-rails, asset-pipeline, rails-engines

我正在尝试构建一个“管理后端”Rails 引擎。假设引擎有以下资产：

```
ENGINE/app/assets
├── javascripts
│   └── railsyard
│       ├── admin.js.coffee
│       ├── admin_customizations.js.coffee
... 
```

需要的地方，`admin.js.coffee`即`admin_customizations.js.coffee`准备被托管 Rails 应用程序覆盖的空文件。

```
[ENGINE/app/assets/javascripts/my_engine/admin.js.coffee]
#= require admin_customizations
# ...some code...

[ENGINE/app/assets/javascripts/my_engine/admin_customizations.js.coffee]
# Override this empty file to add custom JS behaviour! 
```

一切都很好，直到我尝试要求一些来自次要宝石的资产：

```
[APP/app/assets/javascripts/my_engine/admin_customizations.js.coffee]
#= require modernizr # this line gets ignored
alert "Foobar"       # this line works 
```

gem`modernizr-rails`是托管应用程序而不是引擎的依赖项。请注意，如果我尝试`modernizr`从不是某些引擎资产文件的覆盖的资产文件中请求，一切都会再次起作用。

有没有办法解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:32:58.293

我相信我已经完全按照您的描述做了，而没有遇到您所说的问题。

你确定没有别的事情发生？*被忽略*的 require 行没有多大意义—— sprockets 应该包含所需的文件，或者如果找不到它则引发。只是默默地什么都不做似乎不对。

您可能会触发 sprockets 或 rails 资产管道使用它的错误 - 但更有可能的是，还有其他事情正在发生。

你确定你没有不小心在本地应用程序和/或引擎中提供了你自己的空白“modernizr.js”文件，不小心覆盖了你想要从modernizr gem 中需要的文件？

sprockets`require`行确实需要位于文件中任何代码之前的注释中，它们必须位于初始的前言注释块中。那会得到你吗？

或者可能不是你认为的其他东西。

我自己实际上并没有使用coffeescript，coffeescript有点奇怪吗？

# linux - Linux 上的 Ada 程序：SIGSEGV 由于缺少文件？

> ID：10115714
> 
> 赞同：3
> 
> 时间：2012-04-12T00:07:09.673
> 
> 标签：linux, ubuntu, ada, gnat

我使用以下命令在 Ubuntu 5.4 (GNAT 3.4) 上为 Linux 编译了 Ada 程序：

```
gnatmake -O3 myprogram -bargs -static 
```

然后，当我在 Ubuntu 机器上运行该程序时，它运行良好。但是在另一台机器（Linux 网络服务器）上，当我尝试时收到以下错误消息`strace`：

```
execve("./myprogram", ["./myprogram"], [/* 15 vars */]) = 0
brk(0)                                  = 0x811e000
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
mmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb76f8000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb76f7000
set_thread_area({entry_number:-1 -> 6, base_addr:0xb76f7680, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}) = 0
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++ 
```

这意味着什么？我是否正确理解程序无法运行是因为缺少两个文件（ld.so.nohwcap 和 ld.so.preload）？我怎样才能避免这个错误？编译时是否有可能将这些文件包含到程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:01:37.853

> 这意味着什么？

这意味着您的程序试图取消引用`NULL`指针并死于`SIGSEGV`

> 我是否正确理解程序无法运行是因为缺少两个文件（ld.so.nohwcap 和 ld.so.preload）？

不：这些文件不存在是完全正常的，您的问题与它们无关。

1.  *调试此类问题的*工具是`gdb`. `strace`对这种调试很少有用。
2.  与流行的看法相反，完全静态的可执行文件（如您构建的那个）在 Linux 上的可移植性*较差，然后是动态链接的可执行文件。*特别是，您可能在链接时收到警告，类似于此：

    `Using 'initgroups' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking`

    如果是这样，并且如果您的构建和网络服务器机器上安装的 glibc 版本不同，那么这*正是*您的问题。不要忽略此类警告（并且不要将您的可执行文件与`-static`标志链接）。

更新：

> 是否可以仅将缺少的 libgnat 包含到程序中？

有可能：您要做的是安排最终的链接行如下所示：

```
gcc ... -Wl,-Bstatic -lgnat -Wl,-Bdynamic ... 
```

我不知道如何用`gnatmake`.

另一个可能更简单的替代方案：您是否考虑`libgnat-3.4.so.1`过在服务器上安装？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:57:01.930

您从 strace 看到的输出是尝试在库中链接的动态链接器

1.  我可以向您推荐运行**ldd**这将向您显示依赖项
2.  修复依赖项，如果这不起作用
3.  如果您重新编译它，请使用 -g 标志稍后对其进行调试
4.  如果它仍然没有运行，请使用 gdb 并运行它，如果它使用 SIGSEV 类型退出 where

旁注：始终确保 CPU“完全”相同，否则在新机器上重新编译它并将可执行文件作为二进制文件传输

[很好读的手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?ld.so)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:36:36.043

另请记住，将在一台 Linux 机器（Ubuntu 5.4）上编译的程序移动到另一台（网络服务器）可能具有不同的文件依赖关系。特别是如果它们基于不同的发行版。这是 ld.so.* 文件的描述：[滚动到底部](http://www.tin.org/bin/man.cgi?section=8&topic=ld.so)。

尝试 jimw 的建议并在网络服务器上构建程序。GNAT 3.4 是旧版本，因此它可能无法在网络服务器上使用。还请记住，受雇俄罗斯人的建议 - 不要使用`-static`国旗。您可以尝试在没有标志的情况下在 Ubuntu 上重新编译您的程序`-static`并在网络服务器上运行新版本，但这可能无法解决错误。

如果在网络服务器上重新编译和/或编译它不起作用，你将不得不使用 gdb 来调试你的程序。或者您可以在此处发布部分代码，看看是否有人可以帮助您。

# drupal - Drupal 7：联系表格不可见，尽管有权限

> ID：10115715
> 
> 赞同：3
> 
> 时间：2012-04-12T00:07:20.820
> 
> 标签：drupal, drupal-7, drupal-modules

因此，我通过联系人模块启用了站点范围和用户联系表单，在所有角色的联系人权限下启用了所有权限（为了很好的衡量标准）。当我登录到我的管理员帐户时，所有用户都可以访问联系表单选项卡，但不会出现任何其他用户角色。

我搜索了整个 Drupal 论坛，只能找到犯了忘记更改权限或启用个人用户联系表的错误的人。我已经刷新了所有缓存并运行更新，完成了我能想到的一切。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T01:50:58.133

在授予 Authenticated 权限方面，我遇到了一个非常相似的问题，`Use users' personal contact forms`然后登录并转到`user`// in 。`[uid]``contact results``Access Denied`

只是我没有意识到每个用户都必须选择通过个人联系表进行联系。

编辑 - 在@tanius 下面的评论中提供了一些代码的链接，这些代码可用于将“选择加入”的设置大规模更新为个人联系表格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T02:18:14.273

使用代码授予站点范围内的联系表格权限：-

```
<?php
function mymodule_menu_alter(&$menu)
{
  if(isset($menu['contact']))
  {
    $menu['contact']['access callback'] = TRUE;
  }
}
?> 
```

*** mymodule 是您的自定义模块名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T02:06:58.607

如果您触发洪水过滤器，您还将获得拒绝访问页面。您应该会收到一条系统消息，说“您不能在 1 小时内发送超过 5 条消息。请稍后再试。”，它甚至会阻止您通过访问被拒绝文本看到该页面。

如果是这种情况，您可以通过转到泛洪表并删除其中的一些条目来解决它。它基于 IP 地址，因此只需删除其中的一些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T14:36:02.250

尝试这个 ：

1) 转到管理员/结构/块 2) 找到您的联系表块 3) 单击配置 4) 检查可见性设置选项 - 角色

确保未选择任何内容，以便将其显示给所有角色。

希望这可以帮助。

干杯，维沙尔

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-13T22:22:15.760

我遇到过同样的问题。这就是我所做的。

转到结构-> 块

在这里找到“主要内容”并从下拉菜单中选择“内容”字段。保存您的设置并检查。

# objective-c - AVFoundation 捕获 UIImage

> ID：10115716
> 
> 赞同：8
> 
> 时间：2012-04-12T00:07:41.067
> 
> 标签：objective-c, ios, xcode, avfoundation

我正在尝试使用 AVFoundation 以编程方式捕获一个或多个 UIImage。我设置了会话和输入设备以及所有内容，但是当我尝试找到有关如何实际拍摄照片的解释时，我得到的只是有关连接的缓冲信息以及其他信息。我找不到一个实际拍摄照片并将其保存到 UIImage 以供进一步处理的示例。`kCGImagePropertyExifDictionary`所有示例都使用了一个在 iOS 5 SDK 中似乎不存在的常量。

有人可以为我提供代码或从上到下的解释，说明如何使用 AVFoundation 从前置摄像头拍摄图像并将其保存到 UIImage 吗？

非常感谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-13T05:04:49.047

要使用`kCGImagePropertyExifDictionary`，你应该`#import <ImageIO/ImageIO.h>`。

您寻求的所有其他信息都在 AVFoundation 编程指南中——尤其是[媒体捕获](https://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)部分。

# wcf - 列表 基于 WCF 的类的 .FindAll() 委托问题

> ID：10115718
> 
> 赞同：0
> 
> 时间：2012-04-12T00:07:53.597
> 
> 标签：wcf, list, serialization, delegates

我有一类“客户”，例如：

```
[DataContract]
public class Customer 
{
    [DataMember]
    public CustomerID {get; set;}
    [DataMember]
    public Name {get; set;}
} 
```

在我的客户中，我得到一个 List，然后我想在其上使用其中一种 .Find() 方法：

```
List<WCFService.Customer> customers = WCFService.CustomerClient.GetCustomers();
WCFService.Customer customer = customers.Find 
    (delegate (WCFService.Customer thisCustomer)
    {
         return thisCustomer.Name == "fred";
    }); 
```

然而，在单步执行代码时，“thisCustomer”对象永远不会有值。

我假设这与创建类时的序列化有关，但我想知道是否有一些简单的方法可以解决这个问题，或者可能有更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:02:21.217

我不确定您 GetCustomers 会返回什么，但事情看起来很奇怪。我希望您有一个 WCF 代理实例，您可以调用它来获取客户。

```
var proxy = new WCFService.CustomerClient();

var customers = proxy.GetCustomers();

var singleFred = customers.FirstOrDefault(z => z.Name.ToLowerInvariant() == "fred");

var allFreds = customers.Where(z => z.Name.ToLowerInvariant() == "fred"); 
```

该服务将具有这些方面的方法

```
public interface IMyService
{
   IEnumerable<Customer> GetCustomers();
} 
```

向您的客户端添加服务引用时，您可以通过转到添加引用对话框的高级设置并选择不同的集合类型来选择使用不同的集合类型然后是数组。我会选择 Generic.List。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:15:18.463

你能试试这个稍微简单的代码吗？

```
customers.Find(cust => cust.Name == "fred"); 
```

它有效吗？

# jquery - 有没有办法让 CSS 中的绝对定位基于整个页面而不是可视窗口？

> ID：10115722
> 
> 赞同：0
> 
> 时间：2012-04-12T00:08:40.060
> 
> 标签：jquery, css, html, css-position

我目前有一个运行全屏画布元素的 HTML 页面。在这个画布元素中，我绘制了各种填满页面的东西。随着页面大小的调整，绘制的内容也会调整大小以填满屏幕。但是，一旦达到某个最小尺寸，绘制的东西就不再调整，而是在页面中添加溢出滚动条。

现在，我正在尝试在画布上添加一个新元素，该元素永久固定到相对于画布右下角的位置。`postion:absolute;`在画布重新缩放时，给 div 一个 CSS 样式可以正常工作。但是，一旦页面越过最小尺寸并且画布不再重新缩放，而是出现滚动条，新的 div 就会随着可视窗口继续移动，而不是停留在它应该相对于画布的位置。一旦大小足够小，我就尝试过使用`postion:fixed;`（用 jquery 替换 css），但这似乎也不起作用。

有人有什么建议吗？

最好的，
萨米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:12:33.147

将画布包含在容器 div 中

```
<div class="canvas_container">
    <canvas></canvas>
    <div class="positioned_element"></div>
</div> 
```

在你的 CSS 中

```
.canvas_container{position:relative;}
.positioned_element{position:absolute;bottom:0;right:0;} 
```

这将使定位元素转到父“.canvas_container”的右侧/底部，而不是站点的主体。

# asp.net - 按下 BACK 时如何防止购物车擦拭？

> ID：10115729
> 
> 赞同：0
> 
> 时间：2012-04-12T00:09:23.660
> 
> 标签：asp.net, session

我有一个带有购物车类型场景的 ASP.NET 应用程序。

我担心用户通过按 BACK 或 REFRESH 来清除他们的购物车。有什么方法可以防止这种情况？

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            //do stuff...

            //create a new list of items/ eg,  blank cart
            Session["shoppingcart"] = new List<InventoryItem>();
        }
    } 
```

我希望他们第一次到达页面时有一个空的购物车。（在这种情况下，他们订购的商品从不超过 20 件，所以我不担心 Session 变量过满）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T00:12:18.547

如果您不希望清除购物车，请不要创建新的购物车（如果已经存在）。

尝试：

```
protected void Page_Load(object sender, EventArgs e)
{
    // ensure a shopping cart has been created
    if (Session["shoppingcart"] == null)
        Session["shoppingcart"] = new List<InventoryItem>();

    if (!Page.IsPostBack)
    {
        //do stuff...
    }
} 
```

# php - 电子邮件正文中的 PHP 变量

> ID：10115732
> 
> 赞同：-1
> 
> 时间：2012-04-12T00:10:20.690
> 
> 标签：php, sql, email

我正在尝试在 php 中为电子邮件正文分配一个变量，但不工作。

```
$refer=$_POST['refer'];
send_mail(  'admin@auto-sal.es',
                    $_POST['email'],
                    'Invitation from ' .$name,
                    'Hi ".$refer."\n\n join me at auto-sal.es and get 1 month free membership'); 
```

![在此处输入图像描述](../Images/95be7195220824e2d00b99e3c9e1080f.png)

我尝试使用双引号而不是单引号，但没有任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T00:11:54.593

尝试这个：

```
"Hi \"$refer\"\n\n join me at auto-sal.es and get 1 month free membership"); 
```

您将字符串括在单引号中。单引号与双引号的工作方式不同。如果您将`"`or 变量放在单引号内，它们将按字面意思解释，这就是发生在您身上的事情。

您还应该查看[官方文档](http://php.net/manual/en/language.types.string.php)，其中指出：

> 与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T00:12:29.377

需要是：

```
'Hi '.$refer.'\n\n 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T00:13:53.997

正确的字符串 concat 是：

```
"Hi ".$refer."\\n\\n join me at auto-sal.es and get 1 month free membership" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T00:12:21.083

双引号实际上应该可以解决问题。像这样：

```
"Hi $refer,\n\n join me at auto-sal.es and get 1 month free membership"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T00:13:03.853

```
'Hi '.$refer.'\n\n join me at auto-sal.es and get 1 month free membership') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-12T00:14:09.593

您是否尝试在代码中执行此操作？

```
'.$refer.' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-12T00:15:28.450

```
'Hi' . $refer . "\n\n" . ' join me at auto-sal.es and get 1 month free membership.' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-12T00:16:11.813

具体来说，您的外部单引号意味着除了其他单引号之外的所有内容都将被解释为纯字符，因此您在 .$refer. 周围的双引号以及 .$refer。本身，按原样通过。上面的所有答案都以不同的方式解决了问题，但基本上它们都确保您的 $refer 变量被解释为要插入到字符串中的变量，而不是单词旁边的美元符号。任何答案都将非常适合您的目的。

# algorithm - D*Lite 的优化伪代码

> ID：10115739
> 
> 赞同：0
> 
> 时间：2012-04-12T00:11:12.787
> 
> 标签：algorithm, d-star

我正在查看 DLite 的优化版本：

```
procedure CalculateKey(s)
{01”} return [min(g(s), rhs(s)) + h(s_start, s) + km;min(g(s), rhs(s))];

procedure Initialize()
{02”} U = ∅;
{03”} km = 0;
{04”} for all s ∈ S rhs(s) = g(s) = ∞;
{05”} rhs(s_goal) = 0;
{06”} U.Insert(s_goal, [h(s_start, s_goal); 0]);

procedure UpdateVertex(u)
{07”} if (g(u) != rhs(u) AND u ∈ U) U.Update(u,CalculateKey(u));
{08”} else if (g(u) != rhs(u) AND u /∈ U) U.Insert(u,CalculateKey(u));
{09”} else if (g(u) = rhs(u) AND u ∈ U) U.Remove(u);

procedure ComputeShortestPath()
{10”} while (U.TopKey() < CalculateKey(s_start) OR rhs(s_start) > g(s_start))
{11”} u = U.Top();
{12”} k_old = U.TopKey();
{13”} k_new = CalculateKey(u));
{14”} if(k_old < k_new)
{15”}   U.Update(u, k_new);
{16”} else if (g(u) > rhs(u))
{17”}   g(u) = rhs(u);
{18”}   U.Remove(u);
{19”}   for all s ∈ Pred(u)
{20”}   if (s != s_goal) rhs(s) = min(rhs(s), c(s, u) + g(u));
{21”}   UpdateVertex(s);
{22”} else
{23”}   g_old = g(u);
{24”}   g(u) = ∞;
{25”}   for all s ∈ Pred(u) ∪ {u}
{26”}   if (rhs(s) = c(s, u) + g_old)
{27”}     if (s != s_goal) rhs(s) = min s'∈Succ(s)(c(s, s') + g(s'));
{28”}   UpdateVertex(s);

procedure Main()
{29”} s_last = s_start;
{30”} Initialize();
{31”} ComputeShortestPath();
{32”} while (s_start != s_goal)
{33”} /* if (g(s_start) = ∞) then there is no known path */
{34”}   s_start = argmin s'∈Succ(s_start)(c(s_start, s') + g(s'));
{35”}   Move to s_start;
{36”}   Scan graph for changed edge costs;
{37”}   if any edge costs changed
{38”}     km = km + h(s_last, s_start);
{39”}     s_last = s_start;
{40”}     for all directed edges (u, v) with changed edge costs
{41”}       c_old = c(u, v);
{42”}       Update the edge cost c(u, v);
{43”}       if (c_old > c(u, v))
{44”}         if (u != s_goal) rhs(u) = min(rhs(u), c(u, v) + g(v));
{45”}       else if (rhs(u) = c_old + g(v))
{46”}         if (u != s_goal) rhs(u) = min s'∈Succ(u)(c(u, s') + g(s'));
{47”}       UpdateVertex(u);
{48”}     ComputeShortestPath() 
```

我无法猜测为什么在第 44 行和第 46 行评估相同的条件（如果 u ~= s_goal）。在输入第 43 行和第 45 行中出现的 if/if else 之前，是否无法对此进行评估？可能是：

```
if  (u != s_goal)
if (c_old=c(u,v))
  rhs(u)=min(rhs(u),c(u,v)+g(v));
elseif (rhs(u)=c_old + g(v))
  rhs(u)=min_s'(c(u,s')+g(s')) 
```

会错吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:26:07.250

这看起来好像它会起作用，但如果`u`只是`s_goal`很少，那么您几乎每次迭代都添加了一个测试，`rhs`不需要更新以在空间和时间上节省一些指令。

# javascript - 使用 Javascript 在 localStorage 中存储大型整数数组的最有效方法

> ID：10115745
> 
> 赞同：13
> 
> 时间：2012-04-12T00:12:03.157
> 
> 标签：javascript, html, local-storage, web-storage

> *这里的“高效”基本上是指较小的尺寸（以减少 IO 等待时间）和快速的检索/反序列化时间。存储时间并不那么重要。

我必须在浏览器的 localStorage 中存储几十个整数数组，每个数组都有 0-50 范围内的 1800 个值 - 即作为字符串。

`JSON.stringify`显然，考虑到数据的范围是众所周知的，最简单的方法是直接添加很多不必要的信息。这些数组之一的平均大小约为 5500 字节。

这是我尝试过的其他一些方法（结果大小，以及最后反序列化 1000 次的时间）

*   对数字进行零填充，因此每个数字长 2 个字符，例如：

    ```
    [5, 27, 7, 38] ==> "05270738" 
    ```

*   以 50 为基数对其进行编码：

    ```
    [5, 11, 7, 38] ==> "5b7C" 
    ```

*   仅使用该值作为字符代码（添加 32 以避免在开始时出现奇怪的控制字符）：

    ```
    [5, 11, 7, 38] ==> "%+'F" (String.fromCharCode(37), String.fromCharCode(43) ...) 
    ```

这是我的结果：

```
 size     Chrome 18   Firefox 11
-------------------------------------------------
JSON.stringify    5286          60ms         99ms
zero-padded       3600         354ms        703ms
base 50           1800         315ms        400ms
charCodes         1800          21ms        178ms 
```

我的问题是是否有更好的方法我还没有考虑过？

**更新**
MДΓΓБДLL 建议对数据使用压缩。[将此 LZW 实现](https://stackoverflow.com/a/294421/9021)与基数 50 和 charCode 数据相结合。我还测试了 aroth 的代码（将 4 个整数打包成 3 个字节）。我得到了这些结果：

```
 size     Chrome 18   Firefox 11
-------------------------------------------------
LZW base 50       1103         494ms        999ms
LZW charCodes     1103         194ms        882ms
bitpacking        1350        2395ms        331ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:01:22.837

如果您的范围是 0-50，那么您可以将 4 个数字打包成 3 个字节（每个数字 6 位）。这将允许您使用 ~1350 字节存储 1800 个数字。这段代码应该这样做：

```
window._firstChar = 48;

window.decodeArray = function(encodedText) {
    var result = [];
    var temp = [];

    for (var index = 0; index < encodedText.length; index += 3) {
        //skipping bounds checking because the encoded text is assumed to be valid
        var firstChar = encodedText.charAt(index).charCodeAt() - _firstChar;
        var secondChar = encodedText.charAt(index + 1).charCodeAt() - _firstChar;
        var thirdChar = encodedText.charAt(index + 2).charCodeAt() - _firstChar;

        temp.push((firstChar >> 2) & 0x3F);    //6 bits, 'a'
        temp.push(((firstChar & 0x03) << 4) | ((secondChar >> 4) & 0xF));  //2 bits + 4 bits, 'b'
        temp.push(((secondChar & 0x0F) << 2) | ((thirdChar >> 6) & 0x3));  //4 bits + 2 bits, 'c'
        temp.push(thirdChar & 0x3F);  //6 bits, 'd'

    }

    //filter out 'padding' numbers, if present; this is an extremely inefficient way to do it
    for (var index = 0; index < temp.length; index++) {
        if(temp[index] != 63) {
            result.push(temp[index]);
        }            
    }

    return result;
};

window.encodeArray = function(array) {
    var encodedData = [];

    for (var index = 0; index < dataSet.length; index += 4) {
        var num1 = dataSet[index];
        var num2 = index + 1 < dataSet.length ? dataSet[index + 1] : 63;
        var num3 = index + 2 < dataSet.length ? dataSet[index + 2] : 63;
        var num4 = index + 3 < dataSet.length ? dataSet[index + 3] : 63;

        encodeSet(num1, num2, num3, num4, encodedData);
    }

    return encodedData;
};

window.encodeSet = function(a, b, c, d, outArray) {
    //we can encode 4 numbers in 3 bytes
    var firstChar = ((a & 0x3F) << 2) | ((b >> 4) & 0x03);   //6 bits for 'a', 2 from 'b'
    var secondChar = ((b & 0x0F) << 4) | ((c >> 2) & 0x0F);  //remaining 4 bits from 'b', 4 from 'c'
    var thirdChar = ((c & 0x03) << 6) | (d & 0x3F);          //remaining 2 bits from 'c', 6 bits for 'd'

    //add _firstChar so that all values map to a printable character
    outArray.push(String.fromCharCode(firstChar + _firstChar));
    outArray.push(String.fromCharCode(secondChar + _firstChar));
    outArray.push(String.fromCharCode(thirdChar + _firstChar));
}; 
```

这是一个简单的例子：http: [//jsfiddle.net/NWyBx/1](http://jsfiddle.net/NWyBx/1)

请注意，通过对结果字符串应用 gzip 压缩，可能会进一步减小存储大小。

或者，如果您的数字顺序不重要，那么您可以简单地使用 51 个存储桶进行存储桶排序（假设 0-50 包括 0 和 50 作为有效数字）并存储每个存储桶的计数而不是数字本身. 与任何其他方法相比，这可能会为您提供更好的压缩和效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:32:07.423

假设（如在您的测试中）压缩所花费的时间比减小大小为您节省的时间更多，那么您的 char 编码是您在没有位移的情况下获得的最小编码。您当前为每个数字使用一个字节，但如果保证它们足够小，您可以在每个字节中放置两个数字。这可能是过度优化，除非这是您的代码中非常热门的一段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:52:49.103

您可能要考虑使用`Uint8Array`or `ArrayBuffer`。[这篇博文](http://langweiligeszeug.tumblr.com/post/15735711576/arraybuffer-blob-binarystring-conversion)展示了它是如何完成的。复制他的逻辑，这里有一个例子，假设你有一个现有的`Uint8Array`名为`arr`.

```
function arrayBufferToBinaryString(buffer, cb) {
    var blobBuilder = new BlobBuilder();
    blobBuilder.append(buffer);
    var blob = blobBuilder.getBlob();
    var reader = new FileReader();
    reader.onload = function (e) {
        cb(reader.result);
    };
    reader.readAsBinaryString(blob);
}
arrayBufferToBinaryString(arr.buffer, function(s) { 
  // do something with s
}); 
```

# visual-c++ - 如何使这条路径查找 C++ 代码成为动态的，以便代理可以自行搜索路径

> ID：10115746
> 
> 赞同：0
> 
> 时间：2012-04-12T00:12:04.093
> 
> 标签：visual-c++

如何使此路径查找 C++ 代码变为动态，以便代理可以自行搜索路径（从网格的一个角到另一个角），但除非移动到网格，否则代理无法看到。我是 C++ 新手，并尝试制作这个小程序，但它似乎是静态的，我需要帮助，以便我可以将其更改为动态，或者代理可以自己进行路径搜索，而不是通过分配路径，到目前为止我制作了 5 条不同的路径，因为代理可以选择任意多的路径，但路径长度应为 6，并且只能向上或向右移动。任何帮助将不胜感激。提前致谢

```
 #include <iostream> 
#include <ctime> 
#include <cstdlib>
#include <iomanip>
#include <math.h>
#include <ctime>
#include <fstream>
#include <vector>
#include <iterator>
#include <algorithm>
using namespace std;

using namespace std;
using namespace System;
using namespace System::IO;

/*int Grid[ 4 ][ 4 ] = 
{
    { 29, 8, 11, 9 },
    { 22, 24, 3, 15 },
    { 24, 26, 5, 6 },
    { 33, 10, 32, 21}
};
int Grid[ 4 ][ 4 ] = 
    {
    { 0, 0, -5, 0.0 },
    { -1, 0, 2, 2 },
    { 2, 0, 0, 0 },
    { 0, 2, 0, -1}
    };
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++   
    */
int g[16] = {33,10,32,21,24,26,5,6,22,24,3,15,29,8,11,9};
int r[16] = {0,2,0,-1,2,0,0,0,-1,0,2,2,0,0,-5,0};

#define SPACE "[   ]" 

bool Finished( false );
int m[4];
//int E = 6;
int E, E1, E2, E3;

void printmatrix(char arg[], int length)
{

    for (int j = length; j >= 0; j=-4)
    {
    cout <<"\n" << arg[j] << "\n ";

    }   
    //}
}
void FindNextPos()
{       std::cout<<"\n"<<"Search Path 1"<<"\n";
    for (int c= 1; c < 5; c++)
        {   if(r[c] != r[3])
                {   
                    m[c] = 1;
                    E = E + r[c] - 1;

//std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E <<")"<<m[c]<< std::endl;

                    //system("pause");
                }
    else 
                {
                Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E <<")"<<m[c]<< std::endl;
                }
    }

        for (int c= 7; c <= 16; c= c+ 4)
                {   
                    if(r[c] != r[16]){
                    m[c] = 2;
                    E = E + r[c] - 1;
    //std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E <<")"<< std::endl;

                    //system("pause");
                }
    else 
                {
                //m[c] = 2;
                Finished = true;
    std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E <<")"<< std::endl;
                }
}
        }

//int E1 = 6;
void nextpos1(){ 

    std::cout<<"\n"<<"Search Path 2"<<"\n";
for (int c= 0; c < 3; c++)
        {   if(r[c] != r[3])
                {   
                    m[c] = 3;
                    E1 = E1 + r[c] - 1;
    std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E1 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E1 <<")"<< std::endl;
                }
    }

        for (int c= 6; c < 15; c= c + 4)
                {   
                    if(r[c] != r[16]){
                    m[c] = 4;
                    E1 = E1 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E1 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                        m[c] = 4;
                Finished = true;
std::cout<<"(ID,C,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E1 + r[c] - 1 <<")"<< std::endl;
                }
        }
        for (int c= 15; c < 16; ++c)
                {   
                    if(r[c] != 0){
                    m[c] = 5;
                    E1 = E1 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E1 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                        m[c] = 5;
                Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E1 <<")"<< std::endl;
std::cout << "\n"<<"finish-->" << r[c] << "\t" <<"E1-->"<< E1 <<"\n" ;
                }
        }
}
    //int E2 = 6;
void nextpos2(){ 
        std::cout<<"\n"<<"Search Path 3"<<"\n";
for (int c= 0; c < 2; c++)
        {   if(r[c] != r[3])
                {   
                    m[c] = 6;
                    E2 = E2 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E2 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E2 <<")"<< std::endl;
                }
    }

        for (int c= 1; c < 12; c= c + 4)
                {   
                    if(r[c] != r[14]){
                    m[c] = 7;
                    E2 = E2 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E2 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                        //m[c] = 7;
                Finished = true;
std::cout<<"(C,E)"<<"-->"<<"("<<r[c]<<","<<E2 + r[c] - 1 <<")"<< std::endl;
                }
        }
        for (int c= 13; c < 16; ++c)
                {   m[c] = 8;
                    if(r[c] != r[16]){

                    E2 = E2 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E2 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                    //  m[c] = 8;
                Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E2 <<")"<< std::endl;
std::cout << "\n"<<"finish-->" << r[c] << "\t" <<"E-->"<< E1 <<"\n" ;
                }
        }
}   

//int E3 = 6;
void nextpos3(){ 

    std::cout<<"\n"<<"Search Path 4"<<"\n";
for (int c= 0; c <= 12; c= c+ 4)
    //for (int c= 4; c <= 12; c= c+ 4)
        {   if(r[c] != r[12])
                {   
                    m[c] = 11;
                    E3 = E3 + r[c] - 1;
                    std::cout<<"\n";
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E3 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                m[c] = 11;
                Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E3 + r[c] - 1 <<")"<< std::endl;
                }
    }
    E3 = E3 -1;
        for (int c= 13; c < 16; c++)
                {   
                    if(r[c] != r[15]){
                    m[c] = 12;
                    E3 = E3 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E3 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                        m[c] = 12;
                        Finished = true;
                        std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E3 + r[c] - 1 <<")"<< std::endl;
                }
        }

}   

void nextpos4(){ 
    int E4 = 6;
    std::cout<<"\n"<<"Search Path 5"<<"\n";
for (int c= 4; c <= 8; c= c+ 4)
    //for (int c= 4; c <= 12; c= c+ 4)
        {   if(r[c] != r[8])
                {   cout<<E4;
                    m[c] = 13;
                    E4 = E4 + r[c] - 1;
                    std::cout<<"\n";
                    std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E4 <<")"<< std::endl;
                    //system("pause");
                }
    else 
                {
                m[c] = 13;
                Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E4 + r[c] - 1 <<")"<< std::endl;
                }
    }
    E4 = E4 -1;
        for (int c= 9; c < 12; c++)
                {   
                    if(r[c] != r[11]){
                    m[c] = 14;
                    E4 = E4 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E4 <<")"<< std::endl;
                    //system("pause");
                }
            else 
                {
                        m[c] = 14;
                        Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E3 + r[c] - 1 <<")"<< std::endl;
                }
        }
        for (int c= 11; c < 16; c = c + 4)
                {   
                    if(r[c] != r[15]){
                    //m[c] = 15;
                    E4 = E4 + r[c] - 1;

std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E4 <<")"<< std::endl;
                    //system("pause");
                }
            else 
                {
                        m[c] = 15;
                        Finished = true;
std::cout<<"(ID,R,E)"<<"-->"<<"("<<g[c]<<","<<r[c]<<","<<E4 + r[c] - 1 <<")"<< std::endl;
                }
        }

}   
void PrintRoute( void )
{//std::cout << "Start Node : " << g[0]<<"\t" <<"Finish Node : " << g[15] <<"\n";

std::cout << "\n"<< "Route 1 : "<<"\n";
  for (int c= 1; c < 14; c++)
  {  
        if( m[c] == 1)
            std::cout<< "[r]-->"<<"\t";
            else if (m[c] == 2)
                 std::cout<< "[u]-->"<<"\t";
                    else 
                     std::cout <<"";
   }
    std::cout << "\n";   
}

void PrintRoute1( void )
{//std::cout << "\n"<< "Start Node : " << g[0]<<"\t" << "Finish Node : " << g[15]<<"\n";
std::cout << "\n"<< "Route 2 : "<<"\n";
  for (int c= 1; c < 16; c++)
  {
        if( m[c] == 3 )
            std::cout<< "[r]-->"<<"\t";
            else if (m[c] == 4 )
                 std::cout<< "[u]-->"<<"\t";
            else if (m[c] == 5)
                std::cout<<"[r]-->"<<"\t";
                else 
                     std::cout <<"";
   }

    std::cout << "\n";

}

void PrintRoute2( void )
{//std::cout << "\n"<< "Start Node : " << g[0] <<"\t"<< "Finish Node : " << g[15]<<"\n";
std::cout << "\n"<< "Route 3: "<<"\n";
  for (int c= 0; c < 15; c++)
  {
        if( m[c] == 6 || m[c] == 8 )
            std::cout<< "[r]-->"<<"\t";
            else if (m[c] == 7 )
                 std::cout<< "[u]-->"<<"\t";
            //else if (m[c] == 8)
            //  std::cout<<"[r]"<<"\t";
                else 
                     std::cout <<"";
   }

    std::cout << "\n";
    }

void PrintRoute3( void )
{//std::cout << "Start Node : " << g[0] <<"\t"<< "Finish Node : " << g[15]<<"\n";

std::cout << "\n"<< "Route 4 : "<<"\n";
  for (int c = 0; c <= 15; c++)
  {  
        if( m[c] == 11)
            std::cout<< "[u]-->"<<"\t";
            else if (m[c] == 12)
                 std::cout<< "[r]-->"<<"\t";
                    else 
                     std::cout <<"";
   }
    std::cout << "\n";   
}
void PrintRoute4( void )
{//std::cout << "\n"<< "Start Node : " << g[0]<<"\t" << "Finish Node : " << g[15]<<"\n";
std::cout << "\n"<< "Route 2 : "<<"\n";
  for (int c= 1; c < 16; c++)
  {
        if( m[c] == 13 )
            std::cout<< "[u]-->"<<"\t";
            else if (m[c] == 14 )
                 std::cout<< "[r]-->"<<"\t";
            else if (m[c] == 15)
                std::cout<<"[u]-->"<<"\t";
                else 
                     std::cout <<"";
   }
}

int main( )

{   int E,E1,E2,E3;

    int a, b;
int m[4][4];
ifstream in;
char state1[] = {'d','p','S','1','3'};
printmatrix(state1, 4);
cout<<"open test file : press";
 in.open("C:/Users /test.txt");
        if (!in) {
                cout << "Cannot open file.\n";
                    system("pause");
                return 0;
                 }

     for (b = 1; b <= 4; b++) {cout << "\n";
            for (a = 1; a <= 4; a++) {
                  in >> m[a][b]; 

                 cout <<"\t" << "["<<m[a][b] <<"]" ; 
                                  }
                cout << "\n";
                //
             } 
            in.close();
                std::cout << "\n";  
int mt[6][6];
     cout<<"open training file : press";

             ifstream i;

             i.open("C:/Users/training.txt");
                if (!i) {
                    cout << "Cannot open file.\n";
                    return 0;
                 }
                cout << "\n";

                for (b = 1; b <= 6; b++) {cout << "\n";
                    for (a = 1; a <= 6; a++) {
                             i >> mt[a][b]; 
                             cout <<"\t" << "["<<mt[a][b] <<"]" ; 
                                  }
                        cout << "\n";
                         } 
            i.close();
                std::cout << "\n";  

    system("pause");

    int F = E = E1 = E2= E3;
    std::cout<< "Enter Energy E";
    //std::cin>>E >> E1 >> E2 >> E3 >>E4;
    std::cin>>F;
    std::cout << "Start Node : " << g[0] <<"\t"<< "Finish Node : " << g[15]<<"\n";
    while( !Finished )
        FindNextPos();
        PrintRoute( );
        nextpos1();
        PrintRoute1();
        nextpos2();
        PrintRoute2();
        nextpos3();
        PrintRoute3();
        nextpos4();
        PrintRoute4();
        std::cin.get( );
        system("pause");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:09:15.093

您将需要某种[**寻路算法**](https://www.youtube.com/watch?v=DINCL5cd_w0&feature=related)。

A*（“A-Star”）算法可能是一个很好的起点。[**这个页面**](https://web.archive.org/web/20171022224528/http://www.policyalmanac.org:80/games/aStarTutorial.htm)很好地解释了它。如果 A* 看起来很复杂，您可能想先尝试 Dijkstra 算法。Dijkstra 的算法与 A* 相同，但没有启发式（估计目标成本）。

# maven - 在 maven 中解压 .tgz 文件

> ID：10115752
> 
> 赞同：2
> 
> 时间：2012-04-12T00:12:41.460
> 
> 标签：maven, ant

有没有可以做到这一点的maven插件。目前我正在使用 ant 插件，但我想知道是否还有其他方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:55:50.980

如果您尝试解压缩的[tarball是项目依赖项，那么](http://en.wikipedia.org/wiki/Tar_%28file_format%29)[maven 依赖项插件](http://maven.apache.org/plugins/maven-dependency-plugin/)可以做到这一点。看看[unpack 目标](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:34:57.393

Check out [http://evgeny-goldin.com/wiki/Maven-copy-plugin#Archiving](http://evgeny-goldin.com/wiki/Maven-copy-plugin#Archiving), specifically the unpack option:

*   [http://evgeny-goldin.com/wiki/Maven-copy-plugin#Unpacking_archives:_.3Cunpack.3E](http://evgeny-goldin.com/wiki/Maven-copy-plugin#Unpacking_archives:_.3Cunpack.3E)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T13:27:53.313

`maven-assembly-plugin`可以创建和解压`.tar.gz`文件。我不知道它是否识别`.tgz`扩展名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:12:42.460

没有*标准*的Maven 插件可以做到这一点。

但是，您可以使用 Maven [antrun](http://maven.apache.org/plugins/maven-antrun-plugin/)插件来使用标准 Ant 任务为您进行解包。这就是我遇到类似问题时使用的方法。

有很多私人开发的 Maven 插件可以解包文件，但它们通常在标准的公共存储库中不可用，我宁愿不让我的 Maven 构建过程依赖于某个第三方存储库。太多次，我已经让这些存储库关闭，突然间我无法进行构建。

# install4j - 如何覆盖 sys.programGroup.linkDir？

> ID：10115753
> 
> 赞同：0
> 
> 时间：2012-04-12T00:12:42.740
> 
> 标签：install4j

在 Windows 中，程序组名称可以为空，以便我可以通过编程方式分配名称。但是，“创建程序组操作”中的符号链接目录字段不能留空。有没有其他选择？

顺便说一句，我使用的是 4.2.7 版本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:29:09.667

您可以像这样设置任何安装程序变量：

```
context.setVariable("sys.programGroup.linkDir", "your value"); 
```

# haskell - Haskell并发使用简单的IORef？

> ID：10115756
> 
> 赞同：1
> 
> 时间：2012-04-12T00:12:56.040
> 
> 标签：haskell, concurrency, shared-state, ioref

我一直在问一些关于 Haskell 并发的问题，特别`TVar`是`TVar`.

相反，我提出了这个解决方案。

(1) 将程序中的所有共享数据包装在一个数据结构中，并将其包装在一个`IORef`. (2) 只需使用`atomicModifyIORef`.

我相信这可以防止死锁和活锁（而 TVar 只能防止前者）。此外，因为`atomicModifyIORef`只是将另一个 thunk 链接到一个链中（这是几个指针操作），所以这不是瓶颈。**对数据的所有实际操作都可以并行完成，只要它们不相互依赖即可。**Haskell 运行时系统会解决这个问题。

然而我觉得这太简单了。有没有我错过的“陷阱”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T10:11:58.320

如果以下情况属实，则此设计可能没问题：

*   读取将比写入更普遍
*   写入之间会穿插多次读取
*   （可能）写入只会影响全局数据结构的一小部分

当然，考虑到这些条件，几乎任何并发系统都可以。由于您担心活锁，我怀疑您正在处理更复杂的访问模式。在这种情况下，请继续阅读。

您的设计似乎受到以下推理链的指导：

1.  `atomicModifyIORef`非常便宜，因为它只会产生 thunk

2.  因为`atomicModifyIORef`便宜，不会引起线程争用

3.  廉价数据访问 + 无争用 = 并发 FTW！

这是此推理中缺少的步骤：您的`IORef`修改只会创建 thunk，并且您无法控制评估 thunk 的位置。如果您无法控制评估数据的位置，那么您就没有真正的并行性。

由于您尚未提出预期的数据访问模式，这是推测，但是我预计会发生的情况是您对数据的重复修改将建立一个 thunk 链。然后在某个时候，您将从数据中读取并强制进行评估，从而导致所有这些 thunk 在一个线程中按顺序进行评估。此时，您可能已经编写了单线程代码。

解决此问题的方法是确保在将数据写入 IORef 之前对数据进行评估（至少在您希望的范围内）。这就是返回参数的`atomicModifyIORef`用途。

考虑这些功能，旨在修改`aVar :: IORef [Int]`

```
doubleList1 :: [Int] -> ([Int],())
doubleList1 xs = (map (*2) xs, ())

doubleList2 :: [Int] -> ([Int], [Int])
doubleList2 xs = let ys = map (*2) xs in (ys,ys)

doubleList3 :: [Int] -> ([Int], Int)
doubleList3 xs = let ys = map (*2) xs in (ys, sum ys) 
```

当您将这些函数用作参数时，会发生以下情况：

1.  `!() <- atomicModifyIORef aVar doubleList1`- 只创建一个 thunk，不评估数据。对于从下一个阅读的任何线程来说，这是一个令人不快的惊喜`aVar`！

2.  `!oList <- atomicModifyIORef aVar doubleList2`- 仅评估新列表以确定初始构造函数，即`(:)`or `[]`。仍然没有做任何真正的工作。

3.  `!oSum <- atomicModifyIORef aVar doubleList3`- 通过评估列表的总和，这保证了计算得到充分评估。

在前两种情况下，要做的工作很少，所以`atomicModifyIORef`会很快退出。 *但这项工作并没有在那个线程中完成，现在你不知道它什么时候会发生。*

在第三种情况下，您知道工作是在预期的线程中完成的。首先创建一个 thunk 并更新 IORef，然后线程开始计算总和并最终返回结果。但是假设其他线程在计算总和时读取数据。它可能会开始评估 thunk 本身，现在你有两个线程在做重复的工作。

简而言之，这种设计并没有解决任何问题。它可能在您的并发问题并不困难的情况下工作，但对于您一直在考虑的极端情况，您仍然会在多个线程执行重复工作的情况下燃烧循环。与 STM 不同，您**无法控制**重试的方式和时间。至少 STM 你可以在事务中间中止，通过 thunk 评估它完全不在你的掌控之中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T00:19:17.563

好吧，它不会很好地组成。通过单个 IORef 序列化所有共享内存修改将意味着一次只有一个线程能够修改共享内存，您真正所做的只是创建一个全局锁。是的，它会起作用，但它会很慢，而且远不及 TVar 甚至 MVar 那样灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T02:11:49.267

AFAICT 如果您的计算在对`IORef`内容进行处理后留下未评估的 thunk，则该 thunk 将简单地在任何尝试使用结果的线程中进行评估，而不是按照您的意愿并行评估。`MVar`请参阅文档的陷阱部分， [here](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent-MVar.html)

如果您提供了一个您正在尝试解决的具体问题（或一个简化但类似的问题），它可能对其他人更有趣和更有帮助。

# hudson - 如何防止两个 Jenkins 项目/构建同时运行？

> ID：10115759
> 
> 赞同：32
> 
> 时间：2012-04-12T00:13:42.553
> 
> 标签：hudson, jenkins

我有两个共享数据库的 Jenkins 项目。它们不能同时运行。严格来说，除了非并发之外，它们之间没有特别的依赖关系，但目前我通过在另一个“下游”运行一个“下游”来部分管理这个约束。这在大多数情况下都有效，但并非总是如此。如果在第二个运行时发生源代码控制更改，第一个将再次启动，并且它们将同时运行并且可能都失败了。

[这与如何防止某些 Jenkins 作业同时运行](https://stackoverflow.com/questions/6276272/how-to-prevent-certain-jenkins-jobs-from-running-simultaneously)类似但不完全相同？不同之处在于我没有“线程数”问题——我已经在任何时候最多只运行任何给定项目的一个线程，即使在两个（不同项目）构建 stomp 的情况下彼此。这似乎排除了该线程中的所有几个建议。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-12T04:58:33.003

[Locks and Latches 插件](https://wiki.jenkins-ci.org/display/JENKINS/Locks+and+Latches+plugin)应该可以解决您的问题。创建一个锁并让两个作业使用相同的锁。这将阻止作业同时运行。

1.  在“管理 Jenkins：管理插件”中安装插件。
2.  在“管理 Jenkins：配置系统”中定义（提供名称）您的锁。
3.  对于您要参与排除的每项工作，
    1.  在“：配置：构建环境”中，勾选“锁”，
    2.  并从下拉列表中选择您的锁名称。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-11T15:08:17.283

可[锁定资源插件](https://wiki.jenkins-ci.org/display/JENKINS/Lockable+Resources+Plugin)。2016 年 5 月，对我来说简单且效果很好。

安装插件。在管理 Jenkins > 配置系统中，转到可锁定资源管理器。
选择添加可锁定资源。输入字段值：名称并点击保存。警告：请勿在名称字段中输入空格。

在 Jenkins > *job_name* > Configure > General 中，选择复选框：此构建需要可锁定的资源。在字段值中输入一个或多个名称：资源。

开始构建。在 build # *number*下选择 Locked Resources。您应该会看到类似：此构建已锁定以下资源：*resource_name* - *resource_description*。

启动使用相同资源的不同构建。您将在 Jenkins 状态/菜单中看到显示作业名称的构建队列。悬停文本显示 Started *by*、Waiting for resources *resources_list*、Waiting for *time*。

（也可以使用资源标签/标签）

添加作业配置页面的屏幕截图，因为某些用户似乎存在“此构建需要可锁定资源”不可见的问题：** 当未选中该复选框时，您应该只看到“[_] 此构建需要可锁定资源” [![在此处输入图像描述](../Images/60d2777b7039860c3885bf8d6ab7de93.png)](https://i.stack.imgur.com/boXWr.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-10T23:23:15.440

编辑：以下信息自 2014 年 4 月 10 日起生效

排除插件，[https:](https://wiki.jenkins-ci.org/display/JENKINS/Exclusion-Plugin) //wiki.jenkins-ci.org/display/JENKINS/Exclusion-Plugin 如果很少有构建使用相同的资源 - 例如测试数据库，则非常有用。您需要做的就是使用此资源更新所有作业的配置，因此它们永远不会并行运行，而是等待其他作业完成。

取自：[http ://www.kaczanowscy.pl/tomek/2012-07/jenkins-plugins-part-iii-towards-continuous-delivery](http://www.kaczanowscy.pl/tomek/2012-07/jenkins-plugins-part-iii-towards-continuous-delivery)

这个插件确实阻止了两个或多个作业并行运行。
要测试，请为 job1 执行此操作

1.  配置

2.  在构建环境下选中“添加资源以管理排除”。

3.  然后添加 -> 新资源 -> 名称 -> 锁定

4.  在构建 - > 添加构建步骤

5.  关键块启动

6.  添加构建步骤->添加您想要添加的任何内容。（添加 sleep 15 以确保它持续更长的时间来检查并发性。）

7.  添加构建步骤 -> 关键块结束

8.  对 job2 重复上述步骤，确保使用相同的锁名称“lock”。

9.  同时手动构建两个作业。

10.  在 jenkins -> Exclusion 管理下监控运行进度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-01T10:00:58.270

2021 年 12 月 1 日
使用**Build Blocker**插件，安装自`Manage Jenkins > Plugin Manager` [![使用 Jenkins UI 安装 Blocker 插件](../Images/b13eb29c5eb743a5bbc516e6402d7446.png)](https://i.stack.imgur.com/M39V0.png)

例如，您有两个管道**React-build**和 React **-tests**： 如果我不需要与当前作业**同时**运行，则将其添加到**阻塞列表中**，
`React-build -> Configure -> Block build`
`React-tests`**`React-build`**

 ****也可以使用正则表达式，即避免所有以 开头的项目同时构建`React-`，添加`React-.*`到列表中，

将**React-tests**替换为您不想并行运行的任何管道名称，使用全局或节点级别选项， [![阻止构建设置](../Images/4863d951c7396075f924ef644d66e5e4.png)](https://i.stack.imgur.com/lw69W.png)

当尝试将任何被阻止的作业与配置的`React-build`作业一起运行时，它会进入挂起状态， [![待处理的并发构建](../Images/3a564c0b233dddec34acb9bd06c46032.png)](https://i.stack.imgur.com/RJm3t.png)****

# android - Android - AsyncTask 套接字写入超时

> ID：10115764
> 
> 赞同：3
> 
> 时间：2012-04-12T00:14:18.217
> 
> 标签：android, sockets, timeout, android-asynctask

使用此处发布的示例，我每分钟都会运行一个背景警报：

[警报管理器示例](https://stackoverflow.com/questions/4459058/alarm-manager-example)

我的实际警报会启动一个 AsyncTask（因为我正在进行网络事务），如下所示：

```
Socket sock = new Socket("hostname.com", 1234);
        OutputStream out = sock.getOutputStream();
        String data = "beth";
        out.write(data.getBytes());
        sock.close(); 
```

如果网络连接不稳定，使此超时的最简单方法是什么？我已经在检查手机是否连接到 wifi。

setSoTimeout 看起来与我想要使用的类似，但它似乎仅适用于接收内容的套接字。如果连接失败，我希望连接在几秒钟后放弃。

**回应第一条评论：**

在我跑步之前：

```
new Checkin().execute(); 
```

我现在是否运行：

```
new Checkin().get(10000, TimeUnit.MILLISECONDS); 
```

10秒后超时？这将在 10 秒后停止异步任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-15T07:22:36.030

使用 connect() 方法

```
Socket socket = new Socket();
socket.connect(new InetSocketAddress(ipAddress, port), 10000); 
```

# mysql - 我可以将这些嵌套查询作为一个查询运行吗？如何处理返回的信息？

> ID：10115766
> 
> 赞同：0
> 
> 时间：2012-04-12T00:14:32.990
> 
> 标签：mysql

我从未将 MySQL 用于涉及许多表的任何事情。当我有时，我已经嵌套查询以获取我需要的信息。

当我想输出一些博客`posts`及其相关的`comments`.

表格可能如下所示（简化以保持问题简短）：

> **帖子：**           `id | title | content`
> **评论：**   `id | post_id | author | content`

`comments.post_id`显然是与哪里相关的`post.id`。

然后我会输出这样的帖子和评论（我通常会再扩展一点查询，但再次想保持问题简短）：

```
// Get posts.
$posts = mysql_query("SELECT * FROM posts ORDER BY id DESC");

while($prow = mysql_fetch_assoc($posts))
{
    $pid = $prow["id"];

    // Write post.
    echo '
        <h2 id="post' . $pid . '">' . $prow["title"] . '</h2>
        <p>' . $prow["content"] . '</p>';

    // Get related comments.
    $cquery = mysql_query("SELECT * FROM comments WHERE post_id = '$pid' ORDER BY id DESC");

    while($crow = mysql_fetch_assoc($cquery))
    {
        $cid = $crow["id"];

        // Write comment.
        echo '<p id="comment' . $cid . '"><strong>' . $crow["author"] . ':</strong> ' . $crow["content"] . '</p>';
    }
} 
```

据我所知，这意味着如果我有 10 篇博文，则将有 11 个查询（1 个用于帖子，然后额外查询每个帖子的评论）。这似乎不太正常。

我确信有一种方法可以创建一个查询，它将选择帖子以及相关评论多合一，我只是不知道正确的方法是什么。我隐约听说过联接，但是当我读到它们时，它们对我来说并没有多大意义。

最终得到大致如下的东西会很好：

```
$query = mysql_query("
    SELECT
        posts.id,
        posts.title,
        posts.content,
        comments.id,
        comments.author,
        comments.content
    FROM
        posts,
        comments
    WHERE
        comments.post_id = post.id,
"); 
```

然后我可以做这样的事情：

```
while($row = mysql_fetch_assoc($query))
{
    echo '
        <h2 id="post' . $row["posts.id"] . '">' . $row["posts.title"] . '</h2>
        <p>' . $row["posts.content"] . '</p>';

    // Somehow iterate over the comments and display them.
    //
} 
```

我希望我能正确解释我想要实现的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:18:40.070

我认为您的方式可行（至少在 MS SQL 中可以），但标准方式是使用连接：

```
SELECT
    posts.id AS post_id,
    posts.title,
    posts.content,
    comments.id AS comment_id,
    comments.author,
    comments.content
FROM posts
INNER JOIN comments ON comments.post_id = post.id
ORDER BY post_id, comment_id DESC 
```

# php - 使用来自 javascript 的 for 循环值和 php 变量

> ID：10115768
> 
> 赞同：0
> 
> 时间：2012-04-12T00:15:03.073
> 
> 标签：php, javascript

我有这段代码在javascript中执行一个for循环，里面有一个php数组。无论如何，我可以将变量用于 php 变量内部的循环。这一切都在 php.ini 中。

```
echo '<script>
for (var i =0; i<4;i++){

alert("hey"'.$phparr[i].');

}</script>'; 
```

我知道这行不通，因为 $phparr 是一个 php 变量，而 i 是一个 javascript 变量，无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:34:06.833

尝试：

```
<script>    
    var phparr = <?php echo json_encode($phparr); ?>;

    for (i in phparr){

        alert("hey" + phparr[i]);

    }
</script> 
```

PHP 是一种[服务器端语言](http://en.wikipedia.org/wiki/Server-side_scripting)，这意味着它在到达客户端（浏览器）之前执行。

JavaScript 是一种[客户端语言](http://en.wikipedia.org/wiki/Client-side_scripting)，这意味着它在浏览器（客户端）中执行。

对于新的 Web 开发人员来说，最好的工具是 Google 搜索。 [了解如何有效搜索。](http://support.google.com/websearch/bin/answer.py?hl=en&answer=134479)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:51:32.700

您快到了。为了在 javascript 中访问 php 数组，您首先必须将 php 数组回显到 javascript 数组中。尝试：

```
$phparr_imploded = implode(',',$phparr);
echo '
    <script>
        var arr = ['.$phparr_imploded.'];
        for (var i =0; i<4;i++){
            alert("hey"+arr[i]);
        }
    </script>
'; 
```

如果您的 php 数组来自数据库，或者包含 javascript 可能会误解的特殊字符，请确保在输出前进行清理。

您的 php 数组字符串中的对象是什么？如果是这样，您需要在 implode 之前用转义引号包围对象。

```
for($i=0; i<count($phparr); $i++){
    $phparr[i] = '"'.$phparr[i].'"';
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T00:29:36.100

您的基本问题是您忘记了 PHP 代码和 JavaScript 代码*不会同时执行*。PHP 运行完成，输出 HTML 和 JavaScript。然后浏览器运行 JavaScript。如果 JavaScript 需要动态访问 PHP 变量（包括数组）中的数据，那么 PHP 需要生成 JavaScript 以声明 JavaScript 结构中的数据。这就是所有其他答案正在做的事情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T00:20:55.097

如何将 PHP 数组存储在 Javascript 变量中并按照 kpotehin 的建议进行循环？

```
<script>
var i = 0, name;
var myArr = <?php echo json_encode($my_array); ?>;

while (name = myArr[i++]){
  alert("hey " + name);
}
</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T00:21:19.573

你应该这样做：

```
var arr = ["<?php echo implode('","',$array); ?>"];
for (var i =0; i<4;i++){
alert("hey"+ arr[i]);
} 
```

# c# - 类似于 java 中的 C# .NET 通用列表的东西

> ID：10115769
> 
> 赞同：12
> 
> 时间：2012-04-12T00:15:14.810
> 
> 标签：c#, java, .net

java中的ac#.net通用列表如何？

像这样的东西：

```
public class ClientList : List<Client> { } 
```

* * *

Nikil 的答案是完美的，我只想添加到任何想要从列表中创建类的人：

```
public class ClientList extends ArrayList<Client> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-12T00:18:03.760

Java的List接口（java.util.List）可以被泛型化。换句话说，可以给 List 的实例一个类型，因此只有该类型的实例可以插入该 List 并从该 List 中读取。这是一个例子：

```
List<String> list = new ArrayList<String>(); 
```

此列表现在仅针对 String 实例，这意味着只能将 String 实例放入此列表中。如果您尝试将其他内容放入此列表中，编译器会抱怨。

泛型类型检查仅在编译时存在。在运行时，可以调整您的代码，以便字符串列表具有插入字符串的其他对象。不过，这是个坏主意。

**访问通用列表**

您可以像这样获取和插入通用 List 的元素：

```
List<String> list = new ArrayList<String>();

String string1 = "a string";
list.add(string1);

String string2 = list.get(0); 
```

请注意，不必像通常需要的那样强制转换从 List.get() 方法调用中获得的对象。编译器知道这个 List 只能包含 String 实例，因此不需要强制转换。

**迭代一个通用列表**

您可以使用迭代器迭代通用列表，如下所示：

```
List<String> list = new ArrayList<String>();

Iterator<String> iterator = list.iterator();

while(iterator.hasNext()){
    String aString = iterator.next();
} 
```

请注意，没有必要强制转换从 iterator.next() 下次调用返回的对象。因为 List 是通用的（具有类型），编译器知道它包含 String 实例。因此没有必要强制转换从它获得的对象，即使它来自它的迭代器。

您还可以使用新的 for 循环，如下所示：

```
List<String> list = new ArrayList<String>();

for(String aString : list) {
    System.out.println(aString);
} 
```

注意字符串变量是如何在 for 循环的括号内声明的。对于每次迭代（列表中的每个元素），此变量都包含当前元素（当前字符串）。

# jsf - 当行编辑器存在时，行扩展组件在扩展时提交表单

> ID：10115775
> 
> 赞同：1
> 
> 时间：2012-04-12T00:16:48.160
> 
> 标签：jsf, jsf-2, primefaces

我的网页如下所示：

```
<h:form>

<p:dataTable var="car" value="#{tableBean.carsSmall}">

    <f:facet name="header">
         Expand rows to see detailed information
    </f:facet>

    <p:column style="width:16px">
        <p:rowToggler />
    </p:column>

    <p:column style="width:250px">
        <f:facet name="header">
                Model
        </f:facet>
        <h:outputText value="#{car.model}" />
    </p:column>

    <p:column style="width:250px">
        <f:facet name="header">
                Year
        </f:facet>
        <h:outputText value="#{car.year}" />
    </p:column>

    <p:rowExpansion>
    <p:fieldset legend="Detail">
    <p:dataTable value="#{car.colors}" var="color">
        <p:column>
            <p:cellEditor>
                <f:facet name="output">
                <h:outputText value="#{color.disable}" />
                </f:facet>
                <f:facet name="input">
                <h:selectBooleanCheckbox value="#{color.disable}" />
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Edit">
            <p:rowEditor />
        </p:column>

    </p:dataTable>
     </p:fieldset>
    </p:rowExpansion>
</p:dataTable>
</h:form> 
```

该组件会自动更新数据库中的错误值，例如，它在扩展行时将 color.disable 属性设置为 false。

我在用：

JSF 2.0.9 Primefaces 2.2.1

# javascript - 函数调用一次，但触发多次

> ID：10115779
> 
> 赞同：3
> 
> 时间：2012-04-12T00:17:31.890
> 
> 标签：javascript, phantomjs

以下是 PhantomJS 脚本的片段。它跟踪 AJAXd 网页上的动态内容。track() 被调用一次，但由于某种原因 page.open() 被调用了 3 次

```
 function track(url){
        console.log('Tracking',url);
        var page = require('webpage').create();
        console.log('check2')
        if(page){
            console.log('check4');
            page.open(url, function (status) {
                console.log('check3');
                if (status !== 'success') {
                    console.log('Unable to load the address!');
                    setTimeout(function(){start();},1000);
                    setTimeout(function(){page.release();},5000);
                }
                else {
                    console.log('check');
                    var i = 0;
                    var last_winner = false;
                    var logged_once = false;
                    var interval = false;
                    if(!interval){
                        interval = setInterval(function(){
                            var scraping = scrape(page);
                            var date = new Date();
                            var time = date.getTime();
                            if(scraping){/*Bunch of console logs*/}
                            else{
                                console.log('Bidding ended');
                                clearInterval(interval);
                                setTimeout(function(){start();},1000);
                                setTimeout(function(){page.release();},5000);
                            }
                            scraping = false;
                       },1000);
                    };
                };
            });
        };
    }; 
```

将以下内容记录到控制台：

```
Tracking http://www.google.com
check2
check4
check3
check
check3
check
check3
check 
```

出于某种原因，我无法弄清楚， page.open() 被调用了 3 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:27:59.040

显然，如果页面上加载了重定向或 iFrame，PhantomJS 会多次调用 page.open。

在 PhantomJS 错误跟踪器上有一些关于如何处理的建议。

[http://code.google.com/p/phantomjs/issues/detail?id=353&q=open%20callback](http://code.google.com/p/phantomjs/issues/detail?id=353&q=open%20callback)

# c# - 使用所有 ASP.NET 用户填充 Html.Listbox

> ID：10115782
> 
> 赞同：1
> 
> 时间：2012-04-12T00:18:00.753
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在尝试创建一个列表框将包含我所有的 ASP.NET 用户的页面。

但是，我在尝试使 Html.Listbox 接受用户列表时遇到了很多问题。

我试过这样做：

```
<%: Html.ListBox("Membershipusers", Membership.GetAllUsers())%> 
```

以及与此类似的无数其他方法。我的控制器上还有一个方法，如下所示：

```
 public ActionResult getAllMembershipUsers()
    {
        MembershipUserCollection membershipusers = new MembershipUserCollection();

        membershipusers = Membership.GetAllUsers();

        return View(membershipusers);
    } 
```

它似乎能够创建用户列表，但我仍然不知道如何在我的列表框中显示该列表。

希望有人可以在这里帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:37:42.190

使用视图模型怎么样？你试过这种方法吗？

```
public class UsersViewModel
{
    public IEnumerable<string> SelectedUsers { get; set; }
    public IEnumerable<SelectListItem> AvailableUsers { get; set; }
} 
```

然后是一个控制器，它将填充这个视图模型：

```
public ActionResult Index()
{
    var users = Membership.GetAllUsers().Cast<MembershipUser>();
    var model = new UsersViewModel
    {
        AvailableUsers = users.Select(u => new SelectListItem
        {
            Value = u.UserName,
            Text = u.UserName
        })
    };

    return View(model);
} 
```

最后在视图模型的强类型视图中

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<UsersViewModel>" %>
...
<%= Html.ListBoxFor(x => x.SelectedUsers, Model.AvailableUsers) %> 
```

# javascript - Ajax jquery 在 IE6 上不起作用

> ID：10115787
> 
> 赞同：0
> 
> 时间：2012-04-12T00:18:34.983
> 
> 标签：javascript, jquery, ajax, internet-explorer-6

我正在使用ajax jquery。跟随代码在除 IE6 之外的所有浏览器上都能正常工作。我试图改变一些东西，但它不起作用。

请帮我解决这个问题！谢谢

```
$(document).ready(function(){
    $("#form_get").submit(function(){
        var hasError = false,
        inputURL = $("#input_link").val();
        $('#form_get input').attr('disabled', true);
        $("#result_file h3").html('Loading ...');
        $("#result_text").html('<div style="text-align:center;"><img src="./images/lightbox-ico-loading.gif" /></div>');
        $("#result_file").slideDown('slow');
        var request = $.ajax({
            url: "get.php",
            type: "POST",
            data: {input_link : inputURL},
            dataType: "html",
            cache: false,
            timeout: 10000,
        });
        request.done(function(msg) {
            var aResult = JSON.parse(msg);
            $('#result_file h3').html(aResult.status);
            $("#result_text").fadeTo('slow',0,function(){
                $('#result_text').html(aResult.text);
                $("#result_text").fadeTo('slow',1);
            });
        });
        request.fail(function(jqXHR, textStatus) {
            alert('Ajax Error');
            $('#result_file h3').html('Error');
            $("#result_text").html("Ajax doesn't work");
        });
        $('#form_get input').attr('disabled', false);
    return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T00:22:51.403

尝试删除这部分代码中多余的逗号：

```
var request = $.ajax({
    url: "get.php",
    type: "POST",
    data: {input_link : inputURL},
    dataType: "html",
    cache: false,
    timeout: 10000, //Remove this comma
}); 
```

所以它应该看起来像：

```
$(document).ready(function(){
    $("#form_get").submit(function(){
        var hasError = false,
        inputURL = $("#input_link").val();
        $('#form_get input').attr('disabled', true);
        $("#result_file h3").html('Loading ...');
        $("#result_text").html('<div style="text-align:center;"><img src="./images/lightbox-ico-loading.gif" /></div>');
        $("#result_file").slideDown('slow');
        var request = $.ajax({
            url: "get.php",
            type: "POST",
            data: {input_link : inputURL},
            dataType: "html",
            cache: false,
            timeout: 10000
        });
        request.done(function(msg) {
            var aResult = JSON.parse(msg);
            $('#result_file h3').html(aResult.status);
            $("#result_text").fadeTo('slow',0,function(){
                $('#result_text').html(aResult.text);
                $("#result_text").fadeTo('slow',1);
            });
        });
        request.fail(function(jqXHR, textStatus) {
            alert('Ajax Error');
            $('#result_file h3').html('Error');
            $("#result_text").html("Ajax doesn't work");
        });
        $('#form_get input').attr('disabled', false);
    return false;
    });
}); 
```

顺便说一句，一个好的 html、css、javascript 编辑器会为您解决这个语法问题。我更喜欢使用 Aptana 2.0。

# c# - 使用 SqlParameterCollectionExtensions

> ID：10115789
> 
> 赞同：0
> 
> 时间：2012-04-12T00:18:41.937
> 
> 标签：c#, asp.net, sql, data-binding, parameters

我有一个无法重用的丑陋代码。我有很多类似的疑问。我想用 SqlParameterCollectionExtensions 或其他更好的方法重写它。但我根本不知道 SqlParameterCollectionExtensions。

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        SqlConnection con = new SqlConnection(strCon);
        con.Open();
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandText = "UPDATE Problem_DE SET ProbDesc = @ProbDesc, field_1 = @field_1, field_2 = @field_2, field_3 = @field_3, field_4 = @field_4, field_5 = @field_5, field_6 = @field_6, field_7 = @field_7 WHERE (ProbId = @ProbId)";
        if (e.NewValues["ProbDesc"] == null)
            cmd.Parameters.AddWithValue("@ProbDesc", DBNull.Value);
        else
            cmd.Parameters.AddWithValue("@ProbDesc", e.NewValues["ProbDesc"]);
        if (e.NewValues["field_1"] == null)
            cmd.Parameters.AddWithValue("@field_1", DBNull.Value);
        else
            cmd.Parameters.AddWithValue("@field_1", e.NewValues["field_1"]);
        if (e.NewValues["field_2"] == null)
            cmd.Parameters.AddWithValue("@field_2", DBNull.Value);
        else
            cmd.Parameters.AddWithValue("@field_2", e.NewValues["field_2"]);
        if (e.NewValues["field_3"] == null)
            cmd.Parameters.AddWithValue("@field_3", DBNull.Value);
        else
            cmd.Parameters.AddWithValue("@field_3", e.NewValues["field_3"]);

        if (e.NewValues["field_4"] == null)
            cmd.Parameters.AddWithValue("@field_4", DBNull.Value);
        else
            cmd.Parameters.AddWithValue("@field_4", e.NewValues["field_4"]);
         \\ blah blah
        cmd.ExecuteNonQuery();
        con.Close();
     } 
```

sql参数来自e或文本框等。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:55:45.860

也许是这样的？我假设问题是您有可变数量的值，具体取决于问题表？

```
private void UpdateProblem(string problemName, string problemDescription, int problemId, object[] fieldValues)
{
    SqlConnection   con = null;
    SqlCommand      cmd = new SqlCommand();
    StringBuilder   sql = new StringBuilder();
    int             fieldCounter = 1;

    // start building the sql statement
    sql.AppendFormat("UPDATE {0} SET ProbDesc = @ProbDesc", problemName);

    // add the 'description' parameter
    cmd.Parameters.Add(new SqlParameter("@ProbDesc", problemDescription));

    // add each field value to the update statement... the SqlParameter will infer the database type.
    foreach(object fieldValue in fieldValues)
    {
        // add additional SET clauses to the statement
        sql.AppendFormat(",field{0} = @field{0}", fieldCounter);

        // add the field parameter to the command's collection
        cmd.Parameters.Add(new SqlParameter(String.Format("@field{0}", fieldCounter), fieldValue));

        fieldCounter++;
    }

    // finish up the SQL statement by adding the where clause
    sql.Append(" WHERE (ProbId = @ProbId)");

    // add the 'problem ID' parameter to the command's collection
    cmd.Parameters.Add(new SqlParameter("@ProbId", problemId));

    // finally, execute the SQL
    try
    {
        con.Open();

        cmd.Connection = con;

        cmd.CommandText = sql.ToString();

        cmd.ExecuteNonQuery();
    }
    catch(SqlException ex)
    {
        // do some exception handling
    }
    finally
    {
        if(con != null)
            con.Dispose();
    }
} 
```

调用此代码的示例是：

```
public void UpdateProblemDe()
{
    int         problemId = FetchCurrentProblemId();
    string      field1 = e.NewValues["field_1"];
    string      field2 = e.NewValues["field_2"];
    string      field3 = ddlField3.SelectedValue;
    int         field4 = Convert.ToInt32(e.NewValues["field_4"]);
    string      field5 = txtField5.Text;
    DateTime    field6 = DateTime.Now.AddSeconds(Convert.ToInt32(ddlField6.SelectedValue));
    string      field7 = txtField7.Text;
    object[6]   fieldValues;

    if(field1 != null)
        fieldValues[0] = field1;
    else
        fieldValues[0] = DBNull.Value;

    if(field2 != null)
        fieldValues[1] = field2;
    else
        fieldValues[1] = DBNull.Value

    fieldValues[2] = field3;
    fieldValues[3] = field4;    
    fieldValues[4] = field5;
    fieldValues[5] = field6;
    fieldValues[6] = field7;

    UpdateProblem("Problem_DE", "Houston, we have a problem", problemId, fieldValues);  
} 
```

上面的示例代码显然只是演示如何从页面控件值存储对象数组，并且不包括您需要在生产代码中实现的任何数据验证。

如果您不知道 object[] 数组在运行时需要多大，您可以将其更改为通用对象列表并动态添加项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:56:16.217

基于此答案 [创建新的 SQLCommand 或重用相同的 SQLCommand，](https://stackoverflow.com/questions/1518188/create-new-sqlcommands-or-reuse-the-same-one) 您可以通过以下方式重构代码

```
public class DbHepler
    {
        private readonly string _connectionString;
        public DbHepler(string connectionString)
        {
            _connectionString = connectionString;
        }

        public void ExecuteNonQuery(string query)
        {
            ExecuteNonQuery(query, null);
        }

        public void ExecuteNonQuery(string query, Dictionary<string, object> parameters)
        {
            using (SqlConnection conn = new SqlConnection(_connectionString))
            {
                conn.Open();

                using (SqlCommand cmd = conn.CreateCommand())
                {
                    cmd.CommandText = query;

                    if (parameters != null)
                    {
                        foreach (string parameter in parameters.Keys)
                        {
                            cmd.Parameters.AddWithValue(parameter, parameters[parameter] ?? DBNull.Value);
                        }
                    }

                    cmd.ExecuteNonQuery();
                }

                conn.Close();
            }
        }
    } 
```

**您的代码将类似于：**

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            string query = "UPDATE Problem_DE SET ProbDesc = @ProbDesc, field_1 = @field_1, field_2 = @field_2, field_3 = @field_3, field_4 = @field_4, field_5 = @field_5, field_6 = @field_6, field_7 = @field_7 WHERE (ProbId = @ProbId)";
            Dictionary<string, object> parameters = new Dictionary<string, object>();

            if (e.NewValues["ProbDesc"] == null)
                parameters.Add("@ProbDesc", null);
            else
                parameters.Add("@ProbDesc", e.NewValues["ProbDesc"]);

            //blah blah

            DbHepler dbHepler = new DbHepler("your sql connection info");
            dbHepler.ExecuteNonQuery(query, parameters);
         } 
```

# dns - 在 Amazon Route53 中设置基于 DNS 的 URL 转发

> ID：10115799
> 
> 赞同：154
> 
> 时间：2012-04-12T00:20:30.313
> 
> 标签：dns, forwarding, amazon-route53

我正在尝试在 Amazon Route53 中设置转发。我的最后一个 DNS 服务 (Nettica) 允许我将请求路由到“aws.example.com”到“https://myaccount.signin.aws.amazon.com/console/”。

Route53 是否支持此功能？

Nettica 是如何做到这一点的？它是否插入特殊的 A、CNAME、PTR 或 TXT 记录？

* * *

## 回答 #1

> 赞同：344
> 
> 时间：2013-01-12T00:59:37.800

我遇到了与 Saurav 描述的完全相同的问题，但我真的需要找到一个除了 Route 53 和 S3 之外不需要任何其他东西的解决方案。我为我的博客创建了一个操作指南，详细说明了我做了什么。

这是我想出的。

* * *

# 客观的

仅使用 Amazon S3 和 Amazon Route 53 中可用的工具，创建一个 URL 重定向，自动将[http://url-redirect-example.vivekmchawla.com](http://url-redirect-example.vivekmchawla.com)转发到别名为“MyAccount”的 AWS 控制台登录页面，该页面位于[https ://myaccount.signin.aws.amazon.com/console/](https://myaccount.signin.aws.amazon.com/console/)。

本指南将教您设置 URL 转发到任何 URL，而不仅仅是来自亚马逊的 URL。您将学习如何设置转发到特定文件夹（例如我的示例中的“/console”），以及如何将重定向协议从 HTTP 更改为 HTTPS（反之亦然）。

* * *

# 第一步：创建您的 S3 存储桶

![打开 S3 管理控制台并单击](../Images/1cd51c9f299b206a065df286c2ad554e.png)

打开 S3 管理控制台并单击“创建存储桶”。

* * *

# 第二步：命名您的 S3 存储桶

![命名您的 S3 存储桶](../Images/d4113ce33ee2e43fa6a830e3d25dfa21.png)

1.  选择存储桶名称。这一步真的很重要！您必须将存储桶命名为与要设置转发的 URL 完全相同。对于本指南，我将使用名称“url-redirect-example.vivekmchawla.com”。

2.  选择最适合您的地区。如果您不知道，请保留默认值。

3.  不要担心设置日志记录。准备好后，只需单击“创建”按钮。

* * *

# 第 3 步：启用静态网站托管并指定路由规则

![启用静态网站托管并指定路由规则](../Images/584e4c4771ef7a107f3639dad7226c15.png)

1.  在属性窗口中，打开“静态网站托管”的设置。
2.  选择“启用网站托管”选项。
3.  输入“索引文档”的值。此对象（文档）永远不会由 S3 提供，您也不必上传它。只需使用您想要的任何名称。
4.  打开“编辑重定向规则”的设置。
5.  完整粘贴以下 XML 片段。

    ```
    <RoutingRules>
      <RoutingRule>
        <Redirect>
          <Protocol>https</Protocol>
          <HostName>myaccount.signin.aws.amazon.com</HostName>
          <ReplaceKeyPrefixWith>console/</ReplaceKeyPrefixWith>
          <HttpRedirectCode>301</HttpRedirectCode>
        </Redirect>
      </RoutingRule>
    </RoutingRules> 
    ```

如果您对上述 XML 的作用感到好奇，请访问[AWM 文档中的“Syntax for Specifying Routing Rules”](http://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html#configure-bucket-as-website-routing-rule-syntax)。一种奖励技术（此处未介绍）是转发到目标主机上的特定页面，例如`http://redirect-destination.com/console/special-page.html`. 如果您需要此功能，请阅读该`<ReplaceKeyWith>`元素。

* * *

# 第 4 步：记下重定向存储桶的“端点”

![记下您的重定向存储桶的端点](../Images/4d45da78b98881d7a05d43695d00dfbb.png)

记下 Amazon 自动为此存储桶创建的静态网站托管“端点”。稍后您将需要它，因此突出显示整个 URL，然后将其复制并粘贴到记事本中。

**警告！**此时您实际上可以单击此链接来检查您的重定向规则是否输入正确，但要小心！这就是为什么...

假设您`<Hostname>`在重定向规则的标签内输入了错误的值。也许你不小心输入`myaccount.amazon.com`了，而不是`myaccount.signin.aws.amazon.com`. 如果您单击链接来测试 Endpoint URL，AWS 会很乐意将您的浏览器重定向到错误的地址！

注意到您的错误后，您可能会`<Hostname>`在重定向规则中编辑以修复错误。不幸的是，当您再次尝试点击该链接时，您很可能最终会被重定向回错误的地址！即使您修复了该`<Hostname>`条目，您的浏览器仍在缓存上一​​个（不正确的！）条目。发生这种情况是因为我们使用的是 HTTP 301（永久）重定向，Chrome 和 Firefox 等浏览器默认会缓存这些重定向。

如果您将端点 URL 复制并粘贴到其他浏览器（或清除当前浏览器中的缓存），您将再次有机会查看更新后的`<Hostname>`条目是否最终是正确的。

为了安全起见，如果您想测试您的端点 URL 和重定向规则，您应该打开一个私密浏览会话，例如 Chrome 中的“隐身模式”。在隐身模式下复制、粘贴和测试端点 URL，一旦您关闭会话，缓存的任何内容都将消失。

* * *

# 第 5 步：打开 Route53 管理控制台并转到您的托管区域（域名）的记录集

![打开 Route 53 管理控制台以将记录集添加到您的托管区域](../Images/273253f3f6625d2860ddba370aef8f44.png)

1.  选择您在创建存储桶时使用的托管区域（域名）。由于我将存储桶命名为“url-redirect-example.vivekmchawla.com”，因此我将选择 vivekmchawla.com 托管区域。
2.  单击“转到记录集”按钮。

* * *

# 第 6 步：单击“创建记录集”按钮

![单击创建记录集按钮](../Images/8933e6e9888981b0933ecc54278e261b.png)

单击“创建记录集”将打开 Route53 管理控制台右侧的“创建记录集”窗口。

* * *

# 第 7 步：创建 CNAME 记录集

![创建 CNAME 记录集](../Images/95c050ab47ca20d090fb3c239fbd2b10.png)

1.  在名称字段中，输入您在命名 S3 存储桶时使用的 URL 的主机名部分。URL 的“主机名部分”是托管区域名称左侧的所有内容。我将我的 S3 存储桶命名为“url-redirect-example.vivekmchawla.com”，我的托管区域是“vivekmchawla.com”，所以我需要输入的主机名部分是“url-redirect-example”。

2.  为此记录集的类型选择“CNAME - 规范名称”。

3.  对于值，粘贴我们在步骤 3 中创建的 S3 存储桶的端点 URL。

4.  单击“创建记录集”按钮。假设没有错误，您现在可以在托管区域的记录集列表中看到一条新的 CNAME 记录。

* * *

# 第 8 步：测试您的新 URL 重定向

打开一个新的浏览器选项卡并输入我们刚刚设置的 URL。对我来说，那就是[http://url-redirect-example.vivekmchawla.com](http://url-redirect-example.vivekmchawla.com/)。如果一切正常，您应该被直接发送到 AWS 登录页面。

因为我们使用`myaccount.signin.aws.amazon.com`别名作为重定向的目标 URL，亚马逊确切地知道我们正在尝试访问哪个帐户，并直接将我们带到那里。如果您想为员工或承包商提供一个简短、干净、带有品牌名称的 AWS 登录链接，这将非常方便。

![全部完成！ 您的 URL 转发应该会将您带到 AWS 登录页面。](../Images/51141292d0f363915ef81927fcc043a8.png)

* * *

# 结论

我个人喜欢各种 AWS 服务，但如果您决定将 DNS 管理迁移到 Amazon Route 53，那么缺乏简单的 URL 转发可能会令人沮丧。我希望本指南有助于更轻松地为您的托管区域设置 URL 转发。

如果您想了解更多信息，请查看 AWS 文档站点中的以下页面。

*   [示例：使用自定义域设置静态网站](http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html)
*   [为网站托管配置存储桶](http://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html)
*   [创建使用 Route 53 的域](http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/R53Example.html)
*   [创建、更改和删除资源记录](http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/RRSchanges.html)

干杯!

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2015-10-07T12:05:44.047

AWS 支持指出了一个更简单的解决方案。这与@Vivek M. Chawla 提出的想法基本相同，但实现更简单。

AWS S3：

1.  创建一个以您的完整域命名的存储桶，例如`aws.example.com`
2.  在存储桶属性上，选择`Redirect all requests to another host name`并输入您的 URL： `https://myaccount.signin.aws.amazon.com/console/`

AWS Route53：

1.  创建记录集类型 A。将别名更改为`Yes`。单击`Alias Target`字段并选择您在上一步中创建的 S3 存储桶。

参考：[如何使用 Amazon Web Services 重定向域](http://www.holovaty.com/writing/aws-domain-redirection/)

AWS 官方文档：[有没有办法使用 Amazon Route 53 将一个域重定向到另一个域？](https://aws.amazon.com/premiumsupport/knowledge-center/redirect-domain-route-53/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-20T20:35:11.173

我能够使用 nginx 处理 301 重定向到 aws 登录页面。

转到您的 nginx conf 文件夹（在我的情况下，我在其中为启用的 conf 文件`/etc/nginx/sites-available`创建符号链接）。`/etc/nginx/sites-enabled`

然后添加重定向路径

```
server {
  listen 80;
  server_name aws.example.com;
  return 301 https://myaccount.signin.aws.amazon.com/console;
} 
```

如果您使用的是 nginx，您很可能会有额外的服务器块（apache 术语中的虚拟主机）来处理您的区域顶点（example.com），或者您已经设置了它。确保将其中之一设置为默认服务器。

```
server {
  listen 80 default_server;
  server_name example.com;
  # rest of config ...
} 
```

在 Route 53 中，添加一个`A record`for`aws.example.com`并将值设置为用于您的区域顶点的相同 IP。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-12T09:57:58.783

## 更新

虽然我在下面的原始答案仍然有效，并且可能有助于了解无法通过[Amazon Route 53](http://aws.amazon.com/route53/)开箱即用地使用基于 DNS 的 URL 转发的原因，但我强烈建议您通过同时介绍的方法查看 Vivek M. Chawla 的[完全智能的间接解决方案](https://stackoverflow.com/a/14289082/45773)[Amazon S3 支持网站重定向](http://aws.typepad.com/aws/2012/10/amazon-s3-support-for-website-redirects.html)并在 AWS 中实现更少的自包含服务器，因此免费的解决方案仅如此。

*   实施自动化解决方案以生成此类重定向留给读者作为练习，但请通过发布您的解决方案来向 Vivek 的史诗般的答案致敬；）

* * *

## 原始答案

Nettica 必须为此运行自定义重定向解决方案，这是问题所在：

您可以创建一个 CNAME 别名，例如`aws.example.com`for ，但是，DNS 不提供像本示例中`myaccount.signin.aws.amazon.com`那样为子目录命名的官方支持。`console`

*   遗憾的是，AWS 在默认情况下似乎并没有简单地执行此操作`https://myaccount.signin.aws.amazon.com/`（我刚刚尝试过），因为它会立即解决您的问题，并且一开始就很有意义；此外，它们的配置应该很容易。

出于这个原因，一些 DNS 提供商显然已经实现了自定义解决方案，以允许重定向到子目录；我冒昧地猜测，他们基本上是在为自己的域提供 CNAME 别名，并通过即时[HTTP 3xx Redirection](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)再次从那里重定向到最终目的地。

因此，要获得相同的结果，您需要运行一个 HTTP 服务来执行这些重定向，这当然不是人们希望的简单解决方案。也许/希望有人可以想出一个更聪明的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-01T08:44:40.030

如果您仍然对简单方法有疑问，请创建一个空存储桶，然后`Redirect all requests to another host name`通过控制台在属性中的静态网络托管下。确保您在 route53 中设置了 2 条 A 记录，一条为`final-destination.com`，一条为`redirect-to.final-destination.com`。其中每一项的设置都是相同的，但名称会有所不同，因此它与您为存储桶/URL 设置的名称相匹配。

# javascript - 滑动“卡片”效果——滑出，但不滑入

> ID：10115802
> 
> 赞同：0
> 
> 时间：2012-04-12T00:20:53.867
> 
> 标签：javascript, animation, sliding-window

我正在使用以下代码创建滑动卡片效果，其中每个“卡片”都是一个列表元素，它们在屏幕上滑动。它们仅在我设置的具有特定高度和宽度的“阶段”中可见。它工作得很好——除了，虽然卡片很好地向左滑出，但它们并没有从右侧向内执行相同的滑动功能。相反，它只是跳到页面上，看起来有点令人吃惊。

有谁知道我怎样才能让下一个列表项从右侧滑入而不是简单地出现？

谢谢！

JS：

```
window.addEvent('domready', function () {
    var totIncrement = 0;
    var increment = 968;
    var maxRightIncrement = increment * (-303); //this is -303 because there are 303 cards, but the example below only has 3
    var fx = new Fx.Style('slider-list', 'margin-left', {
        duration: 300,
        //transition: Fx.Transitions.Back.easeInOut,
        wait: true
    });
    // EVENTS for the button "previous"
    var pbuttons = document.getElementsByClassName('prevButton');
    for(i = 0; i < pbuttons.length; i++) {
        $(pbuttons[i]).addEvents({
            'click': function (event) {
                if(totIncrement > maxRightIncrement) {
                    totIncrement = totIncrement + increment;
                    fx.stop()
                    fx.start(totIncrement);
                }
            }
        });
    }
    //-------------------------------------
    // EVENTS for the button "next"
    // var buttons = $('.nextButton');
    var buttons = document.getElementsByClassName('nextButton');
    for(i = 0; i < buttons.length; i++) {
        $(buttons[i]).addEvents({
            'click': function (event) {
                if(totIncrement > maxRightIncrement) {
                    totIncrement = totIncrement - increment;
                    fx.stop()
                    fx.start(totIncrement);
                }
            }
        });
    }
}); 
```

HTML：

```
<div id="slider-stage">
    <ul id="slider-list">
        <li id="l1">
            <!-- previous button -->
            <div class="prev"><a class="prevButton" href="#">Previous</a></div>
            <div>
                <!-- content goes here -->
                <!-- next button -->
                <div class="slider-buttons">
                    <a class="nextButton" href="#">Next</a>
                </div>
            </div>
        </li>
        <li id="l2">
            <!-- previous button -->
            <div class="prev"><a class="prevButton" href="#">Previous</a></div>
            <div>
                <!-- content goes here -->
                <!-- next button -->
                <div class="slider-buttons">
                    <a class="nextButton" href="#">Next</a>
                </div>
            </div>
        </li>
        <li id="l3">
            <!-- previous button -->
            <div class="prev"><a class="prevButton" href="#">Previous</a></div>
            <div>
                <!-- content goes here -->
                <!-- next button -->
                <div class="slider-buttons">
                    <a class="nextButton" href="#">Next</a>
                </div>
            </div>
        </li>
    </ul>
</div> 
```

# postgresql - PL/pgSQL 函数中的 SELECT 或 PERFORM

> ID：10115806
> 
> 赞同：13
> 
> 时间：2012-04-12T00:21:11.277
> 
> 标签：postgresql, function, plpgsql, select-into

我的数据库中有这个功能：

```
CREATE OR REPLACE FUNCTION "insertarNuevoArticulo"(nombrearticulo character varying, descripcion text, idtipo integer, idfamilia bigint, artstock integer, minstock integer, maxstock integer, idmarca bigint, precio real, marcastock integer)
RETURNS boolean AS
$BODY$
DECLARE
    articulo "Articulo"%ROWTYPE;
BEGIN
    SELECT * INTO articulo FROM "Articulo" WHERE "Nombre" = $1 AND "idTipo"=$3 AND "idFamilia"=$4;
    IF NOT FOUND THEN
        INSERT INTO "Articulo" ("Nombre", "Descripcion", "idTipo", "idFamilia", "Stock", "MinStock", "MaxStock") Values ($1, $2, $3, $4, $5, $6, $7);
        SELECT last_value
        INTO articulo."idArticulo"
        FROM "public"."Articulo_idArticulo_seq";
    END IF;
    SELECT * FROM "ArticuloMarca" AS am WHERE am."idArticulo" = articulo."idArticulo" and am."idMarca" = $8;
    IF NOT FOUND THEN
        Insert into "ArticuloMarca"("idArticulo", "idMarca", "PrecioReferencial", "Stock") Values (articulo."idArticulo", $8, $9, $10);
        RETURN TRUE;
    END IF;
    RETURN FALSE;
END;
$BODY$
 LANGUAGE plpgsql VOLATILE
 COST 100;
 ALTER FUNCTION "insertarNuevoArticulo"(character varying, text, integer, bigint, integer, integer, integer, bigint, real, integer)
 OWNER TO postgres; 
```

但是一旦我尝试使用它，它就说`PERFORM`如果我想丢弃结果，我需要使用它！这里的问题是我不想！我希望它们在`articulo`我声明的那一行！

我正在使用这个语句：

```
SELECT "insertarNuevoArticulo"('Acetaminofen', 'caro', '1' , '1', '8', '1', '10', '1', '150.7', '10'); 
```

我得到的错误是 42601，一个语法错误！如果我使用 IDE 来创建它会怎样？关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T03:31:42.607

在 plpgsql 代码中，`SELECT`没有目标会触发错误。但你显然*不想*，你只想`SELECT INTO`设置状态`FOUND`。你会用[**`PERFORM`**](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-NORESULT)它。

*   [SELECT 在 PL/pgSQL 函数中引发异常](https://stackoverflow.com/questions/37230750/select-raises-exception-in-pl-pgsql-function/37234043#37234043)

**更好的是**，使用`IF EXISTS ...`. 考虑一下你的函数的重写：

```
CREATE OR REPLACE FUNCTION "insertarNuevoArticulo"( nombrearticulo text, descripcion text, idtipo int, idfamilia bigint, artstock int, minstock int, maxstock int, idmarca bigint, precio real, marcastock int)
  RETURNS boolean
  LANGUAGE plpgsql AS
$func$
DECLARE
    _id_articulo "Articulo"."idArticulo"%TYPE;
BEGIN
    SELECT a."idArticulo" INTO _id_articulo
    FROM   "Articulo" a
    WHERE  a."Nombre" = $1 AND a."idTipo" = $3 AND a."idFamilia" = $4;

    IF NOT FOUND THEN
        INSERT INTO "Articulo"("Nombre", "Descripcion", "idTipo", "idFamilia", "Stock", "MinStock", "MaxStock")
        VALUES ($1, $2, $3, $4, $5, $6, $7)
        RETURNING "Articulo"."idArticulo" INTO _id_articulo;
    END IF;

   IF EXISTS (SELECT FROM "ArticuloMarca" a
              WHERE a."idArticulo" = _id_articulo AND a."idMarca" = $8) THEN
      RETURN false;
   ELSE
      INSERT INTO "ArticuloMarca"("idArticulo", "idMarca", "PrecioReferencial", "Stock")
      VALUES (_id_articulo, $8, $9, $10);
      RETURN true;
    END IF;
END
$func$; 
```

关于`EXISTS`：

*   [PL/pgSQL 检查一行是否存在](https://stackoverflow.com/questions/11892233/pl-pgsql-checking-if-a-row-exists-select-into-boolean/11892796#11892796)

另一个**重点**：

*   使用语句的[`RETURNING`子句](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-ONEROW)而`INSERT`不是附加的`SELECT`.

### Postgres 9.5+

在 Postgres 9.5 或更高版本中使用`INSERT ... ON CONFLICT DO NOTHING`（又名“UPSERT”）代替。
你会对和然后有`UNIQUE`限制：`"Articulo"("Nombre", "idTipo", "idFamilia")``"ArticuloMarca"("idArticulo", "idMarca")`

```
CREATE OR REPLACE FUNCTION insert_new_articulo( nombrearticulo text, descripcion text, idtipo int, idfamilia bigint, artstock int, minstock int, maxstock int, idmarca bigint, precio real, marcastock int)
  RETURNS boolean
  LANGUAGE plpgsql AS
$func$
DECLARE
    _id_articulo "Articulo"."idArticulo"%TYPE;
BEGIN
   LOOP
      SELECT "idArticulo" INTO _id_articulo
      FROM   "Articulo"
      WHERE  "Nombre" = $1 AND "idTipo" = $3 AND "idFamilia" = $4;

      EXIT WHEN FOUND;

      INSERT INTO "Articulo"("Nombre", "Descripcion", "idTipo", "idFamilia", "Stock", "MinStock", "MaxStock")
      VALUES ($1, $2, $3, $4, $5, $6, $7)
      ON     CONFLICT (tag) DO NOTHING
      RETURNING "idArticulo" INTO _id_articulo;

      EXIT WHEN FOUND;
   END LOOP;

   LOOP
      INSERT INTO "ArticuloMarca"("idArticulo", "idMarca", "PrecioReferencial", "Stock")
      VALUES (_id_articulo, $8, $9, $10)
      ON     CONFLICT ("idArticulo", "idMarca") DO NOTHING;

      IF FOUND THEN
         RETURN true;
      END IF;

      IF EXISTS (SELECT FROM "ArticuloMarca"
                 WHERE "idArticulo" = _id_articulo AND "idMarca" = $8) THEN
         RETURN false;
      END IF;
   END LOOP;
END
$func$; 
```

这更快、更简单、更可靠。添加的循环排除了并发写入的任何剩余竞争条件（同时几乎不增加任何成本）。如果没有并发写入，您可以简化。详细解释：

*   [函数中的 SELECT 或 INSERT 是否容易出现竞争条件？](https://stackoverflow.com/questions/15939902/is-select-or-insert-in-a-function-prone-to-race-conditions/15950324#15950324)
*   [如何在 PostgreSQL 中使用 RETURNING 和 ON CONFLICT？](https://stackoverflow.com/questions/34708509/how-to-use-returning-with-on-conflict-in-postgresql/42217872#42217872)

另外：使用合法的小写标识符来避免所有嘈杂的[双引号](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T02:46:26.203

这条线在我看来很可疑，可能是导致你悲伤的原因：

```
SELECT * FROM "ArticuloMarca" AS am WHERE am."idArticulo" = articulo."idArticulo" and am."idMarca" = $8; 
```

您正在函数中执行 SELECT，但没有对结果做任何事情。您需要像之前在函数中所做的那样执行 SELECT INTO。

# java - 递归查找句子中最长的单词

> ID：10115810
> 
> 赞同：1
> 
> 时间：2012-04-12T00:21:44.510
> 
> 标签：java, string, recursion

所以我需要递归地找到最长的单词，我已经编写了代码，但它不起作用，我不知道要修复什么。

```
 public static String longestWord(String sentence)
{
    int i = sentence.indexOf(" ");

    if (i==-1){
        return sentence;
    }

    else{
        String first = sentence.substring(0,i);
        String rest = sentence.substring(i+1);

            if(first.length()>=rest.length()){
                return longestWord(first);
            }
        else{
            return longestWord(rest);

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:26:25.990

该行：

```
if(first.length() >= rest.length()) 
```

应如下所示：

```
String res = longestWord(rest);
if(first.length() >= res.length()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:27:38.017

它不起作用的原因是您忽略了`longestWord(rest)`: 的长度，而不是比较初始单词的长度和句子的其余部分，您应该将初始单词的长度与找到的最长单词的长度进行比较句子的其余部分。

```
String first = sentence.substring(0,i);
String rest = longestWord(sentence.substring(i+1));
return first.length()>=rest.length() ? first : rest; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T00:27:55.770

您的基本方法是理智的：您将输入分成两个：第一个单词和字符串的其余部分。但是后来逻辑有点混乱。

如果第一个单词比整个字符串的其余部分长，你应该只 return `first`，而不是`longestWord(first)`（尽管你确实处理了这种情况：`longestWord`会注意到这个词不能被拆分并只返回它。虽然它没有意义）。

其次，如果不是这样，你不能假设第一个词不是最长的词。您必须捕获 的返回值`longestWord(rest)`，然后将该单词的长度与 的长度进行比较`first`。如果该词更长，则返回它。否则返回 `first`。

递归“分而治之”的本质是你解决一些较小版本的问题，然后整合这些结果。不要忘记第二部分。这不是一个二叉搜索树搜索，其中数据被组织起来，这样您就可以递归到一半空间或另一半空间来找到答案。你不知道最长的单词可能在哪里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T19:57:31.177

```
package com.kota.java;
import java.util.*;

class LongestWord{
    String str = "Ram is intelligent boy";
    String stringArray[] = str.split("\\s");

    public String compare(String st1, String st2) {
        if (st1.length() > st2.length()) {
            return st1;
        } else {
            return st2;
        }
    }

    LongestWord() {
        String word = "";
        for (int i = 0; i < stringArray.length; i++) {
            if (i == 0) {
                word = stringArray[0];
            }
            word = compare(word, stringArray[i]);
        }
        System.out.println("Longest word = " + word);
    }

    public static void main(String[] args) {
        new LongestWord();
    }
}
/**
 * Out put : Longest word = intelligent
 * 
 * */ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T00:42:07.030

这是解决问题的另一种方法：

```
public static String longestWord(String sentence) {
    return longest(sentence.split("\\s+"), 0, 0);
}

private static String longest(String[] words, int idx, int longest) {
    if (idx == words.length)
        return words[longest];
    return longest(words, idx+1,
        words[idx].length() > words[longest].length() ? idx : longest);
} 
```

首先，在`longestWord()`句子中被空格分割，产生一个单词数组。从那时起，该方法`longest()`递归地遍历所有通过参数中迄今为止找到的最长的索引的单词`longest`，直到没有更多的单词。这是一个有效的答案，因为它不会在每一步都创建子字符串。

# java - 在 Java 中创建的半透明或透明图像在 Android OpenGL ES 中不显示

> ID：10115817
> 
> 赞同：3
> 
> 时间：2012-04-12T00:22:42.817
> 
> 标签：java, android, image, opengl-es

我使用带有以下代码的 Mac 计算机在 Java 6 中创建图像。然后我尝试使用 OpenGL ES 在 Android 设备中显示该图像。不显示图像，仅显示白色图像。但是，如果没有半透明像素，则图像会很好地显示。

显示在 Photoshop 中创建的半透明图像没有问题。只有用 Java 创建的半透明图像才有问题。我还尝试了用 Java 创建半透明图像的不同方法，但我总是得到相同的结果，即在 OpenGL 中显示的白色图像。在这一点上，我相信这是 Java 的一个错误，（在 Mac 计算机中）。有没有人遇到过这样的事情？知道为什么会发生这种情况吗？

//创建图片的代码

```
int cmap[] = { 
0x00000000, /*transparent*/ 
0xFF000000, /*black*/ 
0xFFFF0000, /*red*/ 
0xFFFFFF00, /*yellow*/ 
0xFF00FF00, /*green*/ 
//...... 
}; 
IndexColorModel colorModel = new IndexColorModel(8, 
cmap.length, cmap, 0, true, -1, DataBuffer.TYPE_BYTE); 
BufferedImage image = new BufferedImage(256, 256, 
BufferedImage.TYPE_BYTE_INDEXED, colorModel); 
Graphics2D g = image.createGraphics(); 
g.setBackground(new Color(0,0,0,0)); /*transparent*/ 
g.clearRect(0 , 0, image.getWidth(), image.getHeight()); 
g.setColor(Color.red); 
g.draw(new Rectangle(10, 10, 40, 40));

ImageIO.write(image, "PNG", new File("rectangle.png")); 
```

下面是加载纹理的代码。请注意，这是特定于 Android 环境的。

```
public static void loadAndBindTexture(GL10 gl) throws Exception
{ 
    int numberTextures=1;
    int[] textures = new int[numberTextures];
    gl.glGenTextures(numberTextures, textures, 0);
    int textureID=textures[0];

    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureID);//polyBreaker3DObject_.mTextureID);

    checkGLError(gl, 998);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR_MIPMAP_LINEAR);
    checkGLError(gl, 997);
    //NOTE: FOR GL_TEXTURE_MAG_FILTER only GL_NEAREST or GL_LINEAR are valid.
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
    checkGLError(gl, 996);

    /*Commented on Sept. 30, 2010 6:21AM
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER,GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D,GL10.GL_TEXTURE_MAG_FILTER,GL10.GL_LINEAR);
    */
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S,GL10.GL_CLAMP_TO_EDGE);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T,GL10.GL_CLAMP_TO_EDGE);
    checkGLError(gl, 1000);

    gl.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE,GL10.GL_DECAL);
    checkGLError(gl, 1001);
    gl.glTexParameterf(GL11.GL_TEXTURE_2D, GL11.GL_GENERATE_MIPMAP, GL11.GL_TRUE);
    checkGLError(gl, 1002);

 if(mContext==null)//mContext is the Context of the current Android application (it is set before this method is called
    throw new Exception("Context has not been set.");
 InputStream is = mContext.getResources().openRawResource(R.drawable.metal128x128);//blueski);//robot);
Bitmap bitmap;
try {

    bitmap = BitmapFactory.decodeStream(is);

} finally {
    try {
        is.close();
    } catch(IOException e) {
        Log.printCaughtExceptionMsg(e);
    }
}

GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
bitmap.recycle();

   checkGLError(gl, 1003);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:57:21.710

您可以将实际调用发布到`glDrawElements()`or`glDrawArrays()`吗？如果不查看实际的 OpenGL 绘图调用，很难判断您做错了什么。但是您可能在绘制纹理之前没有启用混合。

这样的事情应该可以解决问题：

```
gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
gl.glEnable(GL10.GL_BLEND); 
```

如果您想了解更多信息，请查看[这个问题。](https://stackoverflow.com/questions/611219/in-opengl-es-how-do-i-load-a-texture-that-has-transparent-pixels/8009693#8009693)

**编辑：**

我的错误，我看错了你的问题。你应该看看你正在使用的 BufferedImage 格式。 [根据文档](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#TYPE_BYTE_INDEXED)`TYPE_BYTE_INDEXED`，似乎不支持 alpha 值。您是否尝试过使用？`TYPE_INT_ARGB`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:56:22.430

我仍然无法弄清楚为什么用 Java 创建的透明图像在 Android OpenGL ES 中不起作用。但是，我确实找到了一个允许图像工作的 hack。

在java中创建新的透明图像时，您应该做的第一件事是使用方法调用在其上绘制半透明图像

```
 g.drawImage(Image img, x, y,  null); 
```

//g 是从正在创建的新图像中获取的 Graphics 对象

//img 参数是半透明的，不是 100% 透明的（否则它将不起作用）在 Photoshop 中创建的图像。我使用 4x4 尺寸，这样它就不会被注意到。

在此调用之后，您可以继续执行原始代码。新图像现在可以在 Android OpenGL ES 中使用。

我的猜测是，通过绘制一个半透明的图像，它会改变生成的 PNG 文件的格式，而这种格式的改变使它可以在 Android OpenGL ES 中工作。

# firefox - 在 CakePHP 中使用浏览器后退按钮再次触发 Flash 消息

> ID：10115822
> 
> 赞同：0
> 
> 时间：2012-04-12T00:23:09.583
> 
> 标签：firefox, cakephp, google-chrome, cakephp-2.0

我只是遇到了一个令人费解的情况。我的控制器操作如下所示：

```
public function myaction($eventId = false) {
    if(!$eventId) {
        //list all events
        $data = foo;
    } else {
        if(!$this->Event->findById($eventId) )
        {
            $this->Session->setFlash('myerror message', 'flash_frontend_message');
            $this->redirect(array('controller' => 'events', 'action' => 'myaction'));
        } else {
            // display event information
            $data = foo;
        }
    }
    $this->set($data);
} 
```

如果我使用在数据库中找不到的 $eventId 调用该函数，它会输出一条错误消息，并且用户会被重定向回所有事件的列表。但是，假设我选择了一个有效的 eventId，查看相关信息，然后按浏览器后退按钮，之前的 flash 消息再次输出，即使这种情况下的 URL 不包含 $eventId。

我想会发生什么是页面从浏览器缓存中加载而不是重新加载。我试图避免像这样将视图存储在缓存中：

```
<!--nocache-->
<?php echo $this->Session->flash(); ?>
<?php echo $this->Session->flash('auth'); ?>
<!--/nocache--> 
```

但仍然会显示 Flash 消息。

知道如何防止这种行为吗？有没有办法在显示后清除闪光灯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:38:23.123

您正在谈论正确的缓存，但尝试使用错误的缓存来修复它。

```
<!--nocache--> 
```

是 php/html 文件本身中没有缓存语句。它与浏览器缓存无关。您需要做的是设置正确的标题。

对于这个确切的东西，请求对象中有一个方便的方法：http: [//book.cakephp.org/2.0/en/controllers/request-response.html#interacting-with-browser-caching](http://book.cakephp.org/2.0/en/controllers/request-response.html#interacting-with-browser-caching)

我通过 AppController 在所有正常的前端操作中使用它：

```
public function beforeRender() {
    $this->response->disableCache();
    ...
} 
```

# java - 是否可以从 Web 服务器获取服务器和语言信息？

> ID：10115823
> 
> 赞同：1
> 
> 时间：2012-04-12T00:23:37.240
> 
> 标签：java, httpurlconnection

我正在使用`HttpURLConnection`.

有没有办法要求服务器发送构建页面的语言（PHP、Java、Python、Ruby 等）和正在运行的 Web 服务器（Apache、ISS 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:33:36.893

由于网络服务器只提供最终内容（html/javascript/a mp3 -- 随便什么），它们只有义务告诉您他们提供给您的内容是什么，而不是他们是如何创建的。通常你会发现一个服务器头告诉你 Apache/PHP 版本，但大多数人认为这是安全漏洞，很多人会禁用它。

您要查找的两个标头是 Server 和 X-Powered-By。

[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

据我所知，没有服务器有任何内置的 API 来询问服务器是什么。如果您拥有您想知道的服务器，您当然可以使用 JSP 或 PHP 或其他任何东西制作 API。我假设情况并非如此，或者您已经知道:)。

# linux - 可以使用内联汇编关闭保护模式吗？

> ID：10115826
> 
> 赞同：2
> 
> 时间：2012-04-12T00:23:43.307
> 
> 标签：linux, assembly, linux-kernel, kernel, inline-assembly

如果用户没有root权限，假设操作系统是linux，该用户是否仍然可以编写带有内联汇编的用户空间程序来关闭计算机上的保护模式以覆盖其他段中的内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T00:27:40.920

除非用户知道获取 root 权限的安全漏洞。/dev/mem 等机制允许 root 读写所有用户空间内存，内核模块加载允许 root 访问内核内存和系统的其余 IO 空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T00:27:15.060

假设系统按预期工作，不。

实际上，毫无疑问，在某个地方存在一些允许它的漏洞 - 鉴于代码库的大小，错误是不可避免的，并且可能会利用一些漏洞进入 ring 0。

也就是说，我只是根据统计数据进行猜测——我无法指出具体的漏洞。

# android - 带有 ArrayListFragment 的 FragmentPagerAdapter

> ID：10115827
> 
> 赞同：1
> 
> 时间：2012-04-12T00:23:45.087
> 
> 标签：android, android-viewpager

编辑：我想通了，谢谢

我现在一直在尝试在我的每个 ViewPager 页面中实现单独的 ListViews。我非常了解[本教程](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentListArray.html)，但它只创建一个用于每个页面的 ListView。

我希望能够在每个页面中拥有多个 ListView，从中我可以控制每个页面的 ListView 的 onClick 发生的情况。我的应用程序使用一个 ListView（如教程中所示），但我一直在努力解决多个问题。

我的代码发布在下面，我尝试了很多不同的东西，我只需要继续我的开发。谢谢您的帮助

```
private static class MyAdapter extends FragmentPagerAdapter implements
        TitleProvider {

    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return ArrayListFragment.newInstance(position);
    }

    @Override
    public int getCount() {
        return Arrays.TITLES.length;
    }

    public String getTitle(int position) {
        return Arrays.TITLES[position];
    }

}

public static class ArrayListFragment extends ListFragment {
    int mNum;

    /**
     * Create a new instance of CountingFragment, providing "num" as an
     * argument.
     */
    static ArrayListFragment newInstance(int num) {
        ArrayListFragment f = new ArrayListFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }

    /**
     * When creating, retrieve this instance's number from its arguments.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.list_layout, container, false);
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, Arrays.accTEAMS));
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Log.i("FragmentList", "Item clicked: " + id);
    }
} 
```

这是我的 ListFragments 之一：

```
public class ACCfragment extends ListFragment {
View v;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.list_layout, null);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, Arrays.accTEAMS);
    setListAdapter(adapter);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:19:12.603

您必须使用 bundle 在片段之间发送参数。

从 Fragment1 发送：

```
Bundle args = new Bundle();
args.putInt("my_integer",_stationId);
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction ft = fragmentManager.beginTransaction();
Fragment fragment = Fragment.instantiate(getActivity(), Fragment2.class.getName(), args);
ft.replace(R.id.layout, fragment);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft.commit(); 
```

接收和进入 Fragment2：

```
getArguments().getInt("my_integer") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:54:29.590

尝试这个...

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Log.i("FragmentList", "Item clicked: " + id);
    switch(mNum){
       case 1:
        //do what you want for first page
        Log.i("FragmentList", "Page 1: Item clicked: " + id);
        break;
       case 2:
       //do what you want for second page;
       Log.i("FragmentList", "Page 2: Item clicked: " + id);
       break;
       default:
       //default case;
       break;
   }
} 
```

# string - 如何在循环中连接字符串？

> ID：10115832
> 
> 赞同：4
> 
> 时间：2012-04-12T00:25:04.243
> 
> 标签：string, matlab, loops

我想创建一个具有类似名称的各种行的 inputdlg，例如 Test 1、Test 2、Test 3 等。所以我正在寻找某种方法来在`for`循环中连接字符串。我试过类似的东西：

```
 formatSpec = '''Test %d'',';
    a = sprintf(formatSpec,1);
    for i = 2:numtest
        a = strcat(a,sprintf(formatSpec,i));
    end 
```

但它不适用于 inputdlg。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:15:25.440

这可能是你想要的：

```
for i = 1:10
    line_name = sprintf('Test %d', i);
    prompt{i} = line_name;
end
input_result = inputdlg(prompt); 
```

![在此处输入图像描述](../Images/d4a894efefb0d8d80c9aa3caf69ef871.png)

# ruby-on-rails-3 - rake 资产：预编译错误：找不到或无法读取要导入的文件

> ID：10115836
> 
> 赞同：0
> 
> 时间：2012-04-12T00:25:44.100
> 
> 标签：ruby-on-rails-3, asset-pipeline

SO中有一些类似的问题，但似乎没有一个包含解决我的问题的方法。

简而言之，为什么我会收到以下错误，我该怎么做才能解决它？

```
$ rake assets:precompile:all RAILS_ENV=production
rake aborted!
File to import not found or unreadable: bootstrap-clubicle.css.erb.
Load path: ~/Clubicle/Source/clubicle
  (in ~/Clubicle/Source/clubicle/app/assets/stylesheets/public_portal.css.scss) 
```

@import 声明受到质疑并没有什么奇怪的。

```
@import 'bootstrap-clubicle.css.erb'; 
```

bootstrap-clubicle.css.erb 文件确实存在，在样式表目录中。

我在 OSX 10.6.8 上运行 Rails 3.1.1。

还值得注意的是，在 EngineYard 上部署我的应用程序时，我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T13:20:22.693

[EngineYard](http://engineyard.com)的优秀支持人员终于查明了问题的原因。我有 application.css 中需要的文件（使用`//= require`），这些文件也包含在其他地方（使用`@import`）。双重导入导致了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T06:15:38.077

经过几个小时痛苦的解决这个问题后，我只想添加另一个对我有用的解决方案。

我的 application.css 文件如下所示：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 */

@import "base"; 
```

注意，我拿出：

```
 *= require_self
 *= require_tree . 
```

因为我正在使用 @import 指令导入另一个 Sass 文件。

我不得不删除整个评论——不仅仅是让 Sass 找到我的@import“基础”的要求。一旦我这样做了，就找到了导入并预编译了应用程序。

# java - 导出到 .jar 时未找到 Java Eclipse--.txt 文件

> ID：10115837
> 
> 赞同：4
> 
> 时间：2012-04-12T00:26:02.653
> 
> 标签：java, eclipse, user-interface

所以我创建了一个游戏，在 eclipse 中完美运行——所有的图像都加载了，它可以从文本文件中正确读取。文本文件提供关卡信息。这就是我的问题所在。我将它全部导出到一个可执行的 .jar 文件中，它找到了所有图像。但它没有找到 .txt 文件。需要在哪里找到 .txt 文件？

```
 try{
        controlBoard = new Scanner(new FileInputStream("lvl1.txt"));
    }catch(Exception e){
        gb.error = true;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T00:29:39.340

您不应该使用`FileInputStream`. 使用`InputStream`类加载器和`getResourceAsStream()`. 它会在 JAR 中找到它。

# html - 嵌套列表上的自动宽度

> ID：10115841
> 
> 赞同：-2
> 
> 时间：2012-04-12T00:26:53.873
> 
> 标签：html, css

我有一个嵌套列表，例如：

```
<ul id="nav">
    <li id="" class="">
      <a href="http://site.com/wedding.html" class="">Wedding</a>

      <div class="flyoutWrapper" style="display:block;">
        <ul class="flyout fourCol">
          <li id="" class="">
     .....
          </li>
          <li></li>, etc
        </ul>
      </div>
    </li>
</ul> 
```

我希望 class="flyoutfourCol" 中的所有 li 都彼此相邻浮动。

这就是我希望我的下拉列表看起来的样子：

```
#nav .flyout.fourCol { width:900px; } 
```

[http://jsfiddle.net/t7esz/](http://jsfiddle.net/t7esz/)（这工作）

```
#nav .flyout.fourCol { width:auto; } 
```

[http://jsfiddle.net/sumcA/2/](http://jsfiddle.net/sumcA/2/)（这不起作用！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:33:13.353

如果您只希望它扩展，请将`min-width`属性设置为固定值（如 900 像素）。继续`width`自动。

我还没有检查你的整个菜单是如何工作的，但是在 .flyout.fourCol 上设置最小宽度似乎只适用于整个菜单。

# c# - 对给定代码使用 Ninject 3.0

> ID：10115842
> 
> 赞同：0
> 
> 时间：2012-04-12T00:26:58.477
> 
> 标签：c#, .net, dependency-injection, ninject, autofac

我正在尝试将此代码从 DI autofac 重写为 Ninject 3.0.0.15。

我对方法有疑问： AsImplementedInterfaces(... [)](http://api.autofac.org/html/AFD467AC.htm)和[AsClosedTypesOf(...)](http://api.autofac.org/html/3F8061C4.htm)

```
builder.RegisterAssemblyTypes(typeof(CategoryRepository).Assembly)
   .Where(t => t.Name.EndsWith("Repository")).AsImplementedInterfaces()
   .InstancePerHttpRequest();

Assembly services = Assembly.Load("EFMVC.Domain");

builder.RegisterAssemblyTypes(services)
    .AsClosedTypesOf(typeof(ICommandHandler<>)).InstancePerHttpRequest();

builder.RegisterAssemblyTypes(services); 
```

*该代码是非常好的演示 Web 应用程序的一部分，用于演示 ASP.NET MVC 4 和 EF 4.3 Code First、Windows Azure 和架构实践：[EFMVC](http://efmvc.codeplex.com/)*

谢谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:26:02.730

使用 Ninject.Extensions.Conventions V3.0.0

我认为这就是你要找的：

```
kernel.Bind(x => x
      .FromAssemblyContaining<CategoryRepository>()
      .SelectAllClasses().EndingWith("Repository")
      .BindAllInterfaces()
      .Configure(b => b.InRequestScope());

kernel.Bind(x => x
      .From("EFMVC.Domain")
      .SelectAllClasses().InheritedFromAny(typeof(ICommandHandler<>))
      .BindAllInterfaces()
      .Configure(b => b.InRequestScope()); 
```

# java - 在 JEditorPane 中保留空 HTML 行的格式

> ID：10115843
> 
> 赞同：3
> 
> 时间：2012-04-12T00:27:01.417
> 
> 标签：java, html, swing, jeditorpane

我注意到当 HTML JEditorPane 上有一个空行时，所有以前设置的样式都会消失。例如，请参见下面的代码示例：

```
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.text.AttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.html.HTMLEditorKit;

public class BlankLineTester {
    private JEditorPane jep;

    public BlankLineTester() {
        String html = "<html><head></head><body>" +
                "<p><b>Line 1</b></p>" +
                "<p><b></b></p>" +
                "<p><b>Line 3</b></p>" +
                "</body></html>";

        jep = new JEditorPane();
        jep.setContentType("text/html");
        jep.setText(html);

        JFrame frame = new JFrame("Blank Line Test");
        frame.getContentPane().add(jep);
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        System.out.println("Line 3 is " + isInputAttributeBold());

        jep.getCaret().setDot(8);
        System.out.println("Line 2 is " + isInputAttributeBold());

    }

    private boolean isInputAttributeBold() {
        AttributeSet attSet = ((HTMLEditorKit)jep.getEditorKit()).getInputAttributes();
        return StyleConstants.isBold(attSet);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new BlankLineTester();
            }
        });
    }
} 
```

第2行最初设置为*粗体*空行，但解析后，似乎没有保留粗体属性。另请注意，如果您自己运行此程序，将光标放在第 3 行，然后删除该行中的所有内容，您输入的下一个字符将不会是粗体。我想当它们代表的文本消失时，HTMLDocument 树中的叶子元素正在被消除，但是当用户运行它时，这开始看起来像是错误的行为。

有没有人知道如何让样式属性在空行上解析，并在样式行上的所有内容被删除时保留？

谢谢！——安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:45:06.150

如果你这样写，而不是按照你的方式写，那么我想你会得到你的行为，看起来`b & /b`，标签是旧式的，虽然我使用的是 JRE 1.7 update 3，以下几行在这方面效果很好：

```
String html = "<html><head></head><body>" +
                "<p style = \"font-weight:bold\">Line 1</p>" +
                "<p style = \"font-weight:bold\"></p>" +
                "<p style = \"font-weight:bold\">Line 3</p>" +
                "</body></html>"; 
```

试试这段代码，当你运行程序时，试着把`Delete`你的光标移到开头来按下，然后它会保留 Color **GREEN**，因为这是你的***鼠标指针***触摸的最后一个字符的颜色，然后试着`Backspace`用你的光标按下到最后，它将保留 Color **BLUE**，因为这是***鼠标指针***触摸的最后一个字符的颜色。第三次，只需尝试在已经提供的两行之间的每一行中写一个单词，有一行将显示红色字符，尝试找到该行。我附上下面的图片以澄清红线场景。

```
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.text.AttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.html.HTMLEditorKit;

public class BlankLineTester {
    private JEditorPane jep;

    public BlankLineTester() {
        String html = "<html><head></head><body>" +
                "<p style = \"font-weight:bold; color: blue\">Line 1</p><br />" +
                "<p style = \"font-weight:bold; color: red\"></p><br />" +
                "<p style = \"font-weight:bold; color: green\">Line 3</p>" +
                "</body></html>";

        jep = new JEditorPane();
        jep.setContentType("text/html");
        jep.setText(html);

        JFrame frame = new JFrame("Blank Line Test");
        frame.getContentPane().add(jep);
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        System.out.println("Line 3 is " + isInputAttributeBold());

        jep.getCaret().setDot(8);
        System.out.println("Line 2 is " + isInputAttributeBold());

    }

    private boolean isInputAttributeBold() {
        AttributeSet attSet = ((HTMLEditorKit)jep.getEditorKit()).getInputAttributes();
        return StyleConstants.isBold(attSet);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new BlankLineTester();
            }
        });
    }
} 
```

![字体样式](../Images/7e8be5a5fe9de6da9462609835a37515.png)

# c# - 信号量 WaitOne 无法正常运行

> ID：10115856
> 
> 赞同：2
> 
> 时间：2012-04-12T00:29:06.410
> 
> 标签：c#, multithreading, semaphore

我有一个信号量限制为 3，但是，这只是不断调用它想要的数量。我假设这是因为我使用（1000）。但是，当我只尝试 () 时，它永远不会通过 WaitOne 我不确定在这里做什么。

```
private static Semaphore _pool;
_pool = new Semaphore(0, 3);
var options = new ParallelOptions();
options.MaxDegreeOfParallelism = 1;
Parallel.ForEach(urlTable.AsEnumerable(),options, drow =>
{
    using (var WCC = new MasterCrawlerClass())
    {
                ActiveThreads++;
                _pool.WaitOne(1000);
                Console.WriteLine("Active Thread #: " + ActiveThreads);
                WCC.MasterCrawlBegin(drow);
                Console.WriteLine("Done Crawling a datarow");
                ActiveThreads--;
                _pool.Release();

    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T00:32:46.873

你在误解信号量。应该`_pool = new Semaphore(3, 3);`这样做也将消除将超时参数传递给`WaitOne()`.

第一个参数是在阻塞之前可能被授予的初始请求数，因此传递 0 意味着任何后续调用都`WaitOne()`将立即阻塞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T02:00:33.323

这里有几个问题。

*   我怀疑首先在这种情况下没有理由限制并发性。
*   您在构造函数中设置`initialCount`为 0 。*是现在*可以授予的请求数。`Semaphore``initialCount`
**   您正在使用`WaitOne`接受超时参数的重载。`WaitOne`无论是否从信号量中获取计数，超时都会返回。*   在从信号量中进行计数`ActiveThreads` *之前*，您正在递增。这意味着`ActiveThreads`更接近于`ForEach`操作的同时工作线程数。它不会告诉您有多少线程正在执行`MasterCrawlBegin`。*   上的`++`操作`ActiveThreads`不是线程安全的。*   您设置`MaxDegreesOfParallelism`的值几乎可以消除任何类型的并发处理。*

 *更改您的代码，使其看起来像这样。

```
int ActiveThreads = 0;
int ActiveCrawls = 0;
var semaphore = new SemaphoreSlim(3, 3); 
Parallel.ForEach(urlTable.AsEnumerable(), drow => 
  { 
    int x = Interlocked.Increment(ref ActiveThreads);
    Console.WriteLine("Active Thread #: " + x); 
    semaphore.Wait();
    int y = Interlocked.Increment(ref ActiveCrawls);
    Console.WriteLine("Active Crawl #: " + y); 
    try
    {
      using (var WCC = new MasterCrawlerClass()) 
      { 
        WCC.MasterCrawlBegin(drow);
      }
    }
    finally
    {
      Interlocked.Decrement(ref ActiveCrawls);
      semaphore.Release();
      Interlocked.Decrement(ref ActiveThreads);
      Console.WriteLine("Done Crawling a datarow"); 
    }
  } 
}); 
```

当然，您可以只设置`MaxDegreesOfParallelism = 3`而不用担心所有信号量的东西。*

# iphone - iPHone ATMHud - 更新文本

> ID：10115857
> 
> 赞同：0
> 
> 时间：2012-04-12T00:29:09.270
> 
> 标签：iphone, ios, ipad

在 iPhone 上使用 ATM Hud 项目，如何让文本在启动并显示的 HUD 上更新？

更改标题文本后，我尝试了 Update 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:32:37.087

我也在玩ATMHud。这里有一个小教程，展示了它的一些用途。

[ATMHud 示例](http://dlinsin.github.com/2011/03/24/ATMHud.html)

*ArQ*

# objective-c - iOS5：当我设置 MKMapView 的区域时，它只显示一个蓝色框

> ID：10115858
> 
> 赞同：1
> 
> 时间：2012-04-12T00:29:17.313
> 
> 标签：objective-c, ios5, mkmapview

当我显示我的地图时，我希望在中心显示用户的位置，并且跨度约为。用户周围 5k 距离。我的代码如下：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  mapView.mapType = MKMapTypeStandard;
  mapView.showsUserLocation = YES;
  MKUserLocation *userLocation = mapView.userLocation;
  MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(
                            userLocation.location.coordinate, 5000, 5000);
  [mapView setRegion:region animated:NO];
} 
```

结果是，在调用`setRegion`地图后，现在显示为一个无法滚动或缩放的空蓝框。我想了一会儿它可能会显示海洋，但情况似乎并非如此，因为地图本身不会滚动。我尝试将距离设置为从 50m 到 25000m 的所有距离，效果相同。如果我*不*打电话`setRegion`，那么缩小的世界地图会很好地显示，用户位置会按预期突出显示。

在浏览了一些相关问题后，我还尝试插入以下行：

```
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:region]; 
```

并替换 setRegion 消息如下：

```
[mapView setRegion:adjustedRegion animated:NO]; 
```

但这只是给我同样的结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:49:59.643

您还没有等待您的 mapView 获得有效位置。如果您将控制器设置为 mapView 的代表，然后告诉 mapview`showUserLocation`您最终会收到一个回调`- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation`，该回调将包含设备的坐标。我怀疑你认为你不能缩放或平移的原因是 (0,0) 在海洋中是 waaaaay 并且一切都是蓝色的。也可能是您的 MKMapView 尚未设置为允许触摸交互，例如捏合和缩放，因此请检查您的 xib 是否打开了所有正确的复选框

# wordpress - 按顺序自定义字段

> ID：10115860
> 
> 赞同：0
> 
> 时间：2012-04-12T00:29:25.757
> 
> 标签：wordpress

我正在 Wordpress 多站点设置中建立基于 MarketPress 完整版 (http://premium.wpmudev.org/project/e-commerce) 的商店。

我遇到了需要在订购的每个项目中添加 1 个额外字段（即：要在选定产品上打印的图像（基本上是指向图像的 url））。

我已经看过并尝试了几件事，但我还没有看到光明。

有人可以帮忙吗？任何关于正确方向的建议都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:52:08.420

查看 MarketPress 首席开发人员关于产品自定义字段的论坛回答：

[http://premium.wpmudev.org/forums/topic/custom-fields-for-marketpress](http://premium.wpmudev.org/forums/topic/custom-fields-for-marketpress)

# ios - iOS 中的 Urban Airship 入门

> ID：10115861
> 
> 赞同：0
> 
> 时间：2012-04-12T00:29:33.480
> 
> 标签：ios, urbanairship.com

我正在尝试将 Urban Airship 添加到我的 iOS 项目中。我正在使用最新版本 (1.2.0) 并遵循此处的说明： [https ://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS%3A+Push](https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS%3A+Push)

一般来说，这些说明看起来很清楚。似乎没有提到我应该在我的导入语句中包含哪些文件。

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:29:12.217

试试这个： [UAirship.h](https://github.com/urbanairship/ios-library/blob/master/Airship/Library/AirshipLib/UAirship.h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:50:37.370

还有这个：

# 导入“UAPush.h”

# c# - 在c#silverlight中调用c++ clr dll

> ID：10115865
> 
> 赞同：1
> 
> 时间：2012-04-12T00:29:42.920
> 
> 标签：c#, .net, silverlight, interop, clr

我们有一个已编译成 dll 的 c++ clr 应用程序。我们通过 c++ 代码中的托管公共 ref 类公开了几种方法。我们实际上能够让我们的原生 c# 应用程序加载这个 dll 并通过引用传递一个 system::drawing::bitmap。我们需要做的就是添加对 dll 的引用，并且所有方法都因隐式 pinvoke 而暴露。但是，一旦我们尝试在 silverlight 应用程序中加载 dll，事情就会崩溃。显然，使用的 c++ clr .net 库与 silverlight 的库不兼容。我们已经尝试了很多东西，但就是无法让 silverlight 调用我们的 dll。

请问，有人对如何解决这个问题有任何建议吗？任何事情都会得到重视！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:57:04.610

你有三个我能想到的主要选择：

1.  在 Silverlight DLL 中重写 C++/CLR DLL 中的逻辑。从 Silverlight 5 开始，您可以使用[P/Invoke](http://msdn.microsoft.com/en-us/library/hh560563%28v=vs.95%29.aspx)。
2.  创建一个调用 C++/CLR DLL 的 Web 服务。Silverlight 应用程序可以调用 Web 服务，并且该 Web 服务将能够使用 C++/CLR DLL。
3.  将您的 C++/CLR DLL 公开为 COM 对象，在客户端计算机上安装和注册它，并使用[Silverlight 中的 COM 支持](http://msdn.microsoft.com/en-us/library/system.windows.interop.comautomationfactory%28v=VS.96%29.aspx)来加载 C++/CLR DLL。

# java - java.lang.IllegalAccessError：试图访问字段 com.google.api.client.googleapis.GoogleHeaders.userAgent

> ID：10115868
> 
> 赞同：0
> 
> 时间：2012-04-12T00:30:42.993
> 
> 标签：java, android, eclipse, google-api-java-client

我正在使用 Android 2.3.3 和 Google API 来开发地图应用程序。

问题出在下面的代码中：

```
GoogleHeaders headers = new GoogleHeaders();
headers.setApplicationName("My Sample Google App on Maps");
request.setHeaders(headers); 
```

它拍摄时出现以下错误，

```
E/AndroidRuntime(382): FATAL EXCEPTION: main
E/AndroidRuntime(382): java.lang.IllegalAccessError: tried to access field com.google.api.client.googleapis.GoogleHeaders.userAgent from class com.google.api.client.googleapis.GoogleHeaders
E/AndroidRuntime(382):  at com.google.api.client.googleapis.GoogleHeaders.setApplicationName(GoogleHeaders.java:129)
E/AndroidRuntime(382):  at com.example.main.MapActivity$2.initialize(MapCallActivity.java:292)
E/AndroidRuntime(382):  at com.google.api.client.http.HttpRequestFactory.buildRequest(HttpRequestFactory.java:91)
E/AndroidRuntime(382):  at com.google.api.client.http.HttpRequestFactory.buildGetRequest(HttpRequestFactory.java:120)
E/AndroidRuntime(382):  at com.example.main.MapActivity.MyMethod(MapCallActivity.java:248)
E/AndroidRuntime(382):  at com.example.main.MapActivity.myMethod2(MapCallActivity.java:172)
E/AndroidRuntime(382):  at com.example.main.MapActivity.onCreate(MapCallActivity.java:108)
E/AndroidRuntime(382):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
E/AndroidRuntime(382):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
E/AndroidRuntime(382):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(382):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
E/AndroidRuntime(382):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(382):  at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(382):  at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(382):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(382):  at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(382):  at dalvik.system.NativeStart.main(Native Method) 
```

请解释一下，因为我被困住了，无法超越这一点。

使用的 API：

```
google-api-client-googleapis-1.4.1-beta.jar
google-http-client-1.8.3-beta.jar
google-http-client-android2-1.8.3-beta.jar
google-oauth-client-1.8.0-beta.jar 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:35:29.997

检查您是否设置了适当的权限。编译器认为您无权访问您尝试修改的对象。[http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalAccessError.html](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalAccessError.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:44:16.457

我自己得到了解决方案。问题在于 Googleapis-1.4.1-beta.jar 导入，这是编译器由于内部访问限制而无法更改数据的罪魁祸首。它在 GoogleHeaders.java 中产生了问题。

它通过编译器需要访问的 setApplicationName 方法设置 userAgent 变量。但是，现在修改如下。

以下是 GoogleHeaders 的新代码。希望它对所有此类用户有所帮助。

```
HttpHeaders headers = new HttpHeaders();
headers.setUserAgent("Searching Places..");
request.setHeaders(headers);

request.addParser(new JsonHttpParser(new JacksonFactory())); 
```

完全删除 GoogleHeaders 的使用，它会像刀一样顺利运行。

干杯!

# wpf - TabControl 获取其项目之一的大小

> ID：10115869
> 
> 赞同：2
> 
> 时间：2012-04-12T00:30:48.533
> 
> 标签：wpf, layout, wpf-controls, tabcontrol

我有一个 TabControl 有四个选项卡：

```
<TabControl> 
    <TabItem><TextBox/></TabItem>
    <TabItem><UserControl/></TabItem>
    <TabItem><Label/></TabItem>
    <TabItem><Image/></TabItem>
</TabControl> 
```

每个项目都是标准的 WPF 控件，但第二个是自定义 UserControl，可以具有任意大小。

文本框绑定到某个属性，但可以为空或可以有很长的文本。与标签相同。

相反，图像始终具有最大的尺寸。

TabControl 定义在一个 Window 中，它根据选项卡的大小改变大小。

目前的行为是，每次我从一个选项卡切换到下一个选项卡时，窗口都会改变大小。

我很困惑哪个是获得以下内容的最佳方法：

*   TabControl 根据 UserControl 大小设置其大小
*   TextBox 将适合 TabItem 面板，但如果它所需的大小大于第二个面板的大小，那么它将显示垂直滚动条
*   加载表单并显示选项卡后，从一个选项卡更改为下一个选项卡不会调整窗口大小。

关于如何在无需编写自定义控件的情况下实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:09:08.937

您应该能够使用几个 ElementName 绑定和一个 ScrollViewer 来实现这一点：

```
<TabControl Name="tabControl" Height="{Binding ElementName=userControl, Path=Height}">
    <TabItem Header="ONE">
        <ScrollViewer Height="{Binding ElementName=tabControl,Path=Height}">
            <TextBox Height="400" VerticalAlignment="Top"/>
        </ScrollViewer>
     </TabItem>
     <TabItem Header="TWO"><UserControl Name="userControl" Height="200" Width="400" /></TabItem>
     <TabItem Header="THREE"><Label/></TabItem>
     <TabItem Header="FOUR"><Image/></TabItem>
</TabControl> 
```

# mercurial - 需要定义一个集成软件开发的工作流/流程。一路通过Conf。管理

> ID：10115870
> 
> 赞同：1
> 
> 时间：2012-04-12T00:30:49.267
> 
> 标签：mercurial, process, workflow, clearcase

我们有大约 10 名开发人员。只写内部测试软件的人。到目前为止，所有开发都是临时性的，只有几个开发人员以自己的方式使用 Mercurial。其余的人没有使用任何版本控制（我知道）。过去，配置管理也有点特别。现在母公司希望我们更有条理。现在我们正在强制在 Mercurial 中控制所有代码，直到母公司将我们连接到他们的公司 ClearCase 服务器（几个月后）。

我们希望本论坛中的某个人能够描述一个经过验证的流程/工作流程，该流程/工作流程涵盖了从 Mercurial 和 ClearCase 两者的配置管理一直到开发的整个过程。

我们在这两种工具（Mercurial 和 ClearCase）方面都有经验，但在围绕这些工具设置流程方面并没有那么多经验。因此，如果可以在此处描述一个经过验证的流程，那么我们将以此为起点来定义我们自己的开发流程，然后也用于配置管理集成。

使用 clearcase 对我们来说是强制性的，因此无需解释 clearcase 的缺点。

任何帮助都感激不尽。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:46:13.780

没有服务器项目符号，这实际上取决于您打算如何使用 ClearCase，它是一个 CVCS（集中式 VCS）。
我详细介绍了 CVCS 和 DVCS 之间的区别：

*   “[每个开发人员都应该知道的基本 clearcase 概念是什么？](https://stackoverflow.com/questions/645008/what-are-the-basic-clearcase-concepts-every-developer-should-know) ”（它介于 ClearCase 和 Git 之间，但它确实适用于 Mercurial），以及
*   “[描述您使用版本控制（VCS 或 DVCS）的工作流程](https://stackoverflow.com/questions/2704996/describe-your-workflow-of-using-version-control-vcs-or-dvcs)”

我看到这种集成运行良好（或至少“还不错”）的唯一实例是在 DVCS 和 ClearCase UCM 之间。

如果您当前的 Mercurial 存储库是围绕“组件”的概念组织的（请参阅“ [ClearCase UCM - 使用组件的最佳实践](https://stackoverflow.com/questions/1764329/clearcase-ucm-best-practices-using-components/1766662#1766662)”，它还解释了组件是什么，并且适用于任何源代码控制工具），那么以下映射很简单

```
one DVCS repo <=> one ClearCase UCM Component 
```

这允许您定义：

*   明确的进口程序（基于[`clearfsimport`](https://stackoverflow.com/questions/138321/how-can-i-use-clearcase-to-add-to-source-control-recursively#144310)）
*   Mercurial 标签和 ClearCase UCM 基线之间的清晰匹配（因为基本 ClearCase 标签或“标签”是在逐个文件的基础上应用的，所述标签不是为 DVCS 修订版建模的好工具。DVCS 标签引用所有存储库，而不是所述存储库中的某些文件子集。）
*   清晰的依赖管理（[Mercurial subrepos](http://mercurial.selenic.com/wiki/Subrepository?action=show&redirect=subrepos) vs. [ClearCase UCM 复合基线](https://stackoverflow.com/questions/9613911/what-is-composite-baseline-in-ucm-and-when-it-will-be-used/9613986#9613986)）

# css - CSS：在 3 列 div 布局后清除内容

> ID：10115872
> 
> 赞同：0
> 
> 时间：2012-04-12T00:31:01.720
> 
> 标签：css, html

我无法弄清楚如何清除我的 3 个 div 列下方的内容——其中每个 div 列都包含一个带有一些居中文本的跨度和一个跨度下方的文本区域。问题，或者至少我认为，是 div 标签被浮动，我没有正确清除它们。

发生的情况是 Firefox 在第一列上的列（在我的例子中是一个按钮）之后浮动我的下一个元素。我的本地文件在 Internet Explorer 中完美呈现（但我假设这是因为 IE 添加了自己的附件以进行清除……找不到我在哪里读到的）。但是，当我在 IE 中查看我的 jsFiddle 代码时，文本区域并没有保持 100% 的高度。我假设 jsFiddle 不会在 IE 的 Quirks 模式下呈现 HTML（这就是它与我的本地文件不同的原因）。

我查看了[Holy Grail](http://www.alistapart.com/articles/holygrail)文章、[w3schools](http://www.w3schools.com/html/html_layout.asp)文章、[clear:after fix](http://www.positioniseverything.net/easyclearing.html)文章和其他几篇文章（[div 列布局](https://stackoverflow.com/q/3599475/1253609)），但在这两种浏览器中都找不到可行的解决方案。

这是我的[jsFiddle 代码](http://jsfiddle.net/EcbWL/1/)，这是我的代码。如您所见，我的代码有多种方法，因此很抱歉造成混乱。

**网站.html**

```
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="site.css" />
    </head>
    <body>
        <div id="top" class="clearfix">
            <div class="column">
                <span>blah1</span>
                <textarea class="text"></textarea>
            </div>
            <div class="column">
                <span>blah2</span>
                <textarea class="text"></textarea>
            </div>
            <div class="column clearfix">
                <span>blah3</span>
                <textarea class="text"></textarea>
            </div>
            <div class="clearing">&nbsp;</div>
        </div>
        <div id="center">
            <span>blah blah blah</span>
            <input type="button" value="Button" />
        </div>
    </body>
</html> 
```

**网站.css**

```
body, html {
  height: 100%;
  width: 100%;
}

body {
  padding: 0;
  border: 0;
  margin: 0;
}

#top {
  height: 40%;
  display: block;
  width: 100%;
  float: left;
}

.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

.column {
  width: 33%;
  float: left;
  height: 100%;
  text-align: center;
}

.clearing {
  height: 0;
  clear: both;
}

.text {
  width: 100%;
  height: 100%;
}

#center {
  clear: both;
} 
```

还需要注意的是，我已经尝试添加 in `overflow: hidden (and auto)`，这确实解决了问题，但我想查看我的整个文本区域...而不是隐藏它/让它滚动。任何建议或想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:50:21.753

拿：

```
height: 40%; 
```

超出 CSS 中的#top 减速。这就是问题的根源。如果要使文本框更大，只需使用：

```
textarea{height:200px;} 
```

希望这可以帮助。

# printing - 如何：模拟 (IPP) 打印机

> ID：10115876
> 
> 赞同：6
> 
> 时间：2012-04-12T00:32:05.027
> 
> 标签：printing, simulate, ipp-protocol

我想测试 IPP 应该具有的一些功能（即监控印象数；请参阅[此问题](https://stackoverflow.com/questions/10087539/how-to-monitor-progress-of-a-print-job-per-page-and-when-physical-printing-com)），但我还没有硬件。如何模拟这样的打印机？是否有虚拟 IPP 打印机的代码？

我将在 Linux 或 Windows 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-12-08T22:48:26.320

Github 上的[IPP 示例软件](https://github.com/istopwg/ippsample)是一个成熟的、开源的、*IPP-2.2*和*IPP Everywhere*兼容的打印机模拟器。它由标准化 IPP（互联网打印协议）的机构[打印机工作组(PWG) 提供。](https://www.pwg.org/)

IPP 示例软件可以在任何主要平台上编译：Linux、Windows、macOS。

该软件目前仍处于测试阶段，但已经非常实用。它附带的命令行工具之一是**`ippserver`**. 这是您正在寻找的模拟打印机。它比 Apple 的打印机模拟器强大得多——但它没有 GUI。您需要熟悉运行命令行工具。

一旦您可以开始`ippserver`（使用适当的选项），您将在您的网络上拥有一个成熟的虚拟 IPP 打印机实例。您可以使用它来测试任何（或您自己编写的）IPP 客户端软件。

IPP Sample 提供了第二个重要工具，**`ipptool`**. 这可以用作 IPP 客户端。你可以玩两者来互相测试。看看它在这个 ASCII-cast 中是如何工作的：

[![asciiccast](../Images/d11e427e3f491287f87e7e2e23982a85.png)](https://asciinema.org/a/155588)

如果您想自己尝试并且在 Linux 上，您甚至不需要自己构建它。只需使用我读取的软件*AppImage*（由一个可执行文件组成），无需“安装”步骤即可直接运行。就是这样：

1.  ***下载它：***

    ```
    wget https://github.com/KurtPfeifle/ippsample/releases/download/continuous/ippsample-x86_64.AppImage 
    ```

2.  ***使 AppImage 可执行***（并可选择将其重命名为*`ippsample`*）：

    ```
    chmod a+x ippsample-x86_64.AppImage
    mv ippsample-x86_64.AppImage ippsample 
    ```

3.  ***看看它的内置帮助屏幕：***

    ```
    ./ippsample --ai-usage 
    ```

4.  ***运行：***

    ```
    ./ippsample ipptool -t -v ipp://xxx.xxx.xxx.xxx/ipp/print ipp-2.0.test 
    ```

    （这将运行一个测试套件来验证 IP 地址 xxx.xxx.xxx.xxx 上的 IPP 打印机是否完全符合 IPP-2.0。）

## 更多测试示例：

1.  ***打印作业：（***
    `./ippsample ipptool -t -v \ -f my.pdf \ ipp://xxx.xxx.xxx.xxx/ipp/print \ print-job.test` 这会将*my.pdf*作为打印作业发送到打印机。）

2.  ***验证打印机的`print-uri`支持：***
    `./ippsample ipptool -t -v \ -o document-uri=https://ftp.pwg.org/pub/pwg/candidates/cs-ippeve10-20130128-5100.14.pdf \ ipp://xxx.xxx.xxx.xxx/ipp/print \ print-uri.test`

    （这将告诉打印机从*document-uri*获取命名的 PDF并打印它。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-28T21:33:08.997

一个非常好的 IPP 模拟器是 Apples **Printer Simulator**。在[https://developer.apple.com/download/more/](https://developer.apple.com/download/more/)查找*硬件 IO 工具* （请参阅[此问题](https://stackoverflow.com/questions/26030702/where-is-printer-simulator-in-xcode-6)）

即使它仅适用于 OS X，您仍然可以在 Linux 或 Windows 上针对此网络服务进行测试。打印的页面可以在预览中弹出以供查看。模拟器还支持所需的 IPP 属性`job-impressions-completed`。该工具可节省大量纸张。

CUPS 不是一个好的模拟器。为了正常工作，它需要一台可以打印的真正打印机。您可以暂停一个队列并测试打印到它。`impressions-completed > 0`除非您释放队列，否则您将一无所获。这将导致真实的而非模拟的打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:46:50.580

CUPS 为打印机提供 IPP 接口。使用 Java 和[jspi](http://code.google.com/p/jspi/)（[如本问题所述](https://stackoverflow.com/questions/1655297/print-to-specific-printer-ipp-uri-in-java)；它有点过时，需要一些修复，例如适应属性的解析语法），您可能有以下代码来访问本地打印机作为 IPP 打印机：

```
IppPrintService service = new IppPrintService(URI.create("ipp://localhost:631/printers/HL2240D-local")); 
```

[CUPS4J](http://www.cups4j.org/)也可用，我认为它做同样的事情，但通过它自己的接口而不是通过`javax.print`.

# php - PHP中的MySQL查询未返回真实结果

> ID：10115888
> 
> 赞同：0
> 
> 时间：2012-04-12T00:34:18.720
> 
> 标签：php, mysql, sql

我目前有以下使用 MySQL 的 PHP 文件，它应该返回 00:00 到 23:00 的结果（这是一个时间表），但是它只返回 01:00 到 23:00：

```
<?PHP
 include("../panel/config.php");
 #// Timetable Clearup Variabls

$yesterday = strtotime('yesterday');
$yesterdow = date('l',$yesterday);
$order = "SELECT * FROM timetable WHERE day = '$yesterdow' ORDER BY time LIMIT 0 , 30";
$result = mysql_query($order);
$yesterdayd = date('F jS, Y', time()-86400);

    //SET XML HEADER
    header('Content-type: text/xml');

    //CONSTRUCT RSS FEED HEADERS
    $output = '<rss version="2.0">';
    $output .= '<channel>';
    $output .= "<title>Timetable - {$yesterdayd} </title>";
    $output .= '<description>Timetable.</description>';
        $output .= '<link>http://www.site.com</link>';
     while ($row = mysql_fetch_array($result)) {
    //BODY OF RSS FEED

   $output .= "<item><title>Timetable - {$yesterdayd}</title>
   <description>";
while ($row=mysql_fetch_array($result))
{
        $rowset[] = $row;
  //BODY OF RSS FEED
  $output .= htmlspecialchars($row['time']) . " " . htmlspecialchars($row['username']) . "<br/>";
}
$output .= '</description></item> ';
 }
    //CLOSE RSS FEED
   $output .= '</channel>';
   $output .= '</rss>';

    //SEND COMPLETE RSS FEED TO BROWSER
$filename = "timetable.xml";

                if (!$handle = fopen($filename, 'w')) {
            echo "Cannot open file ($filename)";
            exit;
            }

            // Write $somecontent to our opened file.
            if (fwrite($handle, $output) === FALSE) {
            echo "Cannot write to file ($filename)";
            exit;
            }

            if (fwrite($handle, $total) === FALSE) {
            echo "Cannot write to file ($filename)";
            exit;
            }

            echo "Success, wrote {$content}{$total} to file ($filename)";

            fclose($handle);

?> 
```

谁能解释一下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:41:48.970

由于双 while 循环，您正在覆盖第一个结果。

```
while ($row = mysql_fetch_array($result)) {
    //BODY OF RSS FEED

    $output .= "<item><title>Timetable - {$yesterdayd}</title><description>";
    while ($row=mysql_fetch_array($result))
    {
        // First $row result is now overwritten before you used it
        // ... 
```

此外，您可能希望使用`date('Y-m-d')`而不是`date('l')`. 我不确定您的日期列包含什么，但`date('l')`返回的日期名称不区分昨天的星期二和上周的星期二以及 5 年前的星期二。

你只需要一个`while($row = mysql_fetch_array($result))`而不是两个。

# java - Java 线程 notify() 与 notifyAll()

> ID：10115889
> 
> 赞同：2
> 
> 时间：2012-04-12T00:34:23.480
> 
> 标签：java, multithreading, asynchronous, synchronized, monitors

我对 Java 的`notify()`. 以下示例来自教科书。

```
public synchronized consume() {
    while(queue.isEmpty()) {
        try{ wait(); } catch (InterruptedException e) {}
    }
    // Assume that getElement() notifies to producers.
    element = queue.getElement();
    ...
}

public synchronized produce() {
    while(queue.isFull()) {
        try{ wait(); } catch (InterruptedException e) {}
    }
    element = new Element();
    ...
    queue.addElement(element);
    notifyAll();
} 
```

我很理解`produce()`上面例子中的方法。但是，谁能告诉我为什么我们不在`notifyAll()`第一种方法（）的末尾使用`consume()`？简而言之，为什么不这样：

```
public synchronized consume() {
    while(queue.isEmpty()) {
        try{ wait(); } catch (InterruptedException e) {}
    }
    // Assume that getElement() notifies to producers.
    element = queue.getElement();
    ...
    notifyAll();
} 
```

非常感谢！

最好的祝福。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T00:37:44.447

我同意你的看法@Slash。在您的代码示例中，由于您要从队列中删除元素，因此需要有人通知正在`isEmpty()`循环中等待的生产者。但是，您的代码说：

```
// Assume that getElement() notifies to producers.
element = queue.getElement(); 
```

因此，该评论意味着以某种方式`getElement()`调用`notify()`or `notifyAll()`。

> 简而言之，为什么不这样：

是的，尽管您需要删除评论，但您的代码可以工作。:-)

通常在这些生产者/消费者模式中，有两种锁：一种在队列为空时，另一种在队列已满时。然后消费者可以在队列不再满时向生产者发出信号，并且*不会*唤醒其他消费者。在这种情况下，您也可以使用单个`notify()`，因为您只需要唤醒单个消费者或单个生产者。在`notifyAll()`这里使用 是因为只有一个对象在`synchronized`上。

此外，对于后代来说，注意到循环*不是*语句*非常重要。*即使您使用两个锁，在多生产者/消费者模型中也存在竞争条件，必须加以保护。虚假唤醒也是一个问题。更多关于这里：`while()` *`if``notify()`*

 *> [http://256stuff.com/gray/docs/misc/producer_consumer_race_conditions/](http://256stuff.com/gray/docs/misc/producer_consumer_race_conditions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:37:36.373

在这种情况下，通知在生产时使用，告诉消费者现在有东西要消费，以便他们中的一个人可以醒来并消费它。

假设在 getElement() 内部发生了消费者刚刚消费完某物时的通知：

```
// Assume that getElement() notifies to producers. 
```*

# android - 使用 USB 网络摄像头作为 android 模拟器上模拟摄像头设备的源

> ID：10115896
> 
> 赞同：2
> 
> 时间：2012-04-12T00:35:32.967
> 
> 标签：android, android-emulator, android-camera

这似乎在过去被问过很多次；模拟器不支持使用网络摄像头时，而是显示一个复选框图像。今天，模拟器确实支持在主机系统上使用网络摄像头。我找不到任何关于它的文档，除了人们说它只是自动工作。

以下链接适用于开发人员文档。它声明支持主机设备上的网络摄像头，但没有给出任何说明。

[http://developer.android.com/guide/developing/devices/emulator.html](http://developer.android.com/guide/developing/devices/emulator.html)

我在 Windows 7 (x64) 机器上使用 SDK 17。我的虚拟设备是 Google API（API 级别 10）。当我使用相机应用程序时，预览只是一个纯白色的图像，当我拍照时，我只是得到一个带有 android 标志的示例图像。我的网络摄像头已插入并工作，但 AVD 没有激活它。

有没有关于让相机工作的文档？

我实际上不需要网络摄像头来工作。如果我可以简单地提供要使用的图像文件而不是 android 徽标，那足以让我测试我的应用程序。

**更新**

重新启动我的桌面，现在我的相机在启动 AVD 时被激活，但在模拟器中仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:10:14.770

它适用于冰淇淋三明治模拟器。此功能在早期版本中根本不可用。

# mysql - SQL 查询两次加入同一列

> ID：10115899
> 
> 赞同：2
> 
> 时间：2012-04-12T00:35:56.707
> 
> 标签：mysql, sql, join

我有两张桌子 -

**内容：**

```
Id | Name | Source | Target         
---------------------------
1  |  Test  |  en   |    de
2  |  Test1 |  en   |    fr 
```

和**语言环境**：

```
Locale Code | Locale Name
--------------------------
de          |     German
en          |     English
fr          |     French 
```

我需要 Content 表中的所有记录，格式为 -

```
1 Test  English German

2 Test1 English French 
```

感谢您对此 SQL 查询的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T00:42:34.237

试试这个：

```
select c.id, c.name, ls.localename Source, lt.localename Target
from content c
join locale ls on c.source = ls.localecode
join locale lt on c.target = lt.localecode 
```

结果：

```
+----+--------+---------+--------+
| 身份证 | 姓名 | 来源 | 目标 |
+----+--------+---------+--------+
| 1 | 测试 | 英语 | 德语 |
| 2 | 测试1 | 英语 | 法语 |
+----+--------+---------+--------+

```

# jquery - 'this' 的 4 种不同场景。正确的解释是什么？

> ID：10115900
> 
> 赞同：7
> 
> 时间：2012-04-12T00:35:57.443
> 
> 标签：jquery, call, this

这些取自 tuts-premium Jquery vid 教程。
[http://tutsplus.com/lesson/the-this-keyword/](http://tutsplus.com/lesson/the-this-keyword/) Jeff 每次都解释“this”指的是什么，但我不确定我是否掌握了所有这些背后的原因。

**例如 1**

```
function doSomething(e) { 
e.preventDefault(); 
console.log(this);
} 

$('a').on('click', doSomething); 
```

在这种情况下，“this 指的是 'a' 元素”（在这种情况下是父对象）

我想那是因为这里的陈述等同于：

```
$('a').on('click', function (e) { 
    e.preventDefault(); 
    console.log(this);
    } 
```

所以'a'是父对象

**例如 2**

```
var obj = { 
    doIt: function(e){ 
    e.preventDefault(); 
    console.log(this);
    }
}

$('a').on('click',  obj.doIt); 
```

在这种情况下，“this 仍然指代 'a' 元素”（* 但显然它不是父对象？）

这次我们似乎在调用一个方法，但该语句仍然等同于与 Eg 1 相同的东西

*教程中的一件事让我有点困惑。我认为'this'总是指父对象，所以在这种情况下'a'仍然是父对象。但是（在教程中的 05.23 处）他推断情况并非如此，并指出“有时您可能希望 'this' 引用它的父对象，这将是 'obj'”，在这种情况下，他创建了 eg3。

**例如 3**

```
var obj = { 
    doIt: function(){ 
    console.log(this);
    }
}

$('a').on('click',  function(e){    
obj.doIt(); 
        };
e.preventDefault(); 
```

在这种情况下，“this 指的是 obj 对象”

我认为这是因为“this”在嵌套函数中，因为该语句等同于：

```
$('a').on('click',  function(){    
function(){ console.log(this);}
};
e.preventDefault(); 
```

不过，我真的不明白为什么，特别是当我在一篇文章中读到嵌套函数“this”“迷失方向并引用头对象（窗口对象）”时。

**例4**

```
var obj = { 
    doIt: function(){ 
    console.log(this);     
    }
}

$('a').on('click',  function(e){    
       obj.doIt.call(this);             
       e.preventDefault(); 
}); 
```

在这种情况下“这指的是'a'”

根据 Javascript Definitive Guide “call() 的第一个参数是要在其上调用函数的对象”这里“this”用作第一个参数。但是“this”不是要在其上调用函数的对象？？
我想我知道调用函数是用来调用函数并将其第一个参数用作指向不同对象的指针，但我不明白为什么使用“this”意味着函数被“a”调用。这也不是我在其他 call() 示例中看到的。

对不起，这么庞大的帖子。希望这个阶段有人还在阅读……</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T00:59:49.463

我希望这有助于澄清问题，它确实可能令人困惑。

*   **当`this`您的代码松散时，它将引用全局对象（在 Web 浏览器中，即`window`）。**

    ```
    console.log(this); // window 
    ```

*   **当`this`在对象方法中时（例如在您的 Eg 3 中），它将引用该对象。这适用于用 实例化的对象`new`，或作为对象文字（如您的示例）。**

    ```
     var obj = { 
         doIt: function(e){ 
             console.log(this);
         }
     }
     obj.doIt(); // obj 
    ```

*   **在事件处理程序内部，`this`将引用事件绑定到的对象。**

    ```
    // This is the plain js equivalent of your jQuery example
    document.getElementsByTagName['a'][0].addEventListener('click', function(e){
        console.log(this); // the first anchor on the document
    });

    // This is exactly the same:
    var clickHandler = function(e){
        console.log(this); // the first anchor on the document
    };
    document.getElementsByTagName['a'][0].addEventListener('click', clickHandler); 

    // Even if the handler is defined inside of another object, this will be
    // the obj the event is bound to. It's the case of your E.g. 2
    var obj = { 
        doIt: function(e){  
            console.log(this); // the first anchor on the document
        }
    }
    document.getElementsByTagName['a'][0].addEventListener('click', obj.doIt);
    // When you pass obj.doIt to addEventListener above, you are passing a reference
    // to that function. It's like "stealing" the function from the object 
    ```

*   **当一个对象作为第一个参数传递给`Function.call`or`Function.apply`时，如果`this`出现在函数内部，它将引用您传递的对象。这是一种强制`this`将指向的内容的方法。**

    ```
    var obj = { 
        doIt: function(){ 
            console.log(this); // window 
        }
    }
    obj.doIt.call(window); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:49:07.040

JavaScript 中的行为方式`this`起初有点令人困惑。基本上，与变量（静态作用域）不同，`this`它是*动态*作用域的。也就是说， 的值`this`取决于您*调用*函数的位置而不是编写函数的位置。

当您将函数传递给 时`on`，稍后会从相关`this`元素所在的上下文中调用它。*无论*您如何获得该功能，都会发生这种情况。也就是说，一个函数不关心你是使用类似语法`obj.fn`还是只使用它的名字来访问它`fn`——无论哪种情况，表达式的值都是相同的。

对于函数以外的东西，这是有道理的。鉴于：

```
var a   = 10,
    obj = { a : 10 }; 
```

你会同意表达式`a`和`obj.a`具有相同的值。函数也是如此。

简而言之： 的值`this`取决于你调用函数的位置和方式，而不是你声明它的方式和位置，或者你在调用它之前如何引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:55:49.303

[https://developer.mozilla.org/en/JavaScript/Reference/Operators/](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)`this`这是对关键字的简短介绍。并查看[`call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call).

当 jQuery`.call()`在 dom 元素的上下文中调用（是的，使用方法）事件处理程序时，您的所有示例都得到了解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T11:34:52.977

# rest - 维护人群的架构？

> ID：10115901
> 
> 赞同：1
> 
> 时间：2012-04-12T00:35:57.687
> 
> 标签：rest

我的情况如下：

```
Person belongsTo Group
Group hasMany People

When creating a new Person, a Group needs to be specified. 
```

我正在尝试确定最符合 REST 的 URL。现在我的 URL 有点令人困惑，这让我相信它们不是 RESTful。

我的功能允许用户：

1.  获取单个人员、组中的所有人员或所有人员
2.  将新人员添加到组（需要指定组）
3.  编辑人员信息
4.  删除一个人

我的网址是：

## 得到

```
/people/group/id -> Gets all People in a Group
/people/person/id -> Gets a single Person
/people/all -> Gets all People 
```

## 放

```
/people/group/id -> Add a new Person to a Group 
```

## 邮政

```
/people/person/id -> Edit a Person 
```

## 删除

```
/people/person/id -> Delete a Person 
```

我可以做些什么来使我的 URL 更加 RESTful？有没有人有什么建议？

我问这个的原因是因为我想到了其他结构，并看到一切都是如何简单地由 HTTP 请求决定的。例如：

```
/people/id

GET retrieves the person, POST updates the person, DELETE removes the person. 
```

在没有“组”的情况下，就这么简单。但在我的“组”案例中，我需要指定参数，例如**all** in`/people/all`以获取所有人员或**/group/id** in`/people/groups/id`以指定在何处发布新人员。我可以添加这样的参数并仍然保持它是 RESTful 的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:13:37.427

并不是说有任何“正确”的方式来做 RESTful 路由，这完全取决于你，因为没有硬性和快速的规则，但这就是我将如何构建它。对于人：

```
GET    /people     -> Returns a list of all people
POST   /people     -> Adds a new person (group would be defined in the POSTed data
PUT    /people/:id -> Updates a person
DELETE /people/:id -> Deletes a person 
```

然后对于将人员作为 RESTful 端点的组：

```
GET    /groups/:id/members -> Gives a list of all people in the group 
```

我选择成员作为端点，因为它以简单的英语流动（获取组成员），但您可以使用人员或任何其他描述性术语。

在考虑如何构建 RESTful 路由时，我认为最重要的是让最终的 API 用户易于理解它们，无论是你自己还是第三方。

# php - php构造函数没有被调用？或者其他的东西？

> ID：10115902
> 
> 赞同：1
> 
> 时间：2012-04-12T00:35:58.833
> 
> 标签：php

当 TestPage.php 在浏览器中运行时，'trying to create new obj...' 被回显，但没有别的。构造函数没有被调用吗？

这不是任何一个类的完整代码，但希望有人告诉我哪里出错了......

测试页面.php

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/plain; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
        class MyClass {
        $api_key = 'somestring';
        $username = 'username';
        echo 'trying to create new obj...';
        $myObj = new MyClass($api_key, $username);
        echo 'new obj created...';

    ...
        ?>
    </body>
</html> 
```

MyClass.class.php

```
<?php
class MyClass {
    protected $_api_key;
    protected $_username;

    public function __construct($api_key, $username) {
        echo 'entered constructor...';
        $this->_api_key = $api_key;
        $this->_username = $username;
        echo 'leaving constructor...';
    }

    ...
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T00:37:46.943

您需要将其实际定义为一个类。那看起来像：

```
class MyClass {
    protected $_api_key;
    protected $_username;

    public function __construct($api_key, $username) {
        echo 'entered constructor...';
        $this->_api_key = $api_key;
        $this->_username = $username;
        echo 'leaving constructor...';
    }
} 
```

只需将您拥有的代码放在一个文件中并命名它本身不会做任何事情。

此外，如果您还没有包含该文件，则需要包含该文件。就像是：

```
include 'MyClass.class.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:38:24.380

您需要`class`关键字来定义一个类，请[http://php.net/manual/en/language.oop5.basic.php](http://php.net/manual/en/language.oop5.basic.php)获取一些基本示例

尝试

```
class MyClass
{
 protected $_api_key;
    protected $_username;

    public function __construct($api_key, $username) {
        echo 'entered constructor...';
        $this->_api_key = $api_key;
        $this->_username = $username;
        echo 'leaving constructor...';
    }
} 
```

# java - 独特的面板与块组合——Java 中的代码

> ID：10115906
> 
> 赞同：9
> 
> 时间：2012-04-12T00:37:23.183
> 
> 标签：java

我有一个项目，我必须从 3x1 和 4.5x1 的块创建一个面板。为了结构完整性，块之间的空间不得在相邻行中排列。我必须计算所有可能的组合。一些例子是 7.5x1 面板有 2 种可能的解决方案，7.5x2 面板有 2 种可能的解决方案，12x3 面板有 4 种可能的方式，27x5 有 7958 种可能的方式。我的问题是当我进入更高的宽度时，我得到的解决方案比我应该得到的更多。我认为这与我有可能得到重复的表有关，但我看不到它发生在哪里或如何修复它。任何帮助将不胜感激。代码如下。

```
import java.util.ArrayList;
import java.util.List;

import puzzle.Row;

public class panel {
/**
 * This program will return the number of unique tables that for structural      integrity don't have blocks that line up
 * in adjacent rows.  The width is to be between 3 and 48 and the height between 1 and 10\.  The width
 * should also be a multiple of 0.5.
 * 
 * @param width, height
 * @return totalTables
 */
public static void main(String[] args) {
    int width = 0;
    int height = 0;

    // Check to make sure that two arguments were passed.
    if (args.length != 2) {
        System.out.println("Please enter both a height and a width.");
        System.exit(1);
    } else {
        // Check that a data type of double was entered.
        if ( ( args[0].matches("^[0-9]+(\\.[0-9]+)?$") ) && 
                ( Double.valueOf(args[0].trim()).doubleValue() >= 3.0 ) && 
                ( Double.valueOf(args[0].trim()).doubleValue() <= 48.0 ) && 
                ( Double.valueOf(args[0].trim()).doubleValue()) % 0.5 == 0 ) {
            width = (int) (Double.valueOf(args[0].trim()).doubleValue() * 2); // Double the width so that we are working with an integer.
        } else {
            System.out.println("Please enter a number for your width that is between 3 and 48 and divisable by 0.5.");
            System.exit(1);
        }
        // Check that a data type of integer was entered.
        if ( ( args[1].matches("^[0-9]+$") ) && ( Integer.valueOf(args[1]) >= 1 ) && ( Integer.valueOf(args[1]) <= 10 )) {
            height = Integer.valueOf(args[1].trim()).intValue();
        } else {
            System.out.println("Please enter an integer for your height that is between 1 and 10.");
            System.exit(1);
        }

        List<Row> allRows = new ArrayList<Row>(); // Holds all the possible rows and needed information
        findAllRows(width, 0, 0, allRows);
        findMatches(allRows);
        long totalTables = findUniqueTables(allRows, height);
        System.out.println(totalTables);
    }
}

/**
 * Recursively calculates all possible row combinations for supplied width.
 * Row configuration is stored in binary format with 1 indicating gaps.  Each bit is
 * represented by 3 inches.  The bits 1, 2, nth are dropped as they are not needed.
 * 
 * i.e. width of 12 would produce
 * width = 12 * 2 = 24
 * 
 * Bricks               Binary              Stored Binary   Decimal Value
 * 6 x 6 x 6 x 6        0 1 0 1 0 1 0 1     1 0 1 0 1       21
 * 9 x 9 x 6            0 0 1 0 0 1 0 1     0 1 0 0 1       9
 * 9 x 6 x 9            0 0 1 0 1 0 0 1     0 1 0 1 0       10
 * 6 x 9 x 9            0 1 0 0 1 0 0 1     1 0 0 1 0       18
 */

public static void findAllRows(int width, int currLen, int rowConfig, List<Row> root) {
    if (currLen + 6 == width) {
        root.add(new Row(width, rowConfig)); // Add current row configuration as an acceptable row.
        return;
    } else if (currLen + 9 == width) {
        rowConfig = rowConfig << 1;
        root.add(new Row(width, rowConfig)); // Add current row configuration as an acceptable row.
        return;
    } else if (currLen + 6 > width) {
        return; // Current configuration is longer than the width is allowed.  Do not add.
    } else {
        int nextConfig = (rowConfig << 2) + 1;  //
        findAllRows(width, currLen + 6, nextConfig, root);

        nextConfig = (rowConfig << 3) + 1;
        findAllRows(width, currLen + 9, nextConfig, root);
    }
    return;
}

/**
 * Finds all possible row matches for the given row that do not have gaps that line up.
 */
public static void findMatches(List<Row> rows) {
    for (Row row : rows) {
        for (Row rowC : rows) {
            if (matchesBelow(row.getGaps(), rowC.getGaps())) {
                row.addChilcRows(rowC.getGaps());
            }
        }
    }
}

/**
 * Does a bitwise AND to see if there are any gaps that line up.  If there are no gaps then
 * the resulting AND should equal to 0.
 */
public static boolean matchesBelow(int row, int rows) {
    if ((row & rows) == 0) {
        return true;
    } else {
        return false;
    }
}

/**
 * Finds all the unique tables and returns the count.
 */
public static long findUniqueTables(List<Row> allRows, int height) {
    long tableCount = 0;
    for (Row row : allRows) {
        tableCount += findTables(row, height);
    }
    return tableCount;
}

/**
 * This makes all possible tables.
 */
public static long findTables(Row row, int tableHeight) {
    long count;
    if (tableHeight == 1) {
        return 1;
    } else {
        count = 0;
        for (int i = 0; i < row.getChildRowsSize(row); i++) {
            count += findTables(row, tableHeight -1);
        }   
    }
    return count;
}
} 
```

还有我的puzzle.Row 类。

```
package puzzle;

import java.util.ArrayList;
import java.util.List;

public class Row {
int gaps;
int width;
List<Long> potChildRows = new ArrayList<Long>();

public Row(int width, int gaps) {
    this.gaps = gaps;
    this.width = width;
}

public int getGaps() {
    return this.gaps;
}

public int getWidth() {
    return this.width;
}

public long getChildRowsSize(Row row) {
    return row.potChildRows.size();
}

public void addChilcRows(long row) {
    this.potChildRows.add(row);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:10:35.137

我想我刚刚完成了任务。尽管问这个问题已经两个月了，但我认为这看起来是一个有趣的问题，所以我试了一下。由于“作业”标签（即使在 2 个月后），我不想发布我的代码，所以我将只描述我的方法。我使用了 Python，但我会尝试将任何术语翻译成 Java。

首先，我觉得您正在跟踪比您需要的更多的数据。我只是保留了一个双精度数组列表，这样对于任何双精度数`i`，都`i`引用一个 ix1 块。该列表的顺序`row[0]`是最左边的块和`row[row.length-1]`最右边的块。例如，`[3, 3, 4.5]`指长度为 10.5 的行，从左到右使用一个 3x1 块、另一个 3x1 块和一个 4.5x1 块。使用这个简单的结构，我可以轻松地可视化我的配置。我的行长就像将所有元素加在一起一样简单（即`3 + 3 + 4.5 = 10.5`）。我的差距就像在遍历我的列表时保持运行总数一样容易（即我的差距是`3`和`3 + 3 = 6`）。使用这种更简单的数据类型，您可以大大简化您的代码。

此外，我发现将问题视为修改后的[Depth-First Search](http://en.wikipedia.org/wiki/Depth-first_search)很有帮助。使用 DFS 并给定一棵二叉树，从根开始，您首先尝试向左走。然后，您尝试只剩下最后一个节点。等等。考虑“3”和“4.5”，而不是“左”和“右”，其中节点的值是宽度，一旦宽度变得大于所需的宽度，您就停止遍历树`width`。如果你找到一个值为 exact 的节点`width`，那条路径现在是一个可能的行，记住它。换句话说，您首先尝试 N 个 3x1 块（例如`width + 2.5 >= N*3 >= width`），从左到右构建行。然后你尝试 (N-1) 个 3x1 块和 1 个 4x1 块（4x1 是最正确的）。然后是 (N-2) 个 3x1，一个 4x1，还有一个 3x1。等等。没有位移，没有`rowConfig`变量，只是块宽度的 ArrayList。此外，由于您系统地走过每条路径（即尝试每种组合）一次且仅一次，因此您知道您已经尝试了每种组合并且您知道没有重复。

现在，建造你的墙。这也可以被视为修改后的 DFS。想象一个 n 叉树，其中 n 等于 width 的潜在行数`width`。使用相同的系统方法，尝试每条路径，直到你有一个高度的墙`height`（因为每一行的高度为 1）。但请记住，如果没有任何间隙相邻，您只想遍历路径。尝试从下向上一次建造一排墙。当且仅当没有一个间隙与顶行的间隙相邻时，通过在墙的顶部添加一个新行，您可以相信您的部分墙始终有效。在那里，一旦你击中`height`，你就知道你有一堵有效的墙。记录路径并继续，直到没有更多有效路径可供探索。

我很抱歉在你还在做作业的时候没有回答。我很想知道您的最终解决方案与我的不同。

# ruby-on-rails - 创建时的 activerecord 标志，但未保存到数据库

> ID：10115910
> 
> 赞同：0
> 
> 时间：2012-04-12T00:37:47.517
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.1

我有一个活动记录模型，并且想要一种方法来获得一个在创建时传递但不是数据库中的行的属性。基本上，它将确定是否在另一个表中创建了日志记录。

我在想这样的事情：

```
Item.create!({:header_id => 17, :header => 'here is my value', :position => 13.125, :created_from_inventory => true }) 
```

:created_from_inventory 在 db 中不存在，但将在回调中使用。

关于如何做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:19:48.460

尝试将此添加到项目模型

```
attr_accessor :created_from_inventory 
```

它将为您的模型添加一个非 db 属性。只要实例存在，它就会存在。一旦实例超出范围，它将丢失。

# java - 从不同的类调用方法

> ID：10115911
> 
> 赞同：1
> 
> 时间：2012-04-12T00:37:50.470
> 
> 标签：java, swing, jpanel, jbutton, actionlistener

我有一个需要在屏幕上打印出来的对象的 ArrayList。我有一个按钮和一个侦听器，它们应该调用一个扩展 JPanel 的类中的方法，该 JPanel 添加在 MainFrame 类中。

这是我想在名为 AddOrderPanel 的类中调用的方法。

```
 public void addLCheese(){ 
         BigDecimal price = new BigDecimal("8.99");
         CheesePizza largeCheese = new CheesePizza("Large Cheese/Tomato",price);
         OrderItem laCheese = new OrderItem(largeCheese,1);
         System.out.println(largeCheese.getDescription()+" "+largeCheese.getPrice()+" " +laCheese.testArray());
          JPanel order = new JPanel();
         order.setBackground(Color.blue);
      order.setPreferredSize(new Dimension(800,50));
        add(order,BorderLayout.CENTER);
     revalidate();

} 
```

这是我的监听器代码：

```
 lCheese.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e) {
 AddOrderPanel orderPanel;
              orderPanel.addLCheese();

            }
      }); 
```

当我尝试它时，它返回 NullPointerException，想法？

我的面板对象。

```
 private JFrame myMainFrameObject;
    AddOrderPanel(JFrame theMainFr){  
    myMainFrameObject = theMainFr;
          this.setLayout(new FlowLayout(FlowLayout.RIGHT));
         setBackground(Color.red);
         setPreferredSize(new Dimension(800,0));     
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:39:39.517

`orderPanel`在调用之前你没有分配任何东西`orderPanel.addLCheese()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:40:20.757

在您的侦听器中进行此更改以获取 JFrame，然后创建 AddOrderPanel 的新实例

```
 lCheese.addActionListener(new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent e) {
           Component component = (Component) e.getSource();
           JFrame frame = (JFrame) SwingUtilities.getRoot(component);
           AddOrderPanel orderPanel = new AddOrderPanel(frame);
           orderPanel.addLCheese();

        }
  }); 
```

# c++ - 在 cpp 文件中定义方法时未解决外部问题，但在标头中未解决

> ID：10115912
> 
> 赞同：2
> 
> 时间：2012-04-12T00:37:52.467
> 
> 标签：c++, linker, c++11, visual-c++-2010, unresolved-external

**更新 2**：找到导致此问题的前向声明错误

**更新**：*使用 Visual Studio 2010 库存编译器编译，启用了 c++0x。*

我有一个具有奇怪行为的成员函数的类。

当我在 cpp 文件中定义方法时，链接器会因“未解析的外部符号”错误而崩溃。当我将定义移动到标题时，它编译得很好。

1）这不是模板方法 2）cpp 文件肯定正在编译 3）我很难过

有什么想法吗？

头文件

```
// THIS IS THE ERROR HERE: I forward declare TPA as a class, when it is actually a struct
class TollingPathAttributes; // forward declare the TollingPathAttributes struct as a class (doh!)

class TollingPathAttributesOutput
{
public:
    TollingPathAttributesOutput(HighwayCommand* command);
    ~TollingPathAttributesOutput();

    void foo();
    void AddPathAttributes(boost::shared_ptr<TollingPathAttributes> attributes);

protected:
    string                                      m_outputFilename;
    vector<shared_ptr<TollingPathAttributes>>   m_data;
    queuing_mutex                               m_dataMutex;
}; 
```

.cpp 文件

```
void TollingPathAttributesOutput::foo() {}

void TollingPathAttributesOutput::AddPathAttributes(boost::shared_ptr<TollingPathAttributes> attributes)
{
    queuing_mutex::scoped_lock lock(m_dataMutex);
    m_data.push_back(attributes);
} 
```

调用调用

```
m_output->foo();  // compiles and links no problem
boost::shared_ptr<TollingPathAttributes> attr = 
    boost::make_shared<TollingPathAttributes>(origin, dest, UNTOLLED_OPTION, vector<int>(), 0.0, 0.0);
m_output->AddPathAttributes(attr); // compiles fine, but only links correctly if I move the definition to the header 
```

链接错误

```
1>OtCustomZenith_logic.lib(TollingPathAttributesRecorder.obj) : error LNK2019: unresolved external symbol "public: void __thiscall TollingPathAttributesOutput::AddPathAttributes(class boost::shared_ptr<class TollingPathAttributes>)" (?AddPathAttributes@TollingPathAttributesOutput@@QAEXV?$shared_ptr@VTollingPathAttributes@@@boost@@@Z) referenced in function "public: virtual void __thiscall TollingPathAttributesRecorder::Record(class TolledPath &,class boost::shared_ptr<class Path>,int)" (?Record@TollingPathAttributesRecorder@@UAEXAAVTolledPath@@V?$shared_ptr@VPath@@@boost@@H@Z)     
1>..\..\..\OT\OtCustomZenith_test.exe : fatal error LNK1120: 1 unresolved externals 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:37:07.623

感谢每一位试图提供帮助的人——不幸的是，这个错误发生在键盘后面大约 1 英尺处。这里的问题归结为使用前向声明来加快我的编译时间。因为我***错误地***将 TollingPathAttributes 的类型声明为类而不是结构。

这意味着标头的定义与 cpp 中的定义略有不同，因为我实际上在 cpp 文件中包含了 TollingPathAttributes 的完整定义。使这个问题感到困惑的是，我收到的错误消息不是我期望收到的 - 正如@MarkRansom 所说，通常如果 cpp 和标头之间不匹配，那将是编译错误而不是链接错误所以我必须得出结论：

1) 编译器只是简单地推进了不正确的基于“类”（而不是“结构”）的定义，即使它一旦拥有完整的定义就知道得更好。导致一个 lib 文件的签名几乎但不是链接器正在寻找的。

2）其他一些奇怪的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:29:47.790

从错误消息来看，您的 .cpp 文件正在编译为 .lib。是否有可能存在两个 .lib 副本，一个在每次编译时更新，另一个链接到您的 .exe？

# php - 通过php获取xml的第一个孩子

> ID：10115913
> 
> 赞同：0
> 
> 时间：2012-04-12T00:37:56.337
> 
> 标签：php, xml

我不是最擅长 php，但已经做到了这一点。我想要做的是获取 xml 文件的第一个子文件...我已经弄清楚了如何进行 foreach 并获得每个结果，但我输入了以下代码并得到了一个空白页

```
 $url = file_get_contents("http://www.thetvdb.com/api/GetSeries.php?seriesname=house");
                $xml = simplexml_load_string($url);

                $seriesid = $xml->series->seriesid;
                echo $seriesid; 
```

我可以毫无问题地做到这一点

```
 $url = file_get_contents("http://www.thetvdb.com/api/GetSeries.php?seriesname=house");
                $xml = simplexml_load_string($url);
                foreach($xml->children() as $child) {
                  echo '<div>Series ID: '.$child->seriesid.'</div>';
                  echo '<div>Series Name: '.$child->SeriesName.'</div>';
                  echo '<div>Language: '.$child->language.'</div>';
                  echo '<div>First Aired: '.$child->FirstAired.'</div>';
                  echo '<div>Overview: '.$child->Overview.'</div>';
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:42:19.633

你应该使用`$xml->Series[0]->seriesid`insted ...

笔记

`$xml->Series`是一个有这么多孩子的数组，第一个数组`key`是`0`

第一个数组也是如此`$xml->Series[0]`，您现在可以选择数组中的任何对象

演示：[http ://codepad.viper-7.com/KVJWAI](http://codepad.viper-7.com/KVJWAI)

我希望这有帮助

# iphone - 工具栏不会显示在键盘上方

> ID：10115914
> 
> 赞同：3
> 
> 时间：2012-04-12T00:38:00.070
> 
> 标签：iphone, objective-c, ios5, uitoolbar

我无法让工具栏显示在键盘上方（就像苹果的完成按钮一样）。有什么可以想到为什么它没有显示？就像下图一样。

![在此处输入图像描述](../Images/cbf07fdab302d215633b767ada22a2ee.png)

。H

```
@interface CustomerNotesController : UITableViewController <UITextViewDelegate>
{
    UIToolbar *noteToolbar;
    IBOutlet UITextView *note;
    id delegate;
}

@property (nonatomic, strong) IBOutlet UITextView *note;
@property (nonatomic, retain) id delegate;
@property (nonatomic, retain) UIToolbar *noteToolbar; 
```

.m

```
@synthesize note, noteToolbar, delegate;

- (void)viewDidLoad
{
    [super viewDidLoad];

    [note setDelegate:self];
    [note becomeFirstResponder];
}

- (void)textViewDidBeginEditing:(UITextView *)textView
{
    NSLog(@"EDITING");
    if (noteToolbar == nil) {
        NSLog(@"Creating toolbar");

        noteToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.bounds.size.width, 44.0)];
        noteToolbar.barStyle = UIBarStyleBlackTranslucent;

        UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelNote:)];

        UIBarButtonItem *clearButton = [[UIBarButtonItem alloc] initWithTitle:@"Clear" style:UIBarButtonItemStyleBordered target:self action:@selector(clearNote:)];

        UIBarButtonItem *extraSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

        UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSave target:self action:@selector(saveNote:)];

        noteToolbar.items = [NSArray arrayWithObjects:cancelButton, clearButton, extraSpace, doneButton, nil];
        NSLog(@"Items: %@", noteToolbar.items);
    }

    NSLog(@"Current field: %@",textView);
    NSLog(@"keyboard: %@", noteToolbar);
    textView.inputAccessoryView = noteToolbar;
} 
```

日志

```
2012-04-11 17:31:00.148 MyApp[28892:fb03] EDITING
2012-04-11 17:31:00.148 MyApp[28892:fb03] Creating toolbar
2012-04-11 17:31:00.149 MyApp[28892:fb03] Items: (
    "<UIBarButtonItem: 0x10dc3420>",
    "<UIBarButtonItem: 0x10dc3480>",
    "<UIBarButtonItem: 0x10dc34e0>",
    "<UIBarButtonItem: 0x10dc3540>"
)
2012-04-11 17:31:00.149 MyApp[28892:fb03] Current field: <UITextView: 0x10d94f40; frame = (5 5; 310 140); text = 'This is sample text'; clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x10d95170>; contentOffset: {0, 0}>
2012-04-11 17:31:00.150 MyApp[28892:fb03] keyboard: <UIToolbar: 0x10dc2820; frame = (0 0; 320 44); opaque = NO; layer = <CALayer: 0x10dc2730>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:51:06.710

//使用这个方法

```
-(BOOL)textViewShouldBeginEditing:(UITextView *)textView{

    textView.inputAccessoryView = yourToolBar;

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T18:42:15.917

尝试在方法中设置这些`viewDidLoad`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:24:28.270

你不可以做这个。键盘是您无法直接控制的系统控制的 UIView。操作系统会将键盘视图置于所有其他视图之上，以确保它具有正确的焦点来收集用户输入。

你能提供更多关于你为什么要这样做的背景吗？即使您确实找到了一种使视图按照您描述的方式运行的方法，它也几乎肯定会因为违反人机界面指南而被 Apple 拒绝。

# php - 从 $_GET[] 数组中提取变量名

> ID：10115917
> 
> 赞同：1
> 
> 时间：2012-04-12T00:38:31.000
> 
> 标签：php, variables, post, get, boolean

我想要做的是`?`像 $_GET 一样在查询之后提取所有内容。我知道我可以使用`$_GET['test']`拉`?test=true`，但如果我只想拉`?true`或者`?false`我想`?`在变量中保存所有内容怎么办。我可能会使用`$_SERVER`get pull the url 然后将其切成我需要的内容，但这似乎是一种漫长/不正确的做法。有没有更简单的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T00:41:55.407

您可以从变量中获取`?`（称为[查询字符串）之后的所有内容：](https://en.wikipedia.org/wiki/Query_string)

```
$_SERVER['QUERY_STRING'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:44:34.897

你肯定想要`$_SERVER['QUERY_STRING']`。[您可以在http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)找到很多很少使用但非常有用的 $_SERVER 变量

# jasper-reports - iReport没有返回数据如何显示静态消息

> ID：10115919
> 
> 赞同：1
> 
> 时间：2012-04-12T00:38:45.070
> 
> 标签：jasper-reports, ireport

我使用 iReport 4.5 和返回 ref 游标的 Oracle 存储过程设计了一个报表。

当我传递正确的参数时，报告成功返回数据。到目前为止一切都很好。

当我传递不正确的参数时，iReport 设计器显示无数据以显示消息，因此我将报告属性**“无数据时”**更改为**“所有部分，无详细信息”** - 到目前为止一切都很好。

**但是我的业务要求是显示一个带有“ No Data to Display** ”消息的虚拟带，并且只有在存储过程没有返回记录时才会显示该带，并且在存储过程返回数据时不应该显示该带。我怎么做...

感谢您对此的帮助。

梅萨

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T01:27:04.477

使用**“无数据时”**选项，您还可以使用**“无数据部分”**选项。只有当没有返回记录时，才会显示报告的**“无数据”部分。**唯一的问题是您将丢失报告其余部分中的任何其他标题。您可以通过创建一个包含所有所需页眉/页脚的主报表来解决此问题，然后创建一个包含记录查询和**“无数据”**部分的子报表。

# osx-lion - 无法导入 Pycurl：“libcurl 链接时版本比编译时版本旧”

> ID：10115925
> 
> 赞同：2
> 
> 时间：2012-04-12T00:40:03.883
> 
> 标签：osx-lion, python-2.7, libcurl, pycurl

我在导入 pycurl 时遇到了困难。

```
>>> import pycurl
Fatal Python error: pycurl: libcurl link-time version is older than compile-time version
Abort trap: 6 
```

我正在运行 OS X Lion 和 Python 2.7.1。

任何指针将不胜感激。我在网站上搜索此问题时空手而归。

谢谢，

本

# actionscript-3 - 减小宽度时如何防止 Rect 从其位置移动

> ID：10115927
> 
> 赞同：0
> 
> 时间：2012-04-12T00:40:07.667
> 
> 标签：actionscript-3, flash, rect

当我想要做的只是减小它们的宽度时，我似乎遇到了矩形从指定位置移动的问题。我正在开发的一款游戏模拟了带有保险丝的炸药。随着时钟倒计时到 0，保险丝的尺寸减小。我认为问题与局部坐标与全局坐标有关，但我不知道如何解决这个问题。这是一些代码：

```
//fuse
_fuse = new Sprite();
_fuse.graphics.beginFill(0x000000);
_fuse.graphics.drawRect(630, 340, (_fuseCounter / _fuseWidth) * 120, 20);
_fuse.graphics.endFill(); 
```

这是我减少每帧宽度的地方：

```
//decrease fuse to give the player a visual of urgency.
_fuseCounter--;         
_fuse.width = (_fuseCounter/ _fuseWidth) * 120; 
```

在我的代码中，保险丝的 x 位置没有任何变化。除了这个问题之外，rect 的功能完全符合我的要求。对此问题的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:55:36.103

您的问题是您在 630、340 处绘制矩形，然后减小它周围的宽度。

像这样想

```
0                    100
-----------------------
|                     |
|          -----      |
|         |     |     |
|          -----      |
|                     |
|                     |
----------------------- 
```

当您减小宽度时，您实际上是将外部动画剪辑的左边缘拉向右边缘，同时缩放嵌套内容。导致这样的事情

```
0                  75  
-------------------
|                 |
|      ---        |
|     |   |       |  
|      ---        |
|                 |
|                 |
------------------- 
```

所以为了解决这个问题，你可以嵌套。添加一个新的精灵到 _fuse 并缩放它

```
var s:Sprite = new Sprite();
s.x =630;
s.y = 340
s.graphics.drawRect(0, 0, (_fuseCounter / _fuseWidth) * 120, 20);
fuse.addChild(s); 
```

然后缩放 s.width

如果你不想嵌套，你也可以做一个 graphics.clear() 并将矩形重绘为新的、更小的宽度

# asp.net-mvc - 在 ASP.NET MVC 中将模型数据传递给视图的正确方法

> ID：10115930
> 
> 赞同：0
> 
> 时间：2012-04-12T00:40:29.633
> 
> 标签：asp.net-mvc, model

这不是那么重要，但我得到的信息相互矛盾，所以我想在这里问。

假设我有一个简单的控制器，我想将模型传递给视图。大多数时候我看到它是这样的：

```
[HttpGet]
public ActionResult Foo() {
    var bar = new SomeModel() {
        Id = 1,
        Name = "John Dork",
        Email = "some@email.something"
    };
    ViewData.Model = bar;
    return View();
} 
```

或者像这样：

```
[HttpGet]
public ActionResult Foo() {
    var bar = new SomeModel() {
        Id = 1,
        Name = "John Dork",
        Email = "some@email.something"
    };
    return View(bar);
} 
```

**问题**：虽然我不知道这两种将数据发送到视图的方式之间的区别，但实际上有区别吗？他们***有什么***不同？这样做的“正确”方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:51:53.043

它们是等价的。在MVC源代码中，`View(object)`定义为：

```
 protected internal ViewResult View(object model)
    {
        return View(null /* viewName */, null /* masterName */, model);
    } 
```

依次调用：

```
 protected internal virtual ViewResult View(string viewName, string masterName, object model)
    {
        if (model != null)
        {
            ViewData.Model = model;
        }

        return new ViewResult
        {
            ViewName = viewName,
            MasterName = masterName,
            ViewData = ViewData,
            TempData = TempData,
            ViewEngineCollection = ViewEngineCollection
        };
    } 
```

你可以看到它只是设置`ViewData.Model`。

没有“正确”的做法，但我觉得第二种方法（即不使用`ViewData.Model`）更流畅和令人愉悦。

# meteor - 从一个 Meteor 工作区切换到另一个

> ID：10115931
> 
> 赞同：3
> 
> 时间：2012-04-12T00:40:30.507
> 
> 标签：meteor

示例：您制作了“待办事项”示例，并且它正在运行。突然，你想开始一个名为“西瓜”的全新项目。我的假设是我能够再次`cd ~/watermelon`运行`meteor`，并让它切换。不是这样。建议？也许我应该提出这个要求。

流星也没有出现`jobs`，所以我不知道如何杀死它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:55:52.940

您一次运行多个流星项目应该没有问题，只需确保您在不同的端口上运行即可。

```
todo : meteor
watermelon : meteor --port 5000 
```

注意，meteor 使用端口 N+1 和 N+2（所以不要使用端口 3001 或 3002）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:01:50.340

我刚刚对其进行了测试，您的建议似乎在这里有效：

```
meteor create foo
cd foo
vim foo.html # Edit some stuff
meteor # visit http://localhost:3000 in a browser, foo stuff shows up
# Ctrl-C meteor
cd ..
meteor create bar
meteor # Visit http://localhost:3000, and a brand new project shows up 
```

您可能需要确保关闭了在另一个项目中运行的流星服务器。如果您在后台运行它，请尝试这样的方法来获取 pid 并杀死它：

```
ps ax | grep node | grep meteor # Look at the output and note the PID number on the left
kill <that pid value> 
```

您可以将所有内容包装在一个 shell 命令中（为方便起见，您可以将其作为脚本添加到某处），如下所示：

```
kill `ps ax | grep node | grep meteor | cut -d ' ' -f 1` 
```

所有这些都假设您处于 Linux 或 OS X 环境中。如果您正在运行 Windows，您可能需要使用任务管理器、进程资源管理器或类似的工具来查找正在运行的 node.js 进程。按名称对进程进行排序并查找以“node”开头的内容。

# string - 汇编，将 ascii 值存储到寄存器中

> ID：10115933
> 
> 赞同：1
> 
> 时间：2012-04-12T00:40:57.283
> 
> 标签：string, assembly

如何将 8 个 ascii 值存储到寄存器或变量中？例如，我在 ascii 30 30 34 20 33 32 32 00 中有这些值

这将是 004 322

80x86 架构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:58:31.567

```
mov eax 30303420
mov ebx 33323200 
```

或者你可以在数据段中做

```
var db 30 , 30 ,34 ,20 ,33 ,32 ,32, 00 
```

您也可以使用堆栈（LIFO）：

```
mov eax 30303420
mov ebx 33323200
push ebx
push eax 
```

或到一个寄存器 8 字节 = 8*8 位 = 64 位：

```
mov rax 3030342033323200h 
```

**编辑：**

```
extern  printf      ; the C function, to be called

SECTION .data       ; Data section, initialized variables

a:  db  30 , 30 ,34 ,20 ,33 ,32 ,32, 00 
fmt:    db "a=%s",'0'

SECTION .text                   ; Code section.

global main     ; the standard gcc entry point
main:               ; the program label for the entry point
push    ebp     ; set up stack frame
mov     ebp,esp

push    a           ; value of variable a
push    fmt
call    printf      ; Call C function
add     esp, 8      ; maybe I missed some bytes here 

mov     esp, ebp    ; takedown stack frame
pop     ebp     ; same as "leave" op

mov eax,0       ;  normal, no error, return value
ret         ; return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:56:29.663

为什么不使用堆栈？特别是如果值不是常量

编辑：woops 可能需要对 32 位字进行一些调整 :)

```
; load values
PUSH 30
PUSH 30
PUSH 34
PUSH 20
PUSH 33
PUSH 32
PUSH 32
PUSH 0

; do stuff
; [ESP] = 0  (last value)
; [ESP+7] = 30  (first value)

; restore stack pointer  ("free memory")
SUB ESP, 8 
```

# java - 在标准输出中打印数字的程序

> ID：10115936
> 
> 赞同：0
> 
> 时间：2012-04-12T00:41:30.840
> 
> 标签：java

我在一次采访中被问到这个问题。我想知道这是否是某种技巧问题，或者我需要考虑一些不同的问题。

**问题：**编写从 1 到 10 的代码，并将每个值输出到标准输出。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:46:54.527

也许这个问题是为了看看你将*如何*解决这个问题，即使它看起来很简单。

明显的解决方案：

```
for (int i = 1; i <= 10; i++)
   System.out.println(i); 
```

替代解决方案：

```
int i = 1;

while (i <= 10)
{
   System.out.println(i);

   i++;
} 
```

也许如果你给出了上面的替代解决方案，你的面试官会问你为什么选择这种方法而不是更明显的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:32:13.660

只是递归的方式。

```
 void display(int i){

     if(i==0){
     return;
}else{
    System.out.println(i);
    display((--i));
    }
 } 
```

使用 display(10) 调用上述方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:32:04.213

另一种解决方案：

```
int i = 1;
while (i <= 10)
{
  System.out.println(i++);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T00:43:47.907

很多这样的面试问题只是为了看看你实际上可以用这种语言编写一个 for 循环。许多申请人不能。

[杰夫阿特伍德](http://www.codinghorror.com/blog/2007/02/why-cant-programmers-program.html)已经多次注意到这一点。

# android - 将原生 Google 地图嵌入移动应用程序

> ID：10115937
> 
> 赞同：0
> 
> 时间：2012-04-12T00:41:32.420
> 
> 标签：android, ios, google-maps

我们正在开发一个移动应用程序（`iOS`和`Android`），并希望在我们的自定义移动应用程序中嵌入原生谷​​歌地图应用程序。当用户单击某些内容时，它不会启动 Google 本地地图应用程序，而是在自定义开发应用程序中显示本地 Google 地图应用程序。我们知道 Google 提供 JavaScript API 来连接到地图网络服务。但是我们不能捏缩放在线地图。我在 iPhone 中看到了一些应用程序，它们在自定义应用程序中嵌入了 iOS 附带的谷歌地图。您能否建议是否可以将本地 Google 地图应用程序嵌入到自定义应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:45:35.423

在 Android 中，您应该使用 MapViews 和 MapActivities。

更多信息：

[安卓文档](http://developer.android.com/guide/tutorials/views/hello-mapview.html)

**Android Recipes A Problem-Solution Approach**和**The Busy Coder's Guide to Android Development**这两本书都有很好的章节来解决您的问题

# javascript - jquery弹出窗口不会用按键关闭，但会点击

> ID：10115945
> 
> 赞同：-2
> 
> 时间：2012-04-12T00:42:14.657
> 
> 标签：javascript, jquery, keypress, popupwindow

我现在在使用 jquery 时遇到了一个烦人的问题。在我解释之前，让我给你我的代码：

```
/***************************/
//@Author: Adrian "yEnS" Mato Gondelle
//@website: www.yensdesign.com
//@email: yensamg@gmail.com
//@license: Feel free to use it, but keep this credits please!                  
/***************************/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;

//loading popup with jQuery magic!
function loadPopup($contact_selector){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        }).fadeIn("slow");

        $contact_selector.fadeIn("slow");

        popupStatus = 1;
    }
}
//disabling popup with jQuery magic!
function disablePopup($contact_selector){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $contact_selector.fadeOut("slow");
        popupStatus = 0;
    }
}

//centering popup
function centerPopup($contact_selector){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $contact_selector.css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}

//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){   
    //LOADING POPUP
    //Click the button event!
    $("#button1").click(function(){
        //centering with css
        centerPopup($('#popupContact1'));
        //load popup
        loadPopup($('#popupContact1'));
    });
    $("#button2").click(function(){
        //centering with css
        centerPopup($('#popupContact2'));
        //load popup
        loadPopup($('#popupContact2'));
    });
    $("#button3").click(function(){
        //centering with css
        centerPopup($('#popupContact3'));
        //load popup
        loadPopup($('#popupContact3'));
    });
    $("#button4").click(function(){
        //centering with css
        centerPopup($('#popupContact4'));
        //load popup
        loadPopup($('#popupContact4'));
    }); 
    $("#button5").click(function(){
        //centering with css
        centerPopup($('#popupContact5'));
        //load popup
        loadPopup($('#popupContact5'));
    });
    $("#button6").click(function(){
        //centering with css
        centerPopup($('#popupContact6'));
        //load popup
        loadPopup($('#popupContact6'));
    });                 
    //CLOSING POPUP
    //Click the x event!
    $("#popupContactClose1").click(function(){
    disablePopup($('#popupContact1'));
});
    $("#popupContactClose2").click(function(){
    disablePopup($('#popupContact2'));
});
    $("#popupContactClose3").click(function(){
    disablePopup($('#popupContact3'));
});
    $("#popupContactClose4").click(function(){
    disablePopup($('#popupContact4'));
});
    $("#popupContactClose5").click(function(){
    disablePopup($('#popupContact5'));
});
    $("#popupContactClose6").click(function(){
    disablePopup($('#popupContact6'));
});
    //Click out event!
    $("#backgroundPopup").click(function(){
        disablePopup(this);
    });
    //Press Escape event!
    $(document).keypress(function(e){
    if(e.keyCode==27){
        disablePopup($('#popupContact1'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27){
        disablePopup($('#popupContact2'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact3'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact4'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact5'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact6'));
    }
});

}); 
```

所以问题是，当我尝试使用按键功能淡出 div 时，只有背景淡出，让 div 漂浮在内容窗格上。特别奇怪的是，代码的第一个实例允许在 esc 按键上淡出，但其他都不允许。

知道可能出了什么问题吗？

Edit1：我意识到只有第一个 $(document) 调用有效

```
 //Press Escape event!
    $(document).keypress(function(e){
    if(e.keyCode==27){
        disablePopup($('#popupContact1'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27){
        disablePopup($('#popupContact2'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact3'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact4'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact5'));
    }
});
    $(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup($('#popupContact6'));
    }
});

}); 
```

第一次调用背景 div 后的所有内容都会消失，文本框会留在容器上方。如果我切换这些调用的顺序并将 disablePopup[($('#popupContact2')) 放在 disablePopup[($('#popupContact1')) 之前，则 popupContact1 在按键时留在容器中，而不是 popupContact2

编辑：我意识到这个问题有点混乱，所以我试图在我的执行中更加清楚。如果您想继续找出问题，请在以下链接中查看新问题： [jquery popup window won't close on keypress](https://stackoverflow.com/questions/10125964/jquery-popup-window-wont-close-on-keypress)

编辑2：这已解决 - 尖锐的建议我为我需要关闭的每个项目添加一个类，然后让 js 关闭所有打开的弹出窗口 - 就像一个魅力一样谢谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:54:35.310

从 jQuery 文档中，您不应该使用`.keyCode`，但是`.which`

我从[http://api.jquery.com/keypress/得到的](http://api.jquery.com/keypress/)

```
$(document).keypress(function(e){
  if(e.which==27){
    disablePopup($('#popupContact2'));
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:47:33.320

将您的代码更改为：

```
$("#popupContactClose6").keypress(function(e){
            if(e.keyCode==27 && popupStatus==1){
                disablePopup6();
            }
        }); 
```

您忘记了结束“ ...

**编辑：**

尝试以不同的方式进行操作：

```
$('#backgroundPopup, #popupContact6').fadeOut("slow"); 
```

使用`keyup`事件而不是`keypress`让`ESC`密钥按预期工作，如下所示：

```
$("#popupContactClose6").keyup(function(e) {

            if(e.keyCode==27 && popupStatus==1) {

                disablePopup6();
            }
});

function disablePopup6() {

       $('#backgroundPopup, #popupContact6').fadeOut("slow");

        popupStatus = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:27:16.417

我为每个 id 添加了一个类并用它来关闭 - 这就像一个魅力

零食鱼

# google-maps - 打印问题：带方向的谷歌地图

> ID：10115950
> 
> 赞同：0
> 
> 时间：2012-04-12T00:42:43.553
> 
> 标签：google-maps, printing

我已将 Google Maps API（带有方向）嵌入到我正在更新的网站上。它工作得很好......直到我尝试打印。如果我打印到 PDF 很好，但是将它发送到打印机只会生成 3 个空白页。这是我的 print.css：

```
 #bg, #footer, #header, #enter-info, #driveit, #find, #leftcolumn, #print-button { visibility:hidden; }

#map_area{
    position:absolute;
    top:25px;
    left:120px;
    width:8.5in;
    margin:0 auto;
    clear:both;}

#directions{
    position:relative;
    left:25px;
    width:3.75in;}

#map_canvas{
    position:relative;
    float:right;
    right:25px;
    width:4in;
    min-height:500px;} 
```

我以为这很简单，但它让我发疯了！

任何想法将不胜感激。

编辑：这个问题可以关闭，因为我终于让它工作了。解决方案是在包装 div 中添加“display:inline”，在方向和地图 div 中添加“display:block”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T17:05:38.447

解决方案是在包装 div 中添加“display:inline”，在方向和地图 div 中添加“display:block”。

# javascript - Symfony2：JavaScript 不适用于 Prod 环境

> ID：10115951
> 
> 赞同：3
> 
> 时间：2012-04-12T00:43:00.470
> 
> 标签：javascript, symfony, twig, assetic

在 Dev 环境中它工作得很好，但是当我切换到 Prod 时它什么也没做。看起来它没有附加事件侦听器（当我使用 Chrome 检查元素时，没有在应该的位置检测到事件侦听器）。有任何想法吗？我已经清除了两个缓存，也许重要的是说我已经复制了

```
_assetic:
resource: .
type:     assetic 
```

从 routing_dev.yml 到 routing.yml 因为如果我不这样做，我会收到以下 500 Internal Server Error：

```
request.CRITICAL: Twig_Error_Runtime: An exception has been thrown during the rendering of a template ("Route "_assetic_f582f37" does not exist.") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T01:40:40.887

Have you dumped your asset files?

```
php app/console assetic:dump --env=prod --no-debug 
```

[http://symfony.com/doc/current/cookbook/assetic/asset_management.html#cookbook-assetic-dumping](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#cookbook-assetic-dumping)

# mysql - MySQL中INSERT时大量潜在重复行的策略

> ID：10115957
> 
> 赞同：0
> 
> 时间：2012-04-12T00:44:26.290
> 
> 标签：mysql, database, database-design

我有大约 50,000 个第 3 方数据源，每五分钟就会读取一次。这个想法是检查更新的内容。我有以下表格：

**饲料**

*   ID
*   姓名
*   网址

**帖子**

*   ID
*   feed_id
*   标题
*   内容
*   网址
*   unique_hash（基于 url + 标题）

我的第一种方法是使 posts.unique_hash 成为唯一索引字段，以便在尝试 INSERT 时失败。大多数 INSERT 只会失败（如预期的那样）。但是，我的问题是我需要经常在“posts”表上运行 SELECT（对于此应用程序的另一部分），因此不断运行大量 INSERTS（许多失败）将消耗表的资源。

我当然可以在尝试插入之前在“帖子”表上执行 SELECT，但这会更加耗费资源。

我正在寻找最好的方法，它可以让我的“帖子”表的资源免费用于进行许多 SELECT 查询。使用索引表？使用缓存机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:54:38.367

（唯一）键可以是多个字段，因此您不需要计算哈希。您可以将唯一键设置为 feed_id、标题和 url 的组合，以防止插入重复信息。

除了将更多资源用于缓存多少索引等等之外，您无能为力，因为只需执行 INSERT 将是对服务器的最少查询。使用唯一索引只会使错误的插入失败，并消除您进行选择或其他操作以查看它是否应该插入。

你如何从帖子中进行选择可能会有很大不同 - 你必须告诉我们你想要撤回什么（`select * from posts where feed_id = ?`或其他东西，等等......）。根据您查询信息的方式，将确定该表上附加索引的功能性。

# ruby-on-rails-3 - 未定义的方法 opts_from_validator_args

> ID：10115958
> 
> 赞同：0
> 
> 时间：2012-04-12T00:44:28.247
> 
> 标签：ruby-on-rails-3, paperclip, datamapper, datamapper-1.2

我刚刚尝试更新一个项目以使用 DataMapper 1.2（从 1.1 开始），现在我收到了这个错误：

```
/home/joe/.rvm/gems/ruby-1.9.2-p290@marketplace-admin/gems/dm-core-1.2.0/lib/dm-core/model/relationship.rb:372:in `method_missing': undefined method `opts_from_validator_args' for Category:Class (NoMethodError) 
```

它发生在我`has_attached_file`从 dm-paperclip 调用的线路上。我尝试更新到 dm-paperclip-r3，因为该项目在 Rails 3 上，但这没有帮助。

关于可能导致此错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:21:03.280

我可以通过从我的回形针初始化程序中删除“config.use_dm_validations = true”来解决我的问题，所以现在它不会验证额外的回形针字段，但至少它可以工作。我将不得不等待更了解相关宝石的人更新 dm-paperclip 以与 dm-validations 1.2 兼容，然后才能将其放回原处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:13:44.310

我设法使这个宝石与验证一起工作。这是工作早午餐：[https](https://github.com/kot-begemot/dm-paperclip/tree/fix_for_dm_1_2_0) ://github.com/kot-begemot/dm-paperclip/tree/fix_for_dm_1_2_0 这里我描述了一些障碍：[https ://github.com/krobertson/dm-paperclip/issues/24](https://github.com/krobertson/dm-paperclip/issues/24)

更新：

宝石已修复并经过测试。我将拉取请求发送给创建者。它现在应该可以正常工作了。看看：[https ://github.com/kot-begemot/dm-paperclip/tree/fix_for_dm_1_2_0](https://github.com/kot-begemot/dm-paperclip/tree/fix_for_dm_1_2_0)

# python - 在 python 中生成集合组合的最有效的内存方法是什么？

> ID：10115967
> 
> 赞同：6
> 
> 时间：2012-04-12T00:45:55.760
> 
> 标签：python, performance, memory, combinatorics

这是我想出的代码：

```
def combinations(input):
    ret = ['']
    for i in range(len(input)):
        ret.extend([prefix+input[i] for prefix in ret])
    return ret 
```

这个算法是O(2^n)时间，但是空间可以减少吗？我听说 using`yield`可能有效，但在思考如何使用`yield`. 请不要使用内置的组合功能——我想看看它是如何实现的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T01:24:53.423

您的问题明确表示您想查看代码的外观，因此这里是 O(n) 空间解决方案的手动编码示例：

```
def combinations(input_list, acc=''):

    if not input_list:
        yield acc
        return

    next_val = input_list[0]

    for rest in combinations(input_list[1:], acc):
        yield rest

    acc += next_val

    # In python 3.2, you can use "yield from combinations(input_list[1:], acc)"
    for rest in combinations(input_list[1:], acc):
        yield rest 
```

请注意，子字符串算术可能很昂贵（因为它必须多次复制字符串），因此在复杂性方面，这里有一个更有效的版本：

```
def combinations(input_list, acc='', from_idx=0):

    if len(input_list) <= from_idx:
        yield acc
        return

    next_val = input_list[from_idx]

    for rest in combinations(input_list, acc, from_idx + 1):
        yield rest

    acc += next_val

    # In python 3.2, you can use "yield from combinations(input_list[1:], acc)"
    for rest in combinations(input_list, acc, from_idx + 1):
        yield rest 
```

我没有使用 Python 3.2，但如果你是，你可以这样写：

```
def combinations(input_list, acc='', from_idx=0):

    if len(input_list) <= from_idx:
        yield acc
        return

    next_val = input_list[from_idx]

    yield from combinations(input_list, acc, from_idx + 1)
    acc += next_val
    yield from combinations(input_list, acc, from_idx + 1) 
```

我还应该注意，这纯粹是学术性`itertools.combinations`的，因为它做得很好并且适用于更广泛的输入（包括生成器表达式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T01:36:10.707

You can use `yield` in your code like so:

```
def combinations(input):
    ret = ['']
    yield ''
    for i in range(len(input)):
        for prefix in ret:
             combination = prefix+input[i]
             ret.extend(combination)
             yield combination 
```

But it doesn't save you any space.

The [itertools.combinations documentation](http://docs.python.org/dev/library/itertools.html#itertools.combinations) shows a (much) more complicated algorithm that works in constant space - the [actual implementation](http://hg.python.org/cpython/file/bd353f12c007/Modules/itertoolsmodule.c#l2266) is in C, but claims to be equivalent.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T00:54:30.540

这样的事情应该这样做：

```
>>> print list(itertools.combinations({1, 2, 3, 4}, 3))
[(1, 2, 3), (1, 2, 4), (1, 3, 4), (2, 3, 4)]
>>> 
```

# assembly - 旧式 MS-DOS 汇编程序中的大参数和错误级别？

> ID：10115968
> 
> 赞同：1
> 
> 时间：2012-04-12T00:45:57.197
> 
> 标签：assembly, operating-system, dos

几年前，我曾经为 MS-DOS 操作系统编写 x86 汇编程序；它们中的大多数仍然未经修改地在 Windows CMD.EXE 命令处理器中运行。我的问题是关于这些程序中的两个具体点：

*   程序参数位于程序段前缀中的偏移量 81H 处，最大长度为 127 个字符。

*   程序返回的 ERRORLEVEL 值在 INT 21H 的终止程序功能 (4CH) 之前加载到 AL 寄存器中，因此它被限制在 0-255 范围内的值。

我意识到在 Windows XP 中，在 DOS 窗口中执行的命令可以处理高达 8 KB 大小的参数，并且可能会返回一个 32 位有符号值作为 ERRORLEVEL。所以我的问题是：旧式 MS-DOS 汇编程序是否有一种*简单的方法可以访问 8KB 参数并返回 32 位 ERRORLEVEL 值？*

是的，我知道一个符合 Windows 的汇编程序可以访问这些功能，但我想知道一个程序是否可以以一种非常简单的方式做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:11:38.533

[由于NTVDM](http://en.wikipedia.org/wiki/Virtual_DOS_machine)，您的 16 位程序正在 32 位 Windows 上运行。越来越多的机器默认使用 64 位操作系统，而 64 位 Windows 甚至没有 NTVDM，所以它不再工作了。

我建议您将程序移植到 32 位或 64 位 Windows。

移植后，访问命令行很容易。WinMain 和 main 都将命令行作为参数。

# ruby-on-rails - 我的 rspec 测试不会通过

> ID：10115969
> 
> 赞同：0
> 
> 时间：2012-04-12T00:46:03.280
> 
> 标签：ruby-on-rails, rspec

我正在关注 Michael Hartl 教程的第 5 章。当我从根目录运行以下命令时，

```
$ bundle exec rspec spec/ 
```

我收到以下错误：

```
No DRb server is running. running in local process instead ...
c:/sites/sample_app/spec/helpers/applcation_helper_spec.rb:1:in '<top required>>': uninitialized constant ApplicationHelper (NameError)
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/command_line.rb:746:in 'loud'
.
. 
```

我想我应该尝试找出哪些文件失败了，我发现 2 个文件出现了上述错误（其余的文件运行了测试并通过了 0 个失败）。失败的有：

1) 规范/帮助者/application_helper_spec.rb

```
describe ApplicationHelper do

  describe "full_title" do
    it "should include the page name" do
      full_title("foo").should =~ /foo/
    end

    it "should include the base name" do
      full_title("foo").should =~ /^Ruby on Rails Tutorial Sample App/
    end

    it "should not include a bar for the home page" do
      full_title("").should_not =~ /\|/
    end
  end
end 
```

2) 规范/支持/实用程序.rb

```
include ApplicationHelper 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:54:57.963

阅读后，我发现 rspec 需要 spork 运行（不知道为什么它适用于某些测试而不适用于其他测试？）。我忘了要求 spec_helper，所以我将它插入到 application_helper_spec.rb 的第一行并且它起作用了。

```
require 'spec_helper' 
```

[这是引导我找到答案的帖子。](https://stackoverflow.com/questions/10036996/michael-hartl-rails-tutorial-3-2-chapter-5-rspec-issue)

# objective-c - 退出时应用程序错误 - Objective-C

> ID：10115972
> 
> 赞同：0
> 
> 时间：2012-04-12T00:47:18.280
> 
> 标签：objective-c, cocoa

当我退出我的应用程序时，我收到此错误：

```
Apr 11 20:32:31 imac.subnet192.com NetCalc[25082] <Error>: kCGErrorIllegalArgument: _CGSFindSharedWindow: WID -1
Apr 11 20:32:31 imac.subnet192.com NetCalc[25082] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
Apr 11 20:32:31 imac.subnet192.com NetCalc[25082] <Warning>: _CGSReferenceWindowByID: Window id 0xffffffff not found (locally or shared)
Apr 11 20:32:31 imac.subnet192.com NetCalc[25082] <Error>: kCGErrorIllegalArgument: CGSDeviceCreate: Invalid window
Apr 11 20:32:31 imac.subnet192.com NetCalc[25082] <Error>: Failed to create window context device
Apr 11 20:32:31 imac.subnet192.com NetCalc[25082] <Error>: CGWindowContextCreate: failed to create window context delegate.
2012-04-11 20:32:31.679 NetCalc[25082:707] _initWithWindowNumber: error creating graphics ctxt object for ctxt:0x136f3, window:0xffffffff 
```

问题似乎不在代码中，在启动后关闭应用程序（不接触任何东西）无论如何都会生成此错误消息。

更新：

*   仅当我使用应用程序右上角的“X”退出时才会生成该错误。如果我右键单击 Dock 或使用工具栏退出，则不会生成错误。
*   我不需要关闭应用程序来使错误出现。关上窗户就够了。

*   我已经取消了所有出口和操作的链接，只保留了默认配置。我仍然得到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:15:49.143

正如[Cubia](https://stackoverflow.com/a/10134234/674648)所说， “关闭时释放”复选框可以解决问题。如果没有取消选中“单次”复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:42:29.257

原来问题是窗口的行为。选中窗口的“关闭时释放”复选框可以解决问题。

# c# - MonoTouch.Dialog：在后台设置 StyledStringElement 的图像

> ID：10115975
> 
> 赞同：0
> 
> 时间：2012-04-12T00:47:49.307
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

我的应用程序计算 StyledStringElement 的图像，这个过程需要很长时间。这一切都在本地完成。

我怎样才能做这样的伪代码：

```
myElement.Image = PlaceHolderImage; 
myElement.GoGetTheImageFromSomeLongRunningTask = GetImageFromSomeFuntionThatWillTakeTime(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:48:54.063

你可以使用这样的东西（未经测试）：

```
myElement.Image = PlaceHolderImage;
ThreadPool.QueueUserWorkItem ((v) =>
{
    var image = GetImageFromSomeFunctionThatWillTakeTime ();
    BeginInvokeOnMainThread (() =>
    {
        myElement.Image = image;
        myRoot.ReloadData ();
    });
}); 
```

请注意，这假定 GetImageFromSomeFunctionThatWillTakeTime 实际上可以在辅助线程上执行。您可以使用当前的 MonoTouch beta (5.3.2) 轻松测试这一点，因为如果您在辅助线程上执行不允许的操作，您将获得异常。

# objective-c - 未调用 Dealloc

> ID：10115976
> 
> 赞同：2
> 
> 时间：2012-04-12T00:47:56.710
> 
> 标签：objective-c, ios, cocoa-touch, memory-management

我有一个视图控制器，其中有两种方法可以返回。

**第一个场景是这样的：**

`RecordVC`-> 告诉`Delegate`- `dismissRecordVC:`>`RecordVC`解雇和解除分配

**第二种情况是这样的：**

`RecordVC`-> 告诉`Delegate`- `dismissAndShowVideosForRecordVC:`>`RecordVC`解散并`VideosTVC`呈现**但未** `RecordVC`解除分配。

**第一个场景是这样触发的：**

```
- (IBAction)back:(id)sender {
    if ([_chromaKeySessionManager isWriting]) {
        [_chromaKeySessionManager cancelWriting];
    }
    [_chromaKeySessionManager stopRunning];
    [delegate dismissRecordVC:self];
} 
```

委托方法`dismissRecordVC:`是这样的：

```
- (void)dismissRecordVC:(RecordVC *)vc {
    [self dismissModalViewControllerAnimated:YES];
} 
```

如果使用此`back:`方法，则 RecordVC 被释放就好了。

**第二种情况是这样触发的：**

```
- (IBAction)goToVideos {
    if ([_chromaKeySessionManager isWriting]) {
        [_chromaKeySessionManager cancelWriting];
    }
    [_chromaKeySessionManager stopRunning];
    [delegate dismissAndShowVideosForRecordVC:self];
} 
```

和委托的`dismissAndShowVideosForRecordVC:`方法：

```
- (void)dismissAndShowVideosForRecordVC:(RecordVC *)vc {
    [self dismissViewControllerAnimated:YES completion:^{
        VideosTVC *vc = [[VideosTVC alloc] init];
        [[self navigationController] pushViewController:vc animated:YES];
        [vc release];    
    }];
} 
```

因此，在这种情况下，RecordVC 永远不会被释放。这里唯一的区别是我用一个完成块来解除它并推动另一个控制器。

对我来说，在这两种情况下看起来完全相同（就保留/释放而言），除了在第一种情况下，RecordVC 被释放，而在后一种情况下，它永远不会被释放。很奇怪，我知道我不应该这么说，但似乎是内部泄漏。

在使用完成块进行解雇时，我是否保留了一些我不知道的东西？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:18:47.080

一个区别是完成块引用`self`. 这会导致它至少保留到块触发。诚然，在那之后它应该被释放。

尝试在块外部创建一个本地来保存`[self navigationController]`，然后在块中使用该本地，这样就不会引用`self`.

我还要指出，`-dismissAndShowVideosForRecordVC:`你有一个参数和一个同名的本地。没关系，但可能存在编译器错误。

# java - javasound 有 WMA spi 吗？

> ID：10115977
> 
> 赞同：5
> 
> 时间：2012-04-12T00:47:59.030
> 
> 标签：java, audio, javasound, wma

我在互联网上浏览了一下，但没有运气。有谁知道是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:17:37.833

显然答案是否定的。一直找不到那里的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T16:09:35.890

如果您使用的是 Windows 7 或更高版本，您可能想尝试[MFSampledSP](http://www.tagtraum.com/mfsampledsp/index.html)。

如果您喜欢冒险并且需要支持 Windows 以外的其他平台，您可以尝试修改[FFSampledSP](http://www.tagtraum.com/ffsampledsp/index.html)及其上游项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:32:56.773

使用**Quicktime** API 做这样的事情，

我已经用这个解决了我的问题`quickTime.jar`

您可以从 下载此实用程序`apple.com`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T22:59:21.273

我意识到您正在寻找一个 .jar 文件来插入并提供对 .wma 文件的支持，但这个解决方案是我获得 .wma 文件支持的方式，它并不比放入一个新 jar 复杂得多。从技术上讲，这不是 SPI，但由于似乎没有这样的东西，我认为发布一个简单的替代方案可能会有用。

从[这个答案](https://stackoverflow.com/a/11633151/1003324)我找到了我的方向。不过，在您深入了解 JAVE 并了解它的内容之前，我将提供一段代码，以便您了解我必须编写多少代码才能转换和播放 wma 文件。JAVE 所做的一切都需要您使用 Encoder 类的实例。

```
try {
    EncodingAttributes attr = new EncodingAttributes();
    attr.setAudioAttributes(new AudioAttributes()); //default values
    attr.setVideoAttributes(new VideoAttributes()); //default values
    attr.setFormat("wav"); //this is the target format I am trying to achieve
    //b.wma is a file I brought to the project
    File wma = new File("Resources\\b.wma");
    //target.wav is the created file I'll achieve after the encode, which gets used to  make a Clip
    File target = new File("Resources\\target.wav");
    Encoder encoder = new Encoder();
    //this will show you all supported encoding / decoding formats
    //String[] list = encoder.getSupportedEncodingFormats();
    //String[] list = encoder.getSupportedDecodingFormats()
    encoder.encode(wma, target, attr);
    AudioInputStream is = AudioSystem.getAudioInputStream(target);
    Clip clip = AudioSystem.getClip();
    clip.open(is);
    clip.setFramePosition(0);
    clip.start();

} catch (IllegalArgumentException | EncoderException e) {
    e.printStackTrace();
} catch (UnsupportedAudioFileException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} catch (LineUnavailableException e) {
    e.printStackTrace();
} 
```

# c# - Response.AddHeader 附件不起作用

> ID：10115979
> 
> 赞同：1
> 
> 时间：2012-04-12T00:48:20.237
> 
> 标签：c#, asp.net

这是我的代码：

```
 Response.Clear();
                Response.AddHeader("content-disposition", "attachment;  filename=file.xlsx");
                Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                Response.BinaryWrite(pck.GetAsByteArray());
                Response.End(); 
```

问题是当这段代码运行时（点击按钮）我没有在我的浏览器中下载文件（在 Chrome \ IE 中试过）。

pck 是一个 excel 文件（使用[epplus](http://epplus.codeplex.com/)库生成）。我什至不知道如何调试这部分代码。它什么也没做。

这是我在浏览器中遇到的错误：

> 未捕获的 Sys.WebForms.PageRequestManagerParserErrorException：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。此错误的常见原因是通过调用 Response.Write()、响应过滤器、HttpModules 或启用了服务器跟踪来修改响应。
> 
> 详细信息：在“PKX��@ϖ�”附近解析错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:33:18.707

我相信您正在使用更新面板。执行异步回发时无法下载文件。添加将下载文件的按钮作为更新面板的回发触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:30:21.853

你在正确的轨道上。我认为您缺少几行：

```
Response.Clear();
Response.AddHeader("content-disposition", "attachment;  filename=file.xlsx");
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.BinaryWrite(pck.GetAsByteArray());
Response.Flush();
Response.Close();
Response.End(); 
```

# jquery - Jquery ajax 调用 - 远程收集响应详细信息

> ID：10115981
> 
> 赞同：0
> 
> 时间：2012-04-12T00:48:38.700
> 
> 标签：jquery, asp.net, ajax

我需要能够调试在 ASP.NET 应用程序中对页面方法进行 jquery ajax 调用的问题，这些问题似乎只发生在少数（远程）客户的机器上。

这在本地很容易——例如使用 Firebug 以交互方式检查响应对象，但我如何才能远程获取这些信息？即使我处理了错误回调，我仍然需要将该信息放在某个地方，这是另一个页面方法调用 - 但它的页面方法调用首先失败了！

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:58:51.207

您似乎可以使用 ELMAH 记录您网站上的所有错误，然后使用其 Web 界面浏览这些错误。

# django - Django：ManyToManyField，如果对象不存在则添加它

> ID：10115984
> 
> 赞同：4
> 
> 时间：2012-04-12T00:49:03.313
> 
> 标签：django, forms, many-to-many, models

我正在尝试在 Django 中使用 ModelForms 将内容添加到我的数据库中，其中包括一个 ManyToManyField。这是我的模型的相关部分：

```
class Category(models.Model):
    name = models.CharField(max_length=100)
    description = models.TextField()

    def __unicode__(self):
        return self.name

class Recipe(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()
    user = models.ForeignKey(User)
    image = models.ImageField(upload_to='images/recipethumbs/', null = True, blank=True)
    ingredients = models.ManyToManyField(Ingredient, through="IngredientMap")
    categories = models.ManyToManyField(Category)
    citation = models.CharField(max_length=200)

    def __unicode__(self): 
```

默认情况下，ManyToManyFields 由多项选择表示。这允许用户从类别对象中预先存在的字段中进行*选择。*我想更改此设置，以便用户可以选择当前存在的类别，或者如果不存在则添加新类别。这似乎可以通过将小部件更改为 TextInput 来完成。

```
class RecipeForm(ModelForm):
    class Meta:
        model = Recipe
        widgets = {
            'categories': TextInput(attrs={'size': 40,}),
            'ingredients': Textarea,
        } 
```

但是，如果用户输入了类别表中当前不存在的类别，那么 Django 会抱怨我需要“输入值列表”。如果新类别尚不存在，如何获取表单以*添加新类别？*

正如 Ilvar 建议的那样，我在自定义 .save() 中的解决方案：

```
categories = re.findall(r'\w+[\w\s]+', self.cleaned_data.get('categories')) #returns an array

        if commit:
            m.save()

        # You can only assign m2m if the Recipe object has been saved.
        for category in categories:
            try:
                category_in_db = Category.objects.get(name=category)
            except:
                category_in_db = None
            if category_in_db:
                m.categories.add(category_in_db)
            else:
                m.categories.create(name=category)

        return m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:19:05.307

您需要`exclude`从表单中获取 m2m 字段并`CharField`手动添加到表单类本身。然后覆盖以在和`__init__`中设置该字段。在你可以对. 我想，在你的情况下，它将用逗号分割它，为每个值创建一个类别，并在保存父表单之后将类别列表分配给对象中的字段，然后再返回结果。也许还添加一些[自动完成功能](https://bitbucket.org/tyrion/django-autocomplete/wiki/Home)以避免在客户端输入错误。`initial``save``save``cleaned_data`

# magento - 用户无法在 Magento 中将产品添加到购物车

> ID：10115990
> 
> 赞同：2
> 
> 时间：2012-04-12T00:49:35.327
> 
> 标签：magento

Magento 1.4.2 使用远程数据库 Lightspeed Cache

当用户尝试将产品添加到购物车时，它不会添加产品。如果产品页面停留一小时然后您尝试将产品添加到购物车，则该问题是可重现的。

我已经同步了数据库服务器和 Magento 服务器上的时间。我在论坛上研究了这个问题，但没有找到任何解决方案。尝试将 cookie 超时调整为没有影响。

清除浏览器缓存或清除 var 目录中的会话是临时修复。

有没有人遇到过这个问题？有没有人有一些建议我应该研究什么方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T14:18:52.143

只需将`Admin >> System >> Configuration >> web >> Session Cookie Management`cookie生命周期的值更改为86400即可，希望对您有所帮助。

# javascript - 创建数组的 JavaScript 搜索

> ID：10115992
> 
> 赞同：0
> 
> 时间：2012-04-12T00:50:13.720
> 
> 标签：javascript, arrays, search, text

我是这些论坛的新手，对 JavaScript 也很陌生。由于我的学校不提供深入的 JavaScript 课程，我试图自己理解其中的很多内容。

这可能是一个基本问题，但基本上我想创建 2 个数组。第一个数组将有许多“id”数字。第二个数组将有价格数字。我想要它，所以当用户在文本框中输入这些 id 数字时，它将在另一个文本框中输出价格数组数字的值。

这是一个使用提示的示例：

```
noArray = new Array(3);
noArray[1]="03";
noArray[2]="12";
noArray[3]="15";
nameArray = new Array(3);
nameArray[1] = "$45";
nameArray[2] = "$300";
nameArray[3] = "$900";

var userNumIn=prompt("Enter the item number you want to retrieve","");
var itemSub=1;
var matchInd= false;

while (itemSub <= 3 && matchInd == false){
    if (noArray[itemSub] == userNumIn){
        matchInd = true;
    } else {
        itemSub++ ;
    }
}

if (matchInd == true){
    document.write("The item costs " + nameArray[itemSub]);
} else {
    document.write("Invalid item number");
} 
```

问题是我如何将某人在“id”文本框中输入的值与 id 数组进行比较，然后如果该值匹配，让它检查价格数组中该 id 的价格，然后输出到“价格” ' 文本框？我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T01:05:02.703

你应该了解对象。

基本上，对象是字符串和某个值之间的映射，这似乎是您想要的。如果您使用对象，您的代码会简单得多。看看你如何不需要使用任何类型的循环或任何辅助变量。

```
var prices = {
  "03": "$45",
  "12": "$300",
  "15": "$900"
};
var id = prompt("Enter the item number you want to retrieve","");

if(id in prices) {
  alert("The item costs " + prices[id]);
}
else {
  alert("Invalid item number");
} 
```

[您可以在 jsFiddle 上看到这一点](http://jsfiddle.net/KexHq/)。

您特别询问了如何使用文本框和按钮，因此我创建了一个示例页面来说明如何做到这一点。首先，您需要一个 HTML 表单

```
ID: <input id="input" type="text"/><br>
<button id="submit">Get Price</button><br>
Price: <output id="output"/> 
```

然后你只需稍微修改上面的 Javascript 以使表单工作

```
var prices = {
    "03": "$45",
    "12": "$300",
    "15": "$900"
};

document.getElementById("submit").onclick = function() {
    var id = document.getElementById("input").value;
    var price = id in prices ? prices[id] : "Invalid ID";
    document.getElementById("output").innerHTML = price;
}; 
```

你[可以看到这一点。](http://jsfiddle.net/KexHq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:02:15.867

清理代码，但不要指望用户将来会这样做......

```
2dArray = new Array(3)(2)
2dArray[0][0] = "03";
2dArray[0][1] = "$45";
2dArray[1][0] = "12";
2dArray[1][1] = "$300";
2dArray[2][0] = "15";
2dArray[2][1] = "$900";

var userNumIn=prompt("Enter the item number you want to retrieve","");
var matchInd = false;

for(var i = 0; i < 3 && !matchInd; i++){
    if (2dArray[i][0] == userNumIn){
        matchInd = true;
        document.getElementById('yourTextBoxId').value = 2dArray[i][1];
    }
}

if(!matchInd) {
    document.getElementById('yourTextBoxId').value = "Invalid item number";
} 
```

我只需要一个javascript刷新^^没有测试，希望它有效。如果有任何不清楚的地方，请询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:06:20.703

你的方法是合理的，一旦你合并了 dbaupp 提到的东西，它就会起作用。这是一种更高级但更清洁的方法：

在 JavaScript 中，您可以自由地创建具有您想要的任何形状的对象。因此，您可以定义同时包含商品编号和价格的对象。例如：

```
var item = {
    number: '03',
    price: '$45'
}; 
```

现在 item 是一个对象，包含关于项目编号 03 的两件事：

```
alert(item.number); // alerts 03
alert(item.price);  // alerts $45 
```

您可以将对象粘贴到数组中，因此最好使用一个包含您需要的所有内容的数组，而不是两个数组

```
var itemArray = new Array(3);
// note the first index in array is 0, not 1
itemArray[0] = {
    number: '03',
    price: '$45'
};
itemArray[1] = {
    number: '12',
    price: '$300'
};
itemArray[2] = {
    number: '15',
    price: '$900'
}; 
```

现在更容易找到用户想要的项目：

```
var userNumIn = prompt("Enter the item number you want to retrieve","");

for(var i = 0; i < itemArray.length; ++i) {
    var item = itemArray[i];
    if(item.number === userNumberIn) {
        alert("The item costs " + item.price);
    }
} 
```

仍有很多方法可以改进这一点。我故意只引入对象以保持更改简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T01:12:24.830

您可以尝试使用 Javascript 对象作为哈希表来简化逻辑。

Javascript 中的对象可以用作哈希表，因此，当您执行查找时，运行时间将为 O(1)，而不是遍历数组，即 O(n)。

```
// Restructure the array so it's in a very simple
// 'hashtable' - Key: id, value: price.
// Lookup time on this is O(1)
var priceLookup = {
    "03" : "$45",    // I assume the 0 is important
    "12" : "$300",
    "15" : "$900"
};

// Get data from user
var id = prompt('Enter item ID');

// Check if item exists in the price lookup
if (priceLookup[id]) {
    // Alert user with price
    document.write("The item costs " + priceLookup[id]);
}
else {
    // ID is invalid in this case.
    document.write("Invalid item number");
}
​
​ 
```

JSFiddle：http: [//jsfiddle.net/C4RLV/](http://jsfiddle.net/C4RLV/)

# mysql - 从几个表mysql中按重复数排序

> ID：10115993
> 
> 赞同：0
> 
> 时间：2012-04-12T00:50:13.660
> 
> 标签：mysql

我会尽量保持简单。

有 3 个表（A、B、C），每个表都有一个名称列（并且只有一个名称列）。我想从三个单独的表中选择所有行（没有重复），但更重要的是，按照重复的数量对它们进行排序，这样如果表 A、B 和 C 中存在“Charles”，那么它将显示在结果中排​​名第一。仅存在于一个表中的名称将出现在结果的末尾。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:54:44.927

```
 select name from 
(select name from A 
  UNION ALL 
 select name from B 
 UNION ALL
 select name from C) t 
group by name order by count(name) DESC 
```

# c# - CodeFirstMembership - 标记为虚拟的实体成员。

> ID：10115998
> 
> 赞同：0
> 
> 时间：2012-04-12T00:51:09.770
> 
> 标签：c#, asp.net-mvc, entity-framework

我目前正在建立一个新的私人网站，现在是时候建立会员相关的东西了。我将继续构建我的自定义会员系统并查看 codefirstmembership nuget 包 ( [1](http://codefirstmembership.codeplex.com/) )。

我对实体有点困惑。所有成员都标记为`virtual`。在这种情况下有什么意义？所有实体的东西都将被延迟加载，但是注册或登录过程中的“真实”效果是什么？如果我标记没有虚拟的实体成员有什么区别？

如果有人能阐明这一点，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:15:42.273

在注册或登录过程中没有任何影响。会员资格对实体一无所知，因此您的实体的定义方式对会员资格的运作方式绝对没有影响。

在 Entity Framework 中，如果您的所有属性都是虚拟的，您可以获得更有效的更改跟踪。请参阅名为“使用“更改跟踪代理”进行更有效的更改跟踪”的部分

[http://blogs.msdn.com/b/adonet/archive/2009/05/28/poco-in-the-entity-framework-part-2-complex-types-deferred-loading-and-explicit-loading。 aspx](http://blogs.msdn.com/b/adonet/archive/2009/05/28/poco-in-the-entity-framework-part-2-complex-types-deferred-loading-and-explicit-loading.aspx)