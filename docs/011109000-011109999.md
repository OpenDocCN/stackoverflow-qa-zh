# StackOverflow 问答 11109000-11109999

# batch-file - 完成任务后关闭命令提示符

> ID：11109001
> 
> 赞同：1
> 
> 时间：2012-06-19T20:35:59.143
> 
> 标签：batch-file

**构建.bat**

```
@echo off
echo Disabling UAC, please wait...
start DisableUAC.lnk
echo UAC Disabled Successfully!
echo.
pause 
```

**禁用UAC.bat：**

```
C:\Windows\System32\cmd.exe /k %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 0 /f 
```

要`DisableUAC.bat`以管理权限运行，我创建了一个快捷方式`DisableUAC.lnk`并选中属性 > 快捷方式 > 高级并选中“以管理员身份运行”。然后我在里面呼唤它`Build.bat`

这一切都有效，但是如何`DisableUAC.bat`在完成任务后获得从显示到关闭的命令提示符？（保持主Build.bat打开，关闭弹出的DisableUAC.bat）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:37:49.687

更改`/k`为`/c`：

```
C:\Windows\System32\cmd.exe /c %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 0 /f 
```

见`cmd /?`：

> 启动 Windows 命令解释器的新实例
> 
> 命令[/A | /U] [/Q] [/D] [/E:ON | /E:OFF] [/F:ON | /F:OFF] [/V:ON | /V:OFF] [[/S] [/C | /K] 字符串]
> 
> /C 执行字符串指定的命令，然后终止
> /K 执行字符串指定的命令，但保持
> ..

尽管我认为您根本不需要在这里启动新的 cmd.exe 吗？我认为这也可以直接作为快捷方式或在 DisableUAC.bat 中使用：

```
%windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 
```

# html - 背景图像：无重复不起作用，语法正确

> ID：11109013
> 
> 赞同：11
> 
> 时间：2012-06-19T20:36:30.650
> 
> 标签：html, css

下面是我用于背景图像的语法。由于某种原因，它在**Y**上重复。我不能使用`overflow:hidden;`

```
<style>
body {
    background-image: url('<?php echo $ActualPath; ?>images/backgroundimage.jpg'); 
    background-image: no-repeat;
}    
</style> 
```

我希望在 x 和 y 上不重复背景图像。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-19T20:39:20.583

您应该使用的语法是

```
background-image: url(path/images/backgroundimage.jpg);
background-repeat: no-repeat; 
```

.. 或者

```
background: url(path/images/backgroundimage.jpg) no-repeat; 
```

如果您更喜欢[简写语法](https://developer.mozilla.org/en/CSS/background#Values)。

`background-image`总是只定义一个图像文件，因此在您的示例中，第二`background-image`条规则试图覆盖第一个规则，但由于“no-repeat”不是有效的图像文件，浏览器会忽略它。

[此处](https://developer.mozilla.org/en/CSS/background#Values)列出了各种背景属性以供参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:44:13.240

该`background`属性有一些您可以更改的属性。

*   背景颜色
*   背景图片
*   背景重复
*   背景附件
*   背景位置

你可以单独设置每一个，就像你想要做的那样。如果两次设置相同的，只有最后一个会生效。

您在`background-image`第二个应该设置的位置设置了两次`background-repeat`。

还有一个速记符号，您可以在其中执行类似的操作

```
background:#ffffff url('img_tree.png') no-repeat right top; 
```

在一行中设置多个属性。你可以用它来改变你的代码

```
body{ background: url('<?php echo $ActualPath; ?>images/backgroundimage.jpg') no-repeat; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:40:30.503

您可以使用`background-repeat:no-repeat;`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-07-27T13:36:14.883

为了在 html 中不重复背景，请使用以下语法：CSS(Internal stylesheet) use this code in style tag in head part

```
background-image:url("some picture url");
background-repeat:no repeat; 
```

- 它将提供单个视图的背景图像而无需重复。

# android - 在 Android 上刷新选项卡活动

> ID：11109015
> 
> 赞同：2
> 
> 时间：2012-06-19T20:36:54.647
> 
> 标签：android, android-intent, refresh, tabactivity, android-tabactivity

一旦我点击我的选项卡活动，我需要刷新我的活动。目前它只是显示以前的内容。我需要刷新我的活动，以便在它回来后可以加载新内容。这是我添加 TabActivity 的代码。请帮忙。感谢您的所有反馈。

```
 private void setTabs()
{
    addTab("Home", R.drawable.tab_home, OptionsActivity.class);
    addTab("News", R.drawable.tab_search, JsonActivity.class);
    addTab("Scores", R.drawable.tab_home, scores.class);
    addTab("Video", R.drawable.tab_search, JsonActivity2.class);
    addTab("Follow Us", R.drawable.tab_home, SAXParserActivity.class);
    addTab("Socket", R.drawable.tab_search, socketAndroid.class);
}

private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T20:54:37.840

这是代码的最终添加...我添加了**.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);**

```
TabHost tabHost = getTabHost();
Intent intent = new Intent(this, c).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 
```

谢谢你们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T09:15:10.200

像上面提到的 dhiko 一样将标志添加`.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`到您的 Intent 中，每次选择选项卡时它都会调用相关的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:46:37.187

您要更新什么类型的内容？如果您使用的是数组适配器，您可以调用`notifyDataSetChanged()`. 或者，如果您可以通过其 id 属性引用文本字段，则可以动态修改它们。

# string - matlab 字符串数组

> ID：11109018
> 
> 赞同：3
> 
> 时间：2012-06-19T20:37:07.150
> 
> 标签：string, matlab

我有一个我想分析的文件列表。它们都被命名为 chr1.fa, chr2.fa, ... , chr22.fa, chrX.fa

我想将所有这些文件名存储在一个数组中。我知道在 python 中你可以做到

> files = ["chr"+str(x)+".fa" for x in range(1,22)]+["chrX.fa"]

我一直在尝试在 Matlab 中做同样的事情，这是一个令人尴尬的困难时期。否则，我将不得不像这样初始化文件：

> 文件 = {'chr1.fa','chr2.fa',...,'chr22.fa','chrX.fa'}

这真的不理想，因为我可能正在处理更多文件。

任何关于我应该在哪里寻找的指针将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:47:50.580

这不像 Python 那样紧凑，但它会为你完成这项工作。

```
N = 20;

prefix = 'chr';
suffix = '.fa';

names = cell(N,1);

for n = 1:N
    names{n} = [prefix int2str(n) suffix];
end

names{N+1} = [prefix 'X' suffix]; 
```

您可以通过`names{index}`. 请注意花括号，因为这是一个元胞数组，而不是多维字符数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T23:18:35.323

`sprintf`这是使用and的更简洁的版本`strsplit`：

```
files = strsplit(sprintf('chr%i.fa ',1:22),' ');

files{end} = 'chrX.fa'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T20:59:54.503

这是一个单线，只是为了好玩。@Phonon 的方式太明显了。

```
 files = [arrayfun(@(x)strcat('chr',num2str(x),'.fa'),(1:22)','uni',0); 'chrX.fa'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T08:57:48.687

尝试：

```
files = [strtrim(cellstr(num2str((1:22)','chr%d.fa'))) ; 'chrX.fa'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-18T21:21:04.437

旧主题，但从 16b 开始，使用新的字符串数据类型使这很容易：

```
>> files = ["chr" + (1:22) + ".fa", "chrX.fa"]'

files = 

  23×1 string array

    "chr1.fa"
    "chr2.fa"
    "chr3.fa"
    "chr4.fa"
    "chr5.fa"
    "chr6.fa"
    "chr7.fa"
    "chr8.fa"
    "chr9.fa"
    "chr10.fa"
    "chr11.fa"
    "chr12.fa"
    "chr13.fa"
    "chr14.fa"
    "chr15.fa"
    "chr16.fa"
    "chr17.fa"
    "chr18.fa"
    "chr19.fa"
    "chr20.fa"
    "chr21.fa"
    "chr22.fa"
    "chrX.fa" 
```

# c# - 对象引用未设置为对象的实例以检查 null

> ID：11109021
> 
> 赞同：1
> 
> 时间：2012-06-19T20:37:22.620
> 
> 标签：c#, .net

我在`object reference not set to an instance of an object`while 循环的情况下遇到错误，我不知道发生了什么。代码是：

```
while (ClassName.StaticDataTable == null || ClassName.StaticDataTable.Rows == null) 
```

我试图使对象名称具有解释性。我认为`||`这是一个短路运算符，因此如果第一个条件为真，它不会评估第二个条件，并且错误不应该来自那里。关于导致错误的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:46:49.997

如果您遇到`null reference`异常

`while (ClassName.StaticDataTable == null || ClassName.StaticDataTable.Rows == null)`

我想例如：

`ClassName == null`

所以**可能**（只是猜测）你就足以*在*已经存在的其他条件之前添加一个`||`条件，比如

 *`while (ClassName == null || ClassName.StaticDataTable == null || ClassName.StaticDataTable.Rows == null)`

**编辑**

如果`StaticDataTable`属性不仅返回一个值，而且在其中做了一些事情，这可能会引发`null reference exception.`Try to dig *into* that property。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:40:39.160

ClassName 是接收“对象引用未设置为对象实例”的对象还是静态数据表？

如果 ClassName 对象为空，则尝试检索 StaticDataTable 将引发该错误。

我错过了 OR (||) - 下面的答案应该有效。似乎正在发生的是第一个条件在 NOT NULL 时不满足，因此不会短路第二个条件。而下面的 '&& !=' 满足 '!=' 并短路第二个条件。

如果您需要空值，请尝试

```
 while (true) {
            if (classname.tbl != null && classname.tbl.object != null){
               break;
            }
             <whatever code you need>
            ...
    } end while 
```

这将循环直到其中一个为空（均非空）}*

# ruby - 启用阵列的 hirb 打印

> ID：11109023
> 
> 赞同：0
> 
> 时间：2012-06-19T20:37:34.153
> 
> 标签：ruby, hirb

在[hirb教程](http://tagaholic.me/hirb/doc/classes/Hirb/Helpers/Table.html)中有一个数组的例子：

```
[[1,2], [2,3]] 
```

打印为

```
+---+---+
| 0 | 1 |
+---+---+
| 1 | 2 |
| 2 | 3 |
+---+---+ 
```

但是在通常的设置之后我无法让它工作：

```
require 'hirb'
=>true
>> Hirb.enable
=>nil 
```

数组仍然以通常的方式打印。

将数组打印为表格需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T18:02:07.987

作为上述的替代方案，这也很有效，通过 github 用户：pjb3

将此添加到您的 gemfile 中：

```
group :development do
  gem 'hirb'
end 
```

运行 bundle 获取 gem：

```
$ bundle 
```

修改您的 ~/.irbrc 以启用 HIRB：

```
$ echo 'begin; require "hirb"; Hirb::View.enable; rescue; end' >> ~/.irbrc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:46:56.303

这对我有用：

```
irb(main):001:0> require 'hirb'
=> true
irb(main):002:0> Hirb.enable :output=>{"Array"=>{:class=>Hirb::Helpers::Table}}
=> true
irb(main):003:0> [[1,2], [2,3]]
+---+---+
| 0 | 1 |
+---+---+
| 1 | 2 |
| 2 | 3 |
+---+---+
2 rows in set 
```

# sql - PL SQL 循环 - 使用查询中的值作为插入语句中的变量

> ID：11109030
> 
> 赞同：0
> 
> 时间：2012-06-19T20:37:51.827
> 
> 标签：sql, oracle, loops

寻找有关如何执行此操作的最佳建议：

我有这样的插入：

```
insert into empty_table (
column_1,
column_2,
column_3,
column_4
)
(select
sequence_1.nextval,
v_variable_1,
v_variable_2,
value_1
from template_table
where some_value = "value 1"); 
```

select 语句本身返回 22 条记录。我想要做的是迭代这个插入并将变量设置为等于另一个查询的值，例如：

```
select
variable_1,
variable_2
from table_with_var_values
where some_other_value = "value 2"; 
```

此查询返回大约 180 条记录，如下所示：

```
variable_1    variable_2
------------------------
Abc           101         
Def           102         
Ghi           103         
Jkl           104
etc... 
```

所以最终结果是 empty_table 包含 3,960 条记录 (22 x 180)，看起来像这样：

```
column_1    column_2    column_3    column_4
--------------------------------------------
1           Abc         101         Spring
2           Def         102         Summer
3           Ghi         103         Spring
4           Jkl         104         Fall
etc... 
```

我可以将它作为函数存储在一个包中，但我不确定如何开始构建这样的函数。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:20:27.553

为什么不将这两个查询结合起来进行 INSERT，如下所示：

```
insert into empty_table (column_1,          
                         column_2,          
                         column_3,          
                         column_4)   
  SELECT sequence_1.nextval,  
         t2.variable_1,
         t2.variable_2,
         tt.v_variable_1,  
    from template_table tt,
         table_with_var_values t2
    where tt.some_value = 'value 1' AND
          t2.some_other_value = 'value 2' 
```

因为 TEMPLATE_TABLE 和 TABLE_WITH_VAR_VALUES 之间没有连接标准，所以你应该得到一个笛卡尔连接，两个表的每一行都连接在一起，这就是我认为你想要的。无需循环即可获得。

不确定您的 template_table 列中的哪些具有“Spring”、“Summer”和“Fall”值，所以我只选择了 v_variable_1 - 根据需要替换。

分享和享受。

# asp.net - 如何在数据网格中传递选择以显示另一个数据网格

> ID：11109031
> 
> 赞同：0
> 
> 时间：2012-06-19T20:37:53.167
> 
> 标签：asp.net

我在一个页面上有两个gridviews 第一个datagrid(requestgrid) 是通过使用具有参数的存储过程填充的，并且该参数由查询字符串提供。

仅当我在第一个数据网格中选择一行时才需要显示页面中的另一个网格。我能够使用以下代码从选择中获取 requestid

```
void Requesttbl_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            if (e.CommandName.Equals("clickrequestid"))
            {

                Requesttbl.Visible = false;
                int requestid = (int)e.CommandArgument;
               }
        } 
```

我的问题是如何使用此 requestid 将其作为参数传递给第二个 gridview

下面的代码是我在标记页面中的第二个网格视图代码

```
<asp:GridView ID="SelectedReports" runat="server" AutoGenerateColumns="False" 
            DataSourceID="showselectedreports" EnableModelValidation="True">
            <Columns>
                <asp:BoundField DataField="Requestid" HeaderText="Requestid" 
                    SortExpression="Requestid" />
                <asp:BoundField DataField="rptdesctext" HeaderText="rptdesctext" 
                    SortExpression="rptdesctext" />
                <asp:BoundField DataField="Completeddt" HeaderText="Completeddt" 
                    SortExpression="Completeddt" />
                <asp:BoundField DataField="Analyst" HeaderText="Analyst" ReadOnly="True" 
                    SortExpression="Analyst" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="showselectedreports" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UnderWritingConnectionString %>" 
            SelectCommand="ShowCustomerSelectedRequests" 
            SelectCommandType="StoredProcedure">
            <SelectParameters>
how do i use the requestid as a parameter here**strong text**
                           </SelectParameters>
        </asp:SqlDataSource> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:06:56.170

![截屏](../Images/18c473ad396261e5f578221f68dbf6f1.png)

此示例可能会对您有所帮助，因为我从一个网格视图中获取值 CountryID 并在选定的国家 ID 上填充其他值，根据您的要求进行更改。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="CountryID" DataSourceID="SqlDataSource1" 
                onselectedindexchanged="GridView1_SelectedIndexChanged">
                <Columns>
                    <asp:CommandField ShowSelectButton="True" />
                    <asp:BoundField DataField="CountryID" HeaderText="CountryID" ReadOnly="True" 
                        SortExpression="CountryID" />
                </Columns>
            </asp:GridView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
            SelectCommand="SELECT [CountryID], [Country] FROM [Tbl_Country]">
        </asp:SqlDataSource>
            <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
                DataKeyNames="CountryID" DataSourceID="SqlDataSource2">
                <Columns>
                    <asp:BoundField DataField="CountryID" HeaderText="CountryID" ReadOnly="True" 
                        SortExpression="CountryID" />
                    <asp:BoundField DataField="Country" HeaderText="Country" 
                        SortExpression="Country" />
                </Columns>
            </asp:GridView>
            <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
                SelectCommand="SELECT * FROM [Tbl_Country] WHERE ([CountryID] = @CountryID)">
                <SelectParameters>
                    <asp:ControlParameter ControlID="GridView1" Name="CountryID" 
                        PropertyName="SelectedValue" Type="Int32" />
                </SelectParameters>
            </asp:SqlDataSource> 
```

# java - 从数组元素组成一个字符串，比如索引 1 和索引 7，由句点分隔

> ID：11109032
> 
> 赞同：0
> 
> 时间：2012-06-19T20:37:54.853
> 
> 标签：java, arrays, string

我`String[]`使用`String.split(".")`. 我现在正试图`String`从这个数组中创建一个新数组，但只有数组的`Strings`at 特定索引。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:40:30.480

```
System.out.println(arry[0] + "." + arry[6]); 
```

编辑以保持变量，而不是显示：

```
String a = "a";
String b = "b";
String both = a + "." + b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:43:08.740

```
String[] arr = myString.split(".");
int[] indices = { 1, 7 };
int length = indices.length;

StringBuilder str = new StringBuilder();
for (int i=0; i<length; i++) {
    str.append(arr[indices[i]]);
    if (i+1 != length) str.append(".");
}

String result = str.toString(); 
```

# c# - 在另一个线程上的 RichTextBox 中获取文本

> ID：11109042
> 
> 赞同：4
> 
> 时间：2012-06-19T20:38:50.287
> 
> 标签：c#, winforms, .net-4.0

我需要在另一个线程中获取 RichTextBox 中的文本。我尝试像这样调用：

```
string text = ResultsRTB.Invoke((MethodInvoker)(() => ResultsRTB.Text)); 
```

但这显然不起作用，因为您无法使用 MethodInvoker （我知道）返回任何内容。我还尝试了[这里](https://stackoverflow.com/questions/3117957/return-value-from-control-invokemethodinvoker-delegate-i-need)和[这里](https://stackoverflow.com/questions/1423446/thread-control-invoke)的建议的变体，但没有运气。我觉得有一种简单的方法可以做到这一点，但我只是错过了一件小事。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T20:43:24.567

您需要一个返回字符串的委托类型。喜欢`Func<string>`：

```
var text = (string)richTextBox1.Invoke(new Func<string>(() => richTextBox1.Text)); 
```

# macos - 使用 Chrome 在命令行上运行 selenese Selenium 测试

> ID：11109045
> 
> 赞同：4
> 
> 时间：2012-06-19T20:38:58.397
> 
> 标签：macos, google-chrome, command-line, selenium

我在 Firefox 中使用 Selenium IDE 以 selenese 记录了一个测试套件，我想使用 Chrome 在命令行上运行这些测试。（我正在运行 Mac OS X）。

我显然做错了什么，因为当我尝试这样做时，它会在 Firefox 中运行。

我下载了 OS X 的 chromedriver 和 selenium-server-standalone jar 文件，并将它们都放在 /usr/local/bin 中。我认为以下命令确实需要我想要的，但它在 Firefox 而不是 Chrome 中运行测试。（注意，我正在测试运行在的本地应用程序`http://localhost:8001`）。

```
$ java -Dwebdriver.chrome.driver=/usr/local/bin/chromedriver \
 -jar /usr/local/bin/selenium-server-standalone-2.24.1.jar \
 -htmlSuite "*chrome" http://localhost:8001 /Users/lorin/selenium/suite.html /Users/lorin//selenium/results.html 
```

输出如下所示：

```
Jun 19, 2012 4:32:40 PM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
16:32:45.880 INFO - Java: Apple Inc. 20.8-b03-424
16:32:45.881 INFO - OS: Mac OS X 10.7.4 x86_64
16:32:45.887 INFO - v2.24.1, with Core v2.24.1\. Built from revision 17205
16:32:45.972 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
16:32:45.973 INFO - Version Jetty/5.1.x
16:32:45.973 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
16:32:45.974 INFO - Started HttpContext[/selenium-server,/selenium-server]
16:32:45.974 INFO - Started HttpContext[/,/]
16:32:46.018 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@3b75078b
16:32:46.018 INFO - Started HttpContext[/wd,/wd]
16:32:46.024 INFO - Started SocketListener on 0.0.0.0:4444
16:32:46.025 INFO - Started org.openqa.jetty.jetty.Server@6db3f829
jar:file:/usr/local/bin/selenium-server-standalone-2.24.1.jar!/customProfileDirCUSTFFCHROME
16:32:46.103 INFO - Preparing Firefox profile...
16:32:47.013 INFO - Launching Firefox...
16:32:47.734 INFO - Checking Resource aliases
16:33:00.781 INFO - Checking Resource aliases
16:33:00.783 INFO - Received posted results
16:33:01.537 INFO - Killing Firefox...
16:33:01.608 INFO - Shutting down... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:51:37.900

`*googlechrome`改为用于镀铬。那应该解决它。*chrome 用于在另一种模式下运行 firefox。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:57:34.707

要在 Firefox 中运行它，您应该使用命令***chrome**

要在 Chrome 中运行它，您应该使用命令***googlechrome**

要在 Internet Explorer 中运行它，您应该使用***iexplore**

# ruby-on-rails-3 - Rails 3 更新连接表的属性（有很多，通过关联）

> ID：11109049
> 
> 赞同：3
> 
> 时间：2012-06-19T20:39:44.087
> 
> 标签：ruby-on-rails-3, activerecord, has-many-through

我的模型有以下`:has_many, :through`关联：

团体模型：

```
has_many :group_users
has_many :users, :through => :group_users 
```

用户型号：

```
has_many :group_users
has_many :groups, :before_add => :validates_group, :through => :group_users 
```

组用户模型：

```
belongs_to :group
belongs_to :user 
```

在`groups_users`表中，我有一个与用户状态（活动或非活动）保持同步的附加列。当用户从组中删除他们自己时，我需要能够更新该列。如何`update_attributes`在连接表上使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:50:26.317

这有点奇怪，所以为了确定——通常你会通过删除持有连接的 groups_user 记录来从组中删除用户。

如果您希望该记录持续存在并且只是标记为非活动状态，那么您的意思是该用户将继续出现在该组的用户集合中，反之亦然。

假设这确实是您想要的——该记录可以像任何其他记录一样更新。您可以从用户端或组端访问它，然后像往常一样进行编辑。

例如，对于用户 u，组 g，groups_user gu

```
gu = g.groups_users.where('user_id = ?',u.id) 
gu.update_attributes (:status => 'inactive') 
```

另外，请注意，如果您这样做，可能很多时候您只需要组的活动用户或用户的活动组。在这种情况下如何做到这一点，请参阅这篇文章： [Rails has_many :through Find by Extra Attributes in Join Model](https://stackoverflow.com/questions/408872/rails-has-many-through-find-by-extra-attributes-in-join-model)

# java - 从华氏温度转换为摄氏温度（Java）时舍入数字？

> ID：11109056
> 
> 赞同：3
> 
> 时间：2012-06-19T20:40:17.657
> 
> 标签：java, calculator

我在 Java 中从华氏温度转换为摄氏温度时遇到问题。我刚刚开始学习 Java，并且仍在通过书籍和教程来学习。

对于我的第一个程序，我正在尝试根据[本教程](http://docs.oracle.com/javase/tutorial/uiswing/learn/settingup.html)创建一个基本的温度计算器。

我想扩展它的功能，还包括华氏到摄氏的转换，以及基本的摄氏到华氏的转换。

所以，我使用给出的示例代码让摄氏到华氏部分工作，现在，使用相同的代码，经过大量试验和错误后稍微修改以使其工作，我正在尝试解决另一半. 我让它在某种程度上起作用，但这并不完全正确。

例如，当我输入 89 华氏度时，它返回 31 摄氏度而不是预期的 32 摄氏度。我认为这是数字四舍五入方式的问题，但我不知道如何解决它. 我已经阅读了一些内容，我认为可以通过将 RoundingMode 设置为“HALF_UP”来修复它，但我不确定如何做到这一点，以便它只影响这个转换，而不影响另一个作品。这就是我所拥有的：

```
int tempCel = (int) ((int)((Double.parseDouble(tempTextFieldFC.getText())) 
         - 32) * .55555);
tempCelLabel.setText(tempCel + " ° Celsius"); 
```

任何可以提供的帮助或建议将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:45:48.530

用于[`Math.round()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round%28double%29)执行舍入，而不是强制转换为`int`. 根据[JLS 第 5.1.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)，投射总是向 0 舍入：

> 否则，如果浮点数不是无穷大，则浮点值将四舍五入为整数值 V，使用 IEEE 754 向零舍入模式（第 4.2.3 节）向零舍入。

请注意，`Math.round(double)`它仍被声明为返回 a `double`，因为它可能在 or 的范围之外`int`-`long`但我希望这在您的情况下不会成为问题。

我还建议您将代码拆分为多个语句：

```
String fahrenheitText = tempTextFieldFC.getText();
double fahrenheit = Double.parseDouble(fahrenheitText);
double celsius = ((fahrenheit - 32) * 5) / 9;
int celsiusRounded = (int) Math.round(celsius);
tempCelLabel.setText(celsiusRounded + "° Celsius"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:17:11.327

我知道 OP 正在学习 Java，但是为了其他人会来这里**寻找从 Fahrenheit 到 Celsius 的转换**，我建议使用具有许多开发科学应用程序功能的[**JScience 库。**](http://jscience.org/)其中一个强大的功能也是从非SI[单位](http://jscience.org/api/javax/measure/unit/NonSI.html)到[SI 单位](http://jscience.org/api/javax/measure/unit/SI.html)的单位转换。

这是从华氏温度转换为摄氏温度的简单示例：

将华氏值保存为 String 并将其解析为 double。这两行与@Jon Skeet 答案中的相同。

```
String fahrenheitText = tempTextFieldFC.getText();
double fahrenheit = Double.parseDouble(fahrenheitText); 
```

现在我们建立**NonSI**和**SI**单位。JScience 包括基本单位，而不是公里和厘米等乘法单位。为了创建这些单位，SI 提供了构建复合单位的方法。请参阅[此参考资料](http://jnb.ociweb.com/jnb/jnbJun2006.html)以获取更多信息。详细解释我推荐阅读[官方 API](http://jscience.org/api/index.html)，其中也有更多示例。

```
Unit<Temperature> FAHRENHEIT = NonSI.FAHRENHEIT;
Unit<Temperature> CELSIUS = SI.CELSIUS; 
```

现在我们通过询问源单位到目标单位的适当转换器并将其转换为华氏温度并使用转换器。

```
BigDecimal celsius = BigDecimal.valueOf(FAHRENHEIT.getConverterTo(CELSIUS).convert(fahrenheit)); 
```

为了正确舍入，我建议使用[BigDecimal setScale() 方法](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale%28int,%20java.math.RoundingMode%29)。现在对于[RoundingMode](http://docs.oracle.com/javase/7/docs/api/java/math/RoundingMode.html)我通常使用[HALF_UP](http://docs.oracle.com/javase/7/docs/api/java/math/RoundingMode.html#HALF_UP)，但这取决于情况。对于华氏到摄氏度的转换，我建议使用**HALF_UP**舍入。我们将设置为四舍五入到一位小数。

```
celsius = celsius.setScale(1, RoundingMode.HALF_UP); 
```

将值设置为标签。

```
tempCelLabel.setText(celsius + "° Celsius"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T20:43:20.497

tempCel 应声明为浮点数，以便它可以具有小数值。然后你应该在打印时四舍五入 tempCel

```
double tempCel = (Double.parseDouble("1.45")- 32) * .55555;
System.out.println(Math.round(tempCel)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T20:45:45.400

分解你的计算：

```
double fahrenheit = Double.parseDouble(tempTextFieldFC.getText());
double celcius = (fahrenheit - 32) * 5 / 9;
tempCelLabel.setText(Math.round(celcius) + " ° Celsius"); 
```

并摆脱所有这些`temp`前缀——它们没有多大意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T20:47:24.683

用这个：

```
long tempCel = Math.round((5.0 / 9.0) * (Double.parseDouble(tempTextFieldFC.getText()) - 32 ));
tempCelLabel.setText(tempCel + " ° Celsius"); 
```

# ruby-on-rails - 如何添加我的应用程序文档以通过应用程序访问，而不是通过公共目录？（所以需要认证）

> ID：11109064
> 
> 赞同：0
> 
> 时间：2012-06-19T20:40:53.453
> 
> 标签：ruby-on-rails

更新：

我收到此错误：

```
(No route matches "/docs/index.html"... ) 
```

访问时

```
admin.example.com/docs/index.html 
```

文件存在。

在我的 routes.rb 文件中：

```
map.with_options(:conditions => {:subdomain => 'admin']}) do |subdom|
    subdom.root :controller => 'admin/subscriptions', :action => 'index'
    subdom.with_options(:namespace => 'admin/', :name_prefix => 'admin_', :path_prefix => nil) do |admin|
        admin.connect "/docs/:id", :controller => :docs, :action => :get_file
    end
end 
```

并且文档控制器位于 app/controllers/admin/

该控制器中的唯一方法

```
def get_file
        path = request.request_uri
        send_file(path)
    end 
```

结束更新

所以，我有一个子域 admin.example.com，我想把 YARD 生成的文档放在后面。

我尝试将它们放在公用文件夹中，并修改 routes.rb 文件，但始终可以访问文档。

如何使它们仅在登录到 admin.example.com 后才可用？

（文档中的所有 href 都是相对的，所以，我也不确定如何使用控制器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:03:30.097

这是您的方法应如下所示：

```
def get_file
    path = Dir[Rails.root.join("docs", params[:file_or_folder])]
    if path.length > 0
        # check if root directory
        path_str = path[0]
        if path_str =~ /\/docs\/?\z/
            path_str += "/index.html"
        end
        render :file => path_str
    else
        render :text => "File Not Found"
    end

end 
```

您的 rails 路线应如下所示：

```
map.connect "/docs/:file_or_folder", :controller => :docs, :action => :get_file, :file_or_folder => /.*/
map.resources :docs, :only => :get_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:47:01.023

不要将它们放在公用文件夹中。

将它们完全放在其他地方并仅将它们流回经过身份验证的用户。

一种方法是[使用`send_file`](http://apidock.com/rails/ActionController/DataStreaming/send_file).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:06:06.263

[这是](http://blog.kiskolabs.com/post/637725747/nginx-rails-send-file)关于如何使用 nginx 和 send_file 完成对公众文件的保护的很好的入门指南。

# prolog - 在 Prolog 中，如何通过广度或深度优先搜索来解决河内塔？

> ID：11109071
> 
> 赞同：2
> 
> 时间：2012-06-19T20:41:17.010
> 
> 标签：prolog, depth-first-search, breadth-first-search, towers-of-hanoi

在我看到的大多数实现中，使用递归解决方案。但是，我不想要这个。我想用搜索算法在树中搜索，比如广度优先或深度优先。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:01:29.510

BFS may be something like that (works with SWI-Prolog)

```
% to store the tree of the possibilities
:- dynamic lst_hanoi/1.

hanoi_BFS :-
    init,

    % BFS loop
    repeat,
    next,
    finish(Hanoi),

    % display the solution
    reverse(Hanoi, Rev_Hanoi),
    maplist(writeln, Rev_Hanoi).

init :-
    % cleaning of the bdd
    retractall(lst_hanoi(_)),

    % store the initial list of configurations (only one)
    assert(lst_hanoi([[hanoi([1,2,3,4], [], [])]])).

% we search the final configuration
% here the first two columns are empty
finish([hanoi([], [], A) | B]) :-
    % get the list of configurations
    lst_hanoi(Lst),
    % test
    member([hanoi([], [], A) | B], Lst).

next :-
    % get the actual list of configurations
    retract(lst_hanoi(Hanoi)),

    % act on each configuration
    maplist(move_next,Hanoi, Hanoi_Temp),

    % concatenate the list of new onfigurations
    append(Hanoi_Temp, Hanoi_1),

    % some configurations are empty, remove them
    % SWI-Prolog feature
    exclude(=([]), Hanoi_1, Hanoi_2),

    % store the new list
    assert(lst_hanoi(Hanoi_2)).

% compute the next configurations got from one configuration
move_next([Hanoi | T1], R) :-
    % Only the first element of the list is usefull
    % compute possible moves
    move(Hanoi, Next),
    % create the new configuration
    maplist(new_hanoi([Hanoi| T1]), Next, R).

% add the new position if it has not been already seen
new_hanoi(T, H, [H | T]) :-
    \+member(H, T), !.

% else the configuration will be remove
new_hanoi(_T, _H, []).

% the list of all the possibilities of moves
move(hanoi([H | T], [], []), [hanoi(T, [H], []), hanoi(T, [], [H])]).

move(hanoi([], [H | T], []), [hanoi([H], T, []), hanoi([], T, [H])]).

move(hanoi([], [], [H | T]), [hanoi([H], [], T), hanoi([], [H], T)]).

move(hanoi([H1 | T1], [H2 | T2], []),
     [hanoi(T1, [H2 | T2], [H1]), hanoi([H1 | T1], T2, [H2]),  hanoi([H2, H1 | T1], T2, [])]) :-
    H1 > H2, !.

move(hanoi([H1 | T1], [H2 | T2], []),
     [hanoi(T1, [H2 | T2], [H1]), hanoi([H1 | T1], T2, [H2]),  hanoi(T1, [H1, H2 | T2], [])]).

move(hanoi([H1 | T1], [], [H2 | T2]),
     [hanoi(T1, [H1], [H2 | T2]), hanoi([H1 | T1], [H2], T2),  hanoi([H2, H1 | T1], [], T2)]) :-
    H1 > H2, !.

move(hanoi([H1 | T1], [], [H2 | T2]),
     [hanoi(T1, [H1], [H2 | T2]), hanoi([H1 | T1], [H2], T2),  hanoi(T1, [], [H1, H2 | T2])]).

move(hanoi([], [H1 | T1], [H2 | T2]),
     [hanoi([H1], T1, [H2 | T2]), hanoi([H2], [H1 | T1], T2),  hanoi([], [H2, H1 | T1], T2)]) :-
    H1 > H2, !.

move(hanoi([], [H1 | T1], [H2 | T2]),
     [hanoi([H1], T1, [H2 | T2]), hanoi([H2], [H1 | T1], T2),  hanoi([], T1, [H1, H2 | T2])]).

move(hanoi([H1 | T1], [H2 | T2], [H3 | T3]),
     [hanoi(T1, [H1, H2 | T2], [H3 | T3]),
      hanoi(T1, [H2 | T2], [H1, H3 | T3]),
      hanoi([H1 | T1] , T2, [H2, H3 | T3])]) :-
     H1 < H2, H2 < H3, !.

move(hanoi([H1 | T1], [H2 | T2], [H3 | T3]),
     [hanoi(T1, [H1, H2 | T2], [H3 | T3]),
      hanoi(T1, [H2 | T2], [H1, H3 | T3]),
      hanoi([H1 | T1] , [H3, H2 | T2 ], T3)]) :-
     H1 < H3, H3 < H2, !.

move(hanoi([H1 | T1], [H2 | T2], [H3 | T3]),
     [hanoi([H2, H1 | T1], T2, [H3 | T3]),
      hanoi([H1 |T1], T2, [H2, H3 | T3]),
      hanoi(T1 , [H2 | T2 ], [H1 , H3 | T3])]) :-
     H2 < H1, H1 < H3, !.

move(hanoi([H1 | T1], [H2 | T2], [H3 | T3]),
     [hanoi([H2, H1 | T1], T2, [H3 | T3]),
      hanoi([H1 |T1], T2, [H2, H3 | T3]),
      hanoi([H3, H1 | T1] , [H2 | T2 ], T3)]) :-
     H2 < H3, H3 < H1, !.

move(hanoi([H1 | T1], [H2 | T2], [H3 | T3]),
     [hanoi([H3, H1 | T1], [H2 | T2], T3),
      hanoi([H1 |T1], [H3, H2 |T2], T3),
      hanoi(T1 , [H1, H2 | T2 ], [H3 | T3])]) :-
     H3 < H1, H1 < H2, !.

move(hanoi([H1 | T1], [H2 | T2], [H3 | T3]),
     [hanoi([H3, H1 | T1], [H2 | T2], T3),
      hanoi([H2, H1 |T1], T2, [H3 |T3]),
      hanoi([H1 | T1] , [H3, H2 | T2 ], T3)]) :-
     H3 < H2, H2 < H1, !. 
```

This code may be improved !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:47:16.650

好的，所以这应该很容易。真的，在 Prolog 中一切都应该很容易——写下问题通常就是解决方案本身。:)

那么，我们有什么？三塔，说`t(X,Y,Z)`。每个塔都是一系列磁盘，按其大小递减顺序排列 - 只有较小的磁盘可以放在较大的磁盘上，而不是相反：

```
move1( t([A|B],[C|D],E), t(B,[A,C|D],E) ) :- A < C, writeln([move,A,on,C]).
move1( t([A|B],[],E),    t(B,[A],E)     ) :-      writeln([move,A,on,empty]). 
```

这两个规则描述了从第一个塔到第二个的移动，或者在一个更大的圆盘上，或者到一个空塔上。所以这些是唯一可能的移动，将顶部圆盘从第一极移动到第二极。但是我们也可以将磁盘移动到第三极，或者从第二极或第三极：

```
move( t(A,B,C), t(X,Y,Z)):- 
  move1( t(A,B,C), t(X,Y,Z)) ; move1( t(A,C,B), t(X,Z,Y)) ;
  move1( t(B,C,A), t(Y,Z,X)) ; move1( t(B,A,C), t(Y,X,Z)) ;
  move1( t(C,A,B), t( ... )) ; move1( t(C,B,A), t( ... )). 
```

你看，我们只是写下我们已经知道的问题。所以现在我们有了一个谓词`move/2`，它描述了从给定位置（它的第一个参数）的任何可能的移动，给了我们新的位置（它的第二个参数）。

这是在这里为我们定义搜索空间的谓词。在每一点上，我们都会采取行动，看看我们是否有解决方案。这是一个深度优先的搜索，因为我们采取行动并深入研究它，希望它能够引导我们实现目标。

```
hanoi( Start, Finish):- move(Start,Finish), write('Done.'),nl.
hanoi( Start, Finish):- move(Start, P), hanoi(P,Finish). 
```

我们运行它，例如`hanoi(t([1,2],[],[]), t([],[1,2],[])).`现在会发生什么？它*无休止地循环*，一遍又一遍地尝试相同的动作。但即使它尝试新的动作并最终达到完成状态，我们也无法说出是哪些动作导致它到达那里 - 现在它只会打印出它尝试的每一个动作，即使这样也不会导致任何结果。

* * *

所以我们不需要马上写出招式，而是维护招式列表，只有当我们到达完成状态时，我们才会写出将我们带到那里的成功招式列表。我们现在还可以检查这个动作列表，以免重复我们已经做出的动作：

```
move1( t([A|B],[C|D],E), t(B,[A,C|D],E) ) :- A < C.
move1( t([A|B],[],E),    ...            ).

move( P, P2, M, [P2|M] ):- move(P,P2), \+memberchk(P2,M). 
```

这`M`是“到目前为止的移动”，即到目前为止访问过的所有位置的列表，第四个参数是新的位置列表 - 如果我们之前没有访问过我们的新位置（否则我们会绕圈子，比如我们的第一个版本做到了）。

现在我们称它为

```
hanoi(Start,Finish,N):- hanoi_dfs(Start,Finish,[Start],N).

hanoi_dfs( Start, Finish, M, N):- move(Start, Finish, M, M2), 
                                  length(M2,K), N is K-1,
                                  reverse(M2,L), maplist(writeln,L), nl.
hanoi_dfs( Start, Finish, M, N):- move(Start, P, M, M2), 
                                  hanoi_dfs(P, Finish, M2, N). 
```

我们得到

```
?- hanoi(t([1,2],[],[]), t([],[1,2],[]), _).
t([1, 2], [], [])
t([2], [1], [])
t([], [1], [2])
t([], [], [1, 2])
t([1], [], [2])
t([1], [2], [])
t([], [1, 2], []) 
```

但是，这个 DFS 是隐含的——我们依靠 Prolog 来尝试这些动作。显式搜索为每个位置找到所有可能的移动，并将这些移动添加到操作缓冲区，其中将包含对 - 每个位置和导致该位置的移动列表。

现在，显式 DFS 的工作原理是从该列表中删除第一个元素，查找该位置的所有可能移动，从而获得一个新位置列表，每个位置与其移动列表配对 - 并将该列表添加到操作的开头缓冲。

BFS 与 DFS 的不同之处在于它将这个新位置列表附加到*操作缓冲区的**末尾*。

# java - 将 JSON 数据从移动客户端解析到 Web 服务的最佳方法

> ID：11109073
> 
> 赞同：0
> 
> 时间：2012-06-19T20:41:27.423
> 
> 标签：java, json, rest, jax-rs, sax

我开发了一个小的 iphone 应用程序。iphone 应用程序正在本地保存数据。一旦用户上线，我想通过 JSON 流将数据解析到服务器。

但是，我不知道应该如何使用 Java 解决服务器端问题。

*   如何接收 JSON 提要，例如包含 5000 条记录的 JAX-RS/Jersey 并对其进行处理？
*   我可以将 JSON 作为流处理以保持较低的内存占用吗？或者是否可以在垃圾中处理它？比如一口气100条记录？

如果您能告诉我如何在 Java 中做到这一点，那就太好了。我在这里真的很挣扎，无法找到最好的方法。

到目前为止，我查看了 JAX-RS、Jackson 和 SAX，但我找不到一个很好的例子，如何在我的特定情况下使用这些库。我也想坚持我相信你们可以提供的最佳实践。

谢谢你的帮助，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:04:33.173

您所需要的只是创建将使用 json 响应并进行处理的 java web 服务。

* * *

这是[方法](https://stackoverflow.com/q/57689/164299)，这显示了暴露 json 数据，但您应该能够弄清楚 json 数据的消耗。

# sql - 使用 VBscript 从 SQL 数据库中读取

> ID：11109076
> 
> 赞同：1
> 
> 时间：2012-06-19T20:41:33.717
> 
> 标签：sql, vbscript, webpage

我设置了一个 SQL 数据库，我想在其中使用 vbscript 来读取它。

这是我尝试使用的代码。

```
 SQL_Command_String = "SELECT * FROM Table1 JOIN Table2 WHERE Table1.ID = '5' AND Table2.Date LIKE '2011'"

Set Rs = SQLConnection.Execute(SQL_Command_String)
 DO WHILE NOT Rs.EOF
file1="./seminars/"&seminar_type&"/"&seminar_year&"/"&Rs("date")&"-"&Rs("year")&"_"&Rs("last")&".pdf" 
```

研讨会年和研讨会类型是我已初始化并声明为研讨会年 = 2011 和研讨会类型 = 部分 1 的常量。

我相信我的 SQL_Command_String 与 LIKE 语句混淆了。我不确定它是否被正确使用。我只想让它找到日期中包含 2011 的单元格，但我不确定我是否应该在日期的月份和日期部分包含通配符，如果是的话，什么通配符？

当我注释掉 Rs 的声明（集）时，页面加载正常（除了它没有填写表格）。包含时显示的错误是“处理 URL 时服务器发生错误。请联系系统管理员。如果您是系统管理员，请单击此处了解有关此错误的更多信息。”

这里只是将您带到一个关于运行 os IIS 7 的微软页面，我已经说明了这一点。

我真的很难过这个我的想法是我的 SQL 命令不正确，与新框架存在冲突，或者我没有正确声明阅读器或者我没有使用正确类型的阅读器.

我将不胜感激 SO 社区的任何见解。谢谢，请知道我是 VBscripts 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:56:29.283

尝试删除该`AND Table2.Date LIKE '2011'`部分，看看它是否有效。我猜这是因为您的日期列是日期或日期时间数据类型，而不是 char 类型。我认为 LIKE 仅适用于 char 数据类型，因此您需要进行实际的日期比较，例如`Table2.Date >= '1/1/2011' AND Table2.Date <= '12/31/2011'`或类似的东西，具体取决于您使用的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:21:07.200

我找到了有问题的代码。

```
Set Rs = SQLConnection.Execute(SQL_Command_String) 
```

使用阅读器时不能使用 Set 关键字。我没有找到支持这一点的文档，但删除 Set 解决了这个问题。

其余的连接代码是正确的。谢谢大家的意见。

# java - Java：自定义图标问题

> ID：11109078
> 
> 赞同：0
> 
> 时间：2012-06-19T20:41:41.907
> 
> 标签：java, swing, class, jframe

我正在尝试在我的`JFrame`. 我的项目文件夹中有图标图像，但我似乎无法让它工作。

我也尝试过`setIconImage(new ImageIcon(imgURL).getImage());`，但它似乎也不适合我。

此外，自定义图标的典型尺寸是多少

```
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

/**
* @author Curtis
*/
public class Favorites extends JFrame implements ActionListener
{
String[] styles = {"Big Band", "Country", "Pop", "Rock", "Rap"};
Font boxFont = new Font("Times New Roman", Font.BOLD, 14);
JLabel instruct = new JLabel("What is your favorite type of music?");
JComboBox music = new JComboBox(styles);
JTextField result = new JTextField(20);
final int WIDTH = 270;
final int HEIGHT = 125;

public Favorites()
{
    super("Favorite Music");
    setSize(WIDTH, HEIGHT);
    setLayout(new FlowLayout());
    instruct.setFont(boxFont);
    JFrame.setDefaultLookAndFeelDecorated(true);
    add(instruct);
    add(music);
    add(result);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    music.addActionListener(this);
    Image icon = Toolkit.getDefaultToolkit().getImage("icnnote.jpg");
    setIconImage(icon);
}

@Override
public void actionPerformed(ActionEvent e) 
{
    throw new UnsupportedOperationException("Not supported yet.");
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:44:37.210

您需要将`setIconImage()`上面的`setVisible()`. `setVisible()`它在调用时显示帧。

**更新：**您还需要将图像更改为

`getToolkit().getImage(getClass().getResource("iccnote.jpg"))`

# vb.net - 调整和重绘datagridview

> ID：11109079
> 
> 赞同：0
> 
> 时间：2012-06-19T20:41:42.680
> 
> 标签：vb.net

我使用 datagridview 显示来自可能有 0 到 x 行数的数据库的查询结果。
因此，我进行了计算以计算底层表单的大小，并且我的 datagridview 取决于匹配的行数。
底层表单是透明的，所有这些看起来都像是用户控制的内容，并且工作正常。

但这里有一个问题：
每次数据网格必须增长时，该区域的黑色方块会在数据网格被填充之前显示出来，这不是很好而且肯定是不需要的。

我可以做一些通常的事情来避免这种情况吗？
datagridview 是否有某种机制来冻结它并在填充完成时显示数据？
或者还有什么可做的？

```
 Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged

    Dim tw As Integer = 0
    Dim n As Integer = 0
    Dim sqlText As String
    Dim reader As OdbcDataReader = Nothing
    Dim btCommand As OdbcCommand = Nothing
    Dim mCmd As OdbcCommand = Nothing
    Dim mCon As New Odbc.OdbcConnection

    DataGridView1.Rows.Clear()
    If Trim(TextBox1.Text).Length Then
        mCon.ConnectionString = "Dsn=" + dbDsn + _
                                ";database=" + mydatabase + ";server=" + dbServer + ";port=" + dbPort + _
                                ";uid=" + dbUser + ";pwd=" + dbPass
        Try
            mCon.Open()
            btCommand = New OdbcCommand("BEGIN TRANSACTION", mCon)
            sqlText = "SELECT dtbl_id, name... etc... FROM mytable WHERE name ILIKE '%" & Trim(TextBox1.Text) & "%' ORDER BY name LIMIT 128"
            mCmd = New OdbcCommand(sqlText, mCon)
            reader = mCmd.ExecuteReader()
            While (reader.Read())

                Dim t_kol, t_ci As String
                If reader.GetValue(4) - reader.GetValue(5) = 0 Then
                    t_kol = "- "
                Else
                    t_kol = FormatNumber((reader.GetValue(4) - reader.GetValue(5)), 2)
                End If
                t_ci = FormatNumber(reader.GetValue(3))

                With DataGridView1.Rows.Add(New String() {reader.GetValue(0).ToString(), _
                                                          reader.GetValue(1).ToString(), _
                                                          reader.GetValue(2).ToString(), _
                                                          t_kol, _
                                                          t_ci, _
                                                          reader.GetValue(6).ToString(), _
                                                          reader.GetValue(7).ToString})
                    n = n + 1
                End With
            End While
            btCommand = New OdbcCommand("END TRANSACTION", mCon)
        Catch ex As Exception
            MsgBox(ex.Message, MsgBoxStyle.Critical + MsgBoxStyle.OkOnly)
        Finally
            reader.Close()
            reader.Dispose()
            btCommand.Dispose()
            mCmd.Dispose()

            If n < 1 Then
                DataGridView1.Height = 0
                DataGridView1.Height = DataGridView1.Height + DataGridView1.Top
            End If

        End Try
        mCon.Close()
        mCon.Dispose()
    End If

    If n < 1 Then
        DataGridView1.Height = 0
    Else
        DataGridView1.Height = DataGridView1.ColumnHeadersHeight + (n * DataGridView1.RowTemplate.Height) + 2
    End If

    Dim p As Point = Me.PointToScreen(DataGridView1.Location)
    If p.Y + DataGridView1.Height >= My.Computer.Screen.WorkingArea.Height Then DataGridView1.Height = My.Computer.Screen.WorkingArea.Height - p.Y

    tw = totalwidth + (Math.Abs(CInt(DataGridView1.Controls(1).Visible)) * CInt(DataGridView1.Controls(1).Width))
    DataGridView1.Width = tw + 2
    With Me
        .Width = tw + 4
        .Height = DataGridView1.Height + DataGridView1.Top
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:56:30.873

我不知道您是如何编写代码的，但是您是否尝试过编写类似的代码

```
DataGridView1.DataSource = someList
DataGridView1.DataBind()
If DataGridView.Rows.Count > 0 Then
    Dim p As Point = Me.PointToScreen(DataGridView1.Location)
    If p.Y + DataGridView1.Height >= My.Computer.Screen.WorkingArea.Height Then
        DataGridView1.Height = My.Computer.Screen.WorkingArea.Height - p.Y
        tw = totalwidth + (Math.Abs(CInt(DataGridView1.Controls(1).Visible)) * CInt(DataGridView1.Controls(1).Width))
        DataGridView1.Width = tw + 2
    With Me
        .Width = tw + 4
        .Height = DataGridView1.Height + DataGridView1.Top
    End With
End If
End Sub 
```

在你的方法中？

正如我所说，我不知道你是如何编写程序的，所以不要误会我的意思，或者如果你觉得它很愚蠢，也不要打扰.. ;)

编辑：我更改了代码。看看我的意思，如果我不是很清楚，对不起。

问题是，只有在将某些行添加到 DataGridView 后，您才应该提出您的观点，因此我将您的一些代码放在 If 块中。不要打扰我的 DataSource 和 DataBind 部分，我只是想澄清一下我的 If 块的意义。

# asp.net - 在 ASP.Net 中，我如何在允许下载之前要求联系方式

> ID：11109080
> 
> 赞同：0
> 
> 时间：2012-06-19T20:41:54.933
> 
> 标签：asp.net, download, contact-form

我想让网站访问者下载我们公司的宣传资料，并想收集一些联系方式。我希望这个过程尽可能地减少摩擦，但我确实希望每个访问者都经历被要求提供他们的详细信息的过程，所以我不希望下载页面直接可用。显然，我不需要登录。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:59:56.237

如果可以，您应该使用会话 cookie 来存储他们是否已经向您提供了他们的详细信息，如果他们刚刚允许下载，如果没有，则向他们显示详细信息页面。

Sessions 的问题在于，并非所有计算机都支持 cookie，并且一些国家（英国）正在制定更严格的 cookie 政策，因此您需要先征得用户许可，然后才能将它们放在计算机上。

通过 IP 地址 + 用户代理进行跟踪也很棘手，因为它们可能被一些 ISP 复制，迫使人们通过代理，或者在大公司中失败。

我认为您应该使用 Session 方法并接受它的不完美，或者拥有一个登录系统。

# macros - common lisp：对于一个 lisp 会话，只评估一次顶级表单

> ID：11109082
> 
> 赞同：1
> 
> 时间：2012-06-19T20:42:01.983
> 
> 标签：macros, lisp, common-lisp

我最近正在使用 REPL 进行更多交互式开发，并且我有一段代码将符号推送到全局动态变量（列表数据结构）上。问题是，我发现自己反复重新加载将该符号推送到全局的文件，因此每次重新加载时，我都会将另一个重复的符号推送到列表中。

我希望每个 lisp 会话只执行一次推送操作，无论重新编译/重新加载的次数如何，以模仿在更传统/部署的环境中事情的行为，当我只加载一次代码时lisp 会话。

这是我现在使用的方法。我希望有更好的方法......

```
(defvar *do-only-once*
  (progn
    (push 'some-val *some-global-lst*)
    'evaled)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:45:25.787

我只会使用[PUSHNEW](http://www.lispworks.com/documentation/HyperSpec/Body/m_pshnew.htm#pushnew)代替。

# c# - WPF 从 ContentTemplate 内部访问父 ViewModel

> ID：11109085
> 
> 赞同：0
> 
> 时间：2012-06-19T20:42:18.873
> 
> 标签：c#, wpf, caliburn.micro

我有一个带有模板内容的 TabControl，如下所示：

```
<TabControl x:Name="Items" SelectedItem="{Binding ActiveItem}" TabStripPlacement="Left" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1">
    <TabControl.ItemContainerStyle>
        <!--Some style stuff-->
    </TabControl.ItemContainerStyle>
    <TabControl.Template>
        <ControlTemplate TargetType="{x:Type TabControl}">
             <!--Some structure stuff including a tabpanel and contentPresenter-->
        </ControlTemplate>
     </TabControl.Template>
     <TabControl.ContentTemplate>
         <DataTemplate>
              <Button x:Name="MyButton" Visibility="{Binding x}" />
         </DataTemplate>
     </TabControl.ContentTemplate>
</TabControl> 
```

包含此 TabControl 的视图使用类似于以下的 ViewModel：

```
public class MyPageViewModel : ScreenConductorViewModelBase<IMyTab>
{
    public Visibility x = Visibility.Hidden;
} 
```

我希望模板内按钮的可见性从我的父（？）ViewModel中提取，但是它试图从项目viewModel中检索x。

这对我来说很有意义，但我不确定如何指定该字段应该来自父级。

我已经尝试了一些东西，但它们似乎都不起作用：

```
 {Binding x}
   {Binding DataContext.x}
   {Binding RelativeSource={RelativeSource TemplatedParent}, Path=x} 
```

我确定这样做一定很简单，但我似乎无法解决绑定语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:53:08.267

尝试

```
<Button x:Name="MyButton"
        Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type TabControl}},
                             Path=DataContext.x}" /> 
```

# php - 在 SES 中使用 PHP 变量作为电子邮件目的地

> ID：11109089
> 
> 赞同：0
> 
> 时间：2012-06-19T20:42:40.703
> 
> 标签：php, sdk, amazon-web-services

我想使用 php 变量作为使用 aws php sdk 的 Amazon SES 的目标电子邮件...以下是相关的代码行

```
$email = new AmazonSES();

$recip = array("ToAddresses"=>"$email");
$message = array("Subject.Data"=>"Welcome to Weather Warnings","Body.Text.Data"=>"tester");
$email->send_email("me@mydomain.com",$recip, $message); 
```

我的错误是.... 设置 recip 变量的行是第 31 行

可捕获的致命错误：无法将 AmazonSES 类的对象转换为第 31 行 /home/websites/wxwarn/customer/register.php 中的字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:46:00.023

我不熟悉 AmazonSES，但它是一个对象而不是字符串，所以你必须做类似的事情`$recip = array("ToAddresses"=>$email->getEmail());`

如果您要在 AmazonSES 对象中创建 __toString() 魔术方法，并让它返回电子邮件地址（假设它是该对象的属性），我认为您所拥有的会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:49:36.550

$email 是 AmazonSES 的类型，因此它不能是电子邮件地址，您必须使用另一个变量作为地址

嗨，我不在家，无法查看我的代码，但我认为您必须输入：

```
$email_array = array("test@test.com","test@test.net");
$recip = array("ToAddresses"=>"$email_array"); 
```

看这里：

[http://www.alexkorn.com/blog/2011/04/sending-email-aws-php-with-amazonses/](http://www.alexkorn.com/blog/2011/04/sending-email-aws-php-with-amazonses/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T04:05:29.430

这对我有用：

```
require_once('ses.php');
$ses = new SimpleEmailService('accessKey', 'secretKey');
$m = new SimpleEmailServiceMessage();
$m->addTo('addressee@example.com');
$m->setFrom('Name <yourmail@example.com>');
$m->setSubject('You have got Email!');
$m->setMessageFromString('Your message');
$ses->sendEmail($m); 
```

您可以从[http://www.orderingdisorder.com/aws/ses/获取 ses.php](http://www.orderingdisorder.com/aws/ses/)

# c# - WCF REST - 发布 JSON 字符串

> ID：11109095
> 
> 赞同：0
> 
> 时间：2012-06-19T20:42:59.720
> 
> 标签：c#, json, wcf, rest, post

当这个“快速一小时”项目出现时，我从没想过两天后我会在 Stackoverflow 上问这个问题。然而，我们来...

我有许多外部客户端应用程序（java、perl、php、c#），它们当前在返回 JSON 的 WCF REST 服务上调用 GET 方法。这工作正常，并且完全按照您的预期实施。

我现在需要这些相同的应用程序将 JSON POST 到原始服务接口上的新方法中。C# 应用程序使用 WebClient，Perl 和 PHP 使用 CURL，Java 使用一些我不参与的魔法。它们都将 JSON 生成为字符串，然后调用基本的 HTTP 功能将数据 POST 到端点。

问题是我们使用的 JSON 没有与之关联的 C# 类（由于无法更改的原因），因此我们打算使用字符串和 json.net 来解析/处理传入的数据。例如，端点可以是：

[https://magic.myserver.com/service/dataaggregator/](https://magic.myserver.com/service/dataaggregator/)

外部应用程序将 JSON 字符串发布到此，并在我们根据需要解析和处理的底层代码中。

所以问题是一个非常简单的问题，从服务接口的角度来看，这将如何实现？我可以毫无问题地处理服务代码中的 JSON 字符串的序列化/管理问题是我如何首先将该 JSON 字符串放入服务代码中。

目前我认为这些不能使用“普通”WCF REST 接口来完成，而是我必须实现一个较低级别的 HTTP 侦听器，在那里我可以直接访问传入的 post 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:50:36.540

如果您想接受*任意 JSON*，请看这里：

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/071f73bb-e141-4a68-ae61-05635382934f](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/071f73bb-e141-4a68-ae61-05635382934f)

如果这不是您想要的，那么您可能需要在问题中阐明您的目标。

另请参阅[https://stackoverflow.com/a/7360619](https://stackoverflow.com/a/7360619)和[https://stackoverflow.com/a/2330219](https://stackoverflow.com/a/2330219)

服务接口是这样的：

```
[OperationContract]
public Whatever  MyMethod(DataPacket rawJSON)
{ 
     ....
}

[DataContract]
public class DataPacket
{
  [DataMember]
  public JsonDictionary Registration { get; set; }
} 
```

...根据[此答案](https://stackoverflow.com/a/7360619)定义 JsonDictionary 的地方。

您还可以编写方法来接受流，如下所示：

```
[OperationContract]
public Whatever  MyMethod(Stream rawJSON)
{ 
     ....
} 
```

...并根据[这个答案](https://stackoverflow.com/a/2330219)自己解析 JSON 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:53:13.350

使用 ASP.NET WebAPI 使用匿名和弱类型 JSON 对象

在“匿名和弱类型 JSON 对象”部分查看此处： [http ://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)

实际上，它使用 JSON.NET，因此您可以使用较旧的 .NET REST 技术来实现。但我确信在处理成熟的 JSON 解析器时（不仅在 .NET 上），可以像解析 Json.NET 一样解析任意 JSON 结构

UPD：看看这个链接

[http://www.hanselman.com/blog/NuGetPackageOfTheWeek4DeserializingJSONWithJsonNET.aspx](http://www.hanselman.com/blog/NuGetPackageOfTheWeek4DeserializingJSONWithJsonNET.aspx)

您甚至可以将 Json.NET 中的 JObject 类作为动态处理。解析Json字符串可以产生JObject

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:11:39.473

如果你想使用 HttpListener 这里是一个示例代码（使用[Json.Net](http://json.codeplex.com/)）

```
HttpListener listener = new HttpListener();
listener.Prefixes.Add("http://*:8080/");
listener.Start();
Task.Factory.StartNew(() =>
{
    while (true)
    {
        HttpListenerContext context = listener.GetContext();
        ThreadPool.QueueUserWorkItem((o) =>
        {
            HttpListenerContext ctx = (HttpListenerContext)o;
            StreamReader rdr = new StreamReader(ctx.Request.InputStream);
            var postData = rdr.ReadToEnd();
            var dynJson = (JObject)JsonConvert.DeserializeObject(postData);

            foreach (var ch in dynJson.Children())
            {
                Console.WriteLine(ch);
            }

        }, context);
    }
});

Thread.Sleep(1000);
WebClient web = new WebClient();
web.UploadString("http://localhost:8080", 
                  JsonConvert.SerializeObject(new { ID=1,Name="name1" } )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:18:09.377

如果是 .Net 4.0 WCF 项目，则直接支持 JSON：

[http://msdn.microsoft.com/en-us/library/ee354381.aspx](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

找到“消息格式选择”部分。只需确保 Accept 标头设置为 application/json

# python - 寻找最频繁的模式

> ID：11109105
> 
> 赞同：0
> 
> 时间：2012-06-19T20:43:50.313
> 
> 标签：python

> **可能重复：**
> [在字符串中查找最长的重复序列](https://stackoverflow.com/questions/11090289/find-longest-repetitive-sequence-in-a-string)

我正在解决一个问题，我需要找到重复最多的模式。

为了简单和方便，请考虑这个字符串：

```
What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry.
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s... 
```

重复最多的序列（例如，最初考虑字符串长度大于 3 个字符）是“Lorem Ipsum”。当然，“Lorem”和“Ipsum”也重复相同的次数，但是如果它们重复相同的次数，较长的字符串优先于较短的字符串。

什么样的算法可以有效地找到这种模式，最好是在 Python 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:57:31.600

正如@fraxel 所指出的，您需要更多地说明您的问题，但这听起来充其量是一个动态编程（http://en.wikipedia.org/wiki/Dynamic_programming）问题。但是，如果不进一步指定它，就不可能知道您需要哪种算法。例如，您制定模式定义中的另一个不确定性。模式是简单的字符串吗？或者“ababa”是否被视为与“acaca”相同的模式，因为它将匹配正则表达式或全局模式“a*a*a”。

# vb.net - RichTextBox.append 字体颜色？

> ID：11109113
> 
> 赞同：0
> 
> 时间：2012-06-19T20:44:19.160
> 
> 标签：vb.net, fonts, colors, richtextbox

每次向 RichTextBox 添加文本时，我都需要设置字体的颜色

我正在使用..

```
RtbResults.AppendText(DisplayPacket) 
```

添加新的一行文本，但每一行都需要设置颜色。我在网上找到了这个，但它似乎在我的 VS11b 中不起作用

```
RtbResults.AppendText(DisplayPacket,forecolor,backcolor,font) 
```

这些是正确的重载吗？如果这不起作用，我可以用另一种方式吗？我不想插入文本然后返回并选择并更改其颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:57:59.103

使用 SelectionColor 属性，如下所示：

```
richTextBox1.SelectionStart = richTextBox1.Text.Length;
var oldcolor = richTextBox1.SelectionColor;
richTextBox1.SelectionColor = Color.Red;
richTextBox1.AppendText("foo");
richTextBox1.SelectionColor = oldcolor; 
```

# python - 将 Stripe 导入 Django - NameError

> ID：11109114
> 
> 赞同：5
> 
> 时间：2012-06-19T20:44:24.880
> 
> 标签：python, django, stripe-payments

我似乎不知道如何将 Stripe 导入到我的 Django 项目中。我正在运行 Python 2.7.3，并且一直收到

```
NameError at /complete/ global name. 'stripe' is not defined. 
```

即使我只是打开终端然后`python`输入

```
>>> import stripe 
```

我收到：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named stripe 
```

但是，如果我在目录中：

```
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages 
```

然后上面的`import stripe`命令就成功导入了 Stripe。然而，正如我所说，Django 不知道如何导入 Stripe。问题可能是某处的路径引用吗？我认为这可能是 Python 版本的问题，但无论我输入`python2.6`or `python2.7`then `import stripe`，它仍然无法正常工作，除非我在上面的那个目录中。我是否需要在我的 INSTALLED_APPS 或项目的 settings.py 文件中的某个位置包含条带？

我按照他们的文档安装了 Stripe：

```
 sudo pip install --index-url https://code.stripe.com --upgrade stripe 
```

回应：

```
Requirement already up-to-date: stripe in ./stripe-1.7.2-py2.7.egg
Requirement already up-to-date: requests>=0.8.8 in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from stripe)
Requirement already up-to-date: certifi>=0.0.4 in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from requests>=0.8.8->stripe)
Cleaning up... 
```

在这一点上，我不太确定该怎么做。下面是 Django 回溯。

```
Environment:

Request Method: POST
 Request URL: http://localhost:8000/complete/

Django Version: 1.5.dev20120523102003
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'django.contrib.admin',
 'catalog',
 'utils',
 'cart',
 'checkout')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')

Traceback:
File "/Users/Diepenbrock/django-trunk/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/Diepenbrock/Documents/django_/ecomstore/checkout/views.py" in complete_order
  15\.   stripe.api_key = "wXvAcOY6Rferd6oYNsc7Qi82aMm1KwyP"

Exception Type: NameError at /complete/
Exception Value: global name 'stripe' is not defined 
```

编辑：

```
import sys
print sys.path
import stripe 
```

返回

```
['/Users/Diepenbrock/Documents/django_/ecomstore', '/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg', '/Users/Diepenbrock/django-trunk', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages'] 
```

根据答案，我也尝试过`pip install --index-url https://code.stripe.com --upgrade stripe`

这是我收到的：

`Requirement already up-to-date: stripe in ./stripe-1.7.2-py2.7.egg Requirement already up-to-date: requests>=0.8.8 in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from stripe) Requirement already up-to-date: certifi>=0.0.4 in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages (from requests>=0.8.8->stripe) Cleaning up...`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:00:21.413

这似乎是在与 pip 使用的 Python 解释器不同的 Python 解释器下运行 django 开发服务器的情况。“站点包”位置应自动位于正确解释器的路径中。

您不需要在 INSTALLED_APPS 中添加“条纹”来解决无法导入的事实。您可以添加它以将其作为应用程序包含在内，并考虑其所有模块，例如它的 models.py。

根据您的评论，您默认使用 python 的 macports 安装，但是当您使用`sudo`命令安装条带时，它使用您的系统 python。首先，您应该尝试在不使用 sudo 的情况下进行 pip install。或者确保`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages`始终在您的 PYTHONPATH 中以包含系统包和您的 macport。

或者，您可以尝试将 sudo 与您想要的 python 的显式路径一起使用，这样环境就不会为您猜测： `sudo /opt/local/bin/pip install ...`

**虚拟环境**

您遇到的问题使这个问题成为使用[virtualenv](http://pypi.python.org/pypi/virtualenv)的完美候选者。使用 virtualenv 获得的是一个完全隔离的环境，始终使用相同的 python 解释器，并拥有本地化的站点包。安装条带会将其放置在该本地库中。

```
pip install virtualenv
virtualenv --no-site-packages myproject
cd myproject
source bin/activate
pip install --index-url https://code.stripe.com --upgrade stripe 
```

virtualenv 还允许您明确告诉它使用哪个 python 而不是默认值：

```
virtualenv --no-site-packages -p /opt/local/bin/python myproject 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:04:00.430

请在导入 stripe 之前查看 python 路径：

```
import sys
print sys.path
import stripe 
```

可能您必须在执行 python ./manage runserver 之前导出 PYTHONPATH=/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages

/Library/... 听起来不是标准路径...

# sql-server-2008-r2 - 如何连接来自虚拟主机提供商的凭据

> ID：11109117
> 
> 赞同：-1
> 
> 时间：2012-06-19T20:44:30.700
> 
> 标签：sql-server-2008-r2, web-hosting

谁能帮助我使用 Godaddy 提供的主机名通过 Management Studio 进行连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:49:15.477

不知道您使用什么技术连接到数据库，但连接字符串类似于：

```
Provider = SQLNCLI; -- maybe not necessary, e.g. in C#
  Data Source = hostname;
  Initial Catalog = your database name;
  User ID = username;
  Password = password; 
```

显然我们不能告诉你主机名、数据库名、用户名或密码......

在 Management Studio 中，您将输入您的凭据并在服务器名称框中输入主机名/IP（和命名实例，如果相关），例如：

![在此处输入图像描述](../Images/6fb36e61229639d2f8b9adf3ab818c3f.png)

...或者...

![在此处输入图像描述](../Images/931ccb21cf7b71e80952b8edd510e152.png)

...或者...

![在此处输入图像描述](../Images/1ccea137741d0cf85053291d648b5c51.png)

我们无法告诉您要输入什么，因为该信息在您和 GoDaddy 之间。如果您在连接时遇到特定问题，我们可以尝试帮助您解决问题，或者至少指导您询问他们的问题。

# c# - C# 验证多个文本框？

> ID：11109118
> 
> 赞同：2
> 
> 时间：2012-06-19T20:44:32.777
> 
> 标签：c#, winforms, validation, textbox, errorprovider

我有近 20 个文本框，并检查所有我必须使用 errorprovider 调用 validate 事件 20 次。除此之外还有什么有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:11:01.867

```
this.textBox1.Validating += new System.ComponentModel.CancelEventHandler(this.textBox_Validating);
this.textBox2.Validating += new System.ComponentModel.CancelEventHandler(this.textBox_Validating);
this.textBox3.Validating += new System.ComponentModel.CancelEventHandler(this.textBox_Validating);

// And so on for the 20 boxes.
private void textBox_Validating(object sender, CancelEventArgs e)
{
    TextBox textbox = (TextBox)sender;

    // Do whatever yo need to do with textbox here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:46:55.740

为它们中的每一个创建验证器（RequiredFieldValidator 或其他），然后将它们全部分配给同一个 ValidationGroup。您可以一次强制验证该组中的所有控件。

[http://msdn.microsoft.com/en-us/library/ms227424.aspx](http://msdn.microsoft.com/en-us/library/ms227424.aspx)

# objective-c - 在灵活宽度的 UITableView 内剪辑或屏蔽 UITableViewCell 的“可触摸”区域

> ID：11109124
> 
> 赞同：0
> 
> 时间：2012-06-19T20:44:48.823
> 
> 标签：objective-c, uitableview, uistoryboard

我有一个具有灵活宽度的 UITableView 的 iOS 应用程序，它允许我在方向更改期间自动将滚动条放置在 iPad 的右侧。

但是，我的单元格视图有一个不可调整大小的背景，它应该向用户显示可触摸区域是什么。但是，如果用户触摸远离背景，手势将作为 didSelect 事件被拦截，因为表格覆盖了整个屏幕，表格单元格也是如此。

因此，我正在寻找一种方法来解析用户触摸，看看它是否在后台之外，并接受与否。

为了使事情复杂化，我正在使用 UIStoryBoard。

更新：只是为了完成答案，在 lolcat 建议的两个解决方案中，我选择覆盖 NSResponder 方法，因为我有一个 UIStoryBoard 已经绘制了所有的 segues。通过使用 NSResponder，我没有更改视图控制器中的一行代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:13:01.850

我通过在应该截获触摸的单元格上放置一个不可见的按钮来完成类似的操作。创建一个函数来响应该按钮的选择器，该按钮的作用就像您的`didSelectRowAtIndexPath`函数通常那样。

否则，您可以继承 UITableViewCell 并覆盖 touchesBegan （或 touchesEnded - 根据您要查找的内容）。这将允许您查看在单元格内点击的确切点。这个方法可以[看这里](https://stackoverflow.com/questions/2414464/iphone-custom-uitableviewcell-with-multiple-areas-that-respond-to-taps)。

# mysql - MYSQL 按 HAVING 距离排序但无法分组？

> ID：11109127
> 
> 赞同：1
> 
> 时间：2012-06-19T20:45:01.350
> 
> 标签：mysql

我有这个查询

```
SELECT zip, 
( 3959 * acos( cos( radians(34.12520) ) * cos( radians( zip_info.latitude ) ) * cos(radians( zip_info.longitude ) - radians(-118.29200) ) + sin( radians(34.12520) ) * sin( radians( zip_info.latitude ) ) ) ) AS distance, 
user_info.*, office_locations.* 

FROM zip_info 

RIGHT JOIN office_locations ON office_locations.zipcode = zip_info.zip 

RIGHT JOIN user_info ON office_locations.doctor_id = user_info.id 

WHERE user_info.status='yes' 

HAVING distance < 50 ORDER BY distance ASC 
```

它输出

距离 | 医生 ID | 等等

7 --------------- 5 -------- 等

8 --------------- 4 -------- 等等

34 --------------- 4 -------- 等等

49 --------------- 5 -------- 等等

当我选择 30 或更小的距离时，它也会显示前两个结果，这很好。

问题：我不想为每个医生 ID 显示多个结果，所以我做了一个 GROUP BY user_info.doctor_id，当距离小于 50 时不显示任何结果。出于某种原因，它希望将所有结果分组，否则它不会工作。有小费吗？你还有什么需要帮助我的吗？

所以我想要的是

距离 | 医生 ID | 等等

7 --------------- 5 -------- 等

8 --------------- 4 -------- 等等

即使它想给我所有 4 行的结果，我只想对它们进行分组，以便只有每个唯一 user_info.doctor_id 距离最小的那些才会出现。请记住，距离是一个虚拟的不存在的表。

* * *

根据 llion 的查询，结果如下：

```
 (concat(user_info.id))     zip     distance    id
          1                 NULL    6.6643992   1 
```

它只给出一个结果，为了让它工作，我不得不再次将 AND 更改为 HAVING 距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:19:10.457

我不相信 GROUP BY 会给你你想要的结果。不幸的是，MySQL 不支持分析函数（这就是我们在 Oracle 或 SQL Server 中解决这个问题的方法。）

通过使用用户定义的变量，可以模拟一些基本的分析函数。

在这种情况下，我们要模拟：

```
ROW_NUMBER() OVER(PARTITION BY doctor_id ORDER BY distance ASC) AS seq 
```

因此，从原始查询开始，我更改了 ORDER BY 以便它首先排序`doctor_id`，然后在计算的`distance`. （在我们知道这些距离之前，我们不知道哪一个是“最近的”。）

有了这个排序的结果，我们基本上为每个医生 ID 的行“编号”，最接近的为 1，第二接近的为 2，依此类推。当我们得到一个新的医生 ID 时，我们从最接近的 1 重新开始。

为此，我们使用了用户定义的变量。我们使用一个来分配行号（变量名是@i，返回的列有别名seq）。我们用来“记住”前一行的医生ID的另一个变量，因此我们可以检测到医生ID中的“中断”，因此我们可以知道何时再次重新开始编号为1的行。

这是查询：

* * *

```
SELECT z.*
, @i := CASE WHEN z.doctor_id = @prev_doctor_id THEN @i + 1 ELSE 1 END AS seq
, @prev_doctor_id := z.doctor_id AS prev_doctor_id
FROM
(

  /* original query, ordered by doctor_id and then by distance */
  SELECT zip, 
  ( 3959 * acos( cos( radians(34.12520) ) * cos( radians( zip_info.latitude ) ) * cos(radians( zip_info.longitude ) - radians(-118.29200) ) + sin( radians(34.12520) ) * sin( radians( zip_info.latitude ) ) ) ) AS distance, 
  user_info.*, office_locations.* 
  FROM zip_info 
  RIGHT JOIN office_locations ON office_locations.zipcode = zip_info.zip 
  RIGHT JOIN user_info ON office_locations.doctor_id = user_info.id 
  WHERE user_info.status='yes' 
  ORDER BY user_info.doctor_id ASC, distance ASC

) z JOIN (SELECT @i := 0, @prev_doctor_id := NULL) i
HAVING seq = 1 ORDER BY z.distance 
```

* * *

我假设原始查询正在返回您需要的结果集，它只是有太多行，并且您想要消除每个医生 ID 的“最接近”（距离最小值的行）之外的所有内容。

我已将您的原始查询包装在另一个查询中；我对原始查询所做的唯一更改是按医生 ID 排序结果，然后按距离排序，并删除该`HAVING distance < 50`子句。（如果您只想返回小于 50 的距离，那么继续并保留该子句。目前尚不清楚这是否是您的意图，或者是否是为了将行限制为每个医生 ID 的一个而指定的。）

需要注意的几个问题：

替换查询返回两个附加列；这些在结果集中并不是真正需要的，除非作为生成结果集的手段。（可以将整个 SELECT 再次包装在另一个 SELECT 中以省略这些列，但这确实比它的价值更混乱。我只会检索这些列，并且知道我可以忽略它们。）

另一个问题是`.*`在内部查询中使用 有点危险，因为我们确实需要保证该查询返回的列名是唯一的。（即使现在列名不同，向其中一个表中添加列也可能在查询中引入“不明确”列异常。最好避免这种情况，这很容易通过`.*`将要返回的列，并为任何“重复”列名指定别名。（`z.*`在外部查询中使用 不是问题，只要我们控制由 . 返回的列`z`。）

* * *

**附录：**

我注意到 GROUP BY 不会为您提供所需的结果集。虽然可以通过使用 GROUP BY 的查询获得结果集，但返回正确结果集的语句将是乏味的。您可以指定`MIN(distance) ... GROUP BY doctor_id`，这将使您获得最小的距离，但不能保证 SELECT 列表中的其他非聚合表达式将来自具有最小距离的行，而不是其他行。（MySQL 在 GROUP BY 和聚合方面非常自由。为了让 MySQL 引擎更加谨慎（并与其他关系数据库引擎保持一致），`SET sql_mode = ONLY_FULL_GROUP_BY`

**附录 2：**

Darious 报告的性能问题“某些查询需要 7 秒”。

为了加快速度，您可能希望缓存函数的结果。基本上，建立一个查找表。例如

```
CREATE TABLE office_location_distance
( office_location_id INT UNSIGNED NOT NULL COMMENT 'PK, FK to office_location.id'
, zipcode_id         INT UNSIGNED NOT NULL COMMENT 'PK, FK to zipcode.id'
, gc_distance        DECIMAL(18,2)         COMMENT 'calculated gc distance, in miles'
, PRIMARY KEY (office_location_id, zipcode_id)
, KEY (zipcode_id, gc_distance, office_location_id)
, CONSTRAINT distance_lookup_office_FK
  FOREIGN KEY (office_location_id) REFERENCES office_location(id)
  ON UPDATE CASCADE ON DELETE CASCADE
, CONSTRAINT distance_lookup_zipcode_FK
  FOREIGN KEY (zipcode_id) REFERENCES zipcode(id)
  ON UPDATE CASCADE ON DELETE CASCADE
) ENGINE=InnoDB 
```

这只是一个想法。（我希望您正在搜索特定邮政编码的 office_location 距离，因此 (zipcode, gc_distance, office_location_id) 上的索引是您的查询需要的覆盖索引。（我会避免将计算出的距离存储为 FLOAT，因为差FLOAT 数据类型的查询性能）

```
INSERT INTO office_location_distance (office_location_id, zipcode_id, gc_distance)
SELECT d.office_location_id
     , d.zipcode_id
     , d.gc_distance
  FROM (
         SELECT l.id AS office_location_id
              , z.id AS zipcode_id
              , ROUND( <glorious_great_circle_calculation> ,2) AS gc_distance
           FROM office_location l
          CROSS
           JOIN zipcode z
          ORDER BY 1,3
       ) d
ON DUPLICATE KEY UPDATE gc_distance = VALUES(gc_distance) 
```

通过缓存和索引函数结果，您的查询应该更快。

```
SELECT d.gc_distance, o.*
  FROM office_location o
  JOIN office_location_distance d ON d.office_location_id = o.id
 WHERE d.zipcode_id = 63101
   AND d.gc_distance <= 100.00
 ORDER BY d.zipcode_id, d.gc_distance 
```

我对在缓存表的 INSERT/UPDATE 上添加 HAVING 谓词犹豫不决；（如果您的纬度/经度有误，并且计算了 100 英里以下的错误距离；在纬度/经度固定且距离达到 1000 英里之后的后续运行...如果该行从查询中排除，那么缓存表中的现有行将不会被更新。（您可以清除缓存表，但这并不是必需的，这只是对数据库和日志的大量额外工作。如果维护查询的结果集太大，可以分解为每个邮政编码或每个 office_location 迭代运行。）

另一方面，如果您对超过某个值的任何距离不感兴趣，则可以添加`HAVING gc_distance <`谓词，并大大减少缓存表的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:19:41.513

HAVING 子句基于聚合结果进行过滤。当您将 GROUP BY 添加到语句中时，构成该`distance`列的方程式会为单个医生 ID 的所有行添加值。因此，距离最终将是：

```
distance | doctor_id | etc
      56 |         5 | etc
      42 |         4 | etc 
```

如您所见，医生 ID 5 > 50。如果医生 ID 4 没有返回结果，那么我假设您没有显示更多行。

您想要的是距离小于 50 的不同医生 ID。您想要最小、最大、平均距离吗？也许这就是你想要的（我没有测试过这个，我认为你需要围绕 zip 值进行分组）：

```
SELECT distinct(concat(zip,user_info.doctor_id)), zip, min(( 3959 * acos( cos( radians(34.12520) ) * cos( radians( zip_info.latitude ) ) * cos(radians( zip_info.longitude ) - radians(-118.29200) ) + sin( radians(34.12520) ) * sin( radians( zip_info.latitude ) ) ) )) AS distance, 
user_info.doctor_id

FROM zip_info 

RIGHT JOIN office_locations ON office_locations.zipcode = zip_info.zip 

RIGHT JOIN user_info ON office_locations.doctor_id = user_info.id 

WHERE user_info.status='yes' 
AND distance < 50 ORDER BY distance ASC 
```

这应该提供独特的 zip/doctor 分组，而无需添加其他内容。

# sharepoint-2010 - 自定义 SharePoint WebPart - 自定义属性设置问题

> ID：11109128
> 
> 赞同：0
> 
> 时间：2012-06-19T20:45:03.573
> 
> 标签：sharepoint-2010, web-parts, page-lifecycle

我正在开发一个自定义列表搜索工具。我有多个自定义属性来保留搜索查询的列表，以及要在搜索中查询的字段。

示例用户界面

DROPDOWN（列表中的选定字段） TEXTBOX（查询） SEARCHBUTTON

我的问题是，在加载 WebPart 时，在“要搜索的列表”属性之前设置了“要搜索的字段”属性，这会导致错误，因为我在添加之前检查以确保字段确实存在于正确的列表中他们到下拉菜单。

有没有办法指定 Web 部件属性在加载时设置的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:41:33.700

```
 [Category("Search Settings"),
Personalizable(PersonalizationScope.Shared),
WebBrowsable(true), WebDisplayName("List Name"),
WebDescription("Enter list name")]
    public string CustomTextProp {
        get { return listToSearch; }
        set {
            int existsFlag = 0;
            foreach (SPList spl in thisWeb.Lists) {
                if (spl.Title == value || value == string.Empty) {
                    existsFlag = 1;
                    break;
                }
            }
            if (existsFlag == 1) {
                listToSearch = value;
            } else {
                throw new WebPartPages.WebPartPageUserException("The list entered does not exist - Enter an existing list or create a new one");
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:44:41.140

```
[Category("Search Settings"),
Personalizable(PersonalizationScope.Shared),
WebBrowsable(true), WebDisplayName("Search Field Options (Separate by comma ',')"),
WebDescription("Enter Fields to Search By")]
    public string SearchByOptions {
        get {
            return searchByOptions;
        }
        set {//between here
            //  int validFlag = 1;
            //  foreach (string str in SeparateByComma(value)) {
            //    if (!FieldExists(str, CustomTextProp)) {
            //      validFlag = 0;
            //      break;
            //    }
            //  }
            //  if (validFlag == 1) {
            searchByOptions = value;
            //  } else {
            //    throw new WebPartPages.WebPartPageUserException("Option is null or one or more fields do not exist/have been entered incorrectly");
            //  }//and here
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:38:09.927

我认为在这种情况下，您最容易将验证逻辑从属性设置器中移到另一个方法中（`CreateChildControls`例如）。通过这样做，您将删除对属性设置顺序的任何依赖。

我的 Web 部件属性中通常没有逻辑（或非常非常少）。我从`CreateChildControls`一开始就进行所有验证。然后，如果某些属性的值缺失或无效，我可以抛出异常，或者更典型的是，使用 Web 部件的输出写出描述性消息。

# c# - 如果可能的话，如何在这段代码上实现多线程？

> ID：11109130
> 
> 赞同：0
> 
> 时间：2012-06-19T20:45:24.643
> 
> 标签：c#, multithreading

我正在用 C# 构建一个有限元分析库。在我要分析的每个结构中，都需要在元素级别执行多次计算，并将结果汇​​总到结构级别。当有许多元素时，所有这些计算都需要相当长的时间。

例如，计算单元刚度矩阵并将其组装到全局刚度矩阵中。

有没有办法让进程利用线程？

```
public class FEStructure
{
    public List<Element> elements = new List<Element>;
    public Matrix K;

    Struct()
    {
        // Do some stuff not relevant here
    }

    public void CalcK()
    {
        // Create a Global stiffness matrix (n x n)
        K = new DenseMatrix(SizeK());

        // Process all elements - can it be threaded?
        foreach (Element e in elements)
        {
            // Get the element stiffness matrix  and assemble it into K
            Matrix Ke = e.CalcKe();
            Assemble(Ke);
        }
    }

    public void Assemble(Matrix Ke)
    {
        // Assembles Ke into K using the element topology
        // and lot of fields and methods left out. Code
        // operates on K using syntax similar to:
        K[i, j] = Ke[k, l];
    }
} 
```

**编辑：**

元素矩阵的`e.CalcKe()`计算是一个独立的计算，可以按任意顺序进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:48:28.920

您应该能够使用 Parallel.ForEach 轻松地将线程上的 for each 循环并行化。

您只需要确保对矩阵的分配是线程安全的，并且各个计算不依赖于按顺序完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:45:05.843

```
Parallel.ForEach(elements, e =>
{
     var eResult = e.CalcKe(); 
     AggregateResults(eResult);
}

void AggregateResults(Matix r)
{
    lock(denseMatrix)
        denseMatix[a,b] = r[k,l];
} 
```

# sql - 数据库“主”中的 CREATE DATABASE 权限被拒绝

> ID：11109134
> 
> 赞同：2
> 
> 时间：2012-06-19T20:45:31.030
> 
> 标签：sql, sql-server, asp.net-mvc-3

这适用于具有 View 表的现有数据库。试图列出一个视图表，但在我的操作中遇到了这个错误消息：

```
CREATE DATABASE permission denied in database 'master'. 
```

要访问的视图表称为：SomeTable

如果你在数据库（ServerA_dev_alpha_custom）上运行它：

```
sp_helptext 'SomeTable' 
```

你会得到这个：

```
 CREATE VIEW dbo.[SomeTable] AS  SELECT * FROM ServerA_dev_alpha.dbo.[SomeTable] 
```

这是模型：

```
public class SomeTable
{
    [Key]
    public virtual string SomeTableid  { set; get; }
    public virtual string name  { set; get; }
    public virtual string formvalue  { set; get; }
    public virtual string status  { set; get; }
    public virtual DateTime CreateDate { set; get; }    
} 
```

班级名称：

```
public class SomeDB: DbContext 
```

与连接字符串名称完全匹配：

```
 <add name ="SomeDB"
         connectionString ="data source=ServerA\DBSome; integrated Security=SSPI; initial catalog=ServerA_dev_alpha_custom"
         providerName="System.Data.SqlClient"/> 
```

在创建模型时发现错误：

```
SomeDB _db = new SomeDB();

var model = (from c in _db.SomeTable
  orderby c.CreateDate descending
  select c).Take(20); 
```

当我将连接字符串更改为指向表的定义位置时： ServerA_dev_alpha (database) 它可以工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:38:13.403

即使您有一个现有的数据库，将初始化程序设置为 null 也可以：

```
Database.SetInitializer<SomeDB>(null); 
```

第二; 强制映射到表名就可以了：

```
modelBuilder.Entity<SomeTable>()
.ToTable("SomeTable"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T09:08:08.983

我通过使用 sql server 授权帐户 sa 而不是 windows 授权帐户解决了这个问题。

您可以先通过windows授权登录SqlServer管理工具，然后在左侧部分窗口（称为“对象资源管理器”）-> You Server\SQLEXPRESS(10.xxx) -> Security -> Logins中找到sa

双击sa，然后为其设置密码和默认数据库。默认数据库应该是您的数据库而不是“主数据库”。然后，切换到“状态”页面，启用 sa 帐户。

如果您的数据库还没有在下拉列表中列出，在上面提到的左侧部分窗口中，右键单击并选择“附加”以附加它。

而且，连接字符串应该是：

connectionString="数据源=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\MFC.mdf;初始目录=MFC;集成安全=false;用户ID=sa;密码=your_password_here;"

这个对我有用。

# c# - 遍历文件以获取每人的总数

> ID：11109135
> 
> 赞同：-4
> 
> 时间：2012-06-19T20:45:38.643
> 
> 标签：c#

这是我必须使用的工资单文件中的一个示例，它列出了员工编号、不同类型的收入和检查日期。目标是获得每个员工的小计，列出员工的总工资和其他收入。我无法理解如何做到这一点，有人可以提供一些建议吗？我正在尝试在 C# 中执行此操作。一些员工可能只有一条线，其他员工可能有没有固定工资类型的线，只有扣除/收入（奖金、保险等......）

```
240 TN  DP  800.00  1696.65 .00 .00 .00 .00 65  46.20   11/10/11
240 TN  DP  800.00  1696.65 .00 .00 .00 .00 66  124.83  11/10/11
240 TN  DP  800.00  1696.65 .00 .00 .00 .00 72  5.27    11/10/11
240 TN  DP  800.00  1696.65 .00 .00 .00 .00 ZC  1933.75 11/10/11
240 TN  DP  800.00  1643.55 .00 .00 .00 .00 65  46.20   11/25/11
240 TN  DP  800.00  1643.55 .00 .00 .00 .00 66  122.18  11/25/11
240 TN  DP  800.00  1643.55 .00 .00 .00 .00 72  5.27    11/25/11
240 TN  DP  800.00  1643.55 .00 .00 .00 .00 ZC  1893.87 11/25/11
240 TN  DP  .00 .00 .00 .00 400.00  .00 66  20.00   12/09/11
240 TN  DP  800.00  1595.25 .00 80.00   .00 .00 65  46.20   12/09/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 65  .00 07/08/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 67  .00 07/08/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 69  .00 07/08/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 72  .00 07/08/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 74  .00 07/08/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 ZC  1299.03 07/08/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 65  181.85  07/22/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 67  12.46   07/22/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 69  .00 07/22/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 72  22.15   07/22/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 74  .00 07/22/11
242 TN  DP  1538.46 .00 .00 .00 .00 .00 ZC  1124.70 07/22/11 
```

编辑：在回答一些问题时，这些字段从左到右依次为：员工编号、州、部门、正常工资、加班工资、假期工资、假期工资、病假工资、特殊工资、收入代码、收入金额、检查日期。我需要为每个字段获取每位员工的总数，同时确保每个检查日期不会多次添加一个人的工资。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:06:54.843

如果您正在使用文本文件，您应该阅读它，然后详细说明数据。所以这就是我要做的：

```
string[] lines = File.ReadLines(path); 
```

然后对于数组中的每个元素（行），我将按数据拆分它：

```
 __Data1___ ______________Data2_______________D3_ __D4__ ___Data5___
|          |                                |    |      |           |
 240 TN  DP  800.00  1696.65 .00 .00 .00 .00 65  46.20   11/10/11
 240 TN  DP  800.00  1696.65 .00 .00 .00 .00 66  124.83  11/10/11
 240 TN  DP  800.00  1696.65 .00 .00 .00 .00 72  5.27    11/10/11
 240 TN  DP  800.00  1696.65 .00 .00 .00 .00 ZC  1933.75 11/10/11
 240 TN  DP  800.00  1643.55 .00 .00 .00 .00 65  46.20   11/25/11
 240 TN  DP  800.00  1643.55 .00 .00 .00 .00 66  122.18  11/25/11
 240 TN  DP  800.00  1643.55 .00 .00 .00 .00 72  5.27    11/25/11
 240 TN  DP  800.00  1643.55 .00 .00 .00 .00 ZC  1893.87 11/25/11
 240 TN  DP  .00 .00 .00 .00 400.00  .00 66  20.00   12/09/11
 240 TN  DP  800.00  1595.25 .00 80.00   .00 .00 65  46.20   12/09/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 65  .00 07/08/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 67  .00 07/08/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 69  .00 07/08/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 72  .00 07/08/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 74  .00 07/08/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 ZC  1299.03 07/08/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 65  181.85  07/22/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 67  12.46   07/22/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 69  .00 07/22/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 72  22.15   07/22/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 74  .00 07/22/11
 242 TN  DP  1538.46 .00 .00 .00 .00 .00 ZC  1124.70 07/22/11 
```

所以我会创建一个类并获取我需要的数据：

```
class Data
{
    public string Data1;
    public string Data2;
    public string Data3;
    public string Data4;
    public string Data5;
} 
```

* * *

```
List<Data> myList = new List<Data>();

//Split lines
foreach(string s in lines)
{
   string[] buffer = s.Split(' '); //split by space

   Data data = new Data();
   data.Data1 = string.Concat(buffer.Take(3).ToArray());
   data.Data2 = string.Concat(buffer.Skip(3).Take(6).ToArray());
   data.Data3 = string.Concat(buffer.Skip(9).Take(1).ToArray());
   data.Data4 = string.Concat(buffer.Skip(10).Take(1).ToArray());
   data.Data5 = string.Concat(buffer.Skip(11).Take().ToArray());

   myList.Add(data);
} 
```

# php - 将函数应用于数组节点，直到数组节点不是数组

> ID：11109148
> 
> 赞同：2
> 
> 时间：2012-06-19T20:46:40.720
> 
> 标签：php

假设我有这个结构，在一个数组中：

```
Array
(
    [0] => Array
        (
            [0] => Heading1
            [1] => Array
                (
                    [0] => Array
                        (
                            [0] => 2
                            [1] => Heading2.1
                        )

                    [1] => Array
                        (
                            [0] => 2
                            [1] => Heading2.2
                        )

                )

        )

    [1] => Array
        (
            [0] => Heading1.2
        )

) 
```

如何仅将函数应用于包含标题 2.1 和标题 2.2 的数组元素？

我要应用的函数可能会进一步嵌套数组。我怎样才能使我的函数也可以在这些新创建的数组上运行？然后创建的数组，直到第二深没有数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:48:44.390

递归遍历它，使用[is_array()](http://php.net/manual/en/function.is-array.php)函数检查它是否是一个数组，如果是，应用你的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:59:01.133

天真的递归是行不通的，重新运行递归是一个双重否定。您要在这里使用的是[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)。

> 在计算机科学中，有向图的**拓扑排序**（有时缩写为 topsort 或 toposort）或拓扑排序是其顶点的线性排序，使得对于每条边*uv*，*u*在排序中排在*v*之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:51:30.110

您可以使用 array_walk() 并测试，在您将在每个节点上执行的函数中，如果内容是一个数组...

[http://php.net/manual/en/function.array-walk.php](http://php.net/manual/en/function.array-walk.php)

# c# - 属性还是方法？

> ID：11109150
> 
> 赞同：-1
> 
> 时间：2012-06-19T20:46:50.227
> 
> 标签：c#, properties, methods

> **可能的重复：**
> [属性与方法](https://stackoverflow.com/questions/601621/properties-vs-methods)

我是一名初学者 C# 程序员，最近发现了如何使用属性来公开成员。但是，当返回某些东西时，我对何时将属性与方法相对使用感到困惑。

我应该这样做：

```
public Vector2 Center {
    get {
        Vector2 screenDem = new Vector2(game.GraphicsDevice.Viewport.Width,
            game.GraphicsDevice.Viewport.Height);
        return new Vector2(screenDem.X / 2, screenDem.Y / 2);
    }
} 
```

或者我应该做这样的事情：

```
public Vector2 GetScreenCenter() {
    Vector2 screenDem = new Vector2(game.GraphicsDevice.Viewport.Width,
            game.GraphicsDevice.Viewport.Height);
    return new Vector2(screenDem.X / 2, screenDem.Y / 2);
} 
```

我什么时候应该使用 which 以及为什么？

也许我只是想这件事太努力了，没关系，我不知道。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:49:15.870

如果您只想获取和设置一个值，那么最好使用属性。

```
public DateTime TheCurrentTime {get; set;} 
```

如果您需要传递参数以修改或返回某些内容，那么最好使用方法。

```
public DateTime HowManyDaysUntilMyBirthday(Datetime MyBirthday) 
{
    return (MyBirthday - DateTime.Now());
} 
```

# google-maps - 将游戏地图添加到 Google Maps API

> ID：11109154
> 
> 赞同：0
> 
> 时间：2012-06-19T20:46:57.283
> 
> 标签：google-maps, google-maps-api-3

我是一个没有接触过 Google Maps API 的人，但作为一名 Web 开发人员，我开始思考使用它的理由。我想通过添加一个多人 FPS 游戏地图（比如战地 3 中的地图）然后在上面放置标记和东西来解决这个问题。

这样我就可以与朋友分享，向他们展示隐藏点，他们可以添加自己的等等......

显然，这可能是大量的工作，我不希望被告知确切的操作方法，但鉴于我将在自定义贴图而不是法线贴图上工作，我开始遇到困难。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:20:49.670

Google Maps API 不是您想要用来创建自己的自定义地图的 API。相反，人们在他们的网站上使用谷歌地图来直观地显示位置和与这些位置相关的数据，以便观众进一步了解制造商的目的。

话虽如此，如果您的视频使用现实世界中实际存在的地图，您也许可以使用 Google Maps API 创建类似的显示。但是有些事情你不能做，比如删除谷歌水印，或者创建你自己的，所以从这个意义上说，API 可能不适合你的需要。

# perl - Perl Tk 绑定 不是数字键盘返回吗？

> ID：11109160
> 
> 赞同：10
> 
> 时间：2012-06-19T20:47:20.353
> 
> 标签：perl, bind, perltk

我正在从用户那里获取一个 ISBN。可能来自条形码扫描仪（EAN 18 位，由 Return 终止），但可以手动输入（13 位）。如果是手动输入，它将来自数字键盘，并可能以“数字键盘输入”结尾。我在我的代码中添加了一个绑定：

```
$isbn_entry->bind("<Return>", sub{shift->focusNext}); 
```

当按下键盘上的回车键时，它可以正常工作，但在按下数字键盘上的回车键时不能正常工作。我是否也必须添加另一个绑定来捕获那个绑定？如果是这样，怎么做？还是我一开始就做错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T21:24:36.590

`<KP_Enter>`应对应数字键盘输入。您可以像绑定它一样绑定它`Return`。

# cassandra - 如何计算 ByteOrderedPartitioner 的令牌

> ID：11109162
> 
> 赞同：3
> 
> 时间：2012-06-19T20:47:30.043
> 
> 标签：cassandra, database-partitioning

我正在测试具有不同配置的 Cassandra 集群的行为。其中之一使用 ByteOrderedPartitioner 沿节点分发密钥。

数据模型由胖行组成，每行都有一个整数（IntegerType）作为键，值从 0 到 9999。我以这种方式设置了 10 个节点的环：

```
Address      Rack    Status    State            Owns    Token
                                                     Token(bytes[0900])
node1         Up     Normal  5.14 MB         10.00%  Token(bytes[00])
node2         Up     Normal  377.42 MB       10.00%  Token(bytes[0100])
node3         Up     Normal  373.06 MB       10.00%  Token(bytes[0200])
node4         Up     Normal  966.15 KB       10.00%  Token(bytes[0300])
node5         Up     Normal  953.4 KB        10.00%  Token(bytes[0400])
node6         Up     Normal  953.26 KB       10.00%  Token(bytes[0500])
node7         Up     Normal  944.54 KB       10.00%  Token(bytes[0600])
node8         Up     Normal  953.4 KB        10.00%  Token(bytes[0700])
node9         Up     Normal  962.42 KB       10.00%  Token(bytes[0800])
node10        Up     Normal  961.31 KB       10.00%  Token(bytes[0900]) 
```

但所有负载都在节点 2 和节点 3 上进行复制。

为什么这些令牌不起作用？我应该如何修复它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T00:56:57.577

首先，您应该在每个节点上运行清理，以确保您没有看到节点不再负责的额外数据，引导后。

完成后，您可以使用`getRangeKeySample`JMX 方法获取节点上的键样本。然后，如有必要，您可以将其令牌调整为将适当数量的键移动到其邻居的值。

也就是说：你几乎肯定应该使用它`RandomPartitioner`，以避免这个问题。我在这样的帖子中解释了[如何](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)在分区键中使用集群*来*进行排序，否则你可能会倾向于使用 BOP。

# c# - 从其他设备访问 localhost WCF？

> ID：11109163
> 
> 赞同：12
> 
> 时间：2012-06-19T20:47:30.903
> 
> 标签：c#, wcf, remote-access

我已经成功地创建了一个 WCF 服务，它可以按照我想要的方式工作。唯一的问题是，除了 WCF 服务正在运行的实际机器之外，我无法从任何东西访问 Web 服务。

我了解 Cassini Web 服务仅是本地的，我希望能够在我的客户系统上运行 WCF 服务，只要他们在我的桌面应用程序中需要该服务。

有没有人知道一种简单的方法来做到这一点，而不需要客户安装除 .NET Framework 之外的任何东西吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T20:50:27.407

使用[自托管](http://msdn.microsoft.com/en-us/library/ms731758.aspx)在您自己的应用程序/服务中托管。如果您已经拥有 WCF 服务，那么创建一个 Windows 服务并在其中托管它应该是一件简单的事情（请参阅链接）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:50:33.417

WCF 不需要 Web 服务器来托管服务。但是，需要运行一些东西，无论是控制台/主机应用程序还是 Windows 服务。然后在启动时，它可以通过创建 ServiceHost 类的实例来公开服务。[请参阅位于http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx)的 MSDN 示例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T02:13:51.510

要运行 WCF 服务，您需要一个主机进程。没有办法解决这个问题。

如果主机进程可以（取决于适用于您的情况的任何要求、部署模型、网络限制等）与您的桌面应用程序相同，则将该服务嵌入到您的桌面应用程序中。这种技术称为“进程内”WCF 托管。它基本上是在客户端应用程序中“自托管”服务。如果您采用此解决方案，请使用 IPC (net.pipe) 绑定，因为它更优化，并消除所有潜在的网络/防火墙注意事项。

如果服务需要在不同的计算机或不同的进程中运行，那么您需要使用或实现主机应用程序。IIS、WAS、AppFabric 和 WCFServiceHost（不是生产级主机）是您可以使用的即用型主机的一些示例。如果您不能或不想使用它们，则需要实现自己的主机应用程序，并在其中“自托管”WCF 服务。您的应用程序可以是任何东西：控制台、桌面、Windows 服务等。如果您不想让用户担心如何以及何时启动主机，请确保它始终处于运行状态。建议使用自动启动的 Windows 服务。

如果服务需要在不同于客户端的计算机上运行，​​请确保服务器和客户端之间的所有网络设备和软件（防火墙、路由器、网关等）都已正确配置，以便您的绑定正常工作。请注意您的绑定所使用的协议（http、tcp 等）和端口（80、443、808 等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T13:11:42.303

您可以尝试以下文章中的托管步骤。

[http://www.codeproject.com/Articles/34668/GeoPlaces-Hybrid-smart-client-involving-RESTful-WC](http://www.codeproject.com/Articles/34668/GeoPlaces-Hybrid-smart-client-involving-RESTful-WC)

为了测试您的服务，向它发出请求并检查响应。如果您没有公开您的服务元数据，有时您可能无法下载 WSDL。

啤酒！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T19:31:18.830

这是可能的建议，如果不合适请忽略它：使用@driis 提到的自托管服务。这是您的方案的最佳选择。关于在您的 WCF 服务中托管 HTML 页面...是的，这是可能的，但这不是一个简单的解决方案。一句话总结，您必须创建自定义消息格式化程序并绕过 WCF 提供的默认消息格式化程序。您将创建一个必须从 WebHttpBehavior 继承的 HtmlBehavior、必须从 BehaviorExtensionElement 继承的 HtmlBehaviorExtension，最后是一个将实现 IDispatchMessageFormatter 的 HtmlFormater。在以下链接中，您将找到一篇关于自定义格式化程序的精彩文章：http: [//blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx)

# soap - Mule 3.2：如何修改传入的 SOAP 有效负载

> ID：11109165
> 
> 赞同：1
> 
> 时间：2012-06-19T20:47:51.603
> 
> 标签：soap, mule

我有一个关于 Mule ESB 以及如何操作对传入 SOAP 请求的响应的问题。用例场景是这样的：
**传入的 SOAP 请求 --> 接受请求并发送到异步流进行处理 --> 在 SOAP 响应中将 Mule 事务的消息 ID 返回给调用者 -->（异步处理原始请求继续）**
在这种情况下，SOAP 请求处理的结果与调用者无关。

```
<flow name="asyncTestFlow1" doc:name="asyncTestFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"
        host="localhost" port="8088" doc:name="HTTP" />
    <logger message="F1: messageID:#[message:id]" level="INFO" />
    <async doc:name="Async">
        <flow-ref name="asyncTestFlow2" doc:name="Flow Reference" />
    </async>

    <!-- ### need to modify the request, add the message ID and send back to the client ### -->
</flow>

<flow name="asyncTestFlow2">
    <cxf:proxy-service payload="body" soapVersion="1.2" doc:name="SOAP" />
    <logger message="after cxf:proxy-service -> #[groovy:payload.getClass()]" level="INFO" />

    <cxf:proxy-client payload="body" enableMuleSoapHeaders="true" soapVersion="1.2" doc:name="SOAP" />

    <http:outbound-endpoint exchange-pattern="request-response"
        address="http://example.net/KnowYourClient/KYCService"
        doc:name="HTTP" />

    <logger message="SOAP response: #[payload:java.lang.String]" level="INFO" />
</flow> 
```

在第 9 行附近，我添加了一条评论，我想在其中修改请求/响应的有效负载。我在想我需要一个自定义消息转换器，但我不知道从哪里开始。我可以将输入作为 ContentLengthInputStream（默认传入）或 DepthXMLStreamReader（在调用 cxf:proxy-service 之后）。我认为在 XML 格式中它会更容易操作。
有人可以指出我如何开始操作 XML 内容的正确方向吗？

谢谢你，马库斯

**--update--working example now**
我想我现在可以工作了.. 关键是 bye 数组转换器的初始对象，它允许在私有流中使用传入消息。

```
<flow name="asyncTestFlow1" doc:name="asyncTestFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"  host="localhost" port="8088" doc:name="HTTP" />
    <object-to-byte-array-transformer />
    <logger message="F1: messageID:#[message:id]" level="INFO" doc:name="Logger" />
    <async doc:name="Async">
        <flow-ref name="asyncTestFlow2" doc:name="Flow Reference" />
    </async>
    <custom-transformer class="org.mule.examples.hello.SoapResponseTransformer" doc:name="Java" />
</flow>

<flow name="asyncTestFlow2" doc:name="asyncTestFlow2">
    <cxf:proxy-service payload="body" soapVersion="1.2" doc:name="SOAP"/> 
    <cxf:proxy-client payload="body" enableMuleSoapHeaders="true" soapVersion="1.2" doc:name="SOAP"/>
    <http:outbound-endpoint exchange-pattern="request-response"
        address="http://.../Service"
        doc:name="HTTP" />
    <logger message="SOAP response: #[payload:java.lang.String]" level="INFO" doc:name="Logger" />
</flow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-21T04:40:41.787

您也可以使用`<object-to-string-transformer doc:name="Object to String"/>`而不是`<object-to-byte-array-transformer />`

# cytoscape-web - Cytoscape.js 强制导向布局和节点放置

> ID：11109168
> 
> 赞同：4
> 
> 时间：2012-06-19T20:47:56.350
> 
> 标签：cytoscape-web

我最近发现了 Cytoscape.js 并想尝试强制导向的布局：arbor 和 springy。

现在，我有几个问题：

1.  是否可以通过使用其中一种布局来实现图形，其中节点放置基于某种算法并且节点坐标不是必需的？例如，在 VivaGraphJS 中，图会收敛，因此连接的节点形成组，孤立的节点移动到外围。如果这可以在强制导向布局上完成，是否可以关闭强制以便可以在画布上自由选择和拖动节点？

2.  Cytoscape 可以实际处理多大的图（节点/边数）？

3.  假设每个节点和边都有五个属性，我想要一个在鼠标悬停时显示这些属性的文本框。最简单的方法是什么？

4.  Wiki 说可以添加单个节点，如下所示，但 cy 没有节点功能；这是一个错误吗？var n0 = cy.node("n1"); cy.add(n0); // 添加一个元素，n0

5.  我试图创建一个使用 Arbor/Springy 的简单随机数据图。下面的代码在“return data.cy”处给出错误“数据未定义”。当布局是“随机的”时，代码可以工作。我究竟做错了什么？

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <style type="text/css">
    .full-height { height: 600px; margin: 0 0; padding: 0 0; }
    </style>

    <script src="jquery-1.7.2.js"></script>
    <script src="demo/cytoscape.all.js"></script>
    <script src="demo/extensions/cytoscape.layout.arbor.js"></script>
    <script src="demo/extensions/cytoscape.layout.springy.js"></script>

    <script src="demo/arbor.js"></script>
    <script src="demo/arbor-tween.js"></script>
    <script src="demo/springy.js"></script>

    <script type='text/javascript'>
        function onLoad() {

             // create a mapper for node size
            var nodeSizeMapper = {
                continuousMapper: {
                    attr: {
                        name: "weight",
                        min: 0,
                        max: 40
                    },
                    mapped: {
                        min: 5,
                        max: 25
                    }
                }
            };

            $("#cy").cytoscape( {
                layout: { name: "arbor" }, // works when "random"
                style: {
                    selectors: {
                        "node":{
                            shape: "ellipse",
                            fillColor: "#3366FF",
                            height: nodeSizeMapper,
                            width: nodeSizeMapper,
                            labelText: {
                                passthroughMapper: "id"
                            }
                        },
                        "edge": {
                            lineColor: "#CCFF33",//"#ccc",
                            targetArrowColor: "#CCFF33", //"#ccc",
                            width: {
                                continuousMapper: {
                                    attr: {
                                        name: "weight",
                                        min: 20,
                                        max: 35
                                    },
                                    mapped: {
                                        min: 1,
                                        max: 3
                                    }
                                }
                            },
                            targetArrowShape: "triangle",
                            // labelText: {
                            //     passthroughMapper: "weight"
                            // }
                        },
                        "node:selected": {
                            fillColor: "#333"
                        },
                        "edge:selected":{
                            lineColor: "#666",
                            targetArrowColor: "#666"
                        }
                    }
                },                    
                ready: function(cy) { },
            });
            window.cy = $("#cy").cytoscape("get");

            $.getJSON('edges_nodes.json', function(elements) {
                //console.log(elements);
                window.elements = elements;
                cy.load( elements );
            });
        }
    </script>
</head>

<body onload="onLoad()">
        <div class="full-height" id="cy">
        </div>
</body>
</html> 
```

JSON 文件内容如下：

```
{"nodes": [{"classes": "b", "data": {"id": "n0", "weight": 40}}, {"classes": "b", "data": {"id": "n1", "weight": 19}}, {"classes": "c", "data": {"id": "n2", "weight": 0}}, {"classes": "d", "data": {"id": "n3", "weight": 19}}, {"classes": "e", "data": {"id": "n4", "weight": 4}}, {"classes": "a", "data": {"id": "n5", "weight": 21}}, {"classes": "e", "data": {"id": "n6", "weight": 13}}, {"classes": "a", "data": {"id": "n7", "weight": 6}}, {"classes": "a", "data": {"id": "n8", "weight": 10}}, {"classes": "b", "data": {"id": "n9", "weight": 6}}, {"classes": "c", "data": {"id": "n10", "weight": 24}}, {"classes": "c", "data": {"id": "n11", "weight": 14}}, {"classes": "e", "data": {"id": "n12", "weight": 11}}, {"classes": "b", "data": {"id": "n13", "weight": 6}}, {"classes": "e", "data": {"id": "n14", "weight": 24}}, {"classes": "b", "data": {"id": "n15", "weight": 26}}, {"classes": "b", "data": {"id": "n16", "weight": 6}}, {"classes": "c", "data": {"id": "n17", "weight": 36}}, {"classes": "a", "data": {"id": "n18", "weight": 7}}, {"classes": "b", "data": {"id": "n19", "weight": 37}}, {"classes": "c", "data": {"id": "n20", "weight": 28}}, {"classes": "d", "data": {"id": "n21", "weight": 11}}, {"classes": "d", "data": {"id": "n22", "weight": 20}}, {"classes": "e", "data": {"id": "n23", "weight": 7}}, {"classes": "b", "data": {"id": "n24", "weight": 31}}, {"classes": "b", "data": {"id": "n25", "weight": 1}}, {"classes": "e", "data": {"id": "n26", "weight": 29}}, {"classes": "d", "data": {"id": "n27", "weight": 31}}, {"classes": "d", "data": {"id": "n28", "weight": 34}}, {"classes": "b", "data": {"id": "n29", "weight": 40}}, {"classes": "d", "data": {"id": "n30", "weight": 38}}, {"classes": "b", "data": {"id": "n31", "weight": 17}}, {"classes": "a", "data": {"id": "n32", "weight": 39}}, {"classes": "d", "data": {"id": "n33", "weight": 4}}, {"classes": "c", "data": {"id": "n34", "weight": 38}}, {"classes": "d", "data": {"id": "n35", "weight": 13}}, {"classes": "b", "data": {"id": "n36", "weight": 15}}, {"classes": "a", "data": {"id": "n37", "weight": 29}}, {"classes": "a", "data": {"id": "n38", "weight": 2}}, {"classes": "d", "data": {"id": "n39", "weight": 35}}, {"classes": "c", "data": {"id": "n40", "weight": 24}}, {"classes": "c", "data": {"id": "n41", "weight": 7}}, {"classes": "e", "data": {"id": "n42", "weight": 24}}, {"classes": "c", "data": {"id": "n43", "weight": 4}}, {"classes": "d", "data": {"id": "n44", "weight": 40}}, {"classes": "a", "data": {"id": "n45", "weight": 19}}, {"classes": "b", "data": {"id": "n46", "weight": 17}}, {"classes": "b", "data": {"id": "n47", "weight": 36}}, {"classes": "b", "data": {"id": "n48", "weight": 26}}, {"classes": "a", "data": {"id": "n49", "weight": 18}}], "edges": [{"data": {"source": "n5", "id": "e0", "weight": 31, "target": "n19"}}, {"data": {"source": "n37", "id": "e1", "weight": 31, "target": "n25"}}, {"data": {"source": "n19", "id": "e2", "weight": 31, "target": "n2"}}, {"data": {"source": "n16", "id": "e3", "weight": 23, "target": "n27"}}, {"data": {"source": "n29", "id": "e4", "weight": 17, "target": "n4"}}, {"data": {"source": "n1", "id": "e5", "weight": 33, "target": "n12"}}, {"data": {"source": "n13", "id": "e6", "weight": 38, "target": "n33"}}, {"data": {"source": "n12", "id": "e7", "weight": 34, "target": "n4"}}, {"data": {"source": "n32", "id": "e8", "weight": 34, "target": "n13"}}, {"data": {"source": "n44", "id": "e9", "weight": 32, "target": "n19"}}, {"data": {"source": "n31", "id": "e10", "weight": 24, "target": "n19"}}, {"data": {"source": "n35", "id": "e11", "weight": 18, "target": "n48"}}, {"data": {"source": "n25", "id": "e12", "weight": 19, "target": "n15"}}, {"data": {"source": "n31", "id": "e13", "weight": 18, "target": "n16"}}, {"data": {"source": "n24", "id": "e14", "weight": 39, "target": "n27"}}, {"data": {"source": "n47", "id": "e15", "weight": 22, "target": "n3"}}, {"data": {"source": "n1", "id": "e16", "weight": 34, "target": "n35"}}, {"data": {"source": "n22", "id": "e17", "weight": 15, "target": "n5"}}, {"data": {"source": "n37", "id": "e18", "weight": 40, "target": "n10"}}, {"data": {"source": "n37", "id": "e19", "weight": 21, "target": "n29"}}]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:35:05.350

(1) 是的，如果您在 init 选项中指定布局，它将用于最初放置节点，您不必指定节点位置。我认为，`ungrabifyWhileSimulating`乔木布局选项将满足您对乔木期间交互性的要求。

(2) 使用 SVG 渲染器，与旧版本大致相同——不是那么多。我现在正在进行大量重构以使核心更快并处理更多元素，我们正在开发的新画布渲染器有望让我们处理 100,000 个元素（甚至可能是 1,000,000 个元素）。

(3) 使用类似[qtip](http://craigsworks.com/projects/qtip2/)的东西，并通过 cytoscape.js API（即`eles.data()`）正常读取属性值。

(4) 不幸的是，API 很难在 wiki 上维护，而且您阅读的内容已经过时，因为预发布版本不断发展。我正在构建一个更好的解决方案，它很快就会出现。

(5) 图表为空时，可能是乔木布局中的错误。毕竟，您是从一个空图表开始的。也许，现在通过在回调中初始化 cytoscape.js 来解决它`$.getJSON()`？

# html - 我应该在同一个域 iframe 中使用 head body 和 title 标签吗？

> ID：11109170
> 
> 赞同：4
> 
> 时间：2012-06-19T20:47:59.183
> 
> 标签：html, iframe, cross-browser, same-origin-policy

我正在将内容加载到同一个域 iframe 中。我正在从中加载内容的 html 文件是否需要 head body html 标签，或者我可以将我的内容放在一个 div 中而不用担心它本身就是一个完整的页面？它永远不会被单独访问，并且似乎没有这些标签也可以工作，但是要与所有浏览器一起工作，这些标签是必要的吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:48:53.350

像对待任何其他完整的网页一样对待它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:49:04.197

虽然没有它们也可以工作，但包含它们在语义和句法上都更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:54:31.233

无论如何，head、body 和 html 标签在 HTML 中都是可选的，所以你没有做错任何事情。

不过，您可能应该包含一个标题元素。它是有效性所必需的，如果没有别的，它可能有助于 SEO。

# android - 在 Android 中使用 LocationManager 优先于提供者

> ID：11109171
> 
> 赞同：3
> 
> 时间：2012-06-19T20:48:00.200
> 
> 标签：android, gps, location, locationmanager

我以前使用过*LocationManager*，结果很好。此外，code.google.com 上有很多项目，其中包含一些不错的代码片段。

**请求：**

*   在城里跟踪一辆车

**我有什么**

*   用于初始化提供程序的*minDistance*
*   最大精度
*   首先使用网络位置提供程序

**我是怎么想的**

嗯，主要的要求，因为汽车总是在一个城市区域，是使用网络位置。既是因为电池的使用，也是因为城市中相当高的准确度。

但是，如果从网络提供商检索到的位置精度超过限制，则需要启动 GPS 以读取位置。这是有趣的部分开始的地方，还有一些不清楚的地方。

我看到有两种可能的方式：

1.  每次网络定位精度超过限制时，启用 GPS 更新和第一次定位，删除更新并再次与网络提供商继续。

2.  启用 GPS 更新并保持 GPS 开启一段时间（如 10 分钟）以与网络并行工作并在两者之间进行选择，哪个位置更准确。这可能很难实现，因为读数是独立的。

我想知道在检索到位置后禁用 GPS 的情况下，在电池和锁定时间方面如何再次启用它。基本上，拥有一次锁会有助于更快地获得新的锁吗？一遍又一遍地启用/禁用会比一直打开 GPS 消耗更多的电池？

难道没有选择*“现在给我最好的位置，独立于provicers”*吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:30:51.053

这是关于你想要做什么的最好[的帖子，它使用启用的提供者然后从他们那里获得最好的提供者。](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

# visual-c++ - 从发布的文件中删除 PDB 引用

> ID：11109189
> 
> 赞同：21
> 
> 时间：2012-06-19T20:48:56.910
> 
> 标签：visual-c++, reference, release, portable-executable

在使用任何 IDE 调试和创建文件后，我总是查看最终的二进制可执行文件或 DLL。现在我正在尝试 Visual C++ 2010，寻找最好的版本，没有垃圾或不必要的引用。因此，我创建了一个包含两个项目的新解决方案：一个可执行文件及其 DLL。VC++ 在代码和最终文件之间创建了很多中间文件。我用十六进制编辑器打开了 .exe 和 .dll，看到了一些我不喜欢的东西。**文件内部的某处有一个 .PDB 文件的绝对路径。**

为什么？如何从 VC++ 中删除它？

为此必须有一些预处理器命令。.PDB 文件的绝对路径有什么用，例如将在具有不同文件夹的计算机上分发的文件的二进制文件中的*“D:\My Projects\Project1\Release\Project1.pdb” ？*除此之外，我不喜欢看到我的驱动器路径之一保存在我想与其他人共享的二进制文件中。我处于发布模式，我看不到那些不必要的信息的使用。我怎么能删除它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-24T09:00:15.753

您可以使用`/pdbpath:none`（或`/pdbaltpath:%_PDB%` [在 的较新版本上`link.exe`](https://docs.microsoft.com/en-us/cpp/build/reference/pdbaltpath-use-alternate-pdb-path)）删除 PDB 文件的完整限定路径名，但仅保留 PDB 的名称和扩展名。为已发布的图像保留 PDB 的名称（和扩展名）是调试有缺陷的图像的唯一方法。Windows 映像几乎总是保留 PDB 的名称和扩展名！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-19T21:00:51.960

阅读MSDN 上的[PDB 文件文档：](http://msdn.microsoft.com/en-us/library/yd4f8bd1%28v=vs.71%29.aspx)

> 程序数据库 (PDB) 文件包含调试和项目状态信息，允许增量链接程序的调试配置。当您使用 /ZI 或 /Zi 编译 C/C++ 程序或使用 /debug 编译 Visual Basic/C#/JScript .NET 程序时，将创建 PDB 文件。
> 
> 在 Visual C++ 中，/Fd 选项命名编译器创建的 PDB 文件。当您使用向导在 Visual Studio 中创建项目时，/Fd 选项设置为创建名为 project.PDB 的 PDB。

请注意，文档中提到了绝对路径：

> Visual Studio 调试器直接使用链接器创建的 project.PDB 文件，并将 PDB 的绝对路径嵌入到 EXE 或 DLL 文件中。

您始终可以转到 Project Properties > Linker > Debugging > Generate Debug Info 并将其设置为 No。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-17T15:36:42.567

如果您无法重建您的模块（即使用链接器开关 /PDBPATH:NONE，微软似乎已经删除了对它的支持），我为此目的编写了[**peupdate**](http://bytepointer.com/tools/index.htm#peupdate)工具，只要您不介意使用第 3 方工具. Peupdate 可用于列出、删除或更改可执行模块中的 PDB 字符串。下面是一些例子：

```
peupdate -c <module_path>           //clear entire PDB path
peupdate -k <module_path>           //remove PDB path, but retain filename
peupdate -u <newpath> <module_path> //set your own path string 
```

# build - Jenkins Partial Build / Modular Build on Commit Hook

> ID：11109192
> 
> 赞同：6
> 
> 时间：2012-06-19T20:49:13.510
> 
> 标签：build, continuous-integration, hudson, jenkins, svn-hooks

*工具*：
詹金斯版。1.470
Maven 2
颠覆

**环境**

假设我的构建有许多项目 AD。如图所示，依赖关系图存在。也就是说：B 依赖于 A 中的类，C 依赖于 B 中的类，D 依赖于 A 中的类。我们创建 jenkins 构建，以便他们将依赖于它们的构建称为构建后操作。

A
|--> B --> C
|--> D

每天晚上，我们在 Jenkins 中触发一个完整的构建（A 构建，触发器 B（触发器 C），触发器 D）。这很容易通过告诉 A 每晚构建，其余的级联来完成。

**问题**

但是，在提交时，我们希望构建曾经提交过的项目。

*   *情况1*：我们轮询存储库（或使用[commit hooks](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin#SubversionPlugin-Postcommithook)，没有区别），发现有一个提交给B，然后B将构建，C将构建。 **成功！**

*   *情况 2*：我们轮询存储库并发现 B 和 C 在一次提交中被提交，然后 Jenkins 将尝试构建 B（触发 C 的构建），并构建 C（第二次构建）。**失败。**走着瞧吧？C 构建了两次，占用了宝贵的构建时间。 *保持快速构建！*

**有谁知道在每个提交的构建管道中只触发最高项目的方法？**

我想一个解决方案是一个复杂的 SVN 钩子，它确定每个管道中的最高项目......

*   *情况 3*：一次提交到 BC 和 D。SVN 钩子发现 C 依赖于 B。钩子调用特定于项目的链接来开始构建 B 和 D。

陷阱：非常复杂的 SVN 提交挂钩。必须维护 SVN 挂钩中的管道。

我觉得这是其他人遇到的问题。有没有 Jenkins 插件可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:12:52.117

说 jenkins 等待构建直到 c 依赖的构建完成是一个想法。这是作业配置中的一个标志，用于执行此操作。但是您必须为每项工作执行此操作。顺便说一句......还有另一个标志要求詹金斯等待构建，直到依赖作业完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:32:39.873

我也在寻找解决这个问题的有效方法。我已经看到了一些建议，但到目前为止，我们只能通过使用 Locks&Latches 插件对构建进行序列化来避免其中一个陷阱。它不会阻止一个项目从一次签入中多次构建，但它会确保项目在上游项目完成后按顺序重建。

在一般情况下，这实际上是一个复杂的问题，但我一直在考虑编写一个插件来解决这个问题。一个简单的解决方案是检查上游项目是否正在构建，如果是，则将自己从构建队列中删除。由于上游作业将在完成后启动您的构建，因此这是一种选择。

更好的选择是根据您的依赖图自动管理构建队列的插件。这可能很复杂，因为您需要确保在完成所有依赖项之前不会开始构建。从本质上讲，这意味着每次签入都会导致插件自动将所有下游构建添加到队列中，以便对其进行管理。可能有一种更聪明、更简单的方法可以通过现有的上游/下游触发器实现这一点，但我还不清楚如何实现它。已经有构建管道插件声称可以处理这种情况，但它们显然没有采取任何措施来防止下游构建可以通过与上游构建相同的签入来触发的竞争条件。

# reporting-services - 在 SQL 报告服务器上获取 xml CRM 报告

> ID：11109195
> 
> 赞同：3
> 
> 时间：2012-06-19T20:49:17.780
> 
> 标签：reporting-services, dynamics-crm, fetchxml

这是否可以上传 fetch XML rdl 报告以与 SQL 报告服务器一起使用？报告将在 BID 中显示正常，但是当我将其上传到 SQL 报告服务器时。
我收到以下错误

> **客户端渲染期间发生错误。报告处理过程中发生错误。已尝试使用未为此报表服务器注册或在此版本的 Reporting Services 中不受支持的数据扩展名“MSCRMFETCH”。**

当我转到报告的数据源部分时，出现此错误

> **用于此报告的数据处理扩展插件不可用。它要么已被卸载，要么配置不正确。**

SQL Reporting server 2008 是否可以显示 FetchXML 报告？是否有可以安装的插件或更新，我可以选择 CRM 作为我的数据源？

这是我从 Sql Server 获取的错误代码客户端渲染期间发生错误。报告处理过程中发生错误。已尝试使用未为此报表服务器注册或在此版本的 Reporting Services 中不受支持的数据扩展“MSCRMFETCH”

当我转到报告的属性-> 数据源时，我在数据源旁边出现此错误用于此报告的数据处理扩展不可用。它要么已被卸载，要么配置不正确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T04:58:48.697

您不能在 SQL Reporting Services 中运行 FetchXML 报告，除非通过 CRM 应用程序 - 即，您不能直接从 SQL Reporting Services 启动报告。

您必须通过 Dynamics CRM 部署报告并从 Dynamics CRM 运行报告。

# iphone - 我应该使用 glkit 还是 cocos3d？

> ID：11109202
> 
> 赞同：2
> 
> 时间：2012-06-19T20:49:39.220
> 
> 标签：iphone, xcode, ipad, glkit, cocos3d

我已准备好使用 3D 编写我的第二个应用程序。第一个应用程序于 2011 年 4 月完成。我想再写一个，并且一直在研究最佳路线。上次我使用了 opengl-es，这很困难，但我通过了它，并且该应用程序在 3D 方面非常复杂。

这一次，我正在查看 glkit，发现这会将设备限制为使用 IOS 5 的设备。不确定使用 glkit 有哪些其他优点/缺点。Cocos3d 也可以，但我真的找不到任何人比较这两种功能。

我将使用 modo 创建我的 3D 网格，但我也可以使用 Max 或 Maya。从 3D 应用程序中，我将导出一个 collada 文件，然后将其转换为 POD。该应用程序将允许用户旋转模型，并选择（点击）模型的不同部分以更改该 3D 部分的颜色。

谁能比较和对比这两种技术，或者让我知道我是否走在正确的轨道上？

# javascript - 适用于 Chrome 和 Safari 的正则表达式负前瞻

> ID：11109203
> 
> 赞同：2
> 
> 时间：2012-06-19T20:49:44.290
> 
> 标签：javascript, regex, regex-lookarounds

我需要匹配 Safari 浏览器，而不是使用一个正则表达式的 Chrome 浏览器。我通常对正则表达式没有问题，但消极的前瞻让我很困惑。

```
/(?!chrome)(safari)/i.test("Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5"); 
```

无法弄清楚为什么会返回`true`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:53:18.113

这会做到的

```
^(?!.*chrome).*(safari) 
```

BTW JavaScript 不支持lookbehind，但我认为lookahead 没有问题。

你在说什么

```
(?!chrome)(safari) 
```

是不是在“safari”之前（零宽度，所以从 s 之前的光标开始）不能有没有意义的字符串“chrome”。

# php - php页面没有重定向

> ID：11109204
> 
> 赞同：0
> 
> 时间：2012-06-19T20:49:48.080
> 
> 标签：php

在下面的代码中，我能够更新数据库，但它没有重定向到标题位置中给出的页面，它刷新并显示相同的页面本身，我从其他在更新数据库和重定向方面效果很好的代码复制了

```
 <?php

if (isset($_POST['submit']))
 { 
 // get form data, making sure it is valid
 $firstname = mysql_real_escape_string(htmlspecialchars($_POST['firstname']));

 $link = mysql_connect('www.xxxxxxx.co.uk', 'xxxxxx', 'axxxxxd');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("web39-sdasdasd", $link);
mysql_query("INSERT learning_outcome SET topic='$firstname'")
 or die(mysql_error()); 

 header('Location: http://www.xxxxxx.co.uk/NottTest/viewlearnpc.php?succmsg=UPDATE SUCCESSFULL'); 
 }

 else

 echo "";

 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:53:00.003

从以下位置删除空格/缩进：

```
 <?php 
```

您应该确保在`header`命令之前不回显或输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T04:54:21.970

删除 php 脚本中的所有空行和缩进空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:56:07.970

查询`INSERT INTO learning_outcome(col1, col2) VALUES ("value1", "value2")`不是 INSERT learning_outcome

```
$result = mysql_query("INSERT INTO learning_outcome SET topic='$firstname'") 
```

首先，检查查询是否成功执行然后重定向；

```
if($result)
{
   header('Location: http://www.xxxxxx.co.uk/NottTest/viewlearnpc.php?succmsg=UPDATE SUCCESSFULL');
}
else
{
   die("query isn't executed, error");
} 
```

您`set col1 = value`只能用于更新。

# wordpress - Wordpress 在 foreach 语句中排序帖子

> ID：11109206
> 
> 赞同：0
> 
> 时间：2012-06-19T20:49:52.443
> 
> 标签：wordpress, post, foreach

我有一个 for each 语句，它按 ID 查找分类法并获取所有术语子项并使用 foreach 循环列出它们。我试图弄清楚如何按标题的字母顺序排列它们。这是我的代码：

```
$termID = 5;
$taxonomyName = "apartmentlocation";                        
$termchildren = get_term_children( $termID, $taxonomyName );

foreach ($termchildren as $child) {
    $term = get_term_by( 'id', $child, $taxonomyName);
    echo '<li><a href="' . get_term_link( $term->name, $taxonomyName ) . '">' . $term->name . '</a></li>';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:51:47.413

试试`get_terms()`吧，因为它接受更广泛的参数集。

```
//put your term and taxonomy variables here
$termID = 5;
$taxonomyName = "apartmentlocation"; 

$args = array(
    'child_of' => $termID,
    'orderby' => 'name', //this is the default, it actually isn't needed
    'order' => 'ASC' //this is the default as well
);
$termchildren = get_terms($taxonomyName, $args);

//do the rest of your loop
foreach ($termchildren as $child) {
    $term = get_term_by( 'id', $child, $taxonomyName);
    echo '<li><a href="' . get_term_link( $term->name, $taxonomyName ) . '">' . $term->name . '</a></li>';
} 
```

# google-apps-script - Google Apps 脚本 - 修改日历 UI 和行为

> ID：11109208
> 
> 赞同：0
> 
> 时间：2012-06-19T20:49:54.817
> 
> 标签：google-apps-script

我们有一个客户拥有 Google Apps 商业版帐户，并希望修改*其*Google 日历页面的默认 UI 和行为。

我们已经对 Google Calendar API v3 及其与 Google Calendar 服务交互的功能进行了研究。

所以我们想知道的是：

1) 我们知道我们不能修改日历的 UI 或使用它的行为，但我们想知道 Google Apps 脚本是否提供了与日历交互的钩子方法。例如，当您从 UI 创建事件时。

2) 可以将小部件添加到电子表格，如`SpreadsheetApp.getActiveSpreadsheet().show(app)`是否可以以相同的方式将小部件添加到日历 UI？

3) Google Apps Business Edition 帐户是否像 Calendar API v3 一样具有 Google Apps Scripts 的任何额外功能？

如您所见，我们是该产品的新手；所以让我提前为新手问题道歉。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T04:58:29.067

1) 是的。查看[https://developers.google.com/apps-script/service_calendar](https://developers.google.com/apps-script/service_calendar)了解详情

2) 没有。无法将小部件添加到您的日历界面。

3) 消费者和企业应用程序帐户之间的唯一区别是配额限制和一些处理用户识别的小功能。

# objective-c - 在 iOS 中从 CoreData 获取数据的快速方法是什么？

> ID：11109211
> 
> 赞同：0
> 
> 时间：2012-06-19T20:50:02.617
> 
> 标签：objective-c, ios, xcode, core-data

好的，情况就是这样。我正在制作一个程序，您可以在其中保存和加载包含文本和图像（一些非常大的图像）的文档。对于后端，我使用 CoreData和我自己的子类 `UIManagedDocument`（我们称之为`NotificationDocument`.`NSManagedDocument`

现在每个`NotificationDocument`都有两个属性，代表它保存在哪个保存槽以及它保存的名称是什么。我有一个 TableView，它显示了我的文档列表以及它们所在的保存槽（例如：“保存槽 1：清洁模板”）。

但是，我需要永远填充这个 tableview。我正在做的是 viewDidLoad 是：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"NotificationDocument"];
NSArray *notifications = [self.database.managedObjectContext executeFetchRequest:fetchRequest error:nil]; 
```

怀疑我的程序运行如此缓慢似乎是合乎逻辑的，因为我正在完整检索所有通知文档并将它们移动到内存中。有没有更好（更快）的方法来做到这一点，因为我真的不需要所有的通知文档，我只需要它们的保存槽和保存名称属性。实现这一目标的最佳方法是什么？

我考虑过在 CoreData 中存储一个映射实体映射保存槽到保存在其中的名称。但是，如果有一种很好的方法可以在不保存完全独立的实体的情况下做到这一点，那将是可取的。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:54:47.563

您应该使用 an`NSFetchedResultsController`来动态填充您的`UITableView`。这样，它将在请求新单元格时动态调用核心数据，而不是您当前的方法，它一次加载所有数据，即使在加载视图时不需要大部分数据。

这里大致是你应该设置数据的代码（fetchedResultsController 应该是它所在的视图控制器的属性）

```
 NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"NotificationDocument"];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"attribute" ascending:NO];
    fetchRequest.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    fetchedResultsController = [[NSFetchedResultsController alloc]
                                initWithFetchRequest:fetchRequest
                                managedObjectContext:self.database.managedObjectContext
                                sectionNameKeyPath:nil
                                cacheName:@"ListCache"];
    fetchedResultsController.delegate = self;
    NSError *error = nil;
    [fetchedResultsController performFetch:&error]; 
```

这是获取正确文档的行`cellForRowAtIndexPath`（显然可能不是正确的对象类）

```
NotificationDocument *currentDocument = [fetchedResultsController objectAtIndexPath:indexPath]; 
```

这样做，你会发现速度有很大的提高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:00:08.667

正如 Dima 所说，可能使用 NSFetchedResultsController 是要走的路。

我以前用过，如果你想看看，看看这个：

[https://github.com/rafaeladson/intern-objc/blob/master/InternIOS/BaseTableViewController.m](https://github.com/rafaeladson/intern-objc/blob/master/InternIOS/BaseTableViewController.m)

[https://github.com/rafaeladson/intern-objc/blob/master/UnitTests/SampleTableViewController.m](https://github.com/rafaeladson/intern-objc/blob/master/UnitTests/SampleTableViewController.m)

[https://github.com/rafaeladson/intern-objc/blob/master/UnitTests/BaseTableViewControllerTest.m](https://github.com/rafaeladson/intern-objc/blob/master/UnitTests/BaseTableViewControllerTest.m)

如果这不起作用，请尝试使用 Xcode 中的 Instruments 应用程序来分析您的问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T07:37:03.197

为了从核心数据中检索一组项目，您还可以使用

> ```
> [nsfetchReqObj setFetchBatchSize:size]; 
> ```

它还将提高获取速度。

# perl - 如何从 configs/ 加载函数 /wiki_config.pm 文件到当前 Perl 脚本中？

> ID：11109214
> 
> 赞同：0
> 
> 时间：2012-06-19T20:50:14.490
> 
> 标签：perl, plugins, configuration, require

让我更具体一点。

我正在维护一堆 wiki 网站。每个 wiki 网站都有一个`configs/wiki_website/wiki_config.pm`. 此配置文件包含使每个网站按其工作方式工作的函数和变量。

这是“ `devs`”的示例 wiki 配置。它位于`configs/devs/wiki_config.pm`.

```
package devs;

use warnings;
use strict;

sub log_file {
    return "/var/log/devs/log-%Y-%M-%d.log"
}

sub contact_emails {
    return ("email@gmail.com", "anotheremail@gmail.com")
}

sub public_access {
    1;
}

1; 
```

现在我要做的是在我的 Perl 脚本中加载这个配置：

```
use warnings;
use strict;

my $site = shift() || die "No site specified!"

my $config = require "configs/$site/wiki_config.pm"

foreach ($config->contact_emails()) {
   /* email contact_email */
} 
```

这不太行。我不知道如何加载`configs/$site/wiki_config.pm`我的 Perl 脚本，因此我可以访问每个站点的配置详细信息。这个问题看起来几乎就像你必须有插件的问题。但是鉴于我的目录结构，我也无法弄清楚。

有谁知道我如何加载配置文件，以便我可以访问其中的函数和变量？

PS。这个问题与网络编程无关，而是关于 Perl 的一般问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:30:40.197

首先这一行是错误的，因为符号@ interpolate as array in double quotes。

```
return ("email@gmail.com", "anotheremail@gmail.com"); 
```

您应该将其更新为：

```
return ("email\@gmail.com", "anotheremail\@gmail.com"); 
```

当您像这样存储配置时，它等于 1\. my $config = require "configs/$site/wiki_config.pm" li

***配置***

```
package config;
use strict;

require Exporter;
use base qw(Exporter);
use vars qw(@EXPORT @ISA);

@EXPORT = qw(log_file contact_emails public_access);

sub log_file {
    return "/var/log/devs/log-%Y-%M-%d.log"
}

sub contact_emails {
    return ("email\@gmail.com", "anotheremail\@gmail.com")
}

sub public_access {
    1;
}

1; 
```

**主要的**

```
use strict;
use config;

print contact_emails(); 
```

# android - Android 4.0 的 IP 转发不起作用

> ID：11109215
> 
> 赞同：1
> 
> 时间：2012-06-19T20:50:15.880
> 
> 标签：android, ip, forward

我用智能手机（HTC One X）和两台电脑在无线中测试一个人在中间攻击（mitm）。使用智能手机，arp 缓存中毒已正确损坏了我的 2 台计算机。

对于转发，我刚刚在 /proc/sys/net/ipv4/ip_forward 中输入了“1”。但是 ip forward 不起作用。

鲨鱼在我的智能手机中嗅了嗅，我用电脑发送了数据包，它们很好地到达了我的智能手机，但没有重定向到我的另一台电脑。

android 4.0 的ip 转发还有其他解决方案吗？

# configuration - Hadoop 配置 - 映射器/组合器是否受 io.sort.factor 和 io.sort.mb 影响？

> ID：11109217
> 
> 赞同：0
> 
> 时间：2012-06-19T20:50:25.677
> 
> 标签：configuration, hadoop, combiners

如果我修改 io.sort.factor 和 io.sort.mb，在 map 端进行的本地排序是使用这些变量，还是仅由 reducer 端的排序使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:03:51.173

是的，它们也用于地图方面（无论您是否有组合器）：

*   [地图任务.java](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/mapred/org/apache/hadoop/mapred/MapTask.java?view=markup)
    *   `io.sort.factor`- 第 1695 行
    *   `io.sort.mb`- 第 932 - 944 行

# haskell - 简化 Maybe 表达式

> ID：11109226
> 
> 赞同：9
> 
> 时间：2012-06-19T20:50:53.530
> 
> 标签：haskell

我有以下代码，我认为它很难看：

```
loginCheck = do
  ml <- getPostParam "login" -- ml and mp :: Maybe ByteString
  mp <- getPostParam "password"
  if isJust ml && isJust mp
    then authAs (fromJust ml) (fromJust mp)
    else render "Msg" [("text", "Form incomplete")] 
```

这段代码似乎非常必要。我可以以某种方式简化它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T20:53:38.340

怎么样：

```
loginCheck = do
  ml <- getPostParam "login" -- ml and mp :: Maybe ByteString
  mp <- getPostParam "password"
  case (ml,mp) of
    (Just l, Just p) -> authAs l p
    _ -> render "Msg" [("text", "Form incomplete")] 
```

使用 isJust 和/或 fromJust 的代码几乎总是不好的风格，如果你在 fromJust 错误之前得到 isJust 检查，则有点危险。

这可以通过以下方式改进

*   模式匹配，如上。但如果这是嵌套的，它会变得很难看。
*   组合器，例如 fromMaybe 可以更简洁。
*   使用 Maybe（和 MaybeT）作为 Applicative 或 Monad 可以避免丑陋的嵌套。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-20T00:15:38.593

正如其他人所建议的那样，`Applicative`这里可能会很好，并且`MaybeT`取决于上下文。您可能要记住的第三件事是`do`块绑定调用中的模式匹配失败`fail`。

这就是我要做的：

```
loginCheck = do
  ml <- getPostParam "login" 
  mp <- getPostParam "password"
  fromMaybe (render "Msg" [("text", "Form incomplete")]) $
            authAs <$> ml <*> mp 
```

或者带有 的解决方案`MaybeT`，尽管返回值不同（更多的上下文可能再次表明这是一个好方法或不是）：

```
getPostParamT = MaybeT . getPostParam
loginCheckT = do
    ml <- getPostParamT "login" -- ml and mp :: Maybe ByteString
    mp <- getPostParamT "password"
    liftIO $ authAs ml mp
   <|> (liftIO $ render "Msg" [("text", "Form incomplete")] ) 
```

...实际上，现在我看上面的内容是相当的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T20:54:12.510

```
loginCheck = case (,) <$> getPostParam "login" <*> getPostParam "password" of
  Just (l, p)  -> authAs l p
  Nothing      -> render "Msg" [("text", "Form incomplete")] 
```

也许？不，哎呀。

```
loginCheck = do
  x <- (,) <$> getPostParam "login" <*> getPostParam "password" of
  case x of
    Just (l, p)  -> authAs l p
    Nothing      -> render "Msg" [("text", "Form incomplete")] 
```

多么烦人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T22:54:23.277

不确定这是否是一种改进，但也许在某些情况下......

```
import Control.Monad
import Control.Monad.Trans.Class
import Control.Monad.Trans.Maybe

getPostParam' = MaybeT . getPostParam
render' x y = lift (render x y)
authAs' x y = lift (authAs x y)

loginCheck = runMaybeT $ 
        go `mplus` render' "Msg" [("text", "Form incomplete")]
    where
        go = do
            ml <- getPostParam' "login"
            mp <- getPostParam' "password"
            authAs' ml mp 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T22:55:58.957

```
loginCheck = do
  [ml,mp] <- mapM getPostParam ["login","password"]
  case liftM2 authAs ml mp of 
    Nothing         -> render "Msg" [("text", "Form incomplete")]
    Just authorize  -> authorize 
```

这可能看起来很奇怪，因为它在 a 上进行模式匹配`Maybe (IO ())`，但这是完全合理的。或者，使用`maybe`：

```
loginCheque = mapM getPostParam ["login","password"] >>= \[ml,mp] -> 
              maybe message id (liftM2 authAs ml mp)
    where message = render "Msg" [("text", "Form incomplete")] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T00:31:37.490

```
loginCheck = do 
  res <- return$ getPostParam "login" >>= \l -> -- ml and mp :: Maybe ByteString
                  getPostParam "password" >>= \p->
                   Just (l,p)
  case res of Nothing -> render "Msg" [("text", "Form incomplete")]
              (Just (l,p)) -> authAs l p 
```

# android - 在 Android 中，在 OnClick 中显示按下按钮动画？

> ID：11109227
> 
> 赞同：2
> 
> 时间：2012-06-19T20:50:58.673
> 
> 标签：android, xml, onclicklistener

我还没有找到关于如何在调用 onClick 时在按钮中制作动画的直接答案。我有一个 custom_btn.xml 像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
<selector
xmlns:android="http://schemas.android.com/apk/res/android">  
        <item android:state_pressed="true" android:drawable="@drawable/btn_pressed"></item>
        <item android:state_focused="true" android:drawable="@drawable/btn_on"></item>
        <item android:drawable="@drawable/btn"></item>
</selector> 
```

并且动画在 btn_pressed.xml 中，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" >
        <item android:drawable="@drawable/btn_on_1" android:duration="30" />
        <item android:drawable="@drawable/btn_on_2" android:duration="30" />
        <item android:drawable="@drawable/btn_on_3" android:duration="30" />
        <item android:drawable="@drawable/btn_on_4" android:duration="30" />
        <item android:drawable="@drawable/btn_on_5" android:duration="30" />

</animation-list> 
```

我的问题是我似乎无法在此处的 onClickListener 中找到正确的代码：

```
 button.setOnClickListener(new View.OnClickListener() { 
        @Override 
        public void onClick(View v) { 

            //-- what is the proper animation call that would go here
         to make btn_pressed.xml cycle only once when pressed?

        } 
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:34:38.530

来自 Android 文档：http: [//developer.android.com/guide/topics/resources/animation-resource.html](http://developer.android.com/guide/topics/resources/animation-resource.html)

示例：保存在 res/anim/rocket.xml 的 XML 文件：

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false">
    <item android:drawable="@drawable/rocket_thrust1" android:duration="200" />
    <item android:drawable="@drawable/rocket_thrust2" android:duration="200" />
    <item android:drawable="@drawable/rocket_thrust3" android:duration="200" />
</animation-list> 
```

此应用程序代码会将动画设置为 View 的背景，然后播放动画：

```
ImageView rocketImage = (ImageView) findViewById(R.id.rocket_image);
rocketImage.setBackgroundResource(R.drawable.rocket_thrust);

rocketAnimation = (AnimationDrawable) rocketImage.getBackground();
rocketAnimation.start(); 
```

# html - IFRAME 的问题？

> ID：11109229
> 
> 赞同：-9
> 
> 时间：2012-06-19T20:51:08.480
> 
> 标签：html, css

我在 chrome 中也面临 iframe 的问题。 **如何使 IFRAME 透明。？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:52:22.883

你的意思是你想摆脱框架？简单的解决方案是使用“风格”：

```
<iframe src="..." style="border: 0px"></iframe> 
```

如果您的文档类型是 HTML5，您还可以将 iframe 内容无缝嵌入到 DOM 中（="transparent" iframe 导入）：

```
<iframe src="..." seamless="seamless" style="border: 0px;"></iframe> 
```

不过，我不希望所有浏览器都支持它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T20:56:13.353

我猜你的意思是，我怎样才能使页面的背景透明。这样，它只会共享您页面的背景。如果是这样，试试这个

```
<IFRAME ALLOWTRANSPARENCY="true"> 
```

只要您加载的页面没有背景，这将使其透明。

# vb.net - 为什么我的 Visual Basic 代码中出现“路径中的非法字符”？

> ID：11109238
> 
> 赞同：1
> 
> 时间：2012-06-19T20:51:54.337
> 
> 标签：vb.net, visual-studio-2010

我有一个包含多个子目录的目录，其中包含 .doc 文件。例子：

```
C:\Users\tmedina\Documents\testenviroment\Released\500\test0.doc
C:\Users\tmedina\Documents\testenviroment\Released\501\test1.doc
C:\Users\tmedina\Documents\testenviroment\Released\502\test2.doc
...
C:\Users\tmedina\Documents\testenviroment\Released\520\test20.doc 
```

在下面的代码中，我试图在列表框中显示所有以扩展名“.doc”结尾的文件，这些文件位于`C:\Users\tmedina\Documents\testenviroment\Released`

例如，我有

```
Dim root As String = "C:\Users\tmedina\Documents\testenviroment"

For Each fileFound As String In Directory.GetFiles(Path.Combine(root, "Released\*\*.doc"))
        ListBox1.Items.Add(fileFound)
    Next 
```

但它不断抛出`Illegal characters in path`错误。关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:55:45.610

文件系统不理解 Directory.GetFiles 中的 double`*`只`released\*\*.doc`
接受一个参数的重载不喜欢部分路径规范 (....*.doc)

试试这个

```
Dim root As String = "C:\Users\tmedina\Documents\testenviroment\released" 

For Each fileFound As String In Directory.GetFiles(root, "*.doc", SearchOption.AllDirectories)) 
    ListBox1.Items.Add(fileFound) 
Next 
```

Visual Basic 语言不需要对`\`字符进行转义。
Directory.GetFiles 有一个重载，它采用您的基本路径、通配符搜索字符串以及搜索基本路径的所有子文件夹的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:11:57.497

您的问题是您滥用该`GetFiles`方法。如果要传递诸如“*.doc”之类的搜索字符串，则必须将其作为第二个参数，例如：

```
Directory.GetFiles(Path.Combine(root, "Released"), "*.doc") 
```

此外，您不能给它一个包含通配符的文件夹路径，例如“C:\Users\tmedina\Documents\testenviroment\Released*”。如果您想要所有子文件夹，则需要为搜索选项指定第三个参数：

```
Directory.GetFiles(Path.Combine(root, "Released"), "*.doc", SearchOption.AllDirectories) 
```

除非出于某种原因，您不希望它搜索所有后代目录而只希望它搜索直接子目录。在这种情况下，您必须使用`Directory.GetDirectories`获取所有直接子目录的列表，然后遍历它们调用`GetFiles`每个子目录。

# sas - 通过 SAS 进行比例抽样

> ID：11109242
> 
> 赞同：1
> 
> 时间：2012-06-19T20:52:12.027
> 
> 标签：sas, sampling

我有 600,000 多个观察数据，我想按其邮政编码进行采样（数据中邮政编码的数量与其人口密度成正比）。数据中的关键变量是**ZIP CODE**、**ID**和**GROUP**。

我需要修复我现有的 SAS 代码，以便当 SAS 选择 ZIP CODE 时，它会选择其**GROUP**中的所有记录。例如，如果选择了**ID=2**，我也需要**ID=1**和**ID=3**。**因此，我在GROUP=1**中拥有所有邮政编码。

```
ID  GROUP   ZIP
1   1   46227
2   1   46227
3   1   46227
4   2   47620
5   3   47433
6   3   47433
7   3   47433
8   4   46135
9   4   46135
10  5   46202
11  5   46202
12  5   46202
13  5   46202
14  6   46793
15  6   46793
16  7   46202
17  7   46202
18  7   46202
19  8   46409
20  8   46409
21  9   46030
22  9   46030
23  9   46030
24  10  46383
25  10  46383
26  10  46383 
```

我有以下 SAS 代码，它将从数据中采样 1000 个 obs，但是它只是随机选择邮政编码而不考虑**GROUP**变量。

```
proc freq data=sample;
    tables zip / out=outfreq noprint;
run;

data newfreq error; set outfreq;
    sampnum=(percent*1000)/100;
    _NSIZE_=round(sampnum, 1);
    sampnum=round(sampnum, .01);
    if _NSIZE_=0 then output error;
    if _NSIZE_=0 then delete;
    output newfreq;
run;

data newfreq2; set newfreq error;
    by zip;
    keep zip _NSIZE_;
run;

proc sort data=newfreq2;
    by zip;
run;

proc sort data=sample;
    by zip;
run;

/* proportional stratified sampling */
proc surveyselect data=sample seed=2020 out=sampout sampsize=newfreq2;
    strata zip;
    id id zip;
run; 
```

我希望我能清楚地解释我的问题。如果没有，我将尝试澄清和/或详细说明不清楚的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:41:22.660

这是一个似乎有效的尝试。

```
data test;
    input id group zip;
    cards;
1 1 46227
2 1 46227
3 1 46227
4 2 47620
5 3 47433
6 3 47433
7 3 47433
8 4 46135
9 4 46135
10 5 46202
11 5 46202
12 5 46202
13 5 46202
14 6 46793
15 6 46793
16 7 46202
17 7 46202
18 7 46202
19 8 46409
20 8 46409
21 9 46030
22 9 46030
23 9 46030
24 10 46383
25 10 46383
26 10 46383
;
run;

data test;
    set test;
    rand = ranuni(1200);
run;

proc sort data=test;
    by rand;
run;

/* 10 here is how many cases you want to sample initially */
data test;
    set test;
    if _n_ <= 10 then sample = 1;
    else sample = 0;
run;

proc sort data=test;
    by  group
        descending sample;
run;

data test;
    set test;
    by  group;
    retain keep;    

    if first.group and sample = 1 then keep = 1;
    if first.group and sample = 0 then keep = 0;

    if not first.group then keep = keep;

    drop    rand
            sample;

run;

proc sort data=test;
    by id;
run; 
```

作为奖励，这是一个 R one-liner，它会给出相同的结果：

```
# 3 here is the number of cases being sampled
test[test$group %in% (test[sample(1:nrow(test),3),]$group),] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:47:22.227

不明白你的意思。您是要对邮政编码进行抽样（并返回每个邮政编码的所有 obs），还是想要按邮政编码分层的样本（意思是每个邮政编码的 N 个 obs）？您可能希望在[此处查看](http://support.sas.com/documentation/cdl/en/statug/63347/HTML/default/viewer.htm#statug_surveyselect_sect026.htm)SAS/STAT 用户指南中的示例 89.4 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-01T22:52:24.383

这个“按比例分配”的例子在第 1 页。下面引用的文章中的 6 条可能会有所帮助：

```
proc surveyselect data=frame out=sampsizes_prop sampsize=400;
 strata cityside **/ alloc=prop**;
run; 
```

文章： [http ://analytics.ncsu.edu/sesug/2013/SD-01.pdf](http://analytics.ncsu.edu/sesug/2013/SD-01.pdf)

# javascript - 确定窗口的当前 Y 位置

> ID：11109243
> 
> 赞同：1
> 
> 时间：2012-06-19T20:52:12.820
> 
> 标签：javascript, jquery, html

我正在尝试编写一个脚本，当用户单击链接时，页面将向下滚动到目标 - 20px（即 - 如果我的目标位于 [0,100] 页面将滚动到 [0,80]。原因因为这 20 像素的差异是因为我在我的网站上方 20 像素高度的图层上放置了一个横幅。

目前，我的方法是直接滚动到我的目标，然后从我当前的位置减去 20px。我在确定我当前的 y 位置时遇到问题。

HTML：

```
<nav>
  <a href="#chapterA" class="link">ChapterA</a>
  <a href="#chapterB" class="link">ChapterB</a>
</nav>
...
<a name="chapterA">ChapterA</a>
<a name="chapterB">ChapterB</a> 
```

jQuery：

```
$('.link').click(function() {
  var currentY = 0; //how to get current y position?
  window.scrollTo(0, currentY - 20);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:57:59.153

试试这个：

```
$('.link').click(function(e) {
  e.preventDefault()
  $(window).scrollTop($(window).scrollTop() - 20);
}); 
```

请注意，没有`href`属性的锚链接无效。

# common-lisp - 如何自定义 SBCL REPL？

> ID：11109249
> 
> 赞同：12
> 
> 时间：2012-06-19T20:52:34.193
> 
> 标签：common-lisp, read-eval-print-loop, sbcl

有没有一种方法可以自定义 SBCL REPL，使其工作方式类似于 CLISP REPL。标准的 SBCL REPL 在 Mac OS X 上并不真正可用。我不能使用箭头键或退格键。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-19T20:57:17.597

你可以使用`rlwrap`

如果您安装了 MacPorts，您可以使用

```
sudo port install rlwrap 
```

调用`sbcl`与

```
rlwrap sbcl 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T20:56:49.297

大多数人将 SBCL REPL 与`SLIME`. 它提供了更多的功能，然后`readline`，在 CLISP 中使用。如果你不习惯使用 Emacs，你可以尝试`ABLE`（通过 quicklisp 获得）——一个非常简单的编辑器，它支持一些基本的 REPL 功能`readline`，但也有基本的代码突出显示和内置的 Hyperspec。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T23:00:16.920

对于 vim 用户，还有 vim+slime (slimv)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T01:16:24.977

您可以尝试通过 Quicklisp 获得的[linedit 。](http://common-lisp.net/project/linedit/)也就是说，Emacs+SLIME 是一个真正的野兽。事实上，Firebug 是我所知道的唯一接近它的东西。

# ios - iOS 5中的视图控制器有什么方法可以指定要在导航堆栈上的后退按钮中使用的图像推送它吗？

> ID：11109258
> 
> 赞同：0
> 
> 时间：2012-06-19T20:53:13.523
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller

我有控制器 A，控制器 B 在导航堆栈中被推到它的顶部。无论如何，控制器 A 是否可以指定图像（例如控制器 A 是某种列表，因此它指定了列表图像），然后控制器 B 的导航项的后退按钮会自动将其显示为后退按钮图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:56:45.173

您可以创建自定义`UIBarButtonItem`并设置`self.navigationItem.backBarButtonItem`为该自定义按钮。

[UINavigationItem 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)

# iphone - 权利“应用程序标识符”具有配置文件不允许的值

> ID：11109260
> 
> 赞同：5
> 
> 时间：2012-06-19T20:53:17.690
> 
> 标签：iphone, ios, xcode, ipad

我知道这个问题已经被问过好几次了，但我想目前，我对整个签名概念有点沮丧，这比编码还要乏味，有时还很搞笑，苹果在不同版本中真的把它搞砸了。当我尝试从 XCode 4.2 构建分发 ipa 文件时，ipa 构建良好并且可以成功安装，但是在 XCode 4.3.2 中，该应用程序永远不会安装但给我错误：Jun

：权利“应用程序标识符”具有配置文件不允许的值

现在，我正在尝试使用我的 mobile.provision 通过 xcodebuild 构建它，并且在生成 ipa 之前，一切看起来都很好。但是，当通过 iTunes 安装应用程序时，这是不断生成的错误。在浏览博客/google_search/etc 之后，它接缝可能存在一些权利问题，我不知道如何去解决这个问题，或者那里可能有什么问题？

我希望有人可以指导我找到正确的方向来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T05:08:59.907

我解决问题的方法首先是，我没有使用正确的配置对构建进行签名。您可以指示移动配置的路径，或者如果它被添加，那么您只需转到 XCode Organizer 并选择正确的配置，右键单击并在查找器中显示配置。如果您反映 Organizer 和 finder 中的名称完全不同，我不知道为什么苹果倾向于保持这种状态，但这就是发生错误的地方。之后，当我尝试在设备上编译和安装 ipa 时，我遇到了另一个错误，因为它不是组成员，因为“权利 'application-identifier' 具有配置文件不允许的值”。在浏览了不同的博客和搜索后，它就像在 Apple 中一样 s 技术说明表明，如果您正在构建应用程序以进行分发，则 dist.plist 文件中的参数“get-task-allow”应设置为 FALSE。尽管它表明在 XCode 4.2 中，由于您正在考虑权利，因此您选择的编译类型也应该反映到这一点，但显然这并没有反映到 FALSE。因此，在将其切换为 false 后，ipa 终于安装到了设备上。同样，这是出于企业分发目的，因此希望将来这可以帮助某人并节省一些麻烦。因此，在将其切换为 false 后，ipa 终于安装到了设备上。同样，这是出于企业分发目的，因此希望将来这可以帮助某人并节省一些麻烦。因此，在将其切换为 false 后，ipa 终于安装到了设备上。同样，这是出于企业分发目的，因此希望将来这可以帮助某人并节省一些麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T08:22:35.800

我通过从我的应用程序中删除我的应用程序扩展来解决 iOS10 企业部署的问题，它们的代码签名与应用程序不同并且导致了这个问题。

# jquery - 用jquery居中悬停气泡

> ID：11109261
> 
> 赞同：1
> 
> 时间：2012-06-19T20:53:18.420
> 
> 标签：jquery

当用户将鼠标悬停在红色框上时，我想用 jquery 显示弹出气泡。问题是我只是通过实验将代码组合在一起......这没有任何意义！

[http://jsfiddle.net/PKzsS/](http://jsfiddle.net/PKzsS/)

```
$(window).load(function() {
    $("#headloginuser ul li a").hover(function() {
        divW = $(this).next("div").width()/4;
        $(this).next("div").css({marginLeft: -divW }).animate({ opacity: "show" }, "fast");
    }, function() {
        $(this).next("div").animate({opacity: "hide"}, "fast");
    });
}); 
```

这或多或少地居中，当然不是完美的:) 但我将宽度除以 4！我不应该把它除以2吗？所以我有隐藏 div 宽度的一半，我把它移到左边那个长度？

我很困惑 ：）

S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:38:04.367

是的，除以 2 将使您几乎到达那里。但要知道，这将使它相对于它的起点居中，恰好与上面红色框的左侧相匹配。我假设您正在尝试相对于框的中心居中，如果是这样，您还需要考虑框的宽度除以 2。

我修改了以下行，它似乎居中很好：

```
divW = ($(this).next("div").width() / 2) - ($(this).outerWidth() / 2); 
```

*- 编辑 -*

我已经切换到使用`outerWidth()`而不是`width()`因为我注意到你在第三个按钮上有填充。不确定您是否要考虑这一点。

# jquery - 如何使用 JQUERY 调用随机表单

> ID：11109267
> 
> 赞同：2
> 
> 时间：2012-06-19T20:53:32.697
> 
> 标签：jquery, html

我想知道是否有人可以提供一些见解，为什么当我单击下面的随机表单链接时它不会随机加载列出的表单之一。它适用于 jfiddle 这里：

[http://jsfiddle.net/tUMBp/1/](http://jsfiddle.net/tUMBp/1/)

任何帮助将不胜感激。提前致谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script src="http://code.jquery.com/jquery-1.7.2.js" type="text/javascript"></script><!-- This calls the jquery library -->

<script type="text/javascript">
$(document).ready(function() {
    $('#randomForm').click(function() {
        var forms = $('#forms > form');
        forms.hide();
        forms.eq(Math.floor(Math.random() * forms.length)).show();
    });
});
</script>

<title>Untitled Document</title>
</head>

<body>

<div id="forms">
    <form style="display:none;">
        This is your training site1
    </form>
    <form style="display:none;"><!-- the second form -->
        This is your training site2
    </form>
    <form style="display:none;"><!-- the second form -->
        This is your training site3
    </form>

    <form style="display:none;"><!-- the second form -->
       This is your training site4
    </form>

</div>

<a href="#" id="randomForm">Show random form</a>​

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:56:36.233

问题是您的 jquery 代码在页面上存在任何表单之前运行。此时，您无法将 click 事件分配给`#randomForm`（jQuery 将尝试这样做，但由于`#randomForm`尚不存在，它不会执行任何操作）。

使用 document.ready 处理程序：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#randomForm').click(function() {
        var forms = $('#forms > form');
        forms.hide();
        forms.eq(Math.floor(Math.random() * forms.length)).show();
    });​
});​
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:58:08.513

**查询更新**

将 jQuery 代码放入其中

> $(document).ready(function() { // 代码 });

```
$(document).ready(function() {
    $('#randomForm').click(function() {
        var forms = $('#forms > form');
        forms.hide();
        forms.eq(Math.floor(Math.random() * forms.length)).show();
    });
}); 
```

# java - 如何在 JMS 中以编程方式创建主题？

> ID：11109269
> 
> 赞同：0
> 
> 时间：2012-06-19T20:53:42.560
> 
> 标签：java, jms

目前我使用 glassfish 管理实用程序来创建我的主题及其连接工厂。然后我可以通过 Context.lookup() 方法获取主题，给定 glassfish 中已经创建的主题。但现在我想根据用户输入以编程方式创建主题，这意味着我不需要先使用 glassfish 管理员创建主题。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:00:23.333

[以编程方式创建 jms](http://objectmix.com/weblogic/535454-what-proper-method-programatically-create-jms-topics-queues.html)的引用方法，基本上有两种方法：

1.  使用 MBean API 创建队列/主题。
2.  使用 weblogic.jms.extensions.JMSHelper

# c# - 使用实体框架将新记录插入数据库

> ID：11109272
> 
> 赞同：1
> 
> 时间：2012-06-19T20:54:13.647
> 
> 标签：c#, entity-framework, asp.net-mvc-2

我的数据库中有一个这样的表：

```
[id] [uniqueidentifier] NOT NULL,
[user_id] [uniqueidentifier] NOT NULL,
[download_type] [nvarchar](50) NOT NULL,
[download_id] [nvarchar](50) NOT NULL,
[download_date] [datetime] NOT NULL,
[user_ip_address] [nvarchar](20) NOT NULL, 
```

被`id`定义为主键。

我想在这个表中插入一条新记录。这是我无法开始工作的代码。

```
CustomerPortalEntities_Customer_Downloads dbcd = new CustomerPortalEntities_Customer_Downloads();

public ActionResult Download(string id)
{
    var collection = new FormCollection();
    collection.Add("user_id", Membership.GetUser().ProviderUserKey.ToString());
    collection.Add("download_type", "Car");
    collection.Add("download_id", id);
    collection.Add("download_date", DateTime.Now.ToString());
    collection.Add("user_ip_address", Request.ServerVariables["REMOTE_ADDR"]);            

    dbcd.AddToCustomer_Downloads(collection);

    return Redirect("../../Content/files/" + id + ".EXE");
} 
```

我得到的错误是在线 dbcd.AddToCustomer_Downloads(collection);

> 'CustomerPortalMVC.Models.CustomerPortalEntities_Customer_Downloads.AddToCustomer_Downloads(CustomerPortalMVC.Models.Customer_Downloads)' 的最佳重载方法匹配有一些无效参数
> 
> 参数“1”：无法从“System.Web.Mvc.FormCollection”转换为“CustomerPortalMVC.Models.Customer_Downloads”

我需要改变什么才能使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:03:34.937

您需要为`CustomerPortalMVC.Models.Customer_Downloads`方法提供一个类型的对象，`AddToCustomer_Downloads`然后`SaveChanges`像这样调用您的数据上下文：

```
public ActionResult Download(string id) 
{ 
    var item = new CustomerPortalMVC.Models.Customer_Downloads(); 
    item.user_id = Membership.GetUser().ProviderUserKey.ToString(); 
    item.download_type = "Car"; 
    item.download_id = id; 
    item.download_date = DateTime.Now.ToString(); 
    item.user_ip_address = Request.ServerVariables["REMOTE_ADDR"];             
    dbcd.AddToCustomer_Downloads(item); 
    dbcd.SaveChanges(); 
    return Redirect("../../Content/files/" + id + ".EXE"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:59:59.637

您需要创建 Customer_Downloads 类的实例并将其传递给您的 AddToCustomer_Downloads 方法。错误消息告诉您该方法的接口需要一个 Customer_Downloads 对象，但您正在向它传递一个 FormCollection 对象。

# c++ - 使用 openMP 进行并行化：共享子句和关键子句

> ID：11109273
> 
> 赞同：1
> 
> 时间：2012-06-19T20:54:16.157
> 
> 标签：c++, openmp

下面是通过 openMP 并行化的部分代码。数组`ap[]`和`sc[]`被添加到附加赋值中，因此，我决定将它们共享，然后将它们放在`critical`子句部分，因为`reduction`子句不接受数组。但它给出的结果与其串行对应物不同。哪里有问题？

```
Vector PN, Pf, Nf; // Vector is user-defined structure
Vector NNp, PPp;
Vector gradFu, gradFv, gradFw;
float dynVis_eff, SGSf; 
float Xf_U, Xf_H;
float mf_P, mf_N;
float an_diff, an_conv_P, an_conv_N, an_trans;  
float sc_cd, sc_pres, sc_trans, sc_SGS, sc_conv_P, sc_conv_N;   
float ap_trans;

#pragma omp parallel for
for (int e=0; e<nElm; ++e)
{
    ap[e] = 0.f;
    sc[e] = 0.f;
}

#pragma omp parallel for shared(ap,sc)
for (int f=0; f<nFaces; ++f)
{
    PN = cntE[face_N[f]] - cntE[face_P[f]];
    Pf = cntF[f] - cntE[face_P[f]];
    Nf = cntF[f] - cntE[face_N[f]];
    PPp = Pf - (Pf|norm(PN))*norm(PN);
    NNp = Nf - (Nf|norm(PN))*norm(PN);

    mf_P = mf[f];
    mf_N = -mf[f];

    SGSf = (1.f-ifac[f]) * SGSvis[face_P[f]]
         +      ifac[f]  * SGSvis[face_N[f]];

    dynVis_eff = dynVis + SGSf;

    an_diff = dynVis_eff * Ad[f] / mag(PN);

    an_conv_P = -neg(mf_P);
    an_conv_N = -neg(mf_N);

    an_P[f] = an_diff + an_conv_P;
    an_N[f] = an_diff + an_conv_N;

    // cross-diffusion
    sc_cd = an_diff * ( (gradVel[face_N[f]]|NNp) - (gradVel[face_P[f]]|PPp) );

    #pragma omp critical
    {       
        ap[face_P[f]] += an_N[f];   
        ap[face_N[f]] += an_P[f];

        sc[face_P[f]] += sc_cd + sc_conv_P;
        sc[face_N[f]] += -sc_cd + sc_conv_N;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:05:06.000

您尚未声明是否应共享并行子句中的所有其他变量。您可以使用该`default`子句一般地执行此操作。如果未指定默认值，则变量都是共享的，这会导致代码出现问题。

在你的情况下，我猜你应该去

```
#pragma omp parallel for default(none), shared(ap,sc,face_N,face_P,cntF,cntE,mf,ifac,Ad,an_P,an_N,SGSvis,dynVis), private(PN,Pf,Nf,PPp,NNp,mf_P,mf_N,SGSf,dynVis_eff,an_diff,an_conv_P,an_conv_N,sc_cd) 
```

我强烈建议始终使用`default(none)`，这样编译器就会在您每次未显式声明变量时抱怨并强制您显式考虑它。

# ruby - 确定红宝石的位置

> ID：11109279
> 
> 赞同：54
> 
> 时间：2012-06-19T20:54:34.613
> 
> 标签：ruby, ruby-on-rails-3, rubygems

如何确定我的红宝石的位置？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-19T20:56:27.223

你可以试试

```
gem which rails 
```

获取特定宝石的位置，或

```
echo $GEM_HOME 
```

获取您的宝石的主页目录

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-06-19T20:55:40.353

```
gem environment 
```

...应该为您提供所需的所有信息。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-11-24T13:23:42.470

使用 budler，您可以：

```
bundle show <gem> 
```

参考：[http ://bundler.io/v1.1/bundle_show.html](http://bundler.io/v1.1/bundle_show.html)

# php - PHP：在 GNU MP 中获取“每个肢体的位数”

> ID：11109281
> 
> 赞同：2
> 
> 时间：2012-06-19T20:54:39.873
> 
> 标签：php, random, gnu, gmp, bits

我想在 PHP 中使用 GNU MP 的函数[gmp_random()](http://www.php.net/manual/en/function.gmp-random.php)。我需要设置我想要的位的确切值（例如一个 64 位长度的随机数）。

限制器参数乘以“每个肢体的位数”。我怎样才能得到这个值？这是否等同于 CPU 的位数，或者是否有任何 PHP 函数来获取该值？

在原始库中，它由 const [mp_bits_per_limb](http://gmplib.org/manual/Useful-Macros-and-Constants.html)表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:02:58.390

似乎没有简单的方法可以解决这个问题。

您可以假装 mp_bits_per_limb 等于 PHP_INT_SIZE*8 并使用它（适用于大多数架构，但不是所有架构）。由此产生的错误将是困难的，并且对于任何开发人员来说都是值得调试的。所以这可能是要走的路:)

或者通过知道 mp_bits_per_limb 不会小于 16 来解决它，所以你只需使用“number_of_bits_you_want/16”，得到一个包含太多位的结果，然后 gmp_and() 你的结果使用 0xFFFF、0xFFFFFFFF 或 0xFFFFFFFFFFFFFFFF 将其减少到16、32 或 64 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:18:23.410

我写了一个补丁来修复它：[https ://bugs.php.net/bug.php?id=62375](https://bugs.php.net/bug.php?id=62375)

该补丁将在 PHP 中注册常量“GMP_LIMB_BITS”。

# c# - 在实体上执行 CRUD 操作的最佳实践（实体框架）

> ID：11109285
> 
> 赞同：3
> 
> 时间：2012-06-19T20:55:01.057
> 
> 标签：c#, asp.net-mvc, entity-framework

我试图弄清楚我应该将每个实体的数据库操作放在哪里。在这种混乱之前，对于每个实体，我都在提供程序类中执行所有这些数据库操作。Provider类意味着每个类都有一个provider。如：

```
class Member
{
   public string FirstName;
   public string LastName;
}

class MemberProvider
{
  //Singleton
  //Do database operations

   ......

   public List<Member> GetItems(FirstName = null, LastName = null)
   {
       // run store procedure
       //this returns List<Member> if any
   }

   public Member GetItem(int? Id = null,FirstName = null, LastName = null)
   {
       // run store procedure
       //this return Member if any
   }

   ....
} 
```

然后当我需要一些过滤的成员列表时，我这样做：

```
 List<Member> members = MemberProvider.Instance.GetItems(FirstName = "John", LastName = "Black"); 
```

问题是如何在实体本身中执行与实体相关的所有这些数据库操作？这是好习惯吗？我应该阅读什么来理解这个概念？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:02:12.740

在大多数情况下，业务对象和数据访问应该分开。[在此处](https://stackoverflow.com/questions/3175/repository-pattern-tutorial-in-c-sharp)和[此处](http://martinfowler.com/eaaCatalog/repository.html)查看存储库模式。这可能正是您所需要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T01:29:14.503

我建议使用存储库模式。在这里，您可以获得很好的介绍和示例代码：[Using Repository and Unit of Work patterns with Entity Framework 4.0](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)

和另一个[在 ASP.NET MVC 应用程序中实现存储库和工作单元模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T21:00:58.327

您应该考虑使用“[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)”原则。因此，另一个类应该负责 crud 操作。

您可以考虑查看存储库模式。[Patrik Löwendahl](http://blog.lowendahl.net/?p=249)写了一个易于阅读的教程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T20:59:07.687

我觉得数据库操作应该在一个单独的类中。查看单一职责主体[http://www.objectmentor.com/resources/articles/srp.pdf](http://www.objectmentor.com/resources/articles/srp.pdf)和存储库设计模式[http://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)。

# java - 停止使用 Robotium 滚动

> ID：11109286
> 
> 赞同：0
> 
> 时间：2012-06-19T20:55:05.190
> 
> 标签：java, android, automation, robotium

我正在尝试使用 Robotium 验证大型列表的内容，由于某种原因，一旦程序到达可见列表的底部，Robotium 将开始滚动，并继续滚动直到它到达列表的底部。我能做些什么来防止这种情况发生吗？理想情况下，程序将验证可见内容，滚动到足以显示一段未验证的内容，然后一旦验证，滚动到底部，最终允许测试应用程序验证列表中的所有内容。

这是我正在使用的代码：

```
public void testCatalogLinkContent(){
        //VERIFY USER IS ON HOMEPAGE
        try {
            solo.sleep(3000);
            assertTrue(solo.searchText(" Apps")) ;
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        }
        //CLICK ON CATALOG      
        try{
            solo.clickOnText(" Apps");
                }catch(Exception e){
                    e.printStackTrace();
                }
        //Search for Music in menu
        if(solo.searchText(RECOMMENDED)==false){
            Log.e(TAG, RECOMMENDED + " Not found!!!"); 

        }else{
            Log.i(TAG, RECOMMENDED + " Found"); 
        }

        //Search for UAT  in menu
        if(solo.searchText(UAT)==false){
            Log.e(TAG,  UAT + " Not found!!!"); 

        }else{
            Log.i(TAG, UAT  + " Found"); 
        }

        //Search for  NEW APPS in menu
        if(solo.searchText(NEW)==false){
            Log.e(TAG, NEW  + " Not found!!!"); 

        }else{
            Log.i(TAG, NEW + " Found"); 
        }

        //Search for TOP SELLERS in menu
        if(solo.searchText(TOPSELLER)==false){
            Log.e(TAG, TOPSELLER + " Not found!!!"); 

        }else{
            Log.i(TAG, TOPSELLER + " Found"); 
        }

        if(solo.searchText(TOPDOWNLOAD)==false){
            Log.e(TAG, TOPDOWNLOAD  + " Not found!!!"); 

        }else{
            Log.i(TAG, TOPDOWNLOAD  + " Found"); 
        }

        //Search for EA in menu
        if(solo.searchText(EA)==false){
            Log.e(TAG, EA  + " Not found!!!"); 

        }else{
            Log.i(TAG, EA  + " Found"); 
        }

        //Search for FEATURED in menu
        if(solo.searchText(FEATURED)==false){
            Log.e(TAG, FEATURED + " Not found!!!"); 

        }else{
            Log.i(TAG, FEATURED + " Found"); 
        }
        //Search for GAMES in menu
        if(solo.searchText(GAMES)==false){
            Log.e(TAG, GAMES + " Not found!!!"); 

        }else{
            Log.i(TAG, GAMES + " Found"); 
        }
        //Search for  APPS in menu
        if(solo.searchText(APPS)==false){
            Log.e(TAG, APPS + " Not found!!!"); 

        }else{
            Log.i(TAG, APPS  + " Found"); 
        }
        //Search for SOCIAL  in menu
        if(solo.searchText(SOCIAL)==false){
            Log.e(TAG, SOCIAL + " Not found!!!"); 

        }else{
            Log.i(TAG, SOCIAL  + " Found"); 
        }
        //Search for ENTERTAINMENT in menu
        if(solo.searchText(ENTERTAINMENT)==false){
            Log.e(TAG, ENTERTAINMENT + " Not found!!!"); 

        }else{
            Log.i(TAG,ENTERTAINMENT  + " Found"); 
        }
        //Search for THEMES  in menu
        if(solo.searchText(THEMES)==false){
            Log.e(TAG, THEMES  + " Not found!!!"); 

        }else{
            Log.i(TAG, THEMES  + " Found"); 
        }
        //Search for TOOLS  in menu
        if(solo.searchText(TOOLS)==false){
            Log.e(TAG, TOOLS + " Not found!!!"); 

        }else{
            Log.i(TAG, TOOLS  + " Found"); 
        }
        //Search for  NEWSin menu
        if(solo.searchText(NEWS)==false){
            Log.e(TAG, NEWS  + " Not found!!!"); 

        }else{
            Log.i(TAG, NEWS + " Found"); 
        }
        //Search for READING in menu
        if(solo.searchText(READING)==false){
            Log.e(TAG, READING + " Not found!!!"); 

        }else{
            Log.i(TAG, READING + " Found"); 
        }
        //Search for MONEY in menu
        if(solo.searchText(MONEY)==false){
            Log.e(TAG, MONEY + " Not found!!!"); 

        }else{
            Log.i(TAG, MONEY + " Found"); 
        }
        //Search for SHOPPING in menu
        if(solo.searchText(SHOPPING)==false){
            Log.e(TAG, SHOPPING  + " Not found!!!"); 

        }else{
            Log.i(TAG, SHOPPING  + " Found"); 
        }
        //Search for FITNESS in menu
        if(solo.searchText(FITNESS)==false){
            Log.e(TAG, FITNESS + " Not found!!!"); 

        }else{
            Log.i(TAG, FITNESS  + " Found"); 
        }
        //Search for TRAVEL  in menu
        if(solo.searchText(TRAVEL)==false){
            Log.e(TAG,TRAVEL + " Not found!!!"); 

        }else{
            Log.i(TAG, TRAVEL  + " Found"); 
        }
        //Search for BUSINESS  in menu
        if(solo.searchText(BUSINESS)==false){
            Log.e(TAG, BUSINESS + " Not found!!!"); 

        }else{
            Log.i(TAG, BUSINESS  + " Found"); 
        }
        //Search for SPANISH in menu
        if(solo.searchText(SPANISH)==false){
            Log.e(TAG, SPANISH + " Not found!!!"); 

        }else{
            Log.i(TAG, SPANISH + " Found"); 
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:07:10.693

Robotium 的工作方式是“扫描”布局，因此当您指示它时`solo.searchText()`，它将查找您指定的任何内容，如果在当前可见区域中找不到它，它将滚动您的视图直到找到它（或它放弃了）。我的猜测是它没有找到文本`" Apps"`，因为你的文本真的是`"Apps"`，并且由于它找不到它，你会得到你指定的行为，“无限滚动”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:46:30.347

所以要解决这个问题，这是我必须做的：

```
public void testCatalogLinkContent(){
        //VERIFY USER IS ON HOMEPAGE
        try {
            solo.sleep(3000);
            assertTrue(solo.searchText("Apps")) ;
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        }
        //CLICK ON CATALOG      
        try{
            solo.clickOnText("Apps");
                }catch(Exception e){
                    e.printStackTrace();
                }
        //Search for Music in menu
        if(solo.searchText(RECOMMENDED)==false){
            Log.e(TAG, RECOMMENDED + " Not found!!!"); 

        }else{
            Log.i(TAG, RECOMMENDED + " Found"); 
        }

        //Search for UAT  in menu
        if(solo.searchText(UAT)==false){
            Log.e(TAG,  UAT + " Not found!!!"); 

        }else{
            Log.i(TAG, UAT  + " Found"); 
        }

        //Search for  NEW APPS in menu
        if(solo.searchText(NEW)==false){
            Log.e(TAG, NEW  + " Not found!!!"); 

        }else{
            Log.i(TAG, NEW + " Found"); 
        }

        //Search for TOP SELLERS in menu
        if(solo.searchText(TOPSELLER)==false){
            Log.e(TAG, TOPSELLER + " Not found!!!"); 

        }else{
            Log.i(TAG, TOPSELLER + " Found"); 
        }
        //Search for top downloaded
        if(solo.searchText(TOPDOWNLOAD)==false){
            Log.e(TAG, TOPDOWNLOAD  + " Not found!!!"); 

        }else{
            Log.i(TAG, TOPDOWNLOAD  + " Found"); 
        }

        //Search for EA in menu
        if(solo.searchText(EA)==false){
            Log.e(TAG, EA  + " Not found!!!"); 

        }else{
            Log.i(TAG, EA  + " Found"); 
        }
        solo.scrollUp();
        //Search for FEATURED in menu
        if(solo.searchText(FEATURED)==false){
            Log.e(TAG, FEATURED + " Not found!!!"); 

        }else{
            Log.i(TAG, FEATURED + " Found"); 
        }
        solo.scrollUp();
        //Search for GAMES in menu
        if(solo.searchText(GAMES)==false){
            Log.e(TAG, GAMES + " Not found!!!"); 

        }else{
            Log.i(TAG, GAMES + " Found"); 
        }
        solo.scrollUp();
        //Search for APPS in menu
        if(solo.searchText(APPS)==false){
            Log.e(TAG, APPS + " Not found!!!"); 

        }else{
            Log.i(TAG, APPS  + " Found"); 
        }
        solo.scrollUp();
        //Search for SOCIAL  in menu
        if(solo.searchText(SOCIAL)==false){
            Log.e(TAG, SOCIAL + " Not found!!!"); 

        }else{
            Log.i(TAG, SOCIAL  + " Found"); 
        }
        solo.scrollUp();
        //Search for ENTERTAINMENT in menu
        if(solo.searchText(ENTERTAINMENT)==false){
            Log.e(TAG, ENTERTAINMENT + " Not found!!!"); 

        }else{
            Log.i(TAG,ENTERTAINMENT  + " Found"); 
        }
        solo.scrollUp();
        //Search for MUSIC  in menu
                if(solo.searchText(MUSIC)==false){
                    Log.e(TAG, MUSIC  + " Not found!!!"); 

                }else{
                    Log.i(TAG, MUSIC  + " Found"); 
                }
                solo.scrollUp();
        //Search for THEMES  in menu
        if(solo.searchText(THEMES)==false){
            Log.e(TAG, THEMES  + " Not found!!!"); 

        }else{
            Log.i(TAG, THEMES  + " Found"); 
        }
        solo.scrollUp();
        //Search for TOOLS  in menu
        if(solo.searchText(TOOLS)==false){
            Log.e(TAG, TOOLS + " Not found!!!"); 

        }else{
            Log.i(TAG, TOOLS  + " Found"); 
        }
        solo.scrollUp();
        //Search for  NEWSin menu
        if(solo.searchText(NEWS)==false){
            Log.e(TAG, NEWS  + " Not found!!!"); 

        }else{
            Log.i(TAG, NEWS + " Found"); 
        }
        solo.scrollUp();
        //Search for SPORTS  in menu
                if(solo.searchText(SPORTS)==false){
                    Log.e(TAG, SPORTS  + " Not found!!!"); 

                }else{
                    Log.i(TAG, SPORTS  + " Found"); 
                }
                solo.scrollUp();
        //Search for READING in menu
        if(solo.searchText(READING)==false){
            Log.e(TAG, READING + " Not found!!!"); 

        }else{
            Log.i(TAG, READING + " Found"); 
        }
        solo.scrollUp();
        //Search for MONEY in menu
        if(solo.searchText(MONEY)==false){
            Log.e(TAG, MONEY + " Not found!!!"); 

        }else{
            Log.i(TAG, MONEY + " Found"); 
        }
        //Search for SHOPPING in menu
        if(solo.searchText(SHOPPING)==false){
            Log.e(TAG, SHOPPING  + " Not found!!!"); 

        }else{
            Log.i(TAG, SHOPPING  + " Found"); 
        }
        //Search for FITNESS in menu
        if(solo.searchText(FITNESS)==false){
            Log.e(TAG, FITNESS + " Not found!!!"); 

        }else{
            Log.i(TAG, FITNESS  + " Found"); 
        }
        //Search for TRAVEL  in menu
        if(solo.searchText(TRAVEL)==false){
            Log.e(TAG,TRAVEL + " Not found!!!"); 

        }else{
            Log.i(TAG, TRAVEL  + " Found"); 
        }
        //Search for BUSINESS  in menu
        if(solo.searchText(BUSINESS)==false){
            Log.e(TAG, BUSINESS + " Not found!!!"); 

        }else{
            Log.i(TAG, BUSINESS  + " Found"); 
        }
        //Search for SPANISH in menu
        if(solo.searchText(SPANISH)==false){
            Log.e(TAG, SPANISH + " Not found!!!"); 

        }else{
            Log.i(TAG, SPANISH + " Found"); 
        }
    } 
```

在每次搜索之前（和之后），我插入了 solo.scrollUp();

这不是最漂亮的方法，也不是最有效的方法，但它现在有效。

感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T12:55:42.970

我遇到了类似的问题。似乎机器人在搜索文本时会自动向下滚动，但也会自动向下滚动。说在方法A中它搜索一些带有资源ID的视图，然后向下滚动到底部以找到所有这些视图，如果在方法B中向上滚动或滚动到顶部，它就不起作用；如果仅在方法 A 中向上滚动或滚动到顶部，它仍然有效。很奇怪的东西。

# android - AdWhirl 自定义事件 noSuchMethodException？

> ID：11109290
> 
> 赞同：0
> 
> 时间：2012-06-19T20:55:38.560
> 
> 标签：android, adwhirl

今天我尝试将 TapForTap 网络与 AdWhirl 和自定义事件集成。显然很多人都能够做到这一点而没有任何错误，但我不是其中之一。我的代码是我的广告类，它在初始化时加载我的广告。这是我的 Ad.java 类：[http](http://pastebin.com/TppQeqUh) ://pastebin.com/TppQeqUh以及我在 LogCat 中看到的错误：http: [//pastebin.com/pv4Rpz8U](http://pastebin.com/pv4Rpz8U)。谢谢你，我希望有人可以帮助我解决我的问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:59:42.293

您确定没有任何东西无意中修改了`adWhirlLayout`'s 的`adWhirlInterface`属性吗？我已经能够使用我们的示例代码使事情正常工作，所以看起来要么`adWhirlLayout.adWhirlInterface`没有指向正确的地方，要么你在某处有错字（我在你的代码中没有找到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:48:36.107

我最终使用了 Admob 中介，这基本上是一样的。

# javascript - 在移动 Web 应用程序中处理页面堆栈

> ID：11109294
> 
> 赞同：0
> 
> 时间：2012-06-19T20:55:48.763
> 
> 标签：javascript, android, mobile, cordova

我们正在使用 PhoneGap 和 JQuery mobile 构建一个移动 Web 应用程序。这是我们的流程：

网关 -> 登录 -> 加载详细信息

```
 -> LoadDetails 
```

从 LoadDetails 执行各种其他工作流，最后将用户重定向回 LoadDetails，并相应更新信息。

我们在 Android 中的目标是让 LoadDetails 成为应用程序的最顶层页面。工作流程完成后，回击 LoadDetails 应该会退出应用程序。

我们有多种方法可以访问 LoadDetails，我列出了最常见的两种。显然，如果用户成功登录并登陆 LoadDetails，我们不希望返回按钮让他们返回登录。

需求： - 从堆栈中删除页面的能力

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:51:49.787

[在您的LoadDetails](http://docs.phonegap.com/en/1.8.1/cordova_events_events.md.html#backbutton)页面上，您要注册一个后退按钮事件侦听器。在处理事件的方法中，您需要调用 navigator.app.exitApp() 来退出应用程序。像这样的东西：

```
document.addEventListener("backbutton", onBackKeyDown, false);

function onBackKeyDown() {
   navigator.app.exitApp();
} 
```

# jquery-mobile - 主题如何应用于 jquery 移动插件？

> ID：11109295
> 
> 赞同：1
> 
> 时间：2012-06-19T20:55:51.057
> 
> 标签：jquery-mobile

目前我正在为 JQuery Mobile 构建我的第一个插件。我已经设法使基本代码工作，但是我很难理解主题是如何应用的。在花了 2 个小时的谷歌搜索无济于事之后，我有点不知所措。

本质上：如何构建我的插件以从 JQM 的主题中提取样式？是否有关于主题在哪里/如何在我可以使用的机械层面上应用的参考？我正在构建的插件是一个有点定制的进度条显示，我希望进度条的颜色和边框使用主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:31:46.977

jQuery Mobile 主题基于一组与视觉特征相关的标准类。例如，`.ui-btn`应将类添加到按钮，并将`.ui-icon`类添加到图标以遵循 jQuery Mobile 主题约定。另一个例子是如何将`.ui-icon-shadow`类添加到具有类的元素中，`.ui-icon`它将被赋予阴影。

这是一个示例 jQuery Mobile 按钮：

```
<a href="../../" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-left ui-btn ui-shadow ui-btn-corner-all ui-btn-icon-notext ui-btn-up-f" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="f" title="Home">
    <span class="ui-btn-inner ui-btn-corner-all">
        <span class="ui-btn-text">Home</span>
        <span class="ui-icon ui-icon-home ui-icon-shadow">&nbsp;</span>
    </span>
</a> 
```

因此，您可以手动将这些类添加到 HTML 标记中，也可以使用 jQuery Mobile 公开的函数创建小部件：

```
$('<ul data-role="listview"><li>FOOBAR</li></ul>').listview(); 
```

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/lists/lists-methods.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-methods.html)*

所有小部件都有类似`listview()`的功能，其中大多数都可以接受选项，因此您可以设置小部件是否获取框阴影或其他任何内容。

**更新**

要让您的小部件继承最接近的主题，您可以执行以下操作：

```
//assuming `this` is the widget element
var theme = $(this).closest('[data-theme]').attr('data-theme') || 'a'; 
```

# xml - 只获取当前节点的所有文本

> ID：11109297
> 
> 赞同：2
> 
> 时间：2012-06-19T20:55:53.777
> 
> 标签：xml, xslt

这是我的 XML：

```
<section>
  <para>part1 <breakline/> part2
    <list>
      <para>list1 </para>
      <para>list2 </para>
    </list> 
  </para>
<para>before_line_break <breakline/> after</para>
<para>para3</para>
</section> 
```

预期输出：

```
part1 
part2
before_line_break 
after
para3 
```

我想要“part2”而不是“list1”和“list2”

一个等效的 HTML 文件是：

```
<html>
  <body>
    part1 <br/>
    part2 <br/>
    before_line_break <br/>
    after <br/>
    para3 <br/>
  </body>
</html> 
```

我在我的 xsl 文件中尝试了很多东西。这只是一个例子（当然不起作用）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
  <body>
    <xsl:for-each select="section/para">
      <xsl:value-of select="."/>
      <br/>
    </xsl:for-each>
  </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

我应该如何更改我的 XSL 文件以获得预期的输出？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:16:30.877

**这可能是最短的解决方案——只有两个模板，没有条件，没有`xsl:for-each`：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <html>
   <body>
     <xsl:apply-templates select="para/text()[normalize-space()]"/>
   </body>
  </html>
 </xsl:template>    
 <xsl:template match="para/text()">
  <xsl:value-of select="concat('&#xA;', normalize-space(.))"/><br />
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<section>
  <para>part1 <breakline/> part2
    <list>
      <para>list1 </para>
      <para>list2 </para>
    </list>
  </para>
<para>before_line_break <breakline/> after</para>
<para>para3</para>
</section> 
```

**产生了想要的正确结果：**

```
<html>
   <body>
      part1<br>
      part2<br>
      before_line_break<br>
      after<br>
      para3<br>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:25:52.040

以此为起点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <html>
            <body>
                <xsl:apply-templates select="section/para"/>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="para">
        <xsl:apply-templates select="text()|breakline"/>
    </xsl:template>

    <xsl:template match="text()">
        <xsl:value-of select="."/>
        <!-- print br if text() is at end of para -->
        <xsl:if test="position()=last()">
            <br/>
        </xsl:if>
    </xsl:template>

    <!-- replace breakline with br -->
    <xsl:template match="breakline">
        <br/>
    </xsl:template>

    <!-- mute list -->
    <xsl:template match="list/para"/>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:35:01.297

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="utf-8" indent="yes" />
  <xsl:template match="/section">
    <html>
      <body>
        <xsl:for-each select="para/text()">
          <xsl:value-of select="."/>
          <br/>
        </xsl:for-each>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

# php - 调试和检查 $_POST

> ID：11109298
> 
> 赞同：6
> 
> 时间：2012-06-19T20:55:58.873
> 
> 标签：php

假设我有 2 个页面：index.php 和 service.php

index.php 向 service.php 发送一个 http-post，其中包含每 5 分钟一次的日期戳。

我将如何调试 service.php 上的 post 变量？显然我不能只做一个

```
if(isset($_POST['key'])) { 
    var_dump($_POST['key']); 
} 
```

因为当我进入页面时它不会存在。

在 ASP.NET 中，我只会创建一个断点，但我将如何检查 php 中发布的数据？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T20:58:29.743

使用（使用当前以避免覆盖）将`$_POST`数组的状态保存到文件中，并稍后检查文件。`var_export``time()`

```
file_put_contents( 'debug' . time() . '.log', var_export( $_POST, true)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T21:04:10.850

`var_dump`您可以使用or输出 post 的值`print_r`，我不理解您为什么说“不能”

事实上，有几种方法可以调试发布数据：

*   [TamperData](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/) - 拦截和更改表单发布数据

*   [HttpFox](https://addons.mozilla.org/en-US/firefox/addon/httpfox/) - 调试 http 请求

*   您还可以使用 Firebug，它是一款出色的通用调试工具。使用“网络”面板，可以调试发送的帖子数据和服务器的输出：

    [Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug) - 通用开发工具。

*   Firebug 本身有扩展；有一个名为[FirePHP](http://www.firephp.org/)的工具可以让您将调试数据跟踪到 Firebug 控制台。我个人在设置 FirePHP 时运气不佳，但我也没有提出过认真的尝试。

*   您还可以使用内置工具：Chrome ( )`F12`或 Firefox ( `CTRL`++ `SHIFT`)`K`

*   `error_log`使用以下命令将调试数据记录到错误日志中：

    error_log("\n".serialize($_POST), 3, "/var/tmp/my-errors.log");

**文档**

PHP 的 var_dump - [http://php.net/manual/en/function.var-dump.php](http://php.net/manual/en/function.var-dump.php)

PHP 的 print_r - [http://php.net/manual/en/function.print-r.php](http://php.net/manual/en/function.print-r.php)

PHP 的 error_log - [http://php.net/manual/en/function.error-log.php](http://php.net/manual/en/function.error-log.php)

使用 FirePHP 讨论 Firebug 的文章 - [http://sixrevisions.com/web-development/how-to-debug-php-using-firefox-with-firephp/](http://sixrevisions.com/web-development/how-to-debug-php-using-firefox-with-firephp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:57:46.577

您可以使用[print_r](http://php.net/print_r)以人类可读的方式检查数据。

```
echo '<pre>';
print_r($_POST); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T20:59:17.887

由于您正在响应服务器上另一个 PHP 脚本发出的内部请求，因此您有多种选择：[将其记录到`syslog`](http://bg2.php.net/manual/en/function.syslog.php)、将其记录到您自己的日志文件或数据库中，或者在某处发送邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T20:59:41.633

对于 php（适用于许多 IDE，但是您需要配置特定的 IDE）可以使用[xdebug](http://xdebug.org/)设置断点并[检查](http://www.fieg.nl/debugging-php-with-eclipse-and-xdebug)您的变量

# php - 看似简单：在一个查询中检查数据是否从 MySQL 返回

> ID：11109302
> 
> 赞同：0
> 
> 时间：2012-06-19T20:56:19.340
> 
> 标签：php, mysql, sql, database

这是我正在考虑的一个简单场景。我有一个从 PHP 对 MySQL 数据库执行的查询。我想检查查询是否返回了任何数据。但是，为了执行该检查，它会提取其中一行返回的数据。

看看这个例子，以及它的评论：

```
$booksGrabber = ("SELECT * FROM table");

if (!$booksGrabber) {
  //Query failed, perhaps a syntax error
  exit;
}

if (!mysql_result($booksGrabber, 0)) {
  //No data was returned :(
  exit;
}

while ($book = mysql_fetch_assoc($booksGrabber)) {
  //mysql_result() stole the first row of returned data
  //So if I was expecting the loop to display 4 results,
  //I only get 3...
} 
```

如何在不运行两个查询（一个用于检查，另一个用于显示所有数据）或其中一个行被盗的情况下检查数据是否从数据库返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:59:30.213

使用[`mysql_num_rows`](http://php.net/mysql-num-rows). 它看起来很简单。

编辑：如果您想要更复杂，请添加.[`mysql_data_seek`](http://php.net/mysql-data-seek)`($booksGrabber,0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:59:54.630

简单：运行查询的**mysql_query()**函数将在错误时返回 false，然后您可以使用 mysql_num_rows() 进行计数。因此，您可以执行以下操作：

```
$result = mysql_query('SELECT * FROM table');
if (!$result) {
    print('Invalid query: ' . mysql_error());
} elseif (mysql_num_rows() == 0) {
    print("no results");
} else {
   // You can use safely data from the query :)
} 
```

# android - Android 中的大 IndexBuffer

> ID：11109303
> 
> 赞同：1
> 
> 时间：2012-06-19T20:56:22.417
> 
> 标签：android, opengl-es

我想用一个大网格画一个网格（想想~120k顶点）。如果我尝试将所有顶点放在单个索引缓冲区中，它将不起作用，因为我使用的`java.nio.ShortBuffer`是索引缓冲区，所以最大值为 2^15 - 1，而我需要 ~2^17 个顶点。我应该把我的网格分成多块吗？我可以使用 的其他子类`Buffer`作为 的第四个参数`GL10.glDrawElements`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:59:36.110

在 miniBill 评论之后进行大规模编辑！

事实上，OpenGL-ES 只支持`GL_UNSIGNED_BYTE`或`GL_UNSIGNED_SHORT`用于索引。最常用的是`GL_UNSIGNED_SHORT`允许 2^16-1 个顶点。其他类型仅由 OpenGL 支持。

~~您也可以使用`GL_INT`or`GL_UNSIGNED_INT`来表示索引，我想您可以将其存储在`java.nio.IntBuffer`.~~

看起来您需要拆分几何图形。

# c++ - 为什么要捕获访问冲突？

> ID：11109304
> 
> 赞同：3
> 
> 时间：2012-06-19T20:56:22.180
> 
> 标签：c++, error-handling, access-violation

与 C++ 异常不同，访问冲突表明您的应用程序运行时受到损害，因此您的应用程序的状态是未定义的。在这种情况下，最好的办法是退出您的应用程序（通常为您完成，因为它会崩溃）。

我注意到有可能捕获这些异常之一。例如，在 Microsoft Visual C++ 中，您可以使用`/EHa`或`__try/__catch`这样做。

那么，您想要抓住它们的原因是什么？据我了解，您的应用程序无法恢复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T20:58:58.667

您可以从访问冲突中恢复。

例如，您可以通过使用 分配一些地址空间来创建动态数组`VirtualAlloc`，但将其指向的内存标记为不存在。然后，当您尝试使用某些内存时，您会捕获访问冲突，映射发生访问的内存页面，然后重试导致冲突的指令。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T20:58:40.607

一个原因可能是编写故障转储文件；您将对其有更多的控制权，并能够编写您想要的确切类型。例如，在 Windows 中，您可以调用[MiniDumpWriteDump](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)来执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T21:25:37.183

在所有访问违规后，您的应用程序不能保证稳定。但它可以稳定或在一段时间后恢复，因此捕获访问冲突让您有机会：

1.  通知用户出现问题
2.  让用户尝试保存工作
3.  尝试恢复
4.  记录诊断信息
5.  以你想要的方式退出，而不是消失。

一个典型的例子是从插件中捕获异常的主机应用程序。这样主机应用程序（例如 Photoshop）可以告诉用户“插件 X 崩溃，Photoshop 不稳定……您应该保存您的工作，然后重新启动 Photoshop。”

请注意，这与 C++ 异常处理不同，后者根本不表示不可恢复的错误，而是更多的堆栈展开功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T20:59:09.497

我认为最好优雅地崩溃并让用户知道发生了什么，而不是让应用程序消失。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T21:24:53.003

如果您的应用程序出现访问冲突，您可能无法恢复，也可能无法恢复。如果您的应用程序处于未定义状态，例如，您破坏了您的堆栈，您就完成了。

从失控指针读取可能不会损坏您的应用程序，并且您可能可以从中恢复。

无论哪种方式，它正在发生的事实表明您的代码中存在错误，因此您应该捕获错误并转储您可以帮助您调试问题的状态，而不是尝试恢复。

# gmail - 通过 QuickTest Pro 在 Gmail 中使用快捷键

> ID：11109309
> 
> 赞同：0
> 
> 时间：2012-06-19T20:56:29.700
> 
> 标签：gmail, keyboard-shortcuts, qtp, browser-automation

当我在 QTP 中并自动执行 Gmail 会话时，很多页面都是动态的。我需要能够让我在任何 gmail UI 中使用键盘快捷键的代码行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:44:55.183

有几种方法可以从 QTP 模拟键盘动作，[本文](http://www.learnqtp.com/ways-to-send-keyboard-input-to-an-application-using-qtp-when-it-does-not-record-using-normal-recording/)介绍了其中的一些。特别是退房`DeviceReplay`。

从链接的帖子：

```
Set obj = CreateObject("Mercury.DeviceReplay")
Window("Notepad").Activate
obj.PressKey 63 
```

> **注意：** PressKey 方法使用适当的 ASCII 或 IBM 扫描代码值作为密钥。“63”是 的 IBM 扫描代码值`F5`。

# actionscript-3 - AS3 位图数据冲突检测

> ID：11109314
> 
> 赞同：0
> 
> 时间：2012-06-19T20:56:45.943
> 
> 标签：actionscript-3, bitmapdata

所以我正在开发一个 Flash 游戏，我使用位图数据来确定与地形的碰撞检测。这个想法是有两组地形图块，一组在顶部有实际地形，另一组更简单，只有几个基本颜色来确定碰撞。这样，如果英雄接触到“高度图”上的某种颜色，他的移动就会停止、减慢、受到伤害或被放大或缩小以显示高度的变化。为了做到这一点，我需要通过数组添加一大堆高度图图块，就像我添加图块本身一样。事实证明，通过 bitmapdata 执行此操作比我预期的要困难得多，并且在使用以下代码时我不断遇到错误。

这是我得到的错误：TypeError: Error #1010: A term is undefined and has no properties。

据我所知，它来自以下代码：

```
var bitmapData:BitmapData = new BitmapData(heightContainer.heightMapClip.width, heightContainer.heightMapClip.height); 
```

但我不知道我做错了什么。这是完整的代码，虽然我还没有接触到数组部分，只需要先让它工作，我真的很想自己尝试找出其余的部分：

```
var heightMapClip = new heightMap();
heightContainer.addChild(heightMapClip);
var heightData:String;
var hContainer:Sprite = new Sprite();
heightMapClip.x=-200;
heightMapClip.y=-200;
var bitmapData:BitmapData = new BitmapData(heightContainer.heightMapClip.width, heightContainer.heightMapClip.height);
bitmapData.draw(heightContainer.heightMapClip);
var myHeightMap:Bitmap = new Bitmap(bitmapData);

heightContainer.addChildAt(hContainer,0);
heightContainer.hContainer.addChild(myHeightMap);

heightContainer.hContainer.addEventListener(Event.ENTER_FRAME, onClick);
function onClick(e:Event):void
{
    var obj:Sprite = e.currentTarget as Sprite;
    var myHeightMap:Bitmap = Bitmap(obj.getChildAt(0));
    var pixelValue:uint = heightContainer.myHeightMap.bitmapData.getPixel(mouseX,mouseY);
    heightData=pixelValue.toString(16);
    if(heightData=="99ff00"){
        trace("Collision Detected");
    }
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:29:55.037

heightContainer.addChild(heightMapClip);

通过这样做，您不会将属性 heightMapClip 添加到 heightContainer

heightContainer.heightMapClip.width 这将产生错误

但这不会（只要它存在并且具有宽度属性:)）

heightMapClip.width

最好的问候 ps“意外解决”没有指定解决方案。写下您为回答问题所做的工作，以便其他人可以看到并从中学习。

# casting - Powershell Get-WebVirtualDirectory：指定的强制转换无效

> ID：11109321
> 
> 赞同：0
> 
> 时间：2012-06-19T20:57:21.493
> 
> 标签：casting, powershell-3.0

我已经将我的代码缩小到这个 -

```
Function Check-VirtualPhysicalPath{
Param([Parameter(Mandatory=$True)] [AllowEmptyString()][String]$Page)

 #This creates an arraylist of items that are our virtual/physical paths
 $WebVD= Get-WebVirtualDirectory
} 
```

当我在函数设置中运行此脚本时，“Get-WebVirtualDirectory”的结果返回一个转换错误。这让我感到困惑，因为当我尝试运行这条线时

```
 $WebVD= Get-WebVirtualDirectory 
```

在脚本中或仅在控制台上都没有返回错误，我可以访问变量并且数据是正确的。我究竟做错了什么？

现在作为旁注，这只是有问题的代码，所以我没有包括所有内容，但即使我将其他所有内容注释掉，我最终也会运行你在这里看到的问题，但问题是一样的。

我在一个单独的脚本中用这个调用代码

```
$page = [string]$(gc "C:\page.txt")

. C:\VP.ps1

$(Check-VirtualPhysicalPath($page)) 
```

Powershell 的反应就像我正在投射 $WebVD 变量一样，我不确定这是一个错误还是我完全遗漏了一些东西......

**编辑：**

看起来我忘了拉出那部分代码。我在爬代码，哈希表的重点是我在哈希表中存储资源的使用次数，键是文件名，值是使用次数，所以我使用常规表达式来确定。我的问题与我的其他代码无关，因为即使我的代码仅包含您在上面看到的内容，它也会出现问题。

# javascript - 当 SVG 超出浏览器窗口时添加滚动条

> ID：11109323
> 
> 赞同：1
> 
> 时间：2012-06-19T20:57:42.150
> 
> 标签：javascript, svg, embed

我在这里遇到了一个问题，即通过 embed 标签嵌入 html 中的 svg 元素。我刚刚得到了我的拖动来调整正在显示的图形的大小功能，但是当它的大小超出浏览器窗口的范围时，就会出现问题，因为没有显示滚动条。由于没有滚动条，图表会卡在屏幕外，因为拖动手柄位于右下角，并且不在屏幕上。我尝试将溢出设置为在嵌入元素、正文、html 以及它们的各种组合上滚动。我还尝试调整 svg 和 embed 元素的宽度，但也没有这样做。我也尝试将嵌入切换到对象标签，但这似乎也没有奏效。这是我的 .xhtml 页面样式

```
html, body { margin:0; padding:0}
embed {  overflow:scroll; position: absolute; width: 100%; height: 100%; background-color: #AAAAAA} 
```

这是其文件中的 svg 元素定义

```
<svg xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns:ev="http://www.w3.org/2001/xml-events" version="1.1" baseProfile="full"
preserveAspectRatio="xMinYMin meet"
viewBox="0 0 1024 768" width="1024px" height="768px" 
onload="Initialize(evt)"> 
```

调整大小也是通过更改 scale 属性来完成的，而不是更改宽度和高度。这是该页面的链接，因此您可以更好地了解问题（红色三角形是缩放手柄）：[http](http://reu.dimacs.rutgers.edu/~scottm/SVG/Bellman.xhtml) ://reu.dimacs.rutgers.edu/~scottm/SVG/Bellman.xhtml 。由 Derek 提供的小提琴：http: [//jsfiddle.net/DerekL/Cw9Dx/](http://jsfiddle.net/DerekL/Cw9Dx/)。当 svg 超出窗口大小时添加滚动条的任何帮助将不胜感激。提前致谢！

# c# - 在 MVC3 应用程序中使用 FluentValidation 的错误消息

> ID：11109324
> 
> 赞同：0
> 
> 时间：2012-06-19T20:57:43.007
> 
> 标签：c#, asp.net, asp.net-mvc-3, visual-studio-2010, fluentvalidation

我正在 Visual Studio 2010 中创建一个 asp.net mvc 3 应用程序。我试图为我的模型使用 FluentValidation。我使用 NuGet 安装了包（FluentValidation、FluentValidationMVC3）。我的模型如下（为本论坛简化）：

```
public class ActivityLine : AbstractValidator<ActivityLine>
{
    [Key]
    [Required]
    public int ActivityLineId { get; set; }

    public virtual ICollection<TimeModel> TimeModels { get; set; }
}

public class ActivityLineValidator : AbstractValidator<ActivityLine>
{
    public ActivityLineValidator()
    {
        RuleFor(x => x.TimeModels).SetCollectionValidator(new TimeModelValidator());
    }
}

[Validator(typeof(TimeModelValidator))]
public class TimeModel
{
    [Key]
    public int TimeModelId { get; set; }
    [Required]
    public int ActivityLineId { get; set; }
    [Required]
    public int LineNumber { get; set; }
    public int startHours { get; set; }
    public int startMinutes { get; set; }
    public int endHours { get; set; }
    public int endMinutes { get; set; }

    public virtual ActivityLine ActivityLine { get; set; }

    [NotMapped]
    public TimeSpan StartTime
    {
        get { return new TimeSpan(startHours, startMinutes, 0); }
        set { startHours = value.Hours; startMinutes = value.Minutes; }
    }
    [NotMapped]
    public TimeSpan EndTime 
    {
        get { return new TimeSpan(endHours, endMinutes, 0); }
        set { endHours = value.Hours; endMinutes = value.Minutes; } 
    }
}

public class TimeModelValidator : AbstractValidator<TimeModel>
{
    public TimeModelValidator()
    {
        RuleFor(timemodel => timemodel.endHours)
           .GreaterThan(timemodel => timemodel.startHours)
           .WithMessage("Start Time Must be before End Time");
    }
} 
```

在我的控制器中：

```
[HttpPost]
public ActionResult Create(ActivityLine model)
{
    if (ModelState.IsValid)
    {
        personnel.ActivityLines.Add(model);
        personnel.SaveChanges();
        return RedirectToAction("Index");
    }
    //Model State Not Valid Redisplay Form
    return View(model);
} 
```

即使我为 TimeModel 和实例分配无效值，ModelState 也始终为真。然后，该项目在遇到 person.SaveChagnes() 行时会发生炸弹。我收到“无可用来源”错误。详情如下：

```
Locating source for 'c:\Projects\FluentValidation\src\FluentValidation\Attributes\ValidatorAttribute.cs'. Checksum: MD5 {e3 d4 90 62 70 f7 a6 4e 9e ac 62 71 77 21 64 dd} 
```

文件 'c:\Projects\FluentValidation\src\FluentValidation\Attributes\ValidatorAttribute.cs' 不存在。在脚本文档中查找“c:\Projects\FluentValidation\src\FluentValidation\Attributes\ValidatorAttribute.cs”...在项目中查找“c:\Projects\FluentValidation\src\FluentValidation\Attributes\ValidatorAttribute.cs”。在项目中找不到该文件。查看目录'C:\Program Files\Microsoft Visual Studio 10.0\VC\crt\src\'... 查看目录'C:\Program Files\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfc\'。 .. 查看目录 'C:\Program Files\Microsoft Visual Studio 10.0\VC\atlmfc\src\atl\'... 查看目录 'C:\Program Files\Microsoft Visual Studio 10.0\VC\atlmfc\include\ '... 活动解决方案的调试源文件设置表明调试器不会要求用户查找文件：c:\Projects\FluentValidation\src\FluentValidation\Attributes\ValidatorAttribute.cs。调试器找不到源文件 'c:\Projects\FluentValidation\src\FluentValidation\Attributes\ValidatorAttribute.cs'。

我认为我的配置有问题，但我不知道是什么。使用 Fluent 的人有没有遇到过这个问题？我需要做什么来解决它？如果有影响，我的项目位于网络共享上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:13:32.520

您的 ActivityLine 域模型不应派生自 AbstractValidator。它应该用 Validator 属性装饰，就像你对`TimeModel`:

```
[Validator(typeof(ActivityLineValidator))]
public class ActivityLine
{
    [Key]
    [Required]
    public int ActivityLineId { get; set; }

    public virtual ICollection<TimeModel> TimeModels { get; set; }
}

public class ActivityLineValidator : AbstractValidator<ActivityLine>
{
    public ActivityLineValidator()
    {
        RuleFor(x => x.TimeModels).SetCollectionValidator(new TimeModelValidator());
    }
} 
```

还要确保您有以下行`Application_Start`来启用 FluentValidation 元数据提供程序，如[文档](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)中所述：

```
FluentValidationModelValidatorProvider.Configure(); 
```

就`personnel.SaveChagnes()`在线上的轰炸而言，这与 ASP.NET MVC 和 FluentValidation.NET 都没有任何关系。我想这是您使用的数据访问技术遇到的问题。

# .htaccess - 复杂的 htaccess 重写

> ID：11109330
> 
> 赞同：0
> 
> 时间：2012-06-19T20:57:57.813
> 
> 标签：.htaccess

在为我们的新网站使用 wordpress 之前，我们使用以下网址...

```
http://www.domain.com/web-services
http://www.domain.com/seo-services  (about 100 urls) 
```

现在新的网址将是

```
http://www.domain.com/np/web-services 
```

所以我们想301将所有旧页面重定向到新页面，我们可以简单地使用下面的htaccess代码......

```
Redirect 301 /web-services http://www.domain.com/np/web-services 
```

但这会使 htaccess 文件太大，所以有没有办法将所有页面重定向到新页面。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T06:35:41.373

你可以重写你的域名，就像你的域名在 abc.com 上打开一样，然后你可以用 www.abc.com 永久重定向它。通过这样做，您可以确保当谷歌蜘蛛访问您的网站时，它可以轻松找到您的网站。它还有助于增加您网站上的更多流量。如果您有一个商业网站，那么您可以使用洛杉矶一家公司的 SEO 服务，通过芝加哥最佳 SEO 公司的评论。因为这些有助于始终将您的业务增长推向顶峰。出处：[http](http://www.bestseocompanyreviewss.com) ://www.bestseocompanyreviewss.com 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:02:55.623

在你的 apache 服务器上启用 mod_rewrite，然后把它放在你的 .htaccess 文件中：

```
RewriteEngine On
RewriteRule ^/web-services/(.*)$ /np/web-services/$1 [R=301,L]
RewriteRule ^/seo-services/(.*)$ /np/web-services/$1 [R=301,L] 
```

任何以 /web-services 或 /seo-services 开头的 url 都将被重定向到 /np/web-services。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:03:14.077

或者，您可以使用 mod_alias' `RedirectMatch`：

```
RedirectMatch 301 ^/([^\-]+)-([^/]+)/?(.*)?$ /np/$1-$2/$3 
```

因此，任何以开头的请求`/web-services/`都将被重定向`/np`并附加到前面：

```
http://www.example.com/web-services/test1 -> http://www.example.com/np/web-services/test1
http://www.example.com/web-services/test/test2 -> http://www.example.com/np/web-services/test/test2 
```

seo 服务或 XXX-XXX 的任何东西也是如此。

* * *

编辑：

> 如果我尝试`RedirectMatch 301 ^/([^\-]+)-([^/]+)-([^/]+) /np/$1-$2-$3/`其棘手的重定向错误

尝试：

```
RedirectMatch 301 ^/([^/\-]+)-([^/\-]+)-([^/]+) /np/$1-$2-$3/ 
```

因为`/np/`正在被匹配`^/([^\-]+)`

# jquery - 扩展本机 focus() 事件以运行检查，但仅在未传递匿名函数时

> ID：11109333
> 
> 赞同：0
> 
> 时间：2012-06-19T20:58:02.820
> 
> 标签：jquery, events, jquery-events, modernizr

在一个站点上工作，该站点具有多个`focus()`事件，这些事件分布在可能有十几个 js 文件中，这些文件都处理将焦点放在页面上的第一个文本输入上（即：在登录页面上，电子邮件字段会自动获得焦点）。我想为所有触摸设备禁用此功能。

我们已经在使用 Modernizr，所以我可以只检查`.no-touch`HTML 标签上的类，看看用户是否在触摸设备上。但是，为了避免重复代码并进行未来证明（因此我们不必记住每次添加新焦点事件时都要检查），我只想扩展本机焦点事件以检查`.no-touch`类并且仅在该类存在时继续。

我将如何扩展本机`focus()`事件，以便它检查`.no-touch`类的 HTML 标记并在它存在时继续，但仅在未将匿名函数传递给`focus()`事件时运行此检查？

例如，有时我们将焦点与匿名函数一起使用，而我不需要检查`.no-touch`，如下所示：

```
$("#login-email-address").focus(function(){ ... }); 
```

有道理？如果没有，请告诉我如何澄清...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:54:53.817

像这样的东西

```
(function($,M){
    var nFocus = $.fn.focus;
    $.fn.focus = function(f){
        if(M.touch && !f)return this;
        return nFocus.apply(this,arguments);
    }
})(jQuery, Modernizer); 
```

# javascript - KnockoutJS：用户复制'n'粘贴到文本字段后如何更新视图模型？

> ID：11109339
> 
> 赞同：22
> 
> 时间：2012-06-19T20:58:32.320
> 
> 标签：javascript, html, knockout.js

我正在开发一个网站，该网站在用户在输入文本框中输入一些文本后自动在表格中填充搜索结果（类似于谷歌即时搜索）。

当用户通过添加输入信息时，我设法让淘汰赛 js 更新视图模型

`valueUpdate: 'afterkeydown'`

但是，在我的数据绑定属性中，我还需要处理用户右键单击并将一些文本粘贴到文本框中的情况，所以我尝试了：

`valueUpdate: ['afterkeydown','mouseup']`

但这没有用，当我尝试通过视图模型读取文本框的值时，**我一直在获取旧值，直到我从输入文本框中跳出**。

任何人都知道我该如何解决这个问题？

奥斯卡

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T21:15:56.863

您可以使用 valueUpdate:'input'。我已经测试它可以在 Opera、Firefox 和 Chrome 中工作。我在 Linux 机器上，所以我无法在 IE 中测试它。[检查这个小提琴](http://jsfiddle.net/uJCQq/4/)

更新：我现在在 IE8 中测试了它，但它不起作用。但使用以下似乎有效。

```
valueUpdate:['afterkeydown','propertychange','input'] 
```

感谢 Michael Best 对此的评论 :) 我已经更新[了小提琴](http://jsfiddle.net/uJCQq/4/)

2014 年更新：正如 kzh 在下面的评论中提到的，在 Knockout.js 的更高版本之一中添加了 textInput 绑定。此绑定处理这种情况并内置浏览器怪癖处理 [http://knockoutjs.com/documentation/textinput-binding.html](http://knockoutjs.com/documentation/textinput-binding.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-13T15:03:54.297

## 新方法

代替：

```
data-bind="value: myValue, valueUpdate: ['input', 'textchange']" 
```

现在可以使用[textInput 绑定](http://knockoutjs.com/documentation/textinput-binding.html)：

```
data-bind="textInput: myValue" 
```

从文档中：

> `textInput`绑定将文本框 ( )`<input>`或文本区域 ( `<textarea>`) 与 viewmodel 属性链接起来，在 viewmodel 属性和元素值之间提供双向更新。与`value`绑定不同，`textInput`它为所有类型的用户输入提供来自 DOM 的即时更新，包括自动完成、拖放和剪贴板事件。

## 老路

```
valueUpdate: ['afterkeydown','propertychange','input'] 
```

`RightMouseClick`如果您想支持→`Delete`或`RightMouseClick`→ ，则在 IE9 中不起作用`Cut`。

我想出的解决方案涉及使用 jQuery 和一个名为[jQuery Splendid Textchange](http://benalpert.com/2013/06/18/a-near-perfect-oninput-shim-for-ie-8-and-9.html)的 jQuery 插件。在你加载了 jQuery 和插件脚本之后，你就可以愉快地使用 'textchange' 事件了。

```
valueUpdate: 'textchange' 
```

但是，有一天我可能会停止支持坏浏览器，所以我有这个：

```
valueUpdate: ['input', 'textchange'] 
```

这是我为测试此事件和其他事件而制作的小提琴：http: [//jsfiddle.net/kaleb/w3ErR/](http://jsfiddle.net/kaleb/w3ErR/)

注意如果您使用的是 requirejs，jquery 可能必须是敲除的硬依赖才能使其始终正常工作。

# scala - Scala 中的 Comonad 示例

> ID：11109342
> 
> 赞同：21
> 
> 时间：2012-06-19T20:58:36.737
> 
> 标签：scala, monads, scalaz, comonad

什么是 Comonad，如果可以用 Scala 语法描述的话。我找到[了 scalaz](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/Comonad.scala.html)库实现，但不清楚它在哪里有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T23:04:33.887

好吧，monad 允许您向它们添加值，根据计算将它们从非 monad 更改为 monad。Comonads 允许您从中提取值，并根据计算将它们从comonad 更改为非comonad。

自然的直觉是，它们通常会出现在您有 CM[A] 并想要提取 A 的地方。

看到[这个](http://etorreborre.blogspot.com.au/2012/06/strong-functional-programming.html)非常有趣的帖子，它有点随意地触及了共生词，但是，至少对我来说，让它们非常清楚。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T22:13:32.253

以下是[此](http://blog.sigfpe.com/2006/12/evaluating-cellular-automata-is.html)博客文章中代码的字面翻译。

```
case class U[X](left: Stream[X], center: X, right: Stream[X]) {
  def shiftRight = this match {
    case U(a, b, c #:: cs) => U(b #:: a, c, cs)
  }

  def shiftLeft = this match {
    case U(a #:: as, b, c) => U(as, a, b #:: c)
  }
}

// Not necessary, as Comonad also has fmap.
/*
implicit object uFunctor extends Functor[U] {
  def fmap[A, B](x: U[A], f: A => B): U[B] = U(x.left.map(f), f(x.center), x.right.map(f))
}
*/

implicit object uComonad extends Comonad[U] {
  def copure[A](u: U[A]): A = u.center
  def cojoin[A](a: U[A]): U[U[A]] = U(Stream.iterate(a)(_.shiftLeft).tail, a, Stream.iterate(a)(_.shiftRight).tail)
  def fmap[A, B](x: U[A], f: A => B): U[B] = U(x.left.map(f), x.center |> f, x.right.map(f))
}

def rule(u: U[Boolean]) = u match {
  case U(a #:: _, b, c #:: _) => !(a && b && !c || (a == b))
}

def shift[A](i: Int, u: U[A]) = {
  Stream.iterate(u)(x => if (i < 0) x.shiftLeft else x.shiftRight).apply(i.abs)
}

def half[A](u: U[A]) = u match {
  case U(_, b, c) => Stream(b) ++ c
}

def toList[A](i: Int, j: Int, u: U[A]) = half(shift(i, u)).take(j - i)

val u = U(Stream continually false, true, Stream continually false)

val s = Stream.iterate(u)(_ =>> rule)

val s0 = s.map(r => toList(-20, 20, r).map(x => if(x) '#' else ' '))

val s1 = s.map(r => toList(-20, 20, r).map(x => if(x) '#' else ' ').mkString("|")).take(20).force.mkString("\n")

println(s1) 
```

输出：

```
 | | | | | | | | | | | | | | | | | | | |#| | | | | | | | | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#|#| | | | | | | | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#| |#| | | | | | | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#|#|#|#| | | | | | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#| | | |#| | | | | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#|#| | |#|#| | | | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#| |#| |#| |#| | | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#|#|#|#|#|#|#|#| | | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#| | | | | | | |#| | | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#|#| | | | | | |#|#| | | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#| |#| | | | | |#| |#| | | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#|#|#|#| | | | |#|#|#|#| | | | | | | |
 | | | | | | | | | | | | | | | | | | | |#| | | |#| | | |#| | | |#| | | | | | |
 | | | | | | | | | | | | | | | | | | | |#|#| | |#|#| | |#|#| | |#|#| | | | | |
 | | | | | | | | | | | | | | | | | | | |#| |#| |#| |#| |#| |#| |#| |#| | | | |
 | | | | | | | | | | | | | | | | | | | |#|#|#|#|#|#|#|#|#|#|#|#|#|#|#|#| | | |
 | | | | | | | | | | | | | | | | | | | |#| | | | | | | | | | | | | | | |#| | |
 | | | | | | | | | | | | | | | | | | | |#|#| | | | | | | | | | | | | | |#|#| |
 | | | | | | | | | | | | | | | | | | | |#| |#| | | | | | | | | | | | | |#| |#|
 | | | | | | | | | | | | | | | | | | | |#|#|#|#| | | | | | | | | | | | |#|#|#|# 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-11T13:29:57.960

scalaz[库](https://github.com/scalaz/scalaz)提供了一个[`ComonadStore`](https://github.com/scalaz/scalaz/blob/series/7.3.x/core/src/main/scala/scalaz/ComonadStore.scala)扩展`Comonad`. 它是这样定义的：

```
trait ComonadStore[F[_], S] extends Comonad[F] { self =>

  def pos[A](w: F[A]): S
  def peek[A](s: S, w: F[A]): A

  def peeks[A](s: S => S, w: F[A]): A =
    peek(s(pos(w)), w)

  def seek[A](s: S, w: F[A]): F[A] =
    peek(s, cojoin(w))

  def seeks[A](s: S => S, w: F[A]): F[A] =
    peeks(s, cojoin(w))

  def experiment[G[_], A](s: S => G[S], w: F[A])(implicit FG: Functor[G]): G[A] =
    FG.map(s(pos(w)))(peek(_, w))

} 
```

并且 a [`Store`](https://github.com/scalaz/scalaz/blob/7e64f43872fc944b54a63e4262acaea2248f50c8/core/src/main/scala/scalaz/package.scala#L197)（类似于`(S => A, S)`）具有 的实例`Comonad`。你可以看看这个[问题](https://stackoverflow.com/questions/50888056/what-is-store-in-scalaz)，它更具体地解释了它的含义。

你也有`Coreader`and`Cowriter` `Comonads`是 and 的对偶`Reader`，`Writer` `Monads`这里有一篇很棒的[博客](http://blog.higher-order.com/blog/2015/06/23/a-scala-comonad-tutorial/)文章，在 Scala 中讨论了它。

# php - 如何使用 php 生成 css、js 和 html 文件？

> ID：11109344
> 
> 赞同：-3
> 
> 时间：2012-06-19T20:58:37.110
> 
> 标签：php, javascript, html, css

我将如何生成以下所有类型的文件：

.js .css .html

我还需要能够读取文件并以某种方式覆盖它。

这有可能吗？

所有这些文件都只是具有不同文件扩展名的文本文件，所以如果我可以制作一个文本文件并更改文件扩展名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:27:14.800

由于所有这些都是简单的文本文件，您需要做的就是创建/打开具有所需名称的文件并将文本写入其中。

查看一些 PHP 文件 IO 命令：

*   [fopen()](http://php.net/manual/en/function.fopen.php)
*   [fread()](http://www.php.net/manual/en/function.fread.php)
*   [fwrite()](http://www.php.net/manual/en/function.fwrite.php)
*   [关闭（）](http://www.php.net/manual/en/function.fclose.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:16:06.587

PHP 通常（经常？）用作模板语言，其中 HTML“文件”“即时”生成并直接输出到浏览器。

我可能是错的，但听起来你在谈论生成文件并将它们保存到磁盘以便稍后静态地提供给浏览器。如果是这种情况，你是对的——它们只是文本文件——所以将它们写成具有相关文件扩展名的文本文件应该可以工作。

不过，随着站点的扩展，这似乎在逻辑上会很复杂。另外 - 如果您正在创建一个 Web 界面来编辑服务器上的文件，而一些 CMS-es 这样做（例如 Wordpress），它确实带来了很多安全问题（允许 PHP 不受限制地对您的服务器进行写访问是很少有好的举动）。

# javascript - 为什么我不能将 for 循环分配给变量？

> ID：11109346
> 
> 赞同：0
> 
> 时间：2012-06-19T20:58:42.787
> 
> 标签：javascript

所以我只是想知道为什么下面的代码不起作用。我正在寻找一种类似的策略来将 for 循环放入变量中。

```
var whatever = for (i=1;i<6;i++) {
console.log(i)
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:59:57.327

因为`for`循环是一个**语句**，并且在 JavaScript 语句中没有值。它根本不是语言的语法和语义中提供的东西。

在某些语言中，每条语句都被视为一个表达式（例如 Erlang）。在其他情况下，情况并非如此。JavaScript 属于后一类。

这有点像问为什么马有长长的尾巴而没有翅膀。

*编辑*——查看诸如 Underscore 库或 Array 原型的“现代”附加组件，以实现“map”、“reduce”和“forEach”功能。这些允许在表达式评估上下文中进行迭代操作（当然是有代价的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:03:33.160

我想你要找的是**功能**：

```
var whatever = function(min, max) {
  for (var i = min; i < max;  ++i) {
    console.log(i);
  }
} 
```

... 然后 ...

```
whatever(1, 6); 
```

这种方法允许您将循环（或任何其他代码，甚至声明另一个函数）*封装*在一个变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:01:23.160

您的问题是 for 循环不返回值。您可以构造一个包含足够元素的数组来保存循环的所有迭代，然后在循环中分配给它：

```
arry[j++] = i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:11:00.947

您可以这样做，但似乎您可能想要检查匿名函数。使用匿名函数，您可以这样做：

```
var whatever = function(){
 for (var i=1;i<6;i++) {
  console.log(i);
 }
}; 
```

接着

```
whatever(); //runs console.log(i) i times. 
```

# css - 如何在调整窗口大小时避免裁剪 SVG

> ID：11109348
> 
> 赞同：0
> 
> 时间：2012-06-19T20:58:48.577
> 
> 标签：css, svg

有没有办法使图像的 SVG 版本不会在窗口调整大小时被裁剪？

您可以尝试在此处调整窗口大小：

[http://demosthenes.info/blog/532/Convert-Images-To-Black--White-With-CSS](http://demosthenes.info/blog/532/Convert-Images-To-Black--White-With-CSS)

或者

[http://www.read-design.co.uk/css3-grey-scale-image-filters/](http://www.read-design.co.uk/css3-grey-scale-image-filters/)

请注意，当窗口较小时，图像的灰度版本与颜色版本的大小不同，即 SVG 在较小的窗口上被裁剪。

但是那些使用 JS 的人似乎可以很好地扩展：http: [//james.padolsey.com/demos/grayscale/](http://james.padolsey.com/demos/grayscale/)

不幸的是，只要有可能，我都会尽量避免使用 JS，而更喜欢带有一些 CSS 的更简单的 SVG 文件。

我正在尝试消化： [https ://developer.mozilla.org/en/CSS/Scaling_of_SVG_backgrounds](https://developer.mozilla.org/en/CSS/Scaling_of_SVG_backgrounds)

但这不是我需要的。

我需要两种图像状态：此处讨论的颜色和灰度，如果可能的话，只希望 SVG 正确缩放： [Convert an image to grayscale in HTML/CSS](https://stackoverflow.com/questions/609273/convert-an-image-to-grayscale-in-html-css)

但不幸的是，灰度被裁剪，没有正确缩放。

我尝试添加“vector-effect =“non-scaling-stroke”，但没有用。

有人知道这个问题的解决方案吗？

谢谢

更新：我想我只是正确地注意到了我自己的问题。这与 SVG 版本变小无关，而是 SVG 版本在调整大小时被裁剪。我还必须更新我上面的整个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:49:06.940

该问题仅在通过按 Ctrl + 鼠标滚动调整大小时发生。我不认为这是一个问题，除非有人提出任何建议。

# php - HTML 格式的电子邮件无法正确显示

> ID：11109349
> 
> 赞同：2
> 
> 时间：2012-06-19T20:58:51.447
> 
> 标签：php

我仍在为这个邮件脚本而苦苦挣扎 - 我现在正在通过所有标记的 html 而不是将其视为呈现的 html，如果这有意义的话？

```
<?php
$mailheader .= "MIME-Version: 1.0\r\n";
$mailHeader .= "Content-type: text/html; charset=iso-8859-1\r\n";
$formcontent .="<table border='1'>";
foreach ($_POST as $field=>$value)
{
    $formcontent.="<tr>";
    $formcontent .= "<td>$field:</td> <td>$value</td>";
    $formcontent.="</tr>";
}
$formcontent .= '<tr><td>User-Agent: </td><td>'.$_SERVER['HTTP_USER_AGENT'].'</td>';
$formcontent .="</table>";

$recipient = "info@*******.com";
$subject = "Event feedback form";
$mailheader = "From: web.form@*******-events.co.uk\r\n";
$mailheader .= "Reply-To: $email\r\n";
$mailHeader .= "Content-type: text/html; charset=iso-8859-1\r\n";

mail($recipient, $subject, $formcontent, $mailheader) or die("Failure!");
header("location:http://www.******-events.co.uk");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:04:32.363

遵循 php 的文档：

你需要html标签

```
 <?php
// multiple recipients
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = 'Birthday Reminders for August';

// message
$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
      <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
    </tr>
    <tr>
      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:04:02.897

我宁愿使用 PHP 类作为 HTML 电子邮件的 PHPMailer。顺便说一句，我将为邮件正文添加完整的 HTML 文档标签（html、head、body 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:08:47.820

我错过了这些：

```
$formcontent = '<html><body>'; 
```

感谢大家的时间和投入，虽然吉姆

# ios - 在工具栏中调用操作表的右键

> ID：11109353
> 
> 赞同：1
> 
> 时间：2012-06-19T20:59:02.773
> 
> 标签：ios, xcode

根据我的问题的主题，我已经从导航栏很好地调用了我的操作表函数，但是我有一个视图，上面有简单的工具栏。我想重用我的操作表功能并在其上也有按钮。那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:06:10.850

我不确定我是否真的理解您的要求，但是在工具栏上调用操作表是这样的：

```
 [actionSheet showFromToolBar:self.toolBarController.toolbar]; 
```

# android - 每第 9 行被选中

> ID：11109357
> 
> 赞同：-1
> 
> 时间：2012-06-19T20:59:09.790
> 
> 标签：android, list, checkbox, backup, row

我正在开发一个应用程序备份应用程序，我想制作它只备份我通过复选框选择的那些应用程序。我已经在列表中实现了复选框，但是当我在它之前和之后每第 9 行检查一行时，它也会被选中：S

PS。我也很感激有人可以帮助我了解如何制作，以便应用程序备份也可以工作:)

（这只是完整java文件的一部分）

```
private static class AppViewHolder {
    TextView top_view;
    TextView bottom_view;
    ImageView icon;
    CheckBox check_mark;
    //@SuppressWarnings("unused")
}

private class TableView extends ArrayAdapter<ApplicationInfo> {

    private TableView() {
        super(main.this, R.layout.tablerow_02, mAppList);
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        AppViewHolder holder;
        ApplicationInfo info = mAppList.get(position);

        if(convertView == null) {
            LayoutInflater inflater = getLayoutInflater();
            convertView = inflater.inflate(R.layout.tablerow_02, parent, false);

            holder = new AppViewHolder();
            holder.top_view = (TextView)convertView.findViewById(R.id.top_view);
            holder.bottom_view = (TextView)convertView.findViewById(R.id.bottom_view);

            holder.check_mark = (CheckBox)convertView.findViewById(R.id.checkBox1);

            holder.icon = (ImageView)convertView.findViewById(R.id.row_image);
            holder.icon.setMaxHeight(40);
            convertView.setTag(holder);

        } else {
            holder = (AppViewHolder) convertView.getTag();
        }

        holder.check_mark.setOnCheckedChangeListener(new OnCheckedChangeListener(){
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                if ( isChecked )
                {
                    Toast.makeText(getApplicationContext(), "#" + position + " is checked", Toast.LENGTH_LONG).show();
                }
                else{
                    Toast.makeText(getApplicationContext(), "#" + position + " is unchecked", Toast.LENGTH_LONG).show();
                }

            }
        });

        holder.top_view.setText(info.loadLabel(getPackageManager()));
        holder.bottom_view.setText(info.packageName);

        //this should not throw the exception
        try {
            holder.icon.setImageDrawable(mPackMag.getApplicationIcon(info.packageName));
        } catch (NameNotFoundException e) {
            holder.icon.setImageResource(R.drawable.ic_launcher);
        }

        return convertView;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:02:10.697

这是因为您没有正确回收视图。您应该保留一个布尔数组，列表中的每个项目一个。然后，`getView`您需要`setChecked`根据`holder.check_mark`该布尔值列表中的值调用。

# css - 如何将 css :hover 状态更改为单击事件？

> ID：11109362
> 
> 赞同：3
> 
> 时间：2012-06-19T20:59:35.940
> 
> 标签：css

我按照[链接](http://www.dynamicdrive.com/style/csslibrary/item/css-image-gallery/#thumb)中的详细信息创建图片库。
这种方法对我来说很好。

我想将鼠标`hover`事件更改为一个`click`事件，以便在单击缩略图（而不是悬停）时，其在大区域中打开图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:15:22.537

像这样的东西：

[http://jsfiddle.net/VfNdE/61/](http://jsfiddle.net/VfNdE/61/)

旧的悬停类成为焦点：

```
.thumbnail:focus{
   background-color: transparent;
   outline:none;
}

.thumbnail:focus img{
   border: 1px solid blue;
} 
```

旧的 html 只是为每个锚点添加了 tabindex，如下所示：

```
<a class="thumbnail" href="#thumb" tabindex="1"> 
```

# visual-studio-2010 - 锁定在内存中的 Visual Studio 调试程序

> ID：11109363
> 
> 赞同：0
> 
> 时间：2012-06-19T20:59:39.137
> 
> 标签：visual-studio-2010, debugging

当我调试我的程序并发生错误时，调试会话结束，但程序仍保留在内存中。使用 Windows 的活动管理器关闭它不起作用。我需要关闭 Visual Studio 才能终止该进程。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:56:37.860

当调试过程中出现程序错误时，程序通常不会“结束”。相反，调试器 (VS2010) 会暂停执行，允许您检查导致错误的代码。根据使用的语言（例如 C#）和编译程序的方式，您甚至可以即时编辑程序，将执行光标向后移动一点，然后从那里继续执行程序。

如果 Debug 工具栏可见（在我的情况下，它会在我调试时自动显示），您应该会看到几个“播放”按钮，允许您开始/继续、暂停、停止程序等。如果您停止程序，它也会从任务管理器中消失。

正如我在对您的问题的评论中提到的，您还可以使用“调试”菜单来完成这些任务。

# bash - gnuplot 用于文件名中的循环和空格

> ID：11109365
> 
> 赞同：4
> 
> 时间：2012-06-19T20:59:41.617
> 
> 标签：bash, filenames, gnuplot

我在 bash 中有一个小脚本，它通过 gnuplot 生成图表。一切正常，直到输入文件的名称包含空格。

这是我所拥有的：

```
INPUTFILES=("data1.txt" "data2 with spaces.txt" "data3.txt")

...

#MAXROWS is set earlier, not relevant.

for LINE in $( seq 0 $(( MAXROWS - 1 )) );do

gnuplot << EOF
reset
set terminal png
set output "out/graf_${LINE}.png"

filenames="${INPUTFILES[@]}"

set multiplot 

plot for [file in filenames] file every ::0::${LINE} using 1:2 with line title "graf_${LINE}"

unset multiplot
EOF
done 
```

此代码有效，但仅在输入文件的名称中没有空格。

在示例 gnuplot 中对此进行评估：

```
1 iteration: file=data1.txt  - CORRECT
2 iteration: file=data2  - INCORRECT
3 iteration: file=with  - INCORRECT
4 iteration: file=spaces.txt  - INCORRECT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:48:54.737

快速的回答是，你不能完全按照你想做的事情去做。Gnuplot 在空间的迭代中拆分字符串，并且没有办法解决这个问题（AFIK）。根据您的需要，可能会有“解决方法”。您可以在 gnuplot 中编写一个（递归）函数来用另一个字符串替换一个字符串——

```
#S,C & R stand for STRING, CHARS and REPLACEMENT to help this be a little more legible.
replace(S,C,R)=(strstrt(S,C)) ? \
    replace( S[:strstrt(S,C)-1].R.S[strstrt(S,C)+strlen(C):] ,C,R) : S 
```

奖金指向任何能够弄清楚如何在没有递归的情况下做到这一点的人......

然后你的（bash）循环看起来像：

```
INPUTFILES_BEFORE=("data1.txt" "data2 with spaces.txt" "data3.txt")
INPUTFILES=()
#C style loop to avoid changing IFS -- Sorry SO doesn't like the #...
#This loop pre-processes files and changes spaces to '#_#'
for (( i=0; i < ${#INPUTFILES_BEFORE[@]}; i++)); do 
    FILE=${INPUTFILES_BEFORE[${i}]}
    INPUTFILES+=( "`echo ${FILE} | sed -e 's/ /#_#/g'`" ) #replace ' ' with '#_#'
done 
```

它预处理您的输入文件以将“#_#”添加到其中包含空格的文件名......最后，“完整”脚本：

```
...

INPUTFILES_BEFORE=("data1.txt" "data2 with spaces.txt" "data3.txt")
INPUTFILES=()
for (( i=0; i < ${#INPUTFILES_BEFORE[@]}; i++)); do 
    FILE=${INPUTFILES_BEFORE[${i}]}
    INPUTFILES+=( "`echo ${FILE} | sed -e 's/ /#_#/g'`" ) #replace ' ' with '#_#'
done

for LINE in $( seq 0 $(( MAXROWS - 1 )) );do
gnuplot <<EOF
filenames="${INPUTFILES[@]}"
replace(S,C,R)=(strstrt(S,C)) ? \
        replace( S[:strstrt(S,C)-1].R.S[strstrt(S,C)+strlen(C):] , C ,R) : S
#replace '#_#' with ' ' in filenames.
plot for [file in filenames] replace(file,'#_#',' ') every ::0::${LINE} using 1:2 with line title "graf_${LINE}"

EOF
done 
```

但是，我认为这里的要点是您不应该在文件名中使用空格；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:05:27.483

逃离空间：

```
"data2\ with\ spaces.txt" 
```

**编辑**

似乎即使使用转义序列，正如您所提到的，bash`for`总是会解析空格上的输入。

你能把你的脚本转换成`while`循环方式工作吗：

[http://ubuntuforums.org/showthread.php?t=83424](http://ubuntuforums.org/showthread.php?t=83424)

这也可能是一个解决方案，但它对我来说是新的，我仍在使用它来了解它在做什么：

[http://www.cyberciti.biz/tips/handling-filenames-with-spaces-in-bash.html](http://www.cyberciti.biz/tips/handling-filenames-with-spaces-in-bash.html)

# c++ - 不同类型操作数的赋值运算符

> ID：11109380
> 
> 赞同：-2
> 
> 时间：2012-06-19T21:01:13.007
> 
> 标签：c++, assignment-operator

赋值运算符 ( `=`) 是否必须始终将右值复制到左值中，还是完全取决于它所操作的操作数的类型？抱歉，如果这很愚蠢，但无论我读到什么，都写着它只是将右侧的值复制到左侧。我想弄清我的事实。

请举一个C++的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:04:07.607

它实际上完全取决于您如何实现赋值运算符和类的组成......在 C++ 中，POD 类或结构的默认编译器创建的赋值运算符方法将简单地逐位复制 RHS对象到 LHS 对象中，但是用户定义的赋值运算符可以做任何你想做的事情。它总是属于 LHS 对象，但它不需要做任何复制，或者如果你愿意，它可能会产生任何数量的副作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:06:11.897

您可以随意重载赋值运算符，但 C++ 中的通常实现是这样的：

```
class MyObject
{
public:
    MyObject& operator=(const MyObject& rhs)
    {
        if (this != &rhs)
            x = rhs.x;
        return *this;
    }

private:
    int x;
}; 
```

这样做的原因是允许自定义对象的简单分配。由于用户定义的类和结构可能很复杂，因此有时您需要提供自定义赋值运算符来执行诸如指针成员的深拷贝之类的操作。

```
MyObject a;
MyObject b;
b = a; // calls assignment operator b.operator=(a); 
```

请注意，您不能重载 C 中的运算符，而 Java 可能会有所不同。

**编辑：**

正如 Griwes 指出的那样，您可能想知道的其他事情是，如果您不指定一个，编译器将为您的用户定义对象生成一个隐式赋值运算符。有时您想定义或声明它只是为了避免编译器生成的默认行为。

还有一些`=`令牌的用法实际上会调用复制构造函数，例如，如果您像这样修改我以前的用例：

```
MyObject a;
MyObject b = a; // this calls the copy constructor (also implicitly defined if not provided) 
```

它可能看起来像一个赋值，但在上述情况下不会调用自定义提供的运算符。有关何时定义或不想定义赋值运算符的更多原因，请查看 Wikipedia 上的三规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T21:12:43.947

> 赋值运算符 (=) 是否必须始终将右值复制到左值中。

不。对于用户定义的类型，它不会做这样的事情。相反，它调用适当的`operator=`函数。考虑这些类：

```
#include <iostream>
struct Half {
  int i;
  void operator=(int j) { i = j/2; }
};
struct Double {
  int i;
  void operator=(int j) { i = j*2; }
};
int main () {
  Half h;
  h = 3;
  Double d;
  d = 3;
  std::cout << h.i << " " << d.i << "\n";
  // Result is "1 6"
} 
```

如您所见，赋值运算符可以自由执行它认为合适的任何操作。在这种情况下，它显然不仅仅是一个“副本”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:04:00.447

不同的语言使用不同的概念

Java 和 C++ 和 C+ 是的，这是一个赋值，除非被另一个函数重载

T-SQL = 成为测试和作业

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T21:04:50.930

复制这个词太笼统了。

在 C 中，如果您分配给指针，则不会复制实际值，但它将保存存储右侧操作数的内存地址。

```
int *ptr = (int *)malloc(sizeof(int *));
*ptr = 1; // points at whatever address 1 has
ptr = 1; // points at address 1, containing ???? 
```

# c++ - 依赖于其他静态库的静态库

> ID：11109382
> 
> 赞同：2
> 
> 时间：2012-06-19T21:01:38.637
> 
> 标签：c++, static-libraries, static-linking

我有一个关于制作使用其他静态库的静态库的问题。

我设置了一个包含 3 个文件的示例 - main.cpp、slib1.cpp 和 slib2.cpp。slib1.cpp 和 slib2.cpp 都被编译为单独的静态库（例如，我最终得到了 slib1.a 和 slib2.a） main.cpp 被编译成与这两个库链接的标准 ELF 可执行文件。
还有一个名为 main.h 的头文件，它是 slib1 和 slib2 中函数的原型。

main.cpp 从 slib2 调用一个名为 lib2func() 的函数。该函数依次从 slib1 调用 lib1func()。

如果我按原样编译代码，g++ 将返回一个链接器错误，指出它在 slib1 中找不到 lib1func()。但是，如果我在调用 slib2 中的任何函数之前调用 lib1func()，则代码会编译并正常工作。

我的问题很简单：是否可以创建一个依赖于另一个静态库的静态库？如果这是不可能的，这似乎是一个非常严重的限制。

这个问题的源代码附在下面：

主.h：

```
#ifndef MAIN_H
#define MAIN_H

int lib1func();
int lib2func();

#endif 
```

slib1.cpp：

```
#include "main.h"

int lib1func() {
  return 1;
} 
```

slib2.cpp：

```
#include "main.h"

int lib2func() {
  return lib1func();
} 
```

主.cpp：

```
#include <iostream>
#include "main.h"

int main(int argc, char **argv) {
  //lib1func();  // Uncomment and compile will succeed.  WHY??

  cout << "Ans: " << lib2func() << endl;
  return 0;
} 
```

gcc 输出（注释掉的行）：

```
g++ -o src/slib1.o -c src/slib1.cpp
ar rc libslib1.a src/slib1.o
ranlib libslib1.a
g++ -o src/slib2.o -c src/slib2.cpp
ar rc libslib2.a src/slib2.o
ranlib libslib2.a
g++ -o src/main.o -c src/main.cpp
g++ -o main src/main.o -L. -lslib1 -lslib2
./libslib2.a(slib2.o): In function `lib2func()':
slib2.cpp:(.text+0x5): undefined reference to `lib1func()'
collect2: ld returned 1 exit status 
```

gcc 输出（未注释行）

```
g++ -o src/slib1.o -c src/slib1.cpp
ar rc libslib1.a src/slib1.o
ranlib libslib1.a
g++ -o src/slib2.o -c src/slib2.cpp
ar rc libslib2.a src/slib2.o
ranlib libslib2.a
g++ -o src/main.o -c src/main.cpp
g++ -o main src/main.o -L. -lslib1 -lslib2

$ ./main 
Ans: 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:07:50.227

请尝试`g++ -o main src/main.o -L. -Wl,--start-group -lslib1 -lslib2 -Wl,--end-group`。

用 定义的组`--start-group`有助于`--end-group`解决库之间的循环依赖关系。

另请参阅：[GCC：--start-group 和 --end-group 命令行选项是什么？](https://stackoverflow.com/questions/5651869/gcc-start-group-and-end-group-command-line-options)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:10:47.450

顺序有所不同。这是来自[`gcc(1)`](http://linux.die.net/man/1/gcc)手册页：

> `It makes a difference where in the command you write this option; the linker searches and processes libraries and object files in the order they are specified. Thus, **foo.o -lz bar.o** searches library z after file foo.o but before bar.o. If bar.o refers to functions in z, those functions may not be loaded.`

# javascript - 更改背景图片的 url

> ID：11109384
> 
> 赞同：-1
> 
> 时间：2012-06-19T21:01:54.830
> 
> 标签：javascript, jquery, css

我正在做这个界面，我有很多按钮，这些按钮只是一个带有这样背景图像的 li

```
#menu ul.icons li.nove {
    background-image:url(images/edit-menu/icons/undo.png);
    background-size:contain;
    display:block;
    margin-top:29px;
} 
```

```
<ul class="icons"> 
<li class="um"></li>
    <li class="dois"></li>
    <li class="tres"></li>
    <li class="quatro"></li>
    <li class="cinco"></li>
<li class="seis"></li>
    <li class="sete"></li>
    <li class="oito"></li>
    <li class="nove"></li>
    <li class="dez"></li>
</ul> 
```

我需要创建一个代码，当用户单击它时更改按钮的背景图像，以显示该按钮已激活，我只需要更改`url(images/edit-menu/icons/`并`url(images/edit-menu/select/`保持相同的文件名。我需要一种动态执行此操作的方法，因此我不必为 10 个按钮中的每一个都执行此操作。

希望我很清楚，提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:05:29.493

我不确定你的意思是什么`button`，但你可以试试这个：

```
$('.nove').click(function(){
   $(this).css('background-image', 'url(images/edit-menu/select/undo.png)');
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:05:31.910

您可以通过 DOM 修改 css。jQuery 示例：

```
$('li.nove').click(function() {
    $(this).css('background-image', 'url(images/edit-menu/icons/icon2.png)');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T21:06:26.933

我假设您的意思是每个人都有不同的图像，因此您只想更改路径。

```
$('.icons').on('click', 'li', function(){
   var filename = $(this).css('background-image').split('/');
   filename = filename[filename.length - 1];
   filename = filename.substr(0, filename.length - 1);
   $(this).css('background-image', 'url(images/edit-menu/select/' + filename + ')');
}); 
```

这将获取背景图像并将其以“/”分隔，然后将最后一个减去一个字符`)`作为文件名返回。然后使用它来更改背景图像。

[这是一个 jsfiddle](http://jsfiddle.net/37ut4/1/)。没有实际的图像，但您可以在 firebug 或 webkit 检查器中查看源代码以查看它是否正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:06:49.537

你可以这样做：

```
var btn = document.getElementById('buttonID');
btn.onclick = function() {
   for (var i = 0, i < document.getElementsByTagName('li').length; i++) {
     if (this.className === 'nove') {
        document.getElementsByTagName('li')[i].style.background = 'url('+ new path +')';
     }
   }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T21:12:42.113

我认为你可以简单地用这样的东西来做（在 jQuery 中，未经测试）：

```
$("#menu ul.icons li").click(function(){
    $(this).css('background-image', $(this).css('background-image').replace('icons', 'select'));
}); 
```

编辑：如果您使用 jQuery >= 1.4，我只是想出了一个更好的方法。

```
$("#menu ul.icons li").click(function(){
    $(this).css('background-image', function(index, oldValue){
        return oldValue.replace('icons', 'select');
    });
}); 
```

# django - 解码器 jpeg 不可用：django with apache2

> ID：11109390
> 
> 赞同：2
> 
> 时间：2012-06-19T21:02:46.483
> 
> 标签：django, apache, python-2.7, python-imaging-library

当我尝试使用简单的代码时

```
 time_created = time.time()
        tempPath = 'user_image/'+ str(request.user.id)+'/'+str(time_created)+'/'
        print tempPath
        path = default_storage.save(tempPath+'original.jpg', ContentFile(content_image.read()))
        tmp_file = os.path.join(settings.MEDIA_ROOT, path) #this line gives error
        image = open(tmp_file) 
```

它给了我错误：解码器 jpeg 不可用

这就是我为解决它所做的： [http ://www.answermysearches.com/fixing-pil-ioerror-decoder-jpeg-not-available/320/](http://www.answermysearches.com/fixing-pil-ioerror-decoder-jpeg-not-available/320/)

我正在使用 python2.7 和 Imaging-1.1.7

按照上面的链接之后，当我在终端上运行 python selftest.py 时，我得到以下输出

```
python selftest.py
--------------------------------------------------------------------
PIL 1.1.7 TEST SUMMARY 
--------------------------------------------------------------------
Python modules loaded from ./PIL
Binary modules loaded from ./PIL
--------------------------------------------------------------------
--- PIL CORE support ok
*** TKINTER support not installed
--- JPEG support ok
--- ZLIB (PNG/ZIP) support ok
--- FREETYPE2 support ok
*** LITTLECMS support not installed
--------------------------------------------------------------------
Running selftest:
--- 57 tests passed. 
```

但是当我从浏览器访问我的应用程序时，我仍然得到解码器 jpeg 不可用

注意：我重新启动了 apache 服务器（不确定是否需要）。我需要在 Apache 中进行一些配置更改吗？

我在stackoverflow上搜索，发现了类似的问题，但没有一个是处理apache的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:05:47.567

我有同样的错误。原因是在服务器上运行的其他站点。它在 python 路径中有旧的 PIL。因此，清理 python 路径或重新安装旧 PIL 可能会对您有所帮助。

# java - 有没有办法在 Java 中按需初始化对象？

> ID：11109392
> 
> 赞同：1
> 
> 时间：2012-06-19T21:02:49.667
> 
> 标签：java, initialization

考虑一个包含一千多个属性的理论工厂类（例如，MVC 项目中的模型）。

工厂模式处理在选定级别（在类似游戏的项目中）的功能中显示场景快照。工厂必须将所需的组件和模型传递给场景。

模型和组件可以被任何场景重用，但是每个场景只能初始化一次（不可能玩2个场景的交易）。

所以，我的问题是：

考虑到我不需要每个组件，我不必初始化数千个属性（因为它会太慢），我如何实例化组件以传递给场景，只有当我需要它时？

我不想为每个工厂创建一千个工厂（抽象工厂模式），也不想在工厂本身中初始化对象，因为对象可以重用并且我想避免复制/粘贴。

有没有办法在 Java 中按需初始化对象？

我不想收到“如果你有一千个属性，这是一个糟糕的概念”的答案，我知道这一切，但我需要处理一个旧系统，我想减少内存使用量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:08:33.687

您可能想研究[延迟初始化](http://www.javapractices.com/topic/TopicAction.do?Id=34)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:08:39.210

没有内置的，没有。

我已经使用 AOP 完成了一些延迟初始化技巧，例如，一旦第一次引用某个属性，就运行初始化。这可以仅针对长时间运行的初始化、对象的所有属性、任意子集等进行，具体取决于需要。

这不需要*使用*AOP 来完成，它可以通过普通的 Java 代码来完成——但如果 Java 代码已经编写，来自您控制之外的生成器等，这可能会出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:09:17.780

一种选择是通过[构建器模式公开您的工厂](http://en.wikipedia.org/wiki/Builder_pattern)

然后，您可以拥有许多 ScenarioBuilders，每个 ScenarioBuilders 都“知道”如何为给定的 Scenario 初始化底层工厂。

# android - Android中的浮动上下文菜单

> ID：11109393
> 
> 赞同：2
> 
> 时间：2012-06-19T21:02:50.993
> 
> 标签：android, android-contextmenu

我试图在长按按钮时创建一个浮动上下文菜单。我已经阅读了所有的答案，但我仍然为此让自己发疯。这是我的代码：

R.menu.menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <menu
      xmlns:android="http://schemas.android.com/apk/res/android">

        <item android:id="@+id/MnuOpc1" android:title="Opcion1"
               android:icon="@drawable/ic_launcher"></item>
        <item android:id="@+id/MnuOpc2" android:title="Opcion2"
              android:icon="@drawable/ic_launcher"></item>
        <item android:id="@+id/MnuOpc3" android:title="Opcion3"
              android:icon="@drawable/ic_launcher"></item>

    </menu> 
```

OnCreateContextMenu(...)

```
 @Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
} 
```

onContextItemSelected(...)

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    Log.v("Hello...","I got the switch");  

    switch (item.getItemId()) {
    case R.id.MnuOpc1:
        Log.v("Hello...","Option 1");   
        return true;
    case R.id.MnuOpc2:
        Log.v("Hello...","Option 2"); 
        return true;
    default:
        return super.onContextItemSelected(item);
    } 
```

我认为上面的所有代码都是正确的，但是在 registerForContextMenu 调用时我遗漏了一些东西：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    linear = (LinearLayout) findViewById(R.layout.main);
    registerForContextMenu(linear); 
```

我试过`registerForContextMenu(getListView());`但它不起作用，我从 Eclipse 收到一个错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:52:35.090

您说您正在尝试为按钮创建上下文菜单，但在您的 onCreate() 中，您将上下文菜单注册到 LinearLayout。在不知道您实际遇到的错误的情况下，无法判断是否是这样。

# javascript - 为什么 Jasmine 间谍即使返回了 andReturn 值也不认为它被调用了？

> ID：11109397
> 
> 赞同：8
> 
> 时间：2012-06-19T21:03:26.297
> 
> 标签：javascript, unit-testing, jasmine

我正在尝试调试未触发的[jQuery.post](http://api.jquery.com/jQuery.post/)上的间谍，因此作为健全性检查，我尝试了

```
spyOn(this.viewModel.requests, 'submitRequest').andReturn('fooz');

var ret = this.viewModel.requests.submitRequest();
expect(ret).toEqual('foo');

expect(this.viewModel.requests.submitRequest).toHaveBeenCalled(); 
```

这失败了

> 预期 'fooz' 等于 'foo'。

但是当我在参数中更改`'fooz'`为时，测试失败了`'foo'``andReturn`

> submitRequest 上的预期间谍已被调用。

间谍正在返回预设值，那么为什么会`toHaveBeenCalled`失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:10:10.070

我知道这不应该是解决方案，但是您尝试过吗

```
var submitSpy = spyOn(this.viewModel.requests, 'submitRequest').andReturn('foo');

var ret = this.viewModel.requests.submitRequest();
expect(ret).toEqual('foo');

expect(submitSpy).toHaveBeenCalled(); 
```

因为有时这更一致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:52:14.727

您的代码应该可以工作。我已经在 jasmine 独立示例上对其进行了测试：

```
it("tells the current song if the user has made it a favorite", function() {
  spyOn(song, 'persistFavoriteStatus').andReturn('foo');
  var ret = song.persistFavoriteStatus();
  expect(ret).toEqual('foo');

  expect(song.persistFavoriteStatus).toHaveBeenCalled();
}); 
```

我的直觉告诉我，您遇到的问题与 Jasmine 对通话前后的范围界定有关——我自己也遇到过类似的令人沮丧的情况。在测试开始时，我会检查以确保环境符合您的预期（例如，间谍被重置）。

# iphone - 如何检查视图控制器的视图是否正在翻转/切换

> ID：11109403
> 
> 赞同：0
> 
> 时间：2012-06-19T21:03:40.740
> 
> 标签：iphone, objective-c, uiview

如果通过单击按钮（执行操作），我需要以某种方式检查代码，它正在切换视图控制器的视图

我在用

```
if ([currentViewController.view respondsToSelector:@selector(setAnimationTransition:forView:cache:)]) 
```

但这个看起来不像工作

通常此代码用于切换视图

```
[UIView beginAnimations:Nil context:NULL];

[UIView setAnimationDuration:1.0];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self cache:YES];

[mainView removeFromSuperview];

[self addSubview:infoView];

[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:15:03.707

看起来您正在让视图控制器的视图管理翻转。我确信这可以工作，但让视图控制器管理这类事情更为常见。如果你这样做，那么视图控制器将*知道*视图何时被翻转，因为它进行了翻转。

如果您要坚持让视图控制器的视图管理转换，那么您必须让视图控制器向其视图询问界面的状态。从您的视图控制器中，您可以执行以下操作：

```
BOOL flipped = [self.view isInterfaceFlipped]; 
```

# python - ImportError：没有名为 cv 的模块

> ID：11109413
> 
> 赞同：0
> 
> 时间：2012-06-19T21:04:33.803
> 
> 标签：python, macos, osx-lion, simplecv

我在运行 SimpleCV 时收到此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "build/bdist.macosx-10.7-intel/egg/SimpleCV/__init__.py", line 1, in <module>
  File "build/bdist.macosx-10.7-intel/egg/SimpleCV/base.py", line 22, in <module>
ImportError: No module named cv 
```

可能出了什么问题？请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:55:56.160

仅供参考的 SimpleCV 在 help.simplecv.org 上有一个帮助论坛。看起来 python 不知道 opencv 包的安装位置。执行 sudo easy_install 可能行不通。你需要做的是找出 cv 库在你的系统上的位置，以及 python 在哪里寻找它们，然后符号链接这两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:39:44.227

最近刚搭建环境学习SimpleCV，写博客记录下[Mac上SimpleCV环境搭建](http://brownydev.blogspot.tw/2012/11/simplecv-environment-setup-on-mac.html)的步骤。也许它可以帮助你:)

# mysql - 使用另一个表中的值作为表中的 ENUM 值

> ID：11109414
> 
> 赞同：1
> 
> 时间：2012-06-19T21:04:34.970
> 
> 标签：mysql, sql

假设我`mytable`在 mySQL

```
CREATE TABLE `mytable` (
  `gender` enum('MALE','FEMALE','UNISEX') NOT NULL,
); 
```

我不想在设计时列举这些值。我想把它们`another_table`作为值。

在值是`another_table`：`SELECT`

```
ID    NAME
==    ======
01    MALE
02    FEMALE
03    UNISEX 
```

我可以在 WHERE 子句中定义`mytable.gender`as`INT`并将这两个表与 sth like 组合起来`mytable.gender=another_table.id`。

我可以在设计时使用这些枚举值创建数据库级别的外键关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:10:52.907

是的，您使用[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)。

这将使数据库拒绝插入或更新`mytable`表中不存在的`another_table`表中的 id 值，并拒绝从表中删除`another_table`表中使用的值`mytable`。

# jsf-2 - h:selectOneMenu 默认item为null，清空item值，必填字段

> ID：11109415
> 
> 赞同：3
> 
> 时间：2012-06-19T21:04:48.930
> 
> 标签：jsf-2, richfaces

您好，我在使用以下代码时遇到问题：

```
<h:selectOneMenu id="selectTipoAutorizacion"
                                                    value="#{autorizacion.codigoTipoAutorizacion}"
                                                    required="true">
                                                    <f:selectItems
                                                        value="#{cc.attrs.controller.getListaTiposAutorizacion(autorizacion)}"
                                                        var="tipoAutorizacion"
                                                        itemLabel="#{tipoAutorizacion.nombreTipoAutorizacion}"
                                                        itemValue="#{tipoAutorizacion.id.codigoTipoAutorizacion}" />

                                                    <a4j:ajax event="change" execute="@this"
         listener = #{myListener.listener}                                                                                      render="selectAutorizador" />
                                                </h:selectOneMenu> 
```

问题是默认选择的值总是标签的第一个。这让用户感到困扰，因为一些数据是根据选定的项目值加载的......但是，直到发生更改事件（a4j：ajax 标签）才会加载该信息，所以现在用户必须选择另一个项目，然后选择上一个以查看默认的项目相关信息。

我通过在开始时加载默认的项目相关信息解决了这个问题，但是用户不喜欢这样。因为它可能会导致混乱。所以问题是......我怎样才能避免这种行为？我想要的是 selectOneMenu 加载一个明确的值（就像没有任何 f:selectItems 一样）。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T14:11:26.797

您的字段是必需的，在这种情况下应该没有任何有效的默认值。将一个空的 selectItem 添加到列表顶部`selectItems.add(0, new SelectItem("", ""))`：或者这样：`<f:selectItem itemValue="" itemLabel="" />` 默认情况下它会选择空的selectItem。用户将被迫做出选择，因为`required="true"`不允许空选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:10:01.067

在 f:selectItems 之前添加一个 f:selectItem，其值为空，或类似“请选择 ...”，并将其标记为不可选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T21:24:11.627

只需在 bean 的（后）构造函数中预加载所需的数据。

```
if (codigoTipoAutorizacion != null) {
    // Preload all other desired data as well.
} 
```

# jsf-2 - 如何使用 JSF 2.0 将 URL 参数添加到重定向的登录页面

> ID：11109417
> 
> 赞同：1
> 
> 时间：2012-06-19T21:05:03.970
> 
> 标签：jsf-2

我有一个关于会话超时和 JSF 2 的问题。我的异常处理程序完全按照每个人都喜欢的方式工作，但我需要将一个值传递给登录页面。例如，我有一个典型的登录 URL - www.acme.com/?companyId=company14，它反过来为 company14 提供了他们自己的自定义登录页面（使用他们的徽标）。在他们进入应用程序并完成一些工作后，他们会阅读一封电子邮件或 2 封电子邮件。会话超时并显示会话超时页面，指示用户单击“确定”以继续登录页面。如何将 ?companyId=company14 添加到 URL？我可以使用以下方法在异常处理程序中对其进行硬编码：

requestMap.put("companyId", "company14");

然后在 viewExpired.xhtml 页面上引用它：

```
 <h:panelGrid id="expiredGrid" columns="1">
        <f:facet name="header">
            <h:outputText id="outExpireMsg" value="Your session has expired"/>
        </f:facet>
        <h:outputText id="outReqMessage" value="Reloading the page will require login."/>
        <h:outputText value=""/>
        <h:button id="okButton" type="submit" value="Ok" outcome="login?companyId=#{companyId}"/>
    </h:panelGrid> 
```

问题是我似乎无法将 companyId 保存在任何地方，而不会被会话超时清除。我想使用这个值在异常处理程序中设置 companyId。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:14:29.957

您可以在登录时将其设置为 cookie。

```
Map<String, Object> properties = new HashMap<String, Object>();
properties.put("path", "/"); 
externalContext.addResponseCookie("companyId", companyId, properties); 
```

然后你可以按如下方式抓取它：

```
Cookie cookie = (Cookie) externalContext.getRequestCookieMap().get("companyId");

if (cookie != null) {
    String companyId = cookie.getValue();
} 
```

请注意，当服务器端会话过期时，这不会过期。这仅在浏览器关闭时过期。

# perl - linux中有没有类似lsof命令的perl函数？

> ID：11109420
> 
> 赞同：3
> 
> 时间：2012-06-19T21:05:08.837
> 
> 标签：perl, lsof

我有一个 shell 脚本，它根据进程是否正在运行来归档日志文件。如果进程不使用日志文件，那么我将其存档。到目前为止，我一直在使用 lsof 来获取正在使用的日志文件，但在未来，我决定使用 perl 来执行此功能。

是否有类似于 linux 中的 lsof 可以执行的 perl 模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:08:29.600

有一个 perl 模块，它围绕着 lsof。请参阅[Unix::Lsof](https://metacpan.org/module/Unix%3a%3aLsof)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:34:09.703

在我看来，不使用的最大问题`lsof`是需要以一种独立于操作系统的方式工作。Using`lsof`允许 perl 程序员使用允许操作系统独立性的一致应用程序。

要让 perl 模块开发人员编写 lsof，实际上是将 lsof 作为库编写，然后将其链接到 perl - 这比仅使用现有的二进制文件要多得多。

也可以使用[`fuser`command](http://en.wikipedia.org/wiki/Fuser_%28Unix%29)，它显示带有文件句柄的进程 ID。还有一个[模块](http://search.cpan.org/~jstowe/Linux-Fuser-1.5/lib/Linux/Fuser.pm)旨在实现相同的功能。perldoc 中的注释：

> 这种工作方式极不可能在 Linux 以外的任何其他操作系统上工作，即使那样，它也可能无法在 2.2.* 内核以外的任何其他操作系统上工作。

*可以*尝试遍历 /proc/*/fd 并查看其中的文件描述符，看看是否有任何指向有问题的文件。如果知道将打开日志文件的正在运行的进程的进程 ID，那么查看该进程将同样容易。请注意，这就是定影模块的工作方式。

也就是说，应该问“为什么要离开 lsof”？

# c# - 母版页中的链接

> ID：11109423
> 
> 赞同：2
> 
> 时间：2012-06-19T21:05:15.467
> 
> 标签：c#, asp.net, master-pages

如何使位于母版页中的链接（按钮）重定向到两个不同的 url，具体取决于是否从不同的 .aspx 页面单击它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:21:31.747

做这样的事情（未经测试）......

在母版页中（对于本例，它被命名为 siteMaster），添加公共属性：

```
public void SetButtonUrl(string NewUrl)
{
    this.btnMyButton.NavigateURL = NewUrl;
} 
```

在您的 aspx 页面的代码隐藏中，在每个页面中添加您想要的 url：

```
((siteMaster)Master).SetButtonUrl("~/someurl"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:16:34.033

你可以在你的 aspx 页面加载方法中做这样的事情，

```
 protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
          /// Access Master Page control
          LinkButton lnkButton = (LinkButton)this.Master.FindControl("lnkButtonName");
          /// set postback url or whatever
          lnkButton.PostBackUrl = "";
        }
        catch(Execption e)
        {}
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:17:02.077

您可以从 Master 的`Page_Init`事件处理程序中设置它并用于[`HttpContext.CurrentHandler`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.currenthandler.aspx)获取页面引用：

```
protected void Page_Init(Object sender, EventArgs e)
{
    var page = HttpContext.Current.Handler as Page;
    if (page is WebForm1)
        LinkButton1.PostBackUrl = "WebForm2.aspx";
    else if (page is WebForm2)
        LinkButton1.PostBackUrl = "WebForm1.aspx";
    else
        LinkButton1.PostBackUrl = "WebForm3.aspx";
} 
```

# c# - 寻找适用于 Windows 8 Metro Apps 的 PDF 编写器

> ID：11109427
> 
> 赞同：8
> 
> 时间：2012-06-19T21:05:51.087
> 
> 标签：c#, pdf, windows-8, pdf-generation

我正在创建一个 Windows 8/Metro 应用程序，并且正在寻找一个可以以编程方式生成 PDF 文档的库（可以由用户打印或通过电子邮件发送）。

我找到了一些用于编写 PDF 的 C# 库（例如 http://itextpdf.com/），但我无法让它们在 Windows 8 中工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T03:16:53.077

经过艰苦的搜索，我找到了自己问题的答案：**Siberix Report Writer** ( [www.siberix.com](http://www.siberix.com) )。它们有 .NET、Silverlight、Android 的 Mono*和*Windows Store 的版本。二进制文件只需 199 美元（如果您需要源代码，则为 3500 美元）。

它很容易包装到您的应用程序中，附带了很好的代码示例，并且技术客户服务非常快速且乐于助人（感谢 Victor）。

我很长时间以来见过的最好的第三方产品之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:51:02.950

WinRT 有一些付费的 pdf 库，但还没有免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:17:56.173

[ComponentOne](http://www.componentone.com/SuperProducts/PDFWinRT/)现在已经发布了他们用于 Windows 运行时的 .NET PDF 库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T20:50:18.767

同时有不少库支持 PDF 生成。您可以在[Mike Taulty 的博客](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2013/04/23/annotating-pdf-documents-in-a-windows-8-store-app.aspx)中找到很好的概述。

但是，当我尝试注释现有的 Pdf 时遇到了问题。能够（透明）注释的现有库非常昂贵。因此，我最终在服务器端对 Pdf 进行了注释。

[请随时在Mils](https://milsapp.com/blog/pdf-manipulation-on-windows-8)的博客上阅读更多关于我的经验的信息。

# php - 你可以在 Tumblr 主题中使用 PHP 吗？

> ID：11109428
> 
> 赞同：2
> 
> 时间：2012-06-19T21:05:55.033
> 
> 标签：php, css, styles, tumblr

我想在 tumblr 主题中使用 PHP 变量，以便照片大小是随机的。是否可以在 tumblr 自定义主题中使用 PHP，还是它自己的语言/API 不允许 PHP 内联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:13:50.893

不，因为它会导致安全漏洞，这就是他们在主题中使用[mustache的原因。](http://mustache.github.com/)~~我也很确定 tumblr 不是用 PHP 编写的。~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:00:21.373

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:36:47.617

我做了一些更多的研究，我认为这种使用标签的方法可能是最好的，至少是最用户友好的：

[你可以根据标签自定义 Tumblr 帖子的格式吗？](https://stackoverflow.com/questions/8106397/can-you-customize-the-format-of-a-tumblr-post-based-on-its-tag?rq=1)

我在 CSS 中为我​​的客户设置了几个不同的类，.small、.medium、.large。现在他们可以用这三个词中的任何一个来标记，照片将相应地调整大小。唯一的缺点是标签在 tumblr 的照片流中可见，因此您可能会看到“#small”或类似的东西。我宁愿没有这个，但我真的想不出一种更简单的方法让用户轻松地将类添加到帖子中。

# java - 如何从不可知函数调用多态函数？

> ID：11109429
> 
> 赞同：3
> 
> 时间：2012-06-19T21:06:01.737
> 
> 标签：java, oop

我有一个方法`foo`

```
void foo (String x) { ... }
void foo (Integer x) { ... } 
```

我想从一个不关心参数的方法中调用它：

```
void bar (Iterable i) {
  ...
  for (Object x : i) foo(x); // this is the only time i is used
  ...
} 
```

上面的代码抱怨`foo(Object)`没有定义，当我添加

```
void foo (Object x) { throw new Exception; } 
```

然后`bar(Iterable<String>)`调用它而不是`foo(String)`抛出异常。

如何避免 和 有两个文本相同的`bar(Iterable<String>)`定义`bar(Iterable<Integer>)`？

我以为我可以摆脱类似的事情

```
<T> void bar (Iterable<T> i) {
  ...
  for (T x : i) foo(x); // this is the only time i is used
  ...
} 
```

但后来我得到`cannot find foo(T)`错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:13:49.863

您面临的问题是重载方法在编译时绑定。在您的示例中，编译器试图找出`foo()`要调用的方法。但是，您的示例中最强的静态类型`x`是 Object ，并且没有 method `foo(Object)`，因此编译器说它无法调用适当的方法。

如果你添加`foo(Object)`方法，无论 x 的实际运行时类型是什么，你总是会调用该`foo(Object)`方法。

这个问题延伸到使用泛型。由于`T`可以是任何类型，因此您必须有一个泛型方法`foo(T)`，否则您的代码将无法编译。但是，如果添加该方法，您将无法让这些方法区分不同的参数类型，因为 only`foo(T)`将被调用。

解决此问题的唯一方法是逐案检查并像提出的其他答案一样进行强制转换。除非参数类型是您定义的类并且它们都可以实现公共接口。然后您可以执行以下操作：

```
interface ArgumentType {
   void callback(FooClass c);
}

class YourClassA implements ArgumentType {
    void callback( FooClass c ) {
         c.foo( this );
    }
} 
```

`FooClass`仍然必须`foo()`为每个实现类提供一个方法`ArgumentType`，但是这样您就可以通过类型不可知的方式进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:12:44.423

这样想：`foo`应该调用哪个版本的 if`x`是 an `Object`？

这就是JVM面临的问题。

如果你想要一个真正的多态方法，那么你需要显式地编写一个。然后，这样的方法可以`Object`通过自省检查它的实际类类型，然后调用适当的方法。

*或者*，您可以仔细看看有什么`foo`作用。它只是调用由定义的方法`Object`吗？如果是这样，只需创建一个`void foo(Object x)`满足必要条件的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:13:56.273

问题是您正在尝试查找`foo(Object x)`，而 String 和 Integer 都是对象，并非所有对象都是 String 或 Integer，并且 java 不会缩小到正确的类。

我可能会建议创建一个方法，如：

```
void foo(Object o){
     if ( o instanceof String){
         String s = (String) o;
         //Deal with s
     } else if ( o instanceof Integer){
         Integer i = (Integer) o;
         //Deal with i
     }
} 
```

此外，如果您仍然使用泛型，则不应在 bar 中传递原始迭代器

# google-chrome - WebRTC建立特定的peerConnection

> ID：11109432
> 
> 赞同：0
> 
> 时间：2012-06-19T21:06:08.730
> 
> 标签：google-chrome, p2p, webrtc

我最近在学习webRTC，现在我可以在使用getUserMedia和createPeerConnection之后成功建立peerConnection。但是这个连接是随机建立的，我的意思是我不能选择我想连接的人。
现在我想建立与特定IP地址的连接，如何实现呢？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:19:06.070

您可以使用 websocket 连接两个对等点。

```
var socket = new WebSocket('ws://yourdomain.com:1337'); 
```

你需要安装一个像 node.js 这样的服务器。我发现这个原型很有用： [Video Conferencing Proto](http://blog.gingertech.net/2012/06/04/video-conferencing-in-html5-webrtc-via-web-sockets/) 安装运行后：`node websocket-server.js`

你让新的 JSEP 协议运行了吗？我在用 JSEP 替换已弃用的 ROAP 协议时遇到问题。

# coldfusion - 在 ColdFusion 9 中搜索文件夹

> ID：11109435
> 
> 赞同：0
> 
> 时间：2012-06-19T21:06:20.680
> 
> 标签：coldfusion, coldfusion-9

我正在尝试创建一种搜索方法来在我的出站电子邮件中附加文件。我需要在文件夹中搜索并找到所有以某个字符开头的文件，然后将它们附加到电子邮件中。我只需要先了解如何创建这样的搜索方法，以便任何指向参考的指针或链接都将受到赞赏。

这是我到目前为止所拥有的，但是当我使用路径而不是`GetBaseTemplatePath()`

```
<cfscript>
  attributes.attachments = 2011093475839213;
</cfscript>

<cfset Directory = "E:\sites\Example.com\FileFolder\#attributes.attachments#"> 

<cfset CurrentDirectory=Directory>  
<cfset CurrentDirectory=ListDeleteAt(CurrentDirectory,ListLen(CurrentDirectory,"/\"),"/\")>  

<cfoutput>  
 <b>Current Directory:</b> #CurrentDirectory#  
    <br />  
</cfoutput>  

<cfdirectory action="list" directory="#CurrentDirectory#" name="result">  
<cfdump var="#result#"> 
```

当我稍微更改代码时

```
<cfset CurrentDirectory=GetBaseTemplatePath()> 
```

我的代码有效，我得到了当前目录中所有文件的列表。我的路上是否有我看不到的错误？

这是我的 CFMAIL 部分，我确实有问题。当我转储`#result#`查询时，我会得到文件夹中的所有文件。然后我得到这个错误：

```
The resource 2011093475839213.pdf was not found.

The root cause was: ''. 
```

尽管有错误，但我确实收到了一封电子邮件，只是没有收到附件。

```
<!--- Email Test --->
<CFMAIL FROM="user1@example.com" TO="user2@example.com"  SUBJECT="Test" type="HTML">
<P> This is the attachment test</P>
<p> For this test to be successful, we need to receive some file attachments with this email</p>

    <cfloop query="result">

        <cfmailparam file="#result.name#" disposition="attachment">

    </cfloop>

</cfmail>
<!--- Email Test Ends ---> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:20:41.850

cfdirectory 标签将允许您搜索具有特定模式的文件夹。使用它返回的查询，您可以遍历它并将您需要的所有文件附加到电子邮件中。

[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f99.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f99.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:26:34.293

像这样的东西：

```
<cfdirectory action="list" directory="#myDirectory#" name="myDir">

<cfmail subject="My Subject" to="yourAddress" from="myAddress">
  My Message
  <cfsilent>
    <cfloop query="myDir">
      <cfif Left(myDir.name,1) eq "Z">
        <cfmailparam file="#myDirectory & myDir.name#">
      </cfif>
    </cfloop>
  </cfsilent>
</cfmail> 
```

# mysql - 在 JBoss 5.1 的 MDB (ActiveMQ) 中捕获 MySQL 死锁

> ID：11109437
> 
> 赞同：4
> 
> 时间：2012-06-19T21:06:30.087
> 
> 标签：mysql, jboss, ejb, activemq, jboss-mdb

我们正在使用由 ActiveMQ RAR 支持的带有 MDB 的 JBoss 5.1。

当队列上的消息被消耗并执行一些数据库操作，然后导致死锁时，死锁本质上是占用整个 JBoss 实例，直到它重新启动。通过软管，该队列上消耗的任何后续消息都会失败，并出现以下异常：

```
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Cannot open connection 
```

死锁异常从不引用我的代码，这反过来又让我很难捕捉和处理。

例如，这里是一个死锁异常的异常：

```
2012-06-18 18:52:19,848 WARN   [JDBCExceptionReporter] : SQL Error: 1213, SQLState: 40001
2012-06-18 18:52:19,848 ERROR  [JDBCExceptionReporter] : Deadlock found when trying to get lock; try restarting transaction
2012-06-18 18:52:19,850 ERROR  [AbstractFlushingEventListener] : Could not synchronize database state with session
org.hibernate.exception.LockAcquisitionException: Could not execute JDBC batch update
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:105)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)
        at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:365)
        at org.hibernate.ejb.AbstractEntityManagerImpl$1.beforeCompletion(AbstractEntityManagerImpl.java:504)
        at com.arjuna.ats.internal.jta.resources.arjunacore.SynchronizationImple.beforeCompletion(SynchronizationImple.java:101)
        at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.beforeCompletion(TwoPhaseCoordinator.java:269)
        at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:89)
        at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:177)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1423)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:137)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:75)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.endTransaction(MessageInflowLocalProxy.java:435)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.finish(MessageInflowLocalProxy.java:314)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.after(MessageInflowLocalProxy.java:230)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:136)
        at $Proxy677.afterDelivery(Unknown Source)
        at org.apache.activemq.ra.MessageEndpointProxy$MessageEndpointAlive.afterDelivery(MessageEndpointProxy.java:128)
        at org.apache.activemq.ra.MessageEndpointProxy.afterDelivery(MessageEndpointProxy.java:69)
        at org.apache.activemq.ra.ServerSessionImpl.afterDelivery(ServerSessionImpl.java:224)
        at org.apache.activemq.ActiveMQSession.run(ActiveMQSession.java:897)
        at org.apache.activemq.ra.ServerSessionImpl.run(ServerSessionImpl.java:169)
        at org.jboss.resource.work.WorkWrapper.execute(WorkWrapper.java:205)
        at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:260)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.sql.BatchUpdateException: Deadlock found when trying to get lock; try restarting transaction
        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2013)
        at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1449)
        at com.mysql.jdbc.jdbc2.optional.StatementWrapper.executeBatch(StatementWrapper.java:721)
        at org.jboss.resource.adapter.jdbc.WrappedStatement.executeBatch(WrappedStatement.java:774)
        at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
        ... 29 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:407)
        at com.mysql.jdbc.Util.getInstance(Util.java:382)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1064)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3603)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3535)
         at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1989)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2150)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2626)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2119)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2415)
        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1976)
        ... 34 more
2012-06-18 18:52:19,851 WARN   [arjLoggerI18N] : [com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator_2] TwoPhaseCoordinator.beforeCompletion - failed for com.arjuna.ats.internal.jta.resources.arjunacore.SynchronizationImple@480671ab
javax.persistence.PersistenceException: org.hibernate.exception.LockAcquisitionException: Could not execute JDBC batch update
        at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:614)
        at org.hibernate.ejb.AbstractEntityManagerImpl$1.beforeCompletion(AbstractEntityManagerImpl.java:513)
        at com.arjuna.ats.internal.jta.resources.arjunacore.SynchronizationImple.beforeCompletion(SynchronizationImple.java:101)
        at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.beforeCompletion(TwoPhaseCoordinator.java:269)
        at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:89)
        at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:177)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1423)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:137)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:75)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.endTransaction(MessageInflowLocalProxy.java:435)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.finish(MessageInflowLocalProxy.java:314)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.after(MessageInflowLocalProxy.java:230)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:136)
        at $Proxy677.afterDelivery(Unknown Source)
        at org.apache.activemq.ra.MessageEndpointProxy$MessageEndpointAlive.afterDelivery(MessageEndpointProxy.java:128)
        at org.apache.activemq.ra.MessageEndpointProxy.afterDelivery(MessageEndpointProxy.java:69)
        at org.apache.activemq.ra.ServerSessionImpl.afterDelivery(ServerSessionImpl.java:224)
        at org.apache.activemq.ActiveMQSession.run(ActiveMQSession.java:897)
        at org.apache.activemq.ra.ServerSessionImpl.run(ServerSessionImpl.java:169)
        at org.jboss.resource.work.WorkWrapper.execute(WorkWrapper.java:205)
        at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:260)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:619)
Caused by: org.hibernate.exception.LockAcquisitionException: Could not execute JDBC batch update
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:105)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)
        at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:365)
        at org.hibernate.ejb.AbstractEntityManagerImpl$1.beforeCompletion(AbstractEntityManagerImpl.java:504)
        ... 22 more
Caused by: java.sql.BatchUpdateException: Deadlock found when trying to get lock; try restarting transaction
        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2013)
        at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1449)
        at com.mysql.jdbc.jdbc2.optional.StatementWrapper.executeBatch(StatementWrapper.java:721)
        at org.jboss.resource.adapter.jdbc.WrappedStatement.executeBatch(WrappedStatement.java:774)
        at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
        ... 29 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:407)
        at com.mysql.jdbc.Util.getInstance(Util.java:382)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1064)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3603)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3535)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1989)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2150)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2626)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2119)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2415)
        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1976)
        ... 34 more
2012-06-18 18:52:19,912 WARN   [TxConnectionManager] : Connection error occured: org.jboss.resource.connectionmanager.TxConnectionManager$TxConnectionEventListener@6acc2da9[state=NORMAL mc=org.jboss.resource.adapter.jdbc.xa.XAManagedConnection@2c9e906 handles=0 lastUse=1340059939649 permit=true trackByTx=true mcp=org.jboss.resource.connectionmanager.JBossManagedConnectionPool$OnePool@10015060 context=org.jboss.resource.connectionmanager.InternalManagedConnectionPool@4643d6d5 xaResource=org.jboss.resource.adapter.jdbc.xa.XAManagedConnection@2c9e906 txSync=null]
com.mysql.jdbc.jdbc2.optional.MysqlXAException: XA_RBDEADLOCK: Transaction branch was rolled back: deadlock was detected
        at com.mysql.jdbc.jdbc2.optional.MysqlXAConnection.mapXAExceptionFromSQLException(MysqlXAConnection.java:605)
        at com.mysql.jdbc.jdbc2.optional.MysqlXAConnection.dispatchCommand(MysqlXAConnection.java:584)
        at com.mysql.jdbc.jdbc2.optional.MysqlXAConnection.end(MysqlXAConnection.java:479)
        at org.jboss.resource.adapter.jdbc.xa.XAManagedConnection.end(XAManagedConnection.java:246)
        at com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord.topLevelAbort(XAResourceRecord.java:396)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:3270)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:3248)
        at com.arjuna.ats.arjuna.coordinator.BasicAction.Abort(BasicAction.java:1933)
        at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:97)
        at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:177)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1423)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:137)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:75)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.endTransaction(MessageInflowLocalProxy.java:435)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.finish(MessageInflowLocalProxy.java:314)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.after(MessageInflowLocalProxy.java:230)
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:136)
        at $Proxy677.afterDelivery(Unknown Source)
        at org.apache.activemq.ra.MessageEndpointProxy$MessageEndpointAlive.afterDelivery(MessageEndpointProxy.java:128)
        at org.apache.activemq.ra.MessageEndpointProxy.afterDelivery(MessageEndpointProxy.java:69)
        at org.apache.activemq.ra.ServerSessionImpl.afterDelivery(ServerSessionImpl.java:224)
        at org.apache.activemq.ActiveMQSession.run(ActiveMQSession.java:897)
        at org.apache.activemq.ra.ServerSessionImpl.run(ServerSessionImpl.java:169)
        at org.jboss.resource.work.WorkWrapper.execute(WorkWrapper.java:205)
        at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:260)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:619)
2012-06-18 18:52:19,914 INFO   [ServerSessionImpl:153] : Endpoint failed to process message. Reason: Endpoint after delivery notification failure 
```

我可以捕获后续错误（队列中后续消息的错误）：

引起：javax.persistence.PersistenceException：org.hibernate.exception.GenericJDBCException：无法打开连接

但我什至不知道该怎么处理它，也许我可以得到一个没有被冲洗的新 EntityManager，但我是通过注入开始的......我知道解决这个错误的唯一方法是重新开始。

我假设最初的死锁是作为结束队列中事务的一部分发生的，这就是为什么它没有在我的代码中发生，但是有什么方法可以优雅地处理这个问题吗？

更新：

*   所有数据源都是 MySQL XA
*   在 transaction-jboss-beans.xml 中，我们将 transactionTimeout 设置为 300

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:40:11.323

我能够通过使用以下方法隔离每个事务来解决此问题：

使用以下命令注释 MDB：

```
 @TransactionManagement(value = TransactionManagementType.BEAN) 
```

因此告诉 MDB Bean 本身将管理事务而不是容器（在我的代码之外），接下来，注入必要的资源：

```
 @Resource
    MessageDrivenContext mc;
    UserTransaction tx; 
```

创建和管理我自己的交易

```
 tx = mc.getUserTransaction();
    tx.begin();

    //Do work

    tx.commit(); 
```

可以对每个代码块重复上述步骤。

使用非常精细的事务，我能够跟踪我的代码中发生锁定/竞争条件的位置。一旦我解决了这个问题，我就能够退出一些更精细的事务管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:52:45.370

没有办法优雅地处理容器事务异常。

它决定回滚任何原因，而您无法控制它。获得有关此类异常和回滚事件的通知的一个复杂选项可能是编写一个 JCA 连接器，该连接器将虚假资源注册到每个 MDB 事务的分布式事务管理器中。

我建议您调查发生的情况并从源头解决问题。

这是一个死锁场景，它总是涉及多个线程：如果两段代码使用相同的实体但顺序不同，第一个线程将锁定资源 A（行、表或 Java 监视器）并等待 B当第二个线程已经锁定资源 B 并且现在等待 A。

因此，Java 监视器和数据库资源之间可能存在分布式死锁，并且这种情况很难诊断。整个系统被卡住，直到两端的事务超时，Java 线程转储和数据库会话和锁必须被扫描。

在您的情况下，当 MySQL 检测到死锁本身时，这意味着只涉及数据库资源。

为了提供帮助，我想您应该减少在批量更新中针对一条 JMS 消息、一项事务运行的 SQL 查询的数量。在同时消费并发消息的情况下，处理应用大量行的事务，更容易出现死锁情况。

但奇怪的是，您的 JBoss 服务器在回滚后由于仅 DB 的死锁而被卡住：

*   要么您已经用尽了 DataSource 池中的 JDBC 连接数
*   或者没有更多可用的 MySQL 服务器端连接
*   或者所有消息 bean 也处于死锁状态
*   事务超时可能太高而无法在合理的时间范围内回滚

因此，要么通过缩小相应池的大小来减少 MDB 并发，要么减少每个事务的更新数量——甚至可能小到每个 JMS 消息一个更新......

# java - SharedPreferences 导致应用程序在 android 中使用 Tabs 时强制关闭

> ID：11109438
> 
> 赞同：0
> 
> 时间：2012-06-19T21:06:31.847
> 
> 标签：java, android, sharedpreferences

我有一个带有 2 个选项卡式活动的应用程序，我正在尝试使用以下代码在第二个选项卡上获取 SharedPreferences：
`SharedPreferences prefs = this.getSharedPreferences("com.some.app", Context.MODE_PRIVATE);`
但它使应用程序强制关闭，我在第一个活动上使用相同的代码，它就可以了`SharedPreferences`！任何想法是什么导致了这个？

日志猫：

```
06-19 17:10:37.690: W/dalvikvm(6589): threadid=1: thread exiting with uncaught exception (group=0x40a031f8)
06-19 17:10:37.706: E/AndroidRuntime(6589): FATAL EXCEPTION: main
06-19 17:10:37.706: E/AndroidRuntime(6589): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.something.some/com.something.somehow}: java.lang.NullPointerException
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.widget.TabHost.setCurrentTab(TabHost.java:346)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:150)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:540)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.view.View.performClick(View.java:3511)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.view.View$PerformClick.run(View.java:14105)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.os.Handler.handleCallback(Handler.java:605)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.os.Looper.loop(Looper.java:137)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at java.lang.reflect.Method.invokeNative(Native Method)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at java.lang.reflect.Method.invoke(Method.java:511)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at dalvik.system.NativeStart.main(Native Method)
06-19 17:10:37.706: E/AndroidRuntime(6589): Caused by: java.lang.NullPointerException
06-19 17:10:37.706: E/AndroidRuntime(6589):     at com.someone.someapp.Statify.onCreate(Statify.java:59)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.Activity.performCreate(Activity.java:4465)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-19 17:10:37.706: E/AndroidRuntime(6589):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-19 17:10:37.706: E/AndroidRuntime(6589):     ... 18 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:29:53.113

选项卡主机包含单独的活动（如果我没记错的话），所以当您调用“this”时，它会返回选项卡活动的上下文，为什么它为空我不确定（我假设这是空的，因为我知道第 59 行是什么） .

我的建议是使用主要活动中的一个共享首选项实例，而不是为每个子活动启动一个共享首选项变量（即使它们指向相同的首选项）

或者更好的是使用 ViewPager 而不是过时的 Tab Host。

如果你想坚持你正在做的事情，试试 this.getBaseContext().getSharedPreferences()

由于您的 smippit 是正确的，因此更多的上下文信息可以提供更好的答案。

# ruby - 尝试在 Ruby 中打开文件 - 获取类型错误：无法将字符串转换为整数

> ID：11109440
> 
> 赞同：1
> 
> 时间：2012-06-19T21:06:50.630
> 
> 标签：ruby, file, types

不确定这里发生了什么，或者在这种情况下可能是整数。这是代码：

```
def build_array_from_file(filename)
    contents = []
    File.read(File.expand_path('lib/project_euler/' + filename), 'r') do |file|
      while line = file.get
        contents << line
      end
    end
    contents
  end 
```

文件名是一个字符串，我已经检查以确保路径有效。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:14:53.113

[File.read](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-read)没有模式或块的第二个参数，即[File.open](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-open)：

```
contents_string = File.read(File.expand_path('lib/project_euler/' + filename)) 
```

请注意，您还可以编写：

```
contents = File.open(path).lines # returns a lazy enumerator, keeps the file open 
```

或者：

```
contents = File.readlines(path) # returns an array, the file is closed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:29:43.457

`File.read`不需要该模式`r`- 您已经在`File.read`. 参数 fo`File.read`是 - 在文件名之后 - 偏移量和长度（这就是错误消息中预期为整数的原因）。

如果您需要该模式或（但也有- 选项），您可以提供模式，因为`File.read(filename, :mode => 'r')`这可能很有用。`rb``r:utf-8``encoding`

# java - 使用迭代器遍历哈希图列表

> ID：11109444
> 
> 赞同：0
> 
> 时间：2012-06-19T21:06:59.183
> 
> 标签：java

我有一个字符串 exp，我必须与 mapsList 进行比较。

```
 String exp = "nodeId=1&&name=Router||level=1";
  List mapList = new ArrayList();

  Map map = new HashMap();
  map.put("nodeId","1");
  map.put("name","Router");
  map.put("level", "1");

  Map map1 = new HashMap();
  map1.put("nodeId","2");
  map1.put("name","Router");
  map1.put("level","2");

  Map map2 = new HashMap();
  map2.put("nodeId","3");
  map2.put("name","Router");
  map2.put("level","3");

  mapList.add(map);
  mapList.add(map1);
  mapList.add(map2); 
```

我把 exp 分成一个数组。

```
 String delims = "[\\&&\\||\\=]+";
  String[] token = exp.split(delims); 
```

然后我将数组分成两个较小的子数组。一个用于键，另一个用于值。之后我比较...

```
 if(map.keySet().contains(a1[0]) && map.keySet().contains(a1[1]) || map.keySet().contains(a1[2])){
        if(map.values().contains(a2[0]) && map.values().contains(a2[1]) || map.values().contains(a2[2])){
            System.out.println("Match\tMapKeys: "+map.keySet()+" Values: "+map.values());
        }else{
            System.out.println("No Match\t");
        }
    } 
```

所以我的问题是我可以为每个地图执行此操作，但无法弄清楚如何使用迭代器来实现它。

some1 能把我推向正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:39:40.927

您真的**非常**想定义一个对象来保存您的数据，而不是使用`HashMap`s.

```
class Node {
    private int id;
    private String name;
    private int level;

    public Node(int id, String name, int level) {
        this.id = id;
        this.name = name;
        this.level = level;
    }

    public int getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public int getLevel() {
        return level;
    }
} 
```

现在你像这样填充列表

```
 List<Node> nodeList = new ArrayList<Node>();

    nodeList.add(new Node(1, "Router", 1));
    nodeList.add(new Node(2, "Router", 2));
    nodeList.add(new Node(3, "Router", 3)); 
```

你可以像这样寻找你的比赛

```
 String exp = "nodeId=1&&name=Router||level=1";

    String delims = "[\\&&\\||\\=]+";
    String[] token = exp.split(delims);

    int id = Integer.parseInt(token[1]);
    String name = token[3];
    int level = Integer.parseInt(token[5]);

    boolean match = false;

    for (Node node : nodeList) {
        if (node.getId() == id && node.getName().equals(name)
                && node.getLevel() == level) {
            System.out.println("Match found: " + node);
            match = true;
        }
    }

    if (!match) {
        System.out.println("No match");
    } 
```

这给了我以下输出

```
Match found: Node@1391f61c 
```

而下一步就是实施`toString`。

您应该查看[http://docs.oracle.com/javase/tutorial/java/concepts/](http://docs.oracle.com/javase/tutorial/java/concepts/)，因为它介绍了对象以及它们为何有用。

# unix - 从大文件中删除重复项

> ID：11109445
> 
> 赞同：2
> 
> 时间：2012-06-19T21:07:05.950
> 
> 标签：unix, sorting, uniq

我有一个 ~20GB 的 csv 文件。示例文件：

```
1,a@a.com,M
2,b@b.com,M
1,c@c.com,F
3,d@d.com,F 
```

此文件中的主键是第一列。我需要写两个文件，uniq.csv 和 duplicates.csv

uniq.csv 应包含所有非重复记录，并且 duplicates.csv 将包含所有具有当前时间戳的重复记录。

uniq.csv

```
1,a@a.com,M
2,b@b.com,M
3,d@d.com,F 
```

重复.csv

```
2012-06-29 01:53:31 PM, 1,c@c.com,F 
```

我正在使用 Unix Sort，以便我可以利用它的 External R-Way 合并排序算法

```
To identify uniq records
tail -n+2 data.txt | sort -t, -k1 -un > uniq.csv

To identify duplicate records
awk 'x[$1]++' FS="," data.txt | awk '{print d,$1}' "d=$(date +'%F %r')," > duplicates.csv 
```

我想知道是否可以通过单次扫描这个大文件来找到重复项和 uniq ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:41:48.667

你的`awk`脚本就快到了。要找到唯一的行，您只需要使用`in`运算符来测试条目是否在关联数组中。这使您可以一次通过数据文件收集数据，而不必调用`sort`.

```
tail -n +2 data.txt | \
awk '
    BEGIN { OFS=FS="," }
    {
        if (!($1 in x)) {
            print $0 > "/dev/fd/3"
        }
        x[$1]++
    }
    END {
        for (t in x) {
            print d, t, x[t]
        }
    }' d="$(date +'%F %r')" 3> uniq.csv > duplicates.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:41:02.717

我在几个工作前的一次采访中得到了这个问题。

一个答案是将 uniq 与“-c”（计数）选项一起使用。计数为“1”的条目是唯一的，否则不是唯一的。

> 排序 foo | 唯一的-c | awk '{ if ($1 == 1) { write-to-unique } else {write-to-duplicate }'

如果你想编写一个特殊用途的程序和/或避免排序造成的延迟，我会使用 Python。

> 读取输入文件，对每个条目进行哈希处理，并为您遇到的每个唯一键 ++ 一个整数值。请记住，即使两个项目不相等，哈希值也可能发生冲突，因此请单独保留每个键及其计数。在输入的 EOF 处，遍历哈希结构并将每个条目吐到两个文件之一中。
> 
> 您似乎不需要排序输出，只需要分类输出，因此散列应该更快。构造散列是 O(1)，而排序是 O(我忘了；是 unix 排序 Nlog(N)？)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:06:14.537

这是 perl 上的代码，它将在一次扫描中进行处理

```
#!/usr/bin/perl
open(FI,"sort -t, -k1 < file.txt |");
open(FD,">duplicates.txt");
open(FU,">uniques.txt");
my @prev;
while(<FI>)
{
    my (@cur) = split(',');
    if($prev[0] && $prev[0]==$cur[0])
    {
        print FD localtime()." $_";
    }
    else
    {
        print FU $_;
    }
    @prev=@cur;
} 
```

# java - 如何从 JPanel 中删除组件？然后重新显示框架？

> ID：11109450
> 
> 赞同：0
> 
> 时间：2012-06-19T21:07:40.287
> 
> 标签：java, swing

此代码的一些上下文，我想要做的是创建一个验证警告，如果输入包含“”作为一个值，所以如果显示错误，它会显示消息。如果它有效则不显示消息，那么当 textField 有效时如何删除消息？

该消息是一个 JPanel，其中包含一个带有文本的 JLabel，当它无效时，我将此 JPanel 添加到框架中，并在它有效时尝试将其删除。

那么我在这里做错了什么？我在 Swing 方面处于基本水平。

```
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JTextField;
import java.awt.Color;
import java.awt.Font;
import javax.swing.JButton;
import java.awt.event.ItemListener;
import java.awt.event.ItemEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

public class Test {

        private JFrame frame;
        private JTextField textField;
        private JTextField textField_1;

        /**
         * Launch the application.
         */
        public static void main(String[] args) {
                EventQueue.invokeLater(new Runnable() {
                        public void run() {
                                try {
                                        Test window = new Test();
                                        window.frame.setVisible(true);
                                } catch (Exception e) {
                                        e.printStackTrace();
                                }
                        }
                });
        }

        /**
         * Create the application.
         */
        public Test() {
                initialize();
        }

        /**
         * Initialize the contents of the frame.
         */
        private void initialize() {
                frame = new JFrame();
                frame.setBounds(100, 100, 401, 232);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.getContentPane().setLayout(null);

                JPanel panel = new JPanel();
                panel.setBounds(10, 11, 330, 94);
                frame.getContentPane().add(panel);
                panel.setLayout(null);

                JLabel lblNewLabel = new JLabel("Firstname :");
                lblNewLabel.setBounds(10, 11, 104, 14);
                panel.add(lblNewLabel);

                textField = new JTextField();
                textField.setBounds(76, 8, 244, 20);
                panel.add(textField);
                textField.setColumns(10);

                JLabel lblLastname = new JLabel("Lastname :");
                lblLastname.setBounds(10, 42, 78, 14);
                panel.add(lblLastname);

                textField_1 = new JTextField();
                textField_1.setBounds(76, 39, 244, 20);
                panel.add(textField_1);
                textField_1.setColumns(10);

                JButton btnValidate = new JButton("Validate");
                btnValidate.addMouseListener(new MouseAdapter() {
                        @SuppressWarnings("deprecation")
                        @Override
                        public void mousePressed(MouseEvent arg0) {
                                JPanel panel_1 = new JPanel();
                                JPanel panel_2 = new JPanel();

                                if(textField.getText().equals("")) {

                                        panel_1.setBackground(new Color(30, 144, 255));
                                        panel_1.setBounds(100, 116, 330, 26);

                                        JLabel lblMessage = new JLabel("0 :");
                                        lblMessage.setForeground(new Color(255, 255, 255));
                                        lblMessage.setFont(new Font("Tahoma", Font.BOLD, 13));

                                        panel_1.add(lblMessage);

                                        frame.getContentPane().add(panel_1);

                                        frame.revalidate();
                                        frame.repaint(10);
                                        frame.revalidate();
                                }
                                else if(textField_1.getText().equals("")) {

                                        panel_2.setBackground(new Color(50, 200, 255));
                                        panel_2.setBounds(10, 134, 330, 26);

                                        JLabel lblMessage = new JLabel("1 :");
                                        lblMessage.setBounds(50, 50, 50, 50);
                                        lblMessage.setAlignmentX(50);
                                        lblMessage.setForeground(new Color(255, 255, 255));
                                        lblMessage.setFont(new Font("Tahoma", Font.BOLD, 13));

                                        panel_2.add(lblMessage);

                                        frame.getContentPane().add(panel_2);

                                        frame.remove(panel_1);

                                        frame.revalidate();
                                        frame.repaint(10);
                                        frame.revalidate();
                                }
                        }
                });

                btnValidate.setBounds(231, 71, 89, 23);
                panel.add(btnValidate);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:21:04.313

最简单的方法是简单地调整可见性 ( [`JComponent#setVisible( false )`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setVisible%28boolean%29))。

如果您真的想完全删除组件，则必须删除并重新验证，如[`Container#remove`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#remove%28java.awt.Component%29)方法中所述

> 此方法更改与布局相关的信息，因此使组件层次结构无效。如果容器已显示，则必须随后验证层次结构以反映更改。

这导致代码像

```
panel.remove( componentToRemove );
panel.revalidate();
panel.repaint(); 
```

作为旁注：请用适当`null`的. 您可能想看看SO 上提供的出色[的“嵌套布局示例” ，以了解布局管理器的可能性。](https://stackoverflow.com/questions/5621338/about-swing-and-jtable/5630271#5630271)当开始使用布局管理器时，SO 上的[Swing 标签信息包含一些额外有用的链接](https://stackoverflow.com/tags/swing/info)`setBounds``LayoutManager`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:11:23.780

`yourpanel.setVisible(false);`应该隐藏您的面板，其中“yourPanel”是您的 JPanel 实例

# c++ - 随机 std::array

> ID：11109451
> 
> 赞同：0
> 
> 时间：2012-06-19T21:07:40.630
> 
> 标签：c++, arrays, random, c++11

如何制作随机 4x4 `array<array<int,4>,4>`？这个 2D 数组的每个元素都应该是从 到 的区间中的唯一数字，包括从`0`到`15`。

例子：

```
6   7  5  4
10 11  12 15
1   3  2  8
9  14  0  13 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:20:33.823

以下是您可以遵循的一些步骤：

1.  定义你的数组：`std::array<std::array<int, 4>, 4> myArray;`
2.  准备一个大小为 的临时[std::vector](http://en.cppreference.com/w/cpp/container/vector)`16`，其中包含从`0`到的值`15`。
3.  随机重新排序这个向量的元素，我建议你看看[std::random_shuffle](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)
4.  使用这个向量来初始化你的数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:40:24.697

~~不是一个坏问题。这将是我的选择：~~

### 如何生成后续数组值，将它们混合并用它们初始化二维数组？

`std::vector`我扩展了我的答案以包括仅使用和`std::vector + std::array`（如 OP 所要求的）的问题的另一个（简单）解决方案。

```
 #include <vector>
  #include <array>
  #include <algorithm>
  using namespace std;

  // ...
  const int N = 4;  // we want to have 4x4 arrays for now
  // ...

  // C++ was tremendously simplified over the years in order to 
  // get a much more complicated language. This is what you can do ...

  // ...
  // First, generate a std::vector of shuffled numbers [0..15] over 16 elements
  vector<int> v;
  for(int i=0; i<N*N; i++) v.push_back(v.size()); // initialize w/index
  random_shuffle (v.begin(), v.end());            // shuffle element values

  // (Variant 1) std::array (C++11), row-wise copy of the vector data
  //  + will only work with newer (C++11 enabled) compiler versions
  array<array<int,N>,N> amat;  // there's no assign() member, so we have
  for(int i=0; i<N; i++)       // to copy each row through external template
     copy( v.begin()+i*N, v.begin()+(i+1)*N, amat[i].begin() );
  // done
  // ... 
```

在 for 循环中，我们只进行了 4 次迭代，但总共有 4x4 个元素。因为 4 个矩阵行中的每一个都是 4 个元素宽，所以我们必须找到一种方法，如何从 shuffeld 16 元素一维向量 v: 中为每个矩阵行获取*正确*`v.begin()+i*N ... v.begin()+(i+1)*N`的 4 个元素。如果`i`为 0（第一次迭代），我们从 复制四个元素`v[0 * N] ... v[0+1 * N]`，这意味着`v[0] .. v[4]`。

这是一个序列，其中最后一个元素 v[4]*不包含*在副本中。这在某种程度上也是 C/C++ 中的一种**惯用模式**，类似于：`for(i=START; i < END; i++) ...`. 因此 END 元素**超出**范围，不包括在内。

在第二次迭代（i = 1）中，我们有`v[1 * N] ... v[1+1 * N]`，即`v[4] ... v[8]`。你看到图案了吗？

```
 // ...
  // (Variant 2) std::vector (STL), row-wise copy of the vector data
  //  + should work with almost every c++ compiler
  vector<vector<int>> vmat(N);
  for(int i=0; i<N; i++) 
     vmat[i].assign( v.begin()+i*N,  v.begin()+(i+1)*N );
  // done
  // ...
  // TODO: now try to print all elements line 4x4 matrix 
```

为什么打乱的顺序总是一样的？C 库使用随机数实现，它从相同的种子数开始生成始终相同的序列（这可能对调试很重要）。为了获得不同的改组，您必须在程序启动**一次**时重新初始化随机数生成器。

```
 ...
 srand((unsigned)time(NULL))
 ... 
```

为此，您需要 C-library time-header (for `time()`) 和最有可能的 stdlib-header (for `srand()`)：

```
 ...
 #include <ctime>
 #include <cstdlib>
 ... 
```

我故意尝试只提供非常简单的解决方案。因此，似乎没有生成器或 C++11 lambda 适合此目的。

问候

rbo

# c# - 数据库关闭后运行数据库查询

> ID：11109454
> 
> 赞同：1
> 
> 时间：2012-06-19T21:08:01.427
> 
> 标签：c#, wpf, system.data.sqlite

我`System.Data.SQLite`用来存储程序的数据和设置（在 WPF 功能区应用程序中）。

当您打开程序时，它会提示您选择要打开的 SQLite 数据库，然后它会从 SQLite 数据库的设置表中读取几个设置（项目名称、上次打开时间等）。
当应用程序关闭时`RibbonWindow.Closing`，它会调用`SQLiteConnection.Close()`.

用户还可以关闭数据库并打开一个新数据库。

出于某种原因，这些设置有时可能需要几秒钟才能显示在项目信息视图中。如果用户在此过程中单击应用程序关闭按钮或关闭项目文件以允许他们打开另一个文件，`InvalidOperationException`则会抛出 an 消息`Database is not open`。

在程序关闭时中断每个操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:51:11.030

要在 SqlLite`pooling = true;`中打开连接池，请输入连接字符串。这是一个 ADO.Net 工具，与后端无关。

如果您使用它，而不是将连接传递给线程，而是传递连接参数。然后每个线程将管理它自己的连接。

如果你不想那样做。然后你有选择。

等到线程在循环中完成，除非它们很短，否则有点废话。

忙，稍后再试。哼哼，用户可能会给你的应用程序三指敬礼，然后无论如何都要杀死它。

杀死线程，呃！

获取线程以创建它自己的非池连接，然后处理它。注意：如果您不遗余力地创建连接，您可能会使 DBMS 过载。

添加一个布尔属性，在关闭连接时设置它。除非未设置，否则请勿关闭连接。

所以尝试连接池，然后。

# html - 如何使用 CSS 使我的表格右侧边框短于单元格高度？

> ID：11109455
> 
> 赞同：1
> 
> 时间：2012-06-19T21:08:16.090
> 
> 标签：html, css, ruby-on-rails

在站点[http://www.domestika.org/foros](http://www.domestika.org/foros)中，表格的右侧边框比每行中每个单元格的单元格高度短。尝试使用检查元素，但无法弄清楚。div里面是div吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:10:35.580

在 DIV（或 TD）中使用 DIV 是正确的方法。根据您想要的视觉效果定位和调整内部 DIV 的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:12:18.710

它在带有填充的 td 内使用 div。

您可以使用 Firefox 上的 Firebug、IE 或 Chrome (F12) 中的 Webdeveloper 工具来查看它。

会是这样的：

**CSS：**

```
.pad{
    padding: 10px;
}
.border {
    border-left: solid 1px #999;
} 
```

**HTML：**

```
<td class="pad">
    <div>content here</div>
</td>
<td class="pad">
    <div class="border">content here</div>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:56:46.963

知道了：

```
.tdone {
  width: 130px;
  border-bottom: 0.1em dashed #CDCDCD;
  text-align: center;
}

.tdtwo {
  width: 130px;
  border-right: none;
  overflow: hidden;
  border-bottom: 0.1em dashed #CDCDCD;
  text-align: center;
}

.cellpadding {
  padding: 20px;
  border-right: 0.1em solid #CDCDCD;
}
```

```
<table cellpadding="15" align="center">
  <tr>
    <td class="tdone">
      <div class="cellpadding">
        registry.type
      </div>
    </td>
    <td class="tdone">
      <div class="cellpadding">
        registry.quantity
      </div>
    </td>
    <td class="tdone">
      <div class="cellpadding">
        registry.color
      </div>
    </td>
    <td class="tdtwo">
      registry.brand
    </td>
  </tr>
</table> 
```

# macos - Daniel Shiffman 的 Openkinect 软件与 Kinect for Windows 未运行 RGBDepth 示例

> ID：11109456
> 
> 赞同：1
> 
> 时间：2012-06-19T21:08:17.153
> 
> 标签：macos, osx-lion, openkinect

我已经尝试了几乎所有让 Kinect for Windows 实际生成图像的方法。我已经下载了 Daniel Shiffman 的 Openkinect 库并按照说明安装了它，但我收到了没有安装 kinect 设备的消息。我查看了 Lion 中的系统分析器，并获得了可用的相机和 Kinect 音频信息。尽管如此，我还是没有成功。我正在使用 RGBDepth 示例运行处理，每次尝试启用深度图像、RGB 图像或 IR 图像时都会收到空指针异常。我在想，因为程序无法“看到” Kinect，所以图像返回 null 并发生异常。我该怎么做才能让我的笔记本电脑“看到” Kinect？

另外，在你说插入 12V DC 适配器或切换 USB 端口之前，我已经这样做了。

2011 年底在 Macbook Pro OSX Lion 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:06:35.793

**编辑 2：工作代码：** 这个分支已经包含我所做的更改的子集，并且实际运行。它不稳定，但至少您可以获得深度和彩色图像。 [https://github.com/zarvox/libfreenect/tree/k4w-wip](https://github.com/zarvox/libfreenect/tree/k4w-wip)

不稳定性是由于达尔文 libusb 中的同步传输造成的。libfreenect 附带的补丁只是让 libusb 变得不那么不稳定。

主树不支持 Kinect for Windows。你试过这个补丁吗？[https://github.com/renewagner/libfreenect/tree/k4w-wip](https://github.com/renewagner/libfreenect/tree/k4w-wip)

**编辑**：这个存储库对于我（我们）拥有的固件版本来说太旧了。

要**检测**摄像头，您只需要在三个地方更改 usb_libusb10.c，它会检查`desc.idProduct == PID_NUI_CAMERA`. 现在必须是

```
(desc.idProduct == PID_NUI_CAMERA || desc.idProduct == PID_NUI_CAMERA_K4W); 
```

并添加：

```
#define PID_NUI_CAMERA_K4W 0x02bf 
```

还要记住，Windows 版 Kinect 没有电机。您可能需要修改假定它存在的源。

然而，这仍然是不够的。USB 命令也发生了变化。

在cameras.c中，

```
static int freenect_fetch_zero_plane_info(freenect_device *dev)
{
    freenect_context *ctx = dev->parent;

    char reply[0x200];
    uint16_t cmd[5] = {0}; // Offset is the only field in this command, and it's 0
    // Different reply based on hardware
    const int expected_reply_length = dev->kinect_for_windows ? 334 : 322;
    int res;
    res = send_cmd(dev, 0x04, cmd, 10, reply, expected_reply_length); //OPCODE_GET_FIXED_PARAMS = 4,
    if (res != expected_reply_length) {
        FN_ERROR("freenect_fetch_zero_plane_info: send_cmd read %d bytes (expected %d)\n", res, expected_reply_length);
        return -1;
    } 
```

请注意，我在 freenect_device 中添加了一个字段来存储它是否是适用于 Windows 的 Kinect。

它仍然不是流数据，但据我所知。

# android - Android Java ArrayList插入元素不起作用

> ID：11109457
> 
> 赞同：0
> 
> 时间：2012-06-19T21:08:19.197
> 
> 标签：android, insert, arraylist

我有一个带有一个按钮和一个文本视图的简单 Android 程序。单击按钮时，将在 ArrayList 中插入一个数字。但是，它不起作用。如果更改为添加，它可以正常工作。

```
package test_ad.com;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Test_adActivity extends Activity {
    ArrayList<Integer> al = new ArrayList<Integer>();
    Button myB;
    int i=0;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myB = (Button) findViewById(R.id.button1);
    myTV = (TextView) findViewById(R.id.textView1);
    myB.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            al.set(i,10*i);//insert an Integer at index i, but not working
            i++;
            if (i == 5)
                myTV.setText(al.toString());
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:11:50.137

ArrayList.set() 仅在 arraylist.size() 大于您尝试为其设置值的位置时才起作用。

[http://docs.oracle.com/javase/6/docs/api/java/util/List.html#set(int, E)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#set%28int,%20E%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:14:26.350

已编辑-您添加了 int i。第一段不再适用。

问题是 ArrayList 动态增长，但您需要告诉它们有多大，或者告诉它们增长。如果 ArrayList 当前有 5 个元素并且您尝试将项目设置在位置 10，您应该得到一个 IndexOutOfBoundsException。

您是否有不想使用 add() 方法的原因？如果你想继续使用 set()，你还应该使用 ensureCapacity() 或 size() 来确保 ArrayList 足够大。

这两种方法都记录在[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)

# python - 为什么 Python 的 re 模块在这种方法中不起作用？

> ID：11109458
> 
> 赞同：1
> 
> 时间：2012-06-19T21:08:23.953
> 
> 标签：python, class, methods

我在使用 Python 的 re 模块创建类的实例时遇到问题。这是我正在尝试做的事情：

1.  循环遍历许多数据文件的每一行。
2.  如果一行与记录的格式匹配，则使用记录的两个值作为属性创建 Record 类的实例。

`re`我希望下面的代码片段打印模块在 Record 类的方法中捕获的五个大写字母的字符串`terminal()`，但显然我误解了一些东西。实际输出如下代码。

```
 class SrcFile:
       def __init__(self, which):
          self.name = which       

    class Record(SrcFile):       
       def terminal(self):
          recordline = re.compile(r"^([A-Z]{5})\s{3}")
          if recordline.match(self):
             m = recordline.match(self)
             return m.group(1)

    for f in files:
       file = SrcFile(f)
       for l in f:
          record = Record(f)
          print(record.terminal()) 
```

同样，我希望每条记录行看到一串五个大写字母，但我实际得到的是：

```
Traceback (most recent call last):
  File "./next.py", line 78, in <module>
    print(record.terminal())
  File "./next.py", line 63, in terminal
    if recordline.match(self):
TypeError: expected string or buffer 
```

如果有人可以在代码中解释原因，那也会很有帮助

```
for f in files:
   file = SrcFile(f)
   for l in f:
      record = Record(f) 
```

使用显然是不正确的`record = Record(file)`。我通过反复试验发现了这一点，因为我无法使用带有错误代码的 record.method() 访问文件的 SrcFile 类的方法，但我不明白为什么。

我敢肯定，我对一般编程尤其是 Python 的缺乏经验是相当明显的。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:12:03.737

你的意思是写

```
if recordline.match(self.name): 
```

而不是

```
if recordline.match(self): 
```

当你打电话时`re.match`，你应该用一个字符串来做。`self`不是字符串，而是`Record`对象，而是`self.name`行中设置的字符串

```
 self.name = which 
```

还有两个与您的其他问题相关的基本问题。

1.  您永远不会使用该行本身，`l`这就是您遍历文件的全部原因。也许你的意思是写`Record(l)`。

2.  为什么 Record 类继承`SourceFile`对象（使用代码`class Record(SourceFile)`？）您应该更仔细地阅读有关[继承](http://docs.python.org/tutorial/classes.html#inheritance)的内容：继承用于在多个对象之间共享方法和属性，它并不真正适用于这段代码。

# mysql - 如何更改控制台的mysql最大执行时间

> ID：11109459
> 
> 赞同：3
> 
> 时间：2012-06-19T21:08:24.343
> 
> 标签：mysql

我正在尝试使用提供的 SQL 文件迁移数据库。但是，运行 source 命令返回我：

> 致命错误：超过 300 秒的最大执行时间

这直接来自执行 source 命令的 MySQL 控制台。它似乎失败了，因为该表有超过 1600 万行数据。我的问题是，增加最大执行时间的 mysql 设置在哪里？每个人都不断建议 php.ini 设置，但这不是通过浏览器...任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:09:45.197

我已经多次遇到这个问题并且总是得到“它是一个 php 错误”的答案。我解决它的方法是登录到 sql db 然后运行命令

```
SOURCE /path/to/file 
```

反对类似的东西：

```
root@fishBowl# mysql -u root -p db < db.sql 
```

我建议在执行 SOURCE 命令时使用绝对路径名。这应该够了吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:16:33.183

这是一个 PHP 错误，而不是 mysql 错误。MySQL 没有简单的查询超时计时器。

[致命错误：超过 300 秒的最大执行时间](https://stackoverflow.com/questions/7680572/fatal-error-maximum-execution-time-of-300-seconds-exceeded)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T21:12:26.137

接受的答案是正确的，因为这是一个 PHP 错误，但值得注意的是它与导入过程无关，并且可能是您尝试导入的 SQL 文件中作为文本存在的错误。

我在导入数据库时​​遇到了这个错误，最终发现 PHPMyAdmin 在导出时超时。这导致导出的最后一行是来自 PHP 的 HTML 格式错误，只有在 MySQL 到达该行时才会导致错误。

# sql - c程序中嵌入的sql对几张表进行排序

> ID：11109464
> 
> 赞同：0
> 
> 时间：2012-06-19T21:08:39.853
> 
> 标签：sql, c

我正在编写一个嵌入在 C 程序中的 SQL，其中包含下表：

```
table index:id, xx

table a:id, year, yy

table b:id, year, zz

table c:id, year, vv 
```

a,b,c 中的 id 属于索引中的 id

那么如何按年份选择所有的id顺序呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:17:53.333

你的问题不是很清楚你在追求什么。从表面上看，一个可能的答案可能是：

```
SELECT i.id, i.xx, a.year, a.yy
  FROM index AS i
  JOIN a ON i.id = a.id
UNION
SELECT i.id, i.xx, b.year, b.zz
  FROM index AS i
  JOIN b ON i.id = b.id
UNION
SELECT i.id, i.xx, c.year, c.vv
  FROM index AS i
  JOIN c ON i.id = c.id
ORDER BY year, id; 
```

如果所有表 A、B 和 C 都连接到 Index 中的单个行，则存在替代查询（使用更多连接，其中一些可能是 LEFT OUTER JOIN）。`yy`如果,`zz`和表示的列`vv`不兼容，那么您需要指定如何处理它们（或者干脆将它们排除在查询之外）。

# c++ - C、C++ 或 Fortran 中的多元正态 cdf

> ID：11109465
> 
> 赞同：10
> 
> 时间：2012-06-19T21:08:40.777
> 
> 标签：c++, statistics, gaussian, normal-distribution

是否有开源来计算 C、C++ 或 Fortran 中高斯分布的多变量（其中维度大于 3，而不是二元或三元）数值 cdf？

我相信 IMSL 做到了； [http://www.roguewave.com/portals/0/products/imsl-numerical-libraries/c-library/docs/7.0/html/cstat/default.htm?turl=multivariatenormalcdf.htm](http://www.roguewave.com/portals/0/products/imsl-numerical-libraries/c-library/docs/7.0/html/cstat/default.htm?turl=multivariatenormalcdf.htm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:44:54.117

你应该去源头……这个家伙自 1980 年代以来，Alan Genz 教授一直在研究如何在数值上做这个和其他多元积分。其他人实现的所有代码都来源于他的算法和论文。他的代码可以计算维度高达 1000 的多元正态分布和 T 分布的 CDF 和期望。

[http://www.math.wsu.edu/faculty/genz/software/software.html](http://www.math.wsu.edu/faculty/genz/software/software.html)

我还编写了代码来从 Java 调用这些子例程：[Compute the multivariate normal CDF in Java](https://stackoverflow.com/questions/14178759/compute-the-multivariate-normal-cdf-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:20:15.407

我认为 quantlib 应该完成这项工作...... [http://quantlib.sourcearchive.com/documentation/1.1-1/classQuantLib_1_1BivariateCumulativeNormalDistributionDr78.html](http://quantlib.sourcearchive.com/documentation/1.1-1/classQuantLib_1_1BivariateCumulativeNormalDistributionDr78.html)

# django - 如何导入 Django DoesNotExist 异常？

> ID：11109468
> 
> 赞同：135
> 
> 时间：2012-06-19T21:08:47.947
> 
> 标签：django, unit-testing, exception

我正在尝试创建一个 UnitTest 来验证一个对象是否已被删除。

```
from django.utils import unittest
def test_z_Kallie_can_delete_discussion_response(self):
  ...snip...
  self._driver.get("http://localhost:8000/questions/3/want-a-discussion") 
  self.assertRaises(Answer.DoesNotExist, Answer.objects.get(body__exact = '<p>User can reply to discussion.</p>')) 
```

我不断收到错误：

```
DoesNotExist: Answer matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-06-19T21:26:30.260

如果您想要一种通用的、独立于模型的方式来捕获异常，您也可以 import `ObjectDoesNotExist`from `django.core.exceptions`：

```
from django.core.exceptions import ObjectDoesNotExist

try:
    SomeModel.objects.get(pk=1)
except ObjectDoesNotExist:
    print 'Does Not Exist!' 
```

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2012-06-19T21:28:56.420

您不需要导入它 - 正如您已经正确编写的那样`DoesNotExist`，在这种情况下，它是模型本身的属性`Answer`。

您的问题是您在将`get`方法传递给`assertRaises`. 您需要将参数与可调用对象分开，如[unittest 文档](http://docs.python.org/library/unittest.html#unittest.TestCase.assertRaises)中所述：

```
self.assertRaises(Answer.DoesNotExist, Answer.objects.get, body__exact='<p>User can reply to discussion.</p>') 
```

或更好：

```
with self.assertRaises(Answer.DoesNotExist):
    Answer.objects.get(body__exact='<p>User can reply to discussion.</p>') 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-19T21:19:42.270

`DoesNotExist`始终是模型不存在的属性。在这种情况下，它会是`Answer.DoesNotExist`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T04:59:18.847

需要注意的一件事是，第二个参数`assertRaises` *必须*是可调用的 - 而不仅仅是属性。例如，我对这个陈述有困难：

```
self.assertRaises(AP.DoesNotExist, self.fma.ap) 
```

但这很好用：

```
self.assertRaises(AP.DoesNotExist, lambda: self.fma.ap) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-28T09:19:01.097

```
self.assertFalse(Answer.objects.filter(body__exact='<p>User...discussion.</p>').exists()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T21:28:33.157

这就是我进行此类测试的方式。

```
from foo.models import Answer

def test_z_Kallie_can_delete_discussion_response(self):

  ...snip...

  self._driver.get("http://localhost:8000/questions/3/want-a-discussion") 
  try:
      answer = Answer.objects.get(body__exact = '<p>User can reply to discussion.</p>'))      
      self.fail("Should not have reached here! Expected no Answer object. Found %s" % answer
  except Answer.DoesNotExist:
      pass # all is as expected 
```

# .net - 将 ThreadPool.QueueUserWorkItem 重构为任务并行库

> ID：11109469
> 
> 赞同：1
> 
> 时间：2012-06-19T21:09:15.043
> 
> 标签：.net, task-parallel-library, azure-table-storage

试图将 ThreadPool.QueueUserWorkItem 重构为 TPL，老实说，我也不太了解（还）。

在现实生活中，这将是一个 I/O 操作。在 PartitionKey 上查询 Azure 表存储，以便它应该有效地并行。

请参阅 GetAllTPL() 方法，因为它具有我编写的简单 TPL。它通过了这个非常简单的测试用例。TPL 是错误的，我只是不知道吗？我可以做得更好吗？当它是一个实际的表查询时，任何可能使这个简单的测试用例失败的东西？

对于这个非常有限的测试用例，ThreadPool.QueueUserWorkItem 和 TPL 都产生了相同的正确答案。将秒表放在更大（但仍然简化）的测试用例上，TPL 的速度仅比 ThreadPool.QueueUserWorkItem 快两倍。TPL 似乎以 3 人一组排队，而 ThreadPool.QueueUserWorkItem 以 2 人一组排队，仅在具有超线程的 P4 上运行。由于 thread.sleep 不是真正的工作，它并不能告诉我很多。

ThreadPool.QueueUserWorkItem 来自 .NET 3.5 代码示例（TPL 之前）。我很确定 TPL 有更好的选择，但我是 TPL 的新手。谢谢

```
using System.Threading;
using System.Threading.Tasks;

namespace WaitForConsole
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] partitionKey = new string[] { "one", "two", "three", "four" };
            IEnumerable<string> commonRowKeys = GetAllQWI(partitionKey);          
            foreach (string commonRowKey in commonRowKeys) Console.WriteLine(commonRowKey);
            Console.ReadLine();
            commonRowKeys = GetAllTPL(partitionKey);
            foreach (string commonRowKey in commonRowKeys) Console.WriteLine(commonRowKey);
            Console.ReadLine();
        }

        public static IEnumerable<string> GetAllQWI(string[] partitionKey)
        {
            // this a a code sample from .NET 3.5 and it runs on 4.0
            IEnumerable<string> finalResults = null;
            ManualResetEvent[] resetEvents = new ManualResetEvent[partitionKey.Length];
            HashSet<string>[] rowKeys = new HashSet<string>[partitionKey.Length];
            for (int i = 0; i < rowKeys.Length; i++)
            {
                resetEvents[i] = new ManualResetEvent(false);
                ThreadPool.QueueUserWorkItem(new WaitCallback((object index) =>
                {
                    Console.WriteLine("GetAllQWI " + ((int)index).ToString());
                    rowKeys[(int)index] = TableQueryGetRowKeys(partitionKey[(int)index]);
                    resetEvents[(int)index].Set();
                }), i);
            }
            try
            {
                WaitHandle.WaitAll(resetEvents);
                Console.WriteLine("WaitAll done");
                finalResults = (IEnumerable<string>)rowKeys[0];
                foreach (var thisRowKeys in rowKeys)
                {
                    finalResults = finalResults.Intersect(thisRowKeys);
                }

            }
            catch (Exception ex)
            {
                Console.WriteLine("WaitAll ex " + ex.Message);
            }
            return finalResults;
        }

        public static IEnumerable<string> GetAllTPL(string[] partitionKey)
        {
            // this is the conversion of the ThreadPool.QueueUserWorkItem to TPL 
            // seems to be working but is this optimal
            IEnumerable<string> finalResults = null;
            HashSet<string>[] rowKeys = new HashSet<string>[partitionKey.Length];
            //  how to do this in TPL
            Parallel.For(0, partitionKey.Length, i =>
            {
                Console.WriteLine("GetAllTPL " + i.ToString());
                rowKeys[i] = TableQueryGetRowKeys(partitionKey[i]);
            }); 
            //  Do I need to do anything special to wait for all the tasks to finish?
            //  Interesting that i is not necessarily in order but it does not need to be
            finalResults = (IEnumerable<string>)rowKeys[0];
            foreach (var thisRowKeys in rowKeys)
            {
                finalResults = finalResults.Intersect(thisRowKeys);
            }
            return finalResults;
        }

        public static HashSet<string> TableQueryGetRowKeys(string partitionKey)
        {
            // in real life this is an Azure table query to get all rowKeys for a partitionKey
            Thread.Sleep(10000);
            if (DateTime.Now.Millisecond % 2 == 0)
            {
                return new HashSet<string> { "alph", "beta", "gamma", "delta" };
            }
            else
            {
               return new HashSet<string> { "beta", "gamma", "delta", "epsilon" };
            }
        }
    }
} 
```

花了几个小时才走到这一步。如果 TPL 会这样做，那么我将更多地了解 TPL 而不是学习 ThreadPool.QueueUserWorkItem。TPL 太简单了，这让我有点害怕。只是想检查一下我没有遗漏什么。我从一个计算密集型样本中得到了这个 TPL。

关于 TPL 和 Azure 的不规则结果的一篇关于 SO 的帖子，但最终无法重现。 [Parallel.ForEach 能否与 CloudTableQuery 一起安全使用](https://stackoverflow.com/questions/3664083/can-parallel-foreach-be-used-safely-with-cloudtablequery)

Azure 团队的另一篇文章指出 TPL 和 Azure 没[问题 Windows Azure：代码并行化](https://stackoverflow.com/questions/3056628/windows-azure-parallelization-of-the-code)

# python - Python：如何从文件中的一行读取字符并将它们转换为浮点数和字符串，具体取决于它们是数字还是字母？

> ID：11109470
> 
> 赞同：4
> 
> 时间：2012-06-19T21:09:15.230
> 
> 标签：python, input

我有一个看起来像的文件：

```
1 1 C C 1.9873 2.347 3.88776

1 2 C Si 4.887 9.009 1.21 
```

我想逐行读取文件的内容。当我使用的行只有数字时：

```
for line in readlines(file):
    data = map(float, line.split) 
```

但这仅在 line.split 的所有元素都是数字时才有效。如何让它将字母存储为字符串，将数字存储为浮点数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T21:13:13.643

```
$ cat 1.py
def float_or_str(x):
  try:
     return float(x)
  except ValueError:
     return x

line = '1 1 C C 1.9873 2.347 3.88776'
print map(float_or_str, line.split())

$python 1.py
[1.0, 1.0, 'C', 'C', 1.9873, 2.347, 3.88776] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:13:54.153

```
for line in infile:
    data = [x if x.isalpha() else float(x) for x in line.split()] 
```

如果您的数据包含既不是字母也不是有效浮点数的字段（例如，“A1”），则会出现问题。您的数据似乎没有您所说的这些，但如果有，`try/except`Igor 建议的方法可能更适合。

我可能会使用一个更通用的函数，它可以被赋予尝试的类型，但是：

```
def tryconvert(value, *types):
    for t in types:
        try:
            return t(value)
        except (ValueError, TypeError):
            continue
    return value

for line in infile:
    data = [tryconvert(x, int, float) for x in line.split()] 
```

这会将任何转换为​​整数的内容转换为 an `int`，否则它将尝试`float`，最后它只是放弃并返回原始值，我们知道这将是一个字符串。（如果我们不知道它是一个字符串，我们可以`str`在调用结束时坚持`tryconvert()`。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T21:15:04.143

您可以使用 str.isalpha()、str.isalphanum()、str.isdigit 方法来确定您的字符串是否为数字。

# android - 在 Android 中使用 ListFragment 解析 XML

> ID：11109472
> 
> 赞同：0
> 
> 时间：2012-06-19T21:09:19.150
> 
> 标签：android, android-listfragment

我目前正在开发一个 android 项目，它连接到服务并获取 xml 并在 asynctask 中对其进行解析，然后将其显示在 ListView 中。我正在使用标准的 ListActivity，它工作得非常好，但我想使用 ListFragment，我无法从 API 示例中判断在活动或片段中进行 xml 解析是否更好。如果我在活动中进行解析，我将如何将数组列表传递给我的片段以显示它？

任何帮助或教程将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:16:56.407

我能够在 ListFragment 内执行 asyncTask，因此没有必要将数组从活动传递给片段。我刚刚创建了一个在片段内部执行异步任务的方法，并通过我的活动意图传递了我需要的变量。

# android - 将消息从服 务发送到 UI 线程 - 服务处理程序中延迟的消息

> ID：11109475
> 
> 赞同：3
> 
> 时间：2012-06-19T21:09:29.803
> 
> 标签：android, multithreading, user-interface, service, callback

我有一项从服务器提取数据的服务。而且我有需要更新的 gui 活动。

因此，在不同的情况下，例如从服务器成功提取信息，服务器必须向活动发出信号表明有新信息。

为此，我实现了这个功能：

```
 /**
 * ServerService.class
 * 
 * Sends a message to the observer that there is a new status message to be
 * pulled from the service#
 * 
 * @param pMessage
 *            the message to be set to the public status
 */
private void signalNewStatus(String pMessage) {

    //check if there is a message at all to be signaled as new
    if (pMessage != null) {
        Log.v(tag, "signalNewStatus:" + pMessage);

        // set the message
        vStatus = pMessage;

        // start the new callback via the handler
        myMessageHandler.sendEmptyMessage(I_STATUS_UPDATE_SIGNAL);
    }
} 
```

为了处理消息，我有消息处理程序：

```
 private final Handler myMessageHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        Log.i(tag, "handleMessage: "+msg.what);

        switch (msg.what) {

        case I_STATUS_UPDATE_SIGNAL: {

            // Broadcast to all clients the new value.
            final int N = myCallbackList.beginBroadcast();

            for (int i = 0; i < N; i++) {
                try {
                    myCallbackList.getBroadcastItem(i).sendUpdateStatusSignal(true);

                } catch (RemoteException e) {

                }
            }
            myCallbackList.finishBroadcast();
        }
            break; 
```

第一个函数经常被调用，我可以在日志中看到它按时正常工作。

但是消息处理的日志不会立即被调用。它被延迟并且最常在最后被调用。不知何故像散装一样。

我无法弄清楚为什么会这样。其余的运行良好，一旦处理了消息，消息就会毫无问题地到达 UI 线程。

有什么建议么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:52:45.820

如果没有更多代码，我无法确定，但这听起来像是一个线程问题。

尝试将处理程序代码放在单独的 HandlerThread 中，检索服务中的处理程序并将消息发送给它。

# objective-c - 将新的目标 C 对象分配给保留属性？

> ID：11109476
> 
> 赞同：1
> 
> 时间：2012-06-19T21:09:38.793
> 
> 标签：objective-c, memory-management, retaincount, alloc

很抱歉问了一个完全基本的问题，但如果我有一个保留的综合属性。

```
 self.myProperty = [[NSObject alloc] init]; 
```

会导致内存泄漏吗？

所以我认为我需要做的事情是否正确

```
self.myProperty = [[NSObject alloc] init];
[self.myProperty release]; 
```

为了平衡？因为这看起来很愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:46:19.617

标准做法是`autorelease`在这种情况下使用。所以：

```
self.myProperty = [[[NSObject alloc] init] autorelease]; 
```

这是因为`init`返回一个保留的对象，并且由于您的属性也保留了它，因此您必须释放它。

编辑添加：@walkytalky 在评论中提出了一个很好的观点，即它实际上`alloc`保留了对象，`init`只是返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:14:55.027

启用 ARC 后，xcode 将处理所有内存管理。当不使用 ARC 时，一定要在 dealloc 方法中释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:44:06.720

这是一个你会发现有用[的线程。](https://stackoverflow.com/questions/2189919/how-is-release-handled-for-synthesized-retain-properties)

你是对的。如果没有 ARC，任何保留的财产也需要被释放。

你也可以这样做：

```
self.myProperty = nil; 
```

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)：

> **保持**
> 
> 指定在分配时应在对象上调用保留。
> 
> 先前的值被发送一个释放消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T00:20:33.970

另一种（更详细的）技术是：

```
NSObject *o = [[NSObject alloc] init]; //retain count 1
self.myProperty = o;                   //retain count 2
[o release];                           //retain count 1 
```

不过就个人而言，我可能只是像上面第一个示例中那样使用自动释放。

# php - 将一个 php 变量传递给另一个 php 文件

> ID：11109477
> 
> 赞同：0
> 
> 时间：2012-06-19T21:09:49.567
> 
> 标签：php, mysql

我有一个存储变量的 php 文件，我需要创建一个传递该变量的提交表单。

所以当前文件的代码是：

```
if(isset($_POST['Submit'])) {
    echo "<pre>";
    $checked = implode(',', $_POST['checkbox']);
    echo $checked;
} 
```

我必须插入提交表单，点击它会转到另一个 php 文件，我需要得到 $checked 变量..我怎样才能存储这个变量？..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:19:26.403

POSTing 的原理是可以将所有数据发送到下一个 .php 页面。

```
<?php
    if ($checked == 1) {
        $checked = 'checked="checked"';
    }
    else {
        $checked = '';
    }
?>

<form action="POST" method="target_file.php">
    <input type="hidden" name="variableA" value="Something I want target_file.php to know" />
    <input type="hidden" name="variableB" value="Something else I want target_file.php to know" />
    <input type="checkbox" name="gender" value="male" <?php echo $checked ?>" />
</form> 
```

你的 target_file.php：

```
echo "Here I am :), variableA: ".$_POST['variableA'];
echo "Here I am :), variableB: ".$_POST['variableB'];
echo "Here I am :), My gender is: ".$_POST['gender']; 
```

此外，不要相信检查通过 $_POST 发送的字段值。在执行子语句之前检查每个值是什么以及它是否满足某些标准。

# c# - IIS StackOverflow 异常

> ID：11109480
> 
> 赞同：8
> 
> 时间：2012-06-19T21:10:04.327
> 
> 标签：c#, wcf, iis, stack-overflow

这是同一问题的另一种变体，在 IIS 下运行时，由于堆栈大小为 256K，会发生 StackOverflow 异常。这个问题不是什么新鲜事，已经被问过好几次了（[这里](https://stackoverflow.com/questions/595098/iis-stackoverflow)和[这里](https://stackoverflow.com/questions/3577599/opinions-suggestions-on-using-a-thread-in-iis-7-hosted-asp-net-application-to-a)）

我的问题有点不同。当客户端请求数据并且在 IIS 7 下运行的 WCF 服务尝试序列化相当大的对象图时，将引发异常。它实际上发生在序列化期间

通过在堆栈大小有限的线程中运行检索/序列化例程，我可以轻松地在开发环境中重现该问题：

```
static void Main(string[] args)
{
   Thread t = new Thread(DoWork, 262144);
   t.Start();
   t.Join();
   Console.ReadLine();
}

private static void DoWork()
{
   var dataAccess = new DataAccess();

   var data = dataAccess.LoadData();

   var serializer = new DataContractSerializer(typeof(List<Data>), null, int.MaxValue, false, true, new DataContractSurrogate());

   var memoryStream = new MemoryStream();
   serializer.WriteObject(memoryStream, data );
} 
```

这就像在 IIS 中一样模拟 StackOverflow 异常。当我将传递给线程构造函数的 stackSize 参数更改为 1MB 时，它工作正常......

我的问题是如何在 WCF 服务方法中做到这一点？换句话说，在我的 WCF 服务方法中，我没有显式创建序列化程序并调用 WriteObject。我如何/在哪里可以在可以控制stackSize的线程中做同样的工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:54:57.777

您可以通过更改可执行文件的 PE 标头来修改默认堆栈大小。使用带有 /stack 参数的 editbin.exe。请参阅[http://msdn.microsoft.com/en-us/library/35yc2tc3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/35yc2tc3(v=vs.80).aspx)

# file-io - jython 打开一个 zip 文件并读取其内容

> ID：11109484
> 
> 赞同：0
> 
> 时间：2012-06-19T21:10:28.443
> 
> 标签：file-io, jython

我正在尝试使用 FileInputStream 和 ZipInputStream 打开一个带有 jython 的 zip 文件。但是当调用 FileInputStream 时，我奇怪地得到了一个 FileNotFoundException 。

这是我的代码：

```
from java.lang import System
from java.io import ObjectInputStream, FileInputStream, BufferedInputStream
from java.util.zip import ZipInputStream, ZipEntry

file_input_stream = FileInputStream('C:\\Documents and Settings\\usr\\My Documents\\Downloads\\test.zip')
zip_input_stream = ZipInputStream(BufferedInputStream(file_input_stream))

entry = zip_input_stream.getNextEntry()
entry = zip_input_stream.getNextEntry()

object_input_stream = ObjectInputStream(zip_input_stream)
graph.model = object_input_stream.readObject()

object_input_stream.close()
zip_input_stream.close()
file_input_stream.close() 
```

我的错误是：

```
file_input_stream = FileInputStream('C:\\Documents and Settings\\usr\\My Documents\\Downloads\\test.zip')
Traceback (most recent call last):
  File "<input>", line 1, in <module>
FileNotFoundException: java.io.FileNotFoundException: C:\Documents and Settings\usr\My Documents\Downloads\test.zip (The system cannot find the file specified) 
```

我确定该文件位于正确的目录中，如果我使用非 zip 文件调用 FileInputStream，它就可以工作。我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:20:22.783

在 Windows 资源管理器中打开任何文件夹。如果您使用的是 Windows 7 或 Vista，请按 alt 键查看菜单栏（在 XP 上它应该已经可见）。选择工具 -> 文件夹选项。在视图选项卡中，在框中搜索标有“隐藏已知文件类型的扩展名”的复选框，然后取消选中它。

在那一点上，该文件可能称为“test.zip.zip”，这就是找不到“test.zip”的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:18:43.317

您知道可以在 Jython 代码中为此使用[Python zipfile库。](http://docs.python.org/library/zipfile.html)

# r - xtable 标头操作

> ID：11109489
> 
> 赞同：2
> 
> 时间：2012-06-19T21:10:47.573
> 
> 标签：r, latex, xtable

我在 R 中使用 xtable 来获取表格的 LaTeX 代码。我想修改“标题”的第一个元素（LaTeX 表中的第一行），但我只看到了一个将文本添加到行尾的选项（使用 xtable 中的 add.to.row）。

下面的例子应该澄清我想要什么。

跑步

```
xtable(matrix(c(1,0.25,3,0.75),nrow=2,dimnames=list(c('absolute','relative'),c('GNU','Leo')))) 
```

给出输出

```
% latex table generated in R 2.13.0 by xtable 1.5-6 package
% Tue Jun 19 22:39:49 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrr}
  \hline
 & GNU & Leo \\ 
  \hline
absolute & 1.00 & 3.00 \\ 
  relative & 0.25 & 0.75 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

我想接电话

```
 frequency & GNU & Leo \\ 
```

而不是线

```
 & GNU & Leo \\ 
```

但我无法使用 xtable 完成此操作。如果您知道如何执行此操作，请告诉我。另外，如果这是在错误的地方询问，或者我忽略了答案或明显的解决方案，我会提前道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:46:46.417

另一种选择是使用**Hmisc**`latex`中的函数：

 **```
library(Hmisc)
m <- matrix(c(1,0.25,3,0.75),nrow=2,dimnames=list(c('absolute','relative'),c('GNU','Leo')))
latex(m,file = "",rowlabel = "frequency") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T21:44:25.193

一种可能：

```
dat1 <- data.frame(matrix(c(1,0.25,3,0.75),nrow=2,dimnames=list(c('absolute','relative'),c('GNU','Leo'))))
dat <- data.frame(Freq = rownames(dat1), dat1)

print(
  xtable(
           x = dat
         , caption = "Your Caption"
         , label = "tab:dat"
         , align = paste(paste("l|", paste(rep("r", ncol(dat)-1), collapse=''), sep = ""), "|r", sep = "")
         , digits = c(0, rep(3, ncol(dat)))
         )
  , table.placement = "H"
  , caption.placement = "top"
  , include.rownames = FALSE
  , include.colnames = TRUE
  , size = "normalsize"
  , hline.after = c(-1, 0, nrow(dat))
  ) 
```**

# mongoid - 如何从 Mongoid 标准中获得不同的结果？

> ID：11109490
> 
> 赞同：9
> 
> 时间：2012-06-19T21:10:48.370
> 
> 标签：mongoid

当我尝试查询 Mongoid 标准的结果并仅保留字段不同的文档时，我感到非常沮丧。这样做：

```
Books.all.distinct(:name) 
```

..只返回名称字段，而不是文档。

同样使用`uniq`此处另一个问题中所述的循环对我不起作用。

```
Books.all.uniq{|x| x.name} # Returns non-unique results 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T03:46:28.600

OP，您的问题是您希望每本书都有一个唯一的名称。

这个问题是，假设您有 98 本书和 2 本书同名

如果你问你的数据库：“给我每本唯一命名的书”它会找到前 98 本书，然后它会运行到最后两本书。

两本同名书应该归还哪一本？由于考虑到详细程度，这个问题没有正确的答案，所以像假设的 .uniq 这样的东西没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:36:51.533

我不确定我是否完全理解您要达到的目标？数据库中的“名称”字段是否有唯一约束？

如果是这样，您只需检索所有书籍名称，以检索书籍本身，您将调用基本对象。

如果没有，每个名字都会有多本书，用不同的方式抓取是没有意义的。也许您正在寻找的是 groupby 功能？将所有具有相同名称的书籍分组，您可以调用`Books.all.group_by{|book| book.name}`，但由于这是针对 Web 服务器而不是在数据库级别运行的，因此对于任何合理数量的记录都将非常慢。

您最好的选择可能是执行以下操作之一：

*   使用这个问题的答案中提到的 map/reduce：[Mongoid Group By or MongoDb group by in rails](https://stackoverflow.com/questions/12014009/mongoid-group-by-or-mongodb-group-by-in-rails)
*   查看 2.2 中发布的新聚合框架 - 请参阅[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)注意：在撰写本文时，Mongoid 不支持，需要一些工作才能开始

# android - Android : JNI ERROR (app bug): local reference table overflow (max=512)

> ID：11109497
> 
> 赞同：6
> 
> 时间：2012-06-19T21:11:05.653
> 
> 标签：android, c++, java-native-interface

我有一个具有本机代码的 android 应用程序。本机代码需要从 java 代码中获取特定的值；这个值会定期更新，所以我需要在需要使用的时候获取它。我正在使用 JNI 从本机代码调用 Java 代码。

```
std::string val;
JNIEnv* env = JSC::Bindings::getJNIEnv();
jclass bridgeClass = env->FindClass("com.mypackage.MyClass");
jmethodID method = env->GetStaticMethodID(bridgeClass, "getVal", "()Ljava/lang/String;");
val = jstringToStdString(env, static_cast<jstring>(env->CallStaticObjectMethod(bridgeClass, method)));
env->DeleteLocalRef(bridgeClass); 
```

我经常打这个电话（几乎每分钟 100 次），我面临以下异常：

```
E/dalvikvm( 1063): JNI ERROR (app bug): local reference table overflow (max=512)
W/dalvikvm( 1063): JNI local reference table (0xcc8590) dump:
W/dalvikvm( 1063):   Last 10 entries (of 512):
W/dalvikvm( 1063):       511: 0x413c7e70 java.lang.String "ABC"
W/dalvikvm( 1063):       510: 0x40a39470 java.lang.Class<android.util.Log>
W/dalvikvm( 1063):       509: 0x413c8558 java.lang.String "9287391238192... (24 chars)
W/dalvikvm( 1063):       508: 0x413c8558 java.lang.String "8298731897198... (24 chars)
W/dalvikvm( 1063):       507: 0x413c8558 java.lang.String "1983918729387... (24 chars)
W/dalvikvm( 1063):       506: 0x413c8558 java.lang.String "9283719732827... (24 chars)
W/dalvikvm( 1063):       505: 0x413c8558 java.lang.String "1231219897173... (24 chars)
W/dalvikvm( 1063):       504: 0x413c8558 java.lang.String "8237330127537... (24 chars)
W/dalvikvm( 1063):       503: 0x413c8558 java.lang.String "1293657681298... (24 chars)
W/dalvikvm( 1063):       502: 0x413c8558 java.lang.String "1298753090172... (24 chars)
W/dalvikvm( 1063):   Summary:
W/dalvikvm( 1063):         2 of java.lang.Class (2 unique instances)
W/dalvikvm( 1063):       510 of java.lang.String (2 unique instances)
E/dalvikvm( 1063): Failed adding to JNI local ref table (has 512 entries) 
```

网上所有类似的问题都有一个共同的答案，那就是需要释放更多的资源。谁能告诉我在这种情况下我可以释放哪些其他资源？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T21:50:13.673

您需要删除本地 ref 到返回的值

```
env->CallStaticObjectMethod(bridgeClass, method) 
```

如下：

```
jobject returnValue = env->CallStaticObjectMethod(bridgeClass, method);
// ...
env->DeleteLocalRef(returnValue); 
```

# jquery - jQuery滑出效果问题

> ID：11109498
> 
> 赞同：2
> 
> 时间：2012-06-19T21:11:10.163
> 
> 标签：jquery, jquery-plugins

我正在尝试使用下面的功能让 DIV 在单击时从左向右滑出，但它甚至不会移动。任何想法可能是什么问题。

功能

```
<script type="text/javascript">

$("#teller").click(function () {
      $(this).show("slide", { direction: "right" }, 1000);
});
</script> 
```

有问题的 DIV

```
<div id="teller">
<a href="#"><img src="images/teller.png" width="44" height="329" alt="Tell a freind button" />
</a>
</div><!-- End Teller --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:18:28.970

代替

```
 $(this).show("slideOut", { direction: "right" }, 1000); 
```

利用`slide`

```
 $(this).show("slide", { direction: "right" }, 1000); 
```

如果它已经可见并且您想滑出，请使用隐藏和向右滑动的组合

```
$(this).hide("slide", { direction: "right" }, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:15:33.843

您可以使用规模来正确增长它：

```
 $(this).effect("scale", { percent: 400, direction: 'horizontal' }, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:17:21.673

我认为对于这个例子，你可能只是打错了：'slideOut' 实际上不是 jQuery UI 的效果类型，它只是“幻灯片”，然后你像你一样给它方向。滑进去你可以`.show()`像你一样，滑出来你可以使用`.hide()`

# python - 在 Python 3x 中使用 Tornado 和 mysql

> ID：11109499
> 
> 赞同：2
> 
> 时间：2012-06-19T21:11:19.580
> 
> 标签：python, mysql, python-3.x, tornado

Tornado 框架与 Python 3 兼容，但它使用 mysqldb 包，据我所知，它与 Python 3 不兼容。

这在使用我的 mysql 数据库时会出现任何问题吗？如果是这样，是否有解决方法？我愿意使用另一个对 Python 3 更友好的框架，但我致力于坚持使用 Python 3。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:54:55.853

没有问题，因为 Tornado 不依赖于特定客户端；为了您的方便，包含了包装器。[您可以在Golhke 的网站](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)上获得 python-mysqldb 的工作 py3 版本。由于您可以在处理程序中使用任何有效的 Python 代码，您也可以使用任何其他库（如[PyMySQL](https://github.com/petehunt/PyMySQL/)），您将无法使用 Tornado 的包装函数。

# javascript - IE 8 underscore-js 模板/jquery 模板中带有输入标签的奇怪结果

> ID：11109514
> 
> 赞同：1
> 
> 时间：2012-06-19T21:12:43.793
> 
> 标签：javascript, jquery, internet-explorer, underscore.js, jquery-templates

我已经构建了一个`underscore-js`用于呈现模板的系统，它在除 IE 之外的所有浏览器中都能正常工作。

这是模板的一个片段：

```
<td><input type="text"  id="${_id}_name" class="name" value="${name}" /></td> 
```

在 IE8 中，我将`type=text`在实际文本字段中看到，如果`name`提供的对象中是一个空字符串。

再深入一点，我发现 IE 8 中的下划线模板如下所示：

```
<tr id="319"><TD><INPUT id=319_name class=name value= type=text></TD> 
```

其他浏览器下划线的输出是：

```
<td><input type="text" id="310_name" class="name" value=""></td> 
```

所以很明显，属性值周围缺少引号导致了这个问题。

我也注意到了同样的问题`jquery-tmpl`。

下面是一段代码，展示了如何设置模板：

```
template = _.template( tmpl );

$.each(data.data.stored, function(i, row) {                        
   $('table#user_data').append(template.template(row)); 
```

任何想法如何/为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:25:43.103

好的，找到解决方案。我在 jquery-tmpl 的 github 上发现了这个问题，这里：

[https://github.com/jquery/jquery-tmpl/issues/3](https://github.com/jquery/jquery-tmpl/issues/3)

显然这是由 IE 序列化 html 的方式引起的，解决方法是在标签中放置一些空格。所以：

${name} 变成 ${ name }

# javascript - 如何在 html/javascript 中模拟 asp.net 母版页的模板功能，同时保持我的网站搜索引擎友好？

> ID：11109517
> 
> 赞同：1
> 
> 时间：2012-06-19T21:12:46.220
> 
> 标签：javascript, html, css

我习惯使用 ASP.NET masterPages 来帮助我在 ASP.NET 站点中保持一致的外观和感觉，而无需大量重复。我正在尝试做更多纯 HTML/Javascript 网站，但发现自己想回去使用 masterPages。我也不想破坏我在搜索引擎中获得良好评级的机会。如何在 html/javascript 中模拟 asp.net 母版页的模板功能，同时保持我的网站搜索引擎友好？

注意：我只想坚持使用 HTML/Javascript。请不要使用服务器端解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:15:12.247

如果 php 是可能的： [http ://www.w3schools.com/php/php_includes.asp](http://www.w3schools.com/php/php_includes.asp)

```
<html>
<body>
<?php include 'layout.html'; ?>

<h1>Welcome to my home page!</h1>
<p>Some text.</p>

</body>
</html> 
```

一个不那么优雅的解决方案是 iFrame。

```
 <iframe src="layout.html"></iframe> 
```

您可能想看看这个： http: [//www.codeproject.com/Articles/114458/Master-Pages-using-HTML-and-JavaScript](http://www.codeproject.com/Articles/114458/Master-Pages-using-HTML-and-JavaScript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:28:16.090

您应该调查样式表。如果我理解您的说法“保持一致的外观和感觉”，那么 CSS 是最简单的方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T19:56:37.660

我找到了一个不需要服务器技术的出色解决方案：[单页应用程序 (SPA)](http://en.wikipedia.org/wiki/Single-page_application)。

# c# - PHP文件在本地工作，但不在服务器上

> ID：11109522
> 
> 赞同：0
> 
> 时间：2012-06-19T21:13:10.553
> 
> 标签：c#, php, windows-phone

我目前正在 windows phone 上开发一个移动应用程序，它要求我向位于服务器上的 PHP 文件发送请求。

我遇到了一个问题，即请求在服务器上引发错误，但当我更改代码以分页本地 PHP 文件时却没有。任何想法为什么？

这是我的请求代码：

```
 string sendString = "";
        sendString += "&lat=" + (App.Current as App).mapCenter.Latitude;
        sendString += "&lng=" + (App.Current as App).mapCenter.Longitude;
        sendString += "&address=" + (App.Current as App).locationAddress;
        if (checkNumber(CountryCode.Text, AreaCode.Text, Number.Text))
        {
            sendString += "&phone=" + CountryCode.Text + "" + AreaCode.Text + "" + Number.Text;
        }
        else
        {
            MessageBox.Show("Phone number invalid");
        }
        if (checkEmail(email.Text))
        {
            sendString += "&email=" + email.Text;
        }
        else
        {
            MessageBox.Show("Invalid Email");
        }
        sendString += "device=WindowsPhone";
        sendString += (bool)prefsms.IsChecked ? "&contactMethod=sms" : "&contactMethod=email";
        ListPickerItem selectedItem = (ListPickerItem)ServiceType.SelectedItem; //Cast listpickeritem into String
        string content = (string)selectedItem.Content;
        sendString += "&serviceType=" + content;
        sendString += "&version=2.0";
        sendString += "&language=" + CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;
        (App.Current as App).watcher.Stop();
        sendData = sendString;

        if ((checkNumber(CountryCode.Text, AreaCode.Text, Number.Text)) && (checkEmail(email.Text)))
        {
            //Send data to server 
            HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create("http://localhost/test.php");
            myRequest.Method = "POST";
            myRequest.ContentType = "application/x-www-form-urlencoded";
            myRequest.BeginGetRequestStream(new AsyncCallback(RequestCallBack), myRequest);
        }
        else
        {
        }

private void RequestCallBack(IAsyncResult asyncresult)
{
        HttpWebRequest myRequest = asyncresult.AsyncState as HttpWebRequest;
        Stream dataStream = myRequest.EndGetRequestStream(asyncresult);
        //Avoid trashing procedure
        this.Dispatcher.BeginInvoke(delegate()
        {
            StreamWriter writer = new StreamWriter(dataStream);
            writer.Write(sendData);
            writer.Flush();
            writer.Close();
            //Expect a response
            myRequest.BeginGetResponse(new AsyncCallback(ResponseCallBack), myRequest);
        });

    }
  private void ResponseCallBack(IAsyncResult asyncresult)
    {
        HttpWebRequest myRequest = asyncresult.AsyncState as HttpWebRequest;
        HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(asyncresult);
        // Avoid trashing the procedure
        this.Dispatcher.BeginInvoke(delegate()
        {
            // Retrieve response stream
            Stream responseStream = myResponse.GetResponseStream();
            StreamReader reader = new StreamReader(responseStream);
            // Show response
            responseTxt = reader.ReadToEnd();
            MessageBox.Show("" + responseTxt);
        });

    } 
```

我正在向服务器发送一个字符串，服务器的PHP代码是这样的（测试的php完全一样）：

```
require_once("includes/globals.php");

$vars = ($PRODUCTION)?$_POST:$_REQUEST;

$MINIMUM_VERSION = 2.0;
function validServiceType($type)
{
return $type == "taxi" || $type == "ladies" || $type == "limo" || $type ==   "handicap";
}

if(!isset($vars['version']) || ((float)$vars['version']) < $MINIMUM_VERSION)
{
echo "oldVersion";
}
elseif(isset($vars['lat'], $vars['lng'], $vars['phone'], $vars['language']))
{
     /*do stuff */
if($data['contactMethod'] == "email" && $data['email'] == "")
{
    echo "invalid";
    die();
}
if(DB_AddHail($data))
    echo "processing";
else if (($company = DB_GetReferralTaxi($data['lat'], $data['lng'], $data['serviceType'])))
{
    /*do some more stuff*/
}
else
    echo "sorry";
}
else
{
echo "invalid";
}

?> 
```

我不断收到 OldVersion 错误，但我已经将版本号设置为 2.0...关于发生了什么的任何想法？

更新：我现在已经能够找出问题的根源；HttpWebRequest 根本没有向服务器发送任何数据；我的 $_POST 只是一个空数组。关于为什么的任何想法？

更新 2：我得到的错误是错误 302（“我使用的 URI 只是 http:// 而不是 https://）。但是在将协议更改为 https:// 后，它仍然不起作用。我的代码对那部分不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:24:29.233

您可以尝试在以 if(!isset($vars['version'])) 开头的行之前添加：

```
echo "version: " . $vars['version']; 
exit; 
```

查看它是否向浏览器输出任何内容。可能是您使用的 php 版本不喜欢 $vars = ($PRODUCTION)?$_POST:$_REQUEST; 语法，您可能必须手动通过，等等

```
$vars['version']=$_POST['version']; 
$vars['somethingElse']=$_POST['somethingElse'] 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:28:41.303

确保您在 5.4.3 上并使用 phpinfo(); 运行您的脚本；去检查。尝试更改您是 PHP/C# 来接收/发送 GET 请求而不是 POST 请求。

这样，您至少可以测试以查看何时从浏览器向 php 脚本发送请求，例如[http://yourdomain.com/script.php?name=John+Smith&Age=23](http://yourdomain.com/script.php?name=John+Smith&Age=23)，如果您得到预期的结果。下载[https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/)以在您检查结果时从浏览器的角度检查标头的工作方式。

# python - 可以使csv数据变得懒惰吗？

> ID：11109524
> 
> 赞同：5
> 
> 时间：2012-06-19T21:13:17.740
> 
> 标签：python, csv, clojure, lazy-evaluation

使用 Python 的 csv 模块，是否可以将整个大型 csv 文件读入惰性列表？

我问这个，因为在 Clojure 中有 csv 解析模块，它们将解析一个大文件并返回一个惰性序列（序列序列）。我只是想知道这在 Python 中是否可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:16:50.040

除非我误解了你，否则这是默认行为，这是读取 csv 文件的本质：

```
import csv

def lazy(csvfile):
    with open(csvfile) as f:
        r = csv.reader(f)
        for row in r:
            yield row 
```

一次给你一排。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T21:16:34.443

该`csv`模块`reader`默认是惰性的。

它将一次从文件中读取一行，将其解析为一个列表，然后返回该列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T21:18:27.453

Python 的阅读器或 DictReader 是生成器。只有在调用对象的 next() 方法时才会产生一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T21:16:47.217

csv 模块确实会延迟加载数据，一次加载一行。

# html - 突出显示锚元素

> ID：11109526
> 
> 赞同：4
> 
> 时间：2012-06-19T21:13:50.750
> 
> 标签：html, css

我有以下三个项目并排显示：

```
<div class="page-header">
    <h1 style="line-height:0">Title</h1>
        <ul style="float: right; list-style-type: none;">
    <li><a href="http://test1.com">T1</a></li>
    <li><a href="http://test2.com">T2</a></li>
    <li><a href="#">T3</a></li>
        </ul>
</div> 
```

一旦用户单击它（例如T1），我想突出显示该项目。类似于 stackoverflow 的问题、标签、用户等块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:01:00.537

看一下这个：

```
// Start up jQuery
$(document).ready(function() {
  $('a.nav').click(function(e) {
    e.preventDefault();

    $('a.nav').removeClass('current_page');

    // Do an ajax call instead
    $('#response').html($(this).attr("href"));

    $(this).addClass('current_page');
  });
});
```

```
* {
  font-family: Verdana;
  font-size: 13px;
}
div#wrapper {
  margin: 20px;
}
.current_page {
  color: red;
  font-weight: bold;
  text-decoration: none;
}
#response {
  width: 300px;
  height: 200px;
  padding: 5px;
  border: 1px dotted #777;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="wrapper">
  <a class="nav" href="http://www.google.com">Google</a> |
  <a class="nav" href="http://www.facebook.com">Facebook</a> |
  <a class="nav" href="http://www.stackoverflow.com">Stackoverflow</a> |
  <a class="nav" href="http://www.myspace.com">Myspace</a> |
  <a class="nav" href="http://www.craigslist.com">Craigslist</a>

  <p>&nbsp;</p>
  <p>Response:</p>

  <div id="response"></div>
</div>
```

所以基本上，它将一个类推`.current_page`送到激活的锚标记，该锚标记在 DOM 中印记该 MEMORY ID。然后，您将实现一个 ajax 调用以在页面中注入内容。

# ruby-on-rails - 通过 AJAX 创建表单时显示错误消息

> ID：11109531
> 
> 赞同：1
> 
> 时间：2012-06-19T21:13:54.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个名为的页面`/add`，您可以添加一个页面`Dog`，并且表单是它自己的部分。我正在使用[Simple Form](http://twitter.github.com/bootstrap/)和[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。我添加了主 Bootstrap 的文件，但[使用 gem for simple_form 来使用它](https://github.com/rafaelfranca/simple_form-bootstrap)，这样你就知道了。

狗控制器

```
# new.js.erb (deleted new.html.erb)

def new 
 @dog = Dog.new

 respond_to do |format|
  format.js
 end
end

# create.js.erb

def create 
  @dog = current_user.dogs.new(params[:dog])

  respond_to do |format|
    if @dog.save
      format.html { redirect_to add_url, notice: 'Dog was successfully added.' }
      format.json { render json: @dog, status: :created, location: @dog}
      format.js
    else
      format.html { render 'pages/add' }
      format.json { render json: @dog.errors, status: :unprocessable_entity }
    end
  end
end 
```

狗/_form.html.erb

```
<%= simple_form_for(@dog, :remote => true) do |f| %>
  <%= render :partial => "shared/error_message", :locals => { :f => f } %>
    <%= f.input :name %>      
  <%= f.button :submit, 'Done' %>
<% end %> 
```

这一行：`<%= render :partial => "shared/error_message", :locals => { :f => f } %>`

用于引导程序，因此它可以正确呈现错误 html。

页面控制器

```
def add

  respond_to do |format|
    format.html
  end
end 
```

页面/add.html.erb

```
<div id="generate-form">
</div> 
```

狗/new.js.erb

```
$("#generate-form").html("<%= escape_javascript(render(:partial => 'dogs/form', locals: { dog: @dog })) %>"); 
```

现在我将如何让它呈现部分错误，就好像它仍然存在于我`dogs/new.html.erb`通过 AJAX 创建以来？我不需要客户端验证吗？

* * *

**编辑**

**共享/_error_message.html.erb**

```
<% if f.error_notification %>
   <div class="alert alert-error fade in">
     <a class="close" data-dismiss="alert" href="#">&times;</a>
     <%= f.error_notification %>
   </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:39:43.103

您不必进行客户端验证。但是应该，通常通过 js 禁用提交按钮，直到满足客户端验证。我也不会删除 new.html.erb 以防客户端没有打开 js。我认为您的 add 可能需要 format.js 到您的 add 和 remote = true 到您的共享错误部分调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T03:21:22.210

通过我们的聊天，您提到您还有一个 create.js.erb 并且该文件正在清除表单。

使 create.js 与 new.js.erb 相同： $("#generate-form").html("<%= escape_javascript(render(:partial => 'dogs/form', locals: { dog: @dog })) %>");

让它工作。

# plone - Tal 条件始终评估为假

> ID：11109533
> 
> 赞同：1
> 
> 时间：2012-06-19T21:13:59.603
> 
> 标签：plone, zope

我正在使用 plone 并尝试在页面模板中显示表单结果。

我正在尝试使用`tal:condition`python 表达式过滤一些数据库结果，但它总是评估为 false。

代码如下所示：

```
 <tr tal:repeat="result view/results">
     <td> <span tal:condition="python:view.teams[0]==result.team_id" tal:replace="result/position">Position</span></td>
     <td> <span tal:condition="python:view.teams[1]==result.team_id" tal:replace="result/position">Position</span></td>
</tr> 
```

当团队 id 在结果中匹配时，我希望表格单元格填充团队位置，但单元格始终为空。如果我`tal:condition`从 中删除 并用它`span`替换它，我可以检查结果是否正确。`tal:replace="result/position"``tal:replace=python:view.teams[0]==result.team_id``True``False`

谁能帮我解决这个问题？为什么`tal:condition`总是评估为假？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:15:29.820

我完全希望这能奏效，所以肯定有其他问题。

像你这样的 Python 表达式很常见；[互联网](http://www.scips.worc.ac.uk/documentation/page_template_design.html)[上](http://www.catapultsolutions.net/resources/tal-condition-based-on-url-in-a-plone-site.html)有[几个](https://github.com/Jarn/collective.solr/blob/master/src/collective/solr/browser/errors.pt#L21) [例子](https://github.com/plone/plone.app.controlpanel/blob/master/plone/app/controlpanel/types.pt#L61) [表明](http://plone.org/documentation/manual/developer-manual/internationalization-i18n-and-localization-l10n/language-selector)它们可以正常工作。

尝试使用`tal:replace="python:repr(view.teams)"`和`tal:replace="python:repr(result.team_id)"`语句进一步调试值，以 100% 确定您的数据结构是什么样的。

# android - 以程序方式删除快捷方式 Android 4.0+

> ID：11109534
> 
> 赞同：0
> 
> 时间：2012-06-19T21:14:03.330
> 
> 标签：android

我一直在使用意图 con.android.launcher.action.UNINSTALL_SHORTCUT 删除快捷方式，但这似乎不再适用于 Android 4.0+。这是否已被弃用，如果是，有什么解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:32:04.063

是的，它已被删除，因为它从来没有被官方 API 弃用不是正确的词 :) 到目前为止找不到解决方法。

如果您试图防止重复，这可能会起作用：

```
installer.putExtra("duplicate", false); 
```

如果我发现其他任何东西，我会告诉你的。

# javascript - Node.js/ v8：如何制作自己的快照以加速启动

> ID：11109538
> 
> 赞同：10
> 
> 时间：2012-06-19T21:14:28.277
> 
> 标签：javascript, node.js, v8, snapshot

我有一个 node.js (v0.6.12) 应用程序，它首先评估一个 Javascript 文件 startup.js。评估 startup.js 需要很长时间，如果可能的话，我想将其“烘焙”到 Node 的自定义构建中。

与 Node 一起分发的 v8 源目录 node/deps/v8/src 包含一个几乎可以用来执行此操作的 SconScript。在第 302 行，我们有

```
LIBRARY_FILES = '''
runtime.js
v8natives.js
array.js
string.js
uri.js
math.js
messages.js
apinatives.js
date.js
regexp.js
json.js
liveedit-debugger.js
mirror-debugger.js
debug-debugger.js
'''.split() 
```

这些 javascript 文件存在于同一目录中。构建过程中的某些东西显然会评估它们，拍摄状态快照，并将其保存为 node/out/Release/obj/release/snapshot.cc 中的字节字符串（在 Mac OS 上）。该文件似乎已被烘焙到 Node.js 中。

通过更改 SconScript 可以对启动快照进行一些自定义。例如，我可以通过更改 date.js 来更改内置 Date.toString 的定义。我什至可以通过将 startup.js 添加到库文件列表中来添加新的全局变量，其中包含`global.test = 1`.

但是，我不能在`startup.js`. 如果它包含`Date.toString = 1;`，即使代码在节点 repl 处有效，也会导致错误：

```
Build failed:  -> task failed (err #2): 
    {task: libv8.a SConstruct -> libv8.a}
make: *** [program] Error 1 
```

它显然不能使用依赖于 Node 添加到 v8 的库的代码。`global.underscore = require('underscore');`导致同样的错误。

理想情况下，我想要一个工具 customSnapshot，它`customSnapshot startup.js`使用 Node 评估 startup.js，然后将快照转储到文件 snapshot.cc，我可以将其放入 Node 源目录。然后我可以构建节点并告诉它不要重建快照。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:49:28.550

我刚刚为 mksnapshot 命令添加了一个选项（在您构建 V8 时运行）。新的 --extra-file=filename.js 标志允许您指定要在进程中加载​​和运行的文件，然后放入快照中。它位于 V8 的主干版本上，而不是用于节点 0.8 的 3.11 分支，因此您必须使用 V8 版本 3.11 运行节点 0.8。据我目前所知，这是可行的，但你会有点靠自己。

如果您尝试此操作并且它对您不起作用，请提交错误。

# html - 显示来自其他网站的内容

> ID：11109541
> 
> 赞同：-1
> 
> 时间：2012-06-19T21:14:32.870
> 
> 标签：html, load, show

好的，当用户打开 ex. www.google.com 他从另一个网站加载内容但保持网址不变？我想要的只是当我在我的电脑前打开时。www.google.com 他加载了我一些其他网站。或者当我打开网站前是否有可能。www.google.com 他不是加载我写的 HTML 代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:54:22.250

由于您正在考虑使用 Greasemonkey 更改页面上的某些元素（根据您对问题的评论和@idrumgood 的回答），我建议您看一下：

[http://www.tuxradar.com/content/greasemonkey-beginners](http://www.tuxradar.com/content/greasemonkey-beginners)

看起来这正是您正在寻找的（[谷歌是您的朋友](https://www.google.nl/search?q=greasemonkey+change+page)，这里的第一个结果......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:17:51.000

我不确定您真正要问的是什么，但如果您控制网站的源代码（所以不是 www.google.com），您可以通过`iframe`

```
<iframe src="http://www.othersite.com"></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:36:47.510

如果您可以让浏览器使用您控制的 http[代理](http://en.wikipedia.org/wiki/Proxy_server)（透明或不透明），您可以提供您想要的任何内容。记住不要作恶。

# c++ - 在派生类中调用模板基类的强制转换运算符

> ID：11109542
> 
> 赞同：0
> 
> 时间：2012-06-19T21:14:45.990
> 
> 标签：c++, templates, inheritance, casting, virtual

我有一个模板类，称为`Cell`，这里的定义：

```
template <class T>
class OneCell
{
.....
} 
```

我有一个从`Cell`到 T 的演员表操作员，在这里

```
virtual operator const T() const
{
   .....
} 
```

现在我有派生类，称为`DCell`，here

```
template <class T>
class DCell : public Cell<T>
{
.....
} 
```

我需要覆盖 Cell 的演员表运算符（插入一点 if），但在我需要调用 Cell 的演员表运算符之后。在其他方法中，它应该类似于

```
virtual operator const T() const
{
    if (...)
    {
        return Cell<T>::operator const T;
    }
    else throw ...
} 
```

但我得到一个编译器错误

> 错误：“const int (Cell::)()const”类型的参数与“const int”不匹配

我能做些什么？

谢谢你，对我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:19:53.573

您缺少括号，因此编译器认为您正在尝试返回成员函数，而不是调用它。

```
 return Cell<T>::operator const T(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:19:46.827

你实际上并没有打电话给运营商：

```
return Cell<T>::operator const T(); 
```

完整代码：

```
template <class T>
class OneCell
{
public:
    virtual operator const T() const
{
        return T();
    }
};

template <class T>
class DCell : public OneCell<T>
{
public:
    virtual operator const T() const
    {
        cout << "operator called";
        return OneCell<T>::operator const T();
    }
};

int _tmain(int argc, _TCHAR* argv[])
{
    DCell<int> x;
    int y = (int)x;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:19:18.613

考虑以下代码与 和 的`Cell`实现`DCell`：

```
#include <iostream>
#include <exception>

template<class T>
class Cell
{
protected:
    T cnt;
public:
    Cell(const T& cnt = T()) : cnt(cnt){}
    virtual operator const T() const { return cnt; }
};

bool test_bool = true;

template<class T>
class DCell : public Cell<T>
{
public:
    DCell(const T& cnt = T()) : Cell<T>(cnt){}
    virtual operator const T() const
    {
        if(test_bool)
        {
            return Cell<T>::operator const T(); // Here you had Cell<T>::operator const T;
        } else {
            throw std::exception();
        }
    }
};

int main()
{
    DCell<int> cell(5);
    std::cout << static_cast<int>(cell) << "\n"; // prints 5 (and a new line)
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:15:58.853

不要使操作员虚拟。相反，委托给`protected virtual`辅助函数。

```
template <class T>
class Cell
{
    public:
        operator const T() const { return cvt_T(); }
    protected:
        virtual const T cvt_T() const;
};

template <class T>
class DCell : public Cell<T>
{
    const T cvt_T() const
    {
        if (...)
        {
            return Cell<T>::cvt_T();
        }
        else throw ...
    }
}; 
```

这和其他好的实践可以从 GotW 学习，[这里是关于虚拟架构的部分](http://www.gotw.ca/publications/mill18.htm)。

# backbone.js - Backbone 触发链接点击导航的首选方式？

> ID：11109553
> 
> 赞同：3
> 
> 时间：2012-06-19T21:15:22.007
> 
> 标签：backbone.js

`Router.navigate`当用户单击链接时，是否有首选方式在 Backbone 中触发？

例如，一个模板可能有一个链接`<a href="/logout">Log Out</a>`。首选方法真的是使用自定义类并将点击处理程序附加到视图中的该类吗？这似乎会产生大量重复代码，所以我正在寻找更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:21:02.137

处理这种事情的方法是扩展 Backbone 对象（在本例中为 View）。您会在 Backbone 文档中注意到，这是鼓励的，并且鉴于其极简代码库，这是必要的。我建议查看[Marionette](https://github.com/derickbailey/backbone.marionette)（在 Github 上）和站点[Backbone patterns](http://ricostacruz.com/backbone-patterns/)以了解扩展 Backbone 核心的好方法。

例如，也许您可​​以使用一种方法来扩展*View*，该方法可以根据需要连接导航处理程序：

```
Backbone.View.prototype.wireupNavs = function() {
    var that = this;
    this.$el.find("a[role=nav]").each(function() {
        var target = $(this).attr('href');
        that.bind("click", router.navigate(target);
    });
} 
```

然后任何你想要作为 Backbone nav 元素*的*标签，你只需用*role="nav"*属性装饰；并在相应视图的*初始化*函数中调用*this.wireupNavs() 。*

# iphone - iphone 的主宰可可因 Apple Mach-O 链接器 (id) 错误而中断

> ID：11109555
> 
> 赞同：0
> 
> 时间：2012-06-19T21:15:30.773
> 
> 标签：iphone, cocoa, xcode4.3, juggernaut

我尝试使用剑圣可可：

[https://github.com/fpotter/juggernaut-cocoa](https://github.com/fpotter/juggernaut-cocoa)

将此行添加到我的代码中：

```
 JuggernautClient *client = [[JuggernautClient alloc] initWithHost:@"myhost" port:1740];
    [client subscribe:[NSString stringWithFormat:@"/reports/%@/new", current_unit.unit_id]];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(didReceiveMessage:)
                                                 name:JuggernautDidReceiveMessageNotification
                                               object:nil]; 
```

我收到以下错误：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_JuggernautClient", referenced from:
objc-class-ref in MapViewController.o
  "_JuggernautDidReceiveMessageNotification", referenced from:
 -[MapViewController viewDidLoad] in MapViewController.o
 ld: symbol(s) not found for architecture i386
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:22:10.643

当我看到这个错误时：

```
 ld: symbol(s) not found for architecture i386 
```

*这告诉我 JuggernautClient.m 未包含在构成您的应用程序目标*的文件集合中。转到 JuggernautClient.m 的文件检查器并将其设置为包含在您的构建中。

![它看起来像这样：](../Images/77aadfbd6f649c902ca57a67c935f6af.png)

这是一个略有不同的图像，但我从[我也给出的相关问题的答案中选择了它。](https://stackoverflow.com/a/8852905/981049)

# android - 开始一个虚拟活动

> ID：11109557
> 
> 赞同：2
> 
> 时间：2012-06-19T21:15:37.063
> 
> 标签：android, android-activity

我最近开始了 Android 编码，想创建一个小程序来改变屏幕亮度......嗯.. 我知道已经有一些问题，但我尝试了这里建议的所有内容，真的不知道如何解决我的问题 :)我知道您必须在设置亮度后“刷新”屏幕。此时我的问题开始了......我已经创建了某种虚拟活动，并且在我的主要活动中也有一个意图，但似乎意图不启动虚拟活动......这是我主要的相关部分活动：

```
button1.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Settings.System.putInt(getContentResolver(),
            Settings.System.SCREEN_BRIGHTNESS, 255);

            Intent in = new Intent(Test.this,DummyBrightnessActivity.class); //it is working...
            startActivity(in); //it is working...
        } 
```

和虚拟代码：

```
public class DummyBrightnessActivity extends Activity{
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    this.finish();

} 
```

}

manifest.xml：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Test"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.Test.DummyBrightnessActivity"
        android:taskAffinity="com.Test.Dummy"
        android:excludeFromRecents="true"
        android:theme="@style/EmptyActivity"></activity>
</application> 
```

也许相关，styles.xml：

```
<resources>

<style name="EmptyActivity" parent="android:Theme.Dialog">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Toast</item>
    <item name="android:background">#00000000</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:colorForeground">#000</item>
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:windowIsFloating">true</item>
</style>

</resources> 
```

哦，顺便说一句...我没有收到任何错误...假人不会启动（我想是的，因为当我在没有 android:excludeFromRecents="true" 的情况下运行它时，它不会出现在最近的应用程序列表中。

我希望有人可以帮助我...祝你有美好的一天

//编辑：嗯......看起来代码工作正常xD刚刚重新查看并放置一些文本而不是“finish（）”并且活动正常运行......但我认为完成必须在那里： / 也许您有任何建议如何“重置”屏幕？看起来我理解错误的教程之一......

//EDIT2：嗯......我不能在前 8 小时内发布我自己的问题的答案：D 所以我把它贴在这里：

谢谢大家的帮助和提示，但现在我为自己找到了解决方案：D 这个：[从小部件刷新显示？](https://stackoverflow.com/questions/4643320/refreshing-the-display-from-a-widget) “启动一个空活动并执行 WindowManager 刷新”部分对我有用。我在问这里之前遇到了这个问题，但当时我只是无法让它工作：D 所以，无论如何，非常感谢你;）这只是一个例子，它可以是很难编写“一个小的，快速编码的初学者应用程序” ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:30:49.823

您可能还需要考虑在您的视图上调用 invalidate() 而不是启动和关闭一个新视图。

我不确定它是否适用于这种情况，因为我没有尝试更改屏幕亮度。但是，根据[http://developer.android.com/reference/android/view/View.html#invalidate](http://developer.android.com/reference/android/view/View.html#invalidate) ()，在视图上调用 invalidate() 将导致 onDraw() 被调用，这听起来像你想要的.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:32:56.280

我认为这应该有效。当我从一页移动到另一页时，我会使用它。它只是识别类并启动活动，运行您的新活动将要执行的任何操作。

```
public void onClick(View v) {
    // (IN THIS EXAMPLE) IDENTIFIES WHAT IS BEING PRESSED 
    if(v.getId() == R.id.activity) {
        // STARTS THE OTHER ACTIVITY
        Intent i = new Intent(this,Activity2.class);
        this.startActivity(i);
    } 
```

此外，删除`finish();`因为您的活动同时初始化和关闭。确保您设置了内容视图 ( `setContentView(R.layout.main);`)，以便您可以判断您开始的活动是否真正将您带到您想要的页面。

编辑：您说未检测到按钮按下。尝试将 OnClickListener 直接实现到您的活动 android 中，像这样导入它。

```
public class MyApplication extends Activity implements OnClickListener { 
```

另外，请确保您的按钮已正确初始化。尝试删除 this: `button1.setOnClickListener(new OnClickListener()`，然后将其添加到您的代码中：

```
button1 = (Button) findViewById(R.id.activity);
button1.setOnClickListener(this); 
```

# jquery - 如何使用 jQuery 移动多个 DOM 元素？

> ID：11109558
> 
> 赞同：1
> 
> 时间：2012-06-19T21:15:52.083
> 
> 标签：jquery, html, dom

我有以下代码：

```
<div class="product">
    <div class="description"></div>
    <div class="image"></div>
</div>

<div class="product">
    <div class="description"></div>
    <div class="image"></div>
</div>

<div class="product">
    <div class="description"></div>
    <div class="image"></div>
</div> 
```

我试图选择所有 .image 元素并将它们移动到每个 .product 元素之前。

当我使用以下命令时，它会获取所有图像并将它们移动到第一个 .product 之前。我卡住了，我尝试了一个 foreach - 这似乎没有用。

```
$('.product').before($('.image')); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T21:18:09.200

我建议：

```
$('.image').each(
    function(){
        $(this).insertBefore($(this).closest('.product'));
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xRqcL/)。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`each()`](http://api.jquery.com/each/).
*   [`insertBefore()`](http://api.jquery.com/insertBefore/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T21:24:33.203

我认为这也可能有效：

```
$('.product').each(function (index) {
    $(this).before($('.image').eq(index));
}); 
```

# javascript - 如何从回调函数访问对象？

> ID：11109569
> 
> 赞同：0
> 
> 时间：2012-06-19T21:16:41.483
> 
> 标签：javascript, asynchronous, google-feed-api

我感觉很糟糕，因为很可能已经回答了这个问题，而我只是没有使用正确的搜索词。我对异步 JavaScript 很陌生。所以，我会先道歉。如果有人甚至可以帮助我获得正确的搜索词，我将不胜感激。

我正在尝试使用 Google 提要 API。当我按照 hello world 部分中列出的股票示例进行操作时，它就可以工作了。我正在尝试制作一些更具可扩展性的东西，以便我可以在多个地方使用它。所以我创建了一个对象...

```
function AlertRSS(num, url, div, date) {
  this.num = typeof num !== 'undefined' ? num : 5;
  this.url = typeof url !== 'undefined' ? url : 'http://arstechnica.com/author/caseyjohnston/feed/';
  this.sel = typeof sel !== 'undefined' ? sel : '#alert';
  this.date = typeof date !== 'undefined' ? date : this.getYesterday();
} 
```

然后我尝试在方法内部调用对象...

```
AlertRSS.prototype.displayFeed = function() {
  var retval = null;
  var feed = new google.feeds.Feed(this.url);
  feed.load(function(result) {
  var tmp = this;
    if (!result.error) {
      for ( var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        console.log(sel + ' <h2><a href="' + entry.link + '">' + entry.title + '</a></h2><br  />');
        $(tmp.sel).append('<h2><a href="' + entry.link + '">' + entry.title + '</a></h2><br  />');
      }
    }
  });
}; 
```

但是，似乎我无法从对象访问属性。我一直`Uncaught ReferenceError: sel is not defined`在控制台中得到一个。

我认为这个问题与范围有关，但在这一点上，我觉得有点超出我的深度。非常感激任何的帮助。

# 更新

对于第一篇文章，这是一个讽刺。我的代码中有很多错误。两种回答都是正确的。但是，如果像我这样的另一个可怜的新手看到这个问题，我想把工作代码放在那里。

问题原来是`var tmp = this;`线路的位置。它需要放置在内部回调函数之外才能工作。根据 Tomasz Nurkiewicz 的建议，我也`var tmp`改为`var that`. 工作代码如下：

```
function AlertRSS(num, url, sel, date) {
  this.num = typeof num !== 'undefined' ? num : 5;
  this.url = typeof url !== 'undefined' ? url : 'http://arstechnica.com/author/caseyjohnston/feed/';
  this.sel = typeof sel !== 'undefined' ? sel : '#alert';
  this.date = typeof date !== 'undefined' ? date : this.getYesterday();
}

AlertRSS.prototype.displayFeed = function() {
  var feed = new google.feeds.Feed(this.url);
  var that = this;
  feed.load(function(result) {
    if (!result.error) {
      for ( var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        console.log(that.sel + ' <h2><a href="' + entry.link + '">' + entry.title + '</a></h2><br  />');
        $(that.sel).append('<h2><a href="' + entry.link + '">' + entry.title + '</a></h2><br  />');
      }
    }
  });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:20:51.083

您正在正确地创建`tmp`要捕获的变量`this`（请注意，通常`that`在此上下文中调用它）。你甚至在这里正确地使用了这个参考：`tmp.sel`。但是，您忘记在此之前使用它：

```
console.log(sel + ' <h2><a href="' + entry.link + '">' + entry.title + '</a></h2><br  />'); 
```

改成：

```
console.log(tmp.sel + //... 
```

你会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:22:00.913

您的函数参数要求 div 而不是 sel。

# javascript - 从 Web API 获取 JSON 数据后，在页面加载时动态添加新的 HTML 元素

> ID：11109575
> 
> 赞同：2
> 
> 时间：2012-06-19T21:17:10.867
> 
> 标签：javascript, html, json, cordova

我正在使用 Phonegap/Apache Cordova 构建一个混合 Android 应用程序。我的应用程序应该从我的 web api 获取数据。我正在使用 JSON 将数据提供给 APP。所以我得到了以下代码：

```
function init() { 
document.addEventListener('deviceready', onDeviceReady, false);
var url = "http://23.21.128.153:3000/regions.json";var jsonresults;
    $.getJSON(url,function(data){
        jsonresults = data;
          $.each(jsonresults, function(i,v){
          $('#main-content').append('<li>'+jsonresults[i].name+'</li>');
        });
    });
} 
```

而且在 html 的主体上，我有一个名为 main-content 的 div。Everythings 在 Eclipse 浏览器中运行良好，但在 Android 模拟器上无法运行。不确定是否有另一种方法可以使用 JSON 从 Web API 中提取数据并在获取数据后动态创建 HMTL 元素。

[https://gist.github.com/2956660](https://gist.github.com/2956660)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:11:01.847

从 web api 获取数据非常容易。试试这个代码。它会解决你的问题，

通过jquery mobile非常容易。您可以使用普通的 Ajax 和一点点 JSON 来完成您的工作。我完成了 php 服务器。这里的示例代码，

通过 jquery 向服务器发送请求。

```
$.ajax({
          url: <your Server URL>,
          dataType: 'jsonp',
          jsonp: 'jsoncallback',
          timeout: 5000,
          success: function(data, status){
                             /*Process your response here*/

      jsonresults = data;
      $.each(jsonresults, function(i,v){
      $('#main-content').append('<li>'+jsonresults[i].name+'</li>');
    });

 $.mobile.changePage($('#index')); /*page navigate the particular where data shown*/
 $("#index").trigger("pagecreate"); /*This is like a page refresh and load the injected data in jquery*/
                        }
       }); 
```

在 php 服务器文件中，

```
<?php
$data="I am sending response to you";

/*you have to mention this callback compulsory*/

echo $_GET['jsoncallback'] . '(' . json_encode($data) . ');';
?> 
```

# database-design - 键值存储“行”是完全不同类型的好习惯吗？

> ID：11109578
> 
> 赞同：1
> 
> 时间：2012-06-19T21:17:47.027
> 
> 标签：database-design, nosql, amazon-dynamodb

我们有一个 REST API，其中一部分显示用户的“目录”。目录是产品列表以及一些整体目录元数据（例如剩余金额）。

我们正处于尝试将此元数据添加到目录响应的阶段，但被困在我们的数据库设计上。后备存储是 Amazon 的 DynamoDB，它只是一个键值存储。值得注意的是，它支持主键（“哈希”）和辅助键（“范围”）。

目前我们的数据库条目如下所示：

```
{ customerId: "xxx", productId: "yyyy", productPrice: "zzz" } 
```

我们可以或多或少地直接将这些翻译成目录条目，从而产生以下响应

```
{ products: [{ id: "yyyy", price: "zzz" }] } 
```

但是我们现在想要一个带有元数据的响应，比如

```
{ metadata: { moneyLeft: 5 }, products: [{ id: "yyyy", price: "zzz" }] } 
```

问题是，**我们如何将元数据存储在我们的数据库中**？

* * *

**方法 #1：分离数据库**

创建一个单独的元数据表，其中包含`customerId`所有元数据属性的主键和列。然后查询两个表（对 DynamoDB 的两个 HTTP 请求），并组合结果。

**方法#2：面向查询**

重新调整当前表的用途，使其专为此目录显示查询而设计。它将有两种类型的行，例如

```
{ customerId: "xxx", productId: "yyyy", productPrice: "zzz", type: "product" }
{ customerId: "xxx", moneyLeft: 5, type: "metadata" } 
```

（虽然更强大一点）。然后我们可以使用 查询从表中选择所有行，并在我们的服务器代码中通过打开属性`customerId = xxx`将它们转换为所需的响应。`type`

* * *

我倾向于方法#2，因为方法#1 似乎仍然停留在关系数据库思维中，并且它会涉及两个数据库调用（= HTTP 请求）。但这太奇怪了，我不确定这是个好主意。也许有第三种方法？我想真正的答案是“你应该使用文档数据库”，但我们现在非常致力于 DynamoDB -_-。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:20:40.913

表的范围键是什么？我假设哈希键是 customerId...
总的来说，在考虑 NoSQL 解决方案时，我发现自己在想“我要查询什么”
如果您的查询始终是“查询所有带有 customerId = XXX 的项目”，那么我认为是糟糕的设计将另一个“元数据”项目滑到那里。
更健壮和浪费的方法是将元数据连接到所有项目中，但这在更新方面本身就有缺点。（我也不推荐它）
我认为即使它听起来像一种关系方法，在你的场景中我会坚持使用另一个表。
此外，通过部分了解您的数据库，我仍然认为查询用户的元数据而不实际查询他的目录是有意义的。

# javascript - 在javascript中向变量添加其他对象？

> ID：11109581
> 
> 赞同：1
> 
> 时间：2012-06-19T21:17:52.907
> 
> 标签：javascript

我有一个可能包含对象或未定义的变量。我希望向此变量添加其他对象。我怎么做？

适用时的代码示例：

```
function(){ 
    var comments;
    if(fbposts[fbpost].comments.count){
        for(var comment in fbposts[fbpost].comments.data){
                comments = ({
                    name: fbposts[fbpost].comments.data[comment].from.name,
                    link: "http://www.facebook.com/"+fbposts[fbpost].comments.data[comment].from.id,
                    img: "http://www.facebook.com/"+fbposts[fbpost].comments.data[comment].from.id+"/picture",
                    message: fbposts[fbpost].comments.data[comment].message,
                    created: timeDifference(Date.parse(fbposts[fbpost].comments.data[comment].created_time)),
                })
            }

    }
    return comments;}(), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:20:21.117

测试它是否未定义，如果是，则将其分配给一个空对象：

```
if (typeof yourVar === "undefined")
    yourVar = {};

yourVar.additionalObject1 = { something : "test" };
yourVar.additionalObject2 = { something : "else" }; 
```

**编辑**：好的，既然您已经在问题中添加了代码，那么您的变量似乎`comments`应该是一个数组，因为您是在循环中添加它的。所以我认为你想做这样的事情：

```
(function(){ 
    var comments = [];
    if(fbposts[fbpost].comments.count){
        for(var comment in fbposts[fbpost].comments.data){
                comments.push({
                    name: fbposts[fbpost].comments.data[comment].from.name,
                    link: "http://www.facebook.com/"+fbposts[fbpost].comments.data[comment].from.id,
                    img: "http://www.facebook.com/"+fbposts[fbpost].comments.data[comment].from.id+"/picture",
                    message: fbposts[fbpost].comments.data[comment].message,
                    created: timeDifference(Date.parse(fbposts[fbpost].comments.data[comment].created_time)),
                });
         }    
    }
    return comments;
})(); 
```

`comments`因此，将为您的源数据中的每个评论包含一个元素。如果没有评论，它将是一个空数组。`undefined`（如果您希望它在没有注释的情况下返回，则将变量声明保留在原处并在语句中`var comments`添加。）`comments=[];``if`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:21:12.160

如果您使用的是 jQuery（为什么不使用？），那么您想看看`$.extend()`

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

# android - 使用 Base64OutputStream 将字符串上传到服务器 - Android

> ID：11109586
> 
> 赞同：1
> 
> 时间：2012-06-19T21:18:11.807
> 
> 标签：android, base64, photo

我一直在使用这段代码，但遇到了一些内存问题：

```
 // Get the image from the sdcard
      Bitmap bm = BitmapFactory.decodeFile("/sdcard/myimage.jpg");
      // turn image into byte array output stream
      ByteArrayOutputStream baos = new ByteArrayOutputStream();  
      // 'compress' the jpeg
      bm.compress(Bitmap.CompressFormat.JPEG, 100, baos);               
      // get byte[] array of the image        
      byte[] byteArray = baos.toByteArray();
      // turn image into base64 string        
      String encodedImage = Base64.encodeToString(byteArray, Base64.DEFAULT);
      // and base64 string to 'params' value pair        
      params.add(new BasicNameValuePair("userfile", encodedImage));

      try {
       HttpPost request = new HttpPost();

       String urlString = "http://www.example.com";
       request.setURI(new URI(urlString));

     if(params != null) {
        request.setEntity(new UrlEncodedFormEntity(params));
        HttpClient client = new DefaultHttpClient();
        client.execute(request);
     } // end if
} // end try 
```

有人建议我应该使用`Base64OutputStream`而不是`Base64.encodeToString`，但我没有成功使用`Base64OutputStream`输出可以上传到服务器的字符串。在 IMAGE上使用的任何示例`Base64OutputStream`都会有很大帮助。

编辑

要使答案起作用，您需要在您的 Android 项目中添加两个文件：apache-mime4j-dom-0.7.2.jar 和 httpmime-4.1.3.jar；

[您可以从http://james.apache.org/download.cgi#Apache_Mime4J](http://james.apache.org/download.cgi#Apache_Mime4J)下载 apache-mime4j-dom-0.7.2.jar - 下载二进制文件，解压缩，然后找到 apache-mime4j-dom-0.7.2 .jar 文件。

然后去[http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.httpcomponents/httpmime/4.1.3](http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.httpcomponents/httpmime/4.1.3)下载httpmime-4.1.3.jar

然后将这两个文件拖到 Eclipse 中的项目中。然后在 Eclipse 中，选择 Project > Properties。选择Properties Pop-up，选择Java Build Path。单击“库”选项卡（查找源 | 项目 | 库 | 订购和导出）。点击“添加罐子”，选择apache-mime4j-dom-0.7.2.jar和httpmime-4.1.3.jar；然后单击“订购和导出”选项卡。检查 apache-mime4j-dom-0.7.2.jar 和 httpmime-4.1.3.jar；然后关闭该弹出窗口并从 Eclipse 菜单中选择 Project > Clean。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:09:20.800

如果可能，您不应该对您的文件进行 base64 编码并在 URL 中发送它们，而是使用 MultiPart 文件上传：

```
HttpPost post = new HttpPost(URL);
HttpClient client = new DefaultHttpClient();
httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );

// picture
entity.addPart( "userfile", new FileBody( 
    new File( MyApp.getContext().getFilesDir(), "userfile.jpg" ),
    "image/jpeg")
);

entity.addPart( "blahblah", new StringBody( "blah" ));  // string value

post.setEntity( entity );
client.execute( post ); 
```

# android - 如何在 ICS 上启用硬件加速，但在 Gingerbread 中禁用？

> ID：11109595
> 
> 赞同：2
> 
> 时间：2012-06-19T21:18:59.127
> 
> 标签：android, android-4.0-ice-cream-sandwich, hardware-acceleration, android-2.3-gingerbread

我希望我的应用程序在 ICS 中得到硬件加速，但仍然需要对 2.3.3 的支持。我可以只为 ICS 启用硬件加速吗？或者我只能放弃 2.3.3 支持？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:51:23.330

直到 3.0 才添加硬件加速。这不是问题。

参考：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T21:57:51.407

在 ICS (android 4+) 上，GPU 加速默认启用，可以在清单中禁用。

直到姜饼，包括，（直到 android 2.3.x），它被禁用，因为它根本不可用。

在honeycomb (android 3.x) 上，默认禁用，但可以在清单中启用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T07:41:13.930

这里还有别的东西。

我为我的一款游戏启用了硬件加速，它在 ICS 上运行良好，但当我上传到市场时，我收到很多报告说这款游戏几乎不能玩了。

我联系了其中一个用户，并为他提供了另一个版本，只是关闭了硬件加速。他声称效果更好，而且他正在使用姜饼。

根据官方文档，启用硬件加速对姜饼没有任何影响。但是我的经验是它有。

此外，官方文档声称，如果您不声明它并且您的目标是 ICS，则默认启用它。但是，当我明确打开它时，我看到动画、滑动和滚动有了明显的改进。

因此，官方文档不正确，有理由手动禁用/启用某些版本的硬件加速。

我将在清单中禁用硬件加速并使用以下代码。

```
if (android.os.Build.VERSION.SDK_INT>=11) {
   getWindow().setFlags(
        WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
        WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
} 
```

如果这能解决我的问题，我会告诉你的，我希望如此。

编辑：它工作得很好，我不再收到用户的抱怨。

# eclipse - 如何将maven插件添加到eclipse

> ID：11109596
> 
> 赞同：2
> 
> 时间：2012-06-19T21:19:02.403
> 
> 标签：eclipse, maven, eclipse-plugin, m2eclipse

我是新手。我试图将 maven 插件添加到 eclipse(indigo)。我面临的问题是，当我尝试使用 URL [http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)使用“帮助-> 安装新软件”添加插件时，下载过程开始然后停止并出现错误

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,org.eclipse.emf,2.6.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.ant,2.7.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.codegen,2.6.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore,2.7.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore.ui,2.7.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ui,2.6.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.common,2.7.0.v20120127-1122
No repository found containing: osgi.bundle,org.eclipse.emf.common.ui,2.7.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.converter,2.5.0.v20120130-0943
No repository found containing: osgi.bundle,org.eclipse.emf.databinding,1.2.0.v20120130-0943
...........
........... 
```

此外，当我尝试使用[http://download.eclipse.org/technology/m2e/releases](http://download.eclipse.org/technology/m2e/releases)安装插件时，安装会卡住 48%，并且在很长一段时间后它再次显示错误消息：

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee,   phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Multiple problems occurred while downloading.
Unable to read repository at http://download.eclipse.org/technology/m2e/releases /1.0/1.0.100.20110804-1717/plugins /org.eclipse.m2e.archetype.common_1.0.100.20110804-1717.jar.
Read timed out
Unable to read repository at http://download.eclipse.org/technology/m2e/releases /1.0/1.0.100.20110804-1717/plugins /org.eclipse.m2e.archetype.common_1.0.100.20110804-1717.jar.
Read timed out
Multiple problems occurred while downloading.
Unable to read repository at http://download.eclipse.org/technology/m2e/releases /1.0/1.0.100.20110804-1717/plugins/org.eclipse.m2e.maven.indexer_1.0.100.20110804-1717.jar.
Read timed out
Unable to read repository at http://download.eclipse.org/technology/m2e/releases  /1.0/1.0.100.20110804-1717/plugins/org.eclipse.m2e.maven.indexer_1.0.100.20110804-1717.jar.
Read timed out
............
............ 
```

请建议我正在使用的安装过程是否有问题。

还建议是否有其他方法可以添加“maven plugin for eclipse”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:33:37.163

在安装 m2e 之前检查安装**期间联系所有更新站点以找到所需的软件选项。**

# javascript - 如何从动态加载到我的 div 中的外部 html 文件运行 JavaScript 函数？

> ID：11109597
> 
> 赞同：1
> 
> 时间：2012-06-19T21:19:22.740
> 
> 标签：javascript, jquery, html, ajax

我正在使用以下方式将外部 html 页面插入到我的 div 中：

```
 $.ajax({
          url: "myHTML.html",
          method: 'GET',
          success: function (data) {
              $("#outputDiv").html(data);
          },
          Error: function (err) {
              alert("ERROR: " + err);
          }
      }); 
```

效果很好，问题是我想运行一些位于“myHTML.html”文件中的 JavaScript 函数，有没有办法做这样的事情？

谢谢（=

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:40:00.567

将脚本保存在您正在加载内容的页面中通常要容易得多。如果您有一组文件都使用相同的 ajx 来加载，并且都调用相同的函数，则尤其如此。这减轻了使用代码修订更改多个文件的需要。

```
$.ajax({
      url: "myHTML.html",
      method: 'GET',
      success: function (data) {
          $("#outputDiv").html(data);
          /* new html exits so can run code here that affects it*/
          newHtmlAdded();
      },
      error: function (err) {/* note typo on capital "E" fixed*/
          alert("ERROR: " + err);
      }
  });

  function newHtmlAdded(){
       fixmFormStyle();
       addMyValidation(); 
      doSomethingElse();
  } 
```

否则，重要的是要意识到该`ready`事件已经发生在正在加载的页面中。这意味着任何包含在`ready`处理程序中的代码都会立即触发。如果代码在远程文件中的 html 之前，它将在 DOM 中存在相应的 html 元素之前触发......并且什么也不做。

放置在远程文件中 html 之后的代码将起作用，因为它引用的 html 已经被处理

# android - HTC One X - 显示“兼容性”菜单图标

> ID：11109600
> 
> 赞同：5
> 
> 时间：2012-06-19T21:19:34.807
> 
> 标签：android, android-support-library, htc-android

我有使用 Sherlock ActionBar 包的应用程序。

该应用程序对菜单使用特定于平台的行为（因此它是 ICS 上 ActionBar 中的 3 点图标和 pre-ICS 上 HW 按钮下的经典菜单）

我收到了一位使用 HTC One X 的用户的报告。看起来，One X 在屏幕底部显示了一些带有菜单按钮的“兼容性”栏，并且 ActionBar 中也有相同的按钮（它应该在哪里）。

我无法在 AVD 中模拟这一点，并且我有多个报告称 Galaxy Nexus 或 Galaxy S 上不存在此问题（它们仅在 ActionBar 中显示图标）。

我不知道在哪里寻找解决这个问题或如何调试它，所以任何帮助或解决方法将不胜感激。

应用程序是针对 API14 构建的，targetSdk="11"

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T22:32:56.320

你有一个错字：

清单中的[`android:targetSdkVersion`](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#target)应该是解决方案 - Google 建议始终将其设置为可用的最大值（目前为 19）。

有些网站确实显示 HTC 在旧应用程序上显示大按钮，但在新应用程序上不显示，如此处所示[，](http://www.androidcentral.com/htc-one-x-shows-us-why-developers-need-lose-menu-button)因此如果您认为它很奇怪/丑陋，只需设置目标[SDK](http://en.wikipedia.org/wiki/Software_development_kit)即可。还要确保它在`project.properties`文件中更新。

# web-services - 如何用日期替换 XmlGregorianCalendar？

> ID：11109608
> 
> 赞同：22
> 
> 时间：2012-06-19T21:19:53.427
> 
> 标签：web-services, jax-ws

我必须通过 jax-ws 公开一个 ejb 服务层。

我已经使用 jax-ws 和 wsimport 生成了 Web 服务，但我被一个奇怪的事情阻止了；日期被映射到 XmlGregorianCalendar 。是否可以使用经典的 java Date 代替？你能告诉我正确的方法吗？

谢谢 。编辑：这是我使用的绑定文件：谢谢，我稍微修改了您的 xml 并将其与 netbeans 附加到客户端的 web 服务，它工作。这是我使用的绑定：

```
<jaxws:bindings  node="wsdl:definitions/wsdl:types/xsd:schema"
                 xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"

                                xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"

                                xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"

                                xmlns:xsd="http://www.w3.org/2001/XMLSchema" wsdlLocation="../wsdl/localhost_8080/web_test/Testor.wsdl" >

 <jaxb:globalBindings>
          <jaxb:javaType   name="java.util.Date"
        xmlType="xsd:dateTime"
        parseMethod="lol.XsdDateTimeConverter.unmarshal"
        printMethod="lol.XsdDateTimeConverter.marshalDateTime"        
          /><jaxb:javaType 
        name="java.util.Date"
        xmlType="xsd:date"
        parseMethod="lol.XsdDateTimeConverter.unmarshal"
        printMethod="lol.XsdDateTimeConverter.marshalDate"
        />
      </jaxb:globalBindings>

</jaxws:bindings> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-19T21:36:24.047

未经测试，但应该可以工作。首先创建这样的类：

```
import javax.xml.bind.DatatypeConverter;

public class XsdDateTimeConverter {

    public static Date unmarshal(String dateTime) {
        return DatatypeConverter.parseDate(dateTime).getTime();
    }

    public static String marshalDate(Date date) {
        final GregorianCalendar calendar = new GregorianCalendar();
        calendar.setTime(date);
        return DatatypeConverter.printDate(calendar);
    }

    public static String marshalDateTime(Date dateTime) {
        final GregorianCalendar calendar = new GregorianCalendar();
        calendar.setTime(dateTime);
        return DatatypeConverter.printDateTime(calendar);
    }

} 
```

然后将其添加到自定义`xjb`文件中：

```
<javaType
        name="java.util.Date"
        xmlType="xs:dateTime"
        parseMethod="XsdDateTimeConverter.unmarshal"
        printMethod="XsdDateTimeConverter.marshalDateTime"
        />
<javaType
        name="java.util.Date"
        xmlType="xs:date"
        parseMethod="XsdDateTimeConverter.unmarshal"
        printMethod="XsdDateTimeConverter.marshalDate"
        />
</globalBindings> 
```

未经测试，但应该可以工作。根据我在这里的回答：[JAX-WS 和 Joda-Time？](https://stackoverflow.com/questions/5106987)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-27T11:24:30.830

谢谢托马斯。上述解决方案有效。
但是 wsimport 还添加了它的一组适配器，如 Adapter1.java 和 Adapter2.java 及其包**org.w3._2001.xmlschema**，这确实与我自己的包结构不匹配。

我找到了一种使用另一个 jaxb 绑定更改此包名称的方法。实际上，我搜索了很多并且无法轻松找到它，所以我在这里添加它以供任何寻找相同的人使用。

使用“-b binding.xml”在 wsimport 中添加以下绑定。请注意，wsimport 可以处理多个绑定文件。

**binding.xml**内容如下：

```
<schema xmlns="http://www.w3.org/2001/XMLSchema"
  targetNamespace="http://www.w3.org/2001/XMLSchema"
  xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
  jaxb:version="2.0">
  <annotation><appinfo>
    <jaxb:schemaBindings>
      <jaxb:package name="com.abc.xyz.utils"/>
    </jaxb:schemaBindings>
  </appinfo></annotation>
</schema> 
```

# javascript - 有人可以帮我找到一个更好的替代我写的这个 Javascript for 循环的方法吗？

> ID：11109611
> 
> 赞同：2
> 
> 时间：2012-06-19T21:20:11.080
> 
> 标签：javascript, loops, for-loop

提前感谢任何能想到更有效或更好的方法来执行我下面的 Javascript 代码的人：

```
var availableCharacters=Array("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9");

for (counter=0; counter<availableCharacters.length; counter++){
  if(availableCharacters[counter]=="i"||
     availableCharacters[counter]=="l"||
     availableCharacters[counter]=="I"||
     availableCharacters[counter]=="L"||
     availableCharacters[counter]=="1"||
     availableCharacters[counter]=="0"||
     availableCharacters[counter]=="O"){
      availableCharacters.splice(counter, 1);
    }
} 
```

我要做的是遍历一个数组并删除该数组中“i”、“l”、“I”、“L”、“1”、“0”或“O”的任何元素。虽然这确实有效，但它似乎可能很慢而且有点麻烦。如果有更好的方法？如果不是，那不是问题，但大多数时候当我做一些对我来说不合适的事情时，它不是！所以我想我会问

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T21:24:33.060

更新的浏览器支持`Array.filter`：

```
var availableCharacters = ........;
availableCharacters = availableCharacters.filter(function(a) {
  return !a.match(/[ilLI10O]/);
}); 
```

然而，对于较旧的浏览器，Mark Linus 给出的 for 循环很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T21:21:41.153

```
var availableCharacters=["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
for (counter=0; counter<availableCharacters.length; counter++){
    if(/[ilIL10O]/.test(availableCharacters[counter])){
        availableCharacters.splice(counter, 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:23:03.337

具有简单过滤器列表的替代解决方案：

```
var availableCharacters=Array("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3",     "4", "5", "6", "7", "8", "9");
var filter = ['i', 'l', 'I', 'L', '1', '0', 'O'];
for (counter=0; counter<availableCharacters.length; counter++){
    if(filter.indexOf(availableCharacters[counter]) >= 0) {
        availableCharacters.splice(counter, 1);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:29:19.393

如果你愿意使用[jQuery，你可以`grep()`](http://api.jquery.com/filter/)像这样使用和编写它：

[在这里提琴](http://jsfiddle.net/HeCeJ/5/)

```
var availableChars = ["a", "b", "c", '1', 'i', 'o', "9"];
var result = $.grep(availableChars, function(c) {
    return !c.match(/[^il10o]/i)
})
document.write(result)​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T01:48:49.997

过滤器很好，但是一个简单的字符串替换可以在没有网络的情况下工作

```
 var availableCharacters=["a", "b", "c", "d", "e", "f", "g", "h", "i", 
   "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", 
   "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];

  var allowed= availableCharacters.join('').replace(/[iLl10O]/g,'').split('');

  returned value: (Array)
  a,b,c,d,e,f,g,h,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,2,3,4,5,6,7,8,9 
```

# objective-c - SoundCloud API 和注册应用程序的 401 错误

> ID：11109619
> 
> 赞同：2
> 
> 时间：2012-06-19T21:20:32.240
> 
> 标签：objective-c, ios, web-services, soundcloud

我的应用程序中有 SoundCloud API 的问题。我创建了一个应用程序，获取指向曲目的链接（例如，类似[http://api.soundcloud.com/tracks/48760960](http://api.soundcloud.com/tracks/48760960)的内容）并获取 stream_url，稍后可以使用 SCAudioStream 播放。用户没有身份验证，我只使用我的应用程序的客户端 ID 和客户端密码。应用程序已注册。

我以这种方式创建 soundCloudManager：

```
- (id)init
{
    if(self = [super init])
    {
        conf = [SCSoundCloudAPIConfiguration configurationForProductionWithClientID: kSCClientID
                                                                       clientSecret: kSCClientSecret
                                                                        redirectURL: kSCRedirectURL];
        conf.accessTokenURL = kSCAccessTokenURL;
        api = [[SCSoundCloudAPI alloc] initWithDelegate: self 
                                 authenticationDelegate: self 
                                       apiConfiguration: conf];
       //[api checkAuthentication];
    }
    return self;
} 
```

如果取消注释 [api checkAuthentication]，则日志将显示下一个：

“使用 URL 进行身份验证：https://soundcloud.com/connect?client_id=&redirect_uri=&response_type=code”

然后我调用这个方法从轨道获取数据：

```
- (void)runSearchingStreamWithTrackID: (NSString *)trackID
{
    [api performMethod: @"GET" 
            onResource: @"tracks" 
        withParameters: [NSDictionary dictionaryWithObject:trackID forKey:@"ids"] 
               context: @"trackid" 
              userInfo: nil];
} 
```

然后这个委托的方法调用：

```
- (void)soundCloudAPI:(SCSoundCloudAPI *)soundCloudAPI 
     didFailWithError:(NSError *)error 
              context:(id)context 
             userInfo:(id)userInfo 
```

错误文本：

“HTTP 错误：401”。

是未经授权的意思。但为什么？我是否应该被授权为 soundCloud 用户以获取有关曲目的信息？

我将它用于 SoundCloudAPI： [https ://github.com/soundcloud/cocoa-api-wrapper](https://github.com/soundcloud/cocoa-api-wrapper)

请帮忙！:(

* * *

今天我修好了。我只是将此方法添加到 init ：

```
[api authenticateWithUsername:kLogin password:kPwd]; 
```

之后调用此方法：

```
- (void)soundCloudAPIDidAuthenticate 
```

所以，这个测试账号被授权了。

然后我调用这个方法：

```
- (void)runSearchingStreamWithTrackID: (NSString *)trackID
{
    [api performMethod: @"GET" 
            onResource: @"tracks" 
        withParameters: [NSDictionary dictionaryWithObject:trackID forKey:@"ids"] 
               context: @"trackid" 
              userInfo: nil];
} 
```

并且不会调用这些方法中的任何一个：

```
- (void)soundCloudAPI:(SCSoundCloudAPI *)soundCloudAPI 
     didFailWithError:(NSError *)error 
              context:(id)context 
             userInfo:(id)userInfo;
- (void)soundCloudAPI:(SCSoundCloudAPI *)soundCloudAPI 
    didFinishWithData:(NSData *)data 
              context:(id)context 
             userInfo:(id)userInfo;
- (void)soundCloudAPIDidAuthenticate;
- (void)soundCloudAPIDidResetAuthentication;
- (void)soundCloudAPIDidFailToGetAccessTokenWithError:(NSError *)error;
- (void)soundCloudAPIPreparedAuthorizationURL:(NSURL *)authorizationURL; 
```

但是有日志：

```
-[NXOAuth2PostBodyStream open] Stream has been reopened after close 
```

这个方法被称为：

```
[NXOAuth2Client oauthConnection:connection didFailWithError:error];
error: HTTP 401 
```

我错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:01:06.177

我明白了这个问题。只需从官方网站下载 SC API 并安装最新的 SC API。然后做这样的事情：

```
- (void)searchStreamURLByTrackID: (NSString *)trackID
{
NSString *string = [NSString stringWithFormat:@"https://api.soundcloud.com/tracks/%@.json?client_id=%@", trackID, kSCClientID];

[SCRequest performMethod: SCRequestMethodGET 
              onResource: [NSURL URLWithString:string]
         usingParameters: nil 
             withAccount: nil
  sendingProgressHandler: nil 
         responseHandler:^(NSURLResponse *response, NSData *data, NSError *error){

                                      NSString *resultString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
                                      NSLog(@"FOUND:\n%@", resultString);
                              }
                      ]; 
```

}

之后从 resultString 中的 JSON 获取流 url。

最后，您必须编写以下代码：

```
NSString *streamURL = [(NSDictionary *)jsonData objectForKey:@"stream_url"];
NSString *realURL = [streamURL stringByAppendingFormat:@".json?client_id=%@", kSCClientID];
AVPlayer *player = [[AVPlayer alloc] initWithURL:[NSURL URLWithString:realURL]]; 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T00:41:08.597

你检查了[https://github.com/soundcloud/CocoaSoundCloudAPI](https://github.com/soundcloud/CocoaSoundCloudAPI)吗？这是 API 包装器的最新版本（如果您不需要 iOS 3.0 支持）。它还附带一个教程视频：http: [//vimeo.com/28715664](http://vimeo.com/28715664)

如果您想继续使用这个库，您应该尝试找出日志消息（“auth ready with ...”）出现的位置。您是否实现了任何 AuthorizationDelegate 方法？见[https://github.com/soundcloud/cocoa-api-wrapper/blob/master/Usage.md#the-authentication-delegate-the-easy-way](https://github.com/soundcloud/cocoa-api-wrapper/blob/master/Usage.md#the-authentication-delegate-the-easy-way)

# c# - 为什么使用返回 null 的自定义 GuidConverter 会导致视图状态序列化中出现奇怪的异常？

> ID：11109621
> 
> 赞同：1
> 
> 时间：2012-06-19T21:20:36.020
> 
> 标签：c#, asp.net

我有一个`UserControl`使用`Guid`存储在`ViewState`其中的偶尔`Guid.Empty`. 我也在`GuidConverter`我的系统中注册了这个：

```
public class GuidConverter : System.ComponentModel.GuidConverter {
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType) {
        return typeof(IEnumerable<byte>).IsAssignableFrom(sourceType) || base.CanConvertFrom(context, sourceType);
    }
    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType) {
        return destinationType == typeof(byte[]) || base.CanConvertTo(context, destinationType);
    }
    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value) {
        if (value is IEnumerable<byte>) {
            return new Guid(((IEnumerable<byte>)value).ToArray());
        }
        if (value is string) {
            if(string.IsNullOrEmpty((string)value)) {
                return Guid.Empty;
            }
            return new Guid((string)value);
        }
        return base.ConvertFrom(context, culture, value);
    }
    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType) {
        if (destinationType == typeof(byte[])) {
            return ((Guid)value).ToByteArray();
        }
        if(destinationType == typeof(string)) {
            var g = (Guid)value;
            if (g == Guid.Empty) {
                return null; //here is the cause of the problem
            }

            return g.ToString("N");
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }
} 
```

当那`ViewState` `Guid`是`Guid.Empty`我得到这个例外：

```
System.ArgumentException: Error serializing value '00000000-0000-0000-0000-000000000000' of type 'System.Guid.' ---> System.ArgumentNullException: Value cannot be null.
Parameter name: value
   at System.IO.BinaryWriter.Write(String value)
   at System.Web.UI.ObjectStateFormatter.SerializeValue(SerializerBinaryWriter writer, Object value)
   --- End of inner exception stack trace ---
   at System.Web.UI.ObjectStateFormatter.SerializeValue(SerializerBinaryWriter writer, Object value)
   at System.Web.UI.ObjectStateFormatter.Serialize(Stream outputStream, Object stateGraph)
   at System.Web.UI.ObjectStateFormatter.Serialize(Object stateGraph)
   at System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Serialize(Object state)
   at System.Web.UI.Util.SerializeWithAssert(IStateFormatter formatter, Object stateGraph)
   at System.Web.UI.HiddenFieldPageStatePersister.Save()
   at System.Web.UI.Page.SavePageStateToPersistenceMedium(Object state)
   at System.Web.UI.Page.SaveAllState()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   --- End of inner exception stack trace --- 
```

`null`我可以通过在上面的注释行中替换为来消除错误`string.Empty`，但是使用该转换器的代码可能会以与该更改不兼容的方式区分这两种情况（例如，我可以将字符串形式存储在数据库和另一个应用程序可能会读取该值并根据字段是否为空执行不同的操作）。

为什么会这样？

* * *

换句话说：如果我最终提供了一个实现[`TypeConverter.ConvertToInvariantString`](http://msdn.microsoft.com/en-us/library/6xc1782a.aspx)，它是否意味着我不能返回 null 的任何地方？我是否在 System.Web.dll 中发现错误或此方法的文档中缺少某些内容？

# biztalk - 为什么 BizTalk BAM RTA 需要 SSAS

> ID：11109622
> 
> 赞同：1
> 
> 时间：2012-06-19T21:20:37.920
> 
> 标签：biztalk, biztalk-bam

当 BAM 活动启用 RTA 时，我的理解是聚合数据保存在 BAM 主要导入数据库的新表中，并通过来自活动和已完成活动表的触发器进行更新。那么为什么在没有分析服务的情况下它不会部署——因此需要昂贵的企业许可证？

# html - 下拉菜单打开高度

> ID：11109630
> 
> 赞同：1
> 
> 时间：2012-06-19T21:20:58.657
> 
> 标签：html, drop-down-menu, menu, height

我有一个简单的下拉菜单：

```
<form class="feedmenu" align="center">
<select onchange="showRSS1(this.value)">
<option value="">Select an RSS-feed:</option>
<option value="ATO-HK">Asia Times</option>
<option value="HKH-HK">Hong Kong Herald</option>
<option value="Gov-HK">News.gov.hk</option>
<option value="RTHK-HK">Radio Television Hong Kong</option>
<option value="SCMP-HK">South China Morning Post</option>
<option value="STD-HK">The Standard</option>
</select>
</form> 
```

一旦你打开它，我如何指定下拉框应该有多大 -`size="x"`属性不会这样做，属性也不会`height="x"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:37:14.063

不幸的是，您似乎无法更改下拉菜单中显示的项目的高度或数量，而无需将其转换为列表框，如此[处](https://stackoverflow.com/a/5538470/1405830)所述。

如果您真的想控制它，那么我建议您通过创建一个不可见的列表或表格来制作自己的“下拉列表”，当您单击“下拉列表”时该列表或表格变得可见。有点像多级菜单，但样式看起来类似于下拉菜单。

**编辑：**对不起，在写这篇文章之前我没有读过你的评论。如果您只想显示更多选项，则可以为下拉菜单创建空选项。[例子](http://jsfiddle.net/9ESWe/)

# c# - 自定义控件中的 WPF 数据绑定

> ID：11109632
> 
> 赞同：2
> 
> 时间：2012-06-19T21:21:02.677
> 
> 标签：c#, wpf, data-binding

我正在尝试创建一个自定义 TabItem，它会动态添加到 WPF 窗口中定义的 TabControl 中。我的自定义控件有一个对象，其中包含我想绑定到模板特定部分的数据。

```
<Style TargetType="{x:Type local:EntityTabItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:EntityTabItem}">
                <Border>
                    <Grid>
                        <Border x:Name="borderTop" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,2,0">
                            <!-- Want to bind the FileName to this TextBlock -->
                            <TextBlock VerticalAlignment="Center" Text="{Binding Path=Entity.FileName}" Margin="-1,0,0,0" Padding="6,1,10,1"/>
                            <Button x:Name="closeButton" VerticalAlignment="Center" Content="X" Style="{StaticResource TabCloseButton}"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <Grid Background="White">
                    <!-- Want to bind the FileText to this TextBox -->
                    <TextBox Margin="15,0,0,0" BorderBrush="{x:Null}" Text="{Binding Path=Entity.FileText}"/>
                </Grid>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是自定义控件 CS 文件：

```
public class EntityTabItem : TabItem
{
    public Entity MyEntity { get; set; }

    public EntityTabItem(string path)
    {
        this.MyEntity = new Entity(path);
    }

    static EntityTabItem()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(EntityTabItem), new FrameworkPropertyMetadata(typeof(EntityTabItem)));
    }
} 
```

我相当确定我需要在某个地方设置一个 DataBinding/Source，但我无法弄清楚在哪里绑定它以使我的 TextBlock 中的绑定起作用。

老实说，我根本无法绕过 DataBinding。一半的时间，我让它工作得很好，却没有意识到如何，而另一半的时间它什么也没做。

我还尝试将“实体”对象实现为 DependencyProperty，但也无法使其正常工作。由于我只在 CS 中创建自定义 TabItem（从未直接在 XAML 中使用），这是否重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:14:47.570

尝试使用 DataContext 属性，例如：

```
<Style TargetType="{x:Type local:EntityTabItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:EntityTabItem}">
                <Border>
                    <Grid>
                        <Border x:Name="borderTop" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,2,0">
                            <!-- Want to bind the FileName to this TextBlock -->
                            <TextBlock VerticalAlignment="Center" Text="{Binding Path=FileName}" Margin="-1,0,0,0" Padding="6,1,10,1"/>
                            <Button x:Name="closeButton" VerticalAlignment="Center" Content="X" Style="{StaticResource TabCloseButton}"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <Grid Background="White">
                    <!-- Want to bind the FileText to this TextBox -->
                    <TextBox Margin="15,0,0,0" BorderBrush="{x:Null}" Text="{Binding Path=FileText}"/>
                </Grid>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style>

public class EntityTabItem : TabItem
{
    private Entity _myEntity;

    public Entity MyEntity
    {
        get { return _myEntity; }
        set
        {
            _myEntity = value;
            DataContext = value;
        }
    }

    public EntityTabItem(string path)
    {
        this.MyEntity = new Entity(path);
    }

    static EntityTabItem()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(EntityTabItem), new FrameworkPropertyMetadata(typeof(EntityTabItem)));
    }
} 
```

# mahout - 我可以使用其他数据相关工具直接连接到 Mahout 模型的输出吗？

> ID：11109636
> 
> 赞同：1
> 
> 时间：2012-06-19T21:21:12.723
> 
> 标签：mahout

我在机器学习/数据挖掘方面的唯一经验是通过 SQL Server Analysis Services。

使用 SSAS，我可以设置模型并针对它触发直接单例查询，以执行诸如实时购物篮分析和产品建议之类的事情。我可以从模型中获取“结果”作为扁平结果集，并在其他地方进行可视化。

我能否以相同的方式使用其他数据相关工具直接连接到 Mahout 模型的输出？例如，有什么方法可以提取表格结果集，以便可以使用我选择的可视化工具进行渲染？可能是 ODBC 驱动程序？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:49:00.910

Mahout 的输出通常是 HDFS 上的文件，尽管您可以将其转储到 Hadoop 可以放置数据的任何地方。还有另一份工作要翻译成你需要的任何形式，它是可读的。如果你能找到你放入的数据存储的 ODBC 驱动程序，是的。

所以我想答案是，不，设计上没有与任何特定消费者的任何集成。但你可能可以连接任何你想象的东西。

有些位设计为通过 API 查询的实时系统，但我认为这不是您的意思。

# git - 为什么git fetch remote branch总是给我master？

> ID：11109638
> 
> 赞同：0
> 
> 时间：2012-06-19T21:21:29.280
> 
> 标签：git, branch

我有 machine1 和 git repo `client`，它有分支`master`和`fixes_v3`. 我有 machine2，无论我尝试什么组合，它都会拉出一个分支并命名它，`fixes_v3`但它的内容是`master`. 例如：

`git clone git+ssh://user@machine1/home/user/client`给我这个

`git pull`给我这个

`git branch -a`然后`checkout`遥控器`fixes_v3`给了我这个

`git fetch`给我这个

以及这些东西的各种其他组合，通常从头开始，从各种 SO 问题、手册、官方文档等汇总。我什至不知道从哪里开始研究这个而不必第 n 次从头开始学习 git。

如何获取代码，`fixes_v3`而不仅仅是一个命名不正确的分支`fixes_v3`？

编辑请求的输出：

```
um@machine2:~/client$ git show-ref
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63 refs/heads/fixes_v3
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63 refs/heads/localfixesv3
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63 refs/remotes/origin/HEAD
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63 refs/remotes/origin/fixes_v3
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63 refs/remotes/origin/version3
um@machine2:~/unrollclient$ git ls-remote origin
um@machine1 password: 
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63    HEAD
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63    refs/heads/fixes_v3
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63    refs/heads/version3
7bd4490e8f98d29c5e82f473d1b04e542b67dec0    refs/remotes/origin/HEAD
16c7b55e2ea3e26c2f8faccd43e1c0db9620008a    refs/remotes/origin/Testing
a7a5642f6766332910c2c9005e8aafaf456f1f58    refs/remotes/origin/john
7bd4490e8f98d29c5e82f473d1b04e542b67dec0    refs/remotes/origin/master
ae10bcf7e15a4e251b50e8bc2eae3e5a2bc25b63    refs/remotes/origin/version3
um@machine2:~/client$ git remote show origin
um@machine1's password: 
* remote origin
  Fetch URL: git+ssh://um@machine1/home/um/client
  Push  URL: git+ssh://um@machine1/home/um/client
  HEAD branch (remote HEAD is ambiguous, may be one of the following):
    fixes_v3
    version3
  Remote branches:
    fixes_v3 tracked
    version3 tracked
  Local branches configured for 'git pull':
    fixes_v3     merges with remote fixes_v3
    localfixesv3 merges with remote fixes_v3
  Local ref configured for 'git push':
    fixes_v3 pushes to fixes_v3 (up to date) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:38:26.227

从原始仓库获取远程分支 fix_v3

```
git fetch origin fixes_v3 
```

创建一个分支

```
git checkout -b myLocalFixes_v3 origin/fixes_v3 
```

应该做的伎俩

你在做什么的解释

```
git clone git+ssh://user@machine1/home/user/client 
```

您正在本地克隆存储库，默认情况下，您的本地存储库将在远程存储库的 HEAD 修订版上签出。默认是master

```
git pull 
```

Git pull（不带选项）将获取然后将默认跟踪分支合并到您当前的分支。当您在本地 master 上时，它起源/跟踪远程 master 分支，然后它将获取（在缓存中下载）远程 master 分支，然后将其合并到您当前的 master 分支上。

```
git branch -a then checkout the remote fixes_v3 gives me this 
```

结帐是棘手的部分。我给你的结帐应该可以工作。我过去也做错了结帐，因为我没有得到所有的微妙之处。如果你这样做

```
git checkout -b origin/fixes_v3 
```

它将创建一个名为“origin/fixes_v3”的本地分支，该分支基于 master

```
git checkout -b origin/fixes_v3 master 
```

同样在这里

```
git checkout -b origin/fixes_v3 origin/fixes_v3 
```

它将创建一个名为“origin/fixes_v3”的本地分支，该分支基于远程“fixes_v3”的 origin/fixes_v3。但是你不应该这样做，因为 git 会在确定它是哪个“origin/fixes_v3”之后遇到问题：远程分支，还是以“/”命名的本地分支？

```
git fetch 
```

Git fetch 仅下载本地缓存中的远程分支/提交。它不会做任何其他事情，没有合并，没有结帐，没有变基。

如果您的远程名称是：origin，它将下载 .git/refs/remotes/origin/ 目录中的缓存（我简化了）所以您将拥有 .git/refs/remotes/origin/master 和 .git/refs/remotes /origin/fixes_v3\. 当你会做一个 git checkout -b origin/fixes_v3 origin/fixes_v3 它将基于.git/refs/remotes/origin/fixes_v3创建一个.git/refs/head/origin/fixes_v3，但是你会有名称冲突因为无法确定 origin/fixes_v3 是指 origin 远程上的远程，还是名为 origin/fixes_v3 的本地分支

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:50:34.087

Question turned out to be even dumber than I thought. Changes in fixes_v3 branch were not committed... after re-reading the git pro guide I was able to understand git well enough to troubleshoot such a basic step. Thanks everyone.

# c++ - 如何检测线程或进程是否由于操作系统调度而变得饥饿

> ID：11109639
> 
> 赞同：9
> 
> 时间：2012-06-19T21:21:31.250
> 
> 标签：c++, linux, operating-system, job-scheduling, ace

这是在 Linux 操作系统上。应用程序是用 ACE 库用 C++ 编写的。

我怀疑进程中的一个线程有时会被阻塞很长时间（5 到 40 秒）。该应用程序在大多数情况下运行良好，除了一天几次它有这个问题。由于大量的套接字传入数据，还有其他类似的 5 个应用程序在盒子上运行，它们也是 I/O 绑定的。

我想知道我是否可以以编程方式做任何事情来查看线程/进程是否正在获得他们的时间片。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:45:57.910

如果某个流程被饿死，那么对该流程的自我监控就不会那么高效。但是，如果您只是希望该进程注意到它有一段时间没有运行，它可以`times`定期调用并将经过时间的相对差异与计划用户时间的相对差异进行比较（如果需要，您可以对`tms_utime`and`tms_cutime`字段求和将等待孩子计算为生产时间，如果您将代表您花费的内核时间计算为生产时间，您将在`tms_stime`和字段中求和）。`tms_cstime`对于线程时间，我知道的唯一方法是查阅`/proc`文件系统。

高优先级外部进程或高优先级线程可以通过读取进程（和线程）的适当`/proc/<pid>/stat`条目来从外部监视感兴趣的进程（和`/proc/<pid>/task/<tid>/stat`线程）。用户时间位于`stat`文件的第 14 和第 16 字段中。系统时间位于第 15 和第 17 字段中。（对于我的 Linux 2.6 内核，字段位置是准确的。）

在两个时间点之间，您可以确定经过的时间量（监控进程或线程通常会定期唤醒）。然后，每个时间点的累积处理时间之间的差异表示在此期间感兴趣的线程运行了多少时间。处理时间与经过时间的比率将代表时间片。

最后一点信息：在 Linux 上，我使用以下命令获取`tid`当前线程的权限`task`以检查`/proc/<pid>/task/`目录中的权限：

```
tid = syscall(__NR_gettid); 
```

我这样做是因为我找不到`gettid`系统上任何库实际导出的系统调用，即使它已记录在案。但是，它可能在您的身上可用。

# json - 如何反序列化接口的子列表？

> ID：11109641
> 
> 赞同：3
> 
> 时间：2012-06-19T21:21:36.380
> 
> 标签：json, asp.net-mvc-2, serialization, json.net

我正在使用 ASP.NET MVC2，我有以下对象结构：

```
public class IDealer {
  string Name { get; set; }
  List<IVehicle> Vehicles { get; set; }
}

public class DealerImpl {
  public string Name { get; set; }
  public List<IVehicle> Vehicles { get; set; }
}

public interface IVehicle {
    string Type { get; }
}

public class Car : IVehicle {
    public string Type { get { return this.GetType().FullName; } }
}

public class Truck : IVehicle {
    public string Type { get { return this.GetType().FullName; } }
} 
```

我有以下类作为我的 ModelBinder，它在我的页面请求中反序列化对象：

```
public class JsonModelBinder : DefaultModelBinder {
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) {
        return deserialize(controllerContext, bindingContext);
    }

    protected static bool IsJSONRequest(ControllerContext controllerContext) {
        var contentType = controllerContext.HttpContext.Request.ContentType;
        return contentType.Contains("application/json");
    }

    protected virtual object deserialize(ControllerContext controllerContext, ModelBindingContext bindingContext) {
        Type modelType = bindingContext.ModelMetadata.ModelType;

        bool isNotConcrete = bindingContext.ModelMetadata.ModelType.IsInterface || bindingContext.ModelMetadata.ModelType.IsAbstract;
        if (!IsJSONRequest(controllerContext)) {
            return base.BindModel(controllerContext, bindingContext);
        } else {
            var request = controllerContext.HttpContext.Request;
            var jsonStringData = new StreamReader(request.InputStream).ReadToEnd();
            if (isNotConcrete) {
                Dictionary<string, Object> result = JsonConvert.DeserializeObject<Dictionary<string, Object>>(jsonStringData);
                string type = result["Type"] as string;
                modelType = Type.GetType(type + ",MyCompany.Common");
            }

            return JsonConvert.DeserializeObject(jsonStringData, modelType, new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.Auto });
        }       
    }
}

// ASP.NET MVC Controller
protected override void Initialize(System.Web.Routing.RequestContext requestContext) {
  base.Initialize(requestContext);
  ModelBinders.Binders.DefaultBinder = new JsonModelBinder();
}

[HttpPost]
public ActionResult addUpdateDealer(IDealer dealer) {
  // breaks before here with the error in the comment below
}

// and in the aspx page
<script>
var model = <%= JsonConvert.SerializeObject(Model, Formatting.None, new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.Auto }) %>;
</script> 
```

我遇到的问题是，当代码尝试反序列化 IVehicles 的子列表时，它不知道要实例化哪种类型的车辆。我在 IVehicle 上放置了一个名为“Type”的属性，可用于帮助确定要实例化哪个类，但我不确定什么/在哪里/如何提供覆盖来执行此检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:33:18.790

您的解决方案类似于 JSON.NET 现在内置的称为 TypeNameHandling。[以下是关于它的发行说明](http://james.newtonking.com/archive/2010/08/13/json-net-3-5-release-8-3-5-final.aspx)。

您的 JSON 消息将需要包含一个`$type`属性，该属性不会被反序列化，但会被反序列化器解释为要使用的具体类型。

# java - 选择所有选项后，如何使 jButton 更改其颜色？

> ID：11109644
> 
> 赞同：1
> 
> 时间：2012-06-19T21:21:43.603
> 
> 标签：java, swing, colors, jbutton

大家好 :) 我希望`JButton`在选择所有选项后更改它的颜色，但我不知道如何...

我有`ButtonGroup`6 个单选按钮、6 个复选框和一个文本字段

当一个单选按钮被选中并且一个或多个复选框被选中并且文本字段中有一个数字（或任何东西）时，`JButton`它的颜色将变为绿色。我不知道在哪里放置动作监听器或如何开始，所以如果有人能帮助我，我将非常感激。

好的，你可以在[这里](https://stackoverflow.com/questions/11104631/i-want-to-display-a-message-showing-what-i-selected-java)找到一些代码，正如你所问的，但我认为这不相关。本质上，这是我之前问题的延续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:30:43.830

如果您只是有一种方法可以根据按钮的状态和文本字段调整按钮的颜色，例如

```
public void updateButtonColor(){
  if ( isAtLeastOneRadioButtonSelected() && isAtLeastOneCheckBoxSelected() && 
       textFieldContainsNumber() ){
      changeButtonColor( Color.green );
   } else {
      changeButtonColor( Color.red );
   }
} 
```

您可以向每个单选按钮、复选框和文本字段添加侦听器，以便`updateButtonColor`在组件的相关状态发生变化时调用该方法（例如`ItemListener`，`JCheckBox`检测选择的变化）

# windows - 对话框作为主窗口？

> ID：11109645
> 
> 赞同：13
> 
> 时间：2012-06-19T21:21:44.883
> 
> 标签：windows, winapi, dialog

通常使用对话框作为主窗口吗？因此，无需通过 RegisterClassEx 注册任何用户类？我可以通过 CreateWindow() 完成所有操作吗？为什么我应该通过 CreateWindow() 创建按钮、编辑框等控件，而不是仅仅创建一个对话框并将其用作主窗口？

我还想知道对话框和窗口之间的主要区别以及为什么使用第一个而不是第二个。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T21:54:33.840

> 通常使用对话框作为主窗口吗？

是的，这很常见。

> 因此，无需通过 RegisterClassEx 注册任何用户类？

对话框通常是预定义的窗口类，因此通常不需要注册。

> 我还想知道对话框和窗口之间的主要区别以及为什么使用第一个而不是第二个。

好吧，两个很大的区别是您无法调整对话框的大小，并且它没有最小化或最大化按钮（默认情况下，但有解决方法）。记住名称，**对话框**。换句话说，它们用于与用户进行*对话*（接收输入并向用户显示消息）。从某种意义上说，它们就像任何其他窗口一样，在 CreateWindowxx 下调用等等。但是，它们是某种预定义的窗口，可以快速制作，并且对您可以使用它们进行的操作存在限制。

此外，对话框使用对话框过程而不是窗口过程，它会为您执行一些默认处理，例如初始化一些控件等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:34:57.893

是的，应用程序可以是基于对话框的。如果您使用 VisualStudio 和 MFC，甚至还有一个向导。

在 VS2010 中，创建新项目 > MFC 应用程序。在“应用程序类型”中选择*Dialog Based*。单击向导的其余部分，然后您就可以参加比赛了。

基于对话框的应用程序在架构上比其他设计（如 Document/View）要简单得多。因此，简单的事情更容易快速“完成”，但当您尝试做更复杂的事情时，设计的局限性就会变得明显。您最终可能会在基于对话框的应用程序中复制大部分 Doc/View 架构，以构建生产质量的基于对话框的应用程序。那样的话，你真的救了自己什么吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T22:08:31.737

对话框是一种窗口，就像按钮等各种控件实际上只是窗口一样。您可以将对话框视为一种具有许多额外功能的窗口，以支持对话框用于执行的各种操作。

有两种类型的对话框，模态的显示并希望您使用它们然后关闭它们，非模态的显示但不会捕获并保持输入焦点，直到它们被关闭。您可以在应用程序中看到这两种类型，其中模态对话框用于显示错误或要求用户进行一些设置，非模态对话框充当一种保持显示的工具框，当您需要它时，您单击在它上面做某事，其他时候你在应用程序中使用其他一些窗口。

通常，对话框不会有菜单栏，而是通过选项卡或某种其他类型的演示文稿使其所有控件可见或易于访问。Visual Studio 和其他 IDE 具有对话框设计器，允许放置各种控件以及允许将控件绑定到类和类成员的向导。

这带来了对话框和窗口之间的主要区别。窗口是一种空页面，对页面进行操作需要更多的工作。对话框具有使设计变得容易的工具，但是您在很大程度上也受到工具箱的限制。

如果您有一个应用程序，它基本上专注于允许用户指定某些设置然后执行某些任务，那么对话框效果相当好。如果您有一些需要更复杂的用户交互的东西，那么作为基础的应用程序窗口将更加必要，您的所有其他对话框和控件都将从该窗口中进行管理和操作。

# javascript - 为什么 Appcelerator 检测不到事件已触发？

> ID：11109647
> 
> 赞同：1
> 
> 时间：2012-06-19T21:21:51.013
> 
> 标签：javascript, dom-events, titanium, appcelerator, titanium-mobile

在我的 HTML 文件中，我有：

```
<html><head> 
<style>html{width: 320px; } body {padding: 0; margin: 0 auto; width: 320px;} img {left: 0; top: 0; display: block;}</style>

<script>
  Titanium.App.fireEvent('someEvent', {});
</script>
</head><body>
<a href="http://www.google.com" target="_blank">LINK!!!</a>
</body></html> 
```

在 中`app.js`，我有：

```
Ti.App.addEventListener('someEvent', function(e){
 alert("RECEIVED"); 
```

然而，当我用 index.html 加载 webview 时，我的应用程序崩溃了。知道这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:54:43.690

如果您使用的是 android 模拟器 2.3... 有一个已知错误，您不能在 webview 中使用任何 Titanium 功能。与谷歌拒绝解决影响 appcelerator 尝试做的问题有关。建议您在您的设备上尝试此部分。

它应该在 2.2 模拟器中正常工作，我认为 3 以上的所有内容

这是你的问题吗？

# c# - 如何检查 MVC 应用程序的应用程序空闲

> ID：11109649
> 
> 赞同：1
> 
> 时间：2012-06-19T21:22:01.770
> 
> 标签：c#, javascript, asp.net-mvc-3, session

我知道 WPF 应用程序会要求类似的事情，但我想知道是否有办法找出 MVC 应用程序的应用程序空闲时间，以便我可以像银行网站一样显示会话超时弹出窗口。我目前在网站上搜索，发现了这个链接：http: [//community.devexpress.com/blogs/aspnet/archive/2011/06/15/asp-net-how-to-show-a-popup-warning-before -会话超时.aspx](http://community.devexpress.com/blogs/aspnet/archive/2011/06/15/asp-net-how-to-show-a-popup-warning-before-session-timeout.aspx)

但是，如果有人可以分享更好的解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:24:16.827

他们通常只是启动一个 javascript 计时器，然后在超时后，他们只是重定向到注销页面。它实际上很简单，但它与实际的应用程序空闲超时无关。

您可以为其添加一个漂亮的 gui，但这并不是特别困难。

# .net - 需要帮助 - .net 编程

> ID：11109650
> 
> 赞同：1
> 
> 时间：2012-06-19T21:22:02.620
> 
> 标签：.net, vb.net, expression

我试图借助允许与其他应用程序进行第 3 方集成的向导来配置 .net 医疗保健应用程序中的按钮。

该过程已记录在案，包括由制造商 (siemens) 制作并以 IT 管理员身份分发给我的 PDF 文档中的脚本。

我现在尝试配置集成按钮，幸运的是，作为向导的一部分，有一个测试按钮可以验证脚本 - 它正在返回错误：

> “表达式是一个值，因此不能成为赋值的目标”

我没有编程经验，所以我希望某种鞋底能给我一些指示：

这是脚本：

> > 选项严格关闭
> > 
> > 进口系统
> > 
> > 导入 System.Windows.Forms
> 
> Module Script
> Sub Main()
> dim patientId as string
> dim accessionNumber as string
> dim parameters as string
> dim strFiles as string
> 
> ' 从工作搜索或高级搜索列表中的当前
> '选定行中获取患者 ID 和登录号
> 
> patientId = ScriptApplication.GetValueFromContextServer(1)
> accessionNumber = ScriptApplication.GetValueFromContextServer(2)
> 
> strFiles = (System.Environment.GetFolderPath(environment.SpecialFolder.ProgramFiles))
> 
> ```
>  'create command
> 
>      Command = strFiles + "\Siemens\syngo\bin\ialauncher.exe"
>     'parameters = "-type READ -l SYNGOVIA\jbrea -p jbrea -a " + accessionNumber
>    parameters = "-type READ -lwwc -a"+ accessionNumber 
> ```
> 
> ' 启动命令
> 
> ```
> System.diagnostics.process.start(command, parameters)  
>  End Sub 
> ```
> 
> 端模块

“创建命令”下面的行似乎是导致问题的原因。这是应该启动的可执行文件，在 ialauncher.exe 中显示相同的患者

提前致谢

\法兰德斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:49:16.143

我添加了缺少的代码。我希望它有所帮助。（只需删除它旁边的评论。）

```
Option Strict Off

Imports System

Imports System.Windows.Forms

Module Script
Sub Main()
dim patientId as string
dim accessionNumber as string
dim parameters as string
dim strFiles as string
dim Command as string  'add this to your code.

' get the patient ID and accession number from the currently
'selected row in the list of job search or advanced search

patientId = ScriptApplication.GetValueFromContextServer(1)
accessionNumber = ScriptApplication.GetValueFromContextServer(2)

strFiles = (System.Environment.GetFolderPath(environment.SpecialFolder.ProgramFiles))

  'create command

     Command = strFiles + "\Siemens\syngo\bin\ialauncher.exe"
    'parameters = "-type READ -l SYNGOVIA\jbrea -p jbrea -a " + accessionNumber
   parameters = "-type READ -lwwc -a"+ accessionNumber

' launch command

System.diagnostics.process.start(command, parameters)  
 End Sub 

End Module 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:31:13.580

Command 变量是什么类型？我敢打赌它不是一个字符串，它应该是。

在我能看到的任何地方都没有 DImensioned，所以请尝试添加

将命令调暗为字符串

就在 strFiles 的 Dim 下方。

# javascript - Javascript 类型错误，不是函数

> ID：11109652
> 
> 赞同：6
> 
> 时间：2012-06-19T21:22:22.723
> 
> 标签：javascript, jquery

我有一个奇怪的问题，我似乎无法解决！它是我正在编写的一个大框架的一部分，但我编写了一些具有相同问题的测试代码。请参阅以下内容：

```
!function ($, window, undefined) {

    // BASE FUNCTION
    var test = function (selector, context) {
        return new test.fn.init(selector, context);
    };

    // SELECTOR FUNCTIONS
    test.fn = {
        selector:   undefined,
        init:       function (selector, context) {
            // Use jQuery to build selector object
            this.selector = $(selector, context);
            return this;
        },

        // Create a popup dialog
        popup:      function (options) {
            this.selector.dialog();
        }
    },

    // Expose Carbon to the global object
    window.test     = test;

}(window.jQuery, window); 
```

现在，当我使用以下内容时：

```
test('#popupLink').popup(); 
```

我得到“TypeError: test("#popupLink").popup 不是函数”。我知道它部分工作，因为如果我执行以下操作，我可以使用标准 jQuery 函数：

```
test('#popupLink').selector.hide(); 
```

任何帮助将不胜感激，因为我现在有精神障碍。提前致谢！:)

**更新**

我使用 console.log 查看返回的对象，它只有选择器元素，这很有意义，因为我没有使用原型。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:44:03.960

```
(function ($, window) {
    // BASE FUNCTION
    var test = function (selector, context) {
        return new test.fn.init(selector, context);
    };

    // SELECTOR FUNCTIONS
    test.fn = test.prototype = {
        constructor: test,
        init: function (selector, context) {
            // Use jQuery to build selector object
            this.selector = $(selector, context);
            return this;
        },

        // Create a popup dialog
        popup: function (options) {
            console.log('popup');
            return this;
        }
    };

    // Expose test to the global object
    window.test = test;
}(window.jQuery, window));

test.fn.init.prototype = test.fn; 
```

您错过了创建的 test 实例上的构造函数和原型链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-10T11:41:09.347

在我的情况下，错误是在添加集成测试时，我没有注意到我试图调用的函数属于一个模拟类。很容易混淆，因为在尝试导航时（我使用的是 IntelliJ），IDE 会转到已实现的功能。

模拟错误中提到的功能解决了这个问题。

# android - 替换应用程序使用的 Android 服务

> ID：11109653
> 
> 赞同：0
> 
> 时间：2012-06-19T21:22:25.497
> 
> 标签：android, android-intent, android-service

我有一个库，我分发给第三方，其中包含一项服务。它也被混淆了。有没有办法让第三方应用程序（我无权访问源代码）使用我可以在本地构建的服务？

我想做一些事情，比如在真实环境中分析服务行为，或者使用其他不可用的各种调试设置/调试代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:38:44.497

好吧，服务可以远程化，它可以作为自己的应用程序单独分发，然后由想要使用它的应用程序绑定到。不确定这是否有帮助，但您可以将服务创建为远程服务，并将其与使用它的应用程序分开部署。

# php - 在从命令行运行 PHP 之前设置 $_SESSION 全局变量

> ID：11109656
> 
> 赞同：0
> 
> 时间：2012-06-19T21:22:31.207
> 
> 标签：php, command-line

我尝试从命令行输出我的 .php 文件，并且我希望能够模拟`$_SESSION`此输出的值。

我试过`php test.php --define $_SESSION["id"]=1`了，但它没有设置全局变量`$_SESSION`。

我显然没有正确使用命令行，但我找不到我应该怎么做。

有什么想法让它发挥作用吗？

非常感谢

编辑：对于我的示例 test.php 如下：

```
<? echo $_SESSION['id'];?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:46:19.583

```
$ cat setsession.php 
<?php
//fixed session:
session_id("fixed");
session_start();
?>
$ cat checksession.php 
<?php
if(!isset($_SESSION['counter'])) $_SESSION['counter'] = 0;

$_SESSION['counter']++;

var_dump($_SESSION);
$ php -d auto_prepend_file=setsession.php checksession.php 
array(1) {
  ["counter"]=>
  int(1)
}
$ php -d auto_prepend_file=setsession.php checksession.php 
array(1) {
  ["counter"]=>
  int(2)
}
$ php -d auto_prepend_file=setsession.php checksession.php 
array(1) {
  ["counter"]=>
  int(3)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:38:03.790

您不能以任何有意义的方式在命令行上使用会话——会话标识符存储在 cookie 中。命令行不做cookies，所以正常的会话方式不起作用。当然，您可以`$_SESSION`在脚本运行期间使用超全局。只是不要期望它在同一脚本的不同调用之间持续存在。

# android - 在android中，为什么我的按钮动画只能从onClick（）中清除？

> ID：11109657
> 
> 赞同：0
> 
> 时间：2012-06-19T21:22:41.143
> 
> 标签：android, animation, button, onclick

我想为按钮设置动画，所以我使用了这个答案：

[https://stackoverflow.com/a/4852468/559525](https://stackoverflow.com/a/4852468/559525)

并在第一次尝试时使其动画化。但是当我尝试从应用程序的各个位置停止动画时，我发现只有在 onClick() 回调中调用 view.clearAnimation() 时才会停止动画。

我的第一个猜测是这与多线程同步问题有关，但我知道 UI 线程，并且我很确定我是从主 UI 线程中批准的位置调用 clearAnimation() 方法。

我的另一个想法是 UI 需要失效或刷新？但是我尝试在对我的主布局进行无效之前进行此调用，但这并没有帮助。我知道我的无效工作正常，因为它可以更新其他按钮属性，如颜色。

感谢您的任何建议！

# php - 如何使用 Regex 和 Php 获取元素之间的数据

> ID：11109661
> 
> 赞同：-1
> 
> 时间：2012-06-19T21:22:51.390
> 
> 标签：php, html, regex

如何使用 PHP + Regex 从这个 html 代码中获得“85 mph”？我想不出正确的正则表达式 这是代码 [http://pastebin.com/ffRH9K9Q](http://pastebin.com/ffRH9K9Q)

```
 <td align="left">Los Angeles</td>
</tr>
<tr>
    <td align="left">Wind Speed:</td>
    <td align="left">85 mph</td>
</tr>
<tr>
    <td align="left">Snow Load:</td>
    <td align="left">0 psf</td> 
```

*（简化示例）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:14:51.577

你已经听说过不使用正则表达式来完成这项工作，所以我不会谈论这个。让我们在这里尝试一下。也许不是理想的解决方案，但可以为您工作。

```
 <?php
       $data = 'your table';
       preg_match ('|<td align="left">(.*)mph</td>|Usi', $data, $result);
       print_r($result);  // Your result shoud be in here 
```

您可能需要在正则表达式中进行一些修剪或考虑空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:32:16.293

链接到关于 NOT PARSING HTML WITH REGEX 的帖子的第一条评论很重要。也就是说，请尝试[使用 DOMDocument::loadHTML](http://docs.php.net/manual/en/domdocument.loadhtml.php)之类的方法。这应该让您开始使用 PHP 遍历 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:05:38.233

要扩展 DorkRawk 的建议（希望提供一个相对简洁的答案，不会让初学者不知所措），试试这个：

```
<?php

$yourhtml = '<td align="left">Los Angeles</td>
</tr>
<tr>
    <td align="left">Wind Speed:</td>
    <td align="left">85 mph</td>
</tr>
<tr>
    <td align="left">Snow Load:</td>
    <td align="left">0 psf</td>';

$dom = new DOMDocument();
$dom->loadHTML($yourhtml);

$xpath = new DOMXPath($dom);
$matches = $xpath->query('//td[.="Wind Speed:"]/following-sibling::td');

foreach($matches as $match) {
    echo $match->nodeValue."\n\n";
} 
```

# iphone - iPhone以编程方式设置界面方向

> ID：11109662
> 
> 赞同：2
> 
> 时间：2012-06-19T21:22:51.753
> 
> 标签：iphone, ios, orientation

我正在尝试以`UIViewController`编程方式更改单个的方向。用户应该在设置中选择视图是否为纵向。该值将被保存在`NSUserDefaults`特定`ViewController`的方向应该改变。所以如果肖像是在`interfaceOrientation`应该是`UIInterfaceorientationUpsideDown`......

我使用了以下方法，但它只会在用户将设备变为横向/纵向时改变方向......否则不会触发任何内容。

```
- (BOOL)shouldAutoRotateToInterfactOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

此外，我尝试了下一个（也使用方法名称“ `setOrientation`”）：

```
[[UIDevice currentDevice] orientation: UIDeviceOrientationPortraitUpsideDown]; 
```

但同样，什么也没发生，只是出现错误，因为 xcode 说没有具有此名称的方法。

但是应该有另一种以编程方式更改它的方法......第一种方法也只是在设备位置之后处理 actionListener 的方法，但应该有一种方法可以`actionListener`直接调用它......我只是看了看里面`UIApplication`文件，但没有有用的方法....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T00:10:27.577

你应该使用类似这样的代码：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(rotationChanged:)
                                             name:@"UIDeviceOrientationDidChangeNotification"
                                           object:nil]; 
```

然后，根据方向更改视图：

```
-(void)rotationChanged:(NSNotification *)notification{
    NSInteger orientation = [[UIDevice currentDevice] orientation];
    UIWindow *_window = [[[UIApplication sharedApplication] delegate] window];
    switch (orientation) {
        case 1:
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.4];

            [_window setTransform:CGAffineTransformMakeRotation (0)];
            [_window setFrame:CGRectMake(0, 0, 320, 480)];
            [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:YES];

            [UIView commitAnimations];
            break;
        case 2:
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.4];

            [_window setTransform:CGAffineTransformMakeRotation (M_PI)];
            [_window setFrame:CGRectMake(0, 0, 320, 480)];
            [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:YES];

            [UIView commitAnimations];
            break;
        case 3:
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.4];

            [_window setTransform:CGAffineTransformMakeRotation (M_PI / 2)];
            [_window setFrame:CGRectMake(0, 0, 320, 480)];
            [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:YES];

            [UIView commitAnimations];
            break;
        case 4:
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.4];

            [_window setTransform:CGAffineTransformMakeRotation (- M_PI / 2)];
            [_window setFrame:CGRectMake(0, 0, 320, 480)];
            [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:YES];

            [UIView commitAnimations];
            break;
        default:
            break;
    }
} 
```

希望它有所帮助：P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T12:32:38.413

`iOS7`在更早的时候使用它可以完美地工作。

```
[[UIDevice currentDevice] setValue:
           [NSNumber numberWithInteger: UIInterfaceOrientationPortrait]
                            forKey:@"orientation"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:27:36.060

```
[[UIApplication sharedApplication] setStatusBarOrientation:yourDesiredOrientation]; 
```

然后您将需要编辑 shouldAutoRotate 方法（以下示例用于纵向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T07:30:04.047

从以前的答案：

```
[[UIDevice currentDevice] setValue:
           [NSNumber numberWithInteger: UIInterfaceOrientationPortrait]
                            forKey:@"orientation"]; 
```

**警告**

我无法评论这个答案，所以我会编辑它。

这个答案的作者试图将一个`UIInterfaceOrientation`类型的值设置为一个变量`UIDeviceOrientation`。它们都是`NSInteger`枚举，因此编译器不会显示警告/错误。但它们有不同的含义，“设备”还有“面朝上”和“面朝下”两种方向。

# c# - LINQ 从另一个列表更新一个列表

> ID：11109663
> 
> 赞同：0
> 
> 时间：2012-06-19T21:22:56.003
> 
> 标签：c#, linq

我试图找到一种优雅的方式来更新 ConcurrentDictionary 中的值。我在下面创建了一个我想要实现的快速示例：

```
ConcurrentDictionary<int, MyDataClass> dataLookup = new ConcurrentDictionary<int, MyDataClass>();

// Initialise the example dataLookup with some dummy data
new List<MyDataClass>
{
    new MyDataClass { Id = 1, ValueProperty = 0 },
    new MyDataClass { Id = 2, ValueProperty = 0 },
    new MyDataClass { Id = 3, ValueProperty = 0 },
    new MyDataClass { Id = 4, ValueProperty = 0 },
    new MyDataClass { Id = 5, ValueProperty = 0 }               
}.ForEach(myClass => dataLookup.TryAdd (myClass.Id, myClass));

// incoming results that need to be fed into the above dataLookup 
List<MyDataClass> newDataReceived = new List<MyDataClass>
{
    new MyDataClass { Id = 1, ValueProperty = 111 },
    new MyDataClass { Id = 3, ValueProperty = 222 },
    new MyDataClass { Id = 5, ValueProperty = 333 }
}; 
```

因此，在上面的示例中，我想将 ID 为 1、3 和 5 的 dataLookup ConcurrentDictionary 中的 ValueProperty 分别设置为 111、222 和 333。我可以将 newDataReceived 对象更改为我想要的任何对象，但我几乎将 dataLookup 作为 ConcurrentDictionary 卡住了。

目前我正在遍历列表，但我正在寻找一些关于使用 LINQ 来提高这项任务效率的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:33:25.357

如果它真的只是即将到来的*更新*，你可以使用另一个`ForEach`：

```
newDataReceived.ForEach(x => dataLookup[x.Id].ValueProperty = x.ValueProperty); 
```

就我个人而言，我只是用一个简单的 foreach 循环来表达这一点：

```
foreach(var update in newDataReceived)
    dataLookup[update.Id].ValueProperty = update.ValueProperty; 
```

请注意，上面缺少检查项目是否实际包含在并发字典中 - 如果不能保证（它不是更新），您将不得不添加此检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-25T05:00:22.713

刚刚尝试在 Join() 中更新并惊讶它起作用了。您显然必须实现自己的 IEqualityComparer 才能仅比较所需的成员，例如 ID、键或类似的。

```
 private static void SaveProcessedFile(IEnumerable<HashedRow> processedRows, IEnumerable<HashedRow> justProcessedRows)
    {
        var comparer = new HashedRowEqualityComparerOrderLine();
        var updated = justProcessedRows.Join(processedRows, n => n, o => o, (n, o) => { o = n; return n; }, comparer); // n - new, o - old
        var inserted = justProcessedRows.Except(updated, comparer);
        // To do something
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:29:21.683

Linq 用于查询，而不是更新。如果您能够创建一个新字典，则可以使用 Linq 的`ToDictionary()`方法，但是由于您必须调用一个方法来添加您或多或少地被降级为`foreach`循环。

此外，Linq 不会让任何事情*变得更高效*，它只会让代码看起来更自然。

# c# - 将图像渲染到页面

> ID：11109666
> 
> 赞同：0
> 
> 时间：2012-06-19T21:23:30.427
> 
> 标签：c#, asp.net

我有一个页面`http://www.mysite.com/image.aspx`，我想加载和显示图像而不是呈现 HTML。

我将页面的 ContentType 设置为`image/png`，这是我的代码：

```
using (Bitmap image = new Bitmap("http://www.google.com/images/img.png"))
{
    using (MemoryStream ms = new MemoryStream())
    {
        image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        ms.WriteTo(Response.OutputStream);
    }
} 
```

但我收到一条错误消息：

> ***不支持 URI 格式。***

如何加载外部图像并将其呈现到页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:31:19.113

您不能使用 URI 加载位图 - 它必须是您计算机的本地文件。

如果您想从 Web 加载图像然后渲染它，您需要向该特定资源发出 Web 请求，然后按照您的操作将字节渲染到流中。

又名

```
WebRequest webRequest = WebRequest.Create("http://www.google.com/images/img.png");
using(WebResponse response = webRequest.GetResponse())
{
    using(MemoryStream stream = new MemoryStream(response.GetResponseStream())
    {
         stream.WriteTo(Response.OutputStream);
    }
} 
```

# microdata - 用于识别散布在 HTML doc/HTML 表格中的元素的微数据 ItemID

> ID：11109669
> 
> 赞同：11
> 
> 时间：2012-06-19T21:23:40.607
> 
> 标签：microdata, schema.org

我的开发人员使用 HTML 表格编写了一个产品列表。代码是这样的：

```
<table>
<tr  class="name">
<td>Product Name #1</td><td>Product Name #2</td><td>Product Name #3</td>
</tr>
<tr class="price">
<td>Product Price #1</td><td>Product Price #2</td><td>Product Price #3</td>
</tr>
<tr class="brand">
<td>Product Brand #1</td><td>Product Brand #2</td><td>Product Brand #3</td>
</tr>
</table> 
```

你明白了。从视觉上看，它看起来很完美，但是在尝试通过 schema.org 进行标记时，我遇到了问题，因为 products 属性不存在是整齐的嵌套 HTML 元素，而是分布在整个表格中。有没有办法使用`ItemID`微数据属性来确保每个品牌和价格都与正确的产品名称相关联？

就像是：

```
<tr class="name">
<td itemscope itemtype="http://www.schema.org/Product" itemID="Product1">Product Name #1</td>
<td itemscope itemtype="http://www.scema.org/Product" itemID="Product2">Product Name #2</td> 
```

等等等等。有什么想法吗？我会重新编码页面以使其工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T23:55:55.757

是的，`itemid`这是正确的方法。您的示例将如下所示：

```
<table>
  <tr class="name">
    <td itemscope itemtype="http://www.schema.org/Product" itemid="Product1">
      <span itemprop="name">Product Name #1</span>
    </td>
    <td itemscope itemtype="http://www.schema.org/Product" itemid="Product2">
      <span itemprop="name">Product Name #2</span>
    </td>
  </tr>
  <tr class="price">
    <td itemscope itemtype="http://www.schema.org/Product" itemid="Product1">
      <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        <span itemprop="price">Product Price #1</span>
      </div>
    </td>
    <td itemscope itemtype="http://www.schema.org/Product" itemid="Product2">
      <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        <span itemprop="price">Product Price #2</span>
      </div>
    </td>
  </tr>
</table> 
```

通过重复使用相同`itemid`的内容，您告诉微数据解析器您在页面的不同部分谈论相同的项目。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-13T14:55:15.267

实际上，`itemid`这不是正确的方法。与 RDF 不同，微数据解析模型不会连接具有相同`itemid`.

相反，您应该使用 itemref 属性。

例如：

```
<div itemscope itemtype="http://schema.org/Product" itemref="foo"></div>
<div id="foo" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
  <span itemprop="price">Product Price #1</span>
</div> 
```

除了 Google，您还可以使用[https://webmaster.yandex.com/tools/microtest/](https://webmaster.yandex.com/tools/microtest/)测试微数据。

# android - 在线 mp4 视频无法播放

> ID：11109673
> 
> 赞同：0
> 
> 时间：2012-06-19T21:24:09.790
> 
> 标签：android, android-video-player

有什么问题，我已将此视频上传到服务器，但现在它没有播放，但如果我将此视频放在已评论的 sdcard 上，它会播放

```
public class VideoPlayerActivity extends Activity {
    /** Called when the activity is first created. */

        private MediaController mc;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        VideoView vd = (VideoView) findViewById(R.id.VideoView);

        mc = new MediaController(this);
        vd.setMediaController(mc);
Toast.makeText(this, "Video Player Started", 20).show();
          //vd.setVideoPath("sdcard/video/abc.mp4");
        vd.setVideoURI(Uri.parse("http://www.primesquad.com/future.mp4"));

        vd.start();
        }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:48:57.993

[正如您在Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)中看到的那样，流式传输视频不同于从 sdCard播放视频，流式传输的限制在播放视频时不适用。我在 HTC Desire 中正常使用视频流时遇到了这个问题，但拒绝使用摩托罗拉机器人进行流式传输

# ios - 确定UIImageView“绘图”时间的方法？

> ID：11109687
> 
> 赞同：0
> 
> 时间：2012-06-19T21:25:25.303
> 
> 标签：ios, uiimageview, profiling, instruments

在我的应用程序中，当我将一些自定义组件添加到 UIImageView 时，我发现性能很差。很可能是前面提到的自定义组件，它们需要改进，但我希望能够衡量这些改进。我还想看看在特定视图的动画期间 UIImageView 被绘制了多少次。

我采用的一种策略是将 UIImageView 子类化（仅用于基准测试）并在我的子类日志中覆盖“绘制”方法，然后调用超类的方法。

这很好，UIImageView 的子类不会调用 drawRect 的保存。我可以以这种方式覆盖 UIImageView 的“绘图”方法吗？

理论上，我可以通过将 UIImageView 的子类替换为 UIView 的子类来完成类似的操作，但这会变得更具侵入性，我只想将其作为最后的手段。

最后，我是不是走上了一条兔子路，并且有一个非常明显的解决方案（或工具）盯着我看？我知道 Instruments 可以在该领域的帧速率方面提供一些分析，但由于我对该工具的了解有限，我看不到解决我的问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:35:22.367

# 使用仪器。

它是为这些东西而生的。你自己*也*说了。

如果您以前从未使用过“[仪器用户指南”，那么它是一个很好的起点。](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/InstrumentsUserGuide/Introduction/Introduction.html)

学习如何使用乐器是值得的。在调整应用程序的性能、查找内存泄漏等时，您将始终使用它。

* * *

如果你真的确定要知道一个方法的执行时间，那么你可以看看 DTrace。它*非常*强大，但比 Instruments 更难。您还可以使用它在 Instruments 中构建您的自定义工具。

# asp.net-mvc-3 - 使用自定义构建脚本将 mvc 3 站点部署到天蓝色

> ID：11109689
> 
> 赞同：0
> 
> 时间：2012-06-19T21:25:39.870
> 
> 标签：asp.net-mvc-3, azure

我看到的关于如何将 MVC 应用程序部署到 Windows Azure 的每个示例都使用 Visual Studio 发布工具，我的问题是我的应用程序是使用自定义 msbuild 文件 (.proj) 部署的。

我无法更改它的部署方式，那么有没有办法在不发布的情况下部署到天蓝色？类似于将我的自定义构建的目录结果复制到某个 azure 目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:19:00.473

感谢您让我们知道它适用于 Windows Azure Web 角色。您可以使用[Windows Azure SDK 1.6 博客的自动构建和](http://blogs.msdn.com/b/tomholl/archive/2011/12/06/automated-build-and-deployment-with-windows-azure-sdk-1-6.aspx)部署直接从 ccproj 文件进行部署。即使它是使用 SDK 1.6 编写的，您也可以使用 SDK 1.7 的确切细节。

![在此处输入图像描述](../Images/9fbb32ee2ebfdb8a07a140dd9ff27cc0.png)

您还可以查看[使用 MSBuild 部署到多个 Windows Azure 环境](http://blogs.msdn.com/b/tomholl/archive/2011/02/23/using-msbuild-to-deploy-to-multiple-windows-azure-environments.aspx)博客。

# magento - 在与普通属性相同的行上获取 magento 自定义产品选项发票/电子邮件 PDF

> ID：11109691
> 
> 赞同：1
> 
> 时间：2012-06-19T21:25:47.730
> 
> 标签：magento, pdf-generation, zend-pdf

我在这里发现了一个关于我的问题的类似问题：[Magento PDF Invoices - how do I get custom product options to be on a line?](https://stackoverflow.com/questions/6397208/magento-pdf-invoices-how-do-i-get-custom-product-options-to-be-on-one-line/10191038#10191038)

但不幸的是，这并不是我想要的。所以我的问题如下；如何获得“attributes_info”，可配置选项变量与其他属性位于同一行。比如名称、数量、价格等。

我想我很接近，但我不确定它是否在 getItemOptions 函数中，或者它是第一个值为空的嵌套数组。

截图：[http ://cl.ly/0z1y2f0G070P172q2B1S](http://cl.ly/0z1y2f0G070P172q2B1S)

# html - 正则表达式从 HTML 标记中提取文本

> ID：11109693
> 
> 赞同：0
> 
> 时间：2012-06-19T21:25:51.303
> 
> 标签：html, regex

我知道这已经被问了至少一千次，但我在这里找不到与此字符串中的名称匹配的正确正则表达式：

```
<td><div id="topbarUserName">Donald</div></td> 
```

我想得到'Donald'这个名字，最接近的正则表达式是>[a-zA-Z0-9]+，但结果是>Donald。

我在 PureBasic 中编码（它的语法类似于 Basic），它使用 PCRE 库进行正则表达式。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:48:20.997

如果您只使用编号组而不是整个匹配，则 Josh 的模式将起作用。如果您必须使用整个比赛，请使用类似`(?<=>)(\w+?)(?=<)`

无论哪种方式，众所周知，正则表达式都不适合解析 HTML。

解释： `(?<=)`用于检查当前项目之前是否出现了某些内容。 `\w+?`将匹配任何“单词”字符一次或多次，但只要模式的其余部分匹配某些内容就停止，在这种情况下，`?`可能会被忽略。 `(?=)`用于检查当前项之后是否出现某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:28:06.387

试试这个

它应该捕获任何字母/数字

`>([\w]+)<`

另外，我不确定您的项目限制是什么，但是做这样的事情会容易得多

`$('#topbarUserName').text();`

在 jQuery 中而不是使用正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:44:34.273

`>([a-zA-Z]+)`应该做的伎俩。记住要正确分组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-04T17:15:46.380

为什么不使用简单的旧基本字符串函数呢？

```
a.w = FindString(HTMLstring.s, "topbarUserName") + 16 ; 2 for "> and topbar...
If a > 0
b.w = FindString(HTMLstring, "<", a)
If b > 0
c.w = b - a
Donald.s = Mid(HTMLstring,a, c)
EndIf
EndIf
Debug Donald 
```

# opencv - 使用 open with visual studio 读取多个图像

> ID：11109695
> 
> 赞同：-1
> 
> 时间：2012-06-19T21:26:02.367
> 
> 标签：opencv

我正在研究数字图像处理。我必须使用 Visual Studio 在打开的 cv 中运行 888 张图像的代码。任何人都可以帮我提供从文件夹加载多个图像的源代码。我有一个病变和一个遮罩，因此应该使用总共 888 个 jpg 病变和 888 个 tif 图像遮罩。因此，任何人都可以帮助我直接从包含 jpg 和 tif 图像的文件夹中对这些图像运行代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:55:05.727

取决于您使用的是哪种 OpenCV 风格（旧的 C 或新的 C++），但我实际上使用的是这样的代码：

```
cv::Mat srcImage1, srcImage2;
srcImage1 = cv::imread("//path/to/your/file/");
srcImage2 = cv::imread("//path/to/other/file/"); 
```

在 for 循环中执行此操作并根据需要使用图片。

例如，如果图片在末尾使用升序命名，只需构建一个包含数字的字符串（例如使用 sprintf_n ）。

最好的，

弗洛

# php - 创造动态元素并使用 jQuery 和 PHP 作为数组发送多个 POST然后能够将每个选择的值存储为一个数组，然后通过 $_POST 将其发送到 PHP 页面？我想像这样填充 <select>元素：/theloader.php echo "</select>\n"; while ($row = mysql_fetch_array($course_elements)) { echo " <option value="&quot;.$row[" <="" h1="">> ID：11109696
> 
> 赞同：0
> 
> 时间：2012-06-19T21:26:04.283
> 
> 标签：php, jquery, select, dynamic

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:41:38.013

有什么理由选择的人口必须是动态的？数据是否发生变化，或者您只是让用户添加更多订单项以从预设选项中进行选择？

如果下拉列表中的数据本身是动态的，则需要结合使用 javascript 和 ajax 调用来实时从 php 获取数据。

如果选项不是动态的，那么您根本不需要 ajax，只需在 javascript 中填充变量并创建一个操作以使用已定义的变量添加更多下拉列表。</option>

# nosql - citrusleaf 中 bin 名称长度的限制

> ID：11109697
> 
> 赞同：0
> 
> 时间：2012-06-19T21:26:07.597
> 
> 标签：nosql, key-value-store

citrusleaf 中的 bin 名称长度是否有限制。默认值是14，可以增加吗？

如果 binName 的长度超过 14 个字符（使用 Java API），我会收到以下错误

null 由于参数错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:56:44.713

此限制是从服务器端强制执行的。这是为了控制内存和磁盘需求而人为的限制。请注意，这仅适用于 bin 名称，而不适用于 bin 值。

有线协议是一个通用接口。因此，它允许传递任何长度。不同的名称遵循不同的限制。例如，命名空间和集合名称应小于 32 字节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:16:12.103

最重要的是，在当前 Citrusleaf 版本中，您不能使用超过 14 个字符的 bin 名称

# svn - 提交守护进程或服务

> ID：11109704
> 
> 赞同：0
> 
> 时间：2012-06-19T21:26:40.307
> 
> 标签：svn, queue, daemon

我想在 linux 上有一个服务，它以某种方式接受颠覆操作的请求。

操作队列的示例是这样的：

```
commit ~/repo/1.txt
add ~/repo/2.txt
commit ~/repo/2.txt 
```

通过文件、管道或 HTTP 进行通信会很棒。看来我必须自己写这个东西，但可能已经有类似的东西了。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:57:58.030

您可以通过 svn 发行版获得 svnserve。这是通过专有协议实现的。对于通过 http 的 svn 访问，您需要使用 svn 插件配置 apache。

这在手册中有很好的描述：http: [//svnbook.red-bean.com/nightly/en/svn.serverconfig.html](http://svnbook.red-bean.com/nightly/en/svn.serverconfig.html)

# android - 停止在 Eclipse 中录制宏

> ID：11109705
> 
> 赞同：2
> 
> 时间：2012-06-19T21:27:05.207
> 
> 标签：android, eclipse, ide, macros

我正在 Eclipse Helios 中开发一个 Android 应用程序，我似乎不小心按下了一个开始录制宏的组合键（使用实际宏）：

![在此处输入图像描述](../Images/be8b905b30292fe2731f2b252ab8ed0b.png)

**如何停止录制宏？**

我在 Eclipse 菜单中找不到它，而且我发现在网上很难找到答案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:17:22.250

`Ctrl``Alt``R`您开始使用和停止录制宏的方式相同。

您还可以使用工具栏上的按钮：

![实用宏工具栏按钮](../Images/9b27c1f6c605bd7a4769695dda0c2059.png)

# c# - C# StringWriter 比 C++ ofstream 快（通过 pinvoke）？

> ID：11109710
> 
> 赞同：2
> 
> 时间：2012-06-19T21:27:32.033
> 
> 标签：c#, performance, visual-c++, dll, pinvoke

我只是 c++ 的初学者，所以我可能做错了什么，但无论如何我创建了一个 c++ dll，并从我的 wpf 项目中调用它：

C++代码：

```
extern "C" __declspec (dllexport) double writeTxt()
{   
    ofstream mf("c:\\cpp.txt");     
    for(int i=0;i<999;i++)
    {
     mf<<"xLine: \n";
    }
    mf.close();
    return 1;

} 
```

从 c# 调用代码：

```
[DllImport(@"C:\Users\neo\Documents\visual studio 2010\Projects\TestDll\Debug\TestDll.dll",
       CallingConvention = CallingConvention.Cdecl)]
    public static extern double writeTxt(); 
```

现在我正在尝试将执行时间与这个 c# 函数进行比较：

```
double writeTxtCs()
    {
        StreamWriter sw = new StreamWriter(@"c:\cs.txt");
        for (int i = 0; i < 999; i++)
        {
            sw.WriteLine("Line: " + i);
        }
        sw.Close();
        return 0;
    } 
```

但是 c# 函数的速度大约是 c++ 函数的两倍。
像这样测试：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        long[] arr = new long[100];
        Stopwatch sw = new Stopwatch();
        for (int i = 0; i < 99; i++)
        {
            sw.Start();
            //double xxx = writeTxt();
            double xxx = writeTxtCs();
            arr[i] = sw.ElapsedMilliseconds;
            sw.Reset();
        }
        MessageBox.Show(arr.Average().ToString());
        Close();
    } 
```

运行 c# 函数时，我通常会得到 ~0.65ms，而运行 c++ 函数时，我会得到 ~1.1ms。
我的问题是：我做错了什么还是在这种情况下 c# 真的比 c++ 更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:32:07.930

您不是在测试 C++ 与 C#。您正在测试 [C++ plus 库] 与 [C# plus 库]。

为了找出 ofstream 比 StreamWriter 慢的原因，您需要分析代码或查看内部结构。

无论如何，一毫秒对于计算机来说是非常小的时间。我会以 1000 倍的负载重复测试，以使时序抖动无关紧要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T21:42:11.613

所有其他答案都有有效点。除此之外：

您正在针对 C++ DLL 的“调试”构建进行测试，这可能会降低 C++ 性能，而不是它对 C# 性能的影响。尝试对两者进行优化，看看效果如何。

尽管如此，I/O 与“语言”并没有多大关系。它更多的是关于运行时和操作系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T21:33:07.650

这可能是一个缓冲问题，即 C# 和 C++ 文件写入内容可能以不同的方式缓冲数据，这会导致性能差异。

我建议您使用纯粹受 CPU 限制的基准测试操作，而不是受 IO 限制的操作（例如写入硬盘驱动器）。例如，查看每个函数从 0 计数到 MAX_INT 的速度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T21:34:24.533

这不是一个真正可靠的基准。你在那里做文件IO，这高度依赖于ofstream和StreamWriter的实现。还有，有问题吗？

# c# - 数据无法从树视图复制到 datagridview 中的数据集

> ID：11109712
> 
> 赞同：1
> 
> 时间：2012-06-19T21:27:38.713
> 
> 标签：c#, xml, winforms, datagridview, treeview

我想暂时将一些数据从树视图放到 datagridview 中，但是 datagrid 视图已经从 xml 文件中加载了一些数据。

有人请向我解释这个机制。

这是我的拖放功能：//如果数据网格视图中没有数据，它可以完美地工作。

```
 private void DataGridView1OnDragDrop(object sender, DragEventArgs e)
    {
        Point dscreen = new Point(e.X, e.Y);
        Point dclient = dataGridView1.PointToClient(dscreen);
        DataGridView.HitTestInfo hitTest = dataGridView1.HitTest(dclient.X, dclient.Y);

        if (hitTest.ColumnIndex == 0 && hitTest.Type == DataGridViewHitTestType.Cell)
        {
            e.Effect = DragDropEffects.Move;
            //dataGridView1.Rows.Insert(hitTest.RowIndex, "hitTest", "hitTest", "hitTest", "hitTest");
            var data = (object[]) e.Data.GetData(typeof(string[]));
            dataGridView1.Rows.Insert(hitTest.RowIndex, data);

        }
        else
        {
            e.Effect = DragDropEffects.None;
        }
        dataGridView1.AllowUserToAddRows = false;
    } 
```

对于数据网格：

```
XmlReader xmlFile;
xmlFile = XmlReader.Create("Product.xml", new XmlReaderSettings());
DataSet ds = new DataSet();
ds.ReadXml(xmlFile);
dataGridView1.DataSource = ds.Tables[0]; 
```

对于树视图：

```
var filename = @"C:\Check.xml";
//First, we'll load the Xml document
XmlDocument xDoc = new XmlDocument();
xDoc.Load(filename); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:01:26.720

与其将拖放数据添加到控件，不如**将其添加到**控件的**数据源**中。

```
// will allow you to drop your data anywhere on gridview where a cell is
if (hitTest.Type == DataGridViewHitTestType.Cell)
{
   e.Effect = DragDropEffects.Move;
   var data = (object[])e.Data.GetData(typeof(string[]));

   // causes error - if there is already data bound to the control
   //   see image below
   //dataGridView1.Rows.Insert(hitTest.RowIndex, data);

   DataTable dt = (DataTable) dataGridView1.DataSource;
   DataRow dr = dt.NewRow();
   dr.ItemArray = data;
   dt.Rows.Add(dr);
} 
```

*DebugMode 中的错误消息*

![在此处输入图像描述](../Images/bfe892e9d6ac74a764cf7bdd223d3d23.png)

对我来说很好 - 如果您的代码中出现任何错误，请告诉我

# grails - 如何让 Shiro 的注释在 Grails 中工作？

> ID：11109714
> 
> 赞同：3
> 
> 时间：2012-06-19T21:27:39.963
> 
> 标签：grails, shiro

我正在尝试将基于注释的安全性应用于我的 Grails 应用程序。

Peter[在这里](http://shiro-user.582556.n2.nabble.com/grails-plugin-annotations-td1493905.html)说我们应该使用 Shiro 的注解，而不是准弃用的 grails-shiro 插件注解。

一个人如何让它工作？

我发现 grails-shiro 插件偏离了 Shiro 的工作方式、领域转换的方式等等。有没有人尝试过直接实现 Shiro 而不是使用 grails 插件？有成功吗？

谢谢，格雷厄姆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-16T06:05:32.450

G'day 我已经接管了 Grails-Shiro 插件项目。我目前正在重新编写功能测试，并且可以确认 shiro 注释确实有效，但有几点需要注意：

*   您可以在控制器中将它们用于 grails 2.x 中的方法操作
*   您可以在服务方法上使用它们
*   他们目前不在服务*类*上工作（我正在调查这个）

例如，这适用于服务

```
class SecuredMethodsService {

def methodOne() {
    return 'one'
}

@RequiresGuest
def methodTwo() {
    return 'two'
}

@RequiresUser
def methodThree() {
    return 'three'
}

@RequiresAuthentication
def methodFour() {
    return 'four'
}

@RequiresRoles('User')
def methodFive() {
    return 'five'
}

@RequiresPermissions("book:view")
def methodSix() {
    return 'six'
} 
```

}

或在控制器中的操作方法上，如下所示：

```
 @RequiresAuthentication
def unrestricted() {
    render(view: 'simple', model: [msg: "secure action"])
} 
```

使用注解时，您可能需要添加“afterView”过滤器来捕获注解抛出的 AuthorizationException，例如

```
class ShiroSecurityFilters {
def filters = {
    all(uri: "/**") {
        before = {
            // Ignore direct views (e.g. the default main index page).
            if (!controllerName) return true
            // Access control by convention.
            accessControl()
        }
        afterView = { e ->
            while (e && !(e instanceof AuthorizationException)) {
                e = e.cause
            }

            if (e instanceof AuthorizationException) {
                if (e instanceof UnauthenticatedException) {
                    // User is not authenticated, so redirect to the login page.
                    flash.message = "You need to be logged in to continue."
                    redirect(
                            controller: 'auth',
                            action: 'login',
                            params: [targetUri: request.forwardURI - request.contextPath])
                } else {
                    redirect(controller: 'auth', action: 'unauthorized')
                }
            }

        }
    }
} 
```

}

我希望这会有所帮助。应该发布新版本的插件 RSN。

干杯，彼得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:00:18.377

既然没人接...

我不知道你是如何让注释工作的，但我在几个 Grails 项目中使用了 shiro 并且没有错过它们......那么你为什么需要它们？

当您需要授予显式角色权限时，您只需创建一些`ShiroRole`s 并为它们分配星级权限：'book:*' 允许角色在 book 控制器上执行所有操作。'book:list,show' 允许角色仅列出或显示书籍。

当您需要隐式权限时，请使用过滤器。因此，如果您想授予某人访问权限（例如）某人的老板，只需在过滤器中获取您想要决定的对象并做出决定。

当您需要在 gsp 代码中切换时（例如，仅当它是管理员时才显示此内容），请使用 shiro 标记。只需解压缩 shiro 插件并查找 taglibrary。这是有据可查的。

高温高压

# sharepoint - 如何使用 powershell 获取共享点项目？

> ID：11109719
> 
> 赞同：-1
> 
> 时间：2012-06-19T21:28:21.100
> 
> 标签：sharepoint, powershell

我想先检查共享点标题，看看 lib 是否没有那个相关文件。

我所知道的首先使用 spweb，而不是做什么？如何获得该列的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:44:20.670

要在 Sharepoint 中搜索文件，请查看此链接： [http ://www.thorntontechnical.com/tech/sharepoint/quick-tip-sharepoint-powershell-get-items-in-a-list-based-on-custom-columns -和其他提示](http://www.thorntontechnical.com/tech/sharepoint/quick-tip-sharepoint-powershell-get-items-in-a-list-based-on-custom-columns-and-other-hints)

要检查使用以下代码：

```
$Site = Get-SPWeb $siteurl
$Site.GetFile($myFile).CheckOut() 
```

# php - 正则表达式 URL 调度

> ID：11109724
> 
> 赞同：0
> 
> 时间：2012-06-19T21:28:41.787
> 
> 标签：php, regex

我正在用 PHP 构建一个 REST API，我需要以下正则表达式的帮助来处理这些 url 的解析：

```
https://api.mine.com/mine&id=5/comment&id=3
https://api.mine.com/user&username=rick&email=rick@rick.com/friend&id=3 
```

所以在网址中：/mine&id=5/comment&id=3

我们想要得到嵌套的参数和值，所以最终我们得到了这个数组：

我的 => 'id': 5，评论 => 'id': 3

我可以使用什么正则表达式来获得这个也支持多个参数的算法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:41:09.930

您可以使用[`preg_match_all()`](http://php.net/manual/en/function.preg-match-all.php)

```
$pattern = "\/(.*?)\&(.*?)=(.*?)\/";
preg_match_all($pattern, $url, $matches);
print_r($matches); 
```

# regex - C shell 不知道这条线做什么（字符串的东西）

> ID：11109728
> 
> 赞同：0
> 
> 时间：2012-06-19T21:28:56.623
> 
> 标签：regex, string, csh

蹩脚的标题，是的。但老实说，我不知道这行代码做了什么，除了它可能将一些参数传递给 perl 脚本。这是行：

```
dbget.pl "params::INSTANCES_*" | /bin/sed -e 's/^setenv \(.*\) '"'"'\(.*\)'"'"'; /\1 = \2/ ' > .gen_inst_cache.$$ 
```

我猜这里有一堆正则表达式？这可能就是为什么它一开始看起来如此难以理解的原因。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:41:47.663

以“params::INSTANCES_*”作为参数调用的名为 dbget.pl 的脚本将在标准输出上生成一些输出。此流将在标准输入中定向到 sed，即流编辑器。

Sed 将替换任何以以下开头的行：

```
setenv (something) '(somethingelse)';[space] 
```

进入：

```
(something) = (somethingelse)[space] 
```

替换的输出将被定向到名为 .gen_inst_cache.$$ 的文件，其中 $$ 是调用 shell 进程的 pid 号。

# c# - 没有为动态创建的复选框调用事件处理程序

> ID：11109729
> 
> 赞同：2
> 
> 时间：2012-06-19T21:29:00.393
> 
> 标签：c#, asp.net, dynamic, checkbox

我对 C# 和 Asp.Net 有点陌生，所以这个问题可能听起来很重复，但我无法为这个特定问题找到解决方案。

我的 HTML 页面上有两个按钮，`.cs`文件中有一个类。单击其中一个按钮时，我以编程方式（动态）创建一个表。该表包含一些复选框，这些复选框也是动态创建的。创建表是我执行的最后一项任务。在此之前，我读取了几个文件并从中提取数据以创建表。绘制表格后，用户可以选择一个或多个复选框。

现在，如何在第二个按钮单击时，我可以知道在页面重新加载之前检查了哪些复选框？目前，我已将所有这些复选框作为`.cs`文件中唯一的类的成员变量。

我尝试通过 C# 代码添加复选框事件处理程序。但是当复选框被选中时，处理程序不会被调用。我不想将复选框的'autopostback'属性设置为true，因为如果设置为true，则在选中其中一个复选框后页面会重新加载。用户应该能够选择多个复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:44:49.733

动态添加您的复选框并为每个复选框设置一个唯一的名称。复选框仅在选中复选框时才会回传到服务器，因此您可以通过检查 Request.Form 来测试是否已选中，以查看名称是否存在。例如，假设您将复选框命名为 chk_[0-9]（即 chk_0、chk_1 等直到 9），您可以通过以下方式检查它们是否勾选：

```
for(int i=0; i < 10; i++)
{
    string chk_name = "chk_" + i.ToString();
    if (Request.Form[chk_name] != null)
    {
        //checkbox is checked
    }
    else
    {
        //checkbox is not checked
    }
} 
```

# java - 当 A 实现 C 时，将A.Class 传递给 public B(Class )

> ID：11109731
> 
> 赞同：1
> 
> 时间：2012-06-19T21:29:08.173
> 
> 标签：java, reflection

我有一个具有此声明的函数 B：

```
public void B(Class<? extends C> clazz); 
```

我有一个 A 类和一个 C 类，看起来像这样：

```
public interface C {}
public class A implements C{} 
```

我想这样做：

```
B(A.class); 
```

但是Java希望我这样做（然后抱怨未经检查的演员表）

```
B( (Class<? extends C>)A.class ); 
```

我如何向 Java 表明这都是类型安全的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:31:39.620

为我工作：

```
interface C {}
class A implements C {}

public class Test {

    private static void foo(Class<? extends C> clazz) {
    }

    public static void main(String[] args) {        
        foo(A.class);
    }
} 
```

也许您可以发布一个简短但*完整*的失败示例？

# c++ - 单独调用两个 CreateProcess() 可以共享相同的启动和进程信息吗？

> ID：11109732
> 
> 赞同：0
> 
> 时间：2012-06-19T21:29:13.033
> 
> 标签：c++, winapi, createprocess

如果我`CreateProcess()`多次使用，可以共享`PROCESS_INFORMATION`和`STARTUPINFO`变量吗？或者这真的是不好的做法？我已经阅读了很多文档，但是我找不到任何关于`CreateProcess()`多次处理调用的示例。

例如，假设我有下面的假功能：

```
 int SampleClass::sampleFn1(){ 
        //Variables
        STARTUPINFOW siStartInfo; 
        PROCESS_INFORMATION piProcInfo; 
        memset(&siStartInfo, 0, sizeof(siStartInfo)); 
        memset(&piProcInfo, 0, sizeof(piProcInfo)); 
        siStartInfo.cb = sizeof(siStartInfo); 

        //let us assume cmdPath = cmd.exe directory, and cmdTxtPtr has correct text
        if(!CreateProcess(cmdPath, cmdTxtPtr, NULL, NULL, false, 0, 
        NULL, NULL, &siStartInfo, &piProcInfo)){
            return 1; //failed at step 1
        }
        if(!CreateProcess(cmdPath,_T("/C ant debug"),NULL,NULL,false,0,NULL,
        (LPCTSTR)directory,&siStartInfo,&piProcInfo)){
            return 2; //failed at debug
        }
        WaitForSingleObject(piProcInfo.hProcess,10000);
        result = GetExitCodeProcess(piProcInfo.hProcess,&exitCode);
        CloseHandle(piProcInfo.hProcess);
        CloseHandle(piProcInfo.hThread);
        return 0;//finished
    } 
```

一个类似的功能恰好在我的程序中工作，但我想让它尽可能安全。

或者......我应该做一些类似下面的代码的事情：

```
 int SampleClass::sampleFn2(){   
        //Variables
        STARTUPINFOW siStartInfo; 
        PROCESS_INFORMATION piProcInfo; 
        memset(&siStartInfo, 0, sizeof(siStartInfo)); 
        memset(&piProcInfo, 0, sizeof(piProcInfo)); 
        siStartInfo.cb = sizeof(siStartInfo); 

        //let us assume cmdPath = cmd.exe directory, and cmdTxtPtr has correct text
        if(!CreateProcess(cmdPath, cmdTxtPtr, NULL, NULL, false, 
        0, NULL, NULL, &siStartInfo, &piProcInfo)){
            return 1; //failed at update project
        }
        WaitForSingleObject(piProcInfo.hProcess,10000);
        result = GetExitCodeProcess(piProcInfo.hProcess,&exitCode);
        CloseHandle(piProcInfo.hProcess);
        CloseHandle(piProcInfo.hThread);

        memset(&siStartInfo, 0, sizeof(siStartInfo)); 
        memset(&piProcInfo, 0, sizeof(piProcInfo)); 
        siStartInfo.cb = sizeof(siStartInfo); 
        if(!CreateProcess(cmdPath,_T("/C ant debug"),NULL,NULL,
        false,0,NULL,(LPCTSTR)directory,&siStartInfo,&piProcInfo)){
            return 2; //failed at debug
        }
        WaitForSingleObject(piProcInfo.hProcess,10000);
        result = GetExitCodeProcess(piProcInfo.hProcess,&exitCode);
        CloseHandle(piProcInfo.hProcess);
        CloseHandle(piProcInfo.hThread);
        return 0;//finished
    } 
```

还是他们都处理不好？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:33:50.813

AFAIK 该`CreateProcess`函数同时写入 STARTUPINFO 和 PROCESSINFO 结构，因此除非您不关心任何这些信息，我认为您应该这样做，否则您可以执行您给出的第二个示例。

通过使用 0 执行 memset，您将结构中的所有数据重置为 0。

我不确定这是非常好的做法，但也许其他人可以提供更多见解。

# asp.net - 将 2 个结果集作为数据源传递给本地 rdlc 文件

> ID：11109735
> 
> 赞同：0
> 
> 时间：2012-06-19T21:29:23.477
> 
> 标签：asp.net, sql, reportviewer, rdlc

我有 2 个表： 表 1：分数

```
stuID  |Subject | TotalScore
1          maths    40
1          bio      50
2          maths    60
2          bio      60
3          maths    30
3          bio      30 
```

表 2：总结

```
stuID  | Average | Rank
1          45       2
2          60       1
3          30       3 
```

现在正在创建一个rdlc 和一个reportviewer。我如何获得 ID 为 1 的 stu 的详细分数以及 rdlc 数据源的排名，并最终在单个数据源中报告查看器。例子：

```
 StuID : 1   Rank:2

Report:
subject |  Score
maths        40
bio          50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:45:46.207

您将需要两个数据集：

*   一个用于摘要，称之为 DsSummary: summary where stuID=?
*   另一个用于分数详细信息，称为 DsScoreDetails: score details where stuID=?

将 DsSummary 绑定到摘要部分

```
 StuID : 1   Rank:2 
```

在下方添加表格控件并绑定 DsScoreDetails

```
subject |  Score
maths        40
bio          50 
```

您使用报告参数通过查询字符串、下拉列表等动态更改学生 ID

# java - 如何在 html:hidden 标签中使用 STRING bean 的值？

> ID：11109739
> 
> 赞同：0
> 
> 时间：2012-06-19T21:30:28.183
> 
> 标签：java, jakarta-ee, struts

我`request.addAttribute("myStrBean", "someStr");`现在使用我想在标签中使用它，例如`<html:hidden name="myStrBean"/>`. 显然这不起作用，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:39:17.373

我不知道你想要实现什么，但如果你想从请求中获得价值，你可以使用 scriplet，即

```
<c:set var="myStrBean" value='<%=request.getAttribute("myStrBean")%>'/> 
```

但是要将数据设置为 struts html，您应该使用 ActionForm 示例

```
<html:hidden name="MyActionForm" property="myStrBean" /> 
```

感谢 dave 编辑：使用 EL

```
<c:set var="myStrBean" value="${myStrBean}" /> 
```

# java - 如何在 android 中正确使用应用内计费服务？

> ID：11109740
> 
> 赞同：1
> 
> 时间：2012-06-19T21:30:30.843
> 
> 标签：java, android, in-app-purchase, in-app-billing

我对android中的appbiling服务完全陌生，对我来说似乎有点复杂，我已经完成了所有的初始程序来实现它，但是我陷入了购买状态（我想是的）。我有一个列表视图和 onitem 点击监听器我已经这样做了：

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        purchaseposition= position;
        if(list.get(position).getPurchase().contentEquals("Buy")){
         val = billingService.requestPurchase("android.test.purchased", payloadContents);

        }else{
        SharedPreferences.Editor editor = preference.edit();
        editor.putInt("URLPOSITION", position);
        editor.commit();
        Intent quiz=new Intent("com.powergroupbd.appbil.QUIZACTIVITY");
        startActivity(quiz);
        }
    } 
```

这意味着如果列表视图包含文本“购买”，那么我将使用测试购买 ID 向市场发送购买请求。现在我希望如果购买成功，那么我将更改列表视图的文本“购买”以“播放”并启用测验。但这是我认为我错过了一切的部分。在购买状态更改中，我编写了以下代码来执行此操作：

```
@Override
        public void onPurchaseStateChange(PurchaseState purchaseState,
                String itemId, int quantity, long purchaseTime,
                String developerPayload) {
            if (Consts.DEBUG) {
                Log.i("Tag", "onPurchaseStateChange() itemId: " + itemId + " "
                        + purchaseState);
            }

            if (purchaseState == PurchaseState.PURCHASED) {
                ownedItems.add(itemId);
                list.get(purchaseposition).setPurchase("Play");
            }
            // YOU can also add other checks here
        } 
```

但它永远不会改变列表视图的文本，我永远无法进行测验，请我需要一个完整的想法我该怎么做，我的错误在哪里？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:38:04.430

你如何显示你的数据？

如果您使用的是列表视图和数组适配器，则需要调用`adapter.notifyDataSetChanged();`这告诉​​适配器您已更新信息并且它可以刷新列表。如果您不使用数组适配器，您可以调用`findViewById(int)`并动态更改视图。

# wicket - 为什么我会收到“以下组件无法呈现”？

> ID：11109743
> 
> 赞同：5
> 
> 时间：2012-06-19T21:30:38.557
> 
> 标签：wicket, wicket-1.5

当我将 ChildPanel 添加到页面时，我收到一条错误消息：

```
org.apache.wicket.WicketRuntimeException: 
The component(s) below failed to render.
A common problem is that you have added a component in code 
but forgot to reference it in the markup 
(thus the component will never be rendered).

1\. [Form [Component id = myForm]]
2\. [DropDownChoice [Component id = referenceType]]
3\. [TextField [Component id = referenceNumber]]
4\. [CheckBox [Component id = referenceReqChk]]
5\. [ [Component id = saveRefNumButton]]
6\. [ [Component id = cancelRefNumButton]]

    at org.apache.wicket.Page.checkRendering(Page.java:693)
    at org.apache.wicket.Page.onAfterRender(Page.java:849)
    at org.apache.wicket.markup.html.WebPage.onAfterRender(WebPage.java:213)
    at org.apache.wicket.Component.afterRender(Component.java:950)
    at org.apache.wicket.Component.render(Component.java:2298)
    at org.apache.wicket.Page.renderPage(Page.java:1041)
    at org.apache.wicket.request.handler.render.
           WebPageRenderer.renderPage(WebPageRenderer.java:105) 
```

我可以清楚地看到有问题的组件被添加到我的 AbstractParentPanel 的标记中，我的 ChildPanel 扩展了它。奇怪的是，如果我将 AbstractParentPanel 设为非抽象类，我可以毫无问题地添加该面板。

为什么我会收到此错误？

*注意：我已经找到了这个问题的答案。我将它添加到 SO 以帮助其他人，因为我浪费了比我应该花更多的时间来进行如此简单的检查。如果您被此消息所困扰并且此答案对您有所帮助，请考虑投票支持[此 JIRA 票](https://issues.apache.org/jira/browse/WICKET-4615)*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T21:30:39.277

总是从显而易见的开始，并确保`wicket:id(s)`在你的标记中定义。如果您在标记中看到添加的 ID，那么您很可能遇到以下情况：

*   您正在尝试呈现作为另一个组件的子组件的组件。这意味着您尝试呈现作为另一个页面或面板的子类的页面或面板。
    *   例如，在您尝试调用的页面内`add(new ChildPanel("myChildPanel"));`
*   您正在扩展的组件已经定义并添加了带有自己标记的组件
    *   例如，在`AbstractParentPanel`你呼唤内`add(new Label("myCommonLabel"));`
*   子组件中的标记未能包含一些必需的 Wicket XHTML
    *   例如`ChildPanel.html`，您忘记添加`<wicket:extend>`标签，甚至忘记添加标签`<wicket:panel>`，或者您让它们不包含有问题的组件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T14:41:00.760

确保您设置的是 Wicket 组件`wicket:id`而不是`id`! 这个总是让我着迷。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-29T08:49:12.873

另一种可能性是您的页面没有任何标记。如果您的 java 类的名称与您的 html 的名称不匹配，这可能会意外发生。我最近在这里遇到了区分大小写的情况。

# ruby - Ruby sprintf 在 1.9 中起作用

> ID：11109746
> 
> 赞同：5
> 
> 时间：2012-06-19T21:30:42.490
> 
> 标签：ruby, encoding, printf

我对`Kernel#sprintf`Ruby 中的方法感到有些困惑。

Ruby 1.9 处理编码的方式与 Ruby 1.8 不同。

以下是我所追求的结果，以及它在 Ruby 1.8 中的表现：

```
>> RUBY_VERSION
=> "1.8.7"
>> sprintf("%c", 88599)
=> "\027" 
```

这是它在 Ruby 1.9 中的行为方式：

```
1.9.3p194 :001 > RUBY_VERSION
=> "1.9.3" 
1.9.3p194 :002 > sprintf("%c", 88599)
=> "\u{15A17}" 
```

如果我使用魔术注释将编码设置为二进制（ascii-8bit），则会出现错误：

```
1.9.3p194 :001 > RUBY_VERSION
=> "1.9.3" 
1.9.3p194 :002 > # encoding: binary
1.9.3p194 :003 >   sprintf("%c", 88599)
RangeError: 88599 out of char range
from (irb):3:in `sprintf'
from (irb):3
from /Users/lisinge/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

我也用 Ruby 1.9.2 试过这个，所以似乎没有特定于 1.9.3。

也许我做错了什么？我对`Kernel#sprintf`方法不是很熟悉。

我正在使用一个名为 ruby​​-smpp 的 smpp 库，它可以在[github](https://github.com/raykrueger/ruby-smpp)上找到。[`send_concat_mt`](https://github.com/raykrueger/ruby-smpp/blob/master/lib/smpp/transceiver.rb#L47)当我尝试在 Ruby 1.9.3 中运行它时，它是第 47 行的方法。

如果你们中的任何人能对此事有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:58:34.360

sprintf 文档指出：

```
Field |  Other Format 
------+--------------------------------------------------------------
  c   | Argument is the numeric code for a single character or
      | a single character string itself. 
```

在 Ruby 1.8 的默认行为中，88599 不是单个字符的有效数字代码；我相信，这不是编码。它似乎在做的是对您提供的值进行 mod 256，然后将其转换：

```
% irb
1.9.3-p194 :003 > 88599 % 256 == 027
 => true 
```

至于你做错了什么，不。确实发生的是，允许越界字符代码是 Ruby 1.9 修复的错误，现在可以正确抛出异常。

# android - 带有 ndk 的本机应用程序无法正常工作

> ID：11109747
> 
> 赞同：1
> 
> 时间：2012-06-19T21:30:43.720
> 
> 标签：android, android-ndk

我有两个设备。一个是运行 2.3.6 的 HTC Nexus-One，另一个是运行 2.2.2 的 LG Optimus V。该项目有一个我正在使用 android ndk 构建的 jni 库。该应用程序在 Nexus-One 设备上安装和运行没有任何问题，但它在 LG 设备上崩溃并出现以下错误：

```
06-19 16:20:57.192: E/AndroidRuntime(3044): FATAL EXCEPTION: main
06-19 16:20:57.192: E/AndroidRuntime(3044): java.lang.ExceptionInInitializerError
06-19 16:20:57.192: E/AndroidRuntime(3044):     at java.lang.Class.newInstanceImpl(Native Method)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at java.lang.Class.newInstance(Class.java:1429)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.os.Looper.loop(Looper.java:123)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at java.lang.reflect.Method.invokeNative(Native Method)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at java.lang.reflect.Method.invoke(Method.java:521)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:893)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:651)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at dalvik.system.NativeStart.main(Native Method)
06-19 16:20:57.192: E/AndroidRuntime(3044): Caused by: java.lang.UnsatisfiedLinkError: Library filters-jni not found
06-19 16:20:57.192: E/AndroidRuntime(3044):     at java.lang.Runtime.loadLibrary(Runtime.java:466)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at java.lang.System.loadLibrary(System.java:557)
06-19 16:20:57.192: E/AndroidRuntime(3044):     at com.test.MainActivity.<clinit>(MainActivity.java:427)
06-19 16:20:57.192: E/AndroidRuntime(3044):     ... 15 more 
```

我的制作文件（Android.mk）看起来像：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE    := filters-jni
LOCAL_SRC_FILES := filters.c
LOCAL_CFLAGS := -DHAVE_CONFIG_H -DFPM_ARM -ffast-math -O3 -Wall
LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -ldl
# for native audio
LOCAL_LDLIBS    += -lOpenSLES
# for logging
LOCAL_LDLIBS    += -llog
# for native asset manager
LOCAL_LDLIBS    += -landroid
LOCAL_STATIC_LIBRARIES := cpufeatures
include $(BUILD_SHARED_LIBRARY)
$(call import-module,cpufeatures) 
```

我的应用程序制作文件只有一行

```
 APP_ABI := all 
```

什么给出，我无法理解。谢谢大家的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:36:06.410

OpenSLES 库仅适用于 Android 2.3。

有关可用于 Android 版本的库列表，请参阅`docs/STABLE-APIS.html`NDK 分发中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:35:14.320

把它放在你的 Application.mk 文件中，看看会发生什么：

```
APP_ABI := armeabi armeabi-v7a x86 
```

这为设备提供了三个 .so 以选择它喜欢的任何一个

# c - %*c%c 和 %c 作为 scanf 的格式说明符有什么区别？

> ID：11109750
> 
> 赞同：6
> 
> 时间：2012-06-19T21:31:00.997
> 
> 标签：c, special-characters

我通常使用 获得一个字符`%c`，但我见过使用 的代码`%*c%c`。例如：

```
char a;
scanf("%*c%c", &a); 
```

有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:58:00.957

在`scanf`格式字符串中， 之后`%`的`*`字符是*赋值抑制字符*。

在您的示例中，它吃第一个字符但不存储它。

例如，使用：

```
char a;
scanf("%c", &a); 
```

如果输入：`xyz\n`, (`\n`是换行符) 那么`x`将存储在 object 中`a`。

和：

```
scanf("%*c%c", &a); 
```

如果输入：`xyz\n`，`y`将存储在 object 中`a`。

C表示`*`以`scanf`这种方式指定：

> (C99, 7.19.6.2p10) 除非用 * 指示分配抑制，否则转换结果将放置在尚未收到转换结果的格式参数后面的第一个参数所指向的对象中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T21:33:55.253

根据[维基百科](http://en.wikipedia.org/wiki/Scanf_format_string)：

> 百分号后面的可选星号 (*) 表示此格式说明符读取的数据不存储在变量中。此删除的变量不应包含格式字符串后面的参数。

这样您就可以跳过与该星号匹配的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-07T08:44:34.670

基本上***%c***指的是字符类型说明符，***% *c***用于排除一个字符，以便从控制台读取该字符，但不会将其分配给任何变量。例如。-：

假设输入是 *2018*年 12 月 31 日 ，并且您只想以整数形式输出并且想要排除 '/' 字符，那么您可以在此处使用 %*c 作为 - scanf("%d%*c%d%* c%d" , &day,&month,&year);

所以这样你将排除两个'/'字符。

以类似的方式**%*d**用于排除一个整数， **%*f**用于排除一个 float ，**%*s**用于排除字符串的一个单词。希望它有所帮助:)

# google-apps-script - Google Apps 脚本 subscribeToCalendar() 未触发

> ID：11109751
> 
> 赞同：0
> 
> 时间：2012-06-19T21:31:01.500
> 
> 标签：google-apps-script

我正在尝试创建为用户订阅公司日历的简单脚本。它将嵌入到谷歌网站中。到目前为止，我有：

```
function doGet(e) {
  var app = UiApp.createApplication();  
  var mainPanel = app.createVerticalPanel();    
  var mainButton = app.createButton("Push Me");  
  var clickHandler = app.createServerHandler("addCalendar");

  mainButton.addClickHandler(clickHandler);  
  mainPanel.add(mainButton);  
  app.add(mainPanel);

  return app;
}

function addCalendar(e) {
  var app = UiApp.getActiveApplication();  

  var CAL_ID = (calendar's ID);
  CalendarApp.subscribeToCalendar(CAL_ID);

  var successLabel = app.createLabel("You have successfully added the Calendar.");
  app.add(successLabel);
  return app;
} 
```

addCalendar() 在显示 successLabel 时被调用，但它似乎跳过了订阅日历。在添加 GUI 之前，我能够订阅日历，所以问题一定与此有关。

谢谢你的帮助！

编辑 - 在[https://developers.google.com/apps-script/guide_user_interfaces](https://developers.google.com/apps-script/guide_user_interfaces)的谷歌文档中，有一个表格显示显示为独立 servlet 的 UI 以作者身份运行，而电子表格中显示的 UI 以用户身份运行剧本。这可能是问题的根源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:09:13.340

我认为您的编辑回答了您的问题......但如果您的客户拥有“商业”或“教育”帐户，您可以阅读[此文档](https://developers.google.com/accounts/docs/OAuth2Login?hl=fr)来帮助您找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:23:25.370

当脚本作为服务/webapp 发布时，它以开发人员的身份运行，这意味着错误的用户订阅了日历。相反，如果应用程序显示在电子表格中，那么它会以活动用户的身份运行。

# php - 在 Drupal 中访问多维数组

> ID：11109752
> 
> 赞同：1
> 
> 时间：2012-06-19T21:31:09.577
> 
> 标签：php, arrays, drupal

我认为这与 PHP 问题一样是一个 drupal 问题。

我有以下 print_r($node) 数组

```
stdClass Object
(
    [vid] => 4
...
    [field_imgleft] => Array
            (
            [und] => Array
                (
                    [0] => Array
                        (
                            [value] => defaultimgleft
                            [format] => 
                            [safe_value] => defaultimgleft
                        )
                )
        )
) 
```

field_imgleft 是节点内容类型中的一个字段。由于只有一个值，因此 [0] 是该数组的最大值。我正在尝试将 [value] 的值返回给变量，但是我对 node-> 方法或 node[...] 等没有这样的运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:00:38.003

有一个内置的 API 函数可以从实体中提取字段值：[`field_get_items()`](http://api.drupal.org/api/drupal/modules!field!field.module/function/field_get_items/7).

你可以像这样使用它：

```
$items = field_get_items('node', $node, 'field_imgleft');

$first_item = array_shift($items);

$value = $first_item['value']; 
```

建议使用此方法而不是直接访问数组，因为它会为您处理字段转换……无需再担心使用`'und'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:33:35.247

我建议使用[Devel 模块](http://drupal.org/project/devel)，这样您就可以利用 dpm() 函数作为改进的 print_r();

```
dpm( $node->field_imgleft['und'][0]['value'] ); 
```

# jquery - 使用 jquery 数据表进行分页

> ID：11109754
> 
> 赞同：0
> 
> 时间：2012-06-19T21:31:16.797
> 
> 标签：jquery, pagination

我正在使用 jquery 数据表进行分页。我的数据不是 exctaly 表，来自 db 的 1 行说 id、name、location……我在 jsp 中显示 3 行，如第一行 id、第二行名称然后第三行位置……我有 1500 行在分贝。为此，我需要进行分页。而且，当用户单击下一个链接时，它应该转到服务器以获取下一个记录。

我知道如何从服务器端获取有限数量的结果....

我需要有关 jsp 配置的帮助.....我是 jquery 的新手...如何配置数据表。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:05:59.153

正如您[在此处](http://datatables.net/release-datatables/examples/data_sources/server_side.html)看到的，您可以在初始化表时设置`"bProcessing": true`,`"bServerSide": true`和源。 然后在您的 php 中，您必须返回与以下相同的对象：`"sAjaxSource": "yourFile.php"`

```
{
  "sEcho": 1,
  "iTotalRecords": "57", // total number of rows
  "iTotalDisplayRecords": "57", // number of rows after the filter
  "aaData": [//your data]
} 
```

[您可以在服务器端处理参考](http://datatables.net/usage/server-side)中查看必须使用的参数。

# c# - 如何在excel单元格中插入图片？

> ID：11109759
> 
> 赞同：5
> 
> 时间：2012-06-19T21:31:58.307
> 
> 标签：c#, .net, excel, cell, image

我的任务是将 URL 中的图片放入 excel 工作表中的某个单元格中。我正在使用带有 C# 的 NetOffice 来执行此操作。

不过，我的主要问题是我找不到将图片准确插入单元格的方法。当我使用 Sheet.Shapes.AddPicture() 时，我必须计算放置图片的坐标。当然，我对此没有任何问题（我创建了某种解决方法），但是，我想问一下我解决此问题的方法是否正确，或者是否有其他方法可以将图像插入单元格。

这是我的解决方法：

```
var floatLeft = FloatLeftPixelsCalculation(rowNumber);
var floatTop = FloatTopPixelsCalculation(rowNumber);
Worksheet.Shapes.AddPicture(urlCellValue, MsoTriState.msoFalse, MsoTriState.msoTrue, floatLeft, floatTop, PictureWidth, PictureHeight);

public float FloatTopPixelsCalculation(int rowNumber)
        {
            float floatTop = 0;
            for (var rNumber = 1; rNumber < rowNumber; rNumber++)
            {
                var cellHeight = Convert.ToSingle(Worksheet.Cells[rNumber, ColumnIndex].RowHeight);
                floatTop = floatTop + cellHeight;
            }

            return floatTop;
        }

        public float FloatLeftPixelsCalculation(int rowNumber)
        {
            float floatLeft = 0;
            for (var columnNumber = 1; columnNumber < ColumnIndex; columnNumber++)
            {
                var cellWidth = Convert.ToSingle(Worksheet.Cells[rowNumber, columnNumber].ColumnWidth);
                floatLeft = floatLeft + cellWidth;
            }

            return floatLeft;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T20:38:58.340

尽管 Doug Glancy 正确地指出 Excel 不认为图片位于单元格“内部”，但图片可以*与*特定单元格相关联，并且如果放置正确，图片将直观地起作用。

例如，假设您有一份房屋清单。AY 列有关于房子的各种信息，Z 列有房子的图片。如果图片与正确的单元格正确关联，那么当您对范围进行排序、剪切、复制、粘贴时，图片的行为方式将符合您的预期。

为了让 Excel 正确操作房屋，它们必须满足两个标准：

1.  图片必须完全在单元格内。使用上面的代码，您将首先按原样放置图片，然后将单元格的行高和列宽调整为至少等于图片的高度和宽度。

2.  shape.Placement 属性必须设置为 xlMove 或 xlMoveAndSize。在 MS 文档中，placement 属性可以是以下之一： `xlFreeFloating (3) Object is free floating. xlMove (2) Object is moved with the cells. xlMoveAndSize (1) Object is moved and sized with the cells.`

如果图片完全在单元格内并`.Placement`设置为`xlMove`或`xlMoveAndSize`，那么每当容器单元格移动时，图片都会随之移动。如果`.Placement`设置为`xlMoveandSize`，则每当单元格宽度或高度发生更改时，图片都会扩展或收缩。这会很有帮助，因为它可以确保图片保持在单元格的边界内。如果您使用`xlMoveandSize`，您可能还需要考虑设置`ShapeRange.LockAspectRatio = msoTrue`以防止在调整列宽或行高时图片失真。

所以是的，弗吉尼亚，你*可以*在一个单元格中放置一张图片。只要确保你小心地放置它。

# c# - C#中的简单线程

> ID：11109765
> 
> 赞同：5
> 
> 时间：2012-06-19T21:32:15.187
> 
> 标签：c#, multithreading

> **可能重复：**
> [C# 循环中捕获的变量](https://stackoverflow.com/questions/271440/c-sharp-captured-variable-in-loop)

我正在研究一些简单的线程应用程序，但我似乎无法让它工作：

```
class ThreadTest
{
    static Queue<Thread> threadQueue = new Queue<Thread>();

    static void Main()
    {
        //Create and enqueue threads
        for (int x = 0; x < 2; x++)
        {
            threadQueue.Enqueue(new Thread(() => WriteNumber(x)));
        }

        while(threadQueue.Count != 0)
        {
            Thread temp = threadQueue.Dequeue();
            temp.Start();
        }

        Console.Read();
    }

    static void WriteNumber(int number)
    {
        for (int i = 0; i < 1000; i++)
        {
            Console.Write(number);
        }
    }
} 
```

目标基本上是将线程一个一个地添加到队列中，然后一个一个地通过队列并弹出一个线程并执行它。因为我的 for 循环中有“x<2”，所以它应该只创建两个线程 - 一个运行 WriteNumber(0)，一个运行 WriteNumber(1)，这意味着我应该以 1000 个 0 和1000 1 在我的屏幕上以不同的顺序显示，具体取决于线程的最终执行方式。

我最终得到的是2000 2。我想出的两个可能的解决方案是：我错过了一些非常明显的事情，或者将变量 x 发送到 WriteNumber 函数正在执行传递引用而不是传递值，所以当线程执行他们使用最新版本的 x 而不是设置函数时的版本。但是，据我了解，变量在 C# 中默认按值传递，并且只有在参数中包含“ref”时才通过引用传递。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T21:34:38.573

您正在捕获`x`lambda 表达式。`x`在启动线程之前，值会更改为 2。您需要在循环中复制*value*：

```
for (int x = 0; x < 2; x++)
{
    int copy = x;
    threadQueue.Enqueue(new Thread(() => WriteNumber(copy)));
} 
```

Lambda 表达式捕获*变量*。即使传递给的值`WriteNumber` *是*按值传递的，但在线程启动之前根本不会调用它——此时时间`x`为 2。

通过在循环中进行复制，循环的每次迭代都会获得自己单独的`copy`变量“实例”，并且*不会*改变值......所以在`WriteNumber`调用时，每个变量仍然具有`copy`相同的值`x`对于那个迭代。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T21:35:49.040

发生这种情况是因为在循环完成*后*`x`访问了 的值，到那时它是.*`2`*

 *您需要使用临时变量来防止变量捕获。

```
for (int x = 0; x < 2; x++)
{
    int tmp = x;
    threadQueue.Enqueue(new Thread(() => WriteNumber(tmp)));
} 
```*

# javascript - 将点表示法转换为 JSON

> ID：11109768
> 
> 赞同：2
> 
> 时间：2012-06-19T21:32:24.063
> 
> 标签：javascript, json

我有一堆形式的字符串：“AAA.BBB[0].CCC.DDD[5].EEE = 123”。有些包含更深的嵌套数组。如何将该点表示法转换为等效的 JSON 对象？如果它提供任何额外的优势，我正在使用 jQuery。我已经找到了几乎可以做到这一点的方法，但是当包含数组时没有解决方案有效。

编辑：我需要对许多字符串执行此操作并最终将它们组合起来。特别是这个应该成为表单的对象（假设我没有犯任何错误）： { "AAA" : { "BBB": [ "CCC : { "DDD": [ {}, {}, {}, {}, {}, { "EEE": 123 } ] } ] }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:26:30.253

您所描述的不是*可以*转换为 JSON 的东西。您所描述的是对象的层次结构，当然，但是在那里有那些大括号，您显然只看到一个更大的对象的一部分。然而，为了让解析器将该字符串转换为 javascript 对象，我们可以这样做：

```
function splitStringToObject(string){
  var sourceArray = string.split('.');
  var top = {};
  var point = top;
  while (sourceArray.length){
    var work = sourceArray.shift();
    if ( /([a-zA-Z_][a-zA-Z0-9_]*)\[([a-zA-Z0-9_]+)\]/.test(work) ){
      console.log('found match alpha index')
      //found an array identifier with a variable name inside ('bbb[aaa]')
      var matches = /([a-zA-Z_][a-zA-Z0-9_]*)\[([a-zA-Z0-9_]+)\]/.exec(work);
      var matchName = matches[1];
      var matchIndex = matches[2];
      point[matchName] = [];
      point[matchName][matchIndex] = {};
      point = point[matchName][matchIndex];
    } else if ( /([a-zA-Z_][a-zA-Z0-9_]*)\[([0-9]+)\]/.test(work) ) {
      console.log('found match numeric index')
      //found an array identifier with a numeric index inside ('bbb[0]')
      var matches = /([a-zA-Z_][a-zA-Z0-9_]*)\[([a-zA-Z0-9_]+)\]/.exec(work);
      var matchName = matches[1];
      var matchIndex = matches[2];
      point[matchName] = [];
      point[matchName][matchIndex] = {};
      point = point[matchName][matchIndex];
    } else if ( work.indexOf('[') > -1 || work.indexOf(']') > -1 ) {
      console.log('found bad egg with ' + work)
    } else if ( work.indexOf('=') > 0 ) { 
      console.log('found = inside')
      //test for equals sign in the string
      var morework = work.split('=');
      work = morework[0].trim();
      sourceArray.push('='+morework[1])
      point[work] = morework[1].trim();
      point = point[work];
    } else { 
      console.log('found plain word')
      //assume work is aok to use as another object here.
      work = work.trim();
      point[work] = {};
      point = point[work];
    }
  }
  //you may not want this next part
  var ret;
  //let's pull our value off the top, altho if we do this, I don't know
  //how to retain the name. I prefer to return it under top still
  for (var k in top){
    ret = top[k];
  }

  console.log(ret);
  return ret;

  // alternately call
  return top;
} 
```

然而，这只是一个解析器，我们如何使用它呢？好吧，我们需要给它我们的字符串。我将假设您可以将所有字符串整齐地放入一个数组中，如下所示：

```
var strings = [
  "AAA.BBB[0].CCC.DDD[1].EEE = 123",
  "AAA.BBB[0].CCC.DDD[2].EEE = 123",
  "AAA.BBB[0].CCC.DDD[4].EEE = 123",
  "AAA.BBB[0].CCC.DDD[5].EEE = 123",
]; 
```

然后下一部分变得非常简单，正如我们在这里看到的：

```
var objectsConverted = [];
for(var k in strings){
  objectsConverted[k] = splitStringToObject(strings[k]);
}

var result = {};
for(var k in objectsConverted){
  jQuery.extend(true,result,objectsConverted[k]);
}

console.log(result); 
```

最后，如果我 JSON.stringify(result) 我得到：

```
"{"BBB":[{"CCC":{"DDD":[null,{"EEE":"123"},{"EEE":"123"},null,{"EEE":"123"},{"EEE":"123"}]}}]}" 
```

## 请阅读函数末尾的警告，名称空间因返回方法的选择而丢失（我从顶部返回而不是嵌套一次）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:38:21.333

`AAA.BBB[0].CCC.DDD[5].EEE`

变成：

```
{AAA : {
  BBB : [{ 
   CCC: {
    DDD: [ 
... 
```

如果您有一个成员`X[Y]`，您只需将其转换为映射`X`到元素数组的对象。

这有帮助吗？

# css - 使用 LESS 进行 CSS 渲染会破坏基于浏览器的开发吗？

> ID：11109769
> 
> 赞同：2
> 
> 时间：2012-06-19T21:32:29.993
> 
> 标签：css, less

我刚刚下载了 Twitter Bootstrap 来看看 LESS 的实现。我的第一印象是 LESS 似乎是编写 CSS 的好东西，但它破坏了基于浏览器渲染进行快速编辑的能力。

假设我收到了一个我以前从未遇到过的实时站点，它是由其他人构建的，与他们经常记录的一样糟糕，并被要求更改某些元素的属性。该网站有 2000 行 CSS，我最不想做的就是让自己熟悉其中的大部分内容。

传统 CSS，在浏览器窗口中：检查元素：匹配的 CSS 规则：styles.css:1145。在选择的文本编辑器中打开 styles.css 到第 1145 行，进行更改、测试、完成。

LESS，在浏览器窗口中：从 CSS 文件中返回匹配的 CSS 规则，该文件由（在 Bootstrap 中）42 个不同的 LESS 文件的任意组合编译而成。编译后的 CSS 文件中没有任何迹象表明哪个组件 LESS 文件源自该属性。继续在 42 个不同的 LESS 文件中搜索进行更改的适当位置。

因此，当你有时间/熟悉一个项目来从头开始理解它时，LESS 似乎真的很棒——这样你就知道哪个变量声明了在 mixin 中调用的颜色以产生进一步给出的边框类声明中的属性——但如果你是一个不幸的开发人员，他有十分钟的时间从别人的代码中弄清楚如何（更具体地说，是在哪里）更改所有边框上的颜色，则不是那么好。

难道我都搞错了吗？是 LESS 打破了懒惰、快乐的浏览器端快速修复策略，还是有一些我还没有想出的方法来保留快速而肮脏的工作流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:35:11.560

LESS 使用 Node.js 和 Rhino 在客户端（Chrome、Safari、Firefox）和服务器端运行。( [http://lesscss.org/](http://lesscss.org/) )。所以是的，您[也可以在客户端使用它](http://lesscss.org/#-client-side-usage)。只要确保你链接你的less样式表`rel="stylesheet/less`并记住添加`less.js`到你的HTML中以从less源生成CSS。

一个缺点是像 Firebug 这样的开发人员工具没有对 less 的原生支持。这与 CoffeeScript 的问题相同，目前浏览器中的调试工具非常差。我很确定[调试器会发展以支持其他 JS 语言](http://www.infoq.com/news/2011/08/debug-languages-on-javascript-vm)，我不会惊讶地看到类似的样式表语言发生了类似的事情。但是，当这些工具成为主流时，我不会屏住呼吸。

我同意你的想法，虽然 LESS 可能是核心 CSS 开发的好主意，但它也给你的开发堆栈增加了一层复杂性。这样做可能并非在所有情况下都是合理的。

# spring - Google App Engine JDO 事务问题（Spring MVC）

> ID：11109775
> 
> 赞同：0
> 
> 时间：2012-06-19T21:33:01.580
> 
> 标签：spring, google-app-engine, jdo

给定以下 Spring 持久性配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

<tx:annotation-driven/>

<bean id="transactionManager" class="org.springframework.orm.jdo.JdoTransactionManager"
    p:persistenceManagerFactory-ref="localPersistenceManagerFactoryBean" />

<bean id="transactionAwarePersistenceManagerFactoryProxy"
    class="org.springframework.orm.jdo.TransactionAwarePersistenceManagerFactoryProxy"
    p:targetPersistenceManagerFactory-ref="localPersistenceManagerFactoryBean"
    p:allowCreate="false" />

<bean id="localPersistenceManagerFactoryBean"
    class="org.springframework.orm.jdo.LocalPersistenceManagerFactoryBean">
    <property name="jdoPropertyMap">
        <props>
            <prop key="javax.jdo.PersistenceManagerFactoryClass">
                org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory
            </prop>
            <prop key="javax.jdo.option.ConnectionURL">appengine</prop>
            <prop key="javax.jdo.option.NontransactionalRead">true</prop>
            <prop key="javax.jdo.option.NontransactionalWrite">false</prop>
            <prop key="javax.jdo.option.RetainValues">false</prop>
            <prop key="javax.jdo.option.DetachAllOnCommit">true</prop>
            <prop key="javax.jdo.option.Multithreaded">true</prop>
            <prop key="datanucleus.appengine.ignorableMetaDataBehavior">NONE</prop>
            <prop key="datanucleus.appengine.autoCreateDatastoreTxns">true</prop>
        </props>
    </property>
</bean> 
```

我有一个简单的服务，例如：

```
@Service
@Transactional
public class EntityServiceImpl implements EntityService {

@Autowired
private EntityRepository entityRepository;

@Override
public void create(Entity entity) {
    entityRepository.create(entity);
}   
} 
```

以下是底层存储库：

```
@Repository
public class EntityAppEngineRepositoryImpl extends BaseAppEngineTxManager
    implements EntityRepository {

@Override
public void create(Entity entity) {
    final PersistenceManager pm = getPersistenceManager();
    pm.makePersistent(entity);
}
} 
```

当我调用我的服务方法来创建一个实体时，我得到以下异常：

```
org.datanucleus.jdo.exceptions.TransactionNotWritableException: Impossible to perform operation since it either requires an active transaction or 'NontransactionalRead' enabled. You have neither of these.
at org.datanucleus.jdo.JDOPersistenceManager.assertWritable(JDOPersistenceManager.java:2149)
at org.datanucleus.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:687)
at org.springframework.samples.mvc.basic.services.impl.EntityAppEngineRepositoryImpl.create(EntityAppEngineRepositoryImpl.java:25)
at org.springframework.samples.mvc.basic.services.impl.EntityServiceImpl.create(EntityServiceImpl.java:25)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy19.create(Unknown Source)
at org.springframework.samples.mvc.basic.boot.Bootstrap.createEntity(Bootstrap.java:31)
at org.springframework.samples.mvc.basic.boot.Bootstrap.onApplicationEvent(Bootstrap.java:20)
at org.springframework.samples.mvc.basic.boot.Bootstrap.onApplicationEvent(Bootstrap.java:1)
at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:324)
at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:929)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:467)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:189)
at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:128)
at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:104)
enter code here 
```

知道为什么我的交易不活跃吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:31:52.873

谁说交易不活跃？您将 NontransactionalWrite 设置为 false，然后尝试在没有事务的情况下进行写入。因此你得到一个例外。量子点

您还使用了一个古老版本的 GAE JDO 和 DataNucleus。不支持 DataNucleus 版本。升级到最新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T06:05:10.653

您可能必须告诉 spring 根据方法名称为您创建事务。我确定@Transactional 应该可以工作，但请使用@Transaction 配置检查以下内容：

```
 <aop:config>
    <!-- http://blog.espenberntsen.net/tag/pointcut/ -->
    <!-- For all the classes annotated with @Service -->
    <aop:pointcut id="serviceMethodsCut" expression="within(@org.springframework.stereotype.Service *)" /> 
    <aop:advisor advice-ref="txAdvice" pointcut-ref="serviceMethodsCut" />
</aop:config>

<aop:config>
    <!-- For all the methods annotated with @Transactional -->
    <aop:pointcut id="transactionalCut" expression="execution(@org.springframework.transaction.annotation.Transactional * *(..))" />
    <aop:advisor advice-ref="txAdvice" pointcut-ref="transactionalCut" />
</aop:config>

<tx:advice id="txAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="update*" propagation="REQUIRES_NEW" rollback-for="java.lang.Exception"/>
        <tx:method name="insert*" propagation="REQUIRES_NEW" rollback-for="java.lang.Exception"/>
        <tx:method name="create*" propagation="REQUIRES_NEW" rollback-for="java.lang.Exception"/>
        <tx:method name="delete*" propagation="REQUIRES_NEW" rollback-for="java.lang.Exception"/>
        <tx:method name="save*" propagation="REQUIRES_NEW" rollback-for="java.lang.Exception"/>
        <tx:method name="store*" propagation="REQUIRES_NEW" rollback-for="java.lang.Exception"/>
        <tx:method name="get*" propagation="REQUIRED" read-only="true" />
        <tx:method name="*" propagation="SUPPORTS" read-only="true" />
    </tx:attributes>
</tx:advice>

<bean id="transactionAwarePersistenceManagerFactoryProxy"
    class="org.springframework.orm.jdo.TransactionAwarePersistenceManagerFactoryProxy" 
    p:targetPersistenceManagerFactory-ref="pmf"
    p:allowCreate="true" /> 
```

# python - 在python中进行多处理时更改全局变量

> ID：11109776
> 
> 赞同：6
> 
> 时间：2012-06-19T21:33:05.497
> 
> 标签：python, python-2.7, multiprocessing

所以我最终要做的是读取一行，用该行中的信息进行一些计算，然后将结果添加到某个全局对象，但我似乎永远无法让它工作。例如，下面代码中的 test 始终为 0。我知道这是错误的，并且我尝试过其他方式，但仍然无法正常工作。

```
import multiprocessing as mp

File = 'HGDP_FinalReport_Forward.txt'
#short_file = open(File)
test = 0

def pro(temp_line):
    global test
    temp_line = temp_line.strip().split()
    test = test + 1
    return len(temp_line)

if __name__ == "__main__":
    with open("HGDP_FinalReport_Forward.txt") as lines:
        pool = mp.Pool(processes = 10)
        t = pool.map(pro,lines.readlines()) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T21:35:28.810

由池生成的工作进程获取自己的全局变量副本并更新它。除非您明确设置，否则它们不会共享内存。最简单的解决方案是将最终值`test`传回主进程，例如通过返回值。像（**未经测试**）：

```
def pro(temp_line):
    test = 0
    temp_line = temp_line.strip().split()
    test = test + 1
    return test, len(temp_line)

if __name__ == "__main__":
    with open("somefile.txt") as lines:
        pool = mp.Pool(processes = 10)
        tests_and_t = pool.map(pro,lines.readlines())
        tests, t = zip(*test_and_t)
        test = sum(tests) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T05:39:26.170

这是在多处理中使用全局变量的示例。

我们可以清楚地看到每个进程都使用自己的变量副本：

```
import multiprocessing
import time
import os
import sys
import random
def worker(a):
    oldValue = get()
    set(random.randint(0, 100))
    sys.stderr.write(' '.join([str(os.getpid()), str(a), 'old:', str(oldValue), 'new:', str(get()), '\n']))

def get():
    global globalVariable
    return globalVariable

globalVariable = -1
def set(v):
    global globalVariable
    globalVariable = v

print get()
set(-2)
print get()

processPool = multiprocessing.Pool(5)
results = processPool.map(worker, range(15)) 
```

**输出：**

```
27094 0 old: -2 new: 2 
27094 1 old: 2 new: 95 
27094 2 old: 95 new: 20 
27094 3 old: 20 new: 54 
27098 4 old: -2 new: 80 
27098 6 old: 80 new: 62 
27095 5 old: -2 new: 100 
27094 7 old: 54 new: 23 
27098 8 old: 62 new: 67 
27098 10 old: 67 new: 22 
27098 11 old: 22 new: 85 
27095 9 old: 100 new: 32 
27094 12 old: 23 new: 65 
27098 13 old: 85 new: 60 
27095 14 old: 32 new: 71 
```

# java - 这个 Java 构造是什么意思 - OneClass object = (OneClass) anotherObject;

> ID：11109782
> 
> 赞同：0
> 
> 时间：2012-06-19T21:33:32.177
> 
> 标签：java

抱歉这个可怕的问题，不知道如何描述它，

我自然是 PHPer，我目前正在查看一些 java 并遇到此部分。第一行仅用于上下文，它是以我感兴趣的 QuotaKey 开头的行。

```
Key key = Keys.getKeyInstance( Keys.getKeyClass( cond.getKey( ) ) );  
QuotaKey quotaKey = ( QuotaKey ) key; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:35:06.877

这是一个演员表，把 a`Key`变成了`QuotaKey`。

[JLS 15.16，演员表](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.16)

[http://www.javabeginner.com/learn-java/java-object-typecasting](http://www.javabeginner.com/learn-java/java-object-typecasting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:38:16.967

假设它`QuotaKey`是 的子类`Key`，您正在查看将类型的变量转换为类型`Key`的变量的强制转换运算符`QuotaKey`。您可以在没有临时变量的情况下更简洁地编写相同的片段：

```
QuotaKey quotaKey = (QuotaKey)Keys.getKeyInstance(Keys.getKeyClass(cond.getKey())); 
```

此操作在`key`将其类型强制为子类之前检查其类型是否正确，并导致`ClassCastException`失败。尽量减少程序中此类转换的数量是一个好主意，因为在编译时无法可靠地检查它们的有效性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:36:07.953

这是一个演员表。它将密钥类型强制转换为 QuotaKey。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:36:09.890

您正在查看的内容称为类型转换（在这种特殊情况下为向下转换），它只是使用类型的变量和类型`QuotaKey`的引用`Key`，我假设它是`QuotaKey`.

# url - 从 CakePHP 2.1.2 Console Shell 创建完整的 url

> ID：11109785
> 
> 赞同：5
> 
> 时间：2012-06-19T21:33:37.183
> 
> 标签：url, cakephp, console

我正在尝试通过控制台外壳（最终通过 cron 作业）从 CakePHP 2.1.2 发送一封电子邮件。我发送的视图是一个带有返回应用程序网页链接的日历。我发现的问题是 url 不包含正确的路径，从我读到的内容来看，这是因为我使用控制台后没有请求对象。例如，如果我在浏览器中创建视图，我会得到如下链接：

```
http://localhost/ReportMonitor/scheduledReports/index/show_date:2012-06-10/result:GOOD 
```

但在使用相同代码的电子邮件中，我得到了这个：

```
http://localhost/scheduledReports/index/show_date:2012-06-10/result:GOOD 
```

这是接近，但没有雪茄。

我一直在尝试找到可以在某处设置的全局变量，以便对应用程序子目录进行硬编码，但还没有找到任何可行的方法。链接是由这样的代码创建的：

```
$newUrl = array();
$newUrl['controller'] = 'scheduledReports';
$newUrl['action'] = 'index';
$newUrl['url'] = array();

foreach ($data as $key => $value) {
  $newUrl['show_date'] = "$year-$month-$key";
  $newUrl['result'] = 'GOOD';
  $data[$key]['num_complete'] = $this->Html->link(__('Complete: ') . $value['num_complete'], Router::reverse($newUrl, true), array('class' => 'green')); 
```

我认为这是一个常见的功能（在控制台生成的电子邮件中发送有效的 url），但我就是想不通。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:36:16.847

使用`full_base`链接中的选项

```
echo $this->Html->link(array(
    'controller' => 'posts', 'action' => 'index', 'full_base' => true
)); 
```

并将`FULL_BASE_URL`常量设置`bootstrap.php`为您的基本网址：

```
define('FULL_BASE_URL', 'http://www.domain.com/subdir'); 
```

如果您在应用程序中使用路由，则需要在 shell 中包含路由：

```
App::uses('Router', 'Routing');
config('routes'); 
```

# android - 为什么 Activity 会在方向改变后保留额外内容

> ID：11109789
> 
> 赞同：1
> 
> 时间：2012-06-19T21:33:56.273
> 
> 标签：android

让我们想象一下被`ActivityB`调用的 from`ActivityA`里面有额外的东西。开始时`ActivityB`，我们签入`onCreate()`方法来`bundle`保存我们放入的这些额外内容`ActivityA`。我注意到`ActivityB`在方向更改后仍然保留额外内容，即`ActivityB`刚刚重新创建之后，但没有调用`ActivityA`将额外内容放入`Intent`. 意味着演员总是“活着”？如果我理解正确，Activity 在哪里/如何保存它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:42:07.957

我相信您会发现，如果在您的 Activity 上调用 onDestroy()，那么意图将被“重置”并且不会有任何额外内容，这是您期望在轮换更改时发生的情况。

要真正从 Intent 中删除额外内容，您需要在 Intent 上调用[removeExtra(String extra)](http://developer.android.com/reference/android/content/Intent.html#removeExtra%28java.lang.String%29)。

如果你不调用removeExtra，那么是的，额外的将留在Intent中，直到Activity被销毁。

# javascript - 更改所有“div”元素的 ID (Javascript)

> ID：11109791
> 
> 赞同：1
> 
> 时间：2012-06-19T21:34:02.020
> 
> 标签：javascript, jquery

正如标题所说，我正在尝试使用标签“div”更改所有元素的 ID。这是我当前的脚本，它不起作用：

```
function setIDs() {
    var divs[] = new Array();
    for(i in document.getElementsByTagName('div'))
        divs[i] = document.getElementsByTagName('div')[i];
    for(idNum in divs) divs[idNum].id="child"+idNum;
} 
```

所以在 setIDs() 完成后，我的 HTML 应该是这样的：

```
<div id="child0">...</div>
<div id="child1">...</div>
...
<div id="childn">...</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:37:12.347

不要使用[`for...in`](https://stackoverflow.com/a/500531/417685)和重用`document.getElementsByTagName`结果。

```
function setIDs() {
  var divs = document.getElementsByTagName('div');
  for(var i=0; i<divs.length; i++) {
    divs[i].id = "child" + i;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:36:42.617

无效的 JavaScript。

```
 var divs[] = new Array(); 
```

此外，不要`for-in`用于 Array 或类似 Array 的迭代。它经常会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:39:29.647

可以使用 jQuery 吗？如果是这样，你应该尝试这样的事情：

```
var x = 0;
$("div").each(function(){
    $(this).attr("id", "child"+x);
    x++;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T21:40:23.933

```
function setIDs() {
    var divs[] = new Array();
    // no need for an extra array. Invalid identifier, btw.

    for(i in document.getElementsByTagName('div'))
    // never run through Arrays with for-in-loops. It's the same for NodeLists.

        divs[i] = document.getElementsByTagName('div')[i];
        // you might have cached the NodeList to a variable

    for(idNum in divs) divs[idNum].id="child"+idNum;
    // again, don't use a for-in-loop. And why at all do you need a second loop?
} 
```

更正：

```
function setIDs() {
    var divs = document.getElementsByTagName('div');
    for (var i=0; i<divs.length; i++) {
        divs[i].id = "child"+i;
    }
} 
```

# jquery - 如何使用 $.ajax（jQuery 或 Zepto）发布对象数组

> ID：11109795
> 
> 赞同：49
> 
> 时间：2012-06-19T21:34:32.397
> 
> 标签：jquery, ajax, rest, zepto

我想在 Zepto 或 Jquery 中使用 $.ajax 发布一组对象。两者都表现出相同的奇怪错误，但我找不到我做错了什么。

当使用像“RestEasy”这样的测试客户端发送数据时，数据会保存到服务器，我可以看到请求在浏览器的网络面板中被破坏，所以我相信 JS 是罪魁祸首。

如果我将对象数组作为 POST 的数据属性发送，则它们不会被正确发送。

数据对象：

```
var postData = [
    { "id":"1", "name":"bob"}
  , { "id":"2", "name":"jonas"}
  ] 
```

要求：

```
$.ajax({
  url: _saveDeviceUrl
, type: 'POST'
, contentType: 'application/json'
, dataType: 'json'
, data: postData
, success: _madeSave.bind(this)
//, processData: false //Doesn't help
}); 
```

在浏览器中看到的请求正文：

```
"bob=undefined&jonas=undefined" 
```

这可以通过使用 jQuery 和 Zepto 用于准备 POST 数据的 $.param 方法更直接地看到。

```
$.param(
  [
    { "id":"1", "name":"bob"}
  , { "id":"2", "name":"jonas"}
  ]
)
// Output: "bob=undefined&jonas=undefined" 
```

因此，这些库为复杂的帖子数据所做的准备似乎与我预期的不同。

我看到了这个答案，但我不想将数据作为查询参数发送，因为我要发布大量内容。 [如何使用 jQuery 在 .ajax 帖子中发送数组？](https://stackoverflow.com/questions/2403266/how-do-i-send-an-array-in-an-ajax-post-using-jquery)

使用 jQuery/Zepto 通过 POST 发送多个对象的正确方法是什么？

使用 $.ajax({... data: JSON.stringify(postData) ...}) 发送未损坏的内容，但服务器不喜欢这种格式。

**更新：** 似乎 JSON.stringify 发送格式正确的内容。问题是服务器端对它想要的对象的结构非常非常具体。如果我从对象中添加或删除任何属性，它将使整个过程失败，而不是使用匹配的属性。这很不方便，因为使用服务器发送的内容作为视图模型很好，但是视图模型会改变。...仍在研究最佳解决方案。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-25T15:09:17.910

请务必`stringify`在发送之前。我过于依赖库，并认为它们会根据我发布的 contentType 正确编码，但他们似乎没有。

作品：

```
$.ajax({
    url: _saveAllDevicesUrl
,   type: 'POST'
,   contentType: 'application/json'
,   data: JSON.stringify(postData) //stringify is important
,   success: _madeSave.bind(this)
}); 
```

我更喜欢这种方法而不是使用像 $.toJSON 这样的插件，尽管它确实完成了同样的事情。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-19T21:54:00.173

尝试以下操作：

```
$.ajax({
  url: _saveDeviceUrl
, type: 'POST'
, contentType: 'application/json'
, dataType: 'json'
, data: {'myArray': postData}
, success: _madeSave.bind(this)
//, processData: false //Doesn't help
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T21:46:21.690

**编辑：**我想现在使用本机[JSON.stringify()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)方法开始安全了，[大多数浏览器](http://caniuse.com/#feat=json)都支持（是的，如果你想知道的话，甚至是 IE8+）。

很简单：

```
JSON.stringify(yourData) 
```

* * *

在发送数据之前，您应该在 JSON 中对数据进行编码，您不能只将这样的对象作为 POST 数据发送。

我建议使用[jQuery json 插件](http://code.google.com/p/jquery-json/)来执行此操作。然后你可以在 jQuery 中使用这样的东西：

```
$.post(_saveDeviceUrl, {
    data : $.toJSON(postData)
}, function(response){
    //Process your response here
}
); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-11T11:33:26.350

检查这个发布不同类型数组的示例

```
function PostArray() {
    var myObj = [
        { 'fstName': 'name 1', 'lastName': 'last name 1', 'age': 32 }
      , { 'fstName': 'name 2', 'lastName': 'last name 1', 'age': 33 }
    ];

    var postData = JSON.stringify({ lst: myObj });
    console.log(postData);

    $.ajax({
        type: "POST",
        url: urlWebMethods + "/getNames",
        data: postData,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            alert(response.d);
        },
        failure: function (msg) {
            alert(msg.d);
        }
    });
} 
```

如果在 C# 中使用 WebMethod，您可以像这样检索数据

```
[WebMethod]
    public static string getNames(IEnumerable<object> lst)
    {
        string names = "";
        try
        {
            foreach (object item in lst)
            {
                Type myType = item.GetType();
                IList<PropertyInfo> props = new List<PropertyInfo>(myType.GetProperties());

                foreach (PropertyInfo prop in props)
                {
                    if(prop.Name == "Values")
                    {
                        Dictionary<string, object> dic = item as Dictionary<string, object>;
                        names += dic["fstName"];
                    }
                }
            }
        }
        catch (Exception ex)
        {
             names = "-1";
        }
        return names;
    } 
```

[将带有 $.ajax 的对象数组 POST 到 C# WebMethod 中的](https://utilitiesforprogrammers.blogspot.com/2019/01/post-array-of-objects-with-ajax-to-c.html)示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-23T07:32:52.313

当我在 django 中接收由 ajax 发送的对象数组时，我遇到了同样的问题。JSONStringyfy 为我工作。你可以看看这个。

首先，我将数据字符串化为

```
var myData = [];
   allData.forEach((x, index) => {
         // console.log(index);
         myData.push(JSON.stringify({
         "product_id" : x.product_id,
         "product" : x.product,
         "url" : x.url,
         "image_url" : x.image_url,
         "price" : x.price,
         "source": x.source
      }))
   }) 
```

然后我像这样发送它

```
$.ajax({
        url: '{% url "url_name" %}',
        method: "POST",
        data: {
           'csrfmiddlewaretoken': '{{ csrf_token }}',
           'queryset[]': myData
        },
        success: (res) => {
        // success post work here.
    }
}) 
```

并收到：

```
list_of_json = request.POST.getlist("queryset[]", [])
list_of_json = [ json.loads(item) for item in list_of_json ] 
```

# c++ - 从重载的下标运算符调用虚函数

> ID：11109811
> 
> 赞同：0
> 
> 时间：2012-06-19T21:35:21.973
> 
> 标签：c++

我试图在抽象类上重载下标运算符（[]），重载调用的函数在具体对象中实现。

```
class CollectionBase {
public:
    double& operator[] (const int nIndex)
    {
        return getValue(nIndex);
    }

    virtual double getValue(int index) = 0;
};

class Collection    : public CollectionBase
{
    double getValue(int index) { return 0; }
}; 
```

我遇到的问题是我的编译器在重载中调用 getValue 时抛出错误。

> 非常量引用的初始值必须是左值

有人知道我要做什么的语法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:37:46.833

问题是您正在返回对从返回的临时值的引用`getValue`。要么让两个函数都返回`double&`，要么都返回`double`。

# r - 根据每日最大值对数据框进行子集

> ID：11109828
> 
> 赞同：1
> 
> 时间：2012-06-19T21:36:25.720
> 
> 标签：r, dataframe

我有一个带有日期/时间列和与该日期/时间关联的值的 excel csv。我正在尝试编写一个将通过这种格式的脚本（见下文），并找到 1）每天的最大值，以及 2）当天发生最大值的时间。最好 R 会在一个新的数据框中将这两个值都返回给我。

数据看起来像这样：

```
 V1    V2 V3
1  5/1/2012  3:00  1
2  5/1/2012  6:00  2
3  5/1/2012  9:00  5
4  5/1/2012 12:00  3
5  5/1/2012 15:00  6
6  5/1/2012 18:00  2
7  5/1/2012 21:00  1
8  5/2/2012  0:00  2
9  5/2/2012  3:00  3
10 5/2/2012  6:00  6
11 5/2/2012  9:00  4
12 5/2/2012 12:00  6
13 5/2/2012 15:00  7
14 5/2/2012 18:00  9
15 5/2/2012 21:00  1 
```

所以我设想的功能将返回：

```
1 5/1/2012 15:00 6
2 5/2/2012 18:00 9 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:53:32.657

使用 plyr 包的解决方案，我发现它非常适合此类问题。

```
dat.str <- '         V1    V2 V3
1  5/1/2012  3:00  1
2  5/1/2012  6:00  2
3  5/1/2012  9:00  5
4  5/1/2012 12:00  3
5  5/1/2012 15:00  6
6  5/1/2012 18:00  2
7  5/1/2012 21:00  1
8  5/2/2012  0:00  2
9  5/2/2012  3:00  3
10 5/2/2012  6:00  6
11 5/2/2012  9:00  4
12 5/2/2012 12:00  6
13 5/2/2012 15:00  7
14 5/2/2012 18:00  9
15 5/2/2012 21:00  1'

dat <- read.table(textConnection(dat.str), row.names=1, header=TRUE)

library(plyr)
ddply(dat, .(V1), function(x){
   x[which.max(x$V3), ]
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:27:10.563

如果您正在处理时间序列数据，我建议您使用时间序列类，例如`zoo`或`xts`

```
dat <- read.table(text="         V1    V2 V3
1  5/1/2012  3:00  1
2  5/1/2012  6:00  2
3  5/1/2012  9:00  5
4  5/1/2012 12:00  3
5  5/1/2012 15:00  6
6  5/1/2012 18:00  2
7  5/1/2012 21:00  1
8  5/2/2012  0:00  2
9  5/2/2012  3:00  3
10 5/2/2012  6:00  6
11 5/2/2012  9:00  4
12 5/2/2012 12:00  6
13 5/2/2012 15:00  7
14 5/2/2012 18:00  9
15 5/2/2012 21:00  1", row.names=1, header=TRUE)

require("xts")
# create an xts object
xobj <- xts(dat[, 3], order.by=as.POSIXct(paste(dat[, 1], dat[, 2]), format="%m/%d/%Y %H:%M")) 
```

如果您只是想获得每日最大值，并且可以使用一天中的最后一个时间作为索引，则可以使用`apply.daily`

```
apply.daily(xobj, max)
#                    [,1]
#2012-05-01 21:00:00    6
#2012-05-02 21:00:00    9 
```

为了保持它发生的时间戳，你可以这样做

```
do.call(rbind, lapply(split(xobj, "days"), function(x) x[which.max(x), ]))
#                    [,1]
2012-05-01 15:00:00    6
2012-05-02 18:00:00    9 
```

`split(xobj, "days")`在每个元素中创建一个包含一天数据的列表。

`lapply`对每一天应用一个函数；在这种情况下，该函数仅返回`max`每天的观察结果。该`lapply`调用将返回一个`list`xts 对象。要将其转回单个 xts 对象，请使用`do.call`.

`do.call(rbind, X)`使用列表的每个元素构造对 rbind 的调用。它相当于`rbind(X[[1]], X[[2]], ..., X[[n]])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T05:36:29.800

对于另一种选择，您可以使用`data.table`：

```
dat_table <- data.table(dat)

dat_table [ , list(is_max = V3==max(V3), V2, V3), by= 'V1'][which(is_max),][,is_max :=NULL] 
```

**根据@MattDowle**的评论进行编辑

```
dat_table[, .SD[which.max(V3)], by=V1] 
```

对于更简单的`data.table`解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:49:26.097

干得好：

```
dat.str <- '         V1    V2 V3
1  5/1/2012  3:00  1
2  5/1/2012  6:00  2
3  5/1/2012  9:00  5
4  5/1/2012 12:00  3
5  5/1/2012 15:00  6
6  5/1/2012 18:00  2
7  5/1/2012 21:00  1
8  5/2/2012  0:00  2
9  5/2/2012  3:00  3
10 5/2/2012  6:00  6
11 5/2/2012  9:00  4
12 5/2/2012 12:00  6
13 5/2/2012 15:00  7
14 5/2/2012 18:00  9
15 5/2/2012 21:00  1'

dat <- read.table(textConnection(dat.str), row.names=1, header=TRUE)

do.call(rbind, 
        by(dat, INDICES=dat$V1, FUN=function(x) tail(x[order(x$V3), ], 1))) 
```

# mono - 任何人都可以向我展示一个骨架单声道代码库只是为了让我开始吗？

> ID：11109829
> 
> 赞同：0
> 
> 时间：2012-06-19T21:36:26.467
> 
> 标签：mono

也许这是一个糟糕的问题，但是，我找不到教程，甚至找不到单声道的裸代码库。我真的很想快速开始使用它。

- 编辑 -

毕竟这不是一个糟糕的问题。通过询问，“骨架单声道代码库”一词现在实际上有所帮助，而在此之前，显然，我不得不询问。我非常喜欢 StackEx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:42:01.727

尝试查看这些，[MonkeyGuide](http://www.mono-project.com/Monkeyguide)，[Mono Wiki](http://mono.wikia.com/wiki/Category%3aTutorials)并使用[MonoDevelop](http://monodevelop.com/Documentation/Creating_A_Simple_Solution)

# c++ - 依赖机器架构意味着什么？

> ID：11109830
> 
> 赞同：0
> 
> 时间：2012-06-19T21:36:37.640
> 
> 标签：c++, x86-64

我是 C++ 新手。最近我的公司开始讨论为不同的机器架构编译代码，例如 X86_64 AMD Vs Intel

现在我查看了我们为编译我们的应用程序传递的 gcc 标志，并没有告诉 gcc 专门针对 x86_64 上的 AMD 和 Intel 进行编译。

有人可以用技术术语解释编译代码和机器架构之间的依赖关系吗？

我可以在 AMD 上使用 gcc-86_64 编译代码并在 intel x86_64 上运行二进制代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:54:28.107

在 x86 32 位处理器之后，英特尔想转向 64 位，并与惠普合作开发 64 位安腾处理器。不幸的是，这并不是很流行，因为指令集和架构与 x86 有很大不同。

AMD 介入并将已知的 x86 架构扩展到 64 位，首先将其称为 EM64T，然后称为 AMD64。就像 AMD 不得不跟随 Intel 推出 32 位处理器一样，Intel 现在不得不跟随 AMD 推出 64 位处理器，因为事实证明 AMD 的 64 位架构比 Itanium 64 位处理器更受欢迎。

当然，Intel 不喜欢叫 AMD64，所以才叫它 x64，但本质上 AMD64 和 Intel 的 x64 是兼容的（除了一些细微的差别，见[http://en.wikipedia.org/wiki/X86 -64#Differences_between_AMD64_and_Intel_64](http://en.wikipedia.org/wiki/X86-64#Differences_between_AMD64_and_Intel_64)）。如果您为 x64 或 AMD64 编译，生成的代码将避免这些差异，因此实际上您可以在两者上运行。

在任何情况下，尽量避免为 Itanium（也称为 IA-64）生成，因为这是一种完全不同的处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:46:54.437

您可以使用 gcc -march 标志为特定架构/处理器进行编译。不过请注意，您真的不应该尝试在您的机器上运行针对不同 CPU/架构编译的二进制文件。它可能会起作用，但大多数时候它会由于二进制文件的优化方式而随机失败。

您可以使用较不激进的 -mtune 标志，它将针对特定目标 CPU 优化它，但它仍将保留在任何 CPU 上运行的能力。

请参阅这些链接： [“Pentium4 及以上”处理器的 gcc 的最佳 March & mtune 选项是什么](https://stackoverflow.com/questions/6779375/whats-optimal-march-mtune-options-for-gcc-for-pentium4-and-above-processors) [http://en.gentoo-wiki.com/wiki/Safe_Cflags](http://en.gentoo-wiki.com/wiki/Safe_Cflags)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:47:57.890

您可以对 x86-64 和 AMD64 进行不同的优化，但其中没有任何 (AFAIK) 指令缺失 - 尽管英特尔的 Itanium 64 位架构不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:50:57.360

特别是像 SSE4A 这样的指令不会在英特尔处理器上运行。这是可能出错的地方之一。

# arrays - 如何查找数组是否包含字符串

> ID：11109832
> 
> 赞同：59
> 
> 时间：2012-06-19T21:36:43.117
> 
> 标签：arrays, vba, substring

> **可能重复：**
> [如何在 MS Access VBA 数组中搜索字符串](https://stackoverflow.com/questions/10951687/how-to-search-for-string-in-ms-access-vba-array)

我目前正在处理 Excel 宏，但找不到类似的方法 `if array.contains(mystring)`

我写了以下内容，它给了我“Invaild Qualifier”的消息，并在后面突出`Mainfram`显示`If`

```
Dim Mainfram(4) As String

Mainfram(0) = "apple"

Mainfram(1) = "pear"

Mainfram(2) = "orange"

Mainfram(3) = "fruit"

    For Each cel In Selection
        If Mainfram.Contains(cel.Text) Then
            Row(cel.Row).Style = "Accent1"
        End If
    Next cel 
```

选择是一列

有人帮忙吗？

嗨，JP 我试过你的建议，它说需要对象。并突出显示 ***If IsInArray(cell.Text, Mainfram) Then*** Heres 我的完整代码

```
Sub changeRowColor()

Columns("B:B").Select

Dim cel As Excel.Range
Dim Mainfram(4) As String

Mainfram(0) = "apple"
Mainfram(1) = "pear"
Mainfram(2) = "orange"
Mainfram(3) = "Banana"

For Each cel In Selection
    If IsInArray(cell.Value, Mainfram) Then
        Rows(cel.Row).Style = "Accent1"
    End If
Next cel

End Sub

Function IsInArray(stringToBeFound As String, arr As Variant) As Boolean

    IsInArray = (UBound(Filter(arr, stringToBeFound)) > -1)

End Function 
```

没关系，我发现了那个愚蠢的错误......无论如何，谢谢你

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-06-20T03:08:22.383

使用我对一个非常相似的问题的[回答中的代码：](https://stackoverflow.com/a/10952705/190829)

```
Sub DoSomething()
Dim Mainfram(4) As String
Dim cell As Excel.Range

Mainfram(0) = "apple"
Mainfram(1) = "pear"
Mainfram(2) = "orange"
Mainfram(3) = "fruit"

For Each cell In Selection
  If IsInArray(cell.Value, MainFram) Then
    Row(cell.Row).Style = "Accent1"
  End If
Next cell

End Sub

Function IsInArray(stringToBeFound As String, arr As Variant) As Boolean
  IsInArray = (UBound(Filter(arr, stringToBeFound)) > -1)
End Function 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-20T03:57:31.913

`JOIN`另一种使用和的简单方法`INSTR`

```
Sub Sample()
    Dim Mainfram(4) As String, strg As String
    Dim cel As Range
    Dim Delim As String

    Delim = "#"

    Mainfram(0) = "apple"
    Mainfram(1) = "pear"
    Mainfram(2) = "orange"
    Mainfram(3) = "fruit"

    strg = Join(Mainfram, Delim)
    strg = Delim & strg

    For Each cel In Selection
        If InStr(1, strg, Delim & cel.Value & Delim, vbTextCompare) Then _
        Rows(cel.Row).Style = "Accent1"
    Next cel
End Sub 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T21:46:42.797

使用此处所示的 Filter() 方法 - [https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/filter-function](https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/filter-function)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T21:45:57.497

恐怕我认为没有捷径可以做到这一点 - 如果有人会为 VB6 编写一个 linq 包装器！

您可以编写一个函数，通过遍历数组并检查每个条目来完成它 - 我认为您不会比这更干净。

有一篇示例文章在这里提供了一些详细信息：[http ://www.vb6.us/tutorials/searching-arrays-visual-basic-6](http://www.vb6.us/tutorials/searching-arrays-visual-basic-6)

# cakephp-2.1 - cakephp 关系属于

> ID：11109833
> 
> 赞同：0
> 
> 时间：2012-06-19T21:36:45.327
> 
> 标签：cakephp-2.1

我正在使用 cakephp 2.1.3 并且我有一个表成分和表成分别名当我选择成分别名时我希望在我的页面索引中的成分中我想查看成分别名和一些成分文件但我不知道是否我必须对我的控制器进行两次查询，或者只设置成分 ID 和 cakephp 自动检索我的数据。现在我在我的控制器中做了两个查询，但我不知道这是否是最好的方法

```
$this->set('ingredient', $this->Ingredient->read());            $this->set('ingredient_alias',$this->Ingredient->IngredientAlias->read()); 
```

这是我的桌子：

```
class Ingredient extends AppModel {
    public $name = 'Ingredient';
    public $useTable = 'ingredients';
    public $belongsTo = 'User';

    public $hasMany = array (
        'IngredientAlias' => array (
            'className'     => 'IngredientAlias',
            'foreignKey'    => 'ingredient_id'
        )
    );
}

class IngredientAlias extends AppModel {
    public $name = 'IngredientAlias';
    public $useTable = 'ingredient_aliases';
    public $belongsTo = array(
        'Ingredient' => array(
            'className'    => 'Ingredient',
            'foreignKey'   => 'ingredient_id'
        )
    );
} 
```

这是我的 IngredientsController （我已经将 putt alias 的路径更改为我的参数并且它正在工作）

```
public function edit ($alias) {
        $ing = $this->Ingredient->IngredientAlias->find('first', array(
                    'conditions' => array('IngredientAlias.alias' => $alias)));
        $this->Ingredient->IngredientAlias->id= $ing['IngredientAlias']['id'];
        $this->Ingredient->IngredientAlias->set('ingredient_id',$ing['IngredientAlias']['ingredient_id']);
        $this->Ingredient->id= $ing['IngredientAlias']['ingredient_id'];
        if (!$this->Ingredient->IngredientAlias->exists()) {
                throw new NotFoundException ('Nessuna corrispondenza trovata per questo ingrediente');
            }
            if (!$alias) {
                $this->set('flash_element','error');
                $this->Session->setFlash ('Ingrediente non valido');
            }
            $this->Ingredient->recursive = 2;
            $this->set('ingredient', $this->Ingredient->read());
            $this->set('ingredient_alias',$this->Ingredient->IngredientAlias->read());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:12:46.327

根据您描述的关系以及如果您调用表中是否有`ingredient_id`键：`ingredient_aliases`

```
$this->Ingredient->find('first', array('conditions' => array('Ingredient.id' => $id))); 
```

您将获得由 $id 指定的成分记录，以及与它相关的所有成分别名记录，其数组结构类似于以下内容：

```
Array =>
    [Ingredient] => Array
                        [id] => 3
                        [other_data_from_DB] =>
                        .....
    [IngredientAlias] => Array => 
                         [0] => Array =>
                                [id] => 1
                                [ingredient_id] => 3
                                [other_data_from_DB] =>
                                ....
                         [1] => Array =>
                                [id] => 2
                                [ingredient_id] => 3
                                [other_data_from_DB] =>
                                ....
                         [2] => Array =>
                                [id] => 3
                                [ingredient_id] => 3
                                [other_data_from_DB] =>
                                .... 
```

由于 hasMany 关系，因此对 IngredientAlias 数组子结构进行了索引。如果您没有看到相关的 IngredientAlias 记录，请检查[您的模型的递归属性](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)：

```
debug($this->Ingredient->recursive); 
```

如果它等于 -1，那么只会获取成分模型数据。在我提供的链接中查看其他递归值的作用。

如果你想反其道而行之，你应该通过 IngredientAlias 模型：

```
$this->IngredientAlias->find('first', array(CONDITIONS)); 
```

将提供 CONDITIONS IngredientAlias 记录中指定的内容及其连接的成分记录。由于关系，成分记录将只有一个`IngredientAlias belongsTo Ingredient`。

# fish - 在 Fish shell 中测试字符串相等/字符串比较？

> ID：11109836
> 
> 赞同：52
> 
> 时间：2012-06-19T21:36:57.283
> 
> 标签：fish

你如何比较 Fish`"abc" == "def"`中的两个字符串（就像其他语言一样）？

到目前为止，我已经使用了`contains`（结果`contains "" $a`只返回`0`if`$a`是空字符串，尽管这似乎并不是在所有情况下对我都有效）和`switch`（使用 a`case "what_i_want_to_match"`和 a `case '*'`）的组合。不过，这些方法似乎都不是特别……正确。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-19T22:09:12.597

```
 if [ "abc" != "def" ] 
        echo "not equal"
  end
  not equal

  if [ "abc" = "def" ]
        echo "equal"
  end

  if [ "abc" = "abc" ]
        echo "equal"
  end
  equal 
```

或一个班轮：

```
if [ "abc" = "abc" ]; echo "equal"; end
equal 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-20T23:19:29.603

手册`test`有一些有用的信息。它与`man test`.

```
Operators for text strings
   o STRING1 = STRING2 returns true if the strings STRING1 and STRING2 are identical.

   o STRING1 != STRING2 returns true if the strings STRING1 and STRING2 are not
     identical.

   o -n STRING returns true if the length of STRING is non-zero.

   o -z STRING returns true if the length of STRING is zero. 
```

例如

```
set var foo

test "$var" = "foo" && echo equal

if test "$var" = "foo"
  echo equal
end 
```

您也可以使用`[`and`]`代替`test`.

这是检查**空字符串**或**未定义变量**的方法，这些在fish中是错误的。

```
set hello "world"
set empty_string ""
set undefined_var  # Expands to empty string

if [ "$hello" ]
  echo "not empty"  # <== true
else
  echo "empty"
end

if [ "$empty_string" ]
  echo "not empty"
else
  echo "empty"  # <== true
end

if [ "$undefined_var" ]
  echo "not empty"
else
  echo "empty"  # <== true
end 
```

# python - python中奇怪的闭包行为

> ID：11109838
> 
> 赞同：13
> 
> 时间：2012-06-19T21:37:07.840
> 
> 标签：python, closures

我有以下简单的代码：

```
def get():
    return [lambda: i for i in [1, 2, 3]]

for f in get():
    print(f()) 
```

正如我对 python 知识所预期的那样，输出为 3 - 整个列表将包含`i`. 但这在内部如何运作？

AFAIK，python变量只是对对象的引用，所以第一个闭包必须包含对象的第一个`i`引用——这个对象肯定是1，而不是3 O_O。python 闭包如何包含变量本身而不是对象这个变量引用？它是否将变量名称保存为纯文本，一些“对变量的引用”或什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T21:45:34.793

正如@thg435 所指出的那样，lambda 不会封装当时的值，而是封装范围。解决这个问题的方法太少了：

lambda 默认参数“hack”

```
[ lambda v=i: v for i in [ 1, 2, 3 ] ] 
```

或使用 functools.partial

```
from functools import partial
[ partial(lambda v: v, i) for i in [ 1, 2, 3 ] ] 
```

本质上，您必须将范围移动到您正在创建的函数的本地。一般来说，我喜欢`partial`更频繁地使用，因为您可以将它传递给可调用对象，以及任何 args 和 kargs 来创建具有适当闭包的可调用对象。在内部，它包装了您的原始可调用对象，因此范围为您转移。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T21:41:06.880

闭包不是指*变量*，而是指*范围*。由于`i`其范围内的最后一个值是“3”，因此所有三个闭包都返回相同的值。要“锁定”变量的当前值，请为其创建一个新范围：

```
def get() : return [ (lambda x: lambda: x)(i) for i in [ 1, 2, 3 ] ]
for f in get() : print( f() ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T21:46:51.503

每个`lambda`实际上指的是相同的`i`，它是由列表理解创建的变量。在列表理解终止时，`i`保持分配给它的最终元素的值，直到它超出范围（通过将其封装在函数中并返回它来防止，即`lambda`）。正如其他人指出的那样，闭包不维护值的副本，而是维护对在其范围内定义的变量的引用。

# jquery-mobile - 使用 jQuery Mobile 处理动态页面的最佳方式是什么

> ID：11109840
> 
> 赞同：4
> 
> 时间：2012-06-19T21:37:12.363
> 
> 标签：jquery-mobile

这真是令人沮丧..！

当使用带有预定义页面的 jQuery Mobile 时，一切都很顺利和容易，但是更复杂的项目呢？

我正在开发一个基于先前答案呈现下一页的调查系统。因此，每个页面都必须将当前问题提交给外部 API 并获取下一个问题。

***我的第一选择是在 JS 上大放异彩，***但它的主要问题是数据必须通过 AJAX 发送，然后注入新的结构化 HTML 必须“刷新”才能很好地呈现。除此之外，所有 AJAX 请求都必须有它们的回调，因为它会创建一个混乱的代码。因此，在我的案例中，一项包含 20-30 个问题的调查由 15 种不同类型的表单组成，其中大量使用了回调和嵌套回调。

***然后我以 PHP 为基础重写了项目。***使用一个“data-role=page”实例提交到同一页面的表单（包含调查问题）。通过 CURL 请求，我发送了答案并得到了下一个问题，生成了 HTML 结构，瞧——这一切都呈现得很漂亮，无需触发刷新。

但是使用这种方法有其自身的问题：

*   提交到同一页面会使您无法进行页面*转换* ，并为您留下默认的淡入淡出转换。
*   jQuery mobile 有这种奇怪的*缓存*（即使在我使用了所有方法来禁用它之后）
*   将数据从页面传递到页面很棘手 - GET 有长度限制
    ，并且 POST 不适合我的需要，因为实际的 CURL 请求必须提交“param1=val1&..”）

**那么，在处理复杂且动态的项目时，使用 jQuery Mobile 的最佳方式是什么？**

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:59:07.030

恕我直言（我自己来自 PHP 和 jQM）我采用了使用由 PHP 提供服务的 JSON 然后用 jQM 解析的方法。

我的方法是创建登录页面（将具有动态内容的页面）框架​​以保存所需的功能，如导航、徽标、页眉、页脚等......并让 jQM 使用从 PHP 发送的 JSON 更新页面内容回复。

*   [http://jquerymobile.com/demos/1.1.0/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-dynamic.html)

您还可以将它与 localstorage 与 storage.js 配对

*   [https://github.com/ekdevdes/storage.js](https://github.com/ekdevdes/storage.js)

现在我也似乎（但尚未使用）一些关于使用模板引擎（如 Handlebars）的信息，这里有一些我发现可能有趣的链接：

*   [使用 Handlebars.js 的预编译模板（jQuery Mobile 环境）](https://stackoverflow.com/questions/8659787/using-pre-compiled-templates-with-handlebars-js-jquery-mobile-environment)
*   [http://www.ubelly.com/2012/02/jquery-mobile-101/](http://www.ubelly.com/2012/02/jquery-mobile-101/)
*   [https://github.com/tralamazza/jquerymobile-odata-phonegap-handlebars](https://github.com/tralamazza/jquerymobile-odata-phonegap-handlebars)

# android - 从 Android 应用存储游戏统计数据

> ID：11109843
> 
> 赞同：3
> 
> 时间：2012-06-19T21:37:32.357
> 
> 标签：android, database, sqlite, statistics, storage

我有一些**基本的 Java**经验和**非常基本的 Android 应用程序开发经验**（目前正在阅读 Android 无线应用程序开发第一卷）。

我正在尝试开发一个 android 应用程序来**跟踪 Beer Pong 统计数据**（投篮命中率、获胜率、连胜纪录等）。我希望能够存储这些数据，以便我可以在应用程序中显示排行榜，并将数据传输到我的计算机以进行更复杂的统计分析和永久跟踪。

我将不胜感激有关执行此操作的最佳/最简单方法的一些意见...

1) **存储什么信息？** 我想我需要存储用户/玩家姓名并跟踪每一次投篮命中/失误？什么样的**格式**会有效？

2) **什么时候存放？** 我应该在每次拍摄后“提交”这些成功/失败的存储吗？还是在游戏结束时？我想实现一个“返回”或“撤消”按钮来解决错误。这将如何影响我应该存储数据的时间？

3) **如何储存？** 基于我有限的安卓应用开发经验，SQLite 数据库是否易于学习和适用？存储到 google excel 文档会很容易（但需要持续的互联网连接）？其他形式的存储会更好吗？

谢谢你和OSS！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:44:39.263

SQL 数据库将是您最好的选择，并且动态提交对数据库的更改是可以的。

undo / redo 最好使用命令对象设计模式来实现。命令对象可以存储从数据源中为与其关联的用户操作撤销事务所需的信息。只需在用户每次执行操作时将新的命令对象推入堆栈（将其操作的详细信息存储在命令对象中），然后将这些命令对象从堆栈中弹出并在用户点击撤消时调用它们的恢复方法。revert 方法使用创建对象时存储的数据从 SQL 数据库中撤销事务。

[命令模式的 Wiki 链接](http://en.wikipedia.org/wiki/Command_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:43:42.947

SQLite 非常适合设备存储，所以我认为那将是最好的。

我从 thenewboston.com 学习了我的 SQLite，并举了一个例子 - github.com/jordanbtahabsim/Family-Tree

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:45:08.720

我认为 SQLite 数据库是您存储的最佳选择。第二个最好但更简单的选择是将信息存储在用户设置中。如果我在你所在的位置，我会从数据中向后工作。我会在 sqlite 中创建表并开始针对数据库编写有趣的查询。有很好的工具可以读取数据库的内容等。所以我会花一些时间在 android 之外的 SQLite 上。然后，当您将其拉入 android 时，将您的访问权限包装在内容提供程序中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:48:22.400

1) 根据您计划跑步的统计数据类型，您可能需要跟踪许多事情：击中了哪些杯子、击球时的位置、每次击球的杯子数量和位置, 击球是否被反弹等。

2）在游戏结束时提交似乎可以让您压缩存储的信息量，并为您提供更好的错误更正选项。

3）正如其他人所说，SQLite 似乎是数据存储的一个不错的选择，并且不应该太难接受。

# c# - 由于编码，文本框文本未检索

> ID：11109845
> 
> 赞同：0
> 
> 时间：2012-06-19T21:37:39.097
> 
> 标签：c#, .net, compact-framework, windows-mobile-6

我正在使用具有 windows mobile 6.1 的中国移动设备来运行我的 .net CF 3.5 应用程序。我遇到的问题是，当我在自定义文本框中输入文本时，我在代码中的 textbox.text 中看到空格. 谁能告诉我如何编码文本框中显示的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:46:04.380

如果您的设备是使用中文版 Windows Mobile 构建的，它可能只定义了中文字符。

我还没有在 WinMo 设备上看到改变语言的方法，所以你可能会被困住。

不知道你能不能看懂中文（我看不懂），你试过用中文版的Visual Studio吗？在美国很难找到中文版的 VS 和 WinMo（原因很明显）。

# html - 如何在预设图像中嵌入图像或视频

> ID：11109847
> 
> 赞同：0
> 
> 时间：2012-06-19T21:37:59.970
> 
> 标签：html, css, image, video, styles

我正在写一个网站介绍页面，并且非常喜欢这个页面上的风格： [http](http://www.davidhutton.com/) ://www.davidhutton.com/那里有像这样的另一幅图像中的移动图像/视频。

为了简化它，我可以在这里将图像放入电视容器中：http: [//jsfiddle.net/h9Nn3/2/](http://jsfiddle.net/h9Nn3/2/)

我不确定它有多复杂，但它过于复杂，至少一个起点将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:52:29.747

根据您的示例，您可以像这样解决它：

```
<style>
div.container {
    width:          337px;
    height:         297px;
    padding:        25px 35px 0px 28px;
    background:     url(http://www.officialpsds.com/images/thumbs/tv-screen-1-psd29071.png) no-repeat 0 0;
}

div.container > div {
    height:         189px;
    overflow:       hidden;
    border:         1px solid red;
}
</style>

<div class="container">
    <div>
        This container should have a red border and fit's exactly the screen.
        You can replace or fill it with everything you want, for example an img-tag.
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:48:47.057

我实际上将电视图像设置为背景图像，并将您的其他图像放置在同一个容器中。

```
<div id="content">
    <img src="https://www.google.com/images/srpr/logo3w.png" />
</div>
​
#content {
    background-image: url('http://www.officialpsds.com/images/thumbs/tv-screen-1-psd29071.png');
    width: 373px; /* 400 - 27 for padding */
    height: 294px; /* 322 - 28 for padding */
    padding: 27px 0 0 28px;
}​ 
```

[演示](http://jsfiddle.net/h9Nn3/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:42:11.113

其实很简单。您可以使用 Chrome 的右键单击 >“Inspect Element”或等效的 FireFox 来查看有一个电视图像（正如您所做的那样）和一个滑动图像元素：

```
position: absolute;
top: #px;
left: #px; 
```

在通过 jQuery 或 JavaScript 处理滑动图像之前，您可以用一个简单的图像测试这个 html/css

# c# - 使用 Find 和 matchAllWordForms=true 时 C# MSword 不突出显示整个单词

> ID：11109850
> 
> 赞同：0
> 
> 时间：2012-06-19T21:38:06.227
> 
> 标签：c#, ms-word, selection, highlight, replace

在我的程序中，我使用`Find.Execute`搜索关键字的所有单词形式并突出显示它们。例如，如果我的源文档包含“perform”和“performance”，`Find.Execute(...matchAllWordForms=true...)`会找到这两个词，但它只会突出显示“perform”部分的性能。

如何让 MSWord 突出显示整个单词？被`range.Text`更改`Find.Execute`为只是“执行”，所以我无法遍历它。我尝试做 a`Range.Select()`然后迭代`Selection.End`，但范围与原始文档不匹配。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:26:26.887

好吧，我觉得有点愚蠢：

我试图使用`Selection.Extend`并完全错过了该`Selection.Expand`选项。对于以后偶然发现此问题的任何人：

```
range.Select();    // The range after Find.Execute
wordApp.Selection.Expand(Word.WdUnits.wdWord);    // may have to trim off excess whitespace
Word.Range highlightRange = document.Range(wordApp.Selection.Start, wordApp.Selection.End);
wordApp.Selection.Shading.BackgroundPatternColor = (Word.WdColor)System.Drawing.ColorTranslator.ToOle(extractedColor); 
```

请注意，我使用 Shading 作为我的荧光笔（因此我可以创建自定义颜色，`System.Drawing.Color.FromARGB(Alpha,R,G,B)`而不是默认的 15 种颜色）。

# python - 将 shell 命令的输出通过管道传输到 python 脚本

> ID：11109859
> 
> 赞同：44
> 
> 时间：2012-06-19T21:39:06.513
> 
> 标签：python, unix

我想运行一个`mysql`命令并将其输出设置为我的 python 脚本中的一个变量。

这是我试图运行的 shell 命令：

```
$ mysql my_database --html -e "select * from limbs" | ./script.py 
```

这是python脚本：

```
#!/usr/bin/env python

import sys

def hello(variable):
    print variable 
```

我将如何接受 python 脚本中的变量并让它打印输出？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-19T21:44:46.433

您需要从标准输入读取数据以检索 python 脚本中的数据，例如

```
#!/usr/bin/env python

import sys

def hello(variable):
    print variable

data = sys.stdin.read()
hello(data) 
```

如果您在这里要做的只是从 mysql 数据库中获取一些数据，然后使用 Python 对其进行操作，那么我会跳过将其通过管道传输到脚本中，而只需使用[Python MySql 模块](http://sourceforge.net/projects/mysql-python/)来执行 SQL 查询。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-19T23:53:21.053

如果您希望您的脚本表现得像许多 unix 命令行工具并接受管道或文件名作为第一个参数，您可以使用以下命令：

```
#!/usr/bin/env python
import sys

# use stdin if it's full                                                        
if not sys.stdin.isatty():
    input_stream = sys.stdin

# otherwise, read the given filename                                            
else:
    try:
        input_filename = sys.argv[1]
    except IndexError:
        message = 'need filename as first argument if stdin is not full'
        raise IndexError(message)
    else:
        input_stream = open(input_filename, 'rU')

for line in input_stream:
    print(line) # do something useful with each line 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-19T21:44:28.740

当您将一个命令的输出通过管道传输到 pytho 脚本时，它会转到 sys.stdin。您可以像读取文件一样从 sys.stdin 读取。例子：

```
import sys

print sys.stdin.read() 
```

这个程序从字面上输出它的输入。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-01-09T09:41:04.333

由于这个答案`piping data to a python script`在[搜索](https://library.oreilly.com/book/0636920027072/python-cookbook-3rd-edition/199.xhtml?ref=toc#_accepting_script_input_via_redirection_pipes_or_input_files)`sys`. IMO，即使对新用户来说也更加pythonic和不言自明。

```
import fileinput
with fileinput.input() as f_input:
    for line in f_input:
        print(line, end='') 
```

这种方法也适用于如下结构的命令：

```
$ ls | ./filein.py          # Prints a directory listing to stdout.
$ ./filein.py /etc/passwd   # Reads /etc/passwd to stdout.
$ ./filein.py < /etc/passwd # Reads /etc/passwd to stdout. 
```

如果您需要更复杂的解决方案，您可以编译`argparse`，`fileinput` [如 martinth 的这个要点所示](https://gist.github.com/martinth/ed991fb8cdcac3dfadf7)：

```
import argpase
import fileinput

if __name__ == '__main__':
    parser = ArgumentParser()
    parser.add_argument('--dummy', help='dummy argument')
    parser.add_argument('files', metavar='FILE', nargs='*', help='files to read, if empty, stdin is used')
    args = parser.parse_args()

    # If you would call fileinput.input() without files it would try to process all arguments.
    # We pass '-' as only file when argparse got no files which will cause fileinput to read from stdin
    for line in fileinput.input(files=args.files if len(args.files) > 0 else ('-', )):
        print(line) 
```

```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-04-01T21:49:04.603

您可以使用命令行工具`xargs`

`echo 'arg1' | xargs python script.py`

`arg1`现在可以`sys.argv[1]`从`script.py`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-04T20:20:14.227

我偶然发现了这个尝试将 bash 命令传递给我没有编写的 python 脚本（并且不想修改为接受`sys.stdin`）。我发现这里提到的进程替换（[https://superuser.com/questions/461946/can-i-use-pipe-output-as-a-shell-script-argument](https://superuser.com/questions/461946/can-i-use-pipe-output-as-a-shell-script-argument)）可以正常工作。

前任。 `some_script.py -arg1 <(bash command)`

# jquery - 如何在 SlickGrid 中设置格式化程序？

> ID：11109860
> 
> 赞同：1
> 
> 时间：2012-06-19T21:39:07.270
> 
> 标签：jquery, slickgrid, formatter

我已经完成了研究，我知道如何制作自定义格式化程序或编辑器以及如何使用它。我的问题是，我无法设置或使用格式化程序。我的结构：

jQuery 包括：

```
 <script type="text/javascript" src="jquery-1.7.2.min.js"></script>

    <script type="text/javascript" src="jquery.event.drag-2.2.js"></script>
    <script type="text/javascript" src="slick.core.js"></script>
    <script type="text/javascript" src="slick.editors.js"></script>
    <script type="text/javascript" src="slick.formatters.js"></script>
    <script type="text/javascript" src="slick.grid.js"></script> 
```

上面的一切都是未经编辑的。实现网格的代码：

```
 var grid; var cols; var rows; var options = {
                            enableCellNavigation: true,
                            enableColumnReorder: false,
                            forceFitColumns: true
                        };
*rows and cols come from server side via JSON.parse*
grid = new Slick.Grid("#results", rows, cols, options); 
```

来自服务器并填充 rows 和 cols 变量的代码基本上是这样的：

```
 cols:
            echo json_encode('[
                    {"id":"price",      "name":"Ár",                "field":"price"},
                    {"id":"location",   "name":"Elhelyezkedés",     "field":"location"},
                    {"id":"egyeb",      "name":"Lófasz",            "field":"egyeb"},
                    {"id":"pic",        "name":"Képek",             "field":"pic", "formatter":"Slick.Formatters.PercentComplete"}
                ]');
            rows:
            echo json_encode('[
                    {"price": "5", "location":"AlsóBélaCsecselény",     "egyeb":"lófasz",   "pic":"1",  "link":"ezittahelye"},
                    {"price": "6", "location":"qrsóBéqrcselény",        "egyeb":"lófasz",   "pic":"2",  "link":"ezittahelye"},
                    {"price": "7", "location":"AlsóBélaqwqwrelény",     "egyeb":"lófasz",   "pic":"3",  "link":"ezittahelye"},
                    {"price": "8", "location":"qwrCsecselény",          "egyeb":"lófasz",   "pic":"4",  "link":"ezittahelye"}
                ]'); 
```

一切正常，当 pic 列没有格式化程序时，网格也可以使用列的额外属性，例如错误输入的“格式化程序”标签（如“fformatter”或其他），

但是每次 JSON 代码具有“格式化程序”属性时，Javascript 都会给我以下错误：

未捕获的异常：TypeError: 'getFormatter(row, m)' is not a function

每次我尝试加载表格时，格式化程序都会搞砸一切，我不知道下一步该做什么！我试图追溯这个错误，它把我带到了 slick.grid.js 源代码的 1124\. 行，这个函数不知何故用 return 语句破坏了一切。

```
function getFormatter(row, column) {
  var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);

  // look up by id, then index
  var columnOverrides = rowMetadata &&
      rowMetadata.columns &&
      (rowMetadata.columns[column.id] || rowMetadata.columns[getColumnIndex(column.id)]);

  return (columnOverrides && columnOverrides.formatter) ||
      (rowMetadata && rowMetadata.formatter) ||
      column.formatter ||
      (options.formatterFactory && options.formatterFactory.getFormatter(column)) ||
      options.defaultFormatter;
} 
```

任何帮助，将不胜感激！

编辑：这是我从服务器获取代码的方式：

```
 $.post( "queries.php?event=search&&phase=columns", $("#full_search").serialize(), function(data){
                                    cols = JSON.parse(data);
                                    alert(cols[1].id);
                                    $.post( "queries.php?event=search&&phase=rows", $("#full_search").serialize(), function(data){
                                        rows = JSON.parse(data);
                                        alert(rows[1].link);
                                        grid = new Slick.Grid("#results", rows, cols, options);
                                        alert(grid.getData().length);
                                        return false;
                                    },"json");
                                return false;
                            },"json");
                            },"json"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:45:13.493

`Slick.Formatters.PercentComplete`不应该是一个字符串。它是 slick.formatters.js 中定义的函数（类构造函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:10:03.403

> 好吧我解决了！我解析了数据，然后将格式化程序字符串设置为一个对象： cols = JSON.parse(data); cols[3].formatter = Slick.Formatters.PercentComplete; 就这样！感谢您的帮助！

我会建议这样的事情。

Slick.Formatters.PercentComplete 是一个函数，json 中没有函数，如[http://json.org](http://json.org)所示。此外，在具有函数的 JSON 中验证失败。您可以在这里尝试验证：http: [//jsonlint.com/](http://jsonlint.com/)。

**您不能在 JSON 中使用函数**。然后，在收到“几乎是 JSON”数据后，您需要在客户端使用 javascript 解析它，就像您所做的那样。

感谢您的样品！我有同样的问题，这很有帮助。

就我而言，我使用 jQuery Ajax 获取元数据：

```
req = $.ajax({type: 'GET',
              url: url,
              dataType: 'json',
              async: false}).done(function(meta) { metadata = meta; }); 
```

返回的元数据是这样的：

```
{"errors":{}, 
 "columns":[{"formatter":"TaskNameFormatter",
             "field":"1",
             "id":"1","width":220,"name":"Hierarchy1","cssClass":"cell-title"},
             OTHERS_COLUMNS]} 
```

意识到格式化程序仍然是一个字符串。然后我浏览所有列，使用以下代码将格式化程序从 String 更改为 Function：

```
 $.each(metadata.columns, function(index, value) {
                              if(typeof value.formatter != "undefined") {
                                 value.formatter = eval(value.formatter);
                              } 
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:32:19.943

对于通过 JSON 获取数据的用户，对象调用仍必须用引号括起来；但是，我能够在`slick.grid.js`文件中找到它被保释的部分：

```
if (d) {
  if(m.formatter){m.formatter=eval(m.formatter)} // make it an object call instead of string
  stringArray.push(getFormatter(row, m)(row, cell, value, m, d));
} 
```

# php - 用 PHP 创建一个文件而不打开它

> ID：11109864
> 
> 赞同：3
> 
> 时间：2012-06-19T21:39:36.710
> 
> 标签：php, file, filesystems

> **可能重复：**
> [PHP 创建一个没有 fopen 的文件](https://stackoverflow.com/questions/8510161/php-create-a-file-without-fopen)

我想创建一个没有 fopen 函数的文件，因为它会打开文件。有可能还是我别无选择，只能fopen？我正在编写一个*检查器*类，它将确保某些文件存在并具有写权限。如果一个文件不存在，我只想创建它。此类不会操纵任何文件内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T21:41:35.017

使用该[`touch`](http://php.net/manual/en/function.touch.php)功能。从文档中引用：

> 尝试将 filename 参数中指定的文件的访问和修改时间设置为 time 中给定的值。请注意，无论参数数量如何，访问时间总是会被修改。
> 
> 如果文件不存在，则会创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:42:36.957

好吧，您可以检查文件是否存在`file_exists`（它甚至会告诉您它是常规文件，而不是目录，但如果您查看的对象是指向正确文件的符号链接，它也会产生肯定的答案）。您还可以查看文件权限，`fileperms()`并且您可能还想查看文件的用户和组以了解您是否可以写入文件。

# objective-c - IndexPathForSelectedRow 返回 null

> ID：11109867
> 
> 赞同：0
> 
> 时间：2012-06-19T21:39:52.470
> 
> 标签：objective-c, uitableview, nsfetchedresultscontroller, nsindexpath

我正在使用`fetchresultscontroller`返回的不同结果 ( `NSDictionaryResultType`)，它在每个部分中有多个部分和行。当我使用`indexPathForSelectedRow`它时返回`null`. 这是我的代码：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{       
    if ([segue.identifier isEqualToString:@"toDetailViewSeg"]){
        WLDetailTableViewController *detailController =segue.destinationViewController;
        WeightLiftingInfo *theInfo = [[_fetchedResultsController fetchedObjects] objectAtIndex:self.tableView.indexPathForSelectedRow.row];
        detailController.muscleGroupInfo = [theInfo valueForKey:@"muscleGroup"];
        detailController.specificExerciseInfo = [theInfo valueForKey:@"specificExercise"];
        detailController.managedObjectContext = _managedObjectContext;
    }

} 
```

如何获得正确的索引路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:46:54.460

```
WeightLiftingInfo *theIndo = [_fetchedResultsController objectAtIndexPath:self.tableView.indexPathForSelectedRow]; 
```

这似乎是答案。它提供了正确的索引路径，看起来像一个集合 [x,y] 而不是单个整数。（这是我的解释，可能是错误的）

# c# - 如何创建事件（画布移动）C# WPF？

> ID：11109871
> 
> 赞同：2
> 
> 时间：2012-06-19T21:40:11.070
> 
> 标签：c#, .net, wpf, kinect

在我的应用程序中，当我移动我的 handRigth（kinect SDK）时，画布会移动，我需要创建一个方法（C#，Wpf），它允许我存储 Y 的坐标（100 个位置的数组列表）。本方法内容：

```
alLastCoor_HandRight.Add(dYpuntero); //ArrayList, dYpuntero=Position
if (alLastCoor_HandRight.Count > 100)// Limit ArrayList 100 positions
alLastCoor_HandRight.RemoveAt(0); 
```

每次进入方法，存储100个Y画布位置。我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:43:09.133

首先，永远不要使用`ArrayLists`它们做同样的事情，`Lists`只是效率较低（参见[ArrayList vs List<object>](https://stackoverflow.com/questions/391088/arraylist-vs-listobject)）。我这样做的方法是通过`Boolean`决定计数是大于 100 还是小于 100，如下所示：

```
 private bool HasLessThan100(List<double> list)
    {
        if (list.Count <= 100) return true;

        if (list.Count > 100) return false;

        return false;
    } 
```

然后对于你的方法，这样称呼它：

```
 private void MoveCanvas(List<double> list, double dYpuntero)
    {
        if (HasLessThan100(list))
        {
            list.Add((double)dYpuntero);
        }

        else return;
    } 
```

# zend-studio - Zend Studio 一直在项目文件夹中加载。如何让它加载，以便我的顶级元素都是我的项目？

> ID：11109879
> 
> 赞同：3
> 
> 时间：2012-06-19T21:41:14.450
> 
> 标签：zend-studio

是的，我将“顶级元素”设置为“项目”

这是我加载我的 zend 工作室时的样子。![在此处输入图像描述](../Images/bac403546e703f551e26f5a78ae43cfb.png)

我希望它加载，以便我所有的项目都在那里，而不必按那个向上按钮 20 次......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:01:23.703

在您喜欢的文本编辑器中找到以下文件以进行编辑：workspace.metadata.plugins\org.eclipse.ui.workbench\workbench.xml

就我而言：C:\Users\juliano\Zend\workspaces\DefaultWorkspace.metadata.plugins\org.eclipse.ui.workbench

并找到该行：

```
<input factoryID="org.eclipse.ui.internal.model.ResourceFactory" path="/xxx" type="4"/> 
```

就我而言，它是：

```
<input factoryID="org.eclipse.ui.internal.model.ResourceFactory" path="/Electrolux" type="4"/> 
```

并将其替换为

```
<input factoryID="org.eclipse.ui.internal.model.ResourceFactory" path="/" type="8"/> 
```

再次拥有和平！

# .net - 作业必须在每个星期一执行。星期一是假期，所以必须执行星期二。这是怎么做的？

> ID：11109880
> 
> 赞同：0
> 
> 时间：2012-06-19T21:41:23.343
> 
> 标签：.net, quartz-scheduler, crontab

我有一个必须在每个星期一执行的工作。这项工作在家庭办公室的服务器中运行。人们从早上 8 点到下午 6 点在这里工作。其余时间计算机处于关闭状态。

这在 CRON 中表示：

```
0 0 12 ? * MON * 
```

这是时间表：

```
1\.  Monday, June 25, 2012 12:00 PM
2\.  Monday, July 2, 2012 12:00 PM
3\.  Monday, July 9, 2012 12:00 PM
4\.  Monday, July 16, 2012 12:00 PM
5\.  Monday, July 23, 2012 12:00 PM 
```

但是，6 月 25 日是假期。我需要确保作业在星期二上午 8:00 执行（服务器唤醒时）。

这很重要，因为当天运行的其他任务取决于第一个任务的发生。此外，结果会被上传到远程服务器，并且必须不等到下周才能获得结果。

执行此操作的软件位于 .NET 中，并使用带有 CRON 的quartz.net 来表达执行。

所以我想知道如何在没有用户干预的情况下可靠地解决这个问题。我很难有一种清单或提前登录，我在其中标记预期任务是否发生，但无法用计算机术语表达如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:48:56.787

很明显你必须有一些数据文件，（或者可能是一些确定的算法）可以告诉你何时运行你的应用程序。

您要么手动编写它，要么从某个地方查询它。

这样做之后，只需将当前日期与您创建的日期列表进行比较。如果今天的日期在列表中，并且您尚未标记您的应用程序已运行，请立即运行它。

祝你今天过得愉快。

# ruby-on-rails - 测试说没有路由匹配，但它们在浏览器中工作

> ID：11109881
> 
> 赞同：12
> 
> 时间：2012-06-19T21:41:32.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, routes

对于我的测试，我有以下内容：

```
test "should update holder" do
        holder = Holder.create(name: "name", user_id: 10)
        put :update, holder: holder
    assert_redirected_to holder_path(assigns(:holder))
end 
```

当我运行它们时，我得到以下错误：

```
 ERROR (0:00:00.185) test_should_update_holder
  No route matches {:holder=>"980190963", :controller=>"holders", :action=>"update"}
        @ /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:532:in `raise_routing_error'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:528:in `rescue in generate'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:520:in `generate'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:561:in `generate'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:557:in `generate_extras'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:553:in `extra_keys'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_controller/test_case.rb:147:in `assign_parameters'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_controller/test_case.rb:453:in `process'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_controller/test_case.rb:49:in `process'
          /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_controller/test_case.rb:390:in `put'
          test/functional/holders_controller_test.rb:36:in `block in <class:HoldersControllerTest>'
          /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/testing/setup_and_teardown.rb:35:in `block in run'
          /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:458:in `_run__4148286245602197272__setup__4285546581512185515__callbacks'
          /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
          /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'
          /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
          /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/testing/setup_and_teardown.rb:34:in `run' 
```

但在我的路线中，我有：

```
Teacherjoy::Application.routes.draw do
  get "users/new"

  resources :questions
  resources :pages
  resources :holders
  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  root :to => 'pages#home'

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete
end 
```

和 rake 路线返回：

```
[teacherjoy (master)]$ rake routes
    users_new GET    /users/new(.:format)          users#new
    questions GET    /questions(.:format)          questions#index
              POST   /questions(.:format)          questions#create
 new_question GET    /questions/new(.:format)      questions#new
edit_question GET    /questions/:id/edit(.:format) questions#edit
     question GET    /questions/:id(.:format)      questions#show
              PUT    /questions/:id(.:format)      questions#update
              DELETE /questions/:id(.:format)      questions#destroy
        pages GET    /pages(.:format)              pages#index
              POST   /pages(.:format)              pages#create
     new_page GET    /pages/new(.:format)          pages#new
    edit_page GET    /pages/:id/edit(.:format)     pages#edit
         page GET    /pages/:id(.:format)          pages#show
              PUT    /pages/:id(.:format)          pages#update
              DELETE /pages/:id(.:format)          pages#destroy
      holders GET    /holders(.:format)            holders#index
              POST   /holders(.:format)            holders#create
   new_holder GET    /holders/new(.:format)        holders#new
  edit_holder GET    /holders/:id/edit(.:format)   holders#edit
       holder GET    /holders/:id(.:format)        holders#show
              PUT    /holders/:id(.:format)        holders#update
              DELETE /holders/:id(.:format)        holders#destroy
        users GET    /users(.:format)              users#index
              POST   /users(.:format)              users#create
     new_user GET    /users/new(.:format)          users#new
    edit_user GET    /users/:id/edit(.:format)     users#edit
         user GET    /users/:id(.:format)          users#show
              PUT    /users/:id(.:format)          users#update
              DELETE /users/:id(.:format)          users#destroy
     sessions POST   /sessions(.:format)           sessions#create
  new_session GET    /sessions/new(.:format)       sessions#new
      session DELETE /sessions/:id(.:format)       sessions#destroy
         root        /                             pages#home
       signup        /signup(.:format)             users#new
       signin        /signin(.:format)             sessions#new
      signout DELETE /signout(.:format)            sessions#destroy 
```

如果您查看 rake 路由，显然有一个更新操作，这是一个 put，在持有者控制器中，这就是我的测试正在做的事情，对吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T21:46:41.377

请注意，路线实际上是`PUT /holders/:id`，但您将`:holder`选项传递给您的`put`方法，而不是`:id`. 尝试将测试中的那一行更改为：

```
put :update, id: holder 
```

# java - 在查看 android 屏幕后比较位图 - 比较方法不起作用

> ID：11109893
> 
> 赞同：0
> 
> 时间：2012-06-19T21:42:26.720
> 
> 标签：java, android, bitmap

我正在尝试比较两个不同的视图来比较图像，看看它是否相同。这是我的代码...

```
public boolean equals(View view1,  View view2){

    view1.setDrawingCacheEnabled(true);
    view1.buildDrawingCache();
    Bitmap b1 = view1.getDrawingCache();

    view2.setDrawingCacheEnabled(true);
    view2.buildDrawingCache();
    Bitmap b2 = view2.getDrawingCache();

    ByteBuffer buffer1 = ByteBuffer.allocate(b1.getHeight() * b1.getRowBytes());
    b1.copyPixelsToBuffer(buffer1);

    ByteBuffer buffer2 = ByteBuffer.allocate(b2.getHeight() * b2.getRowBytes());
    b2.copyPixelsToBuffer(buffer2);

    return Arrays.equals(buffer1.array(), buffer2.array());
} 
```

但是，无论如何，这将返回 true。谁能告诉我为什么我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:57:12.860

不确定该代码有什么问题（如果有的话），但是您是否尝试[过 Bitmap.sameAs(Bitmap)](http://developer.android.com/reference/android/graphics/Bitmap.html#sameAs%28android.graphics.Bitmap%29)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:42:33.617

UPDATE: The code below works fine, but your code above seems to always return null from the .getDrawingCache() not sure if this is your problem or not. I don't have the time to look too deeply into this, but you might check [getDrawingCache() returns null](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null) to see how a similar problem was solved, else please provide you logcat.

* * *

Here is a port (not really checked too stringently) of the sameAs function from API 15, introduced in API 12

One special check they do is to see if the image is alpha channel, and a few optimization's to avoid the array check if possible (probably not an issue with your use case) might as well take advantage of the open source when you can ;-)

```
boolean SameAs(Bitmap A, Bitmap B) {

    // Different types of image
    if(A.getConfig() != B.getConfig())
        return false; 

    // Different sizes 
    if (A.getWidth() != B.getWidth())
        return false; 
    if (A.getHeight() != B.getHeight())
        return false; 

    // Allocate arrays - OK because at worst we have 3 bytes + Alpha (?) 
    int w = A.getWidth();
    int h = A.getHeight();

    int[] argbA = new int[w*h];
    int[] argbB = new int[w*h];

    A.getPixels(argbA, 0, w, 0, 0, w, h); 
    B.getPixels(argbB, 0, w, 0, 0, w, h); 

    // Alpha channel special check 
    if (A.getConfig() == Config.ALPHA_8) {
        // in this case we have to manually compare the alpha channel as the rest is garbage.
        final int length = w * h;
        for (int i = 0 ; i < length ; i++) {
            if ((argbA[i] & 0xFF000000) != (argbB[i] & 0xFF000000)) {
                return false;
            }
        }
        return true;
    }

    return Arrays.equals(argbA, argbB);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T16:50:17.700

@Idistic 的回答帮助我获得了另一种解决方案，该解决方案也适用于可能导致`OutOfMemory`错误的更高分辨率的图像。主要思想是将图像分成几个部分并比较它们的字节。在我的情况下，10 个部分就足够了，我认为对于大多数情况来说已经足够了。

```
private boolean compareBitmaps(Bitmap bitmap1, Bitmap bitmap2)
{
    if (Build.VERSION.SDK_INT > 11)
    {
        return bitmap1.sameAs(bitmap2);
    }

    int chunkNumbers = 10;
    int rows, cols;
    int chunkHeight, chunkWidth;
    rows = cols = (int) Math.sqrt(chunkNumbers);
    chunkHeight = bitmap1.getHeight() / rows;
    chunkWidth = bitmap1.getWidth() / cols;

    int yCoord = 0;
    for (int x = 0; x < rows; x++)
    {
        int xCoord = 0;
        for (int y = 0; y < cols; y++)
        {
            try
            {
                Bitmap bitmapChunk1 = Bitmap.createBitmap(bitmap1, xCoord, yCoord, chunkWidth, chunkHeight);
                Bitmap bitmapChunk2 = Bitmap.createBitmap(bitmap2, xCoord, yCoord, chunkWidth, chunkHeight);

                if (!sameAs(bitmapChunk1, bitmapChunk2))
                {
                    recycleBitmaps(bitmapChunk1, bitmapChunk2);
                    return false;
                }

                recycleBitmaps(bitmapChunk1, bitmapChunk2);

                xCoord += chunkWidth;
            }
            catch (Exception e)
            {
                return false;
            }
        }
        yCoord += chunkHeight;
    }

    return true;
}

private boolean sameAs(Bitmap bitmap1, Bitmap bitmap2)
{
    // Different types of image
    if (bitmap1.getConfig() != bitmap2.getConfig())
        return false;

    // Different sizes
    if (bitmap1.getWidth() != bitmap2.getWidth())
        return false;

    if (bitmap1.getHeight() != bitmap2.getHeight())
        return false;

    int w = bitmap1.getWidth();
    int h = bitmap1.getHeight();

    int[] argbA = new int[w * h];
    int[] argbB = new int[w * h];

    bitmap1.getPixels(argbA, 0, w, 0, 0, w, h);
    bitmap2.getPixels(argbB, 0, w, 0, 0, w, h);

    // Alpha channel special check
    if (bitmap1.getConfig() == Bitmap.Config.ALPHA_8)
    {
        final int length = w * h;
        for (int i = 0; i < length; i++)
        {
            if ((argbA[i] & 0xFF000000) != (argbB[i] & 0xFF000000))
            {
                return false;
            }
        }
        return true;
    }

    return Arrays.equals(argbA, argbB);
}

private void recycleBitmaps(Bitmap bitmap1, Bitmap bitmap2)
{
    bitmap1.recycle();
    bitmap2.recycle();
    bitmap1 = null;
    bitmap2 = null;
} 
```

# javascript - 使用 KnockoutJS 映射插件时绑定损坏

> ID：11109897
> 
> 赞同：2
> 
> 时间：2012-06-19T21:42:40.303
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我将 KnockoutJS 与 ASP.NET MVC 一起使用，并且在使用 ko.mapping 时遇到了绑定损坏的问题。在我看来，我有一个文本区域，我想将输入键绑定到我的 ViewModel 上的一个方法（基本上是输入提交）。

我有以下自定义绑定：

```
ko.bindingHandlers.enterKey = {
        init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
            ko.utils.registerEventHandler(element, 'keydown', function(evt) {
                if (evt.keyCode === 13) {
                    evt.preventDefault();
                    evt.target.blur();
                    valueAccessor().call(viewModel);
                }
            });
        }
    }; 
```

我的视图代码如下所示：

```
 <div class="content-area" id="container" data-bind="with: channelContent"> 
       // other code, to show content from channelContent
       <textarea rows="1" cols="1" data-bind="value: $root.message, enterKey: $root.onMessageEnterKey"></textarea>
 </div> 
```

如果将 channelContent 创建为 ko.observable()：

```
self.channelContent = ko.observable(); 
```

我填充它：

```
$.post('@Url.Action("Content", "Channel")', { channelId: channel.Id }, self.channelContent); 
```

然后一切正常，输入将正确调用我的 onMessageEnterKey 方法。不幸的是，因为在 channelContent 中有一些我想要观察的嵌套属性，所以我正在尝试使用 ko.mapping。

如果我使用 ko.mapping：

```
self.channelContent = ko.mapping.fromJS(@Html.Raw(Json.Encode(Model.Channel))); 
```

并更新内容：

```
$.post('@Url.Action("Content", "Channel")', { channelId: channel.Id }, function(result) {
     ko.mapping.fromJS(result, self.channelContent); // update the channel content

}); 
```

然后，虽然所有其他绑定似乎都可以正常工作（更新底层模型会正确更改 UI），但 enterKey 绑定会停止工作。它永远不会着火。

换句话说，只需将 channelContent 从简单的 ko.observable 更改为从 ko.mapping 初始化，就会破坏 enterKey。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:10:45.717

在黑暗中拍摄，没有更多代码或 jsfiddle 很难说。

如果您不使用 3 参数更新方法，我已经看到映射插件无法更新的情况。

试试这个。

```
$.post('@Url.Action("Content", "Channel")', { channelId: channel.Id }, 
function(result) {
     ko.mapping.fromJS(result, {}, self.channelContent); 
}); 
```

顺便说一句，我会避免使用绑定，它的表现非常糟糕。

**编辑**

实际上，这是一个 jsfiddle，无论哪种方式都对我有用。如果您可以更新以显示您的情况有何不同，我可能会提供帮助。

[http://jsfiddle.net/madcapnmckay/52aMw/4/](http://jsfiddle.net/madcapnmckay/52aMw/4/)

希望这可以帮助。

# jquery - 加载内容后，JQuery Mobile 获取加载动画消失

> ID：11109898
> 
> 赞同：0
> 
> 时间：2012-06-19T21:42:48.290
> 
> 标签：jquery, html, jquery-mobile

我正在从外部 html 文件将内容加载到 div 中。这很简单（虽然我在让内容出现时遇到了一些问题，但在这里解决了：[jquery mobile - loading content into a div](https://stackoverflow.com/questions/6332174/jquery-mobile-loading-content-into-a-div)）但是一旦加载了内容（它只是文本），中心就会出现这个旋转加载动画不会消失的屏幕。我不知道 JQuery 是否正在尝试加载其他内容或什么。

```
<script>
        $(document).ready(function()
        {
            $('#welcome').click(function(){
                console.log('clicked');
                $('#mainContent').load('welcome.html');
            $('#mainContent').trigger("pagecreate").trigger("refresh");
            });
        });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:39:42.920

我相信微调器是在你启动的时候启动的`.trigger('pagecreate')`。在任何情况下，您都可以通过运行此函数来停止微调器：

```
$.mobile.hidePageLoadingMsg(); 
```

我将在`.load()`AJAX 请求的回调函数中运行：

```
 $(document).ready(function()
    {
        $('#welcome').click(function(){
            $('#mainContent').load('welcome.html', function () {
                $(this).trigger("create");
                $.mobile.hidePageLoadingMsg();
            });
        });
    }); 
```

你应该阅读 jQuery Mobile 文档的这个页面：http: [//jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)（注意黄色的大部分，这些很重要）

您使用`document.ready`的 jQuery Mobile 不能很好地发挥作用，建议您将`pageinit`事件用于单个伪页面元素。

要真正完成这项工作，您应该使用处理所有伪页面初始化的内置`$.mobile.changePage()`函数：

```
 $(document).delegate('#welcome', 'click', function()
    {
        $.mobile.changePage('welcome.html');
    }); 
```

您还可以将一些选项传递给`$.mobile.changePage()`函数，这里是它们的列表：http: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:30:07.967

它可能不是最干净的解决方案，因为您可能正在寻找一种方法来触发导致加载动画自行隐藏的事件，对吧？

但是您可以尝试跟踪加载动画的类或 ID，然后像这样隐藏它：

```
 $(document).ready(function() {
        $('#welcome').click(function(){
            console.log('clicked');
            $('#mainContent').load('welcome.html', function(){
                $('.loadinganimationclass').hide();
            });
            $('#mainContent').trigger("pagecreate").trigger("refresh");
        });
    }); 
```

# android - 将 apk 上传到市场 (android)

> ID：11109900
> 
> 赞同：-1
> 
> 时间：2012-06-19T21:42:57.347
> 
> 标签：android, google-play

我是安卓新手。我已经开发了一个应用程序。现在想把它上传到安卓市场。你有一个很好的教程来在这个市场上上传我的 apk。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:46:55.210

首先确保您满足[所有这些要求](http://developer.android.com/guide/publishing/preparing.html)，然后按照[本](http://developer.android.com/guide/publishing/publishing.html)教程或[本](http://www.jameselsey.co.uk/blogs/techblog/publishing-your-app-to-the-android-market-a-noobs-guide/)[教程](http://mobile.tutsplus.com/tutorials/android/publish-to-android-market/)进行操作。

# php - 将 ereg_replace 更改为 preg_replace 时出错

> ID：11109901
> 
> 赞同：0
> 
> 时间：2012-06-19T21:43:09.880
> 
> 标签：php, preg-replace, ereg, ereg-replace

我正在处理旧网站并更新已弃用的 php 函数。我有以下代码，当我更改`ereg`为`preg`.

```
private function stripScriptTags($string) {
    $pattern = array("'\/\*.*\*\/'si", "'<\?.*?\?>'si", "'<%.*?%>'si", "'<script[^>]*?>.*?</script>'si");
    $replace = array("", "", "", "");
    return ereg_replace($pattern, $replace, $string);
} 
```

这是我得到的错误：

```
Fatal error: Allowed memory size of 10000000 bytes exhausted (tried to allocate 6249373 bytes) in C:\Inetpub\qcppos.com\library\vSearch.php on line 403 
```

那行代码中是否还有其他内容需要与`ereg_replace`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:12:05.853

So your regexes are as follows:

```
"'\/\*.*\*\/'si"
"'<\?.*?\?>'si"
"'<%.*?%>'si"
"'<script[^>]*?>.*?</script>'si" 
```

Taking those one at a time, you are first greedily stripping out multiline comments. This is almost certainly where your memory problem is coming from, you should ungreedify that quantifier.

Next up, you are stipping out anything that looks like a PHP tag. This is done with a lazy quantifier, so I don't see any issue with it. Same goes for the ASP tag, and finally the script tag.

Leaving aside potental XSS threats left out by your regex, the main issue seems to be coming from your first regex. Try `"'\/\*.*?\*\/'si"` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:56:20.910

获取您的内存限制值

```
 ini_get('memory_limit'); 
```

[并使用memory_get_usage()](http://www.php.net/manual/en/function.memory-get-usage.php)和[memory_get_peak_usage()](http://www.php.net/manual/en/function.memory-get-peak-usage.php)检查您的脚本 （这个需要 php 5.2 或更高版本），如果结果太低，那么您可以将其设置得更高：

```
 ini_set("memory_limit","128M"); // "8M" before PHP 5.2.0, "16M" in PHP 5.2.0, > "128M" 
```

只需放入您拥有并适用于您的脚本的任何内存即可。请记住，这限制了单个 php 进程；要全局设置它，您需要调整您的 php.ini 文件。显然，如果它需要大量运行，那么将其视为一个[猴子补丁](http://en.wikipedia.org/wiki/Monkey_patch)并开始重写它以获得更好的内存占用。

有关更多信息，请查看[核心 php.ini](http://php.net/manual/en/ini.core.php)指令，搜索*资源限制*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:58:46.147

由于允许更高的内存分配不起作用，以下函数更新如下（因为它们实际上并没有做任何事情但会导致问题）：

```
 private function stripScriptTags($string) 
{
/* $pattern = array("'\/\*.*\*\/'si", "'<\?.*?\?>'si", "'<%.*?%>'si",
   "'<script[^>]*?>.*?</script>'si");
   $replace = array("", "", "", "");
   return ereg_replace($pattern, $replace, $string);
*/
   return $string;
}

private function clearSpaces($string, $clear_enters = true)
{
/*$pattern = ($clear_enters == true) ? ("/\s+/") : ("/[ \t]+/");
  return preg_replace($pattern, " ", trim($string));
*/
  return $string;
} 
```

# makefile - 如何从路径中删除子目录

> ID：11109902
> 
> 赞同：0
> 
> 时间：2012-06-19T21:43:11.753
> 
> 标签：makefile

我对make或makefile脚本一无所知，所以我希望有人能告诉我我需要改变什么。所有其他脚本都包含一个通用的 makefile 脚本，这段特定的代码似乎负责处理源文件列表 (DLL_OBJS) 并设置目标以编译它们：

```
ifdef DLL_TARGET
DLL_REAL_OBJS=$(addprefix $(OBJDIR)/, $(DLL_OBJS:=.$(OBJ))) $(DLL_VERSION_OBJS)
DLL_OUTPUT_FILE=$(OBJDIR)/$(LIBPREFIX)$(DLL_TARGET).$(DYNAMIC_LIB_SUFFIX)
$(DLL_OUTPUT_FILE): $(DLL_REAL_OBJS) $(DLL_NONPARSED_OBJS)
    $(CC) $(CC_SHARED_LIB_FLAGS) $(LD_DYNAMIC) \
        \
        $(LD_DASH_O)$(DLL_OUTPUT_FILE) \
        \
        $(DLL_REAL_OBJS) $(DLL_NONPARSED_OBJS) \
                $(DLL_EXTRA) $(PRELIB) $(LD_FLAGS) \
        $(DLL_REAL_LIBS) $(DLL_NONPARSED_LIBS) $(LD_LIBS) $(DLL_OPTION)
ifdef EMBED_MANIFEST
ifndef SUPPRESS_MANIFEST_DLL
    $(PREMANIFEST) $(MT) \
        \
        $(MANIFESTFLAGS) /outputresource:"$(DLL_OUTPUT_FILE);#2" /manifest $(DLL_OUTPUT_FILE).manifest
endif
endif
endif # DLL_TARGET 
```

问题是如果我这样做：

```
DLL_OBJS=subdir/main 
```

然后它将尝试将 main.obj 文件写入`WINNT5.0_DBG.OBJ/subdir/main.obj`，而我希望它转到`WINNT5.0_DBG.OBJ/main.obj`. 如何修改上面的代码以从目标文件输出路径中排除源文件的子目录部分？我怀疑变量需要发生`DLL_REAL_OBJS`变化。

请注意，这`DLL_OBJS`可能是项目列表，例如：

```
DLL_OBJS=\
  subdir/main\
  subdir/foo\
  bar\
  another_source 
```

如果缺少任何重要信息，请告诉我，我会尽力用它更新我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:55:34.950

如果您使用的是 GNUMake，只需修改第二行：

```
DLL_REAL_OBJS=$(addprefix $(OBJDIR)/, $(notdir $(DLL_OBJS:=.$(OBJ)))) $(DLL_VERSION_OBJS) 
```

# php - 使用 2 个键对二维 PHP 数组进行分组？

> ID：11109903
> 
> 赞同：0
> 
> 时间：2012-06-19T21:43:16.013
> 
> 标签：php, arrays, key, type-2-dimension

我对这个有点难过。我认为最好的提问方式是举个例子。所以我有这个数组：

```
$RN[0]['Brand']  = "AC"
      ['Number'] = "1234"
      ['Note']   = "12 Volt"

$RN[1]['Brand']  = "AC"
      ['Number'] = "1235"
      ['Note']   = "12 Volt"

$RN[2]['Brand']  = "Ford"
      ['Number'] = "7722"
      ['Note']   = "12 Volt"

$RN[3]['Brand']  = "AC"
      ['Number'] = "1236"
      ['Note']   = "" 
```

我想要做的是基于 Note AND Brand 组合元素，因此这两个元素必须相同才能有资格组合在一起。所以输出会是这样的：

```
$RN[0]['Brand']   = "AC"
      ['Numbers'] = array( "1234", "1235" )
      ['Note']    = "12 Volt"

$RN[1]['Brand']   = "Ford"
      ['Numbers'] = array( "7722" )
      ['Note']    = "12 Volt"

$RN[2]['Brand']   = "AC"
      ['Numbers'] = array( "1236" )
      ['Note']    = "" 
```

感谢 DaneSoul 将我推向正确的方向。对于任何感兴趣的人，这里是最终代码 - 我从他的代码开始并做了一些修改以使其适用于我的情况：

```
$RN_new = array();
$i = 0;
$gotonext = 0;
foreach( $RN as $R ) {
    if ( isset( $RN_new ) && count( $RN_new ) > 0 ) {
        foreach( $RN_new as $key=>$RN_test ) {
            if ( $R['Brand'] == $RN_test['Brand'] && $R['Note'] == $RN_test['Note'] ) {
                $RN_new[$key]['Numbers'][] = $R['Number'];
                $gotonext = 1;
                }
            }
        }
    if ( $gotonext == 0 ) {
        $RN_new[$i]['Brand'] = $R['Brand'];
        $RN_new[$i]['Numbers'][] = $R['Number'];
        $RN_new[$i]['Note'] = $R['Note'];
        }
    $i++;
    $gotonext = 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:56:44.177

```
<?php
$RN_new = array();
$i = 0;

foreach($RN as $RN_current){
  if($RN_current['Brand'] !== $RN_new[0]['Brand'] && 
     $RN_current['Note'] !== $RN_new[0]['Note']
  ){
     $RN_new[$i] = array('Brand' => $RN_current['Brand'], 
                         'Number' => array ($RN_current['Number']),
                         'Note' => $RN_current['Note']
                   );
  }
  else{
      $index = $i-1;
      $RN_new[$index]['Number'][] = $RN_current['Number']; 
  }
  $i++;
}
?> 
```

# javascript - 为什么 Javascript 中的参数在使用 console.log 时会返回 [object Arguments]？

> ID：11109904
> 
> 赞同：1
> 
> 时间：2012-06-19T21:43:21.857
> 
> 标签：javascript

我有以下功能

```
//simple function with parameters and variable
        function thirdfunction(a,b,c,d){
            console.log("the value of a is: " + a);
            console.log("the value of b is: " + b);
            console.log("the value of c is: " + c);
            console.log("the value of d is: " + d);
            console.log("the arguments for each values are: " + arguments);
            console.log("the number of arguments passed are: " + arguments.length);
        }

        console.log("no parameter values are passed");
        thirdfunction();

        console.log("only a and b parameter values are passed");
        thirdfunction(1,2); 
```

但是，`arguments`如果我连接文本，则不显示传入的值`the arguments for each values are:`。这是为什么？

连接时我从谷歌控制台得到的输出如下；

```
no parameter values are passed
the value of a is: undefined
the value of b is: undefined
the value of c is: undefined
the value of d is: undefined
the arguments for each values are: [object Arguments]
the number of arguments passed are: 0
only a and b parameter values are passed
the value of a is: 1
the value of b is: 2
the value of c is: undefined
the value of d is: undefined
the arguments for each values are: [object Arguments]
the number of arguments passed are: 2 
```

当我不连接时，会传递以下值。

```
no parameter values are passed
the value of a is: undefined
the value of b is: undefined
the value of c is: undefined
the value of d is: undefined
[]
the number of arguments passed are: 0
only a and b parameter values are passed
the value of a is: 1
the value of b is: 2
the value of c is: undefined
the value of d is: undefined
[1, 2]
the number of arguments passed are: 2 
```

**编辑**

不知道为什么这个问题被否决了，但我遇到的问题是，当我使用该语句时`console.log("the arguments for each values are: " + arguments);`，控制台中的输出是`console.log("the arguments for each values are: " + arguments);`但是如果我通过该语句`console.log(arguments);`，控制台中的输出是`[]`or `[1, 2]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:48:28.220

编写`console.log("..." + arguments)`它将强制转换`arguments`为字符串。由于[arguments 是一个对象](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)，它的字符串表示是`[object Arguments]`. 如果您想显示该对象的内容，请尝试在不连接的情况下传递它：

```
console.log("the arguments for each values are: ", arguments); 
```

# paypal - 我可以像使用 PayPal 一样通过 Authorize.net 接受电子邮件付款吗？

> ID：11109905
> 
> 赞同：0
> 
> 时间：2012-06-19T21:43:22.837
> 
> 标签：paypal, payment-gateway, authorize.net, payment-processing

然而，据我所知，情况并非如此，我想我会要求 SO 确保绝对确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:55:21.320

你不能...

...除非你*真的很有*创意。您始终可以将交易通过电子邮件发送给您，然后通过管道传输到服务器端脚本，该脚本解析电子邮件以获取交易信息并实际处理它。但这将是骇人听闻的，并且需要处理 PCI 问题。但这仍然是可能的。

# c# - 遵循 ASP.NET 中的 DRY 原则

> ID：11109906
> 
> 赞同：5
> 
> 时间：2012-06-19T21:43:31.067
> 
> 标签：c#, asp.net, dry

我最近刚刚参与了一个经典的 ASP.NET 项目，该项目包含大量存储和读取会话和查询字符串中的值。这可能类似于以下内容：

```
Session["someKey"]=someValue; 
```

在代码的其他地方读取会话中的值。显然，这违反了 DRY 原则，因为您将在整个代码中散布文字字符串键。避免这种情况的一种方法是将所有键存储为可以在需要读取和写入会话的任何地方引用的常量。但我不确定这是最好的方法。你会建议我如何最好地处理这个问题，这样我就不会违反 DRY 原则？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:51:00.700

创建一个单独的公共类，您可以在其中定义常量，例如

```
public class SessionVars
{
   public const string SOME_KEY = "someKey";
   public const string SOME_OTHER_KEY = "someOtherKey";
} 
```

然后在代码中的任何地方都可以访问会话变量，如下所示：

```
Session[SessionVars.SOME_KEY]=someValue; 
```

通过这种方式，您可以获得 IntelliSence 和其他花里胡哨的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:49:39.780

我认为您对 DRY 的了解太多了。我更多地涉及可以包含在函数中的东西。即，不要在所有地方重复相同的五行，而是将这 5 行包装在一个函数中，并在需要的任何地方调用该函数。

作为示例，您只是在字典中设置一个值（在本例中为会话对象），这是在其中存储和检索对象的最简单方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:58:49.700

我不记得我是从哪里谦卑地*重新利用*这段代码的，但它非常好：

```
using System;
using System.Web;

namespace Project.Web.UI.Domain
{
    public abstract class SessionBase<T> where T : class, new()
    {
        private static readonly Object _padlock = new Object();

        private static string Key
        {
            get { return typeof(SessionBase<T>).FullName; }
        }

        public static T Current
        {
            get
            {
                var instance = HttpContext.Current.Session[Key] as T;

                lock (SessionBase<T>._padlock)
                {
                    if (instance == null)
                    {
                        HttpContext.Current.Session[Key] 
                          = instance 
                          = new T();
                    }
                }
                return instance;
            }
        }

        public static void Clear()
        {
            var instance = HttpContext.Current.Session[Key] as T;
            if (instance != null)
            {
                lock (SessionBase<T>._padlock)
                {
                    HttpContext.Current.Session[Key] = null;
                }
            }
        }
    }
} 
```

它背后的想法是双重的。创建的类型应该是您需要的唯一类型。它基本上是一个大的强类型包装器。所以你有一些你想继续扩展信息的对象：

```
public class MyClass
{
    public MyClass()

    public string Blah1 { get; set; }
} 
```

然后在您扩展的道路上`MyClass`，您不想记住所有键值，将它们存储在 AppSettings 或静态类中的 Const 变量中。您只需定义要存储的内容：

```
public class MyClassSession : SessionBase<MyClass>
{ 
} 
```

在您的程序中的任何地方，您只需使用该类。

```
// Any Asp.Net method (webforms or mvc)
public void SetValueMethod()
{
  MyClassSesssion.Current.Blah1 = "asdf";
}

public string GetValueMethod()
{
  return MyClassSession.Current.Blah1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:55:36.307

或者，您可以将此会话对象的访问权限放在一个基本页面中并将其包装在一个属性中：

```
class BasePage : Page
{
   ...
   public string MySessionObject
   {
      get
      {
         if(Session["myKey"] == null)
            return string.Empty;
         return Session["myKey"].ToString();
      }
      set
      {
          Session["myKey"] = value;
      }
   }
   ...
} 
```

在这里，您正在重复`myKey`字符串，但它被封装到属性中。如果您想尽量避免这种情况，请使用键创建一个常量并替换字符串。

# iphone - 在 StoryBoard 中使用 push segue，如何更改为上一个视图

> ID：11109907
> 
> 赞同：0
> 
> 时间：2012-06-19T21:43:31.400
> 
> 标签：iphone, xcode, view, back

我正在创建一个应用程序，如果发生某些事情，它会切换回上一个屏幕。

应用程序中几乎没有真正的代码，当它执行时它与之前的视图无关，但以防万一，这里是整个 .m： http: [//pastie.org/4111440](http://pastie.org/4111440)

```
[self.navigationController popViewControllerAnimated:YES]; 
```

这^^给了我EXC_BAD_ACCESS“嵌套弹出动画可能导致导航栏损坏”

如果您需要更多信息，请发表评论。谢谢！

如果您真的想提供帮助，我会向您发送一个指向整个 .xcodepproj 的链接或整个产品的扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:26:04.590

我认为消息说明了一切：“嵌套弹出动画可能导致导航栏损坏”。

看起来您正在使用动画进行弹出，同时正在使用动画进行弹出。我建议您找出一种不同的方式来构建代码，这样您就不会出现双重弹出。

如果这不可能，您可能需要延迟弹出以防止它们重叠。

```
- (void)doPop
{
    [self.navigationController popViewControllerAnimated:YES];
}

…

// At the previous pop point.
[self performSelector:@selector(doPop) withObject:nil afterDelay:0.5]; 
```

# android - 动画后暂停

> ID：11109911
> 
> 赞同：2
> 
> 时间：2012-06-19T21:43:58.097
> 
> 标签：android, animation

我有一个可以执行 3 种不同动画的 AnimationSet。动画结束后，我想暂停应用程序 3 秒，然后一切都恢复到开始位置。

我怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:18:39.177

好吧，有一个`animation.hasEnded()`函数可以用来测试动画是否完成。当返回 true 时，您可以使用 java 计时器在您想要等待的毫秒数之后安排任务。AnimationSet 也有一个函数来获取动画的持续时间。

看看... [Animation](http://developer.android.com/reference/android/view/animation/Animation.html) 和[AnimationSet](http://developer.android.com/reference/android/view/animation/AnimationSet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:22:14.357

我认为您可能可以通过[AnimationListener](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html) Set one 以某种方式实现此效果，以在动画结束时获取回调并添加延迟的可运行对象，它将所有内容移回适合您的位置。但是，我认为这样做可能会有些复杂，因为它需要将 fillAfter 设置为 true，然后手动将视图放置在 Runnable 中的原始位置，这会延迟发布。

我认为获得相同效果的更直接的解决方案是简单地向您的集合添加第 4 个动画，该动画在所有其他动画都完成后延迟开始。使这第4个动画持续3秒，并使其无可见效果（即增长0%）。这应该为您建立 3 秒的暂停，并且仍然可以处理将所有视图移回其原始位置（无需手动执行）。使用此解决方案，您将 fillAfter 设置为 false，这将导致您的视图“快速恢复”。通过添加另一个持续 3 秒但没有可见效果的动画，这对用户来说就像是一个暂停。

# xcode - 在 XCode 4.3 中，如何搜索框架和库的其他路径以链接到我的项目？

> ID：11109914
> 
> 赞同：0
> 
> 时间：2012-06-19T21:44:12.830
> 
> 标签：xcode, xcode4.3

我正在使用 XCode 4.3.3 并希望将自定义框架（在我的情况下为 OCMock）包含到我的 Mac OS X 项目中。我现在已经将 OCMock.framework（2.0 版）放入`/Library/Frameworks`其中，当我打开要链接到 OCMock 的单元测试目标的构建阶段选项卡时，我可以选择在此处添加框架：

![链接框架](../Images/e15c303852f1c50dfd701decf274da1f.png)

当我单击 + 按钮时，我会看到一个搜索对话框，我可以使用它来搜索框架。`/Library/Frameworks`此处未搜索。

![搜索框架](../Images/d8529b984d843b970d91a238c524400d.png)

它只是搜索 XCode.app 中的 frameworks 目录和我正在构建项目的 Mac OS X 10.7 SDK。

那么，如何使用更多位置扩展搜索对话框，例如，`/Library/Frameworks`以便我可以轻松搜索并包含 OCMock.framework？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:37:04.130

不要将框架放在系统目录中。相反，将它拖到 Xcode 中的 Project Navigator 中，并告诉 Xcode 将文件复制到项目文件夹中。将框架添加到项目文件后，您可以将其从导航器拖到 Link Binary With Libraries 构建阶段。

# php - tinymce 保存问题 - PHP

> ID：11109915
> 
> 赞同：0
> 
> 时间：2012-06-19T21:44:12.877
> 
> 标签：php, ajax, forms, asynchronous, tinymce

问题视频：[http ://www.youtube.com/watch?v=Y6RZHMQueDc&feature=youtu.be](http://www.youtube.com/watch?v=Y6RZHMQueDc&feature=youtu.be)

当我按下提交表单按钮时，我调用 onsubmit 方法，该方法使用 ajax 发送数据（异步 false）。

在 ajax 调用返回时，它会回显 tinymce 文本区域的内容。如果我按一次保存，则没有返回任何内容（但调用成功并返回我的测试回声），我第二次按保存，然后 tinymce textarea 中有一些内容供 ajax 返回。

是否有一个我错过了某个地方的设置，其中 textarea 必须在每次击键时更新或类似的东西？或者在保存时，textarea 被同步推送到 textarea 中，然后允许保存完成其工作而不是异步？

有任何想法吗？

以下是我目前使用的设置：

```
tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "jbimages,autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist",
        language : "en",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,|,jbimages",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,
        theme_advanced_resize_horizontal : false,

        // This is required for the image paths to display properly
        relative_urls : false,

        // Style formats (OPTIONAL)
        style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
        ]

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:56:51.977

在提交之前调用 tinyMCE.triggerSave();

# .net - Sitecore Analytics Robots SessionTimeout 导致会话过早超时

> ID：11109919
> 
> 赞同：1
> 
> 时间：2012-06-19T21:44:27.867
> 
> 标签：.net, sitecore

在我们的一个项目中，我们遇到了随机会话超时问题。根据最近的发现，我注意到 Sitecore Analytics.Robots.SessionTimeout 可能是导致它的原因。

我们注意到在随机会话超时时，超时值设置为 1 分钟而不是我们的 120 分钟。

在搜索所有配置文件后，我们注意到只有一个配置的超时设置为 1 分钟。

我们认为通过将分析机器人会话超时增加到 120 分钟将解决我们的随机超时问题，但我的问题是，通过允许机器人会话存活 120 分钟而不是 1 分钟，这是否会对性能产生任何负面影响或安全问题？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:55:27.150

这对我来说似乎是一个不同的问题......我认为机器人设置为 1 分钟会话不是问题。你说这个问题是“随机的”，但有没有可能真正发生的事情是一些网站访问者被错误地识别为机器人？

我认为您不会通过更改机器人超时时间看到任何性能影响，但这将是治疗症状而不是找到真正的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T00:11:34.453

我已经用 Sitecore 记录了这个问题，这是他们对这个问题的回应。

> 我不认为该行为应被视为错误，因为 Sitecore CMS 旨在与 ASP.NET WebForms 技术一起使用。在使用 Web 表单时，机器人检测依赖于页面中的控件。不能在 ASP.NET MVC 应用程序中使用它是很自然的，但是有一个简单的解决方案 - 将以下代码放入元素中：

```
<%
if (Context.Diagnostics.Tracing || Context.Diagnostics.Profiling)
{
  Response.Write("<!-- Visitor identification is disabled because debugging is active. -->");
}
else if (Tracker.IsActive && (Tracker.Visitor.VisitorClassification == 925))
{
  Response.Write("<link href=\"/layouts/System/VisitorIdentification.aspx\" rel=\"stylesheet\" type=\"text/css\" />");
}
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-06T00:35:22.407

这发生在我们身上是因为跟踪预防和广告拦截器阻止了[Sitecore 的机器人检测组件](https://doc.sitecore.com/developers/91/sitecore-experience-platform/en/visitor-identification-using-the-robot-detection-component.html)( `VisitorIdentification.js`) 检测人类行为。

为了防止登录用户被错误分类为机器人，我们添加了以下登录后代码，以将任何错误分类的访问者标记为人类：

```
using Sitecore.Analytics;
using Sitecore.Analytics.Core;

// ...

private static void IdentifyUserAsHuman()
{
    const int HumanVisitorClassification = 0;

    var currentSession = Tracker.Current.Session;
    var isClassifiedAsHuman = ContactClassification.IsHuman(currentSession.Contact.System.Classification);
    if (!isClassifiedAsHuman)
    {
        currentSession.SetClassification(HumanVisitorClassification, HumanVisitorClassification, true);
    }
} 
```

# javascript - Highcharts - 重绘空图表

> ID：11109921
> 
> 赞同：1
> 
> 时间：2012-06-19T21:44:30.723
> 
> 标签：javascript, highcharts

我在网站上有一个渲染的[Highcharts](http://www.highcharts.com/)图表，我需要在一段时间后清空它。现在我用这样的代码尝试过，但图表不会自己清空/没有任何变化......

```
var chart = new Highcharts.Chart({
// Chart settings
});

// Some other JS
function emptyChart(chart) {
    chart.series = [];
    chart.redraw();
}

// Some code and a function executes this function after some time
emptyChart(chart); 
```

我在 Firebug 控制台或其他地方也没有收到任何错误，只是没有任何反应......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:15:27.620

一个干净的方法来做到这一点：

```
function emptyChart(chart) {
    while(chart.series.length !=0) {
        chart.series[0].hide();
        chart.series[0].remove();
    }
} 
```

如果您希望轴也消失，请使用“showEmpty: false”选项（检查[xAxis.showEmpty](http://api.highcharts.com/highcharts#xAxis.showEmpty)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:00:51.267

我猜，你想要这样的东西，

```
chart.series[0].data = [];
chart.redraw(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T22:05:55.613

我已经第二次遇到这个问题，现在我终于找到了一个简单但目前唯一可行的解​​决方案：只需创建一个新的空 Highchart：

```
function emptyChart(chart) {
    chart = new Highcharts.Chart(/* chartOptions */);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-16T08:48:02.607

您也可以使用 setData([])

[http://api.highcharts.com/highcharts#Series.setData()](http://api.highcharts.com/highcharts#Series.setData())

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T21:49:04.560

只是一个猜测，但尝试更改为`chart.series = {};`?

# mysql - Yii CDbCriteria 查询匹配一张表中的多行

> ID：11109923
> 
> 赞同：0
> 
> 时间：2012-06-19T21:44:37.270
> 
> 标签：mysql, yii

我试图弄清楚如何使用 Yii 的 CDbCriteria 构建查询，该查询等效于以下内容：

```
 SELECT 
        * 
FROM 
        user u 
JOIN ( 
        SELECT * 
        FROM skill_assessment s 
        WHERE s.skill = 'HTML' 
        AND s.score >= 80 
) b ON 
        (u.id = b.userId) 
JOIN ( 
        SELECT * 
        FROM skill_assessment s 
        WHERE s.skill = 'CSS3' 
        AND s.score >= 80
) c ON 
        (u.id = c.userId);
etc... 
```

这是我到目前为止所拥有的，这是行不通的：

```
$criteria = new CDbCriteria();
$criteria->alias = "u";
$criteria->select = "*";
$criteria->join = "JOIN skill_assessment s ON (u.id=s.userId)";
for($i = 0; $i < count($skill_filters); $i++) {
    $criteria->addCondition("s.skill='".$skill_filters[$i]->skill."' AND s.score >= ".$skill_filters[$i]->level);
}

$users = UserModel::model()->findAll($criteria); 
```

任何帮助将不胜感激。提前致谢。

编辑：我能够将 sql 查询构建为字符串并使用 findAllBySql，它返回了与我的搜索条件匹配的正确 UserModel，问题是我无法让它返回相关的 SkillAssessmentModel。他们也不会返回初始查询，如下所示：

```
$users = UserModel::model()->with('skill_assessments')->findAllBySql($sql); 
```

如果我得到这样的结果：

```
$users = UserModel::model->findAllBySql($sql);
foreach($users as $user)
{
     $user->skill_assessments = $user->getRelated('skill_assessments');
} 
```

关于如何获得这些相关模型的任何想法？奇怪的是，在我的应用程序的其他地方，如果我这样做，我可以获得相关模型：

```
$user = UserModel::model->findByPk($id);
$user->skill_assessments->getRelated('skill_assessments'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:07:02.483

`addCondition`默认情况下，第二个参数是`'AND'`。这是你想要的？可能您应该定义并在`'OR'`条件`$operator`周围添加大括号。但在您的情况下`addCondition`，将应用于*user*表，而不是*JOIN*。

我认为这应该适合你：

```
$criteria = new CDbCriteria();
$criteria->alias = "u";
$criteria->together= "skill_assessment";
$where = array();

for($i = 0; $i < count($skill_filters); $i++) {
    $where[] = "(s.skill='".$skill_filters[$i]->skill."' AND s.score >= ".$skill_filters[$i]->level . ')';
}
$criteria->join = 'JOIN skill_assessment s ON (u.id=s.userId' . ( $where ? ( ' AND (' . join( ' OR ', $where ) . ')' ) : '') . ')';

$users = UserModel::model()->findAll($criteria); 
```

像这样获取_skill_assessment_：

```
foreach( $users->skill_assessment as $skill_assessment )
{
    echo $skill_assessment->userId;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:22:34.080

在这个级别保持简单：

```
$sql="select * from mytable where id = :id";
$cmd = Yii::app()->db->createCommand($sql)->bindParam("id", $res_id);
$cmd->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:45:11.707

非常感谢鲍里斯·贝伦斯基！你的建议不是*我*所需要的，但它确实让我得到了我所需要的。这是我最终得到的结果：

```
$str = "abcdefghijklmnopqrstuvwxyz";
            $idxs = str_split($str);

            $criteria = new CDbCriteria();
            $criteria->alias = "u";
            $joins = array();
            for($i = 0; $i < count($skill_filters); $i++)
            {
                $joins[] = " JOIN (SELECT * FROM skill_assessment s WHERE s.skill = '" . $skill_filters[$i]->skill ."' AND s.score >= " . $skill_filters[$i]->level . ") " . $idxs[$i] . " ON (u.id = " . $idxs[$i] . ".userId) ";
            }

            $criteria->join = join(' ', $joins);
            $users = UserModel::model()->findAll($criteria);
            foreach($users as $user)
            {
                $user->skill_assessments = $user->getRelated('skill_assessments');
            } 
```

真正关键的部分是 $joins 数组。这将允许您获取与 Skill_assessments 表中的所有行匹配条件匹配的所有用户。

此外，我可能会在普通视图中懒惰地加载视图中的技能评估，但我现在需要获取每个用户的所有技能评估，以便在与用户的 ajax 响应中将它们传回。

# javascript - 预滚动 CSS 与后滚动不同

> ID：11109929
> 
> 赞同：0
> 
> 时间：2012-06-19T21:44:55.020
> 
> 标签：javascript, jquery, html, css

滑动工作小提琴但滚动前的宽度不正确在[这里](http://fiddle.jshell.net/chrisfrisina/An39n/)。[正确的布局，但这里](http://fiddle.jshell.net/chrisfrisina/An39n/1/)没有滚动功能。仍在学习 CSS，但由于某种原因，如果我删除了以下固定浮动侧 CSS：

```
#commentWrapper { 
  position: absolute;
  margin-left: 35px;
  left: 450px;
  width: 280px;
}

#comment {
  position: absolute;
  top: 0;
  /* Can include margins in the sliding effect here */
}

#comment.fixed {
  position: fixed;
  top: 0;
} 
```

，侧面的位置是正确的，但是当您向下滚动时，它不会停留在其固定位置。保留代码，由于某种原因，CSS会减小侧面的宽度，但是一旦向下滚动，它就会变得正常。如何修复它以使其以正确的位置和宽度加载到一侧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:05:23.550

我更新了你的 CSS。 [看一看](http://fiddle.jshell.net/An39n/3/)。我希望这可以解决您的问题！

我更改的相关代码：

新的：

```
#commentWrapper { 
float:right;
margin-left: 10px;
margin-right: 10px;
left: 450px;
width: 25%;
} 
```

老的：

```
#commentWrapper { 
    position: absolute;
    margin-left: 35px;
    left: 450px;
    width: 280px;
} 
```

# linux - 在linux任务调度器中，定期调用什么函数来做调度工作？

> ID：11109930
> 
> 赞同：0
> 
> 时间：2012-06-19T21:45:04.227
> 
> 标签：linux, task, scheduler

我花了很多时间弄清楚代码级别的功能，现在我真的很困惑。

首先在 core.c 中，这个函数`__schedule()`似乎`schedule()`是最有前途的。通常在 中`__schedule()`，我发现了`hrtick_clear(rq)`似乎是计时器的代码。然后也在 中`__schedule()`，将调用该函数，该函数`next = pick_next_task(rq)`将尝试查找要安排的下一个任务。对于普通任务，使用 CFS 算法。然后我进入 fair.c 文件检查 pick_next_task_fair 函数。通过跟踪该函数，我看到`hrtick_start(rq, delta)`已被调用。

所以显然似乎有一个基于hrtick的定时器用于周期性地激活调度算法。但奇怪的是，在core.c文件中，我实在找不到定时器是如何配置为周期性调用`__schedule()`的。`schedule()`我没有看到定时器被配置为调用这个函数。

是否使用了其他功能？linux任务调度高手能否给个提示：>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:51:00.663

没有什么特别的需要。定时器只是触发一个中断，中断逻辑已经处理了当你从中断返回时要运行哪个任务。[例如，参见entry_32.S](http://lxr.linux.no/#linux+v2.6.30/arch/x86/kernel/entry_32.S#L358)中的这段代码，它处理从中断返回：

```
 358    ENTRY(resume_userspace)
 359        LOCKDEP_SYS_EXIT
 360        DISABLE_INTERRUPTS(CLBR_ANY)    # make sure we don't miss an interrupt
 361                                        # setting need_resched or sigpending
 362                                        # between sampling and the iret
 363        TRACE_IRQS_OFF
 364        movl TI_flags(%ebp), %ecx
 365        andl $_TIF_WORK_MASK, %ecx      # is there any work to be done on
 366                                        # int/exception return?
 367        jne work_pending
 368        jmp restore_all
 369    END(ret_from_exception)
 ...
 615    work_pending:
 616        testb $_TIF_NEED_RESCHED, %cl
 617        jz work_notifysig
 618     work_resched:
 619        call schedule 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:44:39.347

Linux 内核中实际上有两个调度程序，或者说是两个调度代码。有一个核心调度程序，您自己提到过，它称为 schedule()，它调用 __schedule()。schedule() 从内核中的许多点调用，例如在系统调用之后等。

还有另一个名为 scheduler_tick() [这也位于 core.c] 的调度程序代码，它是一个周期性调度程序，由计时器调用code(timer.c) 通过中断频率为 HZ，即 scheduler_tick() 在一秒内调用 HZ 次。HZ 取决于硬件，其值在 100-1024 之间变化。scheduler_tick() 调用处理器上当前任务所属的调度类的 task_tick()。

# java - “BasicNameValuePair”参数未从 Android 传递到 PHP

> ID：11109934
> 
> 赞同：2
> 
> 时间：2012-06-19T21:45:33.453
> 
> 标签：java, android, mysql, parameters

我在 ListActivity 上得到“未找到项目”吐司。

注意：当我将 PHP 代码更改为“从项目中选择 *”时，会显示整个表格。但是当我尝试使用 Android/Java 中的 param/cat_id 值过滤它时，我得到一个空白

这是代码，首先：php

```
 <?php
      $sql=mysql_query("SELECT * FROM items WHERE cat_id = ' ".$_REQUEST['cat_id']." '");
    while($row=mysql_fetch_assoc($sql))
    $output[]=$row;
print(json_encode($output));
mysql_close();
 ?> 
```

（我已经确认“cat_id”，我通过捆绑传递到以下活动的值就是它需要的值。）

安卓/Java：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    cat_id = getIntent().getExtras().getString("category_id");
    items = new ArrayList<String>();

    new task().execute();

}

 class task extends AsyncTask<String, String, Void> {

    @Override
    protected Void doInBackground(String... params) {
        String url_select = "http://www.---.com/---/items.php";

        param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("category_id", cat_id));

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

         //

        } 
```

以及更远的下方

```
 protected void onPostExecute(Void v) {

        String item;
        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                item = json_data.getString("item");

                items.add(item);
            }
        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), "No Items Found",
                    Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        } 
```

我在 ListActivity 上得到“未找到项目”吐司。

注意：当我将 PHP 代码更改为“从项目中选择 *”时，会显示整个表格。但是当我尝试使用 Android/Java 中的 param/cat_id 值过滤它时，我得到一个空白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:55:47.880

在您编写的 Java 代码上

```
 param.add(new BasicNameValuePair("category_id", cat_id)); 
```

但是在你写的 PHP 代码上

```
$_REQUEST['cat_id'] 
```

你应该把它改成

```
$_REQUEST['category_id'] 
```

# javascript - Javascript 使用一个函数从另一段代码中取消 POST

> ID：11109950
> 
> 赞同：0
> 
> 时间：2012-06-19T21:46:39.130
> 
> 标签：javascript

好的，在我的代码中，例如，这个：

```
$('.follow').click(function(){
        var myself = $(this);
        var data = {
            id: this.getAttribute('data-id')
        }
        $.post('/users/setFriend', data, function(msg){
            myself.text(msg);
            myself.attr('data-status-friends', (myself.attr('data-status-friends').toLowerCase() == 'follow') ? 'following' : 'follow');
        });
    }) 
```

但是，我在某些元素上放置了一个“auth”类，如果用户已注销，则运行以下 JS：

```
$('.auth').click(function(e){
    e.preventDefault();
    alert('not logged in');
}); 
```

这适用于大多数元素，但是对于上面的 POST，它似乎仍然在执行 POST。如果单击 .auth，我如何才能最终取消由其他代码位触发的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:08:20.310

而不是停止事件，我认为更好的方法是要么简单地将事件放入不应该在不登录的情况下可行的元素中，要么使用变量跟踪 JS 代码中的身份验证状态并在执行之前检查它行动。如果您正在构建客户端 MVC 风格的应用程序，后者可能是一种更好的使用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:19:38.757

我认为我们不应该在这里谈论传播或 defaultAction 预防。关键是您创建了两个*不同*系列的事件处理程序：一个附加到`.follow`元素，另一个 -附加到`.auth`元素。当然，如果一个元素有两个类，点击它会自动触发*两个*处理程序——它们都将附加到这个元素（因此没有传播）。

我认为这里最简单的解决方案是在`click`为元素分配`.auth`类时从元素中删除处理程序。

或者，或者，您可以检查处理函数`$(this).hasClass('auth')`中的条件-如果是这种情况，请立即检查。`.follow``return false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:44:37.750

使用不同的解决方案集，您可能会遇到两个问题。

*   听众依附于不同的元素，与它们应有的相反
*   侦听器被附加到同一个元素

**不同的元素**

您的处理程序出现故障，交换它们以便 e.stopPropogation() 位于内部（子）元素上，而 $.post() 调用位于外部（父）元素上。

**相同元素**

如果侦听器位于同一元素上，则 e.stopPropogation() 和 e.preventDefault() 都不会执行您希望的操作，因为事件侦听器仍将在同一元素上触发。

[停止传播（）](http://api.jquery.com/event.stopPropagation/)

> 描述：防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

根据[DOM Level 2 Spec](http://www.w3.org/TR/DOM-Level-2-Events/events.html)的传播仍然会在同一个元素上执行所有侦听器，但不会执行附加到父元素的事件：

> 如果捕获的 EventListener 希望阻止对事件的进一步处理，它可以调用 Event 接口的 stopProgagation 方法。这将阻止事件的进一步分派，尽管在同一层次结构级别注册的其他 EventListener 仍将接收该事件。

[防止默认（）](http://api.jquery.com/event.preventDefault/)

> 说明：如果调用该方法，则不会触发事件的默认动作。

默认操作基于正在操作的元素 ( [W3C](http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120614/#event-flow-default-cancel) )。对于链接，这将是指向 href="" 值的重定向、将其聚焦的输入元素等。这不是您想要的，因为您很可能不是“默认行为”。

一种选择是将调用 $.post 的处理程序附加到 DOM 上更高的元素。

```
$('.follow').parent().click(function(e){e.stopPropogation()}) 
```

您可能必须更改目标 HTML，以便有一个内部（子）和外部（父）元素来附加您的事件。目标是让 $.post 处理程序作为外部（父）和内部（子）处理程序取消事件。

另一种选择是添加检查以查看您的元素上是否存在其他类。

```
$('.follow').click(function(){
    var myself = $(this);

    if(!$(this).hasClass('.auth')){
        var data = {
            id: this.getAttribute('data-id')
        }
        $.post('/users/setFriend', data, function(msg){
            myself.text(msg);
            myself.attr('data-status-friends', (myself.attr('data-status-    friends').toLowerCase() == 'follow') ? 'following' : 'follow');
        });
    }
}); 
```

# list - 剔除列表以在 Python 中找到最大的非相交成员

> ID：11109961
> 
> 赞同：0
> 
> 时间：2012-06-19T21:47:17.067
> 
> 标签：list, python, list-comprehension, intersection

列表 L 中的每个元素都是一个形式为 (fields, size) 的元组。例如

```
L = [ (['A','B'], 5), (['A'], 6), ('C', 1)] 
```

我想剔除该列表，使其仅包含不相交的成员，并且剩余的每个成员都大于它可能相交的任何其他成员。所以示例列表 L 将简化为

```
L = [ (['A'], 6), ('C', 1)] 
```

目前我已经这样实现了：

```
def betterItem(x, y):
    return (x != y and
            set(x[0]) & set(y[0]) and
            x[1] > y[1])

for i in range(len(L)-1):
    L[:] = [x for x in L for y in L if betterItem(x, y)] 
```

有没有更好/更快/更 Pythonic 的方式来做到这一点？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:43:42.447

```
L = [(['A','B'], 5), (['A'], 6), (['C'], 1)]

# sort by descending value
L.sort(key=lambda s:s[1], reverse=True)

# keep track of what members have already occurred
seen = set()

# Cull L - ignore members already in `seen`
# (Because it is presorted, already-seen members must have had a higher value)
L = [seen.update(i) or (i,j) for i,j in L if seen.isdisjoint(i)] 
```

结果是

```
[(['A'], 6), (['C'], 1)] 
```

（这个列表推导使用了一些技巧：`seen.update`总是返回`None`，并且`None or x`总是返回`x`——所以`seen.update(i) or (i,j)`返回元组`(i,j)`，其副作用是更新可见成员列表。）

由于`sort`, 而不是 O(n^2)，这应该是 O(n log n)。

# ruby - 仅当外部源发生更改时，如何快速扫描我的数据库并更新它？

> ID：11109963
> 
> 赞同：0
> 
> 时间：2012-06-19T21:47:26.637
> 
> 标签：ruby, ruby-on-rails-3

所以我有一个`Links`链接表，最初是使用 Nokogiri 填充的。

我刚刚爬取了一个站点，获取了站点中的所有链接并将它们转储到一个表中。

我不希望其中一些更改过于频繁——也许每月一次。有些永远不会改变。但基本上我想运行我的方法，然后执行 Nokogiri 并返回链接列表。

我想根据我的数据库检查每个链接，并且仅在找到不在数据库中的链接时添加新记录。

我该如何以最有效的方式做到这一点？

假设我有一系列`new_links`从 Nokogiri 获得的最新链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:25:33.907

仅插入新链接

```
#Remove found links from new_links array and insert them into DB
links_to_insert = new_links - Link.where(['url IN (?)', new_links]) 
links_to_insert.each { |link| Link.create!(link) } 
```

优雅的 ？

# android - 为 Android 应用组织可编辑内部数据文件的最佳方式？

> ID：11109964
> 
> 赞同：0
> 
> 时间：2012-06-19T21:47:42.347
> 
> 标签：android

我想使用 xml 文件中的数据来填充 AutoCompleteTextViews 和 MultiAutoCompleteTextViews，并且我还希望能够在应用程序运行时编辑此文件，以便使用新信息更新 AutoCompleteTextViews。解决此问题的最佳方法是什么？我知道 /res 文件夹中的文件在运行时无法写入，并且写入外部存储比访问内部存储要慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:49:50.810

一种方法是创建自己的 SQLite 数据库。

不过，我会确保你所做的事情的范围值得一个数据库。

另一种选择是使用 keyValuePairs 创建一个平面文件，并以视图的 ID 作为键查找值。这可以存储在外部存储器中。对于文本文件，访问速度不应该是一个大问题。

# javascript - 根据字符串值从数组中删除

> ID：11109965
> 
> 赞同：1
> 
> 时间：2012-06-19T21:47:54.257
> 
> 标签：javascript, jquery

我已经定义了一个这样的数组：

```
var myArray = {myNewArray: ['string1' , 'string2' , 'string3']}; 
```

我想遍历数组并删除与特定字符串值匹配的元素。jQuery/javascript 中是否有一种干净的方法来实现这一点？

还是我需要遍历每个元素，检查它的值，如果它的值与比较的字符串匹配，获取它的 id，然后使用该 id 从数组中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:56:05.113

[这是一个显示您的解决方案的 JSFiddle](http://jsfiddle.net/h6dMW/)

```
var strings = ['a', 'b', 'c', 'd'];
document.write('initial data: ' + strings);
var index = 0;
var badData = 'c';
for(index = 0; index < strings.length; index++)
{
    if(strings[index] == badData)
    {
        strings.splice(index, 1);                 
    }        
}

document.write('<br>final data: '+ strings);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:55:42.260

JavaScript 数组有一个`indexOf`方法可以用来查找一个元素，然后`splice`可以用来删除它。例如：

```
var myNewArray = ['A', 'B', 'C'];

var toBeRemoved = 'B';
var indexOfItemToRemove = myNewArray.indexOf(toBeRemoved);
if (indexOfItemToRemove >= 0) {
    myNewArray.splice(indexOfItemToRemove, 1);
} 
```

该代码执行后，`myNewArray`是`['A', 'C']`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:59:47.373

您可以使用[Array.filter](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)。

```
filteredArray = myArray.myNewArray.filter(function(el){
  return el === "string";
}); 
```

您可以在[Kangax 的兼容表](http://kangax.github.com/es5-compat-table/)中检查兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T21:55:39.123

您可以使用过滤数组`$.grep`

```
var myArray = {myNewArray: ['string1' , 'string2' , 'string3']};
myArray = { myNewArray: $.grep(myArray.myNewArray,function(val){
    return val !== "string1";
})};
//console.log(myArray); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T21:55:43.030

```
my newARR = oldArr.splice( $.inArray( removeItem , oldArr ) , 'deleteThisString'); 
```

# iphone - presentModalViewController 不工作？

> ID：11109967
> 
> 赞同：0
> 
> 时间：2012-06-19T21:48:00.457
> 
> 标签：iphone, uiviewcontroller, presentmodalviewcontroller

我正在使用两个视图控制器制作应用程序。当我处理我的第一个视图时，我可以使用按钮“设置”转到另一个视图，连接到此按钮的方法如下所示：

```
-(IBAction)Settings:(id)sender{

[self presentModalViewController:settingsHandle animated:YES]; 
```

settingsHandle 是第二个视图类的对象，在加载第一个视图时分配。

当我在第二个视图中并且我调用包含 NSTimer 对象的方法时，我的问题就开始了。此方法在 hmmm 期间有效，可以说是 30 秒，但也可以是 5 分钟，此方法的结果是调用第三个视图的另一个视图。

在第二个视图中等待此函数的结果时一切正常。结果是我在第三个视图中。

当方法工作期间，我从第二个视图（使用`[self dismissModalViewControllerAnimated:YES];`）转到第一个视图时，我可以看到该方法已经完成（使用 NSLOG）但`[self presentModalViewController:thirdview animated:YES];`没有工作，只是没有任何反应。

所以总结一下：

在第二个视图中等待结果（成功上传第三个视图） 在第一个视图中等待结果（失败没有任何反应）

我的目标是从第一眼看到它发生！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:28:06.350

你不能提出一个`ModalViewController`被`ViewController`解雇的人。因此，您需要跟踪可见`ViewController`并`presentModalViewController`从那里调用。在您的场景中，最简单的解决方案是让您`NSTimer`在第一个调用方法`ViewController`时像这样

```
- (void)presentViewController:(NSTimer *)timer
{
    if(self.modalViewController == nil)
        [self presentModalViewController:settingsHandle animated:YES];
    else
        [self.modalViewController presentViewController];
} 
```

如果您在 2\. 中创建 NSTimer，您`ViewController`当然需要对第一个`ViewController`. 你可以像这样传递这个参考

```
-(IBAction)Settings:(id)sender{
    settingsHandle.myParentViewController = self; //You need to create this var in settingsHandle
    [self presentModalViewController:settingsHandle animated:YES];
    //...
} 
```

# ant - 将参数列表传递给 Exec？

> ID：11109968
> 
> 赞同：2
> 
> 时间：2012-06-19T21:48:17.097
> 
> 标签：ant, gradle

我想在我的 Exec 任务中执行以下操作

```
commandLine = [ 'my_executable_path\\' + executable.exe ,
                 argument1,
                 argument2,
                 argument3 ] 
```

有可能做这样的事情吗？

```
//...dynamic creation of a List/Array/whatever

    commandLine = [ 'my_executable_path\\' + executable.exe ,
                     myArgumentsList ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:38:05.850

我很困惑为什么会有这么多这样的问题。[DSL 参考](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Exec.html)是否太难找到或难以理解？我们可以改进什么来让您自己回答这些问题？

无论如何，最干净的解决方案是：

```
task exec(type: Exec) {
    executable = "/path/to/executable"
    args = myArgumentsList
} 
```

# objective-c - CGFloat 还是 CGFloat *？

> ID：11109984
> 
> 赞同：1
> 
> 时间：2012-06-19T21:49:02.817
> 
> 标签：objective-c, ios, xcode, cocoa-touch, uifont

我收到一个我不明白如何解决的错误。错误是：

```
Sending 'CGFloat' (aka 'float') to parameter of incompatible type 'CGFloat *' (aka 'float *'); 
```

对于线路：

```
[xlabel.text drawAtPoint:CGPointMake(labelRect.origin.x, labelRect.origin.y) 
                forWidth:labelRect.size.width 
                withFont:myFont 
             minFontSize:5.0 
          actualFontSize:myFont.pointSize 
           lineBreakMode:UILineBreakModeWordWrap 
      baselineAdjustment:UIBaselineAdjustmentAlignCenters]; 
```

错误指向`actualFontSize:myFont.pointSize`。`myFont`是一个`UIFont`。我是这样设置的：`UIFont *myFont = [UIFont systemFontOfSize:17.0];`

该错误是什么意思以及有关如何修复它的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:55:57.257

从[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/drawAtPoint:forWidth:withFont:minFontSize:actualFontSize:lineBreakMode:baselineAdjustment:)：

> actualFontSize 在输入上，指向浮点值的指针。返回时，此值包含用于呈现字符串的实际字体大小。

这意味着您必须通过引用变量来传递指针。为此，您可以使用 & 运算符`&`

例子：

```
CGFloat outSize = 0;
[xlabel.text drawAtPoint:CGPointMake(labelRect.origin.x, labelRect.origin.y) 
                forWidth:labelRect.size.width 
                withFont:myFont 
             minFontSize:5.0 
          actualFontSize:&outSize 
           lineBreakMode:UILineBreakModeWordWrap 
      baselineAdjustment:UIBaselineAdjustmentAlignCenters];
NSLog(@"%f", outSize); 
```

drawAtPoint: 将设置 outSize 指向的值，因此您可以打印结果。这里的原因是，您只能通过 return 语句在 C 中返回 1 个值。要获得多个结果，您可以传入指针以允许该方法设置其他结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T21:56:16.857

该`actualFontSize`参数应该是您传入的 CGFloat 的地址。如果该方法使用不同的字体大小，它将更改您传入的值，这就是您需要传递地址而不是值的原因。换句话说，您`actualFontSize`通过引用传递，以便该方法可以根据需要对其进行更新。

# objective-c - 从 NSDictionary 到 NSString 的所有键和对象

> ID：11109991
> 
> 赞同：1
> 
> 时间：2012-06-19T21:49:33.650
> 
> 标签：objective-c, nsstring, nsdictionary

我有一个 NSDictionary，我想把它的所有对象和键放入一个 NSString，这样我最终可以将它们显示在这样的标签中：

键1：对象1

键2：对象2

键3：对象3

……

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T22:10:24.983

构建字符串，然后将其设置为标签文本。

```
NSMutableString *myString = [[NSMutableString alloc] init];

[dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    [myString appendFormat:@"%@ : %@\n", key, obj];
}];

self.label.text = myString; 
```

## 笔记

格式说明符状态的文档（[字符串编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)） ：`%@`

> **%@**
> Objective-C 对象，打印为 descriptionWithLocale 返回的字符串：如果可用，否则为描述。也适用于 CFTypeRef 对象，返回 CFCopyDescription 函数的结果。

因此，如果这些是您自己在字典中的自定义对象，您很可能需要重写该`description`方法以提供更有意义的输出

# 更新

您提到您需要按键对输出进行排序-字典未排序，因此您必须以不同的方式进行-此示例假定您的键是字符串

```
NSArray *sortedKeys = [[dictionary allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

NSMutableString *myString = [[NSMutableString alloc] init];

for (NSString *key in sortedKeys) {
    [myString appendFormat:@"%@ : %@\n", key, [dictionary objectForKey:key]];
}

self.label.text = myString; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:52:57.107

试试这个

```
for(id key in [dictionary allKeys])
{
    id value = [dictionary objectForKey:key];
    NSLog(@"%@ : %@", key, value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:10:33.750

```
NSString *row;
for (id key in dictionary) {
    row = [NSString stringWithFormat:"%@: %@", key, [dictionary objectForKey:key]];
    // do something with your row string
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-22T04:30:44.047

我试图从我的 TCTime 对象中附加两个时间值并显示在标签中，即使我在最后添加了“\n”，它也只打印第一个值而不是第二个值。

_feedTimes 是 NSArray。

```
NSMutableString *myString = [[NSMutableString alloc] init];

TCTime *time = _feedTimes[indexPath.row];

[myString appendFormat:@"%s : %@\n", "Time 1 ", time.Time1];

[myString appendFormat:@"%s : %@\n", "Time 2 ", time.Time2];

self.label.text = myString; 
```

# java - 试图理解接口在Java中两个类之间继承中的作用

> ID：11109993
> 
> 赞同：-3
> 
> 时间：2012-06-19T21:49:37.973
> 
> 标签：java, inheritance, interface

我想了解接口在两个类之间的继承中所起的作用。

我的理解是，您可以使用`extends`.

```
class Parent {
}
class Child extends Parent {
} 
```

这对于创建超类和子类已经足够了。

我们什么时候需要接口？我们需要`implements`孩子还是父母？

```
class Parent {
}
class Child extends Parent implements MyInterface {
}
interface MyInterface {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:54:22.100

继承和接口实现定义了一个*is-a*关系。这意味着是子类A扩展了超类B，A*是*-a B。如果超类B实现接口I，B*是*-a I。并且由于A*是-a* A *，* A*也是*I。

 *例如，一个 Car（ssuperclass）是一个 Vehicle（接口）。既然奥迪扩展了汽车，奥迪也是车辆。

子类不能小于其父类，但可以更多。因此，子类可能会实现其父类未实现的接口。

例如，所有汽车都不是混合动力车（界面）。但这并不能阻止作为汽车的普锐斯成为混合动力车。普锐斯不仅仅是一辆汽车。它也是一个混合体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:56:32.860

基本上，接口用于为实现它的类创建指南。

接口和父类之间的主要区别是
1）您不能实例化接口（它甚至没有构造函数）
2）它的所有方法必须是抽象的
3）您必须覆盖实现它的类中的所有接口方法.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T21:53:54.920

从基类继承的类的概念独立于实现接口的类。在第一种情况下，继承类“免费”获得其基类的接口和实现；在第二种情况下，*检查*一个类是否符合它声明要实现的接口。

子类继承其基类实现的接口，但也可以自由实现其他接口。当单个层次结构中的类必须承担多个角色时，这非常方便，具体取决于它们在层次结构中的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T21:53:27.983

```
interface MyInterface {
}

class Parent implements MyInterface{
}
class Child extends Parent {
       // Implements MyInterface because it's parent does
}
class Child2 extends Parent implements AnotherInterface {
       //  Child2 class now implements both
       // MyInterface as well as AnotherInterface
} 
```

不确定您是否在询问扩展接口，但这也是可能的：

```
interface MyInterface {
}

interface MySecondInterface extends MyInterface {
} 
```

当您希望您的类使用所描述的常量并定义接口中包含的方法签名时，您可以实现接口。

因此，如果您希望您的 PARENT 类使用常量并定义方法，那么您的 PARENT 将实现接口。如果您希望您的 CHILD 类使用常量并定义方法，那么您的 CHILD 实现该接口。*

# html - 哪些 html 元素具有可以通过 preventDefault 阻止的默认操作

> ID：11109997
> 
> 赞同：2
> 
> 时间：2012-06-19T21:50:00.927
> 
> 标签：html, preventdefault

我试图找出哪些 html 元素具有可以通过调用 preventDefault() 来阻止的默认操作。我在规格中找不到它。它在哪里指定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:55:17.293

我不完全确定它是指定的，尽管我想它是；但默认操作似乎来自用户行为/交互；所以经验法则是：“如果用户可以交互并做某事，那么对于这个元素，这个元素/交互可能会有一个默认操作。”

不幸的是，虽然我还不能引用这个假设的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T21:13:33.147

简而言之：
preventDefault() 使得如果 javascript 被关闭，将发生的任何操作都被抑制/阻止。

其他答案已经提到了我能提到的所有其他内容。