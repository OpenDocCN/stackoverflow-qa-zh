# StackOverflow 问答 10527000-10527999

# php - 有数量限制吗标记在一个 HTML/Apache/PHP 的标签？

> ID：10527000
> 
> 赞同：3
> 
> 时间：2012-05-10T03:05:29.233
> 
> 标签：php, html, apache, post, input

好吧，这很奇怪。我使用 php 和 mysql 后端创建了一个简单的地址簿。所以我加了最多138行地址，就没事了。顺便说一句，我在输入文本中显示我的地址，以便任何用户可以随时编辑它。因此，当我按下提交按钮时，它会对所有 138 行条目执行 http post 并更新它们。一切安好....

但是，当我尝试更新第 139 行输入时，它会丢弃最后一个输入输入并给出错误！它给出了一个 php 运行时错误：“注意：未定义的索引：C:\wamp\www\Dawah\go.php 中的 lastN 在第 24 行”。

顺便说一句，LastN 变量是使用 $_post['lastN'] 获得的。

好像在一个表单中可以发布的html输入标签的数量是有限制的！

我很感兴趣。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:24:17.847

有一个 suhosin 设置`suhosin.request.max_vars`，但这仅适用于 suhosin，而不是常规 php。

由于 php 5.3.9 theres `max_input_vars`，这似乎符合行为 [http://www.php.net/manual/en/info.configuration.php#ini.max-input-vars](http://www.php.net/manual/en/info.configuration.php#ini.max-input-vars)

apache 有限制请求大小的设置，但据我所知，它们是以字节为单位指定的，而不是变量的数量。我想apache会停止并发出abad请求，而不是像你看到的那样截断数据。

# asp.net - ASP.NET MVC Controller.Json DateTime 序列化与 NewtonSoft Json DateTime 序列化

> ID：10527001
> 
> 赞同：8
> 
> 时间：2012-05-10T03:05:51.533
> 
> 标签：asp.net, json, asp.net-mvc-3, datetime, serialization

当我使用返回包含 DateTime 属性的对象时

```
return Json(value); 
```

在我收到的客户上

```
"/Date(1336618438854)/" 
```

如果我使用返回相同的值

```
return Json(JsonConvert.SerializeObject(value)); 
```

那么返回的序列化值（连同序列化对象）是时区感知的：

```
"/Date(1336618438854-0400)/" 
```

有没有办法在没有双重序列化的情况下获得一致的 DateTime 结果？我在某处读到 MS 会将 Newtonsoft JSON 包含到 MVC 中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T18:41:24.310

我终于知道该怎么做了。
我会将我的项目切换到 ISO 8601 DateTime 格式。JSON.net 可以很好地完成序列化，只需使用 JsonConverter 属性装饰对象上的 datetime 属性即可。

```
 public class ComplexObject 
    {
        [JsonProperty]
        public string ModifiedBy { get; set; }
        [JsonProperty]
        [JsonConverter(typeof(IsoDateTimeConverter))]
        public DateTime Modified { get; set; }
        ...
     } 
```

要将序列化对象返回给客户端 ajax 调用，我可以这样做：

```
 return Json(JsonConvert.SerializeObject(complexObjectInstance)); 
```

在客户端：

```
 jsObject = JSON.parse(result) 
```

现在我认为将默认的 ASP.NET MVC 默认 JSON 序列化程序覆盖为我们 Newtonsoft JSON.net ISO 8601 序列化可能很简单，是的，原理应该类似于这个线程：[Change Default JSON Serializer Used In ASP MVC3](https://stackoverflow.com/questions/6883204/change-default-json-serializer-used-in-asp-mvc3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T17:56:14.003

在**WebApiConfig**集中：

```
config.Formatters.Remove(config.Formatters.XmlFormatter);
        //config.Formatters.JsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html"));
        config.Formatters.JsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/json"));
        config.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();
        config.Formatters.JsonFormatter.SerializerSettings.Formatting = Newtonsoft.Json.Formatting.Indented;
        config.Formatters.JsonFormatter.SerializerSettings.DateFormatHandling = Newtonsoft.Json.DateFormatHandling.IsoDateFormat;

        config.MapHttpAttributeRoutes(); 
```

在 ApiController 中返回：

```
return Request.CreateResponse(HttpStatusCode.OK, obj); 
```

祝你好运

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T07:43:59.377

它返回服务器日期格式。您需要定义自己的功能。

```
function jsonDateFormat(jsonDate) {

// Changed data format;
return (new Date(parseInt(jsonDate.substr(6)))).format("mm-dd-yyyy / h:MM tt"); 
```

};

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-10T06:11:43.867

如果您不想深入解析解析的内容，而不仅仅是将日期转换为字符串，而不是使用 JSON 解析它。

例如

```
return Json(DateTime.Now.ToString("your date format if you want to specify")); 
```

# python - 获取默认字典的值

> ID：10527003
> 
> 赞同：1
> 
> 时间：2012-05-10T03:06:06.617
> 
> 标签：python

我从一堆或电子邮件中读取数据并计算每个单词的频率。首先构造两个计数器：

```
counters.form = collections.defaultdict(dict) 
```

获取频率

```
for word in re.findall('[a-zA-Z]\w*', data):
    counters.form[word][file_name] += 1 
```

对于每个表单，都有一个计数器存储该单词出现的所有电子邮件，以及该表单在该电子邮件中出现的频率。例如

```
form = {'a':   {'email1':4, 'email2':3}, 
        'the': {'email1':2, 'email3':4},
        'or':  {'email1':2, 'email3':1}} 
```

如何获取某封邮件中某个表格出现的频率？`a`in的频率`email2`为 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:15:42.060

[使用Counter](http://docs.python.org/library/collections.html#collections.Counter)类而不是 a可能是个好主意`defaultdict`：

> Counter 是用于计算可散列对象的 dict 子类。它是一个无序集合，其中元素存储为字典键，它们的计数存储为字典值。计数可以是任何整数值，包括零计数或负计数。Counter 类类似于其他语言中的 bag 或 multisets。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:55:08.660

看来您正在构建 IR（信息检索）社区所称的倒排索引。在这种情况下，我同意您采用的整体方法，但也建议您将 counter 类**与**默认 dict 结合使用...

```
counters.form = collections.defaultdict(collections.Counter) 
```

`counters.form`然后将充当压缩世界模型的一种索引，其中没有观察不是错误（也不是 False），只是 0。

以您的`form`数据为例，我们填充倒排索引，如...

```
#-- Build the example data into the proposed structure...
counters.form['a'].update({'email1':4, 'email2':3})
counters.form['the'].update({'email1':2, 'email3':4})
counters.form['or'].update({'email1':2, 'email3':1}}) 
```

现在，要获取此数据中表单的频率，我们将其取消引用，就像它是二维数组一样...

```
print counters.form['a']['email2'] 
```

...应该打印`3`并且与您当前使用的结构或多或少相同。这两种方法的真正区别在于您没有观察到的情况。例如...

```
print counters.form['noword']['some-email'] 
```

...使用您当前的结构 ( `collections.defaultdict(dict)`)，获取 'noword' 上的`counters.form`'miss' 和 defaultdict 会自动将新建的空字典关联到`counters.form['noword']`; 然而，当这个空字典被查询键：'some-email'时，空字典没有这样的键，导致`KeyError`'some-email'的异常

相反，如果我们使用建议的结构 ( `collections.defaultdict(collections.Counter)`)，那么 'noword' on 的 get`counters.form`将丢失，并且 new`collections.Counter`将与键 'noword' 相关联。当计数器被查询（在第二个取消引用中）'some-email'时，计数器将响应 0 - 这是（我相信）所需的行为。

其他一些食谱...

```
#-- Show distinct emails which contain 'someword'
emails = list(counters.form['someword'])

#-- Show tally of all observations of 'someword'
tally = sum(counters.form['someword'].values( )) 
```

# javascript - 加载 iframe 时 Jquery 中断

> ID：10527004
> 
> 赞同：0
> 
> 时间：2012-05-10T03:06:14.203
> 
> 标签：javascript, jquery, iframe, append, break

我正在将 iframe 加载到页面中，并且该页面上的 jquery 中断并且不再起作用。是否有一个原因？

我在 iframe 中调用了 jquery，但即使我取出 jquery 调用，父框架的 jquery 仍然不起作用。

iframe 来自不同的域，iframe 中的所有内容（所有 js 和 jquery）都有效，但父框架中的任何 jquery 都不再有效。

正在使用 javascript 将 iframe 添加到父级：

```
document.body.innerHTML = document.body.innerHTML + '<iframe src=""></iframe>'; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T18:38:38.463

在这个问题上挣扎了一段时间，找不到答案。实际上，当您`document.body.innerHTML +=`出于某种原因执行并插入 iframe 时，jQuery 将停止工作而不会出现任何错误。

如果您首先创建一个 div 并添加它`document.body.appendChild(elemDiv)`，然后您可以添加 iframe`elemDiv.innerHTML = "<iframe`

希望这对其他人有帮助。

干杯，山姆

# c# - 如何从servlet获取返回值到c#

> ID：10527017
> 
> 赞同：1
> 
> 时间：2012-05-10T03:08:12.157
> 
> 标签：c#, servlets

如何从 servlet 获取返回值到 c#？我使用传递参数给servlet

```
 HttpWebRequest request = (HttpWebRequest)WebRequest
                         .Create("http://localhost:8080/value/Get_value?p_value=" + 
                                      passedValue);    
 HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

然后servlet将处理并将返回值传递给c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:24:49.637

您必须读取响应缓冲区（流）。

```
...
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
using (StreamReader reader=new StreamReader(response.GetResponseStream()))
 {
 string line = reader.ReadToEnd();
 Console.WriteLine(line);
 } 
```

# java - 将 JBoss 7.1.0 Final AS 添加到 eclipse indigo 错误？

> ID：10527021
> 
> 赞同：0
> 
> 时间：2012-05-10T03:08:53.410
> 
> 标签：java, eclipse, jboss

我正在使用JBoss 7.1.0。但是eclipse控制台错误：找不到或加载主类jdk1.7.0_03。我配置了JDK 7和JBoss，例如添加到环境变量中。运行 JBoss 时，错误无法找到或加载主类 jdk1.7.0_03。

如何解决？

# database - 如何记录有效的日期加入

> ID：10527024
> 
> 赞同：0
> 
> 时间：2012-05-10T03:09:18.393
> 
> 标签：database, database-design, join, oracle11g

我在一个使用有效日期连接的企业系统上工作。我试图弄清楚如何记录表之间的连接以帮助我进行查询。据我所知，这些信息不存在于表的索引或约束信息中。哪个数据库文档或工具最适合记录这些信息？

连接的一个例子是：

```
Table_A
Key_ID - Primary Key
Employee_ID
Position_ID
Effective_DT
Unique Key -> Employee_ID, Position_ID, Effective_DT

Table_B
Employee_ID
Position_ID
Effective_DT
Table_A_Key_ID
Unique Key -> Employee_ID, Position_ID, Effective_DT 
```

Table_A_Key_ID 是来自 Table_A 的外键，不能为空。换句话说，Table_B 中的每条记录都需要 Table_A 中的相应记录，但反之则不然。要确定 Table_B 中与 Table_A 中没有相应记录的记录相关的记录，您需要获取小于 Table_A.Effective_DT 的最高有效日期记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:25:43.460

*   蟾蜍数据建模师
*   尔赢
*   恩巴卡德罗

如果您在企业中工作并且他们愿意为一些真正的工具支付现金。否则，将 Visio 用于 ER 图和 MS Word 用于数据字典。并且在所有情况下都需要适量的肘部油脂。

图片值一千字……但你需要学习如何画出正确的图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:43:32.310

[ER 建模工具](http://en.wikipedia.org/wiki/Entity-relationship_model#ER_diagramming_tools)将记录参照完整性，但它本身不会帮助您记录您在客户端代码中执行的所有 JOIN（可能并非全部“位于”FK 之上）。

要么总是通过视图进行 JOIN（哪个 ER 工具*应该可以*帮助您记录），或者您需要为 JOIN 提供单独的文档。这可以是单独的文档，也可以嵌入在源级文档中（靠近实际启动 JOIN 的代码）。更喜欢第二个选项，因为维护代码的人在更新代码和对 JOIN 进行更改时更有可能更新文档。

# iphone - UILabel 无法更新标签文本

> ID：10527027
> 
> 赞同：0
> 
> 时间：2012-05-10T03:09:47.957
> 
> 标签：iphone, objective-c, ios, ios4, ios5

我是 ios 的新手。我有一个 viewController，其中有一个通知观察者。例如

```
-(void) myNotificationObFn:(Notification *)noti
{
  /* Here i am trying to change the text of UILabel, which is not working. 
  ie:
    NSString *ns = [NSString stringWithFormat:@"%d", 10];
    mylabel.text = ns;
  */
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T08:43:28.773

```
-(void) myNotificationObFn:(Notification *)noti
{
    dispatch_sync(dispatch_get_main_queue(), ^{
        NSString *ns = [NSString stringWithFormat:@"%d", 10];
        labelfromtag.text = ns;
        [labelfromtag setNeedDisplay];
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:24:53.180

如果要更改标签，请尝试使用标签功能

例子 ：

如果您以编程方式创建标签，请在第一次创建标签后设置标签的标签

```
UILabel *myLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 100, 50)];
[myLabel setTag:1234]; 
```

如果您在 XIB 或情节提要中创建标签，只需更改“标签”字段

这样，您的标签就会得到标签“1234”

在此之后，如果您需要编辑此标签，请在您的通知方法中输入此代码

```
UILabel *labelfromtag = (UILabel*)[self.view viewWithTag:1234]; //this code direct label "labelfromtag" to your "myLabel", so your new label here is actually your old label
NSString *ns = [[NSString alloc] initWithFormat:@"%d", 10];

labelfromtag.text = ns; 
```

祝你好运 ：]

编辑：此外，此通知是否与您的 UILabel 位于同一类/控制器中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T03:16:26.620

1 - 您的标签在 IB 中是否正确连接？您可以在代码中的其他地方更改文本（例如 viewDidLoad）吗？

2 - 您不需要分配字符串，因为您没有将其保留在此方法的范围之外。你可以这样做：

```
[myLabel setText:[NSString stringWithFormat:@"%d",10]]; 
```

# javascript - 如何在 javascript/jquery 中添加字符串美元金额？

> ID：10527029
> 
> 赞同：4
> 
> 时间：2012-05-10T03:09:52.847
> 
> 标签：javascript, jquery

我有这样的文本字段

```
$4.00
$5.00
$55.90 
```

我想在 javascript 中添加它们，总共 64.90 美元

我有这个代码

```
 var total= "";
 $("input:checkbox:not(.select_all):checked").closest("tr").each(function() {
    total += $(this).find(".amount").text().trim();
   }); 
```

我的解决方案给了我这个

```
 $4.00$5.00$55.90 
```

知道我做错了什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T03:12:43.287

您正在连接字符串，您需要先将它们解析为数字。你必须脱掉它`$`才能做到这一点。您还希望将 total 初始化为`0`，而不是空字符串：

```
var total = 0;
$("input:checkbox:not(.select_all):checked").closest("tr").each(function() {
    total += parseFloat($(this).find(".amount").text().trim().replace(/^$/, ''));
});

// If you want total to be a string containing the `$` just convert it back:
total = '$' + total; 
```

# core-data - Core Data 从子类中检索 NSManagedObject 属性

> ID：10527033
> 
> 赞同：0
> 
> 时间：2012-05-10T03:11:32.637
> 
> 标签：core-data, attributes, nsmanagedobject

我有一个核心数据实体，并且创建了一个 NSManagedObject 子类。假设它在实体“List”中有一个属性“attrib1”。在我的子类中，在某些情况下我想计算 attrib1 的值，在其他情况下我想从数据库中返回值。我试图弄清楚如何从我的方法中返回数据库值。例子：

```
- (NSString *)attrib1 {
   if (flag) {
       return [self calculateValue];
   } else {
       // return value from core data, ie pass thru, but how?
       // Attempt1:
       return [super attrib1]; // Fails with 'unrecognized selector'
       // Attempt2\. Ends up calling this method again, recursion loop
       return [super performSelector:@selector(attrib1)];
   }
} 
```

我应该如何从作为attrib1 的getter 的NSManagedObject 子类方法中检索属性“attrib1”的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:23:00.080

首先，最好创建将返回计算值或从数据库中获取它的其他属性——在这种情况下，attrib1 应该保持不变。您还缺少一些 getter 的实现。因此，示例代码应如下所示：

```
-(NSString *)attrib1 {
    NSString *v;
    [self willAccessValueForKey:@"attrib1"];
    if(flag)
        v=[self calculateValue];
    else
        v=[self primitiveAttrib1];
    [self didAccessValueForKey:@"attrib1"];
    return v;
} 
```

另外，请参阅 Apple 文档：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html 。

# .net - MSMQ 在 Azure 上是否可用

> ID：10527037
> 
> 赞同：6
> 
> 时间：2012-05-10T03:12:08.357
> 
> 标签：.net, wcf, azure, msmq

我想使用 WCF + net.MSMQ，我对 Azure Service Bus 或 Azure 队列不感兴趣，这些东西太贵了，不符合我设置 P2P 服务的要求。

可靠性也不是问题，系统已经内置了检查丢失消息的机制——以防发生严重的硬件故障。

鉴于所有这些，如果我在 Web/Worker 角色中使用以下代码行提供服务，这是否可行，再次抛开这种本地存储的可靠性：

```
MessageQueue.Create(newQueuePath, isTransactional) 
```

此外，从外部/内部端点调用 WCF MSMQ 服务是否会在负载均衡器后面成功？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T03:38:07.040

目前没有来自as的`MSMQ`平台产品，被视为替代品。`Windows Azure``Azure Storage Queues``Azure Service Bus`

然而，每一个博客、报告和知识渊博的人都在预感`IAAS`微软“**即将到来的某个时候**”将不可避免地发布产品。当这种情况发生时，像`MSMQ`在 Azure 中运行的产品将成为可能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T19:51:00.870

我们的团队拥有`MSMQ`和`Service Bus`。我们正在积极致力于简化这两种技术之间的*桥梁*，我们还将在`Service Bus`本地提供消息传递引擎。现在构建一个允许您使用其中一个或另一个的瘦抽象应该相当简单。

您可能还想查看[http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-MSMQ-a31c6644](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-MSMQ-a31c6644)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T03:17:29.487

没有 Azure 版本的 MSMQ。

我相信没有什么可以从 MSMQ 迁移到 Azure Queue

# ios - 多线程 ios

> ID：10527042
> 
> 赞同：0
> 
> 时间：2012-05-10T03:13:11.517
> 
> 标签：ios, multithreading, alassetslibrary

我的应用程序的功能是在两个 iDevices 之间传输图片。

用户可以选择很多图片发送。但是由于发送过程需要时间，所以现在我只是将尚未发送的图片放入一个数组中，当用户从照片库中选择它时。

我现在的问题是，如果用户一次选择太多图片，我的应用程序将被突然终止。我现在的解决方案是，如果用户一次选择太多图片，我只会在一些图片上放置标记，但将它们留在照片库中，同时将它们放入数组中。然后我有另一个线程在发送操作发生的同时从库中加载图片。所以我的观点是我怀疑一次将这么多图片放入数组中是应用程序终止的原因，所以我想缓存一些图片然后将其他一些图片留在磁盘中，我的代码：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(alertView.tag == 100)
    {
        if (buttonIndex == 1)
        {
            inArray = YES;
            NSLog(@"---------%d",[self.imageArr count]);
            if ([self.imageArr count] < kCachedImages) {
                [self.imageArr addObject:thisImageObj];
                [thisImageObj release];
            }
            else
            [self.imageURLArr addObject:photoURL];

            if(!isSending)
            {
                currentPos = -1;
                [self sendImage];
            }
            [sndTableView reloadData];
        }
        else if (buttonIndex == 2)
        {
            if (inArray) {
                if ([self.imageArr count] < kCachedImages) {
                    [self.imageArr addObject:thisImageObj];
                    [thisImageObj release];
                }else {
                    [self.imageURLArr addObject:photoURL];
                }
            }else {
                [self.imageArr addObject:thisImageObj];
            }

           if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
               [self.popOverView dismissPopoverAnimated:YES];
            }
           else {
               [self dismissModalViewControllerAnimated:YES];
           }

            [sndTableView reloadData];
            if(!isSending)
            {
                currentPos = -1;
                [self sendImage];
            }
        }

    }

}

- (void)sendImage
{
    if(![self.imageArr count])
    {
        [[UIApplication sharedApplication] setIdleTimerDisabled:NO];
        isSending = NO;
        [self.navigationItem setHidesBackButton:NO animated:YES];
        return; //end of all sending
    }

    NSMutableData *toBeSend = [NSMutableData dataWithCapacity:sizeof(packetHeader)+kBuffer];
    imageObj *imgObj;
    if ([self.imageArr count]) {
        imgObj = [[self.imageArr objectAtIndex:0]retain];
    }

  //here created another thread to load pics from library  
    if ([self.imageURLArr count] > 0) {
                         [NSThread detachNewThreadSelector:@selector(load) toTarget:self withObject:nil];
    }

    packetHeader header;
    header.magic = 0x5577ACAC;
    header.seq = currentSeq++;

    if(currentPos < 0) //first packet
    {
        UIImage *img = [UIImage imageWithData:imgObj.pimage];
        self.currentSendingImg.image = img;

        //thumbnail
        img = [TransferViewController imageWithImage:img scaledToSize:CGSizeMake(70, 70)];
        NSData *data = UIImageJPEGRepresentation(img, 0.5);

        header.command = 16;
        header.commandData1 = imgObj.imageSize;
        header.commandData2 = (imgObj.imageWidth<<16) + imgObj.imageLength;
        header.commandData3 = [data length];
//      NSLog(@"thumbnail data length = %u", header.commandData3);
        [toBeSend appendData:[NSData dataWithBytes:&header length:sizeof(packetHeader)]];
        [toBeSend appendData:data];
        currentPos = 0;
        isSending = YES;
        [[UIApplication sharedApplication] setIdleTimerDisabled:YES];
        [self.navigationItem setHidesBackButton:YES animated:YES];
    }
    else
    {
        if(currentPos + kBuffer < imgObj.imageSize)
        {
            header.command = 19;
            header.commandData1 = kBuffer;
            [toBeSend appendData:[NSData dataWithBytes:&header length:sizeof(packetHeader)]];
            NSRange r;
            r.location = currentPos;
            r.length = kBuffer;
            [toBeSend appendData:[imgObj.pimage subdataWithRange:r]];
            currentPos += kBuffer;
        }
        else
        {//last packet
            header.command = 17;
            header.commandData1 = imgObj.imageSize - currentPos;
            [toBeSend appendData:[NSData dataWithBytes:&header length:sizeof(packetHeader)]];
            NSRange r;
            r.location = currentPos;
            r.length = header.commandData1;
            [toBeSend appendData:[imgObj.pimage subdataWithRange:r]];
            currentPos = -1;
            if ([self.imageArr count]) {
                [self.imageArr removeObjectAtIndex:0];
            }
            [self.sndTableView reloadData];
        }
    }

    [manager sendPacket:toBeSend];
    self.sendingProgess.progress = (float)currentPos / (float)imgObj.imageSize;

    [imgObj release];
}

- (void)load 
{

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    if (![imageURLArr count]) {
        return;
    }        
    int imageSum = [imageURLArr count];

        NSURL *path = [self.imageURLArr objectAtIndex:0] ;

        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
        [library assetForURL:path resultBlock:^(ALAsset *asset)
         {
             ALAssetRepresentation *representation = [asset defaultRepresentation];
             CGImageRef ref = [representation fullResolutionImage];
             if (ref != nil) {
                 omg = [UIImage imageWithCGImage:ref];
                 [omg retain];
             }

         }
                failureBlock:^(NSError *error)
         {
             // error handling
         }];
        [library release];

        if (omg) {
            NSData *data = UIImageJPEGRepresentation(omg, kcompressionQuality);
            thisImageObj = [imageObj alloc];
            thisImageObj.imageSize = [data length];
            thisImageObj.imageWidth = omg.size.width;
            thisImageObj.imageLength = omg.size.height;
            thisImageObj.pimage = data;
            [omg release];
        }
        else {
            return;
        }

    imageSum--;

    if ([self.imageURLArr count]) {
        [self.imageURLArr removeObjectAtIndex:0];
    }

    [self.imageArr addObject:thisImageObj];
    [thisImageObj release];

    [NSThread sleepForTimeInterval:1.0];

    [pool release];

} 
```

但是其他线程中的方法现在有效，并且终止的问题仍然存在，所以有人可以给我一些关于我该怎么做的建议，或者我根本不需要另一个线程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:45:55.750

乍一看，这里有几个问题。首先，您使用 的是`detachNewThreadSelector:toTarget:withObject:`，这几乎不是正确的工具。这可以生成无限数量的线程。这可能不是让你崩溃的原因，但这是一种非常危险的做法。更好的解决方案是这样的：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{
  [self load];
}; 
```

这将正确管理您的线程池。

您的主要问题是您在没有任何锁定的情况下访问您的 ivars。`NSMutableArray`不是线程安全的。您不能只在任何线程上修改它。GCD 在这里也有帮助。Mike Ash 写了一篇很好的文章，名为[What's New in GCD。](http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html)您可以使用`dispatch_sync`读取和`dispatch_barrier_async`写入。

综上所述，请确保您确实需要此后台线程。什么需要这么长时间`load`？当您可以避免线程时，您通常应该这样做。

# jquery - 在 Jquery 中创建列表

> ID：10527044
> 
> 赞同：0
> 
> 时间：2012-05-10T03:13:24.510
> 
> 标签：jquery

我曾经在 APS.net 中创建 List ：

```
<% List<Item> list = new List<Item>(); %> 
```

我想像这样在jquery中创建。我怎样才能做到这一点？有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:16:41.453

这就是创建基本无序列表的方式。

```
jQuery(document).ready(function(){
    list = jQuery('<ul>');
    listItem = jQuery('<li>new item</li>');
    list.append(listItem);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:21:24.210

一些可能的解决方案： http: [//www.coffeeblack.org/work/jscollections/](http://www.coffeeblack.org/work/jscollections/) [http://plugins.jquery.com/project/Collection](http://plugins.jquery.com/project/Collection)

类似的讨论： [JavaScript Collections API？](https://stackoverflow.com/questions/4295937/javascript-collections-api)

# javascript - 在javascript中访问兄弟姐妹

> ID：10527045
> 
> 赞同：-3
> 
> 时间：2012-05-10T03:14:12.487
> 
> 标签：javascript, oop, node.js

我正在编写一个节点应用程序，我想获取调用构造函数的变量的名称。

```
a=new constructorFunction();
b=new constructorFunction();

function constructorFunction(){
    this.test="it works!";
    this.doSomething=function(){
       //this should return the contents of this.test
    }
}

console.log(a.doSomething());
console.log(b.doSomething()); 
```

正如评论所说，我想返回 a.test 和 b.test 的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:18:35.307

它不需要比这更复杂（[小提琴](http://jsfiddle.net/rjzaworski/yS44n/)）：

```
function constructorFunction() {
  this.test="it works!";
  this.doSomething = function() {
    return this.test;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:18:38.817

```
a=new constructorFunction();
b=new constructorFunction();

function constructorFunction(){
    var self = this;
    this.test="it works!";
    this.doSomething=function(){
       return self.test;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T03:18:46.383

在 chrome 中这有效......（V8 所以我假设 node.js 会表现相同）

[http://jsfiddle.net/zTTZR/1/](http://jsfiddle.net/zTTZR/1/)

```
a=new constructorFunction();
b=new constructorFunction();

function constructorFunction(){
    this.test="it works!";
    this.doSomething=function(){
       return this.test;
    }
}

console.log(a.doSomething()); 
```

# delphi - 在编译之前将 dcu 文件添加到项目中 [OTA]

> ID：10527050
> 
> 赞同：4
> 
> 时间：2012-05-10T03:15:39.427
> 
> 标签：delphi, delphi-xe

我想在编译之前将 dcu 文件添加到项目中。我正在尝试使用OTA。在 IOTAProject 中，我可以选择添加文件（*AddFile()*），但是当我尝试添加 dcu 时，它不允许我，我必须将文件设置为我的项目中的第一个文件。

我想模拟一些类似的东西：

```
------------------ Original project
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1};
etc...

------------------- Before compile I intercept it and set
program Project1;

uses
  MyDCU, //Add this
  Forms,
  Unit1 in 'Unit1.pas' {Form1};
etc...

------------------ After compile remove and it came back to 
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1};
etc... 
```

编译后/之前的拦截不是问题 IOTAIDENotifier 为我提供了必要的接口来使用。问题仅在于 dcu 文件作为我项目的第一个文件。

有人可以帮助我吗？Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:36:25.517

由于 OTA 不提供 CodeDom（据我所知），唯一的方法是拦截 BeforeCompile 通知，解析项目文件（IDE 版本不是文件系统）并将其添加到使用子句中. 完成后，将修改后的内容流回 IDE 缓冲区。

# macos - 如何绕过硬件虚拟化的请求

> ID：10527052
> 
> 赞同：0
> 
> 时间：2012-05-10T03:15:55.360
> 
> 标签：macos

当我使用 VMWare8 安装 MAC OS 10.7.3 时，它告诉我有关于硬件虚拟化的请求。在 VMWare7 等旧 VMWare 版本中，我的朋友使用一些工具绕过硬件虚拟化，但我没有看到如何做。现在，据我所知，一些工具可能是`vmware-vmx-patch-(x32).exe`，我认为可能需要其他工具。有人能告诉我如何解决这个问题吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:39:55.520

这个问题不容易解决，因为 OSX 是最新的。

# ios - 如何解释这个 iOS Instruments 数据？

> ID：10527053
> 
> 赞同：1
> 
> 时间：2012-05-10T03:16:02.060
> 
> 标签：ios, instruments

我创建了一个示例应用程序，它声明了一个宏，如下所示：

```
#define kSampleString @"didReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarningdidReceiveMemoryWarning" 
```

当用户单击下面的事件处理程序时，我会记录宏字符串。

```
-(IBAction)SampleMethod:(id)sender{
    NSLog(@"Log %@",kSampleString);
} 
```

以下是我得到的仪器数据：

![在此处输入图像描述](../Images/fee614a1355dd35aa498ae81e404f513.png) 在检查 Instruments 中的分配时，我得到了以下信息。我能够发现分配发生在以红色标记的区域中的 NSLogv 调用中。但是如何解释与 NSLogv 相关的其他事情。那些 malloc 操作发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:22:12.460

Malloc 只是目标 C 的 alloc 的 C 版本，最终在执行 alloc 时调用。Instruments 会跟踪您应用程序中的所有分配，因此 Malloc 会出现是很自然的。

至于 CFString，它是 NSString 的 CoreFoundation 表亲（因为 NSString 是围绕 CFString 构建的类集群），无论如何你总是应该传递 NSLog() 一个不可变的字符串，所以这很有意义。如果您的应用程序正在泄漏内存，那么这将是一个问题，但就目前而言，一切都很好。

我担心的是大约在列表中的一半大小的 1.5 KB 字符串 Malloc。对于一个简单的字符串来说，这看起来太多了。

# django - 使用 django 从硬盘播放媒体文件

> ID：10527056
> 
> 赞同：1
> 
> 时间：2012-05-10T03:16:20.000
> 
> 标签：django, html

在我的`django`应用程序中，我有一个用于播放媒体文件（ ）的`playmedia.html`页面。作为第一步，我将媒体文件放在文件夹中并硬编码 src 属性`html5 video element``video or mp3 audio``/home/me/django/myapp/media/audio``<video>`

```
<video id="vid" width="640" height="360" controls="controls">
           <source src="{{MEDIA_URL}}audio/candle.mp3" type="audio/mp3" />       
</video> 
```

设置文件有

```
MEDIA_ROOT = '/home/me/django/myapp/media'
MEDIA_URL = '/site_media/' 
```

通过这种设置，当页面加载时，`html5 video player`页面中显示 mp3 文件已加载（在 chrome 中，显示一个蓝色条），我可以使用`player`.. 播放音频文件。我想选择一个 mp3 文件从`local filesystem`并制作它`html5 video`。我该怎么做呢？

假设我在目录中有一个 test.mp3`/home/me/music/` 如果我设置了 src="/home/me/music/test.mp3" ，播放器在没有加载文件的情况下显示。这次没有蓝条。此外，服务器输出

```
[10/May/2012 08:38:48] "GET /home/me/music/test.mp3 HTTP/1.1" 404 2191 
```

我认为这可能是因为 django 不知道路径`/home/me/music/`，因为它不在上下文中。

有人可以帮我弄清楚如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:50:28.747

这根本不是关于 django，而是关于提供媒体文件的网络服务器（好吧，有时它可以是 django 的开发服务器）。所以你需要“告诉”网络服务器在哪里可以找到这些文件如何？取决于服务器。对于 django [，它在 urls](https://docs.djangoproject.com/en/1.4/howto/static-files/)中，对于大型服务器 - 在配置文件中。

此外，出于安全考虑，没有简单的方法可以说“请为我的整个本地文件系统提供服务器”。您的文件中有大量私人信息，外部用户根本不应该访问这些信息。

# parallel-processing - PBS，刷新标准输出

> ID：10527061
> 
> 赞同：14
> 
> 时间：2012-05-10T03:17:01.640
> 
> 标签：parallel-processing, batch-processing, pbs, torque

我有一个长期运行的 Torque/PBS 工作，我想监控输出。但是只有在作业完成后才会复制日志文件。有没有办法说服 PBS 刷新它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:32:51.520

这在 TORQUE 中是可能的。如果您有共享文件系统，则可以设置

$spool_as_final_name 真

在妈妈的配置文件中。这将使文件直接写入最终输出目标，而不是在假脱机目录中假脱机。一旦你设置好了，你可以 tail -f 输出文件并监控你想要的任何东西。

[http://www.adaptivecomputing.com/resources/docs/torque/3-0-3/a.cmomconfig.php](http://www.adaptivecomputing.com/resources/docs/torque/3-0-3/a.cmomconfig.php)（搜索 spool_as_final_name

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T17:20:58.873

不幸的是，AFAIK，这对于 PBS/Torque 是不可能的——stdout/stderr 流在执行主机上本地假脱机，然后在作业完成后转移到提交主机。如果您想在执行期间监视程序的标准输出，您可以将其重定向到文件（仅当执行和 sumit 主机共享一个公共文件系统时才有意义）。

我怀疑其基本原理是它允许在不与提交节点共享其文件系统的节点上执行作业。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T23:40:35.040

对我来说，ssh-ing 到作业正在运行的节点并查看工作下的文件`/var/spool/torque/spool/`，但它可能特定于这个特定的环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-01T13:37:53.850

如果您提交一个 shell 脚本，您也可以将这两个命令放在脚本的开头。

```
exec 1>file.stdout
exec 2>file.stderr 
```

这会将 stdout 和 stderr 的输出放在工作的工作目录中。

# r - 在我自己的包中使用 data.table 包

> ID：10527072
> 
> 赞同：84
> 
> 时间：2012-05-10T03:18:29.160
> 
> 标签：r, data.table

我正在尝试在我自己的包中使用 data.table 包。MWE如下：

我创建了一个函数 test.fun，它只是创建了一个小的 data.table 对象，然后对“A”列分组的“Val”列求和。代码是

```
test.fun<-function ()
{
    library(data.table)
    testdata<-data.table(A=rep(seq(1,5), 5), Val=rnorm(25))
    setkey(testdata, A)
    res<-testdata[,{list(Ct=length(Val),Total=sum(Val),Avg=mean(Val))},"A"]
    return(res)
} 
```

当我在常规 R 会话中创建此函数，然后运行该函数时，它按预期工作。

```
> res<-test.fun()
data.table 1.8.0  For help type: help("data.table")
> res
     A Ct      Total        Avg
[1,] 1  5 -0.5326444 -0.1065289
[2,] 2  5 -4.0832062 -0.8166412
[3,] 3  5  0.9458251  0.1891650
[4,] 4  5  2.0474791  0.4094958
[5,] 5  5  2.3609443  0.4721889 
```

当我将此函数放入一个包中，安装包，加载包，然后运行该函数时，我收到一条错误消息。

```
> library(testpackage)
> res<-test.fun()
data.table 1.8.0  For help type: help("data.table")
Error in `[.data.frame`(x, i, j) : object 'Val' not found 
```

任何人都可以向我解释为什么会发生这种情况以及我可以做些什么来解决它。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-05-10T08:08:33.793

安德烈的猜测是正确的，+1。上面有一个常见问题解答（请参阅参考资料`vignette("datatable-faq")`），以及一个关于导入的新[小插曲](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-importing.html)`data.table`：

> *FAQ 6.9：我创建了一个依赖于 data.table 的包。如何确保我的包支持 data.table，以便从 data.frame 继承有效？*
> 
> i) 包含`data.table`在`Depends:`您的说明文件字段中，或 ii) 包含`data.table`在`Imports:`您的说明文件字段和`import(data.table)`命名空间文件中。

进一步的背景......在`[.data.table`（和其他`data.table`功能）的顶部，您会看到一个开关，具体取决于对`cedta()`. 这代表调用环境数据表感知。打字`data.table:::cedta`揭示了它是如何完成的。它依赖于具有命名空间的调用包，以及该命名空间 Import'ing 或 Depend'ing on `data.table`。这就是如何`data.table`将其传递给非*data.table-aware*包（例如 中的函数`base`）并且这些包可以在 上使用绝对标准`[.data.frame`的语法，而`data.table`幸福地不知道`data.frame` `is()`a`data.table`也是如此。

这也是为什么`data.table`继承不与无命名空间的包兼容的原因，以及为什么在用户请求时我们必须要求此类包的作者在他们的包中添加命名空间以使其兼容。令人高兴的是，现在 R 为缺少一个的包添加了一个默认命名空间（从 v2.14.0 开始），这个问题已经消失了：

> R 版本 2.14.0 中的更改
> * 所有包都必须有一个命名空间，如果源中没有提供，则在安装时创建一个。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-04-29T05:59:38.660

这是完整的食谱：

1.  添加`data.table`到`Imports`您的`DESCRIPTION`文件中。

2.  添加`@import data.table`到您各自的 .R 文件（即，包含引发错误的函数的 .R 文件`Error in [.data.frame(x, i, j) : object 'Val' not found`）。

3.  键入`library(devtools)`并将您的工作目录设置为指向 R 包的主目录。

4.  键入`document()`。这将确保您的`NAMESPACE`文件包含`import(data.table)`一行。

5.  类型`build()`

6.  类型`install()`

有关做什么`build()`和`install()`做什么的不错的入门，请参阅：http: [//kbroman.org/pkg_primer/](http://kbroman.org/pkg_primer/)。

然后，一旦您关闭您的 R 会话并下次登录，您可以立即使用：

1.  类型`library("my_R_package")`

2.  键入上述 .R 文件中包含的函数的名称。

3.  享受！你不应该再收到可怕的`Error in [.data.frame(x, i, j) : object 'Val' not found`

# sql - 如何在 int 数据类型值前面加上前导零？

> ID：10527078
> 
> 赞同：1
> 
> 时间：2012-05-10T03:18:53.603
> 
> 标签：sql, database-design

是否可以将 int 值设置为从零开始？示例就像一个 ID 号，`0020192`但它只将其保存`20192`为

00 是必需的，因为前 3 位数字 (002) 表示员工工作部分，而后 4 位是员工的实际编号（0192，第 192 位员工）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:54:24.150

在您的评论中，您这样说：

> 实际上它将是一个七位数的ID。0090001，前三位 (009) 将标识员工的工作站，而后四位 (0014) 将是他的实际员工 ID。

也就是说，您的 ID 实际上根本不是数字，它们是具有特定内部结构的字符串：

1.  七个字符长。
2.  所有字符都是数字。
3.  前三个字符标识工作站。
4.  最后四个字符标识员工。

这是一个恰好看起来像数字的字符串。您应该`char(7)`为此使用 a 并添加一个 CHECK 约束来强制执行内部格式（或尽可能多地使用它）。

我也看不到用这些 ID 做任何算术或其他数字的事情的机会很大，主要是因为它们实际上不是数字。

使用它的一个令人愉快的副作用`char(7)`是您的应用程序应该将 ID 视为字符串，您不必担心会混淆并认为这`0112222`是一个八进制数。

如果可能，您应该使用两个单独的字符串列：

1.  A`char(3)`为工作站 ID。
2.  和一个`char(4)`用于员工 ID。

如果您在数据库的其他地方使用数字 ID 有这两个对象，那么在这里也使用两个数字并添加外键来约束您的数据。

**执行摘要**：您的 ID 不是数字，因此不要尝试将它们存储为数字，它们是看起来像数字的字符串，应该作为字符串存储和操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T03:45:06.173

试试这段代码

```
SELECT RIGHT(CONCAT('0000000', 201920),8) AS ID_Number 
```

[http://sqlfiddle.com/#!2/7215e/1](http://sqlfiddle.com/#!2/7215e/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:02:57.547

只是显示问题。

如果您在数据库中的 IDNO(autoincrement/int) 是 201，并且您希望它显示为 10 个字符长的格式，例如 0000000201

应该是这样的。

```
select rtrim(replicate('0',abs(len(IDNO)-10)) + CAST(IDNO as varchar)) from IDMaster 
```

只需在您喜欢的显示长度上修改 10 即可。例如 2 ，所以 abs(len(IDNO)-2)

干杯。

# oop - 是包含对调用或包含类错误封装的引用吗？

> ID：10527079
> 
> 赞同：1
> 
> 时间：2012-05-10T03:19:52.180
> 
> 标签：oop, encapsulation

我有一个更一般的 OOP 问题。创建一个对调用/包含类的引用的成员是不好的封装吗？例如：

```
class Foo
{
    void DoSomething()
    {
        Bar bar = new Bar(this);
    }
} 
```

在 Bar.cs 或 Bar.cpp 或任何地方

```
public class Bar
{
    private Foo m_myFoo;
    public Bar(Foo foo)
      : m_myFoo(foo)
    {
    }
} 
```

我只是发现自己需要这样做，并想知道这是否是一种带有不良封装气味的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:29:20.733

您所做的是一种[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)形式，通过将 Foo 注入 Bar. 我们没有足够的信息来了解您打算如何使用它，但看起来还可以。

而不是封装，我会更关心两个类之间的耦合。

您可以考虑分别创建这两个类并在 bar 实例上设置 foo 引用。

# c# - 为什么 if 条件不检查空值

> ID：10527081
> 
> 赞同：2
> 
> 时间：2012-05-10T03:20:00.237
> 
> 标签：c#, .net, string

我试图检查我的 var 中的空值，但它抛出“对象引用未设置为对象的实例”。

```
 private void GenerateImage()
    {
        //Webster.Client.Modules.Metadata.Helper test = new Webster.Client.Modules.Metadata.Helper();
         var selectedstory = Webster.Client.Modules.Metadata.Helper.SelectedStoryItem;

        if((selectedstory.Slug).Trim()!=null)
        {
         //if (!string.IsNullOrEmpty(selectedstory.Slug))
       //{

           if (File.Exists(pathToImage))
           {
              }
           else
           {
               this.dialog.ShowError("Image file does not exist at the specified location", null);
           }
       }
       else
       {
           this.dialog.ShowError("Slug is Empty,please enter the Slug name", null);
       }
    } 
```

我知道 selectedstory.Slug 的值为 null，这就是为什么我使用**if**条件进行检查，但它在 if 条件下直接抛出。

有人可以建议什么是正确的检查方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T03:21:55.737

您不能在空引用上调用方法。取出`.Trim()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T03:23:10.793

```
if((selectedstory.Slug).Trim()!=null) 
```

将首先调用`Trim()`字符串上的方法，然后检查是否为空。这是失败的部分：您试图在空对象上调用实例方法。

你想要的是这样的：

```
if ( selectedstory != null && string.IsNullOrEmpty(selectedstory.Slug) ) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T03:23:42.540

试试这个：

```
if (!string.IsNullOrWhiteSpace(selectedstory.Slug)) 
```

这消除了在您正在检查的属性上调用 Trim 的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T04:33:35.290

这就是我最终想出的

```
 try
        {

            if (!string.IsNullOrWhiteSpace(selectedstory.Slug))
            {

                if (File.Exists(pathToImage))
                {
                    string SlugName = selectedstory.Slug;
                    if (pathToImage.Contains(SlugName))
                    {

                    }
                    else
                    {
                        this.dialog.ShowError("Image file name is not same as Slug name", null);
                    }
                }
                else
                {
                    this.dialog.ShowError("Image file does not exist at the specified location", null);
                }

            }
          }
        catch (Exception ex)
        {
            this.dialog.ShowError("Slug is Empty,please enter the Slug name", null);

        }
    } 
```

# android-layout - 叠加在 ImageView 之上

> ID：10527082
> 
> 赞同：2
> 
> 时间：2012-05-10T03:20:05.177
> 
> 标签：android-layout, android-imageview

我有一个使用位图加载的 ImageView，scaleType 设置为 center_crop。我想要一个覆盖在它上面，一个RelativeLayout就可以了。

我的问题是我的叠加层永远不会与我的 ImageView 大小相同，并且叠加层子项必须保持在 imageView 上的位置。

叠加层的孩子很可能是一堆 ImageButton，以便能够点击地图上的特定点。

我有 ImageView 和 RelativeLayout 与 FrameLayout 作为父级。我请求通过 HTTP 下载图像内容，当接收到图像内容时，我加载 ImageView，然后使用 设置覆盖大小`FrameLayout.LayoutParams`，设置 ImageView 的大小（通过 getWidth 和 getHeight），但大小始终关闭。

此外，如果调整叠加层的大小以匹配 imageView 的大小，它也应该对其子项应用缩放，否则调整大小不会做太多。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:18:59.037

根据视图膨胀/创建的顺序，您可能会尝试使整个视图无效，以强制在膨胀元素时知道正确的宽度和高度属性

# sql - 插入查询中需要澄清

> ID：10527087
> 
> 赞同：1
> 
> 时间：2012-05-10T03:21:00.200
> 
> 标签：sql, oracle, plsql

表结构：

```
title { name varchar(100) } 
```

如果我尝试插入以下查询

```
insert into wikititle values('Men's'); 
```

我收到错误引用的字符串未正确终止。

即使我使用 set escape on make it as

```
insert into wikititle values('Men\'s'); 
```

并插入我收到此错误。

我在 oracle 11i sql plus 中执行所有这些执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T03:27:04.227

在 Oracle 中，您需要将引号加倍：

```
insert into wikititle values('Men''s') 
```

[这是](http://sqlfiddle.com/#!4/ab1bd/1)sqlfiddle 上的测试查询的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:30:41.370

```
select q'{Men's}' from dual;
select q'|Men's|' from dual;
select q'"Men's"' from dual; 
```

# php - 正则表达式 html 注释之间的所有内容

> ID：10527089
> 
> 赞同：0
> 
> 时间：2012-05-10T03:21:11.467
> 
> 标签：php, regex

我正在尝试 使用正则表达式在 php 中`<!--`删除html 注释之间的所有内容。`-->`有人可以帮忙吗

```
$str = preg_replace('/\<!--.*\-->/', '', $str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:24:30.120

尝试`preg_replace('/<!--.*-->/sU', '', $str);`

# c# - 根据源数据动态加载和调用委托

> ID：10527095
> 
> 赞同：0
> 
> 时间：2012-05-10T03:22:40.620
> 
> 标签：c#, multithreading, dynamic, delegates, threadpool

假设我有一个需要计算的记录流。记录将具有这些函数的组合 run `Sum`、`Aggregate`、`Sum over the last 90 seconds`或`ignore`。

数据记录如下所示：

```
Date;Data;ID 
```

**问题**

假设 ID 是`int`某种类型的，并且 int 对应于要运行的一些委托的矩阵，我应该如何使用 C# 来动态构建该启动图？

我确信这个想法存在......它用于具有许多委托/事件的 Windows 窗体中，其中大部分将永远不会在实际应用程序中实际调用。

下面的示例包括一些我想要运行的委托（求和、计数和打印），但我不知道如何根据源数据使委托的数量触发。（比如说打印偶数，并在这个样本中求和）

```
using System;
using System.Threading;
using System.Collections.Generic;
internal static class TestThreadpool
{

    delegate int TestDelegate(int  parameter);

    private static void Main()
    {
        try
        {
            // this approach works is void is returned.
            //ThreadPool.QueueUserWorkItem(new WaitCallback(PrintOut), "Hello");

            int c = 0;
            int w = 0;
            ThreadPool.GetMaxThreads(out w, out c);
            bool rrr =ThreadPool.SetMinThreads(w, c);
            Console.WriteLine(rrr);

            // perhaps the above needs time to set up6
            Thread.Sleep(1000);

            DateTime ttt = DateTime.UtcNow;
            TestDelegate d = new TestDelegate(PrintOut);

            List<IAsyncResult> arDict = new List<IAsyncResult>();

            int count = 1000000;

            for (int i = 0; i < count; i++)
            {
                IAsyncResult ar = d.BeginInvoke(i, new AsyncCallback(Callback), d);
                arDict.Add(ar);
            }

            for (int i = 0; i < count; i++)
            {
                int result = d.EndInvoke(arDict[i]);
            }

            // Give the callback time to execute - otherwise the app
            // may terminate before it is called
            //Thread.Sleep(1000);

            var res = DateTime.UtcNow - ttt;
            Console.WriteLine("Main program done----- Total time --> " + res.TotalMilliseconds);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }

        Console.ReadKey(true);
    }

    static int PrintOut(int parameter)
    {
        // Console.WriteLine(Thread.CurrentThread.ManagedThreadId + " Delegate PRINTOUT waited and printed this:"+parameter);
        var tmp = parameter * parameter;
        return tmp;
    }

    static int Sum(int parameter)
    {
        Thread.Sleep(5000); // Pretend to do some math... maybe save a summary to disk on a separate thread
        return parameter;
    }

    static int Count(int parameter)
    {
        Thread.Sleep(5000); // Pretend to do some math... maybe save a summary to disk on a separate thread
        return parameter;
    }

    static void Callback(IAsyncResult ar)
    {
        TestDelegate d = (TestDelegate)ar.AsyncState;
       //Console.WriteLine("Callback is delayed and returned") ;//d.EndInvoke(ar));
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:23:49.713

```
Dictionary<int, Func<int,int>> delegatesCache;

. . . (receive data here) . . .
var delToRun = delegatesCache[myData.Key];
var result = delToRun(myData.Param); 
```

# javascript - 用 jQuery 从字母中产生波浪

> ID：10527098
> 
> 赞同：0
> 
> 时间：2012-05-10T03:22:53.820
> 
> 标签：javascript, jquery, wave

我正在尝试使用 jQuery 及其名为 lettering.js 的插件从悬停时的字母中产生波浪，该插件跨越元素的每个字母。
[这就是我试图做的[ *http://jsbin.com/ezuze* ]）](http://jsbin.com/ezuzep)
我是新手并尝试使用`for`循环，但失败了:(。任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:43:13.967

该`animate()`功能使用不正确（[演示](http://jsbin.com/ezuzep/3)）

```
$(function() {
  $('h1').lettering();
  $('h1 span')
    .css('position','relative')
    .hover(function(){
      $(this).animate({ top:'10px' }, 100);
    }, function(){
      $(this).animate({ top: 0 }, 100);
    });

}); 
```

并且不需要循环，除非您想在初始悬停时为所有跨度设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:44:04.353

[http://jsbin.com/ezuzep/4/edit](http://jsbin.com/ezuzep/4/edit)

对于新玩家来说，使用内置`.each()`函数会更好，因为循环会变得非常混乱。

# ajax - 将验证属性放在 $this->Js->Submit

> ID：10527102
> 
> 赞同：0
> 
> 时间：2012-05-10T03:23:16.443
> 
> 标签：ajax, cakephp

我的视图中有这个 ajax 提交按钮，我想在单击它时验证字段。我将为此操作申请哪些特定属性？

```
echo $this->Js->submit('Save Post', array(
    'before'=>$this->Js->get('#sending')->effect('fadeIn'),
    'success'=>$this->Js->get('#sending')->effect('fadeOut'),
    'update'=>'#success',
    'id' => 'btnSubmit',
    )); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:37:38.243

您可以将直接 jQuery 验证写入字段。无需将其附加到 JSHelper。如果您想进行服务器端验证。您可以调用该`$this->ModelName->validates()`方法。

# php - PHP自动链接用户名

> ID：10527105
> 
> 赞同：2
> 
> 时间：2012-05-10T03:24:00.137
> 
> 标签：php, detection

我想为我的站点创建一个自动链接解决方案。它只是关于用户名，如果在字符串中找到用户名，它应该创建一个指向配置文件的链接。好吧，我现在只有两个可能的解决方案：

1.  在提取用户名以给他们一个不可见的特殊字符作为一种标识符并通过它进行正则表达式时。但这只是一种基于“运气”的解决方案，它不会在用户编写的文本中正确运行。

2.  获取一个完整的用户名数组并每次都通过它...我可以通过将检测减少到一个有限的因素来减少服务器负载...假设只是汽车的朋友。但不知何故，这也令人不安。

我会很高兴你可能有任何暗示。可用的是 PHP、JS (JQuery FW)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:43:37.600

我使用这个函数来制作哈希标签链接。您可以使用带有@ 符号和快速查询的类似方法。

```
function addhashtags($text) {
$text = preg_replace('/#([\\d\\w]+)/', '<a href="/?h=$1">$0</a>', $text);
return $text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:18:27.290

要模仿 Twitter 和 StackOverflow（使用`@`），您可以使用类似这样的东西（[演示](http://ideone.com/Whf7C)）：

```
preg_replace('~(^|\s)@([[:alnum:]_]+)~', '$1<a href="/profile/$2/">@$2</a>', $string); 
```

# java - 多线程可以更快地工作吗？

> ID：10527122
> 
> 赞同：0
> 
> 时间：2012-05-10T03:26:26.860
> 
> 标签：java, multithreading

我有 2 台机器（Intel Atom(TM) CPU D525），每台都运行不同的操作系统（1 个 windows 7 和 1 个 ubuntu 10.04）。

我希望将一堆图像从 Windows 7 机器发送到 Ubuntu 机器。

我现在正在使用多线程来做到这一点。我在下面附上了我的代码：

```
public class RshScp implements Runnable
{

private StreamHandlers streamHandlers = new StreamHandlers(); 
private String screenFileName;
private int clientIndex;
private SingletonServer ss = null;

public RshScp(String screenFileName, int clientIndex, SingletonServer ss)
{
    this.screenFileName = screenFileName;
    this.clientIndex = clientIndex;
    this.ss = ss;
} 

public void run()
{
    sendFileToClient();
}

public void sendFileToClient()
{
    try 
    {   
        DisplayClient dc = null;
        dc = ss.getClient(clientIndex);          

        String execution = sshFileRSH(dc.getHostName(), dc.getUserName(), screenFileName, dc.getRemoteDirectory(), dc.getLocalDirectory()); 
        log.write(execution);
        Process p1 = Runtime.getRuntime().exec(execution);              
        InputStreamReader isr = new InputStreamReader(p1.getInputStream());
        streamHandlers.checkStreamOutput("From RshScp", isr);
    } catch(Exception e){}
}

//Function to set the RSH SCP command
private String sshFileRSH(String hostName, String userName, String localFileNames, String remoteDirName, String localJobDirectory)
{
    String fileTransferCommand = "scp " + localFileNames;
    //String fileTransferCommand = "rsync --partial --progress --rsh=ssh " + localFileNames[0] + " " + localFileNames[1] + " " + localFileNames[2];

    String destinationCommand = userName + "@" + hostName + ":" + remoteDirName;

    String executionCommand = "";
     executionCommand = fileTransferCommand + " " + destinationCommand;

    return executionCommand;            
} // end function

}//end while class 
```

当我尝试将文件发送到多个客户端时，我发现它很慢。它使用 5 秒连接并将文件发送到客户端。有时它仍然会丢失图像。

有谁知道导致多线程变慢的实际情况？是否有任何解决方案可以使其连接和发送更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:36:28.463

嗯，很难准确地说，因为你没有给我们一段有趣的代码，它实际上将字节通过网络发送到另一台机器。但这就是我的建议：

*   找出您的网络速度是多少，因此将图像发送到另一台机器并接收结果需要多长时间
*   由此，确定在机器之间分配处理是否真的值得
*   如果计算表明这是值得的，请不要用愚蠢的废话将数据发送到另一台机器的方式过于复杂化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:36:38.053

> 有谁知道导致多线程变慢的实际情况？是否有任何解决方案可以使其连接和发送更快？

正如 Makoto 所说，第一个瓶颈很可能是 I/O

多线程在您有“等待”时间的 I/O 未“使用”的情况下是有意义的

例如，如果程序在您的线程“阻塞”I/O 操作时有一些工作要做，那么添加另一个线程可能是有意义的

例如，如果您读取图像并将它们写入文件，如果您在“消费者生产者”作业中使用 2 个线程（一个读取并放入缓冲区，一个从缓冲区读取并写入文件，例如使用[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:44:33.697

'它使用 5 秒连接并将文件发送到客户端'

一根线需要多长时间？

“有时它仍然会丢失图像”——现在这对任何基于 TCP 的传输都令人担忧。即使您有 50 个线程，它也不会在正确实现的系统上发生。

在典型系统上，传输速率受网络限制（正如许多其他人已经发布的那样）。当通过不断连接和断开连接的协议将小文件复制到多台机器时，多线程传输可以提供最大的改进。在这种情况下，可以减轻网络延迟的影响，并且可以预期会有很大的加速。

在仅在两台机器之间传输大文件的情况下，由于硬盘对多个文件执行重叠写入，因此避免连接/断开延迟所产生的任何改进很可能会被增加的磁盘寻道所淹没。

首先 - 修复您的转移！即使线程数不合适，数据也不应该丢失！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T04:53:26.793

问题的最可能原因是您的并行文件传输命令导致网络拥塞问题。听起来[“缓冲区膨胀”](http://en.wikipedia.org/wiki/Bufferbloat)现象可能会使您的问题更加复杂。

你能为这个做什么？

那么最简单的事情就是减少并行网络连接的数量，直到问题解决。如有必要，一次进行一项转移。

如果你真的很热衷，你可以在你的网络上使用一个数据包嗅探器，看看你是否能发现问题。但是您需要知道如何解释网络流量。

无论如何，问题可能只是您的网络链接饱和。唯一的解决办法是获得更快的连接......或者不要尝试同时发送太多。

# java - 如何通过 Sort 和 Pageable 使用 Spring data JPA 开箱即用地查询数据？

> ID：10527124
> 
> 赞同：72
> 
> 时间：2012-05-10T03:26:32.477
> 
> 标签：java, spring, jpa, spring-data-jpa

我正在我的项目中尝试[Spring data JPA](http://www.springsource.org/spring-data/jpa)。我想知道是否有一个开箱即用的 API 可以通过`Sort`和查询数据`Pageable`。当然，我知道我可以自己编写那个方法，我只是想知道是否有一个开箱即用的方法。我的 DAO extends `JpaRepository`，我发现可以调用以下方法：

```
findAll();
findAll(Pageable pageable);
findAll(Sort sort); 
```

但是没有这样的方法`findAll(Sort sort, Pageable pageable)`，所以我很好奇。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-05-10T06:19:17.857

有两种方法可以实现这一点：

```
final PageRequest page1 = new PageRequest(
  0, 20, Direction.ASC, "lastName", "salary"
);

final PageRequest page2 = new PageRequest(
  0, 20, new Sort(
    new Order(Direction.ASC, "lastName"), 
    new Order(Direction.DESC, "salary")
  )
);

dao.findAll(page1); 
```

如您所见，第二种形式更加灵活，因为它允许为每个属性 ( `lastName ASC, salary DESC`) 定义不同的方向。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-10T05:09:43.130

Pageable 也有一个选项来指定排序。来自[java 文档](http://static.springsource.org/spring-data/data-commons/docs/1.1.0.RELEASE/api/org/springframework/data/domain/PageRequest.html)

```
PageRequest(int page, int size, Sort.Direction direction, String... properties) 
```

创建一个应用了排序参数的新 PageRequest。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-14T13:09:43.517

在 2020 年，接受的答案有点过时了，因为`PageRequest`不推荐使用，所以你应该使用这样的代码：

```
Pageable page = PageRequest.of(pageable.getPageNumber(), pageable.getPageSize(), Sort.by("id").descending());
return repository.findAll(page); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-11T00:23:34.983

[Spring Pageable](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html)包含一个排序。因此，如果您的请求具有值，它将返回已排序的可分页。

要求： `domain.com/endpoint?sort=[FIELDTOSORTBY]&[FIELDTOSORTBY].dir=[ASC|DESC]&page=0&size=20`

这应该返回按提供的顺序提供的按字段排序的可分页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-02T10:01:01.090

就我而言，使用`Pageable`并`Sorting`同时使用如下所示。在这种情况下，我使用分页并按`id`降序排序所有元素：

```
modelRepository.findAll(PageRequest.of(page, 10, Sort.by("id").descending())) 
```

像上面一样，根据您的要求，您也可以使用 2 列对数据进行排序。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-02-10T06:57:25.077

```
 public List<Model> getAllData(Pageable pageable){
       List<Model> models= new ArrayList<>();
       modelRepository.findAllByOrderByIdDesc(pageable).forEach(models::add);
       return models;
   } 
```

# iphone - iPhone 4 Retina 图像无法使用 CSS 正确调整大小

> ID：10527125
> 
> 赞同：0
> 
> 时间：2012-05-10T03:26:47.017
> 
> 标签：iphone, mobile, resolution, retina-display, image-size

我正在尝试为移动网站保存图像。我正在为 iPhone 4 保存一个招聘文件（宽度 640 像素）和一个低分辨率（宽度 320 像素）。如果我在 Safari 移动设备中查看 jpg 图像，它会显示全宽（纵向模式）。如果我将它用作 CSS 中的背景图像，它会占用大约 2/3 的屏幕（纵向模式）。

我正在使用此代码来检测视网膜屏幕

```
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5) and (orientation:portrait),
only screen and (min-device-pixel-ratio : 1.5) and (orientation:portrait) {

#header
{
    background:url(images/hires/header.jpg) no-repeat;
    width:640px;
    height:257px;
}

} 
```

唯一能解决的就是：

```
<meta name="viewport" content="width=640" /> 
```

在我的 HTML 标头中。但是，对于宽度为 540 像素的 Atrix 2 之类的东西，这将完全不适用。我试过了：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

然后图像大约是屏幕宽度的两倍（纵向模式）。

我一生都无法弄清楚我做错了什么，或者如何迎合每部手机/分辨率/屏幕尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:42:07.733

好的，这似乎解决了它，无法在 iPhone 4 和 iphonetest.com 以外的其他设备上尝试它

（initial-scale=.5 是有帮助的）不确定它的作用

# c# - windows phone 7 上有任何类型的“sendKeys”命令吗？

> ID：10527130
> 
> 赞同：0
> 
> 时间：2012-05-10T03:27:14.907
> 
> 标签：c#, windows-phone-7, keyboard, sendkeys

我想在我的手机中做一个任务，应该向它发送密钥。事实上，我将模拟一个远程键盘到我的设备。那么，有什么方法可以访问设备上的发送密钥？谢谢

编辑。

XDA Developers 的 ultrashot 告诉我使用这个：

```
keybd_event(<key code>, 0, KEYEVENTF_SILENT, 0);
keybd_event(<key code>, 0, KEYEVENTF_SILENT | KEYEVENTF_KEYUP, 0); 
```

但我不知道如何使用它。它可以与 DLLImport 一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:19:44.653

您的方案有两个问题：

1.  没有办法以编程方式模拟用户交互。可能有一些低级 API，但该 API 对除 MS 和合作伙伴之外的所有开发人员都是锁定的。
2.  当其他应用程序正在运行时，无法运行您的代码。所以你只能控制你自己的应用程序。如果您控制自己的应用程序，那么添加显式逻辑以将文本远程添加到文本框中应该不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T20:37:56.737

为什么不只发送按下的键的字节流，您可以使用 Encoding.Ascii.GetBytes(string) 从键盘的每个键获取字节，然后使用 Encoding.Ascii.GetString(bytes) 解码

使用 Mango 支持 Sockets，您可以使用简单的 Socket 客户端，使用 Sockets 接收和发送方法来检索字节流，然后您可以使用它来填充文本框或其他东西

它不像 SendKeys 那样简单，但这是另一种选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T03:44:26.570

除了直接将输入发送到控件之外 -**没有**。您无权访问`SendKeys`股票 SDK 中的 API。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T03:47:25.043

“sendkeys”通过向控件发送窗口消息在桌面上工作；该级别的操作在 Windows Phone 的托管级别上不可用。作为电话供应商，您必须通过联系 Microsoft 以获取本机级别的 SDK 来降低级别。但是，我怀疑你能在任何级别上做类似的事情。

# git - 设置 Git/SmartGit SSH 客户端的主文件夹

> ID：10527131
> 
> 赞同：6
> 
> 时间：2012-05-10T03:27:16.300
> 
> 标签：git, ssh, msysgit, smartgit

我想知道是否有人可以深入了解为什么当我通过 SSH 连接到我们的源代码控制服务器时 SmartGit 不正常。GitBash 表现良好。

**背景：**

我在网络上设置了一个源代码控制服务器，运行 MSYSGit 和 WinSSH 作为 SSH 服务器。它连接到 AD 以解析用户名等，并且我已经导入了所有公共 RSA 密钥等。一切正常。

对我们来说，一个曲线球是，虽然 Git 安装在“ *C:\Program Files (x86)\Git* ”，但我们的实际源代码位于“ *C:\Git* ”，它会定期备份。

我已将 WinSSH 配置为使所有 SSH 会话默认为“ *C:\Git* ”作为它们的主文件夹，这很有效。当我使用 Git Bash 连接到服务器时，它默认为' *C:\Git* '。完美的。

当我让 SmartGit（使用 SmartGit SSH 客户端）连接到同一台服务器时，使用 url：

```
 ssh://<server>/<folder>/<repo> 
```

我收到一条错误提示路径...

```
 C:\Program Files (x86)\Git\<folder>\<repo> 
```

...似乎不是存储库。嗯，是的......它应该在“ *C:\Git* ”中寻找它，而不是“ *C:\Program Files (x86)\Git* ”。

我不确定为什么 SmartGit 不适合这个设置，但我认为它的 SSH 客户端绕过了默认的 WinSSH 设置，因为它完全从' *C:\Program Files (x86)\Git*指定了整个路径'。

**我的问题：**

SmartGit 可能从中获取“ *C:\Program Files (x86)\Git* ”路径的任何想法？

这是我可以在某处设置的变量吗？

**更多信息（更新）**

SmartGit 的版本是 3.0.4，但问题也存在于 2.x 中。

我附上了 SmartGit 应用程序日志中的一个失败实例（我很确定）：

> 1782732 (2012-05-10 12:18:56,653) [QThreadPoolThread-2 (smartgit.KL)] 信息 smartgit.core.executable - 执行以下命令："C:\Program Files\Git\bin\git.exe" ls -remote ssh://initio-dev01/INIT/INIT.Framework.git refs/heads/
> 
> 1782732 (2012-05-10 12:18:56,653) [QThreadPoolThread-2 (smartgit.KL)] 信息 smartgit.core.executable - 在目录中：null
> 
> 1783049 (2012-05-10 12:18:56,970) [QThreadPoolThread-8 (smartgit.aqT)] 信息 smartgit.server - 收到命令：ssh
> 
> 1786438 (2012-05-10 12:19:00,359) [QThreadPoolThread-6 (smartgit.cR)] 信息 smartgit.command.logging - 标准错误：致命：'C:/Program Files (x86)/Git/INIT/INIT。 Framework.git' 似乎不是 git 存储库
> 
> 1786438 (2012-05-10 12:19:00,359) [QThreadPoolThread-6 (smartgit.cR)] 信息 smartgit.core.command - 致命：'C:/Program Files (x86)/Git/INIT/INIT.Framework。 git' 似乎不是 git 存储库
> 
> 1786439（2012-05-10 12:19:00,360）[Thread-29] 错误 smartgit.ssh.trilead - com.trilead.ssh2.transport.TransportManager：接收线程：receiveLoop 中的错误：套接字已关闭
> 
> 1786763 (2012-05-10 12:19:00,684) [QThreadPoolThread-6 (smartgit.cR)] INFO smartgit.command.logging - 标准错误：致命：远程端意外挂断
> 
> 1786763 (2012-05-10 12:19:00,684) [QThreadPoolThread-6 (smartgit.cR)] INFO smartgit.core.command - 致命：远程端意外挂断
> 
> 1786772 (2012-05-10 12:19:00,693) [QThreadPoolThread-2 (smartgit.KL)] WARN sg.command.ping - 'C:/Program Files (x86)/Git/INIT/INIT.Framework.git'似乎不是 git 存储库 远程端意外挂起 smartgit.cn: 'C:/Program Files (x86)/Git/INIT/INIT.Framework.git' 似乎不是 git 存储库 远程端挂起出乎意料地起来
> 
> > 在 smartgit.gG.a(SourceFile:86)
> > 
> > 在 smartgit.ga.a(SourceFile:63)
> > 
> > 在 smartgit.ga.a(SourceFile:53)
> > 
> > 在 smartgit.hA.a(SourceFile:57)
> > 
> > 在 smartgit.ahq.a(SourceFile:26)
> > 
> > 在 smartgit.ahl.a(SourceFile:39)
> > 
> > 在 smartgit.aL.a(SourceFile:46)
> > 
> > 在 smartgit.aD.a(SourceFile:41)
> > 
> > 在 smartgit.Kw.a(SourceFile:144)
> > 
> > 在 smartgit.KL.run(SourceFile:34)
> > 
> > 在 smartgit.Pp.run(SourceFile:65)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:30:42.343

硬编码路径非常烦人，这似乎是这里的问题？！在此问题在以后的版本中得到修复之前，也许您应该创建一个目录连接点或符号链接。可能是一个（快速而肮脏的）解决方案，而不是花时间修复程序。

（必须在管理员 shell 中运行）

对于连接点：

```
mklink /j "C:\Program Files (x86)\GIT\<folder>" C:\GIT\<folder> 
```

对于符号链接：

```
mklink /d "C:\Program Files (x86)\GIT\<folder>" C:\GIT\<folder> 
```

# ios - 直接从按钮调用委托的方法，这是一个好习惯吗？

> ID：10527132
> 
> 赞同：1
> 
> 时间：2012-05-10T03:27:17.797
> 
> 标签：ios, delegates

这个控制器有一个子控制器，它用很少的方法实现了一个委托协议。

```
ParentController : UIViewController <ChildControllerDelegate> 
```

Parent 控制器有一个从自身内部调用的方法（让我们调用它`doSomething`）。

现在，我需要`doSomething`从子控制器内的按钮调用此方法。所以我可以想到3个选项：

1.  在协议中添加一个方法`pleaseCallDoSomething`并从按钮调用该方法，然后`pleaseCallDoSomething`在父视图控制器中实现该方法，最后`doSomething`在`pleaseCallDoSomething`.
2.  第二个选项是不在子视图协议中注册新方法，而是简单地使用：

    ```
    [btn addTarget:self.delegate action:@selector(doSomething) forControlEvents:UIControlEventTouchUpInside]; 
    ```

3.  在协议中添加一个`doSomething`方法并在父视图控制器上实现它，然后在父视图控制器内部在需要时在本地调用它。（我的意思是从委托和本地调用委托方法）。

最佳实践是什么？

谢谢沙妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:15:07.710

您不应该将您的委托绑定为按钮的目标。您的委托属性很可能被声明为弱以避免保留周期。如果您将其指定为目标，您将获得一个保留周期，并且只要您不删除该按钮，您的整个对象层次结构将永远不会被释放。

父<--强-->子<--弱-->父

父<--strong-->按钮

目标分配后

父<--strong-->子<--strong-->按钮<--strong-->父

此外，您的按钮不应该对控制器层次结构一无所知，因此我认为让您的视图与它们所来源的控制器以外的其他对象进行通信是不好的 MVC。这总是迟早会惹上麻烦的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:49:52.493

直接从 UIControlEvents 调用委托方法是一种很好的做法。无论如何，它是 msg_send 的基本等价物，因为按钮从您的目标和选择器参数构建调用。并且它不会产生调用中间人方法会导致的轻微惩罚，从而消除开销。

# ios - 如何将子视图添加到另一个子视图并使其显示？

> ID：10527133
> 
> 赞同：1
> 
> 时间：2012-05-10T03:27:18.983
> 
> 标签：ios, uiview, scrollview, addsubview

我正在做什么创建 a`UIImageView`并希望将其添加到 a`UIScrollingView`作为其滚动内容，但它从未出现。所以我尝试了下面的代码，现在问题对我来说很清楚了。如何将子视图添加到另一个子视图？

```
 //in myViewController.m
 @synthesize scrollView = _scrollView;
 - (void) viewDidLoad{ 
     UIView* simpleView = [[UIView alloc] initWithFrame:CGRectMake(0,0,300,200)];
     [simpleView setBackgroundColor: [UIColor BlueColor]];
     [self.view addSubview: simpleView]  //this would work, the simple view appears
     [self.scrollView addSubview: simpleView]  //this would not work, the simple view doesn't appear
 } 
```

scrollView 属性与情节提要中的 ScollView 挂钩，这是该控制器中唯一的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:56:04.410

你需要这样做：

```
[self.view addSubview: scrollview]  
[self.scrollView addSubview: simpleView] 
```

基本上在另一个之上添加一个并不是所有东西都堆叠在视图上。自我顶部视图顶部的图像几乎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:55:02.600

一种可能性：滚动视图可能未链接到`scrollView`xib/storyboard 中的属性。在这个方法中设置一个断点并检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:50:35.010

一个视图只能有**一个**超级视图。

所以当你这样做时：

```
[self.view addSubview: simpleView];
[self.scrollView addSubview: simpleView]; 
```

您只需将 simpleView superView 设置为 self.view，然后将其替换为 self.scrollView。simpleView 不再是 self.view 的子视图。

正如 ECEsurfer 所说，堆叠您的观点：

```
[self.view addSubview: scrollview];
[self.scrollView addSubview: simpleView]; 
```

希望能帮助到你 ！

# ios - CALayer 绘制完成时收到通知

> ID：10527134
> 
> 赞同：1
> 
> 时间：2012-05-10T03:27:48.703
> 
> 标签：ios, core-animation, calayer

当某个CALayer的绘图操作（包括子图层的绘图）完成时，有什么方法可以得到通知？

我需要这个的原因是，当我的图层框架正在调整大小并因此重新绘制（昂贵且缓慢）时，我想显示一个临时图像快照，它可以很好地缩放到新大小以隐藏旧内容。因此，我想知道何时关闭图像快照（而不是设置任意时间延迟）。

# c# - Linq 查询错误从数据库中提取 blob 图像...对象必须实现 IConvertible

> ID：10527135
> 
> 赞同：0
> 
> 时间：2012-05-10T03:27:54.067
> 
> 标签：c#, subsonic

我的查询返回一个错误，指出“对象必须实现 IConvertible”。错误发生在 .FirstOrDefault() 行上。我正在尝试从数据库中提取 blob 图像并将其返回给 ajax 调用。我一直在寻找 2 天的答案，但找不到任何东西。

```
 [HttpGet]
        //[Authorize]
        public ActionResult getChartInfo(string ticker)
        {
            var db = new MarketSymmetricsSite.msxxdbDB();

            System.Linq.IQueryable<string> gQuery = (System.Linq.IQueryable<string>)(from mg in db.Markets where mg.tickerID == ticker select mg.pGraph);
            string mGraph = gQuery.FirstOrDefault(); ;
            byte[] test = new byte[mGraph.Length];
            char[] CharArray = mGraph.ToCharArray();

            byte[] ByteArray = new byte[CharArray.Length];

            for (int i = 0; i < CharArray.Length; i++)
            {

                ByteArray[i] = Convert.ToByte(CharArray);

            }

            return Json(ByteArray, JsonRequestBehavior.AllowGet);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:48:47.383

您需要使用 var 然后将图像从二进制转换为图像文件

```
var img = (from mg in db.Markets where mg.tickerID == ticker select mg.pGraph).FirstOrDefault();
va rconvertedimage = ByteArrayToImage(img.Image.ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:58:27.280

为了解决这个问题，我所要做的就是将数据库中的数据类型从 blob 更改为二进制，瞧。希望这会帮助任何可能需要它的人。

# android - 如何在整个 android 应用程序中访问 SQLite 数据库？

> ID：10527137
> 
> 赞同：0
> 
> 时间：2012-05-10T03:28:22.650
> 
> 标签：android, sqlite

我一生都无法弄清楚如何通过 Android 应用程序中的多个活动访问 SQLite DB。我尝试使用应用程序类，但它不起作用。有人可以向我展示一个如何工作的例子吗？我基本上有一个标签栏设置，需要从每个标签访问数据库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:37:48.130

也许这可以让你开始：

```
private MessagesDatabaseAdapter mDatabaseAdapter;
...
private void someMethod(Context context) {
mDatabaseAdapter.open();
mDatabaseAdapter.insertMessage(timestamp, number, body);
mDatabaseAdapter.close();
} 
```

在你的 DBClass

```
 /*Inserts a message into the db */
    public void insertMessage(long timestamp, String number, String body) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_TIMESTAMP, timestamp);
    initialValues.put(KEY_NUMBER, number);
    initialValues.put(KEY_BODY, body);
    db.insert(Constants.DATABASES_TABLE_MESSAGES, null, initialValues);
}

        /* opens the database */
public MessagesDatabaseAdapter open() throws SQLException {
    db = DBHelper.getWritableDatabase();
    return this;
}

/* closes the database */
public void close() {
    DBHelper.close();
} 
```

这个[教程](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)非常好，虽然它不是你提到的你可以从中获得基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:41:22.670

使您的 DB 类成为单例，您将能够在所有活动中使用它。不要关闭数据库，app进程结束时会自动关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T03:41:49.287

请参阅[记事本教程](http://developer.android.com/resources/tutorials/notepad/index.html)。

具体来说，[这个](http://developer.android.com/resources/tutorials/notepad/notepad-ex1.html)页面告诉您如何使用您创建的 DBAdapter 帮助器类：

> NotesDbAdapter 的构造函数采用 Context，它允许它与 Android 操作系统的各个方面进行通信。这对于需要以某种方式接触 Android 系统的类来说是很常见的。Activity 类实现了 Context 类，所以通常在需要 Context 时，您只需从 Activity 传递它。

您可以从任何 Activity 实例化和使用 NotesDbAdapter，并传入您的上下文。

# android - 从另一个应用程序调用应用程序

> ID：10527138
> 
> 赞同：-3
> 
> 时间：2012-05-10T03:28:26.953
> 
> 标签：android, android-intent

我有两个不同的应用程序，主应用程序和小应用程序。如果我的主应用程序正在运行，我希望我的小应用程序自动运行。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:32:50.023

使用此意图从您的应用程序启动另一个应用程序：

```
Intent intent25 = new Intent(Intent.ACTION_MAIN).addCategory(
Intent.CATEGORY_LAUNCHER).setClassName("SMALL_APP_PACKAGE_NAME",
"SMALL_APP_PACKAGE_NAME.Testservice").addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
.addFlags(Intent.FLAG_FROM_BACKGROUND).setComponent(new ComponentName("SMALL_APP_PACKAGE_NAME",
"SMALL_APP_PACKAGE_NAME.Testservice"));
getApplicationContext().startActivity(intent25); 
```

# python - 如何从给定目录动态加载 python 类？

> ID：10527141
> 
> 赞同：7
> 
> 时间：2012-05-10T03:29:34.110
> 
> 标签：python, import

如果我定义了一个具有相应目录的模块**模块**`module/`，我可以从子模块（例如`a.py`或）动态加载类`b.py`吗？

--module
----a.py
----b.py

这是否需要知道要搜索的类名？我可以设置一个以某种方式加载这些孩子的基类吗？

基本用例是允许用户编写一些他或她自己的代码，程序将加载到该代码中。就像 rails 允许您在某些目录中编写自己的控制器、视图和模型一样。

到目前为止我动态加载模块的代码是

```
def load(folder):
    files = {}
    for filename in os.listdir(folder):
      if (filename[0] != '_' and filename[0] != '.'):
        files[filename.rstrip('.pyc')] = None

    # Append each module to the return list of modules
    modules = []
    mod = __import__(folder, fromlist=files.keys())
    for key in files.keys():
      modules.append(getattr(mod, key))

    return modules 
```

我希望修改它以返回类对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:23:54.417

您正在寻找[`pkgutil.walk_packages`](http://docs.python.org/library/pkgutil.html#pkgutil.walk_packages). 使用它，您可以执行以下操作：

```
def load(root_import_path, is_valid=lambda entity: True):
    """Returns modules in ``root_import_path`` that satisfy the ``is_valid`` test

    :param root_import_path: An string name for importing (i.e. "myapp").
    :param is_valid: A callable that takes a variable and returns ``True``
                     if it is of interest to us."""

    prefix = root_import_path + u"."
    modules = []

    for _, name, is_pkg in walk_packages(root_import_path, prefix=prefix):
        if is_pkg: 
            continue
        module_code = __import__(name)
        contents = dir(module_code)
        for thing in contents:
            if is_valid(thing):
                modules.append(thing)

    return modules 
```

或者，如果你不介意承担依赖，你可以试试[`straight.plugin`](https://github.com/ironfroggy/straight.plugin)加载器，它比这个简单的`load`函数要复杂一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T15:54:36.380

```
#!/usr/bin/env python

import os
import sys
import inspect

def load_modules_from_path(path):
   """
   Import all modules from the given directory
   """
   # Check and fix the path
   if path[-1:] != '/':
       path += '/'

   # Get a list of files in the directory, if the directory exists
   if not os.path.exists(path):
        raise OSError("Directory does not exist: %s" % path)

   # Add path to the system path
   sys.path.append(path)
   # Load all the files in path
   for f in os.listdir(path):
       # Ignore anything that isn't a .py file
       if len(f) > 3 and f[-3:] == '.py':
           modname = f[:-3]
           # Import the module
           __import__(modname, globals(), locals(), ['*'])

def load_class_from_name(fqcn):
    # Break apart fqcn to get module and classname
    paths = fqcn.split('.')
    modulename = '.'.join(paths[:-1])
    classname = paths[-1]
    # Import the module
    __import__(modulename, globals(), locals(), ['*'])
    # Get the class
    cls = getattr(sys.modules[modulename], classname)
    # Check cls
    if not inspect.isclass(cls):
       raise TypeError("%s is not a class" % fqcn)
    # Return class
    return cls

def main():
    load_modules_from_path('modules')
    # load the TestClass1
    class_name = load_class_from_name('class1.TestClass1')
    # instantiate the Testclass1
    obj = class_name()
    # using this object obj to call the attributes inside the class
    print obj.testclass1()

if __name__ == '__main__': main() 
```

* * *

在 modules 目录中，我还有另外两个用于测试的模块：

```
[♫ test] modules :~ pwd
/tmp/dynamic_loader/modules

[♫ test] modules :~ ls -lR
total 32
-rw-r--r--  1 staff  staff  138 Aug 30 21:10 class1.py
-rw-r--r--  1 staff  staff  575 Aug 30 21:11 class1.pyc
-rw-r--r--  1 staff  staff  139 Aug 30 21:11 class2.py
-rw-r--r--  1 staff  staff  576 Aug 30 21:11 class2.pyc 
```

* * *

```
[♫ test] modules  cat class1.py

class TestClass1(object):
  def testclass1(self):
      print 'I am from testclass1'

  def some_function():
      print 'some function 1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:13:24.357

以下两个模块一起工作，做类似的事情。基本上，您可以`dir()`在您的模块中检查使用`getattr`.

[http://code.google.com/p/pycopia/source/browse/trunk/QA/pycopia/QA/shellinterface.py](http://code.google.com/p/pycopia/source/browse/trunk/QA/pycopia/QA/shellinterface.py)

[http://code.google.com/p/pycopia/source/browse/trunk/aid/pycopia/module.py](http://code.google.com/p/pycopia/source/browse/trunk/aid/pycopia/module.py)

# java - 实现一个词法分析器

> ID：10527143
> 
> 赞同：1
> 
> 时间：2012-05-10T03:29:43.320
> 
> 标签：java, regex, analyzer, lexical

我的任务是为语言 c-- 实现词法分析器。我们必须将 c-- 代码翻译成一系列标记，这些标记将在内部表示为整数，因为它更容易操作。该语言的一些词汇约定是有关键字，如 double、else、if、int、return、void 和 while。还有特殊符号，如 + - * / < <= > >= == != = ; , . ( ) [ ] { } /* */ //. 标识符可以以任何字母或下划线开头，后跟字母、数字和下划线的任意组合。空格分隔标记并被忽略。数字可以是整数或小数，并且允许使用注释行和块。

```
import java.io.*;
public class Lex {

    public static boolean contains(char[] a, char b){
        for (int i = 0; i < a.length; i++) {
            if(b == a[i])
                return true;
        }
        return false;
    } 
    public static void main(String args[]) throws FileNotFoundException, IOException{

        //Declaring token values as constant integers.
        final int T_DOUBLE = 0; 
        final int T_ELSE = 1;
        final int T_IF = 2; 
        final int T_INT = 3;
        final int T_RETURN = 4; 
        final int T_VOID = 5;
        final int T_WHILE = 6; 
        final int T_PLUS = 7;
        final int T_MINUS = 8; 
        final int T_MULTIPLICATION = 9;
        final int T_DIVISION = 10; 
        final int T_LESS = 11;
        final int T_LESSEQUAL = 12; 
        final int T_GREATER = 13;
        final int T_GREATEREQUAL = 14; 
        final int T_EQUAL = 16;
        final int T_NOTEQUAL = 17;
        final int T_ASSIGNOP = 18; 
        final int T_SMEICOLON = 19;
        final int T_PERIOD = 20; 
        final int T_LEFTPAREN = 21;
        final int T_RIGHTPAREN = 22; 
        final int T_LEFTBRACKET = 23;
        final int T_RIGHTBRACKET = 24; 
        final int T_LEFTBRACE = 25;
        final int T_RIGHTBRACE = 26; 
        final int T_ID = 27;
        final int T_NUM = 28;
        char[] letters_ = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D',
            'E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','_'};
        char[] numbers = {'0','1','2','3','4','5','6','7','8','9'};
        char[] symbols = {'+','-','*','/','<','>','!','=',':',',','.','(',')','[',']','{','}'};
        FileInputStream fstream = new FileInputStream("src\\testCode.txt");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        BufferedWriter bw1 = new BufferedWriter(new FileWriter(new File("src\\output.txt"), true));
        BufferedWriter bw2 = new BufferedWriter(new FileWriter(new File("src\\output2.txt"), true));
        String scanner;String temp = "";
        int n = 0;
        while((scanner = br.readLine()) != null){
            for (int i = 0; i < scanner.length(); i++) {
                for (int j = 0; j < scanner.length(); j++) {
                    if(contains(letters_,scanner.charAt(i)) || contains(numbers,scanner.charAt(i)) || contains(symbols,scanner.charAt(i))){
                        j++;
                        n++;
                        if(scanner.charAt(j) == ' ' || scanner.charAt(j) == '\n' || scanner.charAt(j) == '\t'){

                        }
                    }

                }

            }
        }

        in.close();

    }

} 
```

这是我们的测试代码：

```
int fact(int x) {
// recursive factorial function 
   if (x>1) 
      return x * fact(x-1);
   else return 1;
}

void main(void) {
/* CS 311 project 2
A lexical analyzer */
   int x, y, z;
   double _funny;
   x = get_integer();
   _Funny = get_double();
   if (x>0) 
      print_line(fact(x));
   else if (_funny != 3.14) 
      print_line(x*_funny);
} 
```

这应该是我们的输出

> 3 27 21 3 27 22 25 2 21 27 13 28 22 4 27 9 27 21 27 8 28 22 18 1 4 28 18 26 5 27 21 5 22 25 3 27 19 27 19 27 18 0 277 18 27 1817 27 17 27 21 22 18 2 21 27 13 28 22 27 21 27 21 27 22 22 18 1 2 21 27 12 28 22 27 21 27 9 27 22 18 26
> 
> INT id leftparen INT id rightparen leftbrace IF leftparen id 大于 num rightparen RETURN id 乘法 id leftparen id 减 num rightparen 分号 ELSE RETURN num 分号 rightparen VOID id leftparen VOID rightparen leftbrace INT id comma id comma id 分号 DOUBLE id 分号 id assignop id leftparen rightparen 分号id assignop id leftparen rightparen 分号 IF leftparen id 更大的 num rightparen id leftparen id leftparen id rightparen rightparen 分号 ELSE IF leftparen id notequal num rightparen id leftparen id 乘法 id rightparen 分号 rightbrace

好的，我根据用户 John 的建议编写了一些代码。我仍然对这将如何工作感到困惑。当我迭代第二个循环以查找空白或符号时，我如何知道符号的 ws 之前出现了什么类型的令牌。我试图将我跳过的字符放入字符串中并使用 case 语句来确定它，但我认为它会将整个文件写入字符串，因此我的标记永远不会匹配。另外，方法如何找到评论并安全地忽略它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:30:25.790

非常熟悉的味道，除了我正在编写 LLK 分析器的事实......在你的情况下，试着看看[形式语法](http://dragonbook.stanford.edu/lecture-notes/Stanford-CS143/06-Formal-Grammars.pdf)之类的方式 - 在这些语法执行分析之前，你的步骤几乎是必需的步骤。也许一些像 lex && flex 这样的工作解析器（开源）会有所帮助。

INHO，最简单的方法是将输入文件逐个字符读入某个字符串并检查，该字符串是否与您的正则表达式之一匹配...如果匹配，则将适当的代码写入输出并清除您用作缓冲区的字符串. 在这种情况下有两个问题：这在 O(n*m) 中有效，其中 n 是您的文本长度，m 是您拥有的正则表达式的数量（在有价值的情况下），其次 - 您不能使用前缀表达式...我的意思是，您不能有任何表达式以将另一个表达式作为前缀（开始），否则该表达式将无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:13:56.097

有几种不同的方法可以处理这个程序。在不编写代码的情况下，我将尝试解释您需要做什么。

从您提交的示例中。

你的导师给了你这个项目的钥匙。他给了你输出，你可以构建一个状态表。

您可以通过输出并手动执行此操作以检查您的答案，或创建一个小程序为您执行此操作。

这是一张表格，左边是状态编号，右边是对应的单词。

```
 3  int,  
         27 ID,
         21 leftparen, 
         22 right paren,
         25 left brace s, 
         2  if,
         13  greater, 
```

等等。

您将需要创建一个输入缓冲区
2 个输出缓冲区
2 个循环 一个外部循环和一个内部循环
1 个对应于状态表的 case 语句。

当您通过输入缓冲区时，您初始化外循环初始化内循环比较第一个字符并确定它是否是有效字符？if not 递增循环，直到找到有效字符

一旦找到有效字符，它就是令牌的开始。然后通过查找空格或特殊符号来增加内部循环来查找令牌的结尾。然后使用case语句输出一个缓冲区中的数字和第二个缓冲区对应的单词。

然后打印出数字缓冲区。然后打印出单词缓冲区。

然后将外循环增加到内循环 + 1 使内循环等于外循环

继续，直到找到文件结尾。如果它们与您的老师的输出相匹配，您就完成了。如果不是，你有一个逻辑错误。然后检查哪个值无效，并查看程序的那部分。

伙计们已经 20 岁了。

# matlab - 倍频程加载函数

> ID：10527146
> 
> 赞同：1
> 
> 时间：2012-05-10T03:30:52.943
> 
> 标签：matlab, octave

我正在尝试使用以下代码从子目录加载 mat 文件：

```
% filename_str is read from a text file
directoryname_str = "./data";
f = fullfile(directoryname_str, filename_str);
load(f); 
```

当我运行这个序列时，加载说它找不到文件......但是当我将相对路径和文件名手动复制或键入到活动的八度音阶会话中时，一切都像冠军一样工作，没有错误。

我认为这与 octave 如何搜索 mat 文件有关？如果是这样，我需要进行什么正确的环境变量或函数调用才能使此代码正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:37:52.263

1.  您确定您放入变量`f`中的内容与您在八度音阶中手动输入的内容相同吗？

2.  你也在同一个目录吗？因为您正在指定相对路径，所以应该是这种情况..您可以获取当前目录 octave 所在的位置`pwd`

3.  最后，您可以使用存在来仔细检查 octave 本身中的文件是否[存在](http://octave.sourceforge.net/octave/function/exist.html)

    ```
    exist(f,'file') 
    ```

    如果这返回 false，那么您的当前目录肯定有问题，发生了一些非常奇怪的事情..

# iphone - 使 UITextView 可滚动

> ID：10527148
> 
> 赞同：5
> 
> 时间：2012-05-10T03:31:50.983
> 
> 标签：iphone, xcode, ipad, interface-builder, uitextview

这看起来很愚蠢，但我检查了所有我发现的类似问题的“解决方案”框，但没有什么能奏效。我有一个 UITextView 框，我希望它可以滚动，我的设置如下。有人知道为什么它不让我滚动吗？

![可滚动失败](../Images/eb20ada3608bbe4a9118e104de5645b1.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T08:14:33.137

还请确保在 .xib 文件中选中启用用户交互

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T09:40:33.977

我也遇到了 unscrollable 的问题`UITextView`，但这里的其他答案没有帮助（当然这是一个特殊情况：我只需要在水平查看应用程序时滚动）。

以防万一有人遇到类似的问题并在这里登陆：帮助我的是为 textview 激活垂直`Autosizing`（`Size Inspector`下`View`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T07:53:51.260

*   确保你的 UITextView 中有文本
*   检查 UITextView 是否已启用（设置中有一个属性） - 它应该已启用。

确保不要在代码中更改这些设置（或“启用滚动”属性）。

祝你好运 ！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T03:34:42.410

您实际上必须在 textview 中有与原始帧高度重叠的文本才能使其可滚动

# sql - 如何编写将输入表中的多行连接到输出表中的一行的 SQL 查询

> ID：10527157
> 
> 赞同：0
> 
> 时间：2012-05-10T03:33:41.570
> 
> 标签：sql, oracle

给定以下示例表：

```
C1     C2      C3
=================
A      21      S
A      22      S
A      23      S
A      24      T
B      25      S
B      26      S 
```

如何编写 SQL 查询以提供以下输出：

```
COL1   COL2       COL3
======================
A      21,22,23      S
A      24            T
B      25,26         S 
```

对于输入表中 C1 和 C3 相同的所有行，我希望输出表中的一行将所有 C2 值连接起来，用逗号分隔。

我正在使用 Oracle 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:49:20.280

这将是一个特定于数据库的答案，所以请您使用什么数据库。Mysql很流行，所以这里是Mysql5的答案：

```
select col1, group_concat(col2 SEPARATOR ','), col3 from tbl group by col1,col3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:42:22.673

如果您使用的是 oracle 11g，请尝试此操作

```
SELECT 
     C1, 
     LISTAGG(C2, ',') as C2,
     C3
from 
     tbl 
GROUP BY 
     C1,C1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T03:47:15.447

在 MySQL 中，您可以使用[Group_Concat](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)。例如：

> SELECT GROUP_CONCAT(Language) As Languages FROM CountryLanguage WHERE CountryCode = 'THA';

# php - 如何在不重新加载页面的情况下为 php 提供 post 变量

> ID：10527160
> 
> 赞同：-4
> 
> 时间：2012-05-10T03:33:55.470
> 
> 标签：php, javascript, html, ajax

我想从不同页面上的文本框中给 php 一个简单的变量，而不重新加载它。我听说你需要 ajax 来做到这一点，但我不确定如何做到这一点。我不知道如何使用ajax，所以我只需要一个例子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:22:33.293

Jquery ( [http://jquery.com/](http://jquery.com/) ) 是一个很好的 javascript 库，可以处理这个问题。查看 .post 函数（[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)），这通常用于 ajax 请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:17:31.207

我尝试过使用 javascript，但到目前为止，jQuery 是解决方案。

```
 $.ajax ({
            type:'post',
            url:'yourpage.php',
            success: function(response.trim()) {

                                               }
    data: $("#bidform").serialize();
           }); 
```

# android - Android RESTORE_TRANSACTIONS 返回 RESULT_SERVICE_UNAVAILABLE

> ID：10527162
> 
> 赞同：4
> 
> 时间：2012-05-10T03:34:03.330
> 
> 标签：android, in-app-purchase, google-play

我有一个使用应用内购买的应用。除了 UI 组件，我已经集成了 Dungeons 示例中的所有代码。我已经提交了我的 apk 草案，激活了它，创建了我的应用内购买，所有这些都被管理并发布了。

我成功地购买了我的应用内商品并毫无问题地解锁了相应的内容。我遇到的问题是，每当我调用恢复事务时，我都会返回错误代码 RESULT_SERVICE_UNAVAILABLE。我知道结果代码意味着该应用程序无法访问商店，但这没有任何意义，因为我可以很好地购买商品。

我正在使用 Android v2.3.6 和 Google Play v3.5.16 的 HTC Nexus One 上运行。我正在通过 WiFi 连接，因为该设备没有数据计划。安装的apk和提交的draft apk完全一样。我正在通过 adb -d install 命令安装 apk。

任何可能导致此问题或在哪里查看的建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:41:50.943

如果您在日志中发现类似的消息：

05-30 09:28:23.760: E/Volley(4636): [13] BasicNetwork.performRequest: [https://android.clients.google.com/vending/api/ApiRequest的意外响应代码 429](https://android.clients.google.com/vending/api/ApiRequest)

这可能意味着您在一定时间内发送了太多 RESTORE_TRANSACTIONS 请求。谷歌显然有一些限制要求。它在测试应用内计费期间发生在我身上，大约。20-30 恢复事务请求正常，然后 - 完全相同的问题 - 服务不可用响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:54:03.253

我遇到了同样的问题，结果发现设备上主要 gmail 帐户的密码错误。因此，当我检查是否支持计费时，我得到了 RESULT_OK，但对于恢复购买，我得到了 RESULT_SERVICE_UNAVAILABLE。

进入你的 gmail 或任何谷歌应用程序并刷新。仔细检查帐户密码是否正确，然后重试。

此问题在 logcat 中也显示为

NotifyingErrorListener.onErrorResponse：InAppPurchaseInformationRequest 上的服务器错误：com.android.AuthFailureError：用户需要（重新）输入凭据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:22:55.483

这确实意味着您已经完成了太多 RESTORE_TRANSACTIONS 并且不幸的是，该服务将无法使用 X 天，因为我遇到了同样的问题。

但是...这是特定于设备的，因此如果您在另一台设备上再次开始测试或将设备恢复出厂设置，您应该能够避免它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T03:39:33.573

检查 logcat 输出，可能那里有一些警告。除此之外，不能 100% 确定 RESTORE_TRANSACTIONS 可用于未发布的应用程序和测试帐户。在这种情况下，“服务不可用”可能只是意味着“不支持”？

# java - IntelliJ 下的 Scala 调试速度非常慢

> ID：10527163
> 
> 赞同：3
> 
> 时间：2012-05-10T03:34:06.870
> 
> 标签：java, macos, scala, ide, intellij-idea

我目前正在使用 IntelliJ 10.5.4 跟踪一个相对较小的 Scala 程序（Apache 的 Kafka），同时在另一个项目中运行其他几个 Java 应用程序。虽然 Java 应用程序运行良好，但 Scala 调试速度却非常慢，一个简单的“Make Project”将轻松花费 2 分钟，即使是基本的光标键击也需要一秒钟才能反映在屏幕上。

我之前使用过 IntelliJ，在多个项目下同时运行多达 6 个应用程序，它完全没有任何问题。硬件也不是问题，这一切都在 Java 1.6.0_31 下运行在最近的 Macbook Pro（256GB SSD、8Gb RAM、四核 i7）上。

在 IntelliJ 下调试时，是否有任何提示/技巧可以使 Scala 表现得体面？或者，人们用什么来进行 Scala 调试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:53:19.843

使用[最新的 Scala 插件](http://confluence.jetbrains.net/display/SCA/Scala+Plugin+Nightly+Builds+for+IDEA+X)尝试[最新的 Idea 11 EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+11.1+EAP)。它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:58:42.137

# tl;博士

回复：编译时间，[你启用了 FSC](http://blog.jetbrains.com/scala/2011/10/05/real-fsc-support/)吗？这极大地帮助了 Scala 编译时间。

回复：整体缓慢，您可能需要[调整 JVM 设置](http://alexshabanov.com/2011/12/12/idea-vmoptions/)。Scala 可能会占用更多内存，因此您可能必须增加您的`-Xmx`价值以减少垃圾收集的时间。或者降低它，如果它太高的话。或更改垃圾收集器。供参考，这是我的：

```
<key>VMOptions</key>
<string>-ea -Xverify:none -Xbootclasspath/a:../lib/boot.jar -XX:+UseConcMarkSweepGC </string>
<key>VMOptions.i386</key>
<string>-Xms128m -Xmx512m -XX:MaxPermSize=250m -XX:ReservedCodeCacheSize=64m</string>
<key>VMOptions.x86_64</key>
<string>-Xms128m -Xmx800m -XX:MaxPermSize=350m -XX:ReservedCodeCacheSize=64m -XX:+UseCompressedOops</string> 
```

# 其实想通了

您可能需要进行一些分析才能找出性能问题的真正含义。最简单的方法是打开[活动监视器](http://en.wikipedia.org/wiki/Activity_Monitor)以查看内存是否低、CPU 利用率高或磁盘活动是否高。这至少会给你一个关于发生了什么的线索。你有一个 SSD，所以磁盘 I/O 可能不是问题。

您可能需要分析 IDEA 本身，例如使用[YourKit Java Profiler](http://www.yourkit.com/download/index.jsp)运行它。这可能会告诉您一些有趣的事情，例如 IDEA 是否花费了过多的时间进行垃圾收集。

不过，总的来说，Scala 似乎比 IntelliJ 上的 Java 更占用内存。有可能是你`-Xmx`设置的太低了，导致垃圾回收过多。或者它可能设置得太高，所以当它进行垃圾收集时，你会在应用程序中暂停。更改您使用的收集器可能会对此有所帮助，但是对于所有收集器，都有一个收益递减点，设置`-Xmx`太高会导致性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:12:26.320

我发现我不小心在 List 的方法之一中设置了断点。它在调试 scala 项目时使 intellij 超级慢，但是当我取消断点时，intellij 再次变得正常。

点击ctrl+shift+F8可以找到断点列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:00:29.067

[从 2.0.1 开始，带有http://scala-ide.org/download/current.html](http://scala-ide.org/download/current.html)的Eclipse对我来说运行良好。

我的东西目前是基于 maven 的，项目结合了 Java 和 Scala。我可以毫无问题地跨语言进行调试。

# unit-testing - 如何对从 webapp2 请求处理程序传递给 jinja2 模板的模板变量进行单元测试

> ID：10527166
> 
> 赞同：10
> 
> 时间：2012-05-10T03:34:32.100
> 
> 标签：unit-testing, google-app-engine, wsgi, jinja2, webapp2

我正在尝试测试我的 webapp2 处理程序。为此，我认为向处理程序发送请求是个好主意，例如：

```
request = webapp2.Request.blank('/')
# Get a response for that request.
response = request.get_response(main.app) 
```

问题是，响应主要是一堆 HTML 等。

我想查看在转换为 HTML 之前从处理程序传递给我的 jinja2 模板的内容。

我希望我的测试能够达到处理程序类代码中的状态。我不想看到某些变量在响应处理程序中的样子，然后我想看看 dict 模板在传递给 render_to_response() 之前的样子

我想测试这些变量是否具有正确的值。

到目前为止，这是我的测试代码，但我被卡住了，因为 response = request.get_response() 只是给了我一堆 html 而不是原始变量。

```
import unittest
import main
import webapp2

class DemoTestCase(unittest.TestCase):
    def setUp(self):
        pass

    def tearDown(self):
        pass

    def testNothing(self):
        self.assertEqual(42, 21 + 21)

    def testHomeHandler(self):
        # Build a request object passing the URI path to be tested.
        # You can also pass headers, query arguments etc.
        request = webapp2.Request.blank('/')
        # Get a response for that request.
        response = request.get_response(main.app)

        # Let's check if the response is correct.
        self.assertEqual(response.status_int, 200)
        self.assertEqual(response.body, 'Hello, world!')

if __name__ == '__main__':
    unittest.main() 
```

这是我的处理程序：

```
class HomeHandler(BaseHandler):
    def get(self, file_name_filter=None, category_filter=None):
        file_names = os.listdir('blog_posts')
        blogs = []

        get_line = lambda file_: file_.readline().strip().replace("<!--","").replace("-->","")

        for fn in file_names:
            with open('blog_posts/%s' % fn) as file_:
                heading = get_line(file_)
                link_name = get_line(file_)
                category = get_line(file_)

            date_ = datetime.strptime(fn.split("_")[0], "%Y%m%d")

            blog_dict = {'date': date_, 'heading': heading,
                         'link_name': link_name,
                         'category': category,
                         'filename': fn.replace(".html", ""),
                         'raw_file_name': fn}

            blogs.append(blog_dict)

        categories = Counter(d['category'] for d in blogs)
        templates = {'categories': categories,
                     'blogs': blogs,
                     'file_name_filter': file_name_filter,
                     'category_filter': category_filter}

        assert(len(file_names) == len(set(d['link_name'] for d in blogs)))

        self.render_template('home.html', **templates) 
```

这是我的基本处理程序：

```
class BaseHandler(webapp2.RequestHandler):
    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def render_template(self, filename, **kwargs):
        #kwargs.update({})
        #TODO() datastore caching here for caching of (handlername, handler parameters, changeable parameters, app_upload_date)
        #TODO() write rendered page to its own html file, and just serve that whole file. (includes all posts). JQuery can show/hide posts.
        self.response.write(self.jinja2.render_template(filename, **kwargs)) 
```

也许我对如何进行单元测试有错误的想法，或者我应该以一种更容易测试的方式编写我的代码？或者有什么方法可以获取我的代码状态？

此外，如果有人要重新编写代码并更改变量名，那么测试就会中断。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:51:09.063

您可以模拟`BaseHandler.render_template`方法并测试其参数。

有关流行的 Python 模拟框架的列表，请参阅[此问题。](https://stackoverflow.com/questions/98053/what-is-your-favorite-python-mocking-library)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T05:39:10.053

感谢 proppy 的建议，我最终使用了一个模拟。

[http://www.voidspace.org.uk/python/mock/](http://www.voidspace.org.uk/python/mock/)

（mock 在 python 3 中作为 part 或 unittest.mock 包含）

所以这是我的**main.py**代码，它类似于我在 webapp2 中的代码：

注意而不是 BaseHandler.render_template 我有 BaseHandler.say_yo

```
__author__ = 'Robert'

print "hello from main"

class BaseHandler():
    def say_yo(self,some_number=99):
        print "yo"
        return "sup"

class TheHandler(BaseHandler):
    def get(self, my_number=42):
        print "in TheHandler's get()"
        print self.say_yo(my_number)
        return "TheHandler's return string" 
```

和**atest.py**：

```
__author__ = 'Robert'

import unittest
import main
from mock import patch

class DemoTestCase(unittest.TestCase):
    def setUp(self):
        pass

    def tearDown(self):
        pass

    def testNothing(self):
        self.assertEqual(42, 21 + 21)

    def testSomeRequests(self):
        print "hi"
        bh = main.BaseHandler()
        print bh.say_yo()

        print "1111111"

        with patch('main.BaseHandler.say_yo') as patched_bh:
            print dir(patched_bh)
            patched_bh.return_value = 'double_sup'
            bh2 = main.BaseHandler()
            print bh2.say_yo()
            print "222222"

        bh3 = main.BaseHandler()
        print bh3.say_yo()

        print "3333"

        th = main.TheHandler()
        print th.get()

        print "44444"
        with patch('main.BaseHandler.say_yo') as patched_bh:
            patched_bh.return_value = 'last_sup'
            th = main.TheHandler()
            print th.get()
            print th.get(123)
            print "---"
            print patched_bh.called
            print patched_bh.call_args_list
            print "555555"

if __name__ == '__main__':
    unittest.main() 
```

这段代码提供了大量的输出，这里是一个示例：

```
44444
in TheHandler's get()
last_sup
TheHandler's return string
in TheHandler's get()
last_sup
TheHandler's return string
---
True
[call(42), call(123)]
555555 
```

# java - 历史服务器未在 cloudera Hadoop 上启动

> ID：10527168
> 
> 赞同：1
> 
> 时间：2012-05-10T03:34:43.143
> 
> 标签：java, exception, hadoop, cloudera

我按照[此处](http://www.cloudera.com/blog/2011/11/building-and-deploying-mr2/)给出的说明设置了“hadoop” 。我成功下载并部署了它，可以运行除historyserver之外的所有守护进程并运行示例程序。当我运行 sbin/yarn-daemon.sh start historyserver 时，显示以下错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: historyserver
Caused by: java.lang.ClassNotFoundException: historyserver
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: historyserver.  Program will exit. 
```

任何人都可以在这个问题上帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T00:35:01.200

要启动历史服务器，现在的命令似乎是：

```
./sbin/mr-jobhistory-daemon.sh start historyserver 
```

# php - 如何在php中为新页面生成新的url

> ID：10527173
> 
> 赞同：0
> 
> 时间：2012-05-10T03:35:32.423
> 
> 标签：php, url, web

如果我们不使用框架，那么如何在 PHP 中为用户动态创建的新页面生成新的 url？例如，用户可能会创建一个新帐户或发布一篇新文章，那么我们将为该用户分配一个特定的 url，就像[http://www.a.com/username/article/2011231.php](http://www.a.com/username/article/2011231.php)一样。我的问题是如何生成特定数字 2011231 和整个 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:59:36.543

您正在寻找的是漂亮的网址

您需要使用 URL 重写。

您需要在数据库中使用适当的 URL 保存文章。假设用户创建了一篇文章`How to bake a cake`。您可以在`article`表格中存储这篇文章的漂亮 url，例如`how-to-bake-a-cake`. 您将需要一些机制来将标题转换为这些漂亮的 URL

你在前端的发言权`article.php`

的默认工作`article.php`是`example.com/article.php?url=how-to-bake-a-cake`

在 中，`article.php`您会找到带有 privided prettyurl 的文章并显示它。

现在你会使用`.htaccess`实际上有一个像这样的 URL`example.com/article/how-to-bake-a-cake`

在你的`.htaccess`

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^article/(.*)
RewriteRule article.php?url=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:51:26.993

从外观上看，该 URL 由 yearmonthday.php 格式的日期组成。如果这是您要复制的内容，则可以使用`date('Ymd')`. 另一方面，假设您想要一个递增的数字并将文章存储在数据库中，只需运行您的`INSERT`命令，然后使用`mysql_insert_id()`之后的函数来获取 ID。然后，您需要 Apache 重写以将 /username/article/[number].php 重写为 PHP 文件，该文件将在数据库中查找该文章并显示它，如下所示：

```
RewriteEngine On
RewriteRule ^/username/article/(\d*)\.php$ /articles.php?articleid=$1 
```

例如，这将需要一个请求`http://domain.com/username/article/12345.php`并将其发送到`/articles.php?articleid=12345`. 从那里，`$_GET["articleid"]`将包含 ID。如果你还需要 PHP 脚本来知道用户名，你可以使用这个：

```
RewriteEngine On
RewriteRule ^/(.*)/article/(\d*)\.php$ /articles.php?username=$1&articleid=$2 
```

然后`$_GET["username"]`会有用户名和`$_GET["articleid"]`文章 ID。

# iphone - 重新加载表的数据

> ID：10527175
> 
> 赞同：2
> 
> 时间：2012-05-10T03:35:44.797
> 
> 标签：iphone, ios, xcode, uitableview, reload

我有 5 个视图控制器，它们位于导航控制器层次结构中。当我到达我的最后一个视图控制器时，有一个按钮可以让我回到“主页”视图控制器（名为 CardWalletViewController），它是一个表视图控制器。这是我在上一个 VC 中使用的方法 ( `PointsResultsVC`)

```
- (IBAction)homePressed:(id)sender {
    NSArray *VCs = [self.navigationController viewControllers];
    [self.navigationController popToViewController:[VCs objectAtIndex:0] animated:YES];
} 
```

CardWalletVC 的单元格被来自 NSUserDefaults 中保存的 Card 实例的值填充，并且工作正常。

现在，我想要更新 my 中的值`CardWalletViewController`，即来自 my 的卡片的积分`PointsResultsVC`。请注意，此点保存在`NSUserDefault`s 中。

在尝试更新 CardWalletVC 中显示的值的过程中，我将 , 和 - 放在了所述`[self.tableView reloadData];`类的内部。我尝试在每种方法中一个一个地放置它，但它似乎不起作用。`-viewDidLoad``-viewWillAppear``viewDidAppear`

建议请。

**编辑：问题已解决**

这个作为我的指南[Save data from a tab and reloadData in another tab](https://stackoverflow.com/questions/5342458/save-data-from-one-tab-and-reloaddata-in-another-tab)。

正如我发现的那样，`-viewDidLoad`某个类只会被调用一次，在整个应用程序运行时。然而`-viewWillAppear`，每次视图出现时都会调用它。

因此，我只是将加载保存在 NSUserDefaults 中的值的方式 `-viewDidLoad`从`-viewWillAppear`. 另外，`-viewWillAppear`我在里面放置了`[self.tableView reloadData]`. 然后，问题解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:48:19.667

有很多事情*可能*会出错，因此您需要提供更多信息来缩小范围。

首先，不会调用 viewDidLoad ，因此您可以从此处将其删除。viewWillAppear 和 viewDidAppear 都会被调用，所以你只需要这两种方法之一。

接下来，您需要确定实际问题是什么。

1 - self.tableView 是对表格的正确引用吗？您是否正确维护参考？

2 - 表实际上是重新加载但使用旧数据，还是根本不重新加载？您可以记录 willDisplayCell 方法以查看视图出现时发生的情况。

有了这些信息，根本原因就可以缩小到一个可解决的问题。

# android - Android 布局效率，多个视图或单个隐藏视图？

> ID：10527179
> 
> 赞同：6
> 
> 时间：2012-05-10T03:36:15.420
> 
> 标签：android, android-layout, android-listview, android-view

我有一个`ListView`布局。有时布局需要看一种方式，有时需要另一种方式。它们主要是布局在不同区域的文本，具有不同的权重大小等。主视图与其他视图的比例约为 5:1。当它需要改变时，只有整个视图的 2/3 改变。

我想我有两个选择：

1.  （现在的样子）一个布局（所以它永远不必重新膨胀，因为回收的视图都是一样的）并且视图的第 2 2/3 是隐藏的，直到需要更改它，然后代码将显示它并隐藏视图的原始 2/3。

2.  （其他方式）两个布局，1/3 布局重复，每个布局在另一个 2/3 上。然后，当需要使用其中一种不同的布局时，来自`ListView`回收器的旧视图被丢弃，新的正确视图被膨胀，并在列表移动时再次返回。

所以我在这里要问的是，最好隐藏/显示同一布局的部分以防止 a 中的回收器`ListView`膨胀更多布局，或者有两个没有额外隐藏视图的缩减布局，并在它们膨胀时让它们膨胀需要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:15:10.037

如果这`TextViews`是这些布局的主要部分，我认为性能不会有很大差异，所以你可以选择任何一种方式。**我**会选择选项二，因为：

1.  正常行布局数与特殊行数之间的比例很大。如果您保持单一布局方法，那么您将不得不在代码中修改**每一**行的布局，无论是正常的还是特殊的，因为您可能正在处理一个`View`在显示正常时隐藏了 2/3 部分的回收一个（所以你最终每次都修改布局）。如果您要使用第二个选项，那么您可以从`getView`方法中消除这部分，并简单地使用 a`switch`查看您正在处理的行类型（在方法中每次都不再修改行布局`getView`，您让`ListView`句柄通过为您提供正确类型的行布局）。不要担心膨胀另一个布局文件（一次），这不是要害怕的性能损失。

2.  使用一种类型的布局意味着`Views`即使用户没有看到它们，您也会保留在内存中（因此您可能会阻止它们`ListView`膨胀更多`Views`（实际上只有一次）但同时您正在占用更多的内存，你甚至没有向用户显示）。第一个选项的优点是将数据绑定到行更简单，因为您可以使用所有视图（即使用户没有看到其中的一部分）而不是第二个选项，您可以查看需要根据行类型显示哪些数据。

3.  代码可读性。拥有两种行类型并测试以查看您在该`getView`方法中获得的哪一种更有意义，因为您可以看到每种行类型的逻辑。此外，如果您计划将来更改这些行布局或添加更多行类型，那会更好。

`ListView`只要您帮助它提供行类型，它就可以很好地回收视图。编辑：`ListView`将为您在适配器中声明的每种类型保留一个回收视图。因此，`ListView`它只会在第一次在 中找到第二个布局时膨胀第二个布局`ListView`，下次当它需要具有类型的行时，它将使用回收的一个（并且它将维护 2 种类型的回收视图，第一行和第二行类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:14:38.400

实际上，这一点额外的 GC 恕我直言不应该成为您决定的驱动力。

我会走更容易维护和理解的路线。

在 xml 中还有一个很好用的 include 标记，如下所示：

```
<include
    android:id="@+id/abc"  
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    layout="@layout/abc"   , where abc = the xml  file you want to include
    /> 
```

# iphone - 在 iPhone 中禁用 caldav 提醒

> ID：10527182
> 
> 赞同：2
> 
> 时间：2012-05-10T03:36:34.157
> 
> 标签：iphone, caldav

我正在为我们公司编写一个 caldav 服务器，它将与许多客户端兼容，其中一个主要支持的设备将是运行 iOS 4+ 的 iPhone。

此服务器将仅支持 VEVENT，但是当服务器最初在 iPhone 中的设置下配置时，iPhone 认为该服务器也支持 VTODO。由于没有列出 VTODO 日历，因此它会继续尝试在我的服务器上创建一个默认日历。控制台输出中的警告显示：“此帐户已启用任务，但没有任务日历。我们将创建一个默认的”我返回那个 MKCALENDAR 请求，响应为空，状态为 403，但是手机似乎没有意识到它失败了，并且仍然将提醒列表放在提醒应用程序中。我不应该在手机上标记此帐户未启用任务。

一般来说，我无法找到有关 caldav 服务器的太多信息，也没有关于 iOS 支持和期望从服务器获得的信息。我一直遵守包括 4791、5545、3744 和 4918 在内的多个 RFC 中的标准，但无法为这个特定问题找到任何帮助。我也浏览了苹果提供的开发者资源，但无济于事。

任何帮助或指向正确方向将不胜感激。乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:29:16.070

我们还需要支持向 iOS 提供 iCalendar 事件，并且在其中一些问题上苦苦挣扎。对于我们的问题，日历对我们的目标客户是只读的（我猜你的可能不是这样）。当我们意识到我们可以使用 subscribed calendars 选项来获取日历提要而无需其他任何东西时，服务器任务就大大简化了：

![在此处输入图像描述](../Images/971c860abceaf5cc4ed8030f20645bc4.png)

不完全是您问题的直接答案，但希望作为一个可供考虑的选项很有用。

# android - 检查是否在安装时安装了 android 应用程序

> ID：10527184
> 
> 赞同：0
> 
> 时间：2012-05-10T03:36:46.723
> 
> 标签：android, email

我正在制作一个从 K9 电子邮件客户端接收电子邮件的应用程序。我已经设置好了一切。但是我的权限有问题。如果我的应用程序是在 K9 电子邮件应用程序之前安装的，当他们收到电子邮件时，我的应用程序没有正确的权限来接收电子邮件。安装 K9 后，我必须卸载/重新安装我的应用程序才能使其正常工作。有什么方法可以让我在实际安装我的应用程序之前检查是否安装了 K9。或者也许“刷新”我的应用程序的权限？我在这里有点不知所措。我什至不知道从哪里开始这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:50:43.060

当前无法*刷新应用的权限*。不太确定你在做什么，但我假设 K-9 声明了你需要的权限，如果在你安装应用程序时它不存在，那么系统根本不会授予你它。您可能不走运：我的建议是提醒用户必须事先安装 K-9，然后使用警报定期检查 K-9 的安装状态是否已更改：如果已添加，请提示他们卸载并重新安装。

# java - 查看 EJB Query 对象生成的 SQL？

> ID：10527185
> 
> 赞同：1
> 
> 时间：2012-05-10T03:37:02.147
> 
> 标签：java, jakarta-ee, toplink

有没有办法查看 javax.persistence.Query 对象生成的底层 SQL？

换句话说，我有以下 EJB QL 查询：

```
SELECT f FROM FunkyObject f where f.id = 4 
```

我想看到这样的东西：

```
SELECT funky_object.id, funky_object.name, funky_object.some_int_col
  FROM funky_object
WHERE funky_object.id = ? 
```

当执行查询出错时，我在日志文件中看到类似的内容。

我想知道如何才能看到有效查询的相同信息。

我在 Sun Application Server (JEE5) 上使用 EJB 和 TopLink。

提前致谢...

# html - 需要括号的低罗马列表

> ID：10527186
> 
> 赞同：2
> 
> 时间：2012-05-10T03:37:19.243
> 
> 标签：html, css

我需要在css的帮助下生成这样的输出......

(i) 需求是什么？

(ii) 针对哪些细分市场？

(iii) 鉴于创新...

(iv) 鉴于创新...

...等等。

请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T03:52:38.550

`counter-increment`您可以使用属性 .write来实现这一点，如下所示：

```
ul{
    counter-reset:item;
    list-style:none;
}
li:before        {
    content: "("counter(item, lower-roman) ")";
    counter-increment: item;
} 
```

检查这个[http://jsfiddle.net/MEBxA/](http://jsfiddle.net/MEBxA/)

它可以工作到 IE8 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:23:34.460

通常，当您想要的编号方式与简单地使用 可以实现的编号样式有任何不同时`list-style-type`，您基本上有两种选择：

1.  抑制默认编号`list-style: none`并使用计数器、生成的内容和`:before`伪元素生成数字（如桑迪普的答案）。
2.  在内容中包含数字，可以使用服务器端技术来生成它们。要么抑制默认编号，`ul`要么（更安全一些）根本不使用`ul`标记，但例如`div`元素或`table`标记。

后一种方法的最简单示例：

```
(i) What is the demand?<br>
(ii) For what segment(s)?<br>
… 
```

为了便于对整个列表、项目和数字的呈现进行样式设置，最好使用更详细的标记，可能达到以下效果：

```
<div class=ol>
<div class=li><span class=num>(i)</span> What is the demand?</div>
<div class=li><span class=num>(ii)</span> For what segment(s)?</div>
…
</div> 
```

（使用`blockquote`而不是`div`作为最外层标记将极大地改进后备，即非 CSS 渲染，但它可能会导致“语义错误”标记的指责。）

# c - 使用c在linux上分块读写

> ID：10527187
> 
> 赞同：7
> 
> 时间：2012-05-10T03:37:31.113
> 
> 标签：c, linux

我有一个 ASCII 文件，其中每一行都包含可变长度的记录。例如

```
Record-1:15 characters
Record-2:200 characters
Record-3:500 characters
...
...
Record-n: X characters 
```

由于文件大小约为 10GB，我想分块读取记录。一旦读取，我需要转换它们，将它们以二进制格式写入另一个文件。

所以，为了阅读，我的第一反应是创建一个 char 数组，例如

```
FILE *stream; 
char buffer[104857600]; //100 MB char array
fread(buffer, sizeof(buffer), 104857600, stream); 
```

1.  假设 linux 将发出一个系统调用并获取整个 100MB 是否正确？
2.  由于记录由换行符分隔，因此我在缓冲区中逐个字符地搜索换行符并重建每个记录。

我的问题是，这是我应该如何分块读取，还是有更好的替代方法来分块读取数据并重构每条记录？是否有另一种方法可以在一次调用中从 ASCII 文件中读取 x 条可变大小的行？

接下来在写入期间，我也会这样做。我有一个写入字符缓冲区，我将其传递给 fwrite 以在一次调用中写入一整套记录。

```
fwrite(buffer, sizeof(buffer), 104857600, stream); 
```

更新：如果我 setbuf（流，缓冲区），其中缓冲区是我的 100MB 字符缓冲区，fgets 会从缓冲区返回还是导致磁盘 IO？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T03:53:09.360

1.  是的，`fread`将立即获取整个内容。（假设它是一个普通文件。）但它不会读取 105 MB，除非文件本身是 105 MB，如果你不检查返回值，你就无法知道实际读取了多少数据，或者是否有是一个错误。

2.  使用`fgets`（见`man fgets`）代替`fread`。这将为您搜索换行符。

    ```
    char linebuf[1000];
    FILE *file = ...;
    while (fgets(linebuf, sizeof(linebuf), file) {
        // decode one line
    } 
    ```

3.  你的代码有问题。

    ```
    char buffer[104857600]; // too big 
    ```

    如果您尝试在堆栈上分配一个大缓冲区（105 MB 肯定很大），那么它将失败并且您的程序将崩溃。如果你需要一个那么大的缓冲区，你将不得不在堆上分配它`malloc`或类似的。我当然会将单个函数的堆栈使用量最多保持在几十 KB，尽管在大多数股票 Linux 系统上你可能会使用几 MB。

作为替代方案，您可以只`mmap`将整个文件放入内存。在大多数情况下，这不会提高或降低性能，但更容易使用。

```
int r, fdes;
struct stat st;
void *ptr;
size_t sz;

fdes = open(filename, O_RDONLY);
if (fdes < 0) abort();
r = fstat(fdes, &st);
if (r) abort();
if (st.st_size > (size_t) -1) abort(); // too big to map
sz = st.st_size;
ptr = mmap(NULL, sz, PROT_READ, MAP_SHARED, fdes, 0);
if (ptr == MAP_FAILED) abort();
close(fdes); // file no longer needed

// now, ptr has the data, sz has the data length
// you can use ordinary string functions 
```

使用的好处`mmap`是你的程序不会耗尽内存。在 64 位系统上，您可以将整个文件同时放入您的地址空间（即使是 10 GB 的文件），系统会在您的程序访问内存时自动读取新的块。旧的块将被自动丢弃，并在您的程序再次需要它们时重新读取。

这是浏览大文件的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:38:16.697

如果可以，您可能会发现`mmap`ing 文件将是最简单的。`mmap`将文件的（一部分）映射到内存中，因此整个文件基本上可以作为字节数组进行访问。在您的情况下，您可能无法一次映射整个文件，它看起来像：

```
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/mman.h>

/* ... */

struct stat stat_buf;
long pagesz = sysconf(_SC_PAGESIZE);
int fd = fileno(stream);
off_t line_start = 0;
char *file_chunk = NULL;
char *input_line;
off_t cur_off = 0;
off_t map_offset = 0;
/* map 16M plus pagesize to ensure any record <= 16M will always fit in the mapped area */
size_t map_size = 16*1024*1024+pagesz;
if (map_offset + map_size > stat_buf.st_size) {
  map_size = stat_buf.st_size - map_offset;
}
fstat(fd, &stat_buf);
/* map the first chunk of the file */
file_chunk = mmap(NULL, map_size, PROT_READ, MAP_SHARED, fd, map_offset);
// until we reach the end of the file
while (cur_off < stat_buf.st_size) {
  /* check if we're about to read outside the current chunk */
  if (!(cur_off-map_offset < map_size)) {
    // destroy the previous mapping
    munmap(file_chunk, map_size);
    // round down to the page before line_start
    map_offset = (line_start/pagesz)*pagesz;
    // limit mapped region to size of file
    if (map_offset + map_size > stat_buf.st_size) {
      map_size = stat_buf.st_size - map_offset;
    }
    // map the next chunk
    file_chunk = mmap(NULL, map_size, PROT_READ, MAP_SHARED, fd, map_offset);
    // adjust the line start for the new mapping
    input_line = &file_chunk[line_start-map_offset];
  }
  if (file_chunk[cur_off-map_offset] == '\n') {
    // found a new line, process the current line
    process_line(input_line, cur_off-line_start);
    // set up for the next one
    line_start = cur_off+1;
    input_line = &file_chunk[line_start-map_offset];
  }
  cur_off++;
} 
```

最复杂的是避免制作太大的映射。您也许可以使用映射整个文件

```
char *file_data = mmap(NULL, stat_buf.st_size, PROT_READ, MAP_SHARED, fd, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T03:53:41.120

我的意见是`fgets(buff)`用于自动检测新行。

然后`strlen(buff)`用于计算缓冲区大小，

```
if( (total+strlen(buff)) > 104857600 ) 
```

然后写入新块..

但是块的大小几乎不会是 104857600 字节。

CMIIW

# silverlight - 如何在 silverlight 4 应用程序中刷新浏览器？

> ID：10527188
> 
> 赞同：0
> 
> 时间：2012-05-10T03:37:34.157
> 
> 标签：silverlight, silverlight-4.0

我有一个 Silverlight 4 应用程序，在登录过程中我有一些验证和数据准备，如果我在每个步骤中出现异常，我想停止我的应用程序并刷新浏览器，但我想保存我的异常消息我的最后一个会话，然后在登录屏幕中更新我的错误文本块并通知我的用户有关异常消息。如何在会话中保存我的变量然后刷新浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:47:01.497

在 silverlight 方面，您可以使用 HtmlPage 命名空间，

除此之外，在 silverlight 中刷新页面不是一个好习惯，而是显示您的应用程序。好像坏了。Siverlight 是 RIA。我认为使用这个丰富平台的好处更好。

```
 HtmlPage.Window.Navigate(HtmlPage.Document.DocumentUri, "_self");

 /* You may also add Query String to your URL as Bryant said,
 Uri myUri=new Uri(HtmlPage.Document.DocumentUri.toString()+ "?Exception=True", UriKind.RelativeOrAbsolute);
 HtmlPage.Window.Navigate(myUri, "_self");
*/ 
```

希望有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:29:45.417

只需获取当前 url 并将您的错误消息附加到查询字符串，然后使用 javascript 打开当前页面到该 url。然后，您可以从 silverlight 获取查询字符串以获取错误消息。

# mysql - mysql：更改大表，磁盘空间问题

> ID：10527191
> 
> 赞同：1
> 
> 时间：2012-05-10T03:37:52.520
> 
> 标签：mysql, linux

我想更改超过 100Gb 的 MySQL 表。
根据手册 MySQL 首先创建表的更改副本，然后将其替换为新副本。

但是，MySQL 尝试在 /tmp 中创建副本，但那里的文件系统要小得多。结果，mysql失败并出现以下错误：

```
ERROR 3 (HY000) at line 1: Error writing file '/tmp/STa3x0Vi' (Errcode: 28) 
```

如何让 mysql 变得更智能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:52:55.870

根据 Marc 发布的链接，您应该这样做：

```
export $TMPDIR=/some/other/path/with/enough/space 
```

现在，改变你的桌子......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:50:32.153

`df -h`检查您的分区的大小`/tmp`（如果它是一个分区）并确保您有足够的可用空间来在那里创建备份。如果没有，请更改您的临时目录。

# actionscript-3 - 如何使用 Flash AS3 保持 ColorPicker 色板一直打开？

> ID：10527196
> 
> 赞同：0
> 
> 时间：2012-05-10T03:38:56.960
> 
> 标签：actionscript-3, flash

我希望 ColorPicker 弹出式样本始终保持打开状态。

```
var cp:ColorPicker = new ColorPicker();
cp.open(); 
```

工作正常，但是当焦点丢失时，窗口会关闭。有什么建议么？谢谢

Flash[默认颜色选择器](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/ColorPicker.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:05:48.660

取决于您使用的颜色选择器。（我的意思是谁写的）。

但这一个可以根据您的需要工作： http: [//www.bit-101.com/blog/ ?p=2347](http://www.bit-101.com/blog/?p=2347)

**更新**

然后你需要创建你自己的 ColorPicker 类来扩展原来的 ColorPicker：

```
package  
{
    import fl.controls.ColorPicker;
    import flash.events.MouseEvent;
    /**
    * ...
    * @author Jevgenij Dmitrijev ( http://www.ifmi.lt )
    *
    * @created {2012.05.10 16:08}
    *
    */
    public class CustomColorPicker extends ColorPicker
    {
        var _allowHide:Boolean = false;

        public function CustomColorPicker() 
        {

        }

        override protected function onStageClick(event:MouseEvent):void 
        {
            //Simple example .
            if(_allowHide)
                super.onStageClick(event);
        }

        override protected function onSwatchClick(event:MouseEvent):void 
        {
            // since on click it is closing, ovveride the function
            // and super the over function, since it is the one
            // which changes the color.
            super.onSwatchOver(event)
        }

        override protected function onSwatchOver(event:MouseEvent):void 
        {
            // just ovveride it, so it would do nothing.
        }
    }
} 
```

然后在你的项目中使用：

```
var colorPickerMC:CustomColorPicker = new CustomColorPicker ();
addChild(colorPickerMC); 
```

# android - 我们可以为三星银河笔记设计单独的布局文件夹吗

> ID：10527197
> 
> 赞同：0
> 
> 时间：2012-05-10T03:38:57.270
> 
> 标签：android, android-layout

我们可以为三星银河笔记设计单独的布局文件夹吗？如果是，那么该文件夹的名称是 layout-800*1200 将是正确的。我设计了大、正常和特大的布局，但是当我在 Galaxy Note 上运行我的应用程序时，屏幕不适合它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:44:55.977

根据[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)的文档，您只能使用 layout-small、normal、large、xlarge。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:30:24.513

你只能使用

*   布局-小
*   大版面
*   布局-xlarge
*   布局正常。

您只能更改您的 AVD 分辨率，然后检查它。

# iphone - 应用 CGAffineTransformRotate 后计算偏移量

> ID：10527198
> 
> 赞同：1
> 
> 时间：2012-05-10T03:38:58.160
> 
> 标签：iphone, ios, core-animation

申请后

```
view.transform = CGAffineTransformRotate(view.transform, degreesToRadians(10)) 
```

似乎它搞砸了视图的位置，因此我必须应用 CGAffineTransformTranslate(x,y) 来修复它。计算 x 和 y 的公式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:20:35.803

如果您对其应用了变换，则视图的 frame 属性无效。正如另一位海报所说，如果您更改变换，则只有 center 和 position 属性才有意义。你想做什么？

# gwt - GWT ValueListBox 符合 MVP

> ID：10527202
> 
> 赞同：0
> 
> 时间：2012-05-10T03:40:11.050
> 
> 标签：gwt, gwt-platform

我试图找出其中哪一个更符合 MVP 模式。

假设在我的 ViewDesktopImpl 类中，我有以下代码：

```
class ViewDesktopImpl implements View {

  ValueListBox<Object> valueListBox
} 
```

现在，这就是我想知道的。执行以下操作是否更有意义：

1.  在我的 View 界面中有一个 HasConstrainedValue getter，Presenter 调用 getHasConstrainedValue 并填充它

2.  在我的 View 界面中有一个 setValues(List objects)，Presenter 调用 view.setValues 并且 ViewDesktopImpl 处理填充 valueListBox

我相信选择选项 1 会更好我只是想从中获得利弊 - 是的，这可能是一种主观模式，但我想就应该采取哪个选项获得一些其他意见和理由它如何符合 MVP 标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:36:33.810

我猜你想将 ListBox 实现为 MVP。查看[SelectOneListBox](http://turbomanage.wordpress.com/2010/04/01/selectonelistbox-for-use-with-gwtmvp/)中的`David Chandler`. 如果您的问题与特定的小部件无关，我会说拥有一个 getter 和一个 setter 是一个好方法。看`HasText`界面。

在测试您的演示者时，您将模拟您的视图以使用以下方式设置您的测试数据`Mockito`：

```
@Mock
MyView view;

List testValues = ...;
when(view.getValues().getValues()).thenReturn(testValues);
result = presenter.method(...);
assertTrue(result == expected); 
```

视图定义为：

```
public interface MyView extends View {
  HasValueList getValues();
}

public interface HasValueList {
  void setValues(List objects);
  List getValues();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:51:37.430

以下是我如何做我的 MVP。

除了让我的演示者在我的视图中调用 getter 之外，我的视图调用了我的演示者的方法。通过这种方式，业务逻辑与演示者隔离，并且无需模拟视图即可轻松测试。

```
public interface MyView extends View {
  void setObjectsList(List<Object> objects);
  void setPresenter(Presenter presenter);

  interface Presenter {
    void handleObjectSelected(Object object);
  }
} 
```

Presenter 实现 MyView.Presenter：

```
class MyPresenter implements MyView.Presenter {
  private final MyView myView;
  private List<Object> objects;

  public MyPresenter(MyView myView, List<Objects> objects) {
    this.myView = myView;
    this.objects = objects;  
  }

  public void initialize() {
    myView.setPresenter(this);
    myView.setObjectsList(objects);
  }

  @Override
  public void handleObjectSelected(Object object) {
    // Do something with selected object.
  }
} 
```

示例 MyView 实现：

```
class MyViewImpl implements MyView {
  private Presenter presenter;
  ...

  @Override
  public void setObjectsList(List<Object> objects) {
    // Do something with object list.
  }

  @Override
  public void setPresenter(Presenter presenter) {
    this.presenter = presenter;
  }

  public void somethingHappened() {
    presenter.handleObjectSelected(object);
  }
} 
```

使用 ListBox 的 MyView 的第二个实现示例：

```
class ListBoxMyViewImpl implements MyView {
  @UiField ListBox listBox;

  private Presenter presenter;
  private List<Object> objects;

  public MyListBoxView() {
    objects = Lists.newArrayLists();
  }

  @Override
  public void setObjectsList(List<Object> objects) {
    this.objects = objects; 
    listBox.clear();
    for (Object object : objects) {
      listBox.addItem(object.toString());
    }
  }

  @Override
  public void setPresenter(Presenter presenter) {
    this.presenter = presenter;
  }

  @UiHandler("listBox")
  void onChange(ChangeEvent e) {
    presenter.handleObjectSelected(objects.get(listBox.getSelectedIndex());
  }
  ...
} 
```

这样您就不需要模拟您的视图来测试演示者逻辑。

代替：

```
@Mock
MyView view;

List testValues = ...;
when(view.getValues().getValues()).thenReturn(testValues);
result = presenter.method(...);
assertTrue(result == expected); 
```

您将测试您的演示者逻辑：

```
List testValues = ...;
assertEquals(expected, presenter.method(testValues)); 
```

# ruby-on-rails-3.1 - 当 partial 被调用到索引中时，hidden_ field_tag 中的对象变为 nil（但是，在单独的 Show 视图中工作）

> ID：10527203
> 
> 赞同：0
> 
> 时间：2012-05-10T03:40:20.113
> 
> 标签：ruby-on-rails-3.1

导轨 3.1.3

我正在制作一个简单的网站，人们可以在其中分享短篇小说，并可以在 5 星评级系统上对这些故事进行评分。星级评定系统是个问题。我可以让它在 stories/show.html 视图中正常工作，但不能在索引主页上正常工作。这是我的代码：

主页.html.erb

```
<% content_for(:scripts) do %>
  <%= javascript_include_tag 'rating_ballot'%>
<% end %>

<div id="talesFeedHome">
  <p class="notice"><%= notice %></p>
  <%= render @tales.sort_by { |tale| tale.created_at }.reverse %>
</div>    

<p class="clear">&nbsp;</p> 
```

故事/_tale.html.erb

```
 <% if signed_in? %>

      <div id="homeTales">
        <ul>
          <div id="taleShow">
            <div id="controlPanel">
              <li id="taleUserName"><%= tale.user.name %></li>
              <li id="averageRating"> Your Rating:<br /><%= render "tales/stars" %></li>
            </div>
      <div id="taleDisplay">
        <li><%= link_to(tale) do %>
          <span><%= tale.title %> </span>
          <span><%= tale.content %></span>
        <% end %>
        </li> <br />
      </div>
    </div>
  </ul>
</div>

<% else %>
  ... 
```

故事/_stars.html.erb

```
<div id="starRating">
  <%= form_for(rating_ballot, :remote => true, :html => { :class => 'rating_ballot' }) do |f| %>
    <%= f.label("value_1", content_tag(:span, '1'), {:class=>"rating", :id=>"1"}) %>  
      <%= radio_button_tag("rating[value]", 1, current_user_rating == 1, :class => 'rating_button') %>
    <%= f.label("value_2", content_tag(:span, '2'), {:class=>"rating", :id=>"2"}) %>
      <%= radio_button_tag("rating[value]", 2, current_user_rating == 2, :class => 'rating_button') %>
    <%= f.label("value_3", content_tag(:span, '3'), {:class=>"rating", :id=>"3"}) %>
      <%= radio_button_tag("rating[value]", 3, current_user_rating == 3, :class => 'rating_button') %>
    <%= f.label("value_4", content_tag(:span, '4'), {:class=>"rating", :id=>"4"}) %>
      <%= radio_button_tag("rating[value]", 4, current_user_rating == 4, :class => 'rating_button') %>
    <%= f.label("value_5", content_tag(:span, '5'), {:class=>"rating", :id=>"5"}) %>
      <%= radio_button_tag("rating[value]", 5, current_user_rating == 5, :class => 'rating_button') %>

    <%= hidden_field_tag(:tale_id, @tale.id) %>
  <% end %>
</div> 
```

正是在这一点上，在隐藏字段标签中，我收到了这个错误：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

以下是 3 个相关的控制器：

pages_controller.rb

```
class PagesController < ApplicationController
  def home
    @tales = Tale.all
  end
end 
```

tales_controller.rb

```
class TalesController < ApplicationController
  respond_to :html, :js

  def new
    @tale = Tale.new
  end

  def show
    @tale = Tale.find(params[:id])
  end

  def index
    @tales = Tale.all
    @tale = Tale.find(params[:id])
  end
... 
```

rating_controller.rb

```
class RatingsController < ApplicationController
   before_filter :authenticate_user!
   respond_to :html, :js

   def create
     @tale = Tale.find_by_id(params[:tale_id])
     @rating = Rating.new(params[:rating])
     @rating.tale_id = @tale.id
     @rating.user_id = current_user.id

     if @rating.save
         respond_to do |format|
             format.html { redirect_to @tale, :notice => "Your rating has been saved" }
             format.js
         end
     end     
   end

   def update
     @rating = current_user.ratings.find_by_tale_id(params[:tale_id])
     @tale = @rating.tale

     if @tale and @rating.update_attributes(params[:rating])
        respond_to do |format|
            format.html { redirect_to @tale, :notice => "Your rating has been updated" }
            format.js
        end
     end
   end
end 
```

问题出在某个地方。不知何故，在主页上呈现@tales 时，这会使_stars 部分上的@tale.id 无效。我不知道如何解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T06:03:58.800

好的，我认为您的 @tales 值为零，所以请执行以下操作并让我知道结果是什么，首先将**raise @tales.Inspect**
放在 PagesController 第二个**<%= raise tale.inspect%>**的 home 方法中在 _tale.html.erb 中。想检查故事的天气值是否为空。

# java - 获取信号强度

> ID：10527206
> 
> 赞同：2
> 
> 时间：2012-05-10T03:40:28.337
> 
> 标签：java, android, telephony, signal-strength

我想知道如何使用 Android 获取 CDMA / GSM 信号强度。

注意：我使用了 getCdmaDbm() 方法，但它总是返回 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:46:16.990

使用 PhoneStateListener 的 onSignalStrengthsChanged 获取 SignalStrength：

```
TelephonyManager telephonyManager = (TelephonyManager)getSystemService(srvcName);  
AndroidPhoneStateListener phoneStateListener = new AndroidPhoneStateListener (this);  
telephonyManager.listen(phoneStateListener,      
PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
    public class AndroidPhoneStateListener extends PhoneStateListener {
        public static int signalStrengthValue;

        @Override
        public void onSignalStrengthsChanged(SignalStrength signalStrength) {
            super.onSignalStrengthsChanged(signalStrength);
            if (signalStrength.isGsm()) {
                if (signalStrength.getGsmSignalStrength() != 99)
                    signalStrengthValue = signalStrength.getGsmSignalStrength() * 2 - 113;
                else
                    signalStrengthValue = signalStrength.getGsmSignalStrength();
            } else {
                signalStrengthValue = signalStrength.getCdmaDbm();
            }
        }

    } 
```

允许 ：

```
<uses-permission Android:name="android.permission.READ_PHONE_STATE" /> 
```

# shell - 尝试从 shell 脚本进行 freebsd-update 时如何假装是 tty？

> ID：10527207
> 
> 赞同：0
> 
> 时间：2012-05-10T03:40:33.887
> 
> 标签：shell, freebsd

我们通常在系统安装后使用自定义脚本来设置新的 FreeBSD 机器，它从端口树安装工具并设置系统环境。我们还需要通过 freebsd-update 自动将新安装的 FreeBSD-8.2 机器更新到 FreeBSD-8.2p3。据我所知，freebsd-update 不允许我从没有“cron”选项的 shell 脚本执行它。所以我尝试预加载一个自定义程序来欺骗freebsd-update：

```
${CAT} > /tmp/isatty.c     <<EOF                                                                                                                                                                                         
int isatty(const int fd) { return 1; }                                                                                                                                                                               
EOF                                                                                                                                                                                                                  
${CC} -shared -fPIC -o /tmp/isatty.so     /tmp/isatty.c                                                                                                                                                                          
${ENV} LD_PRELOAD=/tmp/isatty.so LESS="-E" ${FREEBSD_UPDATE} fetch install < /dev/null 
```

通过这个调整，我可以成功地从我的自定义脚本运行 freebsd-update，但是在 freebsd-installer 从更新服务器获取文件之后，我收到了以下错误消息：

```
Fetching metadata signature for 8.3-RELEASE from update5.FreeBSD.org... done.
Fetching metadata index... done.
Fetching 2 metadata files... gunzip: standard input is a terminal -- ignoring
metadata is corrupt. 
```

我有机会解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T17:30:22.587

此实用程序可能是您需要的：[empty - 在伪终端 (PTY) 下运行进程和应用程序](http://empty.sourceforge.net/)

这样你应该可以从脚本启动 freebsd-update。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:47:53.190

您设置了`LD_PRELOAD`freebsd-update 产生的任何和所有进程也将拾取您的。更好的解决方案是创建一个修改版本`freebsd-update`，允许您从命令行运行它而无需用户交互。

# mfc - 如何禁用 MFC 链接控件的默认行为？

> ID：10527209
> 
> 赞同：2
> 
> 时间：2012-05-10T03:41:04.747
> 
> 标签：mfc, hyperlink, controls

我在基于对话框的应用程序中使用 MFC 链接控件，并为其添加了 BN_CLICKED 的事件处理程序，希望它可以为我做点什么，但是，当我点击它时，它什么也不做（当我不要设置它的url，当我设置url时，它会跳转到那个url），我的事件处理程序没有被触发。那么，如何禁用其默认的“跳转”行为并触发我的处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:11:06.677

子类化`CMFCLinkCtrl`和添加`ON_WM_LBUTTONDOWN`事件处理程序似乎有效。

然后您可以选择是否调用`CMFCLinkCtrl::OnLButtonDown`。

```
class CMyLinkCtrl : public CMFCLinkCtrl {
    DECLARE_DYNAMIC(CMyLinkCtrl)
public:
    CMyLinkCtrl();
    virtual ~CMyLinkCtrl();
    afx_msg void OnLButtonDown(UINT nFlags, CPoint point);
protected:
    DECLARE_MESSAGE_MAP()
};

IMPLEMENT_DYNAMIC(CMyLinkCtrl, CMFCLinkCtrl)

CMyLinkCtrl::CMyLinkCtrl() {
}

CMyLinkCtrl::~CMyLinkCtrl() {
}

BEGIN_MESSAGE_MAP(CMyLinkCtrl, CMFCLinkCtrl)
    ON_WM_LBUTTONDOWN()
END_MESSAGE_MAP()

void CMyLinkCtrl::OnLButtonDown(UINT nFlags, CPoint point) {
    static bool bDisabled = false;
    if(bDisabled) {
        MessageBox(_T("Link is disabled"));
    } else {
        CMFCLinkCtrl::OnLButtonDown(nFlags, point);
    }
    bDisabled = !bDisabled;
} 
```

# google-maps - 使用 Google 地图避免“抱歉，我们这里没有图像”

> ID：10527211
> 
> 赞同：9
> 
> 时间：2012-05-10T03:41:14.793
> 
> 标签：google-maps, google-maps-api-3

我正在编写一个谷歌地图应用程序，在大多数情况下它工作正常。但是，如果我请求在彼此非常接近的 2 个点之间的步行路线（例如 2 个建筑物与 1 个相邻的建筑物），地图会放大到如此接近，以至于混合图像变成显示“抱歉，我们没有图像”的图块这里。”

从我的代码中的调试说明来看，地图的缩放级别似乎是在更新 DirectionsRenderer 的函数运行之后才设置的（添加 map.getZoom() 调用会显示上一轮地图的缩放属性我要求的方向。

正因为如此，MazZoomService 对我也没有多大帮助。有没有办法在处理方向时检测地图的缩放级别，以便我可以将图像缩小到不显示错误消息的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:03:03.700

在地图的“zoom_changed”事件中使用 MaxZoomService。如果当前缩放级别大于最大值，map.setZoom(max)。

如果您希望仅根据 DirectionsRenderer 更新的结果启用此行为，则需要设置一个标志，可能还需要设置一个计时器（DirectionsRenderer 并不总是更改地图缩放级别）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-17T10:26:25.947

`<meta http-equiv="Content-Security-Policy" content="default-src *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src 'self' 'unsafe-inline' *; img-src * data: 'unsafe-inline'">`--在标题中添加这个标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-20T17:59:01.233

我在一个有角度的应用程序中遇到了这个问题，我正在写。

结果发现我的内容安全策略阻止了谷歌，这反过来阻止了所有图片的加载并抛出错误“抱歉，我们这里没有图片”。一旦我将 Google URL 添加到我的内容安全策略中，一切就恢复正常了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T08:12:11.830

当我从卫星切换到地图选项时，我就有了这种经历。此时缩放设置为 18。我决定向下减小缩放大小。在 12 及以下的缩放尺寸下，图像错误得到解决，地图图像显示良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-27T14:49:00.123

我遇到了同样的错误，地图显示不同的图块，并显示“对不起，我们没有图像错误”的消息。但是，根本问题是不同的。由于问题标题是通用的，因此我添加了答案，因此它可能对某人有所帮助。

在一些检查中，我发现错误是因为从数据库中动态检索的经纬度（坐标）值是**空值**。因此，您可以检查是否在地图初始化函数中传递了无效坐标。

update 如果组合无效，lat 和 long 值的交换也可能导致问题。

# xcode - NSDateFormatter 在三次使用中的第三次返回 NULL

> ID：10527212
> 
> 赞同：0
> 
> 时间：2012-05-10T03:41:15.123
> 
> 标签：xcode, cocoa, null, nsdate, nsdateformatter

好的，这让我感到困惑，我希望一些新的观点可以让我在这里得出正确的结论......我在我尝试使用它的第三个项目上从 NSDateFormatter 返回一个 NULL，我可以' t似乎弄清楚为什么。这是我的代码：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
NSDate *tempDate;

[format setDateFormat:@"MMM dd, yyyy"]; 
tempDate = [format dateFromString:[activePerformance performanceDate]];
[outletPerformanceDate setDateValue:tempDate];

// display performance time and set length

[format setDateFormat:@"hh:mm a"];  
tempDate = [format dateFromString:[activePerformance performanceTime]];             
[outletPerformanceTime setDateValue:tempDate]; 
```

这两个都按预期正常工作。然后，有这个：

```
[format setDateFormat:@"MMM dd yyyy"];
tempDate = [format dateFromString:[activeFan birthday]];
[outletFansBirthday setDateValue:tempDate]; 
```

它每次都将 NULL 返回给 tempDate。运行 NSLogs，我们可以看到 [activeFan 生日] 设置为“1980 年 5 月 2 日”或任何放入变量的日期。由于这不起作用，我将其更改为此进行测试：

```
[format setDateFormat:@"MMM dd yyyy"];
tempDate = [format dateFromString:@"Jan 22, 1976"];  // TESTING 
```

它仍然每次都返回 NULL。

我认为这些代码行之间可能发生了某些事情（它们不是直接相邻的，而是使用相同的方法），但是与 NSDate、NSDateFormatter 或任何这些对象变量没有任何关系。只有几个 NSTextFields 的出口。

我完全不知所措。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:57:38.673

您的格式字符串必须与您在 dateFromString: 方法中提供的字符串相匹配。在上一个版本中，您的格式字符串中没有逗号，但您的测试字符串中有逗号（并且可能在 [activeFan 生日] 中）。

# php - 什么是正确的 SQL 查询？

> ID：10527217
> 
> 赞同：0
> 
> 时间：2012-05-10T03:41:50.077
> 
> 标签：php, mysql

我有一个存储所有用户活动的表。我称它为带有字段的“会话”表：

```
+--------------------------------------------------+
|  id   |  content_type  |  content_id  |  action  |
+--------------------------------------------------+ 
```

content_type 可以是 1=视频、2=幻灯片、3=表格、4=调查、5=网站、6=互动

content_id 是实际内容的 ID。例如我有“网站”表

```
+---------------------------------------------+
|  id   |   name   |           url            |
+------------------+--------------------------+
|   3   |  Google  |  http://www.google.com/  |
+------------------+--------------------------+ 
```

在应用程序上，用户访问了 google.com 网站。将存储在“会话”表中的是：

```
+----------------------------------------------------------+
|  content_type  |  content_id  |          action          |
+----------------------------------------------------------+
|        5       |       3      |  Visited Google Website  |
+----------------------------------------------------------+ 
```

“网站”（或表格、视频等）表的这些内容可以附加或标记到多个产品组。

我通过将其存储到名为“attached_product_groups”的表中来做到这一点

在那张桌子上，我有以下字段：

```
+----------------------------------------------------+
|  content_type  |  content_id  |  product_group_id  |
+----------------------------------------------------+ 
```

例如，我必须从“product_groups”表中将 3 个产品组附加到 google.com 网站：

```
+----------------------------+
|  id  |        name         |
+----------------------------+
|  3   |  Mobile             |
+----------------------------+
|  8   |  Social Networking  |
+----------------------------+
|  9   |  Adsense            |
+----------------------------+ 
```

“attached_product_groups”表将存储：

```
+----------------------------------------------------+
|  content_type  |  content_id  |  product_group_id  |
+----------------------------------------------------+
|       5        |      3       |         3          |
+----------------------------------------------------+
|       5        |      3       |         8          |
+----------------------------------------------------+
|       5        |      3       |         9          |
+----------------------------------------------------+ 
```

现在我的问题是，如何选择某个产品组的所有“会话”日志？

鉴于在我的应用程序上，我有一个产品组的下拉列表。

非常感谢帮助像我这样的初学者。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:56:39.547

可能是在查询下工作以根据内容 ID 显示网站的网站名称和产品

> 从会话会话、网站 web、产品 p、attached_product_groups pg 中选择 sessions.content_id、web.name、p.name，其中 sessions.content_id=web。id 和 p.id=pg.product_group_id

# java - Java 使用覆盖方法

> ID：10527220
> 
> 赞同：1
> 
> 时间：2012-05-10T03:42:56.117
> 
> 标签：java

我是菜鸟，我需要一些帮助。

所以我有这个带有私有变量的抽象类。我还有一个名为 getThing() 的方法来返回它。

我有一个扩展该抽象类的类，它也有一个私有变量和一个覆盖原始变量以从抽象类获取值的方法。

那么，能够访问这两个值的唯一方法是在名为 getSuperThing 的子类中创建第二个方法，并在其中使用 super。好吧，我只是出于好奇想知道是否有更简单的方法可以做到这一点，并且能够通过执行 objectNae.super.getThing() 之类的操作来访问抽象类方法。

谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T03:45:42.860

变量 is`private`和 so 只能被包含（抽象）类引用。正如您所说，您可以从子类调用超类方法（而不是被覆盖的方法）。

如果您想直接从子类访问变量（不需要访问器方法），请`protected`改为使用它。这是关于[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:52:40.140

如果我正确理解您的问题，那么您不应该在具体子类中覆盖抽象类的方法。不需要，除非您需要子类返回与抽象类返回的值不同的值（这表明设计不佳）。

相反，抽象类的方法可以作为子类的方法访问。

所以，如果你有：

```
public abstract class AbstractClass {
  private int value = 3;

  public int getValue() {
   return value;
  }
}

public class ConcreteClass extends AbstractClass {
} 
```

那么你应该能够做到：

```
new ConcreteClass().getValue() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:21:26.973

我认为除了在子类的 getThing() 或 getSuperThing() 方法中调用 super.getThing() 之外，您没有其他方法。抽象类在使用之前必须被子类化。

# jquery - JQuery getScript 并获取未定义的变量

> ID：10527221
> 
> 赞同：0
> 
> 时间：2012-05-10T03:43:04.653
> 
> 标签：jquery

我有一个花哨的盒子，可以在关闭时加载脚本

```
parent.$.getScript("js/reservation_special_reset.js") 
```

在我的javascript文件中..

```
 $('.time_start, .time_end').change(function() {
            var tid;

            tid = $(this).attr('id');
        }); 
```

然而，FireBug 总是说 tid 是未定义的。这里有什么问题？

# function - MATLAB中录音机对象的函数回调（'StopFcn'，'TimerFcn'）？

> ID：10527231
> 
> 赞同：1
> 
> 时间：2012-05-10T03:44:41.747
> 
> 标签：function, matlab, callback

> **可能重复：**
> [如何在 MATLAB 中对录音机对象使用函数回调（'StopFcn'、'TimerFcn'）？](https://stackoverflow.com/questions/10520290/how-can-i-use-function-callback-stopfcn-timerfcn-for-audiorecorder-objec)

所以我尝试这段代码。

```
% assume fs,winsize,winshift is given.

T = 0.1; % in seconds
samples = cell{100,1};
r = audiorecorder(fs,16,1);
k=1;
r.TimerPeriod = 0.1;
r.StopFcn = 'samples{k} = getaudiodata(r);';
r.TimerFcn = {@get_pitch,samples{k},winsize,winshift};

while 1
     record(r,T);
     k=k+1;
end 
```

我想在通过录音机对象录制期间执行函数'get_pitch（samples，fs，winsize，winshift）'。

但是在执行过程中会发生以下异常。

1) 在record(r,T) 执行之后。（现在称为 StopFcn）？？？使用 ==> eval 未定义函数或变量 'r' 时出错。

2) StopFcn 调用后（现在调用TimerFcn） 在这个阶段，get_pitch 函数的参数完全错误。例如，位置 samples{k} 中的参数更改为“audiorecorder object”。

看来我不知道“StopFcn”和“TimerFcn”的确切用法。

有没有人可以给我一些建议？我非常感谢您的所有评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:52:01.657

查看[文档中的示例，](http://www.mathworks.com/help/techdoc/ref/audiorecorder.getaudiodata.html)我建议您尝试在循环中调用 getaudiodata(r) 而不是使用 CallBack。所以是这样的：

```
% assume fs,winsize,winshift is given.

T = 0.1; % in seconds
samples = cell{100,1};
r = audiorecorder(fs,16,1);
k=1;
r.TimerPeriod = 0.1;
r.StopFcn = 'disp(''Completed sample '', k)';
r.TimerFcn = {@get_pitch,samples{k - 1},winsize,winshift};

while 1
     record(r,T);
     samples{k} =  getaudiodata(r);
     k=k+1;
end 
```

注意我改变了`r.TimerFcn`使用`samples{k - 1}`而不是`k`因为 k 将在 timerfcn 被调用之前增加。所以这可能会给你的第一个样本带来问题，你必须稍微调整一下。这也是一个无限循环，我相信你会想要解决这个问题。

# java - 按下按钮拍照时出现 native_takePicture() 错误

> ID：10527234
> 
> 赞同：0
> 
> 时间：2012-05-10T03:45:00.890
> 
> 标签：java, android, sdk, camera, android-camera

我一直在尝试寻找类似的错误，但我遇到了困难……我还是 android 开发的新手，但希望有人能指出一些方向。

我有一个可以预览的相机应用程序，但是当我尝试单击按钮拍照时，我的应用程序崩溃了。有人能帮我吗？

[PhotoActivity.java]

```
public class PhotoActivity extends Activity {
    public static final int MEDIA_TYPE_IMAGE = 1;

    protected static final String TAG = "Activity";
    private Camera mCamera;
    private CameraPreview mCameraPreview;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photo);

        mCamera = getCameraInstant();
        mCameraPreview = new CameraPreview(this, mCamera);

        FrameLayout preview = (FrameLayout) findViewById(id.camera_preview);
        preview.addView(mCameraPreview);

        // Add a listener to the Capture button
        Button captureButton = (Button) findViewById(id.button_capture);
        captureButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // get an image from the camera
                    Log.e("log", "mPicture"+mPicture);

                    mCamera.takePicture(null, null, mPicture);
                }
            }
        );  
    }

    PictureCallback mPicture = new PictureCallback(){
     @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            // TODO Auto-generated method stub
            File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
            if(pictureFile==null){

                return;
            }

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();

            } catch (FileNotFoundException e) {
                Log.d(TAG, "File not found: " + e.getMessage());

            } catch (IOException e){
                Log.d(TAG, "Error accessing file: " + e.getMessage());

            }
        }

    };

    /**
     * Helper method to access the camera returns null if
     * it cannot get the camera or does not exist
     * @return
     */
    private Camera getCameraInstant(){
        Camera camera = null;

        try{
            camera=Camera.open();
        }catch (Exception e){
            // cannot get camera or does not exist
        }
        return camera;
    }

    /** Create a File for saving the image */
    private File getOutputMediaFile(int type){

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");

        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");

        return mediaFile;
    }

} 
```

对不起所有的编码，但我真的需要一些帮助......在此先感谢。

**更新**

[CameraPreview.java]

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {

    private static final String TAG = "Preview";
    private SurfaceHolder mSurfaceHolder;
    private Camera mCamera;

    //Constructor that obtains context and camera
    public CameraPreview(Context context, Camera camera) {
        super(context);
        //this.mCamera = camera;
        this.mCamera = camera;
        this.mSurfaceHolder = this.getHolder();
        this.mSurfaceHolder.addCallback(this); // we get notified when underlying surface is created and destroyed
        this.mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); //this is a deprecated method, is not requierd after 3.0
    }

    @Override
    public void surfaceCreated(SurfaceHolder surfaceHolder) {
        mCamera.release();
        mCamera = Camera.open();

        try {
            mCamera.setPreviewDisplay(surfaceHolder);

            mCamera.setDisplayOrientation(90);

            mCamera.startPreview();
        } catch (IOException e) {
          // left blank for now
            Log.d(TAG, "Error setting camera preview: " + e.getMessage());

        }

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
        if (mCamera != null) {
            Log.d(TAG,"Stopping preview in SurfaceDestroyed().");
            mCamera.setPreviewCallback(null);
        mCamera.stopPreview();
        mCamera.release();
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder surfaceHolder, int format,
            int width, int height) {

        if(mSurfaceHolder.getSurface()==null){
            //preview surface does not exist
            return;
        }
        try {
            mCamera.stopPreview();
        }catch(Exception e){
            //ignore: tried to stop a non-existent preview
        }

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mSurfaceHolder);
            mCamera.setDisplayOrientation(90);
            mCamera.startPreview();
        } catch (Exception e) {
            // intentionally left blank for a test
            Log.d(TAG, "Error starting camera preview: "+e.getMessage());
        }
    }

} 
```

**错误**

```
05-09 21:19:29.013: E/AndroidRuntime(3823): FATAL EXCEPTION: main
05-09 21:19:29.013: E/AndroidRuntime(3823): java.lang.RuntimeException: Method called after release()
05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.hardware.Camera.native_takePicture(Native Method)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.hardware.Camera.takePicture(Camera.java:746)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.hardware.Camera.takePicture(Camera.java:710)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at com.liu.photo.PhotoActivity$2.onClick(PhotoActivity.java:73)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.view.View.performClick(View.java:2486)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.view.View$PerformClick.run(View.java:9130)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.os.Handler.handleCallback(Handler.java:587)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.os.Handler.dispatchMessage(Handler.java:92)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.os.Looper.loop(Looper.java:130)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at android.app.ActivityThread.main(ActivityThread.java:3703)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at java.lang.reflect.Method.invokeNative(Native Method)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at java.lang.reflect.Method.invoke(Method.java:507)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    05-09 20:21:01.214: E/AndroidRuntime(2813):     at dalvik.system.NativeStart.main(Native Method) 
```

这就是堆栈跟踪吗？我很新，还在学习这些术语。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:30:34.620

从方法中删除这两行`surfaceCreated`：

```
 mCamera.release();
    mCamera = Camera.open(); 
```

您已经`Camera`在您的 中打开了该对象`Activity`，无需释放它并重新打开它。

**编辑**您实际上应该删除整个实现，`surfaceCreated`并将实现留空。你只是在重复你已经做过的事情`surfaceChanged`，无论如何这是实现它的重要地方。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T04:01:14.923

请参阅此页面： http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html) 并确保您遵守规则。特别要注意，在拍照之前必须开始预览。

# bash - Bash：维护一组文件及其 gzip 等价物

> ID：10527240
> 
> 赞同：1
> 
> 时间：2012-05-10T03:45:34.400
> 
> 标签：bash, synchronization, directory, compression, gzip

我有一个目录树，其中有一些文件和一些子目录。

```
/
/file1.txt
/file2.png
/dir1
    /subfile1.gif 
```

目标是有一个脚本生成每个文件的 gzip 版本并将其保存在每个文件旁边，并添加`.gz`后缀：

```
/
/file1.txt
/file1.txt.gz
/file2.png
/file2.png.gz
/dir1
    /subfile1.gif
    /subfile1.gif.gz 
```

这将处理新`.gz`文件的创建。

另一部分是删除：每当创建非 gzip 压缩文件时，脚本`.gz`在运行时都需要删除孤立版本。

最后也是最棘手的部分是修改：每当更改某些（非 gzip 压缩的）文件时，重新运行脚本将`.gz`仅更新那些已更改文件的版本，基于文件`mtime`与其 gzip 版本之间的文件时间戳 () 比较。

是否可以在 bash 中实现这样的脚本？

**编辑**：这样做的目的是为 nginx 准备每个文件的压缩副本，以便使用 gzip_static 模块提供服务。它并不是一个后台服务，一旦发生任何变化，它就会自动压缩，因为 nginx 的 gzip_static 模块足够智能，可以在不存在压缩版本时提供来自未压缩版本的内容，或者如果未压缩版本的时间戳比gzip 版本的时间戳。因此，这是一个偶尔运行的脚本，只要服务器不忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:07:43.830

这是我的尝试：

```
#!/bin/bash
# you need to clean up .gz files when you remove things
find . -type f -perm -o=r -not -iname \*.gz | \
while read -r x
do
    if [ "$x" -nt "$x.gz" ]; then
        gzip -cn9 "$x" > "$x.gz"
        chown --reference="$x" "$x.gz"
        chmod --reference="$x" "$x.gz"
        touch --reference="$x" "$x.gz"
        if [ `stat -c %s "$x.gz"` -ge `stat -c %s "$x"` ]; then
            rm "$x.gz"
        fi
    fi
done 
```

从这里偷走了大部分：[https ://superuser.com/questions/482787/gzip-all-files-without-deleting-them](https://superuser.com/questions/482787/gzip-all-files-without-deleting-them)

变化包括：

*   跳过 .gz 文件
*   添加 -9 和 -n 以使文件更小
*   删除最终变大的文件（不幸的是，这意味着每次运行脚本时都会重试它们。）
*   确保压缩文件的所有者、权限和时间戳与原始文件匹配
*   仅适用于所有人都可读的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:37:54.220

像这样的东西，也许？

```
#!/bin/sh

case $1 in
  *.gz )
    # If it's an orphan, remove it
    test -f "${1%.gz}" || rm "$1" ;;
    # Otherwise, will be handled when the existing parent is handled
  * )
    make -f - <<'____HERE' "$1.gz"
%.gz: %
    # Make sure you have literal tab here!
    gzip -9 <$< >$@
____HERE
    ;;
esac 
```

如果您已经有 Makefile，请务必使用文字文件而不是此处的文档。

与`find`左结合作为练习。如果要保存进程，您可能希望接受多个目标文件并循环它们。

# ruby-on-rails - 如何检查 mongoid 文档中是否存在嵌入式文档？

> ID：10527246
> 
> 赞同：7
> 
> 时间：2012-05-10T03:46:49.847
> 
> 标签：ruby-on-rails, mongoid

如何检查在 Ruby on Rails 中使用 mongoid 的文档是否存在嵌入文档？假设我有一个包含 , 的文档`user`，`name`并且`email`可能有一个`nicknames`嵌入的文档。现在，如果我运行`user.first.nicknames`并且其中`user`没有`nicknames`嵌入的文档，它将出错。我试过了`matches?`，`exists?`但它们不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-24T18:12:58.483

在此处其他答案的帮助下，我发现了一些对我有用的东西，我认为这就是原始海报的想法；

```
Model.where(:"subdoc.some_attribute".exists => true) 
```

这将返回子文档中存在“some_attribute”的所有文档。注意符号的语法，这就是我所缺少的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T04:02:16.357

如果它不存在，这应该返回 true，如果它确实存在`User.first.nicknames.nil?`，这将返回 true：`User.first.nicknames.present?`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T18:28:24.930

你可以做到`User.where(:nicknames.exists => true).include?(user)`。

`User.where(:nicknames.exists => true)`将仅返回包含`nicknames`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T04:00:40.727

应该很简单`{"user":{"$exists":"nicknames"}}`

# sql-server - 更新 SQL Server 中的 Select Case 语句：

> ID：10527248
> 
> 赞同：2
> 
> 时间：2012-05-10T03:47:11.530
> 
> 标签：sql-server, sql-server-2008, select

我编写了以下更新语句来更新 PLN_DU_Vendor 表的 StatusID。

```
UPDATE 
PLN_DU_Vendor
SET
    PLN_DU_Vendor.StatusID = 2
FROM
    PLN_DU_Vendor 
INNER JOIN PMT_RFDDetail D ON PLN_DU_Vendor.DUID = D.DUID
INNER JOIN PMT_RFDHeader H ON H.RFDID = D.RFDID AND PLN_DU_Vendor.VendorID = H.VendorID
INNER JOIN PLN_LASCO_Header LH ON LH.LASCOID = H.LASCOID AND LH.ReleaseID = PLN_DU_Vendor.ReleaseID
AND PLN_DU_Vendor.VendorDUQuantity = (D.DespatchQuantity + ISNULL(PLN_DU_Vendor.RFDQuantity, 0))
WHERE
     H.RFDID = 10 
```

如果条件

```
PLN_DU_Vendor.VendorDUQuantity = (D.DespatchQuantity + ISNULL(PLN_DU_Vendor.RFDQuantity, 0)) 
```

失败，我需要将 StatusID 更新为 1。如何在同一更新选择语句中执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T03:58:11.350

看起来您希望将条件从 移动`JOIN`到分配作为`CASE`语句：

```
UPDATE 
PLN_DU_Vendor
SET
    PLN_DU_Vendor.StatusID = CASE 
    WHEN PLN_DU_Vendor.VendorDUQuantity = (D.DespatchQuantity + ISNULL(PLN_DU_Vendor.RFDQuantity, 0))
    THEN 2
    ELSE 1
    END
FROM
    PLN_DU_Vendor 
INNER JOIN PMT_RFDDetail D ON PLN_DU_Vendor.DUID = D.DUID
INNER JOIN PMT_RFDHeader H ON H.RFDID = D.RFDID AND PLN_DU_Vendor.VendorID = H.VendorID
INNER JOIN PLN_LASCO_Header LH ON LH.LASCOID = H.LASCOID AND LH.ReleaseID = PLN_DU_Vendor.ReleaseID
WHERE
     H.RFDID = 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:00:35.237

您无法比较任何浮点数与运算符`=`

```
PLN_DU_Vendor.VendorDUQuantity = (D.DespatchQuantity + ISNULL(PLN_DU_Vendor.RFDQuantity, 0)) 
```

所以，最好是

```
PLN_DU_Vendor.VendorDUQuantity - (D.DespatchQuantity + ISNULL(PLN_DU_Vendor.RFDQuantity, 0)) < ERROR 
```

# ios - 无法提交 - 搞砸了我的源代码控制，如何解决？

> ID：10527251
> 
> 赞同：1
> 
> 时间：2012-05-10T03:47:26.930
> 
> 标签：ios, xcode, version-control, commit, fatal-error

各位程序员好，

我不小心将整个项目添加到我的项目中，不是一次，而是两次，因为我正在寻找另一个功能。由于文件夹没有出现在 Xcode 本身中，我去 Finder 并再次从文件系统中手动删除它们（到目前为止一切都很好，因为我得到了所有警告 4x）。

但是现在，当我想提交对源代码控件的更改时，我收到了这个错误：

```
fatal: Could not switch to '/Users/myID/Developer/iOS/ProjectName/ProjectName/ProjectName': No such file or directory 
```

我几乎不知道该怎么办，有人遇到过这样的问题吗？清理项目没有帮助，这就是我能想到的，因为我没有那么有经验！

帮助我非常感谢！

PS：我在 OSX 10.7.4 上运行 Xcode 4.3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:53:59.697

对于像这样严重的事情，我会创建一个新的 git 存储库，从搞砸**之前的提交修订开始。**

假设您的代码在`~/Source/MyProject`.

*   首先，您需要在搞砸之前进行*提交修订。*`git log`您可以使用或更好地从命令行获取他，您可以使用出色的（免费） [SourceTree](http://www.sourcetreeapp.com) Mac 应用程序。让我们假设它是 62a6614fb55d692cd5a6e251cc05dea45d9668fe。

*   接下来开始一个新的回购：`$ mkdir ~/Source/MyProjectNew; cd ~/Source/MyProject/New; git init`.

*   将旧项目添加为新项目的“远程源”：`$ git remote add origin ~/Source/MyProject`.

*   获取预先设置好的代码：`$ git fetch origin 62a6614fb55d692cd5a6e251cc05dea45d9668fe`.

*   将主分支重置为预先确定的提交：`$ git reset --hard FETCH_HEAD`.

*   删除原点：`$ git remote rm origin`.

你现在有了一个没有搞砸代码的新仓库。你需要重命名旧的和新的 repo 并继续你的生活。

# visual-studio-2010 - 这个通知是什么意思？

> ID：10527255
> 
> 赞同：0
> 
> 时间：2012-05-10T03:48:01.010
> 
> 标签：visual-studio-2010, visual-c++-2010

当我尝试在 Visual C++ 2010 中调试代码时，在输出框中，有一些通知：

> 'latihan.exe'：已加载 'C:\Users\sinta\Documents\Visual Studio 2010\Projects\latihan\Debug\latihan.exe'，已加载符号。
> “latihan.exe”：已加载“C:\Windows\System32\ntdll.dll”，找不到或打开 PDB 文件
> “latihan.exe”：已加载“C:\Windows\System32\kernel32.dll”，找不到或打开 PDB 文件
> “latihan.exe”：已加载“C:\Windows\System32\KernelBase.dll”，找不到或打开 PDB 文件
> “latihan.exe”：已加载“C:\Windows\System32\mpich2mpi.dll” , 无法找到或打开 PDB 文件“latihan.exe”：已加载“C:\Windows\System32\msvcr100d.dll”，已加载符号。
> 程序“[1008] latihan.exe: Native”已退出，代码为 0 (0x0)。

编码 ：

```
#include <stdio.h>

int main ()
{
    printf ("Welcome \n");
    return 0;
} 
```

我只是想知道， ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:07:15.390

这些消息意味着您的系统缺少各种 Windows DLL 的符号文件（.pdb，用于*程序数据库*）。它们是非常无害的消息，因为通常您不会真正关心它们，但是如果您想获取符号，可以通过[Microsoft 的符号服务器](http://support.microsoft.com/kb/311503)获取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:27:53.837

右键单击输出窗口，您将获得一个上下文菜单：

![在此处输入图像描述](../Images/56a885cb8ba49c0894f6308de4b842d4.png)

带有复选框的条目与您发布的内容相对应。它们是调试器在您的程序中发生您可能想知道的有趣事情时生成的通知。取消选中一个会停止显示相应类型的消息。将它们全部记录下来：

*   异常消息。程序中抛出的任何异常都会产生“第一次机会”异常通知消息。如果没有捕获到异常，那么您将得到另一个异常，并且调试器会在引发异常的语句处停止。您总是对异常感兴趣，因为它们通常表明存在问题。
*   步骤过滤消息。与 C++ 代码无关，托管代码具有“仅我的代码”调试功能，可以自动跳过您未编写的代码。
*   模块加载消息。对于加载到进程中的每个 DLL，您都会收到一条消息。你得到了那些，消息 2 到 6。它还告诉你它是否可以找到 DLL 的调试符号。您没有这些 Windows DLL，因为您没有配置符号服务器。您实际上并不需要它们，但是当 winapi 调用失败时它们会很方便。
*   模块卸载消息。告诉您何时卸载 DLL
*   处理退出消息。告诉您程序何时停止运行。您的片段中的最后一个。您可能对退出代码感兴趣，0 很好。
*   线程退出消息。告诉您线程何时停止运行，同时显示退出代码。
*   程序输出。程序中的代码在 C/C++ 程序中使用 OutputDebugString 编写的任何内容都将出现在“输出”窗口中。

在您的代码段中，一切看起来都很正常。

# jquery - jQueryUI 对表格列的影响

> ID：10527256
> 
> 赞同：1
> 
> 时间：2012-05-10T03:48:02.617
> 
> 标签：jquery, css, jquery-ui

尝试使用 jQueryUI 将表格列滑出视图，然后再滑入。遗憾的是，它似乎没有保留正确的列宽和位置，因此列最终出现在错误的位置。

我遇到的问题的提炼版本位于[http://jsfiddle.net/Z76xE/6/](http://jsfiddle.net/Z76xE/6/)。我已经看到了许多不同的不良行为变体，但这里指出的简单案例只会在扩展操作上感到困惑：它首先将列扩展为大于 CSS 修复的 150px，然后在末端将其左边缘对齐以使列再次变为 150px，在表格的左侧留下空白区域。

在无休止地玩这个和跟踪 JavaScript 的过程中，我意识到 jQuery 获得的列宽与 CSS 声明的不同。所以我在 [not] 告诉 jQuery / jQueryUI 更新其对列宽的理解方面做错了。我只是不知道在哪里！

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:13:52.550

如果您在打开 DOM 检查器的情况下观看动画，您会看到`<td>`被包裹在 a 中`<div>`并且`<div>`被动画化。然而，这：

```
<tr>
    <div>
        <td></td>
    </div>
</tr> 
```

是无效的 HTML，所以谁知道浏览器会用它做什么奇怪而美妙的事情。我们确实知道它会做一件奇怪的事情：`<td>`当你打开它的动画时，它会把它留在错误的地方。

摆弄表格元素的定位和显示有点像噩梦，所以最好避免它。如果您将 HTML 更改为：

```
<td>
    <div id="NavColumn">
        I am the left-side column
    </div>
</td> 
```

那么你会有更好的运气：http: [//jsfiddle.net/ambiguous/VUvCw/](http://jsfiddle.net/ambiguous/VUvCw/)

您必须稍微调整 CSS 以获得您想要的视觉布局，但该结构应该让您的动画得到整理。

# php - php 你如何确保 $_POST 数据来自你的表单而不是外部影响？

> ID：10527257
> 
> 赞同：8
> 
> 时间：2012-05-10T03:48:03.193
> 
> 标签：php, forms, session, validation

有没有办法确保`$_POST`我的代码收到的数据来自我的表单而不是外部影响。基本上我不希望有人能够欺骗`$_POST`一个普遍可用的页面，例如创建帐户。任何用户都可以访问帐户创建页面，但我想确保只有我的 account_creation 表单提交的数据才能得到处理。

我唯一能想到的是启动一个`$_SESSION`，然后使用隐藏输入将 session_id 提供给表单。在 $_POST 之后，隐藏输入的值将与当前 session_id 匹配。

如果有更好的方法来达到这个结果？如果有我期待听到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T04:00:49.110

您无法确保数据来自*表单*。POST 请求只是一个 POST 请求，它可以通过多种方式生成。HTML 表单只是对用户非常友好的方式*之一。*您的服务器需要验证通过 POST 请求接收到的数据是否有效以及是否对其进行操作。

话虽如此，有些东西可以帮助您限制和验证正在提交的数据。首先，要求用户使用（会话）cookies 登录。这消除了匿名用户的随机请求。其次，您可以将令牌作为隐藏字段嵌入到您也保存到用户会话中的表单中。POST 请求需要包含该令牌才能有效。令牌只是一个伪随机字符串。
您可以通过准备您希望用户提交的表单字段的哈希来增强这一点。如果表单值应该是只读的，您也可以将该值包含到散列中。例如：

```
$rand = md5(mt_rand());
$hash = sha1('lastname:firstname:email:' . $rand);

$_SESSION['rand'] = $rand;
$_SESSION['hash'] = $hash;

// on form submit:

$keys = array_keys($_POST);
$checkHash = sha1(join(':', $keys) . ':' . $_SESSION['rand']);
if ($checkHash != $_SESSION['hash']) {
    die('Form submission failed token validation');
} 
```

这只是一个简单的示例，您可能希望按字母顺序对键进行排序，以确保获得相同的哈希值等。它演示了用户需要为每个请求拥有一个唯一令牌的概念，尽管这可以防止对表单进行调整并提交比想要的更多或更少的数据。

但这并不意味着用户实际上使用了您的表单来提交数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-27T07:00:17.677

```
$ref = $_SERVER['HTTP_REFERER'];
if($ref !== 'some site path/index.php')
{
    die("Access Denied!");
} 
```

**这应该可以防止大多数人将数据发布到您的数据库中，以免受到外部影响。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T03:59:22.753

稍微好一点的方法是添加额外的验证，例如 user_agent、user_ip 和其他一些 $_SERVER 变量——这就是我使用的两个。

因此，按照您的描述创建唯一 ID（或会话 ID），但添加一些额外的验证，代理和 ip 也匹配。不是万无一失的，但增加了另一层安全性。

编辑：我应该补充一点，您不会将用户代理发回；保留该服务器端并针对返回的会话 ID 进行静默验证。

此外，如果提交未通过验证，切勿向用户透露原因 - 这样作弊者不知道您如何跟踪他们。您还可以添加“5 无效并且您出局”跟踪，但您需要为此进行某种登录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T03:59:38.447

使用会话 ID 无疑是一种方法。但是还有其他选项，其中大多数（如果不是全部）涉及将一些数据添加为隐藏字段。

1.  使用验证码。这对于每个页面加载始终是唯一的，因此必须强制使用您的表单。
2.  生成随机数据并将其存储在数据库（或只是`$_SESSION`变量）中，并在提交表单后检查它。

选项一是我推荐的用户创建表单，因为它具有双重职责。它会停止自动提交您自己的表单，同时确保`$_POST`数据来自您自己的表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T04:04:08.467

这是防止 XSRF 的标准模式模式。本质上它与您提到的类似。当为用户呈现表单时，服务器会创建一个随机令牌。它与用户的浏览器 cookie 相关联。在表单提交时，它会被发送回服务器。然后服务器将令牌与发出的令牌进行比较，并且只有在成功匹配后才会执行表单操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T04:43:22.130

有很多关于在表单中放置唯一值并与服务器端会话中存储的值匹配的好消息。这样做，但也要考虑当用户使用后退按钮并可能尝试提交表单两次，或者他们打开第二个浏览器窗口（同一个会话！），或者他们在您的网站上使用多个表单时会发生什么。

不要通过不考虑您的系统来创建疯狂的错误。

# virtualization - 新手管理程序问题

> ID：10527260
> 
> 赞同：0
> 
> 时间：2012-05-10T03:48:20.223
> 
> 标签：virtualization, hypervisor

1.  如果我安装一个裸机管理程序（例如 ESXi），它是否允许我同时运行 Windows 7 和 Linux？

2.  它允许我运行多个 Windows 7 实例吗？

3.  当我坐在在虚拟机管理程序上运行 Win7 和 Linux 的 PC 时，当我看屏幕时我看到的是哪个操作系统？（我怀疑访问任一操作系统的唯一方法是进行远程登录。）

4.  假设#2 的答案是肯定的，那么如何在同一个硬盘驱动器上管理多个 Win7 安装？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:20:30.413

如果您只是想并行运行 Linux 和 Windows，您当然可以在例如 ESXi 上执行此操作。尽管如此，操作系统仍将使用可供它们使用的虚拟化（或模拟）硬件运行，即您将无法轻松地直接访问所有硬件，并且管理程序本身不仅引入了开销，而且这种开销不是确定性的。如果您想运行 RTOS（如 Real-Time Linux）或任何其他 RTOS，那么您需要一个“实时管理程序”。你可以用谷歌搜索这样的虚拟机管理程序——那里有一些。（我不想在这里推荐一个，因为我们自己就是这种解决方案的供应商）问候 GFL

# apache - 将“.php”扩展名附加到 URL？

> ID：10527261
> 
> 赞同：0
> 
> 时间：2012-05-10T03:48:22.813
> 
> 标签：apache, .htaccess, url-rewriting

我完全不熟悉这背后的过程，但我希望在文件中有一个规则，该规则将在 URL ***IFF***`.htaccess`之后附加，*该 URL 确实是一个文件。*`.php`

 **我有：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

如果用户在没有`.php`扩展名的情况下键入 URL，则进行重定向，但除了重定向之外，我还想实际附加带有`.php`扩展名的 URL。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:02:14.533

您将需要使用该`R`标志，以便指示客户端重定向到新 URL。**

# actionscript-3 - 带有类文件的影片剪辑组件

> ID：10527267
> 
> 赞同：0
> 
> 时间：2012-05-10T03:49:05.777
> 
> 标签：actionscript-3, class, formatting

我需要关于我应该如何做这件事的建议。我有一个大型应用程序，其中所有代码都在 frame1 的主时间线上。我已经开始尝试将代码放入类文件中，并告诉某些影片剪辑组件将这些类文件用于他们的代码。到目前为止，我大多是成功的，但也许这不是我应该做的。

主时间轴上有 8 个按钮，分别命名为 O1 到 O8。然后，我的库中有一个movieclip 组件，其中有自己的一组O1 到O8 按钮。这个组件已经被添加到舞台它自己的层并赋予实例名称battleDashboard。当它是一大块代码（没有分类）时，我曾经访问过这样的按钮。

O1 //主界面主时间线上的按钮battleDashboard.O1 //battleDashboard组件内的按钮

自创建类以来，我一直在使用“this.O1”访问组件内的按钮。类文件使用 BattleDashboard 影片剪辑组件的属性面板链接。它应该在战斗发生时调用，然后返回主界面，完成后隐藏自身。

由于我在这个应用程序中有超过 10,000 行代码，我真的希望组件有自己的单独代码。我发现我必须重写很多函数并将它们包含在曾经共享的类文件中。我还必须花时间使用“公共函数集”复制对象和变量，然后使用自定义事件检索它们。我是否最好将其全部留在主时间线上并仅将外部文件作为文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:39:28.743

这个问题无法回答，因为它......如果所有代码都不是基于 OOP 并且驻留在时间轴上，为什么要制作单独的类文件？请更具体。尝试从您的应用程序制作对象时遇到什么问题？？？

通常，您的主 .fla 文件的文档属性中需要一个主类。这个 mainClass 应该扩展 MovieClip。这是 org/Main.as 中的一个示例 在文件夹中创建一个空的 flash 文件，然后在其中创建一个名为“org”的文件夹。将此代码放在此文件夹中名为 Main.as 的文件中，并在文档类属性中将 org.main 设置为 main Class。在动作面板中 fla 的第一帧：

```
var aVarOnFirstFrame:String = "some variable value"; 
```

此示例向您展示如何调用 Flash 电影的主容器以及您的类如何与 doc 交互。我希望这会有所帮助。

您将看到如何调用变量和方法。

```
package org {
import flash.display.DisplayObjectContainer;
import flash.display.DisplayObject;
import flash.display.Sprite;
import flash.display.MovieClip;
import flash.display.Stage;
import flash.events.Event;
public class Main extends MovieClip{

    private var mainStageObject:DisplayObjectContainer;
    private var theStage:Stage;

    public function Main(){
        mainStageObject = this.parent;
        theStage = this.stage;
        // Let's call this :
        trace(this + " == \"[object Main]\"\nAND NOT \"[object MainTimeLine]\"");
        trace("which is the default if no main class is specified for the .fla root Document")
        // this.stage is a shortcut to the top level element
        trace(this + ", paced on " + this.parent + " == " + this.stage + " == " + theStage);
        trace("comparaison for the three calls : ");
        var equalityParentStage:Boolean = (this.parent === this.stage);
        var equalityStageAndTheStage:Boolean = (this.stage === theStage);
        var equalityParentAndTheStage:Boolean = (this.parent === theStage);
        var equalityDisplayOContainer:Boolean = (this.parent === mainStageObject);
        var equalityForAllThreeProps:Boolean = ((this.parent === this.stage) && (this.stage === theStage) && (this.parent === mainStageObject));
        trace("this.parent === this.stage ? " + equalityParentStage);
        trace("this.stage === theStage ? " + equalityStageAndTheStage);
        trace("this.parent === theStage ? " + equalityParentAndTheStage);
        trace("this._parent ==== mainStageObject ? " + equalityDisplayOContainer);
        trace("this.parent === this.stage === theStage === mainStageObject ? " + equalityForAllThreeProps);
        this.addEventListener(Event.ADDED_TO_STAGE,onMainIsOnStage,false,0,false);
        this.addEventListener(Event.ACTIVATE,onMainIsActivated,false,0,false);
    }
    private function onMainIsOnStage(e:Event):void{
        trace(e.target.aVarOnFirstFrame);
        // -> outputs : null;
    }
    private function onMainIsActivated(e:Event):void{
        trace(e.target.aVarOnFirstFrame);
        // -> outputs : some variable value;
    }
}
}

/*
[object Main] == "[object Main]"
AND NOT "[object MainTimeLine]"
which is the default if no main class is specified for the .fla root Document
[object Main], paced on [object Stage] == [object Stage] == [object Stage]
comparaison for the three calls : 
this.parent === this.stage ? true
this.stage === theStage ? true
this.parent === theStage ? true
this._parent ==== mainStageObject ? true
this.parent === this.stage === theStage === mainStageObject ? true
null
some variable value
*/ 
```

# hadoop - Hadoop - reducer 如何获取数据？

> ID：10527271
> 
> 赞同：4
> 
> 时间：2012-05-10T03:50:03.773
> 
> 标签：hadoop

我知道映射器为每个 reducer 生成 1 个分区。reducer 如何知道要复制哪个分区？假设有 2 个节点运行 mapper 用于字数统计程序，并且配置了 2 个 reducer。如果每个 map 节点产生 2 个分区，并且两个节点中的分区都可能包含相同的单词作为 key，reducer 将如何正常工作？

例如：

如果节点 1 产生分区 1 和分区 2，并且分区 1 包含一个名为“WHO”的键。

如果节点 2 产生分区 3 和分区 4，并且分区 3 包含一个名为“WHO”的键。

如果分区 1 和分区 4 进入减速器 1（并保留到减速器 2），减速器 1 如何计算正确的字数？

如果这是不可能的，并且分区 1 和 3 将转到 reducer 1，那么 Hadoop 是如何做到的？它是否确保来自不同节点的给定键值对总是去同一个reducer？如果是这样，它是如何做到的？

谢谢，苏雷什。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:41:33.237

在您的情况下，由于分区 1 和分区 3 都使用键“WHO”，因此可以保证两个分区都使用同一个 reducer。

### 更新

在hadoop中，任何时候一个tasktracker的最大reduce任务数由`mapred.tasktracker.reduce.tasks.maximum`属性决定。
MapReduce 作业的 reducer 数量通过以下方式设置`-D mapred.reduce.tasks=n`

> 当有多个 reducer 时，map 任务对它们的输出进行分区，每个任务为每个 reduce 任务创建一个分区。每个分区中可以有许多键（及其关联的值），但任何给定键的记录都在一个分区中。分区可以由用户定义的分区函数控制，但通常默认的分区器——它使用散列函数对键进行存储——工作得很好。（Hadoop：权威指南）

因此，具有指定键的值将始终转到同一个减速器。

# php - max_execution_time 替代方案

> ID：10527272
> 
> 赞同：0
> 
> 时间：2012-05-10T03:50:16.107
> 
> 标签：php, for-loop, timeout, execution-time, php-ini

所以这是低调：

我正在为其开发的客户端在 HostGator 上，它已将其 max_execution_time 限制为 30 秒，并且不能被覆盖（我已经尝试并确认它不能通过他们的支持和 wiki）

**我所做的代码是获取上传的文件，然后......**

1.  循环通过 xml
2.  获取文件中的所有提要下载链接
3.  下载每个xml文件
4.  单独循环每个文件的每个 xml 数组，并根据每个项目的来源（即文件名）将每个项目的信息插入数据库

现在有什么办法可以让我以某种方式排队或将工作负载分成多个文件吗？我知道代码可以完美运行，并在插入之前检查每个项目是否存在，但我被困在 execution_limit 附近。

任何建议表示赞赏，如果您有任何问题，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:16:37.707

你知道你可以`max_execution_time`通过注册一个关闭处理程序来欺骗吗？在该代码中，您可以再运行 30 秒 ;-)

好的，现在来点更有用的。

您可以在数据库中添加一个小队列表来跟踪您的位置，以防脚本中途终止。

*   获得所有下载链接后，将它们添加到表格中
*   然后你下载一个文件并处理它；完成后，从队列中检查（删除）它们
*   每次运行时，您检查队列中是否还有工作

为此，您需要多次请求该 URL；也许使用 JavaScript 不断重新加载，直到工作完成？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:21:14.337

时间限制仅在通过网络服务器执行 PHP 脚本时有效，如果您从 CLI 或作为后台进程执行脚本，它应该可以正常工作。

请注意，如果您不够小心，执行外部脚本会有些危险，但这是一个有效的选择。

检查以下资源：

[过程控制扩展](http://au2.php.net/manual/en/refs.fileprocess.process.php "过程控制扩展")

特别是：

[pcntl-exec](http://au2.php.net/manual/en/function.pcntl-exec.php "pcntl-exec")

[pcntl-fork](http://au2.php.net/manual/en/function.pcntl-fork.php "pcntl-fork")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T10:23:44.040

我就是这种情况。我的方法类似于杰克的

*   接受执行时间限制就在那里
*   设计应用程序以应对突然退出（查看`register_shutdown_function`）
*   识别流程中所有需要时间的部分
*   不断保存进程的进度
*   修改您的组件，以便它们能够从任意点开始，例如 XML 文件中的位置或继续下载您要获取的 XML 链接列表

对于任务我做了两个模块，Import 用于实际处理；TaskManagement 用于处理这些任务。
为了调用 TaskManager，我使用 CRON，现在这取决于虚拟主机为您提供什么，如果它足够的话。还有一个 WebCron。

Jack 的 JavaScript 方法的优点是它只在需要时添加请求。如果没有要执行的任务，则脚本运行时将非常短并且可能被夸大了*，但仍然如此。缺点是它需要用户一直等待，而不是关闭选项卡/浏览器、JS 支持等。 *) 在这种情况下，可能比 1 个用户的 1 次点击要求低得多

然后当然要研究性能改进、缓存、跳过不需要/未更改的内容等。

# python - 监控程序崩溃

> ID：10527273
> 
> 赞同：2
> 
> 时间：2012-05-10T03:50:21.310
> 
> 标签：python, crash, subprocess, spynner

我目前正在使用 Python 模块 Spynner 来自动化一些网络任务。我遇到了一个问题，尽管由于某种原因，该过程只是简单地停止移动，冻结但仍然根据 Windows 做出响应。

我想做的是设置某种形式的监视器来检查是否发生这种情况，然后重新启动该过程。我在想可能监控程序的终端输出，如果它在一定时间后停止推送数据，它会杀死程序并重新启动。

我知道我想如何杀死程序并再次运行它，只需使用 os 和子进程，但我不确定如何设置该程序以监视终端是否在特定时间内停止发送数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T05:33:33.183

以下代码是从“ [Non-blocking read on a subprocess.PIPE in python](https://stackoverflow.com/questions/375427/non-blocking-read-on-a-subprocess-pipe-in-python) ”中借用并稍作修改的（感谢 JF Sebastian - 如果您接受此答案，请投票支持原始代码）

```
import sys
import time
from subprocess import PIPE, Popen
from threading  import Thread

try:
    from Queue import Queue, Empty
except ImportError:
    from queue import Queue, Empty  # python 3.x

ON_POSIX = 'posix' in sys.builtin_module_names

def enqueue_output(out, queue):
    for line in iter(out.readline, b''):
        timestamp = time.time( )
        queue.put((timestamp, line))
    out.close()

#-- This is how long you're willing to wait before you 
#-- consider your Spynner process to be brain-dead.
MAX_WAIT_TIME = 300.0  #-- we'll wait 5 minutes (300 seconds)

#-- Construct a shared queue that will be used to send messages from 
#-- the subprocess I/O polling thread to the watchdog (main) thread.
q = Queue()

#-- Spawn your subprocess...
p = Popen(['myprogram.exe'], stdout=PIPE, bufsize=1, close_fds=ON_POSIX)

#-- Create a new thread that runs in the same process as the watchdog.
#-- This thread will poll the output of the subprocess and populate the 
#-- shared queue.
t = Thread(target=enqueue_output, args=(p.stdout, q))
t.daemon = True # thread dies with the program
t.start()

#-- Now, we'll try to read from the shared queue.
try:
    #-- Queries the shared queue for the next item in the queue,
    #-- waiting for up to MAX_WAIT_TIME before failing with an Empty exception.
    timestamp, line = q.get(True, MAX_WAIT_TIME)
except Empty:
    #-- Ok...the queue is empty and it's been MAX_WAIT_TIME since
    #-- We've pulled anything from the queue.
    p.terminate( )  #-- "terminate with extreme prejudice"
else: # got line
    #-- Got a (timestamp, line_of_text) pair, where the timestamp is the
    #-- system time when the I/O polling thread grabbed the line from
    #-- the subprocess pipe.  This timestamp isn't strictly necessary,
    #-- but might come in handy in debugging the brain-dead Spynner process.
    #-- So now...do something with that line of text!
    doSomething(line) 
```

您必须使用一些逻辑来扩充此代码，以生成一个新的 Spynner 进程以从终止的进程停止的地方继续，等等，但希望这能让您了解如何继续。

# java - 如何使用 UTF-8 格式的文件作为 .srt 文件在媒体播放器中显示字幕？

> ID：10527280
> 
> 赞同：0
> 
> 时间：2012-05-10T03:52:28.503
> 
> 标签：java, file, utf-8, indic, srt

我在文件写入方面遇到问题。当我使用 UTF-8 格式在文件中写入孟加拉语和英语时，该文件包含我所写的内容。但问题是当我打算将此文件用作 .srt 文件以在媒体播放器中显示视频的字幕时

媒体播放器不能显示孟加拉语字幕，而不是孟加拉语，媒体播放器显示一些英文和一些符号....

但是当我将我的文件（我在其中写入）的内容复制到另一个文件，然后使用另一个文件时，媒体播放器可以准确地显示我在文件中写的内容，例如孟加拉语、英语。

我的问题是为什么第一个文件不能和第二个文件做同样的事情。以及如何在可以使用第一个文件的代码中消除此问题。

```
BufferedWriter out = new BufferedWriter(
       new OutputStreamWriter(
                  new FileOutputStream(file), "UTF8"));
      int size=1;
      for(Tableclass variable:tablevector)
      {
            out.write(String.valueOf(size));
            out.newLine();
            out.write(variable.Starttime);
            out.write(" --> ");
            out.write(variable.Endtime);
            out.newLine();
            out.write(variable.Text);
            out.newLine();
            out.newLine();
          // output.format("%d\n%s --> %s\n%s\n\n",size,variable.Starttime,variable.Endtime,variable.Text);

        size++;
      }
      out.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:23:10.220

您可以使用 UTF16 而不是 UTF8，那么第一个文件将起作用。

```
BufferedWriter out = new BufferedWriter(
   new OutputStreamWriter(
              new FileOutputStream(file), "UTF16"));
  int size=1;
  for(Tableclass variable:tablevector)
  {
        out.write(String.valueOf(size));
        out.newLine();
        out.write(variable.Starttime);
        out.write(" --> ");
        out.write(variable.Endtime);
        out.newLine();
        out.write(variable.Text);
        out.newLine();
        out.newLine();
      // output.format("%d\n%s --> %s\n%s\n\n",size,variable.Starttime,variable.Endtime,variable.Text);

    size++;

  }
  out.close(); 
```

# javascript - document.write 不会在页面上打印任何内容

> ID：10527282
> 
> 赞同：-5
> 
> 时间：2012-05-10T03:52:38.413
> 
> 标签：javascript, html

这是代码

```
<html>
    <head>
        <script language="JavaScript">
        <!--
            function myFunc() {
            var doc = parent.frames[1].document;
            doc.open();
            doc.write(<html><body class="dialogBody"><form><table width="100%"><tr class="colHeader" width="100%"><td align=left valign=middle>&nbsp;</td><td height=20px align=left valign=middle>Cell2</td></tr><tr class=normalRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name='select' value=0/></td><td height=20px align=left valign=middle>Ed</td></tr><tr class=altRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name='select' value=1/></td><td height=20px align=left valign=middle>Ed2</td></tr></table></form></body></html>);
            doc.close();
            }
            var topFrame = "<a href='#' " +"onClick='parent.myFunc()'>Click me</a>";
            var botFrame = ""; 
            myFunc(); 
        //-->
        </script>
    </head>
    <frameset rows="50%,*">
    <frame src="javascript:parent.topFrame"><input type="button" value="Click me!" onclick="myFunc()" /></frame>
    <frame src="javascript:parent.botFrame">
    </frameset>

</html> 
```

使用 Safari 或 firefox 加载此代码时显示空白。你能猜到为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:55:57.137

用引号括起来，应该可以工作：

```
 doc.write('<html><body class="dialogBody"><form><table width="100%"><tr class="colHeader" width="100%"><td align=left valign=middle>&nbsp;</td><td height=20px align=left valign=middle>Cell2</td></tr><tr class=normalRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name=\'select\' value=0/></td><td height=20px align=left valign=middle>Ed</td></tr><tr class=altRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name=\'select\' value=1/></td><td height=20px align=left valign=middle>Ed2</td></tr></table></form></body></html>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:55:09.927

上的 HTML

```
doc.write(<html><body class="dialogBody"><form><table width="100%"><tr class="colHeader" width="100%"><td align=left valign=middle>&nbsp;</td><td height=20px align=left valign=middle>Cell2</td></tr><tr class=normalRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name='select' value=0/></td><td height=20px align=left valign=middle>Ed</td></tr><tr class=altRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name='select' value=1/></td><td height=20px align=left valign=middle>Ed2</td></tr></table></form></body></html>); 
```

不是字符串。字符串中的引号需要转义。它最终看起来像这样：

```
doc.write("<html><body class=\"dialogBody\"><form><table width=\"100%\"><tr class=\"colHeader\" width="100%"><td align=left valign=middle>&nbsp;</td><td height=20px align=left valign=middle>Cell2</td></tr><tr class=normalRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name='select' value=0/></td><td height=20px align=left valign=middle>Ed</td></tr><tr class=altRow><td width=20 height=20px align=left valign=middle><input type=radio height=12px width=12px align =center vlign=middle name='select' value=1/></td><td height=20px align=left valign=middle>Ed2</td></tr></table></form></body></html>"); 
```

# java - Java - 如何处理具有兼容参数的方法覆盖？

> ID：10527285
> 
> 赞同：2
> 
> 时间：2012-05-10T03:52:47.167
> 
> 标签：java, methods, overloading

采取以下代码：

```
public interface InterfaceA {    }
public interface InterfaceB {    }
public class Abba implements InterfaceA, InterfaceB {    }

public class MainThingy {
    public static void main(String[] args) {
        Abba abObj = new Abba();
        int result = MainThingy.doStuff(abObj);
    }
    private static int doStuff(InterfaceA param) {
        System.out.println("method A");
    }
    private static int doStuff(InterfaceB param) {
        System.out.println("method B");
    }
} 
```

由于这两个 doStuff() 方法都将采用 Abba 参数，因此不清楚将调用哪一个。Java 编译器和/或 JVM 如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:59:43.877

简单的。由于引用不明确，此代码无法编译。

```
$ javac MainThingy.java 
MainThingy.java:4: reference to doStuff is ambiguous, both method doStuff(InterfaceA) in MainThingy and method doStuff(InterfaceB) in MainThingy match
        MainThingy.doStuff(abObj);
                  ^
1 error 
```

# iphone - 如何使静态变量初始化

> ID：10527290
> 
> 赞同：-1
> 
> 时间：2012-05-10T03:53:44.227
> 
> 标签：iphone, objective-c, static

我想将“dataFilePath”保存为静态变量，以便在第一次使用“Constants”时对其进行初始化，而无需实例化 Class，例如 [Constants SDataFilePath]。但事实是 init 方法没有被调用。我该怎么做才能满足我的要求？（在 Java 中，构造方法将在第一次访问类时被调用）。

```
@implementation Constants

static NSString *dataFilePath;

-(id)init
{ 
    NSLog(@"init!");
    if(self = [super init]) {
        dataFilePath = [self getDataFilePathWithArg:dbfile];
    }    
    return self; 
}  

+(NSString *)SDataFilePath {
    return dataFilePath; 
}
....
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:11:04.047

好吧，您可以将 Constants 设为单例。保留您的代码原样并将此方法添加到 .m：

```
+ (Constants *)sharedConstants 
{
    static Constants *_sharedConstants = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        _sharedConstants = [[self alloc] init];
    });

    return _sharedConstants;
} 
```

以及对.h的方法声明：

```
+ (Constants *)sharedConstants; 
```

然后像这样访问您的变量：

```
[[Constants sharedConstants] SDataFilePath] 
```

这将在您第一次访问 [Constants sharedConstants] 时强制执行初始化（并且仅是第一次）。此外，您需要将 +(NSString *)SDataFilePath 更改为实例方法，而不是类方法：

```
-(NSString *)SDataFilePath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:17:12.187

这不能通过这种方式完成。为什么你希望这条路径是静态的？您可能希望研究使用 getter 设置 dataFilePath，但不使用 setter 并将类实例化为单例。这样，您可以通过某种内部方法设置路径并将实例共享为单例。看[这里](http://iphone.galloway.me.uk/iphone-sdktutorials/singleton-classes/ "单例类")

# batch-file - 要复制、重命名然后移动的批处理命令全部失败

> ID：10527293
> 
> 赞同：3
> 
> 时间：2012-05-10T03:54:15.413
> 
> 标签：batch-file

我在简单的批处理文件中遇到了一些错误。该文件旨在将文件“xyz.4do”复制到同一目录，然后将复制的文件重命名为“abc.4do”，最后将复制/重命名的文件移动到不同的文件夹。

我的代码如下，我已经评论了错误发生的位置：

```
@ECHO off
CLS
SETLOCAL

SET  file=C:/users/xyz/desktop/xyz.4do
SET  newName=abc.4do
SET  endDir=C:/users/abc/desktop

REM Error occurs on below line: "The system cannot find the file specified" but the file exists
COPY %file%
REM Error below: "The syntax of the command is incorrect"
REN  %file% %newName%
REM Error occurs on below line: "The system cannot find the file specified"
MOVE %newName% %endDir%

ECHO.
PAUSE
ENDLOCAL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T04:04:07.843

Windows 使用反斜杠`\`作为文件夹分隔符，而不是正斜杠`/`。许多命令都可以使用正斜杠，但它并不可靠。

只需在顶部更改路径以使用反斜杠，一切都会正常。

您今天提出的问题很有趣，因为它与今天发布的另一个问题直接相关：[为什么 Windows 上的 cmd.exe shell 使用正斜杠 ('/'') 路径分隔符的路径失败？](https://stackoverflow.com/questions/10523708/why-does-the-cmd-exe-shell-on-windows-fail-with-paths-using-a-forward-slash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:41:47.117

COPY 命令不是单参数命令，您需要源和目标。

顺便说一句，您应该只需要一个命令即可：

```
COPY %file% %endDir%\%newName% 
```

对于将来的批次参考，请尝试此站点：[http ://ss64.com/nt/copy.html](http://ss64.com/nt/copy.html)

# eclipse - 使用同名包如何授予我访问另一个源文件夹的文件的权限？

> ID：10527298
> 
> 赞同：1
> 
> 时间：2012-05-10T03:55:24.647
> 
> 标签：eclipse

在 Eclipse 中，我注意到如果我在我的“src”文件夹中创建一个名为“com.johnhoffman.myproject”的包，并在另一个名为“test”的源文件夹中创建一个具有此名称的包，则“test”源中的所有类文件夹可以访问我的“src”文件夹中的类。

这是为什么？即使两个包名称相同，它们仍然是不同的包，对吧？因此，为什么一个包能够访问另一个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:00:11.607

如果它们在同一个类路径中，那么如果它们*具有*相同的包名，它们就在同一个包中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:36:50.080

在这种情况下，它们是同一个包。

路径的“src”部分不包含在包名中，“test”也不包含。Eclipse 只是使用它来区分哪些类用于测试等。

这很有用，例如，当您的测试类想要打印包可访问信息以进行调试而不使用反射（这可能会变得非常混乱）时。

# php - ajax json javascript

> ID：10527304
> 
> 赞同：3
> 
> 时间：2012-05-10T03:56:07.657
> 
> 标签：php, javascript, ajax, json

因此，在尝试让 javascript 使用 Ajax 将值传递给 php 脚本时，我收到以下错误消息。

未捕获的 SyntaxError：输入意外结束

在单步执行代码时，我发现我的脚本响应返回了一个空字符串。有人请指出我的错误，我似乎无法掌握它。

这是我的 javascript (request.js)

```
var request;

function getHTTPObject()
{
    var xhr = false;
    if (window.XMLHttpRequest)
    {
        xhr = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        try
        {
            xhr = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch(e)
        {
            try
            {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e)
            {
                xhr = false;
            }
        }
    }
    return xhr;
}

function runAjax(JSONstring)
{
    // function returns "AJAX" object, depending on web browser
    // this is not native JS function!
    request = getHTTPObject();
    request.onreadystatechange = sendData;
    request.open("GET", "request.php?json="+JSONstring, true);
    request.send(null);
}

// function is executed when var request state changes
function sendData()
{
    // if request object received response
    if(request.readyState == 4)
    {
    // parser.php response
    var JSONtext = request.responseText;

    // convert received string to JavaScript object
    var JSONobject = JSON.parse(JSONtext);

    // notice how variables are used
    var msg = "Number of errors: "+JSONobject.errorsNum+
        "\n- "+JSONobject.error[0]+
        "\n- "+JSONobject.error[1];

    alert(msg);
    }
} 
```

我的 php 文件。

```
<?php
//request.php
$decoded = json_decode($_GET['json']);

$json = array(
    'errorsNum'    =>    2,

    'error'       =>    array(
                        "error 1","error 2!"
                 )
);

$encoded = json_encode($json);

die($encoded);

?> 
```

最后是我调用 ajax 的 html 文件。

```
<html>
<head>
<script src="request.js">
</script>
</head>
<body>
<a href="Javascript:runAjax('vinoth')">call</a><br>
</body>
</html> 
```

提前致谢。

# android - Android 线程和 Throwables

> ID：10527308
> 
> 赞同：1
> 
> 时间：2012-05-10T03:56:25.177
> 
> 标签：android, multithreading, try-catch, android-context, throwable

我有一个执行 I/O 的类（我们称之为 ABC）。FileOutputStream.close 之类的某些内容使您可以在它们周围使用 try catch 块。此外，我创建了自己的可投掷对象，以帮助用户和我了解正在发生的事情。

在这个类中，我传递了创建它的活动的上下文，并使其创建并警告对话框带有可抛出的文本。

所以这是我的问题，我需要从一个新线程中运行这个类，但仍然想从可抛出的文本中获取信息。

例如，这就是我课堂上典型的 catch 子句的样子。

```
new AlertDialog.Builder(myContext)
                        .setTitle("Error Message")
                        .setMessage(
                                "Error Code: #006" + "\n" + T.toString())
                        .setNeutralButton("OK",
                                new DialogInterface.OnClickListener() {

                                    @Override
                                    public void onClick(
                                            DialogInterface dialog,
                                            int which) {
                                        // TODO: Add Ability to Email
                                        // Developer

                                    }
                                }).show(); 
```

我会做类似的事情吗

```
throw new Throwable(throwable); 
```

this 在 ABC 类中代替警报对话框？然后我会将警报对话框移动到调用我的 Runnable 接口运行方法或在后台执行异步任务的尝试捕获吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:32:25.680

使用 Java 的[Thread.UncaughtExceptionHandler](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)保存文本/显示对话框。因此，您将创建一个扩展 Thread.UncaughtExceptionHandler 的新类，如下所示：

```
public class myThreadExceptionHandler implements Thread.UncaughtExceptionHandler
{
    private DataTargetClass dataTarget;
    public myThreadExceptionHandler(DataTargetClass c)
    { 
        dataTarget = c;
    }
    public void uncaughtException(Thread t, Throwable e)
    {
        dataTarget.exceptionObject = e;
        dataTarget.onException();
        // Just substitute in whatever method your thread uses to return information.
    }
} 
```

在启动线程的代码中，您将执行以下操作：

```
foo = new DataTargetClass();
Thread t = new Thread(myIoRunnable(foo));
t.setUncaughtExceptionHandler(new myThreadExceptionHandler(foo));
t.start(); 
```

# wpf - 从视图模型更新列表视图

> ID：10527310
> 
> 赞同：0
> 
> 时间：2012-05-10T03:56:53.843
> 
> 标签：wpf

我正在使用 MVVM 并有一个视图，可以让用户提交一条消息（如博客），其中列表“不断填充已发布的消息”。当他们点击保存时，这会触发视图模型中的保存命令来保存消息。我的问题是，我的列表视图中的网格视图没有更新。我想知道是否有人可以帮助我。我正处于一个我只是绕圈子的地步。我知道我遗漏了一些（如果不是很多）代码，但我的脑细胞被炸了。

我的xml：

```
<Grid Name="grdMessage" HorizontalAlignment="Left" Width="816">
<Grid.RowDefinitions>
    <RowDefinition Height="auto"></RowDefinition>
    <RowDefinition Height="auto"></RowDefinition>
    <RowDefinition Height="auto"></RowDefinition>
    <RowDefinition Height="auto"></RowDefinition>
    <RowDefinition Height="auto"></RowDefinition>
    <RowDefinition Height="auto"></RowDefinition>
    <RowDefinition Height="auto"></RowDefinition>
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="auto"></ColumnDefinition>
</Grid.ColumnDefinitions>

<TextBlock Grid.Row="0" Grid.Column="0" Text="Messages" HorizontalAlignment="Left" VerticalAlignment="Bottom" />

<ListView Name="lstMessage" Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Bottom" 
             Width="762" Height="auto" Margin="15,0,0,0" ItemsSource="{Binding Path=MessageList}">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="462" Header="Message">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                            <TextBlock Text="{Binding Path=Message, Mode=TwoWay}" TextAlignment="Left" HorizontalAlignment="Left" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="150" Header="Submitter">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=Submitter, Mode=TwoWay}" TextAlignment="Left" HorizontalAlignment="Left" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView>
<TextBox Name="txtNewMessage" Grid.Row="4" Grid.Column="0" 
        HorizontalAlignment="Left" VerticalAlignment="Top" 
        Width="762" Height="auto" TextWrapping="Wrap" 
        AcceptsReturn="True" HorizontalScrollBarVisibility="Auto" 
        Visibility="Collapsed" Text="{Binding Path=Message, Mode=TwoWay}"/>

<Button Name="btnAddMessage" Grid.Row="6" Grid.Column="0" Content="Add" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,0,0" Command="{Binding Path=Save}" /> 
```

我的视图模型：

```
Message message; 
```

`ObservableCollection<Message> messageList;`
`RelayCommand save;`

```
 public ObservableCollection<Message> MessageList
    {
       get
       {    

if (messageList == null)
                    messageList = new ObservableCollection<Message>();
       }
    }

    public ICommand Save
    {
        get
        {
            return saveCmd ?? (save =   new RelayCommand(parameter => SaveMessage()));
        }
    }

    void SaveMessage()
    { 
```

this.MessageList.Add(this.Message); 数据源.AddMessage（消息）；

```
 }

    Message Model

    string message;

[DataMember]
public int Submitter {get; set;}

[DataMember]
public string Message
{
    get{ return(message);}
    set
    {
        if (message != value)
        {
            message = value;
            OnPropertyChanged("Message");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:28:16.273

显示您的保存方法代码。您也必须将消息添加到您的列表中。

```
void SaveMessage()
{ 

    this.MessageList.Add(this.Message);
    //does excecution to database to save.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:09:58.560

将消息添加到 MessageList 和 `OnPropertyChanged("MessageList")`viewmodel 的 SaveMessage() 函数。

# php - 用php创建一个空的html文件

> ID：10527321
> 
> 赞同：2
> 
> 时间：2012-05-10T03:59:08.003
> 
> 标签：php, html

我正在尝试通过 php 创建一个空白的 html 文件。我写了一些代码，但似乎不起作用。这是我的代码：

```
 $filename = 'test.html';        
    header("Cache-Control: public");
    header("Content-Description: File Transfer");       
    header("Content-Disposition: attachment; filename=$filename");
    header("Content-Type: application/octet-stream; ");
    header("Content-Transfer-Encoding: binary"); 
```

当我单击将创建此文件的链接时，它给了我一个 html 文件，但是当我看到源代码时，它显示了我请求该页面的源代码。

有什么理由为什么这行不通吗？另外，什么更快？每次用户询问时生成一个 html 文件，还是只提取一个创建的空文件并在用户询问时重命名它？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T04:07:59.243

您可能需要使用 fopen 函数：

```
$file = fopen("test.html", 'w') or die("can't open file");
fclose($file); 
```

这应该在与执行代码的 .php 文件相同的路径中创建一个名为 test.html 的文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:06:37.200

[发送标头后退出](http://php.net/manual/en/function.exit.php)以停止输出更多数据。这也将停止执行您的 PHP 脚本：

```
$filename = 'test.html';        
header("Cache-Control: public");
header("Content-Description: File Transfer");       
header("Content-Disposition: attachment; filename=$filename");
header("Content-Type: application/octet-stream; ");
header("Content-Transfer-Encoding: binary");
exit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-08T18:10:05.807

对于那些像我在 PHP 中创建一个完全空的文件一样偶然发现这个问题的人，一个非常简短的解决方案是执行以下操作：

```
file_put_contents('test.html', ''); 
```

您可以简单地将它们链接到该文件，以回答 OP 的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-01T13:48:28.900

我已经看到了大多数投票的答案，但对我个人而言，这段代码效果更好。

```
file_put_contents('test.html', ''); 
```

我相信你可以尝试这个来完美利用静态文件，比如 sitemap.xml 等等......

# java - hadoop 任务副作用文件

> ID：10527325
> 
> 赞同：1
> 
> 时间：2012-05-10T03:59:36.847
> 
> 标签：java, hadoop

我正在使用 0 减少的 hadoop。`map`目标是在方法中增量创建对象。然后在某个时候将其写入（序列化）到输出文件夹。就像我说的那样，这`reduce`件作品在这里不会做任何事情。我该怎么做呢？这就是我所拥有的：

在配置方法中，我得到文件的路径：

```
@Override
public void configure(JobConf conf) {      
  taskSideEffectFile = FileOutputFormat.getWorkOutputPath(conf) + "/temp";    
} 
```

在 map 方法中，我正在构建我的对象，最终我想序列化它，现在我试图将它始终写在 map 方法上：

```
@Override
public void map(LongWritable key, Text value,
    OutputCollector<Text, IntWritable> output, Reporter reporter)
    throws IOException {        

  AddInstanceToClassifier(value.toString());

  try
  {             
    //serialize classifier
    weka.core.SerializationHelper.write( taskSideEffectFile, nb);

  }
  catch (Exception ex)
  {
    System.err.println("Failed to serialize classifier: " + ex.getMessage());
    throw new IOException("taskSideEffectFile: " + ex.getMessage());

  } 

} 
```

这是我得到的错误：

```
12/05/09 22:47:00 INFO mapred.JobClient:  map 0% reduce 0%
12/05/09 22:47:08 INFO mapred.JobClient: Task Id : attempt_201205091117_0015_m_000001_0, Status : FAILED
java.io.IOException: taskSideEffectFile: hdfs:/192.168.78.129:9000/user/hadoop-user/output/_temporary/_attempt_201205091117_0015_m_000001_0/temp (No such file or directory)
    at naive.bayes.hadoop.MusicClassifierMapper.SaveClassifier(MusicClassifierMapper.java:168)
    at naive.bayes.hadoop.MusicClassifierMapper.map(MusicClassifierMapper.java:121)
    at naive.bayes.hadoop.MusicClassifierMapper.map(MusicClassifierMapper.java:1)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:47)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:227)
    at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209) 
```

**注意**：我使用的是 yahoo 的 hadoop-0.18.0（我认为这是我从 eclipse 运行应用程序的唯一方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:19:28.390

Hadoop 应该存储您的临时文件，然后在任务成功时将它们“提升”到输出文件夹。

# 这是你如何解决它

*   不再使用临时路径。
*   因此，现在编写代码将其放在您创建的 HDFS 中的文件夹中

# sencha-touch - 嵌套列表刷新

> ID：10527329
> 
> 赞同：1
> 
> 时间：2012-05-10T03:59:50.170
> 
> 标签：sencha-touch, extjs, sencha-touch-2, nested-lists

任何人都知道如何刷新嵌套列表？

我正在创建一个列表。在点击一个项目时，它会加载一个嵌套列表。如果我在嵌套列表中遍历，然后点击另一个项目并返回上一个项目，它仍然停留在上次离开的地方。

我尝试使用

```
Ext.getCmp('nestedList').refresh(); 
```

但这似乎不起作用。

下面是我的嵌套列表面板代码。

```
Ext.define("InfoImage.view.nestedList", {
    extend:'Ext.NestedList',
    xtype:'nestedList',
    id:'nestedList',

    config:{
        fullscreen:'true',
        title:'Work Items Task 1',
       // ui:'normal',
        xtype:'nestedList',
        displayField : 'text',
        store:'nestedListStore',
        style: {
            'background-color': 'rgba(0,140,153,0.1)'
        }

    } 
}); 
```

加载嵌套列表的代码是：

```
showListDetail : function(view, index, item, record) {
                        var rec = view.getStore().getAt(index);
                        // Ext.getStore('workItemStore').add({Task: '7'
                        // },{Server: 'mobcomp1'});
                        if (index == 0) {

                            this.getDocPanel().animateActiveItem(
                                    this.getNestedPanel(), {
                                        type : 'slide',
                                        direction : 'up',
                                        duration : 250
                                    });
                            Ext.getCmp('nestedList').reload();

                        } 
```

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:40:55.043

您不能直接刷新`nestedlist`. 没有`refresh()`或没有`reload()`方法。

您需要做的就是配置`load`了用于您`nestedlist`使用它的商店`proxy`。

```
 this.store.setProxy({
    // proxy configurations ...
    // ......
    // ......
 });
 this.store.load(); 
```

# android - Android Galaxy Nexus 位图问题

> ID：10527330
> 
> 赞同：0
> 
> 时间：2012-05-10T03:59:55.647
> 
> 标签：android

我正在开发一个使用自定义视图的应用程序，其中设置了位图并且可以通过触摸屏输入移动和缩放。我使用的位图按比例缩小到大于屏幕尺寸的最小尺寸。

该应用程序适用于我测试过的所有设备（大约 10 种不同的设备，从 2.2~2.3.6 不等，具有不同的屏幕尺寸），但 Galaxy Nexus 除外。

在 Galaxy Nexus 上，当位图大于屏幕尺寸并且我尝试移动它时，位图会留下痕迹并且不会画出它应该画的东西。我进行了各种测试，发现：

- 它与绘制位图的位置无关。

-总是有问题的总是右侧或底部

- 如果我在绘制视图之前旋转位图并使其适合屏幕，它工作正常。

- 即使关闭硬件加速也会发生。

所以到目前为止我最好的猜测是位图没有正确加载到内存中（只有屏幕大小内的位图才能正确加载）。这似乎是 android 4.0 的问题，但不确定因为我只有 1 台具有 android 4.0 的设备。如果有人知道如何解决这个问题，或者知道问题是什么，那将是很大的帮助。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:00:55.523

我解决了这个问题！这是视图的大小...我猜从 android 4.0 开始，您必须确保视图大于您希望在其上绘制的位图。

# android - 应用程序强制关闭手机但在模拟器中运行良好

> ID：10527332
> 
> 赞同：0
> 
> 时间：2012-05-10T04:00:14.693
> 
> 标签：android, togglebutton, onclicklistener

我的 android 应用程序在模拟器中运行良好，但是当我在手机中安装该应用程序并使用它时。单击切换按钮时，它在第二个活动中崩溃。代码如下。dob 是一个切换按钮，而 start 是我移动到下一个活动的按钮。

```
dob.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        Toast.makeText(getApplicationContext(), "Toggle clicked", Toast.LENGTH_SHORT);
        if (dob.isChecked()) {
            dob_player=1;
            name2.setVisibility(0);
            name3.setVisibility(1);
        } else {
            name2.setVisibility(1);
            name3.setVisibility(0);
            dob_player=0;
        }

    }
});

   start_game.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        if(dob_player==1){

             username1=name1.getText().toString();
             username2=name3.getText().toString();
             if(username1.equals("") || username2.equals("")){
                    Toast.makeText(start.this, "Enter the name of the Players", Toast.LENGTH_SHORT);
                    AlertDialog.Builder alertbox = new AlertDialog.Builder(start.this);
                    alertbox.setMessage("Enter the name of the Players");
                    alertbox.setNeutralButton("Ok",
                            new DialogInterface.OnClickListener() {

                                // Click listener on the neutral button of alert box
                                public void onClick(DialogInterface arg0, int arg1) {
                                       // mp1.stop();
                                        //mp1.release();

                }
                    });
                    alertbox.show();
          }
             else{
             Bundle bundle=new Bundle();
             bundle.putInt("qualifying",right); 
                Intent start=new Intent(start.this,game_double.class);
                start.putExtras(bundle);
                startActivityForResult(start, 0);
             }
        }
        else{
            username1=name1.getText().toString();
            Bundle bundle=new Bundle();
            bundle.putInt("qualifying",right);
            Intent start=new Intent(start.this,game.class);
            start.putExtras(bundle);
            startActivityForResult(start, 0);
        }

    }
}); 
```

我的logcat如下。

1.按下切换按钮时出现

```
05-10 10:52:49.453: E/ERROR(17394): ERROR
05-10 10:52:49.453: E/ERROR(17394): java.lang.NullPointerException
05-10 10:52:49.453: E/ERROR(17394):     at com.ktrivia.in.start$5.onClick(start.java:129)
05-10 10:52:49.453: E/ERROR(17394):     at android.view.View.performClick(View.java:2485)
05-10 10:52:49.453: E/ERROR(17394):     at android.widget.CompoundButton.performClick(CompoundButton.java:99)
05-10 10:52:49.453: E/ERROR(17394):     at android.view.View$PerformClick.run(View.java:9080)
05-10 10:52:49.453: E/ERROR(17394):     at android.os.Handler.handleCallback(Handler.java:587)
05-10 10:52:49.453: E/ERROR(17394):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-10 10:52:49.453: E/ERROR(17394):     at android.os.Looper.loop(Looper.java:130)
05-10 10:52:49.453: E/ERROR(17394):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-10 10:52:49.453: E/ERROR(17394):     at java.lang.reflect.Method.invokeNative(Native Method)
05-10 10:52:49.453: E/ERROR(17394):     at java.lang.reflect.Method.invoke(Method.java:507)
05-10 10:52:49.453: E/ERROR(17394):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-10 10:52:49.453: E/ERROR(17394):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-10 10:52:49.453: E/ERROR(17394):     at dalvik.system.NativeStart.main(Native Method) 
```

2.点击开始按钮时出现

```
05-10 10:54:24.710: D/AndroidRuntime(17394): Shutting down VM
05-10 10:54:24.710: W/dalvikvm(17394): threadid=1: thread exiting with uncaught exception (group=0x40018578)
05-10 10:54:24.710: E/AndroidRuntime(17394): FATAL EXCEPTION: main
05-10 10:54:24.710: E/AndroidRuntime(17394): java.lang.NullPointerException
05-10 10:54:24.710: E/AndroidRuntime(17394):    at com.ktrivia.in.start$6.onClick(start.java:150)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at android.view.View.performClick(View.java:2485)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at android.view.View$PerformClick.run(View.java:9080)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at android.os.Handler.handleCallback(Handler.java:587)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at android.os.Looper.loop(Looper.java:130)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at java.lang.reflect.Method.invokeNative(Native Method)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at java.lang.reflect.Method.invoke(Method.java:507)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-10 10:54:24.710: E/AndroidRuntime(17394):    at dalvik.system.NativeStart.main(Native Method) 
```

单击这两个按钮时应用程序崩溃。这对我来说是个新问题。如果有人对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:09:56.840

尝试使用这个

```
Intent intent=new Intent(CurrentActivity.this,NextActivity.class); 
```

用 CurrentActivity.this 替换 start.this

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:35:51.723

也许您使用的活动和意图名称相同，所以可能会导致问题。所以试试这个：

```
AlertDialog alert  =alertbox .create(); 
alert.show();
 else{
             Intent intent=new Intent(start.this,game_double.class);
             Bundle bundle=new Bundle();
             bundle.putInt("qualifying",right); 
             intent.putExtras(bundle);
             startActivityForResult(intent, 0);
             }
        }
        else{
            username1=name1.getText().toString();
            Intent intent=new Intent(start.this,game.class);
            Bundle bundle=new Bundle();
            bundle.putInt("qualifying",right);
            intent.putExtras(bundle);
            startActivityForResult(intent, 0);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:41:12.567

尝试

```
 Intent start = new Intent(getApplicationContext(),game_double.class) 
```

代替

```
 Intent start = new Intent(start.this,game.class); 
```

# ios - 使用自定义格式将浮点数转换为 NSString？("xx:yy")

> ID：10527339
> 
> 赞同：0
> 
> 时间：2012-05-10T04:01:08.543
> 
> 标签：ios, string, floating-point

我正在从我正在使用的 Web 服务返回一个 JSON 字符串，其中一项是浮点数，其格式如下：“1.2”。但我实际上想让它显示为一个时间数字，就像这样：“01:20”。

这样做最简单的方法是什么？

我想过将浮点数转换为字符串，然后将其分成两部分

```
timeValue = [NSString stringWithFormat:@"%.2f", timeValue];
NSArray *tmpArr = [timeValue componentsSeparatedByString:@"."];
NSString *tmpFirst = (NSString *)[tmpArr objectAtIndex:0];
NSString *tmpSecond = (NSString *)[tmpArr objectAtIndex:0]; 
```

但不知何故，当我转换它时，它返回一个负数

> NSLog(@"timeValue: %@", timeValue);
> 
> 时间值：-1.99

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:09:44.693

我认为问题出在这一行。

```
timeValue = [NSString stringWithFormat:@"%.2f", timeValue]; 
```

我认为 timeValue 是类型`NSString`，如果不是，那么你为什么要使用相同的变量两次。
它应该像

```
timeValueString = [NSString stringWithFormat:@"%.2f", timeValueFloat]; 
```

# asp.net-mvc - 在 Asp.Net MVC 中自定义 [成功] 消息

> ID：10527341
> 
> 赞同：0
> 
> 时间：2012-05-10T04:01:15.157
> 
> 标签：asp.net-mvc

我发现了很多关于在 asp.net mvc 中自定义错误消息的文章。

我想知道的是如何显示成功消息。

例如，当我输入一个有效的电子邮件地址时，我会通过更改输入数据的控件的样式或提供成功的验证消息来显示输入的数据已通过验证。

到目前为止，我看到的所有 asp.net mvc 示例都解释了如何在验证失败后显示或自定义错误消息。

我想知道验证成功时如何显示成功消息。

有谁知道如何做到这一点或知道可以告诉我如何做的链接/资源？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:29:39.963

您可以覆盖 asp.net mvc3 中不显眼的客户端验证设置。

[您可以在此处](http://weblogs.asp.net/imranbaloch/archive/2011/07/13/overriding-unobtrusive-client-side-validation-settings-in-asp-net-mvc-3.aspx)查看如何执行此操作

网址中最重要的代码是：

```
 $(function() {
        var settngs = $.data($('form')[0], 'validator').settings;
        var oldErrorFunction = settngs.errorPlacement;
        var oldSucessFunction = settngs.success;
        settngs.errorPlacement = function (error, inputElement) {
            //Do something here
            oldErrorFunction(error, inputElement);
        }
        settngs.success = function (error) {
            //Do something here
            oldSucessFunction(error);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:30:32.917

显示成功信息是个好主意。您可以通过在视图的按钮单击您提交数据的位置应用 jquery 来显示成功消息。

# c# - C# 展开平面列表 到字典 >

> ID：10527342
> 
> 赞同：6
> 
> 时间：2012-05-10T04:01:17.780
> 
> 标签：c#, linq, dictionary

我有一个`List<MyClass>`：

```
public int MyClass
{
   public int One { get; set; }
   public int Two { get; set; }
} 
```

现在，数据可以（并且确实）如下所示：

> 一：1，二：9
> 
> 一：2，二：9
> 
> 一：1，二：8
> 
> 一：3，二：7

看看“一”是如何出现两次的？我想将这个平面序列投影到一个分组中`Dictionary<int,ICollection<int>>`：

> KeyValuePairOne：{键：1，值：{9、8}}
> 
> KeyValuePairTwo：{键：2，值：{9}}
> 
> KeyValuePairThree：{键：3，值：{7}}

我猜我需要结合`.GroupBy`和`.ToDictionary`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T04:04:33.817

这就是[ToLookup](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)扩展方法的用途。如果键出现两次，ToDictionary 将在哪里抛出，而 ToLookup 则可以使用它并执行您要查找的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:05:50.493

```
var list = new List<MyClass>();

var dictionary = list.GroupBy(x => x.One)
                     .ToDictionary(x => x.Key, x => x.ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:08:59.523

这正是你的做法：

```
Dictionary<int, List<MyClass>> result =
    items.GroupBy(x => x.One).ToDictionary(x => x.Key, x => x.ToList()); 
```

# c# - 如何将字节数组分配或传递给 MWArray？

> ID：10527344
> 
> 赞同：1
> 
> 时间：2012-05-10T04:01:34.080
> 
> 标签：c#, .net, matlab, .net-4.0, matlab-deployment

我正在尝试将字节的 MWArray 传递给函数。字节数组从 mp3 文件中获取数据。

现在我想将字节数组分配给 MWArray。

我的代码是这样的

```
string lSongFilePath = ConfigurationManager.AppSettings["SongFilePath"].ToString();
lSongFilePath += "\\" + "Grand Piano - Fazioli - major A.wav";

FileStream fs = File.OpenRead(lSongFilePath);
try
{

     byte[] bytes = new byte[fs.Length];
     var read =  (fs.Read(bytes, 0, Convert.ToInt32(fs.Length)));

     MWArray[] in_Arr = new MWArray[(int)read];
     MWArray[] out_Arr = null;// = new MWArray[15];

     ChordRecognizer hj = new ChordRecognizer();
     hj.estimateTuning(4,ref out_Arr, in_Arr);
     fs.Close();

}
catch(Exception ex)
{
string s = ex.Message;
} 
```

这一行只提到了数组的大小，而我也想将数据分配给数组。请帮忙

```
MWArray[] in_Arr = new MWArray[(int)read]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:53:17.980

不是必需的，但是 FWIW，当组合目录路径和文件名以获得完整的文件路径时，您应该使用[Path.Combine](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)

由于要将整个文件读入字节数组，因此可以使用[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)

我很难找到一个记录 MWArray 在 C# 代码中的样子的地方——特别是从字节数组创建它。如果您有一个指向如何为单字节值构造它的指针，我们可以从那里弄清楚。

# ruby-on-rails - 在 RSpec / Rails 中存根类方法时遇到问题（并在存根上使用动态返回）

> ID：10527348
> 
> 赞同：2
> 
> 时间：2012-05-10T04:02:17.330
> 
> 标签：ruby-on-rails, testing, rspec, mocking, stubbing

晚上好，

我试图在我的“模拟”类中测试一个相当长的方法，它调用类方法“is_male_alive？” 和“is_female_alive？” 在我的“年龄”课上几百次。这些类方法的返回值基于统计信息，我想将它们存根以返回特定值，以便我的测试每次运行都相同。

年龄.rb：

```
...

def is_male_alive?(age)
  return false if age > 119
  if (age < 0 || age == nil || age == "")
    return false
  end    
  death_prob = grab_probability_male(age)
  rand_value = rand
  rand_value > death_prob
end

... 
```

（女性版基本相同，只是一些不同的常数）

在我的“模拟”课程中，我执行以下操作：

```
def single_simulation_run

  ...
  male_alive = Age.is_male_alive?(male_age_array[0])
  female_alive = Age.is_female_alive?(female_age_array[0])
  ...
end 
```

在模拟的每次迭代中 - 本质上它只是传递一个年龄（例如 is_male_alive?(56) ）并返回真或假。

我想删除这两种方法，以便：

1.  is_male_alive 吗？对于小于 75 的任何参数返回 true，否则返回 false
2.  is_female_alive？对于小于 80 的任何参数返回 true，否则返回 false

我尝试了以下方法，看看我是否有能力将它存根 (simulation_spec.rb)：

```
Age.should_receive(:is_male_alive?).exactly(89).times
results = @sim.send("generate_asset_performance") 
```

但我收到以下错误：

```
 Failure/Error: Age.should_receive(:is_male_alive?).exactly(89).times
   (<Age(id: integer, age: integer, male_prob: decimal, female_prob: decimal) (class)>).is_male_alive?(any args)
       expected: 89 times
       received: 0 times 
```

我也不知道如何设置它，以便根据参数动态生成存根返回值。有没有办法用proc来做到这一点？

有没有办法模拟整个 Age 类（而不是仅仅模拟 Age 类的单个实例？）

谢谢你的帮助！！

**更新 1**

看起来这个方法被调用存在问题......这真的很令人困惑。为了真正查看它是否被调用，我在方法中抛出了“raise ArgumentError”。

开发环境（控制台）：

```
1.9.3p125 :003 > sim = Simulation.last
1.9.3p125 :004 > sim.generate_results
  --->  ArgumentError: ArgumentError 
```

所以它显然是在开发环境中调用这个方法，因为它抛出了参数错误。

在我的测试中再次运行它，它仍然说该方法没有被调用......我在下面使用你的代码：

```
Age.should_receive(:is_male_alive?).with(an_instance_of(Fixnum)).at_least(:once) { |age| age < 75 } 
```

我也试过这个

```
Age.should_receive(:is_male_alive?).with(an_instance_of(Fixnum)).at_least(:once) { raise ArgumentError } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T04:09:02.710

您可以使用块。请参阅 rspec 的消息期望文档中的任意处理：[http ://rubydoc.info/gems/rspec-mocks/frames](http://rubydoc.info/gems/rspec-mocks/frames)

```
Age.should_receive(:is_male_alive?).with(an_instance_of(Fixnum)).at_least(:once) { |age| age < 75 }
Age.should_receive(:is_female_alive?).with(an_instance_of(Fixnum)).at_least(:once) { |age| age < 80 } 
```

# python - Celery 忽略参数“queue”并将消息发送到所有队列

> ID：10527357
> 
> 赞同：2
> 
> 时间：2012-05-10T04:04:14.223
> 
> 标签：python, celery

我使用 celery 和 redis 作为代理。

我构建了一个添加任务并运行两个工作人员听不同的队列进行测试。

```
celeryd -I tasks -l info -Q tasks
celeryd -I tasks -l info -Q count 
```

这是tasks.py

```
from celery.task import task

@task(exchange="tasks")
def add(x, y):
    result = x + y
    return "I am queue 2.", result 
```

但是，无论我是否分配了队列，两个队列都运行任务。

如果我有什么误解，请告诉我。非常感谢。

以下是celeryconfig.py

```
BROKER_URL = "redis://localhost:6379/0"

# Redis Backend
CELERY_RESULT_BACKEND = "redis"
CELERY_REDIS_HOST = "localhost"
CELERY_REDIS_PORT = 6379
CELERY_REDIS_DB = 0
CELERY_SEND_EVENTS = True
CELERY_RESULT_BACKEND = "amqp"
CELERY_RESULT_ENGINE_OPTIONS = {"echo": True}

# CELERY_DEFAULT_QUEUE = "default"
CELERY_DEFAULT_EXCHANGE = "default"
CELERY_QUEUES = {
    "default": {
        "exchange": "default"
    },
    "tasks": {
        "exchange": "tasks"
    },
    "count": {
        "exchange": "tasks"
    }
} 
```

# c# - ISupportIncrementalLoading 只触发一次

> ID：10527358
> 
> 赞同：5
> 
> 时间：2012-05-10T04:04:27.247
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, ui-virtualization

我正在尝试为虚拟化列表创建一个 Win8 Metro 参考应用程序。在做一些（非常稀疏的）阅读时，我发现支持这一点的推荐方法是通过`ISupportIncrementalLoading`界面。

我的参考应用程序出现问题，该`LoadMoreItemsAsync`方法被调用一次，但不再被调用，即使我的`HasmoreItems`属性被硬编码为返回 True。

下面的代码应该做的是加载 40 个项目，然后一次加载“x”个数字。发生的情况是它加载了前 40 个项目，然后被提示再加载 42 个，然后不再被要求再次加载。

这是我的代码的相关部分：

XAML

```
<Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
    <ListView ItemsSource="{Binding Items}" Width="800" HorizontalAlignment="Left" Margin="12">
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Title}" Foreground="White"/>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>

</Grid> 
```

ViewModel 和支持类：

```
public class MainViewModel : ViewModelBase
{

    public MyIncrementalCollection Items { get; set; }

    public MainViewModel()
    {

        Items = new MyIncrementalCollection();

        for (int i = 0; i < 40; i++)
        {
            Items.Add(new MyData {Title = string.Format("Item: {0}", i)});
        }
    }
}

public class MyData
{
    public string Title { get; set; }
}

public class MyIncrementalCollection : ObservableCollection<MyData>, ISupportIncrementalLoading
{
    public bool HasMoreItems
    {
        get
        {
            return true;
        }
    }

    public IAsyncOperation<LoadMoreItemsResult> LoadMoreItemsAsync(uint count)
    {
        return
            (IAsyncOperation<LoadMoreItemsResult>)
            AsyncInfo.Run((System.Threading.CancellationToken ct) => LoadDataAsync(count));
    }

    private async Task<LoadMoreItemsResult> LoadDataAsync(uint count)
    {

        for (int i = 0; i < count; i++)
        {
            this.Add(new MyData { Title = string.Format("Item: {0}, {1}", i, System.DateTime.Now) });
        }

        var ret = new LoadMoreItemsResult {Count = count};

        return ret;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:01:36.397

问题是您的方法*LoadDataAsync(uint count)*缺少 await 运算符，因此它将同步运行。我有一个类似的问题。当我收到一些库文件夹时，数据虚拟化对我有用，但是当我尝试加载自定义项目的集合时它只被触发一次。

我使用了一种解决方法，虽然不是很优雅，但它确实有效。像这样修改您的*LoadDataAsync*方法：

```
private async Task<LoadMoreItemsResult> LoadDataAsync(uint count)
{
  Task task = Task.Delay( 1 );
  await task;

  for (int i = 0; i < count; i++)
  {
    Add(new MyData { Title = string.Format("Item: {0}, {1}", i, System.DateTime.Now) });
  }

  return new LoadMoreItemsResult {Count = count};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:57:34.207

UI 只会在需要时调用 HasMoreItems。如果它有足够的项目来填充当前可视区域，那么它不会检查更多项目。如果您开始滚动到列表的末尾，那么它将检查是否有更多项目（以及是否有调用 LoadMoreItemsAsync）。

顺便说一句，您可以将 LoadMoreItemsAsync 中的代码简化为

```
public IAsyncOperation<LoadMoreItemsResult> LoadMoreItemsAsync(uint count)
{
    return LoadDataAsync(count).AsAsyncOperation();
} 
```

# c# - 如何操作由 DataGrid 创建/编辑/删除的对象

> ID：10527359
> 
> 赞同：0
> 
> 时间：2012-05-10T04:04:33.063
> 
> 标签：c#, wpf, wpfdatagrid

我有 3 节课：

```
public class Category  
{
    public string Name {get;set;}
    public Category Parent {get;set;}
    public List<Category> Children {get;set;}
    public bool IsMainCategory {get;set;}
}

public class Item
{
    public string Description {get;set;}
    public Category MainCategory {get;set;}
    public List<CategoryValue> Values {get;set;}
}

public class CategoryValue
{
    public Category Category {get;set;}
    public Item Item {get;set;}
    public double Value {get;set;}
} 
```

我想以`DataGrid`这样的方式创建一个，

1.  它的列标题将是具有真值的主类别的所有子类别的名称，`IsMainCategory`但第一列将具有“项目描述”作为标题。
2.  它的行将对应于`Item`对象，并且这些`Item`s 中的每一个都应将其`MainCategory`设置为上述主要类别。
3.  行中的每个单元格（第一个单元格除外）都应与`Value`相应`CategoryValue`对象的属性绑定。

我写了代码来做1，但是我不知道如何实现另外两个需求。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:12:15.137

一种简单的技术是将 POCO 中的数据转换为数据表，然后将其绑定到 DataGrid。

DataTable 仅用于显示目的。您的所有逻辑都适用于 POCO

# ruby-on-rails - Rails DB Schema：新的、独特的模型还是只是一个属性？

> ID：10527367
> 
> 赞同：1
> 
> 时间：2012-05-10T04:05:59.553
> 
> 标签：ruby-on-rails, database-design, activerecord, associations

我正在开发一个 Occasion Reminder rails 应用程序，用户可以在其中注册，然后设置应用程序将来通过电子邮件提醒他们的某些未来日期和假期/场合……此外，他们可以选择兴趣，电子邮件将包含相关交易在那些日期选定的兴趣..

无论如何，我的问题很简单，因为我正在为应用程序设置初始模型，并且想知道日期/假期和兴趣是否应该是用户模型/表格的属性或他们自己的独特模型（设置一个 has_many ：用户模型中的兴趣关联等..）

非常欢迎任何想法或建议！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:10:02.613

我会倾向于单独的模型，特别是为了利益。这使您可以轻松地查询他们，并将结果分组以显示数据的各种视图（例如，查找具有相似兴趣的用户，或者可能在特定日期参加相同活动的用户）。从数据库规范化的角度来看，单独的模型也是“正确”的答案。

这对于您根据用户兴趣提供交易的计划特别有用。

# ruby-on-rails - Rails 控制台和 Pow 中的环境变量

> ID：10527372
> 
> 赞同：6
> 
> 时间：2012-05-10T04:06:54.843
> 
> 标签：ruby-on-rails, rack-pow

我无法在 Rails 控制台中访问 env 变量，而在它们工作的应用程序中。

在`.powenv`我有`export SENDGRID_PASSWORD="123"`

里面有`config/initializers/mail.rb`：

```
ActionMailer::Base.smtp_settings = {
  :password => ENV['SENDGRID_PASSWORD']
} 
```

因此，当我输入控制台时`UserMailer.welcome_mail.deliver`，会出现错误“ArgumentError: SMTP-AUTH requested but missing secret phrase”。但是，它从应用程序成功发送邮件。

如何使 env 变量在控制台中可用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T16:03:00.917

尝试

```
. .powenv 
```

然后

```
rails c 
```

（点是在当前环境中运行脚本的命令）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T15:00:58.357

您的 Rails 控制台无法访问环境变量，因为 Pow 将信息**从 or 文件传递​​到****Rails**`.powenv` ... `.powrc`Rails不会自行读取这些文件。

 **换句话说，您在文件中设置了`ENV['SENDGRID_PASSWORD']`变量`.powenv`，但是当您启动 Rails 控制台时，并没有触及该文件。

您需要`before_filter`在应用程序控制器中设置一个`ENV['SENDGRID_PASSWORD']`（或想出另一种类似的方式从Rails 应用程序中读取`.powenv`文件）。`before_filter`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-22T06:19:47.487

对于后代，您可以根据您想要的加载顺序将类似的内容添加到您的 environment.rb、development.rb 或初始化程序 (config/initializers/pow.rb)：

```
# 将 pow 环境变量加载到开发和测试环境中
如果 File.exist?(".powenv")
  IO.foreach('.powenv') 做 |line|
    下一个 if !line.include?('export') || 行空白？
    key, value = line.gsub('export','').split('=',2)
    ENV[key.strip] = value.delete('"\'').strip
  结尾
结尾

```**

# javascript - 我怎样才能达到这个效果？

> ID：10527373
> 
> 赞同：3
> 
> 时间：2012-05-10T04:07:00.803
> 
> 标签：javascript, jquery, html

[http://www.colorz.fr/#!/en/work/](http://www.colorz.fr/#!/en/work/)

我喜欢他们通过单击缩略图来显示/隐藏内容的方式，我只是不知道它是如何完成的。使用javascript onclick 带走的“隐藏”类实际上并不可行，因为页面仍会加载内容，并且如果您有许多不同的div 来显示/隐藏它会削弱页面加载时间。

我确信有一种简单的方法可以实现这种效果，我只是想不出如何以“干净”的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:17:48.863

如果你有兴趣，很容易看到他们是如何做事的。这是网络的好处之一。他们的大部分代码都在：

[http://www.colorz.fr/wp-content/themes/colorz/clrz_minify_cache/perfjs.js?ver=383f594a00f097065ec9c1ba0fa1fcdb](http://www.colorz.fr/wp-content/themes/colorz/clrz_minify_cache/perfjs.js?ver=383f594a00f097065ec9c1ba0fa1fcdb)

向下滚动经过优化的 MooTools 库，它就在那里。

# ruby-on-rails - 已审计的 audited_changes 混淆

> ID：10527374
> 
> 赞同：1
> 
> 时间：2012-05-10T04:07:06.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, acts-as-audited

我使用collectiveea 的审计解决方案在rails 中进行审计。所以，有一个列 (audited_changes) 是数据库中的 TEXT 定义。当我从数据库中检索审计时，我得到一个纯字符串，当我在视图中调用该属性时，它是非格式化字符串。在[rdocs](http://rdoc.info/github/collectiveidea/audited/Audited/Adapters/ActiveRecord/Audit)中，它说存在所有更改的序列化哈希。我怎样才能得到这个哈希？此外，在同一个文档中，它说可以访问 old_attributes 和 new_attributes，这是怎么回事？

在我看来：

```
<%= @audit.action %> # => update
<%= @audit.audited_changes %> # => --- name: - oldname - newname code: - oldcode - newcode 
```

或者有没有机会格式化这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T02:21:47.303

我认为目前审核中可能存在错误。您使用的是 3.0.0rc1 吗？这就是我正在使用的，我也发生了类似的事情。首先，它似乎没有将“Audit”识别为 ActiveRecord 对象，因此我在 app/models/audit.rb 中创建了一个空模型。一旦我这样做了，我就会看到你所看到的行为。为了修复它，我删除了 app/models/audit.rb 并在其中添加了一个 config/initializers/audited.rb ：

```
include Audited::Adapters::ActiveRecord 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T17:17:20.550

这是一个老问题，但我有一个替代答案，使用 Rails 4.2 似乎对我来说效果很好。我建议保留模型并将“serialize :audited_changes”添加到顶部，而不是在上述答案中使用初始化程序。

```
 class Audit < ActiveRecord::Base
   belongs_to :user
   serialize :audited_changes
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-09T16:36:21.887

您可以使用内置的 Audited::Audit 模型来查询其数据。

例如，

```
audit = Audited::Audit.last
audit.audited_changes # => {"name"=>["Steve", "Ryan"]} 
```

“Steve”是旧值，“Ryan”是新值。默认情况下，哈希以 yaml 格式存储在数据库中。

# ios - 如何使用 UINib 实例化和使用自定义 UITableViewCells

> ID：10527377
> 
> 赞同：16
> 
> 时间：2012-05-10T04:07:20.353
> 
> 标签：ios, iphone, uitableview, cocoa-touch, uikit

我将如何使用 UINibs 实例化和使用 UITableViewCell 作为 iOS5.0 中的 tableview。我知道 iOS5.0 中有一个 registerNib:forCellReuseIdentifier: 也需要使用，但不知道如何使用

提前感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-10T12:24:41.293

1.  使用 UITableViewCell 作为顶级对象创建您的 xib 文件。这称为 Cell.xib
2.  根据这个文件创建一个 UINib 对象
3.  将 UINib 注册到表视图（通常在表视图控制器子类的 viewDidLoad 中）。

步骤 2 和 3 可以组合使用，因此您可以在 viewDidLoad 中使用以下行：

```
[self.tableView registerNib:[UINib nibWithNibName:@"Cell" bundle:nil] forCellReuseIdentifier:@"Cell"]; 
```

然后，在 cellForRowAtIndexPath 中，如果您想要 nib 中的一个单元格，则将其出列：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"]; 
```

这要么从 nib 创建一个新实例，要么使现有单元出队。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:40:14.257

@jrturtons 的答案是正确的，但不幸的是，iOS 5（在 iOS 6 中已修复）与 VoiceOver 一起存在一个错误：[rdar://11549999](http://openradar.appspot.com/11549999)。以下类别`UITableView`解决了该问题。只需使用`-fixedDequeueReusableCellWithIdentifier:`而不是正常的`dequeueReusableCellWithIdentifier:`. 当然，NIB 必须使用

```
[self.tableView registerNib:[UINib nibWithNibName:@"Cell" bundle:nil] forCellReuseIdentifier:@"Cell"]; 
```

之前（在`-viewDidLoad`）。

**UITableView+Workaround.m：**

```
@implementation UITableView (Workaround)
- (id)fixedDequeueReusableCellWithIdentifier:(NSString *)identifier {
    id cell = [self dequeueReusableCellWithIdentifier:identifier];
    if (!cell) {
        // fix for rdar://11549999 (registerNib… fails on iOS 5 if VoiceOver is enabled)
        cell = [[[NSBundle mainBundle] loadNibNamed:identifier owner:self options:nil] objectAtIndex:0];
    }
    return cell;
}
@end 
```

# javascript - 如果`beforeEach`中的代码是异步的，如何在Jasmine中测试方法？

> ID：10527394
> 
> 赞同：20
> 
> 时间：2012-05-10T04:10:52.237
> 
> 标签：javascript, unit-testing, asynchronous, jasmine

我正在尝试用 Jasmine 编写一些测试，但是如果`beforeEach`.

示例代码如下所示：

```
describe("Jasmine", function() {

    var data ;

    beforeEach(function(){
        console.log('Before each');
        getSomeDataFromRemote(function(res){
            data = res;
        });
    });

    it("test1", function() {
        expect(data).toBe(something);
        console.log('Test finished');
    });

}); 
```

您可以看到，在 中`beforeEach`，我想从远程获取一些数据，并将其分配给`data`异步。

但是在 中`test1`，当我尝试验证时：

```
 expect(data).toBe(something); 
```

数据是`undefined`，因为`getSomeDataFromRemote`还没有完成。

如何解决？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-10T06:20:59.550

就像 an 中的异步内容一样，`it`您可以在 beforeEach中使用`runs`and ：`waitsFor`

```
define( 'Jasmine' , function () {
    var data ;

    beforeEach(function(){
        runs( function () {
            getSomeDataFromRemote(function(res){
                data = res;
            });
        });

        waitsFor(function () { return !!data; } , 'Timed out', 1000);
    });

    it("test1", function() {
        runs( function () {
              expect(data).toBe(something);
        });
    });
}); 
```

虽然我会假设这是因为这是测试代码，但我认为您可能应该`getSomeDataFromRemote`在您的内部进行调用，`it`因为这实际上是您正在测试的内容；）

您可以在我为异步 API 编写的一些测试中看到一些更大的示例：[https ://github.com/aaronpowell/db.js/blob/f8a1c331a20e14e286e3f21ff8cea8c2e3e57be6/tests/public/specs/open-db.js](https://github.com/aaronpowell/db.js/blob/f8a1c331a20e14e286e3f21ff8cea8c2e3e57be6/tests/public/specs/open-db.js)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-08T22:11:27.017

**[茉莉花2.0](http://jasmine.github.io/2.0/introduction.html)**

要小心，因为在新的 Jasmine 2.0 中这将发生变化，它将是*摩卡*风格。您必须在和中使用`done()`函数。例如，假设您想在 LAMP 服务器中使用 jQuery 测试页面是否存在且不为空。首先，您需要将 jQuery 添加到文件中，并在您的文件中：`beforeEach()``it()``$.get``SpecRunner.html``spec.js`

```
describe('The "index.php" should', function() {
    var pageStatus;
    var contents;

    beforeEach(function (done) {
        $.get('views/index.php', function (data, status) {
            contents = data;
            pageStatus = status;
            done();
        }).fail(function (object, status) {
            pageStatus = status;
            done();
        });
    });

    it('exist', function(done) {
        expect(status).toBe('success');
        done();
    });

    it('have content', function(done) {
        expect(contents).not.toBe('');
        expect(contents).not.toBe(undefined);
        done();
    });
}); 
```

如您所见，您将函数`done()`作为`beforeEach()`and的参数传递`it()`。当你运行测试时，直到在函数中被调用`it()`才会启动，所以在你得到服务器的响应之前你不会启动期望。`done()``beforeEach()`

**页面存在**

如果页面存在，我们会从服务器的响应中捕获状态和数据，然后调用`done()`. 然后我们检查状态是否为“成功”以及数据是否为空或未定义。

**页面不存在**

如果页面不存在，我们从服务器的响应中捕获状态，然后调用`done()`. 然后我们检查状态是否不是“成功”以及数据是否为空或未定义（那一定是因为文件不存在）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T05:04:06.923

在这种情况下，我通常会存根异步调用以立即响应。

我不确定你是否看过，但[这里](https://github.com/pivotal/jasmine/wiki/Asynchronous-specs)有一些关于 Jasmine 异步测试的文档。

# mysql - 在 mysql ORDER BY 子句中用 0 填充字符串中间以尊重“真实”数字顺序

> ID：10527396
> 
> 赞同：0
> 
> 时间：2012-05-10T04:11:04.407
> 
> 标签：mysql, sql, natural-sort

在我的管理界面中，我有一个子域列表，它们遵循以下逻辑：

```
node-k1
node-k2
node-k3
node-k4
node-k5
node-k6
node-k7
node-k8
node-k9
node-k10
node-k11 
```

这些存储在mysql中。我需要按数字顺序列出它们，但是由于我在 之后缺少前导 0 `node-k`，因此它对它们进行排序：

```
node-k1
node-k10
node-k11
node-k2
node-k3
etc 
```

有节点有不同的字母，所以`node-j_`会出现在前面`node-k_`。`ORDER BY node ASC`显然可以很好地处理字母，但是数字是一个烦人的问题。

有没有办法让 ORDER BY 子句把它们按正确的顺序排列？这是一个仅限管理员的功能，因此性能并不是真正的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:20:52.387

如果数字总是从字符 7 开始，那么您可以将其转换为整数，如下所示：

```
SELECT *
FROM tbl
ORDER BY SUBSTR(subdomain, 1, 6), CAST(SUBSTR(subdomain, 7) AS UNSIGNED) 
```

这首先按前缀排序，然后按数字排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:46:46.527

在记录节点的表中，必须有一个数字字段（唯一），它基本上是指节点的顺序。

ID NodeName
1 Node-k1
2 Node-k2
3 Node-k3
4 Node-k10
5 Node-k11

从 table1 中按 ID 顺序选择 Nodename。

瑞安

# data-visualization - Graphite 以外的 statsd 数据的 GUI？

> ID：10527401
> 
> 赞同：91
> 
> 时间：2012-05-10T04:12:45.340
> 
> 标签：data-visualization, metrics, graphite

我刚刚安装了石墨/statsd 以供生产使用。我对此非常满意，但我的一位同事问我是否有办法让它看起来更漂亮。老实说，我不能说我不奇怪。

是否有替代 Graphite UI 可以更好地渲染数据的方法，也许是使用一个很棒的前端图形库和 http 推送？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2014-01-20T09:11:57.803

试试[Grafana](http://grafana.org "格拉法纳")

它有一个非常漂亮的用户界面和先进的仪表板和图形编辑功能。安装非常简单。

![](../Images/5f1de8c13cfda58aa24aa364a5edbda9.png)

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-04-05T18:24:15.977

在最新的[Graphite 文档页面上](http://graphite.readthedocs.org/en/latest/tools.html)，有一个与 Graphite 一起使用的工具列表。作为参考，这里有一些似乎是基于美化的：

*   [木炭](https://github.com/cebailey59/charcoal)
*   [笛卡尔](https://github.com/obfuscurity/descartes)
*   [达世币](https://github.com/ripienaar/gdash.git)
*   [长颈鹿](http://kenhub.github.com/giraffe/)
*   [石墨](https://github.com/erezmazor/graphitus)
*   [图形浏览器](https://github.com/Dieterbe/graph-explorer)
*   [石墨烯](http://jondot.github.com/graphene/)
*   [石墨](https://github.com/paperlesspost/graphiti)
*   [Graphsky](https://github.com/hyves-org/graphsky)
*   [铅笔](https://github.com/fetep/pencil)
*   [塔西奥](https://github.com/obfuscurity/tasseo)

其他有趣的资源：

*   [Graphitoid](https://market.android.com/details?id=com.tnc.android.graphite)：（一个安卓应用仪表板）
*   [Graphitejs](https://github.com/prestontimmons/graphitejs)：（一个用于制作/显示石墨图的 jQuery 插件）
*   [Seyren](https://github.com/scobal/seyren)：（Graphite 的警报仪表板）

有关每个人的详细信息，请查看他们的页面，或查看我添加的第一个链接上的描述，用于[Graphite 文档页面](http://graphite.readthedocs.org/en/latest/tools.html)。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-08-15T18:38:48.243

如果您不想编写自己的前端，可以使用[Graphiti](https://github.com/paperlesspost/graphiti "石墨")。它使用简单，看起来很棒！

![Graphiti 截图](../Images/51f85a969fdb355b4d7bbd631e0c03ff.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-05-10T05:51:41.353

啊哈！我做了一些谷歌搜索，发现[Cubism.js](http://square.github.com/cubism/)正是我需要的。

它集成[了对石墨](https://github.com/square/cubism/wiki/Graphite)的支持，并提供了必要的图形组件（作为[D3](http://d3js.org/)的插件）来创建[漂亮的实时仪表板](http://square.github.com/cubism/demo/)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-08-12T17:47:37.040

我可以看到这有点旧，但我想我会为未来的繁荣添加它：

我浏览了@troy 的回复中列出的一些选项（以及其他一些选项）。[你可以在我的博文](http://dashboarddude.com/blog/2013/01/23/dashboards-for-graphite/)中看到我的印象

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-25T14:11:29.690

您可以尝试石墨烯，它是石墨之上的一层：http: [//jondot.github.com/graphene/](http://jondot.github.com/graphene/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-07T18:24:39.327

有人试过猎户座吗？似乎是一个不错的选择，但到目前为止被忽视了。 [https://github.com/gree/Orion](https://github.com/gree/Orion)

# asp.net - outptutcache 停止触发我在登录页面上的按钮点击

> ID：10527402
> 
> 赞同：1
> 
> 时间：2012-05-10T04:12:46.123
> 
> 标签：asp.net, asp.net-4.0

我有一个非常简单的登录页面，其中包含 1 个用户名文本框、1 个密码文本框和 1 个登录按钮。

这是一个aspx页面，为了提高性能，我把OutputCache：

```
<%@ OutputCache Duration="300" VaryByParam="none" %> 
```

但是，一旦我这样做了，我的按钮点击只会第一次触发，此后没有按钮点击触发。我认为所有响应都已缓存。如何更改此行为以使我的按钮单击触发，或者我可能不了解 Asp.Net 缓存，它是否应该仅用于其输出不会改变的静态页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:37:32.170

您自己回答了您的问题：不要费心在登录页面上使用 OutputCache，这样您就可以缓存图像、CSS 文件、JavaScript 文件等资源。执行此操作的正确方法是指示 IIS 缓存这些类型的文件通过设置适当的标题。

见这里： [https ://stackoverflow.com/a/7542816/345490](https://stackoverflow.com/a/7542816/345490)

# c# - 将 HTML 标记之间的值读入 C# winform 应用程序

> ID：10527405
> 
> 赞同：0
> 
> 时间：2012-05-10T04:13:09.680
> 
> 标签：c#, html, browser

我正在尝试从 twitter 页面读取值。页面源如下所示

```
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
    <title>Twitter / Authorize an application</title>

  ...........

    <div id="bd" role="main">

<p class="action-information">You've granted access to yourapp!</p>

<div id="oauth_pin">
  <p>
    <span id="code-desc">Next, return to yourapp and enter this PIN to complete the authorization process:</span>
    <kbd aria-labelledby="code-desc"><code>58643144</code></kbd>
  </p>
</div>

    </div>

   ..............

  </body>
</html> 
```

我正在尝试将“PIN”的值输入到我的 C# winform 应用程序中。意思是下一行中代码标记之间的值

```
<kbd aria-labelledby="code-desc"><code>58643144</code></kbd> 
```

我已经尝试了下面的代码。但这不起作用，因为 PIN 包含在 div 标签中并且没有 id。请帮助从 html 网页获取 PIN 的值。谢谢

```
string verifier = browser.TextField(Find.ById("code-desc")).Value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:17:53.850

为什么不尝试某种 HTML 解析器并在您的案例代码中的特定标记内传递值

这是可用于 c# 应用程序的良好 html 解析器的链接。

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

```
StringBuilder codew = new StringBuilder();
foreach (HtmlAgilityPack.HtmlTextNode node in
      doc.DocumentNode.SelectNodes("//code/text()"))
{
    codew.Append(node.Text.Trim());
}
string foundcode = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:20:57.133

尝试

```
string verifier = browser.TextField(Find.ById("code-desc")).Text 
```

代替

```
string verifier = browser.TextField(Find.ById("code-desc")).Value 
```

# asp.net - 添加控制器脚手架时出错

> ID：10527410
> 
> 赞同：1
> 
> 时间：2012-05-10T04:14:08.483
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, web-config

尝试使用脚手架添加控制器并收到错误。似乎与我的连接字符串有关。

`"unable to retrieve metadata for DOTNETMEMBER.Song. Failed to set database initializer type of type DOTNET.DataContextInitializer, DOTNETMEMBER' specified in the application configuration. Entries should be in the form of 'key=DatabaseInitializerForType MyNamespace.MydbContextClass, MyAssembly'.` 初始化类必须有无参数构造函数。有关详细信息，请参阅内部异常。

这是我的连接字符串

```
 <connectionStrings>
    <add name="DataContext"
         connectionString="Data Source=|DataDirectory|RTDOTNETMEMBER.sdf"
         providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    <!--Used to initialize the database-->
    <add key="DatabaseInitializerForType DOTNET.DataContext, DOTNETMEMBER" value="DOTNET.DataContextInitializer, DOTNETMEMBER" />
  </appSettings> 
```

是因为 SQL Compact 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:50:45.967

恐怕这不是一个全面的答案，因为我不完全理解其中的原因，但是当我遇到同样的问题时，这个解决方法让我可以继续做事，不再摸不着头脑：

1.  进入 Web.config 并注释掉包含该`DatabaseInitializerForType`键的行（快捷方式：将光标放在该行上，然后按 ctrl-K 和 ctrl-C）。
2.  构建项目 (ctrl-shift-B)
3.  像往常一样添加控制器脚手架。
4.  取消注释 Web.config 中的初始化键（ctrl-K、ctrl-U）。

是的，这有点像在黑暗中随机刺伤的方法，但我会把它留在这里，以防它帮助其他人在谷歌上搜索同样的问题！

# c++ - C ++：来自变量的值作为变量

> ID：10527415
> 
> 赞同：0
> 
> 时间：2012-05-10T04:15:36.460
> 
> 标签：c++

如何从 c++ 中其他变量的值打印变量我只是 c++ 中的新手。

在 php 中，我们可以通过其他变量的值来制作/打印变量。像这样。

```
$example = 'foo';
$foo = 'abc';
echo ${$example}; // the output will 'abc' 
```

我如何在 C++ 中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:18:48.373

你不能。

模仿这个（好吧）的唯一方法是使用[地图](http://www.cplusplus.com/reference/stl/map/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:17:31.937

通过名称获取变量/成员称为反射/自省。

C++中没有反射机制，基本上是做不到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:46:38.103

换个角度看，它只是间接，C++ 广泛使用它。C ++中的一个类似示例可能是......

```
using namespace std;
string foo = "abc";
string* example = &foo;
cout << *example << endl;  // The output will 'abc' 
```

...或使用引用而不是指针...

```
using namespace std;
string foo = "abc";
string& example = foo;
cout << example << endl;  // The output will 'abc' 
```

# silverlight - 在 Silverlight TabControl 标题中显示 DropDown

> ID：10527416
> 
> 赞同：0
> 
> 时间：2012-05-10T04:15:37.617
> 
> 标签：silverlight, tabcontrol

我需要在 Silverlight 选项卡控件的末尾显示下拉列表，这将显示可用选项卡的列表。单击需要选择并聚焦相应的选项卡。

我知道它在 telrik tab contol 中，但我需要在 Silverlight tabcontrol 中实现相同的功能。

附上我在 SilverlightTabControl 中需要的屏幕截图，下面是来自 telrik tabcontrol 的截图 ![需要这样](../Images/ddf4d6c323824182fe03a4fb5a24ebfe.png)

请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:26:48.083

在下拉列表的 selectionChanged 事件中创建一个 switch case 构造，从 selectionBoxItem 中获取值并将相应 tabItems 的 IsSelected 属性设置为“true”。

# c++ - EnumChildWindows 和 lambda

> ID：10527417
> 
> 赞同：5
> 
> 时间：2012-05-10T04:16:06.137
> 
> 标签：c++, winapi, c++11, mingw

当我尝试在 MinGW 4.6.2 上编译以下内容时

```
EnumChildWindows(hwnd, [](HWND, LPARAM) -> BOOL { return TRUE; }, 0); 
```

我明白了

```
error: cannot convert '<lambda(HWND, LPARAM)>'
to 'ENUMWINDOWSPROC {aka int (*)(HWND__*,long int)}'
for argument '2' to 'BOOL EnumChildWindows(HWND, ENUMWINDOWSPROC, LPARAM)' 
```

我是否错误地声明了 lambda，或者这根本不起作用？回调的 MS 定义是

```
BOOL CALLBACK EnumChildProc(
  __in  HWND hwnd,
  __in  LPARAM lParam
); 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633493%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633493%28v=vs.85%29.aspx)

调用约定是否导致问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T04:47:47.540

> BOOL **CALLBACK** EnumChildProc(...)

这就是问题所在，CALLBACK 宏将 __stdcall 属性应用于函数以更改默认设置的调用约定。在大多数程序中是 __cdecl。除了更改全局设置（/Gz 编译选项）之外，您无法控制 lambda 的调用约定。这可能会产生比你关心的更多的副作用，放弃这个 lamda。

顺便说一句，在 64 位代码中不是问题。

# jquery - jQuery 是否将 CSS3 应用于动画？

> ID：10527419
> 
> 赞同：2
> 
> 时间：2012-05-10T04:16:14.213
> 
> 标签：jquery, css

似乎jQuery通过改变元素的边距来做动画，它是否应用了任何CSS3的东西，比如过渡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:12:29.393

不，这很糟糕。这是一个使用 jQuery 比较转换速度的演示： http: [//css3.bradshawenterprises.com/demos/speed.php](http://css3.bradshawenterprises.com/demos/speed.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:33:01.867

答案是不。只需查看[http://code.jquery.com/jquery.js](http://code.jquery.com/jquery.js) -`transition`没有出现在任何地方。

# security - WebSphere - 防止 DoS - 限制每个 IP（客户端）的 Web 容器线程

> ID：10527420
> 
> 赞同：0
> 
> 时间：2012-05-10T04:16:17.990
> 
> 标签：security, websphere

WebSphere 提供了 WebContainer 最大线程大小——这允许它控制同时处理的 Web 请求的数量。

我想知道 WebSphere 是否允许每个传入 IP 地址进行类似的操作。也就是说，WebSphere 是否允许您为每个不同的传入 IP 配置不超过（例如，10 个）WebContainer 线程。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:07:13.200

无法限制每个客户端的线程数（基于 IP 或其他特征）。

DoS 由上游的其他系统更好地处理。

# sql - 选择匹配的列

> ID：10527421
> 
> 赞同：1
> 
> 时间：2012-05-10T04:16:20.330
> 
> 标签：sql, select, union, left-join, where

新手问题。我想做类似的事情：

```
SELECT c1,c2,c3 FROM TABLE t1
UNION
SELECT c1,c2,c3 FROM TABLE t2 WHERE t1.c1 IS NOT NULL AND t1.c2 IS NULL; 
```

所以如果我有 t1：

```
c1|c2|c3
1 | a|v1
2 | b|v2 
```

和 t2：

```
c1|c2|c3
1 | a|v3
2 | b|v4
2 | c|v5
3 | d|v6 
```

我会得到：

```
c1|c2|c3
1 | a|v1
2 | b|v2
2 | c|v5 
```

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:18:59.453

查询应该如下所示。但是，我不确定它的效率如何。

```
SELECT 
    T1.c1,
    T1.c2,
    T1.c3
FROM T1
UNION     
SELECT 
    T2.c1,
    T2.c2,
    T2.c3
FROM T2 
WHERE ((T2.c1,T2.c2) NOT IN (SELECT t1.c1,t1.c2 FROM t1)) AND 
(T2.c1 IN (SELECT t1.c1 FROM t1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:24:54.230

根据 SQL Docs，`JOIN`比`SubQueries`. 试试这个：

```
 SELECT c1, c2, c3
 FROM   t1
 UNION
 SELECT b.c1, b.c2, b.c3
 FROM   t1 a inner join t2 b ON
         (a.c1 = b.c1) and (a.c1 = b.c1)
 WHERE  (b.c1,b.c2) NOT IN (SELECT c1,c2 FROM t1) 
```

要证明，请参见此处：[http ://sqlfiddle.com/#!2/50a4e/23](http://sqlfiddle.com/#!2/50a4e/23)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:30:57.037

```
select t2.c1,t2.c2,t2.c3 
from t1,t2 
where t1.c1=t2.c2; 
```

# c++ - 类复制操作，它是如何工作的？

> ID：10527422
> 
> 赞同：2
> 
> 时间：2012-05-10T04:16:22.307
> 
> 标签：c++, constructor, copy

我有一个名为 QuadTree 的类。我最近为它创建了一个复制构造函数，即：

```
QuadTree(const QuadTree &cpy); 
```

比如说我还没有填写这个构造函数。只要不使用它，代码就可以编译得很好。现在，我有一个名为subtractTrees 的函数：

```
QuadTree * subtractTrees(QuadTree LHS, QuadTree RHS); 
```

在制作复制构造函数之前，这段代码工作得很好。现在，使用此函数编译程序时，出现以下错误：

```
Undefined Referance to QuadTree::QuadTree(QuadTree const&) 
```

就像由于我的复制构造函数在代码中使用并且尚未填写而发生的错误一样。这是否意味着现在我有一个复制构造函数调用像这样的被动函数（subtractTrees）将调用复制构造函数？

如果是这样，有没有办法在仍然使用复制构造函数的同时阻止这种情况发生？我需要这样做的原因是复制用于这样的函数会大大减慢我的代码。但我需要复制构造函数来轻松复制树。

编辑：我只是通过填写复制构造函数来修复错误，但问题更多的是关于

1.  首先，如果没有复制构造函数，它是如何工作的。
2.  如果有人试图通过不每次使用树时都复制树来节省速度，有没有一种方法可以利用这种不需要复制构造函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T04:19:33.637

您必须为您的类定义一个构造函数`QuadTree`，当您这样做时，编译器不会生成隐式复制构造函数，它假定您将在需要时提供自己的构造函数。

当您添加`QuadTree`按值获取类型的函数时，需要复制构造函数来执行这些复制，因此编译器会抱怨。

```
QuadTree * subtractTrees(QuadTree LHS, QuadTree RHS);
                         ^^^^^^^^^^^^  ^^^^^^^^^^^^^ 
```

按值传递需要复制构造函数。

如果是这样，有没有办法在仍然使用复制构造函数的同时阻止这种情况发生？

我不确定我是否理解这个问题。如果要创建类对象的副本，则需要一个复制构造函数。如果您想避免副本通过 const 引用传递您的对象。

```
QuadTree * subtractTrees(const QuadTree &LHS, const QuadTree &RHS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:30:14.653

当您没有声明复制构造函数时，编译器会为您隐式提供一个，这就是您的代码以前可以工作的原因。由于您`QuadTree`通过值传递给`subtractTrees`，因此在您声明自己的复制构造函数之前调用了此隐式复制构造函数。一旦您声明（但未定义）您自己的复制构造函数，编译器就会停止隐式定义复制构造函数，因此之前对复制构造函数的所有调用（例如在您的`subtractTrees`函数中）都会产生未定义的引用。

如果您想避免`subtractTrees`函数中的副本，您可以通过引用传递参数：

```
QuadTree * subtractTrees(const QuadTree &LHS, const QuadTree &RHS); 
```

# php - PHP生成随机数

> ID：10527423
> 
> 赞同：2
> 
> 时间：2012-05-10T04:16:27.530
> 
> 标签：php

我需要在我的脚本中生成大约 5,000 个随机数，但是 CPU 太快了，以至于我看到了随机数的趋势。

例如，在 100 次第一次迭代中，我使用 rand(0,100); 得到了 70 到 99 之间的 80 个值，这可能会带来真正的不便。

有没有办法解决这个问题，或者随机性在 2012 年不再实现？

我相信有可能从执行随机次数的函数中生成随机数......但我想不出一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T04:25:35.837

你在用`rand()`吗？考虑“[生成更好的随机值](http://php.net/manual/en/function.mt-rand.php)”。

附录; 看到硬币的[两面](https://stackoverflow.com/questions/7808021/whats-the-disadvantage-of-mt-rand)总是好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:27:32.243

`rand`是由时间播种的。 `mt_rand`可能对你更好。如果您想要更好的随机性，您可以使用`openssl_random_pseudo_bytes`（如果可用），或者`/dev/[u]random`如果您无权访问它并且在可用的系统上。如果使用这些，则必须将字节转换为`hexdec(bin2hex())`十进制数字，然后可能会截断它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:26:29.297

mt_rand() 是对 rand() 的改进。但是，随机数是从序列中生成的，所以...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T22:39:17.077

使用此功能：

```
function Random($length = 210) {
$characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
$randomString = '';
for ($i = 0; $i < $length; $i++) {
    $randomString .= $characters[rand(0, strlen($characters) - 1)];
}
return $randomString;
} 
```

您可以将 210 更改为您想要的任何数字，希望这会有所帮助

# android - Android：修复线性布局中心的文本视图

> ID：10527435
> 
> 赞同：0
> 
> 时间：2012-05-10T04:18:02.980
> 
> 标签：android, android-layout, button, textview, android-linearlayout

如何将我的 TextView 修复在其父 LinearLayout 的中心。和父级的空白 b/w TextView 和右边缘中的按钮。（TextView 必须在中心）。请帮我。

```
|--------------------------------------------------------|  <------Parent Linearlayout

|                  MyTextviewInCenter          BackButton|  <------There should not be any gap b/w Button & its parent 
|--------------------------------------------------------| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T06:27:53.587

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <RelativeLayout
                  android:layout_width="fill_parent"
                  android:layout_height="wrap_content">

        <TextView android:layout_centerInParent="true"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Hello"/>

        <Button android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Back"
                android:layout_alignParentRight="true"/>      

    </RelativeLayout>>

</LinearLayout> 
```

你可以这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:50:13.223

将线性布局的方向设置为水平：

```
android:orientation="horizontal" 
```

之后设置Textview“中心”的重力

```
android:layout_gravity="center" 
```

最后设置按钮的左边距你想要什么

```
android:layout_marginLeft="25dp" 
```

我想它可以帮助你...!!!

# php - 如何结合搜索框和下拉菜单输出结果（php、mysql）

> ID：10527436
> 
> 赞同：0
> 
> 时间：2012-05-10T04:18:06.150
> 
> 标签：php, mysql, search, query-parameters

我创建了一个带有搜索框和美国 50 个州的下拉列表的 HTML 表单。我想要的是让用户在搜索框中输入关键字（电子邮件、主题、用户名等）并从下拉列表中选择一个状态。通过从下拉列表中选择一个状态，我希望我的 PHP 代码仅在该选定状态下从搜索框中找到关键字。例如，作为用户，我想在华盛顿州查找“足球”并查看结果列表。

换句话说，我将如何仅在与我的搜索表单相结合的选定状态下显示结果？

这是我的一些 PHP 代码，可让您了解我要完成的工作。

```
// this is pulling the text that was typed in the html search box
$searchbox = $_POST['searchbox'];

// this is pulling the state from my HTML drop down menu
$state = $_POST['state'];

$searchboxresult = mysql_query("
  SELECT *
  FROM   table
  WHERE (ID      LIKE '%".$_POST['searchbox']."%')
     OR (stateID LIKE '%".$_POST['searchbox']."%')
     OR (city    LIKE '%".$_POST['searchbox']."%')
     OR (subject LIKE '%".$_POST['searchbox']."%')
     OR (email   LIKE '%".$_POST['searchbox']."%')
     OR (posting LIKE '%".$_POST['searchbox']."%')
     OR (skill   LIKE '%".$_POST['searchbox']."%')
     OR (event   LIKE '%".$_POST['searchbox']."%')
     OR (days    LIKE '%".$_POST['searchbox']."%')
     OR (url     LIKE '%".$_POST['searchbox']."%')
");

// and

$statedropdownresult = mysql_query("
  SELECT * FROM table WHERE stateID LIKE '%$state%'
"); 
```

然后我有一个 while 循环来搜索所有内容并输出数据。但我无法让状态下拉来限制用户搜索的内容。我只能让一个或另一个 mysql_query 与我的 while 循环结合使用，而不是两者。出于某种原因，使用**AND**将查询组合成一个似乎也不起作用。有任何想法吗？

我知道代码很草率并且存在安全问题，但是我稍后会进行清理。如果您需要更多细节或澄清某些事情，我会很乐意详细说明！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:43:24.763

你可以尝试这样的事情： -

```
$sql ="SELECT * FROM table WHERE 1";

if($_POST['searchbox'] != ''){
     $sql =" and (ID LIKE '%".$_POST['searchbox']."%') OR (stateID LIKE              
     '%".$_POST['searchbox']."%') OR (city LIKE '%".$_POST['searchbox']."%') OR   
     (subject LIKE '%".$_POST['searchbox']."%') OR (email LIKE  
     '%".$_POST['searchbox']."%') OR (posting LIKE '%".$_POST['searchbox']."%') OR  
     (skill LIKE '%".$_POST['searchbox']."%') OR (event LIKE  
     '%".$_POST['searchbox']."%') OR (days LIKE '%".$_POST['searchbox']."%') OR (url  
     LIKE '%".$_POST['searchbox']."%')";
}
if($state != ''){
    $sql .= " and stateID LIKE '%".$state."%'";
}

  mysql_query($sql); 
```

希望这可以帮助。

# ios - 在 obj c - ios 中使用 C Dll 和 lib

> ID：10527439
> 
> 赞同：2
> 
> 时间：2012-05-10T04:18:25.963
> 
> 标签：ios, c, dll

我有一个来自 Windows 应用程序的 C lib 和 dll 文件。我没有源代码。是否可以在 IOS 应用程序中使用它。

我看到了不同的反应，很困惑。如果我们有源代码，我认为我们需要创建 dylib，然后我们可以在包含相关头文件后使用相同的源代码。

请分享任何专家的想法，以指导我正确的方向。感谢你的帮助 。

*   米娅

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T04:30:56.237

iOS 上不允许动态库，但除此之外，Darwin 或底层 XNU 内核根本无法识别 DLL 文件格式，因为二进制格式不同。

Windows API 也不能在 Darwin OS 上使用（Mac OS X 和 iOS 都是基本 Darwin OS 的包装器）。您需要重写 DLL 中的代码以使用 POSIX 和/或 Objective-C API，并将其编译为静态库以使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T04:23:38.237

您需要获得与 iOS 兼容的库，别无他法。有几个原因：

*   iOS 不支持 DLL，因为它们是 windows 格式，但此外，您不能在 iOS 上使用任何动态库，因为 Apple 对其进行了限制。
*   DLL 通常用于英特尔 CPU，而 iOS 设备具有 ARM CPU。
*   大多数 dll 都在调用 Windows API - 你确定这个不是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T04:23:42.197

您将不得不将其重新编译为静态库（.a 文件）。Apple 不允许动态库，除了他们自己的框架（所以你不能将它编译为 dylib）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T04:24:42.683

不，如果你只有一个编译好的二进制 DLL，那么你就无法在 iOS 上使用它。除非你碰巧有一个用于即将推出的 Windows 8 的 ARM DLL，否则你的 DLL 包含 x86 或 x86-64 机器代码（或者如果你有很多钱，可能是 IA64），它们绝对不会在 iOS 设备上运行，这些都是ARM 架构。加上更多的原因。

如果你有源代码，你可以为 iOS 重新编译它，或者直接到你的应用程序中，作为一个可以与你的应用程序链接的静态库，或者作为一个框架的一部分的动态库。但在所有情况下，您都需要使用 iOS 编译器从源代码重新编译它。

# gcc - 构建一个'long long'

> ID：10527441
> 
> 赞同：5
> 
> 时间：2012-05-10T04:18:27.723
> 
> 标签：gcc

gcc中如何构造a `long long`，类似于构造`int`via`int()`

以下在 gcc (4.6.3 20120306) 中失败（但例如通过 MSVC）。

```
myFunctionCall(someValue, long long()); 
```

有错误`expected primary-expression before 'long'`（列位置指示第一个长是位置）。

一个简单的改变

```
myFunctionCall(someValue, (long long)int()); 
```

工作正常 - 即构造一个`int`并强制转换为`long long`- 表明 gcc 不喜欢`long long`ctor。

# 总结解决方案

总结以下来自@birryree 的精彩解释：

*   许多编译器不支持`long long()`并且可能不符合标准
*   构造`long long`等价于文字`0LL`，所以使用`myFunctionCall(someValue, 0LL)`
*   或者使用`typedef long_long_t long long`then`long_long_t()`
*   最后，`uint64_t` *如果*您在任何平台上追求一种正好是 64 位的类型，而不是*至少*64 位但可能在不同平台上有所不同的类型，请考虑使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:54:23.453

**我想要一个关于预期行为的明确答案，所以我[发布了一个问题`comp.lang.c++.moderated`](https://groups.google.com/forum/?fromgroups#!topic/comp.lang.c++.moderated/Rkz8mbjrJ_Y)并得到了一些很好的答案作为回报。** *感谢 Johannes Schaub、Alf P. Steinbach（均来自 SO）和 Francis Glassborrow 提供一些信息*

这不是 GCC 中的错误 - 实际上它会跨越多个编译器 - GCC 4.6、GCC 4.7 和 Clang 会抱怨类似的错误，例如`primary expression expected before '('`尝试以下语法：

```
long long x = long long(); 
```

一些原语有空格，如果你想使用构造函数风格的初始化，这是不允许的，因为绑定（`long()`是绑定的，但`long long()`有一个免费的`long`）。带有空格的类型（如`long long`）不能使用`type()`-construction 形式。

MSVC 在这里更宽松，尽管在技术上不符合标准（而且它不是您可以禁用的语言扩展）。

### 解决方案/解决方法

您想要做的事情有其他选择：

*   用作`0LL`您的价值而不是尝试`long long()`-它们会产生相同的价值。

    这也是大多数代码的编写方式，因此其他阅读您的代码的人最容易理解。

*   从你的评论看来你真的想要`long long`，所以你可以`typedef`自己保证你有一个`long long`类型，像这样：

    ```
    int main() {
        typedef long long MyLongLong;
        long long x = MyLongLong(); // or MyLongLong x = MyLongLong();
    } 
    ```

*   使用模板来解决需要显式命名的问题：

    ```
    template<typename TypeT>
    struct Type { typedef TypeT T(); };

    // call it like this:
    long long ll = Type<long long>::T(); 
    ```

*   正如我在评论中提到的，您可以使用别名类型，例如`int64_t`(from `<cstdint>`)，它在通用平台上是`typedef long long int64_t`. 这比此列表中的前面的项目更依赖于平台。

    `int64_t`是 64 位的固定宽度类型，通常`long long`是 linux-x86 和 windows-x86 等平台上的宽度。`long long`至少 64 位宽，但可以更长。如果您的代码只能在某些平台上运行，或者您确实需要固定宽度的类型，那么这可能是一个可行的选择。

### C++11 解决方案

感谢 C++ 新闻组，我学到了一些额外的方法来做你想做的事，但不幸的是，它们只在 C++11 的领域内（而且 MSVC10 也不支持，而且只有非常新的编译器会):

*   `{}`方式：

    ```
    long long ll{}; // does the zero initialization 
    ```

*   在 C++11 中使用 Johannes 所说的“边框工具”`std::common_type<T>`

    ```
    #include <type_traits>

    int main() {
        long long ll = std::common_type<long long>::type();
    } 
    ```

* * *

### 那么POD 类型`()`和初始化之间有真正的区别吗？`0`

你在评论中这样说：

> 我不认为默认 ctor 总是返回零 - 更典型的行为是保持内存不变。

好吧，对于原始类型，这根本不是真的。

来自*ISO C++ Standard/2003*的**第 8.5 节**（没有 2011，抱歉，但此信息没有太大变化）：

 *> 默认初始化类型的对象`T`意味着：
> 
> — 如果`T`是非 POD 类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是非良构的）；
> 
> — 如果`T`是数组类型，则每个元素都是默认初始化的；
> 
> —**否则，对象被零初始化。**

最后一个子句在这里最重要，因为`long long`, `unsigned long`, `int`,`float`等都是标量/POD 类型，因此调用如下：

```
int x = int(); 
```

与这样做完全相同：

```
int x = 0; 
```

* * *

### 生成的代码示例

这是代码中实际发生的更具体的示例：

```
#include <iostream>

template<typename T>
void create_and_print() {
   T y = T();
   std::cout << y << std::endl;
}

int main() {
   create_and_print<unsigned long long>();

   typedef long long mll;
   long long y = mll();
   long long z = 0LL;

   int mi = int();
} 
```

编译：

```
g++ -fdump-tree-original construction.cxx 
```

我在生成的树转储中得到了这个：

```
;; Function int main() (null)
;; enabled by -tree-original

{
  typedef mll mll;
  long long int y = 0;
  long long int z = 0;
  int mi = 0;

  <<cleanup_point <<< Unknown tree: expr_stmt
  create_and_print<long long unsigned int> () >>>>>;
  <<cleanup_point   long long int y = 0;>>;
  <<cleanup_point   long long int z = 0;>>;
  <<cleanup_point   int mi = 0;>>;
}
return <retval> = 0;

;; Function void create_and_print() [with T = long long unsigned int] (null)
;; enabled by -tree-original

{
  long long unsigned int y = 0;

  <<cleanup_point   long long unsigned int y = 0;>>;
  <<cleanup_point <<< Unknown tree: expr_stmt
  (void) std::basic_ostream<char>::operator<< ((struct __ostream_type *) std::basic_ostream<char>::operator<< (&cout, y), endl) >>>>>;
} 
```

* * *

### 生成的代码含义

因此，从上面生成的代码树中，请注意我的所有变量都只是用 初始化`0`，即使我使用构造函数样式的默认初始化，例如 with `int mi = int()`。GCC 将生成刚刚执行的代码`int mi = 0`。

我的模板函数只是尝试对一些传入的`typename T`, where进行默认构造`T = unsigned long long`，也只生成了一个`0`-initialization 代码。

* * *

### 结论

所以总而言之，如果你想默认构造原始类型/POD，就像使用`0`.*

# c++ - 如何创建一个非常大的唯一整数数组？

> ID：10527443
> 
> 赞同：2
> 
> 时间：2012-05-10T04:18:41.997
> 
> 标签：c++, arrays, random, numbers

我的并行编程课的部分作业是创建一个包含 3.13 亿个唯一整数的文件。我想我会将两个随机数相乘以获得非常大的范围，但是检查唯一性的最佳方法是什么？

我应该创建一个数组并每次都在数组中搜索匹配项吗？这似乎效率很低。

编辑-问题是最终对列表进行排序（使用线程/多核），因此顺序列表不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T04:22:33.587

您可以按顺序填充文件 - 生成的文件如下所示：

> 0 1 2 3 4 5 6 7 8 9 ... 312999999

这些数字很容易生成，并且保证是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:31:52.583

对于并行编程任务，我认为您可能需要将任务分成小而独立的部分。由于 313M 仍然比 2G 少，这是 32 位可以表示的最大数量。我的建议是您可以将 32 位数字分成高 16 位和低 16 位。对于每个线程，您分配一个固定的较高位，线程生成较低的 16 位。然后你把这两个部分结合起来，这样你就可以保持每个线程生成的每个数字都是不同的。

# mysql - 如何在第三列中显示 2 列 mysql 复合主键值作为默认值？

> ID：10527448
> 
> 赞同：0
> 
> 时间：2012-05-10T04:19:39.830
> 
> 标签：mysql, default, composite-primary-key

我在任何地方都找不到这个（我可能没有问正确的问题）。有人请指出我正确的方向。

我在 MySQL 中使用 2 列复合主键。我想将该值显示为同一个表和另一个表的第三列中的默认值。

```
Col_1 value = ABC, 
Col_2 value = 123, 
PK          = ABC123, 

Col_3 default value = ABC123 
```

谁能解释如何做到这一点？

如果可能的话，我不希望使用触发器或插入语句来执行此操作。

谢谢，

泰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:50:20.187

在很多情况下，您*确实需要*将值实际放在列中。通过在用于获取数据的 select 语句中创建值，或者在 php、ruby 或任何用于显示数据的代码中创建值，您可以多次获得相同的效果。

例如：

```
SELECT Col_1, Col_2, CONCAT(NEW.Col_1,NEW.Col_2) as Col_3
FROM my_table; 
```

这将为您解决问题，同时避免触发器和其他花哨的 sql 技巧。

我认为这也是一种更好的方法，以防有人想要更改 Col_1 或 Col_2 的值——如果他们更改了其中一个值，那么包含两者组合的列也必须更新。它使事情变得比他们需要的更复杂。

如果您出于某种原因它们*必须*在数据库表中，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:39:37.807

使用触发器。我尚未对此进行测试，但值得您尝试。

```
CREATE TRIGGER `auto_default` 
BEFORE INSERT ON `table` FOR EACH ROW 
SET NEW.Col_3=CONCAT(NEW.Col_1,NEW.Col_2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:42:22.757

我没有遇到过这个。可能您将不得不使用触发器（您表示这不是您的选择）或者必须将其构建到执行 Insert into the table 的应用程序中。

当我浏览 MYSQL 的材料时，它清楚地指出“默认值必须是常量；它不能是函数或表达式”。

供参考“http://dev.mysql.com/doc/refman/5.6/en/data-type-defaults.html”

对于使用触发器，乔纳斯建议的触发器应该可以工作..

# lwuit - 从今天的日期获取上个月

> ID：10527449
> 
> 赞同：0
> 
> 时间：2012-05-10T04:20:35.213
> 
> 标签：lwuit

lwuit1.4 中有没有办法从今天的日期获取最后一个月？我尝试使用该`add`方法，但它在 lwit 的日历 api 中不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:15:59.627

这与 LWUIT 无关，它是来自 CLDC 的 java.util.Calendar 类，它缺少 add 方法。它确实具有 set 方法，因此您可以自己编写类似的代码。请参阅 LWUIT 的 Calendar 类的代码，其中箭头允许在月份之间导航。

# python - 更改 cx_Freeze 脚本的图标

> ID：10527454
> 
> 赞同：11
> 
> 时间：2012-05-10T04:21:14.730
> 
> 标签：python, python-3.x, icons, cx-freeze

我只是想知道是否可以更改 cx_Freeze 脚本的程序图标，我环顾四周，但找不到任何东西。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-03-08T19:16:53.247

只需`icon="icon.ico"`像`Executable()`这样添加：

```
from cx_Freeze import setup, Executable

target = Executable(
    script="your_program.py",
    base="Win32GUI",
    compress=False,
    copyDependentFiles=True,
    appendScriptToExe=True,
    appendScriptToLibrary=False,
    icon="icon.ico"
    )

setup(
    name="name",
    version="1.0",
    description="the description",
    author="the author",
    options={"build_exe": options},
    executables=[target]
    ) 
```

# javascript - ClearInterval() 和 SetInterval()

> ID：10527455
> 
> 赞同：0
> 
> 时间：2012-05-10T04:21:24.213
> 
> 标签：javascript

因此，在我的 javascript 代码中，如果用户单击复选框，我需要更改`setInterval()`. 目前，我`onchange`在复选框上使用了处理程序。每当更改复选框时，我都会调用`clearInterval()`and `setInterval()`。我将区间 id 作为全局变量。现在，如果用户在我打电话之前更改了复选框，`clearInterval()`我预计会有一些问题，但什么也没发生。有没有更好的方法来做到这一点，或者这种方式被认为是标准的？有没有办法检查是否`interval`存在？

PS。我对 Javascript 很陌生，大约 5 小时前开始使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:29:26.487

这应该有效：

```
 var myInterval = setInterval(...);

 document.getElementById('myCheckbox').onchange = function()
 {
   var func = arguments.callee;
   if (func.busy) return;
   func.busy = true;
   clearInterval(myInterval);
   myInterval = setInterval(...);
   func.busy = false;
 } 
```

# java - 不可见的模型属性？

> ID：10527460
> 
> 赞同：0
> 
> 时间：2012-05-10T04:21:33.137
> 
> 标签：java, playframework

我有一个`Product`具有一些基本属性的模型，

```
package models;

import java.util.*;
import javax.persistence.*;

import play.db.ebean.*;
import play.data.validation.*;

@Entity
public class Product extends Model {

    public String name;

    public String description;

    public static Finder<Long,Item> find = new Finder<Long,Item>(
        Long.class, Item.class
    );

} 
```

一个控制器函数，用于`find`获取并将 a 传递`List<Product>`给所需的视图，

```
package controllers;

import play.*;
import play.mvc.*;

import views.html.*;

import models.Product;

public class Application extends Controller {

    public static Result allProducts() {
        return ok(product_page.render(Product.find.all()));
    }

} 
```

以及迭代列表并显示这些属性的声明视图。

```
@(products: List[Product])

<h1>Here are the products:</h1>

<ul>
@for(product <- products) {
    <li>@product.getName()</li>
    <ul>
        <li>@product.getDescription()</li>
    </ul>
}
</ul> 
```

一切看起来都很好（至少对我来说）......但编译器告诉我：

```
value getName is not a member of models.Product 
```

我究竟做错了什么？（路线很好，application.conf 设置正确，进化也正确......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:17:05.630

`Product`没有*getter*方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:05:02.353

利用：

```
 <li>@product.description</li> 
```

顺便说一句：您的查找器应该使用当前模型的类作为第二种类型

```
public static Finder<Long,Product> find = new Finder<Long,Product>(
    Long.class, Product.class
); 
```

# php - 数组值比较返回 false

> ID：10527461
> 
> 赞同：0
> 
> 时间：2012-05-10T04:21:37.880
> 
> 标签：php, arrays, comparison

我有以下比较：

```
if($panoraComparacion['center']==$updatedPanorama['center']){
        //Do stuff
} 
```

现在'center'数组的值如下：

```
$panoramaComparacion['center']
latitude = -33.83306935448361
longitude = 150.435259765625

$updatedPanorama['center']
latitude = -33.83306935448361
longitude = 150.435259765625 
```

它们是相同的，但是比较总是返回错误的......这是为什么？在 php 中，如果数组的所有索引和值都相同，== 将返回 true 对吗？如果这是一个愚蠢的问题，我很抱歉，但我开始学习 php。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T04:35:23.647

`$panoraComparacion`， 真的..？请尝试**`$panoramaComparacion`**：

```
var_dump($panoramaComparacion['center'] == $updatedPanorama['center']); // true 
```

# regex - 正则表达式替换可选的下划线

> ID：10527463
> 
> 赞同：3
> 
> 时间：2012-05-10T04:22:09.283
> 
> 标签：regex, linux, shell

如果存在，我需要选择性地去除下划线。

```
string VIEW VXABC expected result VIEW ABC
string VIEW V_XABC expected result VIEW ABC 
```

这是我的尝试，但结果让我望而却步

```
echo "VIEW VXABC" |sed 's/VIEW V_?X/VIEW ABC/'
VIEW VXABC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:35:02.423

```
[me@home]$ echo VIEW V_XABC | sed -r 's/VIEW V_?X/VIEW /' 
VIEW ABC
[me@home]$ echo VIEW VXABC | sed -r 's/VIEW V_?X/VIEW /' 
VIEW ABC 
```

注意`-r`选项。从[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)：

```
-r, --regexp-extended
    use extended regular expressions in the script. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:36:53.657

检查这是否有帮助。

```
 sed -e 's/\(VIEW \)V[_X]\+\(ABC\)/\1 \2/'
testing
testing
VIEW VXABC
VIEW  ABC
VIEW V_XABC
VIEW  ABC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:28:43.413

尝试使用“扩展正则表达式”开关`-E`：

```
echo "VIEW VXABC" | sed -E 's/VIEW V_?X/VIEW ABC/' 
```

从手册页`sed`：

> -E, -r, --regexp-扩展
> 
> 在脚本中使用扩展的正则表达式（为了便于移植，使用 POSIX -E）

# vb.net - VB.NET 有人可以通过我编译的应用程序将代码注入我的数据库吗？

> ID：10527481
> 
> 赞同：1
> 
> 时间：2012-05-10T04:24:31.803
> 
> 标签：vb.net, security

我的场景如下，一个 .NET 4.0 解决方案有几个项目（一个主机和一些 dll），一个（dll）特别是使用 MySQL .NET 连接器，以便只调用存储过程。我还用私钥签署了我所有的程序集。

我很好奇黑客是否能以某种方式从连接字符串中获取数据库用户的密码（即使该用户只有执行权限）。

另外我很好奇黑客是否能够找出我调用的存储过程，以及他是否可以使用我的存储过程任意选择/插入/删除。

所有这一切都假设黑客只有一份已编译解决方案的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:31:34.937

您是否确信项目中的所有代码都不会受到 SQL 注入漏洞和本地文件包含漏洞等漏洞的影响（并且会随着它的发展而保持不变）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:33:23.087

如果您在代码中硬编码了用户名和密码，或者即使您将凭据存储在加密文件中，但加密密钥在您的代码中是硬编码的，那么它很容易被破解，因为没有编译 .NET 程序集到机器码。当您构建一个 .NET 程序集时，它会将您的 VB.NET 代码转换为 MSIL 代码，这只是一种仍然易于阅读的较低级别的编程语言。Microsoft 提供了一个名为 MSIL Disassembler 的免费工具（作为 .NET Framework SDK 的一部分），它允许您轻松查看任何已编译程序集的所有 MSIL 代码。有许多可用的工具可让您轻松获取 MSIL 代码并将其“反编译”为 VB 或 C# 代码。您会惊讶于使用 .NET 反编译器重现原始代码是多么容易。如果 PDB 可用，输出与原始代码惊人地相似。因此，除非您使用某些第三方代码混淆或程序集加密工具，否则您的“编译”程序集很容易被反向工程。通常这没什么大不了的，但如果避免黑客攻击是一个高度关注的问题，那么您当然不应该在代码中放入任何秘密。

# ruby-on-rails-3 - 如何在 Rails 3 应用程序中处理 API 回调响应

> ID：10527484
> 
> 赞同：2
> 
> 时间：2012-05-10T04:25:16.117
> 
> 标签：ruby-on-rails-3, json, api, post, callback

在 rails 3 应用程序中，我使用第三方 API 来保存网络摄像头视频。当视频保存到他们的服务器时，他们会提供一个选项来向您发送回调到您指定的 URL。从他们的网站：

* * *

打回来

回调适用于希望在 Framey 服务器上完成视频处理时收到通知的高级用户。如果您选择在您的帐户设置中接收回调，一旦转换完成，Framey 将向您的服务器发布视频和缩略图 URL。

以下是我们发布到您的服务器的数据示例：

```
"video": {  
  "name": "ecf7c330-549c-012e-9d34-7c6d628c53d4",        
  "filesize": 123456,       
  "duration": 15.62,        
  "state": "uploaded",              
  "views": 0,    
  "data": {
    "my_user_id": 1,
    "video_title": "Contest Submission"
  },
  "flv_url": "http://framey.com/videos/source/ecf7c330-549c-012e-9d34-7c6d628c53d4.flv",
  "mp4_url": "http://framey.com/videos/source/ecf7c330-549c-012e-9d34-7c6d628c53d4.mp4",
  "large_thumbnail_url": "http://framey.com/thumbnails/large/ecf7c330-549c-012e-9d34-7c6d628c53d4.jpg",
  "medium_thumbnail_url": "http://framey.com/thumbnails/medium/ecf7c330-549c-012e-9d34-7c6d628c53d4.jpg",
  "small_thumbnail_url": "http://framey.com/thumbnails/small/ecf7c330-549c-012e-9d34-7c6d628c53d4.jpg"
} 
```

* * *

我正在努力了解如何处理这个问题，但我想我可以从你们这些好人那里得到正确的指导。他们指定了一个 POST 方法，所以我必须设置一个路由。在我的 config/routes.rb 文件中，我有

```
post "framey/callback/" 
```

在我的 app/controllers/framey_controller.rb 文件中有这个：

```
class FrameyController < ApplicationController
  def callback
  end
end 
```

我需要做类似的事情吗

```
render :json =>???? 
```

我熟悉通过 HTML 表单和/或 ajax 使用 POST。我不确定如何获取他们发回给我的 JSON。

提前感谢您的帮助，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:57:12.837

在 app/controllers/framey_controller.rb

```
class FrameyController < ApplicationController
  def callback
    v = Video.new
    v.name = params[:video][:name]
    v.user_id = params[:video][:data][:user_id]
    v.question_id = params[:video][:data][:question_id]
    v.save
  end
end 
```

# android - android中的KSOAP异常

> ID：10527485
> 
> 赞同：0
> 
> 时间：2012-05-10T04:25:26.723
> 
> 标签：android, ksoap2

我在我的应用程序中使用 KSOAP 来调用一个 web 服务。我遇到了一些异常。我正在使用以下代码：

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            envelope.dotNet=true;           
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);  
            try
            {
                androidHttpTransport.call(SOAP_ACTION, envelope);              
//              SoapPrimitive response = (SoapPrimitive)envelope.getResponse();    
                SoapObject response=(SoapObject)envelope.getResponse();      ------>getting exceptopn here
} 
```

我收到以下错误：

```
 W/System.err(994): SoapFault - faultcode: 'soap:Server' faultstring: 'System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.NullReferenceException: Object reference not set to an instance of an object.

 W/System.err(994):    --- End of inner exception stack trace ---' faultactor: 'null' detail: org.kxml2.kdom.Node@44ed4ff0
 W/System.err(994):     at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:116)
 W/System.err(994):     at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:137)
 W/System.err(994):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
 W/System.err(994):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
 W/System.err(994):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 W/System.err(994):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
 W/System.err(994):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
 W/System.err(994):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
 W/System.err(994):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
 W/System.err(994):     at android.os.Handler.dispatchMessage(Handler.java:99)
 W/System.err(994):     at android.os.Looper.loop(Looper.java:123)
 W/System.err(994):     at android.app.ActivityThread.main(ActivityThread.java:4363)
 W/System.err(994):     at java.lang.reflect.Method.invokeNative(Native Method)
 W/System.err(994):     at java.lang.reflect.Method.invoke(Method.java:521)
 W/System.err(994):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
 W/System.err(994):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
 W/System.err(994):     at dalvik.system.NativeStart.main(Native Method)
 I/ActivityManager(60): Displayed activity com.redbus/.SearchRoute: 2501 ms (total 2501 ms) 
```

任何人都可以请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:42:51.803

你可以找出你的问题，这里是运行代码::

```
 SoapObject request = new SoapObject(NAMESPACE,METHODE_NAME);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            request.addProperty("image", param[0]);
            request.addProperty("desc", param[1]);
            request.addProperty("venueId", param[2]);
            request.addProperty("userId", param[3]);
            envelope.setOutputSoapObject(request);
            envelope.dotNet = true;
            HttpTransportSE androidHttpTransport = new HttpTransportSE(
                    Data.URL_BASE, 20000);
            try {
                androidHttpTransport.call(Data.SOAP_ACTION, envelope);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                responseXML = null;
            }
            SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
            String responseLocal = resultsRequestSOAP.toString(); 
```

如果您还有问题，请告诉我，

# javascript - 从嵌套的 jquery 对话框运行服务器端方法

> ID：10527486
> 
> 赞同：2
> 
> 时间：2012-05-10T04:25:29.143
> 
> 标签：javascript, jquery, asp.net, jquery-ui

'正在尝试在嵌套的 jquery 对话框中调用服务器端函数

设计是这样的：

**[第一个对话框]**

*   单击按钮打开第二个对话框
*   单击另一个按钮运行服务器端方法。（工作正常）
*   网格视图由服务器端方法更新。

**[第二个对话框]**

*   单击按钮运行服务器端方法 var btnConfirm = document.getElementById("<%= BtnAvailEmpAccept.ClientID %>"); btnConfirm.click();

[第一个对话框] 按预期工作，但 [第二个对话框] 没有任何反应。[第二个对话框] javascript 代码被执行但从未命中服务器端方法。

每个对话框的两个“div”都包含在更新面板中，因为我有通过按钮单击事件更新的网格视图。

这是[第二个对话框]

```
 $confirmWindow = jQuery("#empConfirmDiv");
                            $confirmWindow.show();
                            $confirmWindow.dialog("open");
                            //instantiate the dialog
                            $confirmWindow.dialog({
                                dialogClass: "empConfirmDialog",
                                maxHeight: 600,
                                width: 1200,
                                resizable: false,
                                modal: true,
                                position: 'center',
                                autoOpen: false,
                                title: 'Exception - Confirmation',
                                overlay: { opacity: 0.5, background: 'black' },
                                buttons: {
                                    "Decline": function () {
                                        var btnDecline = document.getElementById("<%= BtnAvailEmpReject.ClientID %>");
                                        btnDecline.click();

                                    },
                                    "Left Message": function () {
                                        var btnMsg = document.getElementById("<%= BtnAvailEmpMsg.ClientID %>");
                                        btnMsg.click();
                                    },
                                    "Confirm": function () {
                                        var btnConfirm = document.getElementById("<%= BtnAvailEmpAccept.ClientID %>");
                                        btnConfirm.click();
                                    },
                                    "Cancel": function () {
                                        $(this).dialog("close");
                                    }

                                }
                            }); 
```

asp:button 运行服务器端方法：

```
<asp:Button ID="BtnAvailEmpAccept" runat="server" Width="10px" Height="10px" OnClientClick="return SetValidateTrue()"
                            OnClick="BtnAvailEmpAccept_Click" /> 
```

有谁知道为什么 button.Click() 不调用服务器端方法？

**> 编辑：这是我的答案！**

```
 var showDialogConfirmEmp = function () {
        $confirmWindow = jQuery("#empConfirmDiv");
        $confirmWindow.show();
        $confirmWindow.dialog("open");
    }

    var myWindowConfirmEmp =          
        jQuery("#empConfirmDiv").dialog({
            dialogClass: "empConfirmDialog",
            maxHeight: 600,
            width: 1200,
            resizable: false,
            modal: true,
            position: 'center',
            autoOpen: false,
            title: 'Exception - Confirmation',
            overlay: { opacity: 0.5, background: 'black' },
            buttons: {
                "Decline": function () {
                    var btnDecline = document.getElementById("<%= BtnAvailEmpReject.ClientID %>");
                    btnDecline.click();
                },
                "Left Message": function () {
                    var btnMsg = document.getElementById("<%= BtnAvailEmpMsg.ClientID %>");
                    btnMsg.click();
                },
                "Confirm": function () {
                    var btnConfirm = document.getElementById("<%= BtnAvailEmpAccept.ClientID %>");
                    btnConfirm.click();
                },
                "Cancel": function () {
                    $(this).dialog("close");
                }

            }
        });

    var showDialogAvailEmp = function () {
        SetValidateTrue();
        if (IsScheduleWorkChecked()) {
            var button = document.getElementById("<%= btnListEmp.ClientID %>");
            button.click();
            $myWindowAssign = jQuery("#availEmpDiv");
            $myWindowAssign.show();
            $myWindowAssign.dialog("open");
            $myWindowAssign.parent().appendTo(jQuery("form:first"))
        }
        else {
            alert("Please select a work to assign!");
        }

    }
    var myWindowAvailEmp = jQuery("#availEmpDiv").dialog({ maxHeight: 600,
        width: 700,
        resizable: false,
        modal: true,
        position: 'center',
        autoOpen: false,
        title: 'Exception - Available Employees',
        overlay: { opacity: 0.5, background: 'black' },
        buttons: [{
            text: "Proceed",
            "id": "btnProceed",
            click: function () {                        
                Page_IsValid = true;
                if (Page_IsValid) {
                    var btnProceed = document.getElementById("<%= btnProceed.ClientID %>");
                    btnProceed.click();
                }
                $confirmWindow = jQuery("#empConfirmDiv");
                $confirmWindow.show();
                $confirmWindow.dialog("open");
                myWindowConfirmEmp.parent().appendTo(jQuery("form:first"));

            }
        },
            {
                text: "Cancel",
                "id": "btnAvailCancel",
                click: function () {
                    $(this).dialog("close");
                }
            }]
    }); // myWindow

    // JQuery UI: Diaglog
    jQuery(document).ready(function () {

        jQuery("#BtnAssign").click(showDialogAvailEmp);
        //variable to reference window
        myWindowAvailEmp.parent().appendTo(jQuery("form:first"));
        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:51:53.183

我必须添加“form：first”：“这样做的原因是对话框功能会拉出您的元素并将其放入放置在 Form 标签之外的窗口容器中”

像：

```
myDialog.parent().appendTo(jQuery("form:first")); 
```

[http://labs.kaliko.com/2011/08/jquery-ui-dialog-aspnet-postback.html](http://labs.kaliko.com/2011/08/jquery-ui-dialog-aspnet-postback.html) 帮助了我！

# c# - Syncfusion 中的 ClearFilter 按钮看起来比平时大

> ID：10527492
> 
> 赞同：0
> 
> 时间：2012-05-10T04:26:58.090
> 
> 标签：c#, wpf, filter, syncfusion

我在我的应用程序中使用 Syncfusion GridDataControl。该应用程序基于 c#、wpf 概念。

我刚刚将 dll 更新为较新的版本。

我在我的控件中设置了 FilterBar 属性，并且在我的控件中将 showFilterStatusMessage 设置为 true。

然而，突然出现在状态栏左侧的“清除过滤器”按钮开始显示更大。

不明白是不是因为我更新了dll。

任何想法，如果我如何自定义该状态消息栏中的内容并减小该按钮的大小。

这将是一个很大的帮助。

谢谢，马纳利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:11:56.340

在下面的示例中，我编辑了 GridDataControl 的控件模板。默认情况下，“PART_CloseButton”的高度和宽度设置为 15。因此，FilterStatusBar 中关闭按钮的高度和宽度不会改变。为确保这一点，请将附加示例中的 GriddataControl 样式复制并粘贴到您的应用程序中。 [样品申请](http://www.syncfusion.com/downloads/Support/DirectTrac/95320/GDC_TestSample1341797935298.zip)

如果你有问题，请告诉我们。

谢谢， 西瓦库玛

# xpath - XPath: / 比 // 快吗？

> ID：10527494
> 
> 赞同：2
> 
> 时间：2012-05-10T04:27:13.510
> 
> 标签：xpath

如果我做对了，`/`则意味着它右边的节点必须是它左边的节点的直接子节点，例如`/ul/li`返回 li 项目，它们是作为文档根的 ul 项目的直接子节点。`//ul//li`返回 li 项，它们是文档中某处的任何 ul 项的后代。

现在：是否`/ul/li`比 快`//ul//li`，即使结果集相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:33:57.007

**一般来说，**是的，当然！

`/ul/li`最多访问（number_of_ul * number_of_li 个节点），最大深度为 2。`//ul//li`可能会访问*文档中的每个节点*。

但是，您可能正在使用具有某种索引的文档系统，或者您可能有一个文档，其中最终访问了相同数量的节点，或者其他任何情况，这可能会导致`//`速度不那么慢或速度不一样或可能甚至比`/ul/li`. 我猜你也可能有一个超级愚蠢的 XPath 实现，无论如何都会访问每个节点。

您应该描述您的特定场景，而不是询问哪个更快。“这取决于”是答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:56:11.850

XPath 可能至少有 50 种实现，它们的性能差异很大，相差几个数量级。因此，在不参考具体实现的情况下询问有关 XPath 性能的问题是没有意义的。

通常给出的建议是尽可能使用特定的路径：/a/b/c/d 比 //d 更好。然而，这个建议并不总是正确的。一些产品将执行 //d 更快，因为它们已经创建索引的麻烦：如果您针对 XML 数据库运行，则尤其如此。此外，性能并不是一切。当您处理像 FpML 这样的复杂词汇表时，一个元素的特定路径很容易是十步，名称平均为 20 个字符，所以这是一个 200 个字符的 XPath，当您弄错时很难发现。程序员的性能比机器性能更重要。

# ruby-on-rails - 这是展示 Nodejs (expressjs) 优于 Rails/Django/etc 的好方法吗？

> ID：10527499
> 
> 赞同：3
> 
> 时间：2012-05-10T04:27:35.210
> 
> 标签：ruby-on-rails, django, node.js, express

**更新**

这不应该是一个基准，或者节点与红宝石的事情（我应该在问题中更清楚地说明这一点，抱歉）。重点是比较和演示阻塞和非阻塞之间的区别以及编写非阻塞的难易程度。我可以比较一下使用 EventMachine 的例子，但是 node 有这个内置的，所以它是显而易见的选择。

* * *

我试图向一些朋友展示 nodejs（及其框架）相对于其他技术的优势，这种方式很容易理解，主要是非阻塞 IO 的事情。

所以我尝试创建一个（非常小的）Expressjs 应用程序和一个 Rails 应用程序，它会在 google 上执行 HTTP 请求并计算生成的 html 长度。

正如预期的那样（在我的电脑上）Expressjs 通过 ab 比 Rails 快 10 倍（见下文）。我的问题是，这是否是一种“有效”的方式来展示 nodejs 提供的优于其他技术的主要优势。（或者 Expressjs/Connect 中正在进行某种缓存？）

这是我使用的代码。

**Expressjs**

```
exports.index = function(req, res) {
    var http = require('http')
    var options = { host: 'www.google.com', port: 80, method: 'GET' }
    var html = ''
    var googleReq = http.request(options, function(googleRes) {
        googleRes.on('data', function(chunk) {
            html += chunk
        })
        googleRes.on('end', function() {
            res.render('index', { title: 'Express', html: html })
        })
    });
    googleReq.end();
}; 
```

**导轨**

```
require 'net/http'

class WelcomeController < ApplicationController
  def index
    @html = Net::HTTP.get(URI("http://www.google.com"))
    render layout: false
  end
end 
```

这是 AB 基准测试结果

**Expressjs**

```
Server Software:        
Server Hostname:        localhost
Server Port:            3000

Document Path:          /
Document Length:        244 bytes

Concurrency Level:      20
Time taken for tests:   1.718 seconds
Complete requests:      50
Failed requests:        0
Write errors:           0
Total transferred:      25992 bytes
HTML transferred:       12200 bytes
Requests per second:    29.10 [#/sec] (mean)
Time per request:       687.315 [ms] (mean)
Time per request:       34.366 [ms] (mean, across all concurrent requests)
Transfer rate:          14.77 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.1      0       0
Processing:   319  581 110.6    598     799
Waiting:      319  581 110.6    598     799
Total:        319  581 110.6    598     799

Percentage of the requests served within a certain time (ms)
  50%    598
  66%    608
  75%    622
  80%    625
  90%    762
  95%    778
  98%    799
  99%    799
 100%    799 (longest request) 
```

**导轨**

```
Server Software:        WEBrick/1.3.1
Server Hostname:        localhost
Server Port:            3001

Document Path:          /
Document Length:        65 bytes

Concurrency Level:      20
Time taken for tests:   17.615 seconds
Complete requests:      50
Failed requests:        0
Write errors:           0
Total transferred:      21850 bytes
HTML transferred:       3250 bytes
Requests per second:    2.84 [#/sec] (mean)
Time per request:       7046.166 [ms] (mean)
Time per request:       352.308 [ms] (mean, across all concurrent requests)
Transfer rate:          1.21 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0  180 387.8      0     999
Processing:   344 5161 2055.9   6380    7983
Waiting:      344 5160 2056.0   6380    7982
Total:        345 5341 2069.2   6386    7983

Percentage of the requests served within a certain time (ms)
  50%   6386
  66%   6399
  75%   6402
  80%   6408
  90%   7710
  95%   7766
  98%   7983
  99%   7983
 100%   7983 (longest request) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T04:52:58.600

为了补充肖恩的回答：

基准是无用的。他们展示了你想看到的东西。他们没有显示真实的图片。如果您的应用程序所做的只是对 google 的代理请求，那么事件服务器确实是一个不错的选择（node.js 或基于 EventMachine 的服务器）。但通常你想做的不止于此。这就是 Rails 更好的地方。满足所有可能需求的宝石，熟悉的顺序代码（与回调意大利面条相反），丰富的工具，我可以继续。

在选择一种技术而不是另一种技术时，请评估所有方面，而不仅仅是代理请求的速度（除非您再次构建代理服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:41:09.550

您正在使用 Webrick 进行测试。结果是无效的，因为 Webrick 一次只能处理请求。你应该使用thin之类的东西，它建立在eventmachine之上，可以一次处理多个请求。您在所有并发请求中的每个请求时间、传输速率和连接时间将显着提高，从而做出这种改变。

您还应该记住，由于 Google 的网络延迟，每次运行之间的请求时间会有所不同。您应该多次查看这些数字以获得可以比较的平均值。

最后，您可能不会在基准测试中看到 Node 和 Rails 之间的巨大差异。

# moq - 如何最小化 LinkQ 扩展方法

> ID：10527500
> 
> 赞同：-1
> 
> 时间：2012-05-10T04:27:50.267
> 
> 标签：moq

如何将 OfType 起订量返回

```
class A
{ 
  public void iterate()
  {
    foreach (var aTool in Handler.Tools.OfType<IDrawTool>())
    {
      //some code
    }
  }
}

//tools implementes both interface ITool and IDrawTool
//wanted to get the tool which implements the IDrawTool from the 
//Handler.Tools<ITool> list

Mock<List<ITool>> aToolMockList = new Mock<ITool>();
Mock<IDrawTool> adrawToolMock = new Mock<IDrawTool>();
aToolMockList.Setup(list => list.OfType<IDrawTool>()).Returns((IEnumerable<IDrawTool>)  adrawToolMock .Object); 
```

但是`OfType`抛出异常`setup on a non-member method`

我应该覆盖这个吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:38:27.177

```
List<ITool> aToolMockList = new List<ITool>();
Mock<IDrawTool> adrawToolMock = new Mock<IDrawTool>();
Mock<ITool> aToolMock = new Mock<ITool>;
//additional setups
aToolMockList.Add(adrawToolMock.object);
aToolMockList.Add(aToolMock.object);
//
A a = new A(aToolMockList);
A.iterate();
//
adrawToolMock.Toolwork.Verify(Times.Once);
aToolMock.Toolwork.Verify(Times.Never); 
```

类似的东西:)

# javascript - 如何在 Javascript 中编写阻塞同步方法？

> ID：10527503
> 
> 赞同：9
> 
> 时间：2012-05-10T04:27:57.923
> 
> 标签：javascript, blocking, synchronous

我正在尝试模拟一种需要很长时间才能进行测试的方法，但找不到在 Javascript 中执行此操作的好方法。除了写一个很长的for循环之外还有什么好的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T04:38:44.753

[检查时间的循环](http://devcheater.com/)怎么样？

```
function sleep(milliSeconds){
    var startTime = new Date().getTime();                    // get the current time
    while (new Date().getTime() < startTime + milliSeconds); // hog cpu until time's up
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-30T17:48:04.400

如果您可以使用较新的 await/await 语法：

```
function sleep (time) {
  return new Promise((resolve) => setTimeout(resolve, time));
}

async function example() {
    await sleep(4000);
    return 1;
}

console.log(await example()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T04:35:40.507

您可以对服务器进行同步 AJAX 调用，从而根据脚本的请求将响应延迟一定的时间。但是请注意，此方法在 Firefox 中不起作用，因为它不支持同步 AJAX 调用。

只需在客户端使用这个简单的功能：

```
function sleep(microseconds) {
    var request = new XMLHttpRequest;
    request.open("GET", "/sleep.php?time=" + milliseconds);
    request.send();
} 
```

`sleep.php`服务器端的代码：

```
usleep(intval($_GET("sleep"))); 
```

现在您可以在 JavaScript（Firefox 除外）中创建阻塞同步函数，如下所示：

```
alert("Hello");
sleep(1000000); // sleep for 1 second
alert("World"); 
```

# iphone - 在 SplitViewController 中保持选中 MasterTableView 行

> ID：10527504
> 
> 赞同：1
> 
> 时间：2012-05-10T04:28:14.177
> 
> 标签：iphone, uitableview, uisplitviewcontroller

在我的 SplitViewController 中，基于 DetailViewController 中的操作，我使用 NSNotificationCenter 更新 MasterViewController 行，基本上是这样的：

[保持 MasterViewController 和 DetailViewController 同步](https://stackoverflow.com/questions/9316595/keeping-masterviewcontroller-and-detailviewcontroller-in-sync/10527023#10527023)

问题是，一旦对 MasterViewController 的行进行了更新，就不再选择该行。当我使用 splitViews 查看 Apple 的 iPad 应用程序时，例如 Note 应用程序，总是选择一行。我想做同样的事情，所以我的两张桌子之间的一切都保持同步。因为我有 tableView 的 indexPath，所以我可以手动`setSelected:YES animated:NO`在行上，但我仍然看到所选行的蓝色突出显示在再次设置之前闪烁。我不想要那个。

主视图控制器：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        Scene *object = [[[DataManager sharedInstance] sceneArray] objectAtIndex:indexPath.row];
        self.detailViewController.detailItem = object;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:33:49.093

这是关键 - 在 UITableViewController 上设置此属性：

```
self.clearsSelectionOnViewWillAppear = NO; 
```

# jquery - 我希望我的 Jquery UI 可折叠选项卡在被选中时自动向下滚动页面

> ID：10527506
> 
> 赞同：1
> 
> 时间：2012-05-10T04:28:20.983
> 
> 标签：jquery, jquery-ui, tabs, scroll, autoscroll

我正在使用 Jquery UI 选项卡小部件，我的选项卡是可折叠的，并以折叠状态开始。选项卡在加载时出现在页面底部。当用户单击选项卡时，我希望页面在页面上自动向下滚动，以便选项卡标题现在位于页面顶部并且展开的选项卡内容可见。现在，当用户单击选项卡以展开内容时，页面根本不滚动，并且用户在不使用滚动条的情况下无法看到展开的内容。

这是代码：

```
<script type="text/javascript">
$(function() {
$( "#tabs" ).tabs({
collapsible: true,
selected: -1
});
});
</script>
<div id="tabs">
<ul><li>heres my tab title</li></ul>
<div id="tab title">
tab content goes here
</div>
</div> 
```

感谢您提前提供任何帮助。我只想让页面自动滚动到类似于锚点的内容。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:32:22.647

你可以试试这个叫做[scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)的插件或者使用 window.scrollTo()。如果您通过 jquery 谷歌滚动到插件，还有其他几个。这是一个如何使用[scrollTo](http://webdesignerwall.com/tutorials/scrollto-posts-with-jquery)的示例。

`onAfter`之后扩展你的 div。

# dynamic - 哪个表包含 Microsoft Dynamic GP 中的货币十进制名称

> ID：10527511
> 
> 赞同：0
> 
> 时间：2012-05-10T04:28:46.393
> 
> 标签：dynamic, dynamics-gp, econnect

包含哪些表货币十进制值。请提供 Microsoft 动态 gp 表名称。通过这种方式，我们可以在 GP Tools->setup->Financial->Multicurrency 中设置 Decimal 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:04:47.820

在表 CM20200 中查找列 DECPLCUR ，它包含货币 ID 的小数位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:48:29.953

```
USE TWO

SELECT * 
FROM sysobjects o, syscolumns c
WHERE o.id = c.id AND o.type = 'U' 
AND c.name = 'DECPLCUR'
ORDER BY o.name 
```

上面的 sql 脚本将为您提供在“TWO”测试公司数据库中具有小数位字段的所有表。

# python - 在 Heroku 上为 Django 配置 gunicorn

> ID：10527512
> 
> 赞同：6
> 
> 时间：2012-05-10T04:28:55.550
> 
> 标签：python, django, heroku, gunicorn

我正在尝试在 Heroku 上设置一个测试 Django 项目。遵循[此处](http://blog.abhiomkar.in/2011/09/17/deploying-django-on-heroku-mac-os-x/)和[Heroku 入门](https://devcenter.heroku.com/articles/python#declare_process_types_with_foremanprocfile)中的建议，我尝试使用`gunicorn`而不是 Django 开发服务器。

这是我第一次尝试 Procfile：

```
web: gunicorn_django --workers=4 --bind=0.0.0.0:$PORT my_project/settings.py
worker: python my_project/manage.py celeryd -E -B --loglevel=INFO 
```

这给了我这个错误：

```
ImportError: Could not import settings 'settings.py' (Is it on sys.path?): No module named py 
```

我决定采取不同的方式并遵循[这里](http://v3.mike.tig.as/blog/2012/02/13/deploying-django-on-heroku/)的建议。现在我的 Procfile 看起来像这样：

```
web: gunicorn_django -b 0.0.0.0:\$PORT -w 9 -k gevent --max-requests 250 --preload my_project.settings 
```

（我还更新了我的需求文件以包含 gevent。）它给了我同样的错误：

```
ImportError: Could not import settings 
```

最后，我只是将其设置为`settings`：

```
web: gunicorn_django -b 0.0.0.0:\$PORT -w 9 -k gevent --max-requests 250 --preload settings 
```

但现在我得到这个错误：

```
Error: django project not found 
```

我的 Django 项目的设置方式是该`settings.py`文件位于 repo 的父目录中——我没有另一个目录下的 Django 项目。它与 virtualenv 和 git 文件处于同一级别。那会是个问题吗？我确定我在做一些简单的错误 - 任何帮助将不胜感激。

* * *

如果我按照 Heroku [here](https://devcenter.heroku.com/articles/django)的说明将 Procfile 更改为：

```
web: gunicorn hellodjango.wsgi -b 0.0.0.0:$PORT 
```

什么都没有发生——日志中没有错误，但没有运行任何进程，应用程序看起来就像死在水中一样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T00:32:02.533

我刚刚遇到了同样的问题。在您从 Heroku 指南复制的 procfile 中，更改`hellodjango.wsgi`为`yourproject.wsgi`

看起来我们都时不时地成为盲目复制粘贴的受害者，但在你（和我）的辩护中，看起来实际上没有打开 *.wsgi 文件，这只是你向 gunicorn 发出你想要它的信号的方式运行你的 django 项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T15:46:05.197

我遇到了和你一样的问题。我最终能够让它工作的方式是使用 django app gunicorn。

我将 gunicorn 添加到 django settings.py

```
'gunicorn', 
```

然后我将它用作我的 Procfile 中的 Web 条目。

```
web: python manage.py run_gunicorn -b 0.0.0.0:\$PORT -w 9 -k gevent --max-requests 250 --preload 
```

如果您使用与我不同的目录结构，您可能需要更改 .manage.py。我的应用在 /app 中，我的 python 路径也是 /app。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T21:56:47.577

我遇到了这个问题，不得不直接指向 python 路径，然后设置设置[参考](https://github.com/benoitc/gunicorn/issues/322#issuecomment-5178494)。

最后我的 Procfile 看起来像这样：

```
web: gunicorn_django --pythonpath=/app/project --settings=settings 
```

我必须运行`heroku run`它来显示 env 变量，这就是我能够找到`/app`我添加到我的项目名称的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:37:02.630

`requirements.txt`根文件夹中是否有一个（包含单词`django`），以及一个`settings.py`？这些似乎是 Django 应用程序检测的要求，如此[处](https://devcenter.heroku.com/articles/python-support#django_applications)所述。

# binary - 十六进制到 C 中的 bin

> ID：10527516
> 
> 赞同：0
> 
> 时间：2012-05-10T04:29:05.303
> 
> 标签：binary, hex

我正在尝试将十六进制转换为 bin。如果我调用 bits(0x101) 它会打印 00011，这显然是错误的。我很确定它在 for 循环中。有任何想法吗？？

```
int hextobin (int n){
   char buffer[33];

   if(n==0) {
       putchar('0');
       return 0;
   }

   char *cp = buffer + 32;
   *cp = 0;
   for(int i =0;i <=sizeof(n); i++){
      --cp;
      if(n & 1) *cp = '1';
      else *cp = '0';
      n >>= i;
    }
   printf(cp);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:34:11.157

一旦您将最后`1`一位移出`n`，它就会变成零，并且您的循环中止，即使还有一些位要处理。

帮自己一个忙……正确缩进你的代码。正确格式化后，它更容易阅读/调试。

# c# - 如何将带有 .MDF 文件（Sql 2008）的现有 ASP.NET MVC 3 项目迁移到 Windows Azure 模拟器（使用 SQL Azure）

> ID：10527517
> 
> 赞同：1
> 
> 时间：2012-05-10T04:29:06.397
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, azure, azure-sql-database

我在 Visual Studio 2010、ASP.NET MVC 3 中有现有项目，现有数据库使用 .mdf (SQL 2008 Express)。做了一些谷歌搜索后，我很困惑，因为资源太多。你能帮我指出简单的教程链接吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T05:43:39.850

首先，这是一个大问题，您必须分部分工作才能完成所有工作。以下步骤是在您确实订阅了 Windows Azure 并且对 ASP.net、MVC、SQL 和 VS2010 有基本了解的情况下编写的。

第 1 步：安装 Windows Azure SDK 1.6 [http://go.microsoft.com/fwlink/?LinkID=234939&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=234939&clcid=0x409)

第 2 步：之后，打开您的 MVC3 应用程序，当您右键单击解决方案时，您会发现一个新选项“**添加 Windows Azure 部署项目**”，选择它。

您将看到在您的解决方案名称中创建了一个新的 Windows Azure 项目 your_application_name.Azure（默认）已创建。此时，如果您将 Azure 项目作为“**启动**”应用程序并运行它，您的 MVC3 应用程序将在 Windows Azure Compute Emulator 中运行。让 SQL Server 相关代码完好无损，您的代码实际上将与现有 SQL Server 一起使用。

第 3 步：验证您的代码是否存在任何问题并修复它。请务必在 Compute Emulator 中进行测试，现在是时候通过您的 Windows Azure 项目了解服务配置和服务定义了。

第 4 步：一旦您的 MVC3 应用程序在计算模拟器中运行，请继续将 SQL 服务器替换为 SQL Azure。请按照此处的分步详细信息进行操作：

[http://msdn.microsoft.com/en-us/hh285881](http://msdn.microsoft.com/en-us/hh285881)

第 5 步：配置 SQL Azure 后，您只需（仅）需要更改 web.config 中的连接字符串，指向 SQL Azure。

[http://msdn.microsoft.com/en-us/library/windowsazure/ee336282](http://msdn.microsoft.com/en-us/library/windowsazure/ee336282)

第 6 步：现在，如果您在 Compute Emulator 中运行 MVC3 应用程序，您可以验证它是否连接到 SQL Azure 并验证一切正常。

第 7 步：最后现在打包您的应用程序并部署到 Windows Azure 以进行部署和最终测试。分步详细信息位于此处：

[http://msdn.microsoft.com/en-us/spazuretrainingcourse_introtowindowsazurelabvs2010_topic4#_Toc297905245](http://msdn.microsoft.com/en-us/spazuretrainingcourse_introtowindowsazurelabvs2010_topic4#_Toc297905245)

* * *

第 0 步：如果您有时间，我建议您先按照以下链接中的说明完成此练习，以了解有关 MVC、ASP.NET Web 角色、SQL Azure 和部署过程的大部分基本信息： [https://www。 windowsazure.com/en-us/develop/net/tutorials/web-app-with-sql-azure/](https://www.windowsazure.com/en-us/develop/net/tutorials/web-app-with-sql-azure/)

# objective-c - 如何在 Objective C 中生成二维数组

> ID：10527521
> 
> 赞同：0
> 
> 时间：2012-05-10T04:29:56.240
> 
> 标签：objective-c, ios, xcode

我如何生成一个二维 NSMutable 数组，如下所示：

大批：

```
=>[item1]=>[item1a,item1b,item1c...]
=>[item2]=>[item2a,item2b,item2c...]
...
=>[item10]=>[item10a,item10b,item10c...] 
```

到目前为止，我只成功了 [item1]=>[item1a,item1b,item1c...]

当我尝试添加更多二维数组时，它会不断覆盖第一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T04:33:24.673

创建`NSMutableArray`并分配`NSMutableArray`s 作为它的对象。

例如：

```
NSMutableArray * myBig2dArray = [[NSMutableArray alloc] init];

// first internal array
NSMutableArray * internalElement = [[[NSMutableArray alloc] init] autorelease];
[internalElement addObject:@"First - First"];
[internalElement addObject:@"First - Second"];
[myBig2dArray addObject:internalElement];

// second internal array
internalElement = [[[NSMutableArray alloc] init] autorelease];
[internalElement addObject:@"Second - First"];
[internalElement addObject:@"Second - Second"];
[myBig2dArray addObject:internalElement]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T04:33:49.720

要制作二维数组，您将制作一个数组数组。

```
NSArray *2darray = [NSArray arrayWithObjects: [NSArray arrayWithObjects: @"one", @"two", nil], NSArray arrayWithObjects: @"one_2", @"two_2", nil]]; 
```

它变得非常冗长，但这是我知道如何做到这一点的方式。根据您的需要，一系列字典可能更适合您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:23:28.540

我写了一个`NSMutableArray`包装器，方便用作二维数组。它在 github 上可用，如下所示`CRL2DArray`。[https://github.com/tGilani/CRL2DArray](https://github.com/tGilani/CRL2DArray)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T10:44:16.587

首先你要在 .h 文件上设置一个 NSMutableDictionary

```
 @interface MSRCommonLogic : NSObject
        {
            NSMutableDictionary *twoDimensionArray;
        }

        then have to use following functions in .m file

        - (void)setValuesToArray :(int)rows cols:(int) col value:(id)value
        {
            if(!twoDimensionArray)
            {
                twoDimensionArray =[[NSMutableDictionary alloc]init];
            }

            NSString *strKey=[NSString stringWithFormat:@"%dVs%d",rows,col];
            [twoDimensionArray setObject:value forKey:strKey];

        }

        - (id)getValueFromArray :(int)rows cols:(int) col
        {
            NSString *strKey=[NSString stringWithFormat:@"%dVs%d",rows,col];
            return  [twoDimensionArray valueForKey:strKey];
        } 
```

# epub - 请帮助我了解 epubcheck 的输出

> ID：10527522
> 
> 赞同：1
> 
> 时间：2012-05-10T04:30:11.653
> 
> 标签：epub

我正在修改我购买的电子书。我遇到了 epubcheck 发现的错误。错误是：

```
/path/to/ebook/file.html(43,53): element "blockquote" not allowed here; expected the element end-tag, text or element "a", "abbr", "acronym", "applet", "b", "bdo", "big", "br", "cite", "code", "del", "dfn", "em", "i", "iframe", "img", "ins", "kbd", "map", "noscript", "ns:svg", "object", "q", "samp", "script", "small", "span", "strong", "sub", "sup", "tt" or "var" (with xmlns:ns="http://www.w3.org/2000/svg") 
```

有问题的文件行`43`如下所示：

```
<h4 class="calibre41"><blockquote class="calibre42"><span class="calibre2">SUGGESTIONS FOR GETTING THE MOST FROM YOUR STUDY OF THE SCRIPTURES AND OF THIS COMPANION VOLUME</span></blockquote></h4><div class="calibre43"> </div> 
```

我收到*很多*类似的消息，但我不知道它们是什么意思。有人可以帮助我了解这条线有什么问题，以便我可以修复它（以及许多其他问题）吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:36:53.870

`<blockquote>`标签内不允许有标签`<h4>`。此规则通常适用于 HTML，而不仅仅是 epub。更改标记以使其有效，方法是替换`<blockquote>`为允许的标记之一，或将其删除。注意：如果您不保留该`class`属性，您可能会丢失一些 CSS 样式。`<blockquote>`如果标签是明确的样式，你可能会丢失它。

# python - 来自 time.strftime() 的间歇性错误日期

> ID：10527523
> 
> 赞同：1
> 
> 时间：2012-05-10T04:30:13.650
> 
> 标签：python, google-app-engine

我有一个仍然在 python2.5 运行时运行的 Appengine 应用程序，这意味着它是单线程的。我有一个学校课程：

```
class School(db.Model):
    ...
    dateformat=db.StringProperty(default='%a %e %b',indexed=False) # For bookings
    timeformat=db.StringProperty(default='%l:%M%P',indexed=False) # For bookings
    def date(self,t):
        return time.strftime(self.dateformat,time.gmtime(t))
    def datetime(self,bt,et=None):
        return time.strftime(self.dateformat+' '+self.timeformat,time.gmtime(bt))+\
                (time.strftime(' - '+self.timeformat,time.gmtime(et)) if et else '')
    def time(self,t):
        return time.strftime(self.timeformat,time.gmtime(t)) 
```

然后，当我想以学校选择的格式格式化日期时，我会这样做：

```
s=School.get_by_id(the_id)
date_string=s.date(the_timestamp) 
```

非常偶尔，我得到一个正好是一周的约会。因此，我得到的不是“5 月 2 日星期三”，而是“5 月 9 日星期三”。在可能数万例中，上周已报告了 3 次。*整整*一个星期，没有任何其他时差。

多年来，我的代码的那部分没有任何变化，所以我不明白为什么会突然开始发生这种情况。因为它是单线程的，所以 strftime 不应该有问题，而且无论如何我都找不到任何关于它的线程问题的报告。

有任何想法吗？

# html - 选取框未在 Internet Explorer 中显示

> ID：10527528
> 
> 赞同：-3
> 
> 时间：2012-05-10T04:30:39.467
> 
> 标签：html, internet-explorer

我正在这个网站上工作：http: [//kolkata-web-design.co.in/MAX/](http://kolkata-web-design.co.in/MAX/)。

我在红色条带上做了一个选取框标签，以显示滚动文本“欢迎来到最大组”。它显示在所有浏览器中，但不在 Internet Explorer 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:21:24.793

正如几个人（包括我）观察到的选取框文本在 IE 上工作，我怀疑这是关于您正在使用的 IE 上的设置。至少如果我进入 Internet 设置，高级设置，在多媒体下有一个允许动画的复选框。显然，从这个意义上讲，选框被视为动画，因为当我选中复选框（默认情况下处于打开状态）并重新启动 IE 时，选框文本不存在（甚至不是静态文本）。

# lc3 - LC3 汇编语言

> ID：10527531
> 
> 赞同：1
> 
> 时间：2012-05-10T04:31:00.923
> 
> 标签：lc3

我正在尝试编写一个 LC3 汇编语言程序，它需要两个输入数字并打印出来`x * y = z`。

我可以让它为数字工作，`0-9`但是任何高于它的数字我都会得到奇怪的字母或符号。

另外，我怎样才能使它不仅可以每个输入1个输入，`GETC`而且可以输入两个数字，例如。`10 * 12= 120`? 任何帮助，将不胜感激！:)

这是我到目前为止所做的

```
 .ORIG x3000
AND R3, R3, #0 ;r3 stores the sum, set r3 to zero
AND R4, R4, #0 ;r4 is the counter
LD R5, INVERSE_ASCII_OFFSET ;inverse ascii offset
LD R6, DECIMAL_OFFSET ;decimal offset
;---------------------
;storing first input digits
LEA R0, display1 ;load the address of the 'display1' message string
PUTS ;Prints the message string
GETC ;get the first number
OUT ;print the first number
ADD R1, R0, #0 ;store input value(ascii) to r1
ADD R1, R1, R5 ;get real value of r1
;storing second input digits
LEA R0, display2 ;load the address of the 'display2' message string
PUTS ;Prints the message string
GETC ;get the first number
OUT ;print the first number
ADD R2, R0, #0 ;store input value(ascii) to r2
ADD R2, R2, R5 ;get real value of r2
;----------------------
ADD R4, R2, #0 ;fill counter with multiplier
MULTIPLICATION:
ADD R3, R3, R1 ;add to sum
ADD R4, R4, #-1 ;decrease counter by one
BRp MULTIPLICATION ;continue loop until multiplier is 0
LEA R0, stringResult
PUTS
ADD R0, R3, R6 ;move result to r0
OUT ;print result
HALT
display1 .STRINGZ "\nenter the 1st no.: "
display2 .STRINGZ "\nenter the 2nd no.: "
stringResult .STRINGZ "\nResult: "
INVERSE_ASCII_OFFSET .fill xFFD0 ; Negative of x0030.
DECIMAL_OFFSET .fill #48
.END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:42:14.940

您的显示功能通过将数字添加到基本 ascii 值来工作`'0'`。这是有效的，因为 ascii 表的排列方式很方便。例如，`'0' + 1 = '1'`，它等价于`0x30 + 1 = 0x31`。但是，如果您可能发现`'0' + 12 = '<'`. 这是因为`'0' = 0x30`，所以`0x30 + 12 (0xC) = 0x3C`。查看 ascii 图表，我们可以看到`0x3C = '<'`。也就是说，这是仅打印出单个数字的有效方法。

这两个问题的答案在于编写一个迭代处理数字并用它们形成数字的例程。换句话说，您将需要一个循环来确定下一个要打印的字符并打印它。

# c# - 尝试隐藏最后一列失败并出现错误“无法将对象移出工作表”

> ID：10527533
> 
> 赞同：0
> 
> 时间：2012-05-10T04:31:28.047
> 
> 标签：c#, excel, excel-interop

所以出于某种目的，我需要在 excel 的最后一列中插入注释。

由于我不希望用户能够看到我插入的评论，因此我尝试隐藏该列。

不知何故，它给了我一个错误“无法将对象移出工作表”

常量.cs

```
HIDDEN_DATA_COL =  16384; // Which is last column in excel 2007 
```

MyUtil.cs

```
Excel.Range range = ws.get_Range(ws.Cells[1, Constants.HIDDEN_DATA_COL], ws.Cells[1, Constants.HIDDEN_DATA_COL]);
 range.AddComment(result);
 range.Comment.Shape.Width = 50;
 range.Comment.Shape.Height = 50;
 range.EntireColumn.Hidden = true; 
```

我也做了一些试验：

*   删除 range.EntireColumn.Hidden ，代码就可以了。
*   将 HIDDEN_DATA_COL 更改为小于 10 的数字也会使运行时错误消失。

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:31:05.340

在工作表的最后一列中“*隐藏”注释***可能不是解决原始问题的最佳方法**。

您在代码中遇到了无法将对象移出工作表错误的问题，但即使您设法做到了，您的用户在尝试隐藏或插入任何列时也会遇到它。

以下是 Microsoft 处理此问题的建议：http: [//support.microsoft.com/kb/211769](http://support.microsoft.com/kb/211769)

* * *

由于这可能是[XY 问题](http://www.perlmonks.org/?node_id=542341)的情况，我将建议一些解决方法。

实际上，在您的情况下，您可能会将您的评论***隐藏*在其他地方**，例如在任何隐藏的单元格中，如果您希望用户看不到它，只需保护您的工作表不被隐藏单元格。

如果您不想保护，您可以将您的评论存储在另一个工作表中，并使用 VBA 将其`xlVeryHidden property`隐藏（用户无法在没有 VBA 的情况下取消隐藏工作表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:46:12.310

通过首先选择评论列修复。

```
 range.AddComment(result);
 range.Comment.Shape.Width = 50;
 range.Comment.Shape.Height = 50;
 range.Columns.Cells.Select();
 range.Columns.EntireColumn.Select();
 range.Columns.EntireColumn.Hidden = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-19T19:31:33.157

问题不仅在于隐藏列，还在于减小列的宽度，出现相同的错误。修复=获取评论信息，将其发布/粘贴到不同的单元格中以保存。然后删除评论，调整列并为您之前所在的单元格再次创建评论。对所需工作表上的每个评论执行此操作。希望这会有所帮助，享受。大EEE :)

# android - Android：在 SDCard 上发送带图片的彩信

> ID：10527536
> 
> 赞同：0
> 
> 时间：2012-05-10T04:31:56.500
> 
> 标签：android, mms

您好，我正在尝试通过彩信从 sdcard 发送图像（png）。我正在使用 ACTION_SEND 意图，但它似乎不起作用。

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.putExtra("sms_body", "Sent using Spootur");
sendIntent.setType("image/png");
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(imagePath));
startActivityForResult(sendIntent, SEND_ACTIVITY); 
```

我知道 imagePath 的值为 /mnt/sdcard/Spootur/Pictures/6799abd6-df22-4017-89e1-d9e529790fd8.png，它指向一个现有文件。

选择菜单出现时，我选择我的消息传递应用程序（处理程序），但它给了我一个“抱歉，您无法将此图片添加到您的消息”错误。我尝试使用其他应用程序，我得到的压倒性结果是我给它的资源是“不受支持的文件类型”。我不知道为什么会发生这种情况，因为我明确地将 MIME 类型设置为 .png 图像。

有任何想法吗？以下是有问题的各种应用程序的一些 logcat 日志：

电子邮件：

```
05-10 00:29:35.752: W/ActivityManager(343): Trying to launch com.android.email/.activity.MessageCompose
05-10 00:29:35.962: I/Database(24487): sqlite returned: error code = 0, msg = Recovered 12 frames from WAL file /data/data/com.android.email/databases/webview.db-wal
05-10 00:29:35.972: I/Database(24487): sqlite returned: error code = 0, msg = Recovered 26 frames from WAL file /data/data/com.android.email/databases/webviewCache.db-wal
05-10 00:29:36.072: W/System.err(24487):    at com.android.email.activity.MessageCompose.addAttachment(MessageCompose.java:6886)
05-10 00:29:36.072: W/System.err(24487):    at com.android.email.activity.MessageCompose.addAttachment(MessageCompose.java:6750)
05-10 00:29:36.072: W/System.err(24487):    at com.android.email.activity.MessageCompose.addAttachment(MessageCompose.java:7112)
05-10 00:29:36.072: W/System.err(24487):    at com.android.email.activity.MessageCompose.initFromIntent(MessageCompose.java:9160)
05-10 00:29:36.072: W/System.err(24487):    at com.android.email.activity.MessageCompose.onCreate(MessageCompose.java:854)
05-10 00:29:36.102: W/System.err(24487):    at com.android.email.Email.startServiceIfNeed(Email.java:659)
05-10 00:29:36.102: W/System.err(24487):    at com.android.email.Email.isServiceConnected(Email.java:723)
05-10 00:29:36.102: W/System.err(24487):    at com.android.email.Email.callWhenServiceConnected(Email.java:791)
05-10 00:29:36.102: W/System.err(24487):    at com.android.email.Email.registerListener(Email.java:883)
05-10 00:29:36.102: W/System.err(24487):    at com.android.email.Email.registerListener(Email.java:879)
05-10 00:29:36.102: W/System.err(24487):    at com.android.email.combined.SevenUtils.addListener(SevenUtils.java:35)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Controller.addSevenListener(Controller.java:283)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Controller.addResultCallback(Controller.java:275)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.activity.MessageCompose.onResume(MessageCompose.java:2457)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Email.startServiceIfNeed(Email.java:659)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Email.callWhenServiceConnected(Email.java:797)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Email.registerListener(Email.java:883)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Email.registerListener(Email.java:879)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.combined.SevenUtils.addListener(SevenUtils.java:35)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Controller.addSevenListener(Controller.java:283)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.Controller.addResultCallback(Controller.java:275)
05-10 00:29:36.112: W/System.err(24487):    at com.android.email.activity.MessageCompose.onResume(MessageCompose.java:2457)
05-10 00:29:36.132: D/InputTransport(343): Input channel constructed: name='40710c08 com.android.email/com.android.email.activity.MessageCompose (server)', ashmemFd=288, receivePipeFd=336, sendPipeFd=328
05-10 00:29:36.132: D/InputTransport(343): Input channel constructed: name='40710c08 com.android.email/com.android.email.activity.MessageCompose (client)', ashmemFd=290, receivePipeFd=320, sendPipeFd=337
05-10 00:29:36.132: D/InputTransport(343): Input channel destroyed: name='40710c08 com.android.email/com.android.email.activity.MessageCompose (client)', ashmemFd=290, receivePipeFd=320, sendPipeFd=337
05-10 00:29:36.132: D/InputTransport(24487): Input channel constructed: name='40710c08 com.android.email/com.android.email.activity.MessageCompose (client)', ashmemFd=74, receivePipeFd=75, sendPipeFd=76
05-10 00:29:36.243: I/WindowManager(343):   CREATE SURFACE Surface(name=com.android.email/com.android.email.activity.MessageCompose, identity=1887, mNativeSurface=0) IN SESSION android.view.SurfaceSession@40a3fc10: pid=24487 format=-1 flags=0x0 / Window{40710c08 com.android.email/com.android.email.activity.MessageCompose paused=false}
05-10 00:29:36.353: I/ActivityManager(343): Displayed com.android.email/.activity.MessageCompose: +604ms 
```

消息：

```
05-10 00:28:18.887: D/Mms/ConversationComposer(24350): [main][end]    initComposeMessage ------ 
05-10 00:28:18.917: V/Mms/ConversationComposer(24350): [main]getComposeMessageStatus(),state=0
05-10 00:28:18.917: V/Mms/ComposeMessage(24350): [main]initMessageList()
05-10 00:28:18.987: V/Mms/ComposeMessage(24350): [main]loadMessageContent()
05-10 00:28:19.007: W/System.err(24350):    at com.android.mms.ui.MessageUtils.isAnimatedImage(MessageUtils.java:2265)
05-10 00:28:19.007: W/System.err(24350):    at com.android.mms.data.WorkingMessage.setAttachment(WorkingMessage.java:601)
05-10 00:28:19.007: W/System.err(24350):    at com.android.mms.ui.ComposeMessage.addImage(ComposeMessage.java:6756)
05-10 00:28:19.007: W/System.err(24350):    at com.android.mms.ui.ComposeMessage.addMedia(ComposeMessage.java:6894)
05-10 00:28:19.007: W/System.err(24350):    at com.android.mms.ui.ComposeMessage.addMedia(ComposeMessage.java:6961)
05-10 00:28:19.007: W/System.err(24350):    at com.android.mms.ui.ComposeMessage.access$7500(ComposeMessage.java:198)
05-10 00:28:19.007: W/System.err(24350):    at com.android.mms.ui.ComposeMessage$45.run(ComposeMessage.java:4680)
05-10 00:28:19.007: E/Mms/media(24350):     at com.android.mms.data.WorkingMessage.changeMedia(WorkingMessage.java:2202)
05-10 00:28:19.007: E/Mms/media(24350):     at com.android.mms.data.WorkingMessage.setAttachment(WorkingMessage.java:658)
05-10 00:28:19.007: E/Mms/media(24350):     at com.android.mms.ui.ComposeMessage.addImage(ComposeMessage.java:6756)
05-10 00:28:19.007: E/Mms/media(24350):     at com.android.mms.ui.ComposeMessage.addMedia(ComposeMessage.java:6894)
05-10 00:28:19.007: E/Mms/media(24350):     at com.android.mms.ui.ComposeMessage.addMedia(ComposeMessage.java:6961)
05-10 00:28:19.007: E/Mms/media(24350):     at com.android.mms.ui.ComposeMessage.access$7500(ComposeMessage.java:198)
05-10 00:28:19.007: E/Mms/media(24350):     at com.android.mms.ui.ComposeMessage$45.run(ComposeMessage.java:4680) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:44:48.320

我最终找到了解决方案：它正在寻找文件，而不是内容流或直接 URI。这使它对我有用：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.putExtra("sms_body", "Sent using Spootur");
sendIntent.setType("image/png");
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(imagePath)));
startActivityForResult(sendIntent, SEND_ACTIVITY); 
```

希望这可以帮助某人

# java - 如何根据Java中定义的模板验证excel文件

> ID：10527543
> 
> 赞同：0
> 
> 时间：2012-05-10T04:33:16.190
> 
> 标签：java, excel, apache-poi

我有一个 excel 模板 (2003/2007) 供最终用户输入他的数据。然后输入文件将被导入我的系统。如何根据我在 Java 中定义的模板验证导入的文件？

# clearcase - 如何在明确的情况下检索跨基线修改的文件列表

> ID：10527550
> 
> 赞同：3
> 
> 时间：2012-05-10T04:34:32.210
> 
> 标签：clearcase, cleartool

我需要检索已跨基线签入的所有文件的列表以及所有者名称。我尝试使用 cleartool lsact 命令：

但是，此命令仅针对一项任务进行获取，使用起来有点麻烦。如果我指定两个基线，是否有一个命令可以检索所有任务？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:25:01.390

像这样的命令：

```
 cleartool diffbl -act bl1@\apvob bl2@\apvob 
```

将为您提供在基线 bl1 和 bl2 之间具有新版本的活动列表。

但是，要获取*文件*列表（即元素，如文件或目录中的元素，而不是所有更新*版本*中的版本，即使对于同一个文件），最好的方法是：

*   确保这些基线是“完整的”基线：如果需要，将它们提升到完整：

```
    cleartool chbl -full bl1@\apvob
    cleartool chbl -full bl2@\apvob

```

（如果他们已经满了，这个命令不会做任何事情）

*   列出在不同版本上具有`bl1`和 标签的所有元素：`bl2`

```
cleartool find -all -element '{lbtype_sub(REL1) && lbtype_sub(REL2)}' ^
  -version '{(lbtype(REL1) && !lbtype(REL2)) || ^
  (lbtype(REL2) && !lbtype(REL1))}' -print

```

请参阅“[查找标签之间的更改](https://stackoverflow.com/questions/2462407/find-changes-between-labels/2464604#2464604)”。
请注意，最后一个问题还提到了与 ClearCase 一起打包的“**报告生成器**” ，如果您使用的是涉及 GUI 而不是 CLI（命令行）的解决方案，这很有趣：

![报告生成器](../Images/d424c2d8fa0d2b45564401dbaf0849f2.png)

同样，如果这些基线已满，您可以根据需要使用它来列出（在 下`Elements/Labels`）“ `Elements Changed Between Two Labels`”或“ `Versions Changed Between Two Labels`”。

# javascript - Broken Code - Fusion Tables 地图

> ID：10527553
> 
> 赞同：0
> 
> 时间：2012-05-10T04:35:16.583
> 
> 标签：javascript, google-fusion-tables

我不知道为什么，但地图画布没有出现在屏幕上...我使用 Fusion TablesLayer Wizard 2.0 添加过滤器（基于文本的搜索）。也许问题出在 IF...ELSE 语句上。或者一些小的语法错误。请帮忙！

```
<!DOCTYPE html>
<html>
<head>
<style>
   #map-canvas { width:500px; height:400px; }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/apijs?sensor=false">     </script>
<script type="text/javascript">
   var map;
   var layer10;

   function initialize() {
   map = new google.maps.Map(document.getElementById('map-canvas'), {
   center: new google.maps.LatLng(-30.08870187538118, -51.16813659667969),
   zoom: 11,
   mapTypeId: google.maps.MapTypeId.ROADMAP
});
   layer10 = new google.maps.FusionTablesLayer({
     query: {
     select: "'ENDERECO_GOOGLE'",
     from: 3767057
     },
   map: map
   });
   }

//the function to activate filters   
   function changeMap10() {
   var searchString = document.getElementById('search-string-10').value.replace(/'/g, "\\'");
   var filter = document.getElementById('filter').value.replace(/'/g, "\\'");
   if (filter == "TURNO"){
     layer10.setOptions({
       query: {
       select: "'ENDERECO_GOOGLE'",
       from: 3767057,
       }  
     });
   } 
     layer10.setOptions({
       query: {
       select: "'ENDERECO_GOOGLE'",
       from: 3767057,
       where: "'TURNO'" = '" + searchString + "'"
       }  
     });
   else if (filter == "DIA_SEMANA"){
     layer10.setOptions({
       query: {
       select: "'ENDERECO_GOOGLE'",
       from: 3767057,
       }
     });
   }
     layer10.setOptions({
       query: {
       from: 3767057,
       where: "'DIA_SEMANA'" = '" + searchString + "'"
       }        
     }); 
   }
   google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
   <div id="map-canvas"></div>
   <div style="margin-top: 10px;">
   <label>Choose data!</label><input type="text" id="search-string-10">
   <input type="button" onclick="changeMap10()" value="Search">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:32:42.423

您的 if/else 语句有点混淆：语句之间有代码。如果我理解您的代码正确，您想根据`search-string-10`输入更改查询的 where 子句。我简化了你的代码：

```
function changeMap10() {
    var searchString = document.getElementById('search-string-10').value.replace(/'/g, "\\'");
    var filter = document.getElementById('filter').value.replace(/'/g, "\\'");
    var whereClause = '';
    if (filter == "TURNO") {
        whereClause = "'TURNO' = '" + searchString + "'";
    }
    else if (filter == "DIA_SEMANA") {
        whereClause = "'DIA_SEMANA' = '" + searchString + "'";
    }
    layer10.setOptions({
        query: {
            select: "'ENDERECO_GOOGLE'",
            from: 3767057,
            where: whereClause
        }
    });
}​ 
```

我将[您的示例放在 jsFiddle 上](http://jsfiddle.net/odi86/jWh2L/)并进行了一些修改，例如添加过滤器选择框或使用`contains ignoring case`而不是`=`.

# java - 如何使用 Java 与 .aspx 交互？

> ID：10527560
> 
> 赞同：0
> 
> 时间：2012-05-10T04:36:04.500
> 
> 标签：java, asp.net, web-scraping

我想编写一个能够将信息输入到 asp 中的 java 程序，然后读回从 asp 返回的数据。

有没有人对如何去做这件事有任何建议？

有比网页抓取更简单/更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:54:28.330

为了让 Java 代码在 ASP 中工作，它必须是 CLR 可以读取的编译字节码。对“Java”+“.NET”的快速谷歌搜索得到了这个：[http ://www.janetdev.org/](http://www.janetdev.org/)

你可以做的另一件事就是学习 C#。如果您已经了解 Java，则几乎没有学习曲线。

# design-patterns - 类可以在其容器上保留引用吗？

> ID：10527565
> 
> 赞同：4
> 
> 时间：2012-05-10T04:36:22.707
> 
> 标签：design-patterns, architecture, containers

我正在创建一个非常简单的 RTS 游戏作为个人项目。到目前为止，我已经做了一些实验性工作，我的瓷砖、相机和单位移动工作正常 :)

但是，我想为单位选择系统添加功能，这带来了一些问题。我有一个包含单位列表的 Player 类，但我想创建一个 Squad 类，主要是为了制作一些组和属性快捷方式以轻松访问这些组。如果我想在组中添加一个单位，我必须先从当前组中删除该单位，然后再将其添加到新组中。AddUnit 方法将在 Squad 类中，但我不想在所有其他小队中搜索我添加的每个新单位以检查和删除该单位。如果我在 Unit 类中保留对所有者小队的引用怎么办？然后它会更容易被删除，但这可以吗？如果我想将一个单位转移给另一个玩家，也会出现同样的问题，我可以在单位中保留对玩家的引用吗？嗯，我知道我可以，但这可以接受吗？有替代品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:42:07.137

是的，这是可以接受的，最好有 2 路参考。从容器到物品，从物品到容器。当您对项目（示例中的单元）执行某些操作时，无需在所有容器中搜索此项目即可轻松获取其容器。从单元获取参考会更简单、更快、更易读——它只是更好的设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T06:04:09.670

如果您的语言支持它，您应该使用弱引用，以便可以正确释放容器，而无需将单位的小队显式设置为 null，这很容易出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:45:25.743

虽然我同意@dantuch 的说法，即它通常是可以接受的，但此时只有您可以决定这是否是一个好主意，具体取决于您希望将单位和小队（以及玩家）的概念结合起来的紧密程度。

谈论没有小队的单位有意义吗？还是没有播放器？

我意识到我正在用其他问题来回答您的问题，但是尝试以抽象的方式考虑您的模型，您将意识到将这些概念紧密结合是否可以接受，或者是否最好使用上述观察者模式之类的东西在评论中。

# javascript - 基于祖先类将 CSS 样式应用于子级

> ID：10527568
> 
> 赞同：1
> 
> 时间：2012-05-10T04:36:33.580
> 
> 标签：javascript, css

好的 - 我有一个非常基本的页面，我试图保持尽可能简单。我有一个“主题选择器”，可以在浅色和深色主题之间进行选择，并根据它设置正文的类，基本上是从白色/黑色背景/文本更改。我的盒子里面有不同的背景颜色，也需要改变......有没有办法根据身体标签的类（或任何祖先）来改变一个孩子的应用类（也许很多被移除） ) 使用 CSS？

简单演示：

```
<body class="dark">
    <div class="container">
        <div class="differentBG">THIS IS THE BOX I WANT TO CHANGE!</div>
    </div>
</body> 
```

我知道我可以使用 js（我正在使用 d3）将一个类应用到所有的孩子，但我想尽可能多地保留在 CSS 中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:38:22.710

您可以将祖先类的规则建立在 body 标记上，就像标记中的任何其他标记一样：

```
body.dark .differentBG {
  background: black;
  color: white;
} 
```

*只有*当有一个“黑暗”类时，我们的`differentBG`类才会应用黑色背景。*`<body>`*

 *```
body.light .differentBG {
  background: white;
  color: black
} 
```

当有一个“光”类时，我们的`differentBG`类将应用白色背景。`<body>`

作为一个额外的琐事，许多开发人员使用这种技术来设置他们的“JavaScript Disabled”样式：

```
body.nojs .dynamicElement {
  display: none;
} 
```

然后在页面加载时使用 JavaScript 删除该类。[Modernizr](http://modernizr.com)也使用此方法，尽管它向`<html>`元素添加类以指示用户代理支持的功能。*

# xml - 我想使用 Maven Dendenpent Project 的 spring context-xml

> ID：10527569
> 
> 赞同：1
> 
> 时间：2012-05-10T04:36:36.753
> 
> 标签：xml, spring, maven

我有两个项目，每个项目在各自的资源文件夹中都有 Spring XML 文件。

但是一个项目被其他项目引用，比如导入jar。

如何在 jar 中使用 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:04:10.170

您可以使用`classpath*:/application-context.xml` - 替换`application-context.xml`为您的文件名。

如果您的 Spring XML 文件名为 applicaiton-context.xml，请将其移动到两个项目中的 spring 文件夹下。然后，您可以像这样使用两个 XML 文件创建上下文

```
ApplicationContext ctx = new ClasspathXmlApplicationContext("classpath*:/spring/application-context.xml") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:56:49.653

您可以使用 jar 中的 xml 和项目中的 xml：

```
ApplicationContext context = new ClassPathXmlApplicationContext( new String[] {
                "classpath*:spring/applicationContext-*.xml"}); 
```

请在此处查看我的[Question1](https://stackoverflow.com/questions/10523945/spring-applicationcontext-with-multiple-xml-files-from-jar)和[Question2](https://stackoverflow.com/questions/10519622/wiring-multiple-independent-spring-applications-using-maven)。

# google-visualization - 所有数据类型字符串的折线图？时间线？

> ID：10527571
> 
> 赞同：0
> 
> 时间：2012-05-10T04:36:51.193
> 
> 标签：google-visualization

我想制作一张我所在城市的市议会成员随时间变化的图表。我设想这有点像折线图。x 轴是年。有九个市议会席位，所以会有九条直线，每条线都会随着时间的推移显示谁是市议会成员（可能通过不同颜色的线段或通过在鼠标悬停上显示他们的名字）。也许这就像一条时间线。

当我绘制城市预算时，由于年份和城市预算都是“数字”类型，这个经典的折线图效果很好。

对于这个新图表，我传递了所有数据类型“字符串”，因为它们是人名，而 Google Charts API 给出了错误：“轴 #0 的数据列不能属于字符串类型”

我怎样才能制作这个图表？（我不仅想绘制预算盈余或赤字或抢劫数量等数字数据，还想将[在另一个图表中]当时负责的人联系起来。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:20:27.770

在 PHP 中，我查询了我的 mySQL 数据库并生成了一个 JSON 对象，格式为 Google Chart API 需要接收，以便随着时间的推移制作水平线，显示名称 onHover，如下所示：

```
$conn = mysql_connect("x","y","z");
mysql_select_db("a",$conn);

$sql = "SELECT year,d_mayor,d_council1,d_council2,d_council3 
FROM metrics WHERE year 
IN ('1998','1999','2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012')";

$sth = mysql_query($sql, $conn) or die(mysql_error());

//start the json data in the format Google Chart js/API expects to receive it change
$JSONdata = "{
              \"cols\": [
                 {\"label\":\"Year\",\"type\":\"string\"},
                    {\"label\":\"City Council 1\",\"type\":\"number\"},
                    {\"label\":\"City Council 2\",\"type\":\"number\"},
                    {\"label\":\"City Council 3\",\"type\":\"number\"},
                    {\"label\":\"Mayor\",\"type\":\"number\"}
                  ],
              \"rows\": [";

//loop through the db query result set and put into the chart cell values (note last ojbect in array has "," behind it but its working)
while($r = mysql_fetch_assoc($sth)) {
   $JSONdata .= "{\"c\":[{\"v\": " . $r['year'] . "},  {\"v\": 1, \"f\": \"" . $r['d_council1'] . "\"}, {\"v\": 2, \"f\": \"" . $r['d_council2'] . "\"}, {\"v\": 3, \"f\": \"" . $r['d_council3'] . "\"}, {\"v\": 10, \"f\": \"" . $r['d_mayor'] . "\"},]},";
}    

//end the json data/object literal with the correct syntax
$JSONdata .= "]}";

echo $JSONdata;

mysql_close($conn); 
```

# c# - 如何知道winform表单是否被垃圾收集？

> ID：10527573
> 
> 赞同：0
> 
> 时间：2012-05-10T04:36:59.040
> 
> 标签：c#, .net, winforms, garbage-collection

我正在使用 C#，但在 VB.NET 中可能相同。在 C++ 中，我只需在对象析构函数上设置一个断点，以了解它何时/是否被删除/释放。我知道在winforms中，基类调用SupressFinalize，因此永远不会调用表单析构函数，所以我想我不能那样做。 **是否有另一种方法可以知道对象是否已被垃圾收集？** 这似乎是一个 catch-22，因为如果有你可能需要一个引用来检查，但是通过持有该引用，收集的垃圾不会粉碎它。

我已经阅读了[哪些策略和工具对在 .NET 中查找内存泄漏有用？](https://stackoverflow.com/questions/134086/what-strategies-and-tools-are-useful-for-finding-memory-leaks-in-net)，我知道有一些工具和/或框架可以处理这个“大图”，我相信几周后我会尝试其中的几种方法。现在我只是有一种非常强烈的感觉，我可能有与未删除的表单有关的泄漏，所以只想检查这件事（我想知道只是为了知道）。

我知道我可以观看 Dispose，但我很确定 Dispose 可以被调用，但最终表单对象仍然存在。为了测试该理论，我创建了一个已知问题，我在表单中注册了回调事件，然后关闭了表单而不取消注册。果然， Dispose 被调用（并且“disposing”是真的），但后来当事件被触发时，它仍然在我应该已经被处理的表单内达到了我的断点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:10:11.037

这里确实有两个问题：

至于您最初的问题，您可以使用 Wea​​kReference 来监视对象的存在而不影响其生命周期。

您的基本问题表明您对垃圾收集是什么以及它是如何工作的有误解。垃圾收集的重点是，您永远不应该关心对象是否已被收集。相反，您应该关注对对象的引用，以及它们是否已被重新分配或无法从根引用中访问。不要担心实例，担心对它的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:26:39.643

托管语言的整个概念是，您不需要关心对象何时实际被垃圾回收。大量的时间和精力投入到 GC 中，以确保它不会收集不应该收集的对象，不会留下它应该收集的对象（当它决定通过它在）并且所有这些都合理有效地完成。这意味着，如果一个对象消耗大量托管资源并且还实现了 IDisposable（例如，DataTable 或 DataSet）被释放，它仍然会消耗一定的内存，并且释放它不会使其更快地被垃圾收集（尽管您仍然应该处理它以确保任何托管资源消失）。

当您不理会它并让它完成它的工作而不是通过尝试（例如，手动导致收集发生）来干扰它时，GC 的构建效果最好。这有时对调试目的或了解您的程序/语言很有用，但它实际上从不属于生产应用程序。

处置与垃圾收集或收集对象无关。处置是用于处理持有未管理资源的托管对象（或持有未管理资源的另一个对象）的机制。处理对象是告诉它清除该非托管资源，但这与垃圾收集器释放该对象的托管资源无关。析构函数在那里，因此您在释放非托管资源之前不释放托管资源，但在释放托管资源之前清理非托管资源（通过处置）是完全可以接受的（实际上应该总是发生）。

现在，考虑到所有这些，程序仍然有可能发生内存泄漏，但是您确实需要先问自己几个问题。泄漏量有多大？每次我们执行函数 X 等时，它是一次性的、连续的吗？程序消耗如此多的内存会造成破坏（内存不足，导致其他程序内存不足等），这可能会发生在程序的常见或合法使用中吗？通常你不需要开始问这些类型的问题，直到你开始出现内存不足异常，或者注意到你开始用完一个不应该出现的程序的物理内存。如果您注意到这些问题，那么您可以开始四处寻找实现 IDisposable 且未被处置的对象，看看您是否“

对不起，文字墙。

# sql - SQL - JOIN 上有多个子句？

> ID：10527576
> 
> 赞同：4
> 
> 时间：2012-05-10T04:37:19.900
> 
> 标签：sql

让我先发布我的数据库结构。表：monsterdata - [http://prntscr.com/92eet](http://prntscr.com/92eet) 表：user_team - [http://prntscr.com/92eef](http://prntscr.com/92eef)

我希望 user_team(m1,m2,m3,m4,m5,m6) 中的数据与 monsterdata.id 匹配，以便我可以检索其他信息。我设法做的是只检索一个数据

```
 SELECT * FROM monsterdata LEFT JOIN user_team ON monsterdata.id=user_team.m1 
```

但我真正想做的是，将 m2,m3,m4,m5,m6 包含到 monsterdata.id=user_team.X

这可能很愚蠢，但我更愚蠢的是不知道如何做到这一点。 **谢谢您的帮助！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T04:42:06.370

```
 SELECT * 
    FROM monsterdata LEFT JOIN user_team 
    ON monsterdata.id=user_team.m1 AND/OR 
    monsterdata.id=user_team.m2 AND/OR ... 
```

给你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:42:10.427

尝试这个。

```
SELECT * FROM monsterdata 
LEFT JOIN user_team 
ON (monsterdata.id=user_team.m1
OR monsterdata.id=user_team.m2
OR monsterdata.id=user_team.m3
OR monsterdata.id=user_team.m4
OR monsterdata.id=user_team.m5
OR monsterdata.id=user_team.m6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:48:02.737

您可以使用此条件：

```
SELECT * FROM monsterdata 
LEFT JOIN user_team 
ON monsterdata.id = COALESCE(
    user_team.m1,user_team.m2,user_team.m3,
    user_team.m4,user_team.m5,user_team.m6) 
```

# php - 有没有更安全的方法使用 PDO 来做到这一点，同时避免不必要的查询？

> ID：10527579
> 
> 赞同：1
> 
> 时间：2012-05-10T04:37:31.960
> 
> 标签：php, mysql, pdo, innodb, sql-injection

我正在使用类似于下面的代码插入 mysql DB（使用 PDO。）目的是仅使用一个查询插入数据。不幸的是，它违背了使用 PDO 的目的，因为它没有使用 bindValue 或 param。我想编写代码以使其更安全但仍避免不必要的查询。谁能推荐如何做到这一点？

**注意1：**每次访问程序时，集合中的问题数量可能会发生变化（即`$totalQ`每次运行时可能会有所不同）。

```
try 
{
    for ($i=0; $i<$totalQ; $i++)
    { 
        $stqid[$i][0]=$lastInsertValue;     //instance         PDO::PARAM_INT
        $stqid[$i][1]=$jqid[$i][0];          //question number  PDO::PARAM_INT
        $stqid[$i][2]=$jqid[$i][5];          //result           PDO::PARAM_INT
        $stqid[$i][3]=$jqid[$i][3];          //question start   PDO::PARAM_STR 
        $stqid[$i][4]=$jqid[$i][4];          //question finish  PDO::PARAM_STR 
    }

    $values = array();
    foreach ($stqid as $rowValues) 
    {
        foreach ($rowValues as $key => $rowValue) 
        {
            $rowValues[$key] = $rowValues[$key];  
        }

        $values[] = "(" . implode(', ', $rowValues) . ")";
    }

    $count = $dbh->exec("INSERT INTO results(instance, qid, result, start, finish) VALUES  ".implode (', ', $values));  
    $dbh = null;
} 
```

**注意 2：**开始和结束的时间格式中的逗号可能会导致 implode 语句出错。我刚刚添加了它们，所以你可以看到我想要实现的目标。

任何帮助将非常感激。谢谢。

**编辑：**虽然我选择了克里斯的回答，但我非常感谢 Alix Axel 的建议。帮助很大，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:55:09.377

像这样的东西怎么样：

```
try 
{
    for ($i=0; $i<$totalQ; $i++)
    { 
        $stqid[$i][0]=$lastInsertValue;     //instance         PDO::PARAM_INT
        $stqid[$i][1]=$jaid[$i][0];          //question number  PDO::PARAM_INT
        $stqid[$i][2]=$jaid[$i][5];          //result           PDO::PARAM_INT
        $stqid[$i][3]=$jqid[$i][3];          //question start   PDO::PARAM_STR 
        $stqid[$i][4]=$jqid[$i][4];          //question finish  PDO::PARAM_STR 
    }

    $values = null;

    foreach ($stqid as $rowValues) 
    {
        $values .= vsprintf('(%s, %s, %s, %s, %s) ', array_map(array($dbh, 'quote'), $rowValues));
    }

    $count = $dbh->exec('INSERT INTO results (instance, qid, result, start, finish) VALUES ' . rtrim($values) . ';');  
    $dbh = null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:04:01.400

未经测试。仍然使用准备好的语句。

```
$numColumns = 5; //or $numColumns = count($stqid[0]);
$rowPlaceholder = join(', ', array_fill(0, $numColumns, '?'));
$rowPlaceholders = array_fill(0, $totalQ, "($rowPlaceholder)");
echo $sql = "INSERT INTO results(instance, qid, result, start, finish) VALUES " . join(", \n", $rowPlaceholders);
$flat = call_user_func_array('array_merge', $stqid);
$stmt = $dbh->prepare($sql);
$stmt->execute($flat); 
```

# circular-buffer - 为什么环形缓冲区大小必须是 2 的幂？

> ID：10527581
> 
> 赞同：14
> 
> 时间：2012-05-10T04:38:10.960
> 
> 标签：circular-buffer

为什么环形缓冲区大小必须是 2 的幂？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-14T15:21:48.787

使用下面详述的方法必须是 2 的幂。不必如此。

一种常见的方法类似于“if (index >= size) { index = size - index; }”（大小为 10，索引为 10，结果索引为 0）。相对于以下方法，这更慢并且容易出错。

使用 2 的幂可以让我们利用以下优势：

```
size = 32
bin(size) => '00100000'

mask = size - 1;
bin(mask) => '00011111' 
```

使用按位和应用此掩码，随着索引的增长，我们可以仅隔离包含 0 - 31 范围内的数字的位：

```
index = 4
bin(4 & mask) => '00000100' (4)

# index 32 wraps.  note here that we do no bounds checking, 
# no manipulation of the index is necessary.  we can simply 
# and safely use the result.
index = 32
bin(index & mask) => '00000000' (0)

index = 33
bin(index & mask) => '00000001' (1)

index = 64
bin(index & mask) => '00000000' (0)

index = 65
bin(index & mask) => '00000001' (1) 
```

这种方法不需要比较，没有分支，并且是安全的（结果索引总是在范围内）。它具有不破坏信息的额外好处；虽然索引 65 指向元素 1，但我仍然保留索引在逻辑上为 65 的信息（这证明非常有用）。

我还想补充一点，当索引增长到 3456237（缓冲区中的地址 13）时，这与索引增长到 3 时一样有效。

我知道我迟到了，我什至不确定我是如何找到这个问题的 :-) 希望这会有所帮助。

# jquery - jQuery AJAX 移除 URL 参数

> ID：10527588
> 
> 赞同：1
> 
> 时间：2012-05-10T04:39:00.087
> 
> 标签：jquery, ajax

我这里有一个保存 main.php 内容数据的代码

查看某个列表时，我使用 php 生成的 URL 参数。

例如：main.php?v=323&p=1

现在的问题是，我希望在进行更改后保存内容时将其删除。这是我用于保存表单内容的代码。

```
$.ajax({
  type:'POST',
  url:'/AJAXsave.php',
  cache:false,
  async:true,
  global:false,
  dataType:"html",
  data:$('#form1contents').serialize(),
  timeout:10000
}); 
```

我希望在完成 ajax 帖子后删除这些参数 (?v=323&p=1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:31:53.493

您可以使用它，但只能在 Chrome、Safari、FF4+ 和 IE10pp4+ 中使用！

window.history.pushState("对象或字符串", "标题", "/new-url");

[参考 MDN](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:35:06.613

只需将“完成”或“成功”功能添加到您的 Ajax 调用中：

```
$.ajax({
  type:'POST',
  url:'/AJAXsave.php',
  cache:false,
  async:true,
  global:false,
  dataType:"html",
  data:$('#form1contents').serialize(),
  timeout:10000,
  complete: function (xhr, status)
  {
      if(status == 'success')
          location.href = 'main.php';
  }
}); 
```

根据 jQuery API： complete - 请求完成时调用的函数（在执行成功和错误回调之后）。该函数传递了两个参数：jqXHR（在 jQuery 1.4.x 中，XMLHTTPRequest）对象和对请求状态进行分类的字符串（“成功”、“未修改”、“错误”、“超时”、“中止”，或“解析器错误”）。从 jQuery 1.5 开始，complete 设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。[jQuery 阿贾克斯](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T12:39:45.827

我只是想在收到请求后删除 URL 参数。这对我有用。

window.history.pushState("对象或字符串", "标题", "/new-url");

# ruby-on-rails-3 - 回形针处理器 - 如何在我自己的处理器中使用回形针记录器？

> ID：10527589
> 
> 赞同：2
> 
> 时间：2012-05-10T04:39:00.087
> 
> 标签：ruby-on-rails-3, paperclip

我正在尝试编写自己的回形针处理器，但我应该如何登录回形针记录器？

我尝试了以下，`log 'here is the processor'`没有放出任何东西。我该怎么做？

```
module Paperclip
  class MyProcessor < Processor
    include Paperclip::Logger

    def initialize(file, options = {}, attachment = nil)
      super
      @format         = options[:format]
      @current_format = File.extname(@file.path)
      @basename       = File.basename(@file.path, @current_format)
    end

    def make
      log 'here is the processor'
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T15:00:20.403

如果在你的处理器中你需要记录，log 方法是 Paperclip 模块的一部分

```
Paperclip.log "Log something" 
```

[https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/logger.rb](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/logger.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:46:59.347

也许你需要这样称呼它：

```
def make
  logger.log 'here is the processor'
end 
```

不可能在这里测试它 - 所以不能向你保证任何事情。:)

# java - 为什么这两段相似的代码会产生不同的结果？

> ID：10527593
> 
> 赞同：7
> 
> 时间：2012-05-10T04:39:30.770
> 
> 标签：java, python

在过去的几个小时里，我一直在尝试使用 Python 作为初学者。我写了一个递归函数，它返回 recurse(x) 作为 x！在 Python 和 Java 中，比较两者。这两段代码是相同的，但出于某种原因，Python 的代码有效，而 Java 的代码无效。在 Python 中，我写道：

```
x = int(raw_input("Enter: "))

def recurse(num):
    if num != 0:
        num = num * recurse(num-1)
    else:
        return 1

    return num 

print recurse(x) 
```

其中变量*num*将自身乘以 num-1 直到达到 0，然后输出结果。在 Java 中，代码非常相似，只是更长：

```
public class Default {
    static Scanner input = new Scanner(System.in);
    public static void main(String[] args){

            System.out.print("Enter: ");
            int x = input.nextInt();
            System.out.print(recurse(x));

}

    public static int recurse(int num){

    if(num != 0){
    num = num * recurse(num - 1);
    } else {
        return 1;
    }

    return num;

} 
```

}

如果我输入 25，Python 代码返回 1.5511x10E25，这是正确答案，但 Java 代码返回 2,076,180,480，这不是正确答案，我不知道为什么。

两个代码都进行相同的过程：

*   检查 num 是否为零
*   如果 num 不为零
    *   num = num 乘以 num 的递归 - 1
*   如果 num 为零
    *   返回 1，结束递归调用堆栈，并导致每个返回的 num 开始相乘
*   返回号码

python中没有括号；我认为这以某种方式改变了一些事情，所以我从 Java 代码中删除了括号，但它并没有改变。将布尔值 (num != 0) 更改为 (num > 0 ) 也没有改变任何东西。将 if 语句添加到 else 提供了更多上下文，但值仍然相同。

在每个点打印*num*的值可以了解函数是如何出错的：

Python：

```
1
2
6
24
120
720
5040
40320
362880
3628800
39916800
479001600
6227020800
87178291200
1307674368000
20922789888000
355687428096000
6402373705728000
121645100408832000
2432902008176640000
51090942171709440000
1124000727777607680000
25852016738884976640000
620448401733239439360000
15511210043330985984000000
15511210043330985984000000 
```

稳步增长。在 Java 中：

```
 1
 2 
 6  
 24
 120 
 720
 5040
 40320
 362880
 3628800
 39916800
 479001600
 1932053504
 1278945280
 2004310016
 2004189184
-288522240
-898433024
 109641728
-2102132736 
-1195114496
-522715136
 862453760
-775946240
 2076180480
 2076180480 
```

不是稳定增长。事实上， num 返回*负数*，就好像函数返回负数一样，即使 num 不应该低于零。

Python 和 Java 代码都在执行相同的过程，但它们返回的值却大相径庭。为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T04:41:15.140

两个字——**整数溢出**

虽然不是 python 专家，但我认为它可以根据需要扩展整数类型的大小。

然而，在 Java 中，`int`类型的大小是固定的 - 32 位，并且由于`int`是有符号的，我们实际上只有 31 位来表示正数。一旦您分配的数字大于最大值，它就会溢出 int（即 - 没有地方可以表示整数）。

虽然在 C 语言中这种情况下的行为是未定义的，但在 Java 中它是明确定义的，它只占用至少 4 个字节的结果。

例如：

```
System.out.println(Integer.MAX_VALUE + 1);
// Integer.MAX_VALUE = 0x7fffffff 
```

结果是：

```
-2147483648
// 0x7fffffff + 1 = 0x800000000 
```

**编辑**

为了更清楚，这里是另一个例子。以下代码：

```
int a = 0x12345678;
int b = 0x12345678;
System.out.println("a*b as int multiplication (overflown) [DECIMAL]: " + (a*b));
System.out.println("a*b as int multiplication (overflown) [HEX]: 0x" + Integer.toHexString(a*b));
System.out.println("a*b as long multiplication (overflown) [DECIMAL]: " + ((long)a*b));
System.out.println("a*b as long multiplication (overflown) [HEX]: 0x" + Long.toHexString((long)a*b)); 
```

输出：

```
a*b as int multiplication (overflown) [DECIMAL]: 502585408
a*b as int multiplication (overflown) [HEX]: 0x1df4d840
a*b as long multiplication (overflown) [DECIMAL]: 93281312872650816
a*b as long multiplication (overflown) [HEX]: 0x14b66dc1df4d840 
```

并且可以看到第二个输出是4个输出中最少的4个字节

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:45:52.797

与 Java 不同，Python 内置了对无限精度的[长整数的支持。](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)在 Java 中，整数被限制为 32 位并且会[溢出](http://en.wikipedia.org/wiki/Integer_overflow)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T04:45:54.997

正如其他人已经写的那样，你会溢出；这些数字根本不适合 java 的数据类型表示。Python 具有内置的 bignum 功能，而 java 没有。

尝试一些较小的值，您会发现 java-code 工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T04:46:08.197

Java的`int`范围

int 4 个字节，有符号（二进制补码）。-2,147,483,648 至 2,147,483,647。像所有数字类型一样，int 可以转换为其他数字类型（byte、short、long、float、double）。当有损转换完成时（例如 int 到 byte），转换是以较小类型的长度为模完成的。

这里的范围`int`是有限的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T04:48:17.807

问题很简单..
因为java中整数的最大限制是`2147483647`你可以打印它`System.out.println(Integer.MAX_VALUE);` ，最小值是`System.out.println(Integer.MIN_VALUE);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T04:50:55.683

因为在 java 版本中，您将数字存储为`int`我认为是 32 位的数字。考虑您可以用两位二进制存储的最大（无符号）数字：11，即十进制数字 3。可以存储四位二进制的最大数字是 1111，即十进制的数字 15。32 位（有符号）数字不能存储大于 2,147,483,647 的任何内容。当您尝试存储一个大于此的数字时，它会突然返回并从负数开始计数。这称为溢出。

如果您想尝试存储更大的数字，请尝试长。

# android - 如何在Android中检查文档文件是否支持

> ID：10527595
> 
> 赞同：0
> 
> 时间：2012-05-10T04:39:41.253
> 
> 标签：android

```
String mimetype = ".docx\tapplication/vnd.openxmlformats-officedocument.wordprocessingml.document";
File file = new File(FilePath, filename);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), mimetype);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

我使用上面的代码来读取 .docx 文件。
如何检查应用程序是否支持文件格式？
如果没有，下面的消息：

```
Toast.makeText(this, "Not be supported.", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:42:15.077

做一个这样的函数并给它你的意图。它将检查是否有任何应用程序能够处理此意图。

```
private boolean isIntentLaunchable(Intent intent)
{
    PackageManager packageManager = getPackageManager();
    List<ResolveInfo> activities = packageManager.queryIntentActivities(intent, 0);

    if (activities.size() > 0) {
        return true;
    }

    return false;
} 
```

# javascript - 为光滑网格编写自定义格式化程序

> ID：10527596
> 
> 赞同：3
> 
> 时间：2012-05-10T04:39:45.137
> 
> 标签：javascript, slickgrid

在编写自定义单元格格式化程序时

```
 function PercentCompleteFormatter(row, cell, value, columnDef, dataContext) 
```

这是我们必须遵循的基本定义。我可以在光滑的网格中得到关于 dataContext 参数的解释。它实际代表什么。

确切的代码是

```
function PercentCompleteFormatter(row, cell, value, columnDef, dataContext) {
if (value == null || value === "") {
  return "-";
} else if (value < 50) {
  return "<span style='color:red;font-weight:bold;'>" + value + "%</span>";
} else {
  return "<span style='color:green'>" + value + "%</span>";
}
} 
```

我只想要上面代码中的 dataContext 代表什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:58:02.867

“dataContext”是正在呈现的行的单元格绑定到的数据项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T06:17:37.223

为了更简单，

我在定义我的 slickgrid 的地方编写了这个函数，然后将我的函数传递给了**格式化程序**

```
 function roundOffValuesFormatter (row, cell, value, columnDef, dataContext) {
        if(dataContext[cellID] || dataContext[cellID]) {
         return Math.round(value*100)/100;  
        } 
    } 
```

现在调用这个格式化程序，

```
{id:'cellID', field:'cellID', name:'Name', width:90, editor:Slick.Editors.Text, formatter: roundOffValuesFormatter} 
```

**现在，根据您的要求对其进行自定义。**

# php - PHP Mysql 图像显示

> ID：10527597
> 
> 赞同：-1
> 
> 时间：2012-05-10T04:39:46.653
> 
> 标签：php, mysql

我正在开发一个 php 画廊。我正在使用 php 显示来自 mysql db 的图像，但我的图像正在一张一张地显示。这意味着第一行中的第一张图像和第二行中的第二张图像。但我想将我的图像显示为每行 3 或 4 个。我可以进行哪些编码更改。我的 php 代码如下所示。

```
<?php 
    include_once("config.php");
    $result=mysql_query("SELECT * FROM images");
    while($res=mysql_fetch_array($result)){ ?>
        <table width='200'>
            <tr>
                <td><?php echo"<a href='indimage.php?imageid=$res[imageid]'>"?><?php echo $res['imagename']?><?php echo"</a>"?></td>
            </tr>
            <tr>
                <td>
                    <div id="news-image">
                        <?php echo"<a href='indimage.php?imageid=$res[imageid]'>"?>
                        <?php echo'<img src='.$res['image'].' width="250" height="100">'?><?php echo"</a>"?>
                    </div>
                </td>
            </tr>
        </table>
 <?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:47:54.607

[array_chunk()](http://php.net/manual/en/function.array-chunk.php)是一个函数，用于将数组拆分为 X 项的集合，以便您循环遍历而不必保留计数器（如果需要填充，您可以在列表中的最后一项上使用 array_pad()）

```
if($array = array_chunk(mysql_fetch_assoc($result),4))
{
  foreach($array as $row)
  {
    echo '<div class="row">';
    foreach($row as $col)
    {
      echo '<div class="item">' . $col['image'] . '</div>';
    }
    echo '</div>';
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:49:25.107

按照这个例子

```
<table>
<tr>
<?php
$i = 1;
do{
    echo "<td>" . $i . "</td>";
    //Num of Columns
    if( $i%3 == 0 ){
        echo "</tr><tr>";
    }

    $i++;
}while($i<=10);
?>
</tr>
<table> 
```

将返回您想要的结果..

![在此处输入图像描述](../Images/7564261fd41d9bf6507684e2493ed392.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:50:18.130

```
<?php 
include_once("config.php");
$result=mysql_query("SELECT * FROM images");
?>
<table>
<tr>
    <?php 
         $cnt = 0;
         while($res=mysql_fetch_array($result))
         { 
        if($cnt == 3){
        echo "</tr><tr>";
        }
          ?>
        <td>
    <table width='200'>
        <tr>
            <td><?php echo"<a href='indimage.php?imageid=$res[imageid]'>"?><?php echo $res['imagename']?><?php echo"</a>"?></td>
        </tr>
        <tr>
            <td>
                <div id="news-image">
                    <?php echo"<a href='indimage.php?imageid=$res[imageid]'>"?>
                    <?php echo'<img src='.$res['image'].' width="250" height="100">'?><?php echo"</a>"?>
                </div>
            </td>
        </tr>
    </table>
</td>
 <?php
$cnt++;
  }
 ?>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T04:59:26.827

您可以改为将图像输出为 div 列表，或者只是 div，然后使用 CSS 在两列中显示图像。你的布局不应该是硬连线的。

```
<style>
    div.gallery {
        width: 650px;
    }
    div.gallery ul li {
        list-style: none;
        float: left;
    }
    div.image {
        height: 500px;
        width: 300px;
    }
</style>
<div class="gallery">
    <ul>
        <li>
            <div class="image">
                <span class="image_title">Some title</span><br/>
                <img src="foo.png"/>
            </div>
        </li>
        <li>
            <div class="image">
                <span class="image_title">Another title</span><br/>
                <img src="bar.png"/>
            </div>
        </li>
        <li>
            <div class="image">
                <span class="image_title">Another title</span><br/>
                <img src="foo.png"/>
            </div>
        </li>
        <li>
            <div class="image">
                <span class="image_title">Another title</span><br/>
                <img src="bar.png"/>
            </div>
        </li>
        <li>
            <div class="image">
                <span class="image_title">Another title</span><br/>
                <img src="foo.png"/>
            </div>
        </li>
    </ul>
</div> 
```

结果：

![在此处输入图像描述](../Images/1223c0ab5d06ff6fdb2b928c8208208c.png)

您的代码应类似于：

```
<div class="gallery">
    <ul>

<?php 
include_once("config.php");
$result = mysql_query("SELECT * FROM images");
while($res = mysql_fetch_array($result)) {
?>
        <li>
            <div class="image">
                <a class="image_title" href="indimage.php?imageid=<?php echo $res['imageid']?>"><?php echo $res['imagename']?></a><br/>
                <a href="indimage.php?imageid=<?php echo $res['imageid']?>"><img src="<?php echo $res['image']?>" /></a>
            </div>
        </li>
<?php
}
?>
    </ul>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T04:46:14.280

您正在为每个图像输出一个表格。至少，您的代码应该更像这样：

```
<table>
<tr>
<?php while($res etc...) { ?>
<td>
   <img src="<?php echo ......?>" />
</td>
<?php } ?>
</tr>
</table> 
```

现在，您将在单个表格的单行中获取所有图像。使其具有多行留给 OP 作为练习。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T04:46:18.150

使用以下代码。

```
<?php 
include_once("config.php");
$result=mysql_query("SELECT * FROM images");
?>
<table>
<tr>
<?
$varcount=0;
while($res=mysql_fetch_array($result))
{
 $varcount++;
 if($varcount == 4) // Count of images per row. 3 or 4 
 {
      $varcount=0;
 ?>
  </tr><tr>
 <?
 } 
?>

 <td> 
 <table width='200'>
 <tr>
 <td><?php echo"<a href='indimage.php?imageid=$res[imageid]'>"?><?php echo $res['imagename']?><?php echo"</a>"?></td>
 </tr>
 <tr>
 <td>
 <div id="news-image">
 <?php echo"<a href='indimage.php?imageid=$res[imageid]'>"?>
 <?php echo'<img src='.$res['image'].' width="250" height="100">'?><?php echo"</a>"?>
 </div>
 </td>
 </tr>
 </table>
 </td> 
 <?php
 }
?> 
</tr>
</table> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-14T09:11:44.490

**这是我认为您想要的解决方案：共有三页。1\. index.php（有上传图片的表格） 2.upload.php（保存图片在目录和数据库中的路径） 3\. showimage.php（最后显示图片）**

这是代码 **（index.php）**

```
<form method="post" action="upload.php" enctype="multipart/form-data">

<label>Choose File to Upload:</label><br />

<input type="hidden" name="id" />

<input type="file" name="uploadimage" /><br />
<input type="submit" value="upload" />

</form> 
```

**（上传.php）**

```
<?php
$target_Folder = "upload/"; // directory where images will be saved

$target_Path = $target_Folder.basename( $_FILES['uploadimage']['name'] );

$savepath = $target_Path.basename( $_FILES['uploadimage']['name'] );

    $file_name = $_FILES['uploadimage']['name'];

    if(file_exists('upload/'.$file_name))
{
    echo "That File Already Exisit";
    }
    else
    {

        // Database 

        $con=mysqli_connect("localhost","user_name","pasword","database"); // Change it if required
        //Check Connection
        if(mysqli_connect_errno())
        {
            echo "Failed to connect to database" .     mysqli_connect_errno();
        }

        $sql = "INSERT INTO image (id,image, image_name)
                    VALUES ('$uid','$target_Folder$file_name','$file_name') ";

        if (!mysqli_query($con,$sql))
        {
            die('Error: ' . mysqli_error($con));
        }
        echo "1 record added successfully in the database";
        echo '<br />';
        mysqli_close($con);

        // Move the file into UPLOAD folder

        move_uploaded_file( $_FILES['uploadimage']['tmp_name'],     $target_Path );

        echo "File Uploaded <br />";
        echo 'File Successfully Uploaded to:&nbsp;' . $target_Path;
        echo '<br />';  
        echo 'File Name:&nbsp;' . $_FILES['uploadimage']['name'];
        echo'<br />';
        echo 'File Type:&nbsp;' . $_FILES['uploadimage']['type'];
        echo'<br />';
        echo 'File Size:&nbsp;' . $_FILES['uploadimage']['size'];

    }
?>

<a href="showimage.php">Show Image</a> 
```

**(showimage.php)**

```
<?php

$con=mysqli_connect("localhost","user_name","password","database_name"); // Change it if required

// Check connection
if (mysqli_connect_errno())
{
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con,"SELECT * FROM image " );

while($row = mysqli_fetch_array($result))
{
echo '<img src="' . $row['image'] . '" width="200" />';
echo'<br /><br />';  
}

mysqli_close($con);

?> 
```

**特征**

如果该名称文件已经存在，它将检查文件的名称，它不会上传文件并提醒用户。

**数据库结构**

id int(4) 自动增量 - image varchar(100) - image_name varchar(50)

# batch-file - 绝对路径：分隔路径并保存在字符串中

> ID：10527601
> 
> 赞同：0
> 
> 时间：2012-05-10T04:40:19.557
> 
> 标签：batch-file

使用批处理命令如何从字符串中获取文件夹路径/目录？

**例如，如果我有字符串“C:\user\blah\abc.txt”，我该如何拆分字符串以便只获取文件夹部分，即“C:\user\blah\”？**

如果在批处理文件的命令行中传递字符串“C:\user\blah\abc.txt”，我如何将该字符串拆分为文件夹部分？

```
REM // Grab "C:\user\blah\abc.txt" from the command line
SET path="%*" 
REM // The following doesn't successfully capture the "C:\user\blah\" part
SET justFolder=%path:~dp1% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:24:50.547

~dp 选项仅适用于批处理参数 (%1 %2 ...) 或 FOR 替换参数 (%%a %%b ...)。阅读`HELP CALL`。

因此，要实现您想要的，请尝试以下代码

```
call :setJustFolder "%*"
echo %justFolder%
goto :eof

:setJustFolder
set justFolder=%~dp1
goto :eof 
```

作为旁注，我个人的偏好是不要在用户输入的文件名周围添加“。我会将前面的代码简单地编码为

```
set justFolder=%~dp1
echo %justFolder% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:26:25.570

如果要从字符串或当前工作目录中获取路径几乎相同。

```
set "myPath=%~dp1"
echo %myPath% 
```

或者，如果您想从变量中获取它，您可以使用`FOR/F`.

```
set myPath=C:\windows\xyz.txt
for /F "delims=" %%A in ("%myPath%") do echo %%~dpA 
```

# ios - iOS5故事板中未分类的编译失败错误

> ID：10527602
> 
> 赞同：8
> 
> 时间：2012-05-10T04:40:40.470
> 
> 标签：ios, error-handling, storyboard

我在编译我的应用程序时遇到了一个非常奇怪的错误，就像下图一样，有人知道发生了什么吗？

![在此处输入图像描述](../Images/264606547cda4ae219ee6071ac90e09b.png)

日志中的错误：

> 错误：编译失败。
> 
> > ```
> > Underlying Errors:
> >     Description: Couldn't compile connection: <IBCocoaTouchOutletConnection:0x400d6f420 <IBProxyObject:0x400d6e080> => nameShow => <IBUILabel: 0x400c7e0c0>
> >     Description: Couldn't compile connection: <IBCocoaTouchOutletConnection:0x400d71200 <IBProxyObject:0x400d6e080> => catShow => <IBUILabel: 0x400bf9280>
> >     Description: Couldn't compile connection: <IBCocoaTouchOutletConnection:0x400d6ffc0 <IBProxyObject:0x400d6e080> => numShow => <IBUILabel: 0x400be0380> 
> > ```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T12:56:55.370

问题是你有链接到原型单元的 IBOutlets。请注意，原型单元就是：原型。因此，您可以拥有每个实例的多个实例。因此 Xcode 不会知道将 IBOutlet 变量链接到哪个实例。

您必须等到单元格在 cellForRowAtIndexPath 中实例化后才能分配属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:49:05.270

这可能会有所帮助。关键是您需要在 IB 中为您的 Storyboard outlet 设置 Tag 值。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  UITableViewCell *cell = [[UITableViewCell alloc] init];

  cell = [tableView dequeueReusableCellWithIdentifier:@"LogRecordCell"];

  cmiJournal = (CMIJournal *)[fetchedResultsController objectAtIndexPath:indexPath];

  UILabel *useJName = (UILabel *)[cell.contentView viewWithTag:101];
  UILabel *useJTime = (UILabel *)[cell.contentView viewWithTag:102];
  UITextView *useJRecord = (UITextView *)[cell.contentView viewWithTag:103];

  useJName.text = cmiJournal.cmiJournalName;
  useJTime.text = fnlDate;
  useJRecord.text = cmiJournal.cmiJournalRecord;

  return cell;
} 
```

# asp.net - 在 ASP.NET 和 EntLib 5.0 中实现滚动日志文件

> ID：10527603
> 
> 赞同：0
> 
> 时间：2012-05-10T04:40:43.003
> 
> 标签：asp.net, enterprise-library

我正在使用 EntLib 5 创建滚动平面文件。这不使用滚动平面文件跟踪侦听器，而是使用平面文件跟踪侦听器并在代码中进行了一些修改。由于其固有设计存在问题，因此未使用滚动平面文件跟踪侦听器，因此不符合此处的要求。

这是配置部分：

```
 <configuration>
    <configSections>
        <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true"/>
        <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                    <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                    <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                </sectionGroup>
            </sectionGroup>
        </sectionGroup>
    </configSections>
    <loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
  <listeners>
   <add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    fileName="./Logs/MyLog.log" formatter="Text Formatter" />
  </listeners>
  <formatters>
   <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    template="Timestamp: {timestamp(local)}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
    name="Text Formatter" />
  </formatters>
  <categorySources>
   <add switchValue="All" name="General">
    <listeners>
     <add name="Flat File Trace Listener" />
    </listeners>
   </add>
  </categorySources>
  <specialSources>
   <allEvents switchValue="All" name="All Events" />
   <notProcessed switchValue="All" name="Unprocessed Category" />
   <errors switchValue="All" name="Logging Errors &amp; Warnings">
    <listeners>
     <add name="Flat File Trace Listener" />
    </listeners>
   </errors>
  </specialSources>
 </loggingConfiguration>
    <appSettings>
        <add key="LogFolder" value="./Logs"/>
        <add key="LogFileName" value="MyLog.log"/>
    </appSettings>
    <system.web> 
```

然后我使用以下代码创建一个静态类来配置日志记录过程：

```
public static class LoggingHelper {
private static string date = String.Format(System.Globalization.CultureInfo.InvariantCulture, "{0:yyyyMMdd}", DateTime.Now);

public static void SetLogFile(string logFileFolder,string logFileName) {
    if (!string.IsNullOrEmpty(logFileName)) {
        string strfileName = logFileFolder + "/" + date + logFileName;
        LoggingHelper.SetTraceLogPath(strfileName, "FlatFile TraceListener", "General", "My Login System");
        LoggingHelper.WriteLogFile("General", "Log file path " + logFileFolder + "/" + logFileName, " My Login System");
    }
}  

public static void SetTraceLogPath(string logFile, string logFileName, string category, string message) {
    ConfigurationFileMap configFileMap = new ConfigurationFileMap();
    configFileMap.MachineConfigFilename = "Web.config";
    Configuration entLibConfig = WebConfigurationManager.OpenWebConfiguration("/ASP.NET_Logging");
    LoggingSettings loggingSettings = (LoggingSettings)entLibConfig.GetSection(LoggingSettings.SectionName);

    FlatFileTraceListenerData data = loggingSettings.TraceListeners.Get("Flat File Trace Listener") as FlatFileTraceListenerData;
    data.FileName = logFile;
    entLibConfig.Save();
    LogEntry objLog = new LogEntry();
    objLog.TimeStamp = System.DateTime.Now;
    objLog.Categories.Add(category);
    objLog.Message = message;
    objLog.Priority = 1;
    Logger.Write(objLog);

}

public static void WriteLogFile(string category, string msg, string title) {
    try {
        LogEntry le = new LogEntry();
        le.TimeStamp = System.DateTime.Now;
        le.Categories.Add(category);
        le.Severity = TraceEventType.Information;
        le.Priority = 1;
        le.Message = msg;
        le.Title = title;
        le.Priority = 1;
        Logger.Write(le);
    } catch (LoggingException ex) {
        LoggingHelper.WriteLogFile("General", "Error in writing log file " + ex.ToString(), "My Login System");
    }
}} 
```

在 Application_Start 方法中调用的 SetLogFile 是 Global.aspx 页面，如下所示：

```
void Application_Start(object sender, EventArgs e) 
{
    // Code that runs on application startup
    LoggingHelper.SetLogFile(ConfigurationSettings.AppSettings["LogFolder"].Trim     (),      ConfigurationSettings.AppSettings["LogFileName"].Trim());
    LoggingHelper.WriteLogFile("General", "*** Application_Start ***", "");
} 
```

然后我只需在需要记录的地方调用 WriteLogFile 方法，如下所示：

```
protected void btn_Page2_Click(object sender, EventArgs e) {
    LoggingHelper.WriteLogFile("General", "btn_Page2_Click on Default.aspx", "");

    Response.Redirect("SecongPage.aspx");

} 
```

这工作正常，但对于一个小问题。第一次访问该网页时，它不会创建 Logfilename.log 格式的日志文件，它只是创建 MyLog.log 或 Web.config 中指定的任何名称，并在指定文件夹之外创建日志文件，在此案例“日志”，第一次。对于后续请求，它将在配置的文件夹中创建具有所需文件名的所需文件。这种模式每天重复，第一个请求的第二天，日志将写入昨天的文件，从下一个请求开始，创建一个具有今天日期的新文件，所有日志消息都将写入该文件。

我在我的代码中做了什么导致这种情况发生？

我们使用上面的代码，稍作改动，就可以毫无问题地登录我们的 WinForms 应用程序。

该网站当前未部署在 IIS 上。由于这是一项正在进行的工作，我们使用的是 VS 2008 的内置开发服务器。另一个值得关注的问题是代码在启动期间至少尝试更新一次 Web.config。不知道是不是这个方法！

这是一个非常简单的示例，有两页，第一页有一个按钮，点击后会跳转到第二页。我正在尝试每天实施日志文件，而 EntLib 附带的滚动平面文件不符合要求，因为它不会每天创建具有当天所需日期的文件。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:21:30.743

经过长时间的寻找。这就是我想出的。这个想法是使用 FlatFile Trace 侦听器而不是内置的滚动平面文件。

**免责声明：** *我的一位同事有这个代码，他不记得从哪里得到它，所以如果您是所有者或编写了类似的代码，那么感谢您。*

**请不要投票给这个答案，因为我不是它的所有者。尽管如此，它可以帮助任何寻找类似实现的人**

这使用 EntLib 4，但也可以与 EntLib 5 一起使用。

这是我的 Web.config 中的日志记录部分：

```
<loggingConfiguration name="Logging Application Block" tracingEnabled="true"
defaultCategory="User" logWarningsWhenNoCategoriesMatch="true">
<listeners>
  <add fileName="trace.log" header="----------------------------------------"
    footer="----------------------------------------" formatter=""
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    traceOutputOptions="None" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    name="FlatFile TraceListener" />
  <add fileName="MyLoggingSystem.log" header="" footer="" formatter="Text Formatter"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    traceOutputOptions="None" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    name="MyLoggingApp FlatFile TraceListener " />
  <add listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.WmiTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    traceOutputOptions="None" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.WmiTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    name="WMI TraceListener" />
</listeners>
<formatters>
  <add template="[{timestamp}]  [{category}] {message}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    name="Text Formatter" />
</formatters>
<categorySources>
  <add switchValue="All" name="Developer">
    <listeners>
      <add name="FlatFile TraceListener" />
    </listeners>
  </add>
  <add switchValue="All" name="General" />
  <add switchValue="All" name="Instrumentation">
    <listeners>
      <add name="WMI TraceListener" />
    </listeners>
  </add>
  <add switchValue="All" name="EskoLoggingApp">
    <listeners>
      <add name="MyLogging FlatFile TraceListener " />
    </listeners>
  </add>
  <add switchValue="All" name="User">
    <listeners>
      <add name="FlatFile TraceListener" />
    </listeners>
  </add>
</categorySources>
<specialSources>
  <allEvents switchValue="All" name="All Events" />
  <notProcessed switchValue="All" name="Unprocessed Category" />
  <errors switchValue="All" name="Logging Errors &amp; Warnings">
    <listeners>
      <add name="FlatFile TraceListener" />
    </listeners>
  </errors>
</specialSources>
</loggingConfiguration> 
```

我还有两个部分，文件名和文件夹来保存文件：

```
<appSettings>
    <add key="LogFolder" value="./Logs" />
    <add key="LogFileName" value="MyLoginSystem" />
</appSettings> 
```

像这样创建一个类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Configuration;
using Microsoft.Practices.EnterpriseLibrary.Logging.Configuration;
using Microsoft.Practices.EnterpriseLibrary.Logging;
using System.Diagnostics;
using System.Globalization;
using Microsoft.Practices.EnterpriseLibrary.Logging.Formatters;
using Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners;
using Microsoft.Practices.EnterpriseLibrary.Logging.Filters;

/// <summary>
/// Summary description for Utility
/// </summary>
public static class Utility {
    /// <summary>
    /// Instance for log writer 
    /// </summary> 
    private static LogWriter writer;

    /// <summary>
    /// Instance for log writer 
    /// </summary> 
    private static LogWriter wmiWriter;

    /// <summary>
    /// Instance for log writer 
    /// </summary> 
    private static LogWriter eskoLoggingWriter;

    /// <summary>
    /// Intialize the Trace listners without using app.config file
    /// </summary>
    /// <param name="fileName">log file name</param>
    public static void Initialize(string fileName) {
        CreateLogWriterFromCode(fileName);
    }

    /// <summary>
    /// Log User Messages
    /// </summary>
    /// <param name="message">Message text</param>
    /// <param name="prior">Logger Priority</param>
    /// <param name="traceType">Trave event type</param>
    public static void LogUserMessage(string message, int prior, System.Diagnostics.TraceEventType traceType) {
        LogEntry(message, "User", prior, traceType);
    }

    /// <summary>
    /// Any type of Log Entry 
    /// </summary>
    /// <param name="message">Message text</param>
    /// <param name="category">Logger category</param>
    /// <param name="prior">Priory logger </param>
    /// <param name="traceType">Trace event type</param>
    public static void LogEntry(string message, string category, int prior, System.Diagnostics.TraceEventType traceType) {
        try {
            LogEntry log = null;
            log = new LogEntry();
            log.Message = message;
            log.Categories.Add(category);
            log.Severity = traceType;
            log.Priority = prior;
            log.TimeStamp = DateTime.Now;
            if (writer != null) {
                writer.Write(log);
            } else {
                eskoLoggingWriter.Write(log);
            }
            // wmiWriter.Write(log);
        } catch (LoggingException ex) {
            LogEntry(ex.Message, "Developer", prior, traceType);
        }
    }

    /// <summary>
    /// Log Developer Messages 
    /// </summary>
    /// <param name="message">Message text</param>
    /// <param name="prior">Logger priority</param>
    /// <param name="traceType">Trace event type</param>
    public static void LogDeveloperMessage(string message, int prior, System.Diagnostics.TraceEventType traceType) {
        LogEntry(message, "Developer", prior, traceType);
    }

    /// <summary>
    /// Close splash screen
    /// </summary>
    public static void ExitSplash() {
        Logger.Reset();
    }

    /// <summary>
    /// Disposing log write instance
    /// </summary>
    public static void Dispose() {
        if (writer != null) {
            writer = null;
        }
    }

    /// <summary>
    /// Creating log writer programatically 
    /// </summary>
    /// <param name="fileName">Full path of log file</param>
    static private void CreateLogWriterFromCode(string fileName) {
        if (writer != null) {
            writer = null;
        }
        //// The formatter is responsible for the look of the message. Notice the tokens: {timestamp}, {newline}, {message}, {category}
        TextFormatter formatter = new TextFormatter
            ("[{timestamp}]" + "[{category}]" + "{message}{newline}");

        //// Log messages to a log file. Use the formatter mentioned above specified.

        FlatFileTraceListener logFileListener = new FlatFileTraceListener(fileName, "", "", formatter);
        //// My collection of TraceListeners. 
        LogSource mainLogSource =
            new LogSource("FlatFile TraceListener", SourceLevels.All);
        mainLogSource.Listeners.Add(logFileListener);

        //// Assigning a non-existant LogSource for Logging Application Block 
        //// Specials Sources I don't care about.Used to say "don't log".
        LogSource nonExistantLogSource = new LogSource("Empty");

        //// I want all messages with a category of "User" or "Developer" to get distributed
        //// to all TraceListeners in my mainLogSource.
        IDictionary<string, LogSource> traceSources =
                      new Dictionary<string, LogSource>();
        traceSources.Add("User", mainLogSource);
        traceSources.Add("Developer", mainLogSource);

        // Let's glue it all together.
        // No filters at this time.
        // I won't log a couple of the Special
        // Sources: All Events and Events not
        // using "Error" or "Debug" categories.
        writer = new LogWriter(new ILogFilter[0],
                        traceSources,
                        nonExistantLogSource,
                        nonExistantLogSource,
                        mainLogSource,
                        "ALL",
                        false,
                        true);

    }

    /// <summary>
    /// Creating log writer programatically 
    /// </summary>
    static public void CreateLogWriterFromCode(string folder, string fileName) {
        if (eskoLoggingWriter == null) {
            //// The formatter is responsible for the look of the message. Notice the tokens: {timestamp}, {newline}, {message}, {category}
            TextFormatter formatter = new TextFormatter
                ("[{timestamp}]" + "[{category}]" + "{message}{newline}");

            //// Log messages to a log file. Use the formatter mentioned above specified.

            string date = String.Format("{0:yyyyMMdd}", DateTime.Now);
            FlatFileTraceListener logFileListener = new FlatFileTraceListener(folder + "/" + fileName + "_" + date + ".log", "", "", formatter);
            WmiTraceListener wmiListener = new WmiTraceListener();
            //// My collection of TraceListeners. 
            LogSource mainLogSource =
                new LogSource("FlatFile TraceListener", SourceLevels.All);
            LogSource wmiMainLogSource = new LogSource("WmiTraceListener", SourceLevels.All);
            mainLogSource.Listeners.Add(logFileListener);
            wmiMainLogSource.Listeners.Add(wmiListener);

            //// Assigning a non-existant LogSource for Logging Application Block 
            //// Specials Sources I don't care about.Used to say "don't log".
            LogSource nonExistantLogSource = new LogSource("Empty");

            //// I want all messages with a category of "User" or "Developer" to get distributed
            //// to all TraceListeners in my mainLogSource.
            IDictionary<string, LogSource> traceSources =
                          new Dictionary<string, LogSource>();
            traceSources.Add("User", mainLogSource);
            traceSources.Add("Developer", mainLogSource);

            IDictionary<string, LogSource> wmiTraceSources =
                                     new Dictionary<string, LogSource>();
            wmiTraceSources.Add("Instrumentation", wmiMainLogSource);

            // Let's glue it all together.
            // No filters at this time.
            // I won't log a couple of the Special
            // Sources: All Events and Events not
            // using "Error" or "Debug" categories.
            eskoLoggingWriter = new LogWriter(new ILogFilter[0],
                            traceSources,
                            nonExistantLogSource,
                            nonExistantLogSource,
                            mainLogSource,
                            "ALL",
                            false,
                            true);

            wmiWriter = new LogWriter(new ILogFilter[0],
                           wmiTraceSources,
                           nonExistantLogSource,
                           nonExistantLogSource,
                           wmiMainLogSource,
                           "All",
                           true,
                           true);
        }
    }
} 
```

在 Global.asax 中，在 Application_Start 中添加这些行

```
void Application_Start(object sender, EventArgs e) {
        // Code that runs on application startup
        Utility.CreateLogWriterFromCode(ConfigurationSettings.AppSettings["LogFolder"].Trim(), ConfigurationSettings.AppSettings["LogFileName"].Trim());
        Utility.LogUserMessage("******** Application_Start Event My Login application started   ******", 1, System.Diagnostics.TraceEventType.Information);
} 
```

现在，无论您想在哪里记录消息，请使用

```
Utility.LogUserMessage 
```

如果使用 EntLib 5，您可能需要对 Utility 类进行细微更改。那应该是微不足道的。

因此，您每天都有一个日志文件，其中包含当天的正确数据。再次感谢最初编写 Utility 类的匿名人士。希望这可以帮助。

问候。

# c - 如何使用 Eclipse 生成调试信息

> ID：10527608
> 
> 赞同：1
> 
> 时间：2012-05-10T04:41:08.667
> 
> 标签：c, eclipse, command-line, makefile, debug-symbols

我有一个可以在生成调试信息的命令行（Linux Mint）中构建的 C 项目。我可以使用 GDB 在命令行界面中调试它，我觉得这很繁琐。

我用过：**`sudo make DEBUG=1`**在命令行中。

我需要在 Eclipse (GALILEO) 中调试同一个项目。我可以在 Eclipse 中构建它，但没有生成调试信息，也无法调试代码（出现错误“没有可用的调试信息”）。也不能在代码中放置任何断点。

**我已用作`gcc -g`编译器调用命令（`compiler > -O2 -g -Wall -c -fmessage-length=0`）并`DEBUG=1`在自定义构建命令中使用，链接器为“gcc”**

谁能告诉我如何设置项目，以便生成调试信息，就像它在命令行中构建时一样。

* * *

------------------构建输出------------------------------ ------------------------------

**构建项目 yuma 的默认配置********

 **使 DEBUG=1 STATIC=1 all for dir in libtecla netconf libtoaster; do\ cd $dir && make && cd ..;\ done make[1]: 进入目录`/home/shuser/workspace2/yuma/libtecla' make[2]: Entering directory`/home/shuser/workspace2/yuma/libtecla' mkdir normal_obj cp ./keytab.h normal_obj/keytab.h gcc -c -O -DPACKAGE_NAME="" -DPACKAGE_TARNAME="" -DPACKAGE_VERSION="" -DPACKAGE_STRING="" -DPACKAGE_BUGREPORT="" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 - DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_SELECT_H=1 -DHAVE_SELECT=1 -DHAVE_SYSV_PTY=1 -D_SVID_SOURCE -D_BSD_SOURCE -fpic -o normal_obj/getline.o ./getline.c

[...]

gcc -DLINUX=1 -DGCC=1 -DDEBUG -DHAS_FLOAT=1 -Wall -Wno-long-long -Wformat-y2k -Winit-self -Wswitch-default -Wunused-parameter -Wextra -Wundef -Wshadow -Wpointer-arith - Wwrite-strings -Wbad-function-cast -Wcast-qual -Waggregate-return -Wstrict-prototypes -Wold-style-definition -Wmissing-prototypes -Wmissing-declarations -Wpacked -Winvalid-pch -Wredundant-decls -Wnested-externs - Winline -std=gnu99 -fPIC -ggdb3 \ -I. -I../agt -I../mgr -I../ncx -I../platform -I../ydump -I/usr/include -I/usr/include/libxml2 -I/usr/include /libxml2/libxml -c -o ../../target/mgr/mgr.o 经理。c gcc -DLINUX=1 -DGCC=1 -DDEBUG -DHAS_FLOAT=1 -Wall -Wno-long-long -Wformat-y2k -Winit-self -Wswitch-default -Wunused-parameter -Wextra -Wundef -Wshadow -Wpointer-arith -Wwrite-strings -Wbad-function-cast -Wcast-qual -Waggregate-return -Wstrict-prototypes -Wold-style-definition -Wmissing-prototypes -Wmissing-declarations -Wpacked -Winvalid-pch -Wredundant-decls -Wnested-externs -Winline -std=gnu99 -fPIC -ggdb3 \ -I. -I../agt -I../mgr -I../ncx -I../platform -I../ydump -I/usr/include -I/usr/include/libxml2 -I/usr/include /libxml2/libxml -c -o ../../target/mgr/mgr_cap.o mgr_cap.c

[...]

gcc -ggdb3 -DDEBUG=1 -DLINUX=1 -DGCC=1 -DHAS_FLOAT=1 -Wall -Wno-long-long -Wformat-y2k -Winit-self -Wswitch-default -Wunused-parameter -Wextra -Wundef -Wshadow - Wpointer-arith -Wwrite-strings -Wbad-function-cast -Wcast-qual -Wcast-align -Waggregate-return -Wstrict-prototypes -Wold-style-definition -Wmissing-prototypes -Wmissing-declarations -Wpacked -Winvalid-pch - Wredundant-decls -Wnested-externs -Winline -std=gnu99 -fPIC \ -I。-I../../netconf/src/平台 -I../../netconf/src/ncx -I../../netconf/src/agt -I/usr/include/yuma/platform -我/usr/include/yuma/ncx -I/usr/include/yuma/agt -I/usr/include -I/usr/include/libxml2 -I/usr/include/libxml2/libxml -c -o ../ bin/toaster.o 烤面包机.c

* * *

----------------------调试控制台-------------- -

**“main()”没有可用的来源**

[...] .gdbinit：没有这样的文件或目录。从 /home/shuser/yuma-2.2-2/netconf/target/bin/netconfd 读取符号...（未找到调试符号）...完成。1-gdb-set 确认关闭 1^done (gdb) 2-gdb-set 宽度 0 2^done

[...]

=library-loaded,id="/lib/i386-linux-gnu/libm.so.6",target-name="/lib/i386-linux-gnu/libm.so.6",host-name=" /lib/i386-linux-gnu/libm.so.6",symbols-loaded="0",thread-group="i1" ~"由于共享库事件而停止\n" 由于共享库事件而停止 *stopped ,thread-id="1",stopped-threads="all",core="0" 22 信息共享库 (gdb)

* * ***

# c# - 如果用户手动将其键入地址栏，如何防止 url 重定向？

> ID：10527612
> 
> 赞同：0
> 
> 时间：2012-05-10T04:41:45.717
> 
> 标签：c#, asp.net

我有一个 aspx 页面，我有一个按钮可以修复它，单击哪个页面以使用 if else 条件重定向，但它按预期修复它，但问题是当有人手动键入页面 URL 时，它也会转到那里，而我想阻止这种性质，我应该怎么做才能阻止它，请建议我，我正在使用 asp.net 会员船，但我想这对会员资格来说并没有多大意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:52:49.533

您不能阻止用户在 URL 地址栏中输入内容，但另一方面，您可以通过设置一个`session`变量来检查用户是来自该按钮还是只是输入页面的地址并直接导航到它来解决此问题

```
public void btnNavigate_Click(Object sender,
                           EventArgs e)
{
Session["cameFromBtnClick"] = true;
//Your other code
} 
```

# android - 不开始新活动

> ID：10527614
> 
> 赞同：0
> 
> 时间：2012-05-10T04:41:56.173
> 
> 标签：android

我在一个应用程序上工作。我不打算参加另一项活动。这里的代码点击箭头按钮进行另一个活动`

```
package com.gabriel.utility;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import android.content.Context;
import android.content.Intent;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.ToggleButton;

import com.gabriel.activity.ContactInfoActivity;
import com.gabriel.activity.ContactListActivity;
import com.gabriel.activity.GabrielApplication;
import com.gabriel.activity.R;
import com.gabriel.database.ContactCore;
import com.gabriel.database.WebMessageCore;

public class WebMessageAdapter extends ArrayAdapter<WebMessageCore>{

    Context _Context;
    ArrayList<WebMessageCore> _WebMsgList;
    WebMessageCore _WebMsgCore;
    TextView _MsgContent;
    private LayoutInflater mInflater;
    ImageButton Arrow;
    GabrielApplication application;
    public WebMessageAdapter(Context context, int resource,
            ArrayList<WebMessageCore> contactList) {

        super(context, resource,  contactList);
        _Context = context;
        _WebMsgList = contactList;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return _WebMsgList.size();
    }

    public WebMessageCore getItem(int position) {
        return _WebMsgList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.custom_row_view, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.name);
            holder.txtmessage = (TextView) convertView
                    .findViewById(R.id.meassage);
            holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);
            holder.txtdate=  (TextView ) convertView.findViewById(R.id.datetime);
           holder.Arrow =  (ImageButton)convertView.findViewById(R.id.settingArrow);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        _WebMsgCore=_WebMsgList.get(position);
        holder.txtName.setText(_WebMsgCore.getName());
        holder.txtmessage.setText(_WebMsgCore.getMessage());
       holder.txtPhone.setText(_WebMsgCore.getMobileNo());
      Arrow.setOnClickListener( new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        Intent newActivity =  new Intent(_Context, ContactInfoActivity.class);
        _Context.startActivity(newActivity);

        }      

       });

      /* Arrow.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent newActivity =  new Intent(_Context, ContactInfoActivity.class);
                _Context.startActivity(newActivity);
            }
       });*/
        /*Intent intent = new Intent(_Context, ContactInfoActivity.class);
                GabrielUtil.replaceContentView(application.getGroupContext(),
                        GBConstants.contact_info, intent);
            }
        });*/

       String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());
       holder.txtdate.setText(currentDateTimeString);
        return convertView;
      /* SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm:ss.SSS a");
       Date resultdate = new Date((new Date()).getTime());
       String currentDateTimeString = sdf.format(resultdate);
       holder.txtdate.setText(currentDateTimeString);*/

    }

      /*tdate = (TextView)findViewById(R.id.datetime);
      Arrow =  (ImageButton)findViewById(R.id.settingArrow);
      String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());
      tdate.setText(currentDateTimeString);
      Arrow.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent newActivity = new Intent(context, ContactInfoActivity.class);
                startActivity(newActivity);
            }
        });
            */

        //View contactView = convertView;
        /*if (contactView == null) {
            contactView = LayoutInflater.from(_Context).inflate(
                    R.layout.web_message_item, null);
        }
        _MsgContent = (TextView) contactView.findViewById(R.id.messageContent);

        //To set text as bold
        //=====================
        _MsgContent.setTypeface(null, Typeface.BOLD);

        _WebMsgCore = _WebMsgList.get(position);
        _MsgContent.setText(_WebMsgCore.getMessage());
        return contactView;
    }
    */

    static class ViewHolder {
     ImageButton Arrow;
        TextView txtName;
        TextView txtmessage;
        TextView txtPhone;
        TextView txtdate;

    }
}` 
```

在此代码行中 holder.Arrow = (ImageButton)convertView.findViewById(R.id.settingArrow); 当应用程序崩溃时。请给出一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:58:03.010

现在试试..

```
holder.Arrow.setOnClickListener( new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Intent newActivity =  new Intent(_Context, ContactInfoActivity.class);
        _Context.startActivity(newActivity);  
        }      
       }); 
```

不仅`Arrow`，它的`holder.Arrow`

`Arrow`是`null`，而你的`ImageButton`是`holder.Arrow`

# joomla - 自定义 Joomla 1.6 模板是否与 Joomla 2.5 兼容？

> ID：10527618
> 
> 赞同：0
> 
> 时间：2012-05-10T04:42:08.883
> 
> 标签：joomla

我有一个简单的问题要问你。我正在 Lynda.com 学习如何从头开始创建自定义 Joomla 模板，但它的教程适用于 Joomla 1.6。我想知道是Joomla 1.6。与 Joomla 2.5 兼容的自定义模板。？谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:17:48.560

是的，Joomla 1.6 模板可以与 Joomla 2.5 一起使用。只要您相应地更改清单文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:11:21.383

是的，它们很可能是，并且 joomla 1.6 扩展与 joomla 2.5 兼容。

[一些 joomla 扩展](http://offlajn.com)

# android - 在android中使用xmpp的android-facebook聊天客户端

> ID：10527622
> 
> 赞同：0
> 
> 时间：2012-05-10T04:42:20.243
> 
> 标签：android, facebook, xmpp, asmack

我是 android 新手，现在我正在尝试使用 asmack 开发一个 facebook 聊天客户端，我可以使用以下代码登录，// 用于创建和授权连接 FBMessageListener 是消息侦听器类 public String connect() throws XMPPException {

```
 ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222); // This is to avoid the keystore exception.
    config.setSASLAuthenticationEnabled(true);
    config.setDebuggerEnabled(true);
    config.setTruststorePath("/system/etc/security/cacerts.bks");
    config.setTruststorePassword("changeit");
    config.setTruststoreType("bks");

    connection = new XMPPConnection(config); 
    mFbml = new FBMessageListener(connection);

    try 
    {     
        SASLAuthentication.registerSASLMechanism( "X-FACEBOOK-PLATFORM", CustomSASLDigestMD5Mechanism.class);     

        connection.connect(); 

    } 
    catch (XMPPException e) 
    {     
        connection.disconnect();     
        e.printStackTrace(); 
    }

    return connection.getConnectionID();
 }     
and for login 
connection.login(userName, password, FB_XMPP_HOST);  
 But the problem is the message is not sending . There is no error or exception in the logcat .That is why i am struggling !! This is my code to send the message..
ChatManager chatManager = connection.getChatManager();
// am able to get the userjid ..
 public void sendMessage() throws XMPPException {
    Chat chat = chatManager.createChat("userjid", mFbml);
    String text = "Testing client";
    Log.v(" Successsssssss===========", "Your Messge "+text+"has been sent");
    chat.sendMessage(text );
   }
In Logcat showing when sending the 
message //userjid mentioned above
<message id="f4zMl-13" to="userjid" type="chat"><body>TEstingggggggggg</body>   <thread>QwLOE5</thread></message>
Please help me to do the chatting.!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:51:19.300

您可以使用具有 XMPP 客户端 API 的 SMACK.JAR

[咂嘴](http://code.google.com/p/asmack/)

[您可以在此链接](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)中找到适用于 Android 的 XMPP 客户端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:57:13.247

首先编辑您的 SASLXFacebookPlatformMechanism 类。复制并粘贴此代码。

```
package com.facebook.android;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Map;

import org.apache.harmony.javax.security.auth.callback.CallbackHandler;
import org.apache.harmony.javax.security.sasl.Sasl;
import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.sasl.SASLMechanism;
import org.jivesoftware.smack.util.Base64;

import android.util.Log;

public class SASLXFacebookPlatformMechanism extends SASLMechanism {

    private static final String NAME              = "X-FACEBOOK-PLATFORM";

    private String              apiKey            = "";
    private String              accessToken        = "";

    /**
     * Constructor.
     */
    public SASLXFacebookPlatformMechanism(SASLAuthentication saslAuthentication) {
        super(saslAuthentication);
    }

    @Override
    protected void authenticate() throws IOException, XMPPException {
        getSASLAuthentication().send(new AuthMechanism(NAME, ""));
    }

    @Override
    public void authenticate(String apiKey, String host, String accessToken) throws IOException, XMPPException {
        if (apiKey == null || accessToken == null) {
            throw new IllegalArgumentException("Invalid parameters");
        }

        this.apiKey = apiKey;
        this.accessToken = accessToken;
        this.hostname = host;

        String[] mechanisms = { "DIGEST-MD5" };
        Map<String, String> props = new HashMap<String, String>();
        this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, this);
        authenticate();
    }

    @Override
    public void authenticate(String username, String host, CallbackHandler cbh) throws IOException, XMPPException {
        String[] mechanisms = { "DIGEST-MD5" };
        Map<String, String> props = new HashMap<String, String>();
        this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, cbh);
        authenticate();
    }

    @Override
    protected String getName() {
        return NAME;
    }

    @Override
    public void challengeReceived(String challenge) throws IOException {
        byte[] response = null;

        if (challenge != null) {
            String decodedChallenge = new String(Base64.decode(challenge));
            Map<String, String> parameters = getQueryMap(decodedChallenge);

            String version = "1.0";
            String nonce = parameters.get("nonce");
            String method = parameters.get("method");

            String composedResponse =
                "method=" + URLEncoder.encode(method, "utf-8") +
                        "&nonce=" + URLEncoder.encode(nonce, "utf-8") +
                        "&access_token=" + URLEncoder.encode(accessToken, "utf-8") +
                        "&api_key=" + URLEncoder.encode(apiKey, "utf-8") +
                        "&call_id=0" +
                        "&v=" + URLEncoder.encode(version, "utf-8");
            response = composedResponse.getBytes();
        }

        String authenticationText = "";

        if (response != null) {
            authenticationText = Base64.encodeBytes(response);
        }

        // Send the authentication to the server
        getSASLAuthentication().send(new Response(authenticationText));
    }

    private Map<String, String> getQueryMap(String query) {
        Map<String, String> map = new HashMap<String, String>();
        String[] params = query.split("\\&");

        for (String param : params) {
            String[] fields = param.split("=", 2);
            map.put(fields[0], (fields.length > 1 ? fields[1] : null));
        }

        return map;
    }
} 
```

然后在您的活动类中使用此方法登录 facebook。

```
private void testLogin(){
        ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
        config.setSASLAuthenticationEnabled(true);
        config.setSecurityMode(ConnectionConfiguration.SecurityMode.enabled);
        xmpp = new XMPPConnection(config);
        SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM",SASLXFacebookPlatformMechanism.class);
        SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAccessToken());
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAppId());
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAccessToken());
        try {
            xmpp.connect();
            Log.i("XMPPClient",
                    "Connected to " + xmpp.getHost());

        } catch (XMPPException e1) {
            Log.i("XMPPClient",
                    "Unable to " + xmpp.getHost());

            e1.printStackTrace();
        }
        try {
            xmpp.login(PreferenceConnector.APP_ID, mFacebook.getAccessToken());
            Log.i("XMPPClient",
                    " its logined ");

        } catch (XMPPException e) {
            e.printStackTrace();
        }  
    } 
```

# django - 如何将夹具上传到 gae 数据存储？

> ID：10527624
> 
> 赞同：1
> 
> 时间：2012-05-10T04:42:30.253
> 
> 标签：django, google-app-engine, google-cloud-datastore, fixtures

我输入：“python manage.py loaddata fixtures\companies.json”。它给了我一个错误。

**加载 json 数据然后将其推送到 gae 数据存储的正确方法是什么？**

这是我的模型：

```
class Company(models.Model):      
    id = models.AutoField(primary_key=True);
    name = models.CharField(max_length=100);
    address = models.CharField(max_length=100, null=True);
    city = models.CharField(max_length=100);
    state = models.CharField(max_length=25);
    zip = models.IntegerField();
    latitude = models.CharField(max_length=20, null=True)
    longitude = models.CharField(max_length=20, null=True)  
    phone = models.CharField(max_length=15, null=True);
    website = models.CharField(max_length=50, null=True);
    email = models.EmailField(max_length=50, null=True);
    hiring = models.BooleanField(default=False);    
    approved = models.BooleanField(default=False);
    date_added = models.DateTimeField(auto_now_add=True);
    about_us = models.TextField(max_length=500, null=True); 
```

这是我的固定装置：

```
[
    {
        "model": "Companies.Company",
        "fields": {
            "id": 111,
            "name": "1-800 Postcards America's Printing Company",
            "address": "121 Varick Street, 7th Floor",
            "city": "New York",
            "state": "NY",
            "zip": 10013,
            "latitude": "40.724831999999999",
            "longitude": "-74.00609",
            "phone": "212-741-1070",
            "website": "http://www.1800postcards.com",
            "email": "info@1800postcards.com",
            "hiring": "FALSE",
            "approved": "TRUE",
            "date_added": "April 30, 2012, 6:08 p.m.",
            "about_us": "With over 30 years of business experience as full service offset printers and over 200 years of combined knowledge in our production department and press rooms, 1-800Postcards is your professional printer. Our state-of-the-art 125,000 square foot facility is located in the heart of New York City, with an additional web offset plant in New Jersey for our larger orders 500,000 and up. This makes it possible for us to print and mail the highest quality postcards on the market today — at the most competitive rates in the country."
        }
    },
    {
        "model": "Companies.Company",
        "fields": {
            "id": 222,
            "name": "20x200 ",
            "address": "6 Spring Street",
            "city": "New York",
            "state": "NY",
            "zip": 10012,
            "latitude": "40.721052999999998",
            "longitude": "-73.994322999999994",
            "phone": "212-219-0166",
            "website": "http://www.20x200.com/",
            "email": "hello@20x200.com",
            "hiring": "TRUE",
            "approved": "TRUE",
            "date_added": "April 30, 2012, 6:08 p.m.",
            "about_us": "(limited editions × low prices) + the internet = art for everyone. That simple formula, devised by 20x200's founder, Jen Bekman, is what launched 20x200 back in 2007\. With that, we set our sights on two core goals: We want everyone to collect art, and we want to enable an economy that allows more artists to make a living by making work. More so, we wanted something as awesome as collecting art to be fun. That's right: fun!"
        }
    },
    {
        "model": "Companies.Company",
        "fields": {
            "id": 333,
            "name": "Adafruit",
            "address": "80 Nassau st #4C",
            "city": "New York",
            "state": "NY",
            "zip": 10038,
            "latitude": "40.709938000000001",
            "longitude": "-74.007987999999997",
            "phone": "646-248-7822",
            "website": "http://www.adafruit.com/",
            "email": "N/A",
            "hiring": "TRUE",
            "approved": "TRUE",
            "date_added": "April 30, 2012, 6:08 p.m.",
            "about_us": "We pride ourselves on having great prices, the best customer service, support and fast shipping. We hope we can assist you on your journey of learning – At Adafruit we celebrate “Engineering Happiness”! Adafruit is a 100% Woman-Owned Small Business."
        }
    }
] 
```

这是我得到的错误：

```
Problem installing fixture 'fixtures\companies.json': Traceback (most recent call last):
  File "C:\Users\Joe\Desktop\My School Stuff\Spring 2012\CS 473\ny-tech\ny-tech\django\core\management\commands\loaddata.py", line 169, in handle
    for obj in objects:
  File "C:\Users\Joe\Desktop\My School Stuff\Spring 2012\CS 473\ny-tech\ny-tech\django\core\serializers\json.py", line 35, in Deserializer
    for obj in PythonDeserializer(simplejson.load(stream), **options):
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\__init__.py", line 332, in load
    use_decimal=use_decimal, **kw)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\__init__.py", line 388, in loads
    return _default_decoder.decode(s)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\decoder.py", line 402, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\decoder.py", line 418, in raw_decode
    obj, end = self.scan_once(s, idx)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\scanner.py", line 71, in scan_once
    return _scan_once(string, idx)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\scanner.py", line 44, in _scan_once
    return parse_array((string, idx + 1), _scan_once)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\decoder.py", line 284, in JSONArray
    value, end = scan_once(s, end)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\scanner.py", line 42, in _scan_once
    _scan_once, object_hook, object_pairs_hook, memo)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\decoder.py", line 230, in JSONObject
    value, end = scan_once(s, end)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\scanner.py", line 42, in _scan_once
    _scan_once, object_hook, object_pairs_hook, memo)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\decoder.py", line 230, in JSONObject
    value, end = scan_once(s, end)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\scanner.py", line 39, in _scan_once
    return parse_string(string, idx + 1, encoding, strict)
  File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\decoder.py", line 121, in py_scanstring
    content = unicode(content, encoding)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x97 in position 484: invalid start byte

Exception AttributeError: "'NoneType' object has no attribute 'mkstemp'" in <bound method DatastoreFileStub.__del__ of <google.appengine.api.datastore_file_stub
.DatastoreFileStub object at 0x02930F10>> ignored 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:56:21.913

无效 JSON 可能会发生此类错误。最简单的做法是确保您的 JSON 使用[JSON Lint](http://jsonlint.com/)进行验证，修复它发现的任何错误，然后再次尝试上传。

# javascript - Google Chrome 扩展 - 脚本注入

> ID：10527625
> 
> 赞同：48
> 
> 时间：2012-05-10T04:42:35.857
> 
> 标签：javascript, jquery, google-chrome-extension

我正在尝试让我的 Chrome 扩展程序注入一些 javascript `content_scripts`，使用这个先前的***[答案](https://stackoverflow.com/questions/9263671/google-chome-application-shortcut-how-to-auto-load-javascript/9310273#9310273)***作为参考。

## 清单.json

```
"name": "My Chrome Extension",
"version": "1.0",
"manifest_version": 2,
"content_scripts": [{
    "matches": ["http://pagetoinject/script/into/*"],
    "js": ["contentscript.js"]
}] 
```

## **内容脚本.js：**

```
var s = document.createElement('script');
s.src = chrome.extension.getURL("script.js");
(document.head||document.documentElement).appendChild(s);
s.parentNode.removeChild(s); 
```

*（也试过*****[这](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)****没有成功的方法。)****

 ***```
var s = document.createElement('script');
s.src = chrome.extension.getURL("script.js");
s.onload = function() {
    this.parentNode.removeChild(this);
};
(document.head||document.documentElement).appendChild(s); 
```

我不断收到这个 javascript 错误。这是一个[截图](https://i.imgur.com/SIXQp.png)。

![在此处输入图像描述](../Images/47c264a499356f7eac503885c24366d2.png) `GET chrome-extension://invalid/ (anonymous function)`

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-10T07:54:28.220

1.  在您的清单文件中，`"manifest_version": 2`已指定。这会自动激活更严格的模式，默认情况下，所有扩展程序的文件都不可用于网页。
2.  您的原始代码将永远无法工作，因为该`<script>`元素在注入后立即被删除（脚本文件没有机会加载）。

由于 1.，控制台中显示以下错误：

```
Failed to load resource                             chrome-extension://invalid/ 
```

要解决此问题，请在您`script.js`的白名单中添加：[`"web_accessible_resources"`](http://developer.chrome.com/extensions/manifest.html#web_accessible_resources)`manifest file`

```
{
  "name": "Chrome 扩展程序",
  “版本”：“1.0”，
  “清单版本”：2，
  “内容脚本”：[{
      "匹配": ["http://pagetoinject/script/into/*"],
      “js”：[“contentscript.js”]
  }] ,
   ["web_accessible_resources": ["script.js"]](https://developer.chrome.com/extensions/manifest.html#web_accessible_resources) 
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-17T12:58:31.663

除了上面的答案，我注意到`contentscript.js`你只是添加了另一个脚本，即`script.js`你为什么不直接`script.js`通过 content_scripts添加`manifest.json`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-30T17:07:55.750

出现此错误的另一个原因是 URL 是否被 CORS 阻止。检查页面的网络请求头是否包含Content-Security-Policy：

```
Content-Security-Policy: default-src 'self' http://example.com; connect-src http://example.com/; script-src http://example.com/ 
```

您可以尝试在新的浏览器选项卡中打开 url 以验证图像 url 是否正确：

```
chrome-extension://mjcbjlencnokpknflpneebajalcnnifo/images/pattern.jpg 
```

解决此问题的一种方法是使用图像数据 URI：

```
data:image/gif;base64,R0lGODlhEAAQAMQAAORHHOVSKudfOulrSOp3WOyDZu6QdvCchPGolfO0o/XBs/fNwfjZ0frl3/zy7////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABAALAAAAAAQABAAAAVVICSOZGlCQAosJ6mu7fiyZeKqNKToQGDsM8hBADgUXoGAiqhSvp5QAnQKGIgUhwFUYLCVDFCrKUE1lBavAViFIDlTImbKC5Gm2hB0SlBCBMQiB0UjIQA7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-13T17:17:50.930

Chrome 扩展的样板：

[https://github.com/commanddotcom/boilerplate-chrome-extension-js-injection](https://github.com/commanddotcom/boilerplate-chrome-extension-js-injection)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-10T08:48:39.470

这里的问题是您正在使用`manifest_version : 2`. 如果你这样做，`manifest-version: 1`你不会有任何问题。版本 2 限制了许多此类功能以提高安全性。有关清单版本 2 中施加的限制的更多详细信息，请参阅[Google 内容安全政策](http://code.google.com/chrome/extensions/trunk/contentSecurityPolicy.html)。我找不到 CSP 中提到的您的具体案例，但是当我将清单版本更改为 1 并执行您的代码时，它工作正常。***

# java - Java小程序窗格可通过箭头键移动？

> ID：10527634
> 
> 赞同：0
> 
> 时间：2012-05-10T04:44:31.160
> 
> 标签：java

如何使我的 java 小程序不受限制或设置为一定的大小，我可以用箭头键和图像移动东西（而不是窗口）并且东西会留在原地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:54:27.533

您可以使用 KeyListeners 来执行此任务。像这样 ：-

```
class MyKeyListener extends KeyAdapter{
    public void keyPressed(KeyEvent e){
        switch (e.getKeyCode()){
            case KeyEvent.VK_LEFT:
            leftKey = true;
            break;
            case KeyEvent.VK_RIGHT:
            rightKey = true;
            break;
            case KeyEvent.VK_UP:
            upKey = true;
            break;
            case KeyEvent.VK_DOWN:
            downKey = true;
            break;
        }
    }
    public void keyReleased(KeyEvent e){
        switch (e.getKeyCode()){
            case KeyEvent.VK_LEFT:
            leftKey = false;
            break;
            case KeyEvent.VK_RIGHT:
            rightKey = false;
            break;
            case KeyEvent.VK_UP:
            upKey = false;
            break;
            case KeyEvent.VK_DOWN:
            downKey = false;
            break;
        }
    } 
```

这只是您如何使用 KeyListner 和事件的一种方式。你可以按照你的方式去做。

# javascript - 如何使用 jQuery 删除 textarea 的禁用属性？

> ID：10527638
> 
> 赞同：5
> 
> 时间：2012-05-10T04:45:29.337
> 
> 标签：javascript, jquery, html

我的 HTML 表单中有多个文本区域，每个区域都有一个编辑链接。当我单击编辑链接时，应启用相应的文本区域。我的代码如下：

```
<script type="text/javascript">

    $(document).ready(function() {

        $(".edit").click(function(){
            $(this).attr("id").removeAttr("disabled");
        });

    });  

</script>

<textarea  id="txt1"  disabled="true"></textarea>
<a class="edit" id="txt1" >edit</a>

<textarea  id="txt2"  disabled="true"></textarea>
<a class="edit" id="txt2" >edit</a> 
```

为什么单击相应链接时没有启用文本区域？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T04:51:34.217

`id`s 在一个页面中只能使用一次。您不能有 2 个（或更多）具有相同 ID 的元素。

相反，[这样做](http://jsfiddle.net/BBtVv/2/)：

```
<form id="myform">
    <!-- group each in divs -->
    <div>
        <textarea disabled="true"></textarea>
        <a class="edit">edit</a>
    </div>
    <div>
        <textarea disabled="true"></textarea>
        <a class="edit">edit</a>
    </div>
</form>
<script>
    $(function(){
        $('#myform').on('click','.edit',function(){ 
            $(this)                       //when edit is clicked
                .siblings('textarea')     //find it's pair textarea
                .prop("disabled", false)  //and enable
            return false;
        });
    });
</script> 
```

如果你不能使用 div，那么你可以使用`prev('textarea')`而不是`siblings('textarea')`来获取前面的 textarea。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T04:52:19.520

您正在重复使用 ID 值 - 这是一个很大的禁忌。如果你要给它们一个 ID，你需要做一些事情来区分`txt1`链接和`txt1`文本区域。在下面的代码中，我`_link`为链接添加了后缀。

```
<textarea id="txt1" disabled="true"></textarea>
<a class="edit" id="txt1_link">edit</a>

<textarea id="txt2" disabled="true"></textarea>
<a class="edit" id="txt2_link">edit</a> 
```

通过这个小改动，我们现在可以修改 textarea 的 disabled 属性：

```
$(".edit").on("click", function(e){
  $( "#" + this.id.replace("_link", "") ).prop("disabled", false);
  e.preventDefault();
}); 
```

不幸的是，选择器包含该`replace()`方法的使用。如果您消除了链接和文本区域之间 ID 的歧义，您就可以消除这一点。

演示：http: [//jsbin.com/unebur/edit#javascript,html](http://jsbin.com/unebur/edit#javascript,html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T04:53:45.427

您正在尝试通过 $(this) 删除锚标记的禁用属性。试试这个。

```
<script type="text/javascript">

        $(document).ready(function() {

            $(".edit").click(function(){
                $("#"+$(this).attr("rel")).removeAttr("disabled");
            });

        });  

</script>

<textarea  id="txt1" class="txtedit" disabled="true"></textarea><a class="edit" rel="txt1" >edit</a>
<textarea  id="txt2" class="txtedit" disabled="true"></textarea><a class="edit" rel="txt2" >edit</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T05:11:31.340

您好，请按照以下说明进行一些更改

```
 <script type="text/javascript"> 
      $(document).ready(function () {
          $('.txtAreas').attr('disabled', true);

          $("#txt3").click(function () {
            $('#txt1').removeAttr("disabled");
          });

          $("#txt4").click(function () {
             $('#txt2').removeAttr("disabled");
          });

     });
 </script>

    <textarea id="txt1" class="txtAreas"></textarea><a href="#" class="edit" id="txt3">edit</a>
    <textarea id="txt2" class="txtAreas"></textarea><a href="#" class="edit" id="txt4">edit</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T04:49:06.430

由于这是一个 onclick 处理程序，$(this) 将指向您单击的元素，即`<a>`标签。那没有残疾人。您需要将 dom 树向上移动到父节点，即 textarea，并在那里删除 disabled 属性：

```
 $(this).parent().removeAttr("disabled"); 
```

# c# - 列表框 C# win 表单中未找到文件错误

> ID：10527639
> 
> 赞同：0
> 
> 时间：2012-05-10T04:45:30.240
> 
> 标签：c#, winforms, visual-studio-2010

我有一个列表框，它有一些从目录文件夹中加载的文件。

将文件加载到 listBox1 的代码：

```
private void Form1_Load(object sender, EventArgs e)
        {
            PopulateListBox(listbox1, @"C:\TestLoadFiles", "*.rtld");

        }

private void PopulateListBox(ListBox lsb, string Folder, string FileType)
        {
            DirectoryInfo dinfo = new DirectoryInfo(Folder);
            FileInfo[] Files = dinfo.GetFiles(FileType);
            foreach (FileInfo file in Files)
            {
                lsb.Items.Add(file.Name);
            }
        } 
```

我想读取并显示表单中标签的属性值。中加载的文件，`listBox1`代码如下：

```
private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
    string path = (string)listBox1.SelectedItem;
    DisplayFile(path);
} 
private void DisplayFile(string path)
{
    string xmldoc = File.ReadAllText(path);

    using (XmlReader reader = XmlReader.Create(xmldoc))
    {   

        while (reader.MoveToNextAttribute())
        {
          switch (reader.Name)
          {
            case "description":
              if (!string.IsNullOrEmpty(reader.Value))
                label5.Text = reader.Value; // your label name
              break;
            case "sourceId":
              if (!string.IsNullOrEmpty(reader.Value))
                label6.Text = reader.Value; // your label name
              break;
            // ... continue for each label
           }
        }
    }
} 
```

`Problem:`当我在加载表单后单击 listBox1 中的文件时，文件从文件夹加载到列表框中，但它抛出了一个错误`File not found in the directory`。

我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:50:58.973

您面临的问题是，在列表框中您只指定文件名，而不是整个文件路径和名称，因此当它查找文件时，您找不到它。

来自[FileInfo.Name 属性](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.name.aspx)

```
Gets the name of the file. 
```

而[File.ReadAllText 方法（字符串）](http://msdn.microsoft.com/en-us/library/ms143368.aspx)作为`path`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:51:11.250

那是因为您要添加，`File.Name`而是应该`File.FullName`在列表框中添加

```
lsb.Items.Add(file.FullName); 
```

所以你的方法 PopulateListBox 应该变成：

```
private void PopulateListBox(ListBox lsb, string Folder, string FileType)
        {
            DirectoryInfo dinfo = new DirectoryInfo(Folder);
            FileInfo[] Files = dinfo.GetFiles(FileType);
            foreach (FileInfo file in Files)
            {
                lsb.Items.Add(file.FullName);
            }
        } 
```

**编辑：** 看起来您只想显示文件名，而不是完整路径。您可以遵循以下方法。在 PopulateListBox 中，添加`file` 而不是 file.FullName 所以该行应该是

```
foreach (FileInfo file in Files)
            {
                lsb.Items.Add(file);
            } 
```

然后在 SelectedIndexChanged 事件中执行以下操作：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            FileInfo file = (FileInfo)listbox1.SelectedItem;
            DisplayFile(file.FullName);
         } 
```

这应该为您提供全名（带路径的文件名）并将解决您的 File Not Found 异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:51:59.850

您没有指定完整路径。

尝试这样的事情：

```
 DisplayFile(@"C:\TestLoadFiles\" + path) 
```

# jquery - 清除后jqueryui自动完成不显示选项

> ID：10527640
> 
> 赞同：4
> 
> 时间：2012-05-10T04:45:38.350
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用 jqueryui 自动完成来让我的文本框出现，并为用户提供各种选项。

在这种情况下，我只希望用户能够从列表中选择一个值，而不是输入另一个值。

我通过以下方式实现了这一目标：

```
$('#modelNo').autocomplete({
    source: '/myurl/asdf'
    minLength: 2,
    delay: 300,
    change: function(event, ui) {
        if (!ui.item || ui.item.label == '') {
            $(this).val('');
        }
    }
}); 
```

现在这工作得很好，所以当用户离开该字段并选择另一个字段时，该字段被清除，但是它会导致另一个问题，如果他们再次键入相同的文本，自动完成将不会运行，我假设我已经导致了它的状态以某种方式搞砸了，也许它认为列表已经显示。

我确实看过 jqueryui 网站上的组合框示例，但与我想要实现的目标相比，它似乎相当复杂。

在这种情况下，如何使自动完成刷新其列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:54:27.440

我们似乎已经修复了它

```
 $(this).autocomplete("search", ""); 
```

清除值后，如果有更好的方法会感兴趣。

# php - 跟踪多个级别的页面引荐来源网址

> ID：10527649
> 
> 赞同：1
> 
> 时间：2012-05-10T04:46:25.137
> 
> 标签：php, kohana

场景（所有发生在管理区域/后端）：

1.  从列表页面，用户单击链接以查看文章（在后端）。
2.  从文章查看页面，用户单击链接以编辑该文章。
3.  在文章编辑页面，表单提交到当前的uri。
4.  如果验证成功或用户取消，用户将被重定向到文章查看页面。
5.  从文章查看页面，用户单击“返回”链接以返回到列表页面。

列表 <--> 查看 <--> 编辑

现在，我只能跟踪前一页的引用 url。在编辑表单中，我使用隐藏字段来维护对视图页面的引用，以免在表单 POST 提交失败期间更改它并且用户保留在编辑页面中。

问题是当用户从编辑返回查看页面时，指向列表页面的“返回”链接现在链接到编辑页面。

供参考，

*   列表页面 url 是动态的，因为用户应该返回到同一页面上的列表和排序顺序（存储在查询字符串中）；因此，固定的 url 是不可能的。
*   过去，我尝试过使用会话（例如 SESSION['view_to_list_ref'] SESSION['edit_to_view_ref']），但它搞砸了多个选项卡。
*   我可以通过 ajax 在视图/编辑之间进行转换，但我希望此时保持应用程序简单且无 ajax。
*   我正在使用 PHP + Kohana 3.2 框架

我能想到的唯一解决方案是将列表页面 url 编码并通过查询字符串附加到“查看文章”链接。这样，即使在编辑页面中，列表页面的位置也会被保留；因为返回查看页面的引用 url 也将在查询字符串中包含列表页面 url。但是我真的不喜欢用长参数值（编码或未编码）“弄脏”url的想法。

我真的希望有一个更优雅的解决方案来解决这个问题，即通常跟踪多个级别的页面推荐；不仅仅是专门解决我提到的场景。

编辑：哦，解决方案应该能够支持执行相同场景的多个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:31:18.440

您可以通过使用 PHP 会话中的唯一标识代码、临时变量以及使用临时数据库表来跟踪页面，该临时数据库表通过这些临时值跟踪页面加载。

数据库结构可能是：

```
+-------------+-------------------+---------------------+
|  Unique ID  |    Page Referral  |   Time of page load |
+-------------+-------------------+---------------------+ 
```

页面加载的跟踪时间将允许您有选择地擦除超过 X 分钟的加载，并保持表相对较小。

无论如何，这将允许您保留尽可能多的级别，如果您想添加一个自动递增计数器字段或您自己的计数器字段，您甚至可以保留一个简单易用的数字系统来跟踪页面加载，尽管我相信页面加载时间足以满足这种情况。

# salesforce - 我们如何在电子邮件模板中使用条件语句？

> ID：10527650
> 
> 赞同：0
> 
> 时间：2012-05-10T04:46:31.800
> 
> 标签：salesforce

我有一个与 visualforce 电子邮件模板相关的问题，请帮帮我。我正在使用下面的代码来隐藏 tr：

```
<apex:repeat var="cx" value="{!relatedTo.Airline_Conf_s__r}">
 <tr style="{!IF(!cx.Include_in_Confirmation__c == true,"display:none!important; ","")}">
<td>
<apex:outputText value="{!cx.Airlines_Url__c}" escape="false" /> 
</td>
</tr>
</apex:repeat>

but i need it to done without inline style .how can it possible. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:36:52.943

您最好使用 apex:outputPanel 标记并使用渲染属性：

```
<apex:repeat var="cx" value="{!relatedTo.Airline_Conf_s__r}">
<apex:outputPanel layout="none" rendered="{!cx.Include_in_Confirmation__c == true}">
    <tr>
        <td>
            <apex:outputText value="{!cx.Airlines_Url__c}" escape="false" /> 
        </td>
    </tr>
</apex:outputPanel> 
```

请注意，layout 属性设置为“none”，这将有效地告诉 VF 不要渲染标签，但您将获得能够在转发器循环时动态渲染 TR 标签的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:41:15.793

您可以尝试使用 apex:outputtext 的“rendered”属性，如下所示

```
<apex:outputText rendered = "{cx.Include_in_Confirmation__c}" value="{!cx.Airlines_Url__c}" escape="false" /> 
```

# xcode - 仅在使用 ARC 时，在类型为“y *”的对象上找不到属性“x”

> ID：10527653
> 
> 赞同：0
> 
> 时间：2012-05-10T04:47:08.960
> 
> 标签：xcode, cocoa-touch, automatic-ref-counting

这个错误很奇怪。我在应用程序委托中有一堆属性，我可以毫无问题地访问它们。我的代码在没有 ARC 的情况下运行良好，但是当我打开 ARC 时，我收到了这个非常奇怪的错误。在“AppDelegate *”类型的对象上找不到属性“navigationController”

除了这个，一堆其他的属性工作得很好。

我已经清理了所有东西并重新启动了 Xcode。

这是代码：

AppDelegate.h：

```
@interface AppDelegate : UIResponder <UINavigationControllerDelegate> {
    UINavigationController *navigationController;
    NSString *appName;
}
@property (strong, nonatomic) NSString *appName;
@property (strong, nonatomic) UINavigationController *navigationController; 
```

AppDelegate.m

```
 #import "AppDelegate.h"
    @synthesize navigationController, appName;

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
        appName = [NSString stringWithString:[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleName"]];
        navigationController = [[UINavigationController alloc] initWithRootViewController:self.startViewController];
} 
```

我的类.h

```
@class AppDelegate;
@interface MyClass: UIResponder {
    AppDelegate *appDelegate;

} 
```

我的班级.m

```
#import "AppDelegate.h"
#import "MyClass.h"

@implementation MyClass 
- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code here. 
        appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
        [self initFacebook];
    }
    return self;
}

- (void) doStuff {
    NSLog(@"App Name:%@",appDelegate.appName); //this works fine

    //This one doesn't
    UINavigationController *myNavigationController = appDelegate.navigationController;
} 
```

更新：我做了一个解决方法。基本上，我在 MyClass 中创建了一个名为 navigationViewController 的属性，并在 MyClass 在 AppDelegate 中实例化之后传递对象，而不是直接从 MyCLass 中的 AppDelegate 获取（如上所示）。我还是很疑惑，一定是编译器的bug。我仍然对如何使原始代码工作非常感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T04:51:56.320

~~在 MyClass.m 中，您导入的是“MyClass”而不是“MyClass.h”。这可能是问题吗？~~

有时清理项目还不够：您可能需要打开“管理器”窗口，在“项目”选项卡下选择您的项目，然后单击按钮删除派生数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:04:37.490

好的，我只将有问题的代码放入一个空项目中，如问题所示。它编译得很好。这真的很令人费解，所以我断定它一定是 Xcode 中的错误，或者可能是某些设置。无论如何，我无法弄清楚出了什么问题，所以我只是在 AppDelagate 中实例化 MyClass 时传递有问题的对象（navigationController）。一个对象就可以了，谢天谢地，所有其他 appDelegate 属性/选择器都可以正常访问。

# sql - 更改 SQL Server 中的数据库列设计

> ID：10527656
> 
> 赞同：1
> 
> 时间：2012-05-10T04:47:30.147
> 
> 标签：sql, sql-server, sql-server-2008, sqldatatypes

我有一个生产数据库，我需要在列设计中将其从 varchar 更改为 nvarchar。我知道我可以强制它重新创建设计并保存它，但这样做是个好主意吗？

可能的结果和任何其他建议是什么？

更新：它的 SQL Server 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:00:18.620

我建议从生产数据库创建一个测试数据库并运行脚本来更新字段类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:57:40.637

@Ye Myat Aung，您可以直接将数据类型从 varchar 更改为 nvarchar。无需重新创建结构。只需注意列的大小，因为 nvarchar 以 unicode 格式保存数据，它几乎是 varchar 的两倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:37:37.753

您应该遵循以下步骤：

1.  在设计视图中打开表。
2.  现在您在设计时将数据类型从 varchar 更改为 NVarchar，而不是保存它。
3.  现在您按标题栏左上角的“更改生成脚本”。
4.  保存脚本并执行它。

这是生产服务器避免任何数据丢失的最节省的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:28:14.447

如果您将使用 Visual Studio 数据库版本来生成部署脚本，这将自动为您创建。但是，它在后面的作用如下
1) 使用新定义创建表。只需使用 {TableName}_new 命名您的表。
2）像在旧表上一样创建索引
3）像在旧表上一样创建触发器（并禁用它们）
4）将数据从旧表复制到新表。
5) 通过将 _old 附加到表名来重命名旧表
6) 通过从名称中删除 _new 来重命名新表

# java - 使用 JAVA 中的反射实例化对象并通过 .class 文件调用方法？

> ID：10527658
> 
> 赞同：1
> 
> 时间：2012-05-10T04:47:40.020
> 
> 标签：java, class, reflection

我有一个 .class 文件，但对 .class 文件一无所知，包括类名、字段或方法。我需要做的是找出有关该类的所有信息并实例化该类的一个对象。

请记住，在调用 getDeclareMethod()、getDeclareFields() 和 getDeclareConstructor() 之后，我们对 .class 文件内部一无所知，我知道它包含一个 String str 字段和一个带有一个 String 参数的 void 方法，该方法试图分配一个名称到变量 str 和一个没有任何参数的纯构造函数。

那么问题是如何实例化一个对象并调用方法将一个String分配给str？当类或方法的声明在同一个文件中时，我知道该怎么做，但是这是一个未知的.class文件，我向你们寻求帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:04:09.213

首先，您需要将 .class 文件转换为`Class`对象。您可以使用`URLClassLoader`.

假设您有 a`File classFile`和 a `String className`。

```
try {
    URLClassLoader classLoader = new URLClassLoader(new URL[]{classFile.toURI().toURL()});
    Class<?> clazz = classLoader.loadClass(className);
} catch (Exception e) {
    // something went wrong..
    e.printStackTrace();
} 
```

现在您将类文件存储在一个`Class`对象中，但是如何创建其类型的对象并从中调用方法呢？ 包的[Java 反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)`java.lang.reflect`在这种情况下很有用。

假设您将`Class<?>`对象存储在名为 的变量`clazz`、`String methodName`方法名称的 a`String toSet`和方法参数的 a 中。

```
try {
    Object instance = clazz.newInstance();
    Method method = clazz.getDeclaredMethod(methodName, String.class);
    method.setAccessible(true);
    method.invoke(instance, toSet);
} catch (Exception e) {
    // something went wrong..
    e.printStackTrace();
} 
```

请注意，如果方法名称未知，则必须创建一种识别方法，这可以通过反射完成，但通过使用字节码注入/修改/分析库检查方法的字节码更稳定作为[ASM](http://asm.ow2.org/)或[BCEL](http://commons.apache.org/bcel/)。虽然 BCEL 自 2006 年以来就没有更新过，但我个人认为它更容易学习如何使用；但是，ASM 要快得多并且是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:52:52.550

您可以将该 .class 文件转换为 java 文件，即使用 JAD 对其进行反编译，然后知道 java 文件的来源。

你可以使用[这个](http://viralpatel.net/blogs/2009/01/decompile-class-file-java-decompiler-class-java-class.html)资源，也可以在 google 上找到更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:55:23.097

只需阅读本教程，您就会得到所有答案..

[使用 Java 反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

> 反射是 Java 编程语言中的一个特性。它允许正在执行的 Java 程序检查或“自省”自身，并操纵程序的内部属性。例如，Java 类可以获取其所有成员的名称并显示它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T04:58:29.813

如果您有.class 文件，您可以编写自己的ClassLoader，并使用defineClass 创建一个Class 实例。从那里，您可以获得名称和任何构造函数。如果它有一个 null 构造函数，您只需在 Class 实例上执行 newInstance，否则您需要寻找一个构造函数并将适当的参数传递给构造函数的 newInstance 方法。

# vb.net - 从使用 VB.NET 编码重新启动 PC

> ID：10527659
> 
> 赞同：2
> 
> 时间：2012-05-10T04:47:41.067
> 
> 标签：vb.net, dll, shutdown, reboot

如何从使用 VB.Net 框架 2.0 或更高版本的编码重新启动 PC

我也喜欢为重启过程设置计时器。

VB.net 框架是否支持上述过程？我需要添加库或 DLL 文件吗

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T04:56:27.160

Ref: [Programmatically restart computer from .NET](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/b9948921-cfdc-4fe3-b04e-c5f718646de4/)

There are different methods that you can use to shutdown/restart your computer through C# code. Following are some of them:

1.  Using Win32 API.

2.  Using "Shutdown" command. i.e. internally firing shutdown.exe /s

**Using "Shutdown" command:**

Code Snippet

```
System.Diagnostics.Process.Start("ShutDown", "/r")
// If immediately then use 
// System.Diagnostics.Process.Start("ShutDown", "/r /t 00") 

/s = shutdown
/r = restart
/t = timed shutdown 
```

Do `"shutdown/?"` at command prompt to know more about the command.

Ref: [Rebooting a Windows Box Programmatically](http://www.codeguru.com/cpp/w-p/win32/tutorials/article.php/c8647/Rebooting-a-Windows-Box-Programmatically.htm)
**The Another approach is Win32 API's `ExitWindowsEx` API Function**

The first thing that we need to do is to reference the InteropServices namespace so that we can access the Windows API functions. To do this, add a new using directive at the start of the code for the form.

```
using System.Runtime.InteropServices;
```

put the following declaration appears within the form's class code block

```
[DllImport("user32.dll", SetLastError = true)]
static extern int ExitWindowsEx(uint uFlags, uint dwReason); 
```

then call the this method..

```
 BOOL b = ExitWindowsEx( EWX_REBOOT|EWX_FORCE,
    SHTDN_REASON_MINOR_MAINTENANCE |
    SHTDN_REASON_FLAG_PLANNED); 
```

More References:
[Shutdown, Restart, or Log Off your computer using VB.Net](http://www.eggheadcafe.com/tutorials/vb/6eebdaf1-a5ce-47dd-a1e5-23e707bbf369/shutdown-restart-or-log-off-your-computer-using-vbnet.aspx)
[Simplest way to Programmatically ShutDown or Restart your System using C# or VB.NET](http://www.devcurry.com/2009/12/simplest-way-to-programmatically.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T04:52:56.647

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T04:52:11.110

看：

*   [http://www.eggheadcafe.com/tutorials/vb/6eebdaf1-a5ce-47dd-a1e5-23e707bbf369/shutdown-restart-or-log-off-your-computer-using-vbnet.aspx](http://www.eggheadcafe.com/tutorials/vb/6eebdaf1-a5ce-47dd-a1e5-23e707bbf369/shutdown-restart-or-log-off-your-computer-using-vbnet.aspx)
*   [http://www.codeproject.com/Articles/12815/Shutdown-Restart-VB-Net](http://www.codeproject.com/Articles/12815/Shutdown-Restart-VB-Net)

> 代码： = System.Diagnostics.Process.Start("ShutDown", "/r") 以下是其他选项： C:>shutdown 用法：shutdown [-i | -l | -s | -r | -a] [-f] [-m \computername] [-t xx] [-c "comment"] [-d up:xx:yy]
> 
> ```
>  No args                 Display this message (same as -?)
>     -i                      Display GUI interface, must be the first option
>     -l                      Log off (cannot be used with -m option)
>     -s                      Shutdown the computer
>     -r                      Shutdown and restart the computer
>     -a                      Abort a system shutdown
>     -m \\computername       Remote computer to shutdown/restart/abort
>     -t xx                   Set timeout for shutdown to xx seconds
>     -c "comment"            Shutdown comment (maximum of 127 characters)
>     -f                      Forces running applications to close without war ning
>     -d [u][p]:xx:yy         The reason code for the shutdown
>                             u is the user code
>                             p is a planned shutdown code
>                             xx is the major reason code (positive integer le ss than 256)
>                             yy is the minor reason code (positive integer le ss than 65536) 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T04:53:17.307

There isn't anything directly in the framework, but can use p/Invoke to call [ExitWindowsEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376868%28v=vs.85%29.aspx).

[See the definition at pinvoke.net](http://www.pinvoke.net/default.aspx/user32.exitwindowsex):

```
Declare Function ExitWindowsEx Lib "user32" (ByVal dwOptions As Int32, ByVal dwReserved As Int32) As Int32 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:10:50.053

This?

```
Private Sub {BTNNAME}_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles {BTNNAME}.Click
  System.Diagnostics.Process.Start("shutdown", "-r -t 00")
End Sub 
```

# javascript - 使用javascript从脚本标签中提取字符串

> ID：10527668
> 
> 赞同：1
> 
> 时间：2012-05-10T04:48:23.000
> 
> 标签：javascript, string

如何提取脚本标签中存在的所有字符串。我想提取每个字符串并查找是否存在任何 shellcode。但是 javascript 在声明一个字符串时使用了几种方法，例如一个字符串可以是

```
 var y="Some text";
 var x1 = "3+4";
 eval("\144\157\143\165\155\145\156\164"); //string given in eval(); 
```

它可以是串联的格式

```
var x1 = "te ActiveX Co"; var x2 = "ntrol"; var x3 = x1 + x2; 
var x4 = "Execu" + x3; 
```

即使使用简单的 javacript 代码在 eval() 或 document.write() 中定义，我如何识别每个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:54:32.930

这是一个非常复杂的问题，没有简单的解决方案。

您可以使用[解析器生成器](http://jscc.jmksf.com/)和 ECMAScript 语言的 BNF 定义（当然您可以在网络上的某个地方找到它）从目标源代码中提取字符串。

**[编辑]**由于链接解析器生成器是用 JavaScript 编写的，并且支持 Web 浏览器作为平台，因此您可以生成自定义 ECMAScript 解析器，将其嵌入页面中，并获取所有嵌入的脚本源（例如`$('script').map(function(){return $(this).text();})`）。请注意，您的自定义解析器可以简单地回显已解析的字符串，例如 via `console.log(...)`。

# php - XAMPP 是否支持 SQL Server？

> ID：10527669
> 
> 赞同：2
> 
> 时间：2012-05-10T04:48:31.330
> 
> 标签：php, sql-server, xampp

我想在我的 xampp 服务器中将 php 连接到 SQL Server。当我使用代码`mssql_connect`时，它给了我一个错误。请找到任何解决方案，让我知道 xampp 是否支持 php 连接到 SQL Server。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T04:56:27.380

`mssql`-support 在 xampp 中默认不启用。要启用它，您必须`xampp/php/php.ini`在以下行之前打开并删除分号（在“动态扩展”类别下）：

```
extension=php_mssql.dll
extension=php_pdo_mssql.dll // just if you want to use PDO 
```

完成后，重新启动apache，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T04:47:26.910

是的，它会支持。

但是您必须在 xampp 数据库服务器中进行一些更改

删除前面的分号

# iphone - 在 Objective C 中推送和弹出 UINavigationController 时的内存问题

> ID：10527670
> 
> 赞同：1
> 
> 时间：2012-05-10T04:48:32.720
> 
> 标签：iphone, objective-c, xcode4, uinavigationcontroller

我有两个视图控制器 VC1 和 VC2。我尝试通过创建 VC2 的对象并按按钮操作来推动 VC2。

```
VC2 *vcOject = [[VC2 alloc]init];
[self.navigationController pushViewController:vcOject animated:YES];
[vcObject release]; 
```

在 VC2 中，我在按钮操作中弹出它..

```
[self.navigationController popViewControllerAnimated:YES]; 
```

现在我在 VC1 中并再次推送 VC2 进行显示。但这次我收到 EXC_BAD_ACCESS 错误。但是当我评论 [vcObject release] 时。它工作正常。但是我什么时候可以释放内存。导航控制器中的内存是如何处理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:20:20.170

如果你不使用`[vcObject release]`. 它会导致内存泄漏到您的应用程序。

**所以，这是在不使用ARC**的情况下使用 push/pop viewController 处理内存管理的方法

 **```
VC2 *vcOject = [[VC2 alloc] init];
[[self.navigationController pushViewController:vcOject animated:YES] autorelease]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:57:39.577

简单的回答：**您应该使用 ARC**。

如果由于某种原因你不能，一旦你的视图控制器从堆栈中弹出，它就会被释放，每次你想将它推入堆栈时，你应该分配/初始化一个新的。或者，如果您不想这样做 - 比如说，如果 VC2 中的视图非常重 - 摆脱您的`[vcObject release]`并在 VC1 中保留对的引用`vcObject`，并继续将相同的视图推入堆栈。不过，请确保不要将这两者混为一谈；如果您每次创建一个新对象时都必须在将其推入堆栈后释放它，并且如果您每次都保留将相同的 VC2 推入堆栈的引用，那么您必须在 VC1 之前释放它`dealloc`。记住*一定要*在VC1的`dealloc`方法中释放，否则内存会泄露。

但是，真的。**你应该使用ARC。****

# facebook - 如何制作 API 以将结果发布到 Facebook

> ID：10527676
> 
> 赞同：0
> 
> 时间：2012-05-10T04:49:11.690
> 
> 标签：facebook, api

有人知道如何制作一个 API 将我的页面结果发布到 Facebook 吗？

或者任何社交网站？

我会将代码发布到我的网站，供任何人查看。基本上它是一个允许用户进行调查的网站，然后根据这些结果，我们推荐校园内最合适的宿舍。我们需要一个 API 将这些结果发布到 Facebook。这是我的网站代码。

```
<!DOCTYPE html>
<html> 
<head>
<title> Find the right dorm for you </title>

<h1>Find out what dorm fits your lifestyle!</h1>

</head>
<body>
<p>Please fill out a few questions so we can 
help you figure out which dorm is best for you.</p>

<form method="get" action="final.php">

I enjoy (check all that apply):<br>
<input type="checkbox" name="acts" value="8">Working Out<br>
<input type="checkbox" name="acts" value="3">Bowling<br>
<input type="checkbox" name="acts" value="3">Live Music<br> 
<input type="checkbox" name="acts" value="5">Shopping<br>
<input type="checkbox" name="acts" value="7">Food<br>
<input type="checkbox" name="acts" value="9">Bars <br>
<input type="checkbox" name="acts" value="9">Frat Parties <br>
<input type="checkbox" name="acts" value="8">Sports <br>
<input type="checkbox" name="acts" value="3">Library <br>

Is being close to the quad important to you?:
<select name= "Quad">
<option value="1">Not important</option>
<option value="3">Kind of important</option>
<option value="6">Very Important</option>
<option value="3">Only thing that matters</option>
</select>
<br>

How often do you plan on going to Red Lion?:
<select name= "Lion">
<option value="1">Never</option>
<option value="5">Sometimes</option>
<option value="10">Over 3 times a week</option>
</select>
<br>

Would you rather go to the ARC or CRCE?:
<select name= "Gym">
<option value="10">Arc</option>
<option value="1">CRCE</option>
</select>
<br>

How do you plan on eating most of your meals?:
<select name= "Meals">
<option value="5">Ordering delivery</option>
<option value="8">Walking To Green St.</option>
<option value="5">Making my own food</option>
</select>
<br>

Private or Public dorm?:
<select name= "Dorm">
<option value="10">Private</option>
<option value="5">Public</option>
</select>
<br>

<input type="submit" value="get my results!">

</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:27:57.740

对于社交网络，在确定服务器上的页面/应用程序提供哪些服务之后，您可以决定如何开始制作 API。

假设您的网站有关于宿舍中一些居民的数据，并且您希望其他人与这些数据进行通信，而无需发布您的服务器/数据库的密码。您可以使用应用程序编程接口。

在您的情况下，您似乎想要一个更基本的形式，即从一个类中公开方法供其他人使用。考虑研究*软件设计模式*

一旦你弄清楚了，那么你需要了解其他 API，例如 Facebook。您可以通过在[https://developers.facebook.com/docs/上阅读更多内容来做到这一点](https://developers.facebook.com/docs/)

总之，API 是代码*所有者*创建的东西，以使其*他人*更容易使用代码/服务。如果您只想将代码发布到 Facebook，则不需要您自己的 API，您需要使用 Facebook 提供的 API。

```
Provide an API to your services that will then be used to post to Facebook

--------    --------     --------    --------    --------
| Your |    | Your |     | Your |    | Joe  |    | Face |
| Dorm |----| Code |-----| API  |----| Code |----| book |
| Data |    |      |     |      |    |      |    |  API |
--------    --------     --------    --------    --------

Just need to post to Facebook

--------    --------     --------
| Your |    | Your |     | Face |
| Dorm |----| Code |-----| book |
| Data |    |      |     |  API |
--------    --------     -------- 
```

# python - 如何将我用 pygame 制作的游戏发送给其他人？

> ID：10527678
> 
> 赞同：13
> 
> 时间：2012-05-10T04:49:31.500
> 
> 标签：python, pygame, publish, send

我是使用 pygame 制作游戏的新手，我的第一次尝试仍在进行中，但我想知道如何将我的游戏发布或发送给没有 pygame 的朋友，以便他们可以玩。我在网上看了，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T05:35:43.613

您可以将您的项目打包成一个独立的可分发应用程序，该应用程序具有自己的 python 环境。

OSX：py2app
[http://pypi.python.org/pypi/py2app/](http://pypi.python.org/pypi/py2app/)

Linux：pyinstaller
[http://www.pyinstaller.org/](http://www.pyinstaller.org/)

赢：py2exe
[http://www.py2exe.org/](http://www.py2exe.org/)

注意，您可以使用 pyinstaller 跨平台。我只是对这种组合有很好的个人经验。

# osgi - 使用 OSGi 进行固件升级

> ID：10527679
> 
> 赞同：0
> 
> 时间：2012-05-10T04:49:51.190
> 
> 标签：osgi, bundle, upgrade, apache-felix, firmware

我需要实现一个固件升级机制，其中 Apache ACE 将用于配置，Apache Felix 将用于目标端。Felix 是否有能力升级设备上的固件？

正如 Apache ACE 的文档中提到的，固件升级配置是可能的。但是，如何为固件创建捆绑包？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:25:06.067

Apache ACE[架构页面](https://ace.apache.org/docs/architecture.html)确实指的不仅是更新 OSGi 包，还包括“配置数据、本机代码和设备固件等相关工件”。为了处理这个问题，ACE 依赖于 Demloyment Admin（OSGi 纲要规范的第 114 节），它允许插入资源处理器。

使用 Deployment Admin，您可以将所需的工件分发到您的设备，并以您认为合适的方式处理它们：将文件放在某个位置，安装应用程序包（例如 rpm 或 Android 应用程序），甚至使用有效负载更新固件。因此，您可以绑定到标准化的部署机制，并使用它的生命周期。

*请注意，您*仍然有责任对数据做一些明智的事情。换句话说，如果您没有用于更新固件的引导加载程序，ACE 无法帮助您，但如果您有，您可以使用分发机制。

披露：我是 Apache ACE 提交者。

# backup - 整体备份隔离存储并恢复

> ID：10527683
> 
> 赞同：1
> 
> 时间：2012-05-10T04:50:48.113
> 
> 标签：backup, windows-phone-7.1, restore, isolatedstorage

我正在开发一个 Windows Phone 7.1 应用程序。应用程序将对象序列化为 JSON 并将它们保存到**IsolatedStorageSettings**文件。

对象还具有用户可以用相机捕获的图像。这些图像使用“Extensions.SaveJpeg”方法作为 jpeg 文件保存到独立存储中。图像由对象 JSON 中的唯一 ID 引用，因此它们可以与对象本身一起从存储中加载或仅在需要时加载。

现在我已经启动并运行了它，我想创建备份到 SkyDrive 功能并进行恢复。

我想问的是，我怎样才能简单地将隔离存储作为一个整体进行备份，然后进行整体恢复？

我一直在考虑是否有办法 (1) 生成一个包含整个独立存储的 zip 文件，(2) 将其上传到 SkyDrive，(3) 从 SkyDrive 下载和 (4) 解压缩它以替换任何现有文件贮存。

步骤（2）和（3）我知道怎么做（谷歌很容易找到说明）。我也可以执行步骤 (1)，但需要多行代码。我正在寻找一种简单的解决方案来压缩整个存储并从中恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:00:59.860

我建议您使用 Perst 作为 Windows Phone 应用程序的本地数据库解决方案。它可以导入或导出为 xml，您可以将其上传/下载到 SkyDrive 或其他云系统。

Perst主页：http://www.mcobject.com/perst/

# database - 需要帮助在 oracle 中为特定 xpath 的 xmltype 列建立索引

> ID：10527694
> 
> 赞同：2
> 
> 时间：2012-05-10T04:52:07.210
> 
> 标签：database, oracle, indexing, xmltype

我正在为 xmltype 列使用结构化存储类型（即定义了 XML 模式）。
而且我愿意对 xml 中特定 xpath 的值执行大量 where 子句。

我应该使用哪种 xmltype 索引？

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:45:36.457

对 XML 进行索引时有很多细微之处，我们不可能在如此少的信息上给您一个明确的答案。您将不得不进行一些实验。

但是，如果您知道 XPATH 表达式将构成查询的大部分，那么您应该首先创建一个 XDB.XMLTYPE 索引，在参数子句中指定这些路径。类似于文档中的这个例子：

```
CREATE INDEX po_xmlindex_ix ON po_clob (OBJECT_VALUE) INDEXTYPE IS XDB.XMLINDEX
  PARAMETERS ('PATHS (INCLUDE (/PurchaseOrder/LineItems//* 
                               /PurchaseOrder/Reference))'); 
```

但是您确实需要阅读文档。 [在这里找到它](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_indexing.htm#CHDCJIJB)。

# codeigniter - 让 Ci 以格式化的 mdate 字符串输出 am/pm

> ID：10527697
> 
> 赞同：1
> 
> 时间：2012-05-10T04:52:29.160
> 
> 标签：codeigniter

如何将 AM/PM 添加到以下代码片段的末尾？所以它的输出是这样的：04/21/2012 07:59。

```
<?=mdate('%m/%d/%Y %H:%i', strtotime($row->entryCreationDateTime))?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:56:26.283

除非您尝试在查询中使用它，否则您可以使用`date`. 从[文档](http://us3.php.net/manual/en/function.date.php)中，AM/PM 由“A”给出：

```
<?php echo date('m/d/Y H:i A', strtotime($row->entryCreationDateTime)); ?> 
```

[顺便说一句，避免代码中的短标签](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)通常是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:58:12.900

我相信这是

```
# 'AM' or 'PM' - upper case 'A'
<?=mdate('%m/%d/%Y %H:%i A', strtotime($row->entryCreationDateTime))?> 
```

或者

```
# 'am' or 'pm' - lowercase 'a'
<?=mdate('%m/%d/%Y %H:%i a', strtotime($row->entryCreationDateTime))?> 
```

# python-2.7 - 创建新电子表格（Google API / Python）

> ID：10527705
> 
> 赞同：7
> 
> 时间：2012-05-10T04:53:12.940
> 
> 标签：python-2.7, google-docs-api

我设法使用以下代码创建了一个新的电子表格文档：

```
# Authorize
client = gdata.docs.client.DocsClient(source='TestDoc')
client.http_client.debug = False
client.client_login(self.cfg.get('google', 'email'), self.cfg.get('google', 'password'), source='TestDoc', service='writely')

# Create our doc
document = gdata.docs.data.Resource(type='spreadsheet', title='Test Report')
document = client.CreateResource(document) 
```

据我了解，您必须通过电子表格服务进行身份验证才能操作电子表格。

```
# Connect to spreadsheet API
client = gdata.spreadsheet.service.SpreadsheetsService()
client.email = self.cfg.get('google', 'email')
client.password = self.cfg.get('google', 'password')
client.source = 'TestDoc'
client.ProgrammaticLogin() 
```

我的问题是如何从上述第一步中的创建中获取电子表格密钥，以便使用 gdata.spreadsheet api 访问该电子表格？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T10:45:31.210

我发现`document.GetId()`' 的返回值包含我们需要的键。我不知道这是否是获取密钥的正确方法，但它有效。

```
spreadsheet_key = document.GetId().split("%3A")[1]
print "Key = %s" % spreadsheet_key

#example of using this key
w = client.AddWorksheet("Sheet 42", 5, 5, spreadsheet_key) 
```

# ios - 是什么导致 Xcode 3.2 为 FMDB 提供 __unsafe_unretained 错误？

> ID：10527707
> 
> 赞同：2
> 
> 时间：2012-05-10T04:53:17.740
> 
> 标签：ios, xcode, fmdb

我正在尝试设置 FMDB 并为使用 xcode 3.2.6 的应用程序工作。我收到一个错误：

```
@property (nonatomic, strong) NSString *databaseName; 
```

但我似乎已经解决了这个问题。现在我得到并错误“在'__unsafe_unretained'之前的预期说明符限定符列表”对于这一行：

```
__unsafe_unretained id _delegate; 
```

任何见解都会很棒。另一个比 FMDB 更好和/或更兼容的选项也是受欢迎的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:56:56.363

FMDB 已针对 ARC 支持进行了更新。你为什么使用旧版本的 Xcode？

# cuda - 如何理解并发内核的“隐式同步”

> ID：10527711
> 
> 赞同：1
> 
> 时间：2012-05-10T04:53:27.603
> 
> 标签：cuda

在 Nvida CUDA C 编程指南 4.0 的第 3.2.5.5.4 节中，它说如果在它们之间发出设备到设备的内存副本，则来自不同流的两个命令不能同时运行。我不确定它到底是什么意思。希望有人能澄清我的困惑。

假设我的程序有两个流，流 0 和流 1。以下是内核启动到这些流的顺序。

内核 0.0（流 0；假设执行时间为 10 毫秒）

内核 1.0（流 1；假设执行时间为 1 毫秒）

内核 1.1（流 1；假设执行时间为 3 毫秒）

内核 1.2（流 1；此内核导致设备到设备的内存复制，假设执行时间为 1 毫秒）

内核 1.3（流 1；假设执行时间为 6 毫秒）

我们还假设程序没有其他开销，并且 GPU 有足够的 SM 来同时运行这些内核。我的问题是内核 0.0 是否可以与内核 1.2 和内核 1.3 同时运行？整个程序的运行时间是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:46:25.133

如前所述，设备到设备的内存复制是使用`cudaMemcpy()`主机完成的；内核可以随意读写全局内存。如果内核在不同的流中，它们*可能会*重叠，但不能保证。确切的加速将取决于每个内核的 SM 利用率。Nvidia 建议使用事件来计时内核执行（启动和停止计时器）以确定重叠版本是否比顺序版本快。您可以将此输出与将内核切换到流 0 或在分析器中运行您的应用程序进行比较，这会序列化内核执行。

# iphone - 将在线图像显示到iphone的imageview中并保存到数据库中

> ID：10527716
> 
> 赞同：-1
> 
> 时间：2012-05-10T04:54:12.187
> 
> 标签：iphone

我想在 imageview 中显示在线图像并将其保存到数据库以下代码仅显示特定图像。我还可以将该图像保存到数据库中。

```
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://tvaraj.files.wordpress.com/2012/03/sachin-tendulkar-when-young.jpg&w=231&h=2500&ei=SiKqT9-fKILprQfIudWCAQ&zoom=1"]]];
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(image)];   
img.image=[UIImage imageWithData:data1];
NSLog(@"image=%@",img.image);
imageToUse1= img.image;
[image release];

//i want to add this code. this is for 
WebView *Wview=[[WebView alloc]init];
[self.navigationController pushViewController:Wview animated:YES]; 
```

我的要求是如果我单击应该在图像视图中显示的任何图像。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:58:22.780

```
 UIImage* myImage = [UIImage imageWithData: 
  [NSData dataWithContentsOfURL: 
  [NSURL URLWithString: @"http://example.com/image.jpg"]]]; 
```

如果你想在图像视图上使用它，只需执行以下操作：

// 假设图片是一个实例化的 UIImageView

```
 [picture setImage: myImage];
  [myImage release]; 
```

将图像保存到数据库

```
 NSData *data1 = UIImagePNGRepresentation(myImage, 1.0);   // save this nsdata to ur database. 
```

# ruby-on-rails - Ajax 发布 HashWithIndifferentAccess 错误

> ID：10527717
> 
> 赞同：0
> 
> 时间：2012-05-10T04:54:23.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的`tickets.js.coffee`：

```
$.ajax '/comments/add',
  type: 'POST',
  dataType: 'html'
  success: ( data ) ->
    alert 'success'

<%= form_for @comment, :url => user_ticket_message_comments_path( @user, @ticket, m ), :html => { :class => "add-comment", :id => "add-comment-" + @ticket.id.to_s } do |f| %>
  <%= f.label :body, "Add comment" %>
  <%= f.text_area :body %>
  <%= f.hidden_field :message_id, :value => m.id %>
  <%= f.submit "Add comment" %>
<% end %> 
```

评论表：

```
id | message_id | body
---------------------- 
```

评论控制器：

```
def create
  @comment = params[:comment]
  @comment.save
end 
```

我的路线.rb：

```
resources :messages do
  resources :comments
end 
```

我收到此错误：

```
undefined method `save' for {"body"=>"awef", "message_id"=>"15"}:ActiveSupport::HashWithIndifferentAccess 
```

评论属于一条消息，消息有很多评论。

我应该在哪里解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:12:12.663

`params[:comment]`是 a [`Hash`](http://ruby-doc.org/core-1.9.3/Hash.html)，而不是`Comment`对象，因此不能“保存”。您需要创建一个新`Comment`对象并将每个属性分配给它，然后保存该`Comment`对象：

```
def create
  @comment = Comment.new(params[:comment])
  @comment.save
end 
```

根据您的应用程序的“新”程度，`config.active_record.whitelist_attributes`可能会设置为`true`，在这种情况下，上述情况会给您一个安全错误，您应该阅读[Rails Guides on Mass-Assignment](http://guides.rubyonrails.org/security.html#mass-assignment)以获取有关如何正确分配属性的更多信息（实际上您应该无论哪种方式阅读）。

# iphone - 在目标c IOS5中的viewcontroller类中单击按钮上绘制矩形

> ID：10527727
> 
> 赞同：0
> 
> 时间：2012-05-10T04:55:19.517
> 
> 标签：iphone, objective-c, ios5, xcode4.3

只是我是在 ipad 上开发的初学者，当我单击或触摸按钮时，我需要在 x,y 点绘制具有宽度和高度的矩形。

我在谷歌上搜索，但我没有在按钮处理程序中找到任何工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:15:02.017

`-(void)rectangleButtonSelected`在 viewDidLoad 方法中创建 rectangleButton 并在 ViewController.m 中编写 方法。并创建`RectangleView`UIView 类。

```
-(void)rectangleButtonSelected{

    RectangleView *temp = [[RectangleView alloc] initWithFrame:CGRectMake(0, 0, 60, 40)];

    temp.center = CGPointMake(arc4random()%100, arc4random()%200);
    NSLog(@"The Main center Point : %f  %f",temp.center.x,temp.center.y);

    [self.view addSubview:temp];

} 
```

`- (void)drawRect:(CGRect)rect`在 RectanglerView.m 中实现方法

```
- (void)drawRect:(CGRect)rect
{

    // Drawing code

    context =UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
    // And draw with a blue fill color
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    // Draw them with a 2.0 stroke width so they are a bit more visible.
    CGContextSetLineWidth(context, 2.0);

    CGContextAddRect(context, self.bounds);
    CGContextStrokePath(context);

    // Close the path
    CGContextClosePath(context);
    // Fill & stroke the path
    CGContextDrawPath(context, kCGPathFillStroke);
} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:09:18.613

您实际上需要对状态执行此操作。只有一个地方可以让你画画，那就是`drawRect:`. 因此，当用户单击按钮时，您需要设置一些实例变量，例如`_isShowingRectangle`或其他东西，然后调用`setNeedsDisplay`您正在绘制的自定义 UIView。

然后，在您的自定义视图中`drawRect:`，您可以检查是否设置了该状态变量，并绘制（或不绘制）矩形。绘图代码取决于您使用的图形层，但它可能类似于

```
CGContextRef ctxt = UIGraphicsGetCurrentContext();
CGContextSetStrokeColorWithColor(ctxt,[[UIColor blackColor] CGColor]);
CGContextSetLineWidth(ctxt,3.0);
CGContextStrokeRect(ctxt,CGRectMake(10,20,100,50)); 
```

# c# - Microsoft Xna Texture2D 和旋转

> ID：10527730
> 
> 赞同：1
> 
> 时间：2012-05-10T04:55:32.057
> 
> 标签：c#, rotation, xna, texture2d

我有一组图像，其中每个图像都需要能够旋转到 90 度、180 度和 270 度。所有这些图像都是 Texture2D 类型。是否有内置功能可以为我完成此任务？或者我应该加载每个图像的额外旋转图像？或者有没有更好的方法来完成这个任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T05:16:10.320

您可以在使用 将纹理绘制到缓冲区时旋转（和缩放）纹理`SpriteBatch.Draw`，但您需要指定大部分（或全部）参数。角度以弧度表示。

```
SpriteBatch.Begin();
angle = (float)Math.PI / 2.0f;  // 90 degrees
scale = 1.0f;
SpriteBatch.Draw(myTexture, sourceRect, destRect, Color.White, angle,
                 position, scale, SpriteEffects.None, 0.0f);
SpriteBatch.End(); 
```

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.draw.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.draw.aspx)

您还可以加载图像的预旋转副本，但您可能会得到通常的过早优化讲座。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-22T10:19:24.390

如果您只想旋转 Texture2D 字段而不更改 Draw 方法中的任何内容，您可以使用它（它将输入顺时针旋转 90 度）：

```
public static Texture2D RotateTexture90Deegrees(Texture2D input)
{
    Texture2D rotated = null;
    if (input != null)
    {
        rotated = new Texture2D(input.GraphicsDevice, input.Width, input.Height);
        Color[] data = new Color[input.Width * input.Height];
        Color[] rotated_data = new Color[data.Length];

        input.GetData<Color>(data);
        var Xcounter = 1;
        var Ycounter = 0;
        for (int i = 0; i < data.Length; i++)
        {
            rotated_data[i] = data[((input.Width * Xcounter)-1) - Ycounter];
            Xcounter += 1;
            if (Xcounter > input.Width)
            {
                Xcounter = 1;
                Ycounter += 1;
            }
        }

        rotated.SetData<Color>(rotated_data);
    }
    return rotated;
} 
```

# java - JCheckBox 知道复选框是否被选中

> ID：10527736
> 
> 赞同：0
> 
> 时间：2012-05-10T04:56:13.980
> 
> 标签：java, swing, user-interface, jcheckbox

设置 JCheckBox 是使用带有布尔条件的 setSelected 方法。我使用哪种方法从 JCheckBox 中获取布尔数据。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:03:45.537

你的意思是检查 JCheckbox 是否被选中？如果是这样，请使用[isSelected()](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#isSelected%28%29)

您还可以使用[ItemListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ItemListener.html)以防您希望收到有关检查和取消检查的通知！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T05:02:55.283

[我猜isSelected()](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#isSelected%28%29)是您正在寻找的方法。这将返回`false`if `JCheckBox`is`NOT Selected`和`true`if `Selected`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T05:06:42.133

[这将对您有所帮助。](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#isSelected%28%29)

# java - 从模式生成接口

> ID：10527737
> 
> 赞同：2
> 
> 时间：2012-05-10T04:56:22.290
> 
> 标签：java, soap, jaxb, xjc

是否存在从 xml 模式生成接口和类的工具？我已经从我的模式中自动生成 JAXB 类，但我想要一组匹配的接口供外部代码编译。我并不打算将这些接口与 Marshaller 一起使用。看起来XJC以前是生成接口+类，现在只生成类。当然，我总是可以手动创建接口并使用 JAXB 插件强制每个自动生成的类继承每个接口，但这是不切实际的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:40:07.690

我通过指定全局 JAXB 绑定取得了成功，如下所示：

```
<jxb:bindings version="2.1" xmlns:jxb="http://java.sun.com/xml/ns/jaxb">
  <jxb:globalBindings generateValueClass="false" />
</jxb:bindings> 
```

请参阅[http://jaxb.java.net/guide/Migrating_JAXB_1_0_applications_to_JAXB_2_x.html](http://jaxb.java.net/guide/Migrating_JAXB_1_0_applications_to_JAXB_2_x.html)。

如果您使用的是 maven-jaxb2-plugin，您只需将上述内容包含在与架构相同位置的具有 .xjb 扩展名的文件中。

# sql - 单品多单，SQL表设计

> ID：10527741
> 
> 赞同：4
> 
> 时间：2012-05-10T04:56:32.590
> 
> 标签：sql, database-design, datatable

我有一张订单表，例如，当用户来到商店时，他们可以购买不止一件商品。我可以知道执行此类记录操作的最佳做​​法是什么？是每个项目在订单表中订购一行还是在订单表中全部混合成一行？

假设客户 A 从商店购买了 3 件商品。那么订单表中会有3行吗？或订单表中的 1 行包含所有详细信息并使用分隔符分隔订单？

我设计的结构是这样的::

```
tblOrder
    OrderID (Primary Key)
    UserID
    TotalPrice

tblOrderItem
    OrderItemID (Primary Key)
    OrderID (Referencing tblOrder)
    Quantity
    ItemID (Referencing tblItem)
    TotalPrice 
```

它是否正确 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:00:17.717

我会建议你保持 3 行，因为它会很容易让你进一步维护。

**更新：**

@SLim，该结构现在看起来非常适合这种情况。您将继续进行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:02:08.717

毫无疑问，每个订单在数据库表中都应该有自己的行。

否则，例如，如果您想查找购买特定商品的所有订单——您将如何做？如果每行有一个项目会容易得多。

不仅如此，这是大型电子商务网站所采用的方法。如果您有兴趣学习专业地开发软件，则必须学习最佳实践。

祝你好运！

# iphone - 为什么我在 GDATA 中使用 Youtube API 时不断收到 Apple Mach-O 链接器错误

> ID：10527743
> 
> 赞同：0
> 
> 时间：2012-05-10T04:56:44.633
> 
> 标签：iphone, ios, youtube-api, gdata

嗨，我一直在尝试构建我的项目，但我一直收到 4 个错误。

![在此处输入图像描述](../Images/ec327510a61925509521eca74e7affa7.png)

任何帮助将不胜感激！

我确实正确地添加了 GData 代码，并且确实在构建阶段添加了 libxml2.dylib。& 在我的其他链接器标志中，我有 -OBjC、-lxml2、-all_load。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:44:50.453

看起来您的 GData 库仅针对 arm7 进行编译，并且您可能正在尝试支持 arm6，请尝试进入 GdataTouchStaticLib 的架构部分并将“armv6”添加到发布/调试目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:04:49.120

你有没有机会导入 VideosTableViewController。**m**而不是**.h**在您的代码中的某处？

# .net - 使用 C# 中的任务并行库为每个处理器运行一个并行任务

> ID：10527746
> 
> 赞同：1
> 
> 时间：2012-05-10T04:57:34.627
> 
> 标签：.net, multithreading, c#-4.0, parallel-processing, task-parallel-library

使用任务并行库时，是否可以确保我当时每个处理器只运行一个任务？如果不是，那么在 C# 中执行此操作的最佳方法是什么？

注意：我这样做不是为了提高性能，而是为了让每个任务的时间更可靠。有关更多信息，请参阅此问题：[Timing of parallel actions using the Task Parallel Library in C#](https://stackoverflow.com/questions/10522025/timing-of-parallel-actions-using-the-task-parallel-library-in-c-sharp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:20:56.183

首先，如果您想获得绝对可靠的时序，那么使用 Windows 和 .Net 不是正确的选择。Windows，因为它不是[实时操作系统](http://en.wikipedia.org/wiki/Real-time_operating_system)，它可以根据系统中发生的其他事情为您的代码选择不同的时间。.Net 不是一个好的选择，因为由于垃圾收集器，它具有不确定的时间。

但如果你只是想让时间更可靠一些，你可以做一些事情。

如果你想在自己的处理器上运行每个线程，你可以手动创建`Thread`s 然后[`ProcessThread.ProcessorAffinity`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processthread.processoraffinity.aspx)为每个线程设置，但是[获取`ProcessThread`for a`Thread`并不是那么简单](https://stackoverflow.com/a/2946266/41071)。

如果您只想确保所有任务立即启动（无论当前正在运行的其他任务是什么`ThreadPool`），您也应该创建自己的`Thread`s。

但是，如果您只想确保每个处理器*最多*[`MaxDegreeOfParallelism`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)有一个任务，只需设置为[`Environment.ProcessorCount`](http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:13:00.460

您可以使用[ParallelOptions](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)指定最大并行度。然而这是一个上限，它不会强制每个内核一个线程，其他约束可能意味着使用更少的内核。

例如

```
var list = new List<int>();
var options = new ParallelOptions();
options.MaxDegreeOfParallelism = 4;

Parallel.ForEach(list, options); 
```

# asp.net - 在 asp.net 中使用 createuserwizard 和登录控制需要会员资格和个人资料帮助

> ID：10527754
> 
> 赞同：0
> 
> 时间：2012-05-10T04:58:47.357
> 
> 标签：asp.net, asp.net-membership, login-control, createuserwizard

我正在做一个项目，我有一个任务来创建用户（使用 CreateUserWizard 控件）。我必须将用户保存在 SQL Server 数据库中的特定表中。

还要创建一个登录名（使用登录控件），在登录名通过身份验证后，它应该保存配置文件信息。

到目前为止，我已经创建了继承 ProfileBase 的 CustomProfile。还创建了 3 个 aspx 页面。

1.  登录.aspx
2.  创建用户.aspx
3.  默认.aspx

我的 CustomProfile 如下所示：

```
public class UserProfile : ProfileBase
{
    static public UserProfile CurrentUser
    {
        get
        {
            return (UserProfile)(ProfileBase.Create(Membership.GetUser().UserName));
        }
    }

    public string FirstName
    {
        get { return (string)base["FirstName"]; }
        set { base["FirstName"] = value; Save(); }
    }

    public string LastName
    {
        get { return (string)base["LastName"]; }
        set { base["LastName"] = value; Save(); }
    }

    public DateTime DateOfBirth
    {
        get { return (DateTime)base["DateOfBirth"]; }
        set { base["DateOfBirth"] = value; Save(); }
    }

    public ContactInfo Contact
    {
        get { return (ContactInfo)base["Contact"]; }
        set { base["Contact"] = value; Save(); }
    }
} 
```

我已经使用`aspnet_regsql.exe`它在 sql server 中创建了多个表并将数据存储在这些表中并且工作正常。我想将信息保存到我的表格中，例如。`tblUserInfo`. 我应该如何进行？我检查了多个论坛，但没有运气。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:49:01.287

首先 aspnet_regsql.exe 已经过时了。您可能要考虑使用[ASP.Net Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)。

我假设您的问题是***将信息保存到我的表格中，例如。tblUserInfo***

您可以收集用户信息并自行保存，而不是使用 CreateUserWizard。

[1.创建一个tblUserInfo表（ASP.Net Profile的替代方案）](https://stackoverflow.com/a/10114307/296861)

[2、创建用户后将UserInfo插入tblUserInfo](https://stackoverflow.com/a/10403299/296861)

```
<asp:TextBox ID="UsernameTextBox" runat="Server" /> 
<asp:TextBox ID="EmailTextBox" runat="Server" /> 
<asp:TextBox ID="PasswordTextBox" runat="Server" /> 
<asp:TextBox ID="PasswordQuestionTextBox" runat="Server" /> 
<asp:TextBox ID="PasswordAnswerTextBox" runat="Server" /> 
<asp:TextBox ID="FirstNameTextBox" runat="Server" /> 
<asp:TextBox ID="LastNameTextBox" runat="Server" /> 

string username = UsernameTextBox;  
string password = PasswordTextBox.text; 
string email = EmailTextBox.text; 
string passwordQuestion = PasswordQuestionTextBox.text; 
string passwordAnswer = PasswordAnswerTextBox.text; 
bool isApproved = true; 

MembershipCreateStatus status; 

MembershipUser membershipUser = System.Web.Security.Membership.CreateUser(
username, password, email, passwordQuestion, passwordAnswer, isApproved, out status); 

if (status != MembershipCreateStatus.Success) 
   throw new Exception(status.ToString()); 

// Save the rest of the user info to tblUserInfo with userId
Guid userId = (Guid)membershipUser.ProviderUserKey; 
```

[3\. 如何让登录用户可以使用 UserInfo？](https://stackoverflow.com/questions/10114451/can-you-wrap-the-roleprincipal-in-a-custom-iprincipal-object/10116939#10116939)

# apache-flex - Flex 3 中 AIR 应用程序中的峰值内存

> ID：10527755
> 
> 赞同：2
> 
> 时间：2012-05-10T04:58:50.670
> 
> 标签：apache-flex, air, flex3, adobe, flexbuilder

我开发了一个 AIR 应用程序，其中使用了许多模块，当我在我的应用程序中加载和卸载模块时，每使用 4 到 5 MB 系统内存，然后我注销内存不释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:03:56.517

请参阅我之前对此的回应——我指出了必须做的各种事情才能有效地管理应用程序的内存/性能。除非引用计数**为零，否则不会发布任何内容。**

[是否可以像 Flash Builder 分析器一样在 Flash 中跟踪对象之间的引用？](https://stackoverflow.com/questions/10200736/is-it-possible-to-trace-references-between-objects-in-flash-in-the-same-way-as/10201771#10201771)

# c# - 计算程序已启动的次数

> ID：10527756
> 
> 赞同：2
> 
> 时间：2012-05-10T04:58:59.517
> 
> 标签：c#

如何在不保留文件和计数的情况下获取程序先前在 c# 中运行的次数。c# 中是否有应用程序类或其他东西来检查计数。请给出详细的解释，因为我对此一无所知。这是一个 Windows 控制台应用程序，而不是 Windows 窗体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:06:27.920

你可以这样做，我在`Registry`. 另一种方法是使用`Application Settings`.

但我更喜欢`Application Settings`它，因为它要做的任务更少。
[请参阅此处：创建应用程序设置。](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)
[来自 Youtube 的教程](http://www.youtube.com/watch?v=t9WIvYQ1dNU)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:07:44.630

最新版本的 Windows 自动在注册表中维护此信息`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\UserAssist`。

[数据被ROT13](http://en.wikipedia.org/wiki/ROT13)混淆了，但这很容易“解密”。一个[免费的实用程序](http://blog.didierstevens.com/programs/userassist/)（带有源代码）是可用的，可以作为您的起点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T05:07:54.193

1.  每次程序启动时，您都可以向数据库或 Web 服务发送一条消息（假设有网络连接）。

2.  您可以计算某种形式的硬件，它不是标准存储设备（因此在技术上不是文件）。

3.  您可以创建一个注册表项来保存计数（如果您忽略注册表项在某个级别上保存在某个文件中的事实）。

4.  你可以在某个地方有一个文件来跟踪计数。不知道你为什么一开始那么反对这个....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T05:09:48.667

如果您正在运行 Winforms 应用程序，则可以轻松使用应用程序设置。右键单击您的解决方案名称 --> 属性 --> 设置选项卡。 [更多信息和教程在这里。](http://www.dotnetperls.com/settings)

然后，每次你的程序启动时，增加这个设置并保存它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T05:33:33.820

参考：[计算程序已启动的次数](https://stackoverflow.com/questions/10527756/count-the-number-of-times-the-program-has-been-launched)

据我所知，Windows 不会为您保留这些信息。您必须在某处（文件、数据库、注册表设置）计算值。

**更好的方法是将[应用程序设置](http://msdn.microsoft.com/en-us/library/a65txexh%28VS.90%29.aspx)为：**

[在 app.config 中创建设置，](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)然后将其用作：

```
Properties.Settings.Default.FirstUserSetting = "abc";
```

然后，您通常在主窗体的 Closing 事件处理程序中执行此操作。以下语句用于保存设置方法。

```
Properties.Settings.Default.Save();
```

**使用注册表实现：**

```
 static string AppRegyPath = "Software\\Cheeso\\ApplicationName";
static string rvn_Runs = "Runs";

private Microsoft.Win32.RegistryKey _appCuKey;
public Microsoft.Win32.RegistryKey AppCuKey
{
    get
    {
        if (_appCuKey == null)
        {
            _appCuKey = Microsoft.Win32.Registry.CurrentUser.OpenSubKey(AppRegyPath, true);
            if (_appCuKey == null)
                _appCuKey = Microsoft.Win32.Registry.CurrentUser.CreateSubKey(AppRegyPath);
        }
        return _appCuKey;
    }
    set { _appCuKey = null; }
}

public int UpdateRunCount()
{
    int x = (Int32)AppCuKey.GetValue(rvn_Runs, 0);
    x++;
    AppCuKey.SetValue(rvn_Runs, x);
    return x;
} 
```

如果它是 WinForms 应用程序，您可以挂钩 Form 的 OnClosing 事件以运行 UpdateCount。

然后查看教程以[使用 C# 从注册表中读取、写入和删除](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

# html - 需要有关使用 C 编写 CGI 脚本的帮助

> ID：10527757
> 
> 赞同：0
> 
> 时间：2012-05-10T04:59:13.800
> 
> 标签：html, c, cgi, arm, lighttpd

我需要处理一些存储在服务器端的文件，并在浏览器的网页上显示文件列表。我的服务器设置在 arm 处理器上，它是 mini(thttpd)。据我所知，仅支持 CGI 脚本（使用 C）。

所以我问，是否使用当前的设置，我可以在服务器端处理文件系统并在浏览器交互时通过使用 C 的普通 CGI 脚本在网页上显示详细信息（如文件名）？我无法在 CGI 上找到令人信服的教程。并且在服务器上安装任何其他组件将很困难，因为它需要针对 arm 平台和嵌入的系统进行交叉编译（内存不足）。我是这个脚本的新手。所以如果你觉得这篇文章愚蠢或愚蠢，请原谅我。

如果你能帮我找到一些好的脚本教程，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:14:56.497

查看我尘土飞扬的旧[CGI 编程入门](http://www.cs.tut.fi/~jkorpela/forms/cgic.html)。现在可能很难找到关于该主题的好的新材料，因为大多数人使用其他更好的工具进行服务器端编程。但是像你描述的事情是可能的。主要关注的是安全性，特别是如果您允许用户删除或修改服务器上的文件。

# python - django-tastypie 中没有名为 urls 的模块

> ID：10527762
> 
> 赞同：0
> 
> 时间：2012-05-10T05:00:02.150
> 
> 标签：python, django, rest, tastypie

我只是复制粘贴tastepie 示例代码以了解它是如何工作的。代码如下。我也做了模型类条目。当我在 url 上运行[http://localhost:8000/api/v1/](http://localhost:8000/api/v1/)时会抛出错误

```
# myapp/api/resources.py
from django.contrib.auth.models import User
from tastypie.authorization import Authorization
from tastypie import fields
from tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS
from myapp.models import Entry

class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']
        filtering = {
        'username': ALL,
    }

class EntryResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user')

class Meta:
    queryset = Entry.objects.all()
    resource_name = 'entry'
    authorization = Authorization()
    filtering = {
        'user': ALL_WITH_RELATIONS,
        'pub_date': ['exact', 'lt', 'lte', 'gte', 'gt'],
    } 
```

网址.py

```
from django.conf.urls.defaults import *
from tastypie.api import Api
from myapp.api.resources import EntryResource, UserResource

v1_api = Api(api_name='v1')
v1_api.register(UserResource())
v1_api.register(EntryResource())

urlpatterns = patterns('',
    # The normal jazz here...
    (r'^blog/', include('myapp.urls')),
    (r'^api/', include(v1_api.urls)),
 ) 
```

它正在抛出消息 "No module named urls" 。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T06:32:26.320

出现此错误是因为 myapp 包中没有名为 urls.py 的模块。在 myapp 包中创建一个模块 urls.py

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T09:51:07.123

代替

`from django.conf.urls.defaults import *`

您可以尝试像这样导入

```
from django.conf.urls import * 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:00:53.157

你应该试试：

```
(r'^api/', include('v1_api.urls')), 
```

# html - 谷歌日历 html 下载的部分 GET 请求

> ID：10527763
> 
> 赞同：1
> 
> 时间：2012-05-10T05:00:14.837
> 
> 标签：html, get, google-calendar-api

嗨，我正在做一个 Arduino 项目，我想在一个小显示器上显示 Google 日历中的下一个事件。我想知道是否有办法限制来自 Google 的 HTML 请求的大小。现在，当我提出请求时，我正在获取完整日历的数据。这显着减慢了获取事件所需的时间。我尝试使用 GET 请求和 Range bytes 1000-3000 但这似乎不起作用。有没有人知道没有通过 Oauth 的任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:20:59.540

您需要“maxResults”参数，并且您可能还想限制使用“fields”参数返回的字段。检查[事件 > 列表文档](https://developers.google.com/google-apps/calendar/v3/reference/events/list)以获取详细信息。

# python - 在python中管理目录树的路径

> ID：10527767
> 
> 赞同：2
> 
> 时间：2012-05-10T05:00:55.943
> 
> 标签：python, path, tree, directory-structure

我有一个 python 脚本，它跟踪几个目录名称作为单独的变量。其中一些目录可能存在，而其他目录可能需要在执行时创建。

例如，如果我有这个目录树：

```
./top
     /a
       /a1
       /a2
     /b
       /b1
     /c 
```

然后我目前使用单个变量跟踪所有目录路径名：

```
top_path = os.path.join(os.curdir, 'top')
a_path = os.path.join(top_path, 'a')
# etc... 
```

但如果不是实际的操作系统目录支持，以某种尊重目录树的方式组织它们会很好。

在 python 中是否有一些管理目录树（或任何变量树）的标准方法？还是应该将所有内容存储在嵌套列表或元组中，或者甚至创建自己的类？像`top.a.a1`返回 './top/a/a1' 这样具有良好 API 的东西会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:37:16.500

dict-of-dicts 怎么样？就像是：

```
tree = {
       'top': {
              'a': {
                   'path': a_pathvar,
                   'a1':
                   'a2':
               }
               'b': {
                    'path':  b_pathvar,
                }
         }
       } 
```

然后您可以轻松访问`a1`with的路径变量`tree['top']['a']['a1']['path']`。您可以使用一行代码轻松创建此树结构：

```
def tree(): return defaultdict(tree) 
```

这种结构的一个很好的特性是，如果您尝试创建路径，则不需要存在中间键：

```
tree['top']['a']['long']['tree']['path'] = path_var 
```

这将自动为您创建中间键

[此](https://gist.github.com/2012250 "这个")页面更详细。

# android - Android google places api - createRequestFactory (GoogleHeader)

> ID：10527768
> 
> 赞同：1
> 
> 时间：2012-05-10T05:00:58.793
> 
> 标签：android, google-places-api

各位开发者您好，

我是 Android 开发的新手，我正在尝试编写一个使用 Google Places Api 的应用程序。我在设置 Eclipse 并找出放置各种 jar 文件的位置方面进行了大量研究。（男孩本身就是一个项目）。好的，现在我的问题是我一直在关注 Davy 的技术博客 (http://ddewaele.blogspot.com/2011/05/introducing-google-places-api.html) 并且遇到了一些问题。

我已经下载了以下罐子： google-api-client-1.4.1.beta google-api-client-1.8.0.beta (withdependecies) google-collect-1.0-rc1

我已将这些添加到我的 libs 文件夹中

应用程序可以正确编译，但是当应用程序在 Android 模拟器上运行时，它会出现一条错误消息，指出“不幸的是，应用程序已停止”查看 Log Cat 我可以看到以下内容：

05-10 04:26:32.456: I/System.out(1408): 执行搜索.... 05-10 04:26:32.456: I/System.out(1408): -------- ----------- 05-10 04:26:32.486: I/dalvikvm(1408): 找不到方法 com.google.api.client.googleapis.GoogleHeaders.setUserAgent，引用自方法 com。 google.api.client.googleapis.GoogleHeaders.setApplicationName 05-10 04:26:32.486: W/dalvikvm(1408): VFY: 无法解析虚拟方法 279: Lcom/google/api/client/googleapis/GoogleHeaders;.setUserAgent (Ljava/lang/String;)V 05-10 04:26:32.486: D/dalvikvm(1408): VFY: 在 0x0000 处替换操作码 0x6e

该方法如下所示：

```
public static HttpRequestFactory createRequestFactory(final HttpTransport transport) { 
    return transport.createRequestFactory(new HttpRequestInitializer() {
        public void initialize(HttpRequest request) {
            GoogleHeaders headers = new GoogleHeaders();
            headers.setApplicationName("MyFirstLocationApp");
            request.headers=headers;
            JsonHttpParser parser = new JsonHttpParser();
            parser.jsonFactory = new JacksonFactory();
            request.addParser(parser);
        }
    });
} 
```

我认为这与我包含的 Jar 文件有关。我相信 setApplicationName 位于 google-api-client-1.8.0.beta 中，而 setUserAgent 位于 google-api-client-1.4.1.beta 中（在 Http 类下）。

然而问题是我需要的大部分对象都没有在 google-api-client-1.8.0.beta 中找到，而是在 google-api-client-1.4.1.beta 中找到

这些是我的进口：

```
import com.google.api.client.googleapis.GoogleHeaders;
import com.google.api.client.http.GenericUrl;
import com.google.api.client.http.HttpRequest;
import com.google.api.client.http.HttpRequestFactory;
import com.google.api.client.http.HttpRequestInitializer;
import com.google.api.client.http.HttpResponseException;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.http.json.JsonHttpParser;
import com.google.api.client.json.jackson.JacksonFactory; 
```

任何帮助表示赞赏。这让我发疯了。

/伊姆兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:43:00.973

所以我只包含了下面的 1.8.0 的东西，并且只包含了 API 的使用文档建议的 jars（只是将它们放入 lib 的文件夹中）使用 eclipse indigo，它只允许您将文件放入文件夹中（不是确定您使用的是哪个版本，但 indigo 比以前的版本更好地处理这些东西）

```
google-api-client-1.8.0-beta.jar
google-api-client-android2-1.8.0-beta.jar
google-http-client-1.8.3-beta.jar
google-http-client-android2-1.8.3-beta.jar
google-oauth-client-1.8.0-beta.jar
gson-2.1.jar
guava-11.0.1.jar
jackson-core-asl-1.9.4.jar
jsr305-1.3.9.jar
protobuf-java-2.2.0.jar 
```

然后为较新的 API 修改了一些代码

```
 public static HttpRequestFactory createRequestFactory(final HttpTransport transport) { 
        return transport.createRequestFactory(new HttpRequestInitializer() {
            public void initialize(HttpRequest request) {
                GoogleHeaders headers = new GoogleHeaders();
                headers.setApplicationName("MyFirstLocationApp");
                request.setHeaders(headers);
                JsonHttpParser parser = new JsonHttpParser(new JacksonFactory());
                request.addParser(parser);
            }
        });
    } 
```

它可以编译并且对于一个简单的测试似乎可以正常工作，我建议您使用直接 1.8.0 尝试它，看看它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-27T09:57:22.433

如果您使用的是 android studio，请下载 google-api-client-1.5.0-beta.jar 文件并将其添加到您的项目 libs 文件夹中，右键单击 jar 文件并选择“添加为库”。确保你的 build.gradle 文件有这一行'compile files('libs/google-api-client-1.5.0-beta.jar')'。然后构建你的项目。

# ruby-on-rails - 每个请求都可以通过 MongoDB 进行身份验证吗？

> ID：10527769
> 
> 赞同：1
> 
> 时间：2012-05-10T05:00:59.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb

我有一个 Rails 控制器需要将一些数据写入我的 MongoDB。这就是它目前的样子。

```
 def index
    data = self.getCheckinData

    dbCollection = self.getCheckinsCollection
    dbCollection.insert(data)

    render(:json => data[:_id].to_s())
  end

protected   

  def getCheckinsCollection
    connection = Mongo::Connection.new('192.168.1.2', 27017)
    db = connection['local']
    db.authenticate('arman', 'arman')
    return db['checkins']
  end 
```

每个请求都可以通过 MongoDB 进行身份验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:07:26.623

它可能不必要地昂贵，并且创建的连接比需要的多得多。

看一下文档：

[http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started](http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started)

它们在初始化程序内连接。它执行一些连接池，以便重新使用连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:06:45.487

数据库中只有一个用户吗？

我会说：不要进行数据库身份验证。如果 MongoDB 服务器位于良好的防火墙后面，那么它是非常安全的。它永远不应该暴露在互联网上（除非你知道你在做什么）。

另外，不要为每个请求建立新的连接。这是昂贵的。在启动时初始化一个并重用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T05:07:56.483

一般来说，应该避免这种情况。

如果您对每个请求进行身份验证并且同时收到许多请求，那么您可能会遇到与数据库的所有连接都被占用的问题。此外，创建和销毁数据库连接会耗尽数据库服务器中的资源——它会给服务器增加负载，您可以轻松避免。

最后，当数据库连接未释放时，这种编程方法可能会导致问题——最终您的数据库服务器可能会耗尽连接。

# width - 如何制作一个 100% 宽度的固定 div 以在右侧留出一些空间？

> ID：10527772
> 
> 赞同：1
> 
> 时间：2012-05-10T05:01:50.210
> 
> 标签：width, html, css-position

我有一个`div`已`position`设置为`fixed`. 这`div`意味着是网站的标题。

问题是它应该采用`100 %`除了`width` **在**右边缘留下一个小间隙之外，我们在其中显示自定义样式的滚动条。此`body`页面的 已绝对定位并`overflow`设置为`scroll`显示自定义滚动条。

我尝试了`100%`宽度，但随后它采用`100%`了视口而不是其父级。我也尝试设置`margin-right`滚动条宽度，但似乎没有兑现。有没有办法在不使用 Javascript 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:57:31.187

我就说这个吧。。

如果您的宽度设置为 100%，并且您设置了 margin-right: 20px;.. 那么 20px 将添加到原始 div 中。

除此之外，我不知道你在说什么，没有看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:13:05.917

我不会将宽度设置为 100%，而是使用类似的东西

```
#header {
    height:30px; /* assumption */
    top:0;
    left:0;
    right:10px; /* assumption */
} 
```

# c++ - 部分模板模板专业化

> ID：10527775
> 
> 赞同：1
> 
> 时间：2012-05-10T05:02:13.037
> 
> 标签：c++, templates, partial-specialization, template-templates

有这个代码：

```
template<typename T, template<typename, typename> class OuterCont, template<typename, typename> class InnerCont, class Alloc=std::allocator<T>>
class ContProxy { 
    OuterCont<T, InnerCont<T, Alloc>> _container;
};
typedef ContProxy<int, std::vector, std::list> IntCont; 
```

但在某些情况下需要使用`T*`而不是`std::list<T>`as - 像这样：`InnerCont`

```
template<typename T, template<typename, typename> class OuterCont, T*, class Alloc=std::allocator<T>>
class ContProxy { 
    OuterCont<T, T*> _container;
}; 
```

在这种情况下是否可以使用“模板模板”参数的部分专业化？
或者如何以最小的头痛存档它..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:34:16.097

*简单地在type*上进行模板化通常更容易。您无法使用模板模板真正捕捉所有情况——如果有人想使用具有六个模板参数的容器怎么办？所以尝试这样的事情：

```
template <typename T, typename C>
struct ContProxy
{
    typedef C                    container_type;
    typedef typename C::second_type second_type;

    container_type container_;
};

ContProxy<int, MyContainer<int, std::list<int>> p; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:45:51.833

我也会采用 kerrek 的解决方案，但除此之外，我能想到的最好的办法就是这个。

问题是 InnerCont 在基本模板中被声明为模板类型，因此您不能再将其专门用于原始指针。因此，您可以创建一个表示指针的虚拟模板并使用它。

```
template<typename,typename> class PtrInnerCont; //just a dummy template that does nothing

template<typename T, template<typename, typename> class OuterCont, template<typename, typename> class InnerCont, class Alloc=std::allocator<T>>
class ContProxy  { 
    OuterCont<T, PtrInnerCont<T, Alloc>> _container;
};
typedef ContProxy<int, std::vector, std::list> IntCont;

template<typename T, template<typename, typename> class OuterCont, class Alloc>
class ContProxy<T, OuterCont, PtrInnerCont, Alloc> { 
    OuterCont<T, T*> _container;
};

typedef ContProxy<int, std::vector, PtrInnerCont> MyCont; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:08:14.913

你不能真正做你已经在做的事情。不是以标准方式。C++ 容器不采用相同的模板参数。

做这样的事情：

```
template< typename T, 
          template<typename, typename> class OuterCont,
          template<typename, typename> class InnerCont, 
          class Alloc=std::allocator<T>>
class ContProxy { 
    typename OuterCont<T, typename InnerCont<T, Alloc>::type>::type _container;
}; 
```

然后你可以像这样创建不同的容器生成器：

```
template < typename T, typename A = std::allocator<T> >
struct vector_gen { typedef std::vector<T,A> type; }; 
```

或者你的指针一：

```
template < typename T, typename Ignored >
struct pointer_gen { typedef T* type; }; 
```

# c++ - 将 VT 解包与元序列交织在一起

> ID：10527776
> 
> 赞同：5
> 
> 时间：2012-05-10T05:02:40.577
> 
> 标签：c++, variadic-templates

```
template <int I> struct int_ {};

template < typename ... Pack >
struct thingy
{
    void call()
    {
       f(???);
    }
 }; 
```

实例化后，它最终应该是：

```
struct thingy<int,char,double>
{
    void call()
    {
        f(int, int_<1>(), char, int_<2>(), double, int_<3>());
    }
} 
```

你怎么想，能做到吗？如何？

我唯一能想到的就是对具有 N 个不同参数的东西进行重载，如下所示：

```
template < typename T0 > struct thingy<T0> { ... };
template < typename T0, typename T1 > struct thingy<T0,T1> { ... };

etc... 
```

每个都有一个调用实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:46:09.390

> 可以做到吗

是的当然。

> 如何 ？

在几个步骤中。

*   您需要能够创建一系列整数
*   您需要能够交错两个序列

让我们从整数范围开始。

```
template <size_t...>
struct IntegralPack {};

template <size_t A, size_t... N>
IntegralPack<N..., A> push_back(IntegralPack<N...>);

template <size_t A, size_t... N>
IntegralPack<A, N...> push_front(IntegralPack<N...>);

template <size_t L, size_t H>
struct IntegralRangeImpl {
    typedef typename IntegralRangeImpl<L+1, H>::type Base;
    typedef decltype(push_front<L>((Base()))) type;
};

template <size_t X>
struct IntegralRangeImpl<X, X> {
    typedef IntegralPack<> type;
};

template <size_t L, size_t H>
struct IntegralRange {
     static_assert(L <= H, "Incorrect range");
     typedef typename IntegralRangeImpl<L, H>::type type;
}; 
```

转换步骤很简单（谢天谢地）：

```
template <typename...>
struct TypePack {};

template <size_t... N>
TypePack<int_<N>...> to_int(IntegralPack<N...>); 
```

所以下一个困难是合并。

```
template <typename... As, typename... Bs>
TypePack<As..., Bs...> cat(TypePack<As...>, TypePack<Bs...>);

template <typename, typename> struct Interleaver;

template <>
struct Interleaver<TypePack<>, TypePack<>> {
  typedef TypePack<> type;
};

template <typename A0, typename B0, typename... As, typename... Bs>
struct Interleaver<TypePack<A0, As...>, TypePack<B0, Bs...>> {
  typedef typename Interleaver<TypePack<As...>, TypePack<Bs...>>::type Base;
  typedef decltype(cat(TypePack<A0, B0>{}, Base{})) type;
}; 
```

总而言之：

```
template <typename... Pack>
struct thingy {
    typedef typename IntegralRange<1, sizeof...(Pack) + 1>::type Indexes;
    typedef decltype(to_int(Indexes{})) Ints;
    typedef typename Interleaver<TypePack<Pack...>, Ints>::type Types;

    void call() { this->callImpl(Types{}); }

    template <typename... Ts>
    void callImpl(TypePack<Ts...>) {
        f(Ts{}...);
    }
}; 
```

塔达姆！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T23:43:35.433

所以我采取的方式更具体到我实际在做什么。结果发现一些我认为无关紧要的信息帮助了我。我认为尽管类似的技术可以用于任何情况。

一方面......在我的例子中，“thingy<>”实际上有值并被传递给调用函数。这实际上有很大帮助。

此外，由于对象是将thingy中的东西转换为另一个奇怪的东西的诱导物，并且传入的整数是索引第一个东西......当我进行递归时，整数最终都为1。因此，虽然我所追求的是（简化为删除第二个元组）：

```
f(get(my_thingy, idx<1>), get(my_thingy, idx<2>), ...) 
```

事实证明，递归摆脱了 idx<2>...idx：

```
template < typename Fun, typename H, typename ... T, typename ... Args >
auto call(Fun f, thingy<H,T...> const& t, Args&& ... args) 
  -> decltype(call(f,static_cast<thingy<T...>const&>(t), get(t,idx<1>), std::forward<Args>(args)...)
{
    return call(f, static_cast<thingy<T...>const&>(t), get(t, idx<1>), args...);
}

template < typename Fun, typename ... Args >
auto call(Fun f, thingy<> const&, Args&& ... args)
   -> decltype(f(std::forward<Args>(args)...))
{
    return f(std::forward<Args>(args)...);
} 
```

我无法完全测试事情，因为`get`在使用 const& 时由于某种原因该功能对我失败了...有点让我生气。我相当有信心这可以解决问题。

如果 idx 的参数并不总是 1，我认为可以以类似的方式转发。

# iphone - 使 iPhone 特定的应用程序在 iPad 上运行以满足 Apple 要求

> ID：10527781
> 
> 赞同：12
> 
> 时间：2012-05-10T05:03:21.710
> 
> 标签：iphone, ios, xcode, app-store, appstore-approval

我的应用程序已经在 AppStore 上架了几个月，而且一直只在 iPhone 上运行。我最近提交了一个更新，但由于该应用程序无法在 iPad 上运行而被拒绝。它被拒绝的确切原因是：

> 拒绝原因： 2.10：iPhone 应用程序也必须在 iPad 上运行，无需修改，以 iPhone 分辨率和 2X iPhone 3GS 分辨率运行

我需要在 Xcode 中做什么才能让我的应用程序在带有 2X 图标的小盒子中的 iPad 上运行？

任何提示说明将不胜感激...

*编辑* 这是我的 info.plist。这是我的第一个应用程序，我想我最初确实选择了设置它并选择了“通用”。我现在有一个简单的方法来纠正这个问题吗？

![PLIST 内容...](../Images/7623a98b0427ae920ce2f90d56683c27.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T05:07:16.080

首先弄清楚为什么您的应用程序无法在 iPad 上运行。大多数为 iPhone 开发的应用程序无需修改即可在 iPad 上正常运行（在兼容模式下）；如果你没有，你必须做一些事情来防止它。您是否依赖某些硬件功能？对您正在运行的设备做出毫无根据的假设？在 iPad 上运行时，您的应用程序如何失败？

一旦你弄清楚它为什么不起作用，你就会比现在更接近解决问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T17:45:23.123

要让您的应用程序以 iPhone 兼容模式在 iPad 上运行，您只需为 iPhone 构建应用程序。

从应用程序的 plist（nib 基础、xib 和故事板）以及 Target Build Settings Targeted Device Family 中删除所有 iPad 引用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T10:06:31.543

我遇到了同样的问题，在进行以下更改后，我能够在 ipad 上运行我的应用程序。

1.  在项目设置中将设备设置为 iPhone（以前是通用的）
2.  在 .plist 中删除了与 ipad 相关的主故事板文件基本名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T07:13:54.817

我已经使用这种情况解决了同样的问题。

您应该检查资源文件夹中的正常和视网膜图像。

您也可能在调试时遇到此错误`Could not load the "image.png" image referenced from a nib in the bundle with identifier`。

一个普通的 iPhone 应用程序必须在 iPad 上以两种（1x 和 2x）模式运行而无需修改。您可以使用 SDK Simulator 进行检查。

Apple 的 iOS 开发者门户中心的 App Store Review Guidelines 中有一个很长的列表，其中列出了 Apple 在您提交应用程序时会审查这些内容的许多内容。仔细阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-24T10:00:12.723

我将尝试解释我的问题和解决方案是什么..

我有一个`iPhone`唯一的应用程序，它主要是纵向的，但是，因为 1 或 2`UIViewControllers`必须在 all 中`UIInterfaceOrientations`，我必须`UIInterfaceOrientations`在我的`plist`.

`iPad`当在一个横向旋转并躺在桌子上的应用程序上启动应用程序时（所以有`UIDeviceOrientationFaceUp`），整个应用程序都以横向显示，这让我的 UI 完全搞砸了。

在我的 plist 或启动屏幕中，我没有引用任何与 iPad 相关的代码/设置（我使用 .xcassets 作为启动屏幕）。

我通过向我添加 1 行代码来修复它，`AppDelegate.m`该代码设置状态栏方向以强制应用程序处于纵向模式。

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO];

    //Further setup
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-09T00:47:35.257

我在使用 Cocos2d 2.0 时遇到了同样的问题

我的问题是该项目已经发展了几年，并且带有一些现在已经退化的文件，例如 RootViewController 和 UIViewController 和 MyRootViewController 等。

他们当时工作，但显然已经向今天的审查委员会举了一个旗子，因为我收到了“所有 iPhone 应用程序必须在 iPad 上运行”的拒绝通知。在大声尖叫并最终接受失败后，我认为该政策使仅制作 iPhone 应用程序变得非常困难。让我知道我是否错了。

尽管我（现在仍然）对此感到不安，但我想也许现在我至少可以用一个更优雅的解决方案来处理基本问题：设备轮换 + 内容轮换。我最终使用了一个正在开发的项目中的一些东西，该项目看起来更优雅，实际上也很有效：只需将 MyNavigationController 添加到我的 AppDelegate 的顶部。

我在下面添加了代码。我确信它可以改进。如果您可以增强它，请发表评论。

结果，我能够删除旧的 RootViewController 和 MyRootViewController 文件，因此现在更易于维护。无论如何，我从来没有很好地理解他们的目的。甩掉包袱！

这是我显示和匹配设备方向+内容方向的解决方案：

在 AppDelegate.h 我必须声明我在做什么：

//文件顶部

@interface MyNavigationController : UINavigationController @end

//在AppDelegate.h接口里面

我的导航控制器 *navController_;

//@end之前的文件底部

@property (只读) MyNavigationController *navController;

这是在我的 AppDelegate.m 顶部工作的代码

@implementation 我的导航控制器

```
// The available orientations should be defined in the Info.plist file.
// And in iOS 6+ only, you can override it in the Root View controller in the "supportedInterfaceOrientations" method.
// Only valid for iOS 6+. NOT VALID for iOS 4 / 5.

-(NSUInteger)supportedInterfaceOrientations {

UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

if (orientation == UIDeviceOrientationPortrait) {

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

        // [director_ pushScene: [IPAD scene]];

    } else {

        [[CCDirectorIOS sharedDirector] pushScene:[VerticalDisplayLayer scene]];

        return UIInterfaceOrientationMaskPortrait;

    }

} else if (orientation == UIDeviceOrientationLandscapeLeft) {

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

       //  [director_ pushScene: [IPAD scene]];

    } else {

        [[CCDirectorIOS sharedDirector] pushScene:[MainMenuScene scene]];

    }

} else if (orientation == UIDeviceOrientationLandscapeRight) {

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

        // [director_ pushScene: [IPAD scene]];

    } else {

        [[CCDirectorIOS sharedDirector] pushScene:[MainMenuScene scene]];

    }

} else if (orientation == UIDeviceOrientationPortraitUpsideDown) {

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

    } else {

        [[CCDirectorIOS sharedDirector] pushScene:[VerticalDisplayLayer scene]];

        return UIInterfaceOrientationMaskPortraitUpsideDown;

    }

} else {

    //do nothing
}

return UIInterfaceOrientationMaskLandscape; 
```

}

```
//this is the one for iOS 6
- (BOOL)shouldAutorotate {

//NSLog(@"MyNavigationController - should Rotate ToInterfaceOrientation ...");

UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

// iPhone only
if( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone ) {

    //NSLog(@"MyNavigationController - should Rotate iPhone");

    if (orientation == UIDeviceOrientationPortrait) {

        //NSLog(@"should Rotate iPhone orientation is Portrait");

        [[CCDirectorIOS sharedDirector] pushScene:[VerticalDisplayLayer scene]];

        return UIInterfaceOrientationMaskPortrait;

    }

    if (orientation == UIDeviceOrientationPortraitUpsideDown) {

        //NSLog(@"should Rotate iPhone orientation is PortraitUpsideDown");

        [[CCDirectorIOS sharedDirector] pushScene:[VerticalDisplayLayer scene]];

        return UIInterfaceOrientationMaskPortraitUpsideDown;

    }

    if (orientation == UIDeviceOrientationLandscapeLeft) {

        //NSLog(@"should Rotate iPhone orientation is Landscape Left");

        return UIInterfaceOrientationMaskLandscape;
    }

    if (orientation == UIDeviceOrientationLandscapeRight) {

        //NSLog(@"should Rotate iPhone orientation is Landscape Right");

        return UIInterfaceOrientationMaskLandscape;
    }

    return TRUE;

}

//return UIInterfaceOrientationIsLandscape(interfaceOrientation);

if( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad ) {

    //NSLog(@"MyNavigationController - should Rotate iPad");

    return TRUE;

}

return TRUE;
}

// Supported orientations. Customize it for your own needs
// Only valid on iOS 4 / 5\. NOT VALID for iOS 6.
- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{

// iPhone only
if( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone )

    return TRUE;
//return UIInterfaceOrientationIsLandscape(interfaceOrientation);

if( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad )

    return TRUE;

// iPad only
// iPhone only
//return UIInterfaceOrientationIsLandscape(interfaceOrientation);

return TRUE;
}

// This is needed for iOS4 and iOS5 in order to ensure
// that the 1st scene has the correct dimensions
// This is not needed on iOS6 and could be added to the application:didFinish...
-(void) directorDidReshapeProjection:(CCDirector*)director
{
if(director.runningScene == nil) {
    // Add the first scene to the stack. The director will draw it immediately into the framebuffer. (Animation is started automatically when the view is displayed.)
    // and add the scene to the stack. The director will run it when it automatically when the view is displayed.
    [director runWithScene: [MainMenuScene scene]];
}
}

-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
// Assuming that the main window has the size of the screen
// BUG: This won't work if the EAGLView is not fullscreen

CGRect screenRect = [[UIScreen mainScreen] bounds];
CGRect rect = CGRectZero;

//NSLog(@"MyNavigationController - Will RotateToInterfaceOrientation ...");

if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)  {

    rect = screenRect;

} else if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {

    rect.size = CGSizeMake( screenRect.size.height, screenRect.size.width );

}

CCDirector *director = [CCDirector sharedDirector];
CCGLView *glView = (CCGLView *)[director view];
glView.frame = rect;
}

@end 
```

这就是我必须解决这个问题的原因：

1.  我需要横向和纵向模式来显示不同的场景。

以下是一些描述情况的屏幕截图

![JR 化学套装](../Images/49d3d670646a16dada3ba52a01e40571.png)

![大多数应用程序方向都是横向的，就像这张照片显示的那样](../Images/357113e4c83017f3d42d4d605cc90323.png)

![其他区域仅在您转动设备时触发](../Images/a077a5692d4fc28d7b2f216991f95992.png)

![2个应用程序合二为一！](../Images/6903cb333b780b0279e911b660c05a72.png)

# php - 通过 jQuery Ajax 传递用户输入的文本，然后将结果输出给用户

> ID：10527784
> 
> 赞同：0
> 
> 时间：2012-05-10T05:03:38.183
> 
> 标签：php, jquery, mysql, zend-framework, input

在通过 ajax 发送用户输入的评论时，我需要帮助理解过滤数据的正确顺序。

我的输入文本区域数据像这样过滤

```
 $comment  = htmlentities(addslashes($_POST['comment'])); 
```

我将它输入到数据库中。我需要它只是显示符号的安全文本。现在，我需要在成员的评论中显示此内容以及他们输入的所有斜线。

我不想看到

```
 The comment\'s not so pleasant to read. 
```

我不知道如何谷歌这个问题..或制定句子。我也希望能够使用 ajax 返回格式良好的评论。谁能指出我正确的方向？我只是希望不要被黑客入侵：x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:11:40.087

您是否尝试在打印前去除斜线？

```
echo stripslashes($str); 
```

[http://php.net/manual/en/function.stripslashes.php](http://php.net/manual/en/function.stripslashes.php)

# javascript - 为什么在 IE 浏览器中右键单击会停止 javascript

> ID：10527786
> 
> 赞同：4
> 
> 时间：2012-05-10T05:03:50.183
> 
> 标签：javascript, internet-explorer, animation, right-click

我写了一个简单的 javascript 动画代码。当我右键单击文档时，javascript 动画停止并仅在上下文菜单关闭时恢复。这仅在 IE 中发生，如果我在其他浏览器中执行相同操作，动画将继续。

我想知道是否有任何解决方法，以便即使上下文菜单打开，动画也会继续。

我用谷歌搜索，我能找到的是：

1.  禁用右键单击
2.  创建自定义上下文菜单

但找不到仅在 IE 中发生这种情况的原因。

谁能解释一下为什么这只发生在 IE 中以及可能的解决方案（如果有的话）？

编辑：我已经在 Windows 中签入了 IE7、IE8 浏览器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:33:11.360

有一个名为 oncontextmenu 的事件。单击右键时，它会调用您想要的功能。例如：

```
​&lt;html>
  <head></head>
  <body oncontextmenu="document.write('hello');">
  </body>
</html​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&gt;​​​​​​ 
```

只需尝试调用该函数来运行动画两次 - 一次在页面开始时，然后通过 oncontextmenu。

**更新**

检查[这个](http://jsfiddle.net/VLCsj/16/)！此处的脚本可防止在动画期间出现原始右键单击菜单。这是我所能达到的...

# sql - 不确定如何从一个表中获取数据并将其移动到另一个表中

> ID：10527792
> 
> 赞同：3
> 
> 时间：2012-05-10T05:04:08.700
> 
> 标签：sql, sql-server-2008, tsql

我有一张桌子：

```
create table practice_table
(
    traffic_date    datetime ,
    door_one        integer ,
    door_two    integer 
) 
```

使用一些示例数据：

```
insert into practice_table(traffic_date, door_one, door_two) values ('12-Oct-2006' ,14500 ,11141)
insert into practice_table(traffic_date, door_one, door_two) values ('13-Oct-2006' ,6804 ,5263)
insert into practice_table(traffic_date, door_one, door_two) values ('14-Oct-2006' ,7550 ,6773)
insert into practice_table(traffic_date, door_one, door_two) values ('15-Oct-2006' ,6144 ,5211)
insert into practice_table(traffic_date, door_one, door_two) values ('16-Oct-2006' ,5680 ,3977)
insert into practice_table(traffic_date, door_one, door_two) values ('17-Oct-2006' ,5199 ,3918)
insert into practice_table(traffic_date, door_one, door_two) values ('18-Oct-2006' ,5298 ,3631) 
```

我正在尝试将其移动到另一个包含以下列的表（称为destination_table）中：

月（日期时间） traffic_count（整数）

如何在 SQL 中创建一个循环以在新表中为 10 月创建一行，其中包含 door_one 和 door_two 的总数，而不显式输入任何数据（例如月份）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T05:29:07.147

您可以使用光标，但如果我理解您想要做什么，那就没有必要了。

```
;WITH tmp AS (
    SELECT DATEADD(MONTH, DATEDIFF(MONTH, 0, traffic_date), 0) AS month_field, door_one, door_two
    FROM practice_table
)
INSERT INTO destination_table (month, traffic_count)
SELECT month_field, SUM(door_one + door_two)
FROM tmp
GROUP BY month_field 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T05:26:48.083

您不会创建循环；您使用 INSERT / SELECT 组合。

SQL Server 2008：

```
INSERT INTO Destination_Table(Month, Traffic_Count)
    SELECT DATEADD(day, 1 - DAY(traffic_date), traffic_date),
           SUM(door_one + door_two)
      FROM Practice_Table
     GROUP BY DATEADD(day, 1 - DAY(traffic_date), traffic_date) 
```

SQL Server 2012：

```
INSERT INTO Destination_Table(Month, Traffic_Count)
    SELECT DATEFROMPARTS(YEAR(traffic_date), MONTH(traffic_date), 1),
           SUM(door_one + door_two)
      FROM Practice_Table
     GROUP BY DATEFROMPARTS(YEAR(traffic_date), MONTH(traffic_date), 1) 
```

在这两种情况下，对于样本数据，2006 年 10 月的汇总值都将记录在 Destination_Table 中的日期 2006-10-01 之下。

我认为，表达式会生成一个 DATE，它应该自动转换为[DATETIME](http://msdn.microsoft.com/en-us/library/ms186724.aspx)。如果没有，那么您可能需要使用 DATETIMEFROMPARTS()，为时间分量指定零。

您可能还需要担心两个“门”列中的 NULL，因为您的练习桌不禁止它们。如果是这样，那么您可能使用`SUM(door_one) + SUM(door_two)`. 像这样的聚合`SUM`将忽略 NULL（或将它们视为零，如果您愿意），但如果您编写`door_one + door_two`并且其中一个或另一个为 NULL，则加法的结果将为 NULL，因此有效的非空值之一将是忽略。单独进行聚合可以避免这个问题。一般来说，我建议在任何可能的地方添加 NOT NULL，正是为了避免这样的陷阱。

# java - 时区不考虑夏令时

> ID：10527796
> 
> 赞同：2
> 
> 时间：2012-05-10T05:04:38.033
> 
> 标签：java

我正在使用时区类获取时区

```
TimeZone tz = TimeZone.getTimeZone("Australia/Brisbane"); 
```

据我所知，夏令时适用于“澳大利亚/布里斯班”时区。

但是我发现java不考虑这个时区的夏令时。

我试过运行时区更新工具，但没有帮助。请让我知道是否需要做任何额外的事情

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:06:15.907

[布里斯班](http://en.wikipedia.org/wiki/Brisbane)（及其州[昆士兰](http://echo%20%22VIEW%20VXABC%22%20%7Csed%20%27s/VIEW%20V_?X/VIEW%20ABC/%27)）不**使用**夏令时。曾经。

我绝对肯定地知道这一点（我是澳大利亚人）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:14:41.070

该类[`TimeZone`](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html)有一个名为 的方法[`useDaylightTime()`](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html#useDaylightTime%28%29)，它“查询该时区是否使用夏令时”。

这是一个快速程序告诉你答案：

```
import java.util.TimeZone;

public class DaylightSavings {
    public static void main(String[] args) {
        TimeZone tz = TimeZone.getTimeZone("Australia/Brisbane");
        System.out.println(tz.useDaylightTime());
    }
} 
```

剧透警报：它打印`false`。

# actionscript-3 - 如何在 ActionScript 对象的祖先类上调用静态函数？

> ID：10527798
> 
> 赞同：2
> 
> 时间：2012-05-10T05:04:50.537
> 
> 标签：actionscript-3, reflection, actionscript, static

Ancestor 类确实有一个名为（为了举例）“foo”的函数。

```
public static function callAncestorStaticMethod() : void
{
    var ancestorClassName : String = getQualifiedSuperclassName(Descendant);
    var ancestorClass : Class = Class(getDefinitionByName(ancestorClassName));

    ancestorClass.foo();   //  <---- runtime error here: foo is not a function
} 
```

检查祖先类发现它是一个没有可见属性的对象（ancestorClass.prototype 也没有）。

那么，当我在运行时只将其名称作为字符串时，如何在类上调用静态函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:05:12.397

我能够使用以下代码在超类中调用静态函数：

```
var c:ChildClass = new ChildClass();
var s:String = getQualifiedSuperclassName(c);
var cl:Class = getDefinitionByName(s) as Class;

cl.foo.call();  
//cl["foo"].call(); 
```

Class 对象具有 Class 的所有静态属性和方法，因此这应该是可靠的。`cl.foo`返回一个 Function 对象，然后您可以`.call()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:19:52.677

您可以使用该`constructor`属性获取对实例自己的类的引用，但要访问祖先类，您必须使用`describeType`and `getDefinitionByName`。这些功能强大，但成本高昂 - 所以请确保不要过度使用它：

```
function callStaticAncestorProperty( instance:Object, staticProperty:String ):* {
    var type:XML = describeType( instance );
    var ret:* = instance.constructor[staticProperty];
    for each(var extend:XML in type.extendsClass) 
        ret = ret ? ret : getStaticPropertyOrUndefined( extend, staticProperty );  
    return ret;
}

function getStaticPropertyOrUndefined( extend:XML, staticProperty:String ):* {
    var clazz:Class = getDefinitionByName( extend.@type.toString().replace( "::", "." ) ) as Class;
    return clazz[staticProperty] ? clazz[staticProperty] : undefined;
} 
```

这会检查类本身是否具有该属性，然后遍历每个超类型。请注意，将返回要找到的第一个值，即如果子类和超类都具有此属性，则将返回子类的属性。

*编辑*

我只是意识到你在问方法调用，而不是属性。这几乎是相同的方式：

```
function callStaticAncestorMethod( instance:Object, staticMethod:String ):void {
    var type:XML = describeType( instance );
    var method:Function = instance.constructor[staticMethod];
    for each(var extend:XML in type.extendsClass) 
        method = method ? method : getStaticMethodOrUndefined( extend, staticMethod );  
    if (method) method();
}

function getStaticMethodOrUndefined( extend:XML, staticMethod:String ):Function {
    var clazz:Class = getDefinitionByName( extend.@type.toString().replace( "::", "." ) ) as Class;
    return clazz[staticMethod] ? clazz[staticMethod] : undefined;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:06:28.240

或者（基于 Sam DeHaan 的回答）：

如果 Superclass 和 Descendant 都具有 String id 属性...

```
(getDefinitionByName(getQualifiedSuperclassName(Descendant))as Class).foo();
trace((getDefinitionByName(getQualifiedSuperclassName(Descendant))as Class).id); 
```

在哪里 ：

```
// trace (Descendant.id);
// if private : compile time Error.
// 1178: Attempted access of inaccessible property id through a reference with static type Class.
var d:Descendant;
trace((getDefinitionByName("Descendant") as Class).id);
// output undefined if private : the value if public. But don't throw compile time Error.
(getDefinitionByName("Descendant") as Class).foo();
// Call static foo() from Descendant. // Throw a compile time Error if method is private

// trace (Superclass.id);
// if private : compile time Error.
// 1178: Attempted access of inaccessible property id through a reference with static type Class.
var s:Superclass;
trace((getDefinitionByName("Superclass") as Class).id);
// output undefined if private : the value if public. But don't throw compile time Error.
(getDefinitionByName("Superclass") as Class).foo();
// Call static foo() from Superclass. // Throw a compile time Error if method is private 
```

# java - Oracle 数据库发送通知/在达到列中指定的时间时调用 java 方法

> ID：10527801
> 
> 赞同：4
> 
> 时间：2012-05-10T05:05:54.130
> 
> 标签：java, oracle, notifications, jms

我有一张包含事件详细信息的表格。新的记录将被另一个进程不断地插入到这个表中。该表有一个 Event-end-time 列。

我必须设计一种机制来调用 java 方法以在到达事件结束时间时处理事件。我有一些选择是：

1.  持续查询数据库（每 1 分钟）并找到下一个要处理的最新报告并在到达结束时间时调用它。
2.  找出 ORACLE 数据库中是否有任何内置机制来向 java 应用程序发送通知/Oracle itslef 在到达事件结束时间时调用 java 方法。

如果记录被插入/更新/删除（基于触发器），我已经看到了通知选项，但是到目前为止，如果要自定义通知条件（如果达到记录列中指定的时间），我还没有运气。

对此的任何建议将不胜感激。

问候， 迪帕克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:16:38.013

我所知道的最好的方法是通过[Oracle AQ](http://docs.oracle.com/cd/E11882_01/server.112/e11013/aq_intro.htm#ADQUE0100)（一个 JMS 实现）

还有[数据库更改通知](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_dcn.htm)，我没有任何经验，但可能是你所追求的，我相信它实际上是建立在 AQ 之上的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:54:18.897

/* 删除触发想法，因为事件结束数据已经在表中，并且当到达事件日期/时间时应该触发动作 */

由于您想在某个时间过去后触发您的事件，因此可以简单地添加一个开始日期与事件结束时间相同的 Oracle 调度程序作业。请参阅Oracle 文档站点上的[CREATE_JOB 过程。](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sched.htm#autoId38)Oracle Scheduler 非常强大，可以启动各种操作，如 pl/sql 代码、过程和 shell 脚本，可以使用凭据在本地和远程进行。

# c# - 在 App.config 中引用 sqlite 数据库

> ID：10527802
> 
> 赞同：1
> 
> 时间：2012-05-10T05:06:01.727
> 
> 标签：c#, winforms

编辑问题：对不起这个基本问题。这对我来说是一项新技术。

我正在使用带有 sqlite 的 ac#、winforms 应用程序。目前我已经在 app_data 文件夹中包含了 sqliteDb，App.Config 也有连接字符串：

```
<connectionStrings>
<clear/>
<add name ="RConnString"
providerName="System.Data.Sqlite"
connectionString="Data Source= C:\project1\R1\App_Data\RVEST_V1.DB"/>
</connectionStrings>
This RconnString is being accessed in .cs file. 
  string connString = 

ConfigurationManager.ConnectionStrings["RConnString"].ConnectionString; 
```

当我将它发送给客户端时，我将如何发送数据库。我的意思是我应该如何更改连接字符串。（而不是指我的本地 C:..）

谢谢孙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:59:54.500

尝试使用这样的相对路径

`connectionString="Data Source=App_Data\RVEST_V1.DB"`

# php - jQuery + 单选按钮

> ID：10527810
> 
> 赞同：-1
> 
> 时间：2012-05-10T05:06:57.937
> 
> 标签：php, jquery, radiobuttonlist

我有 4 个单选按钮。如果我单击 1 个单选按钮，则应打开 1 个 div，如果单击第二个单选按钮，则应打开第二个数字...

这是我的单选按钮代码

```
<div class="fLeft">
<div class="clear"><input type="radio" name="ResumeEmail[cv_format]" value="pdf" id="ResumeEmail_cv_format_0"><label for="ResumeEmail_cv_format_0" style="padding-top:0px;">PDF</label></div><br>
<div class="clear"><input type="radio" name="ResumeEmail[cv_format]" value="word" id="ResumeEmail_cv_format_1"><label for="ResumeEmail_cv_format_1" style="padding-top:0px;">WORD</label></div><br>
<div class="clear"><input type="radio" name="ResumeEmail[cv_format]" value="rtf" id="ResumeEmail_cv_format_2"><label for="ResumeEmail_cv_format_2" style="padding-top:0px;">RICH TEXT</label></div><br>
<div class="clear"><input type="radio" name="ResumeEmail[cv_format]" value="custom" id="ResumeEmail_cv_format_3"></div>                                     </div> 
```

回答我明白了

```
<script type="text/javascript">
$(document).ready(function() {
   // do stuff when DOM is ready
    $('#ResumeEmail_cv_format_0').click(function() {     
        var checked = $(this).attr('checked', true);
        if(checked)
        { 
            $("#view_resume").show();
        }
        else
        { 
            $("#view_resume").hide();
        }
    });
 });
</script> 
```

现在我想如果我从第一个、第二个和第三个单选按钮中单击任何 1。那个 div 应该打开其他不

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:21:20.100

```
$("#div1").hide();
$("#div2").hide();
$('#radiobutton1').click(function() {     
    var checked = $(this).attr('checked', true);
    if(checked)
    { 
        $("#div1").show();
    }
    else
    { 
        $("#div1").hide();
    }
});
$('#radiobutton2').click(function() {     
    var checked = $(this).attr('checked', true);
    if(checked)
    { 
        $("#div2").show();
    }
    else
    { 
        $("#div2").hide();
    }
}); 
```

# java - 枚举还是类？

> ID：10527813
> 
> 赞同：3
> 
> 时间：2012-05-10T05:07:25.173
> 
> 标签：java, oop, class, enums, singleton

我使用枚举方法实现了一个 Singleton：

```
public enum Singleton {
    INSTANCE;

    public void doStuff(String stuff) {
        System.out.println("Doing " + stuff);
    }
} 
```

我怎么称呼它是正确的（我不是说执行，只是怎么*写*）？它仍然是一个类还是现在是一个枚举？我只对理论部分感兴趣。
如果谈论面向对象和类，我可以说我创建了一个枚举类型的单例类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:14:36.730

Java 中的枚举只是一个类（您似乎知道），因此您应该可以将其称为上述任何一种。这有点主观，但我认为这取决于你想强调它的哪些方面。

*   如果你想强调这个东西可以用状态和方法实例化一个对象，把它称为一个类
*   如果要突出显示对象本身，请将其称为单例实例
*   如果您想强调它使用枚举来实现单例模式，请将其称为枚举
*   如果您想强调它是单例的事实（不提及该模式的实现方式），请将其称为单例
*   如果您想强调它是通过枚举实现的单例模式这一事实，请将其称为单例枚举

我会理解这些术语中的任何一个，并且我不会判断某人使用一个与另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:12:51.113

它是一个枚举，也是一个类。枚举是一种类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:13:44.093

在这种情况下，您创建了一个单例对象 INSTANCE，它是一个枚举（在本例中为 INSTANCE）。jvm 确保仅存在一个枚举实例；因此默认情况下它们可以被视为单例。[您可以在此处](http://en.wikipedia.org/wiki/Singleton_pattern#The_Enum_way)找到更多详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T05:14:24.393

这是一个枚举。Java 语言确保 INSTANCE 枚举值将被实例化一次（每个类加载器，因此通常每个 JVM 一次），并且 Singleton.INSTANCE 字段将允许您访问单个实例。

你也可以这样做：

```
public class Singleton {
    public static Singleton instance INSTANCE = new Singleton();

    private Singleton() { /* private ctor so people can't instantiate their own */ }
} 
```

但是枚举方法使它更干净（如果你有 JDK5 或更高版本）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T05:15:48.343

```
Java programming language enum types are much more powerful than their
counterparts in other languages. The enum declaration defines a class 
(called an enum type).
The enum class body can include methods and other fields. The compiler 
automatically adds some special methods when it creates an enum. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T05:22:58.600

它是Enum，也是Java5.0以来的一种类。

您正在使用枚举创建单例。

了解有关[枚举的更多信息](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

# java - 半透明窗口内的半透明 JPopupMenu - 替代方案？

> ID：10527815
> 
> 赞同：4
> 
> 时间：2012-05-10T05:07:28.777
> 
> 标签：java, swing, awt, translucency

我不确定这是否可能，但有没有办法安全地允许弹出窗口是半透明的，即使父容器也是半透明的？

如果不是，**那么使用或扩展代替的明智选择是`JPopupMenu`什么？**

注意：*半透明*是指组件没有“背景”，类似于`setOpaque(false);`. 谢谢。

![](../Images/d2a440d6f749a92e3a534d547e55dd76.png)

来自用户*camickr*在 2009 年的论坛回答：

> 不知道1.6.0_10的透明画有没有变化。在此之前，我相信只能在轻量级组件中实现透明度（即 Swing 完成了所有的绘制）。JFrame、JWindow 和 JDialog 不是轻量级的，因为它们使用 OS 组件。
> 
> 在弹出窗口的情况下，当它完全包含在其父框架中时，它是轻量级的。但是一个轻量级的弹出窗口不能被绘制在框架的边界之外，所以一个 JWindow（我相信）被用作弹出窗口，它不能是透明的。

**SSCCE：**在半透明 JFrame 的顶部显示半透明 JWindow

```
import com.sun.awt.AWTUtilities;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class OpaqueWindowSSCCE {

    private int countdown = 5;

    public static void main(String[] args) {
        new OpaqueWindowSSCCE();
    }

    public OpaqueWindowSSCCE() {
        final JFrame frame = new JFrame("OpaqueWindowSSCCE");
        final JWindow window = new JWindow();

        new Timer(1000, new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                if(--countdown == 0){
                    frame.dispose();
                    window.dispose();
                    System.exit(0);
                } else {
                    frame.repaint();
                }
            }

        }).start();

        frame.setContentPane(new JPanel() {

            @Override
            public void paintComponent(Graphics paramGraphics) {
                super.paintComponent(paramGraphics);
                Graphics2D g = (Graphics2D) paramGraphics.create();
                g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g.setColor(new Color(50, 50, 50));
                g.fillRoundRect(0, 0, getWidth(), getHeight(), 10, 10);
                g.setColor(new Color(180, 180, 180));
                g.drawString("Closing in " + countdown + " seconds", 20, 25);
            }
        });

        window.setContentPane(new JPanel() {

            @Override
            public void paintComponent(Graphics paramGraphics) {
                super.paintComponent(paramGraphics);
                Graphics2D g = (Graphics2D) paramGraphics.create();
                g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g.setColor(new Color(180, 180, 180));
                g.fillRoundRect(0, 0, getWidth(), getHeight(), 10, 10);
            }
        });

        frame.setUndecorated(true);

        ((JComponent) frame.getContentPane()).setOpaque(false);
        ((JComponent) window.getContentPane()).setOpaque(false);

        AWTUtilities.setWindowOpaque(frame, false);
        AWTUtilities.setWindowOpaque(window, false);

        window.setAlwaysOnTop(true);

        frame.setBounds(200,200,500,500);
        window.setBounds(600,600,200,200);
        frame.setVisible(true);
        window.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:37:11.087

试试这个代码部分，`JWindow`虽然我用过

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class WindowExample
{
    private JWindow window;
    private JLabel updateLabel;
    private int count = 5;
    private Timer timer;
    private int x;
    private int y;
    private ActionListener timerAction = new ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {
            updateLabel.setText("Closing Window in " + count + " seconds...");
            count--;
            if (count == 0)
            {
                timer.stop();
                window.setVisible(false);
                window.dispose();
            }   
        }
    };

    private void createAndDisplayGUI()
    {
        final JFrame frame = new JFrame("Window Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setUndecorated(true);
        frame.setOpacity(0.5f);
        frame.addMouseListener(new MouseAdapter()
        {
            public void mouseClicked(MouseEvent me)
            {
                x = me.getX();
                y = me.getY();
                window = new JWindow();
                JPanel contentPane = new JPanel();
                JLabel positionLabel = new JLabel(
                    "X : " + me.getX() + " Y : " + me.getY());
                updateLabel = new JLabel("TImer");  
                contentPane.setLayout(new BorderLayout(5, 5));
                contentPane.add(updateLabel, BorderLayout.CENTER);
                contentPane.add(positionLabel, BorderLayout.PAGE_END);
                window.setContentPane(contentPane);
                window.setOpacity(0.5f);
                window.setSize(200, 100);
                window.setLocation(x + window.getWidth(), y + window.getHeight());
                window.setVisible(true);
                count = 5;
                timer = new Timer(1000, timerAction);
                timer.start();
            }
        });

        frame.setSize(500, 500);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new WindowExample().createAndDisplayGUI();
            }
        });
    }
} 
```

这是输出：

![半透明](../Images/e9f865dec0af96f83eabdf23c0279944.png)

**警告我得到**

```
C:\Mine\JAVA\J2SE>javac -d classes src\OpaqueWindowSSCCE.java
src\OpaqueWindowSSCCE.java:1: warning: AWTUtilities is internal proprietary API and may be removed i
n a future release
import com.sun.awt.AWTUtilities;
                  ^
src\OpaqueWindowSSCCE.java:68: warning: AWTUtilities is internal proprietary API and may be removed
in a future release
        AWTUtilities.setWindowOpaque(frame, false);
        ^
src\OpaqueWindowSSCCE.java:69: warning: AWTUtilities is internal proprietary API and may be removed
in a future release
        AWTUtilities.setWindowOpaque(window, false);
        ^
3 warnings 
```

# iphone - NSinteger 的地址通过递增而改变

> ID：10527819
> 
> 赞同：-1
> 
> 时间：2012-05-10T05:07:59.893
> 
> 标签：iphone, objective-c, c

我正在我的应用程序中创建一个计数器。我想在发生特定更改时增加它。计数器将它的值从 0 增加到 1。然后它坚持到 1 并且进一步它不增加。这是我的代码。在 .hi 中已经这样做了。

```
@interface URLCacheConnection : NSObject {
  int                     counter; 
```

}

在 .m 中它有

```
-(void) connection:(NSURLConnection *)conn didReceiveResponse:(NSURLResponse *)response {
if ([response isKindOfClass:[NSHTTPURLResponse self]]) {

    printf("[(NSHTTPURLResponse *)response allHeaderFields] = %s\n", [[(NSHTTPURLResponse *)response suggestedFilename] cStringUsingEncoding: 1]);
    NSDictionary *dict = [(NSHTTPURLResponse *)response allHeaderFields];
    NSLog(@"allHeaderFields = %@\n", [dict description]);

    if(downloadItem.downloadStatus != DownloadStatus_resumed)
    {
        if([[NSFileManager defaultManager] fileExistsAtPath: downloadItem.fileItem.filePath]) {
            counter = counter + 1;
            NSLog(@"the value of counter is %d", counter);

            NSString * fileExtension = [downloadItem.fileItem.fileName pathExtension];

            NSString *fileName = [downloadItem.fileItem.fileName  stringByDeletingPathExtension];

            fileName = [fileName stringByAppendingFormat:@"-(%d)", counter]; 
            fileName = [fileName stringByAppendingString:[NSString stringWithFormat:@".%@",fileExtension]];

            downloadItem.fileItem.fileName  = fileName;

            downloadItem.fileItem.filePath = [NSString stringWithFormat:@"%@/%@", downloadItem.fileItem.folderPath, downloadItem.fileItem.fileName];
        }
        else {
            counter = 0;
        }
        BOOL fileCreatedFlag = [[NSFileManager defaultManager] createFileAtPath: downloadItem.fileItem.filePath contents:nil attributes:nil];
        downloadItem.fileItem.fileHandle = [NSFileHandle fileHandleForWritingAtPath: downloadItem.fileItem.filePath];
        fileCreatedFlag = fileCreatedFlag;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:52:37.653

詹姆斯这是因为`self.counter`它将返回一个值而不是变量，因此它将打印不同的地址。**请按照Keety**在上述评论中
的建议提供准确的日志和使用日志。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:44:27.513

如果下载状态恢复，则将计数器重置为 0。如果出于参数考虑，每次下载至少恢复一次，那么当您将其打印到日志时，计数器将始终为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:53:47.230

尝试这个：

```
NSInteger counter = 0;
counter = counter+1;
NSLog(@"the address of counter is %p",counter); 
```**

# jquery - 没有方法 scrollTo

> ID：10527823
> 
> 赞同：2
> 
> 时间：2012-05-10T05:08:19.837
> 
> 标签：jquery, backbone.js, scrollto

我正在尝试在backbone.js 事件函数中调用scrollTo 方法。单击列表锚点时，我想滚动到某个 div 标签。我将点击事件绑定到一个函数并在该函数中调用了 scrollTo 方法，但我得到了错误，“ **Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)}**当我单击锚点时，**没有方法“scrollTo” 。**

请帮忙！

这是一些示例代码。

```
var MenuItemListView = Backbone.View.extend({
    el: $('#menuitem_list_container'),
    initialize: function() {
        _.bindAll(this, 'render');
    },
    render: function() {
        var template = _.template( $("#menuitem_list_template").html(), {selectedindex: menuItemList.get('selectedindex'), menuitemlist: menuItemList.get('menuitemlist')});
        this.el.html(template);
        return this;
    },
    events: {
        "click .nav a":"buttonClick"
    },
    buttonClick: function(e) {
        e.preventDefault();
        target = e.currentTarget.hash;
        alert(target);
        $.scrollTo(target, 100);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:52:33.633

据我所知，您在这里所做的是错误地使用了 scrollTo 插件。`e.currentTarget.hash`将是一个字符串，scrollTo 插件允许的参数是：

*   相对选择器`$(...).scrollTo( 'li:eq(14)', 800 );`
*   jQuery 对象`$(...).scrollTo( $('div li:eq(14)'), 800 );`
*   DOM 元素`$(...).scrollTo( $('ul').get(2).childNodes[20], 800 );`
*   绝对数`$(...).scrollTo( 150, 800 );`
*   绝对数（哈希）`$(...).scrollTo( { top:800, left:700}, 800 );`
*   绝对位置`$(...).scrollTo( '520px', 800 );`
*   绝对位置（哈希）`$(...).scrollTo( {top:'110px', left:'290px'}, 800 );`
*   相对位置`$(...).scrollTo( '+=100px', 800 );`
*   相对位置（哈希）`$(...).scrollTo( {top:'-=100px', left:'+=100'}, 800 );`
*   百分比`$(...).scrollTo( '50%', 800 );`

所以你最终想要做的是找到你想要击中的锚的位置

这些是您的 Backbone 视图最终将事件绑定到的锚点：

```
<div class="nav">
  <a href="#foo">Foo</a>
  <a href="#bar">Bar</a>
</div> 
```

这些是您要达到的目标：

```
<a name="foo">Foo</a>
<a name="bar">Bar</a> 
```

所以你必须尝试找到所说的命名锚的位置：

```
var hash = e.currentTarget.hash.replace('#', '');
var $anchor = $('a[name=' + hash + ']'); 
```

然后您可以使用 jQuery 对象参数，如下所示：

```
$.scrollTo( $anchor, 800 ); 
```

那应该可以解决您的问题

# c# - 我的类在序列化过程中丢失了它的方法

> ID：10527827
> 
> 赞同：1
> 
> 时间：2012-05-10T05:08:37.657
> 
> 标签：c#, silverlight, web-services, class, asmx

### 我的问题是什么

从 ASMX 服务返回的对象用于 Silverlight 应用程序。类有方法，但 ASMX WebMethod 的结果不显示对象上的方法。

### 告诉我更多

这是我的课

```
public class Dog
{
      public string Name{get;set;}    
      public void Bark();
} 
```

这是网络方法

```
[WebMethod]
public List<Dog> Findlabrador()
{
    blah blah blah
    return list_of_labrador;
} 
```

银光代码

```
void LabradorFetchCompleted(object sender, LabradorFetchCompletedEventArgs e)
{
  var list_of_labrador = e.Result;
  foreach(var labradorDog in list_of_labrador)
  {
      labradorDog.Bark();
      //** WTH my labrador can't BARK** Bark method is not shown in intellisense there is compilation error if i explicitly specify 
  }
} 
```

### 我是程序员不是外行

好的嗯，让我把你的话。以下是您重现问题的步骤

*   创建 Silverlight 应用程序项目（让 VS 创建网站来托管应用程序）

*   创建 Silverlight 类库 在其中创建 Dog 类

*   将 Silverlight 类库编译为 assembly( `Dog.dll`)

*   在 silverlight 应用程序项目中添加对`Dog.dll`silverlight 程序集的引用

*   将 WebService 应用程序添加到项目中（ DogService.asmx 注意`asmx`扩展名）

*   添加对 Silverlight`Dog.dll`程序集的引用`DogService`

*   `hardcoded List<Dog>`从其中的 WebMethod返回类

*   添加从服务到 Silverlight 应用程序的引用，创建代理客户端实例并调用方法

*   看着你的狗也不会吠叫:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T05:14:28.657

方法从不序列化。只有数据。您的方法、事件、索引器、构造函数等**永远不会**被序列化。

无论如何，您都不应该使用 ASMX 服务。请改用 WCF。WCF 使您能够在客户端和服务之间共享数据类型。这将允许诸如“序列化方法”之类的东西：可以在客户端和服务器上使用相同的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T05:18:22.937

您应该使用可移植类库定义所有通用类， http: [//msdn.microsoft.com/en-us/library/gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx)

然后在 Silverlight 中使用 Web 服务时，您应该要求代理生成器重用这些类。这样可以确保您获得所有功能。

Web 服务定义 (WSDL) 只处理字段/属性。方法不会通过网络传输。

# html - HTML CSS 盒子容器

> ID：10527828
> 
> 赞同：2
> 
> 时间：2012-05-10T05:08:47.053
> 
> 标签：html, css, twitter-bootstrap

我有一个盒子容器，如下图所示

![在此处输入图像描述](../Images/b78d240db0a37c22f6395208b9aa8195.png)

我想以模块化方式进行编码，以便我可以使用 html css 结构来构建宽度和高度的任何大小的框。我将使用 Bootstrap 对网站进行编码

这是最好的开始方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:12:55.967

假设顶部的渐变名为 gradient.png

```
.box {
    border: 1px solid gray;
    border-radius: 3px;
    background: white url("gradient.png") ;
    background-repeat: repeat-y;
    padding-top: 20px;
} 
```

我认为这主要是不言自明的；repeat-y 只是让它在顶部重复，而不是在整个图像的其余部分重复。填充使文本不会从顶部开始。看看它如何为您工作。

顺便问一下，这是来自Apple讨论页面吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:35:20.873

我尽量保持与您的示例相似，因为我可以使用直接的 CSS。鉴于这种方法，您不会在 IE8 和更低版本中找到立即支持。

盒子本身的标记非常简单：

```
<div id="modal">
  <header><h1>Something Here</h1></header>
  <section>
    <p>Pellentesque habitant morbi tristique...</p>
  </section>
</div> 
```

可以在下面的预览图像下方找到此标记的 CSS。

演示：http: [//jsbin.com/ogesuf/5/edit](http://jsbin.com/ogesuf/5/edit)

![在此处输入图像描述](../Images/44ebe122e41432bf00ffc0ef111d4dd1.png)

```
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  #modal {
    width: 600px;
    border: 1px solid #CCC;
    box-shadow: 0 1px 5px #CCC;
    border-radius: 5px;
    font-family: verdana;
    margin: 25px auto;
    overflow: hidden;
  }
  #modal header {
    background: #f1f1f1;
    background-image: -webkit-linear-gradient( top, #f1f1f1, #CCC );
    background-image: -ms-linear-gradient( top, #f1f1f1, #CCC );
    background-image: -moz-linear-gradient( top, #f1f1f1, #CCC );
    background-image: -o-linear-gradient( top, #f1f1f1, #CCC );
    box-shadow: 0 1px 2px #888;
    padding: 10px;
  }
  #modal h1 {
    padding: 0;
    margin: 0;
    font-size: 16px;
    font-weight: normal;
    text-shadow: 0 1px 2px white;
    color: #888;
    text-align: center;
  }
  #modal section {
    padding: 10px 30px; 
    font-size: 12px;
    line-height: 175%;
    color: #333;
  }
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T05:14:40.670

如果你愿意尝试 jQuery ui，你可以简单地使用对话框来实现你想要的，这里有更多信息的链接。

[http://jqueryui.com/demos/dialog/#default](http://jqueryui.com/demos/dialog/#default)

# c++ - “取临时地址”警告

> ID：10527830
> 
> 赞同：-2
> 
> 时间：2012-05-10T05:09:13.153
> 
> 标签：c++

> **可能重复：**
> [在访问 vector<bool> 中元素的地址时获取临时地址](https://stackoverflow.com/questions/8324699/taking-address-of-temporary-while-accessing-address-of-a-element-in-vectorbool)

我在以下代码的第 7 行收到“获取临时地址”警告

```
vector<bool> boolVect;
bool x = true;
boolVect.push_back(true);
boolVect.push_back(false);
ofstream fMetaOut("tmp.txt", ios::out);
fMetaOut.write((char* )&x, sizeof(bool));
fMetaOut.write((char* )&boolVect[0], sizeof(bool));
fMetaOut.close(); 
```

为什么我在第 7 行而不是在第 6 行收到此警告？两者都使用布尔地址。
我怎样才能摆脱这个警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T05:13:33.877

`x`不是临时的，它是一个左值，一个驻留在堆栈上的自动变量。
虽然，`&boolVect[0]`不是左值。
l-value 是一个可以获取地址的实体，简而言之，一个变量，其生命周期足够长，可以驻留在内存中，以便可以通过名称对其进行寻址。

**有什么问题`vector<bool>`？？它适用于`vector<int>`**

C++ 标准库为布尔类型提供了专门的向量。目标是优化，使用比通常实现的类型更小的向量`bool`。通常的实现会为每个元素`bool`保留至少一个字节。专业化通常只在内部使用`1`一个元素的位，因此它通常小八倍。但是这种优化是有代价的： 在 C++ 中，最小的可寻址值的大小必须至少为字节。因此，向量的这种特殊化需要对引用和迭代器进行特殊处理。因此，a不能满足其他向量的所有要求。您看到的行为就是这样一个示例，其中的元素不是真正的左值。`vector<bool>``1`
`1``vector<bool>``vector<bool>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:23:50.970

与 的其他特化不同`vector`，它不管理对象`vector<bool>`数组。`bool`相反，它管理一个打包的位域。

由于这些位不可单独寻址，`boolVect[0]`因此不是对 a 的引用`bool`；它是可转换为的类型的（临时）对象`bool`. 无法获得指向矢量元素的引用或指针。

如果您想要一个可以引用的布尔标志容器，那么`vector<char>`或者`deque<bool>`可能是合适的选择。

获取的地址`x`很好，因为它是一个（非临时）`bool`对象。

# eclipse-plugin - 将下拉列表添加到表格单元格

> ID：10527835
> 
> 赞同：1
> 
> 时间：2012-05-10T05:09:44.990
> 
> 标签：eclipse-plugin, eclipse-rcp

我在 eclipse rcp 中面临一些问题，用于为特定单元格设置下拉列表。我的要求是在表格的第一行设置下拉菜单。并且该下拉列表也应该能够删除。drop 的另一件事应该能够过滤表中的内容。所以我的问题是

1）是否可以仅将下拉列表添加到特定的单元格或行？2）该过滤器可以充当表格的过滤器吗？3) 将下拉列表添加到表格单元格后，如何删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:51:46.753

是的，这是完全可能的。我建议您首先阅读[使用 SWT/JFace 构建和交付表格编辑器](http://www.eclipse.org/articles/Article-Table-viewer/table_viewer.html)，本教程包含您需要了解的所有内容。

作为一个粗略的大纲，您需要使内容模型中的第一项与您的数据项不同——它将存储过滤器值。然后在您的 s 上设置编辑支持，`TableViewerColumn`例如（这只是一个入门 - 此代码将无法单独工作）：

```
tableViewerColumn.setEditingSupport(new EditingSupport(tableViewer)
{
    @Override
    protected boolean canEdit(Object element) {
        if(object instanceof FilterDataObject) // your model object you are using to store the filter selections
        {
            return true;
        }
    }

    @Override
    protected CellEditor getCellEditor(Object element) 
    {               
        final ComboBoxCellEditor editor = new ComboBoxCellEditor(table, getPossibleFilterValues(), SWT.READ_ONLY);              
        ((CCombo)editor.getControl()).addModifyListener(new ModifyListener()
        {
            public void modifyText(ModifyEvent e) 
            {
                IStructuredSelection sel = (IStructuredSelection)m_tableViewer.getSelection();
                FilterDataObject filterValue = (FilterDataObject)sel.getFirstElement();
                // .. update the filter on your TableViewer
            }               
        });             
        return editor;
    }

    @Override
    protected Object getValue(Object element) 
    {
        if(object instanceof FilterDataObject) 
        {               
            // get the filter value
        }
        else
        {
            // get your data model's value for this column
        }
    }

    @Override
    protected void setValue(Object element, Object value) 
    {
        if(object instanceof FilterDataObject) 
        {
            // update your FilterDataObject
        }
    }       
}); 
```

# java - Spring 3.0 MultipartFile 上传

> ID：10527837
> 
> 赞同：4
> 
> 时间：2012-05-10T05:09:52.163
> 
> 标签：java, spring, multifile-uploader

我正在将 Java Web 应用程序转换为 Spring 框架，并感谢一些关于我在文件上传方面面临的问题的建议。原始代码是使用 org.apache.commons.fileupload 编写的。

1.  Spring MultipartFile 是否包装了 org.apache.commons.fileupload 或者我可以从我的 POM 文件中排除此依赖项？

2.  我看过以下示例：

    ```
    @RequestMapping(value = "/form", method = RequestMethod.POST)
    public String handleFormUpload(@RequestParam("file") MultipartFile file) {

        if (!file.isEmpty()) {
            byte[] bytes = file.getBytes();
            // store the bytes somewhere
           return "redirect:uploadSuccess";
        } else {
            return "redirect:uploadFailure";
        }
    } 
    ```

    最初我试图遵循这个例子，但总是得到一个错误，因为它找不到这个请求参数。所以，在我的控制器中，我做了以下事情：

    ```
    @RequestMapping(value = "/upload", method = RequestMethod.POST)
    public @ResponseBody
    ExtResponse upload(HttpServletRequest request, HttpServletResponse response)
    {
       // Create a JSON response object.
       ExtResponse extResponse = new ExtResponse();
       try {
           if (request instanceof MultipartHttpServletRequest)
           {
               MultipartHttpServletRequest multipartRequest =
                            (MultipartHttpServletRequest) request;
               MultipartFile file = multipartRequest.getFiles("file");
               InputStream input = file.getInputStream();
               // do the input processing
               extResponse.setSuccess(true);
            }
        } catch (Exception e) {
            extResponse.setSuccess(false);
            extResponse.setMessage(e.getMessage());
        }
        return extResponse;
    } 
    ```

它正在工作。如果有人能告诉我为什么@RequestParam 对我不起作用，我将不胜感激。顺便说一句，我确实有

```
 <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <property name="maxUploadSize" value="2097152"/>
    </bean> 
```

在我的 servlet 上下文文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-12T22:43:30.340

我不得不

1.  将 commons-fileupload 依赖项添加到我的 pom 中，
2.  添加 multipartResolver bean（在问题中提到），
3.  在 handleFormUpload 方法中使用 @RequestParam("file") MultipartFile 文件和
4.  在我的jsp中添加enctype：`<form:form method="POST" action="/form" enctype="multipart/form-data" >`

让它工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:52:51.343

1.  spring 不依赖于 commons-fileupload，所以你需要它。如果它不存在，弹簧将使用其内部机制
2.  您应该将 a`MultipartFile`作为方法参数传递，而不是`@RequestParam(..)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T15:25:19.160

这对我有用。

```
@RequestMapping(value = "upload.spr", method = RequestMethod.POST)
public ModelAndView upload(@RequestParam("file") MultipartFile file, HttpServletResponse response)
{
    //  handle file here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:00:07.440

请求参数的通用语法是 @RequestParam(value="Your value", required=true)，请求参数的模式用于从 Url 获取值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T22:50:08.283

在 Spring MVC 3.2 中引入了对 Servet 3.0 的支持。因此，如果您使用早期版本的 Spring，则需要包含 commons-file 上传。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-14T22:19:58.760

在 POST 中，您只会在请求正文中发送参数，而不是在 URL 中（您使用@RequestParams）

这就是为什么您的第二种方法有效的原因。

# android - 结束所有通话后如何触发事件？

> ID：10527840
> 
> 赞同：0
> 
> 时间：2012-05-10T05:10:44.750
> 
> 标签：android

我是安卓新手。

*   我想**触发传入和传出呼叫**，并且**应该在任何呼叫（传入和传出）开始和结束时执行代码**......
*   我知道 BroadcastReceiver 对此很有帮助。但是你能给我代码/想法吗..

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:24:51.453

这个问题在论坛上回答了很多次，请检查[Android上是否有办法拦截来电/短信以阻止/取消阻止它？](https://stackoverflow.com/questions/2406867/is-there-any-way-to-intercept-incoming-calls-sms-to-either-block-unblock-it-an)

这可能会回答你的问题。

# php - zencart中的ajax问题

> ID：10527843
> 
> 赞同：1
> 
> 时间：2012-05-10T05:11:52.113
> 
> 标签：php, ajax, zen-cart

我有每个主要类别的一些主要类别和子类别..我有一个包含主要类别的下拉列表，当我选择一个主要类别时，子类别下拉列表显示该主要类别的子类别..我为此使用以下代码，但这表明子类别框包含带有页眉和页脚的整个页面...

```
<select name="main_category" id="main_category" onchange="showSubCategory(this.value)">
        <option>--Select--</option>
</select>

<script type="text/javascript">
        function showSubCategory(str)
        {

            if (str.length==0)
            {
                document.getElementById("txtHint").innerHTML="";
                return;
            }
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            { 
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    alert(xmlhttp.responseText);
                    document.getElementById("subcategory").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","index.php?main_page=getsubcategory&cid="+str,true);
            xmlhttp.send();
        }
    </script> 
```

在 tpl_subcategory_default.php 包含

```
<?php
$cid=$_GET['cid'];
$sql="select cd.categories_name, cd.categories_id
                             from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd
                             where c.parent_id = '" . (int) $_GET['cid'] . "'
                             and c.categories_id = cd.categories_id
                             and c.categories_status= 1";

$r=mysql_query($sql);

while($row=mysql_fetch_array($r))

{
echo "<option value=$row[categories_id]>$row[categories_name]</option>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:50:30.530

它显示带有页眉和页脚的整个页面，因为您正在通过 index.php?main_page=foo 访问“页面”，但没有添加架构来用您自己的页面特定输出替换正常的模板系统输出......即: 直接跳转到输出而不首先调用出现在每个页面上的正常内容。

如果不知道您在 /includes/modules/pages/subcategory/header_php.php 文件中做了什么，或者您是否已经创建了一个，您的问题就无法真正得到准确的回答。您放入 tpl_subcategory_default.php 的代码可能会进入上面提到的 header_php.php 文件，最后是 die() 语句，并完成您似乎正在寻找的相同事情。

如果您提供有关您迄今为止所做工作的更多信息，则更容易完整地回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T07:31:53.853

要删除页眉、页脚等，您可以覆盖 tpl_main_page.php。转到此目录 /includes/templates/custom 模板。根据您的信息，您创建了 main_page=getsubcategory 页面。所以在这个目录下创建一个名为 getsubcategory 的文件夹。然后从 include/templates/custom template/common/ 复制 tpl_main_page.php 并将其粘贴到 /includes/templates/your custom template/getsubcategory。然后在 tpl_main_page.php 文件中进行以下更改。

```
if (in_array($current_page_base,explode(",",'getsubcategory')) ) {

    $flag_disable_left = true;
    $flag_disable_header = true;
    $flag_disable_footer = true;

} 
```

# .net - 泛型地狱或在 .NET 中进行程序集级别类型参数化（程序集范围的泛型）需要什么

> ID：10527848
> 
> 赞同：2
> 
> 时间：2012-05-10T05:12:27.103
> 
> 标签：.net, generics, c#-4.0, programming-languages, language-features

不知道这个问题到底是关于什么的。

这是问题所在。假设，我正在开发一个框架，该框架将被打包到一个没有可用源代码的程序集中并作为产品交付。从一开始，框架的开发就考虑到了可扩展性，我的意思是一些目标域细节/数据/类将由引用框架的最终用户/程序集定义。启用它的一种方法是在框架中使用泛型，以便稍后定义所有内容。但是，一旦将泛型引入单个类，所有依赖/引用类和方法都必须使用所有确切的约束重新声明它。传递一个泛型并不是什么大问题，但是当你必须处理时，事情很快就会失控，比如处理其中的 8 个，这一点也不罕见。在框架中的每个小类中，您必须放置几行刚刚重新声明的类型参数，这些参数在所有类中都是相同的。似乎一个快速而肮脏的解决方案只是拥有某种类似 c++ 的宏，它将向所有（大多数）类添加相同的通用声明。但是 C# 没有宏，所以你必须手动完成。这是我们提出一个问题的地方：将这些参数从括号中取出并在程序集（项目）级别声明一次需要什么？这样您就不必编写“公共类实体* 但是 C# 没有宏，所以你必须手动完成。这是我们提出一个问题的地方：将这些参数从括号中取出并在程序集（项目）级别声明一次需要什么？这样您就不必编写“公共类实体* 但是 C# 没有宏，所以你必须手动完成。这是我们提出一个问题的地方：将这些参数从括号中取出并在程序集（项目）级别声明一次需要什么？这样您就不必编写“公共类实体**< TField>* * { ... }"，因为 TField 已定义，并且无论何时看到它，这意味着该类使用与程序集级别的声明相同的声明隐式知道它。通过链接此类通用程序集，开发人员必须在它们能够使用之前提供所有类型参数，或者如果某些参数仍然未绑定，则重新声明它们以供以后使用。

问题：

*   你有没有遇到过这样的情况？
*   您认为拥有此功能可能会有所帮助吗？
*   如果是这样，您目前如何在没有人的情况下相处？
*   对于那些从事 c# 工作的人：你们有什么机会将它添加到一些新版本的 c# 中？

谢谢！

**更新：**

我不想过多介绍细节，但按照你的意愿做了。很难做出一个很好的说明性例子，所以让我分享一下现有的情况。我正在研究一个文本处理框架，其中我有一个核心库来标记文本并具有所有可能的模式来匹配它。它不知道如何处理名词和动词等词性。幸运的是，还有另一个组件可以做到这一点。现在的目标是使用来自另一个库的词性知识来扩展核心库中的模式。我这样做的方法是向名为“CustomPattern”的核心库添加了一个特殊模式，该模式由任意类参数化，可以用任何东西替换。在我们的例子中，它是 PartOfSpeach 枚举。看看[https://gist.github 上的代码段落。](https://gist.github.com/2651642).

这里的问题是，如何避免在核心库中使用 TDetails 泛型，但又能够使用附加任意数据的自定义模式？

这里唯一的要求是**我们必须保持代码的严格类型，就像现在一样**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T06:03:10.050

我不喜欢您呈现的场景，但另一种选择是嵌套类型：

```
public sealed class Foo<T> where T : Whatever {
    public class Bar { ... }

    public interface IBlap { ... }
} 
```

内部的每种类型`Foo<T>`都可以隐式访问，`T`而无需复制约束。出于代码管理的目的，可以将其拆分为多个文件，再次仅提及约束一次：

```
// file 1
partial class Foo<T> where T : IWhatever
{

}
// file 2
partial class Foo<T>
{
    public class Bar
    { ... }
}
// file 3
partial  class Foo<T>
{
    public interface IBlap
    { ... }
} 
```

但首先：理智地检查你的场景。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T05:41:37.217

> 你有没有遇到过这样的情况？

是的。

> 您认为拥有此功能可能会有所帮助吗？

我认为能够跨类定义/共享通用约束会很有用，尽管由于可能被滥用，我对任何“全局”都持谨慎态度。

> 如果是这样，您目前如何在没有人的情况下相处？

我发现我有过度使用泛型的倾向，而且——尽管它们很有用——它们并不是最适合每一项任务。

最近我承担了使我的一个框架库对 WCF 友好的任务。到我完成的时候，几乎所有的通用接口都被重新设计了，或者已经创建了一个非通用的等价物。这是由于需要简化我的界面以更好地作为操作合同和数据合同工作，但当我完成时，我得出结论认为设计更干净、更直观，我放弃的很少。

如果您评估您的设计，您可能会发现可以通过要求输入参数从基类型或接口继承来替换受严格约束的通用接口。

例如，如果类型参数 TField1 必须是 Foo 类型的可实例化类，为什么不直接将接口更改为 require Foo（或更可能是其子类）？

```
public void Act<TField> where TField : Foo, new() { } 
```

变成

```
public void Act( Foo f ) { } 
```

或者

```
public void Act( IFoo f ){ } 
```

如果类被设计为作用于输入对象，通常它必须对对象的成员和能力有一些了解。

例如，`List<T>( T obj )`实际上不需要对其他存储它的输入值做太多事情，但`TransferMoneyFromAccount<TAccount>( TAccount obj )`可能**确实**需要对输入数据做非常具体的事情。大概可以改成`TransferMoneyFromAccount( IAccount obj )`

对于您的库的使用者，我认为接口比泛型更优雅地执行合同的想法。

> 对于那些从事 c# 工作的人：你们有什么机会将它添加到一些新版本的 c# 中？

来自一个从事 c# 工作的人（Eric Lippert）：

> 经常有人问我为什么编译器不实现这个特性或者那个特性，当然答案总是一样的：因为没有人实现它。功能一开始是未实现的，只有在人们努力实现它们时才会实现：不努力，就没有功能。

取自：http: [//blogs.msdn.com/b/ericlippert/archive/2012/03/09/why-not-automatically-infer-constraints.aspx](http://blogs.msdn.com/b/ericlippert/archive/2012/03/09/why-not-automatically-infer-constraints.aspx)（巧合的是，一篇关于泛型类型约束的文章）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T05:59:06.727

您的问题非常笼统（没有双关语），这意味着您将得到通用答案。

我开发了一些考虑到可扩展性的框架（查看我的个人资料）。而且我从来不需要使用泛型来实现这一点。恕我直言，泛型用于获得通用类的类型安全性。

接口应该用于设计可扩展性框架。

（如果我误解了，请更新您的 Q）

# c# - 用于打开单个表单实例的单个可重用函数

> ID：10527850
> 
> 赞同：0
> 
> 时间：2012-05-10T05:12:46.233
> 
> 标签：c#, asp.net

我正在尝试创建一个可以打开单个表单实例的可重用函数。表示如果表单尚未打开，则应创建并显示新表单，如果已打开，则应将现有表单置于最前面。

我正在使用以下功能，

```
if (Application.OpenForms["FPSStorageDemo"] == null)
            {
                FPSStorageDemo fp = new FPSStorageDemo();
                fp.Name = "FPSStorageDemo";
                fp.Show();
            }
            else
            {
                ((FPSStorageDemo)Application.OpenForms["FPSStorageDemo"]).BringToFront();
            } 
```

但是无论我必须打开一个表单，我都必须一次又一次地编写这段代码。但我需要一个可以完成这项工作的可重用函数。

我写了一个函数，比如，

```
void OpenSingleInstanceForm(Type TypeOfControlToOpen)
        {
            bool IsFormOpen = false;
            foreach (Form fm in Application.OpenForms)
            {
                if (fm.GetType() == TypeOfControlToOpen)
                {
                    IsFormOpen = true;
                    fm.BringToFront();
                    break;
                }
            }

            if (!IsFormOpen)
            {
                Object obj = Activator.CreateInstance(TypeOfControlToOpen);
                //obj.Show(); //Here is the problem
            }
        } 
```

但最后我不知道如何显示新的表单实例。有人可以建议怎么做吗？这是错误的还是有其他方法可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:36:38.670

```
public static class FormUtility
{
public static FormType GetInstance<FormType>() where FormType : Form, new()
{
  FormType output = Application.OpenForms.OfType<FormType>().FirstOrDefault();
  if(output == null)
  {
    output = new FormType();
  }
  //you could add the show/bring to front here if you wanted to, or have the more general method
  //that just gives a form that you can do whatever you want with (or have one of each).
  return output;
}
}

//elsewhere
FormUtility.GetInstance<Form1>.BringToFront(); 
```

我还想花时间提一下，虽然像这样的方法快速且易于使用，但在大多数情况下，它们并不是好的设计。它引导您实现仅在全局范围内访问表单的做法，而不是确保当表单需要相互通信时，它们通过在适当的范围内公开适当的信息来做到这一点。它使程序更易于维护、理解、扩展、增加可重用性等。如果您无法确定两个或多个表单在不诉诸表单的公共静态引用（这正是如此`Application.OpenForms`）的情况下如何进行最佳通信，那么您应该感到免费在此处发布该问题，以便我们帮助您解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:18:54.800

你正在寻找`Singleton`

检查这个 [在 C# 中实现单例](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

# mongodb - 是否可以将查找查询的结果写入 termianl 的集合？

> ID：10527854
> 
> 赞同：0
> 
> 时间：2012-05-10T05:12:58.183
> 
> 标签：mongodb

这是我的查询。

```
db.final.find( { 'skills.skillList.skill.name' : { $exists : true } } ) 
```

我想将此查询的结果写入单独的集合。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:14:33.860

将结果获取到客户端并插入到另一个集合中。在没有检索结果的情况下，在数据库中是不可能的。

# sql-server-2008 - SQL Server - 比较两个变量

> ID：10527858
> 
> 赞同：0
> 
> 时间：2012-05-10T05:13:30.543
> 
> 标签：sql-server-2008, sql-server-2005

我希望将`@a`包含表的整个列的变量与包含单个值的另一个变量进行比较。可能吗？

```
create procedure pc1(@var int)
as begin
   declare @a int

   select @a=id from tb1

   while(if exists(@var=@a))
   begin
      select * from tb1 where id=@var
   end

   return 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:58:01.923

没有直接的方法，但您可以通过以下方式执行此操作。

```
declare @a int
Set @a = 1

if exists(
   select @a as ID
   Intersect
   Select ID 
   from tbl
)
Print('Hello') 
```

# c# - 如何在运行时在 GridView 中添加动态 Texbox？

> ID：10527859
> 
> 赞同：2
> 
> 时间：2012-05-10T05:13:31.523
> 
> 标签：c#, asp.net, vb.net, gridview

我想从代码中动态添加控件，如 GridView 中的文本框。

在我的项目中，我有一个网格，我无法确定那里有多少行和列。所以我只是给它DataSource。这工作正常。

```
GridView G = new GridView();
G.DataSourse = dt;
G.DataBind(); 
```

现在我想做这样的事情，在`Gridview`所有控件中都是`Textbox`控制的，这样我就可以在那个文本框中写了。

```
TextBox t= new TextBox();
G.Contorls.Add(t); 
```

这将引发异常...

有人对此有任何想法吗？？？

提前致谢..

问候阿米特维亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:25:35.697

为什么不使用 ItemTemplate 在设计时进行

```
 <asp:GridView ID="GrdDynamic" runat="server">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:TextBox runat="server" ID="Name" Text='<%#Eval("Name") %>'></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**编辑**

[这是一篇关于动态添加模板列](http://www.codeproject.com/Articles/13462/How-to-create-template-columns-dynamically-in-a-gr)的有趣 CodeProject 帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:37:56.387

请检查此[http://www.devasp.net/net/articles/display/708.html](http://www.devasp.net/net/articles/display/708.html)链接并使用以下代码：

```
 DropDownList ddl = new DropDownList();

        ddl.Visible = true;

        ddl.ID = "ddl1";

        ddl.Items.Add("Item1");

        TableCell cell = new TableCell();      

        gv.Rows[0].Cells.Add(cell);

        gv.Rows[0].Cells[0].Controls.Add(ddl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:41:33.657

如果您正在寻找一种在现有 GridView 中动态添加 TextBox 的方法，那么使用 GridView 的 RowDataBound 事件将是最佳解决方案。

**在 ItemTemplate 字段中添加 PlaceHolder 控件。**

```
 <asp:GridView ID="GrdDynamic" runat="server" OnRowDataBound="GridView_RowDataBound">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:PlaceHolder runat='server' ID="PlaceHolder1"></asp:PlaceHolder>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>

public void GridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    //find placeholder control
    PlaceHolder placeHolder = e.Row.FindControl("PlaceHolder1") as PlaceHolder;

    TextBox TextBox1 = new TextBox();
    placeHolder.Controls.Add(TextBox1);      
} 
```

# dynamics-crm-2011 - 当实体在 crm 2011 中打开时触发插件

> ID：10527862
> 
> 赞同：4
> 
> 时间：2012-05-10T05:13:50.023
> 
> 标签：dynamics-crm-2011

当我们从侧面导航中单击帐户实体链接时，我们能否触发插件，例如 Workplace > Account。通常我们可以创建创建或更新插件，但我需要这样的插件，它会在实体打开时触发。如果我们可以做到以上，我们在通过插件注册工具注册插件时必须写哪个Message？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:49:30.127

我自己没有尝试过，但我相信有一个插件消息“检索”。

[这里](http://davecorun.com/blog/2012/01/05/crm-2011retrieve-plugin/)有一篇简单易懂的博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:12:00.117

我能想到的一个快速*支持*[`CustomRule`](http://msdn.microsoft.com/en-us/library/gg309433.aspx "<自定义规则> (RibbonDiffXml)")的工具是使用功能区中的虚假按钮`HomepageGrid`来触发创建自定义实体，然后激活创建插件。有关详细信息，请参阅以下链接。

*   [定义功能区启用规则](http://msdn.microsoft.com/en-us/library/gg334682.aspx)
*   [从功能区 JScript CRM Online 2011 调用 C# 代码](https://stackoverflow.com/a/5093860/684271)

# iphone - iPhone 编程中的应用内购买

> ID：10527873
> 
> 赞同：0
> 
> 时间：2012-05-10T05:15:07.170
> 
> 标签：iphone, objective-c, ios5, xcode4.2, in-app-purchase

我在 App Purchases 中开发了一个应用程序。我有以下代码...在 ViewController.m 文件中，我调用了名为 InAppPurchases 的 butoon1Clicked 方法。实际上，当我第一次单击按钮时，我想执行应用内购买。如果交易成功，从下一次单击我想执行一些操作（例如，我给出了 NSLog 语句）我应该在哪里编写程序中的 NSLog stmt（或任何代码）以执行操作交易成功后的按钮。请解释我必须在哪里写。或在任何过程中向我解释。我以为我想处理 BOOL 值，但我不知道我必须在哪里将 BOOL 值设置为 YES / NO。请解释一下... MyStoreObserver.m 文件执行应用内购买交易。

视图控制器.m

```
-(IBAction)button1Clicked:(id)sender
{       
     [self callInAppPurchase];
     NSLoG(@"Perform Some Action");
}
#pragma mark-In-AppPurchase code from here
-(void)callInAppPurchase
{
    if ([SKPaymentQueue canMakePayments])
    {
        // Display a store to the user.     
    }
} 
```

AppDelegate.h

```
#import <UIKit/UIKit.h>
#import "MyStoreAbserver.h"
@interface iTeach_MathsAppDelegate : NSObject <UIApplicationDelegate> 
{
    BOOL isPurchased,isFailed;
}
@property (nonatomic, readwrite) BOOL isPurchased,isFailed;
@property (nonatomic, retain) IBOutlet UIWindow *window; 
```

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:     (NSDictionary *)launchOptions
{

      MyStoreAbserver *observer = [[MyStoreAbserver alloc] init];
       [[SKPaymentQueue defaultQueue] addTransactionObserver:observer];
      if([[[NSUserDefaults standardUserDefaults] objectForKey:@"isPurchased"] isEqualToString:@"true"])
       self.isPurchased = YES;
     else
       isPurchased = NO;
     isFailed = NO;

// Override point for customization after application launch.
[self.window makeKeyAndVisible];
return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:34:05.957

我想[你参考这个链接](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)，并实现代码......这个链接对我很有用......

购买产品时调用此函数：

```
 (void)productPurchased:(NSNotification *)notification 
```

# windows-phone-7 - 是否有一个具有类别标题的滚动查看器 WP7 控件，滚动时哪些类别标题粘在控件顶部？

> ID：10527876
> 
> 赞同：1
> 
> 时间：2012-05-10T05:15:10.280
> 
> 标签：windows-phone-7

是否有具有类别标题的滚动查看器 WP7 控件？当该类别的内容在视图中滚动时，类别标题可以粘贴在控件的顶部。如果滚动内容较长，可以让用户知道当前滚动内容的当前类别。如果当前类别内容向上滚动出屏幕，则类别标题将随之向上滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:05:53.483

我认为您指的是“LongListSelector”。

[您可以从Windows Phone SilverLight Toolkit](http://silverlight.codeplex.com/releases/view/55034)下载此控件

然后按照在线教程之一进行操作。我在这里详细描述它们有点冗长，所以我建议通过这些链接之一（或谷歌你自己的）查看工作：

[Windows Phone LongListSelector 深入](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)

[Windows Phone LongListSelector 演练](http://www.windowsphonegeek.com/articles/LongListSelector-walkthrough)

# facebook - 在应用程序中显示朋友

> ID：10527877
> 
> 赞同：0
> 
> 时间：2012-05-10T05:15:11.723
> 
> 标签：facebook, facepile

我有一个 FB 应用程序。我需要有一个类似于华盛顿邮报阅读器上的功能，它可以在应用程序上显示朋友。

是FB脸皮吗？如果是这样，那么他们是如何实现用一个按钮显示超过 4 个朋友的呢？他们是否在服务器端实现了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:31:13.340

您可以使用 FQL 检索使用同一应用程序的朋友。
只需使用下面的查询，您应该能够获得 frineds 的 uid、name 和 is_app_user。
*is_app_user* 指示给定用户是否正在使用您的应用程序。

> select uid, name, is_app_user from user where uid in (select uid2 from friend where uid1=me()) and is_app_user=1

# android - 从堆栈中弹出已知数量的活动

> ID：10527879
> 
> 赞同：1
> 
> 时间：2012-05-10T05:15:31.737
> 
> 标签：android, android-activity, activity-stack

在构建应用程序的过程中，我有一个 Activity 让我们称之为**A**，我多次打开，如**A(1)** -> **A(2)** -> **A(3)** -> ... -> **A( m)** -> ... -> **A(n)**。

在我想一直弹回**A(m)**的应用程序中，有没有办法将活动一直弹回选定的活动？

我已经看到了一些带有[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)的答案，但在我看来，这只是为了清除整个堆栈并转到堆栈中的第一个元素，这不是我想要得到的。

***更新：***

我在这里想要实现的目标如下：我有一个问题列表，用户可以为每个问题选择不同的答案。

一旦他选择，问题和答案就会进入历史列表，并提示另一个问题。在任何给定点，用户都可以单击历史按钮并返回到他选择的问题。

所有的问答活动都是一样的，所以回到一个问题意味着弹出堆栈直到到达那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:42:53.620

如果我理解正确，您是说您有 N 个 SAME 活动并希望回到堆栈中的某个任意起点活动？

我不完全清楚你是否提前知道你的“粘性”活动之前的所有活动都应该完成，或者这是否是在途中的某个地方确定的

我不知道当 N 个活动是重复活动时将它们从堆栈中弹出的任意方式，但是您可以自己滚动，例如（未完成的代码）

如果您提前知道 A(M) 在启动下一个活动之前将是粘性的，那么您可以告诉每个前向活动，一旦它启动新任务，它就需要通过传递一个标志来杀死自己，然后当链中的最后一个活动结束，您回到 A(M)

```
in A(...) 
startSelf()
{

   Intent I = new Intent(this,MyActivity.class);
   if (bFinishSelf || bFinishForward) 
     I.putExtra("finishself", 1);

   if (Finishelf)  
     finish();

   startActivity(I); 

in ... all A(...) onCreate( ... 

Bundle b = getIntent().getExtras(); 
if(b !=null && extras.getInt("finishself");
  bFinishSelf = true; 
```

然后，当您开始一项新活动时，检查是否设置了 finishself 标志，如果是，则在开始新活动后调用 finish() ...

另一方面，如果 A(z) 是决定你需要返回 A(...) 的那个，那么我猜在 A(z) 中你可以告诉调用的父母他们需要自杀直到到达数据中包含的一些 ID ...

A(M) startActivityForResult(...)

A(Z) 以某种方式确定 A(M) 应该是粘性活动...

```
finshAndStopAt(int ID) {
  Intent I = new Intent(); 
  I.putExtra("finish",ID); 

  if (getParent() == null) {
    setResult(Activity.RESULT_OK, I); 
  } else {
    getParent().setResult(Activity.RESULT_OK, I); 
  }
  finish(); 
```

}

所有 A(z ... m)（父母的）都将监控返回数据

```
@Override void onActivityResult(int requestCode, int resultCode, Intent data) {

    // If we are asked to finish ourselves, pass it on ...    
    if (null != data && data.getInt("finish",stopAt) != myID) {
       if (getParent() == null) {
          setResult(Activity.RESULT_OK, data); 
       } else {
          getParent().setResult(Activity.RESULT_OK, data); 
       finish();
    }
    // else we can hang around and are the sticky activity
} 
```

这有点痛苦，也许有人知道更简单的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:20:27.410

作为一个通用的响应，我会说继续弹出，直到弹出返回的 Activity 是您想要的，然后可能将其推回（如果需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:24:24.587

你考虑过使用 Fragments 吗？通过这种方式，您可以使用 FragmentManager 类的实例来处理您通过 FragmentTransaction 类的方法生成的片段历史记录。您还可以标记您的事务，然后将所有返回堆栈状态弹出到具有给定名称的事务。
我不知道活动是否有类似的方法。
看看这里： http:
[//developer.android.com/reference/android/support/v4/app/FragmentManager.html](http://developer.android.com/reference/android/support/v4/app/FragmentManager.html)
[http://developer.android.com/reference/android/support/v4/app/FragmentTransaction。 html](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html)
如果您使用支持库，则不必担心您的目标 SDK。

# javascript - 速度数组到 javascript 数组

> ID：10527883
> 
> 赞同：5
> 
> 时间：2012-05-10T05:15:41.803
> 
> 标签：javascript, velocity

我需要将速度字符串数组传递给 JavaScript 函数。因此，为此，我想将速度数组转换为 JavaScript 数组。

源代码如下所示：

```
String[] arrStr[] = new String[3];
arrStr[0] = "String 1";
arrStr[1] = "String 2";
arrStr[2] = "String 3";
request.setAttribute("a", arrStr); 
```

在我的 HTML 模板中，

```
#set ( #arr = $request.getAttribute("a"))

<script language="javascript">

var newArr = "${arr}";

</script> 
```

但字符串数组不会复制到 newArr。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:44:12.647

就像是：

```
var newArr = [ 
#foreach( $var in $arr )#if($foreach.index>  0),#end "$var" #end 
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-06T08:32:09.293

这是一个非常好的问题，我尝试了无数的解决方案，但似乎没有任何合理的方法无法制作字符串数组，一切都导致 [param1, param2] 而不是 ["param1", "param2"] 和错误 "param1没有定义”。

但是，我能够通过使用 #foreach 作为参数和休息参数来解决它。

在 HTML 中：

```
functionName(
  #foreach($obj in $array)
      #if ($velocityCount != $array.size())'$obj',
      #else'$obj'
      #end
  #end
) 
```

在 Javascript 中：

```
functionName(...args) 
```

...args 是一个[剩余参数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)，它“将不定数量的参数表示为一个数组”。所以如果你需要数组以外的其他参数，记得把它们放在数组之前：

```
functionName(param1, param2, ...args) 
```

# xaml - 创建带有附加属性的 ControlTemplate

> ID：10527885
> 
> 赞同：1
> 
> 时间：2012-05-10T05:16:09.697
> 
> 标签：xaml, windows-8, windows-runtime, controltemplate, attached-properties

我实际上是在尝试创建一个带有图像背景和边框的按钮，如果它是悬停的、单击的或默认状态，它会根据它改变颜色。我将使用其中几种类型的按钮，并且我希望定义一个可以重用和更改 ImageSource 的 ControlTemplate。这是我到目前为止所拥有的，但由于某种原因 TemplateBinding 似乎不起作用。这些按钮没有设置背景图像。

模板：

```
 <ControlTemplate x:Name="SkillIconTemplate" TargetType="Button">
        <Border CornerRadius="10" BorderThickness="2" Margin="5">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualStateGroup.Transitions>
                        <VisualTransition To="MouseOver" GeneratedDuration="0:0:0.1"/>
                        <VisualTransition To="Pressed" GeneratedDuration="0:0:0.1"/>
                    </VisualStateGroup.Transitions>
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="MouseOver">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BorderBrush" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="Yellow" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BorderBrush" 
                                                    Storyboard.TargetProperty="Color"
                                                    To="Black"/>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Border.BorderBrush>
                <SolidColorBrush x:Name="BorderBrush" Color="White"/>
            </Border.BorderBrush>
            <Border.Background>
                <ImageBrush ImageSource="{TemplateBinding local:SkillIcon.IconImageSource}"/>
            </Border.Background>
        </Border>
    </ControlTemplate> 
```

纽扣：

```
 <Button x:Name="skillIcon0" Width="75" Height="75" ClickMode="Press" local:SkillIcon.IconImageSource="ms-appx:/data/images/icons/skill_icon_0.png" Template="{StaticResource SkillIconTemplate}"/>
    <Button x:Name="skillIcon1" Width="75" Height="75" ClickMode="Press" local:SkillIcon.IconImageSource="ms-appx:/data/images/icons/skill_icon_1.png" Template="{StaticResource SkillIconTemplate}"/>
    … 
```

物业代码：

```
public abstract class SkillIcon : DependencyObject
{
    public static readonly DependencyProperty IconImageSourceProperty = DependencyProperty.RegisterAttached(
        "IconImageSource", 
        typeof(ImageSource), 
        typeof(SkillIcon),
        new PropertyMetadata(GetIconImage(0))
        );

    public static ImageSource GetIconImageSource(DependencyObject obj)
    {
        return (ImageSource)obj.GetValue(IconImageSourceProperty);
    }

    public static void SetIconImageSource(DependencyObject obj, ImageSource value)
    {
        obj.SetValue(IconImageSourceProperty, value);
    }

    /// <summary>
    /// Gets the image source for the button
    /// </summary>
    public static ImageSource GetIconImage(int index)
    {
        Uri source = new Uri(string.Format("ms-appx:/data/images/icons/skill_icon_{0}.png", index), UriKind.RelativeOrAbsolute);
        return new BitmapImage() { UriSource = source };
    }
} 
```

代码中的用法：

```
 SkillIcon.SetIconImageSource(skillIcon0, SkillIcon.GetIconImage(0)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T03:18:12.990

我最终将 Button 的背景绑定到边框的背景：

```
 <ControlTemplate x:Name="SkillIconTemplate" TargetType="Button">
        <Border CornerRadius="10" BorderThickness="2" Margin="5" Background="{TemplateBinding Background}">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualStateGroup.Transitions>
                        <VisualTransition To="MouseOver" GeneratedDuration="0:0:0.05"/>
                        <VisualTransition To="Pressed" GeneratedDuration="0:0:0.05"/>
                    </VisualStateGroup.Transitions>
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="MouseOver">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BorderBrush" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="Yellow" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BorderBrush" 
                                                    Storyboard.TargetProperty="Color"
                                                    To="Black"/>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Border.BorderBrush>
                <SolidColorBrush x:Name="BorderBrush" Color="White"/>
            </Border.BorderBrush>
        </Border>
    </ControlTemplate> 
```

# php - 将 1 周添加到 php 中的现有日期变量

> ID：10527887
> 
> 赞同：0
> 
> 时间：2012-05-10T05:16:16.450
> 
> 标签：php

我编写了将 12 周添加到星期六的代码并存储在一个变量中，现在我想用另一个变量为存储在 12 周中的变量添加 1 周。我写了它，但它显示错误消息“ 1970/jan/08”日期。我把代码写成

```
$month = 2;
$year = 2012;
$saturday = strtotime('First Saturday '.date('F o',
    mktime(0,0,0, $month, 1, $year)));
echo date('Y/M/d', $saturday);
echo "<br/>";
$season1 = strtotime ( '+12 week' , $saturday);
$season1= date ( 'Y/M/d' , $season1 );
echo $season1;
echo "<br/>";
echo "<br/>";
$abc = strtotime ('+1 week' , $season1);
$abc = date ('Y/M/d', $abc);
echo "<br/>";
echo $abc; 
```

在 $abc 变量中我得到了错误。任何人都可以帮我解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:18:20.587

strtotime() 的第二个参数必须是一个TIME 值，例如一个整数。你在这里传递一个字符串：

```
$abc = strtotime ('+1 week' , $season1);
                             ^^^^^^^^^---- 
```

在这被调用时，$season1 是您通过`date()` 调用创建的字符串：

```
$season1= date ( 'Y/M/d' , $season1 ); 
```

# string - 没有 EOF 字符的 Burrows-Wheeler 变换

> ID：10527889
> 
> 赞同：6
> 
> 时间：2012-05-10T05:16:20.833
> 
> 标签：string, algorithm, sorting, burrows-wheeler-transform

我需要在线性时间内执行著名的 Burrows-Wheeler 变换。我找到了一个带有后缀排序和 EOF 字符的解决方案，但是附加 EOF 会改变转换。例如：考虑字符串`bcababa` 和两个旋转

*   s1 =`abababc`
*   s2 =`ababcab`

很明显 s1 < s2。现在使用 EOF 字符：

*   s1 = ababa#bc
*   s2 = aba#bcab

现在 s2 < s1。并且由此产生的转变会有所不同。如何在没有 EOF 的情况下执行 BWT？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T01:21:43.700

通过计算与自身连接的字符串的后缀数组，您可以在没有 EOF 字符的情况下在线性时间和空间中执行转换。然后遍历后缀数组。如果当前后缀数组值小于`n`，则将旋转的最后一个字符添加到输出数组中，该字符从后缀数组中当前值表示的位置开始。但是，这种方法将产生稍微不同的 BWT 转换结果，因为字符串旋转没有像 EOF 字符一样进行排序。

更详尽的描述可以在这里找到：[http ://www.quora.com/Algorithms/How-I-can-optimize-burrows-wheeler-transform-and-inverse-transform-to-work-in-On-time -在空间](http://www.quora.com/Algorithms/How-I-can-optimize-burrows-wheeler-transform-and-inverse-transform-to-work-in-O-n-time-O-n-space)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:23:21.707

您需要在字符串中包含 EOF 字符才能使 BWT 工作，否则您将无法执行逆变换以获取原始字符串。如果没有 EOF，字符串 "ba" 和 "ab" 具有相同的转换版本 ("ba")。使用 EOF，变换是不同的

```
ab        ba

a b |     a | b
b | a     b a |
| a b     | b a 
```

即ab 转换为“|ab”，ba 转换为“b|a”。

BWT 需要 EOF，因为它标记了字符循环的开始点。

回复：根据维基百科，在没有 EOF 字符的情况下进行操作，

> 由于输入字符串的任何旋转都将导致相同的转换字符串，因此如果不向输入添加“EOF”标记或使用诸如索引之类的信息来增加输出，则无法反转 BWT，从而可以识别从其所有旋转的类中输入字符串。
> 
> 有一个**双射版本的变换**，转换后的字符串唯一地标识原始版本。在这个版本中，每个字符串都有一个相同长度的唯一倒数。
> 
> 双射变换是通过首先将输入分解为林登词的非递增序列来计算的；Chen-Fox-Lyndon 定理存在这样的因式分解，并且可以在线性时间内找到。然后，算法将所有这些单词的所有旋转排序在一起；就像在通常的 Burrows-Wheeler 变换中一样，这会产生 n 个字符串的排序序列。然后通过在这个排序列表中选择每个字符串的最后一个字符来获得转换后的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-18T13:25:08.567

我知道这个线程很老，但我遇到了同样的问题并提出了以下解决方案：

*   找到字典顺序的最小字符串旋转并保存偏移量（需要反转）（我使用lydon分解）
*   在旋转的字符串上使用正常的 bwt 算法（这会产生正确的输出，因为所有算法都假定字符串后面跟着字典最小的字符）
*   反转：unbwt 使用例如从索引 0 开始的向后搜索并将对应的字符写入保存的偏移量

# ruby-on-rails - Heroku NoMethod 错误，remember_token=

> ID：10527892
> 
> 赞同：5
> 
> 时间：2012-05-10T05:16:53.557
> 
> 标签：ruby-on-rails, heroku, nomethoderror

我的应用程序在本地运行没有任何问题，但是一旦我将它推送到 Heroku，日志就会显示 NoMethodError。浏览我的代码，我并没有真正立即看到我缺少什么。特别是，为什么它会在本地工作，但在 Heroku 上会抛出 NoMethod？

## 错误

```
Started POST "/users" for <IP>
Processing by UsersController#create as HTML
Completed 500 Internal Server Error in 102ms

app/models/user.rb:38:in `create_remember_token'
app/controllers/users_controller.rb:28:in `create'

NoMethodError (undefined method `remember_token=' for #<User:0x000000052e8fb0>): 
```

## 用户.rb

```
class User < ActiveRecord::Base
attr_accessible :email, :name, :password, :password_confirmation, :image
has_secure_password
has_many :microposts, dependent: :destroy
mount_uploader :image, AvatarUploader

before_save { |user| user.email = email.downcase }
before_save :create_remember_token

validates :name, presence: true,
        length: { maximum: 50}
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence: true,
        format: { with: VALID_EMAIL_REGEX },
        uniqueness: { case_sensitive: false }

validates :password, length: {minimum: 6}
validates :password_confirmation, presence: true

private
def create_remember_token
  self.remember_token = SecureRandom.urlsafe_base64
end 
```

## 用户控制器.rb

```
class UsersController < ApplicationController
before_filter :signed_in_user, only: [:index, :edit, :update, :destroy]
before_filter :correct_user,   only: [:edit, :update]
before_filter :admin_user,     only: :destroy

def index
  @users = User.paginate(page: params[:page])
end

def show
  @user = User.find(params[:id])
  @microposts = @user.microposts.paginate(page: params[:page])
end

def new
  @user = User.new
end

def destroy
  User.find(params[:id]).destroy
  flash[:success] = "User destroyed."
  redirect_to users_path
end

def create
  @user = User.new(params[:user])
  if @user.save
  sign_in @user
  flash[:success] = "Welcome to El Beano"
  redirect_to @user
else
  render 'new'
  end
end

def edit
  @user = User.find(params[:id])
end

def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:success] = 'Profile updated'
    sign_in @user
    redirect_to @user
  else
    render 'edit'
  end
end

private

  def correct_user
    @user = User.find(params[:id])
    redirect_to(root_path) unless current_user?(@user)
  end

  def admin_user
    redirect_to(root_path) unless current_user.admin?
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:19:13.077

看起来您已将代码上传到 Heroku，但创建该列的数据库迁移未运行或未正确运行。

您能验证该列是否存在吗？

此外，您是否尝试过在您的 heroku 实例上登录控制台会话：

```
heroku run bash --app my_app
bundle exec rails c 
```

然后测试您是否可以在该环境中访问该属性？

# sql-server - SQL Server 批量更新锁定

> ID：10527893
> 
> 赞同：0
> 
> 时间：2012-05-10T05:17:00.210
> 
> 标签：sql-server, locking

考虑这个陈述：

```
update TABLE1 
set FormatCode = case T.FormatCode when null then TABLE1.FormatCode else T.FormatCode end,
    CountryCode = case T.CountryCode when null then TABLE1.CountryCode else T.CountryCode end 
    <SNIP ... LOTS of similar fields being updated> 
FROM TABLE2 AS T 
WHERE TABLE1.KEYFIELD = T.KEYFIELD 
```

`TABLE1`被其他应用程序使用，因此对其的锁定应该是最小 `TABLE2`的，其他人都不使用它，所以我不在乎。

`TABLE1``TABLE2`每个包含 600K 行。

上面的语句会导致表锁定`TABLE1`吗？

如何修改它以使其上的锁定最小？

也许使用游标`TABLE2`逐一读取行，然后为每一行更新相应的行`TABLE1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:19:35.543

Sql 将首先使用行锁。如果索引页中有足够多的行被锁定，SQL 将发出页锁。如果有足够多的页面被锁定，SQL 将发出一个表锁。

所以这真的取决于发出了多少锁。您可以在更新语句中使用锁定提示 ROWLOCK。不利的一面是，您可能会拥有数千个行锁，而不是数百个页锁或一个表锁。锁使用资源，因此虽然 ROWLOCK 提示可能不会发出表锁，但它可能会更糟，因为它可能会使您的服务器资源匮乏并在任何情况下减慢它的速度。

您可以一次批量更新 1000 个。光标真的会更多地报道事情。实验监视器分析结果并根据您收集的数据做出选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:30:13.560

正如`marc_s`所建议的那样，引入更具限制性的 WHERE 子句来减少行数应该会有所帮助。

由于您的更新每晚发生一次，因此您似乎只希望更新自上次更新以来已更新的记录（即一天的更新）。但这只会在部分记录发生变化而不是全部发生变化的情况下对您有利。

我可能会尝试为已更改为临时表的行选择 Id，然后将临时表作为更新的一部分加入。要确定 Id 的列表，请考虑如何执行此操作的几个选项，例如使用 TABLE2 上的`last changed`列（如果 TABLE2 有一个）；或者，您可以比较 TABLE1 和 TABLE2 之间的每个字段以查看它们是否不同（注意空值），尽管这将包含很多额外的 sql，并且可能会带来维护问题。我能想到的第三个选项是对 TABLE2 设置一个 UPDATE 触发器，以便将白天更新的行的 KEYFIELD 插入到我们的临时表中，可以在每晚更新后清除临时表。

# javafx-2 - JavaFX 2.0 中带有表格视图的弹出窗口

> ID：10527895
> 
> 赞同：2
> 
> 时间：2012-05-10T05:17:19.150
> 
> 标签：javafx-2

我想单击一个按钮以显示一个弹出窗口，其中包含一个 tableview 元素。谁能告诉我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T17:04:34.930

这是JavaFX中简单弹出窗口的代码。希望这可以帮助。

```
public class PopupExample extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(final Stage primaryStage) {
        primaryStage.setTitle("Popup Example");
        final Popup popup = new Popup();
        popup.setX(300);
        popup.setY(200);
        popup.getContent().addAll(new Circle(25, 25, 50, Color.AQUAMARINE));

        Button show = new Button("Show");
        show.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                popup.show(primaryStage);
            }
        });

        Button hide = new Button("Hide");
        hide.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                popup.hide();
            }
        });

        HBox layout = new HBox(10);
        layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
        layout.getChildren().addAll(show, hide);
        primaryStage.setScene(new Scene(layout));
        primaryStage.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:20:52.637

你需要什么样的弹出窗口？使用新的`Stage`或`Popup`控件实现？JavaFX 有一个名为 Popup 的控件，请阅读它以了解它是否满足您的需求。Stage 版本的入口点可以是[Dialog with CLOSE button](http://java-buddy.blogspot.com/2012/02/dialog-with-close-button.html)。

# wpf - WPF DataTrigger 适用于图像但不适用于路径

> ID：10527897
> 
> 赞同：4
> 
> 时间：2012-05-10T05:17:45.493
> 
> 标签：wpf, xaml, datatrigger

当我禁用按钮并在启用时清晰显示时，以下内容会使图像变暗：

 `````
<Style TargetType="{x:Type Image}">
    <Style.Triggers>
      <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type UIElement}, AncestorLevel=1}, Path=IsEnabled}" Value="False">
      <Setter Property="Opacity" Value="0.25"></Setter>
    </DataTrigger>
    </Style.Triggers>
</Style>
...
<Button Name="btnPageFirst" IsEnabled="False">
    <Image Source="..\Resources\imgMoveFirst.png" />
</Button> 
````  `我想做一个类似的效果，但使用路径。我想把图像变灰。但它没有变灰，也没有错误。

 ````
<Style TargetType="{x:Type Path}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type UIElement}, AncestorLevel=1}, Path=IsEnabled}" Value="False">
            <Setter Property="Fill" Value="Gray"></Setter>
        </DataTrigger>
    </Style.Triggers>
</Style>
...
<Button Name="btnPageFirst" IsEnabled="False">
    <Path Data="F1M820.557,535.025L838.189,535.024 817.857,555.36 857.82,555.36 857.82,568.301 817.998,568.301 838.226,588.531 820.557,588.499 793.82,561.765 820.557,535.025z" Stretch="Uniform" Fill="DodgerBlue" Width="16" Height="16" Margin="0,0,0,0" />
</Button> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T05:40:57.017

有一个[优先顺序](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)用于在运行时计算依赖属性的值。

过于简单的优先级列表：

1.  本地值（您在控件上设置的值）
2.  触发器
3.  样式设置器

您的问题是您`Fill="DodgerBlue"`在路径上设置，因为它的优先级高于触发器，这是您看不到填充变化的方式。这也是它适用于您的`Image`原因，因为您没有直接设置不透明度。

为了使它工作：

1.  `Fill="DodgerBlue"`从你的路径中删除
2.  将其设置为您的风格：

    ```
    <Style TargetType="{x:Type Path}">
        <Style.Setters>
            <Setter Property="Fill" Value="DodgerBlue"/>
        </Style.Setters>
        <Style.Triggers>
           <!-- ... -->
        </Style.Triggers>
    </Style> 
    ```

附带说明：如果您总是在按钮中“内部”，则可以将其重写`RelativeSource`为：

```
RelativeSource={RelativeSource AncestorType={x:Type Button}} 
``````

# c++ - 为什么 CPU 时间为负数

> ID：10527899
> 
> 赞同：0
> 
> 时间：2012-05-10T05:18:09.637
> 
> 标签：c++, c, linux, timing

我正在尝试测量以下代码的 CPU 时间 - struct timespec time1, time2, temp_time;

```
 clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time1);

          long diff = 0;

          for(int y=0; y<n; y++) {

                for(int x=0; x<n; x++) {

                float v = 0.0f;

                 for(int i=0; i<n; i++)

                     v += a[y * n + i] * b[i * n + x];

                       c[y * n + x] = v;

                   }

            }
        clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time2);

        temp_time.tv_sec = time2.tv_sec - time1.tv_sec;

        temp_time.tv_nsec = time2.tv_nsec - time1.tv_nsec;

        diff = temp_time.tv_sec * 1000000000 + temp_time.tv_nsec; 

       printf("finished calculations using CPU in %ld ms \n", (double) diff/1000000); 
```

但是当我增加 n 的值时，时间值是负的。代码打印 n = 500 的正确值，但它打印 n = 700 的负值 任何帮助将不胜感激。

这是完整的代码结构 -

```
void run(float A[], float B[], float C[], int nelements){
    struct timespec time1, time2, temp_time;

          clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time1);

          long diff = 0;

          for(int y=0; y<nelements; y++) {

                for(int x=0; x<nelements; x++) {

                float v = 0.0f;

                 for(int i=0; i<nelements; i++)

                     v += A[y * nelements + i] * B[i * nelements + x];

                       C[y * nelements + x] = v;

                   }

            }
        clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time2);

        temp_time.tv_sec = time2.tv_sec - time1.tv_sec;

        temp_time.tv_nsec = time2.tv_nsec - time1.tv_nsec;

        diff = temp_time.tv_sec * 1000000000 + temp_time.tv_nsec; 

       printf("finished calculations using CPU in %ld ms \n"(double) diff/1000000); 
} 
```

这个函数 abovr 从不同的 fil 调用如下：

```
SIZE = 500;

a = (float*)malloc(SIZE * SIZE * sizeof(float));

b = (float*)malloc(SIZE * SIZE * sizeof(float));

c = (float*)malloc(SIZE * SIZE * sizeof(float));

//initialize a &b
run(&a[SIZE],&b[SIZE],&c[SIZE],SIZE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:24:02.590

看起来像溢出使用`unsigned long`或更`double`适合`diff`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:52:50.457

'tv_nsec' 字段不应超过 10^9 (1000000000)，原因很明显：

```
if (time1.tv_nsec < time2.tv_nsec)
{
    int adj = (time2.tv_nsec - time1.tv_nsec) / (1000000000) + 1;

    time2.tv_nsec -= (1000000000) * adj;
    time2.tv_sec += adj;
}

if (time1.tv_nsec - time2.tv_nsec > (1000000000))
{
    int adj = (time1.tv_nsec - time2.tv_nsec) / (1000000000);

    time2.tv_nsec += (1000000000) * adj;
    time2.tv_sec -= adj;
}

temp_time.tv_sec = time1.tv_sec - time2.tv_sec;
temp_time.tv_nsec = time1.tv_nsec - time2.tv_nsec;

diff = temp_time.tv_sec * (1000000000) + temp_time.tv_nsec; 
```

此代码可以简化，因为它不对“tv_sec”字段的符号做任何假设。大多数 Linux sys 头文件（和 glibc？）都提供宏来正确处理这种 timespec 算术，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:04:07.797

可能的问题原因之一是`printf`格式是长有符号整数值 ( `%ld`)，但参数具有双精度类型。要解决此问题，必须更改`%ld`格式`%lf`字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:05:48.440

查看您的打印声明：

```
printf("finished calculations using CPU in %ld ms \n", (double) diff/1000000); 
```

您传递的第二个参数是一个双精度参数，但您将此浮点值打印为一个长整数 (%ld)。我怀疑这是你问题的一半。

这可能会产生更好的结果：

```
printf("finished calculations using CPU in %f ms \n", diff/1000000.0); 
```

我也同意 keety，您可能应该使用无符号类型，或者您可以通过保持毫秒单位而不是纳秒来完全避免溢出问题。这就是为什么我坚持使用 64 位无符号整数并且只停留在毫秒领域的原因。

```
unsigned long long diffMilliseconds;

diffMilliseconds = (time2.tv_sec * 1000LL + time2.tv_nsec/1000000) - (time1.tv_sec * 1000LL + time1.tv_nsec/1000000);

printf("finished calculations using CPU in %llu ms \n", diffMilliseconds); 
```

# linux - d2：没有得到任何回溯信息

> ID：10527901
> 
> 赞同：4
> 
> 时间：2012-05-10T05:18:20.350
> 
> 标签：linux, d, backtrace

我正在使用 gtkd 包装器生成器，并遇到 std.conv 异常，我根本无法获得任何符号调试信息。我用调试符号编译：

```
$ dmd -gc -debug utils/HTODConvert.d utils/WrapperIF.d utils/funct.d utils/DefReader.d utils/GtkWrapper.d utils/HtmlStrip.d utils/IndentedStringBuilder.d utils/convparms.d utils/GtkDClass.d -ofgtkwrap 
```

但回溯只是内存地址列表：

```
std.conv.ConvException@/usr/include/d/std/conv.d(1779): Unexpected ' ' when converting from type string to type int
----------------
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x805c4ab]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x805c57a]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x806d49e]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x806924e]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8068c4a]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8066aed]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8066824]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x806388f]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x806367c]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x805e988]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x805e910]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x805e793]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x805d6f5]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8060176]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8071140]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8070c50]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8071182]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8070c50]
/home/martin/code/d/GtkD/wrap/gtkwrap() [0x8070c04]
/lib/libc.so.6(__libc_start_main+0xf5) [0xb7dce3d5] 
```

这是在 32 位 linux 下

```
$ uname -a
Linux mercury 3.3.2-1-ARCH #1 SMP PREEMPT Sat Apr 14 10:08:43 UTC 2012 i686 Intel(R) Core(TM)2 Duo CPU P8600 @ 2.40GHz GenuineIntel GNU/Linux

$ dmd -v
DMD32 D Compiler v2.059 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T17:39:32.577

确保您的 dmd.conf`-L--export-dynamic`在其`DFLAGS`. 我相信 dmd 提供的版本有它，但没有它，您将无法获得函数名称，因此很有可能您的 dmd.conf 中缺少它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:35:32.473

使用 GDB 启动您的程序，您将获得正确的堆栈跟踪，不幸的是我不知道任何其他方式（您需要使用 -g 和 -gc 编译）。

# jquery - 我正在使用两个不同的 jQuery 函数，一个似乎正在取消另一个

> ID：10527904
> 
> 赞同：1
> 
> 时间：2012-05-10T05:18:28.917
> 
> 标签：jquery

> **可能重复：**
> [我正在使用两个不同的 jQuery 函数，一个似乎正在取消另一个](https://stackoverflow.com/questions/10528161/im-using-two-different-jquery-functions-and-one-seems-to-be-canceling-the-other)

我为灯箱设置了以下脚本：

当我添加以下代码以获得平滑的滚动效果（我正在构建一个页面，滚动网站）时，之前工作的灯箱变得无效。

</p>

它们都可以单独使用，但是当我同时使用它们时，灯箱不再起作用。

# python - 整数和字符串的 Python 输入验证

> ID：10527905
> 
> 赞同：4
> 
> 时间：2012-05-10T05:18:32.027
> 
> 标签：python, input

我是编程新手，在进行输入验证时遇到问题。我的程序需要输入从 1 到 10 的数字或字母`y`，但似乎我不能为此做一个错误处理程序。

```
def checkingInput():
    while True:
        try:
            a = input()
            if 10 >= a >= 1 or a == 'y':
                return value
            else:
                print('Invalid input!')
        except NameError:
            print('Name error!Please try again!')
        except SyntaxError:
            print('Syntax Error!Please try again!') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:35:42.183

正如 jamylak 建议的那样，将 if 条件更改为：

```
if a == 'y' or 1 <= int(a) <= 10: 
```

程序：

```
def checkingInput():
    while True:
        try:
            a = input('enter')
            if a == 'y' or 1 <= int(a) <= 10:
                return a
            else:
                print('Invalid input!')
        except ValueError:
            print('Value error! Please try again!') 
```

# css - 一页显示不同样式的html，互不干扰

> ID：10527906
> 
> 赞同：0
> 
> 时间：2012-05-10T05:18:34.200
> 
> 标签：css

我正在尝试在一页上显示多个页面（例如：google.com、yahoo.com ...）。我正在使用 cURL multi 提取这些页面的 html，然后在一页上显示所有结果供我查看。问题是第一页的 css 弄乱了所有较低页面的 css。

例如：Yahoo 是第一个页面，具有非常多样化的 CSS 样式，其次是 MSN，它覆盖了大多数 CSS，但不是全部，它看起来很奇怪。

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:25:04.840

尽管我很讨厌它，但使用 iFrames 可能是你能做到这一点的最快方法。

更好的选择是更难的选择，您可以在样式中添加前缀，或者在没有的样式中添加前缀。

因此，如果第一个站点定义 H1，然后第二个站点以不同方式定义 H1，您将执行 H1.firstsite 和 H1.secondsite 等，然后在 HTML 中将类添加到所有 H1 标记。

为了安全起见，对所有类/ID也进行类似的操作，这样就不会发生冲突。

PS：某些内容可能不会在 iframe 中显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:07:21.937

我建议使用 iFrame 加载使用 cURL 检索的内容的单独页面（或具有不同查询字符串的单个页面）。基本上拆分 cURL 操作并使用 iFrame 访问它们。

这是我看到的最简单、最直接的方式，对您已经完成的工作的更改最少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:47:50.307

你必须使用这个..

```
<iframe src="http://www.google.com" width="600px" frameborder="0px"></iframe>
<iframe src="http://www.yahoo.com" width="600px" frameborder="0px"></iframe>
<iframe src="http://www.bin.com" width="600px" frameborder="0px"></iframe> 
```

# tomcat - 无法获取应用程序 SSO 令牌

> ID：10527907
> 
> 赞同：1
> 
> 时间：2012-05-10T05:18:36.217
> 
> 标签：tomcat, single-sign-on, openam

我做了以下步骤来实现 SSO，但得到了令牌异常，所以我的 tomcat 没有启动，

1.  我已经在我的一个 tomcat 实例上的机器上安装了 Openam 服务器，这是我的身份存储库。我的 openam 服务器工作正常。我在 openam 服务器上为要访问我们应用程序的 SSO 创建了用户。

2.  和 J2EE 策略代理在另一个 tomcat 中保护我们在同一台机器上的应用程序。但是当我要启动那个 tomcat 实例来访问应用程序时，我面临以下异常。

    [AgentException Stack] com.sun.identity.agents.arch.AgentException：ApplicationSSOTokenProvider.getApplicationSSOToken()：无法在 com.sun.identity.agents.common.ApplicationSSOTokenProvider.getApplicationSSOToken(ApplicationSSOTokenProvider.java:81) 处获取应用程序 SSO 令牌com.sun.identity.agents.arch.AgentConfiguration.setAppSSOToken(AgentConfiguration.java:616) 在 com.sun.identity.agents.arch.AgentConfiguration.bootStrapClientConfiguration(AgentConfiguration.java:722) 在 com.sun.identity.agents。 arch.AgentConfiguration.initializeConfiguration(AgentConfiguration.java:1140) 在 com.sun.identity.agents.arch.AgentConfiguration.(AgentConfiguration.java:1579) 在 com.sun.identity.agents.arch.Manager.(Manager.java: 643) 在 com.sun.identity.agents.tomcat.v6.AmTomcatRealm.(AmTomcatRealm.java:64) 在 sun.reflect.NativeConstructorAccessorImpl。newInstance0（本机方法）

你能建议任何解决方案吗？是因为 FQDN 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:51:43.623

有一些事情可能会出错，一些想法：

*   您是否在 OpenAM Server 中配置了 J2EE 代理？
*   当您启动代理实例时，您的 OpenAM 服务器实例是否启动并运行？
*   用户名/密码设置是否正确
*   ...

[您可以在此处](https://wikis.forgerock.org/confluence/display/openam/Installing+Tomcat+6.0+Policy+Agent)找到有关在 Tomcat 上配置 J2EE Policy 代理的详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T22:46:38.307

我在使用 Tomcat 6.0.35 作为 OpenAM 服务器（10.0.0）的容器时遇到了同样的问题。

一开始，我认为错误出在受保护的 Tomcat (6.0.29) 中，它安装了策略代理 (tomcat_v6_agent_303)。

好吧，事实证明**在 Jetty 7.6.5 中运行 OpenAM Server**解决了这个问题。

错误在策略代理中弹出，而实际上是服务器端的某些东西导致了它。

# windows-phone-7 - Windows Phone 中的全球望远镜

> ID：10527911
> 
> 赞同：0
> 
> 时间：2012-05-10T05:18:41.820
> 
> 标签：windows-phone-7, bing-maps

我正在 windows phone 7 上开发一个应用程序。我想访问 Microsoft World Wide Telescope 数据，即我想在我的应用程序上显示增强现实的天空视图，就像 BING 地图（街景）上的天空视图一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:00:03.710

我将从[http://www.worldwidetelescope.org/authoring/developer.aspx开始](http://www.worldwidetelescope.org/authoring/developer.aspx)

# c# - 从 C# 中的图像序列生成视频

> ID：10527914
> 
> 赞同：4
> 
> 时间：2012-05-10T05:18:52.557
> 
> 标签：c#, windows, image, video, ffmpeg

我的任务是从我的应用程序中的一系列图像生成视频，在搜索时我发现 FFMPEG 能够做到这一点。任何人都可以向我提供任何可以指导我正确方向的教程或链接。我是新手在这所以请适当帮助家伙。将不胜感激任何形式的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-29T15:37:10.147

我无法使上述示例正常工作。但是，我确实找到了另一个运行良好的库。尝试通过 NuGet “accord.extensions.imaging.io”，然后我编写了以下小函数：

```
 private void makeAvi(string imageInputfolderName, string outVideoFileName, float fps = 12.0f, string imgSearchPattern = "*.png")
    {   // reads all images in folder 
        VideoWriter w = new VideoWriter(outVideoFileName, 
            new Accord.Extensions.Size(480, 640), fps, true);
        Accord.Extensions.Imaging.ImageDirectoryReader ir = 
            new ImageDirectoryReader(imageInputfolderName, imgSearchPattern);
        while (ir.Position < ir.Length)
        {
            IImage i = ir.Read();
            w.Write(i);
        }
        w.Close();
    } 
```

它从文件夹中读取所有图像并从中制作视频。

如果你想让它变得更好，你可能会读取图像尺寸而不是硬编码，但你明白了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T05:24:21.560

[http://electron.mit.edu/~gsteele/ffmpeg/](http://electron.mit.edu/~gsteele/ffmpeg/)
[http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)
[http://ffmpeg。 org/ffmpeg.html](http://ffmpeg.org/ffmpeg.html) -> 搜索用于从许多图像创建视频：

所有链接都来自[这个问题](https://stackoverflow.com/questions/1870103/create-a-video-stream-avi-from-a-series-of-images)

.net 中与 FFMPEG 相关的链接（来自[这个](https://stackoverflow.com/questions/2527963/using-ffmpeg-in-net)问题）；

[FFMpeg.NET](http://ffmpegdotnet.codeplex.com/)
[FFMpeg-Sharp](http://code.google.com/p/ffmpeg-sharp/)
[FFLib.NET](http://www.intuitive.sk/fflib/)
[http://ivolo.mit.edu/post/Convert-Audio-Video-to-Any-Format-using-C.aspx](http://ivolo.mit.edu/post/Convert-Audio-Video-to-Any-Format-using-C.aspx)

其他资源
[Expression Encoder](http://expression.microsoft.com/en-us/cc197144)
[VLC](https://stackoverflow.com/questions/2738228/how-to-stream-your-images-files-with-vlc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:47:24.440

我有点晚了，但是如果您还没有成功，我已经制作了一个关于如何解决类似问题的教程：[图像序列到视频流？](https://stackoverflow.com/questions/9744026/image-sequence-to-video-stream/12376324#12376324)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:15:33.690

[这里](https://stackoverflow.com/questions/2509648/how-can-i-create-an-h-264-encoded-movie-from-a-set-of-images-in-c)问了同样的问题。

那里的答案指向[这里](http://jasonjano.wordpress.com/2010/02/09/a-simple-c-wrapper-for-ffmpeg/)，这并不完全是您正在做的事情，但很容易配置来完成这项工作。

# ios - 不从有效 URL 加载图片

> ID：10527920
> 
> 赞同：0
> 
> 时间：2012-05-10T05:19:14.653
> 
> 标签：ios, xcode, uiimage

```
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imageURL]]]; 
```

我使用上面的代码然后检查

```
if (image)
    return image;
else
{
    NSLog(@"no image on URL");
    return nil;
} 
```

但有时（非常非常罕见）我没有从有效的 url 获得图像。网址 100% 有效。

通常加载一张图片需要将近一秒钟的时间，但是当它无法加载一张图片时，这个过程需要更多的时间（20-200秒）。然后我得到“URL 上没有图像”。

有没有更好的方法从 URL 获取图片？我宁愿在一秒钟内得到“URL 上没有图像”，然后等待这么久。

PS 对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:27:22.047

您想使用它是非常罕见的`dataWithContentsOfURL:`。这是一个阻塞调用，因此需要一个后台线程。它也很不灵活，并且不能提供良好的错误返回（这是您遇到的问题）。

请参阅[URL 加载系统编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)。通常，您需要`NSURLConnection`为此类工作配置异步。如果您正在执行大量网络操作，您可能需要考虑像[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)或[AFNetworking](https://github.com/AFNetworking/AFNetworking)这样的框架，它们可以为您处理很多复杂性。

# python - Python 2.7 / App Engine - TypeError: is_valid() 只需要 2 个参数（给定 3 个）

> ID：10527921
> 
> 赞同：2
> 
> 时间：2012-05-10T05:19:20.570
> 
> 标签：python, google-app-engine, python-2.7, typeerror

以下代码与我正在使用的代码很接近，而且不会太长。我得到错误`TypeError: is_valid() takes exactly 2 arguments (3 given)`。在我看来，我只传递了 2 个论点。那么第三个论点是从哪里来的呢？

模型/MyModel.py

```
from google.appengine.ext import db

class MyModel(db.model):
    a = db.StringProperty(required=True)
    b = db.StringProperty(required=True)
    c = db.StringProperty(required=True)

class Update:
    def is_valid(x, y)
        myquery = db.GqlQuery('SELECT * FROM Valid WHERE value = :1' x)
        v = myquery.get()

        if v.something == y:
            yet_more_stuff
            return(True)
        else:
            return(False) 
```

控制器/WebHandler.py

```
import webapp2
from models.MyModel import Update

class WebHandler(webapp2.RequestHandler):
    def get(self):
        var_x = "string"
        var_y = "string"
        z = Update()
        if z.is_valid(var_x, var_y): <----- line error occurs
            do_some_stuff
        else
            do_some_other_stuff 
```

这可能很简单，但今天编码 18 小时后，我的大脑变成了燕麦片。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T05:43:02.850

将代码更改为`def is_valid(self, x, y)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T05:47:21.877

## 解决方案

你有两个解决方案：

*   在方法定义中添加一个表示实例的参数（`self`为一致性命名），或者
*   在方法上使用`staticmethod`装饰器。

## 解释和例子

这一行：

```
def is_valid(x, y): 
```

表示调用方法时，`x`是类实例，`y`是参数。如果你想接受两个参数（*和*实例本身），你的行应该是这样的：

```
def is_valid(self, x, y) 
```

但是因为您没有对实例本身进行任何操作，所以您也可以使用`staticmethod`装饰器：

```
@staticmethod
def is_valid(x, y): 
```

这将摆脱在参数中传递的实例，您只会收到剩余的参数。

# image - 如何让图像显示在 ExtPascal 中的 TEXtButton 上？

> ID：10527922
> 
> 赞同：1
> 
> 时间：2012-05-10T05:19:25.950
> 
> 标签：image, button, extjs, lazarus

从 AdvancedTabs 单元中的示例代码开始，我一直在 Lazarus 中尝试了几个小时，以使 am 图像出现在按钮上。

示例代码有这样的：

```
constructor TAdvancedTabs.Create; 
var 
  I : integer; 
begin 
  inherited; 
  with SelfSession do begin 
    SetCodePress; 
    SetStyle('.new-tab{background-image:url(' + ExtPath + '/examples/feed-viewer/images/new_tab.gif) !important}'); 
    SetStyle('.tabs{background:url(' + ExtPath + '/examples/desktop/images/tabs.gif)}'); 
  end; 
  with TExtButton.Create do begin 
    RenderTo := 'body'; 
    Text     := 'Add Tab using AJAX!'; 
    IconCls  := 'new-tab'; 
    Handler  := Ajax(AddTab); 
    OnClick  := HandleExtButtonClick; // Delphi style event handler 
  end; 
... 
```

我有这个：

```
 extPath := (CurrentFCGIThread as TExtThread).ExtPath; 
  (CurrentFCGIThread as TExtThread).SetStyle('.backbtn{background-image:url(' + ExtPath + '/basxv2/back.png) !important}'); 
  btnClose := TV2ExtButton.Create; 
  with btnClose.AddTo(Items) do 
    begin 
    Id := 'frmManualOrder_btnClose'; 
    X := MarginLeft; 
    Height := ButtonHeight; 
    Y := ScreenHeight-12*MarginLeft; 
    Width := ButtonWidth-10; 
    RenderTo := 'body'; 
    IconCls := 'backbtn'; 
... 
```

我尝试了许多不同的方法，例如将图像转换为 gif，并且在大多数情况下，按钮要么是空白的（如果我没有设置 Text 属性），要么将文本向右轻推几个像素仿佛为无形的图像腾出空间。图像出现几次，顶部和底部被剪裁。

谁能看到我做错了什么？

TIA 标志

# java - 在滚动上添加和删除水平列表项

> ID：10527924
> 
> 赞同：3
> 
> 时间：2012-05-10T05:19:47.553
> 
> 标签：java, android

我需要显示水平列表视图项目的无限滚动（意味着需要重复项目），例如

a,b,c,d,e, **f,a,b,c** ,d,e,f,a,b,....

粗体是屏幕上的可见项目

该过程是在到达最后一个列表项后重复列表项，我尝试在滚动列表时添加列表项，以便自定义水平列表视图类。但是在添加右侧列表项后向左滚动时，我得到`ArrayIndexOutOfBoundsException`. 我尝试在基本适配器中添加 Integer.MAX VALUE 选项以获得无限的项目，但在定位项目时它没有帮助（设置选择（））。如果有人知道如何添加和删除水平列表项的方法，请分享。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T08:12:28.117

而不是扩展 BaseAdapter 扩展 ArrayAdapter。

**解决方案1::**

**注意:::**在 AgarwalActivity.java 中为水平列表视图设置布尔变量 isHorizo​​ntalListView = true。

**Horizo​​ntalListView.java**

```
public class HorizontalListView extends AdapterView<ListAdapter> {

    public boolean mAlwaysOverrideTouch = true;
    protected ListAdapter mAdapter;
    private int mLeftViewIndex = -1;
    private int mRightViewIndex = 0;
    protected int mCurrentX;
    protected int mNextX;
    private int mMaxX = Integer.MAX_VALUE;
    private int mDisplayOffset = 0;
    protected Scroller mScroller;
    private GestureDetector mGesture;
    private Queue<View> mRemovedViewQueue = new LinkedList<View>();
    private OnItemSelectedListener mOnItemSelected;
    private OnItemClickListener mOnItemClicked;
    private OnItemLongClickListener mOnItemLongClicked;
    private boolean mDataChanged = false;

    public HorizontalListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView();
    }

    private synchronized void initView() {
        mLeftViewIndex = -1;
        mRightViewIndex = 0;
        mDisplayOffset = 0;
        mCurrentX = 0;
        mNextX = 0;
        mMaxX = Integer.MAX_VALUE;
        mScroller = new Scroller(getContext());
        mGesture = new GestureDetector(getContext(), mOnGesture);
    }

    @Override
    public void setOnItemSelectedListener(AdapterView.OnItemSelectedListener listener) {
        mOnItemSelected = listener;
    }

    @Override
    public void setOnItemClickListener(AdapterView.OnItemClickListener listener){
        mOnItemClicked = listener;
    }

    @Override
    public void setOnItemLongClickListener(AdapterView.OnItemLongClickListener listener) {
        mOnItemLongClicked = listener;
    }

    private DataSetObserver mDataObserver = new DataSetObserver() {

        @Override
        public void onChanged() {
            synchronized(HorizontalListView.this){
                mDataChanged = true;
            }
            invalidate();
            requestLayout();
        }

        @Override
        public void onInvalidated() {
            reset();
            invalidate();
            requestLayout();
        }

    };

    @Override
    public ListAdapter getAdapter() {
        return mAdapter;
    }

    @Override
    public View getSelectedView() {
        //TODO: implement
        return null;
    }

    @Override
    public void setAdapter(ListAdapter adapter) {
        if(mAdapter != null) {
            mAdapter.unregisterDataSetObserver(mDataObserver);
        }
        mAdapter = adapter;
        mAdapter.registerDataSetObserver(mDataObserver);
        reset();
    }

    private synchronized void reset(){
        initView();
        removeAllViewsInLayout();
        requestLayout();
    }

    @Override
    public void setSelection(int position) {
        //TODO: implement
    }

    private void addAndMeasureChild(final View child, int viewPos) {
        LayoutParams params = child.getLayoutParams();
        if(params == null) {
            params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        }

        addViewInLayout(child, viewPos, params, true);
        child.measure(MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST),
                MeasureSpec.makeMeasureSpec(getHeight(), MeasureSpec.AT_MOST));
    }

    @Override
    protected synchronized void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        if(mAdapter == null){
            return;
        }

        if(mDataChanged){
            int oldCurrentX = mCurrentX;
            initView();
            removeAllViewsInLayout();
            mNextX = oldCurrentX;
            mDataChanged = false;
        }

        if(mScroller.computeScrollOffset()){
            int scrollx = mScroller.getCurrX();
            mNextX = scrollx;
        }

        if(mNextX <= 0){
            mNextX = 0;
            mScroller.forceFinished(true);
        }
        if(mNextX >= mMaxX) {
            mNextX = mMaxX;
            mScroller.forceFinished(true);
        }

        int dx = mCurrentX - mNextX;

        removeNonVisibleItems(dx);
        fillList(dx);
        positionItems(dx);

        mCurrentX = mNextX;

        if(!mScroller.isFinished()){
            post(new Runnable() {

                public void run() {
                    // TODO Auto-generated method stub
                    requestLayout();
                }
            });

        }
    }

    private void fillList(final int dx) {
        int edge = 0;
        View child = getChildAt(getChildCount()-1);
        if(child != null) {
            edge = child.getRight();
        }
        fillListRight(edge, dx);

        edge = 0;
        child = getChildAt(0);
        if(child != null) {
            edge = child.getLeft();
        }
        fillListLeft(edge, dx);

    }

    private void fillListRight(int rightEdge, final int dx) {
        while(rightEdge + dx < getWidth() && mRightViewIndex < mAdapter.getCount()) {

            View child = mAdapter.getView(mRightViewIndex, mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, -1);
            rightEdge += child.getMeasuredWidth();

            if(mRightViewIndex == mAdapter.getCount()-1) {
                mMaxX = mCurrentX + rightEdge - getWidth();
            }

            if (mMaxX < 0) {
                mMaxX = 0;
            }
            mRightViewIndex++;
        }

    }

    private void fillListLeft(int leftEdge, final int dx) {
        while(leftEdge + dx > 0 && mLeftViewIndex >= 0) {
            View child = mAdapter.getView(mLeftViewIndex, mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, 0);
            leftEdge -= child.getMeasuredWidth();
            mLeftViewIndex--;
            mDisplayOffset -= child.getMeasuredWidth();
        }
    }

    private void removeNonVisibleItems(final int dx) {
        View child = getChildAt(0);
        while(child != null && child.getRight() + dx <= 0) {
            mDisplayOffset += child.getMeasuredWidth();
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mLeftViewIndex++;
            child = getChildAt(0);

        }

        child = getChildAt(getChildCount()-1);
        while(child != null && child.getLeft() + dx >= getWidth()) {
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mRightViewIndex--;
            child = getChildAt(getChildCount()-1);
        }
    }

    private void positionItems(final int dx) {
        if(getChildCount() > 0){
            mDisplayOffset += dx;
            int left = mDisplayOffset;
            for(int i=0;i<getChildCount();i++){
                View child = getChildAt(i);
                int childWidth = child.getMeasuredWidth();
                child.layout(left, 0, left + childWidth, child.getMeasuredHeight());
                left += childWidth;
            }
        }
    }

    public synchronized void scrollTo(int x) {
        mScroller.startScroll(mNextX, 0, x - mNextX, 0);
        requestLayout();
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        boolean handled = super.dispatchTouchEvent(ev);
        handled |= mGesture.onTouchEvent(ev);
        return handled;
    }

    protected boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
        synchronized(HorizontalListView.this){
            mScroller.fling(mNextX, 0, (int)-velocityX, 0, 0, mMaxX, 0, 0);
        }
        requestLayout();

        return true;
    }

    protected boolean onDown(MotionEvent e) {
        mScroller.forceFinished(true);
        return true;
    }

    private OnGestureListener mOnGesture = new GestureDetector.SimpleOnGestureListener() {

        @Override
        public boolean onDown(MotionEvent e) {
            return HorizontalListView.this.onDown(e);
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            return HorizontalListView.this.onFling(e1, e2, velocityX, velocityY);
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,
                float distanceX, float distanceY) {

            synchronized(HorizontalListView.this){
                mNextX += (int)distanceX;
            }
            requestLayout();

            return true;
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
            for(int i=0;i<getChildCount();i++){
                View child = getChildAt(i);
                if (isEventWithinView(e, child)) {
                    if(mOnItemClicked != null){
                        mOnItemClicked.onItemClick(HorizontalListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId( mLeftViewIndex + 1 + i ));
                    }
                    if(mOnItemSelected != null){
                        mOnItemSelected.onItemSelected(HorizontalListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId( mLeftViewIndex + 1 + i ));
                    }
                    break;
                }

            }
            return true;
        }

        @Override
        public void onLongPress(MotionEvent e) {
            int childCount = getChildCount();
            for (int i = 0; i < childCount; i++) {
                View child = getChildAt(i);
                if (isEventWithinView(e, child)) {
                    if (mOnItemLongClicked != null) {
                        mOnItemLongClicked.onItemLongClick(HorizontalListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId(mLeftViewIndex + 1 + i));
                    }
                    break;
                }

            }
        }

        private boolean isEventWithinView(MotionEvent e, View child) {
            Rect viewRect = new Rect();
            int[] childPosition = new int[2];
            child.getLocationOnScreen(childPosition);
            int left = childPosition[0];
            int right = left + child.getWidth();
            int top = childPosition[1];
            int bottom = top + child.getHeight();
            viewRect.set(left, top, right, bottom);
            return viewRect.contains((int) e.getRawX(), (int) e.getRawY());
        }
    };

} 
```

**AgarwalActivity.java**

```
public class AgarwalActivity extends Activity{

    private LayoutInflater _inflater;
    private ListView listView;
    private HorizontalListView hListView;
    private RankingsAdapter rankingsAdapter;
    private boolean isHorizontalListView = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
            if(isHorizontalListView){
                setContentView(R.layout.listviewdemo);
                hListView = (HorizontalListView) findViewById(R.id.listview);  
            }else{
                setContentView(R.layout.listview);
                listView=(ListView)findViewById(R.id.listView);
            }

        ArrayList<String> rankingArrayList = new ArrayList<String>();
        for(int i=0;i<25;i++)
           rankingArrayList.add("agarwal"+i);

        _inflater= LayoutInflater.from(AgarwalActivity.this);    

        rankingsAdapter = new RankingsAdapter(AgarwalActivity.this,R.id.text,rankingArrayList);
            if(isHorizontalListView)
                hListView.setAdapter(rankingsAdapter);
            else
            listView.setAdapter(rankingsAdapter);

    }

    private class RankingsAdapter extends ArrayAdapter<String>{
        private ArrayList<String> _row_list;

        public static final int HALF_MAX_VALUE = Integer.MAX_VALUE/2;
        public final int MIDDLE;
        public RankingsAdapter(Context context,int textViewResourceId,ArrayList<String> arrL) {
            // TODO Auto-generated constructor stub
            super(context,textViewResourceId, arrL);
            _row_list = arrL;
            MIDDLE = HALF_MAX_VALUE - HALF_MAX_VALUE % _row_list.size();
        }
        public int getCount() {
            // TODO Auto-generated method stub
            return Integer.MAX_VALUE;
        }
        public String getItem(int position) {
            // TODO Auto-generated method stub
            return _row_list.get(position % _row_list.size());
        }
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position % _row_list.size();
        }

        public View getView(final int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ViewHolder holder = null;

            if(convertView == null){
                holder = new ViewHolder();
                convertView = (LinearLayout)_inflater.inflate(R.layout.text_layout, null);
                //getting the IDs
                holder.driver = (TextView)convertView.findViewById(R.id.text);
                convertView.setTag(holder);
            } else {

                holder=(ViewHolder)convertView.getTag();
            }
            //Settng bean values to row components
            holder.driver.setText(_row_list.get(position % _row_list.size()));

            return convertView;
        }//getView()

        class ViewHolder{
            //holding the components
            TextView driver;
        }//ViewHolder--Class inside CountriesAdapter

    }//RankingsAdapter-inner class

}//AgarwalActivity-class 
```

**列表视图.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    </ListView>

</RelativeLayout> 
```

**listviewdemo.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="#fff"
  >

  <com.vl.agarwal.HorizontalListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ddd"
  />

</LinearLayout> 
```

**text_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView
    android:id="@+id/text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingLeft="6dip"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

## -------------------------------------------------- ----------------------------------

**解决方案2::**使用画廊作为水平列表视图

**行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

  <TextView
      android:id="@+id/itemtext"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_margin="20dp"
      android:textColor="@android:color/white"
      android:textStyle="bold"
      android:textSize="30sp"/>

</LinearLayout> 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

  <TextView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:text="@string/hello" />
  <Gallery
      android:id="@+id/horizontallistview"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content" />

</LinearLayout> 
```

**AgarwalActivity.java**

```
public class AgarwalActivity extends Activity {

 Gallery myHorizontalListView;

private RankingsAdapter rankingsAdapter;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
  ArrayList<String> rankingArrayList = new ArrayList<String>();
  for(int i=0;i<25;i++)
     rankingArrayList.add("agarwal"+i);

  DisplayMetrics metrics = new DisplayMetrics();
  this.getWindowManager().getDefaultDisplay().getMetrics(metrics);

  myHorizontalListView = (Gallery)findViewById(R.id.horizontallistview);
  MarginLayoutParams mlp = (MarginLayoutParams) myHorizontalListView.getLayoutParams();
  mlp.setMargins(-(metrics.widthPixels/2), 
                 mlp.topMargin, 
                 mlp.rightMargin, 
                 mlp.bottomMargin
  );

  rankingsAdapter = new RankingsAdapter(AgarwalActivity.this,R.id.itemtext,rankingArrayList);
  myHorizontalListView.setAdapter(rankingsAdapter);

  myHorizontalListView.setSelection(10,true);

      myHorizontalListView.setOnItemClickListener(new OnItemClickListener(){

   @Override
   public void onItemClick(AdapterView<?> parent, View view, int position,
     long id) {
    Toast.makeText(
      AgarwalActivity.this,
      parent.getItemAtPosition(position).toString() + " Clicked",
      Toast.LENGTH_LONG)
      .show();

   }});

  }

    private class RankingsAdapter extends ArrayAdapter<String>{
        private ArrayList<String> _row_list;

        public static final int HALF_MAX_VALUE = Integer.MAX_VALUE/2;
        public final int MIDDLE;
        public RankingsAdapter(Context context,int textViewResourceId,ArrayList<String> arrL) {
            // TODO Auto-generated constructor stub
            super(context,textViewResourceId, arrL);
            _row_list = arrL;
            MIDDLE = HALF_MAX_VALUE - HALF_MAX_VALUE % _row_list.size();
        }
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return Integer.MAX_VALUE;
        }
        @Override
        public String getItem(int position) {
            // TODO Auto-generated method stub
            return _row_list.get(position % _row_list.size());
        }
        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position % _row_list.size();
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View rowView = LayoutInflater
                     .from(parent.getContext())
                     .inflate(R.layout.row, null);
                   TextView listTextView = (TextView)rowView.findViewById(R.id.itemtext);
                   listTextView.setText(_row_list.get(position % _row_list.size()));

                   return rowView;
        }//getView()
    }//RankingsAdapter-inner class
}//AgarwalActivity-class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:41:10.120

您所描述的有时被称为圆形画廊、环绕式画廊或旋转式画廊。这篇文章有很好的代码示例：

[android圆形画廊？](https://stackoverflow.com/questions/3633370/android-circular-gallery/3635753#3635753)

# ios - 在 viewDidLoad 中确定框架/边界

> ID：10527925
> 
> 赞同：0
> 
> 时间：2012-05-10T05:19:53.267
> 
> 标签：ios, cocoa-touch, uikit

各位程序员好，

首先，对不起，很长的帖子。我的问题很简单，但我想确保你知道我在做什么，我真的不想改变我的方法的基本思想。

*（以下全部以编程方式完成，没有故事板，没有笔尖，没有导航控制器）*

我有一个没有自己视图的 RootViewController。他所做的只是实例化其他 ViewController，管理它们的转换并将它们的视图推送（添加）到主窗口中。为了正确定位这些视图，我想获取 RootViewCONtrollers 子控制器之一的边界/框架。这就是我从 appDelegate 创建 RootViewController 的方式（我从一个空项目开始）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor grayColor];
    self.window.rootViewController = [[UCRootViewController alloc]init];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

在他初始化之后，rootviewController 创建了一个 MapViewController

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSLog(@"RootviewController initialized");
    self.mapviewController = [[UCMapviewController alloc] initWithDelegate:self];
    self.view = self.mapviewController.view;
    [self.mapviewController.view setOpaque:YES];
    [self.view bringSubviewToFront:self.mapviewController.view];
    [self presentModalViewController:self.mapviewController animated:YES];
    self.currentlyActiveController = self.mapviewController;
} 
```

MapViewController 创建一个 navigationBar 和一个 MKMapView。现在我设置了硬编码的框架，因为我无法`viewDidLoad()`在 MapViewController 中获取窗口的边界/框架当我尝试获取有关边界/框架的任何信息时，我得到 0 返回。

```
- (void)viewDidLoad
{
    NSLog(@"MapviewController initialized");
    [super viewDidLoad];

    self.isMapViewPushedAside = NO;
    // Custom initizialation for navigationBar
    [self setupNavigationBar];

    // Custom initialization for mapview
    [self setUpMapview];
    [self trackUserLocation];

    // Custom initialization for popupActionsButton
    [self setUpPopupButtons];

    // Custom tests
    [self test];

    [self focusLocationOnMap:self.locationManager.location.coordinate];
    [self.locationManager stopUpdatingLocation];
} 
```

我已经实现了两个为窗口返回框架/边界（相同）的委托方法。问题是，我必须在一开始就获取这些值，而不是在所有内容都初始化之后。一切就绪后，当我从按钮调用委托方法时，它们按预期工作。

```
CGRect frame = [self.mapDelegate frameData];
NSLog(@"width by frame: %f", frame.size.width);
NSLog(@"height by frame: %f", frame.size.height);

CGRect bounds = [self.mapDelegate boundsData];
NSLog(@"width by bounds: %f", bounds.size.width);
NSLog(@"height by bounds: %f", bounds.size.height); 
```

**我如何在开始时获得框架/边界，即在调用我的自定义“设置”方法之前......？！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:58:32.003

> 我有一个没有自己视图的 RootViewController。

你不能有一个没有视图的 UIViewController。如果你有应用程序将崩溃。当你初始化一个 UIViewController 时，它会自动为你创建一个 UIView。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ..
    self.mapviewController = [[UCMapviewController alloc] initWithDelegate:self];
    self.view = self.mapviewController.view;
    ..
} 
```

从我在这里可以看到，您实际上是在将 RootviewController 的视图设置为地图视图。这应该通过覆盖`-(void)loadView`控制器的方法来完成，并且您需要设置视图：

```
-(void)loadView
{
    self.mapviewController = [[UCMapviewController alloc] initWithDelegate:self]; //if you're not using ARC this should be autoreleased;
    self.view = self.mapviewController.view;
} 
```

调用方法时`viewDidLoad`，控制器的任何视图中都没有设置几何图形。它们只被初始化（隐式或显式地`-(void)loadView`），然后`viewDidLoad`被调用。几何最早是在`viewWillAppear:`方法和连续`viewDidAppear:`方法中设置的，因此`viewWillAppear:`您可以拥有视图的实际框架/边界的最早点，并且在`viewWillAppear:`方法中您应该只执行一些轻量级操作（如设置几何、启动计时器、订阅观察者等..)。
你说你不想改变你的方法，但你需要按照这些规则进行设计。

# google-analytics-api - Google Analytics 简易仪表板库

> ID：10527932
> 
> 赞同：0
> 
> 时间：2012-05-10T05:20:58.350
> 
> 标签：google-analytics-api

我试图用这种新的“简单”方式来使用谷歌分析 API。即使我正确地遵循了说明，也没有为我工作。有人对此有任何问题吗？

试试看...

[http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/docs/user-documentation.html](http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/docs/user-documentation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:46:16.680

另一个简单的解决方法是设置一个按钮来实际调用渲染方法，而不是像基本示例那样让它立即执行。（最后一行，链式方法） - 或 3-5 秒超时

或使用“酷演示”链接获取更好的起点代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:47:56.673

是的，我也试过了，但没有奏效。

好像我的本地主机上缺少一些库。我已经检查了脚本的执行以及何时执行

如果（gapi.client.analytics）{

它抛出错误：

未捕获的类型错误：无法读取未定义的 this.renderFunction() 的属性“分析”；

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:19:43.630

当我收到未定义的错误时，我更改了第 220 行中的代码作为临时修复。知道它加载完美。这是代码：

```
// If the client library has loaded.
if(typeof gapi.client != 'undefined'){ //new code
//if (gapi.client.analytics) { 
```

# jquery-ui - 自动完成显示 self.element.propAttr 错误

> ID：10527933
> 
> 赞同：11
> 
> 时间：2012-05-10T05:21:08.633
> 
> 标签：jquery-ui, jquery, jquery-plugins

我正在使用 Jquery ui Autocomplete。但它显示错误自动完成显示`self.element.propAttr`错误。这是我的ajax代码

```
$.ajax({
        url: "persons.xml",
        dataType: "xml",
        success: function( xmlResponse ) {
            var data = $( "person", xmlResponse ).map(function() {
                return {
                    value: $( "name", this ).text()

                };
            }).get();
            $( "#birds" ).autocomplete({
                source: data,
                minLength: 0

            });

        }

    }); 
```

我正在使用 xml 进行响应，但这似乎不是问题，似乎 javascript 中的某些功能已被弃用。谁能给我任何解决方案？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-11T08:42:34.817

在您的声明前添加以下行：

```
jQuery.fn.extend({
 propAttr: $.fn.prop || $.fn.attr
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:31:15.277

我在重构我的 javascript 时遇到了这个问题，发现问题是我删除了 jquery.ui.core.js，而只使用了 jquery-ui-1.9.1.custom.min.js。

我在 Jquery UI 网站上使用下载生成器创建了这个文件，并检查了所有内容。纠正我如果我错了，但 jquery-ui-1.9.1.custom.min.js 应该包含运行所有 jquery ui 插件所需的所有 javascript（在这种情况下自动完成失败）。

将引用添加回 jquery.ui.core.js 修复了该错误。

# geolocation - 如何在后台正确使用位置 - 应用被拒绝 3 次

> ID：10527935
> 
> 赞同：8
> 
> 时间：2012-05-10T05:21:30.873
> 
> 标签：geolocation, app-store, appstore-approval

我的应用被 Apple 拒绝了 3 次，都带有相同的拒绝信，即：

> 我们发现您的应用使用后台模式，但不包含需要该模式持续运行的功能。此行为不符合 App Store 审核指南。
> 
> 我们注意到您的应用在 Info.plist 的 UIBackgroundModes 键中声明支持位置，但不包括需要持久位置的功能。
> 
> 在应用程序处于后台时添加需要位置更新的功能或从 UIBackgroundModes 键中删除“位置”设置是合适的。
> 
> 如果您选择添加使用位置后台模式的功能，请在您的应用说明中包含以下电池使用免责声明：
> 
> “继续使用在后台运行的 GPS 会大大缩短电池寿命。”
> 
> 有关后台模式的信息，请参阅 iOS 参考库中的“在后台执行代码”部分。

现在，据我所知，我正在后台运行并“做某事”......在我的 AppDelegate 中，我在 didFinishLaunchingWithOptions 中有以下代码：

```
 if ([[launchOptions allKeys] containsObject:UIApplicationLaunchOptionsLocationKey] &&
    ([launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey]))
{
    id locationInBackground = [launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey];
    if ([locationInBackground isKindOfClass:[CLLocation class]]) 
    {
        [self updateMyLocationToServer:locationInBackground];
    }
    else
    {
        //Keep updating location if significant changes
        CLLocationManager *locationManager = [[CLLocationManager alloc] init];
        self.bgLocationManager = locationManager;
        self.bgLocationManager.delegate = self;
        self.bgLocationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
        [bgLocationManager startMonitoringSignificantLocationChanges];
    }
} 
```

AppDelegate 还启动了一个位置管理器并使自己成为代理。然后，我有以下代码用于在后台处理位置更新：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    [self updateMyLocationToServer:newLocation];
}

-(void)updateMyLocationToServer:(CLLocation*)myNewLocation
{
    //    NSLog(@"Updating Location from the background");

    NSString *fbID = [NSString stringWithString:[facebookDetails objectForKey:@"fbID"]];
    NSString *firstName = [NSString stringWithString:[facebookDetails objectForKey:@"firstName"]];
    NSString *lastName = [NSString stringWithString:[facebookDetails objectForKey:@"lastName"]];

    NSString *urlString = [NSString stringWithFormat:@"MY_SERVER_API", fbID, myNewLocation.coordinate.latitude, myNewLocation.coordinate.longitude, firstName, lastName];

    NSURL *url = [NSURL URLWithString:urlString];

    __block ASIHTTPRequest *newRequest = [ASIHTTPRequest requestWithURL:url];

    [newRequest setCompletionBlock:^{

    }];

    [newRequest setFailedBlock:^{

    }];

    //    [newRequest setDelegate:self];
    [newRequest startAsynchronous];
} 
```

我还在我的应用描述页面中添加了免责声明：

> 大量使用在后台运行的 GPS 会大大缩短电池寿命。出于这个原因，MY_APP_NAME 在后台运行，只是监听重要的位置变化。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:53:01.677

这个问题很老，已经回答了，但是如果您使用API`UIBackgroundModes`收集位置，则不需要密钥`startMonitoringSignificantLocationChanges`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T07:45:13.887

在 locationManager:didUpdateToLocation:fromLocation: 或 updateMyLocationToServer: 您应该检查应用程序是否处于后台状态，例如。

```
[UIApplication sharedApplication].applicationState == UIApplicationStateBackground 
```

然后，如果您的应用程序处于后台模式，您应该使用例如。

```
backgroundTask = [[UIApplication sharedApplication]
                    beginBackgroundTaskWithExpirationHandler:
                    ^{
                        [[UIApplication sharedApplication] endBackgroundTask:backgroundTask];
                    }];

/*Write Your internet request code here*/

if (bgTask != UIBackgroundTaskInvalid)
{
    [[UIApplication sharedApplication] endBackgroundTask:backgroundTask];
    bgTask = UIBackgroundTaskInvalid;
} 
```

这样应用程序应该完全执行此任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T11:18:09.077

startMonitoringSignificantLocationChanges 不需要后台模式注册。只有连续的位置变化才能做到。

# database - 使用 inotify 跟踪系统中的所有文件

> ID：10527936
> 
> 赞同：5
> 
> 时间：2012-05-10T05:21:41.143
> 
> 标签：database, file, inotify

# 问题：

可以`inotify`用来在 [linux] 系统中可靠地记录文件吗？

# 细节：

我正在尝试使用`inotifywait`来跟踪用户的动作（目前使用 bash，但有人[建议](https://stackoverflow.com/questions/8098954/inotifywait-for-large-directories)我迁移到脚本语言）。最终，我想在创建时向数据库添加新文件（`create`, `moved_from`），在文件修改时更新数据库中的现有行（`modify`, `attrib`, `move_to`），最后在文件删除时删除一行（`delete`）。但是，我遇到了许多问题，即使是像*save*这样看似简单的操作也会生成许多 inotifywait 消息。观察以下命令及其输出（注意，使用`/home/user/`纯粹是为了示例目的）：

# 例子：

**示例 1：监听文件创建：**

```
$ inotifywait -mr /home/user/ -e create  --format %w:%f:%e:%T --timefmt %T 
```

**触碰：**

```
$touch test.txt
/home/user/:test.txt:CREATE:21:35:30 
```

**用 vim 打开一个新文件，然后发出 :w 命令：**

```
$vim test2.txt
/home/user/:test2.txt:CREATE:21:35:30 
```

**使用 vim 打开现有文件，然后发出 :w 命令：**

```
$vim test2.txt
/home/user/:4913:CREATE:21:35:30
/home/user/:test2.txt:CREATE:21:35:30 
```

**使用 gedit 打开一个新文件，然后单击保存：**

```
$gedit test3.txt
/home/user/:test3.txt~:CREATE:21:35:30 
```

**使用 gedit 打开现有文件，然后单击保存：**

```
$gedit test3.txt
/home/user/:.goutputstream-HN3ZDW:CREATE:21:35:30
/home/user/:test3.txt~:CREATE:21:35:30 
```

请注意，不仅两个新文件显示为已创建 (`4913`和`.goutputstream-HN3ZDW`)，而且正在创建的唯一文件是`test3.txt~`和**不是** `test3.txt`，即使该文件`test3.txt`是在使用命令检查时创建的`ls`。为了完整起见，这里是上面的示例，但还有更多选项。

**示例 1：监听文件创建、修改、删除和移动：**

```
$ inotifywait -mr /home/user/ -e create -e modify -e delete -e moved_to -e moved_from --format %w:%f:%e:%T --timefmt %T 
```

**触碰：**

```
$touch test.txt
/home/user/:test.txt:CREATE:21:35:30 
```

**用 vim 打开一个新文件，然后发出 :w 命令：**

```
$vim test2.txt
/home/user/:test2.txt:CREATE:22:12:32 
```

**使用 vim 打开现有文件，然后发出 :w 命令：**

```
$vim test2.txt
/home/user/:4913:CREATE:22:04:35
/home/user/:4913:DELETE:22:04:35
/home/user/:test2.txt:MOVED_FROM:22:04:35
/home/user/:test2.txt~:MOVED_TO:22:04:35
/home/user/:test2.txt:CREATE:22:04:35
/home/user/:test2.txt~:DELETE:22:04:35 
```

**使用 gedit 打开一个新文件，然后单击保存：**

```
$gedit test3.txt
/home/user/:test3.txt~:CREATE:21:35:30 
```

**使用 gedit 打开现有文件，然后单击保存：**

```
$gedit test3.txt
/home/user/:.goutputstream-0WQ2DW:CREATE:22:06:34
/home/user/:test3.txt~:CREATE:22:06:34
/home/user/:.goutputstream-0WQ2DW:MOVED_FROM:22:06:34
/home/user/:test3.txt:MOVED_TO:22:06:34 
```

基本上我的问题是“是否可以`inotify`用来更新数据库中的文件”？例如，如果用户编辑一个文件并保存它，我希望它作为对该文件的更新反映在数据库中，而不是一个全新的文件替换一个完全不同的文件。任何帮助将不胜感激，即使这是一个将我指向不同方向的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T02:05:29.170

`inotify`告诉你发生了什么。

与大多数编辑器一样，Gedit 的保存方法是先编写一个临时文件，然后将该文件移动到位。这样可以避免在写入文件时编辑器或整个系统崩溃的情况下用半写版本覆盖文件。Vim 采用了不同的方法（这可以配置，我不会在这里详细介绍 - 看看[为什么在“vi”编辑器中编辑时 inode 值会发生变化？](https://unix.stackexchange.com/questions/36467/why-inode-value-changes-when-we-edit-in-vi-editor)）：它首先创建一个临时备份文件，然后写入新文件.

如果您希望将这些记录为单个编辑事件，则必须对偶数日志执行一些模式识别。替换现有文件的创建-写入-移动序列和类似 vim 的创建-移动-创建删除序列将是原型模式。请注意，该模式可能与其他事件交错。

我怀疑有更好的方法来做你想做的事，但我不明白你想做什么。如果您尝试记录用户操作，您已经找到了一种方法，但还有更简单的方法：[loggedfs 或 audit 子系统](https://unix.stackexchange.com/questions/6068/is-it-possible-to-find-out-what-program-or-script-created-a-given-file)。如果您想保留所有文件版本的备份，请将编辑器连接到版本控制系统（这使用户可以控制备份的内容）或使用[版本控制文件系统](http://en.wikipedia.org/wiki/Versioning_filesystem)，例如[copyfs](http://n0x.org/copyfs/)。您甚至可以使用[mysqlfs](http://mysqlfs.sourceforge.net/)或[postgresqlfs](http://git.postgresql.org/gitweb/?p=postgresqlfs.git;a=summary)之类的文件系统将文件直接存储在数据库中（诚然，这两个项目看起来都没有维护）。

# android - 如何从我的 Android 应用程序下载文件？

> ID：10527937
> 
> 赞同：0
> 
> 时间：2012-05-10T05:21:46.030
> 
> 标签：android

我有一个应用程序，它需要从服务器下载一些文件并使用它们。

1.  我怎样才能下载它们？欢迎技术和样品。
2.  我可以在哪里存储这些文件，以便我的应用程序将来可以使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:27:03.590

# gwt - 具有“前端”和“后端”端（gwt 应用程序）的项目的目录层次结构

> ID：10527938
> 
> 赞同：0
> 
> 时间：2012-05-10T05:21:56.053
> 
> 标签：gwt, code-organization

我想知道如何为我的应用程序正确构建我的目录。我正在使用 GWT（也是 GWTP）和 GAE，并且我有一个网站（“正常模式”）及其管理（“管理模式”）。所以我做了以下事情：

*   源代码
    *   com
        *   马纳纳塞古罗
            *   客户
                *   核
                    *   **行政**
                        *   应用程序
                        *   第 1 页
                        *   第2页
                        *   小部件
                        *   ETC...
                    *   **普通的**
                        *   应用程序
                        *   第 1 页
                        *   第2页
                        *   小部件
                        *   ETC...
                    *   错误
                    *   验证
        *   资源
        *   ETC...
    *   服务器
        *   吉斯
        *   处理程序
            *   **行政**
            *   **普通的**
    *   共享
        *   行动
            *   **行政**
            *   **普通的**

一切都不完整（域名...），因为我现在正在学习 GWTP 和 GWT 和 GAE。我还阅读了有关使用不同模块的信息，主要是因为它会减小要下载的应用程序的大小，但我确实在网上找到了任何简单的示例。如果有人可以帮助我，那就太好了，因为我认为项目目录结构非常重要。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:17:23.477

我已经使用 GWT 构建了一个相对较大的应用程序，并且我遵循了 Google 的最佳实践，并且我已经看到是的，它可以工作。通常，GWT 人们告诉我们 MVP。

MVP 将您的应用程序解耦为可帮助您管理整个应用程序开发的部分。

通常，当您使用 MVP 时，您的应用程序将包含入口点，该入口点将包含：

```
public class Contacts implements EntryPoint {

  public void onModuleLoad() {
    ContactsServiceAsync rpcService = GWT.create(ContactsService.class);
    HandlerManager eventBus = new HandlerManager(null);
    AppController appViewer = new AppController(rpcService, eventBus);
    appViewer.go(RootPanel.get());
  }
} 
```

如您所见，它创建客户端 RPC、用于通知事件的事件总线、作为根的应用程序控制器并控制应用程序中的所有内容，例如更改视图、注册事件

应用程序控制器还实现`ValueChangeHandler<String>`了允许它在历史更改时听到并据此采取行动，例如更改视图。然后你将拥有：

1.  楷模
2.  意见
3.  演讲者

该模型可与您的服务器共享。演示者声明了视图实现的接口。然后，演示者和视图通过接口进行对话，并且演示者和服务器通过`rpcService`您在入口点中声明并注入应用程序控制器的方式进行对话。

此外，如果您以这种方式实现您的应用程序，您将受益，因为当您使用 JUNIT 进行测试时，您只能测试演示者，因此绕过视图。因为如果您在测试中包含视图，它将花费大量时间. 视图将声明小部件，但演示者可以从视图中导入接口以与小部件交互

最后，应用层次结构如下：

--com.example.name.clients：

--AppController --name.java
--name.Service.java
--name.ServiceAsync.java

--com.example.name.events：

--com.example.name.presenters：

--com.example.name.views：

--com.example.name.models：

--com.example.name.server:

--com.example.name.shared：

在[这里](https://developers.google.com/web-toolkit/articles/mvp-architecture)查看更多信息，

# iphone - 在数组内打印数组

> ID：10527939
> 
> 赞同：0
> 
> 时间：2012-05-10T05:22:16.137
> 
> 标签：iphone, ios, nsmutablearray

我有一个类 Building，其中我有一个类成员 NSMutableArray *subnode。我已经声明了另一个数组 buildingArray，它存储了 Building 类型的元素。我试图打印 Building 类对象，如下面的代码所示。但只进入第一个环形。子节点数组的第二个 for 循环未执行。这是打印将数组作为其类成员之一的对象的正确方法吗？代码：

```
 for(Building *b in buildingArray)
{
    NSLog(@"inside building array");
    for(NSString *str in b.subnode)
    {
        NSLog(@"inside subnode array");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:59:27.383

你的代码似乎没问题。只需检查数组（子节点）是否已分配和初始化。还要检查它是否有一些值。我使用了类似的代码，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:26:05.463

更改以下代码。我不知道你是什么意思买`Building`。所以我只是使用`id`而不是`Building`避免任何类型的混淆。

```
for(id b  in buildingArray)
{
    NSLog(@"inside building array");
    NSArray *temp = b;

    for(NSString *str in temp)
    {
        NSLog(@"inside subnode array");
    }
} 
```

希望对你有帮助;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:34:54.237

如果这是出于调试目的，我建议尝试以下方法：从继承的每个对象都`NSObject`继承其`description`方法。

将此添加到`Building.m`：

```
@implementation Building

- (NSString *)description {
    NSMutableString *description = [NSMutableString stringWithString:[super description]];
    // add the following lines for any relevant properties
    // [description appendFormat:@", materials == %@", materials];
    // then have the subnode print itself:
    [description appendFormat:@", subnode == %@", subnode];
    return description;
}

@end 
```

`buildingArray`然后，您只需调用以下代码即可打印整个内容：

```
NSLog(@"buildingArray == %@", buildingArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T05:45:14.940

```
for(Building *b in buildingArray)
{
NSLog(@"inside building array");
NSMutableArray *temp = [NSMutableArray arrayWithArray:b.subnode]
for(id *str in temp)
{
    NSLog(@"inside subnode array");
}
} 
```

这应该有效。快乐编码:)

# mysql - 我的列表中的哪些条目在我的表中没有条目？

> ID：10527940
> 
> 赞同：0
> 
> 时间：2012-05-10T05:22:21.580
> 
> 标签：mysql, sql

我如何在 MySQL 中做这样的事情？

```
 (1274649,682844,872502,1016256) 
 INTERSECT 
 (SELECT id  FROM `users` WHERE `id` IN (1274649,682844,872502,1016256)) 
```

* * *

*改编自评论：*

> 这四个数字就是我现在拥有的 ID。我想知道哪些 ID 在我的表中没有条目，其中有多少没有条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:27:29.833

```
select t.id from (
    select 1274649 as id union
    select 682844 union
    select 872502 union
    select 1016256
) t
left join users u on u.id = t.id
where u.id is null 
```

这将返回那些在表`id`中没有对应的 s 。`id``users`

**添加**了这是评论中 OP 解释的答案：[我的列表中的哪些条目在我的表中没有条目？](https://stackoverflow.com/questions/10527940/which-entries-in-my-list-do-not-have-an-entry-in-my-table/10528550#comment13617653_10527940)

# jquery - jQuery 无响应点击事件

> ID：10527947
> 
> 赞同：2
> 
> 时间：2012-05-10T05:23:20.613
> 
> 标签：jquery, css

我正在尝试在 jQuery 中构建一个基本的滑块。我有 5 个主要部分显示在页面上，当您将鼠标悬停在它们的容器 div 上时，箭头会在第一个和最后一个元素上弹出。

我的下一步是编写代码，将 div（取决于单击侧的左侧或右侧）存储在一个数组中，并将其从 DOM 中删除。但是，我在绑定点击事件时遇到了麻烦。

这是我的CSS：

```
.left_arrow_background {
 height: 175px;
width: 65px;
/* background:url(../images/left-arrow.png) no-repeat; */
background:#ccc;
opacity: .9;
position: absolute;
cursor: pointer;
z-index: 2;
}

.right_arrow_background {
height: 175px;
width: 65px;
/* background:url(../images/right-arrow.png) no-repeat;*/
background:#ccc;
z-index: 2;
opacity: .9;
position: relative;
left:890px;
cursor: pointer;
}
.boomers_scroller {
height:275px;
padding-left:1px;
display:block;
border-bottom-width: 1px;
border-bottom-style: solid;
border-bottom-color: #CCC;
    overflow:hidden;
}
.all-boomers {
display: block;
float: left;
height: 225px;
margin-bottom: 20px;
margin-left: 20px;
width: 175px;
} 
```

以及输出的 HTML：

```
<div class="all-boomers">
<a href="/boomers/profile/id/2"><img src="/images/users/medium_thumbs/4fa44866c3561.jpg" alt=""/></a>
      <p class="boomers_name">PC Guy</p>
      <p class="activity_name">IT Guy PC Repair</p>
    </div>
<!-- three more identical section here -->
<div class="all-boomers">
<a href="/boomers/profile/id/6"><img src="/images/users/medium_thumbs/4fa62dff64c44.jpg" alt=""/></a>
      <p class="boomers_name">Cruella Deville</p>
      <p class="activity_name">Dalmation Dog-Sitter</p>
    </div> 
```

即使`z-index`从样式表中删除，我似乎也无法记录单击事件。到目前为止，这是我的 js 文件：

```
$(document).ready(function() {

  var boomers = $('.all-boomers');
  var boomersLength = boomers.length;
  var boomersContainer = {};
  $(".all-boomers:eq(4)").attr('id','right-boomer');
  $(".all-boomers:eq(0)").removeClass("all-boomers").addClass("one-fifth first").attr('id','left-boomer');
  var image_left = '<div class="left_arrow_background"></div>';
  var image_right = '<div class="right_arrow_background"></div>';

  $(".boomers_scroller").hover(  
    function(){
        $(image_left).insertBefore('#left-boomer');
        $(image_right).insertAfter('#right-boomer');
    },
    function(){
        $('.left_arrow_background').remove();
        $('.right_arrow_background').remove();
    });

  $("div.left_arrow_background").click(function(){
    var left_boomer = $('#left-boomer').children();
    // store left_boomer in boomerscontainer, then remove it from dom
    console.log('clicked!');

  });
 }); 
```

这不仅仅是点击事件......我也尝试过其他鼠标事件，没有任何东西触发控制台测试消息，或者如果我将代码放在 .click 函数中，它不会触发代码。

编辑：添加了第 4 个（相关的 css 样式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:40:01.617

你忘了关闭 ready() 函数（或者在粘贴之前复制它 :) 再添加一个 }); 到此代码的底部。这里是孤立的：http: [//jsfiddle.net/Q3rDz/](http://jsfiddle.net/Q3rDz/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T16:27:14.530

固定的！当我单击时，悬停事件仍在发生，因此将单击事件嵌套在悬停事件中可以解决问题。

```
$(document).ready(function() {
var boomers = $('.all-boomers');
var boomersLength = boomers.length;
var boomersContainer = {};
$(".all-boomers:eq(4)").attr('id','right-boomer');
$(".all-boomers:eq(0)").removeClass("all-boomers").addClass("one-fifth first").attr('id','left-boomer');
var image_left = '<div class="left_arrow_background"></div>';
var image_right = '<div class="right_arrow_background"></div>';
$(".boomers_scroller").hover(       function(){ 
     $(image_left).insertBefore('#left-boomer');
     $(image_right).insertAfter('#right-boomer');
     $("div.left_arrow_background").click(function(){
           var left_boomer = $('#left-boomer').children();
          // store left_boomer in boomerscontainer, then remove it from dom
          console.log('clicked!');    });
 }, 
function(){ 
    $('.left_arrow_background').remove();
     $('.right_arrow_background').remove();
 });
 }); 
```

# git - 如何丢弃我未提交的更改？

> ID：10527950
> 
> 赞同：2
> 
> 时间：2012-05-10T05:23:40.670
> 
> 标签：git, version-control, repository

我不知道发生了什么，但我又搞砸了 Git 存储库。所以一切都很好，它编译得很好。现在不编译了。我做了一些更改，没有提交任何更改。当我做 repo diff 时，我看到了我所做的更改，并且代码中出现了一些奇怪的更改。我不知道！很多。所以现在我想为了解决这个问题并保留我故意做出的改变和不知从何而来的改变。我会做 git add 我所做的更改，我想丢弃所有以其他方式出现的更改。这个怎么做 ？

```
git add filepath 
```

以及如何丢弃我不想添加和提交的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:27:04.650

您可以执行以下步骤：

1.  用于`git add`添加要保留的更改。
2.  `git commit`对存储库的这些更改。
3.  `git reset --hard HEAD`丢弃其余的更改。

请注意，第 3 步具有*破坏性*，您不能使用 Git 来恢复这些更改。如果不确定，请先备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T19:17:05.343

如果您使用 GitHub GUI（Windows 或 Mac）并且不担心丢失计算机上的本地更改，而只需要从 GitHub 获取最新版本：

在尝试同步之前，只需使用“放弃更改”即可。这可以针对特定文件完成：

![在此处输入图像描述](../Images/d6c10c69f0e58789fc6e343959cb93b4.png)

或所有文件：

![在此处输入图像描述](../Images/142c317a87ec16dfbe6a504b17f6196e.png)

它将所有选定的文件恢复到提交给 repo 的最后一个版本。

# android - 如何在 Windows 7 中构建 android 独立工具链

> ID：10527952
> 
> 赞同：3
> 
> 时间：2012-05-10T05:23:41.703
> 
> 标签：android, windows-7, toolchain

我正在尝试按照“docs\STANDALONE-TOOLCHAIN.html”使用 ndk 8 为 mips 构建独立工具链，但是当我运行以下命令“make-standalone-toolchain.sh --platform=android-14 --install-dir= /tmp/my-android-toolchain" 在命令提示符中出现以下错误

```
E:\Installed_SDKs\android-ndk-r8\build\tools>make-standalone-toolchain.sh --plat
form=android-14 --arch=mips --install-dir=./mytool
Welcome to Git (version 1.7.9-preview20120201)

Run 'git help git' to display the help index.
Run 'git help <command>' to display help for specific commands.
expr: syntax error
expr: syntax error
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
expr: syntax error
expr: syntax error
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
expr: syntax error
expr: syntax error
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_default_.=: command not found
expr: syntax error
expr: syntax error
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
expr: syntax error
expr: syntax error
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_default_/tmp/ndk-=: No such file or directory
expr: syntax error
expr: syntax error
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: eval: line 159: unexpected EOF while looking for matching
`''
./prebuilt-common.sh: eval: line 160: syntax error: unexpected end of file
expr: syntax error
expr: syntax error
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
./prebuilt-common.sh: line 159: OPTIONS_default_android-3=: command not found
expr: syntax error
expr: syntax error
expr: syntax error
expr: syntax error
expr: syntax error
ERROR: Unknown option '--platform=android-14'. Use --help for list of valid values. 
```

任何身体都可以指导我做错了什么！或者我如何在 Windows 7 中构建独立的工具链

问候阿山

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-27T07:39:37.147

```
$ E:>Installed_SDKs/android-ndk-r9d/build/tools/make-standalone-toolchain.sh --platform=android-14 --arch=mips --system=windows-x86_64 
```

为我生成`/tmp/ndk-/mipsel-linux-android-4.6.tar.bz2`；现在我可以解压这个文件`E:\Installed_SDKs\android-ndk-r8\build\tools\mytool`并从此过上幸福的生活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-16T10:28:21.153

**短版**：

`expr --`用您选择的文本编辑器替换`expr`文件中的内容。`$NDK_HOME/build/tools/prebuilt-common.sh`然后按照记录运行。

**长版**：

您在来自参数解析器的 android ndk 实现的输出中看到的语法错误。编写此脚本的人决定使用`expr`带有正则表达式的命令来解析参数，而不是使用`echo $1 | grep ...`. 它确实看起来更干净（即使在 ndk 的其他脚本中使用了 echo-grep），但`expr`不是最标准的命令。它有一组对所有实现通用的参数，如 POSIX 规范中详述的那样，其他一切都可以以不同的方式实现或根本不实现。

如果您查看`$NDK_HOME/build/tools/prebuilt-common.sh`第 392 行的文件（可能取决于 NDK 版本），您的代码如下：

```
param=`expr -- "$1" : '^\([^\-].*\)$'` 
```

注意 的参数`expr`是如何用 分隔的`--`。这在 POSIX[规范中](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/expr.html)**没有**指定。它甚至没有在任何[Linux man](http://linux.die.net/man/1/expr)中提及。它之所以有效，是因为某些主机系统具有可识别为“停止解析参数”的命令。因此，这显然是使用**未记录功能**的情况。[`expr`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/expr.html)`expr``--`

 **您似乎使用 Git-bash - 由 git-scm.org 分发的 mingw32-git 附带的 bash 版本。此版本不支持`expr --`整个参数解析库中断的语法。为了修复它 - 只需将所有替换`expr --`为`expr`prebuilt-common.sh 文件中的所有内容。它仍然会向您发出一些警告，但脚本应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-08T10:09:22.510

当涉及到用 C 编写的库的交叉编译时，我们需要 NDK。但是在 Windows 上编译这种类型的库非常困难，有时会卡住，而且总是令人沮丧。我建议你尝试在 Linux 上编译。它肯定会被编译。Linux/Mac 是交叉编译的最佳平台。我希望它会有所帮助**

# c# - 为窗口服务的不同类型任务创建完美的多线程模型

> ID：10527957
> 
> 赞同：1
> 
> 时间：2012-05-10T05:24:02.797
> 
> 标签：c#, multithreading, design-patterns, windows-services

我正在写一个窗口服务。我有一组任务每天要执行一次。某组任务应在每个时间间隔（例如 5 分钟）后执行。最后一组任务应该在一个时间间隔比如 72 小时后执行。

同时我有一些设置需要在特定的时间间隔刷新。

我在正确设计它时发现了一些问题。这是我的设计。

```
public void StartController()
        {
            try
            {               
                readSettings();                
                startDetectionAndPost(); //once a day
                LogUtil.WriteLog(LogLevel.INFO, "starting bootstrap");
                bootStrap(); //based on time interval elapsed
                LogUtil.WriteLog(LogLevel.INFO, "starting heartbeat of agent");
                startHeartBeat(); //after a time interval say 1 min                
                LogUtil.WriteLog(LogLevel.INFO, "start fetching ADSI info");
                startInfoTimer();

                while (true)
                {
                    if (!IsRunning)
                    {
                        engine.StopExecution();                       
                        break;
                    }
                    //here got to change this as per threading model.
                    while (_threadMonitor.CurrentThreadCount >= MAX_JOB_COUNT)
                    {
                        if (!IsRunning)
                        {
                            engine.StopExecution();
                            LogUtil.WriteLog(LogLevel.INFO, "query execution stopped");                            
                            break;
                        }
                        //otherwise sleep
                        Thread.Sleep(100);                        
                    }

                    _executionThread = new Thread(new ThreadStart(engine.StartExecution));
                    _threadMonitor.IncrementThread();
                    _executionThread.Start();

                    //if user gone stop service it will timeout issue.
                    Thread.Sleep(new TimeSpan(0, 0, 1));//_agentCache.DomainSweepInterval));
                }
            }
            catch (Exception ex)
            {
                LogUtil.WriteLog(LogLevel.ERROR, "could not process."+ex.Message,ex);
                //log exception and what to do next.
            }
        } 
```

我必须每天执行一次的任务，或者每分钟后的心跳。我为此创建了计时器并启动它，因为这些东西独立于其他东西。但随后是主要执行部分。我有两种类型的查询要执行。1）在每个间隔之后说 5 分钟和其他间隔之后每 72 小时。一次只能执行一次。2）我必须在给定的时间间隔内刷新我的设置，比如 5 分钟后，我必须刷新其他两个设置，比如 30 分钟后和 60 分钟后。

现在我发现很难正确安排它，以便我的服务启动/停止不会受到影响，并且一切都应该按照可扩展性和性能进行完美设计？

请分享您的观点，我希望我的问题是正确的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:34:49.543

首先我同意任务计划程序有它的问题。我以前必须写过其中一个，但我是从头开始，我会看看这个项目。

[http://taskschedulerengine.codeplex.com/](http://taskschedulerengine.codeplex.com/)

这使您能够爬到其他开发人员的后面，并且可以专注于实际的业务问题。另外，如果您发现要添加的内容，可以回馈社区

# c - 使用 GnuTLS 构建 wget？

> ID：10527976
> 
> 赞同：0
> 
> 时间：2012-05-10T05:26:13.607
> 
> 标签：c, gcc, makefile, wget

`wget`我在构建时遇到了麻烦。这是我目前的咒语，为简洁起见

```
host=i686-w64-mingw32
prefix=/usr/i686-w64-mingw32/sys-root/mingw

# Install gmp
./configure --host=$host --prefix=$prefix
make install

# Install nettle
./configure --host=$host --prefix=$prefix
make install AR=$host-ar

# Install GnuTLS
./configure --host=$host --prefix=$prefix --disable-shared
make install

# Install Wget
./configure --host=$host --prefix=$prefix --disable-ipv6
make install 
```

错误在决赛`make install`中`wget`

```
/usr/i686-w64-mingw32/sys-root/mingw/lib/libgnutls.a(base64.o): In function `base64_encode':
/home/Steven/gnutls-3.0.19/gl/base64.c:69: multiple definition of `_base64_encode'
utils.o:utils.c:(.text+0x49b0): first defined here
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:54:02.823

`multiple definition`发生错误是因为多次`base64_encode`定义。

```
// wget-1.13.4/src/utils.c
int
base64_encode (const void *data, int length, char *dest)

// gnutls-3.0.19/gl/base64.c
void
base64_encode (const char *restrict in, size_t inlen,
               char *restrict out, size_t outlen) 
```

这个问题是在 GnuTLS 3.0.13 中引入的。使用 3.0.12 版本为我解决了这个问题。

[`ftp.gnu.org/gnu/gnutls`](ftp://ftp.gnu.org/gnu/gnutls)

# actionscript-3 - Flex 警告：多个标记..数据绑定将无法检测到对象的分配

> ID：10527977
> 
> 赞同：2
> 
> 时间：2012-05-10T05:26:21.577
> 
> 标签：actionscript-3, flex4

我正在用标签绑定一个对象。它给了我这个警告。我写了以下代码

s:标签宽度=“296”高度=“20”字体大小=“18”文本=“{obj.companyParty_Name}”

其中 companyParty_Name 是我想在标签上显示的 obj 中的一个字段

上面的警告是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:33:16.813

属性**companyParty_Name**不可绑定。

[关于数据绑定](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf64c3d-7fff.html)

为了使警告消失，您需要在属性定义上方添加注释**[Bindable] 。**像这样：

```
[Bindable]
private var companyParty_Name:*; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:27:19.613

我对这段代码有同样的警告

```
<mx:DateField id="buy_expiry_date" disabledRanges="{[{
    rangeEnd: new Date(today.year,today.month,today.date - 1)
}]}"/> 
```

然后我把它改成

```
<mx:DateField id="buy_expiry_date" disabledRanges="{[{
    rangeEnd: new Date(today.getFullYear(),today.getMonth(),today.getDate() - 1)
}]}"/> 
```

它停止警告我。

# php - 在 MySQL 或 PHP 中使用日期

> ID：10527978
> 
> 赞同：-1
> 
> 时间：2012-05-10T05:26:24.133
> 
> 标签：php, mysql, date

我有一个基于日期的要求，我需要显示特定日期范围内的员工人数，不应计算周日和政府假期。

```
------------------------------------------
|Staff name| less | Full | more | Absent |
------------------------------------------
| name 1   | 1    | 3    | 1    |  1     |
------------------------------------------
| name 2   | 2    | 2    | 2    | 0      |
------------------------------------------ 
```

这是我的要求：

1.  周日不应该算在内
2.  周六将有 4 小时的努力
3.  工作日将有 8 小时的努力

但工作人员可以进入低于或高于固定值的位置。表中如果员工工作 7 小时将在少列中计入 +1，如果他工作超过 8 小时将在更多列中计入 +1，如果他工作正好 8 小时将在完整列中计入 +1 , 如果他在特定日期缺席 +1 将被计入缺席列。

周六：与上述相同，但 8 小时将被视为 4 小时。无论如何，星期天不应该被计算在内。

对于这个要求，我是否需要一个新的 MySQL 表，其中包含一年中的所有 365 天，其中星期日和政府假期处于活动状态？或者我们可以在没有桌子的情况下做到这一点？如果是这样怎么做，请解释一下。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:16:52.460

```
$day_of_week = date("D"); 
```

这将向您显示一周中的当前日期，以便帮助您了解它是“星期六”还是“太阳”。

至于政府假期，您需要将它们存储在表格中。可能最简单的方法是设置日、月、年。然后你可以像这样找出当前日期：

```
$mon = date("m");
$day = date("d");
$year = date("Y"); 
```

只需使用这些变量来构建查询并确保当前日期不是假期：

```
$sql = "SELECT * FROM holidays WHERE day='".$day."' AND month='".$month."' AND year='".$year."'";
....execute query 
```

# ios - 更改 protocol.h 文件的名称会破坏代码

> ID：10527982
> 
> 赞同：0
> 
> 时间：2012-05-10T05:26:42.217
> 
> 标签：ios, xcode, refactoring, protocols

当我更改协议文件的名称时，项目不再重新识别它。这是正常的行为吗？此外，当我从 .h 文件中重构协议名称时，它会更改所有内容（在代码中），但不会更改实际的文件名。

我该如何解决这个问题？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:35:46.307

要更改文件名（在项目和文件系统中），您必须在项目中重命名它

执行“慢”双击项目中的文件名

当您重命名文件时，请确保您不只是将大写更改为小写或反之亦然，OSX 不允许这样做，因为它往往不区分大小写。

例如

Payment.h -> payment.h 不会工作

Payment.h -> Payment1.h -> payment.h 工作

“慢”双击：点击之间的 1 秒暂停

# javascript - 使用 JavaScript 或 jQuery 检测 Mac OS X 或 Windows 计算机的最佳方法

> ID：10527983
> 
> 赞同：132
> 
> 时间：2012-05-10T05:26:42.827
> 
> 标签：javascript, jquery

因此，当用户使用 Mac 时，我尝试将“关闭”按钮移动到左侧，而当用户使用 PC 时，我尝试将“关闭”按钮移动到右侧。现在我通过检查用户代理来做到这一点，但它很容易被欺骗而无法进行可靠的操作系统检测。是否有可靠的方法来检测运行浏览器的操作系统是 Mac OS X 还是 Windows？如果没有，有什么比用户代理嗅探更好的呢？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-08-01T03:12:16.460

更改 userAgent 字符串时不会欺骗[window.navigator.platform](https://developer.mozilla.org/en-US/docs/Web/API/NavigatorID.platform)属性。如果我将 userAgent 更改为 iPhone 或 Chrome Windows，我在我的 Mac 上进行了测试，*navigator.platform*仍然是 MacIntel。

![更改 userAgent 字符串时不会欺骗 navigator.platform](../Images/e25a05750dac8894449b0ffdd578e50a.png)

该属性也是*只读的*

![navigator.platform 是只读的](../Images/12902d0a4eb5e0c50c8c1b1c98fb2fa5.png)

* * *

我可以想出下表

> ### Mac 电脑
> 
> > `Mac68K` *麦金塔 68K 系统。*
> > `MacPPC` *Macintosh PowerPC 系统。*
> > `MacIntel` *Macintosh 英特尔系统。*
> 
> ### iOS 设备
> 
> > `iPhone` *苹果手机。*
> > `iPod` *iPod 触摸。*
> > `iPad` *平板电脑。*

* * *

现代macs回归`navigator.platform == "MacIntel"`，但为了提供一些“未来证明”，不要使用精确匹配，希望它们会变成类似`MacARM`或`MacQuantum`将来的东西。

```
var isMac = navigator.platform.toUpperCase().indexOf('MAC')>=0; 
```

包括也使用“左侧”的 iOS

```
var isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);
var isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform); 
```

```
var is_OSX = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);
var is_iOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);

var is_Mac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
var is_iPhone = navigator.platform == "iPhone";
var is_iPod = navigator.platform == "iPod";
var is_iPad = navigator.platform == "iPad";

/* Output */
var out = document.getElementById('out');
if (!is_OSX) out.innerHTML += "This NOT a Mac or an iOS Device!";
if (is_Mac) out.innerHTML += "This is a Mac Computer!\n";
if (is_iOS) out.innerHTML += "You're using an iOS Device!\n";
if (is_iPhone) out.innerHTML += "This is an iPhone!";
if (is_iPod) out.innerHTML += "This is an iPod Touch!";
if (is_iPad) out.innerHTML += "This is an iPad!";
out.innerHTML += "\nPlatform: " + navigator.platform;
```

```
<pre id="out"></pre>
```

* * *

由于大多数操作系统都使用右侧的关闭按钮，因此当用户使用 MacLike 操作系统时，您只需将关闭按钮移至左侧，否则将其放在最常见的一侧，右侧就没有问题。

```
setTimeout(test, 1000); //delay for demonstration

function test() {

  var mac = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);

  if (mac) {
    document.getElementById('close').classList.add("left");
  }
}
```

```
#window {
  position: absolute;
  margin: 1em;
  width: 300px;
  padding: 10px;
  border: 1px solid gray;
  background-color: #DDD;
  text-align: center;
  box-shadow: 0px 1px 3px #000;
}
#close {
  position: absolute;
  top: 0px;
  right: 0px;
  width: 22px;
  height: 22px;
  margin: -12px;
  box-shadow: 0px 1px 3px #000;
  background-color: #000;
  border: 2px solid #FFF;
  border-radius: 22px;
  color: #FFF;
  text-align: center;
  font: 14px"Comic Sans MS", Monaco;
}
#close.left{
  left: 0px;
}
```

```
<div id="window">
  <div id="close">x</div>
  <p>Hello!</p>
  <p>If the "close button" change to the left side</p>
  <p>you're on a Mac like system!</p>
</div>
```

[http://www.nczonline.net/blog/2007/12/17/don-t-forget-navigator-platform/](http://www.nczonline.net/blog/2007/12/17/don-t-forget-navigator-platform/)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2015-01-09T14:33:52.513

**就这么简单：**

```
function isMacintosh() {
  return navigator.platform.indexOf('Mac') > -1
}

function isWindows() {
  return navigator.platform.indexOf('Win') > -1
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T05:36:08.543

这是你想要的？否则，请告诉我，我将删除此帖子。

试试这个 jQuery 插件： http: [//archive.plugins.jquery.com/project/client-detect](http://archive.plugins.jquery.com/project/client-detect)

**演示： http:** [//www.stoimen.com/jquery.client.plugin/](http://www.stoimen.com/jquery.client.plugin/)

这是基于 quirksmode BrowserDetect 的一个 jQuery 浏览器/操作系统检测插件的包装。

对于热心的读者： http:
[//www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/](http://www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/)
[http://www.quirksmode.org/js/support.html](http://www.quirksmode.org/js/support.html)

更多关于插件的代码在这里：http: [//www.stoimen.com/jquery.client.plugin/jquery.client.js](http://www.stoimen.com/jquery.client.plugin/jquery.client.js)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-19T03:08:00.880

让我知道这个是否奏效。**在StackOverflow.com**的帮助下检测 Apple 设备（Mac 电脑、iPhone 等）的方法：
[截至今天，navigator.platform 的可能值列表是什么？](https://stackoverflow.com/questions/19877924/what-is-the-list-of-possible-values-for-navigator-platform-as-of-today)

```
var deviceDetect = navigator.platform;
var appleDevicesArr = ['MacIntel', 'MacPPC', 'Mac68K', 'Macintosh', 'iPhone', 
'iPod', 'iPad', 'iPhone Simulator', 'iPod Simulator', 'iPad Simulator', 'Pike 
v7.6 release 92', 'Pike v7.8 release 517'];

// If on Apple device
if(appleDevicesArr.includes(deviceDetect)) {
    // Execute code
}
// If NOT on Apple device
else {
    // Execute code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-15T10:03:43.713

为了完成：[一些浏览器](https://caniuse.com/?search=userAgentData)支持`navigator.userAgentData.platform`，这是一个只读属性。

```
console.log(navigator.userAgentData.platform);
// macOs 
```

请注意，`Navigator.platform` [已弃用](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/platform)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-29T12:36:47.590

您可以对此进行测试：

```
function getOS() {
  let userAgent = window.navigator.userAgent.toLowerCase(),
    macosPlatforms = /(macintosh|macintel|macppc|mac68k|macos)/i,
    windowsPlatforms = /(win32|win64|windows|wince)/i,
    iosPlatforms = /(iphone|ipad|ipod)/i,
    os = null;

  if (macosPlatforms.test(userAgent)) {
    os = "macos";
  } else if (iosPlatforms.test(userAgent)) {
    os = "ios";
  } else if (windowsPlatforms.test(userAgent)) {
    os = "windows";
  } else if (/android/.test(userAgent)) {
    os = "android";
  } else if (!os && /linux/.test(userAgent)) {
    os = "linux";
  }

  return os;
}

document.getElementById('your-os').textContent = getOS();
```

```
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
        <h1 id="your-os"></h1>
  </body>
</html>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-01T14:58:10.010

我认为无论硬件架构如何，所有基于 Chrome 或 Chromium 的浏览器都将返回`MacIntel`macOS 平台。

[查看 Chromium 源代码以获取更多详细信息。](https://source.chromium.org/chromium/chromium/src/+/master:third_party/blink/renderer/core/frame/navigator_id.cc;l=64;drc=703d3c472cf27470dad21a3f2c8972aca3732cd6)

# css - 如何在网页中检测它正在移动 safari 或 websheet 上运行

> ID：10527986
> 
> 赞同：1
> 
> 时间：2012-05-10T05:26:59.130
> 
> 标签：css, html

我有一个网页，我想检测它是否在 ipad 上的移动 safari 上运行。如果是这样，它应该加载不同的 css 文件（如果它在 websheet 上运行，那么它应该加载另一个 css）。我正在使用以下方式来处理 css，但它只显示了两种方式：

```
 <link rel="stylesheet" href="main.css?v=2">

   <link rel="stylesheet" media="handheld" href="css/handheld.css?v=2"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:31:07.877

您是否使用编程语言来动态生成页面？如果是这样，您可以使用浏览器发送的用户代理，并根据它决定要包含哪个 css。

例子：

```
<script type="text/javascript">
    $("#btn_load_css").click(function(){
        var w = screen.width;
        var h = screen.height;
        $(document).append("<link rel='stylesheet' "
            +" href='css/defaults.css.php?w="+w+"&h="+h+"' />");
    });
</script> 
```

这将导致 css 在文件末尾加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:32:20.797

如果您主要关心的是视口大小，只需使用[*媒体查询*](http://www.w3.org/TR/css3-mediaqueries/)。有关更简单的解释和一些示例，请参阅[MDN 。](https://developer.mozilla.org/en/CSS/Media_queries)

# java - 在java中根据不同的数据成员对对象列表进行排序

> ID：10527990
> 
> 赞同：3
> 
> 时间：2012-05-10T05:27:14.490
> 
> 标签：java, string, sorting, collections, comparable

我有这堂课：

```
public class Friend {

private String name;
private String location;
private String temp;
private String humidity;

public String getTemp() {
    return temp;
}

public void setTemp(String temp) {
    this.temp = temp;
}

public String getHumidity() {
    return humidity;
}

public void setHumidity(String humidity) {
    this.humidity = humidity;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getLocation() {
    return location;
}

public void setLocation(String location) {
    this.location = location;
}
} 
```

我想根据用户输入的名称、位置、温度和湿度对列表进行排序。
**编辑：**用户指定必须由哪个数据成员进行排序。
最简单的方法是什么？
谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T05:43:14.170

因为您想按照四种不同的标准对它们进行排序，所以实现 Comparable 没有意义。在这种情况下，您可能会发现为每个排序依据参数创建不同的比较器。但是，您可以为最符合逻辑的排序字段（例如名称）实现 Comparable。否则，比较器是要走的路。

```
public class FriendNameComparator extends Comparator<Friend> {

    // assuming both are non-null for code simplicity; you may wish to change that
    public int compare(Friend f1, Friend f2) {
        return f1.getName().compareTo(f2.getName());
    }
}

public class FriendLocationComparator extends Comparator<Friend> {

    // assuming both are non-null for code simplicity; you may wish to change that
    public int compare(Friend f1, Friend f2) {
        return f1.getLocation().compareTo(f2.getLocation());
    }
}

// and so forth 
```

然后，您可以使用 Collections 实用程序类的 sort 函数按给定的比较器进行排序。

```
Collections.sort(friendsList, new FriendNameComparator()); // sorts by name
Collections.sort(friendsList, new FriendLocationComparator()); // sorts by location
// etc 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T05:37:12.130

Java 有一个名为的静态函数[`Collections.sort(List, Comparator)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)，它对给定自定义 Comparator 的（生成的）对象列表进行排序，给定两个相同类型的对象，确定哪个在另一个之前排序。

您的任务是编写一个函数，该函数创建一个[比较](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)器，该比较器根据其参数和用户指定的排序顺序对对象进行排序。例如：

```
public Comparator<Friend> getComparator(final String sortBy) {
  if ("name".equals(sortBy)) {
    return new Comparator<Friend>() {
      @Override int compare(Friend f1, Friend f2) 
        return f1.getName().compareTo(f2.getName());
      }
    };
  } else if ("location".equals(sortBy)) {
    return new Comparator<Friend>() {
      @Override int compare(Friend f1, Friend f2) 
        return f1.getLocation().compareTo(f2.getLocation());
      }
    };
  } else if ("temp".equals(sortBy)) {
    // ...
  } else {
    throw new IllegalArgumentException("invalid sort field '" + sortBy + "'");
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T05:40:12.803

```
List list=new ArrayList(); 
```

对每个条件使用 If else if：

```
if(location ){
        Collections.sort(list, new Comparator () {
             public int compare(YourObject o1, YourObject o2) {
                    return o1.getLocation().compareTo(o2.getLocation());
                }

        });

    }

    } else if(temp ){

    ........
    }
    ....... 
```

# java - 使用 CXF 2.3.3Unmarshalling 错误调用 WebService 时出错：意外元素

> ID：10527992
> 
> 赞同：1
> 
> 时间：2012-05-10T05:27:40.110
> 
> 标签：java, web-services, apache, cxf, unmarshalling

使用 CXF 2.2.3 调用 WebService 时出现以下错误。WebService返回数据时发生错误。

> 解组错误：意外元素（uri：“http://service.claimservice.hospital.www.wcb.ab.in”，local：“accidentAddress”）。预期元素是 <{http://domain.claimservice.hospital.www.wcb.ab.in}employerContactInfo>、<{http://domain.claimservice.hospital.www.wcb.ab.in}accidentCountry>、< {http://domain.claimservice.hospital.www.wcb.ab.in}denialReason>,<{http://domain.claimservice.hospital.www.wcb.ab.in}workerContactInfo>,<{http:/ /domain.claimservice.hospital.www.wcb.ab.in}accidentPostalCode>，<{http://domain.claimservice.hospital.www.wcb.ab.in}entitlementDecisionDate>，

如果可以通过更改我的 wsdl 来摆脱这个错误，谁能告诉我？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:01:03.430

简短的回答是，该请求在 XML 中包含一个具有完全限定名称的`{http://service.claimservice.hospital.www.wcb.ab.in}accidentAddress`元素，该元素位于仅“预期元素”列表中的元素有效的位置。

这基于解组器的上下文，最终基于从中读取数据类型的模式（应该是呈现/导入到 WSDL“类型”部分的模式）。

根据问题中的信息，响应管道是问题所在，因此服务器端编组器和客户端解组器不同步（由不同的模式创建）。

建议的故障排除（假设在服务器端使用编组器对象）：

1.  为有问题的消息捕获 XML。

2.  确定 XML 是否与 WSDL 的类型部分中呈现的内容一致。

3.  如果 XML 与 WSDL 兼容，那么可能的问题是客户端解组器提供的数据类型与 WSDL 中提供的数据类型不同。

4.  如果 XML 与 WSDL 不兼容，则服务器端 XML 编组器正在创建不正确的消息（或者它正在创建正确的消息并且 WSDL 不正确......它发生了）。在这种情况下，编组器可能是针对过时的数据类型创建的。

如果不使用 marshaller 对象而是手动创建服务响应，则问题是在它不是 XML 消息的有效部分或它是消息的有效部分但位于错误位置时正在创建的事故地址元素相对于包含元素。

这有点啰嗦，但希望包含足够的信息来提供帮助。

# android - 如何在我的 Android Activity 中编写此布局代码？

> ID：10527993
> 
> 赞同：0
> 
> 时间：2012-05-10T05:27:40.440
> 
> 标签：android

我希望为我的示例应用程序创建一个自定义布局。以前我为用户界面使用 xml 布局，但现在我希望使用自定义（不使用 xml 布局）创建应用程序。我在我的 xml 中使用了以下代码，但我将此 xml 布局更改为我无法实现的自定义代码（我不知道如何执行此操作）。如何在我的 Activity 中编写此布局代码？任何人都可以请你帮我解决这个问题。提前致谢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/webviewscroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:id="@+id/webviewlinear"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <RelativeLayout
                android:id="@+id/webviewframe1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <WebView
                    android:id="@+id/webview1"
                    android:layout_width="fill_parent"
                    android:layout_height="350dp"
                    android:layout_alignParentBottom="true"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="20dp" >
                </WebView>

                <ImageView
                    android:id="@+id/webviewimage1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:background="@drawable/one" >
                </ImageView>
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/webviewframe2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <WebView
                    android:id="@+id/webview2"
                    android:layout_width="fill_parent"
                    android:layout_height="350dp"
                    android:layout_alignParentBottom="true"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="20dp" >
                </WebView>

                <ImageView
                    android:id="@+id/webviewimage2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/two" >
                </ImageView>
            </RelativeLayout>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:31:47.240

由于您想在运行时创建布局，您可以这样做：

```
RelativeLayout layout1 = new RelativeLayout(this);
ImageView imgView1 = new imgView1(this);
layout1.addView(imgView1);   // added ImageView into the RelativeLayout 
```

执行此类创建和添加小部件的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:50:25.647

```
LinearLayout ll1,ll2;
    ScrollView sv = new ScrollView(this);
    RelativeLayout rl1,rl2;
    WebView wv1,wv2;
    ImageView iv1,iv2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        int LHeightWrap = LinearLayout.LayoutParams.WRAP_CONTENT;
        int LWidthWrap = LinearLayout.LayoutParams.WRAP_CONTENT;

        int LHeightFill = LinearLayout.LayoutParams.FILL_PARENT;
        int LWidthFill = LinearLayout.LayoutParams.FILL_PARENT;

        int RHeightWrap = RelativeLayout.LayoutParams.WRAP_CONTENT;
        int RWidthWrap = RelativeLayout.LayoutParams.WRAP_CONTENT;

        int RHeightFill = RelativeLayout.LayoutParams.FILL_PARENT;
        int RWidthFill = RelativeLayout.LayoutParams.FILL_PARENT;

        wv1 = new WebView(this);
        iv1 = new ImageView(this);

        rl1.addView(wv1,RWidthWrap,RHeightWrap);
        rl1.addView(iv1,RWidthWrap,RHeightWrap);

        wv2 = new WebView(this);
        iv2 = new ImageView(this);

        rl2.addView(wv2,RWidthWrap,RHeightWrap);
        rl2.addView(iv2,RWidthWrap,RHeightWrap);

        ll2.addView(rl1);
        ll2.addView(rl2);

        sv.addView(ll2);

        ll1.addView(ll2); 
```

你可以做这样的事情。您还可以使用本机代码设置任何组件的属性。

# scala - 如何在不创建另一个 val 的情况下使用 scala 初始化不可变 val

> ID：10527994
> 
> 赞同：0
> 
> 时间：2012-05-10T05:27:45.807
> 
> 标签：scala

我有以下代码：

```
private def formatQuery(q:String = ""):String = {
  val q2 = if (q=="") "*" else "'%s'".format(q)
  [...] 
```

我只是想知道是否有一些惯用的方法来避免声明 q2 值

有点像

```
private def formatQuery(
  q:String = if (q=="") "*" else "'%s'".format(q)
):String = {
  [...] 
```

这显然行不通

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:57:08.223

您是否有特殊原因试图避免分配给变量`q2`？风格本身似乎很好。

你提出的显然行不通，但这里有两个可行的建议。

如果您的原始功能是：

```
private def formatQuery(q:String = ""):String = {
  val q2 = if (q=="") "*" else "'%s'".format(q)
  doSomething(q2)
} 
```

一种选择是只在您要传递的地方传递 if-else 表达式`q2`：

```
private def formatQuery(q:String = ""):String =
  doSomething(if (q=="") "*" else "'%s'".format(q)) 
```

另一种是做一个单独的功能：

```
private def formatQuery(q:String = ""):String =
  runQuery(if (q=="") "*" else "'%s'".format(q))

private def runQuery(q2:String):String =
  doSomething(q2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:20:31.897

第三种方式是模式匹配。

```
private def formatQuery(q: String = ""): String = q match {
  case _ if q.length == 0 => "*"
  case _ => "'%s'".format(q)
} 
```

我更喜欢你做的方式，首先是因为它的风格很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T06:53:23.093

Maybe there is a misunderstanding: The *val* inside of the method body is not a field of the enclosing class or trait or ..., but it is just a local variable. So the keyword *val* is used for creating fields **and** for creating local variables.

# ruby - 方法应该以 结尾吗？（问号）只返回一个布尔值？

> ID：10527997
> 
> 赞同：39
> 
> 时间：2012-05-10T05:28:34.603
> 
> 标签：ruby

我认为这样做只是常识和 Ruby 约定，但我有这种方法：

```
def is_subscribed?(feed_url)
  Subscription.find_by_user_id_and_feed_id(self[ :id ], Feed.find_by_feed_url(feed_url))
end 
```

我得到的唯一困惑是，这不会像我最初预期的那样返回布尔值，方法是将问号放在方法名称的末尾。我的印象是，当评估一个有条件的对象时，它会返回`true`if not `nil`。

显然我在这里忽略了这一点，它没有像我想的那样评估它。

所以，我的问题是，最好只做一个`if (condition) true else false`？还是有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-10T05:30:53.263

以 ? 结尾的方法 应该返回一个可以评估为真或假的值。如果要确保返回布尔值，可以通过在查找器中添加双键来实现。

```
def is_subscribed?(feed_url)
  !!Subscription.find_by_user_id_and_feed_id(self[ :id ], Feed.find_by_feed_url(feed_url))
end 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-10T05:46:14.017

在方法名称的末尾添加 a`?`不会以任何方式改变方法的返回值，而只是表明它是一个*谓词方法*。也就是说，方法的返回值应该被视为布尔值，但不需要是严格的布尔值（即`true`或`false`）。

许多其他答案表明它应该返回一个真值或假值。这是相当多余的，因为*一切都*可以是真或假，而且由于 Ruby 中的所有方法都返回一些东西（除非它们引发异常），所以返回值*总是*真或假。

将 a 附加为其他语言中附加`?`的更好的替代方案；`is_`例如，我要么有`subscribed?`要么`is_subscribed`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T05:31:06.147

它应该是一个 'truthy' 或 'falsy' 值，可以在谓词中安全使用，但不必返回文字`true`或`false`. [`File.size?`](http://ruby-doc.org/core-1.9.3/File.html#method-c-size-3F)标准库中甚至还有这样的方法，例如。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T05:31:22.413

实际上，具体来说——以问号结尾的方法应该返回可以被测试为`true`or的值`false`。

rails 中有很多方法可以从 '?' 返回非布尔值。方法。

事实上，最近有一个 pull request 提交给 rails 项目，它把注意力集中在这个确切的问题上：

[https://github.com/rails/rails/pull/5582](https://github.com/rails/rails/pull/5582)

基本上，讨论是围绕这个确切的问题进行的——方法只需要返回可以测试为真或假的值，如下所示：

```
if (condition)
  # do 'truthy option
else
  # do non-truthy option
end 
```

从这个角度来看，我相信你的方法很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-06T15:30:14.120

其他答案很好地涵盖了返回值。

我将补充一点，现代风格指南不鼓励`is_`布尔方法的前缀。尾随的问号涵盖了该语义糖。

来自[https://github.com/rubocop-hq/ruby-style-guide](https://github.com/rubocop-hq/ruby-style-guide)：

> 布尔方法问号
> 
> 谓词方法（返回布尔值的方法）的名称应以问号结尾（即 Array#empty？）。不返回布尔值的方法不应以问号结尾。
> 
> 布尔方法前缀
> 
> 避免在谓词方法前加上 is、does 或 can 等助动词。这些话是多余的，不符合Ruby核心库中布尔方法的风格，比如empty? 并包括？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-23T01:08:22.530

另一种选择是使用三元/条件运算符来强制布尔返回。

```
 if_this_is_a_true_value ? then_the_result_is_this : else_it_is_this 
```

我同意其他人将您的方法名称更改为

```
 def subscribed? 
```

# sql - SQL Select-IN 查询

> ID：10527999
> 
> 赞同：0
> 
> 时间：2012-05-10T05:28:56.727
> 
> 标签：sql

我的表中有一个数字列`id`。我想选择在 1,2,3 中具有 id 的查询和在其中具有“null”的查询。

我不想使用如下查询：

```
SELECT * FROM MYTABLE WHERE ID IN (1,2,3) OR ID IS NULL 
```

我可以使用类似的东西：

```
SELECT * FROM MYTABLE WHERE ID IN (1,2,3,null) 
```

这可能吗？上面的查询返回的结果与

```
SELECT * FROM MYTABLE WHERE ID IN (1,2,3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:30:53.387

简短的回答？不，您必须使用`IS NULL`谓词。NULL != NULL（两个 NULL 值不一定相等），所以任何类型的`equals NULL`,`in (..., NULL)`都不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:31:09.923

如果您使用 oracle，这可能是解决方案。

```
SELECT * FROM MYTABLE WHERE NVL(ID,-1) IN (1,2,3,-1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:31:05.990

您必须使用：

```
SELECT * FROM MYTABLE WHERE ID IN (1,2,3) OR ID IS NULL 
```

NULL 总是需要对 IS NULL 进行特殊处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:31:16.417

在 sql 服务器中

```
SELECT * FROM MYTABLE WHERE isnull(ID,0) IN (1,2,3,0) 
```