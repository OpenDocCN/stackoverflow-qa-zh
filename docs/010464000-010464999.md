# StackOverflow 问答 10464000-10464999

# asp.net-mvc - 如何在 ActionLink 中使用/传递隐藏字段值

> ID：10464003
> 
> 赞同：2
> 
> 时间：2012-05-05T16:56:34.130
> 
> 标签：asp.net-mvc, parameter-passing, hidden-field, html.actionlink

我在 actionlink 参数中传递隐藏字段值时遇到问题：

# 产品视图：

```
@Html.ActionLink("ProductCompare", 
                 "ProductCompare", 
                 new { ProductIds= **hdnSelectedProductId**)
@Html.Hidden("hdnSelectedProductId") 
```

# 控制器动作：

```
public ActionResult ProductCompare(string ProductIds)
{
    return View();
} 
```

当用户选择任何产品时，我会使用 javascript 将产品 ID 放入 hdnSelectedProductId 中。现在，当用户单击 ProductCompare 链接时，我想将此隐藏字段值传递给控制器​​。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:59:01.290

一种解决方案是使用 jQuery 附加一个单击事件，该事件将读取隐藏字段并将其附加到链接的 href 属性。

另一种解决方案是将值存储在 ViewData 中（如果您知道它将是什么）并使用它而不是隐藏字段值。

# php - 带有个人资料照片的 Twitter 提要

> ID：10464006
> 
> 赞同：2
> 
> 时间：2012-05-05T16:57:18.570
> 
> 标签：php, api, twitter

大家好，我需要一点帮助。由于我在 PHP 方面不是很好，我无法将两个单独工作的函数结合起来。我发现这个现成的脚本可以在我的页面上显示多个 Twitter 提要。

```
<?php

// Pull from which accounts? Separated by a space, for example: Username Username Username 
$usernames = "Username Username Username"; 
// Number of tweets to pull in, total. 
$limit = "5"; 
// Show username? 0 = No, 1 = Yes. 
$show = 1;

// REMEBER: When using HTML, escape double-quotations like this: \"

// This comes before the entire block of tweets. 
$prefix = ""; 
// This comes before each tweet on the feed. 
$prefix_sub = ""; 
// This comes after the username but before the tweet content. 
$wedge = ""; 
// This comes after each tweet on the feed. 
$suffix_sub = ""; 
// This comes after the entire block of tweets. 
$suffix = "";

// It is recommended that you do not modify below this point without PHP knowledge.

function parse_feed($usernames, $limit, $show, $prefix_sub, $wedge, $suffix_sub) {

$usernames = str_replace(" ", "+OR+from%3A", $usernames); 
$feed = "http://search.twitter.com/search.atom?q=from%3A" . $usernames . "&rpp=" . $limit; 
$feed = file_get_contents($feed); 
$feed = str_replace("&", "&", $feed); 
$feed = str_replace("<", "<", $feed); 
$feed = str_replace(">", ">", $feed); 
$clean = explode("<entry>", $feed); 
$amount = count($clean) - 1;

for ($i = 1; $i <= $amount; $i++) {

$entry_close = explode("</entry>", $clean[$i]); 
$clean_content_1 = explode("<content type=\"html\">", $entry_close[0]); 
$clean_content = explode("</content>", $clean_content_1[1]); 
$clean_name_2 = explode("<name>", $entry_close[0]); 
$clean_name_1 = explode("(", $clean_name_2[1]); 
$clean_name = explode(")</name>", $clean_name_1[1]); 
$clean_uri_1 = explode("<uri>", $entry_close[0]); 
$clean_uri = explode("</uri>", $clean_uri_1[1]);

echo $prefix_sub; 
if ($show == 1) { echo "<a href=\"" . $clean_uri[0] . "\">" . $clean_name[0] . "</a>" . $wedge; } 
echo $clean_content[0]; 
echo $suffix_sub;

}

}

echo $prefix; 
parse_feed($usernames, $limit, $show, $prefix_sub, $wedge, $suffix_sub); 
echo $suffix;

// WRITTEN BY RYAN BARR (SPOOKY)! SPOOKYISMY.NAME

?> 
```

为了添加个人资料照片，我创建了自己的功能，非常简单：

```
<?php

function display_photo($username, $size='') 
{
    $image_code = 'http://api.twitter.com/1/users/profile_image/'. $username;
    return $image_code;

}
<? 
```

但是，我无法将这两个功能结合起来，以便将用户名和 Twitter 提要放在一起：/你能帮帮我吗？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:38:13.957

要在第一个功能中获取个人资料图片：

行之间：`$clean_uri = explode("</uri>", $clean_uri_1[1]);`并`echo $prefix_sub;` 输入以下代码：

```
$profile_image_url_1 = explode('<link type="image/png" href="', $entry_close[0]); 
$profile_image_url = explode('" rel="image"/>', $profile_image_url_1[1]);
$profile_image_url = $profile_image_url[0];

echo $profile_image_url; 
```

# c - OpenGL - GLUT - 显示不同的弹出菜单

> ID：10464012
> 
> 赞同：1
> 
> 时间：2012-05-05T16:57:43.263
> 
> 标签：c, opengl, glut

在我的项目中，我想根据用户按下鼠标右键的位置显示两个不同的菜单。我实施了拣货。这里没有问题。

我想在用户右键单击一个对象时显示一个菜单，而当右键单击与任何对象都不匹配时显示一个不同的菜单（屏幕中的空白区域）。

GLUT可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:25:38.853

如果您的应用程序变得足够复杂以至于*需*要这样做，那么您需要停止使用 GLUT。你只是超出了它的能力。

GLUT 适用于简单的应用程序。您的需求越复杂和具体，它的帮助就越小。

* * *

最终，如果您正在编写一个恰好使用 OpenGL 的 GUI 应用程序（也就是说，您需要菜单等，而不是简单地创建一个 OpenGL 窗口），那么您的选择实际上归结为两件事之一。您可以直接对特定于平台的窗口系统进行编码。或者，您可以使用平台中立的 GUI 系统来创建 OpenGL 窗口。

[wxWidgets](http://www.wxwidgets.org/)、[Qt](http://qt.nokia.com/include/archive/qt/index.html)和[FLTK](http://www.fltk.org/)都是合法的替代品。这些似乎只是一个菜单的重量级，但如果你想要平台中立的 GUI 开发，这就是你必须做的。

# html - 移动网站 101

> ID：10464014
> 
> 赞同：-1
> 
> 时间：2012-05-05T16:57:44.240
> 
> 标签：html, css, mobile

即将创建我的第一个移动网站，我不知道从哪里开始。这是一个简单的 html/css 网站，所以我希望我能够快速组合起来。

如何根据访问者是否是移动设备来告诉浏览器使用哪个样式表？

我习惯于使用我的文本编辑器和 firebug 来构建基本站点。我还需要其他工具吗？

我将利用我的直觉创建一个大小可变的移动站点，尽管可能具有固定的字体大小。

有没有人可以按照我的方式提供指南或一些指示？有什么我需要特别注意的吗？清单？我试图让它尽可能简单。

什么是移动网站 ABC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:23:27.600

您可以使用@media-queries 构建站点，这样您就可以根据屏幕尺寸等定位不同的设备。您可以查看[http://mediaqueri.es](http://mediaqueri.es)，例如使用@media-queries 的站点。我发现一个很好的测试站点是[http://www.responsinator.com/](http://www.responsinator.com/)，因为您仍然可以在 Chrome、Safari 或 Firefox 中使用开发人员工具。

如果你决定走这条路，还可以看看 Ethan Marcotte 的书 Responsive Web Design [http://www.abookapart.com/products/responsive-web-design 。](http://www.abookapart.com/products/responsive-web-design)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:38:32.037

在理想情况下，您可以通过定义“手持”媒体样式表来告诉移动浏览器使用移动样式表，如下所示：

```
<link rel="stylesheet" href="handheld.css" media="handheld"/> 
```

不幸的是，这不适用于许多移动浏览器。为什么？提供配备浏览器的手机的手机供应商不希望被视为提供“贫民区”的移动互联网——只有桌面内容就足够了。这意味着大多数制造商构建浏览器时故意忽略媒体类型。

相反，您必须根据用户代理嗅探来提供样式表（或使用移动 UA 字符串将用户重定向到移动子域）。您必须在服务器级别执行此操作。

至于构建和调试——那里有移动模拟器，但它们的行为是不完整的，而且那里有很多设备。您可能不得不满足于仅测试少数常见平台并尝试围绕最低公分母进行设计。这意味着假设设备可能不够智能，无法下载不相关 CSS 中指定的图像（所以不要尝试使用 CSS 媒体查询来限制大图像），或者设备可能不执行 javascript（大多数设备的 JS 处理能力很差） .

哦，还有一件事：如果您要使用 javascript，请尝试将您的方法包装在伪命名空间中。许多移动提供商拦截 Web 请求并插入自己的 JS 来替换需要大量带宽的图像和其他元素。通常，这些方法使用诸如“main”之类的通用名称，并且由于 Javascript 缺少命名空间而与作者定义的方法发生冲突。

除此之外，看看这篇文章（http://www.smashingmagazine.com/2010/11/03/how-to-build-a-mobile-website/），祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T20:32:13.950

您可以使用元标记 [code] viewport [/code] 根据屏幕宽度更改 CSS 表。

# python - python中的Google Web应用程序错误

> ID：10464017
> 
> 赞同：1
> 
> 时间：2012-05-05T16:57:56.987
> 
> 标签：python, google-app-engine, app-launcher

我刚刚为 Google App Engines 创建了我的第一个应用程序。我已将 .py 和 .yml 文件保存在 C 盘的文件夹中。我已经安装了 python 2.5 以及 Google 应用程序启动器，其中我将 python 路径设置为“C:\Python25\pythonw.exe”。当我打开启动器时，单击添加现有应用程序并选择包含 .py 和 .yml 文件的特定文件夹，然后运行应用程序，我收到以下错误 - “无法运行项目。请在您的首选项中确认这些值，或者采取适当的措施来修复它（例如安装 Python）”

我已经安装了 python 2.7.3，但它也不起作用。如果有人帮助我，我将不胜感激，我是编程世界的新手。

# gallery - 如何制作像 facebook 这样强大的图片库

> ID：10464019
> 
> 赞同：3
> 
> 时间：2012-05-05T16:58:17.583
> 
> 标签：gallery, image-gallery, photo-gallery, concept, imagedownload

我正在尝试制作一个像 facebook 这样的图片库，这让我很困扰，如果一个画廊中有数百张图片，我怎样才能使图像查看器像 facebook 一样健壮，我怎样才能提高画廊的性能。

> facebook有什么神奇的方法来加强它的图片库吗

需要一些好的文章和社区指导，这背后的实际概念是什么，或者是否有任何非常高的图像压缩算法可以减少图像字节。

感谢大家宝贵的时间

# process - CPU使用率_性能慢

> ID：10464020
> 
> 赞同：0
> 
> 时间：2012-05-05T16:58:18.583
> 
> 标签：process

我的 Vaio 笔记本电脑最近变得很慢。在任务管理器中，所有进程都将 CPU 使用率显示为 1% 或 0%，但在性能方面，CPU 使用率约为 30%。可能是什么问题呢？莫非是有隐藏病毒在运行？有什么方法可以检查吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:02:58.297

真的可以有很多东西。首先检查您的内存使用情况。如果那相当高，请结束一些未使用的进程以释放一些内存。它也可能是一种病毒。我个人喜欢 AVG Free 或 spybot S&D 如果你也知道你使用的系统上哪些进程是正常的，你可以通过将奇怪的进程名称写入谷歌来找到病毒进程。谷歌上总是有很多关于他们的信息。必须爱它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T00:12:43.143

**我认为您可以通过打开Windows 任务管理器**更好地了解您的问题：

*   右键单击任务栏，然后单击**启动任务管理器**。

*   转到进程选项卡并按内存使用量排序，以查看哪个 CPU 和内存使用量最多。

您可以杀死一些**不必要的**进程，看看它是否解决了问题。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:01:50.790

许多间谍软件和不需要的进程可能会这样做。获取[cCleaner](http://ccleaner.en.softonic.com/)并检查所有正在运行的进程，使用 CTRL+TAB+ESC ，您可以安全地停用许多无害的猪（蓝牙、Skype、AIM 等）。Avast、Malwarebytes、AVG 也都不错。

# glsl - GLSL 可重用/共享函数、共享常量（OpenGL ES 2.0）？

> ID：10464022
> 
> 赞同：10
> 
> 时间：2012-05-05T16:58:41.847
> 
> 标签：glsl, opengl-es-2.0, fragment-shader

*短的：*

我可以定义一个每个着色器都可以使用的函数吗？或者我必须为每个着色器定义它？

* * *

*整个故事：*

*   我想创建许多着色器，旨在使用预定义的渐变渐变为输入片段着色（类似这样的东西 - [http://www.thinkboxsoftware.com/storage/krakatoa-support-images/krakatoa15_kcm_densitybyage_gradientrampmap.png](http://www.thinkboxsoftware.com/storage/krakatoa-support-images/krakatoa15_kcm_densitybyage_gradientrampmap.png)）。

*   我想**为每个着色器定义一个渐变斜坡常数**（一个vec4颜色样本数组，其中alpha值保存渐变位置，参见上图中的Pos）

*   我需要**一个函数**，它可以从给定的渐变渐变中返回一个颜色样本，用于特定的纹理坐标位置。

因此，斜坡需要为**每个着色器定义一次**，并且应该一次性**定义*所有***着色器可以安全使用的函数。

我有算法，问题是**共享函数，并在 GLSL 中定义常量。**

这可能吗？或者我必须将函数复制到每个着色器中？至少有一些预编译选项吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-05T19:57:02.563

您可以像在 C 中一样执行此操作 - 您在头文件中声明函数并在通用 C 文件中定义它。

在 GLSL 中，您需要执行以下操作：

1.  在某些着色器（字符串）中定义函数（让我们称之为 COMMON）：

    ```
    float getCommonValue() { return 42; } 
    ```

2.  在所有要使用此函数的着色器中，您只需声明并使用它（我们称之为 SHADER1）：

    ```
    float getCommonValue();
    void main() { gl_Color = vec4(getCommonValue(), 0, 0, 0); } 
    ```

3.  与`glCompileShader`您一起编译着色器时，只编译一次 COMMON 着色器并将着色器 GLuint 存储在某处

4.  当您将程序与`glLinkProgram`SHADER1 链接时，您将附加到带有`glAttachShader`两个着色器的程序 - COMMON 和 SHADER1。因此，您将能够`getCommonValue`从一个着色器调用函数到另一个着色器。

5.  您可以为不同的 sahder 程序（SHADER1、SHADER2、...）多次重复使用 COMMON 着色器 GLuint 值。

# asp.net - 我想连接asp.net和flash

> ID：10464024
> 
> 赞同：0
> 
> 时间：2012-05-05T16:59:19.297
> 
> 标签：asp.net, actionscript-3, flash

我想将参数发送到 asp.net 并在 flash 中获取操作结果作为答案。我正在用 Flash 编写游戏，我需要它来制作多人在线游戏。我可以从哪里开始，请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:30:57.610

以下代码可用于此类连接。

```
 var request:URLRequest = new URLRequest("<server side page, php or asp.net>");

    var variables:URLVariables = new URLVariables();

    variables.var1 = myvar ;

    request.data = variables;

    request.method = URLRequestMethod.POST;

    var urlLoader:URLLoader = new URLLoader();

    urlLoader.addEventListener(Event.COMPLETE, onDataLoad)

    urlLoader.load(request);

}

function onDataLoad(evt:Event) 
{
   trace ("done");
} 
```

# java - 为什么 Collection 不扩展 Cloneable 和 Serializable？

> ID：10464026
> 
> 赞同：9
> 
> 时间：2012-05-05T16:59:23.147
> 
> 标签：java, collections

在Java库中，`Collection`接口不扩展`Cloneable`和`Serializable`接口的原因是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-05T17:06:57.187

`Collection`是一个接口，它指定一组称为*元素*的对象。如何维护元素组的细节取决于`Collection`. 例如，一些`Collection`实现`List`允许重复元素，而其他实现`Set`则不允许。许多`Collection`实现都有一个公共`clone`方法。但是，将它包含在`Collection`. 这是因为`Collection`是一种抽象表示。重要的是执行。*在处理实际*情况时，克隆或序列化的语义和含义会发挥作用*执行; 也就是说，具体的实现应该决定它应该如何被克隆或序列化，或者即使*它*可以被克隆或序列化。在某些情况下，根据实际的支持实现是什么，克隆和序列化可能没有多大意义。*因此，在所有*实现中强制克隆和序列化实际上不太灵活且限制性更强。具体的实现应该决定它是否可以被克隆或序列化。*

 *以下是 Oracle 文档中的[解释](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/designfaq.html#5)：

> 许多 Collection 实现（包括 JDK 提供的所有实现）都会有一个公共的 clone 方法，但是要求所有 Collections 都需要它是错误的。例如，克隆由 TB 级 SQL 数据库支持的 Collection 意味着什么？方法调用是否应该导致公司申请一个新的磁盘场？类似的论点也适用于可序列化。
> 
> 如果客户端不知道 Collection 的实际类型，让客户端决定所需的 Collection 类型，创建一个该类型的空 Collection，并使用 addAll 方法复制将原始集合的元素放入新的集合中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T17:06:17.957

因为如果是这样，那将要求所有`Collection`实现都是`Cloneable`and `Serializable`，这比需要的限制更大。*实现*通常也实现这些接口，但接口并不`Collection`需要它。*

# php - CodeIgniter 活动最佳实践

> ID：10464028
> 
> 赞同：1
> 
> 时间：2012-05-05T16:59:23.770
> 
> 标签：php, codeigniter

我有一个我认为很简单的问题，但我很难找出最好的策略是什么，我希望你能提供帮助。

我正在使用 CodeIgniter 构建我的新网站（目前处于开发阶段），用户可以在其中创建、编辑和删除活动。每个广告系列都有一个子广告系列，您还可以编辑、删除和创建每个子广告系列。

在添加活动视图中，我如何（以伪代码）标记表单（或会话，以便将用户创建的子活动分配给正确的活动。我目前的想法是要么

(1) 在 url 中使用活动的 id 并拉取正确的段。例如 [http://www.website.com/campaign/](http://www.website.com/campaign/) **12345** /add-sub-campaign

或者

(2) 在表单元素中，将广告系列的名称放在隐藏的输入字段中，然后通过帖子抓取它并使用它将新的子广告系列链接到广告系列。

感谢您对这个乏味问题的帮助！我宁愿第一次以正确的方式做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T17:03:39.943

您可以使用 URL 架构，例如`example.com/campaigns/add/234`

这里 234 是父广告系列 ID

在您的`Campaign`控制器中

```
public function add($parent_id = ''){ //......} 
```

这也使您免于在表单中使用隐藏字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:07:23.783

我认为您应该使用隐藏的表单输入，例如您正在分配的活动的 ID。

如果您使用 url 段，则可能会产生这样的问题，即段的 id 由用户更改，并且活动被分配给完全不同的段。（用户更改`website.com/campaign/12345/add-sub-campaign`为`website.com/campaign/54321/add-sub-campaign`）另外，网址分段可以让您更多地了解用户在做什么。来自 url 段的 id 是否有效等。

# jquery - jQuery滑块不适用于网站

> ID：10464037
> 
> 赞同：3
> 
> 时间：2012-05-05T16:59:56.797
> 
> 标签：jquery, html, wordpress, css

我正在尝试在我的网站中实现一个 jQuery 滑块来制作一个项目页面。我已经实现了 jQuery 和代码，但不知何故它不起作用。但是，当我使用 Google Chrome 查看“检查元素”并使用箭头键移动滑块时，它会显示每次按下时移动的数字。这意味着滑块正在工作，但同时它不移动图像。

[http://www.dig.ital.me/projects/](http://www.dig.ital.me/projects/)

可能是因为我使用的是 Wordpress 吗？

```
<ul style="width: 3680px; left: -920px; "><li class="cloned"><img src="http://dig.ital.me/img/cdnbox/2012/05/test.png" alt="" title="work_page_timeline" width="920" height="384"></li>
                <li class="active"><img src="http://dig.ital.me/img/cdnbox/2012/03/work_page_timeline.jpg" alt="" title="work_page_timeline" width="920" height="384"></li>
                <li class=""><img src="http://dig.ital.me/img/cdnbox/2012/05/test.png" alt="" title="work_page_timeline" width="920" height="384"></li>
            <li class="cloned"><img src="http://dig.ital.me/img/cdnbox/2012/03/work_page_timeline.jpg" alt="" title="work_page_timeline" width="920" height="384"></li></ul> 
```

这是来自检查元素的代码，它向我展示了它的 -left 920px，当按下向左或向右箭头键时，它会移动。但是由于某些奇怪的原因，图像没有移动，我似乎无法弄清楚为什么。

这里还有一些源代码。

```
 <!-- START HERE FOR PORTFOLIO & DISPLAY WORK -->
    <div id="slider">
            <ul>
                <li><img src="http://dig.ital.me/img/cdnbox/2012/03/work_page_timeline.jpg" alt="" title="work_page_timeline" width="920" height="384" /></li>
                <li><img src="http://dig.ital.me/img/cdnbox/2012/05/test.png" alt="" title="work_page_timeline" width="920" height="384" /></li>
            </ul>

    </div>
    <!-- END PORTFOLIO -->

    <script src="http://www.dig.ital.me/wp-content/themes/mytheme/Scripts/unslider.js"></script>
    <script type="text/javascript">

        $(function() {
            //  Wow, that's it?
            $('#slider').unslider();
        });

    </script> 
```

我正在使用这个滑块[http://unslider.com/](http://unslider.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:35:32.973

看起来您需要在 unslider.css 中对几个 CSS 问题进行排序：

*   在 .unslider ul 中添加：

    显示：列表项；左填充：0；

*   在 .unslider li 中添加：

    左填充：0；

刚刚尝试在这里通过 Chrome 开发工具对其进行编辑，它似乎已经成功了 :)

# javascript - 用 JavaScript 模拟浏览器缩放

> ID：10464038
> 
> 赞同：25
> 
> 时间：2012-05-05T17:00:29.980
> 
> 标签：javascript, zooming

如何使用 JavaScript 缩小整个文档？

我的目标是模仿内置的浏览器缩放，将整个文档缩放到 90%。

我试过使用

```
document.body.zoom 
```

这仅适用`explorer`于页面变得混乱（很多元素正在移动）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-05T17:04:47.903

[你去：](http://www.perlunity.de/javascript/scripts/javascript_0314_main.shtml)

利用：

```
document.body.style.zoom=1.0;this.blur(); 
```

1.0 表示 100%

150% 将是 1.5 1000% 将是 10.0

this.blur() 意味着光标，也许你选择了一个输入字段，失去了每个选择项的焦点。

或者：

您可以使用 css3 元素[缩放](http://www.css3.com/css-zoom/)（[Source](https://stackoverflow.com/questions/1647237/can-i-zoom-into-a-web-page-like-ie-or-firefox-do-using-programming)）

[Firefox 不允许](http://www.mozilla.org/projects/security/components/signed-scripts.html)使用浏览器进行缩放，因为您无法通过 javascript 或 sth 访问用户属性。

因此，您可以只使用一些允许缩放（CSS3：缩放，如上所述）或增加文本大小的 CSS 样式！例如，您可以通过包含不同的 CSS 文件来做到这一点。但是在这里你有“跳跃”的问题，因为样式化的 css 元素（浮动等）必须“交互”，实际上它们的属性不同。

我在上面发布的缩放在 Chrome 和 IE8+ 中运行良好（如上所述不支持 FF）

- 附加信息：

[这](http://msdn.microsoft.com/en-us/library/ms531189.aspx)是一个关于如何使用缩放选项精确缩放的示例。示例应用程序可以在[这里找到](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/zoom.htm)

缩放选项通常会像浏览器一样处理缩放！

但这仍然是 Firefox 或 Safari 和 Opera 不支持的东西？在 chrome 和 IE 中它可以工作！

另一种解决方案是：将您的主要尺寸放在“em”中，然后通过设置尺寸（如 100%、110%（在整个 css 中））来解决问题。所以你可能有不同的 CSS 文件，并且“只是”需要替换 % 属性！

但是我认为可能没有其他解决方案！:(

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-11T15:36:55.280

这是我使用 CSS 转换的解决方案：scale() 和 JavaScript / jQuery：

```
jQuery(document).ready(function($) {
    // Set initial zoom level
    var zoom_level = 100;

    // Click events
    $('#zoom_in').click(function() {
        zoom_page(10, $(this))
    });
    $('#zoom_out').click(function() {
        zoom_page(-10, $(this))
    });
    $('#zoom_reset').click(function() {
        zoom_page(0, $(this))
    });

    // Zoom function
    function zoom_page(step, trigger) {
        // Zoom just to steps in or out
        if (zoom_level >= 120 && step > 0 || zoom_level <= 80 && step < 0) return;

        // Set / reset zoom
        if (step == 0) zoom_level = 100;
        else zoom_level = zoom_level + step;

        // Set page zoom via CSS
        $('body').css({
            transform: 'scale(' + (zoom_level / 100) + ')', // set zoom
            transformOrigin: '50% 0' // set transform scale base
        });

        // Adjust page to zoom width
        if (zoom_level > 100) $('body').css({
            width: (zoom_level * 1.2) + '%'
        });
        else $('body').css({
            width: '100%'
        });

        // Activate / deaktivate trigger (use CSS to make them look different)
        if (zoom_level >= 120 || zoom_level <= 80) trigger.addClass('disabled');
        else trigger.parents('ul').find('.disabled').removeClass('disabled');
        if (zoom_level != 100) $('#zoom_reset').removeClass('disabled');
        else $('#zoom_reset').addClass('disabled');
    }
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Trigger -->
<ul id="zoom_triggers">
    <li><a id="zoom_in">zoom in</a></li>
    <li><a id="zoom_out">zoom out</a></li>
    <li><a id="zoom_reset">reset zoom</a></li>
</ul>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-19T16:24:48.627

尝试使用`transform: scale()`. [Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/scale)

```
.className {
    transform: scale(0.9)
} 
```

您可以使用 Javascript 更改比例量。

```
let scaleAmount = 1 - 0.1
document.body.style.transform = `scale(${scaleAmount})` 
```

`scale()`减少或增加元素的宽度和高度。如果您希望宽度保持原始大小，而所有内部元素都会缩放，则算法如下所示：

```
let scaleAmount = 1 - 0.1
document.body.style.transform = `scale(${scaleAmount})`
document.body.style.width = `${100 * (1 / scaleAmount)}%`
document.body.style['transform-origin'] = `0 0` 
```

如果您使用像 React 这样的 UI 框架，则可以将状态中存在的 scaleAmount 传递给内联 CSS。

```
<header className="App-header" style ={{
    transform: `scale(${scaleState})`,
    transformOrigin: '0 0',
    width: `${100 * (1 / scaleState)}%`
}}> 
```

[React 中的示例](https://github.com/edsonayllon/dynamic-app-zoom-resize)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T01:17:37.220

我是用 jquery 做的，适用于 Firefox、Safari、Chrome 和 IE9+：

```
window.onload = function() {
  var currFFZoom = 1;
  var currIEZoom = 100;

  $('#In').on('click', function() {
    if (navigator.userAgent.indexOf('Firefox') != -1 && parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf('Firefox') + 8)) >= 3.6) { //Firefox
      var step = 0.02;
      currFFZoom += step;
      $('body').css('MozTransform', 'scale(' + currFFZoom + ')');
    } else {
      var step = 2;
      currIEZoom += step;
      $('body').css('zoom', ' ' + currIEZoom + '%');
    }
  });

  $('#Out').on('click', function() {
    if (navigator.userAgent.indexOf('Firefox') != -1 && parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf('Firefox') + 8)) >= 3.6) { //Firefox
      var step = 0.02;
      currFFZoom -= step;
      $('body').css('MozTransform', 'scale(' + currFFZoom + ')');

    } else {
      var step = 2;
      currIEZoom -= step;
      $('body').css('zoom', ' ' + currIEZoom + '%');
    }
  });
};
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<input type="button" id="Out" value="Zoom Out"/>
<input type="button" id="In" value="Zoom In"/>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-05T17:38:38.160

您可以执行以下操作：

```
document.body.style.zoom = "120%" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-13T18:24:55.340

您必须为顶级元素 (html) 设置样式中的缩放属性。现在有趣的部分是如何计算它。这就是我所做的。您可以将此代码放在 window.onresize 函数中以使整个页面自动缩放。

```
window.onresize = function(){
    let zoom = Number((window.innerWidth / window.screen.width).toFixed(3));
    document.firstElementChild.style.zoom = zoom;
  } 
```

这将计算当前窗口宽度与实际设备宽度的比率。

然后将该值设置为顶级 html 元素缩放属性。可以使用访问顶级 html 元素`document.firstElementChild`

将主包装 div 的高度设置为 100% 以防止缩放时出现空白。

# git - Git：从远程存储库自动获取？

> ID：10464039
> 
> 赞同：16
> 
> 时间：2012-05-05T17:00:46.383
> 
> 标签：git, git-merge, git-status

我发现关于使用命令行 Git 的一件恼人的事情是必须手动将我的存储库与远程存储库同步。我经常被诸如“git status”之类的命令绊倒，我（错误地）希望报告我的工作目录和 GitHub 上的存储库之间的差异。（当然它报告了我的工作目录和我的本地存储库之间的差异......）

有什么方法可以自动/隐式获取，以便遥控器始终是最新的？我很乐意为 git status、git merge 等命令支付几秒钟的罚款。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T17:23:56.740

其中一个命令已经内置。

```
git pull 
```

进行提取和合并。

对于另一个，好吧....定义您自己的命令，例如

```
alias gitfu='git fetch; git status' 
```

外壳由您指挥。

根据您的配置，可能会要求您提供每个密码短语或凭据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T09:46:42.263

如果您更喜欢使用像[SourceTree](http://www.sourcetreeapp.com/)这样的 GUI ，则有一个首选项选项可以每 X 分钟检查一次默认遥控器。

您还可以在 [alias] 下的全局 .gitconfig 文件中设置全局别名。如`git fetch --all && git status`（add `-s`for short status）。或者可能`git stash && git pull && git stash apply && git status`等，如果您目前有更改。但要注意合并冲突。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-12T07:14:00.260

在中`zsh`，有[一个`git-auto-fetch`插件](https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/git-auto-fetch)

> 当您在 git-initialized 目录中工作时，自动从所有远程获取所有更改。

只需添加到您的`plugins`in `.zshrc`。

# java - JFilechooser“查看”下拉菜单不出现在框架 GlassPane 上

> ID：10464041
> 
> 赞同：0
> 
> 时间：2012-05-05T17:01:17.030
> 
> 标签：java, swing, drop-down-menu, jfilechooser, glasspane

因此，我的 Swing 应用程序中的 JFilechooser 遇到了一些问题，而我的故障排除并没有让我得到任何结果。

我已经能够将文件选择器嵌入到我的应用程序内的面板中。

问题是没有启用在 Windows 上选择其他目录和位置的下拉按钮，“文件类型”下拉菜单也是如此。

![单击任一下拉按钮均无济于事](../Images/14a597d019bb68657e527f7f4dc17ced.png)

谢谢你们的时间！

编辑 1：所以我做了额外的测试，似乎在 JFrame GlassPane 上放置文件选择器会导致 Drop down 不出现，可能是因为它在 glassPane 或 Filebrowser 的“后面”......不确定如何解决这个问题尽管如此，希望这有助于缩小解决方案的范围。

Edit2：这是一些重现该错误的 UI 代码：

```
 public void gui(){

    JFrame frame = new JFrame("Test");

    frame.setSize(800, 800);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);

    //Containment Panel
    RightBottomCenter = new JPanel();

     //Setup Glass Pane
    JPanel glass = (JPanel) frame.getGlassPane();
    glass.setVisible(true);

    //Config Filechooser
    fc = new JFileChooser();
    fc.setDragEnabled(false);
    fc.setDialogType(JFileChooser.OPEN_DIALOG);
    fc.setMultiSelectionEnabled(false);
    fc.setAcceptAllFileFilterUsed(false);
    fc.setApproveButtonText("Select");
    fc.setPreferredSize(new Dimension(frame.getWidth(), frame.getHeight() - 100));

    RightBottomCenter.add(fc);
    glass.add(RightBottomCenter);
    frame.setVisible(true);

} 
```

还在琢磨，但还没有找到好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:40:43.943

[*Glass Pane*](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)教程包括一个`GlassPaneDemo`展示如何将*鼠标事件转发*到底层组件的教程。您也许可以调整[那里](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/GlassPaneDemoProject/src/components/GlassPaneDemo.java)显示的方法。

# android - 将天气叠加层添加到谷歌地图活动的最佳方法是什么？

> ID：10464044
> 
> 赞同：0
> 
> 时间：2012-05-05T17:01:31.213
> 
> 标签：android, overlay, weather, weather-api

我所拥有的：我正在开发一个 android 应用程序，并且我有一个谷歌地图活动，它将拉出用户当前的位置。

我想要什么：使用叠加层显示该位置的当地天气。

并且：什么天气 API 最适合实现这一目标，并允许在商业上使用？

我四处浏览并找不到任何完整的示例代码来说明这是如何完成的。我发现了一些小片段，例如 long & lat get 代码，但就是这样。任何帮助或建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:04:17.360

这是一个开源天气应用程序： [https](https://github.com/tibnor/OpenAndroidWeather) ://github.com/tibnor/OpenAndroidWeather 。我希望我能帮上忙。

# map - D3 - 地图上的鼠标事件处理

> ID：10464048
> 
> 赞同：0
> 
> 时间：2012-05-05T17:01:48.137
> 
> 标签：map, event-handling, d3.js

我正在绘制地图并在其上附加鼠标事件。我正在使用 D3 库。

我使用 D3 的“on”功能将鼠标事件处理程序注册到“县路径（每个县）”。发生鼠标事件时需要在控制台上打印日志（即控制台日志），但它不起作用。

下面是整个代码。谢谢！

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

    <script type="text/javascript" src="../d3.v2.js"></script>
    <script type="text/javascript" src="../d3.geo.js"></script>
    <script src="js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jquery-ui-1.8.17.custom.min.js" type="text/javascript" charset="utf-8"></script>

    <style type="text/css">

#counties path {
  pointer-events: all;
  stroke: #fff;
  stroke-width: .25px;  

}

/*
#counties path:hover {
  stroke: yellow;
  fill: orange;
}
*/

#map_legend {
    position: relative;
    top:0px;
    right:0px;
}

</style>
</head>

<body>
   <div id="body">
        <div id = "map_legend">

<script type="text/javascript">

var width = 960, 
    height = 500,
    centered;

var projection = d3.geo.albersUsa().scale(960*4).translate([800,-50]); 
var path = d3.geo.path().projection(projection);

var svg = d3.select("#map_legend").append("svg:svg")
    .attr("width", 80) //960
    .attr("height", 130);  //500

var counties = svg.append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
   .append("g")
    .attr("id", "counties");

  d3.json("us-counties.json", function(json) {
    counties.selectAll("path")
        .data(json.features)
      .enter().append("svg:path")
        .attr("id",function(d,i) { return i;})
        .attr("d", path);
  });

counties.selectAll("path")
    //.attr("pointer-events", "all")
    .on("mouseover", function(d) {  console.log("path mouseover"); }) 
    .on("mouseout", function(d) { console.log("path mouseout"); }) 
    .on("mousemove", function(d) {  console.log("path mouseout");})
    .on("touchmove", function(d) { console.log("path mouseout"); })
    .on("click", function(d) { console.log("path click"); });

    </script>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:05:42.850

问题是对`d3.json`. 您正试图在有任何路径可供选择和建立鼠标事件侦听器之前建立它们。尝试将设置侦听器的代码块移动到`d3.json`.

# java - 自定义 ScrollPane 的绘画问题

> ID：10464053
> 
> 赞同：2
> 
> 时间：2012-05-05T17:02:24.053
> 
> 标签：java, swing, jscrollpane, jlist, jscrollbar

为了在我的其他问题中保持秩序，建议单独提出以下问题：

以下是测试类的代码，我在其中添加了我的自定义 JScrollBar

```
public class TestScrollBar {

    private static JFrame           f;
    private static Container        pane;
    private static JScrollPane      scroll1;
    private static JScrollBar       scrollbar;
    private static JPanel           panel;
    private static JList<String>    list1;

    public static void main(String[] arg){
        createBasic();
        createComponents();
        f.setVisible(true);
    }

    private static void createBasic(){
        f = new JFrame("ScrollbarTest");
        f.setBounds(100,100,300,300);

        pane = f.getContentPane();
        pane.setLayout(null);

        panel = new JPanel();
        panel.setBackground(Color.GREEN);
        panel.setLayout(null);
        panel.setBounds(50,50,200,150);
    }

    private static void createComponents(){

        String[] data = {"ggggg", "ggggg", "ggggg", "ggggg", "ggggg", "ggggg", "ggggg", "ggggg", "ggggg", "ggggg", "ggggg", "ggggg"};
        list1 = new JList<String>(data);
        list1.setBackground(new Color(0,0,0,0));

        scrollbar = new JScrollBar();
        CustomScrollBarUI ui = new CustomScrollBarUI();
        scrollbar.setUI(ui);
        scrollbar.setOpaque(false);

        scroll1 = new JScrollPane(list1);
        scroll1.setBounds(20,20,160,110);
        scroll1.setOpaque(false);
        scroll1.getViewport().setOpaque(false);
        scroll1.setVerticalScrollBar(scrollbar);

        panel.add(scroll1);
        pane.add(panel);
    }
} 
```

自定义 ScrollBarUI 可以在这里看到：[Custom JScrollBar-Thumb ispainted, but doesn't move](https://stackoverflow.com/questions/10462982/custom-jscrollbar-thumb-is-painted-but-doesnt-move) 我唯一改变的（感谢 mgarin）是 `g.drawImage(img, thumbBounds.x, thumbBounds.y, new Color(255,255,255,0), null);`

如果我移动拇指，会发生以下情况（请不要介意设计，这只是为了测试一些不透明的东西......）

[http://tinypic.com/r/sz94pf/6](http://tinypic.com/r/sz94pf/6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:10:01.360

您使列表的背景透明；

```
list1.setBackground(new Color(0,0,0,0)); 
```

如果你删除那条线它画得很好。

在另一个注意事项：如果你想给你的单元格一个自定义背景颜色，请尝试使用自定义 ListCellRenderer，使用 JList 上的 setCellRenderer() 方法。然后，您可以设置返回的组件的背景颜色。

# c# - 将对象转换为正确的类型

> ID：10464054
> 
> 赞同：1
> 
> 时间：2012-05-05T17:02:37.387
> 
> 标签：c#, .net, oop, class, interface

我有小问题。在我的代码的第一种方法中，我已将有关学生的数据从 txt 文件加载到列表集合中。有更多类型的学生（PrimaryStudent、SecondaryStudent、HightSchoolStudent、UniversityStudent、ExternStudent 等类）现在，在其他方法中，我想将每种学生保存到不同的目录中。我的问题是我在该界面的一个集合中拥有所有对象。现在我该如何区分或应该如何区分所有类型的学生？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:09:46.730

如果您的列表是通用的，即`List<Student>`您可以执行以下操作：

```
List<PrimaryStudent> primaryStudents = myStudentList.OfType<PrimaryStudent>().ToList(); 
```

如果您的列表不是通用的，您可以像这样将它们分开：

```
foreach(var s in myStudentList)
{
  if(s is PrimaryStudent)
  { 

    // add to PrimaryStudents list
  }
  else if(s is SecondaryStudent)
  {

    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:14:13.457

看看c#中的[`is`关键字](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.80%29.aspx)。

例子：

```
List<IStudent> students = new List<IStudent>();

students.Add(new PrimaryStudent());
students.Add(new SecondaryStudent());
students.Add(new HightSchoolStudent());

foreach (IStudent student in students)
{
    if (student is PrimaryStudent)
    {
        Console.WriteLine("This was a PrimaryStudent");
    }
    else if (student is SecondaryStudent)
    {
        Console.WriteLine("This was a SecondaryStudent");
    }
    else if (student is HightSchoolStudent)
    {
        Console.WriteLine("This was a HightSchoolStudent");
    }
}

Console.Read(); 
```

输出：

```
This was a PrimaryStudent
This was a SecondaryStudent
This was a HightSchoolStudent 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T17:16:56.470

您可以先从集合中获取所有学生类型，然后按类型将它们保存到最终位置。此处介绍的解决方案没有使用 is 或 OfType<> LINQ 方法，因为如果您想将 Student、PrimaryStudents 和 SecondaryStudents 存储在不同的文件夹中，这些运算符确实无法正常工作。

换句话说，如果您想以不同的方式处理基类的实例（例如保存到不同的文件夹），您需要放弃 OfType 和 is 运算符，但直接检查类型。

```
class Student { }
class PrimaryStudent : Student { }
class SecondaryStudent : Student { }

private void Run()
{
    var students = new List<Student> { new PrimaryStudent(), new PrimaryStudent(), new SecondaryStudent(), new Student() };
    Save(@"C:\University", students);
}

private void Save(string basePath, List<Student> students)
{
    foreach (var groupByType in students.ToLookup(s=>s.GetType()))
    {
        var studentsOfType = groupByType.Key;
        string path = Path.Combine(basePath, studentsOfType.Name);
        Console.WriteLine("Saving {0} students of type {1} to {2}", groupByType.Count(), studentsOfType.Name, path);
    }

}

Saving 2 students of type PrimaryStudent to C:\University\PrimaryStudent
Saving 1 students of type SecondaryStudent to C:\University\SecondaryStudent
Saving 1 students of type Student to C:\University\Student 
```

# awk - 使用 awk 计算多列的总和

> ID：10464055
> 
> 赞同：6
> 
> 时间：2012-05-05T17:02:39.623
> 
> 标签：awk

我有一个包含 8 列的列表，其中前 6 列是相同的。

```
6   99999715    99999771    NM_001013399    0   -   23  0.0714286
6   99999715    99999771    NM_001013399    0   -   24  0.0178571
6   99999715    99999771    NM_001013399    0   -   25  0.1250000 
```

我需要计算第 7 列和第 8 列的平均值，以及 $7*$8，并得到如下格式：

```
6   99999715    99999771    NM_001013399    0   -   ave($7) ave($8) ave($7*$8) 
```

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T17:12:47.790

没试过，但应该只是：

```
{sum7+=$7; sum8+=$8; mul+=$7*$8} END {print sum7/NR,sum8/NR,mul/NR} 
```

应大众需求，我将添加printf。

```
{sum7+=$7; sum8+=$8; mul+=$7*$8}
END {printf "%s %4i %10.7f %10.7f\n", substr($0,0,49),sum7/NR,sum8/NR,mul/NR} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T01:04:10.090

```
awk '
{
  if( common == "" ) { 
    fn=1   # field number
    cn=1   # column number
    tmp=$0
    f=0 
    while( match( tmp, /  *|$/ ) && f<=NF ) 
    {  f+=1
       cnA[fn]=cn           # column number of start of field fn
       cnZ[fn]=cn+RSTART-1  # column number of   end of field fn
       ++fn
       cn+=RSTART+RLENGTH-1
       tmp=substr( tmp, RSTART+RLENGTH )
    }
    common = substr($0,1,cnA[7]-1)
    dlim78 = substr($0,cnZ[7], cnZ[7]-cnA[7])
  }  
  print $0
  (f7+=$7)
  (f8+=$8)
}
END {
  p7=".0" # decimal places ($7)
  p8=".7" # decimal places ($8)
  pP=".7" # decimal places ($7*$8) 
  printf( "%s%"p7"f%s%"p8"f%s%"pP"f\n" ,
           common, f7/NR, dlim78, f8/NR, dlim78,f7*f8/NR )
}
' <<'EOF'
6   99999715    99999771    NM_001013399    0   -   23  0.0714286
6   99999715    99999771    NM_001013399    0   -   25  0.1250000
EOF 
```

输出：

```
6   99999715    99999771    NM_001013399    0   -   23  0.0714286
6   99999715    99999771    NM_001013399    0   -   25  0.1250000
6   99999715    99999771    NM_001013399    0   -   24  0.0982143  4.7142864 
```

# php - 使用 PHP 和 SQL Server 2008 在两列中显示动态产品列表

> ID：10464059
> 
> 赞同：1
> 
> 时间：2012-05-05T17:03:00.340
> 
> 标签：php, sql, web, product

我正在尝试在两列（并排）中动态显示产品列表，但我不确定如何使用表格

这是我的代码，在一列中显示所有产品

```
 $productCount = sqlsrv_num_rows($stmt); // count the output amount
$columncount = 0;
$dynamicList = '<table width="744" border="0" cellpadding="6"><tr>';
while($row = sqlsrv_fetch_array($stmt)){ 
         $id = $row["productID"];
         $product_name = $row["product_name"];
         $product_price = $row["product_price"];
         $dynamicList .= '<td width="135"><a href="product_details.php?productID=' . $id . '"><img src="images/products/Small/Men/' . $id . '.jpg" alt="' . $product_name . '" width="129" height="169" border="0"></a></td>
<td width="593" valign="top">' . $product_name . '<br>
  £' . $product_price . '<br>
  <a href="product_details.php?productID=' . $id . '">View Product Details</a></td>';

  if($columncount == 2){
    $dynamicList .= '</tr><tr>';
    $columncount = 0;
  }else
    $columncount++; 
 }

$dynamicList .= '</tr></table>';

<?php echo $dynamicList; ?><br> 
```

如何让我的产品显示在两列而不是一列中？

用工作解决方案更新了我的帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:08:33.830

您正在为结果集中的每一行创建一个表

它应该是这样的：

```
$columncount = 0;
$dynamicList = '<table width="744" border="0" cellpadding="6"><tr>';
while($row = sqlsrv_fetch_array($stmt)){ 
         $id = $row["productID"];
         $product_name = $row["product_name"];
         $product_price = $row["product_price"];
         $dynamicList .= '<td width="135"><a href="product_details.php?productID=' . $id . '"><img src="images/products/Men/' . $id . '.jpg" alt="' . $product_name . '" width="129" height="169" border="0"></a></td>
<td width="593" valign="top">' . $product_name . '<br>
  £' . $product_price . '<br>
  <a href="product_details.php?productID=' . $id . '">View Product Details</a></td>';

  if($columncount == 3){
    $dynamicList .= '</tr><tr>';
    $columncount = 0;
  }else
    $columncount++; 
 }

$dynamicList .= '</tr></table>';

echo $dynamicList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:13:15.350

```
 //a quick solution will be store the number of result rows
        $nrow=number_of_rows($result);
    //set a counter of the while loop
        $count=0;
    //and in the while loop put if else condition 
        $dynamicList = '<table width="744" border="0" cellpadding="6"><tr>';
        while($row = sqlsrv_fetch_array($stmt)){
        $id = $row["productID"];
        $product_name = $row["product_name"];
        $product_price = $row["product_price"];

        //display the first half of your table in teh left column
             if($coun<$nrow/2){
        $dynamicList .= '
        <td width="135"><a href="product_details.php?productID=' . $id . '"><img src="images/products/Men/' . $id . '.jpg" alt="' . $product_name . '" width="129" height="169" border="0"></a></td>
        <td width="593" valign="top">' . $product_name . '<br>
          £' . $product_price . '<br>
          <a href="product_details.php?productID=' . $id . '">View Product Details</a></td>';
    $count++;
//display 2 item only per row
if($count%2)
$dynamicList .= '</tr>';
         }else{
//repeate the code but for the rest of the table

    }//end else
   }//end while
//close the table and display it on the browser     
        $dynamicList .='</table>';

        echo $dynamicList; 
```

# python - Python：是否可以将句子分成两行？

> ID：10464063
> 
> 赞同：0
> 
> 时间：2012-05-05T17:03:13.987
> 
> 标签：python

```
Sentence = "the heart was made to be broken" 
```

如何使用 Python 拆分句子以在单独的行中显示？（每行 4 个字）

```
Line1: the heart was made
Line2: to be broken 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T17:06:46.933

1.  [将句子变成单词列表。](https://stackoverflow.com/questions/6181763/converting-a-string-to-a-list-of-words)
2.  [将列表分成](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)4 个单词的块。
3.  [将分区](https://stackoverflow.com/questions/2426988/how-to-join-list-of-strings)组合成行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T17:11:45.203

试试这个：

```
s = 'the heart was made to be broken'

for i, word in enumerate(s.split(), 1):
    if i % 4:
        print word,
    else:
        print word

> the heart was made
> to be broken 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:13:11.953

这是一个解决方案：

```
import math

def fourword(s):
    words = s.split()
    fourcount = int(math.ceil(len(words)/4.0))
    for i in range(fourcount):
        print " ".join(words[i*4:(i+1)*4])

if __name__=="__main__":
    fourword("This is a test of fourword")
    fourword("And another test of four") 
```

输出是：

```
>python fourword.py 
This is a test
of fourword
And another test of
four 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T17:24:04.023

[让我解释一下使用itertools](http://docs.python.org/library/itertools.html)模块的这个问题的解决方案。当您尝试处理序列时，无论是列表、字符串还是任何其他可迭代对象，通常最好先从标准库中查看[itertools](http://docs.python.org/library/itertools.html)模块

```
from itertools import count, izip, islice, starmap

# split sentence into words
sentence = "the heart was made to be broken".split()
# infinite indicies sequence -- (0, 4), (4, 8), (8, 12), ...
indicies = izip(count(0, 4), count(4, 4)) 
# map over indices with slicing
for line in starmap(lambda x, y: sentence[x:y], indicies):
    line = " ".join(line)
    if not line:
        break
    print line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T17:55:59.783

通用功能：

```
from itertools import count, groupby

def split_lines(sentence, step=4):
    c = count()
    chunks = sentence.split()
    return [' '.join(g) for k, g in groupby(chunks, lambda i: c.next() // step)] 
```

您可以像这样使用它：

```
>>> sentence = "the heart was made to be broken"
>>> split_lines(sentence)
['the heart was made', 'to be broken']
>>> split_lines(sentence, 5)
['the heart was made to', 'be broken']
>>> split_lines(sentence, 2)
['the heart', 'was made', 'to be', 'broken'] 
```

有了结果，您可以做任何您想做的事情（包括打印）：

```
>>> for line in split_lines(sentence):
...     print line
...     
the heart was made
to be broken 
```

# html - VB.NET下载html代码表

> ID：10464067
> 
> 赞同：1
> 
> 时间：2012-05-05T17:03:39.417
> 
> 标签：html, vb.net, search, html-table, vb.net-2010

我对 vb.net 还是很陌生，我为自己使用而创建的软件有一个大问题。

**一、背景：**

我的软件中有代码，可以将网页的源代码下载到 .txt 文件中并过滤掉它正在寻找的信息。对于普通的 HTML 代码，这可以正常工作。

* * *

**2.问题：**

问题是当我无法定位 HTML 代码中的特定参数时，因为它们太模糊了。

* * *

**3\. 例子：**

我可以下载这种独特的 HTML 代码并将变量（在本例中为 Brown）传递给我的软件中的字符串，因为它位于同一行代码中，使其独一无二：

```
<div class="Performer_DataLabel">Hair Color:</div> Brown</div> 
```

但是我想知道如何搜索一个特定的表格及其行和单元格（如下面的这个显示了 1 行和我感兴趣的 2 个单元格的代码）：

```
1\.  <tr>
2\.      <td class="paramname">
3\.         <b>Hair Color:</b>
4\.      </td>
5\.      <td class="paramvalue">
6\.          Brown&nbsp;
7\.      </td>
8\.  </tr> 
```

问题是，正如您所看到的，“头发颜色：”可以是任何变量，例如“眼睛颜色”或“身高”，而“棕色”可以是该问题的任何答案。这些表格、行或单元格中没有足够的唯一代码来专门针对这些代码行，就像它们写在一行上一样。

* * *

**4\. 我想要：**

为了能够像上面的示例一样在 HTML 代码表中搜索和定位“头发颜色”，并在其相邻单元格中搜索/定位其答案（在本例中为棕色）并将其传递给字符串变量（我将始终知道我'正在寻找“头发颜色”，但我永远不会事先知道头发颜色问题的答案，而答案变量就是我想要找到的）。

* * *

**五、结论：**

我可以使用哪些 VB.NET 代码：

1) 搜索/定位包含“头发颜色”或“眼睛颜色”等词的 HTML 代码表。

2）搜索/定位他们的答案变量，无论它们是什么。（有些问题可能有很多种可能的答案，因此现在不能使用 IF 或 SELECT CASE 语句来预测/比较它们）

3) 将答案传递给我的软件中的字符串。

* * *

**6.注意**

问题（头发颜色），无论完整源代码有多少数百行，始终位于表格行中的同一行（第 3 行）。

答案也总是在表格行的同一行（第 6 行）上。

然而，问题行本身并不总是在表格的同一位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:25:53.057

您可能想使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)，它对解析 HTML（甚至不是有效的 HTML）非常有用。您需要下载它并添加到项目的引用中，`Imports HtmlAgilityPack`在代码文件的开头添加。这是之后解决您的问题的代码：

```
Imports HtmlAgilityPack
Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Dim document As New HtmlAgilityPack.HtmlDocument, strAnswer As String
        document.Load("C:\tmp\1.html")
        For Each td As HtmlAgilityPack.HtmlNode In document.DocumentNode.Descendants("td")
            If td.InnerText.IndexOf("Hair Color") <> -1 Then
                strAnswer = next_td(td).InnerText
                MsgBox(strAnswer)
                Exit For
            End If
        Next
    End Sub
    Private Function next_td(td As HtmlNode) As HtmlNode
      Try
        If td.NextSibling.Name = "td" Then
            Return td.NextSibling
        Else
            Return next_td(td.NextSibling)
        End If
       Catch
       Throw New Exception("Last <td> in document reached")
       End Try
    End Function
End Class 
```

# windows - windows box上nodejs上的persistence.js

> ID：10464069
> 
> 赞同：2
> 
> 时间：2012-05-05T17:04:01.823
> 
> 标签：windows, node.js, persistence

安装persistence.js 时在Windows 上遇到我的node.js 服务器问题。

出现以下错误：“node-waf”不被识别为内部或外部命令

发现这一点：node-waf 是构建系统 waf 的包装器，用于简单地构建 node.js 的本机 C++ 扩展。据我所知，Windows 还没有替代品。

有没有办法让persistence.js 在我的设置上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:10:44.163

```
npm install git://github.com/zefhemel/persistencejs.git 
```

`node-waf`需要安装`sqlite`依赖项。但是查看`package.json`git repo 上的内容，这已被删除。如果你直接从 git repo 安装，你是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:06:53.363

似乎这个persistence.js依赖于'node-waf'：

**node-waf 总结：** “node-waf 是构建系统 waf 的包装器，用于简单地构建 node.js 的原生 C++ 扩展。”

**发布可能存在相同问题的帖子：** 阅读此内容，它可能会有所帮助： [什么是“node-waf”以及如何在 Windows 上获取它？](https://stackoverflow.com/questions/8465248/node-js-what-is-node-waf-and-how-to-get-it-on-windows)

## 问题解决：

关于 Nodejs.org 的博客文章：http: [//blog.nodejs.org/2012/01/23/node-v0-7-1/](http://blog.nodejs.org/2012/01/23/node-v0-7-1/)

# ruby-on-rails - Rails 无法使用 update_attrib 持久化孙子嵌套属性

> ID：10464071
> 
> 赞同：0
> 
> 时间：2012-05-05T17:04:28.573
> 
> 标签：ruby-on-rails, persistence, paperclip, nested-attributes, update-attributes

我正在开发一个回形针上传系统，我有一个用户，他有很多 Uploads，而 Uploads 又有很多 Upload_Images 关系。

由于我的系统工作方式的性质，用户创建一次，然后在将来添加上传，并且需要在用户控制器更新操作中创建上传记录。最初只需要创建上传记录，但我必须扩展功能以包含 Upload_image。就目前而言，创建的是 Upload 记录，而不是 upload_image。

他是发送新上传表单（带有上传图片）后调用 Update 方法的参数哈希。

```
"_method"=>"put",
 "authenticity_token"=>"fEDOZfJ6UarMD/nNM7t86zYXrEkTFtXyrXKJglYZ0Jw=",
 "user"=>{"uploads_attributes"=>{"0"=>{"id"=>"37"},
 "1"=>{"id"=>"36"},
 "2"=>{"id"=>"35"},
 "3"=>{"id"=>"34"},
 "4"=>{"id"=>"33"},
 "5"=>{"id"=>"32"},
 "6"=>{"id"=>"31"},
 "7"=>{"id"=>"30"},
 "8"=>{"id"=>"29"},
 "9"=>{"id"=>"28"},
 "10"=>{"id"=>"27"},
 "11"=>{"id"=>"26"},
 "12"=>{"id"=>"25"},
 "13"=>{"id"=>"24"},
 "14"=>{"id"=>"23"},
 "15"=>{"id"=>"22"},
 "16"=>{"id"=>"21"},
 "17"=>{"id"=>"20"},
 "18"=>{"id"=>"19"},
 "19"=>{"id"=>"18"},
 "20"=>{"id"=>"17"},
 "21"=>{"id"=>"16"},
 "22"=>{"id"=>"15"},
 "23"=>{"id"=>"14"},
 "24"=>{"id"=>"13"},
 "25"=>{"id"=>"12"},
 "26"=>{"id"=>"11"},
 "27"=>{"id"=>"10"},
 "28"=>{"upload"=>#<ActionDispatch::Http::UploadedFile:0x00000004103d18 @original_filename="robot.rres",
 @content_type="application/octet-stream",
 @headers="Content-Disposition: form-data; name=\"user[uploads_attributes][28][upload]\"; filename=\"robot.rres\"\r\nContent-Type: application/octet-stream\r\n",
 @tempfile=#<File:/tmp/RackMultipart20120505-2595-lmr2j4>>,
 "name"=>"Test",
 "file_description"=>"Test",
 "private"=>"0",
 "file_category"=>"1",
 "upload_images_attributes"=>{"0"=>{"upload_image"=>#<ActionDispatch::Http::UploadedFile:0x00000004103a98 @original_filename="Low_Res_NAO_NextGen_04.png",
 @content_type="image/png",
 @headers="Content-Disposition: form-data; name=\"user[uploads_attributes][28][upload_images_attributes][0][upload_image]\"; filename=\"Low_Res_NAO_NextGen_04.png\"\r\nContent-Type: image/png\r\n",
 @tempfile=#<File:/tmp/RackMultipart20120505-2595-16gf0jl>>,
 "preview"=>"0"}}}},
 "username"=>"chunter"},
 "commit"=>"Submit Upload",
 "id"=>"chunter"} 
```

如您所见，Upload 文件和 Upload_Image 文件的参数都已发送，但只有 Upload 被持久化到数据库中。

我的更新方法：

```
 def update
    @user = User.find_by_username(params[:id])
    #Update the users uploadS
    unless @user.update_attributes(params[:user])
      session[:error] = @user.errors.full_messages

      #render :action => "show"
      respond_to do |format|
        format.html { redirect_to :back, notice: 'Update unsuccessful.' }
        format.json { head :ok }
      end
    else
      respond_to do |format|
        format.html { redirect_to :back, notice: 'Update successful.' }
        format.json { head :ok }
      end
    end    
  end 
```

这是我的模型（为了便于阅读，我删除了额外的东西）：

用户

```
class User < ActiveRecord::Base

  attr_accessible :email, :password, :password_confirmation, :remember_me, :admin, :username, :avatar, :description, :name, :country, :province, :gender, :occupation, :city, :address, :birth_date, :uploads_attributes, :avatar_attachment_size, :avatar_file_type, :banned_until, :upload_images_attributes
  has_many :posts, :dependent => :destroy, :order => 'created_at desc'
  has_many :topics, :dependent => :destroy, :order => 'created_at desc'
  has_many :viewings, :dependent => :destroy, :order => 'updated_at desc'
  has_many :uploads, :dependent => :destroy, :order => 'created_at desc'
  has_many :news, :dependent => :destroy, :order => 'created_at desc'
  has_many :events, :dependent => :destroy, :order => 'date desc'
  has_many :blog_entries, :foreign_key => :user_id
  has_many :registers
  has_many :members
  has_many :teams, :through => :members

  accepts_nested_attributes_for :uploads, :allow_destroy => true
  has_attached_file :avatar, :styles => {:thumb=> "70x70#", :small  => "150x150>" }, :default_url => "/images/missing.jpg"

end 
```

上传

```
 class Upload < ActiveRecord::Base
    include ActiveModel::Validations

    belongs_to :user
  belongs_to :upload_category, :foreign_key => :file_category  
  has_many :upload_images, :dependent => :destroy  
  accepts_nested_attributes_for :upload_images, :reject_if => lambda { |t| t[':upload_images'].nil? }
    has_attached_file :upload,  :path => ":rails_root/:class/:id/:basename.:extension", :url => ":rails_root/:class  /:id/:basename.:extension"

    attr_accessible :file_category, :file_description, :user_id, :upload, :name, :private, :uploads, :upload_images_attributes

    validates_attachment_size :upload, :less_than => 30.megabyte
    validates_presence_of :upload_file_name, :message => "must contain a valid file."
    validates :name, :presence => true
  validates :name, :length => { :maximum => 30 }

    validates_with FileValidator
end 
```

上传_图片

```
class UploadImage < ActiveRecord::Base

belongs_to :upload
has_attached_file :image, :styles => { :small => "150x150>", :large => "320x240>"}, :default_url => "/images/missing.jpg"  

end 
```

## 编辑

如果我拿出

```
 :reject_if => lambda { |t| t[':upload_images'].nil? } 
```

在我的上传模型中，当我尝试更新时，我的用户控制器中出现了一个未知属性：upload_image 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:51:39.593

有 2 个问题阻止了我的 Upload_Image 的持久性。

1.  我的 upload_image 模型中的以下行：reject_if => lambda { |t| t[':upload_images'].nil? 导致我的持久性静默失败，因为我试图持久化的文件上传中存在 nil 值。
2.  我得到了未知属性：upload_image，因为在我看来，我有一个 file_field :upload_image 但在我的模型中，我将图像附件称为 :image。这导致在我的模型中触发了reject_if lamba

# c# - 如何在 DataGrid 的 ScrollViewer 中添加内容？

> ID：10464072
> 
> 赞同：0
> 
> 时间：2012-05-05T17:04:37.527
> 
> 标签：c#, wpf, xaml, datagrid

我有一个数据网格：

```
<DataGrid ...></DataGrid> 
```

在默认模板的某处，有一个`ScrollViewer`. 我想在里面添加内容。目前我正在这样做：

```
<Grid>
    <DataGrid Grid.Row="0">...</DataGrid>

    <Canvas Width="128" VerticalAlignment="Stretch" HorizontalAlignment="Left" Grid.Row="0" Margin="0,25,0,0">
        <Rectangle Width="32" Height="256" Canvas.Top="0" Canvas.Left="0" Stroke="Black" StrokeThickness="2" />
    </Canvas>
</Grid> 
```

看起来像这样：

![在此处输入图像描述](../Images/50383cad5be1e2a2792276700223dcd5.png)

也就是说，画布被绘制在网格内。这一切都很好，但是画布不会随着数据网格一起滚动。现在我意识到我可能需要更改控件模板并将画布放在滚动查看器中：

```
<DataGrid>
    <ControlTemplate>
        <ScrollViewer>
            <Grid>
                <ContentPresenter Grid.Row="0" />

                <Canvas Width="128" VerticalAlignment="Stretch" HorizontalAlignment="Left" Grid.Row="0" Margin="0,25,0,0">
                    <Rectangle Width="32" Height="256" Canvas.Top="0" Canvas.Left="0" Stroke="Black" StrokeThickness="2" />
                </Canvas>
            </Grid>
        </ScrollViewer>
    </ControlTemplate>
</DataGrid> 
```

但是，这给了我错误：

> PresentationFramework.dll 中出现“System.InvalidOperationException”类型的第一次机会异常
> 
> 附加信息：在使用 ItemsSource 之前，Items 集合必须为空。

如何将画布放在滚动条内以使其与内容一起滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:43:27.993

DataGrid 是 ItemsControl，而 ItemsControl 的 ContentProperty 是 Items 属性。这是反编译的源代码，注意*ContentProperty*属性：

```
[DefaultEvent("OnItemsChanged"), DefaultProperty("Items")]
[ContentProperty("Items")]
[StyleTypedProperty(Property = "ItemContainerStyle", StyleTargetType = typeof(FrameworkElement))]
[Localizability(LocalizationCategory.None, Readability = Readability.Unreadable)] // cannot be read & localized as string 
public class ItemsControl : Control, IAddChild, IGeneratorHost 
{ 
```

这意味着如果您执行以下操作：

```
<DataGrid>
    <SomethingHere>
</DataGrid> 
```

然后`<SomethingHere>`- 这是内容 - 应用于`Items`属性。如果您随后绑定到该`ItemsSource`属性，您将收到您所看到的错误 - “在使用 ItemsSource 之前，Items 集合必须为空。”

如果你用过

```
<DataGrid>
    <DataGrid.Template>
        <ControlTemplate> ... 
```

你不会得到错误。

在任何情况下，最好使用 Blend 或 VS11 提取 DataGrid 的完整 ControlTemplate 并对其进行修改，例如

```
 <Style x:Key="{ComponentResourceKey ResourceId=DataGridSelectAllButtonStyle, TypeInTargetAssembly={x:Type DataGrid}}" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <Rectangle x:Name="Border" Fill="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" SnapsToDevicePixels="True"/>
                        <Polygon x:Name="Arrow" Fill="Black" HorizontalAlignment="Right" Margin="8,8,3,3" Opacity="0.15" Points="0,10 10,10 10,0" Stretch="Uniform" VerticalAlignment="Bottom"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Stroke" TargetName="Border" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Fill" TargetName="Border" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Visibility" TargetName="Arrow" Value="Collapsed"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="DataGridStyle1" TargetType="{x:Type DataGrid}">
        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="BorderBrush" Value="#FF688CAF"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="RowDetailsVisibilityMode" Value="VisibleWhenSelected"/>
        <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
        <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGrid}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                        <ScrollViewer x:Name="DG_ScrollViewer" Focusable="false">
                            <ScrollViewer.Template>
                                <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <Button Command="{x:Static DataGrid.SelectAllCommand}" Focusable="false" Style="{DynamicResource {ComponentResourceKey ResourceId=DataGridSelectAllButtonStyle, TypeInTargetAssembly={x:Type DataGrid}}}" Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.All}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" Width="{Binding CellsPanelHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                        <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter" Grid.Column="1" Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                        <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" Grid.ColumnSpan="2" Grid.Row="1"/>
                                        <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="2" Maximum="{TemplateBinding ScrollableHeight}" Orientation="Vertical" Grid.Row="1" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportHeight}"/>
                                        <Grid Grid.Column="1" Grid.Row="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="{Binding NonFrozenColumnsViewportHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <ScrollBar x:Name="PART_HorizontalScrollBar" Grid.Column="1" Maximum="{TemplateBinding ScrollableWidth}" Orientation="Horizontal" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportWidth}"/>
                                        </Grid>
                                    </Grid>
                                </ControlTemplate>
                            </ScrollViewer.Template>
                            <Grid>
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>

                                <!-- your canvas here -->
                                <Canvas Width="128" VerticalAlignment="Stretch" HorizontalAlignment="Left" Grid.Row="0" Margin="0,25,0,0">
                                    <Rectangle Width="32" Height="256" Canvas.Top="0" Canvas.Left="0" Stroke="Black" StrokeThickness="2" />
                                </Canvas>
                            </Grid>
                        </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsGrouping" Value="true">
                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Grid>
    <DataGrid HorizontalAlignment="Left" Margin="125,110,0,0" VerticalAlignment="Top" Height="134" Width="258" Style="{DynamicResource DataGridStyle1}"/>

</Grid> 
```

# c# - 数据表到字符串

> ID：10464078
> 
> 赞同：0
> 
> 时间：2012-05-05T17:06:03.800
> 
> 标签：c#, asp.net, vb.net

我有一个包含三列的数据表

```
Id name value value1 
```

我想从此数据表创建一个字符串，以便

1.  数据表中的每一行将创建两行
2.  名称将变为一行
3.  值 1 将成为另一行
4.  如果 name 和 value1 相似，则仅包含 value 1，否则同时包含 name 和 value1（完成）

5.  如果一行的名称与任何其他行中的名称相似，则在字符串中的两个重复行前面添加以下文本

*Id 与 Id 相似*

这是我到目前为止所写的：

```
Public Function GetGazetteer(dataTable As DataTable) As String
            Dim processedData = New List(Of String)
            Dim rowData = String.Empty
            Dim results = New StringBuilder()

            For Each row As DataRow In dataTable.Rows
                processedData.Add(row(1))
                If row(3) <> row(1) Then
                    processedData.Add(row(3))
                End If
            Next

            For Each row As String In processedData
                rowData = row

                If rowData.Trim <> String.Empty Then
                    If (processedData.Where(Function(d) d = rowData).Count = 1) Then
                        results.Append(rowData)
                        results.Append("<br />")
                    Else
                        results.Append(rowData)
                        results.Append("*")
                        results.Append("<br />")
                    End If
                End If

            Next

            Return results.ToString
        End Function 
```

目前，`*`已添加（请建议如何添加上述文本。）

这是一个示例

```
id   name           value  value1
1    this is string 1       abc    This is sample
2    this is string 2       abc    this is string 2
3    this is string 3       abc    this is string 4
4    this is string 3       abc    asasaasd 
```

这是所需的输出

```
this is string 1
This is sample
this is string 2
*3 is duplicate of 4* this is string 3
this is string 4
*4 is duplicate of 3* this is string 3
asasaasd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:28:44.807

**根据问题给出的输出进行编辑**

这是使用 C# 的解决方案（希望您可以将其转换为 VB.NET）。我使用了一个结构来保存 id、value、col 信息。

结构是

```
 public struct Container
    {
       public int Id;
       public int Col;
       public string Value;
    } 
```

方法是

```
 public string GetGazetteer(DataTable dtInput)
        {
            string result = null;
            List<Container> containers = new List<Container>();
            List<Container> finalContainers = new List<Container>();
            StringBuilder sb = new StringBuilder();

            foreach (DataRow row in dtInput.Rows)
            {
                Container container;
                container = new Container() { Id = int.Parse(row[0].ToString()), Value = row[1].ToString(), Col = 1 };
                containers.Add(container);
                if (row[1] != row[3])
                {
                    container = new Container() { Id = int.Parse(row[0].ToString()), Value = row[3].ToString(), Col = 2 };
                    containers.Add(container);
                }
            }

            containers = containers.OrderBy(c => c.Value).ThenBy(c => c.Id).ToList();

            if (containers.Count > 0)
            {
                string initialVal = containers[0].Value;
                finalContainers.Add(containers[0]);
                for (int i = 1; i < containers.Count; i++)
                {
                    if (containers[i].Value == initialVal)
                    {
                        finalContainers.Remove(containers[i]);
                        finalContainers.Remove(containers[i - 1]);
                        finalContainers.Add(new Container() { Id = containers[i - 1].Id, Value = "*" + containers[i - 1].Id + " is duplicate of " + containers[i].Id + "* " + containers[i - 1].Value });
                        finalContainers.Add(new Container() { Id = containers[i].Id, Value = "*" + containers[i].Id + " is duplicate of " + containers[i - 1].Id + "* " + containers[i].Value });
                    }
                    else
                    {
                        finalContainers.Add(containers[i]);
                    }

                    initialVal = containers[i].Value;
                }

                finalContainers = finalContainers.OrderBy(c => c.Id).ThenBy(c => c.Col).ToList();

                foreach (Container container in finalContainers)
                {
                    sb.Append(container.Value + "</br>");
                }

                result = sb.ToString();
            }

            return result;
        } 
```

这是我用于测试的示例数据表

```
 DataTable dtInput = new DataTable();
            dtInput.Columns.Add("id");
            dtInput.Columns.Add("name");
            dtInput.Columns.Add("value");
            dtInput.Columns.Add("value1");

            DataRow drInput1 = dtInput.NewRow();
            drInput1[0] = "1";
            drInput1[1] = "this is string 1";
            drInput1[2] = "abc";
            drInput1[3] = "This is sample";
            dtInput.Rows.Add(drInput1);

            DataRow drInput2 = dtInput.NewRow();
            drInput2[0] = "2";
            drInput2[1] = "this is string 2";
            drInput2[2] = "abc";
            drInput2[3] = "this is string 2";
            dtInput.Rows.Add(drInput2);

            DataRow drInput3 = dtInput.NewRow();
            drInput3[0] = "3";
            drInput3[1] = "this is string 3";
            drInput3[2] = "abc";
            drInput3[3] = "this is string 4";
            dtInput.Rows.Add(drInput3);

            DataRow drInput4 = dtInput.NewRow();
            drInput4[0] = "4";
            drInput4[1] = "this is string 3";
            drInput4[2] = "abc";
            drInput4[3] = "asasaasd";
            dtInput.Rows.Add(drInput4); 
```

输出将是

```
this is string 1</br>This is sample</br>this is string 2</br>*3 is duplicate of 4* this is string 3</br>this is string 4</br>*4 is duplicate of 3* this is string 3</br>asasaasd</br> 
```

# ios - 如何根据文本调整导航返回按钮的大小（不使用自定义图像）

> ID：10464079
> 
> 赞同：1
> 
> 时间：2012-05-05T17:06:09.353
> 
> 标签：ios, uinavigationbar, backbarbuttonitem

我在导航控制器中有视图控制器。它在导航控制器的堆栈中具有默认的后退按钮和前一个控制器的标题。但按钮不会调整为文本宽度。所以它看起来像这样： http: [//gyazo.com/0f94d7802354cadaee7d4aa38b1eea8e](http://gyazo.com/0f94d7802354cadaee7d4aa38b1eea8e) （对不起，我无法添加图片）

但是当我在模拟器中打开设置时，我看到文本适合返回按钮： http: [//gyazo.com/d3a512ce41885896a4ebe04ed1ca2a0c](http://gyazo.com/d3a512ce41885896a4ebe04ed1ca2a0c)

我怎样才能达到相同的行为？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:27:39.013

我发现后退按钮会自动调整大小以适应文本。你在自定义你的标题吗？它看起来不像默认值，所以也许这就是问题所在。您可以尝试手动截断标题或制作自定义后退按钮：

```
self.navigationItem.backBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:
@"Custom Back Title" style:UIBarButtonItemStyleBordered target:nil action:nil]
autorelease]; 
```

这应该被添加到视图控制器上一层（所以通过点击返回显示的那个，而不是按钮出现的那个）。

# c++ - 二维码解码器

> ID：10464080
> 
> 赞同：4
> 
> 时间：2012-05-05T17:06:13.677
> 
> 标签：c++, qr-code

有没有办法从头开始用 C++ 编写二维码解码器？我已经在 Python 中使用`SimpleCv`模块来访问网络摄像头了。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T23:05:28.217

我是 SimpleCV 的核心开发人员之一。我们曾经支持 ZXing，但问题是它是基于 java 的，并且在它自己的应用程序之外运行非常慢。截至上周，我更新了代码以支持[Zbar](http://zbar.sourceforge.net/)。它基于 c++，安装和运行速度非常快且更容易。他们还提供了有关如何运行您自己的代码的示例，并且如果您需要更快的速度，应该使用 OpenCV。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T21:59:05.017

[ZXing](http://code.google.com/p/zxing/)有一个 C++ 检测器和解码器。您只需要提供 RGB 或亮度图像数据作为矢量。

（全面披露：此时我是 ZXing C++ QR 端口的主要维护者。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:11:24.170

我正在使用 ZXing for Java，但在他们的网站上说他们部分支持 C++ [http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)

# ios - 如何为设备和模拟器设置不同的产品名称

> ID：10464085
> 
> 赞同：1
> 
> 时间：2012-05-05T17:06:21.303
> 
> 标签：ios, xcode, ios-simulator

例如，我希望我的项目为设备构建一个名为“mylib_ios.a”的目标，为模拟器构建一个名为“mylib_sim.a”的目标。

编辑：我希望在为模拟器或设备构建时自动更改。我需要一个 xconfig 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:39:14.830

1.  右键单击 Xcode 中 TARGETS 下的目标 mylib_ios.a，然后选择 Duplicate。
2.  选择 TARGETS 下的“my_lib_ios.a 副本”。在 Build Settings 下，搜索“product name”，将其重命名为 mylib_sim.a
3.  您也可以通过再次单击来重命名目标。

# android - AndEngine 和 TimerHandlers：引用场景中的成员变量

> ID：10464093
> 
> 赞同：1
> 
> 时间：2012-05-05T17:07:01.040
> 
> 标签：android, andengine

使用 AndEngine GLES2 开发游戏

我在尝试更改从 TimerHandlers 回调中添加到场景中的矩形的比例时遇到问题。每当计时器滴答作响时，它都会进行百分比计算，然后在 OnTimePassed ITimerCallback 内尝试设置场景中矩形的比例。除非我将矩形声明为静态，否则我会不断收到 nullreferenceexception 错误。

我知道这是一个范围问题，我的问题是，我应该将我需要从 timercallback 中访问的对象声明为静态的，还是有一种“可接受的方式”来从 timercallback 中访问 Activity 级别的对象？

```
PlayerRecastTimer = new TimerHandler(0.5f, true, new ITimerCallback(){
    private float recastTime = playerSpellToCast.getRecastTime();

    public void onTimePassed(TimerHandler pTimerHandler) {
        if(recastTime == 0) {
            mAct.GetEngine().unregisterUpdateHandler(pTimerHandler);
            mAct.GetQueue().RemovePlayerSpell();
            pRecast.setScaleX(1);
            RunScene();
        }

        float recastScale;

        recastScale = recastTime / playerSpellToCast.getRecastTime();
        pRecast.setScaleX(recastScale); //blows up here when attempting to scale the rectangle
        recastTime -= 0.5;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:43:07.263

如果您`PlayerRecastTimer`是包含 的类的成员`pRecast`，则可以使用`ClassName.this`.

示例：如果您有一个名为的类`LoadingScreenActivity`并且它有一个名为 的矩形`pRecast`，那么您可以通过使用`pRecast`在您的`onTimePassed()`函数中访问

```
LoadingScreenActivity.this.pRecast.setScaleX(1); 
```

# ruby-on-rails - 如何检查流程中是否设置了属性值？

> ID：10464100
> 
> 赞同：0
> 
> 时间：2012-05-05T17:07:54.003
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.2，我想知道是否有办法检查在流程中是否*设置了属性值。*也就是说，我有一个`Article`具有属性`title`, `content`,的类`updater_user_id`。

在我的控制器中，我有：

```
# @article.title
# => "Sample title"
# @article.content
# => "Sample content"
# @article.updater_user_id
# => 1

# @current_user.id
# => 1 # Note: This value is the same as '@article.updater_user_id'
@article.updater_user_id = @current_user.id

# params[:article]
# => {:article => {:title => 'Sample title 2', :content => 'Sample content 2'}}
@article.update_attributes(params[:article]) 
```

我尝试使用该[`@article.changed`](http://apidock.com/rails/ActiveModel/Dirty/changed)方法，但它不起作用，因为我希望它起作用。事实上，该方法返回：

```
@article.changed
# => ['title', 'content'] # Note: There isn't the 'updater_user_id' attribute 
```

*换句话说，我想检查是否`updater_user_id`在流程中设置了，即使该值没有改变。*我的用例是我想在保存对象之前*要求*`updater_user_id`在流程中设置（至少一次）；`Article`如果在流程中没有设置它，那么我想提出一个错误或类似的东西。

**可能吗？如果是这样，如何做到这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:55:33.693

你试过`xxx_will_change!`方法吗？

```
# in Article class
  def updater_user_id=(new_updater_user_id)
    self[:updater_user_id] = new_updater_user_id
    updater_user_id_will_change!
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:36:27.007

我没有对此进行测试，可能会有一些无法预料的警告，但您可能会执行以下操作：

```
def updater_user_id=(val)
  @updater_user_id_set = true
  write_attribute :updater_user_id, val
end

def updater_user_id_set?
  @updater_user_id_set || updater_user_id_changed?
end

def clear_updater_user_id_set
  @updater_user_id_set = false
end
private :clear_updater_user_id_set

after_save :clear_updater_user_id_set 
```

这将覆盖`updater_user_id=`以保存字段已更新的标志，然后有一种方法来检查它是否已设置（大概您想在验证或其他内容中使用它？）。最后添加一个钩子以在保存对象时清除标志。

# java - Java LinkedList 中的 IndexOutOfBoundsException

> ID：10464101
> 
> 赞同：-1
> 
> 时间：2012-05-05T17:08:00.727
> 
> 标签：java, linked-list, indexoutofboundsexception

这个方法抛出一个IndexOutOfBoundsException，我不明白为什么我已经提防它了。

```
private static boolean firstLoop(int custNo, LinkedList<Pipe> stock, LinkedList<Customer> custs, Random generator, String colour, int col, Tracking tracking) {

    if ((stock.get(tracking.getLast(col)) != null) && (stock.get(tracking.getLast(col)).getLength() >= custs.get(custNo).getLength())) {

        stock.get(tracking.getLast(col)).length = Cut.cut(stock.get(tracking.getLast(col)).getLength(), custs.get(custNo).getLength(), colour);
        if (stock.get(tracking.getLast(col)).length < 5) {

            stock.remove(tracking.getLast(col)); //**CAUSES EXCEPTION**

            tracking.add();// recycle

        }
        return true;
    } else {
        for (int j = tracking.getLast(col) + 1; j < stock.size(); j++) {

            if ((stock.get(j).getLength() >= custs.get(custNo).getLength())) {
                // pipe is long enough, cut away the desired length
                stock.get(j).setLength(Cut.cut(stock.get(j).getLength(), custs.get(custNo).getLength(), colour));

                tracking.setLast(col, j);

                return true;
            }
        }

        // no suitable pipes available, order new one of correct colour with
        // random length 100-200 then cut from it, add to arraylist
        Pipe temp2 = new Pipe(col, generator.nextInt(101) + 100);
        temp2.setLength(Cut.cut(temp2.length, custs.get(custNo).length, colour));
        stock.add(temp2);
        tracking.setLast(col, stock.size() - 1);
        return false;
    }

} 
```

我发现标记的行是导致异常的行（程序在被注释掉时运行完美）。但是，我很困惑，因为 tracking.getLast(col) 在它上面的行中完美地工作，并且 remove 函数不在迭代器或循环内。这是跟踪类：

```
public class Tracking {

static int lastR=0;
static int lastG=0;
static int lastY=0;

public void setLast(int col, int last){
    if(col==0){
        lastR=last;
    }else if(col==1){
        lastG=last;
    }else if(col==2){
        lastY=last;
    }else{
        System.out.println("Colour does not exist");
    }
}

public static int getLast(int col){
    if(col==0){
        System.out.println(lastR+" red");
        return lastR;
    }else if(col==1){
        System.out.println(lastG+" green");
        return lastG;
    }else{
        System.out.println(lastY+" yellow");
        return lastY;
    }
} 
```

这是使用引发错误的方法：

```
if ((yellowStock.get(Tracking.getLast(2)) != null) && (yellowStock.get(Tracking.getLast(2)).getLength() >= custs.get(i).getLength())) {

  firstLoop(i, yellowStock, custs, generator, "yellow", 2, recycle);
} 
```

线程“主”java.lang.IndexOutOfBoundsException 中的异常：索引：3，大小：3 在 java.util.LinkedList.checkElementIndex(Unknown Source) at java.util.LinkedList.get(Unknown Source) at NextFit.next(NextFit. java:26) 在 Main.main(Main.java:58)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:13:24.760

问题如下：

`LinkedList.remove()`有两种口味：

1.  `LinkedList.remove(int index)`，删除指定索引处的元素
2.  `LinkedList.remove(Object o)`，删除指定的元素

此外，`tracking.getLast(int col)`返回`int`，所以当你打电话

```
stock.remove(tracking.getLast(col)); 
```

所谓的版本`remove()`是 1 号，而不是您想要的 2 号。

尝试打电话`stock.remove(col);`或任何有意义的事情。

顺便说一句，您的编码风格可能会有所改进，尤其是使用静态字段和方法`Tracking`代替*实例*字段和方法。

# python - 协调两个芹菜任务

> ID：10464102
> 
> 赞同：1
> 
> 时间：2012-05-05T17:08:01.077
> 
> 标签：python, django, parallel-processing, celery

我有两个成对调用的任务。它们是单独的任务，因为它们与单独的阻塞 i/o 资源通信，其中一个（TaskA）在任务对的先前实例仍在运行的情况下提前退出，而 TaskB 仍将运行（即 TaskA 关心重叠任务对，TaskB 没有）。

现在，我正在考虑按照食谱示例使用缓存的令牌来执行制定的规则

```
def TaskA()
   take TaskA token
   exit if already taken
   check if TaskB token is taken
   exit if TaskB token is taken
   continue working

def TaskB()
   take TaskB token
   if token taken exit
   do task 
```

这样做的问题是在一对TaskA和TaskB中，如果TaskB先启动，TaskA会错误地退出。如果我可以强制 TaskA 总是首先启动，那么也许这是一个不错的方法。

否则：我对此的想法是在调用函数中生成一个 rand() 或时间戳，将其传递给两个任务实例。TaskB 实例会将它附加到它所使用的令牌上，如果 rand 部分与它自己的匹配，TaskA 将使用它来忽略 TaskB 令牌，如果令牌被占用，但 rand 部分不匹配，则退出。

```
def TaskA(rand)
   take TaskA token
   exit if already taken
   check if TaskB_* token is taken
   exit if TaskB_not_rand token is taken
   continue working

def TaskB(rand)
   check TaskB_* token
   if TaskB_* token taken exit
   take TaskB_rand token
   do task 
```

鉴于所提出的问题，以我在第二个版本中建议的方式使用令牌（附加 rand() ）是让任务协调的正确方法吗？或者有没有更简单的方法。

如果问题不清楚，或者您对为什么任务具有此操作标准感到好奇，我可以添加更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:56:04.533

怎么样，而不是使用随机/时间戳，使用序列号，所以：

```
def TaskA():
  take TaskA_token
  exit if TaskA_token taken
  take TaskB_token
  if TaksB_token.sequence <= self.sequence:
    exit 
```

# objective-c - 如何在 TabBar 控制器中重新加载视图？

> ID：10464112
> 
> 赞同：1
> 
> 时间：2012-05-05T17:08:36.390
> 
> 标签：objective-c, ios, xcode4

我有一个 UITableView，用于使用 MFMailComposeViewController 发送电子邮件。它第一次正确显示数据。如果我发送或取消电子邮件，从那时起我会看到一个空白屏幕（换句话说，我无法再次发送电子邮件）。

当我回到视图再次发送电子邮件时，它是空白的，因此需要重新加载视图原来的样子。

我该怎么做才能解决这个问题？（我将 XCode4 与 Storyboards 和 ARC 一起使用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:37:14.923

尝试在电子邮件发送或取消后立即使用 [self.view setNeedsDisplay] 重新加载关闭电子邮件的视图。

编辑：[emailView resignFirstResponder]怎么样；?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:02:35.407

滥用 API：当使用`UITabBarController`,时，`viewDidLoad`仅在视图加载开始时调用一次。因此，当您将代码放入时`viewDidLoad`，它只会执行一次。通过将该代码移动到`viewWillAppear`，它每次都会被加载。

# python - Python：try-catch-else 不处理异常。可能的？

> ID：10464118
> 
> 赞同：17
> 
> 时间：2012-05-05T17:09:09.697
> 
> 标签：python, exception, try-catch

我是 python 新手，想知道是否可以在不处理异常的情况下创建 try-catch-else 语句？

像：

```
try:
    do_something()
except Exception:
else:
    print("Message: ", line) // complains about that else is not intended 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-05T17:09:58.633

以下示例代码向您展示了如何使用 pass 捕获和忽略异常。

```
try:
    do_something()
except RuntimeError:
    pass # does nothing
else:
    print("Message: ", line) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-05T17:36:17.810

虽然我同意 Jochen Ritzel 的答案是一个很好的答案，但我认为其中可能存在一个小小的疏忽。通过`pass`ing，异常 /is/ 被处理，只是什么都不做。所以真的，这个例外被忽略了。

如果你真的不想处理异常，那么异常应该是`raise`d。以下代码对 Jochen 的代码进行了更改。

```
try:
    do_something()
except RuntimeError:
    raise #raises the exact error that would have otherwise been raised.
else:
    print("Message: ", line) 
```

# java - 使用 javax.mail（或类似的）查找可用的邮件存储、可用空间等

> ID：10464119
> 
> 赞同：4
> 
> 时间：2012-05-05T17:09:12.270
> 
> 标签：java, email, jakarta-mail

使用 javax.mail 或任何相关的 Java 库，可以做些什么来了解用户的邮件存储大小、可用空间以及总可用空间？

我使用 javax.mail api 获取有关消息的信息。

```
Message message = new MimeMessage(session);
folder1 = store.getDefaultFolder();
folder1 = folder1.getFolder(boxType);
System.out.println("folder found :" 
                  + folder1.exists() 
                  + "folder name is " 
                  + folder1.getFullName());
folder1.open(Folder.READ_ONLY);
messages = folder1.getMessages(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T19:43:38.830

您应该使用实现[QuotaAwareStore](http://javamail.kenai.com/nonav/javadocs/javax/mail/QuotaAwareStore.html)接口的 store，例如[IMAPSSLStore](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/IMAPSSLStore.html)或[IMAPStore](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/IMAPStore.html)。[在这样的商店和每个配额](http://javamail.kenai.com/nonav/javadocs/javax/mail/Quota.html)对象检查“资源”数组上调用“getQuota ”。每个[Quota.Resource](http://javamail.kenai.com/nonav/javadocs/javax/mail/Quota.Resource.html)包含“限制”和“使用”值。

```
 Properties prop = System.getProperties();

    String host = "imap.gmail.com";
    String username = "user@google.com";
    String password = "some-password";

    prop.setProperty("mail.imap.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    prop.setProperty("mail.imap.host", host);
    prop.setProperty("mail.imap.port", "993");
    prop.setProperty("mail.imap.starttls.enable", "true");
    prop.setProperty("mail.imap.socketFactory.fallback", "false");
    prop.setProperty("mail.debug", "true");

    Session ses = Session.getInstance(prop, null);
    Store store = ses.getStore("imap");
    store.connect(host, username, password);

    if (!IMAPStore.class.isInstance(store))
        throw new IllegalStateException("Is not IMAPStore");

    IMAPStore imapStore = (IMAPStore) store;
    Quota[] quotas = imapStore.getQuota("INBOX");

    for (Quota quota : quotas) {
        System.out.println(String.format("quotaRoot:'%s'", quota.quotaRoot));

        for (Quota.Resource resource : quota.resources) {
            System.out.println(String.format("name:'%s', limit:'%s', usage:'%s'",
                    resource.name, resource.limit, resource.usage));
        }
    } 
```

我的帐户在控制台中的输出：

```
配额根：''
名称：'STORAGE'，限制：'10486380'，用法：'1564'

```

* * *

**编辑**
另一个试图找到配额和文件夹大小之间相关性的例子：
[IMAP quota and folder size big example](http://pastebin.com/HSJnPQUY)

摘要，基于 JavaMail JavaDoc 和 GMail 上的大示例的结果：

*   几个`Folder`'s 可能有相同的`Quota`对象。例如，GMail`Quota`在所有文件夹之间只有一个共享。
*   `Folder`是逻辑实体（不像文件系统上的文件夹）。例如，GMail 有一个文件夹`[Gmail]/All Mail`，其中包含来自其他文件夹的邮件。
*   `limit`GMail 返回的值以千字节为`usage`单位。`Quota`

因此，如果您需要显示您应该使用的剩余空间`Quota`。如果您需要显示带有消息的网格并按大小排序，您应该使用`folder.getMessages()`and `message.getSize()`。

# php - XML 到数组 PHP

> ID：10464123
> 
> 赞同：0
> 
> 时间：2012-05-05T17:09:57.073
> 
> 标签：php, xml, parsing, xml-parsing

我正在尝试将 XML 响应转换为 php 数组。我尝试了许多不同的方法，但都给出了相同的结果，这意味着某些数组是空的，它们不应该是空的。我真的需要从 Array Fares（尤其是 FareSellKey）中获取内容 我尝试了 xml2array 函数，我尝试了更简单的函数，例如 $a = json_decode(json_encode((array) simplexml_load_string($data)),1); 大家都有同样的问题，我该怎么办

这是一个例子。XML

```
 <schedules>
   <arrayofjourneydatemarket>
   <journeydatemarket>
   <departuredate>2012-06-11T00:00:00</departuredate>
   <departurestation>OTP</departurestation>
   <arrivalstation>BLQ</arrivalstation>
   <journeys>
   <journey>
   <state xmlns="http://schemas.navitaire.com/WebServices/DataContracts/Common">New</state>
   <notforgeneraluse>false</notforgeneraluse><segments><segment><state xmlns="http://schemas.navitaire.com/WebServices/DataContracts/Common">Clean</state>
  <actionstatuscode>HK</actionstatuscode><arrivalstation>BLQ</arrivalstation>
  <cabinofservice></cabinofservice>
  <changereasoncode><departurestation>OTP</departurestation><prioritycode>
  <segmenttype><sta>2012-06-11T14:20:00</sta><std>2012-06-11T13:10:00</std>
  <international>false</international><flightdesignator xmlns:a="http://schemas.navitaire.com/WebServices/DataContracts/Common"><carriercode>0B</carriercode><flightnumber> 117</flightnumber>
  <opsuffix></opsuffix>
  </flightdesignator><xrefflightdesignator xmlns:a="http://schemas.navitaire.com/WebServices/DataContracts/Common" nil="true">
  <fares>
  <legs>
  <leg>
  <state xmlns="http://schemas.navitaire.com/WebServices/DataContracts/Common">Clean</state>
  <arrivalstation>BLQ</arrivalstation>
  <departurestation>OTP</departurestation><sta>2012-06-11T14:20:00</sta>
  <std>2012-06-11T13:10:00</std><flightdesignator xmlns:a="http://schemas.navitaire.com/WebServices/DataContracts/Common">
  <carriercode>0B</carriercode>
  <flightnumber> 117</flightnumber><opsuffix></opsuffix></flightdesignator>
  <leginfo><state xmlns="http://schemas.navitaire.com/WebServices/DataContracts/Common">Clean</state>
 <adjustedcapacity>136</adjustedcapacity>
<equipmenttype>733</equipmenttype><equipmenttypesuffix>C</equipmenttypesuffix>
<arrivalterminal><arrvltv>120</arrvltv><capacity>136</capacity><codeshareindicator></codeshareindicator><departureterminal><deptltv>180</deptltv><eticket>true</eticket><flifoupdated>true</flifoupdated><irop>false</irop><status>Normal</status><lid>140</lid><ontime></ontime><paxsta>2012-06-11T14:20:00</paxsta><paxstd>2012-06-11T13:10:00</paxstd><prbccode>BAC-OTP</prbccode><scheduleservicetype>J</scheduleservicetype><sold>37</sold><outmovedays>0</outmovedays><backmovedays>0</backmovedays><legnests><legssrs><legssr><ssrnestcode>AVIH</ssrnestcode><ssrlid>3</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>BIKE</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>BLD</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>DEAF</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>INFT</ssrnestcode><ssrlid>13</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>PETC</ssrnestcode><ssrlid>4</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>PREG</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>SPF</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>UM</ssrnestcode><ssrlid>100</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>WCHC</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>WCHR</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr><legssr><ssrnestcode>WEAP</ssrnestcode><ssrlid>999</ssrlid><ssrsold>0</ssrsold><ssrvaluesold>0</ssrvaluesold></legssr></legssrs><operatingflightnumber></operatingflightnumber><operatedbytext><operatingcarrier><operatingopsuffix></operatingopsuffix><subjecttogovtapproval>false</subjecttogovtapproval><marketingcode><changeofdirection>false</changeofdirection><marketingoverride>false</marketingoverride></marketingcode></operatingcarrier></operatedbytext></legnests></departureterminal></arrivalterminal></leginfo><operationsinfo nil="true"></operationsinfo></leg></legs><paxbags><paxseats><paxssrs><paxsegments><paxtickets><salesdate>9999-12-31T00:00:00Z</salesdate><segmentsellkey>0B~ 117~ ~~OTP~06/11/2012 13:10~BLQ~06/11/2012 14:20</segmentsellkey></paxtickets></paxsegments></paxssrs></paxseats></paxbags></fares></xrefflightdesignator></segmenttype></prioritycode></changereasoncode></segment></segments><journeysellkey>0B~ 117~ ~~OTP~06/11/2012 13:10~BLQ~06/11/2012 14:20</journeysellkey></journey></journeys></journeydatemarket></arrayofjourneydatemarket></schedules>  

The resulting array

     Array ( [ArrayOfJourneyDateMarket] => Array ( [JourneyDateMarket] => Array ( [0] => Array ( [DepartureDate] => 2012-06-11T00:00:00 [DepartureStation] => OTP [ArrivalStation] => BLQ [Journeys] => Array ( [Journey] => Array ( [State] => New [NotForGeneralUse] => false [Segments] => Array ( [Segment] => Array ( [State] => Clean [ActionStatusCode] => HK [ArrivalStation] => BLQ [CabinOfService] => Array ( ) [ChangeReasonCode] => Array ( ) [DepartureStation] => OTP [PriorityCode] => Array ( ) [SegmentType] => Array ( ) [STA] => 2012-06-11T14:20:00 [STD] => 2012-06-11T13:10:00 [International] => false [FlightDesignator] => Array ( [CarrierCode] => 0B [FlightNumber] => 117 [OpSuffix] => Array ( ) ) [XrefFlightDesignator] => Array ( [nil] => true ) [Fares] => Array ( ) [Legs] => Array ( [Leg] => Array ( [State] => Clean [ArrivalStation] => BLQ [DepartureStation] => OTP [STA] => 2012-06-11T14:20:00 [STD] => 2012-06-11T13:10:00 [FlightDesignator] => Array ( [CarrierCode] => 0B [FlightNumber] => 117 [OpSuffix] => Array ( ) ) [LegInfo] => Array ( [State] => Clean [AdjustedCapacity] => 136 [EquipmentType] => 733 [EquipmentTypeSuffix] => C [ArrivalTerminal] => Array ( ) [ArrvLTV] => 120 [Capacity] => 136 [CodeShareIndicator] => Array ( ) [DepartureTerminal] => Array ( ) [DeptLTV] => 180 [ETicket] => true [FlifoUpdated] => true [IROP] => false [Status] => Normal [Lid] => 140 [OnTime] => Array ( ) [PaxSTA] => 2012-06-11T14:20:00 [PaxSTD] => 2012-06-11T13:10:00 [PRBCCode] => BAC-OTP [ScheduleServiceType] => J [Sold] => 37 [OutMoveDays] => 0 [BackMoveDays] => 0 [LegNests] => Array ( ) [LegSSRs] => Array ( [LegSSR] => Array ( [0] => Array ( [SSRNestCode] => AVIH [SSRLid] => 3 [SSRSold] => 0 [SSRValueSold] => 0 ) [1] => Array ( [SSRNestCode] => BIKE [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [2] => Array ( [SSRNestCode] => BLD [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [3] => Array ( [SSRNestCode] => DEAF [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [4] => Array ( [SSRNestCode] => INFT [SSRLid] => 13 [SSRSold] => 0 [SSRValueSold] => 0 ) [5] => Array ( [SSRNestCode] => PETC [SSRLid] => 4 [SSRSold] => 0 [SSRValueSold] => 0 ) [6] => Array ( [SSRNestCode] => PREG [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [7] => Array ( [SSRNestCode] => SPF [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [8] => Array ( [SSRNestCode] => UM [SSRLid] => 100 [SSRSold] => 0 [SSRValueSold] => 0 ) [9] => Array ( [SSRNestCode] => WCHC [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [10] => Array ( [SSRNestCode] => WCHR [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [11] => Array ( [SSRNestCode] => WEAP [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) ) ) [OperatingFlightNumber] => Array ( ) [OperatedByText] => Array ( ) [OperatingCarrier] => Array ( ) [OperatingOpSuffix] => Array ( ) [SubjectToGovtApproval] => false [MarketingCode] => Array ( ) [ChangeOfDirection] => false [MarketingOverride] => false ) [OperationsInfo] => Array ( [nil] => true ) ) ) [PaxBags] => Array ( ) [PaxSeats] => Array ( ) [PaxSSRs] => Array ( ) [PaxSegments] => Array ( ) [PaxTickets] => Array ( ) [SalesDate] => 9999-12-31T00:00:00Z [SegmentSellKey] => 0B~ 117~ ~~OTP~06/11/2012 13:10~BLQ~06/11/2012 14:20 ) ) [JourneySellKey] => 0B~ 117~ ~~OTP~06/11/2012 13:10~BLQ~06/11/2012 14:20 ) ) ) [1] => Array ( [DepartureDate] => 2012-06-13T00:00:00 [DepartureStation] => OTP [ArrivalStation] => BLQ [Journeys] => Array ( [Journey] => Array ( [State] => New [NotForGeneralUse] => false [Segments] => Array ( [Segment] => Array ( [State] => Clean [ActionStatusCode] => HK [ArrivalStation] => BLQ [CabinOfService] => Array ( ) [ChangeReasonCode] => Array ( ) [DepartureStation] => OTP [PriorityCode] => Array ( ) [SegmentType] => Array ( ) [STA] => 2012-06-13T14:20:00 [STD] => 2012-06-13T13:10:00 [International] => false [FlightDesignator] => Array ( [CarrierCode] => 0B [FlightNumber] => 117 [OpSuffix] => Array ( ) ) [XrefFlightDesignator] => Array ( [nil] => true ) [Fares] => Array ( ) [Legs] => Array ( [Leg] => Array ( [State] => Clean [ArrivalStation] => BLQ [DepartureStation] => OTP [STA] => 2012-06-13T14:20:00 [STD] => 2012-06-13T13:10:00 [FlightDesignator] => Array ( [CarrierCode] => 0B [FlightNumber] => 117 [OpSuffix] => Array ( ) ) [LegInfo] => Array ( [State] => Clean [AdjustedCapacity] => 136 [EquipmentType] => 733 [EquipmentTypeSuffix] => C [ArrivalTerminal] => Array ( ) [ArrvLTV] => 120 [Capacity] => 136 [CodeShareIndicator] => Array ( ) [DepartureTerminal] => Array ( ) [DeptLTV] => 180 [ETicket] => true [FlifoUpdated] => true [IROP] => false [Status] => Normal [Lid] => 140 [OnTime] => Array ( ) [PaxSTA] => 2012-06-13T14:20:00 [PaxSTD] => 2012-06-13T13:10:00 [PRBCCode] => BAC-OTP [ScheduleServiceType] => J [Sold] => 28 [OutMoveDays] => 0 [BackMoveDays] => 0 [LegNests] => Array ( ) [LegSSRs] => Array ( [LegSSR] => Array ( [0] => Array ( [SSRNestCode] => AVIH [SSRLid] => 3 [SSRSold] => 0 [SSRValueSold] => 0 ) [1] => Array ( [SSRNestCode] => BIKE [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [2] => Array ( [SSRNestCode] => BLD [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [3] => Array ( [SSRNestCode] => DEAF [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [4] => Array ( [SSRNestCode] => INFT [SSRLid] => 13 [SSRSold] => 0 [SSRValueSold] => 0 ) [5] => Array ( [SSRNestCode] => PETC [SSRLid] => 4 [SSRSold] => 0 [SSRValueSold] => 0 ) [6] => Array ( [SSRNestCode] => PREG [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [7] => Array ( [SSRNestCode] => SPF [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [8] => Array ( [SSRNestCode] => UM [SSRLid] => 100 [SSRSold] => 0 [SSRValueSold] => 0 ) [9] => Array ( [SSRNestCode] => WCHC [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [10] => Array ( [SSRNestCode] => WCHR [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [11] => Array ( [SSRNestCode] => WEAP [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) ) ) [OperatingFlightNumber] => Array ( ) [OperatedByText] => Array ( ) [OperatingCarrier] => Array ( ) [OperatingOpSuffix] => Array ( ) [SubjectToGovtApproval] => false [MarketingCode] => Array ( ) [ChangeOfDirection] => false [MarketingOverride] => false ) [OperationsInfo] => Array ( [nil] => true ) ) ) [PaxBags] => Array ( ) [PaxSeats] => Array ( ) [PaxSSRs] => Array ( ) [PaxSegments] => Array ( ) [PaxTickets] => Array ( ) [SalesDate] => 9999-12-31T00:00:00Z [SegmentSellKey] => 0B~ 117~ ~~OTP~06/13/2012 13:10~BLQ~06/13/2012 14:20 ) ) [JourneySellKey] => 0B~ 117~ ~~OTP~06/13/2012 13:10~BLQ~06/13/2012 14:20 ) ) ) [2] => Array ( [DepartureDate] => 2012-06-15T00:00:00 [DepartureStation] => OTP [ArrivalStation] => BLQ [Journeys] => Array ( [Journey] => Array ( [State] => New [NotForGeneralUse] => false [Segments] => Array ( [Segment] => Array ( [State] => Clean [ActionStatusCode] => HK [ArrivalStation] => BLQ [CabinOfService] => Array ( ) [ChangeReasonCode] => Array ( ) [DepartureStation] => OTP [PriorityCode] => Array ( ) [SegmentType] => Array ( ) [STA] => 2012-06-15T14:20:00 [STD] => 2012-06-15T13:10:00 [International] => false [FlightDesignator] => Array ( [CarrierCode] => 0B [FlightNumber] => 117 [OpSuffix] => Array ( ) ) [XrefFlightDesignator] => Array ( [nil] => true ) [Fares] => Array ( ) [Legs] => Array ( [Leg] => Array ( [State] => Clean [ArrivalStation] => BLQ [DepartureStation] => OTP [STA] => 2012-06-15T14:20:00 [STD] => 2012-06-15T13:10:00 [FlightDesignator] => Array ( [CarrierCode] => 0B [FlightNumber] => 117 [OpSuffix] => Array ( ) ) [LegInfo] => Array ( [State] => Clean [AdjustedCapacity] => 136 [EquipmentType] => 733 [EquipmentTypeSuffix] => C [ArrivalTerminal] => Array ( ) [ArrvLTV] => 120 [Capacity] => 136 [CodeShareIndicator] => Array ( ) [DepartureTerminal] => Array ( ) [DeptLTV] => 180 [ETicket] => true [FlifoUpdated] => false [IROP] => false [Status] => Normal [Lid] => 140 [OnTime] => Array ( ) [PaxSTA] => 2012-06-15T14:20:00 [PaxSTD] => 2012-06-15T13:10:00 [PRBCCode] => BAC-OTP [ScheduleServiceType] => J [Sold] => 38 [OutMoveDays] => 0 [BackMoveDays] => 0 [LegNests] => Array ( ) [LegSSRs] => Array ( [LegSSR] => Array ( [0] => Array ( [SSRNestCode] => AVIH [SSRLid] => 3 [SSRSold] => 0 [SSRValueSold] => 0 ) [1] => Array ( [SSRNestCode] => BIKE [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [2] => Array ( [SSRNestCode] => BLD [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [3] => Array ( [SSRNestCode] => DEAF [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [4] => Array ( [SSRNestCode] => INFT [SSRLid] => 13 [SSRSold] => 0 [SSRValueSold] => 0 ) [5] => Array ( [SSRNestCode] => PETC [SSRLid] => 4 [SSRSold] => 0 [SSRValueSold] => 0 ) [6] => Array ( [SSRNestCode] => PREG [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [7] => Array ( [SSRNestCode] => SPF [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [8] => Array ( [SSRNestCode] => UM [SSRLid] => 100 [SSRSold] => 1 [SSRValueSold] => 1 ) [9] => Array ( [SSRNestCode] => WCHC [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [10] => Array ( [SSRNestCode] => WCHR [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) [11] => Array ( [SSRNestCode] => WEAP [SSRLid] => 999 [SSRSold] => 0 [SSRValueSold] => 0 ) ) ) [OperatingFlightNumber] => Array ( ) [OperatedByText] => Array ( ) [OperatingCarrier] => Array ( ) [OperatingOpSuffix] => Array ( ) [SubjectToGovtApproval] => false [MarketingCode] => Array ( ) [ChangeOfDirection] => false [MarketingOverride] => false ) [OperationsInfo] => Array ( [nil] => true ) ) ) [PaxBags] => Array ( ) [PaxSeats] => Array ( ) [PaxSSRs] => Array ( ) [PaxSegments] => Array ( ) [PaxTickets] => Array ( ) [SalesDate] => 9999-12-31T00:00:00Z [SegmentSellKey] => 0B~ 117~ ~~OTP~06/15/2012 13:10~BLQ~06/15/2012 14:20 ) ) [JourneySellKey] => 0B~ 117~ ~~OTP~06/15/2012 13:10~BLQ~06/15/2012 14:20 ) ) ) ) ) ) 
```

# c# - 如何删除xml文件中的项目

> ID：10464128
> 
> 赞同：1
> 
> 时间：2012-05-05T17:10:10.320
> 
> 标签：c#, xml, windows-phone-7

嗨，我需要删除 XML 文件中的一个项目，我可以毫无问题地添加它，但想知道如何调整文件中的一个项目。我需要删除名称为 Mike 的项目和日期，我该如何实现？

编辑：我得到一个`NullReferenceException`

这是我的 XML

```
<Items>
 <Item>
  <Name>Mike</Name>
  <Date>5/4/2000</Date>
 </Item>
 <Item>
  <Name>Martin</Name>
  <Date>5/4/2010</Date>
 </Item>
</Items> 
```

这是我正在尝试的代码

```
public void deleteElement()
    {
        //Get users private store info
        IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();
        IsolatedStorageFileStream isoStream;

        //open selected file
        isoStream = new IsolatedStorageFileStream("Item.xml", System.IO.FileMode.Open, System.IO.FileAccess.Read, isoStore);
        XDocument xml = XDocument.Load(isoStream);
        isoStream.Close();

        //Find section
        XElement sectionElement = xml.Descendants("Item").Where(c => c.Attribute("Name").Value.Equals("Mike")).FirstOrDefault();

        //Find item and remove it
        sectionElement.Elements("Item").Where(c => c.Attribute("Name").Value.Equals("Mike")).FirstOrDefault().Remove();
        isoStream.Close();  //Seems unnecessary but it's needed.

        //Write xml file
        isoStream = new IsolatedStorageFileStream("Item.xml", FileMode.Create, FileAccess.Write, isoStore);
        xml.Save(isoStream);
        isoStream.Close();

    } 
```

如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:02:54.040

```
xml.Root.Elements("Item")
        .Where(item => item.Element("Name").Value == "Mike")
        .FirstOrDefault()
        .Remove(); 
```

产生：

```
<Items>
  <Item>
    <Name>Martin</Name>
    <Date>5/4/2010</Date>
  </Item>
</Items> 
```

注意几点：

*   开始在名为“Item”的根元素（“Items”）下搜索直接元素，而不是它们的子元素。
*   在 item 元素下，查找具有相关值（“Mike”）的“Name”*元素*（不是属性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:09:22.580

使用[这个 Xml 库](https://github.com/ChuckSavage/XmlLib/)，你可以这样写：

```
XElement mike = xml.Root.XPathElement("Item[Name='Mike']");
mike.Remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:25:10.047

从粗略的一瞥看来，您似乎在尝试两次检索相同的元素。

```
// Retrieve the desired Item element
XElement sectionElement = xml.Descendants("Item").Where(c => c.Attribute("Name").Value.Equals("Mike")).FirstOrDefault();
// Retrieve (and remove) the desired Item element
// This line will fail, as there is no Item descendants of the Item element
sectionElement.Elements("Item").Where(c => c.Attribute("Name").Value.Equals("Mike")).FirstOrDefault().Remove(); 
```

只用一根线怎么样？

```
xml.Descendants("Item").Where(c => c.Attribute("Name").Value.Equals("Mike")).FirstOrDefault().Remove(); 
```

顺便说一句：我不认识使用的方法，但“名称”可能不是属性，而是元素。

# jquery - jQuery自定义事件不起作用

> ID：10464132
> 
> 赞同：0
> 
> 时间：2012-05-05T17:11:15.247
> 
> 标签：jquery

我希望 JS 文件通过 jQuery 事件相互通信，并认为这会很简单，但遇到了一个我认为我需要帮助的问题。

基本上，我使用 ID 为“#nav-controller”的 DOM 元素充当两个 JS 文件之间的信使。第一个文件——我已经检查过它*是*第一个执行的——监听两个自定义事件：

```
function external_command_listener () {
    // Click Handling
    $( '#nav-controller' ).on( 'clickhandler' , function ( e , param ) {
        alert ("registering clicks to: " + param );
        register_qs_click_handler ( param );
    });
    // Menu Control handling
    $( '#nav-controller' ).on( 'controlframework' , function ( e , param ) {
        alert ('registering menu handling to: ' + param );
        register_qs_control_framework ( param );
    });
} 
```

现在已经设置好了。第二个文件使用 trigger() 有效地调用第一个文件中的函数。这是代码：

```
function Initialise_Navigation () {
    navTemplate = Template_File_Name ( 'navigation' );
    $.get( navTemplate , function (data) {
        $( '#page-nav-system' ).html(data);
        $( '#nav-controller' ).trigger( 'clickhandler' , ['#application li'] ); // register a click handler
        $( '#nav-controller' ).trigger( 'controlframework' , ['.quicksand-cntrl'] ); // register a control framework 
```

我已经使用 Chrome 的调试器进行了测试，它确实执行了 Initialise_Navigation() 函数，并且显然运行了两个触发器语句，但第一个文件中的侦听器设置从未激活。我也尝试了一个通用的“点击”事件，但这也失败了。

有任何想法吗？我已经走到尽头了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:18:53.310

我可能过于简化了——但是，为什么你需要在两个 JS*文件*之间实现“通信” ？它们是某种面向对象的模式吗？它们是否在不同的范围内运行？

在任何情况下，您都可以简单地将事件处理程序绑定到对象（或您在 DOM 树中拥有的`document`任何其他包含*父对象）。*

```
// Even binding
$('#parentalElement').bind('customEventString', function(event, params... ) {
  // Handle the event
});

// Trigger 
$('#foo').trigger('custom', params ); 
```

# css - CSS - 照片库

> ID：10464133
> 
> 赞同：0
> 
> 时间：2012-05-05T17:11:18.017
> 
> 标签：css, class, html, background-image

我正在开发一个简单的照片库/图书馆。到目前为止，我只关注 CSS。我有一个 2 x 3 的 div 网格（即将成为照片图标）。

我想要做的是给每个 div 图标一个独特的背景图像。现在我将如何做到这一点，因为每个图标 div 都使用相同的类“photo_holder”？

如果我更改该课程的背景......它会更改所有图像。我不想要的是'photo_holder_1'和'photo_holder_2'，等等。

photo_holder 包含很多元素（我不想重复的主要原因）。

有没有给我的每个 div 一个唯一的 ID，所以我可以用 CSS 来替换背景图像？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:15:35.347

每个都可以有唯一的 id 和多个类。

```
<div id="hld_1" class="holder frame size etc"> .. </div> 
```

然后在css中

右一个元素的效果：

```
#hld_1 { background ... } 
```

所有元素都有

```
.holder { ... } 
```

# iframe - 访问动态 iFrame 的 Chrome 扩展程序

> ID：10464136
> 
> 赞同：1
> 
> 时间：2012-05-05T17:11:26.467
> 
> 标签：iframe, google-chrome-extension

我正在尝试编写一个非常简单的 Google chrome 扩展程序来删除特定网站的特定 div。但是，该特定 div 是该页面上动态呈现的 iFrame 的一部分，因此我无法访问该元素。

我尝试在我的清单 json 中使用 "all_frames"=true 但它没有效果。经过研究，我发现这是因为 iFrame 是由网站动态呈现的。我没有运行任何后台页面，因为我根本不想交流，只需删除即可。

无论如何我可以（不使用setTmeout）动态加载内容脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:22:27.230

如果“仍在 DOM 中但实际上已经消失”足够接近您的需求，您可以改用 CSS 来实现它；只需使用与 div 和 apply 匹配的选择器，`display: none;`它就会在添加时被隐藏。

事实上，如果您的扩展程序可以这样实现，您最好将其编写为用户样式而不是 Chrome 扩展程序。[http://userstyles.org/help](http://userstyles.org/help)有这方面的信息。

# c++ - 是否有最常见的有害命令列表？

> ID：10464137
> 
> 赞同：1
> 
> 时间：2012-05-05T17:11:36.637
> 
> 标签：c++, system, signals, protection

我正在为孩子、程序员制作交互式学习系统。系统会自动编译并运行孩子们提交的代码（c++）。它将被广泛使用，所以我担心更大的“孩子”会尝试使用诸如`system`, `signal`, `exec`,之`fork`类的命令来破坏系统。即使格式化硬盘也不会那么可怕，因为我会有自动备份，但我想限制最常见的有害命令。

是否有一些列表，或者更有经验的程序员可以命名这些有害命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:15:19.917

您无法通过检测这些命令来保护您的系统，这是因为在 C++ 中您可以使用直接内存访问（即通过`reinterpret_cast`）或自修改代码来调用这些命令或与系统交互。相反，编译后，在没有足够访问权限的单独进程中运行程序来造成伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:15:26.783

一些命令是合法的，但可能会被有害地使用（如`cp`or `rm`）。

也许您可以将[受限外壳](http://www.gnu.org/software/bash/manual/html_node/The-Restricted-Shell.html)设置为用户的登录外壳。然后，您可以拥有一个包含一组可接受命令的目录。

但这并非万无一失：一个有动力的黑客可能会破坏您的系统。

## 编辑

如果您的意思是[*系统调用*](http://en.wikipedia.org/wiki/System_call)而不是*命令*，那么有动机的黑客总是可以调用它们（可能使用`asm`, `dlsym`, 函数指针，...或跳转到某些内存...）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:19:50.577

您的建议可以通过编写等效的汇编代码，动态复制被禁止的功能并执行复制等来轻松颠覆。

考虑在系统调用粒度上使用白名单。考虑一个程序纯粹通过系统调用与外界交互。因此，任何不包含系统调用的代码都可以被“信任”。鉴于此，您可以使用动态或静态迂回技术来检测所有系统调用并将您想要允许的系统调用列入白名单。

# php - 拖放JS组件

> ID：10464140
> 
> 赞同：0
> 
> 时间：2012-05-05T17:11:40.943
> 
> 标签：php, javascript, jquery, mobile, jquery-mobile

我正在做一个简单的拖放网站（设计移动页面），我想知道是否有库或框架支持拖放组件，让我的生活更轻松。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:47:26.667

我同意@Zenklys，jQuery 将是一种选择！太强大了！我只是学了一点。

***在jQuery Selectors***上查看这个很棒的 tut，它演示了如何选择和操作 html 元素 - [http://www.youtube.com/watch?v=7eQI90xYez0](http://www.youtube.com/watch?v=7eQI90xYez0)。**UI 库**与大量的小部件（如对话框、滑块、日期选择器等）具有可拖动、可放置、可调整大小、可选择和可排序的交互。我相信您会发现其中一些在您的应用程序中很有用。

**可拖动**- 请参阅[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

**droppable** - 见[http://jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

除了出色的文档外，它们还有非常好的页面示例/源代码，并且大多数 UI 资产都可以通过单行调用来调用。

无论如何，希望它有用！祝你好运，

盖兹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:20:59.830

*   [jQuery mobile](http://jquerymobile.com/)似乎有拖放插件。
*   [Sencha touch](http://www.sencha.com/products/touch/)似乎有原生支持。

# xml - 拆分 NMAP XML 文件

> ID：10464144
> 
> 赞同：0
> 
> 时间：2012-04-30T18:18:37.107
> 
> 标签：xml, nmap

我有一些非常大的 NMAP XML 保存文件，我正在尝试对其进行一些后期处理。不幸的是，由于文件的大小，我没有成功（至少，在接近宇宙热寂的一段时间之前不会成功）。

是否可以将一个 NMAP XML 文件拆分为多个较小的文件？例如，将 B 类的扫描拆分为它的组成类 Cs？即使只是分成两半也会有帮助。

FWIW ...我对 C、awk/sed 和 Python 非常熟悉。只是没有那么多 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:35:35.563

您可以使用像[BaseX](http://basex.org/)这样的工具，它是一个 XML 数据库引擎。它还允许您使用 XPath/XQuery 查询数据，以便您可以提取所需的信息位，而无需拆分原始文件。

# iphone - 以编程方式设置 UIToolBar

> ID：10464147
> 
> 赞同：1
> 
> 时间：2012-05-05T17:12:03.053
> 
> 标签：iphone, ios, uibarbuttonitem, uitoolbar

我正在尝试在子类 ABPersonViewController 的类中以编程方式创建工具栏。这是我所做的。

```
UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithTitle:@"Item" style:UIBarButtonItemStyleBordered  target:self     action:@selector(onToolbarTapped:)];
NSArray *items = [NSArray arrayWithObjects: customItem, nil];
[self.navigationController.toolbar setItems:items animated:NO];
//[self setToolbarItems:[NSArray arrayWithObject:items]];
self.navigationController.toolbar.barStyle = UIBarStyleBlackOpaque;
[self.navigationController setToolbarHidden:NO animated:YES]; 
```

工具栏不出现。我在这里做错了什么。

编辑：我编辑了我的代码如下

```
UIToolbar *toolbar = [[[UIToolbar alloc] init]autorelease];
toolbar.barStyle = UIBarStyleBlackOpaque;
toolbar.tintColor = [UIColor blackColor];
toolbar.frame = CGRectMake(0, 372, self.view.frame.size.width, 45);
UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithTitle:unblockContact style:UIBarButtonItemStyleBordered   target:self     action:@selector(onToolbarTapped:)];
customItem.tintColor = [UIColor blackColor];
NSArray *items = [NSArray arrayWithObjects:customItem, nil];
[toolbar setItems:items animated:NO];
[self.view addSubview:toolbar];
[customItem release]; 
```

如何让 barbuttonitem 占据整个工具栏。用户不应该觉得工具栏上有 barbuttonitem。我可以这样做，还是有其他方法？需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:10:05.517

UIToolbar 是 UIView 的子类，您应该将其添加为任何其他视图，以下方法是成功使用的方法，

```
UIToolbar *toolbar = [[UIToolbar alloc] init];
toolbar.frame = CGRectMake(0, 0, self.view.frame.size.width, 45);
NSMutableArray *items = [[NSMutableArray alloc] init];
[items addObject:[[UIBarButtonItem alloc] initWithObjects...]];
[toolbar setItems:items animated:NO];
[self.view addSubview:toolbar]; 
```

# asp.net-mvc - 实体框架 - 查看 2 断开连接的实体更新

> ID：10464148
> 
> 赞同：0
> 
> 时间：2012-05-05T17:12:15.857
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我有一个用户实体类：

```
public class User
{
    [Key]
    public int UserId { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public string SecretQuestion { get; set; }
    public string SecretAnswer { get; set; }
    public string FullName { get; set; }
    public string Email { get; set; }
    public string Phone { get; set; }
    public Nullable<byte> UserType { get; set; }
    public Nullable<bool> Enabled { get; set; }
    public Nullable<DateTime> Created { get; set; }
    public Nullable<DateTime> Modified { get; set; }

    public void LoadWCPModel(UserWCPModel model)
    {
        Username = model.Username;
        Password = model.Password;
        SecretQuestion = model.SecretQuestion;
        SecretAnswer = model.SecretAnswer;
        UserType = model.UserType;
        Enabled = model.Enabled;
    }
} 
```

我的 Web 配置门户 (WCP) 有一个模型类：

```
public class UserWCPModel
{
    [Key]
    public int UserId { get; set; }

    [Display(Name = "Username")]
    [Required]
    public string Username { get; set; }

    [Display(Name = "Password")]
    [Required]
    public string Password { get; set; }

    [Display(Name = "Secret question")]
    [Required]
    public string SecretQuestion { get; set; }

    [Display(Name = "Secret answer")]
    [Required]
    public string SecretAnswer { get; set; }

    [Display(Name = "User type")]
    [Required]
    public Nullable<byte> UserType { get; set; }

    [Display(Name = "Enabled")]
    [Required]
    public Nullable<bool> Enabled { get; set; }

    [ScaffoldColumn(false)]
    public Nullable<DateTime> Created { get; set; }

    [ScaffoldColumn(false)]
    public Nullable<DateTime> Modified { get; set; }

    /// Parameterless constructor for MVC model binder.
    public UserWCPModel()
    {
        Created = DateTime.UtcNow;
    }

} 
```

目标：获取 UserWCPModel 并仅保存该模型中的数据，而不损害其他应用程序（电子邮件、电话、全名）填充的数据，同时完全避免从数据库重新加载数据。

首先，一个 HttpPost 编辑操作：

```
 [HttpPost]
    public ActionResult Edit(UserWCPModel model)
    {
        if (ModelState.IsValid)
        {
            WrappedE result;
            repo.Update(model, out result);
            if (result.ErrorCode != ErrorCodes.Success)
            {
                /// Add error handling;
            }
            return RedirectToAction("Index");
        }
        return View(model);
    } 
```

如您所见，我只通过传递 UserWCPModel 从存储库调用 Update 方法。

现在这里是存储库方法：

```
 public void Update(UserWCPModel model, out WrappedE result)
    {
        User user = new User();           
        user.UserId = model.UserId;        
        db.Users.Attach(user);
        user.LoadWCPModel(model);
        user.Modified = DateTime.UtcNow;
        SaveToDb(out result);
    } 
```

1.  我构造了空白的用户对象。
2.  我为其分配了从模型中获取的 ID。
3.  我将它附加到 DbSet 用户。
4.  我将数据从 UserWCPModel 加载到 User 对象。
5.  我设置了修改时间（不重要）。
6.  我调用 db.SaveChanges() （这就是 SaveToDb 所做的）。

目标达成！没有第二个 SELECT 查询。不保存与模型无关的数据。没有为每个属性调用 IsModified。对先前输入的超出模型范围的数据没有损害。

我对它进行了如此糟糕的调整，以至于我不得不在这里分享它，并希望得到一些评论：D

希望有人会发现这很有用:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:57:06.217

如果您使用此方法更新实体，则需要非常小心；更简洁如果您尝试在同一上下文中两次更新同一实体会发生什么。（剧透：当你尝试附加一个已经附加的实体时，你会得到一个异常）

此外，我建议您在所有查询中添加`.AsNoTracking()`（请参阅[我在 AsNoTracking 上的博客文章](http://blog.staticvoid.co.nz/2012/04/entity-framework-and-asnotracking.html)），以便在您实际执行更新之前对只读实体进行操作。这也将有助于避免将实体双重附加到您的上下文中。

我想这种方法在我看来就像你正踏上危险的土地，除非你出于性能原因绝对需要使用这种方法。在我看来，首先从数据库中获取实体并手动更新属性并保存它会好得多。从长远来看，这可能会让您头疼。

# ruby - rbenv 没有正确切换 Ruby 版本

> ID：10464149
> 
> 赞同：2
> 
> 时间：2012-05-05T17:12:30.100
> 
> 标签：ruby, vagrant, rbenv

按照 Github 页面上描述的设置`rbenv`并运行`rbenv global 1.9.2-p290`命令后，`ruby -v`仍然输出 1.8.7。当我尝试运行 bundle 时，由于新的 Ruby 1.9 哈希语法而出错，所以我知道它仍在使用 Ruby 1.8 运行。

我在 Vagrant Railscast 之后遇到了这个问题。所以这是在剧集中的流浪虚拟盒子里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:51:35.637

您必须重新启动 shell 才能使其正常工作。rbenv 中的一些魔法包含在你的 shell 的启动脚本中，除非你手动调用脚本，否则它只会在你完成安装*后启动的 shell 中工作。*

另一个可能的原因是，如果您跳过了将代码添加到 shell 启动脚本的步骤。要完全激活 rbenv，您必须添加`eval "$(rbenv init -)"`到适当的脚本：`~/.profile`如果您使用的是 bash，或者`~/.zshrc`如果您使用的是 zsh。

此外，如果您想`rbenv`为*所有*用户启用，您可以将它们添加到这些文件的系统范围版本中，存储在`/etc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:08:13.140

嗯，这件事曾经发生在我身上，当时我有一个流浪`.rbenv-version`文件。你`rbenv local`以前可能不小心创造了一个吗？或者您尝试运行的项目是否带有一个（尽管如果它需要 1.9 功能那会很奇怪）。

# php - ajax 和 dom pdf

> ID：10464151
> 
> 赞同：0
> 
> 时间：2012-05-05T17:12:43.350
> 
> 标签：php, dompdf

我正在通过在 codeigniter 项目中使用 dompdf 创建 pdf。如果我直接从 url 调用我的控制器或单击锚标记它工作正常。如果我尝试通过 ajax 调用我的控制器，则不会创建 pdf。**但是 ajax 成功调用了控制器，它返回的数据如下`%PDF-1.31 0 obj<< /Type /Catalog/Outlines 2 0 R`

```
public function addQuotation()
{ 
 $data['categorylist']=$categorylist;
 $this->load->helper(array('dompdf', 'file'));
 $html = $this->load->view('category_list_pdf', $data, true);
 $filename="category_list";
 pdf_create($html, $filename);  
 $data = pdf_create($html, '', false);
 write_file('name', $data); 
} 
```

# javascript - URI 模板：javascript 中是否有 rfc-6570 实现？

> ID：10464152
> 
> 赞同：12
> 
> 时间：2012-05-05T17:12:43.770
> 
> 标签：javascript, node.js, express, uritemplate

我正在使用节点和快递。要注册一个控制器，我调用：

```
app.get('/user/:id', function (req, res) {...}); 
```

但我想用[rfc-6570 的](https://www.rfc-editor.org/rfc/rfc6570/)方式来做：

```
app.get('/user/{id}', function (req, res) {...}); 
```

我在谷歌代码上搜索了一个 python 实现，但没有找到 JavaScript 的任何内容（除了谷歌代码到[http://www.snellspace.com/wp/?p=831](http://www.snellspace.com/wp/?p=831)的死链接）。

一般来说，URI 模板并不像第一眼看上去那么容易。查看 RFC 中的示例。

PS：我也需要客户端上的 URI 模板。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T06:44:34.003

我一直在清理[http://code.google.com/p/uri-templates/wiki/Implementations的实现列表 -](http://code.google.com/p/uri-templates/wiki/Implementations) [https://github.com/marc-portier/uri-](https://github.com/marc-portier/uri-templates)有一个 JS[模板](https://github.com/marc-portier/uri-templates)，但我不确定它是否实现了 RFC，也不知道它的质量如何。

请注意，我们已经开始在这里发布测试： [https ://github.com/uri-templates/uritemplate-test](https://github.com/uri-templates/uritemplate-test)

所以如果你想检查它，你可以从那里开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-30T10:33:57.027

截至 2014 年 6 月，这些 JavaScript 实现似乎最完整（规范的第 4 级）并[经过测试](https://github.com/uri-templates/uritemplate-test)。这三个还同时支持浏览器和 node.js。

*   [fxa/uritemplate-js](https://github.com/fxa/uritemplate-js)：`npm install uritemplate`
*   [geraintluff/uri-templates](https://github.com/geraintluff/uri-templates)（也进行变量提取，也就是去替换）：`npm install uri-templates`
*   URI.js[包括 URI-Templates](http://medialize.github.io/URI.js/uri-template.html)：`npm install URIjs`或`bower install uri.js`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T18:55:28.037

关于快速路由器部分，我建议在超模式中使用您的 uri 模板[（](http://json-schema.org)阅读[更多](https://brandur.org/elegant-apis)）...

然后，您还可以从 express.js 支持的路由器的正则表达式中受益。关于**解析参数**，您需要一个 RFC 6570 实现，例如[https://github.com/geraintluff/uri-templates](https://github.com/geraintluff/uri-templates) ...

下面是一些 .js 代码，用于说明使用 RFC 6570 重写[超模式](http://json-schema.org) 以将其转换为快速 js 路由器：

> ```
>  var hyperschema = {
>   "$schema": "http://json-schema.org/draft-04/hyper-schema",
>   "links": [
>     {
>       "href": "{/id}{/ooo*}{#q}",
>       "method": "GET",
>       "rel": "self",
>       "schema": {
>         "type": "object",
>         "properties": {
>           "params": {
>             "type": "object",
>             "properties": {
>               "id": {"$ref": "#/definitions/id"}
>             },
>             "additionalProperties": false
>           }
>         },
>         "additionalProperties": true
>       }
>     }
>   ],
>   "definitions": {
>     "id": {
>       "type": "string",
>       "pattern": "[a-z]{0,3}"
>     }
>   }
> } 
> ```

```
 var deref = require('json-schema-deref');
  var tv4 = require('tv4');
  var url = require('url');
  var rql = require('rql/parser');

// DOJO lang AND _
function getDottedProperty(object, parts, create) {
    var key;
    var i = 0;

    while (object && (key = parts[i++])) {
        if (typeof object !== 'object') {
            return undefined;
        }
        object = key in object ? object[key] : (create ? object[key] = {} : undefined);
    }

    return object;
}
function getProperty(object, propertyName, create) {
    return getDottedProperty(object, propertyName.split('.'), create);
}
function _rEscape(str) {
  return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}

function getPattern(k, ldo, customCat) {
  // ...* = explode = array
  // ...: = maxLength
  var key = ((k.slice(-1) === '*') ? k.slice(0,-1) : k).split(':')[0];
  var cat = (customCat) ? customCat : 'params'; // becomes default of customCat in TS
  var pattern = '';
  if (typeof ldo === 'object' && ldo.hasOwnProperty('schema')) {
    var res = getProperty(ldo.schema, ['properties',cat,'properties',key,'pattern'].join('.'));
    if (res) {
      console.log(['properties',cat,'properties',key,'pattern'].join('.'),res);
      return ['(',res,')'].join('');
    }
  }
  return pattern;
}
function ldoToRouter(ldo) {
  var expression = ldo.href.replace(/(\{\+)/g, '{') // encoding
    .replace(/(\{\?.*\})/g, '') // query
    .replace(/\{[#]([^}]*)\}/g, function(_, arg) {
      // crosshatch
      //console.log(arg);
      return ['(?:[/]*)?#:',arg,getPattern(arg,ldo,'anchor')].join('');
    })
    .replace(/\{([./])?([^}]*)\}/g, function(_, op, arg) {
      // path seperator
      //console.log(op, '::', arg, '::', ldo.schema);
      return [op,':',arg,getPattern(arg,ldo)].join('');
    });
    return {method: ldo.method.toLowerCase(), args:[expression]};
}

deref(hyperschema, function(err, fullSchema) {
  console.log('deref hyperschema:',JSON.stringify(fullSchema));
  var router = fullSchema.links.map(ldoToRouter);

  console.log('router:',JSON.stringify(router));
}); 
```

# java - 关于锁教程

> ID：10464156
> 
> 赞同：-2
> 
> 时间：2012-05-05T17:13:28.293
> 
> 标签：java, multithreading

我正在浏览java提供的关于锁的高级线程部分，我已经开发了代码..

```
// A simple lock example.
import java.util.concurrent.locks.*;

class LockDemo {
    public static void main(String args[]) {
        ReentrantLock lock = new ReentrantLock();
        new LockThread(lock, "A");
        new LockThread(lock, "B");        
    }
}

// A shared resource.
class Shared {
    static int count = 0;
}

// A thread of execution that increments count.
class LockThread implements Runnable {
    String name;
    ReentrantLock lock;

    LockThread(ReentrantLock lk, String n) {
        lock = lk;
        name = n;       
        new Thread(this).start();
    }

    public void run() {
        System.out.println("Starting " + name);
        try {
            // First, lock count.
            System.out.println(name + " is waiting to lock count.");
            lock.lock();
            System.out.println(name + " is locking count.");
            Shared.count++;
            System.out.println(name + ": " + Shared.count);
            // Now, allow a context switch -- if possible.
            System.out.println(name + " is sleeping.");
            Thread.sleep(1000);
        } catch (InterruptedException exc) {
            System.out.println(exc);
        } finally {
            // Unlock
            System.out.println(name + " is unlocking count.");
            lock.unlock();
        }
    }
} 
```

我的疑问是，正如我们在课堂上看到的那样`LockDemo`，我们正在调用

```
new LockThread(lock, "A"); 
new LockThread(lock, "B"); 
```

不能在编码中用简单和完整的术语来表达，以便我能掌握更多请指教如何用更简单的形式表达它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:29:49.700

当我看到这样的线程代码时，它总是让我很生气。你是对的，这是一个不好的例子，它的作用并不像它应该的那样明显。让我烦恼的部分是`Runnable`使用自己启动线程的实现以及它在构造函数中启动线程的事实。

我会这样重写它：

```
// A simple lock example.
import java.util.concurrent.locks.*;

class LockDemo {
    public static void main(String args[]) {
        ReentrantLock lock = new ReentrantLock();
        LockThread lt1 = new LockThread(lock, "A");
        LockThread lt2 = new LockThread(lock, "B");
        Thread t1 = new Thread(lt1);
        Thread t2 = new Thread(lt2);
        t1.start();
        t2.start();
    }
}

// A shared resource.
class Shared {
    static int count = 0;
}

// A thread of execution that increments count.
class LockThread implements Runnable {
    String name;
    ReentrantLock lock;

    LockThread(ReentrantLock lk, String n) {
        lock = lk;
        name = n;       
    }

    public void run() {
        System.out.println("Starting " + name);
        try {
            // First, lock count.
            System.out.println(name + " is waiting to lock count.");
            lock.lock();
            System.out.println(name + " is locking count.");
            Shared.count++;
            System.out.println(name + ": " + Shared.count);
            // Now, allow a context switch -- if possible.
            System.out.println(name + " is sleeping.");
            Thread.sleep(1000);
        } catch (InterruptedException exc) {
            System.out.println(exc);
        } finally {
            // Unlock
            System.out.println(name + " is unlocking count.");
            lock.unlock();
        }
    }
} 
```

现在更清楚的是`main`，您正在创建两个线程任务（其类实现的对象`Runnable`）并使用它们来启动两个线程。

# javascript - 使用简单数组中的jquery自动完成从一开始就自动完成完全匹配

> ID：10464160
> 
> 赞同：11
> 
> 时间：2012-05-05T17:13:55.480
> 
> 标签：javascript, jquery, arrays, autocomplete

如何使用 jquery 自动完成和简单数组的输入从字符串的开头启用精确匹配？

如果我在数组中有以下内容：

*   聪明的
*   聪明过头
*   智能乐园
*   不够聪明
*   很聪明

如果我在文本输入中输入“sma...”，我必须只显示 smart 和 smartland，而不是其他。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T17:25:04.470

您只需将源参数修改为一个函数以满足您的需要。像这样：

> [http://jsfiddle.net/UKgD6/](http://jsfiddle.net/UKgD6/)

* * *

更新：添加代码来回答：

```
var acList = ['smart', 'oversmart', 'smartland', 'undersmart', 'verysmart'];
$('#ac').autocomplete({
    source: function (request, response) {
        var matches = $.map(acList, function (acItem) {
            if (acItem.toUpperCase().indexOf(request.term.toUpperCase()) === 0) {
                return acItem;
            }
        });
        response(matches);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-28T14:52:57.147

这样做的方法记录在[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

```
<script>
    var tags = [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" ];
    $( "#autocomplete" ).autocomplete({
      source: function( request, response ) {
              var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
              response( $.grep( tags, function( item ){
                  return matcher.test( item );
              }) );
          }
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T17:18:27.477

您可以使用正则表达式将输入的子字符串与您拥有的数组中的值进行匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T17:52:43.713

JQuery 有太多的插件。只需在上面撒一点正则表达式并写下这样的东西（我没有测试它，但我之前做过类似的事情）：

```
$('#someTextInput').keyup( function(){
    var regExMatch = new RegEx( '^' + $(this).val() );
    $_LIs = $('#someUl li');
    $_LIs.hide();
    $_LIs.each( function(){
        if( this.innerText.match(regExMatch) ) { $(this).show(); }
    } );
} ); 
```

您可以删除参数`'^' +`中的`new RegEx`以恢复您描述为有问题的行为。`'^'`表示行/字符串选择的开始，因此 's' 将不匹配，除非它位于开头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-30T03:36:48.240

自从上一个答案被接受以来，这种情况发生了变化。现在有一个`lookupFilter`选项可以做到这一点，而且要简单得多。从[https://stackoverflow.com/a/23239873/1204434](https://stackoverflow.com/a/23239873/1204434)，只需将其添加到您的选项列表中：

```
lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                return suggestion.value.toLowerCase().indexOf(queryLowerCase) === 0;
            }, 
```

# c# - 无法弄清楚如何修复 C# 中查询表达式错误中的语法错误（缺少运算符）

> ID：10464163
> 
> 赞同：0
> 
> 时间：2012-05-05T17:14:00.503
> 
> 标签：c#, oledbcommand, oledbdataadapter

我遇到了上面写的错误的问题，找不到修复它的确切方法。

```
OleDbDataAdapter dataAdapter = new OleDbDataAdapter("Select count(*) from [contractors$] where " + category + " like '*@name*'", eh.Connection);
dataAdapter.SelectCommand.Parameters.Add("@name", OleDbType.VarChar).Value = "*" + name + "*";
OleDbCommand command = dataAdapter.SelectCommand;
OleDbDataReader reader = command.ExecuteReader(); 
```

确切的错误是..

> 查询表达式 'like ' *@name* '' 中的语法错误（缺少运算符）。

我也已经在寻找这个问题的解决方案，并试图调整它们以尝试完成这项工作，但没有运气（上面的一个是尝试之一）

非常感谢提前！

好的，所以我现在将代码更改为此..

```
OleDbDataAdapter dataAdapter = new OleDbDataAdapter("Select count(*) from `contractors$` where " + category + " LIKE @name", eh.Connection);
dataAdapter.SelectCommand.Parameters.Add("@name", OleDbType.VarChar).Value = "%" + name + "%";
OleDbCommand command = dataAdapter.SelectCommand;
OleDbDataReader reader = command.ExecuteReader(); 
```

但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:16:26.313

参数不能包含在 SQL 字符串文字中。使用连接来构建字符串：

```
"... LIKE ('%' + @name + '%') ..." 
```

**更新**

似乎 的值为`category`null 或为空，创建了无效的 SQL 语句：

```
 Select count(*) from [contractors$] where like '@name'
                                         ^^^ no category here 
```

# ogre - 未解析的外部符号 _WinMain@16

> ID：10464164
> 
> 赞同：2
> 
> 时间：2012-05-05T17:14:06.510
> 
> 标签：ogre

我尝试编译以下代码（来自 Felix Kerger 的 Ogre3d 初学者指南）

```
#include "Ogre\ExampleApplication.h"    

class Example1 : public ExampleApplication
{
public:
void createScene()
{Ogre::Entity* ent =
mSceneMgr->createEntity("MyEntity","Sinbad.mesh");
mSceneMgr->getRootSceneNode()->attachObject(ent);
}
};

int main (void)
{
Example1 app;
app.go();
return 0;
} 
```

所以编译的过程不起作用。我目前正在使用 Visual Studio 2010 和 OgreSDK_vc10_v1-7-3。

错误是

```
1>InitializeBuildStatus:
1>  Touching "obj\Debug\OgreApp3.unsuccessfulbuild".
1>ClCompile:
1>  main.cpp
1>d:\ogresdk_vc10_v1-7-3\include\ogre\exampleframelistener.h(343): warning C4244: '+=': conversion from 'double' to 'Ogre::Real', possible loss of data 
1>d:\ogresdk_vc10_v1-7-3\include\ogre\exampleframelistener.h(344): warning C4244: '-=' : conversion from 'double' to 'Ogre::Real', possible loss of data
1>d:\ogresdk_vc10_v1-7-3\include\ogre\exampleframelistener.h(348): warning C4244: 'argument' : conversion from 'double' to 'Ogre::Real', possible loss of data
1>d:\ogresdk_vc10_v1-7-3\include\ogre\exampleframelistener.h(349): warning C4244: 'argument' : conversion from 'double' to 'Ogre::Real', possible loss of data
1>d:\ogresdk_vc10_v1-7-3\include\ogre\exampleframelistener.h(454): warning C4244: '-=' : conversion from 'double' to 'Ogre::Real', possible loss of data
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup
1>bin\Debug\\OgreApp3.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:10.57
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-21T14:01:09.443

您项目的右下角

-> 属性链接器-> 子系统

用“CONSOLE(/SUBSYSTEM:CONSOLE)”改变你的子系统

像这样[https://www.dropbox.com/s/li3qnzw152snizo/ogre.png](https://www.dropbox.com/s/li3qnzw152snizo/ogre.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T05:36:30.030

将 main 函数的签名替换为以下内容：

```
INT WINAPI WinMain( HINSTANCE hInst, HINSTANCE, LPSTR strCmdLine, INT ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:21:03.070

您的编译器认为该程序是一个 Windows 应用程序，但您的源代码是一个命令行应用程序。

# php - regexunicode - 使用 preg_match_all 时删除重音字符

> ID：10464170
> 
> 赞同：0
> 
> 时间：2012-05-05T17:15:35.427
> 
> 标签：php, regex, unicode, utf-8, preg-match-all

我有标题中描述的问题。如果我使用

```
preg_match_all('/\pL+/u', $_POST['word'], $new_word); 
```

我输入*hello à 和 ì*返回的 new_word 是 *hello 和 * 为什么？

有人建议我指定我想以这种方式转换的所有字符

```
preg_match_all('/\pL+/u', $_POST['word'], 'aäeëioöuáéíóú'); 
```

，但我希望我的应用程序适用于所有现有的口音（对于多语言网站）。你能帮助我吗？谢谢。

**编辑：**我指定我使用这个正则表达式来净化标点符号。它很好地净化了所有标点符号，但 unicode 字符错误返回，实际上甚至没有返回。

**编辑2：**对不起，我解释得很糟糕。问题不在 preg_match_all 而是在

```
str_word_count($my_key, 2, 'aäáàeëéèiíìoöóòuúù'); 
```

我必须手动指定重音字符，但我认为还有很多其他字符。正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:46:09.553

`\pL`应该匹配所有 utf8 字符和空格。可以肯定的是，这`$_POST['word']`是一个用 utf8 编码的字符串。如果不是，请在匹配之前尝试`utf8_encode()`或检查 HTML 表单的编码。在我的测试中，您的示例就像一个魅力。

您可以将其与 一起使用`count()`以获取单词数。那么你不需要关心可能的字符。`\pL`会为你做这件事。这应该可以解决问题：

```
$string = "áll thât words wíth ìntérnâtiønal çhårs";

preg_match_all('/\pL+/u', $string, $words);
echo count($words[0]); // returns: 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:21:03.420

尝试使用[多字节字符串](http://www.php.net/manual/en/book.mbstring.php)PHP 库中`mb_ereg_match()`的（而不是`preg_match()`） 。它专为处理多字节字符串而设计。

# android - 如何在屏幕中央对齐单选按钮

> ID：10464171
> 
> 赞同：16
> 
> 时间：2012-05-05T17:15:37.600
> 
> 标签：android, tabs

我在我的应用程序中使用单选按钮作为选项卡。

我已经为它加载了图像，但它们向左侧对齐。如何使它们在中心对齐。

![在此处输入图像描述](../Images/5691cbfe035585221d3472c9054e430b.png)

这就是我的 XML 文件的外观

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@android:id/tabhost" 
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <FrameLayout android:id="@android:id/tabcontent"
      android:layout_width="fill_parent" 
      android:layout_height="wrap_content"
      android:layout_weight="1" 
      android:padding="20dip" 
      android:background="#fff"/>

    <RadioGroup android:layout_width="fill_parent"
      android:layout_height="wrap_content" 
      android:orientation="horizontal"
      android:checkedButton="@+id/allcontacts"
      android:id="@+id/contactgroup">

      <RadioButton android:id="@+id/allcontacts" 
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="center" 
      android:layout_weight="1"/>

      <RadioButton
          android:id="@+id/categories"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center"
          android:layout_weight="1"/>

      <RadioButton android:id="@+id/favourites" 
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="center" 
      android:layout_weight="1" />

    </RadioGroup>

    <TabWidget android:id="@android:id/tabs"
      android:layout_width="fill_parent" 
      android:layout_height="wrap_content"
      android:layout_weight="0" android:visibility="gone" />
  </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-27T08:44:53.683

我之前也遇到过类似的问题，我弄明白了，所以我试着为你解释一下。

![运行时截图](../Images/497749fb727af1dca9b8713352106113.png)

上面是我的应用程序截图，如你所见，我也做了同样的事情，我有一个菜单对齐屏幕底部，它们是一个 RadioGroup 和其中的三个 RadionButton，我希望每个菜单图标对齐 RadionButton 的中心，阴影图像（ 9-patch) 按钮检查事件触发时一起显示。
起初，我使用**android:button**属性引用了一个可绘制选择器，该选择器有选中和取消选中两种可绘制状态，但我无法对齐菜单图标中心并使阴影图像由 RadionButton 填充，它们看起来像这样：

![在此处输入图像描述](../Images/20389f885bf7966f5e4551842220196a.png)

我尝试在 RadionButton 中包含**android:layout_gravity=center**和**android:gravity=center**，但它也没有生效。之后，我的同事告诉我**android:button**属性是指前景而不是背景，然后我使用**android:background**而不是**android:button**并且它起作用了，下面是我的代码：

```
<RadioGroup android:layout_width="match_parent" android:layout_height="60dp"
        android:orientation="horizontal" android:background="@drawable/menu_bg">

    <RadioButton android:layout_width="0dp" android:layout_height="match_parent"
                 android:layout_weight="1" android:button="@null" android:checked="true"
                 android:background="@drawable/menu_item_selector" />

    <RadioButton android:layout_width="0dp" android:layout_height="match_parent"
                 android:layout_weight="1" android:button="@null"
                 android:background="@drawable/menu_item_selector" />

    <RadioButton android:layout_width="0dp" android:layout_height="match_parent"
                 android:layout_weight="1" android:button="@null"
                 android:background="@drawable/menu_item_selector" />

</RadioGroup> 
```

**menu_item_selector**很重要，因为它有**重力**设置：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/menu_item_layer_list" android:state_checked="true" />
    <item android:drawable="@drawable/menu_item_layer_list" android:state_pressed="true" />
    <item>
        <bitmap android:src="@drawable/menu_item_off" android:gravity="center" />
    </item>
</selector> 
```

因为当用户打开按钮状态时我有两个图像要绘制，阴影背景图像和图标活动状态图像，所以我使用图层列表来实现它，活动图标也有**重力**设置，下面是**menu_item_layer_list**代码：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/menu_bg_pressed" />
    <item>
        <bitmap android:src="@drawable/menu_item_on" android:gravity="center" />
    </item>
</layer-list> 
```

我不知道该解决方案是否完美，因为我总是将其实现为视图并绘制自己。但是我认为Android SDK提供了更方便的组件让我们完成xml配置的工作，我们应该学习和使用它。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-03T17:33:48.090

您可以使用空视图来均匀地填充单选按钮之间的空间。在这种情况下，我有 3 个单选按钮，它们看起来居中、美观且整洁。

```
<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <View
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="" />

    <View
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:checked="true"
        android:gravity="center"
        android:text="" />

    <View
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="" />

    <View
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" />
</RadioGroup> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-05T18:03:01.353

尝试`android:gravity="center"`在每个 RadioButton 的 xml 中。

我看到你是 wrap_content，所以理论上不应该做任何事情，但看起来图标是均匀划分的，也许 RadioGroup 将空间均匀划分，所以使用 android:gravity 会产生效果。

我想值得一试。

**编辑**

试试这个：

```
 <RadioButton android:id="@+id/allcontacts" 
  android:layout_width="0dp"
  android:layout_height="wrap_content"
  android:layout_gravity="center"
  android:marginLeft="20dp" 
  android:gravity="center"
  android:layout_weight="1"/> 
```

你将不得不使用`android:marginLeft="20dp"`它来让它正确居中，但这会让你做你想做的事情。这次我复制了您的布局并进行了测试，所以我*知道*它有效！:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-12T04:18:19.550

您可以将 RadioButton 放在 FrameLayout 中并将它们居中：

```
<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/gray_percent"
    android:orientation="horizontal" >

    <FrameLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content" 
         android:layout_weight="1">

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"

            android:button="@drawable/rb_temp1"
            android:checked="true"
            android:gravity="center" />
    </FrameLayout>

    <FrameLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content" 
         android:layout_weight="1">

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"

            android:button="@drawable/rb_temp1"
            android:gravity="center" />
    </FrameLayout>

</RadioGroup> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-15T08:59:04.793

我尝试了以上所有方法，但它不起作用。

我找到了一个更好的解决方案，我想分享。将您的按钮设置为`@null`; 然后将drawable添加到`android:drawableTop`或任何其他类型的位置。这将使我们能够将drawables设置到radioButton的其他位置。添加一些`padding` 或`drawablePadding`使其不会粘在按钮/文本的任何一侧。

```
android:background="@drawable/background_paint"
android:drawableTop="@drawable/shape"
android:button="@null" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-23T17:57:06.420

将 android:gravity="center" 放在 RadioGroup 标签上。这有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-05T17:26:35.383

尝试`android:layout_gravity="center_horizontal"`在您的`RadioGroup`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-20T03:18:54.953

就我而言，我的单选按钮内容正确对齐。我通过将 android:background 设置为某个值（例如 @null 或某种颜色）让它们居中对齐。下面是我的布局

```
<LinearLayout
    android:id="@+id/tab"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal" >

    <RadioGroup
        android:paddingTop="5dp"
        android:id="@+id/radioGroupAsTab"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_gravity="center_vertical|center_horizontal"
        android:gravity="center_vertical|center_horizontal"
        android:background="@color/v3_header_bg"
        android:fadingEdge="none"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/rbDiagnose"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="@null"
            android:button="@null"
            android:checked="true"
            android:drawableTop="@drawable/v3_tab_diagnose"
            android:layout_gravity="center_vertical|center_horizontal"
            android:gravity="center_vertical|center_horizontal"
            android:text="@string/tabCaption_health_maintenance"
            android:textColor="@color/radio_astab_changecolor"
            android:textSize="10sp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/rbHistory"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="@null"
            android:button="@null"
            android:drawableTop="@drawable/v3_tab_history"
            android:layout_gravity="center_vertical|center_horizontal"
            android:gravity="center_vertical|center_horizontal"
            android:text="@string/tabCaption_history"
            android:textColor="@color/radio_astab_changecolor"
            android:textSize="10sp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/rbChart"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="@null"
            android:button="@null"
            android:drawableTop="@drawable/v3_tab_chart"
            android:layout_gravity="center_vertical|center_horizontal"
            android:gravity="center_vertical|center_horizontal"
            android:text="@string/tabCaption_graph"
            android:textColor="@color/radio_astab_changecolor"
            android:textSize="10sp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/rbCyclopedia"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="@null"
            android:button="@null"
            android:drawableTop="@drawable/v3_tab_encyclopedia"
            android:layout_gravity="center_vertical|center_horizontal"
            android:gravity="center_vertical|center_horizontal"
            android:text="@string/tabCaption_encyclopedia"
            android:textColor="@color/radio_astab_changecolor"
            android:textSize="10sp"
            android:textStyle="bold" />

        <RadioButton
            android:id="@+id/rbSetting"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="@null"
            android:button="@null"
            android:drawableTop="@drawable/v3_tab_setting"
            android:layout_gravity="center_vertical|center_horizontal"
            android:gravity="center_vertical|center_horizontal"
            android:text="@string/tabCaption_info"
            android:textColor="@color/radio_astab_changecolor"
            android:textSize="10sp"
            android:textStyle="bold" />
    </RadioGroup>
</LinearLayout> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-27T06:23:32.127

```
 <RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >
       <RadioButton
        android:id="@+id/rb1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="One"/>

        <RadioButton
        android:id="@+id/rb2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Two"/>
 </RadioGroup> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-10T15:40:39.097

我在我的中使用了这条线，`RadioGroup`它工作正常！

```
android:gravity="center|left" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-31T12:55:49.410

在我的情况下它在对面，我只是把 android:paddingLeft="0dp" 和它的工作，所以你应该尝试 android:paddingRight="0dp" 单选按钮

# c - c指针，如何将它/它们释放到函数中

> ID：10464173
> 
> 赞同：2
> 
> 时间：2012-05-05T17:15:53.660
> 
> 标签：c, function, pointers

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void getinfo(unsigned int a, unsigned int b, char **pStr);

int main(){
    unsigned int len_max = 8;
    unsigned int current_size = 0;
    current_size = len_max;
    char *host, *user;
    char *pStr = malloc(len_max);
    if(pStr == NULL){
        perror("\nMemory allocation\n");
        return EXIT_FAILURE;
    }
    printf("Inserisci hostname: ");
    getinfo(len_max, current_size, &pStr);
    if((host=malloc(strlen(pStr)+1 * sizeof(char))) == NULL) abort();
    strncpy(host, pStr, strlen(pStr)+1);
    printf("Inserisci username: ");
    getinfo(len_max, current_size, &pStr);
    if((user=malloc(strlen(pStr)+1 * sizeof(char))) == NULL) abort();
    strncpy(user, pStr, strlen(pStr)+1);
    printf("\nHostname: %s\nUsername: %s\n", host, user);
    free(pStr);
    free(host);
    free(user);
    return EXIT_SUCCESS;
}

void getinfo(unsigned int a, unsigned int b, char **pStr){
    unsigned int i = 0;
    int c = EOF;
    while((c = getchar()) != '\n'){
        (*pStr)[i++] = (char)c;
        if(i == b){
            b = i+a;
            if((*pStr = realloc(*pStr, b)) == NULL){
                perror("\nMemory allocation error\n");
                exit(EXIT_FAILURE);
            }
        }
    }
    (*pStr)[i]='\0';
} 
```

问题是如果 realloc 失败我必须退出（因为我无法分配内存）。但在退出之前，需要释放所有使用过的指针。
问题是，如果函数第一次失败，则只有 1 个指针必须被释放 (pStr)。
但如果它第二次失败，则必须释放 2 个指针（pstr 和用户）。
我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:32:40.120

As already noted, if you are going to exit, then all practical modern O/S will release the allocated memory before exit. It was not always thus; early versions of AmigaDOS, IIRC, did not reclaim allocated memory automatically until reboot.

This is a simple case. There are more complex cases, such as you are parsing a file into memory and the 579^(th) memory allocation fails, and you'd like to release the previous 578 memory allocations so that the user can try again.

In such cases, you have to keep a record of each memory allocation that is relevant (which may itself require some memory allocation — though if you're parsing a file, you probably have a master structure which contains the complete description) and then release all the allocated data.

In your example, if this was not a `main()` function and if you did not abort on memory allocation error, then you would need to ensure that the three allocated pointers are released on exit from the function. The standard tricks for that include:

1.  Initialize the pointers to 0 so they can be freed reliably:

    ```
    char *host = 0;
    char *user = 0; 
    ```

2.  When using `realloc()`, do not assign the result to the expression passed as the first parameter:

    Do NOT do:

    ```
    ptr = realloc(ptr, newsize); 
    ```

    If (when) `ptr` is the only reference to the allocated memory and the reallocation fails, you've just leaked memory; there is no way to release the memory that is still allocated to you.

    Use:

    ```
    void *newptr = realloc(oldptr, newsize);
    if (newptr == 0)
        ...recover from memory allocation failure
    oldptr = newptr; 
    ```

    The trouble with the simpler version is that you've just thrown away the only reference to the allocated memory. (Note that your code falls into the dangerous/leaking pattern).

3.  Note that pretty much every function that acquires resources must either release the acquired resource before returning, or make the resource available to some other part of the program so that the other part can release the resource when it is done with it.

    The 'make available' operation might be returning the acquired resource (think of it as memory, but it could be a file descriptor, directory stream, or any of a large number of other allocated resources) to the calling function, or storing it in a structure that was passed to the current function, or copying it to a global or (file) static variable, or even stashing it in a (function) static variable so if the function is called again, it has some resource available on entry.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T17:37:35.267

As a few people have pointed out, modern OS's reclaim memory on exit. However, it is considered a best practice to free your resources anyway, as this makes debugging easier. For example, if you are trying to find a leak and you use a tool like valgrind, all the memory you don't properly free (even if by the program logic, this doesn't matter) will appear as leaks. There are some large API's around that notoriously don't do this, and they make tracking leaks in applications which use them a nightmare.

Also, in some specialized environments it might be important to clean up after yourself. Therefore, it's a good habit to get into now.

A clean-up technique you'll see occasionally (eg, in the linux kernel) is something I think of as the "bail and release" pattern. It's one of the few (perhaps: only) contexts where `goto` is still considered acceptable. It depends upon you being able to free your resources in the opposite order you allocated them. Usually this is in the context of a single function, in this case `main()`:

```
#include <stdlib.h>

int main(void) {
    int exit_status = EXIT_FAILURE;

    char *s1, *s2, *s3;

    s1 = malloc(100);
    if (!s1) return EXIT_FAILURE;

    s2 = malloc(100);
    if (!s2) goto endB;

    s3 = malloc(100);
    if (!s3) goto endA;

    exit_status = EXIT_SUCCESS;

    /* do whatever */

    free(s3);
endA:
    free(s2);
endB:
    free(s1);
    return exit_status;
} 
```

To explain: if allocating `s1` fails, we just return -- there is nothing to clean-up. But if allocating `s2` fails, we goto `endB`, freeing `s1`. If allocating `s3` fails, we goto `endA`, which will free `s2` and `s1`. Finally, if everything succeeded, we do whatever, and afterward, all three pointers will be freed. If this were a normal function, we might be returning a pointer, so there would be a separate return for that before the "end" bits, which would complete with "return null" instead.

Nb: please don't take this as a licence to make free-wheeling use of `goto`!

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T17:40:13.907

This is more of a general C language advice than a specific answer, but it's too long to go in comment.

The usual way to write C in the presence of dynamic resource management is to `goto` suitable labels which are followed by the relevant deallocation calls:

```
int f(int n)
{
    void * p1, * p2, * p3;
    int result = -1;

    p1 = malloc(n);

    if (!p1) goto END0;
    if (n % 2) goto END1;

    p2 = malloc(3 * n);

    if (!p2) goto END1;
    if (n % 7 == 0) goto END2;

    p3 = malloc(7 * n + 8);

    if (!p3) goto END2;

    if (do_useful_stuff(p1, p2, p3) == -1) goto END3;
    result = compute_more_stuff(p1, p2, p3);

END3:
    free(p3);
END2:
    free(p2);
END1:
    free(p1);
END0:
    return result;
} 
```

The alternative is to split up your code into very small functions that do only one thing at a time and handle resource allocation in an ad-hoc fashion:

```
int small_function(void ** p)
{
    void * q = malloc(13);

    if (some_init(&q) == -1)
    {
        free(q);    // ad-hoc exit management
        return -1;
    }

    int n = complex_computation(q);
    free(q);
    return n;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-05T17:44:11.137

Yeah, you don't have to free anything if this is the whole program.

The whole reason to free memory is so it can be reused somewhere later in the program. Even if your program went on from this point, you've only allocated a small number of bytes. It's OK to allocate them and keep them forever.

In fact, you don't even have to do the arithmetic you're doing there to carve out exact-sized mallocs, you could say Oh, usernames and hostnames are never more than like 30 chars, just to be sure I'll allocate 256 char blocks. Oh wait your max is 8 chars, whatever. Or even just make a global buffer 256 chars or 8 chars long. Then make sure your strncpy()s never go past len_max or else you're risking a buffer overflow hack.

meanwhile that getinfo() looks painful. Try something like fgets(mybuffer, len_max, stdin).

Last I checked, the executable doesn't even bother to 'free' all unfreed blocks at the end, it just walks away. The VM system returns all the used memory (including the stack and program code) to the OS, and the process vaporizes and it's over. The malloc()ed blocks are just a pattern of bytes on that memory, and it's all forgotten.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-05T17:19:06.447

您不必在退出前释放动态分配的内存。操作系统将使所有内存可供下一个进程使用。

# java - 例外：没有找到适合 jdbc:mysql 的驱动程序

> ID：10464175
> 
> 赞同：0
> 
> 时间：2012-05-05T17:16:09.177
> 
> 标签：java, mysql

我正在尝试使用这个简单的代码连接到 mysql 数据库。

```
import java.sql.*;
public class OdbcAccessConnection_1 {
  public static void main(String [] args) {
    Connection con = null;
    try {
      Class.forName("sun.jdbc.odbc.JdbcOdbcDriver") ;
    // Connect with a url string
      con = DriverManager.getConnection("jdbc:mysql://localhost/books","root","1234");
      System.out.println("Connection ok.");
      con.close();
    } catch (Exception e) {
      System.err.println("Exception: "+e.getMessage());
      e.printStackTrace();
    }
  }
} 
```

它所做的只是告诉我连接是否正常。我的数据库没有问题，这个代码/连接在 netbeans 上工作。我得到的 StackTrace 是 -

```
the java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/books
        at java.sql.DriverManager.getConnection(DriverManager.java:602)
        at java.sql.DriverManager.getConnection(DriverManager.java:185)
        at OdbcAccessConnection_1.main(OdbcAccessConnection_1.java:13) 
```

我正在使用 64 位 Windows 7 并使用 64 位连接器/ODBC 驱动程序的 5.1 版本。在 ODBC 上似乎一切都已连接并且测试成功。但是当我运行代码时，我得到了上面的堆栈跟踪。我错过了一些非常简单的东西，因此非常感谢任何输入和帮助。谢谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T13:19:57.880

转到 netbeans 或您正在使用的任何 IDE 中的“运行”菜单 =>“设置项目配置”然后“自定义”。然后选择左侧下拉菜单中的“库”添加适当的驱动程序文件 jar 或文件夹。单击确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T18:44:13.700

最佳解决方案 bhai 徽标 -：

转到 JCreator 配置菜单，然后单击选项，然后单击 JDK 配置文件，然后双击您使用的任何版本，然后单击添加存档，然后转到该路径 -> C:\Program Files\MySQL\MySQL Tools for 5.0\java \lib\mysql-connector-java-5.0.4-bin.jar 按确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:47:36.713

`jdbc:mysql://localhost/books`是您使用 MySQL JDBC 驱动程序直接连接到 MySQL 的 URL。JDBC/ODBC 驱动程序使用的 URL 不同（请参阅[http://docs.oracle.com/javase/1.3/docs/guide/jdbc/getstart/bridge.doc.html](http://docs.oracle.com/javase/1.3/docs/guide/jdbc/getstart/bridge.doc.html)）。

不鼓励使用此 JDBC/ODBC 桥接器，并且只能用于访问不提供任何 JDBC 驱动程序的数据库。这不是 MySQL 的情况。使用[Connector/J](http://dev.mysql.com/downloads/connector/j/)，他们的 JDBC 驱动程序。在类路径中拥有此驱动程序后，您可以使用当前正在使用的 URL，并从类路径中删除 JDBC/ODBC 驱动程序（以及从代码中加载它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:16:09.667

这个错误让我毛骨悚然，因为我忘记添加***Class.forName***行。mysql 驱动程序 jar 在类路径上，但没有人隐式加载驱动程序类，因此会话工厂找不到任何加载的驱动程序类。因此这条线的目的。

在你的情况下，你加载了错误的东西。如果您打算将它与***jdbc:mysql://***连接一起使用，它应该是***Class.forName("com.mysql.jdbc.Driver") 。***

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T05:52:28.353

```
con = DriverManager.getConnection("jdbc:mysql://localhost:3306/books","root","1234"); 
```*

# java - 使用 HIPI 运行 hadoop .. -libjars

> ID：10464179
> 
> 赞同：0
> 
> 时间：2012-05-05T17:16:41.523
> 
> 标签：java, hadoop, cloudera

我是 java 新手并试图运行一个使用 HIPI 的 MR：http://hipi.cs.virginia.edu/[我](http://hipi.cs.virginia.edu/) 使用了如下所述的命令： [http ://hadoop.apache.org/common/ docs/r0.20.2/mapred_tutorial.html](http://hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html) 我正在使用 hadoop 0.20.2

我的命令看起来像： hadoop jar grayscalefromfile_exc.jar grayscalefromfile_exc.StubDriver -libjars hipi-0.0.1.jar imgs imgsOut1

路径如下所示：

```
 --
   --grayscalefromfile_exc.jar
   --hipi-0.0.1.jar 
```

我得到的错误： org.apache.hadoop.util.ToolRunner.run ( ToolRunner.java:65) at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79) at grayscalefromfile_exc.StubDriver.main(StubDriver.java:103) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org. apache.hadoop.util.RunJar.main(RunJar.java:186) 引起：java.lang.ClassNotFoundException：hipi.imagebundle。mapreduce.ImageBundleInputFormat at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang .ClassLoader.loadClass(ClassLoader.java:306) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ... 还有 9 个

不用说，hipi-0.0.1.jar，里面有路径：hipi/imagebundle/mapreduce/ImageBundleInputFormat.java

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:14:43.647

libjars 将给定的 jars 上传到集群，然后使它们在每个映射器/reducer 实例的类路径上可用

如果要向驱动程序客户端类路径添加其他 jar，则需要使用 HADOOP_CLASSPATH 环境变量：

```
#> export HADOOP_CLASSPATH=hipi-0.0.1.jar
#> hadoop jar grayscalefromfile_exc.jar grayscalefromfile_exc.StubDriver -libjars hipi-0.0.1.jar imgs imgsOut1 
```

当我运行它时我的输出（错误与我没有 hipi 图像包文件的事实有关）：

```
cswhite@Studio-1555:~/workspace/sandbox/so-hipi/target$ export $HADOOP_CLASSPATH=/home/cswhite/Downloads/hipi-0.0.1.jar
cswhite@Studio-1555:~/workspace/sandbox/so-hipi/target$ echo $HADOOP_CLASSPATH
/home/cswhite/Downloads/hipi-0.0.1.jar
cswhite@Studio-1555:~/workspace/sandbox/so-hipi/target$ hadoop jar so-hipi-0.0.1-SNAPSHOT.jar StubDriver -libjars ~/Downloads/hipi-0.0.1.jar images output
num of args: 2:images,output
****hdfs://localhost:9000/user/cswhite/images
12/05/14 14:06:34 INFO input.FileInputFormat: Total input paths to process : 1
12/05/14 14:06:34 INFO mapred.JobClient: Cleaning up the staging area hdfs://localhost:9000/tmp/hadoop-hadoop/mapred/staging/cswhite/.staging/job_201205141351_0003
12/05/14 14:06:34 ERROR security.UserGroupInformation: PriviledgedActionException as:cswhite cause:java.io.IOException: not a hipi image bundle
Exception in thread "main" java.io.IOException: not a hipi image bundle
    at hipi.imagebundle.HipiImageBundle.readBundleHeader(HipiImageBundle.java:322)
    at hipi.imagebundle.HipiImageBundle.openForRead(HipiImageBundle.java:388)
    at hipi.imagebundle.AbstractImageBundle.open(AbstractImageBundle.java:82)
    at hipi.imagebundle.AbstractImageBundle.open(AbstractImageBundle.java:55)
    at hipi.imagebundle.mapreduce.ImageBundleInputFormat.getSplits(ImageBundleInputFormat.java:61)
    at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:962)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
    at StubDriver.run(StubDriver.java:53)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at StubDriver.main(StubDriver.java:57)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:13:44.673

我能够通过在主类中使用以下 API 来解决类似的问题

```
DistributedCache.addFileToClassPath(new Path("/path/application.jar"), conf); 
```

jar 必须存在于 hdfs path`/path/application.jar`中。

# data-mining - 从原始数据中获取趋势

> ID：10464184
> 
> 赞同：0
> 
> 时间：2012-05-05T17:17:38.097
> 
> 标签：data-mining, trend

让我们有很多看起来像的数据

```
chain of digits  time
23 67 34 23 54 | 12:34
23 54          | 12:42
78 96 23       | 12:46
56 93 23 54    | 12:48 
```

我需要找到数字链趋势（增长、下降、稳定）。在我的示例中，它可能是 23 54 或 23。我还想在趋势之间找到不同的相关性。数据非常大。它可能是数十亿行。你能推荐任何书籍文章或算法吗？请注意，我只需要有关此类数据类型的趋势和相关性的信息。我不需要基本的数据挖掘书籍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:19:52.767

这是算法的要点。它当然没有被淘汰或测试，它可能不完整。我只是把它扔在这里作为一个可能的起点。

似乎最具挑战性的问题是在数十亿行上运行算法所需的*时间*，其次可能是*内存*限制。

我也相信解决这个问题所涉及的基本任务在于“将一组数字与另一组数字进行比较”以定位共享集的单一操作。

因此，我是否可以建议以下（粗略）方法，以同时处理*时间*和*内存*：

```
(1) Consolidate multiple sets into a single, larger set. 
```

即，取 100 个连续的集合（在您的示例中，`23, 67, 34, 23, 54`、`23, 54`、`78, 96, 23`和以下 97 个集合），然后简单地将它们合并为一个**集合**（忽略重复项）。

```
(2) Give each *consolidated* set from (1) a label (or index),
and then map this set (by its label) to the original sets that compose it. 
```

这样，您将能够检索（查找）原始的单个集合`23, 67, 34, 23, 54`等。

```
(3) The data is now denormalized - there are a much smaller number of sets, and each set is much larger. 
```

现在，算法进入了一个新阶段。

```
(4) Develop an algorithm to look for matching sequences between any two of these larger sets. 
```

会有很多误报；但是，希望您的数据的性质是误报不会“破坏”通过这种方法获得的效率。

我没有提供算法来执行 2 个单独的集合之间的匹配；我假设您可以自己想出一个（对两组进行排序等）。

```
(5) For every possible matching sequence found in (4), iterate through the individual sets that compose
the two larger sets being compared, weeding out false positives. 
```

我怀疑上述步骤可以显着优化，但这是基本思想。

此时，您将拥有组成被比较的两个较大集合的所有原始集合之间的所有匹配序列。

```
(6) Execute steps (4) and (5) for every pair of large sets constructed in (2). 
```

现在，您将拥有所有匹配的序列 - 带有重复项。

```
(7) Remove duplicates from the set of matching sequences. 
```

只是一个想法。

# asp.net-mvc-3 - 将 Web 模块注入 ASP.NET MVC3 应用程序

> ID：10464186
> 
> 赞同：0
> 
> 时间：2012-05-05T17:17:54.153
> 
> 标签：asp.net-mvc-3, inversion-of-control

我正在开发一个 ERP 应用程序，并希望以这样的方式构建它，以便以后可以将一些其他 MVC Web 模块注入其区域。这就是像 ORCHARD 这样的东西。我需要知道任何可用的此类解决方案吗？

为了进一步阐述我的问题，请考虑我的名为“MyERP”的应用程序在其区域中有两个子模块。1\. 人力资源管理。2\. 疲劳风险管理。并将此应用程序发布给我的客户。发布后，我决定为（AMS）考勤管理系统添加另一个模块。所以我想以这样的方式构建 MyERP，我的客户可以通过 MyERP Web 界面安装这个 AMS 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:37:50.740

您可以查看[以下文章](http://www.codeproject.com/Articles/358360/NET-4-0-ASP-NET-MVC-3-plug-in-architecture-with-e)，该文章说明了如何实现示例插件系统。该项目使用[以下文章](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)中介绍的自定义虚拟路径提供程序，它允许将剃刀视图作为资源嵌入到单独的程序集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:57:51.203

我发现[这篇](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)文章对我的问题很有帮助。

# objective-c - 分段错误的根源在哪里：11？

> ID：10464187
> 
> 赞同：1
> 
> 时间：2012-05-05T17:17:55.933
> 
> 标签：objective-c, struct, segmentation-fault, objective-c++

请帮忙，这是我在这里遇到的 3 个错误之一，我根本找不到它们在哪里：我知道它们与我的结构有关，但我不知道如何找到它们......这是第一部分有错误的代码：

```
-(BOOL)detectCollisionBetweenEntityAtIndex:(int)index1 andEntityAtIndex:(int)index2
{
  if ((([entityArray objectAtIndex:index1].entityX >= [entityArray objectAtIndex:index2].entityX) && ([entityArray objectAtIndex:index1].entityX <= ([entityArray objectAtIndex:index2].entityX + [entityArray objectAtIndex:index2].entityWidth)) && ([entityArray objectAtIndex:index1].entityY >= [entityArray objectAtIndex:index2].entityY) && ([entityArray objectAtIndex:index1].entityY <= ([entityArray objectAtIndex:index2].entityY + [entityArray objectAtIndex:index2].entityLength))) || (([entityArray objectAtIndex:index1].entityX + [entityArray objectAtIndex:index1].entityWidth >= [entityArray objectAtIndex:index2].entityX) && ([entityArray objectAtIndex:index1].entityX + [entityArray objectAtIndex:index1].entityWidth <= ([entityArray objectAtIndex:index2].entityX + [entityArray objectAtIndex:index2].entityWidth)) && ([entityArray objectAtIndex:index1].entityY + [entityArray objectAtIndex:index1].entityLength  >= [entityArray objectAtIndex:index2].entityY) && ([entityArray objectAtIndex:index1].entityY + [entityArray objectAtIndex:index1].entityLength <= ([entityArray objectAtIndex:index2].entityY+ [entityArray objectAtIndex:index2].entityLength))))
  {
    return TRUE;
  }
  else
  {
    return FALSE;
  }
} 
```

entityArray 是一个 NSMutable 数组，其中填充了我创建的结构实例：

```
struct Entity
{
  int entityX;
  int entityY;
  int entityLength;
  int entityWidth;
  int entityType;
  int entitySpeed;
  bool isDead;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:27:58.297

An`NSMutableArray`只能存储 Objective-C 对象，不能存储 C 结构。将实体包装在一个`NSValue`对象中以将它们存储在数组中：

```
Entity entity;
// populate entity...

NSValue *value = [NSValue valueWithBytes:&entity objCType:@encode(struct Entity)];
[array addObject:value]; 
```

要取回值，请使用`-[NSValue getValue:]`，如下所示：

```
NSValue *value = [array objectAtIndex:index];
Entity entity;
[value getValue:&entity]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:27:54.890

类似于以下内容：

```
 -(BOOL)detectCollisionBetweenEntityAtIndex:(int)index1 andEntityAtIndex:(int)index2
    {
    bool hasDetected = false;
      if (...)
      {
        hasDetected = TRUE;
      }
        else
      {
        hasDetected = FALSE;
      }
        return hasDetected ;
      } 
```

应该整理一下！

# java - 关于在 java 中实现 GUI 时使用哪种布局的建议

> ID：10464195
> 
> 赞同：0
> 
> 时间：2012-05-05T17:19:47.567
> 
> 标签：java, user-interface

我一直在做我的任务，在使用 java GUI 设计标签组合框和按钮时，我需要有关选择哪种布局的帮助。我希望以一种特定的方式完成事情，在一条水平线上我需要标签，然后是组合框，然后是第二条水平线上的按钮，我想要一个额外的按钮，以此类推第三和第四条水平线。实际上我担心的是我对 GUI 非常陌生，我需要建议选择哪种布局以及如何实现它

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:33:35.540

我会选择 GroupLayout（使用 NetBeans，它有一个非常好的 GUI 构建器，可以轻松创建 UI）。如果您想尝试更复杂的解决方案，您可以查看 JGoodies 或 MigLayout。

# matlab - matlab 中的数据管理与其他常见分析包

> ID：10464209
> 
> 赞同：0
> 
> 时间：2012-05-05T17:21:10.747
> 
> 标签：matlab, memory, object, memory-management, analysis

背景：

我正在使用面向对象的组合结构分析大量数据，以便于分析。通常情况下，我的 OO 的最高级别是保存时大约 2 gigs 的对象。将数据加载到内存中并不总是一个问题，并且根据其内容填充子对象然后填充更高的对象比直接加载大量 mat 文件更有效的 java 内存。

问题：

保存这些大于 2 gig 的对象通常会失败。这是一个众所周知的问题，我只是删除了一些子对象，直到总大小低于 2-3 gigs。无论计算机有多强大，都会发生这种情况，16 gigs ram 8 cores 等仍然无法正确保存对象。回版本保存也无济于事

问题：

这是其他人在 MATLAB 中以某种方式解决的问题吗？有没有我应该研究的替代方案，它仍然有很多高级分析并且不会有这个问题？

欢迎提问，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:07:41.113

我不确定这会有所帮助，但在这里：您是否确保使用最新版本的 mat 文件？检查例如[save](http://www.mathworks.fr/help/techdoc/ref/save.html)。从页面引用：

*'-v7.3' 7.3 (R2006b) 或更高版本 7.0 版功能以及**对 64 位系统上大于或等于 2 GB 的数据项的支持**。*

*'-v7' 7.0 (R14) 或更高版本 6 功能加上数据压缩和 Unicode 字符编码。Unicode 编码允许在使用不同默认字符编码方案的系统之间共享文件。*

此外，您的对象是否可能包含图形句柄对象？在这种情况下，明智的做法是使用[hgsave](http://www.mathworks.fr/help/techdoc/ref/hgsave.html)

# php - 从 MySQL 数据库中获取整数值

> ID：10464211
> 
> 赞同：0
> 
> 时间：2012-05-05T17:21:20.683
> 
> 标签：php, mysql

基本上我有一个 MySQL 数据库和一个名为的表`users`，其中有一列名为`credits`. 如何获取当前登录用户的整数值？

我的专栏是：

*   用户身份
*   用户名
*   电子邮件
*   密码
*   角色
*   学分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:32:19.527

我假设您首先要验证您的用户。您可以为此使用任意数量的可用库或滚动您自己的库。这里有几个地方可以开始：

*   [php会话在登录表单上对用户进行身份验证](https://stackoverflow.com/questions/1243150/php-sessions-to-authenticate-user-on-login-form)
*   [http://pear.php.net/package/Auth/redirected](http://pear.php.net/package/Auth/redirected)

一旦您获得了经过身份验证的用户的 user_id，您就可以构建一个非常简单的 MySQL 查询来提取信用：

```
// Connect to the database
$connection = new mysqli("localhost", "mysql_user", "mysql_password", "database");
if (mysqli_connect_errno())
{
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($statement = $mysqli->prepare("SELECT credits FROM user WHERE user_id=?"))
{
    // $user_id is the stored value
    $statement->bind_param("i", $user_id);
    $statement->execute();
    $statement->bind_result($credits);
    $statement->fetch();

    echo "User has " . $credits . "credits<br/>";

    $statement->close();
}

/* close connection */
$connection ->close(); 
```

[代码主要从http://www.php.net/manual/en/mysqli.prepare.php](http://www.php.net/manual/en/mysqli.prepare.php)复制/粘贴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:25:39.593

如果您知道当前登录用户的 user_id、用户名或电子邮件，您的 SQL 查询将是：

```
"SELECT `credits` FROM `users` WHERE `user_id` = '$user_id'"
"SELECT `credits` FROM `users` WHERE `username` = '$username'"
"SELECT `credits` FROM `users` WHERE `email` = '$email'" 
```

我假设您的用户表名为`"users"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:31:41.080

对此不太确定，因为我通常使用 PDO，但我想一开始应该没问题

```
<?php
$db = mysql_connect("localhost", "user", "password");

$sql = "SELECT credits FROM users WHERE user_id = " . mysql_real_escape_string($_SESSION['userid']);

$result = mysql_query($sql);

$row = mysql_fetch_object($result);

$credits = $row->credits;

echo $credits; 
```

# python - Biopython 是否支持 Python 3.2？

> ID：10464212
> 
> 赞同：1
> 
> 时间：2012-05-05T17:21:36.287
> 
> 标签：python, biopython

Biopython 的网站提到它需要 Python 到 2.7 版本，但没有明确说明是否存在 Python 3+ 支持。

有没有办法在 Python 3.2 中使用 Biopython？

请参阅：[http ://biopython.org/DIST/docs/install/Installation.html#sec7](http://biopython.org/DIST/docs/install/Installation.html#sec7)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:29:15.070

**编辑 2015 年 8 月 29 日**

Biopython 1.65 与 Python 2.6、2.7、3.3 和 3.4 完全兼容

如果您使用的是 Windows，主网站上有官方发布和支持的 32 位安装包，非官方的 64 位安装包在这里：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#生物蟒](http://www.lfd.uci.edu/~gohlke/pythonlibs/#biopython)

否则，您可以自己下载并构建 biopython，或者使用`pip`or`easy_install`来执行此操作。

见：[http ://biopython.org/wiki/Download](http://biopython.org/wiki/Download)

# class - 如何在 AspectJ 中选择修改后的实例？

> ID：10464215
> 
> 赞同：1
> 
> 时间：2012-05-05T17:22:00.420
> 
> 标签：class, aop, instance, aspectj

我正在学习面向方面的编程，我想使用 AspectJ 创建几个方面来改变一个类。问题是类的所有实例都被各个方面更改，我想为每个实例选择要使用的方面。

另一个问题，如何为同一方法选择不同方面的建议顺序？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:51:32.697

我暂时只回答一部分。

关于你的第二个问题：

> 如何为同一方法选择不同方面的建议顺序？

请看[声明优先级](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-declare.html#advice-precedence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:46:53.927

这可能不是您要寻找的答案，但设计使一个类的所有实例都被一个方面修改。您应该认为 AspectJ 会影响整个程序的语义，而不是影响程序的各个部分。

AspectJ 是通过字节码操作实现的，因此即使是 AspectJ 规范的一部分，也不可​​能对单个实例进行更改。

但是，也许还有另一种实现你需要实现的方法，因为只需要编织到单个实例中就意味着你的实现有问题。

# objective-c - 当用户使用 Fast App Switcher 停止应用程序时停止 CLLocationManager

> ID：10464218
> 
> 赞同：1
> 
> 时间：2012-05-05T17:22:20.903
> 
> 标签：objective-c, ios5, cllocationmanager, xcode4.3, fast-app-switching

我正在开发一个使用 CLLocationManager 获取 GPS 数据的 iOS 应用程序。

当用户按下主页按钮然后使用快速应用程序切换器杀死应用程序时，停止 CLLocationManager 的正确方法是什么？

如何停止 CLLocationManager 然后停止轮询 GPS 数据？有谁知道实现这一目标的好方法，因为通常当用户杀死应用程序时我无法执行任何代码......

**编辑：** 当我将应用程序发送到后台时，它仍然应该得到显着的LocationChanges，所以当应用程序发送到后台时我无法停止 CLLocationManager！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:58:48.503

在 AppDelegate 中有一个名为 applicationWillResignActive 的方法。此方法在您的应用即将发送到后台时运行。如果您可以从 AppDelegate 访问 CLLocationManager，您可以在此处停止它。否则，您可以从 applicationWillResignActive 发布通知，并且任何具有 CLLocationManager 的类都可以订阅该通知并从那里处理它。

像这样发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"appWillResignActive" object:nil]; 
```

并像这样订阅：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleResign:) name:@"appWillResignActive" object:nil]; 
```

然后是这样的一些方法：

```
- (void)handleResign: (NSNotification *)notification
{
    // stop CLLocationManager
} 
```

编辑：如果您想在应用程序被终止时运行代码，那么您可以在 AppDelegate 的此方法中运行该代码：

```
- (void)applicationWillTerminate:(UIApplication *)application 
```

# sql - 简化数据库设计

> ID：10464219
> 
> 赞同：-2
> 
> 时间：2012-05-05T17:22:25.397
> 
> 标签：sql, database-design

任何人都可以为这些 4tables 提出一个好的设计。

设计

```
 Fields: DesignId (Primarykey),
Iname..,.... 
```

表 2：输入文件

```
FileId int,
DesignId ,
FileName,
Description,
primary key (FileId,DesignId )
foreign key(DesignId)...
//This foreign key here seems to cause insert problems. 
```

表 3：输入数据

```
DesignId int,
TestCaseInputId,
FileId int,
MaterialType,
primary key(DesignId ,TestCaseInputId,FileId)
foreign key(FileId ) references InputFiles
foreign key(DesignId) refernces Design 
```

问题：

1.  我不确定或不相信 Table2、Table3 中的复合键。
2.  外键。外键似乎会导致插入问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:45:57.760

没有人能真正从对使用场景的了解如此少的情况下进行设计……但是

一些伪 DDL，不确定您使用的是哪个服务器...

```
create table Design (
    DesignID int not null primary key,
    Iname nvarchar(32) not null
)

create table InputFile (
    FileID int not null primary key,
    DesignID int not null, -- foreign key referencing Design (DesignID)
    FileName nvarchar(max) not null,
    Description nvarchar(max) null
)

create table InputData (
    TestCaseInputID int not null primary key,
    FileID int not null,  -- Foreign key referencing InputFile (FileID)
    MaterialType nvarchar(?)
) 
```

要点是不要将 InputFile 设为主键 (FileID,DesignID)，除非您打算拥有多个具有相同 FileID 的文件。

在 InputData 中有 DesignID 是不必要的，多余的。如果你把它放在那里，你必须确保它与 InputFile.DesignID 保持一致。如果这种关系永远不会改变，你可能仍然想要它。这只是正常化的暗示。

您必须按以下顺序插入数据...

1.  第一个插入设计
2.  然后插入文件
3.  然后插入 InputData

为什么 InputData 是一个与 InputFile 不同的表？如果您将为每个文件提供多个输入数据行，那么这是有道理的。

您可能希望创建 DesignID、FileID 和 TestCaseInputID 标识列或服务器的等效自动递增 int id。或者，如果这些 id 是在其他地方获得的真实世界信息，那么您必须插入它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:28:38.360

说“外键似乎导致 [原文如此] 插入问题”没有帮助。问题是什么？我推测问题是加载数据的顺序，而不是外键约束。在使用它加载数据*之前*，您需要确保该 id 存在。

从文件中读取数据时，我通常使用以下策略：

1.  将数据加载到临时的全字符临时表中。
2.  验证临时表中的数据，包括外键和类型。
3.  如有必要，将任何缺少的主键添加到相应的表中。
4.  将数据加载到最终表格中。

这需要更多的步骤和数据移动。但是，我不断提醒我通过对输入数据进行适当检查可以节省多少实时时间。

# css - 使用透视和平移Z的元素比例公式是什么？

> ID：10464220
> 
> 赞同：3
> 
> 时间：2012-05-05T17:22:42.303
> 
> 标签：css, perspective, translate3d

我想做以下事情：给定一个带有透视图的容器和一个带有 translateZ 值的内部元素，我想用 translateY “拉起”它，以便在视觉上触摸周围容器的顶部：[http://jsfiddle .net/8R4ym/129/](http://jsfiddle.net/8R4ym/129/)

有没有某种公式，给定容器的透视值、元素的宽度和高度以及它的 Z 平移，我可以得到那种“顶部”计算？我一直在玩它，但我似乎找不到它的一些规则，因为似乎这些都是变量。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T12:51:51.523

是的！

实际上有一个非常简单的公式可以找到偏移量 - 维基百科上的[3d Projection 文章](http://en.wikipedia.org/wiki/3D_projection#Diagram)有一个图表和公式。

公式在`bx = ax * bz / az`哪里：

*   `ax`是到变换原点的原始距离
*   `az`是透视+否定`translateZ`
*   `bz`是视角

这会给你：

*   `bx`- 到变换原点的新距离

所以，你需要知道：

*   `bz`：（`perspective`例如`1000px`：）
*   `ax`：与变换原点的偏移量，例如：如果原点是 50%，那么这需要是元素`top`相对于父元素中心的 ( `parent.height/2 + element.top`) -- 假设`-500px`
*   `z`：元素的`translateZ`（例如`-600px`：）
*   `az`那么`bz + z * -1`，在这种情况下：`1000 + (-600 * -1) = 1600`

所以公式是：`-500 * 1000 / 1600 = -312.5`

该元素`-312.5px`从原点垂直偏移，而最初它是 offset `-500px`，这两个数字之间的差异是您需要添加到旧`top`值以获得等效的新值。

此公式也适用于 Y 轴。

我在这里整理了一个简单的例子：http: [//jsfiddle.net/trolleymusic/xYRgx/](http://jsfiddle.net/trolleymusic/xYRgx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:33:31.623

可能有（不知道副手），但您是否尝试过`-webkit-transform-origin:;`先更改以查看是否可以简单地沿顶部应用转换，以便元素出现在您想要的位置而不进行翻译？

# macos - VirtualHosts 在 Mac OS 10.7 上不起作用

> ID：10464229
> 
> 赞同：4
> 
> 时间：2012-05-05T17:23:39.487
> 
> 标签：macos, apache, virtual-hosts

我想在 Mac OS 10.7 上创建 VirtualHosts，因此我编辑了 /etc/apache2/httpd.conf。我取消注释“包含/private/etc/apache2/extra/httpd-vhosts.conf”行以包含虚拟主机。在文件 /private/etc/apache2/extra/httpd-vhosts.conf 我写了以下内容：

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot "/var/www"
    ServerName localhost
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "/var/www/someFolder"
    ServerName myApplication.dev
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "/var/www/someOhterFolder"
    ServerName myApplication2.dev
</VirtualHost> 
```

我删除了两个示例虚拟主机。在我的 /etc/hosts 文件中，我添加了以下内容：

```
127.0.0.1 myApplication.dev
127.0.0.1 myApplication2.dev 
```

我重新启动了我的 Apache 并在浏览器中键入了 myApplication.dev 和 myApplication2.dev，但我收到一个错误“找不到服务器”，它在浏览器中显示 www.myApplication.dev（myApplication2.dev 也是如此）。

我忘了配置什么吗？我在httpd.conf中激活了PHP，也安装了mysql，但我认为这与虚拟主机无关。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-30T10:37:39.900

apachectl 有一个选项 -S 来检查 vhost.conf 文件的语法。您可以在 vhosts.conf 文件中找到这些行。

```
> # You may use the command line option '-S' to verify your virtual host
> # configuration. 
```

所以，当你跑

```
sh-3.2# apachectl -S 
```

如果您得到**Syntax OK**结果，则表示您的 vhosts.conf 文件没有问题。

```
httpd: VirtualHost configuration:
wildcard NameVirtualHosts and _default_ servers:
*:80                   is a NameVirtualHost
         default server zz.xxxx.com (/private/etc/apache2/extra/httpd-vhosts.conf:27)
         port 80 namevhost zz.xxxx.com (/private/etc/apache2/extra/httpd-vhosts.conf:27)
         port 80 namevhost yy.xxxx.com (/private/etc/apache2/extra/httpd-vhosts.conf:35)
Syntax OK 
```

如果 conf 文件有任何问题，它会告诉您错误行，例如

```
sh-3.2# apachectl -S
Syntax error on line 33 of /private/etc/apache2/extra/httpd-vhosts.conf:
CustomLog takes two or three arguments, a file name, a custom log format string or format name, and an optional "env=" clause (see docs) 
```

确保您的 vhosts.conf 文件具有真实的配置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T00:29:26.450

我在使用 OS X Lion 时遇到了完全相同的问题。我通过将“::1 myhost.dev”添加到 /etc/hosts 来修复它：

```
127.0.0.1 myhost.dev
::1 myhost.dev 
```

顺便说一句，::1 还修复了一个错误，该错误使 Mac 提供的虚拟主机上的页面加载非常慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T16:48:34.337

我遇到了同样的问题，并注意到`ServerRoot "/usr"`在 10.7 升级后设置错误。httpd.conf 文件仍在 /etc/apache2 下，但其中的此设置指向错误的位置。一旦我通过更改为 修复了该问题`ServerRoot "/etc/apache2"`，我之前的所有虚拟主机配置都会正确获取。

我还必须通过取消注释第 477 行来重新启用虚拟主机，如此处所述[http://brettterpstra.com/fixing-virtual-hosts-and-web-sharing-in-mountain-lion/](http://brettterpstra.com/fixing-virtual-hosts-and-web-sharing-in-mountain-lion/)直到我已经修复了上面的路径问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T12:36:19.403

您使用的是 HTTP 代理吗？如果是这样，请为 myApplication.dev 和 myApplication2.dev 设置一个例外。

我的意思是“找到服务器 mot”的问题意味着您的浏览器找不到主机“myapplication.dev”的 IP 地址。这可能是因为您使用的是 http 代理，可能是您的托管公司配置的代理。在任何情况下，您甚至都无法访问服务器，因此您根本无法尝试虚拟主机配置。

要尝试虚拟主机配置，您可以在终端窗口中使用 telnet 并直接与服务器进行 HTTP 通信，如下所示：

```
yourmacbox:~ yourname$ telnet 127.0.0.1 80 
```

您应该看到以下文本：

```
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'. 
```

然后你输入

```
GET / HTTP/1.0
Host: myApplication.dev 
```

现在，希望您能看到来自您的 Web 服务器的一些响应。这表明，一旦您可以连接到它，虚拟主机就可以正常工作。

# java - 为什么在这个 java 小程序教程代码的循环中线程优先级设置为最大值？

> ID：10464230
> 
> 赞同：0
> 
> 时间：2012-05-05T17:23:54.987
> 
> 标签：java, applet, thread-priority

我正在尝试学习一些基本的游戏 Java 编程。

我在[这里学习本教程](http://www.javacooperation.gmxhome.de/BallBewegungEng.html)。

他们在小程序中运行方法的骨架代码：

```
public void run () 
{
    // lower ThreadPriority 
    Thread.currentThread().setPriority(Thread.MIN_PRIORITY); 

    // run a long while (true) this means in our case "always" 
    while (true) 
    {
        // repaint the applet 
        repaint(); 

        try 
        {
            // Stop thread for 20 milliseconds 
            Thread.sleep (20); 
        } 
        catch (InterruptedException ex) 
        {
            // do nothing 
        } 

        // set ThreadPriority to maximum value 
        Thread.currentThread().setPriority(Thread.MAX_PRIORITY); 
    }
} 
```

在这段代码中，他们最初将线程优先级设置为最低。然后在循环内部，他们将其设置为最大值。

我想知道这样做的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:31:43.583

我不知道他们为什么最初决定将优先级设置为最低。我认为这是没有意义的。

但是，将优先级设置为高于正常值（也许最大值是夸张的）确实有意义。

一般来说，如果你有一个线程重复执行一个短动作然后休眠，你通常想要的是尝试最大化线程在每次迭代中“按时启动，做它的事情，然后回到休眠”的概率. 一般来说，将线程优先级设置为高于平均水平会增加发生这种情况的机会。在 Windows 上尤其如此，其中线程优先级本质上会影响在线程调度程序决定“下一步运行什么”时调度的线程。

您可能想通读我几年前写的一篇关于[Java 线程优先级](http://www.javamex.com/tutorials/threads/priority.shtml)的文章，它可能有助于解释所涉及的一些问题。

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：没有这样的孩子：15

> ID：10464233
> 
> 赞同：-1
> 
> 时间：2012-05-05T17:24:27.627
> 
> 标签：java, swing

所以我遇到了这种晦涩难懂的错误，我不知道这意味着什么。在不查看我的代码的情况下，有人可以告诉我导致此错误的原因以及此错误的可能解决方案吗？任何帮助将不胜感激。

这是错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: No such child: 15
    at java.awt.Container.getComponent(Unknown Source)
    at javax.swing.JComponent.rectangleIsObscured(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JComponent.paintToOffscreen(Unknown Source)
    at javax.swing.BufferStrategyPaintManager.paint(Unknown Source)
    at javax.swing.RepaintManager.paint(Unknown Source)
    at javax.swing.JComponent._paintImmediately(Unknown Source)
    at javax.swing.JComponent.paintImmediately(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.access$700(Unknown Source)
    at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:40:31.873

在没有看到任何代码或任何说明问题的[SSCCE](http://sscce.org/)的情况下，我们基本上只能猜测发生了什么。我敢打赌，您在弄乱另一个 Swing 组件`Thread`，这`ArrayIndexOutOfBoundsException`是在错误线程上删除组件的结果。

为了调试它，我将首先使用[`CheckThreadViolationRepaintManager`](http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html)并修复它指示的任何错误。如果这不起作用，我会尝试为 设置一个断点`ArrayIndexOutOfBoundsException`，查看哪个容器导致错误，并尝试在其上为任何添加和删除方法设置断点，以确定谁删除了导致异常的组件（可能在错误的线程上，您可以使用该方法轻松检查`EventQueue.isDispatchThread()`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:33:12.553

如果您正在使用 swing 使用工作线程来控制组件[工作线程教程](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)

# javascript - 与 brunch.io（backbone.js 框架）的骨干.验证集成

> ID：10464235
> 
> 赞同：1
> 
> 时间：2012-05-05T17:24:34.797
> 
> 标签：javascript, backbone.js, brunch

如何将[http://thedersen.github.com/backbone.validation/](http://thedersen.github.com/backbone.validation/)与 brunch.io 集成我尝试将骨干网.validation.js 放在供应商文件夹中并

```
View = require './view'
template = require './templates/home'
User = require 'models/user'

module.exports = class HomeView extends View
 id: 'home-view'
 template: template

initialize: ->

 Backbone.Validation.bind(this)

 @user = new User

 console.log @user

 @user.validate() 
```

给出错误 Uncaught TypeError: Object # has no method 'validate'

然后我也试过了

```
# The application bootstrapper.
Application =
 initialize: ->
HomeView = require 'views/home_view'
Router = require 'lib/router'
User  = require 'models/user'
# Ideally, initialized classes should be kept in controllers & mediator.
# If you're making big webapp, here's more sophisticated skeleton
# https://github.com/paulmillr/brunch-with-chaplin
@homeView = new HomeView model: new User

# Instantiate the router
@router = new Router()
# Freeze the object
Object.freeze? this

module.exports = Application 
```

这也是

```
Model = require './model'
HomeView = require 'views/home_view'

 module.exports = class User extends Model

 defaults:
    logged_in: false,
    token: false

 initialize: ->
   new HomeView model: new User

 validation: 
     email: {
       required: true,
       pattern: 'email',
       msg: 'Please enter a valid email' },
     name:  {
       required: true,
       msg: "Name is required" } 
```

给出错误 Uncaught RangeError: Maximum call stack size exceeded

所以没有一个技巧对我有用，我需要帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:17:45.193

1）您将验证事物绑定到视图，而不是用户，这就是您收到第一个错误的原因

2）您不应该在模型内部创建视图，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:54:12.817

你应该把backbone.validation.js 放在vendor/scripts 文件夹中。您是否看到必须在插件之前取消 Backbone 和 Underscore？

早午餐适用于配置文件，您应该在 config.coffee 中包含以下内容：

```
exports.config =
  # See docs at http://brunch.readthedocs.org/en/latest/config.html.

  # Edit the next line to change default build path.
  paths:
    public: 'public'

  files:
    javascripts:
      # Defines what file will be generated with `brunch generate`.
      defaultExtension: 'coffee'
      # Describes how files will be compiled & joined together.
      # Available formats:
      # * 'outputFilePath'
      # * map of ('outputFilePath': /regExp that matches input path/)
      # * map of ('outputFilePath': function that takes input path)
      joinTo:
        'javascripts/vendor.js': /^vendor/
        'javascripts/app.js': /^app/
      # Defines compilation order.
      # `vendor` files will be compiled before other ones
      # even if they are not present here.
      order:
        before: [
          'vendor/scripts/console-helper.js',
          'vendor/scripts/jquery-1.7.2.js',
          'vendor/scripts/underscore-1.3.3.js',
          'vendor/scripts/backbone-0.9.2.js'
          'vendor/scripts/backbone.validation.js'
        ] 
```

重要的是订单部分。

# ruby-on-rails-3 - Rails 3 + Paperclip：将当前数据移动到另一个文件夹

> ID：10464236
> 
> 赞同：3
> 
> 时间：2012-05-05T17:24:46.943
> 
> 标签：ruby-on-rails-3, paperclip

由于我是 Rails 新手，我犯了在 4 个不同模型中使用默认路径（ /system/:attachment/:id/:style/:filename ）的错误。现在，我想将每个模型移动到自己的文件夹中，但不会丢失旧数据。

处理这个的正确方法是什么？Paperclip 是否提供自动从旧文件夹迁移数据的选项？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:21:59.483

我也有类似的困境。我们将所有附件存储在特定路径中，然后业务需求发生变化，所有内容都必须移动和重新组织。

我很惊讶关于更改回形针路径和移动文件的信息很少。也许我错过了明显的？

像[费尔南多](https://stackoverflow.com/a/10468144/1588198)一样，我必须编写一个 rake 任务。这是我的代码的样子（附件模型是附件，实际的 Paperclip::Attachment 对象是 :file ）

```
task :move_attachments_to_institution_folders => :environment do
attachments = Attachment.all
puts "== FOUND #{attachments.size} ATTACHMENTS =="
old_path_interpolation = APP_CONFIG[ 'paperclip_attachment_root' ] + "/:id_partition.:extension"
new_path_interpolation = APP_CONFIG[ 'paperclip_attachment_root' ] + "/:institution/reports/:id_:filename"
attachments.each do |attachment|
    # the interpolate method of paperclip takes the symbol variables and evaluates them to proper path segments.
    old_file_path = Paperclip::Interpolations.interpolate(old_path_interpolation, attachment.file, attachment.file.default_style) #see paperclip docs
    puts "== Current file path:  #{old_file_path}"
    new_file_path = Paperclip::Interpolations.interpolate(new_path_interpolation, attachment.file, attachment.file.default_style)
    if File.exists?(old_file_path)
        if !File.exists?(new_file_path) #don't overwrite
            FileUtils.mkdir_p(File.dirname(new_file_path)) #create folder if it doesn't exist
            FileUtils.cp(old_file_path, new_file_path)
            puts "==== File copied (^_^)"
        else
            puts "==== File already exists in new location."
        end
    else
        puts "==== ! Real File Not Found ! "
    end
end 
```

对我来说关键是让回形针使用其默认插值重新计算旧路径。从那时起，只需使用标准 FileUtils 复制文件即可。副本负责重命名。

PS我在rails 2.3.8分支上，带有回形针-v 2.8.0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T04:38:26.240

我最终创建了一个小型 rake 任务来执行此操作。假设您有一个名为 User 的模型，并且您的图像文件名为“image”，请将以下代码放在 lib/tasks/change_users_folder.rb

```
desc "Change users folder"
task :change_users_folder => :environment do
  @users = User.find :all
  @users.each do |user|
    unless user.image_file_name.blank?
      filename = Rails.root.join('public', 'system', 'images', user.id.to_s, 'original', user.image_file_name)

      if File.exists? filename
        user.image = File.new filename
        user.save
      end
    end
  end
end 
```

他们，运行**rake change_users_folder**并等待。

请注意，这不会删除旧文件。它们将保留在原始位置，并在新文件夹中创建一个副本。如果一切顺利，您可以稍后删除它们。

对于我未来的代码，我将确保在使用回形针时始终设置 :path 和 :url :)

# c# - 使用反射创建的委托创建 Timer 时出现 InvalidProgramException

> ID：10464242
> 
> 赞同：0
> 
> 时间：2012-05-05T17:25:16.163
> 
> 标签：c#, reflection, timer, invalidprogramexception

这段代码：

```
var returnType = GetDelegateReturnType(typeof(TimerCallback));
var methodParameters = typeof(TimerCallback).GetMethod("Invoke").GetParameters().Select(x => x.ParameterType).ToArray();

var handler = new System.Reflection.Emit.DynamicMethod("", returnType, methodParameters, typeof(ArgumentNullTest));
var generator = handler.GetILGenerator();

generator.Emit(System.Reflection.Emit.OpCodes.Ldloc, 1);
生成器.Emit(System.Reflection.Emit.OpCodes.Ret);

var timerCallback = (TimerCallback)handler.CreateDelegate(typeof(TimerCallback));
var timer = new Timer(timerCallback, null, 0, 0);
var timer2 = new Timer(o => { }, null, 0, 0);

```

`InvalidProgramException`创建第二个计时器时抛出一个。`TimerCallback`创建每个反射时我做错了什么？

# java - 在使用 XSL-FO 和数据 URI 方案在 PDF 中显示图像时需要帮助

> ID：10464243
> 
> 赞同：4
> 
> 时间：2012-05-05T17:25:21.793
> 
> 标签：java, image, xslt, pdf, xsl-fo

对于 DATA，如果我在参数中设置 base64 编码字符串，

```
String imageData = Base64.encode(IOUtils.toByteArray(is));
transformer.setParameter("imageData", imageData); 
```

并像这样使用xslt中的参数，

```
<fo:external-graphic src="data:image/jpeg;base64,$imageData"/> 
```

我尝试使用 url 和不使用 url，但两者似乎都不起作用。请帮我。一个多月以来，我一直在努力将图像放在 pdf 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T01:18:25.127

您的问题`$imageData`是没有与值一起输出，只是字符串文字“$imageData”？

当您在属性内部并想要评估变量的值时，您需要使用[属性值模板](http://www.w3.org/TR/xslt#attribute-value-templates)。用花括号将变量包裹起来。

```
<fo:external-graphic src="data:image/jpeg;base64,{$imageData}"/> 
```

# git - 远程 Pushurl 不起作用

> ID：10464250
> 
> 赞同：3
> 
> 时间：2012-05-05T17:25:56.747
> 
> 标签：git, github, git-remote

我在我的项目中使用 GIT。现在我想将它与github集成，所以我创建了一个远程：

```
git remote add github https://WouterJ@github.com/WouterJ/project.git 
```

但是现在我需要填写一个密码来获取，这是我不想要的。所以我决定使用不同的 url 来获取：

```
git remote set-url github http://github.com/WouterJ/project.git
git remote set-url --push github https://WouterJ@github.com/WouterJ/project.git 
```

如果我跑步，`git remote -v`我会得到这个：

```
$ git remote -v
github  http://github.com/WouterJ/project.git (fetch)
github  https://WouterJ@github.com/WouterJ/project.git (push)
origin  http://github.com/WouterJ/project.git (fetch)
origin  http://github.com/WouterJ/project.git (push) 
```

正是我想要的，我想。但是当我推送时，我需要填写我的用户名。为什么？如果我在填写后直接推送到 url，则效果很好：

```
git push https://WouterJ@github.com/WouterJ/project.git master 
```

工作，但是

```
git push github master 
```

不会工作

* * *

我还使用`git config`来设置不同的推送 url：

```
git config remote.github.pushurl https://WouterJ@github.com/WouterJ/project.git 
```

如果我从配置中获取 pushurl，它看起来是正确的：

```
$ git config remote.github.pushurl
https://WouterJ@github.com/WouterJ/project.git 
```

还要查看 .git/config 文件，看起来一切都是正确的。

* * *

我在这里错过了什么吗？它是一个错误吗？我用的是Git1.7.4，有错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:57:04.570

我已经找到了如何解决这个问题，所以提出我自己的问题：

诀窍是上传到 Git1.7.8（或更高版本）。现在您可以使用相同的设置并且没有`_netrc`文件：

```
$ git push github master
Password for 'https://WouterJ@github.com/':

$ git fetch github
fetching.... 
```

所以看起来该错误已在 Git1.7.8 （[发行说明](https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.8.txt#L134-137)）中修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:38:09.553

为了推送到 https GitHub 地址，唯一缺少的部分是您的`~/.netrc`文件（或`%HOME%/_netrc`Windows 上的文件），其中包含您的 GitHub 凭据。

请参阅“ [Git - 如何`.netrc`在 Windows 上使用文件来保存用户和密码](https://stackoverflow.com/questions/6031214/git-how-to-use-netrc-file-on-windows-to-save-user-and-password/6031266#6031266)”。

```
machine github.com
login <login_github>
password <password_github> 
```

[请参阅“与 github 同步](https://stackoverflow.com/questions/5377703/syncing-with-github/5378094#5378094)”中的其他设置。

# java - 初学者 Android：提示离开

> ID：10464252
> 
> 赞同：0
> 
> 时间：2012-05-05T17:26:26.550
> 
> 标签：java, android, eclipse, android-layout, android-intent

当用户单击主要活动上的后退按钮时，我希望弹出一个对话框，询问用户他是否“想离开”。我能够创建对话框并实现它，但我不确定如何在按下后退按钮时打开对话框。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:30:02.633

哪个API？这是 API 5+ 中最简单的方法

```
@Override
public void onBackPressed () {
    //super.onBackPressed();
    dialog.show();
} 
```

# audio - 在 mediaelement.js 中将海报添加到音频

> ID：10464254
> 
> 赞同：1
> 
> 时间：2012-05-05T17:27:02.323
> 
> 标签：audio, mediaelement.js, poster

我想在 mediaelement.js 中将海报添加到 mp3/audio，现在我正在使用此代码，但它与 firefox 有问题

```
[mejsvideo mp4="http://example.com/test.mp3" poster="http://example.com/test.jpg"preload="true" autoplay="true" width="620" height="300"] 
```

# c# - Arraylist vs List vs Dictionary

> ID：10464260
> 
> 赞同：0
> 
> 时间：2012-05-05T17:28:06.053
> 
> 标签：c#, c#-4.0

谁能救我？我有以下代码：

```
private List<string> GenerateTerms(string[] docs)
{
    List <string> uniques = new List<string>();

    for (int i = 0; i < docs.Length; i++)
    {
        string[] tokens = docs[i].Split(' ');

        List<string> toktolist = new List<string>(tokens.ToList());

        var query = toktolist.GroupBy(word => word)
             .OrderByDescending(g => g.Count())
             .Select(g => g.Key)
             .Take(20000);              

        foreach (string k in query)
        {
            if (!uniques.Contains(k)) 
                uniques.Add(k);
        }
    }            

    return uniques;            
} 
```

它是关于根据最高频率从多个文档中生成术语。我用字典做了同样的过程。在这两种情况下都花费了 440 毫秒。但令人惊讶的是，当我使用带有数组列表的过程时，如下代码所示

```
private ArrayList GenerateTerms(string[] docs)
{
    Dictionary<string, int> yy = new Dictionary<string, int>();
    ArrayList uniques = new ArrayList();

    for (int i = 0; i < docs.Length; i++)
    {
        string[] tokens = docs[i].Split(' ');
        yy.Clear();
        for (int j = 0; j < tokens.Length; j++)
            {
                if (!yy.ContainsKey(tokens[j].ToString()))
                    yy.Add(tokens[j].ToString(), 1);
                else
                    yy[tokens[j].ToString()]++;
            }

            var sortedDict = (from entry in yy
                              orderby entry.Value descending
                              select entry).Take(20000).ToDictionary
                          (pair => pair.Key, pair => pair.Value);               

            foreach (string k in sortedDict.Keys)
            {                    
                if (!uniques.Contains(k)) 
                uniques.Add(k);
            }
        }            

        return uniques;            
    } 
```

它花了 350 毫秒。数组列表不应该比列表和字典慢吗？请用这种时态拯救我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T17:45:26.900

你的代码做了很多不必要的工作并且使用了低效的数据结构。

试试这个：

```
private List<string> GenerateTerms(string[] docs)
{
     var result = docs
         .SelectMany(doc => doc.Split(' ')
                               .GroupBy(word => word)
                               .OrderByDescending(g => g.Count())
                               .Select(g => g.Key)
                               .Take(20000))
         .Distinct()
         .ToList();   
     return result;
} 
```

重构版本使其更易于阅读：

```
private List<string> GenerateTerms(string[] docs)
{
    return docs.SelectMany(doc => ProcessDocument(doc)).Distinct().ToList();
}

private IEnumerable<string> ProcessDocument(string doc)
{
    return doc.Split(' ')
              .GroupBy(word => word)
              .OrderByDescending(g => g.Count())
              .Select(g => g.Key)
              .Take(10000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:19:43.140

我喜欢马克的解决方案。但是，我认为如果您正确利用字典，您可以挤出更多性能。果然，这速度快了很多……

```
private static List<string> GenerateTerms(string[] docs)
{
    var termsDictionary = new Dictionary<string, int>();

    foreach (var doc in docs)
    {
        var terms = doc.Split(' ');
        int uniqueTermsCount = 0;

        foreach (string term in terms)
        {
            if (termsDictionary.ContainsKey(term))
                termsDictionary[term]++;
            else
            {
                uniqueTermsCount++;
                termsDictionary[term] = 1;
            }
        }

        if (uniqueTermsCount >= 20000)
            break;
    }

    return (from entry in termsDictionary
                    orderby entry.Value descending
                    select entry.Key).ToList();
} 
```

简单地解释一下，`termsDictionary`包含一个术语词典和每个术语的重复次数。然后最后的 Linq 查询按出现次数降序返回术语。

**更新**

我添加了代码以将每个文档的唯一术语数限制为 20,000 个。

以下是基准测试结果...

*   322 毫秒（原始）
*   284 毫秒（马克拜尔斯解决方案）
*   113 毫秒（如上利用字典）

下面是我用来生成`docs`数组并运行测试的代码......

```
static void Main(string[] args)
{
    string[] docs = new string[50000];

    for (int i = 0; i < docs.Length; i++)
    {
        docs[i] = "a man a plan a canal panama";
    }

    // warm up (don't time this)
    GenerateTermsOriginal(docs);

    Stopwatch sw = new Stopwatch();
    sw.Restart();
    var t1 = GenerateTermsOriginal(docs);
    sw.Stop();
    Console.WriteLine(sw.ElapsedMilliseconds + " ms");

    sw.Restart();
    var t2 = GenerateTermsLinq(docs);
    sw.Stop();
    Console.WriteLine(sw.ElapsedMilliseconds + " ms");

    sw.Restart();
    var t3 = GenerateTermsDictionary(docs);
    sw.Stop();
    Console.WriteLine(sw.ElapsedMilliseconds + " ms");
} 
```

# php - 让密码更安全？

> ID：10464262
> 
> 赞同：2
> 
> 时间：2012-05-05T17:29:06.170
> 
> 标签：php, mysql, passwords, password-protection

嘿，伙计们，我正在考虑我可以做些什么来提高当前密码的安全性。你们中的大多数人都知道彩虹表，它可以在几秒钟内解密“被黑”的 md5 哈希。

我的想法是，我怎样才能使它更安全。如果入侵的“黑客”获得了一些 md5 哈希值，但没有完整的 md5 哈希值怎么办？

例如，我选择“rabbit”的密码 md5 哈希等于 (a51e47f646375ab6bf5dd2c42d3e6181) 互联网上几乎每个彩虹表都可以将这些 md5 哈希解密为明文“rabbit”。

但是，如果我只将前 10 个标志解析到数据库中会怎样。如果用户使用其密码登录，则会检查前 10 个符号是否等于数据库中的 10 个符号。因此，如果黑客获得了一些哈希值，他将无法恢复其中任何一个，因为这些都没有任何意义。

这可能而且真的更安全吗？

这只是一个想法，我非常感谢您的评论。

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:32:12.543

我建议遵循[PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T17:36:50.220

虽然这*确实*降低了基于驱动彩虹表的攻击的可行性，但它并没有真正增加安全性。一旦攻击者发现你正在使用“截断”的 MD5 哈希，你的方法实际上让他或她的事情*变得更容易*- 毕竟，他/她不必找到一个具有正确哈希的短语，只需找到一个共享前 10 个字符左右。

很抱歉，这几乎是[通过默默无闻的安全教科书示例。](https://en.wikipedia.org/wiki/Security_by_obscurity)很高兴您正在考虑更安全地存储密码的方法 - 并且您知道使用普通 MD5 哈希不是一个好主意 - 但这是错误的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T17:31:29.863

存储密码的一种更安全的方法是为每个用户使用不同的散列算法 - 或者为每个用户的散列函数使用不同的参数并存储它。这样，某人将不得不为大量不同的可能性生成彩虹表。

查看[盐渍](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)以获取更多信息。

# jquery - 为什么我的 youtube 嵌入在 fancybox 中没有加载？

> ID：10464264
> 
> 赞同：0
> 
> 时间：2012-05-05T17:29:23.413
> 
> 标签：jquery, html, fancybox

这是该页面的[链接](http://nicolaelvin.com/authoring/other_stuff.php)，它是该页面上的最后一项。下面是我的html。其他花式盒子正在工作，只是似乎与这个问题有关。

```
<a href='http://www.youtube.com/embed/NXzSX5Cbebw' class='fancybox everybody_is_smoking_video'>
     <img src='phpThumb/phpThumb.php?src=../images/smokingvideo_thumbnail.png&h=189&w=240' alt='thumbnail ofeverybody_is_smoking_video'/>
</a> 
```

我的js

```
$('.everybody_is_smoking_video').fancybox({
            'height': 423,
            'width':579, 
            'titlePosition': 'inside',
            'href' : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type'      : 'swf',
            'swf'       : {'wmode':'transparent','allowfullscreen':'true'}

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:35:23.240

这是因为它是一个不同的域。

将类型更改为“iframe”。这应该够了吧。我去用萤火虫做了它，它工作得很好。

因为我只是在控制台中运行它，所以我不得不删除 fancybox 配置中的 href 部分。但是没有它，它仍然可以正常工作。

# data-mining - 词干对词频的影响？

> ID：10464265
> 
> 赞同：11
> 
> 时间：2012-05-05T17:29:34.997
> 
> 标签：data-mining, text-processing, tf-idf, stop-words, stemming

词频 (TF) 和逆文档频率 (IDF) 如何受到停用词移除和词干提取的影响？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T16:50:05.460

**tf**是词频 **idf**是逆文档频率，它是通过将文档总数除以包含该词的文档数，然后取该商的对数而获得的。

**词干**效应是对源自同一词干的所有单词进行分组（例如：played, play,..），这种分组将增加该词干的出现率，因为频率是使用词干而不是词计算的，例如，如果您有 2 个文档：第一个包含 'play' 2 次和 'played' 5 次，第二个文档包含 'play' 3 次和 'played' 1 时间因为它出现了更多的单词“play”，而如果你做词干，两个词在词干后都会是“play”，第一个文档将是第一个，因为它包含**词干**播放 7 次，第二个文档包含**词干**播放4次。

关于停用词的去除，它在所有文档中都经常出现，并且不被视为其中任何一个的关键字，它会在没有任何场景的情况下具有很高的频率。

# scala - List[String] 的 QueryStringBinder

> ID：10464268
> 
> 赞同：4
> 
> 时间：2012-05-05T17:30:16.897
> 
> 标签：scala, playframework-2.0

使用 Play 2.0.1 我定义了以下路线：

```
GET  /demo/list controllers.Demos.listDemos(page: Int ?= 0, orderBy: Int ?= 1, nameFilter: String ?= "", versionFilter: Long ?= -1, tagFilter: List[String] ?= Nil) 
```

但我在编译时收到此错误：

```
No QueryString binder found for type List[String]. Try to implement an implicit QueryStringBindable for this type. 
```

我从 Play 2.1-RC（尚未正式发布）中找到了可以解决问题的代码：

```
/**
* QueryString binder for List
*/
  implicit def bindableList[T: QueryStringBindable] = new QueryStringBindable[List[T]] {
    def bind(key: String, params: Map[String, Seq[String]]) = Some(Right(bindList[T](key, params)))
    def unbind(key: String, values: List[T]) = unbindList(key, values)
  }

  /**
* QueryString binder for java.util.List
*/
  implicit def bindableJavaList[T: QueryStringBindable] = new QueryStringBindable[java.util.List[T]] {
    def bind(key: String, params: Map[String, Seq[String]]) = Some(Right(bindList[T](key, params).asJava))
    def unbind(key: String, values: java.util.List[T]) = unbindList(key, values.asScala)
  }

  private def bindList[T: QueryStringBindable](key: String, params: Map[String, Seq[String]]): List[T] = {
    for {
      values <- params.get(key).toList
      rawValue <- values
      bound <- implicitly[QueryStringBindable[T]].bind(key, Map(key -> Seq(rawValue)))
      value <- bound.right.toOption
    } yield value
  }

  private def unbindList[T: QueryStringBindable](key: String, values: Iterable[T]): String = {
    (for (value <- values) yield {
      implicitly[QueryStringBindable[T]].unbind(key, value)
    }).mkString("&")
  } 
```

但是经过几个小时的尝试，Play 仍然找不到代码。我尝试使用自定义对象和对该对象的隐式转换，但它仍然不起作用。

如何强制 Play 进行隐式转换？

**更新**

我想尽可能避免使用 2.1-SNAPSHOT，因为我担心它的稳定性，但如果没有其他方法，我会使用它。我尝试了 4e6 的解决方案，但没有奏效：

```
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::                                 
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.2.0.Final compile
[warn]  :: commons-codec#commons-codec;1.4: configuration not found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponents#httpclient;4.1.2 compile
[warn]  :::::::::::::::::::::::::::::::::::::::::::::: 
```

我的 sbt 插件包含以下内容：

```
// Comment to get more information during initialization
logLevel := Level.Warn

// The Typesafe repository
resolvers ++= Seq(
  Resolver.url("Typesafe Ivy Snapshots", url("http://repo.typesafe.com/typesafe/ivy-snapshots/"))(Resolver.ivyStylePatterns),
  "Typesafe Releases" at "http://repo.typesafe.com/typesafe/releases/",
  "Typesafe Snapshots" at "http://repo.typesafe.com/typesafe/snapshots/",
  "DefaultMavenRepository" at "http://repo1.maven.org/maven2/",
  "JavaNet1Repository" at "http://download.java.net/maven/1/")

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.1-SNAPSHOT") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T12:21:53.640

我终于解决了。使用的代码是：

在**models**下，文件**QueryBinders.scala**：

```
package models

import play.api.mvc.{JavascriptLitteral, QueryStringBindable}

/**
 * Created with IntelliJ IDEA.
 * User: pvillega
 * Date: 07/05/12
 * Time: 12:06
 * QueryStringBinders for some data types missing in 2.0.1
 */
//TODO: remove when updating to 2.1
object QueryBinders {

  /**
   * QueryString binder for List
   */
  implicit def bindableList[T: QueryStringBindable] = new QueryStringBindable[List[T]] {
    def bind(key: String, params: Map[String, Seq[String]]) = Some(Right(bindList[T](key, params)))
    def unbind(key: String, values: List[T]) = unbindList(key, values)
  }

  private def bindList[T: QueryStringBindable](key: String, params: Map[String, Seq[String]]): List[T] = {
    for {
      values <- params.get(key).toList
      rawValue <- values
      bound <- implicitly[QueryStringBindable[T]].bind(key, Map(key -> Seq(rawValue)))
      value <- bound.right.toOption
    } yield value
  }

  private def unbindList[T: QueryStringBindable](key: String, values: Iterable[T]): String = {
    (for (value <- values) yield {
      implicitly[QueryStringBindable[T]].unbind(key, value)
    }).mkString("&")
  }

  /**
   * Convert a Scala List[T] to Javascript array
   */
  implicit def litteralOption[T](implicit jsl: JavascriptLitteral[T]) = new JavascriptLitteral[List[T]] {
    def to(value: List[T]) = "[" + value.map { v => jsl.to(v)+"," } +"]"
  }

} 
```

在**Build.scala 上**：

```
 val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
      // Add your own project settings here
      lessEntryPoints <<= baseDirectory(_ / "app" / "assets" / "stylesheets" ** "style.less"),
      routesImport += "models.QueryBinders"
    ) 
```

更新到 2.1 时必须将其删除，但它可以工作，并且避免了我尝试将项目更新到 2.1 快照时遇到的所有问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T18:08:32.833

您可以将您的项目改为播放`2.1-SNAPSHOT`（请参阅文档的[“在未安装 Play 的情况下创建新应用程序”](http://www.playframework.org/documentation/2.0.1/NewApplication)部分）。您只需要更改`sbt-plugin`版本并添加额外的解析器。这是我的版本`plugins.sbt`

```
resolvers ++= Seq(
  Resolver.url("Typesafe Ivy Snapshots", url("http://repo.typesafe.com/typesafe/ivy-snapshots/"))(Resolver.ivyStylePatterns),
  "Typesafe Releases" at "http://repo.typesafe.com/typesafe/releases/",
  "Typesafe Snapshots" at "http://repo.typesafe.com/typesafe/snapshots/",
  "Codahale Repo" at "http://repo.codahale.com")

addSbtPlugin("play" % "sbt-plugin" % "2.1-SNAPSHOT") 
```

### 更新

我不知道为什么你有`slf4j`依赖问题。它已成功从我的类型安全版本中下载。您可以尝试将此存储库显式添加到您的应用程序配置中（我的意思是`Build.scala`，不是`plugins.sbt`）。

```
[info] downloading http://repo.typesafe.com/typesafe/releases/org/slf4j/slf4j-api/1.6.1/slf4j-api-1.6.1.jar ...
[info]  [SUCCESSFUL ] org.slf4j#slf4j-api;1.6.1!slf4j-api.jar (538ms) 
```

# mongodb - 盒子地理空间查询中的猫鼬无法正常工作

> ID：10464269
> 
> 赞同：3
> 
> 时间：2012-05-05T17:30:28.187
> 
> 标签：mongodb, geospatial, mongoose, bounding-box, mongodb-query

简单的问题：
在nodejs上使用猫鼬进行地理空间查询的正确方法是什么？

复杂的故事：
我用带有空间索引的猫鼬创建了一个模式

```
var MySchema = newSchema({
// skipped ...
    location : {
        type : [ Number ],
        required : true,
        index : '2d'
    },
// skipped ...
}); 
```

然后我在表中插入了3个文件。我可以使用 mongo 客户端和 mongoose 检索这些`db.mymodels.find({})`文档`MyModel.find({});`

现在我尝试使用边界框进行地理空间查询。
mongo客户端工作正常

```
db.mymodels.find({location: {$within: {$box: box}}}) 
```

在框中只返回一个结果。
另一方面，Mongoose 返回所有三个结果

```
query = MyModel.where({location: {$within : {$box : box}}});
query.run(cb) 
```

[这个问题](https://stackoverflow.com/questions/9853666/mongomapper-geospatial-within-query)说你应该使用 find() 而不是 where，但是当我尝试用 where 替换 find 时，`'need an area > 0'` 我检查了一个错误，我的边界框格式正确，左下角然后右上角。

该怎么办？使用猫鼬使用边界框进行地理空间查询的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T23:08:05.367

`find()`使用or没关系`where()`。

您是否介意通过启用日志记录并检查您的控制台来发布 mongoose 发送到数据库的内容：`mongoose.set('debug', true)`

# c++ - 静态和动态 MFC 链接

> ID：10464271
> 
> 赞同：0
> 
> 时间：2012-05-05T17:30:58.990
> 
> 标签：c++, visual-studio, mfc

如果我希望用户可以在没有 Visual Studio 和 MFC libaray 的情况下运行我的程序，我应该如何将我的程序与 Visual Studio 2010 中的 MFC 链接。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:35:47.100

静态链接是一种方式。然后你的可执行文件将包含所有内容，但相当大。

让客户安装动态库是另一回事。他们可以从这里获得它们[http://www.microsoft.com/en-us/download/details.aspx?id=5555](http://www.microsoft.com/en-us/download/details.aspx?id=5555)

# unit-testing - 复杂对象上的最佳实践 TDD

> ID：10464276
> 
> 赞同：4
> 
> 时间：2012-05-05T17:31:37.250
> 
> 标签：unit-testing, tdd

我正在尝试更加熟悉测试驱动开发。到目前为止，我已经看到了一些简单的示例，但是在处理复杂逻辑时仍然遇到问题，例如我的 DAL 中的这种方法：

```
public static void UpdateUser(User user)
        {
            SqlConnection conn = new SqlConnection(ConfigurationSettings.AppSettings["WebSolutionConnectionString"]);
            SqlCommand cmd = new SqlCommand("WS_UpdateUser", conn);

            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@UserID", SqlDbType.Int, 4);
            cmd.Parameters.Add("@Alias", SqlDbType.NVarChar, 100);
            cmd.Parameters.Add("@Email", SqlDbType.NVarChar, 100);
            cmd.Parameters.Add("@Password", SqlDbType.NVarChar, 50);
            cmd.Parameters.Add("@Avatar", SqlDbType.NVarChar, 50);
            cmd.Parameters[0].Value = user.UserID;
            cmd.Parameters[1].Value = user.Alias;
            cmd.Parameters[2].Value = user.Email;
            cmd.Parameters[3].Value = user.Password;
            if (user.Avatar == string.Empty)
                cmd.Parameters[4].Value = System.DBNull.Value;
            else
                cmd.Parameters[4].Value = user.Avatar;

            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        } 
```

这种方法有哪些好的 TDD 实践？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T18:51:16.620

鉴于代码已经写好了，让我们谈谈是什么使它难以测试。这里的主要问题是这个方法纯粹是一个副作用：它什么都不返回（void），并且它的效果在你的代码中是不可观察的，在对象领域 - 可观察到的副作用应该是在数据库中的某个地方很远，现在已经更新了一条记录。

如果您按照“给定这些条件，当我这样做时，我应该观察这一点”来考虑您的单元测试，您会看到您拥有的代码对于单元测试是有问题的，因为前提条件（给定一个连接到有效的数据库）和后置条件（记录已更新）不能由单元测试直接访问，并且取决于该代码的运行位置（2人在两台机器上“按原样”运行代码没有理由期待同样的结果）。

这就是为什么从技术上讲，不是纯粹在内存中的测试不被视为单元测试，并且在某种程度上超出了“经典 TDD”的范围。

在你的情况下，这里有两个想法：

1) 集成测试。如果您想验证您的代码如何与数据库一起工作，那么您处于集成测试领域，而不是单元测试领域。BDD 等受 TDD 启发的技术可以提供帮助。与其测试“代码单元”（通常是一种方法），不如关注整个用户或系统场景，在更高的层次上进行练习。例如，在这种情况下，您可以将其置于更高的级别，并假设在您的 DAL 之上的某个地方您有名为 CreateUser、UpdateUser、ReadUser 的方法，您可能想要测试的场景类似于“假设我创建了一个用户，当我更新用户名时，然后当我读取用户时，名称应该被更新” - 然后您将针对完整的设置执行该场景，涉及数据以及 DAL 和可能的 UI。

我发现以下[关于 BDD + TDD 的 MSDN 文章在](http://msdn.microsoft.com/en-us/magazine/gg490346.aspx)这方面很有趣——它很好地说明了两者如何结合在一起。

2）如果你想让你的方法可测试，你必须暴露一些状态。该方法的主要部分围绕构建命令展开。你可以这样概述方法：

```
* grab a connection
* create the parameters and types of the command
* fill in the parameters of the command from the object
* execute the command and clean up 
```

您实际上可以测试这些步骤中的大部分：可观察状态是命令本身。你可以有这些方面的东西：

```
public class UpdateUserCommandBuilder
{
   IConnectionConfiguration config;

   public void BuildAndExecute(User user)
   {
      var command = BuildCommand(user);
      ExecuteCommand(command);
   }

   public SqlCommand BuildCommand(User user)
   {
      var connection = config.GetConnection(); // so that you can mock it
      var command = new SqlCommand(...)

      command = CreateArguments(command); // you can verify that method now
      command = FillArguments(command, user); // and this one too

      return command;
   }
} 
```

我不会一直走到这里，但我认为大纲传达了这个想法。走这条路将有助于使构建器的步骤可验证：您可以断言是否创建了正确的命令。这有一些价值，但仍然不会告诉您命令执行是否成功，因此值得考虑这是否值得使用您的测试预算！可以说，执行整个 DAL 的更高级别的集成测试可能更经济。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:57:36.373

我会将方法声明更改为：

public static void UpdateUser(User user, SqlConnection conn);

然后你可以传入一个配置好的 SQL 连接。在实际应用程序中，您依赖于`AppSettings`告诉您所需连接的信息，但在您的测试中，您给它一个假连接，只允许您记录针对该连接执行的命令。然后，您可以验证该方法是否正确请求存储的查询并发送正确的参数作为结果。

# android - 安卓 2 指缩放/捏合

> ID：10464277
> 
> 赞同：3
> 
> 时间：2012-05-05T17:31:40.083
> 
> 标签：android, opengl-es, zooming

我正在尝试能够执行两指缩放/捏合 glfrustum ，我不想使用缩放！

这是我的ontouch方法：

```
public boolean onTouchEvent(View v,MotionEvent event) {
         int pointers = 0;
         float distance = 0;
        switch (event.getAction()) {
        case (MotionEvent.ACTION_DOWN): // Touch screen pressed
            break;
        case (MotionEvent.ACTION_POINTER_2_DOWN):
            pointers = 2;
            distance = fingerDist(event);
            break;
        case (MotionEvent.ACTION_MOVE): // Contact has moved across screen

            if( pointers == 2 ){
                float newDist = fingerDist(event);
                float d = distance/newDist;
                renderer.onSurfaceChanged();
                distance = newDist;
            }
        }
        return true;

    }

        protected final float fingerDist(MotionEvent event){
            float x = event.getX(0) - event.getX(1);
            float y = event.getY(0) - event.getY(1);
            return FloatMath.sqrt(x * x + y * y);
        } 
```

这是我在渲染器上的表面方法：

```
public void onSurfaceChanged(GL10 gl, int width, int height ) {
        // TODO Auto-generated method stub
        gl.glViewport(0, 0, width, height);
        float ratio = (float) width / height;
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();

        gl.glFrustumf(-ratio, ratio, -1, 1, 1*d, 25*d);
    } 
```

它不起作用，因为我不知道如何从活动中调用 onSurfaceChanged 方法，并且当我在那里编写新的缩放方法时，它无法识别 gl.glfrusrum！知道如何解决这个问题吗？

# c# - 创建一个接受动态值的自定义日期范围验证器

> ID：10464281
> 
> 赞同：1
> 
> 时间：2012-05-05T17:31:46.923
> 
> 标签：c#, validationattribute

现有的 .Net 范围属性验证器仅接受静态字符串值。我想创建一个接受动态值的验证器。例如，我希望年龄范围是 16 岁到 200 岁。如果我输入最低生日为 1996 年至今的一年后的今天，最低年龄现在是 17 岁，并且会逐年上升。这是可能的还是我应该在视图模型中手动验证？ **编辑：**我在这里没有使用 asp，这是一个桌面应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:03:30.240

我通过使用[CustomValidationAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute%28v=vs.95%29.aspx)解决了这个问题。此属性基本上只是一个进行验证的静态方法，我将最小/最大生日值放入该方法中。不幸的是，这是我能找到的唯一方法来处理希望日期是动态的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T10:40:31.560

完成了

```
 $("#YourField").data("val-range-max", $("#AFieldThatStoresTheMaxValue").value()); 
```

});

# AFieldThatStoresTheMaxValue => 可能是 HiddenFor...

# ruby-on-rails - Ruby“不关心变量”与Prolog的一样吗？

> ID：10464282
> 
> 赞同：4
> 
> 时间：2012-05-05T17:31:52.607
> 
> 标签：ruby-on-rails, ruby

所以我对 Prolog 和 Ruby 都很陌生。在大学学习 Prolog，在我自己学习 Ruby。我在想 Ruby 中是否像 Prolog 中那样存在“不关心”或“丢弃”变量。

我刚打开 irb 就这样做了（假设下划线是“不在乎”的标志）

```
1.9.2-p290 :003 > _, b, c = [1,2,3]
 => [1, 2, 3] 
1.9.2-p290 :004 > b
 => 2 
1.9.2-p290 :005 > c
 => 3 
```

结果实际上是我所期望的。但是后来我很好奇下划线的价值在哪里以及它是什么类

```
1.9.2-p290 :006 > _
 => 3 
1.9.2-p290 :008 > _.class
 => Fixnum 
```

嗯，这很奇怪。它不应该把价值丢掉吗？为什么要存储其他值？

然后用下划线进行更多测试，我看到了实际发生的情况，它具有最后的评估值。

```
1.9.2-p290 :017 > 1
 => 1 
1.9.2-p290 :018 > _
 => 1 
1.9.2-p290 :019 > "string"
 => "string" 
1.9.2-p290 :020 > _
 => "string" 
1.9.2-p290 :021 > Hash
 => Hash 
1.9.2-p290 :022 > _
 => Hash 
```

所以我的问题是：实际上下划线是为了什么？它真的是一个无关变量还是其他什么？它的真名是什么？（因为我在谷歌上找不到很多“不关心红宝石变量”的东西）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T17:36:48.007

让你震惊的是，你看到了下划线的两种不同用法。

1.  在参数列表中，它就像在 Prolog 中的“无关变量”。

2.  在参数列表之外，它只是一个普通的标识符。在 IRB 中，它绑定到先前的结果。由于您的最后一个输入是`c = 3`，所以 _ 是 3。不过，这仅在 IRB 中 - 它不会发生在普通的 Ruby 程序中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-06T13:03:22.090

1.  在 Ruby*社区*中，`_`表示“不在乎”。
2.  在 Ruby*语言中*，`_`没有任何意义，它是一个和其他任何标识符一样的标识符。
3.  在 YARV Ruby*解释器*中，“未使用的局部变量”警告被抑制`_`，因此在 #1 中编码了约定。
4.  在*IRb*中，`_`绑定到最后一个表达式的值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T16:54:44.580

Ruby 中的下划线就像任何普通变量一样，除了它比这更特殊一点。它确实代表“我不在乎”。

例如，假设您正在循环一个数组，该数组的元素是 3 元素数组：

```
array = [[1,2,3],[4,5,6],[7,8,9],...] 
```

假设您只对中间值感兴趣。你`_`可以这样做：

```
array.each do |_, number, _|
  # do something
end 
```

如果您尝试对另一个变量执行此操作，您将收到复制变量的（预期）错误：

```
array.each do |v, number, v|
  # do something
end

=> SyntaxError: (eval):2: duplicated argument name 
```

# javascript - 向下滚动时，有没有办法在我的网站上制作一个紧随其后的 div？

> ID：10464287
> 
> 赞同：1
> 
> 时间：2012-05-05T17:32:42.683
> 
> 标签：javascript, css, xhtml, prototypejs

我正在尝试复制这个： http: [//twitter.github.com/bootstrap/base-css.html#typography](http://twitter.github.com/bootstrap/base-css.html#typography)（顶部有标签：|排版|代码表|表单|按钮|Glyphicons的图标|)。我想复制同样的快速作用效果。

我想让这个 div 做同样的事情：

```
#panel {
    margin: auto;
    border-bottom: 1px solid rgba(0,0,0,.6);
    border-top: 0;
    box-shadow: 0 1px rgba(0,0,0,.1),
    1px 0 rgba(0,0,0,.1),
    -1px 0 rgba(0,0,0,.1),
    0 -1px rgb(255,255,255) inset,
    0 1px 2px rgba(0,0,0,.2) inset,
    1px 0 rgb(255,255,255) inset,
    -1px 0 rgb(255,255,255) inset;
    background: #E8E8E8;    
    width: 75%;
    -webkit-border-bottom-left-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    -webkit-border-bottom-right-radius: 5px;
    color: rgba(0,0,0,.7);
    text-shadow: 0 1px white;
    padding: 2px 0px 2px 8px;
    margin-top: -149px;
    text-align: left;
    font-size: 11px;
} 
```

在我的网站上：http: [//www.bobbaxtrade.com](http://www.bobbaxtrade.com)

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:03:06.300

我在这里创建了 jsFiddle：http: [//jsfiddle.net/cBk7q/](http://jsfiddle.net/cBk7q/)

因此，您需要在您的 CSS 规则中添加一个类，以使您的 div 在窗口顶部保持静态：

```
.fixed {
    position: fixed;
    top: 0;
    left: 0;
} 
```

然后，添加一个 jQuery 函数来绑定滚动事件并在到达所需位置时添加固定类：

```
<script type="text/javascript">
    var $mydiv = $("#mydiv"),
        origTop = $("#mydiv").position().top;

    $(window).scroll(function(e) {
        if( document.body.scrollTop > origTop) {
            console.log($mydiv.hasClass('fixed'));
            $mydiv.addClass("fixed");
        }
        else {
            console.log('c ' + (document.body.scrollTop > origTop));
            $mydiv.removeClass("fixed");
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:13:36.560

Bootstrap 网站向您解释了[如何使用此功能](http://twitter.github.com/bootstrap/components.html#navbar)。

如果您使用的是引导程序，则可以使用 CSS 类`navbar-fixed-top`来获取此行为：

```
<div id="panel" class="navbar navbar-fixed-top">
  ...
</div> 
```

如果你想要效果，导航栏只有在滚动后才变得固定，你需要`navbar-fixed-top`使用一些 JavaScript 动态添加类（取自[LessCSS](http://lesscss.org)）。

假设你有一些 HTML

```
<!-- some content -->
<div id ="panel">
  …
</div>
<!-- enough other content to make the document scroll --> 
```

和一些 CSS

```
.navbar-fixed-top {
  position: fixed;
  top: 0;
  left: 0;
} 
```

然后下面的 JS 会给你请求的行为。

```
var docked = false;
var menu = document.getElementById('panel');
var init = menu.offsetTop;

function scrollTop() {
  return document.body.scrollTop || document.documentElement.scrollTop;
}

window.onscroll = function () {
  if (!docked && (menu.offsetTop - scrollTop() < 0)) {
    menu.style.top = 0;
    menu.className = 'navbar-fixed-top';
    docked = true;
  } else if (docked && scrollTop() <= init) {
    menu.style.top = init + 'px';
    menu.className = menu.className.replace('navbar-fixed-top', '');
    docked = false;
  }
}; 
```

此示例适用于 Firefox、Chrome、Opera 和 Safari。Internet Explorer 需要一种解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T18:26:26.427

If you're using jQuery, try [https://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed). Basic usage would be:

```
$(document).ready(function() {
    $('#panel').scrollToFixed();
}); 
```

... however, see the link for options (e.g. allowing for footer panels when the user scrolls down, etc).

# c++ - 为什么当枚举或 int 值作为 bool 函数的参数传递时 gcc 不发出警告？

> ID：10464291
> 
> 赞同：10
> 
> 时间：2012-05-05T17:32:55.713
> 
> 标签：c++, gcc, g++, gcc-warning

我有以下代码：

```
typedef enum
{
    FOO,
    BAR,
    BAZ
} foo_t;

static void afunc(bool is_it_on)
{
    /* do the job */
}

int main(void)
{
    afunc(BAZ);
    return 0;
} 
```

编译此代码不会生成任何警告消息，即使`-Wall -Wextra`为编译器提供了选项。我什至尝试过使用`-Wconversion`选项，但没有效果，因为g++`bool`的`enum`大小似乎相同。`enum`（据我所知，规范中没有定义类型的大小）

我梳理了 gcc 手册，并没有发现任何关于它的信息。

问题：

*   在这种情况下，有没有办法强制编译器生成警告？
*   还是这种隐式转换在 c++ 规范中是合法的？

我正在使用的编译器：gcc 4.1.2

* * *

**已编辑**

结论：

唯一可行的解​​决方案似乎是定义一个新类型来表示 0 或 1，并使用它来代替`bool`.

代码如下所示，并且 g++ 抱怨类型转换：

```
typedef enum
{
    FOO1,
    FOO2
} foo_t;

typedef enum
{
    MY_FALSE,
    MY_TRUE
} my_bool_t;

void foo(my_bool_t a)
{
}

int main(void)
{
     /* 
      * gcc generates an error.
      * error: cannot convert ‘foo_t’ to ‘my_bool_t’ 
      * for argument ‘1’ to ‘void foo(my_bool_t)’
      */
    foo(FOO1);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T17:42:59.307

是的，那些隐式转换是完全合法的。

C++11 草案 n3290，§4.12*布尔转换*：

> 算术、无范围枚举、指针或指向成员类型的指针的纯右值可以转换为 bool 类型的纯右值。将零值、空指针值或空成员指针值转换为 false；任何其他值都将转换为 true。std::nullptr_t 类型的纯右值可以转换为 bool 类型的纯右值；结果值为假。

这些转换的警告（对于算术类型）可能会导致大量警告遍布整个地方，我认为它是不可管理的。

在 C++11 中，您可以使用*作用域枚举*来防止隐式转换：

`Foo`由于缺少从to的转换，这无法编译`bool`：

```
enum class Foo { ONE };

void tryit(bool b) { }

int main()
{
    tryit(Foo::ONE);
} 
```

# android - 全屏图像按钮

> ID：10464300
> 
> 赞同：-1
> 
> 时间：2012-05-05T17:33:45.943
> 
> 标签：android

我试图创建一个全屏 Imagebutton。但我不断得到灰色的边框。

```
<ImageButton
        android:id="@+id/StartButton"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"        
        android:src="@drawable/startscreen" /> 
```

我尝试在 Eclipse 上将图片拉伸到全屏，但图片周围仍然显示灰色边框。

我想知道这是由于我的设置分辨率或图片分辨率。我正在制作银河笔记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:08:50.440

这应该删除灰色边框

```
<ImageButton
        android:id="@+id/StartButton"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"        
        android:src="@drawable/startscreen" 
        android:background="#000000"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:13:16.927

@Proxy32 的想法可能是最好的。或者不要使用`android:src`属性，而是使用`android:background`. 您也可以使用简单的`Button`替代方法，将背景设置为您的可绘制对象并保留文本。

# python - 如何在不卸载的情况下使用多个版本的 Python

> ID：10464301
> 
> 赞同：14
> 
> 时间：2012-05-05T17:33:47.100
> 
> 标签：python, python-3.x, version, nltk

我面临着一个独特的情况，有点微不足道但很痛苦。

我需要使用 Python 2.6.6，因为 NLTK 没有移植到 Python 3（这是我可以收集的）。

在不同的代码（同时工作）中，有一个集合计数器函数，它仅在 Python 3 中可用，但在 Python 2.6.6 中不可用。

所以，每次我在两个代码之间切换时，我都需要安装和卸载版本。这太浪费时间了。

关于如何指定要使用的版本有什么建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-05T18:13:20.413

**安装 Python 3**

Python 3.3 及更高版本将 a`py.exe`放入 windows 文件夹。[[链接](https://stackoverflow.com/questions/5087831/how-should-i-set-default-python-version)] 此可执行文件用于通过文件的第一行确定 python 版本：

```
#!/usr/bin/python2.7 
```

将使用 Python 2.7 执行。在安装其他 Python 版本之后，您必须安装 Python 3 版本。

其他资源：[https ://docs.python.org/3/using/windows.html#customization](https://docs.python.org/3/using/windows.html#customization)

**pywin** [https://pypi.python.org/pypi/pywin](https://pypi.python.org/pypi/pywin)

**旧解决方案**

我猜你用窗户。我用 hack 解决了这个问题：

每次我在 Windows 上启动 python 时，都会使用一个 python.bat。**这将启动一个 python.py，它会在#!**之后分析文件的标题！对于python版本。

要启动 example.py，我在控制台中输入

```
python example.py 
```

但它也可以按**klick**启动。

这是我的 python 文件 C:\bin\python.py

```
#!/usr/bin/env python2
import sys
import os
args = sys.argv
if len(args) <= 1:
    # no arguments
    # start python console
    i = os.system('C:\bin\python2.bat' + " ".join(args[1:]))
    if type(i) != int:
        i = 0
    exit(i)

def analyse(filename, default = ''):
    '''=> '2', '3', default '''
    try:
        f = open(filename)
    except IOError:
        # file not found
        return default
    firstLine = f.readline()
    if firstLine.startswith('#!'):
        if 'python2' in firstLine:
            return '2'
        if 'python3' in firstLine:
            return '3'
        i = firstLine.find(' ')
        if i != -1:
            # analyse from end of path on
            in2 = '2' in firstLine[i:]
            in3 = '3' in firstLine[i:]
            if in2 and not in3:
                return '2'
            if in3 and not in2:
                return '3'
        else:
            # analyse path
            in2 = '2' in firstLine
            in3 = '3' in firstLine
            if in2 and not in3:
                return '2'
            if in3 and not in2:
                return '3'
    return default

no = analyse(args[1], default = '2')
if args[1][-1:] == 'w':
    # python win
    cmd = 'C:\bin\pythonw%s.bat'
else:
    cmd = 'C:\bin\python%s.bat'
i = os.system(cmd % no + ' ' + " ".join(args[1:]))

if type(i) != int:
    i = 0
exit(i) 
```

这是 C:\bin\python.bat 文件

```
@echo off
C:\bin\python2 C:\bin\python.py %*
rem this may also work:
rem C:\bin\python.py %* 
```

在你开始的每个文件中，你必须放

```
#!/bin/env/python3 
```

或者

```
#!/bin/env/python2 
```

默认是python2

然后我将这些文件添加到文件夹中：

C:\bin\python2.bat

```
@echo off
C:\python27\python.exe %* 
```

C:\bin\pythonw2.bat

```
@echo off
C:\python27\pythonw.exe %* 
```

C:\python3.bat

```
@echo off
C:\python32\pythonw.exe %* 
```

C:\bin\pythonw3.bat

```
@echo off
C:\python32\pythonw.exe %* 
```

如果您使用的是 python26 而不是 python27，那么您需要更改

```
C:\python27 
```

至

```
C:\python26 
```

等等。与不使用 python 32 的 python 相同。

您可能还希望每次单击启动 python**文件**

然后这样做：

右击 .py 文件 -> 打开方式 -> 选择 C:\bin\python.bat

如果您遇到问题，请联系我或发表评论。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-05T17:48:33.107

您只需在不同的目录中安装多个版本，然后使用您要使用的 Python 版本运行 Python 程序。像这样：

```
C:\Python26\Python.exe thescript.py 
```

或类似的。

virtualenv 所做的是它为您提供*了相同 python 版本*的许多单独的“虚拟”安装。这是一个完全不同的问题，因此它不会以任何方式帮助您。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-05T21:46:55.830

对于那些使用 Windows 的人，如果您不反对使用 PowerShell，则可以按照其他答案中的说明分别安装 python 2 和 3。然后你可以这样做：

```
Set-Alias python27 [some path]\python27\python.exe 
Set-Alias python33 [some path]\python33\python.exe 
```

为运行每个版本创建一个别名。

此链接中描述了保留别名：[https ://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_aliases#saving-aliases](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_aliases#saving-aliases)

为了成功加载该链接将让您创建的配置文件，您可能需要更改执行策略。

```
Set-ExecutionPolicy RemoteSigned 
```

应该可以解决问题，但如果您想了解更多关于执行策略的信息，您可能需要点击此链接：[https ://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about /about_execution_policies](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_execution_policies)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-05T17:35:13.200

使用 virtualenv，它允许您创建动态 python 环境。在这里查看 python 的页面。

[http://pypi.python.org/pypi/virtualenv](http://pypi.python.org/pypi/virtualenv)

有关在 windows 上的 virtualenv 中安装包的相关回答问题（而不是系统范围）[我可以将 Python windows 包安装到 virtualenvs 中吗？](https://stackoverflow.com/q/3271590/705086)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-05T17:41:29.620

使用[Pythonbrew](https://github.com/utahta/pythonbrew)，它超级容易安装，并且允许您非常轻松地安装、切换，或者安全地临时使用不同的 python 版本。

安装 pythonbrew 后：

```
#to install new python versions is as simple as:
pythonbrew install 2.7.2 3.2
#to use a particular version in the current shell:
pythonbrew use 3.2
#to uninstall:
pythonbrew uninstall 2.7.2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-24T18:22:16.947

OP 请求有点过时了，尤其是现在 NLTK 确实有一个 py3.x 端口。请参阅[使用 tar.gz 下载在 Ubuntu 13.10 上安装 nltk 3.0](https://stackoverflow.com/questions/22573251/install-nltk-3-0-on-ubuntu-13-10-using-tar-gz-download)

这是让 python3 与 NLTK 一起工作的方法。

```
$ sudo apt-get install python3-pip
$ sudo pip3 install pyyaml
$ wget http://www.nltk.org/nltk3-alpha/nltk-3.0a3.tar.gz
$ tar -xzvf nltk-3.0a3.tar.gz
$ cd nltk-3.0a3/
$ sudo python3 setup.py install
$ python3
>>> import nltk
>>> from nltk.corpus import brown
>>> print(brown.sents()[0])
['The', 'Fulton', 'County', 'Grand', 'Jury', 'said', 'Friday', 'an', 'investigation', 'of', "Atlanta's", 'recent', 'primary', 'election', 'produced', '``', 'no', 'evidence', "''", 'that', 'any', 'irregularities', 'took', 'place', '.'] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-05T17:37:24.573

这个页面有一个`collections.Counter`适用于 Python 2.6 的实现：

*   [http://code.activestate.com/recipes/576611/](http://code.activestate.com/recipes/576611/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-05T17:38:47.433

不确定这是否是您想要的，但我曾经长期忍受这个[http://www.portablepython.com/](http://www.portablepython.com/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-05T17:35:41.867

你应该看看[virtualenv](http://pypi.python.org/pypi/virtualenv)。我是从[这篇](http://www.clemesha.org/blog/modern-python-hacker-tools-virtualenv-fabric-pip/)博客文章中了解到的，其中讨论了`pip`和`fabric`，也是对 Python 开发人员非常有用的工具。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-05T20:39:28.767

我确实在我的机器（Windows）上使用了至少 3 或 4 个版本的 Python。来自[http://python.org/](http://python.org/)的安装程序自动将它们放置在：

```
c:\Python26
c:\Python27
c:\Python32 
```

和

```
c:\Python24 
```

在一台机器上。我主要使用 Python 2.7，因为一些应用程序使用 wxPython 以及旧的控制台代码。这`python.exe`没有重命名。顺便说一句，**Python 2.7 还支持`collections.Counter`**.

和不包含在我的 PATH 中`c:\Python26`。`c:\Python24`在`c:\Python32\`中，exe 被重命名为 py.exe。这样，`python some.py`启动 Python 2.7，并`py another.py`启动 Python 3.2。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-01T17:16:59.897

看看[WinPython](http://winpython.sourceforge.net/)，一个很好的可移植/可安装 Windows 的 Python 发行版。

> **便携**：预配置，它应该在 Windows 下的任何机器上开箱即用（没有任何要求），并且包含 WinPython 的文件夹可以移动到具有大多数应用程序设置的任何位置（本地、网络或可移动驱动器）
> 
> **灵活**：可以根据需要安装（或者我应该写“使用”，因为它是可移植的）尽可能多的 WinPython 版本（如隔离和自洽环境），即使这些版本运行不同版本的 Python（2.7、3.3）或不同版本同一台机器上的架构（32 位或 64 位）

它还允许您轻松地将给定的 python 版本注册和取消注册为系统默认版本。

但即使是可移植的，您也可以创建 python 可执行文件的快捷方式并将其放在路径中的某个位置。只需将不同版本的快捷方式命名为不同的名称。然后你可以使用：

```
python_3_64bit_shortcut your_program.py 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-28T15:26:43.973

如果你说的是shell，比如在linux中，如果你安装了python 3，你可以用`python3`命令单独调用它。Python 2 只是使用`python`.

至少这是我使用类似 Ubuntu 的系统的经验，我没有使用过其他 Linux 环境。

我意识到这个问题已经将近一年了，但是 NLTK 已被移植到 Python 3（或者至少在撰写本文时是这样）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-21T15:12:08.917

您可以在 shebang 行中指定您想要的版本。当我的 Ops 人员设置的 VM 在 /usr/bin/python2.6 中有 Python 2.6 时，我刚刚遇到了这个问题，而我需要 2.7 来获得一些功能。他在 /usr/bin/python2.7 为我安装了它。

我的老舍邦：

```
#!/usr/bin/env python 
```

停止工作，因为 /usr/bin/python 是 /usr/bin/python2.6 的链接。最终解决这个问题并在 Windows、Linux 和 OSX 上工作的方法是将 shebang 更改为：

```
#!/usr/bin/env python2.7 
```

我相信它应该适用于任何版本。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-19T22:26:31.493

最简单的解决方案：重命名路径所在位置的文件，例如： [![在此处输入图像描述](../Images/2b999c239fc401a9364d46be1368e845.png)](https://i.stack.imgur.com/gbGPl.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-29T15:22:38.093

您可以使用 py 启动器，它与 python 可分发一起安装：

```
py -2    # default python 2
py -2.7  # specifically python 2.7
py -3    # default python 3
py -3.7  # specifically python 3.7 
```

如果您需要执行具有特定版本的脚本，您可以执行以下操作：

```
py -3.7 my_script.py 
```

# ruby - 如何与 IRB 进行 Ruby 语言测验程序交互？

> ID：10464305
> 
> 赞同：1
> 
> 时间：2012-05-05T17:34:29.537
> 
> 标签：ruby, irb

我希望编写一个测验应用程序来帮助刚接触 Ruby 语言的人（比如我自己）学习 Ruby。

我有兴趣编写一个程序来提示用户一个问题，启动一个交互式 Ruby Shell (IRB) 会话，设置前置条件，允许用户与 shell 交互，然后检查后置条件以查看是否用户按照提示正确回答了问题。例如，可以提示用户组合两个包含星期几的数组。将启动 shell 会话，并设置先决条件：

```
days1 = ["Mon", "Tue", "Wed"]
days2 = ["Thu", "Fri", "Sat", "Sun"] 
```

然后，用户将能够与 shell 交互，并且可能会执行以下操作：

```
days = days1 + days2
=> ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"] 
```

然后程序将评估后置条件以验证两个数组是否已组合。如果提示指定必须以特定方式完成，则程序可能还必须具体查看任务是如何完成的。

**处理与 IRB 交互的最佳方式是什么？**一个想法是使用 Expect，但我想知道您是否有更好的方法，或者可能只涉及使用 Ruby 的方法。我不想重新发明轮子，所以如果已经有这样的程序可用，我愿意使用它而不是进行定制开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:09:56.377

您可能会查看 irb 的替代方案，即 pry。使用 pry，您的任务对我来说看起来更容易。

```
require 'pry'

days = nil
days1 = ["Mon", "Tue", "Wed"]
days2 = ["Thu", "Fri", "Sat", "Sun"]

binding.pry :quiet => true

if days == (days1 + days2)
    puts "Congratulations!!!"
else
    puts "You did something wrong"
end 
```

*唯一的问题是**绑定**命令会自动调用**whereami**命令，该命令打印绑定点的周围上下文。我还不知道怎么取消。*已修复，感谢栏杆。

# c++ - 为什么 C++ 不允许基类实现派生类的继承接口？

> ID：10464308
> 
> 赞同：13
> 
> 时间：2012-05-05T17:34:46.610
> 
> 标签：c++, class, inheritance, interface

这就是我所说的

```
// some guy wrote this, used as a Policy with templates
struct MyWriter {
  void write(std::vector<char> const& data) {
    // ...
  }
}; 
```

在一些现有的代码中，人们没有使用模板，而是使用interfaces+type-erasure

```
class IWriter {
public:
  virtual ~IWriter() {}

public:
  virtual void write(std::vector<char> const& data) = 0;
}; 
```

其他人希望同时使用方法和写入

```
class MyOwnClass: private MyWriter, public IWriter {
  // other stuff
}; 
```

MyOwnClass 是根据 MyWriter 实现的。MyOwnClass的继承成员函数为什么不自动实现IWriter的接口？相反，用户必须编写只调用基类版本的转发函数，如

```
class MyOwnClass: private MyWriter, public IWriter {
public:
  void write(std::vector<char> const& data) {
    MyWriter::write(data);
  }
}; 
```

我知道，在 Java 中，当您有一个实现接口的类并且派生自恰好具有合适方法的类时，该基类会自动实现派生类的接口。

为什么 C++ 不这样做？拥有它似乎是一件很自然的事情。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T17:46:49.257

这是多重继承，并且有两个具有相同签名的继承函数，**它们都有实现**。这就是 C++ 与 Java 不同的地方。

因此，调用`write`静态类型为的表达式对于`MyBigClass`需要哪个继承函数是模棱两可的。

~~如果`write`仅通过基类指针调用，则`write`不需要在派生类中进行定义，这与问题中的主张相反。~~ 现在问题已更改为包含纯说明符，因此必须在派生类中实现该函数以使该类具体且可实例化。

`MyWriter::write`不能用于 的虚调用机制`MyBigClass`，因为虚调用机制需要一个函数接受一个隐式`IWriter* const this`，并且`MyWriter::write`接受一个隐式`MyWriter* const this`。需要一个新函数，它必须考虑到`IWriter`子对象和`MyWriter`子对象之间的地址差异。

理论上编译器可以自动创建这个新函数，但它会很脆弱，因为基类的更改可能会突然导致选择一个新函数进行转发。它在 Java 中不那么脆弱，只有单继承是可能的（转发到什么函数只有一个选择），但在支持完全多继承的 C++ 中，选择是模棱两可的，我们甚至还没有开始钻石继承还是虚拟继承呢。

实际上，虚拟继承解决了这个问题（子对象地址之间的差异）。但它需要额外的开销，而这在大多数情况下是不必要的，而 C++ 的指导原则是“你不用为你不使用的东西付费”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T22:47:45.490

> 为什么 C++ 不这样做？拥有它似乎是一件很自然的事情。

实际上，不，拥有它是非常不自然的事情。

请注意，我的推理是基于我自己对“常识”的理解，因此可能存在根本性的缺陷。

你看，你有两种不同的方法，第一个在 MyWriter 中，它是非虚拟的，第二个在 IWriter 中是虚拟的。尽管“看起来”相似，但它们完全不同。

我建议检查[这个问题](https://stackoverflow.com/questions/9660207/as-a-rule-of-thumb-make-all-your-methods-virtual-in-c-sound-advice)。非虚方法的好处在于，无论你做什么，只要它们不调用虚方法，它们的行为就永远不会改变。即从您的类派生的具有非虚拟方法的人不会通过屏蔽现有方法来破坏现有方法。虚拟方法旨在被覆盖。这样做的代价是有可能通过不正确地覆盖虚拟方法来破坏底层逻辑。这是你问题的根源。

假设您的建议是允许的。（自动转换为具有多重继承的虚拟）有两种可能的解决方案：

**解决方案#1** MyWriter 变为虚拟的。后果：世界上所有现有的 C++ 代码都变得很容易通过拼写错误或名称冲突而被破坏。MyWriter 方法最初不应该被覆盖，所以当有人从 MyOwnClass 派生时，突然将其变成虚拟意志（墨菲定律）会破坏 MyWriter 类的底层逻辑。这意味着突然将 MyWriter::write 设为虚拟是一个坏主意。

**解决方案 #2** MyWriter 保持静态 BUUUT，它作为虚拟方法临时包含在 IWriter 中，直到被覆盖。乍一看没什么好担心的，但让我们考虑一下。IWriter 实现了您心中的某种概念，它应该做一些事情。MyWriter 实现了另一个概念。要将 MyWriter::write 指定为 IWriter::write 方法，您需要两个保证：

1.  编译器必须确保 MyWriter::write 做 IWriter::write() 应该做的事情。
2.  编译器必须确保从 IWriter 调用 MyWriter::write 不会破坏 MyWriter 代码程序员希望在其他地方使用的现有功能。

所以，问题是编译器不能保证这一点。函数具有相似的名称和参数列表，但根据墨菲定律，这意味着它们可能正在做完全不同的事情。（例如，sinf 和 cosf 具有相同的参数列表），并且编译器不太可能能够预测未来并确保在开发过程中不会更改 MyWriter，使其与 IWriter 不兼容。所以，由于机器不能自己做出合理的决定（没有人工智能），它必须问你，程序员——“你想做什么？”。你说“将虚拟方法重定向到 MyWriter::write()。它完全不会破坏任何东西。我认为。”。

这就是为什么您必须手动指定要使用的方法....

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T09:20:01.263

*自动*执行它是不直观且令人惊讶的。C++ 不假定多个基类相互关联，并通过为非静态成员定义嵌套名称说明符来保护用户免受其成员之间的名称冲突。将隐式声明添加到`MyOwnClass`签名来自`IWriter`和`MyWriter`冲突的地方与保护名称是对立的。

然而，C++11 扩展确实让我们更接近了。考虑一下：

```
class MyOwnClass: private MyWriter, public IWriter {
public:
  void write(std::vector<char> const& data) final = MyWriter::write;
}; 
```

这种机制是安全的，因为它表示`MyWriter`不期望任何进一步的覆盖，并且方便，因为它命名了将被“加入”的函数签名，仅此而已。此外，`final`如果函数不是隐式的，则格式`virtual`错误，因此它会检查签名是否与虚拟接口匹配。

一方面，大多数接口不只是碰巧以这种方式匹配。将此功能定义为仅使用相同的签名将是安全的，但很少有用。将其定义为委托函数体的快捷方式会很有用但很脆弱。所以它可能不是一个很好的功能

另一方面，这是一种很好的设计模式，可以在不需要时提供非虚拟的功能。因此，鉴于这个习语，我们可能会用它来编写好的代码，即使它与当前的实践不匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-05T20:41:38.547

> 为什么 C++ 不这样做？

我不确定你在这里问什么。*可以*重写 C++ 以允许这样做吗？是的，但目的是什么？

因为`MyWriter`和是完全不同的类，所以在 C++ 中通过 . 的实例`IWriter`调用 的成员是非法的。成员指针具有完全不同的类型。就像 a不能转换为 a 一样，a 也不能转换为a 。`MyWriter``IWriter``MyWriter*``IWriter*``void (MyWriter::*)(const std::vector<char>&)``void (IWriter::*)(const std::vector<char>&)`

C++ 的规则不会因为*可能*存在结合两者的第三类而改变。两个班级都不是彼此的直接父母/子女。因此，它们被视为完全不同的类。

请记住：成员函数总是带有一个附加参数：`this`指向它们指向的对象的指针。您不能`void (MyWriter::*)(const std::vector<char>&)`调用`IWriter*`. 第三个类可以有一个将自己转换为正确基类的方法，但它必须实际上*有这个方法*。因此，您或 C++ 编译器都必须创建它。C++ 的规则要求这样做。

考虑在没有派生类方法的情况下要使这项工作发生什么。

一个函数得到一个`IWriter*`. `write`用户只使用`IWriter*`指针调用它的成员。那么......编译器究竟如何生成要调用的代码`MyWriter::writer`？记住：`MyWriter::writer` **需要**一个`MyWriter`实例。`IWriter`和之间没有关系`MyWriter`。

那么编译器究竟如何在本地进行类型强制呢？编译器必须检查虚函数以查看要调用的实际函数是采用`IWriter`还是其他类型。如果它采用另一种类型，则必须将指针转换为其真实类型，然后再转换为虚函数所需的类型。完成所有这些之后，它就可以拨打电话了。

所有这些开销都会影响*每个*虚拟呼叫。他们所有人都必须至少检查是否要调用实际函数。以防万一，每次调用还必须生成代码来进行类型转换。

每个虚函数调用都会有一个“获取类型”和条件分支。即使*永远*不可能触发该分支。因此，无论您是否使用它，您都会为某些东西付费。这不是 C++ 的方式。

更糟糕的是，虚拟调用的直接 v-table 实现不再可能。进行虚拟分派的最快方法不是符合要求的实现。C++ 委员会***不会***做出任何使此类实现成为不可能的更改。

再次，为了什么目的？就为了不用写一个简单的转发函数？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-05T18:51:53.253

只需让 MyWriter 派生自 IWriter，消除 MyOwnClass 中的 IWriter 派生，然后继续生活。这应该可以解决问题并且不应该干扰模板代码。

# http - 如何使用 `gen_tcp` 解析 HTTP 请求？

> ID：10464311
> 
> 赞同：2
> 
> 时间：2012-05-05T17:34:54.493
> 
> 标签：http, erlang

下面是解释如何使用的一个示例的一部分`gen_tcp`。然而，几乎所有的教程都只会向您展示一个回显服务器，但没有人会解析真实世界的 HTTP 请求。

```
 handle_connect(Socket, BinaryList, Count) ->
    io:format("handle_connect ~p~n", [self()]),
    case gen_tcp:recv(Socket, 0) of
    {ok, Binary} ->
        io:format("request is :~s~n", Binary),
        case gen_tcp:send(Socket, Binary) of
            ok ->
                handle_connect(Socket, BinaryList, Count);
            {error, Reason} ->
                io:format("send failed~n"),
                gen_tcp:close(Socket)
        end; 
```

我很好奇如何解析 Erlang 中接收到的数据[`gen_tcp:recv/\[2,3\]`](https://erlang.org/doc/man/gen_tcp.html#recv-2)。我浏览了代码，`lib/inets-5.7.1/src/http_server`但模块太多，我仍然无法弄清楚解析 HTTP 请求的基础知识是什么。

谁能告诉我如何解析 HTTP 请求，以及 Web 框架采用什么方法？谢谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:22:10.537

Erlang 有几个轻量级的 Web 服务器库，包括：

*   [牛仔](https://github.com/extend/cowboy)
*   [麻糬网](https://github.com/mochi/mochiweb.git)
*   [Misultin](https://github.com/ostinelli/misultin.git)（不再维护）

还有[Yaws](https://github.com/klacke/yaws.git)，它更能与Apache相媲美。我建议查看 Cowboy 的代码，因为它非常模块化。

可以在这里找到回答您问题的捷径：

[http://www.erlang.org/doc/man/erlang.html#decode_packet-3](http://www.erlang.org/doc/man/erlang.html#decode_packet-3)和 [https://github.com/extend/cowboy/blob/master/src/cowboy_http_protocol.erl#L99](https://github.com/ninenines/cowboy/blob/5d1cf363587870db7bb2333456d4c9d1b6ad1c5f/src/cowboy_http.erl#L341)

# facebook - 在 MeteorJS 框架中运行 facebook 身份验证？

> ID：10464317
> 
> 赞同：9
> 
> 时间：2012-05-05T17:35:28.207
> 
> 标签：facebook, client-side, meteor

我正在开始我对 Meteor 框架世界的小探索，我认为用它做一些有点 Facebook 的事情会很有趣。

第一步是按照在流星中创建应用程序教程然后将 FB 代码添加到模板中，如下所示：[https ://developers.facebook.com/docs/opengraph/tutorial/#authenticate](https://developers.facebook.com/docs/opengraph/tutorial/#authenticate)

可悲的是，它似乎根本无法在页面上运行。事实上，我刚刚意识到，如果我`alert('foo');`在我的流星页面中添加类似的内容，它就不会执行。有趣的。

因此，尽管 Metor 非常出色，但它并没有像我期望的那样工作……（震惊，恐怖！）。

如何在这个框架中执行客户端 JS？（特别是希望在页面上创建一个 facebook JS 对象？）

谢谢！

**更新（2013 年 1 月）：** Meteor 发布了 0.5.0，它内置了身份验证和 facebook 登录支持。

文档在这里：[http ://docs.meteor.com/#accountsui](http://docs.meteor.com/#accountsui)

本质上，您在 shell 中运行一些命令

```
 meteor add accounts-password
     meteor add accounts-ui
     meteor add accounts-facebook 
```

然后在您的代码中添加登录按钮。

```
 {{loginButtons}} 
```

那你进去了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T06:20:55.100

对外部 API 进行任何类型的身份验证，同时从浏览器（meteor 堆栈中的客户端）传递 App ID、机密等，这可能是一个*非常糟糕的主意。*

我已经成功地在服务器上实现了完整的 facebook 身份验证。

通过从应用程序的工作目录运行来添加`accounts-facebook`智能包。`meteor add accounts-facebook`这将允许您配置对 OAuth 单用户以及 OAuth 多用户 facebook 身份验证工作流的支持。有关更多信息，请参阅[Meteor 帐户系统](http://docs.meteor.com/#accounts_api)文档。

添加`accounts-facebook`智能包后，您可以按照以下方式做一些事情......

在应用程序的工作目录下，在`server/server.js`（或目录下的类似文件`server`）中，实现如下内容：

```
Meteor.startup(function () {
  Accounts.loginServiceConfiguration.remove({
    service: "facebook"
  });

  Accounts.loginServiceConfiguration.insert({
    service: "facebook",
    appId: process.env.FACEBOOK_APP_ID,
    secret: process.env.FACEBOOK_APP_SECRET
  });
}); 
```

请注意以下几行：

```
appId: process.env.FACEBOOK_APP_ID,
secret: process.env.FACEBOOK_APP_SECRET 
```

您需要设置环境变量`FACEBOOK_APP_ID`并`FACEBOOK_APP_SECRET`正确地为上述代码使用正确的值。

在`client/client.js`（或目录下的类似文件`client`）中，实现如下内容：

```
Meteor.startup(function() {
  Meteor.loginWithFacebook({
    requestPermissions: ['publish_actions']
  }, function (err) {
    if (err) {
      Session.set('errorMessage', err.reason || 'Unknown error');
    }
  });
}); 
```

根据[Meteor.loginWithExternalService([options], [callback])](http://docs.meteor.com/#meteor_loginwithexternalservice,)，回调函数`Meteor.loginWithFacebook`允许您轻松区分错误状态和非错误状态：

> 可选回调。调用成功时不带参数，或失败时使用单个 Error 参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T18:40:45.390

运行客户端代码似乎是通过将其放在“myapp.js”文件中来完成的

```
 Template.hello.greeting = function () {
     // ADD YOUR CODE HERE
     alert('foo');
     return "Welcome to matchmakeur.";
  }; 
```

因此，为了将您的代码连接到 Facebook 身份验证，您必须执行类似的操作

```
 Template.fbconnect.connect = function () {
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '[YOUR_APP_ID]', // App ID
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });
      };

      // Load the SDK Asynchronously
      (function(d){
        var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        d.getElementsByTagName('head')[0].appendChild(js);
      }(document));
     return true;
  }; 
```

并有一个模板

```
 <template name="fbconnect">
        <div id="fb-root"></div>
        {{connect}}
        <fb:login-button show-faces="true" width="200" max-rows="1" scope="publish_actions">
        </fb:login-button>
   <template> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T05:37:54.833

如果你想用 Meteor 构建一个完整的客户端应用程序，使用 Facebook JavaScript SDK 不是一个坏主意......

乍一看，Alex C 的答案很有效，但是`FB.logout()`在“导航”并返回到`<div id="fb-root"></div>`定义的“页面”之后我遇到了一些问题，因为当`fb-root`重新渲染时，FB.logout() 停止工作。

所以我认为加载 Facebook JavaScript SDK 的最佳方法是使用[模板创建的回调](http://docs.meteor.com/#template_created)：

```
Template.fbLogin.created = function () {
  if (!Session.get("is Facebook JDK loaded?")) {
    Session.set("is Facebook JDK loaded?", true);

    // https://developers.facebook.com/docs/reference/javascript/
    window.fbAsyncInit = function() {
      // init the FB JS SDK
      FB.init({
        appId      : '[YOUR_APP_ID]', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });

      // Additional initialization code such as adding Event Listeners goes here
    };

    // Load the SDK's source Asynchronously
    // Note that the debug version is being actively developed and might 
    // contain some type checks that are overly strict. 
    // Please report such bugs using the bugs tool.
    (function(d, debug){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
       ref.parentNode.insertBefore(js, ref);
     }(document, /*debug*/ false));
  }
}; 
```

`FB.logout()`此外，要正常工作[还需](http://docs.meteor.com/#template_preserve)要做的另一件事是在`<div id="fb-root"></div>`. 所以你的代码应该是这样的：

```
<body>
  {{#constant}}
    <div id="fb-root"></div>
  {{/constant}}
  <!-- rest of body... --> 
```

我还发现有必要`fb-root`在身体后立即放置。

在[http://evee.meteor.com](http://evee.meteor.com)有一个像这样运行代码的实时应用程序，
你可以在这里找到它的源代码：[https](https://github.com/fjsj/evee/) ://github.com/fjsj/evee/ （检查[fbLogin.js](https://github.com/fjsj/evee/blob/master/client/views/fbLogin.js)和[app. html](https://github.com/fjsj/evee/blob/master/client/app.html)和) _`created``constant``fb-root`

## 奖励（如何使用 Meteor 提供 channel.html 文件）

截至 2013 年 1 月，Meteor 不支持服务器端路由来提供静态 HTML。那么如何用 Meteor制作一个[channel.html呢？](https://developers.facebook.com/docs/reference/javascript/#channel)将其放入 /public 将不起作用，因为 .html 文件由 Meteor 作为模板处理。

通过使用 Meteor 内部，这是可能的！正如[这个答案](https://stackoverflow.com/questions/10452431/how-do-you-make-a-rest-api-and-upload-files-in-meteor/13871399#13871399)所建议的，我们需要使用类似中间件的方法（由[Connect](http://www.senchalabs.org/connect/)提供支持）。只需将其放在您的 /server 上（注意它将在 yourapp.meteor.com/fb/channel.html 上提供）：

```
// serve channel.html file
var connect = __meteor_bootstrap__.require("connect");

__meteor_bootstrap__.app
  .use(connect.query())
  .use(function(req, res, next) {
    // Need to create a Fiber since we're using synchronous http
    // calls and nothing else is wrapping this in a fiber
    // automatically
    Fiber(function () {
      if (req.url === "/fb/channel.html") {
        res.writeHead(200, {'Content-Type': 'text/html'});
        res.end('<script src="//connect.facebook.net/en_US/all.js"></script>');
      } else {
        // not an channel.html request. pass to next middleware.
        next();
        return;
      }
    }).run();
  }); 
```

这也在生产中工作，[代码可在 GitHub 上获得](https://github.com/fjsj/evee/blob/master/server/app.js)（包括缓存头）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T03:01:31.760

您还可以在任何选择器上实现模板事件，然后实现您的 FB javascript 代码。例如，重新创建已禁用的 Facebook 共享按钮可以通过使用旧的已弃用的 FB 共享图像之一，将选择器绑定到模板事件，然后使用 FB.ui 对话框发布到用户墙和共享来完成来自您网站的内容。我今天测试了它，它可以工作。我想如果你真的想定制一些体验，你可以对登录做类似的事情。

# c# - 保存的自定义配置部分没有数据

> ID：10464321
> 
> 赞同：1
> 
> 时间：2012-05-05T17:35:43.163
> 
> 标签：c#, .net, configuration, app-config

我想在应用程序会话之间保留一些数据，并决定使用 .NET 配置 API（`System.Configuration`命名空间），事实证明这比我预期的要困难得多。

我创建了一个自定义配置部分，如下所示：

**用户邮件源部分**

```
public class UserMailSourcesSection : ConfigurationSection
{
    [ConfigurationProperty("User", IsRequired = true)]
    public string User { get; set; }

    [ConfigurationProperty("UserMailSources", IsDefaultCollection = false)]
    [ConfigurationCollection(typeof(MailSourceElemet))]
    public MailSourceElemetCollection MailSources
    {
        get
        {
            return (MailSourceElemetCollection)this["UserMailSources"];
        }

        set
        {
            this["UserMailSources"] = value;
        }
    }

    public UserMailSourcesSection()
    {
        this.User = String.Empty;
    }
} 
```

（其余相关代码在问题末尾）

现在实际的问题是，在我配置了我想要保留的所有值之后，我从保存本节的代码部分中得到了异常（不是非常具有描述性的异常）。我将其追溯到`MailSourceElementCollection.Add`使用具有一些空值的参数调用的过程。该参数是从 Microsoft 的代码传递的。我推断它必须使用默认的无参数构造函数创建参数的新实例。我虽然解决方案是显式编写一个无参数构造函数，它将用某种默认值（特别是`String.Empty`）替换空值，并且这似乎有效。代码运行了，save 方法没有抛出，但出现了一个新问题——即使我在 Main 方法中明确设置了所有内容，实际上也没有保存数据：

```
PublisherElemet publisher = new PublisherElemet();
publisher.Publisher = "test";

PublisherElementCollection publishers = new PublisherElementCollection();
publishers.Add(publisher);
MailSourceElemet mailSource = new MailSourceElemet();
mailSource.HostName = "test";
mailSource.Port = 0;
mailSource.Username = "test";
mailSource.Password = "test";
mailSource.Publishers = publishers;

MailSourceElemetCollection mailSources = new MailSourceElemetCollection();
mailSources.Add(mailSource);

UserMailSourcesSection userMailSources = new UserMailSourcesSection();
userMailSources.User = Environment.UserName;
userMailSources.MailSources = mailSources;

Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.Sections.Add("MailSources", userMailSources);
config.Save(ConfigurationSaveMode.Modified); 
```

在此之后，预期的输出是：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <configSections>
  <section name="MailSources" type="Email_To_Rss_V2.Classes.UserMailSourcesSection, Email-To-Rss-V2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
 </configSections>
 <MailSources User="User">
  <UserMailSources>
    <add HostName="test" Port="0" Username="test" Password="test">
      <Publishers>
        <add Publihser="test" />
      </Publishers>
    </add>
  </UserMailSources>
</MailSources> 
```

虽然实际输出是：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <configSections>
  <section name="MailSources" type="Email_To_Rss_V2.Classes.UserMailSourcesSection, Email-To-Rss-V2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
 </configSections>
 <MailSources User="">
  <UserMailSources>
    <add HostName="" Port="0" Username="" Password="">
      <Publishers>
        <add Publihser="" />
      </Publishers>
    </add>
  </UserMailSources>
</MailSources> 
```

真正奇怪的是，在调试器中数据显示在那里，它似乎没有输出到文件。

以下是其余相关代码：

**MailSourceElementCollection**

```
public class MailSourceElemetCollection : ConfigurationElementCollection
{
    public override ConfigurationElementCollectionType CollectionType
    {
        get
        {
            return ConfigurationElementCollectionType.AddRemoveClearMap;
        }
    }

    public MailSourceElemet this[int index]
    {
        get
        {
            return (MailSourceElemet)BaseGet(index);
        }

        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }

            BaseAdd(0, value);
        }
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        if (((MailSourceElemet)element).Username == null)
        {
            Console.WriteLine("null");
        }

        return ((MailSourceElemet)element).Username;
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new MailSourceElemet();
    }

    public void Add(MailSourceElemet mailSource)
    {
        BaseAdd(mailSource);
    }

    public void Clear()
    {
        this.BaseClear();
    }

    public void Remove(MailSourceElemet element)
    {
        BaseRemove(element.Username);
    }

    public void Remove(string name)
    {
        BaseRemove(name);
    }

    public void RemoveAt(int index)
    {
        BaseRemoveAt(index);
    }
} 
```

**邮件源元素**

```
public class MailSourceElemet : ConfigurationElement
{
    [ConfigurationProperty("HostName", IsRequired = true)]
    public string HostName { get; set; }

    [ConfigurationProperty("Port", IsRequired = true)]
    public int Port { get; set; }

    [ConfigurationProperty("Username", IsRequired = true)]
    public string Username { get; set; }

    [ConfigurationProperty("Password", IsRequired = true)]
    public string Password { get; set; }

    [ConfigurationProperty("Publishers", IsDefaultCollection = false)]
    [ConfigurationCollection(typeof(PublisherElemet))]
    public PublisherElementCollection Publishers
    {
        get
        {
            return (PublisherElementCollection)this["Publishers"];
        }

        set
        {
            this["Publishers"] = value;
        }
    }

    public MailSourceElemet()
    {
        this.HostName = String.Empty;
        this.Port = 0;
        this.Username = String.Empty;
        this.Password = String.Empty;
    }
} 
```

**PublisherElementCollection**

```
public class PublisherElementCollection : ConfigurationElementCollection
{
    public override ConfigurationElementCollectionType CollectionType
    {
        get
        {
            return ConfigurationElementCollectionType.AddRemoveClearMap;
        }
    }

    public PublisherElemet this[int index]
    {
        get
        {
            return (PublisherElemet)BaseGet(index);
        }

        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }

            BaseAdd(0, (PublisherElemet)value);
        }
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((PublisherElemet)element).Publisher;
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new PublisherElemet();
    }

    public void Add(PublisherElemet publisher)
    {
        BaseAdd(publisher);
    }

    public void Clear()
    {
        this.BaseClear();
    }

    public void Remove(PublisherElemet publisher)
    {
        BaseRemove(publisher.Publisher);
    }

    public void Remove(string name)
    {
        BaseRemove(name);
    }

    public void RemoveAt(int index)
    {
        BaseRemoveAt(index);
    }
} 
```

**发布者元素**

```
public class PublisherElemet : ConfigurationElement
{
    [ConfigurationProperty("Publihser", IsRequired = true)]
    public string Publisher { get; set; }

    public PublisherElemet()
    {
        Publisher = String.Empty;
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:20:13.603

查看“[配置节设计器](http://csd.codeplex.com/)”，这是一个出色的“Visual Studio 插件，允许您以图形方式设计 .NET 配置节并自动为它们生成所有必需的代码和架构定义 (XSD)”。

使用这个工具设计你的配置部分，[我想你会喜欢它的 :)]。

# java - 系统托盘气球消息不显示java

> ID：10464324
> 
> 赞同：2
> 
> 时间：2012-05-05T17:35:53.130
> 
> 标签：java, system-tray, trayicon

我想让我的系统尝试图标弹出气球消息，但它没有这样做。这是代码。如果满足一个简单的 if 语句但没有任何反应，它应该会弹出。系统托盘图标可见，左键单击它会显示菜单。

```
package systemtray;

import java.awt.*;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Systemtray {

public static void main(String[] args) {

     TrayIcon trayIcon = null;
    if (SystemTray.isSupported()) {
        // get the SystemTray instance
        SystemTray tray = SystemTray.getSystemTray();
        // load an image
       Image image = Toolkit.getDefaultToolkit().getImage("D:/xxx/facebook.jpg");          
       // create a action listener to listen for default action executed on the tray icon
        ActionListener listener = new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                // execute default action of the application
            }
         };

     // create a popup menu
     PopupMenu popup = new PopupMenu();
     //create menu item for the default action
     MenuItem defaultItem = new MenuItem("A menu item");
     defaultItem.addActionListener(listener);
     popup.add(defaultItem);
     /// ... add other items
     // construct a TrayIcon*/
    trayIcon = new TrayIcon(image, "Tray Demo", popup);

     int a = 0;
     int b = 1;
     if (a + b == 1){
     trayIcon.displayMessage("Message Title", 
        "Message Content",
        TrayIcon.MessageType.INFO);
     }
     // set the TrayIcon properties
     trayIcon.addActionListener(listener);
     // ...
     // add the tray image
     try {
         tray.add(trayIcon);
     } catch (AWTException e) {
         System.err.println(e);
     }
     // ...
 } else {
     // disable tray option in your application or
     // perform other actions
 }
 // ...
 // some time later
 // the application state has changed - update the image
// if (trayIcon != null) {
  //   trayIcon.setImage(updatedImage);
 //}
 // ...
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:39:04.230

除非显示图标，否则您无法显示弹出气球。您必须先显示图标（我假设`tray.add`在您的代码中）。

# c - 为什么这只打印最后一个字？

> ID：10464327
> 
> 赞同：0
> 
> 时间：2012-05-05T17:36:09.247
> 
> 标签：c, pointers, structure

我很难调试这个。当我尝试打印出结构时，我只能得到最后一个字。我是在写内存还是什么？有人能帮我吗？

```
typedef struct hash_table_ {
  void **order;
  int *number_next_calls;
  int *number_buckets;
  int *buckets_size;
  int *worst;
  int *total;
  float *average;
  int (*hash_func)(char *);
  data_el **buckets_array;
} hash_table, *Phash_table;

typedef struct data_{
  char *key;
  void *data;
  struct data_ *next;
}data_el;

main(){

while ((c = getchar()) != EOF) {
    if ((c == ' ') || (c == ',') || (c == '.') || (c == '!') || (c == '"') ||
        (c == ':') || (c == '\n')) {

      /* End of a word */
      if (char_index) {
        /* Word is not empty */
        word[char_index] = '\0';
        lower_case_word(word);
        if(!find_hash(dictionary,word) ){
          insert_hash(dictionary,word,frequency[hash_function(word)]);
        }
        printf("%s\n", dictionary -> buckets_array[hash_function(word)] -> key);
        printf("%d \n",hash_function(word));
        frequency[hash_function(word)]++;
        char_index = 0;
        num_words++;
      }
    }else{
      word[char_index++] = c;
    }
  }

/*This is when it prints*/
  printf("%s\n", dictionary -> buckets_array[337] -> key);
  printf("%s\n", dictionary -> buckets_array[532] -> key);
  printf("%s\n", dictionary -> buckets_array[93] -> key);

 }

 int hash_function(char *word){

  int sum,i;
  i = 0;
  sum = 0;
  while(word[i] != '\0'){
    sum = sum + word[i];
    i++;
  }
  return sum%1000;
}

void insert_hash(Phash_table table, char *key, void *data){
  int index;
  data_el *p, *cur;

  index = table -> hash_func(key);

  /*Head insertion*/
  if(table -> buckets_array[index] == NULL){
    table -> buckets_array[index] = (data_el *)malloc(sizeof(data_el));
    table -> buckets_array[index] -> data = data;
    table -> buckets_array[index] -> next =  NULL;
    table -> buckets_array[index] -> key = key;
  }else{
    printf("%s",table -> buckets_array[index] -> key);
    cur = table -> buckets_array[index];
    p = (data_el *)malloc(sizeof(data_el));
    p -> key = key;
    p -> data = data;
    p -> next = cur;
    cur = p;
    /*
    table -> buckets_array[index] = cur;
    */
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:46:28.573

在`insert_hash`你有

```
table -> buckets_array[index] -> key = key; 
```

响应

```
p -> key = key; 
```

也就是说，您让存储桶入口指向从`main`. 代码不完整，所以我不能确定，但​​我敢打赌，`main`你会重用`word`数组，并且不会在每次插入后分配一个新数组。因此， 指向的字符串的内容`table->buckets_array[index]->key`被覆盖。

您必须将字符串复制到新的内存块并让存储桶条目指向它。

# ruby-on-rails - 注册/创建、应用程序/创建缺少模板

> ID：10464332
> 
> 赞同：3
> 
> 时间：2012-05-05T17:36:27.990
> 
> 标签：ruby-on-rails, ruby, forms, input

我目前正在尝试构建一个简单的表单，该表单采用电子邮件地址并将其作为登录页面的一部分放入数据库中。表单已打开`home.html.erb`并由`pages`控制器控制。

我收到以下错误：

> 缺少模板注册/创建，使用 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]} 的应用程序/创建。搜索：*“/Users/me/rails_projects/this_project/app/views”

这是我的代码：

`home.html.erb`拥有：

```
 <%= form_for(@signup) do |f| %>
        <div class="field">
            <%= f.text_field :email %>
        </div>

        <div class="actions">
            <%= f.submit "Sign up" %>
        </div>
    <% end %> 
```

`Pages`控制器有：

```
class PagesController < ApplicationController

  def home
    @title = "Title of my site"
    @signup = Signup.new
  end

end 
```

`Signups`控制器有：

```
class SignupController < ApplicationController

  def show
    @signup = Signup.new
  end

  def new
  end

  def create
    @signup = Signup.new(params[:signup])
    if @signup.save
    else
      render 'new'
    end
  end

end 
```

`Signup`型号有：

```
class Signup < ActiveRecord::Base

  attr_accessible :email

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates(:email, :presence => true,
                    :length => {:maximum => 40},
                    :format => {:with => email_regex})

end 
```

我不确定出了什么问题，但是当我在字段中输入有效的电子邮件地址时，这就是我收到的错误。我用谷歌搜索无济于事。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:48:11.223

它告诉您缺少模板。

通常，默认情况下（如果您不调用`render()`或`redirect_to()`）Rails 会呈现与您的操作关联的视图，因此在您的情况下，它将是：`create.html.erb`.

因此，如果您成功创建用户，您应该重定向到更有意义的内容。

像：

```
if @signup.save
   redirect_to :root
else
 #...
end 
```

顺便说一句，我假设您首先配置了根路径，如下所示：

```
root :to => "something" 
```

您会将用户重定向到对您的应用程序有意义的位置。

# php - PHP：如何处理卷曲响应

> ID：10464333
> 
> 赞同：1
> 
> 时间：2012-05-05T17:36:40.763
> 
> 标签：php, curl

我正在尝试制作脚本来检查站点是向上还是向下。一切正常，但是当站点不是站点时，我的意思是该站点不存在。然后php执行加载时间增加。我想以某种方式处理这个问题。如何检查站点是否不存在并中断 curl 会话？这是我的脚本：

```
<?php
$ch = curl_init('http://86.100.69.228/'); // e.g. for this will increase execution time because the site doesn't exists
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_exec($ch);
$status_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
echo $status_code;
curl_close($ch);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:40:37.887

您可以通过设置 cURL 传输的 CURLOPT_CONNECTTIMEOUT 和 CURLOPT_TIMEOUT 选项来定义超时`curl_setopt`。如果站点关闭，cURL 将停止工作，您会发现它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:06:55.793

如果您想检查站点是否已关闭`CURL`可能不是最佳选择，因为您没有检查完整的 URL，例如`http://eample.com/abx.phpx`... 当您使用 Comodo [http://www.comodo等“安全 DNS”等服务时.com/secure-dns/](http://www.comodo.com/secure-dns/)所有网站都会返回`200`，因为请求会自动转发以进行验证，因此您将始终使用 IP 地址`92.242.144.10` [搜索 92.242.144.10加载网站](https://www.google.com.ng/#hl=en&gs_nf=1&cp=13&gs_id=2&xhr=t&q=92.242.144.10&pf=p&output=search&sclient=psy-ab&oq=92.242.144.10&aq=f&aqi=&aql=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=ca9f3912ec7596e5&biw=944&bih=1071)

我的建议只是简单地 ping 服务器

```
function ping($host)
{
    exec(sprintf('ping -n 2 %s', escapeshellarg($host)), $res, $rval);
    return $rval === 0;
}

$result = ping("86.100.69.228"); 
```

直接检查socket

```
function pingSocket($host, $port = 80, $timeout = 3) {
    $fsock = fsockopen ( $host, $port, $errno, $errstr, $timeout );
    if (! $fsock) {
        return FALSE;
    } else {
        return TRUE;
    }
}

$result = pingSocket ( "86.100.69.228" ); 
```

这在大多数情况下效果更好

# assembly - 是否有为 z/assembler 量身定制的 emacs org-mode 变体？

> ID：10464342
> 
> 赞同：3
> 
> 时间：2012-05-05T17:37:26.490
> 
> 标签：assembly, emacs, mainframe

我想使用 emacs 在 org 模式下开发 z/Assembler 代码（我会担心以后的导出）。我能看到的具体需求是：

1.  由于“*”开始了 z/Asm 注释，所以使用不同的字符（例如，“=”）来标识标题。我`# outline-regexp:[=]+`在文件开头尝试了“局部变量：”，但没有成功。
2.  我想在传统的 z/Asm 点使用制表位，但`# tab-stop-list:(1,10,16,36,72)`似乎没有设置正确的制表位。
3.  与此相关，我想将 to 的“普通标签”状态关联 `org-cycle`起来`tab-to-tab-stop`。我什至看不到如何通过“局部变量”进行尝试：
4.  理想情况下，我想要一种 org 模式的变体，可能与“让这一切发生”的“.zorg”扩展名（无论如何）相关联。

有谁知道emacs代码会做这样的事情吗？

我既不是 emacs 的专家，也不是 Lisp，所以请放轻松——我真的不知道我在做什么。

如果您认为这是题外话，请随意将其迁移到超级用户（尽管我认为它更适合这里）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:04:54.270

您很可能想要检查次要模式`orgstruct-mode`而不是 org-mode 本身。

也尝试更改`org-outline-regexp`而不是`outline-regexp`.

可悲的是，还没有对 Org Babel 的 z/Assembler 支持。

# android - 使用 setLeft 和 setTop 对齐图像？

> ID：10464343
> 
> 赞同：1
> 
> 时间：2012-05-05T17:37:26.703
> 
> 标签：android

我有以下代码，它在将“分数”面板位图（到视图的中心）绘制到画布之前对齐它：

```
 score.setLeft((view.getWidth() - score.getWidth()) / 2);
    score.setTop(view.getHeight() / 3);
    score.draw(c, layer); 
```

正如我所提到的，这段代码将它与中心对齐（水平和垂直）。那么，我怎样才能让它水平对齐到中心，但是沿着视图的顶部呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:47:33.780

我认为这应该可以解决问题

score.setTop(0);

（用这个替换你的 setTop 调用）

# c++ - 在 C++ 中从标准输入读取

> ID：10464344
> 
> 赞同：62
> 
> 时间：2012-05-05T17:37:27.677
> 
> 标签：c++

我正在尝试使用 C++ 从标准输入读取，使用此代码

```
#include <iostream>
using namespace std;

int main() {
    while(cin) {
        getline(cin, input_line);
        cout << input_line << endl;
    };
    return 0;
} 
```

当我编译时，我得到这个错误..

```
[root@proxy-001 krisdigitx]# g++ -o capture -O3 capture.cpp
capture.cpp: In function âint main()â:
capture.cpp:6: error: âinput_lineâ was not declared in this scope 
```

有什么想法缺少吗？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-05-05T17:38:35.657

您尚未定义变量`input_line`。

添加这个：

```
string input_line; 
```

并添加此包含。

```
#include <string> 
```

这是完整的示例。我还在 while 循环之后删除了分号，您应该`getline`在 while 内正确检测流的结尾。

```
#include <iostream>
#include <string>

int main() {
    for (std::string line; std::getline(std::cin, line);) {
        std::cout << line << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-18T23:11:31.863

```
//declaration:    
    int i2;
    double d2;
    string s2;
//reading by keyboard

    cin >> i2;
    cin >> d2;
    cin.get();
    getline(cin, s2);
//printing:
    cout << i+i2 << endl;    
    cout<< std::fixed <<std::setprecision(1)<< d + d2 << endl;
    cout << s << s2; 
```

您可以运行此代码：

```
#include <iostream>
#include <iomanip>
#include <limits>

using namespace std;

int main() {
    int i = 4;
    double d = 4.0;
    string s = "hi ";

    int i2;
    double d2;
    string s2;
    cin >> i2;
    cin >> d2;
    cin.get();
    getline(cin, s2);
    cout << i+i2 << endl;
    cout<< std::fixed <<std::setprecision(1)<< d + d2 << endl;
    cout << s << s2;

    return 0;
} 
```

# jquery - jQuery + Css - 动态添加 css 到列表项

> ID：10464346
> 
> 赞同：6
> 
> 时间：2012-05-05T17:37:37.810
> 
> 标签：jquery, css

我想知道是否有一种方法可以选择列表项，并随着列表的继续添加一个 css 值。

很难解释，所以让我举个例子：

```
<ul class="list">
<li></li>
<li></li>
<li></li>
<li></li>
....
</ul> 
```

我想采用这样的动态生成列表

```
<ul class="list">
    <li style="left:0px;"></li>
    <li style="left:10px;"></li>
    <li style="left:20px;"></li>
    <li style="left:30px;"></li>
    ....
</ul> 
```

我不确定这是否最好用 jQuery 完成，或者是否有一种我不知道的 CSS 选择器可以解决这个问题。

如果我要使用 jQuery，我认为它可能会是这样的：

```
$('.list > li:nth-child(2)').css('left', '+=10px').next 
```

但我不确定如何浏览列表的其余部分并每次都添加 10px。我一直在玩使用“.next”和“.prev”的想法，但不确定如何执行。

提前感谢您的耐心等待，我是 jQuery 的新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T17:41:47.433

您可以使用`each`和索引参数作为控件。我在这里使用了 margin-left 作为我的示例，但显然 just left 也适用于您的情况。

[http://jsfiddle.net/nEePk/](http://jsfiddle.net/nEePk/)

```
$('li').each( function(index) {
    $(this).css('margin-left', index * 10);
});​ 
```

就 CSS 而言，我认为这是不可能的。原因是在实际表达式中没有数学可以完成。不过，您当然可以`li`使用直接兄弟选择器来选择每个。

```
li ~ li { ... } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T17:41:16.123

总是可以执行以下操作：

```
var left = 0;

$('.list > li').each(function() {
    $(this).css('left', left + 'px');
    left += 10;
}); 
```

# objective-c - CoreData：错误：无法调用 NSManagedObject 类“BNRItem”上的指定初始化程序

> ID：10464347
> 
> 赞同：1
> 
> 时间：2012-05-05T17:37:49.827
> 
> 标签：objective-c, core-data

我正在开发我的第一个 Core Data 项目，它在 iOS 模拟器中编译得很好，但是当我按下“+”按钮时，我收到了错误消息：

```
2012-05-05 10:23:05.195 Homepwner[15387:fb03] CoreData: error: Failed to call designated initializer on NSManagedObject class 'BNRItem' 
2012-05-05 10:23:05.197 Homepwner[15387:fb03] -[BNRItem itemName]: unrecognized selector sent to instance 0x6d50790
2012-05-05 10:23:05.198 Homepwner[15387:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[BNRItem itemName]: unrecognized selector sent to instance 0x6d50790'
*** First throw call stack:
(0x1082022 0x1533cd6 0x1083cbd 0xfe8ed0 0xfe8cb2 0x58fb 0x320c 0x1083e99 0x30314e 0x541a0e 0x1083e99 0x30314e 0x3030e6 0x3a9ade 0x3a9fa7 0x3a9266 0x3283c0 0x3285e6 0x30edc4 0x302634 0x1d3def5 0x1056195 0xfbaff2 0xfb98da 0xfb8d84 0xfb8c9b 0x1d3c7d8 0x1d3c88a 0x300626 0x271d 0x2685)
terminate called throwing an exception(lldb) 
```

去检查我在 BNRItem.h, .m 中的代码，它看起来没问题。你能找出问题所在吗？这是我的代码：

BNRItem.h

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface BNRItem : NSManagedObject

@property (nonatomic, retain) NSString * itemName;
@property (nonatomic, retain) NSString * serialNumber;
@property (nonatomic) int32_t valueInDollars;
@property (nonatomic) NSTimeInterval dateCreated;
@property (nonatomic, retain) NSString * imageKey;
@property (nonatomic, retain) NSData * thumbnailData;
@property (nonatomic, strong) UIImage *thumbnail;
@property (nonatomic) double orderingValue;
@property (nonatomic, retain) NSManagedObject *assetType;

-(void)setThumbnailDataFromImage:(UIImage *)image;

@end 
```

BNR项目.m

```
#import "BNRItem.h"

@implementation BNRItem

@dynamic itemName;
@dynamic valueInDollars;
@dynamic thumbnailData;
@dynamic imageKey;
@dynamic serialNumber;
@dynamic dateCreated;
@dynamic thumbnail;
@dynamic orderingValue;
@dynamic assetType;

-(void)awakeFromFetch
{
  [super awakeFromFetch];
  UIImage *tn = [UIImage imageWithData:[self thumbnailData]];
  [self setPrimitiveValue:tn forKey:@"thumbnail"];
}

-(void)awakeFromInsert
{
  [super awakeFromInsert];
   NSTimeInterval t = [[NSDate date] timeIntervalSinceReferenceDate];
  [self setDateCreated:t];
}

- (void)setThumbnailDataFromImage:(UIImage *)image
{
  CGSize origImageSize = [image size];
  CGRect newRect = CGRectMake(0, 0, 40, 40);
  float ratio = MAX(newRect.size.width / origImageSize.width, 
                    newRect.size.height / origImageSize.height);
  UIGraphicsBeginImageContextWithOptions(newRect.size, NO, 0.0);
  UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:newRect
                                                  cornerRadius:5.0];
  [path addClip];
  CGRect projectRect;
  projectRect.size.width = ratio * origImageSize.width;
  projectRect.size.height = ratio * origImageSize.height;
  projectRect.origin.x = (newRect.size.width - projectRect.size.width) / 2.0;
  projectRect.origin.y = (newRect.size.height - projectRect.size.height) / 2.0;
  [image drawInRect:projectRect];
  UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();
  [self setThumbnail:smallImage];
  NSData *data = UIImagePNGRepresentation(smallImage);
  [self setThumbnailData:data];
  UIGraphicsEndImageContext();
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:29:47.567

我猜你正在关注大书呆子的书？我想他们应该提到应用程序将在这个阶段运行......

我在完成教程的过程中遇到了同样的问题。经过一番搜索，我发现这是因为你不应该像 BNRItem 那样分配/初始化 NSManagedObject。

实际上，以下部分将向您展示如何用新实现替换 createItem 方法以从数据库中检索 BNRItem 对象。

# php - 用升序数字替换数组键

> ID：10464348
> 
> 赞同：7
> 
> 时间：2012-05-05T17:37:50.697
> 
> 标签：php, arrays, key, element

我有一个看起来像这样的数组：

```
[867324]  
    [id] => 867324  
    [name] => Example1  

[345786]    
    [id] => 345786
    [name] => Example2

[268531]  
    [id] => 268531
    [name] => Example3 
```

如您所见，第一个元素没有任何特定的顺序。出于示例的目的，您可以将它们视为随机数。我想得到的最终结果是：

```
[0]  
    [id] => 867324  
    [name] => Example1  

[1]    
    [id] => 345786
    [name] => Example2

[2]  
    [id] => 268531
    [name] => Example3 
```

我试过爆炸，但显然我做错了什么。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-05T17:40:30.610

这将在保留元素顺序的同时重新编号键。

```
$new_array = array_values($old_array); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T17:40:43.790

[您可以使用array_values()](http://fi.php.net/array_values)重置数组键：

```
$array = array_values($array); 
```

使用此方法创建一个数组，例如：

```
Array('123'=>'123',
      '456'=>'456',
      '789'=>'789') 
```

将重新编号为：

```
Array('0'=>'123',
      '1'=>'456',
      '2'=>'789') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T17:39:15.547

如果元素的顺序无关紧要，我相信 PHP 的排序方法不会维护索引。[http://www.php.net/manual/en/function.sort.php](http://www.php.net/manual/en/function.sort.php)

```
sort($array); 
```

> 注意：此函数将新键分配给数组中的元素。它将删除可能已分配的任何现有密钥，而不仅仅是重新排序密钥。

更新：这确实有效，尽管提到的 array_values 方法更有意义。

# eclipse - Eclipse CDT C/C++ 构建命令错误

> ID：10464350
> 
> 赞同：1
> 
> 时间：2012-05-05T17:38:04.593
> 
> 标签：eclipse, eclipse-cdt

（对不起，我的英语不好...）

我正在尝试使用 CDT 插件在 Eclipse 中构建我的 .so 库。（这是一个android项目，带有本机代码......）

我更改了构建命令 [Project->Properties->C/C++ build] 以满足我的需要：

```
C:\SDK\android-ndk-r8\ndk-build.cmd 
```

但是我在控制台中收到了这条消息：

```
C:\SDK\android-ndk-r8\ndk-build.cmd 
Cannot run program "C:\SDK\android-ndk-r8\ndk-build.cmd": Le fichier spécifié est introuvable.
Error: Program "C:/SDK/android-ndk-r8/ndk-build.cmd" is not found in PATH 
```

我在 Eclipse 的构建命令中只尝试了“ndk-build.cmd”，并在我的 PATH 环境变量中尝试了这个命令的路径，但我仍然有同样的错误。事实上，我无法从 Eclipse 的构建命令中执行任何程序。

当我在 cmd.exe 中调用 ndk-build.cmd 时构建库没有问题，但是当我尝试在 Eclipse 中自动构建库时，它不起作用......

有没有人可以解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:28:42.913

转到您的项目属性 -> C/C++ 构建 -> 环境。单击添加... 并将名称设置为 PATH，将值设置为您的 NDK_ROOT，我遇到了同样的问题，并且很喜欢它

# c# - 使用 rand5()，生成 rand7()（概率相同）

> ID：10464360
> 
> 赞同：2
> 
> 时间：2012-05-05T17:39:09.697
> 
> 标签：c#, probability

> **可能重复：**
> [将随机范围从 1-5 扩展到 1-7](https://stackoverflow.com/questions/137783/expand-a-random-range-from-15-to-17)

我在这里看到了这个问题：[链接](http://www.mytechinterviews.com/equal-probability-between-1-and-7)

作者提供的解决方案似乎没有产生相同的概率。

例如，在对函数的 10k 次调用中，数字 4 被返回了 1-2 次（而其他数字，如 2，每次返回大约 2k 次）。

也许我理解错了，或者我写错了算法，但是在这里：

```
 static int rand5()
    {
        return new Random().Next(1, 6);
    }
    static int rand7()
    {
        while (true)
        {
            int num = 5 * (rand5() - 1) + rand5();
            if (num < 22) return ((num % 7) + 1);
        }
    }
    static void Main(string[] args)
    {
        int limit = 10000;
        int[] scores = new int[7];
        for (int i = 0; i < limit; i++)
        {
            scores[rand7() - 1]++;
        }
        foreach (int n in scores)
        {
            Console.Write(n + " ");
        }
        Console.WriteLine();
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:47:14.183

您没有在 Rand5 中生成随机数。

像这样做：

```
static Random rand = new Random()
static int rand5()
{
    return rand.Next(1, 6);
} 
```

# .net - Silverlight 中数据网格的 CSV 导出类

> ID：10464363
> 
> 赞同：0
> 
> 时间：2012-05-05T17:39:40.860
> 
> 标签：.net, vb.net, silverlight, silverlight-4.0

我一直在尝试将 Silverlight 中的一些数据网格导出到 excel 中，但到目前为止还没有成功。所以现在我只是想让它们导出为 csv 文件，然后可以在 excel 中打开。我创建了一个类来导出数据网格，它确实导出并保存了一个 csv 文件。但是，csv 文件不包含任何数据。

```
Imports System.IO

Public Class clsExportData
   'Public Shared Sub Export(dg As DataGrid)
   '    SaveExportedGrid(ExportDataGrid(True, dg))
   'End Sub

Public Shared Sub Export(dg As DataGrid, withHeaders As Boolean)
    SaveExportedGrid(ExportDataGrid(withHeaders, dg))
End Sub

Private Shared Sub SaveExportedGrid(data As String)
    Dim sfd As New SaveFileDialog()
    sfd.DefaultExt = "csv"
    sfd.Filter = "CSV Files (*.csv)|*.csv|All files (*.*)|*.*"
    sfd.FilterIndex = 1

    If If(sfd.ShowDialog(), False) Then
        Using sr As New StreamWriter(sfd.OpenFile())
            sr.Write(data)
        End Using
    End If
End Sub

Private Shared Function ExportDataGrid(withHeaders As Boolean, grid As DataGrid) As String
    Dim colPath As String
    Dim propInfo As System.Reflection.PropertyInfo
    Dim binding As System.Windows.Data.Binding
    Dim strBuilder As New System.Text.StringBuilder()
    Dim source As System.Collections.IList = TryCast(grid.ItemsSource, System.Collections.IList)
    If source Is Nothing Then
        Return ""
    End If

    Dim headers As New List(Of String)()
    grid.Columns.ToList().ForEach(Function(col)
                                      If TypeOf col Is DataGridBoundColumn Then
                                          headers.Add(FormatCSVField(col.Header.ToString()))
                                      End If

                                  End Function)
    strBuilder.Append([String].Join(",", headers.ToArray())).Append(vbCr & vbLf)

    For Each data As [Object] In source
        Dim csvRow As New List(Of String)()
        For Each col As DataGridColumn In grid.Columns
            If TypeOf col Is DataGridBoundColumn Then
                binding = TryCast(col, DataGridBoundColumn).Binding
                colPath = binding.Path.Path
                propInfo = data.[GetType]().GetProperty(colPath)
                If propInfo IsNot Nothing Then
                    csvRow.Add(FormatCSVField(propInfo.GetValue(data, Nothing).ToString()))
                End If
            End If
        Next
        strBuilder.Append([String].Join(",", csvRow.ToArray())).Append(vbCr & vbLf)
    Next

    Return strBuilder.ToString()
End Function

Private Shared Function FormatCSVField(data As String) As String
    Return [String].Format("""{0}""", data.Replace("""", """""""").Replace(vbLf, "").Replace(vbCr, ""))
End Function 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:42:28.520

请尝试以下操作

```
Dim source As System.Collections.IEnumerable = TryCast(grid.ItemsSource, System.Collections.IEnumerable)
If source Is Nothing Then
    Return ""
End If 
```

此外，请确保您使用调试器单步执行您的代码，并查看它失败的地方。

# windows-8 - 在 Windows 8 应用程序中为 DispatcherTimer 的 Tick 事件定义事件处理程序

> ID：10464374
> 
> 赞同：7
> 
> 时间：2012-05-05T17:40:57.433
> 
> 标签：windows-8

我正在 Windows 8 Visual Studio 11 中开发一个应用程序，我想为 DispatcherTimer 实例定义一个事件处理程序，如下所示：

```
public sealed partial class BlankPage : Page
    {

        int timecounter = 10;
        DispatcherTimer timer = new DispatcherTimer();
        public BlankPage()
        {
            this.InitializeComponent();
            timer.Tick += new EventHandler(HandleTick);
        }

        private void HandleTick(object s,EventArgs e)
        {

            timecounter--;
            if (timecounter ==0)
            {
                //disable all buttons here
            }
        }
        .....
} 
```

但我收到以下错误：

```
Cannot implicitly convert type 'System.EventHandler' to 'System.EventHandler<object>' 
```

我是寡妇 8 应用程序的新手开发人员。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T22:22:39.653

差不多了 :) 你不需要实例化一个新的事件处理程序对象，你只需要指向处理事件的方法。因此，一个事件处理程序。

```
 int timecounter = 10;
    DispatcherTimer timer = new DispatcherTimer();
    public BlankPage()
    {
        this.InitializeComponent();

        timer.Tick += timer_Tick;
    }

    protected void timer_Tick(object sender, object e)
    {
        timecounter--;
        if (timecounter == 0)
        {
            //disable all buttons here
        }
    } 
```

尝试阅读委托以了解事件[了解 C# 中的事件和事件处理程序](https://stackoverflow.com/questions/803242/understanding-events-and-event-handlers-in-c-sharp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T05:00:52.997

您的代码期望 HandleTick 有两个 Object 参数。不是对象参数和 EventArg 参数。

```
private void HandleTick(object s, object e) 
```

不是

```
private void HandleTick(object s,EventArgs e) 
```

这是在 Windows 8 上发生的变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:44:01.503

WinRT 比标准 .NET 运行时更多地使用泛型。WinRT 中定义的DispatcherTimer.Tick[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dispatchertimer.tick.aspx)：

```
public event EventHandler<object> Tick 
```

虽然[WPF DispatcherTimer.Tick 在这里](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.tick.aspx) 公共事件 EventHandler Tick

另请注意，您不必使用标准命名方法来创建事件处理程序。您可以使用 lambda 来完成它：

```
int timecounter = 10;
DispatcherTimer timer = new DispatcherTimer();
public BlankPage()
{
    this.InitializeComponent();

    timer.Tick += (s,o)=>
    {
       timecounter--;
       if (timecounter == 0)
       {
           //disable all buttons here
       }
    };
} 
```

# android - 是否可以使用 AndroidAnnotations 注入模拟以进行测试？

> ID：10464375
> 
> 赞同：8
> 
> 时间：2012-05-05T17:41:04.197
> 
> 标签：android, unit-testing, mocking, ioc-container, android-annotations

我还没有找到任何关于如何做到这一点的例子。我假设这是不可能的基于这样的例子：

```
@Bean(MyImplementation.class)
MyInterface myInterface; 
```

要注入的类已经确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T15:18:26.140

**对约翰卡尔**回答的补充：

*   没有办法告诉 AndroidAnnotations 你想注入模拟而不是真实对象，因为它在编译时工作，所以代码必须始终准备好生产。

*   我建议测试生成的活动，以补充**Robolectric**。注释正在向您的代码添加行为，因此您不应像没有注释一样对其进行测试。

*   小心测试您的活动行为，而不是 AndroidAnnotations 的行为。该框架已经有自己的测试来检查注释是否正常工作:)。

*   您可以让 AndroidAnnotations DI 发生，然后重新注入模拟的依赖项。这些字段至少具有默认范围，这意味着它们可以从同一个包中访问，因此您必须在与活动相同的包中创建测试。

    ```
    MyActivity_ activity = new MyActivity_();

    // myInterface gets injected 
    activity.onCreate(null);

    // you reinject myInterface
    activity.myInterface = Mockito.mock(MyInterface.class); 
    ```

*   在 AndroidAnnotations 中，依赖是通过调用来注入的`MyImplementation_.getInstance_()`。[您可以使用PowerMock](http://code.google.com/p/powermock/)等工具使用运行时字节码操作来让返回模拟的`getInstance_()`方法。`MyImplementation_`不过，这可能需要一些初步工作，因为您必须混合使用 PowerMock 测试运行器和 Robolectric 测试运行器。

编辑：我根据这个问题用内容更新了[文档。](https://github.com/excilys/androidannotations/wiki/Unit-test-your-application)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T16:14:05.520

问题是，你是单元测试还是集成测试？

如果您进行单元测试，我建议您使用老式的模拟方式，即使用 setter 并尝试在不涉及依赖注入框架的情况下测试 Java 代码。这将单独测试您的课程并回避很多复杂性。

我的意思是说：

```
public class Test{

    ClassInTest inTest;
    MyInterface myInterface;

    @Before
    public void setup(){
         inTest = new ClassInTest();
         //or your favorite mocking frameowrk
         myInterface = EasyMock.createMock(MyInterface.class);  
         inTest.setMyInterface(myInterface);
    }

    @Test
    public void testMethod(){
        //...mocking test code
    }
} 
```

当然，由于异常抛出存根和最终类/方法，测试 Android 活动（和 Android 的其他扩展）很困难。这是[Robolectric](https://github.com/robolectric/robolectric)派上用场（并且强烈推荐）实例化/影子 Android API 的地方。

如果您正在进行集成测试，您可能需要采用另一种方法。就个人而言，我会尽量不要在集成测试期间模拟，因为我尝试测试应用程序，因为它会在生产中运行。但是，如果您真的想模拟，您可以使用类似的方法进行单元测试，并在生成生成的 Activity 类后引入模拟。值得注意的是，您可以使用[Robotium](http://code.google.com/p/robotium/)等框架直接在硬件上执行集成测试。

对于您的问题，我不知道专门用于注入 Mocks 或将 Mocks 引入应用程序的注入依赖树的任何 AndroidAnnotations 工具。

# java - 使用 BooleanQuery 还是编写更多索引？

> ID：10464377
> 
> 赞同：0
> 
> 时间：2012-05-05T17:41:20.830
> 
> 标签：java, lucene.net, lucene

像这样的类别树：

```
root_1
  sub_1
  sub_2
  ... to sub_20 
```

每个文档都有一个子类别（如`sub_2`）。`sub_2`现在，我只在 lucene 索引中写道：

```
new NumericField("category",...).setIntValue(sub_2.getID()); 
```

我想获取 all`root_1`的文档，使用`BooleanQuery`（合并`sub_1`to `sub_20`）在每个条目文档中搜索或编写其他类别：

```
new NumericField("category",...).setIntValue(sub_2.getID());
new NumericField("category",...).setIntValue(root_1.getID());//sub_2's ancestor category 
```

哪个是更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:56:13.280

我将使用类别层次结构的路径枚举/“Dewey Decimal”表示。也就是说，不是只为第一个根的第二个孩子存储“sub_2”，而是存储类似“001.002”的东西。

要查找根及其所有子项，您将搜索“ **category:001*** ”。

要仅查找根的子节点，您将搜索“ **category:001.*** ”。

（另请参阅[如何将树数据存储在 Lucene/Solr/Elasticsearch 索引或 NoSQL 数据库中？](https://stackoverflow.com/questions/9970193/how-to-store-tree-data-in-a-lucene-solr-elasticsearch-index-or-a-nosql-db/10209230#10209230)。）

# c - GCC 无法在包含的库中找到头文件

> ID：10464381
> 
> 赞同：14
> 
> 时间：2012-05-05T17:41:49.537
> 
> 标签：c, gcc, libraries

我试图在 gcc 中包含一个名为*libmathematica.a*的库文件，以便在可执行*示例*中链接它。

我试图做到这一点`gcc main.c libmathematica.a -o example`

*注意：我必须使用 gcc 执行此操作，因为 ld 无法将其正确链接到正确的系统库*

但我得到：`fatal error: mathematica.h: No such file or directory`这很奇怪，因为*mathematica.h*在图书馆里。

你能帮我吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-05T17:47:10.970

头文件不能*在库中*。它必须存在于某个位置，并且您必须使用`-I`编译器标志指定该位置：

```
gcc -I/path/to/mathematica/include main.c libmathematica.a -o example 
```

如果头文件在目录`main.c`或子目录中，请确保在`#include`指令中使用引号而不是尖括号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T17:45:24.880

问题出在您的源文件中。如果mathematica.h 在系统包含目录中，那么您将使用`#include <mathematica.h>`它，如果它在某个本地目录中，那么您将使用类似`#include "libs/mathematica.h"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T17:46:57.610

尝试添加到 gcc 调用 - 像 -I/Full/Path/To/The/Directory/Where/the/desired/header/resides 这样的选项

例如：gcc -I/usr/include/mathematica -lmathematica -o example main.c

# javascript - 从另一个函数中调用 twitter 引导选项卡函数

> ID：10464382
> 
> 赞同：2
> 
> 时间：2012-05-05T17:42:04.173
> 
> 标签：javascript, jquery, twitter-bootstrap

使用 bootstrap-tab.js 我想激活一个选项卡，从另一个函数中调用它。html:

```
<a onClick='activate_tab()'>Activate Tab</a>
<ul class='nav nav-tabs hydro' id='nav_tabs'>
  <li class='active'><a href='#1' data-toggle='tab'>First</a></li>
  <li class=''><a href='#2' data-toggle='tab'>Second</a></li>
  <li class=''><a href='#3' data-toggle='tab'>Third</a></li>
</ul>
<div class='tabbable'>
  <div class='tab-content'>
    <div class='tab-pane active' id='1'>content first</div>
    <div class='tab-pane ' id='2'>content second</div>
    <div class='tab-pane ' id='3'>content third</div>
  </div>
</div> 
```

我可以使用以下内容在页面加载时激活选项卡：

```
<script>jQuery(function($){$('#nav_tabs li:eq(2) a').tab('show');})</script> 
```

并且通过单击相应的锚元素可以正确激活选项卡。以下不起作用：

```
function activate_tab(){
    //process other data...then goto tab
    alert(1);
    $('#nav_tabs li:eq(2) a').tab('show');
    alert(2);
} 
```

我是 javascript/jQuery 的新手。

[编辑] 我将原始页面剥离为上面显示的内容并且它可以工作。因此，可能与其他功能发生冲突。很抱歉浪费您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:53:06.647

如果你不试试这个

```
 <script>
    jQuery(function($){

      function activate_tab(){
        //process other data...then goto tab
        alert(1);
        $('#nav_tabs li:eq(2) a').tab('show');
        alert(2);
      }

    });
   </script> 
```

# linux - 如何使用monit运行一个普通的C程序

> ID：10464384
> 
> 赞同：0
> 
> 时间：2012-05-05T17:42:27.933
> 
> 标签：linux, monit

我正在尝试在Monit中监控一个普通的C程序，但是我不知道如何运行该程序，在Monit的控制文件中应该设置什么配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:02:25.460

您需要获取程序的 PID 才能使用 Monit 对其进行监控。一些程序允许命令行参数给出要写入 PID 的文件的位置。否则，您可以尝试从将 PID 写入已知位置的包装脚本启动程序，例如`/usr/bin/myprogram & && jobs -p > /var/run/myprogram.pid`在`bash`.

# android - 格式化 SQLite 的日期并减去分钟

> ID：10464385
> 
> 赞同：0
> 
> 时间：2012-05-05T17:42:32.460
> 
> 标签：android, sqlite, datetime, calendar

我需要从当前日期中减去 X 分钟，并将其格式化为我的 Android 应用程序中的 SQLlite 查询。这是我到目前为止所拥有的：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MINUTE, -60); //one hour back

final SimpleDateFormat std = new SimpleDateFormat("yyyy-mm-dd hh:mm");
std.setCalendar(cal);           
String date = std.format(cal.getTime());

String sql = "SELECT * FROM [tbl_name] WHERE [datefield] >= " + date; 
```

datefield 在 SQLlite 表中存储为 DATETIME。我不想使用 Joda 时间，因为我想将我的应用程序中的依赖项数量保持在最低限度。

使用我当前的代码，日期日期变量为：'2012-43-05 07:43'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:47:00.207

您在格式中使用了两次分钟。 `mm`实际上需要`MM`在日期部分。

```
final SimpleDateFormat std = new SimpleDateFormat("yyyy-MM-dd hh:mm"); 
```

# excel - 使用 OleDbConnection::GetOleDbSchemaTable() 列出 excel 表

> ID：10464386
> 
> 赞同：2
> 
> 时间：2012-05-05T17:42:36.640
> 
> 标签：excel, ado.net, oledb

以下 PowerShell 片段将通过[OleDbConnection.GetOleDbSchemaTable()](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.getoledbschematable.aspx)列出 Excel 电子表格中的所有工作表和命名范围：

```
$file = "C:\Users\zippy\Documents\Foo.xlsx";
$cnStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=`"$($file)`";Extended Properties=`"Excel 12.0 Xml;HDR=YES`";";

$cn = New-Object System.Data.OleDb.OleDbConnection $cnStr;
$cn.Open();

# to list the sheets
$worksheets = $cn.GetOleDbSchemaTable([System.Data.OleDb.OleDbSchemaGuid]::Tables,$null);
$cn.Close();
$cn.Dispose();
$worksheets | Format-List; 
```

但是，这不会列出表（在 Excel 2003 中称为列表）或引用列表的命名范围。

如果我传递类型为过程或视图的[OleDbSchemaGuid](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbschemaguid.aspx) ，我会收到带有消息的[MethodInvocationException](http://msdn.microsoft.com/en-us/library/system.management.automation.methodinvocationexception%28v=vs.85%29.aspx)`Operation is not supported for this type of object.`

这是否可以通过使用连接字符串或限制参数进行调整来列出表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T09:08:32.300

试试这个简单的来源：

```
 using (var connection = (OleDbConnection)GetConnection())
        {
            connection.Open();

            var dt = connection.GetSchema("TABLES");
            var list=dt.Select().Where(w => w["TABLE_NAME"].ToString()).ToList();

            //TODO:
        } 
```

# asp.net-mvc-3 - 如何将实体框架上下文与依赖注入一起使用？

> ID：10464388
> 
> 赞同：2
> 
> 时间：2012-05-05T17:42:44.063
> 
> 标签：asp.net-mvc-3, entity-framework-4, dependency-injection, repository-pattern

我正在尝试设置一个可以使用实体框架 edmx 模型上下文的基本存储库类。我遇到的问题是我需要找到 EF EDMX 对象上下文实现的接口，以便我可以通过依赖注入传递给构造函数。我之前通过使用创建它并将其存储在 HttpContext 中的 DataFactory 解决了这个问题，但这会扼杀单元测试的能力。任何帮助，将不胜感激。谢谢！

```
public abstract class BaseRepository<T> where T : EntityObject
{
        private MyDataModelContext _dataContext;
        private ObjectSet<T> dbset;

        protected BaseRepository(IObjectContext dataContext)
        {
            _dataContext = dataContext;
            dbset = _dataContext.CreateObjectSet<T>();
        }

    ..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T17:54:10.250

我总是创建一个 DataContextFactory ，它将我自己的接口传递给上下文，并将其传递给我的存储库，如下所示：

上下文接口：

```
public IMyDataContext {
    // One per table in the database
    IDbSet<Class1> Class1s { get;set; }
    // etc

    // The standard methods from EF you'll use
    void Add( object Entity );
    void Attach( object Entity );
    void Delete( object Entity );
    void SaveChanges();
} 
```

上下文工厂：

```
public class MyDataContextFactory : IMyDataContextFactory {
    public IMyDataContext GetContext() {
        // TODO: Use the service locator pattern to avoid the direct instanciation
        return new MyDataContext();
    }
} 
```

上下文工厂接口：

```
public interface IMyDataContextFactory {
    IMyDataContext GetContext();
} 
```

存储库：

```
public class MyClass1Repository {
    private readonly IMyDataContextFactory factory;
    public MyClass1Repository( IMyDataContextFactory Factory ) {
        // TODO: check for null
        this.factory = Factory;
    }
    public List<MyClass1> GetAll() {
        using ( IMyDataContext db = this.factory.GetContext() ) {
            return db.Class1s.ToList();
        }
    }
    // TODO: Other methods that get stuff
} 
```

然后，当我想测试存储库时，我传入`IMyDataContextFactory`一个`IMyDataContext`从`GetContext()`.

随着时间的推移，我注意到存储库中的重复，并且可以将某些方法推送到基本存储库中：`GetAll()`, `Save()`，`GetById()`有时如果我有一致的主键等。

# c# - 修改结构内的列表

> ID：10464394
> 
> 赞同：1
> 
> 时间：2012-05-05T17:43:31.897
> 
> 标签：c#, arrays, struct

我一直在为我在学校的 c# 课做一个项目。我认为我有一个非常简单的问题。但我一直无法在任何地方找到答案。我不断得到关于如何制作结构列表的结果。我想知道如何访问结构内的列表？

所以这是我们的老师给我们的结构，我们**必须**在这个作业中使用它：

```
[Serializable]
struct Name
{
    public string firstName;
    public string lastName;
}

[Serializable]
struct Movie
{
    public string title;
    public string year;
    public Name director;
    public float quality;
    public string mpaaRating;
    public string genre;
    public List<Name> cast;
    public List<string> quotes;
    public List<string> keywords;
}

struct MovieList
{
    public int length;
    public Movie[] movie;
} 
```

现在我尝试通过以下两种方式访问​​引号和关键字，但都产生了错误：

1.

```
string quotes;
MovieList ML = new MovieList();

quotes = Console.ReadLine();
ML.movie[0].quotes[0] = quotes; 
```

2.

```
string quotes;
MovieList ML = new MovieList();

quotes = Console.ReadLine();
ML.movie[0].quotes.Add(quotes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:58:32.957

结构是一种`Value`类型，因此，使用结构来携带所有这些信息会使其效率非常低，因为每次将其作为参数传递时，都需要复制结构的全部内容，等等。更好的方法是使用一个类，它是一种`Reference`类型，它的引用是传递的。

至于如何访问你的结构成员，这里有一个例子：

```
MovieList m =new MovieList();
m.movie = new Movie[10];
m.movie[0].title="The Girl with the Dragon Tatoo";
Console.WriteLine(m.movie[0].title); //The Girl with the Dragon Tatoo 
```

**更新：**

显示如何访问报价：

```
MovieList m =new MovieList();
m.movie = new Movie[10];
m.movie[0].title="The Girl with the Dragon Tatoo";
m.movie[0].quotes = new List<string>();
m.movie[0].quotes.Add("Hello World");
Console.WriteLine(m.movie[0].title); //The Girl with the Dragon Tatoo

Console.WriteLine(m.movie[0].quotes[0]); //Hello World 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:47:54.327

您的`MovieList`结构包含一个数组`Movie`。数组未初始化。

为什么不只制作一个`List<Movie>`而不是单独的结构或类？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:48:35.620

谢谢你对你的作业诚实。我看到的第一个问题是您试图在初始化之前使用列表。在结构内部，全新的列表引用了 null。你必须初始化它们。请对结构初始化进行研究。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T17:51:59.020

制作这些类而不是结构。对于 MovieList 类中的每一部电影，您都必须创建一个新的 Movie 实例，以便您可以添加到引号列表中。否则它不会被初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T21:25:45.520

结构通常应该避免暴露可变类类型的字段或属性，除非结构将由只对其中引用的对象的*身份*感兴趣的代码使用，而不是它们的*内容*。假设有结构`m1`，其中包含有关某些电影的信息，并且`m2`，最初是空白的。如果执行代码：

```
  m2 = m1;
  m2.年 = 2012;
  m2.keywords.Add("恐龙")

```

Then`m1.year`将不会被修改，但`m1.keywords`会添加“dinosaur”（因为`m1.keywords`和`m2.keywords`都指的是同一个 mutable `List<string>`.

用作数据持有者的结构可以公开逻辑不可变类类型的读写字段，或不包含任何可变类类型的值类型，但持有可变引用类型的结构通常具有奇怪的语义，应该实际时应避免。

# haskell - Haskell：使用列表理解拆分列表

> ID：10464395
> 
> 赞同：1
> 
> 时间：2012-05-05T17:43:41.067
> 
> 标签：haskell, split, list-comprehension, miranda

如何使用列表理解将列表分成两半？

例如，如果我有`[1,1,2,2,3,3,4,4,5,5]` 并且我只想`[1,1,2,2,3]`

到目前为止我的尝试：

```
half mylist = [r | mylist!r ; r <- [0..(#mylist div 2)] ]    ||does not work 
```

有什么想法吗？

[注：这实际上不是 Haskell，而是类似的。！用于索引列表，# 给出长度）

编辑：：

好吧，事实证明

```
half mylist = [r | r <- [mylist!0..mylist!(#mylist div 2)] ] 
```

有效，但仅在数字列表中而不是字符串中。有什么线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T17:52:43.647

这对于列表理解来说并不是一件合适的事情。列表推导是映射和过滤器（和 zip）的替代语法。拆分列表是折叠。

因此，您应该考虑另一种方法。例如

```
halve :: [a] -> [a]
halve [] = []
halve xs = take (n `div` 2) xs
    where n = length xs 
```

在大型列表上拆分不是一个很好的操作，因为您首先获取长度（因此它始终是列表上的*n* + *n/2*操作。它更适合具有*O(1)*长度和拆分的类数组类型.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T18:24:00.203

另一种可能的解决方案，使用布尔值守卫：

```
half xs = [x | (x,i) <- zip xs [1..], let m = length xs `div` 2, i <= m] 
```

但正如唐斯图尔特所说，列表理解并不是这项工作的正确工具。

# c - 使用 LzmaCompress 制作存档

> ID：10464397
> 
> 赞同：0
> 
> 时间：2012-05-05T17:44:12.433
> 
> 标签：c, compression, archive, 7zip, lzma

我对压缩方法有点困惑。我确实知道如何使用此功能，并且它确实输出了一个更小的缓冲区，但是我如何使用 7zip sdk 使用压缩数据制作存档？

我很确定这是一个与任何压缩算法相关的问题。

# javascript - 调整文本字段的大小？

> ID：10464399
> 
> 赞同：0
> 
> 时间：2012-05-05T17:44:25.793
> 
> 标签：javascript, html, dreamweaver, textfield

我正在尝试设计/调整输入字段的大小以适合我的 Photoshop 主题的设计。我在 Dreamweaver 中工作。我的问题是，在 Dreamweaver 中，文本框已调整大小，但是当我去预览或将其上传到我的主机并实时查看时，它只是常规大小。我究竟做错了什么？

更新：不知道为什么，但我的代码在这里显示不正确......在我的 HTML 中我有

```
 <input type="text" id="test"> 
```

我也试过 `<input type="text" id="test" value="" width="150" height="50" />`

我也尝试使用 CSS 样式表，但它仍在调整我的盒子的大小。感谢你们的任何建议。感谢您抽出宝贵时间帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:47:51.220

试试这个

```
<input type="text" id="test" value="" style="height:50px; width:150px;" /> 
```

# c# - 给定类型作为字符串创建一个新对象？

> ID：10464401
> 
> 赞同：0
> 
> 时间：2012-05-05T17:45:02.157
> 
> 标签：c#, reflection

> **可能重复：**
> [使用 c# 反射调用构造函数](https://stackoverflow.com/questions/3255697/using-c-sharp-reflection-to-call-a-constructor)

如何从字符串变量调用类的构造函数？

在 PHP 中，我可以这样做：

```
$myclassName = '\Namespace\MyClass';
$myParameters = array ('param1', 'param2');

$reflection = new \ReflectionClass($myclassName ); 
$myClassInstance = $reflection->newInstanceArgs($myParameters); 
```

就像我在 C# 中可以做的那样？

我有一个类似的视图列表

*   人物视图
*   屋景
*   车景

和她的 ViewModel

*   人视图模型
*   房屋视图模型
*   汽车视图模型

我的代码中有一个 ObservableCollection 我不想为每种类型添加一个新命令

```
AddPersonView = new RelayCommand(() =>
{
  //code
});

AddCarView = new RelayCommand(() =>
{
  //code
});

//etc 
```

我想将 CommandParameter 传递给同一个命令

```
AddView = new RelayCommand((name) =>
{
  // pseudo code
  var o = CreateIntance(name + "View");
  o.DataContext = CreateIntance(name + "ViewModel");
  _observableList.Add(o);
  // end 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:54:35.413

您可以尝试[Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/wcxyzt4d.aspx)。

喜欢

```
Namespace.MyClass obj = (Namespace.MyClass)Activator.CreateInstance(typeof(Namespace.MyClass), new[] { param1, param2}); 
```

# oop - 什么时候防止类继承？

> ID：10464406
> 
> 赞同：6
> 
> 时间：2012-05-05T17:45:41.080
> 
> 标签：oop, inheritance

最近有人告诉我，在面向对象编程中的一个很好的做法是，**您应该始终允许从您的类中继承**。我真的不这么认为，但我没有可靠的论据。

**阻塞继承的**真实例子：

1.  没有 C++ STL 类（专用类模板）允许继承（具有非虚拟析构函数）。
2.  Java 具有`final`适用于许多标准组件的类修饰符，例如`java.lang.String`.

**我认为**可能的原因是：****

 **1.  **安全性**，因为子类可能有权访问敏感的内部。（我不这么认为——他们不会访问私人成员。）
2.  **Performance**，因为子类可能会通过覆盖一些成员函数来破坏我们的高效实现。（孩子不会覆盖非虚拟功能。）
3.  **强制组合而不是**继承。（我完全同意。我们不应该支持不需要的继承。）

所以我的问题是：**在什么情况下我应该故意阻止继承？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:39:12.333

对于初学者来说，只有*在您*确定不希望其他人扩展您的类时才不允许继承。通常不建议出于琐碎的原因（例如性能）而阻止继承，因为代码重用通常超过通过标记 class 可以获得的小幅性能提升`final`。

话虽如此，这里有几个您可能想要显式阻止继承的示例：

1.  您正在编写一个商业的、封闭源代码的类，并且您不希望人们能够更改功能。这是阻止类继承的一个很好的理由，因为如果人们重写了你的方法和/或扩展了你的类，并且抱怨他们得到了意想不到的结果，你不希望以后必须支持它。

2.  您正在设计一个不可变的类。通过标记 class `final`，您可以防止子类损害您的类的不可变行为。例如，如果您被允许对 s 进行子类化`String`，那么其他人可以制作自己的实现来允许`String`修改 s。现在没有任何代码`String`可以确定对象是不可变的。

3.  您想强制[组合而不是继承](https://stackoverflow.com/q/49002/844882)。当您想要避免类之间的紧密耦合时，这是可取的（即，您不想要高度依赖于彼此的类组）。

4.  您想鼓励编译器进行内联。将类和方法标记为 final 可能会带来很小的性能提升，因为它将确保 Java 不必在运行时查找正确的类方法来调用对象。非最终方法被标记为虚拟，以便在需要时可以适当地扩展它们，最终方法可以直接链接或在类中内联编译。请注意，您可以通过这样做获得的性能提升通常是微不足道的（特别是如果您的类的方法很大）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T17:52:56.693

事实上，我试图遵循的做法，以及 Josh Bloch 在他的*Effective Java*书中推荐的做法，正是你被告知的那个相反的规则：除非你考虑过继承，否则将你的类设计为被继承，并记录了您的类必须如何被继承，您应该始终禁用继承。

我建议阅读 Effective Java 的这一章（你不会后悔购买它），并将它展示给告诉你这条规则的人。

不允许继承的最明显原因是不可变性。不可变对象易于使用（只有一种状态），可以被缓存，在许多对象之间共享，并且本质上是线程安全的。如果类是可继承的，那么任何人都可以扩展该类并通过添加可变属性使其可变。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T17:53:39.807

这只是我的0.02...

允许类继承允许人们处理不可预见的问题。（例如，经常出现在 RoR 中的猴子补丁。它可能很丑陋，但它是现实与迂腐）。话虽如此，我并不是无偿继承的忠实拥护者。基类和子类之间的关系可能很脆弱。深层次的继承层次很难理解。

我能想到的不允许继承的一种情况是强制不变性。这对于 Java String 类之类的东西很重要。**

# matlab - 代码向量化以计算总和

> ID：10464407
> 
> 赞同：1
> 
> 时间：2012-05-05T17:45:49.837
> 
> 标签：matlab, vectorization

我想矢量化总和的计算

`A{1} + A{2} + ... + A{end}`

其中`A`是一个向量元胞数组，每个 A{i} 是一个 nxn 数值矩阵。

有很多方法可以通过这种方式编写代码，但我想知道是否有一个聪明的方法只适合一两行代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T17:52:33.517

您可以先连接，然后沿第三维求和：

```
[A{1:3}] = deal(ones(4)); %# each element of the cell array contains a 4-by-4 array of ones

out = sum( cat(3,A{:}), 3); %# catenate, then sum 
```

# php - 如何使用 SimpleHTMLDOM 在图像锚标记中获取 url

> ID：10464412
> 
> 赞同：0
> 
> 时间：2012-05-05T17:46:15.303
> 
> 标签：php

我使用 SimpleHTMLDOM 从其他网页抓取东西，但我有一个问题，如何只在图像锚标签内获取网址，因为该网页包含链接锚标签以及图像锚标签！但我只想在图像锚标记中获取 href 值！

```
<a href="I DO NOT NEED THIS VALUE"><a/>

<a href="I NEED THIS VALUE"><img src="xxxx"><a/> 
```

但是当调用 DOM 时，它会返回所有的 href URL，包括链接锚 URL！我只需要图像锚标记内的 URL！

我用这个代码打电话..

```
$hrefl = $html->find('a');

$count = 1;

for( $i = 0; $i < 50; $i++){

              echo $hrefl[$count]->href;
              $count++;

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T17:59:15.127

您需要每个包含图像标签的链接的 href 属性。使用 xpath 非常简单：

```
//a/img/../@href 
```

你写的是你使用 DOM，你的代码看起来像是用简单的 html dom 编写的。该库是有限的，现在不再需要，因为 PHP 有`DOMDocument`and`DOMXPath`对象。我认为简单的 html DOM 没有 xpath，

```
$doc = new DOMDocument();
$doc->loadHTML($html);
$xpath = new DOMXPath($doc);
$hrefs = $xpath->query('//a/img/../@href');
$count = $hrefs->length;
foreach($hrefs as $href)
{
    echo $href->nodeValue, "\n";
} 
```

[演示](http://codepad.org/WpADYFWI)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T18:04:34.503

可能您正在使用[simplehtmldom 库](http://simplehtmldom.sourceforge.net/)进行解析，我不太了解它，我使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)进行所有解析。

我可以建议的非常快速的解决方案是检查锚标记是否在其中包含图像，如果是则获取值，否则跳过它。

像这样的东西：

```
<?php
    $doc = new DOMDocument();
    @$doc->loadHTMLFile($urlofhtmlpage);

    foreach($doc->getElementsByTagName('a') as $a){
        foreach($a->getElementsByTagName('img') as $img){
            echo $a->getAttribute('href');
        }
    }
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T18:08:30.540

试试这个：

```
$hrefl = $html->find('a');

$count = 1;

for( $i = 0; $i < 50; $i++){
  $img = $hrefl[$count]->find('img');
  // check if var exists and is valid               
  if ($img ... ) { 
    echo $hrefl[$count]->href;
  }
  $count++;
 } 
```

# javascript - Spring webflow和javascript：将表单元素绑定到可能包含逗号的字符串列表

> ID：10464425
> 
> 赞同：1
> 
> 时间：2012-05-05T17:47:35.247
> 
> 标签：javascript, spring, list

我正在使用 Spring webflow，我需要从表单中获取字符串列表并绑定到列表。问题是，字符串可能包含逗号，而我目前的方法无法处理。支持对象包含一个`List<String>`被调用的`values`. 我的表单的基本结构如下所示：

```
<form:form commandName="backingObject" id="listForm">
    <form:hidden path="values" id="listInput"/>
</form:form>

<script type="text/javascript">
    var valuesArray= ["foo", "bar,baz"];
    $('listInput').value = valuesArray;
    $('listForm').submit();    
</script> 
```

问题是，当将数组放入输入中时，javascript 只是对其进行字符串化，因此所遇到的值是just `"[foo,bar,baz]"`，而 Spring 相当合理地将其转换为三个字符串的列表。

我很惊讶没有找到其他有这个问题的人。我在做一些愚蠢的事情吗？我能想到的解决方案是：

*   Uri 在将值放入数组之前对其进行编码，并在支持对象中取消转换。感觉脆弱和笨拙，并且当 Java 端的其他东西与支持对象交互时会使事情变得困难。
*   制作一个自定义转换器，并在制作输入值时在 javascript 中做一些更有趣的事情。我猜这是“正确”的答案，但我不清楚如何进行。可能我只需要彻底阅读 webflow 文档。:D
*   就像，为列表中的每个值即时进行复选框输入，同时挥动我的手臂并大喊“haaaaaaaaack！”。

建议？谢谢！

# node.js - 自动扩展 EC2 不起作用时自动启动节点服务器

> ID：10464436
> 
> 赞同：2
> 
> 时间：2012-05-05T17:48:23.547
> 
> 标签：node.js, amazon-ec2

我想在创建实例时自动运行节点服务器（永远使用）。我在 Ubuntu 11.10（Canonical）上，我完全按照这里的说明使用用户脚本创建启动配置：http: [//alestic.com/2011/11/ec2-schedule-instance](http://alestic.com/2011/11/ec2-schedule-instance)

我似乎无法让它工作。下面是我的启动脚本：

```
#!/bin/bash                                                                                                                        

set -e -x

/home/MyUserName/node_modules/.bin/forever stopall
/home/MyUserName/node_modules/.bin/forever start node.js/app.js 
```

使用此 cmd 创建启动配置：

```
as-create-launch-config MyLC --image-id ami-b6a3f8f2 --user-data-file user-data-script.sh --instance-type m1.small 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:11:22.767

发现了问题，我必须永远以用户身份运行，而不是 root，想知道为什么......像这样：

`sudo -u MyUserName /home/MyUserName/node_modules/.bin/forever start node.js/app.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:55:35.273

您是否完全符合`app.js`文件要求？会不会只有这条线？

```
/home/MyUserName/node_modules/.bin/forever start /home/MyUserName/node.js/app.js 
```

# python - 递归搜索和MySql比较

> ID：10464440
> 
> 赞同：0
> 
> 时间：2012-05-05T17:48:45.840
> 
> 标签：python, mysql, oop

晚上好。我正在考虑开发一些代码，这些代码将从 JPEG 图像中收集 EXIF 数据并使用 Python v2.x 将其存储在 MySQL 数据库中。绊脚石在于 JPEG 分散在多个子目录和根目录中的更多子目录中例如 200 个 JPEG 可以存储在 root > subroot > subsubroot1 中，另外 100 个 JPEG 可以存储在 root > subroot > subroot2 中。一旦识别出所有图像，它们将被扫描并在添加到 MySQL 表之前提取它们各自的 EXIF 数据。

目前我正处于计划阶段，但我只是想知道，执行递归搜索的最有效和最pythonic的方法是什么？我正在寻找扫描根目录并将任何新识别的子目录附加到列表中，然后扫描列表中的所有子目录路径以查找更多子目录，直到我拥有所有目录的总列表。尽管恕我直言，这似乎是一种笨拙的方式并且有点重复，所以我认为可能有一种更面向对象的方式来执行此功能。

同样，我只想将新信息添加到我的 MySQL 表中，那么确定条目是否已经存在的最有效方法是什么？表中的文件名和 JPEG 文件名都将是其 MD5 哈希值。我正在考虑扫描代码开头的表格并将所有文件名放在一个集合中，因此，在扫描新的 JPEG 之前，如果集合中已经存在一个条目，则无需提取 EXIF 并继续下一张照片。然而，这是一种有效的方法，还是在遇到新图像时扫描 MySQL 表会更好？我预计 set 方法可能是最有效的，但是该表最终可能包含数千万个条目，因此将这些条目的文件名添加到集合（易失性内存）中可能不是最好的主意。

谢谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:09:56.580

我只想编写一个扫描目录中所有文件的函数；如果是 jpeg，请将 jpeg 的完整路径名添加到结果列表中。如果是目录，则立即以新发现的目录作为参数调用该函数。如果它是另一种类型的文件，则什么也不做。这是一个经典的递归分治策略。如果您的目录路径中有循环，例如符号链接，它将中断 - 如果这对您来说是危险的，那么您必须确保您不会通过查找“真实”非遍历同一个目录两次- 每个目录的符号链接路径并记录它。

如何避免重复条目是一个棘手的问题，您必须考虑是否可以容忍两个具有完全相同内容的不同名称的文件（并且还要考虑符号链接或多重硬链接文件的边缘情况），新文件如何出现在您正在扫描的目录中，以及您是否可以控制该过程。加快速度的一种方法是使用[os.path.getmtime()](http://docs.python.org/library/os.path.html#os.path.getmtime). 记录您开始目录遍历过程的那一刻。下一次，让您的递归遍历过程忽略任何 mtime 早于您记录的时间的 jpeg 文件。这不能是您跟踪的唯一方法，因为在您的流程的开始和结束时间之间修改的文件可能会或可能不会被记录，因此您仍然需要检查数据库中的这些记录（例如使用完整路径，文件信息的哈希值或数据本身的哈希值，具体取决于您不能容忍的重复类型），但用作启发式方法应该可以大大加快处理速度。

理论上，您可以将数据库中的所有文件名（可能是路径而不是文件名）加载到内存中以加快比较速度，但如果表存在变得非常大的任何危险，最好将该信息留在数据库中。例如，您可以从文件名创建一个哈希，然后简单地将其添加到具有 UNIQUE 约束的数据库中——数据库将拒绝任何重复的条目，您可以捕获异常并继续执行。如果您使用上述启发式检查文件 mtime，这不会很慢。

如果这对您的应用程序很重要，请确保您考虑到文件可能只被修改而不是新创建的可能性。

# java - java.awt.print.PrinterException：句柄无效

> ID：10464444
> 
> 赞同：0
> 
> 时间：2012-05-05T17:49:50.253
> 
> 标签：java, printing, network-printers

我正在通过 Java Print Service 和 IcePDF 在网络打印机上实现静默打印。我在我的开发机器上添加了两台网络打印机 A 和 B。

当我将打印作业提交给打印机 A 时，它打印文件没有任何问题，提交给打印机 B 的相同作业然后它在线程“main” **java.awt.print.PrinterException 中抛出异常：句柄无效。**

```
at sun.awt.windows.WPrinterJob._startDoc(Native Method)
at sun.awt.windows.WPrinterJob.startDoc(WPrinterJob.java:1249)
at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1371)
at org.tgslc.print.PDFRenderTest.main(PDFRenderTest.java:70) 
```

打印文档类型为 PDF 文档。打印机 A 是 HP LaserJet 9050 PS 打印机 B 是 IBM Infoprint 2190 PS 高速打印机。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:24:35.447

“句柄无效”消息并非特定于 Java。尝试从同一台计算机上的其他程序（记事本/Word）打印到该打印机。可能是打印机设置或驱动程序有问题。

# jquery - 如何使 jquery 在函数后更新 html？

> ID：10464456
> 
> 赞同：1
> 
> 时间：2012-05-05T17:51:58.943
> 
> 标签：jquery, html

使用jquery after() 函数将html添加到文档后，如何使html页面在浏览器刷新时保持添加的html？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:53:47.723

没有办法做到这一点，因为在刷新时，页面是根据`.html`文件（或`.php`等）呈现的。

您想要的将要求您在服务器上的文件上写入更改，这当然是 jquery (Javascript) 无法做到的，因为它在客户端运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T17:56:07.753

您必须`html()`在下一页加载时再次调用。如果您需要在两次访问之间保留一些数据，您可以为此使用网络存储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T18:00:37.457

试试 HTML 5 存储 API。

```
// store your new html, after your jquery.after

localStorage.setItem('htmlVal', 'your New HTML'); 
```

然后，在 document.ready 上...您可以附加它...

喜欢，

```
$(document).ready(function(){

var myVar = localStorage.getItem('htmlVal');
if(myVar != ''){
    $("#yourlement").after(myVar);
}

}); 
```

..没有实际意义，但是，我认为，可以解决您的要求。

干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T17:57:39.437

你不能那样做。当您刷新页面时，浏览器会从服务器获取一个全新的页面，该页面恰好与当前页面相同。

您必须在新页面加载后重新创建元素，因此您必须向新页面发送足够的信息，以便您的脚本知道页面加载后要做什么。

# java - JPA 生成带有数据库注释的实体

> ID：10464470
> 
> 赞同：0
> 
> 时间：2012-05-05T17:53:13.357
> 
> 标签：java, postgresql, jpa

我在 JPA 项目中使用 Eclipse IDE 生成实体（域类）。我可以生成域类，但我需要生成带有数据库注释的此类（postgreSQL）。例如，在数据库中，我有一个名为“user”的表，这个表有注释“包含用户数据的表”，这个表有一个名为“login”的字段，带有注释“用户的登录”。我需要将此类创建为：

```
/**
* Table containing user data
* 
*/
@Entity 
@Table(name="user")
public class User implements Serializable {
    private static final long serialVersionUID = 1L;

    /** Login of the user */
    @column(name="login")
    private String login; 
```

有可能的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:04:57.770

我建议查看[hibernate-tools.jar](http://docs.jboss.org/tools/2.1.0.Beta1/hibernatetools/html/ant.html) ANT 任务。

如果它不支持它，您可以轻松地修改源代码（查看 POJOClass、BasicPOJOClass、EntityPOJOClass）和/或负责实体字段生成 PojoFields.ftl 的模板（这是一个 Freemarker 模板）。

没时间详细看，希望对你有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-21T04:05:05.107

'user' 表无法创建，因为 PostgreSQL 有自己的名为 'user' 的表。所以你必须选择另一个名字。

# sql-server-2005 - 如何在 SQL Server 2005 中使用带参数的游标？

> ID：10464477
> 
> 赞同：1
> 
> 时间：2012-05-05T17:53:59.027
> 
> 标签：sql-server-2005, stored-procedures, parameters, cursor, error-correction

我正在使用的光标是...

```
Create Proc GetExamResults (@Course_Id varchar(100), @Semester varchar(10))
as
begin
    declare @subjname varchar(100)  
    declare @subjects varchar(7000)  
    declare @subjectsselection varchar(7000)  
    declare @SumSelection varchar(7000)  
    declare @NoOfSubjects int
    set @NoOfSubjects = 0

    set @subjects = ''  
    set @subjectsselection = '' 
    set @SumSelection = ''

    DECLARE subject_cursor CURSOR  
    FOR SELECT distinct Subject_Name FROM Exam_Result where course_id = @Course_Id And Semester = @Semester 

    OPEN subject_cursor  

    FETCH NEXT FROM subject_cursor  
    INTO @subjname  

    WHILE @@FETCH_STATUS = 0  
    BEGIN  
        set @subjects = @subjects + '[' + @subjname + '],'  
        set @subjectsselection = @subjectsselection + 'Sum(Isnull([' + @subjname + '],0)) As [' + @subjname + '],' 
        set @SumSelection = @SumSelection + 'Sum(Isnull([' + @subjname + '],0))+' 

        set @NoOfSubjects = @NoOfSubjects + 1

        FETCH NEXT FROM subject_cursor  
        INTO @subjname  
    End  
    CLOSE subject_cursor;  
    DEALLOCATE subject_cursor;  

    select @subjects = LEFT(@subjects, LEN(@subjects) - 1)  
    select @subjectsselection = LEFT(@subjectsselection, LEN(@subjectsselection) - 1)  
    select @SumSelection = LEFT(@SumSelection, LEN(@SumSelection) - 1)  

    print @subjects  
    print @subjectsselection  
    print @SumSelection

    declare @query nvarchar(4000)  

    set @query = 'select S.Enroll_Number, pvt.Student_Name, pvt.Course_Id, pvt.Semester, ' + @subjectsselection + ',' 
    set @query = @query + 'Exam_Type,' + @SumSelection + ' As Grand_Total, '
    set @query = @query + '(' + @SumSelection + ')' + '/' + convert(varchar(10),@NoOfSubjects) + ' As Avg'
    set @query = @query + ' From '  
    set @query = @query + '(select Enroll_Number, Student_Name, Course_Id, Semester, Subject_Name, MarksObtained, Exam_Type from Exam_Result ) ps '  
    set @query = @query + ' pivot(sum(MarksObtained) for Subject_Name in (' + @subjects + ')) as pvt'  
    set @query = @query + ' inner join Stud_Info S on S.Enroll_Number = pvt.Enroll_Number '
    set @query = @query + ' where pvt.Course_Id = ''' + @Course_Id + ''' and pvt.Semester = ''' + @Semester + ''''
    set @query = @query + ' group by S.Enroll_Number, pvt.Student_Name, pvt.Course_Id, pvt.Semester, Exam_Type'
    print @query
    exec sp_executesql @query  
end 
```

这两个表用于游标...

1]**螺柱信息**

```
CREATE TABLE Stud_Info
(Enroll_Number       varchar(20) NOT NULL,  
Salutation           varchar(10) NULL,  
First_Name           varchar(20) NULL,  
Middle_Name          varchar(20) NULL,  
Last_Name            varchar(20) NULL,  
Course_Id            varchar(20) NULL,  
Batch                varchar(20) NULL)

INSERT into Stud_Info values(11161,'Mr.','Mack','B','Botha','MECH','Batch1');    
INSERT into Stud_Info values(11162,'Mr.','John','A','Los','CIVIL','Batch2');    
INSERT into Stud_Info values(11163,'Ms.','Merry','F','Dsuza','ELCT','Batch1');    
INSERT into Stud_Info values(11164,'Mr.','Pow','B','Janero','MECH','Batch2');    
INSERT into Stud_Info values(11165,'Mr.','Martin','J','Smith','MECH','Batch1'); 
```

2]**考试结果**

```
CREATE TABLE Exam_Result
(Result_Id               numeric(18, 0) IDENTITY(1,1) NOT NULL,  
Enroll_Number            varchar(50) NULL,  
Student_Name             varchar(100) NULL,  
Course_Id                varchar(50) NULL,  
Semester                 varchar(50) NULL,  
Subject_Id               varchar(50) NULL,  
Subject_Name             varchar(50) NULL,  
MarksObtained            int NULL,  
Exam_Type                varchar(50) NULL)

INSERT into Exam_Result values(11161,'Mack','MECH',1,'MT','Maths',25,'Internal1');  
INSERT into Exam_Result values(11161,'Mack','MECH',1,'EN','English',22,'Internal1');  
INSERT into Exam_Result values(11161,'Mack','MECH',1,'SC','Science',20,'Internal1');  
INSERT into Exam_Result values(11161,'MACK','MECH',1,'MT','Maths',21,'Internal2');  
INSERT into Exam_Result values(11161,'Mack','MECH',1,'EN','English',24,'Internal2');  
INSERT into Exam_Result values(11161,'Mack','MECH',1,'SC','Science',22,'Internal2'); 
```

在这里，我用 2 个参数传递它，假设我正在传递`GetExamResults 'MECH','2'`

然后结果就像......

```
Enroll_Number  Student_Name Course_Id   Semester  Maths    English    Science    **Exam_Type**    total      avg

11161          Mack          MECH         1         25        22          20      **Internal1**      67        total/all sub
11161          Mack          MECH         1         21        24          22      **Internal2**      67        total/all sub 
```

但我想用......跟踪（通过为 Exam_type 添加第三个参数）`Exam_Type`并寻找类似的结果......

当用户执行时`GetExamResults 'MECH','1','Internal1'`，结果应该像......

```
Enroll_Number  Student_Name Course_Id   Semester  Maths    English    Science    **Exam_Type**    total      avg

    11161          Mack          MECH         1         25        22          20      **Internal1**      67        total/all sub 
```

当用户执行时`GetExamResults 'MECH','1','Internal2'`，结果应该像......

```
11161          Mack          MECH         1         21        24          22      **Internal2**      67        total/all sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:44:10.193

这里。我添加了一个可选参数@Exam_Type。如果不指定值或设置为 null，则过程将返回所有行。光标定义更改为包括 LOCAL 和 FAST_FORWARD 以加快执行速度。`And (@Exam_Type is null OR @Exam_Type = Exam_Type)`按@Exam_Type 的值添加到过滤exam_results；如果为 null，则不进行过滤。`(select Enroll_Number, Student_Name,`如果@Exam_Type 不为空，则将相同的过滤器添加到动态 sql 行。

```
ALTER Proc GetExamResults (@Course_Id varchar(100), @Semester varchar(10), @Exam_Type varchar(50) = null)
as
begin
    declare @subjname varchar(100)  
    declare @subjects varchar(7000)  
    declare @subjectsselection varchar(7000)  
    declare @SumSelection varchar(7000)  
    declare @NoOfSubjects int
    set @NoOfSubjects = 0

    set @subjects = ''  
    set @subjectsselection = '' 
    set @SumSelection = ''

    DECLARE subject_cursor CURSOR LOCAL FAST_FORWARD
    FOR SELECT distinct Subject_Name FROM Exam_Result where course_id = @Course_Id And Semester = @Semester And (@Exam_Type is null OR @Exam_Type = Exam_Type)

    OPEN subject_cursor  

    FETCH NEXT FROM subject_cursor  
    INTO @subjname  

    WHILE @@FETCH_STATUS = 0  
    BEGIN  
        set @subjects = @subjects + '[' + @subjname + '],'  
        set @subjectsselection = @subjectsselection + 'Sum(Isnull([' + @subjname + '],0)) As [' + @subjname + '],' 
        set @SumSelection = @SumSelection + 'Sum(Isnull([' + @subjname + '],0))+' 

        set @NoOfSubjects = @NoOfSubjects + 1

        FETCH NEXT FROM subject_cursor  
        INTO @subjname  
    End  
    CLOSE subject_cursor;  
    DEALLOCATE subject_cursor;  

    select @subjects = LEFT(@subjects, LEN(@subjects) - 1)  
    select @subjectsselection = LEFT(@subjectsselection, LEN(@subjectsselection) - 1)  
    select @SumSelection = LEFT(@SumSelection, LEN(@SumSelection) - 1)  

    print @subjects  
    print @subjectsselection  
    print @SumSelection

    declare @query nvarchar(4000)  

    set @query = 'select S.Enroll_Number, pvt.Student_Name, pvt.Course_Id, pvt.Semester, ' + @subjectsselection + ',' 
    set @query = @query + 'Exam_Type,' + @SumSelection + ' As Grand_Total, '
    set @query = @query + '(' + @SumSelection + ')' + '/' + convert(varchar(10),@NoOfSubjects) + ' As Avg'
    set @query = @query + ' From '  
    set @query = @query + '(select Enroll_Number, Student_Name, Course_Id, Semester, Subject_Name, MarksObtained, Exam_Type from Exam_Result ' + (case when @Exam_Type is null then '' else ' Where Exam_Type =''' + @Exam_Type + '''' end) + ' ) ps '  
    set @query = @query + ' pivot(sum(MarksObtained) for Subject_Name in (' + @subjects + ')) as pvt'  
    set @query = @query + ' inner join Stud_Info S on S.Enroll_Number = pvt.Enroll_Number '
    set @query = @query + ' where pvt.Course_Id = ''' + @Course_Id + ''' and pvt.Semester = ''' + @Semester + ''''
    set @query = @query + ' group by S.Enroll_Number, pvt.Student_Name, pvt.Course_Id, pvt.Semester, Exam_Type'
    print @query
    exec sp_executesql @query  
end 
```

# c++ - 在批处理模式下使用 QListWidget 时出现闪烁问题

> ID：10464478
> 
> 赞同：2
> 
> 时间：2012-05-05T17:54:08.557
> 
> 标签：c++, qt, qlistwidget

在批量布局模式下使用[QListWidget](http://doc.qt.nokia.com/4.7-snapshot/qlistwidget.html)时，每当添加的项目超过批量大小时，从旧列表切换到新列表时，列表小部件会闪烁一小段时间。这意味着，列表小部件不显示任何项目，并且滚动条句柄设置为看似随机的大小。

你有没有遇到过这种情况，能以某种方式解决吗？我正在使用 Qt 4.7.4。我可能应该补充一点，我没有使用任何隐藏物品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T02:10:52.733

我也遇到了这个问题，花了几个小时在 Qt 小部件渲染的大海中梳理。最终，我和你一样，将问题追溯到 QListView 的批处理。看起来，当启用批处理时，Qt 会触发一个内部计时器来执行底层滚动视图的增量布局调整。在这些增量布局期间，当滚动条可见时，更新区域计算不正确（它太大并且不考虑滚动小部件本身占用的区域）。结果是一个错误的更新区域随后进入视口更新，它具有清除整个客户区而不渲染任何 ListViewItems 的不幸副作用。

批处理完成后，最终的视口更新会正确计算布局几何（使用滚动条）并生成有效的更新区域；然后重绘列表中的可见元素。

随着列表中项目数量的增加（相对于批量大小），行为会恶化。例如，如果您的列表从 500 项增加到 50000 项，并且批量大小为 50，则触发的“重绘错误”事件的数量会成比例地增加，从而导致视图明显闪烁得更多。:(

这些增量（和失败的）视口更新似乎也导致您描述的滚动条句柄位置出现明显的 spazmodic 行为。

此问题的根源似乎与添加到 QListView::doItemsLayout() 的“hack”有关，如下所述：

```
// showing the scroll bars will trigger a resize event,
// so we set the state to expanding to avoid
// triggering another layout
QAbstractItemView::State oldState = state();
setState(ExpandingState); 
```

我想你可以重写 QListView::doItemsLayout() 并提供你自己的批处理来正确处理滚动条，但我个人太老了，懒得清理别人的便便。切换到 SinglePass 完全消除了这个问题。无缝的无闪烁渲染和您所期待和喜爱的滚动条行为。耶。

# visual-studio - MSVC2008，如何从“查找和替换”对话框中关闭“声音”？

> ID：10464482
> 
> 赞同：0
> 
> 时间：2012-05-05T17:54:35.040
> 
> 标签：visual-studio, visual-studio-2008

MSVC 2008 IDE 会在“查找和替换”对话框完成后播放“声音/铃声”。

这很烦人——你怎么把它关掉？

（我需要另外启用 PC 声音。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T18:00:41.807

进入 Windows 的“控制面板 > 硬件 > 声音 > 更改系统声音”并进入列表。尽管有很多可能性，但它可能是“感叹号”或“默认哔声”。您可以在此处禁用/更改声音。

# javascript - 更改谷歌图表工具的配置

> ID：10464485
> 
> 赞同：0
> 
> 时间：2012-05-05T17:54:42.060
> 
> 标签：javascript, google-visualization

我试图使用谷歌图表工具提供的饼图。他们的文档指定了一组配置选项

[https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart#Configuration_Options](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart#Configuration_Options)

但我不知道如何或在哪里在示例代码中指定它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:42:06.863

使用示例代码中给出的选项变量完成配置。为了改变背景颜色，我替换了这个

```
 var options = {'title':'Some Title',
                 'width':400,
                 'height':300}; 
```

这样

```
 var options = {'title':'Some Title',
                 'width':400,
                 'height':300, 'backgroundColor':'#EEF4EE'}; 
```

# java - 如何在另一个 servlet 中检索一个 servlet 会话属性

> ID：10464486
> 
> 赞同：3
> 
> 时间：2012-05-05T17:55:16.093
> 
> 标签：java, servlets

我的项目中有两个 servlet，第二个是从第一个 servlet 调用的。我在第一个 servlet 中创建 http 会话并为该会话对象设置一些属性。如何在第二个 servlet 中获取这些属性的值？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:02:01.697

```
Object value = request.getSession().getAttribute("nameOfTheAttributeUsedInTheFirstServlet"); 
```

如果两个 servlet 在同一个 webapp 中，它们共享相同的会话上下文，并且两个 servlet 的会话相同。当然，请记住会话对特定用户来说是紧密的。

# excel - 如何使用 OLEDB 查询 Excel 列表或表格？

> ID：10464487
> 
> 赞同：0
> 
> 时间：2012-05-05T17:55:24.587
> 
> 标签：excel, ado.net, oledb

使用[Excel 2010 OleDb 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=13255)和 OleDbConnection，我可以查询和操作电子表格中的工作表和命名范围，如下所示：

```
$cn = New-Object System.Data.OleDb.OleDbConnection $cnStr;
$cmd = $cn.CreateCommand()

$cmd.CommandText = "INSERT INTO [Some Named Range] (" + 
@"
    [Name], [Description], 
    [Type], [Val], 
) VALUES(
    'Justin', 'A Programmer', 
    'Senor Developer', 11
)"@
$cmd.ExecuteNonQuery();

$cmd.CommandText = "SELECT * FROM [Some WorkSheet$]"
$rdr = $cmd.ExecuteReader();
[PSObject[]] $data = [PSObject[]]@();
while ($rdr.Read()) {
    $row = @{}; 0..($rdr.FieldCount-1) | %{$row[$rdr.GetName($_)] = $rdr[$_]; }
    $data += New-Object PSObject -Property $row;
} 
```

但是，在 Excel 2003 中称为列表的表的命名约定是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:31:39.907

您必须使用列表对象/表的地址：

```
Dim Table as Excel.ListObject
dim TableAddress as String

Set Table = Worksheets("Some Worksheet").ListObjects("SomeTable")
TableAddress = Table.Range.Address(RowAbsolute:=False,ColumnAbsolute:=False)
...
$cmd.CommandText = "SELECT * FROM [Some WorkSheet$" TableAddress & "]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T03:17:53.803

使用 OleDB 或 ODBC 驱动程序根本无法做到这一点。

# java - Java程序和网络连接超时

> ID：10464488
> 
> 赞同：0
> 
> 时间：2012-05-05T17:55:44.303
> 
> 标签：java, networking, timeout

我有一个从网络收集数据的 java 程序。不幸的是，我的网络出现了问题，并且时断时续。
我需要一个技巧来让我的程序等到连接再次打开并继续它的工作。
我使用“URLConnection”库进行连接。当捕获到“ConnectException”时，我创建了一个循环重新连接，但它不起作用。
有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:54:43.733

> 我的网络有问题，它会时断时续。我需要一个技巧来让我的程序等到连接再次打开并继续它的工作

这取决于您的程序的目的是什么。
这些间歇性故障持续多长时间？如果它们足够短，您可以在尝试连接时使用[setConnectTimeout(0)](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html)来指示无限超时时间，但如果您的程序必须报告某些内容，那么这对最终用户来说不是一个好的选择。
你可以设置一个相对较低的超时时间，这样当你开始失去网络时，你会得到一个`java.net.SocketTimeoutException`.
当您发现此问题时，您可以等待一段时间，然后在循环中重试 3 次，然后可能会报告失败。
这取决于你想要做什么。

# java - 等距图形 Java

> ID：10464496
> 
> 赞同：0
> 
> 时间：2012-05-05T17:56:28.470
> 
> 标签：java, user-interface, 2d, depth, isometric

在 2D 中绘制图形时，如何处理帧中图片的深度？例如，地面深度为-1，玩家深度为0？

另一个问题是如何实现这种外观？当我说实现时，我的意思只是理论上的方法，而不是实际的源代码，但源代码可以提供帮助。

![在此处输入图像描述](../Images/dcb15d319aea5856e40722421daa58da.png)

我的游戏已经是基于 Tile 的，它已准备好以等距绘制。我在游戏的引擎部分有 xy 和 z 坐标。我读到您只需要将其翻译成 x 和 y 以进行等距绘图，但我不确定我要如何或为什么要这样做。

这是我现在的游戏图片。硬币是玩家，方块是瓷砖。

![在此处输入图像描述](../Images/f00fce1aa6107f8d7b092e7b294e05fd.png)

最后一件事是我的 Tiles 存储在一个数组中，即 Tile[] tileList。这是一种有效的存储方式吗？因为我想要最好的表现，我可以从我的比赛中得到最好的表现。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-29T02:06:04.063

我在我的 3D 显示器中做了一个简单的深度感知。深度感知的基本方程是：感知大小=大小/距离，就是这样。因此，对于每个 3D 点，我设置它们对应的感知 2D 大小：x2D = x3D/(zoom - z3D) 和 y2D = y3D/(zoom - z3D)。其中缩放是您与轴原点的距离。这能回答你的深度问题吗？

# c# - 休眠错误

> ID：10464497
> 
> 赞同：0
> 
> 时间：2012-05-05T17:56:49.017
> 
> 标签：c#, nhibernate, exception, mapping

我有这个代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using NHibernate;
using NHibernate.Cfg;
using base_donnee;
using System.IO;

namespace TrackingUnitSimulator
{ 
    public class connection
    {
        public  ISession session ;
        public IList<simulateur> simulateurs = null;
        public IList<user> users = null;
        public IList<equipment> equipments = null;
        public IList<string> jours = null;
        public IList<int> conn_1 = null;
        public IList<int> recep_1 = null;
        public IList<int> envoi_1 = null;
        public IList<int> conn_tout = null;
        public IList<int> recep_tout = null;
        public IList<int> envoi_tout = null;
        public IList<Performance> performances = null;
        public int[] mesures = new int[100];
        public IList<int> nombres = null;
          public connection()
        {
           ISessionFactory factory;
            Configuration config = new Configuration();
            config.SetProperty(NHibernate.Cfg.Environment.ConnectionProvider, "NHibernate.Connection.DriverConnectionProvider");
            config.SetProperty(NHibernate.Cfg.Environment.Dialect, "NHibernate.Dialect.MsSql2005Dialect");
            config.SetProperty(NHibernate.Cfg.Environment.ConnectionDriver, "NHibernate.Driver.SqlClientDriver");
            config.SetProperty(NHibernate.Cfg.Environment.ConnectionString, "Data Source=HP-PC\\SQLEXPRESS;Initial Catalog=Simulation;Integrated Security=True;Pooling=False");
            config.SetProperty(NHibernate.Cfg.Environment.ProxyFactoryFactoryClass, "NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle");

                config.AddAssembly("base_donnee");

            factory = config.BuildSessionFactory();

            try
            {
                session = factory.OpenSession();

                try
                {
                simulateurs = session.CreateQuery(@"select e from  simulateur e ordred by e.Date").List<simulateur>();

                    users = session.CreateQuery(@"select e from user e ").List<user>();
                }
                catch (Exception ex) { File.AppendAllText(@"C:\Users\HP\Desktop\test.txt",ex.ToString());}
                equipments = session.CreateQuery(@"select e from  equipment e ").List<equipment>();
                performances = session.CreateQuery(@"select e from Performance e ").List<Performance>();
                jours = session.CreateQuery(@"select distinct e.Date from simulateur e ordred by e.Date").List<string>();
                nombres = session.CreateQuery(@"select e.Nombre_simulateur from simulateur e ordred by e.Date").List<int>();
                conn_1 = session.CreateQuery(@"select  e.temps_connection from simulateur e where e.Nombre_simulateur = 1 ").List<int>();
                recep_1 = session.CreateQuery(@"select  e.temps_reception from simulateur e where e.Nombre_simulateur = 1 ").List<int>();
                envoi_1 = session.CreateQuery(@"select  e.temps_envoi from simulateur e where e.Nombre_simulateur = 1 ").List<int>();
                conn_tout = session.CreateQuery(@"select  e.temps_connection from simulateur e  ").List<int>();
                recep_tout = session.CreateQuery(@"select  e.temps_reception from simulateur e ").List<int>();
                envoi_tout = session.CreateQuery(@"select  e.temps_envoi from simulateur e ").List<int>();
                int i = 0;
                foreach (string j in jours) {
                    IQuery query = session.CreateQuery(@"select e from simulateur e where e.Date=:j ");
                    query.SetString("j", j);
                    IList<simulateur> med = query.List<simulateur>();
                    mesures[i] = med.Count;
                    i++;
                }

            }
            catch 
            {

                session.Close();
            }
        }
        public ISession getSession(){
            return session;
        }
    }
} 
```

和类 user.cs ：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace base_donnee
{
   public class user
    {
        public virtual string login { get; set; }
        public virtual string password { get; set; }
        public virtual string name { get; set; }
        public virtual int age { get; set; }
        public virtual string location { get; set; }
    }
} 
```

和类 user.hbm.xml：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="base_donnee">
      <class name="base_donnee.user, base_donnee" table="user">
    <id name="login" type="string"></id>
        <property name="password" type="string" />
        <property name="age" type="int" />
        <property name="location" type="string" />
        <property name="name" type="string" />
      </class>
</hibernate-mapping> 
```

我的问题是出现异常：NHibernate.ADOException: could not execute query [ select user0_.login as login3_, user0_.password as password3_, user0_.age as age3_, user0_.location as location3_, user0_.name as name3_ from user user0_ ] [SQL: select user0_.login as login3_, user0_.password as password3_, user0_.age as age3_, user0_.location as location3_, user0_.name as name3_ from user user0_] ---> System.Data.SqlClient.SqlException:关键字“用户”附近的语法不正确。
我需要一些想法如何避免这个错误？为什么是表用户？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T18:06:55.767

`user`是 T-SQL 中的关键字。因为您已经命名了 table `user`，所以它与 T-SQL 关键字发生冲突。

您需要设置[自动报价](http://nhforge.org/blogs/nhibernate/archive/2009/06/24/auto-quote-table-column-names.aspx)：

```
config.Properties["keywords"] = "auto-quote"; 
```

除此之外，您的代码绝对是一场灾难。您正在吞噬顶级`Exception`类型。您有硬编码的 SQL 语句，但您使用的是 NHibernate（这很少需要）。您试图在会话可能无法打开后关闭它。`foreach`您使用但您有一个手动管理的索引变量遍历列表`i`。我可以继续一段时间。

# javascript - 遍历 ViewData 数组并使用 javascript 代码

> ID：10464498
> 
> 赞同：0
> 
> 时间：2012-05-05T17:57:04.400
> 
> 标签：javascript, asp.net, asp.net-mvc-3

我有一个通过 ViewData 传递到我的视图的数组。这个数组由我的一个模型的几个元素组成。

我想遍历这些元素并将javascript代码与对象的元素一起使用。

伪代码示例：

```
for x in ViewData["asdasd"] {

  foo(x.Property)

} 
```

foo 是一个 JavaScript 函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:07:39.527

使用反射来获取值。（编辑是因为我意识到我一开始完全误解了这个问题）

```
@{ 
 Type t = typeof(MyModelType);
 foreach (string x in ViewData["mykey"])
 { 
     var propertyVal = t.GetProperty(x).GetValue(MyModelObject, null);
     @Html.Raw("foo('" + propertyVal + "')");
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:07:21.383

如果我是正确的尝试：

```
var myArray = new Array();
myArray = <%= ViewData[yourarray] %>;

for (var i = 0; i < myArray.length; i++) {
    foo(myArray[i]);
    //Do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:40:15.700

你可以使用这样的东西：

```
@{
foreach (var firstName in (ViewData["my_list"] as IEnumerable<string>)) {
    @Html.Raw(firstName);<br />
} 
```

}

# jquery - 如果 span 包含 ID 则

> ID：10464499
> 
> 赞同：1
> 
> 时间：2012-05-05T17:57:07.217
> 
> 标签：jquery, checkbox, this

尝试使用`$(this).attr("id")`. 我想要的是，当单击并选中一个复选框时，它的 ID 会记录在一个 div 中`#log`（这有效）。当它被点击而不被选中时，jQuery 应该检查记录的行是否与复选框的 ID 相同。如果是这样，则应删除该跨度。

这是一个jsfiddle：http: [//jsfiddle.net/fLskG/1/](http://jsfiddle.net/fLskG/1/)

因此，当您单击时，会出现`Option 1`文本`option-0`（这是复选框的 ID）。当您再次单击该按钮时，该文本应该会消失。

这是脚本：

```
$(document).ready(function() {
    $(".menu").find("input:checkbox").click(function() {

        if ($(this).is(":checked")) {
            $("#textValue").text($(this).val());
            $("#log").append("<span>" + this.id + "</span><br/>");
        }
        else {
            if ($("#log").children("span").contains($(this).attr("id"))) {
                console.log($(this).attr("id"));
                $("#log").children("span").remove();
            }
        }
    });
});​ 
```

我很确定问题出在“包含”上。但我不知道如何让 jQuery 检查是否有一个跨度包含第一个函数中选中的复选框的 ID。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:02:26.813

只需检查一下。我认为您只需要删除未选中复选框的跨度

[http://jsfiddle.net/fLskG/6/](http://jsfiddle.net/fLskG/6/)

```
 $(document).ready(function() {
    $(".menu").find("input:checkbox").click(function() {

        if ($(this).is(":checked")) {
            $("#textValue").text($(this).val());
            $("#log").append("<span>" + this.id + "</span><br/>");
        }
        else {
            if ($("#log").children("span:contains("+($(this).attr("id"))+")")) {
                console.log($(this).attr("id"));
                $("#log").children("span:contains("+($(this).attr("id"))+")").remove();
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:15:42.370

您可以采用 HTML5 数据属性，但由于它是一对一的，我只是给跨度一个 id `log-{checkbox-id}`，所以基本上：

```
$(".menu input:checkbox").on("click", function() {
    if ($(this).is(":checked")) {
        $("#textValue").text($(this).val());
        $("#log").append("<span id=\"log-" + this.id + "\">" + this.id + "</span><br/>");
    }
    else {
        $("#log-" + $(this).attr("id")).remove();
    }
});​ 
```

这是小提琴：http: [//jsfiddle.net/crazytonyi/fLskG/7/](http://jsfiddle.net/crazytonyi/fLskG/7/)

这样做的好处是您不必确认该值是否已经在列表中，因为它不会被选择器找到。我可能也会加强您如何进行插入和 HTML，但现在，我只想修改代码以显示 id 标记解决方案。

在这里，有点收紧：

```
$(".menu input:checkbox").on("click", function() {
    if ($(this).is(":checked")) {
        $("#textValue").text($(this).val());
        var $log_entry = $('<li>');
        $log_entry.attr("id", "log-" + this.id);
        $log_entry.text(this.id);
        $("#log").append($log_entry);
    }
    else {
        $("#log-" + $(this).attr("id")).remove();
    }
});​ 
```

请注意，日志现在`ul`不需要中断等，从而更容易添加 id 属性和文本。新演示：http: [//jsfiddle.net/crazytonyi/fLskG/12/](http://jsfiddle.net/crazytonyi/fLskG/12/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T18:00:50.760

而不是`$("#log").children("span").contains($(this).attr("id"))`使用`$('#log span:contains("'+ this.id +'")')`.

$(document).ready(function() { $(".menu").find("input:checkbox").click(function() {

```
 if ($(this).is(":checked")) {
        $("#textValue").text($(this).val());
        $("#log").append("<span>" + this.id + "</span><br/>");
    }
    else {
        $('#log span:contains("'+ this.id +'")').next('br').andSelf().remove();
    }
}); 
```

});

**[演示](http://jsfiddle.net/fLskG/10/)**

# java - 简单的android套接字客户端

> ID：10464500
> 
> 赞同：1
> 
> 时间：2012-05-05T17:57:20.757
> 
> 标签：java, javascript, android, sockets, node.js

我是 Android Java 编程的新手，所以很难弄清楚我的问题。我有一个简单的 node.js 服务器，它只监听 localhost:7000 并将任何输入打印到控制台（它适用于我的 actionscript 客户端）。我需要做一些类似的事情来理解 Android，只是简单的客户端套接字发送器，它写任何我可以在我的服务器日志中查看的内容。这是代码，我尝试在 Eclipse Android 模拟器上使用，如果我使用“localhost”或“127.0.0.1”，它可以正常工作但没有任何反应（服务器日志将为空），如果我将其更改为我的本地服务器地址（这里是 wi-fi 本地网络和电话使用它）应用程序只是在大冻结然后关闭后抛出错误。电话类似问题。

**客户端：**

```
package etc.supachat;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketException;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;

public class SupaChatActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        
        try {

            Socket s = new Socket("192.168.1.34", 7000);

            //outgoing stream redirect to socket

            OutputStream out = s.getOutputStream();

            PrintWriter output = new PrintWriter(out);

            output.println("Hello Android!");

            BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));

            //read line(s)

            String st = input.readLine();

            //Close connection

            s.close();

    } catch (UnknownHostException e) {

            // TODO Auto-generated catch block

            e.printStackTrace();

    } catch (IOException e) {

            // TODO Auto-generated catch block

            e.printStackTrace();

    }
    }
} 
```

**这是清单代码：**

```
 <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SupaChatActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**这是简单的用户界面：**

```
 <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/out_view"
            android:layout_width="162dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </RelativeLayout>

</LinearLayout> 
```

**更新** 这里是 Eclipse 控制台日志：

```
05-05 18:13:49.172: D/AndroidRuntime(1452): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
05-05 18:13:49.172: D/AndroidRuntime(1452): CheckJNI is ON
05-05 18:13:49.921: D/AndroidRuntime(1452): Calling main entry com.android.commands.pm.Pm
05-05 18:13:49.950: D/AndroidRuntime(1452): Shutting down VM
05-05 18:13:49.971: D/dalvikvm(1452): GC_CONCURRENT freed 101K, 71% free 297K/1024K, external 0K/0K, paused 7ms+1ms
05-05 18:13:49.971: I/AndroidRuntime(1452): NOTE: attach of thread 'Binder Thread #3' failed
05-05 18:13:49.981: D/dalvikvm(1452): Debugger has detached; object registry had 1 entries
05-05 18:13:50.491: D/AndroidRuntime(1462): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
05-05 18:13:50.491: D/AndroidRuntime(1462): CheckJNI is ON
05-05 18:13:51.231: D/AndroidRuntime(1462): Calling main entry com.android.commands.am.Am
05-05 18:13:51.271: I/ActivityManager(68): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=etc.supachat/.SupaChatActivity } from pid 1462
05-05 18:13:51.321: I/ActivityManager(68): Start proc etc.supachat for activity etc.supachat/.SupaChatActivity: pid=1470 uid=10035 gids={3003}
05-05 18:13:51.362: D/AndroidRuntime(1462): Shutting down VM
05-05 18:13:51.371: D/dalvikvm(1462): GC_CONCURRENT freed 102K, 69% free 319K/1024K, external 0K/0K, paused 1ms+1ms
05-05 18:13:51.421: D/dalvikvm(1462): Debugger has detached; object registry had 1 entries
05-05 18:14:01.324: W/ActivityManager(68): Launch timeout has expired, giving up wake lock!
05-05 18:14:02.033: W/ActivityManager(68): Activity idle timeout for HistoryRecord{406a46a8 etc.supachat/.SupaChatActivity}
05-05 18:14:07.151: D/dalvikvm(137): GC_EXPLICIT freed 47K, 52% free 2817K/5831K, external 4863K/5566K, paused 84ms
05-05 18:16:19.360: I/InputDispatcher(68): Application is not responding: AppWindowToken{407b8948 token=HistoryRecord{406a46a8 etc.supachat/.SupaChatActivity}}.  5036.3ms since event, 5035.8ms since wait started
05-05 18:16:19.360: I/WindowManager(68): Input event dispatching timed out sending to application AppWindowToken{407b8948 token=HistoryRecord{406a46a8 etc.supachat/.SupaChatActivity}}
05-05 18:16:19.491: I/Process(68): Sending signal. PID: 1470 SIG: 3
05-05 18:16:19.491: I/dalvikvm(1470): threadid=4: reacting to signal 3
05-05 18:16:19.520: I/dalvikvm(1470): Wrote stack traces to '/data/anr/traces.txt'
05-05 18:16:19.531: I/Process(68): Sending signal. PID: 68 SIG: 3
05-05 18:16:19.531: I/dalvikvm(68): threadid=4: reacting to signal 3
05-05 18:16:19.580: I/dalvikvm(68): Wrote stack traces to '/data/anr/traces.txt'
05-05 18:16:19.580: I/Process(68): Sending signal. PID: 125 SIG: 3
05-05 18:16:19.590: I/dalvikvm(125): threadid=4: reacting to signal 3
05-05 18:16:19.610: I/dalvikvm(125): Wrote stack traces to '/data/anr/traces.txt'
05-05 18:16:19.610: I/Process(68): Sending signal. PID: 128 SIG: 3
05-05 18:16:19.620: I/dalvikvm(128): threadid=4: reacting to signal 3
05-05 18:16:19.630: I/dalvikvm(128): Wrote stack traces to '/data/anr/traces.txt'
05-05 18:16:20.030: D/dalvikvm(68): GC_EXPLICIT freed 789K, 47% free 4557K/8519K, external 3520K/3903K, paused 112ms
05-05 18:16:20.720: E/ActivityManager(68): ANR in etc.supachat (etc.supachat/.SupaChatActivity)
05-05 18:16:20.720: E/ActivityManager(68): Reason: keyDispatchingTimedOut
05-05 18:16:20.720: E/ActivityManager(68): Load: 0.09 / 0.12 / 0.09
05-05 18:16:20.720: E/ActivityManager(68): CPU usage from 14302ms to 0ms ago:
05-05 18:16:20.720: E/ActivityManager(68):   0.4% 68/system_server: 0.2% user + 0.2% kernel
05-05 18:16:20.720: E/ActivityManager(68):   0.4% 128/com.android.systemui: 0.2% user + 0.1% kernel / faults: 1 minor
05-05 18:16:20.720: E/ActivityManager(68):   0.1% 125/com.android.phone: 0% user + 0.1% kernel
05-05 18:16:20.720: E/ActivityManager(68):   0% 12/pdflush: 0% user + 0% kernel
05-05 18:16:20.720: E/ActivityManager(68):   0% 332/logcat: 0% user + 0% kernel
05-05 18:16:20.720: E/ActivityManager(68): 1.6% TOTAL: 0.9% user + 0.6% kernel
05-05 18:16:20.720: E/ActivityManager(68): CPU usage from 678ms to 1270ms later:
05-05 18:16:20.720: E/ActivityManager(68):   8.3% 68/system_server: 3.3% user + 5% kernel
05-05 18:16:20.720: E/ActivityManager(68):     8.3% 98/InputDispatcher: 6.6% user + 1.6% kernel
05-05 18:16:20.720: E/ActivityManager(68): 13% TOTAL: 6.6% user + 6.6% kernel
05-05 18:16:20.750: I/InputDispatcher(68): Dropping event because the pointer is not down.
05-05 18:16:23.530: W/ActivityManager(68):   Force finishing activity etc.supachat/.SupaChatActivity
05-05 18:16:23.550: I/ActivityManager(68): Killing etc.supachat (pid=1470): user's request
05-05 18:16:23.550: I/Process(68): Sending signal. PID: 1470 SIG: 9
05-05 18:16:23.570: I/ActivityManager(68): Process etc.supachat (pid 1470) has died.
05-05 18:16:23.770: W/InputManagerService(68): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@406c8c68 
```

**更新 2.**这是与 actionscript-client 一起使用的服务器端脚本（它类似于聊天，我写它是为了理解新的语言和平台）：

```
var net = require("net"), sys = require('util');

var names = Array();
var streams = Array();

var policy = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
"<!DOCTYPE cross-domain-policy SYSTEM \"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd\">" +
"<cross-domain-policy><allow-access-from domain=\"*\" to-ports=\"*\" />" +
"</cross-domain-policy>\0";

function onStreamData(data){
    var current_stream = this;
    console.log(data);
    if(data.substring(1,20) == "policy-file-request"){
        console.log("asd");
        current_stream.write(policy);
    }

    else if(data.substring(0,6) == "[name]"){
        console.log("name");
        names.push(data.substring(6, data.length));
        streams.push(current_stream);
    }

    else
    {   
        var na;
        for(i =0; i<names.length; i++){
            if(current_stream == streams[i]){
                na = names[i]
            }
        }

        for(i =0; i<names.length; i++){
            if(streams[i]!=null){
                streams[i].write(na+data+"\0");
            }
        }
    }
}

function onClose(){
        var current_stream = this;
        for(i = 0; i<streams.length; i++){
            if(streams == current_stream){
                streams.splice(i, 1);
                names.splice(i, 1);
            }
        }
        current_stream.end();
}

var server = net.createServer(function (stream) {
    stream.setEncoding("utf8");
    stream.on('data', onStreamData);
    stream.on('end', onClose);
});

server.listen(7000, "127.0.0.1"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:37:26.870

**快速修复：主机始终可以通过 IP 地址：10.0.2.2 的模拟器访问，** 因此您应该在 android 代码中使用此 IP 地址与主机连接。

**更多细节**（[这里](http://developer.android.com/guide/developing/devices/emulator.html#emulatornetworking)）：

Android 模拟器与主机所在的网络不同。而是 android 模拟器位于虚拟网络上，位于虚拟路由器后面。因此模拟器无法连接到您主机的私有 IP 地址。（因为它位于不同的网络上）。

当您在 android 代码中使用 localhost（或 127.0.0.1）时，这意味着您要访问 android 设备，因此在您的情况下没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:54:19.610

要在手机上运行它，您还需要 AndroidManifest.xml 的以下权限：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

我想看看服务器端，因为我没有看到其他错误。

# python - 如果另一个测试因 py.test 失败，我该如何跳过测试？

> ID：10464502
> 
> 赞同：14
> 
> 时间：2012-05-05T17:57:27.917
> 
> 标签：python, pytest

假设我有这些测试功能：

```
def test_function_one():
    assert # etc...

def test_function_two():
    # should only run if test_function_one passes
    assert # etc. 
```

如何确保 test_function_two 仅在 test_function_one 通过时运行（我希望它是可能的）？

**编辑：** 我需要这个，因为测试二正在使用测试一验证的属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-08-23T08:24:03.550

您可以使用名为[pytest-dependency](https://pytest-dependency.readthedocs.io/en/latest/usage.html)的 pytest 插件。

代码可能如下所示：

```
import pytest

@pytest.mark.dependency()   #First test have to have mark too
def test_function_one():
    assert 0, "Deliberate fail"

@pytest.mark.dependency(depends=["test_function_one"])
def test_function_two():
    pass   #but will be skipped because first function failed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:16:25.583

我认为你的解决方案是模拟 test1 设置的值。

理想情况下，测试应该是独立的，因此请尝试模拟该值，以便您可以随时运行 test2，事实上，您还应该模拟（模拟）脏值，以便您可以看到 test2 在收到意外数据时的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-19T10:15:39.147

我正在使用名为[pytest-dependency](https://pytest-dependency.readthedocs.io/en/latest/usage.html)的 pytest 插件。

添加到上述内容 - 如果您在测试类中使用测试 - 您必须**将测试类名称添加到函数 test name**。

例如：

```
import pytest

class TestFoo:

    @pytest.mark.dependency()
    def test_A(self):
        assert False

    @pytest.mark.dependency(depends=['TestFoo::test_A'])
    def test_B(self):
        assert True 
```

因此，如果 test_A 失败 - test_B 将不会运行。如果 test_A 通过 - test_B 将运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:49:34.370

我认为这就是你想要的：

```
def test_function():
    assert # etc...
    assert # etc... 
```

这符合您的要求，即仅当第一个“测试”（断言）通过时才运行第二个“测试”（断言）。

# objective-c - 定义字符串连接 ios

> ID：10464503
> 
> 赞同：-3
> 
> 时间：2012-05-05T17:57:30.757
> 
> 标签：objective-c

我有一个`#define hhh "uu"`然后我想使用以下方法连接字符串：

```
NSString *str [NSString stringWithFormat@"%@%@",hhh,"ii"]; 
```

但我收到编译错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:01:13.900

第一个问题：您`:`在`stringWithFormat`. 第二个问题：您缺少变量名`str`和初始化表达式之间的赋值运算符。

第三个问题：格式字符串的第二个参数`@"%@%@"`是一个普通的标准 C 字符串（aka, `char*`），其中格式字符串调用一个对象（aka, `NSString`）。`@`在字符串文字前添加a ：

```
NSString* str = [NSString stringWithFormat: @"%@%@",hhh,@"ii"]; 
```

（**编辑**假设错误，我忽略了`define`：我在这里假设，即`hhh`对象引用，例如`id`，`NSString*`或其他东西）。

由于`hhh`也是一个纯字符串，您应该`%s`在格式字符串中指定为占位符：

```
NSString* str = [NSString stringWithFormat: @"%s%@",hhh,@"ii"]; 
```

正如@sch 推荐的那样。

# android - 在 XML 中的表格布局中包装滚动视图

> ID：10464507
> 
> 赞同：0
> 
> 时间：2012-05-05T17:58:25.973
> 
> 标签：android, xml

因此，我在 XML 中创建表视图，使用以下 java 代码动态添加行：

```
private void fillTable(TableLayout tableLayout, String[] items) {
    for (int i = 0; i < items.length; i++) {

        TextView itemText = new TextView(FillingActivity.this);
        itemText.setText(items[i]);
        TableRow row = new TableRow(FillingActivity.this);
        row.addView(itemText);
        if(i % 2 == 1)
            row.setBackgroundColor(color.LightGreen);

        tableLayout.addView(row);

    }
} 
```

单个表格布局的代码如下：

```
<TableLayout
    android:id="@+id/dinnertableviewing"
    android:layout_width="346dp"
    android:layout_height="wrap_content"
    android:layout_x="2dp"
    android:layout_y="210dp" >

</TableLayout> 
```

但是，当向该表添加许多项目时，它与下一个表的空间重叠，这是一张显示它的图片：

[![截屏](../Images/2832da76640e2d41d36a9dced0176241.png)](https://i.stack.imgur.com/v9QLj.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:44:47.373

不要使用绝对布局。当 AbsoluteLayout 包含可以调整大小的内容或在不同大小的屏幕上运行时（例如几乎所有 Android 设备），您遇到的困难正是 AbsoluteLayout 被弃用的原因。

如果您尝试将元素垂直放置在屏幕下方，请使用带有`android:orientation="vertical"`.

# c# - 更改列表中的点

> ID：10464516
> 
> 赞同：0
> 
> 时间：2012-05-05T17:59:18.423
> 
> 标签：c#

我写了一个简单的类，`point`我想在一个列表中使用它。

在列表中，我有 3 分。如果我打印它：

```
for (int i = listOfPoint.Count -1; i >=0; i--)
{
    Console.WriteLine(listOfPoint[i].toString());
} 
```

输出是：

```
(32, 10)
(33, 10)
(34, 10) 
```

现在，我想这样做：

```
for (int i = listOfPoint.Count -1; i > 0; i--)
{
    listOfPoint[i] = listOfPoint[i - 1];
} 
```

在此之后 - 打印：

```
(33, 10)
(34, 10)
(34, 10) 
```

在此之后 - 我想改变 Y 的值`listOfPoint[0]`，所以：

```
listOfPoint[0].Y = 11; 
```

再次打印列表，输出为：

```
(33, 10)
(34, 11)
(34, 11) 
```

为什么没有输出：

```
(33, 10)
 (34, 10) 
(34, 11)
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:05:56.593

在“将它们向上移动一个”（第二个 for 循环）结束时， listOfPoint[0] 和 listOfPoint[1] 指向同一个对象。为避免这种情况，请添加以下行：

```
listOfPoint[0] = new Point(listOfPoint[1].X, listOfPoint[1].Y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:06:18.287

发生这种情况是因为您有两个数组元素引用同一个对象。这是由于指针。

尝试这样做以避免问题：

```
for (int i = listOfPoint.Count -1; i > 0; i--)
{
    //Pass the value not the pointer
    listOfPoint[i] = new Point(listOfPoint[i-1].X, listOfPoint[i-1].Y);
} 
```

# c++ - 使用 boost::spirit 将元素解析为向量，使用分号或换行符作为分隔符

> ID：10464520
> 
> 赞同：0
> 
> 时间：2012-05-05T18:00:04.780
> 
> 标签：c++, parsing, boost, boost-spirit

我想将整数序列解析为`std::vector<int>`, 使用`boost::spirit`. 整数可以用分号或换行符分隔。

但是这个语法不能编译：

```
typedef std::vector<int> IntVec;
template <typename Iterator, typename Skipper>
struct MyGrammar : qi::grammar<Iterator, IntVec(), Skipper> {
  MyGrammar() : MyGrammar::base_type(start) {
    start = +(qi::int_
              >> (";" | qi::no_skip(qi::eol)));
  }
  qi::rule<Iterator, IntVec(), Skipper> start;
}; 
```

为了清楚起见，我想解析以下输入，例如，

```
1; 2; 3
4 ; 5 
```

成一个向量`(1,2,3,4,5)`。我该怎么做，为什么我的版本不能编译？

我可以以某种方式将分隔符（“分号或换行符”）写成自己的规则吗？它的返回类型是什么？某种`null`价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:49:00.863

检查分号时似乎正在应用跳过符，因此一旦`qi::no_skip[qi::eol]`达到跳过字符（包括换行符）就已经被消耗掉了。以下对我有用，`no_skip`首先是令牌：

```
 start = qi::int_ % (qi::no_skip[qi::eol] | ';'); 
```

我正在使用`%`，以便最终整数不需要后跟分号或行尾。

# php - 是否可以检测到空请求？

> ID：10464526
> 
> 赞同：1
> 
> 时间：2012-05-05T18:01:19.420
> 
> 标签：php, python, google-app-engine, query-string

是否可以*查看*用户是否请求“example.com/mypage/”？或“example.com/mypage/”？

如果查询字符串是符号“？”，我想提供不同的内容。存在于请求中。请注意，没有名称或值（例如 ?name=value），只有请求符号“？”。python 中的解决方案会非常好，但 php 也是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:07:47.297

在 PHP 中，您可以检查是否`REQUEST_URI`以`?`. 以下三种不同的情况可能对您有用：

```
if('?' === substr($_SERVER['REQUEST_URI'], -1)){
    // Empty query string with '?'
}else if(false === strpos($_SERVER['REQUEST_URI'], '?')){
    // No ? at all
}else{
    // Some query string exists (check $_GET)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:07:47.547

检查最后一个字符

```
if ('?' === substr($_SERVER['REQUEST_URI'], -1)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T18:05:35.200

拿起`$_SERVER['REQUEST_URI']`并检查其中是否有任何问号。

```
if(strpos($_SERVER['REQUEST_URI'], "?") >= 0) {
    //Question mark found
} 
```

# sql - 如何结合修剪和替换函数来删除字符串中的任何空格？

> ID：10464528
> 
> 赞同：2
> 
> 时间：2012-05-05T18:01:46.033
> 
> 标签：sql, sql-server-2008, tsql

我有这个函数（TRIM_REPLACE），它从字符串的右侧和左侧获取空格。但是，我正在尝试对其进行修改，以便它也在中间修剪，但我宁愿组合该功能而不是单独进行。

*示例*：假设我有一个名字

```
Input
--------------------------
Peter<space><space>Griffin 
```

`<space>`在上述输入中注明一个空格。

我想修剪额外的空间，使其看起来像这样：

```
Output
--------------------------
Peter<space>Griffin 
```

如您所见，多个空格被替换为单个空格。

```
CREATE FUNCTION dbo.TRIM_REPLACE
(
    @STRING     VARCHAR(MAX)
)
RETURNS VARCHAR(MAX)
    BEGIN
        RETURN LTRIM(RTRIM(@STRING))  + REPLACE(@STRING, '  ',' ')  
    END
GO 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T18:05:34.190

如果您只关心成对的空格，您可以使用 . . .

```
ltrim(rtrim(replace(@String, '  ', ' '))) 
```

如果您可能有多个空格，则需要将其放入循环中：

```
while charindex('  ', @string) > 0
begin
    set @string = replace(@string, '  ', ' ');
end;
return ltrim(rtrim(@string)); 
```

# css - IE 文本对齐属性错误

> ID：10464535
> 
> 赞同：0
> 
> 时间：2012-05-05T18:02:44.333
> 
> 标签：css, html, internet-explorer

我正在尝试使标题图像左对齐。图像在 FF 和 chrome 中左对齐，但在 IE 中保持居中。我搜索了互联网，看来这是一个 IE 错误。我想知道这里是否有人可以帮助我。非常感谢。

HTML

```
<header>
<div id='title'>
<img src='images/title.png'>  //I want this image align to left in IE
</div>
</header> 
```

CSS

```
header #title{

    text-align:left;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:09:29.237

我认为`<header>`IE 不支持它的 HTML5 标签，所以在你的 css 中这样做：

```
#title{
    text-align:left;
    } 
```

无需添加`header` **id**是唯一的

# php - MySQL查询内容UP TO某个字符串和AFTER相同字符串

> ID：10464539
> 
> 赞同：1
> 
> 时间：2012-05-05T18:03:13.117
> 
> 标签：php

在查询结果中，我想存储导致某个字符串的所有内容`</a>`，`<a href="imgpath" imgsrc="imgpath"></a>`然后存储`</a>`到第二个变量的所有内容。

[编辑] 问题的改写：

$row[post_content] 中的值类似于`"<ahref=''><image></a><p>copy</p>" ...`

我需要把它分成`$val1 = "<ahref=''><image></a>"; and $val2 = "<p>copy</p>";`

这可能是用`substr()`? 但我不知道怎么做，而且我已经搜索过了，除了在 mysql 中对坏字符集的引用之外什么也没找到，因为我在搜索中使用了“字符”一词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:29:41.880

这将做到这一点，假设`val`是您的列名：

```
select
    substr(val, 1, instr(val, '</a>') + length('</a>') - 1) as part1,
    substr(val, instr(val, '</a>') + length('</a>')) as part2; 
```

这是一个测试：

```
set @val := 'one<a href="imgpath">two</a>three';

select
    substr(@val, 1, instr(@val, '</a>') + length('</a>') - 1) as part1,
    substr(@val, instr(@val, '</a>') + length('</a>')) as part2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:35:41.650

```
$tmp = explode('</a>', $yourStr);
print_r($tmp); 
```

你用 mysql 标记了你的问题，所以 Bohemian 用 mysql 给你答案。请使用正确的标签和描述以获得正确的答案。

# cocos2d-iphone - CCRepeatForever 错误

> ID：10464542
> 
> 赞同：0
> 
> 时间：2012-05-05T18:03:41.147
> 
> 标签：cocos2d-iphone, sprite

我目前的游戏有问题。我正在尝试根据其他身体的运动来移动精灵，以获得地图。这是我的代码：

```
 ...
    NSMutableArray *mapObjetcs = [[[NSMutableArray alloc]init]autorelease];
    [mapObjetcs addObject:swordman];
    [mapObjetcs addObject:icon];

    CCCallFuncND* iconMap = [CCCallFuncND actionWithTarget:self selector:@selector(mapLoc:mapObj:) data:mapObjetcs];
    CCSequence* iconMapSequence = [CCSequence actions:[CCDelayTime actionWithDuration:1.0f/60.0f], iconMap, nil];;
    CCRepeatForever* iconRef = [CCRepeatForever actionWithAction:iconMapSequence];

    [self runAction:iconRef];
    }

    -(void) mapLoc:(ccTime)delta mapObj:(NSMutableArray*)mapObj
    {
    GB2Sprite *swordmanTemp = (GB2Sprite*)[mapObj objectAtIndex:0];
    CCSprite *iconTemp = (CCSprite*)[mapObj objectAtIndex:1];

    CGPoint swordmanPos = [swordmanTemp ccPosition];
    float pos = (swordmanPos.x/convFactor)+65;
    iconTemp.position = ccp(pos, 290);
} 
```

每次我使用 CCRepeatForever 运行代码时，游戏都会冻结，如果我在没有 CCRepeatForever 的情况下运行代码，游戏会运行但不刷新地图中的图标。有谁能够帮我？？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:47:54.653

要避免此类操作，您可以简单地安排一些具有所需间隔的方法。喜欢

```
[self schedule: @selector(methodToBeCalled) interval: intervalInSeconds]; 
```

只是不要忘记稍后取消计划

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:08:43.727

这是在图层本身上运行的问题`CCRepeatForever`..当然它会冻结游戏..我猜你可以尝试替代解决方案..不要使用单独的`CCRepeatForever`循环，而是使用`update`图层的方法..因为它已经在做同样的事情你想用你自己的行动做..

另一种解决方案是`CCRepeatForever`为您的图标精灵制作相同的..并在其 CCCallFuncND 中占据其他对象的位置....

希望这会有所帮助.. 自己尝试.. 如果它不起作用.. 我会尝试 2 给你代码... 不要在您的图层本身上运行 CCRepeatForever Loop.. :)

# spring - Spring 和 Hibernate SessionFactory 的问题：域对象范围仅限于会话

> ID：10464546
> 
> 赞同：1
> 
> 时间：2012-05-05T18:04:09.747
> 
> 标签：spring, hibernate, session, concurrency, sessionfactory

我一直在我的 Spring/Hibernate 应用程序中使用会话工厂（注入 DAO 对象的单例 Bean），我正在使用服务层架构，并且遇到以下问题：

每当我从数据库中获取域对象时，它都会使用休眠会话工厂提供的新会话。在多次请求同一行的情况下，这会导致具有同一域对象的多个实例。（如果使用单个会话，它将返回指向同一引用的多个对象）因此，对这些域对象之一所做的任何更改都不会被表示同一行的其他域对象考虑在内。

我正在开发一个具有多个视图的 SWING 应用程序，并且我从不同的位置（和查询）获得相同的数据库行，因此我需要获取指向同一实例的域对象。

那么我的问题是，这是使用 SessionFactory 实现这一点的一种方法吗？如果没有，对我的整个应用程序使用单个会话是否是一种好习惯？在这种情况下，我应该如何以及在哪里声明这个会话？（应该是像 sessionFactory 一样注入到 DAO 对象中的 bean 吗？）

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:11:44.397

[您正在View Pattern 中](https://community.jboss.org/wiki/OpenSessionInView)寻找Open Session 。本质上，您希望在应用程序启动时将 Session 绑定到您的线程，并在应用程序的整个生命周期中使用相同的 Session。您可以通过创建一个像这样保持会话的单例 util 类来做到这一点（请注意，我使用的示例使用 an`EntityManager`而不是 a `Session`，但您的代码将基本相同）：

```
 private static EntityManager        entityManager;

  public static synchronized void setupEntityManager() {
    if (entityManager == null) { 
      entityManager = entityManagerFactory.createEntityManager();
    } 

    if (!TransactionSynchronizationManager.hasResource(entityManagerFactory)) {
      TransactionSynchronizationManager.bindResource(entityManagerFactory, new EntityManagerHolder(entityManager));
    }
  }

  public static synchronized void tearDownEntityManager() {
    if (entityManager != null) { 
      if (entityManager.isOpen()) { 
        entityManager.close();
      } 

      if (TransactionSynchronizationManager.hasResource(entityManagerFactory)) { 
        TransactionSynchronizationManager.unbindResource(entityManagerFactory);
      } 

      if (entityManagerFactory.isOpen()) { 
        entityManagerFactory.close();
      } 
    } 
  } 
```

请注意，与 Open Session in View 模式相关的固有风险。例如，我在评论中注意到您打算在应用程序中使用线程。会话*不是*线程安全的。因此，您必须确保您没有尝试以线程方式访问数据库。*

您还必须更加了解您的集合获取策略。通过打开会话和延迟加载，您总是有可能在数据库上施加过多的负载。

*我以前在 NetBeans 应用程序中使用过这种方法，我知道它使用线程处理某些任务。我们从来没有遇到过任何问题，但是您需要注意风险，其中有很多。

***编辑***

根据您的情况，也可以从 Session 中驱逐您的域对象并缓存分离的对象以供以后使用。这种策略要求您的域对象不要经常更新，否则您的应用程序将变得不必要地复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:14:07.187

Spring 中的 Hibernate 会话（我将其称为 h-session）通常绑定到线程（请参阅 JavaDoc for HibernateTransactionManager），因此每个线程获取一次 h-session。

如果您在一个 h-session 上多次调用“get”或“load”，则第一级缓存（h-session 缓存 - 始终打开）用于检索相同的对象。但是这个缓存不适用于查询。

此外，您不应该忘记与事务隔离相关的问题。在大多数应用程序中，使用“已提交读”隔离级别。而这种隔离级别受称为“不可重复读取”的现象影响。基本上，如果您多次查询该行，您可以在一个事务中收到同一行的多个版本（因为可以在另一个事务中的查询之间更新行）。

因此，您不应该在一个 h-session/transaction 中多次查询相同的数据。

# java - 如何解决 java.lang.NullPointerException 错误？

> ID：10464547
> 
> 赞同：48
> 
> 时间：2012-05-05T18:04:28.990
> 
> 标签：java, nullpointerexception

当我运行我的 Java 程序时，它在这一行给我一个错误

`compiler.getTask(null, null, new DiagnosticCollector<JavaFileObject>(), null, null, compilationUnits);`

我得到的错误是：

```
Exception in thread "main" java.lang.NullPointerException
    at AnotherClassLoader.loadClass(test.java:58)
    at test.main(test.java:30)
    at Main.main(Main.java:68) 
```

你能告诉我如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-05T18:09:24.473

NullPointerException 表示您传递的变量之一为空，但代码尝试使用它，但实际上并非如此。

例如，如果我这样做：

```
Integer myInteger = null;
int n = myInteger.intValue(); 
```

代码尝试获取 myInteger 的 intValue，但由于它为 null，因此它没有：发生空指针异常。

这意味着您的 getTask 方法期望的不是空值，但您传递的是空值。弄清楚 getTask 需要什么并传递它想要什么！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T18:08:52.270

当您尝试引用空对象实例时会发生此错误。我无法通过您给定的信息告诉您导致此错误的原因，但您可以在 IDE 中轻松调试它。我强烈建议您使用异常处理来避免意外的程序行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T18:13:58.177

只是在黑暗中拍摄（因为您没有`compiler`与我们分享初始化代码）：您检索`compiler`导致问题的方式。将您的 JRE 指向 JDK 内部，因为与 jdk 不同，jre 不提供任何工具，因此导致`NPE`.

# ruby-on-rails - rails_admin、mongoid 和自定义 ActiveModel 验证器的问题

> ID：10464549
> 
> 赞同：0
> 
> 时间：2012-05-05T18:04:39.573
> 
> 标签：ruby-on-rails, mongoid, rails-admin

我有一个使用许多自定义 ActiveModel 验证器的模型。安装 rails_admin 时出现以下错误

```
.rvm/gems/ruby-1.9.2-head/bundler/gems/rails_admin-0d80b74a60e7/lib/rails_admin/adapters/mongoid.rb:340:in `block in length_validation_lookup': undefined method `attributes' for #<MyCustomValidator:0x00000105c5aca0 @options={}> (NoMethodError)
    from .rvm/gems/ruby-1.9.2-head/bundler/gems/rails_admin-0d80b74a60e7/lib/rails_admin/adapters/mongoid.rb:339:in `select'
    from .rvm/gems/ruby-1.9.2-head/bundler/gems/rails_admin-0d80b74a60e7/lib/rails_admin/adapters/mongoid.rb:339:in `length_validation_lookup'
    from .rvm/gems/ruby-1.9.2-head/bundler/gems/rails_admin-0d80b74a60e7/lib/rails_admin/adapters/mongoid.rb:98:in `block in properties' 
```

如果我注释掉模型中的验证器调用，错误就会消失。想知道是否有解决问题的方法（除了破解 rails_admin 代码库）。

以下是骨架代码（仅相关部分）

```
class MyModel
   include Mongoid::Document
   ....
   validates_with MyValidator
end

class MyValidator <  ActiveModel::Validator
  def validate(record)
  end
end 
```

正如我在评论中提到的，添加一个返回空数组的“属性”方法可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:44:34.597

那是我的错。现在它通过以下方式在最新的 master 中修复：

[https://github.com/sferik/rails_admin/commit/1bc66862d41e048f5ae9​​b8ae0b639f2f58015a2a](https://github.com/sferik/rails_admin/commit/1bc66862d41e048f5ae9b8ae0b639f2f58015a2a)

感谢您使用 RailsAdmin！

# php - jquery setinterval time with ajax

> ID：10464551
> 
> 赞同：0
> 
> 时间：2012-05-05T18:04:48.727
> 
> 标签：php, jquery, ajax

我想用 ajax 和 setInterval 函数自动刷新“结果”div。

但是有一个问题。我想在 500 毫秒内自动刷新，但有时 ajax 加载超过 500 毫秒。在这种情况下包含问题。我想如果 ajax 加载时间为 750 毫秒，则间隔时间为 750（或任何时间更长的 500 毫秒），否则为 500。我该怎么做？

```
 var refreshId = setInterval(function()
{
    var number=$("#number").html();

    $.ajax({
    type: 'GET',
    url: 'ajax.php',
    data: 'num='+number,
    success: function(ajaxResult) {
      $('#result').html(ajaxResult);

    }
        });

    if(number<100){
        number++;
        $("#number").html(number);
        }

}, 500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:06:37.463

尝试成功函数中的条件。

```
 success: function(ajaxResult) {
      $('#result').html(ajaxResult);
      if(number<100){
        number++;
        $("#number").html(number);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:26:14.263

使用`setTimeout`而不是`setInterval`. 在ajax响应函数中设置超时函数，同步服务器调用不会有问题。

```
 (function pollStep(){
        var number=$("#number").html();   
        $.ajax({
           type: 'GET',
           url: 'ajax.php',
           data: 'num='+number,
           success: function(ajaxResult) {
               $('#result').html(ajaxResult);
               setTimeout(pollStep, 500);   
           }
        });
        if(number<100){
            number++;
            $("#number").html(number);
        }
     })(); 
```

# python - 在 SQLAlchemy 中，.first() 和 [0] 之间有什么性能差异？

> ID：10464557
> 
> 赞同：0
> 
> 时间：2012-05-05T18:05:25.370
> 
> 标签：python, python-3.x, sqlalchemy, slice

之间的任何区别

```
a = session.query(Accounts).filter(Accounts.key = 4).first() 
```

和

```
a = session.query(Accounts).filter(Accounts.key = 4)[0] 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:32:40.017

[`__gettitem__`](http://hg.sqlalchemy.org/sqlalchemy/file/c9d2c02b964d/lib/sqlalchemy/orm/query.py#l2023)显然，使用或之间没有太大区别[`first`](http://hg.sqlalchemy.org/sqlalchemy/file/c9d2c02b964d/lib/sqlalchemy/orm/query.py#l2140)

提示：上述两个调用基本上返回相同：

```
query = session.query(Accounts).filter(Accounts.key = 4)
a = list(query[0:1])[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:13:23.533

正如@mata 指出并指向源代码的那样，两者的执行路径没有区别。其实你也可以`echo=True`在创建引擎的时候通过设置开启SQL日志，你会看到两条SQL语句是完全一样的（某种`SELECT ... FROM ... WHERE ....id = ? LIMIT ? OFFSET ?`）

但是，如果`Accounts.key`实际上是主键，那么通过主键获取持久实例的最佳方法是使用该[`Query.get`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.get)方法，该方法将生成`SELECT ... FROM ... WHERE ....id = ?`并且应该足够好。我认为它不会更快，但更清洁。

# objective-c - 包标识符应该是小写还是驼峰式？

> ID：10464561
> 
> 赞同：5
> 
> 时间：2012-05-05T18:05:38.153
> 
> 标签：objective-c, ios, macos, identifier

假设我有一个名为“Foo Bar”的应用程序，捆绑标识符应该是`com.tyilo.foobar`还是`com.tyilo.FooBar`？

什么是最正常的，苹果是做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:52:25.550

你可以做任何事情，除了让生活更简单并防止常见错误，保持小写更容易。

但这完全取决于您使用什么情况？使用小写字母的唯一好处是我上面提到的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-06T02:12:10.553

我将其设为小写不仅是为了让您的生活更简单，而且因为捆绑包是反向域名，并且 URL 不区分大小写，包括 TLD (com/org/net)，并且大多数浏览器将 URL 显示为全部小写。

此外，如果您查看 Apple 的示例代码，它们都使用小写字母。

`com.example.apple-samplecode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T02:17:05.183

您可以同时使用两者。优选总是小写。

# php - 在 yii 中创建时在其他表中插入行

> ID：10464564
> 
> 赞同：0
> 
> 时间：2012-05-05T18:05:53.287
> 
> 标签：php, yii

对于以下数据库：

```
TABLES:
user: [id,username]
project: [id,name]
project_user_assignment: [user_id,project_id,role] 
```

创建新项目时，我想显示一个下拉列表，其中包含可用用户来管理项目，并在保存时将其插入 project_user_assignment 行

[user_id,project_id, **'经理'** ]

我是 yii 的初学者，不知道在哪里（类、方法）我必须进行插入以及如果在插入时查询失败如何返回错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:38:01.567

要在中显示下拉列表，您可以使用以下代码：

```
<?php echo CHtml::dropDownList(null, 
     'type',
     CHtml::listData(
        User::model()->findAll(),
        'id',
        'username',
     ),
     array('empty' => 'Select a manager from the list ... ', 'id'=>'manager_list')
  );?> 
```

要更新 project_user_assignment 模型的相应字段，请使用以下内容：

```
 <?php
      <div class="row">
              <?php echo $form->labelEx($model,'user_id'); ?> // Here I assume you have the $model variable set to Project_user_assignemenet ... if not (which probably is the case since you are creating a new project, set a new $model2 variable in the controller and use $model2 instead of $model)
              <?php echo $form->textArea($model,'user_id'); ?>
              <?php echo $form->error($model,'user_id'); ?>
      </div>
 ?>
 <script>
     $('#manager_list').on('change', function(e) {
             $('#Project_user_assignemenet_user_id').val($(this).val());  // Here id maybe wrong! Check them.
             return true;
     });
</script> 
```

最后在控制器中，您只需保存模型。

# tomcat - Axis2 端点覆盖到本地主机

> ID：10464566
> 
> 赞同：1
> 
> 时间：2012-05-05T18:06:02.003
> 
> 标签：tomcat, soap, localhost, axis2, endpoint

我有一个困扰我好几个星期的问题。我有一个在 Tomcat 服务器上运行的 Java Web 应用程序。我使用 Apache 作为 http 前端，请求通过 ajp 路由到 tomcat。Windows Server 2008 是操作系统。

我的应用程序与 Sharepoint 安装紧密相连，并且通信是通过 SOAP 完成的。我使用 AXIS2 库生成了正确的存根。

在任何其他安装上，这种通信都可以完美运行。但是，在我们的新服务器上，我通过 web 服务进行的任何调用都会导致错误：

**无法将ViaPost 发送到 url [http://sharepoint.example.com/_layouts/services.asmx] org.apache.axis2.AxisFault：传输错误：404 错误：未找到**

我确信端点（http://sharepoint.example.com/_layouts/services.asmx）是正确的，因为我可以通过机器上的远程桌面获取 WSDL 定义日​​志并连接到[http://sharepoint.example .com/_layouts/services.asmx?WSDL](http://sharepoint.example.com/_layouts/services.asmx?WSDL)与 Internet Explorer。我也确信我可以正确调用服务，因为我尝试使用 SOAPUI。

经过长时间的分析，我发现我所有使用正确端点的 AXIS 请求实际上都路由到了环回 127.0.0.1 地址。我做了一些数据包嗅探，我发现了这一点。我还得到了检查 Apache 日志的确认信息，我可以在其中发现 /_layouts/services.asmx 生成了一个未找到的错误。

我不知道怎么做，但是当我调用soap调用时，尽管端点设置正确，但连接没有打开正确的服务器（sharepoint.example.com），而是打开了127.0.0.1。

如果您知道如何解决此问题，请告诉我！

# javascript - 没有得到正确的日期

> ID：10464567
> 
> 赞同：3
> 
> 时间：2012-05-05T18:06:08.273
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我正在尝试获取日期并对其进行修改这是代码

```
 <script type="text/javascript">
           $(function() { 
            $("#terms_of_payment").change(function(){ 
                 var element = $(this).find('option:selected'); 
                 var days = element.attr("value"); 
                 var start = $('input[name="date"]').val();
                 var date = new Date(start);
                      var day = date.getDate() + days;
                      var month = date.getMonth();
                      var year = date.getFullYear();
                var edate = day + "-" + month +  "-" + year;
               alert(start);
               alert(edate);
               $('#due_date').val(edate); 
              }); 
              });
              </script> 
```

它给出了正确的开始日期，但是当尝试添加它时，它只是给了我错误的月份和日期，，，，，请帮助

这是html

```
 <div class="form-item">
            <label>
                <span class="required">*</span>
               date
            </label>

              <input type="text" readonly="readonly" value="" id="date" name="date" class="hasDatepicker">            
          </div>
           <div class="form-item">
            <label>
              due date
            </label>  
                 <input type="text" disabled="disabled" value="" id="due_date" name="due_date">               </div>
               <div class="form-item">
              <label>
                <span class="required">*</span>
                terms-of-oayment
                </label>

                <select class="" id="terms_of_payment" name="terms_of_payment">
                <option selected="selected" label="---------" value="">---------     
                </option>
                <option label="مستحقة الدفع لدى تسلمها" value="1">مستحقة الدفع لدى تسلمها</option>
                 <option label="مستحقة الدفع في غضون 15 يوما" value="15">مستحقة الدفع في غضون 15 يوما</option>
                 <option label="مستحقة الدفع في غضون 30 يوما" value="30">مستحقة الدفع في غضون 30 يوما</option>
                  <option label="مستحقة الدفع في غضون 45 يوما" value="45">مستحقة الدفع في غضون 45 يوما</option>
                   <option label="مستحقة الدفع في غضون 60 يوما" value="60">مستحقة الدفع في غضون 60 يوما</option>
                   <option label="مستحقة الدفع في غضون 90 يوما" value="90">مستحقة الدفع في غضون 90 يوما</option>
              </select>
                   </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:13:48.227

尝试像这样生成新日期：

```
var edate = new Date(date.getTime() + days *24*60*60*1000); 
```

另请参阅[向 JavaScript Date 添加天数](https://stackoverflow.com/questions/563406/add-days-to-datetime-using-java-script)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T18:14:34.343

这里有两个问题：

1.  `.getMonth()`返回 0 到 11，而不是 1 到 12。请参阅[http://www.w3schools.com/jsref/jsref_getmonth.asp](http://www.w3schools.com/jsref/jsref_getmonth.asp)

2.  例如，假设日期是 2012 年 1 月 31 日，而您要添加一天。你会得到 2012 年 1 月 32 日。

从理论上讲，你会更成功地选择像 Julian date 这样的东西，然后添加天数。或者将[http://www.datejs.com/](http://www.datejs.com/)视为一个很棒的库，用于在 JavaScript 中进行日期数学、格式化和解析。

# android - onBind 方法：如何使其具有选择性？

> ID：10464581
> 
> 赞同：1
> 
> 时间：2012-05-05T18:07:13.250
> 
> 标签：android, android-service, android-2.3-gingerbread

我希望只有某些应用程序可以执行绑定到服务。我可以通过服务中的合适代码阻止某些应用程序绑定到服务吗？例如，如果服务有一个允许的应用程序列表（即一个简单的字符串数组及其包名），是否可以只绑定到列出的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:33:38.630

您可以在元素下的 androidmanifest.xml 中`<service>`使用`android:permission`. 看看[http://developer.android.com/guide/topics/manifest/service-element.html](http://developer.android.com/guide/topics/manifest/service-element.html)。

# tfs - Srctool.exe 在 TFS 中返回 -1 错误代码

> ID：10464583
> 
> 赞同：4
> 
> 时间：2012-05-05T18:07:29.527
> 
> 标签：tfs, tfsbuild

我们只是第一次设置了 TFS 11。运行门控签入，它成功但返回此消息：

> “srctool.exe”返回了意外的退出代码：“-1”。打开文件“CustomDllName.dll”时出错：程序集“CustomDllName.dll”不是有效的 .NET 程序集，将被跳过以进行分析。

嗯，它是正确的：该文件是一个遗留的 Visual Basic 6 DLL，我们没有太多控制权。它包含在项目中，用于对一些方法进行 COM 访问。

有没有办法指示 srctool.exe/TFS 在进行检查时跳过该文件？还是另一种攻击方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:59:29.360

## 这是最终对我有用的解决方案

微软 TFS 11 团队的一位成员向我提到，问题是由于 Windows 8 团队对该`srctool.exe`工具的行为发生了变化。

通过从[Windows 7 SDK](http://www.microsoft.com/en-us/download/confirmation.aspx?id=8279) (WinDBG) 工具包中复制此文件并覆盖 TFS 11 Beta 中包含的文件，我能够成功运行构建而没有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:21:12.050

这是随附的 IndexSources 活动中的 srctool.exe 错误吗？本次活动中的srctool.exe 做了一件事，就是列出pdb 中的源文件信息。我不是 srctool 专家，所以我不知道为什么在这种情况下它会失败。我确实知道 srctool.exe 在版本 11 中有一些行为变化，其中大部分是以前版本的修复。

有一种解决方法需要更新构建模板。这不是很好，但它有效。Srctool.exe 为 SymbolFiles 集合中的每个 pdb 文件运行（在 IndexSources 活动中）。现在您知道哪个 pdb 失败了，您可以更新构建模板以在 IndexSources 活动之前添加一个 R [emoveFromCollection](http://msdn.microsoft.com/en-us/library/dd647801.aspx)活动，以便从 SymbolFiles 集合中删除有问题的 pdb。这是迄今为止我能想到的最直接的解决方法。

或者，您可以编辑 FindMatchingFiles 活动的搜索模式以排除您不希望源索引的 pdb 文件。

根据您收到的错误消息，它似乎与 Ed 提到的已知问题无关。我们为下一个版本修复了这个问题，所以如果它是相关的，它应该被修复:-)

如果您对构建模板的 VS11 Beta 有任何问题，请告诉我。

谢谢。

# uml - 避免表用户、帖子和评论之间的封闭关系

> ID：10464593
> 
> 赞同：0
> 
> 时间：2012-05-05T18:08:33.467
> 
> 标签：uml, modeling

我有一个表用户，表帖子和评论

> 一个用户可以有很多帖子，一个帖子只能由一个用户写。
> 
> 1 用户可以有多条评论，一条评论只能由一个用户写。
> 
> 1个帖子可以有很多评论。

如何在 UML 中对这种情况进行建模，避免三个表之间的封闭关系，还可以让我知道谁是写评论的用户。

这是使用封闭关系时的解决方案：

> 用户 1 ---- n 发布（使用外键 id_user 发布）
> 
> Post 1 -----n 评论（使用外键 id_post 评论）
> 
> 用户 1 -----n 评论（带有外键 id_user 的评论）

谢谢

# macos - 向主机文件添加条目

> ID：10464605
> 
> 赞同：1
> 
> 时间：2012-05-05T18:10:15.937
> 
> 标签：macos, bash, sudo, hosts

我想创建一个我将在管理员帐户中运行的 bash 脚本。我希望脚本将现有的主机文件备份到文件扩展名为 .original 的同一目录中，然后我希望脚本将 3 个预定义条目（在脚本正文中指定）添加到主机文件中并保持现有格式主机文件。如何在无需用户进行身份验证的情况下完成此操作 - 我希望将管理员密码存储在脚本中，并在每次请求升级时传递给 sudo。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:16:27.300

您不应该将密码存储在脚本中。那是一个安全漏洞。您可以通过使用 setuid 位来实现您想要的行为，而无需将密码存储在任何地方。

首先运行`chmod u+s myscript`以使其以所有者身份运行（当您将所有者设为 root 时，这将使您的脚本以 root 身份运行，因此您根本不需要在脚本中使用 sudo）。

然后确保您想要的任何人都可以执行该脚本。如果您希望所有用户都能够运行`chmod +x myscript`. 如果您只希望自己能够确保您是该组中的唯一用户并`chmod g+x myscript`改为使用。

然后运行`sudo chown root myscript`使其归root所有。

现在，只要有权执行该脚本的任何人运行它，它将以 root 身份执行，无论该用户是否是管理员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:09:08.860

您必须编写一个程序（编译代码）和 suid root 来执行该操作，然后您不必向用户透露 root 密码。我还没有遇到允许您使用脚本的系统。或者你必须 suid bash 本身这是实际的程序，然后每个人都可以是 root。

示例：（以 root 身份运行）

```
ex qq.c << EOF
1,\$d
i
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <assert.h>
int main() {
    assert(0 == setreuid(geteuid(),-1));
    return system(
    "/bin/bash << DONE\n"
    "if [ \"\$UID\" != '0' ];then echo \"need to be root to do this\";exit 16;fi;\n"
    "cp /etc/hosts /etc/hosts.org\n"
    "echo 127.0.0.1 banned1.domain >> /etc/hosts\n"
    "echo 127.0.0.1 banned2.domain >> /etc/hosts\n"
    "echo 127.0.0.1 banned3.domain >> /etc/hosts\n"
    "DONE\n");
}
.
x
EOF
gcc -o qq qq.c && chmod u+s qq 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T05:00:05.677

您可以通过`sudo`命令执行此操作。该`sudo`命令允许您指定哪些用户可以运行哪些命令以及哪些用户。通常，您授予用户访问特定命令的权限，这些命令需要以 root 身份执行。例如，特定的人需要能够启动和停止 Apache httpd。通常，只允许 root 执行此操作，但您可以将此权限授予您的 Web 管理员，而无需授予该人以 root 身份执行任何其他操作的权限。

该`sudo`命令由[/private/etc/sudoers](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/sudoers.5.html)文件控制。（您应该使用`visudo`命令进行编辑）。

假设您创建了一个 shell 脚本来编辑您的`/etc/hosts`文件。你首先想把它放在一个特定的位置，比如说`/usr/local/edit_hosts_file`。这是一个很好的位置，因为该目录归根用户所有。

现在，您要确保只有 root 可以执行此文件，甚至可能只有 root 可以读取此文件，并且您特别要确保只有 root 可以编辑此文件。否则，人们可以使用此文件为自己授予对系统其他部分的 root 访问权限：

```
 $ sudo chown root:root /usr/share/edit_hosts_file
 $ sudo chmod 700 /usr/share/edit_hosts_file 
```

现在，您的命令是安全的，您可以编辑该`/private/etc/sudoers`文件以仅允许特定用户以 root 身份运行此 shell 脚本：

```
User_Alias ALLOWED_USERS = bob, carol, ted, alice
Cmnd_Alias ETC_HOSTS_EDIT = /usr/share/bin/edit_hosts_file
Host_Alias MACHINE_LIST = localhost
ALLOWED_USERS    MACHINE_LIST=(ALL) NOPASSWD: ETC_HOSTS_EDIT 
```

这将允许已定义`ALLOWED`用户列表中的任何用户运行您的`etc/hosts`编辑脚本，而无需密码。

现在，如果有人想运行您的脚本，他们可以在`root`不知道密码且无需提供密码的情况下执行此操作。这样，您的脚本可以由另一个脚本执行：

```
 $ sudo /usr/share/bin/edit_hosts_file
 Script completed: /etc/hosts edited 
```

# ruby-on-rails - 显示与艺术家关联的图像

> ID：10464607
> 
> 赞同：0
> 
> 时间：2012-05-05T18:10:56.560
> 
> 标签：ruby-on-rails

我正在尝试显示我的公共/图像文件夹中的图像，但我不知道如何。

我想要做的是能够将照片分配给艺术家，以便您可以浏览不同艺术家的照片。

这是我的图像模型

```
class Image < ActiveRecord::Base
  has_many :publishings
  has_many :artists, :through => :publishings
  has_many :comments,:through => :friends

  has_many :comments, :as => :resource, :class_name => "Commentable"
end 
```

这是我的图片 show.html

```
<p id="notice"><%= notice %></p>

<p>
  <b>Title:</b>
  <%= @image.title %>
</p>

<p>
  <b>Filename:</b>
  <%= @image.filename %>
</p>

<p>
  <b>Likes:</b>
  <%= @image.likes %>
</p>

<%= link_to 'Edit', edit_image_path(@image) %> |
<%= link_to 'Back', images_path %> 
```

这是图像的数据库

```
class CreateImages < ActiveRecord::Migration
  def self.up
    create_table :images do |t|
      t.string :title :null => false
      t.string :filename :null =>false
      t.integer :likes :default =>0

      t.timestamps
    end
  end

  def self.down
    drop_table :images
  end
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:15:27.013

```
<%= image_tag @image.filename %> 
```

# php - Mysql命令到PHP

> ID：10464609
> 
> 赞同：1
> 
> 时间：2012-05-05T18:11:14.783
> 
> 标签：php, mysql, database

所以基本上我正在尝试编写一个 php 脚本，该脚本可以上传到服务器并位于我网站上的某个位置以单击。然后当它被点击时，它会运行 mysql 查询并显示所需的信息......这就是我到目前为止所拥有的。

--Connect.php--

```
$dbhost = 'localhost';
$dbuser = '******';
$dbpass = '******';

$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die
        ('Error connecting to mysql');

$dbname = '*****';
mysql_select_db($dbname);

?> 
```

--我需要运行php文件的mysql命令是

```
SELECT jsfdName.baseData AS Name, 
jsfdAddr.baseData as Address, 
jsfdZip.baseData AS Zip,      
jsfdCity.baseData AS City, 
sfdCounty.baseData AS County, 
jsfdState.baseData AS State
FROM jos_sobipro_field_data AS jsfdName
JOIN jos_sobipro_field_data AS jsfdAddr USING( sid )
JOIN jos_sobipro_field_data AS jsfdZip USING(sid)
JOIN jos_sobipro_field_data AS jsfdCity USING(sid)
JOIN jos_sobipro_field_data AS jfsdCounty USING(sid)
JOIN jos_sobipro_field_data AS jfsdState USING(sid)
WHERE jsfdName.fid = 36 AND jsfdAddr.fid = 37 AND jsfdZip.fid=38 AND jsfdCity.fid = 39 
AND jsfdCounty.fid = 40 AND jsfdState.fid = 41 AND sid > 329 
```

那么如何编写 php 脚本来在我的网站中运行这个文件呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:14:32.633

将查询存储在 php 变量中`$query='That String'`

然后使用它来执行它：

```
$res=mysql_query($qry); 
```

然后查看每个结果：

```
while($row=mysql_fetch_assoc($res)) {
    print $row['Name']; } 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:22:10.733

我猜你正在寻找这样的东西..

```
$dbhost = 'localhost';
$dbuser = '******';
$dbpass = '******';

$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die
    ('Error connecting to mysql');

$dbname = '*****';
mysql_select_db($dbname);

$sql = "SELECT jsfdName.baseData AS Name, 
jsfdAddr.baseData as Address, 
jsfdZip.baseData AS Zip,      
jsfdCity.baseData AS City, 
sfdCounty.baseData AS County, 
jsfdState.baseData AS State
FROM jos_sobipro_field_data AS jsfdName
JOIN jos_sobipro_field_data AS jsfdAddr USING( sid )
JOIN jos_sobipro_field_data AS jsfdZip USING(sid)
JOIN jos_sobipro_field_data AS jsfdCity USING(sid)
JOIN jos_sobipro_field_data AS jfsdCounty USING(sid)
JOIN jos_sobipro_field_data AS jfsdState USING(sid)
WHERE jsfdName.fid = 36 AND jsfdAddr.fid = 37 AND jsfdZip.fid=38 AND jsfdCity.fid = 39 
AND jsfdCounty.fid = 40 AND jsfdState.fid = 41 AND sid > 329
";

$result = mysql_query($sql);

if (!$result) {

echo "An error occurred in processing your    submission."; 
}   
$row=mysql_fetch_array($result); 
```

# .net - 剃刀下拉列表

> ID：10464610
> 
> 赞同：2
> 
> 时间：2012-05-05T18:11:24.907
> 
> 标签：.net, asp.net-mvc-3, razor, cultureinfo, selectlist

我想添加几个月的 dropdoenlist。我想要选择像一月/二月这样的值。我创建了一个这样的动作：

```
 public DropDownList  GetMyMonthList()
     {
        DropDownList MyddlMonthList = new DropDownList();
        DateTime month = Convert.ToDateTime("1/1/2000");
        for (int i = 0; i < 12; i++)
        {

            DateTime NextMont = month.AddMonths(i);
            ListItem list = new ListItem();
            list.Text = NextMont.ToString("MMMM");
            list.Value = NextMont.Month.ToString();
            MyddlMonthList.Items.Add(list);
        }
        return MyddlMonthList;

    } 
```

我叫它

```
 ViewBag.months = pm.GetMyMonthList(); 
```

在我看来

```
 @Html.DropDownListFor(model => model.rent_month,new    SelectList(ViewBag.months          as        System.Collections.IEnumerable, "Text","value"),
        "Select Month") 
```

它给出错误**值不能为空。参数名称：items**

我可能犯了一个愚蠢的错误。我是asp.net mvc3 的新手。请指出我的错误....提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:24:26.020

从错误消息来看，发生的事情是从*DropDownList*到*IEnumerable*的转换通过返回 null 静默失败。我建议将*GetMyMonthList*更改为返回*IEnumerable<*，然后将其直接传递给*SelectList*的构造函数。

```
public IEnumerable<SelectListItem> GetMyMonthList()
{
    var MyddlMonthList = new List<SelectListItem>();
    DateTime month = Convert.ToDateTime("1/1/2000");
    for (int i = 0; i < 12; i++)
    {
        DateTime NextMont = month.AddMonths(i);
        var list = new SelectListItem();
        list.Text = NextMont.ToString("MMMM");
        list.Value = NextMont.ToString("MMMM");
        MyddlMonthList.Add(list);
    }
    return MyddlMonthList;
} 
```

**编辑**

您还可以从 CultureInfo 获取月份名称。

```
public IEnumerable<SelectListItem> GetMyMonthList()
{
    return CultureInfo.CurrentCulture.DateTimeFormat.MonthNames
        .Select(m => new SelectListItem() { Text = m, Value = m });
} 
```

# javascript - JavaScript - 拆分字符串

> ID：10464611
> 
> 赞同：13
> 
> 时间：2012-05-05T18:11:37.850
> 
> 标签：javascript, split, substring

我有一个包含值“website.html”的变量。

如何拆分该变量，使其仅给我“网站”？

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-05T18:12:17.127

```
var a = "website.html";
var name = a.split(".")[0]; 
```

如果文件名中有一个点，您可以尝试...

```
var a = "website.old.html";
var nameSplit = a.split(".");
nameSplit.pop();    
var name = nameSplit.join("."); 
```

但是如果文件名是类似的`my.old.file.tar.gz`，那么它会认为`my.old.file.tar`是文件名

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T18:13:23.057

```
String[] splitString = "website.html".split(".");
String prefix = splitString[0]; 
```

*编辑，我可以发誓你放的是 Java 而不是 javascript

```
var splitString = "website.html".split(".");
var prefix = splitString[0]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T18:17:33.890

另一种使用[字符串操作](http://www.javascriptkit.com/javatutors/string3.shtml)的方法。

```
var myString = "website.html";
var dotPosition = myString.indexOf(".");
var theBitBeforeTheDot = myString.substring(0, dotPosition); 
```

# asp.net - VB.NET - ASP.NET - 用户名/密码不正确（验证）

> ID：10464613
> 
> 赞同：0
> 
> 时间：2012-05-05T18:11:53.287
> 
> 标签：asp.net, vb.net, validation, error-handling, label

谁能从代码中告诉我代码有什么问题？

如果用户名和密码不匹配，lbl 文本应显示“用户名/密码不正确”。

代码：

```
Protected Sub btnLogin_Click(sender As Object, e As System.EventArgs) Handles btnLogin.Click

        Dim conn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Brian\Documents\Visual Studio 2010\WebSites\PetLandia\App_Data\db.mdb")
        Dim cmd As OleDbCommand = New OleDbCommand("SELECT * FROM [User] where Username=? and Password=?", conn)

        cmd.Parameters.AddWithValue("@Username", txtLogin.Text)
        cmd.Parameters.AddWithValue("@Password", txtPassword.Text)

        If (String.IsNullOrEmpty(txtLogin.Text)) Or (String.IsNullOrEmpty(txtPassword.Text)) Then

            lblLoginError.Text = "One or more fields are empty. Please fill in all the fields"
            lblLoginError.Visible = True

        Else

            conn.Open()
            Dim read As OleDbDataReader = cmd.ExecuteReader()

            Try

                If read.HasRows Then

                    While read.Read()

                        If txtLogin.Text = read.Item("username").ToString And txtPassword.Text = read.Item("password").ToString Then

                            Dim tUsername As String = read.Item("Username").ToString

                            Session("Username") = tUsername
                            Response.Redirect("Default.aspx")

                        End If
                    End While
                End If

                read.Close()
            Catch ex As Exception
                Response.Write(ex.Message())
                lblLoginError.Text = "Incorrect Username/Password."
                lblLoginError.Visible = True

            Finally
                conn.Close()
            End Try

        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:18:20.967

而不是`catch`写入`Else`if 语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:30:41.280

你可以试试这段代码。这段代码没有`Try` `Catch`块。

```
 Protected Sub btnLogin_Click(sender As Object, e As System.EventArgs) Handles btnLogin.Click

         If (String.IsNullOrEmpty(txtLogin.Text)) Or (String.IsNullOrEmpty(txtPassword.Text)) Then
            lblLoginError.Text = "One or more fields are empty. Please fill in all the fields"
            lblLoginError.Visible = True

         Else
            Dim conn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Brian\Documents\Visual Studio 2010\WebSites\PetLandia\App_Data\db.mdb")
            Dim cmd As OleDbCommand = New OleDbCommand("SELECT * FROM [User] where Username=? and Password=?", conn)
            cmd.Parameters.AddWithValue("@Username", txtLogin.Text)
            cmd.Parameters.AddWithValue("@Password", txtPassword.Text)
            conn.Open()
            Dim read As OleDbDataReader = cmd.ExecuteReader()     
                    If read.HasRows Then
                       read.Read()
                       Session("Username") = read.Item("Username").ToString
                       read.Close()
                       conn.Close() 'Close connection before Redirecting.
                       Response.Redirect("Default.aspx")    
                    Else
                      read.Close()
                      conn.Close()
                      lblLoginError.Text = "Incorrect Username/Password."
                      lblLoginError.Visible = True

                    End If
            End If
        End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T18:44:16.790

您不需要从数据库中返回用户名和密码，因为您已经拥有它们。您只需要计算匹配的条目。这大大简化了它。此外，正如 jams 所示，最好在对数据库进行任何操作之前对用户名和密码字段中的值进行测试：

```
If (String.IsNullOrEmpty(txtLogin.Text)) OrElse (String.IsNullOrEmpty(txtPassword.Text)) Then

    lblLoginError.Text = "One or more fields are empty. Please fill in all the fields"
    lblLoginError.Visible = True

Else

    Dim ok As Integer = 0

    Using conn = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Brian\Documents\Visual Studio 2010\WebSites\PetLandia\App_Data\db.mdb")
        Dim cmd As OleDbCommand = New OleDbCommand("SELECT COUNT(*) FROM [User] where Username=? and Password=?", conn)

        cmd.Parameters.AddWithValue("@Username", txtLogin.Text)
        cmd.Parameters.AddWithValue("@Password", txtPassword.Text)

        conn.Open()
        ok = CInt(cmd.ExecuteScalar())
        conn.Close()
    End Using

    If ok = 0 Then
        ' credentials incorrect
    Else
        ' credentials correct
    End If

End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T18:20:57.767

您编写它的方式，“不正确的用户名/密码”只会在抛出异常时显示。

如果你想使用你编写的代码，添加一个 ELSE：

```
If txtLogin.Text = read.Item("username").ToString And txtPassword.Text = read.Item("password").ToString Then

                        Dim tUsername As String = read.Item("Username").ToString

                        Session("Username") = tUsername
                        Response.Redirect("Default.aspx")
else
throw new exception("Incorrect Username/Password")
End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T18:51:02.363

1.  您决定推出自己的安全措施，导致...
2.  您似乎以纯文本形式存储密码，这是一个巨大的安全漏洞和潜在的责任来源。
3.  `If read.HasRows`如果传递的用户名和密码在数据库中不存在，则为 false。即，它不会抛出异常，它只会不返回任何行。
4.  你没有调用`Dispose`一次性物品。
5.  `ExecuteScalar`简单地调用with`Select Count(*)`来查看结果是否大于零会更快。

* * *

```
Dim authenticationFailed As Boolean = String.IsNullOrEmpty(txtLogin.Text) _ 
    OrElse String.IsNullOrEmpty(txtPassword.Text)

If Not authenticationFailed Then
    Dim connString = "Provider=Microsoft.Jet.OLEDB.4.0..."
    Using conn = New OleDbConnection(connString)
        Const sql As String = "Select Count(*) From [User] Where Username=? and Password=?"
        conn.Open()
        Using cmd = New OleDbCommand(sql, conn)
            cmd.Parameters.AddWithValue("@Username", txtLogin.Text)
            cmd.Parameters.AddWithValue("@Password", txtPassword.Text)

            Try
                Dim result = cmd.ExecuteScalar(CommandBehavior.CloseConnection)
            Catch generatedExceptionName As SqlException
                authenticationFailed = True
            End Try

            authenticationFailed = authenticationFailed _ 
                OrElse Convert.ToInt32(result) <> 1

            If Not authenticationFailed Then
                Session("Username") = txtLogin.Text
            End If
        End Using

        conn.Close()
    End Using
End If

If authenticationFailed Then
    lblLoginError.Text = "Incorrect username and password"
    lblLoginError.Visible = True
End If 
```

# c++ - 对话框背景和单选按钮透明度

> ID：10464616
> 
> 赞同：0
> 
> 时间：2012-05-05T18:12:13.737
> 
> 标签：c++, c, visual-studio-2008, winapi, visual-c++

大家好，我正在 Visual C++ 2008 Professional Edition 中制作一个应用程序，它使用背景图像作为对话框。问题是我不能让单选按钮透明，这样图像就在背景中，只有单选按钮的标题可见。![在此处输入图像描述](../Images/a4caf246648db00e18f1d65def03f505.png)

请检查图像。单选按钮应该是透明的，并且只有控件的文本应该是可见的。我已经检查了以下链接-： [对话框背景图像](https://stackoverflow.com/questions/4395515/windows-programming-dialogbox-background-image)

我正在使用以下代码 -

```
 #include <Windows.h>
#include <CommCtrl.h>
#include "resource.h"

#pragma comment(linker,"\"/manifestdependency:type='win32' \
name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \
processorArchitecture='x86' publicKeyToken='6595b64144ccf1df' language='*'\"")

LRESULT CALLBACK WindowFunc(HWND, UINT, WPARAM, LPARAM);
BOOL CALLBACK DialogFunc(HWND, UINT, WPARAM, LPARAM);

int controlsLoaded=0;
char szWinName[]="Test";
HWND hDlg=NULL;
HINSTANCE hInst;

int WINAPI WinMain(HINSTANCE hThisInst, HINSTANCE hPrevInst,
                   LPSTR lpszArgs, int nWinMode)
{
    HWND hwnd;
    MSG msg;
    WNDCLASSEX wndclass;

    wndclass.cbSize=sizeof(WNDCLASSEX);

    wndclass.hInstance=hThisInst;
    wndclass.lpszClassName=szWinName;
    wndclass.lpfnWndProc=WindowFunc;
    wndclass.style=0;

    wndclass.hIcon=LoadIcon(NULL,IDI_APPLICATION);
    wndclass.hIconSm=NULL;
    wndclass.hCursor=LoadCursor(NULL,IDC_ARROW);

    wndclass.lpszMenuName=NULL;
    wndclass.cbClsExtra=0;
    wndclass.cbWndExtra=0;

    wndclass.hbrBackground=(HBRUSH) GetStockObject(LTGRAY_BRUSH);

    if(!RegisterClassEx(&wndclass)) return 0;

    /*Initialize the common controls for WinXP look and feel*/
    InitCommonControls();

    hInst=hThisInst;

    hwnd=CreateWindow(
        szWinName,
        "Auto Timer (Work in progress)",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        NULL,
        NULL,
        hThisInst,
        NULL
        );

    while(GetMessage(&msg, NULL, 0, 0)>0)
    { if (!hDlg||!IsDialogMessage(hDlg,&msg))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    }
    return msg.wParam;

}

LRESULT CALLBACK WindowFunc(HWND hwnd, UINT message, WPARAM wparam, 
                            LPARAM lparam)
{ 
    switch(message){
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        case WM_CREATE:
            hDlg=CreateDialog(hInst,MAKEINTRESOURCE(IDD_FORMVIEW),
                hwnd,(DLGPROC)DialogFunc);
            break;
        default:
            return DefWindowProc(hwnd,message,wparam,lparam);
    }
    return 0;
}
BOOL CALLBACK DialogFunc(HWND hwnd, UINT message, 
                         WPARAM wparam, LPARAM lparam)
{ 
  switch(message)
    { 
    case WM_CLOSE:
        DestroyWindow(hwnd);
        hDlg=NULL;
        PostQuitMessage(0);
        return TRUE;
    }
    return FALSE;
} 
```

以下是我的资源文件-：

```
 // Microsoft Visual C++ generated resource script.
//
#include "resource.h"

#define APSTUDIO_READONLY_SYMBOLS
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 2 resource.
//
#include "afxres.h"

/////////////////////////////////////////////////////////////////////////////
#undef APSTUDIO_READONLY_SYMBOLS

/////////////////////////////////////////////////////////////////////////////
// English (U.S.) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
#ifdef _WIN32
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US
#pragma code_page(1252)
#endif //_WIN32

#ifdef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// TEXTINCLUDE
//

1 TEXTINCLUDE 
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE 
BEGIN
    "#include ""afxres.h""\r\n"
    "\0"
END

3 TEXTINCLUDE 
BEGIN
    "\r\n"
    "\0"
END

#endif    // APSTUDIO_INVOKED

/////////////////////////////////////////////////////////////////////////////
//
// DESIGNINFO
//

#ifdef APSTUDIO_INVOKED
GUIDELINES DESIGNINFO 
BEGIN
    IDD_FORMVIEW, DIALOG
    BEGIN
        LEFTMARGIN, 7
        RIGHTMARGIN, 251
        TOPMARGIN, 7
        BOTTOMMARGIN, 83
    END
END
#endif    // APSTUDIO_INVOKED

/////////////////////////////////////////////////////////////////////////////
//
// Dialog
//

IDD_FORMVIEW DIALOGEX 0, 0, 259, 91
STYLE DS_SETFONT | DS_FIXEDSYS | WS_MINIMIZEBOX | WS_VISIBLE | WS_CAPTION | WS_SYSMENU
EXSTYLE WS_EX_OVERLAPPEDWINDOW | WS_EX_APPWINDOW
CAPTION "Test"
FONT 8, "MS Shell Dlg", 400, 0, 0x0
BEGIN
    CONTROL         "Radio1",IDC_RADIO1,"Button",BS_AUTORADIOBUTTON,103,48,94,20,WS_EX_TRANSPARENT
    CONTROL         102,IDC_STATIC,"Static",SS_BITMAP,119,44,33,31,WS_EX_TRANSPARENT
END

/////////////////////////////////////////////////////////////////////////////
//
// Bitmap
//

IDB_BITMAP1             BITMAP                  "1.bmp"
#endif    // English (U.S.) resources
/////////////////////////////////////////////////////////////////////////////

#ifndef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//

/////////////////////////////////////////////////////////////////////////////
#endif    // not APSTUDIO_INVOKED 
```

我尝试使用 WM_CTLCOLORSTATIC 消息将画笔返回位图图像。但它不起作用。有没有办法发送手动绘制控件的消息？因为我觉得如果先画图再画单选按钮就可以避免这个问题。例如，每次绘制静态控件时都会发送 WM_CTLCOLORSTATIC 消息，这与绘制单选按钮时发送的消息相同，因为单选按钮不是静态控件。请不要给我 msdn 链接，我使用的是纯 Win32 而不是 MFC。到目前为止，我需要帮助，无论我尝试过什么都无济于事，而且我听说 Win32 API 的功能没有限制。哦，我也在 dreamincode.net 上发布了这个主题[检查这里](http://www.dreamincode.net/forums/topic/277113-group-box-transparency-problem/page__p__1610393__fromsearch__1&#entry1610393)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:37:17.827

添加到您的 DialogFunc：

```
case WM_CTLCOLORBTN:
//.....
int nCtrlId = GetDlgCtrlID((HWND)lParam);   
if(nCtrlId == RadiobuttonID)
{
   SetBkMode((HDC)wParam), TRANSPARENT);
   return (HBRUSH)GetStockObject(HOLLOW_BRUSH);
} 
```

# javascript - 调用 asmx 以获取 facebook 打开图 Auth_Token，在本地工作，在服务器上失败

> ID：10464618
> 
> 赞同：1
> 
> 时间：2012-05-05T18:12:17.933
> 
> 标签：javascript, asp.net, facebook-graph-api, oauth

下面的代码在本地工作得很好。但是，当我发布到我的主机并运行它时，它需要大约 20 秒，然后响应“无法连接到远程服务器”。

**编辑：知道了，根据我的主机：** '执行 HTTP 请求的 WebPermission，例如使用外部 XML Web 服务。（必须使用端口 1234 上的代理服务器 servername.tld 进行访问）"

Javascript：

```
 function getAuthCode() {
        $.ajax({
            type: "POST",
            cache: false,
            url: "backend.asmx/getAuthCode",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                //do whatever
            },
            error: function (request, status, error) {
                alert('getAuthCode ERROR: ' + error);
            }
        });
    }; 
```

ASMX：

```
<WebMethod()> _
Public Function getAuthCode() As String
    Dim appID As String = "<my appid>"
    Dim secretCode As String = "<my apps secret code>"
    Dim authURL As String = "https://graph.facebook.com/oauth/access_token?client_id=" + appID + "&client_secret=" + secretCode + "&grant_type=client_credentials"
    Try
        Dim webClient As New System.Net.WebClient
        Dim result As String = webClient.DownloadString(authURL)
        Return result
    Catch ex As Exception
        Return ex.Message
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:39:30.417

发现我的虚拟主机需要代理来处理任何 HTTP 请求。下面的更新功能完美运行！

```
<WebMethod()> _
Public Function getAuthCode() As String
    Dim appID As String = "<my appid>"
    Dim secretCode As String = "<my apps secret code>"
    Dim authURL As String = "https://graph.facebook.com/oauth/access_token?client_id=" + appID + "&client_secret=" + secretCode + "&grant_type=client_credentials"
    Try
        Dim webClient As New System.Net.WebClient
        Dim webProxy As New System.Net.WebProxy("<host proxy url", True)
        webClient.Proxy = webProxy
        Dim result As String = webClient.DownloadString(authURL)
        Return result
    Catch ex As Exception
        Return ex.Message
    End Try
End Function 
```

# mysql - 实体框架代码首先出现 MySql 错误

> ID：10464621
> 
> 赞同：3
> 
> 时间：2012-05-05T18:12:50.750
> 
> 标签：mysql, entity-framework-4.3, entity-framework-5

Entity Framework 版本 4.3+ 出现以下错误

[http://www.cnblogs.com/shouzheng/archive/2012/03/09/2388177.html](http://www.cnblogs.com/shouzheng/archive/2012/03/09/2388177.html)

（翻译）[使用EntityFramework Code First Development和MySql数据库问题的一个案例](http://translate.google.co.in/translate?hl=en&sl=zh-CN&u=http://www.cnblogs.com/shouzheng/archive/2012/03/09/2388177.html&ei=zwelT8CRIoTKrAeuxtX8AQ&sa=X&oi=translate&ct=result&resnum=1&ved=0CCUQ7gEwAA&prev=/search%3Fq%3DYou%2Bhave%2Ban%2Berror%2Bin%2Byour%2BSQL%2Bsyntax%253B%2Bcheck%2Bthe%2Bmanual%2Bthat%2Bcorresponds%2Bto%2Byour%2BMySQL%2Bserver%2Bversion%2Bfor%2Bthe%2Bright%2Bsyntax%2Bto%2Buse%2Bnear%2B%2527NOT%2BNULL,%2560ProductVersion%2560%2Bmediumtext%2BNOT%2BNULL%29%253BALTER%2BTABLE%2B%2560Migration%2527%2Bat%2Bline%2B5%26hl%3Den%26prmd%3Dimvns)

我想使用最新版本的 EF，因为版本 <= 4.1 不提供迁移功能。

> MySql.Data.MySqlClient.MySqlException (0x80004005)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，了解在 'NOT NULL, `ProductVersion`mediumtext NOT NULL) 附近使用的正确语法；
> 
> ALTER TABLE 3 createMigrator, ObjectContext objectContext) at System.Data.Entity.Internal.InternalContext.CreateDatabase(ObjectContext objectContext) at System.Data.Entity.Database.Create() at System.Data.Entity.DropCreateDatabaseAlways 1.b_ *0(DbContext c) 在 System.Data.Entity.Internal.InternalContext.<>c* _DisplayClass8.b_ *6() 在 System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) 在 System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization () 在 System.Data.Entity.Internal.LazyInternalContext.b* _4(InternalContext c) 在 System.Data.Entity.Internal.RetryAction 1 action) 在 System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()`__MigrationH' at line 6 at MySql.Data.MySqlClient.MySqlStream.ReadPacket() at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int32& insertedId) at MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int32& insertedId) at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force) at MySql.Data.MySqlClient.MySqlDataReader.NextResult() at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery() at System.Data.Objects.ObjectContext.ExecuteStoreCommand(String commandText, Object[] parameters) at System.Data.Entity.Internal.InternalContext.ExecuteSqlCommand(String sql, Object[] parameters) at System.Data.Entity.Database.ExecuteSqlCommand(String sql, Object[] parameters) at System.Data.Entity.Migrations.History.HistoryRepository.BootstrapUsingEFProviderDdl(XDocument model) at System.Data.Entity.Internal.InternalContext.<SaveMetadataToDatabase>b__4() at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) at System.Data.Entity.Internal.InternalContext.SaveMetadataToDatabase()
> at System.Data.Entity.Internal.DatabaseCreator.CreateDatabase(InternalContext internalContext, Func`
> `1.InitializeDatabase(TContext context) at System.Data.Entity.Database.<>c__DisplayClass2`**`1.PerformAction(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`
> 在 System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) 在 System.Data.Entity.Internal.Linq.InternalSet `1.Initialize() at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
> 在System.Data.Entity.Internal.Linq.InternalSet 1.Add `1.ActOnSet(Action action, EntityState newState, Object entity, String methodName) at System.Data.Entity.Internal.Linq.InternalSet`(Object实体）
> 在 System.Data.Entity.DbSet`1.Add(TEntity entity) at DBPreparationTool.Form1.PrepareDB_Click(Object sender, EventArgs e) 在 D:\Workspaces\Experiments\FaizeMBRoot\Source\DBPreparationTool\Form1.cs:line 39 at System.Windows.Forms.Control.OnClick(EventArgs e) 在 System.Windows.Forms.Button.OnClick(EventArgs e) 在 System.Windows.Forms.ButtonBase.OnKeyUp(KeyEventArgs kevent) 在 System.Windows.Forms.Control。 ProcessKeyEventArgs(Message& m) 在 System.Windows.Forms.Control.ProcessKeyMessage(Message& m) 在 System.Windows.Forms.Control.WndProc(Message& m) 在 System.Windows.Forms.ButtonBase.WndProc(Message& m) 在 System。 System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m) 在 System.Windows.Forms.Control 上的 Windows.Forms.Button.WndProc(Message& m)。ControlNativeWindow.WndProc(Message& m) 在 System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T00:12:59.247

请参阅此博客文章：[http ://brice-lambson.blogspot.com/2012/05/using-entity-framework-code-first-with.html](http://brice-lambson.blogspot.com/2012/05/using-entity-framework-code-first-with.html)**

# c++ - CPython 中的静态全局变量不安全吗？

> ID：10464626
> 
> 赞同：0
> 
> 时间：2012-05-05T18:13:17.497
> 
> 标签：c++, multiprocessing, cpython

在我包装在 python 函数中的一个 C++ 源文件中，有人包含以下内容：

```
namespace some_namespace 
{ 
  static double some_double; 
}

float function_that_uses_some_double(float input) { 
  // implementation
  return result; 
} 
```

静态全局`some_double`只在函数内部使用，所以如果我将它包装在一个 CPython 函数中并在单线程代码中调用它，则该变量一次只能被一个函数使用。这很丑陋，但那里没有问题。我的问题是如果我使用会发生什么：

1.  `threading`模块，或
2.  `multiprocessing`模块。

当我有多个进程和/或线程使用此模块时，它们会相互干扰吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:34:40.927

如果您使用 threading 模块，那么所有函数将简单地共享该全局变量。python 中的线程在字节码边界之间切换，因此锁定不是问题。

如果您使用多处理模块，情况会有所不同，这在一定程度上取决于您对多处理的使用。Python 从单个进程开始，因此全局变量只有一个副本。当您开始使用多处理（即从主进程派生新的 python 进程）时，该变量的值将被复制到子进程（任务）中，但这些进程将各自拥有自己的全局变量副本。

如果您变得棘手并设置了一个共享内存段（带有 MAP_SHARED 的 mmap）并且变量是一个指针，那么指向的位置将被共享，您将需要使用锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:25:38.617

If you are going to change some_double (which I assume you are because it's not a const variable), then you will have to do some kind of locking (e.g. mutex) if you use multiple threads.

# gtk - GTK，孩子的父母，共享的记忆和

> ID：10464627
> 
> 赞同：1
> 
> 时间：2012-05-05T18:13:19.507
> 
> 标签：gtk, gtk2

我对 GTK 真的很陌生，并且一直在努力解决这个问题。我现在拥有的是

```
Widgets *w;               // shared mem
struct mystruct *user;    // shared mem
....
pid = fork();
.....
if(pid == 0) {
    while(1){
        get_events(user);
        parse_events(user);
        // can I write to Widgets *w and the changes happen in the
        // parent process that is running the gtkmainloop
        write_to_textview("child", w);
    }
} else {
    ......
    write_to_textview("parent", w);
    gtk_widget_show_all(window);
    gtk_main();
} 
```

user 是父、子“和其他人”之间的共享结构，该结构包含我想在 GtkTextView 的父进程中预览的数据，一旦它们可用，我不知道该怎么做。不可能在父级中使用这样的东西

```
while(1) {
     is_available_data(user);
} 
```

这将检查数据是否可用，然后将数据写入 GtkTextView。由于 gtk 主循环，这是不可能的。在这个场景中必须有另一种方式，这样我就可以在用户->事件（char *）更新或可用时立即查看它应该再次打印（用户是 shm，事件也是 shm）但是怎么能我告诉 gtk 循环。Gtk线程？

有没有一种简单的方法使用 shm 从子进程（小部件在父进程中运行的位置）写入小部件？

我敢肯定还有其他方法比我尝试做的更容易。

编辑1：

我可以在结构中看到子进程生成/更改/添加的数据，并且在父进程（shm）中看到它没有问题。我想要做的就是在数据发生更改时立即更新 TextView，我相信我需要一个必须检查和更新的 while 循环，但由于 gtkmainloop 阻塞，这不会发生。我需要想法或方法来做到这一点。我花了一些时间试图找出与 gtk 相关的调用来帮助我，但不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:21:54.533

“共享内存”是什么意思？您的意思是在调用之前设置指针等`fork()`，以便每个进程都可以访问相同的数据吗？如果是这样，那么这对于实际更改数据并让所有进程都看到更改不起作用*。*这是因为`fork()`创建了一个*进程*，并且进程有单独的地址空间。在 Linux 中，数据被设置为“写入时复制”，因此看起来数据是真正共享的，但只要进程对数据进行更改，它就会获得自己的副本。

要使用*真正的*共享内存共享数据，您需要使用诸如 的调用`[shmget()](http://linux.die.net/man/2/shmget)`，但我认为您无法说服 GTK+ 仅在真正的共享内存中创建其小部件。

解决方案是使用*线程*，并且要非常小心避免进行多次访问，即[不要从多个不同的线程调用 GTK+](http://blogs.operationaldynamics.com/andrew/software/gnome-desktop/gtk-thread-awareness)。

# java - 我的 Swing 组件图形未更新

> ID：10464632
> 
> 赞同：1
> 
> 时间：2012-05-05T18:13:34.057
> 
> 标签：java, swing, jpanel, jscrollpane, jlabel

我意识到如果没有代码，这可能很难回答，但问题是我不确定要发布什么代码。我的问题是，当我加载 XML 文件时，对其进行解组，然后迭代加载的值的 ArrayList 以重新填充放置在 JScrollPane 内的 JPanel 上的 JLabel 数组，直到整个处理完成，图形才会更新。当我创建一个用 JProgressBar 打开的 JFrame 时，我发现了这一点。在一切完成之前，该栏甚至不会在窗格框架上显示或绘制。这违背了目的，因为我试图让进度条显示解码的进度。在调试时，我发现如果我隔离代码（除了实际加载文件和进行解组），该栏就可以工作。这让我看了看，我注意到当单独的 JLabel 添加和调整大小时，提到的其他组件没有更新，直到所有过程完成，尽管不断地重新绘制。由于我还是 JAVA 的新手，我想我会问是否有人知道在此循环进行时所有这些组件不会以图形方式更新的原因。

请注意，在循环中，我调用 add 和 repaint 函数将新解码的 JLabel 放置在窗格上，但它不会显示，直到所有完成，就像栏一样。所有这一切都在运行单线程（除了 JProgressBar 它被旋转到它自己的线程中）。ll

如果您愿意，我可以发布代码，请指导我使用您想要的代码（即 XML 解码器和循环、JLabels 的添加和大小、实例化等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:19:23.763

您正在“事件调度”线程上进行工作，该线程与用于运行 swing 的线程相同。您需要在单独的线程中完成您的工作。[看一下 SwingWorker 类](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html "摇摆工人")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T18:19:31.777

您的问题是您正在 Swing 事件线程或 EDT 上进行所有处理。解决方案是使用后台线程，例如可以通过 SwingWorker 对象获得。

有关这方面的更多信息，请查看名为[Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)的 Java Swing 教程。它将描述事件线程，为什么尊重而不是阻塞很重要，以及如何使用 SwingWorker 对象进行后台处理。

# ruby-on-rails - Rails 控制台中是否有打印数据库内容表的方法？

> ID：10464636
> 
> 赞同：8
> 
> 时间：2012-05-05T18:13:57.640
> 
> 标签：ruby-on-rails, ruby, rails-console

我正在寻找一种干净简单的方法来在 Rails 控制台中打印我的 5 行数据库的内容，其中包含 2 列。

有任何想法吗？我用谷歌搜索，但没有找到太多。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-05T18:25:46.650

I think you should first use the [hirb](https://rubygems.org/gems/hirb) gem which provides a very pleasant way to print your tables columns.

1.  Install *hirb* gem: `gem install hirb`
2.  Add this gem to your project's *Gemfile*: `gem 'hirb'`
3.  Go to your project's root folder and run Rails console: `rails c`
4.  Enable *hirb* in the console:

    ```
    require 'hirb'
    Hirb.enable 
    ```

If you want to limit the number of rows to display, you can do:

```
Model.limit(n) 
```

For instance:

```
User.limit(5) 
```

You can also specify the fields that you want to display using [select](http://guides.rubyonrails.org/active_record_querying.html#selecting-specific-fields):

```
User.select("name, email").limit(5) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-25T19:00:46.197

您也可以结帐[table_print](http://tableprintgem.com)，它会像这样工作：

```
$ gem install table_print
$ rails c
> require 'table_print'
> tp Book.all
AUTHOR            | SUMMARY                         | TITLE
-----------------------------------------------------------------------
Michael Connelly  | Another book by Michael Con...  | The Fifth Witness
Manning Mardale   | From acclaimed historian Ma...  | Malcolm X
Tina Fey          | Worth it. -Trees                | Bossypants 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-01T23:04:16.070

与`hirb`：

```
require 'hirb'
puts Hirb::Helpers::Table.render(ARRAY_OF_OBJECT_OR_HASHES)

# Examples:

puts Hirb::Helpers::Table.render([[1, "Terminator I"], [2, "Terminator II"]])

+---+---------------+
| 0 | 1             |
+---+---------------+
| 1 | Terminator I  |
| 2 | Terminator II |
+---+---------------+

puts Hirb::Helpers::Table.render([{ id: 1, name: "Terminator I" }, { id: 2, name: "Terminator II" }])

+----+---------------+
| id | name          |
+----+---------------+
| 1  | Terminator I  |
| 2  | Terminator II |
+----+---------------+

# specifying the order of the fields
puts Hirb::Helpers::Table.render([{ id: 1, name: "Terminator I" }, { id: 2, name: "Terminator II" }], fields: [:name, :id])

+---------------+----+
| name          | id |
+---------------+----+
| Terminator I  | 1  |
| Terminator II | 2  |
+---------------+----+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T18:24:51.813

Yes. Check out `hirb` gem. Also worth trying is `wirble` and `awesome_print`.

# objective-c - performSegueWithIdentifier 不起作用

> ID：10464638
> 
> 赞同：3
> 
> 时间：2012-05-05T18:14:05.203
> 
> 标签：objective-c, ios5, delegates, segue

我有这段代码在按下按钮时加载一个新的 UIView（来自情节提要）。goPressed 函数在按下按钮时触发，它调用 selectImage 函数。selectImage 打开一个 UIImagePickerController 并让用户选择一张照片。用户选择照片后，didFinishPickingMediaWithInfo 委托将所选图像添加到 UIImageView。

在“goPressed”中，执行 selectImage 后，它应该在注释为 //1 时执行 Segue。但什么也没有发生。performSegueWithIdentifier 似乎不起作用。如果我在调用 performSegueWithIdentifier 之前不调用 [self selectImage]，它会起作用。这是代码：

```
- (IBAction)goPressed:(id)sender {
    [self selectImage];
    [self performSegueWithIdentifier:@"lastView" sender:currentSender]; //1
}
-(void)selectImage
{
    // Create image picker controller
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

    // Set source to the camera
    imagePicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;

    // Delegate is self
    imagePicker.delegate = (id)self;

    // Allow editing of image ?
    imagePicker.allowsEditing=NO;

    // Show image picker
    [self presentModalViewController:imagePicker animated:YES];

}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Access the uncropped image from info dictionary
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    [[picker presentingViewController] dismissModalViewControllerAnimated:YES];

    lePreview.image= image;

} 
```

请帮忙，为什么 performSegueWithIdentifier 不起作用？我希望我没有遗漏您需要的任何信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T19:06:08.187

我假设您尝试转场的视图是使用您在转场之前获得的图片？如果他们从图像选择器中取消，你还想继续吗？

如果它需要图片，那么也许你应该在代表调用“完成挑选”之后调用你的 segue。

segue 没有触发的问题可能是由于动画仍然从这里发生：

```
[[picker presentingViewController] dismissModalViewControllerAnimated:YES]; 
```

你可以试试：

```
[[picker presentingViewController] dismissModalViewControllerAnimated:NO]; 
```

或者如果你想保持动画，将 segue 移动到“picker did finish”方法并这样做：

```
[self dismissModalViewControllerAnimated:YES completion:^() {
[self performSegueWithIdentifier:@"lastView" sender:self];
}]; 
```

或者如果这不起作用，请在 pickerdidfinish 方法中尝试这种方法（注意 - 这应该作为调用模态视图的控制器中的委托来实现，而不是模态视图本身：

```
//maintain the animation
[self dismissModalViewControllerAnimated:YES];

//slight pause to let the modal page dismiss and then start the segue
double delayInSeconds = 0.5;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

    //code to be executed on the main queue after delay

    [self performSegueWithIdentifier:@"lastView" sender:self];

}); 
```

我经常使用这种过渡，它在模态视图中很好地下降，然后在 segue 视图中滑动，暂停让过渡看起来很自然。

# iphone - Xcode 项目管理：将 iPad (Storyboards,iOS 5) 添加到兼容 iOS 4 的 iPhone 项目中

> ID：10464640
> 
> 赞同：0
> 
> 时间：2012-05-05T18:14:22.527
> 
> 标签：iphone, ios, xcode, ipad, workspace

我有一个成熟的 iPhone 项目需要与 iOS 4 保持兼容。我想添加一个使用 Storyboard 的 iPad 版本。组织这样一个项目的最佳做法是什么？由于 iOS 版本不同，我认为不可能将其作为通用项目来执行。

当然，我可以只为 iPad 版本生成第二个项目，但是我必须在版本之间手动同步更改。

用 Xcode 工作区解决这个问题是个好主意吗？如果我做对了，一个工作区中可以有多个项目。

谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:10:57.363

我要做的是创建一个包含三个目标的工作区：两个应用程序和一个库。然后，您将共享代码放入您包含在两个应用程序目标中的库目标中。

# c - C中目录和文件列表的正则表达式

> ID：10464646
> 
> 赞同：1
> 
> 时间：2012-05-05T18:15:28.283
> 
> 标签：c, regex, linux

我正在尝试编写一个表达式，在列出目录的内容时会过滤掉几种类型的目录和文件。即，我想避免列出当前目录（.）、上层目录（..）、隐藏文件和其他更具体的目录。

这就是我现在所拥有的：

`[\\.+]|cgi-bin|recycle_bin`

但是，它不匹配`.`, `..`, recycle_bin 也不`cgi-bin`. 如果我删除所有`|`操作数并将表达式保留为 only `[\\.+]`，则它可以工作（匹配`.`、`..`等）。这很奇怪，因为我很确定`|`= OR。我错过了什么吗？

更新1：这是我使用的代码：

```
 regex_t regex;
            int reti;
            char msgbuf[100];

            /* Compile regular expression */
            reti = regcomp(&regex, "[\\.+]|cgi-bin|recycle_bin", 0);

            if( reti )
            { 
                fprintf(stderr, "Could not compile regex\n");
                exit(1);
            }

            reti = regexec(&regex, entry->d_name, 0, NULL, 0);
            if( !reti ){

                printf("directoy %s found -> %s", path, entry->d_name);
                printf("\n");

            }
            else if( reti == REG_NOMATCH ){

                //if the directory is not filtered out, we add it to the watch list
                printf("good dir %s", entry->d_name);                    
                printf("\n");

            }
            else{
                regerror(reti, &regex, msgbuf, sizeof(msgbuf));
                fprintf(stderr, "Regex match failed: %s\n", msgbuf);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:34:49.653

使用[“扩展 REs”](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04)。对于[常规（“过时”）的](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03)， the`|`是一个普通字符。

```
regcomp(..., REG_EXTENDED); 
```

另请参阅[`regcomp()`说明](http://pubs.opengroup.org/onlinepubs/9699919799/functions/regcomp.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:43:28.043

关注pmg的评论并尝试这个正则表达式：

```
^([.]{0,2}|cgi-bin|recycle_bin)$ 
```

`[.]{0,2}`它匹配`.`并且`..`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:12:15.923

这不是 C 正则表达式库的用途。它的目的是让您构建接受正则表达式作为输入的程序。没有正则表达式可以更好地解决这个问题：

```
#define SIZE(x) (sizeof (x)/sizeof(*(x)))
char *unwanted[] = {
     ".",
     "cgi-bin",
     "recycle_bin",
};
int x;
for(x=0; x<SIZE(unwanted); x++)
     if(strstr(entry->d_name, unwanted[x])!=NULL)
           goto BadDir;
//good dir
BadDir: 
```

忽略你现在的正则表达式的意思，你可能想要这样的东西：

```
char *begins[] = {".", "private_"};
char *equals[] = {"recycle_bin", "cgi-bin"};
char *contains[] = {"_reject_"};

for(x=0; x<SIZE(begins); x++)
    if(strncmp(entry->d_name, begins[x], strlen(begins[x]))==0)
          goto BadDir;
for(x=0; x<SIZE(equals); x++)
    if(strcmp(entry->d_name, equals[x])==0)
          goto BadDir;
for(x=0; x<SIZE(contains); x++)
    if(strstr(entry->d_name, contains[x])!=NULL)
          goto BadDir;
//good dir...
BadDir: 
```

# javascript - InfoWindow 打开缓慢或根本不打开

> ID：10464647
> 
> 赞同：0
> 
> 时间：2012-05-05T18:15:39.820
> 
> 标签：javascript, ios, google-maps-api-3, uiwebview

我正在使用这个非常基本的代码使 InfoWindow 成为“单例”并在需要的地方打开它。（在 iOS5 上的 UIWebView 中）

```
google.maps.event.addListener(marker, 'click', function() {
                                  infowindow.setContent(content);
                                  infowindow.open(map,marker); 
                                  reportClickedMarker();
                                  }); 
```

问题是 infoWindows 似乎打开得很慢。当我单击第一个标记时，它会在 0-1 秒的延迟后打开。第二个标记与第一个非常接近，在 +1 秒后打开，第三个标记（有时）根本不打开。我没有打电话就试过了

```
reportClickedMarker(); 
```

但这并没有改变任何事情。只有当我双击标记时，它才会立即打开。

a) 有没有人可能出了什么问题，或者这甚至是正常的行为（延迟？）

b）我可以“伪造”双击标记吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:17:31.593

It appears you are hitting the infamous delay for click events on mobile devices. The delay is built in as the platform needs to determine if the touch is the start of a gesture. Instead of click, try using the touchend event.

See [http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone](http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone)

# iphone - 以编程方式将一些文本添加到 UITextView 中的特定区域？

> ID：10464657
> 
> 赞同：2
> 
> 时间：2012-05-05T18:16:42.103
> 
> 标签：iphone, ios, xcode, uitableview, cgrect

`UITextView`我以编程方式创建了一个实例。我想以`UITextView`编程方式向特定区域添加一些文本。这是我创建的代码`UITextView`。

```
 UITextView *textView =[[UITextView alloc]init];
      textView.frame=CGRectMake(0,0,282,210);
      [textView setReturnKeyType:UIReturnKeyDone];
      [self.view addSubview:textView]; 
```

例如，我想向特定区域添加一些文本`CGRectMake(260,190,20,20)`。然后将此文本添加到`UITextView`. 以编程方式，请任何人指导我，怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:51:37.310

你可以在`UILabel`那里添加一个。

```
UITextView *textView = [[UITextView alloc] init];
TextView.frame = CGRectMake(0.0,0.0,282.0,210.0);
[textView setReturnKeyType: UIReturnKeyDone];

UILabel *label = [[UILabel alloc] init];
label.frame = CGRectMake(260.0,190.0,20.0,20.0);
label.text = @"T"; //here you set the text you want...

[textView.view addSubview: label];

[self.view addSubview: textView]; 
```

# video - 如何将视频编码为 h264？

> ID：10464658
> 
> 赞同：4
> 
> 时间：2012-05-05T18:17:17.187
> 
> 标签：video, format, h.264, gstreamer, gnuradio

我正在尝试使用 GNUradio 发送视频文件，特别是使用 GRC。为了做到这一点，我首先获取任何一个视频，在我们的例子中，我们拍摄了一个 6 秒的视频，我们盯着相机并与相机交谈。完成此操作后，我们创建了一个“管道”文件，我相信它是使用 mkfifo 调用的，用于输入和输出文件。之后，我相信我应该使用我找到的命令以 h264 编码保存我拍摄的视频：

```
gst-launch -e -v v4l2src device="/dev/video1" ! video/x-raw-yuv, framerate=25/1, width=640, height=360 ! \timeoverlay halign=right valign=bottom shaded-background=true ! \textoverlay text="Test Video 640x360 25fps" halign=left valign=bottom shaded-background=true ! \x264enc bitrate=498 ! mpegtsmux ! filesink location=test1.ts 
```

这给了我一个错误：

```
WARNING: erroneous pipeline: no element "x264enc" 
```

我一直在尝试找到解决此问题的方法，并且我基本上已经安装了可能与 h264 编码或 x264enc 命令有关的每个存在的包或库。

我怎么可能解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:20:11.133

下载并安装[x264](http://www.videolan.org/developers/x264.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:22:45.253

`gst-inspect x264enc`在命令行上键入。

如果它显示你有它，你需要寻找管道同步的其他问题。

如果没有显示`x264enc`，则需要`gst-plugin`构建 x264enc。大概下载对应的tarball

```
gst-plugins-ugly 
```

提取它并尝试安装它：

`sudo apt-get install gstreamer1.0-plugins-ugly`

`cd`到目录，然后

```
sudo ./configure
sudo make
sudo make install 
```

现在它可能会起作用。

# java - Java Spring——在编译时识别语法错误（在 Eclipse 中）

> ID：10464662
> 
> 赞同：1
> 
> 时间：2012-05-05T18:17:43.180
> 
> 标签：java, eclipse, spring

我是 Spring 新手，现在正在学习在一段遗留代码中使用它。如果我使用了错误的语法（比如我输入了错误的 bean 名称，或者我使用了错误的语法来构造诸如枚举之类的东西），那么代码将编译得很好。

这是有道理的，因为它们只是在运行时加载的 XML 文件。

对我来说，这是一个大问题，因为我的服务可能需要 5 分钟才能运行，即使它可以立即编译。而且没有必要这样做，因为在服务运行之前就可以知道所有的语法错误。我不应该需要例外来了解它。

在 Eclipse 中，如果我的 Spring 语法无效，是否可以使用插件或功能使编译失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:23:02.553

当然。看一下[STS](http://www.springsource.com/developer/sts)（Spring Tool Suite）——它是一个用于使用 Spring 的 Eclipse 特殊包。它有上下文 XML 验证插件和许多其他好东西。

# lotus-notes - Notes 客户端 - 关闭文档时返回特定视图

> ID：10464664
> 
> 赞同：1
> 
> 时间：2012-05-05T18:17:46.393
> 
> 标签：lotus-notes, lotusscript

我使用以下代码确保在关闭文档并选择新创建的文档时返回特定视图：

```
Dim ws As New NotesUIWorkspace
Dim uidb As NotesUIDatabase
Set uidb = ws.CurrentDatabase
Call uidb.OpenView("vwMyView", , False)

ws.CurrentView.SelectDocument(Source.Document) 
```

如果视图已经打开，那么此代码将转到上面定义的视图并选择文档。因此，如果视图未打开，它将打开视图并选择我们的文档。这在创建新文档且视图索引尚未更新时很有用。

这段代码效果很好，但是如果我将视图作为框架集的一部分，该框架集也设置为主页（主页选项卡），我该如何让这段代码工作。

**编辑：**

为了进一步解释这个问题，我有一个链接到多个数据库的框架集，当用户单击大纲控件打开链接时，它会在框架集中打开一个视图。然后，当从该视图创建一个新文档（与大纲所在的位置相比属于另一个数据库）时，我们在该框架集之外打开一个新窗口。关闭此文档时，我想返回框架集（与此文档相比，它现在位于另一个数据库中）并刷新视图以选择当前新文档。这个框架集是我的主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:43:29.510

检查 SetTargetFrame 是否可以为您做一些事情：

```
Call notesUIWorkspace.SetTargetFrame( frame$ ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:54:01.170

视图是否设置为自动进入框架集？

# java - 当通过单例模式创建可序列化对象时会发生什么？

> ID：10464665
> 
> 赞同：3
> 
> 时间：2012-05-05T18:17:54.187
> 
> 标签：java, object, singleton, serializable

问题说明了一切。有什么特殊事件发生吗？我有一个类需要实现 Serializable 接口。我正在使用 Wicket 开发应用程序。我已经实现了一个工厂类，它将提供一些链接（以消除重复写入的相同代码块的冗余）：

```
public class NavigationLinkFactory implements Serializable {

    private static final long serialVersionUID = 7836960726965363785L;

    private NavigationLinkFactory() {

    }

    private static class SingletonHolder { 
        public static final NavigationLinkFactory instance = new NavigationLinkFactory();
    }

    public static NavigationLinkFactory getFactory() {          
        return SingletonHolder.instance;

    }

    private Object readResolve() throws ObjectStreamException {
        return SingletonHolder.instance;
    }

    public Link<Serializable> getUserHomeLink() {
        return new Link<Serializable>("home", new Model<Serializable>()) {

            private static final long serialVersionUID = -8282608926361995521L;

            @Override
            public void onClick() {
                EMSSession session = (EMSSession) getSession();
                session.setActiveHorizonalMenu(1);
                setResponsePage(HomePage.class);
            }
        };      
    }

    public Link<Serializable> getProfileLink() {
        return getProfileViewLink();
    }

    public Link<Serializable> getProfileViewLink() {
        return new Link<Serializable>("profileView", new Model<Serializable>()) {

            private static final long serialVersionUID = 232185489384306999L;

            @Override
            public void onClick() {
                EMSSession session = (EMSSession) getSession();
                session.setActiveHorizonalMenu(2);
                setResponsePage(ProfileViewPage.class);
            }
        };  
    }
} 
```

如果我没有实现 Serializable ，那么我会在 处得到异常`java.io.ObjectOutputStream.writeObject`，这是由 wicket 框架的运行时环境引发的。如果我实施它，那么它就消失了。

`ObjectInputStream#readobject()`那么，当为单例模式创建的某个对象调用方法时，究竟会发生什么呢？

我没有添加检票口标签，因为我认为这个问题与检票口无关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T18:22:25.987

不幸的是，默认情况下会发生第二个（或第三个，或第三十七个）单例实例——不好。幸运的是，有一种解决方法：通过实现[readResolve()](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/input.html#5903)方法，该方法可以返回一个替换对象——在你的情况下是正确的单例对象——而不是默认序列化返回的那个。该链接描述了细节，但它非常简单——您只需实现此无参数实例方法即可返回单例对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T19:04:08.350

实现序列化安全单例的另一种方法是使用枚举。请参阅[此答案](https://stackoverflow.com/a/71399/116639)及其链接。简而言之，这个想法是 Java 已经保证在 JVM 中只有一个给定枚举值的实例，即使面对序列化也是如此，因此您可以将枚举值用作单例。这是一个黑客，但它是一个相当干净的黑客。

# delphi - 如何在运行时动态调整弹出窗口的大小？

> ID：10464668
> 
> 赞同：2
> 
> 时间：2012-05-05T18:18:02.323
> 
> 标签：delphi

我尝试创建一个弹出 Treeview 的自定义 Combobox 控件。一切看起来都很好。但是当我尝试向该控件添加运行时调整大小功能时，弹出窗口（Treeview）只是移动并且不会改变它的大小。

任何建议将不胜感激。

弹出窗口的片段：

**创建时**：

```
ControlStyle := ControlStyle + [csNoDesignVisible, csReplicatable, csDoubleClicks]; 
```

**在创建参数**：

```
begin
  inherited CreateParams(Params);
  with Params do
  begin
    Style := Style or WS_POPUP or WS_VSCROLL or WS_BORDER;
    ExStyle := WS_EX_TOOLWINDOW;
    AddBiDiModeExStyle(ExStyle);
    //WindowClass.Style := CS_SAVEBITS; {this would prevent ondoubleclick event}
  end; 
```

鼠标移动：

```
var
  ARect, RR: TRect;
  DragStyle: TDragStyle;
  Procedure SetDragStyle(ds:TDragStyle; c:TCursor);
  begin
    FDragStyle:=ds;
    Cursor:=c;
  end;
begin
  inherited;
  FMouseMoveSelected := GetNodeAt(x, y);
  if FDragged then begin
    case FDragStyle of
       dsSizeLeft :begin
                      SetWindowPos(Handle, HWND_TOP, Left+(x-FDragPos.X), Top, Width, Height,
                        SWP_NOACTIVATE or SWP_SHOWWINDOW);
                      //Left:=Left+(x-FDragPos.X); {alternate code that doesn't work either}
                   end;
    end;
    FDragPos:=Point(x,y);
  end else begin
    SetDragStyle(dsMove,crDefault);
    ARect := GetClientRect;
    RR:=ARect;
    InflateRect(RR,-2,-2);
    if (x>=0) and (x<=Width) and (y>=0) and (y<=Height) and (not PtInRect(RR,Point(x,y))) then begin
      if (x<=RR.Left) then begin
        //if (y<=RR.Top) then SetDragStyle(dsSizeTopLeft,crSizeNWSE)else
        if (y>=RR.Bottom) then SetDragStyle(dsSizeBottomLeft,crSizeNESW)
        else SetDragStyle(dsSizeLeft,crSizeWE); 
      end else if (x>=RR.Right) then begin
        //if (y<=RR.Top) then SetDragStyle(dsSizeTopRight,crSizeNESW) else
        if (y>=RR.Bottom) then SetDragStyle(dsSizeBottomRight,crSizeNWSE)
        else SetDragStyle(dsSizeRight,crSizeWE);
      end else begin
        //if (y<=RR.Top) then SetDragStyle(dsSizeTop,crSizeNS) else
        if (y>=RR.Bottom) then SetDragStyle(dsSizeBottom,crSizeNS)
        else SetDragStyle(dsMove,crDefault);
      end;
    end;
  end;
end;
end; 
```

**鼠标按下时**：

```
begin
  inherited;
  if FDragStyle<>dsMove then begin
    FDragPos:=point(x,y);
    FDragged:=true;
  end;
end; 
```

**鼠标上移**：

```
begin
  inherited;
  FDragged:=false;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T20:43:53.363

您在`SetWindowPos`通话中将客户端坐标与屏幕坐标混合。那是因为您正在浮动一个不应该浮动的窗口，而 VCL 对此一无所知。当您引用它`Left`时，VCL 返回一个相对于其父级的坐标，可能是表单。也不要更改在拖动过程中开始拖动时保存的点（即 FDragPos）：

```
procedure TPanel.MouseMove(Shift: TShiftState; X, Y: Integer);
var
  ARect, RR: TRect;
  DragStyle: TDragStyle;

  Procedure SetDragStyle(ds:TDragStyle; c:TCursor);
  begin
    FDragStyle:=ds;
    Cursor:=c;
  end;

  var
    DragOffset: Integer;
begin
  inherited;
  FMouseMoveSelected := GetNodeAt(x, y);
  if FDragged then begin
    case FDragStyle of
       dsSizeLeft:
         begin
            DragOffset := X - FDragPos.X;
            winapi.windows.GetWindowRect(Handle, ARect);
            SetWindowPos(Handle, HWND_TOP,
                                  ARect.Left + DragOffset,
                                  ARect.Top,
                                  ARect.Right - ARect.Left - DragOffset,
                                  ARect.Bottom - ARect.Top,
                                  SWP_NOACTIVATE or SWP_SHOWWINDOW);
            //Left:=Left+(x-FDragPos.X); {alternate code that doesn't work either}
         end;
    end;
//    FDragPos:=Point(x,y);  // do not change drag origin while you're dragging
  end else begin
    .. 
```

# objective-c - Objective C生成（空）WAV文件

> ID：10464669
> 
> 赞同：2
> 
> 时间：2012-05-05T18:18:06.613
> 
> 标签：objective-c, core-audio

我正在尝试将一些音频数据保存到 WAV 文件中——我有通常在 RemoteIO 中使用的音频数据，但我现在正在尝试实现一个函数来保存数据。我知道音频数据是有效的，所以这不是问题——如果我可以得到一个正确长度的空 WAV 文件，我可以稍后用数据填充它。

现在，代码创建了文件，它看起来是正确的字节长度，但显然它的格式不正确，因为 OSX、QuickTime、iTunes 等无法识别它（他们看到文件，无法确定长度，或播放它）

```
 NSURL * tvarFilename = [savePanel URL];
    NSLog(@"doSaveAs filename = %@",tvarFilename);        

    //try to create an audio file there

    AudioFileID mRecordFile;

    AudioStreamBasicDescription audioFormat;
    audioFormat.mSampleRate         = 44100.00;
    audioFormat.mFormatID           = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket    = 1;
    audioFormat.mChannelsPerFrame   = 2;
    audioFormat.mBitsPerChannel     = 16;
    audioFormat.mBytesPerPacket     = 4;
    audioFormat.mBytesPerFrame      = 4;

    OSStatus status = AudioFileCreateWithURL((CFURLRef)tvarFilename, kAudioFileWAVEType, &audioFormat, kAudioFileFlags_EraseFile, &mRecordFile);

    int beatsToRecord = 4; //temporary

    int bpm = 120;

    double intervalInSamples = (double) 60 / bpm;
    intervalInSamples *= (double)44100;

    int inNumberFrames = (intervalInSamples * beatsToRecord);

    UInt32 frameBuffer[inNumberFrames];

    int sampleTime = 0;

    UInt32 thisSubBuffer[inNumberFrames];

    for (int i = 0; i < inNumberFrames; i++) { frameBuffer[i] = 0; }

    UInt32 bytesToWrite = inNumberFrames * sizeof(UInt32);
    status = AudioFileWriteBytes(mRecordFile, false, 0, &bytesToWrite, &frameBuffer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:51:50.183

WAV 文件非常简单：它只包含一个（通常为 44 字节长）标题部分，然后是原始 PCM 数据。我编写了一个需要记录 WAV 文件的库，我很确定你会明白我是如何完成它的。为了澄清：

```
/**
 * CD quality: 44100 Hz sample rate, 16 bit per sample, 2 channels (stereo):
**/
struct sprec_wav_header *hdr = sprec_wav_header_from_params(44100, 16, 2);
int filesize = (obtain the filesize somehow here);
/**
 * -8 bytes for the first part of the header, see the WAV specification
**/
hdr->filesize = filesize - 8;
int filedesc = open("/tmp/dummy.wav", O_WRONLY | O_CREAT, 0644);
if (sprec_wav_header_write(filedesc, hdr))
{
    printf("Error writing WAV header!\n");
}
close(filedesc);
free(hdr); 
```

还有我写的图书馆：[https ://github.com/H2CO3/libsprec/](https://github.com/H2CO3/libsprec/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-16T15:56:58.527

最初问题中的代码问题最终在缺失`AudioFileClose(mRecordFile);`行中。

对于那些仍然在不使用 3rd 方库的情况下搜索工作示例的人，这里是稍微修改的代码片段：

```
- (void)createSilentWAVFileAtURL:(NSURL *)fileURL {
    AudioFileID mRecordFile;

    AudioStreamBasicDescription audioFormat;
    audioFormat.mSampleRate         = 44100.00;
    audioFormat.mFormatID           = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket    = 1;
    audioFormat.mChannelsPerFrame   = 2;
    audioFormat.mBitsPerChannel     = 16;
    audioFormat.mBytesPerPacket     = 4;
    audioFormat.mBytesPerFrame      = 4;

    OSStatus status = AudioFileCreateWithURL((__bridge CFURLRef)fileURL, kAudioFileWAVEType, &audioFormat, kAudioFileFlags_EraseFile, &mRecordFile);

    double intervalInSamples = 0.5;
    intervalInSamples *= audioFormat.mSampleRate * audioFormat.mChannelsPerFrame;

    int beatsToRecord = 4; //seconds of silence
    int inNumberFrames = (intervalInSamples * beatsToRecord);

    UInt32 frameBuffer[inNumberFrames];

    for (int i = 0; i < inNumberFrames; i++) { frameBuffer[i] = 0; }

    UInt32 bytesToWrite = inNumberFrames * sizeof(uint32_t);
    status = AudioFileWriteBytes(mRecordFile, false, 0, &bytesToWrite, &frameBuffer);
    status = AudioFileClose(mRecordFile);

    NSAssert(status == noErr, @"");
} 
```

PS：要减少最终文件大小`mChannelsPerFrame`，请从 2 减少到 1 和`mSampleRate`（例如到 11000）

# java - 数字签名：在客户端或服务器上签名之间的安全问题？

> ID：10464674
> 
> 赞同：1
> 
> 时间：2012-05-05T18:18:39.863
> 
> 标签：java, security, encryption, certificate, digital-signature

使用 Adob​​e Reader，您可以在本地签署文档。理论上是否比将文档传输到服务器并在服务器上签名（不是特别使用 adobe 技术）更安全？如果在服务器上完成，用户是否可以争辩该文件​​以后可能被篡改？如何从技术上证明他是错误的，即使在服务器上签名也是不可能的 - 需要考虑法律问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:21:44.590

文档在到达服务器的途中可能发生任何事情。连接可能受到中间人攻击，服务器可能被篡改等等。

加密签名中的第一条规则是，它必须发生在受信任环境中的受信任机器上，最好是在它甚至到达连接的机器之前（即离线，然后在离线介质上传输）。

简而言之：它应该在客户端而不是其他地方签名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T03:49:54.113

你住在欧盟吗？我可以描述这里的情况。签名的法律方面在某种程度上受指令 1999/93/EC 的约束。会有一个更新版本，所以细节会有一些变化，但一般来说，该指令*确实*区分了基于服务器的签名和由个人在本地制作的签名，对过程具有唯一的控制权。

单独控制本地进程具有许多安全优势，其中包括：

*   使用指令所称的安全签名创建设备 (SSCD)，例如智能卡。使用防篡改设备绝对被认为是一种优势，尽管当攻击者例如控制 SSCD 所连接的计算机/操作系统时，它仍然可以被利用。

*   指令中模糊描述的“所见即所得”原则。理想情况下，您应该能够在值得信赖的设备上查看您即将签署的数据。使用服务器端签名无法保证这一点。

*   密钥托管。如果服务器签名，则密钥很可能也存储在服务器上。实现一个密钥在服务器上只有客户端可以访问它的解决方案非常非常困难，更常见的情况是您需要信任操作服务器的一方。

也就是说，可以使用例如 TLS 来保护从客户端到服务器的传输，并且仍然具有相当安全的服务。但就法律而言（至少在欧盟），“不可否认”签名的概念，即由个人签发的签名，仅在“本地签名”的情况下才有可能。此处认可的 CA 不会向法人实体颁发不可否认证书，例如，此类证书只会颁发给真实的人，通常在 SSCD 上。

SSCD 的缺点是很难大规模部署可以使用它们的软件，尤其是跨公司/州边界，因为无数硬件仍然存在很多互操作性问题，成本还有一个简单明了的事实，那就是它不太方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T04:31:55.423

如果签名是由用户（人工操作员）进行的，那么这是对密钥所在服务器的信任问题。

通常“签名由用户代表用户进行”是指用户拥有用于签名的密钥。在这种情况下，将私钥放在服务器上几乎没有意义。如果你需要这个方案，那么要么签名不是由所有者做出的，要么签名不是代表制作它的个人做出的。

但是在技术上对服务器上的数据进行签名（如您所描述的）是可能的，并且在正确实施的架构中，用户应该能够取回签名的副本并手动验证签名的文档以确保这是他（或他的服务器上的）代表）打算签署。

另一个问题是服务器是否（有意或由于安全漏洞）不使用用户的私钥来签署除了请求的文档之外的任何内容。这很难确保，除非您有一个专门为一个操作（签名）而设计的服务器，在这种情况下，您可能会处理专门的硬件设备（例如 SafeNet 提供的设备），而不是通用的 Windows/Linux /... 服务器操作系统。

我们的 SecureBlackbox 产品中有一个分布式加密模块，它实现了与您描述的类似的方案，但角色通常是相反的：用户拥有密钥并使用它对驻留在服务器上的文档进行本地签名，而不是传输到客户。在该模块中，我们使用 TLS 来确保通道的安全性，并在用户的计算机上执行签名，因此私钥严格保密。但是，您描述的方案也可以使用该模块来实现。

# php - mysql 或 avg 还是我应该使用 php？

> ID：10464675
> 
> 赞同：0
> 
> 时间：2012-05-05T18:18:47.197
> 
> 标签：php, mysql

我正在尝试使用 mysql 查询找到平均值的平均值。

我有 12 个标准，我可以得到一列的平均值，但我找不到平均值的平均值，

我正在尝试制定 12 条标准的总评级。

我认为有几种方法可以解决这个问题。

1.  就是用总分除以票数，问题是每一行有12票的可能性。
2.  获取平均总数，找到我们的值集，然后将平均总数除以值集

我需要将总数除以的数字根据投票而改变。1 使用 1 行可输入 12 票 2 用户可输入 2 行总共 18 票，这意味着 1 用户尚未完成 6 票![表数据](../Images/6e15d82d8df8089589964ee9e5deb938.png) 为了测试目的，将表格缩短为包含投票的列。我已经发布了，抱歉重新发布，但我开始了解我大致需要什么帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:48:41.980

首先，为了确定用户是否投票，您需要在字段中存储除整数之外的其他内容，直到添加投票为止。我会建议`NULL`。

接下来，在表格中添加另一列以获取用户的平均评分。这将使用行中**没有**值的列来计算`null`。示例半伪代码：

```
// Get users row from database
// Use a query like: 
// SELECT comfort,service,friendliness,food,drinks,toilet,music FROM myTable WHERE user_id = 123;
$row = $db->fetchrow($userid);

// Loop through and find out how many are valid
// Also add values together
foreach($row as $col)
{
   if( !is_null($col) )
   {
      $numValidColumns++;
      $totalVote = $totalVote + $col; 
   }
}

// Calculate user's average
$userAvg = $totalVote/$numValidColumns;

// Add to db for this row in new field you just made
$db->insert(...); 
```

像这样的东西可以让你计算用户的平均保存它。如果他们添加另一票，您将重新计算该平均值。

最后一步是查询**所有**行并将*用户平均*列的值相加。将其除以总行数以得出总体平均值。

希望这对你来说是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:43:27.130

我使用临时表做了类似的事情。首先对每一列进行平均，然后是一般平均值或您执行的任何返回您需要的值的操作。不要忘记删除临时表。

# protobuf-net - 为什么我不能用结构准备序列化程序？

> ID：10464678
> 
> 赞同：2
> 
> 时间：2012-05-05T18:19:11.867
> 
> 标签：protobuf-net

Protobuf-Net 2.0.0.480 可以使用`DataContract`or`ProtoContract`属性序列化结构，并且这样做很好。

但是，`Serializer.PrepareSerializer<MyStruct>()`声明`MyStruct`必须是引用类型。为什么会存在这种限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:16:32.823

公平观察！这是 v1 的遗留问题，其中 API 仅支持`class`. v2 实现添加`RuntimeTypeModel`并将旧`Serializer.*`API 转发到`RuntimeTypeMode.Default.*`.

在这种情况下，答案很简单：因为我没有删除`where T : class`从 v1 开始就存在的约束。它将在未来的构建中删除。

目前，您还可以通过以下方式执行此操作：

```
RuntimeTypeModel.Default[type].CompileInPlace(); 
```

# windows - 单进程钩子函数

> ID：10464680
> 
> 赞同：0
> 
> 时间：2012-05-05T18:19:23.023
> 
> 标签：windows, process, kernel, hook

谁能告诉我如何仅从内核驱动程序函数中挂钩单个进程。例如 ZwQueryInformationProcess。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:16:35.770

你不能在 Windows 内核中做到这一点。ntoskrnl 的 ZwXXX 函数是原生 API。它们是全局通用函数。用户模式下的所有进程都使用该函数的一份副本。内核中没有写时复制或其他内容。您可以通过使用这种方式来实现这一点：

1.  钩住用户态特殊进程ntdll.dll的ZwQueryInformationProcess。
2.  在内核模式下的钩子函数中添加一个过滤器。如果当前进程上下文不是您想要的。通过它。

就这样。

谢谢。

# javascript - 如何处理数据的ajax拖放重新排序

> ID：10464688
> 
> 赞同：0
> 
> 时间：2012-05-05T18:20:10.543
> 
> 标签：javascript, ajax, jquery-ui, jquery

我担心我没有正确地做到这一点。目前，我已经使用 jQuery UI 的拖放功能为数据库数据表实现了拖放界面。在更新订单时，我有一个回调函数进行 ajax 调用，将元素的位置发送到 php 脚本。根据元素的位置，php 重新计算所有其他项的位置并更新它们在 MySQL 数据库中的位置。

我担心用户可能会过快地重新排序列表，并导致数据库中的项目在从上一个请求完成更新之前由 php 更新，从而导致数据不正确。这是一个问题吗？我是否应该实现某种方式来排队 ajax 请求，直到前一个请求完成？我想知道是否有一些使用 ajax 更新数据库的最佳实践，并确保在再次更新同一项目之前完成更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:28:48.880

似乎答案取决于您的 MySQL 数据库的实现。如果您使用的是 InnoDB，请使用 Transactions。

希望这个线程将为您的问题提供解决方案。 [如何处理数据库中的并发更新？](https://stackoverflow.com/questions/1195858/how-to-deal-with-concurrent-updates-in-databases)

# csv - 如何计算制表符分隔值文件中的字符串实例？

> ID：10464697
> 
> 赞同：0
> 
> 时间：2012-05-05T18:21:34.363
> 
> 标签：csv, awk, sed, scripting

如何计算制表符分隔值（tsv）文件中的字符串实例？

tsv文件有几亿行，每一行的形式为

```
foobar1  1  xxx   yyy
foobar1  2  xxx   yyy
foobar2  2  xxx   yyy
foobar2  3  xxx   yyy
foobar1  3  xxx   zzz 
```

. 如何计算文件中整个第二列中每个唯一整数的实例，理想情况下将计数添加为每行中的第五个值？

```
foobar1  1  xxx   yyy  1
foobar1  2  xxx   yyy  2
foobar2  2  xxx   yyy  2 
foobar2  3  xxx   yyy  2
foobar1  3  xxx   zzz  2 
```

我更喜欢只使用 UNIX 命令行流处理程序的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:00:12.077

我不完全清楚你想做什么。您是要根据第二列的值添加 0/1 作为第五列，还是要获取第二列中值的分布，整个文件的总数？

在第一种情况下，使用类似`awk -F'\t' '{ if($2 == valueToCheck) { c = 1 } else { c = 0 }; print $0 "\t" c }' < file`.

在第二种情况下，使用类似`awk -F'\t' '{ h[$2] += 1 } END { for(val in h) print val ": " h[val] }' < file`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:41:40.150

一种使用`perl`假设第二列的值已排序的解决方案，我的意思是，当找到 value 时`2`，具有相同值的所有行将是连续的。该脚本保留行，直到它在第二列中找到不同的值，获取计数，打印它们并释放内存，因此无论输入文件有多大都不应产生问题：

内容`script.pl`：

```
use warnings;
use strict;

my (%lines, $count);

while ( <> ) { 

    ## Remove last '\n'.
    chomp;

    ## Split line in spaces.
    my @f = split;

    ## Assume as malformed line if it hasn't four fields and omit it.
    next unless @f == 4;

    ## Save lines in a hash until found a different value in second column.
    ## First line is special, because hash will always be empty.
    ## In last line avoid reading next one, otherwise I would lose lines
    ## saved in the hash.
    ## The hash will ony have one key at same time.
    if ( exists $lines{ $f[1] } or $. == 1 ) { 
        push @{ $lines{ $f[1] } }, $_; 
        ++$count;
        next if ! eof;
    }   

    ## At this point, the second field of the file has changed (or is last line), so 
    ## I will print previous lines saved in the hash, remove then and begin saving 
    ## lines with new value.

    ## The value of the second column will be the key of the hash, get it now.
    my ($key) = keys %lines;

    ## Read each line of the hash and print it appending the repeated lines as
    ## last field.
    while ( @{ $lines{ $key } } ) { 
        printf qq[%s\t%d\n], shift @{ $lines{ $key } }, $count;
    }   

    ## Clear hash.
    %lines = (); 

    ## Add current line to hash, initialize counter and repeat all process 
    ## until end of file.
    push @{ $lines{ $f[1] } }, $_; 
    $count = 1;
} 
```

内容`infile`：

```
foobar1  1  xxx   yyy
foobar1  2  xxx   yyy
foobar2  2  xxx   yyy
foobar2  3  xxx   yyy
foobar1  3  xxx   zzz 
```

像这样运行它：

```
perl script.pl infile 
```

具有以下输出：

```
foobar1  1  xxx   yyy   1
foobar1  2  xxx   yyy   2
foobar2  2  xxx   yyy   2
foobar2  3  xxx   yyy   2
foobar1  3  xxx   zzz   2 
```

# c - 内部操作系统

> ID：10464698
> 
> 赞同：3
> 
> 时间：2012-05-05T18:21:40.623
> 
> 标签：c, unix, operating-system, system-calls

我有三个问题让我产生了很多疑问：

1.  如果程序中的一个线程调用`fork()`，新进程是复制所有线程，还是新进程是单线程的？

2.  如果一个线程调用`exec()`，参数中指定的程序是否会`exec()`替换包括所有线程在内的整个进程？

3.  系统调用是抢占式的吗？例如，是否可以在系统调用中间调度进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:27:44.040

对于`exec`, 从`man execve`:

> 除了调用线程之外的所有线程都在`execve()`.

来自`man fork`：

> 子进程是用一个线程创建的——调用`fork()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:37:56.317

Wrt #3：是的，您可以调用直接或间接使另一个线程准备好运行的系统调用。如果该线程具有比当前线程更高的优先级，并且系统设计为在那时安排它，它就可以这样做。

# rally - 有没有办法使用新的查询条件刷新对象下拉列表中的列表？

> ID：10464699
> 
> 赞同：2
> 
> 时间：2012-05-05T18:21:40.673
> 
> 标签：rally

使用对象下拉组件我想更改查询并显示新的项目列表。一旦创建了组件，这可能吗？ [http://developer.rallydev.com/help/object-dropdown](http://developer.rallydev.com/help/object-dropdown)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:55:06.543

最好的方法是销毁下拉菜单并重新创建它。只有少数 AppSDK 1.0 组件可以重新加载自己的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:53:58.043

新 App SDK 2.0 中的 ComboBoxes 可以通过再次调用其底层存储的 load 来刷新（传递新的过滤器、上下文等）

# amazon-ec2 - Redis - 扩展不同的 ec2 区域

> ID：10464700
> 
> 赞同：4
> 
> 时间：2012-05-05T18:21:41.343
> 
> 标签：amazon-ec2, redis, cluster-computing, regions

据我了解，在亚马逊云 (EC2) 中拥有分布在不同区域的节点的 redis 集群在技术上是可行的——因此我将能够在每个区域的机器中获得相同的数据。

但这里有两个我不确定的问题：

1.  它将如何影响redis的速度？正如人们测量的那样（[来自不同 EC2 区域的速度](https://stackoverflow.com/questions/9418662/speed-from-different-ec2-regions)） - 大约有 4 倍的差异。对redis应该意味着什么？
2.  我要花多少钱？或者换句话说 - reddis 在集群中工作时会产生多少服务流量（例如，两个区域中的一个节点）？

我对 redis 没有任何实际经验，但似乎它对我的目的非常有用。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T19:02:08.480

对您来说成本将是带宽和实例小时数的成本。

# iphone - 多个自定义行 UITableView？

> ID：10464712
> 
> 赞同：2
> 
> 时间：2012-05-05T18:22:32.610
> 
> 标签：iphone, ios, uitableview, custom-cell

我一直在搜索，但没有找到与多个自定义行相关的任何有用信息，我需要为我的应用程序创建一个设置 tableView，我需要在其中从 xib 文件加载行，例如：

第 1 行 =>> XIB 1.
第 2 行 =>> XIB 2.
第 3 行 =>> XIB 3.
第 4 行 =>> XIB 4。

我现在的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell=nil;
    //We use CellType1 xib for certain rows
    if(indexPath.row==0){
        static NSString *CellIdentifier = @"ACell";
        cell =(ACell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if(cell==nil){
            NSArray *nib= [[NSBundle mainBundle] loadNibNamed:@"ACell" owner:self options:nil];
            cell = (ACell *)[nib objectAtIndex:0];
        }
        //Custom cell with whatever
        //[cell.customLabelA setText:@"myText"]
    }
    //We use CellType2 xib for other rows
    else{
        static NSString *CellIdentifier = @"BCell";
        cell =(BCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if(cell==nil){
            NSArray *nib= [[NSBundle mainBundle] loadNibNamed:@"BCell" owner:self options:nil];
            cell = (BCell *)[nib objectAtIndex:0];
        }
        //Custom cell with whatever
        //[cell.customLabelB setText:@"myText"]
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T18:37:59.153

首先，您创建一些自定义 UITableViewCell 类（.h 和 .m），与您拥有的 xib 文件一样多：
例如，您可以拥有 CellType1 和 CellType2。
CellType1.h 看起来像

```
#import <UIKit/UIKit.h>
@interface CellType1 : UITableViewCell

@property(nonatomic,strong) IBOutlet UILabel *customLabel;

@end 
```

然后创建 xib 文件，您可以使用默认视图类型，但随后，只需删除自动创建的视图，将其替换为 UITableViewCell，并将类更改为 CellType1。对 CellType2 执行相同的操作。

然后在你的 tableViewController 中，像这样写 cellForRow：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *cell=nil;
//We use CellType1 xib for certain rows
if(indexPath.row==<whatever you want>){
     static NSString *CellIdentifier = @"CellType1";
     cell =(CellType1*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if(cell==nil){
        NSArray *nib= [[NSBundle mainBundle] loadNibNamed:@"CellType1" owner:self options:nil];
        cell = (CellType1 *)[nib objectAtIndex:0];
      }
      //Custom cell with whatever
      [cell.customLabel setText:@"myText"]
}
//We use CellType2 xib for other rows
else{
    static NSString *CellIdentifier = @"CellType2";
    cell =(CellType2*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if(cell==nil){
        NSArray *nib= [[NSBundle mainBundle] loadNibNamed:@"CellType2" owner:self options:nil];
        cell = (CellType2 *)[nib objectAtIndex:0];
      }
      //Custom cell with whatever
      [cell.customLabel setText:@"myText"]
}

return cell;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T18:37:10.150

如果您还不熟悉从 xib 加载自定义单元格，请查看[此处的文档](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW20)。要将其扩展到多个自定义 xib，您可以在单独的 xib 中创建每个表格单元格，给它一个唯一的单元格标识符，将表格视图控制器设置为文件的所有者，并将每个单元格连接到您定义的自定义单元格出口（在docs，他们`tvCell`用作此出口）。然后在您的`-tableView:cellForRowAtIndexPath:`方法中，您可以通过检查您为哪一行提供单元格来加载正确的 xib（或使正确的可重用单元格出列）。例如：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyIdentifier1 = @"MyIdentifier1";
    static NSString *MyIdentifier2 = @"MyIdentifier2";
    static NSString *MyIdentifier3 = @"MyIdentifier3";
    static NSString *MyIdentifier4 = @"MyIdentifier4";

    NSUInteger row = indexPath.row

    UITableViewCell *cell = nil;

    if (row == 0) {
        cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifer1];
        if (nil == cell) {
            [[NSBundle mainBundle] loadNibNamed:@"MyTableCell1" owner:self options:nil];
            cell = self.tvCell;
            self.tvCell = nil;
        }
    }
    else if (row == 1) {
        cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifer2];
        if (nil == cell) {
            [[NSBundle mainBundle] loadNibNamed:@"MyTableCell2" owner:self options:nil];
            cell = self.tvCell;
            self.tvCell = nil;
        }
    }
    else if (row == 2) {
        cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifer3];
        if (nil == cell) {
            [[NSBundle mainBundle] loadNibNamed:@"MyTableCell3" owner:self options:nil];
            cell = self.tvCell;
            self.tvCell = nil;
        }
    }
    else if (row == 4) {
        cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifer4];
        if (nil == cell) {
            [[NSBundle mainBundle] loadNibNamed:@"MyTableCell4" owner:self options:nil];
            cell = self.tvCell;
            self.tvCell = nil;
        }
    }
    // etc.

    // Do any other custom set up for your cell

    return cell;

} 
```

# javascript - WebSockets握手不起作用

> ID：10464714
> 
> 赞同：0
> 
> 时间：2012-05-05T18:22:36.800
> 
> 标签：javascript, vb.net, websocket

我试图在 JavaScript WebSocket 和用 VisualBasic .Net 编写的 TCP 服务器/客户端应用程序之间建立连接。我的问题是握手失败。我确实收到了来自本地网站的握手请求，但它不接受我的回复。

JavaScript 文件的代码：

```
<script type="text/javascript">
        var ws;
        function connect() {
            if("WebSocket" in window) {
                debugger;
                ws = new WebSocket("ws://192.168.193.178:1925");

                ws.onopen = function() {
                    alert("Connection established");
                };
                ws.onmessage = function(evt) {
                    var received_msg = evt.data;
                    alert("Message is received: " + received_msg);
                };
                ws.onerror = function(evt) {
                    alert("Error");
                    var received_msg = evt.data;
                    alert("Error: " + received_msg);
                };
                ws.onclose = function() {
                    // websocket is closed.
                    alert("Connection closed");
                };

                //ws.send("Test");
                //ws.close();
            } else {
                alert("WebSocket NOT supported by your Browser!");
            }
        }
        function disconnect() {
            ws.close();
        }
        function send(message) {
            ws.send(message);
            alert("Sent: " + message);
        }

    </script> 
```

VB.Net 代码输出：

```
Received:
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: 192.168.193.178:1925
Origin: http://127.0.0.1:8020
Sec-WebSocket-Key: eGzO0afUD5jCeUdzdoxwjw==
Sec-WebSocket-Version: 13

Sent:
HTTP/1.1 101 Web Socket Protocol Handshake\r\n
Upgrade: WebSocket\r\n
Connection: Upgrade\r\n
Sec-WebSocket-Origin: null\r\n
Sec-WebSocket-Accept: NzU3M2IwYzk0ZWFmYjg4MzMyZWI1ODhhZWI4NWUyZDE1YWU2YzhlNA==\r\n
\r\n 
```

我只是无法让 WebSocket 接受握手，我希望任何人都可以帮助我。也许哈希生成包含错误？

**编辑：**

我现在得到了正确的 Sec-WebSocket-Accept String (dXOwyU6vuIMy61iK64Xi0VrmyOQ=)，无论如何 WebSocket 似乎没有处理握手响应。我尝试使用 Chrome 开发人员工具对其进行调试，但我没有从中获得有用的信息。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:02:13.527

一件事立即突出。服务器响应中的 Sec-WebSocket-Accept 值比正确值长得多。事实上，该 Key 的正确值应该是“dXOwyU6vuIMy61iK64Xi0VrmyOQ=”。我的猜测是您正在对 SHA1 结果的*字符串表示形式进行 base-64 编码。*应该对 SHA1 结果的*字节表示进行编码。*

# matlab - 在 Matlab 中使用 spconvert 时强制指定大小

> ID：10464715
> 
> 赞同：2
> 
> 时间：2012-05-05T18:22:44.420
> 
> 标签：matlab, sparse-matrix

我正在使用以下命令在 MATLAB 中加载稀疏矩阵：

```
A = spconvert(load('mymatrix.txt')); 
```

我知道我的矩阵的维度是 1222 x 1222，但矩阵加载为 1220 x 1221。我知道 MATLAB 不可能推断出我的矩阵的实际大小，当它被稀疏保存时。

使 A 大小合适的一种可能解决方案是在 mymatrix.txt 中包含一行内容为“1222 1222 0”。但是我有数百个矩阵，我不想在所有矩阵中都这样做。

如何让 MATLAB 将矩阵的大小更改为 1222 x 1222？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:00:17.273

我找到了以下问题的解决方案，它简单而简短，但没有我希望的那么优雅：

```
A = spconvert(load('mymatrix.txt'));
if size(A,1) ~= pSize || size(A,2) ~= pSize
    A(pSize,pSize) = 0;
end 
```

其中 pSize 是矩阵的首选大小。所以我加载矩阵，如果尺寸不是我想要的，我在右下角插入一个 0 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T16:12:29.473

我遇到了同样的问题，这是我遇到的解决方案：

```
nRows = 1222;
nCols = 1222;
A = spconvert(load('mymatrix.txt'));

[i,j,s] = find(A);
A = sparse(i,j,s,nRows,nCols); 
```

[这是对此处](http://www.mathworks.co.uk/help/matlab/ref/sparse.html)示例之一的改编。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T18:41:24.120

抱歉，这篇文章更像是一个澄清问题，而不是一个答案。

首先，是“load”命令还是“spconvert”的问题？就像，如果你这样做

```
B = load('mymatrix.txt') 
```

B是您期望的尺寸吗？如果没有，那么您可以使用“textread”或“fread”编写一个函数，在输入“spconvert”之前创建正确大小的矩阵。

其次，你说你正在加载几个矩阵。您正在加载的所有矩阵中的问题是否一致。例如，矩阵最终是否总是比您预期的少两行一列？

# html - div 展开以可视方式填充垂直空间

> ID：10464716
> 
> 赞同：20
> 
> 时间：2012-05-05T18:22:53.900
> 
> 标签：html, css

我有一个包含页眉、内容和页脚的页面。页眉和页脚的高度是固定的，我希望内容调整它的高度，以便它动态地适应页眉和页脚。我打算在我的内容中放置一个背景图像，因此它实际上填充了其余未占用的垂直空间是至关重要的。

我使用[Sticky Footer](http://ryanfait.com/sticky-footer/)方法来确保页脚保持在页面底部。然而，这不会使内容跨越剩余空间的整个高度。

我尝试了几种涉及我添加的解决方案，`height:100%, height:auto; position:relative`但没有奏效。

```
html,
body {
  height: 100%;
  background-color: yellow;
}
header {
  width: 100%;
  height: 150px;
  background-color: blue;
}
header nav ul li {
  display: inline;
  padding: 0 30px 0 0;
  float: left;
}
#wrapper {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 0 -30px 0;
  /* the bottom margin is the negative value of the footer's height */
  position: relative;
}
#wrapper #content {
  background-color: pink;
  width: 400px;
  height: 100%;
  margin: 0 0 -30px 100px;
  padding: 25px 30px 25px 30px;
}
footer {
  margin: -30px 0 0 0;
  width: 100%;
  height: 30px;
  background-color: green;
}
```

```
<div id="wrapper">

  <header>
    <div id="logo"></div>

    <nav>
      <ul>
        <li>About</li>
        <li>Menu</li>
        <li>Specials</li>
      </ul>
    </nav>
  </header>

  <div id="content">
    content
    <br>goes
    <br>here
  </div>

</div>

<footer>footer</footer>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-23T17:18:40.643

关于 height:100% 的技巧是它要求所有父容器也设置它们的高度。这是一个html示例

```
<html>
  <body>
    <div id="container">
    </div>
  </body>
</html> 
```

为了使高度设置为 100% 的容器 div 动态扩展到窗口的高度，您需要确保 body 和 html 元素的高度也设置为 100%。所以...

```
html
{
    height: 100%;
}
body
{
    height: 100%;
}
#container
{
    height: 100%;
} 
```

会给你一个容器，可以扩展以适应你的窗口。然后，如果您需要在此窗口上方浮动的页脚或页眉，您可以使用 z 索引来实现。这是我发现的唯一动态填充垂直高度的解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T19:00:00.667

尝试将您的 css 更改为：

```
html,
body {
  height: 100%;
  background-color: yellow;
}
header {
  width: 100%;
  height: 150px;
  background-color: blue;
}
header nav ul li {
  display: inline;
  padding: 0 30px 0 0;
  float: left;
}
#wrapper {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 0 -30px 0;
  /* the bottom margin is the negative value of the footer's height */
  position: relative;
}
#content {
  background-color: pink;
  width: 400px;
  padding: 25px 30px 25px 30px;
  position: absolute;
  bottom: 30px;
  top: 150px;
  margin-left: 100px;
}
footer {
  margin: -30px 0 0 0;
  width: 100%;
  height: 30px;
  background-color: green;
}
```

```
<div id="wrapper">

  <header>
    <div id="logo"></div>

    <nav>
      <ul>
        <li>About</li>
        <li>Menu</li>
        <li>Specials</li>
      </ul>
    </nav>
  </header>

  <div id="content">
    content
    <br>goes
    <br>here
  </div>

</div>

<footer>footer</footer>
```

您可能不想设置宽度、填充、边距等。的包装。此外，通过绝对定位，您可以将内容的底部和顶部拉到您想要的位置。

这[就是你所追求](http://jsfiddle.net/qC8z5/)的，我想。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-19T23:50:50.987

我提供了一个稍微更通用的解决方案，因此对于阅读此答案并想知道如何将其应用于他们的网站的其他人来说更有用。

假设你有三个 div：

```
<div id='header'></div>
<div id='contents'></div>
<div id='footer'></div> 
```

其中#header 是固定的并且可能具有可变高度，#contents 应该消耗所有剩余的垂直空间并且#footer 是固定的并且可能具有可变高度您可以这样做：

```
/* Note you could add a container div instead of using the body */
body {
  display: flex;
  flex-direction: column;
}
#header {
  flex: none;
}
#contents {
  flex: 1;
  height: 100%;
  overflow-y: scroll;
}
#footer {
  flex: none;
} 
```

请注意，这将允许内容垂直滚动以显示其全部内容。

[您可以在此处](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)阅读有关 display:flex的更多信息。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-20T07:49:33.127

我也花了几个小时试图弄清楚这一点，最终有了一个没有黑客攻击的强大解决方案。但是，它需要 CSS3，这需要现代浏览器来支持它。所以，如果这个约束对你有用，那么我有一个真正适合你的解决方案。

[http://jsfiddle.net/u9xh4z74/](http://jsfiddle.net/u9xh4z74/) 如果需要证明，请将此代码复制到您自己的文件中，因为 JSFiddle 实际上不会将弹性框正确地呈现为嵌入式代码。

基本上，您需要 - 将目标容器设置为 100% 高度，您似乎已经知道了 - 您设置的父容器 display: flex 和 flex-direction: vertical （您将在 JSFiddle 中看到我还包括做同样事情但需要跨浏览器支持的替代样式） - 您可以让页眉和页脚成为它们的自然高度，并且不需要在这方面指定任何内容 - 在要填充剩余空间的容器中，设置flex: 1\. 你准备好了！您会看到它完全按照您在语义上的意图工作。同样在 JSFiddle 中，我包含了 overflow: auto 来演示如果您的文本比屏幕可以处理的更多，滚动将按照您的意愿进行。

```
<div style="display:flex; flex-direction:vertical;">
    ...header(s)...
    <div style="flex: 1; overflow: auto;">
         As much content as you want.
    </div>
    ...footer(s)...
</div> 
```

作为旁注，我选择尝试使用 display: table 来做同样的事情。它也可以正常工作，只是溢出的内容不像您期望的那样工作，而是溢出的内容只是将容器扩展为内容的大小，我很确定这不是您想要的。享受！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-26T13:44:58.517

使用 display:table 和 display:table-row 为普通 div 设置 height:0 ，为应该填充垂直空间的 div 设置 height:auto 。插入一个具有 {height:100%; 的 div 如果容器高度不应超出其预设高度，则溢出-y：auto} 到垂直填充中。看看 display:table 的威力！

```
<div style="height:300px;">
  <div style="display:table; height:100%; width:100%;border: 1px solid blue;">
    <div style="display: table-row; height:0; padding:2px; background-color:yellow;">
      Hello          
    </div>
    <div style="display: table-row; height:auto; padding:2px; background-color:green;">
      <div style="height:100%; overflow: auto;">
        <div style="height: 500px"></div>
      </div>
    </div>
    <div style="display: table-row; height:0; padding:2px; background-color:yellow;">
      Gbai
    </div>
  </div>
</div> 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-05-05T18:29:36.210

没有 100% 高度与 100% 连续高度完全一致。你不能这样解决。同样，同时使用高度 + 边距 + 填充的组合。这是直通地狱的方式。我建议您查看正在解决此页面布局的教程。

# graphics - 如何在二维码中查找计时信息？

> ID：10464718
> 
> 赞同：4
> 
> 时间：2012-05-05T18:23:27.087
> 
> 标签：graphics, qr-code, image-recognition

假设我有一个二维码，我将如何查找时间信息（从而确定代码的版本和大小）？

当我检测到代码时，我会寻找三个黑色方块，即对齐信息。然后我可以对图片进行变形，使图片是直立的，所有边缘和模块都具有相同的大小和正确的方向。下一步是查找时序信息，这样我就可以开始解码代码了。但是我怎么找到它？我不知道当时一行中有多少个模块，因此我不知道确切的位置。我将如何检测时序线？

请注意，我不能使用库来解码图片信息。这个想法是识别图片信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:09:48.787

有很多方法可以估计模块大小。

[ZXing](http://code.google.com/p/zxing/)是根据 Finder 的 1-1-3-1-1 环模式估计的。

如果您相当准确地知道它们的位置，那么在发现者之间实际上有一个固定的时间模式。只需遍历像素并计算白色和黑色区域的平均长度即可。

ZXing 的估计有点粗略，但效果很好。在某些情况下，它会产生错误的估计，而走计时器模式可能会消除这种估计。但是 ZXing 的常见用例是图像的实时流，一个不正确的估计没什么大不了的。

# ruby - Ruby 中的多线程编程

> ID：10464721
> 
> 赞同：2
> 
> 时间：2012-05-05T18:23:31.860
> 
> 标签：ruby, multithreading, parallel-processing

我正在用 Ruby 开发一个多线程程序，只是想确定一个简单的问题。

例如，我有一个名为 的类`School`，另外两个类是`Boy`和`Girl`。

在`School`我有一个哈希，可以跟踪所有男孩和女孩的出勤率。我让每个男孩/女孩成为一个线程`School`（这样他们就可以单独进行活动）

我希望所有男孩和女孩线程都可以看到并更改出勤哈希。（比如如果一个女孩来学校，在哈希中检查她的名字，当她离开时，在哈希中删除她的名字）

我知道我可以使用监视器来执行线程锁定，但我不熟悉脚本语言，所以我不确定所有线程如何看到哈希变量并修改它们。（有点像 C/JAVA 中的静态）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:51:50.043

像这样的东西：

```
threads = []
hash = {g:0,n:0}
m = Mutex.new

threads << Thread.new(optional_pass_by_value) do |value|
  #do whatever
  #modify hash
  m.synchronize {hash[:g] += 1} #By using synchronize you get an atomic behavior
  #Only one thread will be able to access and modify this hash at one time.
end

threads.each {|t| t.join} 
```

# javascript - OO（面向对象）javascript

> ID：10464722
> 
> 赞同：0
> 
> 时间：2012-05-05T18:23:36.213
> 
> 标签：javascript, oop

我在 JavaScript 方面有相当多的经验，对于我正在进行的这个新项目（cms 表示具有盈利概念的博客），我想我会加强它并以 MVC 方式编写 JavaScript。我一直在使用一些骨干和下划线，但它并没有在精神上点击。无论如何，我已经编写了一些代码来处理一些事件/效果，但它不起作用。如果有人能帮我解决问题，我将不胜感激。

```
// Semi Perfect grade 0 JS - Golden age
//partial View Objects | Events
var pshare_dock = {
    actor: $("#share_dock"),
    drag: function () {
        this.actor.draggable();
    }
}
pshare_dock.expand = function () {
    this.actor.dblclick(function () {
        $(this).toggleClass("share_close");
    });
}
var pmenu = {
    hover: function () {
        $("ul.drop li.drop").hover(function () {
            $(this).find('ul').fadeIn(1);
        }, function () {
            $(this).find('ul').hide();
        })
    },
    navigate: function () {
        $("a.ajx").click(function (e) {
            var link;
            var container = $("#content_pane");
            e.preventDefault();
            link = $(this).attr("href") + "#content_pane";
            container.load(link);
        })
    }
}
var pcontent_pane = {}
var ppost = {}
var pdatabase_entry = {}
//Views
var Homepage = function () {
        this.share_dock = function () {
            new pshare_dock();
        }
        this.menu = function () {
            new pmenu();
        }
        this.content_pane = function () {
            new pcontent_pane();
        }
        this.posts = function () {
            new ppost();
        }
    }
    //Controller
var GoldenAgeRouter = Backbone.Router.extend({
    routes: {
        "!/": "defaultRoute",
        "*actions": "defaultRoute"
    },
    defaultRoute: function (actions) {
        var homeView = function () {
                new Homepage();
            }
    }
})
$(document).ready(function () {
    var Golden_age = function () {
            new Homepage();
        }
}) 
```

问题本质上是这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:27:44.010

You're wrapping your instantiations in an anonymous function but not invoking them:

```
var Golden_age = new Homepage(); // Invoked.

var Golden_age = function(){ new Homepage(); } // Stored function, not invoked. 
```

# python - TastyPie 和 Django ORM - 它们的耦合度如何？

> ID：10464724
> 
> 赞同：0
> 
> 时间：2012-05-05T18:24:07.173
> 
> 标签：python, django, api, tastypie

是否可以在 Django“TastyPie”中以不直接将其与“单一”Django ORM 模型绑定的方式开发 API？即调用 /api/xyz/ 将从“a”、“b”和“c”中检索数据到单个 JSON 输出中。如果是这样，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:43:05.983

与 django-piston 相比，tastepie 与 ORM 的耦合更紧密，但是您可以在 nicepie 资源中定义一些方法来指定如何处理创建、读取、更新、删除：[http ://readthedocs.org/docs/django- sweetpie/en/latest/resources.html?highlight=put_list#obj-get](http://readthedocs.org/docs/django-tastypie/en/latest/resources.html?highlight=put_list#obj-get)
而且您不会设置查询集元字段。

另一方面，django-piston 有一种更直接的初始方法来让您定义这些方法中的一个或多个。资源仍然可以绑定到模型，以便为您提供开箱即用的 REST，但它更预先向您展示为自定义处理定义的方法。

美味派在其过程和功能上更加强大，但它使这个特定的功能集变得不那么明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:31:18.560

Tastypie 有`ModelResource`和`Resource`。前者与模型相关联（您可以按照 jdi 的建议覆盖它的许多方法），而我认为后者是您需要的。`Resource` [这里](http://readthedocs.org/docs/django-tastypie/en/latest/non_orm_data_sources.html)的例子。该示例适用于 Riak 数据源，在您的情况下，它将是 django 模型的组合。

# c# - 将字节数组从客户端发送到服务器？

> ID：10464726
> 
> 赞同：2
> 
> 时间：2012-05-05T18:24:13.220
> 
> 标签：c#, .net-2.0, client-server, tcpclient, tcplistener

我有一个基于 tcp 的客户端-服务器应用程序。我能够发送和接收字符串，但不知道如何发送字节数组。

我正在使用以下函数将字符串从客户端发送到服务器：

```
static void Send(string msg)
{
    try
    {
        StreamWriter writer = new StreamWriter(client.GetStream());
        writer.WriteLine(msg);
        writer.Flush();
    }
    catch
    {
    }
} 
```

**通信示例**

*客户端发送一个字符串：*

```
Send("CONNECTED| 84.56.32.14") 
```

*服务器收到一个字符串：*

```
void clientConnection_ReceivedEvent(Connection client, String Message)
{
    string[] cut = Message.Split('|');
    switch (cut[0])
    {
        case "CONNECTED":
            Invoke(new _AddClient(AddClient), client, null);
            break;
        case "STATUS":
            Invoke(new _Status(Status), client, cut[1]);
            break;
    }
} 
```

我需要一些帮助来修改上面的函数，以便发送和接收除了字符串之外*的字节数组。*我想拨打这样的电话：

```
Send("CONNECTED | 15.21.21.32", myByteArray); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T18:41:27.793

只需使用 Stream - 这里不需要作家。基本发送很简单：

```
stream.Write(data, 0, data.Length); 
```

但是，您可能需要考虑“框架”，即它如何知道每个太阳消息的开始和结束位置。对于字符串，这通常是特殊字符（可能是新行）——但这在原始二进制文件中很少可能发生。一种常见的方法是以预定义的方式（例如，可能是网络字节顺序固定的 4 字节无符号整数）处理带有 f 个字节的消息。

读取：再次使用 Stream Read 方法，但要了解您始终不需要检查返回值；仅仅因为你说“最多读取 20 个字节”并不意味着你得到了那么多，即使会有更多 - 例如，你可以读取 3、3、3、11 个字节（不太可能，但你明白我的意思）。例如，要准确读取 20 个字节：

```
var buffer = new byte[...];
int count = 20, read, offset = 0;
while(count > 0 && ((read = source.Read(buffer, offset, count)) > 0) {
    offset += read;
    count -= read;
}
if(count != 0) throw new EndOfStreamException(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:09:04.850

由于您似乎对网络不熟悉，您可能想要使用 WCF 或其他框架。我刚刚写了一篇关于我自己的框架的文章：http: [//blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net](http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net)

您需要按照 Mark 的建议为数据包使用标头，因为 TCP 使用流而不是数据包。即发送和接收操作之间没有1-1 的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-22T20:14:29.563

这是我遇到的同样的问题。我只对客户端进行编码，服务器接受字节数组作为正确的数据。消息以 ASCII STX 字符开头，前面是一堆除 STX 和 ETX 字符外的任何值的字节。消息以 ETX ASCII CHARACTER 结尾。在 CI 中可以在我的睡眠中做到这一点，但我在工作中学习 C#。我不明白为什么当单字节 ASCII 代码也能正常工作时，你会发送成串的双字节 unicode。浪费双倍带宽。

# php - How are input fields values passed to php

> ID：10464731
> 
> 赞同：1
> 
> 时间：2012-05-05T18:24:51.763
> 
> 标签：php, html

I have a database and a login form and want to write a php script that validates the login.

How are the types' data access and used?

For example, how do I access the input entered from the user in these elements.

```
<p><input type="text" name="login" value="" placeholder="Username or Email"></p>
<p><input type="password" name="password" value="" placeholder="Password"></p> 
```

I want to use the login and password for validation. How can these be passed to a php script?

EDIT: I set the action to

```
<form method="post" action="loginVerification.php"> 
```

and when I enter the fields and submit the values, my OS wants to save the loginVerification.php. When I save it I dont get the echo.

I have this in the php file

```
<?php
 echo $_POST['login'];
 echo $_POST['password']; 
```

How do I write the logs to a file in php, or is there a way to do runtime verification for php?

Edit 2:

```
 <div class="container">
<section class="login">
  <h1>Login</h1>
  <form method="post" action="loginVerification.php">
    <p><input type="text" name="login" value="" placeholder="Username or Email"></p>
    <p><input type="password" name="password" value="" placeholder="Password"></p>
    <p class="remember_me">
      <label>
        <input type="checkbox" name="remember_me" id="remember_me">
        Remember me on this computer
      </label>
    </p>
    <p class="submit"><input type="submit" name="commit" value="Login"></p>
  </form>
</section>

<section class="login-help">
  <p>Lost password? <a href="index.html">Click here to reset it</a>.</p>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:26:39.957

If your form method is `post`, these variables would be accessible through `$_POST['login']` and `$_POST['password']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:28:08.520

These fields should be part of a `<form>` element, such as the following:

```
<form method="POST" action="process.php">
  <!-- input elements here -->
  <input type="submit" />
</form> 
```

Submitting the form will pass your data to your `action` location. In this case, to a script on the server called "process.php". Assuming your `method` is `POST`, from within process.php you could access your input fields via the `$_POST` global array:

```
<?php

  // Show value of <input type="text" name="foo" />
  echo $_POST['foo'];

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T18:41:29.680

有两种方法可以从 HTML 表单中获取数据：

*   **邮政**

HTML 表单标签：

```
<form method="post" action="some.php">
<input type="text" name="username" size="20"/>
<input type="password" name="password" size="20"/>
</form> 
```

要访问 some.php 中的字段值，您可以使用`$_POST`超级全局。例如：`$_POST['username']`

*   **得到**

HTML 表单标签：

```
<form method="get" action="some.php">
<input type="text" name="username" size="20"/>
<input type="password" name="password" size="20"/>
</form> 
```

要访问 some.php 中的字段值，您可以使用`$_GET`超级全局。例如：`$_GET['username']`

现在要创建一个登录系统，您需要创建一个用户名和密码数据库：

```
username | password
----------------------
abc      | passcode!@#
xyz      | passco#$%^^ 
```

对于登录，您可以使用会话保持用户跨多个页面（Web 应用程序）登录。在登录脚本中，通过查看表来检查用户是否有效，并使用`$_SESSION`超级全局变量为会话变量设置一些值。您可以在 Web 应用程序的任何页面中访问该变量，因为需要在每个页面中使用以下命令启动会话：

```
session_start() 
```

功能。在每个页面上，必须检查会话变量的值，如果它是有效的，则显示页面，否则将用户引导到登录页面。

在这里您可以找到有关会话的信息：http: [//php.net/manual/en/ref.session.php](http://php.net/manual/en/ref.session.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T18:27:18.870

Form input values are passed via POST *typically*. From your PHP, you access those values using the `$_POST` superglobal like this:

```
$login = $_POST['login'];
$password = $_POST['password']; 
```

The array key in the $_POST array is what you set **name** to in your HTML element like `name="login"`.

When using this value, be aware that it comes straight from your user and **should not** be trusted. If you don't filter it prior to using it with database operations, you run the very real risk of becoming a victim of SQL injection leading to your site being compromised.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T18:27:47.100

in your php file try this

```
echo $_REQUEST['login'];
echo $_REQUEST['password']; 
```

# regex - Remove single line breaks, keep "empty" lines

> ID：10464735
> 
> 赞同：8
> 
> 时间：2012-05-05T18:25:43.230
> 
> 标签：regex, autohotkey

Say I have text like the following text selected with the cursor:

```
This is a test. 
This 
is a test.

This is a test. 
This is a 
test. 
```

I would like to transform it into:

```
This is a test. This is a test

This is a test. This is a test 
```

In other words, I would like to replace single line breaks by spaces, leaving empty lines alone.

I thought something like the following would work:

```
RemoveSingleLineBreaks()
{
  ClipSaved := ClipboardAll
  Clipboard =
  send ^c
  Clipboard := RegExReplace(Clipboard, "([^(\R)])(\R)([^(\R)])", "$1$3")    
  send ^v
  Clipboard := ClipSaved
  ClipSaved = 
} 
```

But it doesn't. If I apply it to the text above, it yields:

```
This is a test. This is a test.
This is a test. This is a test. 
```

which also removed the "empty line" in the middle. This is not what I want.

**To clarify:** By an **empty line** I mean any line with "white" characters (e.g. tabs or white spaces)

Any thoughts how to do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T11:27:01.237

```
RegExReplace(Clipboard, "([^\r\n])\R(?=[^\r\n])", "$1$2") 
```

假设新行标记在末尾包含 a`CR`或 a （例如, , , ），这将去除单个换行符。它不将空格视为空。`LF``CR``LF``CR+LF``LF+CR`

您的主要问题是使用`\R`：

> 字符类中的 \R 仅仅是字母“R” ^([[来源]](http://www.autohotkey.com/docs/misc/RegEx-QuickRef.htm))

解决方法是直接使用`CR`and`LF`字符。

* * *

> 澄清一下：空行是指任何带有“白色”字符的行（例如制表符或空格）

```
RegExReplace(Clipboard, "(\S.*?)\R(?=.*?\S)", "$1") 
```

这与上面的相同，但将空格视为空。它之所以有效，是因为它以非贪婪方式接受除换行符 ( `*?`) 之外的所有字符，直到换行符前后的第一个非空白字符，因为`.`默认情况下不匹配换行符。

前瞻用于避免“吃掉”（匹配）下一个字符，该字符可能会在单字符行上中断。请注意，由于它不匹配，因此它不会被替换，我们可以将它排除在替换字符串之外。因为 PCRE 不支持可变长度的lookbehinds，所以不能使用lookbehinds，所以这里使用普通的捕获组和反向引用。

* * *

> 我想用空格替换单个换行符，只留下空行。

如果你想用空格替换换行符，这样更合适：

```
RegExReplace(Clipboard, "(\S.*?)\R(?=.*?\S)", "$1 ") 
```

这将用空格替换单个换行符。

* * *

如果你想使用lookbehinds和lookaheads：

去除单个换行符：

```
RegExReplace(Clipboard, "(?<=[^\r\n\t ][^\r\n])\R(?=[^\r\n][^\r\n\t ])", "") 
```

用空格替换单个换行符：

```
RegExReplace(Clipboard, "(?<=[^\r\n\t ][^\r\n])\R(?=[^\r\n][^\r\n\t ])", " ") 
```

出于某种原因，`\S`它似乎不适用于后瞻和前瞻。至少，不是我的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:12:51.003

```
#SingleInstance force

#v::
    Send ^c
    ClipWait
    ClipSaved = %clipboard%

    Loop
    {
        StringReplace, ClipSaved, ClipSaved, `r`n`r`n, `r`n, UseErrorLevel
        if ErrorLevel = 0  ; No more replacements needed.
            break
    }
    Clipboard := ClipSaved
    return 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T20:50:41.760

```
Clipboard := RegExReplace(Clipboard, "(\S+)\R", "$1 ") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T07:00:20.173

我相信这会奏效：

```
text=
(
This is a test. 
This 
is a test.

This is a test. 
This is a 
test.
)
MsgBox %    RegExReplace(text,"\S\K\v(?=\S)",A_Space) 
```

# python - Interpolation on DataFrame in pandas

> ID：10464738
> 
> 赞同：30
> 
> 时间：2012-05-05T18:25:59.063
> 
> 标签：python, pandas

I have a DataFrame, say a volatility surface with index as time and column as strike. How do I do two dimensional interpolation? I can `reindex` but how do i deal with `NaN`? I know we can `fillna(method='pad')` but it is not even linear interpolation. Is there a way we can plug in our own method to do interpolation?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-05T19:16:19.813

您可以使用`DataFrame.interpolate`来获得线性插值。

```
In : df = pandas.DataFrame(numpy.random.randn(5,3), index=['a','c','d','e','g'])

In : df
Out:
          0         1         2
a -1.987879 -2.028572  0.024493
c  2.092605 -1.429537  0.204811
d  0.767215  1.077814  0.565666
e -1.027733  1.330702 -0.490780
g -1.632493  0.938456  0.492695

In : df2 = df.reindex(['a','b','c','d','e','f','g'])

In : df2
Out:
          0         1         2
a -1.987879 -2.028572  0.024493
b       NaN       NaN       NaN
c  2.092605 -1.429537  0.204811
d  0.767215  1.077814  0.565666
e -1.027733  1.330702 -0.490780
f       NaN       NaN       NaN
g -1.632493  0.938456  0.492695

In : df2.interpolate()
Out:
          0         1         2
a -1.987879 -2.028572  0.024493
b  0.052363 -1.729055  0.114652
c  2.092605 -1.429537  0.204811
d  0.767215  1.077814  0.565666
e -1.027733  1.330702 -0.490780
f -1.330113  1.134579  0.000958
g -1.632493  0.938456  0.492695 
```

对于更复杂的事情，您需要推出自己的函数，该函数将处理一个`Series`对象并根据需要填充`NaN`值并返回另一个`Series`对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-09T13:48:34.420

旧线程，但我认为我会与 2d 外推/插值分享我的解决方案，尊重索引值，这也可以按需工作。代码有点奇怪，所以让我知道是否有更好的解决方案：

```
import pandas
from   numpy import nan
import numpy

dataGrid = pandas.DataFrame({1: {1: 1, 3: 2},
                             2: {1: 3, 3: 4}})

def getExtrapolatedInterpolatedValue(x, y):
    global dataGrid
    if x not in dataGrid.index:
        dataGrid.ix[x] = nan
        dataGrid = dataGrid.sort()
        dataGrid = dataGrid.interpolate(method='index', axis=0).ffill(axis=0).bfill(axis=0)

    if y not in dataGrid.columns.values:
        dataGrid = dataGrid.reindex(columns=numpy.append(dataGrid.columns.values, y))
        dataGrid = dataGrid.sort_index(axis=1)
        dataGrid = dataGrid.interpolate(method='index', axis=1).ffill(axis=1).bfill(axis=1)

    return dataGrid[y][x]

print getExtrapolatedInterpolatedValue(2, 1.4)
>>2.3 
```

# java - Reload jsp and lose request.getParameter("...") on servlet

> ID：10464739
> 
> 赞同：1
> 
> 时间：2012-05-05T18:25:59.097
> 
> 标签：java, jsp, servlets, request, httpsession

I have 2 jsp-page. In first jsp-page I use combobox who choosing subject, several radio button for action. On servlet this page I get `request.getParameter("subjectID")`.

Better If I show servlets and jsp

```
<form  action="/TutorWebApp/controller" method="POST" name="editTestForm">
                <p>
                    Choose subject 
                    <select name='subject'>
                        <c:forEach items="${subjects}" var="subject" >                  
                            <option value="${subject.key}">
                                ${subject.value.getName()}
                            </option>                    
                        </c:forEach>
                    </select>  
                </p>                
                <input type="radio" name="command" value="add_test">
                Add test <br />
                <input type="radio" name="command" value="add_subject">
                Add subject <br />                
                <input type="submit" value="OK"/>                 
            </form> 
```

In this page I choose subject from combobox. And choose "Add test". After I go to servlet where

```
class AddTestCommand implements Command {

    private static final String PARAM_TEST_NAME = "testName";
    private static final String PARAM_SUBJECT = "subject";

    @Override
    public String execute(HttpServletRequest request) throws ServletException, IOException {
        String page = " ";
        String message = " ";        

        String testName = request.getParameter(PARAM_TEST_NAME);

        if (testName != null && (!"".equals(testName))) {

            HttpSession session = request.getSession(true);
            Integer userID = (Integer) session.getAttribute("userID");

            Integer subjectId = 
                    Integer.valueOf(request.getParameter(PARAM_SUBJECT));

            if(AddTestLogic.addTest(userID, subjectId, testName)){
               message = "Success";
            } else{
               message = "This test already exist"; 
            }        

            request.setAttribute("result", message);
        }       

        page = ResourceBuilder.getPropertyManager(PropertyEnum.JSP_PAGE).
                getProperty("path.page.addtest");
        return page;
    }
} 
```

There I can get value of subject as `request.getParameter("subject");` near with testName before if(){} And next step - go to next jsp

```
<form  action="/TutorWebApp/controller" method="POST" name="addTestForm">   
            <input type="hidden" name="command" value="add_test" />            
            Name of new test:
            <input type="text" name="testName" value=""/>            
            <input type="submit" value="Add test"/>            
</form> 
```

An after input data in jsp I go to the same servlet again. But I lose value request.getParameter("subject").

I try to use HttpSession but on first page I send Map. And get with request just choosen subjectID from Map.

I don't know how resolve this problem. Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:36:32.870

您可以使用隐藏字段为下一个请求保留请求参数。请求参数可通过`${param}`EL 中的地图获得。所以，这应该这样做：

```
<input type="hidden" name="subject" value="${fn:escapeXml(param.subject)}" /> 
```

请注意，我使用[JSTL](https://stackoverflow.com/tags/jstl/info) `fn:escapeXml()`来转义 HTML 实体；这将防止可能的[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)。

# python - How to construct logical expression for advanced slicing

> ID：10464740
> 
> 赞同：1
> 
> 时间：2012-05-05T18:26:03.717
> 
> 标签：python, numpy

I am trying to figure out a cleaner way of doing the following:

```
import numpy

a = np.array([1,2,4,5,1,4,2,1])

cut = a == (1 or 2)
print cut

[ True False False False  True False False  True] 
```

The above is of course a simplified example. The expression `(1 or 2)` can be large or complicated. As a start, I would like to generalize this thusly:

```
cutexp = (1 or 2)
cut = a == cutexp 
```

Maybe, *cutexp* can be turned into a function or something but I'm not sure where to start looking.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:49:57.183

您也可以尝试[numpy.in1d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html)。说

```
>>> a = np.array([1,2,4,5,1,4,2,1])
>>> b = np.array([1,2]) # Your test array
>>> np.in1d(a,b)
array([ True,  True, False, False,  True, False,  True,  True], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T18:45:03.357

```
>>> (a == 2) | (a == 1)
array([ True,  True, False, False,  True, False,  True,  True], dtype=bool) 
```

# c# - Is there a better way to set an alarm clock than this?

> ID：10464743
> 
> 赞同：0
> 
> 时间：2012-05-05T18:26:13.317
> 
> 标签：c#, .net

I am trying to set a function to run at a specific time in a day in c#. This code seems to work but I am not so confident about it. Is there any better way around this?

this is my code

```
String thetimeis = DateTime.Now.ToString("HH:mm:ss");
DateTime alarmtimeStart = Convert.ToDateTime("12:00:00");
DateTime alarmtimeStop = Convert.ToDateTime("12:02:00");

if (Convert.ToDateTime(thetimeis) > alarmtimeStart && Convert.ToDateTime(thetimeis) < alarmtimeStop)
{
  MessageBox.Show(thetimeis);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:34:16.553

如果您正在寻找更强大的调度作业解决方案，我建议您使用[Quartz](http://quartznet.sourceforge.net/)。对于琐碎的工作，它可能有点矫枉过正，但我​​发现它易于使用并且比推出我自己的解决方案要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T18:30:34.713

是的，有一个更好的方法 - 只需分别比较小时、分钟和秒。

```
DateTime now = DateTime.Now;
DateTime alarmtimeStart = Convert.ToDateTime("12:00:00");
DateTime alarmtimeStop = Convert.ToDateTime("12:02:00");

if (now.Hour >= alarmtimeStart.Hour && now.Minute >= alarmtimeStart.Minute && now.Second >= alarmtimeStart.Second && now.Hour <= alarmtimeStop.Hour && now.Minute <= alarmtimeStop.Minute && now.Second <= alarmtimeStop.Second)
{
    MessageBox.Show(thetimeis);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T18:40:05.737

你不能直接比较日期的 TimeOfDay 属性吗？

**编辑：**

```
TimeSpan thetimeis = DateTime.Now.TimeOfDay;
TimeSpan alarmtimeStart = new TimeSpan(12, 0, 0);
TimeSpan alarmtimeStop = new TimeSpan(12, 2, 0);

if (thetimeis >= alarmtimeStart && thetimeis < alarmtimeStop)
{
   MessageBox.Show(thetimeis);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T18:38:48.433

我有点困惑为什么你需要这么多的转换，以下不是更好吗？

```
if (DateTime.Now > alarmtimeStart && DateTime.Now < alarmtimeStop) 
{ 
  MessageBox.Show(thetimeis); 
} 
```

# c++ - 安全多线程计数器增量

> ID：10464758
> 
> 赞同：1
> 
> 时间：2012-05-05T18:27:44.633
> 
> 标签：c++, multithreading, algorithm, boost, boost-thread

例如，我有一些由多个线程同时计算的工作。

出于演示目的，该工作在 while 循环内执行。在单次迭代中，每个线程执行自己的部分工作，在下一次迭代开始之前，计数器应该增加一次。

我的问题是计数器由每个线程更新。

由于这似乎是一件相对简单的事情，我认为有一个“最佳实践”或通用方法来解决它？

这是一些示例代码来说明问题并帮助讨论。（我正在使用提升线程）

```
class someTask {
public:
    int mCounter; //initialized to 0
    int mTotal; //initialized to i.e. 100000
    boost::mutex cntmutex;                
    int getCount()
    {
            boost::mutex::scoped_lock lock( cntmutex );
            return mCount;
    }
    void process( int thread_id, int numThreads )
    {
        while ( getCount() < mTotal )
        {
            // The main task is performed here and is divided 
            // into sub-tasks based on the thread_id and numThreads

                            // Wait for all thread to get to this point

            cntmutex.lock();
            mCounter++;  // < ---- how to ensure this is only updated once?
            cntmutex.unlock();
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T10:06:40.383

我在这里看到的主要问题是你的推理水平太低了。因此，我将提出一个基于新的 C++11 线程 API 的替代解决方案。

主要思想是你基本上有一个调度 -> 调度 -> 执行 -> 收集 -> 循环例程。在您的示例中，您尝试在`do`非常困难的阶段内对所有这些进行推理。使用相反的方法可以更容易地表达您的模式。

首先，我们将要完成的工作隔离在自己的例程中：

```
void process_thread(size_t id, size_t numThreads) {
    // do something
} 
```

现在，我们可以轻松调用此例程：

```
#include <future>
#include <thread>
#include <vector>

void process(size_t const total, size_t const numThreads) {
    for (size_t count = 0; count != total; ++count) {
         std::vector< std::future<void> > results;

         // Create all threads, launch the work!
         for (size_t id = 0; id != numThreads; ++id) {
             results.push_back(std::async(process_thread, id, numThreads));
         }

         // The destruction of `std::future`
         // requires waiting for the task to complete (*)
    }
} 
```

(*) 见[这个问题](https://stackoverflow.com/questions/9733432/the-behavior-of-stdasync-with-stdlaunchasync-policy)。

你可以在这里阅读更多关于`std::async` [这里的内容，这里](http://en.cppreference.com/w/cpp/thread/async)[提供了](http://www.justsoftwaresolutions.co.uk/threading/multithreading-in-c++0x-part-8-futures-and-promises.html)一个简短的介绍（它们在发布政策的效果上似乎有些矛盾，哦，好吧）。在这里让实现决定是否创建操作系统线程更简单：它可以根据可用内核的数量进行调整。

请注意如何通过*删除*共享状态来简化代码。因为线程不共享任何内容，我们不再需要显式地担心同步！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T18:49:25.950

您使用互斥锁保护了计数器，确保没有两个线程可以同时访问计数器。您的另一个选择是使用[Boost::atomic](http://www.chaoticmind.net/~hcb/projects/boost.atomic/doc/atomic/usage_examples.html)、[c++11 原子操作](http://en.cppreference.com/w/cpp/atomic)或特定于平台的原子操作。

但是，您的代码似乎`mCounter`无需持有互斥锁即可访问：

```
 while ( mCounter < mTotal ) 
```

那是个问题。您需要持有互斥锁才能访问共享状态。

你可能更喜欢使用这个成语：

1.  获取锁。

2.  做测试和其他事情来决定我们是否需要做工作。

3.  调整会计以反映我们决定做的工作。

4.  释放锁。做工作。获取锁。

5.  调整会计以反映我们所做的工作。

6.  除非我们完全完成，否则循环回到第 2 步。

7.  释放锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:53:36.617

您需要使用消息传递解决方案。TBB 或 PPL 等库更容易实现这一点。PPL 免费包含在 Visual Studio 2010 及更高版本中，TBB 可以根据英特尔的 FOSS 许可免费下载。

```
concurrent_queue<unsigned int> done;
std::vector<Work> work; 
// fill work here
parallel_for(0, work.size(), [&](unsigned int i) {
    processWorkItem(work[i]);
    done.push(i);
}); 
```

它是无锁的，您可以让外部线程监视`done`变量以查看已完成的数量和内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T00:06:39.567

我想不同意大卫关于通过多次锁定获取来完成这项工作的观点。

`Mutexes`代价高昂并且有更多线程竞争 a `mutex`，它基本上会退回到系统调用，这会导致用户空间到内核空间上下文切换以及调用者线程（/s）被迫休眠：因此有很多开销。

因此，如果您使用的是多处理器系统，我强烈建议您使用自旋锁 [1]。

所以我要做的是：

=> 摆脱作用域锁获取来检查条件。

=> 让你的计数器不稳定以支持上面

=> 在 while 循环中，在获取锁后再次进行条件检查。

```
class someTask {
 public:
 volatile int mCounter; //initialized to 0       : Make your counter Volatile
 int mTotal; //initialized to i.e. 100000
 boost::mutex cntmutex;                

 void process( int thread_id, int numThreads )
 {
    while ( mCounter < mTotal ) //compare without acquiring lock
    {
        // The main task is performed here and is divided 
        // into sub-tasks based on the thread_id and numThreads

        cntmutex.lock();
        //Now compare again to make sure that the condition still holds
        //This would save all those acquisitions and lock release we did just to 
        //check whther the condition was true.
        if(mCounter < mTotal)
        {
             mCounter++;  
        }

        cntmutex.unlock();
    }
 }
}; 
```

[1]http://www.alexonlinux.com/pthread-mutex-vs-pthread-spinlock

# java - 连接到 Camel-SEDA 队列

> ID：10464762
> 
> 赞同：1
> 
> 时间：2012-05-05T18:28:18.987
> 
> 标签：java, apache-camel

我无法连接到具有 SEDA 队列的骆驼路线。在服务器端，我有以下配置：

```
<camel:route>
            <camel:from uri="seda:input"/>
            <camel:log  message =">>>>>data is : ${body}"/>
            <camel:inOnly uri="activemq:queue:TESTQUEUE"/>
        </camel:route> 
```

我正在尝试从这样的独立客户端访问这条路线：

```
public static void main(String[] args) {

        CamelContext context = new DefaultCamelContext();
        producer = context.createProducerTemplate();
            producer.sendBody("seda:input","Hey");

} 
```

但是我的制作人无法连接到 seda 队列。无法进入我的路线队列。无法在我的 bean 属性中添加 camelContext。我收到“bean 类的无效属性 'camelContext'”。如果我将正文发送到 SEDA 队列，则消息将发送到那里，但不会发送到路由的下一个元素

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T03:21:57.000

正如 Petter 建议的那样，您的客户端需要连接到定义 SEDA 路由的同一个 Camel 上下文。在您的示例中，您似乎正在创建一个新的 DefaultCamelContext() 并尝试将消息发送到定义的路由在另一种情况下。

通常，我在 Spring XML 中定义 Camel 上下文，然后将上下文注入到任何需要它的类中......

```
<camelContext id="camelContext" xmlns="http://camel.apache.org/schema/spring">
    <routeBuilder ref="myRouter"/>
</camelContext>

<bean id="myClient" class="com.mycompany.MyClient">
    <property name="camelContext" ref="camelContext"/>
</bean> 
```

然后，您的客户端代码只需要调用以下...

```
getCamelContext().createProducerTemplate().sendBody("seda:input","Hey"); 
```

也就是说，如果您的客户端代码不在同一个 JVM 中或无法获得同一个 CamelContext 的句柄，那么您的选择是使用 JMS、REST、HTTP（或任何支持远程客户端接口的[骆驼组件](http://camel.apache.org/components.html)）...代替或围绕 SEDA 端点。

例如，您可以使用这样的 HTTP 端点（通过[camel-jetty](http://camel.apache.org/jetty.html)）包装对 SEDA 队列的访问......

```
from("jetty:http://localhost:9001/input").to("seda:input"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T20:58:39.600

Camel 中的 SEDA 组件被定义为异步内部通道。如果您需要将消息处理解耦为多个线程并具有更灵活的实现，这将非常有用。

在您的示例中，您有一个 activemq 端点。从概念上讲，它与 SEDA 组件几乎相同，但功能更多。我建议您使用 activemq 或其他协议来与 Camel 通信的客户端。

也就是说，如果您的客户端与 Camel 在同一个 Java 应用程序中运行，并且您的客户端可以获取 Camel 上下文（我通常建议反对这种设计），您可以使用 ProducerTemplates 向 SEDA 组件发送消息。查看 VM 组件，它与 SEDA 几乎相同，但可以在同一个 VM 中使用，而不是在同一个 Camel Context 中使用。[ProducerTemplate 的工作原理。](http://camel.apache.org/producertemplate.html)

# haskell - 自定义 Ord 实例挂在列表上

> ID：10464764
> 
> 赞同：3
> 
> 时间：2012-05-05T18:28:37.160
> 
> 标签：haskell, typeclass

```
import Data.Function (on)
import Data.List (sort)

data Monomial = Monomial 
    { m_coeff :: Coefficient 
    , m_powers :: [(Variable, Power)]
    }
    deriving ()

instance Ord Monomial where
    (>=) = on (>=) m_powers

instance Eq Monomial where
    (==) = on (==) m_powers 
```

这是我的代码的摘录，缩减到主要大小。让我们尝试比较：

```
*Main> (Monomial 1 [("x",2)]) > (Monomial (-1) [])
/* Computation hangs here */
*Main> (Monomial 1 [("x",2)]) < (Monomial (-1) [])
/* Computation hangs here */ 
```

附带说明一下，有趣的是，如果我`s/(>=)/(>)/g`在实例声明中替换，它不会挂在第一对上，但仍然会挂在第二对上：

```
*Main> (Monomial 1 [("x",2)]) > (Monomial (-1) [])
True
*Main> (Monomial 1 [("x",2)]) < (Monomial (-1) [])
/* Computation hangs here */ 
```

`Eq instance`尽管标准规定了to be`$compare$`或的最小声明`$(>=)$`。

这里可能有什么问题？列表上的 (>=) 似乎工作得很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T18:39:56.593

**简短的回答：**
您需要提供`(<=)`或提供`compare`完整的定义`Ord`，而不是`(>=)`。

**更长的解释：**
Haskell 中的类型类通常会根据其他方法实现某些方法的默认实现。然后，您可以选择要实施的那些。例如，`Eq`看起来像这样：

```
class Eq a where
  (==), (/=) :: a -> a -> Bool

  x /= y = not (x == y)
  x == y = not (x /= y) 
```

在这里，您必须实现`(==)`or `(/=)`，否则尝试使用其中任何一个都会导致无限循环。您需要提供的方法通常在文档中列为*最小完整定义。*

[文档中列出的](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aOrd)`Ord`实例的最小完整定义是或。由于您只提供了，因此您还没有提供完整的定义，因此某些方法会循环。您可以通过例如更改您的实例来提供来修复它。`(<=)``compare``(>=)``compare`

```
instance Ord Monomial where
  compare = compare `on` m_powers 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T18:46:34.837

让我们看一下默认实例`Ord`：

```
class  (Eq a) => Ord a  where 
    compare              :: a -> a -> Ordering
    (<), (<=), (>), (>=) :: a -> a -> Bool
    max, min             :: a -> a -> a

    compare x y = if x == y then EQ
                  -- NB: must be '<=' not '<' to validate the
                  -- above claim about the minimal things that
                  -- can be defined for an instance of Ord:
                  else if x <= y then LT
                  else GT

    x <  y = case compare x y of { LT -> True;  _ -> False }
    x <= y = case compare x y of { GT -> False; _ -> True }
    x >  y = case compare x y of { GT -> True;  _ -> False }
    x >= y = case compare x y of { LT -> False; _ -> True }

        -- These two default methods use '<=' rather than 'compare'
        -- because the latter is often more expensive
    max x y = if x <= y then y else x
    min x y = if x <= y then x else y 
```

所以，如果你只提供`>=`和`==`如上所述，那么你就有麻烦了，因为：

*   `>`定义为`compare`

**但**

*   `compare`定义为`<=`
*   `<=`定义为`compare`

所以你有一个无限循环！

最小定义必须定义`<=`or `compare`，而不是 '>=`。

# java - 位图的 OnClick

> ID：10464769
> 
> 赞同：0
> 
> 时间：2012-05-05T18:29:03.697
> 
> 标签：java, android, bitmap, onclick

您可以对您在代码中创建的位图图片进行 onClick，还是需要将我的“僵尸”设置为 texview 等的背景才能执行点击操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:36:40.723

你需要`ImageButton`这样的

```
<ImageButton
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="left"
        android:onClick="functionToCall"
        android:src="@drawable/to_top_button"
            /> 
```

然后定义函数

```
public void functionToCall(View v) {
    ...
} 
```

# javascript - 为什么 SVG 元素的 SVG 属性有时显示为可访问，有时却不能访问？

> ID：10464770
> 
> 赞同：2
> 
> 时间：2012-05-05T18:29:15.213
> 
> 标签：javascript, svg, d3.js

```
self.popover = self.canvas.append("svg:rect")
  .attr("id", popoverId)
  ...

self.popover.getBBox()
TypeError: Object [object SVGRectElement] has no method 'getBBox' 
```

但是，如果我在单击时将另一个 SVG 元素作为“this”传递给函数，我就可以访问所有 SVG 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:33:56.707

这个 d3 方法可以解决问题：

```
self.popover.node().getBBox() 
```

# sql - 为什么在使用 CASE 表达式时出现语法错误 Msg 156？

> ID：10464775
> 
> 赞同：3
> 
> 时间：2012-05-05T18:29:49.353
> 
> 标签：sql, sql-server, case

我正在尝试运行这个简单的查询，但它甚至没有解析说

> Msg 156, Level 15, State 1, Line 2 关键字“between”附近的语法不正确。

查询是：

```
select  
    case DMProject.dbo.TypeFourTraining.Column2 
    when Column2 between 181 and 360 then '181-360' 
    when Column2 between 0 and 180 then '0-180' 
END as score 
from DMProject.dbo.TypeFourTraining 
```

这同样不适用于`Column2 < 360`语法..

我已经从 msdn 和其他一些网站通过 Internet 进行了搜索，但我发现我的语法似乎是有效的，然后要么有一个我需要知道的细节，要么有一些我看不到的东西 :(

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:34:52.737

您不能混合 CASE 表达式的*`simple`*和*`searched`*类型。删除`DMProject.dbo.TypeFourTraining.Column2`CASE 后指定的字段名称。

### 查询的正确语法：

```
SELECT  CASE 
            WHEN Column2 between 181    AND 360 THEN '181-360' 
            WHEN Column2 between 0      AND 180 THEN '0-180' 
        END as score 
FROM    DMProject.dbo.TypeFourTraining 
```

## 两种类型的 CASE 表达式：

CASE 表达式有两种类型，即`Simple`和`Searched`。您不能将*Simple*和*Searched*组合在同一个表达式中。

### 简单案例：

```
CASE input
    WHEN 1 THEN 'a'
    WHEN 2 THEN 'b'
    WHEN 3 THEN 'c'
    ELSE ''
END 
```

### 用简单的例子搜索CASE：

```
CASE 
    WHEN input = 1 THEN 'a'
    WHEN input = 2 THEN 'b'
    WHEN input = 3 THEN 'c'
    ELSE ''
END 
```

### 用稍微复杂的例子搜索 CASE：

这涉及多个列。您可以在每个 WHEN 语句中添加多个列。

```
CASE 
    WHEN input = 1 AND second_column = 2 THEN 'a'
    WHEN input = 2 AND third_column  = 3 THEN 'b'
    WHEN input = 3 AND (second_column = 4 OR third_column = 6) THEN 'c'
    ELSE ''
END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T18:34:09.200

您正在混淆案例陈述的两种形式。尝试这个：

```
select (case when Column2 between 181 and 360 then '181-360' 
             when Column2 between 0 and 180 then '0-180' 
        END) as score 
from DMProject.dbo.TypeFourTraining 
```

另一种形式将用于单例值：

```
select  case DMProject.dbo.TypeFourTraining.Column2 
            when 1 then '1' 
            when 2 then '2'
            etc. etc. etc. 
            END as score 
from DMProject.dbo.TypeFourTraining 
```

# ios - 如何将第 3 方 iOS SDK 集成到 Forge/Trigger 应用程序中？

> ID：10464776
> 
> 赞同：2
> 
> 时间：2012-05-05T18:30:01.187
> 
> 标签：ios, sdk, trigger.io

我正在尝试将 TestFlight iOS SDK 集成到我的 Forge 应用程序中。似乎找不到任何明确的方法来做到这一点。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:50:53.703

Trigger 还没有原生插件 API 来允许在您的应用程序中包含任意原生代码。

我们的重点一直是保持开发周期的快速和简单：由于原生插件必然比编写 HTML/CSS/JS 复杂得多，因此我们没有优先支持它们。

原生插件肯定在我们的路线图上，但目前我们更愿意将 3rd 方 SDK 作为可选模块提供给我们所有的用户。如果您有特殊需求，请通过 support@trigger.io 联系。

# android - 如何从 Android Seekbar 中删除用户输入？

> ID：10464779
> 
> 赞同：0
> 
> 时间：2012-05-05T18:30:23.773
> 
> 标签：android, android-layout, user-interface, android-widget, seekbar

当我使用 seekBar.setEnabled(false) 时，它会使搜索栏变灰。即使禁用它，有什么方法可以保持条的原始颜色和亮度？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:31:33.403

我不知道你为什么这样做，但你可以执行以下操作：

```
public class MySeekBar extends SeekBar{

    private boolean myEnabled;

    public void setMyEnabled(boolean myEnabled) {
        this.myEnabled = myEnabled;
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        if(!myEnabled) {
            return true;
        }

        return super.dispatchTouchEvent(event);
    }
... 
```

然后使用 setMyEnabled(false) 禁用触摸输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T07:24:49.363

我刚刚用这个解决了我同样的问题：

```
 normalSB.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        int originalProgress;

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

            if (fromUser == true) {
                seekBar.setProgress(originalProgress);
            }

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            originalProgress = seekBar.getProgress();
        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
        }
    }); 
```

希望它可以帮助你：D

# android - Android 应用程序无法在设备上启动

> ID：10464785
> 
> 赞同：0
> 
> 时间：2012-05-05T18:31:05.133
> 
> 标签：android, apk, android-activity

我使用 Eclipse 开发了一个 Android 应用程序，它可以在 Android 虚拟设备上完美运行，或者在我的智能手机上运行它时使用 Eclipse + USB 调试模式启用。

但是，当我使用驻留在 sd 卡上的签名 apk 文件在手机上安装应用程序并尝试启动它时，我收到“找不到活动 - lsp.workshop”错误，并且应用程序无法启动（lsp.workshop）。 Workshop 是应用程序包的名称）。

AndroidManifest.xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="lsp.workshop"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.INTERNET" /> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" > 
        <activity
            android:name=".TwitterLogin"
            android:label="@string/app_name" android:launchMode="singleTask">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
                <data android:scheme="twitter" />

                <data android:host="log" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:38:19.560

当您正常启动应用程序时，附加了调试器的模拟器和 android 的行为可能会有所不同。时间不同（影响多线程和竞争条件），其他事情也可能受到影响。

但为了确定：

您是否在 AndroidManifest.xml 文件中列出了活动？

拼写真的正确吗？

如果这些都不是问题，那么您能否展示一些代码（您如何开始活动？有目的？）也许还有清单文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:52:34.863

使用两个意图过滤器而不是一个解决了这个问题：

```
<intent-filter>
     <action android:name="android.intent.action.MAIN" />
     <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
<intent-filter>
     <action android:name="android.intent.action.VIEW" />
     <category android:name="android.intent.category.DEFAULT" />
     <category android:name="android.intent.category.BROWSABLE" />
     <data android:scheme="twitter" android:host="log" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:13:18.127

导出 apk 时，一定要命名为 -something.apk ，即在导出应用程序时将“.apk”放在末尾（y）

# autotools - 如何使 AC_CACHE_CHECK 成为关键？

> ID：10464790
> 
> 赞同：0
> 
> 时间：2012-05-05T18:31:51.110
> 
> 标签：autotools, configure, autoconf

我在配置期间执行了一些检查，我使用 AC_CACHE_CHECK 宏通过 autoconf 进行了设置。有些检查很关键，所以如果它们不通过，我希望配置失败。我怎样才能做到这一点？

谢谢，史蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:30:26.433

不明白你的意思。如果结果未缓存，是否要中止？或者，如果结果没有被缓存，您是否想尝试分配一个值但如果不成功则中止？对于后者，只需执行以下操作：

```
# Replace 3rd argument with commands to assign the cache variable
# See autoconf documentation for how to name the cache variable
AC_CACHE_CHECK([myvariable], [sss_cv_type_myvar], [sss_cv_type_myvar=yes])
myvariable=$sss_cv_type_myvar
AS_IF([test x"$myvariable" != xyes],[AC_MSG_ERROR(
    [myvariable not yes])]) 
```

如果你想仅仅因为变量没有被缓存而中止，你可以`exit`在`AC_CACHE_CHECK`. 该选项中的命令用于分配缓存变量，并且不应该有副作用。退出配置脚本绝对是一个副作用，但这可能是您想要的行为。

# java - 如何将图像加载到 java 应用程序资产文件夹

> ID：10464791
> 
> 赞同：0
> 
> 时间：2012-05-05T18:31:54.990
> 
> 标签：java, java-web-start, nifty-gui

我将使用 java web start制作一个带有 nifty-gui [[1]的 java 应用程序](http://sourceforge.net/projects/nifty-gui/)

当用户点击上传图片时，会显示一个文件选择器（FileOpenService）

之后，图像应该在图像控件中可见。

不幸的是，nifty-gui 只能使用资产中的图像。

如何将此图像下载到资产中？也许有一种方法可以使用 FileContent 类中的数据修改实际图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:45:10.443

这是解决方案，在讨论后创建[[1]](http://jmonkeyengine.org/groups/general/forum/topic/how-to-display-image-from-local-computer-in-nifty-gui-with-java-web-start/#post-174482)

```
assetManager.registerLoader(AWTLoader.class, "jpg");
assetManager.registerLocator("/", FileLocator.class);
            image(new ImageBuilder() {{
                filename("/home/marek/photo2.jpg");
            }}); 
```

# ios - 文本渲染优化

> ID：10464792
> 
> 赞同：0
> 
> 时间：2012-05-05T18:31:56.270
> 
> 标签：ios, cocoa-touch, optimization, uikit, core-graphics

我在 UIView 中显示了文本，该文本再次位于 UIScrollView 中。
文本的字体大小/大小应根据其与屏幕上某个点的距离来更改其大小。

屏幕上有许多这样的项目需要以不同的大小重新渲染相同的文本。

我该如何优化它以减少文本渲染的瓶颈？

# ruby-on-rails - 在 Ruby on Rails 中覆盖 setter 方法的正确方法是什么？

> ID：10464793
> 
> 赞同：194
> 
> 时间：2012-05-05T18:32:21.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, overriding, setter

我正在使用 Ruby on Rails 3.2.2，我想知道以下是否是覆盖我的类属性的 setter 方法的“正确”/“正确”/“肯定”方式。

```
attr_accessible :attribute_name

def attribute_name=(value)
  ... # Some custom operation.

  self[:attribute_name] = value
end 
```

上面的代码似乎按预期工作。但是，*我想知道，通过使用上面的代码，将来我是否会遇到问题，或者至少，Ruby on Rails“应该期待”/“可能发生”什么问题*。如果这不是覆盖 setter 方法的正确方法，那么正确的方法是什么？

* * *

*注意*：如果我使用代码

```
attr_accessible :attribute_name

def attribute_name=(value)
  ... # Some custom operation.

  self.attribute_name = value
end 
```

我收到以下错误：

```
SystemStackError (stack level too deep):
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:70 
```

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-05-05T19:26:08.320

**==================================================== =========================** **更新：2017 年 7 月 19 日**

现在[Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#class-ActiveRecord::Base-label-Overwriting+default+accessors)也建议这样使用`super`：

```
class Model < ActiveRecord::Base

  def attribute_name=(value)
    # custom actions
    ###
    super(value)
  end

end 
```

**==================================================== ==========================**

**原始答案**

如果您想在通过模型访问时覆盖表列的 setter 方法，这就是这样做的方法。

```
class Model < ActiveRecord::Base
  attr_accessible :attribute_name

  def attribute_name=(value)
    # custom actions
    ###
    write_attribute(:attribute_name, value)
    # this is same as self[:attribute_name] = value
  end

end 
```

请参阅Rails 文档中的[覆盖默认访问器。](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#class-ActiveRecord::Base-label-Overwriting+default+accessors)

因此，您的第一种方法是在 Ruby on Rails 模型中覆盖列设置器的正确方法。Rails 已经提供了这些访问器来访问表中的列作为模型的属性。这就是我们所说的 ActiveRecord ORM 映射。

还要记住，**`attr_accessible`模型顶部的 与访问器无关。**它具有完全不同的功能（请参阅[此问题](https://stackoverflow.com/questions/3136420/difference-between-attr-accessor-and-attr-accessible)）

但是在纯 Ruby 中，如果你已经为一个类定义了访问器并且想要覆盖 setter，你必须像这样使用实例变量：

```
class Person
  attr_accessor :name
end

class NewPerson < Person
  def name=(value)
    # do something
    @name = value
  end
end 
```

一旦你知道做什么，这将更容易理解`attr_accessor`。代码`attr_accessor :name`相当于这两种方法（getter和setter）

```
def name # getter
  @name
end

def name=(value) #  setter
  @name = value
end 
```

您的第二种方法也会失败，因为当您在该方法中调用相同的方法时，它会导致无限循环`attribute_name=`。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-02-05T16:09:31.773

使用`super`关键字：

```
def attribute_name=(value)
  super(value.some_custom_encode)
end 
```

相反，要覆盖阅读器：

```
def attribute_name
  super.some_custom_decode
end 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-09-10T11:50:30.267

**在轨道 4**

假设您的表格中有**年龄**属性

```
def age=(dob)   
    now = Time.now.utc.to_date
    age = now.year - dob.year - ((now.month > dob.month || (now.month == dob.month && now.day >= dob.day)) ? 0 : 1)
    super(age) #must add this otherwise you need to add this thing and place the value which you want to save. 
  end 
```

注意：对于 rails 4 中的新成员，您不需要在模型中指定**attr_accessible**。相反，您必须使用**permit**方法在控制器级别将您的属性列入白名单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T01:26:38.333

我发现（至少对于 ActiveRecord 关系集合）以下模式有效：

```
has_many :specialties

def specialty_ids=(values)
  super values.uniq.first(3)
end 
```

（这会抓取传递的数组中的前 3 个非重复条目。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-22T15:23:20.807

用于覆盖 setter attr_writer `attr_writer`:attribute_name

```
 def attribute_name=(value)
    # manipulate value
    # then send result to the default setter
    super(result)
  end 
```

# binary-tree - 从嵌套列表创建 .graphml 树图

> ID：10464799
> 
> 赞同：0
> 
> 时间：2012-05-05T18:33:01.767
> 
> 标签：binary-tree, diagram, graphviz, dot, graphml

我正在拼命寻找一种解决方案来创建一个漂亮的二叉树图。不完整的节点具有可区分的边缘（如果有的话）至关重要。

我无法使用 .dot 产生所需的结果，因为我不知道如何对节点进行排序。我不介意，将文件导入 yEd 或其他编辑器。但是，我希望能够用很少的语法非常轻松地生成数据。

我的目标是一种工具，它可以从极简数据（例如（A（B1 C1 C2）B2））生成例如.graphml 格式，其中A 是根标签，B1 是根的左孩子和另外两个孩子。与 .dot 或 .tgf 类似的复杂性当然是可以容忍的，但我想避免自己编写编译器来生成 .graphml。

任何想法表示赞赏。

马库斯·R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:44:08.040

您提供的数据或多或少是一个[s-expression](http://en.wikipedia.org/wiki/Sexp)。鉴于这是您要摄取的格式，pyparsing（一个 Python 模块）有一个[s-expression parser](http://pyparsing.wikispaces.com/file/view/sexpParser.py)。

您还需要一个图形库。我的大部分工作都使用[networkx 。](http://networkx.lanl.gov/)使用 pyparsing s-expression 解析器和 networkx，以下代码获取数据并创建树作为有向图：

```
import networkx as nx

def build(g, X):
    if isinstance(X, list):
        parent = X[0]
        g.add_node(parent)
        for branch in X[1:]:
            child = build(g, branch)
            g.add_edge(parent, child)

        return parent

    if isinstance(X, basestring):
        g.add_node(X)
        return X

#-- The sexp parser is constructed by the code example at...
#-- http://http://pyparsing.wikispaces.com/file/view/sexpParser.py
sexpr = sexp.parseString("(A (B1 C1 C2) B2)", parseAll = True)

#-- Get the parsing results as a list of component lists.
nested = sexpr.asList( )

#-- Construct an empty digraph.
dig = nx.DiGraph( )

#-- build the tree
for component in nested:
    build(dig, component)

#-- Write out the tree as a graphml file.
nx.write_graphml(dig, 'tree.graphml', prettyprint = True) 
```

为了测试这一点，我还将树编写为 .dot 文件并使用 graphviz 创建以下图像：

![（树的graphviz输出）](../Images/7d010820237a88e1d78f71a399184d4c.png)

networkx 是一个很好的图形库，如果需要，您可以编写额外的代码遍历树以使用额外的元数据标记边缘或节点。

# servlets - 如何禁用servlet中的后退按钮？

> ID：10464800
> 
> 赞同：0
> 
> 时间：2012-05-05T18:33:12.330
> 
> 标签：servlets, back-button

我创建了一个 Web 应用程序并将其部署在 tomcat7 中。这个应用程序的工作方式如下：用户通过适当的身份验证登录，然后显示一个测试页面（html），用户选择答案并提交测试。提交后调用另一个 servlet，向用户显示分数。

这里的问题是，如果用户返回（通过浏览器后退按钮）并再次提交测试，则在获得分数后，分数正在被更改。我应该怎么做才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:17:25.717

通常的技巧（某些框架为您提供）是，当生成表单时，生成一个令牌，将其存储在用户的会话中，以及表单的隐藏字段中。提交表单后，您将收到的令牌与会话中的令牌进行比较。如果它们匹配，则从会话中删除令牌并继续提交表单。

如果用户返回并重新提交表单，会话中将不再有任何令牌，并且您将显示错误消息而不是处理表单提交。

另一种方法是对表单处理进行编码，以使提交具有幂等性。例如，您可以检查问题是否已经被用户回答，而忽略第二个答案，而不是盲目地增加分数。

# javascript - JavaScript - DIV 的可见文本

> ID：10464801
> 
> 赞同：15
> 
> 时间：2012-05-05T18:33:17.853
> 
> 标签：javascript, overflow

```
----------------------------------------------------
| This is my text inside a div and I want the overf|low of the text to be cut
---------------------------------------------------- 
```

请注意，我希望删除溢出，因此 CSS ellipsis 属性对我不起作用。所以基本上，我希望上面的文字看起来像这样：

```
----------------------------------------------------
| This is my text inside a div and I want the overf|
---------------------------------------------------- 
```

纯 JavaScript 怎么可能？

**编辑**

我需要一个 JavaScript 函数来裁剪文本，因为我需要计算可见文本的字符数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T18:38:16.860

好的，我没有看到问题的附录。虽然我之前说过，使用 JavaScript 和非固定宽度的字体是不可能做到这一点的……实际上*是*可能的！

您可以将每个单独的字符包装在 a 中`<span>`，并找到第一个`<span>`超出父级范围的字符。就像是：

```
function countVisibleCharacters(element) {
    var text = element.firstChild.nodeValue;
    var r = 0;

    element.removeChild(element.firstChild);

    for(var i = 0; i < text.length; i++) {
        var newNode = document.createElement('span');
        newNode.appendChild(document.createTextNode(text.charAt(i)));
        element.appendChild(newNode);

        if(newNode.offsetLeft < element.offsetWidth) {
            r++;
        }
    }

    return r;
} 
```

[这是一个演示。](http://jsfiddle.net/minitech/sJ2wG/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T19:25:12.903

您可以使用 Javascript 执行此操作。这是一个计算元素中可见字符数的函数，与应用于元素的外部 css 表和内联样式无关。我只在 Chrome 中测试过，但我认为它是跨浏览器友好的：

```
function count_visible(el){
    var padding, em, numc;
    var text = el.firstChild.data;
    var max = el.clientWidth;

    var tmp = document.createElement('span');
    var node = document.createTextNode();
    tmp.appendChild(node);
    document.body.appendChild(tmp);

    if(getComputedStyle)
        tmp.style.cssText = getComputedStyle(el, null).cssText;
    else if(el.currentStyle)
        tmp.style.cssText = el.currentStyle.cssText;

    tmp.style.position = 'absolute';
    tmp.style.overflow = 'visible';
    tmp.style.width = 'auto';

    // Estimate number of characters that can fit.
    padding = tmp.style.padding;
    tmp.style.padding = '0';
    tmp.innerHTML = 'M';
    el.parentNode.appendChild(tmp);
    em = tmp.clientWidth;
    tmp.style.padding = padding;      
    numc = Math.floor(max/em);

    var width = tmp.clientWidth;

    // Only one of the following loops will iterate more than one time
    // Depending on if we overestimated or underestimated.

    // Add characters until we reach overflow width
    while(width < max && numc <= text.length){
        node.nodeValue = text.substring(0, ++numc);
        width = tmp.clientWidth;
    }

    // Remove characters until we no longer have overflow
    while(width > max && numc){
        node.nodeValue = text.substring(0, --numc);
        width = tmp.clientWidth;
    }

    // Remove temporary div
    document.body.removeChild(tmp);

    return numc;
} 
```

[**JSFiddle 示例**](http://jsfiddle.net/Paulpro/kjXVg/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T18:40:06.983

试试这个，如果你可以的话，它需要一个固定的宽度：http: [//jsfiddle.net/timrpeterson/qvZKw/20/](http://jsfiddle.net/timrpeterson/qvZKw/20/)

HTML：

```
<div class="col">This is my text inside a div and I want the overf|low of the text to be cut</div> 
```

CSS：

```
.col { 
   width:120px; 
    overflow: hidden;
   white-space:nowrap;

 }​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-05T18:42:21.180

您正试图将 CSS 问题强加到 JavaScript 中。把锤子收起来，拿出螺丝刀。 [http://en.wiktionary.org/wiki/if_all_you_have_is_a_hammer,_everything_looks_like_a_nail](http://en.wiktionary.org/wiki/if_all_you_have_is_a_hammer,_everything_looks_like_a_nail)

如果您退后一步，解决字符数的答案可能无关紧要。最后一个字符可能只是部分可见，并且考虑到字体大小的变化、W 和 i 之间的宽度差异等，字符数会有很大的不同。在真正的问题中，可能 div 的宽度比字符数更重要。

如果您仍然坚持找出可见的字符，请在文本周围的 div 内放置一个跨度，使用此问题的其他答案中提供的 css，然后在 JavaScript 中一次从字符串中修剪一个字符，直到跨度的宽度小于 div 的宽度。然后每次对大段落执行此操作时，请注意浏览器会冻结几秒钟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T18:34:17.977

`.col { width:40px; overflow: hidden; white-space:nowrap; }`

空白：nowrap；当内容有空格时需要。

无论哪种方式，都不会出现单行中的长单词。[http://jsfiddle.net/h6Bhb/](http://jsfiddle.net/h6Bhb/)

# html - 保持溢出：隐藏真的隐藏

> ID：10464803
> 
> 赞同：4
> 
> 时间：2012-05-05T18:33:37.377
> 
> 标签：html, css

如果我有一个样式的 div，`overflow: hidden;`我发现有时键盘操作会导致 div 滚动。而且由于没有滚动条，所以真的没有办法让 div 回到原来的状态。除了指定样式以防止这种情况外，我还应该做什么？

例如，当您`L`使用鼠标（在小提琴中）选择时，然后在按住 shift 的同时按下向下箭头键（即扩展选择）。

[http://jsfiddle.net/PeeHaa/H34mM/](http://jsfiddle.net/PeeHaa/H34mM/)

或者另一种情况是当 div 中有一个 textarea 时：http: [//jsfiddle.net/h6Bhb/1/](http://jsfiddle.net/h6Bhb/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:11:25.643

一个简单的解决方案是在相关元素中禁用文本选择。因此防止使用箭头键选择更多的可能性..

为了防止 tekst 选择你需要`event.preventDefault()`在 mousedown 事件中使用 JS。

对于您在符合现代标准的浏览器中可能看起来像这样的小提琴：

```
// give the div an id
document.getElementById('div').addEventListener('mousedown', function(e) {
    e.preventDefault();
}, false);​ 
```

**编辑**

或者正如@JimThomas 在评论中指出的那样，您可以使用 CSS 禁用文本选择，当然这不像 JS 解决方案那样受到支持。 [如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

我想不出更优雅或更完整（这不能解决您可能遇到的输入问题）解决方案，而且我不确定是否有一个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:19:44.447

将此添加到您的 div CSS：

```
-moz-user-select: -moz-none;
-khtml-user-select: none;
-webkit-user-select: none;
-ms-user-select: none; /* IE10+ */
user-select: none; 
```

在 < IE10 或 Textarea 中不起作用，但我不相信有任何东西会阻止 textarea 场景，除非您禁用 textarea 本身以防止选择。

...或使用 JS 解决方案。

# mysql - VB.NET MySQL 和 FTP 连接

> ID：10464810
> 
> 赞同：-1
> 
> 时间：2012-05-05T18:34:06.770
> 
> 标签：mysql, vb.net, ftp

我正在开发一个必须连接到 MySQL 数据库和 FTP 的 VB.NET 应用程序。如果我在提供给其他人的应用程序中使用它有多安全。例如，如果我让其他人使用这个应用程序，他们是否能够通过拦截数据包或类似的方式找出 MySQL 和 FTP 连接的详细信息？

如果是这种情况，我该如何解决这个问题？此外，我的应用程序的一部分是供用户上传文件的上传器，FTP 是否安全，或者有更好的替代方法吗？如果这有什么不同的话，我的服务器是 Windows Server 08。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:47:09.007

这取决于，但根据[Accessing SQL Server with Explicit Credentials](http://msdn.microsoft.com/en-us/library/aa984237%28v=vs.71%29.aspx)文章，它也适用于 MySql：

> 推荐的方法是将预定的用户名和密码存储在服务器上，然后在运行时读取并添加到连接字符串中。这种技术的一个优点是您的应用程序可以在不同的情况下使用不同的凭据访问数据库，具体取决于它需要在数据库中执行的操作。
> 
> **安全说明** 切勿将凭据作为字符串硬编码到应用程序的程序中。任何可以访问代码文件的人，甚至是编译后的代码，都可以获取凭证。
> 
> **安全说明** 始终为预先确定的用户名授予对资源的最低访问权限。切勿使用“sa”或任何其他管理级别的用户名。始终使用密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:36:00.200

FTP是明文。仅通过数据包嗅探就可以很容易地获取用户名和密码。如果 ftp 应该是安全的，请查看 sftp 或 ftps 解决方案。这些在网络层使用 SSL 类型加密。永远不要将 ftp 服务器用于敏感信息。

MySQL 流量也可以被嗅探，尽管对协议进行逆向工程要困难得多。如果数据必须以安全的方式在客户端和 mysql 之间流动，您可以将 mysql 配置为使用 SSL 证书来加密信息。这将确保安全性达到最高标准。

# php - 通过 PDOStatement 中的多个语句使用 MySQL 用户变量

> ID：10464815
> 
> 赞同：0
> 
> 时间：2012-05-05T18:34:26.003
> 
> 标签：php, mysql, transactions, pdo

我想知道您是否可以在 PDOstatement 中的 mysql 中设置用户变量，然后在同一语句的查询中使用它？我的印象是，如果我使用单独的语句，用户变量会“丢失”，尽管我不确定。每个 PDOStatement-> 执行不同的事务吗？如果是，如果通过 PDO 使用事务，那么在一个语句中设置的用户变量是否可以在后面的一个语句中使用？

基本上我正在尝试编写一个 php 脚本，它将日期和时间作为参数，并在表中搜索与该日期和时间以及接下来的 5 个小时匹配的行，但我正在考虑在 mysql 中进行日期/时间算术运算因为它比尝试在 php 中创建我自己的要多得多，坦率地说，这听起来需要做很多工作；当天变化时，我必须检查什么时候是午夜（00:00），月份....

我正在尝试熟悉使用数据库的网站的 php 脚本编写......

# java - Maven打包镜像在jar文件的根目录下

> ID：10464816
> 
> 赞同：4
> 
> 时间：2012-05-05T18:34:29.847
> 
> 标签：java, eclipse, maven

伙计们，

我正在使用 Eclipse 开发 Java 应用程序。Maven 用于创建最终的 jar 文件。

在应用程序中，我为按钮使用了一些图像图标。按照 Internet 上的一些说明，我通过单击项目创建了一个“源”目录。我将源目录命名为“res”并将我的图像移动到该目录。

```
 public static ImageIcon getIcon() {
  if (isThisJarfile()) {
     URL url = this.class.getResources("/res/myicon.png");
     return new ImageIcon(url);
  }else {
     return new ImageIcon("/res/myicon.png");
  }
} 
```

当应用程序未打包为 jar 文件（非常适合调试）时，这可以正常工作。但是，当maven打包它时，我看到图像放在jar文件的根目录中。以下调用有效：

```
    URL url = this.class.getResource("/myicon.png");

```

我想知道是否有一些我忽略的步骤。

请注意，我不必对 pom.xml 为图像做任何特别的事情。Maven 自动拾取它们（除了将它们放在错误的位置）。

预先感谢您的帮助。

问候，彼得

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T19:00:10.163

如果您遵循标准的 Maven 项目目录结构，那么最好将所有非 Java 资源放在`src/main/resources`. 例如，您可以创建一个子目录`images`，以便完整路径为`src/main/resources/images`. 该目录将包含您所有的应用程序图像。

打包应用程序时应特别注意正确访问图像。例如，以下函数应该可以满足您的所有需求。

```
public static Image getImage(final String pathAndFileName) {
    final URL url = Thread.currentThread().getContextClassLoader().getResource(pathAndFileName);
    return Toolkit.getDefaultToolkit().getImage(url);
} 
```

此函数可用于`getImage("images/some-image.png")`加载`some-image.png`图像目录中的文件。

如果`ImageIcon`需要，那么只需调用`new ImageIcon(getImage("images/some-image.png"))`就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:39:35.127

看看[maven资源插件](http://maven.apache.org/plugins/maven-resources-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T07:14:09.147

我的 favicon 位于 maven 项目的根目录中，但它没有包含在生成的战争中。通过大量谷歌搜索，我从 Maven 帮助页面获得了解决方案。

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-war-plugin</artifactId>
<version>3.0.0</version>
<configuration>
  <webResources>
    <resource>
        <directory>${project.basedir}</directory>
      <!-- the list has a default value of ** -->
      <includes>
        <include>favicon.ico</include>
      </includes>
    </resource>
  </webResources>
</configuration>
</plugin> 
```

# java - 没有可用的 Android 项目

> ID：10464821
> 
> 赞同：1
> 
> 时间：2012-05-05T18:35:02.260
> 
> 标签：java, android, eclipse, macos, project

我在 MacBookPro 中运行 Lion 10.7.3。我已经安装了 Eclipse、SDK 和 ADT。

当我选择 File->New 时，只有 Java Project 和 Project 但没有 Android Project 可用。

以前有人遇到过这个问题吗？我该如何解决？任何链接的说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:45:14.073

试试`File`-> `New`-> `Project`-> `Android`-> `Android project`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:47:59.867

文件 -> 新建 -> 其他（列表底部）-> Android -> Android 项目

# ios - 通过网络视图和 CGPDFDocumentCreate，PDF 颜色很奇怪，但不在预览中

> ID：10464823
> 
> 赞同：1
> 
> 时间：2012-05-05T18:35:23.990
> 
> 标签：ios, ipad, pdf, cgpdfdocument

一年多来，我一直在 iPad 应用程序中使用几种方法，主要基于[此处提供](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Listings/Classes_TiledPDFView_m.html#//apple_ref/doc/uid/DTS40010281-Classes_TiledPDFView_m-DontLinkElementID_6)的苹果代码，以很好地显示 PDF 页面 - 到目前为止，它适用于数十种不同的 PDF。我刚收到一堆 PDF，它们的颜色似乎以某种方式变形。Preview/Adobe 显示的内容：

![我所期望的](../Images/d6364202a00bd490ade297b5dcd5bd35.png)

这是我在基于层`CGPDFDrawPDFPage()` *和*iPad UIWebView（指向文件）中看到的，使用模拟器：

![我得到了什么](../Images/d62a462d016303fb04ed5e8c7197707e.png)

我想知道 PDF 是否处于某种奇怪的色彩空间（CMYK？）中，但这并不能解释为什么 Preview/Adobe Reader 可以很好地打开它。作为参考，这是 UIView 子类中使用的显示代码的总和（注意，`pdfPage`是一个实例变量）：

```
// Draw the CGPDFPageRef into the layer at the correct scale.
-(void)drawLayer:(CALayer*)layer inContext:(CGContextRef)context
{
    // from https://stackoverflow.com/questions/3889634/fast-and-lean-pdf-viewer-for-iphone-ipad-ios-tips-and-hints
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
    CGContextSetRenderingIntent(context, kCGRenderingIntentDefault);

    // First fill the background with white.
    CGContextSetRGBFillColor(context, 1.0f, 1.0f, 1.0f, 1.0f);
    CGContextFillRect(context, self.bounds);

    CGContextSaveGState(context);
    // Flip the context so that the PDF page is rendered
    // right side up (all the PDF routines are built for Mac OS X
    // coordinate systems, where Y is upwards.

    // first move the origin down by the full height
    CGContextTranslateCTM(context, 0.0f, self.bounds.size.height);
    // now invert the Y position (scale by -1)
    CGContextScaleCTM(context, 1.0f, -1.0f);

    // Scale the context so that the PDF page is rendered 
    // at the correct size for the zoom level.
    CGContextScaleCTM(context, myScale, myScale);   
    CGContextDrawPDFPage(context, pdfPage);

    CGContextRestoreGState(context);
} 
```

如您所见，我们也一直是[iPhone / iPad / iOs 的 Fast and Lean PDF Viewer 的狂热读者 - 提示和提示？](https://stackoverflow.com/questions/3889634/fast-and-lean-pdf-viewer-for-iphone-ipad-ios-tips-and-hints)

关于如何诊断我们所看到的内容和/或更改色彩空间（或更改 PDF 文档？我们也有这个选项）的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:26:03.820

我猜您的 PDF 除了 CMYK 之外还使用一种或多种专色。iOS 似乎不支持这些 - 据我所知，这在任何地方都没有记录，但这是我的经验。

如果您有 Acrobat Pro，您可以使用 Ink Manager（高级 → Print Production → Ink Manager）进行检查。

您还可以使用 Acrobat 将专色转换为印刷色（高级 → 印刷制作 → 转换颜色...）。单击颜色转换对话框中的“墨水管理器”按钮，并在此处激活“将所有点转换为印刷”复选框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T20:34:48.100

根据我的经验，将 CMYK 转换为 RGB 时，iOS 会处理颜色。Acrobat 中有一个不错的工具，您可以使用它提前将 PDF 转换为 RGB，从而完全避开该问题：

```
Tools > Print Production > Convert Colors
Check "Convert Colors to Output Intent"
Set Output Intent to "Apple RGB"
Click OK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:52:19.877

如果您有大量 PDF 文件要转换，则可以通过创建动作并转换为 sRGB 配置文件来简化 Acrobat Pro 中的操作。

# c++ - 写入二进制破坏数据

> ID：10464824
> 
> 赞同：3
> 
> 时间：2012-05-05T18:35:31.770
> 
> 标签：c++, io, binary, asio

在我的应用程序中，我记录了来自 ASIO 驱动程序的音频数据：

```
void newData(void *buffer, int length) 
```

其中 buffer 是缓冲区指针，length 是该缓冲区中的样本数。在我的例子中，我知道样本是 4 字节整数，缓冲区每次运行包含 1024 个样本。

现在，我以两种方式保存这些示例：little-endian 二进制文件（稍后用作 WAV 文件）和文本文件。保存文字的文本文件很好，我得到了数字，它们对应于波形中的样本。但是二进制文件总是会包含一些好的数据，其余的只是被破坏了。

原始数据（原始声音和文本保存）： ![原始声音数据](../Images/b4617632a50672385c36bdeaa634584c.png)

损坏的数据（二进制保存）： ![](../Images/ca8c6a9184dabc8ea05c410ebd8ea032.png)

代码（我使用`std::ofstream`）：

```
//binary saving
tempOut.write((char *)buffer, length * 4);

//text saving
int *intBuf = (int *)buffer;
for(int i = 0; i < length; i++){
    textOut << intBuf[i];
    textOut << '\n';
} 
```

请注意，问题不在于同步，因为我先保存二进制数据，然后再保存文本数据。

数据是如何被破坏的：

```
Original    binary (LE) binary (BE) binary to dec
206016      C0240300    000324C0    206016
815616      00720C00    000C7200    815616
1804032     00871B00    001B8700    1804032
3131392     00C82F00    002FC800    3131392
4741440     40594800    00485940    4741440
6567552     80366400    00643680    6567552
8531264     402D8200    00822D40    8531264
10545664    00EAA000    00A0EA00    10545664
12517632    0001BF00    00BF0100    12517632
14353920    0006DB00    00DB0600    14353920
15958976    C083F300    00F383C0    15958976
17241600    00160701    01071600    17241600
18119296    807A1401    01147A80    18119296
18514048    80801A01    011A8080    18514048
18365760    403D1801    01183D40    18365760
17622016    00E40C01    010CE400    17622016
16253632    C002F800    00F802C0    16253632
14246784    8063D900    00D96380    14246784
11605504    0016B100    00B11600    11605504
8355840     00807F00    007F8000    8355840
4541376     C04B4500    00454BC0    4541376
228096      007B0300    00037B00    228096
-4501376    8050BBFF    FFBB5080    4290465920
-9549312    004A6EFF    FF6E4A00    4285417984
-14798400   C0311EFF    FF1E31C0    4280168896
-20126080   80E6CCFE    FECCE680    4274841216
-25391232   808F7CFE    FE7C8F80    4269576064
-30458624   003D2FFE    FE2F3D00    4264508672
-35178624   8037E7FD    FDE73780    4259788672
-39413760   0098A6FD    FDA69800    4255553536
-43025024   807D6FFD    FD6F7D80    4251942272
-45883392   00E043FD    FD43E000    4249083904
-47872704   408525FD    FD258540    4247094592
-48899072   00DC15FD    FD15DC00    4246068224
-48881280   802116FD    FD162180    4246086016
-47759616   003F27FD    FD273F00    4247207680
-45503488   00AC49FD    FD49AC00    4249463808
-42107648   007D7DFD    FD7D7D00    4252859648
-37589760   006DC2FD    FDC26D00    4257377536
-32005120   00A417FE    FE17A400    4262962176
-25429184   40FB7BFE    FE7BFB40    4269538112
-17961216   00EFEDFE    FEEDEF00    4277006080
-9736576    806E6BFF    FF6B6E80    4285230720
-909568     001FF2FF    FFF21F00    4294057728
8349120     C0657F00    007F65C0    8349120
17843584    80451001    01104580    17843584
27378816    80C4A101    01A1C480    27378816
36731904    007C3002    02307C00    36731904
45697792    004BB902    02B94B00    45697792
54044800    80A83803    0338A880    54044800
61575360    C090AB03    03AB90C0    61575360
68087552    00EF0E04    040EEF00    68087552
73396096    80EF5F04    045FEF80    73396096
77338368    00179C04    049C1700    77338368
79784320    8069C104    04C16980    79784320
80611328    0008CE04    04CE0800    80611328
79763520    4018C104    04C11840    79763520
77187328    00C99904    0499C900    77187328
72884352    80205804    04582080    72884352
66885120    0096FC03    03FC9600    66885120
59262720    00478803    03884700    59262720
50139648    0012FD02    02FD1200    50139648
39658752    00255D02    025D2500    39658752
28000256    0040AB01    01AB4000    28000256
15379520    40ACEA00    00EAAC40    15379520
2044416     00321F00    001F3200    2044416
-11740544   80DA4CFF    FF4CDA80    4283226752
-25707264   00BD77FE    FE77BD00    4269260032
-39540864   80A7A4FD    FDA4A780    4255426432
-52953600   00FED7FC    FCD7FE00    4242013696
-65651712   003C16FC    FC163C00    4229315584
-77331456   000464FB    FB640400    4217635840
-87716800   408CC5FA    FAC58C40    4207250496
-96567040   00813EFA    FA3E8100    4198400256
-103632000  80B3D2F9    F9D2B380    4191335296
-108724992  00FD84F9    F984FD00    4186242304
-111678336  80EC57F9    F957EC80    4183288960
-112379904  00384DF9    F94D3800    4182587392
-110761792  C0E865F9    F965E8C0    4184205504
-106792960  0078A2F9    F9A27800    4188174336
-100491840  C09D02FA    FA029DC0    4194475456
-91944960   000885FA    FA850800    4203022336
-81278912   40C827FB    FB27C840    4213688384
-68651520   0076E8FB    FBE87600    4226315776
-54296640   C07FC3FC    FCC37FC0    4240670656
-38472960   00F3B4FD    FDB4F300    4256494336
-21475776   404EB8FE    FEB84E40    4273491520
-3638272    007CC8FF    FFC87C00    4291329024
14684288    8010E000    00E01080    14684288
33120000    005FF901    01F95F00    33120000
51280320    C0790E03    030E79C0    51280320
68789504    00A51904    0419A500    68789504
85244544    80BA1405    0514BA80    85244544
100304768   8087FA05    05FA8780    100304768
113604800   C078C506    06C578C0    113604800
124833792   00D07007    0770D000    124833792
133720320   0069F807    07F86900    133720320
140022400   80925808    08589280    140022400
143561088   80918E08    088E9180    143561088
144198400   004B9808    08984B00    144198400
141871872   00CB7408    0874CB00    141871872
136572288   80ED2308    0823ED80    136572288
128333056   0035A607    07A63500    128333056
117298688   00D6FD06    06FDD600    117298688
103608960   80F22C06    062CF280    103608960
87533952    80A93705    0537A980    87533952
69342848    80162204    04221680    69342848
49372416    005DF102    02F15D00    49372416
28008640    C060AB01    01AB60C0    28008640
5674240     00955600    00569500    5674240
-17177472   80E4F9FE    FEF9E480    4277789824
-40097792   00289CFD    FD9C2800    4254869504
-62600192   00CC44FC    FC44CC00    4232367104
-84225024   00D4FAFA    FAFAD400    4210742272
-104489920  409CC5F9    F9C59C40    4190477376
-122963712  00B9ABF8    F8ABB900    4172003584
-139224384  C09AB3F7    F7B39AC0    4155742912
-152897792  00F7E2F6    F6E2F700    4142069504
-163660224  40BE3EF6    F63EBE40    4131307072
-171233280  0030CBF5    F5CB3000    4123734016
-175417088  00598BF5    F58B5900    4119550208
-176054784  009E81F5    F5819E00    4118912512
-173089536  00DDAEF5    F5AEDD00    4121877760
-166513152  003613F6    F6133600    4128454144
-156400000  8086ADF6    F6AD8680    4138567296
-142918272  803D7BF7    F77B3D80    4152049024
-126284736  400C79F8    F8790C40    4168682560
-106782720  00A0A2F9    F9A2A000    4188184576
-84789120   8038F2FA    FAF23880    4210178176
-60711040   809F61FC    FC619F80    4234256256
-35003200   C0E4E9FD    FDE9E4C0    4259964096
-8186112    001783FF    FF831700    4286781184
19211584    40252501    01252540    19211584
46627712    807BC702    02C77B80    46627712
73500480    40876104    04618740    73500480
99269120    00BAEA05    05EABA00    99269120
123365760   80695A07    075A6980    123365760
145304064   002AA908    08A92A00    145304064
164576000   003BCF09    09CF3B00    164576000
Here the mangling occurs:
180750080   0007C60D    0DC60700    231081728
193447488   0A40C687    87C6400A    2277916682
202362496   0B80CE0F    0FCE800B    265191435
207247040   0CC0565A    5A56C00C    1515634700
207959040   0C003465    6534000C    1697906700
204410560   0CC00E2F    2F0EC00C    789495820
196625792   0C8045B8    B845800C    3091562508
184697856   0B004402    0244000B    38010891
168819456   0B00FB0F    0FFB000B    268107787
149276544   0D0A80C7    C7800A0D    3347057165
126403200   E50880C2    C28008E5    3263170789
100631232   8807C082    82C00788    2193622920
72473600    FF0500DC    DC0005FF    3690989055
42428736    51044069    69400451    1765803089
11137280    870200F1    F1000287    4043309703
-20792320   A90000BC    BC0000A9    3154116777
-52715520   C2FE00A0    A000FEC2    2684419778
-83981184   DBFC808C    8C80FCDB    2357263579
-113911680  FEFA80D8    D880FAFE    3632331518
-141894144  35F900DE    DE00F935    3724605749
-167331840  8AF700B8    B800F78A    3087071114
-189665728  06F640EE    EE40F606    3997234694
-208386432  B1F48046    4680F4B1    1182856369
-223077888  94F3001A    1A00F394    436269972
-233389056  B4F200C4    C400F2B4    3288396468
-239046720  16F2C06F    6FC0F216    1874915862
-239889920  C0F10092    9200F1C0    2449535424
-235830720  B3F14082    8240F1B3    2185294259
-226899456  F1F100CA    CA00F1F1    3389059569
-213204992  79F200C0    C000F279    3221287545
-195002240  4AF38080    8080F34A    2155934538
-172597824  60F4C05D    5DC0F460    1572926560
-146384384  B6F5005A    5A00F5B6    1510012342
-116876032  46F7009D    9D00F746    2634086214
-84644736   08F9806C    6C80F908    1820391688
-50310400   F4FA0053    5300FAF4    1392573172 
```

您可以看到波浪是如何表示的，正值和负值交替出现，直到某个点。然后就变成垃圾了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:41:12.297

您忘记以二进制模式打开二进制数据的输出文件。因此，每次`0x0A`发送一个字节以输出文件接收（在 Windows 系统中）`0x0D 0x0A`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:36:12.130

如果我正确解释了您有关数据的第一行信息：

```
Original    binary (LE) binary (BE) binary to dec
206016      C0240300    000324C0    206016 
```

那么正确的值就是大端数据。如果您在磁盘上看到的是 0xC0240300，那么您正在使用 little-endian 机器（Intel CPU），您需要以 big-endian 格式写入数据（并以 big-endian 格式读回也）。

你目前的做法是：

```
//binary saving
tempOut.write((char *)buffer, length * 4); 
```

我假设 'buffer' 是一个 4 字节整数的数组（在我的工作中，它最常见的是一个 的数组`char`，但是演员表将是无关紧要的）。

我认为“更好”的一种方法可能是：

```
enum { MAX_SAMPLES = 1024 };
char binbuff[4 * MAX_SAMPLES];

assert(length <= MAX_SAMPLES);
char *dst = binbuff;
for (int i = 0; i < length; i++)
{
     *dst++ = (buffer[i] >> 24) & 0xFF;
     *dst++ = (buffer[i] >> 16) & 0xFF;
     *dst++ = (buffer[i] >>  8) & 0xFF;
     *dst++ = (buffer[i] >>  0) & 0xFF;
}

tempOut.write(binbuff, 4 * length); 
```

有多种或多或少等效的机制可用于实现相同的结果。

阅读将是相反的操作。您将数据读入一个字符（字节）数组，然后将每四个字节组合成一个值：

```
int sample[MAX_SAMPLES];

char binbuff[4 * MAX_SAMPLES];
tempIn.read(binbuff, sizeof(binbuff));

char *src = binbuff;
for (int i = 0; i < MAX_SAMPLES; i++, src += 4)
{
     sample[i] = (src[0] & 0xFF) << 24 |
                 (src[1] & 0xFF) << 16 |
                 (src[2] & 0xFF) <<  8 |
                 (src[3] & 0xFF) <<  0;
} 
```

优化器会将移位删除为零；它们在源代码中明确了操作的对称性。

# android - 拍照后重置预览 - Android Camera.startpreview() 失败

> ID：10464827
> 
> 赞同：4
> 
> 时间：2012-05-05T18:35:47.127
> 
> 标签：android, camera

我正在尝试构建一个可以拍摄照片并稍后处理它们的应用程序。到目前为止，我已经能够访问相机、提供预览并拍照。但是，在我拍完照片后，我无法恢复预览以拍摄更多照片。它只是锁定，如果我尝试使用 Camera.stopPreview 然后使用 Camera.startPreview 来“重新启动”我的预览，我会收到以下错误：

05-05 21:19:24.316: E/AndroidRuntime(1103): java.lang.RuntimeException: startPreview 失败 05-05 21:19:24.316: E/AndroidRuntime(1103): 在 android.hardware.Camera.startPreview(Native方法）

我需要重置它以拍摄多张照片。如果我注释掉并且不弄乱预览（单张照片），则该应用程序可以工作。

经过数小时的研究，我找不到解决方案。

这是我的代码： http: [//pastebin.com/dJELpsWN](http://pastebin.com/dJELpsWN)

[稍后编辑]

问完这个问题几分钟后，我发现问题是我调用 Camera.startPreview 太快了，而它没有时间保存/处理照片。

# jsf - Primefaces Datatable 和 InputText 元素创建动态表单

> ID：10464828
> 
> 赞同：3
> 
> 时间：2012-05-05T18:36:28.390
> 
> 标签：jsf, primefaces

我有一个关于在 primefaces 数据表中使用 inputText 元素的问题。

Xhtml如下

```
<h:form >
                 <h:panelGrid columns="2">
                    <p:commandButton action="#{offerController.addNewOfferRow}" update="panel1" id="iconOnly1"  
           icon="ui-icon-circle-plus" value="Yeni Satır" title="Icon Add"  style="width:220px;" /> 

                 </h:panelGrid>
                <p:dataTable id="panel1" var="offer" value="#{offerController.offerIds}"  style="align: center;">
                    <p:column id="modelHeader"  style=" margin-left: auto; margin-right: auto; width:70%;" >
                        <f:facet name="header">
                            Eklenecek Offerlar
                        </f:facet>

                        <p:inputText id="addOfferId" value="#{offer}"   style=" margin-left: auto; margin-right: auto; width:70%;"  />

                    </p:column>

                </p:dataTable> 
```

我的java bean如下：

```
@ManagedBean
@ViewScoped

public class OfferController implements Serializable{

    /**
     * 
     */

    private static final long serialVersionUID = -1552493989687233258L;
    private static final int defaultNumberOfRows = 6;
    private List<String> offerIds = new LinkedList<String>();

    public OfferController() {
         super();
    for(int i=0;i<defaultNumberOfRows;i++){
        offerIds.add("");
         }

    }

    public void addOffers(){
         // do some op.
    }

    public void addNewOfferRow(){
         offerIds.add("");
    }

    public getOfferIds(){
         return offerIds;
    }

    public setOfferIds(List<String> offerIds){
          this.offerIds = offerIds;
    }

} 
```

使用上面的代码时。我想在数据表中的 inputText 元素中显示字符串项列表。

并且 addNewOfferRow 操作将新元素添加到 List 并且数据表被更新客户端。

但是，在提交表单后，所有 inputText 元素都不会存储用户输入的值。

我如何使用这些数据表结束 inputText 元素来创建动态行表单。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:01:20.120

您使用的字符串列表（不可变类型）不允许 inputText 元素设置列表项的值。

使用包含 String 作为列表项的包装类。

```
<p:dataTable var="item" value="#{listBean.list}">
     <p:column>
         <p:inputText value="#{item.name}" />
     </p:column>
</p:dataTable> 
```

# php - 如何正确使用 jQuery.validity

> ID：10464829
> 
> 赞同：2
> 
> 时间：2012-05-05T18:36:37.670
> 
> 标签：php, javascript, jquery

昨天，我开始在这里问一个关于我自己的项目的问题，当我看到人们有多么乐于助人以及他们回答的速度有多快时，我真的很高兴。我父亲正在自己做一个项目，他让我在这里为他写一个问题，因为他的英语知识很重要。

好吧，他正在尝试使用 jQuery.validity ( [http://validity.thatscaptaintoyou.com](http://validity.thatscaptaintoyou.com) ) 验证表单，但他的验证功能不起作用。这是他的代码： http: [//pastebin.com/uvXRTZsE](http://pastebin.com/uvXRTZsE)

很抱歉没有在此处粘贴，但经过多次尝试，在此处粘贴时缺少部分代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:46:49.393

我在这里看到两个主要问题：

**输入元素上的 id 不是唯一的。**

根据规范，页面上任何元素的 id 都必须是唯一的。换句话说，你不应该像你一样使用 id="organizacion" 4 次。这可能会或可能不会影响脚本定位您的元素的能力，考虑到它们可能会停在第一个元素上，并在了解和理解 id 必须是唯一的情况下实施。

**Validity 没有任何支持单选按钮验证的文档。**

我在您的 HTML 中看不到任何文本字段，并且在 Validity 中看不到任何有关单选按钮的文档。因此，您尝试完成的事情可能无法通过 Validity 实现。

最后一点，单选按钮的设计使得在一组中，必须始终选择一个。无法取消选择单选按钮。因此，您应该确保选择了默认单选按钮。

这当然可以消除将其设为必填字段的需要，因为默认情况下已经选择了一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:02:17.533

Validity 没有任何支持单选按钮验证的文档，但您可以执行以下操作：

```
$('#form').validity(function(){
    $('#my_input_radio').assert($('#my_input_radio').is('checked'), 'Please check a radio');
}); 
```

# sql-server - SQL Server：1 ++ 2 是什么意思？

> ID：10464831
> 
> 赞同：13
> 
> 时间：2012-05-05T18:37:03.457
> 
> 标签：sql-server, tsql, syntax

SQL Server 的 T-SQL 语法似乎允许连续使用多个加号：

```
SELECT 1 + 2 --3
SELECT 1 ++ 2 --3
SELECT 1 ++++++ 2 --3
SELECT 1 + '2' --3
SELECT 1 ++ '2' --3
SELECT '1' + '2' --'12'
SELECT '1' ++ '2' --'12' 
```

多个加号看起来就像一个加号。为什么存在“乘法运算符” `++`？它有什么作用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-05T18:38:40.783

第一个加号被解释为加法运算符。剩余的每个加号都被解释为一[元加号运算符](http://msdn.microsoft.com/en-us/library/ms174362.aspx)：

```
1 ++ 2   means   1 + (+2)
1 +++ 2  means   1 + (+(+2)) 
```

这种一元加号运算符在编程语言中很常见，尽管它在 SQL 中很少使用，因为它实际上并没有做任何事情。

> 尽管一元加号可以出现在任何数值表达式之前，但它不会对从表达式返回的值执行任何操作。具体来说，它不会返回负表达式的正值。

SQL-92 标准中提到了一元加号运算符。

> 除了通常的算术运算符，加号、减号、时间、除法、**一元加**号和一元减号之外，还有以下返回数字的函数： ...

虽然一元加号并不是那么有用，但它有一个更有用的伴侣：一元减号。它也被称为[负运算符](http://msdn.microsoft.com/en-us/library/ms189480.aspx)。

```
SELECT -(expression), ...
--     ^ unary minus 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T18:40:20.417

`SELECT 1 ++ 2` 表示 1 加 (+2) 表示 3

其他人的逻辑相同`1+(+(+2))`，依此类推

`SELECT '1' + '2' --'12'`您正在连接 2 个字符串，字符串 '1' 和字符串 '2'，结果为 '12'

# machine-learning - 成本函数增加

> ID：10464839
> 
> 赞同：2
> 
> 时间：2012-05-05T18:37:43.077
> 
> 标签：machine-learning

知道除了过高的学习率之外，什么会导致成本函数随着机器学习的迭代而增加。学习率很高，我得到了成本函数的振荡，我将它从 1 降低到 0.001，现在成本函数正在增加。我插入了一张成本与迭代的图片。 ![在此处输入图像描述](../Images/dd7e104f8a6529bca49adabbb7e0affe.png)

这是其他一些变量：

*   降维方法：PCA，
*   维数：676，
*   迭代次数：1000
*   学习率：0.0010
*   正则化常数：0.50

# google-chrome-devtools - 有没有办法在 Chrome 开发工具中自动扩展对象？

> ID：10464844
> 
> 赞同：170
> 
> 时间：2012-05-05T18:38:06.483
> 
> 标签：google-chrome-devtools

每次我在控制台中查看一个对象，我都想要展开它，所以每次都必须单击箭头来执行此操作会很烦人:) 是否有快捷方式或设置可以自动完成此操作？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-11-06T13:44:18.753

考虑使用[console.table()](https://developer.mozilla.org/en-US/docs/Web/API/Console.table)。

![控制台表输出](../Images/b0fbedf3e0a77fdfe3abc3fb55d83100.png)

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2015-03-17T03:55:40.103

要展开/折叠节点及其所有子节点，

> **Ctrl + Alt + 单击**或**Opt + 单击**箭头图标

（请注意，尽管[开发工具文档](https://developer.chrome.com/devtools/docs/shortcuts)列出了 Ctrl + Alt + 单击，但在 Windows 上，只需要 Alt + 单击）。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-12-22T20:47:02.703

虽然提到的[解决方案](https://stackoverflow.com/a/10778913/476712)[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)在大多数情况下都非常好，但它有一些限制

*   它不能处理带有循环引用的项目，因为它`console.log`可以优雅地处理这些对象。
*   此外，如果你有一棵大树，那么交互式折叠一些节点的能力可以使探索更容易。

这是一个通过创造性地（ab）使用解决上述两个问题的解决方案[`console.group`](https://developer.mozilla.org/en-US/docs/Web/API/Console.group)：

```
function expandedLog(item, maxDepth = 100, depth = 0){
    if (depth > maxDepth ) {
        console.log(item);
        return;
    }
    if (typeof item === 'object' && item !== null) {
        Object.entries(item).forEach(([key, value]) => {
            console.group(key + ' : ' +(typeof value));
            expandedLog(value, maxDepth, depth + 1);
            console.groupEnd();
        });
    } else {
        console.log(item);
    }
} 
```

现在运行：

```
expandedLog({
    "glossary": {
        "title": "example glossary",
        "GlossDiv": {
            "title": "S",
            "GlossList": {
                "GlossEntry": {
                    "ID": "SGML",
                    "SortAs": "SGML",
                    "GlossTerm": "Standard Generalized Markup Language",
                    "Acronym": "SGML",
                    "Abbrev": "ISO 8879:1986",
                    "GlossDef": {
                        "para": "A meta-markup language, used to create markup languages such as DocBook.",
                        "GlossSeeAlso": ["GML", "XML"]
                    },
                    "GlossSee": "markup"
                }
            }
        }
    }
}) 
```

会给你类似的东西：

![输出截图](../Images/f37da0672a6189b1b1d5493f2351e93f.png)

的值`maxDepth`可以调整到所需的级别，超出该级别的嵌套 - 扩展日志将回退到通常的 console.log

尝试运行类似的东西：

```
x = { a: 10, b: 20 }
x.x = x 
expandedLog(x) 
```

![在此处输入图像描述](../Images/b23775b7a8f397a7e5ee84df1d2158e2.png)

另请注意，这`console.group`是非标准的。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2012-05-28T03:03:27.640

可能不是最好的答案，但我一直在我的代码中的某个地方这样做。

**更新**：

用于`JSON.stringify`自动扩展您的对象：

```
> a = [{name: 'Joe', age: 5}, {name: 'John', age: 6}]
> JSON.stringify(a, true, 2)
"[
  {
    "name": "Joe",
    "age": 5
  },
  {
    "name": "John",
    "age": 6
  }
]" 
```

如果输入所有内容很痛苦，您总是可以创建一个快捷功能：

```
j = function(d) {
    return JSON.stringify(d, true, 2)
}

j(a) 
```

**上一个**答案：

```
pretty = function(d)
{
  var s = []
  for (var k in d) {
    s.push(k + ': ' + d[k])
  }
  console.log(s.join(', '))
} 
```

然后，而不是：

```
-> a = [{name: 'Joe', age: 5}, {name: 'John', age: 6}]
-> a
<- [Object, Object] 
```

你做：

```
-> a.forEach(pretty)
<- name: Joe, age: 5
   name: John, age: 6 
```

不是最好的解决方案，但很适合我的使用。更深的对象将不起作用，因此可以改进。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-07-23T04:20:40.070

选项+单击 Mac。我自己现在才发现它并度过了我的一周！这和任何事情一样烦人

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-03-06T01:08:56.970

这是 lorefnon 的答案的修改版本，它不依赖于 underscorejs：

```
var expandedLog = (function(MAX_DEPTH){

    return function(item, depth){

        depth    = depth || 0;
        isString = typeof item === 'string'; 
        isDeep   = depth > MAX_DEPTH

        if (isString || isDeep) {
            console.log(item);
            return;
        }

        for(var key in item){
            console.group(key + ' : ' +(typeof item[key]));
            expandedLog(item[key], depth + 1);
            console.groupEnd();
        }
    }
})(100); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-04-13T19:21:40.553

我真的不喜欢 Chrome 和 Safari 如何控制对象（过度设计）。默认情况下，控制台会压缩对象，在对象展开时对对象键进行排序，并显示原型链中的内部函数。这些功能应该是可选设置。默认情况下，开发人员可能对原始结果感兴趣，因此他们可以检查他们的代码是否正常工作；这些特性会减慢开发速度，并给出不正确的排序结果。

## 如何在控制台中展开对象

**受到推崇的**

1.  `console.log(JSON.stringify({}, undefined, 2));`

    也可以用作函数：

    ```
    console.json = object => console.log(JSON.stringify(object, undefined, 2));

    console.json({}); 
    ```

2.  “Option + Click”（Mac 上的 Chrome）和“Alt + Click”（Window 上
    的 Chrome） 但是，并非所有浏览器（例如 Safari）都支持它，并且控制台仍然打印原型类型链，对象键在以下情况下自动排序展开等

**不建议**

我不会推荐任何一个最佳答案

1.  `console.table()`- 这只是浅层扩展，不会扩展嵌套对象

2.  编写一个自定义的 underscore.js 函数——对于一个简单的解决方案来说开销太大

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-22T16:31:34.863

这是我的解决方案，一个迭代对象所有属性的函数，包括数组。

在这个例子中，我迭代了一个简单的多级对象：

```
 var point = {
            x: 5,
            y: 2,
            innerobj : { innerVal : 1,innerVal2 : 2 },
            $excludedInnerProperties : { test: 1},
            includedInnerProperties : { test: 1}
        }; 
```

如果属性以特定后缀开头（即 $ 用于角度对象），您还可以排除迭代

```
discoverProperties = function (obj, level, excludePrefix) {
        var indent = "----------------------------------------".substring(0, level * 2);
        var str = indent + "level " + level + "\r\n";
        if (typeof (obj) == "undefined")
            return "";
        for (var property in obj) {
            if (obj.hasOwnProperty(property)) {
                var propVal;
                try {
                    propVal = eval('obj.' + property);
                    str += indent + property + "(" + propVal.constructor.name + "):" + propVal + "\r\n";
                    if (typeof (propVal) == 'object' && level < 10 && propVal.constructor.name != "Date" && property.indexOf(excludePrefix) != 0) {
                        if (propVal.hasOwnProperty('length')) {
                            for (var i = 0; i < propVal.length; i++) {
                                if (typeof (propVal) == 'object' && level < 10) {
                                    if (typeof (propVal[i]) != "undefined") {
                                        str += indent + (propVal[i]).constructor.name + "[" + i + "]\r\n";
                                        str += this.discoverProperties(propVal[i], level + 1, excludePrefix);
                                    }
                                }
                                else
                                    str += indent + propVal[i].constructor.name + "[" + i + "]:" + propVal[i] + "\r\n";
                            }
                        }
                        else
                            str += this.discoverProperties(propVal, level + 1, excludePrefix);
                    }
                }
                catch (e) {
                }
            }
        }
        return str;
    };

var point = {
        x: 5,
        y: 2,
        innerobj : { innerVal : 1,innerVal2 : 2 },
        $excludedInnerProperties : { test: 1},
        includedInnerProperties : { test: 1}
    };

document.write("<pre>" + discoverProperties(point,0,'$')+ "</pre>");
```

这是函数的输出：

```
level 0
x(Number):5
y(Number):2
innerobj(Object):[object Object]
--level 1
--innerVal(Number):1
--innerVal2(Number):2
$excludedInnerProperties(Object):[object Object]
includedInnerProperties(Object):[object Object]
--level 1
--test(Number):1 
```

您也可以在任何网页中注入此函数并复制和分析所有属性，在 google 页面上使用 chrome 命令尝试：

```
discoverProperties(google,0,'$') 
```

您还可以使用 chrome 命令复制命令的输出：

```
copy(discoverProperties(myvariable,0,'$')) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-12-08T14:49:40.233

如果你有一个大对象， JSON.stringfy 会给出错误 Uncaught TypeError: Converting circular structure to JSON ，这里是使用它的修改版本的技巧

```
JSON.stringifyOnce = function(obj, replacer, indent){
    var printedObjects = [];
    var printedObjectKeys = [];

    function printOnceReplacer(key, value){
        if ( printedObjects.length > 2000){ // browsers will not print more than 20K, I don't see the point to allow 2K.. algorithm will not be fast anyway if we have too many objects
        return 'object too long';
        }
        var printedObjIndex = false;
        printedObjects.forEach(function(obj, index){
            if(obj===value){
                printedObjIndex = index;
            }
        });

        if ( key == ''){ //root element
             printedObjects.push(obj);
            printedObjectKeys.push("root");
             return value;
        }

        else if(printedObjIndex+"" != "false" && typeof(value)=="object"){
            if ( printedObjectKeys[printedObjIndex] == "root"){
                return "(pointer to root)";
            }else{
                return "(see " + ((!!value && !!value.constructor) ? value.constructor.name.toLowerCase()  : typeof(value)) + " with key " + printedObjectKeys[printedObjIndex] + ")";
            }
        }else{

            var qualifiedKey = key || "(empty key)";
            printedObjects.push(value);
            printedObjectKeys.push(qualifiedKey);
            if(replacer){
                return replacer(key, value);
            }else{
                return value;
            }
        }
    }
    return JSON.stringify(obj, printOnceReplacer, indent);
}; 
```

现在你可以使用`JSON.stringifyOnce(obj)`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-09-05T18:28:24.650

它是一种解决方法，但它对我有用。

我在控件/小部件根据用户操作自动更新的情况下使用。例如，当使用 twitter 的 typeahead.js 时，一旦您将注意力移出窗口，下拉菜单就会消失，并且建议会从 DOM 中删除。

在开发工具中右键单击要展开的节点 enable **break on... -> subtree modified**，然后将您发送到调试器。继续按**F10**或**Shift+F11**直到您的 dom 发生变异。一旦发生突变，您就可以进行检查。由于调试器处于活动状态，Chrome 的 UI 被锁定并且不会关闭下拉菜单，并且建议仍在 DOM 中。

在对不断插入和删除的动态插入节点的布局进行故障排除时非常方便。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-10T08:57:04.967

另一种更简单的方法是

*   使用 JSON.stringify(jsonObject)
*   将结果复制并粘贴到 Visual Studio Code
*   使用 Ctrl+K 和 Ctrl+F 格式化结果
*   您将看到格式化的扩展对象

我已经尝试过这个简单的对象。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-15T23:14:49.547

您可以将 JSON.stringify 打包成一个新函数，例如

```
jsonLog = function (msg, d) {
  console.log(msg + '\n' + JSON.stringify(d, true, 2))
} 
```

然后

```
jsonLog('root=', root) 
```

FWIW。默里

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-06T22:40:12.933

### 对于懒人

```
/**
 * _Universal extensive multilevel logger for lazy folks_
 * @param {any} value **`Value` you want to log**
 * @param {number} tab **Abount of `tab`**
 */
function log(value, tab = 4) {
  console.log(JSON.stringify(value, undefined, tab));
} 
```

用法

```
log(anything) // [] {} 1 true null 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-02-20T17:21:06.493

您可以通过访问 document.getElementsBy... 查看您的元素，然后右键单击并复制结果对象。例如：

`document.getElementsByTagName('ion-app')`返还可以复制粘贴到文本编辑器的 javascript 对象，它会完整地执行此操作。

更好的是：右键单击结果元素-“编辑为 html”-“全选”-“复制”-“粘贴”

# c++ - 定义一个静态全局数组以避免在函数中定义它

> ID：10464847
> 
> 赞同：4
> 
> 时间：2012-05-05T18:38:24.333
> 
> 标签：c++, optimization, static-variables

我刚刚开始使用作者声称“高度优化”的一大段代码。在某些时候，他们会这样做：

```
namespace somename 
{ 
  static float array[N]; 
} 

float Someclass::some_function(std::vector<float>& input) 
{
  // use somename::array in some way 
  return result; 
} 
```

`somename::array`由于持久性代码的问题（我们几乎无法控制），作者没有包含在课程中。该类在`some_function`调用时对数组执行 O(N^2) 操作。所以如果我`array`在函数调用内部移动，

```
float Someclass::some_function(std::vector<float>& input) 
{
  float array[N];
  // use somename::array in some way 
  return result; 
} 
```

预期性能下降是否合理？换句话说，跨许多不同的系统和编译器，作者的优化（使用全局数组而不是函数内部的数组）是否明显有助于提高性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:58:54.417

由于数字很重要：

./trial2.out 59.08s user 0.01s system 88% cpu 1:07.01 total

./trial.out 59.40s user 0.00s system 99% cpu 59.556 total

源代码： http: [//pastebin.com/YA2WpTSU](http://pastebin.com/YA2WpTSU)（带有注释和测试的备用代码）

所以，没有区别。编译：

```
gcc version 4.1.2 20080704 (Red Hat 4.1.2-46) 
```

在函数中使用非静态数组时的时间结果：

```
./trial.out  57.32s user 0.04s system 97% cpu 58.810 total

./trial.out  57.77s user 0.04s system 97% cpu 59.259 total 
```

再说一遍，没有区别。由于当您使用数组时，它是函数堆栈的一部分而不是堆，因此每次调用函数时都没有保留内存的开销。如果您使用动态分配，这将是一个完全不同的场景（在这种情况下，我确实怀疑性能会存在巨大差异）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:27:00.977

也许你没有注意到区别，但有一个！使用`static`关键字，数组存在于程序的 DATA 段中，并且它仍然是整个运行时。没有`static`关键字，数组驻留在堆栈中，每次调用函数时都会初始化。尽管如此，堆栈版本可能是更好的选择，因为它具有更好的局部性，因此缓存未命中率更低。您必须衡量哪个版本在您的情况下更好。在我的情况下（一个包含 69 个 64 位数字的数组和第二个 48 * 12 个字符的二维数组），静态版本明显更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T18:53:43.600

唯一的区别是“数组”是全局分配的（如果声明为静态），如果在函数体中声明，它将在堆栈上“分配”。这里真正重要的是数组的大小 (N)。如果它是一个大数组，您可以将其保留为静态，因为您可能无法在堆栈上声明它。第三种选择是动态分配它（堆，使用新关键字）。但是，所有这些假设都不会真正影响函数本身的性能，因为一旦分配，这些方法中的任何一个都没有开销。

# objective-c - UIScrollview 事件将被包含的 UIButtons 捕获

> ID：10464850
> 
> 赞同：0
> 
> 时间：2012-05-05T18:38:48.950
> 
> 标签：objective-c, ios, events, uiscrollview, uibutton

我实现了一个 UIScrollview 并在里面添加了很多 UIButtons。但是现在滚动视图中只有一点空间可以滚动。如果我尝试在 UIButton 上滚动滚动视图，滚动视图将不会移动。原因是 UIButtons 捕获了滚动视图的必要事件。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:11:29.743

你需要**`canCancelContentTouches`**在你的`UIScrollView`. 这使`UIScrollView`该类允许在其子视图中进行触摸。

```
[myScrollview setCanCancelContentTouches:NO]; 
```

# zend-framework - 不止一个 Zend_Cache 配置？

> ID：10464855
> 
> 赞同：2
> 
> 时间：2012-05-05T18:39:40.753
> 
> 标签：zend-framework, zend-cache

是否可以有两个不同的缓存实例`Zend_Cache`？例如，如果我想拥有一组永久存储的文件，除非我删除它们，而另一组每分钟都会失效——我可以这样做吗？

[在我所见的任何地方，](http://framework.zend.com/manual/en/zend.cache.html)我总是看到只使用一个前端和后端配置。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:33:07.567

您只需创建两个不同的 Zend_Cache 实例并将它们放在方便的地方。我做过一次这样的事情，在 boostrap 中实例化缓存实例，然后将它们粘贴到注册表中，如下所示：

```
protected function _initCache(){
    $this->bootstrap('config');
    $config = Zend_Registry::get('config')->myapp->cache;

    $cache = Zend_Cache::factory(
      $config->frontend->name,
      $config->backend->name,
      $config->frontend->opts->toArray(),
      $config->backend->opts->toArray()
    );
    Zend_Registry::set('cache',$cache);
    return $cache;
  }

  protected function _initUserCache(){
    $this->bootstrap('config');
    $config = Zend_Registry::get('config')->myapp->othercache;

    $cache = Zend_Cache::factory(
      $config->frontend->name,
      $config->backend->name,
      $config->frontend->opts->toArray(),
      $config->backend->opts->toArray()
    );
    Zend_Registry::set('othercache',$cache);
    return $cache;

  } 
```

因此，Zend_Cache 的设计实际上并没有限制您可以拥有的不同缓存的数量。您可以独立配置它们，使用您喜欢的任何前端和后端。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T12:36:13.273

例如，您可以使用 cachemanager 资源：

```
resources.cachemanager.foo.frontend.name = Core
resources.cachemanager.foo.frontend.options.lifetime = 300
resources.cachemanager.foo.frontend.options.automatic_serialization = true
resources.cachemanager.foo.frontend.options.cache_id_prefix = some_prefix
resources.cachemanager.foo.backend.name = Memcached
resources.cachemanager.foo.backend.options.lifetime = 300 
```

“foo”是缓存键，你可以指定任意多个。

接下来我将缓存管理器放入 Zend_Registry（在 Bootstrap 中）

```
protected function _initCache()
{
        Zend_Registry::set('Zend_Caches', $this->bootstrap('cachemanager')
                                               ->getPluginResource('cachemanager')
                                               ->getCacheManager());
} 
```

使用情况（无处不在）

```
Zend_Registry::get('Zend_Caches')->foo 
```

# jquery - jQuery - 文件保存错误

> ID：10464860
> 
> 赞同：0
> 
> 时间：2012-05-05T18:40:12.663
> 
> 标签：jquery

保存我使用过 jQuery 的 php 文件时出现错误。我找到了给出错误消息的确切脚本，并且还破坏了页面上的 jQuery。谁能告诉这有什么问题？我不明白为什么它会给我一个编码错误。

```
$(document).ready(function() {
    var left = 0;
    $('#breadcrumbs-list > li').each(function() {
        $(this).css('left', left + 'px');
        left += 100;
    });​
});​ 
```

错误：文档的当前编码无法正确保存文档内的所有字符。您可能希望更改为 UTF-8 或支持此文档中的特殊字符的编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:43:33.800

您的代码中至少有两个非法的不可见字符。据我所知，它们都在最后两个分号之后。

尽可能将光标放在每个分号的右侧，并使用退格键。您会注意到其中一个退格键不会移动光标。那是被删除的非法字符。

您也可以在不实际退格的情况下观察此行为。只需使用箭头键移动光标，您会再次注意到，当遇到不可见字符时，光标不会因为那一次按键而移动。

* * *

确切的字符是`"\u200B"`在这两种情况下。

这是另一个解释该字符是什么[的 StackOverflow 问题。](https://stackoverflow.com/questions/2973698/whats-html-character-code-8203)

# android - 覆盖 onDraw 时是否应该考虑视图翻译？

> ID：10464871
> 
> 赞同：0
> 
> 时间：2012-05-05T18:41:40.143
> 
> 标签：android, drawing, transformation, android-canvas

覆盖时我应该考虑视图翻译`onDraw()`吗？或者它已经应用于画布翻译？

即我应该执行

```
canvas.translate(getTranslationX(), getTranslationY()); 
```

在第一行`onDraw()`？

调用中应用于画布的所有转换是否会`onDraw()`在后续调用中持续存在？即我应该假设`canvas`每次都未转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:56:54.467

据我所知，画布不是持久的，因此您应该执行翻译。但是，您可以保存画布并恢复它：

[http://maohao.wordpress.com/2009/09/30/canvas-save-canvas-restore/](http://maohao.wordpress.com/2009/09/30/canvas-save-canvas-restore/)

[Android View.onDraw() 总是有一个干净的画布](https://stackoverflow.com/questions/2423327/android-view-ondraw-always-has-a-clean-canvas)

[http://blahti.wordpress.com/2010/12/20/moving-views-in-android-part-1/](http://blahti.wordpress.com/2010/12/20/moving-views-in-android-part-1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:53:20.897

不，您不需要这样做。在调用 onDraw 之前应用视图的翻译。

正如 HardCoder 指出的那样，您对传递给 onDraw 的 Canvas 所做的状态更改不会持续到对 onDraw 的下一次调用。

# php - Symfony2 和 Vim 建议

> ID：10464879
> 
> 赞同：6
> 
> 时间：2012-05-05T18:42:43.863
> 
> 标签：php, vim, symfony, twig

我已经使用 Symfony2，当然还有 vim，但在不同的项目中。我想知道您在 Vim 中使用哪些插件、提示和建议来使用 Symfony2？

这也适用于 Twig 模板、主题、调试等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:59:01.093

我真的不认为 Symfony2 项目与任何其他 PHP 项目有很大不同（至少在 vim 方面）。我使用的唯一额外插件是[Jinja 高亮](http://www.vim.org/scripts/script.php?script_id=1856)插件，因为 Jinja 语法几乎与 Twig 相同。我也在 Django 中开发，所以我坚持使用那个，但是如果你想要 Twig 最新的东西，还有[Twig 突出显示插件。](https://github.com/beyondwords/vim-twig)

如果你想查看我的 vim 文件，它们在[github 上](https://github.com/ondrowan/vimfiles)，但是除了我上面描述的之外，没有什么真正的 Symfony2 特定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:46:52.590

我们使用[https://github.com/docteurklein/vim-symfony](https://github.com/docteurklein/vim-symfony)插件。帮助很大，我们使用 htmljinja 文件类型来突出显示模板。

# vb.net - 类不更新通过引用传递的变量

> ID：10464882
> 
> 赞同：2
> 
> 时间：2012-05-05T18:43:00.300
> 
> 标签：vb.net, variables, byref

我在 vb.net 中有一个类定义为公共类 A

A 类在 Load 上创建，每个程序循环调用一次

类 A 的构造函数包含参数（byref Value as long）

我有一个名为 varB 的全局变量，它在创建时传递给 A 类。

现在为什么在程序循环期间更改 varB 时，更改不会反映在类中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:17:20.073

If only that was so simple... ByRef only works inside the sub/function you called, to modifiy the variable you 'send', and after returning from that sub/function, no more changes are made.

```
Public Class ClassOne
    Public ValuefromClassOne As Integer
    Public Sub ChangeAValue(ByRef AValue As Integer)
        AValue = 12   ' This will modifiy the variable
        ValuefromClassOne = AValue   ' this will ONLY put 12 inside ValueFromClassOne
    End Sub
End Class

Public Class ClassTwo
    Public ValueFromClassTwo As Integer
    Public Sub CallToClassOne()
        ChangeAValue(ValueFromClassTwo)    ' this will ONLY put 12 into ValueFromClassTwo
        ValueFromClassTwo = 25    ' this will have effect only on ValueFromClassTwo - no link
    End Sub
End Class 
```

So if you want to have the value, you have to use an object (define new Class)

```
Public Class IntegerHolder
    Public Property AnInteger As Integer
End Class

Public Class ClassOne
    Public ValuefromClassOne As IntegerHolder
    Public Sub ChangeAValue(ByVal AValue As IntegerHolder)
        AValue.AnInteger = 12   ' This will modifiy the variable
        ValueFromClassOne.AnInteger = AValue.AnInteger   ' this will ONLY put 12 inside ValueFromClassOne
        ' !!!!! BUT with this : !!!!
        ValueFromClassOne = AValue
        ' Now you hold a copy of the variable given in argument of ChangeAValue 
    End Sub
End Class

Public Class ClassTwo
    Public ValueFromClassTwo As New IntegerHolder
    Public Sub CallToClassOne()
        ChangeAValue(ValueFromClassTwo)    ' this will ONLY put 12 into ValueFromClassTwo
        ValueFromClassTwo.AnInteger = 25    ' this will have effect on
        ' ValueFromClassTwo  AND  ValuefromClassOne
    End Sub
End Class 
```

But notice that a change on ValueFromClassTwo will be reflected, but not notified : use a public shared event in ClassTwo to notify / Add an event Handler in ClassOne to get notified.

# java - 反序列化其他对象内的对象内的 json 数组

> ID：10464886
> 
> 赞同：0
> 
> 时间：2012-05-05T18:43:19.033
> 
> 标签：java, json, jackson

可能有点类似于这个：[deserializing json with arrays](https://stackoverflow.com/questions/10017641/deserializing-json-with-arrays)，我也在关注这个：[Jackson multiple objects and huge json files](https://stackoverflow.com/questions/10411020/jackson-multiple-objects-and-huge-json-files)

我拥有的 json 非常大，所以简化后是这样的：

```
{ "foo"="bar", "x"="y",  "z"=[{"stuff"="stuff"}, {"more"="stuff"}, ...], ... } 
```

我的代码如下所示：

```
for (Iterator<Map> it = new ObjectMapper().readValues(new JsonFactory().createJsonParser(in), Map.class); it.hasNext();) {
    doSomethingWith(it.next());
} 
```

这在迭代文件中的对象时效果很好，我可以从我所在的对象中获得我喜欢的任何值。效果很好，但数组只是作为对象的 ArrayList 返回。所以我必须做类似的事情：

```
ArrayList z = (ArrayList) it.next().get("z");
for (Object o : z) {
    // Run mapper on o.
    // Do stuff.
} 
```

我确信这会起作用，但对我来说似乎有点混乱。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:15:15.297

哦，哎呀。看起来 ObjectMapper 的第一次运行为我做了一切。

所以我可以像这样更改我的代码：

```
ArrayList<Map> z = (ArrayList) it.next().get("z");
for (Map m : z) {
    // Run mapper on o.
    doSomethingWith(m.get("stuff");
} 
```

一切都很好。

# php - 如何回显填充的php数组

> ID：10464890
> 
> 赞同：0
> 
> 时间：2012-05-05T18:43:47.990
> 
> 标签：php, mysql, arrays, email, loops

我有这个代码：

```
<?php 
$result_array1 = array();
$sql1 = "SELECT * FROM  `test_thing`";
$result1 = mysql_query("$sql1") or die($sql1.mysql_error());
while($row1 = mysql_fetch_array($result1))
    {
       $result_array1[] = $row1['email'];
    }
$sentmail = mail($result_array1,$subject,$message,$header);
?> 
```

我的问题是，如果我将邮件功能放在循环中，用户会收到许多电子邮件而不是一封，如果我将它放在循环之外，则不会发送任何电子邮件。我的目标是只向每个用户发送一封电子邮件，但该电子邮件应该包含许多混合电子邮件。我在其他论坛上读过它可以使用数组来完成。也许代码有错误。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:46:21.613

试试这个

```
<?php 
$result_array1 = array();
$sql1 = "SELECT * FROM  `test_thing`";
$result1 = mysql_query("$sql1") or die($sql1.mysql_error());
while($row1 = mysql_fetch_array($result1))
    {
       $result_array1[] = $row1['email'];
    }
$email = implode(",",$result_array1); // $email = "one@example.com,two@example.com,three@example.com"
$sentmail = mail($email,$subject,$message,$header);
?> 
```

的第一个参数`mail`可以是单个电子邮件 ID 或以逗号分隔的电子邮件 ID。这意味着您只需使用一个函数调用就可以将电子邮件发送给多个用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:46:01.703

只需使用以下 MySQL 查询：

```
SELECT DISTINCT email FROM  `test_thing` 
```

它将仅返回表中唯一的电子邮件地址。这样您就可以`mail()`在循环中使用，而不必担心重复的电子邮件地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T18:47:46.560

根据[php.net：http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

mail 接受收件人地址的字符串。你总是可以`implode(',', $result_array1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T18:54:48.600

恕我直言，邮件功能中的 $to 参数仅支持一封电子邮件。如果您想发送到多封电子邮件，请更改您的 $headers 并设置密件抄送；示例代码：

```
$headers.="Bcc: "; 
while($count < $count_recip){ 
$headers.=$recip[$count].", "; 
$count ++; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T19:07:06.287

这对我有用：

```
$result_array1 = array();
$sql1 = "SELECT DISTINCT * FROM  `test_thing` GROUP BY `user_id`";
$result1 = mysql_query("$sql1") or die($sql1.mysql_error());

while($row1 = mysql_fetch_array($result1))
{
    $result_array1[] = $row1['EmailAddress'];
}

$email = implode(",",$result_array1); 
```

我一起修改了一些答案。

也不会有重复的电子邮件，至少对我来说没有。

# operators - "||=" 运算符与 CoffeeScript 中的 "?=" 有何不同？

> ID：10464891
> 
> 赞同：18
> 
> 时间：2012-05-05T18:43:51.630
> 
> 标签：operators, coffeescript, assignment-operator

这两者有什么区别？从 Ruby 开始，我习惯于`apple ||= walrus`仅在 apple 为空时才将 apple 设置为等于 walrus。这在 JS/CS 中似乎是一样的，尽管 ?= 似乎做同样的事情。让我困惑的是：

```
apple = 0
walrus = 9
apple ?= walrus // outputs 0
apple ||= walrus // outputs 9 
```

笏

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-05T18:49:52.707

最好的办法是查看生成的 JS。

咖啡脚本：

```
apple = 0
walrus = 9
apple ?= walrus // outputs 0
apple ||= walrus // outputs 9 
```

JavaScript：

```
var apple, walrus;
apple = 0;
walrus = 9;
if (apple == null) apple = walrus;
apple || (apple = walrus); 
```

如您所见，`?=`显式检查是JS`null`中的某物。这与仅依赖于是否是虚假值`undefined`非常不同。`||=``apple`

再扩展一点`apple ||= walrus`就等同于`apple = apple || walrus`，所以任何真实的 apple 值都会使逻辑短路并且不会改变 apple 的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T18:48:24.943

`?=`是**存在**算子。它检查`null`和`undefined`。

`||=`如果我没记错的话，只需检查变量的值是否为“非假”......所以这意味着`0`是假的。

# wordpress - 在footer.php中链接页面的永久链接安全方式

> ID：10464892
> 
> 赞同：0
> 
> 时间：2012-05-05T18:43:52.397
> 
> 标签：wordpress, wordpress-theming

我目前正在为我的网站构建一个新主题，并且有点不知道将页面链接在一起的正确方法。如果我将链接直接写入，将访问者引导到另一个页面的正确方法是什么`footer.php`？

让我们在 footer.php 中考虑以下内容：

```
?>
    <a href="/a-link/">A Link</a>
<?php 
```

在我将永久链接结构更改为其他内容之前，这会很有效。

什么是正确的方法（不使用内置菜单或类似的WP）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:46:45.733

您可以使用`get_permalink`假设您的页面在 Wordpress 中。

请参阅此链接：[http ://codex.wordpress.org/Function_Reference/get_permalink](http://codex.wordpress.org/Function_Reference/get_permalink)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:54:02.987

上面的答案是 100% 正确的，但是为了在人们偶然发现这个问题时节省一些时间，我冒昧地把它写出来。

```
<a href="<?php echo get_permalink(12); ?>" title="<?php echo get_the_title(12); ?>"><?php echo get_the_title(12); ?></a> 
```

这涵盖了从悬停文本到动态页面标题的所有内容，因此如果您决定将“联系”更改为“联系我们”，您将不必记住更新`footer.php`文件。

# jsf - JSF 中的条件字符串连接/构建

> ID：10464895
> 
> 赞同：1
> 
> 时间：2012-05-05T18:44:17.587
> 
> 标签：jsf, web, conditional-statements

我正在尝试将 JSP 页面转换为 JSF（不允许使用 JSP 代码），但偶然发现了一个问题。注意：这是学术性的，因此没有“肮脏”的解决方案可以做到。

我有 jsp 代码，可以根据各种条件设置图像的图像源和替代文本。有串联和切换条件。这是在一个循环内。

现在，我可以重现遍历所有值的循环，如下所示：

```
 <ui:repeat value="#{gameapi.game.fieldsList}" var="field">                                          
     <h:graphicImage id="field#{field.fieldNr}" styleClass="field#{field.fieldNr}" 
                                                            url="..." alt="" title=""/>                                          
  </ui:repeat> 
```

但是，图像 url 和 alt 文本总共有 20 多种组合。显然，我怀疑为每种可能性编写有条件渲染或选择的图形图像标签是一个优雅的解决方案，因为这只会随着每一个额外的组合而变得更丑陋。我也无法在底层 java 代码中创建这些字符串，因为这会违反分离视图、模型和控制器的想法。

那么最好的解决方案是什么？这似乎是 JSF 的一个巨大弱点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:54:09.370

考虑使用[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)模式的变体。您可以将专用于查看逻辑的托管 bean 与业务逻辑托管 bean 分开。

```
<ui:repeat value="#{bizBean.list}" var="_row">
  <h:graphicImage
    url="#{viewModelBean.images[_row.outcome]}"
    alt="#{viewModelBean.alts[_row.outcome]}"
    title="#{viewModelBean.titles[_row.outcome]}" />
</ui:repeat> 
```

`viewModelBean`可以是具有一堆地图属性的应用程序范围的类型。这假设了一个相对简单的情况，但该模式适合更复杂的需求。

*注意：重复控件应该是[NamingContainer](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)，因此尝试在 VDL 中设置[客户端标识符是多余的。](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getClientId%28javax.faces.context.FacesContext%29)请参阅[此处](http://illegalargumentexception.blogspot.co.uk/2009/10/jsf-working-with-component-identifiers.html)了解更多信息。*

# sqlite - 如何从下到上检索 SQLite 数据库表值（最后一行到第一行）

> ID：10464896
> 
> 赞同：1
> 
> 时间：2012-05-05T18:44:30.430
> 
> 标签：sqlite, blackberry, gridview, cursor

我正在尝试将 sqlite 表的元素检索到黑莓中的网格上。这是我的代码：

```
 Statement statement56 = db.createStatement("SELECT date,bill,rec,narration,id FROM Temp4");
  statement56.prepare();
  statement56.execute();

  Cursor c = statement56.getCursor();

  for (int i = 1; i < grid.getRowCount(); i++)
  {
      System.out.println("Inside first for loops");
      for (int j = 0; j < grid.getColumnCount() ; j++)
      {
          System.out.println("Inside second for loops");

          while(c.next()) 
          {

              System.out.println("Inside while"); 
              Row r;
              r = c.getRow();

              for (int k = 4; k >=0; k--)
              {
                  System.out.println("Inside for loops");
                  if(k==0 || k==3)
                  {
                      System.out.println("Retrieving date or narration");
                      grid.insert(new LabelField(r.getString(k)),i,j);
                  }  
                  else
                  {
                      System.out.println("Retrieving other values"); 
                      //  String p = r.getString(k)
                      String p = "" + r.getInteger(k);
                      grid.insert(new LabelField(p),i,j);
                  }                           
              } 

              // c.previous();
              //c--;
              System.out.println("Exiting while");                        
          }

          System.out.println("Exiting sec for");
          break;
      }
      System.out.println("Exiting first for");

      break;
   }

   statement56.close(); 
   db.close(); 
```

这以自下而上的方式为我提供了我的 sqlite 表的值。我希望它与插入到 sqlite 表中的方式完全相同。

即如果我的表包含

```
a b c d e
f g h i j
k l m n o
p q r s t
u v w x y 
```

我在黑莓的网格布局中得到的输出是

```
u v w x y
p q r s t
k l m n o
f g h i j 
a b c d e 
```

任何了解此解决方案的人。期待合理的帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:55:31.547

只需添加`ORDER BY`您的 SQL 查询：

```
SELECT date,bill,rec,narration,id FROM Temp4 ORDER BY id DESC 
```

您可以使用另一个排序字段来代替`id`它是否更合适。

如果没有要排序的字段，可以使用伪字段`ROWID`。此字段可用作任何 SQLite 表中的自动增量字段：

```
SELECT date,bill,rec,narration,id FROM Temp4 ORDER BY ROWID DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:55:01.867

如果您有如下行：

```
Id Name
1  Row1
2  Row2
3  Row3 
```

使用 ORDER BY CLAUSE 可以为您提供如下结果：

```
Id Name
3  Row3
2  Row2
1  Row1 
```

在您的情况下，您可以使用以下查询：

```
SELECT date,bill,rec,narration,id FROM Temp4 ORDER BY id DESC 
```

# c# - 如何通过反射找到重载的方法

> ID：10464898
> 
> 赞同：5
> 
> 时间：2012-05-05T18:44:40.660
> 
> 标签：c#, generics, reflection, methodinfo

这是与[我之前提出的另一个问题](https://stackoverflow.com/questions/10436905/c-sharp-reflection-how-to-use-an-object-as-a-type-parameter/10437050)相关的问题。我有一个重载的方法：

```
public void Add<T>(SomeType<T> some) { }

public void Add<T>(AnotherType<T> another) { } 
```

如何通过反射找到每种方法？例如，我怎样才能`Add<T>(SomeType<T> some)`通过反射获得方法？你能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T19:09:02.633

这里的技巧是描述您希望参数为`SomeType<T>`，方法`T`的泛型类型在哪里`Add`。

除此之外，它只是使用标准反射，就像 CastroXXL 在他的回答中建议的那样。

我是这样做的：

```
var theMethodISeek = typeof(MyClass).GetMethods()
    .Where(m => m.Name == "Add" && m.IsGenericMethodDefinition)
    .Where(m =>
            {
                // the generic T type
                var typeT = m.GetGenericArguments()[0];

                // SomeType<T>
                var someTypeOfT = 
                    typeof(SomeType<>).MakeGenericType(new[] { typeT });

                return m.GetParameters().First().ParameterType == someTypeOfT;
            })
    .First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:52:32.173

查看 MethodInfo 成员： http: [//msdn.microsoft.com/en-US/library/system.reflection.methodinfo_members (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/system.reflection.methodinfo_members(v=vs.80).aspx)

`IsGenericMethodDefinition`和有辅助属性`GetParameters`。两者都可以帮助您弄清楚什么是什么功能。

# c# - 从字符串中获取特定数字

> ID：10464899
> 
> 赞同：5
> 
> 时间：2012-05-05T18:44:54.790
> 
> 标签：c#, string, split

在我当前的项目中，我必须大量使用子字符串，我想知道是否有更简单的方法可以从字符串中取出数字。

示例：我有一个这样的字符串：12 text text 7 text

我希望能够获得第一个号码组或第二个号码组。因此，如果我要求数字集 1，我将得到 12 作为回报，如果我要求数字集 2，我将得到 7 作为回报。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T18:51:45.777

这将从字符串创建一个整数数组：

```
using System.Linq;
using System.Text.RegularExpressions;

class Program {
    static void Main() {
        string text = "12 text text 7 text";
        int[] numbers = (from Match m in Regex.Matches(text, @"\d+") select int.Parse(m.Value)).ToArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:47:30.547

看起来很适合[`Regex`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx).

基本的正则表达式将`\d+`匹配（一个或多个数字）。

您将遍历从`Matches`返回的集合`Regex.Matches`并依次解析每个返回的匹配项。

```
var matches = Regex.Matches(input, "\d+");

foreach(var match in matches)
{
    myIntList.Add(int.Parse(match.Value));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T18:47:40.973

尝试使用正则表达式，您可以匹配`[0-9]+`将匹配字符串中任何数字的匹配。使用这个正则表达式的 C# 代码大致如下：

```
Match match = Regex.Match(input, "[0-9]+", RegexOptions.IgnoreCase);

// Here we check the Match instance.
if (match.Success)
{
    // here you get the first match
    string value = match.Groups[1].Value;
} 
```

当然，您仍然必须解析返回的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T18:49:03.017

你可以使用正则表达式：

```
Regex regex = new Regex(@"^[0-9]+$"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T18:52:39.310

您可以使用 string.Split 将字符串分成几部分，然后使用应用 int.TryParse 的 foreach 遍历列表，如下所示：

```
string test = "12 text text 7 text";
var numbers = new List<int>();
int i;
foreach (string s in test.Split(' '))
{
     if (int.TryParse(s, out i)) numbers.Add(i);
} 
```

现在 numbers 有有效值的列表

# php - 我们应该删除 facebook 应用程序生成的请求吗？

> ID：10464904
> 
> 赞同：2
> 
> 时间：2012-05-05T18:45:47.963
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在使用 facebook 应用程序生成的请求向用户发送通知。我注意到一旦用户登录到应用程序，通知就会消失。请求会自动删除吗？我的意思是，不对请求 ID 执行任何操作。在用户生成的请求的情况下，我们曾经删除这些请求。在应用程序生成的请求的情况下是否也必须删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:56:32.873

> 一旦请求被接受，开发者有责任删除它。有关如何删除请求的更多信息，请参阅删除请求文档。

[资源](https://developers.facebook.com/docs/reference/dialogs/requests/)

这意味着是的，您必须在使用后删除所有请求

# vb.net - 设置 Microsoft Word 的默认打印页面大小

> ID：10464906
> 
> 赞同：1
> 
> 时间：2012-05-05T18:45:56.123
> 
> 标签：vb.net, printing, ms-word

我正在使用 Microsoft.Office.Interop.Word 使用 vb.net 和 microsoft word，一切都很好。我唯一的问题是我找不到将默认页面尺寸**打印**设置从“letter”更改为“A4”的方法。这段代码为 Crystal 报表做这项工作，但不是为 Word 做的

`Dim pp As New System.Drawing.Printing.PrintDocument For i = 0 To pp.DefaultPageSettings.PrinterSettings.PaperSizes.Count - 1 If pp.DefaultPageSettings.PrinterSettings.PaperSizes.Item(i).Kind = System.Drawing.Printing.PaperKind.A4 Then pp.DefaultPageSettings.PaperSize = pp.DefaultPageSettings.PrinterSettings.PaperSizes.Item(i) Exit For End If Next`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T20:51:47.267

您应该在 Word 文档实例上更改 PageSetup 界面的 PaperSize。

```
Imports Microsoft.Office.Interop.Word
....

Dim myWordApp as Application = New Application();  
Dim myWordDoc As Document = myWordApp.Documents.Open("your_file_name_here")
myWordDoc.PageSetup.PaperSize = WdPaperSize.wdPaperA4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:22:55.760

参考：[http ://social.msdn.microsoft.com/forums/en-US/vsto/thread/45152591-1f3e-4d1e-b767-ef030be9d9f2](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/45152591-1f3e-4d1e-b767-ef030be9d9f2)

由于页面大小可能因节而异，因此最好设置 Document.Section 对象的 PageSetup 属性。例如，您可以遍历文档的所有部分：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    Application app = Globals.ThisAddIn.Application;
    Word.Document doc = app.ActiveDocument;
    foreach (Section section in doc.Sections)
    {
        section.PageSetup.PaperSize = WdPaperSize.wdPaperA4;
    }
} 
```

在创建或打开文档时添加 locic 以设置纸张大小取决于您，我猜您需要确定正在打开的文档是否故意以非 A4 尺寸保存。

**编辑：这确实有效**，我不知道您的评论是什么意思`ThisAddIn isnt a member or Globals and ActiveDocument isnt a member of Application in VB.NET`-您不能跳过前两行，这是 VB.Net 版本：

```
Private Sub ThisAddIn_Startup(sender As Object, e As System.EventArgs)
    Dim app As Application = Globals.ThisAddIn.Application
    Dim doc As Word.Document = app.ActiveDocument
    For Each section As Section In doc.Sections
        section.PageSetup.PaperSize = WdPaperSize.wdPaperA4
    Next
End Sub 
```

您需要做的就是 > Visual Studio > 创建新项目 > Office > Word 2010（或 2007）加载项并粘贴上面的代码。这是一个屏幕截图，显示它适用于 A4 和 Letter：

![在此处输入图像描述](../Images/17b15ed09bcc617b37537e141a93dada.png)

您可能面临的唯一问题是当打印机没有尺寸纸张时，您会收到此错误：`Requested PaperSize is not available on the currently selected printer.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T16:10:55.643

我发布了这个问题的另一个答案，因为接受的答案不会刷新文档或处理页面方向。所以以防万一有人需要这个，我发现这是一个更好的解决方案......

```
 Microsoft.Office.Interop.Word.Application app = Globals.ThisAddIn.Application;
            Microsoft.Office.Interop.Word.Document doc = app.ActiveDocument;

            foreach (Section section in doc.Sections)
            {
                if(section.PageSetup.Orientation == WdOrientation.wdOrientLandscape)
                {
                    section.PageSetup.PageWidth = 841.88976378F;
                    section.PageSetup.PageHeight = 595.275590551F;

                }
                else
                {
                    section.PageSetup.PageWidth = 595.275590551F;
                    section.PageSetup.PageHeight = 841.88976378F;

                }

            } 
```

# python - 使用密码解压缩 zip 文件失败 - Python 中的错误？

> ID：10464913
> 
> 赞同：4
> 
> 时间：2012-05-05T18:46:25.093
> 
> 标签：python, exception, zip

我在 python 中遇到一个奇怪的错误。当我尝试使用 zip 模块提取受密码保护的文件时，尝试将“oy”设置为密码时出现异常。其他一切似乎都有效。ZipFile 模块中的错误？

```
import zipfile    
zip = zipfile.ZipFile("file.zip", "r")
zip.setpassword("oy".encode('utf-8'))
zip.extractall() #Above password "oy" generates the error here
zip.close() 
```

这是我得到的例外：

```
Traceback (most recent call last):
  File "unzip.py", line 4, in <module>
    zip.extractall()
  File "C:\Program Files\Python32\lib\zipfile.py", line 1002, in extrac
l
    self.extract(zipinfo, path, pwd)
  File "C:\Program Files\Python32\lib\zipfile.py", line 990, in extract
    return self._extract_member(member, path, pwd)
  File "C:\Program Files\Python32\lib\zipfile.py", line 1035, in _extra
member
    shutil.copyfileobj(source, target)
  File "C:\Program Files\Python32\lib\shutil.py", line 65, in copyfileo
    buf = fsrc.read(length)
  File "C:\Program Files\Python32\lib\zipfile.py", line 581, in read
    data = self.read1(n - len(buf))
  File "C:\Program Files\Python32\lib\zipfile.py", line 633, in read1
    max(n - len_readbuffer, self.MIN_READ_SIZE)
zlib.error: Error -3 while decompressing: invalid block type 
```

如果我使用 UTF-16 作为编码，我会收到此错误：

```
zlib.error: Error -3 while decompressing: invalid distance too far back 
```

**编辑** 我现在已经在虚拟 Linux 机器上测试了以下内容：

*   Python版本：2.6.5
*   我创建了一个受密码保护的 zip 文件`zip -e file.zip hello.txt`

现在看来问题出在了别的地方。现在，即使密码错误，我也可以提取 zip 文件！

```
try:
    zip.setpassword("ks")  # "ks" is wrong password but it still extracts the zip
    zip.extractall()
except RuntimeException:
    print "wrong!" 
```

有时我可以使用错误的密码提取 zip 文件。然后提取文件（在 zip 文件中），但是当我尝试打开它时，信息似乎已损坏/解密。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T20:04:15.977

如果密码有问题，通常会出现以下异常：

```
RuntimeError: ('Bad password for file', <zipfile.ZipInfo object at 0xb76dec2c>) 
```

由于您的异常抱怨块类型，很可能您的 .zip 存档已损坏，您是否尝试使用独立的解压缩实用程序解压缩它？

或者，也许您使用了一些有趣的东西，例如 7zip 来创建它，它会生成不兼容的 .zip 档案。

* * *

您没有提供足够的信息（操作系统版本？Python 版本？ZIP 存档创建者和内容？这些存档中是否有很多文件或单个存档中的单个文件？所有这些文件是否都给出相同的错误，或者您可以解压缩其中的一些？ )，所以这里是快速问答部分，它应该可以帮助您找到并解决问题。

**Q1。**这是 Python 中的错误吗？

**A1。**不太可能。

**Q2。**什么可能导致这种行为？

**A2。**损坏的 zip 文件，不兼容的 zip 压缩器——因为你什么都不说，所以很难指出确切的原因。

**Q3。**如何找到原因？

**A3。**尝试隔离问题，找到给您错误的文件，尝试使用`zip.testzip()`和/或使用不同的解压缩实用程序解压缩该特定文件，分享结果。只有您可以访问有问题的文件，所以**除非您自己尝试做某事，否则没有人可以帮助您**。

**Q4。**如何解决这个问题？

**A4。**你不能。使用不同的拉链提取器，`ZipFile`将不起作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T13:37:13.333

在提取文件之前尝试使用该`testzip()`方法检查文件的完整性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T19:35:21.203

它可能是 zipfile 中的错误，或者是您的 zip 实现中的错误。我注意到您的行号与我的不匹配，所以我猜这是我拥有的当前 3.2.3 版本之前的 python 3.2。

现在，至于您的代码，它确实适用于 Linux 上的 Python 3.2.3。我建议您更新到最新的 3.2.x，因为似乎有许多与 zipfile 和 zlib 相关的错误修复，包括对崩溃的修复。

# android - 我如何从原始字符串中搜索子字符串

> ID：10464915
> 
> 赞同：-4
> 
> 时间：2012-05-05T18:46:39.157
> 
> 标签：android

```
String ORIGINAL = "This is my demo string";
String search = "demo"; 
```

如果“demo”退出到 ORIGINAL 中，我想得到结果为真或假，那么结果为真，否则返回假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:46:11.160

```
if(ORIGINAL.contains(search))
     //found
else
    //not found 
```

# c++ - extern "C" 时不能使用 cout/endl

> ID：10464924
> 
> 赞同：6
> 
> 时间：2012-05-05T18:47:57.363
> 
> 标签：c++, extern

我希望有人可以帮助我解决这个小问题，因为我一无所获。首先，代码如下：

```
#include<string>
#include<iostream>
#include<Windows.h>

using namespace std;

extern "C"
{
#include<hidsdi.h>
#include<SetupAPI.h>
}

int main()
{
    int iQuit;

    cout << "Testing Program" << endl;

    return 0;
} 
```

它不会让我使用标准的东西（即 cout、cin、endl 等）。只有当我取出所有外部“C”代码时，它才允许我使用它……这是为什么呢？有没有办法解决这个问题？

编辑：对不起，忘记告诉你确切的错误：它说标识符“cout”是未定义的

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:56:33.440

你的编译环境有问题。该代码没有任何问题。它编译并运行良好。

在对您说的问题的评论中：

> 我正在学习编写驱动程序，以便可以使用键盘和鼠标等设备进行操作，因此我正在使用 WDK。如果我错了，请纠正我，但我认为您需要使用 extern "C" 来使用这些头文件？

事实上，您应该简单地用 C 而不是 C++ 编写代码来进行驱动程序开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:47:07.767

我发现了问题，我没有在 VC++ 目录中以正确的顺序添加目录。

顺序应该是：

```
C:\WinDDK\7600.16385.1\inc\ddk
$(VCInstallDir)include
$(VCInstallDir)atlmfc\include
C:\WinDDK\7600.16385.1\inc\api
$(WindowsSdkDir)include
$(FrameworkSDKDir)\include 
```

不知道为什么需要按这个顺序，但是现在可以了……很奇怪……

# python - Tk 网格无法正确调整大小

> ID：10464928
> 
> 赞同：6
> 
> 时间：2012-05-05T18:48:11.223
> 
> 标签：python, grid, resize, tkinter

我正在尝试在 python 中使用 Tkinter 编写一个简单的 ui，但我无法让网格中的小部件调整大小。每当我调整主窗口的大小时，条目和按钮小部件根本不会调整。

这是我的代码：

```
 class Application(Frame):
     def __init__(self, master=None):
         Frame.__init__(self, master, padding=(3,3,12,12))
         self.grid(sticky=N+W+E+S)
         self.createWidgets()

     def createWidgets(self):
         self.dataFileName = StringVar()
         self.fileEntry = Entry(self, textvariable=self.dataFileName)
         self.fileEntry.grid(row=0, column=0, columnspan=3, sticky=N+S+E+W)
         self.loadFileButton = Button(self, text="Load Data", command=self.loadDataClicked)
         self.loadFileButton.grid(row=0, column=3, sticky=N+S+E+W)

         self.columnconfigure(0, weight=1)
         self.columnconfigure(1, weight=1)
         self.columnconfigure(2, weight=1)

 app = Application()
 app.master.title("Sample Application")
 app.mainloop() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T19:17:47.967

添加一个根窗口并对其进行列配置，以便您的 Frame 小部件也可以扩展。这就是问题所在，如果您没有指定一个根窗口并且框架本身没有正确扩展，那么您将获得一个隐式根窗口。

```
root = Tk()
root.columnconfigure(0, weight=1)
app = Application(root) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T22:23:35.940

一个工作示例。请注意，您必须为使用的每一列和每一行明确设置配置，但下面按钮的列跨度是一个大于显示列数的数字。

```
## row and column expand
top=tk.Tk()
top.rowconfigure(0, weight=1)
for col in range(5):
    top.columnconfigure(col, weight=1)
    tk.Label(top, text=str(col)).grid(row=0, column=col, sticky="nsew")

## only expands the columns from columnconfigure from above
top.rowconfigure(1, weight=1)
tk.Button(top, text="button").grid(row=1, column=0, columnspan=10, sticky="nsew")
top.mainloop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:11:02.693

我为此使用包。在大多数情况下，它就足够了。但不要混合两者！

```
class Application(Frame):
     def __init__(self, master=None):
         Frame.__init__(self, master)
         self.pack(fill = X, expand  =True)
         self.createWidgets()

     def createWidgets(self):
         self.dataFileName = StringVar()
         self.fileEntry = Entry(self, textvariable=self.dataFileName)
         self.fileEntry.pack(fill = X, expand = True)
         self.loadFileButton = Button(self, text="Load Data", )
         self.loadFileButton.pack(fill=X, expand = True) 
```

# c - 关于 LINUX 中的分段错误

> ID：10464930
> 
> 赞同：2
> 
> 时间：2012-05-05T18:48:22.333
> 
> 标签：c, linux, segmentation-fault, printf, token

我正在做一个在 LINUX 中开发 SIC/XE 汇编器的作业。

当我编写代码时，我遇到了一些错误，但我不知道为什么会这样。你能解释一下为什么会出现这个问题吗？

下面显示的代码显示带有令牌的“test.asm”文件。

```
178             printf("token1: %s \t",token1);
179             printf("token2: %s \t",token2);
180             printf("token3: %s \t",token3);
181             printf("token4: %s \t",token4);
182             printf("ss\nss"); 
```

据此，尤其是“ss\nss”语句，我希望打印出如下所示的结果。

```
 sstoken1: LDT   token2: LENGTH  token3: (null)  token4: (null)  ss
    sstoken1: WLOOP         token2: TD      token3: OUTPUT  token4: (null)  ss
    ss 
```

但是，当我将这个程序运行到最后时，我遇到了分段错误并遇到了奇怪的情况。

```
sstoken1: OUTPUT        token2: BYTE    token3: X'05'   token4: (null)  ss
sstoken1: END   token2: FIRST   token3: (null)  token4: (null)  ss
Segmentation fault. 
```

“Segmentation fault”语句之前没有“ss”。我不知道为什么。请你给我解释一下好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:16:46.257

我相信它是由 SEGV 在刷新标准输出之前杀死的进程打印的。尝试添加：

```
fflush(stdout); 
```

在 printf 语句之后。

# jsf - 以相同的形式显示 Primeface 的 p:fileUpload 中的 UploadedFile 内容，无需刷新

> ID：10464933
> 
> 赞同：3
> 
> 时间：2012-05-05T18:48:33.067
> 
> 标签：jsf, file-upload, primefaces

我正在尝试实现 ImageUpload 并使用 DynamicImage 在同一页面上立即显示上传的图像。我的问题是，我无法强制刷新 p:graphicImage 内容并在上传后显示上传的图像。

```
@ManagedBean(name = "myformbean")
@Controller
@ViewScoped
@Data
public class MyFormBean implements Serializable {

    private StreamedContent listImage = null;

    public StreamedContent getListImage() {
        if (listImage == null) {
            try {
                listImage = new DefaultStreamedContent(new FileInputStream("E:/t.jpg"), "image/png"); // load a dummy image
            }
            catch (FileNotFoundException e) {
                e.printStackTrace();
            }
        }

        return listImage;
    }

    public void handleFileUpload(FileUploadEvent event) {
        final UploadedFile uploadedFile = event.getFile();

        listImage = new DefaultStreamedContent(new ByteArrayInputStream(uploadedFile.getContents()), "image/png");
    }
} 
```

在 .xhtml 文件中：

```
<p:graphicImage value="#{myformbean.listImage}" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T19:56:14.020

如果您的上传完成了工作

您需要做的就是将 id 设置为`<p:graphicImage`这样

```
<p:graphicImage id="refreshMe" value="#{myformbean.listImage}" /> 
```

并在您`<p:fileUpload`设置的更新属性中指向图像

像这样

```
<p:fileUpload  auto="true"  ... update="refreshMe" .... 
```

# php - 如何在 Sublime Text 2 中自动检查代码（PHP、Python、HTML、Javascript）中的错误？

> ID：10464936
> 
> 赞同：2
> 
> 时间：2012-05-05T18:48:46.327
> 
> 标签：php, python, plugins, package, sublimetext2

使用时如何自动检查代码中的错误`Sublime Text 2`？或者，是否有`Sublime Text 2`包/插件来检查代码是否有错误？

我的主要语言是 Python、PHP、Javascript、HTML，所以，我主要寻找可以帮助他们的东西。

-- 理解所需工具的示例：

```
<?php
    echa 'test'
?> 
```

该工具会返回（或类似的东西）没有方法并且缺少`echa`冒号（ ）。`;`

```
<html>
    <h1>Test</h1>
</.html> 
```

该工具应该返回（或类似的东西）`HTML`标签没有关闭并且没有名为的标签`.html`。

```
<script type='text/javascript'>
    function(){
        document.writ('Test');
    }
</script> 
```

该工具应该返回（或类似的东西）没有`writ`方法。

这个简单的例子只是为了解释更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:01:27.027

我主要使用 sublime2 进行 Python 编程，而 SublimeLinter 非常棒，它可以找到未使用的导入/变量并让你遵循 PEP8

显然它也支持 PHP :)

[https://github.com/Kronuz/SublimeLinter](https://github.com/Kronuz/SublimeLinter)

这里也是一些不错的 python 自动补全插件[https://github.com/JulianEberius/SublimeRope](https://github.com/JulianEberius/SublimeRope)

# codeigniter - 带有问号的 URI 段

> ID：10464940
> 
> 赞同：2
> 
> 时间：2012-05-05T18:49:17.497
> 
> 标签：codeigniter, uri

对于我的 Rest WebService，我需要一些变化来将城市或地区或其他东西放入其中。所以我的 URI 应该是这样的：

```
/rest/rating/locations?city=London 
```

现在我使用以下函数来获取最后一个 URI 段：

```
$segcount = $this->uri->total_segments();
$lastseg = $this->uri->segment($segcount); 
```

问题就在这里，问号中的所有内容都被删除了！被保存的变量只是：位置

我已经尝试在 config.php 中配置以下内容：

```
$config['uri_protocol'] = 'PATH_INFO';
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-?';
$config['enable_query_strings'] = TRUE; 
```

有没有其他可能用问号保存整个片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:57:51.530

首先，确保你有：

```
$config['allow_get_array'] = TRUE; 
```

`enable_query_strings`实际上完全是另外一回事，一个很少使用的旧功能。

URI 类在这里仍然无法帮助您，您必须单独引用查询字符串。

```
$segcount = $this->uri->total_segments();
$lastseg = $this->uri->segment($segcount);

// Either of these should work
$query_string = http_build_query($this->input->get());
$query_string = $this->input->server('QUERY_STRING');

$lastseg_with_query = $lastseg.'?'.$query_string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:55:36.103

在您的配置文件中，确保以下设置为`TRUE`：

```
$config['allow_get_array']= TRUE; 
```

# c#-4.0 - Ninject MVC 2 扩展出错 - CreateKernel()

> ID：10464942
> 
> 赞同：0
> 
> 时间：2012-05-05T18:49:41.270
> 
> 标签：c#-4.0, asp.net-mvc-2, ninject.web.mvc

我的 Global.asax.cs 中有以下内容：

```
using System.Web.Mvc;
using System.Web.Routing;
using HandiGamer.WebUI.ConditionalValidation;
using HandiGamer.Domain.Concrete;
using Ninject;
using Ninject.Web.Common;
using System.Reflection;
using HandiGamer.Domain.Abstract; 

//namespace....

public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("favicon.ico");

        routes.MapRoute(
            null,
            "Reviews/{id}",
            new { controller = "Reviews", action = "ShowReviewById" },
            new { id = @"\d+" }
        );

        routes.MapRoute(
            null,
            "Reviews/Latest",
            new { controller = "Reviews", action = "Latest"}
        );

        routes.MapRoute(
            null,
            "Reviews/{slug}",
            new { controller = "Reviews", action = "ShowReviewBySlug" },
            new { slug = @"[0-9a-zA-Z\-]+" }
        );

        routes.MapRoute(
            null,
            "News/{id}",
            new { controller = "News", action = "ShowNewsById" },
            new { id = @"\d+" }
        );

        routes.MapRoute(
            null,
            "News/{slug}",
            new { controller = "News", action = "ShowNewsBySlug" },
            new { slug = @"[0-9a-zA-Z\-]" }
        );

        routes.MapRoute(
            null,
            "Articles/{id}",
            new { controller = "Articles", action = "ShowArticleById" },
            new { id = @"\d+" }
        );

        routes.MapRoute(
            null,
            "Articles/{slug}",
            new { controller = "Articles", action = "ShowArticleBySlug" },
            new { slug = @"[0-9a-zA-Z\-]" }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            null,
            "{*path}",
            new { controller = "Error", action = "Http404" }
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        RegisterRoutes(RouteTable.Routes);
        DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false;
        DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(RequiredIfAttribute), typeof(RequiredIfValidator));
    }

    protected override IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<IArticleRepository>().To<HGArticleRepository>();
        kernel.Bind<IGameRepository>().To<HGGameRepository>();
        kernel.Bind<INewsRepository>().To<HGNewsRepository>();
        kernel.Load(Assembly.GetExecutingAssembly());
        return kernel;
    }
} 
```

但是在构建我的解决方案时，我收到以下错误：

`Error 1 'HandiGamer.MvcApplication.CreateKernel()': no suitable method found to override C:\Users\Kevin\documents\visual studio 2010\Projects\HandiGamer\HandiGamer\Global.asax.cs 92 36 HandiGamer.WebUI`

有任何想法吗？我几乎复制了 github 示例应用程序中的内容，所以我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:53:33.420

您必须从 NinjectHttpAplication 派生

# eclipse - Python 多处理管道在 PyDev 中无法正确地 recv()，在其他任何地方都可以正常工作

> ID：10464946
> 
> 赞同：1
> 
> 时间：2012-05-05T18:50:21.543
> 
> 标签：eclipse, pydev

这是我的另一个问题。我发现这个错误只发生在 PyDev 中。如果我从命令行或 IDLE 运行代码，则会产生正确的输出。在 PyDev 中，什么也没有发生：

这适用于 Python 3.2.2、Eclipse 3.7.2：

```
from multiprocessing import Pipe, Process

def f(r):
    print(r.recv())

if __name__ == '__main__':
    q, r = Pipe()
    p = Process(target=f, args=(r,))
    p.start()
    q.send([42, None, 'hello'])
    p.join() 
```

主线程创建一个新`Process`的`p`, 并发送`r`一个双向连接对象给 function `f()`。当进程`p`启动时，我希望`r.recv()`阻塞（据我所知，这意味着这个进程将无限期地等待，直到有东西通过管道），直到主进程通过 with 发送一些对象`q.send`。

然后`p.join()`应该让主进程等到`p`运行它的过程。

但是什么都没有发生。如果我向 中添加一条`print`语句`f()`，那里也不会发生任何事情，就好像`f()`从来没有运行过并且`p.start()`没有功能一样。

你能解释一下为什么这在 PyDev 中不起作用以及可能会修复什么吗？

# php - 上传图片并与我的帖子一起显示

> ID：10464947
> 
> 赞同：1
> 
> 时间：2012-05-05T18:50:34.840
> 
> 标签：php, mysql, image, upload, content-management-system

我需要有关功能的帮助，以便我可以从自定义 CMS 上传图片，然后将其与我的帖子一起显示。看下面的图片： [我想要这张图片占位符中的图片](http://i.stack.imgur.com/zWWwJ.png) 我不太擅长 PHP 或 Mysql 所以请给我一个简单的答案。

我会把我的代码贴在 pastebin 上，方便你在那里观看！[http://pastebin.com/gBVe9sZV](http://pastebin.com/gBVe9sZV)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:54:07.617

如果您想在帖子中显示一组图像，您需要将这些图像连同它们关联的帖子 ID 一起存储在一个表格中。

提交表单后，您可能正在通过[`$_POST`](http://www.php.net/manual/en/reserved.variables.post.php). 您的图像将出现在[`$_FILES`](http://www.php.net/manual/en/reserved.variables.files.php). 在您的帖子表上执行插入后，您可以调用[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php)以获取该帖子的新主键 ID。

帖子 ID 可以与对各种图像的引用一起存储在您的*图像表中。*我在这里假设您没有生成自己的帖子 ID，但是如果您是，则可以使用它。

另请参阅php.net 上的[处理文件上传。](http://www.php.net/manual/en/features.file-upload.php)

每当您查询数据库以向读者显示帖子时，请根据公共帖子 ID 对图像表执行 JOIN，您将获得所有相关图像的路径。

另请参阅sitepoint.com 上[的了解 MySQL 和其他关系数据库中的 JOIN 。](http://www.sitepoint.com/understanding-sql-joins-mysql-database/#fbid=FBk496PQSUE)

# php - GetImageSize() 不应该返回 FALSE

> ID：10464948
> 
> 赞同：1
> 
> 时间：2012-05-05T18:50:40.707
> 
> 标签：php, validation, getimagesize

在这里处理一个小上传脚本。我正在尝试检查上传的图像是否真的是图像，而不仅仅是重命名的 PHP 文件。

发布脚本后，我可以打印数组

```
foreach ($_FILES['images']['name'] as $key => $value){             
        print_r(getimagesize($_FILES['images']['tmp_name'][$key])); 
```

这工作得很好，所以它不会返回假。但即使我上传一个不是图片的文件，它也不会给出假的。它根本不返回任何内容，而我的脚本的其余部分只是处理图像之类的东西。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:52:07.580

## 上传

你不能直接使用`getimagesize`..`$_FILES['images']['tmp_name'][$key]`你需要先将它复制到你的系统中才能使用它

`$_FILES['images']['size'][$key]`暂时使用

或者

```
 move_uploaded_file($_FILES['images']['tmp_name'][$key], $destination);
  print_r(getimagesize($destination)); 
```

## 假图像

请不要`$_FILES['images']['type'][$key]`可以伪造

使用假图片标题

例子

```
file_put_contents("fake.png", base64_decode('iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABGdBTUEAALGPC/xhBQAAAAZQTFRF////
AAAAVcLTfgAAAAF0Uk5TAEDm2GYAAAABYktHRACIBR1IAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH0gQCEx05cq
KA8gAAAApJREFUeJxjYAAAAAIAAUivpHEAAAAASUVORK5CYII=')); 
```

上传`fake.png`

```
array
  'name' => 
    array
      0 => string 'fake.png' (length=8)
  'type' => 
    array
      0 => string 'image/png' (length=9)
  'tmp_name' => 
    array
      0 => string 'C:\Apache\xampp\tmp\php44F.tmp' (length=30)
  'error' => 
    array
      0 => int 0
  'size' => 
    array
      0 => int 167 
```

## 验证图像

用法

```
var_dump ( getimagesizeReal ( "fake.png" ) ); 
```

使用的功能

```
function getimagesizeReal($image) {

    $imageTypes = array (
            IMAGETYPE_GIF,
            IMAGETYPE_JPEG,
            IMAGETYPE_PNG,
            IMAGETYPE_SWF,
            IMAGETYPE_PSD,
            IMAGETYPE_BMP,
            IMAGETYPE_TIFF_II,
            IMAGETYPE_TIFF_MM,
            IMAGETYPE_JPC,
            IMAGETYPE_JP2,
            IMAGETYPE_JPX,
            IMAGETYPE_JB2,
            IMAGETYPE_SWC,
            IMAGETYPE_IFF,
            IMAGETYPE_WBMP,
            IMAGETYPE_XBM,
            IMAGETYPE_ICO 
    );
    $info = getimagesize ( $image );
    $width = @$info [0];
    $height = @$info [1];
    $type = @$info [2];
    $attr = @$info [3];
    $bits = @$info ['bits'];
    $channels = @$info ['channels'];
    $mime = @$info ['mime'];

    if (! in_array ( $type, $imageTypes )) {
        return false; // Invalid Image Type ;
    }
    if ($width <= 1 && $height <= 1) {
        return false; // Invalid Image Size ;
    }

    if($bits === 1)
    {
        return false; // One Bit Image .. You don't want that  ;
    }
    return $info ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T19:23:14.010

首先，您可以在 $_FILES['images']['tmp_name'] 上使用 getimagesize，所以这不是问题。

如果要检查文件是否为图像，请尝试以下操作：

```
if(isset($_POST['submit'])) {
    $check = getimagesize($_FILES['images']['tmp_name']);
    if($check !== false) {
        echo 'File is an image - ' . $check['mime'];
    }
    else {
        echo 'File is not an image';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T19:31:40.813

`getimagesize()`在决定是否将上传的文件放在文档根目录中的任何位置时，我建议不要相信结果。这是因为嵌入在 GIF 文件中的 PHP 代码（标题`image.gif.php`为 [这](http://www.phpclasses.org/blog/post/67-PHP-security-exploit-with-GIF-images.html)是有关该问题的更多信息。`getimagesize()`

上面链接的文章建议设置一个单独的控制器，通过该控制器提供所有用户上传的文件。`readfile()`通过本地文件系统访问时，不会解析读取的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T19:08:02.837

您可以简单地使用`$_FILES['images']['type']`. 它会给你上传文件的类型。然后再次检查八进制流或其他可执行文件。如果是这样，那么不允许它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-24T11:26:25.290

@user1362916 如果您使用 HTML 上传多张图片，那么您可能需要再添加一个这样的数组。

```
if(isset($_POST['submit'])) {
    $check = getimagesize($_FILES['images']['tmp_name'][$i]);
    if($check !== false) {
        echo 'File is an image - ' . $check['mime'];
    }
    else {
        echo 'File is not an image';
    }
} 
```

这里检查 [i] 因为这是用于多个文件上传。

下面是完整的脚本

```
<!DOCTYPE html>
<html>
<body>

<form action="#" method="post" enctype="multipart/form-data">
    Select image to upload:
    <input name="my_files[]" type="file" multiple="multiple" />
    <input type="submit" value="Upload Image" name="submit">
</form>

<?php

 if (isset($_FILES['my_files']))
 {
    $myFile = $_FILES['my_files'];
    $fileCount = count($myFile["name"]);

        for ($i = 0; $i <$fileCount; $i++)
         {
           $error = $myFile["error"][$i]; 

            if ($error == '4')  // error 4 is for "no file selected"
             {
               echo "no file selected";
             }
            else
             {
               if(isset($_POST['submit'])) {
                 $check = getimagesize($_FILES['my_files']['tmp_name'][$i]);
                 if($check !== false) {
                 echo 'File is an image - ' . $check['mime'];
                 }
                 else {
                 echo 'File is not an image';
                   }
                 }

             }
       }  
 }
        ?>

</body>
</html> 
```

# google-earth-plugin - 显示或隐藏特定的 KML 建筑物

> ID：10464950
> 
> 赞同：-1
> 
> 时间：2012-05-05T18:50:57.267
> 
> 标签：google-earth-plugin

鉴于我对它了如指掌，我想使用 javascript 来显示或隐藏特定的 kml 建筑物。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:55:03.190

“鉴于我对它了如指掌”让我认为你也有那个特定建筑物的 id。
如果是这样，您可以简单地使用此代码示例来隐藏它：

```
var myKmlPlacemark = ge.getElementById("myId");
myKmlPlacemark.setVisibility(false); 
```

如果您没有元素的 id，我建议您更改逻辑以便拥有它。一切都会变得容易得多！
再见

# c++ - windows pdcurses win32a 非英文键盘

> ID：10464953
> 
> 赞同：1
> 
> 时间：2012-05-05T18:51:17.033
> 
> 标签：c++, windows, keyboard-layout, pdcurses

当使用 pdcurses windows 端口 win32a（链接[在这里](http://www.projectpluto.com/win32a.htm)）时，我无法让我的非英语（在本例中为瑞典语）键盘处理 0-9、az 和 AZ 范围之外的字符。

示例：如果我使用美式键盘（但我不是），则按`shift + 2`generate`@`而不是完全可以接受的。`"`

我正在使用 Visual Studio 2010、C++ 在 Windows 上进行编译。

此外，如果我尝试编译常规控制台应用程序，则键盘布局会在命令提示符上正确识别。

# android - 如何使电子邮件地址可点击？

> ID：10464954
> 
> 赞同：44
> 
> 时间：2012-05-05T18:51:21.683
> 
> 标签：android

我的申请中有一些文字说如果您需要额外的帮助，请给我们发电子邮件，这是电子邮件地址，等等。

但我希望他们能够单击电子邮件链接并打开他们的电子邮件客户端。那可能吗？或者这是不好的做法？

如果是合理的做法，怎么做？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-05T18:58:13.590

这是一个非常合理的要求，[`Linkify`](https://developer.android.com/reference/android/text/util/Linkify.html)课程会将每个电子邮件地址转换为适合您的链接。只需将[`autoLink`](https://developer.android.com/reference/android/widget/TextView.html#attr_android%3aautoLink)属性添加到您的 XML：

```
<TextView
    ...
    android:autoLink="email" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-05T19:00:42.527

您可以通过在文本上使用 setOnClickListener 来使您的文本可点击

```
textView.setOnClickListener(new View.OnClickListener()); 
```

您可以通过使用 ACTION_SEND 创建新 Intent 来打开电子邮件客户端。Settype，电子邮件地址和主题如下：

```
Intent emailintent = new Intent(android.content.Intent.ACTION_SEND);
emailintent.setType("plain/text");
emailintent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[] {"mailk@gmail.com" });
emailintent.putExtra(android.content.Intent.EXTRA_SUBJECT, "");
emailintent.putExtra(android.content.Intent.EXTRA_TEXT,"");
startActivity(Intent.createChooser(emailintent, "Send mail...")); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-05T18:54:55.847

您需要在您的`onClickListener`:

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain"); // send email as plain text
intent.putExtra(Intent.EXTRA_EMAIL, new String[] { "some@email.address" });
intent.putExtra(Intent.EXTRA_SUBJECT, "subject");
intent.putExtra(Intent.EXTRA_TEXT, "mail body");
startActivity(Intent.createChooser(intent, "")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-21T10:50:14.510

Please be aware of a little bug from API 24 onwards which makes the accepted solution not work if the local part of the email address has exactly 2 characters like "it@google.com".

See the issue: [https://issuetracker.google.com/issues/64435698](https://issuetracker.google.com/issues/64435698)

Allegedly fixed already, but apparently not rolled out yet. (Don't you love it that they know about the issue and don't even bother to update the documentation accordingly? [https://developer.android.com/reference/android/widget/TextView.html#attr_android:autoLink](https://developer.android.com/reference/android/widget/TextView.html#attr_android:autoLink))

So unless you're sure that you're not dealing with such 2-letter email addresses, you should rather use the accepted approach from here for the time being:

[TextView to send email when clicked](https://stackoverflow.com/questions/4682859/textview-to-send-email-when-clicked)

Take care to remove the autolink attribute from the TextView then.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-16T19:18:50.823

The accepted answer may work for emails but if you want to detect different patterns like emails, contact numbers, weblink and set a separate on click implementations for these patterns I suggest you to use [CustomClickableEmailPhoneTextview](https://github.com/nitin-jaiman/CustomClickableEmailPhoneTextview)

[![enter image description here](../Images/1188b26227166adaf5cde5557cecdd77.png)](https://i.stack.imgur.com/GL7Bw.gif)

Sample Code to use the library.

```
CustomPartialyClickableTextview customPartialyClickableTextview= (CustomPartialyClickableTextview) findViewById(R.id.textViewCustom);

                /**
                 * Create Objects For Click Patterns
                 */
                ClickPattern email=new ClickPattern();
                ClickPattern phone=new ClickPattern();
                ClickPattern weblink=new ClickPattern();

                /**
                 * set Functionality for what will happen on click of that pattern
                 * In this example pattern is email
                 */
                email.setOnClickListener(new ClickPattern.OnClickListener() {
                    @Override
                    public void onClick() {

                        Toast.makeText(MainActivity.this,"email clicked",Toast.LENGTH_LONG).show();

                    }
                });

                /**
                 * set Functionality for what will happen on click of that pattern
                 * In this example pattern is phone
                 */
                phone.setOnClickListener(new ClickPattern.OnClickListener() {
                    @Override
                    public void onClick() {
                        Toast.makeText(MainActivity.this,"phone clicked",Toast.LENGTH_LONG).show();

                    }
                });

                /**
                 * set Functionality for what will happen on click of that pattern
                 * In this example pattern is weblink
                 */
                weblink.setOnClickListener(new ClickPattern.OnClickListener() {
                    @Override
                    public void onClick() {
                        Toast.makeText(MainActivity.this,"website clicked",Toast.LENGTH_LONG).show();

                    }
                });

                /**
                 * set respective regex string to be used to identify patter
                 */
                email.setRegex("\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b"); // regex for email
                phone.setRegex("[1-9][0-9]{9,14}"); // regex for phone number
                weblink.setRegex("^(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]"); // regex for weblink

                /**
                 * add click pattern to the custom textview - first parameter is tag for reference second parameter is ClickPattern object
                 */
                customPartialyClickableTextview.addClickPattern("email",email);
                customPartialyClickableTextview.addClickPattern("phone",phone);
                customPartialyClickableTextview.addClickPattern("weblink",weblink); 
```

# ruby-on-rails - has_many 中的 fields_for 块不输出

> ID：10464955
> 
> 赞同：0
> 
> 时间：2012-05-05T18:51:23.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3

该`fields_for`块不会在`has_many`关系中输出。这个问题出现在我正在从事的一个有点涉及的项目中。我把它分解成一个非常简单的测试用例，但它仍然不起作用。这个问题以前被问过，问题通常是嵌套对象不存在。但是在这里，嵌套对象似乎确实存在，如代码注释中所述。我对rails很陌生，所以它可能很明显。

这是简单的案例模型代码：

```
class Parent < ActiveRecord::Base
    has_many :children
    accepts_nested_attributes_for :children
end

class Child < ActiveRecord::Base
    belongs_to :parent
end 
```

简单案例控制器：

```
class ParentController < ApplicationController
  def index
    @parent = Parent.find_by_id(1)
  end
end 
```

简单案例视图：

```
<%= form_for @parent, {:url=>{:action=>:index}} do |f| %>

    <!-- this outputs ok -->
    <%= f.text_field :name %>

    <% f.object.children.each do |c| %>

        <!-- this outputs "child1", so the nested object exists -->
        <%= c.name %> 

        <% f.fields_for c do |field| %>
            this line does NOT output, nor does the field below
            <%= field.text_field :name  %>
        <% end %>
    <% end %>
<% end %> 
```

我也试过这个，看到了同样的结果：

```
<%= form_for @parent, {:url=>{:action=>:index}} do |f| %>
    <%= f.text_field :name %>
    output here     
    <% f.fields_for :children do |field| %>
        no output here nor the field below
        <%= field.text_field :name  %>
    <% end %>
<% end %> 
```

我还尝试`@parent`在控制器和 a 中使用一个新对象`@parent.build_child` （已将 assoc 更改为 a `has_one`）。那仍然看到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:04:02.903

你忘了把`=`标志放在后面`<%`。

代替：

```
 <% f.fields_for :children do |field| %> 
```

和：

```
 <%= f.fields_for :children do |field| %> 
```

# vb.net - 扫描条码时的 VB.NET 事件

> ID：10464957
> 
> 赞同：0
> 
> 时间：2012-05-05T18:51:38.007
> 
> 标签：vb.net, barcode-scanner

我有一个 USB 条形码扫描仪，它充当 HID 键盘仿真设备。我想要一个网页，出于测试目的，扫描完成时会弹出 JavaScript 警报。我不想将事件绑定到任何可见控件（例如文本框），因此，我不会专注于任何控件来捕获扫描输入。这可以做到吗？我正在使用带有 .NET 4.0 的 VS 2010 和带有 Symbol USB 条形码扫描仪的 VB.NET。谢谢...鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:54:21.993

不同的条码扫描器可以输出不同的控制字符，如制表符和换行符。您应该阅读扫描仪的手册。

您应该能够使用按键事件处理程序来获取它们。

# algorithm - 动态规划和

> ID：10464963
> 
> 赞同：5
> 
> 时间：2012-05-05T18:52:01.813
> 
> 标签：algorithm, sum, dynamic-programming, knapsack-problem, subset-sum

您将如何使用动态规划来查找数组中的正整数列表，其总和最接近但不等于某个正整数 K？

我对这个有点卡住了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T07:40:14.680

通常的措辞是您正在寻找最接近但不超过 K 的值。如果您的意思是“小于 K”，它只是意味着您的 K 值比通常的值大一。如果你的意思是“不等于 K”，那么你基本上会运行两次算法，一次找到小于 K 的最大和，然后再次找到大于 K 的最小和，然后选择绝对值与 K 的差异最小。

目前我将假设您的意思是小于或等于 K 的最大总和，因为这是最常见的公式，而其他可能性对算法并没有太大影响。

基本思想相当简单，尽管它（至少可能）使用了大量存储空间。我们构建了一个包含 K+1 列和 N+1 行的表（其中 N = 输入数）。我们将表中的第一行初始化为 0。

然后我们开始遍历表格，并为每个可能的最大值建立最佳值，直到真正的最大值，逐行进行，所以我们只从一个输入开始，然后是两个可能的输入，然后是三个，依此类推. 在表中的每个位置，最佳值只有两种可能性：不使用当前输入的前一个最佳值，或者当前输入加上前一个最大值减去当前输入的最佳值（并且因为我们按顺序计算表值，我们总是已经有了那个值）。

我们通常还希望跟踪实际使用哪些项目来产生结果。为此，我们将表中给定点的布尔值设置为真，当且仅当我们使用该行的新输入计算表中该点的值（而不是仅仅复制前一行的最佳值）。最好的结果是在右下角，所以我们从那里开始，然后一次在桌子上向后走一排。当我们到达该列的布尔值设置为 true 的行时，我们知道我们找到了一个使用的输入。我们打印出该项目，然后从总数中减去该项目，以获得左侧的下一列，我们将在其中找到用于产生此输出的下一个输入。

这是一个技术上使用 C++ 的实现，但主要以类似 C 的风格编写，以使每个步骤尽可能明确。

```
#include <iostream>
#include <functional>

#define elements(array) (sizeof(array)/sizeof(array[0]))

int main() {

    // Since we're assuming subscripts from 1..N, I've inserted a dummy value
    // for v[0].
    int v[] = {0, 7, 15, 2, 1};

    // For the moment I'm assuming a maximum <= MAX.
    const int MAX = 17;

    // ... but if you want to specify K as the question implies, where sum<K, 
    // you can get rid of MAX and just specify K directly:
    const int K = MAX + 1;

    const int rows = elements(v);

    int table[rows][K] = {0};
    bool used[rows][K] = {false};

    for (int i=1; i<rows; i++)
        for (int c = 0; c<K; c++) {
            int prev_val = table[i-1][c];
            int new_val;

            // we compute new_val inside the if statement so we won't 
            // accidentally try to use a negative column from the table if v[i]>c
            if (v[i] <= c && (new_val=v[i]+table[i-1][c-v[i]]) > prev_val) {
                table[i][c] = new_val;
                used[i][c] = true;
            }
            else
                table[i][c] = prev_val;
        }

    std::cout << "Result: " << table[rows-1][MAX] << "\n";
    std::cout << "Used items where:\n";
    int column = MAX;
    for (int i=rows; i>-1; i--)
        if (used[i][column]) {
            std::cout << "\tv[" << i << "] = " << v[i] << "\n";
            column -= v[i];
        }

    return 0;
} 
```

您通常会对此进行一些优化（为了便于阅读，我没有这样做）。首先，如果达到最佳总和，则可以停止搜索，因此在这种情况下，我们实际上可以在考虑最终输入之前跳出循环`1`（因为`15`并`2`给出所需的结果`17`）。

其次，在表格本身中，我们在任何给定时间实际上只使用两行：一个当前行和一个前一行。之前的行（在主表中）不再使用（即，计算 row[n] 我们需要来自 的值`row[n-1]`，但不需要`row[n-2]`, `row[n-3]`, ... `row[0]`。为了减少存储，我们可以使主表只有两个行，然后我们在第一行和第二行之间交换。一个非常类似于 C 的技巧是只使用行号的最低有效位，所以你可以分别用和替换`table[i]`和（但仅用于主表 - 不是在寻址表时。`table[i-1]``table[i&1]``table[(i-1)&1]``used`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T05:04:53.743

这是python中的一个例子：

```
def closestSum(a,k):
  s={0:[]}
  for x in a:
    ns=dict(s)
    for j in s:
      ns[j+x]=s[j]+[x]
    s=ns
  if k in s:
    del s[k]
  return s[min(s,key=lambda i:abs(i-k))] 
```

例子：

```
>>> print closestSum([1,2,5,6],10)
[1, 2, 6] 
```

这个想法只是为了跟踪在遍历数组时可以从所有先前的元素中得出什么总和，以及一种得出总和的方法。最后，您只需选择最接近您想要的东西。它是一种动态规划解决方案，因为它将整个问题分解为子问题，并使用表格来记住子问题的结果，而不是重新计算它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:34:56.973

Cato 在 Racket 中的想法：

```
#lang racket
(define (closest-sum xs k)
  (define h (make-hash '([0 . ()])))
  (for* ([x xs] [(s ys) (hash-copy h)])
    (hash-set! h (+ x s) (cons x ys))
    (hash-set! h x (list x)))
  (when (hash-ref h k #f) (hash-remove! h k))
  (cdr (argmin (λ (a) (abs (- k (car a)))) (hash->list h)))) 
```

要获得更简洁的程序，可以从 GitHub 获取[terse-hash.rkt](https://github.com/soegaard/this-and-that/blob/master/brevity/terse-hash.rkt)并编写：

```
(define (closest-sum xs k)
  (define h {make '([0 . ()])})
  (for* ([x xs] [(s ys) {copy h}])
    {! h (+ x s) (cons x ys)}
    {! h x (list x)})
  (when {h k #f} {remove! h k})
  (cdr (argmin (λ (a) (abs (- k (car a)))) {->list h}))) 
```

# php - 在特定时间自动发送邮件？

> ID：10464967
> 
> 赞同：0
> 
> 时间：2012-05-05T18:52:32.697
> 
> 标签：php

我要在我的项目中添加一个模块，这个模块是关于余数的。如果今天的日期是一个人的生日，那么必须在上午 9 点自动向那个人发送一封邮件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:53:50.847

您总是可以添加一个在上午 9 点运行的 cron 作业/计划任务，并点击一个服务来检查当天是否需要发送任何邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:59:22.157

> 1.  如果您的 xampp 在 Windows 上，您可以使用[windows-scheduler](http://support.microsoft.com/kb/308569)调用特定脚本（在您的情况下为 PHP 脚本，最好通过 URL），它会检查所有用户的生日并相应地向他们发送邮件。
>     
>     
> 2.  如果你的 xampp 在 Linux/Unix/etc 上，你可以使用[cron-jobs](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)，其余的都是一样的！
>     
>     
> 3.  还有第三种方式，第三方调度程序或说[online-cron](http://www.onlinecronjobs.com/)，它将远程调用您的脚本（php-page）。
>     
>     
> 
> **例子：**
> 
> 如果您自己进行操作系统的 cron 设置，您仍然可以让配置在您的系统中发送电子邮件给谁，而不是操作系统。
> 
> 毕竟，cron 就是重复做某事，在你的情况下，它只是通过 URL 调用你的脚本。
> 
> 现在关于时间设置，你可以让 CRON 每次调用你的脚本，你的 php 脚本会检查适当的时间，并触发邮件！

**参考：** [在生日当天给不同的客户发送邮件](https://stackoverflow.com/questions/9494057/send-mail-to-different-customer-on-their-birthday)

希望这可以帮助..

# javascript - JavaScript - 预加载图像

> ID：10464970
> 
> 赞同：3
> 
> 时间：2012-05-05T18:53:04.553
> 
> 标签：javascript, jquery, css, gallery

我正在处理照片库，我希望能够在加载主图像之前显示 gif 预加载器，然后显示主图像。

所以，这就是我得到的：

我有一个`#photo_place`包含主要照片的 div。这取决于用户选择的缩略图。当用户确实选择了缩略图时，会触发此功能：

```
function gallery(icon){

    $('#photo_place').css('background-image','url("../images/'+icon+'.png")');

} 
```

现在，我想要的是首先在#photo_place 显示一个预加载器 gif，在某个地方加载选定的图像……当加载该图像时，用主图像替换预加载器。

所以也许是这样的？

```
function gallery(icon){
    $('#photo_place').css('background-image','url("../images/preloader.gif")');
    load.in.image'images/'+icon+'.png';

    if(load.in.image == true){
        $('#photo_place').css('background-image','url("loaded image")');
    }
} 
```

当然，那不是真正的 JS，但这样的东西应该可以正常工作吗？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T19:11:30.777

也许你正在寻找这样的东西？

```
function gallery(icon) {
   var preLoader = '../images/preloader.gif';
   var imagePath = '../images/' + icon + '.png';

   $('#photo_place').css('background-image','url("../images/preloader.gif")');

   var image = new Image();

   image.onload = function() {
      $('#photo_place').css('background-image', imagePath);
   }
   image.src = imagePath;
} 
```

还检查图像类参考：[http ://www.javascriptkit.com/jsref/image.shtml](http://www.javascriptkit.com/jsref/image.shtml)

# php - HTML 我想要打开内容区域的链接？

> ID：10464972
> 
> 赞同：0
> 
> 时间：2012-05-05T18:53:12.330
> 
> 标签：php, html, css

当我单击导航栏中的链接时，我希望固定标题不会消失，我可以通过将页面划分为表格来做到这一点，，

问题是我想知道这是否可能我希望导航栏中的链接在右栏中打开“内容/主列”

```
<!-- ============ HEADER SECTION ============== -->

<!-- ============ NAVIGATION BAR SECTION ============== -->
  link1 link2 link3 
<!-- ============ LEFT COLUMN (MENU) ============== -->
<!-- ============ RIGHT COLUMN (MENU) ============== -->

LINK1 WILL OPEN HERE ?? !! HOW USING TABLES TAGS OR DIV 

<!-- ============ FOOTER SECTION ============== --> 
```

这是我的尝试，但它不起作用：

```
<li><a href="world.php" target="main" title="WORLD">WORLD</a></li> 
```

请帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:56:27.577

这也可以使用 Javascript。创建链接时，href 参数将改为指向一个 javascript 函数，该函数负责将其他页面加载到您想要的位置。

```
<a href="javascript:loadSideBar();"> 
```

使用 jQuery 之类的 Javascript 库，您也可以轻松添加酷炫的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:58:48.290

您可以使用 javascript 和 jquery 制作链接以在正确的位置切换隐藏的 div

```
 <script type="text/javascript">
           $("#main").click(function (){
           $("#side-menu").toggle('slow');
          });
         </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:05:15.740

尝试这个

```
<script type="text/javascript">
function openPage(page) {
$(".page").hide();
$("#" + page).show();
}
</script> 
```

链接：

```
<li><a href="#" onclick="openPage(1);return false" title="WORLD">Page 1</a></li>
<li><a href="#" onclick="openPage(2);return false" title="WORLD">Page 2</a></li>
<li><a href="#" onclick="openPage(3);return false" title="WORLD">Page 3</a></li>
<li><a href="#" onclick="openPage(4);return false" title="WORLD">Page 4</a></li> 
```

HTML：

```
<div class="page" id="1">
Page 1
</div>
<div class="page" id="2">
Page 2
</div>
<div class="page" id="3">
Page 3
</div>
<div class="page" id="4">
Page 4
</div> 
```

# css - IE表格背景bug

> ID：10464990
> 
> 赞同：1
> 
> 时间：2012-05-05T18:54:54.590
> 
> 标签：css, html, internet-explorer

我的网站中有一张带有背景图片的表格。FF 和 chrome 看起来很正常，但在 IE 中不正常。背景图像似乎移动并生成有线结果。我想知道这里是否有人可以帮助我解决这个问题。请看[附图](http://www.popslinger.org/iebug.JPG)。谢谢您的帮助。

```
<section>
some html....

<form action="http://localhost/jobSearch/add_project/validate" method="post" accept-charset="utf-8">
  <fieldset>
    <legend>ADD NEW PROJECT</legend>
      <label>Parcel</label>
      <input type="text" name="parcel" value="">
      <label>Lot Number</label>
      <input type="text" name="lot_number" value="">
      <label>Block</label>
      <input type="text" name="block" value="">
      <label>Subdivision</label>
      <input type="text" name="subdivision_name" value="">
      <label>Section/Phase</label>
      <input type="text" name="section_phase" value="">
      <input type="submit" name="submit" value="Add Project" id="submit">
  </fieldset>
</form>

more html.....
</section> 
```

CSS：

```
form {
    display: block;
}

form fieldset {
    font: bold 1.1em helvetica;
}

form label{
    float:left;
    display:block;
    width:140px;
    font:bold 1.1em Helvetica;
    margin:5px;
}

fieldset{
    color:black;
    font:bold 1.2em Helvertica;
    width:400px;
    margin: 20px auto;
    padding: 10px;
    border:1px solid grey;
    background:url('../images/background.jpg');
}

form input {
    font-size: .9em;
    padding: 4px 6px;
    border: solid 1px #AACFE4;
    margin: 5px;
    width: 200px;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
}

form #submit {
    cursor: pointer;
    font: bold 1em Helvetica;
    padding: 4px 2px;
    border: solid 1px #AACFE4;
    margin: 5px;
    width: 100px;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:04:04.607

您的标签未正确嵌套。您打开时使用`<form>`，但关闭时使用`</fieldset>`。您需要在下面的示例中交换结束标记的位置以纠正嵌套问题。

```
<form ...>
  <fieldset>
<!-- content removed -->
  </form>
</fieldset> 
```

# c++ - C++ 删除向量、对象、释放内存

> ID：10464992
> 
> 赞同：64
> 
> 时间：2012-05-05T18:55:00.173
> 
> 标签：c++, vector, delete-operator

关于删除 C++ 中的内容，我完全感到困惑。如果我声明一个对象数组并且如果我使用`clear()`成员函数。我可以确定内存已被释放吗？

例如 ：

```
tempObject obj1;
tempObject obj2;
vector<tempObject> tempVector;

tempVector.pushback(obj1);
tempVector.pushback(obj2); 
```

我可以安全地调用 clear 来释放所有内存吗？还是我需要遍历才能一一删除？

```
tempVector.clear(); 
```

如果把这个场景改成对象的指针，答案会和上面一样吗？

```
vector<tempObject> *tempVector;
//push objects....
tempVector->clear(); 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-05-05T18:59:17.323

您可以调用 clear，这将销毁所有对象，但不会释放内存。循环遍历各个元素也无济于事（您甚至打算对对象采取什么行动？）您可以做的是：

```
vector<tempObject>().swap(tempVector); 
```

这将创建一个没有分配内存的空向量并将其与 tempVector 交换，从而有效地释放内存。

C++11 还有一个函数`shrink_to_fit`，你可以在调用 clear() 之后调用它，理论上它会缩小容量以适应大小（现在为 0）。然而，这是一个不具约束力的请求，您的实现可以随意忽略它。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-05T19:08:36.457

这里有两件事：

1.  对象生命周期
2.  储存期限

例如：

```
{
    vector<MyObject> v;
    // do some stuff, push some objects onto v
    v.clear(); // 1
    // maybe do some more stuff
} // 2 
```

在处`1`，您清楚`v`：这会破坏它存储的所有对象。如果你写了一个，每个都会调用它的析构函数，并且`MyObject`现在释放它所拥有的任何东西。 *但是*，vector`v`有权保留原始存储空间，以备日后使用。

`1`如果您决定在和之间插入更多内容`2`，这可以节省时间，因为它可以重用旧内存。

在`2`处，向量`v`超出范围：您推入其中的任何对象都`1`将被销毁（就像您再次显式调用 clear 一样），但现在底层存储也被释放（`v`将不再重复使用它）。

* * *

如果我将示例更改`v`为指向动态分配向量的指针，则需要显式删除它，因为超出范围的指针`2`不会为您执行此操作。在这种情况下最好使用类似的东西`std::unique_ptr`，但如果你不这样做并且`v`被泄露，它分配的存储空间也会被泄露。如上所述，您需要确保`v`已删除，并且调用`clear`是不够的。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-05T19:03:17.467

`vector::clear()`不释放向量分配的内存来存储对象；它为它持有的对象调用析构函数。

例如，如果向量使用数组作为后备存储并且当前包含 10 个元素，则调用`clear()`将调用数组中每个对象的析构函数，*但后备数组不会被释放*，因此仍然有`sizeof(T) * 10`字节分配给向量（至少）。 `size()`将为 0，但`size()`返回向量中元素的数量，不一定是后备存储的大小。

至于你的第二个问题，你分配给`new`你的任何东西都必须用`delete`. 由于这个原因，您通常不会维护指向向量的指针。很少（如果有的话）有充分的理由这样做，并且您可以防止向量在离开范围时被清理。`clear()`但是，无论它是如何分配的，调用仍然会以相同的方式进行。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-10T14:20:23.503

> 如果我使用`clear()`成员函数。我可以确定内存已被释放吗？

不，`clear()`成员函数会破坏向量中包含的每个对象，但它会保持向量的[容量](https://en.cppreference.com/w/cpp/container/vector/capacity)不变。它影响向量的大小，但不影响容量。

如果要更改向量的容量，可以使用[clear-and-minimize idiom](https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Clear-and-minimize)，即创建一个（临时）空向量，然后交换两个向量。

* * *

您可以轻松了解每种方法如何影响容量。考虑以下函数模板，它`clear()`在传递的向量上调用成员函数：

```
template<typename T>
auto clear(std::vector<T>& vec) {
   vec.clear();
   return vec.capacity();
} 
```

`empty_swap()`现在，考虑将传递的向量与空向量交换的函数模板：

```
template<typename T>
auto empty_swap(std::vector<T>& vec) {
   std::vector<T>().swap(vec);
   return vec.capacity();
} 
```

两个函数模板都返回向量在返回时的容量，那么：

```
std::vector<double> v(1000), u(1000);
std::cout << clear(v) << '\n';
std::cout << empty_swap(u) << '\n'; 
```

输出：

```
1000
0 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-31T17:27:40.703

*移动语义*允许通过简单地从空右值应用[赋值 (=) 运算符来释放内存：](https://en.cppreference.com/w/cpp/container/vector/operator%3D)

```
std::vector<uint32_t> vec(100, 0);
std::cout << vec.capacity(); // 100

vec = vector<uint32_t>();    // Same as "vector<uint32_t>().swap(vec)";    
std::cout << vec.capacity(); // 0 
```

它与其他答案中描述的基于“swap()”的方法一样有效（实际上，两者在概念上都在做同样的事情）。然而，在可读性方面，赋值版本在表达程序员意图方面做得更好，同时更简洁。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-10T13:09:29.717

您可以通过这种方式释放向量使用的内存：

```
//Removes all elements in vector
v.clear()

//Frees the memory which is not used by the vector
v.shrink_to_fit(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-06T19:47:57.970

如果您需要一遍又一遍地使用向量并且您当前的代码在循环中或在每个函数调用中重复声明它，那么您很可能会耗尽内存。我建议您在外部声明它，将它们作为指针传递给您的函数并使用：

```
my_arr.resize() 
```

这样，您可以继续为您的向量使用相同的内存序列，而不是每次都请求新的序列。希望这有帮助。注意：将其调整为不同的大小可能会添加随机值。如果需要，传递一个整数，例如 0 来初始化它们。

# java - 服务层设计，在哪里检查权限，以及如何处理UI层

> ID：10464995
> 
> 赞同：3
> 
> 时间：2012-05-05T18:55:12.087
> 
> 标签：java, oop, spring-mvc, soa

```
@RequestMapping(value = "/products/create", method = RequestMethod.POST)
public ModelAndView create(@Valid ProductForm productForm, BindingResult bindingResult,
                           HttpServletRequest request) {
    SessionContext sessionContext = (SessionContext) request.getAttribute("sessionContext");

    ModelAndView mav = new ModelAndView("products/new");
    mav.addObject("errors", bindingResult.getAllErrors());
    mav.addObject("productForm", productForm);

    int newProductId = -1;

    if (!bindingResult.hasErrors()) {

        List<Product> products = productService.find...(...);
        if (products != null...) {
            bindingResult.addError(new ObjectError("Products", "..."));
        }

        // only try and create if no errors so far
        if (!bindingResult.hasErrors()) {
            newProductId = productService.create(..., productForm);
            if (newProductId <= 0) {
                bindingResult.addError(new ObjectError("Products", "..."));
            }
        }
    }

    if (bindingResult.hasErrors()) {
        return mav;
    }

    return new ModelAndView("redirect:/products/show/" + newProductId);
} 
```

所以上面描述了 UI 方面的事情（使用 Spring MVC）。

现在，我应该如何设计服务层，所以在这个例子中 ProductServiceImpl 有一个 create 方法，它将创建产品并将其保存在数据库中。

我必须根据用户角色等检查权限。

我可以通过首先检查用户是否有权创建产品来在 UI 层中做到这一点：

```
if(permissionService.hasPermission(.....)) {
  newProductId = productService.create(....)
} 
```

但这将这个逻辑与 UI 层联系在一起，我认为它应该在 create 方法本身中：

```
public class ProductServiceImpl implements ProductService {

  @Autowired
  PermissionService permissionService;

  ..

  @Override
  public int create(...., final ProductForm productForm) {

     boolean canCreateProduct = productService.hasPermissions(.....);

     if(canCreateProduct) {
       Product product = ..... (productForm);
       productDao.save(product);
       return product.getId();
     }   
  }
} 
```

**但是我无法理解的问题是，如果我将权限检查放在 ProductServiceImpl.create 方法中，我如何向 UI 层报告您没有权限执行此操作？**

如果你说我应该抛出一个异常，那么我的 UI 层看起来非常混乱，因为根据我需要执行的各种检查，我将有很多异常需要处理。

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:44:52.193

像这样的权限检查应该/可以使用 AOP 通过像[CDI 的拦截器](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/interceptors.html)这样的机制来完成。Spring 具有用于相同目的的方法拦截器（请参阅[Spring 中的 AOP](http://static.springsource.org/spring/docs/2.5.x/reference/aop.html)）。在权限不足的情况下抛出异常是正确的做法。

也就是说，我看到了您的问题，但常见的解决方案非常简单：您的 UI 在登录后接收其用户的权限（或通过 some 检索它们`UserService`）。使用此信息，您可以调整在 UI 中公开的操作。在您的示例中，如果不允许用户这样做，则不会显示创建新产品的操作。

不过，您可能仍希望处理异常（假设同时在服务器端修改了用户的权限）并在发生时显示错误。

# string - 在函数的参数中使用 Tmemo 的多行

> ID：10464996
> 
> 赞同：1
> 
> 时间：2012-05-05T18:55:12.160
> 
> 标签：string, delphi, function, memo

我在这里使用函数 这里[的函数](https://stackoverflow.com/questions/4100840/createprocess-returns-immediately-but-only-if-the-started-process-is-hidden)

我这样做， StartProcess('b4a_c2dm.bat','send ' + Trim(edit1.Text)+' ' + Trim(edit2.Text ),False,False);

这适用于 edit1.text （这是发送消息的名称）

将有一个包含多行名称的备忘录 1 要发送到。我需要一种使用 memo1 名称列表而不是 edit1 单个名称来调用 StartProcess 的方法。

目标是让它使用 memo1 中的名称列表一遍又一遍地使用 StartProcess。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T19:11:13.990

在备忘录的行上运行一个简单的 for 循环，如下所示：

```
for i := 0 to Memo1.Lines.Count-1 do
  StartProcess(..., Memo1.Lines[i], ...); 
```

# javascript - Javascript RegEx - 使用标签之间的文本拆分

> ID：10464997
> 
> 赞同：1
> 
> 时间：2012-05-05T18:55:28.660
> 
> 标签：javascript, regex

我正在编写一个脚本，需要拆分同时包含 html 标签和文本的字符串。我正在尝试隔离标签并消除文本。

例如，我想要这个：

```
string = "<b>Text <span>Some more text</span> more text</b>"; 
```

像这样拆分：

```
separation = string.split(/some RegExp/); 
```

并成为：

```
separation[0] = "<b>";
separation[1] = "<span>";
separation[2] = "</span>";
separation[3] = "</b>"; 
```

我真的很感激任何帮助或建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T18:57:50.423

您可能需要查看`String.match`：

```
var str = "<b>Text <span>Some more text</span> more text</b>";
var separation = str.match(/<[^]+?>/g);

console.log(separation); // ["<b>", "<span>", "</span>", "</b>"] 
```

# jquery - Nivo 幻灯片无法在 IE9 中运行 - 错误 80020101

> ID：10464998
> 
> 赞同：1
> 
> 时间：2012-05-05T18:55:29.393
> 
> 标签：jquery, jquery-ui, nivo-slider

我的 nivo 幻灯片在我测试过的所有浏览器上都运行良好，但在 ie9 中根本无法加载。开发控制台给了我一个“错误 80020101”。

到目前为止，我发现没有任何修复有帮助。我正在使用 jquery-1.7.2.min.js 以及 jquery-ui-1.8.19.custom.min.js（用于 ui 选项卡等）。幻灯片通过 ajax 调用到页面。

这是我的 jquery 脚本：

```
$(document).ready(function() {
('#slider').nivoSlider({
effect: 'slideInLeft',
directionNavHide: true,
animSpeed: 500, 
startSlide: 0,
controlNav: false,
pauseTime: 3000
});
}); 
```

和我的 html（来自 php 文件）：

```
<div class=\"slider-wrapper theme-default\">
<div class=\"ribbon\"></div>
<div id=\"slider\" class=\"nivoSlider\">
<img src=\"../adminConsole/images/gallery/slideshow.jpg\" alt=\"\" />
<img src=\"../adminConsole/images/gallery/ecco swim 1.jpg\" alt=\"\"  />
<img src=\"../adminConsole/images/gallery/ecco swim 2.jpg\" alt=\"\" />
<img src=\"../adminConsole/images/gallery/beach1.jpg\" alt=\"\"  />
</div>
</div> 
```

css 是基本的默认 css (niv-slider.css)，唯一的补充是设置高度和宽度。

此页面上有很多可笑的小部件（时钟（是两个）、jquery 日历和文本滚动框），此问题导致后续小部件无法工作。这可能是问题吗？这一切都可以在其他浏览器中正常工作。也许非 ajax 解决方案可以解决这个问题 - 错误号与 ajax 相关？任何帮助将不胜感激。这份工作让我很生气！

**编辑：**经过进一步检查，这绝对是 ajax 的问题。目前，所有选项卡都对显示的各自页面进行 ajax 调用。EI9根本不喜欢这个。直接使用时效果很好。但是，我真的不想将此页面作为直接的 html。关于如何在ajax调用后显示这个东西的任何想法？所显示的只是一个永远加载的图像。