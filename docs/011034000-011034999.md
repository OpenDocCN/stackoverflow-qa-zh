# StackOverflow 问答 11034000-11034999

# asp.net-mvc - 如何在 asp.net mvc3 中创建自定义脚手架模板？

> ID：11034000
> 
> 赞同：0
> 
> 时间：2012-06-14T13:22:09.443
> 
> 标签：asp.net-mvc, razor

ASP.NET MVC 3 可以为我们生成脚手架代码（控制器和视图）。生成的视图默认使用 div 和 css 布局。
但有时我需要表格布局视图而不是 div（在默认模式下）。如何生成类似于以下代码的表格布局视图？我还需要一个表格行中的列号可以定制。
我的问题是：如何让 asp.net mvc 自动为我生成 talbe 布局视图。更一般地，如何修改脚手架代码模板？

```
 <table>
    <tr>    
    <td class="editor-label">
        Id
    </td>
    <td class="editor-field">
        @Html.EditorFor(model => model.Id )
        @Html.ValidationMessageFor(model => model.Id)
    </td>
    <td class="editor-label">
        name
    </td>
    <td class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </td>
    </tr>
    <tr> ... other fields go here ...  </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:54:45.560

我从未花时间覆盖 T4 模板，但有一些博客文章介绍了获取模板并使用您自己的布局创建/修改的确切方法。我能找到的最好的例子是史蒂夫·桑德森的这篇博文

[http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)

看来您需要覆盖脚手架“视图”和创建、创建或编辑、编辑模板。在 PM 控制台行中运行上述帖子中指定的命令后（见下文）

> 脚手架自定义模板视图编辑

然后它将在您的项目中创建一个副本，然后您可以根据需要修改和使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:09:31.993

其他一些人也问过这个问题。因为我在我的问题中使用了不同的关键词，所以直到现在我才发现这些问题。
[关于 stackoverflow T4 模板的类似问题](https://stackoverflow.com/questions/1009067/asp-net-mvc-custom-t4-templates-for-views)
[：ASP.NET MVC 开发人员的快速入门指南](http://blogs.msdn.com/b/webdevtools/archive/2009/01/29/t4-templates-a-quick-start-guide-for-asp-net-mvc-developers.aspx)
[ASP.Net MVC - T4 Fun](http://mvct4.codeplex.com/)
[MvcScaffolding: Overriding the T4 Templates](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)

# python - 标题正则表达式

> ID：11034001
> 
> 赞同：-4
> 
> 时间：2012-06-14T13:22:13.467
> 
> 标签：python, regex

源代码

```
HTML = "<title>RUU</title>"
reExtraTitle = re.compile("<title[^>]*>([^<]*)</title>", re.IGNORECASE)
mcTitle = reExtraTitle.match(HTML)
if mcTitle:
    print mcTitle.group()
else:
    print "no Title" 
```

正则表达式帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:26:36.550

欢迎来到 StackOverflow。今天人们对反对票很严厉，对此我很抱歉。我猜你的母语不是英语，对吗？

您的问题符合[SSCCE](http://sscce.org/)原则，尽管它表明您对研究有点轻率，并且您实际上并没有提出正确的问题，尽管很明显您在追求什么。您的答案在于您应该阅读的[re module doc 。](http://docs.python.org/library/re.html#re.MatchObject.group)

你需要`import re`先，然后改变

```
print mcTitle.group() 
```

至

```
print mcTitle.group(1) 
```

正如其他人所暗示的那样，您也许应该考虑使用[专用的 html 解析器](http://www.crummy.com/software/BeautifulSoup/)而不是[使用 regexp](https://stackoverflow.com/a/1732454/566644)。

# c - 如何获取不存在的文件或目录的绝对路径？

> ID：11034002
> 
> 赞同：17
> 
> 时间：2012-06-14T13:22:20.970
> 
> 标签：c, file, file-io, relative-path, absolute-path

如何从 GNU/Linux 上的 C/C++ 中的给定相对路径确定文件或目录的绝对路径？
我知道`realpath()`，但它不适用于不存在的文件。

假设用户进入`../non-existant-directory/file.txt`，程序工作目录是`/home/user/`.
我需要的是一个返回的函数`/home/non-existant-directory/file.txt`。

我需要这个函数来检查给定的路径是否在某个子目录中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T13:42:15.830

试试`realpath`。如果失败，则开始一次从末尾删除路径组件并重试`realpath`直到成功。然后将您删除的组件附加到成功`realpath`调用的结果中。

如果您确定包含目录存在并且只想在其中创建文件，则最多只需要删除一个组件。

另一种方法是先*创建*文件，然后调用`realpath`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T02:54:05.740

正如@R.. GitHub 所指出的，您可以在`realpath()`. 这是一个示例函数，用于`realpath()`确定存在的路径部分的规范形式，并将路径的不存在部分附加到它。

由于`realpath()`操作 C 风格的字符串，我决定在这里也使用它们。但是该功能可以很容易地重写以使用`std::string`（只是不要忘记`canonical_file_path`将其复制到后释放`std::string`！）。

请注意，重复的“/”条目不会从不存在的路径部分中删除；它只是附加到确实存在的部分的规范形式。

```
////////////////////////////////////////////////////////////////////////////////
// Return the input path in a canonical form. This is achieved by expanding all
// symbolic links, resolving references to "." and "..", and removing duplicate
// "/" characters.
//
// If the file exists, its path is canonicalized and returned. If the file,
// or parts of the containing directory, do not exist, path components are
// removed from the end until an existing path is found. The remainder of the
// path is then appended to the canonical form of the existing path,
// and returned. Consequently, the returned path may not exist. The portion
// of the path which exists, however, is represented in canonical form.
//
// If successful, this function returns a C-string, which needs to be freed by
// the caller using free().
//
// ARGUMENTS:
//   file_path
//   File path, whose canonical form to return.
//
// RETURNS:
//   On success, returns the canonical path to the file, which needs to be freed
//   by the caller.
//
//   On failure, returns NULL.
////////////////////////////////////////////////////////////////////////////////
char *make_file_name_canonical(char const *file_path)
{
  char *canonical_file_path  = NULL;
  unsigned int file_path_len = strlen(file_path);

  if (file_path_len > 0)
  {
    canonical_file_path = realpath(file_path, NULL);
    if (canonical_file_path == NULL && errno == ENOENT)
    {
      // The file was not found. Back up to a segment which exists,
      // and append the remainder of the path to it.
      char *file_path_copy = NULL;
      if (file_path[0] == '/'                ||
          (strncmp(file_path, "./", 2) == 0) ||
          (strncmp(file_path, "../", 3) == 0))
      {
        // Absolute path, or path starts with "./" or "../"
        file_path_copy = strdup(file_path);
      }
      else
      {
        // Relative path
        file_path_copy = (char*)malloc(strlen(file_path) + 3);
        strcpy(file_path_copy, "./");
        strcat(file_path_copy, file_path);
      }

      // Remove path components from the end, until an existing path is found
      for (int char_idx = strlen(file_path_copy) - 1;
           char_idx >= 0 && canonical_file_path == NULL;
           --char_idx)
      {
        if (file_path_copy[char_idx] == '/')
        {
          // Remove the slash character
          file_path_copy[char_idx] = '\0';

          canonical_file_path = realpath(file_path_copy, NULL);
          if (canonical_file_path != NULL)
          {
            // An existing path was found. Append the remainder of the path
            // to a canonical form of the existing path.
            char *combined_file_path = (char*)malloc(strlen(canonical_file_path) + strlen(file_path_copy + char_idx + 1) + 2);
            strcpy(combined_file_path, canonical_file_path);
            strcat(combined_file_path, "/");
            strcat(combined_file_path, file_path_copy + char_idx + 1);
            free(canonical_file_path);
            canonical_file_path = combined_file_path;
          }
          else
          {
            // The path segment does not exist. Replace the slash character
            // and keep trying by removing the previous path component.
            file_path_copy[char_idx] = '/';
          }
        }
      }

      free(file_path_copy);
    }
  }

  return canonical_file_path;
} 
```

# python - 在 python 中的文件和列表中计算 a 与 b 一起出现的时间

> ID：11034004
> 
> 赞同：0
> 
> 时间：2012-06-14T13:22:22.997
> 
> 标签：python, python-3.x

如果这个问题有点基本，或者我在其他地方错过了答案，我很抱歉，但请同情一个迷路和困惑的初学者，如果可以的话，请帮帮我。我有很多长文件，其中包含“日期时间 id 编号随机废话”行，我正在尝试计算某些数字与某些 id 一起出现的次数。据我所知，一切都是正确的，除了我只返回一个数字，而不是数百个。我真的把它减少到可能出错的部分。可能有数百种更快更简单的方法来做我想做的事情，但我还不知道它们。请务必告诉我！我有一个来自文件的数据列表，称为数据，以及文件中存在的 id 列表。

```
#get date(data[i][0]), time(data[i][1]), number(data[i][3]), id(data[i][4]) from original data if a certain id (found in listofids) is present, and write into new list
data0=[]
data1=[]
etc
values=[data[i][0], data[i][1], data[i][3], data[i][4]]
for line in data:
    if listofids[0] in line:
        data0.append(values)
    if listofids[1] in line:
        data1.append(values)
    etc

#put number into list h if it occurs in list data0
h=[]
r=range (0, len(data0))
for i in r:
    number=data0[i][3]
    if number not in h:
        h.append(number)
print (len(h))
print (h)

#count the time each element in list h occurs in list data0
print (data0.count(h[0]), data0.count(h[1]), data0.count(h[2])) 
```

如果这有点混乱和混乱，我很抱歉，如果我错过了一些非常简单的东西，我特别抱歉。

谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:37:46.113

如果没有具体示例说明您的输入是什么样的以及您希望从中获得什么结果，很难说，但[`collections.Counter`](http://docs.python.org/py3k/library/collections.html#counter-objects)很可能会对您有所帮助。您可以向它提供您有兴趣了解的事物的可迭代，它会告诉您其中有哪些独特的价值，以及每个价值出现的次数。

您说您的字符串的形式为: `date time id number stuff`，并且您对计算日期和数字的出现感兴趣 - 听起来您想计算成对`(id, number)`并忽略其他事物。这意味着如果您可以将每个字符串解析为该元组，则可以将其添加到 Counter 中，如下所示：

```
count = collections.Counter()
for string in file:
   tup = # parse string into `(id, number)` tuple
   count.update([count]) 
```

或者，更简洁地说：

```
count = collections.Counter(tupleify(string) for string in file) 
```

`count[(id, number)]`然后，将告诉您特定`(id, number)`对出现在文件中的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:41:14.447

> 它们都是原始文件中的 '07/11/2008 09:00:06 word #0F 0006E7895B word word'

解析这种固定格式应该很简单。在以下代码段中，我假设您要计算 (ID, number) 的组合：

```
from collections import defaultdict

# Count numbers in a dictionary that defaults to zero if a key does not exist yet
counter = defaultdict(int)

with open("filename", "rU") as f:
    for line in f:
        info = line.split()
        date, time, unused, number, id = info[:5]
        counter[id, number] += 1

for (id, number), count in counter.items():
    print("The combination id=%s, number=%s occurred %d times" % (id, number, count)) 
```

# ffmpeg - ffmpeg的限制？

> ID：11034005
> 
> 赞同：1
> 
> 时间：2012-06-14T13:22:23.607
> 
> 标签：ffmpeg, avi, mpeg, video-conversion

我正在尝试将 avi 文件转换为 mpeg，但 ffmpeg 给了我这些错误消息，“缓冲区下溢”和“数据包太大”

我使用的命令是：

ffmpeg -I input.avi -s 2592x2160 -b 1200 output.mpg

1.  视频尺寸 - 有什么限制吗？

    我注意到，如果我拍摄尺寸较小的视频，它似乎可以正常工作，有没有办法容纳这样的大尺寸文件？

2.  帧速率 - ffmpeg 可以填充视频吗？

    我也有某些帧速率的问题，错误消息告诉我 mpeg1 格式只支持某些帧速率，我可以让 ffmpeg 填充我的 avi 文件来解决这个问题吗？

3.  文件大小 - 可以转换的最大文件大小是否有任何限制？

谢谢，埃蒙

输出

```
ffmpeg -i neoAvi.avi -s 2592x2160 -b 1200k neoMpg.mpg
ffmpeg version N-41416-g718607b Copyright (c) 2000-2012 the FFmpeg developers
  built on Jun  8 2012 12:46:19 with gcc 4.6.3
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-ru
ntime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libass
 --enable-libcelt --enable-libopencore-amrnb --enable-libopencore-amrwb --enable
-libfreetype --enable-libgsm --enable-libmp3lame --enable-libnut --enable-libope
njpeg --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libth
eora --enable-libutvideo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-
libvorbis --enable-libvpx --ena  libavutil      51\. 56.100 / 51\. 56.100
  libavcodec     54\. 25.100 / 54\. 25.100
  libavformat    54\.  6.101 / 54\.  6.101
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 78.101 /  2\. 78.101
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
[avi @ 01d2be20] Something went wrong during header parsing, I will ignore it an
d try to continue anyway.
[avi @ 01d2be20] Stream #0: not enough frames to estimate rate; consider increas
ing probesize
[avi @ 01d2be20] Stream #1: not enough frames to estimate rate; consider increas
ing probesize
[avi @ 01d2be20] Could not find codec parameters (Subtitle: none)
Input #0, avi, from 'neoAvi.avi':
  Duration: 00:00:01.49, start: 0.000000, bitrate: 1493071 kb/s
    Stream #0:0: Video: rawvideo, pal8, 2592x2160, 33.33 tbr, 33.33 tbn, 33.33 t
bc
    Stream #0:1: Subtitle: none
Please use -b:a or -b:v, -b is ambiguous
File 'neoMpg.mpg' already exists. Overwrite ? [y/N] y
[mpeg @ 02ba71a0] packet too large, ignoring buffer limits to mux it
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=921414 size=946200
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=923455 size=946200
[mpeg @ 02ba71a0] packet too large, ignoring buffer limits to mux it
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=923455 size=946200
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=925496 size=946200
[mpeg @ 02ba71a0] packet too large, ignoring buffer limits to mux it
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=925496 size=946200
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=927537 size=946200
...
[mpeg @ 02ba71a0] packet too large, ignoring buffer limits to mux it
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=921414 size=946200
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=923455 size=946200
[mpeg @ 02ba71a0] packet too large, ignoring buffer limits to mux it
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=923455 size=946200
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=925496 size=946200
[mpeg @ 02ba71a0] packet too large, ignoring buffer limits to mux it
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=925496 size=946200
[mpeg @ 02ba71a0] buffer underflow i=0 bufi=927537 size=946200
frame=    4 fps=3.2 q=5.5 size=    1380kB time=00:00:00.06 bitrate=169573.6kbits
frame=   13 fps=7.3 q=29.1 size=    1604kB time=00:00:00.36 bitrate=35836.2kbits
frame=   22 fps=9.5 q=31.0 size=    2100kB time=00:00:00.66 bitrate=25804.8kbits
frame=   31 fps= 11 q=31.0 size=    2490kB time=00:00:00.96 bitrate=21101.5kbits
frame=   40 fps= 12 q=31.0 size=    3010kB time=00:00:01.26 bitrate=19466.8kbits
frame=   47 fps= 12 q=31.0 Lsize=    3128kB time=00:00:01.53 bitrate=16711.7kbit
s/s dup=0 drop=3
video:3116kB audio:0kB global headers:0kB muxing overhead 0.372684% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:18:48.423

2592 x 2160 每帧未压缩约 20MB。1200 位/秒的比特率太低了。

依次回答您列举的问题：

> 1\. 视频尺寸 - 有什么限制吗？

FFmpeg 没有我知道的特别限制，但不同的编解码器和容器格式确实经常限制帧大小和速率（或隐含限制后两者的比特率）。您应该检查您正在使用的编解码器和容器格式的规范。

> 2\. 帧率——ffmpeg 可以补出视频吗？

正如您在上面提到的，编解码器和容器并不总是允许任意帧速率。（即使编解码器/容器*确实*让您设置了疯狂的帧速率，播放软件也可能无法正常工作。）不过，FFmpeg 会为您填充视频。从[文档](http://ffmpeg.org/ffmpeg.html#Video-Options)：

> -r[: *stream_specifier* ] *fps* ( *input/output,per-stream* )
> 作为输出选项，复制或丢弃输入帧以实现恒定的输出帧速率*fps*。

> 3\. 文件大小 - 可以转换的最大文件大小是否有任何限制？

不是我知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T16:44:47.500

可能的大小限制，但仅适用于大小为 100Mio 的单遍编码示例（MP4 16/9 HD）

```
ffmpeg -y -i "imput.avi" -f mp4 -r 29.97 -vcodec libx264 -preset veryslow -vf setdar=16:9 -fs 100000000 -acodec libvo_aacenc -ab 112k -ar 48000 -ac 2 output.mp4 
```

-fs 100000000 = 100Mio

# iphone - 一段时间后更改视图时出现奇怪的错误

> ID：11034010
> 
> 赞同：0
> 
> 时间：2012-06-14T13:22:37.787
> 
> 标签：iphone, xcode, uiviewcontroller

我有一个 bigo 问题，我有一个基于导航的应用程序，它从数据库中读取结束编辑值，我读取值（从 table1）然后显示 1 个按钮的值，单击打开新视图，其中包含另一个表的所有值的按钮然后我打开一个详细视图。在详细视图中我编辑了数据库的一些值，但我认为不是问题...一段时间后我打开/关闭详细视图我收到此错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/kikko/Library/Application Support/iPhone Simulator/5.1/Applications/36424126-8725-4DDA-8D58-736A407E1F37/ObjectQuiz.app> (loaded)' with name 'OggettoController''
*** First throw call stack:
(0x137f022 0x1937cd6 0x1327a48 0x13279b9 0x5ba638 0x4601fc 0x460779 0x46099b 0x460d11 0x4728fd 0x472aef 0x472dbb 0x47385f 0x473e06 0x473a24 0x604a 0x1380e99 0x39c14e 0x39c0e6 0x442ade 0x442fa7 0x442266 0x65da1a 0x135399e 0x12ea640 0x12b64c6 0x12b5d84 0x12b5c9b 0x22717d8 0x227188a 0x399626 0x2a92 0x2a05)
terminate called throwing an exception 
```

奇怪的问题是我只有在 tot clic 之后才有这个问题（不在同一个按钮上）......你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:37:52.193

当我在笔尖中留下对课堂中不再存在的插座的引用时，我通常会看到这一点。您可以通过设置“所有异常”断点来获取更多信息（转到项目导航器中的断点选项卡，按左下角的 +）。

这将缩小查看哪个xib的范围。然后仔细查看xib的连接检查器。寻找任何有一点“！”的网点 在链接上。

# mapping - BizTalk 映射问题

> ID：11034011
> 
> 赞同：2
> 
> 时间：2012-06-14T13:22:39.533
> 
> 标签：mapping, biztalk

我有一个映射问题，我正试图在 BizTalk 的映射工具中解决。

考虑以下输入文件：

```
<person>
    <ID>APersonID</ID>
    <relatives>
        <relative>
            <name>Relative name 1</name>
        </relative>
        <relative>
            <name>Relative name 2</name>
        </relative>
    </relatives>
</person> 
```

注意： 相对元素的**minOccurs**设置为*0*，相对元素的**maxOccurs**设置为*unbounded*。

此输入应映射到以下输出：

```
<relatives>
    <person>
        <ID>APersonID</ID>
        <relative>Relative name 1</relative>
    </person>
    <person>
        <ID>APersonID</ID>
        <relative>Relative name 2</relative>
    </person>
<relatives> 
```

注意： person 元素的**minOccurs**为*1*，**maxOccurs**为*unbounded*。

我已经将映射与 Looping functoid 一起使用，它将输入文件的相对元素链接到输出文件中的 person 元素。但是现在有一种情况，我得到了以下输入文件：

```
<person>
    <ID>APersonID</ID>
    <relatives />
</person> 
```

应该映射到哪个

```
<relatives>
    <person>
        <ID>APersonID</ID>
    </person>
<relatives> 
```

我当前的映射无法处理这种情况。有人可以就如何制作/编辑映射提出建议，以便这两种情况都能奏效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:57:05.930

事情比起初看起来要复杂一些，因为我们需要在继续`relatives/relative`之前测试至少一个是否存在。除了使用 XSLT，我想不出任何其他方法 - 请参阅[此处](https://stackoverflow.com/questions/3716608/biztalk-2010-mapping-an-xsd-with-a-lot-of-elements-with-the-same-name/3718014#3718014)，了解如何从地图中提取 XSLT 并将 BTM 更改为使用 XSLT 而不是视觉函数映射。

以下 XSLT

```
<?xml version="1.0" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt"
    xmlns:var="http://schemas.microsoft.com/BizTalk/2003/var"
    exclude-result-prefixes="msxsl var"
    version="1.0"
    xmlns:ns0="http://BizTalk_Server_Project5.Schema1">
    <xsl:output omit-xml-declaration="yes" method="xml" version="1.0" />
    <xsl:template match="/">
        <xsl:apply-templates select="/ns0:person" />
    </xsl:template>
    <xsl:template match="/ns0:person">
        <relatives>
            <xsl:variable name="personId" select="ns0:ID/text()" />
            <xsl:choose>
                <xsl:when test="not(ns0:relatives) or not(ns0:relatives/ns0:relative)">
                    <person>
                        <ID>
                            <xsl:value-of select="$personId" />
                        </ID>
                    </person>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:for-each select="ns0:relatives/ns0:relative">
                        <person>
                            <ID>
                                <xsl:value-of select="$personId" />
                            </ID>
                            <relative>
                                <xsl:value-of select="ns0:name/text()" />
                            </relative>
                        </person>
                    </xsl:for-each>
                </xsl:otherwise>
            </xsl:choose>
        </relatives>
    </xsl:template>
</xsl:stylesheet> 
```

产生您描述的输出。（显然更改您的名称空间以匹配，我假设您已经拥有`elementFormDefault="qualified"`（如果没有，请删除`ns0`前缀）

# wso2 - 如何基于 XML 配置文件在 WSO2 ESB 中动态路由消息

> ID：11034013
> 
> 赞同：1
> 
> 时间：2012-06-14T13:22:50.490
> 
> 标签：wso2, wso2esb, esb

我正在尝试根据存储为本地条目 (key=mapping_id_ep_v1.xml) 的 XML 片段中的信息来路由消息。用于查找正确端点的 id，它是消息正文的一部分。

这是用于将 id 映射到端点的 XML 片段：

```
<mappings>
    <mapping id="ep_1">http://localhost:8280/services/ep_1</mapping>
    <mapping id="ep_2">http://localhost:8280/services/ep_2</mapping>
    <mapping id="ep_3">http://localhost:8280/services/ep_3</mapping>
<mappings> 
```

我使用以下语句从正文中检索 id 以查找端点：

```
<property name="LOOK-UP" expression="//controleFile/id" /> 
```

我可以按顺序使用以下条目将 XML 文件加载到属性文件中：

```
<property name="MAPPING" expression="get-property('mapping_id_ep_v1.xml')" /> 
```

我使用以下语句记录该属性：

```
<log level="custom">
    <property name="Look-up" expression="get-property('LOOK-UP')" />
    <property name="Mapping" expression="get-property('MAPPING')" />
</log> 
```

到目前为止，一切都很好。我无法弄清楚如何从 MAPPING 属性中检索正确的端点。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:17:38.920

我用不同的方法解决了我的问题。它与给定 bij fipris 的答案一致。

在代理中，我添加了以下内容：

```
 <property name="MAPPING" expression="get-property('mapping_id_ep_v1')" />
 <property name="LOOK_UP" expression="//controlFile/id" />
 <log level="custom">
    <property name="MAPPING" expression="get-property('MAPPING')" />
    <property name="LOOK_UP" expression="get-property('LOOK_UP')" />
 </log>
 <script language="js" key="testScript_2" function="getEndpointByID" />
 <log level="custom">
    <property name="EP" expression="get-property('EP')" />
 </log> 
```

这是mapping_id_ep_v1的内容：

```
<mappings>
    <mapping id="ep_1">http://localhost:8280/services/ep_1</mapping>
    <mapping id="ep_2">http://localhost:8280/services/ep_2</mapping>
    <mapping id="ep_3">http://localhost:8280/services/ep_3</mapping>
<mappings> 
```

这是 TestScript_2 中的代码：

```
<x>

  function getEndpointByID(mc) {
     var xml = new XML(mc.getProperty('MAPPING'));
     var look_up = new XML(mc.getProperty('LOOK_UP'));
     var ep = xml..mapping.(@id == look_up);
     mc.setProperty('EP', ep + '');
  }

</x> 
```

代理将映射 xml 加载到属性中。此属性在 javascript 代码中转换为 XML，然后使用 LOOK_UP 检索正确的端点。

希望这对其他人有帮助。

问候，尼德基尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:13:47.760

是的，这是一个限制。实际上，这应该是丰富中介的功能。将创建一个功能请求，以便为下一个 ESB 版本修复此问题。

现在你可以这样做：

*   保留当前的肥皂负载：使用丰富
*   用属性的内容替换当前正文 - 丰富
*   针对当前主体评估 xpath 并提取所需的内容。（将其用作 EP）- 属性
*   使用保留的有效负载恢复消息正文 - 丰富

我知道......这是一个黑客:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:13:02.060

我也有类似的情况。问题似乎是您无法对属性内容执行 xpath 表达式。

在将 xml 加载到属性后，您可以使用 Javascript 脚本轻松地完成您需要的操作。Javascript+e4x 提供了一种通过 xpath 表达式访问变量的 XML 内容的简单方法。

# sql - 从单个表中的两个列中获取最大数据（仅来自一个表） MS ACCESS

> ID：11034014
> 
> 赞同：-2
> 
> 时间：2012-06-14T13:22:56.927
> 
> 标签：sql, sql-server, sqlite, ms-access, ms-access-2007

我的表MARKS中有两个列（DES1，DES2），我想从这两个列中找到MAXIMUM（对于两列中的每一行）标记并将最大标记输入到另一列（DES），如果这两列具有相同的数据，然后将相同的数据输入到 [MS ACCESS] 中的列 (DES)

表标记

## DES1

34

23

30

## DES2

22

40

30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:52:09.973

这是另一种方法：

```
UPDATE Marks
SET Des = (SELECT Max(v) FROM (VALUES (Des1), (Des2)) AS value(v)) 
```

如果您有一堆要比较的列，这可能会更清晰，否则我会使用 CASE 语句。这也适用于空值。

此外，这只适用于 >= SQL 2008

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:30:28.937

这是我一起快速完成的事情，但尚未经过测试：

```
DECLARE @DES     INT
SELECT @DES = (CASE WHEN MAX(DES1) = MAX(DES2) THEN MAX(DES1)
                    WHEN MAX(DES1) > MAX(DES2) THEN MAX(DES1)
                    ELSE MAX(DES2)
               END)
FROM Marks

...use @DES for your insert 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:32:47.533

使用`CASE`声明：

```
UPDATE  Marks
SET     Des = CASE WHEN Des1 > Des2 OR Des2 IS NULL THEN Des1 ELSE Des2 END 
```

# java - 忽略乐观锁定

> ID：11034015
> 
> 赞同：3
> 
> 时间：2012-06-14T13:22:56.493
> 
> 标签：java, hibernate, optimistic-locking

我有包含 @version 字段的实体。有时我需要更新它，尽管有乐观锁定异常。

在那种情况下我可以以某种方式关闭它吗？或者我应该重新加载实体并重试保存它 n 次，直到它更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:27:37.360

您可以直接对连接进行操作：

`org.hibernate.Session.doWork(Work work)`.

但是您会获得最后一次写入胜利。最好使用事务隔离级别来执行行锁。但是数据库必须支持它们。

`Hibernate 3.x`有`Session.connection()`但在`4`它消失了。

# googlebot - 向 google bot 发出什么状态码

> ID：11034016
> 
> 赞同：0
> 
> 时间：2012-06-14T13:22:57.943
> 
> 标签：googlebot

谷歌正在为我的网站尝试不同的网址结构并尝试抓取。我可以在我的网站管理员工具中的抓取错误下看到这些。从 google bot 向所有这些请求类型发出什么状态代码。

目前我向所有这些页面发出 404 未找到。这安全吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T00:51:47.217

您可以将 404 用于从未存在的 URL，或者您故意删除且不想重定向的页面。

410 也是安全的，并且以相同的方式处理。我一直对从未存在的 URL 使用 404，对曾经存在但不再可用的 URL 使用 410。

在大多数情况下，只要您正确使用它们，Googlebot 就会尊重所有有效的状态代码。

如果您必须关闭站点进行维护或服务不可用，请使用 503。如果您将旧内容重定向到新 URL，请使用 301。避免使用 302 重定向是一种最佳做法，因为它们不会给您任何 SEO 价值……而且在极少数情况下应该使用它。

最后，永远不要为错误页面提供 200 OK。Google 可能会不时检测到这些并告诉您它们已检测到“软”404，并且应该对其进行更正。

# javascript - if else 语句似乎不起作用

> ID：11034017
> 
> 赞同：-1
> 
> 时间：2012-06-14T13:22:58.220
> 
> 标签：javascript, svg, raphael

我有一个声明应该向前和向后移动图像，但它似乎只能向前移动我的动画......一次。

这就是我一直在想的：

```
var rect1;
var rect2;
var xEnd = 50;
var xEnd2 = 150;

function init() {
    paper = Raphael("loadSVG");
    rect1 = paper.rect(150, 20, 50, 50);
    rect1.attr({
        fill: "#ffaaaa",
        "stroke-width": 3
    });
};

function moveRect1() {
    if (rect1.animate({
        x: xEnd
    })) {
        rect1.animate({
            x: xEnd
        });
    }
    else {
        rect1.animate({
            x: xEnd2
        });
    }
}; 
```

所以我的问题是它只将我的动画移动一次到 50，但如果我再次按下按钮，什么也没有发生。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:25:29.863

这将永远是`true`...

```
if (rect1.animate({x: xEnd})) { 
```

...因为您将对象传递给`if`, 并且对象始终为真。

我假设您的意思是传递一些`rect1`要评估的属性。

![在此处输入图像描述](../Images/54dca63f339086b2359cb3946775d5d6.png)

```
 ^^------------------^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:51:00.547

我想我明白了问题所在。每次单击按钮时，您实际上是在已经运行的动画循环之上启动了另一个动画循环。所以说你的广场向右，然后向左。如果单击左侧循环，则会在右上方应用一个新动画。

我试图在[这里](http://jsfiddle.net/amadanNM/ypfyx/#base)说明这一点。单击绿色小方块开始您的第一个周期。每一次点击都会开始一个新的循环。每个周期都会尝试改变颜色。当您多次单击它时，您会看到它以及四处颤抖的方块，随着每个动画周期的出现，颜色会发生变化。

您在按钮上的单击事件只需要在开始下一个动画循环之前停止现有动画 (rect1.halt())。

希望有帮助。

N。

# html - IE7 Flyout Navigation 不显示

> ID：11034020
> 
> 赞同：0
> 
> 时间：2012-06-14T13:23:06.597
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我在 IE7 上的弹出窗口有问题...它在 IE8、Chrome、Firefox 和 Safari 中工作...

这是它的 JSFiddle 链接：http: [//jsfiddle.net/ChristianRomeni/8vEGk/2/](http://jsfiddle.net/ChristianRomeni/8vEGk/2/)

但是 FlyOut 不会在 IE7 中显示......有没有人知道为什么会这样？

问候，谢谢

# sql - 删除查询中的问题

> ID：11034021
> 
> 赞同：0
> 
> 时间：2012-06-14T13:23:06.293
> 
> 标签：sql, oracle, mybatis

以下查询不起作用。请告诉我这里出了什么问题。它给出错误报告：SQL 错误：ORA-00933：SQL 命令未正确结束 00933。00000 -“SQL 命令未正确结束”。我试图一次从两个表中删除数据。

```
delete t1,t2 from x t1 inner join y t2 on t1.id=t2.id where t1.id in 
(SELECT object_id FROM z WHERE name = 'YourName'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:29:12.403

在单个查询中一次从两个表中删除数据？？？不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:25:36.663

我猜你只是不能同时从两个表中删除数据。您必须使用 2 个查询。使用事务可能有助于模型的一致性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:40:43.803

如果 t1 和 t2 是内连接的，那么您的选择是进行引用`ON DELETE CASCADE`，因此您只需删除父行即可自动删除所有子行。

rgds。

# asp.net - Request.Form[] 在 asp.net 的静态方法中不起作用

> ID：11034022
> 
> 赞同：0
> 
> 时间：2012-06-14T13:23:09.347
> 
> 标签：asp.net, methods, static

我在 aspx.cs 页面中有一个静态的 webmethod，我想在该方法中使用 Request.Form[] 但不支持并说：

非静态字段需要对象引用。我如何在该网络方法中使用 Request.Form[] （任何替代使用方式）

问候吉特尼姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:45:58.370

如果您回帖，`Request.Form`则有意义。

据我了解，您只需在后面的代码中调用静态函数。那时该页面不存在，您也不要完整回帖以填写表格

> 任何替代使用方式

正确的方法是将您的数据作为参数发送给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:35:43.627

您不能在静态上下文中使用非静态属性。如果您的方法是静态的，则意味着它不应该依赖于被调用的实例（在这里您使用`Request`的是`this`- 您的页面的属性）。

如果您的方法根据`POST`数据中的某些内容进行一些计算，那么您应该将其添加为方法的参数，然后使用`Request.Form["something"]`值调用该方法：

```
public static int MyStaticMethod(string someParameter)
{
    //logic involving someParameter
    return a value based on the logic above
}

//somewhere in your code-behind
if (MyStaticMethod(Request.Form["something"]) == 0) //something something 
```

# r - r中的组合锻炼

> ID：11034023
> 
> 赞同：3
> 
> 时间：2012-06-14T13:23:12.077
> 
> 标签：r, combinations

这是我的数据框：

```
name <- c("P1", "P2", "IndA", "IndB", "IndC", "IndD", "IndE", "IndF", "IndG")
    A <- c(1, 3, 1, 2, 2, 5, 5, 1, 4)
    B <- c(2, 4, 3, 4, 2, 2, 6, 2, 2)
    mydf <- data.frame (name, A, B) 
```

以下解释说明了我想要生成什么组合并识别出不可能的组合。

每个父母（P1 和 P2）都有两个，并且可以为他们的孩子（个人）贡献一个。

![在此处输入图像描述](../Images/df99470b23b8acd86d1a833ac3e267ff.png)

父母可以有相同的（例如 1，在下面的例子中）并且每次可以贡献一个。 ![在此处输入图像描述](../Images/6183d06eb556066269d2b7f4ef40b1f4.png)

这样这就变成了一个组合游戏，下面是组合的例子。

![在此处输入图像描述](../Images/71806ac78a5b847585364fca9b8a4677.png)

倒数相同（正确）：1 3 与 3 1 相同

![在此处输入图像描述](../Images/f4abae7e1684cad0ca82cc7b1b87631c.png)

**问题是：创建可能的组合并找到那些不能成为组合成员的组合。**

```
 name <- c("P1", "P2", "IndA", "IndB", "IndC", "IndD", "IndE", "IndF", "IndG")
    A <- c(1, 3, 1, 2, 2, 5, 5, 1, 4)
    B <- c(2, 4, 3, 4, 2, 2, 6, 2, 2)
    mydf <- data.frame (name, A, B)

 name A B
1   P1 1 2
2   P2 3 4
3 IndA 1 3
4 IndB 2 4
5 IndC 2 2
6 IndD 5 2
7 IndE 5 6
8 IndF 1 2
9 IndG 4 2 
```

![在此处输入图像描述](../Images/e8986219c7d02aeb60dc9b2af608c016.png)

**预期输出：**

```
 name A B     correct 
    1   P1 1 2   NA
    2   P2 3 4   NA
    3 IndA 1 3   TRUE
    4 IndB 2 4   TRUE
    5 IndC 2 2   FALSE
    6 IndD 5 2   FALSE
    7 IndE 5 6   FALSE
    8 IndF 1 2   FALSE
    9 IndG 4 2   TRUE 
```

**编辑：**用于双重检查的第二个数据集：

```
 name <- c("P1", "P2", "IndH", "IndI", "IndJ", "IndK")
    A <- c(1, 3, 3, 1, 4, 3)
    B <- c(1, 4, 3, 1, 1, 5)
    mydf2 <- data.frame (name, A, B)
    mydf2
   name A B Correct 
1   P1 1 1    NA
2   P2 3 4    NA
3 IndH 3 3    FALSE
4 IndI 1 1    FALSE
5 IndJ 4 1    TRUE
6 IndK 3 5    FALSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:39:47.267

就像是

```
dum.match<-rbind(expand.grid(c(mydf[1,2:3]),c(mydf[2,2:3])),expand.grid(c(mydf[2,2:3]),c(mydf[1,2:3])))
newmydf<-cbind(mydf,paste(mydf$A,mydf$B)%in%paste(dum.match$Var1,dum.match$Var2))

> newmydf
  name A B paste(mydf$A, mydf$B) %in% paste(dum.match$Var1, dum.match$Var2)
1   P1 1 2                                                            FALSE
2   P2 3 4                                                            FALSE
3 IndA 1 3                                                             TRUE
4 IndB 2 4                                                             TRUE
5 IndC 2 2                                                            FALSE
6 IndD 5 2                                                            FALSE
7 IndE 5 6                                                            FALSE
8 IndF 1 2                                                            FALSE
9 IndG 4 2                                                             TRUE

dum.match2<-rbind(expand.grid(c(mydf2[1,2:3]),c(mydf2[2,2:3])),expand.grid(c(mydf2[2,2:3]),c(mydf2[1,2:3])))
newmydf2<-cbind(mydf2,paste(mydf2$A,mydf2$B)%in%paste(dum.match2$Var1,dum.match2$Var2))

> newmydf2
  name A B paste(mydf2$A, mydf2$B) %in% paste(dum.match2$Var1, dum.match2$Var2)
1   P1 1 1                                                                FALSE
2   P2 3 4                                                                FALSE
3 IndH 3 3                                                                FALSE
4 IndI 1 1                                                                FALSE
5 IndJ 4 1                                                                 TRUE
6 IndK 3 5                                                                FALSE
> 
```

# ruby-on-rails - 如何将额外的对象插入到每个切片的 Rails 模型列表中

> ID：11034026
> 
> 赞同：1
> 
> 时间：2012-06-14T13:23:23.170
> 
> 标签：ruby-on-rails, ruby, activerecord, loops

我正在使用 each_slice 从 ActiveRecord 列表中以网格格式显示记录。我想要做的是将项目随机插入到这个网格中。

我的代码目前看起来像：

```
<%=things.each_slice(3) do |row|%>
  <div class="row">
    <%row.each do |listing|%>
        <%=show_cell(listing)%>
    <%end%>
  </div>
<%end%> 
```

这会产生一个像这样的网格：

```
+----+----+----+
|cell|cell|cell| 
+----+----+----+
|cell|cell|cell| 
+----+----+----+
|cell|cell|cell| 
+----+----+----+ 
```

我想做的是有类似的东西

```
+----+----+----+
|cell|cell|cell| 
+----+----+----+
|cell|xxxx|cell| 
+----+----+----+
|cell|cell|xxxx| 
+----+----+----+ 
```

单元格来自记录的事物集合，并且 xxxx 是随机插入的（10% 的机会）

是否有一种“红宝石”方法可以做到这一点，而无需摆脱切片方法，并手动计算何时创建新行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:33:13.023

这？

```
>> (1..10).flat_map { |x| rand > 0.1 ? [x] : [x, "xxxx"] }
=> [1, "xxxx", 2, 3, 4, 5, 6, "xxxx", 7, 8, 9, 10] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:32:21.687

制作一组新的混合事物和 Xxx：

```
mixed_stuff = things.to_a.collect {|t| rand > 0.9 ? t : [t, xxx] }.flatten 
```

然后你可以这样做：

<%=mixed_stuff.each_slice(3) 做 |row|%> 等等...

然后在 show_cell(listing) 方法中你可以做`if listing.is_a?(Thing)... else listing.is_a?(Xxx)...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:10:36.407

一种更简洁的处理方法是创建一个随机提供“xxx”的枚举器。这是我的刺...

潜在问题：

*   假设顺序xxx没问题
*   如果总数不再除以 3 怎么办？

无论如何，这里是

```
class Randomizer
  include Enumerable

  def initialize(source)
    @source = source
  end

  def each
    @source.each do |*args|
      while rand < 0.1
        yield 'xxx'
      end
      yield(*args)
    end
    while rand < 0.1
      yield 'xxx'
    end
  end
end

words = %w{foo bar baz bing bang boom}
Randomizer.new(words).each_slice(3) do |row|
  row.each do |word|
    print "#{word} "
  end
  puts ''
end 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-14T13:41:00.450

编辑：这不起作用随机隐藏项目，而不是在两者之间插入占位符

```
<%= rand>0.9 ? 'xxxxx' : show_cell(listing)%> 
```

# php - PHP数组添加不管孩子？

> ID：11034027
> 
> 赞同：0
> 
> 时间：2012-06-14T13:23:26.040
> 
> 标签：php

我有一个数组，我填充了父母、孩子、孩子的孩子、孩子的孩子的孩子等等。但是，我似乎无法弄清楚如何为尽可能多的级别做到这一点，而不必写出每个级别。

首先现在我有

```
foreach($this->tree as $k=>$v) {
    if($v['id'] == $i['pid']) {
      // Add children
      $this->tree[$k]['children'][] = array('name'=>$i['name'],'id'=>$i['id']);
      break;
    }else{
      foreach($v['children'] as $kc=>$vc) {
        $this->tree[$k]['children'][$kc]['children'][] = array('name'=>$i['name'],'id'=>$i['id']);
      }
    }
} 
```

这会产生一些看起来像

```
Array
(
    [0] => Array
        (
            [name] => Test
            [id] => 1
            [children] => Array
                (
                    [0] => Array
                        (
                            [name] => Test2
                            [id] => 2
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [name] => Test 3
                                            [id] => 3
                                        )

                                )

                        )

                )

        )

); 
```

但我似乎无法弄清楚如何不写出十亿个 foreach 循环。

$i 只有四行，id、pid（父 id）、name 和 weight。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:48:32.333

正如其他人所提到的，了解用于遍历树的递归函数是件好事。

为了让您开始使用递归函数：

```
function walkRecursive($element) {
    if($element['id'] == $i['pid']) {
         // add your stuff
         break;
    }
    if( isset( $element['children'] ) ) {
        foreach($element['children'] as $child) {
            walkRecursive($child);
        }
    }
}

walkRecursive($this->tree); 
```

或者，您想查看标准的 PHP 函数`array_walk_recursive`

[http://php.net/manual/en/function.array-walk-recursive.php](http://php.net/manual/en/function.array-walk-recursive.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:39:06.097

您需要一个递归函数来完成此操作。也就是说，一个函数或类方法遍历一个平面项目列表中的每个项目并组装一个新的多维列表，在自身内部调用自身以添加子项，然后导致添加子项的子项等. 听起来很混乱？如果你搜索它，网上有很多文档。

# .net - 如何在 Sql Server 2008 的 XML 列中的属性上使用 WHERE

> ID：11034031
> 
> 赞同：0
> 
> 时间：2012-06-14T13:23:37.473
> 
> 标签：.net, sql-server, xml, sqlxml

这可能很简单，我只是没有正确使用大括号，但由于我几乎没有查询 SQL SERVER XML 数据的经验，这让我发疯了。

我有一个带有 XML 类型列*NoSqlField*的简单表。这包含 NULL 或

```
<root version="1.0">
  <entry key="mykey">1</entry>
</root> 
```

*我想要表中所有在其NoSqlField*列中具有 <entry key="mykey">1</entry> 值的行。

一个（相当愚蠢，因为它使用 .ToString()）LINQ 查询使用

```
where h.NoSqlField.ToString().IndexOf("<entry key=\"mykey\">1</entry>") > -1 
```

返回一个结果，所以它肯定存在。

**如何在 T-SQL 中运行相同的查询？**我试过了

```
SELECT * FROM mytable WHERE 
NoSqlField.value('(//entry[@key=mykey])[1]','varchar(1)') = '1' 
```

在各种变体中（有和没有斜杠，完整路径，...），但从未得到一个返回的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:05:43.903

**解决方案 1：** 如果要检查`NoSqlField`列是否有`//root/entry`元素并且该元素包含`1`（内部文本），则可以使用此解决方案：

```
SET ANSI_WARNINGS ON;
GO

DECLARE @TestData TABLE (
    ID INT IDENTITY PRIMARY KEY,
    NoSqlField XML NULL
);

INSERT  @TestData  (NoSqlField)
SELECT  NULL 
UNION ALL
SELECT  '
<root version="1.0">
  <entry key="mykey">1</entry>
</root>'
UNION ALL
SELECT  '
<root version="1.0">
  <entry key="mykey" anotherkey="myanotherkey">1</entry>
</root>'
UNION ALL
SELECT  '
<root version="1.0">
  <entry key="anotherkey" key2="a">1</entry>
</root>'
UNION ALL
SELECT  '
<root version="1.0">
  <entry key="mykey" key3="3">22</entry>
</root>';

SELECT  * 
FROM    @TestData t
WHERE   t.NoSqlField.exist('//root/entry[@key="mykey"][text() = "1"]') = 1 
```

结果：

```
ID NoSqlField
-- ---------------------------------------------------------------------------------
2  <root version="1.0"><entry key="mykey">1</entry></root>
3  <root version="1.0"><entry key="mykey" anotherkey="myanotherkey">1</entry></root> 
```

注1：您可以看到此解决方案允许（存在）其他属性（例如`anotherkey`）。

**解决方案 2：** 如果你想要一个严格的过滤器（`entry`只有一个属性的元素：），`key`那么你可以使用这个查询：

```
SELECT  *
FROM
(
        SELECT  * 
                ,t.NoSqlField.exist('//root/entry[@key="mykey"][text() = 1]') AS XmlExist
                ,t.NoSqlField.query('
                    let $list := //root/entry/@*
                    for $i in $list
                    where local-name($i) != "key"
                        return <ret value="1"/>
                ').exist('//ret') AS HasAnotherAttribute
        FROM    @TestData t
) src
WHERE   src.XmlExist = 1
AND     src.HasAnotherAttribute = 0 
```

结果：

```
ID NoSqlField                                              XmlExist HasAnotherAttribute
-- ------------------------------------------------------- -------- -------------------
2  <root version="1.0"><entry key="mykey">1</entry></root> 1        0 
```

注意 2：将构建一个包含元素`let $list := //root/entry/@*`的所有 (@*) 属性的列表。`//root/entry`

注 3：[本地名称（）](http://msdn.microsoft.com/en-us/library/ms190650.aspx)

# delphi - 发生错误时检测 Delphi 按钮组件中的 MouseUp

> ID：11034034
> 
> 赞同：2
> 
> 时间：2012-06-14T13:23:42.420
> 
> 标签：delphi, button, state, mouseup

我在 Delphi 中制作了一个按钮组件，并在我的按钮 mouseup 事件中编写了一个错误代码 (strtoint('a');)。当我单击按钮时，会出现一条错误消息并且按钮状态保持按下状态。TSpeedButton 也有同样的问题，但是 TButton 没有这个问题（我认为是因为它是标准的 windows 控件）。是否有任何代码可以添加到我的按钮组件中以消除此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:22:29.293

我发现了问题，我应该在 WM_KILLFOCUS 消息过程中添加代码以将按钮恢复到正常状态。

# java - 一个类文件可以实现多少接口

> ID：11034035
> 
> 赞同：23
> 
> 时间：2012-06-14T13:23:46.307
> 
> 标签：java, oop, interface, multiple-inheritance

一个类文件可以实现多少个接口？类文件使用的接口数量是否有限制？提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-14T13:25:04.633

出于所有实际目的，一个类可以实现的接口数量没有限制，但是 java 不允许您从多个超类继承。

但是，如果你真的要挑剔，你可以说一个类可以实现的接口数量受接口 id 可以在 java 字节码中的最大值的限制，或者你必须实现这些接口的代码内存量，或者存储字节码的硬盘空间量。这些都是愚蠢的论点。显然，由于您的计算机没有无限的内存、无限的吞吐量和无限的代码空间，我们知道所有事物都有理论上的最大值，就像您可以在单个 jar 中拥有的理论上的最大代码行数一样。

但是如果你真的很想知道一个类可以实现的最大接口的理论数量，那就是 65535。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-14T13:28:52.353

来自 Java VM Specification on [Limitations of the JVM](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.11)：

> 类或接口的直接超接口的数量受 ClassFile 结构的 interfaces_count 项的大小限制为 65535。

这是唯一的限制。这是由于编译后的 Java 字节码的结构。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-14T13:26:58.520

限制比技术更实用。

手写代码的实际限制是几十个。对于生成的代码，你可以有更多，但我怀疑如果你有那么多，你的设计有问题。

[文件格式的限制为 65535。](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.11)

鉴于大多数大型项目的类少于 10K，因此很难想象为什么要在一个类中实现这么多接口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T13:32:16.023

你的类可以实现无限的`Interfaces`，一个`Interface`可以扩展无限的，`Interfaces`但最好的做法是不要实现这么多的接口。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-14T13:32:01.980

一个类可以实现的接口数量没有限制。

# c# - iOS 和 .NET 之间的 Rijndael 加密

> ID：11034042
> 
> 赞同：1
> 
> 时间：2012-06-14T13:24:02.110
> 
> 标签：c#, .net, ios, cryptography, rijndael

我在 iOS 中使用 StringEncryption.m 库来加密消息，然后在 .Net 项目上对其进行解码。

对于 99.9% 的消息，加密/解密过程有效。但是，iOS 应用程序发送的特定消息始终会导致 .Net 项目出现“填充无效”错误。

问题消息的长度为 800 字节。如果我强制它为 799 或 801 字节，则加密/解密有效。

双方都使用 CBC，iOS 解决方案使用 PKCS7 填充。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:21:34.393

遵循 Ramhounds 的指导并产生相同长度的不同消息。问题在于 iOS 上的加密库。

在这里找到答案：[Encrypting 16 bytes of UTF8 with SecKeyWrapper break (ccStatus == -4304)](https://stackoverflow.com/questions/5884119/encrypting-16-bytes-of-utf8-with-seckeywrapper-breaks-ccstatus-4304)

# animation - css3 动画：div 的大小不正确

> ID：11034043
> 
> 赞同：0
> 
> 时间：2012-06-14T13:24:06.993
> 
> 标签：animation, css

```
 .wheel {
            width: 50px !important;
            height: 50px !important;
        }

            .wheel1 {    
                width: 100%;
                height: 100%;
                background-color: #3D3D3D;
                border-radius: 50% / 50%;
                position: absolute;    
            }

            .wheel2 {
                width: 80%;
                height: 80%;
                background-color: #B8B8B8;
                margin: 10%;    
                border-radius: 50% / 50%;
                position: absolute;

                -webkit-animation: wheelActive 1s;
                -webkit-animation-iteration-count: infinite;

                -moz-animation: wheelActive 1s;
                -moz-animation-iteration-count: infinite;

                -ms-animation: wheelActive 1s;
                -ms-animation-iteration-count: infinite;

                -o-animation: wheelActive 1s;
                -o-animation-iteration-count: infinite;

                animation: wheelActive 1s;
                animation-iteration-count: infinite;
            }

            @-webkit-keyframes wheelActive
            {
                0%   { margin: 5%; height: 90%; width: 90%; }
                50%  { margin: 0%; height: 100%; width: 100%; }
                100% { margin: 5%; height: 90%; width: 90%; }

            }

            @-moz-keyframes wheelActive
            {
                0%   { margin: 5%; height: 90%; width: 90%;  }
                50%  { margin: 0%; height: 100%; width: 100%;  }
                100% { margin: 5%; height: 90%; width: 90%;  }

            }

            @-ms-keyframes wheelActive
            {
                0%   { margin: 5%; height: 90%; width: 90%;  }
                50%  { margin: 0%; height: 100%; width: 100%;  }
                100% { margin: 5%; height: 90%; width: 90%;  }

            }

            @-o-keyframes wheelActive
            {
                0%   { margin: 5%; height: 90%; width: 90%;  }
                50%  { margin: 0%; height: 100%; width: 100%;  }
                100% { margin: 5%; height: 90%; width: 90%;  }

            }

            @keyframes wheelActive
            {
                0%   { margin: 5%; height: 90%; width: 90%;  }
                50%  { margin: 0%; height: 100%; width: 100%;  }
                100% { margin: 5%; height: 90%; width: 90%;  }

            } 
```

[http://jsfiddle.net/LXEXU/](http://jsfiddle.net/LXEXU/)

我正在尝试制作一个看起来在旋转的轮子，但它不起作用。轮子不是 50 像素乘 50 像素。我怎样才能使这项工作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:28:19.457

添加位置：相对；到 .wheel 使其成为 50px X 50px [http://jsfiddle.net/LXEXU/1/](http://jsfiddle.net/LXEXU/1/)

# c++ - 为什么“\n”在标准输入而不是从代码中输入时显示不同？

> ID：11034046
> 
> 赞同：1
> 
> 时间：2012-06-14T13:24:20.063
> 
> 标签：c++, c

假设我有一个字符数组`char str[10]`。

如果我将值存储`xyz\nabc`在`str`using`char str[10]="xyz\nabc";`并输出它，它会给出以下输出：

```
xyz
abc 
```

另一方面，如果我从`stdin`表单中给它输入`xyz\nabc`然后打印它，它会给出以下输出：

```
 xyz\nabc 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:25:28.943

当您从 中读取它时`stdin`，您会得到准确的字符串`"xyz\nabc"`，就像它出现的那样。

如果您在代码中对该值进行硬编码（即`char* x = "xyz\nabc"`），则`\n`是单个字符，它代表一个新行。要获得相同的输出，您需要`char* x = "xyz\\nabc"`- 额外的`\`转义`\`.

请参阅此[http://en.cppreference.com/w/cpp/language/escape](http://en.cppreference.com/w/cpp/language/escape)

# jquery - 根据文本输入修改表单动作

> ID：11034047
> 
> 赞同：0
> 
> 时间：2012-06-14T13:24:23.180
> 
> 标签：jquery, forms, action

我想修改元素的 action 属性以包含输入到字段中的任何文本。这是我正在尝试做的一个例子，但不能：

```
<form action="/search/?searchoption=Audio&s=Blocks--[text input here]" method="post" name="audio-search-form">
    <input name="audiosearch" type="text" size="30" id="audiosearch">
    <input type="submit" name="audio-search-submit" value="Search Audio">
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:26:23.447

使用可以改变表单动作使用

```
 // Get input value
 input = $("#textboxId").val()

 // Change form action
 $("#formid").attr("action", "/requiredString/" + input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:27:17.550

```
var $form = $('form');
$form.attr('action', $form.find('input[type="text"]').val()); 
```

或者这个你想**走极端**......：

```
$('form').attr('action', function(index, old) {
    return old + $(this).find('#audiosearch').val();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:28:15.613

如果您的示例表单就是它的全部内容，为什么不将表单方法设为 GET 请求呢？

```
<form action="/search/" method="get" name="audio-search-form">
    <input name="searchoption" type="hidden" value="Audio">
    <input name="s" type="text" size="30" id="audiosearch">
    <input type="submit" name="audio-search-submit" value="Search Audio">
</form> 
```

**编辑：**啊！抱歉，我忽略了`Blocks--`您要添加的部分。不过，我仍将其留在这里以供参考，因为这可能对您有用。（如果`Blocks--`总是保持不变，您不妨将其添加为单独的隐藏字段，或者完全放弃它并将其添加到后端。）

**编辑2：**澄清一下，以下结果搜索网址是否有问题：

```
/search/?searchoption=Audio&type=Block--&s=whatever+the+search+input 
```

例如，可以通过以下方式实现：

```
<form action="/search/" method="get" name="audio-search-form">
    <input name="searchoption" type="hidden" value="Audio">
    <input name="type" type="hidden" value="Block--">
    <input name="s" type="text" size="30" id="audiosearch">
    <input type="submit" name="audio-search-submit" value="Search Audio">
</form> 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:28:31.260

```
var initial = $("form").attr("action");
$("input[name=audiosearch]").bind("keyup",function(){
    $("form").attr("action",initial+$(this).val());
})​ 
```

# php - strlen() 和 UTF-8 编码

> ID：11034058
> 
> 赞同：13
> 
> 时间：2012-06-14T13:24:58.220
> 
> 标签：php, unicode, utf-8, strlen

假设 UTF-8 编码和 PHP 中的 strlen()，这个字符串的长度是否可能为 4？

我只对 strlen() 感兴趣，而不是其他函数

这是字符串：

> $1ï¿½2

我在自己的电脑上测试过，验证了UTF-8编码，得到的答案是6。

我没有在 strlen 的手册中看到任何内容，也没有在 UTF-8 上阅读过任何内容来解释为什么上面的某些字符的计数小于一个。

PS：这个问答（4）来自我在Ebay上买的ZCE的模拟测试。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T13:27:04.713

如何使用 mb_strlen() ？

[http://lt.php.net/manual/en/function.mb-strlen.php](http://lt.php.net/manual/en/function.mb-strlen.php)

但是如果您需要使用 strlen，可以通过将 mbstring.func_overload 指令设置为 2 来配置您的网络服务器，因此它会自动在您的脚本中将 strlen 的使用替换为 mb_strlen。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-14T21:57:36.403

您发布的字符串有六个字符长：$1ï¿½2（美元符号，数字一，带分音符号的小写 i，倒置问号，半分数，数字二）

如果使用该字符串的 UTF-8 表示调用 strlen()，您将得到 9 的结果（可能，尽管有多种长度不同的表示）。

但是，如果我们将该字符串存储为 ISO 8859-1 或 CP1252，我们将有一个六字节长的序列，它与 UTF-8 一样合法。将这 6 个字节重新解释为 UTF-8 将产生 4 个字符：$1�2（美元符号，数字 1，Unicode 替换字符，数字 2）。也就是说，单个字符“�”的 UTF-8 编码与三个字符“ï¿½”的 ISO-8859-1 编码相同。

当 UTF-8 解码器读取不是有效 UTF-8 数据的数据时，通常会插入替换字符。

看来原始字符串是经过多层曲解处理的；通过在非 UTF-8 数据上使用 UTF-8 解码器（产生 1�2 美元），然后通过你用来分析该数据的任何东西（产生 1�¿½2）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-14T13:28:41.297

需要使用多字节字符串函数[mb_strlen()](http://php.net/manual/en/function.mb-strlen.php)像：

```
mb_strlen($string, 'UTF-8'); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-14T14:13:22.127

很可能在准备问题和阅读问题之间的某个时间点，某些过程已经破坏了其中的非 ASCII 字符，因此问题最初是关于其中包含 4 个字符的某个字符串。

[当您以 UTF-8 对替换字符 U+FFFD](http://www.fileformat.info/info/unicode/char/fffd/index.htm) (�) 进行编码并以 latin1 解释结果`ï¿½`时，将获得该序列。例如，在从文件中读取文本时，此字符可替代不编码任何字符的字节序列。发生的事情很可能是这样的：

存储在 latin1 文本文件中的原始问题有：（`$1¢2`您可以将 ¢ 替换为任何非 ASCII 字符）

该文件由使用 UTF-8 的程序读取。由于 ¢ 对应的字节无法解释，程序替换它并读取文本`$1�2`。然后使用 UTF-8 写出此文本，从而生成`$1\xEF\xBF\xBD2`文件。

然后出现了第三个程序，它读取 latin1 中的文件，并显示`$1ï¿½2`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T14:07:31.197

不。

我将使用反证法。

strlen 计算字节数，因此 strlen 为 4 时，该字符串中需要*正好有 4 个字节*。

UTF8 编码*每个字符至少需要 1 个字节*。

我们已经确定：

1.  有4个字节
2.  一个字符由不少于 1 个字节表示

...然而，我们有 6 个字符....这是一个矛盾。所以不行。

然而，不完全清楚的是显示软件（例如，网络浏览器）使用哪个字符集来解释字符串。它可以使用一些不常见的编码方案，其中一个字符可以用少于 8 位表示。如果是这种情况，那么 4 个字节可以显示为 6 个字符。因此，字符串可能是 utf8，但浏览器可以决定将其解释为，例如，一些 5 位字符集。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T13:27:35.650

许多 UTF-8 字符占用几个字节而不是一个。这就是 UTF-8 的构造方式（这就是您可以在一个集合中拥有这么多字符的方式）。

试试**[`mb_strlen()`](http://lt.php.net/manual/en/function.mb-strlen.php)**吧。

# actionscript-3 - 在 flex 中加载模块时 SystemManager null

> ID：11034059
> 
> 赞同：0
> 
> 时间：2012-06-14T13:24:59.423
> 
> 标签：actionscript-3, apache-flex, flex3, flash-builder

[我在此处的官方 adobe 论坛帖子](http://forums.adobe.com/thread/614676)中遇到了与 OP 完全相同的问题。

通过该链接，OP 据称通过覆盖 initialize() 函数来解决他的问题。他为什么这样做以及它如何提供帮助对我来说仍然是一个谜，因为我什至无法自己覆盖它，因为当我尝试时它给了我一个“1021：重复的函数定义”错误。

我什至应该尝试这种覆盖吗？如果可能的话，我想解决我原来的问题，即我的 SystemManager null 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:59:38.207

事实证明，这是在没有先卸载模块的情况下再次尝试加载模块的结果。添加了将卸载模块的删除侦听器。从此没有问题。

# android - 带有操作栏和选项卡的 Android 布局

> ID：11034063
> 
> 赞同：4
> 
> 时间：2012-06-14T13:25:08.070
> 
> 标签：android, android-layout, tabs, android-fragments, actionbarsherlock

我是 Android 新手，需要您的建议。我想要一个带有操作栏的活动，我还需要选项卡（但不是操作栏中的选项卡）和操作栏中的下拉列表来导航。当我单击EG第一个选项卡时，应填充ActionBar中的导航列表，当秒表选项卡，导航列表应填充其他数据等时，当更改选项卡时，还应更改操作项。当我从操作栏中的导航列表中选择某些项目时，应该更新视图。我不知道怎么做。

我将 ActionBarSherlock 用于操作栏，并且我已经使用带有片段的 TabHost 和 TabWidget 选项卡，当我单击选项卡时，片段会更改，但这并不是我想要的，我不知道下一步该做什么。你可以帮帮我吗？

这是一个屏幕：

![在此处输入图像描述](../Images/228c151032ccca6136ba34d1078b45f8.png)

当我单击 Tab 1 时，操作栏中的导航列表应该是 Tab1 List1、Tab1 List2 等，并且应该在第一次显示列表中的默认视图（例如第一个 Tab1 List1）或最后由用户视图从导航列表。当我单击选项卡 2 时，列表应该是 Tab2 List1、Tab2 List2 等，并且应该显示例如 Tab2 List2 视图。等等。所以每个选项卡都会调整操作栏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T15:37:16.153

You have two options:

1.  Use list navigation in the action bar and place a `TabWidget` at the top of your content view.
2.  Use tab navigation in the action bar and set a custom view with a `Spinner`

Be careful not to overload your users. Usually two types of navigation can be confusing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:51:54.573

对于操作项，如果您为不同的“屏幕”使用片段，那么它们可以注册以提供操作项`setHasOptionsMenu(true);`并通过覆盖来定义它们的操作`onCreateOptionsMenu(Menu menu, MenuInflater inflater)`。所以，一个好的设计规则，如果你不能简单地解释它，你可能做错了什么，应该改变设计。

这也可能是对 Android 设计的误用，与操作栏模式偏离得太远，这意味着你有一些看起来像带有导航的 ActionBar，但实际上你有一些其他的东西是你自己编造的。如果这是必需的，那么您不应该制作看起来像带有导航的操作栏的东西，因为用户会期望某些行为并得到不同的响应（混淆）。

最后，根据您的描述，似乎选项卡驱动列表导航，但列表导航具有视觉优先级（高于并基本上包含选项卡）。因此，如果选项卡通过列表导航的选择保持一致，但列表根据选项卡导航的选择而更改，则通过让选项卡具有优于列表导航的视觉优先级来更清晰地表示。所以，如果你保留两个导航，我会颠倒它们的顺序。也许尝试使用视图寻呼机而不是列表导航进行列表导航。Jake 也有一个很棒的视图寻呼机库[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T17:42:13.890

我通过`Setting the tab navigation in action bar`and实现了这一点`Setting Spinner in Menu for navigation list`。我会解释第二部分，因为第一部分是微不足道的。

定义`Spinner`在`action_bar.xml`：

```
<item
    android:id="@+id/menu_test_spinner"
    android:actionViewClass="android.widget.Spinner"
    android:showAsAction="always"/> 
```

在活动中设置和绑定数据`Spinner`：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.action_bar, menu);
    MenuItem testSpinner = menu.findItem( R.id.menu_test_spinner );
    setupTestSpinner(testSpinner);
    return true;
}

private void setupTestSpinner(MenuItem item) {
    View view = item.getActionView();
    if (view instanceof Spinner) {
        Spinner spinner = (Spinner) view;
        spinner.setAdapter(ArrayAdapter.createFromResource(this,
                R.array.test,
                android.R.layout.simple_spinner_dropdown_item));
        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
                //Do something on item selection
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });
    }
} 
```

现在，重写将响应选项卡更改的方法，并更改 Spinner 中的导航列表项。

# wcf - Local Build v TFSBuild 问题...有什么想法吗？

> ID：11034070
> 
> 赞同：2
> 
> 时间：2012-06-14T13:25:19.923
> 
> 标签：wcf, dynamic, tfsbuild

我有一个公开两个服务的 WCF 项目。当我在本地构建服务时，它工作正常。当 TFS 构建创建程序集时，其中一项服务不起作用。在调用服务之前，客户端应用程序会引发“索引超出数组边界”异常。

我们将 TFS2010 用于迁移的基于 MSBuild 的项目，而不是新的工作流程。

我可以用我机器上的发布构建版本替换 TFS 构建的 DLL，并且服务开始工作。我可以将 TFS 构建的 DLL 版本放在我的机器上，我的本地服务开始失败。

我检查过的事情：

*   所有项目都设置为构建发布 | 任何 CPU
*   两台机器都安装了VS2010 SP1
*   反汇编这两个 DLL 显示它们包含相同的代码

有点担心：我的机器是 Windows 7 x64，构建机器是 Windows Server 2003 x86。但是，我认为任何 CPU 都意味着在构建过程中这不应该是一个问题。

有没有人对调查此问题的其他方法有任何建议？

来自客户端的堆栈跟踪包括：

`System.ServiceModel.FaultException 1[System.ServiceModel.ExceptionDetail]: Index was outside the bounds of the array. (Fault Detail is equal to An ExceptionDetail, likely created by IncludeExceptionDetailInFaults=true, whose value is: System.IndexOutOfRangeException: Index was outside the bounds of the array. at Microsoft.CSharp.RuntimeBinder.ExpressionTreeCallRewriter.GetMethodInfoFromExpr(EXPRMETHODINFO methinfo) at Microsoft.CSharp.RuntimeBinder.ExpressionTreeCallRewriter.GenerateCall(EXPRCALL pExpr) at Microsoft.CSharp.RuntimeBinder.ExpressionTreeCallRewriter.VisitCALL(EXPRCALL pExpr) at Microsoft.CSharp.RuntimeBinder.Semantics.ExprVisitorBase.Dispatch(EXPR pExpr) at Microsoft.CSharp.RuntimeBinder.Semantics.ExprVisitorBase.Visit(EXPR pExpr) at Microsoft.CSharp.RuntimeBinder.ExpressionTreeCallRewriter.GenerateLambda(EXPRCALL pExpr) at Microsoft.CSharp.RuntimeBinder.ExpressionTreeCallRewriter.VisitCALL(EXPRCALL pExpr) at Microsoft.CSharp.RuntimeBinder.Semantics.ExprVisitorBase.Dispatch(EXPR pExpr) at Microsoft.CSharp.RuntimeBinder.Semantics.ExprVisitorBase.Visit(EXPR pExpr) at Microsoft.CSharp.RuntimeBinder...`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T22:49:53.570

感谢您的建议……所有好主意。

我发现我的问题更加微妙。大会正在利用动态。如果您使用它来调用具有共同基类型的类的方法，其中基类型位于不同的程序集中，则存在一个鲜为人知的动态错误。动态实现查找要调用的方法的方式使用 MetadataToken 来标识该方法，但是这并不保证在整个程序集中都是唯一的，因此动态可能会混淆并尝试调用不同的方法，可能使用不同数量的参数，因此 IndexOutOfRangeException！

这已被报告并修复，但尚不可用：

[https://connect.microsoft.com/VisualStudio/feedback/details/691494/issue-with-getmethodinfofromexpr](https://connect.microsoft.com/VisualStudio/feedback/details/691494/issue-with-getmethodinfofromexpr)

我仍然不确定为什么一个版本的 DLL 工作，而另一个没有。但是通过不使用通用基类，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:01:12.190

您可以检查的几件事：

*   您是否使用任何预编译器，例如基于机器 CPU 编译代码的 ngen？
*   您是否在使用任何 3rd 方库？
*   关于 64 位，Windows 2003 机器上的 IIS 上的应用程序池设置是什么？
*   两台机器的 .net 框架的补丁级别是否相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:07:08.710

我之前在参与过一个大型 Web 项目时遇到过这个问题，这真的很令人沮丧。有时，在 Visual Studio 中构建的行为与直接使用 MSBuild 构建的行为不同。MSBuild 有 x86 和 x64 版本，它们的工作方式不同。请参阅以下文章：http: [//blogs.msdn.com/b/msbuild/archive/2010/12/21/incorrect-solution-build-ordering-when-using-msbuild-exe.aspx](http://blogs.msdn.com/b/msbuild/archive/2010/12/21/incorrect-solution-build-ordering-when-using-msbuild-exe.aspx)

您还可以检查构建计算机上是否有 .Net Framework 和 Visual Studio 的最新版本和补丁。

这是我为您找到的另一篇文章，其中列出了一些其他 x64 MSBuild 陷阱：http: [//blogs.msdn.com/b/visualstudio/archive/2010/05/07/building-on-cross-targeting-scenarios-and- 64 位 msbuild.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/05/07/building-on-cross-targeting-scenarios-and-64-bit-msbuild.aspx)

希望有帮助:)

# java - 调试密钥库不起作用

> ID：11034077
> 
> 赞同：4
> 
> 时间：2012-06-14T13:25:39.127
> 
> 标签：java, android, keystore

我正在尝试使用我的调试密钥库，以便获得地图视图的密钥，但是当我尝试使用它时，它会出现这个

```
Illegal option:  B:\Fabian\.android\debug.keystore
keytool -list [OPTION]... 
```

我用这个：

```
keytool -v -list -keystore "C:\Users\MyPcName.android\debug.keystore" 
```

* * *

当我尝试使用时：

```
keytool -list -alias androiddebugkey \ -keystore <path_to_debug_keystore>.keystore \ -storepass android -keypass android 
```

它提出了

```
C:\Program Files\Java\jdk1.7.0_04\bin>keytool -list -alias androiddebugkey \ -k
ystore B:\Fabian\.android\.keystore \ -storepass android -keypass android
Illegal option:  \
keytool -list [OPTION]...

Lists entries in a keystore

Options:

 -rfc                            output in RFC style
 -alias <alias>                  alias name of the entry to process
 -keystore <keystore>            keystore name
 -storepass <arg>                keystore password
 -storetype <storetype>          keystore type
 -providername <providername>    provider name
 -providerclass <providerclass>  provider class name
 -providerarg <arg>              provider argument
 -providerpath <pathlist>        provider classpath
 -v                              verbose output
 -protected                      password through protected mechanism

Use "keytool -help" for all available commands 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:59:40.490

尝试`keytool path`从`gre`. 它对我有用。

```
C:\Program Files\Java\Jre7\bin>keytool -list -alias androiddebugkey -keystore
 "C:\Uers\Akki\.android\debug.keystore" -storepass android -keypass android 
```

如果您安装了 Jdk 1.7，它将生成 SHA1 密钥，该密钥不适用于该用途 -v

C:\Program Files\Java\Jre7\bin>keytool -v -list -alias androiddebugkey -keystore "C:\Uers\Akki.android\debug.keystore" -storepass android -keypass android

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:27:50.047

这实际上是您必须用来获取地图 api 密钥的内容：

`$ keytool -v -list -alias androiddebugkey \ -keystore <path_to_debug_keystore>.keystore \ -storepass android -keypass android`

在这里您可以找到很多关于此的信息。它对我有用：[获取 Google Maps Api KEY](https://developers.google.com/maps/documentation/android/mapkey)

**编辑：** 在 Windows 上使用命令提示符转到此文件夹：

`C:\Program Files\Java\jre6\bin`

并输入上面的代码。它应该为您生成一个您必须在此处粘贴的密钥：[GET API KEY](https://developers.google.com/android/maps-api-signup)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:27:19.003

> 我的调试密钥库，所以我可以获得地图视图的密钥

首先是`(C:\Users\MyPcName.android\debug.keystore)`您的应用程序密钥库吗？

并检查你的`keytool`路径。

```
keytool -v -list -alias YOURAPPaliasName -keystore "here your keystore path" 
```

*   [见这个例子](http://samir-mangroliya.blogspot.in/p/android-map-api-key.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-24T20:17:09.777

> 这对我有用。将路径
> [C:\Program Files\Java\jdk-13.0.1\bin(检查你的路径，可能不同)]
> 添加到你的环境变量。

> 然后在命令提示符下运行此代码（在代码中编辑：//enterYourPcUsername\）

```
keytool -v -list -alias androiddebugkey  -keystore c:\Users\<enterYourPcUsername>\.android\debug.keystore  -storepass android -keypass android 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-26T10:01:29.730

这对我有用，我在 jre bin 文件夹中的命令提示符：

```
c:\Program Files\Java\jre1.8.0_144\bin>keytool.exe -v -list -alias androiddebugkey  -keystore c:\Users\<UserDirectory>\.android\debug.keystore  -storepass android -keypass android 
```

# c# - 解析excel表并调用适当的函数

> ID：11034081
> 
> 赞同：0
> 
> 时间：2012-06-14T13:26:07.833
> 
> 标签：c#

我有一个excel文件。excel文件的内容如下：-

```
RetVal      Function name

retVal1     ITemplate.GetAllTemplate
retVal2     ITask.GetTaskInstanceFromTemplate
retVal3     CreateTask 
```

我需要编写 .NET 应用程序来解析 excel 表并调用 excel 表中提到的相应函数。谁能帮我？我不知道从哪里开始。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:13:11.683

好吧，我可以参考一些有用的链接来帮助你......

好的，首先，[此链接](https://stackoverflow.com/questions/657131/how-to-read-data-of-an-excel-file-using-c)将帮助您了解如何读取 excel 文件的数据。

其次，[此链接](http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met)将向您展示如何调用这些函数。

哦！此外，就像@GuthMD 在评论中告诉你的那样，你将无法在 type`ITemplate`和`ITask`. 您需要知道他们的实现名称。

我希望我已经回答了您的问题，如果缺少某些内容，我会编辑我的帖子！

# python - 根据python中的标准拆分列表字典

> ID：11034085
> 
> 赞同：0
> 
> 时间：2012-06-14T13:26:32.607
> 
> 标签：python, list, dictionary

我有从 csv 文件中读取的旅行日记的数据。我将它设置为带有一堆列表的字典。例如：

```
print diary['ID'][1] gives 123456789
print diary['TravelReferenceDay'][1] gives 1 for a Monday 
```

我想根据日期从数组中随机选择一个 ID，例如：

```
random.choice(diary['ID']) if diary['TravelReferenceDay'] == 1 
```

我可以在 csv 文件中按 TravelReferenceDay 排列数据。我曾尝试使用 groupby 方法来拆分数组：

```
groups = []
uniquekeys = []
for k, g in groupby(diary, diary['TravelReferenceDay']):
    groups.append(list(g))      # Store group iterator as a list
    uniquekeys.append(k) 
```

但这给出了错误：

```
TypeError: 'list' object is not callable 
```

你能建议一种方法来实现这一目标吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:31:57.537

to 的第二个参数`groupby`是一个可调用的，它在可迭代的第一个参数的连续项目上调用。

你想使用`operator.itemgetter('TravelReferenceDay')`：

```
for k, g in groupby(diary, operator.itemgetter('TravelReferenceDay')):
    ... 
```

这相当于`lambda x: x['TravelReferenceDay']`.

请注意，`groupby`期望 iterable 已经按 key 排序；组包含具有相同键的*相邻项目。*

好的，这不起作用，因为您已将数据存储为并行数组。为了便于处理，我建议将其转换为字典列表：

```
diary = [dict((k, diary[k][i]) for k in diary) for i in range(len(diary['ID']))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:43:42.163

我的列表理解解决方案：

```
In [1]: import random
   ...: diary = {'ID': ['11', '22', '33', '44', '55'], 'TravelReferenceDay': [1, 1, 2, 3, 1]}
   ...: monday_diary = [x for n, x in enumerate(diary['ID']) if diary['TravelReferenceDay'][n] == 1]

In [2]: monday_diary
Out[2]: ['11', '22', '55']

In [3]: random.choice(monday_diary)
Out[3]: '22' 
```

# java - 如何检查我是否已经到达 Java 中字符串的末尾？

> ID：11034086
> 
> 赞同：7
> 
> 时间：2012-06-14T13:26:33.477
> 
> 标签：java, string

我不想通过使用`for`遍历字符串所有元素的循环来以正式的方式执行“特定次数”（字符串长度）。

是否有任何字符始终位于 Java 中每个字符串的末尾，就像它在 c 中一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:32:33.693

您有两个基本选择：

```
String myString = "ABCD";
for (char c : myString.toCharArray())
{
  System.out.println("Characer is " + c);
}

for (int i = 0; i < myString.length(); i++)
{
  System.out.println("Character is " + myString.charAt(i));
} 
```

第一个循环遍历字符数组，第二个循环使用普通索引循环。

然而，Java 确实支持像 '\n' （新行）这样的字符。如果要检查此字符是否存在，可以使用 indexOf('\n') 方法，该方法将返回字符的位置，如果找不到，则返回 -1。请注意，'\n' 字符不需要能够结束一个字符串，所以你不能单独依赖它。

Java 中的字符串没有 C 中的 NULL 终止符，因此您需要使用 length() 方法来找出字符串的长度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T13:31:16.567

> ***是否有任何字符始终位于 java 中每个字符串的 tnd 中，就像它在 c 中一样？***

不，这不是 Java 字符串的工作方式。

> ***我不想通过使用遍历字符串所有元素的 for 循环来以正式的方式执行“特定次数”（字符串长度）。***

那么唯一的选择可能是附加您自己的特殊字符：

```
yourString += '\0'; 
```

（但要注意中间`yourString`也可能包含;-)`\0`

如果您正在迭代字符串中的字符，您也可以这样做

```
for (char c : yourString.toCharArray())
    process(c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:30:53.787

```
String[] splitUpByLines = multiLineString.split("\r\n"); 
```

将返回一个 s 数组`String`，每个代表多行字符串的一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:36:41.430

`System.getProperty("line.separator");` 这将告诉您与操作系统无关的换行符。您可能可以根据该字符检查字符串的`new line`字符。

# windows - 帧到视频 - Windows 8 中的图像处理（仅限 WinRT）

> ID：11034091
> 
> 赞同：1
> 
> 时间：2012-06-14T13:26:43.617
> 
> 标签：windows, image-processing, windows-8, windows-runtime, microsoft-metro

有没有办法处理来自流（或图像文件或视频文件）的帧并将帧保存在编码的视频文件中。有将帧保存到编码图像文件的选项，但没有使用**Windows.Graphics.Imaging**命名空间保存到视频文件的选项。

在**mediaCapture.StartRecordToStreamAsync**我可以使用**StartRecordToStorageFileAsync**将流从视频文件的相机保存到另一个视频文件。但是没有办法逐帧保存。感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:09:13.293

MediaCapture示例展示[了](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)如何编写媒体基础转换来对每一帧进行图像处理。我怀疑您可以修改 MFT 以将每个样本帧保存到队列中，然后异步写入队列中的图像。

# jquery - ASP.NET MVC3 将多个数据集从控制器返回到 jqGrid

> ID：11034092
> 
> 赞同：1
> 
> 时间：2012-06-14T13:26:44.090
> 
> 标签：jquery, asp.net-mvc-3, jqgrid

在我的 MVC3 应用程序中，我使用控制器 actionresult 返回两组 Json 数据以传递给我视图中的两个单独的 jqGrid。

控制器 actionresult 的返回如下所示：

```
return Json(new
        {
            A= holderA,
            B= holderB
        },JsonRequestBehavior.AllowGet); 
```

其中 A 和 B 是从 LINQ to SQL 查询获得的数据数组。

我必须在我的视图中查询 jqGrids，第一个网格应该接受我结果的“A 部分”的数据，第二个网格应该接受我的结果的“B 部分”的数据。

我需要知道如何在 jqGrid 中访问我的 actionresult 的每个单独组件（即 A 和 B），是否有一个特定的选项可以让您参考数据的来源？

如果它在这里有帮助，那就是一个网格的样子......

```
jQuery("#GridA").jqGrid({
        url: "/MyController/MyActionresult",
        datatype: 'json',
        postData: {
            Name: function () {
                return $("#Name").val();
            },
            Year: function () {
                return $("#SelectedYear").val()
            }
        },

        mtype: 'POST',
        colNames: ['Name', 'Age', 'Total']
        colModel: [

                { name: 'Name', index: 'Name', align: 'left' },
                { name: 'Age', index: 'Age', align: 'left' },
                { name: 'Total', index: 'Total', width: 150, align: 'left', search: false }],
        pager: jQuery('#GridAPager'),
        rowNum: 250,
        height: 250,
        rowList: [250, 500, 1000, 2000],
        sortname: 'Name',
        sortorder: "asc",
        viewrecords: true,
        hiddengrid: false,
        caption: 'List of People',
        gridComplete: function () {
            onGridComplete("#GridA");}
    });
    $("#GridA").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: true });
}); 
```

第二个网格几乎相同，显示的字段略有不同。

我宁愿从一个 actionresult 传回两个数据集的原因是，一旦单击表单提交按钮，就会填充两个网格。

任何帮助都会很棒，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:42:48.090

`holderA`了解和中数据的确切格式很重要`holderB`。您应该定义与数据结构相对应的[jsonReader 。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)

您应该了解，如果您使用该选项`mtype: 'POST'`，则返回的数据无法被缓存，并且为了填充“#GridA”和“#GridB”，将完成*不同的请求。*因此，将两个响应组合在一个操作中将没有任何优势。

此外，例如，如果用户单击“#GridA”的“名称”列的列标题，则会向 URL 发送另一个请求`"/MyController/MyActionresult"`。在请求中，参数的值`sord`将是“desc”而不是初始请求中的“asc”。如果用户将页面大小从 250 更改为 500，或者如果用户更改了需要显示的页面，也会向服务器发送新请求。

我试图解释对页面上的所有网格进行单独操作是有意义的。如果不是所有数据都将显示并且您实现了服务器端排序和分页，那么合二为一就没有多大意义。

# ruby-on-rails - Rails 3 拆分响应

> ID：11034093
> 
> 赞同：0
> 
> 时间：2012-06-14T13:26:46.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, http, multipart, multipartentity

在这个部分：

[http://en.wikipedia.org/wiki/Comet_%28programming%29#XMLHttpRequest](http://en.wikipedia.org/wiki/Comet_%28programming%29#XMLHttpRequest)

它提到了从服务器到浏览器的多部分回复的想法。这本身就是一个非常有趣的概念（与 Comet 不同）。

我的页面很长，有数千个数据库点击。每个命中在表格中的每一行呈现一个。对于整个完整的往返行程，大约需要 30 秒。这段时间相当多的时间只是将项目渲染为 json。

我试图制定的一个想法是用充满项目的第一页进行响应，然后在后续更新中填写其余项目。如果我回到服务器进行更新，我会在服务器上增加额外的负载（或者我必须想办法缓存可能使用 Dali 的结果）

我遇到了各种“网格”解决方案，例如 jqGrid。我可能会对此进行更多探索。

但是，如果服务器可以使用多部分回复进行响应，然后浏览器将读取与一系列回复相同的内容，那么这将节省大量工作并且在许多情况下也非常方便。

在网上冲浪，我没有看到很多关于这个想法的点击。我想知道它是否已经死了，或者它是否仍然可用——也许只是没有被太多使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:23:53.240

我不知道 Rails 是否可以处理这个问题，但我会使用事件机器或 node.js 来完成这项任务。

# image - OutOfMemoryException 使用 Compact Framework 将大图像加载到 Bitmap 对象

> ID：11034101
> 
> 赞同：4
> 
> 时间：2012-06-14T13:27:04.573
> 
> 标签：image, memory-leaks, bitmap, compact-framework, opennetcf

我有一个内存泄漏问题。

我有这个代码`button_click`：

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click

    Dim ms As New IO.MemoryStream
    Dim bm As New Bitmap("\Application Data\imgs\IMG22.jpg")
    bm.Save(ms, Drawing.Imaging.ImageFormat.Jpeg)
End Sub 
```

当我在笔记本电脑上运行 .exe（我的意思是在具有完整 .net 框架的 windows7/32bits 下）时，此代码工作得很好，但是当我在具有 WindowsMo​​bile 6.1 的设备上运行应用程序时，应用程序会抛出此异常：

```
SmartDeviceProject22.exe
OutOfMemoryException 
```

在

```
Microsoft.AGL.Common.MISC.HandleAr(PAL_ERROR ar)
at
System.Drawing.Image.Save(Stream stream, ImageFormat format)
at
SmartDeviceProject22.Form1.Button3_Click(Object sender, EventArgs e)
at
.... 
```

图像大小约为 200kb，宽度和高度约为 1500px。图片详情：

*   尺寸：1536x2048
*   水平分辨率：72dpi
*   水平分辨率：72dpi
*   位深：24
*   分辨率单位：2
*   颜色表示：sRGB -

任何帮助将不胜感激。

我尝试了@asawyer 的代码，甚至删除了所有代码、参考等，但问题仍然存在，我猜这与图像的宽度/高度或紧凑框架有关。

还有什么建议吗？

**问题的解决方案和解释** 好吧，在测试了真正的问题之后，它不是内存泄漏，正如@pdriegen 所说的内存可用问题。

我将代码更改为此（并在移动设备上进行了测试）：

```
 Dim fs As IO.FileStream = IO.File.OpenRead("\Application Data\ryder\IMG23.jpg")
 Dim arrb(fs.Length) As Byte     
 fs.Read(arrb, 0, arrb.Length)
 fs.Close()
 fs.Dispose() 
```

通过上面的代码（显然），我得到了一个图像的字节（）（数组），使用 dataSet 存储在数据库中。

总之：将位图对象加载到 memoryStream，这是个坏主意。非常感谢所有花时间阅读我的问题的人，特别是那些发布答案的人。

# **解决方案（如果需要在图片框中显示图片）：**

几周后，这可能是最好的（免费）解决方案：实现 ImageHelper，如下所述：[ImageHelper](http://blog.opennetcf.com/ctacke/2010/10/13/LoadingPartsOfLargeImagesInTheCompactFramework.aspx)

**ImageHelper 的更新链接** [https://opennetcf.com/2010/10/13/loading-parts-of-large-images-in-the-compact-framework/](https://opennetcf.com/2010/10/13/loading-parts-of-large-images-in-the-compact-framework/)

此类/示例使用来自 OpenNetCF ( [http://www.opennetcf.com/](http://www.opennetcf.com/) )的绘图命名空间

它工作得很好，它解决了我将大位图加载到内存的内存问题，实际上我们加载了一个缩略图，因此内存大小大大减少并避免了 OutOfMemory 异常问题。

**关于 Chris Tacke** 我刚刚意识到关于 ImageHelper 和 OpenNetCF 的联合创始人的帖子的作者在 stackoverflow 上，这是他的个人资料：[https ://stackoverflow.com/users/13154/ctacke](https://stackoverflow.com/users/13154/ctacke)

**更新链接** [https://opennetcf.com/2010/10/13/loading-parts-of-large-images-in-the-compact-framework/](https://opennetcf.com/2010/10/13/loading-parts-of-large-images-in-the-compact-framework/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T15:44:33.137

我不相信问题是内存泄漏。相反，问题是可用内存不足。

即使压缩后的图像大小为 200kb，当您将其作为位图加载时，它也会被解压缩并以原生位图格式存储在内存中。给定高度和宽度各 1500 像素，并假设位图格式为 32bpp（未指定时的默认值），您将看到 9MB 的分配内存

1500 * 1500 * 4 = 9MB。

鉴于移动设备操作系统中存在的内存限制（32MB/进程 - 由系统 dll 分配的空间），您很可能处于内存紧缩情况。我当然不知道运行此代码的应用程序分配了哪些其他内存。

在具有较小图像的同一设备上尝试相同的代码。你应该看到它执行得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:32:04.927

您泄漏的 Gdi 句柄，将流和位图包装在[Using](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)子句中。

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click

    using ms As New IO.MemoryStream
        using bm As New Bitmap("\Application Data\imgs\IMG22.jpg")
            bm.Save(ms, Drawing.Imaging.ImageFormat.Jpeg)
        end using
    end using

End Sub 
```

# php - $_POST 到 PHP 页面

> ID：11034111
> 
> 赞同：2
> 
> 时间：2012-06-14T13:27:34.527
> 
> 标签：php, variables

我想知道是否有人可以帮助我。

首先很抱歉，因为我是新手，所以对某些人来说，这似乎是一个非常基本的错误。

我正在使用下面的表单来允许用户在所有基于“位置”记录的不同页面之间导航。

```
<form name="locations" id="locations" method="post" action="locationsaction.php">

    <?php

        <table width="538" border="0">
        <tr>
        <th width="119"><div align="left">Location Name</div></th>
        <th width="159"><div align="left">Address</div></th>
        <th width="94"><div align="center">No. Of Finds</div></th>
        <th width="69"></th>
        <th width="66"></th>
        <th width="5"></th>

        </tr>
        <tr>
        <td><div align="left"><?php echo $lid;?></div></td>
        <td><div align="left"><?php echo $lname;?></div></td>
        <td><div align="left"><?php echo $laddress;?></div></td>
        <td><div align="center"><?php echo $findscount?></div></td>
        <td><div align="center"><input name="type" type="submit" value="View Details"/></div></td>
        <td><div align="center"><input name="type" type="submit" value="Add Finds"/></div></td>
        <td><div align="center"><input name="type" type="submit" value=" Add Images"/></div></td>
        </tr>
        <tr><th colspan="8"><br/><hr width="100%"></th></tr>
        </table>
        <?php
</form> 
```

在表格的最后，您会注意到有三个“提交”按钮将用户带到不同的页面。以下 PHP 脚本用于确定选择了哪个按钮，并在上述`Form POST`操作中显示为`locationsaction.php`

```
<?php
if (isset($_POST['type'])) {
    $urls = array(
        'View Details' => 'updatelocation.php',
        'Add Finds' => 'addfinds.php',
        'Add Images' => 'image.php'
    );
    $url = $urls[$_POST['type']];
    header("Location: " . $url);
}
?> 
```

尽管按钮工作正常，因为它们将用户带到正确的页面，但我无法将`$lid`变量传递给三个接收页面中的任何一个，并且收到以下错误： `Notice: Undefined index: lid in /homepages/2/d333603417/htdocs/updatelocation.php`

这就是我试图`$lid`在所有接收页面中获取变量的方式：

```
$lid = $_POST['lid']; 
```

我浏览了这个网站上的几个教程和帖子，但我找不到我哪里出错了。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了？

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:29:52.183

您没有`lid`通过 POST 将值传递给任何脚本。如果您想通过它，请在您的表单中输入以下内容：

```
<input type = "hidden" value = "<?= $lid ?>" name = "lid" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:30:00.670

**您要发布的**所有**`input`内容都必须在（或`select`或`textarea`）中并具有名称。**

 **在你的形式中**并非如此。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:30:16.863

您需要使用包含该`$lid`变量的表单元素。像这样的东西：

```
<input type="hidden" name="lid" value="<?php echo $lid; ?>" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:33:22.603

您的 $lid 变量被发送到 locationsaction.php 但不发送到 updatelocation.php，

要解决这个问题，您可以定义 $_SESSION['lid'] = $lid; 在locationsaction.php

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T13:33:32.590

好的，这里是您的架构示意图：

> form > locationsaction.php > updatelocation.php （或另一个，取决于按钮）

您可以访问 POST 到 locationsaction.php，因为您实际上使用表单的提交按钮发布了数据。但是现在如果您需要数据`updatelocation.php`，除非您再次 POST 数据，否则您将无法使用`$_POST`它来检索它。

相反，我建议您使用`$_SESSION`数组来存储值并通过不同的 php 页面使用它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T13:34:29.513

首先，将 $lid 变量放入输入中：

```
<input type="hidden" name="lid" value="<?=$lid?>" /> 
```

否则不会在表格中发布。

此外，当您重定向时，POST 变量不会随您一起重定向。您可以将它们附加到 url (http://url.tld?lid=value)，然后像这样获取它们：

```
$lid = $_GET['lid']; 
```

但是，更好的方法可能是将它们保存在会话中：

```
$_SESSION['lid'] = $_POST['lid'];
// Redirect here 
```

然后在下一页上，您可以访问它们：

```
$lid = $_SESSION['lid']; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T14:15:04.283

输入元素是强制性的（隐藏等），用于通过表单传递值。如果 locationaction.php 不是那么重要，我建议您直接将操作更改为第一页。

```
<td><div align="center"><input name="type" type="submit" onclick="window.locations.action='updatelocation.php'" value="View Details"/></div></td>
        <td><div align="center"><input name="type" onclick="window.locations.action='addfind.php'" type="submit" value="Add Finds"/></div></td>
        <td><div align="center"><input name="type" type="submit" onclick="window.locations.action='image.php'" value=" Add Images"/></div></td>
        </tr> 
```

但是，当您使用中间页面检索和发送帖子值时，您可以使用此代码

```
<form name="iaminthemiddle" action="finaldest.php" method="post">
<?php
foreach($_POST as $k => $v)
 echo "<input type=\"hidden\" name=\"$k\" value=\"$v\">";
?>
</form>
<script>window.iaminthemiddle.submit();</script> 
```

对于 $_POST 元素，您还可以使用 $_GET 或两者都使用 $_REQUEST 检索查询字符串值**

# gwt - GWT 可序列化对象

> ID：11034123
> 
> 赞同：0
> 
> 时间：2012-06-14T13:28:08.830
> 
> 标签：gwt, serialization

详细信息：我认为我从 rpc 返回了无效的对象列表。**我认为它的类型不能被序列化..有人知道序列化它的方法吗？或一些解决方法？**

我有一个无法序列化的类我收到以下异常： **原因：** `"com.google.gwt.user.client.rpc.SerializationException: Type 'gwt.client.objects.NamedObject' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = gwt.client.objects.NamedObject@613bc2a6"`

这是“NamedObject”类源代码，我将返回一个列表。

```
public class NamedObject<T> implements Serializable {
    private String name;
    private T object;

    public void setNamedObject(String name, T object){
    setName(name);
    setObject(object);
    }
    public String getName() {
        return name;
    }

    public Object getObject() {
        return object;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:43:03.160

您的对象参数是 T 类型，它可以是任何东西，特别是 GWT 不知道如何序列化的东西。

你可以试试这个

```
public class NamedObject<T extends IsSerializable> implements Serializable {
...
} 
```

虽然我不确定这会奏效。如果没有，您可能必须为 T 可以是的每种类型创建多个类：

```
public class StringNamedObject implements Serializable {
    private String name;
    private String object;
}

public class DateNamedObject implements Serializable {
    private String name;
    private Date object;
}

.... 
```

# wcf - 在 WCF 代理生成的客户端中，什么决定了使用的序列化程序？

> ID：11034127
> 
> 赞同：1
> 
> 时间：2012-06-14T13:28:16.287
> 
> 标签：wcf, serialization, wsdl, datacontract, svcutil.exe

当我使用 DataContact/DataMember 属性公开 WCF 服务时，我在其他项目中对该服务所做的每个服务引用都会生成具有 DataContract/DataMember 属性的类（以及 IExtensibleDataObject 接口实现等）。

在另一个项目中，我必须使用一个 SOAP 服务，其 WSDL 不是由 WCF 生成的，而是由其他一些我不知道且无法更改行为的工具生成的。

我的问题是我的 svcutil 代理生成的代码不太灵活：

*   这些类使用 Serializable 属性而不是 DataContract（GeneratedCode 属性指定使用 System.Xml 而不是 System.Runtime.Serialization）
*   IExtensibleDataObject 未实现
*   不使用 OptionalField 属性
*   XmlElement 的顺序是固定的，当新的 xs:element 插入到 wsdl xs:sequence 的中间时，会导致反序列化失败...

我使用的 svcutil 工具/wsdl 中发生了什么，它必须以这种方式生成代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:41:57.683

> 我使用的 svcutil 工具/wsdl 中发生了什么，它必须以这种方式生成代码？

Svcutil.exe 工具可用于为 WCF 和 ASMX 服务创建客户端代理。当使用 Svcutil.exe 从 ASMX 服务创建代理时，代码中生成的数据类型通常使用 XML 序列化。

[http://msdn.microsoft.com/en-us/library/cc304837.aspx](http://msdn.microsoft.com/en-us/library/cc304837.aspx)

**更新：**

我最好的猜测是 WSDL 中指定的模式决定了 svcutil.exe 必须使用哪个序列化。

数据契约序列化模式的命名空间是[http://schemas.microsoft.com/2003/10/Serialization](http://schemas.microsoft.com/2003/10/Serialization)，您可以[在此处](http://msdn.microsoft.com/en-us/library/ms733112.aspx#sectionSection8)获得更多详细信息。

因此，如果 svcutil 看到 wsdl 中指定的此模式，那么它会使用数据合同序列化程序，否则使用 xml 序列化程序。

我还检查了 WCF 和 ASMX 的 WSDL。WCF 服务的 WSDL 包含以下 XSD 部分，它们在 ASMX 的部分中缺失。

```
<xsd:schema targetNamespace="http://tempuri.org/Imports">

   <xsd:import schemaLocation="http://localhost:53328/Service1.svc?xsd=xsd0"
     namespace="http://tempuri.org/"/>

   <xsd:import schemaLocation="http://localhost:53328/Service1.svc?xsd=xsd1" 
     namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>

   <xsd:import schemaLocation="http://localhost:53328/Service1.svc?xsd=xsd2" 
      namespace="http://schemas.datacontract.org/2004/07/WcfService1"/>
</xsd:schema> 
```

# java - 正则表达式：找到“bar”而不是“foo bar”

> ID：11034132
> 
> 赞同：1
> 
> 时间：2012-06-14T13:28:25.103
> 
> 标签：java, regex

我们想要搜索一个文件以查找所有前面没有“foo”的“bar”实例（忽略前面的空格和后面的任何内容。）

所以如果我们有

```
foo
foo bar
baz
    bar a bunch of monkeys 
```

我们只会返回第 1 行和第 4 行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T13:29:47.723

使用[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)。模式如下所示：

```
(?<!foo )bar 
```

由您决定“搜索文件”的含义。逐行阅读？

# ios - 使用没有代码设计的 xcodebuild 构建 iOS 应用程序

> ID：11034133
> 
> 赞同：69
> 
> 时间：2012-06-14T13:28:25.477
> 
> 标签：ios, xcode, build, codesign

我们正在为另一家公司构建应用程序。他们持有签名密钥，不愿与我们分享。

应该可以将构建和签名分开，但是如何在 xcodebuild 的命令行上指定它呢？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-07-25T10:14:44.903

为了跳过代码签名，您可以从控制台执行手动构建，如下所示：

```
xcodebuild clean build CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO 
```

此外，使用`-configuration`和`-target`参数`-sdk`来定义您的构建设置。

请参阅[此 Stack Overflow 答案](https://stackoverflow.com/a/10171462/933106)以获得有关如何在 Xcode 中禁用代码签名的详细说明。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-10-06T16:55:44.647

为了完全防止使用 Xcode 7 进行代码签名，我使用了以下所有选项：

```
CODE_SIGN_IDENTITY=""
CODE_SIGNING_REQUIRED="NO"
CODE_SIGN_ENTITLEMENTS=""
CODE_SIGNING_ALLOWED="NO" 
```

最后的选择，`CODE_SIGNING_ALLOWED="NO"`似乎成功了。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-14T13:52:10.363

不幸的是，如果没有代码签名，很难在发布模式下构建您的应用程序。您将从构建系统中得到错误，例如：

```
CodeSign error: code signing is required for product type 'Application' in SDK
                'iOS 5.1' 
```

在这种情况下，您应该将目标配置为在发布模式下使用您的开发人员/团队通配符 (*) 签名身份。该应用程序将在您构建它时使用它进行签名，您可以将其发送给您的客户，以便他们可以辞职。这是我们大多数外包开发人员所做的。

然后，您可以通过删除应用程序中的各种文件（例如`_CodeSignature`，使用该`codesign`工具从应用程序二进制文件中删除信息）来删除代码签名信息。但我不确定这有多容易。不过，这并不是必需的。配置文件或签名信息中没有任何敏感信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-31T18:13:01.983

在项目导航器中，选择您的项目并打开项目的“构建设置”部分（而不是任何特定目标）。

在“代码签名”下，找到“代码签名身份”，对于调试和发布模式，将“任何 iOS SDK”设置为“不进行代码签名”。

# python - 有没有办法从 django 管理界面请求中读取数据以进行预保存验证？

> ID：11034136
> 
> 赞同：0
> 
> 时间：2012-06-14T13:28:38.220
> 
> 标签：python, django, validation, django-models, django-admin

我知道下面的函数可以用来做一些预保存处理。但是，如何访问请求数据，例如请求中的文本字段值以进行验证？

```
 def save_model(self, request, obj, form, change):
        # do something for validation 
        obj.save() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:50:19.397

原始请求数据通常存储在`request.POST`中。访问 可能更好`form.cleaned_data`，因为 Django 已经验证了它。

但是，该`save_model`方法可能不是进行验证的正确位置。如果您提出 a `ValidationError`，则不会捕获异常，并且用户将获得 500 服务器错误页面。当您知道数据已经有效时，该`save_model`方法更合适，例如在保存之前设置对象的作者`request.user`。

如果你想进行自定义验证，更好的方法是定义一个模型表单，并在你的模型管理中使用它的[`ModelAdmin.form`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.form)设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:31:20.237

[自定义表单验证](https://docs.djangoproject.com/en/dev/ref/forms/validation/#using-validation-in-practice)

这也帮助了我很多！

# jquery - 按特定顺序突出显示特定文本

> ID：11034139
> 
> 赞同：0
> 
> 时间：2012-06-14T13:28:44.073
> 
> 标签：jquery

我有这个，但需要它在不悬停的情况下按顺序突出显示，所以更像是动画。有任何想法吗？

[http://jsfiddle.net/3QG3w/](http://jsfiddle.net/3QG3w/)

更详细地说：当页面加载时，我希望“客户端 1”突出显示“Benefit 1”和“Benefit 3”。然后我希望它取消突出显示和“客户 2”和“利益 2、3 和 4 突出显示”等等。所以它在每个客户之间循环突出每个客户的利益。各种各样的动画。

抱歉，我对编码还很陌生，但已尽力而为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:37:28.570

假设您想以定时间隔模拟突出显示，您可以使用带有变量的 jquery 来选择类。例如：http: [//jsfiddle.net/3QG3w/2/](http://jsfiddle.net/3QG3w/2/)

（使用的代码：）

```
var i = 0;

function nextben(){
    if(i>0) $(".ben" + i).removeClass('highlight');
    if(++i>5)i=1;
    $(".ben" + i).addClass('highlight');
}

setInterval(nextben,1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:44:35.487

可能不是最好的方法。但是您可以制作动画，如这里的小提琴所示：http: [//jsfiddle.net/3QG3w/3/](http://jsfiddle.net/3QG3w/3/)（对您原来的小提琴的更新）

# android - 检索到的数据不是按升序排列的？

> ID：11034140
> 
> 赞同：1
> 
> 时间：2012-06-14T13:28:46.113
> 
> 标签：android

我使用的是 Android 2.1 平台，当我尝试检索联系人的电子邮件时，我的模拟器中有 7 个联系人，它将正常工作，但不是按照我保存在联系人列表中的顺序。如果我使用新电子邮件创建了一个新联系人，它会到最后。我正在使用这段代码。

**代码**

```
public class RetrieveData extends Activity {

ListView lvItem;
private Button btnAdd;
String displayName="", emailAddress="", phoneNumber="";
ArrayList<String> contactlist=new ArrayList<String>();
ArrayAdapter<String> itemAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   lvItem = (ListView)this.findViewById(R.id.listview);  
   btnAdd = (Button)this.findViewById(R.id.btn);
   itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
   lvItem.setAdapter(itemAdapter);
   btnAdd.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
           GetEmails();

       }
   }); 
}

private void GetEmails()
    {

    ContentResolver cr =getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (cursor.moveToNext()) 
    {       
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
        Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
        while (emails.moveToNext()) 
        {               
            emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
            contactlist.add(emailAddress);
            itemAdapter.notifyDataSetChanged();
        }
        emails.close();

    }
    cursor.close(); 
}
} 
```

**xml文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="288dp"
    android:layout_weight="0.03" >

</ListView>

<Button
    android:id="@+id/btn"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:text="Retrieve"
    android:layout_weight="0.01"  />

</LinearLayout> 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:33:58.730

在查询中使用**orderBy**

```
Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null); 
```

像

```
Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, columnName + " ASC"); 
```

同样用于`descending`使用**DESC**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:34:21.107

看起来你有两个嵌套的查询，所以实现在查询中提供 order by 的最佳解决方案看起来并不容易。所以`if that is not possible then you can try`

可以使用 Collections.sort 对字符串的数组列表进行排序`ArrayList<String>`

```
 Collections.sort(arrayList) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:58:11.950

检查下面的测试代码，

```
package stack.examples;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class RetrieveData extends Activity {

    ListView lvItem;
    private Button btnAdd;
    String displayName="", emailAddress="", phoneNumber="";
    ArrayList<String> contactlist=new ArrayList<String>();
    ArrayAdapter<String> itemAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       lvItem = (ListView)this.findViewById(R.id.listView);  
       btnAdd = (Button)this.findViewById(R.id.btn);
       itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
       lvItem.setAdapter(itemAdapter);
       btnAdd.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
               GetEmails();

           }
       }); 
    }

    private void GetEmails()
        {

        ContentResolver cr =getContentResolver();
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        while (cursor.moveToNext()) 
        {       
            String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
            Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
            while (emails.moveToNext()) 
            {               
                emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
                contactlist.add(emailAddress);

            }
            emails.close();
            sortList(contactlist);
            itemAdapter.notifyDataSetChanged();

        }
        cursor.close(); 
    }  
    private static void sortList(List<String> aItems){
        Collections.sort(aItems, String.CASE_INSENSITIVE_ORDER);
      }
} 
```

# perl - 按文件中第一行的值对文件名数组进行排序

> ID：11034143
> 
> 赞同：0
> 
> 时间：2012-06-14T13:29:01.610
> 
> 标签：perl, bash, sorting

我有带有 n 个文件的数组 INPUTFILES

```
INPUTFILES=( file_0 ... files_n-1 ) 
```

我需要按文件中的第一行按数组顺序对它们进行排序。

文件如下所示：

```
2012.09.20 17:10
2012.11.21 00:10
2012.12.22 15:10
2012.12.23 15:10 
```

我已经有比较两个文件的功能：

```
IsSooner () {
ONEFIRST=$( head -1 "${1}" ) 
ONELAST=$( tail -1 "${1}" )
TWOFIRST=$( head -1 "${2}" ) 
TWOLAST=$( tail -1 "${2}" )

TIMEFORMAT='Y.%m.%d %H:%M:'

perl <<EOF
use strict;
use warnings;

use Time::Piece;

open STDERR, "> /dev/null";

my @dates1 = ("${ONEFIRST}","${ONELAST}");
my @range1 = map Time::Piece->strptime("\$_", "${TIMEFORMAT}"), @dates1;

my @dates2 = ("${TWOFIRST}","${TWOLAST}");
my @range2 = map Time::Piece->strptime("\$_", "${TIMEFORMAT}"), @dates2;

if ( \$range1[0] < \$range2[0] ) {
  exit 0;
}

exit 1;
EOF

[ $? -eq 0 ] && {
  return 0
}

return 1  
} 
```

较早的将是文件中的第一个日期，数组中较小的索引将具有。

如果需要，可以使用 BASH 中的解决方案。

**更新** 我事先不知道日期的格式。我只知道它将采用 strftime(3c) 格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:42:49.043

1.  在简单循环中读取每个文件的第一行并将此信息保存到散列中，第一行数据为散列键，文件名为散列值。

    ```
    my @inpufiles = ...;
    my %hash;
    foreach (@inputfiles) {
      open(my $fh, $_) or die $!;
      $hash{<$fh>} = $_;
      close $fh;
    } 
    ```

2.  按键对哈希进行排序并打印排序哈希的所有值。

    ```
    foreach (sort (keys(%hash))) {
      print "$hash{$_}\n";
    } 
    ```

    如果您不想打印它，只需将其存储回数组，然后执行

    ```
    @inputfiles = map {$hash{$_}} sort (keys(%hash)); 
    ```

祝你好运！

* * *

**[更新]**

要遵循您问题中的更新，我建议您使用以下方法存储要散列的值：

```
$hash{Time::Piece->strptime(<$fh>, $timeformat)->epoch} = $_; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:09:27.660

您可以使用[Schwartzian 变换](https://en.wikipedia.org/wiki/Schwartzian_transform "施瓦茨变换")对文件列表进行排序：

```
my @inputfiles =
  map  { $_->[0] }
  sort { $a->[1] cmp $b->[1] }
  map  { [ $_, do { open my($f), $_; chomp(my $time = <$f>); $time } ] }
    qw/file_0 file_1 file_2/; 
```

这实际上可以写成一个小的 bash 管道，所以你甚至不需要 perl：

```
INPUTFILES=($(grep -m1 '' file_0 file_1 file_2 | sort -t: -k2 | cut -d: -f1)) 
```

# css - :hover 和 :active 可以一起定义吗？

> ID：11034145
> 
> 赞同：1
> 
> 时间：2012-06-14T13:29:16.003
> 
> 标签：css, hyperlink

我知道 for`:hover`的定义必须`:active`在我的样式表中的定义之前。但是，是否可以同时定义两种样式（示例如下）？

```
p a:hover, p a:active 
{
   text-decoration: underline;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T13:31:41.917

是的，确实如此，甚至可以节省空间！

顺便提一句：

*   `a:hover`必须紧随`a:link`其后`a:visited`
*   `a:active`必须紧随其后`a:hover`

# java - 由于运行时异常，MessageBrokerServlet 初始化失败

> ID：11034146
> 
> 赞同：0
> 
> 时间：2012-06-14T13:29:22.307
> 
> 标签：java, apache-flex, jboss, blazeds

我的应用程序在 Windows 和 Mac 上运行良好，但是当我将**完全相同的 JBoss 文件夹复制**到 Debian（或 CentOS）时，我不知道发生了什么。

通过一些研究，我发现出了点问题，因为如果我尝试访问**/MyApp/messagebroker/amf**我得到 404 错误，而不是空白页。

我有 MyApp.ear，里面有 blazeds.war，但显然，Linux 没有执行部署 BlazeDS。

日志：

```
11:31:59,080 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/MyApp]] (MSC service thread 1-4) MessageBrokerServlet: **** MessageBrokerServlet failed to initialize due to runtime exception: java.lang.ClassCastException: org.apache.xml.dtm.ref.DTMManagerDefault cannot be cast to org.apache.xml.dtm.DTMManager
    at org.apache.xml.dtm.DTMManager.newInstance(DTMManager.java:137)
    at org.apache.xpath.XPathContext.<init>(XPathContext.java:102)
    at org.apache.xpath.jaxp.XPathImpl.eval(XPathImpl.java:207)
    at org.apache.xpath.jaxp.XPathImpl.evaluate(XPathImpl.java:281)
    at flex.messaging.config.XPathServerConfigurationParser.selectSingleNode(XPathServerConfigurationParser.java:52)
    at flex.messaging.config.ServerConfigurationParser.parseTopLevelConfig(ServerConfigurationParser.java:45)
    at flex.messaging.config.AbstractConfigurationParser.parse(AbstractConfigurationParser.java:69)
    at flex.messaging.config.FlexConfigurationManager.getMessagingConfiguration(FlexConfigurationManager.java:77)
    at flex.messaging.MessageBrokerServlet.init(MessageBrokerServlet.java:101)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873)
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)

11:31:59,116 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/MyApp]] (MSC service thread 1-4) Marking servlet MessageBrokerServlet as unavailable
11:31:59,117 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/MyApp]] (MSC service thread 1-4) Servlet /MyApp threw load() exception: javax.servlet.UnavailableException: org.apache.xml.dtm.ref.DTMManagerDefault cannot be cast to org.apache.xml.dtm.DTMManager
    at flex.messaging.MessageBrokerServlet.init(MessageBrokerServlet.java:154) [flex-messaging.jar:2.5.1.173666]
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:29:11.317

JDK 版本怎么样？和 windows/Mac 环境一样吗？此链接可能会有所帮助：[http ://www.liferay.com/community/forums/-/message_boards/message/4619030](http://www.liferay.com/community/forums/-/message_boards/message/4619030)

# c# - 如何使用 MSTest 在 C# 中强制测试失败

> ID：11034149
> 
> 赞同：2
> 
> 时间：2012-06-14T13:29:31.313
> 
> 标签：c#, webdriver, mstest

我正在尝试将我的一些 WebDriver 测试从 JAVA 移植到 C#。我坚持的是驱动程序在页面上找不到某些元素的情况，在 JAVA 中我这样做：

```
if (second >= 10) fail("timeout - " + list); 
```

因此，如果某件事花费了超过 10 秒的时间，则测试将失败并显示超时消息。我在 C# 中尝试了类似的方法

```
if (sec >= 10) Debug.Fail("timeout : " + vList); 
```

但这实际上并没有通过测试，而是给了我一个使用异常消息框的选项。那是不行的，我需要我的自动测试自己完全失败。然后我尝试了

```
if (sec >= 10) Assert.Fail("timeout : " + vList); 
```

但这会引发未处理的异常错误。我应该将 Assert.Fail 包含在 try/catch 块中吗？或者我应该使用完全不同的东西来使测试失败？

如主题中所述，我正在使用 MSTest。

**编辑**：确切的信息是：

> 用户代码未处理 AssertFailedException。断言失败失败。超时：一些字段。

在

> Assert.Fail("超时时间：" + vList);

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T07:59:34.957

我认为您看到这种行为是因为您已将调试器附加到正在运行的测试 - `Assert.Fail`throws `AssertFailedException`，您的调试器会看到异常并中断 - 而您没有得到测试结果。

在“调试”菜单上，进入“异常”，找到`AssertFailedException`（如果不存在则为其创建一个条目）并确保该异常类型的“抛出中断”已关闭。

Alternatively, run your tests without the debugger attached.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:32:58.657

Assert.Fail 应该是您想要“强制”失败的内容。在内部，它会抛出一个`AssertFailedException`. 如果这不起作用，可能会发生其他事情......

一个快速的 dotPeek 显示这被称为：

```
internal static void HandleFail(string assertionName, string message, params object[] parameters)
{
  string str = string.Empty;
  if (!string.IsNullOrEmpty(message))
    str = parameters != null ? string.Format((IFormatProvider) CultureInfo.CurrentCulture, Assert.ReplaceNulls((object) message), parameters) : Assert.ReplaceNulls((object) message);
  if (Assert.AssertionFailure != null)
    Assert.AssertionFailure((object) null, EventArgs.Empty);
  throw new AssertFailedException(FrameworkMessages.AssertionFailed((object) assertionName, (object) str));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:38:05.770

您必须为 mstest 使用适当的语法

```
[TestMethod]
public void IsSecondsGreaterOrEqualThanTen()
{
    Assert.IsTrue(second >= 10);
} 
```

# java - 在java中生成函数值

> ID：11034154
> 
> 赞同：0
> 
> 时间：2012-06-14T13:29:44.433
> 
> 标签：java, function

我正在尝试生成 N 个随机 x 值以传递给图表组件。唯一需要担心的是它们需要排序。我想知道是否有比生成 N 个点、对它们进行排序、然后为每个点生成值更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:31:56.427

只需随机生成点并使用 Arrays.sort() 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:38:29.390

您可以使用生成的随机值作为先前值的增量，如下所示

```
x[i] = x[i-1] + random.nextInt(); 
```

（或负增量，取决于排序方向）

当然，为了限制 delta，可以使用模运算符。

# variables - 在 gpresult 中查找 gpo (for/find/findstr)

> ID：11034155
> 
> 赞同：1
> 
> 时间：2012-06-14T13:29:46.193
> 
> 标签：variables, for-loop, find, set, findstr

如果我使用“gpresult /r /scope user”，我不需要针对不同 gpo 的特定规则，我可以查看哪些 GPO（安全组）处于活动状态。现在如何将其中一些活动 GPO 过滤到我的批处理文件中？这是我的 gpresult 结果的一部分：

```
De gebruiker is lid van de volgende beveiligingsgroepen
      Domain Users
      Iedereen
      SophosAdministrator
      SophosUser
      BUILTIN\Administrators
      Gebruikers
      INTERACTIEF
      AANMELDEN OP DE CONSOLE
      Geverifieerde gebruikers
      Deze organisatie
      LOKAAL
      Iedereen
      GS_08_cv's
      Tekenkamer
      GS_03_verslagen_openbaar
      GS_07_overeenkomsten
      GS_01_facturen
      GS_04_Functieprofielen
      GS_00_documenten
      AEC
      GS_02_functioneringsgesprekken
      GS_06_offertes
      GS_05_Arbeidsovereenkomsten
      GS_09_ aanbevelingsbrieven
      GS_03_verslagen_beperkt
      Systeembeheer
      Hoog verplicht niveau 
```

我知道我可以使用 findstr 搜索特定名称（字符串？），**即**

```
gpresult /r /scope user | findstr /L /i "SysteemBeheer" > nul 2>&1
REM *alternative* gpresult /r /scope user | FIND /i "SysteemBeheer" > nul 2>&1
IF %ERRORLEVEL% EQU 0 (ECHO Sys.Beheer) ELSE ECHO NO.sys.beheer 
```

但是我怎样才能改变它以便读取多行呢？

**即**（例如借用一些代码）

```
systeminfo | find "Microsoft Windows" > %TEMP%\osname.txt
FOR /F "usebackq delims=: tokens=2" %%i IN (%TEMP%\osname.txt) DO set vers=%%i

echo %vers% | find "Windows 7" > nul
if %ERRORLEVEL% == 0 goto ver_7

echo %vers% | find "Windows Server 2008" > nul
if %ERRORLEVEL% == 0 goto ver_2008

echo %vers% | find "Windows Vista" > nul
if %ERRORLEVEL% == 0 goto ver_vista

goto warnthenexit 
```

我的意思是这确实搜索了多个变量，我希望一些人如何从 gpresult 函数中找到多个安全组（GPO）（或者可能是更好的方法？）

我希望它做这样的事情，*如果 systeembeheer 存在 do blaat1* **，** *如果 aec 存在 do blaat2* **，** *如果 tekenkamer 存在 do blaat3* **，**但是可以存在多个 GPO 所以如果上述之一确实存在，则脚本/搜索不能停止，它仍然需要查看其他人是否也存在。

***也许有点像这样？

```
@echo off
CLS
setlocal enabledelayedexpansion

for %%i in (systeembeheer tekenkamer aec) do (
    gpresult /r /scope user | findstr /L /i %%i
    if errorlevel 0 if not errorlevel 1 echo %%i ok process found !errorlevel!
    if errorlevel 1 if not errorlevel 2 echo %%i no process found !errorlevel!
)

:exit
pause 
```

**并稍微改变了它：**

```
@ECHO OFF
CLS
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION

for %%i in (SysteemBeheer Administratie PersoneelsZaken TeamPlan) do (
    gpresult /r /scope user | findstr /L /i %%i > nul 2>&1
    if errorlevel 0 if not errorlevel 1 Set "GPO_%%i=True"
    if errorlevel 1 if not errorlevel 2 Set "GPO_%%i=False"
REM if errorlevel 0 if not errorlevel 1 echo %%i ok process found !errorlevel! *debug lines*
REM if errorlevel 1 if not errorlevel 2 echo %%i no process found !errorlevel! *debug lines*
)

if "%GPO_systeemBeheer%" == "True" (Echo GPO_SysteemBeheer=%GPO_systeemBeheer%) else Echo GPO_SysteemBeheer Not Found!
if "%GPO_Administratie%" == "True" (Echo GPO_Administratie=%GPO_Administratie%) else Echo GPO_Administratie Not Found!
if "%GPO_PersoneelsZaken%" == "True" (Echo GPO_PersoneelsZaken=%GPO_PersoneelsZaken%) else Echo GPO_PersoneelsZaken Not Found!
if "%GPO_TeamPlan%" == "True" (Echo GPO_TeamPlan=%GPO_TeamPlan%) else Echo GPO_TeamPlan Not Found!

:exit
echo.
echo.
PAUSE 
```

这似乎确实符合我的要求，但我不确定这是最好的方法还是正确的方法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:14:20.093

我不知道我以前是怎么错过这个问题的——迟到比我希望的更好:-)

你的基本策略是合理的。您可以做一些事情来改进和/或简化。

GPRESULT 命令需要很长时间才能执行。我会将结果捕获到一个文件中，然后搜索该文件。那应该会提高性能。

定义“布尔”变量时，更容易取消为 FALSE 定义变量，并将值设置为任何值以表示 TRUE。（我倾向于使用值 1）。然后您可以简单地使用 IF DEFINED VARIABLE 来测试 TRUE 或 FALSE。一个主要优点是您可以在代码块中设置值并测试结果，而无需启用延迟扩展。IF DEFINED 语句的一个限制是它不容易支持名称中带有空格的变量（请参阅[什么语法将检查是否定义了包含空格的变量名称？](https://stackoverflow.com/q/8254571/1012053)）。

您明确将 ERRORLEVEL 0 视为成功（已找到），将 ERRORLEVEL 1 视为失败（未找到）。我不知道可能返回的任何其他 ERRORLEVEL，而且您不必费心处理任何其他值，那么为什么不简单地将 ERRORLEVEL 0 视为成功并将任何其他值视为失败呢？

更好的是，您可以使用`&&`运算符在成功时`||`有条件地运行命令块，并在失败时有条件地运行命令块。

安全组的名称中可以包含空格。这样的名称会因您的代码而失败。最好使用 FINDSTR /C 选项来指定搜索字符串。如果字符串包含空格，则必须将其括在引号中。/C 选项默认将字符串视为文字，因此不需要 /L 选项。

所以这就是我将如何编写您的原始代码：

```
@echo off
setlocal
cls
set "file=%temp%\gpresult%random%.txt"
gpresult /r /scope user >"%file%"
for %%i in (SysteemBeheer Administratie PersoneelsZaken TeamPlan "Group with space") do (
  findstr /i /c:%%i "%file%" >nul 2>&1 && (
    echo Group %%i OK
  ) || (
    echo Group %%i Not Found
  )
)
del "%file%"
pause 
```

如果您想设置和测试“布尔”变量，并且您知道名称永远不会包含空格，那么我将使用以下内容：

```
@echo off
setlocal
cls
set "file=%temp%\gpresult%random%.txt"
gpresult /r /scope user >"%file%"
for %%i in (SysteemBeheer Administratie PersoneelsZaken TeamPlan) do (
  set "GPO_%%i="
  findstr /i /l %%i "%file%" >nul 2>&1 && set "GPO_%%i=1"
)
del "%file%"

if defined GPO_systeemBeheer (Echo GPO_SysteemBeheer Found) else Echo GPO_SysteemBeheer Not Found!
if defined GPO_Administratie (Echo GPO_Administratie Found) else Echo GPO_Administratie Not Found!
if defined GPO_PersoneelsZaken (Echo GPO_PersoneelsZaken Found) else Echo GPO_PersoneelsZaken Not Found!
if defined GPO_TeamPlan (Echo GPO_TeamPlan Found) else Echo GPO_TeamPlan Not Found!
pause 
```

如果组名可以包含空格，那么我会将 IF 测试还原为更像您的第二组代码的东西。如果您使用 TRUE 和 FALSE 值而不是 undefined 和 1，那么您可以去掉 IF 语句中的封闭引号。

```
@echo off
setlocal
cls
set "file=%temp%\gpresult%random%.txt"
gpresult /r /scope user >"%file%"
for %%i in (SysteemBeheer Administratie PersoneelsZaken TeamPlan "Group with spaces") do (
  set "GPO_%%i="
  findstr /i /c:%%i "%file%" >nul 2>&1 && set "GPO_%%i=1"
)
del "%file%"

if "%GPO_systeemBeheer%"=="1" (Echo GPO_SysteemBeheer Found) else Echo GPO_SysteemBeheer Not Found!
if "%GPO_Administratie%"=="1" (Echo GPO_Administratie Found) else Echo GPO_Administratie Not Found!
if "%GPO_PersoneelsZaken%"=="1" (Echo GPO_PersoneelsZaken Found) else Echo GPO_PersoneelsZaken Not Found!
if "%GPO_TeamPlan%"=="1" (Echo GPO_TeamPlan Found) else Echo GPO_TeamPlan Not Found!
if "%GPO_Group with spaces%"=="1" (Echo GPO_Group with spaces Found) else Echo GPO_Group with spaces Not Found!
pause 
```

# c# - 我想要在新页面上显示的 ActionResult 的返回？

> ID：11034159
> 
> 赞同：1
> 
> 时间：2012-06-14T13:29:53.213
> 
> 标签：c#, jquery, asp.net-mvc

我想在新页面上显示我的 ActionResult 的返回？

下面的这个电话是我唯一无法在新页面上显示的电话？

谁能告诉我要添加什么才能做到这一点，我已经使用 Window.open 和按钮，但现在我有一个 RedirectToAction。

**这是我想在新页面/窗口上显示的调用：**

```
return RedirectToAction("Print", new { id = contractInstance.SalesContractId }); 
```

**我已经使用此代码执行此操作的按钮：**

```
window.open('Contract/Print/' + $(this).attr('id')); 
```

**Print actionResult 如下所示：**

```
public ActionResult Print(int id) // sales contract Id
        {
            ParameterFields paramFields = CreateParameterFields(id); // pass the id of the contract
            // Save the report run details
            Guid reportRunId;
            SaveReportRunDetails(paramFields, out reportRunId);               

            try
            {

               <<< Print code >>>
//Open a new page on this return would also be a good answer :)!!!!!!!
                return File(arrStream, "application/pdf");
            }
            catch (Exception err)
            {
                ViewBag.ErrorMessage = err.Message;
                return RedirectToAction("Edit", new { id = id, error = err.Message }); 
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:09:53.797

您如何从视图中执行打印操作？它只是一个超链接`@Html.ActionLink("Print", "Print")`吗？

.NET 无法告诉您的浏览器从服务器打开一个新窗口，这是通过 HTML 标记或 javascript 调用（例如 Window.Open）在客户端完成的。在新页面中打开链接的最简单方法是在 HTML 上指定目标属性。使用 ActionLink 帮助器，您的语法将是：

```
@Html.ActionLink("Print", "Print", "Contract", new{id = Model.SalesContractId}, new {target = "_blank"}) 
```

这应该呈现如下内容：

```
<a href="/Contract/Print/4" target="_blank">Print</a> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-22T11:23:25.253

您可以尝试在控制器操作中执行以下操作

```
Response.Write("<script type='text/javascript'>
                    window.open('YourViewName', '_blank');
                </script>"); 
```

谢谢苏布拉塔姆

# multithreading - 结合 Boost::Threads 和 OpenMP

> ID：11034162
> 
> 赞同：1
> 
> 时间：2012-06-14T13:30:09.513
> 
> 标签：multithreading, boost, parallel-processing, openmp, boost-thread

我不是并行编程方面的专家。但我很好奇我是否可以在同一个应用程序中同时使用它们。有什么好处吗？可以办到？似乎没有人问这个问题。结合 OpenMP 和 MPI 也有类似的问题。一般的答案是肯定的，取决于。但我对 MPI 不是很熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:39:15.363

MPI 在某种意义上与 OpenMP 是正交的——它是一种编程分布式内存系统的范例，其中每个 MPI 进程无法直接访问其他 MPI 进程的内存（例如，不同的进程在不同的计算节点上运行）。由于现在大多数计算节点都是多核的，因此可以使用 OpenMP 或其他线程方法对每个节点进行编程，并使用 MPI 在节点之间交换消息。OpenMP 和`boost:threads`都是线程范式。`boost::threads`除了用于执行常规线程任务和概念上更简单的 OpenMP 用于某些数据并行任务之外，我认为混合它们没有任何意义。

# wordpress - 当我去编辑页面时，对于每个 wordpress 页面编辑窗口都是空白的

> ID：11034172
> 
> 赞同：0
> 
> 时间：2012-06-14T13:30:32.667
> 
> 标签：wordpress

当我去编辑页面时，每个 wordpress 页面编辑窗口都是空白的。今天早些时候它工作正常，我尝试了多个浏览器并且每个浏览器都存在相同的问题（使用 Wordpress 3.3.1）。

当我第一次单击编辑时，文本会立即显示在编辑窗口中，然后消失。

编辑：创建的 .htaccess 文件包含以下内容

```
php_flag display_startup_errors on
php_flag display_errors on
php_flag html_errors on
php_value docref_root 0
php_value docref_ext 0 
```

但没有看到任何错误出现

# ios - 为什么 NSDateFormatter 不能正确转换字符串

> ID：11034176
> 
> 赞同：0
> 
> 时间：2012-06-14T13:30:47.750
> 
> 标签：ios, nsstring, nsdate, nsdateformatter

我正在使用以下代码将 an 转换`NSString`为`NSDate`：

```
+(NSDate *)dateOfDateTimeString:(NSString *)string {

    NSDateFormatter* dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"yyyy.MM.dd_HH:mm aa"];
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
    NSDate *date = [dateFormatter dateFromString:string];

    NSLog(@"try to convert string: %@ to date: %@", string, date);

    return date;
} 
```

但是我得到了意想不到的结果：

> 2012-06-14 22:26:59.208 Motilink[2223:707] +[NSDate(Util) dateOfDateTimeString:][Line 117] 尝试转换字符串：
> 
> 2012.06.12_21:26 PM 至今：2012-06-12 03:26:00 +0000
> 
> 2012-06-14 22:26:59.226 Motilink[2223:707] +[NSDate(Util) dateOfDateTimeString:][Line 117] 尝试转换字符串：
> 
> 2012.06.13_15:00 PM 至今：2012-06-13 03:00:00 +0000

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:52:45.160

没有晚上 21:26。要么选择晚上 9:26，要么跳过格式中的“aa”部分。

# android - Android：避免同一活动的多个实例？

> ID：11034183
> 
> 赞同：0
> 
> 时间：2012-06-14T13:31:02.107
> 
> 标签：android

我的应用程序能够从 Dropbox 打开文件。目前，出现以下场景

1.  从应用抽屉打开 Dropbox 应用
2.  在 Dropbox 中选择一个文件，使用我的应用启动
3.  我的应用程序打开并显示所选文件
4.  点击主页按钮。
5.  从应用抽屉中选择我的应用
6.  我的应用程序打开并显示，但没有显示文件
7.  回击，我的应用程序的空版本关闭，我的应用程序显示 Dropbox 文件的版本现在正在运行

如果我的应用是从 Dropbox 启动的，点击 home 并从应用抽屉启动我的应用应该会恢复正在运行的 Activity（显示 Dropbox 文件的那个）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:38:21.510

我想你正在寻找`singleTask`财产。可能在 AndroidManifest.xml 中设置

```
<activity android:name="my.activity.package.MyActivity" android:launchMode="singleTop"/> 
```

有关这些标志的更多信息：

[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

# java - java：将数据保存到数组中

> ID：11034186
> 
> 赞同：0
> 
> 时间：2012-06-14T13:31:17.427
> 
> 标签：java, arrays

我正在尝试将一些数据保存到数组中，但不幸的是，所有数据都保存到了数组 [0] 中，而它通常不应该是这样的。

```
int j = 0;
while ( j < data.length ) { 
    float unbin = binary(data[2*j+1])+binary(data[2*j]);
    float[] bin = new float[] {unbin};
    print(bin);
    j = j + 2;
} 
```

它写入了所有数据`bin[0]`，我的代码有什么问题？

我怎么能写：

```
bin[j] = unbin ? 
```

在 j = 0 时将数据保存在 bin[0] 中，依此类推？

这是更新的代码：

```
 int j = 0 ;
  float[] bin1 = new float[(data.length/2)];
  while (j < data.length ) {
    if ( data[2*j+2] >= 0  ) {

      String unhx =(binary(data[2*j+3])+binary(data[2*j+2])+binary(data[2*j+1])+binary(data[2*j]));
      float unbin = ((float)unbinary(unhx)/100);
      bin1[j/2] = unbin;
      print(bin1[1]);
    }

    else if  ( data[2*j+2] < 0 && data[2*j+3] < 0 ) {
      data[2*j] = (byte)(-data[2*j]);
      data[2*j+1] = (byte)(-data[2*j+1]);
      String unhx =(binary(data[2*j+1])+binary(data[2*j]));
      float unbin = ((-1)*(float)unbinary(unhx)/100);
      bin1[j/2] = unbin;
      print(bin1[1]);
      }
      j = j + 2;
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:33:50.810

您正在每次迭代中创建一个*新*数组（长度为 1）。您需要在 while 循环*之前创建数组：*

```
float[] bin = new float[...];
while (...) {
    ...
    bin[j] = unbin;
} 
```

（目前还不清楚这里的长度应该是多少——我怀疑你不想每次乘以`j`2*并增加 2。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:34:23.713

Bin 在你的循环内。每次都使用单个元素重新创建它，例如 {unbin}。

您似乎希望在每次迭代时将两个字节长的二进制项转换为浮点数。

```
int j = 0;

float[] bin = new float[(data.length/2)];

while ( j < data.length ) { 
    float unbin = binary(data[2*j+1])+binary(data[2*j]);   
    bin[j/2] = unbin;
    j += 2;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T13:40:01.073

首先，您需要在循环之前声明 bin 数组（以便在您离开循环后它存在（保留在范围内））。

其次，在声明bin数组时，需要指定数组的大小。
`float bin[] = new float[10]; // Creates an array of floats with 10 slots. b[0] - b[9]` （您可能希望数组与“data”数组的大小相同，因此使用 data.length 代替“10”）

然后在循环中你会说
`bin[j] = unbin;`

此外，您递增 j ( `j = j+2`) 的方式，看起来您希望写入 b[0] b[2] b[4] 等。您跳过 b[1]、b[2]、b[3] . 如果这是您的意图，请确保为 bin 阵列分配足够的空间。（我认为你的意思是这样做`j = j+1`）；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:40:17.450

在乔恩的回答之后，以及在循环之外定义数组，您只需要在 J 上加 1，但要确保条件为

```
while ((2*j) <= data.length) {
    ....
} 
```

您还将抛出 ArrayIndexOutOfBoundsExceptions，因为当 j = data.length, 2*j = 2* data.length 时，它比您的数据数组大。

# javascript - javascript中访问函数和嵌套函数的区别

> ID：11034187
> 
> 赞同：0
> 
> 时间：2012-06-14T13:31:21.573
> 
> 标签：javascript, oop

我试图弄清楚为什么我不能像访问非嵌套函数时那样以类似的方式访问嵌套函数（也许有更好的方法来解释这一点。

**换句话说，这有效：**

```
<html>
<head>
<title>Working with elements</title>
</head>

<script type="text/javascript">
var my_div = null;
var newDiv = null;

function addElement()
{
  // create a new div element
  // and give it some content
  newDiv = document.createElement("div");
  newContent = document.createTextNode("Hi there and greetings!");
  newDiv.appendChild(newContent); //add the text node to the newly created div.

  // add the newly created element and it's content into the DOM
  my_div = document.getElementById("org_div1");
  document.body.insertBefore(newDiv, my_div);
}

</script>

<body onload="addElement()">
<div id='org_div1'> The text above has been created dynamically.</div>
</body>
</html> 
```

**这不起作用：**

```
<html>
<head>
<title>Working with elements</title>
</head>

<script type="text/javascript">
var my_div = null;
var newDiv = null;

function addElement()
{
    this.getFieldset = function() {
        // create a new div element
        // and give it some content
        newDiv = document.createElement("div");
        newContent = document.createTextNode("Hi there and greetings!");
        newDiv.appendChild(newContent); //add the text node to the newly created div.

        // add the newly created element and it's content into the DOM
        my_div = document.getElementById("org_div1");
        document.body.insertBefore(newDiv, my_div);
    }
}

</script>

<body onload="addElement.getFieldSet()">
<div id='org_div1'> The text above has been created dynamically.</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:33:50.093

这是因为您从未`addElement()`在第二种情况下执行以执行`this.getFieldset = ...`分配。

您可以将代码更改为

```
function addElement() {}

addElement.getFieldSet = function() {
        // create a new div element
        // and give it some content
        newDiv = document.createElement("div");
        newContent = document.createTextNode("Hi there and greetings!");
        newDiv.appendChild(newContent); //add the text node to the newly created div.

        // add the newly created element and it's content into the DOM
        my_div = document.getElementById("org_div1");
        document.body.insertBefore(newDiv, my_div);
    }; 
```

**编辑**

请参阅this [fiddle](http://jsfiddle.net/fQHgv/)的示例。

# c++ - 使用 boost::asio 创建异步 UDP 客户端

> ID：11034188
> 
> 赞同：0
> 
> 时间：2012-06-14T13:31:24.147
> 
> 标签：c++, asynchronous, udp, client, boost-asio

我尝试使用 boost::asio 创建一个异步 UDP 客户端，我在互联网上获得了一些代码，并设法发送消息。但是我的客户没有收到来自服务器的消息（当我不使用 boost 时它可以工作）。

这是我的代码

```
 class udp_async_client 
 {
 public:

   udp_async_client (boost::asio::io_service& io_service, std::string& host, std:: string port, char **av , int ac)
: reply ()
, _io_service (io_service)
, _sock (io_service, udp:: endpoint (udp:: v4 (), 0)) {

udp:: resolver resolver (_io_service);
udp:: resolver:: query query (udp:: v4 (), host, port);
udp:: resolver:: iterator endpoint_iterator = resolver.resolve (query);
sender_endpoint = *endpoint_iterator;

_io_service.run ();

//test request string                                                                                                                                                                                                                    
using namespace std;

std::string request = av[3];
for (int i = 4 ; i < ac ; ++i)
  {
    request += ";";
    request += av[i];
  }

std:: cout <<"Request is:" <<request <<std:: endl;

_sock.async_send_to (boost:: asio:: buffer (request.c_str(), request.length())
                     , sender_endpoint
                     , boost:: bind (&udp_async_client::handle_send_to_server
                                     , this, boost:: asio:: placeholders:: error
                                     , endpoint_iterator));

  }

 ~udp_async_client () {
_io_service.stop ();
  }

  void handle_receive_from (const boost::system::error_code& error,
                        size_t bytes_recvd) {}

  void handle_receive_from (const boost::system::error_code& error,
                        size_t bytes_recvd) {}

  void handle_send_to_server (const boost::system::error_code& e,
                          udp:: resolver:: iterator endpoint_iterator) {
std:: cout <<"Handle send to" <<std:: endl;
char reply [max_length] = {};
_sock.async_receive_from (
                          boost:: asio:: buffer (reply, max_length), sender_endpoint,
                          boost:: bind (&udp_async_client::handle_receive_from, this,
                                        boost:: asio:: placeholders:: error,
                                        boost::asio::placeholders::bytes_transferred));

std:: cout <<"Reply is:" <<reply <<std:: endl;
  }

private:
char reply [max_length];
boost::asio::io_service& _io_service;
udp:: socket _sock;
boost:: asio:: ip:: udp:: endpoint sender_endpoint;

}; 
```

和我的主要：

```
int main (int ac, char** av) {

  if (ac < 5) {
   std:: cerr <<"Usage: nonblocking_udp_echo_client <host> <port> <name> <name to reach> \n";
 return 1;
 }

  boost:: asio:: io_service io_service;
  std:: string host (av[1]);
  std:: string port (av[2]);

  while (true)
    {
     udp_async_client cli (io_service, host, port, av , ac);
     boost:: this_thread:: sleep (boost:: posix_time:: millisec (500));
   }
 return 0;
  } 
```

我不知道我做错了什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:34:41.210

_io_service.run() 是一个阻塞调用。在 io_service 上调用 stop 之前，您的代码实际上并没有通过该行。

# php - 何时在 PHP 中关闭 MySQL 连接

> ID：11034196
> 
> 赞同：-1
> 
> 时间：2012-06-14T13:31:38.283
> 
> 标签：php, mysql

> **可能重复：**
> [我真的需要做 mysql_close()](https://stackoverflow.com/questions/3359716/do-i-really-need-to-do-mysql-close)

也许要问的第一个问题是，我什至需要关闭我的 MySQL 连接吗？这是在每个脚本结束时自动完成的吗？

无论如何，在下面的示例中，您可以看到如果您从 DoStuff() 调用 DoOtherStuff()，在调用 DoOtherStuff() 之后您可以运行 MySQL 查询之前，您的数据库连接已关闭。现在，打开和关闭 MySQL 连接的规则是什么？我可以不关闭任何连接并在功能需要时打开连接吗？这会创建超出必要的数据库连接并使我的代码变慢吗？对此有什么建议吗？我只是在做自己感觉最好的事情，我感到有些失落。

```
function DoStuff(){
    $connection = mysql_connect(...);

    DoOtherStuff();

    mysql_query(...);//This won't run

    mysql_close($connection);
}

function DoOtherStuff(){
    $connection = mysql_connect(...);

    //Does other stuff

    mysql_close($connection);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:32:33.307

不，您不必关闭连接。根据[手册](http://php.net/manual/en/function.mysql-close.php)：

> 通常不需要使用 mysql_close()，因为非持久打开的链接会在脚本执行结束时自动关闭。另请参阅释放资源。

大多数应用程序只有一个数据库连接，因此也不需要实际存储连接资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:34:01.637

通常，您在脚本开始时打开一个连接***，***或者根本不关闭它（这意味着 PHP 将在脚本结束时关闭它），或者当您确定不再需要它时关闭它.

在每个函数中打开单独的连接肯定是疯狂的。您的代码中应该只有*一个*地方写着`mysql_connect`.

# tsql - 求和表行 ssrs 2008

> ID：11034202
> 
> 赞同：0
> 
> 时间：2012-06-14T13:31:57.113
> 
> 标签：tsql, ssrs-2008

这是我的情况。我需要创建一个报告，显示每个打开的工作订单，还显示最后一个劳动日期（如果有的话），以及自最后一个劳动日期以来经过的天数。下面是创建数据集的 SQL 的表示：

```
select segments.date_created,
       headers.order_number
       segments.segment_id
       lines.line_type
       lines.line_qty * lines.unit_price line_amt,
       case when lines.line_type = 3
         then max(clocking.clock_date)
         else convert(date, '1900-01-01')
         end last_clock_date,
       case when lines.line_type = 3
         then datediff(day, max(clocking.clock_date), getdate())
         else datediff(day, convert(date, '1900-01-01'), getdate())
         end DALL
from segments inner join headers on segments.header_id = headers.header_id
              left join lines on header.header_id = lines.header_id
              left join clocking on header.header_id = clocking.header_id and 
                                    segments.segment_id = clocking.segment_id and
                                    lines.line_id = clocking.line_id
where headers.status = 0
and segments.branch = @branch
and headers.folder_id in ('400', '401')
and headers.order_number not like 'WP%'
group by headers.order_number, segments.segment_id,
         lines.line_type, segments.date_created, lines.line_qty,
         lines.unit_price 
```

示例输出为：

```
 date_created  order_number  segment_id  line_type  line_amt  clock_date  DALL
    2012-05-10    HA025050      1           1          288.58     1900-01-01  41072
    2012-05-10    HA025050      1           3          81.00      2012-05-10  35
    2012-05-10    HA025050      2           1          22.90      1900-01-01  41072
    2012-04-26    W7184315      1           3          1062.50    2012-05-08  37
    2012-04-26    W7184315      1           1          69.68      1900-01-01  41072
    2012-04-26    W7184315      1           1          61.96      1900-01-01  41072
    2012-04-27    W7184357      1           1          682.11     1900-01-01  41072 
```

有两点需要注意，我将日期 1900-01-01 插入所有非人工行的时钟日期，即：不是第 3 行。在我的报告中，我按 order_number 和 segment_id 分组。

报告输出需要：

```
 order_number  segment_id  amount    date_created  clock_date  DALL
    HA025050      1           369.58    2012-05-10    2012-05-10  35
    HA025050      2            22.90    2012-05-10                 0
    W7184315      1          1194.14    2012-04-26    2012-05-08  37
    W7184357      1           682.11    2012-04-27                 0

           Count: 4    Total: 2268.73                       Days: 72      Avg:  18 
```

报告输出为：

```
 order_number  segment_id  amount    date_created  clock_date  DALL
    HA025050      1           369.58    2012-05-10    2012-05-10  35
    HA025050      2            22.90    2012-05-10                 0
    W7184315      1          1194.14    2012-04-26    2012-05-08  37
    W7184357      1           682.11    2012-04-27                 0

           Count: 4    Total: 2268.73                   Days:  205432     Avg:  51358 
```

由于数据集的每一行都是订单行，因此订单总金额的总和正确，但是报告将数据集的所有行求和为总 DALL 值，这是不正确的。我只想总结报告中出现的 DALL 值。在 DALL 字段的表达式中，如果clock_date = '1900-01-01'，我将插入一个“0”。我需要所有的行，因为服务经理想要所有工作订单，无论是否有劳动力，他希望这些订单表示为 0 DALL。我已经与他讨论过这将如何影响他的结果，显然他喜欢有偏差的结果。我想我已经提供了足够的信息，如果您需要了解其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:06:42.900

前一阵子想通了，只是太忙没时间放在这里。我想既然在 SSRS 中没有真正的方法可以做到这一点，我就去了 SQL。而不是放置`1900-01-01`在`labor_date`字段中，我允许 SQL 放置一个空值。现在，当它将所有内容相加时，空值将被忽略。

# java - Hazelcast 查询可以与对象方法一起使用吗？

> ID：11034206
> 
> 赞同：3
> 
> 时间：2012-06-14T13:32:05.817
> 
> 标签：java, spring, hazelcast, spring-el

我在文档中找不到这个。

如果我在 hazelcast 缓存中有一个复杂的对象：

```
public class MyObj {
    private int something;
    private AnotherObject complexMember;
} 
```

我可不可以做：

```
map.values(new SqlPredicate("something > 3 AND complexMember.someProperty > 3")); 
```

我知道`@Cachable`注释在可能的情况下使用[SpEL](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html)。是否有可能以某种方式以编程方式进行？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T07:01:44.637

是的可能。尝试关注；

```
public static void main(String[] args) throws Exception {
    final HazelcastInstance hz = Hazelcast.newHazelcastInstance(null);
    final IMap map = hz.getMap("test");
    map.put(1, new MyObj(1, new AnotherObject("value")));

    System.out.println(map.values(new SqlPredicate("something > 0 and complexMember.someString like 'val%'")));
}

static class MyObj implements Serializable {
    private int something;
    private AnotherObject complexMember;

    MyObj(final int something, final AnotherObject complexMember) {
        this.something = something;
        this.complexMember = complexMember;
    }
}

static class AnotherObject implements Serializable  {
    private String someString;

    AnotherObject(final String someString) {
        this.someString = someString;
    }
} 
```

# c# - How To Load Client Side before page_load VB.net

> ID：11034210
> 
> 赞同：1
> 
> 时间：2012-06-14T13:32:17.237
> 
> 标签：c#, asp.net, vb.net

i have a question ( i am learning VB) is there is a way in vb.net to make the Me.LoadComplete loads after the client side , i develop this simple code to make it easy to understand my question

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
 Handles    Me.LoadComplete
    MsgBox(myhiddenField.Value)
End Sub 
```

Client

```
 </script>
<title></title>
<script type="text/javascript">
    $(document).ready(function() {
           $("#<%=myhiddenField.ClientID%>").val('this is the value ') ;
    });

</script> 
```

```
<form id="form1" runat="server">
<div>
    <asp:LinkButton ID="myLink" runat="server"
      PostBackUrl="~/Default.aspx?value=1" >
      MyLink </asp:LinkButton>

    <asp:HiddenField ID="myhiddenField" runat="server"/>

</div>
</form> 
```

when the page loads , the MsgBox will be empty but when you click the link button the MsgBox has the value you set in the javascript , so i assume that the page_load function gets excuted first the question is how can i load the client content before the page_load ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:36:42.493

You can't. **All** of the server side code must be entirely finished before the request can be sent to the client, and **none** of the client side code can run until then.

If you want to have server side code run after client side code then you need to send a page to the client, have it run some javascript, and then send an another request back to the server so that it can run some more server side code.

If you were a bit more specific about what you're actually trying to accomplish, rather than in the means in which you are trying to actually do it, then we could probably be more helpful.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:38:43.880

[The ASP.NET Lifecycle](http://msdn.microsoft.com/en-us/library/ms178472.aspx) says no because content isn't pushed to the browser until Page_Render, which happens after Page_Load.

You could try doing a bunch of work in Page_Init, and use [Response.Flush()](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.flush.aspx) to force the server to send content to the browser, but

*   You'd only be pushing the content created already, so it wouldn't allow you to push the WHOLE page to the browser before Page_Load
*   I'm not sure it would work
*   Even if it did, there'd be side-effects. For example, you'd probably need to manage control creation, Viewstate value application, etc.

***Even if it is possible in any way, shape, or form (which I doubt)*** - It would be an interesting experiment, but I wouldn't recommend designing a live app around the idea. The Page Lifecycle is something every ASP.NET developer is (or should be) familiar with, and doing goofy things like that just make it harder for maintenance programmers.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:51:54.903

I think you may have asked your question a little incorrectly. I upvoted @DavidStratton because you absolutely have to learn more about the page lifecycle before you can continue, but as I read your question, it looks like you're asking how to populate the hidden field with a value before the PostBack occurs. This is actually workable from the client side. Since you're already using jQuery I'll keep that going in my sample:

Here is the html version of your aspx:

```
<form id="form1" runat="server">
<div>
    <asp:LinkButton ID="myLink" runat="server"
        PostBackUrl="~/Default.aspx?value=1" >
            My Link</asp:LinkButton>

    <asp:HiddenField ID="myhiddenField" runat="server"/>
</div>
</form> 
```

Now these controls are created on the first render, so you don't know what that will be until the page is rendered. However, you can access this in your script by using the `MyControl.ClientID` property to access it. This is a concept you've at least touched on since it's used in your code, but I'm not sure you've gotten it all the way. Since you want to use the click event of the LinkButton, you'll need to assign a javascript action to its click event.

```
<script type="text/javascript">
    $(
        $("#<%=myLink.ClientID%>").click(
            function() {
                $("#<%=myhiddenField.ClientID%>").val('this is the value ');
            });
    );    
</script> 
```

The `$(document).ready()` method is an older syntax. Newer jQuery modules use `$(handler);` The above script will assign an extra step before the postback. That extra step should set the value of your hidden field, and then the postback should occur in its own course and the value of the hidden field should be visible during Page_Load.

# iphone - 使用 AFJSONRequestOperation

> ID：11034213
> 
> 赞同：4
> 
> 时间：2012-06-14T13:32:24.760
> 
> 标签：iphone, objective-c, ios, json, afnetworking

我正在尝试从提供 JSON 的 Web 服务中获取一些数据。但我不知道我的代码出了什么问题。它看起来很简单，但我无法获得任何数据。

这是代码：

```
NSURLRequest *request = [NSURLRequest requestWithURL:URL];

AFJSONRequestOperation *operation = [AFJSONRequestOperation
   JSONRequestOperationWithRequest:request 
   success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
     DumpDic = (NSDictionary*)[JSON valueForKeyPath:@"description"] ;
   } 
   failure:nil
];

[operation start];

AboutTXT = [DumpDic objectForKey:@"description"]; 
```

这是[JSON URL](http://customer.appxtream.com/astro.apps.cms/jsonFeed.action?service=astroResepiService&action=grabJsonText&p1=AboutList&mimeType=application/json)。

**编辑**

来自 URL 的 JSON：

```
{
   "clazz":"AboutList",
   "description":{
      "clazz":"DescriptionContent",
      "description":"ASTRO Holdings Sdn. Bhd. (AHSB) Group operates through two holding companies – ASTRO Overseas Limited (AOL) which owns the portfolio of regional investments and ASTRO Malaysia Holdings Sdn Bhd (AMH / ASTRO) for the Malaysian business, which was privatized in 2010 and is currently owned by Usaha Tegas Sdn Bhd/its affiliates, and Khazanah Nasional Berhad."
   },
   "id":{
      "inc":-1096690569,
      "machine":1178249826,
      "new":false,
      "time":1339660115000,
      "timeSecond":1339660115
   },
   "refKey":"AboutList"
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T15:07:40.767

是否成功连接到服务器，是否调用了成功块？

填写失败块并 NSLog 失败块返回的 NSError：

```
failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                        NSLog(@"%@", [error userInfo]);
                                                    } 
```

我还有一个提示，我建议使用 AFNetwork 的 AFHTTPClient 构建 NSURLRequest，它有助于处理各种事情，并且通常会使事情变得更简单。您设置基本 URL，然后为其提供附加到该基本 URL 的路径。像这样的东西：

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:address];
[httpClient setParameterEncoding:AFJSONParameterEncoding];
NSMutableURLRequest *jsonRequest = [httpClient requestWithMethod:@"POST"
                                                            path:@"events"
                                                      parameters:dict]; 
```

另外，我建议您不要使用 valueForKeyPath，而是只做一个 objectForKey：

```
[JSON objectForKey:@"description"]; 
```

此外，您不应该在那里访问 DumpDic：

```
[operation start];
AboutTXT = [DumpDic objectForKey:@"description"]; 
```

这是一个异步调用，因此一旦操作开始，DumpDic 很可能会在从服务器分配数据之前被访问。因此，您正在访问一个可能尚不存在的密钥。

这应该在成功或失败块中完成。一旦连接完成并且数据可以使用，就会调用这些块。

所以它应该看起来更像这样：

```
AFJSONRequestOperation *operation =
  [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                  success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    DumpDic = [JSON objectFor:@"description"];
    AboutTXT = [DumpDic objectForKey:@"description"];
  }
  failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"%@", [error userInfo]);
  }];

[operation start]; 
```

# django - Django sorl thumbnail 崩溃 - 大量大图像

> ID：11034214
> 
> 赞同：3
> 
> 时间：2012-06-14T13:32:29.837
> 
> 标签：django, sorl-thumbnail

当我在模板中有很多大图像时，比如 800x650 等，Django 就会崩溃。它可以在我的本地 Mac 上运行，但不能在我的 Linode 生产服务器上运行。可以做一些批处理，然后停止然后再做一些吗？

我在模板中的 {% for %} 循环中进行缩略图，在每次传递中创建一个小图像和一个大图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:32:39.697

我想我和你有同样的事情。当一个视图第一次被访问时，sorl-thumbnail 会做这件事，检查页面上哪些缩略图需要生成，当然也会生成那些需要生成的缩略图。在生成缩略图的时候，你会掉到文件 I/O 上，这很*慢*，与 Web 请求的所有其他部分相比真的很*慢。*

如果您有大量图像，这可能需要相当长的时间（我在一些图像非常重的页面上看到第一次加载超过 30 秒）。就我而言，我遇到了内部服务器错误；我不确定这是否与您所说的“崩溃”相同。实际上，它并没有真正下降，问题是请求超时通常设置得很低，我只需要增加我的超时时间，让服务器有更长的时间来完成处理请求。第一次加载时它仍然很慢，但在那之后，它是瞬时的并且没有更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T09:56:24.313

[认为我们在这里](https://stackoverflow.com/questions/42866200/sorl-thumbnail-bugs-502-with-large-image?noredirect=1#comment72840095_42866200)解决了您的问题。

*Sorl-Thumbnail*中有类似[Engine](http://sorl-thumbnail.readthedocs.io/en/latest/reference/settings.html?highlight=engine)的东西。默认是*Pil*，它会出现大图像的错误。

# asp.net - 由于某种原因，freb.xsl 未应用于 IIS Express TraceLogFile

> ID：11034219
> 
> 赞同：1
> 
> 时间：2012-06-14T13:32:41.150
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, iis-express

我正在 IIS Express 7.5 中调试 ASP.NET MVC 4 应用程序，但由于某种原因，保存我需要调试的关键请求的跟踪的*frNNNNNN.xml***根本没有被转换**。相反，纯文本显示在 IE9 中。

其他跟踪文件正在使用现有的*freb.xsl*很好地转换和打开。

有没有人有类似的问题并知道发生了什么？

**编辑：**我发现（通过在 FF 中打开它） .xml 由于解析错误而没有被转换：

```
XML Parsing Error: not well-formed
Location: file:///.../fr000066.xml
Line Number 7703, Column 23:  
<Data Name="Buffer">‹&lt;/Data>
--------------------^ 
```

但我仍然不知道为什么会发生，以及如何预防。

# c# - 在c#中检测两个json文件之间的差异

> ID：11034224
> 
> 赞同：14
> 
> 时间：2012-06-14T13:32:57.020
> 
> 标签：c#, json

例如，如果我有以下 json 文本：

```
 object1{
     field1: value1;
     field2: value2;
     field3: value3;
 }

 object1{
     field1: value1;
     field2: newvalue2;
     field3: value3;
 } 
```

我需要 c# 中的一些东西来读取该文件并显示差异。即它可以返回以下对象：

```
differences {
    object1: { field: field2, old_value: value2, new_value: newvalue2}
} 
```

是否有一些 API 或建议可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T17:18:30.760

我建议您使用[弱类型 JSON 序列化](http://msdn.microsoft.com/en-us/library/bb943471%28v=VS.90%29.aspx)并编写一个使用[JsonObject](http://msdn.microsoft.com/en-us/library/system.json.jsonobject%28v=VS.95%29.aspx)的例程，如下所示：

```
String JsonDifferenceReport(String objectName,
                            JsonObject first,
                            JsonObject second)
{
  if(String.IsNullOrEmpty(objectName))
    throw new ArgumentNullException("objectName");
  if(null==first)
    throw new ArgumentNullException("first");
  if(null==second)
    throw new ArgumentNullException("second");
  List<String> allKeys = new List<String>();
  foreach(String key in first.Keys)
    if (!allKeys.Any(X => X.Equals(key))) allKeys.Add(key);
  foreach(String key in second.Keys)
    if (!allKeys.Any(X => X.Equals(key))) allKeys.Add(key);
  String results = String.Empty;
  foreach(String key in allKeys)
  {
    JsonValue v1 = first[key];
    JsonValue v1 = second[key];
    if (((null==v1) != (null==v2)) || !v1.Equals(v2))
    {
      if(String.IsNullOrEmpty(results))
      {
         results = "differences: {\n";
      }
      results += "\t" + objectName + ": {\n";
      results += "\t\tfield: " + key + ",\n";
      results += "\t\toldvalue: " + (null==v1)? "null" : v1.ToString() + ",\n";
      results += "\t\tnewvalue: " + (null==v2)? "null" : v2.ToString() + "\n";
      results += "\t}\n";
    }
  }
  if(!String.IsNullOrEmpty(results))
  {
    results += "}\n";
  }
  return results;
} 
```

您可以选择是否在 v1 和 v2 中以递归方式获取报告`JsonValue`，而不是像我在这里所做的那样仅使用它们的字符串表示。

如果你想递归，它可能会像这样改变上面的内容：

```
 if ((null==v1) || (v1.JsonType == JsonType.JsonPrimitive)
   || (null==v2) || (v2.JsonType == JsonType.JsonPrimitive))
  {
    results += "\t\tfield: " + key + ",\n";
    results += "\t\toldvalue: " + (null==v1) ? "null" : v1.ToString() + ",\n";
    results += "\t\tnewvalue: " + (null==v2) ? "null" : v2.ToString() + "\n";
  }
  else
  {
    results + JsonDifferenceReport(key, v1, v2);
  } 
```

-杰西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-10T10:26:39.977

由于某种原因，我无法在我的 Web API 项目中使用 JsonObject。我使用了 JSON.Net，下面是我获取差异的方法。它将给出差异数组。

```
private static string GetJsonDiff(string action, string existing, string modified, string objectType)
    {
        // convert JSON to object
        JObject xptJson = JObject.Parse(modified);
        JObject actualJson = JObject.Parse(existing);

        // read properties
        var xptProps = xptJson.Properties().ToList();
        var actProps = actualJson.Properties().ToList();

        // find differing properties
        var auditLog = (from existingProp in actProps
            from modifiedProp in xptProps
            where modifiedProp.Path.Equals(existingProp.Path)
            where !modifiedProp.Value.Equals(existingProp.Value)
            select new AuditLog
            {
                Field = existingProp.Path,
                OldValue = existingProp.Value.ToString(),
                NewValue = modifiedProp.Value.ToString(),
                Action = action, ActionBy = GetUserName(),
                ActionDate = DateTime.UtcNow.ToLongDateString(),
                ObjectType = objectType
            }).ToList();

        return JsonConvert.SerializeObject(auditLog);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-06T15:40:48.727

我已经构建了自己的 Json 比较方法。它使用 Newtonsoft.Json.Linq。

```
 public static JObject FindDiff(this JToken Current, JToken Model)
    {
        var diff = new JObject();
        if (JToken.DeepEquals(Current, Model)) return diff;

        switch(Current.Type)
        {
            case JTokenType.Object:
                {
                    var current = Current as JObject;
                    var model = Model as JObject;
                    var addedKeys = current.Properties().Select(c => c.Name).Except(model.Properties().Select(c => c.Name));
                    var removedKeys = model.Properties().Select(c => c.Name).Except(current.Properties().Select(c => c.Name));
                    var unchangedKeys = current.Properties().Where(c => JToken.DeepEquals(c.Value, Model[c.Name])).Select(c => c.Name);
                    foreach (var k in addedKeys)
                    {
                        diff[k] = new JObject
                        {
                            ["+"] = Current[k]
                        };
                    }
                    foreach (var k in removedKeys)
                    {
                        diff[k] = new JObject
                        {
                            ["-"] = Model[k]
                        };
                    }
                    var potentiallyModifiedKeys = current.Properties().Select(c => c.Name).Except(addedKeys).Except(unchangedKeys);
                    foreach (var k in potentiallyModifiedKeys)
                    {
                        diff[k] = FindDiff(current[k], model[k]);
                    }
                }
                break;
            case JTokenType.Array:
                {
                    var current = Current as JArray;
                    var model = Model as JArray;
                    diff["+"] = new JArray(current.Except(model));
                    diff["-"] = new JArray(model.Except(current));
                }
                break;
            default:
                diff["+"] = Current;
                diff["-"] = Model;
                break;
        }

        return diff;
    } 
```

# hadoop - 跨映射器共享内存数据中的通用查找：Hadoop

> ID：11034227
> 
> 赞同：2
> 
> 时间：2012-06-14T13:33:02.603
> 
> 标签：hadoop, mapreduce, hbase, lookup, in-memory

我有 30 多个映射器，每个映射器都使用内存中映射的通用查找数据。在每个映射器中，我必须在设置函数中加载此查找数据。我通过在 Hbase 表和/或某些 rdbms 数据库上查询和计算来计算此查找数据。当我从每个映射器做同样的事情时，上述常见任务在每个映射器中执行 30 次。

无论如何我可以在提交mapReduce作业之前计算查找数据并设置某个位置，以便我可以从mappes直接获取该值（在内存结构中）。存储在配置中的某个地方等...查找生成是一项繁重的任务，这需要很多时间。

如果它是一个查找文件，我会使用分布式缓存，但它是动态计算而不是存储在文件中。

请提出任何解决这个常见问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:00:01.307

您不能生成数据然后存储在与分布式缓存链接的 HDFS 中吗？

您可以使用的另一个技巧（如果您使用 JVM 重用和小型集群）是在映射器中使查找映射静态，然后在您的集合中执行非空检查，从而仅计算数据在该 tasktracker 的第一个地图实例中。

# .net - System.Web.Mvc.ModelClientValidationRule' 存在于两个位置错误

> ID：11034228
> 
> 赞同：5
> 
> 时间：2012-06-14T13:33:02.980
> 
> 标签：.net, asp.net-mvc-3, visual-studio-2010

> **可能重复：**
> [MVC 4 Beta 并排安装错误](https://stackoverflow.com/questions/9471263/mvc-4-beta-side-by-side-installation-error)

我收到这个错误

> 错误 1 ​​类型 'System.Web.Mvc.ModelClientValidationRule' 存在于两个 'c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies\System.Web.WebPages.dll ' 和 'c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll'

在我将某些 ASP .NET MVC3 DLL更改`Copy Local`为**false之后**

如何阻止此错误的发生？

# php - 如果按国家/地区记录集结果，则条件 PHP

> ID：11034234
> 
> 赞同：0
> 
> 时间：2012-06-14T13:33:30.477
> 
> 标签：php

如何有条件地在 MySQL 结果的 PHP 页面上显示文本，该页面使用以下语法来显示数据`<?php echo($row_Rep_Locator['Country']); ?>`

在这种情况下，我只想在国家等于美国的情况下在页面底部显示文本“hello world”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:34:34.367

```
<?php
if ($row_Rep_Locator['Country'] == "United States"){
    echo 'hello world';
}
?> 
```

您可能要考虑做一些基本的 PHP 教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:36:32.760

您可以使用`switch()`：

```
switch($row_Rep_Locator['Country']){
    case "en_US":{
        echo "Hello America";
        break;
    }
    default:{
        echo "Hello World!";
    }
} 
```

如果您要检查许多不同的条件，通常在大约 3 个 if 子句处，此解决方案会特别快。

# c++ - Pantheios 在 C++ 中设置显示级别

> ID：11034238
> 
> 赞同：1
> 
> 时间：2012-06-14T13:33:40.217
> 
> 标签：c++, logging, pantheios, log-level

我正在使用 Pantheios 库进行日志记录。我有：

```
pantheios::log(pantheios::debug, "I'm debug");
pantheios::log(pantheios::informational, "Some info"); 
```

哪个输出：

```
[MyApplication, Jun 14 15:45:26.549; Debug] : I'm debug
[MyApplication.1, Jun 14 15:45:26.549; Informational] : Some info 
```

但我想在显示信息和调试之间进行选择：

```
 set_level(pantheios::informational) //what should this be ?
 pantheios::log(pantheios::debug, "I'm debug");
 pantheios::log(pantheios::informational, "Some info"); 
```

哪个输出：

```
[MyApplication.1, Jun 14 15:45:26.549; Informational] : Some info 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:36:51.947

实际过滤日志级别的“正确”方法是自定义记录器前端和覆盖`pantheios::pantheios_fe_isSevereityLogged()`，如下所示：

```
namespace
{
    static int s_log_level = pantheios::debug;
}

PANTHEIOS_CALL(int) pantheios_fe_isSeverityLogged(void *token,
    int severity, int backEndId)
{
    return severity <= s_log_level;
} 
```

您应该参考[这个](http://www.pantheios.org/doc/html-old/group__group____frontend.html#g0d1cad3ff6ae403cc318f15f063e325e)和[这个例子](http://www.pantheios.org/doc/html-old/cpp_2example__cpp__custom__fe_2example__cpp__custom__fe_8cpp-example.html#a59)来获得更多信息。

# javascript - JavaScript 给出“预期对象”错误

> ID：11034243
> 
> 赞同：0
> 
> 时间：2012-06-14T13:33:51.637
> 
> 标签：javascript

我正在编写一些基于下拉选择表单显示或隐藏日历的代码。我已将它设置为在下拉选择中运行我的 showHideCalendar() 函数作为 onchange 操作。当我更改所选选项时，我收到“预期对象”错误。我已经包含了相关的 HTML 和 JavaScript 代码。

```
<script type="text/javascript" language="javascript">

function showHideCalendar(element) {
    document.getElementById("calendar").style.display = "none";        
    if (document.getElementById("dropdown").selectedIndex === 13) {
        cal5.popup();
        document.getElementById("textField").value = "";
        document.getElementById("calendar").style.display = "inline";        
    }
}

</script>

<FORM NAME='Labs' METHOD='POST' ACTION="">
<select id="dropdown" name='TimeFrame0' onchange='showHideCalendar(document.Labs.TimeFrame0)'>
    <option value='NoReorder'>Do Not Reorder</option>
    <option value='2012-06-14 08:40:39.067'>Today</option>
    <option value='2012-06-21 08:40:39.067'>1 Week</option>
    <option value='2012-06-28 08:40:39.067'>2 Weeks</option>
    <option value='2012-07-05 08:40:39.067'>3 Weeks</option>
    <option value='2012-07-12 08:40:39.067'>4 Weeks</option>
    <option value='2012-07-26 08:40:39.067'>6 Weeks</option>
    <option value='2012-07-14 08:40:39.067' selected>1 Month</option>
    <option value='2012-08-14 08:40:39.067'>2 Months</option>
    <option value='2012-09-14 08:40:39.067'>3 Months</option>
    <option value='2012-10-14 08:40:39.067'>4 Months</option>
    <option value='2012-12-14 08:40:39.067'>6 Months</option>
    <option value='2013-03-14 08:40:39.067'>9 Months</option>
    <option value='custom' id='custom'>Calendar Select</option>
</select>                    

<div id='calendar' style='display:inline'>
    <input type=text name='StartDate' value='' size=20 onchange='inputChanged()' onkeydown='inputChanged()' onblur='inputChanged()' id='textField'>
    <a href='javascript:cal5.popup();' onmousedown='inputChanged()'> <img src='/jscalendar/img/cal.gif' width='16' height='16' border='0' alt='Click Here to Pick up the date'></a>
</div>
<input type=checkbox name=SameDate value='on' checked onClick='SetTimeFrame(document.Labs.TimeFrame0)'> Use Same Date For All Labs
<input class='btnsave' type=button name=Save value='Reorder Labs' onClick=javascript:document.Labs.action='/LabReview/Reorder.php?PROV=PROVID&MaxCount=2&Text=1';document.Labs.submit();>
<input class='btncancel' type=button name=Cancel value=Cancel onClick=javascript:top.window.close()>      
</FORM> 
```

有没有人看到这不起作用的任何原因。错误被抛出就行了`<select id="dropdown" name='TimeFrame0' onchange='showHideCalendar(document.Labs.TimeFrame0)'>`。

其中一位回答者认为错误不在我的新代码中，而是页面上的其他内容。我正在编辑我的问题以添加页面上的其余 javascript。

```
<script type="text/javascript" language="javascript">

    function showHideCalendar(element) {
        document.getElementById("calendar").style.display = "none";        
        if (document.getElementById("dropdown").selectedIndex === 13) {
            cal5.popup();
            document.getElementById("textField").value = "";
            document.getElementById("calendar").style.display = "inline";        
        }
    }

    function inputChanged() {
        document.getElementById("dropdown").selectedIndex = 13;
    }

   function SetTimeFrame(element)
     {       
       if (document.Labs.SameDate.checked==true)
         {
           var Elements=document.Labs.elements.length;
         for (var i=0; i<Elements; i++)
           {
          if (document.Labs.elements[i].type=='select-one')
              {                      
                   document.Labs.elements[i].options[element.selectedIndex].selected=true;
              }        
         }    
         }
     }

   if (top.window.opener.document.getElementById("Complete<?php echo($_GET['Item']); ?>"))
     {
       if ('<?php echo($Reviewed); ?>' == 'yes')
          {
                window.opener.document.getElementById("Complete<?php echo($_GET['Item']); ?>").style.visibility='visible';       
                 window.opener.document.getElementById("Partial<?php echo($_GET['Item']); ?>").style.visibility='hidden';       
        }
          else if ('<?php echo($Reviewed); ?>' == 'partial')
         {
                   window.opener.document.getElementById("Partial<?php echo($_GET['Item']); ?>").style.visibility='visible';       
                    window.opener.document.getElementById("Complete<?php echo($_GET['Item']); ?>").style.visibility='hidden';       
        }
   }    
     else
     {
              var temp=top.window.opener.location.href;
             top.window.opener.location.href=temp;    
             top.window.opener.top.window.location.reload(); 
     }

function DateCheck(element)
{
  var xx = element.value;
  var re = new RegExp("^[0-9][0-9]/[0-9][0-9]/[0-9][0-9][0-9][0-9]$");
  var re2 = new RegExp("^[0-9]/[0-9][0-9]/[0-9][0-9][0-9][0-9]$");
    var re3 = new RegExp("^[0-9][0-9]/[0-9]/[0-9][0-9][0-9][0-9]$");
    var re4 = new RegExp("^[0-9]/[0-9]/[0-9][0-9][0-9][0-9]$");

    var error = "";
  var maxdays = new Array(0,31,29,31,30,31,30,31,31,30,31,30,31);
  var retval = true;
  if(element.value != "")
  {
    if(xx.search(re) < 0 && xx.search(re2) < 0 && xx.search(re3) < 0 && xx.search(re4) < 0)
    {
    error = "Invalid Date Format " + xx + ". Please enter dates in the format mm/dd/yyyy."
    retval = false;
    element.value = ""
    }
    else
    {
    var list = xx.split("/");
    var month = list[0];
    if(month.charAt(0) == "0")
    month = month.substr(1);
    if( list[0] < 1 || list[0] > 12)
    {
        error = "Invalid Month " + list[0];
        retval = false;
        element.value = ""
    }
    else 
    if(list[1] < 1 || list[1] > maxdays[month])
    {
        error = "Invalid Day " + list[1];
        retval = false;
        element.value = ""
    }
    else 
    if(list[2] < 1900)
    {
        error = "Invalid Year (Must be greater than 1900) " + list[2];
        retval = false;    
        element.value = ""
    }
    }
    if(!retval)
    alert(error);

    return retval;
  }
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:37:53.070

改变：

```
<select id="dropdown" name='TimeFrame0' onchange='showHideCalendar(document.Labs.TimeFrame0)'> 
```

到：

```
<select id="dropdown" name='TimeFrame0' onchange='showHideCalendar(this)'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:55:35.577

事实证明，问题是由以下代码块引起的。

```
 if (top.window.opener.document.getElementById("Complete<?php echo($_GET['Item']); ?>"))      {        
if ('<?php echo($Reviewed); ?>' == 'yes')
           {
                 window.opener.document.getElementById("Complete<?php echo($_GET['Item']); ?>").style.visibility='visible';
                         window.opener.document.getElementById("Partial<?php echo($_GET['Item']); ?>").style.visibility='hidden';
                }
           else if ('<?php echo($Reviewed); ?>' == 'partial')
          {
                    window.opener.document.getElementById("Partial<?php echo($_GET['Item']); ?>").style.visibility='visible';
                            window.opener.document.getElementById("Complete<?php echo($_GET['Item']); ?>").style.visibility='hidden';
                }
    }
          else
      {
               var temp=top.window.opener.location.href;
              top.window.opener.location.href=temp;
                  top.window.opener.top.window.location.reload();
       } 
```

当我从代码中删除它时，它就像一个魅力。感谢大家的建议和想法。

# spotify - 在 Spotify App API 中检测商业广告

> ID：11034247
> 
> 赞同：1
> 
> 时间：2012-06-14T13:33:57.800
> 
> 标签：spotify

有什么方法可以检测广告是否正在播放？我在用着

```
player.observe(models.EVENT.CHANGE, function (event) 
```

检测何时播放新歌曲。问题是当播放广告时也会发生此事件。

（很难测试您是否拥有与没有广告的高级服务相关的开发者帐户。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:17:35.737

Track 类似乎有一个名为**isAd**的隐藏属性，可以像 一样访问它`track.data.isAd`，它可能包含您想要的数据（您可以通过`console.log(track)`在应用程序中使用来查看此属性和其他属性。

由于此属性未记录在案，我不确定在已发布的应用程序中使用它是否可以接受。Spotify 的某个人需要回答这个问题。

# javascript - Safari浏览器注销问题Windows身份验证

> ID：11034248
> 
> 赞同：1
> 
> 时间：2012-06-14T13:33:57.533
> 
> 标签：javascript, asp.net, safari

退出页面后，如果用户没有关闭浏览器窗口并再次返回站点，则不会显示验证框，因为用户名和密码存储在浏览器缓存中。

在 IE 中，document.execCommand("ClearAuthenticationCache") 工作正常。但这似乎不适用于野生动物园。

我尝试了以下选项，

1）`Response.Statuscode=401`（从服务器端）- 这会清除身份验证缓存并提供凭据弹出窗口，但即使我们提供正确的凭据，它也不接受。如果我们单击取消并尝试再次访问该页面，那么它工作正常。

2) 使用`XMLHttpRequestfrom`客户端 - 当我尝试使用空白凭据打开同一站点上的 URL 时，readyState 和 statuscode 始终返回 0

```
 function testfn() {
        alert("send completed");
        alert(XMLHttp1.readyState);
    }
    function run()
    {
        XMLHttp1 = new XMLHttpRequest();
        XMLHttp1.onreadystatechange = testfn();
        XMLHttp1.open('GET', 'http://172.22.164.253/test/testxml.xml', true, '_', '_');
        try {
            XMLHttp1.wi
            XMLHttp1.send();
            alert("sent");
            alert("status" + XMLHttp1.status);
            alert(XMLHttp1.status == 401) ;
            } 
        catch (ex) {
            alert("Exception: Got an exception. " + ex);
        }
    } 
```

3）清除缓存 - 用各种组合尝试了以下所有代码，但没有运气

```
Response.ExpiresAbsolute=DateTime.Now.AddDays(-1d);
Response.Expires =-1500;
Response.CacheControl = "no-cache";

Response.Redirect("Login.aspx");
Page.Response.Cache.SetCacheability(HttpCacheability.NoCache);
Page.Response.Cache.SetNoStore(); 
```

请告知我在使用 Windows 身份验证处理 ASP.NET 页面时从 Safari 注销的解决方案。

# php - mod_rewrite 建议

> ID：11034249
> 
> 赞同：1
> 
> 时间：2012-06-14T13:33:58.703
> 
> 标签：php, .htaccess, mod-rewrite

现在我的 url 格式如下所示：

`http://domain.com/index.php?template=user&id=39`

我正在使用[这个函数](http://kevin.vanzonneveld.net/techblog/article/create_short_ids_with_php_like_youtube_or_tinyurl)来创建唯一的短字符串 ID。

我想要实现的是：用户页面`http://domain.com/u/D/`在哪里，是前面提到的函数生成的唯一短字符串。`u``D`

这是我尝试过的：

```
RewriteEngine On

RewriteRule ^/(.*)/(.*)/$ index.php?template=$1&id=$2 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:51:40.760

```
RewriteEngine On
RewriteRule ^(.*)/(.*)/?$ index.php?template=$1&id=$2 [L,QSA] 
```

# php - twig 和 Symfony2 中的高级路由参数处理

> ID：11034252
> 
> 赞同：2
> 
> 时间：2012-06-14T13:34:05.737
> 
> 标签：php, symfony, twig

我有这个配置：

一个包含搜索字段的页面，在同一页面中提交时，我想要一个与研究匹配的每个结果的列表，每个人都链接到相应的路线。例如，如果我找到 4 个元素，我希望在结果页面中找到 4 个链接 Azienda1、Azienda2 ecc。

现在我得到这个错误：

> 在第 27 行的 ::base.html.twig 中呈现模板（““ABCAziendaBundle_visualizza_azienda”路由缺少一些强制参数（“id_azienda”）。”）时引发异常。500 内部服务器错误 - Twig_Error_Runtime 1链接异常：MissingMandatoryParametersException

这是关键文件，

```
#config.yml
ABCAziendaBundle_visualizza_azienda:
    pattern: /visualizza_azienda/{id_azienda}
    defaults: { _controller: ABCAziendaBundle:Default:showAzienda }
    requirements:
    id_azienda: \d+

ABCAziendaBundle_azienda_index:
    pattern:  /
    defaults: { _controller: ABCAICAziendaBundle:Default:indexAzienda } 
```

* * *

```
#DefaultController.php

public function indexAziendaAction(Request $request) {

    $searchFormType = new SearchAziendaType();
    $form = $this->createForm($searchFormType);

    if ($request->getMethod() == 'POST')
    {
        $form->bindRequest($request);
        if ($form->isValid())
        {
            $data = $form->getData();

            $em = $this->getDoctrine()->getEntityManager();
            $aziende = $em->getRepository('ABCAziendaBundle:Azienda')->findAziendaByAliasOrRagioneSocialeSubstring($data["search_field"]);
            return $this->render('ABCAziendaBundle:Default:indexAzienda.html.twig', array('form' => $form->createView(), 'aziende' => $aziende));
        }
    }

    return $this->render('ABCAziendaBundle:Default:indexAzienda.html.twig', array('form' => $form->createView()));
}

public function showAziendaAction($id_azienda) {

    echo "non entra qui";
} 
```

* * *

```
#indexAzienda.html.twig
{% extends "::base.html.twig" %}

{% block pagetitle %}ABC{% endblock %}

{% block body %}
<h2>Ricerca azienda</h2>
<div id="form_container">
    <form action="{{ path('ABCAziendaBundle_azienda_index') }}" method="post" {{ form_enctype(form) }}>
        {{ form_label(form.search_field, "Ricerca Azienda") }}
        {{ form_widget(form.search_field) }}
            <input type="submit" />
    </form>
    <a href="{{ path('ABCAziendaBundle_registra_azienda_anagrafica') }}"><button>nuova azienda</button></a>
</div>
    {% if aziende is defined %}
        {% for azienda in aziende %}
            <div class="areaTot">
                <a href="{{ path('ABCAziendaBundle_visualizza_azienda', { 'azienda_id' : azienda.id })  }}">{{azienda.alias}}</a>
            </div>
        {% endfor %}
    {% else %}
    <div class="areaTot">
        <p>"NIENTE"</p>
    </div>
    {% endif %}
{% endblock %} 
```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:38:23.427

我认为这是您这边的错字：

```
<a href="{{ path('ABCAziendaBundle_visualizza_azienda', { 'azienda_id' : azienda.id })  }}"> 
```

应该：

```
<a href="{{ path('ABCAziendaBundle_visualizza_azienda', { 'id_azienda' : azienda.id })  }}"> 
```

不同的是路由参数，你最初写`azienda_id`的，但是路由参数名称是`id_azienda`

应该清除错误。

问候， 马特

# javascript - 从选定的列表项创建列表

> ID：11034253
> 
> 赞同：0
> 
> 时间：2012-06-14T13:34:06.440
> 
> 标签：javascript, jquery

我在这里有一个小提琴：[my fiddle](http://jsfiddle.net/radi8/LxwLf/)。我想做的是从一组单独的列表中创建一个项目列表。我似乎无法理解我做错了什么，但这是正在发生的事情：

1.  我有一组基于表格数据的列表
2.  每个列表都有列的名称和一个选择复选框
3.  如果我选择一个项目，它需要添加到选定的列区域（垂直列表）
4.  有 14 个带有复选框的独特表格项目
5.  ****（问题 -->）**当我选择一个项目时，它会在选定的列部分中添加 14 次**

 **代码

(html):

我尝试插入 HTML，但无法正常工作。请看上面列出的小提琴。

（jQuery）：

```
var dte = // drag table elements
{
init: function() {
    var chkbx = $('.group input[type="checkbox"]:checkbox');
    //var chkbx = $('#accordion');
    for (var i = 0, ii = chkbx.length; i < ii; i++) {
        $(chkbx).bind("click", dte.adjustList);
    }
},

adjustList: function(event) {
    var list = [];
    var str = '';
    var eleval = event.currentTarget.value;
    var eleid = event.currentTarget.id;
    if (eleval == 1) {
        list.push(eleid);
        str = '<li>' + eleid + '</li>';
    }
    $('#vertical ul').append(str);
/*
    //var ele = event.currentTarget.id;
    var allVals = [];
    var str = '';
    //var obj = $("#"+ele);
    var ele = $('#accordion');
    $(obj+': checked').each(function(){
        allVals.push($(this.val()));
        dte.list.push($(this.val()));
        str += '<li>'+$(this.val())+'</li>';
    });
    $('#verticle').text(str);
    alert('List: ' + toString(list));
    */
}
};
dte.init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:38:18.967

```
init: function() {
    $('.group input:checkbox').bind("click", dte.adjustList);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:39:54.740

您只需要根据您的选择器绑定一次。

```
init: function() {
        var chkbx = $('.group input[type="checkbox"]:checkbox');
        $(chkbx).bind("click", dte.adjustList);
 }, 
```

[小提琴](http://jsfiddle.net/LxwLf/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:40:14.303

我已经编辑了你的小提琴，我删除了`for loop`. 这是链接[更新小提琴](http://jsfiddle.net/LxwLf/2/) 您只需要绑定一次点击事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:40:16.003

您正在多次绑定事件。你可以这样做：

```
init:function(){
  $('.group input[type="checkbox"]:checkbox').bind('click',dte.adjustList);
}, 
```

编辑了你的小提琴：

[http://jsfiddle.net/emphaticsunshine/tPAmc/](http://jsfiddle.net/emphaticsunshine/tPAmc/)**

# javascript - 如何从 GetObject("winmgmts:") 获取一项特定的 Windows 服务？

> ID：11034261
> 
> 赞同：0
> 
> 时间：2012-06-14T13:34:26.520
> 
> 标签：javascript, windows-services, hta

为了获得名为“MyTestService”的 Windows 服务，我创建了一个 Win32_Service 对象的实例，然后在找到“MyTestService”服务的同时遍历所有案例。很明显，这不是最佳方式。有人知道如何在不循环所有服务的情况下获得一项服务吗？

```
 var e = new Enumerator(GetObject("winmgmts:").InstancesOf("Win32_Service"));
    for(;!e.atEnd(); e.moveNext()){
        var service = e.item();
        var serviceName = service.Name;
        if(serviceName == "MyTestService"){
            // do something with MyTestService
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:29:14.573

试试这个：

```
GetObject("winmgmts:").ExecQuery("SELECT * FROM Win32_Service WHERE Name='MyTestService'") 
```

# c# - 使用 PrincipalSearcher.FindAll() 时的内存泄漏

> ID：11034265
> 
> 赞同：6
> 
> 时间：2012-06-14T13:34:37.063
> 
> 标签：c#, .net, directoryservices, userprincipal, principalcontext

我也有使用插件和应用程序域的长期运行服务，并且由于使用目录服务而出现内存泄漏。请注意，我使用的是 system.directoryservices.accountmanagement，但据我了解，它使用相同的底层 ADSI API，因此容易出现相同的内存泄漏。

我查看了所有的 CLR 内存计数器，内存没有泄漏，并且在强制 GC 或卸载 appdomain 时全部返回。泄漏是在不断增长的私有字节中。我在这里搜索并看到了一些与使用 ADSI API 时内存泄漏相关的问题，但它们似乎表明只需遍历 directorysearcher 即可解决问题。但正如您在下面的代码中看到的那样，我在 foreach 块中执行此操作，但内存仍在泄漏。有什么建议么？这是我的方法：

```
public override void JustGronkIT()
{
    using (log4net.ThreadContext.Stacks["NDC"].Push(GetMyMethodName()))
    {
        Log.Info("Inside " + GetMyMethodName() + " Method.");
        System.Configuration.AppSettingsReader reader = new System.Configuration.AppSettingsReader();
        //PrincipalContext AD = null;
        using (PrincipalContext AD = new PrincipalContext(ContextType.Domain, (string)reader.GetValue("Domain", typeof(string))))
        {
            UserPrincipal u = new UserPrincipal(AD);
            u.Enabled = true;
            //u.Surname = "ju*";
            using (PrincipalSearcher ps = new PrincipalSearcher(u))
            {
                myADUsers = new ADDataSet();
                myADUsers.ADUsers.MinimumCapacity = 60000;
                myADUsers.ADUsers.CaseSensitive = false;
                foreach (UserPrincipal result in ps.FindAll())
                {
                     myADUsers.ADUsers.AddADUsersRow(result.SamAccountName, result.GivenName, result.MiddleName, result.Surname, result.EmailAddress, result.VoiceTelephoneNumber,
                            result.UserPrincipalName, result.DistinguishedName, result.Description);
                 }
                 ps.Dispose();
            }
            Log.Info("Number of users: " + myADUsers.ADUsers.Count);
            AD.Dispose();
            u.Dispose();
        }//using AD
    }//Using log4net
}//JustGronkIT 
```

我对 foreach 循环进行了以下更改，它更好，但私有字节仍在增长并且永远不会被回收。

```
 foreach (UserPrincipal result in ps.FindAll())
 {
     using (result)
     {
         try
         {
             myADUsers.ADUsers.AddADUsersRow(result.SamAccountName, result.GivenName,           result.MiddleName, result.Surname, result.EmailAddress, result.VoiceTelephoneNumber,                                        result.UserPrincipalName, result.DistinguishedName, result.Description);
             result.Dispose();
         }
         catch
         {
             result.Dispose();
         }
     }
 }//foreach 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-07T13:25:07.253

我遇到了很大的内存泄漏，因为和你一样，我写了类似...

```
 foreach (GroupPrincipal result in searcher.FindAll())
                {
                    results.Add(result.Name);
                } 
```

但诀窍是 FindAll 本身返回一个必须处置的对象......

```
 using (var searchResults = searcher.FindAll())
            {
                foreach (GroupPrincipal result in searchResults)
                {
                    results.Add(result.Name);
                }
            } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T15:27:42.160

我相当确定这是一个已知错误（[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/6a09b8ff-2687-40aa-a278-e76576c458e0](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/6a09b8ff-2687-40aa-a278-e76576c458e0)）。

解决方法？使用 DirectoryServices 库...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:06:08.400

我说得太早了，从长远来看，简单地调用 Dispose() 并没有解决问题。真正的解决方案？停止同时使用 directoryservices 和 directoryservices.accountmanagement 并改用 System.DirectoryServices.Protocols 并对我的域进行分页搜索，因为该程序集在 Microsoft 方面没有泄漏。

根据要求，这里有一些代码来说明我提出的解决方案。请注意，我还使用了插件架构和 appDomain，并在完成后卸载了 appdomain，尽管我认为 DirectoryServices.Protocols 中没有泄漏，您不必这样做。我这样做只是因为我认为使用 appDomains 可以解决我的问题，但由于它不是托管代码中的泄漏，而是非托管代码中的泄漏，所以它没有任何好处。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.DirectoryServices.Protocols;
using System.Data.SqlClient;
using System.Data;
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Text.RegularExpressions;
using log4net;
using log4net.Config;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Diagnostics;
using System.IO;

namespace ADImportPlugIn {

    public class ADImport : PlugIn
    {

        private ADDataSet myADUsers = null;
        LdapConnection _LDAP = null;
        MDBDataContext mdb = null;
        private Orgs myOrgs = null;

        public override void JustGronkIT()
        {
            string filter = "(&(objectCategory=person)(objectClass=user)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))";
            string tartgetOU = @"yourdomain.com";
            string[] attrs = {"sAMAccountName","givenName","sn","initials","description","userPrincipalName","distinguishedName",
            "extentionAttribute6","departmentNumber","wwwHomePage","manager","extensionName", "mail","telephoneNumber"};
            using (_LDAP = new LdapConnection(Properties.Settings.Default.Domain))
            {
                myADUsers = new ADDataSet();
                myADUsers.ADUsers.MinimumCapacity = 60000;
                myADUsers.ADUsers.CaseSensitive = false;

                try
                {
                    SearchRequest request = new SearchRequest(tartgetOU, filter, System.DirectoryServices.Protocols.SearchScope.Subtree, attrs);
                    PageResultRequestControl pageRequest = new PageResultRequestControl(5000);
                    request.Controls.Add(pageRequest);
                    SearchOptionsControl searchOptions = new SearchOptionsControl(System.DirectoryServices.Protocols.SearchOption.DomainScope);
                    request.Controls.Add(searchOptions);

                    while (true)
                    {
                        SearchResponse searchResponse = (SearchResponse)_LDAP.SendRequest(request);
                        PageResultResponseControl pageResponse = (PageResultResponseControl)searchResponse.Controls[0];
                        foreach (SearchResultEntry entry in searchResponse.Entries)
                        {
                            string _myUserid="";
                            string _myUPN="";
                            SearchResultAttributeCollection attributes = entry.Attributes;
                            foreach (DirectoryAttribute attribute in attributes.Values)
                            {
                                if (attribute.Name.Equals("sAMAccountName"))
                                {
                                    _myUserid = (string)attribute[0] ?? "";
                                    _myUserid.Trim();
                                }
                                if (attribute.Name.Equals("userPrincipalName"))
                                {
                                    _myUPN = (string)attribute[0] ?? "";
                                    _myUPN.Trim();
                                }
                                //etc with each datum you return from AD
                        }//foreach DirectoryAttribute
                        //do something with all the above info, I put it into a dataset
                        }//foreach SearchResultEntry
                        if (pageResponse.Cookie.Length == 0)//check and see if there are more pages
                            break; //There are no more pages
                        pageRequest.Cookie = pageResponse.Cookie;
                   }//while loop
              }//try
              catch{}
            }//using _LDAP
        }//JustGronkIT method
    }//ADImport class
} //namespace 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:51:53.367

`UserPrincipal`实现`IDisposable`。`result`尝试在 foreach 循环内调用 Dispose 。

我也发现[了这个](https://stackoverflow.com/questions/10715159/does-principalsearchresultt-automatically-dispose-all-elements-in-its-collecti)SO question，但没有就答案达成一致。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T14:04:44.080

在经历了很多挫折和一些提示之后，我想出了一个解决方案。我还发现了一个有趣的事情，即如何将 using 块与 DirectoryServices 资源与 DataContext 结合使用，如下面的代码片段所示。我可能不需要使用终结器，但为了安全起见，我还是这样做了。我发现通过执行下面概述的操作，我的内存在运行期间是稳定的，而在我必须每天两次终止应用程序以释放资源之前。

```
using System.DirectoryServices;
using System.DirectoryServices.AccountManagement;

namespace myPlugins
{
    public class ADImport : Plugin
    {
        //I defined these outside my method so I can call a Finalizer before unloading the appDomain 
        private PrincipalContext AD = null; 
        private PrincipalSearcher ps = null;
        private DirectoryEntry _LDAP = null; //used to get underlying LDAP properties for a user
        private MDBDataContext _db = null; //used to connect to a SQL server, also uses unmanaged resources

        public override GronkIT()
        {
            using (AD = new PrincipalContext(ContextType.Domain,"my.domain.com"))
            {
                UserPrincipal u = new UserPrincipal(AD);
                u.Enabled=true;
                using(ps = new PrincipalSearcher(u))
                {
                    foreach(UserPrincipal result in ps.FindAll())
                    {
                        using (result)
                        {
                            _LDAP = (DirectoryEntry)result.GetUnderlyingObject();
                            //do stuff with result
                            //do stuff with _LDAP
                            result.Dispose(); //even though I am using a using block, if I do not explicitly call Dispose, it's never disposed of
                            _LDAP.Dispose(); //even though I am using a using block, if I do not explicitly call Dispose, it's never disposed of
                        }
                    }
                }
            }
        }

        public override JustGronkIT()
        {
            using(_db = new MDBDataContext("myconnectstring"))
            {
                //do stuff with SQL
                //Note that I am using a using block and connections to SQL are properly disposed of when the using block ends
            }
        }

        ~ADImport()
        {
            AD.Dispose(); //This works, does not throw an exception
            AD = null;
            ps.Dispose(); //This works, does not throw an exception
            ps = null;
            _LDAP.Dispose(); //This works, does not throw an exception
            _LDAP = null;
            _db.Dispose(); //This throws an exception saying that you can not call Dispose on an already disposed of object
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-10T15:51:02.073

该代码对我来说很好。我只是处理每个实例。在我的项目中，我每两分钟调用一次此方法。在我打电话给外面的垃圾收集器之后。

```
public class AdUser
{
    public string SamAccountName { get; set; }
    public string DisplayName { get; set; }
    public string Mail { get; set; }
}

public List<AdUser> GetAllUsers()
{
    List<AdUser> users = new List<AdUser>();

    using (PrincipalContext context = new PrincipalContext(ContextType.Domain, Environment.UserDomainName))
    {
        using PrincipalSearcher searcher = new PrincipalSearcher(new UserPrincipal(context));
        using PrincipalSearchResult<Principal> allResults = searcher.FindAll();

        foreach (Principal result in allResults)
        {
            using DirectoryEntry de = result.GetUnderlyingObject() as DirectoryEntry;

            AdUser user = new AdUser()
            {
                SamAccountName = (string)de.Properties["samAccountName"].Value,
                DisplayName = (string)de.Properties["displayName"].Value,
                Mail = (string)de.Properties["mail"].Value
            };

            users.Add(user);
            result.Dispose();
        }
    }

    return users;
} 
```

上面调用方法的前几次迭代似乎是内存分配，但之后它没有泄漏。考虑在每次迭代后调用内存清理。

```
GC.Collect(); 
```

# jquery - 动态和自定义 div 定位

> ID：11034267
> 
> 赞同：2
> 
> 时间：2012-06-14T13:34:42.617
> 
> 标签：jquery, html, css, jquery-ui

我有这个 div 结构

```
<div class="panel">
    <div class="north"></div>
    <div class="center"></div>
</div> 
```

外部 div 是[jQuery 可调整大小](http://jqueryui.com/demos/resizable/) 的 我试图用百分比定位 div，

```
.north{height:30%}
.center{height:70%} 
```

完美运行，我收到了
![在此处输入图像描述](../Images/6f5c672f7521af26b0db0e553772586e.png)

现在我被困在如何得到这个问题上：有
![在此处输入图像描述](../Images/9a84b5c4287380418022976d3be51bc6.png)
什么帮助吗？
请不要忘记外部 div 是可调整大小的..

[这](http://jsfiddle.net/PnnMa/)是我的出发点。

**编辑**
我也试过

```
.panel{display:table;}
.north,.center{display:table-row;} 
```

但这不适用于 IE<8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:43:37.133

另一个使用花车的解决方案：http: [//jsfiddle.net/KMWw4/2/](http://jsfiddle.net/KMWw4/2/)

```
.panel {
    width:  300px;
    height: 500px; /* explicit height */
    float: left;
}
.north {
    float: left; display: inline; /*iefix*/
    width:  100%;
}
.center {
    height: 100%;
}

.panel-percent .north {
    height: 30%; /* you can use percentages */
}
.panel-fixed .north {
    height: 100px; /* ... or pixel height */
}

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:43:49.647

很简单。;)

1.  使用 position:absolute 和 top:0 定位 150px 对象。（您可能也需要将左右设置为零）
2.  将动态高度区域的上边距设置为 150px。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T00:38:19.647

你可以试试这个：

[http://jsfiddle.net/KSY6T/3/](http://jsfiddle.net/KSY6T/3/)

```
.panel{
    min-height:150px;height:300px;overflow:hidden;position:relative;
    /* height:300px; is optional, i just used it for demonstrational purposes */
}

.north{
    position:absolute;top:0px;width:100%;height:150px;
}

.center{
    margin-top:150px;height:100%;
} 
```

只需调整父容器的大小，看看会发生什么......

你必须自己检查完整的跨浏览器兼容性，我已经用我的浏览器检查过了，它在所有浏览器上都运行良好：

*   野生动物园 5
*   歌剧 11
*   火狐3.5
*   火狐4

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:37:18.403

```
.panel {
    position: relative
} 

.center { 
    position: absolute;
    top: 150px;
    bottom: 0px;
} 
```

通过将父/外部 div 设置为相对位置，将内部 div 设置为绝对位置，您可以执行这样的技巧。

更新的小提琴：http: [//jsfiddle.net/PnnMa/1/](http://jsfiddle.net/PnnMa/1/)

# python - 搜索不可靠的作者姓名

> ID：11034268
> 
> 赞同：0
> 
> 时间：2012-06-14T13:34:46.200
> 
> 标签：python

我们扫描了数千份旧文件并将关键数据输入数据库。其中一个字段是作者姓名。

我们需要搜索给定作者的文档，但可能输入的确切名称不正确，因为在许多文档中数据是手写的。

我想只搜索姓氏的前几个字母，然后显示一个列表供用户选择。在这个阶段我不知道有多少不同的作者，我怀疑它将是数百而不是数十万。将有数十万份文件。有没有更好的办法？SQL 数据库会更好地处理它吗？

该软件是python，并且会有一个文档列表，每个文档都有一个作者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:41:39.060

我认为您可以使用 mongodb 来设置列表字段，其中包含所有可能的作者姓名。例如，您有手写名称“black”，但您无法识别名称中的字母，例如“c”或“e”，您可以将来源名称设置为“black”并添加到可能名称列表“blaek”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:42:17.583

您可以使用[Sunburnt](http://blog.timetric.com/2010/02/08/sunburnt-a-python-solr-interface/)，它是一个 Python-Solr 库，它可以访问构建在[Lucene](http://lucene.apache.org/)之上的[Solr](http://lucene.apache.org/solr/)。

Solr 的摘录：

> Solr 是 Apache Lucene 项目中流行的、超快的开源企业搜索平台。它的主要功能包括强大的全文搜索、命中突出显示、分面搜索、动态聚类、数据库集成、富文档（例如，Word、PDF）处理和地理空间搜索。Solr 具有高度可扩展性，提供分布式搜索和索引复制，它为许多世界上最大的互联网站点的搜索和导航功能提供支持。

它将为您提供搜索文档所需的一切，包括部分命中和潜在匹配项，无论您的搜索条件是什么。

# python - 从 lxml 中的 html 解析日期字符串

> ID：11034270
> 
> 赞同：1
> 
> 时间：2012-06-14T13:34:52.003
> 
> 标签：python, html, lxml

```
 s = """
      <tbody>
      <tr>
       <td style="border-bottom: none">
       <span class="graytext" style="font-weight: bold;"> Reply #3 - </span>
        <span class="graytext" style="font-size: 11px">
        05/13/09  2:02am
        <br>
       </span>
      </td>
     </tr>
    </tbody>
 """ 
```

在 HTML 字符串中，我需要取出日期字符串。

我试过这样

```
 import lxml
  doc = lxml.html.fromstring(s)
  doc.xpath('//span[@class="graytext" and @style="font-size: 11px"]') 
```

但这不起作用。我应该只需要日期字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:45:08.793

您的查询正在选择`span`，您需要从中获取文本：

```
>>> doc.xpath('//span[@class="graytext" and @style="font-size: 11px"]')
[<Element span at 1c9d4c8>] 
```

大多数查询返回一个序列，我通常使用获取第一项的辅助函数。

```
from lxml import etree
s = """
<tbody>
 <tr>
   <td style="border-bottom: none">
   <span class="graytext" style="font-weight: bold;"> Reply #3 - </span>
    <span class="graytext" style="font-size: 11px">
    05/13/09  2:02am
    <br>
   </span>
  </td>
 </tr>
</tbody>
"""
doc = etree.HTML(s)

def first(sequence,default=None):
  for item in sequence:
    return item
  return default 
```

然后：

```
>>> doc.xpath('//span[@class="graytext" and @style="font-size: 11px"]')
[<Element span at 1c9d4c8>]
>>> doc.xpath('//span[@class="graytext" and @style="font-size: 11px"]/text()')
['\n    05/13/09  2:02am\n    ']
>>> first(doc.xpath('//span[@class="graytext" and @style="font-size: 11px"]/text()'),'').strip()
'05/13/09  2:02am' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:44:23.973

尝试以下而不是最后一行：

```
print doc.xpath('//span[@class="graytext" and @style="font-size: 11px"]/text()')[0] 
```

xpath 表达式的第一部分是正确的，`//span[@class="graytext" and @style="font-size: 11px"]`选择所有匹配的 span 节点，然后您需要指定要从节点中选择的内容。`text()`这里使用的选择节点的内容。

# miva - Miva 商店中的验证不允许用户在文本框中输入信息

> ID：11034273
> 
> 赞同：0
> 
> 时间：2012-06-14T13:35:00.620
> 
> 标签：miva

我们正在为客户开发在线 Miva 商店，可以在此处查看：[http](http://www.labwear.com/shop/metrohm.htm) ://www.labwear.com/shop/metrohm.htm 。当客户完成所有步骤：选择实验室外套颜色、选择尺寸、选择徽标、选择刺绣颜色和选择刺绣款式时，用户无法在刺绣名称文本框中输入任何内容。如果有人知道为什么会这样，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:17:58.903

有人在其上设置了 HTML5 属性“只读”。Miva Merchant 默认不使用 HTML5 文档类型或属性，所以有人设置了这个。把它拿掉，看看它是否能解决问题。

此外，您还有 JavaScript 问题。您正在尝试声明变量，但您正在这样做：

```
var var_mvt = 1964M 
```

代替：

```
var var_mvt = "1964M" 
```

所以这会阻止 JavaScript 的其余部分执行（这可能会触发删除“只读”属性）。

# c# - c#泛型类的具体覆盖

> ID：11034275
> 
> 赞同：7
> 
> 时间：2012-06-14T13:35:07.063
> 
> 标签：c#, .net, generics, inheritance, subtype

这是我正在使用的通用类：

```
 public interface IRepository<T> where T : EntityObject
{
    RepositoryInstructionResult Add(T item);
    RepositoryInstructionResult Update(T item);
    RepositoryInstructionResult Delete(T item);
}
public class Repository<T> : IRepository<T> where T : EntityObject
{

    RepositoryInstructionResult Add(T item)
    { //implementation}
    RepositoryInstructionResult Update(T item);
    { //implementation}
    RepositoryInstructionResult Delete(T item);
    { //implementation}
 } 
```

现在，我希望偶尔在 t ：特定类型时更改方法的行为。可能会出现以下情况吗？这种特殊的尝试会产生错误（错误 5：“存储库”的部分声明必须以相同的顺序具有相同的类型参数名称）。

```
public class Repository<Bar> //where Bar : EntityObject
{
    RepositoryInstructionResult Add(Bar item)
    { //different implementation to Repository<T>.Add() }
    //other methods inherit from Repository<T>
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T13:42:25.067

```
public class BarRepository : Repository<Bar>
{ 
    RepositoryInstructionResult Add(Bar item) 
    { //different implementation to Repository<T>.Add() } 
    //other methods inherit from Repository<T> 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:07:01.933

将您的 Repository 类命名为 RepositoryBase 并将接口方法设为虚拟。在您的 RepositoryBase 类中以一般方式实现它们，但是因为您将方法标记为虚拟您将能够覆盖派生类中的功能，您的代码将看起来像这样。

```
 public interface IRepository<T> where T : EntityObject
 {
    RepositoryInstructionResult Add(T item);
    RepositoryInstructionResult Update(T item);
    RepositoryInstructionResult Delete(T item);
 }

 public class Repository<T> : IRepository<T> where T : EntityObject
 {
    virtual RepositoryInstructionResult Add(T item)
    { //implementation}
    virtual RepositoryInstructionResult Update(T item);
    { //implementation}
    virtual RepositoryInstructionResult Delete(T item);
    { //implementation}
  } 
```

如果您需要为 Bar 对象的更新方法执行一些自定义逻辑，只需创建派生类，将其命名为 BarRepository 并在此处覆盖 Repositorybase 类的更新方法，您可以调用基本实现或仅使用其自己的逻辑进行处理

```
 public class BarRepository : Repositorybase<Bar>
 {
    public override RepositoryInstructionResult Update(Bar item);
    {
       //Call base method if needed
       //Base.Update(item);

       //implement your custom logic here
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:17:57.083

作为对您问题的直接回答：与您所展示的内容最接近的可能是检查`T`运行时的实际值。在您的 add 方法中，您可以编写如下内容：

```
if (typeof(T) == typeof(Bar)) {
    // your Bar-specific code
}
// ... 
```

请注意，这在性能方面可能不是很好，特别是如果您有超过一两个这样的特殊类型，您想要区别对待。

除此之外，唯一的解决方案是指定基类的实际类型参数的子类，如其他答案中所述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-19T11:24:08.197

使用扩展方法：

```
public static void DoSomething(this repository<Bar> repo)
{
  //your custom code goes here
} 
```

# c# - C#继承从父类调用派生类函数

> ID：11034277
> 
> 赞同：0
> 
> 时间：2012-06-14T13:35:12.523
> 
> 标签：c#, inheritance

我有一个已经变得太长的A类。所以我决定把它的一些功能移到 B 类。我让 B 从 A 继承。

现在A中有函数，需要B中的函数。我的问题是我应该在A类的哪里实例化B类。我不能在A类的构造函数中实例化，因为B类会调用基类来创建一个永无止境的循环。

我只希望类 B 被实例化一次，因为类 A 构造函数具有我只想初始化一次的对象。

我什至不确定我现在是否有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:38:29.083

继承被严重过度使用。特别是在您的情况下，您希望[组合而不是继承](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:39:56.550

base 关键字允许您访问超类（baseclass）： http: [//msdn.microsoft.com/en-us/library/hfw7t1ce (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/hfw7t1ce(v=vs.71).aspx)

但是：如果您唯一关心的是类的长度，那么使用部分类可能是更好的解决方案（[http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)）。您可以将您的课程分成多个文件。显然你现在做的不是继承的意图和意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:39:05.947

首先，当你的类变得太长时，定义一个新类并不是最佳实践。如果所有功能在逻辑上都与同一个对象相关，那么无论它有多长，您都可以将其保留在同一个类中。

如果您希望 B 仅被实例化一次，您应该将其设为静态类。您可以在此处找到有关静态类的更多信息：http: [//msdn.microsoft.com/en-us/library/79b3xss3 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/79b3xss3(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:39:57.273

如果您将函数抽象化`A`（这也必须`A`抽象化），那么只需`A`像往常一样从 的方法中调用这些方法。`B`然后用你想要的逻辑覆盖抽象函数。当用户实例化`B`类时，这些调用将转换为调用，`B`即使保存实例的变量的编译时类型是`A`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T13:40:13.997

如果存在真正的“is-a”关系，您应该只使用继承。对我来说，听起来您正在描述 B 类需要的功能。也许 B “有” A 所以你应该考虑组合而不是继承：

```
public class B
{
    private A a;

    public B(A a)
    {
       this.a = a;
    }

    public void UseAFunction()
    {
        a.MyFunction();
    }
} 
```

# php - 从多个类继承

> ID：11034293
> 
> 赞同：0
> 
> 时间：2012-06-14T13:36:39.077
> 
> 标签：php, oop, multiple-inheritance

> **可能重复：**
> [PHP 中的类级别是否允许多重继承？](https://stackoverflow.com/questions/2690898/is-multiple-inheritance-allowed-at-class-level-in-php)

我该如何解决这个问题

```
<?php
class A {
    public function af() {
        print 'a';
    }
    public function bark() {
        print ' arf!';
    }
}

class B {
    public function bf() {
        print 'b';
    }
}

class C extends B, A /*illegal*/ {
    public function cf() {
        print 'c';
    }

    public function bark() {
        print ' ahem...'; 
        parent::bark();
    }
}

$c = new C; 
$c->af(); 
$c->bf(); 
$c->cf();
print "<br />";
$c->bark();
//Parse Error
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:44:05.987

你不能，PHP 不支持多重继承。您可以`A`继承自`B`，反之亦然；或者您可以根据需要包装额外的实例`A`和`B`内部实例以及`C`对它们的代理方法调用：

```
class C {
    protected $a, $b;
    function __construct(A $a, B $b) {
        $this->a = $a;
        $this->b = $b;
    }
    function af() {
        return $this->a->af();
    }
    function bf() {
        return $this->b->bf();
    }
    // ... etc...
} 
```

（现在使用依赖注入来安抚 OOP 纯粹主义者）

# x86 - SSE：_mm_load/store 与使用直接指针访问之间的区别

> ID：11034302
> 
> 赞同：19
> 
> 时间：2012-06-14T13:36:51.870
> 
> 标签：x86, sse, simd

假设我想添加两个缓冲区并存储结果。两个缓冲区都已分配 16 字节对齐。我找到了两个如何做到这一点的例子。

第一个是使用 _mm_load 将数据从缓冲区读取到 SSE 寄存器，执行加法操作并存储回结果寄存器。直到现在我都会这样做。

```
void _add( uint16_t * dst, uint16_t const * src, size_t n )
{
  for( uint16_t const * end( dst + n ); dst != end; dst+=8, src+=8 )
  {
    __m128i _s = _mm_load_si128( (__m128i*) src );
    __m128i _d = _mm_load_si128( (__m128i*) dst );

    _d = _mm_add_epi16( _d, _s );

    _mm_store_si128( (__m128i*) dst, _d );
  }
} 
```

第二个例子只是直接对内存地址进行了加法操作，没有加载/存储操作。两个接缝都可以正常工作。

```
void _add( uint16_t * dst, uint16_t const * src, size_t n )
{
  for( uint16_t const * end( dst + n ); dst != end; dst+=8, src+=8 )
  {
    *(__m128i*) dst = _mm_add_epi16( *(__m128i*) dst, *(__m128i*) src );
  }
} 
```

所以问题是第二个示例是否正确或可能有任何副作用以及何时使用加载/存储是强制性的。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T14:08:31.717

两个版本都很好 - 如果您查看生成的代码，您会发现第二个版本仍然会为向量寄存器生成至少一个负载，因为`PADDW`(aka `_mm_add_epi16`) 只能直接从内存中获取其第二个参数。

在实践中，大多数重要的 SIMD 代码将在加载和存储数据之间执行更多操作，而不仅仅是一次添加，因此通常您可能希望最初使用 将数据加载到向量变量（寄存器）`_mm_load_XXX`，在寄存器上执行所有 SIMD 操作，然后通过 将结果存储回内存`_mm_store_XXX`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T07:23:40.467

主要区别在于，在第二个版本中，如果编译器`movdqu`不能证明指针是 16 字节对齐的，它将生成未对齐的加载（等）。根据周围的代码，甚至可能无法编写编译器可以证明此属性的代码。

否则没有区别，编译器足够聪明，可以将两个加载和添加拆分为一个加载和一个从内存添加（如果它认为有用），或者将加载和添加指令拆分为两个。

如果你使用的是c++，你也可以写

```
void _add( __v8hi* dst, __v8hi const * src, size_t n )
{
    n /= 8;
    for( int i=0; i<n; ++i )
        d[i| += s[i];
} 
```

`__v8hi`*是8 个半整数向量*的缩写，或者`typedef short __v8hi __attribute__ ((__vector_size__ (16)));`，每个向量类型都有类似的预定义类型，gcc 和 icc 都支持。

这将产生几乎相同的代码，可能会更快，也可能不会更快。但是有人可能会争辩说它更具可读性，并且可以很容易地扩展到 AVX，甚至可能通过编译器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-06T07:24:48.897

至少使用 gcc/clang，`foo = *dst;`与`foo = _mm_load_si128(dst);`. 按照惯例，这种`_mm_load_si128`方式通常是首选的，但是对对齐的普通 C/C++ 取消引用`__m128i*`也是安全的。

* * *

`load`/内部函数的主要目的`loadu`是将对齐信息传达给编译器。

对于 float/double，它们还在 ( `const`)`float*`和`__m128`or ( `const`) `double*`<->之间进行类型转换`__m128d`。对于整数，您仍然必须自己转换:(。但这已通过 AVX512 内在函数修复，其中整数加载/存储内在函数采用`void*`args。

编译器仍然可以优化死存储或重新加载，并将加载折叠到 ALU 指令的内存操作数中。但是，当它们确实在其程序集输出中发出存储或加载时，它们会以一种不会出错的方式执行此操作，因为您的源代码中有对齐保证（或缺少对齐保证）。

使用对齐的内在函数可以让编译器将负载折叠到具有 SSE 或 AVX 的 ALU 指令的内存操作数中。但是未对齐的加载内在函数只能使用 AVX 折叠，因为 SSE 内存操作数就像`movdqa`加载一样。例如`_mm_add_epi16(xmm0, _mm_loadu_si128(rax))`，可以`vpaddw xmm0, xmm0, [rax]`使用 AVX 编译为，但使用 SSE 必须编译为`movdqu xmm1, [rax]`/ `paddw xmm0, xmm1`。A`load`而不是也`loadu`可以让它避免使用 SSE 的单独加载指令。

* * *

与 C 一样，取消引用 a`__m128i*`被假定为对齐访问，例如`load_si128`or `store_si128`。

在 gcc 中`emmintrin.h`，`__m128i`类型是用 定义的`__attribute__ ((__vector_size__ (16), __may_alias__ ))`。

如果它使用了`__attribute__ ((__vector_size__ (16), __may_alias__, aligned(1) ))`，gcc 会将取消引用视为未对齐的访问。

# xaml - 缩放级别更改时如何重新排列 WrapGrid 内容？

> ID：11034306
> 
> 赞同：0
> 
> 时间：2012-06-14T13:37:11.543
> 
> 标签：xaml, windows-8, microsoft-metro

我正在开发一个布局非常简单的 Windows 8 Metro 应用程序。它由一个单独的页面组成，其中 a`WrapGrid`包含在 中`ItemsControl`，而后者又包含在 a 中`ScrollViewer`。这是应用程序主页的 XAML 代码：

```
<Page ...>
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid x:Name="MainGrid" Margin="120,140,32,0">
    <ScrollViewer x:Name="ScrollView" 
                  VerticalScrollBarVisibility="Auto"
                  HorizontalAlignment="Stretch">
        <ItemsControl x:Name="itemsControl" HorizontalAlignment="Stretch">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapGrid Orientation="Horizontal"
                              HorizontalChildrenAlignment="Stretch"
                              Margin="0"
                              HorizontalAlignment="Center">
                        <WrapGrid.ChildrenTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition />
                                <RepositionThemeTransition />
                            </TransitionCollection>
                        </WrapGrid.ChildrenTransitions>
                    </WrapGrid>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </ScrollViewer>
</Grid>
<Page.BottomAppBar>
  ...
</Page.BottomAppBar>
</Page> 
```

当用户单击应用程序栏中的某个按钮时，还有一个用户控件以编程方式创建哪些新实例并将其添加到 ItemsControl。正如使用 a 所预期的那样`WrapGrid`，控件实例按顺序堆叠在一行中，直到屏幕上没有更多空间，此时它们出现在新行中，需要向下滚动才能看到它们. 到目前为止，一切都很好。

现在我想实现一个功能，但我不知道如何实现它。我想要的是以下内容：当用户缩小应用程序，导致控件看起来更小时，我希望使用新的可用空间，以便每行可以显示更多控件；取而代之的是，当前的行为是`ItemsControl`减少了自身，并且未使用额外的周围空间。

例如，假设用户添加了 10 个控件。一行有 4 个控件的空间，因此显示 3 行控件，分别为 4、4 和 2 个控件。如果用户缩小并且现在连续有 7 个控件的空间，我希望`ItemsControl`重新排列自身，以便现在只有两行包含 7 个和 3 个控件。我怎么能做到这一点？

我希望我已经正确解释了自己。请不要犹豫，问我的问题是否不够清楚。非常感谢！

# java - 使用 JDBC 初始化类似 JPA 的实体

> ID：11034309
> 
> 赞同：2
> 
> 时间：2012-06-14T13:37:20.870
> 
> 标签：java, jpa, jdbc, data-access-layer

我正在为一个 Web 项目实现几个 DAO 类，出于某些原因，我必须使用 JDBC。

现在我想返回一个这样的实体：

```
public class Customer{

    // instead of int userId
    private User user;

    // instead of int activityId
    private Activity act;

    // ...
} 
```

使用 JPA`user`并且`activity`可以轻松加载（并自动指定实体之间的关系）。

但是，如何使用 JDBC？有没有一种通用的方法来实现这一目标？我应该在我的加载everiting`CustomerDAO`吗？是否可以为引用的实体实现*延迟初始化？*

我的第一个想法是在我的`UserDAO`：

```
public void initUser(Customer customer); 
```

在我的`ActivityDAO`：

```
public void initActivity(Customer customer); 
```

初始化变量`customer`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:24:26.930

## 活动记录路线

您可以使用 AspectJ ITD 来做到这一点，并基本上将您的实体变成[Active Record](http://en.wikipedia.org/wiki/Active_record_pattern)之类的对象。

基本上，您创建了一个建议类实现称为“HasUser”和“HasActivity”的接口的方面。`HasUser`您的接口`HasActivity`将只定义吸气剂。然后，您将制作将在 和 的实际实现中编织的`getUser()`方面`getActivity()`。

您的方面将完成实际的 JDBC 工作。尽管 AspectJ 的学习曲线最初很陡峭，但它会使您的代码更加优雅。

您可以查看我在[AspectJ ITD stackoverflow post](https://stackoverflow.com/a/7403617/318174)上的一个答案。

您还应该检查springs `@Configurable`，它将在您的依赖项（例如您的数据源或jdbc模板）中自动装配到非托管spring bean中。

当然，最好的例子就是[Spring Roo](http://www.springsource.org/spring-roo)。只需查看它生成的 AspectJ 文件，就可以了解如何使用 @Configurable（确保使用 activerecord 注释）（假设 roo 使用 JPA）。

## DAO 路线

如果你真的想走 DAO 路线，那么你需要这样做：

```
public class Customer{

    // instead of int userId
    private Integer userId;

    // instead of int activityId
    private Integer activityId;

} 
```

因为在 DAO 模式中，您的实体对象不应该具有行为。您的服务和/或 DAO 必须制作传输对象，或者您可以附加延迟加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:42:24.490

我不确定是否有任何自动化方法。如果没有 ORM，我通常将 getter 定义为单例，其中我的引用类型默认初始化为 null，即我的获取函数将加载原语 + 字符串并将它们保留为 null。一旦我需要`getUser()`，我的 getter 将查看这是否为空，如果是，它将根据客户的 ID 发出另一个选择语句。

# android - 无法访问 Foo 类型的封闭实例

> ID：11034315
> 
> 赞同：2
> 
> 时间：2012-06-14T13:37:45.357
> 
> 标签：android, bluetooth

我正在创建一个程序，用于通过平板电脑/手机连接到嵌入式蓝牙设备。我的代码主要由我得到和发现的不同代码组成。处理蓝牙设备连接的代码主要来自BlueTerm程序的源代码。我试图消除对给定类之一的需要，并开始遇到一些我不知道如何修复的错误。这是我开始活动的代码：

```
public class AndroidBluetooth extends Activity {

/** Called when the activity is first created. */
    private static BluetoothAdapter myBtAdapter;
    private static BluetoothDevice myBtDevice;
    private ArrayAdapter<String> btArrayAdapter;
    private ArrayList<BluetoothDevice> btDevicesFound = new ArrayList<BluetoothDevice>();
    private Button btnScanDevice;
    private TextView stateBluetooth;
    private ListView listDevicesFound;
    private InputStream iStream;
    private OutputStream oStream;
    private BluetoothSocket btSocket;
    private String newDeviceAddress;
    private BroadcastReceiver mReceiver;

    private static BluetoothSerialService mSerialService = null;

    // Intent request codes
    private static final int REQUEST_CONNECT_DEVICE = 1;

    private static TextView mTitle;

    // Message types sent from the BluetoothReadService Handler
    public static final int MESSAGE_STATE_CHANGE = 1;
    public static final int MESSAGE_READ = 2;
    public static final int MESSAGE_WRITE = 3;
    public static final int MESSAGE_DEVICE_NAME = 4;
    public static final int MESSAGE_TOAST = 5;  

    // Name of the connected device
    private String mConnectedDeviceName = null;

    /**
    * Set to true to add debugging code and logging.
    */
    public static final boolean D = true;

    /**
     * Set to true to log each character received from the remote process to the
     * android log, which makes it easier to debug some kinds of problems with
     * emulating escape sequences and control codes.
     */
    public static final boolean LOG_CHARACTERS_FLAG = D && false;

    /**
     * Set to true to log unknown escape sequences.
     */
    public static final boolean LOG_UNKNOWN_ESCAPE_SEQUENCES = D && false;

    private static final String TAG = "ANDROID BLUETOOTH";
    private static final int REQUEST_ENABLE_BT = 2;

    // Member fields
    //private final Handler mHandler;
    private ConnectThread mConnectThread;
    private ConnectedThread mConnectedThread;
    private int mState;

    //private EmulatorView mEmulatorView;

    // Constants that indicate the current connection state
    public static final int STATE_NONE = 0;       // we're doing nothing
    public static final int STATE_LISTEN = 1;     // now listening for incoming connections
    public static final int STATE_CONNECTING = 2; // now initiating an outgoing connection
    public static final int STATE_CONNECTED = 3;  // now connected to a remote device
    public int currentState;

    public boolean customTitleSupported;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        currentState = 0;
        customTitleSupported = requestWindowFeature( Window.FEATURE_CUSTOM_TITLE );
        // Set up window View
        setContentView(R.layout.main);

        stateBluetooth = new TextView(this);
        myBtAdapter = null;
        startBluetooth();
        CheckBlueToothState();

        customTitleBar( getText( R.string.app_name).toString(), stateBluetooth.getText().toString() );
    }

    public void customTitleBar( String left, String right ) {
        if( right.length() > 30 ) right = right.substring( 0, 20 );

        if( customTitleSupported ) {
            getWindow().setFeatureInt( Window.FEATURE_CUSTOM_TITLE, R.layout.customlayoutbar );
            TextView titleTvLeft = (TextView) findViewById( R.id.titleTvLeft );
            TextView titleTvRight = (TextView) findViewById( R.id.titleTvRight );

            titleTvLeft.setText( left );
            titleTvRight.setText( right );

        }
    }

    public boolean onCreateOptionsMenu( Menu menu ) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate( R.menu.option_menu, menu );
        return true;
    }

    public boolean onOptionsItemSelected( MenuItem item ) {
        switch( item.getItemId() ) {
        case R.id.connect:
            startActivityForResult( new Intent( this, DeviceList.class ), REQUEST_CONNECT_DEVICE  );
            return true;
        case R.id.preferences:
            return true;
        default:
            return super.onContextItemSelected( item );
        }
    }

    private void CheckBlueToothState() {
        if( myBtAdapter == null ) {
            stateBluetooth.setText("Bluetooth NOT supported" );
        } else {
            if( myBtAdapter.isEnabled() ) {
                if( myBtAdapter.isDiscovering() ) {
                    stateBluetooth.setText( "Bluetooth is currently " +
                        "in device discovery process." );
                } else {
                    stateBluetooth.setText( "Bluetooth is Enabled." );
                }
            } else {
                stateBluetooth.setText( "Bluetooth is NOT enabled" );
                Intent enableBtIntent = new Intent( BluetoothAdapter.ACTION_REQUEST_ENABLE );
                startActivityForResult( enableBtIntent, REQUEST_ENABLE_BT );
            }
        }
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(D) Log.d( TAG, "onActivityResult " + resultCode);
        switch (requestCode) {

        case REQUEST_CONNECT_DEVICE:

            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {
                // Get the device MAC address
                String address = data.getExtras()
                                 .getString(DeviceList.EXTRA_DEVICE_ADDRESS);
                // Get the BLuetoothDevice object
                BluetoothDevice device = myBtAdapter.getRemoteDevice(address);
                // Attempt to connect to the device
                connect(device);                
            }
            break;

        case REQUEST_ENABLE_BT:
            // When the request to enable Bluetooth returns
            CheckBlueToothState();
        }
    }

    public synchronized void connect(BluetoothDevice device) {
        if (D) Log.d(TAG, "connect to: " + device);

        // Cancel any thread attempting to make a connection
        if (mState == STATE_CONNECTING) {
            if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

        // Start the thread to connect with the given device
        mConnectThread = new ConnectThread(device);
        mConnectThread.start();
        mSerialService.setState(STATE_CONNECTING);
    }

    //In SDK15 (4.0.3) this method is now public as
    //Bluetooth.fetchUuisWithSdp() and BluetoothDevice.getUuids()
    public ParcelUuid[] servicesFromDevice(BluetoothDevice device) {
        try {
            Class cl = Class.forName("android.bluetooth.BluetoothDevice");
            Class[] par = {};
            Method method = cl.getMethod("getUuids", par);
            Object[] args = {};
            ParcelUuid[] retval = (ParcelUuid[]) method.invoke(device, args);
            return retval;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    private final BroadcastReceiver ActionFoundReceiver = new BroadcastReceiver() {
        public void onReceive( Context context, Intent intent ) {
            String action = intent.getAction();
            if( BluetoothDevice.ACTION_FOUND.equals( action ) ) {
                BluetoothDevice btDevice = intent.getParcelableExtra( BluetoothDevice.EXTRA_DEVICE );
                btDevicesFound.add( btDevice );
                btArrayAdapter.add( btDevice.getName() + "\n" + btDevice.getAddress() );
                btArrayAdapter.notifyDataSetChanged();
            }           
        }
    };
    public static void startBluetooth(){
        try {
            myBtAdapter = BluetoothAdapter.getDefaultAdapter();
            myBtAdapter.enable();
        } catch ( NullPointerException ex ) {
            Log.e( "Bluetooth", "Device not available" );
        }
    }

    public static void stopBluetooth() {
        myBtAdapter.disable();
    }
} 
```

从底部开始，该方法中大约有三十行`connect()`是发生错误的地方。该行 `mConnectThread = new ConnectThread( device );` 带有下划线，错误消息如下：

> 无法访问 BluetoothSerialService 类型的封闭实例。必须使用 BluetoothSerialService 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 BluetoothSerialService 的实例）。

这是我目前拥有的 BluetoothSerialService 代码：

```
public class BluetoothSerialService {
// Debugging
private static final String TAG = "BluetoothReadService";
private static final boolean D = true;

private static final UUID SerialPortServiceClass_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

// Member fields
private final BluetoothAdapter mAdapter;
private final Handler mHandler;
private ConnectThread mConnectThread;
private ConnectedThread mConnectedThread;
private int mState;

//private EmulatorView mEmulatorView;

// Constants that indicate the current connection state
public static final int STATE_NONE = 0;       // we're doing nothing
public static final int STATE_LISTEN = 1;     // now listening for incoming connections
public static final int STATE_CONNECTING = 2; // now initiating an outgoing connection
public static final int STATE_CONNECTED = 3;  // now connected to a remote device

/**
 * Constructor. Prepares a new BluetoothChat session.
 * @param context  The UI Activity Context
 * @param handler  A Handler to send messages back to the UI Activity
 */
public BluetoothSerialService(Context context, Handler handler ) { //EmulatorView emulatorView) {
    mAdapter = BluetoothAdapter.getDefaultAdapter();
    mState = STATE_NONE;
    mHandler = handler;
    //mEmulatorView = emulatorView;
}

/**
 * Set the current state of the chat connection
 * @param state  An integer defining the current connection state
 */
public synchronized void setState(int state) {
    if (D) Log.d(TAG, "setState() " + mState + " -> " + state);
    mState = state;

    // Give the new state to the Handler so the UI Activity can update
    mHandler.obtainMessage(AndroidBluetooth.MESSAGE_STATE_CHANGE, state, -1).sendToTarget();
}

/**
 * Return the current connection state. */
public synchronized int getState() {
    return mState;
}

/**
 * Start the chat service. Specifically start AcceptThread to begin a
 * session in listening (server) mode. Called by the Activity onResume() */
public synchronized void start() {
    if (D) Log.d(TAG, "start");

    // Cancel any thread attempting to make a connection
    if (mConnectThread != null) {
        mConnectThread.cancel(); 
        mConnectThread = null;
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {
        mConnectedThread.cancel(); 
        mConnectedThread = null;
    }

    setState(STATE_NONE);
}

/**
 * Start the ConnectThread to initiate a connection to a remote device.
 * @param device  The BluetoothDevice to connect
 */
public synchronized void connect(BluetoothDevice device) {
    if (D) Log.d(TAG, "connect to: " + device);

    // Cancel any thread attempting to make a connection
    if (mState == STATE_CONNECTING) {
        if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    // Start the thread to connect with the given device
    mConnectThread = new ConnectThread(device);
    mConnectThread.start();
    setState(STATE_CONNECTING);
}

/**
 * Start the ConnectedThread to begin managing a Bluetooth connection
 * @param socket  The BluetoothSocket on which the connection was made
 * @param device  The BluetoothDevice that has been connected
 */
public synchronized void connected(BluetoothSocket socket, BluetoothDevice device) {
    if (D) Log.d(TAG, "connected");

    // Cancel the thread that completed the connection
    if (mConnectThread != null) {
        mConnectThread.cancel(); 
        mConnectThread = null;
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {
        mConnectedThread.cancel(); 
        mConnectedThread = null;
    }

    // Start the thread to manage the connection and perform transmissions
    mConnectedThread = new ConnectedThread(socket);
    mConnectedThread.start();

    // Send the name of the connected device back to the UI Activity
    //Message msg = mHandler.obtainMessage(BlueTerm.MESSAGE_DEVICE_NAME);
    Bundle bundle = new Bundle();
    //bundle.putString(BlueTerm.DEVICE_NAME, device.getName());
    //msg.setData(bundle);
    //mHandler.sendMessage(msg);

    setState(STATE_CONNECTED);
}

/**
 * Stop all threads
 */
public synchronized void stop() {
    if (D) Log.d(TAG, "stop");

    if (mConnectThread != null) {
        mConnectThread.cancel(); 
        mConnectThread = null;
    }

    if (mConnectedThread != null) {
        mConnectedThread.cancel(); 
        mConnectedThread = null;
    }

    setState(STATE_NONE);
}

/**
 * Write to the ConnectedThread in an unsynchronized manner
 * @param out The bytes to write
 * @see ConnectedThread#write(byte[])
 */
public void write(byte[] out) {
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED) return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.write(out);
}

/**
 * Indicate that the connection attempt failed and notify the UI Activity.
 */
private void connectionFailed() {
    setState(STATE_NONE);

    // Send a failure message back to the Activity
    //Message msg = mHandler.obtainMessage(BlueTerm.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    //bundle.putString(BlueTerm.TOAST, "Unable to connect device");
    //msg.setData(bundle);
    //mHandler.sendMessage(msg);
}

/**
 * Indicate that the connection was lost and notify the UI Activity.
 */
private void connectionLost() {
    setState(STATE_NONE);

    // Send a failure message back to the Activity
    //Message msg = mHandler.obtainMessage(BlueTerm.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    //bundle.putString(BlueTerm.TOAST, "Device connection was lost");
    //msg.setData(bundle);
    //mHandler.sendMessage(msg);
}

/**
 * This thread runs while attempting to make an outgoing connection
 * with a device. It runs straight through; the connection either
 * succeeds or fails.
 */
public class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        mmDevice = device;
        BluetoothSocket tmp = null;

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
            tmp = device.createRfcommSocketToServiceRecord(SerialPortServiceClass_UUID);
        } catch (IOException e) {
            Log.e(TAG, "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectThread");
        setName("ConnectThread");

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            connectionFailed();
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() socket during connection failure", e2);
            }
            // Start the service over to restart listening mode
            //BluetoothSerialService.this.start();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothSerialService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice);
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }
}

/**
 * This thread runs during a connection with a remote device.
 * It handles all incoming and outgoing transmissions.
 */
public class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        Log.d(TAG, "create ConnectedThread");
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                //mEmulatorView.write(buffer, bytes);
                // Send the obtained bytes to the UI Activity
                //mHandler.obtainMessage(BlueTerm.MESSAGE_READ, bytes, -1, buffer).sendToTarget();

                String a = buffer.toString();
                a = "";
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                break;
            }
        }
    }

    /**
     * Write to the connected OutStream.
     * @param buffer  The bytes to write
     */
    public void write(byte[] buffer) {
        try {
            mmOutStream.write(buffer);

            // Share the sent message back to the UI Activity
            //mHandler.obtainMessage(BlueTerm.MESSAGE_WRITE, buffer.length, -1, buffer)
                    //.sendToTarget();
        } catch (IOException e) {
            Log.e(TAG, "Exception during write", e);
        }
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T13:53:10.440

BluetoothSerialService 是内部类吗？如果是这样，做它`static`。

看到这个帖子

[无法访问 Server 类型的封闭实例](https://stackoverflow.com/questions/7901941/no-enclosing-instance-of-type-server-is-accessible)

# ruby - Sinatra 或 Rack 应用程序能否确定它是使用 Apache 还是 Thin 运行？

> ID：11034317
> 
> 赞同：0
> 
> 时间：2012-06-14T13:37:46.753
> 
> 标签：ruby, sinatra, rack

我正在尝试对 Sinatra 应用程序进行一些愚蠢的自动配置，这将允许从不同的子 URI 使用它，具体取决于它是与 Apache 和 Passenger 一起运行，还是与 Thin Web 服务器一起运行。

所以我的问题是：是否可以从 Sinatra 应用程序内部找出运行它的 Web 服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T15:29:08.490

您无法（据我所知）查看它是否在 Apache 上运行，但您可以检查它是否在Passenger 上运行：

```
if defined?(PhusionPassenger)
  # We are running Passenger!
end 
```

您应该能够为 Thin 做同样的事情：

```
if defined?(Thin)
  # We are running Thin!
end 
```

# .net - DotLess 不导入 CSS 文件

> ID：11034320
> 
> 赞同：1
> 
> 时间：2012-06-14T13:37:52.197
> 
> 标签：.net, css, less, dotless

我正在尝试在项目中使用[DotLess](http://www.dotlesscss.org/)，但遇到了一个似乎无法解决的问题。我正在尝试通过在我自己的自定义文件中使用 LESS 混合来扩展预先存在的 CSS 文件（实际上来自 JQuery UI）。

在 jquery-ui-1.8.20.custom.css 中：

```
.ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: 1px solid #79b7e7; background: #d0e5f5 url(images/ui-bg_glass_75_d0e5f5_1x400.png) 50% 50% repeat-x; font-weight: bold; color: #1d5987; } 
```

以及我的 custom.less 文件的相关部分：

```
@import "./jquery-ui-1.8.20.custom.css";

.sortable-list li:hover {
    .ui-state-hover;
} 
```

当我尝试使用以下 DotLess 命令编译它时：

```
.\dotless-compiler -m [LESS_FILE_PATH]\custom.less .\custom.generated.css 
```

我收到以下错误消息：

```
.ui-state-hover is undefined on line 92...
[91]: .sortable-list li:hover {
[92]:     .ui-state-hover;
  ----^
[93]: }[Done] 
```

a) 有谁知道我是否缺少命令行编译器的参数？（它的*文档*真的很好......）

b) 如果没有，LESS 是否存在一些无法处理我所描述的情况的固有缺点？扩展您无法触及的现有 CSS 文件似乎是一个非常常见的用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:14:14.360

将导入的文件扩展名更改为 .less - 否则它假定它实际上是 css 并逐字导入文本，而不进行任何更少的处理。

如果您运行不带参数的无点编译器，它会显示所有允许的参数。一个是 -a --import-all-less - 将每个导入视为更少，即使以 .css 结尾

所以你可以尝试而不是重命名文件。

然后你可能会发现有些东西需要转义，但手指交叉它会起作用。

# java - 如何使用 EclipseLink 在只有唯一值的列中找到值？

> ID：11034322
> 
> 赞同：14
> 
> 时间：2012-06-14T13:37:53.087
> 
> 标签：java, sql, jpa, eclipselink

您可以`EntityManager.find(Class entityClass, Object primaryKey)`使用主键查找特定行。

但是如何在只有唯一值且不是主键的列中找到一个值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-14T13:50:33.750

您可以将适当的 JPQL 与[TypedQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/TypedQuery.html)一起使用。

```
try {
    TypedQuery<Bean> tq = em.createQuery("from Bean WHERE column=?", Bean.class);
    Bean result = tq.setParameter(1, "uniqueKey").getSingleResult();
} catch(NoResultException noresult) {
    // if there is no result
} catch(NonUniqueResultException notUnique) {
    // if more than one result
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-14T13:45:04.333

例如，像这样：

```
List<T> results = em.createQuery("SELECT t FROM TABLE t", T.class)
                        .getResultList(); 
```

带参数：

```
List<T> results = em.createQuery("SELECT t FROM TABLE t where t.value = :value1")
                        .setParameter("value1", "some value").getResultList(); 
```

对于单个结果替换`getResultList()`为`getSingleResult()`：

```
T entity = em.createQuery("SELECT t FROM TABLE t where t.uniqueKey = :value1")
                 .setParameter("value1", "KEY1").getSingleResult(); 
```

另一种方法是使用 Criteria API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T14:26:02.160

您可以使用查询，JPQL、Criteria 或 SQL。

不确定您是否关心获取类似于 find() 的缓存命中。在 EclipseLink 2.4 中添加了缓存索引，以允许您索引非主键字段并从 JPQL 或 Criteria 获取缓存命中。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Indexes](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Indexes)

在 2.4 之前，您可以使用内存查询来查询非 id 字段的缓存。

# c - 对未定义的错误引用有问题

> ID：11034323
> 
> 赞同：1
> 
> 时间：2012-06-14T13:37:56.097
> 
> 标签：c, blackberry-playbook, qnx, oggvorbis

我知道有很多与此特定错误相关的帖子，但在我的情况下似乎没有任何帮助，所以请原谅我在谷歌研究近 2 天后发布问题:(

我正在为黑莓剧本开发游戏，对于声音/音频，我与 OggVorbis 一起使用 openal，我从以下来源下载了 OggVorbis 的黑莓端口

[https://github.com/blackberry/OggVorbis](https://github.com/blackberry/OggVorbis)

但是它与游戏的集成正在产生问题，例如它说未定义对 vorbisfile.h 中的 ov_clear 的引用，并且 vorbisfile.c 已编译，我可以在 libvorbis.a qnx momentics IDE 中看到 ov_clear，我已经在我的游戏中添加了 libvorbis 但仍然我收到这些错误

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:56:59.937

不知何故，我确实弄清楚了问题所在。我是一名 C#.net 程序员，您添加对库项目或主项目的引用并不重要，但在这里您不能在其他静态库中添加对静态库的引用，这就是这些错误的原因. 这就是我的理解可能有人可以以更详细的方式指导我。

问候阿山

# javadoc - Javadoc 无法识别 doctitle 选项/标志

> ID：11034326
> 
> 赞同：4
> 
> 时间：2012-06-14T13:38:09.483
> 
> 标签：javadoc

我正在通过 gradle 使用我的 doclet 运行 javadoc，当我运行我的 javadoc/doclet 任务时，我收到下一个错误：

```
error - invalid flag: -doctitle 
```

之后，下一个使用表

```
usage: javadoc [options] [packagenames] [sourcefiles] [@files]
-overview <file>          Read overview documentation from HTML file
-public                   Show only public classes and members
-protected                Show protected/public classes and members (default)
-package                  Show package/protected/public classes and members
-private                  Show all classes and members
-help                     Display command line options and exit
-doclet <class>           Generate output via alternate doclet
-docletpath <path>        Specify where to find doclet class files
-sourcepath <pathlist>    Specify where to find source files
-classpath <pathlist>     Specify where to find user class files
-exclude <pkglist>        Specify a list of packages to exclude
-subpackages <subpkglist> Specify subpackages to recursively load
-breakiterator            Compute 1st sentence with BreakIterator
-bootclasspath <pathlist> Override location of class files loaded
                          by the bootstrap class loader
-source <release>         Provide source compatibility with specified release
-extdirs <dirlist>        Override location of installed extensions
-verbose                  Output messages about what Javadoc is doing
-locale <name>            Locale to be used, e.g. en_US or en_US_WIN
-encoding <name>          Source file encoding name
-quiet                    Do not display status messages
-J<flag>                  Pass <flag> directly to the runtime system 
```

有没有人知道为什么 Javadoc 不接受该标志？理论上，我从 jdk1.6 的 tools.jar 运行 javadoc。我认为 javadoc 总是会接受该 doctitle 选项。感谢您的时间！

**编辑**：那个 doctitle 选项是标准 Doclet 的一部分，所以看起来我无法访问标准 Doclet 选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:20:32.830

编辑：

知道了！问题出在 Doclet 本身。我没有扩展标准 Doclet（“public class MyDoclet extends Standard {”），因此标准 Doclet 中的标志不可用（并且 doctitle 是标准 Doclet 标志的一部分）。

感谢 Paulo 让我“重新思考”我的回答 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T00:12:33.287

您可以在 javadoc 任务上将任务局部变量 'title' 设置为空

```
task javadocTask(type: Javadoc) {
    title = ""
    //Other items like source and options
} 
```

或者，

```
javadocTask.title = "" 
```

**为什么**

Gradle 在 javadoc 任务中设置局部变量“title”，然后用于填充 -doctitle 和 -windowtitle 参数。如果它为空，它们将不会填充字段，您可以避免此问题。

有趣的是，标题似乎是由 java 插件填充的，所以如果你从一个没有 java 的项目（比如作为一个聚合器项目）运行 javadoc，你不会遇到这个问题，但是如果你将 javadoc 生成移动到一个你会的java项目。

注意：`title = ""`两者`title = null`都适用于最新版本的 gradle。这可能是因为 gradle 两者都知道`""`并且`null`是空的。但是，在旧版本的 gradle 上，有报告说使用`null` 不工作，但一个空字符串可以。

# php - 如何在 php 中定义类的属性？

> ID：11034330
> 
> 赞同：6
> 
> 时间：2012-06-14T13:38:28.810
> 
> 标签：php, database, class, function

根据我阅读的演练内容，我收到了不同的回复，

我定义了一个有 2 个函数的类。

我希望这两个函数都可以访问数据库凭据

目前，除非我将变量复制并粘贴到每个函数中，否则此代码不起作用。

我在这里做错了什么？

```
<?php
class database  {
function connect()  {
var $username="my_username";
var $servername="localhost";
var $database="my_DB";
var $password="An_Awesome_Password";
var $con;
    $con = mysql_connect($servername,$username,$password);

    if (!$con)  {
    die('Could not connect: ' . mysql_error());
                }
                    }

function disconnect()   {
    $con = mysql_connect($servername,$username,$password);

    if (!$con)  {
    die('Could not connect: ' . mysql_error());
                }
    mysql_close($con);
                        }
            }
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T13:40:31.407

这个块：

```
var $username="my_username";
var $servername="localhost";
var $database="my_DB";
var $password="An_Awesome_Password";
var $con; 
```

应该在 之前`function()`，而不是在里面；但仍在`class`定义之内。

添加显式可见性是一种很好的形式；私人开始：

```
class database  {
    private $username="my_username";
    private $servername="localhost";
    // etc. etc. 
```

然后，函数将它们称为：

```
$this->username;
$this->con;
etc. 
```

* * *

理想情况下，您将希望构造函数传入这些凭据：

```
private $servername;
private $database;
private $username;
private $password;
private $con;

function __construct($host, $user, $password, $dbname)
{
    $this->servername = $host;
    $this->username = $user;
    $this->password = $password;
    $this->database = $dbname;
} 
```

* * *

更理想的是，了解[PDO](http://www.php.net/pdo)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:39:58.843

要访问对象属性，您需要使用 $this->property_name

```
 $this->con = mysql_connect($this->servername,$this->username,$this->password); 
```

类代码如下所示：

```
<?php
class database  {
    var $username="my_username";
    var $servername="localhost";
    var $database="my_DB";
    var $password="An_Awesome_Password";
    var $con;

    function connect()  {

        $this->con = mysql_connect($this->servername,$this->username,$this->password);

        if (!$this->con)  {
            die('Could not connect: ' . mysql_error());
        }
    }

    function disconnect()   {
        $this->con = mysql_connect($this->servername,$this->username,$this->password);

        if (!$this->con)  {
            die('Could not connect: ' . mysql_error());
        }
        mysql_close($this->con);
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T13:41:14.053

撇开代码样式不谈，您需要在类方法*之外但仍在类内部定义变量。*就像是：

```
class database {
    var $username = "my_username";
    // etc.

    function connect() {
        // connect code
        // $this->username == "my_username"
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T13:42:23.583

您必须使用函数外部的变量并使用[构造](http://at.php.net/construct)和[破坏](http://at.php.net/destruct)函数，它们将确保您正确打开和关闭连接

```
class database  {
    private $username = 'username';
    private $servername = "localhost";
    private $database = "my_DB";
    private $password = "An_Awesome_Password";
    private $conId;

   public function __construct(){
        $con = mysql_connect($this->servername, $this->username, $this->password);
        $this->conId = $con;
        //..........
    }

    public function __destruct(){
        mysql_close($this->conId);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T13:46:14.593

为类属性和方法分配其范围是一种很好的做法，可以是“公共”、“受保护”或“私有”，而不是使用“var”。此外，类属性在类内分配，但在任何函数之外（也称为“方法”）。这是你的类重构：

```
class database  {
    private $username="my_username";
    private $servername="localhost";
    private $database="my_DB";
    private $password="An_Awesome_Password";
    private $con;

    public function connect()  {
        if (!$this->con) {
            $this->con = mysql_connect(
                    $this->servername, $this->username, $this->password);

            if (!$this->con)  {
                die('Could not connect: ' . mysql_error());
            }
        }
    }

    public function disconnect()   {
        if ($this->con)  {
            mysql_close($this->con);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T13:50:56.107

变量只能在创建它们的范围内调用。

如果在函数中创建变量，它只能在该函数中使用，但在梯形图上定义的越高，可用的变量就越多。

全球公私功能

# javascript - 如何在javascript中删除cookie

> ID：11034334
> 
> 赞同：0
> 
> 时间：2012-06-14T13:38:38.483
> 
> 标签：javascript, html

我正在尝试使用此功能删除 cookie，但它不起作用..

```
deleteAllCookies();

function deleteAllCookies() {
    var cookies = document.cookie.split(";");

    for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
} 
```

为什么 cookie 在我的浏览器中，即使在我激活该功能之后...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:57:02.973

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

来源：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-12T08:28:34.980

在 JavaScript 中删除 cookie 的标准方法是将 cookie 的值覆盖为空值，并将过期日期更改为过去的日期。像这样的东西。

**例如**，这应该删除`acctoken`cookie。

```
document.cookie = "acctoken=; expires=Thu, 01 Jan 1970 00:00:00 UTC;" 
```

**如果您的 cookie 位于不同的域或子域中**，那么您必须在覆盖的 cookie 中明确指定域/子域。

```
document.cookie = "acctoken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain=example.com" 
```

更多，此[答案](https://stackoverflow.com/questions/27917245/cannot-delete-cookie-by-using-javascript/57002934#57002934)中的上下文。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-10-07T13:32:07.850

```
var cookies = document.cookie.split(";");

for (var i = 0; i < cookies.length; i++) {
    var cookie = cookies[i];
    var eqPos = cookie.indexOf("=");
    var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
    document.cookie = cname + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT ; path = /;"; 
```

上面的答案是正确的，但不要忘记添加路径

# android - Android：Sqlite 数据库错误

> ID：11034337
> 
> 赞同：-6
> 
> 时间：2012-06-14T13:38:44.333
> 
> 标签：android, sqlite

我正在为数据库编写代码以获取包含三个字段（即`Truck_id`、`employee_id`和）的活动中的数据`password`。

我遇到了一些错误；以下是我的代码：请帮助我，因为我是 android 新手：

```
public class DataBaseHelper extends SQLiteOpenHelper {

// default system path of your application database.
// private static String DB_PATH = "/data/data/com.tanzanite.operasoft/databases/";

private static String DB_PATH = "/sdcard/";

private static String DB_NAME = "snowman";

private static SQLiteDatabase myDataBase;

private Context myContext;

private DataBaseHelper dbHelper;

/**
 * Constructor Takes and keeps a reference of the passed context in order to
 * access to the application assets and resources.
 * 
 * @param context
 */
public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);

    this.myContext = context;
}

public void TestAdapter(Context context)
{
    this.myContext= context;
}

public static final String TABLE_NAME = "Login";
private static final int DATABASE_VERSION= 2;

private static final String DATABASE_NAME="snowman";

public static final String COLUMN_ID = "_id";
public static final String COLUMN_NAME = "employee_id";  
public static final String COLUMN_TRUCKID = "truck_id";

public static final int NAME_COLUMN=1;
public static final String KEY_CREATION_DATE="creation_date";
public static final String KEY_TASK="task";

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 * */

private static final String DATABASE_CREATE = "create table "
        + TABLE_NAME + "( " + COLUMN_ID + " integer primary key autoincrement, " 
                            + COLUMN_TRUCKID+ " text not null, "
                            + COLUMN_NAME+ " text not null, )";

public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {

        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        //this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

public DataBaseHelper open() throws SQLException
{   
        //myDataBase = dbHelper.getWritableDatabase();
        return this;
}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {
        String myPath = DB_PATH + DB_NAME;
        File dbfile = new File(myPath ); 
         SQLiteDatabase.openOrCreateDatabase(dbfile, null);

        //throw new Error("Database does't exist yet.");

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[128];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    return;

}

public String logindetails()
{
    open();
    Cursor c=myDataBase.query(TABLE_NAME,
             new String[]{COLUMN_NAME,
                          COLUMN_TRUCKID,

                          },null, null, null, null, null);
    String b="";

    c.close();
    myDataBase.close();
    return b;
}   

public void insert(String a, String b){

    ContentValues vals = new ContentValues();
    vals.put(COLUMN_TRUCKID, "CM-3456");
    vals.put(COLUMN_NAME,"Sachin");
    //vals.put(KEY_PIN, "12345");

    vals.put(COLUMN_TRUCKID, "HR-6788");
    vals.put(COLUMN_NAME,"Sameer");
    //vals.put(KEY_PIN, "54321");

    vals.put(COLUMN_ID, "AM-6123");
    vals.put(COLUMN_NAME,"Sahu");
    //vals.put(KEY_PIN, "3452");

    myDataBase.close();

}

public Cursor fetchdata()
{
    open();
    Cursor c=myDataBase.query(TABLE_NAME,
         new String[]{COLUMN_NAME,
            COLUMN_TRUCKID,

                      },null, null, null, null, null);
    c.moveToLast();
    myDataBase.close();
    return c;
}

public static SQLiteDatabase getDataBase() {
    return myDataBase;

}

@Override
public synchronized void close() {

    if (myDataBase != null)
        myDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {
    try{

    db.execSQL(DATABASE_CREATE);
    }catch(Exception e)
    {
        Log.v( "Press_Data","exception in table created");
    } 
```

}

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

错误是..

```
06-14 18:22:27.233: D/dalvikvm(25087): GC_CONCURRENT freed 757K, 48% free 3547K/6727K, external 1625K/2137K, paused 4ms+4ms
06-14 18:22:27.393: I/net.osmand(25087): BaseOsmandRender Init render default for 738 ms
06-14 18:22:27.523: D/dalvikvm(25087): GC_EXTERNAL_ALLOC freed 123K, 46% free 3635K/6727K, external 1625K/2137K, paused 62ms
06-14 18:22:27.633: D/AndroidRuntime(25087): Shutting down VM
06-14 18:22:27.633: W/dalvikvm(25087): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-14 18:22:27.663: E/AndroidRuntime(25087): FATAL EXCEPTION: main
06-14 18:22:27.663: E/AndroidRuntime(25087): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tanzanite.operasoft/com.tanzanite.operasoft.activity.Sw_LoginScreenActivity}: java.lang.NullPointerException
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.os.Looper.loop(Looper.java:130)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.app.ActivityThread.main(ActivityThread.java:3683)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at java.lang.reflect.Method.invokeNative(Native Method)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at java.lang.reflect.Method.invoke(Method.java:507)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at dalvik.system.NativeStart.main(Native Method)
06-14 18:22:27.663: E/AndroidRuntime(25087): Caused by: java.lang.NullPointerException
06-14 18:22:27.663: E/AndroidRuntime(25087):    at com.tanzanite.operasoft.database.DataBaseHelper.fetchdata(DataBaseHelper.java:222)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at com.tanzanite.operasoft.activity.Sw_LoginScreenActivity.onCreate(Sw_LoginScreenActivity.java:52)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-14 18:22:27.663: E/AndroidRuntime(25087):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-14 18:22:27.663: E/AndroidRuntime(25087):    ... 11 more
06-14 18:28:37.603: D/dalvikvm(26440): GC_CONCURRENT freed 757K, 48% free 3541K/6727K, external 1625K/2137K, paused 3ms+3ms
06-14 18:28:37.773: I/net.osmand(26440): BaseOsmandRender Init render default for 611 ms
06-14 18:28:37.873: D/dalvikvm(26440): GC_EXTERNAL_ALLOC freed 122K, 46% free 3633K/6727K, external 1625K/2137K, paused 51ms
06-14 18:28:38.013: D/AndroidRuntime(26440): Shutting down VM
06-14 18:28:38.013: W/dalvikvm(26440): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-14 18:28:38.033: E/AndroidRuntime(26440): FATAL EXCEPTION: main
06-14 18:28:38.033: E/AndroidRuntime(26440): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tanzanite.operasoft/com.tanzanite.operasoft.activity.Sw_LoginScreenActivity}: java.lang.NullPointerException
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.os.Looper.loop(Looper.java:130)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.app.ActivityThread.main(ActivityThread.java:3683)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at java.lang.reflect.Method.invokeNative(Native Method)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at java.lang.reflect.Method.invoke(Method.java:507)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at dalvik.system.NativeStart.main(Native Method)
06-14 18:28:38.033: E/AndroidRuntime(26440): Caused by: java.lang.NullPointerException
06-14 18:28:38.033: E/AndroidRuntime(26440):    at com.tanzanite.operasoft.database.DataBaseHelper.fetchdata(DataBaseHelper.java:222)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at com.tanzanite.operasoft.activity.Sw_LoginScreenActivity.onCreate(Sw_LoginScreenActivity.java:52)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-14 18:28:38.033: E/AndroidRuntime(26440):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-14 18:28:38.033: E/AndroidRuntime(26440):    ... 11 more
06-14 18:40:55.423: D/dalvikvm(29844): GC_CONCURRENT freed 759K, 48% free 3553K/6727K, external 1625K/2137K, paused 5ms+3ms
06-14 18:40:55.633: I/net.osmand(29844): BaseOsmandRender Init render default for 841 ms
06-14 18:40:55.773: D/dalvikvm(29844): GC_EXTERNAL_ALLOC freed 122K, 46% free 3633K/6727K, external 1625K/2137K, paused 58ms
06-14 18:40:55.913: D/AndroidRuntime(29844): Shutting down VM
06-14 18:40:55.913: W/dalvikvm(29844): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-14 18:40:55.943: E/AndroidRuntime(29844): FATAL EXCEPTION: main
06-14 18:40:55.943: E/AndroidRuntime(29844): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tanzanite.operasoft/com.tanzanite.operasoft.activity.Sw_LoginScreenActivity}: java.lang.NullPointerException
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.os.Looper.loop(Looper.java:130)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.app.ActivityThread.main(ActivityThread.java:3683)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at java.lang.reflect.Method.invokeNative(Native Method)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at java.lang.reflect.Method.invoke(Method.java:507)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at dalvik.system.NativeStart.main(Native Method)
06-14 18:40:55.943: E/AndroidRuntime(29844): Caused by: java.lang.NullPointerException
06-14 18:40:55.943: E/AndroidRuntime(29844):    at com.tanzanite.operasoft.database.DataBaseHelper.fetchdata(DataBaseHelper.java:223)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at com.tanzanite.operasoft.activity.Sw_LoginScreenActivity.onCreate(Sw_LoginScreenActivity.java:52)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-14 18:40:55.943: E/AndroidRuntime(29844):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-14 18:40:55.943: E/AndroidRuntime(29844):    ... 11 more
06-14 19:12:06.293: D/dalvikvm(5930): GC_CONCURRENT freed 763K, 48% free 3549K/6727K, external 1625K/2137K, paused 4ms+5ms
06-14 19:12:06.443: I/net.osmand(5930): BaseOsmandRender Init render default for 689 ms
06-14 19:12:06.553: D/dalvikvm(5930): GC_EXTERNAL_ALLOC freed 120K, 47% free 3632K/6727K, external 1625K/2137K, paused 64ms
06-14 19:12:06.703: D/AndroidRuntime(5930): Shutting down VM
06-14 19:12:06.703: W/dalvikvm(5930): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-14 19:12:06.723: E/AndroidRuntime(5930): FATAL EXCEPTION: main
06-14 19:12:06.723: E/AndroidRuntime(5930): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tanzanite.operasoft/com.tanzanite.operasoft.activity.Sw_LoginScreenActivity}: java.lang.NullPointerException
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.os.Looper.loop(Looper.java:130)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at java.lang.reflect.Method.invokeNative(Native Method)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at java.lang.reflect.Method.invoke(Method.java:507)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at dalvik.system.NativeStart.main(Native Method)
06-14 19:12:06.723: E/AndroidRuntime(5930): Caused by: java.lang.NullPointerException
06-14 19:12:06.723: E/AndroidRuntime(5930):     at com.tanzanite.operasoft.database.DataBaseHelper.fetchdata(DataBaseHelper.java:224)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at com.tanzanite.operasoft.activity.Sw_LoginScreenActivity.onCreate(Sw_LoginScreenActivity.java:49)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-14 19:12:06.723: E/AndroidRuntime(5930):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-14 19:12:06.723: E/AndroidRuntime(5930):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:14:54.910

从你的日志我看到

```
Caused by: java.lang.NullPointerException 
06-14 19:12:06.723: E/AndroidRuntime(5930): at com.tanzanite.operasoft.database.DataBaseHelper.fetchdata(DataBaseHelper.java:224) 
06-14 19:12:06.723: E/AndroidRuntime(5930): at com.tanzanite.operasoft.activity.Sw_LoginScreenActivity.onCreate(Sw_LoginScreenActivity.java:49) 
```

因此，您需要使用调试器并设置断点

Sw_LoginScreenActivity.java - 第 49 行（我认为您尝试获取数据）

DataBaseHelper.java - 在 224 - 你尝试从 myDataBase 获取数据

```
public Cursor fetchdata()
{
    open();
    Cursor c=myDataBase.query(TABLE_NAME,
         new String[]{COLUMN_NAME,
            COLUMN_TRUCKID,

                      },null, null, null, null, null);
    c.moveToLast();
    myDataBase.close();
    return c;
} 
```

但是，在 open() 方法中

```
public DataBaseHelper open() throws SQLException
{   
        //myDataBase = dbHelper.getWritableDatabase();
        return this;
} 
```

您在创建数据库实例时注释行 - 因此下一行“Cursor c=myDataBase.query(TABLE_NAME”) 不正确，因为 myDataBase 为空。

您没有打开与数据库的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:15:31.850

根据logcat，您的问题出在此处（空指针异常）：

```
public String logindetails() 
{ 
    open(); 
    Cursor c=myDataBase.query(TABLE_NAME, new String[]{COLUMN_NAME, COLUMN_TRUCKID, },
        null, null, null, null, null); 
    String b=""; 
    c.close(); 
    myDataBase.close(); 
    return b; 
} 
```

我看到几个问题...

首先，您不应该尝试使用 db 助手的方法打开/关闭数据库。db 应该由另一个实例化 dbhelper 的类打开和关闭，并使用实例化的类方法打开和关闭 db。

其次，您的表格列数组列表中有一个额外的逗号。

第三，您似乎无缘无故地调用了光标……您得到了它并且不对其进行任何操作，然后将其关闭。

第四，你设置一个空字符串，什么都不做，然后返回它。

我认为它应该看起来更像这样：

在您的呼叫课程中：

```
private DatabaseHelper mDbHelper;

mDbHelper = new DatabaseHelper(this);  // instantiate the helper
mDbHelper.openDataBase();    // open the db
String ldetails = mDbHelper.logindetails();  // get logindetails string from db 
```

在您的 DatabaseHelper 类中：

```
public String logindetails() 
{ 
    String b=""; 
    Cursor c=myDataBase.query(TABLE_NAME, new String[]{COLUMN_NAME, COLUMN_TRUCKID, },
        null, null, null, null, null); 
    c.moveToFirst();
    // Insert code to get data from cursor to string
    c.close(); 
    return b; 
} 
```

# multithreading - 如何对 Linux 线程程序进行基准测试？

> ID：11034342
> 
> 赞同：2
> 
> 时间：2012-06-14T13:39:03.630
> 
> 标签：multithreading, performance, benchmarking, qemu

我正在尝试比较线程程序的性能（在 Linux 上）。由于程序使用不同的线程同步方式和不同的锁粒度，在共享服务器或桌面上运行程序会不好，因为其他任务可能会干扰我的程序的调度。我没有专门的主机，所以我认为使用 qemu 会是一个不错的选择。

我想知道的是：

*   这项任务有其他选择吗？
*   我想如果我需要的话，没有办法重现客户 Linux 系统在 qemu 上完成的调度？（假设我的程序异常倾斜或快速运行——我想知道我是否可以再次运行它，但对其线程保持完全相同的调度）。或者有什么办法吗？

# c# - 鼠标滚轮事件与悬停控件一起使用

> ID：11034348
> 
> 赞同：11
> 
> 时间：2012-06-14T13:39:23.163
> 
> 标签：c#, winforms, scroll, mousewheel

在我的 C# 3.5 Windows 窗体应用程序中，我有几个 SplitContainer。每个内部都有一个列表控件（码头填充）。当焦点位于其中一个控件上并且我移动鼠标滚轮时，现在焦点所在的列表将滚动。

我的任务是滚动当前由鼠标悬停的列表，而不是选中的列表。是否可以在 Windows 窗体中使用？如果没有，是否可以使用 PInvoke？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T13:55:47.983

看起来您可以使用`IMessageFilter`和 PInvoke 来处理这个问题。可以在[将鼠标滚轮事件重定向到未聚焦的 Windows 窗体控件](http://www.codeproject.com/Articles/280310/Redirect-Mouse-Wheel-Events-To-Unfocused-Windows-F)中找到 VB 中的示例。您应该能够轻松地将其转换为 C#。

兴趣点

此类对给定任务使用以下技术：

*   侦听控件的 MouseEnter 和 MouseLeave 事件以确定鼠标指针何时悬停在控件上。
*   实现 IMessageFilter 以捕获应用程序中的 WM_MOUSEWHEEL 消息。
*   PInvoke Windows API 调用 SendMessage 将 WM_MOUSEWHEEL 消息重定向到控件的句柄。
*   IMessageFilter 对象实现为 MouseWheelRedirector 类的单例，并由共享成员 Attach、Detach 和 Active 访问。

使用[VB.NET 到 C# 转换器](http://www.developerfusion.com/tools/convert/vb-to-csharp/)，您最终会得到以下结果：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;

using System.Windows.Forms;
using System.Runtime.InteropServices;

public class MouseWheelRedirector : IMessageFilter
{
    private static MouseWheelRedirector instance = null;
    private static bool _active = false;
    public static bool Active
    {
       get { return _active; }
       set
       { 
          if (_active != value) 
          {
             _active = value;
             if (_active)
             {
                if (instance == null)
                {
                    instance = new MouseWheelRedirector();
                }
                Application.AddMessageFilter(instance);
             }
             else
             {
                if (instance != null)
                {
                   Application.RemoveMessageFilter(instance);
                }
             }
          }
       }
    }

    public static void Attach(Control control)
    {
       if (!_active)
          Active = true;
       control.MouseEnter += instance.ControlMouseEnter;
       control.MouseLeave += instance.ControlMouseLeaveOrDisposed;
       control.Disposed += instance.ControlMouseLeaveOrDisposed;
    }

    public static void Detach(Control control)
    {
       if (instance == null)
          return;
       control.MouseEnter -= instance.ControlMouseEnter;
       control.MouseLeave -= instance.ControlMouseLeaveOrDisposed;
       control.Disposed -= instance.ControlMouseLeaveOrDisposed;
       if (object.ReferenceEquals(instance.currentControl, control))
          instance.currentControl = null;
    }

    private MouseWheelRedirector()
    {
    }

    private Control currentControl;
    private void ControlMouseEnter(object sender, System.EventArgs e)
    {
       var control = (Control)sender;
       if (!control.Focused)
       {
          currentControl = control;
       }
       else
       {
          currentControl = null;
       }
    }

    private void ControlMouseLeaveOrDisposed(object sender, System.EventArgs e)
    {
       if (object.ReferenceEquals(currentControl, sender))
       {
          currentControl = null;
       }
    }

    private const int WM_MOUSEWHEEL = 0x20a;
    public bool PreFilterMessage(ref System.Windows.Forms.Message m)
    {
       if (currentControl != null && m.Msg == WM_MOUSEWHEEL)
       {
          SendMessage(currentControl.Handle, m.Msg, m.WParam, m.LParam);
          return true;
       }
       else
       {
          return false;
       }
    }

    [DllImport("user32.dll", SetLastError = false)]
    private static extern IntPtr SendMessage(
       IntPtr hWnd, int msg, IntPtr wParam, IntPtr lParam);
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T16:08:53.357

我有类似的问题并找到了这个线程......所以将我迟来的答案发布给可能找到这个线程的其他人。就我而言，我只希望鼠标滚轮事件转到光标下的任何控件...就像右键单击一样（如果右键单击转到焦点控件而不是光标下的控件，那将是令人困惑的...我认为鼠标滚轮也是如此，除非我们已经习惯了）。

无论如何，答案非常简单。只需向您的应用程序添加一个 PreFilterMessage 并将鼠标滚轮事件重定向到鼠标下的控件：

```
 public bool PreFilterMessage(ref Message m)
    {
        switch (m.Msg)
        {
            case WM_MOUSEWHEEL:   // 0x020A
            case WM_MOUSEHWHEEL:  // 0x020E
                IntPtr hControlUnderMouse = WindowFromPoint(new Point((int)m.LParam));
                if (hControlUnderMouse == m.HWnd)
                    return false; // already headed for the right control
                else
                {
                    // redirect the message to the control under the mouse
                    SendMessage(hControlUnderMouse, m.Msg, m.WParam, m.LParam);
                    return true;
                } 
             default: 
                return false; 
           } 
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-14T09:22:57.387

这是**Brian Kennedy**的回答，并附有**Hank Schultz**评论：

首先你应该让一个类实现**IMessageFilter**：

```
public class MessageFilter : IMessageFilter
{
    private const int WM_MOUSEWHEEL = 0x020A;
    private const int WM_MOUSEHWHEEL = 0x020E;

    [DllImport("user32.dll")]
    static extern IntPtr WindowFromPoint(Point p);
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);

    public bool PreFilterMessage(ref Message m)
    {
        switch (m.Msg)
        {
            case WM_MOUSEWHEEL:
            case WM_MOUSEHWHEEL:
                IntPtr hControlUnderMouse = WindowFromPoint(new Point((int)m.LParam));
                if (hControlUnderMouse == m.HWnd)
                {
                    //Do nothing because it's already headed for the right control
                    return false;
                }
                else
                {
                    //Send the scroll message to the control under the mouse
                    uint u = Convert.ToUInt32(m.Msg);   
                    SendMessage(hControlUnderMouse, u, m.WParam, m.LParam);
                    return true;
                }
            default:
                return false;
        }
    }
} 
```

示例用法：

```
public partial class MyForm : Form
{
    MessageFilter mf = null;

    public MyForm
    {
        Load += MyForm_Load;
        FormClosing += MyForm_FormClosing;
    }

    private void MyForm_Load(object sender, EventArgs e)
    {
        mf= new MessageFilter();
        Application.AddMessageFilter(mf);
    }

    private void MyForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        Application.RemoveMessageFilter(mf);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T13:49:14.063

使用[Control.MouseEnter 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)将焦点设置到控件。例如使用[ActiveControl 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.activecontrol.aspx)

# android - Google Play 订阅 API 返回：204 无内容

> ID：11034354
> 
> 赞同：0
> 
> 时间：2012-06-14T13:39:53.927
> 
> 标签：android, in-app-billing, google-play

我已经开始在我的应用程序中实现订阅，但我无法让 API 工作。

我已经成功获得了一个 oauth 令牌，但是当我请求有关订阅的详细信息时，没有返回任何内容。我尝试过 Fiddler、cUrl 和 Google API Explorer 网站。全部返回 204 无内容，不管输入什么数据。

是谷歌的问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:09:35.813

看起来问题出在 Google API 服务器上。现在都在工作。

# delphi - 在某些情况下，ADO 组件，尤其是 TADOCommand，是否可以更可靠地使用未命名或命名参数？

> ID：11034362
> 
> 赞同：25
> 
> 时间：2012-06-14T13:40:05.200
> 
> 标签：delphi, ado

StackOverflow 上有几个问题似乎在 ADO/OleDB、delphi TADOQuery/TADOCommand 和参数主题上的答案相互矛盾。

可以通过两种方式引入参数，在 ADO 组件的 CommandText 或 SQL 属性中。对我来说大部分时间都有效的命名参数是用冒号介绍的：

```
 select a, b, c from bar where bat = :baz 
```

这对我来说 99% 的时间都有效，很好。我时不时地发现 ADO 或 Delphi 的包装器不接受 ":baz" 并要求我改写这个：

```
 select f, g, h from bar where bat = ? 
```

这会产生一个未命名的参数，而不是一个命名的参数。当 ADO 查询或 ADO 命令只包含一个参数时，这没什么大不了的。但那不是 ADO 对我起作用的时候。昨天它以一种方式行事，而今天，在一个 TADOCommand 对象中使用双命令的另一种方式，就像这样，在一个 CommandText 字符串中有两个命令：

```
delete from bar where id = :id1
delete from bat where id = :id2 
```

我不得不将其更改为：

```
delete from bar where id = ?
delete from bat where id = ? 
```

昨天一整天都在工作。今天，我不得不把它改回第一个版本，让它工作。症状是 ADO 参数消失了，再也回不来了，当我尝试执行命令时出现错误，索引超出范围，当我尝试访问`Parameters[0]`. 没有给我任何关于参数正在消失的警告。似乎在设计时与 ADO 数据集的一些连接慢跑了`TADOCommand`组件，特别是，它“只是打破了我”。当您尝试编写查询或命令时尤其令人抓狂，并且您知道它有效，但 ADO 组件已决定不接受“？”。或“：x”现在。您可以通过从一个切换到另一个来解决它完全无法运行的问题。但这让我感到沮丧，并且可能实际上完全阻止了其他人。我知道有些人总是在代码中动态构建他们的 SQL，并且避免使用`Parameters`.，也许*这就是为什么*.

我期待的问题的可能答案是：

1.  ADO 不支持多个命令，或者至少 Delphi 的包装器不支持。或者也许`TADOCommand`只是在这里不能可靠地工作。

2.  参数是所有 ADO 或所有 Delphi 的 ADO 包装器中的一个错误区域？

3.  你这样做是错的。

我正在使用 Delphi XE2，但我在 2007、2009、2010 和 XE 中看到了类似的狡猾行为。我使用 Microsoft OLEDB Provider for SQL Server 作为我的 OLEDB Provider。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:53:05.900

`:`带有?的命名参数 我一直使用它`@`，即使在 Visual Studio (ADO.NET) 上也是如此。并且在 T-SQL 参数和变量中以 . 为前缀`@`。

不记得有问题...您确定您没有选择 Native Client（安装了 SQL Server 客户端安装）而不是 OLEDB Provider for SQL Server（Windows 附带）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:08:46.843

不幸的是，我有一段时间没有使用 Delphi，所以，我没有办法从 Delphi 的角度验证这个答案。

这是我第一次看到以冒号 ( `:`) 为前缀的命名参数。通常，在 ADODB 中，命名参数以 at ( `@`) 为前缀，是的，未命名参数以问号 ( `?`) 给出。

命名参数的一个显着优势是它们能够被重用，即

```
INSERT INTO TABLE T VALUES (@id, @id, 'Hello World'); 
```

在 ADODB 级别。一旦您使用了参数，无论是命名的还是未命名的，您都可以将`CommandText.Parameters.Refresh`其用作创建参数的快速方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T17:38:16.907

是的，在某些情况下参数`?`失败。我发现有时我需要使用`:named`参数。命名参数对于使用 DB Parameter 值具有优势，因为设置 Name 属性也可以更轻松地调试 ADO 查询或数据集或表。

我不明白为什么。如果您遇到此问题，请首先检查您使用的是正确的 OLEDB 提供程序，并检查是什么版本。还要检查由您生成的错误 SQL 引起的潜在解析错误。

我怀疑 OLEDB 提供程序内部的代码中我没有源代码的内部行为是这个怪癖的罪魁祸首。Delphi ADO 类包装器是从 Delphi 的数据库组件层架构到 ADO 的核心查询/表/数据集 API 的转换器，所有这些 API 都是围绕一组处理[ADO RecordSets](https://msdn.microsoft.com/en-us/library/ms681510%28v=vs.85%29.aspx)的 COM 对象的底层包装器。

# php - 登录页面循环

> ID：11034366
> 
> 赞同：2
> 
> 时间：2012-06-14T13:40:15.223
> 
> 标签：php, forms

我对 PHP 还很陌生，但我决定尝试在我的测试网站上制作一个简单的登录页面，看看它是如何工作的。我知道这不是很安全，但我还不太担心。我遇到的问题是当我尝试登录时，无论用户名是否正确，我都会立即重定向到登录页面。我认为它甚至不会使用检查用户名和密码或任何内容的 PHP 脚本，因为当我使用不正确的用户名或密码时会得到相同的结果。我不完全确定这是否是 PHP 问题，因为表单是 HTML 格式，如果不是，很抱歉。

登录页面：

```
<?
include"includes/head.inc";
?>

    <div class="login" align="center";>

    <h1>Log In</h1>

    <form action="/cp/login.php" method="post">

        <table border="0" cellspacing="2" cellpadding="2">
            <tr>
                <td>
                    Email
                </td>
                <td>
                    <input type="text" name="username">
                </td>
            </tr>
            <tr>
                <td>
                    Password
                </td>
                <td>
                    <input type="password" name="password">
                </td>
            </tr>
        </table>

        <input type="submit">

    </form>

    </div>

    <?
    include"includes/footer.inc";
    ?> 
```

登录.php：

```
<?
$username = $_POST['username'];
$password = $_POST['password'];

session_start();
include"../includes/connect.inc";

$q = "SELECT * from users where email='$username' and password='MD5($password)'";
$result = mysql_query($q, $connection) or die
("Could not execute query : $q." . mysql_error());

if (!$result) {

    echo "<h1>Incorrect username or password.</h1>";

}
else {
    $r              = mysql_fetch_array($result);
    $login_username = $r["email"];
    session_register("login_username");
    Header("Location: protected.php");
}

?> 
```

受保护的.php：

```
<?
session_start();
if ($login_username == "") {
    Header("Location: ../login.php");
}
else {
    include"../includes/head.inc";
    include"../cp.inc";
    include"../includes/footer.inc";
}
?> 
```

我包括了所有文件以防万一，但它似乎只是循环登录页面，而不是循环浏览其他文件。我输入的用户名和密码是正确的，并且在我重写之前在我以前的登录系统中工作以使其更好地工作。我希望我没有错过任何愚蠢或明显的东西。谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:43:53.367

可能导致这种情况的事情：

```
session_start();
if($login_username=="") { 
```

您指的是会话中的某些内容；这就是你应该这样做的方式：

```
session_start();
if (!isset($_SESSION['login_username']) || $_SESSION['login_username']=="") { 
```

* * *

另一个小问题：

```
<?
$username=$_POST['username'];
$password=$_POST['password'];

session_start(); 
```

您应该`$_POST`先测试密钥，然后再尝试访问它们。

```
if (!isset($_POST['username'], $_POST['password'])) {
    die("Invalid page request");
}
session_start();
$username=$_POST['username'];
$password=$_POST['password']; 
```

* * *

最后但同样重要的是，学习 PDO；另请参阅此处警告继续使用`mysql_`功能的页面：http: [//uk.php.net/manual/en/function.mysql-connect.php](http://uk.php.net/manual/en/function.mysql-connect.php)

# objective-c - 目标 c - 派生 UIAlertView OK 按钮

> ID：11034369
> 
> 赞同：0
> 
> 时间：2012-06-14T13:40:19.807
> 
> 标签：objective-c, ios, xcode

我有一些常规警报视图和一个名为“UINotificationAlertView”的自定义警报视图我希望自定义 UINotificationAlertView 上的“确定”按钮单击事件使用第二种方法而不是第一种方法。我怎样才能做到这一点？我是目标 c 的新手，如果这是一个愚蠢的问题，我很抱歉。

```
UINotificationAlertView *message = [[UINotificationAlertView alloc]
                                    initWithTitle:@""
                                    message:row.alertBody
                                    delegate:self.
                                    cancelButtonTitle:@"OK"                      
                                    otherButtonTitles:nil]; 
```

App delgate 中的两种方法：

```
//UIAlertView delegate
    - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

        if(buttonIndex == kNo) {
        } else {
            //Close by suspending...
            [[UIApplication sharedApplication] suspend];
        }
    }
    - (void)alertNotificationView:(UINotificationAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
        NSLog(@"phils new delegate");
        if(buttonIndex == kNo) {
        } else {
            //Close by suspending...
            [[UIApplication sharedApplication] suspend];
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:52:16.437

尝试

在您的 .h 文件中，输入：

```
@interface YourClassName : UIViewController<UIAlertViewDelegate> 
```

在您的 .m 文件中：

`message.delegate = self;`

# php - PHP没有插入MYSQL表

> ID：11034373
> 
> 赞同：0
> 
> 时间：2012-06-14T13:40:33.493
> 
> 标签：php, mysql, apache, ubuntu-11.10

我有一个 html 表单、一个 php 脚本和一个 mysql 数据库我希望表单通过 php 脚本发布到 mysql 数据库。我填写表格并提交，但表格保持不变。我在 Ubuntu 中使用 Lamp 设置。

```
/var/www/add_review.php
<?
$username="user";
$password="password";
$database="database";
$review=$_POST['review'];
$Cname=$_POST['Cname'];
$picture=$_POST['picture'];
$profile=$_POST['Cprofile'];
$location=$_POST['location'];
$ratingImg=$_POST['ratingImg'];
$rating=$_POST['rating'];
$date=$_POST['date'];
$Creview=$_POST['Creview'];
$link=$_POST['link'];
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$query = "INSERT INTO table VALUES ('$review','$Cname','$picture','$location','$ratingImg','$rating','$date','$Creview','$link')";
mysql_query($query);
if($query)
{
    echo "Success!";
}
else
{
    die(mysql_error());
}
mysql_close();
echo "Review Added!";
echo "<br />";
echo $review;
echo "<br />";
echo $name;
echo "<br />";
echo $picture;
echo "<br />";
echo $profile;
echo "<br />";
echo $location;
echo "<br />";
echo $ratingImg;
echo "<br />";
echo $rating;
echo "<br />";
echo $date;
echo "<br />";
echo $Creview;
echo "<br />";
echo $link;
?>

/var/www/add_review.html
<h1>Add A Drink</h1>
<form action="add_review.php" method="post">
<p>Review # <input type="text" name="review"><br></p>
<p>UserName <input type="text" name="Cname"><br></p>
<p>Picture URL <input type="text" name = "picture"><br></p>
<p>Users Profile URL <input type="text" name = "Cprofile"><br></p>
<p>Location <input type="text" name = "location"><br></p>
<p>Star URL <input type="text" name = "ratingImg"><br></p>
<p>Star Value <input type="text" name = "rating"><br></p>
<p>Date(MMDDYYYY) <input type="text" name = "date"><br></p>
<p>Users Review<br> <textarea name="Creview"></textarea><br></p>
<p>Review Link <input type="text" name = "link"><br></p>
<input type="submit" value="Submit">
</form> 
```

MYSQL 表

```
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| review    | int(11)     | YES  |     | NULL    |       |
| Cname     | varchar(20) | YES  |     | NULL    |       |
| picture   | text        | YES  |     | NULL    |       |
| Cprofile  | text        | YES  |     | NULL    |       |
| location  | varchar(30) | YES  |     | NULL    |       |
| ratingImg | text        | YES  |     | NULL    |       |
| rating    | float       | YES  |     | NULL    |       |
| date      | int(11)     | YES  |     | NULL    |       |
| Creview   | text        | YES  |     | NULL    |       |
| link      | text        | YES  |     | NULL    |       |
+-----------+-------------+------+-----+---------+-------+ 
```

我无法弄清楚我做错了什么！请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:46:09.383

在您的 INSERT 句子中， int 值不需要引号。

从现在开始，请提供错误消息（如果您没有看到，请在 apache 错误日志中查找）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:46:16.067

尝试在查询中指定您的列：

```
$query = <<<EOQ

INSERT INTO yelpreviews(review, Cname, picture, location, 
                        ratingImg, rating, `date`, Creview, link)
VALUES('$review','$Cname','$picture','$location',
       '$ratingImg','$rating','$date','$Creview','$link')

EOQ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:44:06.577

您似乎没有提供`CProfile`可能会导致某种错误的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:50:15.123

你什么意思`$_POST['image']`？是你上传的图片吗？如果是这样，我确定您在表单属性上使用 enctype = multipart/form-data，并且您还使用 $_FILE['image']['name'] 来获取图像的名称。

还有一件事，你应该使用`mysql_real_escape_string($_POST['string'])`防止mysql注入。并且不要在整数值之间使用引号。

# android - 如何使用任何文件资源管理器发送选择 ttf 文件的意图？

> ID：11034375
> 
> 赞同：3
> 
> 时间：2012-06-14T13:40:37.803
> 
> 标签：android, types, android-intent

我想在按下按钮时发送一个意图，我想通过从设备中安装的文件资源管理器列表中选择它来打开文件资源管理器......（使用“完成操作：”）然后，使用该文件资源管理器选择一个 ttf 文件来设置我的 textview 的字体。问题是，我找到了一些与 MIME 类型文件相关的东西，但我不明白......任何人都可以告诉我该怎么做，好吗？;)

我不得不说，为了设置字体，我想我需要一个带有文件路径的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:21:58.417

[Mime 类型](http://en.wikipedia.org/wiki/Internet_media_type)是对您要查找的内容的描述。例如，JPEG 图像将具有“image/jpeg”类型。至于TTF文件，虽然没有官方注册的MIME类型，但最常用的（根据维基百科）是

```
application/x-font-ttf 
```

Intents 的文档给出了一个使用[ACTION_GET_CONTENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_GET_CONTENT)动作的例子。这里是你如何使用它：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("application/x-font-ttf");
startActivityForResult(intent,PICKFILE_RESULT_CODE); 
```

# emacs - 在 emacs 中使用自动加载卸载定义的目的是什么？为什么不自动加载很慢？

> ID：11034377
> 
> 赞同：0
> 
> 时间：2012-06-14T13:40:41.667
> 
> 标签：emacs, elisp

在 ELisp 中，您可以使用自动加载 cookie 跳过对定义的评估。该定义仅在使用后进行评估。

```
;; File foo.el

;;;###autoload
(defun foo ()
  "Doc"
  42)

(defun bar ()
  "Doc"
  43) 
```

所以，*如果我理解正确*，自动加载功能是一种更快加载文件的技巧。但是当我加载时`foo.el`，为了跳过 foo 的定义，解释器仍然必须阅读整个表单。我不明白为什么它更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:06:02.950

加载文件内容的最简单方法`foo.el`是执行`load`. 但是，这样做代价高昂，因为您必须阅读整个文件。

`autoload`你可以告诉emacs：“函数在`foo`文件中定义`foo.el`”。这样，emacs 就不会读取文件，并且您无需支付加载费用。当您`foo`第一次使用该函数时，emacs 会通过阅读`foo.el`.

您文件中的`;;;###autoload`注释本身并没有为自动加载做任何事情。您需要使用一个程序来获取所有这些定义并将它们放入一个文件`foo-autoloads.el`（或任何其他名称）中。对于每个函数，它将放置一行告诉 emacs 哪个文件包含它。然后在你的`.emacs`you will`load` `foo-autoloads.el`而不是`foo.el`. `foo.el`将在您第一次使用 function 时被 emacs 读取`foo`。

注意：`require`也可以用`load`在上面的解释中代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:52:27.403

你从哪里得到这样的“理解”？肯定不是[说明书](http://www.gnu.org/software/emacs/manual/html_node/elisp/Autoload.html)。

自动加载 cookie 用于在单独的自动加载文件中提取骨架函数/变量定义。这通常在编译时完成。

如果不执行该编译步骤，自动加载 cookie 将无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:03:57.237

自动加载表单必须单独加载。它们可以从自动加载 cookie 生成，但您也可以手动编写它们。例如，在您的 .emacs 中，您可以为仅偶尔使用的功能放置自动加载表单，因此它们仅按需加载。

例如：

```
(autoload 'ahk-mode "ahk-mode") 
```

# bash - 使用 shell 脚本将 tsv 文件中的日期格式从“m/d/yyyy”转换为“yyyy-mm-dd”

> ID：11034380
> 
> 赞同：2
> 
> 时间：2012-06-14T13:40:47.453
> 
> 标签：bash, shell, unix, date, format

我有一列包含电子表格（.tsv）中的日期列表（有些单元格是空白的），例如：
6/30/1988

1/2/2000
等。

我想要一个包含日期列表的 file.tsv（保留空白单元格，因为它用于在数据库中导出，我需要空白单元格用于我的关节）：
1988-06-30

2000-01- 02
等...

我做了一些研究，但由于我是初学者，我无法做到。非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:42:55.347

您可以使用`date`命令：

```
$ date -d 6/30/1988 +%F
1988-06-30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:06:11.883

这是一个不使用外部程序的 bash/korn shell 解决方案：

```
while IFS='/' read dd mm yyyy
do
    printf "%04d-%02d-%02d\n" $yyyy $mm $dd    
done < filename 
```

设置 IFS 会分隔该字符周围的值。

# java - Java 在 BigInteger 中存储字符串

> ID：11034381
> 
> 赞同：3
> 
> 时间：2012-06-14T13:40:49.013
> 
> 标签：java, string, biginteger

我必须在 BigInteger 中存储一个字符串（非数字，可以包含任何 UTF8 字符）来执行一些数学运算。我需要确定性的转换

```
BigInteger mybigint = new BigInteger(mystring.getBytes()); 
```

好像不是……</p>

我还需要能够将它从 BigInteger 转换回 String。如果我将 String 转换为 BigInteger 并返回，那么之后它需要是相同的。

有谁知道如何做到这一点？先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T13:42:54.877

不要这样做。从根本上说，您没有数字信息。不要假装它是数字信息。

定义“数学运算”的含义并编写一个类来执行它们。`BigInteger`几乎*可以肯定*这里是错误的表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:44:41.443

这是确定性的：

```
BigInteger mybigint = new BigInteger(mystring.getBytes("UTF-8")); 
```

您可以使用

```
new String(mybigint.toByteArray(), "UTF-8"); 
```

我不能排除此过程有某种用途，但如果您不确定，请毫不犹豫地提及您为什么这样做。

# javascript - 不使用border属性显示元素的边框

> ID：11034386
> 
> 赞同：2
> 
> 时间：2012-06-14T13:41:00.823
> 
> 标签：javascript, jquery, html, css

我想显示一个元素的边框类型，但不使用边框属性。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:44:47.097

CSS3 有两个可以使用的选项：`outline`和`box-shadow`.

或者，如果您需要旧的浏览器支持，则使用背景`div`来创建边框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:47:35.160

另一种选择是

```
<div style="background-color: black; padding: 2px">
    <div style="background-color: white">
         hello!! 
    </div>
</div> 
```

[提琴手演示](http://jsfiddle.net/NxdTW/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T13:57:09.903

您可以使用`:before`具有指定`width/height`和`background-color`应用的伪元素（当然伪元素不适用于自闭合元素，例如`img`, `input`, `hr`, ...）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:44:17.593

使用`outline`而不是`border`. 这也有一个额外的优势；div 的高度/宽度不会添加轮廓中的点，它只是使用`border`.

# python - 尊重 argparse 的隐私与可用性

> ID：11034388
> 
> 赞同：1
> 
> 时间：2012-06-14T13:41:05.753
> 
> 标签：python, argparse

一般来说，我非常尊重模块的隐私（如果变量带有下划线前缀，我不使用它）。然而，我有一个角落案例，它看起来相当“安全”。

这是演示（[我以前的问题](https://stackoverflow.com/q/11023673/748858)）

```
parser=argparse.ArgumentParser()
parser.add_argument('--point',help='enter a point (e.g. 2,3,4)')
parser.parse_args('--point=-2,5,6'.split())  #works
parser.parse_args('--point -2,5,6'.split())  #doesn't work 
```

这可以通过以下方式解决：

```
parser=argparse.ArgumentParser()
parser.add_argument('--point',help='enter a point (e.g. 2,3,4)')
parser.parse_args('--point=-2,5,6'.split())  #works
parser._negative_number_matcher = re.compile(r'^-\d+|^-\d*\.\d+')
#Next line works too on Cpython 2.6, 
#got the idea from reading Cpython 3.2 source so it should work there too
parser.parse_args('--point -2,5,6'.split()) 
```

在这种情况下，对类内部的大量使用似乎没问题，因为：

*如果 argparse 更改该变量（不太可能）或不同的 python 实现以不同的方式执行它，这似乎不太可能改变类的行为导致某些东西中断。

*其他python实现可能会使用cpython的argparse，因为它是用纯python编写的（据我所知）。

*我的代码并不严重依赖于这个“功能”的工作。（用户总是可以恢复到传递'--point = -2,5,6'）

我的问题是：我错过了什么吗？这真的是个坏主意吗？我可能会破坏一些东西吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:02:43.723

我认为这是一个坏主意，并不是因为它可能会破坏 argparse 内部的某些东西，而是因为它是错误的。`^-\d+`不是负数的有效正则表达式（因为它匹配`-23foo`），并且代码中有明显错误的东西不利于维护。想象一下你自己（或者更糟的其他人）两年后盯着这段代码，`^-\d+`不知道到底应该如何匹配负数！

# java - 如何从 Joomla 调用外部网络服务

> ID：11034396
> 
> 赞同：2
> 
> 时间：2012-06-14T13:41:26.367
> 
> 标签：java, php, web-services, soap, joomla

我将创建一个 web 服务（我认为是在 java 中），其作用是处理图片（IN）并返回结果（OUT）。我想从我的 Joomla 网站使用该网络服务。该过程将是：

1-从网站上传图片

2-我们调用web服务来处理图片

3-我们收到结果并将其显示在新页面中

我真的不知道如何继续执行这三个步骤。我的第一个问题是：如何使用 Joomla (2.5) 调用 Web 服务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:50:34.410

您始终可以使用包装器，这基本上意味着将外部网站显示在文章/组件通常所在的位置。

只需创建一个新菜单项，将类型更改为“包装器”并选择 URL。

我*认为*这就是您正在寻找的东西，如果不是，请更详细地解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:37:41.367

梅尔昆，

我在 Joomla 中尝试了以下示例！使用 Jumi，它奏效了。如果您有 php 5.3，您也可以尝试使用 Sourcerer。

[http://www.vankouteren.eu/blog/2009/03/simple-php-soap-example/](http://www.vankouteren.eu/blog/2009/03/simple-php-soap-example/)

# drupal-7 - 单击标记进入地图，而不是填写地址字段

> ID：11034404
> 
> 赞同：0
> 
> 时间：2012-06-14T13:41:59.823
> 
> 标签：drupal-7, mapping, openlayers, openstreetmap

我在 Drupal7 中使用 openlayers addressfield、geocode 和 geofield 模块让用户使用相关的地理数据创建内容。但是对于某些内容，没有可用的街道名称。所以我想要一个预缩放的地图区域，用户可以在其中单击并标记正确的位置，而不是在地址字段中输入。

我尝试将 geofield 与“Openlayers Widget Map”一起使用，但这并不是我所需要的。

有人知道如何使用这些模块吗？有没有教程？

亲切的问候米奇

* * *

谢谢回答！

是的，理论上它是有效的。我以前用 geofield 模块试过。是的，我可以在创建节点时以内容类型形式看到地图。

但我还没有找到一种方法将地图预缩放到相关位置（或为此使用地理定位行为）或更改该地理场地图的标记样式。我可以在内容类型字段设置中选择的唯一地图样式是“geofield 小部件地图”。所以我别无选择使用具有自己标记样式的单个预缩放地图。在 openlayers 设置中更改“OpenLayers 默认地图”没有任何区别。所以也许我忽略了一些自定义geofield的东西，但是该模块没有配置链接。因此，如果没有更多的配置，该模块对于用户使用地理场标记节点是不切实际的。

还有其他想法或信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:22:22.550

您可以使用 Geofield 模块执行此操作：http: [//drupal.org/project/geofield](http://drupal.org/project/geofield)

当您启用该模块时，您可以在内容类型上添加 Geofield 字段并将小部件设置为“Openlayers Map”...... geofield 字段允许您以多种方式输入地理信息，但只需单击地图是一种方式。它可能使用您为 Openlayers 地图保存的默认缩放和中心。

试试看，让我们知道它是否有效！

以下是通过 Geofield 输入地址信息的选项：

![在此处输入图像描述](../Images/dca48fc7d0b6206b761b815d5308ff7f.png)

# javascript - Jquery-UI 隐藏和显示效果不起作用

> ID：11034409
> 
> 赞同：-3
> 
> 时间：2012-06-14T13:42:14.257
> 
> 标签：javascript, jquery, jquery-ui

我无法在 jquery ui 中使用一些即爆炸效果隐藏我的 div，它总是向下滑动（或类似的东西），无论我在代码中作为参数放置什么效果。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/1.8rc3/ui/jquery-ui.js"></script>
$(document).ready(function(){

$('.rozwin').click(function(){
    $('#main').hide('explode');
    $('#main').show('explode');  
});  

<a href="" class="rozwin>hide and show</a>

<div id='main'>...</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:50:30.380

这段代码有很多错误。

此脚本 src 缺少`http:`

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script src="http://jquery-ui.googlecode.com/svn/tags/1.8rc3/ui/jquery-ui.js"></script> 
```

您不以 javascript 开头`<script type="text/javascript">`，因此您的所有 jQuery 都被解释为纯文本。

```
$(document).ready(function(){ 
```

您不会阻止单击的默认操作。

```
$('.rozwin').click(function(){
    $('#main').hide('explode');
    $('#main').show('explode');  
}); 
```

你没有附上你的`.ready()`...

您的锚标记的类没有结束引号。

```
<a href="" class="rozwin>hide and show</a>

<div id='main'>...</div> 
```

这是包含它需要的所有修复的代码段。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://jquery-ui.googlecode.com/svn/tags/1.8rc3/ui/jquery-ui.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.rozwin').click(function(e){
            e.preventDefault();
            $('#main').hide('explode');
            $('#main').show('explode');  
        });  
    });
</script>

<a href="" class="rozwin">hide and show</a>
<div id='main'>...</div> 
```

请记住，您的节目事件不会按预期工作，因为它们触发得太快，因为您没有在`.hide()`.

[http://jsfiddle.net/zq2Hz/](http://jsfiddle.net/zq2Hz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:45:04.893

第一行错过了http：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

并错过了 $(document).ready(function(){

```
$(document).ready(function(){ 
   $('.rozwin').click(function(){
     $('#main').hide('explode');
     $('#main').show('explode');  
   });   
}); //at the end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:45:37.233

你错过了类的右大括号和右引号

```
$(document).ready(function(){
   $('.rozwin').click(function(){
      $('#main').hide('explode');
      $('#main').show('explode');  
   }); 
});
<a href="" class="rozwin">hide and show</a> 
```

# android - 适用于 Android 的 RDP 库

> ID：11034418
> 
> 赞同：2
> 
> 时间：2012-06-14T13:42:30.823
> 
> 标签：android, rdp

我正在尝试开发一个 android 版本的远程桌面共享（Remote PhoneTop Sharing）来实时共享一些文件或应用程序。

我正在尝试通过使用**Remote Desktop Protocol (RDP)**来实现这一点。是否有任何适用于 Android 的 RDP 库？

我检查了**Proper Java**，但它似乎适用于 Java，我们可能需要进行大量代码更改才能使其适用于 Android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:25:00.743

你可以试试[connectoid](http://code.google.com/p/connectoid/)。

# android - 如何从我的 android 项目转换为 .apk 文件？

> ID：11034419
> 
> 赞同：0
> 
> 时间：2012-06-14T13:42:31.833
> 
> 标签：android, android-emulator

我是android的初学者。我成功创建了一个应用程序。在该应用程序中，名称是 Hello。它在我的模拟器中成功运行。我的问题是如何将该应用程序转换为 .apk 文件。因为我如何在我的安卓平板电脑上运行这个应用程序（你好）。如果可能，请发送有关如何将 taht 应用程序转换为 .apk 格式的信息。否则，如果不可能发送原因。请回复您的答案和意见对我很有价值。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:47:29.747

只需尝试以下现有答案 -

1.  [导出安卓.apk](https://stackoverflow.com/a/6166192/940096)

2.  [.Apk 文件来自应用程序](https://stackoverflow.com/a/4853025/940096)

3.  [导出签名的安卓包](http://www.jetbrains.com/idea/webhelp/exporting-a-signed-android-package.html)

* * *

## 导出 .apk 的步骤

1.  右键单击您的项目 -> 选择 Android 工具 -> 导出签名的应用程序包 -> 下一步

2.  选择创建新密钥库->使用浏览设置新位置->并为密钥提供新名称

3.  输入密码并确认密码 -> 下一步

4.  提供别名 -> 提供新密码或旧密码并确认密码 -> 填写有效性 -> 并在下面填写一列 -> 下一步

5.  将 .apk 文件的目标设置为现有位置或新位置 -> 完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:44:57.450

从日食

参考链接

[http://www.jetbrains.com/idea/webhelp/exporting-a-signed-android-package.html](http://www.jetbrains.com/idea/webhelp/exporting-a-signed-android-package.html)

[http://developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

在主菜单上，选择工具 | 安卓 | 导出签名的 Android 包。导出签名的 Android 包向导启动。

从命令行：

[http://asantoso.wordpress.com/2009/09/15/how-to-build-android-application-package-apk-from-the-command-line-using-the-sdk-tools-continuously-integrated-使用巡航控制/](http://asantoso.wordpress.com/2009/09/15/how-to-build-android-application-package-apk-from-the-command-line-using-the-sdk-tools-continuously-integrated-using-cruisecontrol/)

甚至了解签名也很重要

[http://developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:46:55.160

在 Eclipse 中右键单击您的项目 -> 导出 -> Android -> 导出 Android 应用程序 -> 下一步 -> 创建新密钥库 -> 输入信息 -> 执行剩余步骤

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T16:14:03.837

实际上，如果您现在不想发布您的应用程序，只想让它在您的手机上运行，​​那么您只需将 yourApp.apk 文件从 /workspace/yourProject/bin 目录复制到您的 sdcard 然后安装它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T13:48:00.603

Eclipse 会为您做到这一点（如果您只是想在您的设备上对其进行测试，而不是实际创建一个 .apk，这听起来像是您真正想要做的）。

安装正确的驱动程序后，只需将设备插入计算机，如果您转到运行 -> 运行配置，选择您的应用程序，然后单击“目标”选项卡，它应该显示为目标。选择设备，然后您将设置为从 Eclipse 在您的设备上运行它。

# java - 如何编写 JAVA CLASS 和 PHP API 来发布和读取现有 MySQL 数据库

> ID：11034423
> 
> 赞同：0
> 
> 时间：2012-06-14T13:42:43.040
> 
> 标签：java, php, android, mysql

我正在开发一个应用程序，该应用程序允许员工请求休假该帖子并从现有的 MySQL 数据库中读取。但是我很难弄清楚在整个代码部分（PHP，JAVA）中要修复什么。任何专家可以告诉我如何解决这个问题吗？

这是我目前收到的错误消息

```
D/Create Response(284): {"message":"Required field(s) is missing","success":0} 
```

**请求 PHP API**

```
<?php
// array for JSON response
$response = array();

// check for the fields
if (isset($_POST['title']) && isset($_POST['request_date']) && isset($_POST['reqEndDate']) && isset($_POST['reason']) && isset($_POST['requestor']) && isset($_POST['status']) && isset($_POST['submitDate']) && isset($_POST['explanation']) && isset($_POST['hours']) && isset($_POST['id'])) {

    $title = $_POST["request_title"];
    $date = $_POST["request_date"];
    $eDate = $_POST["reqEndDate"];
    $reason = $_POST["reason"];
    $requestor = $_POST["requestor"];
    $status = $_POST["status"]; 
    $dateSubmitted = $_POST["submitDate"];
    $explanation = $_POST["explanation"];
    $numhours = $_POST["hours"];
    $empid = $_POST['id'];

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO requests(request_title, request_date, reqEndDate, reason, requestor, status, submitDate, explanation, hours, empid) 
                            VALUES('$title', '$date', '$eDate', '$reason', '$requestor', '$status', '$dateSubmitted', '$explanation', '$numhours', '$empid')");

} else {

    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    echo json_encode($response);
}
?> 
```

**请求 JAVA 类**

```
 // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("request_title", title));
            params.add(new BasicNameValuePair("request_date", date));
            params.add(new BasicNameValuePair("reqEndDate", eDate));
            params.add(new BasicNameValuePair("hours", hours));
            params.add(new BasicNameValuePair("reason", reason));
            params.add(new BasicNameValuePair("explanation", explanation));

            // getting JSON Object
            // Note that create request url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_request,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created request
                    Intent i = new Intent(getApplicationContext(), AllRequestsActivity.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create request
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:49:54.350

我认为错误消息非常具有描述性。

`if`PHP代码中的第一个。

在请求中包含所有必填字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:51:14.257

PHP 脚本正在查找 $_POST 中设置的 10 个变量，但您的 Java 类仅在“参数”中发送 6 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:51:37.370

以下“如果”中提到的字段之一在您的 POST 请求中不存在

```
if (isset($_POST['title']) && isset($_POST['request_date']) && isset($_POST['reqEndDate']) && isset($_POST['reason']) && isset($_POST['requestor']) && isset($_POST['status']) && isset($_POST['submitDate']) && isset($_POST['explanation']) && isset($_POST['hours']) && isset($_POST['id'])) { 
```

# c# - OAuth2 谷歌 API

> ID：11034425
> 
> 赞同：5
> 
> 时间：2012-06-14T13:42:47.190
> 
> 标签：c#, google-api, oauth-2.0

我正在寻找可以在 C# 中使用的 OAuth2 客户端 API，我遇到了 Google： [http ://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

它讨论了如何使用它与各种 Google 服务的 OAuth 集成，但是这个库也可以用于非 Google OAuth 服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:12:12.600

例如，您*可能*可以使用它，`OAuth2Authenticator.ApplyAuthenticationToRequest()`但它会很棘手并且不值得努力。我宁愿建议看一下支持 OAuth2（并由 StackOverflow 使用）的[DotNetOpenAuth 。](http://www.dotnetopenauth.net/)

# apache-flex - 在显示层次数据时，如何从 AdvancedDataGrid 的子行中排除特定列？

> ID：11034432
> 
> 赞同：0
> 
> 时间：2012-06-14T13:42:56.343
> 
> 标签：apache-flex, advanceddatagrid

我有一个以分层方式显示信息的 AdvancedDataGrid；站点及其相关子区域的列表。

数据结构为：

```
public interface ISite
{
    function get displayName():String
    function get siteCode():String
    function get name():String
    function get subAreas():ArrayCollection
}

public interface ISubArea
{
    function get displayName():String
    function get siteCode():String
    function get name():String
    function get subAreaCode():String
} 
```

我想在网格中显示总共三条信息。在树的根部，我想显示站点的 displayName。对于子区域，我想显示两列，一列用于站点代码，另一列用于名称。

不幸的是，我已经非常接近所有三列都显示在子行中。我还没有弄清楚如何从子行中删除站点的 displayName 列。

关于如何做到这一点的任何想法？这是一个屏幕截图，描述了迄今为止的结果并用所需的结果进行了注释。生成此结果的 MXML 代码可以在图像之后找到。

![在此处输入图像描述](../Images/9e9bb245853d31fc1da3c270c4cd9fc6.png)

```
<mx:AdvancedDataGrid width="100%" height="100%" showHeaders="false" textAlign="left">
    <mx:dataProvider>
        <mx:HierarchicalData source="{pmodel.sites}" childrenField="subAreas"/>
    </mx:dataProvider>
    <mx:columns>
        <mx:AdvancedDataGridColumn dataField="displayName"/>
        <mx:AdvancedDataGridColumn dataField="siteCode"/>
        <mx:AdvancedDataGridColumn dataField="name"/>
    </mx:columns>
    <mx:rendererProviders>
        <mx:AdvancedDataGridRendererProvider 
            depth="1" 
            columnIndex="0" 
            columnSpan="0" 
            renderer="mx.controls.advancedDataGridClasses.AdvancedDataGridGroupItemRenderer"/>
    </mx:rendererProviders> 
</mx:AdvancedDataGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:48:49.800

我找到了一个非常简单且可行的解决方案来解决这个问题。

将第一列 (displayName) 的宽度设置为零以在数据网格中“隐藏”该列。使用`AdvancedDataGridRendererProvider`配置该列以跨越数据网格根部的所有列。由于跨越多列，第一列的文本仍将显示在根部，并将隐藏在数据网格中的所有其他深度。

```
<mx:AdvancedDataGrid width="100%" height="100%" showHeaders="false" textAlign="left">
    <mx:dataProvider>
        <mx:HierarchicalData source="{pmodel.sites}" childrenField="subAreas"/>
    </mx:dataProvider>
    <mx:columns>
        <mx:AdvancedDataGridColumn dataField="displayName" width="0"/>
        <mx:AdvancedDataGridColumn dataField="siteCode"/>
        <mx:AdvancedDataGridColumn dataField="name"/>
    </mx:columns>
    <mx:rendererProviders>
        <mx:AdvancedDataGridRendererProvider 
            depth="1" 
            columnIndex="0" 
            columnSpan="0" 
            renderer="mx.controls.advancedDataGridClasses.AdvancedDataGridGroupItemRenderer"/>
    </mx:rendererProviders> 
</mx:AdvancedDataGrid> 
```

# sql - 带有舍入问题的sql

> ID：11034434
> 
> 赞同：1
> 
> 时间：2012-06-14T13:42:56.953
> 
> 标签：sql, database, math, oracle10g

我对`sql`（数学）有疑问。

我有一个支付给供应商的总应付款项`33.333`，我需要将金额与两个用户分开。所以我有选择

`select (16.666 * 2) from dual`这给了我`33.332`少于`.1`我必须给予的总金额。

如果我有这个 sql `select (16.667 * 2) from dual`，那么它给我`33.334`的 `.1`大于`33.333`.

我如何划分我可以平均分配的总金额？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:47:27.843

反过来做：

```
select 33.333/2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:48:20.163

我不确定您从哪里执行查询，但它在这里工作（SQLDeveloper，10g）：

```
SELECT (33.333 / 2) FROM dual;
16,6665

SELECT (16.6665 * 2) FROM dual;
33,333 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:16:46.283

您很可能使用了错误的列类型。您应该使用 DECIMAL 而不是例如 FLOAT。

这是一个很好的总结： http: [//lists.mysql.com/mysql/189592](http://lists.mysql.com/mysql/189592)

根据您使用的 SQL 标准，类型可以是 MONEY、DECIMAL 或 NUMBER。

# php - PHP 回显 MySQL 数据库字段和复选框

> ID：11034446
> 
> 赞同：0
> 
> 时间：2012-06-14T13:43:41.197
> 
> 标签：php, mysql, foreach, while-loop, echo

我有此代码旨在回显来自特定位置的人员列表。然后，您可以通过选中他们姓名旁边的框并提交将使用新组更新数据库的表单来对所有这些人进行分组。这一切听起来很简单。但不幸的是，数据库是使用许多相互关联的表来建立的。所以它变得有点复杂。这是我到目前为止所拥有的：

```
<?php

//Query the database for the Location ID of the currently logged in user

$query1 = mysql_query("SELECT * FROM `Location` WHERE Name = '".$_SESSION['Location']."'");
$array1 = mysql_fetch_array($query1);

//Query the database for the all the participants in this location, make an array of the results and then implode the array

$query2 = mysql_query("SELECT idParticipant FROM `Participant/Location` WHERE idLocation = ".$array1['idLocation'].";");
$column1 = array();
while($row = mysql_fetch_array($query2)){
$column1[] = $row['idParticipant'];
}
$values = implode(' OR ', $column1);

//Query database for all first names where the particpant ID's equal those of the above $values

$query3 = mysql_query("SELECT firstName FROM `Participant` WHERE idParticipant = $values;");
$columnFirstName = array();
while($row = mysql_fetch_array($query3)){

$columnFirstName[] = $row['firstName'];

}

foreach($columnFirstName as $value){

echo "<input type='checkbox' name='check[]' id='' value='' />";
echo $value."<br><br>";

}

?>
<input type="submit" name="submit" value="Save New Group"> 

</form> 
```

因此，上面的代码回显了该位置的所有名字，并在其旁边添加了一个复选框。问题是我也需要第二个名字出现在名字旁边。而且我需要获取每个人的 ID 以输入复选框的值。

我不确定我该怎么做...我想我需要对第二个名称进行第二次查询然后调整我的 foreach 循环...我可能需要一个全新的 foreach 循环来获取 id，赢了不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:09:54.043

这是我需要做的：

```
$query3 = mysql_query("SELECT * FROM `Participant` WHERE idParticipant = $values;");
$columnFirstName = array();
$columnSecondName = array();
$columnID = array();
while($row = mysql_fetch_array($query3)){

$columnFirstName[] = $row['firstName'];
$columnSecondName[] = $row['secondName'];
$columnID[] = $row['idParticipant'];

}

for($i=0;$i<count($columnFirstName);$i++) {

 $firstName  = $columnFirstName[$i];
 $secondName = $columnSecondName[$i];
 $id = $columnID[$i];

 echo "<input type='checkbox' name='check[]' id='$id' value='$id' />";
 echo $firstName." ";
 echo $secondName."<br><br>";

}

?>

<input type="submit" name="submit" value="Save New Group"> 

</form> 
```

# java - java动态类加载

> ID：11034455
> 
> 赞同：1
> 
> 时间：2012-06-14T13:44:12.553
> 
> 标签：java, reflection, static

加载类时，使用 method `forName()`，执行类中的任何静态`initializers`。我可以防止这种情况吗？

```
try {
        Class.forName("MYClass");
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

**我的课**

```
class MyClass{

static String TEST="MYCLASS";
static SomeClass sm=new SomeClass();
} 
```

我在[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#forName%28java.lang.String,%20boolean,%20java.lang.ClassLoader%29)中发现有一个 Class.forName() 的重载版本，即

```
public static Class<?> forName(String name,
                           boolean initialize,
                           ClassLoader loader)
                    throws ClassNotFoundException 
```

什么是`initialize`参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:46:59.307

这就是 Java 创建对象的方式，所以不是。一种方法是在其他时间延迟加载实例。

这意味着您必须删除静态引用。

例如

```
public SomeClass getSomeClass() {
   if (sm == null) {
      return new SomeClass();
   }

   return sm;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:50:29.693

如果您不想执行静态初始化，请尝试使用类文字而不是 Class.forName

```
class A1{
    static{
        System.out.println("static block from A1");
    }
}

class B1{
    public static void main(String[] args) throws ClassNotFoundException {
//      Class.forName("A1");//this will invoke static initialization
        Class c=A1.class;//this will not invoke static initialization
    }
} 
```

# magento - magento 多站点上的可变结帐设计，带有单个结帐

> ID：11034458
> 
> 赞同：0
> 
> 时间：2012-06-14T13:44:26.563
> 
> 标签：magento

我正在运行一个带有单个结帐的 magento 多站点。这些网站目前设置为商店，它们都使用一个安全的 URL 进行结帐。

我如何获取结帐 url 以改变其设计/格式/徽标等的显示，具体取决于用户来自哪个站点？现在我的结帐 url 只保留默认主题设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:38:16.297

Magento 始终在单个商店上下文中执行，因此在一个主题配置范围内执行。您将需要调整主题计算`Mage_Core_Model_Design_Package`以评估报价对象中的商店 ID。

您可以在观察者中执行此操作，并在观察者方法中观察与结帐相关的 FullActionName`controller_action_predispatch_*`事件，`Mage_Core_Controller_Varien_Action->preDispatch()`并执行以下操作：

```
Mage::getSingleton('core/design_package')->setTheme('theme'); 
```

这是一个粗略的指南。YMMV。

# c# - 使用 jQuery load() 在 .aspx.cs 代码隐藏文件中调用函数

> ID：11034460
> 
> 赞同：1
> 
> 时间：2012-06-14T13:44:33.037
> 
> 标签：c#, jquery, asp.net, .net, code-behind

所以我有这样的情况：

```
 $(document).on('click', 'a[data-link]', function () {
        var $this = $(this);
        url = $this.data('link');
        $("#imagePreview").load("imageProcess.aspx?" + url); 
```

其中 url 保存`GET`参数。但`imageProcess.aspx`与我在 ( ) 中的文件不同`dashboard.aspx`，我需要在我的`dashboard.aspx`文件中引用一些面板。所以我的问题是，使用 .load() 函数，甚至任何可以完成工作的函数，我如何在文件后面的代码中调用带有`GET`参数的函数？`dashboard.aspx`我对`.NET`框架相当陌生，所以如果这个问题听起来很简单，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:09:39.983

在您`imageProcess.aspx.cs`创建一个 web 方法，如：

```
[WebMethod]
public static string YourMethod(your parameters)
{
//Do Your Work
} 
```

在您的仪表板页面中，在 javascript 中使用 jquery 发送请求您的网络方法，例如：

```
$.ajax({
type: "POST",
    url: "imageProcess.aspx/YourMethod",
    data: "{parameter1Name:'" + JSON.stringify(parameter1value) + "', Parameter2Name:'" + JSON.stringify(parmeter2Value) + "'}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data) {
// do your success work, keep in mind that your returned data will be in data.d
    },
error: function(XMLHttpRequest, textStatus, errorThrown) {
// do your failuer work
}
}); 
```

我希望它能给你一个指导来完成你的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:02:37.533

只是为了确保：您正在尝试从与您当前所在的页面不同的 aspx 页面访问功能。我不完全确定您是否可以通过 java 脚本轻松地做到这一点。也许其他人知道更好的方法，但我会这样做的方式是创建 ashx 服务页面，该页面将处理您的请求，以便您可以提供所需的数据（在您的情况下为图像）

有关详细信息，请参阅[http://www.dotnetperls.com/ashx](http://www.dotnetperls.com/ashx)

# android - 知道列表视图的哪些元素当前显示在屏幕上

> ID：11034463
> 
> 赞同：0
> 
> 时间：2012-06-14T13:44:36.733
> 
> 标签：android, android-listview

我会知道是否有办法知道列表视图的元素是否超出列表，（我想知道第一个元素是否出现在屏幕上）

事实上，我想要做的是，我希望我的列表的第二个元素（这是列表所在片段的标题）在它上升时作为标题保持阻塞（就像联系人中的一封信应用程序）。所以我想到的是在listview上方（在相对布局父级中）添加第二个元素的隐藏克隆，并在第一个元素离开屏幕时将其设置为可见（当第二个元素是第一个元素时）看到的列表）。

但也许这是一种原生方式！

谢谢，

雷诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:15:37.587

您可以随时使用方法`getFirstVisiblePosition()`和`getLastVisiblePosition()`on获取列表中的第一个和最后一个可见位置`ListView`

高温高压

# java - 带支柱 2 的日历

> ID：11034465
> 
> 赞同：0
> 
> 时间：2012-06-14T13:44:39.353
> 
> 标签：java, struts2, dojo

我目前使用 struts2，我需要显示一个日历

在我的 jsp 页面中并检索 yyyy-MM-dd 中的日期

我尝试使用此代码

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
     <%@ taglib prefix="s" uri="/struts-tags" %>
     <%@ taglib prefix="sx" uri="/struts-dojo-tags" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

<sx:head cache="false" compressed="false" /> 

</head>
<body>

<sx:datetimepicker name="date achat" label="Format (yyyy-MM-dd)" displayFormat="yyyy-MM-dd"/>

</body>
</HTML> 
```

但是在运行计划时不会出现

并且只显示这个标签

```
 Format (yyyy-MM-dd): 
```

此致

佛朗哥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:54:32.100

试试下面的例子

[Struts2 日期时间选择器](http://www.mkyong.com/struts2/struts-2-datetimepicker-example/)

# javascript - 使用 javascript 设置 IFrame allowfullscreen

> ID：11034473
> 
> 赞同：12
> 
> 时间：2012-06-14T13:44:50.170
> 
> 标签：javascript, html, iframe, fullscreen

我尝试将 allowfullscreen 属性设置为 iframe，但它不起作用：

```
iframe.allowFullScreen = true 
```

我用 chrome -> inspect 元素检查了它，但是在这段代码之后，iframe 没有 allowfullscreen 属性。

提前致谢，

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T14:40:57.073

`iframe.setAttribute('allowFullScreen', '')`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-09-14T08:21:12.480

如果单词 screen 以小写“s”开头，它对我有用。

```
iframe.allowFullscreen = true; 
```

# jquery - 从 URI 下载内容并修改

> ID：11034478
> 
> 赞同：-1
> 
> 时间：2012-06-14T13:44:57.437
> 
> 标签：jquery, jquery-ui

例如，我得到了 URI 链接列表`http://news.yahoo.com` ， `http://www.google.com`

我想从这些链接下载内容并修改数据/更改页面中的 css 名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:57:04.983

如果没有服务器端组件为您下载，这是行不通的。使用服务器端组件，您`.load()`当然可以使用。

您可能会在这里找到解决方案：http: [//usejquery.com/posts/the-jquery-cross-domain-ajax-guide](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)

# actionscript-3 - AS3：这会导致内存泄漏吗？

> ID：11034486
> 
> 赞同：0
> 
> 时间：2012-06-14T13:45:19.243
> 
> 标签：actionscript-3, memory, garbage-collection

```
public class MyButton extends Sprite 
{     
   public function MyButton(defaultHandler:Function)     
   {     
      addEventListener(MouseEvent.CLICK, defaultHandler);     
   } 
} 
```

//主类

```
var myButton:MyButton =new MyButton(someFunction);
addChild(myButton)

removeChild(myButton);
myButton = null; 
```

IE 我在构建时从内部向我的 Button 类添加了一个匿名 mouseclick 事件处理函数，而不是在将它从舞台上移除并清空时专门将其移除。

这个对象是否适合垃圾收集器，这不会导致内存泄漏吗？或者因为事件监听器只引用了一个本身被删除的对象，它也会被删除？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:14:47.613

虽然@sberry 的回答中的观点是完全正确的，但请仔细看看在这种情况下哪些对象相互引用。

如果主类在应用程序的整个生命周期内都**存在，则没有内存泄漏**：

主类具有对其实例化的按钮类的引用。

按钮类有一个对主类的引用，来自事件处理函数。

主类取消其对按钮的引用。

此时，**不再有对 button 的引用**。该按钮**可以**并且将被垃圾收集。

如果主类确实在应用程序的整个生命周期内都存在，那么就没有问题。如果主类以某种方式消失了，但按钮对象之一仍然存在，**那么**您就有内存泄漏（按钮维护对 main 的引用，并且 main 不能被垃圾收集）。

PS：我并不反对在或使用弱引用时删除事件侦听器，我尽可能自己做这两种做法:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:53:43.110

实例上的事件侦听`Button`器将阻止它被垃圾收集，除非您专门删除了侦听器，或者表明侦听器将是弱引用。

```
addEventListener(MouseEvent.CLICK, defaultHandler, false, 0, true); 
```

最后一个参数`true`，是为参数传递的`useWeakReference`。从[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/IEventDispatcher.html#addEventListener%28%29)：

> useWeakReference:Boolean (default = false) — 确定对侦听器的引用是强引用还是弱引用。强引用（默认）可防止您的侦听器被垃圾收集。弱引用不会。

# php - Opera 动态 JavaScript 执行失败

> ID：11034488
> 
> 赞同：1
> 
> 时间：2012-06-14T13:45:32.820
> 
> 标签：php, javascript, jquery, dynamic, opera

我在我的 HTML 头中链接了一个服务器端生成的 JS 文件。

我使用它，以便能够从我的 PHP 脚本中的任何位置动态地将脚本插入到 head 标记中。

有一个全局可访问对象，我可以传递 JS 代码，然后它使用密钥将其存储在会话中，将密钥插入 HTML 框架模板，然后浏览器通过加载从会话输出它的动态脚本来加载存储的脚本贮存。

这在 Firefox、Chrome 甚至 IE 中都可以正常工作，但在 Opera 中则不行。

在 Opera 中，从大约 10 次重新加载尝试中，只有 1 次尝试执行脚本。

目前所有动态生成的 JS 代码都在 jQuery DOM Ready 事件中。这可能与我认为的问题有关。

使用 AJAX 加载动态脚本并对其进行评估肯定会解决这个问题，但我想要一个清晰的 HTML 输出，而不是直接在头上的脚本。这种加载和评估的方式对于链接的静态脚本是不可能的，因为模板引擎必须将脚本的会话存储密钥插入到 HTML 框架模板中。

---编辑---动态脚本输出：

```
$(function(){
//Calls to some jQuery Plugins on class and id selectors (on some reloads getting executed, but mostly not)
}); 
```

DOM：

```
<!DOCTYPE html>
<html>
<head>            
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
<!-- CSS Links, Meta tags -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>           
<!--jQuery Plugins External Script tags-->
<script src="http://[MY_DOMAIN]/dynamic.js/[JS_STORAGE_KEY(MD5)]"></script>                                   
</head>
<body>
<!-- VALID HTML5 CODE -->
</body>
</html> 
```

---编辑 2--- 我可能已经找到问题的原因：Opera 多次请求外部脚本。有关更多详细信息，请参阅我的最后评论。顺便说一句，如果是这样的话，在某些情况和情况下，带宽使用也非常令人担忧。

# android - 如何将现有联系人添加到“电话联系人”帐户

> ID：11034490
> 
> 赞同：1
> 
> 时间：2012-06-14T13:45:39.757
> 
> 标签：android, contacts, rawcontacts

我正在使用此代码向设备添加联系人

```
long Contact_Id = 100;
ContentValues pCV =new ContentValues();
pCV.put(Contacts.People.NAME, "test");
pCV.put(ContactsContract.Contacts._ID, Contact_Id);
Uri newContactUri = insertContentValues(cResolver,
                    Contacts.People.CONTENT_URI, pCV); 
```

我想将此联系人添加到某个帐户。我在下面使用此代码

```
ContentResolver cResolver = context.getContentResolver();
cResolver.insert(uri, ContactsContract.RawContacts.CONTENT_URI,
                        getAccountType()); 

public ContentValues getAccountType() {
    ContentValues cv = new ContentValues();  
    cv.put(ContactsContract.RawContacts.ACCOUNT_TYPE,  "com.sonyericsson.localcontacts");
    cv.put(ContactsContract.RawContacts.ACCOUNT_NAME, "Phone contacts");
    return cv;
} 
```

此代码实际上是在“电话联系人”帐户中添加一个新联系人。但我想将我在上面添加的联系人（“测试”）添加到“电话联系人”中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:53:02.723

搜索后我发现将联系人插入本地电话联系人的最佳方法是分配`ACCOUNT_TYPE`,`ACCOUNT_NAME`来`null`看看这个[链接](https://stackoverflow.com/a/10320903/1295292)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T10:15:30.163

您可以根据您的选择/要求尝试两种解决方案。两者都运行良好

> 添加联系人打开直接编辑活动

```
 try {
        Intent addContactIntent = new Intent(Intent.ACTION_INSERT);
        addContactIntent.setType(ContactsContract.Contacts.CONTENT_TYPE);
        addContactIntent.putExtra(ContactsContract.Intents.Insert.PHONE, number);
        addContactIntent.putExtra("finishActivityOnSaveCompleted", true);
        context.startActivity(addContactIntent);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

> 创建联系人或将联系人添加到现有联系人的选项

```
 try {
        Intent i = new Intent(Intent.ACTION_INSERT_OR_EDIT);
        i.setType(ContactsContract.Contacts.CONTENT_ITEM_TYPE);
        //  i.putExtra(ContactsContract.Intents.Insert.NAME, "TESTTEST");
        i.putExtra(ContactsContract.Intents.Insert.PHONE, number);
        context.startActivity(i);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# objective-c - 如何防止 UIImagePickerController 改变方向？

> ID：11034502
> 
> 赞同：1
> 
> 时间：2012-06-14T13:46:24.990
> 
> 标签：objective-c, ios, ipad

所以这是我第一次使用 iPad 相机，但 UIImagePickerController 出现了一些问题，我似乎无法将其锁定为纵向模式。

首先我继承了 UIImagePickerController 并实现了

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation==UIInterfaceOrientationPortrait);
} 
```

但后来我读到它没有用，因为 UIImagePickerController 不应该被子类化。

接下来我尝试通过选择器覆盖，我为它创建了一个类并实现了相同的方法。它仍然不起作用，每次我向选择器显示覆盖时，该方法似乎只被调用一次。

```
- (void)viewDidLoad{
    [super viewDidLoad];
    _imagePicker = [[UIImagePickerController alloc] init];
    [_imagePicker setDelegate:self];
    [_imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
    [_imagePicker setCameraDevice:UIImagePickerControllerCameraDeviceFront];
    [_imagePicker setCameraCaptureMode:UIImagePickerControllerCameraCaptureModePhoto];
    [_imagePicker setAllowsEditing:YES];  
    [_imagePicker setShowsCameraControls:YES];
    [_imagePicker setNavigationBarHidden:YES];
    [_imagePicker setToolbarHidden:YES];
    [_imagePicker setWantsFullScreenLayout:YES];

    CameraOverlay *_overlay = [[CameraOverlay alloc] init];
    [_overlay set_imagePicker:_imagePicker];
    [_imagePicker setCameraOverlayView:_overlay.view];
}

-(IBAction)takePicture:(id)sender {
    [self presentModalViewController:_imagePicker animated:YES];
} 
```

我只是尝试了其他方法，锁定了呈现视图控制器的方向，但 UIImagePickerController 仍然向各个方向旋转。我注意到的另一件事是方向更改也会更改 UIImagePickerController 的设置。我将相机设置为前置摄像头，当我用它拍照时，旋转iPad并尝试拍摄另一张照片，相机设置为后置摄像头。很奇怪。

那么我错过了什么，请就如何锁定相机方向提出任何建议？:)

编辑：混合了 UIImagePickerController 和 UIPickerView，已修复 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:29:12.417

您始终可以使用[AVFoundation](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html)滚动您自己的相机实现。

# mysql - 显示来自 get_lock 的所有当前锁

> ID：11034504
> 
> 赞同：65
> 
> 时间：2012-06-14T13:46:34.233
> 
> 标签：mysql, locking

有没有办法选择/显示所有当前使用该[`GET_LOCK`功能](http://dev.mysql.com/doc/refman/en/miscellaneous-functions.html#function_get-lock)取出的锁？

请注意，`GET_LOCK`锁与表锁不同，就像那些获得的锁一样`LOCK TABLES`- 想知道如何查看*这些*锁的读者应该阅读[Detecting locked tables (locked by LOCK TABLE)](https://stackoverflow.com/q/2499976/1709587)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-02-21T00:02:12.083

从 MySQL 5.7 开始，这是可能的，但需要首先`mdl`在表中启用仪器[`performance_schema.setup_instruments`](https://dev.mysql.com/doc/refman/en/setup-instruments-table.html)。您可以通过运行以下命令临时执行此操作（直到服务器下次重新启动）：

```
UPDATE performance_schema.setup_instruments
SET enabled = 'YES'
WHERE name = 'wait/lock/metadata/sql/mdl'; 
```

或者永久地，通过将​​以下咒语添加到文件的`[mysqld]`部分`my.cnf`（或 MySQL 从您的安装中读取的任何配置文件）：

```
[mysqld]
performance_schema_instrument = 'wait/lock/metadata/sql/mdl=ON' 
```

（当然，如果您采用后一种方法，则需要重新启动 MySQL 才能使配置更改生效。）

在仪器启用*后*您取出的锁`mdl`可以通过`SELECT`在[`performance_schema.metadata_locks`](https://dev.mysql.com/doc/refman/en/metadata-locks-table.html)桌子上运行来查看。如文档中所述，`GET_LOCK`锁具有`OBJECT_TYPE`of `'USER LEVEL LOCK'`，因此我们可以使用`WHERE`子句将查询过滤到它们：

```
mysql> SELECT GET_LOCK('foobarbaz', -1);
+---------------------------+
| GET_LOCK('foobarbaz', -1) |
+---------------------------+
|                         1 |
+---------------------------+
1 row in set (0.00 sec)

mysql> SELECT * FROM performance_schema.metadata_locks 
    -> WHERE OBJECT_TYPE='USER LEVEL LOCK'
    -> \G
*************************** 1\. row ***************************
          OBJECT_TYPE: USER LEVEL LOCK
        OBJECT_SCHEMA: NULL
          OBJECT_NAME: foobarbaz
OBJECT_INSTANCE_BEGIN: 139872119610944
            LOCK_TYPE: EXCLUSIVE
        LOCK_DURATION: EXPLICIT
          LOCK_STATUS: GRANTED
               SOURCE: item_func.cc:5482
      OWNER_THREAD_ID: 35
       OWNER_EVENT_ID: 3
1 row in set (0.00 sec)

mysql> 
```

此结果中各列的含义在[https://dev.mysql.com/doc/refman/en/metadata-locks-table.html](https://dev.mysql.com/doc/refman/en/metadata-locks-table.html)中有充分的记录，但有一点值得注意：该`OWNER_THREAD_ID`列*没有*包含持有锁的线程的*连接*ID（如将显示在`PROCESSLIST`或返回`CONNECTION_ID()`）。令人困惑的是，术语“线程 ID”有时在 MySQL 文档中用作“连接 ID”的同义词，但这*不是*其中之一。如果您想确定持有锁的连接的*连接*ID（例如，为了使用 终止该连接[`KILL`](https://dev.mysql.com/doc/refman/en/kill.html)），您需要查找`PROCESSLIST_ID`与`THREAD_ID`在[`performance_schema.threads`](https://dev.mysql.com/doc/refman/en/threads-table.html)表中。例如，要终止将我的锁放在上面的连接......

```
mysql> SELECT OWNER_THREAD_ID FROM performance_schema.metadata_locks
    -> WHERE OBJECT_TYPE='USER LEVEL LOCK'
    -> AND OBJECT_NAME='foobarbaz';
+-----------------+
| OWNER_THREAD_ID |
+-----------------+
|              35 |
+-----------------+
1 row in set (0.00 sec)

mysql> SELECT PROCESSLIST_ID FROM performance_schema.threads
    -> WHERE THREAD_ID=35;
+----------------+
| PROCESSLIST_ID |
+----------------+
|             10 |
+----------------+
1 row in set (0.00 sec)

mysql> KILL 10;
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-30T20:40:31.130

从 MySQL 5.7 开始，性能模式公开了所有元数据锁，包括与`GET_LOCK()`函数相关的锁。

见[http://dev.mysql.com/doc/refman/5.7/en/metadata-locks-table.html](http://dev.mysql.com/doc/refman/5.7/en/metadata-locks-table.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-11T15:43:01.003

```
SHOW FULL PROCESSLIST; 
```

你会看到里面的锁

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-25T12:20:00.497

如果您只想确定当前是否持有*特定*的命名锁，您可以使用[`IS_USED_LOCK`](https://dev.mysql.com/doc/refman/5.7/en/miscellaneous-functions.html#function_is-used-lock)：

```
SELECT IS_USED_LOCK('foobar'); 
```

如果某个连接持有锁，则返回该连接的 ID；否则，结果为`NULL`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-30T23:18:30.330

如果您知道锁的名称，我发现了以下可以使用的方法

```
select IS_USED_LOCK('lockname'); 
```

但是我没有找到有关如何列出所有名称的任何信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-20T09:15:22.023

**[来自这篇文章的参考：](http://www.dbrnd.com/2016/02/mysql-script-to-identify-the-locks-and-blocking-transactions/)**

您还可以使用此脚本在 MySQL 中查找锁定。

```
SELECT 
    pl.id
    ,pl.user
    ,pl.state
    ,it.trx_id 
    ,it.trx_mysql_thread_id 
    ,it.trx_query AS query
    ,it.trx_id AS blocking_trx_id
    ,it.trx_mysql_thread_id AS blocking_thread
    ,it.trx_query AS blocking_query
FROM information_schema.processlist AS pl 
INNER JOIN information_schema.innodb_trx AS it
    ON pl.id = it.trx_mysql_thread_id
INNER JOIN information_schema.innodb_lock_waits AS ilw
    ON it.trx_id = ilw.requesting_trx_id 
        AND it.trx_id = ilw.blocking_trx_id 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-19T17:56:21.403

另一种简单的方法是使用：

```
mysqladmin debug 
```

这会将大量信息（包括锁）转储到错误日志中。

# vim - gvim 中的错误 - 在哪里报告？

> ID：11034510
> 
> 赞同：4
> 
> 时间：2012-06-14T13:47:00.803
> 
> 标签：vim

我最近在 LaTeX 的 gvim（即 vim 的 gui）语法高亮中遇到了一个错误，它可以在多个平台（debian/ubuntu 中的 vim-gtk 和 MacOS X 中的 mvim 包）上重现，但不能在命令行 vim 中重现。我想知道报告此问题的正确位置是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T13:54:17.430

启动 Vim 并执行：

```
:help bugs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T14:52:13.807

GUI 版本的 Vim 比控制台 Vim 有更多的高亮属性（和可用的颜色）；也许这就是该错误仅在 GUI 版本中表现出来的原因。如果您认为这是语法定义的问题，请联系语法的维护者，在`$VIMRUNTIME/syntax/tex.vim`. Chip Campbell 经常在他的网站上提供他的插件的更新的 beta 版本，试试看。

另一方面，要报告针对 Vim 的错误，最好将其减少到最少的`:syntax`和`:highlight`命令集，然后按照`:help bugs`.

# ruby-on-rails - 什么是 Rails 方式？（可读性与干燥）

> ID：11034516
> 
> 赞同：9
> 
> 时间：2012-06-14T13:47:21.590
> 
> 标签：ruby-on-rails

我有一个用户模型，它有投票方法。我想为投票编写代理方法。

这是可读的方式：

```
def vote_up item
  return false unless can? :vote, item
  vote item, :up
end

def vote_down item
  return false unless can? :vote, item
  vote item, :down
end 
```

这是干燥的方式：

```
%w(up down).each do |vtype|
  define_method "vote_#{vtype}" do |item|
    return false unless can? :vote, item
    vote item, vtype.to_sym
  end
end 
```

哪个更好，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:19:15.783

纯粹是因为 OP 似乎喜欢我的评论，所以我将其作为答案：

就个人而言，考虑到您这里只有 2 种方法，而且您不太可能添加更多方法（vote_sideways？vote_diagonally？）我只会采用可读的方式。如果你可能有更多，我会采用 DRY 方式（因为它变得容易扩展），并带有可读的注释来向其他开发人员（或稍后向你自己解释！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:54:14.427

两者都没有（对不起）。

```
def vote_count(item,vtype)
  return false unless can? :vote, item
  vote item, vtype
end 
```

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:56:27.360

恕我直言，在这种情况下，可读性胜过枯燥。它扫描速度很快，很容易摸到。话虽如此，如果您开始添加投票类型，则第二种方法可能会更灵活。YMMV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:59:27.157

两个都。

我和阿尼尔在一起；只需传入一个类型——元编程，将其作为第一选择是很糟糕的。

也就是说，我*是*便捷方法的粉丝——但他们应该使用类型调用泛型方法。

这使生成的方法保持简洁——真正的工作是在泛型方法中完成的，但 API 用户仍然可以获得相同的便利方法。

# openldap - slapd.conf：未知指令 内部后端数据库定义

> ID：11034525
> 
> 赞同：0
> 
> 时间：2012-06-14T13:47:35.813
> 
> 标签：openldap

我对 openLDAP 很陌生，我正在尝试设置密码策略。我的 slapd.conf 中有以下内容：

```
include /etc/openldap/schema/ppolicy.schema
moduleload ppolicy.la

objectClass: top
objectClass: device
objectClass: pwdPolicy
cn: default
pwdAttribute: userPassword
pwdMaxAge: 5184000
pwdExpireWarning: 432000
pwdInHistory: 6
pwdCheckQuality: 1
pwdMinLength: 8
pwdMaxFailure: 5
pwdLockout: TRUE
pwdLockoutDuration: 1920
pwdGraceAuthNLimit: 0
pwdFailureCountInterval: 0
pwdMustChange: TRUE
pwdAllowUserChange: TRUE
pwdSafeModify: FALSE
pwdCheckModule: check_password.so
pwdCheckQuality: 2 
```

但问题是，当我重新启动 slapd 时出现以下错误：/etc/openldap/slapd.conf：第 86 行：后端数据库定义中的未知指令。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:52:21.710

这里的基本问题是您正在发明语法。LDIF 命令不属于 slapd.conf。

# c++builder - 在 Windows 7 中使用 TDocument 类

> ID：11034530
> 
> 赞同：0
> 
> 时间：2012-06-14T13:48:06.840
> 
> 标签：c++builder, c++builder-5

我有一个使用 C++ Builder 5 编写的应用程序，它使用 TDocument 类。此类是 Preview ActiveX 控件的一部分，并使用 shimgvw.dll。

它在 XP 中的 Borland“导入 ActiveX 控件”对话框中自动添加为选项，但在 Windows 7 中它不是选项。

如何在 Windows 7 中使用此类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:29:39.873

这不是 C++Builder 问题。C++Builder 只是显示当前注册的 COM 对象的列表，不管它们是什么。如果您没有在列表中看到 Document 对象，则 shimgvw.dll 未在 Windows 7 上注册/安装，仅此而已。在我的 Windows 7 机器上，C++Builder XE2 不显示任何类型的 Document Preview 对象，因此它与 C++ Builder 5 无关。

# ios - 我是否必须迁移 Coredata 数据库的行？

> ID：11034531
> 
> 赞同：0
> 
> 时间：2012-06-14T13:48:11.020
> 
> 标签：ios, cocoa, core-data, core-data-migration

我在商店里有一个应用程序，在 CoreData 库中填充了数据。为了预填充数据库，我们生成了一个包含应用程序数据的 .sqlite 文件。

例如在 PERSON 表中，我有

```
134  Martin  Developer
256  John    Boss
371  Doe     Somebody 
```

在我的应用程序的新版本中，PERSON 表看起来像

```
134  Martin  Developer
256  John    Boss
399  Mister  Someoneelse 
```

所以我把 371 线换成了 399 线。

它工作正常，除非我在旧应用程序上安装新应用程序。在这种情况下，数据根本不会改变。我看起来像一个迁移问题，但数据库结构完全一样。只有行发生了变化。

是迁移问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:54:38.577

当您有一个预填充的数据库时，您通常会在它第一次在设备上运行时**将其复制到应用程序文档目录中。**据推测，您还想将用户数据保存在数据库中，并且 sqlite 存储必须位于应用程序文档目录中才能写入。

因此，如果您没有进行复制，请先执行此操作。

然后（假设您没有更改数据模型），对您的问题进行更改，

1.  检索有问题的记录
2.  删除它
3.  插入替换
4.  节省

# c# - 我如何去一个网页，加载，然后做一些代码？

> ID：11034532
> 
> 赞同：0
> 
> 时间：2012-06-14T13:48:12.960
> 
> 标签：c#

我试过使用`Sleep`，但这只是冻结了程序。是不是因为它在计时器里而搞砸了？我可以让它去网站而不做代码，但是一旦我放了其他代码，它就不能正确加载。

我也尝试将代码放入： `private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)`但后来我遇到了更多问题。

```
private void timer1_Tick(object sender, EventArgs e)
    {
        //code here

        if (click == null)
        {   
            webBrowser1.Url = new System.Uri("http://url.com", System.UriKind.Absolute);
            timer1.Stop();
            //load or wait x seconds
            timer1.Start();
        } 
```

编辑：我试图从一页转到下一页并在页面加载后执行代码。如果我把代码放进去，`webBrowser1_DocumentCompleted`它会弄乱它之前的代码。如何`DocumentCompleted`仅添加到这一个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:54:41.603

首先，您的方法似乎是错误的，

1.  在 Web 浏览器控件中打开 url。
2.  等待 DocumentCompletedEvent。一旦页面完全加载，它就会出现。
3.  根据您的标准/条件在文档完成事件中编写您的代码。

# iphone - 按对象方法的结果对 NSArray 进行排序

> ID：11034536
> 
> 赞同：1
> 
> 时间：2012-06-14T13:48:23.787
> 
> 标签：iphone, ios, sorting, nsarray, nsdate

所以我有一个名为 Church 的自定义对象的 NSArray。每个教堂都有一系列的弥撒时间。所以教堂里有一种方法可以计算最接近用户当前时间的质量。

```
-(NSDate *)closestTimeTo:(NSDate *)currentTime 
```

我希望能够通过该方法为每个对象返回的结果（即 NSDate）对 Church 的 NSArray 进行排序。基本上是为了得到一个按最近时间和位置排序的质量列表。

我正在使用类别，并且由于它是核心数据对象，因此无法将最接近的时间存储为属性。我也不认为将这些值保存到核心数据中不是一个好主意，因为由于位置服务，这些方法将不断被调用。

关于如何使用其对象方法的结果对此类数组进行排序的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:03:10.370

试试下面的块。它会直接帮助（或至少稍作修改）。

```
NSArray *sortedArray;
sortedArray = [yourArray sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    NSDate *first = [(Church*)a closestTimeTo:currentTime];
    NSDate *second = [(Church*)b closestTimeTo:currentTime];
    return [first compare:second];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:04:08.280

在您的类中创建一个新方法，该方法采用另一个 Church 类并返回`NSOrderedSame`,`NSOrderedAscending`或`NSOrderedDescending`，具体取决于您希望该对象是第一个还是最后一个。用你的`closestTimeTo`方法找出来。然后用你的方法使用`NSArray`'`sortedArrayUsingSelector`调用。

# python - Python 程序，可追溯函数调用或实例化的代码并将其全部打印出来

> ID：11034537
> 
> 赞同：2
> 
> 时间：2012-06-14T13:48:24.890
> 
> 标签：python, function, pretty-print, traceback

有些项目是如此之大，以至于为了理解例如函数调用，您需要在整个项目中遍历许多不同的代码块（例如，在几乎没有记录 api 的项目中）。很多时候仅仅看它是不够的，我需要经常写下来，因为你需要在不同的代码块之间来回查看。

是否有任何程序允许您插入函数/方法或类并获得完整的追溯报告及其调用的所有代码？如果该程序同时向您显示该代码的目录结构，那也会很方便。

编辑

====

我在[这个堆栈线程](https://stackoverflow.com/questions/11037109/a-function-in-traceback-inspect-cgitb-that-gives-a-pretty-traceback-for-any-give)中完善了我的问题。我不希望每次都为这个过程启动一个 gui。只需一个 python 函数调用来获取跟踪输出似乎是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:47:52.400

这个问题的答案来自[这个堆栈线程](https://stackoverflow.com/questions/11037109/getting-a-python-traceback-without-an-exception/11038685#comment14498861_11038685)。

```
import trace

def trapy(arg):
    tracer = trace.Trace()
    tracer.run(arg)
    r = tracer.results()
    r.write_results()

if __name__ == '__main__':
    import module_name
    trapy('module_name.function_name()') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:51:44.240

也许您正在寻找[python 调试器](http://docs.python.org/library/pdb.html)或 GUI 版本[WinPDB](http://winpdb.org/)，它允许您跟踪 python 程序的执行并正确设置断点（在`__init__`您要实例化的类中），您将能够看到所有导致实例化的回溯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T18:06:16.650

根据您想要关注的内容（只是函数名？返回值？方法？），您可以通过使用[`sys.settrace`](https://docs.python.org/2/library/sys.html#sys.settrace)函数来实现不同的事情。每次执行都会调用您传递给它的函数，您可以根据需要自定义回溯。Bellow 我有一个示例，当我必须了解新程序/包的流程时，我会使用该示例。

**来源：**

```
import sys, inspect

class Tracer(object):

    def __init__(self):
        self.tracing_packages = []
        self.whitespace = '    '
        self.indent_lvl = 0

    def trace(self, frame, event, arg):
        # Module info
        mod = inspect.getmodule(frame)
        if mod:
            modpath = mod.__name__
        else:
            modpath = '<no module>'
        # Just return if not interested in package
        for to_trace in self.tracing_packages:
            if not modpath.startswith(to_trace):
                return self.trace
        # Other info
        fn_name = frame.f_code.co_name
        src_lines = inspect.getsource(frame).split('\n')
        src_line_start = src_lines[0]
        src_line_end = src_lines[-1]
        lineno = frame.f_lineno
        ws = self.whitespace
        # Printing
        if event == 'call':
            self.indent_lvl += 1
            print('%scallin: %s %s %s' % (self.indent_lvl*ws, modpath, fn_name, str(arg)))
        elif event == 'return':
            if isinstance(arg, object):
                ret = type(arg)
            else:
                ret = str(arg)
            print('%sreturn: %s' % (self.indent_lvl*ws, ret))
            self.indent_lvl -= 1
        return self.trace

    def watch_package(self, packname):
        self.tracing_packages.append(packname) 
```

**例子**

这里我只想了解一个叫做[PyOCD](https://github.com/mbedmicro/pyOCD)的包的流程：

```
>>> import sys, inspect, pyOCD
>>> tracer = Tracer()
>>> tracer.watch_package('pyOCD')
>>> sys.settrace(tracer.trace)
>>> pyOCD.board.MbedBoard.listConnectedBoards()
    callin: pyOCD.board.mbed_board listConnectedBoards None
        callin: pyOCD.board.mbed_board getAllConnectedBoards None
            callin: pyOCD.interface.pyusb_backend getAllConnectedInterface
                callin: pyOCD.interface.pyusb_backend __init__ None
                    callin: pyOCD.interface.interface __init__ None
                    return: <type 'NoneType'>
                return: <type 'NoneType'>
                callin: pyOCD.interface.pyusb_backend start_rx None
                return: <type 'NoneType'>
            return: <type 'list'>

            ... 
```

# python - pyodbc - ImportError：DLL 加载失败：

> ID：11034539
> 
> 赞同：3
> 
> 时间：2012-06-14T13:48:26.263
> 
> 标签：python, odbc

我正在运行 64 位 Windows 7 和 Python 2.6 安装（64 位版本）。另外我正在使用 Aptana Studio 3 来运行 python。我刚刚下载并安装了 pyodbc-3.0.2.win32-py2.6 包。

当我运行 python 并尝试

```
import pyodbc 
```

我收到以下错误：“ImportError：DLL 加载失败：找不到指定的过程。”

知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:10:17.617

[我通过从这里](http://code.google.com/p/pyodbc/downloads/detail?name=pyodbc-2.1.11.win32-py2.6.exe&can=2&q=)安装 pyodbc-2.1.11.win32-py2.6 来解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:03:37.280

尝试 64 位版本的 pyodbc 安装程序： [http ://code.google.com/p/pyodbc/downloads/detail?name=pyodbc-3.0.2.win-amd64-py2.6.exe&can=2&q=](http://code.google.com/p/pyodbc/downloads/detail?name=pyodbc-3.0.2.win-amd64-py2.6.exe&can=2&q=)

# iphone - 再次按下暂停按钮以恢复重新加载视图控制器

> ID：11034544
> 
> 赞同：1
> 
> 时间：2012-06-14T13:48:58.057
> 
> 标签：iphone

我`AVAudioplayer`用来**播放音频文件**，**播放/暂停按钮在播放和暂停之间切换，以及**一个`NSTimer`接一个`audio player`地同步`view controllers`。我总共有 10 或 11 个`view controllers`要一个接一个地加载。

当播放按钮第一次被按下时，它`NSTimer`开始播放，`audio file`并且基于`NSTimer`，视图控制器将一个接一个地加载。当再次按下暂停按钮以恢复时，它会从该点音频文件恢复所有内容，`NSTimer`并`view controllers`从暂停的同一点恢复，这很好。但是，同时它开始`view controllers`从头开始一个接一个地加载，`NSTimer`这是不好的。

它正在使用此语句重新加载视图控制器

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                              target:self
                                            selector:@selector(displayviewsAction:)
                                            userInfo:nil
                                             repeats:NO]; 
```

`view controllers`所以我的问题是，当再次按下暂停按钮以恢复播放时，我需要从头开始再次停止加载。

```
-(void)playpauseAction:(id)sender 
{ 
    if ([audioPlayer isPlaying]) {
        [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
        [audioPlayer pause];
        [self pauseTimer];
    } else {
        [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
        [audioPlayer play];
        [self resumeTimer];
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
    }       
}

-(void)pauseTimer{
    pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain];
    previousFireDate = [[timer fireDate] retain];
    [timer setFireDate:[NSDate distantFuture]];
}

-(void)resumeTimer{
    float pauseTime = -1*[pauseStart timeIntervalSinceNow];
    [timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
    [pauseStart release];
    [previousFireDate release];    
}

- (void)displayviewsAction:(id)sender
{  
    First *firstController = [[First alloc] init];
    firstController.view.frame = CGRectMake(0, 0, 320, 480);
    CATransition *transitionAnimation = [CATransition animation];  
    [transitionAnimation setDuration:1];    
    [transitionAnimation setType:kCATransitionFade];    
    [transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];    
    [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];
    [self.view addSubview:firstController.view];
    [self.view addSubview:toolbar];
    [firstController release];   
    self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Second) userInfo:nil repeats:NO];     
 } 
```

`view controllers`当再次按下暂停按钮以恢复播放时，任何人都可以提供有关如何从头开始再次停止加载的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:56:22.110

我收集到您正在尝试`FirstViewController`在音轨中经过 11 秒后显示。
您可以将计时器设置为轮询（每 0.5 - 1.0 秒），如果 audioPlayer 的经过时间大于 11.0，则执行您的操作。

```
-(void)playpauseAction:(id)sender 
{ 
if ([audioPlayer isPlaying]){
   [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
   [audioPlayer pause];
   [self.timer invalidate]; // stop the polling timer
} else {
   [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
   [audioPlayer play];
   // start/resume the timer
   self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0 /* polling interval */
                                                      target:self
                                                   selector:@selector(tryToDisplayViews:)
                                                    userInfo:nil
                                                     repeats:YES]; /* REPEAT = YES */
}       
}

// the new polled method
-(void)tryToDisplayViews:(id)sender {
    // need last current time as a new variable to ensure that we only add the view once
    // and not every time the method fires with currentTime > 11.0
    if( audioPlayer.currentTime > 11.0 && lastCurrentTime < 11.0) {
        [self displayviewsAction:nil];
    } 
    // you can add the second view here in a similar fashion
    // if(audioPlayer.currentTime > (23.0+11.0) && lastCurrentTime < (23.0+11.0) ) {}

    lastCurrentTime = audioPlayer.currentTime;

} 
```

这也摆脱了你的`resumeTimer`/`pauseTimer`动作，你不需要计算暂停的时间。

# java - 从 Spring MVC 中的自定义控制器访问服务层

> ID：11034545
> 
> 赞同：1
> 
> 时间：2012-06-14T13:49:01.227
> 
> 标签：java, spring, spring-mvc, spring-roo

我是 Spring 和 ROO 以及这个 Annotation/Aspect 的新手。

我有一个使用 Spring ROO 创建的 Spring MVC 项目。我使用 mongo-db 作为我的持久层。我有一个`Report`包含域对象、服务、存储库和控制器的实体。到目前为止，我添加了一个自定义控制器。我只想使用 访问我存储的报告`ReportService.findAllReports()`，但我不确定如何访问此服务。

这是我的 roo 生成站点[http://sauberseite.cloudfoundry.com/的链接](http://sauberseite.cloudfoundry.com/)

主要目标是报告地址，然后在谷歌地图中显示所有地址，为此我有我的自定义控制器以及我需要访问服务层的位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:09:54.313

你可以直接`@Autowired`如下。

```
@Controller
public class CustomController {
    @Autowired
    ReportService reportService; //this inject's your bean here.

    List<Report> getReports() {
        return reportService.findAllReports();
    }
} 
```

如果您不使用注释`@Controller`并在 中定义了您的 bean `xml`，那么您可以将`ReportService`其作为属性注入（只需删除`@Autowired`注释）并为其编写一个 setter。

# html - HTML 项目符号文本边距，不对齐

> ID：11034546
> 
> 赞同：1
> 
> 时间：2012-06-14T13:49:02.867
> 
> 标签：html

我有一个使用 HTML 的项目符号列表，如果句子持续到两行，我希望单词对齐。如果文本进入第二行，它与项目符号对齐。我希望它与文本对齐。

这就是我的意思：

[项目符号文本示例](http://www.gefiltefist.com/bullets.jpg)

这是我正在使用的代码：

[项目符号文本代码](http://www.gefiltefist.com/bullet.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:53:21.367

您的代码末尾略有错误。你应该在你的`<\li>`之前关闭你的`<\ul>`，而不是相反。试试这个：

```
<TABLE style="BORDER-COLLAPSE: collapse; MARGIN-RIGHT: 8px">
<TBODY>
<TR>
<TD>
<UL>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Event will be held from 10am - 5pm Bring Your Dog With</SPAN></SPAN> </DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">$8 Entrance Fee (print out your flyer that you received and bring it with you to support your favorite Rescue (kids under 12 are FREE) $5 of you entrance fee will go to that dog rescue or organization</SPAN></SPAN> </DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">MUST bring Current Vaccination Paperwork, NO EXCEPTIONS, dogs will not be allowed in without this paperwork</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">No firearms, alcoholic beverages, outside food or drink, coolers or glass containers</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Bags will be checked prior to entrance</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Event will be photographed &amp; videotaped</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">All dogs MUST have rabies tags attached to collars</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Collars MUST be worn at all times, NO METAL COLLARS of any kind&nbsp;allowed</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Owners/Handlers are legally responsible for the behavior/actions of their dogs</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Only 1 dog allowed per adult handler</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Dogs must be healthy, fully immunized, de-wormed, &amp; wearing ID tags</SPAN></SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Female dogs in heat are NOT permitted</SPAN> </SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Dogs MUST be leashed at all times unless in dog play area, owners must watch their dog in this area at all times</SPAN></SPAN> </DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Owners MUST IMMEDIATELY clean up after their dogs, with a paper or plastic bag</SPAN> </SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">AGGRESSIVE dogs will be asked to leave</SPAN> </SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">MUZZLED dogs NOT allowed</SPAN> </SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Owners MUST keep their dogs under control at all times</SPAN> </SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Children MUST be closely supervised</SPAN></SPAN> </DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Please dispose of cigarette butts in proper areas, smoking not allowed in any building</SPAN> </SPAN></DIV>
<LI>
<DIV align=justify><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">People who do not follow the rules will be asked to leave immediately</SPAN> </DIV>
</LI></UL></TD></TR></TBODY></TABLE></DIV> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:59:44.660

你不需要任何 div。你只需要设置你`ul`的样式。像这样：

```
ul.out{
 list-style:disc outside none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:59:57.500

你忘了关闭每一个 LI 标签..

而不是这个：

```
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Event will be held from 10am - 5pm Bring Your Dog With</SPAN></SPAN> </DIV>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">$8 Entrance Fee (print out your flyer that you received and bring it with you to support your favorite Rescue (kids under 12 are FREE) $5 of you entrance fee will go to that dog rescue or organization</SPAN></SPAN> </DIV> 
```

跟着这个：

```
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">Event will be held from 10am - 5pm Bring Your Dog With</SPAN></SPAN> </DIV>
</LI>
<LI>
<DIV align=justify><SPAN style="FONT-SIZE: 14pt"><SPAN style="FONT-FAMILY: Times New Roman; FONT-SIZE: 14pt">$8 Entrance Fee (print out your flyer that you received and bring it with you to support your favorite Rescue (kids under 12 are FREE) $5 of you entrance fee will go to that dog rescue or organization</SPAN></SPAN> </DIV>
</LI> 
```

另外，尽量保持标签小写。
我不确定，但我相信这是推荐的。

为确保行继续，而不是中断到下一行，请尝试设置：

```
ul {
overflow: auto;
} 
```

在你的 CSS

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:00:53.213

你的代码太可怕了！如果您需要所有列表项的样式相似，请为所有列表项使用通用样式表！内部 div 和 span 没有任何理由！

```
<style type="text/css">
    li {
        font-size: 14pt;
        font-family: "Times New Roman", sans-serif;
    }
</style>
<ul>
    <li> event will be held from 10am - 5pm bring your dog with</li>
    <li> $8 entrance fee (print out your flyer that you received and bring it with you to support your favorite rescue
    </li>
    (kids under 12 are free) $5 of you entrance fee will go to that dog rescue or organization </li>
    <li> must bring current vaccination paperwork, no exceptions, dogs will not be allowed in without this paperwork
    </li>
    <li> no firearms, alcoholic beverages, outside food or drink, coolers or glass containers</li>
    <li> bags will be checked prior to entrance</li>
    <li> event will be photographed &amp; videotaped</li>
    <li> all dogs must have rabies tags attached to collars</li>
    <li> collars must be worn at all times, no metal collars of any kind allowed</li>
    <li> owners/handlers are legally responsible for the behavior/actions of their dogs</li>
    <li> only 1 dog allowed per adult handler</li>
    <li> dogs must be healthy, fully immunized, de-wormed, &amp; wearing id tags</li>
    <li> female dogs in heat are not permitted</li>
    <li> dogs must be leashed at all times unless in dog play area, owners must watch their dog in this area at all
        times
    </li>
    <li> owners must immediately clean up after their dogs, with a paper or plastic bag</li>
    <li> aggressive dogs will be asked to leave</li>
    <li> muzzled dogs not allowed</li>
    <li> owners must keep their dogs under control at all times</li>
    <li> children must be closely supervised</li>
    <li> please dispose of cigarette butts in proper areas, smoking not allowed in any building</li>
    <li> people who do not follow the rules will be asked to leave immediately</li>
</ul> 
```

# linux - 如何在 openSUSE 11.2 (x86_64) 上安装/更新 gcc-4.6？

> ID：11034547
> 
> 赞同：0
> 
> 时间：2012-06-14T13:49:02.567
> 
> 标签：linux, gcc, opensuse, libstdc++

我在安装 JikesRVM 时遇到了一个错误，即

```
skipping incompatible /usr/lib64/gcc/x86_64-suse-linux/4.4/libstdc++.so when searching for -lstdc++ 
```

所以我正在尝试将其安装/更新到更高版本。现在，机器已经有了

```
gcc (SUSE Linux) 4.4.1 [gcc-4_4-branch revision 150839] 
```

我是 openSUSE 的新手，你能帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:44:43.833

您需要为 GNU C/C++ 编译器安装 32 位支持，因为 x86_64 上的 JikesRVM 目前仅支持 32 位架构。

要在 OpenSuSE 11.2 中安装此支持，请键入

```
 sudo zypper install gcc44-32bit gcc-32bit libstdc++44-devel-32bit 
```

前两个为 C 语言和 32 位版本的 libgcc（GCC 低级运行时库）提供运行时支持。第三个提供了 32 位版本的 libstdc++，包括静态导入库和动态库。JikesRVM 缺少静态 libstdc++.a。

要验证 32 位 C++ 构建系统是否安装正确，您可以使用以下命令对其进行测试

```
 echo "int main(){}" | g++ -x c++ -m32 - 
```

**注意**OpenSuSE 11.2 的官方支持已经结束。Evergreen 支持将在 2013 年之前提供。但很快更新到 11.3 或更高版本是合理的。

# php - php 无法重新声明 _autoload()

> ID：11034548
> 
> 赞同：1
> 
> 时间：2012-06-14T13:49:05.330
> 
> 标签：php, phpactiverecord

我对 php 有了更深入的了解，我正在创建自己的 mini mvc 框架来学习 OOP。

我有一个将所有内容重定向到 index.php 的 .htaccess 文件。在 index.php 中，我包含一个名为 bootstrap.php 的文件来解析 url 并加载类 php 文件。

现在我正在添加 ActiveRecord [http://www.phpactiverecord.org](http://www.phpactiverecord.org)来添加数据库访问。我得到错误：

致命错误：无法在第 4 行的 /home/i554246/public_html/mvc/lib/Autoloader.php 中重新声明类 AutoLoader

我不知道如何制止冲突。

索引.php：

```
include(MVC_CORE_INCLUDE_PATH . DS . 'Bootstrap.php')
include(MVC_CORE_INCLUDE_PATH . DS . 'activerecord/ActiveRecord.php'); 
```

autoloader.php 包含在 bootstrap.php 中

```
<?php

class AutoLoader
{
    public static function Load($Class)
    {
        $File = BASEDIR.$Class.'.php';

        if(is_readable($File))
        {
            require($File);
        }
        else
        {
            die('Requested module "'.$Class.'" is missing. Execution stopped.');
        }
   }
}

spl_autoload_register('AutoLoader::Load'); 
```

活动记录.php

```
if (!defined('PHP_ACTIVERECORD_AUTOLOAD_DISABLE'))
    spl_autoload_register('activerecord_autoload',false,PHP_ACTIVERECORD_AUTOLOAD_PREPEND);

function activerecord_autoload($class_name)
{
    $path = ActiveRecord\Config::instance()->get_model_directory();
    $root = realpath(isset($path) ? $path : '.');

    if (($namespaces = ActiveRecord\get_namespaces($class_name)))
    {
        $class_name = array_pop($namespaces);
        $directories = array();

        foreach ($namespaces as $directory)
            $directories[] = $directory;

        $root .= DIRECTORY_SEPARATOR . implode($directories, DIRECTORY_SEPARATOR);
    }

    $file = "$root/$class_name.php";

    if (file_exists($file))
        require $file;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:35:35.097

PHP-ActiveRecord 没有任何`AutoLoader`类。我猜这里发生的事情是您有两个加载程序正在加载文件。

由于它符合 PSR-0，因此您可以使用自己的加载实用程序加载它（假设它接受该约定）。如果您这样做，只需禁用 PHP-AR 自动加载实用程序。

```
define('PHP_ACTIVERECORD_AUTOLOAD_DISABLE', true); 
```

vanilla loader 对于查找模型类非常有用，如果您将它们放在自己的命名空间中则不需要这些类。由于您的框架可能不遵循关于模型位置的 PHP-AR 约定，因此禁用该自动加载器似乎是正确的。

检查 PHP-AR 与锂框架集成的示例：[li3_activerecord](https://github.com/greut/li3_activerecord/blob/qoqa/config/bootstrap.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:53:30.940

也许改变

```
if (file_exists($file))
    require $file; 
```

至

```
if (file_exists($file))
    require_once($file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:55:22.413

您要么尝试包含一个文件两次（您可能想要使用`require_once`），要么您有 2 个具有相同名称的类（一个来自您使用的库？）。

如果似乎有 2 个类被调用`AutoLoader`，您可能需要查看命名空间。我不记得 phpactiverecord 有一个叫做那个的类，但是你可能会使用几个库，你一定会遇到这个。

最好的方法是将您自己的自动加载器类放在`namespace`. 确保您保持所有调用正确，因此对自动加载器的调用应该`\yournamespace\`在它前面，并且自动加载器内部的调用可能需要在前面加上一个`\`（`\Exception`例如）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:18:40.600

我移动了线路

```
$Bootstrap = new Bootstrap(); 
```

在下面

```
include(MVC_CORE_INCLUDE_PATH . DS . 'Bootstrap.php'); 
include(MVC_CORE_INCLUDE_PATH . DS . 'Controller.php'); 
```

但以上

```
require_once 'lib/activerecord/ActiveRecord.php'; the ActiveRecord seemed to want to load it again 
```

# java - Eclipse 中的 Java EE 应用程序

> ID：11034549
> 
> 赞同：0
> 
> 时间：2012-06-14T13:49:08.153
> 
> 标签：java, eclipse, jakarta-ee, jpa, ear

我正在开发一个将向我们的供应商公开的网络服务。此 Web 服务从供应商处获取请求并将其保存在数据库中。

为了开发它，我在 Eclipse 中创建了三个项目：

*   企业应用项目
*   网络服务项目
*   EJB 项目

现在我的问题是，我应该为实体创建 JPA 项目还是应该在 EJB 项目中创建这些实体？这些实体将由 EJB 项目中的服务类使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:19:35.713

可能您需要将新项目创建为“EJB-api”（“EJB-client”）并应用传输对象模式（[链接](http://java.sun.com/blueprints/corej2eepatterns/Patterns/TransferObject.html)）。然后
EJB项目：DAO impl，BL impl，entities
EJB-client（作为jar库）：DAO api，BL api，传输对象

# delphi - RAR 文件中的非 ASCII 文件名是如何编码的？

> ID：11034550
> 
> 赞同：3
> 
> 时间：2012-06-14T13:49:10.417
> 
> 标签：delphi, character-encoding, file-format, rar

我有一个文件名中包含非 ASCII 字母的 RAR 文件。我尝试在 Delphi 中对其进行解码。我的代码适用于 ASCII 文件名，但在这些文件名上失败了。它不是 WideChar，也不是 UTF8。我在这里找到了 RAR 规范：http: [//ams.cern.ch/AMS/amsexch/arch/rar/technote.txt](http://ams.cern.ch/AMS/amsexch/arch/rar/technote.txt) 但它没有说明字符编码。我尝试了 WOTSIT.org，但所有指向 RAR 的链接都已失效（几乎每个链接都已失效；我什至联系了管理员，但他没有回复，也没有修复链接）。似乎它不是 8 位编码，但不知道它可能是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:52:18.390

这是唯一一段提到这个名字的段落：

```
0x200 - FILE_NAME contains both usual and encoded
        Unicode name separated by zero. In this case
        NAME_SIZE field is equal to the length
        of usual name plus encoded Unicode name plus 1.

        If this flag is present, but FILE_NAME does not
        contain zero bytes, it means that file name
        is encoded using UTF-8. 
```

貌似是UTF-8，你说不是。你能再试一次吗？

# java - Android推送通知的替代方法

> ID：11034555
> 
> 赞同：0
> 
> 时间：2012-06-14T13:49:20.433
> 
> 标签：java, android

是否有替代使用 Google C2DM 在 Android 上推送通知的替代方法？我问是因为我正在开发的应用程序只有在设备连接到特定网络时才会运行。这是该特定公司成员的应用程序，通知只会来自该公司的服务器。既然一切都是“内部”的，那么将他们推到谷歌只是为了让他们回到同一个网络是否有意义？我听说过一些关于 JMS 的事情。有谁知道这是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:56:05.173

你可以试试[Tokudu](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)。它使用 IBM 的 MQTT 代理来处理服务器工作。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:07:56.610

肯定有一些选择。我玩了一下 UrbanAirship，感觉不错。看看[http://urbanairship.com/](http://urbanairship.com/)

# opengl-es - EGL_MAX_PBUFFER_WIDTH 与 GL_MAX_TEXTURE_SIZE

> ID：11034556
> 
> 赞同：0
> 
> 时间：2012-06-14T13:49:24.550
> 
> 标签：opengl-es, textures

在 OpenGL 中，PBuffers 的最大尺寸是否与纹理的最大尺寸相匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:49:25.190

EGL_MAX_PBUFFER_WIDTH 是像素缓冲区的最大宽度，即绘制图形的表面。GL_MAX_TEXTURE_SIZE 是可以在 3D 面上使用的纹理的最大尺寸。

# boo - boo 语言中 out 关键字的替代

> ID：11034561
> 
> 赞同：1
> 
> 时间：2012-06-14T13:49:43.080
> 
> 标签：boo

我想在 boo 语言中使用 out 关键字，但没有与此关键字相关的选项。如何在 boo 语言中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:57:52.653

Boo doesn't support `out`, but the `ref` keyword, which you can use instead.

Example:

```
def Swap(ref a as int, ref b as int):
    t = a
    a = b
    b = t

x = 1
y = 2
Swap(x, y) 
```

# iphone - 如何在 Xcode 4.3 中制作 .ipa 文件？找不到保存到企业

> ID：11034568
> 
> 赞同：0
> 
> 时间：2012-06-14T13:50:02.257
> 
> 标签：iphone, xcode, xcode4.3

我们构建了一个 iphone 应用程序，现在我们想将其导出为 .ipa 文件，以便我们可以将其放入 iTunes 中。我们无法弄清楚如何做到这一点，互联网上的很多教程都与旧版本的 xcode 有关。

有人可以帮助我们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:52:04.060

浏览菜单：产品 -> 存档 然后它会在管理器中打开“Arhives”选项卡。选择最近的存档并点击“分发”按钮。然后选择保存以进行企业分发/临时分发并将其保存在 mac 上所需的位置。

注意：您需要在您的钥匙串及其关联的配置文件中拥有有效的证书/密钥才能创建档案。

# c# - 使用 URI 类时保持 url 编码

> ID：11034569
> 
> 赞同：12
> 
> 时间：2012-06-14T13:50:02.110
> 
> 标签：c#, .net, web, linkedin

我正在尝试从 LinkedIn 获取公开的个人资料信息。为此，我必须提供
[http://api.linkedin.com/v1/people/url=public-profile-url](http://api.linkedin.com/v1/people/url=public-profile-url)，其中 public-profile-url 必须是 URL 编码的。

问题是 .NET 类（如 HttpClient、WebRequest 等）使用 Uri 类，该类似乎“规范化”了提供的 URL，因此我无法发送正确格式的请求。

URI 必须是：

[http://api.linkedin.com/v1/people/url=http%3a%2f%2fwww.linkedin.com%2fin%2fiftachragoler](http://api.linkedin.com/v1/people/url=http%3a%2f%2fwww.linkedin.com%2fin%2fiftachragoler)

但是：

[http://api.linkedin.com/v1/people/url=http://www.linkedin.com/in/iftachragoler](http://api.linkedin.com/v1/people/url=http://www.linkedin.com/in/iftachragoler)

通过这种方式，我收到了来自 LinkedIn 的“错误请求”。

有什么办法可以让 Uri/UriBuilder 不解码那个 URL？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T15:24:19.790

Microsoft connect 上有关于此的报告。由于安全原因，默认情况下不允许转义斜杠。

[http://connect.microsoft.com/VisualStudio/feedback/details/94109/](http://connect.microsoft.com/VisualStudio/feedback/details/94109/)

从那里引用：

> 我尝试使用 LinkedIn api，为此我需要以下链接： [http ://api.linkedin.com/v1/people/url=http%3A%2F%2Fwww.linkedin.com%2Fin%2Fyourlinkedinname:public](http://api.linkedin.com/v1/people/url=http%3A%2F%2Fwww.linkedin.com%2Fin%2Fyourlinkedinname:public)
> 
> 如您所见，需要对 url 字段进行转义。如何解决这个问题？

回答：

> 我们目前不允许转义的斜杠和点出现在路径中，因为当 URI 方案支持路径压缩时，这是攻击服务器的常用方法。

但是有解决方法的选项卡。.NET 4 的其中之一是添加 app.config：

对于 .NET 4.0，您可以通过配置文件进行控制：

[http://msdn.microsoft.com/en-us/library/bb882619.aspx](http://msdn.microsoft.com/en-us/library/bb882619.aspx)

[http://msdn.microsoft.com/en-us/library/ee656539.aspx](http://msdn.microsoft.com/en-us/library/ee656539.aspx)

```
<configuration>
<uri>
    <schemeSettings>
     <clear/>
     <add name="http" genericUriParserOptions="DontUnescapePathDotsAndSlashes"/>
    </schemeSettings>
</uri>
</configuration> 
```

对于 .NET 之前的 .NET 是带有参数“dontEscape”的 Uri 类的构造函数。对于 .NET 4，它已经过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:55:13.340

如果你双重逃避它会发生什么？

```
http://api.linkedin.com/v1/people/url=http%253a%252f%252fwww.linkedin.com%252fin%252fiftachragoler 
```

# facebook - 如何使用 facebook graph api 设置相册隐私设置

> ID：11034570
> 
> 赞同：2
> 
> 时间：2012-06-14T13:50:03.813
> 
> 标签：facebook, facebook-graph-api, facebook-fql

有什么方法可以更改 Facebook 相册隐私设置`graph api`吗？我试图找出答案，但我能找到的只是如何使用 获取隐私设置`fql`，而不是设置。

我正在创建专辑如下

```
$postdata = http_build_query(array(
          'name' => $album_name,
          'message' => $album_description
            )
          );

  $opts = array('http' =>
         array(
          'method'=> 'POST',
          'header'=>
            'Content-type: application/x-www-form-urlencoded',
          'content' => $postdata
          )
         ) $context  = stream_context_create($opts);
 $result = json_decode(file_get_contents($graph_url, false, $context));
         $albumid = $result->id; 
```

现在，如果我添加`privacy=>"value"`，它会给出`$albumid=null`。我不确定我需要在哪里添加隐私参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:00:24.257

创建相册时，可以在 post 请求中发送这些参数。

```
name, message, location and privacy. 
```

隐私字段的值可以这样设置，

```
 privacy={value: "CUSTOM"} (send this as post parameter) 
```

value 字段可以指定以下字符串之一：

```
EVERYONE, ALL_FRIENDS, NETWORKS_FRIENDS, FRIENDS_OF_FRIENDS, CUSTOM . 
```

由于 facebook 文档很烂，页面上没有提及它`albums object`。

但是，您可以在[帖子](http://developers.facebook.com/docs/reference/api/post/)对象上阅读它。

**编辑：（** 评论后）

在 php sdk 你可以做这样的事情，

```
$ret_obj = $facebook->api('me/albums', 'POST',
                                           array(
                                              'privacy' => '{value: "CUSTOM"}',
                                              'location' => 'India'
                                         )); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T12:47:43.943

创建相册的文档放在[https://developers.facebook.com/docs/reference/api/user/#albums](https://developers.facebook.com/docs/reference/api/user/#albums)

隐私设置是一个 json 样式的字符串。所以你可以创建一个 array() 并使用 json_encode() 来生成它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-03T13:36:08.727

使用 php sdk 也可以使用 php 样式 @kaur

```
$ret_obj = $facebook->api('/me/albums/', 'POST', array(
                                         'source' => '@' . $photo,
                                         'message' => 'Picture uploaded',
                     'location' => 'Goran',
                     'privacy'=> array('value'=>'EVERYONE'),    //'privacy'=> '{value: "EVERYONE"}', //worked too!! SELF, ALL_FRIENDS, EVERYONE
                                         )
                                      ); 
```

# django - 坚持使用 apache + mod_wsgi 部署 django

> ID：11034571
> 
> 赞同：4
> 
> 时间：2012-06-14T13:50:05.390
> 
> 标签：django, deployment, apache2, mod-wsgi, error-log

我收到一个 500 内部服务器错误，并在它写入的日志文件中：

```
[Thu Jun 14 16:30:22 2012] [error] [client 127.0.0.1] ImportError: Could not import settings 'mysite.settings' (Is it on sys.path?): No module named mysite.settings 
```

这是我的httpd.conf：

```
ServerName localhost

<VirtualHost *:80>
    ServerAdmin ttt@mysite.com
    ServerName mysite.com
    ServerAlias www.mysite.com
    DocumentRoot /var/www/mysite/
    LogLevel warn
    WSGIDaemonProcess processes=2 maximum-requests=500 threads=1
    WSGIScriptAlias / /var/www/mysite/mysite/wsgi.py
    Alias /media /var/www/mysite/mysite/static/media/
</VirtualHost> 
```

wsgi.py：

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T14:00:59.123

[mod-wsgi 文档http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)和 Django 部署文档[https://docs.djangoproject.com/en/1.4/howto/deployment](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/)都涵盖了这个问题[/wsgi/modwsgi/](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/)其中注意项目必须在您的 Python 路径上。您可以使用该`WSGIPythonPath`指令或在 Django 文档`python-path`中的指令中设置。`WSGIDaemonProcess`或者，您可以将其`sys.path`作为 mod-wsgi 文档状态添加到您的 wsgi 文件中。

# drawing - 跨多个平面的三角学

> ID：11034574
> 
> 赞同：1
> 
> 时间：2012-06-14T13:50:10.883
> 
> 标签：drawing, rotation, coordinates, trigonometry

请耐心等待 - 我发现这很难解释。

这更像是一个三角问题，但重要的是，这是在 JavaScript/KineticJS 中。

我有一系列包含'线'和'句柄'的'组'。这必须工作的方式，它最适合每个组有自己的坐标平面。我寻求帮助的问题是该解决方案不理想的唯一实例。

当这些组旋转时，它们的坐标平面也会旋转。这允许重用组对象，并且其子对象可以从组的原点进行测量，而无需担心父组的方向。向上总是向上......我的团队面对的方向并不重要。

我是新海报，所以无法添加图片。但是，我认为看到它是至关重要的。请参阅[http://i.imgur.com/WUVXE.png](http://i.imgur.com/WUVXE.png)

目标是将红色弧线（“手柄”）的未连接点连接到蓝线（“线”）上的黑点。出于演示目的，我将其设置为始终绘制 90 度。

尽管约定俗成，我使用的 API 顺时针旋转，红线的角度为 0，黄线的角度为 116，绿色为 180，蓝色为 296——所有这些都相对于屏幕左上角的同一个原点。这些角度会发生变化，所以我正在寻找计算红色手柄新端点的公式。

X 轴始终沿着每条线的中间直线移动。这条线是 20px 宽，所以它上面或下面有 10px 是“死区”。因此，红色手柄上的两个正确点是 (10,10) 和 (30,10)。手柄的半径为 20 像素。

不可能说 red.arcEndX = blue.blackDotX, red.arcEndY = blue.blackDotY 因为红色组和蓝色组的平面不同。例如，红色的 (0,0) 总是等于蓝色的 (200,0)。将每条线视为无法分离的链条。

那么，如何计算红色弧线的剩余点呢？它应该无缝连接到蓝线的边缘，即蓝线上黑点的中心点除了平移到红色坐标平面之外的位置。

我可能需要的所有测量值都是可用的，或者可以计算出来。

```
Handle.prototype.update = function() {

    /* if we are the red group, this.parent is our group and
       'prev' is the blue group. */

    var prev = this.parent.getPrev();  

    // somehow get the new (x,y) for point2 below:

    /* KineticJS SVG string.  this.origin and this.point1 never
       change. This (M)oves to 10,10, draws a (L)ine from
       this.origin.x, this.origin.y to this.point1.x, this.point1.y
       and (C)urves to this.point2.x, this.point2.y.  this.centerXY
       is the control point of that curve. */

    this.data = "M" + this.origin + "L" + this.point1 + "C" + this.point1 + "," + this.centerXY + "," + this.point2 + "L" + this.origin + "z";

    this.shape.setData(this.data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:09:27.343

万一有人偶然发现了这一点-我所拥有的是正确的，除非我无法适应原始翻译。如果您将每个平面的所有内容移动到 (0,0)，请执行 sin/cos，那么您会没事的

# qt - Qt：QGraphicObject 和 QImage

> ID：11034590
> 
> 赞同：0
> 
> 时间：2012-06-14T13:50:47.123
> 
> 标签：qt, qgraphicsview, qgraphicsscene, qimage

我有一个`QGraphicsObject`包含 a`QImage`和 ovveride的派生类

```
paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget) 
```

在痛苦中我成功地画了`QImage`。是的`QGraphicsObject`一个项目`QGraphicsScene`，后者在 a 内`QGraphicsView`。`QImage`尺寸超过`QGraphicsScene`尺寸。我的目的是为了`drag`显示`QImage`（或`QGraphicsObject`）的超出部分`QImage`。我怎样才能做到这一点？有`translate`画布`QImage`吗？

可以给我一些文档或示例吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:18:45.650

使用 QGraphicsPixmapItem 并让 QGraphicsView 为您处理拖动可能会更容易：http: [//qt-project.org/doc/qt-4.8/qgraphicsview.html#dragMode-prop](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#dragMode-prop)

# url - 如何从“example.com/id//”之类的 url 中获取空参数？

> ID：11034591
> 
> 赞同：0
> 
> 时间：2012-06-14T13:50:52.533
> 
> 标签：url, symfony1, query-string

我使用的是 symfony 1.0，下面是显示新闻描述的 URL。

```
http://news4u.com/search/news/id/344158/css//act/n 
```

上面的 CSS 的 URL 值缺失，URL 应该如下所示

```
http://news4u.com/search/news/id/344158/css/n/act/n 
```

当我`$this->getRequestParameter('css')`用来获取 css 的值时，我将其作为“act”，如果对“act”执行相同的操作，我将得到空值。

```
$getRequestParameter('css')=act
$getRequestParameter('act')=<EMPTY> 
```

我正在获取提到的 URL 的上述参数的值。

我想在上面的 URL 中获取 'act' 的值。如何得到它？

# objective-c - 在类别中添加 Objective C 实例变量

> ID：11034593
> 
> 赞同：-1
> 
> 时间：2012-06-14T13:51:02.703
> 
> 标签：objective-c

我知道在目标 c 中你不能在接口类别中添加实例变量。没关系，但今天我看到了一些我无法弄清楚的东西，（为什么这种行为是正确的？）

```
@interface XXXX:NSObject

@end

@interface XXXX(){

@private

    int x;
}

@end 
```

为什么我可以在空（）类别中添加添加实例变量，为什么在互联网上没有人提及。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:01:39.460

您可以将实例变量添加到匿名类别/类扩展（仅`()`用于类别名称），因为它们本质上只是主界面的私有扩展，并且只能有一个。

但是，您不能添加具有命名类别的新实例变量。但是，您可以使用[关联引用](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)来解决此问题。

# c# - 使用 WebRequest 和 WebResponse 不工作 C# 登录到 Https 网站

> ID：11034594
> 
> 赞同：2
> 
> 时间：2012-06-14T13:51:03.420
> 
> 标签：c#, .net, login, https, httpwebrequest

我正在开发一个程序，该程序将登录网站并获取某些数据。但是，我在发布登录参数和处理 cookie 时遇到了麻烦，因为每次我看到一个页面显示“您已注销或会话已过期”。很明显，我在发布参数或处理 cookie 时做错了，但不知道是哪个。我已经为此工作了一段时间，只是无法理解为什么它不能正常工作。

```
void Login2(string username, string password)
    {
        string pageSource;
        string formUrl = "https://forUrl.com";
        string formParams = string.Format("login={0}&sslProt={1}&pwd={2}&gru={3}", username, "", password, "115237091");
        string cookieHeader;

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(formUrl);
        req.AllowAutoRedirect = false;
        req.ContentType = "application/x-www-form-urlencoded";
        req.Method = "POST";
        byte[] bytes = System.Text.Encoding.ASCII.GetBytes(formParams);
        req.ContentLength = bytes.Length;
        using (Stream os = req.GetRequestStream())
        {
            os.Write(bytes, 0, bytes.Length);
        }
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        cookieHeader = resp.Headers["Set-cookie"];

        string getUrl = "https://Urlbehindform.com";   
        HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create(getUrl);
        getRequest.Method = "GET";
        getRequest.AllowAutoRedirect = false;
        getRequest.Headers.Add("Cookie", cookieHeader);
        HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
        using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
        {
            pageSource = sr.ReadToEnd();
        }
        Response.Redirect(getUrl);

    } 
```

我在执行 POST 时获取 cookie，并在执行 GET 时将其发回，但由于某种原因，这似乎不起作用。起初我以为是参数，但在使用 Tamper Data 和 Firefox 进一步查看问题后，登录参数似乎工作正常。任何帮助都会很棒，因为我已经为此工作了一段时间并且无法理解它。谢谢！

*更新*：

在尝试了一些建议后，我仍然无法让它发挥作用。然而，在深入研究 Data Tamper 后，似乎有一个带有登录参数的 POST，然后是一个 GET 到另一个页面，最后是 GET 到登录页面之后的页面（我试图去的那个） . 经过进一步调试后，我实际上发现我的登录 POST 没有像我想象的那样工作，因为响应头位置显示“/cv/scripts/A028/eng/logErr.asp”。这意味着我的其余代码可能一直都很好，因为 POST 没有给我一个有效的登录名。关于为什么我总是得到登录错误页面的任何建议？一如既往地感谢您的帮助。

*更新*：

在进一步使用 Tamper Data 之后，似乎我无法成功登录的原因是为了成功 POST 参数，需要已经获得 cookie。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:57:02.553

对两个请求都使用一个[CookieContainer](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)。这样您就不必手动复制 cookie。

我 [BMW1] 添加了一个名为 cookie 的 CookieContainer，但它仍然无法正常工作，我不确定我是否以正确的方式使用 CookieContainer。这是我的代码的更新版本。

由我[Hans Kesting]编辑，见[HK]评论

```
 void Login2(string username, string password)
    {
        string pageSource;
        string formUrl = "https://server/cv/scripts/A028/eng/logProc.asp?ntry=0&dbg=";
        string formParams = string.Format("login={0}&sslProt={1}&pwd={2}&gru={3}", username, "", password, "115237091");

        // [HK] create a container for the cookies, where they are added automatically
        CookieContainer cookies = new CookieContainer();
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(formUrl);
        req.CookieContainer = cookies;
        req.AllowAutoRedirect = false;
        req.ContentType = "application/x-www-form-urlencoded";
        req.Method = "POST";
        byte[] bytes = System.Text.Encoding.ASCII.GetBytes(formParams);
        req.ContentLength = bytes.Length;
        using (Stream os = req.GetRequestStream())
        {
            os.Write(bytes, 0, bytes.Length);
        }
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        // [HK] no need to add cookies "by hand", that will happen automatically
        //cookies.Add(resp.Cookies);

        string getUrl = "https://server/cv/scripts/A028/eng/home.asp";
        HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create(getUrl);
        // [HK] use the same cookiecontainer as on the first request - correct
        getRequest.CookieContainer = cookies; 
        getRequest.Method = "GET";
        getRequest.AllowAutoRedirect = false;
        HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
        // [HK] no need to add cookies, they should be there already
        //cookies.Add(getResponse.Cookies);
        using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
        {
            pageSource = sr.ReadToEnd();
        }
        // [HK] no need to add cookies, they should be there already
        // cookies.Add(getResponse.Cookies);
        Response.Redirect(getUrl);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:59:12.070

您可以使用可识别 Cookie 的 Web 客户端，

```
public class CookieAwareWebClient : WebClient
{
    public CookieContainer CookieContainer { get; set; }
    public Uri Uri { get; set; }

    public CookieAwareWebClient() : this (new CookieContainer())
    {
    }

    public CookieAwareWebClient(CookieContainer cookies)
    {
        this.CookieContainer = cookies;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
    {
         (request as HttpWebRequest).CookieContainer = this.CookieContainer;
    }
    HttpWebRequest httpRequest = (HttpWebRequest) request;
    httpRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
    return httpRequest;
    }

    protected override WebResponse GetWebResponse(WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
    String setCookieHeader = response.Headers[HttpResponseHeader.SetCookie];

    if (setCookieHeader != null)
    {
        //do something if needed to parse out the cookie.
        if (setCookieHeader != null)
        {
            Cookie cookie = new Cookie(); //create cookie
        this.CookieContainer.Add(cookie);
        }
    }
    return response;
    }
}
```

示例用法：

```
 var wc = new CookieAwareWebClient ();
wc.Headers["Content-type"] = "application/x-www-form-urlencoded";
string HtmlResult = wc.UploadString(URI, myParameters);
```

# wordpress - 如何将自定义字段添加到 MarketPress (Wordpress)？

> ID：11034595
> 
> 赞同：0
> 
> 时间：2012-06-14T13:51:05.140
> 
> 标签：wordpress

如何将自定义字段添加到 MarketPress (Wordpress)？

我想添加 2 个自定义字段，一个文本字段和一个数字字段。

我怎样才能做到这一点？

MarketPress：[http ://premium.wpmudev.org/project/e-commerce/](http://premium.wpmudev.org/project/e-commerce/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:10:36.657

解决了：

我安装了插件“高级自定义字段”，就是这样。:)

# selenium - 如何使用 Selenium Webdriver + Java 处理 IE8 中的自签名证书错误

> ID：11034597
> 
> 赞同：3
> 
> 时间：2012-06-14T13:51:10.897
> 
> 标签：selenium, internet-explorer-8, ssl-certificate

我现在已经被这个问题困扰了两天。

设想：

需要测试的网站有自签名证书。所以 Internet Explorer (8 in windows XP_ 显示

> “本网站提供的安全证书不是由受信任的证书颁发机构颁发的。本网站提供的安全证书是针对不同网站的地址颁发的。”

现在这在 IE8 和自签名证书的情况下是非常自然的，所以我采取了以下措施没有用

1.  在 IE 中手动添加/安装证书作为受信任的根证书。但它不会显示在列表中，但它会成功添加到所有其他选项卡，即受信任的根发布者、中间发布者权限、其他人。
2.  相同的证书被添加到 Firefox，在“服务器”下没有任何问题，并且按预期工作。
3.  我尝试使用以下代码，但其中一个适用于 selenium

    ```
    Proxy proxy = new Proxy();
    proxy.setProxyType(ProxyType.MANUAL);
    Proxy.setSslProxy("trustAllSSLCertificates");
    DesiredCapabilities capabilities1 = DesiredCapabilities.internetExplorer();
    capabilities1.setCapability(CapabilityType.PROXY, proxy); 
    ```

当这不起作用时，我尝试使用

```
DesiredCapabilities capabilities = new DesiredCapabilities();
                            capabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true); 
```

我已经安装了cybervillans 证书。

1.  我已经尝试了 [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_ERROR_PAGE_BYPASS_ZONE_CHECK_FOR_HTTPS_KB954312](http://support.microsoft.com/kb/954312)方法，完全知道它适用于 win7。

5.我什至尝试将URL更改为颁发机构，但问题仍然存在。

现在我别无选择。谁能向我指出我该如何进行？看来我永远坚持使用 IE8。

我在谷歌和这个网站上搜索了很多。但找不到我的问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T16:51:31.130

我像罗伯特写的那样使用它，像这样：

```
 if (driver instanceof InternetExplorerDriver) {
        driver.navigate().to("javascript:document.getElementById('overridelink').click()");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:51:29.020

当我在我们网站的开发/测试版本中使用 selenium 时，我经常会在 IE 屏幕上看到无效证书。要传递这些，您将以下内容发送到 IWebDriver 实例

driver.Navigate().GoToUrl("javascript:document.getElementById('overridelink').click()")

您看到的屏幕可能与错误证书屏幕略有不同，因此只需调整 getElementById 选择器以匹配锚的 Id。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-10T06:39:35.867

此更改将永久接受 IE 中的所有证书错误，但仍然是优雅的解决方案： [https ://stackoverflow.com/a/7738795/2546759](https://stackoverflow.com/a/7738795/2546759)

# android - 在我的片段中显示非进度对话框或警报消息

> ID：11034603
> 
> 赞同：0
> 
> 时间：2012-06-14T13:51:34.270
> 
> 标签：android, android-layout, android-listview, android-fragments, android-progressbar

我有在其中扩展`FragmentActivity`的类我将片段添加到布局中，如下所示

```
public class maincontrolActivity extends FragmentActivity  {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maincontrol);

                  oUnit fragment = new  oUnit();
                  fragmentTransaction.add(R.id.mainLayout,fragment, "MY_FRAG");
                  fragmentTransaction.commit();

}

} 
```

Ounit 看起来像

```
public class oUnit  extends Fragment {
         View view = inflater.inflate(
                R.layout.chemounit,
                container,
                false); 
```

///// 我的其他代码

```
 return view;
} 
```

`oCreateView`在`Ounit`我尝试添加进度条

```
 ProgressDialog connectionProgressDialog = new ProgressDialog( getActivity());
      connectionProgressDialog.setCancelable(false);
      connectionProgressDialog.setCanceledOnTouchOutside(false);
      connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
      connectionProgressDialog.setMessage("Uploading Leads...");
      connectionProgressDialog.show(); 
```

但它从不显示

我在这个片段列表中有我使用它的构造函数上下文的路径`view.getContext()`

我尝试显示`AlertDialog`

```
 AlertDialog.Builder alert = new AlertDialog.Builder(v.getContext());
                final EditText input = new EditText(v.getContext());
               alert.setView(input);
               alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int whichButton) {

                  //     Toast.makeText(getApplicationContext(), s_spin_text,
                        //       Toast.LENGTH_SHORT).show();

                   }
           });

            alert.setNegativeButton("Cancel",
          new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface dialog, int whichButton) {
                           dialog.cancel();
                   }
                   });
           alert.show(); 
```

这个问题是因为这条线吗

```
 View view = inflater.inflate(
                R.layout.chemounit,
                container,
                false); 
```

如是 ？如何更换它

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:02:31.057

我认为要做到这一点，你应该使用：[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)。

在那里你有方法`OnCreateDialog()` ，你可以在那里放置你的代码：

```
@Override
public Dialog onCreateDialog(final Bundle savedInstanceState) {
  final ProgressDialog connectionProgressDialog = new ProgressDialog( getActivity());
  connectionProgressDialog.setCancelable(false);
  connectionProgressDialog.setCanceledOnTouchOutside(false);
  connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
  connectionProgressDialog.setMessage("Uploading Leads...");
  connectionProgressDialog
  return connectionProgressDialog;
} 
```

# nfc - 我们可以复制 NFC TAGS 中的信息吗

> ID：11034609
> 
> 赞同：0
> 
> 时间：2012-06-14T13:51:47.417
> 
> 标签：nfc

我们可以复制信息吗？我的意思是：

我想在我的标签中存储一个唯一信息（我只想要一个具有唯一信息的标签）

例如：老板有一个标签（“我的安全文本”）..

员工可以在他的标签中复制（“我的安全文本”）吗？

并且如果老板的标签丢失意味着他如何使用相同的信息（“我的安全文本”）重新创建标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:51:25.247

听起来好像您不想拥有简单的数据存储标签（例如存储 NDEF 格式的数据）。这种简单标签的数据内容可以很容易地从一个标签复制到另一个标签。您可能应该研究提供更复杂功能的标签，例如身份验证或加密。仍然负担得起的此类标签的一个示例是 NXP 的 DESFire 芯片，请参阅功能描述[http://www.nxp.com/products/identification_and_security/smart_card_ics/mifare_smart_card_ics/mifare_desfire/](http://www.nxp.com/products/identification_and_security/smart_card_ics/mifare_smart_card_ics/mifare_desfire/)

要重新创建丢失的标签，您需要保留其上存储的信息的备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T08:19:55.227

您可以使用 tagstand tasklauncher 应用程序来保护您的数据。本软件中的数据有2种格式。一种是公开的，允许所有用户访问，另一种是私有的，存储在本地手机内存中，只有手机持有者才能访问。

希望这些信息对您有所帮助。

# spring - 为什么 org.hibernate.impl.SessionFactoryImpl 没有被垃圾收集？

> ID：11034619
> 
> 赞同：1
> 
> 时间：2012-06-14T13:52:12.617
> 
> 标签：spring, garbage-collection, heap-memory, tomcat6, opencms

我有一个网站部署到一个 tomcat 服务器，该服务器已经非常迅速地用尽了它的可用堆空间（老一代）然后崩溃了。当我进行堆转储时，我发现大部分（如果不是全部）空间被大量 org.hibernate.impl.SessionFactoryImpl 实例占用（准确地说是 802，保持活动大小为 541mb）（引用自 org .apache.catalina.loader.WebappClassLoader -> java.util.concurrent.ConcurrentHashMap$HashEntry)

关于服务器服务器是由apache2使用proxypass代理的tomcat 6。

关于我使用 opencms 来管理 webapp 内容的软件，因此所有代码都通过其模板类调用 Hibernate 使用 springs HibernateTemplate 访问。数据源保存在tomcat中，通过org.springframework.jndi.JndiObjectFactoryBean访问并注入我的数据源（org.apache.commons.dbcp.BasicDataSource），会话工厂配置如下。

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list><value>com.someobjects.SomeObject</value>
        </list>
    </property> 
```

有谁知道为什么 org.hibernate.impl.SessionFactoryImpl 没有被垃圾收集？

我可以提供所需的任何进一步信息......我真的对此感到不知所措。任何帮助深表感谢。

# spring - Spring 3.1 TransactionManagement 与多个 TransactionManagers 和 Aspectj

> ID：11034622
> 
> 赞同：1
> 
> 时间：2012-06-14T13:52:17.933
> 
> 标签：spring, transactions

我有一个包含三个 EntityManagerFactory bean 的应用程序。每个都有自己的 DataSource 和 TransactionManager（我们称它们为 tx1、tx2 和 tx3）。

如果我使用 @EnableTransactionManagement(mode = AdviceMode.ASPECTJ) 并使用 @Transactional("tx1") 注释服务，我会收到以下消息：

跳过事务连接点 [...] 因为没有配置事务管理器

如果我删除 AdviceMode.ASPECTJ 模式一切正常。

**注意：** 对 JtaTransactions 没有要求，因为每个 DataSource 都可以在其自己的事务中访问。

# php - RBAC 推荐的 Role->Task->Operation 方法是什么

> ID：11034625
> 
> 赞同：1
> 
> 时间：2012-06-14T13:52:35.250
> 
> 标签：php, yii, rbac

我开始在 Yii 中使用 srbac。

可用选项：创建角色、任务和操作，然后分配：操作到任务、任务到角色。

我的问题是：我需要为每个操作创建一个任务吗？因为我想将 1 个操作分配给最低用户级别，将 4 个操作分配给超级管理员。

希望我很清楚，丹尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:10:52.713

*Role*，*Task*和*Operation*都是“**授权项**”，您必须拥有它。它们只提供一种以**树**的方式组织权限的方法，然后您可以选择树的任何节点并将其分配给用户。当然，也可以将多个节点分配给用户，无论是否为叶子。

如果您只需要设计一个非常**简单**的应用程序，您可以简单地创建 4 个“操作”（或任务或角色），并根据您的标准将它们分配给用户。但**树方案**推荐用于中大型应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T19:51:43.463

我想，前段时间我在 Yii 中研究 RBAC 时也有类似的问题。我认为需要清除**的是操作、任务和角色的真正含义**。我的结论在[这里](http://www.yiiframework.com/forum/index.php/topic/28993-what-exactly-are-tasks-in-yiis-rbac/page__view__findpost__p__139568)列出，是基于 Yii 项目创始人本人的一个很好的评论，在[这里](http://www.yiiframework.com/forum/index.php/topic/2313-rbac-confusion/page__p__16035#entry16035)可以找到。简而言之，操作是最基本的构建块（Yii RBAC 世界的原子）。开发人员（**而且只有他们**）定义这些并从中构建任务。一项任务由一个或多个操作组成。角色由任务（至少一个）构建而成。

在我的设计中，我使用任务作为基本构建块，任务的示例是“编辑自己的个人资料”、“创建文章”、“发送私人消息”等。对我来说，将这些 auth 项目分解为更精细的粒度是一种[过度设计](http://www.merriam-webster.com/dictionary/overdesign)。

另外，我认为你的应用程序的 RBAC 树不应该满足它现在面临的简单要求，而是从一开始就更加健壮。我建议设置任务和角色并将角色分配给用户。我发现这是维护网站的一种更直观的方式。

# javascript - 有没有办法在 GWT 中应用 FocusPanel 与多个子小部件

> ID：11034631
> 
> 赞同：4
> 
> 时间：2012-06-14T13:52:52.943
> 
> 标签：javascript, html, gwt

我希望将鼠标悬停事件添加到其中包含多个子小部件的面板。当我用 FocusPanel 尝试它时，我被“SimplePanel 只能包含一个子小部件”异常停止。有没有其他方法可以在具有多个子小部件的面板上使用鼠标悬停事件？例如在以下代码中

`<g:FocusPanel ui:field="parent"><childwidget1/><childwidget2/><childwidget3/><g:FocusPanel>`

我需要将鼠标悬停事件添加到父面板。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:56:09.360

在子小部件和子小部件之间添加一个子`FlowPanel`小部件（或放置多个小部件的任何面板，具体取决于您的布局需要）`FocusPanel`：

```
<g:FocusPanel ui:field="parent">
  <g:FlowPanel>
    <my:childwidget1/>
    <my:childwidget2/>
    <my:childwidget3/>
  </g:FlowPanel>
</g:FocusPanel> 
```

# mysql - 如何从另一个应用程序中的控制器调用另一个控制器在不同应用程序中的操作？

> ID：11034633
> 
> 赞同：0
> 
> 时间：2012-06-14T13:53:00.580
> 
> 标签：mysql, ruby-on-rails-3, model-view-controller

我有一个名为“news_feed_backend”的网络服务和一个名为“news_feed_frontend”的活动资源客户端，我想调用“news_feed_backend”控制器的索引操作，它实际上在客户端以xml格式呈现新闻提要（news_feed_frontend broswer），我只是不知道我将如何完成它。我的 news_feed_backend 控制器如下：

```
# Load an RSS feed from the supplied URL. If the feed is not loaded, return nil.

def load_latest_news_feed_for_url(rss_feed_url_to_load)

     to_return = nil

  if rss_feed_url_to_load != nil

   begin

     to_return = RSS::Parser.parse(open(rss_feed_url_to_load).read, false).items[0...5]

rescue

     to_return = nil

   end

 end
 to_return
end

def index

@fd = FeedDetail.new

@url = @fd.get()

@news_feed = load_latest_news_feed_for_url(@url)

render :xml => @news_feed, :content_type => 'application/rss'

end 
```

我在我的 news_feed_frontend 的（客户端）控制器中尝试这样的事情：

```
def index

 url_for :controller => 'feed_details', :action => 'index'

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:44:30.250

试试这个 - 使用这种方法，您的 url 将保留在“新闻提要”上，并且您的输出应该是来自后端的 xml。

```
def index      
      render :template => 'feed_details/index'
end 
```

我希望它有帮助

# joomla - 为什么 Joomla 不会在首页呈现我的 jdoc 标签？

> ID：11034640
> 
> 赞同：0
> 
> 时间：2012-06-14T13:53:17.257
> 
> 标签：joomla

我们刚刚将客户端从他们的服务器迁移到云解决方案。我们几乎没有问题地移动了他们的 Joomla 1.5 站点。数据库很容易迁移。我们必须清理一些杂散的“本地主机”数据库连接。一切看起来都很好。

除了首页。出于某种奇怪的原因，它拒绝呈现 jdoc 标签。完全没有。

在查看他们的 Joomla 安装的首页时，当前可以找到以下 HTML：

```
<!DOCTYPE HTML>
<html lang="en-gb" dir="ltr">

<head>
<meta charset="utf-8" />
<jdoc:include type="head" />

<jdoc:include type="modules" name="header-scripts" /> 
```

这是唯一存在此问题的页面。站点上的所有其他页面都正确呈现 jdoc 标记。我对这个问题的谷歌搜索似乎最终大多数人都遇到了相反的问题：首页呈现良好，而其他页面则没有。在处理较新版本的 Joomla 时似乎还有其他相关问题，但我无法将它们之间的代码差异联系起来，尤其是当 Joomla 2.5.x 使用完全不同的方法来构建页面时。

对于如何解决这个问题，有任何的建议吗？

笔记：

*   Joomla 1.5
*   MySQL 5.1
*   PHP 5.3
*   以前在专用服务器上运行，现在在云服务器上运行
*   这是我第一次涉足 Joomla，我并没有留下深刻的印象。
*   使用 YOOThemes 作为模板引擎（我读过一些这可能是问题，但我不知道如何解决它。）

# unicode - SVG 特殊字符，例如2或 &$178; 或²

> ID：11034648
> 
> 赞同：0
> 
> 时间：2012-06-14T13:54:01.457
> 
> 标签：unicode, svg, special-characters, highcharts

我试图在 SVG 上加上特殊字符（²）（ --> ² ），但没有结果。有没有办法在 SVG 上放置 unicode 字符？

这是使用 highcharts 2.1.6 的示例代码

```
<div id="container" style="height: 300px"></div>​

$(function() {
    var renderer = new Highcharts.Renderer(
    $('#container')[0],
    400,
    300);
    renderer.text(100, 100, 100, 100, 5).attr({
        'stroke-width': 2,
        zIndex: 3,
        rotation: 170,
        text: 'sdfsdf&#178;'
    }).add();
});​ 
```

非常感谢。

# c# - 从 Excel 导入到 MVC3 应用程序的最快方法

> ID：11034653
> 
> 赞同：3
> 
> 时间：2012-06-14T13:54:21.663
> 
> 标签：c#, sql-server, asp.net-mvc-3, entity-framework

我正在从 CSV 文件导入到我的 ASP.NET MVC3/C#/Entity Framework 应用程序。

目前这是我的代码，但我正在寻求优化：

```
var excel = new ExcelQueryFactory(file);
var data = from c in excel.Worksheet(0)
            select c;
var dataList = data.ToList();

List<FullImportExcel> importList = new List<FullImportExcel>();
foreach (var s in dataList.ToArray())
{
    if ((s[0].ToString().Trim().Length < 6) && (s[1].ToString().Trim().Length < 7))
    {
        FullImportExcel item = new FullImportExcel();
        item.Carrier = s[0].ToString().Trim();
        item.FlightNo = s[1].ToString().Trim();
        item.CodeFlag = s[2].ToString().Trim();

        //etc etc (50 more columns here)

        importList.Add(item);
    }
}

PlannerEntities context = null;
context = new PlannerEntities();
context.Configuration.AutoDetectChangesEnabled = false;
int count = 0;

foreach (var item in importList)
{
    ++count;
    context = AddToFullImportContext(context, item, count, 100, true);
}

private PlannerEntities AddToFullImportContext(PlannerEntities context, FullImportExcel entity, int count, int commitCount, bool recreateContext)
{
      context.Set<FullImportExcel>().Add(entity);

      if (count % commitCount == 0)
      {
          context.SaveChanges();
          if (recreateContext)
          {
              context.Dispose();
              context = new PlannerEntities();
              context.Configuration.AutoDetectChangesEnabled = false;
          }
      }
      return context;
} 
```

这工作得很好，但速度不够快，而且我需要做的导入每月至少有 200 万行。有没有更好的批量进口方法？我是否更好地完全避免使用 EF 并使用 SQLConnection 并以这种方式插入？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:06:27.767

我确实喜欢您只提交每 X 条记录（在您的情况下为 100 条）的记录。

我最近编写了一个系统，每月一次，需要一次更新超过 50,000 条记录的状态 - 这是更新每条记录并为每条更新的记录插入审计记录。

本来我是用实体框架写的，做了这部分任务花了5-6分钟。SQL Profiler 向我展示了它正在执行 100,000 个 SQL 查询——每条记录一个 UPDATE 和一个 INSERT（正如我猜的那样。）

我将其更改为一个存储过程，它采用逗号分隔的记录 ID 列表、状态和用户 ID 作为参数，它执行大规模更新，然后进行大规模插入。现在需要 5 秒。

在您的情况下，对于这个数量的记录，我建议创建一个 BULK IMPORT 文件并将其传递给 SQL 以导入。

[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T15:05:43.000

对于 SQL Server 中的大量插入，Bulk Copy 是最快的方法。您可以使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类从代码中访问 Bulk Copy。您必须为您的列表创建一个 IDataReader，或者您可以使用[此](http://wimpool.nl/blog/DotNet/using-sqlbulkcopy-with-list-t)IDataReader 插入我编写的通用列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:02:59.800

感谢 Andy 的提醒——这是 SQL 中使用的代码，得到了帮助很大的 Pinal Dave 的一点帮助——http: [//blog.sqlauthority.com/2008/02/06/sql-server-import- csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/](http://blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/ "皮纳尔戴夫") :)

```
DECLARE @bulkinsert NVARCHAR(2000)
DECLARE @filepath NVARCHAR(100)
set @filepath = 'C:\Users\Admin\Desktop\FullImport.csv'
SET @bulkinsert = 
    N'BULK INSERT FullImportExcel2s FROM ''' + 
    @filepath + 
    N''' WITH (FIRSTROW = 2, FIELDTERMINATOR = '','', ROWTERMINATOR = ''\n'')'

EXEC sp_executesql @bulkinsert 
```

仍然需要做一些工作才能将其放入代码中，但是我们将 50000 行的时间缩短到 25 秒，而不是一个小时，这是一个巨大的改进！

# http - Varnish：隐藏内部后端请求

> ID：11034654
> 
> 赞同：1
> 
> 时间：2012-06-14T13:54:23.303
> 
> 标签：http, varnish

那是我的场景：

1) Varnish( `172.16.217.131:80`)，接收来自客户端的请求，即： `http://172.16.217.131:80/a.png`

2) 请求被转发到默认后端 ( `127.0.0.1:8000`)

3）默认后端接收请求并处理它

4）该处理导致一个新的URL，即：`http://172.16.217.132:80/a.png`（**如您所见IP已更改）

5)`172.16.217.132:80`是 Varnish 配置文件中的另一个后端

6) 新的 URL 指向应该由 Varnish 提供的资源（该资源通常是图像）

我的问题是：客户端需要执行 2 次 GET 才能获取图像。

我的问题：如何配置 varnish 以在内部接收来自第一个后端（`127.0.0.1:8000`）的响应，并从第二个后端（）获取数据`172.16.217.132:80`，然后将数据发送到客户端？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:28:52.103

通过步骤4；

> 4）该处理导致一个新的URL，即： `http://172.16.217.132:80/a.png`（**如您所见IP已更改）

您的意思是它会导致 HTTP 重定向吗？然后您可以检查 vcl_fetch 中的后端响应状态代码（检查 301、302 等），使用 Location 标头作为您的新 url 并重新启动。我[在 Varnish Book 中找到了一个很好的例子](https://www.varnish-software.com/static/book/Saving_a_request.html#restart-in-vcl)

```
sub vcl_fetch {
        if (req.restarts == 0 &&
                 req.request == "GET" &&
                 beresp.status == 301) {
                set beresp.http.location = regsub(beresp.http.location,"^http://","");
                set req.http.host = regsub(beresp.http.location,"/.*$","");
                set req.url = regsub(beresp.http.location,"[^/]*","");
                return (restart);
        }
} 
```

# iphone - 在 iphone 上运行的后台任务

> ID：11034656
> 
> 赞同：0
> 
> 时间：2012-06-14T13:54:36.417
> 
> 标签：iphone, ios5, ios4, multitasking

我有一些测试代码用于让我的应用程序保持在后台状态下运行，这在 iOS 5.1 模拟器上运行良好，但在实际设备上表现不佳。

现在我已经知道我必须遵循的要求，所以我将“背景模式”设置为 voip 和位置。

在我的委托的 applicationDidEnterBackground 方法中，我正在调用以下函数，我称之为“doBackgroundActivity()”来请求应用程序在后台完成一些长时间运行的任务的时间：

```
-(void) threadedMethod{    
while(true){
    NSLog(@"looping");            
    [self showLocalNotification:@"This notification will come every 2 min. if the app is running in background. Close it!"];        
    [NSThread sleepForTimeInterval: (5)];        // 60 sec = 1 min
} 
```

}

```
 -(void) doBackgroundActivity{
        self->_backgroundTask = [ [UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{ 
                [[UIApplication sharedApplication] endBackgroundTask: self->_backgroundTask];
                self->_backgroundTask = UIBackgroundTaskInvalid;
            }
        ];

        [self threadedMethod];

[[UIApplication sharedApplication] endBackgroundTask:self->_backgroundTask];
    self->_backgroundTask = UIBackgroundTaskInvalid;
} 
```

如您所见，doBackgroundAcitivity() 只是调用 threadedMethod() 并且所做的只是运行一个无限循环，该循环每 5 秒左右发送一次本地通知。

现在在模拟器中，当我运行它并最小化应用程序时，我每隔 5 秒左右就会看到一个通知。即使当我运行其他应用程序时，应用程序也会继续在后台运行，我看到我的应用程序正在发送通知。

但这不会在设备上发生。看起来操作系统在发送第一个通知后立即终止了应用程序，并且我没有看到我希望稍后看到的任何后续通知？

我还需要做些什么来让应用程序在后台运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:27:38.997

如果您要做的只是在您的应用关闭时向用户显示通知，您应该使用[UILocalNotifications](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)。

您可以设置通知何时触发，是否应该重复，以及重复之间的时间量。

作为旁注，我不建议在循环中使用 sleep() 来控制代码何时执行，因为它会阻止线程执行任何操作，并且不利于任何其他想要使用该线程的任务. 相反，您应该使用 NSTimers 和其他控制代码执行时间的方法。

# wordpress - 从 wordpress 导入 Liferay 会在内容上引发 ArticleTitleException

> ID：11034659
> 
> 赞同：1
> 
> 时间：2012-06-14T13:54:42.803
> 
> 标签：wordpress, liferay, liferay-6

我正在尝试使用 wordpress 导入器插件 1.2 将 wordpress 内容导入 liferay 6.1 它在博客上运行良好，但在页面内容上失败 - 页面是在结构中创建的，但是内容会引发异常：

```
Starting the Wordpress importer
Creating page  "Hello world!"
com.liferay.portlet.journal.ArticleTitleException
at com.liferay.portlet.journal.service.impl.JournalArticleLocalServiceImpl.validate(JournalArticleLocalServiceImpl.java:3280)
at com.liferay.portlet.journal.service.impl.JournalArticleLocalServiceImpl.validate(JournalArticleLocalServiceImpl.java:3370)
at com.liferay.portlet.journal.service.impl.JournalArticleLocalServiceImpl.addArticle(JournalArticleLocalServiceImpl.java:187) 
```

如果我编辑 wordpress 导出的 XML 文件并从 `<wp:post_type>page</wp:post_type>` 导入 `<wp:post_type>post</wp:post_type>` 成功更改。

任何想法可能是什么情况？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:31:37.473

我检查了源代码，发现由于条件而发生此异常

```
if ((classNameId == 0) &&
    (titleMap.isEmpty() ||
     Validator.isNull(titleMap.get(defaultLocale)))) {

    throw new ArticleTitleException();
} 
```

因此，在您的情况下，`JournalArticle`您要导入的存在以下缺陷之一

1.  该文章`classNameId`在导入时不可用
2.  任何语言环境都没有可用的标题，或者 defaultLocale 没有可用的标题

你能在word press上查看这篇特定的文章吗？

# formatting - 如何在 extjs 中使用荷兰语格式格式化数字字段？

> ID：11034662
> 
> 赞同：4
> 
> 时间：2012-06-14T13:54:53.750
> 
> 标签：formatting, numbers, extjs4, extjs4.1

我想将用户输入的数字格式化为荷兰语格式。IE。使用十进制分隔符作为**，**千位分隔符作为**。**

```
blur: function () {
   Ext.util.Format.number(this.value, '000,000.00')
} 
```

我想在模糊上格式化我的数字字段，上面的代码工作正常，但我的要求是获得这样的格式 - '000000.000,00'。如何在 extjs 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T13:58:17.013

又快又脏，只需设置[`thousandSeparator`](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.util.Format-property-thousandSeparator)and [`decimalSeparator`](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.util.Format-property-decimalSeparator)。它应该工作：

```
//Set these once, right after Ext.onReady
Ext.util.Format.thousandSeparator = '.';
Ext.util.Format.decimalSeparator = ',';

//Then this should work:
Ext.util.Format.number(12345.67, '0,000.00'); //output 12.345,67 
```

或者更好的是，使用[本地化](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/example/locale/dutch-form.html)，因此可以根据语言要求更改格式。

**边注：**

文档写道：

> 要允许对国际数字使用英国/美国分组字符 (,) 和小数 (.) 指定格式字符串，请将 /i 添加到末尾。例如：0.000,00/i

并从[源代码中的注释](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/source/Format.html#Ext-util-Format-method-number)

```
// The "/i" suffix allows caller to use a locale-specific formatting string.
// Clean the format string by removing all but numerals and the decimal separator.
// Then split the format string into pre and post decimal segments according to *what* the
// decimal separator is. If they are specifying "/i", they are using the local convention in the format string. 
```

在我看来，这似乎意味着开发人员可以使用特定的格式字符串“0.000,00”来格式化给定的数字，而*不是*意味着开发人员可以使用这种特定的格式字符串将数字格式化为他们想要的格式。他们仍然需要更改默认分隔符设置。

**编辑**

演示链接：http: [//jsfiddle.net/chaoszcat/nbWwN/](http://jsfiddle.net/chaoszcat/nbWwN/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T20:39:01.293

我现在可以为用户在数字字段中输入的值工作。

正如莱昂内尔指出的那样，这是必要的：

```
// set this once after Ext.onReady
Ext.util.Format.thousandSeparator = '.';
Ext.util.Format.decimalSeparator = ','; 
```

然后将您的处理程序更改为：

```
blur: function(field) {
   field.setRawValue(Ext.util.Format.number(field.getValue(), '0.000,00/i'));
} 
```

您还应该在您的数字字段中包含此配置：

```
decimalSeperator: ',' 
```

它将允许用户输入自己的十进制符号。

**工作示例**

[**这**](http://jsfiddle.net/Geronimo/ferXz/)是一个使用数字字段的工作小提琴。

**一句警告**

`Ext.form.field.Number`不支持格式化，`blur`如果用户编辑该字段然后不返回到它再次编辑它，我上面给出的处理程序将完全正常工作，如果他重新聚焦该字段，它将验证并尝试将数千个标记更正为小数.

如果您使用此字段将数据发送回服务器，它将以显示的格式（带有千位分隔符）发送回，我不知道这是否是您想要的。

如果您只是想要格式化的数字，您应该执行您在上面尝试执行的操作，但使用`textfield`. 这样它就不会将您的千位重新配置为小数。

如果您想要数字字段的所有功能（微调器、最小/最大验证、步长增量等），您将不得不查看扩展`numberfield`类，[**这是一个已经存在的用户扩展**](https://gist.github.com/857285)，这几乎正是您所需要的，但它包含一个货币符号，很容易将其取出。

# ruby-on-rails - 如何在 ruby 中动态调用关联？

> ID：11034666
> 
> 赞同：3
> 
> 时间：2012-06-14T13:55:17.423
> 
> 标签：ruby-on-rails, ruby

我正在尝试动态获取模型的关联。例如；

```
model1 has_many model2s
model1 has_many model3s 
```

通常我可以做`x.model2s`或`x.model3s`。但是，如果我不知道想要哪个协会怎么办。是否有任何片段，例如：`x["model2s"]`动态调用关联？

谢谢Çağdaş。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-05-02T08:00:46.120

我认为这更安全，因为它仅限于关联方法：

```
x.association("model#{i}s").scope 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T13:56:24.673

是的，您可以`x.send("model#{i}s")`假设您已将数字保存在中，`i`或者仅`x.send(foo)`当您将全名作为字符串或符号保存在`foo`.

文档：

*   [对象#send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)
*   [对象#public_send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-public_send)

# excel - 其他列表中的 Excel 过滤器

> ID：11034668
> 
> 赞同：0
> 
> 时间：2012-06-14T13:55:21.593
> 
> 标签：excel, drop-down-menu, filter

我在excel中有2个列表。第一个用于搜索（我想有保管箱），第二个列表用于数据。在第二个列表中，我过滤了数据。但我现在要做的是从第一个列表中给出的参数中过滤。

如何在第一页传输过滤器标题？

![搜索列表和数据列表](../Images/13ae5c14d3c8b1f0a86cea4b47f48d60.png)

我想在“搜索”列表中选择品牌，结果将在“行”列表中过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:29:16.577

如果没有 VBA，我想不出一种方法来做这件事。当然很想知道是否有办法，所以也许其他人可以插话。

也就是说，这是一个小的 VBA 程序，可以得到你想要的。它基于搜索表中品牌下拉框中的更改而起作用。请按照以下步骤实施：

*   在 Excel 中按键盘上的 Ctrl + F11 一次。这将打开 VBE
*   在左上角的项目 - VBAProject 窗口中，单击引用搜索表的对象
*   将以下代码粘贴到右侧参考该表的大窗口中。
*   如果使用 XL2007 或更高版本，请确保将文件保存为 .xlsm 文件（启用 Excel 宏的文件）。

    Private Sub Worksheet_Change(ByVal Target As Range)

    ```
    Dim wksFilter As Worksheet, wks As Worksheet
    Dim rngFilter As Range

    'replace "A6" with the cell where the Brand dropdown is
    If Target.Address = "$A$6" Then

        Set wks = Sheets(Target.Parent.Name)
        Set wksFilter = Sheets("Rows")

        'may need to adjust the number 1 to match the exact location of your Search Column in the rows sheet
        wksFilter.UsedRange.AutoFilter 1, wks.Range(Target.Address)

    End If 
    ```

    结束子

# objective-c - 在编辑 UITextField 时，是否有推荐的甚至自动的方法将其移动到视图中？

> ID：11034673
> 
> 赞同：1
> 
> 时间：2012-06-14T13:55:47.447
> 
> 标签：objective-c, ios, uikit, uitextfield

现在以各种方式实现了这一点，我想知道：如果从 a 开始编辑`UITextField`并且出现键盘，是否有推荐的甚至自动化的方式可以通过向上滚动来保持文本字段可见？我认为向上滚动整个根视图是最简单和最好的。到目前为止，我在 API 中是否缺少某些东西，可以避免我自己编写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:09:29.097

我将所有 UITextFields 都放在 contentView 上（在我的示例中，我将此视图称为“ **movableView** ”），然后当用户点击其中一个文本字段时

```
//The hardcoded 10's and 20's are the origin of the view before
//the user starts messing with it! 

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    [self scrollViewToTextField:textField];
    //Other stuff I want to do here
    return YES;
}

- (void)scrollViewToTextField:(id)textField
{
    UITextField* tf = (UITextField*)textField;

    CGPoint newOffset = tf.frame.origin;
    newOffset.x = 10;
    newOffset.y = 20 - newOffset.y;

    //This is a category method on UIView which simply adjusts the views
    //frame over a delay.
    [self.movableView moveToX:newOffset.x andY:newOffset.y withDuration:0.3f];
} 
```

编辑完成后，您必须将视图移回

```
-(void)textFieldDidEndEditing:(UITextField *)textField {

    [self resetView];
    // do other stuff here such as grab the text and stick it in ivars etc.

}

-(void)resetView {
    [self.movableView moveToX:10.0f andY:10.0f withDuration:0.3f];
} 
```

以防万一 - 这是完整性的类别方法

```
//  UIView+BasicAnimation.h
-(void) moveToX:(CGFloat) x andY:(CGFloat) y withDuration:(NSTimeInterval) duration;

//  UIView+BasicAnimation.m
-(void) moveToX:(CGFloat) x andY:(CGFloat) y withDuration:(NSTimeInterval) duration {
    CGRect newFrame = self.frame;
    newFrame.origin.x = x;
    newFrame.origin.y = y;

    [UIView beginAnimations:@"BasicAnimation" context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:duration];

    self.frame = newFrame;

    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:04:28.330

我认为不存在任何这样的事情，这似乎是一个奇怪的遗漏。当您考虑 iPad 分体键盘的存在时，它似乎更像是一次应该正确完成并在 API 中提供的东西。

对于当前的项目，我正在尝试`TPKeyboardAvoidingScrollView`. （https://github.com/michaeltyson/TPKeyboardAvoiding）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:07:58.123

`UIScrollView`当字段获得 firstResponder 状态时，通常通过使用并修改内容偏移量来实现这一点。

# installation - 未生成 Installshield 响应文件

> ID：11034675
> 
> 赞同：3
> 
> 时间：2012-06-14T13:55:53.513
> 
> 标签：installation, windows-installer, installshield

我已经使用 InstallShield 2011 构建了一个安装程序。我需要进行静默安装，因此我运行了带有 -r 标志的 setup.exe 来记录响应文件。但是，安装程序似乎并没有真正生成文件（我在 windows 目录中查看了 .iss 文件 - 实际上我已经查看了整个硬盘中的 .iss 文件）

我正在 Windows 7 64 位 Ultimate Edition 上安装并从提升的命令提示符运行

有没有人见过这个或有任何想法为什么文件没有生成？

# c# - 日期时间格式错误

> ID：11034679
> 
> 赞同：0
> 
> 时间：2012-06-14T13:56:09.237
> 
> 标签：c#, asp.net, wpf

我收到一个异常错误，“输入字符串的格式不正确。” “确保您的方法参数格式正确。将字符串转换为 DateTime 时，在将每个变量放入 DateTime 对象之前解析字符串以获取日期”。

它指向这段代码的最后一行：

```
cnaIntakeVSOutputDetail_Intake.Add(new IntakeVsOutput(
facility,
UnitRepository.Units(facility).SingleOrDefault(u => u.Code.Equals(reader.To("UNIT_CODE", ""))),
new Patient()
{
     Account = reader.To("PATIENT_ID", ""),
     MRN = reader.To("MRN", ""),
     Name = reader.To("NAME_FULL", ""),
     Room = reader.To("ROOM_BED", ""),
 },
     reader.To("INFO", ""),
     Convert.ToDateTime(reader["TRDATE"]),
     Convert.ToInt32(reader["MENU_ID"]),
     Convert.ToInt32(reader["VALUE"]),
     null, null, null)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:59:59.477

`reader["TRDATE"]`不包含`Convert.ToDateTime`可以转换为`DateTime`值的字符串。

这可能是因为它是一个空字符串`DBNull.Value`or `null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:02:48.467

尝试 DateTime.TryParse 替代：

```
string dateString;
 DateTime dateValue;
 DateTime.TryParse(dateString, out dateValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:13:02.620

首先，您需要确保您的 TRDATE 列包含值，否则它将触发错误输入格式不正确。为此，您可以使用

> string.IsNullorEmpty(reader["TRDATE"].ToString())

方法，然后您需要解析值，否则设置默认值或将其保留为 null 以返回类型。

# c++ - weak_ptr C++ 中的比较运算符

> ID：11034683
> 
> 赞同：4
> 
> 时间：2012-06-14T13:56:22.880
> 
> 标签：c++, stl, c++11, weak-ptr

我仍然是新stl成员的新手。谁能指出为什么这段代码会出现分段错误？

```
#include<memory>
#include<stdio.h>
#include<map>
#include<set>
#include<string>
using namespace std;
struct StubClass
{
    weak_ptr<string> b;
    int c;
    friend bool operator==(StubClass x,StubClass y);
    friend bool operator<(StubClass x,StubClass y);
    StubClass(weak_ptr<string> x):b(x){c=5;}    
};
bool operator==(StubClass d,StubClass c) { return d.b==c.b;}
bool operator<(StubClass d,StubClass c) { return d.b<c.b; }

int main()
{
    shared_ptr<string> spPtr(new string("Hello"));
    weak_ptr<string> wpPtr(spPtr);
    StubClass hello(wpPtr);
    set<StubClass> helloSet;
    helloSet.insert(hello);
    if(helloSet.find(StubClass(wpPtr))!=helloSet.end()) printf("YAYA");
    else puts("Bye");
} 
```

错误在行

> if(helloSet.find(StubClass(wpPtr))!=helloSet.end()) printf("YAYA");

更多研究表明，调用 StubClass 的比较器函数时存在问题。我在[这里编译程序](http://ideone.com/1uT0s)

编辑：

```
bool operator==(StubClass d,StubClass c) { return d.b.lock()==c.b.lock();}
bool operator<(StubClass d,StubClass c) { return d.b.lock()<c.b.lock(); } 
```

这解决了这个问题。我应该阅读更多内容。:(无论如何，社区中的任何人都可以解释第一个代码给出 SIGSEGV 的原因。我最终想通了，但仍然是一个很好的解释不会受到伤害。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T15:27:20.943

您的原始代码段错误，因为您不小心设置了无限递归：

```
bool operator<(StubClass d,StubClass c) { return d.b<c.b; } 
```

没有`operator<`for `weak_ptr`。但是，您确实有从`weak_ptr`to的隐式转换`StubClass`。并且`StubClass`有一个`operator<`. 所以这个函数无限期地调用自己：因此是段错误。

inkooboo 目前接受的答案也将导致未定义的行为，可能导致崩溃。由于`weak_ptrs`在程序执行期间过期（比您的测试用例涉及更多的事情），那么它们的顺序将会改变。当这发生在 中的两个之间`weak_ptrs`时`set`，`set`将被损坏，可能导致崩溃。但是，有一种`owner_less`专门为此用例设计的使用方法：

```
bool operator==(const StubClass& d, const StubClass& c)
{
    return !owner_less<weak_ptr<string>>()(d.b, c.b) &&
           !owner_less<weak_ptr<string>>()(c.b, d.b);
}
bool operator<(const StubClass& d, const StubClass& c)
{
    return owner_less<weak_ptr<string>>()(d.b, c.b);
} 
```

或者，如果您愿意，也可以使用成员函数对其进行编码`owner_before`。两者是等价的：

```
bool operator==(const StubClass& d, const StubClass& c)
{
    return !d.b.owner_before(c.b) && !c.b.owner_before(d.b);
}
bool operator<(const StubClass& d, const StubClass& c)
{
    return d.b.owner_before(c.b);
} 
```

使用这些函数，即使一个`weak_ptr`过期而另一个没有过期，它们的排序仍然保持稳定。因此，您将拥有一个定义明确的`set`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T14:07:22.787

如果要比较存储在 weak_ptr 中的字符串，请执行以下操作：

```
bool operator<(StubClass d, StubClass c) 
{
    std::shared_ptr<std::string> a = d.b.lock();
    std::shared_ptr<std::string> b = c.b.lock();

    if (!a && !b)
        return false; 

    if (!a)
        return true;

    if (!b)
        return false;

    return *a < *b;
} 
```

[运行结果](http://ideone.com/9R33N)

# java - 异常翻译拦截器。好主意？

> ID：11034686
> 
> 赞同：0
> 
> 时间：2012-06-14T13:56:26.387
> 
> 标签：java, oop

只是想征求一些意见：你认为有一个拦截器类来拦截所有异常并将它们转换为特定于应用程序的异常是一个好主意吗？基本上异常处理（没有别的）从一个类移到另一个类。

您能对此提出任何优点/缺点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:32:20.770

在我看来，在某些情况下它可以用来降低复杂性。我有一个带有嵌入式数据库的应用程序；我可能会丢失记录、sql 异常、各种各样的东西，我不想向我的用户报告这些。一些 UI 类有一个方法调用另一个调用的方法，等等，并且在某处一些代码运行到其中一个并开始将其传递回来。在特定于应用程序设计的适当级别，我捕获它，可能记录它，并将其包装在特定于应用程序的异常中，它的工作是生成一条消息，引导我的用户使用它做正确的事情，除了通知他出事了。特定于应用程序的异常是为将要看到结果消息的用户量身定制的，并且可以响应一堆“低级”而生成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:35:49.197

我会说这是一个非常糟糕的主意。如果我使用的接口记录了它在某些条件下抛出 IllegalArgumentException，我希望在满足此条件时得到 IllegalArgumentException，而不是某些特定于应用程序的异常。

如果它有一个错误并且它抛出一个 NullPointerException，我更喜欢让 NullPointerException 直接识别问题，而不是让它包含在一些特定于应用程序的异常中，该异常不能说明问题是什么以及问题出在哪里。

现在，如果您的类不是 AOP 意义上的拦截器，而是另一个对象或 API 的包装器（例如 spring-jdbc 是 JDBC 的包装器），并且它仅将检查的异常转换为特定于应用程序的异常有意义方式，我不会看到任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:26:49.847

是的，这是一个合理的想法。以 Spring`org.springframework.jdbc.support.SQLExceptionTranslator`为例。它特别适合将恼人的已检查异常转换为未检查异常。

通常的缺点是增加了复杂性 - 所以这取决于您有多少特定于应用程序的异常。

# php - PHP将日文字符串作为其他内容插入utf8表，但仍能成功读取

> ID：11034688
> 
> 赞同：0
> 
> 时间：2012-06-14T13:56:28.737
> 
> 标签：php, mysql, utf-8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:44:50.030

# c - 无需复制粘贴即可实现不同但相似的结构/功能集

> ID：11034689
> 
> 赞同：9
> 
> 时间：2012-06-14T13:56:34.417
> 
> 标签：c, data-structures, interface, abstract-data-type

[我正在为 C (这里](https://github.com/ShabbyX/shDS))实现一组常见但不那么微不足道（或容易出错）的数据结构，并提出了一个让我思考的想法。

**简而言之，实现两个使用相似算法但具有不同接口的结构的最佳方法是什么，而无需复制粘贴/重写算法？**最好，我的意思是最可维护和可调试的。

我认为很明显为什么你不想拥有相同算法的两个副本。

### 动机

假设您有一个`map`带有一组关联函数 ( ) 的结构（称为它`map_*()`）。由于地图需要将任何东西映射到任何东西，我们通常会用一个`void *key`and来实现它`void *data`。`int`但是，想想to的映射`int`。在这种情况下，您需要将所有键和数据存储在另一个数组中，并将它们的地址提供给`map`，这不太方便。

现在想象一下，如果有一个类似的结构（称为它`mapc`，c 表示“副本”），在初始化过程中获取`sizeof(your_key_type)`和`sizeof(your_data_type)`给出`void *key`和`void *data`插入时，它将`memcpy`用于复制映射中的键和数据，而不仅仅是保留指针。使用示例：

```
int i;
mapc m;
mapc_init(&m, sizeof(int), sizeof(int));
for (i = 0; i < n; ++i)
{
    int j = rand();  /* whatever */
    mapc_insert(&m, &i, &j);
} 
```

这非常好，因为我不需要保留另一个`i`s 和`j`s 数组。

### 我的想法

在上面的例子中，`map`和`mapc`是非常密切相关的。仔细想想，`map`结构`set`和功能也很相似。我已经想到了以下方法来只实现一次他们的算法并将其用于所有算法。然而，他们都没有让我很满意。

1.  使用宏。将函数代码写入头文件中，将依赖于结构的内容保留为宏。对于每个结构，定义适当的宏并包含文件：

    ```
    map_generic.h

    #define INSERT(x) x##_insert

    int INSERT(NAME)(NAME *m, PARAMS)
    {
        // create node
        ASSIGN_KEY_AND_DATA(node)
        // get m->root
        // add to tree starting from root
        // rebalance from node to root
        // etc
    }

    map.c

    #define NAME map
    #define PARAMS void *key, void *data
    #define ASSIGN_KEY_AND_DATA(node) \
    do {\
        node->key = key;\
        node->data = data;\
    } while (0)
    #include "map_generic.h"

    mapc.c

    #define NAME mapc
    #define PARAMS void *key, void *data
    #define ASSIGN_KEY_AND_DATA(node) \
    do {\
        memcpy(node->key, key, m->key_size);\
        memcpy(node->data, data, m->data_size);\
    } while (0)

    #include "map_generic.h" 
    ```

    这种方法还不错，但也不是那么优雅。

2.  使用函数指针。对于依赖于结构的每个部分，传递一个函数指针。

    ```
    map_generic.c

    int map_generic_insert(void *m, void *key, void *data,
        void (*assign_key_and_data)(void *, void *, void *, void *),
        void (*get_root)(void *))
    {
        // create node
        assign_key_and_data(m, node, key, data);
        root = get_root(m);
        // add to tree starting from root
        // rebalance from node to root
        // etc
    }

    map.c

    static void assign_key_and_data(void *m, void *node, void *key, void *data)
    {
        map_node *n = node;
        n->key = key;
        n->data = data;
    }

    static map_node *get_root(void *m)
    {
        return ((map *)m)->root;
    }

    int map_insert(map *m, void *key, void *data)
    {
        map_generic_insert(m, key, data, assign_key_and_data, get_root);
    }

    mapc.c

    static void assign_key_and_data(void *m, void *node, void *key, void *data)
    {
        map_node *n = node;
        map_c *mc = m;
        memcpy(n->key, key, mc->key_size);
        memcpy(n->data, data, mc->data_size);
    }

    static map_node *get_root(void *m)
    {
        return ((mapc *)m)->root;
    }

    int mapc_insert(mapc *m, void *key, void *data)
    {
        map_generic_insert(m, key, data, assign_key_and_data, get_root);
    } 
    ```

    这种方法需要编写更多可以在宏方法中避免的函数（如您所见，这里的代码更长）并且不允许优化器内联函数（因为它们对`map_generic.c`文件不可见）。

那么，你将如何实施这样的事情呢？

注意：我在stack-overflow问题形式中编写了代码，如果有小错误请见谅。

附带问题：对于“此结构复制数据而不是指针”的后缀，任何人都有更好的主意吗？我用`c`的是“副本”，但在英语中可能有一个更好的词，我不知道。

* * *

### 更新：

我想出了第三种解决方案。在此解决方案中，只`map`编写了一个版本，即保留数据副本的版本 ( `mapc`)。此版本将用于`memcpy`复制数据。另一个`map`是对此的接口，获取`void *key`和`void *data`指针并发送`&key`和`&data`，`mapc`以便复制它们包含的地址（使用`memcpy`）。

这个解决方案的缺点是正常的指针分配是由 完成的`memcpy`，但它完全解决了这个问题并且非常干净。

或者，只能实现`map`并使用 extra `vectorc`，`mapc`首先将数据复制到 vector ，然后将地址提供给 a `map`。这有一个副作用，即删除`mapc`要么会慢很多，要么会留下垃圾（或需要其他结构来重用垃圾）。

* * *

### 更新 2：

我得出的结论是粗心的用户可能会像编写 C++ 一样使用我的库，一个接一个地复制。因此，我放弃了这个想法，只接受指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:20:43.330

您大致涵盖了两种可能的解决方案。

预处理器宏大致对应于 C++ 模板，具有相同的优缺点：

*   它们很难阅读。
*   复杂的宏通常很难使用（考虑参数的类型安全等）
*   它们只是更多代码的“生成器”，因此在编译输出中仍然存在很多重复性。
*   另一方面，它们允许编译器优化很多东西。

函数指针大致对应于 C++ 多态性，恕我直言，它们更干净且通常更易于使用的解决方案，但它们在运行时带来了一些成本（对于紧密循环，很少额外的函数调用可能会很昂贵）。

我通常更喜欢函数调用，除非性能真的很关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:18:00.907

您正在寻找的是多态性。C++、C# 或其他面向对象的语言更适合这项任务。尽管许多人尝试在 C 中实现多态行为。

代码项目有一些关于这个主题的好文章/教程：

[http://www.codeproject.com/Articles/10900/Polymorphism-in-C](http://www.codeproject.com/Articles/10900/Polymorphism-in-C)

[http://www.codeproject.com/Articles/108830/Inheritance-and-Polymorphism-in-C](http://www.codeproject.com/Articles/108830/Inheritance-and-Polymorphism-in-C)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T15:21:12.397

您还没有考虑过第三种选择：您可以创建一个外部脚本（用另一种语言编写）来从一系列模板生成您的代码。这类似于宏方法，但您可以使用 Perl 或 Python 之类的语言来生成代码。由于这些语言比 C 预处理器更强大，因此您可以避免通过宏执行模板时固有的一些潜在问题。在我想使用复杂宏的情况下，我使用了这种方法，例如您的示例 #1。最后，结果证明它比使用 C 预处理器更不容易出错。缺点是在编写生成器脚本和更新 makefile 之间，最初设置起来有点困难（但 IMO 最终值得）。

# php - 在 PHP 中如何在不提供源代码的情况下将网站交付给客户端

> ID：11034691
> 
> 赞同：0
> 
> 时间：2012-06-14T13:56:47.780
> 
> 标签：php, jsp, source-code-protection

与在 JSP 中一样，我们将“WAR”文件提供给客户端，它包含 .class 文件和其他配置文件，但不包含源代码，在 PHP 中有什么方法可以在不提供源代码的情况下将项目（网站）交付给客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:01:15.223

Facebook 创建了一个名为 HipHop php 的项目，这是一个 php 编译器。

看到这个帖子：

[你能“编译”PHP代码吗？](https://stackoverflow.com/questions/1408417/can-you-compile-php-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:06:12.083

简短的回答，不是真的。

我的意思是您可以将 php 编译成单个 .phar 文件，但是任何具有中等 php 知识的人都可以从中获取代码。

还有一些解决方案[http://www.ioncube.com/](http://www.ioncube.com/)虽然我不知道有人可以多么容易地从中获取代码，但是我强烈建议不要使用任何这样的解决方案，因为他们通常需要这个“编译”的用户代码给你他们的专有软件来运行它。

# css - CSS 嵌入 dwt 与外部样式表

> ID：11034696
> 
> 赞同：1
> 
> 时间：2012-06-14T13:57:07.453
> 
> 标签：css, dwt

我创建了一个包含 46 个页面的新网站：[http](http://www.lampshade111.com/) ://www.lampshade111.com/ 我使用 Microsoft Expression Web 4 并采用动态 Web 模板。所有 css 都嵌入到 dwt 页面的标题中，并更新到每个单独的网页。一切看起来和工作都很完美 - 没有问题。

但是，我读过的所有内容都建议使用外部样式表。因此，本着“良好实践”的精神，我从 dwt 标题中删除了 css，并使用（链接）到 dwt 的外部样式表。当然，各个页面由 dwt 更新，并且链接的 css 文件显示在每个页面上。同样，一切看起来和以前一样完美。

问题：在使用外部样式表后查看我的网站时，我的浏览器中的网站速度要慢得多。

我有另一个有 256 页的网站，所有 css 都嵌入在主 dwt 的标题中 - 没有外部样式表。 [http://www.hoylelamps.com/](http://www.hoylelamps.com/) 多年来一直运行良好。

问题：有什么理由不在 dwt 的标题中使用 css 吗？这是否比外部样式表更有效（更快）？我找不到有关此主题的任何信息。

谢谢你的帮助 ？- 吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:32:28.480

我无法想象为什么外部样式表比外部样式表“慢得多”。链接的样式表将在加载后立即被缓存，无需再次加载。这意味着您加载的第二页和第三页应该更快，除非您在每个页面上使用完全不同的格式。

嵌入式样式表一开始会运行得更快，因为只需要加载一个资源。但随着时间的推移，维护多个嵌入样式表的页面所需的工作将变得更加沉重。请记住，每次您在任何页面中更改甚至一个 CSS 规则时，您都必须在每个页面中进行更改并再次上传所有这些页面。如果不这样做，您将在整个站点中使用不同格式的各个页面。

外部链接样式表排除了这个问题。一份样式表，一份要更正和上传的文件。我能想到的唯一会使您的页面加载或响应更慢的事情如下：

*   非常大的样式表
*   使用“import”而不是“link”命令（一些浏览器对这些命令的反应不同）
*   您正在使用非标准 CSS 或非常密集的样式命令。

没有看到 CSS 我真的不能给你更多的建议。浏览器首先必须加载两个文件这一事实将导致其运行速度稍慢。但是很难理解为什么整个站点运行得更慢。

以下是一些建议：

*   您是否在其他浏览器和其他计算机上检查和测试过您的页面？也许它根本不是页面。可能是您正在使用的浏览器或计算机。
*   如果您的样式表很大，请将其分解为逻辑组件。我有用于格式化表格、表单和特殊组件的样式表，它们不会出现在每一页上。仅加载与该页面相关的 CSS。有一个主样式表，然后是针对特定类型组件的专用样式表，就像上面提到的那样。
*   检查您正在使用的命令类型。您是否充分利用了级联、继承和特异性？尝试创建尽可能高效的 CSS。

保持嵌入式样式表一开始可能很容易，但是更新和维护一个带有嵌入式样式表的大型网站会更加繁重。

希望有帮助。

# jquery - 改进脚本：如果有值则隐藏输入并用文本显示 div / 获取值并用文本显示 div

> ID：11034699
> 
> 赞同：0
> 
> 时间：2012-06-14T13:57:15.300
> 
> 标签：jquery

我有一个执行以下操作的脚本：

[http://jsfiddle.net/KVDBB/](http://jsfiddle.net/KVDBB/)

- 输入字段的值属性可以为空 - 输入后显示带有更改按钮的 div

- 在页面加载之前输入已经有一些值 - 然后它显示带有更改按钮的 div

但问题是它使用 replaceWith 函数并替换了输入 - 而它需要提交表单。

请帮助改进脚本，以隐藏输入而不是替换它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:16:51.053

示例在这里[http://jsfiddle.net/deerua/KVDBB/3/](http://jsfiddle.net/deerua/KVDBB/3/)

```
$("#consumer-email").blur(function(){
    $(this)
    .attr("readonly","readonly")
    .addClass("noborder");
    $('.changeEmail').show();
}).blur();

$('.changeEmail').bind('click', function(e){
    $("#consumer-email")
        .removeAttr("readonly")
        .removeClass("noborder ");
    $('.changeEmail').hide();
}); 
```

只需使用输入宽度**隐藏边框**和属性**禁用** ​</p>

# html - 404 页面未找到（图像显示默认）

> ID：11034700
> 
> 赞同：0
> 
> 时间：2012-06-14T13:57:18.423
> 
> 标签：html, .htaccess, http-status-code-404

如果任何技术专家可以提供帮助，我有一个非常严重的问题......提前谢谢你..

我有以下 html 文件**，我无法对其进行任何控制**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Untitled</title>
</head>
<body>
<a href="http://cafebar.ro/home.php" target=_blank><img class="photo" width="100%"     src="http://cityadvertisement.com/Photo-Gadgets/Sportsgirls/photo-102.jpg"></a>
</body>
</html> 
```

现在我想做的是，如果找不到上面的图像，那么它应该显示默认图像（我无法更新上面的 html 文件）。但是在服务器上，我可以创建 e404.html 页面，如果服务器上不存在图像，则会显示该页面，但是当我在 html 页面上运行时，它不显示任何内容......并且在我的雅虎主机上，我没有 .htaccess

谁能告诉我如何在上面的 html 页面上显示默认图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:15:59.073

如果您无法更改 HTML 文档，那么除非您可以影响`src`属性中所指的服务器，即 cityadvertisement.com，否则您就没有运气了。重要的是该服务器的响应，而不是其他服务器对其他请求的错误响应。

如果您有权访问该服务器，则应使其在不存在真实图像时返回一些默认*图像*以响应对[http://cityadvertisement.com/Photo-Gadgets/Sportsgirls/photo-102.jpg的请求。](http://cityadvertisement.com/Photo-Gadgets/Sportsgirls/photo-102.jpg)`img`返回 HTML（错误）文档并没有帮助，因为浏览器需要图像并且在处理标签时会丢弃 HTML 文档响应。

我不太明白为什么你说你可以“创建 e404.html 页面”但不能使用 .htaccess。这是否意味着服务器已修复 .htaccess 将 e404.html 设置为 404 错误的错误文档？那你就被困住了，我害怕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:45:41.973

不确定这是否是最佳解决方案...使用您拥有的 html 页面的 iframe 创建一个新页面。有脚本来检查图像是否可用，否则在运行时更改图像 src。

# android - 空气 3 下载 mp3

> ID：11034701
> 
> 赞同：0
> 
> 时间：2012-06-14T13:57:24.703
> 
> 标签：android, ios, actionscript-3, air

我想在移动设备 iO 或 android 上下载 mp3 文件，因为我不想每次都从服务器下载。我编写了简单的代码，但无法正常工作。文件太大，因为没有编码，保存后无法再播放。

请帮助和抱歉英语不好。

```
private var sound:Sound;
        public function loadSound(tmpUrl:String):void
        {
            sound = new Sound();

            sound.addEventListener(Event.COMPLETE,onLoadSuccessSound, false, 0, true);
            sound.load(new URLRequest(tmpUrl));
        }
        protected function onLoadSuccessSound(event:Event):void
        {
            var fileData:ByteArray = new ByteArray();
            sound.extract(fileData, sound.bytesTotal);

            var file:File = new File(File.applicationStorageDirectory + "\\ppp.mp3");
            var fs:FileStream = new FileStream();
            fs.open(file, FileMode.WRITE);

            fs.writeBytes(fileData,0,fileData.length);
            fs.close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:14:14.480

基本上答案是使用 URLStream 和 FileStream。

问题非常普遍和涵盖，例如，在这里[使用 Adob​​e AIR](https://stackoverflow.com/questions/342994/download-a-file-with-adobe-air)和[AS3 下载文件：URLStream 将文件保存到桌面？](https://stackoverflow.com/questions/3614199/as3-urlstream-saving-files-to-desktop)

# web-applications - 使用 requirejs 和主干的 Web 应用程序的文件结构

> ID：11034706
> 
> 赞同：1
> 
> 时间：2012-06-14T13:57:40.690
> 
> 标签：web-applications, backbone.js, requirejs, web-application-project

我正在考虑使用 requirejs 和主干为 Web 应用程序定义文件结构的最佳方法。我有两个想法（1）（2）。
根据你的看法，什么是最好的，或者你会改变什么？

* * *

(1)

```
|-- vendor
     |-- js (jquery, underscore ....)
|-- images
|-- css
|-- spec
|-- templates
|-- js
|    |-- utils
|    |-- models
|    |-- collections
|    |-- views
|    conf.js
|    app.js
|    router.js
|- index.html 
```

* * *

(2)

```
|-- assets
       |-- js (jquery, underscore ....)
       |-- css
       |-- images
|-- src
       |-- templates
       |-- js
            |-- views
            |-- models
            |-- collections
            |-- utils
           conf.js
           app.js
           router.js
|-- spec         
|-- index.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:38:35.530

其实不同的方式各有优缺点。最重要的是找到合适的文件组织方式。以下是我目前正在做的项目的组织方式。这种方式的焦点将相同的模块相关文件放置在一个文件夹中。例如：people模块，这个模块的所有文件都放在modules/base/people目录下。本模块更新维护后，只需要关注本目录下的文件就行，不会影响目录外的文件，提高了可维护性。

**希望我的回答能给你一些帮助，希望你给点宝贵的意见。**

![在此处输入图像描述](../Images/61b39299faf927e822c633631f24345d.png)

# ruby - 区分逻辑和结构/异常错误

> ID：11034707
> 
> 赞同：0
> 
> 时间：2012-06-14T13:57:41.417
> 
> 标签：ruby, rspec, cucumber

我正在使用 Rspec 和 Cucumber 学习 Ruby 开发。我很难知道什么时候必须从一个切换到另一个。我知道 Rspec 用于逻辑错误，而 Cucumber 用于结构/异常错误。

我怎么知道它给出了什么类型的错误？是否存在某种错误报告模式。

例如，`expected ...`是一个逻辑错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:34:02.483

Cucumber 通常用于验收测试，但在幕后您使用 Capybara 步骤进行浏览器自动化，当然 Rspec 也可以使用这些步骤。

所以这取决于你。您可以使用 Cucumber 进行验收测试，使用 Rspec 进行单元测试，或者使用 Rspec 进行所有测试。我个人选择后者，但这完全取决于你。尝试两者，看看它如何为你工作。

# node.js - Heroku + Socket.io 有时有效，有时无效

> ID：11034709
> 
> 赞同：1
> 
> 时间：2012-06-14T13:57:45.343
> 
> 标签：node.js, heroku, socket.io

我已经阅读了一些文章，并且知道您需要 xhr-polling for socket.io 才能在 heroku 上工作，这就是我目前所拥有的：

```
var app = require('http').createServer();
var io = require('socket.io').listen(app, {origins: '*:*'});

io.configure(function () {
        io.set("transports", ["xhr-polling"]);
});

io.sockets.on('connection', function(socket) {
        console.log("Connected...");
        socket.on('message', function(message) {
        console.log("Message in:" + message.toString());
    }
} 
```

这段代码有时可以工作，有时它会停止`console.log("Connected...")`并且不会进入`socket.on('message', function(message)`. 我不知道为什么它只在感觉喜欢的时候才起作用。我也尝试重新启动应用程序但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:19:40.023

除了设置传输给`xhr-polling`你还需要设置轮询持续时间

`io.set("polling duration", 10);`

# java - 使用 WebDriver 暂时绕过隐式等待

> ID：11034710
> 
> 赞同：24
> 
> 时间：2012-06-14T13:57:57.490
> 
> 标签：java, selenium, selenium-webdriver, webdriver, wait

当使用隐式等待时，**[正如这里所建议的那样](https://stackoverflow.com/a/10950905/56285)**，我*有时*仍然想断言元素的**立即**不可见或不存在。

换句话说，我*知道一些元素应该被隐藏，并且希望我的测试能够**快速*做出断言，而不需要花费几秒钟，因为（否则有用）隐式等待。

我尝试过的一件事是这样的辅助方法：

```
// NB: doesn't seem to do what I want
private boolean isElementHiddenNow(String id) {
    WebDriverWait zeroWait = new WebDriverWait(driver, 0);
    ExpectedCondition<Boolean> c = invisibilityOfElementLocated(By.id(id));
    try {
        zeroWait.until(c);
        return true;
    } catch (TimeoutException e) {
        return false;
    }
} 
```

但是在上面的代码中，只有**在隐式等待时间过去**`until()`后才返回调用，即它没有做我想要的。

 **这是迄今为止我发现的唯一可行的方法：

```
@Test
public void checkThatSomethingIsNotVisible()  {
    turnOffImplicitWaits();
    // ... the actual test
    turnOnImplicitWaits();
} 
```

... 其中 eg`turnOffImplicitWaits()`是常见 Selenium 超类中的助手：

```
protected void turnOffImplicitWaits() {
    driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
} 
```

但这不是很优雅，我认为。**有什么更简洁的方法可以偶尔绕过隐式等待吗？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-15T09:00:19.307

鉴于 Selenium 似乎没有直接提供我想要的东西（基于 Mike Kwan 和 Slanec 所说的），这个简单的辅助方法就是我现在使用的方法：

```
protected boolean isElementHiddenNow(String id) {
    turnOffImplicitWaits();
    boolean result = ExpectedConditions.invisibilityOfElementLocated(By.id(id)).apply(driver);
    turnOnImplicitWaits();
    return result;
}

private void turnOffImplicitWaits() {
    driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
}

private void turnOnImplicitWaits() {
    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
} 
```

如果元素被隐藏或根本不存在，则该方法返回 true；如果可见，则返回 false。无论哪种方式，检查都会立即完成。

使用上述方法至少比在测试用例本身中调用`turnOffImplicitWaits()` and更干净`turnOnImplicitWaits()`。

有关相同方法的微调版本，另请参阅这些答案：

*   [使用 try-finally 重新打开隐式等待](https://stackoverflow.com/a/23359199/56285)
*   [使用`By`定位器作为参数](https://stackoverflow.com/a/25001911/56285)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-28T18:32:40.503

我还建议将参数更改为“By”定位器，以便在查找元素时更加灵活。

```
protected boolean isElementHiddenNow(By locator) {
    turnOffImplicitWaits();
    boolean result = false;
    try {
       result = ExpectedConditions.invisibilityOfElementLocated(locator).apply(driver);
    }
    finally {
       turnOnImplicitWaits();
    }
    return result;
} 
```

这样，如果需要，您可以通过 css 进行搜索，而不仅仅是 id：

```
By PartLinkLocator = By.cssSelector("div.search-result div.row a"); 
```

'当然，您的定位器可能应该设计为只返回一个元素（不像我快速抓取的“By”示例，它返回css行表中的所有部分链接......）所以，一个“id”示例看起来像

```
By usernameLocator = By.id("inputEmail");
myResult = isElementHiddenNow(usernameLocator); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-10T11:03:10.423

我的实现：

```
using (driver.NoImplicitWait())
{
    ....
} 
```

使用扩展方法：

```
public static NoImplicitWait NoImplicitWait(this IWebDriver driver)
{
    return new NoImplicitWait(driver);
} 
```

和类：

```
public sealed class NoImplicitWait : IDisposable
{
    private readonly IWebDriver _driver;

    public NoImplicitWait(IWebDriver driver)
    {
        _driver = driver;
        _driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(0));
    }

    public void Dispose()
    {
        _driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(30));
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-29T08:17:23.303

[@Jonic 的回答](https://stackoverflow.com/a/11047564)帮助了我，但是我会在块中添加一个`try { } finally { }`并调用以确保它总是重新打开。`turnOnImplicitWaits()``finally`

```
protected boolean isElementHiddenNow(String id) {
    turnOffImplicitWaits();
    boolean result = false;
    try {
       result = ExpectedConditions.invisibilityOfElementLocated(By.id(id)).apply(driver);
    }
    finally {
       turnOnImplicitWaits();
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T15:24:22.583

我的方法是完全绕过隐式等待，并在我自己的`findElement()`和`findElements()`我现在默认使用的方法中重新实现它（增加可见性检查等）。这样，当我想立即检查某些内容时，我可以调用原始的 WebDriver 方法，这当然不会等待。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-01T12:59:28.937

在大量依赖隐式等待思维方式的现有代码中，并且没有 CSS 来拯救，我找到了一种方法来解决这种事情，用 Jsoup 对其进行补充，并继续使用 Jsoup：

```
# this is straightforward Scala... put the types and it is Java.
val innerHtml = seleniumWebElementFatherInstance.getAttribute("innerHTML")
val jsoupElements = Jsoup.parse(innerHtml).select("div.your.css.selector") 
```**

# ms-access - 过滤然后保存

> ID：11034713
> 
> 赞同：0
> 
> 时间：2012-06-14T13:58:16.813
> 
> 标签：ms-access, vba, ms-access-2003

我有两种形式：“Cover”和“Form_1”。我在“COVER”中有两个组合框。一个包含年份列表，第二个包含名称列表。第一个是数字类型，第二个是文本。

在“封面”上有一个按钮，单击按钮可将您带到“Form_1”。“Form_1”包含“COVER”中相同的两个下拉菜单，它存储从“CoverR”中选择的确切值。

问题：问题在于它应该能够在从下拉菜单中选择特定值然后保存时过滤掉特定数据。但它首先保存从下拉菜单中选择的值，然后过滤掉数据。因此，2011 年和 2012 年出现了相同的数据。

它应该能够先过滤特定数据然后保存。有没有办法做到这一点？例如，创建一个“保存”按钮，以便仅在单击按钮时保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:14:50.380

我想我想出了解决方案：

只需在单击时将字段链接到组合框。

stLinkCriteria = "[Program_Name]='" & Me![Combo2] & "' AND [BudgetYear]=" & Me![Combo0]

# php - 当天的项目

> ID：11034717
> 
> 赞同：2
> 
> 时间：2012-06-14T13:58:27.033
> 
> 标签：php, arrays, date, multidimensional-array

所以我有一个多维数组，包含 36 个数组。

我希望一个页面以每个数组仅在特定日期可用的方式显示“当天的项目”，然后在所有其他数组首先在其他日期出现之前再次显示。集合不一定需要随机化。

这**不是**重复的，[因为](https://stackoverflow.com/q/3234692/951402)在我的情况下，我无法编辑甚至直接查询任何数据库，也不能写入文件或其他任何东西来永久标记某个项目已成为特色。

然而，我可以存储一个包含起始日期的变量，它可以用作参考点，以某种方式计算应该在当前日期显示哪个数组。

但是，数学从来都不是我的强项，所以我不知道如何进行如此非常复杂的计算。我也没有编程能力知道这个概念是否是最好的。

你有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:02:53.857

我不确定这是否重要，但您可以在当前日期进行模运算：

```
$messages = array('hi, how are you', 'nice weather eh?', 'get lost!');
$idx = floor(time() / 86400) % count($messages);

echo $messages[$idx]; 
```

每天它都会为那一整天挑选一个；然后移动到下一个，依此类推。最后它会回到开头。

第一项是随机的，但之后是顺序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:03:18.187

我认为您必须将数据存储在程序/页面代码之外，以便每次/每天加载页面时检查它（日期等）。

# php - 500 内部服务器错误，使用量增加

> ID：11034718
> 
> 赞同：0
> 
> 时间：2012-06-14T13:58:28.560
> 
> 标签：php

由于我允许超过 3 或 4 个用户登录我的网站，它现在变得异常缓慢，并且经常出现 500 内部服务器错误。

这是一个使用 wordpress 的 SQL 数据库，我从笔记本电脑的 MAMP 移动到在线服务器。这个过程导致了一些 URL 等错误，我必须在数据库中使用查找和替换进行更正。

可能有什么我错过了导致这个吗？我在找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:06:41.023

您需要查找 PHP 错误日志并检查错误。还要检查 MySQL 日志文件是否有错误。任何致命错误都应该记录在某处，并且日志消息是您的系统告诉您出了什么问题的方式。

# iphone - 在两个表视图之间传递数据

> ID：11034722
> 
> 赞同：0
> 
> 时间：2012-06-14T13:58:32.750
> 
> 标签：iphone, ios5, uiviewcontroller, uitableview

我想做的是..我想在两个表视图之间传递数据。

在我的根视图控制器中，我使用一个数组，然后为 RootViewController 填充它并在

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

我这样做的方法：

```
if (indexPath.row == 0)
    {
        self.schedule.title = @"Show1";
        NSLog(@"SCHEDULE CONTROLLER TITLE = %@", schedule.title);
        NSLog(@"FIRST ROW ");
    }
    if (indexPath.row == 1) {
        self.schedule.title = @"Show2";
        NSLog(@"SECOND ROW");
    }
    if(indexPath.row == 2){
        self.schedule.title = @"Show3";
        NSLog(@"THIRD ROW");
    }

    schedule = [[ScheduleViewController alloc] initWithNibName:@"ScheduleViewController" bundle:nil];
    [self.navigationController pushViewController:schedule animated:YES]; 
```

schedule 是另一个表视图，所以.. 我正在做的是比较 schedule 的标题来决定 schedule 表视图的内容，但有些它是如何没有获取数据的。

这是`ViewDidLoad`时间表视图的方法：

```
 [super viewDidLoad];

    if ([self.title isEqualToString:@"Show1"])
    {
        showSchedule = [[NSArray alloc] initWithObjects:@"SUNDAY",@"MONDAY",@"TUESDAY" , nil];
    }
    if ([self.title isEqualToString:@"Show2"])
    {
        showSchedule = [[NSArray alloc] initWithObjects:@"WEDNESDAY",@"THURSDAY",@"FRIDAY" , nil];
    }else {
        showSchedule = [[NSArray alloc] initWithObjects:@"SATURDAY", nil];
    }

    [self.tableView reloadData]; 
```

正在返回 null ，因此它在最后`self.title`进入 else 循环。任何想法我在这里做错了什么..？

提前感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:29:55.293

试试这个。

```
if ([self.title isEqualToString:@"Show1"])
     { 
```

替换此行。

```
if ([ self.navigationItem.title isEqualToString:@"Show1"])
   { 
```

然后尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:26:56.477

在分配视图之前添加标题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:37:57.823

在分配控制器后设置您的标题

```
NSString *titleOfTableVC ;

if (indexPath.row == 0)
{
    titleOfTableVC = @"Show1";
    NSLog(@"SCHEDULE CONTROLLER TITLE = %@", titleOfTableVC );
    NSLog(@"FIRST ROW ");
}
if (indexPath.row == 1) {
    titleOfTableVC = @"Show2";
    NSLog(@"SECOND ROW");
}
if(indexPath.row == 2){
    titleOfTableVC = @"Show3";
    NSLog(@"THIRD ROW");
}

schedule = [[ScheduleViewController alloc] initWithNibName:@"ScheduleViewController" bundle:nil];
schedule.title =  titleOfTableVC ;    
[self.navigationController pushViewController:schedule animated:YES]; 
```

希望这会让你明白

# javascript - 滑块导航和冲突 ul>li>a

> ID：11034723
> 
> 赞同：0
> 
> 时间：2012-06-14T13:58:35.877
> 
> 标签：javascript

滑块导航有问题。当页面上没有其他无序列表的链接时工作得很好；不幸的是，如果页面上出现任何其他无序列表的链接，滑块会正常工作，直到使用滑块导航按钮，在这种情况下，幻灯片会消失并且无法加载下一张幻灯片。

谁能找到一个快速的解决方案？下面的代码：

[http://jsfiddle.net/jtCSA/2/](http://jsfiddle.net/jtCSA/2/)

好玩的东西：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<style type="text/css">
.slider {
    height: 320px;
    position: relative;  
}

.slider .slide {
    display: none;
    background: red;
    position: absolute;
    height: 320px;
    width: 100%;
    text-align: center;
}
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(window).load(function(){
$('.slider .slide:first').addClass('active').fadeIn(200);

function rotate(index) {
    $('.slider .slide.active').removeClass('active').fadeOut(200, function() { 
    $('.slider .slide:eq(' + index + ')').addClass('active').fadeIn(200);
    });   
}

$('.slider-nav li a').click(function() {    
    var index = $(this).parent().index('li');
    rotate(index);
    return false;
});

setInterval(function() {
var $next = $('.slider .slide.active').next();

if ($next.length == 0)
    $next = $('.slider .slide:first');

    rotate($next.index());
}, 2000);
});
</script>

</head>

<body>

<ul>
    <li><a href="#">Conflicting List Item</a></li>
    <li><a href="#">Conflicting List Item</a></li>
    <li><a href="#">Conflicting List Item</a></li>
    <li><a href="#">Conflicting List Item</a></li>
</ul>

<div class="slider">
    <div class="slide">1</div>
    <div class="slide">2</div>
    <div class="slide">3</div>
    <div class="slide">4</div>
</div>

<ul class="slider-nav">
    <li><a href="#">Nav Slide 1</a></li>
    <li><a href="#">Nav Slide 2</a></li>
    <li><a href="#">Nav Slide 3</a></li>
    <li><a href="#">Nav Slide 4</a></li>
</ul>

</body>

</html> 
```

**编辑：现在有代码！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:07:47.673

就这么简单：`var index = $(this).parent().index('li');`改成`var index = $(this).parent().index();`

# c - c中的静态局部数组

> ID：11034724
> 
> 赞同：0
> 
> 时间：2012-06-14T13:58:38.830
> 
> 标签：c

当我以以下方式在 C 中声明一个数组时，所有 24 个字节都放入堆栈：

```
void func(void){char array[24];} 
```

但是，当我使用这样的声明时，编译器会将数组放入 BSS RAM：

```
void func(void){static char array[24];} 
```

是否有规则可以放入堆栈的最长数组是什么，或者当我有一个本地数组时，它应该始终声明为静态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:06:02.210

> ```
> void func(void){char array[24];} 
> ```
> 
> 所有 25 个字节都放入堆栈。

**24**个字节，而不是 25 个。

> 是否有规则可以放入堆栈的最长数组是什么，或者当我有一个本地数组时，它应该始终声明为静态？

没有这样的规则，您只需要合理，其中“合理”取决于您的平台（例如，在具有 4k 堆栈的内核中，它比在通常具有 ~1MB 堆栈的用户空间应用程序中要少）。

但是，出于速度原因，我建议不要将本地数组更改为静态数组。函数静态变量仍然具有全局变量的缺点，即它们使函数不可重入。这可能是也可能不是问题，但是在处理过多的堆栈使用时，首选的解决方案应该是将变量移动到空闲存储区：

```
void func(void){
  char* array=malloc(24); 
  /* do something */ 
  free(array); 
} 
```

# sharepoint-2010 - Sharepoint 2010 中字段定义文件的位置

> ID：11034731
> 
> 赞同：0
> 
> 时间：2012-06-14T13:59:07.467
> 
> 标签：sharepoint-2010

Sharepoint 2010 文件系统中字段定义文件的位置是什么？我正在查找要在列表中引用的字段的字段 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:10:31.663

检查 14 配置单元中的 TEMPLATE\FEATURES\fields。

大多数字段都可以在 fieldswss.xml 中找到，但在 fieldswss2.xml 和 fieldswss3.xml 中可以找到一些附加字段。

请注意，在 TEMPLATE\FEATURES\ctypes 中可以找到开箱即用的内容类型定义（您没有问过这个问题，但我经常一起查看这些文件，所以我想我也会提到它）。

# python - Eclipse 和 pyddev：错误找不到 Python32

> ID：11034733
> 
> 赞同：2
> 
> 时间：2012-06-14T13:59:15.100
> 
> 标签：python, eclipse

我无法在 Eclipse 的 pydev 中编译 python。我收到以下错误：

“无法启动，因为启动配置无效原因：解释器：找不到 Python32”

我实际上正在运行 Python26 并已将 Python26 配置为“Windows-> Preferences”中的解释器，我已删除并替换了我的 eclipse 副本，并且这种情况仍然存在。任何帮助，将不胜感激。我认为有一次我运行了 Python32，然后切换到了 Python26。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:35:50.967

您可能仍然在您的项目或启动配置中选择了那个...您可以尝试删除现有的启动配置（运行>运行配置），以便在新运行时重新创建它们，如果不是这样，请查看您的项目属性 > pydev - 解释器/语法并查看是否选择了旧的解释器。

# css - Symfony2 - FormBuilder - 向字段添加一个类并输入

> ID：11034736
> 
> 赞同：21
> 
> 时间：2012-06-14T13:59:24.563
> 
> 标签：css, class, input, symfony, formbuilder

[我想为Symfony](https://symfony.com)应用程序中的某些输入或标签元素添加一个类。

我可以在 Twig 级别的表单中执行以下操作：

```
<div class="row">
    {{ form_label(form.subject) }}
    {{ form_widget(form.subject, { 'attr': {'class': 'c4'} }) }}
</div> 
```

这工作正常。但是我必须手动为每个表单设置和写出整个模板。我实际上想使用：

```
{{ form_widget(form) }} 
```

所以，我在想，我怎么能在以下位置为标签或输入添加 CSS 类`FormType`：

```
class SystemNotificationType extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options) {
        $builder->add('subject', 'text', array(
            'label' => 'Subject'
        )); 
```

我认为这可能更有用，因为您可以在一个地方配置整个表单。

*如何才能做到这一点？*也许我想错了。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-14T15:47:38.953

你可以这样做：

```
class SystemNotificationType extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options) {
        $builder->add('subject', 'text', array( 
            'label'  => 'Subject',
            'attr'   =>  array(
                'class'   => 'c4')
            )
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-16T14:23:03.673

字段的类是应用程序表示层的一部分，因此最好为您的表单创建一个树枝主题：

`fields.html.twig`在Bundle 中创建一个文件`Resources/views/Form`并定义表单行的格式，例如：

```
{% block field_row %}
<div class="row">
    {{ form_errors(form) }}
    {{ form_label(form) }}
    {{ form_widget(form, { 'attr': {'class': 'c4'} }) }}
</div>
{% endblock field_row %} 
```

如果您只想自定义某些字段，例如`fieldName`form的字段`formName`，请自定义行：

```
{% block _formName_fieldName_row %}
<div class="row">
    {{ form_label(form) }}
    {{ form_errors(form) }}
    {{ form_widget(form, { 'attr': {'class': 'c4'} }) }}
</div>
{% endblock %} 
```

**编辑**：仅自定义字段：

```
{% block _formName_fieldName_widget %}
    {% set type = type|default('text') %}
    <input type="{{ type }}" {{ block('widget_attributes') }} value="{{ value }}" class="c4" />
{% endblock %} 
```

然后在您希望它使用此主题的所有表单模板中添加：

```
{% form_theme form 'MyBundle:Form:fields.html.twig' %} 
```

这在[食谱中有详细解释](http://symfony.com/doc/current/cookbook/form/form_customization.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-01T21:55:21.543

**表单主题**

* * *

表单呈现方式的每个部分都可以自定义。您可以自由更改每个表单“行”的呈现方式，更改用于呈现错误的标记，甚至自定义 textarea 标记的呈现方式。没有什么是禁止的，并且可以在不同的地方使用不同的自定义。

Symfony 使用模板来呈现表单的每个部分，例如标签标签、输入标签、错误消息和其他所有内容。

在 Twig 中，每个表单“片段”都由一个 Twig 块表示。要自定义表单呈现方式的任何部分，您只需要覆盖适当的块。

在 PHP 中，每个表单“片段”都是通过单独的模板文件呈现的。要自定义表单呈现方式的任何部分，您只需要通过创建一个新模板来覆盖现有模板。

要了解其工作原理，请自定义 form_row 片段并将类属性添加到围绕每一行的 div 元素。为此，请创建一个新的模板文件来存储新的标记：

```
{# src/Acme/TaskBundle/Resources/views/Form/fields.html.twig #}
{% block form_row %}
{% spaceless %}
<div class="form_row">
{{ form_label(form) }}
{{ form_errors(form) }}
{{ form_widget(form) }}
</div>
{% endspaceless %}
{% endblock form_row %} 
```

当通过 form_row 函数呈现大多数字段时，使用 form_row 表单片段。要告诉表单组件使用上面定义的新 form_row 片段，请将以下内容添加到呈现表单的模板顶部：

```
{# src/Acme/TaskBundle/Resources/views/Default/new.html.twig #}
{% form_theme form 'AcmeTaskBundle:Form:fields.html.twig' %}
{% form_theme form 'AcmeTaskBundle:Form:fields.html.twig'
'AcmeTaskBundle:Form:fields2.html.twig' %}
{{ form(form) }} 
```

form_theme 标记（在 Twig 中）“导入”给定模板中定义的片段，并在呈现表单时使用它们。换句话说，当稍后在此模板中调用 form_row 函数时，它将使用自定义主题中的 form_row 块（而不是 Symfony 附带的默认 form_row 块）。

您的自定义主题不必覆盖所有块。渲染自定义主题中未覆盖的块时，主题引擎将回退到全局主题（在包级别定义）。

如果提供了多个自定义主题，则将按列出的顺序搜索它们，然后再返回到全局主题。

要自定义表单的任何部分，您只需要覆盖适当的片段。确切知道要覆盖哪个块或文件是下一节的主题。

```
{# src/Acme/TaskBundle/Resources/views/Default/new.html.twig #}

{% form_theme form with 'AcmeTaskBundle:Form:fields.html.twig' %}

{% form_theme form with ['AcmeTaskBundle:Form:fields.html.twig',
'AcmeTaskBundle:Form:fields2.html.twig'] %} 
```

有关更多信息，请参阅**如何**在***Symfony 食谱中自定义渲染***

**全局表单主题**

* * *

在上面的示例中，您使用 form_theme 助手（在 Twig 中）将自定义表单片段“导入”到该表单中。你也可以告诉 Symfony 在你的整个项目中导入自定义表单。

**枝条**

要在所有模板中自动包含之前创建的 fields.html.twig 模板中的自定义块，请修改您的应用程序配置文件：

```
# app/config/config.yml
  twig:
    form:
      resources:
        - 'AcmeTaskBundle:Form:fields.html.twig' 
```

fields.html.twig 模板中的任何块现在都用于全局定义表单输出。

# java - gwt g2d：ie8中的drawImage

> ID：11034739
> 
> 赞同：0
> 
> 时间：2012-06-14T13:59:34.663
> 
> 标签：java, gwt, internet-explorer-8, drawing2d

我使用 g2d 和 gwt 来实现一些画布功能。由于ie8不支持gwt提供的canvas实现（我使用的是2.4.0版本），至少我能体验到的，所以我决定改用之前提到的图形库。

当我尝试绘制 base64 图像时出现问题。我提交以下代码：

```
Element img = DOM.createElement("img");
img.setAttribute("src", imagen.getBase64());
ImageElement imgElement = ImageElement.as(img);
surface.drawImage(imgElement, x, y, w, h); 
```

这在 IE9 中运行良好，但在 IE8 中却不行。尽管绘制了图像，但表面放置了一个空白方块。

您可能知道，g2d 是 excanvas.js 的一个实现，在调用 drawImage 后会出现“invalid poninter”js 错误。

提前致谢！

**编辑：**

正如我在 javascript 中看到的那样，我收到以下错误：

```
vmlStr.push(' ''>', '<g_vml_:image src="' + image.src + '"' , ..., ' />', 
'</g_vml_:group>'); 
```

这是 excanvas.js 代码的一部分，就在完成绘图之前。检索“无效指针”错误的是 image.src，似乎未将 base64 分配给该属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:40:50.627

没关系，我找到了适合所有浏览器的替代方案：在服务器端生成图像，然后将其编码为 base64，然后可以在客户端的回调函数中检索它。

# tomcat - 在 Tomcat 7 中使用 Log4j 进行应用程序日志记录

> ID：11034741
> 
> 赞同：0
> 
> 时间：2012-06-14T13:59:37.833
> 
> 标签：tomcat, web-applications, logging, log4j

我有一个 Web 应用程序在 Windows 上的 Tomcat 7 的香草安装中运行，内部 Tomcat 日志记录保持不变（默认）。在我的应用程序中，我使用 log4j，它有一个 RollingFileAppender 写入 TOMCAT/logs 目录（不是 localhost.yyyy-mm-dd.log）中我自己的应用程序日志（app.log）。日志记录似乎适用于我的应用程序，除了一些堆栈跟踪没有显示在 app.log 中，而是显示在 localhost.yyyy-mm-dd.log 中。例如，我的应用程序缺少 commons-validators 类，并且此堆栈跟踪未显示在 app.log 中。

我不确定如何让这些堆栈跟踪显示在我的 app.log 中？我的 log4j.properties 文件在这里：

```
### Root Level ###
log4j.rootLogger=WARN, LOGFILE

### Application Level ###
log4j.logger.com.ccn=TRACE

### Spring ###
log4j.logger.org.springframework.core=INFO
log4j.logger.org.springframework.beans=INFO
log4j.logger.org.springframework.context=INFO
log4j.logger.org.springframework.web=INFO

### Configuration for the LOGFILE appender ###
log4j.appender.LOGFILE=org.apache.log4j.RollingFileAppender
log4j.appender.LOGFILE.MaxFileSize=5MB
log4j.appender.LOGFILE.MaxBackupIndex=10
log4j.appender.LOGFILE.File=$\{catalina.home\}/logs/app.log
log4j.appender.LOGFILE.Append=true
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGFILE.layout.ConversionPattern=[%p %d %t]  %c  [%C{1}.%M(): "%m"]%n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:18:04.873

我发现了问题。我正在使用 org.springframework.stereotype.Controller 注释来标记我的控制器类。我丢失的特定异常是在这个类中生成的。解决方案是向类中的方法添加`@ExceptionHandler`注释，在该方法中我可以将异常重定向到 Log4j，类似于：

```
@ExceptionHandler
public void handleException(Exception e) {
    logger.error("Error: ", e);
} 
```

如果没有`@ExceptionHandler`修饰方法，堆栈跟踪将被吐出到 stderr，最终出现在 localhost.yyyy-mm-dd.log 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:36:32.720

您如何进行堆栈跟踪日志记录？

就我而言，

```
Logger log = Logger.getLogger(HogeServlet.class);
try {
    // Something
} catch (HogeException e) {
    log.error("Hoge Error !!", e); // Print stack trace
} 
```

# html - css 类不会改变现有的类属性

> ID：11034744
> 
> 赞同：1
> 
> 时间：2012-06-14T13:59:55.133
> 
> 标签：html, css

假设我有一个 li 样式如下：

```
#app-container ul.apps li.app1 {
   border-color:#57b6dd;
   background:url(app-icons/app1.png) no-repeat 10px 10px;
} 
```

`<li class="app1">`

现在假设我在页面中再次出现了相同的 li，但我想将边框颜色更改为托盘，向现有类添加一个类不会改变颜色。

```
.app-inactive-border { 
   border-color: #666666;
} 
```

`<li class="app1 app-inactive-border">`

我究竟做错了什么？谢谢

我已经把它放在了 jsfiddle [http://jsfiddle.net/noscirre/JtVGp/24/](http://jsfiddle.net/noscirre/JtVGp/24/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T14:02:43.637

`.app-inactive-border`那么[具体](http://www.w3.org/TR/CSS21/cascade.html#specificity)_`#app-container ul.apps li.app1`

在多个规则集提供更改相同属性的规则的情况下，最具体的规则集获胜。

采用`#app-container ul.apps li.app1.app-inactive-border`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:23:01.550

另一种方法是这样做：

```
.app-inactive-border { border-color: #666666!important; } 
```

知道“！important”的作用是什么。但昆汀的回答是一种最佳实践，语法更易读。

```
last thing : you can simplify the hexa color code like this #666; 
```

# java - 西格网速

> ID：11034753
> 
> 赞同：3
> 
> 时间：2012-06-14T14:00:15.173
> 
> 标签：java, network-programming, sigar

这个库对于获得 cpu、ram 和其他工作人员来说真是太棒了。但是，我不知道如何获得网络速度。这意味着。在一段时间内发送和接收了多少数据？有没有办法给我这些数据？

这可能是我正在寻找的吗？

```
Tcp stat = sigar.getTcp();
stat.getInSegs() + " segments received"
stat.getOutSegs() + " segments send out" 
```

如果 sigar 没有办法，还有其他库可以使用吗？

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:25:40.087

输出：

> {DefaultGateway=193.171.36.1, PrimaryDns=140.78.2.62,SecondaryDns=140.78.3.62, DomainName=, HostName=Schneider-PC}
> 
> {Name=eth0, Description=WAN Miniport (IPv6), Metric=0, Type=Ethernet,Address=0.0.0.0, Mtu=1500, Netmask=0.0.0.0, Flags=65,Broadcast=0.0.0.0, Hwaddr=34 :F8:20:52:41:53, 目的地=0.0.0.0}
> 
> totalrx（下载）：4.7K
> 
> 总计（上传）：154
> 
> * * *
> 
> totalrx（下载）：1.4K
> 
> 总计（上传）：180

代码：

```
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

import org.hyperic.sigar.NetFlags;
import org.hyperic.sigar.NetInterfaceConfig;
import org.hyperic.sigar.NetInterfaceStat;
import org.hyperic.sigar.Sigar;
import org.hyperic.sigar.SigarException;

/**
 * @author Headgrowe
 * 
 */
public class NetworkData {

    static Map<String, Long> rxCurrentMap = new HashMap<String, Long>();
    static Map<String, List<Long>> rxChangeMap = new HashMap<String, List<Long>>();
    static Map<String, Long> txCurrentMap = new HashMap<String, Long>();
    static Map<String, List<Long>> txChangeMap = new HashMap<String, List<Long>>();
    private static Sigar sigar;

    /**
     * @throws InterruptedException
     * @throws SigarException
     * 
     */
    public NetworkData(Sigar s) throws SigarException, InterruptedException {
        sigar = s;
        getMetric();
        System.out.println(networkInfo());
        Thread.sleep(1000);     
    }

    public static void main(String[] args) throws SigarException,
            InterruptedException {
        new NetworkData(new Sigar());
        NetworkData.newMetrickThread();
    }

    public static String networkInfo() throws SigarException {
        String info = sigar.getNetInfo().toString();
        info += "\n"+ sigar.getNetInterfaceConfig().toString();
        return info;
    }

    public static String getDefaultGateway() throws SigarException {
        return sigar.getNetInfo().getDefaultGateway();
    }

    public static void newMetricThread() throws SigarException, InterruptedException {
        while (true) {
            Long[] m = getMetric();
            long totalrx = m[0];
            long totaltx = m[1];
            System.out.print("totalrx(download): ");
            System.out.println("\t" + Sigar.formatSize(totalrx));
            System.out.print("totaltx(upload): ");
            System.out.println("\t" + Sigar.formatSize(totaltx));
            System.out.println("-----------------------------------");
            Thread.sleep(1000);
        }

    }

    public static Long[] getMetric() throws SigarException {
        for (String ni : sigar.getNetInterfaceList()) {
            // System.out.println(ni);
            NetInterfaceStat netStat = sigar.getNetInterfaceStat(ni);
            NetInterfaceConfig ifConfig = sigar.getNetInterfaceConfig(ni);
            String hwaddr = null;
            if (!NetFlags.NULL_HWADDR.equals(ifConfig.getHwaddr())) {
                hwaddr = ifConfig.getHwaddr();
            }
            if (hwaddr != null) {
                long rxCurrenttmp = netStat.getRxBytes();
                saveChange(rxCurrentMap, rxChangeMap, hwaddr, rxCurrenttmp, ni);
                long txCurrenttmp = netStat.getTxBytes();
                saveChange(txCurrentMap, txChangeMap, hwaddr, txCurrenttmp, ni);
            }
        }
        long totalrx = getMetricData(rxChangeMap);
        long totaltx = getMetricData(txChangeMap);
        for (List<Long> l : rxChangeMap.values())
            l.clear();
        for (List<Long> l : txChangeMap.values())
            l.clear();
        return new Long[] { totalrx, totaltx };
    }

    private static long getMetricData(Map<String, List<Long>> rxChangeMap) {
        long total = 0;
        for (Entry<String, List<Long>> entry : rxChangeMap.entrySet()) {
            int average = 0;
            for (Long l : entry.getValue()) {
                average += l;
            }
            total += average / entry.getValue().size();
        }
        return total;
    }

    private static void saveChange(Map<String, Long> currentMap,
            Map<String, List<Long>> changeMap, String hwaddr, long current,
            String ni) {
        Long oldCurrent = currentMap.get(ni);
        if (oldCurrent != null) {
            List<Long> list = changeMap.get(hwaddr);
            if (list == null) {
                list = new LinkedList<Long>();
                changeMap.put(hwaddr, list);
            }
            list.add((current - oldCurrent));
        }
        currentMap.put(ni, current);
    }

} 
```

# c# - 使用 SqlCommand 参数时调用 SQL 函数要慢得多

> ID：11034755
> 
> 赞同：8
> 
> 时间：2012-06-14T14:00:22.673
> 
> 标签：c#, sql, sql-server, performance, user-defined-functions

我正在从我的 C# ASP.Net 应用程序中调用一个 SQL 函数 (UDF)。我正在调用的函数需要一个“唯一标识符”类型的参数。

如果我拨打电话并在 SqlCommand 的 CommandText 中传递“null”，结果会在大约 3 秒后返回......

```
SqlCommand Command = new SqlCommand();
Command.Connection = (SqlConnection)(DbDataModifier.CreateConnection());
Command.CommandText = "select * from GetLocalFirmLoginsSummary(null) order by Date asc"
Command.CommandType = CommandType.Text;

Command.Connection.Open();

SqlDataReader Reader = Command.ExecuteReader(); // takes 3 seconds 
```

但是，如果我进行调用并将 DBNull.Value 作为 SqlParameter 传递，结果需要 60 多秒才能返回......

```
SqlCommand Command = new SqlCommand();
Command.Connection = (SqlConnection)(DbDataModifier.CreateConnection());
Command.CommandText = "select * from GetLocalFirmLoginsSummary(@CustomerGroupID) order by Date asc"
Command.CommandType = CommandType.Text;

SqlParameter Param = new SqlParameter();
Param.ParameterName = "@CustomerGroupID";
Param.SqlDbType = SqlDbType.UniqueIdentifier;
Param.Direction = ParameterDirection.Input;
Param.IsNullable = true;
Param.Value = DBNull.Value;
Command.Parameters.Add(Param);

Command.Connection.Open();

SqlDataReader Reader = Command.ExecuteReader(); // takes over 60 seconds 
```

如果我在 SQL Management Studio 中运行相同的查询，即使将 null 作为参数传递也需要大约 3 秒...

```
declare @CustomerGroupID uniqueidentifier
set @CustomerGroupID = null

select * from GetLocalFirmLoginsSummary(@CustomerGroupID) 
```

我调用的函数定义为：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[GetLocalFirmLoginsSummary]
(   
    @CustomerGroupID uniqueidentifier
)
RETURNS TABLE 
AS
RETURN 
(

SELECT     CustomerGroupID, CustomerGroupName, USR, DATEADD(MONTH, DATEDIFF(MONTH, 0, createdDate), 0) AS Date, COUNT(*) AS Quantity
FROM         dbo.GetLocalFirmLogins(@CustomerGroupID) AS Logins
GROUP BY USR, CustomerGroupID, CustomerGroupName, DATEADD(MONTH, DATEDIFF(MONTH, 0, createdDate), 0)

) 
```

...

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[GetLocalFirmLogins]
(   
@CustomerGroupID uniqueidentifier
)
RETURNS TABLE 
AS
RETURN 
(

SELECT     vw_CustomerGroupAccountDetails.CustomerGroupID, vw_CustomerGroupAccountDetails.CustomerGroupName, Organisations.USR, Organisations.town AS FirmTown, 
                  Users.id AS ID, Users.userName, Users.password, Users.isPartner, Users.isFeeEarner, Users.nlisUserName, Users.nlisPassword, Users.email, Users.lastLoginDate, Users.createdDate
FROM         vw_CustomerGroupAccountDetails RIGHT OUTER JOIN
                      Organisations ON vw_CustomerGroupAccountDetails.AccountID = CAST(Organisations.id AS nvarchar(50)) RIGHT OUTER JOIN
                  Users ON Organisations.clientId = Users.uploadedBy
WHERE     (Users.canLogin = 1) AND (Users.isDeleted = 0) AND (NOT (Organisations.USR IS NULL)) AND 
                      ((vw_CustomerGroupAccountDetails.CustomerGroupID = @CustomerGroupID) OR (@CustomerGroupID IS NULL))

) 
```

那么，当我使用 SqlCommand 的 SqlParameter 从 C# 调用 SQL 函数时，是什么原因导致它需要更长的时间呢？

我正在使用 SQL Server 2000。

我到处搜索，以我能想到的每一种方式，但找不到其他人有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:44:39.277

它可能是由 SQL Server 中的参数嗅探问题引起的。

您可以在以下链接中找到更多详细信息：

[参数嗅探](https://dotnetforlife.blogspot.ca/2009/11/parameter-sniffing_29.html?m=1)

我希望你会发现这很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:12:05.623

吉姆，你能发布 dbo.GetLocalFirmLogins 的来源吗？

正如 Martin 所说，这可能是参数嗅探。如果是，则代码中的查询提示可能是“外科手术”解决此问题的最佳方法。

在 dbo.GetLocalFirmLogins 中的查询中添加 OPTION (LOOP JOIN) 可以在此处修复。

我想我也可以解释为什么 SSMS 看不到问题，而 C# 可以。这部分查询：

```
(CustomerGroupID = @CustomerGroupID) OR (@CustomerGroupID IS NULL) 
```

根据您来自的连接的 ANSI NULL 设置，可能有两个不同的计划。ANSI NULL，效果描述如下：

[设置 ANSI_NULLS](http://msdn.microsoft.com/en-us/library/aa259229%28v=sql.80%29.aspx)

您可以通过检索此查询的结果来查看连接的 ANSI 设置：

[DBCC 用户选项](http://msdn.microsoft.com/en-us/library/ms180065.aspx)

SSMS 可能具有您 C# 编码的不同 NULL 设置，并导致对查询的不同评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:26:18.293

Management Studio 和 .NET 代码之间的性能差异通常与 ANSI_NULLS 等设置有关。

这可能是 SQL Server 2000 中的错误 - 请参阅[此帖子](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/05eb0bb9-089b-4955-9489-796dfabd7076)，这似乎暗示未考虑 CREATE FUNCTION 之前的 SET ANSI_NULLS ON。

我没有 SQL Server 2000 来测试这个，但也许你可以尝试编写你的函数脚本。

# jquery - JQuery手风琴自动高度问题

> ID：11034756
> 
> 赞同：78
> 
> 时间：2012-06-14T14:00:23.760
> 
> 标签：jquery, accordion

我正在使用 JQuery 手风琴。我在这里有这个页面：[http ://www.hauppauge.com/site/support/support_colossus.html#tabs-6](http://www.hauppauge.com/site/support/support_colossus.html#tabs-6)

发生的情况是自动高度需要一些时间来加载，在它加载之前，内容下方有很多空白。当它最终确实加载时，高度将扩大到更长，然后捕捉到内容的正确高度。有没有办法让它无缝？我只是希望能够单击 Accordion 选项卡并将其平滑地扩展到内容的确切高度。

**2014 年 8 月 8 日更新：**

`heightStyle: "content"`如果您使用的是[1.9 及更高版本，](http://api.jqueryui.com/1.9/accordion/#option-heightStyle)请使用（[Tarun 的](https://stackoverflow.com/users/1896608/tarun-gupta)回答）

用于[1.8 及更低](http://api.jqueryui.com/1.8/accordion/#option-autoHeight)版本（iappwebdev 的回答`autoHeight: false`）

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-05-01T08:30:49.787

你应该使用

```
$("#accordion").accordion({ 

heightStyle: "content" 

}); 
```

它将根据您的内容设置高度。并且不会使用空格作为高度。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-06-14T14:11:58.860

那么你为什么不直接设置`autoheight`为假呢？

```
$( ".selector" ).accordion({ autoHeight: false }); 
```

[http://jqueryui.com/demos/accordion/#option-autoHeight](http://jqueryui.com/demos/accordion/#option-autoHeight)

**编辑**

看着你的评论：

```
// Accordion
$("#accordion").accordion({ header: "h3" });
$("#accordion").accordion({ collapsible: true });
$("#accordion").accordion({ autoHeight: false, navigation: true }); 
```

您正在初始化手风琴，然后向其添加更多选项。你为什么这样做？默认值为`autoHeight`is `true`，因此每个选项卡都有一个固定的高度。一次调用所有选项：

```
// Accordion
$("#accordion").accordion({
    header: "h3",
    collapsible: true,
    autoHeight: false,
    navigation: true 
}); 
```

**编辑**

关于您的第二条评论：

看看[http://jqueryui.com/demos/accordion/#option-header](http://jqueryui.com/demos/accordion/#option-header)。您可以看到该选项`h3`是默认设置的，因此您不必在通话中进行设置。

你在这里得到了你的问题的答案：[JQuery 手风琴在没有 h3 标签的情况下无法工作](https://stackoverflow.com/questions/1183751/jquery-accordion-doesnt-work-without-h3-tags)。

通过 jQuery API 提高您的知识非常重要。对于 jQuery API，请访问[http://api.jquery.com/](http://api.jquery.com/)，对于 jQuery UI，请访问[http://jqueryui.com/demos/](http://jqueryui.com/demos/)。如果您还有其他问题，请**在**尝试解决问题并进行一些研究**后随时提出。**

如果所有这些都回答了您的问题，请将其标记为正确答案。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-11-20T11:30:23.983

```
$("#accordion").accordion({ 

heightStyle: "content" 

}); 
```

这是在新版本中工作，它对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-21T13:15:13.233

这对我有用。

```
$( ".accordion" ).accordion({ 
 autoHeight: false,
 collapsible: true,
 navigation: true 
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-30T12:47:20.100

如果到目前为止没有任何效果，只需调整 jQuery Accordion 的大小`contentElement`- 默认情况下会调用它`data-content`，除非您以不同的方式配置它：

```
$('.accordion').find('[data-content]').resize(); 
```

如果您想在动态加载数据后调整 Accordion 的大小，这也将起作用。

# c# - C# 从其他线程更改对象

> ID：11034758
> 
> 赞同：1
> 
> 时间：2012-06-14T14:00:29.483
> 
> 标签：c#, multithreading

我正在创建一个可以通过语音使用的议程。此外，还有一个虚拟助手 (VA) 可以提供反馈，并有一些人工智能来获得并保持良好的日常节奏。

情况是我有一个公共静态列表议程。

Agenda 是一个抽象类，目前有 9 种不同的 Agenda 类型。这是程序的数据核心。这包含程序需要知道的所有内容。

主线程包含 GUI 和人们可能期望议程的可用性。

虚拟助手需要做的一切都是在不同的线程中完成。这主要是检查议程并问一些问题，如果人们想在议程中做任何事情。

棘手的部分是当我还想从某些逻辑（可以说是添加人工智能）中将事情添加到议程中时，例如日常用餐。这来自 VA 线程，但我无法从那里更改 Agenda.agenda 并得到一个错误，说该集合已被修改。

我试过锁定它，但没有区别。

将餐点添加到今天：

```
 public void Meal()
    {
        DateTime date = DateTime.Now;

        DateTime morning = date;
        morning = morning.ChangeTime(8, 0, 0, 0);

        DateTime afternoon = date;
        afternoon = afternoon.ChangeTime(12, 0, 0, 0);

        DateTime evening = date;
        evening = evening.ChangeTime(16, 30, 0, 0);

        if (!meal && date.Hour < 21)
        {
            if(date.DayOfWeek == DayOfWeek.Wednesday)
                toAdd.Add(new Task("broodbuffet", morning, new Dictionary<DateTime, bool>()));
            else
                toAdd.Add(new Task("ontbijt", morning, new Dictionary<DateTime, bool>()));
            toAdd.Add(new Task("lunch", afternoon, new Dictionary<DateTime, bool>()));
            toAdd.Add(new Task("diner", evening, new Dictionary<DateTime, bool>()));

            meal = true;
        }

        if (date.Hour > 22)
            meal = false;
    } 
```

在我用我的 VA 做基础知识的课堂上：

```
ai.Meal();
UpdateAgenda(); 
```

在线程中更新的方法：

```
private void UpdateAgenda()
    {
        if (ai.GetToAdd().Count != 0)
        {
            Agenda.agenda.AddRange(ai.GetToAdd());
        }
    } 
```

并带锁：

```
private void UpdateAgenda()
    {
        if (ai.GetToAdd().Count != 0)
        {
            lock (Agenda.agenda)
            {
                Agenda.agenda.AddRange(ai.GetToAdd());
            }
        }
    } 
```

简而言之，如何从 VA 线程将议程项目添加到我的议程中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:16:52.543

您在锁定的正确轨道上，但您不能仅在更改属性时锁定。

锁不会锁定属性，它会锁定代码，因此您必须锁定*所有*使用该属性的代码，以便更改该属性的代码可以锁定从该属性读取的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:38:56.873

特别是您遇到的错误（“集合已更改”），也许您使用 foreach 循环遍历议程对象中的任何集合？当集合在 foreach 循环中发生变化时（在您的情况下，由另一个线程）， IEnumerator.MoveNext 会抛出这样的错误。如果这是问题所在，则需要锁定整个 foreach 循环。

# c++ - 切换状态情况下的不同类型分配，在模板函数内部

> ID：11034759
> 
> 赞同：5
> 
> 时间：2012-06-14T14:00:42.483
> 
> 标签：c++

苹果.h

```
class Apple {
public:
    Apple(int);
    static int typeID;
private:
    int id_;
}; 
```

苹果.cpp

```
#include "Apple.h"
Apple::Apple(int pID) {
    id_ = pID;
} 
```

Potato.h、Potato.cpp 与 Apple 相同

存储.h

```
#pragma once
#include "Apple.h"
#include "Potato.h"
#include <vector>
class Storage {
public:
    Storage();
    template<typename foodName> void store(foodName * object){
        (*getBasket<foodName>()).push_back(object);
    };
    template<typename foodName> int countSize(){
        return (*getBasket<foodName>()).size();
    };

private:
    std::vector<Apple*> applebasket_;
    std::vector<Potato*> potatobasket_;
    template <typename foodName> std::vector<foodName*> * getBasket(){
        std::vector<foodName*> * result;
        switch(foodName::typeID){
            case 0:
                result = &applebasket_;
                break;
            case 1:
                //result = &potatobasket_;
                break;
        }
        return result;
    } 
}; 
```

存储.cpp

```
#include "Storage.h"
int Apple::typeID;
int Potato::typeID;
Storage::Storage() {
    Apple::typeID = 0;
    Potato::typeID =1;
} 
```

主文件

```
#include "Storage.h"
#include <iostream>
int main() {
    Apple* apple;
    Potato* potato;
    Storage storage;
    int i;
    for(i = 0;i < 7;i++){
        apple = new Apple(i);
        storage.store<Apple>(apple);  
    }      
    std::cout<<storage.countSize<Apple>();
    return 0;
} 
```

此代码工作并输出正确大小的向量，但如果未注释 switch 语句（在 Storage.h 内）中的 case 行，编译器（g++）会抛出“错误：无法将 'std::vector < Potato*>* ' 转换为 'std ::vector< Apple*>* ' 在赋值中”。无论如何，这就像编译器尝试两种情况一样，我找不到它是否可能以及如何避免这种情况。我需要这方面的帮助，也许需要一些关于整个事情的建议（不同类型容器的一个接口），我最近开始学习 C++，可能我在这里尝试这样做的方式完全是一团糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:13:51.180

您的代码无法编译，因为两者都`case`应该编译这是不可能的，因为两者的类型不同`case`。

解决此问题的一种方法是使用重载而不是函数模板作为（这意味着您的类中不需要`typeID`！）：

```
std::vector<Apple*> * get_basket(Apple *)
{
   return &applebasket_;  //return pointer to the apple basket
}

std::vector<Potato*> * get_basket(Potato *)
{
   return &potatobasket_; //return pointer to the potate basket
} 
```

并将其称为：

```
template<typename FoodType> 
void store(FoodType * object)
{
    std::vector<FoodType> * basket = get_basket(static_cast<FoodType*>(0));
    basket->push_back(object);
} 
```

这里的技巧是你有两个重载，每个重载都有一个*不同*类型的参数，所以你可以`static_cast<FoodType*>(0)`用来帮助编译器根据表达式的*类型*来选择正确的重载，表达式`static_cast<FoodType*>(0)`的类型可以是 type`Apple*`或`Potato*`.

* * *

@Gorpik[在评论](https://stackoverflow.com/a/11035109/415784)中说（这个以及其他解决方案）都很丑陋，所以这是解决这个问题的另一种尝试。

`base_storage`将类模板定义为：

```
template<typename FoodType>
class base_storage
{
    std::vector<FoodType*> m_storage;
    public:
        void store(FoodType *foodItem)
        {
            m_storage.push_back(foodItem);
        }
        size_t count() const
        {
            return m_storage.size();
        }
}; 
```

*这个基类只存储一种*类型的食物，但在问题中，我们需要存储*两种*类型的食物。因此，为了做到这一点，让我们定义`Storage`从上述类模板派生的另一个类：

```
class storage : private base_storage<Apple>, private base_storage<Potato>
{
    public:
        template<typename FoodType> 
        void store(FoodType * foodItem)
        {
            base_storage<FoodType>::store(foodItem);
        }
        template<typename FoodType> 
        size_t count() const
        {
            return base_storage<FoodType>::count();
        }
}; 
```

这里注意两点：

*   该类`storage`现在没有任何成员数据。它只是将调用转发到根据模板参数类型选择的基类`FoodType`。
*   它从基类*私下派生。*所以不是`is-a`关系。

在此处查看此解决方案的在线演示：http: [//ideone.com/Ykjo5](http://ideone.com/Ykjo5)

这个解决方案的美妙之处在于，如果你想让它适用于*三种*类型的食物，那么你只需要从*三个*基类中派生它：

```
class storage : private base_storage<Apple>, 
                private base_storage<Potato>,
                private base_storage<Mango>   //added line!
{

     //same as before; no change at all !

}; 
```

演示：http: [//ideone.com/lnMds](http://ideone.com/lnMds)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:20:23.377

您甚至不需要使用 typeID 字段。让编译器完成所有工作。

```
class Storage {
public:
    Storage();
    template<typename foodName> void store(foodName * object){
        (*getBasket<foodName>()).push_back(object);
    };
    template<typename foodName> int countSize(){
        return (*getBasket<foodName>()).size();
    };

private:
    std::vector<Apple*> applebasket_;
    std::vector<Potato*> potatobasket_;

    template <typename foodName> std::vector<foodName*> * getBasket();
};

template <> std::vector<Apple*> * Storage::getBasket()
{
    return &applebasket_;
} 
template <> std::vector<Potato*> * Storage::getBasket()
{
    return &potatobasket_;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T14:33:22.013

`std::vector<Apple *>`并且`std::vector<Potato *>`是不同的类型。C++ 模板在编译时生成类定义及其所有代码的完整副本，因此生成的具体类型之间根本没有任何关系。

如果`Apple`and`Potato`共享一个公共父类，假设`Food`您可以将这两种东西都存储在 a 中`std::vector<Food *>`，但您仍然无法返回 a`std::vector<Apple *>`预期`std::vector<Food *>`的 a 。

您的`getBasket()`方法试图通过模板化返回类型来解决这个问题，但它不能，因为模板是在*编译时*评估的，而 switch 语句是在*运行时*评估的。编译器必须在程序开始运行之前决定`foodStuff`参数是什么，因此它不知道该 switch 语句的结果可能是什么。然而无论如何它都必须做出决定，并且它已经放弃了它可以从`return`它在函数体中找到的第一个语句得出的结果，不幸的结果是第二个语句无效。

因此，您需要分别存储和检索`Apple`s 和`Potato`s （可能像其他一些答案所建议的那样使用模板），或者使用继承，以便您可以将它们存储在可以理解公共父类型的东西中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:17:26.023

专门`getBasket`针对这两种情况。

或者更好的是，不要以这种方式混合抽象级别，而只需提供单独的土豆和苹果容器。

# google-maps-api-3 - google places api/google maps：“listings by ...”没有被重置——地图区域一直很混乱

> ID：11034766
> 
> 赞同：0
> 
> 时间：2012-06-14T14:00:57.180
> 
> 标签：google-maps-api-3, google-places-api

我有一个使用地点 API 的网站 pune.org。但是，如您所见，如果我选择标记，则按行列出的列表只会不断添加并最终使整个地图区域变得无用。

如何重置列表或理想情况下仅显示当前选择的标记的列表？

谢谢，桑迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:19:25.640

您在代码中多次实例化 Places Service，例如每次地图平移时。您需要在开始时设置一个名为 service 的全局变量，然后实例化 Places Service 一次（*在您的地图初始化期间是合适的）。然后，您可以简单地`service.search`在其他函数中调用该方法，而不是一遍又一遍地实例化服务。

所以：

```
var service;
\\Rest of other global variables
function initializeMap(initialLat, initialLng, detectCurrentLocation, radius,
        zoomLevel, defaultType) {
    initialLocation = new google.maps.LatLng(initialLat, initialLng);
    geocoder = new google.maps.Geocoder();

    var myOptions = {
        zoom : zoomLevel,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    service = new google.maps.places.PlacesService(map); //Only do this once!
    ...//rest of your code
} 
```

然后删除代码中的其他实例，`service = new google.maps.places.PlacesService(map);`只调用`service.search(request, callback);`

# sql - 从两个表中删除行

> ID：11034767
> 
> 赞同：2
> 
> 时间：2012-06-14T14:00:58.367
> 
> 标签：sql, oracle

我正在尝试同时从两个不同的表中删除行。这些表看起来像这样：

```
TABLE - Value
-----------
ID
Field
<some other stuff...>

TABLE - Srch
-----------
Value_ID
Srch_ID
<some other stuff...> 
```

我正在尝试删除等于 'SUCCESS' 的所有行，并从中删除`VALUE`链接到through的行。里面可以有多个相同的行。`field``SRCH``VALUE``value_id``SRCH``value_id`

这个 SQL 语句会是什么样子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:09:52.460

我建议在您的 2 个表和`ON DELETE CASCADE`. 因此，您只需删除 Value 中的行，Srch 中的所有相应行都将被删除。

您可以将以下约束添加到数据库：

```
ALTER TABLE Srch ADD CONSTRAINT
FK_Value_ID FOREIGN KEY(Value_ID)
REFERENCES Value (ID) 
ON DELETE CASCADE; 
```

为了清楚起见（引自 xQbert 评论）：“级联总是会发生”当从 Value 中删除一个 ID 时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:25:51.080

虽然更改数据库以自动执行此操作是理想的，但如果这始终是您想要的行为，并且您对数据库具有这样做的权限。

否则，特别是如果这是一次性或偶尔的事情，它可以在一组 2 个简单的查询中完成，一起运行：

```
Delete from Srch where value_id in (Select ID from value where field='SUCCESS')
Delete from value where field='SUCCESS' 
```

如果这是一个实时系统，您希望将它们作为单个事务的一部分运行，这样您就不会在两个语句之间更新值，并留下孤儿或类似的东西。如果以正确的隔离级别运行，这将是您最简单、最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:20:41.333

或者更复杂的解决方案使用 PL/SQL 但没有外键：

```
DEFINE 
v_success_count number;
v_val_id number;
BEGIN

SELECT INTO v_success_count count(*) FROM

WHILE (select count(*) FROM value WHERE field = 'SUCCESS') > 0
LOOP
    SELECT value_id INTO val_id FROM value WHERE field = 'SUCCESS' AND rownum = 1;

    DELETE FROM srch WHERE value_id = v_val_id;

    DELETE FROM value WHERE field = 'SUCCESS' AND rownum = 1;
END LOOP
COMMIT;
END; 
```

# java - 使用复制构造函数同时修改列表

> ID：11034769
> 
> 赞同：5
> 
> 时间：2012-06-14T14:01:01.273
> 
> 标签：java, concurrency, concurrentmodification

以下代码会导致`ConcurrentModificationException`副作用或其他副作用吗？

```
ArrayList<String> newList = new ArrayList<String>(list); 
```

考虑到列表的大小非常大，并且在执行上述代码时另一个线程正在同时修改列表。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T14:02:03.227

**编辑：**

我最初的回答是肯定的，但正如@JohnVint 正确指出的那样，这不会是`ConcurrentModificationException`因为在幕后`ArrayList`使用`System.arrayCopy(...)`. 见最后的代码片段。

问题是在您执行此副本时，另一个线程正在对元素数组进行更改。您可能会得到`IndexOutOfBoundsException`未初始化的数组值，甚至是某种本机内存访问异常，因为`System.arraycopy(...)`这是在本机代码中完成的。

您将需要在更新和复制期间同步列表以防止这些竞争条件以及建立内存屏障以确保支持的元素数组`ArrayList`是适当的最新的。

* * *

```
public ArrayList(Collection<? extends E> c) {
    elementData = c.toArray();
    ...
}

// ArrayList
public Object[] toArray() {
        return Arrays.copyOf(elementData, size);
}

// Arrays
public static <T,U> T[] copyOf(U[] original, int newLength,
    Class<? extends T[]> newType) {
    ...
    System.arraycopy(original, 0, copy, 0,
        Math.min(original.length, newLength));
}

// System
public static native void arraycopy(Object src,  int  srcPos,
    Object dest, int destPos, int length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:00:04.513

你需要考虑你在这里做什么。如果`list`' 的类不是线程安全的，则可以`list`使用此代码完全销毁，以及`newList`--a CME 将是您的问题中最少的。（我建议使用不抛出 CME 的类，但在这种情况下，CME 是一件*好事*。）另请注意：这段代码很难测试。您将在每次失败之间获得零到十亿次无问题运行之间的某个位置，并且失败可能非常微妙，尽管它们更有可能是大规模的并且超出了合理的解释。

最快的解决方法是锁定`list`. 您要确保在使用它的*任何地方都*将其锁定；您并没有真正锁定*列表*，而是锁定了您从中访问它的代码块。您必须锁定*所有*访问权限。缺点是您将在创建新列表时阻塞另一个线程。这真的是要走的路。但是，如果如您所说，“列表非常庞大”，您可能会担心性能，所以我会继续......

如果`newList`将其视为不可变的并且您在创建后经常使用它，那么这样做是值得的。`newList`现在可以毫无问题地同时读取大量代码*，并且*不必担心不一致。但是最初的创作仍然存在阻碍。

下一步是创建`list`一个 java.util.ConcurrentLinkedQueue。（如果您需要更高级的东西，可以使用并发映射和设置。）这个东西可以有一堆线程读取它，同时添加和删除更多线程，它总是有效的。它可能不包含*您*认为它包含的内容，但迭代器不会进入无限循环（如果`list`是 java.util.LinkedList 可能会发生这种情况）。这可以`newList`让您在一个核心上创建，而您的另一个线程在另一个上工作。

缺点：如果`list`是 ArrayList，您可能会发现切换到并发类需要做一些工作。并发类使用更多内存并且通常比 ArrayList 慢。更重要的是： 的内容`list`可能不一致。（实际上，您已经遇到了这个问题。）您可能会在另一个线程中同时添加或删除条目 A 和 B，并期望两者都或都不在 中`newList`，而实际上只有一个很容易在那里，迭代器在添加或删除一个之后但在另一个之前通过。（单核机器没有这么多的问题。）但是如果`list`已经被认为处于恒定的、无序的流动中，这可能正是你想要的。

**另一个不同的副作用：** 您必须小心使用大型数组和使用它们的东西（如 ArrayList 和 HashTable）。当您删除条目时，它们不会使用更少的空间，因此您最终可能会得到一堆包含少量数据的大型数组，从而占用您的大部分内存。

更糟糕的是，当您添加条目时，它们会释放旧数组并分配一个新的更大的数组，这会导致空闲内存碎片化。也就是说，空闲内存大部分变成了旧数组中的废弃块，这些块都不足以用于下一次分配。垃圾收集器会尝试对所有这些进行碎片整理，但工作量很大，而且 GC 倾向于抛出内存不足的异常，而不是花时间重新排列空闲块，以便它可以得到最大的内存块。刚要求。因此，当只有 10% 的内存在使用时，就会出现内存不足错误。

数组是最快的东西，但你需要小心使用大数组。注意每次分配和免费。给他们一个适当的初始大小，这样他们就不会重新分配空间。（假设你是一个 C 程序员。）善待你的 GC。如果您必须创建、释放和调整大列表的大小，请考虑使用链接类：LinkedList、TreeMap、ConcurrentLinkedQueue 等。它们只使用少量内存，GC 喜欢它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-19T19:21:55.117

我创建了一些代码来测试@Gray 所说的内容。从数组列表中删除时使用复制构造函数会导致创建的列表中出现空元素。您可以在以下代码中看到错误条目的数量不断增加：

```
public static void main(String[] args) {

    final int n = 1000000;
    final int m = 100000;
    final ArrayList<String> strings = new ArrayList<String>(n);

    for(int i=0; i<n; i++) {
        strings.add(new String("abc"));
    }

    Thread creatorThread = new Thread(new Runnable() {
        @Override
        public void run() {
            ArrayList<String> stringsCme = new ArrayList<String>(strings);
            int wrongEntries = 0;
            for(int i=0; i<m; i++) {
                stringsCme = new ArrayList<String>(strings);

                for(String s : stringsCme) {
                    if(s == null || !s.equals("abc")) {
                        //System.out.println("Wrong entry: " + s);
                        wrongEntries++;
                    }
                }

                if(i % 100 == 0)
                    System.out.println("i = " + i + "\t list: " + stringsCme.size() + ", #wrong entries: " + wrongEntries);
            }

            System.out.println("#Wrong entries: " + wrongEntries);
        }
    });
    creatorThread.start();

    for(int i=0; i<m; i++) {
        strings.remove(MathUtils.random(strings.size()-1));
    }
} 
```

# c# - 使用 LINQ 对 XML 进行排序

> ID：11034774
> 
> 赞同：1
> 
> 时间：2012-06-14T14:01:08.657
> 
> 标签：c#, linq, .net-4.0

我有以下 XML：

```
<TRUCK Counter="0">
  <CARRIER>A PLUS EXPEDITING &amp; LOGISTICS INC.</CARRIER>
  <CARRIERPHONE>(000)000-0220</CARRIERPHONE>
  <UNITNO>100673V</UNITNO>
  <UNITTYPE>CARGO VAN                     </UNITTYPE>
  <DISTANCE>13</DISTANCE>
  <AVAILABLE>06/14/2012 09:00</AVAILABLE>
  <STATUS>In Service</STATUS>
  <LOCATION>REDFORD, MI</LOCATION>
  <NOTE> check 1st</NOTE>
  <PAYLOAD>3000</PAYLOAD>
  <DIMS>
    <BOXLENGTH>108</BOXLENGTH>
    <BOXWIDTH>53</BOXWIDTH>
    <BOXHEIGHT>48</BOXHEIGHT>
  </DIMS>
  <DOMICILE>US</DOMICILE>
  <SATELLITE>N</SATELLITE>
</TRUCK> 
```

我正在选择我想要的元素并以一种方法对它们进行排序，该方法通过列进行排序：

```
public static XDocument GetSortedTrucksXml(string xmlBuffer, string sortColumn)
{
    XDocument xdoc = XDocument.Parse(xmlBuffer);

    int Counter = 0;

    var trucks = from s in xdoc.Element( "TRUCKS" ).Elements( "TRUCK" )
                 orderby ( string )s.Element( sortColumn )
                 select new XElement( "TRUCK",
                        s.Element( "CARRIER" ),
                        s.Element( "CARRIERPHONE" ),
                        s.Element( "UNITNO" ),
                        s.Element( "UNITTYPE" ),
                        s.Element( "DISTANCE" ),
                        s.Element( "AVAILABLE" ),
                        s.Element( "STATUS" ),
                        s.Element( "LOCATION" ),
                        s.Element( "NOTE" ),
                        s.Element( "PAYLOAD" ),
                        s.Element( "DIMS" ),
                        s.Element( "DOMICILE" ),
                        s.Element( "SATELLITE" ) );

    XDocument newDoc = new XDocument( new XElement( "TRUCKS" ) ); 
```

请注意，我只是通过指定父元素来获取子元素。

我的问题是如何对 BOXLENGTH、BOXWIDTH 或 BOXHEIGHT 进行排序？如果我将“DIMS/BOXLENGTH”作为排序列发送，则会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:05:16.343

您可以使用[XPath 扩展方法](http://msdn.microsoft.com/en-us/library/system.xml.xpath.extensions_methods.aspx)：

```
// You need this namespace
using System.Xml.XPath;

// use this in your query
orderby (string)s.XPathSelectElement(sortColumn) 
```

# c# - 无法为 Visual Studio 安装 Watin

> ID：11034783
> 
> 赞同：0
> 
> 时间：2012-06-14T14:01:53.830
> 
> 标签：c#, watin, .net

我想为 Visual Studio 2010 安装 Wating。我在网站上看到了他们的视频，并按照步骤操作，但在安装 NuGet 时出现了一些错误。

这就是我现在所做的：

1.  新项目 -> C# 表单
2.  项目 -> 添加参考 -> 添加了 Net 4 DLL WatiN.Core.dll
3.  将此代码添加到我的项目中（来自他们的网站，已添加到下面的源代码中）

我得到这个错误：

'Form' 是 'System.Windows.Forms.Form' 和 'WatiN.Core.Form' 之间的模糊引用 'WatiN.Core.Form' 不包含采用 0 个参数的构造函数当前上下文

这是我的应用程序代码（我也使用 Watin.Core 添加）：

```
 private void Form1_Load(object sender, EventArgs e)
    {

        using (var browser = new IE("http://www.google.com"))
        {
            browser.TextField(Find.ByName("q")).TypeText("WatiN");
            browser.Button(Find.ByName("btnG")).Click();

            Assert.IsTrue(browser.ContainsText("WatiN"));

        }
    } 
```

你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:25:52.473

问题是两者都`System.Windows.Forms`包含`WatiN.Core`类的定义`Form`。我的建议是删除两个（其中一个）引用`WatiN.Core`并`System.Windows.Forms`手动解决问题，如下所示：

```
System.Windows.Forms.Form form = new System.Windows.Forms.Form(); 
```

# iphone - iPhone 如何在 iPhone 和网络服务器之间交换数据？

> ID：11034784
> 
> 赞同：0
> 
> 时间：2012-06-14T14:01:54.673
> 
> 标签：iphone, web-services

基本上，我的 iPhone 应用程序需要与 Web 服务器交换数据——我有一个人员列表（姓名、地址等），iPhone 用户可以从服务器获取此列表，对其进行修改，然后再次将其发送到服务器。

由于我很少/甚至没有进行有关 iPhone 的网络通信，所以从哪里开始是一个好地方，基本上从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:21:44.250

当您询问起点时，我暂时不会共享代码（如果您愿意，我可以编辑答案）。首先准备您要发送到服务器的数据（我建议使用 JSON），如果您有少量且不敏感的数据，请创建一个 GET 请求到您的服务器并通过 GET 发送您的数据，如果您有大量数据或者您有重要（或安全相关）数据向服务器创建 POST 请求。[如果您需要更多，这](http://www.nunosantos.net/archives/234)可能是一个起点，对于[JSON](http://www.raywenderlich.com/5492/working-with-json-in-ios-5) ，本教程可能也不错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:22:06.527

首先确定网络服务器正在发送和接收什么。来自/到服务器的数据可以以多种形式接收/发送，最常见的有： 1\. JSON 2\. XML

首先尝试了解它们的真正含义。然后你可以搜索各种关于 iPHONE 应用程序的 JSON 和 XML 集成的教程。对于 JSON，最好的教程是： [http ://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:41:20.270

我希望这就是你要找的。如果是这样，这个话题是相当普遍的。除了免责声明，我会将这个问题分解为三个部分，然后确定您可能想要采取的最终方法。

**1\. 资源**

您需要从中选择

1.  *自托管服务*- 来自您/您的客户自己的服务

2.  *基于云的服务*- 这里有几种方法。

    一种。*Heroku/Appengine* - 您部署应用程序的位置，其余的由他们负责。

    湾。*Amazon EC2/AWS* - 您在其中管理应用程序部署/扩展等

    C。*Parse.com* - 其中“webservice”是由您的客户端应用程序控制的。

**2\. 技术**

嗯，这是相当直截了当的。这些平台中的每一个都使用不同的技术。所以这一切都取决于你能掌握什么以及多快。虽然现在没关系，但这也取决于您是否可以使用该技术/解决方案实现您想要的。

**3.定价**

你能花多少钱？托管主机相当便宜，自托管取决于提供的服务，对于每台服务器而言，云服务可能有点贵

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T14:51:42.097

Web 服务是您想要研究的东西。您可以在 Google 上搜索大量教程，而且实施起来并不难。您可以使用不同类型的 Web 服务，并且您想根据您拥有的服务器端技术以及您的数据在两者之间传输的复杂程度来选择一种。

在我的情况下，我在 iis 服务器上有 asp.net。由于我的公司有很多遗留代码，并且我们希望我们的应用程序可用于不同平台上的应用程序，因此我们选择了基于 POST 的 SOAP。

我在 iOS 端手动解析 xml 并将信息存储在本地 sqlite 数据库中。

我相信我可以选择更好的东西。Jason 是一个非常好的选择，并且有一些第三方 Jason 解析器可用。我也想使用WCF。

In your situation, like I said, the server side technologies is what you wanna think of before you make your decision.

# html - 取消转义表单输入以允许某些 HTML

> ID：11034785
> 
> 赞同：0
> 
> 时间：2012-06-14T14:01:57.000
> 
> 标签：html, forms, escaping

我正在使用整洁的[Jazzy Forms 插件](http://wordpress.org/extend/plugins/jazzy-forms/)来构建基本表单，但希望这个问题足够笼统，可以在这里发布......

我想在表单输入标题中使用一些 HTML，例如`<span>`or `<br>`，但是当我这样做时，代码会显示在前端。

有没有办法输入 HTML 以便输出实际的 HTML？或者答案是否特定于这个插件？这是[正在进行的表单](http://carolineelisa.com/indigo/2012/test-form/)，您可以在第一个单选按钮上看到 span 标签。

谢谢！

# c# - EasyHook 和 CallWndProc

> ID：11034786
> 
> 赞同：1
> 
> 时间：2012-06-14T14:01:59.863
> 
> 标签：c#, hook, wndproc, easyhook

我正在拼命尝试`CallWndProc`使用 EasyHook 进行挂钩，但未能成功。

```
Intptr addr = LocalHook.GetProcAddress("user32.dll", "CallWndProc"); 
```

这会抛出“给定的方法不存在。”。所以我猜要么`CallWndProc`不在 user32.dll 中，要么它被称为略有不同的东西，或者我错过了一些基本的难题。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:08:56.060

给定的方法不存在。

该函数分别导出为 ANSI 和 Unicode 调用`CallWindowProcA`。`CallWindowProcW`

# c# - 如何在 asp.net 输出流上编写 Microsoft.Office.Interop.Excel.Application 对象

> ID：11034789
> 
> 赞同：1
> 
> 时间：2012-06-14T14:02:11.073
> 
> 标签：c#, asp.net, iis-6, excel-2007, excel-interop

我`Microsoft.Office.Interop.Excel`在 C# 中使用创建自定义`.xlsx`文件。

在这样做时，我创建了一个[`Workbook`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.workbook.aspx)对象。由于复杂的 SQL 查询的性质来获取数据、处理数据并通过 Interop 应用自定义样式和格式化代码非常冗长。更不用说避免 Interop 本身的内存泄漏以及确保 Excel 在运行后正确关闭的非常谨慎的过程。

我最初将它作为控制台应用程序进行测试，并使其工作令我满意。[`SaveAs`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.workbook_members.aspx)它所做的是使用该成员将最终结果保存到文件系统中。

但是，我的下一个目标是将输出重定向为输出流，`asp.net`类似于[此处的这个问题](https://stackoverflow.com/questions/2519026/how-do-you-stream-an-excel-2007-or-word-2007-file-using-asp-net-and-c-sharp)。我已经进行了一些初步研究，但似乎找不到不涉及首先将工作簿保存到服务器文件系统的方法。如果多个用户同时访问等，这可能会导致冲突。

所以我的问题是，有没有一种简单的方法来设置 asp.net`ContentType`并`.xlsx`流出`Workbook`对象而不将其保存到文件系统？如果没有，有没有办法`asp.net`可以自动保存临时文件而不会发生冲突，提供临时文件，然后在提供临时文件后删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:04:35.107

我同意您应该避免使用 Excel Interop 服务器端的评论，并且我使用的第三方库（EPPlus、Aspose）都支持流式输出。但是，如果您想保存临时文件而不发生冲突，您可以使用[Path.GetTempFileName](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)。

如果您的 ASP.NET 应用程序在没有配置文件的帐户下运行，您可能需要授予它`%WINDIR%\Temp`对它使用的任何临时目录的写入权限。

# c# - ProtoBuf DeepClone 在不使用代理时返回空对象

> ID：11034791
> 
> 赞同：1
> 
> 时间：2012-06-14T14:02:18.023
> 
> 标签：c#, inheritance, serialization, protobuf-net

我正在使用 protobuf-net v2 并且有一个类继承了我不想序列化/克隆的“列表”。
当我调用“DeepClone”（或反序列化）时，克隆对象为空。我可以将对象序列化为文件，它似乎按预期序列化，但 RuntimeTypeModel 无法从字节 [] 反序列化它。

我发现解决这个问题的唯一解决方案是使用代理。

如前所述，如果您跳过“SetSurrogate”，则克隆失败。有没有其他选择来解决它？

随附的：

```
class Program
{
    static void Main(string[] args)
    {
        RuntimeTypeModel model = RuntimeTypeModel.Create();
        model[typeof(Custom<string>)].SetSurrogate(typeof(Surrogate<string>));

        var original = new Custom<string> { "C#" };
        var clone = (Custom<string>)model.DeepClone(original);
        Debug.Assert(clone.Count == original.Count);
    }
}

[ProtoContract(IgnoreListHandling = true)]
public class Custom<T> : List<T> { }

[ProtoContract]
class Surrogate<T>
{
    public static implicit operator Custom<T>(Surrogate<T> surrogate)
    {
        Custom<T> original = new Custom<T>();
        original.AddRange(surrogate.Pieces);
        return original;
    }

    public static implicit operator Surrogate<T>(Custom<T> original)
    {
        return original == null ? null : new Surrogate<T> { Pieces = original };
    }

    [ProtoMember(1)]
    internal List<T> Pieces { get; set; }
} 
```

我发现的另一件事是，当您将“Custom”类中的 ProtoContract 属性替换为“System.Serializable”属性时，即使没有代理项，它也会按预期反序列化 byte[]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:16:58.937

这里的问题只是您通过以下方式**明确**关闭了列表处理：

```
[ProtoContract(IgnoreListHandling = true)]
public class Custom<T> : List<T> { } 
```

顾名思义，文档验证：

```
/// <summary>
/// If specified, do NOT treat this type as a list, even if it looks like one.
/// </summary>
public bool IgnoreListHandling {...} 
```

所以：没有什么有用的事情要做，因为`Custom<T>`没有任何其他数据成员要序列化。

所以：如果你不使用代理，不要禁用列表处理。此选项的主要目的是用于边缘情况，即*旨在*成为“对象”的东西也具有使其看起来像列表的特性（所有 protobuf-net 都需要`IEnumerable[<T>]`并且是一种方便的`Add(T)`方法）。

* * *

```
[TestFixture]
public class SO11034791
{
    [Test]
    public void Execute()
    {
        RuntimeTypeModel model = RuntimeTypeModel.Create();

        var original = new Custom<string> { "C#" };
        var clone = (Custom<string>)model.DeepClone(original);
        Assert.AreEqual(1, clone.Count);
        Assert.AreEqual("C#", clone.Single());
    }
    public class Custom<T> : List<T> { }
} 
```

# swing - 可调整大小的 Swing 工具提示

> ID：11034792
> 
> 赞同：1
> 
> 时间：2012-06-14T14:02:22.397
> 
> 标签：swing, resize, tooltip

我试图实现一个可调整大小的工具提示，但有一些问题。

显示工具提示时，文本会随着模型中的更改而更新（通过属性更改侦听器实现）。我现在需要的是，工具提示也会根据文本改变其大小。

试过了`revalidate`，`doLayout`但`repaint`没有效果。工具提示不会改变它的大小。只有移动鼠标才能为工具提示中显示的第一个文本提供正确的大小。

有人可以帮忙吗？

以下是一些代码片段：首先是我的收费提示类：

```
public class ResizeableToolTip extends JToolTip {

    public ResizeableToolTip(final JComponent component) {
        super(component);
        initComponents();
    }

    @Override
    protected void initGUI() {
        super.initGUI();
        setLayout(new BorderLayout());
    }

    /**
    * Component initialization goes here...
     */
    private void initComponents() {
        setTipText(getComponent().getToolTipText());
        setPreferredSize(calculateOptimalSize());
    }

    private abstract Dimension calculateOptimalSize();

    @Override
    public void setTipText(String tipText) {
        super.setTipText(tipText);
        setPreferredSize(calculateOptimalSize());
        revalidate();
    }
} 
```

然后我有一个使用此实现的按钮：

```
public class MyButton extends JButton implements PropertyChangeListener {
    //...
    private ResizeableToolTip tooltip;
    //...
    private initComponents() {
        //...
        tooltip = new ResizeableToolTip(this);
        //...
    }
    //...
    public void propertyChange(final PropertyChangeEvent pcevt) {
        //...
        if (MyButtonModel.TOOLTIPTEXT_PROPERTY.equals(pcevt.getPropertyName()) {
            tooltip.setTiptext((String) pcevt.getNewValue());
            tooltip.repaint();
        }
        //...
    }
    //...
} 
```

结果应该是一个工具提示，它显示在当 s.th 时文本正在更改的按钮上。数据模型的变化。文本更改有效，但工具提示框的大小保持错误大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T18:31:20.953

据我所知，除了移动鼠标之外，没有办法调整它的大小。然而，该组件应该有一个鼠标运动监听器，所以您所要做的就是在其上调用 mouseMoved，它会认为鼠标已被移动并会调整工具提示的大小。

```
//comp will be whatever component your tooltip is on
if(comp.getMouseMotionListeners().length > 0)comp.getMouseMotionListeners()[0].mouseMoved(new MouseEvent(inst, MouseEvent.MOUSE_MOVED, System.currentTimeMillis(), 0, MouseInfo.getPointerInfo().getLocation().x, MouseInfo.getPointerInfo().getLocation().y, 0, false)); 
```

只需在设置工具提示后调用它，它应该会调整大小。

# shell - Emacs 默默地将 -i 附加到 shell 命令

> ID：11034794
> 
> 赞同：2
> 
> 时间：2012-06-14T14:02:25.797
> 
> 标签：shell, emacs, eshell

它破坏了我试图运行的外壳，因为它不知道该`-i`选项。我已经搜索了所有以开头的变量，`shell-`但它们都没有`-i`设置`explicit-shell-file-name`更改名称的值，但仍然附加了该选项。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:14:46.997

有一个变量称为`explicit-<your shell name>-args`（例如`explicit-bash-args`）。检查它是否已定义以及它包含什么。

# c# - 使用 JSON 的级联下拉列表不带来新记录

> ID：11034802
> 
> 赞同：0
> 
> 时间：2012-06-14T14:02:56.913
> 
> 标签：c#, javascript, jquery, json, asp.net-mvc-3

我有级联下拉列表来显示所选公司的联系人列表。使用 JSON 请求如下请求所选公司的联系人。

**在观点上：**

```
$('#companyId').change(function () {
        var selectedCompany = $(this).val();
        if (selectedCompany != null && selectedCompany != '') {

            $.getJSON('@Url.Action("Contacts")', { id: selectedCompany }, 
                           function (Contacts) {

                        var contactSelect = $('#contactId');
                        contactSelect.empty();
                        $.each(Contacts, function (index, contact) {
                        contactSelect.append($('<option/>', {
                        value: contact.value,
                        text: contact.text
                    }));
                });
            });
        }
    }); 
```

**控制器：**

```
public ActionResult Contacts(int id)
    {

        return Json(

            db.Contacts.Where(x=>x.deleted==false).
            Select(c => new { value = c.contactId, text = c.contactName, c.companyId }).
            Where(t => (int)t.companyId == id).OrderBy(x=>x.text),
            JsonRequestBehavior.AllowGet
        );
    } 
```

这工作得很好。但是，此服务器端代码仅对任何选定的公司（在第一个下拉列表中）首次执行。IE。如果我选择 ComanyA，然后是 CompanyB，然后再次选择 CompanyA，它不会从服务器中获取联系人列表，而是从缓存中填充。因此，新联系人未按预期填充。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:13:31.523

您需要在请求中添加一个随机数，以便浏览器每次都认为它是一个单独的调用。您可以将代码更改为：

```
$.getJSON('@Url.Action("Contacts")', { id: selectedCompany, n : Math.random() }, 
                           function (Contacts) {

                        var contactSelect = $('#contactId');
                        contactSelect.empty();
                        $.each(Contacts, function (index, contact) {
                        contactSelect.append($('<option/>', {
                        value: contact.value,
                        text: contact.text
                    }));
                });
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:21:18.790

那是 IE 缓存问题，在客户端或服务器端解决它的方法很少。检查此问题以获取详细信息和食谱。[$.getJSON 在 IE8 中返回缓存数据](https://stackoverflow.com/questions/264216/getjson-returning-cached-data-in-ie8)

# sqlite - SQLite3 中的持久用户定义函数？

> ID：11034803
> 
> 赞同：3
> 
> 时间：2012-06-14T14:02:57.197
> 
> 标签：sqlite, user-defined-functions

有谁知道在 SQLite 3（使用 C 或 PHP）中注册“持久”UDF 或类似的方法？我知道我可以使用 C 或 PHP API 将 UDF 注册为回调函数，但只要应用程序对数据库的句柄，该函数就会存在。

在 MySQL 中，我可以通过类似“CREATE FUNCTION my_udf RETURNS INTEGER SONAME 'shared_lib_ contains_my_udf.so'”来实现这一点。

我需要这个的原因是，当“应用程序 B”使用调用我的 UDF 的触发器插入、更新或删除数据时，应该通知“应用程序 A”。操作数据库的应用程序是一个 PHP Web 应用程序。因此，如果我不能使 UDF 持久化，我必须为每个 Web 请求注册 UDF - 如果应用程序为每个 Web 请求打开多个连接，我什至必须在每个请求中多次注册 UDF . 这可能意味着必须在许多地方更改应用程序，而我真的想避免这种情况。

如果这是不可能的，有没有人有不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:20:06.830

唯一的解决方案似乎是修改 SQLite 源以添加所需的功能。虽然由于部署问题，这在我的场景中不起作用，所以我必须完全放弃 SQLite 并切换到 MySQL 或 PostgreSQL。我希望 SQLite 有某种插件机制来使用自定义函数扩展它而无需重新编译，就像在 MySQL 中实现 UDF 的方式一样。不过，这可能会使它的“精简”程度大大降低。尽管我很喜欢 SQLite，但它并不是适合所有事情的工具。

# php - 用字符串变量替换 preg_match 中的反向引用

> ID：11034806
> 
> 赞同：0
> 
> 时间：2012-06-14T14:03:09.980
> 
> 标签：php, preg-replace

我正在尝试模板化文档，我想通过搜索文档`[%text%]`并将其替换为动态文本来替换文档的部分`$array['text']`or `$text`。我知道我可以使用`str_replace("[%text%]", $array['text'], $page)`，但我想查找 的所有实例`[%(.*?)%]`并替换为 with`$array[$1]`而不是`$1`。我试过使用`create_function($matches, $array)`，但它抱怨`Missing argument 2 for {closure}()`.

```
$page = preg_replace('#\[%(.*?)%\]#is', $array["$1"], $page); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:18:19.057

首先做一个 preg_match 并找到匹配的名称。然后用替换的每个找到的名称创建数组。然后使用带有数组的 preg_replace 作为第二个参数，从而用数组中的项目替换名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:19:31.660

你可以`preg_match_all('#[%(.*?)%]#is', $page, $matches);`然后

```
if(count($matches == 2))
{
  $key = 0;
  foreach(array_unique($matches[0]) as $val)
  {
    if(isset($array[$key]))
    {
      $page = str_replace($val, $array[$key++], $page);
    }
    else
    {
      break; // more matches than array elements
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:53:45.983

您可以使用 preg_replace_callback 来完成。

```
<?php
$page = preg_replace_callback('#\[%(.*?)%\]#is',
  function ($m){
    GLOBAL $array;
    return $array[$m[1]];
  }
, $page);
?> 
```

# list - 如何在已经使用背景图像的 ul 子菜单中添加图像/div？

> ID：11034809
> 
> 赞同：0
> 
> 时间：2012-06-14T14:03:24.660
> 
> 标签：list, background-image, drop-down-menu, submenu

[http://www.dunhamssports.com/wp-content/themes/ds2/css/images/pic.png](http://www.dunhamssports.com/wp-content/themes/ds2/css/images/pic.png)

我正在尝试在我正在构建的列表中的每个子菜单的底部添加一个红色条。由于当前子菜单 ul 正在输出深色渐变背景，因此我无法使用其他背景图像。无法弄清楚我的代码中的哪个位置，我可能能够欺骗它出现在子菜单中每个列表的底部。

```
<div id="nav">
        <ul id="coolMenu">
            <li><a href="#">Home</a></li>
            <li><a href="#">Products</a>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Products</a></li>
                        <li><a href="#">Store Locator</a></li>
                        <li><a href="#">Weekly Circular Locater</a></li>
                   </ul>

            </li>
            <li><a href="#">Store Locator</a>
                    <ul>
                         <li><a href="#">Home</a></li>
                        <li><a href="#">Products</a></li>
                        <li><a href="#">Store Locator</a></li>
                        <li><a href="#">Weekly Circular Locator</a></li>
                    </ul>
            </li>
            <li><a href="#">Weekly Circular</a></li>
        </ul>

    </div>

body {background-color:#999;}
    #nav {background: url(http://www.dunhamssports.com/wp-content/themes/ds2/css/images/nav.jpg) repeat-x scroll 0 0 transparent;   border-bottom: 1px solid #010103;   height: 46px;}
    ul {list-style-type:none; padding:0px; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:16px; line-height:36px; text-transform:uppercase;}
    #coolMenu {float: left;list-style: none;margin:0px; font-size: 14px;}
    #coolMenu > li {float: left;margin:10px 0px 0px 10px; border-right:1px solid #fff;padding-right:7px;}
    #coolMenu li a {display: block; line-height: 2em; padding: 0 .5em; text-decoration: none;}
    #coolMenu ul {position: absolute;display: none;z-index: 999;list-style-type:none;}
    #coolMenu ul li a {width: 100%;}
    #coolMenu li:hover ul {display: block;}
    /* Main menu
    ------------------------------------------*/
    #coolMenu > li > a {color:#fff;font-weight: normal;}
    #coolMenu > li:hover > a {color: #fff; border-bottom:9px solid #920001;}
    #coolMenu > li > .active {color: #fff;}
    /* Submenu
    ------------------------------------------*/
    #coolMenu ul {border: 1px solid #fff; background-image:url(http://www.dunhamssports.com/wp-content/themes/ds2/css/images/dropnav-bg.png); background-repeat:repeat;text-transform:none; color:#fff; list-style-type:disc; padding-left:25px;}
    #coolMenu ul li a {color: #fff; text-indent:-10px;}
    #coolMenu ul li:hover a {color: #999;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:34:26.677

您可以在最后一个 li 中放入一个 div 以便您可以像这样在那里调整它，

```
 <ul id="coolMenu">
        <li><a href="#">Home</a></li>
        <li><a href="#">Products</a>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Store Locator</a></li>
                    <li><a href="#">Weekly Circular Locater</a>
                      <div></div>
                    </li>
               </ul>
        </li>
        <li><a href="#">Store Locator</a>
                <ul>
                     <li><a href="#">Home</a></li>
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Store Locator</a></li>
                    <li><a href="#">Weekly Circular Locator</a>
                    <div></div></li>
                </ul>
        </li>
        <li><a href="#">Weekly Circular</a></li>
    </ul> 
```

然后换上这种风格，

```
#coolMenu ul li div {
    border-bottom:9px solid #920001;
    width: auto;
    margin-left: -20px;
} 
```

# events - HTML5 Server-Sent-Events 在 Firefox6+ 浏览器上不起作用？

> ID：11034810
> 
> 赞同：1
> 
> 时间：2012-06-14T14:03:24.770
> 
> 标签：events

这是我用于服务器发送事件的 ASP.NET。

```
Response.ContentType = "text/event-stream";
Response.CacheControl = "no-cache";
//repeat loop
while (true) {
int LastEventId = Request.Headers.Get("Last-Event-ID") != null ?       
Int32.Parse(Request.Headers.Get("Last-Event-ID")) : -1;
int MessageCount =    UserManager.GetMessageCount(UserManager.GetUserDetails(Page.User.Identity.Name).UserId);
if (LastEventId != MessageCount)
{
    Response.Write(string.Format("retry: 5000\nid: {0}\ndata: {0}\n\n", MessageCount));
    Response.Flush();
}
else
{
    Response.Write(string.Format("retry: 5000\nid: {0}\ndata: \n\n", MessageCount));
    Response.Flush();
}
    if (Response.IsClientConnected == false)
{
    break;
}
    Response.Close();
    System.Threading.Thread.Sleep(5000);
} 
```

Firefox 浏览器在两次后没有重新连接。相同的代码在 Google Chrome 上运行。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T13:50:22.673

尝试删除冒号后的空格。似乎 Firefox 解析器对空格和换行非常敏感。尝试像这样更改您的代码：

```
Response.Write(string.Format("retry:5000\nid:{0}\ndata:{0}\n\n", MessageCount)); 
```

在某些浏览器中定义字符集也可能会有所帮助：

```
Response.ContentType = "text/event-stream;charset=UTF-8"; 
```

希望这可以帮助。

# cordova - Sammy.js 应用程序链接路由在 phonegap 中不起作用

> ID：11034811
> 
> 赞同：0
> 
> 时间：2012-06-14T14:03:27.000
> 
> 标签：cordova, sammy.js

我正在尝试通过 phonegap 运行一个基本的 sammy.js 应用程序。

该应用程序加载正常，但是当通过我的 android (2.2) 手机运行应用程序时，路由似乎不起作用 - 单击链接时没有任何反应，但是当通过 Android 虚拟设备 (2.1) 运行应用程序时，链接工作为预期并呈现正确的模板。

由于关于 sammy.js 和 Phonegap 的文档有限，有没有人遇到过这个问题或类似问题，他们可能会指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T17:17:18.903

这是因为安卓浏览器的问题。您可以在此处查看建议的解决方案：[https](https://github.com/quirkey/sammy/issues/105)
://github.com/quirkey/sammy/issues/105 基本上添加`this.disable_push_state = true;`您的`$.sammy(function () {...}`，一切正常。

# cakephp - 调用自定义 cakephp 控制器方法导致数据库错误

> ID：11034812
> 
> 赞同：0
> 
> 时间：2012-06-14T14:03:37.147
> 
> 标签：cakephp

我在 mo 控制器中创建了一个简单的方法，如下所示：

```
public function getAddresses() {
    $addresses = $this->Adres->find('all');
    return $addresses;
} 
```

当我在控制器中调用它时，如下所示：

```
 $this->loadModel('Adres');
    $sponsors = $this->Adres->getAddresses(); 
```

我收到这个奇怪的错误：

```
数据库错误

错误：SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“getAddresses”附近使用正确的语法

SQL 查询：getAddresses

```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:09:21.177

那是因为你在这里调用模型上的方法

```
$this->loadModel('Adres');
$sponsors = $this->Adres->getAddresses(); 
```

当您在第一句话中明确说明该方法在*控制器*上时。将方法移至`Adres`模型，您应该会很好！

# c# - 匹配字符串与正则表达式，只要它没有被括号包围

> ID：11034821
> 
> 赞同：8
> 
> 时间：2012-06-14T14:04:02.557
> 
> 标签：c#, regex, lookahead, lookbehind

我正在寻找匹配字符串“Order By XXX”，其中 XXX 可以是任何字母、数字、句点、逗号、空格或方括号。**但是，如果它没有**被括号包围，我只想匹配它（一侧的括号是可以的，只要它不在两侧）。所以它应该匹配“”中的斜体部分，因为它不应该匹配任何东西

应该匹配（斜体匹配部分）：

*   从 Y*顺序按 z选择 X*
*   Select y = (select top 1 Z from C *Order by [ID] desc* )

不应该匹配：

*   从 Y 中选择 X（按 z 排序）
*   Select aa, NTILE(4) OVER (Order by ab) group by ac

我有用于按文本匹配订单的正则表达式字符串：`[ ]*order by [\w,.\[\] ]+`。但是，我在正确地进行前瞻/落后工作时遇到了一些麻烦。关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:37:18.097

试试这个：

```
(?<!\(\s*)order\s+by\s+[\w,.\[\] ]+(?<!\s*\)) 
```

在 PowerShell 中测试时：

```
PS> @(
    'Select X from Y order by z'
    'Select y = (select top 1 Z from C Order by [ID] desc)'
    'Select X from Y (order by z)'
    'Select a.a, NTILE(4) OVER (Order by a.b) group by a.c'
    'Order by 87'
    '(Order by 87)'
    '( Order by 87 )'
    '(Order by 87 )'
    '( Order by 87)'
    'Order by _foo'
) -match '(?<!\(\s*)order\s+by\s+[\w,.\[\] ]+(?<!\s*\))'

Select X from Y order by z
Select y = (select top 1 Z from C Order by [ID] desc)
Order by 87
Order by _foo

PS> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:28:20.990

这对我有用，让我知道是否还有其他我遗漏的情况：
`Regex r = new Regex(@"[^(](order by [^)]+)", RegexOptions.IgnoreCase);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T14:53:30.973

你可以像这样使用交替：

```
\(?(order by [a-z0-9., \[\]]+)(?![a-z0-9., \[\]])(?<!\))|[^(](order by [a-z0-9., \[\]]+)\) 
```

“order by XXX”将被第一个或第二个捕获括号捕获。

# python - re.RegexObject 不存在（引发 AttributeError）

> ID：11034824
> 
> 赞同：5
> 
> 时间：2012-06-14T14:04:10.637
> 
> 标签：python, regex, monkeypatching

在我最新的一系列问题中，我询问了关于在`argparse`. 大多数情况下，我想更改定义为的属性：

```
class FooClass(object):
   def __init__(self):
      self._this_is_a_re=re.compile("foo") 
```

由于它是“受保护的”，我想在替换我自己的正则表达式之前检查这个属性是否存在以及它是否是一个正则表达式。例如：

```
import re
myFoo=FooClass()
attr='_this_is_a_re'
if(hasattr(myFoo,attr) and isinstance(getattr(myFoo,attr),re.RegexObject):
   setattr(myFoo,attr,re.compile("bar")) 
```

这会失败并出现属性错误，因为 re 没有命名属性`RegexObject`，即使它在[文档](http://docs.python.org/library/re.html#re.RegexObject)中也是如此。为什么 RegexObject 记录在案但不可用？我应该在那里使用什么？我想我可以说：`type(a) is type(b)`，但这看起来很难看......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T14:30:07.370

是的，`<type '_sre.SRE_Pattern'>`但我会简单地使用`type(re.compile(''))`.

顺便说一句，似乎即使是`re`开发人员也不确定确切的类型是什么，如下[所示](http://hg.python.org/cpython/file/412c7daed0db/Lib/re.py#l222)：

```
_pattern_type = type(sre_compile.compile("", 0)) 
```

# sql-server - 执行 Oracle 到 SQL Server 迁移后，我丢失了 SysDB 数据库。我怎样才能重新创建它？

> ID：11034831
> 
> 赞同：0
> 
> 时间：2012-06-14T14:04:35.207
> 
> 标签：sql-server, oracle, sql-server-2008, tsql, migration

我最近做了一个 Oracle 到 SQL Server 2008 R2 的迁移。PL/SQL 存储过程由 SSMA 转换为 T/SQL。转换后的 T/SQL 对 sysdb 数据库有很多引用，例如`sysdb.ssma_oracle.db_check_init_package` 我然后导出了 SQL Server 2008 R2 数据库，并将其导入到 SQL Server 2012。但是我忘记复制 sysdb 数据库。创建 sysdb 数据库的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:04:35.970

只需`SSMA for Oracle 5.2 Extension Pack.exe`在带有 SQL Server 数据库的计算机上安装（可从 Microsoft 下载）（告诉它忽略计算机上未安装 Oracle 的事实），它将为您创建 sysdb 数据库，以及它需要的扩展存储过程.

# c# - 循环变量名

> ID：11034834
> 
> 赞同：2
> 
> 时间：2012-06-14T14:04:48.497
> 
> 标签：c#, .net, wpf, xaml

我有一个关于在 WPF 中循环变量名的具体问题。

XAML 代码如下所示：

```
<Grid>
    <Button name="button1" Visibility="Collapsed" />
    <Button name="button2" Visibility="Collapsed" />
    <Button name="button3" Visibility="Collapsed" />
    <Button name="button4" Visibility="Collapsed" />
</Grid> 
```

我想知道是否可以使用带有以下数字的 for 循环来遍历变量名称：

```
private DateTime time = DateTime.Now;
private CultureInfo ci = new CultureInfo("en-GB");
for(int i = 0; i <= 4; i++)
{
    /* (*Plus i*): A example as what I want/like to do */
    string Year = String.Format(ci, "{0:yyyy}", Time.addDays(i-1));
    button(*Plus i*).Visibility = Visibility.Visible;
    button(*Plus i*).Name = Year;
} 
```

甚至可以添加一个数字来达到某个变量吗？请帮帮我，谢谢你的任何回应..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:10:50.797

如果您想遍历该网格中的按钮，则可以为网格分配名称，例如*buttonsGrid*。比你可以迭代它的 Children 属性

```
foreach (var childButton in buttonsGrid.Children.OfType<Button>())
// do smth 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:07:31.947

您无法通过运行时生成的名称访问变量。

* * *

但是您可以通过运行时生成的名称进行访问控制：

```
TextBox textbox = grid.FindName("button" + i) as TextBox; 
```

# android - 将项目从 C 转换为 Java

> ID：11034835
> 
> 赞同：0
> 
> 时间：2012-06-14T14:04:50.350
> 
> 标签：android, bluetooth, android-ndk

我目前正在搞乱Android，开始制作应用程序。应用程序与蓝牙设备连接，然后向其发送信号，然后另一个设备发回请求的数据。

我获得了用 C 编写的其他设备 API 的文档，它基本上存储了发送设备所需的所有特定信号。如何将这些从 C 文件更改为 java 文件。我已经下载了 Android NDK，但不知道如何处理它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:14:49.937

干得好

[http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:15:08.233

您可以从您的 Android Java 代码中调用 C 库（如果我理解正确，这就是您想要做的）。您将需要 NDK 并且需要使用 JNI 来允许 java 代码与 c 库对话。有很多关于这些只是搜索的好教程。

例如， [Marakana 有一个很好的 Android internals 教程/视频](http://marakana.com/s/andevcon_android_internals,271/index.html)。看看他谈到使用 JNI 支持构建应用程序的部分。他使用 C 中计算斐波那契数列的库示例，但他从 Java 调用该库。

# matlab - 如何向量化矩阵的逐行对角化

> ID：11034837
> 
> 赞同：2
> 
> 时间：2012-06-14T14:04:53.677
> 
> 标签：matlab, matrix, octave, vectorization

我有一个 n×m 矩阵，我想将它转换为一个 mn×m 矩阵，结果的每个 m×m 块都包含每行的对角线。

例如，如果输入是：

```
[1 2; 3 4; 5 6] 
```

输出应该是：

```
[1 0; 0 2; 3 0; 0 4; 5 0; 0 6] 
```

当然，我不想自己用`for`循环一步步组装矩阵。
有没有一种矢量化和简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:40:33.877

对于执行此操作的矢量化方式，将对角元素的线性索引创建到结果矩阵中，并直接分配。

```
%# create some input data
inArray = [10 11;12 13;14 15];

%# make the index array
[nr,nc]=size(inArray);

idxArray = reshape(1:nr*nc,nc,nr)';
idxArray = bsxfun(@plus,idxArray,0:nr*nc:nr*nc^2-1);

%# create output
out = zeros(nr*nc,nc);
out(idxArray) = inArray(:);

out =

    10     0
     0    11
    12     0
     0    13
    14     0
     0    15 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T15:39:32.270

这是一个简单的矢量化解决方案，假设`X`是输入矩阵：

```
Y = repmat(eye(size(X, 2)), size(X, 1), 1);
Y(find(Y)) = X; 
```

另一种选择是使用[`sparse`](http://www.mathworks.com/help/matlab/ref/sparse.html)，这可以写成一个简洁的单行：

```
Y = full(sparse(1:numel(X), repmat(1:size(X, 2), 1, size(X, 1)), X')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T14:32:18.967

我看到的最简单的方法实际上非常简单，使用简单的索引引用和 reshape 函数：

```
I = [1 2; 3 4; 5 6];
J(:,[1,4]) = I;
K = reshape(J',2,6)'; 
```

如果你检查`J`，它看起来像这样：

```
J =
     1     0     0     2
     3     0     0     4
     5     0     0     6 
```

矩阵`K`正是想要的：

```
K =
     1     0
     0     2
     3     0
     0     4
     5     0
     0     6 
```

正如 Eitan T 在评论中指出的那样，以上内容特定于示例，并不涵盖一般解决方案。因此，以下是一般解决方案，其中 m 和 n 如问题中所述。

```
J(:,1:(m+1):m^2) = I;
K=reshape(J',m,m*n)'; 
```

如果您想测试它以查看它的工作原理，只需使用

```
I=reshape(1:(m*n),m,n)'; 
```

注意：如果 J 已经存在，这可能会导致问题。在这种情况下，您还需要使用

```
J=zeros(n,m^2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T18:22:48.430

它可能不是计算效率最高的解决方案，但这里有一个 1-liner 使用`kron`：

```
A = [1 2; 3 4; 5 6];
B = diag(reshape(A', 6, 1) * kron(ones(3, 1), eye(2))
% B = 
%     1     0
%     0     2
%     3     0
%     0     4
%     5     0
%     0     6 
```

如果 A 是 nxm，这可以概括为：

```
diag(reshape(A.', n*m, 1)) * kron(ones(n,1), eye(m)) 
```

# qt - 在 QDodckWidget 中停靠的小部件顶部绘制/绘制

> ID：11034838
> 
> 赞同：5
> 
> 时间：2012-06-14T14:04:56.947
> 
> 标签：qt, inheritance, draw, paint, qdockwidget

我在 Qt 中有一个继承 QDockWidget 的类。该类包含另一个小部件。是否有可能在我的 QDockWidget 继承类中定义一个在包含的小部件之上绘制东西的函数？就像绘画独立于包含的小部件但要链接到继承的类。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T03:32:51.240

当然有可能。事实上，这很简单。您需要放置一个子小部件，该小部件位于`QDockWidget`. 为此，它必须是您添加到停靠小部件的最后一个子小部件。该小部件不得绘制其背景，然后它可以绘制到任何停靠小部件的孩子。小部件的大小必须跟踪父小部件的大小。

下面是一个独立的例子。

![示例截图](../Images/6ccefad40cc2816660219c1400c0e136.png)

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/overlay-line-11034838
#include <QtGui>
#if QT_VERSION > QT_VERSION_CHECK(5,0,0)
#include <QtWidgets>
#endif

class Line : public QWidget {
protected:
   void paintEvent(QPaintEvent *) override {
        QPainter p(this);
        p.setRenderHint(QPainter::Antialiasing);
        p.drawLine(rect().topLeft(), rect().bottomRight());
    }
public:
    explicit Line(QWidget *parent = nullptr) : QWidget(parent) {
       setAttribute(Qt::WA_TransparentForMouseEvents);
    }
};

class Window : public QWidget {
    QHBoxLayout layout{this};
    QPushButton left{"Left"};
    QLabel right{"Right"};
    Line line{this};
protected:
    void resizeEvent(QResizeEvent *) override {
        line.resize(size());
    }
public:
    explicit Window(QWidget *parent = nullptr) : QWidget(parent) {
        layout.addWidget(&left);
        right.setFrameStyle(QFrame::Box | QFrame::Raised);
        layout.addWidget(&right);
        line.raise();
    }
};

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);
    Window w;
    w.show();
    return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:11:03.580

阿法克：不。

小部件是按深度顺序绘制的，因此无论您的`QDockWidget`派生类绘制什么，都会在更新时被包含的小部件绘制（毫无疑问，紧随其后，因为绘制更新会传播到子小部件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-15T02:54:07.713

已接受答案的 Python 版本：

```
# Created by BaiJiFeiLong@gmail.com at 2022/1/15 10:22

from PySide2 import QtWidgets, QtGui, QtCore

app = QtWidgets.QApplication()
widget = QtWidgets.QWidget()

line = QtWidgets.QFrame(widget)
line.paintEvent = lambda _: QtGui.QPainter(line).drawLine(line.rect().topLeft(), line.rect().bottomRight())
line.setAttribute(QtCore.Qt.WidgetAttribute.WA_TransparentForMouseEvents)

widget.setLayout(QtWidgets.QGridLayout(widget))
widget.layout().addWidget(QtWidgets.QPushButton("CLICK ME", widget))
widget.resizeEvent = lambda event: line.resize(event.size())

line.raise_()
widget.show()
app.exec_() 
```

**请注意**，这不适用于`QSplitter`，在这种情况下，您应该将`QMainWindow`其用作父小部件。

# php - 使用 Dbal 和 PhPBB 函数的 PhP SQL 查询

> ID：11034839
> 
> 赞同：1
> 
> 时间：2012-06-14T14:04:59.087
> 
> 标签：php, sql, phpbb, dbal

好吧，在这里我再次尝试从头开始编写代码，但我无法完全正确......我要做的就是检索用户所在的组 id（不包括注册用户），然后在以下语句：如果检索到的 group_id 是 10，则返回指定的消息，否则从检索到的 group_id 中删除用户并将它们放入 group_id 10。这是我到目前为止所拥有的，但我认为我在 dbal 的某个地方出错了。 .. 至于用户组添加/删除功能，我不确定我是否正确使用它们...我还包含了 functions_user.php 但不确定我是否真的需要或者我是否正确放置了它。好吧，这就是我所拥有的，有什么帮助吗？

```
 $integer = 2;

    $sql = 'SELECT group_id FROM ' . USER_GROUP_TABLE . '
            WHERE user_id = ' . (int) $user->data['user_id'] . "
            AND group_id != '" . (int) $integer . "'";
    $result = $db->sql_query($sql);

    if ($result == 10)
    {
       $message = sprintf($user->lang['CANNOT_USE_TRAVEL_ITEM'], $this->data['name']);
    }
    else
    {
       include($phpbb_root_path . 'includes/functions_user.' . $phpEx);

       $userid = $user->data['user_id'];

       group_user_add((10), array($user_id));
       group_user_del(($result), array($user_id));

       $message = sprintf($user->lang['TRAVEL_ITEM_NOW_USE'], $this->data['name']);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:05:51.100

Alright, I got it working... here is the code. Used the group_memberships function to both eliminate the SQL query as well as providing the correct boolean result to the group_user_add and group_user_del functions.

```
 global $user, $shop, $db, $phpEx, $phpbb_root_path;

    $this->remove_item();

    include($phpbb_root_path . 'includes/functions_user.' . $phpEx);

    if (group_memberships(10,$user->data['user_id'],true))
    {
       $message = sprintf($user->lang['CANNOT_USE_TRAVEL_ITEM'], $this->data['name']);
    }
    else
    {
       $groups = group_memberships(false,$user->data['user_id']);
       foreach ($groups as $grouprec)
       {
               $groupid = $grouprec['group_id'];
       }

       group_user_add((10), array($user->data['user_id']));
       group_user_del(($groupid), array($user->data['user_id']));

       $message = sprintf($user->lang['TRAVEL_ITEM_NOW_USE'], $this->data['name']);
    }

    return $message; 
```

# asp.net-mvc - knockou.js 使用映射插件从服务器映射中获取模型并将模型发回

> ID：11034840
> 
> 赞同：0
> 
> 时间：2012-06-14T14:05:03.097
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin

我开始使用 knockout.js，我真的很喜欢它。我使用 ASP.Net mvc、jQuery 和 knockout.js

我的问题是这样的：假设我有一个用户的管理屏幕，用户是我在用户内部的视图模型我想要一个权限数组

我的用户视图模型：

```
var userViewModelClass = function () {
   var self = this;
   ko.mapping.fromJS({
       ID: "",
       permissions: []
   }, {}, self);
} 
```

现在..如果我向服务器发出 ajax 请求并返回 JSON，我使用映射插件，一切都按预期进行

但是...现在我希望我呈现的权限列表具有删除之类的操作。所以我需要一个权限对象，然后权限数组将是权限对象数组。但我该怎么做？映射插件如何知道数组中从服务器返回给他的对象实际上是在这样的对象上：

```
 function permission() {
   var self = this;
   this.delete = function () {       
   };
   ko.mapping.fromJS({
       name: "",
       level: ""
    }, {}, self);
} 
```

这是我的第一部分问题。第二部分：假设我得到了具有所有权限数组的模型，它们都是这个权限对象。现在我希望我视图中的每个删除按钮都绑定权限对象内的删除功能。使用：

```
data-bind="click: delete" 
```

删除功能的最佳实现是什么？我想到了类似的事情：对服务器进行ajax调用，这实际上会删除用户的权限。那么如果调用成功从可观察数组中删除当前权限，那么视图将更新......这是一个好习惯吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:35:37.513

第一部分。您需要使用映射选项。在你`userViewModelClass`这样做。

```
var userViewModelClass = function () {
   var self = this;
   ko.mapping.fromJS({
       ID: "",
       permissions: []
   }, {
       permissions: {
           create: function(options) {
               return new permission(options.data);
           }
       }
   }, self);
} 
```

并像这样修改您的权限对象

```
function permission(config) {
   var self = this;
   this.delete = function () {       
   };
   ko.mapping.fromJS($.extend({
       name: "",
       level: ""
    }, config), {}, self);
} 
```

注意我添加了扩展，以便您的默认结构将保留并被传入数据覆盖。

你问题的第二部分。一种可能的方法是在构造函数中传递对父级的引用。所以上面的映射选项会变成

```
permissions: {
    create: function(options) {
        return new permission(options.data, self);
    }
} 
```

然后你的删除可能是这样的。

```
this.delete = function () {  
    $.ajax(deleteurl, yourdata, function(result) {
       // success
       parent.permissions.remove(self);
    }, function() {
       // failure
       display error message
    }     
}; 
```

**编辑**

评论中讨论的替代方式。

```
var userViewModelClass = function () {
   var self = this;
   ko.mapping.fromJS({
       ID: "",
       permissions: []
   }, {
       permissions: {
           create: function(options) {
               return new permission(options.data);
           }
       }
   }, self);

   this.delete = function(permission) {
       self.permissions.remove(permission);
   };
}

data-bind="click: $parent.delete" 
```

希望这可以帮助。

# jquery - 使用 jQuery 用冒号解析 XML 节点值

> ID：11034846
> 
> 赞同：2
> 
> 时间：2012-06-14T14:05:15.533
> 
> 标签：jquery, xml

我有以下 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<channel>
<item>
<title>Title One</title>
<g:image_link>Link One</g:image_link>
</item>
<item>
<title>Title Two</title>
<g:image_link>Link Two</g:image_link>
</item>
</channel> 
```

我使用以下 jQuery 来解析这个 XML，然后根据需要使用这些值

```
 $.ajax({
            type: "GET",
            url: "test.xml",
            dataType: "xml",
            success: parseXml,
            failure: function(data){
                alert("XML File could not be found");
            }
        });
function parseXml(xml){
            $(xml).find("item").each(function(){
                alert((this).find("title"));
            }); 
        } 
```

这将按预期输出标题。我正在努力做的只是`alert`简单`.text()`地`g:image_link`放置这个节点名称似乎不会给我我想要的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:24:14.953

答案可以在 Dave Newton 的评论中找到

# android - 在android中使用BitmapFactory类

> ID：11034854
> 
> 赞同：1
> 
> 时间：2012-06-14T14:06:07.080
> 
> 标签：android

在阅读此类[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html)

我注意到里面几乎所有的方法都是静态的。

> 那不是迟早会导致内存异常错误吗？

编辑* 因为另一个答案，我对另一个问题更加好奇。非常遗憾

新问题：

> 在整个应用程序中为所有活动重用同一个类是否是一种好习惯？

原因是如果在创建多个线程的延迟加载中调用位图，则会有 BitmapFactory 类的多个实例。因此，创建多个返回静态位图的 Bitmapfactory 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:07:32.440

不，这些方法不保存任何数据/状态，它就像一个盒子，你输入，你接收结果。就这样。唯一消耗的内存将是类本身，它只会被执行一次。

# jquery - 与提交 struts 2 和 jquery 网格冲突

> ID：11034859
> 
> 赞同：0
> 
> 时间：2012-06-14T14:06:29.420
> 
> 标签：jquery, jqgrid, struts

我正在尝试使用 Jquery Grid，其中 gridModel 是 struts 2 的提交按钮的结果。但问题是当我在我的 jsp 中添加网格时提交按钮不起作用。我想知道提交按钮是否与 jquery 网格有问题。

这是我的jsp：

```
<s:form>
..................
<s:submit name="search" onclick="submitForm()"/>

<s:url id="remoteurl" action="jsontable"/>
<sjg:grid
    id="gridtable"
    caption="Listes "
    dataType="json"
    href="%{remoteurl}"
    pager="true"
    gridModel="gridModel"
    rowList="10,15,20"
    rowNum="15"
    rownumbers="true"
>
<sjg:gridColumn name="name" index="name" title="Name"  />
<sjg:gridColumn name="age" index="age" title="Age"/>
<sjg:gridColumn name="adress" index="adress" title="Adress" />
<sjg:gridColumn name="tel" index="tel" title="Tel"   />
</sjg:grid>
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:18:40.307

您必须在 s:form 或 s:action 标记中设置您希望调用的 Struts 操作（参见[http://struts.apache.org/2.2.3/docs/submit.html](http://struts.apache.org/2.2.3/docs/submit.html)和[http://struts .apache.org/2.2.3/docs/form.html](http://struts.apache.org/2.2.3/docs/form.html)）。

在您显示的代码片段中，没有定义任何操作。而且，除非它是一个 ajax 调用，否则您不需要 onClick 属性（否则向我们展示 submitForm 方法的作用会很有用）。

# c# - ASP 页面重新加载禁用确认

> ID：11034860
> 
> 赞同：1
> 
> 时间：2012-06-14T14:06:30.370
> 
> 标签：c#, jquery, asp-classic, colorbox, reload

这可能看起来像是一个挑剔的细节，但我想禁用以使用以下代码强制重新加载时出现的提示：

```
 <script type="text/javascript">
    function OpenCBox() 
    {
        $.colorbox({ href: "NewMMR.aspx", iframe: true, width: "40%", height: "70%", transition: "elastic", onClosed: function () { parent.location.reload(true); } });
    }
</script> 
```

当 jQuery ColorBox 关闭时，它会触发 parent.location.reload() 事件，然后提示页面询问您是否要重新提交以前给定的数据。

更多详细信息：我正在尝试调用 ColorBox，在数据库中执行 INSERT，然后关闭 colorbox 并在父页面上重新加载 GridView。浏览器要求我重新提交以前提交的数据（这是使用日历扩展器的两个文本框的日期范围）。

我想完全禁用此提示，我想知道是否有任何人知道的技巧可以做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:57:13.990

上次使用 POST 请求父页面，如果您想要提示消失，您将避免这种情况，请尝试使用 GET 加载或使用以下内容重新加载页面

```
window.location = window.location.href 
```

有关这方面的更多信息，请参阅[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

# regex - 从目录/子目录中递归地从文件中提取唯一行（带有模式）

> ID：11034865
> 
> 赞同：2
> 
> 时间：2012-06-14T14:06:46.783
> 
> 标签：regex, perl

我有一个庞大的 Java 代码库（超过 10,000 个 Java 类），它广泛使用了 CORBA（虽然没有关于其使用的文档）。

作为弄清楚 CORBA 用法的第一步，我决定扫描整个代码库并提取/打印包含模式“ **org.omg.CORBA** ”的唯一行。这些通常在导入语句中（例如 import org.omg.CORBA.xyz）。

我是 Perl 的新手，想知道是否有办法在 Windows 操作系统上提取这些详细信息。我需要能够扫描所有具有 java 类的文件夹（和子文件夹）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:57:28.800

您可以在单行中使用[File::Find ：](http://search.cpan.org/perldoc?File%3a%3aFind)

```
perl -MFile::Find -lwe "
    find(sub { if (-f && /\.java$/) { push @ARGV,$File::Find::name } },'.'); 
    while(<>) { /org.omg.CORBA/ && $seen{$_}++; }; 
    print for keys %seen;" 
```

请注意，此单行使用 Windows 所需的双引号。

这将递归搜索当前目录以查找具有扩展名的文件`.java`并将它们添加到`@ARGV`数组中。然后我们使用菱形运算符打开文件并搜索字符串`org.omg.CORBA`，如果找到，则将该行作为键添加到`%seen`哈希中，这将有效地删除重复项。最后一条语句打印出散列中的所有唯一键。

在脚本形式中，它看起来像这样：

```
use strict;
use warnings;
use File::Find;

find(sub { if (-f && /\.java$/) { push @ARGV,$File::Find::name } },'.');
my %seen;
while(<>) {
    /org.omg.CORBA/ && $seen{$_}++; 
}
print "$_\n" for keys %seen;" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:20:37.510

只是为了好玩，一个 perl 单线来做到这一点：

```
perl -lne '/org.omg.CORBA/ and (++$seen{$_}>1 or print)' * 
```

这首先检查一行是否匹配，然后在打印出该行之前是否没有看到它。对所有指定的文件（在本例中为“*”）执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T14:41:18.877

我并不是要逆势而为，但我不确定 perl 是这里的最佳解决方案。nhahtdh 的使用[cygwin](http://www.cygwin.com/)的建议是一个很好的建议。grep 或 find 确实是您想要的。在这种情况下使用 perl 将涉及使用[File::Find](http://search.cpan.org/~rjbs/perl-5.16.0/lib/File/Find.pm)然后在每个文件上打开一个文件句柄。这当然是可行的，但如果可能的话，我建议使用正确的工具来完成这项工作。

```
find . -name "*.java" -type f | xargs grep -l 'org.com.CORBA' | sort | uniq 
```

如果你真的必须使用 perl 来完成这项工作，我们可以处理 File::Find 代码。

# grails - g:include vs g:render

> ID：11034869
> 
> 赞同：5
> 
> 时间：2012-06-14T14:07:04.643
> 
> 标签：grails, include, render

我对 g:render 和 g:include 的优缺点有疑问。在我的应用程序中，我有一段代码显示了一些必须在某些 gsp 中重复的信息，它显示的内容取决于一点逻辑。
我怀疑使用*g:include*还是*g:render*更好？？？
那么，最好在控制器上执行逻辑，将模型传递给使用 g:render 中包含的布局的页面，还是将 ag:include 放到 gsp 中另一个控制器中执行那件作品的逻辑？
我更喜欢第二种选择，但它对性能的影响有多大？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T20:15:48.667

它们只是在不同的情况下使用。`<g:include .../>`当您有一个控制器返回一段很容易嵌入到多个 GSP 中的内容时，您可以使用该控制器。如果您实际上在控制器级别缓存大量流量，这也很有用，因为您可以消除大量开销。

`<g:render.../>`当您需要页面中的模块化时很有用。特别是对于 AJAX 调用，您最初可能会加载页面的一部分，然后希望根据某些 AJAX 事件对其进行更新。

两者都可以用于重用内容，并且都适用于正确的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:48:56.243

g:render 在您处理部分模板并且拥有所需的模型等时很有用。但是，当您需要额外的（或广泛的）进展以将额外的、更有意义的东西传递给您的视图（模板）时，最好使用 g:include。通过使用 g:include，您还将拥有一个不错的控制器，这意味着使用该控制器的代码可读性更高。并且“传递给控制器​​操作并在不执行其他操作的情况下渲染视图”和“渲染视图”之间不会有性能比较。

# c# - 如何在 C# 中获取原始 TCP 数据包？

> ID：11034870
> 
> 赞同：9
> 
> 时间：2012-06-14T14:07:07.503
> 
> 标签：c#, networking, .net-4.0, tcp

我想接收原始 TCP 数据包，然后以相同的工作量将其发回。

它应该看起来像这样：

```
void OnPacketReceived(TcpPacket p)
{
    byte [] body = p.GetBody();
} 
```

注意：我需要 TCP 数据包而不是以太网帧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T08:13:29.713

如果您将套接字实现为原始套接字，则您可以访问整个数据包（实际上必须自己处理有关数据包的所有内容）。

创建套接字时使用 SocketType.Raw 和 ProtocolType.Raw。

请注意，如果您以这种方式实现套接字，您将不得不处理 TCP 的细节。

作为参考，这里是关于 Socket 类的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-28T08:52:05.030

您可以使用 pcapDotNet 库。

[https://pcapdotnet.codeplex.com/](https://pcapdotnet.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:03:42.697

您需要使用数据包嗅探器，您可以在其中放置您选择的过滤器，并在此基础上也可以响应。

围绕 WinPcap 的 .Net 包装器可以证明对您有帮助。

# ruby-on-rails - 为什么我在执行 POST 请求时在 Typheous 中出现分段错误？

> ID：11034872
> 
> 赞同：0
> 
> 时间：2012-06-14T14:07:17.427
> 
> 标签：ruby-on-rails, segmentation-fault, typhoeus

在我们的生产环境中真的很棘手（Red Hat Enterprise Linux Server release 5.4 (Tikanga) and curl 7.15.5 (x86_64-redhat-linux-gnu) libcurl/7.15.5 OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6 .5) POST 请求自动变为 GET 请求。下面是nginx提供的相关日志。

```
cache: [GET /login] miss
url->http://localhost:8080/login

About to connect() to localhost port 8080
Expire at 1339680839 / 265363 (300000ms)
Trying 127.0.0.1... * connected
Connected to localhost (127.0.0.1) port 8080 /usr/local/lib/ruby/gems/1.8/gems/typhoeus-0.4.0/lib/typhoeus/multi.rb:141: [BUG] Segmentation fault ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]
2012/06/14 21:28:59 [error] 29829#0: *6031 upstream prematurely closed connection while reading response header from upstream, client: 127.0.0.1, server: localhost, request: "POST /login HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "127.0.0.1:8081", referrer: "http://127.0.0.1:8081/login" 
```

实际上，我们发送一个 POST 请求来登录，但它实际上转换为 GET。

在我们的开发环境中（Ubuntu12.04 和 curl 7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3），一切正常.

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:27:38.317

在我将 curl 从 7.15 升级到 7.22 之后。问题已解决。

# django - Django 以某种方式丢失了表单中的更新值

> ID：11034881
> 
> 赞同：0
> 
> 时间：2012-06-14T14:08:01.307
> 
> 标签：django, django-forms

我有一个大目标——用户旅行报告。我为用户提供了界面，可以一一编辑该报告中的某些字段。由于用户可以一次编辑一个字段，因此我创建了根据用户想要编辑的字段创建模型表单的方法。

它是这样工作的：

```
def createFieldEditorForm(client, field, report_id, request = None):
    from django.shortcuts import get_object_or_404
    report_instance = get_object_or_404(DriveReport, id = report_id)

    class FieldEditorForm(forms.ModelForm):

        class Meta:
            model = DriveReport
            fields = ['id', ]

        id = forms.IntegerField(label = _(u"ride_id"), widget=forms.HiddenInput())

        def __init__(self, *args, **kwargs):
            super(FieldEditorForm, self).__init__(*args, **kwargs)

            self.build_fields()

        def build_fields(self):
            if field == 'driver_id':
                driver_query = Driver.objects.filter(client = client)
                choices = [('', u'------'),]
                for driver in driver_query:
                    choices.append((driver.id, driver.name))
                self.fields[field] = forms.IntegerField(
                    label = _(u"Drivers"), 
                    widget = forms.Select(
                        choices = choices,
                        attrs = {'data-name':'driver_id'} ),
                    required = False)
            elif field == 'project_id':
                area_query = Area.objects.filter(client = client)
                choices = [('', u'------'),]
                for area in area_query:
                    choices.append((area.id, area.name))
                self.fields[field] = forms.IntegerField(
                    label = _(u"Projects"), 
                    widget = froms.Select(
                        choices = choices,
                        attrs = {'data-name':'project_id'} ),
                    required = False)
            elif field == 'trip_type':
                self.fields[field] = forms.CharField(
                    label = _(u"Projects"), 
                    widget = forms.Select(
                        choices = [(key, value) for key, value in TRIP_TYPE_CHOICES.iteritems()],
                        attrs = {'data-name':'trip_type'} ),
                    required = False)
            else:
                self.fields[field] = forms.CharField(required = False, widget = forms.TextInput(attrs = {'data-name':field} ))

if request is None:
    return FieldEditorForm(instance = report_instance)
else:
    return FieldEditorForm(request, instance = report_instance) 
```

并且在视图中

它是这样的：

```
if request.method == 'POST':
    form = createFieldEditorForm(activeaccount, field_id, ride_id, request.POST)
    if form.is_valid():
        form.save()
        messages.success(request, _("New field value successfully added/updated"))
    else:
        messages.error(request, _("Value was not saved"))

    return feedback_to_json(request, form) 
```

结果是 - 我在浏览器中收到成功消息，但该字段未更新。

我尝试覆盖 form.save() 方法并检查 self.cleaned_data 是否包含 [field] - 确实如此。它就在那里。即使我在保存之前和保存之后打印出表单，我也可以看到，数据已经到达后端，而且一切都很好而且整洁.. 但是该死的值只是没有保存/更新到数据库中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:45:14.840

ModelForm 的保存功能仅适用于`fields`属性中实际存在的字段。由于您正在动态添加字段，因此您需要手动保存这些字段（使用 commit=False 保存表单，然后将数据添加到返回的未保存对象）。

# visual-studio - Windows 8 下 Visual Studio 2012 中的 TFS

> ID：11034882
> 
> 赞同：2
> 
> 时间：2012-06-14T14:08:10.720
> 
> 标签：visual-studio, tfs, windows-8, azure-devops

我无法使用 Visual Studio 2012 RC连接到托管的[Team Foundation 服务。](http://tfspreview.com/)

在我第一次连接时，会打开一个窗口，提示我输入用户名和密码，但是我被添加到 TFS 时使用了不同的 Live ID。我重新注册了一个新的 Live ID，现在我无法访问 TFS。当我尝试这样做时，我收到此错误：

> TF31003

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:13:09.487

如果您从浏览器中的所有实时帐户中注销，然后再次尝试登录 TFS，系统将提示您输入凭据，并且您可以使用有权访问 TFS 预览的帐户登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:41:25.940

尝试连接到[https://mycompanyname.visualstudio.com/上的托管 TFS 时出现 tf31003 错误](https://mycompanyname.visualstudio.com/)

我可以通过 Firefox 使用我的 Live Id 访问该站点，但是在尝试使用 VS 2010 进行连接时，我遇到了该错误。

我的案例的问题是 VS2010 试图使用 Internet Explorer 登录，而我是在另一个帐户下登录的。为了解决这个问题，我打开 Internet Explorer 并从 Hotmail/Live 注销，然后转到 about URL 并连接到 TFS 实例，该实例连接成功。

之后我回到 VS 2010 并尝试再次连接到服务器，这一次我看到了登录窗口，我可以在其中输入我的登录详细信息。完成后，我的服务器已成功添加到“团队服务器基础列表”，并且能够获取我所有项目的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T18:05:52.703

我有同样的问题，我得到的最简单的解决方案是只删除三个 cookie。我在其他帖子中找到了这个建议。它对我有用。

```
cookie:*@login.live.com/
cookie:*@visualstudio.com/
cookie:*@tfs.app.visualstudio.com/

To see the cookie files directly so to "Internet Options -> In the Browsing History Section Click "Settings" -> Click "View Files" -> They are all text files. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T15:09:42.993

我遇到了同样的问题，除了我正在运行 VS2012 Update 2。这太过分了，但这是我所做的一切最终修复它的完整列表。

1.  确保 Visual Studio 没有运行
2.  我打开 Internet Explorer，按 CTRL+SHFT+DEL，选择所有内容并单击“删除”
3.  我打开 Fiddler 并导航到“工具 > 清除 WinINET 缓存”和“工具 > 清除 WinINET Cookies”
4.  我打开了 Windows 凭据管理器并删除了所有条目（包括所有 Web 凭据、Windows 凭据和通用凭据）
5.  我断开了我的 Microsoft 帐户与我的 Windows 帐户的连接
6.  打开Visual Studio并连接到TFS，最后提示我登录

再一次，这太过分了，而且不是很外科手术，但由于我很匆忙，所以我决定使用霰弹枪，它奏效了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-13T14:36:25.003

在 Windows Server 2012 上[设置新的 TFS 构建服务器](http://msdn.microsoft.com/en-us/library/ms181712.aspx)时，我收到了同样的错误 ( **TF31003** / **TF30063** )，因为[在 IE 中未启用活动脚本](https://stackoverflow.com/a/20821529/175679)。

![](../Images/cc559c60014e3c5ce520a3068595c849.png)

为了登录 - 您必须启用活动脚本才能看到下面的登录提示...

![](../Images/48c74356b66e02da562500a540b6801a.png)

实际上，我在安装 Visual Studio 后发现了这一点，其中弹出对话框专门通知您此必需设置。希望这将节省一些时间失去的时间......

![](../Images/9683444fb4f8b669b3afa3b966273620.png)

# c# - 从 Html.DropdownListFor....MVC3 中获取文本

> ID：11034892
> 
> 赞同：6
> 
> 时间：2012-06-14T14:09:09.270
> 
> 标签：c#, asp.net-mvc-3

我有一个模型：

```
public class DocumentModel
{
    public int TypeID { get; set; }
    public List<SelectListItem> DocumentTypes { get; set; }
} 
```

我有一个看法：

```
 @Html.DropDownListFor(x => x.TypeID, Model.DocumentTypes, "- please select -") 
```

我填充我的下拉列表

```
 var model = new DocumentModel();
        model.DocumentTypes = GetDocumentTypes(); 

private static List<SelectListItem> GetDocumentTypes()
    {

        var items = new List<SelectListItem>
                        {
                            new SelectListItem
                                {Text = @"Text #1", Value = "1"},
                            new SelectListItem
                                {Text = @"Text #2", Value = "2"},
                        };

        return items;

    } 
```

回发表单时，我有一个控制器操作：

```
 [HttpPost] 
    public void UploadDocument(DocumentModel model)
    {
        if (ModelState.IsValid)
        {
            // I want to get the text from the dropdown
        }
    } 
```

如何从我的下拉列表中获取文本？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T14:27:43.153

使用默认模型绑定可能不容易做到这一点。你必须有一个像这样的小解决方法。

**1)**向您的模型/视图模型添加一个新属性以存储选定的文本

```
public class DocumentModel
{
    public int TypeID { get; set; }
    public List<SelectListItem> DocumentTypes { get; set; }
    public string SelctedType { set;get;}
} 
```

**2)**使用`Html.HiddenFor`Helper 方法在表单中为该属性创建一个隐藏变量

```
@Html.HiddenFor(x => x.SelctedType) 
```

**3）**使用小javascript覆盖提交！IE; 当用户提交表单时，从下拉列表中获取选定的文本并将该值设置为隐藏字段的值。

```
$(function () {
    $("form").submit(function(){
        var selTypeText= $("#TypeID option:selected").text();
        $("#SelctedType").val(selTypeText);           
    });
}); 
```

现在在您的`HTTPPost`操作方法中，这将在`SelectedType`属性中可用。

```
[HttpPost]
public void UploadDocument(DocumentModel model)
{
   if(ModelState.IsValid)
   {
      string thatValue=model.SelectedType;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:16:20.510

如果您要做的是检索所选项目，那么这可以完成工作：

```
 var selecteItem = model.DocumentTypes.Where(item=>item.Selected).FirstOrDefault(); 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:31:49.020

在你的模型上，我会有另一个字符串 -

```
public string Selected{ get; set; } 
```

那么在你看来：

```
@Html.DropDownListFor(model => model.Selected, new SelectList(Model.DocumentTypes, "Value", "Text")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-30T08:38:20.770

我在这里偶然发现了从 SelectList 中获取文本值的方法，以便以 DropDownList 以外的格式显示它（我正在重用我的 Edit ViewModel，因为它具有我需要的所有数据）

```
var text = selectList.Where(q => q.Selected == true).First().Text; 
```

# php - 远程服务器中的“未找到模型 Aco 的数据库表 acos”错误，但在我的本地服务器中正确

> ID：11034894
> 
> 赞同：0
> 
> 时间：2012-06-14T14:09:10.270
> 
> 标签：php, cakephp, acl

在本地运行我的 Cake 应用程序后，我尝试将其上传到我的远程服务器，正确配置所有内容，检查所有表和数据库访问。但我无法解决以下错误。我也找不到足够的资源。

缺少数据库表错误：找不到模型 Aco 的数据库表 acos。

注意：如果要自定义此错误信息，请创建 app/views/errors/missing_table.ctp

我使用了 ACL 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:15:42.760

该表存在，但我找到了此链接： [CakePHP 错误：未找到模型 Aco 的数据库表 acos](https://stackoverflow.com/questions/6052959/cakephp-error-database-table-acos-for-model-aco-was-not-found)和来自[8vius](https://stackoverflow.com/users/478108/8vius)的答案。万分感谢。

答案是：最终错误出在我的数据库用户配置中。似乎我忘记为我用来访问数据库的用户设置 CRUD 权限，这就是给我错误的原因

# python - 将机械化与不在表单内的选择字段一起使用？

> ID：11034896
> 
> 赞同：0
> 
> 时间：2012-06-14T14:09:15.250
> 
> 标签：python, web-scraping, mechanize

我想使用 Mechanize（使用 Python）提交表单，但不幸的是页面编码错误，`<select>`元素实际上不在`<form>`标签内。

所以我不能通过表格使用传统方法：

```
forms = [f for f in br.forms()]
mycontrol = forms[1].controls[0] 
```

我能做些什么呢？

这是[我想抓取的页面](http://www.education.gov.uk/schools/performance/)，以及相关的代码 - 我对`la`选择项感兴趣：

```
 <fieldset class="searchField">
      <label>By region / local authority</label>
      <p id="regp">
        <label>Region</label>
        <select id="region" name="region"><option></option></select>
      </p>
      <p id="lap">
        <label>Local authority</label>
        <select id="la" name="la"><option></option></select>
      </p>
      <input id="byarea" type="submit" value="Go" />
      <img id="regmap" src="/schools/performance/img/map_england.png" alt="Map of regions in England" border="0" usemap="#England" />
    </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:22:44.387

这实际上比您想象的更复杂，但仍然很容易实现。正在发生的事情是，您链接的网页正在通过 JSON 拉入地方当局（这就是为什么`name="la"`选择元素没有填写 Mechanize，它缺少 Javascript）。最简单的方法是直接用 Python 请求这个 JSON 数据，并使用结果直接转到每个数据页面。

```
import urllib2
import json

#The URL where we get our array of LA data
GET_LAS = 'http://www.education.gov.uk/cgi-bin/schools/performance/getareas.pl?level=la&code=0'

#The URL which we interpolate the LA ID into to get individual pages
GET_URL = 'http://www.education.gov.uk/schools/performance/geo/la%s_all.html'

def get_performance(la):
    page = urllib2.urlopen(GET_URL % la)
    #print(page.read())

#get the local authority list
las = json.loads(urllib2.urlopen(GET_LAS).read())

for la in las:
    if la != 0:
        print('Processing LA ID #%s (%s)' % (la[0], la[1]))
        get_performance(la[0]) 
```

如您所见，您甚至不需要加载您链接的页面或使用 Mechanize 来完成！但是，您仍然需要一种方法来解析学校名称，然后再解析性能数据。

# perl - 这两个定义有什么区别？

> ID：11034902
> 
> 赞同：2
> 
> 时间：2012-06-14T14:09:28.120
> 
> 标签：perl, perl-hash

为什么是语法错误：

```
my @hash{1..4}=(1..4); 
```

但不是这个：

```
my %hash;
@hash{1..4}=(1..4); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T14:16:42.690

第一个例子是一个词法范围[的“我的”](http://perldoc.perl.org/functions/my.html) +一个[哈希切片](http://perldoc.perl.org/perldata.html#Slices)，它预先假设一个人可以以无效语法的切片方式声明一个哈希。你的第二个例子是合适的，首先声明哈希，假设你正在使用严格+警告；

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T16:19:53.880

`my`需要一个变量或括号中的变量列表作为参数。

```
@hash{1..4} 
```

两者都不是，所以

```
my @hash{1..4} 
```

是语法错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T14:45:21.923

第一个例子失败了，因为哈希切片是一个返回一些结果的操作。显然，用`my`声明附加它是没有意义的，就像写类似`my 2+2`不会的东西一样。[`my`必须跟要声明的变量列表](http://p3rl.org/my)。

第二个示例就是这样做的 - 在当前范围内声明一个哈希，然后访问它的一部分。

# javascript - jQuery过滤器和html返回奇怪的结果

> ID：11034918
> 
> 赞同：1
> 
> 时间：2012-06-14T14:10:02.210
> 
> 标签：javascript, jquery

为什么以下代码不能按预期工作？（使用 class = clear 选择 div 之前的所有元素？）

**HTML：**

```
<div id="text">    
    line0
    <div>line1</div>
    <div>line2</div>

    <div class="clear" />        
    <div>dummy</div>
    <p>dummy</p>        
</div> 
```

**JS：**

```
var allow = true;    
var output = $('#text *').filter(function(index) {        
    if( $(this).attr("class") == 'clear') {
        allow = false;
    }

    return allow;        
}).html().trim();

alert( output ); 
```

**输出：**

```
line1 
```

**期望：** line0 line1 line2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:18:08.847

发生这种情况是因为正如[`.html()`](http://api.jquery.com/html/)所说

> 获取匹配元素集中第一个元素的 HTML 内容。

因此，尽管您的两个 div 都被选中，但只有一个被返回`.html()`

检查此[小提琴](http://jsfiddle.net/joycse06/uRK7Y/1/)以验证您的代码是否返回了两个元素。

正如其他人已经说过的那样，您应该使用该`.hasClass`方法。

**更新**

由于它`line0`不在任何节点内，它是一个 textNode，您可以先在 textNodes 周围循环和添加 span 标签。或者您将无法对该文本应用样式。检查以下代码

```
var whitespace = /^\s*$/;
$('#text').contents().filter(function(){
    return this.nodeType == 3 && !whitespace.test(this.nodeValue);
}).wrap('<span></span>'); 
```

这将遍历所有子节点（包括文本节点）并用`span`.

因此，在那之后，您的 line0 将位于像`<span>line0</span>`. 所以现在如果你这样做

```
$('.clear').prevAll().css('color', 'red'); 
```

它也会突出显示`line0`。

检查MDN 上的[节点类型文档](https://developer.mozilla.org/en/nodeType)

[**工作小提琴**](http://jsfiddle.net/joycse06/GHX3B/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:17:36.973

因为 html() 方法返回选择器中第一个元素的内容。

[http://api.jquery.com/html/](http://api.jquery.com/html/)

> 如果选择器表达式匹配多个元素，则只有第一个匹配项才会返回其 HTML 内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:10:50.320

```
$('.clear').prevAll().css('color', 'red').fadeOut(2000);​ 
```

[**现场演示**](http://jsfiddle.net/faQyt/1)

顺便说一句，如果你想检查一个元素是否有一个类，请使用`.hasClass(class)`
**示例：**

```
var hasClass = $(this).hasClass('clear'); 
```

# r - 对具有不同类别的多个分类变量应用表函数

> ID：11034920
> 
> 赞同：0
> 
> 时间：2012-06-14T14:10:05.263
> 
> 标签：r, automation

我正在从 SAS 过渡到**R**。**我需要一些我可以在 SAS 中轻松完成的事情的帮助，但我在R**中对此一无所知。

我有一个包含许多分类变量（全部转换为因子）的数据框，比如 X1 - X50。每个变量可以有不同的类别。例如，

```
 X1 can be Male, Female     
         x2 can be 1, 0       
         X3 can be 1, 2, 3, 4, 5 
```

我想对所有 50 个分类变量一起运行一个 table 命令，这样我得到一个包含三列的输出数据框，如下所示：

```
Group Variable    Levels     Frequency  
   1     x1          Male         10     
   1     X1           Female       30    
   1     X2            1           5  
   1     X2            0           20    
   1     X2            Missing     15  
   1     X3            1           5  
   1     X3            2           5  
   1     X3            3           5  
   1     X3            4           10   
   1    X3            5           5  
   1    X3            Missing     5  
   2    
   2  
   2  
   2  
   2 
```

我需要按组进行单变量频率分布。因此，Group 列标识了原始数据帧的一个子集，用于计算频率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:03:03.393

不完全是您正在寻找的，但在正确的方向。

```
 mydata
      X1    X2
      Male   A
      Male   B
      Female C
      Female A
      Female C
as.data.frame(unlist(lapply(mydata, table))) #produces the following, 
          unlist(lapply(mydata, table))
X1.Female                             3
X1.Male                               2
X2.A                                  2
X2.B                                  1
X2.C                                  2 
```

# actionscript-3 - 类扩展 MX DataGrid 如何实现 allowMultipleSelection

> ID：11034921
> 
> 赞同：0
> 
> 时间：2012-06-14T14:10:06.233
> 
> 标签：actionscript-3, apache-flex, flash-builder

我尝试使用 allowMultipleSelection 属性实现页脚数据网格。但就我而言，它似乎不起作用。你能帮我实现这个功能吗？

谢谢

```
 package fr.component.dgFooter
{
    import mx.controls.DataGrid;
    import mx.controls.dataGridClasses.DataGridColumn;

    public class FooterDataGrid extends DataGrid
    {
        protected var _footerAllowMultipleSelection:Boolean=false;

        public function FooterDataGrid()
        {
            super();
            if(_footerAllowMultipleSelection){
                this.allowMultipleSelection=true;
            }
            else{

            }
        }

        public function get footerAllowMultipleSelection():Boolean
        {
            return _footerAllowMultipleSelection;
        }

        public function set footerAllowMultipleSelection(value:Boolean):void
        {
            _footerAllowMultipleSelection = value;
        }

        protected var footer:DataGridFooter;

        protected var footerHeight:int = 22;

        override protected function createChildren():void
        {
            super.createChildren();

            if (!footer)
            {
                footer = new DataGridFooter();
                footer.styleName = this;
                addChild(footer);
            }
        }

        override protected function adjustListContent(unscaledWidth:Number = -1,
            unscaledHeight:Number = -1):void
        {
            super.adjustListContent(unscaledWidth, unscaledHeight);

            listContent.setActualSize(listContent.width, listContent.height - footerHeight);
            //this deals w/ having locked columns - it's handled differently in
            //the dg and the adg
            footer.setActualSize(listContent.width+listContent.x, footerHeight);
            footer.move(1, listContent.y + listContent.height + 1);
        }

        override public function invalidateDisplayList():void
        {
            super.invalidateDisplayList();
            if (footer)
                footer.invalidateDisplayList();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:46:55.000

当值始终为 时，您的代码仅在构造函数中检查`_footerAllowMultipleSelection`和设置。`allowMultipleSelection``false`

`allowMultipleSelection`在 的 setter 中设置属性`footerAllowMultipleSelection`。您还可以将 的初始值更改`_footerAllowMultipleSelection`为`true`。

但是你为什么要把它包装在一个 getter 和 setter 中呢？该`allowMultipleSelection`属性已经是公共的，因此无需在您的子类中提供另一个执行相同操作的属性即可设置它。

# msbuild - MsBuild 和 FxCop 问题

> ID：11034922
> 
> 赞同：1
> 
> 时间：2012-06-14T14:10:07.703
> 
> 标签：msbuild, fxcop

我正在尝试使用 cmd 或 jenkins 构建作业使构建文件与 msbuild 一起运行。

项目的结构是

![项目结构](../Images/91be2bca5fa1f65c0819854396227794.png)

演示在这里：[www.saramgsilva.com/wp7/sarasilvademo.rar](http://www.saramgsilva.com/wp7/sarasilvademo.rar)

现在我有 3 种不同的方式来运行 fxcop，但我都有问题。

**1）**在cmd中转到根文件，然后运行

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe  .\SaraSilva.WP7.build /target:FxCop 
```

这显示一个错误：退出代码 128

**2）**在cmd中转到根文件，然后运行

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe  .\SaraSilva.WP7C.build /target:FxCop 
```

这不会创建 buildartifacts\FxCop\FxCopAnalysis.xml 文件。

**3）**在cmd中转到根文件，然后运行

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe  .\SaraSilva.WP7.build /target:TestWithCoverage 
```

和

```
C:\SaraSilvaDemo\tools\FxCop-1.36\FxCopCmd.exe /file:C:\SaraSilvaDemo\buildartifacts /directory:C:\SaraSilvaDemo\buildartifacts\ /rule:C:\SaraSilvaDemo\tools\FxCop-1.36\Rules /out:C:\SaraSilvaDemo\buildartifacts\fxcop-result.xml 
```

结果是：

> Microsoft (R) FxCop 命令行工具，版本 1.36 (9.0.30729.1) 版权所有 (C) 2007 Microsoft Corporation。版权所有。
> 
> 已加载 DesignRules.dll...已加载 GlobalizationRules.dll...已加载 InteroperabilityRules.dll...已加载 MobilityRules.dll...已加载 NamingRules.dll...已加载 PerformanceRules.dll...已加载 PortabilityRules.dll...已加载SecurityRules.dll... 已加载 UsageRules.dll... 无法加载 Cimbalino.Phone.Toolkit.dll。无法加载 GalaSoft.MvvmLight.Extras.WP71.dll。无法加载 GalaSoft.MvvmLight.WP71.dll。无法加载 Microsoft.Phone.Controls.dll。无法加载 Microsoft.Practices.ServiceLocation.dll。无法加载 mscorlib.Extensions.dll。无法加载 NLog.dll。已加载 nunit.framework.dll... 已加载 SaraSilva.WP7.AllTests.dll... 无法加载 SaraSilva.WP7.App.dll。无法加载 SaraSilva.WP7.Model.dll。无法加载 SaraSilva.WP7.SampleData.dll。无法加载 SaraSilva.WP7.SchedTask.dll。无法加载 SaraSilva.WP7。服务.dll。已加载 System.Core.dll... 无法加载 System.dll。无法加载 System.Windows.Browser.dll。已加载 System.Windows.dll... 无法加载 System.Windows.Interactivity.dll。无法加载 System.Xml.dll。无法加载 TombstoneHelper.dll。正在初始化 Introspection 引擎...无法解析对 System.Net 的引用。分析完成。
> 
> 注意：找不到一个或多个引用的程序集。使用“/directory”开关指定其他程序集引用搜索路径。
> 
> *   未进行分析；必须至少指定一个有效的规则程序集和一个有效的目标文件。
> *   2 总分析引擎异常。将报告写入 C:\SaraSilvaDemo\buildartifacts\fxcop-result.xml... 完成。

我不知道该怎么办 ：（

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:39:37.297

答案是在命令行中添加以下开关，告诉 FxCop 在 GAC 中搜索程序集：

```
/gac 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T10:51:31.457

尽管我使用的是 FXCop 10.0，但您输入的错误代码类似：

> 注意：找不到一个或多个引用的程序集。使用“/directory”开关指定其他程序集引用搜索路径。

因此，就我而言，我修改了 FxCopCmd.exe.config 文件并将 AssemblyReferenceResolveMode 从*StrongName*更改为*StrongNameIgnoringVersion*

这是为了确保它不会尝试查找引用程序集的特定版本

还要确保在 Visual Studio 中的 dll 属性具有 Copy Local = True

# ios - iOS 分发证书，由其他开发者签名

> ID：11034924
> 
> 赞同：7
> 
> 时间：2012-06-14T14:10:12.873
> 
> 标签：ios, iphone, certificate

我的公司刚刚为已经拥有 Apple Developer 帐户并已创建其分发证书的客户构建了一个应用程序。当证书下载到我们的构建机器时，它显然不是我们签名的。

我们是否可以签署他们已经创建的证书，以便我们可以提交应用程序？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T14:15:27.947

请让客户向您提供包含证书和私钥的 Certificate.p12。

要创建 .p12，请转到 Keychain Access，在左侧窗格的第二个块中选择证书选项，然后选择所需的证书并右键单击 > 导出 > 输入 p12 的密码 > 输入 Mac 密码 > 保存在您想要的位置地点。

要安装在您身边，只需从客户端获取p12，双击打开它，然后输入客户端为p12输入的密码。

最后，您完成了在客户处签署的分发证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:23:27.040

因此，我已经与我的客户解决了这两种方法中的一种。这里的假设是客户足够信任你......

1.  询问客户的 Apple Developer 登录名和密码信息，撤销当前的分发证书并使用您的构建机器构建一个新的。繁荣！签署并提交。

2.  请客户向您提供他/她用于签署原始分发证书的私钥。这是通过钥匙串访问完成的（有关详细信息，请参阅 Ronak 的答案）。

如果该客户对#1 持怀疑态度，他/她可以在应用程序提交并获得批准后更改其开发帐户密码，然后撤销/制作新的分发证书。

获取客户的私钥（#2）会给您的客户带来一些安全风险，但这是我知道的唯一其他方式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-14T14:15:50.577

您需要在您的门户中创建一个并生成一个用于分发到应用商店。

# drupal - Drupal 7 视图 - 节点内容未出现

> ID：11034928
> 
> 赞同：1
> 
> 时间：2012-06-14T14:10:37.013
> 
> 标签：drupal, drupal-7, drupal-views, drupal-theming

我在 Drupal 中遇到了让节点内容显示自身的问题。我怀疑它可能与 CSS 样式有关，尽管我不是 100% 确定是什么导致了这个问题。

**背景：**

所以基本上我正在尝试建立一个博客，但我遇到了严重的问题，试图简单地让博客帖子显示自己。

我使用 Artisteer (http://www.artisteer.com/?p=overview) 的导出功能创建了一个自定义 Drupal 7 主题。生成了一个名为 style.css 的样式表。我将一些我自己的 CSS 连同自动生成的部分一起放入了这个样式表中。我应该提到我做了一些自定义 CSS 来强制主页看起来像我想要的那样。

我按照 (http://learnbythedrop.com/buildingyourblog) 上的 PDF 说明创建了一个博客（非常易于理解的指南）。与 Views 最相关的页面是第 34 - 36 页，他将带您了解如何创建“Blog Post”视图，以便正确显示您的博客内容。然而，当我到了他创建示例博客内容并显示它的标题和主要内容的地步时，这对我来说根本不起作用。例如，请参阅此链接（我为测试目的创建的示例内容）：

(http://www.productworld.com/blog-posts/2012/06/08/hello)

我可以看到我创建的示例内容的标题列表（在最近的帖子块下），但我无法查看各个博客帖子本身的任何内容。页面只是空白。

另外，我看不到标题和预告链接的列表 - 它应该显示在 (http://www.productworld.com/blog-posts) 下，但该 URL 给我一个“找不到页面”错误。这在以前的迭代中有效，但现在不起作用。

以下是我的视图设置的 2 个屏幕截图，以防相关：

1.  [http://i.imgur.com/uadew.png](http://i.imgur.com/uadew.png)
2.  [http://i.imgur.com/9yOUk.png](http://i.imgur.com/9yOUk.png)

**问题：**

1.  博客内容不显示的可能原因是什么？（如果我在“视图”部分预览博客文章，我可以很好地看到博客内容，但它不会显示在实际页面上。）是样式吗？视图中的某些设置？一些阻止设置？我搜索了我的 style.css 文件并尝试注释掉与“content：hidden”和“display：none”有关的所有内容，但无济于事。我已经尝试了博客文章 View 中的所有设置组合，但均无济于事。我尝试在各个区域放置“主页内容”和“查看：博客文章”块，并更改限制块显示位置的设置。博客文章标题/正文内容根本不会出现在页面源中，这可能是一个线索。我将如何调试这样的问题？

2.  为什么 www.productworld.com/blog-posts 说“找不到页面”，即使我已经专门设置了一个视图来在这个 URL 上创建一个页面？当 www.productworld.com/blog-posts/2012/06/14/hello-world-3 的 URL 中包含“blog-posts”时，为什么它会显示为有效页面？

任何帮助将不胜感激。如果我应该显示与我的样式表有关的东西，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:40:32.690

在我看来，您的面板似乎覆盖了节点模板。这就是您的节点未正确显示的原因。

转到结构 > 面板，查看是否启用了管理页面下的**节点模板选项。**如果是，那可能是你的问题。您可以通过查看文本右侧是否显示启用或编辑来判断它是否已启用。

然后，您可以编辑该设置，然后编辑内容并选择节点 > 正文以正确显示博客文章的正文。

如果您不熟悉，请查看此面板介绍视频。[http://yadadrop.com/drupal-video/panels-3-overview](http://yadadrop.com/drupal-video/panels-3-overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:45:57.193

将前导“/”字符从视图的页面路径中取出 - 内部 Drupal 路径通常不应该有，但系统会代表您将配置的基本路径添加到路径（它可能已经是“/”） .

# macos - 沙盒化的 mac 应用程序可以读取/写入哪些非用户目录？

> ID：11034930
> 
> 赞同：1
> 
> 时间：2012-06-14T14:10:44.167
> 
> 标签：macos, cocoa, sandbox, mac-app-store

我有一个应用程序需要在运行之间保留数据。我一直在为此使用 NSUserDefaults，但有一些用户向我指出了这一点：这会导致不同的用户最终得到不同的数据，这不是应用程序应该工作的方式。它需要一个可以读取/写入的目录，无论哪个用户正在运行它。

因此，我需要一个沙盒 mac 应用程序可以读取和写入的非用户特定目录。

谢谢！

（哦，如果这个目录在我的应用程序更新之间是持久的，那也很有帮助！）

快速几乎不相关的问题：有没有办法在 Mac App Store 批准的应用程序中拥有用户可修改的资源文件？我不希望它可以通过我的应用程序进行修改；我只是想确保修改它的用户不会因为不匹配代码签名哈希或其他东西而导致系统终止应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:20:00.813

I don't think that you will be able to read and write in a directory outside of the App Sandbox container without prompting the user to select it using Powerbox and saving a security-scoped bookmark (see [App Sandbox Container Directory](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW6)). From what I've gathered about App reviews lately, you won't even be able to specify a default in the open dialog if you elect to have the user choose the directory.

As for the second question, as I understand it any verification of code signatures is left to the developer. So while MAS apps have a `_CodeSignature` folder containing a plist with all the hashes of the resource, in my experiments changing them had no effect on app launch.

# c++ - 这是否可以减少免费模板函数的编译时间？

> ID：11034935
> 
> 赞同：0
> 
> 时间：2012-06-14T14:10:52.420
> 
> 标签：c++, templates, compile-time

我有一个 Visual Studio 2008 c++03 项目，我遇到过这样的事情：

```
//foo.hpp
namespace Foo {
    template< typename T >
    inline void foo( T t )
    {
        // do stuff...
    };
}; // namespace foo

// foo.cpp
#include "foo.hpp"
namepsace Foo {
    template void foo< int >();
}; // namespace Foo

//main.cpp
#include "foo.hpp"
int main(void)
{
    int a = 5;
    Foo::foo(a);
    return 0;
} 
```

这确实会创建一个我认为包含的 foo.obj 文件`Foo::foo< int >()`，但它似乎不会影响 main.obj 的大小。

这种技术是否可以减少模板代码的编译时间？或者它实际上增加了编译时间，因为`Foo::foo< int >()`现在必须编译两次？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:39:50.700

如果您不关心函数的内联（编译器可能会覆盖它），您可以执行以下操作。它不会是完美的，但您将有一个真正的机会来改善编译时间。

```
//foo.hpp
namespace Foo {
    template< typename T >
    void foo( T t );
}; // namespace foo

// foo.cpp
#include "foo.hpp"
namespace Foo {
    template< typename T >
    inline void foo( T t )
    {
        // do stuff...
    };
}; // namespace foo

namespace Foo {
    template void foo< int >();
}; // namespace Foo

//main.cpp
#include "foo.hpp"
int main(void)
{
    int a = 5;
    Foo::foo(a);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:17:09.237

从功能上讲，没有区别。`foo.cpp`仅包含声明（无定义）。如果包含`foo.cpp`在编译中，则编译时间会增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:38:10.273

简短的回答是**否定**的。要提高编译速度，您应该这样做：

```
//foo.hpp
namespace Foo {
    template <typename T> void foo( T t );

    template <> void foo<int>(int t);
}; // namespace foo

// foo.cpp
#include "foo.hpp"
namepsace Foo {
    template <> void foo<int>(int t)
    {
        // do stuff...
    };
}; // namespace Foo

//main.cpp
#include "foo.hpp"
int main(void)
{
    int a = 5;
    Foo::foo(a);
    return 0;
} 
```

# debugging - Meteor：在服务器端调试

> ID：11034941
> 
> 赞同：78
> 
> 时间：2012-06-14T14:11:12.347
> 
> 标签：debugging, meteor, server-side

有谁知道调试服务器端代码的好方法？我尝试启用 Node.js 调试然后使用节点检查器，但它没有显示我的任何代码。

我最终使用了 console.log ，但这非常低效。

**更新：我发现以下过程适用于我的 Linux 机器：**

1.  当你运行 Meteor 时，它会产生两个进程

    进程1：/usr/lib/meteor/bin/node /usr/lib/meteor/app/meteor/meteor.js

    进程2：/usr/lib/meteor/bin/node /home/paul/codes/bbtest_code/bbtest02/.meteor/local/build/main.js --keepalive

2.  您需要在 process2 上发送 kill -s USR1

3.  运行 node-inspector，你可以看到你的服务器代码

在我第一次尝试时，我将 /usr/lib/meteor/bin/meteor 中流星启动脚本的最后一行修改为

```
exec "$DEV_BUNDLE/bin/node" $NODE_DEBUG "$METEOR" "$@" 
```

并`NODE_DEBUG=--debug meteor`在命令提示符下运行。这只会在 process1 上放置 --debug 标志，所以我只能在 node-inspector 上看到流星文件并且找不到我的代码。

有人可以在 Windows 和 Mac 机器上检查吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-22T10:20:59.337

在 Meteor 0.5.4 中，这变得容易多了：

首先从终端运行以下命令：

```
npm install -g node-inspector
node-inspector &
export NODE_OPTIONS='--debug-brk'
meteor 
```

然后`http://localhost:8080`在浏览器中打开以查看节点检查器控制台。

**更新**

从 Meteor 1.0 开始，您只需键入

```
meteor debug 
```

这本质上是上述命令的快捷方式，然后如上所述在浏览器中启动节点检查器。

**更新**

在 Meteor 1.0.2 中添加了控制台或外壳。在服务器上输出变量和运行命令可能会派上用场：

```
meteor shell 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-14T11:07:28.807

Meteor 应用程序是 Node.js 应用程序。使用该`meteor [run]`命令运行 Meteor 应用程序时，您可以将[环境变量](https://github.com/meteor/meteor/pull/412#issuecomment-13536338)[配置为以调试模式`NODE_OPTIONS``node`](https://github.com/meteor/meteor/pull/412#issuecomment-13536338)启动。

`NODE_OPTIONS`环境变量值示例：

*   `--debug`
*   `--debug=47977`- 指定一个端口
*   `--debug-brk`- 打破第一条语句
*   `--debug-brk=5858`- 指定一个端口并在第一条语句上中断

如果你，从同一个 shell 运行的`export NODE_OPTIONS=--debug`所有命令都将继承环境变量。`meteor`或者，您可以只为一次运行启用调试，使用`NODE_OPTIONS="--debug=47977" meteor`.

要进行调试，`node-inspector`请在不同的 shell 中运行，然后转至`http://localhost:8080/debug?port=<the port you specified in NODE_OPTIONS>`，无论什么`node-inspector`告诉您运行。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-29T13:15:22.740

要在调试模式下启动 node.js，我是这样做的：

1.  打开 /usr/lib/meteor/app/meteor/run.js
2.  前

    ```
    nodeOptions.push(path.join(options.bundlePath, 'main.js')); 
    ```

    添加

    ```
    nodeOptions.push('--debug'); 
    ```

以下是附加调试器 Eclipse 的其他实用步骤：

1.  在这里使用“--debug-brk”而不是“--debug”，因为我更容易使用eclipse作为调试器附加node.js。
2.  添加“调试器；” 在要调试的代码中。（我个人更喜欢这种方式）
3.  在控制台中运行流星
4.  在 Eclipse 中附加到 node.js（V8 工具，附加到 localhost:5858）
5.  运行，等待调试器被命中

当您在流星应用程序文件夹中启动流星时，您会在控制台中看到“*调试器正在侦听端口 5858 ”。*

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-02-18T00:56:57.640

在 Meteor 1.0.3.1 上（更新到 Sergey.Simonchik 答案）

启动你的服务器`meteor run --debug-port=<port-number>`

将浏览器指向`http://localhost:6222/debug?port=<port-number>`

`<port-number>`您指定的端口在哪里。

在您的代码中添加一个`debugger;`您想要设置断点的位置。

根据`debugger;`调用的位置，它会在您打开检查器的客户端或服务器浏览器窗口上中断。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-02T16:11:37.287

我喜欢通过 GUI 设置断点。这样我就不必记住从我的应用程序中删除任何调试代码。

这就是我设法为我的本地流星应用程序在服务器端执行此操作的方法：

```
meteor debug 
```

以这种方式启动您的应用程序。

**打开 Chrome 到它给你的地址。**您可能需要安装[https://github.com/node-inspector/node-inspector](https://github.com/node-inspector/node-inspector)（它现在可能与 Meteor 捆绑在一起？不确定）

您会看到一些奇怪的内部流星代码（不是您编写的应用程序代码）。**按播放**运行代码。此代码只是启动您的服务器以侦听连接。

只有在您按下播放后，您才会在调试器文件夹结构中看到一个名为**“app”**的新目录。里面有你的流星项目文件。在你想要的那一行设置一个断点。

**打开应用程序的本地地址**。这将运行您的服务器端代码，您应该能够命中断点！

注意：每次您的应用重新启动时，您都必须重新打开检查器并再次执行此过程！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-01-29T05:19:26.710

As of Meteor 1.0.2 probably the best way for server-side debugging is directly via the new built-in shell: with running server run `meteor shell`. More info here: [https://www.meteor.com/blog/2014/12/19/meteor-102-meteor-shell](https://www.meteor.com/blog/2014/12/19/meteor-102-meteor-shell)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-06-14T18:21:35.383

我不确定为什么它不适合你。
我可以按照控制台（Mac）上的步骤使用它。

```
$ ps  
$ kill -s USR1 *meteor_node_process_id*  
$ node-inspector & 
```

[在https://github.com/dannycoates/node-inspector](https://github.com/dannycoates/node-inspector)上提到了上述步骤。它用于将节点检查器附加到正在运行的节点进程。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-12-14T10:07:24.383

我编写了一个名为*meteor-inspector*的小流星包，它简化了使用 node-inspector 来调试流星应用程序。它在内部管理节点检查器的生命周期，因此用户无需在某些文件更改后手动重新启动调试器。

有关更多详细信息和具体使用说明，请查看[https://github.com/broth-eu/meteor-inspector](https://github.com/broth-eu/meteor-inspector)。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-01-05T11:14:31.317

对于流星 1.3.5.2，运行

> meteor debug --debug-port 5858+n n 是一个非零数字，这将导致 node-inspector 使用 8080+n 作为 web 端口。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-07-01T23:11:03.363

解决我的问题的检查员是流星服务器控制台。这是我安装它的过程：

1.  在您的项目文件夹中，添加智能包`server-eval`：

    ```
    mrt add server-eval 
    ```

    对于流星 1.0：

    ```
    meteor add gandev:server-eval 
    ```

2.  重启流星。

3.  [从这里](https://github.com/gandev/meteor-server-console/releases)下载`crx`Chrome 扩展文件。
4.  在 Chrome 中打开扩展页面并将文件拖到`crx`扩展页面。
5.  重新启动 Chrome。
6.  检查 Web 检查器以评估服务器端代码：

    ![在此处输入图像描述](../Images/82a5bbfdf449085cc0f499d04c2b7934.png)

与节点检查器相比，我的输出更清晰。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-02-12T02:03:00.120

[WebStorm](https://stackoverflow.com/questions/14751080/how-can-i-debug-my-meteor-app-using-the-webstorm-ide)是为开源开发人员免费提供的强大 IDE，它使调试服务器端变得更加容易。

我已经在 Windows 上对其进行了测试，并且配置很轻松 - 请参阅[我的答案](https://stackoverflow.com/questions/14751080/how-can-i-debug-my-meteor-app-using-the-webstorm-ide)。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-11-18T17:44:46.227

如果您更喜欢使用[nodeJS 的官方调试器](http://nodejs.org/api/debugger.html)，您可以调用`NODE_OPTIONS='--debug' meteor`然后（在不同的 shell 上）`node debug localhost:5858`。

# maven-2 - jar文件与不同的maven（相同版本）不同？

> ID：11034943
> 
> 赞同：0
> 
> 时间：2012-06-14T14:11:21.730
> 
> 标签：maven-2

从我的本地 maven (2.0.8) 生成的 jar 文件与从企业中心构建 (maven 2.0.8) 生成的 jar 文件不同。所有的源代码和pom文件都是一样的，还有仓库链接。但是，当我使用来自中央构建的 jar 运行作业时，出现以下错误消息：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at sun.misc.Unsafe.ensureClassInitialized(Native Method)
    at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:25)
    at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:122)
    at java.lang.reflect.Field.acquireFieldAccessor(Field.java:918)
    at java.lang.reflect.Field.getFieldAccessor(Field.java:899)
    at java.lang.reflect.Field.get(Field.java:358)
    at org.apache.xmlbeans.XmlBeans.typeSystemForClassLoader(XmlBeans.java:770)
    (deleted....)
    ... 15 more

Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:501)
    ... 17 more

Caused by: org.apache.xmlbeans.SchemaTypeLoaderException: XML-BEANS compiled schema: Incompatible minor version - expecting up to 23, got 24 (schemaorg_apache_xmlbeans.system.s4260D8D66C8BD97BA7A1A374DB7D9EB0.index) - code 3
    at org.apache.xmlbeans.impl.schema.SchemaTypeSystemImpl$XsbReader.<init>(SchemaTypeSystemImpl.java:1522)
    at org.apache.xmlbeans.impl.schema.SchemaTypeSystemImpl.initFromHeader(SchemaTypeSystemImpl.java:260)
    at org.apache.xmlbeans.impl.schema.SchemaTypeSystemImpl.<init>(SchemaTypeSystemImpl.java:183)
    ... 21 more 
```

但是使用从我的本地 maven 生成的 jar 文件成功运行了该作业。

你能给我任何建议，我应该研究什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:56:41.180

首先，我建议至少将您的 Maven 安装更新到 Maven 2.0.11（这是 2.0 行的最新版本），但对 Maven 3 更好...我会检查您是否在两个区域都使用相同的 java 编译器

# javascript - 无法通过 iOS 中的 UIWebView 访问 Google OAuth

> ID：11034946
> 
> 赞同：2
> 
> 时间：2012-06-14T14:11:29.467
> 
> 标签：javascript, ios, cordova, uiwebview, oauth-2.0

我正在实现一个 phoneGap 应用程序，我想允许从不同的服务（Facebook、Twitter、谷歌）进行签名。我正在使用实际上是 UIWebView 的 childBrowser 插件。

每当我尝试`https://accounts.google.com/o/oauth2/auth`使用或不使用指定参数来专门加载 Google 的 OAuth URL 时，UIWebView 都会卡在加载中。如果我从移动 Safari 访问该 URL，它就可以工作。

通过一些搜索（在发布之前），我得出结论，它一定与 Google 的证书有关。UIWebView 不允许未签名的证书或类似的东西。

**解决**

我在 https 之前有一个空格（`' https..'`而不是`'https..'`）。这导致 webView 卡在加载屏幕上。

# javascript - 函数没有定义，不知道为什么

> ID：11034948
> 
> 赞同：1
> 
> 时间：2012-06-14T14:11:46.067
> 
> 标签：javascript, function

这是代码。Button1 和 button2 未定义。

```
$('.game_time').each(function() {
   //   bind_toggle($(this).find('a.preview_tweets.selected'), $(this).find('.with_tweets'),
    //      $(this).find('a.collapse_tweets'), $(this).find('.without_tweets')); 

  button1.click = function() {
        if ($(this).find('a.preview_tweets.selected').hasClass('open')){
        } else {
            if ($(this).find('a.preview_tweets.selected').length == 0) {
                get_preview_tweets('<%= game.away_team.url %>,<%= game.home_team.url %>', 
            3, '<%= game.id %>');
            }
            $(this).find('a.preview_tweets.selected').show()
            $(this).find('a.preview_tweets.selected').addClass('open');
        }
   }

   button2.click = function() {
        if ($(this).find('a.preview_tweets.selected').hasClass('open')){
            $(this).find('a.preview_tweets.selected').hide();
        } else {
            }
   }
}); 
```

我对 Javascript 完全陌生，所以如果有一些明显的事情，我很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:17:03.917

看起来你正在使用 jQuery。那些是`id`您要引用的按钮的 s 吗？如果是这样，请尝试`$("#button1").click`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:17:23.613

如果页面上有 2 个 id 为 button1 和 button2 的按钮，则可以使用：

```
$('#button1').click(function(){
    //Your code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:13:36.063

```
button1.click = function() {} 
```

这将被称为：`button1.click()`

如果您愿意，可以将其更改为 button1

```
button1 = function() {} 
```

# java - Appengine 数据存储父级或索引

> ID：11034951
> 
> 赞同：1
> 
> 时间：2012-06-14T14:12:04.143
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

我正在设计我的应用程序数据模型，但我有疑问，是使用父索引还是简单索引。

```
Site{
  @Id Long id;
}

Booking{
  @Id Long id;
  @Index/Parent Key<Site> site;
  @Index Date date;
} 
```

我的 2 个实体是*Bookings*和*Sites*。关系是一个*站点*有很多*预订*。我想通过 2 种方式检索预订：**getBookingBySiteAndDate**（关键站点，日期日期）和**getBookingsByDate**（日期日期）

**如果我使用Parent**，s*econd query* 效率不高，因为我需要 Booking 的网站来检索所有预订。本网站可能已被删除。

**如果我使用索引**，则第*一个查询*效率不高，因为我需要在（日期，站点）中使用自定义索引并且成本很高。Appart 的创作并不一致，因为预订没有实体组，我有 1w/s 的限制。

 **你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:13:16.357

我不会使用父母。我为父母看到的唯一价值是您是否需要创建一个事务组。在您的示例中，我只需将站点的 ID 存储在预订表中，并为 getBookingBySiteAndDate 查询创建索引。它会非常快。索引将自动为您创建，您无需进行额外工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:38:42.873

我已经仔细检查了 Objectify 邮件列表，并且没有限制将 getBookingsByDate 与父级和没有站点 ID 一起使用。

他们向我推荐的解决方案是使用@Parent，因为它更快，并且您不需要在 Site-Date 上使用双索引。**

# javascript - 如何在 Tinybox 中使用 jquery？

> ID：11034953
> 
> 赞同：0
> 
> 时间：2012-06-14T14:12:08.317
> 
> 标签：javascript, jquery

我正在使用 Tinybox 2 在弹出窗口中显示我的静态 html 页面。问题是我想在那个静态页面中使用 jquery。

这是插件的链接：

[http://sandbox.scriptiny.com/tinybox2/](http://sandbox.scriptiny.com/tinybox2/)

致电：Tinybox：

```
<a href="#" onclick="TINY.box.show({url:'photos.php?id=<?php echo $result_set['id'];?> ',width:900,height:400})">Read More </a> 
```

照片.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript">
$(document).ready(function(){         //this won't work why? 
  $("#cmdstxt").click(function(){
    $("#cmdz").append(" cmds txt");
  });
});

</script>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

        <title>HTML</title>
    <style>
body   {
position: absolute;
top: 0;
left: 0;
bottom: 0;
right: 10px;
width:900px;
margin:0 auto;

}

html {
overflow-y: auto;
background-color: transparent;
}

::-webkit-scrollbar {
width: 10px;
height: 10px;
}

::-webkit-scrollbar-button:start:decrement,
::-webkit-scrollbar-button:end:increment  {
height: 30px;
display: block;
background-color: transparent;
}

::-webkit-scrollbar-track-piece  {
background-color: #3b3b3b;
-webkit-border-radius: 6px;
}

::-webkit-scrollbar-thumb:vertical {
height: 50px;
background-color: #666;
border: 1px solid #eee;
-webkit-border-radius: 6px;
}

        div#photo{
            width:390px;
            height:290px;

            float:left;
            padding:5px;
            !background-color:#3B5998;
        }
        div#about{
            width:450px;
            height:150px;
            overflow: scroll;
            overflow-y: scroll;
            overflow-x: hidden;
        }
        div#cmds{
            width:400px;
            height:300px;
            float:right; 
            border-left: 2px solid black;
        }
        img{
            max-height:150px;
        }

        .clear{
            clear: both;
        }

        textarea{
            width:300px;
        }

    </style>

    </head>

    <body>
<?php 
require_once("includes/database.php");
if(isset($_GET['id'])){
    $id=$_GET['id'];
}

$query="SELECT *
FROM `photo`
WHERE `id` ='${id}' ";
$result=$db->query($query);
$result_set=$db->fetch($result);
?>      

        <div id="photo">
        <h1><?php echo $result_set['title']; ?></h1>    
        <img src="uploads/<?php echo basename($result_set['path']); ?>" />  

        <div id="about"><?php echo $result_set['about']; ?></div>
        </div>

        <div id="cmds">
            <div id="cmdz"> </div>
            <textarea name="about" id="cmdstxt"></textarea>
        </div>
        <p class="clear" />

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:17:16.073

您需要在成功调用中编写 jQuery 脚本。例子 ：

```
$(document).ready(function(){
    // When you click on the element below, you will see "clicked".
    $('.element').click(function(){
        alert('clicked');
    });

    $.ajax({
        url: a_cross_domain_url,
        success: function(data){
            // data will return something like : <a class="element">Click me!</a>
            $('.element').click(function(){
                alert('no nono');
            });

            // Clicking on element will return "no nono".
            alert(data);
        }   
    });
});

<a class="element">Click me!</a> 
```

事件不会再次绑定。有3种方法可以解决这个问题：

*   使用 .live() 将事件自动绑定到 AJAX 加载的元素（jQuery 1.3 及更高版本）。
*   将您的事件显式绑定到新加载的 AJAX 元素。
*   第三种方式是使用事件传播。在 jQuery 博客上搜索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:25:17.857

使用 IFrame 解决了问题：这是我的代码：

```
<a href="#" onclick="TINY.box.show({iframe:'photos.php?id=<?php echo $result_set['id'];?>',boxid:'frameless',width:900,height:450,fixed:false,maskid:'bluemask',maskopacity:40,closejs:function(){closeJS()}})" >Read More </a> 
```

谢谢。

# java - 在 Tomcat 6 上包含第三方库

> ID：11034957
> 
> 赞同：0
> 
> 时间：2012-06-14T14:12:26.070
> 
> 标签：java, apache, tomcat, classpath

我想在我们的 Apache Tomcat 中包含一些库以进行开发，但只是复制并粘贴到 Tomcat 的 lib 文件夹中是行不通的。

我怎样才能做到这一点？我还没有找到有关此的文档。

# php - PHP/MYSQL排名代码导致页面加载缓慢 PHP/MYSQL

> ID：11034965
> 
> 赞同：0
> 
> 时间：2012-06-14T14:12:53.623
> 
> 标签：php, mysql

我有一个运行 #-tag 趋势的测试页面，该页面存储在我的数据库中。页面在显示内容之前需要很长时间（最多 2 分钟）加载，该页面仅使用了一个功能

网址：[http ://www.sudanesetweeps.com/trendingtopics.php](http://www.sudanesetweeps.com/trendingtopics.php)

如何调整语句以缩短页面加载时间？

这是我的代码：

```
<?php 

require_once("dbconnect.php");
require_once("lib_isarabic.php");

$query = "SELECT COUNT( * ) cnt, hashtags
FROM  tweets
WHERE tweeted_at >= DATE_SUB( NOW( ) , INTERVAL 2 DAY ) 
AND hashtags !=  ''
GROUP BY hashtags
ORDER BY cnt DESC LIMIT 100";

$res = mysql_query($query);

while($row = mysql_fetch_assoc($res) ) {

    $count = $row['cnt'];
    $hashtags = explode( " ", $row['hashtags'] );

    foreach($hashtags as $hashtag ) {
        if( strtolower($hashtag) != 'sudan' && strtolower($hashtag) != 'new' && strtolower($hashtag) != 'new' )     
            if( is_arabic($hashtag) ) 
                $topics_ara[strtolower( trim($hashtag) )] += $count;            
            else    
                $topics_eng[strtolower( trim($hashtag) )] += $count;        

    }
}

array_multisort($topics_ara, SORT_DESC);
array_multisort($topics_eng, SORT_DESC);

$index = 0;
foreach($topics_eng as $key=>$value) {

    $query = "SELECT count(*) cnt FROM ( 
            SELECT count(*), tweeted_by FROM tweets
            WHERE hashtags like '%$key%'
                      AND tweeted_at >= DATE_SUB( NOW( ) , INTERVAL 2 DAY ) 
            GROUP BY tweeted_by 
             ) AS T";

/*              $query = "
            SELECT count(*) FROM tweets
            WHERE hashtags like '%$key%'
                      AND tweeted_at > DATE_SUB( NOW( ) , INTERVAL 1 DAY ) ";
*/

        $res = mysql_query($query);               
        $row = mysql_fetch_assoc($res);

        if($row['cnt'] > 1) {

        $index++;
        if($key != "" ) {
            $trending_eng[$key] = $value;
        }
    }

    if($index > 30) 
        break;
}

$index = 0;
foreach($topics_ara as $key=>$value) {

    $query = "SELECT count(*) cnt FROM ( 
            SELECT count(*), tweeted_by FROM tweets
            WHERE hashtags like '%$key%'
                      AND tweeted_at >= DATE_SUB( NOW( ) , INTERVAL 2 DAY ) 
            GROUP BY tweeted_by 
             ) AS T";
        $res = mysql_query($query);
        $row = mysql_fetch_assoc($res);

        if($row['cnt'] > 1) {

        $index++;
        if($key != "" ) {
            $trending_ara[$key] = $value;
        }
    }

    if($index > 30) 
        break;
}

 //var_dump($trending_eng) ;
 //var_dump($trending_ara) ;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:24:23.910

抱歉，您的数据模型有缺陷。

您没有对推文进行规范化，而是对主题标签进行全文搜索（通过`hashtags like '%$key%'`），这意味着时间间隔内所有推文的完整文本必须经过一个 CPU 密集型进程 - 不仅是一次，而是经过**两次`foreach()`**每个循环 30 次迭代。

所以你做了 60 次全文扫描——祝你好运。

正确的方法是在收到推文时对推文进行规范化，拆分主题标签并创建一个类似于`hashtag | user | count`

# ruby-on-rails-3.1 - i18n 格式化文本

> ID：11034967
> 
> 赞同：3
> 
> 时间：2012-06-14T14:13:12.017
> 
> 标签：ruby-on-rails-3.1, internationalization, i18n-gem

我对使用 i18n 时处理格式化文本的最佳实践有疑问。例如，假设我有一个*关于我们*的页面，其中包含多个段落、项目符号等（请记住，我不想每次添加段落或项目符号时都直接更改模板）我如何最好地表示这些更复杂结构？它们是否完全可能与 i18n 相关，还是我应该使用不同的技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:47:29.473

我个人的偏好是将 Markdown 中的内容存储在 I18n 字符串中。

# c# - 光标作为输出参数

> ID：11034970
> 
> 赞同：1
> 
> 时间：2012-06-14T14:13:27.887
> 
> 标签：c#, sql-server-2008, tsql, ado.net, cursor

我在 SQL Server 2008 R2 中有一个存储过程，它返回一个 Cursor 作为 OUTPUT 值。是否可以使用 .NET 4.0 框架将此光标返回到 C# 应用程序？

我的存储过程具有以下签名：

```
CREATE PROCEDURE [dbo].[MyProcedure]
      @nuserid    int,
      @nfetchtype int,
      @returncursor CURSOR VARYING OUTPUT
AS
... 
```

在存储过程结束时我有

```
...
    set @returncursor = CURSOR FORWARD_ONLY STATIC for SELECT * FROM MyTable WHERE          column=@Value
    open @returncursor
END 
```

在我的 C# Web 应用程序中，我使用了一个利用 System.Data.DbType 的包装器，并将我的返回值/参数设置为 DbType.Object。当我对数据库执行查询时，出现以下错误：

> 操作数类型冲突：sql_variant 与游标不兼容

这个 DbType.Object 参数将适用于 Oracle 中的 REFCURSOR，但我很想知道是否有办法为 SqlServer 做同样的事情。我的目标是在 SqlServer 和 Oracle 中拥有完全相同签名的存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:23:26.587

SQL 中可以有一个 CURSOR 参数，但 ADO.NET 不能使用它。相反，在 .NET 中，您必须使用 IDbCommand.ExecuteReader() 返回的 IDataReader，并使用 NextResult() 来迭代您的结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:05:42.273

您不应该在 OLE DB、ODBC、ADO 和 DB-Library 等数据库 API 中使用游标。

在使用游标之前请先阅读[这篇文章。](http://msdn.microsoft.com/en-us/library/ms175498%28v=sql.105%29.aspx)

# matlab - 逻辑数组的 MATLAB 维度

> ID：11034981
> 
> 赞同：0
> 
> 时间：2012-06-14T14:14:17.200
> 
> 标签：matlab, size

我在 MATLAB 中遇到问题。我有一个 NxM 逻辑数组，`L`但如果我这样做了，`dim(L)`我会得到：

```
Undefined function or method 'dim' for input arguments of type 'logical' 
```

`size`也不行。`length`有效，但只给我列数而不是行数。奇怪的是，在 Matlab 工作区中，它正确显示为 NxM 逻辑数组。

有谁知道如何获取逻辑数组的行数和列数？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:15:53.643

如果你想要行数和列数，`size`是你最好的选择：

```
[nRows,nCols] = size(L) 
```

如果失败，`clear size`请先使用，因为您可能不小心在工作区中有一个同名的变量。

# perl - 从远程域获取数据

> ID：11034983
> 
> 赞同：0
> 
> 时间：2012-06-14T14:14:19.077
> 
> 标签：perl, api, cgi

是否可以通过 perl 脚本将远程数据从一个域获取到另一个域？

我不想进入安全讨论，只是寻找获取远程服务器数据的工作示例。

远程脚本：

```
sub GetPageData{ 

  $PageData = 'Hello World';
} 
```

本地脚本：

```
#!/usr/bin/perl

print "Content-type: text/html\n\n";  
our $PageData;

require("http://MyDomain.com/cgi-bin/test.pl");
GetPageData();

print "$PageData"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:24:20.973

确保[“我们的”](http://perldoc.perl.org/functions/our.html)确实是您想要的。根据我的经验，'our' 在编写脚本时很少使用，但在执行 OO perl 时可以派上用场。

关于您的要求：

```
use LWP::UserAgent;
use HTTP::Request;
my $req = HTTP::Request->new( GET, $url );
my $ua = LWP::UserAgent->new( timeout => 5 );
my $res = $ua->request( $req );
return unless $res->is_success;
my $page_data = $res->content; 
```

# jquery-mobile - 在 jQuery Mobile 中将固定位置设置为 DIV [不是页脚或页眉] 无法按预期工作

> ID：11034987
> 
> 赞同：3
> 
> 时间：2012-06-14T14:14:38.200
> 
> 标签：jquery-mobile

我希望在 jQuery Mobile 中为 div 设置一个固定位置，我知道如何通过添加数据属性 data-position="fixed" 来使标题成为可能。我试图实现的是为既不是页眉也不是页脚的 DIV 设置固定位置，这可能吗？

我以为我可以使用下面的代码来实现它，但它没有。DIV 甚至不渲染

```
<div id="messageBox" data-position="fixed">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:42:13.813

目前仅支持`<header data-role="header" data-position="fixed">`和`<footer data-role="footer" data-position="fixed">`支持。

由于您想要一个`fixed`div，因此您可能知道要修复它的顶部/底部的距离。也许您可以通过设置与顶部/底部相关的边距来使用页眉/页脚并破解 CSS 以满足您的需求。

# python - 在while循环之外访问变量，Python

> ID：11034989
> 
> 赞同：1
> 
> 时间：2012-06-14T14:14:44.223
> 
> 标签：python, sockets, variables, loops, while-loop

我正在编写一个 Python 脚本来从特定端口获取数据。因此，只要端口打开，我就有一个 while 循环来获取我的数据。在这个 while 循环中，我添加了一个变量，让我们调用它`foo1`。时间到了，我不想再获取任何数据。

所以伪代码如下所示：

```
foo1 = 0

try:

   while True:
       fetch data
       foo1 = foo1 + 500

       if time up:
           break

finally:
    close socket

print foo1 
```

在我的 while 循环内部`foo1`正确地加起来。但在循环之外 `foo1`总是为零。你有什么主意吗？

只需交换**foo1**与**coh0** 编辑：

```
import re

coh = [0]
nachricht = ' S="0" '
coh0 = 0
time = 0
try:
    while True:
        time += 1
        coh = re.findall(r'\bS="\d"', nachricht)
        coh_value = re.findall(r'\d', coh[0])  

        if coh:
            if int(coh_value[0]) == 0:
                coh0 = int(coh0) + 500
                print coh0

        if time == 10:        
            coh0 = int((int(coh0)/500)/120)

            print "Here coh0 is zero again",int(coh0)
            break
finally:
    pass

print "Here coh0 is zero again",int(coh0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:22:31.927

线

```
coh0 = int((int(coh0)/500)/120) 
```

有效地执行整数除以 60000 - 它可以等效地写为

```
coh0 //= 60000 
```

如果`coh0`在执行此行之前恰好小于 60000，则执行后将为 0。

> 在我的 while 循环内部`foo1`正确地加起来。但在循环之外`foo1`总是为零。

这是描述正在发生的事情的一种非常误导的方式。正如您自己注意到的那样，循环内它已经为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:21:14.797

您的示例不起作用，因为您没有为 声明初始值`foo1`，因此您在它不存在的情况下引用它 - 这将抛出一个`NameError`. 如果您确实声明了初始值，则代码将起作用：

```
>>> x = 0
>>> while True:
...    x += 1
...    if x > 10:
...        break
... 
>>> x
11 
```

不仅如此，Python 在 while 循环中没有命名空间，所以即使你的代码被修改为在 while 循环中使用 y，它仍然可以工作：

```
>>> start = True
>>> while True:
...     if start:
...         y = 0
...         start = False
...     y += 1
...     if y > 10:
...         break
... 
>>> y
11 
```

请注意，这是一个非常人为的示例，您实际上想要这样做的情况充其量是很少见的。

请给我们一个[简短、自包含、正确的示例](http://sscce.org/)，该示例显示您的代码产生了您不想要的结果，以及您想要的结果。因为您的问题在 Python 中根本不存在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T14:16:58.910

您必须在循环之前声明*foo1*

```
foo1 = 0
while True:
    fetch data
    foo1 = foo1 + 500 
```

在您的情况下，变量*foo1*仅在*while*循环中具有可见性范围，当您在循环外使用它时，它只是在全局范围内再次创建。

# javascript - 如何有条件地在 javascript 中定义函数？

> ID：11034997
> 
> 赞同：14
> 
> 时间：2012-06-14T14:15:15.863
> 
> 标签：javascript

考虑以下脚本：

```
if (false)​ {
    function foo() {
        alert("FOO");
    }
}
foo(); // alerts "FOO" 
```

如您所见，`foo`即使条件`if`失败，该函数也已定义并有效。

我想这样做的原因是我正在为 InDesign 开发一个扩展，并且我制作了一个名为 utility.jsx 的脚本，其中包含在其他脚本中使用的各种功能。在所有需要这些功能的脚本中，我简单地使用：

```
app.doScript(File(scriptsFile.parent.fsName + "/t_utilities.jsx"), ScriptLanguage.JAVASCRIPT); 
```

它定义了我需要的所有功能，然后我可以使用它们。现在，由于这个脚本将被各种文件以不可预知的顺序（用户决定）多次调用，我想我可能只定义以前没有定义过的函数（如果实用程序.jsx 还没有运行） . 有点像`require_once`在php中。

我正在考虑类似以下的内容，但这不起作用，因为每次运行脚本时都会定义函数：`

```
var utilitiesHasRun;
if (utilitiesHasRun !== true) {
  // define all the functions
  // ...
  utilitiesHasRun = true;
} 
```

还有其他选择吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-14T14:17:14.767

您可以使它们成为函数*表达式*而不是函数*声明*：

```
if (false)​ {
    var foo = function () {
        alert("FOO");
    };
}
foo(); //TypeError: undefined is not a function 
```

请注意，在上面的代码中，`foo`即使条件评估为 false，仍然可以访问。这是因为*函数范围的声明*（函数和`var`）被提升到声明它们的范围的顶部。但是，*分配*发生在代码中它们出现的位置。

上面的代码实际上在做的是：

```
var foo; //No assignment, foo is undefined
if (false)​ {
    foo = function () {
        alert("FOO");
    };
}
foo(); //TypeError: undefined is not a function 
```

**警告**- 命名函数表达式在 Internet Explorer 8 及更低版本中仍然被提升（这是 IE 中的一个错误）。显然，如果您需要支持旧浏览器，这只是一个潜在的问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T14:18:38.513

为确保您的函数之前未定义，请使用：

```
if ( typeof yourFunctionName == 'undefined' ) {
  yourFunctionName = function( params ) {
    // your code here
  };
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T14:17:45.453

您可以根据需要使用函数指针重新分配函数。

```
var myFunctionPointer = function { alert("Default"); };
if (condition) {
    myFunctionPointer = function { alert("true"); };
}
else {
    myFunctionPointer = function { alert("false"); };
}
myFunctionPointer(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:16:00.373

通常我会基于一个函数创建一个完整的 API，该函数返回一个包含最终调用次要 JS 函数的方法的对象。扩展可以通过嵌入的类与 JS 文件进行交互。我想我给了你食谱的链接。所以你可以做的是在 AS3 中声明一个对象并检查一些属性，例如：

```
public var jsAPI:Object = {}; 
```

js代码将是

```
var jsAPI = function() {
    return {
        hasBeenLoaded:false,
        myMethod1:function(){},
    }
} 
```

然后如果你需要在 AS3 中使用 JS 函数，你可以检查一些标志，如：

```
if ( jsAPI.hasBeenLoaded ){ … }
else { //loads the API via new API() } 
```