# StackOverflow 问答 11092000-11092999

# javascript - 在 Rally SDK 2 中，是否某些记录类型不适用于 WSAPIDataStore？

> ID：11092000
> 
> 赞同：1
> 
> 时间：2012-06-18T22:28:21.527
> 
> 标签：javascript, rally

当我为用户故事制作一个快速的 wsapidatastore 时，它​​可以工作：

```
Ext.create('Rally.data.WsapiDataStore', {
            model: 'User Story',
            autoLoad: true,
            listeners: {
                load: this._onArtifactsLoaded,
                scope: this
            }
        }); 
```

但是，如果我将其更改为 Artifact，则会收到错误消息：

```
Ext.create('Rally.data.WsapiDataStore', {
            model: 'Artifact',
            autoLoad: true,
            listeners: {
                load: this._onArtifactsLoaded,
                scope: this
            }
        }); 
```

控制台说：

```
Uncaught TypeError: Cannot call method 'replace' of undefined sdk-debug.js:104071
Ext.define._buildTypeInfo sdk-debug.js:104071
Ext.define.getModels sdk-debug.js:104025
Ext.Array.each sdk-debug.js:956
Ext.define.getModels sdk-debug.js:104024
Ext.define.getModel sdk-debug.js:103985
Ext.define.load sdk-debug.js:104379
(anonymous function) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:36:05.347

看起来模型工厂有错误。

如果您需要解决方法，您可以使用这行代码将工件添加为合法类型。

```
Rally.data.ModelTypes.types.artifact = 'artifact'; 
```

# desire2learn - GradesManagementService 的系统错误为空

> ID：11092006
> 
> 赞同：1
> 
> 时间：2012-06-18T22:29:14.580
> 
> 标签：desire2learn

如果 GradesManagementService 出现系统错误，则返回的响应对象为 null，但响应标头包含诊断信息。我使用什么类来获取这些信息？

这是我的代码：

```
GradesManagementServiceV10 port = service.getGradesManagementServiceV10(); 
GetGradeValuesByOrgUnitRequest r = new GetGradeValuesByOrgUnitRequest(); GetGradeValuesByOrgUnitResponse resp = new GetGradeValuesByOrgUnitResponse(); WSBindingProvider bp = (WSBindingProvider)port; bp.setOutboundHeaders( Headers.create(formatSOAPHeader())); ((BindingProvider)port).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, getUrl()); 
resp = port.getGradeValuesByOrgUnit(r); // the response is null. <------  How do I see what the error is? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:32:42.720

在您的服务对象（在上面的代码片段中`port`，Web 服务代理类的对象`GradesManagementServiceV10`）中，`ResponseHeader`属性将包含此类信息（此属性的类型为`ResponseHeaderInfo`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T23:07:40.333

如果您正在使用 Desire2Learn 进行新开发，我还建议您查看 Valence REST/JSON API。新功能和新 API 调用将出现在该系统[http://docs.valence.desire2learn.com/](http://docs.valence.desire2learn.com/)中（它总是被部署，文档是开放的，等等）

# jquery - Check what error value is in ajax callback

> ID：11092007
> 
> 赞同：0
> 
> 时间：2012-06-18T22:29:21.230
> 
> 标签：jquery

How can I check what the error value returned is in ajax callback error :

```
$.ajax({
            url: "myurl",       
            type: 'POST',
            dataType : "text",
            data : ({
                json : myjson
            }),
            success : function(data) {

            },
   error : function() {
                alert ('error');
    } 

        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T22:41:36.757

Try accessing these parameters for your error part of the ajax call:

```
error: function (request, status, error) {
        alert(request.responseText); 
```

Another example:

```
error: function(xhr) {
                if(xhr.status == 422) {
                  alert(parseErrors(xhr));
                } else {
                  alert('An error occurred while processing the request.');
                } 
```

They are part of the ajax call you seperate them with a comma. So a little example:

```
$.ajax({
  success: function(data) {
  },
  error: function(xhr) {
  }
  }); 
```

**Update:** Basically xhr.status is the http status number.

```
alert("readyState: "+xhr.readyState);
alert("status: "+xhr.status);
alert("responseText: "+xhr.responseText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:32:46.950

similar to this [question](https://stackoverflow.com/questions/6792878/jquery-ajax-error-function)

```
error : function(jqXHR, textStatus, errorThrown){
    alert(jqXHR.status);
} 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c - 与 gcc 链接时出错？

> ID：11092012
> 
> 赞同：1
> 
> 时间：2012-06-18T22:30:08.090
> 
> 标签：c, gcc, linker

我运行以下命令来链接项目中的不同文件。

```
/opt/gcc-4.7-cilkplus/bin/gcc -g -Wall -l /opt/gcc-4.7-cilkplus/lib64/ -o exec main.o \
    mysql-client.o databaseConnection-common.o murmurhash3.o bloom-filter.o
    `mysql_config --cflags --libs\` -lcilkrts 
```

注意选项*-l /opt/gcc-4.7-cilkplus/lib64/*

当我运行此命令时，我收到此错误：

> /usr/bin/ld: 找不到 -l/opt/gcc-4.7-cilkplus/lib64/

但是这个目录存在于我的系统中。谁能告诉错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:34:44.113

-l (el) 后面应该跟一个库，而不是一个目录。也许你的意思是 -L 或 -I（眼睛）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:35:17.447

你正在使用`-l`你应该使用的地方`-L`。该选项`-l`指定库，而`-L`指定要在其中查找库的目录。

`-l`另请注意，或`-L`与其各自的值之间没有空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:36:52.737

`-Lpath/to/lib -lname`是语法（`-L`and后面没有空格`-l`）。例如，如果链接到静态库，这意味着链接应该使用`path/to/lib/libname.a`

另外，请注意链接器的参数顺序很重要。也就是说，如果 object`A`使用 library `B`，`B`应该写在它之后。如果`B`本身使用`C`，`A`则应先提及 ，然后再提`B`及`C`。

因此，您的命令可能如下所示：

```
/opt/gcc-4.7-cilkplus/bin/gcc -g -Wall -o exec main.o mysql-client.o \
databaseConnection-common.o murmurhash3.o bloom-filter.o \
`mysql_config --cflags --libs\` -L/opt/gcc-4.7-cilkplus/lib64/ -lcilkrts
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                Used -L and moved here 
```

# adobe - Photoshop 中的圆角矩形工具和比例角半径

> ID：11092015
> 
> 赞同：0
> 
> 时间：2012-06-18T22:30:35.753
> 
> 标签：adobe, photoshop

在 Photoshop 中使用圆角矩形工具时，您可以设置圆角半径。

但是，有没有办法锁定圆角半径，以便圆角在大矩形或小矩形上按比例看起来相同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:25:00.880

我知道保持固定大小与圆角比的唯一可能方法是创建一个具有所需比例的向量元素，然后复制并调整它的大小。

# php - 从Android将参数传递给php

> ID：11092018
> 
> 赞同：3
> 
> 时间：2012-06-18T22:30:40.097
> 
> 标签：php, android, mysql, parameters

在我的安卓系统中：

```
 String cat_id = getIntent().getExtras().getString("category_id");

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("cat_id", cat_id));

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "http://www.---.com/items.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection" + e.toString());
    } 
```

在我的 PHP 中：

```
// editing out DB connections which have been verified to work

 <?php
$sql=mysql_query("SELECT * FROM items WHERE cat_id = '".$_REQUEST['cat_id']."'");
while($row=mysql_fetch_assoc($sql))
    $output[]=$row;
print(json_encode($output));
mysql_close();
 ?> 
```

所以我的问题是它什么也没返回（在 JSON 结果部分——Toast 说“没有找到任何项目”）。我的代码是否正确，我将参数从 Android 传递到 PHP 的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:44:18.800

这条线不应该

```
$sql=mysql_query("SELECT * FROM items WHERE cat_id = '".$_REQUEST['cat_id']."'"); 
```

是

```
$sql=mysql_query("SELECT * FROM items WHERE cat_id = '".$_POST['cat_id']."'"); 
```

即 $_REQUEST 到 $_POST？

我建议为 Firefox 使用 Firebug 插件，并跟踪发送到您服务器的确切表单帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:32:06.443

我弄清楚是什么，不回答不是任何人的错。

这个问题在Java 传递给 PHP*之前就开始了。*这是一个传递到相关 Java Activity 的包。我有一个简单的错误，涉及使用不正确的原语，这反过来导致通过捆绑传递空值。

空值继续沿路径下降并落在 PHP 部分。所以上面显示的代码实际上是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T23:27:49.753

CustomList.java :->

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class CustomList extends ArrayAdapter<String>{

private final Activity context;
private final String[] web;
private final String[] imageId;
Context ct;
public CustomList(Activity context,
String[] web, String[] imageId) {
super(context, R.layout.list_single, web);
this.context = context;
this.web = web;
this.imageId = imageId;
ct=context;

}
@Override
public View getView(int position, View view, ViewGroup parent) {
LayoutInflater inflater = context.getLayoutInflater();
View rowView= inflater.inflate(R.layout.list_single, null, true);
TextView txtTitle = (TextView) rowView.findViewById(R.id.txt);
TextView txtval=(TextView)rowView.findViewById(R.id.val);

//Typeface tf=Typeface.createFromAsset(ct.getAssets(), "saral.ttf");
//Typeface tf=Typeface.createFromAsset(ct.getAssets(), "shrutib.ttf");
//txtTitle.setTypeface(tf);
//txtTitle.setText(web[position]);
//txtval.setTypeface(tf);
txtval.setText(imageId[position]);
//ImageView imageView = (ImageView) rowView.findViewById(R.id.img);

//imageView.setImageResource(imageId[position]);
return rowView;
}
} 
```

MainActivity.java :->

```
package learn2crack.customlistview;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.net.ParseException;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.app.Activity;
import android.content.Intent;

public class MainActivity extends Activity {
    ListView list;

    String result = null;
    InputStream is = null;
    StringBuilder sb = null;

    String[] web=null;
    String[] imageId = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        // http post
try {
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("link of php page");
// httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
is = entity.getContent();
} catch (Exception e) {
Log.e("log_tag", "Error in http connection" + e.toString());
                }

                // convert response to string
try {
BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
sb = new StringBuilder();
sb.append(reader.readLine() + "\n");
String line = "0";
while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
    }
is.close();
result = sb.toString();
} catch (Exception e) {
    Log.e("log_tag", "Error converting result " + e.toString());
}   

// paring data
//JSONObject jArray;
JSONArray jArray;
    try {
    jArray = new JSONArray(result);
    JSONObject json_data = null;
    web = new String[jArray.length()];
    imageId=new String[jArray.length()];
    for (int i = 0; i < jArray.length(); i++) {
json_data = jArray.getJSONObject(i);
web[i] = json_data.getString("category_id");
imageId[i] = json_data.getString("category_name");
}
} catch (JSONException e1) {
Toast.makeText(getBaseContext(), "No City Found", Toast.LENGTH_LONG).show();
} catch (ParseException e1) {
e1.printStackTrace();
}
CustomList adapter = new CustomList(MainActivity.this, web, imageId);
list=(ListView)findViewById(R.id.list);
list.setAdapter(adapter);
list.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                    @Override
     public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
Intent newint=new Intent(getApplicationContext(), subcatcls.class);
newint.putExtra("cat_id",web[+ position]);
                        startActivity(newint);
                    }
                });
    }
} 
```

并在 PHP 代码中使用***print_r***而不是 print

# c# - 如何测试两个日期时间是否相同？

> ID：11092022
> 
> 赞同：64
> 
> 时间：2012-06-18T22:30:58.553
> 
> 标签：c#, datetime, equality

> **可能重复：**
> [如何在 C# 中比较日期](https://stackoverflow.com/questions/683037/how-to-compare-dates-in-c-sharp)

我的这段代码：

```
public static string getLogFileNameForDate(DateTime dt)
{
    if (dt.Equals(DateTime.Now)) 
```

...即使两个日期相同（日期）也会失败，因为 dt 在启动时被分配了一个值（例如“6/18/2012 15:19:42”），因此日期不完全相同，即使尽管年、月和日相同（DateTime.Now 的值可能是“6/18/2012 15:30:13”）。

我知道我可以这样测试：

```
if ((dt.Year.Equals(DateTime.Now.Year) && (dt.Month.Equals(DateTime.Now.Month) && (dt.Day.Equals(DateTime.Now.Day)) 
```

...但这似乎有点像 Jethro*

什么是接受/首选的方法（没有双关语）？

*   克兰佩特，不是图尔

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-06-18T22:32:24.887

尝试

```
if (dt.Date == DateTime.Now.Date) 
```

它只需要日期部分，时间戳为 12:00:00

# java - Java StringReader 读取超出输入。这是错误还是预期行为？

> ID：11092024
> 
> 赞同：1
> 
> 时间：2012-06-18T22:31:05.963
> 
> 标签：java, stringreader

试试这个代码 -

```
import java.io.StringReader;

public class StringReaderTest
{
    public static void main(String[] args) throws Exception
    {
        String sampleString = "abcdefg";
        StringReader reader = new StringReader(sampleString);

        for(int i=0; i<40; i++)
        {
            char c = (char) reader.read();
            System.out.print(c);
        }
    }
} 
```

输出是 -

```
abcdefg????????????????????????????????? 
```

所以读者实际上已经读过了输入的结尾。我的印象是，当它试图读取“g”以外的内容时，它应该抛出异常，但事实并非如此。相反，它返回了一个“？” 特点。这是一个错误还是这是预期的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:35:05.713

在这种情况下，[文档](http://docs.oracle.com/javase/7/docs/api/java/io/StringReader.html#read%28%29)非常清楚：

> `StringReader.read()`
> 
> **返回：**读取的字符，如果已到达流的末尾，则返回 -1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T22:34:39.523

根据[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/StringReader.html#read%28%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/StringReader.html#read%28%29) StringReader.Read() 如果流的结尾有已达到。除非有其他类型的错误，否则它不会抛出 IOException。

# php - ajax 发布脚本

> ID：11092026
> 
> 赞同：-1
> 
> 时间：2012-06-18T22:31:20.713
> 
> 标签：php, jquery, ajax

我只是摆弄了以下脚本。它不工作。

```
<SCRIPT> 

function kin() {
    var kobj = document.getElementById("k"); // input Object 
    var q = kobj.value; 

       $.ajax({
      type: "POST",
      URL: "zips.php",
      data:q,
      success: function(res) {
            $("#result").append(res);
            console.log(res);
      }
   });

}

</SCRIPT> 

 <INPUT type="text" autocomplete="off" value="" id="k"><input type="submit" value="search" onClick="kin()" data-role="button">      
<DIV id="result"></DIV> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:34:15.503

代替：

```
data:q, 
```

尝试：

```
data:{"q":q}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:15:34.960

我注意到您发布的代码中有两个错误。我评论了旧代码，所以你可以很容易地注意到变化。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<SCRIPT> 

function kin() {
    //var kobj = document.getElementById("k"); // input Object 
    //var q = kobj.value; 

    var q = $("#k").val();

       $.ajax({
      type: "POST",
      url: "zips.php",
      //data:q,
      data: "q="+q,
      success: function(res) {
            $("#result").append(res);
            console.log(res);
      }
   });

}

</SCRIPT> 

 <INPUT type="text" autocomplete="off" value="" id="k"><input type="submit" value="search" onClick="kin()" data-role="button">      
<DIV id="result"></DIV> 
```

JQuery 允许您像这样重写您发布的代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<SCRIPT> 

$(document).ready(function() { 
    $("#submit").click(function(e) {
      e.preventDefault();

      var q = $("#k").val();

      $.ajax({
          type: "POST",
          url: "zips.php",
          data: "q="+ q,
          success: function(res) {
                $("#result").append(res);
                console.log(res);
        },
      });

    });       

});

</SCRIPT> 

 <INPUT type="text" autocomplete="off" value="" id="k"><input type="submit" id="submit" value="search" data-role="button">      
<DIV id="result"></DIV> 
```

# html - 使用 CSS 设计 HTML 按钮？

> ID：11092032
> 
> 赞同：3
> 
> 时间：2012-06-18T22:32:07.483
> 
> 标签：html, css, button

我的问题如下：

这是我的 HTML 代码的一部分：

```
<form method='GET' name='auftragaufgeben' action='AuftragAufgeben'>
    <input  type='submit' name='auftragaufgeben2' value='Auftrag aufgeben'>
    <input type='hidden' name='logged' value='logged'>
</form> 
```

不，我想要在 css 的帮助下设计按钮。这是代码：

```
a.auftragaufgeben {
display: block;
background-image: url(AuftragAufgeben.png);
width: 467px;
height: 104px;
}

a.auftragaufgeben:hover {
background-image: url(AuftragAufgeben_Hover.png);
} 
```

我发现按钮标签中的类声明应该可以工作，例如：

```
<form method='GET' name='auftragaufgeben' action='AuftragAufgeben'>
<input  class="auftragaufgeben" type='submit' name='auftragaufgeben2' value='Auftrag aufgeben'>
    <input type='hidden' name='logged' value='logged'>
</form> 
```

但这并没有改变任何东西。如何将按钮的布局更改为我在 CSS 部分中声明的图片？或者当我单击图片时是否有另一种方式来启动表单？

亲切的问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T22:37:12.250

在您的 CSS 中，代码**a.auftragaufgeben**和**a.auftragaufgeben:hover**用于设置链接元素的样式，而不是按钮。

尝试

```
.auftragaufgeben {
    display: block;
    background-image: url(AuftragAufgeben.png);
    width: 467px;
    height: 104px;
}

.auftragaufgeben:hover {
    background-image: url(AuftragAufgeben_Hover.png);
} 
```

**更新**

您的最终 html 代码应如下所示：

```
<html>
    <head>
        <style>
            .auftragaufgeben {
                display: block;
                background-image: url(AuftragAufgeben.png);
                width: 467px;
                height: 104px;
            }
            .auftragaufgeben:hover {
                background-image: url(AuftragAufgeben_Hover.png);
            }
        </style>
    </head>
    <body>
        <form method='GET' name='auftragaufgeben' action='AuftragAufgeben'>
            <input  class="auftragaufgeben" type='submit' name='auftragaufgeben2' value='Auftrag aufgeben'>
            <input type='hidden' name='logged' value='logged'>
        </form>
    </body>
</html> 
```

# objective-c - CCMoveto 不动

> ID：11092033
> 
> 赞同：0
> 
> 时间：2012-06-18T22:32:13.463
> 
> 标签：objective-c, cocos2d-iphone

我从 CoCos2d 开发开始，我认为我在节点空间和操作方面存在一些问题，这是我的代码，虽然我在运行代码时似乎没有任何错误，但任何评论都表示赞赏：

```
 +(id) create {
    return [[self alloc] init];}

    -(id) init {
        if ((self = [super init]))
        {
        CGSize scSize = [[CCDirector sharedDirector] winSize];

    self.position = ccp(0,scSize.height);;

    touchArea = [CCSprite spriteWithFile:@"touchArea.png"]; 
    [touchArea setAnchorPoint:ccp(0, 0.5)];
    [self addChild:touchArea];

    obj_1 = [CCSprite spriteWithFile:@"obj1.png"];
    obj_2 = [CCSprite spriteWithFile:@"obj2.png"];
    obj_3 = [CCSprite spriteWithFile:@"obj3.png"];

    obj_tab = [NSMutableArray arrayWithObjects:obj_1, obj_2, obj_3, nil];

        for (int i=0; i < obj_tab.count; i++)
        {
            CCSprite *obj = [obj_tab objectAtIndex:i];
            float offSetPos = ((float)(i+1)) / (obj_tab.count +1);
            CGPoint pos = ccp(scSize.width*offSetPos, 0);
            obj.position = pos;
            [obj setAnchorPoint:ccp(0.5, -0.25)];
            [touchArea addChild:obj];
        }

    velocidad = 3;
    destino = ccp(0,-100);
    //[self scheduleUpdate];
    [self moveIt] // <-- Edited to call another method
 }   
    return self;

}

-(void) moveit{
    CCMoveTo *moverAction = [CCMoveTo actionWithDuration:5 position:ccp(0,0)];
    CCCallFunc *onEndAction = [CCCallFunc actionWithTarget:self selector:@selector(onEndMove:)];
    CCSequence *moveSequence = [CCSequence actions: moverAction, onEndAction, nil];
    [touchArea runAction:moveSequence];
{

-(void) update:(ccTime)delta {

}

-(void)onEndMove:(id)sender{
    NSLog(@"OnEndMove fired");
}

-(void) onEnter{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:-1 swallowsTouches:YES];
}

-(void) onExit {
    [[CCTouchDispatcher sharedDispatcher] removeDelegate:self];
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{

    CGRect boundingBox = touchArea.boundingBox;
    boundingBox.origin = CGPointZero;

    BOOL isTouchHandled = CGRectContainsPoint(boundingBox, [touchArea convertTouchToNodeSpace: touch]);

    //NSLog(@"touchLocation y = %f", touchLocation.y);
    //NSLog(@"touchArea y = %f", touchArea.position.y);

    if (isTouchHandled){
        NSLog(@"Touch Handled");
    }

    return isTouchHandled;

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:59:46.227

`-(void) update:(ccTime)delta`被叫的频率是多少？（可能是从您的`scheduleUpdate`方法开始的。）您可能每秒调用`[touchArea runAction:moveSequence];`几次，这会使大量的 CCMoveTo 排队。

您可能应该将您`runAction:`的 s 完全移出那里，或者至少在您的`update:`方法中添加一些逻辑来检查是否`touchArea`应该启动另一个`runAction:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:50:33.240

我假设上面显示的代码类 'self' 派生自 CCNode。确保 'self' 正在运行，它必须是 CCNode 的后代，并且将在添加到正在运行的节点时运行。这是 CCNode 的 onEnter（取自版本 1.0.1）中发生的情况：

```
-(void) onEnter
{
    [children_ makeObjectsPerformSelector:@selector(onEnter)];  
    [self resumeSchedulerAndActions];

    isRunning_ = YES;
} 
```

这是为节点启用调度程序和操作的地方。如果它从未被调用，您的操作将不会运行。

您可以将 moveIt 代码移动到 onEnter 方法，该方法将在对象运行时调用。

```
-(void) onEnter{
    CCLOG(@"%@<onEnter> : invoked",self.class);
    [self moveIt];
    [super onEnter];   
} 
```

# javascript - 在 raphael js 中缩放/拖动矩形

> ID：11092034
> 
> 赞同：3
> 
> 时间：2012-06-18T22:32:13.217
> 
> 标签：javascript, raphael

我对 javascript 和 raphaelJS 很陌生，很抱歉我的代码混乱，但我需要完成下一个任务：我需要绘制一个矩形并设法拖放和调整它的大小。这种方式必须适用于平板电脑。我想在底部和右侧绘制 2 个小圆圈并用它们调整这个矩形的大小，但我猜我的数学有问题，因为下一个代码有一些问题：http: [//jsfiddle.net/x5zHp/](http://jsfiddle.net/x5zHp/)（有只有一个圆圈）

当我拖动矩形时，您可以看到鼠标和矩形没有同时移动，并且鼠标箭头滑出。

您能否指出我的错误以及一些最佳代码解决方案，我将不胜感激。我找到了一个名为 free transform 的插件，但我想自己完成这项任务，因为最终我需要用它做一些事情，并且很难使用这个插件（例如，我将改变圆圈的大小或制作隐形圆圈，因为它必须很容易在平板电脑上工作。原因是用手指很难抓住平板电脑上的圆圈）谢谢你的进步，对不起我的英语

**更新**

最后[http://jsfiddle.net/y5Jag/7/](http://jsfiddle.net/y5Jag/7/)我搞定了。我还添加了一个不可见的圆圈，因此很容易捕捉到可见的圆圈（实际上我会在平板电脑中使用它）我唯一真正讨厌的是代码。非常混乱：

```
this.ox = this.attr('cx');
this.oy = this.attr('cy');
this.rox = Spectrum.resizer.attr('cx');
this.roy = Spectrum.resizer.attr('cy');
this.rwidth = Spectrum.rect.attr('width');
this.rheight = Spectrum.rect.attr('height'); 
```

任何建议如何美化这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:57:49.303

如果我正确理解您的问题，您几乎就在那里，您只需将距离乘以 2，因为正方形在两侧都按比例缩放...

```
this.scale = params.scale.y + dy*2 / rect.attr('height'); 
```

[http://jsfiddle.net/y5Jag/](http://jsfiddle.net/y5Jag/)

# objective-c - 停止 UIView 动画

> ID：11092035
> 
> 赞同：3
> 
> 时间：2012-06-18T22:32:23.953
> 
> 标签：objective-c, ios, xcode, uibutton, uiviewanimation

> **可能重复：**
> [取消 UIView 动画？](https://stackoverflow.com/questions/554997/cancel-a-uiview-animation)

我有以下动画，我想在按下按钮时停止它。你能告诉我我该怎么做吗？我无法弄清楚如何。谢谢。

```
-(void)animationLoop:(NSString *)animationID finished:(NSNumber *)finished context:(void    *)context 
{
[UIView beginAnimations:@"Move randomly" context:nil]; 
[UIView setAnimationDuration:1]; 
// [UIView setAnimationBeginsFromCurrentState:NO];

CGFloat x = (CGFloat) (arc4random() % (int) self.bounds.size.width); 
CGFloat y = (CGFloat) (arc4random() % (int) self.bounds.size.height); 

CGPoint squarePostion = CGPointMake(x, y); 
strechView.center = squarePostion; 

[UIView setAnimationDelegate:self]; 
[UIView setAnimationDidStopSelector:@selector(animationLoop:finished:context:)];

[UIView commitAnimations];

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T23:57:38.597

尝试这个：

```
[myView.layer removeAllAnimations]; 
```

并且一定要导入 Quartz 框架：

```
#import <QuartzCore/QuartzCore.h> 
```

动画是使用 QuartzCore 框架中的 CoreAnimation 应用的，甚至是 UIView 动画方法。只需定位要停止动画的视图层，然后删除其动画。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T00:18:46.197

你可以这样做：

```
[self.view.layer removeAnimationForKey:@"Move randomly"]; 
```

这比调用更有效，`[self.view.layer removeAllAnimations]`因为这可能会删除您想要保留的其他动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:53:44.390

您可以只更改当前动画的对象/属性。它将停止动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T04:09:58.677

我建议你使用 NSTimer。

```
NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(yourAnimation) userInfo:nil repeats:YES];

- (void)responseToButton:(UIButton *) _button {
    //when you want to stop the animation
    [myTimer invalidate];
}

- (void)yourAnimation {
      // move the view to a random point
} 
```

此外，您可以将 NSTimer 设置在另一个线程上，这样即使您的 TimeInterval 值非常小，主线程也可以在您按下时响应

# css - 是否可以在 webkit 中将图像裁剪为正方形的圆角方形框？

> ID：11092040
> 
> 赞同：0
> 
> 时间：2012-06-18T22:32:37.323
> 
> 标签：css, webkit, rounded-corners

## 用例

在圆角方框中显示用户上传的照片。图像将具有横向纵横比，但需要将其裁剪为方形以适合容器内。我们决定只显示照片的右侧（使照片的左侧不再可见）。

假设以下

*   照片无法预处理，我正在寻找仅 CSS 的解决方案
*   照片可以放大/缩小以适应所需的空间
*   照片必须保持其原始纵横比（并且不能拉伸以适合）

## 示例代码

请参阅此小提琴进行演示 [http://jsfiddle.net/rrbZg/](http://jsfiddle.net/rrbZg/)

```
<style>
.croppedPhoto {
    margin: 20px;
    width: 200px;
    height: 200px;
    overflow: hidden;
    position: relative;
    border-radius: 20px;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
}

.croppedPhoto img {
    height: 200px;
    position: absolute;
    right: 0;
}
</style>
<div class="croppedPhoto">
  <img src="/some/random/photobucket/url">
</div> 
```

## 问题

Chrome 和 Safari 显示带有方角的图像，根本不显示圆角。

## 可能的原因

似乎 webkit 只允许在容器上使用圆角，并且不会将圆角应用于子级或以任何方式裁剪它们。这适用于溢出设置为隐藏的元素。

## 什么不起作用

您可以尝试在图像本身上设置圆角。但这在我的情况下不起作用，因为那只会在右侧放置圆角，在左侧放置方角。

请参阅以下小提琴进行演示：http: [//jsfiddle.net/VF6m3/](http://jsfiddle.net/VF6m3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:39:28.073

这是通过简单的工作解决的已知问题 - 将图像设置为容器上的背景和边框半径。

[http://jsfiddle.net/VF6m3/1/](http://jsfiddle.net/VF6m3/1/)

# c++ - 如何从具有十六进制表示二进制数据的 char* 加载流字符串？

> ID：11092046
> 
> 赞同：0
> 
> 时间：2012-06-18T22:33:08.153
> 
> 标签：c++, c

我通常使用 C 语言工作，但现在我使用 C++ 中的一个库，它对压缩和解压缩数据很有用。然后我将压缩数据放在一个 char 数组中。就像：

```
strg[40] = "400000000200000002000200000000ffffff80"; 
```

从那里我需要用这个数组表示的二进制数据加载一个字符串流变量。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:06:09.823

克雷克的评论是正确的。

```
std::ostringstream ss;
const char *p = strg;
if (p) while (*p) {
    unsigned char x = hex2int(*p) << 4;
    if (*++p) x |= hex2int(*p++);
    ss << x;
} 
```

但这假设输入流的大端表示。如果输入流实际上表示具有小端表示的多字节单词，则您必须更改翻译。

# html - File:/// URL 不会在 IE 中打开 PDF 或 DOCX

> ID：11092050
> 
> 赞同：3
> 
> 时间：2012-06-18T22:33:36.723
> 
> 标签：html, internet-explorer

我需要能够使用 file:/// URL 方案在 IE 的 iframe 中加载各种类型的文件，并且我可以在 IE7/8/9 中正常工作（站点设置为受信任站点，禁用内容处置嗅探等）为多种文件类型（txt、png、gif 等），但似乎与 office 或 PDF 相关的任何内容都失败并出现 404“找不到文件”错误。再一次 - file:/// URL 方案适用于 txt、png 等文件，所以我有这部分工作，它对于 PDF、DOCX 甚至 CSV 文件（在安装了办公室的机器上）都失败了。在 Windows 7、Vista 和 XP 中发生。如果我更改扩展名但没有其他任何内容，它会加载 - 所以如果我有 file:///test.pdf 并将其更改为 file:///test.txt （相同的文件，不同的扩展名），它会在 iframe 中正常加载 -它当然会加载垃圾，但加载得很好！

我听说这与内容处置嗅探有关，所以我禁用了它，并且还听说它可能与 DDE 的问题有关，但还没有找到一个有效的一致解决方案。

有什么想法吗？我可以控制需要访问此页面的机器，所以如果它需要注册表调整我很好，因为我们有许多其他调整将作为 GPO 部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:12:19.720

这是我第一次看到 URL / 文件路径是正确的，而 IE 由于“错误”的文件类型而抛出 404。但是，另一方面，这是 Internet Explorer——期待一切！:]

您是否 100% 确定已在 Internet Explorer 中安装了所有必需的插件。您安装了 Office 的事实并没有改变任何 AFAIK。也许您的 IE 缺少用于显示 PDF 或 Office 文档的插件。这就是为什么它正确加载文件并更改扩展名，但不是正确的。

您是否尝试过将相同的 URL / 路径放入地址栏中？你有同样的问题还是只出现在 IFRAME 中？

# java - Robotium 没有运行所有测试

> ID：11092055
> 
> 赞同：2
> 
> 时间：2012-06-18T22:33:53.643
> 
> 标签：java, android, testing, robotium

我有一个我正在尝试运行的 Robotium 测试套件，由于某种原因，它只运行第一个测试，然后冻结。我让程序运行了几分钟，但它只是坐在那里说“测试运行”。这是我的代码：

```
import com.jayway.android.robotium.solo.Solo;
import android.test.ActivityInstrumentationTestCase2;

@SuppressWarnings("unchecked")
public class ODPRobotiumTest extends ActivityInstrumentationTestCase2 {

    private static final String TARGET_PACKAGE_ID = "com.gravitymobile.app.hornbill";
    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.vzw.odp.LaunchActivity";

    private static Class<?>launcherActivityClass;

    static{
        try{
            launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e){
            throw new RuntimeException(e);
        }
    }

    @SuppressWarnings({ "unchecked", "deprecation" })
    public ODPRobotiumTest() throws ClassNotFoundException{
        super(TARGET_PACKAGE_ID, launcherActivityClass);
    }

    private Solo solo;

    @Override
    protected void setUp() throws Exception{
        solo = new Solo(getInstrumentation(), getActivity());
    }

    public void testLine1(){

        solo.searchText("Easy to Find");        

    }
    public void testLine2(){

        solo.searchText("Hassle-Free");

    }
    public void testLine3(){

        solo.searchText("Trust");

    }
    public void testLine4(){

        solo.searchText("Verizon Curated Wallpaper");

    }
    public void testLine5(){

        solo.searchText("Taco's");

    }
    @Override
    public void tearDown() throws Exception{
        try{
            solo.finalize();
        }catch(Throwable e){
            e.printStackTrace();
        }
        getActivity().finish();
        super.tearDown();
    }
} 
```

任何帮助都会很棒。谢谢！

这是Junit：

![在此处输入图像描述](../Images/90db4d496f6895a7faa3b4e59cbbff05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:59:59.643

您的测试中没有任何断言（尽管我认为这不会是问题所在） Junit 面板在运行时会显示什么？

或尝试：

```
 public void testLine1(){
    assertTrue(solo.searchText("Easy to Find"));        
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:05:46.947

您需要注释测试以作为套件的一部分运行。尝试：

```
@Smoke
public void testLine1(){
    solo.searchText("Easy to Find");  
} 
```

请记住，您没有在这些测试中断言任何内容，因此它们还不是很有用。您需要添加断言以检查您的代码是否正常运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T01:04:37.750

所以我找到了答案：你必须包含`solo.finishOpenedActivities();`在 tearDown() 方法中。这将“完成”测试，然后开始新的测试！哇！

感谢所有提供帮助的人！

# mysql - 使用 Like / match 的慢 mysql 查询

> ID：11092056
> 
> 赞同：1
> 
> 时间：2012-06-18T22:33:54.947
> 
> 标签：mysql, sql-like, match-against

我需要搜索比实际更大的最接近的拨号代码。例如，最接近 33 的将是 331 或 332（如果 331 不存在）......所以它必须是 33xxxx，34 无效。

这 2 个查询有效，但速度太慢（250 毫秒/行）：

```
SELECT Dialcode
FROM table
WHERE (Dialcode LIKE '$var%' AND Dialcode > '$var' AND Price IS NOT NULL)
ORDER BY Dialcode ASC LIMIT 1

SELECT Dialcode
FROM table
WHERE (MATCH(Dialcode) AGAINST ('$var*' IN BOOLEAN MODE) AND Dialcode > '$var'
      AND Price IS NOT NULL)
ORDER BY Dialcode ASC LIMIT 1 
```

我的拨号代码是 PRIMARY KEY BIGINT(15)。

我这样做吗，它真的很快（> 1ms/行），但这并不是我所需要的：

```
SELECT Dialcode
FROM table
WHERE (Dialcode >= '$var' AND Price IS NOT NULL)
ORDER BY Dialcode ASC LIMIT 1 
```

所以我想我的问题是 LIKE / MATCH AGAINST。

任何想法，将不胜感激。

更新解决方案：

改编自raina77ow建议的解决方案：

```
SELECT Dialcode FROM table WHERE (( (Dialcode BETWEEN $var * 1 AND ’9’ )
   OR (Dialcode BETWEEN $var * 10 AND $var.’99’ )   
   OR (Dialcode BETWEEN $var * 100 AND $var.’999’ )
OR (Dialcode BETWEEN $var * 1000 AND $var.’9999’ )
…
) AND Price IS NOT NULL) ORDER BY Dialcode ASC LIMIT 1 
```

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:45:15.180

我看到这里的主要问题是索引是建立在 Dialcode 的数值之上的——而不是字符串。所以这两个查询根本不使用索引。

您可以尝试构建一个数字函数，问题是该函数将在评估的左侧有 Dialcode - 因此不会再次使用索引。

也许这种方法可能更有用。

```
SELECT Dialcode 
FROM table 
WHERE ( (Dialcode BETWEEN %value% * 10 AND (%value%*10 + 9) 
   OR (Dialcode BETWEEN %value% * 100 AND (%value%*100 + 99) 
   OR (Dialcode BETWEEN %value% * 1000 AND (%value%*1000 + 999)
   ...
) AND Price IS NOT NULL
ORDER BY Dialcode LIMIT 1; 
```

它丑得要命（我什至前两次都写错了——阿法辛应该因为纠正我而受到称赞），是的，但它应该会达到索引。另一种方法是使用 UNION（而不是 OR），但我想这两个查询将以相同的方式执行（虽然它没有经过验证）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:00:32.710

尝试使用正则表达式，例如：

```
SELECT Dialcode
FROM table
WHERE Dialcode REGEXP '^[$var]'
ORDER BY Dialcode ASC LIMIT 1 
```

我现在无法测试它，但我相信它应该可以工作。

# android - com.google.android.maps.MapView 显示过时的地图图块

> ID：11092062
> 
> 赞同：5
> 
> 时间：2012-06-18T22:34:39.760
> 
> 标签：android, google-maps

作为 Android 新手（习惯于在 WP7 上使用 Bing 地图）我假设将地图功能放入 Android 应用程序的默认方式是使用 MapView 控件 - 地图视图教程中的那个。

鉴于此，它似乎有问题......使用教程地图视图应用程序，我居住的区域最初显示为超过 7 年（我的区域仍然是原始土地）。然后，大约一周后，我再次运行它，它是最新的（我的房子和街道都在那里）。然后，昨天我再次运行它，它再次超过 7 年，今天它又是最新的。这里发生了什么？？如何使用这样的地图服务编写高质量的应用程序？

当我在 google.com 上使用 Google 地图时，它始终是最新的。谢谢，院长

# php - 如何通过不同行的 $_GET 从数据库中的一行获取 id 号？

> ID：11092064
> 
> 赞同：-1
> 
> 时间：2012-06-18T22:34:51.207
> 
> 标签：php, mysql, sql, database, get

我想让它显示用户所在页面的 cat_name 。目前是 category.php?id=2 或

```
category.php?id=' . $row['cat_id'] . ' 
```

我想让它 category.php?title=Soccer 或

```
category.php?title=' . $row['cat_name'] . ' 
```

但是，当我替换该行时，会导致另一页出现问题。

页面 category.php 是：

```
<?php
//category.php
include 'connect.php';

//first select the category based on $_GET['cat_id']
$sql = "SELECT
        cat_name,
        cat_id,
        cat_description
    FROM
        categories
    WHERE
        cat_id = '" . mysql_real_escape_string($_GET['id']) ."'";

$result = mysql_query($sql);

if(!$result)
{
echo 'The category could not be displayed, please try again later.' .     mysql_error();
}
else
{
if(mysql_num_rows($result) == 0)
{
    echo 'This category does not exist.';
}
else
{
    //display category data
    while($row = mysql_fetch_assoc($result))
    {
        echo '<h2>Topics in &prime;' . $row['cat_name'] . '&prime; category</h2><br />';
    }

    //do a query for the topics
$sql = "SELECT topic_id, topic_subject, topic_date, topic_cat
    FROM topics
    JOIN categories
    ON topics.topic_cat = categories.cat_id
    WHERE cat_id = " . mysql_real_escape_string($_GET['id']);

    $result = mysql_query($sql);

    if(!$result)
    {
        echo 'The topics could not be displayed, please try again later.';
    }
    else
    {
        if(mysql_num_rows($result) == 0)
        {
            echo 'There are no topics in this category yet.';
        }
        else
        {
            //prepare the table
            echo '<table border="1">
                  <tr>
                    <th>Topic</th>
                    <th>Created at</th>
                  </tr>';   

            while($row = mysql_fetch_assoc($result))
            {               
                echo '<tr>';
                    echo '<td class="leftpart">';
                        echo '<h3><a href="topic.php?id=' .     $row['topic_id'] . '">' . $row['topic_subject'] . '</a><br /><h3>';
                    echo '</td>';
                    echo '<td class="rightpart">';
                        echo date('d-m-Y', strtotime($row['topic_date']));
                    echo '</td>';
                echo '</tr>';
            }
        }
    }
}
}

?> 
```

问题是，当我替换 url 时，它使第二个 $sql （下面的那个：对主题进行查询）不起作用。我想做到这一点，以便 sql 与对 url 的更改一起工作。

我想将 cat_id 更改为 cat_name，但是当我这样做时，它会出现它不起作用的错误。所以问题是sql需要GET与cat_id一起，而我希望url具有cat_name。我在 sql 查询中做了什么更改才能使用 cat_name 并且仍然可以正常工作？

希望这是对问题的更好解释。如果您需要更多信息，请告诉我谢谢，瑞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:06:22.583

[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)语法似乎是你想要的。

一般来说，它类似于

```
SELECT <fields>
FROM table1
JOIN table2
ON table1.key = table2.key
WHERE <conditions> 
```

`ON`告诉数据库应该使用哪些键来“匹配”行。该`<table>.<field>`语法允许您指定字段来自哪个表，以防表包含相同的字段名称。

因此，您可以将查询调整为类似

```
$sql = "SELECT topic_id, topic_subject, topic_date, topic_cat
        FROM topics
        JOIN categories
        ON topics.topic_cat = categories.cat_id
        WHERE cat_name = " . mysql_real_escape_string($_GET['title']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:36:09.623

您可以尝试`INNER JOIN`：

```
SELECT 
  t.topic_id, t.topic_subject, t.topic_date, t.topic_cat, c.cat_id, c.cat_name
FROM
  topics as t
INNER JOIN
  categories as c
WHERE
  topic_cat = ". mysql_real_escape_string($_GET['title']) ."
    AND
      t.topic_cat = c.cat_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T22:41:03.247

这个怎么样，

```
$sql = "SELECT  
                topic_id,
                topic_subject,
                topic_date,
                topic_cat
            FROM
                topics
            JOIN
                other_table
            ON
                topics.topic_cat = other_table.id
            AND
                other_table.title = '" . mysql_real_escape_string($_GET['title'])."'"; 
```

这样做的原因是它会使用两个表的外键从 topic_cat 和 other_table 的连接表中选择上述四个字段。从中它会选择 other_table.title = $_GET['title']..

# x11 - 使用 ghostscript 作为 x11 查看器（gs x11 视口定位）？

> ID：11092065
> 
> 赞同：2
> 
> 时间：2012-06-18T22:35:00.447
> 
> 标签：x11, ghostscript, viewer

我已经了解[Ghostscript 前端](http://en.wikipedia.org/wiki/Ghostscript#Front_ends)查看器；但我想知道`gs`它本身如何用于查看 PDF 文档？

我能做到的最接近的方法是明确指定`x11`窗口作为输出设备，通过指定窗口的宽度和高度`-g`，并通过指定光栅化分辨率`-r`；或者，像这样的命令行：

```
gs -sDevice=x11 -g500x500 -r150x150 -dFirstPage=3 fontspec.pdf 
```

...结果如下：

![ghostscript-viewing.png](../Images/57c7c2834af705cc5f8d81177d49f41c.png)

......事实上，一切都很好 - 除了它从左下角开始；并且这里没有键盘快捷键（据我所知）来移动视口或执行一些缩放。

我知道`ghostscipt`可能没有鼠标/键盘交互来导航 x11 窗口输出，因为类似的东西是为前端查看器（如`gv`. 因此，ghostscript 中与（对我而言）最接近的是 - 如何呈现页面的特定区域？Via`-d`和`-r`最重要的参数已经指定 - 我只想在查看时指定一个不同于 0x0 的点（例如，x=100 y=100）作为左下角。

（*换句话说，我想说`ghostscript`：在 500x500 的窗口中显示 document.pdf 的第 3 页，光栅化为 150x150，从左下角 x,y=100,100 开始*）。

如何做到这一点`ghostscript`？是否有命令行开关 - 或者一旦加载就必须`postscript`在终端中使用语言命令？`ghostscript`

非常感谢您的任何答案，
干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:18:09.193

OK, thanks to [(#277826) ghostscript - How can I shift page images in PDF files more to the left or to the right?](https://stackoverflow.com/a/3483621/277826), I can see there is possibility to use `postscript`'s `PageOffset` command/operator to achieve offset/displacement of the viewport; thus the following command line can be used:

```
gs -sDevice=x11 -g500x500 -r150x150 -dFirstPage=3 -c '<</PageOffset [-150 133]>> setpagedevice' -f fontspec.pdf 
```

Note that, unlike the command line in OP - here you *must* use the `-f` switch to specify the input file here - if not, the command will fail with: `Error: /undefined in fontspec.pdf`.

Otherwise, the output looks like this:

![ghostscript-view-offset.png](../Images/c6cf34e9a6e7fe37b7ea1b7f7691face.png)

So this is nice to know - but I'm still curious if `ghostscript` doesn't already have some default switches, that would allow this viewport offset/repositioning thing...

Hope this helps someone,
Cheers!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:38:36.893

不，AFAIK，Ghostscript 本身并不能提供您想要的（“视口”）。这正是 ghostview 和 gv GUI 前端的用途。

Ghostscript 将 x11 设备（几乎）视为打印页面输出设备，并且打印页面确实具有固定大小，您也不能在其上移动页面图像的“视口”——除非您使用不同的方式重新打印它们设置：这就是一个不同值的 `-c "<</PageOffset [-150 133]>> setpagedevice"`参数发挥作用的地方......

# svn - 意外删除 ~/.subversion/servers 文件的内容 - 想要：默认内容？- 相关：使用不安全算法签名 svn 错误

> ID：11092073
> 
> 赞同：0
> 
> 时间：2012-06-18T22:35:14.763
> 
> 标签：svn, certificate

~/.subversion/servers 配置文件是否有任何初始内容？我试图查看源代码，但几乎不可能弄清楚......：/

这是迄今为止我发现的唯一提示。但无论如何，它并没有真正解决问题。 [http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html#svn.advanced.confarea.windows-registry.ex-1](http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html#svn.advanced.confarea.windows-registry.ex-1)

我的问题是我想通过附加到 ~/.subversion/servers 文件“ssl-trust-default-ca = no”来解决没有“证书验证错误：使用不安全算法签名”错误。

到目前为止它不起作用，因为我只是使用终端“vi”编辑器以某种方式删除了内容。服务器文件中的行本身和单独生成另一个错误：“~/.subversion/servers:2: Section header expected”

到目前为止，我所做的是添加从我上面发布的链接中获取的一些内容。这导致 ~/.subversion/servers 文件为："

```
 #Servers
    #
    #The servers file contains Subversion configuration options related to the network layers. There are two special sections in this file—[groups] and [global]. The [groups] section is essentially a cross-reference table. The keys in this section are the names of other sections in the file; their values are globs—textual tokens that possibly contain wildcard characters—that are compared against the hostnames of the machine to which Subversion requests are sent.
    #
    [groups]
    #beanie-babies = *.red-bean.com
    #collabnet = svn.collab.net
    #
    [beanie-babies]
    #…
    #
    [collabnet]
    #…
    #When Subversion is used over a network, it attempts to match the name of the server it is trying to reach with a group name under the [groups] section. If a match is made, Subversion then looks for a section in the servers file whose name is the matched group's name. From that section, it reads the actual network configuration settings.
    #
    #The [global] section contains the settings that are meant for all of the servers not matched by one of the globs under the [groups] section. The options available in this section are exactly the same as those that are valid for the other server sections in the file (except, of course, the special [groups] section), and are as follows:
    #
    #http-auth-types
    #This is a semicolon-delimited list of HTTP authentication types which the client will deem acceptable. Valid types are basic, digest, and negotiate, with the default behavior being acceptance of any these authentication types. A client which insists on not transmitting authentication credentials in cleartext might, for example, be configured such that the value of this option is digest;negotiate—omitting basic from the list. (Note that this setting is only honored by Subversion's Neon-based HTTP provider module.)
    #
    #http-compression
    #This specifies whether Subversion should attempt to compress network requests made to DAV-ready servers. The default value is yes (though compression will occur only if that capability is compiled into the network layer). Set this to no to disable compression, such as when debugging network transmissions.
    #
    #http-library
    #Subversion provides a pair of repository access modules that understand its WebDAV network protocol. The original one, which shipped with Subversion 1.0, is libsvn_ra_neon (though back then it was called libsvn_ra_dav). Newer Subversion versions also provide libsvn_ra_serf, which uses a different underlying implementation and aims to support some of the newer HTTP concepts.
    #
    #At this point, libsvn_ra_serf is still considered experimental, though it appears to work in the common cases quite well. To encourage experimentation, Subversion provides the http-library runtime configuration option to allow users to specify (generally, or in a per-server-group fashion) which WebDAV access module they'd prefer to use—neon or serf.
    #
    #http-proxy-exceptions
    #This specifies a comma-separated list of patterns for repository hostnames that should be accessed directly, without using the proxy machine. The pattern syntax is the same as is used in the Unix shell for filenames. A repository hostname matching any of these patterns will not be proxied.
    #
    #http-proxy-host
    #This specifies the hostname of the proxy computer through which your HTTP-based Subversion requests must pass. It defaults to an empty value, which means that Subversion will not attempt to route HTTP requests through a proxy computer, and will instead attempt to contact the destination machine directly.
    #
    #http-proxy-password
    #This specifies the password to supply to the proxy machine. It defaults to an empty value.
    #
    #http-proxy-port
    #This specifies the port number on the proxy host to use. It defaults to an empty value.
    #
    #http-proxy-username
    #This specifies the username to supply to the proxy machine. It defaults to an empty value.
    #
    #http-timeout
    #This specifies the amount of time, in seconds, to wait for a server response. If you experience problems with a slow network connection causing Subversion operations to time out, you should increase the value of this option. The default value is 0, which instructs the underlying HTTP library, Neon, to use its default timeout setting.
    #
    #neon-debug-mask
    #This is an integer mask that the underlying HTTP library, Neon, uses for choosing what type of debugging output to yield. The default value is 0, which will silence all debugging output. For more information about how Subversion makes use of Neon, see Chapter 8, Embedding Subversion.
    #
    #ssl-authority-files
    #This is a semicolon-delimited list of paths to files containing certificates of the certificate authorities (or CAs) that are accepted by the Subversion client when accessing the repository over HTTPS.
    #
    #ssl-client-cert-file
    #If a host (or set of hosts) requires an SSL client certificate, you'll normally be prompted for a path to your certificate. By setting this variable to that same path, Subversion will be able to find your client certificate automatically without prompting you. There's no standard place to store your certificate on disk; Subversion will grab it from any path you specify.
    #
    #ssl-client-cert-password
    #If your SSL client certificate file is encrypted by a passphrase, Subversion will prompt you for the passphrase whenever the certificate is used. If you find this annoying (and don't mind storing the password in the servers file), you can set this variable to the certificate's passphrase. You won't be prompted anymore.
    #
    #ssl-pkcs11-provider
    #The value of this option is the name of the PKCS#11 provider from which an SSL client certificate will be drawn (if the server asks for one). This setting is only honored by Subversion's Neon-based HTTP provider module.
    #
    ssl-trust-default-ca = no
    #Set this variable to yes if you want Subversion to automatically trust the set of default CAs that ship with OpenSSL.
    #
    #store-auth-creds
    #This setting is the same as store-passwords, except that it enables or disables on-disk caching of all authentication information: usernames, passwords, server certificates, and any other types of cacheable credentials.
    #
    #store-passwords
    #This instructs Subversion to cache, or not to cache, passwords that are supplied by the user in response to server authentication challenges. The default value is yes. Set this to no to disable this on-disk password caching. You can override this option for a single instance of the svn command using the --no-auth-cache command-line parameter (for those subcommands that support it). For more information regarding that, see the section called “Caching credentials”. Note that regardless of how this option is configured, Subversion will not store passwords in plaintext unless the store-plaintext-passwords option is also set to yes.
    #
    #store-plaintext-passwords
    #This variable is only important on UNIX-like systems. It controls what the Subversion client does in case the password for the current authentication realm can only be cached on disk in unencrypted form, in the ~/.subversion/auth/ caching area. You can set it to yes or no to enable or disable caching of passwords in unencrypted form, respectively. The default setting is ask, which causes the Subversion client to ask you each time a new password is about to be added to the ~/.subversion/auth/ caching area.
    #
    #store-ssl-client-cert-pp
    #This option controls whether Subversion will cache SSL client certificate passphrases provided by the user. Its value defaults to yes. Set this to no to disable this passphrase caching.
    #
    #store-ssl-client-cert-pp-plaintext
    #This option controls whether Subversion, when attempting to cache an SSL client certificate passphrase, will be allowed to do so using its on-disk plaintext storage mechanism. The default value of this option is ask, which causes the Subversion client to ask you each time a new client certificate passphrase is about to be added to the ~/.subversion/auth/ caching area. Set this option's value to yes or no to indicate your preference and avoid related prompts. 
```

"

[我非常感谢stackoverflow，我的浏览器在写作时崩溃了两次，但消息不知何故恢复了！天哪，它是这个虚拟时代的有用网站之一，时间已经过去了，谢谢]

啊，是的，到目前为止帮助我解决证书错误的原因是来自此页面： http: [//linux-knowledgebase.com/en/Tip_of_the_day/December/Certificate_verification_error%253A_signed_using_insecure_algorithm](http://linux-knowledgebase.com/en/Tip_of_the_day/December/Certificate_verification_error%253A_signed_using_insecure_algorithm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:19:47.087

如果你想要默认的 .subversion 目录，重命名你当前的 .subversion 目录，运行一个 svn 命令，它会为你创建一个新的。例如：

```
$ mv .subversion .subversion-
$ svn info
svn: '.' is not a working copy
$ ls -dl .subversion*
drwxr-xr-x 3 vobadm g268 4096 Jun 19 15:12 .subversion
drwxr-xr-x 3 vobadm g268 4096 Jun 19 15:12 .subversion- 
```

然后您可以尝试在新目录中重新进行更改，旧文件仍然可以参考。我认为这比尝试从头开始重新构建该配置文件更容易。

这样做的另一个好处是，如果在创建 .subversion 目录后升级了 Subversion，则任何新设置都将列在（新创建的）默认配置文件中。

# php - PHP 三个小于标志

> ID：11092079
> 
> 赞同：4
> 
> 时间：2012-06-18T22:35:38.930
> 
> 标签：php, heredoc

> **可能重复：**
> [在 PHP 中，“<<<”代表什么？](https://stackoverflow.com/questions/3700042/in-php-what-does-represent)

我只是在一些示例文档中环顾四周，我看到了这个：

```
$page = <<<CHART
<html><head> head code
</head><body>
body code
</body>
</html>
CHART;
return $page; 
```

我只想知道第一行是什么意思，为什么有人会使用它？另外，如果我也可以阅读更多内容？我假设结束图表将是“图表”；因为它在结尾并且与开头相同。

谢谢

# javascript - 调用 WCF 跨域的问题

> ID：11092086
> 
> 赞同：0
> 
> 时间：2012-06-18T22:36:42.830
> 
> 标签：javascript, wcf, web-services, soap

我正在尝试使用 javascript 通过 http 跨域调用 WCF 服务。

我已将*Access-Control-Allow-Origin*标头添加到要调用的操作中，如下所示：

```
WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*"); 
```

但是，当我使用 jquery.ajax 发布时，我得到：

```
Origin http://server/ is not allowed by Access-Control-Allow-Origin. 
```

更糟糕的是它甚至发生在我的本地机器上：

```
XMLHttpRequest cannot load http://localhost:8201/wcfservice. Origin http://localhost/ is not allowed by Access-Control-Allow-Origin. (observed in Chrome) 
```

我在做一些根本错误的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:28:58.713

您所做的对于 GET 请求（在启用 CORS 的浏览器中）很好 - 请求被发送到服务，如果服务具有 Access-Control-Allow-Origin 标头，浏览器会将其返回给应用程序） .

对于“不安全”的请求（即那些可能对服务造成副作用的请求，例如 POST、PUT 和 DELETE），浏览器首先发送一个*预检*请求，一个 OPTIONS 请求，它“询问”服务是否可以接受一个跨域请求。由于您的操作仅响应 POST 请求，因此它不会响应该请求并且浏览器将阻止它。

我写了一篇关于在 WCF 中实现 CORS 支持的一种方法的帖子，您可以在[http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf找到它.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf.aspx)。基本上，除了“正常”请求之外，您还需要处理 OPTIONS 请求。

# latex - 格式化 LaTeX 的 Stata 后估计结果

> ID：11092088
> 
> 赞同：1
> 
> 时间：2012-06-18T22:36:55.683
> 
> 标签：latex, stata

我想在 Stata 中编写一个 TeX 文件，其中包含一个四舍五入到最接近 0.001 的 p 值。由于 sutex、outtab 等没有内置的后估计结果功能，我尝试了很多东西，比如

```
file write myfile %4z "`r(p)'" 
```

或者

```
gen temp = round( `r(p)',.001)
format temp %4.3f
sum temp, f
file write myfile " & `r(mean)'" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:58:19.960

这是一个将 t 检验中的 p 值写入文本文件的示例。p 值四舍五入到小数点后三位。

```
sysuse auto, clear
ttest price, by(fore)
file open myfile using "foo.txt", write replace
file write myfile "price & " %5.3f (r(p)) " \\"
file close myfile 
type "foo.txt" 
```

我已经指定了一种`5.3f`格式。第一个数字表示输出的宽度为 5。此宽度包括小数点。第二个数字表示小数点后面会有三位数字。如果您`help format`想了解有关此表示法和您拥有的其他选项的更多信息，请查看。

括号周围的`r(p)`意思是这个表达式将被评估，结果将被写入文件。这在 中进行了解释`help file`。

# django - Django WSGI 应用程序段错误

> ID：11092089
> 
> 赞同：4
> 
> 时间：2012-06-18T22:36:57.177
> 
> 标签：django, apache, segmentation-fault, python-2.7, mod-wsgi

所以我通过 apache 2.22 在 mod_wsgi 中的 django wsgi 应用程序中遇到了段错误

这是 wsgi 应用程序：

```
import os
import sys

sys.path.append('/home/***.com/zpencerq')
sys.path.append('/home/***.com/zpencerq/part')

os.environ['DJANGO_SETTINGS_MODULE'] = 'part.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

这是日志中的错误：

```
[Mon Jun 18 18:13:39 2012] [info] mod_wsgi (pid=78535): Create interpreter 'www.***.com|'.
[Mon Jun 18 18:13:39 2012] [info] [client 128.227.57.184] mod_wsgi (pid=78535, process='***', application='www.***.com|'): Loading WSGI script '/usr/home/***.com/zpencerq/part/apache/django.wsgi'.
[Mon Jun 18 18:13:39 2012] [error] [client 128.227.57.184] Premature end of script headers: django.wsgi
[Mon Jun 18 18:13:40 2012] [notice] child pid 78535 exit signal Segmentation fault (11) 
```

这是 mod_wsgi 的库参考：

```
root@seese# ldd /usr/local/apache/modules/mod_wsgi.so
/usr/local/apache/modules/mod_wsgi.so:
        libpython2.7.so.1 => /usr/local/lib/libpython2.7.so.1 (0x28300000)
        libutil.so.7 => /lib/libutil.so.7 (0x2819f000)
        libm.so.5 => /lib/libm.so.5 (0x281ac000)
        libc.so.7 => /lib/libc.so.7 (0x28080000)
        libthr.so.3 => /lib/libthr.so.3 (0x281c1000) 
```

这是加载的模块：

```
Loaded Modules:
 core_module (static)
 authn_file_module (static)
 authn_default_module (static)
 authz_host_module (static)
 authz_groupfile_module (static)
 authz_user_module (static)
 authz_default_module (static)
 auth_basic_module (static)
 include_module (static)
 filter_module (static)
 deflate_module (static)
 log_config_module (static)
 env_module (static)
 setenvif_module (static)
 version_module (static)
 mpm_prefork_module (static)
 http_module (static)
 mime_module (static)
 status_module (static)
 autoindex_module (static)
 asis_module (static)
 suexec_module (static)
 cgi_module (static)
 negotiation_module (static)
 dir_module (static)
 actions_module (static)
 userdir_module (static)
 alias_module (static)
 so_module (static)
 php5_module (shared)
 wsgi_module (shared)
Syntax OK 
```

以下是在模块中编译的：

```
root@seese# httpd -l
Compiled in modules:
  core.c
  mod_authn_file.c
  mod_authn_default.c
  mod_authz_host.c
  mod_authz_groupfile.c
  mod_authz_user.c
  mod_authz_default.c
  mod_auth_basic.c
  mod_include.c
  mod_filter.c
  mod_deflate.c
  mod_log_config.c
  mod_env.c
  mod_setenvif.c
  mod_version.c
  prefork.c
  http_core.c
  mod_mime.c
  mod_status.c
  mod_autoindex.c
  mod_asis.c
  mod_suexec.c
  mod_cgi.c
  mod_negotiation.c
  mod_dir.c
  mod_actions.c
  mod_userdir.c
  mod_alias.c
  mod_so.c 
```

这里有一些python好东西：

```
root@seese# ls -l /usr/local/bin/python*
lrwxr-xr-x  1 root  wheel     7 Jun 17 13:30 /usr/local/bin/python -> python2
lrwxr-xr-x  1 root  wheel    14 Jun 17 13:30 /usr/local/bin/python-config -> python2-config
-r-xr-xr-x  1 root  wheel  3420 Mar  6 01:22 /usr/local/bin/python-shared2.7
-r-xr-xr-x  1 root  wheel  1631 Mar  6 01:22 /usr/local/bin/python-shared2.7-config
lrwxr-xr-x  1 root  wheel     9 Jun 17 13:30 /usr/local/bin/python2 -> python2.7
lrwxr-xr-x  1 root  wheel    16 Jun 17 13:30 /usr/local/bin/python2-config -> python2.7-config
-rwxr-xr-x  1 root  wheel  8084 Jun 17 13:30 /usr/local/bin/python2.7
-rwxr-xr-x  1 root  wheel  1624 Jun 17 13:30 /usr/local/bin/python2.7-config 
```

我在这方面已经很长时间了，哈哈，并且对一路上出现的许多头痛感到非常沮丧。如果有人（也许是格雷厄姆邓普顿！）可以帮助我，那将是惊人的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:13:51.443

引用[mod_wsgi 文档](http://code.google.com/p/modwsgi/wiki/FrequentlyAskedQuestions)：

> 问：为什么当对 WSGI 应用程序发出第一个请求时，处理请求的 Apache 服务器进程会因“分段错误”而崩溃？
> 
> 答：这几乎总是由共享库版本冲突引起的。也就是说，Apache 或某些 Apache 模块链接到的库版本与 WSGI 应用程序使用的特定 Python 模块所使用的库版本不同。最常见的罪魁祸首是 expat 和 MySQL 库，但它也可能发生在其他共享库中。
> 
> 仅在第一次请求时进程崩溃的另一个原因可能是 Python 的第三方 C 扩展模块，该模块尚未实现以便在辅助 Python 子解释器中工作。Subversion 的 Python 绑定是一个特殊的例子，只有当 WSGI 应用程序被迫在 Python 创建的第一个解释器实例中运行时，Python 模块才能正常工作。
> 
> 有关这些问题的更多信息，请参见应用程序问题的各个部分。expat 库的问题也在 Expat 库的问题中进行了更详细的讨论。

我看到你已经安装了 Apache 和 Python `/usr/local/`，所以我假设你已经编译了它们。您必须确保代码中使用的 C 扩展也与正确的版本相关联。另一种选择是，您正在使用一些在通过 mod_wsgi 加载时表现不佳的错误模块。

例如，您可以在没有 mod_wsgi 的情况下运行您的应用程序`./manage.py`吗？

# iphone - 用 AVAssetReader 擦洗

> ID：11092090
> 
> 赞同：4
> 
> 时间：2012-06-18T22:37:00.117
> 
> 标签：iphone, ios, audio, core-audio, avassetreader

我已经实现了此处讨论的搜索（[AVAssetReader Seeking](https://stackoverflow.com/questions/6083162/avassetreader-seeking)），但是当 AVAssetReader 被拆除并构建一个新的时，当然会有明显的延迟（因为一旦开始读取数据就无法更改 timeRange 属性）。

我可以想象，只需读取数据并跳过它，就可以相当干净地完成时间向前搜索，但是及时向后搜索总是会受到这个问题的限制......

有什么想法可以优化它，以便用户喜欢浏览音轨吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:21:40.753

您在这里所经历的可能不是滞后，而是每次您创建 AVAssetReader 的新实例并阅读第一个示例时都会发生某种点击。

事实上 AVAssetReader 淡入了前 1024 个样本（可能更多）。

我通过在我真正想要读取的位置之前读取 1024 个样本来修复它，然后跳过这 1024 个样本。

我希望它也对你有用。

# jquery - 如何在自动完成jquery的选择中使用post

> ID：11092092
> 
> 赞同：0
> 
> 时间：2012-06-18T22:37:06.477
> 
> 标签：jquery, post, autocomplete

我正在使用来自 jquery 的自动完成功能......我有这个：

```
$('#name_search').autocomplete({
            source: "search/name.php",
            open: function(){
                $(this).autocomplete('widget').css('z-index', 1000);
                    return false;
            },
            select:function(event, ui){
                $(this).val(ui.item.nome+" - "+ui.item.cognome);
                fillAnagrafica(ui);
                var id = ui.item.id;
                $.post("tabella.php",id:id,
                   function(msg){

                      $('#tabella').html(msg);
                      $('#tabella').show();
                   }
                );
                return false;
            }
            }).data( "autocomplete" )._renderItem = function( ul, item ){
                return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.nome + "<br>" + item.cognome + "</a>" )
                .appendTo( ul );
            }; 
```

我的问题是，如果我删除邮政编码：

```
$.post("tabella.php",id:id,
                       function(msg){

                          $('#tabella').html(msg);
                          $('#tabella').show();
                       }
                    ); 
```

自动完成效果很好..如果我输入邮政编码..自动完成不会显示搜索到的文本..可能是什么问题？有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:41:03.890

$.post 的数据参数中有语法错误

```
 $.post("tabella.php",id:id, 
```

应该

```
 $.post("tabella.php",{id:id}, 
```

您没有将数据对象封装在花括号中。

使用浏览器控制台检查错误。像 Firebug 这样的控制台会指出语法错误并指出它

# database - 如何将变量输出到位于服务器上的文本文件

> ID：11092096
> 
> 赞同：0
> 
> 时间：2012-06-18T22:37:28.697
> 
> 标签：database, vbscript

嘿

我创建了一个 VBScript，它从计算机中提取服务标签、用户名和计算机名称。我现在需要做的是在文本文档中编译这些信息。

它的设置方式如下：

我们有一个 Active Directory 服务器，其中有一个用于登录脚本的文件夹。我创建了一个批处理文件来运行这个 .vbs 脚本，该脚本到目前为止运行良好。我现在需要的是在 AD 服务器上的一个名为“logging.txt”的文件中填充使用 .vbs 脚本创建的信息。

这是我到目前为止的脚本：

```
'Get Dell Service Tag Info
set ProSet = GetObject("winmgmts:").InstancesOf("Win32_BIOS")
Set ProSet1 = GetObject("winmgmts:").InstancesOf("Win32_SystemEnclosure")
For each Pro in ProSet
  For each Pro1 in ProSet1
   ServiceTag=Pro.SerialNumber
    wscript.echo ServiceTag
    exit for
  Next
  exit for
Next

'get username and computername, could also be asked in a batch
Set oShell     = WScript.CreateObject("WScript.Shell")
Set oShellEnv  = oShell.Environment("Process")
sComputerName  = oShellEnv("ComputerName")
sUsername      = oShellEnv("username")
wscript.echo sComputerName & " " & sUsername 
```

非常感谢您！

# ios - 使用 ARC 构建 Apple Core Data 教程时出错

> ID：11092099
> 
> 赞同：0
> 
> 时间：2012-06-18T22:37:41.663
> 
> 标签：ios, xcode, core-data

我一直在为 Core Data*叹息*而苦苦挣扎，所以我决定学习[这个 Apple Core Data 教程](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Articles/01_StartingOut.html)。我在教程中要求我构建到目前为止我已经组合在一起的项目。所以我现在[就](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Articles/02_RootViewController.html)在教程中。当我构建项目时，我收到以下错误：

`Type of property 'managedObjectContext' ('NSManagedObjectContext *') does not match type of ivar 'managedObjectContext' ('MSManagedObject *__strong')`

根视图控制器.m

`Ivar is declared here`

这就是我在错误窗口中得到的。

这是我的文件的样子，

RootViewController.h [http://pastie.org/4111206](http://pastie.org/4111206)

RootViewController.m [http://pastie.org/4111216](http://pastie.org/4111216)

AppDelegate.h [http://pastie.org/4111222](http://pastie.org/4111222)

AppDelegate.m [http://pastie.org/4111227](http://pastie.org/4111227)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:43:48.803

您的 ivar 声明不正确。在 RootViewController.h 中，

```
NSManagedObject *managedObjectContext; 
```

应该写，因为错误抱怨，

```
NSManagedObjectContext *managedObjectContext; 
```

实际上，在现代运行时，很长一段时间以来，没有必要（而且通常是不明智的）为`@synthesize`'d 属性显式声明支持 ivars。所以你可以完全删除 ivar 行，让编译器为你创建一个 ivar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:46:15.483

错误消息已经在解释它。你有一个类 NSManagedObject 的 ivar managedObjectContext （那是你的错误）。

编译器无法合成属性 managedObjectContext 因为你有一个同名但不同类的 ivar。

重命名 ivar 并更改合成行：

```
@synthesize managedObjectContext = _managedObjectContext; 
```

# android - 前台应用程序上的 startActivity 导致 onPause/onResume

> ID：11092101
> 
> 赞同：3
> 
> 时间：2012-06-18T22:37:50.850
> 
> 标签：android, service, onresume, onpause, start-activity

我有一项服务正在运行并在套接字上侦听。该服务将启动一个活动以显示视频帧，当它通过套接字接收到“格式”消息时，每个视频帧都会连续发送。

MyService 的主体：（为简洁起见，删除了简化和错误处理）：

```
 public class MyService extends Service
    {
        ....

        while (_run)
        {
            Socket s = serverSocket.accept();
            Thread connection_handler = new thread( new handleSocketConnection( s );
        }

        public class handleSocketConnection implements Runnable
        {
            boolean _run;
            Socket s;
            handleSocketConnection( Socket socket )
            {
               _run = true;
               s = socket;
            }

            public void run( )
            {
                InputStream in = s.getInputStream();
                byte bytes[] = new byte[100];

                while( _run )
                {
                    in.read( inbytes, 0, 100 );
                    if ( bytes[0] == 10 ) // if the first byte is a 10 this is a format message
                    {
                        bring_activity_foreward();
                    }
                    else // otherwise this is video frame data
                    {
                        send_activity_bytes( bytes, 100 );
                    }
                }

            }

            public void bring_activity_foreward()
            {
                Intent show_intent = new Intent( this.MyActivity.class );
                show_intent.setFlags( Intent.FLAG_REORDER_TO_FRONT | Intent.FLAG_ACTIVITY_NEW_TASK );
                startActivity( show_intent );
            }
        }
} 
```

所有这一切都很好，导致我的活动在我收到第一条格式消息并绘制视频帧时显示出来。但是，发送视频帧数据的服务器将定期发送“格式消息”以补偿显示、方向等方面的变化。如果我的活动已经在前台，则格式消息调用bring_activity_foreward（调用 startActivity() ）导致 Activity 立即收到“onPause”，然后是“onResume”。由于我的活动在恢复时绑定到服务，并在暂停时取消绑定，所以我的活动不断地取消绑定和重新绑定到服务。这似乎不是很有效。

```
public class ShowFrameActivity extends Activity
{
    @Override
    public void onCreate( Bundle savedInstanceState )
    {
        super.onCreate( savedInstanceState );
        setContentView( R.layout.viewframe );
    }

    @Override onResume( )
    { 
         super.onResume();
         bindToService();
    }

    @Override onPause( )
    {
        unbindFromService();
    }

    ...

} 
```

有没有办法将意图发送到我的活动，这样如果它已经在前台，它就不会执行“暂停 - > 恢复”？请记住，由于我的 startActivity 是从服务调用的，因此它必须包含“FLAG_ACTIVITY_NEW_TASK”。

感谢您的任何意见或建议。

-Z

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:01:30.860

An`Activity`在收到 an 之前总是会暂停，因此您在/`Intent`中绑定/解除绑定的方法总是会产生这种行为。`onResume()``onPause()`

Tim 的想法似乎是一个不错的想法（实际上涉及覆盖`onNewIntent(...)`），但即便如此，`Activity`它将被暂停/恢复。

就个人而言，我会尝试两种选择之一......

1.  `BroadcastReceiver`在 中使用内部`Activity`来接收`Intent`并将数据传递给`Activity`。然而，在这么说的时候，我不确定内部`BroadcastReceiver`是否会导致它`Activity`以同样的方式暂停/恢复——可能不会，值得一试。

2.  定义一个[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)类，在你的中创建它的一个实例并通过你用来启动`Activity`它的发送它`Intent``Service`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:42:13.590

我认为您正在寻找[Intent.FLAG_ACTIVITY_SINGLE_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)

# wordpress - 如何在 Wordpress 的微型 mce 编辑器上启用水平滚动？

> ID：11092116
> 
> 赞同：1
> 
> 时间：2012-06-18T22:39:46.653
> 
> 标签：wordpress, tinymce, scrollbar

我正在 WP 中构建客户的网站，并设法让页面/帖子编辑器使用与网站前端使用的相同样式。

我剩下的唯一问题是 - 默认情况下，当内容超出 iframe 中的可视窗口时，编辑器会垂直滚动。我怎样才能让它也水平滚动？

我的内容区域是 962px 宽，我希望我的客户能够看到他在 wp-admin 中编辑的页面，就像它在前端一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:28:18.273

首先你可以在wordpress的“写作”设置中做到这一点（邮箱X行的大小）

其次-您有一个按钮可以使编辑器全屏显示（因此您的客户可以使用它来更好地预览..

第三 - 你可以把它放在functions.php中

```
 function change_wysiwyg_height() {
    echo ‘ <style type="text/css">
    #content{ height:500px; } // put whatever
    </style>
    ‘;
    }

add_action(‘admin_head’, ‘change_wysiwyg_height’); 
```

在同一功能中，您还可以进行其他 css 更改

**更新我**

看完评论——

如果您更容易理解/做：

添加这个：

```
add_editor_style('tiny.css'); //you can change the name and / or path , as long as it correlates to the real file 
```

到你的functions.php

然后在您的主题目录中创建一个名为`tiny.css`（或其他）的文件并将其放入：

```
html .mceContentBody {
        width: 9999px; // whatever improbable size you want
} 
```

# jquery - 使用 JQuery DirtyForms 插件的示例

> ID：11092121
> 
> 赞同：3
> 
> 时间：2012-06-18T22:40:26.670
> 
> 标签：jquery, jquery-plugins, jquery-dirtyforms

我正在使用 jQuery DirtyForms 插件来防止用户无意中离开页面而不保存。我在对话框中遇到了一些问题。我有两个按钮：取消和不保存。

取消操作正常工作：对话框关闭，新页面未加载。但是，“不保存”操作不起作用。应该加载新页面，但它没有发生。

我一定遗漏了一些明显的东西。谁能看到我做错了什么？

```
<script type="text/javascript">

    $(document).ready(function(){
            $('form').dirtyForms();
    });

    $('a').click(function(event){
            event.preventDefault();
            var targetUrl = $(this).attr("href");

            if($.DirtyForms.isDirty()){
                    $("#dialog-savechanges").dialog({
                            height: 250,
                            width: 500,
                            modal: true,
                            buttons: {
                                    Cancel: function() {
                                            $( this ).dialog( "close" );
                                            $.DirtyForms.choiceContinue = false;
                                            $.DirtyForms.choiceCommit(event);
                                    },
                                    "Don't Save": function() {
                                            $( this ).dialog( "close" );
                                            $.DirtyForms.choiceContinue = true;
                                            $.DirtyForms.choiceCommit(event);
                                    }
                            }
                    });
            }
    });

</script>

<div id="dialog-savechanges" title="Save Changes?">
    <p>You've made changes to this page. Do you want to leave this page without saving?</p>
</div> 
```

谢谢！

-史蒂夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:56:24.400

好的，我知道这很明显……希望这对其他人有所帮助。

问题是 preventDefault 功能：

```
event.preventDefault(); 
```

删除它后，对话框按预期运行。

# c# - 在 Windows Phone 7 中解析文本文件

> ID：11092132
> 
> 赞同：1
> 
> 时间：2012-06-18T22:41:41.443
> 
> 标签：c#, windows-phone-7

我正在尝试在 Windows Phone 7 中解析和读取文本文件。这是文本文件的格式（实际上有 44 个条目）：

```
Millbrae,37.600322,-122.386735
SFO,37.61636,-122.391027
San Bruno,37.638262,-122.416513
South SF,37.664264,-122.444043 
```

这是我的代码：

```
var foo=Application.GetResourceStream(new Uri("stations.txt", UriKind.Relative));
        StreamReader streamReader = new StreamReader(foo.Stream);
        string x;
        int k;

            while ((x = streamReader.ReadLine()) != null)
            {
                string[] items = x.Split(',');
                   for (k = 0; k < 43; k++)
                 {

                     cities[k] = (items[0]);

                 }//for*/
            }//while

            for (k = 0; k < 43; k++)
            {
                MessageBox.Show(cities[k]);
            } 
```

最后的最后一个消息框仅用于调试-我试图确保将所有城市读入称为城市的字符串数组。但是，当我输出城市数组时，我得到的只是文本文件中的最后一个值，对于所有 44 个条目。

谁能指出我做错了什么？我不确定我如何在最后一个城市阅读每个值。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:46:41.983

您在城市数组的所有 44 个条目中设置了 44 次同一个城市。
然后你对下一行重复相同的模式并在最后一行停止。所以你只用最后一个条目填充数组。

```
 k = 0;
      while ((x = streamReader.ReadLine()) != null) 
      { 
            string[] items = x.Split(','); 
            if( k <= 44)
            {
                 cities[k] = (items[0]); 
                 k++;
            }
        }//while 
```

删除城市上的 for 循环并保留手动增量 var 即可解决问题。当然，我假设城市数组在某处声明为

```
 string[] cities = new string[44](); 
```

添加了一个 if 语句来检查超出范围的索引。

# wpf - Wp7情节提要动画设置出现地平线

> ID：11092134
> 
> 赞同：0
> 
> 时间：2012-06-18T22:41:49.460
> 
> 标签：wpf, silverlight, windows-phone-7, xaml

我只是想知道是否有一种方法可以设置您希望故事板项目出现在屏幕上的垂直阈值（滑入和滑出时），这样它就不必在屏幕上的所有内容上滑动它进进出出。我有一个根据计时器事件翻转的项目列表，但是当一个项目出现在屏幕上时，它会越过所有其他按钮和用户控件，看起来不太漂亮。如果我可以让它看起来好像项目从背景滑出就位，那就太好了。

我有两个故事板动画，一个处理滑入的对象，另一个处理需要滑出的当前对象。内容区域的两侧还有箭头按钮，当前对象在箭头上滑动，这是我想要消除的。这是故事板代码：

```
 <Storyboard x:Key="newsIn" x:Name="newsIn">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="newsContent">
            <EasingDoubleKeyFrame KeyTime="0" Value="500"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BounceEase EasingMode="EaseIn" Bounces="0"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>

    <Storyboard x:Key="newsOut" x:Name="newsOut">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="newsContent">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="-500">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BounceEase EasingMode="EaseIn" Bounces="0"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard> 
```

我不知道我是否非常清楚地描述了这一点，但如果有人以前这样做过或者知道我可以学习这样做的资源，非常感谢你的帮助。

谢谢你的时间。

**回答：**将您的动画元素放在画布（或某个容器）中，并使用 Clip 属性仅在它们出现在专用区域内时才显示它们。

```
 <Canvas Name="newsContent" Grid.Column="1" >
       <Canvas.Clip>
           <RectangleGeometry Rect="0,0,372,200"/>
       </Canvas.Clip>
       <Ui element/>
       <Ui element2/>
       ....
    </Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:01:25.693

好的，您可以尝试在作为您的内容容器的控件上使用 clipToBounds = true，即包含“新闻”项目（即画布或网格等）的控件。确保您的箭头等不在同一个容器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:01:43.697

您也许可以为 opacity 属性设置动画？使它只有在它就位后才变得可见

# python - 这个“文件打开”代码有什么问题？

> ID：11092138
> 
> 赞同：0
> 
> 时间：2012-06-18T22:42:14.417
> 
> 标签：python, excel, user-interface

我无法使用 python 2.7.3 中的以下代码打开 excel 文件来写入数据。这段代码有什么问题？

```
def openfile():
    import os
    f=open('ab.xls', 'w')
    return

import Tkinter
from Tkinter import *
root=Tk()
root.geometry('100x100+100+100')

button1=Button(root, text='Open file', command=openfile)
button1.pack()

root.mainloop() 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:57:27.913

1.  放入`import os`函数意味着在你运行函数之前它不会被导入......可能不是你想要的。

2.  您打开文件，但从不返回它的句柄。尝试替换`return`为`return f`

3.  如果您正在使用`import xlwt`，则无论如何都不需要它；它负责写入文件。请参阅我之前在[如何将用户输入（来自 python）导出到 excel 工作表？](https://stackoverflow.com/questions/11067404/how-to-export-user-inputs-from-python-to-excel-worksheet)

**编辑：**

... 'ab.xls' 已打开，您返回了一个句柄，然后*什么也不做*。你*期望*它做什么，究竟是什么？

尝试

```
import Tkinter as tk

def do_something_with_file():
    with open('ab.xls', 'w') as f:
        print("The file is open")
        # --> now DO SOMETHING with it <--

root = tk.Tk()
root.geometry('100x100+100+100')
button1 = tk.Button(root, text='Open file', command=do_something_with_file)
button1.pack()
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:56:20.017

在这种情况下，您似乎对 open 的含义感到困惑。`open()`是一个在 Python 中返回文件句柄的函数，因此您可以将数据读入应用程序。

如果要使用系统上该文件类型的默认程序打开文件，请查看[os.startfile()](http://docs.python.org/library/os.html#os.startfile)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T22:58:54.340

你的“f”变量是一个文件对象，它是一个局部变量（一旦“openfile”函数结束就被销毁）。您可以将 f 声明为全局，或者让您的 openfile 函数返回文件对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T22:49:23.570

我在这段代码中看不到任何明显的致命错误。

在这里，特别是如果您在 Windows 上运行它，文件是否仍然在其他地方打开，例如在 excel 中或通过您自己的代码？如果文件已经在其他地方可以写入，则无法打开该文件进行写入。

# google-chrome - chrome 中缺少一些 watir-webdriver 功能

> ID：11092140
> 
> 赞同：0
> 
> 时间：2012-06-18T22:42:29.820
> 
> 标签：google-chrome, browser, watir, watir-webdriver, qa

```
b.driver.manage.window.resize_to(1000, 1000) 
```

上面的那一行不适用于我的 Mac 上的 chrome。我正在运行 watir-webdriver 0.6.1 和 selenium-webdriver 2.22.2。

我收到以下错误：

```
1.9.3-p125 :003 > b.driver.manage.window.resize_to(1000, 1000)
Selenium::WebDriver::Error::WebDriverError: unknown error, status=405: ["GET", "HEAD", "DELETE"] 
```

我还没有安装 ChromeDriver。只需在上述 2 个 gem 的帮助下直接运行即可。任何帮助将非常感激。出于某种原因，最新的 watir-webdriver 不需要 safari-driver 或 chrome-driver。事实上，在这种情况下，安装 Chromedriver 并将其放在 PATH 中会破坏 chrome 的功能。我无法使用 ChromeDriver 启动和运行 chrome。

此外，关于我可以在哪里发布此类问题的错误报告的任何想法也将非常有帮助！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:16:10.313

尝试以下操作：

```
browser.window.resize_to(x, y)
browser.window.move_to(x, y) 
```

我能够让它在最新版本的 chrome 上工作。使用 driver.manage 函数绕过。

# ruby-on-rails - 使 form_tag 的行为更像 form_for

> ID：11092142
> 
> 赞同：2
> 
> 时间：2012-06-18T22:42:37.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我需要 form_tag 以与 form_for 返回参数相同的格式返回参数。

form_for 返回参数如下：

```
{"person"=>{"name"=>"bob", "age"=>"30", "etc"=>"bla"}}> 
```

form_tag 将执行以下操作：

```
{"name"=>"bob", "age"=>"30", "etc"=>"bla"} 
```

如何让 form_tag 以相同的方式返回参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:15:05.563

问题是你的领域。也许而不是：

```
<%= text_field_tag "name", "" %>
<%= text_field_tag "age", "" %>
<%= text_field_tag "etc", "" %> 
```

你放了这样的东西：

```
<%= text_field_tag "person[name]", "" %>
<%= text_field_tag "person[age]", "" %>
<%= text_field_tag "person[etc]", "" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:20:50.330

```
<%= form_tag(:controller => "persons", :action => "index", :p => params.except(:controller, :action)) %> 
```

或者

```
<%= form_tag( params.merge( :controller => "persons", :action => "index" )) %> 
```

# css - 如何隐藏部分图像？

> ID：11092146
> 
> 赞同：23
> 
> 时间：2012-06-18T22:43:18.770
> 
> 标签：css

我需要这样做：

如果图像的高度高于 100 像素，则隐藏图像的其余部分（例如：高度为 80 像素的图像 -> 显示完整图像，高度为 150 像素的图像 -> 仅显示前 100 像素）。

有没有办法用 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-18T22:47:26.107

您可以使用该`max-height`属性来指定图像的最大高度，然后用于`overflow: hidden;`隐藏其他任何内容。

例如

HTML：

```
<div class="image-container">
  <img src="some-image.jpg" />
</div> 
```

CSS：

```
.image-container {
  max-height:100px;
  overflow:hidden;
} 
```

JSFiddle 示例：http: [//jsfiddle.net/3jA9q/](http://jsfiddle.net/3jA9q/)

**编辑**

对于 internet explorer 6，您可以使用[CSS 表达式](http://msdn.microsoft.com/en-us/library/ms537634%28v=vs.85%29.aspx)来模拟类似的东西：

```
.image-container {
  height:expression(this.scrollHeight<100?"auto":"100px");
  overflow:hidden;
} 
```

但是请注意，这需要用户在其浏览器中启用 JavaScript。然而，我对 CSS 表达式的体验一直很差，最好避免使用它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T22:46:09.590

您可以使用`max-height`和的组合来做到这一点`overflow`。

HTML：

```
<div>
    <img>
</div> 
```

CSS：

```
div{
    max-height:100px;
    overflow:hidden;
} 
```

另请注意，`max-height`这在较旧的浏览器中不起作用，但如果您使用正常，`height`则图像也永远不会短于 100 像素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T22:45:25.993

把它放在一个高度为 100px 的 div 中并设置`overflow: hidden;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-02T18:06:31.443

您可以使用剪辑属性

```
img {
  position: absolute;
  clip: rect(0px,60px,200px,0px);
} 
```

# java - 使用 Spring MVC 上传 pdf 文件

> ID：11092147
> 
> 赞同：0
> 
> 时间：2012-06-18T22:43:34.800
> 
> 标签：java, spring-mvc, file-upload

我将我的项目上传到服务器。服务器上的文件如下：

*   索引.jsp
*   pdf
*   元信息
*   网络信息

当我在本地主机上上传 pdf 的方式是：

```
 try{
        File file = new File("C:\\...\\pdf");
        uploadItem.getFileData().transferTo(file);
    }catch(Exception e){

        System.out.println(e);
    } 
```

现在我正在使用这个：

```
 request.getServletContext().getRealPath("/pdf"); 
```

但它不起作用。有谁知道我如何将 pdf 存储到这个文件中。此外，如果我想从这个文件中检索一个 pdf 文件，我应该写什么？

我从这个链接看到：[Upload pdf on a server on a server with Spring MVC](https://stackoverflow.com/questions/10630544/upload-pdf-on-a-server-with-spring-mvc?rq=1)

```
That i should write:

@RequestMapping(value="url to map", produces={"application/pdf"}) 
```

“映射的网址”到底是什么？假设我在pdf文件中有：mydocument.pdf。这意味着我必须写：

```
@RequestMapping(value="pdf/mydocument.pdf", produces={"application/pdf"}) 
```

这个可以吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T11:03:52.160

看看这个例子

[http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example.html](http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example.html)

# c# - 使用 C# 应用程序将现有驱动程序升级到更新版本的驱动程序

> ID：11092148
> 
> 赞同：1
> 
> 时间：2012-06-18T22:43:36.777
> 
> 标签：c#, drivers

如果驱动程序是以前的旧版本，我想验证工作 PC 中可用的驱动程序并升级。最新的驱动程序始终存在于最新的主干中。驱动程序文件夹有 3 个文件（*.sys、* .inf 和 *.cat 文件）。硬件安装在其中一个 PCI 插槽中。应该在 Windows 7 和 XP 操作系统上工作。

我正在使用 Microsoft Visual Studio 2010 C# 3.5。请任何人通过将驱动程序安装到硬件来避免每次驱动程序更改时手动安装来帮助我实现自动化的想法。

背景：我正在使用 Devcon 应用程序查找连接到计算机的硬件，并且可以通过比较 system32 文件夹中的 .sys 文件和项目文件夹中的最新驱动程序来检查驱动程序版本，如果不匹配，则尝试启用和分别在 system32/drivers 和 inf 文件夹中复制最新的 .sys 和 inf 文件后，使用 devcon 重新启动 PCI。这不适用于我们目前拥有的最新驱动程序。

谢谢金星

# java - 未调用 Facebook 积分回调例程

> ID：11092152
> 
> 赞同：0
> 
> 时间：2012-06-18T22:44:26.023
> 
> 标签：java, javascript, facebook-credits

调用credits`buy()`例程时，Facebook 会显示此错误，`There Was a Problem Processing Your Payment.`并且不会显示付款对话框。

我已经验证了以下内容，但我找不到问题：

1.  在 Credits Settings 中设置回调 url：http: [//sharp-journey-4179.herokuapp.com/callback.jsp](http://sharp-journey-4179.herokuapp.com/callback.jsp)
2.  将自己设置为信用测试员。
3.  已验证可以从 Facebook 对象调试器工具访问回调例程。
4.  删除 callback.jsp 以简单地返回对 payment_get_items POST 的预设响应。
5.  Heroku 路由器收到状态为 200 的 POST，但在 Heroku 日志中未收到 callback.jsp 中的 console.log 输出。
6.  对 payment_get_items 的响应是：

> "{\"content\":[{\"title\":\"我的应用\",\"description\":\"这是我的应用。\",\"price\":2,\"product_url \":\"http://www.facebook.com/images/gifts/21.png\",\"image_url\":\"http://www.facebook.com/images/gifts/21.png \"}],\"方法\":\"payments_get_items\"}"

Facebook Credit 文档指出，发出应用程序服务器请求以响应购买请求。我是否需要实现一个 Servlet 来处理 POST 并将其传递给我的回调例程？Facebook 如何使用回调例程的名称，`callback.jsp`？Servlet 是否需要命名为 Callback？

这是我的客户`buy()`例程的片段：

```
// The dialog only opens if you've implemented the
// Credits Callback payments_get_items.
function buy() {
  var obj = {
    method: 'pay',
    action: 'buy_item',
    // You can pass any string, but your payments_get_items must
    // be able to process and respond to this data.
    order_info: {'item_id': '1a1'},
    dev_purchase_params: {'oscif': true}
  };

  FB.ui(obj, js_callback);
} 
```

这是我的 callback.jsp 代码：

```
<script type="text/javascript">

var secret = 'xxxxxxxxxxxxxxxxxxxxx';

console.log("In fnf callback.jsp");

//$request_type = $_POST['method'];
// Setup response.
var return_data = '';

var item = {
  title: 'My App',
  description: 'This is my app.',
  price: 2,
  product_url: 'http:\/\/www.facebook.com\/images\/gifts\/21.png',
  image_url: 'http:\/\/www.facebook.com\/images\/gifts\/21.png'
};

var content_array = new Array;
content_array[0] = item;

// Construct response.
var response = {
   content: content_array,
   method: 'payments_get_items'
};

// Response must be JSON encoded.
return_data = JSON.stringify(response);

// Send response.
alert(return_data);

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:04:04.453

我需要实现一个 Servlet 来处理从 Facebook 收到的积分回调 POSTS。我在启动目录的 Main.java 例程中创建了一个 Servlet。在 Main.java 中，我添加了一个上下文 addServletMapping 来将所有回调 POST 请求发送到 Servlet。context.addServletMapping 的第一个 agument 匹配在您的应用的 Credits Settings 中输入的 Credits Callback URL 中最后一个分隔符之后的文本。因此，servlet 不需要命名为 Callback。

总之，Facebook 通过 HTTP 将积分回调 POSTS 发送到回调 URL。作为开发人员，您需要创建一个 Servlet 并执行以下操作之一：

1.  将回调 POSTS 映射到 Servlet 并在 Java 中的 Servlet 中进行处理。Credits 回调 URL 是附加到您的应用程序 URL 的唯一文本字符串。
2.  创建一个 web.xml 文件，在其中将 Servlet 映射到 callback.jsp 文件。Credits Callback URL 是附加到您的 URL 的 callback.jsp 文件。

# excel - 非常慢的宏，没有它更快？

> ID：11092153
> 
> 赞同：0
> 
> 时间：2012-06-18T22:44:30.117
> 
> 标签：excel, csv, vba

我在寻找我的问题的答案时发现了这个论坛。我发现这里发布的解决方案：

[如何将每个工作表保存在 Excel 2010 工作簿中以使用宏分隔 CSV 文件？](https://stackoverflow.com/questions/9851397/how-do-i-save-each-sheet-in-an-excel-2010-workbook-to-separate-csv-files-with-a)

我很抱歉没有评论那篇文章，但我找不到这样做的选项。所以，我发布这个问题。

我没有使用 zip 功能，只是创建了 CSV 文件并排除了一些工作表。如您所见，我也在做一些查找/替换功能和刷新数据。

它运行良好，但运行时间很长（1-1/2 小时）。如果我去掉保存功能，手动保存每张表，几分钟就可以完成。

是什么让它陷入困境？

下面的代码（抱歉格式不好）

```
Sub Worksheet_Macro()
' Category_Trail Macro
' Macro breaks category trail down into individual categories. TO BE USED ONLY IN THE "WORKSHEET" SHEET
'

'

 Dim ws As Worksheet
 Dim strMain As String
 Dim lngCalc As Long

 strMain = "C:\Users\David Cox\Documents\TotalOutdoorsman\Site\Inventory\Daily Upload Files\"

' Turn off calculations
 With Application
    .DisplayAlerts = False
    .ScreenUpdating = False
    lngCalc = .Calculation
    .Calculation = xlCalculationManual
 End With

'Update all Data

    ActiveWorkbook.RefreshAll

'Copy and Paste Categories and create trail

    Sheets("Worksheet").Select
    Range("Ah2:Ah20000").Select
    Selection.Copy
    Range("Ai2").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    Selection.TextToColumns Destination:=Range("Ai2"), DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=False, Comma:=False, Space:=False, Other:=True, OtherChar _
        :="/", FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1)), _
        TrailingMinusNumbers:=True

' Clean_Description Macro
' Macro copies and pastes product descriptions to new column and then cleans them of HTML code.
'
'
    Range("AO2:AO20000").Select
    Selection.Copy
    Range("AP2").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    Columns("AP:AP").Select
    Selection.Replace What:="<br>", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    Selection.Replace What:="</br>", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

' Remove Appostrophies Macro
    Sheets("RSR Inventory").Select
    Columns("L:L").Select
    Range("L5743").Activate
    Selection.Replace What:="'", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    Sheets("Valor Inventory").Select
    ActiveWindow.LargeScroll ToRight:=-1
    Columns("C:C").Select
    Selection.Replace What:="'", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

' Go back to Main Product Page
    Sheets("MainProductPage").Select

'Turn Calculations back on
With Application
    .DisplayAlerts = True
    .ScreenUpdating = True
    .Calculation = lngCalc
End With

'Save before creating CSV Files
ThisWorkbook.Save

' Turn off calculations
 With Application
    .DisplayAlerts = False
    .ScreenUpdating = False
    lngCalc = .Calculation
    .Calculation = xlCalculationManual
 End With

'Save all CSV files
For Each ws In ActiveWorkbook.Worksheets
    Select Case ws.Name
    Case "Imported Product Data", "Sheet 2", "Sheet 3"
    'do nothing for these sheets
    Case Else
    ws.SaveAs strMain & ws.Name, xlCSV
    End Select
Next

'Turn Calculations back on
 With Application
    .DisplayAlerts = True
    .ScreenUpdating = True
    .Calculation = lngCalc
 End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:58:17.483

试试这个代码（未经测试）

我有

1.  删除了许多不必要的代码，例如`.Select`,`.LargeScroll`以及使您的宏变慢的事件。

2.  我已经介绍了错误处理，这是您调整时必须的`Application Settings`

试一试，让我知道现在是否有任何不同。

```
Sub Worksheet_Macro()
    Dim ws As Worksheet
    Dim strMain As String
    Dim lngCalc As Long

    On Error GoTo Whoa

    strMain = "C:\Users\David Cox\Documents\TotalOutdoorsman\Site\Inventory\Daily Upload Files\"

    With Application
        .DisplayAlerts = False
        .ScreenUpdating = False
        lngCalc = .Calculation
        .Calculation = xlCalculationManual
    End With

    With Sheets("Worksheet")
        .Range("AH2:AH20000").Copy
        With .Range("AI2")
            .PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, _
            SkipBlanks:=False, Transpose:=False

            .TextToColumns Destination:=.Range("AI2"), DataType:=xlDelimited, _
            TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
            Semicolon:=False, Comma:=False, Space:=False, Other:=True, OtherChar _
            :="/", FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1)), _
            TrailingMinusNumbers:=True
        End With

        .Range("AO2:AO20000").Copy

        .Range("AP2").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, _
        SkipBlanks:=False, Transpose:=False

        With .Columns("AP:AP")
            .Replace What:="<br>", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False

            .Replace What:="</br>", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        End With
     End With

    With Sheets("RSR Inventory")
        .Columns("L:L").Replace What:="'", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    End With

    With Sheets("Valor Inventory")
        .Columns("C:C").Replace What:="'", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    End With

    '~~> Save before creating CSV Files
    ThisWorkbook.Save

    '~~> Save all CSV files
    For Each ws In ThisWorkbook.Worksheets
        Select Case ws.Name
        Case "Imported Product Data", "Sheet 2", "Sheet 3"
            'do nothing for these sheets
        Case Else
            ws.SaveAs strMain & ws.Name, xlCSV
        End Select
    Next
LetsContinue:
     '~~> Reset Settings
     With Application
        .DisplayAlerts = True
        .ScreenUpdating = True
        .Calculation = lngCalc
        .CutCopyMode = False
     End With

     MsgBox "Done"
     Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:45:30.310

我知道了！我决定为每个 CSV 设置单独的 Excel 文件。这样可以更快地节省它们。总运行时间现在在 6 分钟范围内！！！这是我最终得到的结果：

```
Sub Worksheet_Macro()
' Category_Trail Macro
' Macro breaks category trail down into individual categories. TO BE USED ONLY IN THE "WORKSHEET" SHEET
'

'
Dim counter As Integer 'declare variable
Dim fname As String
Dim fname1 As String
Dim fileext As String
Dim csvfname As String
Dim directory As String

directory = "C:\Files\"

' Turn off visual feedback to speed up process
 With Application
    .DisplayAlerts = False
    .ScreenUpdating = False

 End With

'Update all Data

    ActiveWorkbook.RefreshAll

    Sheets("Worksheet").Select
    Range("Ah2:Ah15000").Select
    Selection.Copy
    Range("Ai2").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    Selection.TextToColumns Destination:=Range("Ai2"), DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=False, Comma:=False, Space:=False, Other:=True, OtherChar _
        :="/", FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1)), _
        TrailingMinusNumbers:=True

' Clean_Description Macro
' Macro copies and pastes product descriptions to new column and then cleans them of HTML code.
'
'
    Range("AO2:AO15000").Select
    Selection.Copy
    Range("AP2").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    Columns("AP:AP").Select
    Selection.Replace What:="<br>", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    Selection.Replace What:="</br>", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

' Remove Appostrophies Macro
    Sheets("RSR Inventory").Select
    Columns("L:L").Select
    Range("L5743").Activate
    Selection.Replace What:="'", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    Sheets("Valor Inventory").Select
    ActiveWindow.LargeScroll ToRight:=-1
    Columns("C:C").Select
    Selection.Replace What:="'", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

' Go back to Main Product Page
    Sheets("MainProductPage").Select

'Save all files

counter = 2 'initialize variable
Sheets("Save As Info").Select
Range("a2").Select '1st cell with file name

Do Until ActiveCell = "" 
    fname1 = Cells(counter, 1) 
    'this is set for column A
    filext = Cells(counter, 2) 
    fname = directory & fname1 & fileext 
    csvfname = directory & fname1 & "CSV.csv" 
    Workbooks.Open Filename:=fname 

    ActiveWorkbook.SaveAs Filename:=csvfname, FileFormat:=xlCSV, CreateBackup:=False
    'save as csv

    ActiveWorkbook.Close SaveChanges:=False 'close csv

    Windows("UpdateWorkbook.xlsm").Activate 'select workbook with file info
    Sheets("Save As Info").Select 'select sheet with file info

    counter = counter + 1
    ActiveCell.Offset(1, 0).Range("a1").Select 'This moves down the column

Loop

'Turn on visual feedback
With Application
    .DisplayAlerts = True
    .ScreenUpdating = True

End With

    ActiveWorkbook.Close SaveChanges:=False 'close Excel File

End Sub 
```

# installation - 是否有设置 Mamp Pro 的权威指南，以便本地网络用户可以查看/编辑站点？

> ID：11092154
> 
> 赞同：5
> 
> 时间：2012-06-18T22:44:43.433
> 
> 标签：installation, mamp, lan

我一直在研究如何设置 LAN Mamp Pro 服务器，以便本地用户可以编辑/查看站点 - 但似乎有很多困惑（至少我根据我阅读的原因感到困惑）。

具体问题：

**作为 www/mysql 运行 Apache/Mysql：**当我将用户切换到 www/mysql 时，我看到权限问题并且无法从运行 Mamp Pro 的机器登录到我的 CMS。修复此问题或运行 Mamp Pro 的最佳方法是什么 - 在使用 Git 和 Github 推送到 DEV 和 LIVE 服务器时考虑权限。

**端口：**使用端口 8888/8889 或默认端口 80/3306 运行 Mamp Pro 哪个更安全？查看站点时添加/不添加端口号的唯一区别是什么？

**同一 LAN 上的用户访问站点：**要使其正常工作的步骤是什么 - MAMP Pro 机器上的防火墙当前已关闭以测试基本设置，但我们本地网络上没有人可以连接到站点 - 已尝试**192.168 .0.1:8888** &**虚拟主机名:8888**

抱歉，如果这很容易，但对于付费产品，Mamp Pro 的帮助和支持非常稀缺，如果您知道如何设置 linux 服务器，我怀疑这些东西很容易 - 但如果您不知道如何执行此操作，这就是为什么您购买 MAMP Pro 对吗？

任何帮助将非常感激。

干杯

本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T00:10:14.330

这是我所做的：

**设置：**

*   我正在本地计算机上开发网站

*   Mamp Pro 正在我的本地计算机上运行

*   我希望本地网络上的其他人在我的计算机上登录 CMS 并更新 CMS

**服务器设置：**

*   使用默认端口`80/3306`（只是没有在 OSX 首选项中打开网络共享） - 如果你愿意，我相信你可以使用 MAMP 端口

*   以用户身份运行`Apache/MySQL`服务器`www/mysql`

**虚拟主机设置：**

*   给你的服务器起个名字

*   保留本地名称解析

*   添加运行 Mamp Pro 的计算机的 IP 地址，例如`192.167.1.1`

*   添加一个端口号（这将是识别 LAN 上站点的唯一方式 - 更多信息请参见下文）我刚刚使用了端口`8888`

*   如果您在切换 Apache/MySQL 用户之前进行了站点设置，请单击磁盘位置下的“权限”按钮并将所有者设置为 www，将组设置为管理员，以便您的本地管理员帐户可以访问 - 单击“设置”

*   如果上述步骤无法正常工作，您现在需要 CMD + I 网站目录并确保您的本地计算机管理员有权读取和写入该目录 - 请务必单击 cog 并选择“应用到随附items”，因此权限将应用于里面的目录

*   启动虚拟主机

**从同一 LAN 上的另一台计算机访问该站点：**

*   输入 Mamp Pro 机器的 IP 地址，然后输入您输入的端口号

*   例如`http://192.168.1.1:8888/`

*   如果您有多个站点，只需在设置中输入不同的端口号

这对我有用，工作人员现在可以编辑 CMS 并查看该站点，但对我来说，为每个站点使用不同的端口作为区分开发中站点的方式似乎有点“hacky”。

如果有更好的方法，请大声说出来——这就是我让它工作的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T01:31:08.040

我有许多使用 MAMP Pro 设置的站点。

要访问特定站点，请尝试将其移动到**MAMP Pro 中站点列表的顶部**，然后使用 IP 地址和端口（如上所述）进行访问，

```
e.g. http://192.168.1.1:8888/ 
```

杰夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:43:41.850

我遇到了问题“PHP 警告：...：无法打开流：第 17 行 /Applications/MAMP/htdocs/Samples/ch17/upload_01.php 中的权限被拒绝”。您建议的“虚拟主机设置”也适用于此！谢谢~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T02:15:22.653

“同一局域网上的用户访问网站...”

更通用的解决方案是使用 Squid 运行代理服务器。SquidMan ( [http://squidman.net/squidman/](http://squidman.net/squidman/) ) 是一个用于设置 Squid 的不错的图形前端，但是要做你想做的事情，你不需要做的只是在“客户端”下设置你的本地网络并将运行它的机器识别为您的网络服务器中的代理...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-06T07:28:19.243

这里的其他人的 DHCP 设置可能从 192.168 开始......但我的 Comcast 设置实际上默认为 10.0.0......这让我非常伤心，因为 MAMP 不喜欢主机 IP 地址中的零。您需要进入路由器并将默认网关更改为其他内容。然后，您将能够通过指定端口号来访问您的每个托管站点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-09T13:51:23.850

如果你想通过局域网访问你的 mamp 网站，其中有相应的域名而不是 IP 地址或端口，你可以通过简单地在你的 mac 上编辑 hosts 文件来做到这一点。

或使用[https://www.macupdate.com/app/mac/40003/hosts 之类的工具](https://www.macupdate.com/app/mac/40003/hosts)

将所有域指向 MAMP 主机的 IP，并将 mamp Web 服务放在端口 80。

使用 www.domain.dev 或类似的域名。

# c# - 在 linq 查询中使用包含来自另一个查询的结果时出错

> ID：11092155
> 
> 赞同：0
> 
> 时间：2012-06-18T22:44:47.070
> 
> 标签：c#, linq

在第一个查询中，我查询一个 ID 的步骤列表。在下一个查询中，我检查该查询是否包含来自新查询和 C_S_Is_Button 的 ID。但我在下面得到这个错误。我在这个网站上看到过类似的问题，但我还没有弄清楚如何解决我的问题。

错误：

> 无法从用法中推断方法“System.Linq.Enumerable.Contains(System.Collections.Generic.IEnumerable, TSource)”的类型参数。尝试明确指定类型参数。

第一次查询

```
var QcheckA = from csd in l.LCSDatas
                join cls in l.LCSteps on csd.C_S_ID equals cls.C_S_ID
                join cde in lol.LCDefinitions on csd.C_S_ID equals cde.C_S_ID
                where csd.A_ID == _AID && cde.C_ID == data.C_ID
                select new 
                {
                    csd.C_S_ID
                }; 
```

C 步骤。查找未单击按钮的最低步骤。

```
var QSID = (from cd in l.LCDefinitions
               join cs in l.LCSteps on cd.C_S_ID equals cs.C_S_ID                           
               where cs.C_S_Is_Button == true
                  && cd.C_ID == data.C_ID                              
                  && !QcheckA.Contains(cd.C_S_ID) //Error Here
               orderby cd.C_S_Order ascending
               select new
               {
                   cd.C_S_ID
               }).Take(1);

var SID = QSID.SingleOrDefault(); 
```

对这种情况有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:09:18.867

您在第一个查询中创建了一个匿名类型，然后在第二个查询中您试图将匿名类类型与基本类型（如 an`int`或 a ）进行比较`Guid`。

在您的第一个查询中尝试更明确（将其转换为确切的类型，我假设`int`但您可能正在使用 a `Guid`）：

```
select new  
{ 
    ID = (int)csd.C_S_ID 
}; 
```

然后，在您的第二个查询中，创建另一个匿名类型，就像第一个明确说明它包含的属性类型一样：

```
&& !QcheckA.Contains(new { ID = (int)cd.C_S_ID} ) 
```

# xml - Spring XML 初始化顺序

> ID：11092164
> 
> 赞同：0
> 
> 时间：2012-06-18T22:45:40.593
> 
> 标签：xml, spring, configuration, autowired

有人可以解释 Spring xml 配置文件中 bean 的初始化顺序吗？在某些情况下，它似乎取决于订单，但我找不到任何表明这一点的文件。使用单个配置文件时，bean 顺序似乎是独立的。但是，如果在父配置中覆盖 bean，则顺序可能很重要。我需要做额外的测试来确认究竟是什么情况导致了这个失败。我正在使用 Spring 3.0.5 并使用配置文件通过模拟实现覆盖我的生产代码中的 bean。bean 被自动装配到服务中，并且模拟对象是需要覆盖的原因。对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:37:26.137

顺序有时很重要，我可以想到这些情况：

1.  稍后定义的具有完全相同名称的 bean 会覆盖之前定义的 bean - 因此，如果您有一些 bean 的模拟，只需在核心应用程序 bean 加载后定义它。
2.  BeanFactoryPostProcessors 和 BeanPostProcessors 基于它们的定义位置或基于`order`属性（如果存在）进行处理。
3.  AOP 建议是根据`order`属性执行的。

第一点似乎涵盖了您的情况，但我只是为了完整性指定了其他人，但其他 SO 用户可以添加的内容肯定更多。

# javascript - JSON数组在POST后导致额外的括号

> ID：11092169
> 
> 赞同：0
> 
> 时间：2012-06-18T22:46:06.860
> 
> 标签：javascript, jquery, arrays, json, post

我正在 freemarker 中编写一个函数来遍历所有选中的复选框，然后在同一个表单上重新填充相同的响应。表单是 freemarker 格式，我正在使用 JS 为每个包含复选框的类别创建一个单独的数组。代码如下：

HTML：

```
<input type="checkbox" class="checkBox" value="United Kingdom" name="holidays" />
<input type="checkbox" class="checkBox" value="Australia" name="holidays" />
<input type="checkbox" class="checkBox" value="United States" name="holidays" />
<input type="checkbox" class="checkBox" value="Asia" name="holidays" />

<input type="checkbox" class="checkBox" value="United Kingdom" name="flights" />
<input type="checkbox" class="checkBox" value="Australia" name="flights" />
<input type="checkbox" class="checkBox" value="United States" name="flights" />
<input type="checkbox" class="checkBox" value="Asia" name="flights" /> 
```

JS：

```
 var extraObjs = {};
    if(validated) {
    $(formRef).find('input[type=text],input[type=password]').each(function() {
        var obj = $(this);
        extraObjs[obj.attr('name')] = obj.val();
    });

    $(formRef).find('input[type=radio]:checked, input[type=checkbox]:checked').each(function() {
        var obj = $(this);

        if(obj.is('[type="checkbox"]')) {
            if(typeof extraObjs[obj.attr('name')] !== 'object') {
                extraObjs[obj.attr('name')] = [];
            }
            extraObjs[obj.attr('name')].push(obj.val());
        } else {
            extraObjs[obj.attr('name')] = obj.val();
        }

    });
    return extraObjs;
} else {
    return false;
} 
```

问题是当信息通过 POST 发送时，显示的结果是：

```
flights[] ["United Kingdom", "Asia"]
holidays[] ["United Kingdom", "Asia"] 
```

似乎多余的括号引起了问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:56:41.657

如果你尝试，你能看到你是否得到想要的结果

```
return JSON.stringify(extraObjs); 
```

# mysql - Joomla URL 搜索数据库并显示表格？

> ID：11092176
> 
> 赞同：1
> 
> 时间：2012-06-18T22:47:16.410
> 
> 标签：mysql, google-maps, url, joomla

我想知道这是否可能并且有一种简单的实施方式。场景：

我们正在更新我们的网站以使用 Joomla CMS。旧网站的数据库中有一个巨大的表格，其中包含数百家商店的信息（营业时间、位置、员工等）。我们可以将此表转移到新的 Joomla MySQL 数据库中。我们还有一个带有大约一千个图钉的谷歌地图（每个图钉对应每个商店的位置）。我们想在每个 pin 的描述中添加一个链接，该链接将带您进入显示数据库中商店信息的页面。

我发现了一个 Joomla 扩展，它可以使用电子表格并为每一行创建一篇新文章，所以我所要做的就是将表格导出为电子表格并将其上传到 Joomla。然后每个商店都会有自己的网页。问题在于，Google Map pin 的人必须在 Joomla 网站上搜索每个商店页面并将链接复制粘贴到 pin 上（有数百个，因此不仅需要几天时间，而且我们还会创建数百个帖子）。

我在想一种可能性是，如果 Google Map pin 的人为每个商店 pin 创建一个 URL。此 URL 将查询数据库并显示信息。例如：[http](http://mysite.com/stores?name=mcdonalds&state=california&country=usa) ://mysite.com/stores?name=mcdonalds&state=california&country=usa 。这将在数​​据库中找到特定的行并创建一个显示该行信息（商店名称、营业时间、位置、经理姓名等）的页面。我们将如何做到这一点？

有没有更简单的方法来实现这一点，你们能想到吗？无论如何，在我看来，谷歌地图的人将花费数小时复制链接或创建链接。也许有某种方法可以将数据库中的数据导入谷歌地图图钉，从而无需创建新的商店网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:08:25.200

您应该考虑构建自己的组件。本质上，您需要的只是 /components/com_yourcomponent/yourcomponent.php 下自己的文件夹中的 php 文件

只要您在 url 中传递 option=com_yourcomponent 以及您在示例中提供的其他参数，就会调用该文件中的代码。

然后，您或您的程序员只需要查询您的数据库表，检索与传入参数匹配的结果，格式化输出并将其回显到页面中。

Joomla 几乎负责其余的工作。

当然，您可以变得更复杂并遵循 MVC 模式并添加各种额外的复杂性 - 但您当然不必这样做。

我建议阅读适合您特定版本的 Joomla 的 Joomla 文档，并参考构建一个简单的组件。

# c# - 对象为空时，Json.net 反序列化失败

> ID：11092181
> 
> 赞同：1
> 
> 时间：2012-06-18T22:47:58.317
> 
> 标签：c#, json, json.net

当我的 JSON 字符串包含一个需要字符串的空对象值时，Json.net 反序列化失败。

```
 public class MyObj
{
    public Labels labels { get; set; }
    public Type type { get; set; }
    public int value { get; set; }
    [JsonConverter(typeof(SliderTextConverter))]
    public string text { get; set; }
} 
```

有时“文本”等于源 JSON 字符串“{}”中的空对象。JSON.net 反序列化器似乎因此而爆炸。所以我试图创建一个自定义的 JsonConverter 来解决这个问题。

```
 public class SliderTextConverter : JsonConverter 
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        if(reader.Value == null)
        {
            return null;
        }
        return serializer.Deserialize<string>(reader);
    }

    public override bool CanConvert(Type objectType)
    {
        return true;
    }
} 
```

我正在检查该值是否为空，然后只返回“空”这不起作用。我也尝试过返回“”。两者都导致相同的错误：

> 反序列化对象时出现意外令牌：EndObject。路径'data.MyObj[5].text;

在我的源 json 中忽略/处理这些空对象的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:54:27.813

Json.NET 上的这篇文章似乎引用了同样的问题：http: [//james.newtonking.com/archive/2012/04/11/json-net-4-5-release-2-serializable-support-and-bug -fixes.aspx](http://james.newtonking.com/archive/2012/04/11/json-net-4-5-release-2-serializable-support-and-bug-fixes.aspx "Json.NET 4.5 Release 2 – 可序列化支持和错误修复")

```
Changes:    
    Fix - Fixed deserializing a null string throwing a NullReferenceException 
```

# javascript - 在 Javascript 字符串中显示 HTML 代码

> ID：11092182
> 
> 赞同：3
> 
> 时间：2012-06-18T22:48:06.453
> 
> 标签：javascript, html

我希望标题能解释我想要实现的目标。如果没有，请继续阅读！

我目前正在编写 Lorem Ipsum 生成器（作为学习经验，尽管我可能在我的 S&G 网站上有它）

到目前为止，我已经设法让代码从列表中输出一个随机句子到文本框中。我还创建了一个用于创建 Lorem Ipsum 项目符号列表的生成器。每当有人通过该工具生成一些文本时，我希望有一个带有格式化文本（段落、项目符号等）的框，然后是另一个带有原始 HTML 代码的框，这样设计人员可以直接将代码复制并粘贴到他们的编码程序。到目前为止，我已经整理出了格式化的文本框，但我遇到了原始 HTML 的问题。

这是我到目前为止所得到的：

[显然开头有一个 var listArray，但我不会费心添加它。]

```
var randomList = listArray[(Math.floor(Math.random() *listArray.length))]

document.getElementById("textarea").innerHTML = "<li>" + (randomList) + "</li>" + "<li>" + (randomList) + "</li>" + "<li>" + (randomList) + "</li>";
document.getElementById("textarea-code").innerHTML = "<li>" + randomList + "</li>" + "<li>" + randomList + "</li>" + "<li>" + randomList + "</li>";} 
```

第二行 innerHTML 只是第一行的副本，是我想要处理的行。

如何让第二行输出：

```
<li> Line 1 </li>
<li>li Line 2 </li> 
```

放入 HTML 文本框中，而不是将列表项放入项目符号点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:52:50.310

对于第二行，使用`innerText`not`innerHTML`

```
document.getElementById("textarea-code").innerText = 'your html code' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T22:52:30.537

我解决了！:D

对于那些感兴趣的人，我对组成 <、/ 和 > 所需的每个字符都使用了 ASCII 代码。

例如： <li> 是

```
&#60;li&#62; 
```

希望对其他人有所帮助！

# iphone - UIScrollView 中的 UITabController

> ID：11092183
> 
> 赞同：0
> 
> 时间：2012-06-18T22:48:12.417
> 
> 标签：iphone, objective-c, ios

我通过故事板创建了带有隐藏默认栏的自定义实现（简单按钮和标签）的选项卡控制器。这一切都按预期工作，并且可以浏览各种视图。然而，在我的几个视图中，我需要使用 UIScrollView 但希望标签栏控件移动到滚动视图的底部，您必须滚动到底部才能访问它们。我将如何实现这样的配置？我正在使用 XCode 4.3、ARC 和 Storyboards。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:07:43.867

@MichaelFrederick 为您的问题提供了正确的*技术*答案。我现在要给你一些更高层次的*设计*反馈。

**请不要这样做。**

你所描述的听起来令人难以置信的混乱。的一个目的`UITabBar`是向用户提供有关他们所处“模式”的上下文。通过隐藏它，您拒绝用户获得此上下文信息。

这也意味着，如果用户想要快速切换模式（选项卡），您将强制他们滚动。

如果您绝对需要滚动视图的最大屏幕空间（例如，大图像），请考虑使用模态视图控制器。这为您提供了您想要的东西，但这样做没有任何混乱的子类化、自定义选项卡（其行为总是不太正确）或可用性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:26:29.310

您必须创建自己的包含选项卡的 UIView 实现，并将其放在 UIScrollView 的底部。

UITabBarController 必须是窗口的根。换句话说，UITabBarController 内的 UIViewController 可以包含 UIScrollView，但不能将 UITabBarController 放在另一个 UIViewController 内（或 UIScrollView 内）。

从[UITabBarController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)：

> 部署选项卡栏界面时，您必须将此视图安装为窗口的根目录。与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:26:23.640

我完全同意康拉德的观点，迈克尔在所有方面都是正确的，除了我认为您不需要创建自己的自定义标签栏。您应该可以`UITabBar`直接使用而无需使用`UITabBarController`.

除了阅读文档之外，我不会再给你任何关于如何做到这一点的提示，因为康拉德是绝对正确的。**这是非常糟糕的设计。**

# xcode - 以编程方式，如何使用 push segue 使应用程序在首先到达屏幕时返回到先前的视图

> ID：11092184
> 
> 赞同：3
> 
> 时间：2012-06-18T22:48:26.397
> 
> 标签：xcode, view, back, segue

我正在创建一个应用程序，如果它无法加载网页，它会显示错误并返回到上一个屏幕。我很难让它返回到前一个屏幕。

我首先使用 push segue 让它进入屏幕。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T23:00:26.397

push segue 需要一个导航控制器，并且使用导航控制器，您可以使用 popViewControllerAnimated：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

尽管许多人会提倡使用委托来完成这样的事情（甚至可能使用模态而不是导航控制器）。

# c++ - 为什么以下无法在 Visual Studio 2010 C++ 下编译？

> ID：11092187
> 
> 赞同：-2
> 
> 时间：2012-06-18T22:48:50.703
> 
> 标签：c++, visual-studio-2010, visual-c++

```
// A simple program that computes the square root of a number
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
int main (int argc, char *argv[])
{
  if (argc < 2)
  {
    fprintf(stdout,"Usage: %s number\n",argv[0]);
    return 1;
  }

  double inputValue = atof(argv[1]);
  double outputValue = sqrt(inputValue);
  fprintf(stdout,"The square root of %g is %g\n",
          inputValue, outputValue);
  return 0;
} 
```

我收到以下错误

错误 1 ​​错误 C2143：语法错误：缺少 ';' 在“类型”之前
错误 2 错误 C2143：语法错误：缺少“；” 在“类型”之前 错误 3 错误 C2065：“输入值”：未声明的标识符
错误 4 错误 C2065：“输出值”：未声明的标识符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:54:55.213

如果您将文件命名为 .cpp，它应该可以正常编译和运行。

但是，如果您将文件命名为 .c，它将失败。

原因是您需要在 C 函数的顶部声明所有变量；您不能在使用时声明它们。

# python - 从只有网站 url 的元标记和 img url 中提取值。用python为django应用程序编写

> ID：11092192
> 
> 赞同：2
> 
> 时间：2012-06-18T22:49:43.673
> 
> 标签：python, django, meta-tags

我想知道如何在 python 中编写它并将其连接到 django 应用程序。我的意思是从只有网站 url 的元标记和 img url 中提取值。与用户粘贴链接时的 facebook 相同。

[从外部网站获取标题和元标记](https://stackoverflow.com/questions/3711357/get-title-and-meta-tags-of-external-site)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T04:12:15.540

[就个人而言，我会选择使用非常好的Requests](http://docs.python-requests.org/en/latest/index.html)、[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)和[LXML](http://lxml.de/)库来解决这个问题。

假设我们在 中有以下模型`models.py`，我们可以重写`save()`方法来填充`title`、`description`和`keywords`属性：

```
from bs4 import BeautifulSoup
import requests

from django.db import models

class Link(models.Model):
    url = models.URLField(blank=True)
    title = models.CharField(max_length=20, blank=True)
    description = models.TextField(blank=True)
    keywords = models.TextField(blank=True)

    def save(self, *args, **kwargs):
        if self.url and not (self.title or self.keywords or self.description):
            # optionally, use 'html' instead of 'lxml' if you don't have lxml installed
            soup = BeatifulSoup(requests.get(self.url).content, "lxml")
            self.title = soup.title.string
            meta = soup.find_all('meta')
            for tag in meta:
                if 'name' in tag.attrs and tag.attrs['name'].lower() in ['description', 'keywords']:
                    setattr(self, tag.attrs['name'].lower(), tag.attrs['content'])

        super(Link, self).save(*args, **kwargs) 
```

被覆盖`save()`方法的逻辑可以很好地存在于视图或实用程序函数中，甚至可以存在于`Link`模型上可以有条件地调用的另一个方法中。

以上适用于 Django 1.4。不能保证，但它也应该适用于早期版本。

编辑：修复语法错误并提及替代解析器，感谢[@jinesh](https://stackoverflow.com/users/846193/jinesh)和[@stonefury](https://stackoverflow.com/users/2286754/stonefury)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:38:35.890

jnovinger 的答案在 Django 1.5 中基本上对我有用，但我必须进行一些调整。首先，代码本身似乎有一个错字。线

```
soup = BeatifulSoup(requests.get(self.url).contents, "lxml") 
```

提出`AttributeError: 'Response' object has no attribute 'contents'`。根据 Requests 文档，我相信正确的属性是`requests.get(self.url).content`，虽然`requests.get().text`似乎也可以工作。

在将它放入我的 Django 项目之前，我首先尝试在一个简单的脚本中实现它，在这种情况下，我还收到以下错误：

```
requests.exceptions.MissingSchema: Invalid URL u'www.example.com/': No schema supplied 
```

这是由于天真地不包括`http://`在 url 之前。在 Django 中，这是自动完成的，但我会提到这一点，以防其他初学者犯同样的错误并且不理解“缺少模式”的含义。

我遇到的最后一个问题是由于缺乏对内容长度的验证。当检查的链接产生的标题、关键字或详细信息字段超过模型中字段对象的限制（max_length 参数）时，这会在尝试保存新链接时导致 DatabaseErrors。

```
DatabaseError: value too long for type character varying(20) 
```

这是我的粗略修复；可能有更好的方法，但这似乎有效。

```
from bs4 import BeautifulSoup
import requests

from django.db import models

class Link(models.Model):
    url = models.URLField(blank=True)
    title = models.CharField(max_length=100, blank=True)
    description = models.TextField(blank=True)
    keywords = models.TextField(blank=True)

    def save(self, *args, **kwargs):
        if self.url and not (self.title or self.keywords or self.description):
            soup = BeautifulSoup(requests.get(self.url).content, "lxml")
            limit = self._meta.get_field('title').max_length    # check field max_length
            self.title = soup.title.string[:limit]              # limit title to max_length
            meta = soup.find_all('meta')
            for tag in meta:
                if 'name' in tag.attrs and tag.attrs['name'].lower() in ['description', 'keywords']:
                    field = tag.attrs['name'].lower()                   # check whether description or keywords
                    limit = self._meta.get_field(field).max_length      # check field max_length
                    content = tag.attrs['content'][:limit]              # limit field to max_length
                    setattr(self, tag.attrs['name'].lower(), content)

        super(Link, self).save(*args, **kwargs) 
```

请注意，这只会在单词中间切断标题、描述和关键字列表，而不是在最后一个完整的单词处停止，因此您最终可能会得到无意义的单词片段。

# entity-framework - .Net Web API - 实体框架 - 在序列化期间忽略关系

> ID：11092193
> 
> 赞同：4
> 
> 时间：2012-06-18T22:50:01.640
> 
> 标签：entity-framework, asp.net-web-api

我正在创建一个 ASP.Net Web API 来公开现有数据库以供手持设备使用。我在 Web API、EF 以及我试图在这个项目中使用的所有其他方面也相对较新 :)

我希望生成的数据传输尽可能轻量级，但是当 api 返回一个对象时，序列化的 JSON 具有自身的“EntityKey”字段以及该对象与之有关系的其他表中的行。

我现在尝试使用 ADO.NET DbContext 模板生成器来生成模型代码。这摆脱了 EntityKey 字段，但我仍然在 JSON 中显示了关系。

我想要的只是对象中要序列化的字段，并且能够将 JSON 反序列化到这些对象中以进行插入和更新。有没有内置的方法可以做到这一点？

我最好的选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:53:43.377

在您的返回值中“选择”一种新类型

```
return ienumfromedmx.Select(o=> new { id = id, value = value, name = name}); 
```

这些是您要返回的值

如果您发布一些示例代码，可能更容易为您提供更相关的代码示例

使用你的书

```
public Book GetBook(int id) { return books.SingleOrDefault(b => b.Id == id);} 
```

改成

```
public dynamic GetBook(int id){
return books.SingleOrDefault(b=>b.id == id).Select(new { id = id, Title  = Title, price = Price});
} 
```

或者

```
public object GetBook(int id){
return books.SingleOrDefault(b=>b.id == id).Select(new { id = id, Title  = Title, price = Price});
} 
```

或（仅供参考 - 我会为 api 使用动态或对象而不是 JsonResult）

```
public JsonResult GetBook(int id){
return Json(books.SingleOrDefault(b=>b.id == id).Select(new { id = id, Title  = Title, price = Price}));
} 
```

请注意，如果您正在使用

```
public JsonResult GetBook(int id){
return Json(books.SingleOrDefault(b=>b.id == id).Select(new { id = id, Title  = Title, price = Price}));
} 
```

如果您使用的是 httpget 而不是 post，那么您需要使用

```
public JsonResult GetBook(int id){
return Json(books.SingleOrDefault(b=>b.id == id).Select(new { id = id, Title  = Title, price = Price},JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:59:08.437

关闭延迟加载，除非您通过`Include`调用显式加载它们，否则您的方法将不会返回关系：

```
dbContext.Configuration.LazyLoadingEnabled = false;
// now load your data and return them to serialization 
```

# android - 是三星galaxy nexus hdpi还是xhdpi

> ID：11092195
> 
> 赞同：2
> 
> 时间：2012-06-18T22:50:21.200
> 
> 标签：android, drawable, hdpi

我将图像放在 drawable-xhdpi 文件夹中，galaxy nexus 没有拾取它。

Galaxy nexus 是 HDPI 还是 XHDPI？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T22:52:46.553

肯定是 XHDPI（我有一个）。我使用 drawable-xhdpi 文件夹没有问题。您是否有其他资源，可能在 drawable-nodpi 文件夹或其他地方？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:42:01.387

我知道这是一篇旧帖子，但我只是通过刷新结构中的“res”文件夹来解决这个问题。右键单击“res”文件夹并单击刷新。

# c# - ASP.NET MVC 架构服务层等 HttpContext 感知逻辑可以去哪里？

> ID：11092196
> 
> 赞同：2
> 
> 时间：2012-06-18T22:50:34.537
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, architecture

我还有另一个 ASP.NET MVC 体系结构问题，我正在慢慢到达那里并将位拼凑在一起，但仍有一些缺失的链接我正在尝试解决。我目前的项目结构如下，我对此很满意（尽管任何建设性的意见都会很棒），我还没有使用 IoC/DI，但会在某个时候，现在只是更大的鱼要炒！！。

我的问题是我在 AppName.Core.Services 命名空间中有域级业务逻辑，这很棒，但我有一些逻辑需要与 HttpContext 交互，后者检查应用程序缓存等中的内容。一个非常简单的示例是一些代码，例如这个：

```
public int? GetCurrentClientId()
{
    int clientId = null;

    if (HttpContext.Current.Application["ClientId"] != null)
    {
        // Use value from application cache if one exists
        clientId = (int)HttpContext.Current.Application["ClientId"];
    }
    else
    {
        // Lookup using host name of site we are browsing
        string hostName = HttpContext.Current.Request.UserHostName.ToLower();
        UnitOfWork _unitOfWork = new UnitOfWork();
        Client client = _unitOfWork.ClientRepository.GetSingle(x => x.HostName.ToLower() == hostName || x.LocalHostNames.ToLower().Contains(hostName));
        if (client != null) clientId = client.Id;
    }
    return clientId;
} 
```

现在我不能将所有这些都粘贴在 AppName.Core.Services 中，因为它可以感知 HttpContext，所以我将其分解为以下代码，这些代码可以位于 AppName.Core.Services 中，但我不确定在哪里如果需要，我的逻辑会与 HttpContext 等交互以调用它。我不希望它在我的控制器中，但我现在想知道它的最佳位置，什么命名空间和约定等。

```
public int? GetClientIdFromHostName(string hostName)
{
    UnitOfWork _unitOfWork = new UnitOfWork();
    Client client = _unitOfWork.ClientRepository.GetSingle(x => x.HostName.ToLower() == hostName || x.LocalHostNames.ToLower().Contains(hostName));
    if (client != null) return client.Id;
    else return null;
} 
```

我之前对这个主题的研究，以及我在这里问过的一个问题，指向我从控制器访问我的所有服务......但是如果我的服务中不能有基于 HttpContext 的逻辑，它可以去哪里？

[ASP.NET MVC - 服务层，每个控制器动作中的单个或多个服务？](https://stackoverflow.com/questions/10905992/asp-net-mvc-service-layer-single-or-many-services-in-each-controller-action)

项目结构：

```
AppName.Core (for all my domain objects, DAL, domain services etc... independant and not aware of web specifics HttpContext etc)
> Data
> Data > DataContext.cs
> Data > UnitOfWork.cs
> Entities
> Entities > User.cs
> Entities > Client.cs etc etc
> Migrations
> Migrations > (all the EF code first migrations bits)
> Repository
> Repository > UserRepository.cs
> Repository > ClientRepository.cs
> Repository > GenericRepository.cs etc etc
> Services
> Services > ClientService.cs etc etc

AppName.Web (for all my compiled HttpContext aware code, ViewModels etc... references AppName.Core only)
> AutoMapper
> AutoMapper > Configuration.cs
> Controllers
> Controllers > UserController.cs
> Controllers > ClientController.cs etc etc
> Helpers
> Helpers > HtmlHelpers.cs
> ViewModels
> ViewModels > UserViewModel.cs
> ViewModels > ClientViewModel.cs etc etc

AppName (the ASP.NET MVC website project, no compiled code, Images/Css/JavaScripts etc... references AppName.Web only)
> Content
> Content > Images
> Content > Styles
> Scripts
> Views 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:08:40.140

如果您的服务是从您的 MVC 应用程序中实例化的，您可以考虑创建一个接口+包装器类并将该实例传递给您的服务。像这样的东西：

```
interface IContext
{
    int? ClientID { get; }
}

class ContextWrapper : IContext
{
    private IHttpContext Context { get; set; }

    public ContextWrapper (IHttpContext context)
    {
        Context = context;
    }

    int? ClientID 
    {
        get 
        {
             return Context.Current.Application["ClientId"] != null
                    ? (int?)HttpContext.Current.Application["ClientId"]
                    : null;
        }
    }
}

class YourService
{
    public YourService(IContext context)
    {
        // store the reference and use in your methods as needed
    }
} 
```

这使您可以不从您的服务类中直接依赖 System.Web。它还可以很好地设置您对它进行单元测试，因为它使用 IoC，并且可以通过构造函数注入轻松连接到 DI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:15:03.607

您可以创建一个类似这样的辅助方法：

```
public static TResult GetFromCacheOrSource<TResult>(string cacheIndex, Func<TResult> sourceMethod)
{
    TResult result = HttpContext.Current.Application[cacheIndex] as TResult;

    if (result == null)
    {
        // If there's no value in the cache go to the source
        result = sourceMethod();
    }     
    return result;
} 
```

在您的控制器中，您可以执行以下操作：

```
int? clientId = Helper.GetFromCacheOrSource<int?>("ClientId", () => clientService.GetClientIdFromHostname(hostname)); 
```

# couchbase - 如何在 mac 上编译 libcouchbase

> ID：11092197
> 
> 赞同：0
> 
> 时间：2012-06-18T22:50:48.153
> 
> 标签：couchbase

您好，我正在尝试编译 libcouchbase c 库[https://github.com/couchbase/libcouchbase](https://github.com/couchbase/libcouchbase) 所以我可以使用它在 php.ini 上调用 couchbase.so，这意味着在 nginx 上使用 couchbase 进行 php 我得到以下信息编译时出错。

`fatal: No names found, cannot describe anything. fatal: ambiguous argument 'HEAD': unknown revision or path not in the working tree. Use '--' to separate paths from revisions configure.ac:22: error: AC_INIT should be called with package and version arguments /opt/local/share/aclocal-1.11/init.m4:26: AM_INIT_AUTOMAKE is expanded from... configure.ac:22: the top level autom4te: /opt/local/bin/gm4 failed with exit status: 1 aclocal: /opt/local/bin/autom4te failed with exit status: 1 autoreconf: aclocal failed with exit status: 1`

 `请任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:46:59.700

我无法帮助您追踪您的编译问题，但您不必为了启动和运行而自己编译它。Couchbase 在这里正式为 OSX 提供二进制文件：http: [//www.couchbase.com/develop/php/current](http://www.couchbase.com/develop/php/current)`

# html - Opera 向右拖动 div

> ID：11092199
> 
> 赞同：3
> 
> 时间：2012-06-18T22:51:05.267
> 
> 标签：html, css

我在Opera中遇到了一个问题：将浏览器宽度扩大到一定量时，div从屏幕中间跳到右侧，靠近另一个div。Firefox 和 Chrome/Safari 运行良好，而 Opera 刚刚开始出现问题，然后才开始工作。

这是CSS代码

```
 root { 
    display: block;
}
body{
    margin: 0px;
}
.middle_frame{
    width: 600px;
    height: 600px;
    max-width: 600px;
    max-height: 600px;
    margin: auto;
} 
```

和 HTML 代码

```
<body>              
        <div class="middle_frame">
                <div class="plz_list" id="plz_div">
                     blabla
                </div>
        </div>
</body> 
```

加上一张之前/之后的照片:-)

![在我展开之前它应该如何以及如何](../Images/ad6831defe2469b81b6c6734f7306b1c.png)

![之后的样子](../Images/1e78ed6b41b95dc885eb1e5eefc80900.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:46:59.897

你为什么不尝试用 margin:auto 和 width:600 创建主 div；并保留整个网站？那时你会避免这些动作，即使是这样。

此外，您的问题可能是由顶部菜单中的 float:left 引起的，一旦您将浏览器展开到某个点，您就可以将 menu 和 middle_frame 放在彼此旁边，Opera 就是这样做的。

整个内容的额外 div 将修复它

# python - 从现有类自动生成 OCUnit 测试文件。

> ID：11092204
> 
> 赞同：1
> 
> 时间：2012-06-18T22:51:59.307
> 
> 标签：python, objective-c, xcode, clang, ocunit

我想问一下是否有一个流程或工具可以帮助我解析objective-c（Xcode）中的头文件和/或实现文件以隔离属性和方法名称，以帮助自动生成OCUnit Test头文件和实现文件.

我正在尝试对现有项目实施 OCUnit 测试，并希望自动创建我的 OCUnit 类和对预先存在的类进行测试。

在我的脑海中，我可以预见到以下过程：

1.  获取您想要为其创建 OCUnit 测试的类的头文件和实现文件。
2.  使用脚本语言或 LLVM 编译器来隔离合成的属性设置器和获取器并生成 OCUnit 测试。
3.  使用脚本语言或 LLVM 编译器来隔离类的方法并为它们创建 OCUnit 测试。
4.  在 Xcode 中为您正在测试的类单独创建一个目标。

对我来说，解析属性和隔离方法名称是最重要的。我不想在 python 中编写一个解析器来完成这个。也许 LLVM/Clang 中有一些命令可以用来提取类、属性和方法名称。从那里我可以使用 python 为我的 OCUnit 测试自动生成头文件和实现文件。还有其他想法吗？

# android - 程序响应真的很慢 [Google Api]

> ID：11092206
> 
> 赞同：1
> 
> 时间：2012-06-18T22:52:05.487
> 
> 标签：android, eclipse, web-services, google-maps

我是安卓编程新手，我正在尝试开发这个应用程序来调用安卓手机上的谷歌地图服务，然后访问一个网络服务来检索需要在地图上绘制的站点的纬度和经度值。

Foll 是代码，但是当我运行应用程序时，程序没有响应，它只绘制一个注释，而且平移和缩放事件也非常慢，有时代码会卡住。

请帮助解决问题。

```
OpenMap.java

public class OpenMap extends MapActivity 
{

private MapController mapController;
private MyLocationOverlay myLocation;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Get Mapping Controllers etc
    MapView mapView = (MapView) findViewById(R.id.map_view);
    mapController = mapView.getController();
    mapController.setZoom(1);
    mapView.setBuiltInZoomControls(true);

    // Add the MyLocationOverlay
    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);

    myLocation.enableMyLocation();

    DemoOverlay demoOverlay = new DemoOverlay();
    mapView.getOverlays().add(demoOverlay);
    myLocation.runOnFirstFix(new Runnable() {
        public void run() {
            mapController.animateTo(myLocation.getMyLocation());
        }
    });
}

@Override
protected void onResume() {
    super.onResume();
    myLocation.enableMyLocation();
}

@Override 
protected void onPause() {
    super.onPause();
    myLocation.disableMyLocation();
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

```
DemoOverlay.java

public class DemoOverlay extends Overlay
{
ArrayList<String> arrlat_long = new ArrayList<String>();
public static String str;
public static String str1;
String responseBody;
int n=0;
 String Url =   "http://hiscentral.cuahsi.org/webservices/hiscentral.asmx/GetSeriesCatalogForBox2";
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5); 
 HttpClient httpclient = new DefaultHttpClient();   
   @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow)
   {
        super.draw(canvas, mapView, shadow);
        Projection projection = mapView.getProjection();
         if(!Url.endsWith("?"))
         {
                Url += "?";
         }

            int latSpan = mapView.getLatitudeSpan();
            int lngSpan = mapView.getLongitudeSpan();
            GeoPoint mapCenter = mapView.getMapCenter();
            int mapLeftGeo = mapCenter.getLongitudeE6() - (lngSpan / 2);
            int mapRightGeo = mapCenter.getLongitudeE6() + (lngSpan / 2);

            int mapTopGeo = mapCenter.getLatitudeE6() - (latSpan / 2);
            int mapBottomGeo = mapCenter.getLatitudeE6() + (latSpan / 2);

            GeoPoint geoPoint = this.getSampleLocation();

         nameValuePairs.add(new BasicNameValuePair("xmin", "-100"));
         nameValuePairs.add(new BasicNameValuePair("xmax", "-90"));
         nameValuePairs.add(new BasicNameValuePair("ymin", "40"));
         nameValuePairs.add(new BasicNameValuePair("ymax", "55"));
         nameValuePairs.add(new BasicNameValuePair("networkIDs", ""));
         nameValuePairs.add(new BasicNameValuePair("conceptKeyword", "precipitation"));
         nameValuePairs.add(new BasicNameValuePair("beginDate", "1/1/2009"));
         nameValuePairs.add(new BasicNameValuePair("endDate", "1/1/2010"));
         String paramString = URLEncodedUtils.format(nameValuePairs, "utf-8");
         Url += paramString;

  if ((geoPoint.getLatitudeE6() > mapTopGeo && geoPoint.getLatitudeE6() < mapBottomGeo)
                 && (geoPoint.getLongitudeE6() > mapLeftGeo && geoPoint.getLongitudeE6() < mapRightGeo)) 
              {
                    geoPoint = arrlat_long(n);
                    Point myPoint = new Point();
                    projection.toPixels(geoPoint, myPoint);

                    Bitmap marker = BitmapFactory.decodeResource(mapView.getContext().getResources(), R.drawable.markerblue);

                    canvas.drawBitmap(marker, myPoint.x - 15, myPoint.y - 30, null);
                }

   }

private GeoPoint getSampleLocation() 
    {
       GeoPoint sampleGeoPoint;
      // int n=0;

       try {
              HttpPost httppost = new HttpPost(Url); 
              httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
              HttpResponse response = httpclient.execute(httppost);
              responseBody = EntityUtils.toString(response.getEntity());

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setValidating(false);
            XmlPullParser myxml = factory.newPullParser();
            InputStream raw = new ByteArrayInputStream(responseBody.getBytes());
            myxml.setInput(raw, null);

            int eventType = myxml.getEventType();
            while(eventType != XmlPullParser.END_DOCUMENT) 
            {
                if(eventType == XmlPullParser.START_DOCUMENT) 
                {

                    Log.d("ParseXmlActivity", "In start document");
                }
                else if(eventType == XmlPullParser.START_TAG) 
                {
                    if (myxml.getName().equals("latitude"))
                    {
                        str="";
                        str  += "Lat:" + myxml.nextText().toString();
                         Log.d("ParseXmlActivity", "In start tag = "+str);
                         arrlat_long.add(str);
                    }
                    if (myxml.getName().equals("longitude"))
                    {
                        str1 += "--Lon:" + myxml.nextText().toString();
                         Log.d("ParseXmlActivity", "In start tag = "+str1);
                         arrlat_long.add(str1);
                    }
                } 
                eventType = myxml.next();

            }
        } 
        catch (XmlPullParserException e) 
        {
        } 
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

   int in =Integer.parseInt(str);
       int in1 =Integer.parseInt(str1);   
       sampleGeoPoint = new GeoPoint(in,in1);
        return sampleGeoPoint;
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:19:43.650

我认为您的方法是错误的方法。我不能重写你的整个代码，但会给你一些提示，如何去做。顺便说一句，它与 google apis 完全无关，它是你，`onDraw`在前台线程（又名 UI 线程）的方法中与 web 服务交谈！

所以要摆脱它，我建议如下：绝对避免在内部进行繁重的计算`onDraw(Canvas)`。使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来收集您的数据。在您提出请求后，您可以通过调用更新您的 MapView`postInvalidate()`并将其用于绘制。

[也许overlaymanager lib](https://code.google.com/p/mapview-overlay-manager/)的LazyLoad-feature对你来说很有趣

# actionscript - 如何在一个 ActionScript 项目中将多个应用程序编译到自定义位置？

> ID：11092207
> 
> 赞同：0
> 
> 时间：2012-06-18T22:52:11.873
> 
> 标签：actionscript, flash-builder

我希望能够在 Flash Builder 中调试/运行我的 ActionScript 项目，并让它编译项目中的多个应用程序 (SWF)，将 SWF 放置在我指定的位置。

当我将所有应用程序类添加到项目配置并运行项目时，所有 SWF 都已编译并且一切正常。但我不希望所有的 SWF 都转储到我的构建目录的根目录中。

所以我右键单击其中一个可运行的类，选择“属性”，然后将运行/调试设置更新到我想要的位置。然后它停止编译该 SWF。

我已经使用 Clean and Build All 没有效果。

Flash Builder 4.6 的编译器设置中不再提供 -o 和 -output 参数。而且我宁愿在开发时不使用 Ant。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:01:29.103

您在同一个项目中有多个“主要”类吗？我会将它们拆分为单独的项目，并在每个项目上设置输出目录。

如果他们共享代码，则应将共享代码作为 actionscript 库移至其自己的项目中。依赖于该库的项目需要更改其属性。您可以通过我相信的库选项卡指定一个项目对另一个项目的依赖项。

运行/调试设置不会影响项目输出到的目录。在您的每个项目编译到其指定的输出目录后，它将尝试在您指定的目录中运行该项目。

# python - 带日期的matplotlib

> ID：11092214
> 
> 赞同：6
> 
> 时间：2012-06-18T22:52:52.627
> 
> 标签：python, date, matplotlib

我正在尝试将值绘制为日期的函数（仅 hh:mm:ss，没有 dd/mm/yy）。代码看起来像这样

```
dates = matplotlib.dates.date2num(x_values)
plt.plot_date(dates, y_values) 
```

但我收到以下错误

> 'numpy.string_' 对象没有属性 'toordinal'。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T23:01:53.993

`date2num`期望`datetime`对象。如果您有字符串，请使用`matplotlib.dates.datestr2num`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:01:59.443

根据[文档](http://matplotlib.sourceforge.net/api/dates_api.html#matplotlib.dates.date2num)：

> matplotlib.dates.date2num(d)：d 要么是一个日期时间实例，要么是一个日期时间序列。

看起来你正在给一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T15:17:13.410

```
from matplotlib import pyplot as plt <br>
pay_date=['2016-04-30', '2016-06-28', '2016-11-29'] 
due_date=['2016-05-02', '2016-07-31', '2016-10-29'] 
plt.plot_date(pay_date,due_date,xdate=True,ydate=True) 
```

只需添加参数`xdate=True`，`ydate=True`它会自动绘制日期

最后编写以下代码，打印行

```
plt.plot(pay_date,due_date) 
```

# javascript - Jquery/JS：通过样式显示（无，块）显示选择框

> ID：11092215
> 
> 赞同：0
> 
> 时间：2012-06-18T22:53:05.093
> 
> 标签：javascript, jquery, show-hide

我正在尝试通过 jquery 命令显示（块，无）选择框（在此示例中只有一个选择框）。但我没有得到任何结果。我有一个隐藏属性，但我需要这个显示（块，无）。

**带显示的非工作 JS/JQUERY(none,block)**

```
var formObject = {
    run : function(obj) {
            obj.nextAll('.update').attr({'disabled': true, 'none':true}).html('<option value="">----</option>');
            var id = obj.attr('id');
            var v = obj.val();
            jQuery.getJSON('includes/update.php', { id : id, value : v }, function(data) {
                if (!data.error) {
                    obj.next('.update').html(data.list).removeAttr('disabled none');
                } else {
                obj.nextAll('.update').attr({'disabled': true, 'none':true}).html('<option value="">----</option>');
                }
            });
        }   
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:58:48.237

不要使用属性来隐藏元素！！！

**jQuery：**

```
$('...').hide();
$('...').show(); 
```

**CSS：**

```
$('...').addClass('hidden');
$('...').removeClass('hidden'); 
```

**香草javascript：**

```
document.getElementById('id').style.display = "none";
document.getElementById('id').style.display = "block"; 
```

# java - 蚂蚁SCP失败

> ID：11092216
> 
> 赞同：6
> 
> 时间：2012-06-18T22:53:10.063
> 
> 标签：java, ant, scp

这就是我试图 scp 到远程机器的方式，我试图将整个目录复制到目标目录。

```
<target name="report-test-results" depends="run-junit-tests">
    <scp todir="root:somepassword@192.168.8.120:/home/hrishikesh/webui-test-results/">
            <fileset dir="${basedir}/test-results"/>
    </scp>
</target> 
```

我收到以下错误：

```
BUILD FAILED
C:\Users\hrishikesh\workspace\selenium4j\build.xml:122: Problem: failed to create task or type scp
Cause: Could not load a dependent class com/jcraft/jsch/Logger
       It is not enough to have Ant's optional JARs
       you need the JAR files that the optional tasks depend upon.
       Ant's optional task dependencies are listed in the manual.
Action: Determine what extra JAR files are needed, and place them in one of:
        -ANT_HOME\lib
        -the IDE Ant configuration dialogs

Do not panic, this is a common problem.
The commonest cause is a missing JAR.

This is not a bug; it is a configuration problem 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T22:58:43.890

错误输出非常清楚地说明了如何解决此问题：

```
Action: Determine what extra JAR files are needed, and place them in one of:
    -ANT_HOME\lib
    -the IDE Ant configuration dialogs 
```

在您的情况下，您缺少 jsch JAR 文件，该文件可以从[JSch 站点](http://www.jcraft.com/jsch/)下载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T22:58:38.840

签出任务的库[依赖](http://ant.apache.org/manual/install.html#librarydependencies)`scp`项。您需要包含[`jsch.jar`](http://www.jcraft.com/jsch/index.html)在您的类路径中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-11-28T18:22:58.007

*在 Eclipse - Windows > Preferences > Ant > Classpath*中添加[JSch](http://www.jcraft.com/jsch/) JAR 文件。

 *您可以从 Maven 中央存储库获取[JAR 文件。](https://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.jcraft%22%20AND%20a%3A%22jsch%22)*

# android - 如何在 android 上静默安装应用程序？未经用户许可？

> ID：11092219
> 
> 赞同：4
> 
> 时间：2012-06-18T22:53:42.393
> 
> 标签：android, permissions, installation, android-install-apk, silent-installer

如何在 android 上静默安装应用程序？未经用户许可？

我已阅读此 [链接](https://stackoverflow.com/questions/5803999/install-apps-silently-with-granted-install-packages-permission) ，但我没有得到正确答案的想法，该问题与 PackageInstaller 相关？

另一方面，我看了一下这个[问题](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)，我已经测试过了，但仍然需要用户的许可才能完成安装！！！！

**我不会制造病毒，我只是为了研究安卓安全问题**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T23:13:41.690

您无法在库存设备上执行此操作。将 apk 文件放入 data/app/ 的唯一方法是通过 PackageManager.apk 并且在该组件中执行此操作的唯一方法是让用户按下 intall 按钮。

该系统是专门为禁止您尝试使用的行为类型而构建的。

如果您在自己的设备上运行自己定制的操作系统版本，那么您可以随意修改强制执行此行为的系统源代码以尝试绕过它。但我想如果你想尝试的话，你将面临一项非常艰巨的任务。

如果您的设备已植根，您可以将 apk 粘贴到将安装它的 data/app/ 文件夹中。但是用户仍然有机会拒绝，因为将显示超级用户权限弹出窗口。

# ios - 为什么我的表格视图不起作用？

> ID：11092222
> 
> 赞同：0
> 
> 时间：2012-06-18T22:54:10.990
> 
> 标签：ios, uitableview

我有一个内部有表格视图的视图。我有一个 viewController 类，它声明了一个表视图，并且所有内容都连接在界面构建器中。

但是方法不起作用，例如：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 61;
} 
```

在 viewDidLoad 下，我可以通过这样做来改变 tableView 单元格的高度

```
self.tableView.rowHeight=71; 
```

我对发生了什么感到困惑......

更多信息：
我正在使用 Xcode 4.3
iOS 5
而且我正在使用情节提要......这是我的视图：

![在此处输入图像描述](../Images/f6bfd0e35ef244c266dcfe0443e312cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:58:12.980

如果我正确理解您的屏幕截图，看起来委托和数据源出口指向同一个表格视图。这些插座应该连接到您的视图控制器，然后您必须确保您的视图控制器没有被错误地释放（我不怀疑它是基于您共享的内容，但请记住这一点）。

# c# - Windows Mobile 6.1 机器在插入时无法连接到 sql server

> ID：11092224
> 
> 赞同：1
> 
> 时间：2012-06-18T22:54:19.680
> 
> 标签：c#, compact-framework, windows-mobile-6.1

我正在 Windows Mobile 6.1 机器上编写一个 .net cf 2.0 应用程序。这台机器一开始给我的wifi连接带来了很多麻烦，但后来它只工作了一段时间。

然而，大约 10 天前，机器仅在插入时才停止连接到 sql 服务器（在同一网络上）。但互联网工作正常。当我拔下机器时，它正常连接到 sql server。

任何帮助，将不胜感激。这个问题使我无法调试应用程序。

我尝试了一个演示项目来确认这一点，这是代码：

```
 static void Main()
    {
        connection = GlobalFields.MainTableAdapter.Connection;
        GlobalFields.OrdersAdapter.Connection = connection;

        connection.Open(); // I get an SqlException with no details if the 
                           // machine is connected (probably caused by a timeout)

        Application.Run(new frmLogin());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:36:24.590

因此，当设备未对接时，设备连接到 SQL Server，但在对接到 PC 时无法与服务器连接。

如果我理解正确，我会看以下两件事之一：

*   您在 PC 上的帐户被锁定（密码过期），或者
*   设备设置告诉它在对接时通过 PC 连接，但当前没有从 PC 到服务器的连接

有没有可能这两个选项之一是可能的？您可以使用相同的连接字符串从 PC 连接到 SQL Server 吗？

**编辑：**如果这是一个连接问题，请尝试使用不同的连接字符串进行测试：

```
static void Main()
{
    #if DEBUG
    connection = "sqlserver://localhost;integratedSecurity=true;";
    #else
    connection = GlobalFields.MainTableAdapter.Connection;
    #endif
    GlobalFields.OrdersAdapter.Connection = connection;

    connection.Open(); // I get an SqlException with no details if the 
                       // machine is connected (probably caused by a timeout)

    Application.Run(new frmLogin());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:27:38.570

我找到了问题的原因。原来我们的网络管理员安装了一个代理服务器，它会定期强制手持设备通过它，然后阻止它访问网络上的sql server。

我需要做的就是转到网络设置并禁用使用代理服务器的选项，然后一切正常。

# ruby - 在 Ruby 中创建一个 Person 类

> ID：11092225
> 
> 赞同：1
> 
> 时间：2012-06-18T22:54:20.627
> 
> 标签：ruby

我创建了一个 Person 类并且我的代码是正确的，但我只是希望有人澄清一个特定的行。

```
class Person 
  attr_reader :first_name, :last_name, :age

  def initialize (first_name, last_name, age)  
    @first_name = first_name  
    @last_name = last_name
    @age = age
  end
end 
```

我感到困惑的是那条线`attr_reader`。为什么需要包含这个，为什么我需要`:`每个属性之前的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:59:29.317

attr_reader 是 ruby​​ 提供的一种方便方法，用于以自动方式添加以下方法（getter 方法）。即仅一行代码将在您的情况下添加这三种方法。

至于将符号作为输入参数，这就是方法的定义方式。[您可以在http://ruby-doc.org/core-1.8.7/Module.html#method-i-attr_reader](http://ruby-doc.org/core-1.8.7/Module.html#method-i-attr_reader)查看更多

```
def first_name
  @first_name
end

def age
  @age
end

def last_name
  @last_name
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:32:09.873

Ruby 不允许公共访问实例变量，`attr_reader`实际上是添加到类 Class 中的一种方法，它提供了一种访问实例变量的简单方法。

```
class Class
    def attr_reader(*args)
        *args.each do |arg|
            self.class_eval("def #{arg}; @#{arg}; end")
         end
    end
end 
```

`class_eval`上面只是在你的类定义中插入代码并评估它们；）

# vim - 如果没有其他缓冲区，当我关闭 NERDTree 时如何退出 vim

> ID：11092229
> 
> 赞同：1
> 
> 时间：2012-06-18T22:54:37.657
> 
> 标签：vim, nerdtree

通过阅读 github 上的 NERDTree 文档，我了解到我可以做一些漂亮的事情，比如如果 vim 没有缓冲区启动，则自动打开 nerdtree，如果 NERDTree 是唯一打开的缓冲区，则自动关闭 vim。但是，我的最后一个问题是实现相反的 - 如果由于某种原因 NERDTree 是唯一打开的缓冲区并且没有触发 vim 的退出，则关闭树基本上什么都不做。我希望 vim 在这种情况下关闭，这样我就不必输入 :q 两次。

以下是实现其他便利的行：

```
autocmd vimenter * if !argc() | NERDTree | endif
autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTreeType") && b:NERDTreeType == "primary") | q | endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T00:03:34.733

NERDTree 没有[nerdtree-tabs](https://github.com/jistr/vim-nerdtree-tabs)很糟糕，特别是：“当你关闭一个文件时，选项卡会随之关闭。没有 NERDTree 挂起。”

# iphone - iPhone个性桌圆角桌

> ID：11092234
> 
> 赞同：8
> 
> 时间：2012-06-18T22:55:09.927
> 
> 标签：iphone, uitableview, iphone-sdk-4.3

我对 iphone 屏幕设计没有太多经验，但我需要制作这样的表格：（图片），我进行了调查，但没有找到任何东西。该表需要有一个圆角，并且用户将能够插入数据，在这种情况下是名字、姓氏等……现在我使用的是 SDK 4.3。如果有人有教程，我将不胜感激

谢谢，

![可编辑圆角桌](../Images/3647751e85d24db02c5291738c266c2d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T06:28:39.240

您可以自定义表格边框。您需要做的就是导入 QuartzCore/QuartzCore.h 文件。

并在 viewDidLoad 中设置以下属性

```
tableView.layer.cornerRadius = 10.0f;
tableView.layer.borderColor = [UIColor grayColor].CGColor;
tableView.layer.borderWidth = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:22:21.513

*   谷歌的第一个[结果](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)做`custom uitableview`了类似的事情，难以定制并且不是很灵活，但它看起来非常漂亮并且节省了大量的绘图实现时间（您可以覆盖`drawRect`自定义外观）。
*   对于对单元格具有多个控件的更可重用的解决方案，您可以`UITableViewCell`根据需要对子视图进行子类化、添加和样式化（标题标签、文本视图、分隔符）、覆盖`layoutSubviews`。您可能希望添加编辑侦听器以动画化`textViews`变大和分隔线移到一边。该通用解决方案适用于任何 UI 控件（例如，您可以使用按钮快速制作复选框）和方法。

# matlab - Matlab绘制四面体和三角形

> ID：11092235
> 
> 赞同：1
> 
> 时间：2012-06-18T22:55:16.077
> 
> 标签：matlab, graphics, 3d, rendering, matlab-figure

我在 MATLAB 中实现 Crust 算法并且在绘制结果图时遇到问题。

我在三维空间中有一个点数组（1000x3）点。

1.  我有一个矩阵 M (100x4)。每行是一个向量，包含 4 个 pointsArray 索引，构成一个四面体。现在我想以某种有效的方式绘制所有这些四面体。

    目前我正在使用“for”循环和补丁（FV）方法，但是对于几千个四面体它正在杀死我的 CPU。

2.  我有一个矩阵 N (100x3)。每行是一个包含 3 个 pointsArray 索引的向量，在三维空间中形成一个三角形。我也想画这些三角形。

任何想法，如何以某种有效的方式绘制这些数字？

编辑：问题解决了。我使用 trisurf 而不是补丁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:37:20.500

关于第二个问题（三角面），我使用以下代码：

```
%% Wire plot
% The idea is to plot all triangles as one line. But to make part of the
% line connecting two triangles invisible, add NaN after each 3 points of
% triangle.

NTri = size(N,1);
X = reshape(pointsArray(N.',1), 3, NTri);   X = reshape([X; nan(1,NTri)], 4*NTri, 1);
Y = reshape(pointsArray(N.',2), 3, NTri);   Y = reshape([Y; nan(1,NTri)], 4*NTri, 1);
Z = reshape(pointsArray(N.',3), 3, NTri);   Z = reshape([Z; nan(1,NTri)], 4*NTri, 1);
figure;
plot3(X,Y,Z,'-k.');
axis equal

%% Surface plot
% patch also can plot all triangles at once. I use the following code to
% plot triangulated objects consisting of more than 300000 triangles and it
% is very fast.

px = [pointsArray(N(:,1),1) pointsArray(N(:,2),1) pointsArray(N(:,3),1)].';
py = [pointsArray(N(:,1),2) pointsArray(N(:,2),2) pointsArray(N(:,3),2)].';
pz = [pointsArray(N(:,1),3) pointsArray(N(:,2),3) pointsArray(N(:,3),3)].';
figure
patch(px,py,pz, 'g');
axis equal 
```

希望它对某人有所帮助。

// 奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:12:33.003

尝试将[图形`render`属性](http://www.mathworks.com/help/techdoc/ref/figure_props.html#RendererMode)更改为`opengl`

```
 set(gcf,'Render','OpenGL'); 
```

但是它仅适用于 3D 中的三角形。四面体可以表示为 2 个三角形。

# grails - 将 Dojo 构建集成到 Grails 构建中？

> ID：11092237
> 
> 赞同：0
> 
> 时间：2012-06-18T22:55:19.123
> 
> 标签：grails, build, dojo

我了解 dojo 的构建系统，但我对 Grails 还很陌生。有谁知道如何或有资源将 dojo 的 JS 构建集成到 Grails 中？我希望能够在开发过程中使用 JS 源，然后切换到 JS 的构建版本进行生产。

到目前为止，我设想只在 js 目录中拥有 dojo-src 目录，并在开发过程中使用它。然后，当我想部署到 prod 时，我将手动运行一个 dojo 构建并将它也在 /js 目录中输出。

（我打算给我们一个请求参数来告诉应用程序使用哪个js，压缩或src）。

我应该考虑另一种更好的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:07:52.507

我对grails了解不多，但我认为你走在正确的道路上。我使用查询参数来设置要使用的配置，但我将配置存储在会话中，因此我不需要在每个页面上都使用它。

看看我对此的回答： [How do I use uncompressed files in Dojo 1.7?](https://stackoverflow.com/questions/11020267/how-do-i-use-uncompressed-files-in-dojo-1-7/11034664#11034664)

根据我在 Grails 上阅读的内容，它使用 ant 进行构建。这是要构建的 ant 脚本。我不知道如何将它整合到建造战争的甘特公约中。

```
<java fork="true" dir="${dojo.build.util.dir}/buildscripts"
classname="org.mozilla.javascript.tools.shell.Main">

<classpath>
    <pathelement location="${dojo.build.util.dir}/shrinksafe/js.jar"/>
    <pathelement location="${dojo.build.util.dir}/shrinksafe/shrinksafe.jar"/>
</classpath>

<arg value="build.js"/>
<arg value="version=${version}"/>
<arg value="profileFile=../../profile.js"/>
<arg value="action=release"/>
<arg value="releaseDir=../../../"/>
<arg value="releaseName=${dojo.releaseName}" />
<arg value="optimize=shrinksafe"/>
<arg value="cssOptimize=comments.keepLines"/>
</java> 
```

# java - Objective-c 是否有像 Java 的 java.util 这样的实用程序包或库？

> ID：11092239
> 
> 赞同：0
> 
> 时间：2012-06-18T22:55:26.267
> 
> 标签：java, objective-c, ios

Objective-c 是否内置了支持 List、HashTable、Tree、Date 等内容的实用程序包？我来自 Java 背景，所以我试图与之相提并论`java.util`以更好地理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:10:28.560

您可能认为您需要一棵树，但请记住您真正想要的是具有大致相同 O(n) 算法性能的数据结构 - 阅读有关 NSArray 为您提供的存储和性能保证的详细信息。

您正在寻找的是：

*   NSArray（数组排序但也是一棵树）
*   NSDictionary（哈希表）
*   NSSet（唯一哈希表）
*   NSDate 和 NSDateFormatter

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:04:21.340

Cocoa，而不是 Objective-C，具有`Foundation`包含基本数据类型的库，包括您要询问的那些（可能是 Tree 除外）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T23:05:43.023

# cmake - 使用 cmake 使用脚本预处理每个源文件

> ID：11092241
> 
> 赞同：0
> 
> 时间：2012-06-18T22:56:12.837
> 
> 标签：cmake, fortran

我正在尝试将 cmake 构建系统添加到旧的 fortran 代码中

```
!DEC$ 
```

样式预处理器命令。旧的构建系统生成了一个 awk 脚本，将这些脚本转换为传统的 C 风格预处理器。然后，makefile 会将输出直接通过管道传输到编译器。我知道使用 cmake 可以生成一个中间文件，但如果可能的话，我想避免这种情况，因为我想在每个文件上运行它。

cmake 中是否有一种方法可以将命令的输出直接传送到编译器？基本上可以做相当于

```
awk -f script.awk source.f | gfortran -x f95 -cpp -c - 
```

在cmake中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:43:52.807

您可以添加一个 cmake [add_custom_command](http://www.cmake.org/cmake/help/cmake2.6docs.html#command%3aadd_custom_command)来运行 awk 并将输出保存到另一个文件，在这种情况下将不需要管道。为了有管道，我认为可以编写一个包含管道语句的 bash 脚本。然后可以将脚本定义为 cmake 编译器（[使用不同的编译器](http://www.cmake.org/Wiki/CMake_FAQ#How_do_I_use_a_different_compiler.3F)）。

# apache-flex - 间歇性 Channel.Connect.Failed 错误 NetConnection.Call.Failed:HTTP: Failured: url

> ID：11092243
> 
> 赞同：0
> 
> 时间：2012-06-18T22:56:14.883
> 
> 标签：apache-flex, blazeds

我们有一个 Flex 应用程序，有时会抛出此错误**Intermittent Channel.Connect.Failed error NetConnection.Call.Failed:HTTP: Failured: url 'http://nsmjboss:8400/backbone/messagebroker/amf'**

我可以在 brewer 中点击该链接，它工作正常，而且我在我们的日志中看不到任何错误。我的服务-config.xml

```
<flex-client>
    <timeout-minutes>120</timeout-minutes>
</flex-client>

<channels>  
    <channel-definition id="backbone-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/amf" class="flex.messaging.endpoints.AMFEndpoint"/>
          <properties>
            <connect-timeout-seconds>480</connect-timeout-seconds>
        </properties>           
    </channel-definition>       

    <channel-definition id="backbone-streaming-amf" class="mx.messaging.channels.StreamingAMFChannel">
        <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/streamingamf" class="flex.messaging.endpoints.StreamingAMFEndpoint"/>
    </channel-definition>

    <channel-definition id="backbone-polling-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/amfpolling" class="flex.messaging.endpoints.AMFEndpoint"/>
        <properties>
            <polling-enabled>true</polling-enabled>
            <polling-interval-seconds>4</polling-interval-seconds>
        </properties>
    </channel-definition> 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:24:35.850

尝试在浏览器上停用代理，看看问题是否已解决。见[问题](https://stackoverflow.com/questions/11158394/flex-random-netconnection-call-failed-http-failed)。

# html - 如何切断图片以防止滚动？

> ID：11092250
> 
> 赞同：0
> 
> 时间：2012-06-18T22:57:37.517
> 
> 标签：html

我的页面底部有一个高大的图像；我希望它根据浏览器的高度切断，这样页面就不能滚动（基本上是为了让更高分辨率的显示器显示更多的图像）。是这样的：

```
<div id="container" style="height:100%;">
<div> (blah blah blah) </div>
<div id="photo"><img ...></div></div> 
```

现在 img 正在溢出容器，因此背景仅与浏览器屏幕一样大（应该如此），但 img 继续超过页面末尾。如何切断图像的底部以使其与容器一起停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:00:15.533

`style="overflow: hidden"`这将切断容器中的任何溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:40:53.863

您还可以将背景设置`<div id="photo"></div>`为照片图像而不是使用元素，以便图像将缩放到页面宽度。

```
#photo {
   background: ('photo.jpg') no-repeat;
   background-size: 100% auto;
} 
```

# facebook-opengraph - 打开图故事好友标签，重命名“with”介词

> ID：11092251
> 
> 赞同：0
> 
> 时间：2012-06-18T22:57:48.213
> 
> 标签：facebook-opengraph

当我创建一个开放的图表故事并在其中标记朋友时，故事最终看起来像这样：

A 采取行动 - 与 B。

我可以将“with”介词重命名为别的东西吗？就我而言，我想说：

A 添加了一个对象 - 来自 B。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:27:31.743

文件[说](https://developers.facebook.com/docs/opengraph/actions/#taggingpeople)......

> 在某些情况下，您的用户可能希望表明他们与朋友一起采取了行动。这可以通过在发布故事时指定 tags 可选参数轻松完成。

因此，标记人并不是描述“USER_A 从 USER_B 收到 OBJECT”之类的东西，而是表明 USER_A 实际或实际上*与*USER_B 在一起的场合。

文件还说...

> 您只能鼓励用户在操作发生时标记实际与他们在一起的朋友。因此，正确使用它是为了表明当动作发生时用户实际上和这些朋友在一起。

也许您将不得不重新考虑使用 Open Graph 操作。

# ajax - 如何显示 Blobstore 图像的文件保存对话框？

> ID：11092255
> 
> 赞同：0
> 
> 时间：2012-06-18T22:58:34.183
> 
> 标签：ajax, google-app-engine, blobstore

我有一个保存在 Blobstore 中的图像的密钥。我希望用户能够单击按钮并将图像保存在本地。Blobstore 文档中的示例可以很好地做到这一点。他们的代码是：

```
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource)
    self.send_blob(blob_info,save_as=True) 
```

但我想使用ajax。我使用“/server/...密钥...”执行 GET，然后以“GIF89a...图像数据...”的形式取回数据。我没有打开打开/保存对话框，而是获取数据。ajax 和 html 一定有什么我不明白的地方。如何显示打开/保存对话框？我是网络编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:55:02.087

我的问题是我不懂ajax。Ajax 返回数据。它不呈现页面。我正在使用 ajax 发送“/server/...blob key...”。我需要做的就是：

```
windows.location = "/server/...blob key..." 
```

然后我得到了保存/打开对话框。

# oracle - Oracle SID INS-35075 - 保持相同的 SID

> ID：11092261
> 
> 赞同：0
> 
> 时间：2012-06-18T22:59:28.967
> 
> 标签：oracle, oracle11g, sid

如何保持相同的 SID？

[http://i.stack.imgur.com/hTahz.png](http://i.stack.imgur.com/hTahz.png)

稍后编辑：我买了一台笔记本电脑并安装了 11g。我测试过，它工作正常。但是 Windows 7 中的用户是*Maria*，所以我删除了所有内容并将其复制到我的用户*John*，这就是问题所在，因为 sqldeveloper 无法识别数据库。所以我删除了所有文件和包含产品 11.2.0 等的文件夹，并从头开始重试安装，但我收到 SID 错误 INS-35075。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-03T07:04:36.933

在 Linux CentOS 上

```
[root@localhost / ] rm -rf tmp/OraInstall*
[root@localhost / ] rm -rf /etc/oratab

[root@localhost / ] su - oracle  (login as oracle user for reinstalling)

export DISPLAY="your machine ip from where you connected to linux for Interactive Oracle Installer Display":0

[oracle@localhost / ]  ./runInstaller 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T01:15:43.177

错误代码 ins-35075 表示您尝试使用的 SID 已在使用中。

在尝试使用相同的 SID 之前，您必须先使用 OUI（Oracle 通用安装程序）卸载。

# android - 如何在覆盖 onItemClick() 的 setOnItemClickListener() 中访问 getLoaderManager()？

> ID：11092264
> 
> 赞同：1
> 
> 时间：2012-06-18T22:59:42.233
> 
> 标签：android, debugging, android-loadermanager, android-cursor, android-cursorloader

所以我被困在如何从该范围内访问我的 getLoadManager 。我真正想做的就是刷新光标，因为 LoaderManager 在到达该点之前已经创建，但我现在除了调用 getLoaderManager() 之外真的不知道如何完成它。问题是我不能在那个范围内。有任何想法吗？提前致谢。

```
calendar.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            /*Stuff thats not really important to show*/

        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:00:32.010

您可以使用，

```
ActivityName.this.getLoaderManager(); 
```

# python - 如何将统一的差异文件应用于原始文件？

> ID：11092265
> 
> 赞同：1
> 
> 时间：2012-06-18T22:59:43.607
> 
> 标签：python, mercurial, diff, python-2.7

我需要一些功能'apply_patch'：

```
result_string = apply_patch('origin_file.txt', 'origin_file.txt.patch') 
```

或一些命令（适用于 windows 和 linux）：

```
if linux:
    result_string = os.system('linux_patch --apply origin_file.txt origin_file.txt.patch')
elif windows:
    result_string = os.system('windows_patch --apply origin_file.txt origin_file.txt.patch') 
```

有用的信息：我使用 mercurial 作为版本控制系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:03:41.553

检查实用程序[补丁](http://en.wikipedia.org/wiki/Patch_%28Unix%29)。它可以满足您的期望。假设你在项目的根目录下，你可以试试：

```
$ patch --dry-run < file.diff 
```

*--dry-run*会告诉你补丁是否适用，而不是真正应用它。最终，您将不得不使用选项*-pn*让补丁知道从路径中删除目录（查看 diff 文件的标题）。

如果补丁已经应用，该实用程序将询问您是否要撤消补丁。

使用 mercurial，您还可以尝试“ *hg import* ”。如果您的程序需要它，那么您可以从 mercurial.xml 导入相应的模块。

# javascript - 在加载新页面时保持 Tab 持续活动

> ID：11092269
> 
> 赞同：0
> 
> 时间：2012-06-18T23:00:00.083
> 
> 标签：javascript, jquery, html, css

现在我有一个基于选项卡的布局，当我单击一个选项卡并加载一个新页面时，单击它之前选项卡的悬停状态在加载新页面时不会持续存在，它默认为原来的选项卡出发。

购买时的模板完全按照我在此处试图传达的作为我正在寻找的操作（请参阅链接）。我目前的工作不是提供的链接，这就是我所说的关于不像最初购买的产品那样持久的工作。

[我的页面](http://kansasoutlawwrestling.com/files/templates/admin/peachv1.2/Template/dashboard.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:10:27.557

我不确定这就是您所指的，但我的猜测是，例如，当您在“元素”选项卡上刷新页面时，您希望它使用“元素”选项卡重新加载选择。

执行此操作的典型方法是使用哈希标签和一些 JavaScript 逻辑。具体来说：您的每个选项卡实际上都是一个`<a />`标签，并且目前 - 它们每个都有一个 url `href='#'`- 这意味着它们是哈希标签链接。但是 - 它们都链接到基本哈希。

通常，您会看到每个选项卡都有不同的哈希引用，它指的是页面应该处于的不同视图模式。所以 - 如果 URL 包含`#dashboard`，页面上的 javascript 就会知道页面加载，它应该显示仪表板。另一方面，如果 URL 包含`#elements`，则应该显示“元素”选项卡。

有一些可靠的插件可以处理这类事情——但无需对你的 UI 进行重大重写（这已经很时髦了）——我建议只做一点 jQuery 来弄清楚散列是什么，并在加载时检查它。

查看 Stack Overflow 问题[Retrieve specific hash tag's value from url](https://stackoverflow.com/questions/3729150/retrieve-specific-hash-tags-value-from-url)作为使用主题标签的一些方法的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:53:01.940

您的问题是，当新页面加载时，您没有将“当前”类传递给选项卡。因此，如果您单击第二个、第三个、第四个选项卡，并且页面重新加载或加载新的原始选项卡，“当前”类仍然是第一个选项卡。

您必须在每个页面的基础上手动将“当前”类应用于每个选项卡，或者构建一个逻辑来确定页面加载时您所在的页面以使用“当前”类填充正确的选项卡，基本上就是这样取决于您的实际模板的布局方式是静态的、动态的等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T23:50:01.440

如果您要解决的问题是如何设置选项卡以反映页面更改，则需要根据加载的 url 调整选项卡上的“当前”类。通过在 html 视图中检查 nav 元素，可以轻松地在浏览器控制台中查看此类。

如果由您的服务器代码添加，类可能是最简单的。

导航选项卡的 javascript(jQUery) 代码从 scripts.js 的第 477 行开始

# escaping - @FormParam 被截断以嵌入 ' 内容 Apache Wink

> ID：11092270
> 
> 赞同：1
> 
> 时间：2012-06-18T23:00:02.150
> 
> 标签：escaping, apache-wink, form-parameter

我承认我们通过使用 url 编码的表单在单个变量中发送 XML 文档（换行符转换为空格，内容转义）来做一些愚蠢的事情，但这是为了适应只能发送表单数据的客户端。

当转义的 XML 内容中的一个字符串包含撇号时

```
&apos; 
```

请求正文的解析停止并且不返回变量的其余部分。当然，这会产生一个问题，因为我们检索的 XML 文档是不完整的。

当接收者使用 Apache Wink JAX-RS 库时，在表单参数中传递撇号的正确方法是什么？

像这样的一行：

```
 <decisionspace  title="Traffic Study" details="Discuss the Rivertowns Square projects impact on traffic" /> 
```

工作正常，但像这样的一行：

```
 <decisionspace  title="Traffic Study" details="Discuss the Rivertowns Square project&apos;s impact on traffic" /> 
```

在“Square project”之后被截断

被转义的字符是：

```
"&" becomes "&amp;"
"\"" (double quote) becomes "&quot;"
"'" (single quote) becomes "&apos;"
"<" becomes "&lt;"
">" becomes "&gt;"
bytes < 0x20 or > 0x7f" become "&#nnn;" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:35:53.350

在进行更多挖掘之后，表单参数似乎存储在 MultivaluedMap (formParameters) 中，并且 & 符号被解释为值分隔符（如在查询字符串中），因此仅调用 formParameters.get(getName())返回到该位置（显示 formParameter 值显示在 toString() 中用逗号分隔的多个值）。我怀疑当请求正文被解释为填充 formParameter 映射时，它会将值解析为查询字符串并在每个＆符号处分隔内容。

我确定使用不同的转义机制，因此＆符号是 %26 或其他东西，因此它将整行作为一个字符串，我将全部设置。

我想这一切都取决于解析器在任何给定上下文中的视角，对于表单参数，它正在考虑查询字符串格式（当然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:04:17.727

表单参数使用 . 分隔`&`。您应该以与对 URL 而非 XML/HTML 相同的方式对内容进行转义。

# web-services - 从 VBA 调用 Sharepoint Web 服务时，UpdateListItems 采用哪些参数？

> ID：11092273
> 
> 赞同：3
> 
> 时间：2012-06-18T23:00:19.283
> 
> 标签：web-services, sharepoint, vba, soap

我正在尝试使用 VBA 将项目添加到 Sharepoint 列表。我不希望用户必须安装任何东西，所以我只是使用 Microsoft Soap 类型库。代码如下：

```
Sub test()

Dim soap As MSSOAPLib.SoapClient
Dim XMLstr As String
Dim listid As String
Dim listname As String

Set soap = New SoapClient
Call soap.mssoapinit(bstrwsdlfile:="http://wss/mySharepointSite/_vti_bin/lists.asmx?wsdl")

listid = "{e285aa1a-my-list-ID-d446cdbf091e}"
listname = "thisList"

XMLstr = "<Method ID='1' Cmd='New'>" & _
            "<Field Name='ID'>New</Field>" & _
            "<Field Name='personID'>1337</Field>" & _
        "</Method>"

soap.UpdateListItems listid, XMLstr

End Sub 
```

`soap.UpdateListItems`无论我是使用`listid`还是`listname`作为第一个参数，我都会在线上收到“类型不匹配”错误。我尝试阅读 WSDL 以确定应该传递哪种类型的参数，但我不明白。我应该在这里经过什么？

编辑：我通过使用 Microsoft Soap Type Library 3.0 来实现它，改变`MSSOAPLib.SoapClient`->`MSSOAPLib30.SoapClient30`和`bstrwsdlfile`-> `par_wsdlfile`，并围绕`XMLstr`：

```
<Batch OnError='continue' ListVersion='1' ViewName='" & ListView & "'>

...

</Batch> 
```

仍在尝试找出一种无需用户安装 MSSoap 3.0 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:32:25.940

我通过将 XML 作为 HTTP POST 发送并通过 MSXML2.XMLHTTP 提交来解决了这个问题。代码如下：

```
Function updateSharePointList(listURL as string, list As String) As DOMDocument

Dim xmlhtp As New MSXML2.XMLHTTP
Dim XMLDOC As New DOMDocument
Dim xmlstr as String

xmlstr = "<?xml version=""1.0"" encoding=""utf-8""?>" & _
"<soap12:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap12=""http://www.w3.org/2003/05/soap-envelope"">" & _
  "<soap12:Body>" & _
    "<UpdateListItems xmlns=""http://schemas.microsoft.com/sharepoint/soap/"">" & _
      "<listName>" & list & "</listName>" & _
      "<updates>" & _
        "<Batch OnError='continue' ListVersion='1'>" & _
        "<Method ID='1' Cmd='New'>" & _
            "<Field Name='ID'>New</Field>" & _
            'all of your field updates go here, e.g.: 
            "<Field Name='userID'>1337</Field>" & _
            "<Field Name='comment'>first!</Field>" & _
        "</Method>" & _
        "</Batch>" & _
        "</updates>" & _
    "</UpdateListItems>" & _
  "</soap12:Body>" & _
"</soap12:Envelope>"

With xmlhtp
        .Open "POST", listURL, False
        .setRequestHeader "Host", "wss"
        .setRequestHeader "Content-Type", "application/soap+xml; charset=utf-8"

        .send xmlstr

        XMLDOC.LoadXML .responseText
        Set updateSharePointList = XMLDOC

End With

End Function 
```

这需要对 Microsoft XML（我使用“Microsoft XML，v6.0”）的引用，AFAIK 在任何标准的 VBA 引用集中。不需要 DLL 注册。该函数返回一个 DOMDocument，其结果 XML 由 返回`UpdateListItems`，您可以对其进行解析以进行错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:43:31.993

从您的代码中删除这一行：`<Field Name='ID'>New</Field>`

# c# - DataContractSerializer - 更改命名空间并反序列化绑定到旧命名空间的文件

> ID：11092274
> 
> 赞同：20
> 
> 时间：2012-06-18T23:00:26.193
> 
> 标签：c#, .net, datacontractserializer

我有一个用`DataContractSerializer`. 该类使用没有显式声明的`[DataContract]`属性。`Namespace`因此，生成的 xml 文件中的命名空间是根据类的命名空间生成的。

该类基本上如下所示：

```
namespace XYZ
{
   [DataContract]
   public class Data
   {
      [DataMember(Order = 1)]
      public string Prop1 { get; set; }

      [DataMember(Order = 2)]
      public int Prop2 { get; set; }
   }
} 
```

...以及生成的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Data xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/XYZ">
   <Prop1>StringValue</Prop1>
   <Prop2>11</Prop2>
</Data> 
```

现在我想通过将`[DataContract]`属性更改为`[DataContract(Namespace = "")]`. 但是，一旦我这样做了，以前使用原始名称空间序列化的任何文件都不再反序列化。我收到以下异常：

`Error in line 1 position XXX. Expecting element 'Data' from namespace ''.. Encountered 'Element' with name 'Data', namespace 'http://schemas.datacontract.org/2004/07/XYZ'.`

这很有意义。我更改了命名空间。我没问题。但是，即使名称空间不匹配，似乎也必须有一种方法来告诉`DataContractSerializer`继续并反序列化该数据。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T06:49:26.560

一种可能的方法是将序列化程序使用的读取器包装在将旧命名空间映射到新命名空间的读取器中，如下所示。很多代码，但大多是微不足道的。

```
public class StackOverflow_11092274
{
    const string XML = @"<?xml version=""1.0"" encoding=""utf-8""?> 
<Data xmlns:i=""http://www.w3.org/2001/XMLSchema-instance"" xmlns=""http://schemas.datacontract.org/2004/07/XYZ""> 
   <Prop1>StringValue</Prop1> 
   <Prop2>11</Prop2> 
</Data>";

    [DataContract(Name = "Data", Namespace = "")]
    public class Data
    {
        [DataMember(Order = 1)]
        public string Prop1 { get; set; }

        [DataMember(Order = 2)]
        public int Prop2 { get; set; }
    }

    public class MyReader : XmlReader
    {
        XmlReader inner;
        public MyReader(XmlReader inner)
        {
            this.inner = inner;
        }

        public override int AttributeCount
        {
            get { return inner.AttributeCount; }
        }

        public override string BaseURI
        {
            get { return inner.BaseURI; }
        }

        public override void Close()
        {
            inner.Close();
        }

        public override int Depth
        {
            get { return inner.Depth; }
        }

        public override bool EOF
        {
            get { return inner.EOF; }
        }

        public override string GetAttribute(int i)
        {
            return inner.GetAttribute(i);
        }

        public override string GetAttribute(string name, string namespaceURI)
        {
            return inner.GetAttribute(name, namespaceURI);
        }

        public override string GetAttribute(string name)
        {
            return inner.GetAttribute(name);
        }

        public override bool IsEmptyElement
        {
            get { return inner.IsEmptyElement; }
        }

        public override string LocalName
        {
            get { return inner.LocalName; }
        }

        public override string LookupNamespace(string prefix)
        {
            return inner.LookupNamespace(prefix);
        }

        public override bool MoveToAttribute(string name, string ns)
        {
            return inner.MoveToAttribute(name, ns);
        }

        public override bool MoveToAttribute(string name)
        {
            return inner.MoveToAttribute(name);
        }

        public override bool MoveToElement()
        {
            return inner.MoveToElement();
        }

        public override bool MoveToFirstAttribute()
        {
            return inner.MoveToFirstAttribute();
        }

        public override bool MoveToNextAttribute()
        {
            return inner.MoveToNextAttribute();
        }

        public override XmlNameTable NameTable
        {
            get { return inner.NameTable; }
        }

        public override string NamespaceURI
        {
            get
            {
                if (inner.NamespaceURI == "http://schemas.datacontract.org/2004/07/XYZ")
                {
                    return "";
                }
                else
                {
                    return inner.NamespaceURI;
                }
            }
        }

        public override XmlNodeType NodeType
        {
            get { return inner.NodeType; }
        }

        public override string Prefix
        {
            get { return inner.Prefix; }
        }

        public override bool Read()
        {
            return inner.Read();
        }

        public override bool ReadAttributeValue()
        {
            return inner.ReadAttributeValue();
        }

        public override ReadState ReadState
        {
            get { return inner.ReadState; }
        }

        public override void ResolveEntity()
        {
            inner.ResolveEntity();
        }

        public override string Value
        {
            get { return inner.Value; }
        }
    }

    public static void Test()
    {
        DataContractSerializer dcs = new DataContractSerializer(typeof(Data));
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(XML));
        try
        {
            XmlReader r = XmlReader.Create(ms);
            XmlReader my = new MyReader(r);
            Data d = (Data)dcs.ReadObject(my);
            Console.WriteLine("Data[Prop1={0},Prop2={1}]", d.Prop1, d.Prop2);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
    }
} 
```

# javascript - JS函数被触发而不被调用

> ID：11092278
> 
> 赞同：1
> 
> 时间：2012-06-18T23:00:39.117
> 
> 标签：javascript, jquery, cordova

我有一个 Phonegap 应用程序，使用 jQuery 和 jQuery Mobile。

在某些页面中，我将一个函数绑定到一个点击事件，但该函数在页面加载时触发。在调试了一下（使用`arguments.callee.caller.caller.toString()`）之后，我发现，由于某种疯狂的原因，当页面加载时，该按钮中会触发一个单击事件。

当我更改页脚的类时，问题已经消失（也是我的样式），然后我更改了 CSS 文件中的类引用以匹配新的页脚类，问题又回来了。这很奇怪，也许它与我的 CSS 有关系。

`"footer_body"`在我的项目中没有任何其他参考。

如果我直接在 HTML 上设置函数调用（类似`<span onClick="javascript:obj.leftMethod()">`），我有相同的行为。

可以肯定的是，这是一个 Phonegap/Android 问题，因为这不会发生在 PC 浏览器中（除了我必须评论很多只能在移动设备中使用的代码）。

这是代码：

HTML：

```
<div class="footer_body">
   <span class="left"><span>Text 1</span></span>
   <span class="right"><span>Text 2</span></span>
</div> 
```

JS/jQuery：

```
function PageClass() {
...
    // called when the page is loaded
    this.init = function() {
        $(".footer_body", "#page_2").find(".left").unbind("tap").bind("tap", function() {
            that.leftMethod();
        });

        $(".footer_body", "#page_2").find(".right").unbind("tap").bind("tap", function() {
            that.rightMethod();
        });
        // that is a reference to "this" of the class
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:12:54.870

问题即将解决。真正的问题是所有的触摸事件都被带到了下一页。之前没注意，好像是自动点击，其实是之前的屏幕触摸事件触发了当前页面的触摸事件。

当然这是一个 Android 或 Phonegap 错误 - 更多信息在[这里](https://groups.google.com/forum/#!msg/phonegap/Iii6K0aXcXE/T1ZKQsMtB-UJ)，以防有人对这个问题有同样的看法。

我仍然需要一个具体的解决方案，但我已经厌倦了调查这个，所以我暂时解决了这个设置一个短暂的延迟来激活监听器功能。

# mysql - 组合 SQL 查询

> ID：11092279
> 
> 赞同：1
> 
> 时间：2012-06-18T23:00:42.953
> 
> 标签：mysql, sql, query-optimization

> **可能重复：**
> [Join 和 Union 有什么区别？](https://stackoverflow.com/questions/905379/what-is-the-difference-between-join-and-union)

我们如何将单独的查询组合成单个 sql 语句？例子：

```
SELECT packageid FROM tblhosting WHERE id='$id' AND userid='$userid'
SELECT id FROM tblcustomfields WHERE relid=tblhosting.packageid AND fieldname='foo'
SELECT value FROM tblcustomfieldsvalues WHERE fieldid=tblcustomfields.id AND relid='$id' 
```

现在，我知道嵌套查询，所以我可以这样写：

但我想知道是否有更好的方法来编写这个查询？

**[Update2]** 这里是一个没有变量的版本，希望这次更清楚

```
SELECT packageid FROM tblhosting WHERE id='$id' AND userid='$userid'
SELECT id FROM tblcustomfields WHERE relid=tblhosting.packageid AND fieldname='foo'
SELECT value FROM tblcustomfieldsvalues WHERE fieldid=tblcustomfields.id AND relid='$id' 
```

这里我只感兴趣`tblcustomfieldvalues.value`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:06:19.143

关于什么：

```
SELECT h.packageid, cf.id, cfv.value
FROM tblhosting h
INNER JOIN tblcustomfields cf ON (cf.relid = h.packageid)
INNER JOIN tblcustomfieldsvalues cfv ON (cfv.fieldid = cf.id)
WHERE h.id = '$serviceid'
  AND h.userid = '$userid'
  AND cf.fieldname = 'foo' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:42:11.810

您可以`INNER or LEFT JOIN`根据需要使用它。

```
SELECT  c.value
  FROM  tblhosting a INNER JOIN tblcustomfields b
            ON b.relid = a.packageid
        INNER JOIN tblcustomfieldsvalues c
            ON c.fieldid = b.id
 WHERE  a.id = '$id'  AND   
        a.userid = '$userid' AND 
        b.fieldname = 'foo' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:05:54.297

如果您只想从所有三个表中获取所有三个表中存在行的行，这就是我假设您想要的，SQL 如下所示：

```
select
    a.id,
    b.value,
    c.packageid
from
    tbcustomfields a,
    tblcustomfieldsvalues b,
    tblhosting c
where
    c.userid='$userid'
    and a.relid=b.relid
    and a.relid=c.packageid
    and a.fieldname='foo'
    and b.fieldid=c.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T12:43:28.883

```
SELECT
  tblcustomfieldvalues.value
FROM tblhosting
  LEFT JOIN tblcustomfields
    ON tblcustomfields.relid = tblhosting.packageid
      AND tblcustomfields.fieldname = 'foo'
  LEFT JOIN tblcustomfieldsvalues
    ON tblcustomfieldsvalues.fieldid = tblcustomfields.id
      AND relid = '$id'
WHERE tblhosting.id = '$id'
    AND tblhosting.userid = '$userid' 
```

尝试这个

# javascript - Javascript比较一个数组中的项目

> ID：11092280
> 
> 赞同：1
> 
> 时间：2012-06-18T23:00:50.270
> 
> 标签：javascript

请原谅我事先完全缺乏 javascript 知识，但我似乎找不到一个很好的例子来说明如何比较两个数组并根据结果创建另一个数组。

我正在尝试从存储设备获取用户帐户列表（使用 javascript 并处理 MOST 功能正常），并将它们与静态创建的“好”用户列表进行比较。

使用 switch 语句是可行的，但我真的不喜欢它，而且我确信有更好的方法（当我查询时，userList 是从设备动态填充的）：

```
for (userName = 0; userName < userList.length; userName++) {
    switch (userList[userName]) {
    case 'someuser1':
            printf('Username: ' + userList[userName] + ' is good\n');
            break;
    case 'someuser2':
            printf('Username: ' + userList[userName] + ' is good\n');
            break;
    case 'someuser3':
            printf('Username: ' + userList[userName] + ' is good\n');
            break;
    default:
            printf('Username: ' + userList[userName] + ' is NOT good\n');
    } 
} 
```

我想创建第三组“坏用户”，并将它们与一组新的“好用户”和“找到的用户”进行比较。我开始了：

```
var goodUsers = ["someuser1", "someuser2", "someuser3"]; 
```

但是，我无法找出多个 for 循环、if 语句或其他方式的正确组合来比较两者并给我一个“坏用户”数组，我可以循环并对其执行操作。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:07:46.217

Array 的`indexOf`方法很贴心。如果存在则返回数组中元素的位置，如果不存在则返回 -1。

```
var goodUsers = ["someuser1", "someuser2", "someuser3"];
var users = ["someuser1", 'basuser'];
var user;

for (var i=0; i < users.length; i++) {
  user = users[i];
  if (goodUsers.indexOf(user) >= 0) {
    console.log(user + ' is a good user');
  } else {
    console.log(user + ' is BAD!!!');
  }
}​ 
```

[http://jsfiddle.net/qz5fx/1](http://jsfiddle.net/qz5fx/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:07:23.420

用于`indexOf`查找用户是否存在于您的阵列中。

```
var goodUsers = ["someuser1", "someuser2", "someuser3"];
var storedUsers = ["someuser1", "user", "user3"];
for(var goodUser in goodUsers){
    if(storedUsers.indexOf(goodUsers[goodUser])>-1){
       console.log('User:' + goodUsers[goodUser] + ' is good.')
       }
}
    ​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T00:01:30.483

`.indexOf`对于较大的列表，比将好的用户列表放入对象并在该对象上使用直接查找更有效的方法。这也适用于较旧的浏览器，因为它不需要该`Array.indexOf()`方法。

```
var goodUsers = {
    "someuser1": true, 
    "someuser2": true, 
    "someuser3": true
}; 
```

然后，您可以检查用户是否在该列表中：

```
if (goodUsers[user]) 
```

对于更长的列表，这比使用 indexOf 更有效，它只是遍历数组，将数组中的每个项目与目标进行比较，因为它使用哈希查找（如哈希表）。

如果您有一组候选用户并且您想知道列表中有哪些用户`goodUsers`，您可以这样做：

```
var goodUsers = {
    "someuser1": true, 
    "someuser2": true, 
    "someuser3": true
};

var candidateUsers = ["someuser4", "someuser1", "someuser5", "someuser2", "someuser6", "someuser3", "someuser7"];

function checkUsers(candidates) {
    var goods = [];
    for (var i = 0, len = candidates.length; i < len; i++) {
        var item = candidates[i];
        if (goodUsers[item]) {
            goods.push(item);
        }
    }
    return(goods);
}

var validUsers = checkUsers(candidateUsers); 
```

* * *

**编辑：**

虽然这个对象查找在现代 Javascript 中仍然有效，但现在 ES6 中有一个[`Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)and[`Map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)对象可以更简洁、更有效地完成这项工作。对于用户查找，您可能会使用该`Set`对象。

```
const goodUsers = new Set(["someUser1", "someUser2", "someUser3"]);
goodUsers.add("someUser4");

if (goodUsers.has(user)) {
    // user is in the set
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T23:22:50.030

我喜欢这个`indexOf`方法。小提琴示例：http: [//jsfiddle.net/8MV3J/](http://jsfiddle.net/8MV3J/)

```
var good = ["someuser1", "someuser2", "someuser3"];
var bad = [];
var ugly = ["someuser4", "someuser1", "someuser5", "someuser2", "someuser6", "someuser3", "someuser7"];
var i = 0;
var li;

for (i = 0; i < ugly.length; i += 1) {
    if (good.indexOf(ugly[i]) === -1) {
        bad.push(ugly[i]);
    }
}

for (i = 0; i < bad.length; i += 1) {
    li = $('<li />').text(bad[i]);
    $('ul#bad').append(li);
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T23:15:46.150

The brute force method would be something like this:

```
var users = []; // here is where you get the users from the device
var goodUsers = []; // here you get your good users list
var badUsers = []; // initialize an empty array for bad users

for (var i=0; i< users.length; i++) {
    var isAGoodUser = false;
    for(var y=0; y< goodUsers.length; y++) {
        if(users[i] == goodUsers[y]) {
            printf('Username: ' + users[i] + ' is good\n');
            isAGoodUser = true;
            break;
        }
    }
    if(!isAGoodUser){
        printf('Username: ' + users[i] + ' is NOT good\n');
        badUsers.push(users[i]);
    }
} 
```

# javascript - 获取元素的问题

> ID：11092282
> 
> 赞同：0
> 
> 时间：2012-06-18T23:00:52.200
> 
> 标签：javascript

我有一张在事件 onload 上设置的图片：

```
function hideMe() {

        document.getElementById("navy1").style.display = "none";  
    } 
```

我还有另一个功能可以在屏幕上设置图片：

```
 function setUpPicture() {

        subRunnerOBJ = new Object();
        subRunnerOBJ.topPos = 100;
        subRunnerOBJ.leftPos = 0;
        subRunnerOBJ.velX = 400;
        subRunnerOBJ.velY = 0;
        subRunnerOBJ.score = 0;

        snImgObj = document.getElementById("navy1"); 
```

**//此时我收到消息“Microsoft JScript 运行时错误：无法获取属性'style'的值：对象为空或未定义”**

```
 snImgObj.style.left = subRunnerOBJ.leftPos + "px";
        snImgObj.style.top = subRunnerOBJ.topPos + "px";
        snImgObj.style.position = "absolute";
        snImgObj.style.display = "show";

        startMovePicture(); 
```

知道为什么会这样吗？

```
 //this one will set the the pictue on the right side of the screen
    function setUpPicture() {

        subRunnerOBJ = new Object();
        subRunnerOBJ.topPos = 100;
        subRunnerOBJ.leftPos = 0;
        subRunnerOBJ.velX = 400;
        subRunnerOBJ.velY = 0;
        subRunnerOBJ.score = 0;

        //document.getElementById("navy1").style.display = "show";
        snImgObj = document.getElementById("navy1");
        snImgObj.style.left = subRunnerOBJ.leftPos + "px";
        snImgObj.style.top = subRunnerOBJ.topPos + "px";
        snImgObj.style.position = "absolute";
        snImgObj.style.display = "show";
        //once we place the location of the sub , we will Call to new function that will move it
        startMovePicture();

    }
    function startMovePicture() {

        dt = 50; // in miliseconds
        h = setInterval("moveObj(subRunnerOBJ)", dt);

    }

    function moveObj(someObj) {
        counter = 0;

        while (counter < 3000) {

            subRunnerOBJ.leftPos = subRunnerOBJ.leftPos + subRunnerOBJ.velX * dt / 1000;
            subRunnerOBJ.topPos = subRunnerOBJ.topPos + subRunnerOBJ.velY * dt / 1000;

            snImgObj.style.left = subRunnerOBJ.leftPos + "px";
            snImgObj.style.top = subRunnerOBJ.topPos + "px";

            counter = counter + 50;

            if (counter == 3000) {

                stopRunning()

            }

        }

    }

    function stopRunning() {

        clearInterval(h);
        hideMe();
    }

    //this function will hide the pucture on liad , and once the loop with the Pictue Running will end
    //once loading the page we will not see the Picture 
    function hideMe() {

        document.getElementById("navy1").style.display = "none";  
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:31:59.320

> 无法获取属性“样式”的值：对象为空或未定义”

这意味着您正在尝试使用对象的属性，而该对象实际上是一个`null`或`undefined`值。在你的情况下`snImgObj`是`null`.

发生这种情况是因为以下代码无法找到 id 为“navy1”的元素

```
snImgObj = document.getElementById("navy1"); // snImgObj is NULL in your case 
```

这可能有很多原因：

1.  您的元素根本不存在。
2.  您忘记设置 id 或拼写错误的 id 声明。
3.  您在尝试通过 id 获取元素*后创建元素。*
4.  您的元素存在，但尚未完成加载。
5.  ... ETC。

**如果您打算使用 来创建元素`getElementById`**，则应改用以下方法：

```
var element = document.createElement('div'); // creates a dangling DOM node
someOtherElement.appendChild(element); // appends it to another element 
```

似乎旧版本的 Internet Explorer 不允许以这种方式创建图像，但您可以[**阅读此答案**](https://stackoverflow.com/a/227093/632133)以了解如何以跨浏览器的方式完成。

**还**

1.  CSS`display`属性不理解“显示”。您可能希望将其设置为“阻止”。请参阅显示属性的[文档](https://developer.mozilla.org/en/CSS/display)。

    ```
    snImgObj.style.display = "block"; // this is valid 
    ```

2.  **`var`声明变量时总是使用！**您正在污染全局范围。

3.  不要将字符串传递给`setInterval`，它[接受函数](https://developer.mozilla.org/en/window.setInterval)。
4.  使用[JSLint](http://www.jslint.com/)验证您的代码。它会告诉你你的大部分问题在哪里。这很值得！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:33:37.403

问题是`snImgObj`没有设置到`setUpPicture()`. 仔细检查您的 HTML。

# php - 修改 php DateTime 对象

> ID：11092285
> 
> 赞同：0
> 
> 时间：2012-06-18T23:01:11.307
> 
> 标签：php, datetime, dateinterval

我对修改 php DateTime 对象的正确方法有疑问。目前，我正在做类似的事情：

```
$origEvent = new DateTime(...);
$newEvent = new DateTime(...);
$someOtherEvent = new DateTime(...);

//get the time difference between the orignal event and the edited event
$diff = $origEvent->diff($newEvent);

$someOtherEvent->add($diff); 
```

无论我们是从 $someOtherEvent 中增加还是减少时间，使用 DateTime::add() 方法*似乎都有效。*这是正确的方法吗？我知道有用于减去时间的 DateTime::sub()，但似乎只要 DateInterval（由 $origEvent->diff() 产生）具有反转标志，DateTime::add() 就知道实际上减去时间。这个对吗？我应该使用 DateTime::modify 之类的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:27:26.613

实际上，DateTime::diff() 以相对的方式返回两个 DateTime 对象之间的差异。因此 ：

*   如果 date1 小于 date2 则 date1->diff(date2) 将导致*负*间隔
*   如果 date2 小于 date1 则 date1->diff(date2) 将产生一个*正*区间

所以 ：

*   使用带有负间隔的 DateTime::add() 等价于使用带有相同间隔的**绝对值的 DateTime::sub()**
*   使用带负间隔的 DateTime::sub() 等价于使用具有相同间隔**绝对值的 DateTime::add()**

出于代码清晰的原因，您可以将 DateTime::diff() 的第二个参数设置为 true，以便每次获得绝对差异，然后在 DateTime::add() 和 DateTime::sub( ) 知道你有绝对的不同。

关于 DateTime::modify() 和 DateTime::add(), DateTime:sub() 之间选择的一些话：

*   只要您使用 DateTime::diff()，您就假定您的 PHP 版本大于或等于 5.3.0，并且您可以使用此 PHP 版本中提供的所有新功能；也就是说 DateTime::add() 和 DateTime::sub()
*   当您的 PHP 版本大于或等于 5.2.0 时，使用 DateTime::modify() 是合理的。（在此版本中 DateTime::add() 和 DateTime::sub() 尚不可用）

# javascript - 如何创建共享单个列表的链接下拉列表并确保每个值只能在一个下拉列表中选择？

> ID：11092291
> 
> 赞同：2
> 
> 时间：2012-06-18T23:01:50.953
> 
> 标签：javascript, knockout.js

我正在尝试使用淘汰赛创建一组下拉列表，允许用户从列表中选择最多 3 个值，例如颜色。列表开头为：- 红色、橙色、黄色、绿色、蓝色、靛蓝色、紫色

```
DropDown 1 - Select any of the 7
DropDown 2 - Select any of the 6 remaining
Dropdown 3 - Select any of the 5 remaining 
```

如果用户返回并将 DropDown 1 更改为某种颜色，他们应该只能选择其他剩余颜色（以及 Drop Down 1 中的颜色）。如果他们随后更改它，我将能够转到下拉列表 2 或 3 并将其更改为以前在 1 中的值。

我想我需要一个包含 7 个项目的初始数组，然后我需要一个可观察的每个下拉列表。3 个 observables 必须基于初始数据并排除其他三个下拉列表中的选择。我真的很挣扎。我什至无法实现它。

这是否可能或是否适合用于 Knockout 或者我应该只使用 onChange 来查看 JS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:16:52.867

这在 Knockout 中绝对是可能的。可能有 10 种方法可以做到这一点。我在这里想出了一种方法：

[http://jsfiddle.net/mbest/wfW97/](http://jsfiddle.net/mbest/wfW97/)

这是供参考的代码：

```
function ViewModel() {
    var self = this;
    self.colors = ['red','orange','yellow','green','blue','indigo','violet'];
    self.selections = [];
    ko.utils.arrayForEach(self.colors, function() {
        self.selections.push(ko.observable());
    });
    self.selfAndUnselectedColors = function(index) {
        var selfColor = self.selections[index]();
        return ko.utils.arrayFilter(self.colors, function(color) {
            return color === selfColor || !ko.utils.arrayFirst(self.selections, function(sel) {
                return color === sel();
            });
        });
    }
}
ko.applyBindings(new ViewModel()); 
```

和 HTML：

```
<div data-bind="repeat: colors.length">
    <select data-bind="options: selfAndUnselectedColors($index), optionsCaption: 'select a color', value: selections[$index]"></select>
</div>​ 
```

我正在使用我的[重复](https://github.com/mbest/knockout-repeat)绑定插件来创建重复的选择元素，但如果你愿意，你可以使用其他方法。

# iphone - 完成时 AVExportSession 更改视图

> ID：11092295
> 
> 赞同：0
> 
> 时间：2012-06-18T23:02:10.397
> 
> 标签：iphone, ios, xcode, interface-builder

我在使用 AVExportSession 时遇到了许多相关问题。我很清楚我可能会尝试这个错误，但尝试了几个解决方案都无济于事。

我正在使用 AVExportSession 导出合成，然后使用完成处理程序在完成后触发其他代码（通常应该在 3 秒内）。当我想在完成时更改视图时，问题就来了。例如，我在模态视图中有一个触发音频导出的按钮，但我希​​望它随后在完成时关闭视图。我收到的错误消息非常明显 - “这可能是从辅助线程调用 UIKit 的结果。”

```
NSURL *exportURL = [NSURL fileURLWithPath:saveSong];
exportSession.outputURL = exportURL;
exportSession.outputFileType = @"com.apple.m4a-audio";
[exportSession exportAsynchronouslyWithCompletionHandler:^{
    if (AVAssetExportSessionStatusCompleted == exportSession.status) {
        NSLog(@"AVAssetExportSessionStatusCompleted");

        [[NSNotificationCenter defaultCenter] 
         postNotificationName:@"end" 
         object:self];

    } else if (AVAssetExportSessionStatusFailed == exportSession.status) {
        // a failure may happen because of an event out of your control
        // for example, an interruption like a phone call comming in
        // make sure and handle this case appropriately
        NSLog(@"AVAssetExportSessionStatusFailed");
    } else {
        NSLog(@"Export Session Status: %d", exportSession.status);
    }
}]; 
```

我当前的尝试涉及发送 NSNotification 以关闭视图以尝试跳转到主线程。

非常抱歉，如果这看起来不清楚 - 我在寻找解决方案时遇到的部分问题在于表达出了什么问题。我希望通过发布我在描述中的失败尝试，有人可能会问我正确的问题，从而获得答案的线索！

这也是我试图解决的另一个问题的一个分支。当我开始导出时，我取消隐藏动画 UIActivityView，但是当尝试在完成时隐藏时，UIActivityView 最终隐藏完成（NSLog-ed）后大约 20 秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:53:16.827

解决方案：使用 [self performSelectorOnMainThread:@selector(stopActivityIndi​​cator) withObject:nil waitUntilDone:YES];

然后从 -(void)stopActivityIndi​​cator 调用我的视图更改/活动指示器的东西

# c# - 变量应该是显式类型还是隐式类型？

> ID：11092296
> 
> 赞同：2
> 
> 时间：2012-06-18T23:02:22.327
> 
> 标签：c#, variables

他们说一个人不应该带着两个计时器出海，或者戴两个手表。您应该使用一个可靠的，或者三个（或更多）来遵循“多数规则”。

那么，我应该安装另一个代码重构助手，还是卸载其中一个？我已经安装了两个，他们为这行代码是否：

```
using (StreamReader file = new StreamReader(ChemicalMakeupOfEveryDropOfWaterInTheMississippi)) 
```

...应该是这样的：

```
using (var file = new StreamReader(ChemicalMakeupOfEveryDropOfWaterInTheBigMuddy)) 
```

如果我明确指定类型，带有灯泡装订线图标的工具会告诉我：

“使用隐式类型的局部变量声明|使用'var'”

如果我默认并允许它将显式转换为隐式，则另一个工具（在装订线中带有铅笔图标的工具）会显示“明确指定类型”并将“var”更改回“StreamReader”

我陷入了一个无限循环，将显式更改为隐式并再次返回。我的看法是这并不重要，但我把这个难题抛给了 StackOverflow 人群的智慧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T23:05:26.437

我更喜欢显式类型的变量，因为它们可以让读者更快地掌握代码在做什么。它们还有助于在编码时实施更严格的类型安全（从阅读代码的人的角度来看），这有助于防止在开发过程中由于不确切知道正在使用什么类型而出现许多错误。

在我看来，唯一一次应该使用隐式类型变量是在 linq 查询期间返回各种匿名类型时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:05:32.360

没有区别。您可以使用这两个版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T23:07:15.023

除非声明会占用不合理的空间，过于复杂，或者您不确定类型是什么，否则您应该显式输入。它通常会提高可读性，并使逻辑更容易理解。

但是，如果您遇到任何提到的异常，请使用隐式类型，因为它会提高可读性。

`Var`当您有中间结果时，也适用于对集合进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T23:07:47.503

卸载或重新配置其中一个，这非常重要。我更喜欢明确的，但那只是我....

# xml - Spring MVC Jaxb2Marshaller 无法正确处理继承类

> ID：11092297
> 
> 赞同：2
> 
> 时间：2012-06-18T23:02:39.130
> 
> 标签：xml, spring, controller, jaxb, polymorphism

我有一个 Spring MVC 控制器来生成 XML，它生成常规对象没有任何问题。但是，看起来它不正确支持多态性。我想这可能是配置问题。

这是我的类层次结构。

```
abstract class Base {
   String attr1;
}

class Child1 {
   String attrChild1;
}

class Child2 {
   String attrChild2;
}

@XmlRootElement
class MyList {

   @XmlElement (name="list")
   List<Base> lists;
} 
```

然后我将 Child1 的 1 个实例和 Child2 的一个实例添加到列表中。

如果我手动使用 JAXB 来编组它，它将生成一些像这样的 XML

```
<list xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="child1">
  <attr1>...</attr1>
  <attrChild1>...</attrChild1>
</list>
<list xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="child2">
  <attr1>...</attr1>
  <attrChild2>...</attrChild2>
</list> 
```

但是，如果我穿过春天，我只会得到

```
<list>
  <attr1>...</attr1>
</list>
<list>
  <attr1>...</attr1>
</list> 
```

有什么建议么？

这是我的控制器类

```
@RequestMapping(value="/rest/test", method=RequestMethod.GET, produces="application/xml")
public @ResponseBody MyList getMyList() {
      MyList myList = ....;
      // add instance of Child1/2
      return myList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:27:54.763

尝试添加：

```
@XmlSeeAlso({Child1.class, Child2.class})
abstract class Base {
} 
```

# android - 旋转手机时始终启动新活动

> ID：11092309
> 
> 赞同：1
> 
> 时间：2012-06-18T23:05:04.517
> 
> 标签：android

我将以下代码添加到我的manfest文件中，认为它会在设备（2.2）旋转时禁用android创建新进程，但它不起作用

```
 <activity android:name=".cYesNoDisplay"  android:label="Your Answer">   
                android:configChanges="orientation"   
                android:configChanges="ScreenSize"        
    </activity> 
```

我认为通过贴花方向和屏幕大小不会创建新活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:09:15.577

您是否也进入了活动 .cYesNoDisplay 并覆盖了 onConfigurationChanged() 方法？您不需要在那里实现任何东西，只需覆盖它应该可以防止在旋转更改时重新创建活动。

# c++ - 如何在 E_NOTIMPL 和 E_NOINTERFACE 之间进行选择？

> ID：11092313
> 
> 赞同：5
> 
> 时间：2012-06-18T23:05:32.223
> 
> 标签：c++, oop, com, hresult

我已经设法让自己感到困惑，我应该返回`E_NOTIMPL`还是`E_NOINTERFACE`从我的 COM 服务器方法中返回。

我有一个有两个函数的类，我从继承的类中重写了这两个函数，因为它们目前不被真正支持，所以我问我应该使用“未实现”还是“无接口”这些函数返回值？

有没有人有一个关于何时使用每个的一般经验法则？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T23:27:23.867

如果您未能实现整个接口，那么您`QueryInterface`可以显式地 return `E_NOINTERFACE`，这样没有人会尝试调用它的任何方法，或者您可以让所有方法都可以返回`E_NOTIMPL`（在某些边缘情况下这样做实际上是有意义的）。如果你部分实现了一个接口，那么你根本不应该返回`E_NOINTERFACE`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T23:26:56.237

如果一个类没有提供所请求接口的完整实现，则返回 E_NOINTERFACE。如果一个类没有实现接口函数的主体/逻辑，则返回 E_NOTIMPL。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T05:44:52.883

您确实（正式）实现了接口，所以`E_NOINTERFACE`不适合您。碰巧你的方法没有有用地实现，所以你应该 return `E_NOTIMPL`。

# javascript - Javascript string.length 和 string.lastIndexOf 差异值

> ID：11092314
> 
> 赞同：0
> 
> 时间：2012-06-18T23:05:32.707
> 
> 标签：javascript, html

为了简化我的问题，假设我有以下脚本：

```
var sPath = "/page/script/";
if (sPath.length != sPath.lastIndexOf("/"))
    sPath = sPath + '/';
// do something else 
```

为什么它没有进入条件？为什么它是一个差异值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:07:59.117

因为`sPath.length`is `13`，但是 this 的最后一个字符是 string （并且`lastIndexOf('/')`）是 the `12th`，因为 Javascript 向量从`0`到`n`。

例如，字符串“ABC”的长度为`3`，但它的位置是`0`，`1`和`2`。

但是，这应该有效：

```
var sPath = "/page/script/";
if ((sPath.length-1) != sPath.lastIndexOf("/"))
    sPath = sPath + '/'; 
```

JSFiddle 示例：http: [//jsfiddle.net/zGyAa/](http://jsfiddle.net/zGyAa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:09:03.470

您的问题的直接解决方案是 xvatar 发布的内容。

但是，您可以使用正则表达式来检查最后一个字符是否为 ，而不是将长度与最后一个索引进行比较`/`：

```
if(/\/$/.test(path)) {
   ...
} 
```

恕我直言，这更明显更清晰。

另一件事，请考虑在`if`语句周围使用大括号，即使它们是单行的。创建各种令人沮丧的错误非常容易。例如，如果您有：

```
if(somecondition) 
   dosomething(); 
```

然后有人过来并补充说：

```
if(somecondition) 
   dosomething();
   dosomethingelse(); 
```

第二个函数调用不会被调用。当然，现在看起来很明显，但是在你最终找出问题所在之前，这可能会导致大量的头发拉扯。当您添加大括号时，它会使您的代码保持一致，并且您可以轻松分辨哪些代码属于`if`. ，哪些不属于 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T23:07:32.950

它应该是`if ((sPath.length - 1) != sPath.lastIndexOf("/"))`

在几乎所有编程的默认上下文中，最大的索引是长度 - 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T23:14:32.280

减一！`.length`不是从零开始的，`(last)indexOf`是

所以最后一个字符的索引是`.length - 1`

# macos - 基于视图的表格视图和动画

> ID：11092316
> 
> 赞同：0
> 
> 时间：2012-06-18T23:05:42.300
> 
> 标签：macos, core-animation, nstableview, appkit

我最近改用基于视图的 tableview，因为它极大地简化了我的很多代码，到目前为止我很喜欢它。

在 WWDC 2011 会议视频中提到和演示的示例应用程序中，它们有一些很酷的动画，实现起来相当简单。但是，我使用我自己的控制器/模型填充 tableview，因此不使用可可绑定。我想知道每当我添加一个项目时，如何使用基于视图的表格视图来实现“淡入”动画。

目前正在做以下工作：

*   模型将更新：[tableView beginUpdates]
*   [tableView insertItemsAtIndexes:[NSIndexSet indexSetWithIndex:someIndex] withAnimation:NSTableViewAnimationFadeIn];
*   更新模型
*   [tableView endUpdates]

# php - 在 MongoDB 中搜索和编辑值

> ID：11092318
> 
> 赞同：0
> 
> 时间：2012-06-18T23:05:43.370
> 
> 标签：php, mongodb, mongodb-php

我有一个 MongoDB 集合，看起来像这样：

```
[
    {
        "title": "Entry 1",
        "visible": true
    },
    {
        "title": "Entry 2",
        "visible": true
    }
] 
```

我想找到`title`与我的查询匹配的条目（例如，`array("title" => "Entry 1")`），并更改其`visible`属性。

这似乎非常简单，但我还没有找到任何方法来做到这一点。我看到了如何将我想要的条目作为数组返回。在我看来，我不应该获取整个对象（它比这个例子有更多的属性），改变一件小事，然后再把整个对象放回去。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:15:27.983

阅读[位置运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

```
db.pos.insert({arr: [{"title": "Entry 1", "visible": true},     
                     {"title": "Entry 2", "visible": true}]})

db.pos.update({'arr.title': 'Entry 1'}, 
              {$set: {'arr.$.visible': false}})

db.pos.find()
> { "_id" : ObjectId("4fdfb65e9c9cf2c23bbdd669"), "arr" : [     {   "title" : "Entry 1",    "visible" : false },    {   "title" : "Entry 2",    "visible" : true } ] } 
```

# javascript - Chrome 扩展中的谷歌分析

> ID：11092320
> 
> 赞同：3
> 
> 时间：2012-06-18T23:05:47.130
> 
> 标签：javascript, google-chrome-extension, google-analytics

在 Google Analytics 上，我没有在我的 chrome 扩展程序中看到我的自定义跟踪事件。

我的内容脚本向 bg 页面发送一条消息，如下所示：

```
chrome.extension.sendRequest({message: "report"}, function(response) {}); 
```

我的 bg.js 包含以下内容：

```
 var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-57683948-1']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = 'https://ssl.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

function cEvent(){
    _gaq.push(['_trackEvent', 'reported']);
    console.log("got this far");
    }

chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");
    if (request.message == "report")
    cEvent();
  }); 
```

自 4 天前添加此代码以来，Google Analytics 每天都在接收新数据。它正在正确注册页面视图，但我没有在任何地方看到我的自定义事件“报告”。我知道正在调用该函数，因为我在控制台中看到了我的“到此为止”。但是没有发送跟踪事件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T23:25:06.303

[_trackEvent](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEventTracking#_gat.GA_EventTracker_._trackEvent)至少有 2 个必需参数。尝试将其替换为：

```
_gaq.push(['_trackEvent', 'reported', 'reported']); 
```

# sql - 具有两个子级别的实体框架查询

> ID：11092332
> 
> 赞同：0
> 
> 时间：2012-06-18T23:07:28.280
> 
> 标签：sql, sql-server-2008, entity-framework, entity-framework-4

我有一个 SQL 问题需要请教专家。老实说，我什至不知道如何问它，所以我会举个例子。

我有一个名为 Clients 的顶级表 我的客户有 Locations 所以我有一个名为 Locations 的表每个位置都有联系人所以我有一个名为 Contacts 的表

SQL中的关系看起来像

客户 ---> 地点 ---> 联系人。

请注意，客户和联系人之间没有定义直接关系。

我需要为给定的客户退回所有客户。

我如何使用实体框架工作来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:12:26.920

假设您想要一个 LINQ to Entities 查询：

```
context.Clients.SelectMany(
    client => client.Locations.Select(
        location => location.Contacts)).Distinct().ToList(); 
```

# google-drive-api - 我可以将新文件类型与 Google Drive Viewer 集成吗？

> ID：11092333
> 
> 赞同：2
> 
> 时间：2012-06-18T23:07:30.273
> 
> 标签：google-drive-api

我意识到可以为存储在 Google Drive 上的文件创建一个*新*的查看器，但是有没有办法与现有的 Google Drive Viewer 集成并为不受支持的文件类型生成预览？

我想嵌入一个 Java 小程序来代替“没有可用的预览”框。喜欢：

```
<object type="application/x-java-applet" height="XXX" width="XXX">
    <param name="code" value="MyApplet" />
    <param name="archive" value="MyApplet.jar" />
    <param name="driveFile" value="PATH TO FILE" />
</object> 
```

可以做到这一点，还是我必须为这样简单的事情创建一个全新的查看器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:07:12.627

现在你必须为此创建一个新的查看器。将来我们可能会允许您上传文件的预览，但它可能只是我们将用于缩略图和预览的静态图像。

# google-visualization - 带注释的时间线谷歌图表显示问题

> ID：11092336
> 
> 赞同：1
> 
> 时间：2012-06-18T23:07:44.830
> 
> 标签：google-visualization, annotatedtimeline

我在带注释的时间线谷歌图表上显示数据。它可以很好地显示数据，但是如果我向下滚动浏览器页面然后向上滚动，它会切断图表的顶部并且在我将鼠标悬停在它上面之前不会显示它。这是它之前和之后的样子

**前** [![前](../Images/c2b34c0fc111d86f597943d574c385b3.png)](https://i.stack.imgur.com/BnP7J.png)

**后** [![后](../Images/0a5b6f6bdacd0b668415fc05c4963bf7.png)](https://i.stack.imgur.com/KhIhI.png)

我该如何解决这个问题？（严重的是谷歌图表 API 很烂）

# java - 如何在 android 中为 google apis 交换 OAuth2 令牌的授权码？

> ID：11092340
> 
> 赞同：3
> 
> 时间：2012-06-18T23:07:58.673
> 
> 标签：java, android, authorization, oauth-2.0

如何在 android 中为 google apis 交换 OAuth2 令牌的授权码？如果你去[https://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)你可以交换它们，但我需要能够在一个安卓应用程序中做到这一点！有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T01:08:41.923

我自己发现了！:)

您需要做的就是使用授权码、客户端 ID、客户端密码、redirect_uri 和授权类型向 accounts.google.com/o/oauth2/token 发送 HttpPost！我将代码添加到答案中，这样您就可以看到如何准确地做到这一点！希望能帮助到你

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/token");
List<NameValuePair> pairs = new ArrayList<NameValuePair>();
pairs.add(new BasicNameValuePair("code", "<your_auth_code>"));
pairs.add(new BasicNameValuePair("client_id", "<your_client_id>"));
pairs.add(new BasicNameValuePair("client_secret", "<your_client_secret>"));
pairs.add(new BasicNameValuePair("redirect_uri", "<your_redirect_uri>"));
pairs.add(new BasicNameValuePair("grant_type", "authorization_code")); //Leave this line how it is   
post.setEntity(new UrlEncodedFormEntity(pairs));
org.apache.http.HttpResponse response = client.execute(post);
String responseBody = EntityUtils.toString(response.getEntity());
Log.v("message", responseBody); // That just logs it into logCat 
```

# flash - 在循环中创建按钮需要不同的 id

> ID：11092342
> 
> 赞同：0
> 
> 时间：2012-06-18T23:08:04.613
> 
> 标签：flash, actionscript, action

我正在尝试使用 xml 数据制作动态菜单，我正在使用循环创建该菜单这是我的代码

```
for (var i:int = 0; i < iloscWpisow; i++)
        {
            _guzik=new guzikIK();
            _guzik.guzikIK_Over.alpha=0;

            _guzikTekst = new TextField();
            _guzikTekst.x = _tekstX;
            _guzikTekst.y = _tekstY;
            _guzikTekst.selectable = false;
            _guzikTekst.width = _tekstSzerokosc;
            _guzikTekst.height = _tekstWysokosc;
            /*_guzikTekst.embedFonts = true;*/
            tekst.color = 0xFFFFFF;
            /*tekst.font = _arialRounded.fontName;*/
            tekst.size = 18;
            _guzikTekst.defaultTextFormat = tekst;

            _guzikTekst.text = xml.children()[i]. tytul;

            _guzik.addChild(_guzikTekst);

            _guzik.x=32;
            _guzik.y=_tekstPolozenie*i+55;

            _guzik.buttonMode=true;
            _guzik.mouseChildren = false;
            _guzik[id]=i;
            _menu.addChild(_guzik);
            _guzik.addEventListener(MouseEvent.MOUSE_DOWN, klik); 
```

问题是每个按钮最后都有相同的 id，我需要为每个屁股设置不同的 id，以便可以识别它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:21:28.027

很难说出你到底在问什么，但我会采取的方法是将所有按钮存储在一个数组中，然后通过它们在数组中的索引来引用这些按钮。就像是：

```
var buttons:Array = [];
buttons.push(new Button());
buttons[0].buttonMode = true; 
```

# jvm - JVM 或 CLR 是否使用寄存器来运行 JIT 代码？

> ID：11092346
> 
> 赞同：6
> 
> 时间：2012-06-18T23:08:27.167
> 
> 标签：jvm, clr, jit, cpu-registers

我知道 JVM 和 CLR 被设计为基于堆栈的虚拟机。当 JIT 将字节码编译为本机代码时，它是否还将堆栈原语（加载/存储）转换为 X86 平台上的寄存器？

如果是的话，看起来字节码是基于堆栈还是基于寄存器并不重要。JIT 很重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T23:34:46.540

我认为您混淆了两个不同的概念。

至少对于 Java，JVM 充当虚拟机——它是一个理想化的计算机，具有相对高级的汇编语言（字节码），它基于带有堆栈帧的调用堆栈。在将 Java 编译为字节码时，Java 程序（本质上）变成了用于控制这台机器的汇编程序。

在给定系统上实际运行 Java 时，JVM 实现的工作是使用实际可用的任何硬件忠实地模拟这个基于堆栈的机器的执行。这通常意味着大量的堆栈操作将在可能的情况下使用寄存器来实现，并且可能使用 Java 虚拟机描述中不存在的其他专用硬件。如何做到这一点的实际细节是特定于实现的——一些实现可能会将其编译为几乎所有在寄存器中完成的机器代码，而更简单的实现可能只是编译为内存中的操作。我在 JVM 的 JavaScript 实现上工作了几个月，在这种情况下，我们将代码“编译”为 JS 函数，

这种区别的原因是Java被设计成易于下载和嵌入（想想applet）。在这种情况下，安全性和可移植性是重要的考虑因素。字节码必须有某种方法可以自动检查以排除某些类型的恶意代码（例如缓冲区溢出）。同样，无论使用何种格式，都必须足够高级，以便可以在各种不同的平台（手持设备、超级计算机、PC 等）上运行。选择基于堆栈的 JVM 使这两个问题成为可能同时满足。它足够高级，可以检查字节码以排除许多类型错误或未初始化内存的读/写，同时足够低级，JVM 可以使用诸如使用寄存器编译代码之类的技巧。

如果您好奇**您的特定**JVM 将对特定代码段做什么，您应该查看文档。大多数 JVM 都有某种方式可以为您提供有关它们如何执行代码的信息。如果您的问题是“为什么不让字节码进行基于寄存器的操作”，原因有两个：

1.  字节码中有一个类似的寄存器 - 每个堆栈帧都有一些额外的专用空间用于存储临时值，并且
2.  对寄存器的支持不如 x86 或 MIPS 中的强大，因为 JVM 代码必须易于在多个硬件上执行，并且在多个寄存器中硬编码可能会使事情复杂化。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T01:01:33.457

*在 x86 内核上不*使用寄存器是不可能的。处理器没有添加两个局部变量的指令。其中一个*必须*加载到寄存器中。然后您可以将寄存器中的值添加到变量中的值。并将结果存储回堆栈变量。

从这个序列中可以明显看出优化机会。就像*不*将其存储回来，而是将结果保存在寄存器中并稍后使用它，同时保存存储和加载。那是优化器的工作，它寻找方法来充分利用可用的寄存器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:29:28.267

唯一确定的方法是检查 JIT 编译的输出，但可以肯定地说，使用寄存器是 JIT 编译器最蹩脚的优化之一。我相信大多数程序员很难写出比 JIT 编译器更快的代码。

JIT 编译器有很多功能，并且可能会尽可能多地使用寄存器。方法内联之类的东西鼓励使用寄存器，并且许多命令式程序代码可以在基于寄存器的架构上更简单地表达，因此只有 JIT 编译器使用寄存器才有意义。

# mysql - 如何使用不改变原始值的查询更新数据库中的数据？

> ID：11092348
> 
> 赞同：0
> 
> 时间：2012-06-18T23:08:46.177
> 
> 标签：mysql, sql-update

假设我有多个命令，例如 5000 更新数据库中的某些列和行 - 例如，它是数字

```
UPDATE salary SET money=2000000 WHERE person=55; 
```

有没有办法在不破坏原始值的情况下更新这些数据？可以说这笔钱已经存在并且价值不同？我搜索了谷歌和 MySQL 手册，但没有找到任何有用的查询。有没有办法在不破坏原始值的情况下更新这些数据？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:19:23.183

你的猜测几乎是完美的。

```
UPDATE salary SET money=money+2000000 WHERE person=55; 
```

# android - 安卓网络服务

> ID：11092352
> 
> 赞同：1
> 
> 时间：2012-06-18T23:09:14.950
> 
> 标签：android, web-services, sqlite

我正在开发一个严重依赖 RSS 源的应用程序。我不确定如何管理所有提要，并认为我应该使用数据库和 Web 服务。客户端将向服务器发出请求以获取提要，服务器将发送回 json/soap 消息，其中包含客户端对提要发出 http 请求所需的数据。

这是管理这些提要的好方法吗？如果数据会不断变化，我认为本地 sqllite db 不是合理的选择。

我没有非常快的互联网，因此托管网络服务器不是一种选择。是否有一个价格合理的选项来托管允许 JSON / SOAP 服务的数据库。我能找到的只有亚马逊的 SimpleDB，我不确定这是否是最佳选择。

我是移动开发的新手，因此非常感谢您的意见。

# php - PHP中的ajax jquery搜索表单

> ID：11092356
> 
> 赞同：0
> 
> 时间：2012-06-18T23:10:10.367
> 
> 标签：php, jquery, ajax

这是我的表格：

```
<form id="submitsearch" action="Classes/system/main/searchresult.php" method="POST">
Search by <span style="font-size:15px;">(developer, specialization, profession,major)</span>
    <input type="text" name="searchbox" id="searchbox" />
    in
    <select style="text-align:center;" name="countrysearch" id="countrylist">
        <option selected="selected" value="0">None</option>
        <option value="1">USA</option>
    </select>
<input style="margin-left:25px;" id="submitSearch" type="submit" value="Search"/>
</form> 
```

这是 Ajax jquery 代码：

```
 $("#submitSearch").click(function(){

    $.ajax({type:'POST', url: 'Classes/requests/search.php', data:$('#submitsearch').serialize(), cache: false, success: function(response) {
        $('#submitsearch').find('#pagePanel').html(response);

}); 
```

为什么它不起作用？php 文件正常返回正确的结果。

但我希望它使用 ajax 加载到另一个 id 为“pagePanel”的 div 中，而无需重新加载。

有什么帮助吗？我是阿贾克斯的新手。

编辑：

```
 $("#submitbutton").click(function(){

    $.ajax({type:'POST', url: 'Classes/system/main/searchresult.php', data:$('#submitsearch').serialize(), cache: false, success: function(response) {
        $('#pagePanel').html(response);

}})}); 
```

这对我有用。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:14:10.303

如果您有一个 type 的输入`submit`，它会猜猜是什么:)，提交表单，然后重新加载页面。把它变成：

```
<input style="margin-left:25px;" id="submitSearch" type="button" value="Search"/> 
```

然后确保您的 html 中确实*有*一个`pagePanel`元素。

现在有几个建议：

1.  不要将您的表单`#submitsearch`和按钮标识为`#submitSearch`...可能会出现混淆
2.  您可以使用 AJAX`.load()`而不是`.ajax()`直接在 DIV 中获取结果：

所以：

```
$("#pagePanel").load('Classes/requests/search.php', {$('#submitsearch').serialize()}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:17:34.827

如果您想在表单提交中使用 ajax，您需要取消它。

```
$("#submitSearch").click(function(event){
    $.ajax({type:'POST', url: 'Classes/requests/search.php', data:$('#submitsearch').serialize(), cache: false, success: function(response) {
        $('#pagePanel').html(response);
    });  
    event.preventDefault();//prevents submitting of the form
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:19:24.030

首先，您需要停止默认表单提交。在提交处理程序中返回`false`以停止默认。只需使用元素的 ID 即可，无需使用 find() 将数据插入其中。您尝试查找的元素没有出现在您的 html 中，尽管在您的代码建议的表单中

```
$("#submitSearch").click(function(){

    $.ajax({type:'POST',
           url: 'Classes/requests/search.php', 
           data:$('#submitsearch').serialize(),
           cache: false, 
           success: function(response) {
                 $('#pagePanel').html(response);
            }
    })

    return false;

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T23:21:23.123

按下`submit`按钮后，默认行为是提交表单并确实转到您提供给表单的操作 URL。现在，您想阻止这种行为。这意味着，您必须查看`onsubmit`表单的事件，并阻止实际提交。jQuery 有一个[`preventDefault()`](http://api.jquery.com/event.preventDefault/)方法可以做到这一点。

在您的情况下，您所要做的就是添加以下代码：

```
$(document).ready(function() {
    $("#submitsearch").on("submit", function (e) {
        e.preventDefault();
    });        
}); 
```

这是一个 jsFiddle 来演示它[**。**](http://jsfiddle.net/uHm5k/)

您显然可以对提交按钮执行相同的操作，只需将`e`变量作为参数添加到您的`click`事件并用于`e.preventDefault()`取消实际提交（但您仍然可以完美地执行 AJAX 请求）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T23:23:35.907

首先，您缺少一些右括号和大括号。请务必在浏览器中运行您的开发工具以检查控制台是否存在此类错误。我通常不使用 $.ajax ...我通常使用 $.post，但是使用您目前拥有的内容，我会重写为更接近于：

```
$("#submitsearch").submit(function(){

    var submitData = $(this).serialize();    
    $.ajax(
        {
            type:'POST', 
            url: 'Classes/requests/search.php', 
            data: submitData, 
            cache: false, 
            success: function(response) {
                $('#pagePanel').html(response);
            }
        }
    );
    return false;
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T08:15:04.250

您可以只以一组 JSON 对象的形式发送结果，然后根据结果动态创建 HTML，而不是将 HTML 负载发送回页面，这意味着发送回浏览器的数据要少得多，速度更快并且更有效率。

# android - 在特定的音频瞬间执行动作

> ID：11092357
> 
> 赞同：1
> 
> 时间：2012-06-18T23:10:14.300
> 
> 标签：android, audio

伙计们正试图在正在播放的音频的特定时刻执行一些操作，`getCurrentPosition()`但在那一刻没有执行。这是代码：

```
public class Sound_image_comboActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    MediaPlayer player = MediaPlayer.create(this, R.raw.start);
    player.start();
    while(player.getCurrentPosition()==5671){
        setContentView(R.layout.main2); 
    }
} 
```

}

提前致谢..！

# postgresql - 使用 Supervisord 运行 PostgreSQL

> ID：11092358
> 
> 赞同：5
> 
> 时间：2012-06-18T23:10:17.207
> 
> 标签：postgresql, ubuntu, postgresql-9.1, supervisord

我想在 Ubuntu 10.04 上使用 Supervisor 运行 PostgreSQL 9.1。目前，我使用 init 脚本手动启动 PostgreSQL：

```
/etc/init.d/postgresql start 
```

根据这篇文章： http: [//nicksergeant.com/using-postgresql-with-supervisor-on-ubuntu-1010/](http://nicksergeant.com/using-postgresql-with-supervisor-on-ubuntu-1010/)，我需要修改 PostgreSQL 配置以使其在 TCP 端口而不是 Unix 套接字上运行，以便使 PostgreSQL 与主管一起工作。

关于这种方法，我有两个问题：

1.  考虑到这更像是黑客攻击，这样做是否有任何含义（例如安全/权限、性能等）？

2.  为什么我们不能`postgresql`在 Supervisor 配置中运行相同的初始化脚本？相反，如上面的链接所示，它运行`postmaster`?

**更新**：

感谢下面两个答案的有用建议，我已经为 Supervisor 设置了一个脚本来直接调用 PostgreSQL：

```
#!/bin/sh

# This script is run by Supervisor to start PostgreSQL 9.1 in foreground mode

if [ -d /var/run/postgresql ]; then
    chmod 2775 /var/run/postgresql
else
    install -d -m 2775 -o postgres -g postgres /var/run/postgresql
fi

exec su postgres -c "/usr/lib/postgresql/9.1/bin/postgres -D /var/lib/postgresql/9.1/main -c config_file=/etc/postgresql/9.1/main/postgresql.conf" 
```

我还设置了 config:`/etc/postgresql/9.1/main/start.conf`以`manual`使 PostgreSQL 在启动时不会自动启动（但是，我不清楚是否加载了此配置）。然后我将 postgres 的 Supervisor 配置设置为：

```
[program:postgres]
user=root
group=root
command=/usr/local/bin/run_postgresql.sh
autostart=true
autorestart=true
stderr_logfile=/home/www-data/logs/postgres_err.log
stdout_logfile=/home/www-data/logs/postgres_out.log
redirect_stderr=true
stopsignal=QUIT 
```

所以现在，我可以`supervisorctl`通过do 来启动 PostgreSQL `start postgres`，它运行良好。**但是，在我发出之后`stop postgres`，虽然`supervisorctl`声明 postgres 已停止，但服务器显然仍在运行，因为我可以 psql 进入它。**

我想知道这是主管配置问题还是 PostgreSQL 问题。欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:56:45.000

这篇博文写得相当糟糕。没有“TCP 模式”：帖子建议的方法仍将侦听 Unix 套接字，只是在不同的目录中。帖子中的“外部 pid 文件 - TCP 模式不需要”等评论非常具有误导性。

`postmaster`是 postgresql 可执行文件的传统名称（用于区分主调度进程和后端从属进程）。一段时间以来，没有单独的可执行文件，现在它被简单地安装为“postgres”。

假设 Supervisor 与 qmail/daemontools`supervise`方案大致相似，完全有可能（事实上，很正常）让它运行一个设置目录和环境的脚本，然后使用必要的参数执行 postgres（或传播给包装器脚本的参数，这对于监督来说是不寻常的，但当你有一个配置文件可以放入参数时更有意义）。

工作的方式`supervise`（我将继续假设“主管”是相同的）是让主管进程按照指定的方式运行一个子进程，如果它退出，只需重新启动一个新的子进程。这是基于这样的想法，即正在启动的进程是一个长期存在的守护进程，只有在出现严重错误时才会退出，并且简单地重新启动它是一个有效的修复。相比之下， init 脚本如 in`/etc/init.d`运行子进程并将其分离，并将控制权返回给它们的调用者——如果子进程退出，没有什么特别的事情发生，它必须手动重新启动。如果您尝试简单地运行`/etc/init.d/postgresql start`从监督开始，它将不断产生 postgresql 守护进程，因为从 init 脚本返回的结果将被解释为守护进程已经退出，而实际上它已经启动并分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T07:25:52.903

我试图让 tomcat 和 postgres 在主管下运行，并在这里找到了一些提示：[https ://serverfault.com/questions/425132/controlling-tomcat-with-supervisor](https://serverfault.com/questions/425132/controlling-tomcat-with-supervisor)

这是我的修改`run_postgresql.sh`，使用 bash ：

```
#!/bin/bash

# This script is run by Supervisor to start PostgreSQL 9.1 in foreground mode

function shutdown()
{
    echo "Shutting down PostgreSQL"
    pkill postgres
}

if [ -d /var/run/postgresql ]; then
    chmod 2775 /var/run/postgresql
else
    install -d -m 2775 -o postgres -g postgres /var/run/postgresql
fi

# Allow any signal which would kill a process to stop PostgreSQL
trap shutdown HUP INT QUIT ABRT KILL ALRM TERM TSTP

exec sudo -u postgres /usr/lib/postgresql/9.1/bin/postgres -D /var/lib/postgresql/9.1/main --config-file=/etc/postgresql/9.1/main/postgresql.conf 
```

使用此脚本 postgresql 在`supervisorctl stop postgres`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T02:09:01.213

为了避免使用脚本自动启动服务，`/etc/init.d`postgresql 9.1 的包提供了一个文件`/etc/postgresql/9.1/main/start.conf`，其中包含：

```
# 自动启动配置
# auto：在初始化脚本中自动启动/停止集群
# 手动：不要在初始化脚本中启动/停止，但允许手动启动
# pg_ctlcluster
# disabled: 不允许使用 pg_ctlcluster 手动启动（这很容易
# 被规避，只是为了对
# 事故）。

汽车

```

`/etc/init.d/postgresql`这是要修改的文件，以避免自动启动，而不是像博客文章所建议的那样移开 。

此外，由于缺少而更改 unix 套接字参数`/var/run/postgresql`看起来不是最好的主意，因为它是与 libpq 链接的任何程序的默认设置，并且因为创建具有适当权限的目录没有困难，就像它由包的开始顺序`/usr/share/postgresql-common/init.d-functions`：

```
# create socket directory
if [ -d /var/run/postgresql ]; then
    chmod 2775 /var/run/postgresql
else
install -d -m 2775 -o postgres -g postgres /var/run/postgresql
fi 
```

尽管默认值不应该引起问题，但请注意，最终是留在前台还是在后台[分叉](http://www.postgresql.org/docs/9.1/static/runtime-config-logging.html#GUC-SILENT-MODE)`postmaster`并运行是由. 确保它已关闭。`postgresql.conf`

# bash - Bash - 演示替换顺序

> ID：11092359
> 
> 赞同：0
> 
> 时间：2012-06-18T23:10:18.523
> 
> 标签：bash, unix, substitution

我试图证明替换顺序；主要是变量替换、命令替换和通配符依次发生。我执行了以下命令，但没有得到预期的输出。

```
bash-4.1$ a=file*
bash-4.1$ ls $(echo $($(b=$a))) 
```

我希望输出列出以“文件”开头的所有文件名，但它会输出目录中所有文件的列表。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:13:20.050

`$(...)`命令替换返回命令的输出，对于分配，它是空白的。所以你只是最终运行`ls`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:45:06.580

参数和算术扩展以及命令替换同时被评估，从最左到右。赋值、空和空扩展以及重定向都是有效的简单命令。分配丢失到子shell，并且参数`echo`扩展为空。`echo`输出换行符，但命令替换将其删除，并且`ls`没有得到任何参数。此外，如果您希望`a=file*`做的不仅仅是分配文字字符串，那么在分配中不会发生路径名扩展。

见：[http ://wiki.bash-hackers.org/syntax/grammar/parser_exec](http://wiki.bash-hackers.org/syntax/grammar/parser_exec)

当您弄清楚所有这些时，这是一个具有挑战性的问题。的价值是`x`多少？（显示更多扩展顺序和一些小的 Bash 怪癖。）

```
declare -i x=0
x+=${x:-1} let x+=2 $((x+=4)) {x}<&$((x+=8,0)) 
```

# c# - 控制台应用程序，应用程序冻结没有错误

> ID：11092362
> 
> 赞同：0
> 
> 时间：2012-06-18T23:10:33.650
> 
> 标签：c#, console

好的，目前我自己对编程和学习很陌生。目前我正在学习编程课程以帮助更好地理解编程。我遇到了一个困扰我的问题。

现在，与我提供的相比，我可以以不同的方式和方式完成任务。我的问题是，为什么会这样？我没有收到任何错误，唯一发生的事情是在输入控制台 Fezzes 之后。我想知道我做错了什么。

```
static void Main(string[] args)
{

    double[] Population = new double[6];
    string[] Years = { "2", "3", "4", "5", "6", "7" };
    double GrowthPercentage = 0.0;
    double MathPercentage = 0.0000;
    double ActualGrowth = 0.0;
    int WhileCounter = 0;

    //Ask user for Population of Roarkville
    Console.WriteLine("Enter the Population of RoarkVille: ");
    //Read Population and store
    Population[0] = Convert.ToDouble(Console.ReadLine());
    //Ask user for Growth percentage
    Console.WriteLine("Enter the Growth percentage ");
    //Read Growth Percentage
    GrowthPercentage = Convert.ToDouble(Console.ReadLine());
    //Calculation of Growth Percentage: Growth Percentage/100 = Math Percentage 
    MathPercentage = GrowthPercentage / 100;
    //ActualGrowth = Population * Math Percentage 

    //Population2 = ActualGrowth + Population 

    while (WhileCounter < 5)
    {
       ActualGrowth = Population[WhileCounter] + MathPercentage;

       WhileCounter++;

       Population[WhileCounter] = ActualGrowth + Population[WhileCounter--];
    }

    for (int i = 0; i < Population.Length; i++)
    {
        Console.WriteLine("Population of 201{0:d}", Years[i]);
        Console.WriteLine(Population[i]);
    }
    //Display 2012 Population 

    //Display 2013 Population 

    //Display 2014 Population 

    //Display 2015 Population 

    //Display 2016 Population 

    //Display 2017 Population

    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:39:23.187

所以发生的情况是，当您使用此代码输入增长百分比时：

```
 while (Counter < 5)
    {
    ActualGrowth = Population[Counter] + MathPercentage;

    Counter++;

    Population[Counter] = ActualGrowth + Population[Counter--];
    }

    for (int i = 0; i < Population.Length; i++)
    {
    Console.WriteLine("Population of 201{0:d}", Years[i]);
    Console.WriteLine(Population[i]);
    } 
```

您输入的数字在增长百分比上将是无限的：

这个也可以帮助你

```
 while (Counter < 5)
    {
    ActualGrowth = Population[Counter] + MathPercentage;

    Counter++;

    Population[Counter] = ActualGrowth + Population[Counter-1];
    }

    for (int i = 0; i < Population.Length; i++)
    {
    Console.WriteLine("Population of 201{0:d}", Years[i]);
    Console.WriteLine(Population[i]);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:19:13.490

++ 运算符更改变量的实际值，因此`WhileCounter++`将变量增加 1

-- 运算符的作用相同，这不是您想要在行中执行的操作

```
Population[WhileCounter] = ActualGrowth + Population[WhileCounter--]; 
```

相反，使用`WhileCounter - 1`，像这样

```
Population[WhileCounter] = ActualGrowth + Population[WhileCounter - 1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:15:09.953

```
WhileCounter++;

Population[WhileCounter] = ActualGrowth + Population[WhileCounter--]; 
```

`WhileCounter`就循环而言，never的值不会改变。在循环体中，您递增`WhileCounter`并立即递减它，因此条件`WhileCounter < 5`始终为真。

你也可以写

```
int WhileCounter = 0;
while(WhileCounter < 5)  
{
    WhileCounter += 1;  // WhileCounter == 1
    WhileCounter -= 1;  // WhileCounter == 0
}

// aint never gunna happen 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T23:15:33.607

您应该阅读以下运算符并了解它们的实际作用：

[--](http://msdn.microsoft.com/en-us/library/wc3z3k8c%28v=vs.100%29.aspx)

[++](http://msdn.microsoft.com/en-us/library/36x43w8w%28v=vs.100%29.aspx)

# php - 从动态生成的输入字段 PHP、MySQL、jQuery 更新多行

> ID：11092366
> 
> 赞同：0
> 
> 时间：2012-06-18T23:12:12.703
> 
> 标签：php, jquery, mysql, input

我需要一些关于如何从动态创建的输入字段成功更新数据库中的多行的建议。

所以，我所拥有的是：

**PHP**

```
<?php
   while ($row = mysql_fetch_array($sql)) {
       echo "<input class='estemated_days' type='text' id='".$row['scpe_id']."' value='".$row['scpe_estemated_days']."'></td>";
   }
?> 
```

这将输出如下内容：

**HTML**

```
<input class='estemated_days' type='text' id='718' value='5'>
<input class='estemated_days' type='text' id='719' value='8'>
<input class='estemated_days' type='text' id='720' value='10'>

<input type='button' id='save' value='Save'> <!-- Button to jQuery --> 
```

.....ETC。

这是我缺乏知识的地方。我希望 jQuery 做这样的事情：

**jQuery**

```
($"#save").click(function () {

  // Get value of id from (".estemated_days") as an identifier, and get the input value it contains
  // Send to /update.php

}); 
```

然后，`update.php`会做这样的事情：

**PHP**

```
<?php

if (isset($_POST['save'])) {

    /*
        Get all of the id's and the value it contain's

        perform:
    */

    mysql_query = ("UPDATE myDatabase SET estemated_days = '$the_value_from_the_input' WHERE scpe_id = '$the_value_of_the_id'");
    //Repeat this for all rows from the webpage
}

?> 
```

我的知识是基本的网络编程，但我真的很想完成这项工作。有人对我应该如何做有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:27:10.650

```
var values = {};
$('input.estimated_days').each(function(n, el){
   values[ $(el).attr('id') ] = $(el).val();
});

$.ajax(
  {
    type : 'POST',
    url : 'update.php',
    data : {edays: values}
  }
); /// see jquery docs for ajax callbacks 

<?php
   foreach($_POST['edays'] as $id=>$value) // ... 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) 也 [http://api.jquery.com/attr/](http://api.jquery.com/attr/)

...并且不要忘记清理 mysql 的输入

# gnuplot - gnuplot - 图形和 png 图像边缘之间没有空间

> ID：11092370
> 
> 赞同：6
> 
> 时间：2012-06-18T23:12:33.857
> 
> 标签：gnuplot

如何创建 .png 图像`gnuplot`以查看图形本身和图像边缘之间没有空格。我用

```
set terminal pngcairo size 800,600 enhanced 
```

我想要 800x600 的图像。并希望所有 0X 轴对应 [0..800] 区间，并且所有 0Y 对应 [0..600] 区间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T23:32:38.023

看起来您想将边距设置为 0。这是一个示例脚本：

```
set terminal pngcairo size 800,600 enhanced
set output 'output.png'

set lmargin 0
set rmargin 0
set tmargin 0
set bmargin 0

#unset tics

plot sin(x) # notitle 
```

这样，情节将完全填满画布。您可以输入`help set margin`gnuplot 以获取详细信息。（如果你想要一个更清晰的情节，请取消注释我的示例中的注释。）

# ios - iOS模拟器上缺少语言

> ID：11092372
> 
> 赞同：8
> 
> 时间：2012-06-18T23:12:35.363
> 
> 标签：ios, localization, ios-simulator

当我运行我的应用程序时，我的 iPhone/iPad 模拟器只给了我 6 种语言选择（英语、德语、日语、意大利语、西班牙语和匈牙利语）。在谷歌上搜索后，似乎应该至少有 18 种语言可供选择。

我重新安装了 Xcode 4.3.1，并安装了 iOS 5.1 模拟器，它有同样的问题，同样的语言。

有谁知道这些语言是在哪里定义的，为什么模拟器没有所有可用的选项？谷歌和苹果开发论坛没有帮助。

**这是一个屏幕截图：**

![iOS 模拟器](../Images/34af469d1be964f286bdc2832ab34c41.png)

**更新：**我决定安装稍旧的 5.0 模拟器（而不是 5.1），每当我使用 5.0 模拟器时，我似乎拥有所有语言。如果我切换回 5.1 模拟器，我仍然只有上面屏幕截图中显示的 6 种语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T17:52:58.660

我认为您的模拟器安装发生了一些不好的事情，而不是 Apple 删除了语言。如果他们将模拟器中的语言数量减少到只有 6 种马扎尔语，那将是一个奇怪的选择（只有 1250 万左右的扬声器）。

我还检查了我的 Xcode 4.3.3/iPhone 5.1 模拟器，并且我拥有我认为的完整语言补充。可能值得尝试重新安装您的模拟器！

模拟器在设置应用程序中显示的语言列表可以在

`/Applications/Xcode-4.3.3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/GlobalPreferences.plist`.

它是二进制格式，因此您需要将其复制到临时目录并用于`plutil -convert xml1 <file_name>`将其转换为您可以阅读的内容。您可以检查并查看此列表中是否缺少语言。

供参考，这是我的样子

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>AppleLanguages</key>
        <array>
                <string>en</string>
                <string>fr</string>
                <string>de</string>
                <string>ja</string>
                <string>nl</string>
                <string>it</string>
                <string>es</string>
                <string>pt</string>
                <string>pt-PT</string>
                <string>da</string>
                <string>fi</string>
                <string>nb</string>
                <string>sv</string>
                <string>ko</string>
                <string>zh-Hans</string>
                <string>zh-Hant</string>
                <string>ru</string>
                <string>pl</string>
                <string>tr</string>
                <string>uk</string>
                <string>ar</string>
                <string>hr</string>
                <string>cs</string>
                <string>el</string>
                <string>he</string>
                <string>ro</string>
                <string>sk</string>
                <string>th</string>
                <string>id</string>
                <string>ms</string>
                <string>en-GB</string>
                <string>ca</string>
                <string>hu</string>
                <string>vi</string>
        </array>
        <key>AppleLocale</key>
        <string>en_US</string>
</dict>
</plist> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:07:06.137

根据发布在同一个问题中的名为 idz 的用户的答案中的信息，我能够弄清楚如何解决这个问题。

我使用的是 5.1，我必须安装以前版本的模拟器（5.0），然后从 5.0 中找到语言目录并将它们复制到 5.1 的正确位置，然后重新启动 iPhone 模拟器。以下是一些详细步骤：

1.  找到 5.0 模拟器的语言 .lproj 目录。`/Applications/Xcode-4.3.3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/Preferences.framework/`
2.  在此文件夹中，您将看到许多带有 .lproj 扩展名的文件夹，例如`English.lproj`. 复制您在此处找到的所有 .lproj 文件夹。
3.  找到包含 .lproj 目录的文件夹，用于 5.1 模拟器。`/Applications/Xcode-4.3.3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/`
4.  将您复制的文件夹粘贴到此目录中。执行此操作时，我选择不覆盖任何现有文件夹。
5.  重新启动您的 iPhone 模拟器。
6.  确保您的 iPhone 模拟器设置为 5.1。选择 iPhone 模拟器后，转到`Hardware -> Version -> 5.1`。现在，当您为模拟器选择语言时，您应该拥有从 5.0 文件夹复制过来的所有可用语言。

或者，有些人说您可以通过简单地卸载 Xcode SDK 并重新安装它来解决这个问题，但我发现这种方式要快得多。

我为此向 Apple 提交了错误报告，一周后没有任何回复。我已将他们定向到此页面以解决问题，但我仍然不确定这首先是如何发生的。

# jquery - 将 Ajax/jQuery Post 函数转换为 jQuery

> ID：11092385
> 
> 赞同：1
> 
> 时间：2012-06-18T23:14:58.617
> 
> 标签：jquery, ajax

这是我原来的功能。它工作得很好，我只想压缩一点：

```
 <script type='text/javascript'>
function searchmusic(){
var ajaxRequest;  

try{
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    try{
        ajaxRequest = new ActiveXObject('Msxml2.XMLHTTP');
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject('Microsoft.XMLHTTP');
        } catch (e){
            alert('Your browser broke!');
            return false;
        }
    }
}
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        var ajaxDisplay = document.getElementById('searchresults');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;

    }
}
var search = document.getElementById('search').value;
var params = 'search=' + search;
ajaxRequest.open('POST', 'getsearch.php', true);  
ajaxRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
ajaxRequest.send(params);

}
</script> 
```

我正在尝试稍微压缩这个函数，所以我尝试使用 jQuery 复制它：

```
 <script>
 function searchmusic(){
 var search = document.getElementById('search').value;
 $.ajax({
type: 'POST',
url: getsearch.php,
async: true,
data: 'search=' + search,
success: function(data) {
$('#searchresults').load(data);
 }
 });
 }
</script> 
```

但是，我无法使此功能正常工作。有人可以告诉我我在哪里犯了错误，为什么这个功能不起作用，或者可能是这个新功能不能像我原来的那样起作用。我不知道，但任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:16:55.060

改变：

```
url: getsearch.php, // The property php of the getsearch variable 
```

到：

```
url: 'getsearch.php', // A string with the URL. 
```

并改变：

```
$('#searchresults').load(data); 
```

到：

```
$('#searchresults').html(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:19:47.507

```
url: getsearch.php, 
```

应该

```
url: 'getsearch.php', 
```

和

```
success: function(data) {
    $('#searchresults').load(data);
} 
```

应该

```
success: function(data) {
    $('#searchresults').html(data);
} 
```

也`var search = document.getElementById('search').value;`可以，但因为你正在使用`jQuery`，所以你可以使用`var search = $('#search').val()`，默认情况下`async is true`你可以省略它，也`$.ajax`可以`$.post`这样你也可以删除`type: 'POST'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:00:16.020

Waaaay更紧凑：

```
function searchmusic(){
 $("#searchresult").load("getsearch.php", {search: $("#search").val()});
} 
```

这就是您需要的所有功能:)

您可以`.load()`在 AJAX 结果进入元素时使用。作为对象传递的参数确保我们执行 POST 而不是 GET 调用。所以你的功能可以减少很多。

# jquery - .remove() 不适用于函数参数

> ID：11092389
> 
> 赞同：1
> 
> 时间：2012-06-18T23:15:16.260
> 
> 标签：jquery, html, parameters

嗨，我有以下带有 jQ​​uery 的代码：

```
function reject(id) {
    $.ajax({
        type: 'POST',
        url: api_url,
        data: { validation_id: '11', listing_id: id }
    }).done(function(msg) {
      alert(msg);
      $("'#" + id + "'").remove();
    });
} 
```

除了部分之外，一切都很好`remove()`：

```
$("'#" + id + "'").remove(); 
```

这应该删除列表信息所在的 div，因为它刚刚被拒绝。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T23:17:16.130

你不需要用额外的`'`. 它应该只是一个代表选择器的字符串 -`$("#"+id).remove();`

# jquery - JQuery动画“宽度：切换”导致间歇性闪烁

> ID：11092394
> 
> 赞同：4
> 
> 时间：2012-06-18T23:15:44.900
> 
> 标签：jquery, css

我目前正在开发一种工具，该工具具有一个选项卡式部分，当单击一个选项卡时，它会将宽度切换为最大和零。包含选项卡和部分的整个 div 是固定的并位于窗口的右上角。`$.animate({width: "toggle"});`那里有 95%，但是当扩展部分的宽度使用该方法切换到零时，会出现间歇性闪烁。关于可能导致它的任何想法？

这是一个小提琴 - [http://jsfiddle.net/Tgdrb](http://jsfiddle.net/Tgdrb)。我试图尽可能地简化它，以便它仍然显示问题，但与它在页面上的实际外观并没有完全脱离上下文。我也将此标记为 CSS 问题，因为我想知道是否是我构建 CSS 的方式导致了问题（如果是，我不会感到惊讶）。

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:47:09.303

如果有人好奇，有一种方法可以做到这一点，那就是纯 CSS3。它（还）不能在 IE 中工作，但它会优雅地降级，所以它工作得相当好。

在这里小提琴：http: [//jsfiddle.net/Tgdrb/17/](http://jsfiddle.net/Tgdrb/17/)

所以，是的，答案是：Chrome 会导致重绘。如果您不喜欢这种效果，请找到更好的方法来做您想做的事情。

# arrays - Fortran MPI (synchronizing an array)

> ID：11092395
> 
> 赞同：0
> 
> 时间：2012-06-18T23:15:46.050
> 
> 标签：arrays, merge, fortran, mpi

I am trying to run this simple MPI Fortran 90 code on 4 processors. The problem is that I am not able to merge or synchronize the values of the elements of the array calculated by each processor. Here is the code:

```
PROGRAM TRY
USE MPI

integer status(mpi_status_size)
INTEGER                            I, J, K, II, IERR, MY_ID, NUM_PROCS, PSP
INTEGER     , PARAMETER                 :: GRIDX =8 
REAL        , DIMENSION(gridx)          :: PSI
psi=0
PRINT*, 'YASER'

 call mpi_init(ierr)
 call mpi_comm_rank(MPI_COMM_WORLD,my_id,ierr)
 call mpi_comm_size(MPI_COMM_WORLD,num_procs,ierr)

 DO I=1+MY_ID*GRIDX/NUM_PROCS, (MY_ID+1)*GRIDX/NUM_PROCS
    PSI(I)=1.0
 END DO

 **IF (MY_ID .NE. 0) THEN
    CALL mpi_send( PSI(1+MY_ID*GRIDX/NUM_PROCS:(MY_ID+1)*GRIDX/NUM_PROCS),GRIDX/NUM_PROCS,mpi_real, 0,10,mpi_comm_world,ierr)
 END IF
 IF (MY_ID .EQ. 0) THEN
    DO II=1,NUM_PROCS-1
        CALL mpi_recv(PSI(1+MY_ID*GRIDX/NUM_PROCS:(MY_ID+1)*GRIDX/NUM_PROCS),GRIDX/NUM_PROCS,mpi_real, &
        II,10,mpi_comm_world,status,ierr)
    END DO
 END IF**

 IF (MY_ID .EQ. 0) THEN
    OPEN(PSP,FILE='TRYpsi.txt')
    DO I=1, GRIDX
        WRITE (PSP,*)  PSI(I)
    END DO
    CLOSE(PSP)
 END IF

 CALL MPI_FINALIZE(IERR)
 END PROGRAM TRY 
```

However, although each processor does its job correctly and make 'psi' equal to one, the problem is with their communication because when I open the TRYpsi.txt, I see that while the elements of the array calculated by the 0th processor are all equal to one, the other elements are all equal to zero! This means that either the 0th processor has not received the information from the other processors or the other processors have not sent the information to the other processors.

Could you please help me with mpi_send and mpi_recv?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T23:25:51.843

看看你对 MPI_Recv 的调用。您在循环的每次迭代中都接收到相同的位置。您（可能）想要的是根据 II 的值更改第一个参数的值。

# sql - SQL Server 重命名工具

> ID：11092398
> 
> 赞同：1
> 
> 时间：2012-06-18T23:16:06.193
> 
> 标签：sql, sql-server, refactoring

我有一个数据库，里面有多个团队和人员以多种语言填充了 15 年的杂乱无章的内容。我正在寻找重命名表/列/约束以匹配某种类型的标准。

问题是一个列可能在大量存储的过程中被引用，除了使用 SQL Digger 之类的工具搜索每个存储过程之外，没有其他方法可以找到。问题是我想重命名大量实体并手动为每个听起来很痛苦。

我一直在寻找一种有助于名称重构的工具，但找不到任何东西。一些工具 [here] 含糊地声称可以做到这一点，但实际上并非如此（我没有看过列出的所有工具都是公平的）。

有没有人使用过这样的工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T16:23:10.637

我使用[ApexSQL 重构](http://www.apexsql.com/sql_tools_refactor.aspx)已有一段时间了。它是一个免费软件工具，到目前为止它运行良好。

他们的解决方案中心有一篇文章[“如何在不破坏 SQL 数据库的情况下更改对象名称” 。](http://solutioncenter.apexsql.com/2012/12/how-to-change-object-name-without.html)

我注意到一个新版本公告（2013 年），但我不确定它是否会保持免费。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T19:14:05.563

使用上述任何工具更新对象时要小心，因为它们只搜索您数据库中的引用。要记住的重要一点是您在应用程序的数据访问层中拥有的代码。

您可能想要查看的另一个工具是[ApexSQL Clean](http://www.apexsql.com/sql_tools_clean.aspx "ApexSQL 清理")。它可以找到所有未使用的数据库对象，直观地显示所有引用，但它也可以搜索 .NET 解决方案并在那里找到引用。

同样，考虑到您的数据库已有 15 年历史，您可能在不同的遗留应用程序中拥有代码，而不仅仅是 .NET。无论如何，祝你好运。希望现在这一切都完成了:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T23:21:29.893

我没有使用过这个，但使用了他们的其他 Sql Server 工具，他们做了他们声称的事情。

[http://www.red-gate.com/products/sql-development/sql-prompt/](http://www.red-gate.com/products/sql-development/sql-prompt/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T23:22:29.187

过去，我曾使用数据库项目（在 Visual Studio 2010 中）进行重构活动，并取得了很大的成功。数据库项目肯定有许多怪癖，但没有什么是您无法解决的。

您可以在此处找到有关它的更多详细信息：http: [//msdn.microsoft.com/en-us/library/dd193420](http://msdn.microsoft.com/en-us/library/dd193420)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-18T23:22:51.513

几个选项：

[SQL Server 数据工具](http://msdn.microsoft.com/en-us/data/tools.aspx)（[在此处查看](http://www.codeproject.com/Articles/357905/Evaluating-SQL-Server-Data-Tools)）

Red-Gate SQL Refactor（嗯，现在是[SQL Prompt](http://www.red-gate.com/products/sql-development/sql-prompt/)的一部分）

请注意，这些工具只能足够聪明地找到通过直接引用或通过适当的依赖关系公开的引用。如果您使用动态 SQL 构造表或列名，那么您就不走运了。

几年前，我还写了一篇关于让 sysdepends 保持最新状态的博客，但是我不确定它对列特别有用：

[https://sqlblog.org/2008/09/09/keeping-sysdepends-up-to-date-in-sql-server-2008](https://sqlblog.org/2008/09/09/keeping-sysdepends-up-to-date-in-sql-server-2008)

# mysql - unserialize pdo mysql error - invalid data source name

> ID：11092399
> 
> 赞同：0
> 
> 时间：2012-06-18T23:16:13.013
> 
> 标签：mysql, serialization, pdo, php-5.3, shopping-cart

I have these classes below for my online store.

This super class holds all common methods used by the child classes.

```
class grandpa
{
    public function test1($string)
    {
        return $string;
    }
} 
```

So do the PDO connection,

```
class database_pdo extends grandpa
{
    protected $connection = null;
    protected $dsn,$username,$password;

    public function __construct($dsn,$username,$password)
    {
        $this->dsn = $dsn;
        $this->username = $username;
        $this->password = $password;
        $this->get_connection();
    }

    public function get_connection()
    {
        try
        {
            $this->connection = new PDO($this->dsn, $this->username, $this->password, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));
            $this->connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
        }
        catch (PDOException $e) 
        {
            $this->get_error($e);
        }
    }

    public function __sleep()
    {
        return array('dsn', 'username', 'password');
    }

    public function __wakeup()
    {
        $this->get_connection();
    }

    public function get_error($e) 
    {
        $this->connection = null;
        die($e->getMessage());
    }

    public function __destruct()
    {
       $this->connection = null;
    }
} 
```

I have this class extend from pdo for other common methods that require pdo connection,

```
class papa extends database_pdo
{
    protected $connection = null;

    public function __construct($connection)
    {
        $this->connection = $connection;

    }

    public function test2($string)
    {
        return $string;
    }

} 
```

The child classes,

```
class kido_1 extends papa
{

    public function __construct($connection)
    {
        parent::__construct($connection);
    }

    public function test3($string)
    { 
        return $string;
    }
} 
```

How it use the classes above,

```
# Host used to access DB.
define('DB_HOST', 'localhost');

# Username used to access DB.
define('DB_USER', 'xxx');

# Password for the username.
define('DB_PASS', 'xxx');

# Name of your databse.
define('DB_NAME', 'xxx'); 

# Data source name.
define('DSN', 'mysql:host='.DB_HOST.';dbname='.DB_NAME);

$connection = new database_pdo(DSN,DB_USER,DB_PASS);

$kido = new kido($connection);

$_SESSION['cart'] = serialize($kido);

$kido = unserialize($_SESSION['cart']);

print_r($kido->test3('hello')); 
```

I get this error,

> invalid data source name

It is caused by `unserialize()` that I need it for my cart data...

How can I fix this? Or a better way of rewrite these classes?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:46:35.687

你`papa::connection`是一个 PDO 对象。因此，当您尝试序列化时`$kido`，您正在尝试序列化资源，[这是不可能的](https://stackoverflow.com/a/8700726/1446005)。尝试`$this->connection = null;`在您的`database_pdo::__sleep()`方法中添加一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:47:01.613

我认为的解决方案...

```
class papa extends grandpa
{
    protected $connection = null;

    public function __construct($connection)
    {
        $this->connection = $connection;

    }

    public function test2($string)
    {
        return $string;
    }

} 
```

# c++ - Cpp中的私有静态数据成员..只能在其定义处初始化，但类内初始化无效？

> ID：11092404
> 
> 赞同：6
> 
> 时间：2012-06-18T23:17:32.187
> 
> 标签：c++, oop, class, initialization, allegro

在头文件中初始化我得到以下错误：

```
invalid in-class initialization of static data member of non-integral type 'bool [8]' 
```

如果我尝试在 .cpp 中初始化，我得到：

```
'bool Ion::KeyboardInput::key [8]' is a static data member; it can only be initialized at its definition 
```

继承人的标题：

```
enum MYKEYS {
    KEY_UP, KEY_DOWN, KEY_LEFT, KEY_RIGHT, KEY_W, KEY_S, KEY_A, KEY_D
};

class KeyboardInput
{
public:
    KeyboardInput();
    ~KeyboardInput();
    static void getKeysDown(ALLEGRO_EVENT ev);
    static void getKeysUp(ALLEGRO_EVENT ev);
    static bool getKey(int keyChoice);

private:
    static bool key[8] = {false, false, false, false, false, false, false, false};
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T23:24:55.557

第一条错误信息告诉你在头文件中初始化静态成员变量是不合适的。第二条错误消息暗示您尝试`key`在构造函数中初始化静态成员。

静态类成员变量需要在类内部声明（无需初始化），然后在`.cpp`文件中的类外部定义（有点像全局变量，除了变量名包含类名）。

```
bool KeyboardInput::key[8]; 
```

变量的定义可以包括一个初始化器。由于您将其初始化为全部错误，因此`.cpp`文件中的上述定义就足够了。

静态类成员变量与全局变量没有太大区别，只是它由类名限定，并且可以被保护为只能由类的成员（with `private`）、类的直接子类（with `protected`）或班上的朋友。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T23:26:19.453

您必须在 .h 文件中声明静态并在 .cpp 文件中为其分配值。像这样的东西，

### _header.h

```
class KeyBoardInput{

public:
   KeyboardInput();
   ....
private:
   static bool key[8];
}; 
```

### _header.cpp

```
\#include<"_header.h">

bool KeyBoardInput::key[8] = {false, false, false, false, false, false, false, false}; 
```

除了在 cpp 文件中，您不能在任何地方初始化静态变量...它不属于特定对象..因此您必须在类外部（在 cpp 文件中）进行初始化，以便所有对象都可以共享它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:37:46.077

试试这个：

```
enum MYKEYS {
    KEY_UP, KEY_DOWN, KEY_LEFT, KEY_RIGHT, KEY_W, KEY_S, KEY_A, KEY_D
};

class KeyboardInput
{
public:
    KeyboardInput();
    ~KeyboardInput();
    static void getKeysDown(ALLEGRO_EVENT ev);
    static void getKeysUp(ALLEGRO_EVENT ev);
    static bool getKey(int keyChoice);

private:
    static bool key[8];
};
bool KeyboardInput::key = {false, false, false, false, false, false, false, false}; 
```

最后一行确实应该放在 .cpp 文件中，因为所有“代码”都应该放在 cpp 文件中。

# java - Robotium 断言失败

> ID：11092407
> 
> 赞同：1
> 
> 时间：2012-06-18T23:17:51.250
> 
> 标签：java, android, testing, junit, robotium

当我使用 Robotium 运行测试时，我使用断言来验证页面上是否存在特定文本，但它失败了。但是，当我在没有断言的情况下运行测试时，测试通过了。为什么会这样？

这是我的代码：

```
import com.jayway.android.robotium.solo.Solo;
import android.test.ActivityInstrumentationTestCase2;
import android.test.suitebuilder.annotation.Smoke;

@SuppressWarnings("unchecked")
public class ODPRobotiumTest extends ActivityInstrumentationTestCase2 {

    private static final String TARGET_PACKAGE_ID = "com.gravitymobile.app.hornbill";
    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.vzw.odp.LaunchActivity";

    private static Class<?>launcherActivityClass;

    static{
        try{
            launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e){
            throw new RuntimeException(e);
        }
    }

    @SuppressWarnings({ "unchecked", "deprecation" })
    public ODPRobotiumTest() throws ClassNotFoundException{
        super(TARGET_PACKAGE_ID, launcherActivityClass);
    }

    private Solo solo;

    @Override
    protected void setUp() throws Exception{
        solo = new Solo(getInstrumentation(), getActivity());
    }

    @Smoke
    public void testLine1(){

        try {
            assertTrue(solo.searchText("Easy to Find")) ;
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    @Smoke
    public void testLine2(){

            try{
        solo.searchText("Hassle-Free");
            }catch(Exception e){
                e.printStackTrace();
            }

    }
    @Smoke
    public void testLine3(){

        solo.searchText("Trust");

    }
    public void testLine4(){

        solo.searchText("Verizon Curated Wallpaper");

    }
    public void testLine5(){

        solo.searchText("Taco's");

    }
    @Override
    public void tearDown() throws Exception{
        try{
            solo.finalize();
        }catch(Throwable e){
            e.printStackTrace();
        }
        getActivity().finish();
        super.tearDown();
    }
} 
```

testLine1 中的测试是失败的测试。但是就像我之前说的，当我不使用assertTrue，而只使用solo.searchTest("Easy to find") 时，测试就会通过。我不明白。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:33:11.473

如果您不断言任何内容，那么您的测试将通过，因为没有任何事情会失败。

显然，您正在搜索的文本要么从屏幕上丢失，要么您的测试运行器配置错误，要么您甚至没有使用正确的搜索机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:51:18.643

我刚刚发现我要验证的内容是 HTML。因此，由于 Robotium 不适用于 HTML 或任何其他 Web 组件，它不会验证我正在寻找的文本。

感谢所有提供帮助的人！

# c# - how to find whether callback of an asyncronus call is finished or not in C#?

> ID：11092412
> 
> 赞同：0
> 
> 时间：2012-06-18T23:18:34.633
> 
> 标签：c#, multithreading, asynchronous

I have a method called Get and a call back method called X written in C# .I Have to return the _name from the Get method.But it is only possible to get the Actual value of the _name after the callback is finished.So i have to stop at the point of * until call back is finished. After that only i can return the _name .So i have to find whether the call back is finished or not.

How do i achieve a solution for above scenario? Can any one please suggest a solution for this

My methods are something like this

```
string _name ;

public string Get()
{
     //Some Statements
     //Asynchronous call to a method and its call back method is X

     *Want to stop here until the Call back is finished

     return _name ;
}

private void X (IAsyncResult iAsyncResult)
{
     //Call Endinvoke and get the result
     //assign the final result to global variable _name 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:29:25.307

使用等待句柄 `IAsyncResult.AsyncWaitHandle`并调用 WaitOne()。这将阻塞直到完成。

```
 IAsyncResult result = Something.BeginWhatever();
  result.AsyncWaitHandle.WaitOne(); //Block until BeginWhatever completes 
```

有关更完整的示例，请参阅 msdn 文章[Blocking Application Execution Using an AsyncWaitHandle](http://msdn.microsoft.com/en-us/library/ms228962.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:20:14.613

使用 ManualResetEvent 表示完成。

```
 string _name;
   ManualResetEvent _completed = new ManualResetEvent();

   public string Get()
   {
     //Some Statements
     _completed.Reset();
     //Asynchronous call to a method and its call back method is X

     //*Want to stop here until the Call back is finished
     _completed.WaitOne();

     return _name ;
   }

   private void X (IAsyncResult iAsyncResult)
   {
     //Call Endinvoke and get the result
     //assign the final result to global variable _name 
     _completed.Set();
   } 
```

# admob - Admob - Set the App Settings - Test Mode to 'Disable' on Release?

> ID：11092415
> 
> 赞同：1
> 
> 时间：2012-06-18T23:19:01.150
> 
> 标签：admob

I just wrote and released to the market my first 'ad-supported' android app. I see ads served on the emulator and my device but Im earning a few cents a day with close to 1000 downloads (700 active) in the released world. I have been investigating how to increase revenue from the app (just pennies right now) by going into the Admob App Settings for my App. I see a setting there for 'Disable Test Mode for all Requests' - should I enable that? Its currently set to 'Use test mode setting set in client code'. Have I been serving customers the 'Test' ads only? The Admob is very vague on the topic.

Thanks much.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T18:58:06.747

随意更改该选项，但这不应该有所作为；Google AdMob SDK 可防止您在脚下开枪。

您的应用可以调用`adRequest.addTestDevice(AdRequest.TEST_EMULATOR)`以在模拟器上获取测试广告，并`adRequest.addTestDevice("YOUR_HASHED_DEVICE_ID_FROM_ADMOB_LOGS")`在您的特定设备上获取测试广告。但即使您使用该代码发布，所有不属于您或不是模拟器的设备都会收到网络广告。

# python - 使用 pySerial 重新连接到设备

> ID：11092417
> 
> 赞同：7
> 
> 时间：2012-06-18T23:19:13.650
> 
> 标签：python, serial-port, pyserial

我目前在 Python 中遇到 pySerial 模块的问题。我的问题与连接和断开设备有关。我可以成功连接到我的设备并与它通信，只要我愿意，也可以随时断开连接。但是，一旦连接被切断，我就无法重新连接到设备。

这是我的程序用于与串行端口交互的包装类：

```
import serial, tkMessageBox

class Controller:
""" Wrapper class for managing the serial connection with the MS-2000\. """
    def __init__(self, settings):
        self.ser = None
        self.settings = settings

    def connect(self):
        """ Connect or disconnect to MS-2000\. Return connection status."""
        try:
            if self.ser == None:
                self.ser = serial.Serial(self.settings['PORT'],
                                         self.settings['BAUDRATE'])
                print "Successfully connected to port %r." % self.ser.port
                return True
            else:
                if self.ser.isOpen():
                    self.ser.close()
                    print "Disconnected."
                    return False
                else:
                    self.ser.open()
                    print "Connected."
                    return True
        except serial.SerialException, e:
            return False

    def isConnected(self):
        '''Is the computer connected with the MS-2000?'''
        try:
            return self.ser.isOpen()
        except:
            return False

    def write(self, command):
        """ Sends command to MS-2000, appending a carraige return. """
        try:
            self.ser.write(command + '\r')
        except Exception, e:
            tkMessageBox.showerror('Serial connection error',
                                   'Error sending message "%s" to MS-2000:\n%s' %
                               (command, e))

    def read(self, chars):
        """ Reads specified number of characters from the serial port. """
        return self.ser.read(chars) 
```

有谁知道这个问题存在的原因以及我可以尝试做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T22:51:29.817

完成后，您没有释放串行端口。用于`ser.close()`在退出程序之前关闭端口，否则端口将无限期锁定。我建议为此添加一个`disconnect()`在您的类中调用的方法。

如果您在 Windows 上，要在测试期间纠正这种情况，请启动任务管理器并终止任何可能锁定串行端口的进程`python.exe`。`pythonw.exe`

# spring - spring DispatcherServlet, code to execute before it

> ID：11092421
> 
> 赞同：1
> 
> 时间：2012-06-18T23:19:26.033
> 
> 标签：spring, spring-mvc, spring-security

I have Spring web application. I would like to put some common piece of code which will be executed at the beginning of each HTTP request so that I can check for spams. I have configured `DispatcherServlet` in my `web.xml` which means `DispatcherServlet` is the first entry point for every HTTP request. My question is does `DispatcherServlet` provide any method which will be executed first and then the control passes onto the requested annotation controller?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T23:56:13.280

我同意戴夫。您正在寻找的是映射 url 上所有请求的过滤器/拦截器。传统上，这是使用[ServletFilter](http://onjava.com/onjava/2003/11/19/filters.html)完成的。这是您放置自定义代码的地方。例如。

```
 public FooFilter implements ServletFilter {
    @Override
    void doFilter(ServletRequest request,
              ServletResponse response,
              FilterChain chain)
              throws IOException,
                     ServletException {
        // My Custom check for spam.
    }
} 
```

一旦你在 ServletFilter 中实现了你的自定义代码，你所需要的就是在 web.xml 中配置它。

```
<filter>
    <filter-name>FooFilter</filter-name>
    <filter-class>com.foo.servlet.filters.FooFilter</filter-class>
    <init-param>
        <param-name>test-param</param-name>
        <param-value>Test parameter.</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>FooFilter</filter-name>
    <url-pattern>/*</url-pattern> <!-- The URL to be filtered. -->
</filter-mapping> 
```

它是配置过滤器和拦截 Web 请求的最简单方法。

当使用 Spring 框架时，您会想要使用 Sping 的 HandlerInterceptor。一个很好的帖子，关于何时使用可以在[这里](https://stackoverflow.com/questions/8000844/spring-handlerinterceptor-vs-filters)找到的内容。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T23:24:42.810

IMO 这种功能属于[`HandlerInterceptor`(ref docs)](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T16:54:07.843

Servlet 过滤器会起作用，因为过滤器总是比任何 servlet 都先执行。过滤器将在 Dispatcher servlet 之前执行，但拦截器将在 Dispatcher servlet 之后和实际处理程序之前执行！

# javascript - JQuery ajaxForm plugin 'xhr.responseText' returns only the "body" part in Internet Explorer

> ID：11092422
> 
> 赞同：0
> 
> 时间：2012-06-18T23:19:35.597
> 
> 标签：javascript, jquery, ajaxform

Trying to load a page with Jquery after submitting a form using the [ajaxForm](http://jquery.malsup.com/form/) plugin and even though it works as expected in Chrome and Firefox, in Internet Explorer the `xhr.responseText` variable returns only what's in the `<body>` part of the response web-page and not the whole page page with head, script, css, etc. Does anyone know why and how to fix this?

```
$('form').ajaxForm({
beforeSend: function() {
},
uploadProgress: function(event, position, total, percentComplete) {
},
    complete: function(xhr) {
        alert(xhr.responseText); //this is just to see what's inside the xhr.responseText...
    }

}); 
```

**EDIT:** Ok, I figured out part of the problem - this only occurs when the form is encoded as `enctype = 'multipart/form-data'` and/or it has an `<input type='file' />` and only in Internet Explorer, but I still have no clue how to make it work for those types of forms....

# php - PHP and JSON using Yahoo Fantasy Sports API

> ID：11092424
> 
> 赞同：1
> 
> 时间：2012-06-18T23:19:44.680
> 
> 标签：php, json, api

I am trying to query and parse Yahoo fantasy sports data and show results in a friendly format.

Here is the JSON I get back from Yahoo from a successful request...

```
{
"fantasy_content": {
"xml:lang": "en-US",
"yahoo:uri": "\/fantasy\/v2\/users;use_login=1\/teams",
"users": {
  "0": {
    "user": [
      {
        "guid": "1234567890"
      },
      {
        "teams": {
          "0": {
            "team": {
              "team_key": "268.l.auto.t.209996",
              "team_id": "209996",
              "name": "Team Test",
              "type": "auto"
            }
          },
          "1": {
            "team": {
              "team_key": "273.l.auto.t.27741",
              "team_id": "27741",
              "name": "Team API",
              "type": "auto"
            }
          },
          "count": 2
        }
      }
    ]
  },
  "count": 1
},
"time": "29.808044433594ms",
"copyright": "Data provided by Yahoo! and STATS, LLC",
"refresh_rate": false
  }
} 
```

I am looking to get the team names from the teams array. I have tried using the following PHP code (among countless variations of it) to drill to the node I need but I am not having any luck.

```
$obj=json_decode($json);
$data = $obj->fantasy_content->users->user->teams->team; 
foreach($data as $d){
echo 'name: ' . $d->name ; //prints php 
} 
```

I am hoping that someone might be able to provide a working example using the JSON above as I have clearly failed at this. Any help would be greatly appreciated.

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:37:37.297

尝试这个

```
$obj=json_decode($json);
$data = $obj->fantasy_content->users->{'0'}->user[1]->teams; 
foreach($data as $d){
    echo 'name: ' . $d->team->name ; //prints php 
} 
```

编辑您可以使用 cout 循环遍历名称

```
$obj=json_decode($json);
$data = $obj->fantasy_content->users->{'0'}->user[1]->teams; 
for($i = 0; $i < $data->count; $i++){
    echo 'name: ' . $data->{$i}->team->name ; //prints php 
} 
```

# eclipse - Eclipse - 如何在附加到目标平台插件的代码中打开和设置断点？

> ID：11092432
> 
> 赞同：2
> 
> 时间：2012-06-18T23:21:05.380
> 
> 标签：eclipse, debugging, eclipse-plugin

我是 Eclipse 的新手。我在我的 eclipse 工作台中安装了一些插件以及它们的源插件（因此我已经附加了这些插件的代码）。

如何**打开（并查看）**这些已安装插件的源代码并设置断点以便调试这些插件？

我这个任务背后的动机是更深入地了解其中一些插件的源代码。

虽然帖子[如何在第三方库中的 Eclipse 中设置断点？](https://stackoverflow.com/questions/370814/how-to-set-a-breakpoint-in-eclipse-in-a-third-party-library)解释了一些方法，它没有告诉如何打开和查看附加的源代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:57:54.507

如果只需要断点，使用Ctrl-Shift-T（Open Type），输入类名并设置断点。

但是如果你真的想了解有问题的插件，还有更多：打开 PDE 透视图，有一个视图“插件”。选择您感兴趣的插件，从插件的上下文菜单中选择**Import->As Source 。**这会将插件导入您的工作区，因此您可以真正调查内部的所有工件，而不仅仅是源代码。默认情况下，您的启动配置将使用工作区中的插件作为首选，因此您甚至可以现在修改导入的插件并查看运行工作区时的效果。

# events - Ninject bbv EventBroker 订阅错误

> ID：11092433
> 
> 赞同：0
> 
> 时间：2012-06-18T23:21:06.603
> 
> 标签：events, ninject, publish-subscribe

我正在尝试将 bbv.common.EventBroker 与 Ninject 一起使用，但在正确连接时遇到了一些问题。

我目前正在使用 Ninject 工厂创建一个项目，然后，因为我订阅了事件，所以使用事件代理进行订阅。但是，当调用 register 方法时，我得到一个错误，我根本找不到任何信息。我什至不确定错误是什么意思。

**错误：**

bbv.Common.EventBroker.Exceptions.RepeatedSubscriptionException 发生消息=不能为同一订阅者添加多个订阅处理程序方法一个主题：“方法 1”。Source=bbv.Common.EventBroker StackTrace：在 bbv.Common.EventBroker.Internals.EventTopic.ThrowIfRepeatedSubscription（对象订阅者，字符串 handlerMethodName）在 bbv.Common.EventBroker.Internals.EventTopic.AddSubscription（对象订阅者，MethodInfo handlerMethod，IHandler 处理程序， IList`1 subscriptionMatchers) 在 bbv.Common.EventBroker.Internals.EventInspector.HandleSubscriber(对象订阅者，布尔寄存器，MethodInfo methodInfo，EventSubscriptionAttribute attr，IEventTopicHost eventTopicHost) 在 bbv.Common.EventBroker.Internals.EventInspector.ProcessSubscriber(对象订阅者，布尔登记，
内部异常：

**代码：**

```
public const string Topic1 = "Topic1";
public const string Topic2 = "Topic2";
public const string Topic3 = "Topic3";
public const string Topic4 = "Topic4";

public ItemHelper(IItem item, IEventBroker eventBroker)
{
  _item = item;
  eventBroker.Register(this);
}

[EventSubscription(Topic1, typeof(bbv.Common.EventBroker.Handlers.Publisher))]
public void Method1(object sender, SomeArgs1 args)
{
  ...
}

[EventSubscription(Topic2, typeof(bbv.Common.EventBroker.Handlers.Publisher))]
public void Method2(object sender, SomeArgs2 args)
{
  ...
}

[EventSubscription(Topic3, typeof(bbv.Common.EventBroker.Handlers.Publisher))]
public void Method3(object sender, SomeArgs3 args)
{
  ...
}

[EventSubscription(Topic4, typeof(bbv.Common.EventBroker.Handlers.Publisher))]
public void Method4(object sender, SomeArgs4 args)
{
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:35:06.133

事实证明，该类有一个接口，其方法具有 [EventSubscription] 属性。既然我知道了这一点，错误消息确实更有意义。

# python - Python将字符串解包到数组中

> ID：11092437
> 
> 赞同：2
> 
> 时间：2012-06-18T23:21:38.537
> 
> 标签：python, arrays, string

我每天都在使用 Ruby，但我在 Python 中遇到了问题。我发现这种语言非常相似......但是我从 Ruby 迁移时遇到了一些问题 :)

请帮我在python中转换这个动作：

```
 string = "qwerty2012"
   (var, some_var, another_var)  = string.unpack("a1a4a*") 
```

这应该从字符串返回三个具有解压值的变量：

```
 var         = "q"      # a1
   some_var    = "wert"   # a4
   another_var = "y2012"  # a* 
```

帮我用Python表示它谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T23:25:46.663

```
s = "qwerty2012"
(a, b, c) = s[:1], s[1:5], s[5:] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T00:13:29.340

Python 确实有一个名为[struct](http://docs.python.org/library/struct.html)的类似模块。*它缺乏获取字符串其余部分的*能力，就像[Ruby 和 PHP 从 Perl](http://perldoc.perl.org/functions/pack.html)中提取的那样。你几乎可以到达那里：

```
>>> import struct
>>> s = 'qwerty2012'
>>> struct.unpack_from('1s4s', s)
('q', 'wert')
>>> def my_unpack(format, packed_string):
...    result = []
...    result.extend(struct.unpack_from(format, packed_string))
...    chars_gobbled = struct.calcsize(format)
...    rest = packed_string[chars_gobbled:]
...    if rest:
...        result.append(rest)
...    return result
...
>>> my_unpack('1s4s', 'qwerty2012')
['q', 'wert', 'y2012']
>>> my_unpack('1s4s', 'qwert')
['q', 'wert']
>>> [hex(x) for x in my_unpack('<I', '\xDE\xAD\xBE\xEF')]
['0xefbeadde'] 
```

我希望该`struct`模块实现了 Perl 的其余部分，`unpack`因为`pack`它们对于撕开二进制数据包是非常有用的功能，但唉。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T23:26:14.773

```
s = "qwerty2012"
var, some_var, another_var = s[:1], s[1:5], s[5:] 
```

将分别进行分配和产量：

```
q
wert
y2012 
```

上面的赋值使用了[Python Docs](http://docs.python.org/tutorial/introduction.html)中描述的*切片符号*。这篇 SO post [Good Primer for Python Slice Notation](https://stackoverflow.com/a/509295/1209279)也给出了很好的解释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T01:22:07.080

这是一个初步的娱乐`unpack`：

```
import re
import StringIO

def unpack(s, fmt):
    fs = StringIO.StringIO(s)
    res = []
    for do,num in unpack.pattern.findall(fmt):
        if num == '*':
            num = len(s)
        elif num == '':
            num = 1
        else:
            num = int(num)
        this = unpack.types[do](num, fs)
        if this is not None:
            res.append(this)
    return res

unpack.types = {
    '@': lambda n,s: s.seek(n),             # skip to offset
    'a': lambda n,s: s.read(n),             # string
    'A': lambda n,s: s.read(n).rstrip(),    # string, right-trimmed
    'b': lambda n,s: bin(reduce(lambda x,y:256*x+ord(y), s.read(n), 0))[2:].zfill(8*n)[::-1],   # binary, LSB first
    'B': lambda n,s: bin(reduce(lambda x,y:256*x+ord(y), s.read(n), 0))[2:].zfill(8*n)          # binary, MSB first
}
unpack.pattern = re.compile(r'([a-zA-Z@](?:_|!|<|>|!<|!>|0|))(\d+|\*|)') 
```

它适用于您给定的示例，

```
unpack("qwerty2012", "a1a4a*")  # -> ['q', 'wert', 'y2012'] 
```

但有一长串尚未实现的数据类型（请参阅[文档](http://ruby-doc.org/core-1.9.3/String.html#method-i-unpack)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T04:50:23.607

这可能会简化您从 Ruby 的迁移：

```
import re
import struct

def unpack(format, a_string):
    pattern = r'''a(\*|\d+)\s*'''
    widths = [int(w) if w is not '*' else 0 for w in re.findall(pattern, format)]
    if not widths[-1]: widths[-1] = len(a_string) - sum(widths)
    fmt = ''.join('%ds' % f for f in widths)
    return struct.unpack_from(fmt, a_string)

(var, some_var, another_var) = unpack('a1a4a*', 'qwerty2012')  # also 'a1 a4 a*' OK
print (var, some_var, another_var) 
```

输出：

```
('q', 'wert', 'y2012') 
```

# android - 来自资产的 Android InputStream 文件：FileNotFoundExeption

> ID：11092440
> 
> 赞同：2
> 
> 时间：2012-06-18T23:22:08.563
> 
> 标签：android, string, variables, inputstream, android-assets

我正在尝试使用 InputStream 变量从 assets 文件夹中打开一个 JSON 文件，但我得到了 FileNotFoundExeption。该文件在那里并且路径是正确的。我已经到处查看了，但是我在这里找到的任何东西都不起作用。关于我有什么错误以及如何纠正它的任何想法（请提供代码）？

从调用活动中：

```
String uri = "file:///android_asset/html/json/regulatory_list.json";
        args.putString("KEY_URL", uri); 
```

在片段中：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        Bundle args = this.getArguments();
        String URL = args.getString(KEY_URL);
        new GetJSONTask().execute(URL);
    }

    class GetJSONTask extends AsyncTask<String, Integer, String> {

    protected String doInBackground(String... arg0) {

        String uri = arg0[0];

        InputStream is = null;

        if (uri.contains("http") == true) {// Run from URL
            try {. . .

            } else {

            try {. . .
                InputStream jsonFile = getActivity().getAssets().open(uri);
                Reader reader = new BufferedReader(new InputStreamReader(jsonFile, "UTF-8"));
            . . .
        }
    . . . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:51:33.140

我认为您的文件 uri 的格式不适合您尝试执行的操作。

尝试改变这个：

```
String uri = "file:///android_asset/html/json/regulatory_list.json"; 
```

对此：

```
String uri = "html/json/regulatory_list.json"; 
```

# javascript - 如何将表单信息存储在 html5 sql 数据库中？

> ID：11092442
> 
> 赞同：0
> 
> 时间：2012-06-18T23:22:16.660
> 
> 标签：javascript, sql, html, client

我正在创建一个仅使用客户端语言的项目。我想从 html 表单中获取信息并将其存储在 HTML5 Web SQL 数据库中。

我想知道是否有人可以提出最好的方法来做到这一点。我应该如何将表单数据存储在 JavaScript 变量中，然后将这些变量传递给 HTML5 SQL？

任何意见，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:03:11.480

只是发布我在上面的评论中提到的 html5rocks.com/en/tutorials/webdatabase/todo 它与我想要实现的目标非常相似并且对我帮助很大

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T23:29:15.323

webSQL 不再是 w3c 支持的标准。您不应该这样做，不，没有后端就不会发生这种情况。除非有什么神奇的东西我不知道。

# nginx - nginx 不断将相同的 http_cookie 传递给 uwsgi

> ID：11092444
> 
> 赞同：1
> 
> 时间：2012-06-18T23:22:21.420
> 
> 标签：nginx, uwsgi

我有一个通过 uwsgi 运行的小型 python 应用程序，请求由 nginx 提供服务。

我正在打印环境变量......看起来在几个 ok 请求之后，nginx 正在为不相关的请求发送相同的 HTTP_COOKIE 参数：

例如：

> {'UWSGI_CHDIR'：'/ebs/py'，'HTTP_COOKIE'：'ge_t_c=4fcee8450c3bee709800920c'，'UWSGI_SCRIPT'：'服务器'，'uwsgi.version'：'1.1.2'，'REQUEST_METHOD'：'GET'， 'PATH_INFO': '/redirect/ebebaf3b-475a-4010-9a72-96eeff797f1e', 'SERVER_PROTOCOL': 'HTTP/1.1', 'QUERY_STRING': '', 'x-wsgiorg.fdevent.readable': , 'CONTENT_LENGTH' : '', 'uwsgi.ready_fd': None, 'HTTP_USER_AGENT': 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)', 'HTTP_CONNECTION': 'close', 'HTTP_REFERER': 'http://www.facebook.com/'，'SERVER_NAME'：'pixel.domain.com'，'REMOTE_ADDR'：'10.load.bal.ip'，'wsgi.url_scheme': 'http', 'SERVER_PORT': '80', 'wsgi.multiprocess': True, 'uwsgi.node': 'py.domain.com', 'DOCUMENT_ROOT': '/etc/nginx/html', 'UWSGI_PYHOME': '/ebs/py', 'uwsgi.core': 127, 'HTTP_X_FORWARDED_PROTO': 'http', 'x-wsgiorg.fdevent.writable': , 'wsgi.input': , 'HTTP_HOST': ' track.domain.com', 'wsgi.multithread': False, 'REQUEST_URI': '/redirect/ebebaf3b-475a-4010-9a72-96eeff797f1e', 'HTTP_ACCEPT': 'text/html, application/xhtml+xml,/ebs/py'，'uwsgi.core'：127，'HTTP_X_FORWARDED_PROTO'：'http'，'x-wsgiorg.fdevent.writable'：，'wsgi.input'：，'HTTP_HOST'：'track.domain.com ', 'wsgi.multithread': False, 'REQUEST_URI': '/redirect/ebebaf3b-475a-4010-9a72-96eeff797f1e', 'HTTP_ACCEPT': 'text/html, application/xhtml+xml,/ebs/py'，'uwsgi.core'：127，'HTTP_X_FORWARDED_PROTO'：'http'，'x-wsgiorg.fdevent.writable'：，'wsgi.input'：，'HTTP_HOST'：'track.domain.com ', 'wsgi.multithread': False, 'REQUEST_URI': '/redirect/ebebaf3b-475a-4010-9a72-96eeff797f1e', 'HTTP_ACCEPT': 'text/html, application/xhtml+xml,*/* ', 'wsgi.version': (1, 0), 'x-wsgiorg.fdevent.timeout': 无, 'HTTP_X_FORWARDED_FOR': '10.load.bal.ip', 'wsgi.errors': , 'REMOTE_PORT '：'36462'，'HTTP_ACCEPT_LANGUAGE'：'en-US'，'wsgi.run_once'：假，'HTTP_X_FORWARDED_PORT'：'80'，'CONTENT_TYPE'：''，'wsgi.file_wrapper'：，'HTTP_ACCEPT_ENCODING'： 'gzip，放气'}

和

> {'UWSGI_CHDIR'：'/ebs/py'，'HTTP_COOKIE'：'ge_t_c=4fcee8450c3bee709800920c'，'UWSGI_SCRIPT'：'服务器'，'uwsgi.version'：'1.1.2'，'REQUEST_METHOD'：'GET'， 'PATH_INFO': '/redirect/2391e658-95ef-4300-80f5-83dbb1a0e526', 'SERVER_PROTOCOL': 'HTTP/1.1', 'QUERY_STRING': '', 'x-wsgiorg.fdevent.readable': , 'CONTENT_LENGTH' : '', 'uwsgi.ready_fd': None, 'HTTP_USER_AGENT': 'Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48\. 3'，'HTTP_CONNECTION'：'关闭'，'HTTP_REFERER'：'http://www.facebook.com/'，'SERVER_NAME'：'pixel.domain.com'，'REMOTE_ADDR'：'10.load.balancer.ip'，'wsgi.url_scheme'：'http'，'SERVER_PORT'：'80'，'wsgi.multiprocess'：真，'uwsgi.node'：'py.domain。 com'，'DOCUMENT_ROOT'：'/etc/nginx/html'，'UWSGI_PYHOME'：'/ebs/py'，'uwsgi.core'：127，'HTTP_X_FORWARDED_PROTO'：'http'，'x-wsgiorg.fdevent。可写': , 'wsgi.input': , 'HTTP_HOST': 'fire.domain.com', 'wsgi.multithread': False, 'REQUEST_URI': '/redirect/2391e658-95ef-4300-80f5-83dbb1a0e526', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,多进程'：真，'uwsgi.node'：'py.domain.com'，'DOCUMENT_ROOT'：'/etc/nginx/html'，'UWSGI_PYHOME'：'/ebs/py'，'uwsgi.core'：127 , 'HTTP_X_FORWARDED_PROTO': 'http', 'x-wsgiorg.fdevent.writable': , 'wsgi.input': , 'HTTP_HOST': 'fire.domain.com', 'wsgi.multithread': False, 'REQUEST_URI' : '/redirect/2391e658-95ef-4300-80f5-83dbb1a0e526', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,多进程'：真，'uwsgi.node'：'py.domain.com'，'DOCUMENT_ROOT'：'/etc/nginx/html'，'UWSGI_PYHOME'：'/ebs/py'，'uwsgi.core'：127 , 'HTTP_X_FORWARDED_PROTO': 'http', 'x-wsgiorg.fdevent.writable': , 'wsgi.input': , 'HTTP_HOST': 'fire.domain.com', 'wsgi.multithread': False, 'REQUEST_URI' : '/redirect/2391e658-95ef-4300-80f5-83dbb1a0e526', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,输入': , 'HTTP_HOST': 'fire.domain.com', 'wsgi.multithread': False, 'REQUEST_URI': '/redirect/2391e658-95ef-4300-80f5-83dbb1a0e526', 'HTTP_ACCEPT': 'text/ html,应用程序/xhtml+xml,应用程序/xml;q=0.9,输入': , 'HTTP_HOST': 'fire.domain.com', 'wsgi.multithread': False, 'REQUEST_URI': '/redirect/2391e658-95ef-4300-80f5-83dbb1a0e526', 'HTTP_ACCEPT': 'text/ html,应用程序/xhtml+xml,应用程序/xml;q=0.9,*/* ;q=0.8', 'wsgi.version': (1, 0), 'x-wsgiorg.fdevent.timeout': 无, 'HTTP_X_FORWARDED_FOR': '10.load.bal.ip', 'wsgi.errors' : , 'REMOTE_PORT': '39498', 'HTTP_ACCEPT_LANGUAGE': 'en-us', 'wsgi.run_once': False, 'HTTP_X_FORWARDED_PORT': '80', 'CONTENT_TYPE': '', 'wsgi.file_wrapper': , 'HTTP_ACCEPT_ENCODING'：'gzip，放气'}

这是两个不同的客户。我打开了一个隐身会话，确认没有在标头中发送 cookie，并且 uwsgi 日志显示它收到了相同的 HTTP_COOKIE。

如何确保 nginx 只传递当前请求的正确信息，而不考虑其他请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:27:30.983

弄清楚了...

我必须将此行添加到 /etc/nginx/ 中的 uwsgi_params

uwsgi_param HTTP_COOKIE $http_cookie;

没有它，在 uwsgi/python 应用程序中无法信任 HTTP_COOKIE 变量。

# ios - iOS 上的后台功能

> ID：11092450
> 
> 赞同：0
> 
> 时间：2012-06-18T23:22:47.727
> 
> 标签：ios, background, apple-push-notifications

当应用程序在后台或手机关闭时，我将如何实现应用程序推送通知服务以触发方法。这甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T01:09:14.067

不，那是不可能的。

当应用程序处于前台时，它将直接收到推送通知，并可以做任何它想做的事情来响应。

但是，当它不在前台时，通知会显示给用户（如果他们没有禁用它们）和/或显示在通知中心（如果他们没有禁用它）。*当且仅当*用户选择通知时，您的应用程序才会被带到前台执行。

如果通知不在前台，应用程序不会直接收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:01:21.883

阅读苹果文档：

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:03:20.817

它归结为大量设置，然后实现 application:didReceiveRemoteNotification。[您可以在此处](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)阅读深入的示例。第二部分进入实际应用程序：didReceiveRemoteNotification 实现。

# xcode - IOS Simulator 找不到 sdk 和模拟的应用程序退出错误

> ID：11092452
> 
> 赞同：21
> 
> 时间：2012-06-18T23:22:48.603
> 
> 标签：xcode, sdk, simulator, quit

几个月来我一直遇到这个 Xcode 问题，每当我在 Xcode 上运行任何应用程序并说“模拟应用程序退出”时，我的 iOS 模拟器就会停止工作。和“iOS模拟器找不到SDK。SDK可能需要重新安装。” 我正在运行 Xcode 4.3.3 并安装了 iOS sdk 5.1 并且所有内容都已更新，但它也发生在我以前版本的 Xcode 上。我现在已经尝试重新安装 Xcode 超过 10 次，并且已经发布这个问题一段时间了。没有人能够得到解决方案。我什至已经向苹果发送了错误报告，但我认为他们不会回复。我已经尝试过所有其他有此问题的人在其他线程中被告知要做的所有事情。我' 老实说，我正在考虑购买一台新的 Mac，看看 Xcode 是否可以在该 Mac 上运行，或者使用我当前的 Mac 来让 Apple 看看。因此，如果有人有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-01T20:59:06.140

转到 Xcode -> Preferences -> Downloads 并确保您在项目中选择的“Target SDK”实际上已安装在“下载”窗口下。对我来说，这神奇地被卸载了。一旦我安装了我的应用程序正在使用的 SDK，一切都会再次运行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T14:48:52.110

这对我有用：http: [//www.colinbowern.com/posts/the-simulated-application-quit](http://www.colinbowern.com/posts/the-simulated-application-quit) 我刚刚删除了 ~/Library/Application Support/iPhone Simulator 下的文件夹“6.1”我刚刚再次启动了应用程序和模拟器正确地重新创建了 6.1 文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-02T07:19:04.277

重置模拟器设置（iOS Simulator > Reset Contents and Settings）为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:51:58.270

我遇到过同样的问题。对我来说，所有安装的模拟器（4.3 到 6.0）突然停止工作。然后我去了 Xcode -> Preferences -> Downloads，在那里我有机会至少更新了 5.0 模拟器。这现在可以工作了，但我无法让 4.3 或 5.1 或 6.0 工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T15:14:06.573

关于这个问题，我个人在 xcode 上经历了一件奇怪的事情。有时 sdk 安装正确，但仍然出现此错误。我有两个类，如果我从应用程序委托调用第一类，那么 ipad 模拟器工作正常，但是当我调用第二类时，它会给出需要重新安装 sdk 的错误。在我发生错误的情况下，我在第二堂课中有两个错误。当我在调试后纠正错误时，ipad 模拟器开始完全正常工作。这很奇怪，但这不是您的 sdk 的问题，问题出在代码的某个地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T02:58:06.527

这只是发生在我身上。我尝试使用 iPhone 5.1 模拟器启动，得到错误“iOS 模拟器找不到 SDK。SDK 可能需要重新安装。” 我尝试运行 iPad 5.1 Sim，它确实有效。我切换到非视网膜 iPad。然后我再次尝试运行 iPhone 5.1 Simulator，它成功了。

# java - 是否可以在速度模板中使用 JSP 自定义标签？

> ID：11092457
> 
> 赞同：0
> 
> 时间：2012-06-18T23:23:11.433
> 
> 标签：java, jsp, velocity, jsp-tags, freemarker

我有一个自定义标签库，我想在我的速度模板中使用它。有可能这样做吗？

我希望该设施与免费标记提供的设施有些相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:35:22.070

不是微不足道的。

如果你能找到旧的 VeloTags 项目，你也许可以一起破解一些东西，但 IMO 几乎肯定不值得。

自定义标签*是否*难以抽象并变成 Velocity Tool？使用 FreeMarker 不可行是否有技术原因？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:34:07.343

为什么不直接使用 Freemarker？假设你真的不能，VelocityTools 2.0 中的 VelocityViewTag 可以很容易地将 Velocity 嵌入到 JSP 中，这肯定比我过去在 Velocity 中嵌入 JSP 的尝试要好得多。

# node.js - 使用redis的NodeJS - 使用hiredis安装与不安装？

> ID：11092459
> 
> 赞同：4
> 
> 时间：2012-06-18T23:23:57.023
> 
> 标签：node.js, redis, connect, node-redis

我正在将 redis 集成到我的 NodeJS 服务器应用程序中，并且正在尝试确定是否使用hiredis 命令安装 node_redis。我假设如果它以某种方式没有用，安装它的选项就不会可用。同时，node_redis 的 github 页面 (https://github.com/mranney/node_redis) 明确指出，升级到较新版本的 nodeJS 可能会导致添加的hiredis 选项出现问题。

有人可以列出添加hiredis与不添加的不成文的利弊吗？与 C 库一起使用有多少性能提升？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:30:47.830

对于生产我会认真考虑使用[hiredis解析器，因为它性能更好](https://github.com/mranney/node_redis#performance)。对于测试，您不需要它。然后，当您将新版本部署到服务器时，您只需重新编译hiredis。这没什么大不了的。此外，当您进行适当的测试时，您会注意到 redis/hiredis（或其他任何地方）出现问题。

# jquery - 引导模型两页

> ID：11092460
> 
> 赞同：0
> 
> 时间：2012-06-18T23:24:20.567
> 
> 标签：jquery, jsp, twitter-bootstrap

好吧，我对引导 twitter 有疑问，我有 2 个页面，一个调用和另一个调用 registro.jsp index.jsp 在 index.jsp 中有一个按钮，当我单击一个窗口时，应该出现模态 registro.jsp 可以看到但不是如何，我希望我能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:46:36.923

如果你想使用 twitter bootstrap modal，你需要以 twitter bootstrap 的方式思考。

模态用于显示嵌入在您的页面 (index.jsp) 中的隐藏 div，而不是外部页面。

我认为 twitter 引导模式不适合您的需要。

# android - 评分栏星之间的空间

> ID：11092461
> 
> 赞同：41
> 
> 时间：2012-06-18T23:24:30.580
> 
> 标签：android, rating

我需要在我的 ratingBar 的星星之间插入一个空格，例如 ratingbar 很好：

![在此处输入图像描述](../Images/0600cd5d9490814db3ed53cd6b380fa8.png)

但我需要它：

![在此处输入图像描述](../Images/298c86322d2fc9426c48f1e60d5cfbdf.png)

我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-22T03:30:30.987

我不知道它是否有用，但我制作了一个自定义库，它允许您以编程方式和在 XML（以及其他内容）中更改空间 beetwen 星星：[SimpleRatingBar](https://github.com/FlyingPumba/SimpleRatingBar)。

它的特点：

*   完全工作`android:layout_width`：它可以设置为`wrap_content`，`match_parent`或abritary dp。
*   任意数量的星星。
*   任意步长。
*   星星的大小可以精确控制或通过设置最大大小来控制。
*   正常状态下的可自定义颜色（星星和评级栏的边框、填充和背景）。
*   按下状态下的可自定义颜色（星星和评级栏的边框、填充和背景）。
*   星星之间可定制的大小分隔。
*   可自定义的星星边框宽度。
*   可定制的星星角半径。
*   允许设置 OnRatingBarChangeListener
*   星星填充可以设置为从左到右或从右到左开始（支持 RTL 语言）。
*   AnimationBuilder 集成在视图中以通过动画以编程方式设置评分。

[这是它的预览](https://github.com/FlyingPumba/SimpleRatingBar/raw/master/images/sample.gif)。

在你的情况下，你只需要这样做：

```
ratingbar.setStarsSeparation(20, Dimension.DP); 
```

或者，例如，以像素为单位：

```
ratingbar.setStarsSeparation(100, Dimension.PX); 
```

您可以在`jcenter`或 中找到它`Maven Central`。因此，在您的`build.gradle`文件中只需添加到您的依赖项：

`compile 'com.iarcuschin:simpleratingbar:0.1.+'`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T12:34:18.160

你有下一个财产。

```
android:progressDrawable = "@drawable/rating_stars"
android:indeterminateDrawable = "@drawable/rating_stars" 
```

@drawable/rating_stars：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+android:id/background"
          android:drawable="@drawable/star_empty" />
    <item android:id="@+android:id/secondaryProgress"
          android:drawable="@drawable/star_empty" />
    <item android:id="@+android:id/progress"
          android:drawable="@drawable/star" />
</layer-list> 
```

star_empty 和 star 是可绘制目录中的图像。因此，您可以在图形编辑器中更改 star 和 star_empty 并在需要时添加spassing。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-14T07:04:51.470

只需为其使用自定义图标并使用样式，我的意思是 Photoshop 它，因为您希望它看起来并替换为系统评级样式图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:50:05.120

我同意蒂姆，我应用了相同的逻辑并且它奏效了。在我的项目中，我使用自己的星图作为星图我制作的星图在右侧有额外的空间（填充），导致星之间有空间

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T23:29:01.133

我认为您必须获取系统星形 png 文件的副本并使用 photoshop / gimp / 其他一些编辑器手动添加您想要的填充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-20T21:04:55.973

**您可以使用自定义 SVG 并设置您的分离值**

通过使用该类，您可以修复 Android 自定义 SVG RatingBar 并通过替换类中的值（我将此值标记为 There_You_Can_Set_Your_Value）来设置 Drawable End。

```
import android.annotation.SuppressLint
import android.content.Context
import android.graphics.Bitmap
import android.graphics.BitmapShader
import android.graphics.Canvas
import android.graphics.Shader
import android.graphics.drawable.*
import android.graphics.drawable.shapes.RoundRectShape
import android.graphics.drawable.shapes.Shape
import android.util.AttributeSet
import android.view.Gravity
import androidx.appcompat.graphics.drawable.DrawableWrapper
import androidx.appcompat.widget.AppCompatRatingBar

class RatingBarSvg @JvmOverloads
constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = R.attr.ratingBarStyle,
) : AppCompatRatingBar(context, attrs, defStyleAttr) {

    private var mSampleTile: Bitmap? = null

    private val drawableShape: Shape
        get() {
            val roundedCorners = floatArrayOf(5f, 5f, 5f, 5f, 5f, 5f, 5f, 5f)
            return RoundRectShape(roundedCorners, null, null)
        }

    init {
        val drawable = tileify(progressDrawable, false) as LayerDrawable
        //drawable.findDrawableByLayerId(android.R.id.background).setColorFilter(backgroundTintColor, PorterDuff.Mode.SRC_ATOP);
        //drawable.findDrawableByLayerId(android.R.id.progress).setColorFilter(progressTintColor, PorterDuff.Mode.SRC_ATOP);
        progressDrawable = drawable
    }

    /**
     * Converts a drawable to a tiled version of itself. It will recursively
     * traverse layer and state list drawables.
     */
    @SuppressLint("RestrictedApi")
    private fun tileify(drawable: Drawable, clip: Boolean): Drawable {
        if (drawable is DrawableWrapper) {
            var inner: Drawable? = drawable.wrappedDrawable
            if (inner != null) {
                inner = tileify(inner, clip)
                drawable.wrappedDrawable = inner
            }
        } else if (drawable is LayerDrawable) {
            val numberOfLayers = drawable.numberOfLayers
            val outDrawables = arrayOfNulls<Drawable>(numberOfLayers)

            for (i in 0 until numberOfLayers) {
                val id = drawable.getId(i)
                outDrawables[i] = tileify(
                    drawable.getDrawable(i),
                    id == android.R.id.progress || id == android.R.id.secondaryProgress
                )
            }

            val newBg = LayerDrawable(outDrawables)

            for (i in 0 until numberOfLayers) {
                newBg.setId(i, drawable.getId(i))
            }

            return newBg

        } else if (drawable is BitmapDrawable) {
            val tileBitmap = drawable.bitmap
            if (mSampleTile == null) {
                mSampleTile = tileBitmap
            }

            val shapeDrawable = ShapeDrawable(drawableShape)
            val bitmapShader = BitmapShader(
                tileBitmap,
                Shader.TileMode.REPEAT, Shader.TileMode.CLAMP
            )
            shapeDrawable.paint.shader = bitmapShader
            shapeDrawable.paint.colorFilter = drawable.paint.colorFilter
            return if (clip)
                ClipDrawable(
                    shapeDrawable, Gravity.START,
                    ClipDrawable.HORIZONTAL
                )
            else
                shapeDrawable
        } else {
            return tileify(getBitmapDrawableFromVectorDrawable(drawable), clip)
        }

        return drawable
    }

    private fun getBitmapDrawableFromVectorDrawable(drawable: Drawable): BitmapDrawable {
        val bitmap = Bitmap.createBitmap(
            drawable.intrinsicWidth + (**There_You_Can_Set_Your_Value**).toInt(), //dp between svg images  //* resources.displayMetrics.density
            drawable.intrinsicHeight,
            Bitmap.Config.ARGB_8888
        )
        val canvas = Canvas(bitmap)
        drawable.setBounds(0, 0, drawable.intrinsicWidth, drawable.intrinsicHeight)
        drawable.draw(canvas)
        return BitmapDrawable(resources, bitmap)
    }

    @Synchronized
    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec)
        if (mSampleTile != null) {
            val width = mSampleTile!!.width * numStars
            setMeasuredDimension(
                resolveSizeAndState(width, widthMeasureSpec, 0),
                measuredHeight
            )
        }
    }
} 
```

# ruby - Rails 3.2.3 + Twitter Bootstrap + Nav-Tabs：如何显示特定选项卡？

> ID：11092462
> 
> 赞同：7
> 
> 时间：2012-06-18T23:24:37.003
> 
> 标签：ruby, twitter-bootstrap, twitter-bootstrap-rails

关于rails和bootstrap的另一个新手问题。

我正在使用这样的东西：

```
<div class="tabbable tabs-left">
<ul class="nav nav-tabs">
    <li class="active"><a href="#tab1" data-toggle="tab">About us</a></li>
            <li><a href="#tab9" data-toggle="tab">Address</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane active" id="tab1">
        <%= render 'about_us' %>
    </div>
    <div class="tab-pane" id="tab9">
        <%= render 'address' %>
    </div>
</div> 
```

我的问题是我呈现包含表单的“地址”。通过提交此表单，我最终进入了不同的控制器。使用此控制器保存新地址后，我想重定向到此页面并显示地址选项卡。

我尝试的重定向命令是：redirect_to salon_path(@salon.id.to_s + "#tab9") 这导致调用 url .../salons/1%23tab9。我认为我需要它的.../salons/1#tab9。

但也许你有一个更好的解决方案来选择一个特定的选项卡。

使用：

```
gem 'rails', '3.2.3'
gem 'bootstrap-sass', '2.0.3'. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T22:24:59.810

我自己可以弄清楚，这里的这篇文章把我带到了正确的轨道上：[如何让 Twitter-Bootstrap 导航显示活动链接？](https://stackoverflow.com/questions/9879169/how-to-get-twitter-bootstrap-navigation-to-show-active-link)

```
<div class="tabbable tabs-left">
<ul class="nav nav-tabs">
    <li class="<%= 'active' if params[:tab] == 'tab1' %>"><a href="#tab1" data-toggle="tab">About us</a></li>
    <li class="<%= 'active' if params[:tab] == 'tab9' %>"> <a href="#tab9" data-toggle="tab">Address</a></li>
</ul>

<div class="tab-content">
    <div class="<%= if (params[:tab] == 'tab1' || !params[:tab])then 'tab-pane active'  else 'tab-pane' end%>" id="tab1">
        <%= render 'about_us' %>
    </div>
    <div class="<%= if params[:tab] == 'tab9' then 'tab-pane active'  else 'tab-pane' end%>" id="tab9">
        <%= render 'address' %>
    </div>
</div> 
```

在我的例子中，我这样称呼它：

```
redirect_to salon_path(@salon.id, tab:"tab9") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:13:30.173

为了将来的参考和有类似问题的用户，我会在 Marcus 的回复中再添加一项功能。解决方案本身是完美的，就像一个魅力，但如果没有传递选项卡参数会发生什么？然后引导程序不显示任何选项卡内容，只显示选项卡。对我来说，这看起来相当丑陋和不专业。就我而言，我添加了以下 jQuery 来修复它。

```
$(document).ready(function() {

//The following set of code checks to see if any tab is already active (this occurs if a parameter to tab would be passed)
//If no tab is active, make the first tab and tab-pane active
var elementAlreadyActive = false;
$('.nav-tabs li').each(function(index, li) {
    var element = $(li);
     if (element.attr("class") == "active"){
          elementAlreadyActive = true;
     }

});
if (!elementAlreadyActive){
    $('.nav-tabs li:first').addClass('active');
    $('.tab-content div:first').addClass('active');
} }); 
```

如果未传递参数，则代码不会显示任何内容，而是检查所有 li 元素以查看是否有任何已处于活动状态。如果它们都不是，它会使第一个选项卡和选项卡窗格处于活动状态。

虽然激活第一个选项卡可能对每个人都没有用，但如果没有传递参数，可以轻松修改上面的代码以激活特定选项卡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T21:18:12.157

您只需要`data-toggle="tab"`为每个列表项锚点和`class="tab-pane"`每个选项卡做

```
<div class="tabbable">
 <ul class="nav nav-tabs" id="proftabs">
  <li><a href="#profile_tab"  data-toggle="tab" >Profile</a></li>
  <li><a href="#friends_tab" data-toggle="tab">Friends</a></li>
  <li><a  href="#photos_tab" data-toggle="tab">Photos</a></li>
  <li><a  href="#videos_tab" data-toggle="tab">Videos</a></li>
  <li><a  href="#quotes_tab" data-toggle="tab">Quotes</a></li> 
```

```
 <div class="tab-content">
        <div id="profile_tab" class="tab-pane">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid excepturi id, maxime nesciunt recusandae repellat unde veritatis! Eveniet, fugiat, ipsum. Architecto assumenda, culpa impedit molestias natus porro quisquam repudiandae sunt!
        </div>
    <div id="friends_tab"  class="tab-pane">
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut corporis cupiditate incidunt. Accusantium adipisci architecto dignissimos eligendi est explicabo ipsa molestiae nesciunt optio porro provident, sint soluta, tempore temporibus vitae?
    </div>
    <div id="photos_tab"  class="tab-pane">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error ex harum iste magnam necessitatibus sed sit. A adipisci amet cupiditate delectus dolor itaque numquam officia omnis, provident quod temporibus voluptatibus?
    </div>
    <div id="videos_tab"  class="tab-pane">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquam architecto at autem dolore, dolorum eaque earum eius, id in iste molestias officia, possimus qui quis recusandae repellat reprehenderit suscipit voluptatum!
    </div>
    <div id="quotes_tab"  class="tab-pane">
           Lorem ipsum dolor sit amet, consectetur adipisicing elit. At consectetur, in necessitatibus qui quidem tenetur unde voluptatum! Aspernatur dolorem earum id labore molestiae nam quas quisquam, sapiente sequi ut voluptatibus.
    </div>
  </div>
</div> 
```

# matlab - 矩阵作为二维概率分布：获取中心矩

> ID：11092463
> 
> 赞同：1
> 
> 时间：2012-06-18T23:24:39.927
> 
> 标签：matlab, matrix, distribution, probability

我有一个矩阵，它在 Matlab 中为我提供了一个二维离散分布 (N²->R)。

Matlab（R2011b，带有统计工具箱）中是否有提供中心矩和均值的内置函数？如果它们存在于 (R²->R) 的函数中，那也很好。否则我将不得不自己建造它们，但我不想重新发明轮子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:34:13.237

A quick look and I couldn't turn up any functions, though this isn't a fact by any means.

However, working it out from scratch, and assuming you mean a matrix such as:

```
 % x=1  x=2  x=3
P = [ 0.1  0.2  0.1        % y = 1  
      0.1  0.1  0.2        % y = 2
      0.0  0.0  0.2 ]      % y = 3 
```

And you mean that this describes the joint discrete distribution (joint probability mass function). That is, the entry at `(X,Y)` contains the probability of `(X,Y)` occurring.

I'm also assuming by your use of `N` in mathematical notation means the natural numbers. If so, then you can use the following code.

Mean:

```
 meanX = sum(P,1) * (1:size(P,2))'; 
 meanY = sum(P,2)' * (1:size(P,1))'; 
```

For the central moment `K,L` (`K` correspnding to `X` and `L` corresponding to `Y`):

```
 [X,Y] = meshgrid(1:size(P,2),1:size(P,1));
 integrandXY_KL = (X - meanX).^K .* (Y-meanY).^L .* P;
 momentXY_KL = sum(integrandXY_KL(:)); 
```

And you can generalize it further if the values of X are arbitrary (and not just natural numbers) as follows. If `Xvals = [ 1 2 4 ]` and `Yvals = [ 4 5 6 ]`. All of the above still works, you just replace all occurences of `1:size(P,2)` with `Xvals` and all occurences of `1:size(P,1)` with `Yvals`.

# java - ant 构建文件原语

> ID：11092474
> 
> 赞同：0
> 
> 时间：2012-06-18T23:26:08.127
> 
> 标签：java, ant, primitive

什么是蚂蚁原语？

在我的**build.xml**中，我使用如下语句：

```
<fileset dir="${basedir}/lib">
<fileset dir="${src.test.dir}" includes="**/*.class" /> 
```

ant 是如何知道“src.test.dir”与 ./test-java 相同的？

我在哪里可以找到蚂蚁原语的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:33:50.330

它知道是因为之前有人手动定义了该变量/属性。搜索您的构建文件并查看`src.test.dir`属性的定义位置。它应该是这样的：

```
<!-- Source directory for tests -->
<property name="src.test.dir" value="${basedir}/test-java"/> 
```

默认情况下，ant 只有有限的一组属性，如此[处所述](http://ant.apache.org/manual/properties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:37:13.070

它是一个**属性**，而不是一个**原始**的。

它是在您的构建文件、构建属性文件或命令行中定义的。

# jquery - Jquery滑块空间/边距问题

> ID：11092479
> 
> 赞同：1
> 
> 时间：2012-06-18T23:26:48.813
> 
> 标签：jquery, css, whitespace, margin, slide

我在使用 jquery 滑块脚本时遇到问题。当幻灯片到达最后一个 div 时，它将留下一个空格。我相信这是由于脚本计算了需要多少保证金，但我可能错了。我该如何纠正？我希望最后一个 div 紧贴页面。jsFiddle 链接 - [http://jsfiddle.net/c3v6R/26/](http://jsfiddle.net/c3v6R/26/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:50:37.767

如果您指的是左侧的空白，那么它显示它的原因是因为您的滑块没有容器。如果你把它放在一个具有[溢出：隐藏](http://www.w3.org/TR/CSS21/visufx.html)和确定宽度的 div 中，它应该只显示该框内的内容。

# facebook-like - 为什么我在任何人的页面上都看不到点赞按钮？

> ID：11092484
> 
> 赞同：-1
> 
> 时间：2012-06-18T23:27:17.503
> 
> 标签：facebook-like, facebook-likebox

我有一个企业的facebook页面，当我查看其他人的页面时，没有like按钮，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:34:03.153

确保您以 Facebook 用户而不是企业页面的身份登录。业务页面只是一个页面，而不是用户，但是您可以作为页面登录以在页面上发布帖子和管理事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T21:24:21.497

好的，想通了！如果您作为“页面”登录 Facebook，您将看不到“赞”按钮。您需要使用 Facebook 作为您的主要（个人）个人资料。转到您的页面，然后单击顶部的“编辑页面”下拉菜单并选择您的主帐户“将 Facebook 用作 ...”，然后它应该会显示“赞”按钮。它对我有用！如果此时它不起作用，请尝试注销并重新登录。祝你好运！:)

# python - 如何让 tell() 工作

> ID：11092486
> 
> 赞同：3
> 
> 时间：2012-06-18T23:27:26.140
> 
> 标签：python, python-2.7

我正在尝试打开一个文件并从最后一点读取。我的文件相当大（20 Mb 到 ~ 1 Gb） 在做了一些研究之后，tell() 和 seek() 似乎是执行此操作的最有效方法之一。我试过下面的代码

```
opened = open(filename, "rU")   
f1 = csv.reader(opened)
k = []
for line in f1:
    k.append(opened.tell()) 
```

当我这样做时，列表中的每个值都是 8272 Long。这是否意味着我不能使用这个实现？有什么我想念的吗？谢谢你的帮助！

我在 Windows 7 中运行 python 2.7

**更新**

在将这里学到的所有东西拼凑起来并反复试验后，我得到以下代码

```
opened = open(filename, "rU")   
k = [0]
where = 1
for switch in opened:
    where += len(switch) + 1
    f = StringIO.StringIO(switch)
    interesting = csv.reader(f, delimiter=',')
    good_values = interesting.next()
    k.append(where)

return k 
```

这允许用户准确地知道文件中的位置，同时仍然能够根据其格式对其进行解析。我不完全确定为什么需要不断添加偏移量（似乎换行符在 len() 中没有准确计算）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:54:24.137

看起来`csv.reader`正在以 8272 字节的块读取文件，这就是为什么您会`opened.tell()`多次看到此数字返回的原因-我猜，直到您已从文件中读取了 0-8272 范围内的所有行。之后你会看到 8272*2 几次，确切的数字将取决于缓冲区中读取的行的长度。

所以，基本上，在你的程序中，`tell()`并没有像你想象的那样给你新的 CSV 行的偏移量。它只是告诉您当前读取到用于实现 Python 的 IO 函数的系统函数使用的内部 OS 缓冲区的文件区域末尾的偏移量。

# css - Firebug上规则集的自动完成CSS属性名称？

> ID：11092492
> 
> 赞同：0
> 
> 时间：2012-06-18T23:28:01.740
> 
> 标签：css, properties, firebug

在 Firebug 上，当检查一个元素时，是否有办法自动完成规则集的 CSS 属性名称，类似于某些 IDE 中其他语言的 ctr+alt+space？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:32:20.003

不，这是不可能的。但是您可以在类规则内双击并开始输入 CSS 属性名称 - Firebug 会给您建议/自动完成

# objective-c - 将 CFIndex 转换为 NSInteger

> ID：11092494
> 
> 赞同：3
> 
> 时间：2012-06-18T23:28:08.593
> 
> 标签：objective-c, type-conversion, core-foundation, nsinteger, toll-free-bridging

[这个](https://stackoverflow.com/questions/9952738/convert-cfindex-to-nsuinteger)问题与我的类似，但不包含答案。我想将 a`CFIndex`转换为`NSInteger`. 我检查了具有免费桥接的类型列表，这不是其中之一。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T23:48:02.177

免费桥接的概念仅适用于 Objective-C 对象和 Core Foundation 对象。 `CFIndex`只是原始类型的 typedef `signed long`，并且`NSInteger`是原始类型的 typedef，`long`与`signed long`. 您可以将一种类型的值分配给另一种类型的变量。

# php - 在 PHP 中循环时出现奇怪的 API 问题

> ID：11092497
> 
> 赞同：1
> 
> 时间：2012-06-18T23:28:30.420
> 
> 标签：php, mysql, api, curl

我在这里使用此 API：[https](https://gatewaydtx1.giact.com/gVerifyV2/POST/Verify.asmx?op=Call) ://gatewaydtx1.giact.com/gVerifyV2/POST/Verify.asmx?op=在 php 中使用 curl 调用。我可以在对 API 的一次调用中很好地进行测试。但是，当我尝试遍历多条记录时，在第一次尝试之后每次尝试都会出错。

这是我的代码：

```
<?
//set the variables for posting
$CompanyID = "123";
$Token = "013443234-224e-4f46-bad4-6693deae2231";
$CheckNumber = "1";
$Amount = "30";
$UniqueID = "111";
$url = "https://gatewaydtx1.giact.com/gVerifyV2/POST/Verify.asmx/Call";

//Get the records from table
$sql = "SELECT id,account_no,routing_no FROM banktable WHERE(status = 'queued') LIMIT 0,100";
$result = mysql_query($sql) or die("Error: " . mysql_error() . "<br>");
while($row = mysql_fetch_array($result)) {
    $RoutingNumber = $row['routing_no'];
    $AccountNumber = $row['account_no'];    
    //Do the curl
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_URL, $url );
    $post_array = array(
        "CompanyID"=>$CompanyID,
        "Token"=>$Token,
        "RoutingNumber"=>$RoutingNumber,
        "AccountNumber"=>$AccountNumber,
        "CheckNumber"=>$CheckNumber,
        "Amount"=>$Amount,
        "UniqueID"=>$UniqueID,
    );

    //url-ify the data
    foreach($post_array as $key=>$value){
        $post_array_string .= $key.'='.$value.'&';
    }
    $post_array_string = rtrim($post_array_string,'&');

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_POST,count($post_array ));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$post_array_string);
    $response = curl_exec($ch);
    echo $response;
    curl_close($ch);
}
?> 
```

这是循环 4 行后这段代码输出的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://www.giact.com/webservices/gVerifyV2/">33302261|true|No Data|ND00</string>
Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).
Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).
Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx). 
```

请注意，它尝试的第一条记录产生了正确的结果。之后，错误。尽管我在这里特别提到了我的循环，但我应该注意，如果我只是在页面上硬编码两个或更多卷曲，也会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:34:46.260

```
//url-ify the data
foreach($post_array as $key=>$value){
    $post_array_string .= $key.'='.$value.'&';
}
$post_array_string = rtrim($post_array_string,'&'); 
```

我认为您需要在每个循环中清除 $post_array_string 变量。

```
unset($post_array_string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:36:27.537

前：

`foreach($post_array as $key=>$value){`

添加：

`$post_array_string = '';`

或者你可以使用`http_build_query()`函数。

# python - Python类--需要解释

> ID：11092510
> 
> 赞同：3
> 
> 时间：2012-06-18T23:30:26.967
> 
> 标签：python

我对类定义及其使用有一个一般性的问题。其中一本书的以下代码可以正常工作，但我有一个一般性问题。

在这里，我们定义了一个 Point 类并创建了 2 个实例 Point1 和 Point2。在计算point2的距离时，我们如何传递point1对象？

point1 不是点对象，而 other_point 被表示为变量。

我有点困惑。

代码：

```
import math
class Point:
    def move(self, x, y):
        self.x = x
        self.y = y
    def reset(self):
        self.move(0, 0)
    def calculate_distance(self, other_point):
        print("Inside calculating distance")

        return math.sqrt(
                (self.x - other_point.x)**2 +
                (self.y - other_point.y)**2)

point1 = Point()
point2 = Point()
point1.reset()
point2.move(5,0)
print(point2.calculate_distance(point1)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T23:38:46.887

当您创建一个`Point`对象时，会发生几件事。

```
point1 = Point()
point2 = Point() 
```

发生的一件事是任何属于`Point`该类的方法都是*绑定的*。这意味着方法中的参数之一是*固定*的，因此它始终引用创建的实例。我们来看看 的定义`calculate_distance`。

```
def calculate_distance(self, other_point):
    print("Inside calculating distance")

    return math.sqrt(
            (self.x - other_point.x)**2 +
            (self.y - other_point.y)**2) 
```

您可能会猜到哪个参数是固定的。当`Point()`被调用并创建实例时，`self`参数 of`calculate_distnace`是固定的，因此它始终引用该实例。所以每当你这样做时：

```
point1.calculate_distance(x) 
```

你正在做相当于这个：

```
Point.calculate_distance(point1, x) 
```

每当你这样做时：

```
point2.calculate_distance(point1) 
```

你正在做相当于这个：

```
Point.calculate_distance(point2, point1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:55:01.867

这就是`self`变量的作用。因此，当您在一个类的定义中时，您可以使用它`self`来标识您正在尝试操作其数据的对象。

例如，假设您有一个名为 human 的类（它有一个名为 的成员变量`age`），并且每年，您都希望通过调用该`increment_age`函数来增加该人的年龄。然后，您可以编写以下代码：

```
class Human:
    def __init__(self):
        self.age = 0

    def increment_age(self):
        self.age += 1

>>> h = Human()
>>> print h.age
0
>>> h.increment_age()
>>> print h.age
1 
```

所以你看，通过调用`self`，你指的是对象本身。在您的示例中，这将转化为`self`引用`point1`.

现在，假设在`Human`类中，我们要添加一个允许两个人打架的功能。在这种情况下，一个人将不得不与另一个人战斗（假设与另一个人战斗会使您的生命增加一个，而另一个人的生命减少一个）。在这种情况下，您可以在类中编写以下函数`Human`：

```
def fight(self, other_human):
    self.age += 1
    other_human.age -= 1 
```

现在：

```
>>> h1 = Human()
>>> h2 = Human()
>>> h1.age = 5
>>> h2.age = 3
>>> print h1.age
5
>>> print h2.age
3
>>> h1.fight(h2)
>>> print h1.age
6
>>> print h2.age
2 
```

因此，您可以在此示例中看到`h2`函数`other_human`中的`fight`。

希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T23:34:05.250

给定您的代码，使用as引用的对象和as引用的对象进行`point2.calculate_distance(point1)`调用。`calculate_distance``point2``self``point1``other_point`

了解这类事情的一个好方法是使用可视化调试器，并在调用时检查堆栈帧中的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T23:35:06.773

Inside`calculate_distance`是`other_point`用于引用作为参数传递的任何对象的名称。

# python - 唯一字典列表

> ID：11092511
> 
> 赞同：219
> 
> 时间：2012-06-18T23:30:38.333
> 
> 标签：python, dictionary

假设我有一个字典列表：

```
[
    {'id': 1, 'name': 'john', 'age': 34},
    {'id': 1, 'name': 'john', 'age': 34},
    {'id': 2, 'name': 'hanna', 'age': 30},
] 
```

如何获取唯一字典列表（删除重复项）？

```
[
    {'id': 1, 'name': 'john', 'age': 34},
    {'id': 2, 'name': 'hanna', 'age': 30},
] 
```

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2012-06-18T23:42:23.153

所以做一个临时的字典，关键是`id`. 这会过滤掉重复项。的`values()`dict 将是列表

Python2.7中

```
>>> L=[
... {'id':1,'name':'john', 'age':34},
... {'id':1,'name':'john', 'age':34},
... {'id':2,'name':'hanna', 'age':30},
... ]
>>> {v['id']:v for v in L}.values()
[{'age': 34, 'id': 1, 'name': 'john'}, {'age': 30, 'id': 2, 'name': 'hanna'}] 
```

在 Python3 中

```
>>> L=[
... {'id':1,'name':'john', 'age':34},
... {'id':1,'name':'john', 'age':34},
... {'id':2,'name':'hanna', 'age':30},
... ] 
>>> list({v['id']:v for v in L}.values())
[{'age': 34, 'id': 1, 'name': 'john'}, {'age': 30, 'id': 2, 'name': 'hanna'}] 
```

在 Python2.5/2.6

```
>>> L=[
... {'id':1,'name':'john', 'age':34},
... {'id':1,'name':'john', 'age':34},
... {'id':2,'name':'hanna', 'age':30},
... ] 
>>> dict((v['id'],v) for v in L).values()
[{'age': 34, 'id': 1, 'name': 'john'}, {'age': 30, 'id': 2, 'name': 'hanna'}] 
```

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2012-06-18T23:44:27.623

在集合中只查找公共元素的常用方法是使用 Python 的`set`类。只需将所有元素添加到集合中，然后将集合转换为 a `list`，然后重复项就消失了。

当然，问题在于 a`set()`只能包含可散列的条目，而 a`dict`不可散列。

如果我遇到这个问题，我的解决方案是将每个字符串转换`dict`为代表 的字符串`dict`，然后将所有字符串添加到 a中，`set()`然后将字符串值读出为 a`list()`并转换回`dict`.

字符串形式的一个很好的表示`dict`是 JSON 格式。Python 有一个用于 JSON 的内置模块（`json`当然称为）。

剩下的问题是 a 中的元素`dict`没有排序，当 Python 将`dict`a 转换为 JSON 字符串时，您可能会得到两个 JSON 字符串，它们表示等效的字典但不是相同的字符串。`sort_keys=True`简单的解决方案是在调用时传递参数`json.dumps()`。

编辑：这个解决方案假设给定`dict`的任何部分都可以不同。如果我们可以假设`dict`具有相同`"id"`值的每个将匹配`dict`具有相同值的每个其他`"id"`，那么这是矫枉过正的；@gnibbler 的解决方案会更快更容易。

编辑：现在有来自 André Lima 的评论明确指出，如果 ID 是重复的，则可以安全地假设整个 ID 是`dict`重复的。所以这个答案有点矫枉过正，我推荐@gnibbler 的答案。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2016-07-22T08:00:14.633

如果字典仅由所有项目唯一标识（ID 不可用），您可以使用 JSON 来使用答案。以下是不使用 JSON 的替代方法，只要所有字典值都是不可变的，它就可以工作

```
[dict(s) for s in set(frozenset(d.items()) for d in L)] 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-06-18T23:47:40.690

这是一个相当紧凑的解决方案，尽管我怀疑不是特别有效（委婉地说）：

```
>>> ds = [{'id':1,'name':'john', 'age':34},
...       {'id':1,'name':'john', 'age':34},
...       {'id':2,'name':'hanna', 'age':30}
...       ]
>>> map(dict, set(tuple(sorted(d.items())) for d in ds))
[{'age': 30, 'id': 2, 'name': 'hanna'}, {'age': 34, 'id': 1, 'name': 'john'}] 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-11-06T04:25:08.640

您可以使用 numpy 库（仅适用于 Python2.x）：

```
 import numpy as np 

   list_of_unique_dicts=list(np.unique(np.array(list_of_dicts))) 
```

要使其与 Python 3.x（和最新版本的 numpy）一起使用，您需要将 dicts 数组转换为 numpy 字符串数组，例如

```
list_of_unique_dicts=list(np.unique(np.array(list_of_dicts).astype(str))) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-06-18T23:52:59.777

```
a = [
{'id':1,'name':'john', 'age':34},
{'id':1,'name':'john', 'age':34},
{'id':2,'name':'hanna', 'age':30},
]

b = {x['id']:x for x in a}.values()

print(b) 
```

输出：

> [{'age': 34, 'id': 1, 'name': 'john'}, {'age': 30, 'id': 2, 'name': 'hanna'}]

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-06-18T23:45:31.063

由于`id`足以检测重复项，并且`id`是可散列的：通过以`id`为键的字典运行它们。每个键的值是原始字典。

```
deduped_dicts = dict((item["id"], item) for item in list_of_dicts).values() 
```

在 Python 3 中，`values()`不返回列表；您需要将该表达式的整个右侧包装在 中`list()`，并且您可以更经济地将表达式的内容编写为 dict 理解：

```
deduped_dicts = list({item["id"]: item for item in list_of_dicts}.values()) 
```

请注意，结果可能与原始结果的顺序不同。如果这是一个要求，您可以使用 a`Collections.OrderedDict`而不是 a `dict`。

*顺便说一句，将数据保存*在使用`id`as 键开始的字典中可能很有意义。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-06-07T01:37:56.670

我们可以做`pandas`

```
import pandas as pd
yourdict=pd.DataFrame(L).drop_duplicates().to_dict('r')
Out[293]: [{'age': 34, 'id': 1, 'name': 'john'}, {'age': 30, 'id': 2, 'name': 'hanna'}] 
```

注意与接受答案略有不同。

[`drop_duplicates`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop_duplicates.html)将检查 pandas 中的所有列，如果都相同，则该行将被删除。

例如 ：

如果我们将第二个`dict`名字从***john***更改为***peter***

```
L=[
    {'id': 1, 'name': 'john', 'age': 34},
    {'id': 1, 'name': 'peter', 'age': 34},
    {'id': 2, 'name': 'hanna', 'age': 30},
]
pd.DataFrame(L).drop_duplicates().to_dict('r')
Out[295]: 
[{'age': 34, 'id': 1, 'name': 'john'},
 {'age': 34, 'id': 1, 'name': 'peter'},# here will still keeping the dict in the out put 
 {'age': 30, 'id': 2, 'name': 'hanna'}] 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-06-26T17:11:40.980

我不知道您是否只希望列表中的 dicts 的 id 是唯一的，但如果目标是拥有一组 dict ，其中唯一性在所有键的值上..您应该使用像这样的元组键在你的理解中：

```
>>> L=[
...     {'id':1,'name':'john', 'age':34},
...    {'id':1,'name':'john', 'age':34}, 
...    {'id':2,'name':'hanna', 'age':30},
...    {'id':2,'name':'hanna', 'age':50}
...    ]
>>> len(L)
4
>>> L=list({(v['id'], v['age'], v['name']):v for v in L}.values())
>>>L
[{'id': 1, 'name': 'john', 'age': 34}, {'id': 2, 'name': 'hanna', 'age': 30}, {'id': 2, 'name': 'hanna', 'age': 50}]
>>>len(L)
3 
```

希望它可以帮助您或其他有顾虑的人....

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-12-13T14:33:20.953

我总结了我最喜欢的尝试：

[https://repl.it/@SmaMa/Python-List-of-unique-dictionaries](https://repl.it/@SmaMa/Python-List-of-unique-dictionaries)

```
# ----------------------------------------------
# Setup
# ----------------------------------------------

myList = [
  {"id":"1", "lala": "value_1"},
  {"id": "2", "lala": "value_2"}, 
  {"id": "2", "lala": "value_2"}, 
  {"id": "3", "lala": "value_3"}
]
print("myList:", myList)

# -----------------------------------------------
# Option 1 if objects has an unique identifier
# -----------------------------------------------

myUniqueList = list({myObject['id']:myObject for myObject in myList}.values())
print("myUniqueList:", myUniqueList)

# -----------------------------------------------
# Option 2 if uniquely identified by whole object
# -----------------------------------------------

myUniqueSet = [dict(s) for s in set(frozenset(myObject.items()) for myObject in myList)]
print("myUniqueSet:", myUniqueSet)

# -----------------------------------------------
# Option 3 for hashable objects (not dicts)
# -----------------------------------------------

myHashableObjects = list(set(["1", "2", "2", "3"]))
print("myHashAbleList:", myHashableObjects) 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-03-13T13:24:10.733

这里有很多答案，所以让我再补充一个：

```
import json
from typing import List

def dedup_dicts(items: List[dict]):
    dedupped = [ json.loads(i) for i in set(json.dumps(item, sort_keys=True) for item in items)]
    return dedupped

items = [
    {'id': 1, 'name': 'john', 'age': 34},
    {'id': 1, 'name': 'john', 'age': 34},
    {'id': 2, 'name': 'hanna', 'age': 30},
]
dedup_dicts(items) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-09-04T16:14:16.393

扩展 John La Rooy ( [Python - List of unique dictionaries](https://stackoverflow.com/questions/11092511/python-list-of-unique-dictionaries#answer-11092590) ) 答案，使其更加灵活：

```
def dedup_dict_list(list_of_dicts: list, columns: list) -> list:
    return list({''.join(row[column] for column in columns): row
                for row in list_of_dicts}.values()) 
```

调用函数：

```
sorted_list_of_dicts = dedup_dict_list(
    unsorted_list_of_dicts, ['id', 'name']) 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-04-02T08:30:30.923

在 python 3 中，简单的技巧，但基于唯一字段（id）：

```
data = [ {'id': 1}, {'id': 1}]

list({ item['id'] : item for item in data}.values()) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-10-02T19:47:00.157

在 python 3.6+（我已经测试过）中，只需使用：

```
import json

#Toy example, but will also work for your case 
myListOfDicts = [{'a':1,'b':2},{'a':1,'b':2},{'a':1,'b':3}]
#Start by sorting each dictionary by keys
myListOfDictsSorted = [sorted(d.items()) for d in myListOfDicts]

#Using json methods with set() to get unique dict
myListOfUniqueDicts = list(map(json.loads,set(map(json.dumps, myListOfDictsSorted))))

print(myListOfUniqueDicts) 
```

**说明：**我们正在映射`json.dumps`以将字典编码为 json 对象，这些对象是不可变的。`set`然后可用于生成**唯一**不可变的可迭代。最后，我们使用`json.loads`. 请注意，最初，必须按键排序才能以独特的形式排列字典。这对 Python 3.6+ 有效，因为字典是默认排序的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-09-25T00:26:39.530

对象可以放入集合中。您可以使用对象而不是字典，如果需要，在所有集合插入转换回字典列表之后。例子

```
class Person:
    def __init__(self, id, age, name):
        self.id = id
        self.age = age
        self.name = name

my_set = {Person(id=2, age=3, name='Jhon')}

my_set.add(Person(id=3, age=34, name='Guy'))

my_set.add({Person(id=2, age=3, name='Jhon')})

# if needed convert to list of dicts
list_of_dict = [{'id': obj.id,
                 'name': obj.name,
                 'age': obj.age} for obj in my_set] 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-05-27T21:20:57.970

好吧，这里提到的所有答案都很好，但是在某些答案中，如果字典项目有嵌套列表或字典，可能会遇到错误，所以我建议简单的答案

```
a = [str(i) for i in a]
a = list(set(a))
a = [eval(i) for i in a] 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-02-18T12:11:11.753

如果字典中**没有**唯一`id`的，那么我会保持简单并定义如下函数：

```
def unique(sequence):
    result = []
    for item in sequence:
        if item not in result:
            result.append(item)
    return result 
```

这种方法的优点是您可以将此函数重用于任何可比较的对象。它使您的代码非常易读，适用于所有现代版本的 Python，保留字典中的顺序，并且与其替代品相比也很快。

```
>>> L = [
... {'id': 1, 'name': 'john', 'age': 34},
... {'id': 1, 'name': 'john', 'age': 34},
... {'id': 2, 'name': 'hanna', 'age': 30},
... ] 
>>> unique(L)
[{'id': 1, 'name': 'john', 'age': 34}, {'id': 2, 'name': 'hanna', 'age': 30}] 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-09-17T23:58:20.400

一个快速而肮脏的解决方案就是生成一个新列表。

```
sortedlist = []

for item in listwhichneedssorting:
    if item not in sortedlist:
        sortedlist.append(item) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-09-27T08:08:21.353

让我添加我的。

1.  排序目标字典，以便 {'a' : 1, 'b': 2} 和​​ {'b': 2, 'a': 1} 不会被区别对待

2.  把它做成json

3.  通过 set 去重（因为 set 不适用于 dicts）

4.  再次，通过 json.loads 把它变成 dict

```
import json

[json.loads(i) for i in set([json.dumps(i) for i in [dict(sorted(i.items())) for i in target_dict]])] 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2012-06-18T23:48:36.807

非常简单的选项：

```
L = [
    {'id':1,'name':'john', 'age':34},
    {'id':1,'name':'john', 'age':34},
    {'id':2,'name':'hanna', 'age':30},
    ]

D = dict()
for l in L: D[l['id']] = l
output = list(D.values())
print output 
```

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2012-06-18T23:52:35.937

这是一个内存开销很小的实现，但代价是不像其他实现那样紧凑。

```
values = [ {'id':2,'name':'hanna', 'age':30},
           {'id':1,'name':'john', 'age':34},
           {'id':1,'name':'john', 'age':34},
           {'id':2,'name':'hanna', 'age':30},
           {'id':1,'name':'john', 'age':34},]
count = {}
index = 0
while index < len(values):
    if values[index]['id'] in count:
        del values[index]
    else:
        count[values[index]['id']] = 1
        index += 1 
```

输出：

```
[{'age': 30, 'id': 2, 'name': 'hanna'}, {'age': 34, 'id': 1, 'name': 'john'}] 
```

* * *

## 回答 #22

> 赞同：-4
> 
> 时间：2012-06-18T23:43:02.130

这是我找到的解决方案：

```
usedID = []

x = [
{'id':1,'name':'john', 'age':34},
{'id':1,'name':'john', 'age':34},
{'id':2,'name':'hanna', 'age':30},
]

for each in x:
    if each['id'] in usedID:
        x.remove(each)
    else:
        usedID.append(each['id'])

print x 
```

基本上，您检查列表中是否存在 ID，如果存在，则删除字典，如果不存在，则将 ID 附加到列表中

# jsf - JSF 数据表：添加和删除行清除行值

> ID：11092513
> 
> 赞同：5
> 
> 时间：2012-06-18T23:31:15.033
> 
> 标签：jsf, datatable, add, immediate-attribute

我有 ah:datatable 显示行列表，每行的字段都是输入字段。

我在表格前渲染了一个“添加行”按钮，并在表格的每一行上渲染了一个“删除行”按钮。

烘焙 bean 是 viewScoped，按钮从 backing bean 中的 java 列表中添加/删除元素，然后返回相同的视图。

我在按钮中将立即属性设置为“true”，以便在添加或删除行时不验证输入字段。

一切正常，但有一件事：输入文件的值被清除。我认为视图保留了值，因为 bean 是 viewScoped。

如何在不触发验证并保留用户已在表单中键入的值的情况下实现添加/删除行？

我的观点：

```
<h:form>
    <h:commandButton value="Añadir Fila" immediate="true" action="#{tablaController.addRowAction}" />
    <h:dataTable value="#{tablaController.lista}" var="fila" cellpadding="0" cellspacing="0" border="1">
        <f:facet name="header">TABLA</f:facet>
        <h:column>
             <f:facet name="header"><h:outputLabel value="NOMBRE" /></f:facet>
             <h:inputText id="nom" value="#{fila.nombre}" />
             <h:message for="nom" class="msjError" />
        </h:column>
        <h:column>
            <f:facet name="header"></f:facet>
            <h:commandButton value="Quitar Fila" immediate="true" action="#{tablaController.removeRowAction(fila)}" />
        </h:column>
    </h:dataTable>
</h:form> 
```

我的支持豆：

```
@ManagedBean(name="tablaController")
@ViewScoped
public class TablaController {

private List<Fila> lista;
...
public TablaController() { }
...
@PostConstruct
public void init() {
    this.lista = new ArrayList<Fila>();
    for (int i=0; i<5; i++) {
        Fila fila = new Fila();
        fila.setNombre("");
        this.lista.add(i,fila);
    }
}
...
public String addRowAction () {
    Fila fila = new Fila();
    fila.setNombre("");
    this.lista.add(fila);
    return "";
}

public String removeRowAction (Fila f) {
    boolean exito = this.lista.remove(f);
    return "";
}
...
} 
```

**更新->我的解决方案：**

如果有人感兴趣，我会在这里写下我的解决方案。

问题是我使用 immediate="true" 跳过验证，但这也会跳过 update_model_values，这样用户在表单中输入的值在单击添加/删除按钮并重新重新渲染页面后会丢失.

当我使用“JSR-303 bean 验证”时，我的解决方案是使用 f:validateBean 跳过验证来启用/禁用它们。根据我单击的按钮，如果我想要执行验证，我启用 bean 验证（例如在“提交”按钮中），如果我想跳过它们，我禁用 bean 验证（如在添加/删除行按钮）。但无论如何 update_model_values 总是执行，所以值不会丢失。

这是视图：

```
<h:form>
    <f:validateBean disabled="#{!empty param['disableValidation']}">
        <h:commandButton value="Añadir Fila" action="#{tablaController.addRowAction}">
            <f:param name="disableValidation" value="true" />
        </h:commandButton>
        <h:dataTable value="#{tablaController.lista}" var="fila" cellpadding="0" cellspacing="0" border="1">
            <f:facet name="header">TABLA</f:facet>
            <h:column>
                <f:facet name="header"><h:outputLabel value="NOMBRE" /></f:facet>
                <h:inputText id="nom" value="#{fila.nombre}" />
                <h:message for="nom" class="msjError" />
            </h:column>
            <h:column>
                <f:facet name="header"></f:facet>
                <h:commandButton value="Quitar Fila" action="#{tablaController.removeRowAction(fila)}">
                    <f:param name="disableValidation" value="true" />
               </h:commandButton>
            </h:column>
        </h:dataTable>
        <h:commandButton value="Submit" action="#{tablaController.saveData}" />
    </f:validateBean>
</h:form> 
```

支持bean：

```
@ManagedBean(name="tablaController")
@ViewScoped
public class TablaController {

private List<Fila> lista;
...
public TablaController() { }
...
@PostConstruct
public void init() {
    this.lista = new ArrayList<Fila>();
    for (int i=0; i<5; i++) {
        Fila fila = new Fila();
        fila.setNombre("fila "+i);
        this.lista.add(i,fila);
    }
}
...
public String addRowAction () {
    Fila fila = new Fila();
    fila.setNombre("");
    this.lista.add(fila);
    return "";
}

public String removeRowAction (Fila f) {
    this.lista.remove(f);
    return "";
}
...
public String saveData () {
    ...
    //processes the valid data
    //for example, calls to a service method to store them in a database
    ...
    return "";
}
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T15:46:58.500

> *我在按钮中将即时属性设置为“true”，以便在添加或删除行时不验证输入字段。*

`immediate="true"`是工作的错误工具。它应该用于**优先**验证验证，而不是**启用/禁用**验证。当您遇到自己时，差异是相当大的。

您想有条件地触发验证。在这种情况下，`required="true"`这就像

```
<h:inputText ... required="#{saveButtonPressed}" /> 
```

where在按下保存按钮时`#{saveButtonPressed}`进行评估。`true`例如，当它的客户端 ID 出现在请求参数映射中时。

在 JSR 303 bean 验证的情况下，这将是一个问题

```
<f:validateBean disabled="#{not saveButtonPressed}">
    <h:inputText ... />
</f:validateBean> 
```

或者使用[OmniFaces`<o:validateBean>`](http://showcase.omnifaces.org/validators/validateBean)，它允许在每个命令的基础上进行控制。

```
<h:commandButton id="add" ...>
    <o:validateBean disabled="true" />
</h:commandButton> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T04:23:31.390

我有完全相同的问题。简而言之，您不能将立即用于更新数据表（UIData）或 facelet 重复的操作。简短说明：如果 UIData 中的输入未通过验证，则不会保留提交的值以供重新显示。长解释可以在这里找到：[长解释](http://blog.flexdms.com/2013/07/immediate-action-for-data-under-uidata.html)和[Mojarra 中的相关错误](http://java.net/jira/browse/JAVASERVERFACES-2490)

# xml - 使用分层 xml 在 SSRS 中创建分组 tablix

> ID：11092514
> 
> 赞同：2
> 
> 时间：2012-06-18T23:31:19.703
> 
> 标签：xml, reporting-services

我担心这可能是不可能的，但我正在尝试使用分层 xml 在 SSRS（报表生成器 3）中创建一个分组的 tablix。

例如，当提供以下 xml 作为参数时：

```
<people>
 <person>
  <name>person1</name>
  <colours>
   <colour>purple</colour>
   <colour>orange</colour>
  </colours>
 </person>
 <person>
  <name>person2</name>
  <colours>
   <colour>blue</colour>
   <colour>red</colour>
  </colours>
 </person>
</people> 
```

我想要一些方法来获得这样的输出格式：

```
person1 purple
person1 orange
person2 blue
person2 red 
```

特定的输出格式并不重要，但目前我找不到在 XML 层次结构的不同级别关联数据的方法。我可以创建一个列出人员的表格和一个列出颜色的表格，但我无法将颜色与人员联系起来。（数据完全是人为的）

我觉得我从 1000 个不同的角度来看待这个问题——这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:55:05.853

（现在我可以了，我想我会发布我的解决方案作为我自己问题的答案。）

好吧，有趣的是，您可以花一天时间看某件事，然后在发布它的那一刻，您就明白了。在这里发布我的答案以防万一。

在数据集中，查询的元素路径应该是：

```
<ElementPath>people{}/person/colours{}/colour</ElementPath> 
```

然后在与“名称”相同的数据集中使用名为“颜色”的字段将按父元素正确分组。出于某种原因，我认为报表生成器中的数据集仅在层次结构的单个级别上有效。我错了。

# javascript - 从 JavaScript 应用程序到 Rails 服务器的数据传输

> ID：11092520
> 
> 赞同：0
> 
> 时间：2012-06-18T23:32:29.777
> 
> 标签：javascript, ruby-on-rails, ajax

我有一个生成字符串的 JavaScript 应用程序。我想将此字符串传输回我的服务器并将其分配给特定属性。显然 AJAX 可以做到这一点。不幸的是，我是 Rails 和 AJAX 的新手，我找不到任何关于如何实现传输的明确说明。是否有一种简单、标准的方法可以将字符串发送到 Rails 服务器并将其分配给模型属性？

目前，代码直接插入到我的 JavaScript 函数中。它看起来像这样：

```
$.ajax({
  type: 'POST',
  url: '/bookcases/'+window.location.href.split('/')[4],
  data: {'_method':'put', 'bookcase[imagemap]':mapcode},
  dataType: 'html',
  success: function() {alert( "Data Saved" );}
}); 
```

Firebug 给了我一个 404 Not Found 错误。我对 URL 进行了一些修改，将“编辑”替换为可能的候选对象，例如属性名称和 POST。我还一起删除了“编辑”。到目前为止，我一直得到同样的错误。唯一的例外是当我将 URL 设置为“/”时，会弹出成功消息。不幸的是，地图代码数据实际上并没有被植入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:50:28.103

知道了！显然，上面的代码工作得很好。我只需要向我的控制器添加一个更新方法。对于那些解决类似问题的人来说，Firefox 的 Firebug 是无价的。如果您在 JavaScript 中遇到错误，Firebug 会告诉您原因是什么。没有它，我无法弄清楚这一点。

# asp.net-mvc-3 - 当值来自 ViewBag 时，为什么字符串上的 switch 语句会失败？

> ID：11092522
> 
> 赞同：7
> 
> 时间：2012-06-18T23:32:52.843
> 
> 标签：asp.net-mvc-3, dynamic, razor

我在 CSHTML 剃须刀页面中有以下代码：

```
@{
    var sort = ViewBag.Sort.ToString();
    switch (sort)
    {
        case "None": Html.Action("SortNone"); break;
        case "Name": Html.Action("SortName"); break;
        case "Date": Html.Action("SortDate"); break;
    }
} 
```

但是，这会失败并显示编译器错误消息：

```
CS0151: A switch expression or case label must be a bool, char, string, integral, enum, or corresponding nullable type 
```

但是 sort 是一个字符串！将其重写为一系列 if/else 语句是可行的，但并不那么优雅。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T23:36:55.150

尝试强制转换，编译器不知道 ToString() 的返回类型，因为它是动态的。

```
var sort = (string)ViewBag.Sort.ToString(); 
```

# netbeans - 我如何从版本号知道一个版本是最稳定的版本？

> ID：11092524
> 
> 赞同：3
> 
> 时间：2012-06-18T23:33:18.337
> 
> 标签：netbeans, version-control, project-management, project

例如，netbeans 有 6.9.1 之类的版本；7.0.0；7.1.1 等。层次结构中的第二个数字是否意味着改进，第一个数字更多地是关于引入新功能，这使得它更容易出现错误。那么如何解释这些版本号，尤其是如果我愿意获得最稳定的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:43:16.497

在一般情况下，版本号没有固定的语义。一个常见的约定是使用“主要”版本号表示主要更改，使用“次要”版本号表示小的更改，但这并不是一成不变的。最近[发布的 Linux 3.0](http://www.engadget.com/2011/05/30/linus-torvalds-releases-linux-kernel-version-3-to-celebrate-20-y/)就是一个很好的例子——主要版本号的增加纯粹是为了 PR 值；该版本并不比 2.xx 系列中的早期版本更重要。

一些项目有稳定/不稳定的约定；奇数次要版本号是开发版本，偶数次要版本号是发布版本。Linux 项目使用这种约定，Gnome 和其他各种开源项目也是如此。

TeX 有自己的有趣的版本编号约定；它从 3.14 到 3.141，到 3.1415，到 3.14159 等。（提示：pi。）

另见[http://en.wikipedia.org/wiki/Software_versioning](http://en.wikipedia.org/wiki/Software_versioning)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:41:14.787

每个产品都必须描述自己的版本号政策。

例如，Netbeans 在其[指南中提到它](http://netbeans.org/community/guidelines/process.html)

通常：

*   第三个数字表示：“仅修复错误，没有 API 演变”，您可以在检查[7.1.1](http://bits.netbeans.org/7.1.1/javadoc/apichanges.html)或[7.1.2的 API 更改时看到它](http://bits.netbeans.org/7.1.2/javadoc/apichanges.html)
*   第二个数字表示“API 更改，但仍向后兼容”：参见[7.1 版本](http://bits.netbeans.org/7.1/javadoc/apichanges.html)
*   第一个数字是“API 更改，可能与以前的版本不兼容”：[参见 7.0 版本](http://bits.netbeans.org/7.0/javadoc/apichanges.html)。
    您可以完全删除已弃用的 API，修改现有的 API，...
    涉及迁移指南。

那里存在许多其他版本控制策略。
看：

*   "[代码版本变更“规则”</a>")](https://stackoverflow.com/questions/3377655/code-version-change-rules/3377717#3377717)
[](https://stackoverflow.com/questions/3377655/code-version-change-rules/3377717#3377717)
*   [“](https://stackoverflow.com/questions/3377655/code-version-change-rules/3377717#3377717)[你推荐什么版本编号方案？](https://stackoverflow.com/questions/121795/what-version-numbering-scheme-do-you-recommend) ”

有关此类政策的官方文档位于**[semver.org：语义版本控制](http://semver.org/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:06:35.487

为什么不使用[标签](http://version-control.net/version-control-howto/2-6-label-command/)功能？您可以在此特定版本中添加评论，以便您将来轻松查找和获取。

# android - 使用不同的光标填充微调器

> ID：11092529
> 
> 赞同：1
> 
> 时间：2012-06-18T23:33:55.730
> 
> 标签：android, database, cursor, spinner, simplecursoradapter

我有一个微调器，我用数据库 sqlite 列中的游标填充，这工作正常，但并不理想。我添加了另一个微调器来选择一列并将其显示在微调器中，但这是我构建适配器时的问题。这是我的代码：

```
 cursor = myDB.obtenerColumna(getBaseContext(),elemento);   
    String[] columns = new String[] { "_id", "columna", "columnb", "columnc", "columnd" };
    menudesplegable.setPrompt(getText(R.string.seleccionaEtiqueta)); 

   SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item,cursor,
            columns, new int[] {android.R.id.text1});    

    adapter.setDropDownViewResource
            (android.R.layout.simple_spinner_dropdown_item); 
```

我从数据库中正确获取列，但是如果我从其他列传递游标，则应用程序无法构建适配器。我尝试在 String[] 中仅传递名称列，但也失败了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:49:19.287

我解决了这个问题：

```
/**
 * Crea el menú desplegable para seleccionar tiqueta.
 */
public void construirMenuDesplegable(String elemento) {
    // get items of database using selected element in other spinner
    cursor = myDB.obtenerColumna(getBaseContext(), elemento);
    menudesplegable.setPrompt(getText(R.string.seleccionaEtiqueta));

    // Create adapter
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item, cursor,
            new String[] { elemento }, new int[] { android.R.id.text1 });

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // Indicate adapter
    menudesplegable.setAdapter(adapter);

    try {
        myDB.close();
    } catch (Exception e) {
        Log.e("miError", "Error al cerrar db", e);
    }
}

/**
 * Build spinner for select a element for show in other spinner.
 */
public void construirMenuDesplegable2() {
    // Create adapter
    ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
            this, R.array.listables, R.layout.custom_spinner);
    adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Indicate adapter
    menudesplegable2.setAdapter(adapter2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T10:32:03.100

不需要做整个事情。

一旦第一个微调器被填充，只需**关闭****光标**。

`mycursor.close();`

然后对第二个微调器重复相同的逻辑。

# android - 如何使用按钮杀死从 IntentService 创建的 TimerTask

> ID：11092534
> 
> 赞同：2
> 
> 时间：2012-06-18T23:34:24.560
> 
> 标签：android, cloud, intentservice

我正在制作一个使用标准 HTTP get 获取命令的云服务。我使用服务（扩展类 IntentService 而不是服务）来保持同步。我在每 3 秒触发一次的 TimerTask 中进行检查。问题是，当用户返回活动以将其关闭时，如果他们愿意，他们会按下切换按钮。如何告诉 TimerTask（或运行定时器任务的 IntentService）停止和启动它？

服务本身在处理意图并创建任务后会被销毁，那么服务是否比 IntentService 更适合呢？即使是这样，关于停止和启动 TimerTask 的问题仍然存在。

这是意图服务的代码：

```
import java.io.IOException;
import java.util.Timer;
import java.util.TimerTask;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import android.app.*;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Handler;
import android.widget.*;

public class syncservice extends IntentService {

  /** 
   * A constructor is required, and must call the super IntentService(String)
   * constructor with a name for the worker thread.
   */
    public syncservice() {
        super("syncservice");
    }
    public static final String PREFS_NAME = "prefcs";
  /**
   * The IntentService calls this method from the default worker thread with
   * the intent that started the service. When this method returns, IntentService
   * stops the service, as appropriate.
   */
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    final String uid = intent.getExtras().get("uid").toString();
    final String dvname = intent.getExtras().get("dvname").toString();
    final long period = intent.getExtras().getLong("period");
    final Context ctx = getApplicationContext();
    final Toast toast = Toast.makeText(ctx,"An error occured with the service. It will automatically turn off.", 0);
    final Handler handler = new Handler();
    TimerTask timertask = new TimerTask () {
        @Override
        public void run() {
            SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
            if (settings.getBoolean("doservice", false)) {
                String command = netread("url here");
                //TODO Parse command from Pulling
                if (command.contains("<")) {
                    //TODO what to do if an error occurred (exceptions already caught
                    Runnable showerrormessage = new Runnable() {
                        public void run() {
                            toast.makeText(ctx,"new text",0);
                            toast.show();
                        }
                    };
                    handler.post(showerrormessage);
                }
            }
        }
    };
    Timer timer = new Timer();
    timer.schedule(timertask,0,period);
    return super.onStartCommand(intent,flags,startId);
}
public void onDestroy() {
    Toast.makeText(getApplicationContext(), "The Service has died", Toast.LENGTH_SHORT).show();
    return;
}

@Override
protected void onHandleIntent(Intent intent) {
    Toast.makeText(getApplicationContext(), "Intent Handled", 0).show();
}
public final String netread(String url) {
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        ResponseHandler<String> resHandler = new BasicResponseHandler();
        String page = httpClient.execute(httpGet, resHandler);
        return page;
    } catch (ClientProtocolException e) {
        //Toast.makeText(getApplicationContext(),"Client Protocol Exception! Try again.",0).show();
        return "<";
    } catch (IOException e) {
        //Toast.makeText(getApplicationContext(),"IO Exception! Make sure you are connected to the internet and try again.", 0).show();
        return "<";
    }

}
} 
```

非常感谢您帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:40:37.503

对于您要执行的操作，[Handler](http://developer.android.com/resources/articles/timed-ui-updates.html)可能更有用。顺便说一句，该链接还显示了如何从 UI 中阻止它。

# r - 预测精度：没有 MASE 以两个向量作为参数

> ID：11092536
> 
> 赞同：8
> 
> 时间：2012-06-18T23:34:35.110
> 
> 标签：r, forecasting

我正在使用包中的`accuracy`函数`forecast`来计算精度度量。我用它来计算拟合时间序列模型的度量，例如 ARIMA 或指数平滑。当我在不同维度和聚合级别上测试不同的模型类型时，我正在使用由 Hyndman 等人（2006 年，“另一个看预测准确性的衡量标准”）引入的 MASE（平均绝对比例误差）来比较不同的模型在不同的层面上。

现在我还将模型与预测历史进行比较。由于我只有预测值而不是模型，因此我尝试使用该`accuracy`功能。在函数描述中提到，还允许提供两个向量参数，一个带有预测值，一个带有实际值，以计算度量（而不是拟合模型）：

> *f：“预测”类的对象，或包含预测的数值向量。如果 x 被省略，它也适用于 Arima、ets 和 lm 对象——在这种情况下，将返回样本内准确度度量。*
> 
> *x：一个可选的数值向量，包含与对象长度相同的实际值。*

但令我惊讶的是，所有措施都返回了，期待 MASE。所以我想知道是否有人知道这是什么原因？为什么在函数中使用两个向量作为参数时不返回 MASE `accuracy`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T23:25:58.407

MASE 需要历史数据来计算比例因子。它*不是*像@FBE 的答案那样从未来的数据中计算出来的。因此，如果您不将历史数据传递给`accuracy()`，则无法计算 MASE。例如，

```
> library(forecast)
> fcast <- snaive(window(USAccDeaths,end=1977.99))
> accuracy(fcast$mean,USAccDeaths)
         ME        RMSE         MAE         MPE        MAPE        ACF1 
225.1666667 341.1639391 259.5000000   2.4692164   2.8505546   0.3086626 
  Theil's U 
  0.4474491 
```

但是如果你传递整个`fcast`对象（包括历史数据），你会得到

```
> accuracy(fcast,USAccDeaths)
         ME        RMSE         MAE         MPE        MAPE        MASE 
225.1666667 341.1639391 259.5000000   2.4692164   2.8505546   0.5387310 
       ACF1   Theil's U 
  0.3086626   0.4474491 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-29T14:21:41.217

关于 MASE 的论文清楚地解释了如何找到它（即使对于非时间序列数据）

```
computeMASE <- function(forecast,train,test,period){

  # forecast - forecasted values
  # train - data used for forecasting .. used to find scaling factor
  # test - actual data used for finding MASE.. same length as forecast
  # period - in case of seasonal data.. if not, use 1

  forecast <- as.vector(forecast)
  train <- as.vector(train)
  test <- as.vector(test)

  n <- length(train)
  scalingFactor <- sum(abs(train[(period+1):n] - train[1:(n-period)])) / (n-period)

  et <- abs(test-forecast)
  qt <- et/scalingFactor
  meanMASE <- mean(qt)
  return(meanMASE)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:34:35.533

为了帮助自己一点，我创建了一个函数来计算 MASE，正如 Hyndman 等人在“Another look at measure of predict accuracy”（2006）中所描述的那样。

```
calculateMASE <- function(f,y) { # f = vector with forecasts, y = vector with actuals
    if(length(f)!=length(y)){ stop("Vector length is not equal") }
    n <- length(f)
    return(mean(abs((y - f) / ((1/(n-1)) * sum(abs(y[2:n]-y[1:n-1]))))))
} 
```

供参考，请参阅：

*   [http://robjhyndman.com/papers/foresight.pdf](http://robjhyndman.com/papers/foresight.pdf)
*   [http://en.wikipedia.org/wiki/Mean_absolute_scaled_error](http://en.wikipedia.org/wiki/Mean_absolute_scaled_error)

# mysql - 检查表 MySQL 中是否存在值

> ID：11092545
> 
> 赞同：2
> 
> 时间：2012-06-18T23:35:51.577
> 
> 标签：mysql, sql

有没有办法检查表的列中是否存在多个值，即使这些值并不都在同一行中？

我有这个查询：

```
select (select country from storage where country = 'Germany' limit 1) as country,
       (select city from storage where city = 'New York City' limit 1) as city,
       (select pet from storage where pet = 'Dog' limit 1) as pet,
       (select profession from storage where profession='owehs9843' limit 1) as profession 
```

这个查询做我想要的。如果该值存在于列中，则返回搜索到的值，否则返回 null。

一种解决方案是执行 if 语句并在找到时返回 1，否则返回 0。

但是，我不确定这是检查每列而不是每行值的正确方法。我希望该值存在于某列中，但每列的键值行不需要关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:48:05.377

刚刚在 MySql WorkBench（来自 Windows）上进行了测试，以下查询运行良好，当找到值时返回 1，如果没有，则返回 cero（对于每一列）。

```
select if(sum(country = 'Germany') = 0, 0, 1) as country,
       if(sum(city = 'New York City') = 0, 0, 1) as city,
       if(sum(pet = 'Dog') = 0, 0, 1) as pet,
       if(sum(profession = 'owehs9843') = 0, 0, 1) as profession
from storage; 
```

# java - Popup JDialog 是否有任何默认的 java 类？

> ID：11092549
> 
> 赞同：2
> 
> 时间：2012-06-18T23:36:28.853
> 
> 标签：java, swing, popupwindow, jdialog

我一直在使用此代码来实现某种功能`Popup` `JDialog`，例如当您的防病毒软件扫描您的系统或更新自身时所看到的：

```
import java.awt.*;
import javax.swing.JDialog;
import javax.swing.JLabel;

public class PopupDialog extends JDialog {

    public PopupDialog() throws HeadlessException {
        createUI();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                PopupDialog popupDialog = new PopupDialog();
                popupDialog.setVisible(true);
            }
        });
    }

    private void createUI() {
        setTitle("Popup Dialog");
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);

        addComponentsToFrame();

        //This call will give screens viable area, which takes into account the taskbar, which could be at the bottom, top,left or right of the screen.
        Rectangle maxBounds = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds();

        //get screen size
        int sWidth = maxBounds.width, sHeight = maxBounds.height;

        setSize(275, 225);//set frame size
        Dimension appDim = getSize();
        //get app size
        int aWidth = appDim.width, aHeight = appDim.height;

        //set location like a tooltip would be except its a custom dialog like an AV
        setLocation(sWidth - aWidth, (sHeight - aHeight));
    }

    private void addComponentsToFrame() {
        JLabel label = new JLabel("Popup Dialog");
        getContentPane().add(label, BorderLayout.CENTER);
    }
} 
```

但我的问题是：java中是否有任何类或包可以为我做到这一点？如果不是，我将如何允许 JDialog`slide`从任务栏（或屏幕外）启动？或者以某种方式以缓慢的方式变得可见，就像`ToolTip`系统托盘中的弹出窗口一样。谢谢。

编辑我想使用 JDialog 或 Frame 的原因是因为我希望能够完全皮肤弹出窗口，使用`setUndecorated(true);`和添加自定义退出图标、背景等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:41:16.023

你的意思是像这里的例子：http: [//docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T03:09:52.110

首先，您可以让您的框架始终位于顶部，这将确保它始终可见。接下来，您可以将框架置于屏幕底部并以编程方式将其向上滑动。即使在较旧的 XP 机器上，这也应该相当顺利。没有标准的 Java API 可以做到这一点，但您可以自己轻松完成。另一个替代滑动的选项是使窗口完全透明并淡入。这个 API 是在最近（过去 2 年）Java 6 更新中添加的，所以它应该在任何地方都可用。

# sql-server-2005 - 间歇性sqlexception timeout expired错误

> ID：11092554
> 
> 赞同：2
> 
> 时间：2012-06-18T23:37:04.220
> 
> 标签：sql-server-2005, timeout, iis-6, sqlexception

我们有一个拥有大约 200-400 名用户的应用程序，每天或每隔一天我们会遇到可怕的 sql 异常：

“超时已过期。在操作完成之前超时时间已过或服务器没有响应”。

一旦我们得到这个，它就会为不同的用户发生几次，然后所有用户都被卡住了。他们不能执行任何操作。

我面前没有盒子的完整规格，但我们有：

*   IIS 和 SQL Server 在不同的机器上运行
*   每个盒子都有 64gb 多核内存

我们在 SQL 服务器日志中一无所获（正如预期的那样），并且我们的应用程序捕获了 sqlexception，因此我们只看到那里的超时错误 - 在 UPDATE 上。在数据库中，我们只有几个关键表。超时发生在有 30k 行的表之一上。我们已经对这些查询运行分析器，针对生产副本访问 UI 以获取大小，并确保我们拥有所有正确的索引（集群/非集群）。在本地环境（较小的盒子，相同大小的数据库）中，一切都运行得很快，对于用户来说，系统在一天中的大部分时间都运行得很快。完全相同的查询（在生产中出现超时错误）在不到一秒的时间内运行。

我们确实将命令超时从 30 秒更改为 300 秒（我知道 0 是无限的，我想我们应该使用它，但这似乎只是掩盖了真正的问题）。

我们在生产环境中运行了探查器，但不幸的是，它在上次发生时并没有完全启用。我们现在正在正确设置它。

关于这可能是什么的任何想法？

# iphone - 是否可以禁用谷歌地图请求用户位置？

> ID：11092555
> 
> 赞同：1
> 
> 时间：2012-06-18T23:37:12.140
> 
> 标签：iphone, ios, xcode, google-maps, location

我猜不是，但我正在创建一个应用程序，它使用 CLLocationManager 获取用户坐标，然后将坐标传递到谷歌地图以显示方向。当网页打开显示时，它会请求用户位置，如果用户说是，它会以某种方式影响我代码中的一些变量。我很好奇谷歌地图的提示是否可以被禁用，或者谷歌地图的坐标是否可以被我的应用程序在某处检索。我很确定两者都不可能，只是把它扔在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:53:49.447

简短的回答。不。

谷歌地图应用程序中的位置获取是通过 JavaScript api 完成的，更多细节[在这里](https://stackoverflow.com/questions/1057617/find-current-location-by-using-html-in-iphone)

如果您可以禁用 javascript，则地图路由本身可能无法正常工作，所以不。

关于检索变量的部分，我认为您可以检查 webview shouldStartLoadWithRequest 并检查 url，也许有一些您可以获取的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-28T13:35:09.880

如果其他人需要它，这是一个答案

```
let mapView = GMSMapView()
mapView.isMyLocationEnabled = false 
```

# backbone.js - Marionette.Layouts 可以在子区域之外有动态内容吗？

> ID：11092567
> 
> 赞同：2
> 
> 时间：2012-06-18T23:38:42.910
> 
> 标签：backbone.js, marionette

我正在为包含多个嵌套资源的资源开发单页视图。使用以下模板，我可以获得要呈现的顶级属性或集合，但不能同时呈现：

```
h1= @name
ul
  #decisions

class Happenator.Views.ShowHappening extends Backbone.Marionette.Layout
  template: "happenings/show"
  regions:
    decisions: "#decisions"

  initialize: ->
    @decisionsView = new Happenator.Views.Decisions(collection: @model.get("decisions"))
    # Uncomment to render @model.name, but lose the decisions
    # @bindTo(@model, "change", @render)

  onRender: ->
    @decisions.show(@decisionsView) 
```

是否有一种可接受的方式来绑定顶级布局以在数据更改/到达时重新渲染，或者是否所有动态内容都支持进入子区域？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T01:41:48.903

布局呈现区域将管理的 DOM 元素。因此，再次调用`render`布局将强制重新渲染该区域的元素。这些地区将看到这一点并再次选择它们，但这将对您的应用程序产生各种其他负面影响，正如您所指出的。

处理此问题的简单方法是：

a) 有单独的更改：属性事件处理程序只更新已更改的数据

b）使用数据绑定解决方案为您执行此操作，例如[https://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)

第三种选择是在您的布局中创建第二个区域，并使用模型填充该区域的 ItemView。然后，您可以在模型更改时重新渲染该视图：

```
 h1= @name
ul
  #decisions

class Happenator.Views.HeaderView extends Backbone.Marionette.ItemView
  template: "happenings/model-template"
  initialize: ->
    @bindTo(@model, "change", @render)

class Happenator.Views.ShowHappening extends Backbone.Marionette.Layout
  template: "happenings/show"
  regions:
    header: "#header",
    decisions: "#decisions"

  initialize: ->
    @decisionsView = new Happenator.Views.Decisions(collection: @model.get("decisions"))
    @headerView = new Happenator.Views.HeaderView(model: @model)

  onRender: ->
    @decisions.show(@decisionsView)
    @header.show(@headerView) 
```

如果是我，我会使用选项 #3 并在布局内嵌套另一个 itemview，用于模型渲染。这将为您在该视图中提供更多的自由和灵活性，使其与布局分开。

# java - 编译后从字节码中删除注释

> ID：11092573
> 
> 赞同：10
> 
> 时间：2012-06-18T23:40:06.423
> 
> 标签：java, android, annotations, javassist, bcel

我们正在使用一个包含带有 JAXB 注释的 bean 的库。我们使用这些类的方式不依赖于 JAXB。换句话说，我们不需要 JAXB，也不依赖注解。

但是，由于注释存在，它们最终会被处理注释的其他类引用。这需要我在我们的应用程序中捆绑 JAXB，这是不允许的，因为 JAXB 在`javax.*`包中（Android 不允许在您的应用程序中包含“核心库”）。

因此，考虑到这一点，我正在寻找一种从编译的字节码中删除注释的方法。我知道有用于操作字节码的实用程序，但这对我来说很新。我该如何开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T03:02:42.200

我推荐 BCEL 6。你也可以使用 ASM，但我听说 BCEL 更容易使用。这是使字段最终确定的快速测试方法：

```
public static void main(String[] args) throws Exception {
    System.out.println(F.class.getField("a").getModifiers());
    JavaClass aClass = Repository.lookupClass(F.class);
    ClassGen aGen = new ClassGen(aClass);
    for (Field field : aGen.getFields()) {
        if (field.getName().equals("a")) {
            int mods = field.getModifiers();
            field.setModifiers(mods | Modifier.FINAL);
        }
    }
    final byte[] classBytes = aGen.getJavaClass().getBytes();
    ClassLoader cl = new ClassLoader(null) {
        @Override
        protected synchronized Class<?> findClass(String name) throws ClassNotFoundException {
            return defineClass("F", classBytes, 0, classBytes.length);
        }
    };
    Class<?> fWithoutDeprecated = cl.loadClass("F");
    System.out.println(fWithoutDeprecated.getField("a").getModifiers());
} 
```

当然，您实际上会将您的类作为文件写入磁盘，然后将它们打包，但这更容易尝试。我手边没有 BCEL 6，所以我无法修改此示例以删除注释，但我想代码将类似于：

```
public static void main(String[] args) throws Exception {
    ...
    ClassGen aGen = new ClassGen(aClass);
    aGen.setAttributes(cleanupAttributes(aGen.getAttributes()));
    aGen.getFields();
    for (Field field : aGen.getFields()) {
        field.setAttributes(cleanupAttributes(field.getAttributes()));
    }
    for (Method method : aGen.getMethods()) {
        method.setAttributes(cleanupAttributes(method.getAttributes()));
    }
    ...
}

private Attribute[] cleanupAttributes(Attribute[] attributes) {
    for (Attribute attribute : attributes) {
        if (attribute instanceof Annotations) {
            Annotations annotations = (Annotations) attribute;
            if (annotations.isRuntimeVisible()) {
                AnnotationEntry[] entries = annotations.getAnnotationEntries();
                List<AnnotationEntry> newEntries = new ArrayList<AnnotationEntry>();
                for (AnnotationEntry entry : entries) {
                    if (!entry.getAnnotationType().startsWith("javax")) {
                        newEntries.add(entry);
                    }
                }
                annotations.setAnnotationTable(newEntries);
            }
        }
    }
    return attributes;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-16T09:23:34.537

我使用[ByteBuddy](http://bytebuddy.net/#/)库来删除注释。不幸的是，我无法使用高级 api 删除注释，所以我使用了 ASM api。这是示例，如何从类的字段中删除 @Deprecated 注释：

```
import net.bytebuddy.ByteBuddy;
import net.bytebuddy.asm.AsmVisitorWrapper;
import net.bytebuddy.description.field.FieldDescription;
import net.bytebuddy.description.type.TypeDescription;
import net.bytebuddy.jar.asm.AnnotationVisitor;
import net.bytebuddy.jar.asm.FieldVisitor;
import net.bytebuddy.jar.asm.Opcodes;
import net.bytebuddy.jar.asm.Type;
import net.bytebuddy.matcher.ElementMatchers;

import java.lang.annotation.Annotation;
import java.util.Arrays;

public class Test {

    public static class Foo {
        @Deprecated
        public Integer bar;
    }

    public static void main(String[] args) throws Exception {
        System.out.println("Annotations before processing " + getAnnotationsString(Foo.class));
        Class<? extends Foo> modifiedClass = new ByteBuddy()
                .redefine(Foo.class)
                .visit(new AsmVisitorWrapper.ForDeclaredFields()
                        .field(ElementMatchers.isAnnotatedWith(Deprecated.class),
                                new AsmVisitorWrapper.ForDeclaredFields.FieldVisitorWrapper() {
                                    @Override
                                    public FieldVisitor wrap(TypeDescription instrumentedType,
                                                             FieldDescription.InDefinedShape fieldDescription,
                                                             FieldVisitor fieldVisitor) {
                                        return new FieldVisitor(Opcodes.ASM5, fieldVisitor) {
                                            @Override
                                            public AnnotationVisitor visitAnnotation(String desc, boolean visible) {
                                                if (Type.getDescriptor(Deprecated.class).equals(desc)) {
                                                    return null;
                                                }
                                                return super.visitAnnotation(desc, visible);
                                            }
                                        };
                                    }
                                }))
                // can't use the same name, because Test$Foo is already loaded
                .name("Test$Foo1")
                .make()
                .load(Test.class.getClassLoader())
                .getLoaded();
        System.out.println("Annotations after processing " + getAnnotationsString(modifiedClass));
    }

    private static String getAnnotationsString(Class<? extends  Foo> clazz) throws NoSuchFieldException {
        Annotation[] annotations = clazz.getDeclaredField("bar").getDeclaredAnnotations();
        return Arrays.toString(annotations);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T04:19:58.313

除了混淆您的代码之外，ProGuard 也会这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T14:56:02.250

还有一个 AntTask [Purge Annotation References Ant Task](http://sourceforge.net/projects/purgeannorefs/)，它

> 从 java 字节码/类文件中清除对注释的引用（从带注释的元素中删除 @Anno 标记）。现在您可以在编译后使用注释检查字节码中的星座，但在释放 jar 之前删除使用的 annos。

# sql - 带有可选参数和可能的空列的 SQL 查询

> ID：11092576
> 
> 赞同：2
> 
> 时间：2012-06-18T23:40:31.363
> 
> 标签：sql, tsql, sql-server-2005

在包含空值的列上将可选的 sql 参数留空时，我很难返回我期望的所有结果。

假设您有一个包含以下内容的表（referredby 是可选的，因此可以为 NULL）：

```
Customertable
ID    CustomerName  ReferredBy
1      Aaron         Joe
2      Peter         NULL
3      Steven        Joe 
```

假设我想用一个可选的 SQL 参数查询被引用的字段，如下所示：

```
declare @referredby as varchar(15)

select id, customername
from customertable<br>
where referredby = isnull(@referredby, referredby) 
```

如果我将参数保留为空，则只会返回：
1 Aaron
3 Steven

如何使用可选参数返回所有 3 个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T23:43:11.903

试试这个：

```
select id, customername
from customertable
where (referredby = @referredby OR @referredby is null) 
```

由于[这篇文章中解释的](https://stackoverflow.com/questions/1843451/why-does-null-null-evaluate-to-false-in-sql-server)原因，在 sql server中进行比较`null = null`会返回 false（或未知）。一样`null != null`。

如果您真的喜欢您的语法，我相信您可以通过将 ansi_Nulls 设置为关闭来使其工作：`set ansi_nulls off`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:44:15.200

在您的查询中添加这一行：

```
SELECT ... FROM ... --other codes here
where (referredby = @referredby) OR (@referredby IS NULL) 
```

# firebase - Firebase 中是否有（或是否考虑过）“合并”或“批处理”设置？

> ID：11092577
> 
> 赞同：5
> 
> 时间：2012-06-18T23:40:34.293
> 
> 标签：firebase

今天在使用 Firebase 进行更多编程时，我发现自己希望有几个功能：

1）**合并**集：

假设我有一个`ref`具有价值的火力基地`{a:1,b:2,c:3}`。

如果我做类似`ref.set({a:-1,b:-2})`新价值的事情（不出所料）是`{a:-1,b:-2}`.

相反，想象一下`ref.mergeSet({a:-1,b:-2})`哪个会导致 ref 的值为 `{a:-1,b:-2,c:3}`。

现在，我意识到我可以做一些类似`ref.child("a").set(-1)`的事情`ref.child("b").set(-2)`来实现这个结果，但至少在某些情况下，我宁愿只对我的`.on()`处理程序进行一次调用。

这涉及到我的第二个想法。

2)**批量**集：

在我的应用程序中，我想要一种强制任意数量的调用`.set`只导致`.on`其他客户端调用的方法。就像是：

```
ref.startBatch()
ref.child("a").set(1)
ref.child("b").set(2)
....
ref.endBatch() 
```

在批处理模式下，`.set`不会导致调用`.on`，相反，调用的最少次数`.on`将全部来自调用`.endBatch`。

* * *

我欣然承认这些想法还很新生，如果它们与 Firebase 的现有架构特性发生冲突，我不会感到惊讶，但我想我还是会分享它们。我发现在使用 Firebase 时，我不得不花费更多时间来确保客户端之间的一致性，这超出了我的预期。

再次感谢，并继续出色的工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T00:35:20.373

**更新：**我们为 Firebase Web 客户端添加了一个新的[update](https://www.firebase.com/docs/javascript/firebase/update.html) () 方法，并为[REST API](https://www.firebase.com/docs/rest-api.html)添加了 PATCH 支持，它允许您在特定位置以原子方式修改多个同级，而其他同级保持不变。这就是您所说的“mergeSet”，可以按如下方式使用：

```
ref.update({a: -1, b: -2}); 
```

这将更新“a”和“b”，但不修改“c”。

* * *

**旧答案**

感谢您提供详细的功能请求！我们很乐意听到更多关于您的用例以及这些原语将如何帮助您的信息。如果您愿意分享更多详细信息，请发送电子邮件至 support@firebase.com，我们可以深入了解您的情况。

不过，要回答您的问题，我们没有这些功能的主要原因与我们的架构和我们试图维护的性能/一致性保证有关。不要太深入，但是如果您想象您的 Firebase 数据分布在许多服务器上，那么在修改树中靠近的数据时，我们更容易获得更强的保证（原子性、排序等），而不是修改距离较远的数据离开。因此，通过将这些保证限制为您可以用单个 set() 调用替换的数据，我们将您推向一个可以在 Firebase 架构中表现良好的方向。

在某些情况下，您可以通过重新组织树来大致获得所需的内容。例如，如果您知道您总是想将 'a' 和 'b' 设置在一起，则可以将它们放在一个共同的 'ab' 父级和 do 下`ref.child('ab').set({a:-1, b:-2});`，这不会影响 'c' 子级。

就像我说的，我们很想听到更多关于你的场景的信息。我们处于测试阶段，以便我们可以向开发人员了解他们如何使用 API 以及它的不足之处！支持@firebase.com :-)

# mysql - 一个搜索词，用于两个不同的表

> ID：11092579
> 
> 赞同：0
> 
> 时间：2012-06-18T23:40:52.147
> 
> 标签：mysql, join

我有以下问题：

我有一个搜索框，用户可以在其中搜索帖子、用户名或电子邮件。

帖子在我的帖子表中，用户位于我的用户表中。表具有以下结构：

帖子

post_id user_id post post_date 可见

用户

用户名 用户名 电子邮件 名字 姓氏

我可以通过一个查询从两个表中获取结果吗？不知道这对我有什么好处（如果有的话），只是问问。

然后我应该在同一页面上显示结果，但首先发布，然后是用户。如您所见，帖子将显示不同的数据，用户将显示不同的数据。

我知道存在按条款分组，所以我想对结果进行分组，首先获取帖子，然后获取用户。

任何有关构建此查询的帮助将不胜感激。

问候，佐雷利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:13:25.143

如果表都是相同的模式，你可以

```
SELECT fields from posts where (yadda = 1)
UNION 
SELECT fields from users where (yadda = 1) 
```

但是，这是不可能的，因为您的表具有不同的架构和数据类型（即 post_date 可能是日期时间，而 users 表中的相应字段是 firstname，它是一个字符串）

理论上，您可以通过使用仅针对帖子或用户有条件地填充的虚拟字段来解决此问题...

```
SELECT 'P' as result_type, post_id, user_id, post_date, visible, NULL as username, NULL as email, NULL as firstname, NULL as lastname from posts where (yadda = 1)
UNION ALL
SELECT 'U', NULL, userid, NULL, NULL, username, email, firstname, lastname from users where (yadda = 1) 
```

但这是一种非常糟糕的做事方式。您正在传输更多数据，然后必须编写逻辑代码来检查它是什么类型的行，并询问相关字段。

所以简单的答案是只发出两个单独的查询。

我唯一推荐上述方法的是，如果您有一些复杂的基于数据库的排序顺序，这意味着您必须将帖子记录与用户记录合并。从你的问题来看，这听起来不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:15:27.150

像这样的东西会起作用，但这不是一个非常优雅的解决方案。

```
SELECT q.post_id, q.post_user_id, q.post, q.post_date, q.post_visible,
       q.user_id, q.username, q.user_email, q.user_first, q.user_last
FROM   (
       SELECT post_id, user_id AS post_user_id, post, post_date, visible AS post_visible,
              0 AS user_id, "" AS username, "" AS user_email, "" AS user_first, "" AS user_last
       FROM   posts
       WHERE  post like ?
  UNION
       SELECT 0 AS post_id, "" AS post_user_id, "" AS post, "" AS post_date, 0 AS post_visible,
              userid AS user_id, username, email AS user_email, firstname AS user_first, lastname AS user_last
       FROM   users
       WHERE  username like ?
       OR     email like ?
       ) q
ORDER BY q.post_id DESC 
```

# facebook - 动态更改 Facebook Like 按钮的 Open Graph 属性？

> ID：11092585
> 
> 赞同：2
> 
> 时间：2012-06-18T23:41:35.877
> 
> 标签：facebook, facebook-like, facebook-opengraph, prettyphoto

我使用*jQuery PrettyPhoto*作为图片库。每个图像在图像模式的底部都有自己的类似 facebook 的按钮。我希望将喜欢的图像显示为与喜欢图像相关的“点击喜欢的用户”状态更新的缩略图。（另外，我希望标题是独一无二的，但我假设它们可以以相同的方式更改，如果有的话。）

截至目前，Facebook 片段似乎在加载时抓取画廊元属性，抓取那里列出的 og:title 和 og:image 内容。每当单击新的图库图像时，我都尝试动态更改这些值，但它似乎正在使用页面加载的元内容的值（这是有道理的）。

有没有办法改变 facebook like 按钮所看到的图像，它应该在“喜欢”时使用？每个图库图像在同一页面上动态加载，仅更改每个图像的锚值。我尝试了很多方法都没有成功，但也许有人对这个或类似的问题有一些经验。

感谢您的任何帮助或线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:51:09.397

由于您没有提供任何示例，因此我在[这里](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto)进行了检查。正如我所看到的，他们也使用原始按钮，因此每个图像中的 og:title 和 og:image 应该不同。您可以在每个弹出窗口中使用 html 来代替图像，然后将图像、您喜欢的按钮等放在那里吗？

PS：否则，你必须通过javascript动态改变画廊的标题，这不是一个很理想的情况。Facebook 将始终寻找 og:title 来抓取数据，您不能简单地通过自定义代码提供它。

# android - 在 Android 的 Google Analytics 中批处理 PageView

> ID：11092587
> 
> 赞同：1
> 
> 时间：2012-06-18T23:42:10.297
> 
> 标签：android, google-analytics

目前，我尝试 10 个页面浏览量（可能是不同的页面）并立即刷新到 Google Analytics。
通过设置 setDebug(true)，我可以看到发送到 Google Analytics 的 http 请求。有趣的是，在调度时发送了 10 个 http 请求而不是一个大的 http 请求......
如何有一个大的 http 请求来调度缓存的页面视图？

# python - 可能带有 python 绑定的大规模聚类库

> ID：11092589
> 
> 赞同：8
> 
> 时间：2012-06-18T23:42:17.520
> 
> 标签：python, data-mining, cluster-analysis

我一直在尝试聚集一些更大的数据集。由 50000 个维度为 7 的测量向量组成。我正在尝试生成大约 30 到 300 个集群以进行进一步处理。

我一直在尝试以下集群实现，但没有成功：

*   Pycluster.kcluster（在我的数据集上只给出 1-2 个非空集群）
*   scipy.cluster.hierarchy.fclusterdata（运行时间过长）
*   scipy.cluster.vq.kmeans（内存不足）
*   sklearn.cluster.hierarchical.Ward（运行时间过长）

还有其他我可能会错过的实现吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T06:06:18.593

50000 个实例和 7 个维度并不是很大，也不应该扼杀一个实现。

虽然它没有 python 绑定，但试试[ELKI 。](http://elki.dbs.ifi.lmu.de/)他们在主页上使用的基准集是 8 个维度的 110250 个实例，他们显然在 60 秒内运行 k-means，在 350 秒内运行更高级的 OPTICS。

避免层次聚类。它实际上只适用于小型数据集。它通常在矩阵运算上实现的方式是`O(n^3)`，这对于大型数据集来说*确实很*糟糕。所以我对这两个超时并不感到惊讶。

使用索引支持实现的 DBSCAN 和 OPTICS 是`O(n log n)`. 当天真地实施时，它们在`O(n^2)`. K-means 确实很快，但结果往往不尽如人意（因为它总是在中间分裂）。它应该运行在`O(n * k * iter)`通常不会在太多迭代中收敛的地方 ( `iter<<100`)。但它只适用于欧几里得距离，并且不适用于某些数据（高维、离散、二进制、不同大小的集群......）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T08:42:14.590

由于您已经在尝试 scikit-learn:应该比多核机器上的并行拟合`sklearn.cluster.KMeans`更好并且支持并行拟合。更好，但不会为您随机重启。`Ward`[`MiniBatchKMeans`](http://scikit-learn.org/stable/modules/generated/sklearn.cluster.MiniBatchKMeans.html#sklearn.cluster.MiniBatchKMeans)

```
>>> from sklearn.cluster import MiniBatchKMeans
>>> X = np.random.randn(50000, 7)
>>> %timeit MiniBatchKMeans(30).fit(X)
1 loops, best of 3: 114 ms per loop 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T16:50:05.853

我的包装[牛奶](http://luispedro.org/software/milk "牛奶主页")很容易解决这个问题：

```
import milk
import numpy as np
data = np.random.rand(50000,7)
%timeit milk.kmeans(data, 300)
1 loops, best of 3: 14.3 s per loop 
```

我想知道你是否打算写 500,000 个数据点，因为 50,000 个点并没有那么多。如果是这样，牛奶需要更长的时间（约 700 秒），但仍然可以很好地处理它，因为它不会分配除您的数据和质心之外的任何内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T02:16:25.120

OpenCV 有一个 k-means 实现，[Kmeans2](http://opencv.willowgarage.com/documentation/python/core_clustering.html)

预期运行时间约为`O(n**4)`- 对于数量级的近似值，请查看聚类 1000 个点需要多长时间，然后将其乘以 700 万（50**4 向上舍入）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-13T23:10:20.677

对于实际大规模情况的真正答案是使用诸如 FAISS 之类的东西，它是 Facebook Research 的库，用于高效的相似性搜索和密集向量的聚类。

见 [https://github.com/facebookresearch/faiss/wiki/Faiss-building-blocks:-clustering,-PCA,-quantization](https://github.com/facebookresearch/faiss/wiki/Faiss-building-blocks:-clustering,-PCA,-quantization)

# c++ - 在 decltype 中使用 this 指针

> ID：11092592
> 
> 赞同：16
> 
> 时间：2012-06-18T23:42:28.447
> 
> 标签：c++, gcc, c++11, decltype

**示例**（编译良好）

```
struct A
{
    void f() {};
    auto g() -> decltype(f())
    {}

}; 
```

**问题**

如果我`this`在 decltype (ie `decltype(this->f())`) 中添加指针，我会在 gcc 4.7.0 中得到以下编译错误：

```
error: invalid use of incomplete type 'struct A'
error: forward declaration of 'struct A'
error: invalid use of incomplete type 'struct A'
error: forward declaration of 'struct A' 
```

`this`不允许在 decltype 中使用吗？有人可以帮助我了解问题所在吗？

**编辑**

[这已作为错误提交](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53721)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T02:33:11.790

似乎问题不在于`this`出现在 a 内部`decltype`，而在于它出现**在函数体外部。**

例如，以下代码在**GCC** 4.7 下编译：

```
struct A
{
  int f() { return 0; }
  auto g() -> decltype(f()) {
    decltype(this->f()) var = this->f();
    return var;
  }
}; 
```

这在函数体`decltype(this->f())` *内部*`g`使用，但是`auto .... -> ....`表单中函数的返回类型规范，即所谓的**尾随返回类型**规范，**不是函数体的一部分**，GCC不允许在其中。

**但是**，看起来（见评论中的讨论）C++ 标准实际上并不要求`this`在函数体中使用：标准状态的§5.1.1`this`可以在可选的 const/volatile 限定符和结尾之间的任何地方使用函数体，见下文第 3 条。（为了完整起见，我也添加了第 4 条，它讨论了数据成员，与问题没有直接关系）。

> （条款 3）如果声明声明了类 X 的成员函数或成员函数模板，则表达式**this** 是可选 cv-qualifer-seq 和函数定义、成员声明符或声明符。**它不应出现在可选的 cv-qualifier-seq** 之前，也不应出现在静态成员函数的声明中（尽管它的类型和值类别在静态成员函数中定义，因为它们在非静态成员函数中） . [...]
> 
> （第 4 条）否则，如果成员声明符声明类 X 的非静态**数据成员（9.2），则表达式 this 是****可选大括号或等式初始化器**中“指向 X”的类型的纯右值。它不应出现在成员声明符的其他位置。
> 
> （第 5 条）**this**的表达不得出现在任何其他上下文中。[...]

注意：*可选的 cv-qualifier-seq*，即函数的`const`or`volatile`限定符，正如 Jesse 在评论中指出的那样，必须出现***在*尾随返回类型声明之前。**因此`this`，以问题中描述的方式使用应该是正确的，而**GCC 似乎是错误的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:55:36.770

错误消息似乎很清楚：“this”是“struct A”的一个实例，它是一个不完整的类型（即编译器在当前传递期间尚未完成对结构的解析）。

# url - 跨域 selenium 测试——如何跟踪浏览器 URL？

> ID：11092596
> 
> 赞同：2
> 
> 时间：2012-06-18T23:43:02.060
> 
> 标签：url, selenium, cross-domain, capybara, capture

我使用 Selenium 和 Capybara 维护了一个测试套件。虽然我可以说服 Selenium 访问我的主域之外的页面，但 Capybara 似乎无法跟踪浏览器地址栏中的 URL。我将此缺陷归结为 Selenium::WebDriver 中的行为，这是 Ruby 与 Selenium 2 的绑定。

谷歌搜索，看起来 Selenium 似乎有一种可以设置的模式，它可以实现跨域操作。但是，我没有找到任何具体的参考。

StackOverflow 上的一些人谈论使用具有“提升权限”的 Chrome 或 Firefox，但同样，我只是没有找到任何有关使用此类功能的信息。不可避免地，这些问题最终没有答案。

还有其他流行的 SO 建议谈论使用“打开”命令将浏览器显式带到新站点。这是不可接受的，原因很明显，用户通常不键入域名。例如，如果我访问 youtube.com，并在描述下方找到我喜欢的带有 Twitter 图标的视频，那么单击该 Twitter 按钮应该会将我引导至适当的 twitter.com 地址。用户不必手动输入推特地址。使用 selenium 的 open 命令会破坏测试，因为测试不再反映用户行为（它模拟某人实际在栏中输入地址），从而破坏了测试的意图，即确认 twitter 按钮是否实际上按预期工作。

我开始相信真正的、自动化的跨域操作是不可能的。

所以，基本上，我有两个问题：

（1）给定一个在“www.example.com”上打开 Selenium 的测试脚本，并且我要求 Selenium 单击将浏览器指向其他位置的链接，是否 = 可能 = 以某种方式捕获浏览器地址的 URL点击成功后栏会读取吗？(2) 知道这是可能的，=how= 我该怎么做？我根本没有找到任何有关此的信息。如果我阅读@session.driver.browser.current_url，它仍然会报告example.com 上的URL，而不是浏览器的当前URL。

我不太确定如何提供示例源代码来帮助说明我想要的东西，以免将问题与无关的细节混淆，但如果人们想要示例源代码，请告诉我，我会尝试掀起某事。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:20:06.640

利用

```
selenium.click("some redirect link");
selenium.waitforpagetoload("30000"); //page load time
string url=selenium.getlocation(); //storing the url in a string. 
```

如果这没有帮助，请发布**示例代码**或指向您正在进行此测试**的网页的链接。**

我不知道如何在 Ruby 中做到这一点。但我会发布这个测试的**HTML 代码**。因此，您将此代码粘贴到您的**Selenium IDE**中并将其导出为**Ruby**或您喜欢的**任何语言。**

HTML 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://www.google.co.in/" />
<title>New Test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>
<tr>
<td>open</td>
<td>youtube</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>id=redirect_link</td>
<td></td>
</tr>
<tr>
<td>verifyLocation</td>
<td>resultant_page_URL</td>
<td></td>
</tr>
</tbody></table>
</body>
</html> 
```

# jquery - How can I swap those 2 div?

> ID：11092597
> 
> 赞同：2
> 
> 时间：2012-06-18T23:43:02.167
> 
> 标签：jquery

I got an empty Div called Target :

```
<div id="target"></div> 
```

and a div called list :

```
<div id="list">
    <ul>
        <li><img id="1" src=".." /></li>
        <li><img id="2" src=".." /></li>
        <li><img id="3" src=".." /></li>
    </ul>
</div> 
```

What I want is, on user click, get the img into div target, and adjust his size to something bigger. I can do this easy.
The troubles come where if the user clicks on another div, or another button (arrow or next button elsewhere) I want the 1st div to get back to its place, and be replaced by the new one (or the following in the list, or the 1st if its the last div who's on display).
I tried a couple of ways but my jQuery ain't yet good enough.

( before someone ask, everything is local, no server side if this changes anything )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:49:18.713

我完全不确定这是否是最好的方法，甚至是一种有效的方法，但它似乎可以满足您的需求。

[**演示：使用克隆**](http://jsfiddle.net/FranWahl/FvZfL/12/)

```
$("ul li img").on("click", function() {
    var currentImage = $(this);
    var hiddenImage = $("ul li img[hidden='hidden']");

    $("#target").html("");
    currentImage.clone().appendTo('#target');

    hiddenImage.removeAttr("hidden");
    currentImage.attr("hidden", "hidden");
});​ 
```

根据评论，一些元素可能是视频文件。而不是使用`clone()`一个可以移动元素并留下一个占位符。

[**演示：使用占位符**](http://jsfiddle.net/FranWahl/FvZfL/11/)

```
$("ul li img").on("click", function() {
    var currentImage = $(this);
    var lastImage = $("#target img");
    var placeHolder = $("#last-image-position");

    lastImage.insertBefore("#last-image-position");
    $("#last-image-position").remove();

    $("<div id='last-image-position'><div>").insertBefore(currentImage);

    currentImage.appendTo('#target');
});​ 
```

**使用实际图像编辑**
更新的演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T23:56:47.363

**工作演示**交换 div 内容：http: [//jsfiddle.net/BKNjB/2/](http://jsfiddle.net/BKNjB/2/)

如果我错了，请告诉我。:)

行为 - 将有 2 个警报`before`，并且`after`在下面休息会更有意义。

**或者**可能是这样的：http: [//jsfiddle.net/vJTyf/6/](http://jsfiddle.net/vJTyf/6/) **或者交换图像这样**的东西，每次你点击图像时交换图像：http: [//jsfiddle.net/vJTyf/9/](http://jsfiddle.net/vJTyf/9/)（是的，你可以以更整洁的方式进行:)

**代码**

```
$(document).ready(function() {
    alert(' Before swap HTML in target is :==> ' + $('#target').html());

        var targetHtml = $('#target').html();
        var listHtml = $('#list').html();

        $('#target').html(listHtml);
        $('#list').html(targetHtml);

    alert(' After swap HTML in target is :==> ' + $('#target').html());

});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T23:45:58.930

也许你的意思是：

```
$('#target').replaceWith($('#list')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T00:47:22.983

也许你想要这个

```
$(function(){
    $('#list li').on('click', 'img', function(e){
        var img=$(this);
        $('#target').html(img.clone()) .width(img.width()).height(img.height());
    });

    $('#target').on('click', function(e){
        $(this).html('').prop('title', '').width(200).height(200); // original size
    })
    .on('mouseenter', function(e){
        if($(this).html()!='') $(this).prop('title', 'Click to clear');
    })
    .on('mouseleave', function(e){
        $(this).prop('title', '');
    });            
}); 
```

[**演示。**](http://jsfiddle.net/heera/WP2y2/2/)

**更新：（**你要求的）

```
$(function(){
    $('#list li').on('click', 'img', function(e){
        if($('#target').html()!='')
        {
            $('#list ul li:empty').html($('#target').html());
        }
        var img=$(this);
        $('#target').html(img).width(img.width()).height(img.height());
    });

    $('#target').on('click', function(e){
        $('#list ul li:empty').html($('#target').html());
        $(this).html('').prop('title', '').width(200).height(200);
    })
    .on('mouseenter', function(e){
        if($(this).html()!='') $(this).prop('title', 'Click to clear');
    })
    .on('mouseleave', function(e){
        $(this).prop('title', '');
    });            
}); 
```

[**演示。**](http://jsfiddle.net/heera/WP2y2/3/)

# android - 如何从 CursorLoader 刷新光标？

> ID：11092599
> 
> 赞同：27
> 
> 时间：2012-06-18T23:43:05.003
> 
> 标签：android, debugging, android-contentprovider, android-loadermanager, android-cursorloader

所以我有我的`MainDisplayActivity`which 实现了`Activity`和`LoaderManager.LoaderCallbacks<Cursor>`。这里我有 A `ListView`，我使用 ContentProvider 从我的数据库中获取的议程信息填充它。我也有`GridView`一个日历。我在单击单元格时设置了它，议程会随着单击的日期更新。我的问题是，当重用我在`onCreate()`setOnItemClickListener() 内部创建的加载器时，它不会用我正在创建的新光标刷新信息。我可以用另一个 ID 创建一个新的加载器，它可以工作一次，但是一旦我点击另一天，它就会停止刷新。问题出在光标上。如何从 Loader 刷新光标，这样我就不必继续创建新的 Loader？提前致谢！

`MainDisplayActivity`在 My类的 onCreate() 中创建 Loader 的初始调用：

```
makeProviderBundle(new String[] {"_id, event_name, start_date, start_time, end_date, end_time, location"},
            "date(?) >= start_date and date(?) <= end_date", new String[]{getChosenDate(), getChosenDate()}, null);
    getLoaderManager().initLoader(0, myBundle, MainDisplayActivity.this);

    list.setAdapter(agendaAdapter); 
```

这些是覆盖的方法`LoaderCallbacks<Cursor>`

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    Uri baseUri = SmartCalProvider.CONTENT_URI;
    return new CursorLoader(this, baseUri, args.getStringArray("projection"), 
            args.getString("selection"), args.getStringArray("selectionArgs"), args.getBoolean("sortOrder") ? args.getString("sortOrder") : null );
}

@Override
public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
    agendaAdapter.swapCursor(arg1);
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    //Not really sure how this works. Maybe I need to fix this here?
    agendaAdapter.swapCursor(null);

}

public void makeProviderBundle(String[] projection, String selection, String[] selectionArgs, String sortOrder){
    /*this is a convenience method to pass it arguments 
     * to pass into myBundle which in turn is passed 
     * into the Cursor loader to query the smartcal.db*/
    myBundle = new Bundle();
    myBundle.putStringArray("projection", projection);
    myBundle.putString("selection", selection);
    myBundle.putStringArray("selectionArgs", selectionArgs);
    if(sortOrder != null) myBundle.putString("sortOrder", sortOrder);
} 
```

需要任何其他代码，请随时询问。再次感谢任何帮助！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-19T00:23:48.040

您只需稍微移动代码并调用`restartLoader`. 那是，

1.  当用户单击列表项时，您会以某种方式更改返回的私有实例变量`getChosenDate()`（我在这里故意含糊其辞，因为您没有指定确切`getChosenDate()`返回的内容）。

2.  更改完成后，调用`getLoaderManager().restartLoader()`您的`Loader`. 您的旧数据将被丢弃并`restartLoader`触发`onCreateLoader`再次调用。这一次，`getChosenDate()`将返回一个不同的值（取决于单击的列表项）并且应该这样做。您的`onCreateLoader`实现应如下所示：

    ```
    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        Uri baseUri = SmartCalProvider.CONTENT_URI;

        makeProviderBundle(
            new String[] { "_id, event_name, start_date, start_time, end_date, end_time, location" },
            "date(?) >= start_date and date(?) <= end_date", 
            new String[]{ getChosenDate(), getChosenDate() }, 
            null);

        return new CursorLoader(
                this, 
                baseUri, 
                args.getStringArray("projection"), 
                args.getString("selection"), 
                args.getStringArray("selectionArgs"),    
                args.getBoolean("sortOrder") ? args.getString("sortOrder") : null);
    } 
    ```

让我知道这是否有意义。:)

# linux - 在 nautilus 中隐藏已安装的设备

> ID：11092601
> 
> 赞同：6
> 
> 时间：2012-06-18T23:43:49.487
> 
> 标签：linux, bash, nautilus

我正在运行 Ubuntu Precise。在我的 /etc/init.d 我有一个 bash 脚本，它在启动时执行以下操作：

1.  循环在 NTFS 驱动器上安装映像。该映像包含一个 ext2 文件系统，其目录名为*home*

2.  然后它使用 --rbind 选项进行挂载，将映像文件中的*主页*挂载到*/home*上。

到目前为止运行良好，尽管在*/home*中打开文件并不能阻止循环挂载被卸载。

不幸的是，Nautilus 在可移动驱动器列表中显示循环安装，并带有一个图标，允许用户卸载循环安装。卸载安装了 /home 的驱动器不利于系统运行良好。

如何防止 Nautilus 显示此循环安装设备？

*man udisk(7)*说“udev 数据库中的有影响的设备属性”之一是：

> UDISKS_PRESENTATION_HIDE
> 
> 如果设置为 1，这是对演示级软件的提示，即不应向用户显示设备。

我假设在 /dev/loop 上设置这个属性会告诉 Nautilus 不要显示设备。

如何在 bash 脚本中设置 UDISKS_PRESENTATION_HIDE？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T14:09:32.277

现在应该更新答案（至少对于 Ubuntu 12.10）。您不必再写这个了（正如最初在另一个答案中所写的那样）：

```
KERNEL=="sda1", ENV{UDISKS_PRESENTATION_HIDE}="1"
KERNEL=="sdb2", ENV{UDISKS_PRESENTATION_HIDE}="1" 
```

相反，你应该这样写：

```
KERNEL=="sda1", ENV{UDISKS_IGNORE}="1"
KERNEL=="sdb2", ENV{UDISKS_IGNORE}="1" 
```

其余的都是一样的:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T18:14:56.877

您必须在 上写下以下内容`/etc/udev/rules.d/99-hide-disks.rules`：

```
内核=="sdxy"，ENV{UDISKS_PRESENTATION_HIDE}="1"
```

`sdxy`里面的隔断在哪里`/dev`。您可以通过运行轻松找到分区`mount`（但我认为您已经知道了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:13:10.340

另一种方法是将设备安装在 /media 以外的其他位置。我选择了 /run，它允许 /mnt 用于临时挂载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T14:56:28.077

根据archlinux wiki上的[udisk](https://wiki.archlinux.org/index.php/udisks#Hide_selected_partitions)页面并总结其他答案：
添加一个名为`/etc/udev/rules.d/99-hide-disks.rules`

## 对于 udisk：

```
# hide the device sda1
KERNEL=="sda1", ENV{UDISKS_PRESENTATION_HIDE}="1" 
```

## 对于 udisk2：

```
# hide the device sda1
KERNEL=="sda1", ENV{UDISKS_IGNORE}="1"

# hide the device sda2 using UUID
# use: blkid /dev/sda2    to get the UUID of /dev/sda2
ENV{ID_FS_UUID}=="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX", ENV{UDISKS_IGNORE}="1" 
```

# gnuplot - gnuplot ：在单个图形中绘制来自多个输入文件的数据

> ID：11092608
> 
> 赞同：91
> 
> 时间：2012-06-18T23:44:44.047
> 
> 标签：gnuplot

我正在尝试使用 gnuplot 绘制图表。我有六个文本文件。每个文本文件包含两列。第一列以秒为单位表示时间（浮点数）。第二个是序列号。我想在一个图中为所有六个文件绘制时间与序列号的关系图。我正在使用这个文件来做到这一点。

```
set terminal png
set output 'akamai.png'

set xdata time
set timefmt "%S"
set xlabel "time"

set autoscale

set ylabel "highest seq number"
set format y "%s"

set title "seq number over time"
set key reverse Left outside
set grid

set style data linespoints

plot "print_1012720" using 1:2 title "Flow 1", \
plot "print_1058167" using 1:2 title "Flow 2", \
plot "print_193548"  using 1:2 title "Flow 3", \ 
plot "print_401125"  using 1:2 title "Flow 4", \
plot "print_401275"  using 1:2 title "Flow 5", \
plot "print_401276"  using 1:2 title "Flow 6" 
```

我的文件在哪里：

*   `print_1012720`
*   `print_1058167`
*   `print_193548`
*   `print_401125`
*   `print_401275`
*   `print_401276`

它给出了一个奇怪的错误，如下所示：

> “plot.plt”，第 24 行：未定义变量：绘图

难道我做错了什么？是否可以在同一个图中绘制来自不同文件的输入数据？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-06-18T23:51:11.143

你这么近！

改变

```
plot "print_1012720" using 1:2 title "Flow 1", \
plot "print_1058167" using 1:2 title "Flow 2", \
plot "print_193548"  using 1:2 title "Flow 3", \ 
plot "print_401125"  using 1:2 title "Flow 4", \
plot "print_401275"  using 1:2 title "Flow 5", \
plot "print_401276"  using 1:2 title "Flow 6" 
```

到

```
plot "print_1012720" using 1:2 title "Flow 1", \
     "print_1058167" using 1:2 title "Flow 2", \
     "print_193548"  using 1:2 title "Flow 3", \ 
     "print_401125"  using 1:2 title "Flow 4", \
     "print_401275"  using 1:2 title "Flow 5", \
     "print_401276"  using 1:2 title "Flow 6" 
```

出现错误是因为 gnuplot 试图将单词“plot”解释为要绘制的文件名，但您没有将任何字符串分配给名为“plot”的变量（这很好——那会非常混乱）。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2014-01-27T23:06:03.477

如果您适当地调整文件名或图形标题，您可能会发现 gnuplot 的 for 循环在这种情况下很有用。

例如

```
filenames = "first second third fourth fifth"
plot for [file in filenames] file."dat" using 1:2 with lines 
```

和

```
filename(n) = sprintf("file_%d", n)
plot for [i=1:10] filename(i) using 1:2 with lines 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-10-08T17:21:36.623

**`replot`**

这是一次获取多个图的另一种方法：

```
plot file1.data
replot file2.data 
```

# jquery - Selenium IDE：在 jquery ui 下拉菜单中选择一个 href

> ID：11092610
> 
> 赞同：0
> 
> 时间：2012-06-18T23:45:22.287
> 
> 标签：jquery, user-interface, drop-down-menu, selenium, ide

我正在使用 Selenium IDE 和 firefox 在我的网站上运行测试，当我录制并单击列表中的一个项目时，它只给了我一个操作：单击：css=span.ui-selectmenu-status

我想从列表中选择一个项目，但类和 ID 是动态加载的，因为该站点在此处使用 JQUERY UI 运行。

我正在尝试：

点击 ：`//div[@id='hlevel-menu']/a[.='CATS']`

但它返回一个错误：未找到..

我想这是错误的或超级错误的，如果有人知道怎么做，请帮助:)

这是我正在寻找的代码部分：

```
<div class="dceui ui-selectmenu-menu ui-selectmenu-open" style="z-index: 1; top: 363px; left: 699.5px;">

    <ul id="hlevel-menu" class="ui-widget ui-widget-content ui-selectmenu-menu-dropdown ui-corner-bottom bg_education_icon" aria-hidden="false" role="listbox" aria-labelledby="hlevel-button" style="width: 121px; height: auto;" aria-disabled="false" aria-activedescendant="ui-selectmenu-item-331">

    <li class="" role="presentation">
        <a id="" href="#nogo" tabindex="-1" role="option" aria-selected="false">- Please choose -</a>
    </li>

    <li class="" role="presentation">
        <a href="#nogo" tabindex="-1" role="option" aria-selected="false">DOGS</a>
    </li>

    <li class="" role="presentation">
        <a id="" href="#nogo" tabindex="-1" role="option" aria-selected="false">CATS</a>
    </li>

    <li class="ui-corner-bottom ui-selectmenu-item-selected" role="presentation">
        <a href="#nogo" tabindex="-1" role="option" aria-selected="true" id="ui-selectmenu-item-331">PIGS</a>
    </li>
</div> 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:53:00.417

它不起作用，因为`//div/a`正在寻找直系后代，而不是子子项中任何地方的所有标签。你需要做`//div/ul/li/a[text()='CATS']`

然后你需要自己学习一下[xpath](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:54:33.963

你的意思是 jQuery 自动完成？还是普通类型的下拉菜单？

这就是我在 selenium 中选择自动完成列表值的方式：（注意这是在代码中输入的，而不是记录的代码）。这有点棘手，你必须让它触发自动完成，然后你必须突出显示值，然后你必须选择它。

```
string locator = "id=hlevel-menu";
string value = "CATS";
selenium.Focus(locator);
selenium.Type(locator, value);
selenium.KeyDown(locator, "\\40");
Thread.Sleep(50);
selenium.KeyDown(locator, "\\40");
Thread.Sleep(50);
selenium.KeyDown(locator, "\\13");
Thread.Sleep(50); 
```

# shell - GNU Screen：如果它不存在，我如何在后台创建一个屏幕？

> ID：11092616
> 
> 赞同：10
> 
> 时间：2012-06-18T23:46:14.917
> 
> 标签：shell, gnu-screen

"screen -R -D -S test" 如果它不存在，将创建一个名为 test 的会话，如果存在则连接到它

“screen -d -m -S test” 将创建一个名为 test 的新分离会话，无论它是否存在，都可能导致多个名为 test 的会话：

```
There are several suitable screens on:
    9705.test   (06/18/2012 06:42:58 PM)    (Detached)
    9639.test   (06/18/2012 06:42:57 PM)    (Detached) 
```

如何创建一个名为 test 的独立会话，但前提是该会话尚不存在？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T00:03:41.650

我相信您正在寻找`-d -R`组合：

```
screen -d -R -S test 
```

来自`man screen`：

```
 -d -R   Reattach a session and if necessary detach or  even  create  it
              first 
```

**编辑**

如果您只想在不存在的情况下创建背景屏幕，则 ~/.bashrc 或 ~/.zshrc 中的一个小 shell 函数将起作用：

```
function bgsc { 
  if screen -list | awk '{print $1}' | grep -q "$1$"; then
    echo "screen $1 already exists" > &2
  else
    screen -d -m -S $1
  fi
} 
```

然后只需调用`bgsc test`.

# php - 单击 php 循环中的链接时暂停 youtube iframe 嵌入

> ID：11092617
> 
> 赞同：0
> 
> 时间：2012-06-18T23:46:17.577
> 
> 标签：php, javascript, youtube-api, youtube-javascript-api

所以我花了很长时间，但我能够得到它，所以当你点击我页面上的链接时，它会暂停在 youtube iframe 嵌入中播放的视频。但是，在我的页面上，我有多个视频，它们是通过循环检索的。当点击所有视频停止的链接时，我将如何处理，无论它们在哪里。

现在，该链接仅在循环中有一个视频时才有效，一旦我介绍了 2，它就会停止工作。

这是我的 javascript

```
/*
 * @author       Rob W (http://stackoverflow.com/a/7513356/938089
 * @description  Executes function on a framed YouTube video (see previous link)
 *               For a full list of possible functions, see:
 *               http://code.google.com/apis/youtube/js_api_reference.html
 * @param String frame_id The id of (the div containing) the frame
 * @param String func     Desired function to call, eg. "playVideo"
 * @param Array  args     (optional) List of arguments to pass to function func*/
function callPlayer(frame_id, func, args) {
if (window.jQuery && frame_id instanceof jQuery) frame_id = frame_id.get(0).id;
var iframe = document.getElementById(frame_id);
if (iframe && iframe.tagName.toUpperCase() != 'IFRAME') {
    iframe = iframe.getElementsByTagName('iframe')[0];
}
if (iframe) {
    // Frame exists, 
    iframe.contentWindow.postMessage(JSON.stringify({
        "event": "command",
        "func": func,
        "args": args || [],
        "id": frame_id
    }), "*");
}
} 
```

还有我的代码

```
<div id="work">
<? $rows = $db->fetch_all_array($work_sql);
foreach($rows as $record){
    $vimeo = "Vimeo";
    $youtube = "Youtube"; ?>
    <h3 onClick="javascript:void callPlayer('ytplayer','pauseVideo')">
        <a id="clickable" href="javascript:void callPlayer('ytplayer','pauseVideo')">
            <div class="workitem">
                <span class="mosaic-overlay">
                    <div class="details">
                        <? echo stripslashes ( "
                        <span class='title'>$record[title]
                        </span>
                    <br />
                        <span class='subtitle'>$record[subtitle]
                        </span>
                    </div>
                </span>
                <span class='mosaic-backdrop'>
                    <img src='img/work/$record[image]' />
                </span>
            </div>
        </a>
    </h3>
    <div class='player'>
        <div class='playertitle'>$record[title] - $record[subtitle]</div>
        <div class='video'>

                            <div id='ytplayer'><iframe width='531' height='325' src='http://www.youtube.com/embed/$record[code]?enablejsapi=1&rel=0&wmode=transparent&showinfo=0&showsearch=0&iv_load_policy=3' frameborder='0' allowfullscreen></iframe></div>

            </div>

        </div>");
} ?> 
```

任何建议都会很棒

# r - tm 如何与雪互动？

> ID：11092621
> 
> 赞同：4
> 
> 时间：2012-06-18T23:46:40.460
> 
> 标签：r, tm, snow

高性能任务视图说明`tm`可以使用雪进行并行文本挖掘（[High-Performance and Parallel Computing with R](http://cran.r-project.org/web/views/HighPerformanceComputing.html "使用 R 进行高性能和并行计算")）。但是，我没有找到任何示例来说明如何做到这一点，尽管我发现了一些关于并行计算的讨论`tm`（[R/Finance 2012](http://www.rinfinance.com/agenda/2010/Theussl+Feinerer+Hornik.pdf "研究/金融 2012")）。任何人都可以阐明如何`tm`与由创建的集群接口`snow`？

编辑：见下面 BenBarnes 的评论。具体来说：

> 根据`?tm_startCluster`，该函数查找 MPI 集群（不是 SOCK 集群）和“允许 [s] 'tm' 使用集群”。也许这将是 hadoop 的替代方案，因为在给定一些先决条件的情况下，`snow`可以设置 MPI 集群。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:17:06.380

使用“r-project tm parallel”作为搜索策略的 LMGTFY 将其作为第三次命中：

[使用 tm 进行分布式文本挖掘](http://www.rinfinance.com/agenda/2010/Theussl+Feinerer+Hornik.pdf)

直接从幻灯片中复制： 解决方案： 1\. 分布式存储 复制到 DFS 的数据集（'DistributedCorpus'） 只有关于语料库的元信息保留在内存中 2\. 并行计算 并行 MapReduce 范式中所有元素的计算操作（Map） 工作马 tm_map () 和 TermDocumentMatrix() 可以按需检索已处理的文档（修订）。

在 tm 的“插件”包中实现：tm.plugin.dc。

```
#Distributed Text Mining in R 
> library("tm.plugin.dc") 
> dc <- DistributedCorpus(DirSource("Data/reuters"), 
                          list(reader = readReut21578XML) ) 
> dc <- as.DistributedCorpus(Reuters21578) 
> summary(dc) 
#A corpus with 21578 text documents 
#The metadata consists of 2 tag-value pairs and a data frame 
#Available tags are: 
#create_date creator 
#Available variables in the data frame are: 
#MetaID 
--- Distributed Corpus --- 
#Available revisions: 
#20100417144823 
#Active revision: 20100417144823 
#DistributedCorpus: Storage 
#- Description: Local Disk Storage 
#- Base directory on storage: /tmp/RtmpuxX3W7/file5bd062c2 
#- Current chunk size [bytes]: 10485760 
> dc <- tm_map(dc, stemDocument)
> print(object.size(Reuters21578), units = "Mb") 
#109.5 Mb 
> dc 
#A corpus with 21578 text documents 
> dc_storage(dc) 
DistributedCorpus: Storage 
- Description: Local Disk Storage 
- Base directory on storage: /tmp/RtmpuxX3W7/file5bd062c2 
- Current chunk size [bytes]: 10485760 
> dc[[3]] 
#----------
Texas Commerce Bancshares Inc 
' 
s Texas 
Commerce Bank-Houston said it filed an application with the 
Comptroller of the Currency in an effort to create the largest 
banking network in Harris County. 
The bank said the network would link 31 banks having 
13.5 billion dlrs in assets and 7.5 billion dlrs in deposits. 
Reuter 
#---------
> print(object.size(dc), units = "Mb") 
# 0.6 Mb 
```

使用以下术语进行进一步搜索： tm, snow ,parLapply ...[生成此链接：](http://examples.oreilly.com/0636920021421/snow/parlapply.R)

使用此代码：

```
library(snow)
cl <- makeCluster(4, type="SOCK")

par(ask=TRUE)

bigsleep <- function(sleeptime, mat) Sys.sleep(sleeptime)
bigmatrix <- matrix(0, 2000, 2000)
sleeptime <- rep(1, 100)

tm <- snow.time(clusterApply(cl, sleeptime, bigsleep, bigmatrix))
plot(tm)
cat(sprintf("Elapsed time for clusterApply: %f\n", tm$elapsed))

tm <- snow.time(parLapply(cl, sleeptime, bigsleep, bigmatrix))
plot(tm)
cat(sprintf("Elapsed time for parLapply: %f\n", tm$elapsed))

stopCluster(cl) 
```

# c# - Visual Studio 与 EXE 文件中的 DLL 加载时间不同

> ID：11092623
> 
> 赞同：2
> 
> 时间：2012-06-18T23:47:04.047
> 
> 标签：c#, visual-studio-2010, .net-4.0, exe

我的 WPF 程序中使用了一个通用实用程序 dll 文件。我的程序做的第一件事是检查更新的 dll 文件并将其复制到执行目录 - 所有这些都没有引用 dll 中的任何方法或属性。

当我从 Visual Studio (v10) 内部编译和运行程序时，一切都按预期工作。程序启动，检查 dll 文件，如果需要进行复制，然后继续使用程序集。

如果我从 Windows 资源管理器运行编译的 .exe 文件，它似乎做的第一件事就是加载 Util.dll 程序集。这会锁定文件，并且不允许我更新它。

有没有人知道为什么程序在 Visual Studio 和 .exe 文件中的运行方式不同？关于在运行 .exe 文件时跟踪导致程序集加载的原因有什么想法吗？

下面是程序启动的代码片段：

```
void AppLoad(object sender, StartupEventArgs e)
{

  //Used to see what assemblies are loaded.
  System.Text.StringBuilder sb = new System.Text.StringBuilder();
  foreach (var item in AppDomain.CurrentDomain.GetAssemblies())
  {
    sb.AppendLine(item.FullName.ToString());
  }
  System.IO.File.WriteAllText(AppDomain.CurrentDomain.BaseDirectory + "test.txt", sb.ToString());

  //Check for the latest Util dll.
  if (!UpdateUtil())
  {
    //Shutdown.
    Application.Current.Shutdown();
    return;
  }

  //Start the main window.
  MainWindow m = new MainWindow();
  m.Show();
}

bool UpdateUtil()
{
  //Verify network path.
  if (!Directory.Exists(_componentPath))
  {
    MessageBox.Show("The program encountered an error.\r\rPlease contact your Program Administrator with the following information:\r\r" +
      "Program Name - Genesis Admin\r\r" +
      "Error Message - Network Component path not found.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
    return false;
  }
  //Verify file existance.
  string sourceFileName = _componentPath + "Util.dll";
  if (!File.Exists(sourceFileName))
  {
    MessageBox.Show("The program encountered an error.\r\rPlease contact your Program Administrator with the following information:\r\r" +
      "Program Name - Genesis Admin\r\r" +
      "Error Message - Network Util file not found.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
    return false;
  }

  string destFileName = AppDomain.CurrentDomain.BaseDirectory + "Util.dll";
  if (!File.Exists(destFileName) || File.GetLastWriteTime(sourceFileName) > File.GetLastWriteTime(destFileName))
    File.Copy(sourceFileName, destFileName, true);

  return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T00:36:50.677

这通常是一件冒险的事情，当即时编译器需要为方法生成机器代码时，程序集会被加载。您可能不指望的是*内联*代码，这是在发布版本中启用的重要优化。当您使用调试器运行时，该优化已*关闭。*

在您的代码段中，可能从“util.dll”加载哪种类型并不明显。但请务必重新构建您的代码，以便来自 util.dll 的*所有*类型都位于远离 UpdateUtil() 调用的单独方法中。使用方法上的 [MethodImpl(MethodImplOptions.NoInlining)] 属性抑制内联。

到目前为止，最好的方法是使用一个小的引导程序 .exe 文件进行测试，然后启动您的主 .exe。但是请记住，当您在用户机器上运行此代码时，您无疑会再次碰壁，如果没有 UAC 提升，您无法将 DLL 复制到 c:\program 文件中。这实际上是一个安装程序任务，它不应该出现在您的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:07:25.640

检查文件被复制到哪里。我可能错了，但 Visual Studio 可能使用项目的文件夹作为当前文件夹，而当您从资源管理器启动时，您的可执行文件的位置被用作工作目录。

您能否尝试输出的值`destFileName`（例如使用消息框）。我不是 dot net 方面的专家，但通常对常规 DLL 使用延迟加载。[这个页面](http://codepyre.com/2009/06/delay-loading-net-assemblies/)上可能有一些有用的东西。但是我再一次不知道点网。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T01:09:19.410

如果您需要查找更新的文件，那么您可能需要使用插件基础框架。概念是您在目录中查找具有特定名称的所有文件 - 然后将它们加载到程序中。使用接口来防止它们在程序启动后立即被编译。

# vb.net - 调用另一个带有 msgbox.yesno 的子后，子不继续

> ID：11092624
> 
> 赞同：1
> 
> 时间：2012-06-18T23:47:06.117
> 
> 标签：vb.net

我最近遇到了一个问题，如果我用 msgbox.styleyesno 调用 sub，它不会回到调用它的原始 sub。

这是我的代码：Sub1：

```
Private Sub cmbLeegmaken_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbLeegmaken.SelectedIndexChanged
    Tabel_Leegmaken(cmbLeegmaken.Text)
    Hide_Leegmaken()
    Loadtable()
End Sub 
```

称为子：

```
Sub Tabel_Leegmaken(ByVal Tabelnaam As String)
    MsgBox("Weet je zeker dat je de tabel " & Tabelnaam & " volledig wilt leegmaken?", MsgBoxStyle.YesNo)
    If vbYes Then
        Dim QuerVerwijdertabel As New SqlCommand("TRUNCATE TABLE " & Tabelnaam, connection)
        QuerVerwijdertabel.ExecuteNonQuery()
    End If
End Sub 
```

问题是，在 sub Tabel_Leegmaken 结束后，它不会返回到“Private Sub cmbLeegmaken_SelectedIndexChanged”。

我不知道它是否与在那里调用 msgbox 有什么关系，但我似乎无法让它工作（尽管这可能是一些我似乎无法发现的小错误 > <)。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:02:50.083

我想你的意思是写：

```
Sub Tabel_Leegmaken(ByVal Tabelnaam As String)
    If MsgBox("Weet je zeker dat je de tabel " & Tabelnaam & " volledig wilt leegmaken?", MsgBoxStyle.YesNo) = vbYes Then
        Dim QuerVerwijdertabel As New SqlCommand("TRUNCATE TABLE " & Tabelnaam, connection)
        QuerVerwijdertabel.ExecuteNonQuery()
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:04:25.210

我认为您需要更改 MsgBox 中的代码。我已经测试了如下代码，它工作正常：

```
Private Sub ComboBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    LaunchHere(ComboBox1.Text)
    MessageBox.Show("Back into Main ComboBox1_SelectedIndexChanged")
End Sub

Sub LaunchHere(ByVal abc As String)
    Dim response As MsgBoxResult
    response = MsgBox("Hello from inside Launch", MsgBoxStyle.YesNo, "Title")
    If response = MsgBoxResult.Yes Then
        MessageBox.Show("Inside Launch Here and used YES")
    Else
        MessageBox.Show("Inside Launch Here and used NO")
    End If
End Sub 
```

# qt - QLabel 不使用 Pixmap convertFromImage 刷新

> ID：11092627
> 
> 赞同：2
> 
> 时间：2012-06-18T23:47:12.060
> 
> 标签：qt, refresh, qlabel

我使用 QLabel 来显示伪视频流。由于我要对像素进行大量计算，因此我使用 QImage bits() 函数，然后将其转换为像素图以在 QLabel 上显示。到目前为止，我正在使用：

```
for(...)
{
    computeImage(&myImage);
    myLabel->setPixmap(QPixmap::fromImage(myImage));
} 
```

但是，由于`QPixmap::fromImage(...)`函数总是创建一个新的 QPixmap 对象，我尝试了以下谁应该更有效率：

```
QPixmap myPixmap;
for(...)
{ 
    computeImage(&myImage);
    bool b = myPixmap.convertFromImage(myImage);
    myLabel->setPixmap(myPixmap);
} 
```

它适用于第一次显示，但之后不会刷新。“b”变量始终为真，因此转换效果很好。我什至尝试过`repaint()`或`update()`标签，但它不起作用。标签仍然永远显示第一个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:05:25.617

你的每秒帧数（fps）是多少？您可以尝试在图像之间设置一些间隔吗？我认为 update() 也是需要的。

# python - 测试python的线程

> ID：11092628
> 
> 赞同：4
> 
> 时间：2012-06-18T23:47:13.513
> 
> 标签：python, macos

你如何测试预装在你的机器上的python版本（在本例中是Mac Lion）是否支持线程编译？

这是我的信息：

```
[16:31 7] uname -a
Darwin leopard.local 11.3.0 Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; root:xnu-1699.24.23~1/RELEASE_X86_64 x86_64 i386
[16:31 8] which python
/usr/bin/python
[16:31 9] python --version
Python 2.7.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:33:11.173

根据[TJD](https://stackoverflow.com/users/914466/tjd)和[pycoder112358](https://stackoverflow.com/users/1150563/pycoder112358)的评论，您可以通过运行测试您的 Python 安装是否支持线程：

```
import threading 
```

在 Python 命令行。如果`threading`未安装该模块，此命令将引发异常：

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    import threading
ImportError: No module named threading 
```

# javascript - Node.js 中的请求优先级队列

> ID：11092633
> 
> 赞同：0
> 
> 时间：2012-06-18T23:47:56.403
> 
> 标签：javascript, algorithm, node.js, data-structures, asynchronous

我有一个脚本，它使用 Node.js 中的 RESTful API 将产品添加到远程数据库。它运行良好，但我想更改处理 HTTP 请求的优先级。这里有一些代码可以更好地说明我正在尝试做的事情：

```
step(
    function initializeCategories() {
        createCategories(products, this);
    },
    function createProducts(err, categoriesHash) {
        console.log("\nCreating products:");
        console.log("==================");

        var group = this.group(),
            productDoneCallback;

        products.forEach(function (product) {
            product.categories = categoriesHash[product.category + "/" + product.make + "/" + product.model];
            productDoneCallback = group();

            step(
                function createProduct() {
                    postProduct(convertToBigCommerceObj(product), this);
                },
                function overwriteProduct(err, product, allowOverwrite) {
                    if (err) {
                        console.log(err);
                    }

                    allowOverwrite = allowOverwrite || false;

                    if (allowOverwrite) {
                        updateProduct(product, this);
                    } else {
                        this(err, product);
                    }
                },
                function addExtraInfo(err, product) {
                    addImage(product, productDoneCallback);
                }
            );
        });
    },
    function printStats(err) {
        if (err) {
            logError(err);
        }

        var endTime = +new Date(),
            duration = endTime - startTime;

        console.log("\nFinished after " + (duration / 1000 / 60) + " minutes");
        console.log(productsAdded + " Products added successfully");
        console.log(productsUpdated + " Products updated successfully");
        console.log(productsSkipped + " Products skipped");
        console.log("Average time (milliseconds) per product was : " + (duration / totalNumProducts ));
        console.log("For more information see error log (error.log)" );
    }
); 
```

在此代码中，始终在添加所有产品后最后添加产品图像。这是因为 forEach 循环立即将所有 postProduct 请求放入节点事件队列中。在第一个产品完成发布到服务器后，另一个条目被添加到队列的末尾以添加该产品的图像。相反，我希望新条目浮动到队列顶部并成为下一个要处理的条目（不是另一个产品帖子，可以等待）。

我意识到要做到这一点，我需要一个优先级队列。我只是不确定如何在 Node 和 Javascript 中实现这一点。

更新：在[https://github.com/STRd6/PriorityQueue.js](https://github.com/STRd6/PriorityQueue.js)找到 PriorityQueue 的实现后，真正的麻烦是每次请求完成时异步处理队列。或者更像是每次有可用的 http 通道被释放时，我们需要获取最高优先级的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T02:43:43.633

每当您听到“优先队列”时，您都应该考虑拥有堆数据结构。它们不是唯一的方法，但它们很容易实现，因此是一个很好的第一个 goto。

有关随机实现，请参见[http://eloquentjavascript.net/appendix2.html](http://eloquentjavascript.net/appendix2.html)。他们假设当您创建堆时，您传入一个函数，该函数接受一个元素并返回其优先级。在您的情况下，您可以使用类似的函数存储元素`[priority, object]`并初始化堆`function (x) {return x[0]}`。

# apache-zookeeper - Zookeeper：无法写入 PID

> ID：11092636
> 
> 赞同：1
> 
> 时间：2012-06-18T23:48:15.610
> 
> 标签：apache-zookeeper

所以我正在尝试开始使用 Accumulo。我安装了 Hadoop，它运行没有问题，但是当我尝试启动 Zookeeper 时，我得到：

```
JMX enabled by default
Using config: /opt/zookeeper/bin/../conf/zoo.cfg
-n Starting zookeeper ... 
/opt/zookeeper/bin/zkServer.sh: line 103: /tmp/zookeeper/zookeeper_server.pid: No such file or directory
FAILED TO WRITE PID 
```

我环顾四周似乎找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-30T12:58:39.397

我曾经也有过一样的问题。在我的情况下，启动 Zookeeper 并直接指定配置文件很有用：

> /bin/zkServer.sh 启动**conf/zoo.conf**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:56:17.760

我从未听说过 zookeeper，但尝试写入文件可能是权限问题，`zookeeper_server.pid`或者目录`/tmp/zookeeper/`不存在并且 shell 脚本没有考虑这种可能性。检查这些目录的权限和存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-09T08:49:52.623

zookeeper 以默认配置分发，仅用`/tmp/zookeeper`作`dataDir`示例。建议将此值更改`/path/to/zookeeper/conf/zoo.cfg`为`/var/lib/zookeeper`。

创建`/var/lib/zookeeper`需要root访问权限，所以`sudo`是必需的。此目录在创建时将具有以下权限。

```
ls -al  /var/lib/zookeeper/
drwxr-xrwx  4 root           wheel  128 May  9 14:03 . 
```

没有root权限启动zookeeper时，无法写入该目录。因此失败并出现错误

```
... /usr/local/zookeeper/bin/zkServer.sh: line 169: /var/lib/zookeeper/zookeeper_server.pid: Permission denied
FAILED TO WRITE PID 
```

您需要授予写入权限以允许用户启动 zookeeper 来写入`/var/lib/zookeeper`. 就我而言，当我在本地使用它时，我使用了以下命令并且它有效

```
sudo chmod o+w /var/lib/zookeeper 
```

# facebook-like - “点赞”开图动作

> ID：11092638
> 
> 赞同：0
> 
> 时间：2012-06-18T23:48:35.200
> 
> 标签：facebook-like, facebook-opengraph

我有一个 iPhone 应用程序 (http://getnowapp.com)，可以让您“喜欢体验”。我想将它与 Open Graph 集成到 Facebook 时间轴上。

我在 Opengraph 上设置了“点赞”操作，但由于以下原因被拒绝：“您的操作不符合条件：您正在尝试提交不允许的自定义操作。请删除此操作并提交内置版本取而代之的是这个动作。”

所以看起来 Like 不是一个可接受的动作，因为它已经存在于 Facebook 中。

但是，您可以毫无问题地“点赞 Pinterest 上的 Pin 图”。

我在这里错过了什么吗？

谢谢！本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:02:45.527

正如你所知道的，“喜欢”动作已经由 facebook 定义，这就是为什么你不能定义一个新的动作。
我猜 pinterest 所做的就是使用 Open Graph API 已经支持的点赞连接来“点赞”。[https://developers.facebook.com/docs/opengraph/actions/#like_action](https://developers.facebook.com/docs/opengraph/actions/#like_action)
我不太确定，因为我没有使用过这个动作。

```
POST https://graph.facebook.com/ACTION_ID/likes?access_token=YOUR_ACCESS_TOKEN 
```

如果您有兴趣，您可以查看 pinterest 实施的一些见解。[这里](https://developers.facebook.com/showcase/pinterest/)

# android - 如何设置活动的最大高度（以对话框为主题）

> ID：11092642
> 
> 赞同：4
> 
> 时间：2012-06-18T23:49:06.533
> 
> 标签：android, android-layout

我正在为平板电脑优化我们的 Android 应用程序。对于大部分应用程序，我们使用片段，但对于某些设置屏幕，我们只想将屏幕作为平板电脑的对话框启动。为此，我们在 Manifest 中设置了 Activity 的主题

```
<activity
    android:name="com.company.app.EditTaxTypeSettingsActivity"
    android:theme="@style/ActivityTheme">
</activity> 
```

这是主题（在 res/values-large-v11 中）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>         
    <style name="ActivityTheme" parent="@android:style/Theme.Holo.Light.Dialog">      
    <item name="android:windowIsFloating">true</item>
    </style>
</resources> 
```

使用此主题的活动以对话框的形式打开，横向显示效果很好。但在纵向模式下，对话框垂直填充屏幕，看起来很傻。

如何设置这些对话框的最大高度？我已经尝试设置主题的 maxHeight 属性，`<item name="android:maxHeight">500dip</item>`但它似乎是指围绕活动内容的对话框容器，而不是活动内容本身。（即，如果我将 Activity 主题的高度设置为 500dip，对话框将获得一个非常大的对话框标题区域）

我还尝试设置活动布局 xml (RelativeLayout) 的大小，但我无法设置 maxHeight，我只能设置高度，但我无法在那里对高度进行硬编码，因为我将保存和取消按钮设置为`android:layout_alignParentBottom="true"`所以他们键盘弹起时可以留在键盘上方。（硬编码活动布局高度，防止保存/取消按钮留在键盘顶部）

谢谢，有谁知道如何设置最大对话框高度，最好是在主题级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:21:15.453

`Window`使用此方法为您的 Dialog 主题的活动修复高度。

```
public static void maxinumDialogWindowHeight(Window window) {
    WindowManager.LayoutParams layout = new WindowManager.LayoutParams();
    layout.copyFrom(window.getAttributes());
    layout.height = WindowManager.LayoutParams.FILL_PARENT;
    window.setAttributes(layout);
} 
```

并在之后使用它`setContentView()`（它会将 Window 布局重置为`wrap_content`）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.messages);
    if (getWindow().isFloating()) ViewHelper.maxinumDialogWindowHeight(getWindow());

    // rest of your code...
} 
```

# ssl - DMZ 服务器上的 ISAPI 过滤器 LDAP 身份验证错误

> ID：11092648
> 
> 赞同：1
> 
> 时间：2012-06-18T23:50:24.317
> 
> 标签：ssl, active-directory, ldap, isapi, dmz

我正在为我们在 DMZ 中运行的 Web 服务器编写 ISAPI 过滤器。此 ISAPI 过滤器需要连接到我们的内部域控制器以针对 Active Directory 进行身份验证。防火墙中有一条规则允许从 DMZ 服务器到我们的域控制器的 636 端口上的流量，并且防火墙显示流量可以正常通过。问题出在`ldap_connect()`功能上。`0x51 Server Down`尝试建立连接时出现错误。我们使用域控制器 IP 地址而不是 DNS 名称，因为 Web 服务器位于域之外。

ISAPI LDAP 连接代码：

```
// Set search criteria
strcpy(search, "(sAMAccountName=");
strcat(search, username);
strcat(search, ")");

// Set timeout
time.tv_sec = 30;
time.tv_usec = 30;

// Setup user authentication
AuthId.User = (unsigned char *) username;
AuthId.UserLength = strlen(username);
AuthId.Password = (unsigned char *) password;
AuthId.PasswordLength = strlen(password);
AuthId.Domain = (unsigned char *) domain;
AuthId.DomainLength = strlen(domain);
AuthId.Flags = SEC_WINNT_AUTH_IDENTITY_ANSI;

// Initialize LDAP connection
ldap = ldap_sslinit(servers, LDAP_SSL_PORT, 1);

if (ldap != NULL)
{
    // Set LDAP options
    ldap_set_option(ldap, LDAP_OPT_PROTOCOL_VERSION, (void *) &version);
    ldap_set_option(ldap, LDAP_OPT_SSL, LDAP_OPT_ON);

    // Make the connection
    //
    // FAILS HERE!
    //
    ldap_response = ldap_connect(ldap, &time);

    if (ldap_response == LDAP_SUCCESS)
    {
        // Bind to LDAP connection
        ldap_response = ldap_bind_s(ldap, (PCHAR) AuthId.User, (PCHAR) &AuthId, LDAP_AUTH_NTLM);
    }
}

// Unbind LDAP connection if LDAP is established
if (ldap != NULL)
    ldap_unbind(ldap);

// Return string
return valid_user; 
```

`servers = <DC IP Address>`

我已经在与 AD 位于同一域内的本地计算机上测试了此代码，并且它可以在 LDAP 和 LDAP over SSL 上运行。我们在域控制器上安装了来自 Active Directory 注册策略的服务器证书，但我在其他地方读到我可能还需要安装客户端证书（用于我们的 Web 服务器）。这是真的？

此外，我们有一个单独的 wordpress 站点运行在同一个 DMZ Web 服务器上，它通过 SSL 连接到 LDAP 就好了。它通过 PHP 使用 OpenLDAP 进行连接，并使用我们的域控制器的 IP 地址进行连接。我们有一个 ldap.conf 文件，其中包含一行代码：`TLS_REQCERT never`。有没有办法在 Visual C 中用我正在尝试为 ISAPI 过滤器做的事情来模仿这种效果？希望这是一个编程问题，而不是证书问题。如果这超出了编程范围，请让我知道或将我重定向到更好的地方发布此内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:10:30.160

通过将 CA 添加到 Web 服务器上的证书存储区解决了该问题。CA 以前从未被复制过。

# c++ - Xcode、代码块和终端中的简单 C++ 程序运行错误

> ID：11092653
> 
> 赞同：-2
> 
> 时间：2012-06-18T23:51:16.693
> 
> 标签：c++, math

我正在尝试编写一个简单的程序来使用欧拉方法计算数值近似值，而我使用的每个编译器都没有打印任何内容。Codeblocks 运行错误，但我认为这是因为编译器设置不正确。xCode 将构建它，但没有任何反应。当我运行 g++ Euler.cpp 时，我得到：

```
Euler.cpp:1: error: expected constructor, destructor, or type conversion before ‘&lt;’ token
Euler.cpp: In function ‘int main()’:
Euler.cpp:13: error: ‘cin’ was not declared in this scope
Euler.cpp:19: error: ‘cout’ was not declared in this scope
Euler.cpp:19: error: ‘endl’ was not declared in this scope 
```

我通常不会遇到简单的 C++ 程序的问题，并且担心这是非常明显的事情。

```
//
//  Euler.cpp
//  Numerical Approximations (Euler's Method)
//
//  Created by XXXXXXXXXXXX on 6/18/12.
//  Copyright (c) 2012 University of Kansas Department of Mathematics. All rights     reserved.
//

#include <iostream>
using namespace std;

int main ()
{

    int N=4;
    //cout<<"Number of steps (N):";
    //cin>>t;

    float h=0.1;
    //cout<<endl<<" Step size (h):";
    cin>>h;

    float y0=1;
    //cout<<endl<<"y(0)=";
    //cin>>y0;

    cout<<"test!"<<endl;

    float data[N][4];

    int n=0;

    data[0][2] = y0;

    while (n<N){
        data[n][0]=n;
        if(n>0){
             data[n][2]=data[n-1][3];
        }
        data[n][1]=h*n;
        data[n][3] = data[n][2] + ((3 + data[n][1] - data[n][2])*h);
        n++;
        cout<<"n="<<n<<". tn="<<data[n][1]<<". y(n)="<<data[n][2]<<". y(n+1)="<<data[n][3] <<"."<<endl;
    }

 return 0;
 } 
```

这可能是显而易见的，但我没有看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:55:11.940

它没有找到 iostream 标头。您是否看到类似“找不到标头 iostream”的错误消息？

# python - Python 线程调试

> ID：11092656
> 
> 赞同：0
> 
> 时间：2012-06-18T23:51:39.053
> 
> 标签：python, multithreading, debugging, pdb

我正在用 pdb 调试一个 python 程序。该程序将启动一个新线程。

```
newThread = Thread(group = None,target = dosomething,name = "thename",
                               args = (),kwargs = {})

def dosomething():
    balaba 
```

使用普通的 pdb 命令例如 -b 在新线程的行（例如 balaba 行）设置断点，似乎不会触发断点。

我想问的问题是：有没有办法可以闯入新线程目标函数来查看新线程的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:16:30.993

首先有一个问题，您必须通过使用显式启动线程`.start()`- 当您创建对象时它们不会自动启动`Thread`（假设您使用的是 Python 的内置线程库？）。

```
newThread.start() 
```

然后查看您的代码行是否使用您的调试方法触发。

# ios - 无间隙地播放一系列声音 (iPhone)

> ID：11092657
> 
> 赞同：0
> 
> 时间：2012-06-18T23:51:48.830
> 
> 标签：ios, cocoa-touch, audio

我想也许最快的方法是使用声音服务。它非常有效，但我需要按顺序播放声音，而不是重叠。因此，我使用回调方法来检查声音何时结束。这个周期产生大约 0.3 秒的延迟。我知道这听起来很严格，但它基本上是程序的主轴。

编辑：我现在尝试使用`AVAudioPlayer`，但我无法在不使用的情况下按顺序播放声音，`audioPlayerDidFinishPlaying`因为这会使我处于与 SoundServices 的回调方法相同的情况。

EDIT2：我认为如果我能以某种方式将我想要播放的声音部分加入一个大文件中，我可以让整个音频文件连续发声。

EDIT3：我认为这可行，但音频重叠：

```
waitTime = player.deviceCurrentTime;

    for (int k = 0; k < [colores count]; k++)
    {    
        player.currentTime = 0;
        [player playAtTime:waitTime];
        waitTime += player.duration;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:12:26.950

我刚刚尝试了一种我认为对你很有效的技术。建立一个连接你的声音的音频文件。然后构建一些关于你的声音的元数据，如下所示：

```
@property (strong, nonatomic) NSMutableDictionary *soundData;
@synthesize soundData=_soundData;

- (void)viewDidLoad {
    [super viewDidLoad];

    _soundData = [NSMutableDictionary dictionary];
    NSArray *sound = [NSArray arrayWithObjects:[NSNumber numberWithFloat:5.0], [NSNumber numberWithFloat:0.5], nil];
    [self.soundData setValue:sound forKey:@"soundA"];
    sound = [NSArray arrayWithObjects:[NSNumber numberWithFloat:6.0], [NSNumber numberWithFloat:0.5], nil];
    [self.soundData setValue:sound forKey:@"soundB"];
    sound = [NSArray arrayWithObjects:[NSNumber numberWithFloat:7.0], [NSNumber numberWithFloat:0.5], nil];
    [self.soundData setValue:sound forKey:@"soundC"];
} 
```

第一个数字是文件中声音的偏移量，第二个是持续时间。然后让你的播放器准备好像这样玩......

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audiofile.mp3", [[NSBundle mainBundle] resourcePath]]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = -1;

    if (audioPlayer == nil)
        NSLog(@"%@", [error description]);              
    else {
        [audioPlayer prepareToPlay];
    }
} 
```

然后你可以像这样构建一个低级的声音播放方法......

```
- (void)playSound:(NSString *)name withCompletion:(void (^)(void))completion {

    NSArray *sound = [self.soundData valueForKey:name];
    if (!sound) return;

    NSTimeInterval offset = [[sound objectAtIndex:0] floatValue];
    NSTimeInterval duration = [[sound objectAtIndex:1] floatValue];

    audioPlayer.currentTime = offset;
    [audioPlayer play];

    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, duration * NSEC_PER_SEC), dispatch_get_current_queue(), ^{
        [audioPlayer pause];
        completion();
    });
} 
```

你可以像这样快速组合播放声音......

```
- (IBAction)playAB:(id)sender {

    [self playSound:@"soundA" withCompletion:^{
        [self playSound:@"soundB" withCompletion:^{}];
    }];
} 
```

您可以构建一个更高级别的方法，而不是嵌套块，该方法采用声音名称列表并一个接一个地播放它们，如下所示：

```
- (void)playSoundList:(NSArray *)soundNames withCompletion:(void (^)(void))completion {

    if (![soundNames count]) return completion();

    NSString *firstSound = [soundNames objectAtIndex:0];
    NSRange remainingRange = NSMakeRange(1, [soundNames count]-1);
    NSArray *remainingSounds = [soundNames subarrayWithRange:remainingRange];

    [self playSound:firstSound withCompletion:^{
        [self playSoundList:remainingSounds withCompletion:completion];
    }];
} 
```

像这样称呼它...

```
NSArray *list = [NSArray arrayWithObjects:@"soundB", @"soundC", @"soundA", nil];
[self playSoundList:list withCompletion:^{ NSLog(@"done"); }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:05:28.207

我假设您有时想更改顺序或省略声音。（否则，您只需连续构建所有三个声音的资产并播放它）。

那里可能有一个更好的主意，但为了让事情变得非常紧凑，您可以考虑生成该串联资产，预加载它 - 将所有延迟移动到该负载，然后在它周围寻找以改变声音。

# arrays - 如何在 Perl 中序列化数组引用数组？

> ID：11092658
> 
> 赞同：4
> 
> 时间：2012-06-18T23:51:55.260
> 
> 标签：arrays, perl, serialization, multidimensional-array

Perl的数据序列化模块太多了，不知道选哪一个。

我需要将以下数据序列化为字符串，以便将其放入数据库中：

```
my @categories = (
    ["Education", "Higher Education", "Colleges"],
    ["Schooling", "Colleges"]
); 
```

我怎么能把它变成文本，然后当我需要它时，又变成一个数组引用数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:57:36.203

我投票支持 JSON（或`Data::Serializer`在另一个答案中提到，连同`JSON`）。

该`JSON`模块非常快速高效（如果您从 cpan 安装 JSON::XS，它将为您编译 C 版本，并`use JSON`自动使用它）。

它适用于 Perl 数据结构，是标准化的，并且 Javascript 语法与 Perl 语法非常相似。您可以使用`JSON`模块设置一些选项以提高人类可读性（换行符等）

我也用过`Storable`。我不喜欢它——界面很奇怪，输出也很荒谬，而且它是一种专有格式。`Data::Dumper`速度快且可读性强，但实际上是单向的（`eval`有点骇人听闻），再说一遍，它只是 Perl。我也推出了自己的。最后，我得出结论 JSON 是最好的，它快速、灵活且健壮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:56:50.793

您可以使用`Data::Serializer`：

*   [来自 OnPerl.net 的示例/信息](http://www.onperl.net/Serializing-and-Deserializing-using-Data-Serializer-pm)

*   [`Data::Serializer`CPAN 模块](http://search.cpan.org/~neely/Data-Serializer-0.59/lib/Data/Serializer.pm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T00:37:26.453

您可以自己滚动，但您必须担心一些棘手的问题，例如转义引号和反斜杠或您选择的分隔符。

下面的程序展示了如何使用标准 Perl 模块 Data::Dumper 和 Storable 以适合存储在数据库中的方式序列化和反序列化数据。

```
#! /usr/bin/env perl

use strict;
use warnings;

use Data::Dumper;
use Storable qw/ nfreeze thaw /;

use Test::More tests => 2;

my @categories = (
    ["Education", "Higher Education", "Colleges"],
    ["Schooling", "Colleges"]
);

{
  local $Data::Dumper::Indent = 0;
  local $Data::Dumper::Terse = 1;
  my $serialized = Dumper \@categories;
  print $serialized, "\n";
  my $restored = eval($serialized) || die "deserialization failed: $@";
  is_deeply $restored, \@categories;
}

{
  my $serialized = unpack "H*", nfreeze \@categories;
  print $serialized, "\n";
  my $restored = thaw pack "H*", $serialized;
  die "deserialization failed: $@" unless defined $restored;
  is_deeply $restored, \@categories;
} 
```

Data::Dumper 具有人类可读的良好特性，但需要`eval`反序列化的严重负面影响。Storable 很好，很紧凑，但不透明。

# delphi - 使用 Ant 为 Sonar 模块配置 build.xml 文件

> ID：11092659
> 
> 赞同：2
> 
> 时间：2012-06-18T23:51:57.490
> 
> 标签：delphi, ant, sonarqube

我正在建立一个 Sonar 项目（使用 delphi 插件），为简单起见，假设我要报告两个模块。

每个模块都在它自己的子文件夹中，并且每个模块都有它自己的 build.xml 文件。

此时我可以成功运行声纳任务并为每个模块生成报告作为一个独立的项目。

我的问题是配置“master” build.xml 文件。

模块 build.xml 文件如下所示：

```
<?xml version="1.0"?>
<project name = "CRM" default = "sonar" basedir = ".">
    <!-- Add the Sonar task -->
    <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
        <classpath path="c:/ANT/lib" />
    </taskdef>

    <target name="sonar">
        <property name="sonar.projectKey" value="EXO:CRM" />
        <property name="sonar.host.url" value="http://localhost:9000" />
        <sonar:sonar workDir="." key="CRM.key" version="0.1" xmlns:sonar="antlib:org.sonar.ant">
            <property key="sonar.sources" value="." />      <!-- project sources directories (required) -->
            <property key="sonar.language" value="delph" />                             <!-- project language -->
            <property key="sonar.delphi.codecoverage.excluded" value=".\tests" />           <!-- code coverage excluded directories -->
            <property key="sonar.importSources" value="true" />                         <!-- should we show sources or not? -->     
            <property key="sonar.delphi.sources.excluded" value="" />                       <!-- excluded directories -->
            <property key="sonar.delphi.sources.include" value=".\includes" />              <!-- include directories, "," separated -->
            <property key="sonar.delphi.sources.include.extend" value="true" />         <!-- should we extend includes in files? -->
        </sonar:sonar>
    </target>
</project> 
```

“主” build.xml 如下所示：

```
<?xml version="1.0"?>
<project name = "EXO" default = "sonar" basedir = ".">
    <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
        <classpath path="c:/ANT/lib" />
    </taskdef>

    <target name="sonar">
        <property name="sonar.modules" value="exonet6000/build.xml,CRM/build.xml" />
        <sonar:sonar workDir="." key="EXO.key" version="0.1" xmlns:sonar="antlib:org.sonar.ant">
            <!-- project sources directories (required) --> 
            <property key="sonar.sources" value="." />      
            <property key="sonar.language" value="delph" />
            <property key="sonar.importSources" value="true" /> 
            <property key="sonar.delphi.sources.excluded" value="" />                       
            <property key="sonar.delphi.sources.include" value=".\includes" />      
            <property key="sonar.delphi.sources.include.extend" value="true" />         
        </sonar:sonar>
    </target>
</project> 
```

它总是扫描所有来源（必需值），即它不尊重我的模块。我目前可以让它工作的唯一方法是像这样限制源代码

```
<property key="sonar.sources" value="./crm/,./exonet6000/" /> 
```

我确定我一定是在这里错误地配置了一些明显的东西。

编辑：我现在有我认为基于此处示例的更一致的文件集[https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/java/java-ant-modules](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/java/java-ant-modules)

主构建文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name = "EXO" default = "sonar" basedir = "." xmlns:sonar="antlib:org.sonar.ant">
    <echo>Root Project</echo>

    <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
        <classpath path="c:/ANT/lib" />
    </taskdef>

    <property name="sonar.host.url" value="http://localhost:9000" />
    <property name="sonar.modules" value="exonet6000/build.xml,CRM/build.xml" />

    <target name="sonar">
        <sonar:sonar key="EXO.key" version="0.1">   
        </sonar:sonar>
    </target>
</project> 
```

和子模块文件之一

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="CRM" default="all" basedir=".">
    <echo>CRM Module</echo>

    <property name="sonar.language" value="delph" />
    <property name="sonar.projectKey" value="EXO:CRM" />
    <property name="sonar.sources" value="." /> 

    <target name="all" />
</project> 
```

此时声纳过程已成功完成，但没有进行实际分析。关键是我没有看到子模块的回声，所以我怀疑这些构建任务实际上并没有运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:26:24.800

如果您使用 Ant 和 multimodules 查看[此示例项目](https://github.com/SonarSource/sonar-examples/blob/master/projects/languages/java/java-ant-modules/build.xml)，我会说您不应该在主 build.xml 文件的标记内指定任何属性，而让子模块指定这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:09:09.483

我有一个包含许多子模块的项目。我的声纳目标如下所示：

```
<target name="sonar" depends="build.dependencies" description="collect code metrics">
    <property name="m1" value="a/build.xml,b/build.xml,c/build.xml,d/build.xml"/>
    ... more properties defining modules...
    <property name="sonar.modules" value="${m1},${m2},${m3},${m4},${m5},${m6}..."/>
    <property name="sonar.projectName" value="MyProject"/>
    <sonar:sonar key="my:project" version="${version}" xmlns:sonar="antlib:org.sonar.ant">
    </sonar:sonar>
</target> 
```

sonar:sonar 任务中根本没有属性定义，它按我想要的方式工作。

源在子模块 build.xml 文件中定义。（实际上，在我们所有的 build.xml 文件都包含的 base-build.xml 中......但这是与 Sonar 没有直接关系的 Ant 事物。）

# ruby-on-rails - 在 Heroku 上将 bootstrap-sass 引导 CSS 投入生产

> ID：11092664
> 
> 赞同：0
> 
> 时间：2012-06-18T23:53:02.023
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass

我将 bootstrap-sass gem 与我的 rails (3.2.5) 应用程序一起使用，并且在我的本地开发环境中运行良好。但是当我在 Heroku 上部署到 prod 时，引导 CSS 不包含在编译的资产中。

我在我的 Gemfile 中添加了 bootstrap-sass 和 sass-rails：

```
gem 'bootstrap-sass', '2.0.3.1'

group :assets do
  gem 'sass-rails',   '3.2.4'
end 
```

我将 Bootstrap 的导入添加到我的资产目录中的 custom.css 文件中：

```
@import "bootstrap"; 
```

基本的东西。知道为什么这在 Prod 中不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T18:10:45.107

我遇到了完全相同的问题。这些是我为解决问题而采取的步骤：

1.  在“ *= require_tree ”上方添加“ *= require bootstrap”。在 application.css 中。

2.  然后我做了“捆绑安装——不生产”

3.  然后我运行“rake assets:precompile”

4.  然后我做了 git add 。

5.  然后我提交了更改 git commit -m "blah..."

6.  然后将更改推送到生产“git push heroku master”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:03:49.880

您必须在下一个文件中添加一个`bootstrap_and_overrides.css.scss`文件：`app/assets/stylesheets`

```
// Set the correct sprite paths
$iconSpritePath: asset-url('glyphicons-halflings.png', image);
$iconWhiteSpritePath: asset-url("glyphicons-halflings-white.png", image);

@import "bootstrap";
@import "bootstrap-responsive"; 
```

此外，您必须添加您的`application.js`：

```
//= require bootstrap 
```

问候！

# asp.net - xml 响应 http post - 将 request.inputstream 转换为字符串 - asp.net

> ID：11092666
> 
> 赞同：3
> 
> 时间：2012-06-18T23:53:03.000
> 
> 标签：asp.net, xml, xml-parsing, linq-to-xml

我收到一个 xml 响应，现在我想解析它。

目前我必须收到的 XML 响应是：

```
 Dim textReader = New IO.StreamReader(Request.InputStream)

    Request.InputStream.Seek(0, IO.SeekOrigin.Begin)
    textReader.DiscardBufferedData()

    Dim Xmlin = XDocument.Load(textReader) 
```

我现在如何继续处理并挑选元素值？

```
<subscription>
<reference>abc123</reference>
<status>active</status>
<customer>
    <fname>Joe</fname>
    <lname>bloggs</lname>
    <company>Bloggs inc</company>
    <phone>1234567890</phone>
    <email>joebloggs@hotmail.com</email>
 </customer>
 </subscription> 
```

如果我有字符串格式，我可以使用

```
 Dim xmlE As XElement = XElement.Parse(strXML) ' strXML is string version of XML

    Dim strRef As String = xmlE.Element("reference") 
```

我需要将 request.inputstream 转换为 strign 格式还是有其他更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:01:01.407

> 我需要将 request.inputstream 转换为 strign 格式还是有其他更好的方法？

您可以直接从请求流中加载它，无需将其转换为字符串：

```
Request.InputStream.Position = 0
Dim Xmlin = XDocument.Load(Request.InputStream)
Dim reference = Xmlin.Element("subscription").Element("reference").Value 
```

或者：

```
Dim reference = Xmlin.Descendants("reference").First().Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:50:22.070

最后经过大量测试，我只能让它工作：

```
 Dim textReader = New IO.StreamReader(Request.InputStream)

    Request.InputStream.Seek(0, IO.SeekOrigin.Begin)
    textReader.DiscardBufferedData()

    Dim Xmlin = XDocument.Load(textReader)

    Dim strXml As String = Xmlin.ToString

    Dim xmlE As XElement = XElement.Parse(strXml)
    Dim strRef As String = xmlE.Element("reference")
    Dim strStatus As String = xmlE.Element("status")
    Dim strFname As String = xmlE.Element("customer").Element("fname").Value()
    Dim strLname As String = xmlE.Element("customer").Element("lname").Value()
    Dim strCompany As String = xmlE.Element("customer").Element("company").Value()
    Dim strPhone As String = xmlE.Element("customer").Element("phone").Value()
    Dim strEmail As String = xmlE.Element("customer").Element("email").Value() 
```

# testing - 期望脚本中的通配符不起作用

> ID：11092667
> 
> 赞同：5
> 
> 时间：2012-06-18T23:54:10.440
> 
> 标签：testing, expect

我有以下脚本成功运行。但是，如果我尝试使用通配符来复制多个文件，则会引发错误，提示“没有这样的文件或目录”。

此代码有效：

```
#!/usr/bin/expect -f
spawn scp file1.txt root@192.168.1.156:/temp1/.
expect "password:"
send "iamroot\r"
expect "*\r"
expect "\r" 
```

以下不起作用：

```
#!/usr/bin/expect -f
spawn scp * root@192.168.1.156:/temp/. #fails here
…. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T08:14:23.400

通常`*`由 shell (bash) 扩展，但在这种情况下，你的 shell 是`expect`. 我怀疑`expect`是不是在扩展`*`.

尝试：

```
spawn bash -c 'scp * root@192.168.1.156:/temp/.' 
```

解释：

```
#!/usr/bin/expect -f
spawn echo *
expect "*"

spawn bash -c 'echo *'
expect "file1 file2…" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T00:04:24.617

AFAIK scp 默认为文件复制，而 bash 也可能将 * 扩展到目录，如果在当前路径中找到的话。

也许尝试`-r`（递归）可以解决您的问题（不确定，因为我现在无法测试场景）？

或者，如果您不想复制整个文件夹结构，您可以`scp *.txt ...`根据需要使用。

# bash - 从 tar.gz 中提取文件，无需接触磁盘

> ID：11092672
> 
> 赞同：5
> 
> 时间：2012-06-18T23:54:50.253
> 
> 标签：bash, tar

当前流程：

1.  我有一个`tar.gz`文件。（实际上，我有大约 2000 个，但那是另一回事了）。
2.  我创建一个临时目录，提取`tar.gz`文件，显示 100,000 个小文件（每个大约 600 字节）。
3.  对于每个文件，我将它放入一个处理程序中，将该循环通过管道传输到另一个分析程序中，然后保存结果。

我正在使用的机器上的临时空间几乎不能同时处理其中一个进程，更不用说它们默认发送的 16 个（超线程双四核）。我正在寻找一种方法来执行此过程而无需保存到磁盘。我相信单独拉取文件的性能损失`tar -xf $file -O <targetname>`会令人望而却步，但这可能是我所坚持的。

有没有办法做到这一点？

编辑：由于两个人已经犯了这个错误，我要澄清一下：

*   每个文件代表一个时间点。
*   每个文件都单独处理。
*   一旦处理（在这种情况下是傅里叶分析的变体），每个都给出一行输出。
*   这个输出可以结合起来做一些事情，比如跨时间的自相关。

EDIT2：实际代码：

```
for f in posns/*; do
    ~/data_analysis/intermediate_scattering_function < "$f"
done | ~/data_analysis/complex_autocorrelation.awk limit=1000 > inter_autocorr.txt 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T00:00:15.873

如果您不关心文件之间的边界，那么`tar --to-stdout -xf $file`将做您想做的事；它会将存档中每个文件的内容一个接一个地发送到标准输出。

这假设您使用的是 GNU tar，如果您使用的是 bash，这很有可能。

[更新]

鉴于您确实希望单独处理每个文件的限制，我同意 Charles Duffy 的观点，即 shell 脚本是错误的工具。

你可以试试他的 Python 建议，或者你可以试试[Archive::Tar Perl 模块](http://search.cpan.org/perldoc?Archive%3a%3aTar)。其中任何一个都允许您遍历内存中 tar 文件的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T00:03:54.783

这听起来像是工作的正确工具可能不是 shell 脚本的情况。Python 有一个`tarfile`可以在流模式下运行的模块，让您只需一次通过大型存档并处理其文件，同时仍然能够区分各个文件（该`tar --to-stdout`方法不会）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T21:35:18.483

您可以使用 tar 选项`--to-command=cmd`对每个文件执行命令。Tar 将文件内容重定向到命令的标准输入，并设置一些包含文件详细信息的环境变量，例如 TAR_FILENAME。[焦油文档](http://www.gnu.org/software/tar/manual/html_section/extract-options.html#SEC84)中的更多详细信息。

例如

```
tar zxf file.tar.gz --to-command='./process.sh' 
```

注意 OSX`bsdtar`默认使用，没有这个选项。`gnutar`您可以改为显式调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T00:06:26.030

您可以使用 ramdisk ( [http://www.vanemery.com/Linux/Ramdisk/ramdisk.html](http://www.vanemery.com/Linux/Ramdisk/ramdisk.html) ) 来处理和加载它。（我大胆假设您使用 Linux，但其他 UNIX 系统应该有相同类型的规定）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-11T09:11:06.703

```
tar zxvf <file.tar.gz> <path_to_extract> --to-command=cat 
```

上述命令将仅在 shell 上显示提取文件的内容。磁盘不会有任何变化。tar 命令应该是 GNU tar。

示例日志：

```
$ cat file_a
aaaa
$ cat file_b
bbbb
$ cat file_c
cccc
$ tar zcvf file.tar.gz file_a file_b file_c
file_a
file_b
file_c
$ cd temp
$ ls <== no files in directory
$ tar zxvf ../file.tar.gz file_b --to-command=cat
file_b
bbbb
$ tar zxvf ../file.tar.gz file_a --to-command=cat
file_a
aaaa
$ ls  <== Even after tar extract - no files in directory. So, no changes to disk
$ tar --version
tar (GNU tar) 1.25
...
$ 
```

# html - 将参数附加到 iframe 内的页面

> ID：11092674
> 
> 赞同：0
> 
> 时间：2012-06-18T23:54:52.247
> 
> 标签：html, iframe, parameters, wiki, purge

我正在制作一个类似机器人的小页面，它将用户重定向到某个页面和一个参数。

基本上：

1.  iframe 内的页面将用户重定向到我网站上的随机页面（已经完成）
2.  该脚本将 ?action=purge 附加到 iframe 内的页面
3.  脚本在 1 秒后刷新页面（已经完成）

我需要的部分是中间部分，我不知道该怎么做。我知道您可以使用元刷新来重定向，但是您如何做到这一点，以便 URL 读取 iframe 的 URL 加上`?action=purge"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:01:21.667

尝试这个：

```
var src1 = document.getElementById('id_of_the_iframe').getAttribute('src');
var src2 = src1 + '?action=purge';
document.getElementById('id_of_the_iframe').setAttribute('src',src2); 
```

如果这不起作用或不是您正在寻找的东西，那么我不知道。

**编辑：**

确保在页面加载后调用脚本，因为您无法更改页面中尚未加载到 DOM 中的内容。

# xcode - 界面生成器更改文本颜色错误？

> ID：11092685
> 
> 赞同：9
> 
> 时间：2012-06-18T23:56:57.583
> 
> 标签：xcode, interface-builder, xcode4.3

这让我很生气..

如果我在界面生成器中选择 UITextField 并通过手动输入 RGB 值来更改文本颜色，它会更改整个框架和背景的颜色。

但是，如果我使用滑块更改它，它只会像我想要的那样更改文本颜色。

让我认为这是一个错误……这是否发生在其他人身上？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T00:49:49.970

我在最新版本的 Xcode 中也看到了这种情况。当手动输入 RGB 值时，UILabel 属性检查器中的文本颜色和背景颜色控件同时更改，而如果我以其他方式选择颜色（例如，从颜色选择器中的蜡笔或调色板视图），只有文本颜色控制值的变化。

我认为这是一个错误（应该通过[http://bugreporter.apple.com](http://bugreporter.apple.com)提交），但它再次通过几个版本的 Xcode 持续存在，所以这*可能*是他们故意的预期行为。但我绝对同意你应该将它作为一个错误提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:39:49.090

绝对是个bug！一个临时解决方案是双击 UILabel 上的文本，即选择 UI 中的所有 UILabel 文本（故事板或 xib）。只有这样使用滑块才能更改文本颜色。希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T21:13:06.640

或者更改颜色，然后将背景颜色设置回透明。对我来说最快的解决方法。与 UILabel 相同的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-07T11:55:29.103

您可以尝试选择要更改颜色的文本，然后单击 T 打开字体窗口并从那里更改颜色。在 Xcode 11.2.1 上为我工作。

# xcode-instruments - Xcode>Instruments>Automation>Mac：有没有办法在 Instruments 的自动化中使用正则表达式

> ID：11092686
> 
> 赞同：0
> 
> 时间：2012-06-18T23:56:59.663
> 
> 标签：xcode-instruments

我对仪器>自动化完全陌生。尝试使用 Instruments 中的自动化测试内部应用程序。

这是我的问题：
我们的应用程序有动态生成的 UI 单元格。无法预测将创建多少个单元格以及它们将具有什么名称。但是，它们都将包含一个特定的字符串（如“课程”）。问题是 - 如何使用自动化找出特定单元格的名称中是否包含该字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:54:53.953

您只需使用“长度”属性即可获得总细胞数。

```
var cellsCount = <YourUIATableViewObject>.cells().length;
UIALogger.logMessage("total cells count = " + cellCount); 
```

之后，您将能够获取单元格属性并使用它们进行操作：

```
for (var i = 0; i < cellsCount; i ++)
{
     var cellValue = <YourUIATableViewObject>.cells()[i].value();
     var cellName = <YourUIATableViewObject>.cells()[i].name();
     UIALogger.logMessage("Cell #"+i+" properties: cellValue ="+cellValue+"; cellName ="+cellName);

     //Try to use match() or search() functions to find what you need.
     if ( cellName.search("Courses") != -1 )
     //if (cellValue.search("Courses") != -1 )
     {
          UIAlogger.logMessage("Cell #"+i+" contains 'Courses'");
     }
     else
     {
          UIAlogger.logMessage("Cell #"+i+" does not contain 'Courses'");
     }
} 
```

本[JavaScript 教程](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)将帮助您：

# ruby-on-rails - RVM gem 权限错误

> ID：11092690
> 
> 赞同：5
> 
> 时间：2012-06-18T23:57:41.920
> 
> 标签：ruby-on-rails, ruby, linux, rvm

我开始尝试设置本地 Rails 安装以进行开发。但是，在使用安装后`apt-get`，我了解了 RVM，所以我删除了早期的，并从 RVM 重新安装。不过，看起来我还有一些遗留问题。具体来说，当我尝试安装导轨时，我得到...

```
$ gem install rails
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /var/lib/gems/1.9.1 directory. 
```

这看起来已经是个问题了，因为我不希望它在 /var/ 目录中，我希望它在用户目录中。所以，我检查以下...

```
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.11
  - RUBY VERSION: 1.9.3 (2011-10-30 patchlevel 0) [x86_64-linux]
  - INSTALLATION DIRECTORY: /var/lib/gems/1.9.1
  - RUBY EXECUTABLE: /usr/bin/ruby1.9.1
  - EXECUTABLE DIRECTORY: /usr/local/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /var/lib/gems/1.9.1
     - /home/myusername/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

以及 sudo'd：

```
$ sudo gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.11
  - RUBY VERSION: 1.9.3 (2011-10-30 patchlevel 0) [x86_64-linux]
  - INSTALLATION DIRECTORY: /var/lib/gems/1.9.1
  - RUBY EXECUTABLE: /usr/bin/ruby1.9.1
  - EXECUTABLE DIRECTORY: /usr/local/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /var/lib/gems/1.9.1
     - /home/myusername/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

出于某种原因，宝石似乎存在于 /var/lib 中。这是正常的吗？我该如何解决这个问题，以便我可以安装 rails gem？

**编辑：更新！**

在我看来，我安装了两次 gem，一次在 /var/lib/gems/1.9.91（坏），一次在 /home/myusername/.gem/ruby/1.9.1（好）。

我认为这里发生的事情是，当我键入“gem”时，/var/lib/gems/1.9.1（坏）中的安装优先于 /home/myusername/.gem/ruby/1.9.1（好） . 谁能证实这一点？此外，是否可以只删除坏目录来修复问题，还是会导致问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T00:07:46.393

你错过了使用 ruby​​，你可以这样做：

```
rvm use 1.9.3 --install 
```

如果没有安装 1.9.3，这个命令也会安装它！

它还看起来你正在使用 Ubuntu，确保你没有使用 Ubuntu 包中的 RVM - 那东西坏了！您可以在此处找到如何修复它的说明：[https ://stackoverflow.com/a/9056395/497756](https://stackoverflow.com/a/9056395/497756)

# python - Python相对导入从随机目录调用脚本

> ID：11092693
> 
> 赞同：1
> 
> 时间：2012-06-18T23:58:02.993
> 
> 标签：python, import, pythonpath, relative-import

我有以下目录结构：

```
test1/
test1/a.py
test1/test2/b.py 
```

b.py 需要在 a.py 中导入一个类。所以我可以在导入 a.py 之前将以下行添加到 b.py 中。

sys.path.append(os.path.dirname(sys.argv[0]) + "/..")

这有效，我可以从任何目录调用 b.py 并且它能够导入 a。但是，当我在另一个目录中编写脚本以使用 execfile() 调用此文件时，这将失败。

我尝试了相对导入，但出现“尝试在非包中导入相对导入错误”

```
from ..a import someclass as cls 
```

我有`__init__.py`两个test1，test2

有人知道如何使它工作吗？是`PYTHONPATH`要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:04:11.393

问题是`execfile`它将评估您作为纯python代码调用的文件。内部的每个相对导入语句`b.py`（以及由它导入的任何包模块）都必须对您的调用脚本保持真实。

一种解决方案是不使用包中的任何相对导入路径。确保`test1`包也在你的 PYTHONPATH 上。

**b.py**

```
from test1 import a 
```

在`test1`您的 PYTHONPATH 中，导入`a`应该在您的`execfile`

```
>>> import sys
>>> sys.path.append('/path/to/parent/of_test1')
>>> execfile('/path/to/parent/of_test1/test1/test2/b.py') 
```

# c# - 从不同的类访问控件

> ID：11092696
> 
> 赞同：2
> 
> 时间：2012-06-18T23:59:12.587
> 
> 标签：c#, wpf, xaml

我需要从不同的类（例如名为 myTextBox 的文本框）访问 XAML 中的控件。这就是我所做的，但出现错误：

```
 Windows1 w = new Windows1();
   w.myTextBox.text = "Hello!"; 
```

但是，我收到一条错误消息：

**'设置属性'System.Windows.Controls.ContentControl.Content' 引发异常。**

粘性错误指向

```
<Grid Margin="10">
    <Grid.RowDefinitions> <!-- error points to this line -->
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions> 
```

请给我一些指导以找出原因或错误。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:08:53.230

其他事情正在发生，因为我能够让它在一个简单的应用程序中工作而无需做任何棘手的事情。那么你的场景中还有什么？您的“不同”类是否在后台线程中运行？如果是这样，您可能需要使用调度程序来访问 UI 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:29:50.570

看看这个：[https ://github.com/kaisellgren/Git-GUI/blob/master/Libraries/UIHelper.cs](https://github.com/kaisellgren/Git-GUI/blob/master/Libraries/UIHelper.cs)

它将在可视树中找到给定项目的子项。

用法：

```
var recentCommitMessages = UIHelper.FindChild<ComboBox>(this, "RecentCommitMessages"); 
```

在这里，它将在所有 ComboBox 元素中搜索一个 ID 为“RecentCommitMessages”的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:04:42.417

```
w.Dispatcher.Invoke(new Action(() => { w.myTextBox.text = "Hello!"; })); 
```

# c++ - 将标志整数转换为人类可读的字符串

> ID：11092697
> 
> 赞同：2
> 
> 时间：2012-06-18T23:59:37.433
> 
> 标签：c++, winapi, flags

在 Win32 中有很多地方使用 DWORD 值指定标志值，这些值是通过对 #defined 常量执行按位或来生成的。

但是，在运行程序和调试程序时，将生成的标志值拆回它们的#define 符号可能会变得很痛苦（这就是我喜欢枚举类型的原因）。

如果没有重新实现 Win32 的函数和结构以使用枚举而不是常量，是否有一种简单而轻松的方法可以自动将整数标志值转换回其组件的字符串表示形式？如将192转换为“FLAG_FOO | FLAG_BAR”（其中FLAG_FOO为128，FLAG_BAR为64）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:02:57.730

您必须手动对字符串进行编码。

```
 if (myValue & FLAG_FOO == FLAG_FOO) {
   printf("FLAG_FOO");
 }
 if (myValue & FLAG_BAR == FLAG_BAR) {
   printf("FLAB_BAR");
 } 
```

更重要的是，#define 符号不是由编译器而是由预处理器处理的。这意味着预处理器获取定义列表并将每个符号替换为其定义的值。编译器甚至没有原始符号的信息。

如果不是定义它是变量，并且程序是使用调试信息编译的，那么也许您可以使用调试信息来检索数据。即使在那种情况下，它也可能比一堆`if`s 更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-28T18:18:30.870

这是一个非常有用的网站，我使用 github 和 trinket 拼凑在一起：

[https://earonesty.github.io/decompose_hex.html](https://earonesty.github.io/decompose_hex.html)

给定一个输入数字，它会将数字分解为一组十六进制标志。我觉得它很有用（只需要几分钟就可以写出来，但我会一遍又一遍地写）。

给定数字 7 的示例，它将吐出 0x1、0x2、0x4

# ruby-on-rails - 检查用户是否通过 HTTP 与远程 AJAX？

> ID：11092698
> 
> 赞同：1
> 
> 时间：2012-06-18T23:59:57.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

控制器中是否有办法确定该人是通过 AJAX 调用还是通过 HTTP 远程执行操作？然后显然为每个人执行不同的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:01:39.017

是的：

```
request.xhr? 
```

`true`如果请求是 AJAX则返回，否则返回`false`。它相当于 call [`xml_http_request?`](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-xml_http_request-3F)，这是[记录在案的方法](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-xml_http_request-3F)。

# c# - TCP 连接停止工作

> ID：11092700
> 
> 赞同：1
> 
> 时间：2012-06-19T00:00:11.940
> 
> 标签：c#, tcp, irc

我正在研究 C# 中的 IRC 实现。我的工作基于 IRC.NET，并且我遇到了这个问题，并且不断出现。根据wireshark的说法，我的会话几乎与X-Chat相同，没有出现问题。有问题的问题是，在完美运行大约 10 分钟后，它突然停止工作。没有异常发生，但机器人无法发送消息并且从服务器看不到任何东西。我适当地回应 ping 等。过了一会儿，服务器（FreeNode）报告机器人已经 ping 通了，但客户端对此一无所知。

这是一个非常令人沮丧的错误，我不知道是什么原因造成的。

编辑：

以下是一些相关链接：

[我的工作所基于的图书馆](https://github.com/alexreg/ircdotnet)（我做了很少的更改）

大部分相关代码在[IrcClient.cs](https://github.com/alexreg/ircdotnet/blob/master/src/IrcDotNet/IrcClient.cs)

这是我针对该库工作的大部分代码：[链接](https://gist.github.com/c22b0f3f5e617c656784)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:09:07.113

您是否考虑过这可能是由于垃圾收集造成的？看看您是否可以确定您的`server`或`timer`对象是否被收集会很好

# meteor - 流星形态状态未保存

> ID：11092704
> 
> 赞同：2
> 
> 时间：2012-06-19T00:01:06.083
> 
> 标签：meteor

我在尝试制作反应形式时遇到问题。当我将数据插入一个集合时，另一个选择也会刷新。输入字段也会发生这种情况，当我更新其中一个绑定集合时，所有内容都会被清除。

这应该发生吗？

我的测试代码：

```
<template name="test">
  <form class="form-horizontal well" id="test-form">
    <select class="input-xlarge" name="item_id">
      {{#each types}}
        <option value="{{_id}}">{{name}}</option>
      {{/each}}
    </select>
    <select class="input-xlarge" name="category_id">
      {{#each categories}}
        <option value="{{_id}}">{{name}}</option>
      {{/each}}
    </select>
  </form>
</template> 
```

我的助手是：

```
Template.accounts.type = ->
  Types.find({}).fetch()

Template.accounts.categories = ->
  Categories.find({}).fetch() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T01:44:00.967

我认为这是 Meteor 现在的一个限制，希望它会在未来得到解决。

正如 irc 上所讨论的，一些绕过它的方法：

1.  将它们分成不同的模板
2.  将它们包装在一个调用`Meteor.ui.chunk`.
3.  使用会话变量来跟踪当前选择的状态。例如：

    ```
    Template.accounts.events = {
      'change #category_id': function() { 
         Session.set('selected_category_id', $(this).val());
      }
    } 
    ```

`Session.get('selected_category_id')`（以及如果不在`undefined`模板中，则最初选择值的代码）。

# javascript - 无法让我的变量将其值保留在 getJSON 之外

> ID：11092705
> 
> 赞同：2
> 
> 时间：2012-06-19T00:01:10.043
> 
> 标签：javascript, jquery, json

嗨我有这个代码的问题。我的问题是第一个`console.log(smile_per_sec)`给了我需要的值，但是第二个给了我在声明变量时给它的值。

```
 $.getJSON( 
    twitter_api_url + '?callback=?&rpp=100&q=text::)',
    function(data) {
      $.each(data.results, function(i, tweet) {
        //console.log(tweet);
        // Before we continue we check that we got data
        if(tweet.text !== undefined) {
        //here we save the time of our happy tweet
          var date_tweet = new Date(tweet.created_at);
          per_sec[i] = date_tweet/1000;
          //console.log(per_sec[i]);
        }
      });

      //here we calculate how manny happy tweets the world tweets per second
        smile_per_sec = 100/(per_sec[0]-per_sec[98])
        $('#tweet_container').append(smile_per_sec + "<br>");   
          console.log(smile_per_sec);
          return smile_per_sec;
    }
  );
console.log(smile_per_sec); 
```

这可能是一个简单的修复，但仍然非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:05:29.350

我假设您想在我在下面注明的两个地方进行比较：

```
$.getJSON( 
  twitter_api_url + '?callback=?&rpp=100&q=text::)',
  function(data) {
    $.each(data.results, function(i, tweet) {
      //console.log(tweet);
      // Before we continue we check that we got data
      if(tweet.text !== undefined) {
        //here we save the time of our happy tweet
        var date_tweet = new Date(tweet.created_at);
        per_sec[i] = date_tweet/1000;
        //console.log(per_sec[i]);
      }
    });
    //here we calculate how manny happy tweets the world tweets per second
    smile_per_sec = 100/(per_sec[0]-per_sec[98])
    $('#tweet_container').append(smile_per_sec + "<br>");   
    ///////////////////////////////////////////////
    //  this is place one
    ///////////////////////////////////////////////
    console.log(smile_per_sec);
    return smile_per_sec;
  }
);
///////////////////////////////////////////////
// this is place two
///////////////////////////////////////////////
console.log(smile_per_sec); 
```

放置两个立即执行，放置一个等待直到 getJSON 发生。这称为异步编程。在你得到它之前你不能使用这个值，如果你想要一些东西“等待另一件事完成”，你需要采用灵活的异步编程技术。

任何时候人们谈论 javascript 中的事件或回调，这就是他们在谈论的内容。在这种情况下，您的回调从`function(data)`第三行开始。

我觉得有必要详细说明，让我这样做：

```
$.getJSON( ... );
console.log(smile_per_sec); 
```

这两者有效地“同时”运作。getJSON 中发生的事情在完成之前一直被搁置，让您的页面继续做事。所以console.log 只是继续并弹出，但后面的燃烧器还没有回到前面，水还没有沸腾。因此，在水沸腾之前（可能是 10 毫秒，可能是 3 分钟），您不能对水或水中的面条或其他任何东西做任何事情。

我意识到一开始很难掌握，但是一旦你掌握了这个，你就会得到整个 ajax 的东西。

要回答“我如何让它完成后做所有事情”的问题，答案是像这样重组你的代码：

```
// Here we've made this a named function, and allowed the function to be more neatly encapsulated
function twitterCallback(data) {
  $.each(data.results, function(i, tweet) {
    //console.log(tweet);
    // Before we continue we check that we got data
    if(tweet.text !== undefined) {
      //here we save the time of our happy tweet
      var date_tweet = new Date(tweet.created_at);
      per_sec[i] = date_tweet/1000;
      //console.log(per_sec[i]);
    }
  });
  //here we calculate how manny happy tweets the world tweets per second
  smile_per_sec = 100/(per_sec[0]-per_sec[98])
  $('#tweet_container').append(smile_per_sec + "<br>");   

  console.log(smile_per_sec);
  return smile_per_sec;

  ///////////////////////////////////////////////
  //  this is where you put stuff that has to wait on twitter to return
  ///////////////////////////////////////////////

}

$.getJSON( 
  twitter_api_url + '?callback=?&rpp=100&q=text::)',
  twitterCallback
); 
```

# javascript - 有没有办法从改变 Object.prototype.hasOwnProperty 的人那里恢复？

> ID：11092707
> 
> 赞同：4
> 
> 时间：2012-06-19T00:01:11.763
> 
> 标签：javascript, prototype, hasownproperty

你总是读到 for-in 循环应该检查`o.hasOwnProperty(k)`跳过 Object.prototype。好吧，如果有人愚蠢到修改 Object.prototype，谁能说他们不会做任何与现有原型冲突的事情？例如，如果有人运行这个怎么办：

```
Object.prototype.hasOwnProperty = function () {
    return !!'I am stupid';
}; 
```

**如果这是第一个脚本运行**，这是否意味着对于页面其余部分的每个脚本，实际上不可能安全地迭代对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:45:44.670

您可以创建一个临时 IFRAME 元素，并从其`Object.prototype`对象中检索该方法：

```
(function () {
    var frame = document.createElement( 'iframe' );
    frame.style.display = 'none';
    document.body.appendChild( frame );
    Object.prototype.hasOwnProperty = frame.contentWindow.Object.prototype.hasOwnProperty;
    document.body.removeChild( frame );
}()); 
```

**现场演示：http:** [//jsfiddle.net/ARycC/2/](http://jsfiddle.net/ARycC/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T00:29:50.290

```
function secret(){
    var HOP = Object.prototype.hasOwnProperty;
    this.getHOP = function(){
        return HOP;
    }
}

new secret().getHOP(); //Will now be the copy of hasOwnProperty
                       //and nobody can modify it

//stupid script:
Object.prototype.hasOwnProperty = function () {
    return !!'I am stupid';
};

//restore
Object.prototype.hasOwnProperty = new secret().getHOP();  //DONE. 
```

* * *

## 更新

~~如果在加载每个脚本之前对其进行了修改，那么您可以这样做：~~

```
Object.prototype.hasOwnProperty = String.prototype.hasOwnProperty 
```

~~他们是一样的。`:D`还有*更多内容*可供您复制：~~

*   `Boolean.prototype.hasOwnProperty`
*   `Number.prototype.hasOwnProperty`
*   `Function.prototype.hasOwnProperty`
*   ETC...

* * *

## 更新 2

恢复原始功能的新方法：

```
var win=window.open("about:blank");
win.close();
Object.prototype.hasOwnProperty = win.Object.prototype.hasOwnProperty; 
```

有点骇人听闻。或者您可以创建一个隐藏的`<iframe>`.

```
var win = document.createElement("iframe");
win.style.display = "none";
document.body.appendChild(win);
Object.prototype.hasOwnProperty = win.contentWindow.Object.prototype.hasOwnProperty;
document.body.removeChild(win); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T00:17:18.290

如果有人覆盖它，唯一不会丢失它的方法是让您在有人覆盖它之前保留自己的参考。

因此，在包含任何其他脚本之前，请包含以下脚本

```
var hasOwnProp = Object.prototype.hasOwnProperty; 
```

并`hasOwnProp`在其他任何地方使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T00:52:08.567

对我来说，这不是问题。您在帖子和评论中声明：

*   这是假设的
*   这是基于“某人”可以修改您的脚本的事实，而您对此无能为力。
*   您对任何涉及控制脚本加载顺序的解决方案都不满意。

为什么不？你不是开发者吗？如果“某人”确实修改`Object.prototype.hasOwnProperty`了，解决方案非常简单：从您的页面中删除有问题的脚本！并不是有人闯入了你的代码并这样做了，而是你链接到了某人写得不好的脚本。

PS：如果这不是您问题的实际答案，我很抱歉，但评论太长了。

# c# - 在一个解决方案中调用来自不同项目的方法

> ID：11092708
> 
> 赞同：19
> 
> 时间：2012-06-19T00:01:20.483
> 
> 标签：c#, linq, visual-studio-2010

1 个解决方案中有 3 个项目。我从第一个项目的主文件中进行的主要操作。但是我需要调用方法并使用第三个项目中的类。例如：

– 第三个项目有：

```
public DataClasses1DataContext() :     base(global::WindowsFormsApplication1.Properties.Settings.Default.mediaBorshchConnectionString, mappingSource)
 { OnCreated(); } 
```

从我的第一个项目中调用它的正确方法是什么？

```
DataClasses1DataContext borshch = new DataClasses1DataContext() 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-19T00:05:28.737

您需要在第一个项目中添加对第三个项目的引用。为此，请右键单击您的项目，选择“添加引用”，然后在您的解决方案中选择该项目。一旦你的主项目引用了第三个项目，你就可以访问它的公共类型。

# php - 我的代码每个都应该是 $age 变量的值，而是与“年龄”这个词相呼应？

> ID：11092709
> 
> 赞同：1
> 
> 时间：2012-06-19T00:01:20.753
> 
> 标签：php, mysql

这是我正在使用的代码：

```
<?php
// Set the MySQL Configuration
$db_host       = "";
$db_user       = "";
$db_password   = "";
$db_name       = "";
$db_table      = "";

// Start Connection
$db_connect        =  mysql_connect ($db_host, $db_user, $db_password);

// Select Database
$db_select        =  mysql_select_db ($db_name, $db_connect);

// Update Values in Database

$query         = "UPDATE $db_table SET

    age  =  age + 1,

    land = '".$_POST['data3']."'

    WHERE name = '".$_POST['data1']."'

    ";

// Execution MySQL query        
$result =  mysql_query($query) or die(mysql_error($db_connect));

//Close MySQL connection
mysql_close($db_connect);

//HTTP Response
echo " your age: age";

?> 
```

我想回显`$age`变量的值，但我总是得到“年龄”这个词。例如，代码应该回显`your age: 5`，而是输出`your age: age`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:06:41.527

首先，您需要运行`SELECT`查询来检索`age`. 查询应如下所示：

```
"SELECT age FROM db_table_name WHERE name = ?" 
```

一旦您获得了该查询的结果，使用 say `PDO::fetch`（请参阅下面关于 PDO 的注释）并将其设置为变量`$age`，您可以使用 echo 语句输出它：

```
echo "Your age: $age"; 
```

另外，请不要将`mysql_*`函数用于新代码。它们不再被维护，社区已经开始[弃用过程](http://news.php.net/php.internals/53799)（见[红框](http://uk.php.net/manual/en/function.mysql-connect.php)）。相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)会帮助你。如果您想学习，[这是一个很好的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

我没有给你确切的代码的原因是因为它根本不应该用`mysql_*`函数来*完成*。`$_POST`像这样直接使用数据创建 SQL 查询是*非常危险的代码，并且是一个非常糟糕的主意。永远不要这样做。*您向无数 SQL 注入攻击敞开大门。即使使用`mysql_real_escape_string`也不够。您应该使用准备好的语句。

更新：这是一个简单的例子，它接近你的要求，但使用 PDO 和准备好的语句。这绝不是一个全面的例子，因为有几种改变它的方法仍然有效（例如，准备好的语句允许您在一个语句中在服务器上执行多个语句），而且我没有工作服务器测试的时刻，以确保它*正是*你所需要的，但我希望它能够得到理解。

```
<?php

// Create the database connection
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');

// Set PDO/MySQL to use real prepared statements instead of emulating them
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

// The UPDATE query we're going to use
$update_query = "UPDATE `db_table_name` SET age = age + 1, land = :land WHERE name = :name";

// Prepare the query
$stmt = $db->prepare($update_query);

// Bind variables to the named parameters in the query with their values from $_POST
$land = $_POST['data3'];
$name = $_POST['data1']
$stmt->bindParam(':land', $land);
$stmt->bindParam(':name', $name);

// Execute the statement on the server
$stmt->execute();

// The SELECT query we're going to use
$select_query = "SELECT age FROM `db_table_name` WHERE name = :name";

// Again, prepare the query
$stmt_select = $db->prepare($select_query);

// Bind the paramters (in this case only one) to the new statement
// $name is already set from before, so there is no need to set it again
$stmt_select->bindParam(":name", $name);

$stmt_select->execute();

/*
 * With no arguments, PDO::fetchColumn() returns the first column
 * in the current row of the result set. Otherwise, fetchColumn()
 * takes a 0-indexed number of the column you wish to retrieve
 * from the row.
*/
$age = $stmt_select->fetchColumn();

echo("Your age: $age");
?> 
```

所有这些信息都直接来自关于[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)和[PDO::fetchColumn()](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)的 PHP 文档。

# php - 为什么 Symfony2 在登录时会替换 PHPSESSID？

> ID：11092716
> 
> 赞同：4
> 
> 时间：2012-06-19T00:01:42.590
> 
> 标签：php, http, symfony

当我登录时，我的 Symfony2 应用程序替换了我的`PHPSESSID`cookie。这是预期的行为吗？这对我来说毫无意义......为什么不保持不变`PHPSESSID`？

这里有更多细节。

要登录我的应用程序，我*必须*首先向访问我的应用程序的 URL 发出请求：

```
$ telnet myapp 80
GET / HTTP/1.1
Host: myapp 
```

我被重定向到另一个 URL ( `/login`) 并获得了一个`PHPSESSID`cookie。美好的。然后我`POST`到类似的`/login_check`东西`_username=blah&_password=blah`，无论我是否提供正确的凭据，我都会收到一个不同的`PHPSESSID`cookie。

似乎大多数东西都适用于第一个请求，但我必须提出*一些*`POST`请求（我不能只是`/login_check`登录）。这是预期的行为吗？

不确定这是否重要，但我正在使用 FOSUserBundle。

我想我应该提到这些都不重要，直到我将我的应用程序放在负载均衡器后面的两个网络服务器上，并告诉负载均衡器使用基于`PHPSESSID`. 正如您可能想象的那样，`PHPSESSID`如果客户端碰巧反弹到另一个 Web 服务器，则替换行为会阻止登录工作。

可能重复：[Symfony2：清除 cookie 后首次尝试登录不起作用](https://stackoverflow.com/questions/10121769/symfony2-login-does-not-work-on-first-try-after-clearing-cookies)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T00:08:21.770

这是为了防止[会话固定](http://en.wikipedia.org/wiki/Session_fixation)。我会建议另一个cookie，然后是会话一个用于负载平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:06:14.140

这可能是一个错误。对于 symfony2.0，如果您尝试从会话中读取某些内容，甚至尝试在未调用 SessionListener 时获取会话标识符，您会注意到新会话是使用另一个 PHPSESSID 启动的。

这也可能与语言环境支持有关，这是我的问题：[https ://github.com/symfony/symfony/issues/3662](https://github.com/symfony/symfony/issues/3662)

# cakephp - CAKEPHP：过滤问题

> ID：11092721
> 
> 赞同：1
> 
> 时间：2012-06-19T00:02:20.107
> 
> 标签：cakephp, filter

[http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/clients](http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/clients)

问题：[http ://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/timesheets/filter2/7](http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/timesheets/filter2/7)

这必须是小写变量或其他东西的问题，但我无法弄清楚。Filter2.ctp IDnameHoursclients编辑

```
<? foreach($Timesheets as $row): ?>
     <tr><td>
<?=$row['Timesheet']['id']?>
</td><td>
<?=$row['Timesheet']['hours']?>
</td><td>
<a href="../../clients/view/<?=$row['client']['name']?>"><?=$row['client]['name']?></a>
</td><td>
<a href="edit/<?=$row['Timesheet']['id']?>">Edit</a>
    </td></tr>
<? endforeach; ?>
</table> 
```

时间表控制器过滤器2

```
function filter2($Client_id) {
        $this->set('Timesheets',$this->Timesheet->findAllByClientId($Client_id));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:54:17.757

在这一行

```
<a href="../../clients/view/<?=$row['client']['name']?>"><?=$row['client]['name']?></a> 
```

您缺少一个`'`. 这会产生语法错误。您可能还需要大写`'Client'`索引以获得所需的结果，因为它是模型的名称。`view`中的操作也可能`ClientsController`需要一个 id。您可以将其更改为：

```
<a href="../../clients/view/<?=$row['Client']['id']?>"><?=$row['Client']['name']?></a> 
```

但是，我建议不要像这样对 url 进行硬编码，而是让 Cake 像这样生成链接：

```
<?= $this->Html->link($row['Client']['name'], array('controller' => 'clients', 'action' => 'view', $row['Client']['id']) ?> 
```

请参阅[有关帮助程序的文档](http://book.cakephp.org/2.0/en/views/helpers.html)以及[HtmlHelper API](http://api20.cakephp.org/class/html-helper)。

# android - 即使 onUpdate 方法有效，应用小部件也不会更新 textview

> ID：11092723
> 
> 赞同：2
> 
> 时间：2012-06-19T00:02:56.690
> 
> 标签：android, android-widget

我的问题是我有一个应用小部件，需要每 32 分钟更新一次。但是，它不会更新文本视图。我将日志条目放在我的 onUpdate 方法中，以查看它是否在 Logcat 上工作，并且我确认方法工作正常，但它没有改变 textview 的值。这是我的代码；应用小部件提供者：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub

    ComponentName thisWidget=new ComponentName(context, 
            IzUlasimProvider.class);
    int[] allWidgetIds=appWidgetManager.getAppWidgetIds(thisWidget);

    for(int id:allWidgetIds){
        String now=new SimpleDateFormat("HH:mm").format(new Date());

        RemoteViews views=new RemoteViews(context.getPackageName(), R.layout.widget);
        views.setTextViewText(R.id.tvWidget,now);

        appWidgetManager.updateAppWidget(id, views);
        now=null;
    }
    Log.w("Update","Update Finished");
} 
```

我的配置文件：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" 
android:initialLayout="@layout/widget" 
android:minHeight="110dp" 
android:updatePeriodMillis="1920000" 
android:minWidth="250dp" android:configure="com.izulasim.widget.IzWidgetConfig"> 
```

小部件的 AndroidManifest 部分：

```
<receiver android:name="com.izulasim.widget.IzWidgetProvider">
        <intent-filter >
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data android:name="android.appwidget.provider"
            android:resource="@xml/widget_config" />
    </receiver>
    <activity
        android:name="com.izulasim.widget.IzWidgetConfig"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
        </intent-filter>
    </activity>
    <provider android:name=".IzUlasimProvider" 
        android:authorities="com.izulasim.provider.IzUlasim" /> 
```

# java - 如何读取大文件中的第二列

> ID：11092733
> 
> 赞同：6
> 
> 时间：2012-06-19T00:04:38.170
> 
> 标签：java, file

我有一个包含数百万列的巨大文件，按空间分割，但它只有有限的行数：

示例.txt：

```
1 2 3 4 5 ........
3 1 2 3 5 .........
l 6 3 2 2 ........ 
```

现在，我只想阅读第二列：

```
2
1
6 
```

我如何在高性能的 java 中做到这一点。

谢谢

更新：该文件通常为 1.4G，包含数百行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:18:02.010

如果您的文件不是静态结构的，那么您唯一的选择是天真的选择：逐个字节序列地读取文件字节序列以查找换行符并在每个换行符之后获取第二列。使用[`FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html).

如果您的文件是静态结构的，您可以计算文件中第二列对于给定行的位置并`seek()`直接指向它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:41:38.710

这是一个小状态机，它使用 a`FileInputStream`作为输入并处理自己的缓冲。没有语言环境转换。

在我使用 7 年、内存为 1/2 Gb 的 1.4 GHz 笔记本电脑上，处理 12.8 亿字节的数据需要 48 秒。大于 4Kb 的缓冲区似乎运行速度较慢。

在使用 1 年的 4Gb 新 MacBook 上运行时间为 14 秒。文件进入缓存后，它会在 2.7 秒内运行。同样，缓冲区大于 4Kb 也没有区别。这是同一个 12 亿字节的数据文件。

我希望内存映射 IO 会做得更好，但这可能更便携。

它会获取您告诉它的任何列。

```
import java.io.*;
import java.util.Random;

public class Test {

public static class ColumnReader {

    private final InputStream is;
    private final int colIndex;
    private final byte [] buf;
    private int nBytes = 0;
    private int colVal = -1;
    private int bufPos = 0;

    public ColumnReader(InputStream is, int colIndex, int bufSize) {
        this.is = is;
        this.colIndex = colIndex;
        this.buf = new byte [bufSize];
    }

    /**
     * States for a tiny DFA to recognize columns.
     */
    private static final int START = 0;
    private static final int IN_ANY_COL = 1;
    private static final int IN_THE_COL = 2;
    private static final int WASTE_REST = 3;

    /**
     * Return value of colIndex'th column or -1 if none is found. 
     * 
     * @return value of column or -1 if none found.
     */
    public int getNext() {
        colVal = -1;
        bufPos = parseLine(bufPos);
        return colVal;
    }

    /**
     * If getNext() returns -1, this can be used to check if
     * we're at the end of file.
     * 
     * Otherwise the column did not exist.
     * 
     * @return end of file indication 
     */
    public boolean atEoF() {
        return nBytes == -1;
    }

    /**
     * Parse a line.  
     * The buffer is automatically refilled if p reaches the end.
     * This uses a standard DFA pattern.
     *
     * @param p position of line start in buffer
     * @return position of next unread character in buffer
     */
    private int parseLine(int p) {
        colVal = -1;
        int iCol = -1;
        int state = START;
        for (;;) {
            if (p == nBytes) {
                try {
                    nBytes = is.read(buf);
                } catch (IOException ex) {
                    nBytes = -1;
                }
                if (nBytes == -1) {
                    return -1;
                } 
                p = 0;
            }
            byte ch = buf[p++];
            if (ch == '\n') {
                return p;
            }
            switch (state) {
                case START:
                    if ('0' <= ch && ch <= '9') {
                        if (++iCol == colIndex) {
                            state = IN_THE_COL;
                            colVal = ch - '0';
                        } 
                        else { 
                            state = IN_ANY_COL;
                        }
                    }
                    break;

                case IN_THE_COL:
                    if ('0' <= ch && ch <= '9') {
                        colVal = 10 * colVal + (ch - '0');
                    }
                    else {
                        state = WASTE_REST;
                    }
                    break;

                case IN_ANY_COL:
                    if (ch < '0' || ch > '9') {
                        state = START;
                    }
                    break;

                case WASTE_REST:
                    break;
            }
        }
    }
}

public static void main(String[] args) {
    final String fn = "data.txt";
    if (args.length > 0 && args[0].equals("--create-data")) {
        PrintWriter pw;
        try {
            pw = new PrintWriter(fn);
        } catch (FileNotFoundException ex) {
            System.err.println(ex.getMessage());
            return;
        }
        Random gen = new Random();
        for (int row = 0; row < 100; row++) {
            int rowLen = 4 * 1024 * 1024 + gen.nextInt(10000);
            for (int col = 0; col < rowLen; col++) {
                pw.print(gen.nextInt(32));
                pw.print((col < rowLen - 1) ? ' ' : '\n');
            }
        }
        pw.close();
    }

    FileInputStream fis;
    try {
        fis = new FileInputStream(fn);
    } catch (FileNotFoundException ex) {
        System.err.println(ex.getMessage());
        return;
    }
    ColumnReader cr = new ColumnReader(fis, 1, 4 * 1024);
    int val;
    long start = System.currentTimeMillis();
    while ((val = cr.getNext()) != -1) {
        System.out.print('.');
    }
    long stop = System.currentTimeMillis();
    System.out.println("\nelapsed = " + (stop - start) / 1000.0);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:37:55.817

我必须同意@gene，首先尝试使用 BufferedReader 和 getLine，它简单且易于编码。请注意不要在 getLine 的结果和您使用的任何子字符串操作之间为支持数组起别名。String.substring() 是一个特别常见的罪魁祸首，我已经将多 MB 字节数组锁定在内存中，因为 3 字符子字符串正在引用它。

假设 ASCII，我这样做时的偏好是下降到字节级别。使用 mmap 以 a 形式查看文件`ByteBuffer`，然后对 0x20 和 0x0A 进行线性扫描（假设为 unix 样式的行分隔符）。然后将相关字节转换为字符串。如果您使用的是 8 位字符集，则很难比这更快。

如果您使用的是 Unicode，那么问题会更加复杂，我强烈建议您使用`BufferedReader`，除非该性能确实无法接受。如果`getLine()`不起作用，则考虑仅循环调用`read()`.

无论如何，在从外部字节流初始化字符串时，您应该始终指定字符集。这明确记录了您的字符集假设。所以我建议对基因的建议做一个小的修改，所以其中之一：

```
int i = Integer.parseInt(new String(buffer, start, length, "US-ASCII"));

int i = Integer.parseInt(new String(buffer, start, length, "ISO-8859-1"));

int i = Integer.parseInt(new String(buffer, start, length, "UTF-8")); 
```

作为适当的。

# c# - 遍历对象数组；foreach(var... vs. foreach(object

> ID：11092735
> 
> 赞同：2
> 
> 时间：2012-06-19T00:04:53.540
> 
> 标签：c#, arrays, object, foreach

```
object[] objArray = new object[]{"blah", 4, "whatever"};

foreach(var value in objArray) vs. foreach(object value in objArray) 
```

我很好奇它们之间的区别是什么，除了 var 在分配后必须保持其类型。这个比那个好吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:17:25.250

从纯粹的功能角度来看，`var`这只是`object`这里的一个捷径，因为`objArray`'s 元素是声明类型的`object`。

对于正在阅读代码的人来说，使用`object`是一个信号，表明数组中的项目不知道是比 . 更具体的任何类型`object`。的使用`var`并不意味着这一点。在您发布的最小情况下，它对您使用的程序的清晰度没有任何影响。

另一方面，如果从上下文中不能立即清楚您正在使用什么类型的对象，那么显式声明该类型可能是有利的。另一方面，如果您正在迭代的集合元素的类型是冗长且突兀的，那么使用 可能是有利的`var`，这样读者的眼睛就会被代码的逻辑所吸引，而不是一团糟泛型参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:08:56.933

与任何其他类型的唯一区别`var`是您让编译器确定类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T00:09:10.047

在这种情况下，这`var`两者之间没有区别 。`object`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T00:22:49.963

在你的例子中没有。但，

声明时`objects`你得到： [装箱和拆箱](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)

然而。使用 var 时，它的编译方式与您指定了确切的类型名称一样。

所以`var tempval = 5;`是一样的`int tempval = 5;`

# javascript - window.onpopstate, event.state == null？

> ID：11092736
> 
> 赞同：46
> 
> 时间：2012-06-19T00:04:55.880
> 
> 标签：javascript, html, dom-events

我已经阅读了有关 Stack Overflow 的几个问题/答案，并在 Google 上搜索了这个问题，`event.state`但除了`null`.

我知道它不适用于 jQuery 事件，但是当我做这样的事情时：

```
window.onpopstate = function (e) {
     console.log(e.state)
} 
```

使用类似于 jQuery.ajax 成功调用的方式

```
history.pushState({ lastUrl: data.State }, data.Title, data.UrlKey); 
```

Chrome (v19) 或 Firefox (v12) 都不返回空值？我错过了什么吗？它只是没有完全实施吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-07T10:55:36.810

`e.state`指被推送的倒数第二个状态。您需要至少两次推送状态`e.state`才能不是`null`。这是因为您应该在您的网站第一次加载时保存状态，然后每次更改状态时保存。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-03T18:48:04.277

我认为这个问题需要更清楚的解释，因为其他答案中的“倒数第二个状态”这句话可能会导致混淆。

当我们执行 history.pushState 时，我们正在将一个新状态推入历史堆栈，它成为当前状态（正如我们从导航栏 url 中看到的那样。）

window.onpopstate 事件意味着顶部历史状态正在被弹出（从堆栈中取出），因此 e.state 现在将指向堆栈中新的新顶部状态（因为导航栏将指向上一个网址）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-26T02:23:03.483

我在同一个问题上挣扎了好几个小时。太多小时了。onpopstate -handler 的状态参数为空，即使我在单击后退按钮之前已多次调用 pushState()。

我还观察到我的 onclick-handler 调用 pushState() 导致 onpopstate -handler 被触发。我相信 onpopstate -handler 只有在用户点击我在网上阅读的后退按钮时才会被调用。但就我而言，情况似乎并非如此。

浏览器可能有错误吗？似乎不太可能，因为我在 Chrome 和 FireFox 上都有相同或类似的问题。但有可能。或者也许有一个“规范中的错误”太复杂而无法正确实施。没有公开的单元测试显示这应该如何工作。

最后我找到了一个解决方案，之后一切都开始工作了。是将这两个调用放入我的 onload-handler 中：

```
pushState (myInitialState, null, href);
pushState (myInitialState, null, href); 
```

所以我必须在 onload-handler 中进行相同的 push-state() 调用 TWICE！之后，我的 onpopstate -handler 开始获取状态不是 null 的参数，而是我之前作为参数传递给 pushState() 的状态。

我真的不明白为什么它现在可以工作，为什么当我只调用一次 pushState 时它不能更早。

我想了解为什么它现在可以工作，但我已经花了太多时间让它工作。如果有人在网上有很好的示例代码的参考，这将是很好的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-21T09:07:41.437

如果您曾经了解过撤消/重做堆栈，将会很有帮助，如下图所示。

[![在此处输入图像描述](../Images/f81fc522ca3a5a0d67f80c01cfb7722b.png)](https://i.stack.imgur.com/GEmHt.png)

事实上，历史是这样保存在堆栈中的。您当前的状态来自当前堆栈项，假设有一个指向它的指针；当您调用 时`history.back()`，指针指向堆栈的较旧项，`onpopstate`事件的状态与`history.state`顺便说一句相同。您将只获得指针当前指向的项目，由 修改`history.replaceState`或添加`history.pushState`。

这个过程也解释了为什么`history.length`不改变，因为它代表了整个堆栈的长度。当您调用`history.go(1)`时，指针会移回较新的项目。

当指针在栈的中间位置时，调用`history.pushState`会导致指针上面的所有项都弹出，并新增一项，也可以看到`history'length`变化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-09T13:06:50.603

`history.state`与当前页面相关联，因此可以`forward`和`back`。要获取第一个历史的状态，您可以使用`history.replaceState`放置在第一个历史的状态。

```
window.history.replaceState(currentState, document.title) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-05T20:44:11.973

哇，这里的所有答案都令人困惑。

*   您需要推送或替换初始状态。
*   popstate 不会给你倒数第二个状态，而是最后一个状态。
*   当然不需要两次推送初始状态。

我认为每个人都感到困惑的是，`event.state`它将保留您在调用中设置为第一个 ( `data`) 参数的任何值`history.pushState()`。如果您将其设置为`null`，那么您肯定`event.state`也会为空。

# 为什么不需要推送初始状态？

初始状态就在您的事件中，只是没有`data`设置，`event.state`所以`null`. 您正在寻找重定向回初始页面的内容只是`document.location`（因为在 时`popstate`，我们已经在该位置）。

如果您想要完全控制，最好用一些有意义的`data`集合替换初始状态，这样您就可以确定它是您期望的状态，而无需比较文档 url。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-17T19:05:11.347

正如 Jaco Briers 所提到的，为了`popstate`按照我们认为应该工作的方式工作，我们需要首先存储初始状态，以便在您单击浏览器的后退按钮时返回。这是一个使用 jQuery 的示例实现：

**示例代码**

```
$(window).on({
  // Store initial state
  'load': function() {
    window.history.pushState({
      'html': '<div id="ajax-content">' + $('#ajax-content').html() + '</div>'
    }, '', document.URL);
  },
  // Handle browser Back/Forward button
  'popstate': function(e) {
    var oState = e.originalEvent.state;
    if (oState) {
      $('#ajax-content').replaceWith(oState.html);
    }
  }
});

...

// Update AJAX content
var sUrl = 'https://www.example.com/category?id=123&format=ajax';
$.ajax({
  type: 'GET',
  url: sUrl,
  success: function(sHtml) {
    $('#ajax-content').replaceWith(sHtml);
    window.history.pushState({
      'html': sHtml
    }, '', sUrl);
  }
}); 
```

# c# - 如何消除 foreach 循环中的虚假/多余空间？

> ID：11092746
> 
> 赞同：2
> 
> 时间：2012-06-19T00:06:05.187
> 
> 标签：c#, string, foreach

这段代码：

```
const string LabelToFind = "goTo considered Harmful";
using (var file = new StreamReader(DownloadedFile))
{
    string line;
    while ((line = file.ReadLine()) != null) {
        if ((line.Contains(keyVal)) && (line.Contains(LabelToFind))) {
            string[] logLineElements = line.Split('|'); 
            foreach (string element in logLineElements) {
                if (element.Contains(LabelToFind)) {
                    return element.Substring(element.IndexOf(LabelToFind, StringComparison.Ordinal) + LabelToFind.Length, element.Length - LabelToFind.Length);
                }
            }
        }
    }
} 
```

...失败，“参数超出范围异常：索引和长度必须引用字符串中的位置。参数名称：长度”当“元素”具有前导和尾随空格时（它总是这样做）。我想我可以这样做：

```
foreach (string element in logLineElements) {
    if (element.Contains(LabelToFind)) {
        String s = element.Trim();
        return s.Substring(s.IndexOf(LabelToFind, StringComparison.Ordinal) + LabelToFind.Length, s.Length - LabelToFind.Length); 
```

……但是味道不对……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:10:40.380

在获取子字符串时，您从您的第一个实例之后的字符开始`LabelToFind`，但对于长度参数，您仅使用 的原始长度`element`减去 的长度`LabelToFind`。如果在除开头以外的任何地方找到字符串`element`（您建议始终如此），这将失败，因为您尝试获取的字符多于保留在字符串中的字符。

假设您想在 之后返回字符串`LabelToFind`，这就是您的代码似乎正在尝试做的事情，请尝试：

```
const string LabelToFind = "goTo considered Harmful";
using (var file = new StreamReader(DownloadedFile))
{
    string line;
    while ((line = file.ReadLine()) != null)
    {
        if (line.Contains(keyVal) && line.Contains(LabelToFind))
        {
            foreach (var element in line.Split('|'))
            {
                var index = element.IndexOf(LabelToFind, StringComparison.Ordinal);
                if (index != -1)
                {
                    return element.Substring(index + LabelToFind.Length, element.Length - LabelToFind.Length - index).Trim();
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:22:31.330

您可以在 foreach 之前同时拆分和修剪。

```
List<string> logLineElements = line.Split('|').Select(e => e.Trim()).ToList(); 
```

# python - 如何在 python Webdriver 中鼠标悬停

> ID：11092748
> 
> 赞同：27
> 
> 时间：2012-06-19T00:06:23.563
> 
> 标签：python, selenium, webdriver, selenium-webdriver

似乎这是在 webdriver 中进行悬停/鼠标悬停的方法，至少在 java api 中：

```
Actions action = new Actions(driver);
action.moveToElement(element).build().perform();
action.moveByOffset(1, 1).build().perform(); 
```

这在 Python api 中可行吗？python 的 webdriver api 文档似乎没有提到类似的东西。 [http://selenium.googlecode.com/svn/trunk/docs/api/py/index.html](http://selenium.googlecode.com/svn/trunk/docs/api/py/index.html)

如何在 python webdriver 中完成悬停/鼠标悬停？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-19T19:57:43.813

```
from selenium.webdriver.common.action_chains import ActionChains

def hover(self):
    wd = webdriver_connection.connection
    element = wd.find_element_by_link_text(self.locator)
    hov = ActionChains(wd).move_to_element(element)
    hov.perform() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-10T17:19:10.713

我认为您正在询问我们需要单击下拉列表菜单项的场景。我们可以使用 Selenium 在 python 中自动化它。

为了手动执行此操作，首先我们需要通过将鼠标悬停在父菜单上来调出下拉列表菜单。然后从显示的下拉菜单中单击所需的子菜单。

使用 Selenium WebDriver 中的 ActionChains 类，我们可以以与手动相同的方式执行此步骤。该方法描述如下 -

**第一步：导入 webdriver 模块和 ActionChains 类**

```
from selenium import webdriver
from selenium.webdriver.common.action_chains import ActionChains 
```

**第 2 步：打开 Firefox 浏览器并加载 URL。**

```
site_url = 'Your URL'
driver = webdriver.Firefox()
driver.get(site_url) 
```

**第 3 步：通过传递驱动程序对象创建 ActionChains 对象**

```
action = ActionChains(driver); 
```

**第 4 步：在页面中找到第一级菜单对象，并使用方法“move_to_element()”将光标移动到该对象上。方法 perform() 用于执行我们在动作对象上构建的动作。对所有对象执行相同操作。**

```
firstLevelMenu = driver.find_element_by_id("first_level_menu_id_in_your_web_page")
action.move_to_element(firstLevelMenu).perform()
secondLevelMenu = driver.find_element_by_id("second_level_menu_id_in_your_web_page")
action.move_to_element(secondLevelMenu).perform() 
```

**第 5 步：使用方法 click() 单击所需的菜单项**

```
secondLevelMenu.click() 
```

**最后的代码块是这样的：**

```
from selenium import webdriver
from selenium.webdriver.common.action_chains import ActionChains

site_url = 'Your URL'
driver = webdriver.Firefox()
driver.get(site_url)

action = ActionChains(driver);

firstLevelMenu = driver.find_element_by_id("first_level_menu_id_in_your_web_page")
action.move_to_element(firstLevelMenu).perform()
secondLevelMenu = driver.find_element_by_id("second_level_menu_id_in_your_web_page")
action.move_to_element(secondLevelMenu).perform()

secondLevelMenu.click() 
```

您可以`driver.find_element_by_id()`根据您的工作替换为 selenium 中可用的任何其他 find_elemnt 方法。希望对您有所帮助。

# jquery - Jquery Auto Pop up without clicks,需要一些代码帮助

> ID：11092752
> 
> 赞同：2
> 
> 时间：2012-06-19T00:06:47.263
> 
> 标签：jquery, html, popup

我希望在页面加载后出现弹出窗口，而无需单击任何内容。

是否有任何调整或自动运行操作？

```
$(document).ready(function(){           
   var methods = {
      autoclose : function(){
         $.fallr('show', {
            buttons   : {},
            content   : '<p>This is a video</p><iframe width="560" height="315" src="http://www.mywebsite.com/todayinhistory.html" frameborder="0" allowfullscreen></iframe>',
            width     : 560 + 100,
            autoclose : 5000,
            icon      : 'clock'
         });
      },
   };
   $('a[href^="#fallr-"]').click(function(){
      var id = $(this).attr('href').substring(7);
      methods[id].apply(this,[this]);
      return false;
   });
}); 
```

目前它正在使用按钮单击，但我想看看我是否可以在页面加载后启动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:30:12.810

试试这个：

```
$(document).ready(function(){

           var methods = {         

                autoclose : function(){
                    $.fallr('show', {
                        buttons     : {},
                        content     : '<p>This is a video</p><iframe width="560" height="315" src="http://www.mywebsite.com/todayinhistory.html" frameborder="0" allowfullscreen></iframe>',
                         width       : 560 + 100, 
                        autoclose   : 5000,
                        icon        : 'clock'
                    });
                }

            };
            $('a[href^="#fallr-"]').click(function(){
                var id = $(this).attr('href').substring(7);
                methods[id].apply(this,[this]);
                return false;
            });

       //autoload popup
       var autoLoadFallr =methods;
        autoLoadFallr.autoclose();
    }); 
```

# asp.net-mvc - MVC4 Web API 或 MVC3 JsonResult

> ID：11092754
> 
> 赞同：5
> 
> 时间：2012-06-19T00:06:54.673
> 
> 标签：asp.net-mvc, asp.net-web-api

我已经看到很多关于为什么从 WCF 迁移到 Web API 是一个好的举动的争论，但是我没有看到太多关于从具有 JsonResult 操作的控制器迁移到 Web API 项目的内容。谁能提供切换到 Web API 平台的主要好处，或者不迁移并留在 MVC3 上是否有意义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T00:14:23.627

WebAPI 提供了很多开箱即用的东西，而这些东西是标准 JsonResult 所没有的。例如，WebAPI 知道调用者期望的内容类型，并且可以根据请求返回 Json、XML 或其他类型。

另一个不错的功能是 WebAPI 支持 oData，您可以使用标准的 oData HTTP 命令来过滤和执行其他操作，而无需您的代码执行任何特定操作。

WebAPI 有大量漂亮的功能，可以制作一个不错的 web 服务，而没有完整的 WCF 服务或 asmx 的开销。

如果您对 JsonResult 感到满意，则无需重写它。

# php - Codeigniter 页面显示位置

> ID：11092755
> 
> 赞同：1
> 
> 时间：2012-06-19T00:06:59.640
> 
> 标签：php, codeigniter, hyperlink

> **可能重复：**
> [使用 Code Igniter 制作面包屑的最佳方法是什么？](https://stackoverflow.com/questions/6494080/what-is-the-best-way-to-make-a-breadcrumb-with-code-igniter)

我正在尝试创建一种简单的方法来显示用户所在页面的位置，即控制器和功能。例子：

```
Settings - Profile 
```

我在一个名为`Layout`.

```
function location()
{
    $CI =& get_instance();

    $location = $CI->uri->uri_to_assoc(1); //create array of uri segments

    foreach ($location as $key => $value) 
    {
        $result = anchor($key, ucfirst($key)); //link to main controller
        if ($value) //if in controller function
        {
            $result .= " - "; //separator
        }
        $result .= ucfirst($value);
    } 

    return $result;
} 
```

然后在我的头文件中显示它`echo $this->layout->location();`

**更新：**我还添加了一个 if 条件来检查控制器是否为`user`, 以便显示用户的用户名。示例：`User - Profile`到`John - Profile`

```
if ($key == "user") //display username
{
    $key = $CI->tank_auth->get_username();
} 
```

如果有人使用更好的解决方案，我很好奇。请分享。

# php - 如何使用带有 jQ uery Ajax 调用的 GET 方法对发送到服务器的序列化数组进行反序列化？

> ID：11092760
> 
> 赞同：2
> 
> 时间：2012-06-19T00:07:55.970
> 
> 标签：php, jquery, serialization, deserialization

我正在尝试从我从 JQuery Ajax 调用发送到服务器中的 PHP 脚本的 URL 反序列化一个数组。

## 我做了什么

我一直以这种方式使用 jQuery Ajax 成功地将带有值的变量发送到服务器：

```
// A simple text from an HTML element:
var price = $("#price option:selected").val();
// Yet another simple text:
var term1 = $('#term1').val(); 
```

然后我以这种方式准备要通过 Ajax 发送的数据：

```
var data = 'price=' + price + '&term1=' + term1;
//if I alert it, I get this: price=priceString&term1=termString 
```

并像这样使用 jQuery Ajax 发送它：

```
$.ajax({
        url: "script.php",
        type: "GET",
        data: data,
        cache: false,
        dataType:'html',
        success: function (html) {
            // Do something successful
        }
}); 
```

然后我以这种方式在服务器中获取它：

```
$price = (isset($_GET['price'])) ? $_GET['price'] : null;
$term1 = (isset($_GET['term1'])) ? $_GET['term1'] : null; 
```

而且我可以根据需要轻松使用我的变量。但是，我需要使用数组来执行此操作。

## 主要问题

读了很多，我已经学会了将数组发送到服务器的专业方法：序列化它！我已经学会了用 jQuery 做这件事的方法：

```
var array_selected = [];
// This is used to get all options in a listbox, no problems here:
$('#SelectIt option:not(:selected), #SelectIt option:selected').each(function() {
   array_selected.push({ name: $(this).val(), value: $(this).html().substring($(this).html().indexOf(' '))});
});
var array_serialized = jQuery.param(array_selected);
// If I alert this I get my array serialized successfully with in the form of number=string:
//Ex. 123=stringOne&321=StringTwo 
```

这似乎是对的。我像以前一样将其添加到数据中：

```
var data = 'price=' + price + '&' + array_selected + '&term1=' + term1;
//if I alert it, I get this: price=priceString&term1=termString&123=stringOne&321=StringTwo 
```

如何在服务器中重建（反序列化）我的阵列？我已经尝试过和以前一样的方法：

```
$array_serialized = (isset($_GET['array_serialized'])) ? $_GET['array_serialized'] : null; 
```

没有成功！任何想法为什么？如何让我的序列化数组以这种方式在服务器中作为 PHP 可以处理的另一个数组传递，以便我可以使用它？

还是我不必要地让自己的生活复杂化了？我想要的只是将一个数组发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:46:28.863

I'm not too knowledgeable with PHP, but I think you may have overlooked something pretty simple, [`<?--php unserialize($string) ?>`](http://php.net/manual/en/function.unserialize.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:17:22.470

如果您在变量`[]`的末尾命名一个变量，它将根据使用该名称传递的值创建一个数组。

例如，`http://www.example.com/?data[]=hello&data[]=world&data[]=test`, 将导致`$_GET["data"] == array('hello', 'world', 'test');`在 PHP 中创建数组。

同样的，你可以在 PHP 中创建一个关联数组：`http://www.example.com/?data[first]=foo&data[second]=bar`将导致`$_GET["data"] == array("first" => "foo", "second" => "bar");`

顺便说一句，您可能对使用 jQuery[`.serialize()`](http://api.jquery.com/serialize/)或jQuery 感兴趣[`.serializeArray()`](http://api.jquery.com/serializeArray/)，如果它们适合您的客户端序列化需求。

# css - Pinax CSS 突然停止工作，现在黑条消失了，但链接仍然存在

> ID：11092761
> 
> 赞同：2
> 
> 时间：2012-06-19T00:08:01.357
> 
> 标签：css, virtualenv, pinax

我在 virtualenv 上托管​​ Pinax。

一切都很顺利。我开始在虚拟模板文件夹中的其他页面上工作，向其中添加 CSS。

我重新加载了页面，顶部的黑条消失了！！链接仍然存在，但栏不见了。我根本没有触摸 PINAX 原始文件。

上次发生这种情况时，我清除了缓存，又好了。这次我做到了，但它仍然无法正常工作。

我启动了一个新服务器，安装了一个全新的 Pinax 安装和 Starter 项目。加载那个..黑条仍然不存在。CSS仍然没有被捡起。

我不知道该怎么办！我使用的是 Firefox，然后我使用了 IE——结果相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:59:33.300

我想到了。

如果您使用的是 Pinax，Pinax 使用旧的引导主题

你必须升级你的推特引导程序，一切都会好起来的

# c# - 如何以这种格式读取 xml 中的节点

> ID：11092762
> 
> 赞同：1
> 
> 时间：2012-06-19T00:08:13.030
> 
> 标签：c#, asp.net, xml

我收到了关于这种格式的 xml 响应

```
 <?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n
       <PlatformResponse xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://platform.intuit.com/api/v1\">\r\n  
<ErrorMessage>OAuth Token rejected</ErrorMessage>\r\n  
<ErrorCode>270</ErrorCode>\r\n  
<ServerTime>2012-06-19T00:01:31.5150146Z</ServerTime>\r\n
</PlatformResponse> 
```

我需要获取`<ErrorCode>`节点中的值，因为我做了以下但它没有得到任何值..

```
 XmlDocument xml = new XmlDocument();
            xml.LoadXml(xmlResponse);

            XmlNodeList xnList = xml.SelectNodes("PlatformResponse");
            foreach (XmlNode xn in xnList)
            {
                result.Message = xn["ErrorCode"].InnerText;
            } 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:24:32.913

您的 PlatformResponse 节点中似乎有一些污垢会产生问题，（ xmlns:xsd= 等...）

使用这个 xml

```
String sXml = @"<?xml version='1.0' encoding='utf-8'?>
   <PlatformResponse >
        <ErrorMessage>OAuth Token rejected</ErrorMessage>
        <ErrorCode>270</ErrorCode>
        <ServerTime>2012-06-19T00:01:31.5150146Z</ServerTime>
    </PlatformResponse>"; 
```

并选择喜欢

```
XmlNodeList xnList = xml.SelectNodes("/PlatformResponse"); 
```

您的代码工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:28:29.233

我刚刚测试了代码，它确实工作正常：

```
 XmlDocument xml = new XmlDocument();
        XmlTextReader reader = new XmlTextReader("Path_to_your_xml");
        xml.Load(reader);
        XmlNodeList xnList = xml.SelectNodes("PlatformResponse");
        foreach (XmlNode xn in xnList)
        {
            MessageBox.Show(xn["ErrorCode"].InnerText);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:34:09.673

为此，由于属性位于主文档元素本身，您可以简单地执行

```
 XmlDocument xml = new XmlDocument();
    xml.LoadXml(xmlText);
    result.Message = xml.DocumentElement["ErrorCode"].InnerText 
```

# php - 谷歌日历 api & php - 导入事件

> ID：11092764
> 
> 赞同：1
> 
> 时间：2012-06-19T00:08:37.033
> 
> 标签：php, google-api, google-calendar-api

我有一个 php 日历，并且还想将我的活动添加到我的谷歌日历中。任何人都可以添加事件。我不知道我是否朝着正确的方向努力，但这就是我到目前为止所拥有的 => 以及我被困在哪里:)

*   我下载了 google-api-php-client
*   在 code.google.com/apis/console 中创建了一个项目
*   将客户端 ID、机密、重定向 url 和开发人员密钥添加到 calendar/simple.php。（虽然不确定开发人员密钥是否应该是我的 API 密钥）
*   将文件夹上传到我的服务器
*   访问 simple.php 并单击“连接我！”

这就是问题开始的地方：

1.  我不想要这个“允许访问”页面
2.  我何时何地可以添加我的活动。在重定向 url 页面或 simple.php 上
3.  如果应该在 simple.php 上添加 add-event 代码，redirectURL 是做什么用的？

任何帮助/建议都会很棒！

# jquery - 为什么我的 jQuery 对话框调整大小并且内容消失了？

> ID：11092768
> 
> 赞同：1
> 
> 时间：2012-06-19T00:09:02.277
> 
> 标签：jquery, asp.net-mvc-3, dialog, center, asp.net-mvc-partialview

我有一个 MVC3 视图，它调用一个局部视图，该视图获取一个包含一些设置的模型，您可以在下面找到代码。

我不明白为什么每次调整窗口大小时，我的整个对话框都会调整大小并且初始内容消失。

我尝试了各种“居中”功能，但它们都产生相同的输出。我用的是IE9。

```
<div id="dialog">  
    <p>@Model.Message</p>  
</div>  

<script language="javascript" type="text/javascript">
    $(function () {
        $('#dialog').dialog({
            autoOpen: true,
            title: "@Model.Title",
            show: "blind",
            width: "@Model.Width",
            height: "@Model.Height",
            buttons: {"Ok": function () { $(this).dialog("close"); }
            },
            close: function(event, ui) {
                @if (!string.IsNullOrEmpty(Model.ReturnUrl))
                {
                    @:location.href = "@Url.Action("" + @Model.Action + "", "" + @Model.Controller + "", new { returnUrl = "" + @Model.ReturnUrl + "" })"
                }
                else { 
                    @:close: function(event, ui) { $(this).close(); }
                }
            },
            modal: true,
            resizable: false     
        });
    });  

 jQuery.fn.center = function () {
        this.css("position","absolute");
        this.css("top", ( $(window).height() - this.height() ) / 2+$(window).scrollTop() + "px");
        this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
        return this;
    }

$(window).resize(function(){
    $("#dialog").center();
 }); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:27:36.837

您没有认识到您用作选择器的对话框元素不是对话框小部件的父级。该元素被包装，以便您的选择器元素成为内容区域。

外包装具有 class="ui-dialog"。在您的插件功能目标`$(this).closest('.ui-dialog')`中进行位置调整。它已`position:absolute`在创建期间设置为。

# ios - 当我向项目添加图像时，是否还需要添加 @2x 版本？

> ID：11092769
> 
> 赞同：0
> 
> 时间：2012-06-19T00:09:01.807
> 
> 标签：ios, xcode

我是否需要在 Xcode 中将@2x 版本添加到项目中，或者它会知道在文件夹中找到@2x 版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:14:30.677

您需要将图像的@2x 版本添加到 Xcode 中的项目中。添加图像时，请记住选中“将项目复制到目标组的文件夹”框。还要在“添加到目标”菜单中检查您的目标。这样想，如果不把它添加到Xcode中的项目中，当部署到客户的实际设备上时，如何找到图像呢？他们无法（显然）远程连接到您的计算机并下载@2x 图像。当使用 Retina 显示器的客户使用您的应用并且您未在项目中包含 @2x 图像时，将显示低质量图像。

总之，**是**的。如果您希望在 Retina 设备上使用更高分辨率的图像，则必须包含图像的 @2x 版本。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:12:56.560

只测试它比询问要快，但我认为如果你不在 Xcode 中添加它，它不会包含在包中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:13:27.330

它必须是项目的一部分，但是在使用图像时，xcode 会在引用它时自动选择正确的图像。

# php - php zend frmawork CGI 实现？

> ID：11092772
> 
> 赞同：2
> 
> 时间：2012-06-19T00:09:20.490
> 
> 标签：php, zend-framework, cgi, sh

我搜索了一个 CGI 并阅读了它，但没有找到任何有用的东西。我能理解的是概念。

在我的情况下，它是一个接口，负责在没有 apache 许可的情况下执行二进制文件，或者在二进制执行的定向和重定向受到监控和安全的环境中执行。

但是找不到教程。我在 public_html 中创建了一个 cgi-bin，然后创建了一个带有以下标题的 .sh 文件

```
#!/usr/bin/env bash 
```

我想做的是从我的网络应用程序中执行一些二进制文件。但是此文件中的每个脚本行都可以正常工作，不包括二进制执行。有没有人对以下问题有任何想法或好的教程：

1）我使用的标头好吗？

2）文件的扩展名应该是什么？

3) Zend 是否提供任何可以让我的工作更轻松、更整洁的库？

4）如果配置好了。我如何从 php 脚本中执行它（我的猜测是 exec（文件名））。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:31:20.957

你有没有尝试过`exec()`？我一直在使用它……并且在虚拟主机、本地服务器、nginx (php-fpm) 上工作过。下面的示例代码：

```
<?
$command="uptime"; $output; $retval; $errors="";
exec ( $command ,  &$output, &$retval  );
echo $output[0]."\n";
unset($output);
?> 
```

带输出：

```
09:30:37 up 269 days, 18:08,  3 users,  load average: 0.00, 0.00, 0.00 
```

最近，当发生特殊情况并且扩展程序的开发人员说我们需要手动删除文件时，我使用 php 脚本来充当远程 bash 脚本来删除 Magento 服务器中的缓存。

# c++ - 如何通过预处理器指令检查 Visual C++ 中是否需要预编译头文件？

> ID：11092773
> 
> 赞同：0
> 
> 时间：2012-06-19T00:09:53.360
> 
> 标签：c++, visual-studio-2010, visual-c++, c-preprocessor, precompiled-headers

有时了解编译器是否需要预编译头文件以及如何调用头文件会很有用。我的目标是添加一些预处理器指令，如下所示：

```
#ifdef REQUIRES_PRECOMPILED_HEADER
#include PRECOMPILEDHEADER_FILE
#endif 
```

所以我的问题是：是否有像`REQUIRES_PRECOMPILED_HEADER`and这样的预定义变量`PRECOMPILEDHEADER_FILE`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:28:30.250

支持其他人使用预编译头文件不是您的任务。是否将您的标头添加到他们的预编译标头中取决于他们。你只是试图为他们制造麻烦。

所以，问题解决了：不要那样做。

这是不必要的，而且会造成麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T01:10:13.793

那么大概您的源文件将不需要包含在预编译头文件中的任何头文件。因此，如果您尝试将源文件包含在其他源文件确实使用预编译头文件的项目中，只需确保[为您的预编译头文件关闭](http://msdn.microsoft.com/en-us/library/1hy7a92h)。

只需选择源文件的属性，然后在“Precompiled Header”下选择“Not Using Precompiled Headers”。

# amazon-s3 - 用于托管 Web 应用程序的公共图像的 S3 权限

> ID：11092776
> 
> 赞同：4
> 
> 时间：2012-06-19T00:10:27.643
> 
> 标签：amazon-s3, amazon-web-services

我已经开始使用 S3 来托管连接到 Rails 模型的图像。图像不是由用户上传的，所以我只是使用 aws_sdk gem 将图像存储到 S3 存储桶。

到目前为止，我已经成功存储了图像，但我对权限感到困惑。也许我错了，但似乎大多数关于 S3 权限的文档都已过时，我找不到它们所指的内容。

我想做的是非常基本的。我只想托管图像，图像本身是公开的，因此任何人都可以查看。但是，我不希望任何人只访问我的存储桶并查看那里托管的所有其他内容。所以基本上它只是一个在 S3 上托管图像的普通 Web 应用程序。我如何以及在哪里可以更改权限设置以使其以这种方式工作？目前，访问权限仅授予我自己，并且无法通过在浏览器中键入 url 来查看图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:50:05.557

回答我自己的问题：似乎这并不像将某些东西设置为“公共”并期望一切正常那么简单。基本上，如果您希望您的存储桶可供公众查看，您需要编写一个策略并将其应用于存储桶。

这是您可以构建策略的页面：http: [//awspolicygen.s3.amazonaws.com/policygen.html](http://awspolicygen.s3.amazonaws.com/policygen.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:20:39.523

看一下文档，更具体的是 S3Objects 写入方法：[Class: AWS::S3::S3Object](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#write-instance_method)，它允许您为上传的文件设置一堆选项。

上传到您的 S3 存储桶时，您已经设置了适当的`:acl`权限，因为它的默认设置是`:private`并且没有授予公共访问权限。[这是我从github](https://github.com/amazonwebservices/aws-sdk-for-ruby/blob/master/samples/s3/upload_file.rb)获取的修改片段：

```
# get an instance of the S3 interface using the default configuration
s3 = AWS::S3.new

# create a bucket
b = s3.buckets.create('example')

# upload a file
basename = File.basename('image.png')
o = b.objects[basename]
o.write(:file => file_name,  :acl => :public_read)

# grab public url
image_public_url = o.public_url

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T23:37:31.930

对于正在寻找有关如何编写允许任何人访问 s3 存储桶的策略的更具体信息的人，这可能会有所帮助。

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "PublicRead",
            "Effect": "Allow",
            "Principal": "*",
            "Action": [
                "s3:GetObject",
                "s3:GetObjectVersion"
            ],
            "Resource": [
                "arn:aws:s3:::DOC-EXAMPLE-BUCKET/*"
            ]
        }
    ]
} 
```

这个和其他例子，在下面的链接。

[https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html#example-bucket-policies-use-case-2](https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html#example-bucket-policies-use-case-2)

如果您仍有问题，请检查您的阻止设置。

# php - 如何实现 htmlpurifier

> ID：11092779
> 
> 赞同：0
> 
> 时间：2012-06-19T00:11:11.263
> 
> 标签：php, htmlpurifier, htmlspecialchars

我正在尝试实现 HTMLPURIFIER，但是在回显出我想要净化的 HTML 之后，我仍然得到
`<img src="kay.JPG" alt="my picture" />`作为显示内容的一部分，同时它是为了显示图片。我究竟做错了什么？

```
 function readmore_about_cs($row, $id) 

     {    
            $config = HTMLPurifier_Config::createDefault();
            // configuration goes here:
            $config->set('Core.Encoding', 'UTF-8'); 
            $config->set('HTML.Doctype', 'XHTML 1.0 Transitional'); 
            $purifier = new HTMLPurifier($config);

     if (isset($_GET['readmore'])) { 
     $nomore = ($row['about_church_of_christ_content']);
     $pure_html = $purifier->purify($nomore);
     echo htmlspecialchars($pure_html);
     } 
     else 
     {                         
     if (strlen(trim($row['about_church_of_christ_content'])) > 350) 
     {
     $shortText = substr(trim($row['about_church_of_christ_content']), 0, 650); 
     $shortText .= '..<a href="http://127.0.0.1/church/about_cs.php?id='.$id.'&readmore=1">More</a>'; 
     $pure_html = $purifier->purify($shortText);
     echo htmlspecialchars($shortText) ;
     }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:06:52.273

发生在您身上的是 HTMLPurifier 的默认行为，请注意以下解决方案将在您的安全性中造成漏洞，因为您基本上允许通过“src”属性进行 XSS 攻击。

这是您应该添加到代码中的内容：

```
// configuration goes here:
$config->set('HTML.Allowed','img[src], img[alt]'); 
```

# objective-c - 凯撒位移加密目标 C

> ID：11092780
> 
> 赞同：2
> 
> 时间：2012-06-19T00:11:14.130
> 
> 标签：objective-c, encryption, nsstring, char

我正在学习 Objective C 和 iOS 开发。我正在尝试重新创建我们在 Java 类中所做的一些项目（我知道它们完全不同），但我在其中一个项目中遇到了麻烦。有一天我们在实验室做凯撒轮班。字符串操作实验室。这在 Java 中是一个非常基本的交易……一个 for 循环遍历字符串并更改每个字符。我似乎找不到任何方法来更改目标 C 中的单个字符。我查看了 NSMutableString 文档和 NSString 文档，我知道我可以做一个

`[NSString stringByReplacingCharactersInRange:(NSRange *) withString:(NSString *)`

但这并没有真正的帮助，因为我不知道我将要替换什么。我需要找到一种方法来获取特定索引处的字符并进行更改。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:29:05.660

听起来你正在寻找`[NSString characterAtIndex:(NSUInteger)]`方法

例如

```
NSString *string = @"abcde";
NSString *character = [NSString stringWithFormat:@"%C",[string characterAtIndex: 0]];
NSLog(@"%@", character); 
```

结果：一个

使用 this 和 an `NSMutableString`，您可以构建所需的字符串。

使用`appendString`您可以添加到末尾`NSMutableString`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:52:23.467

可能最好的方法是使用一个好的旧 C 字符串，因为它允许您更改字节而无需每次重新分配不同字符串的开销：

```
NSString *ceasarShift(NSString *input)
{
    char *UTF8Str = strdup([input UTF8String]);

    int length = [input length];
    for (int i = 0; i < length; i++)
    {
         UTF8Str[i] = changeValueOf(UTF8Str[i]); // some code here to change the value
    }

    NSString *result = [NSString stringWithUTF8String:UTF8Str];
    free(UTF8Str);

    return result;
} 
```

这减少了开销，虽然您必须在完成后释放分配的数据，但它为您提供了不依赖高级 API 的优势，从而大大提高了性能。（数组集和动态方法查找之间的差异约为 5 个 CPU 周期，如果您正在执行任何主要类型的加密，这意味着很多）

也许也可以寻找`NSMutableData`这种任务，而不是`NSString`，因为随机`\0`可能会出现在结果字符串中。

# compass-sass - 将列表作为参数传递给SASS中的mixin？

> ID：11092781
> 
> 赞同：3
> 
> 时间：2012-06-19T00:11:16.043
> 
> 标签：compass-sass, sass

我试图通过定义一组常量来使 SCSS 样式表易于配置，这些常量将在许多 mixin 和 Compass 库中使用。理想情况下，我希望能够执行以下操作：

```
$item-bgs: linear-gradient(white, black), #ccc;

@mixin some-mixin() {
    @include background-with-css2-fallback($item-bgs*);
} 
```

这`background-with-css2-fallback`是一个[Compass mixin](http://compass-style.org/reference/compass/css3/images/#mixin-background-with-css2-fallback)，最多接受 10 个参数。我假设 SASS 目前不支持将列表参数作为参数列表传递，否则 Compass 可能会使用它，但我想知道是否可以将列表作为mixin`$item-bgs`的前 2 个参数。`background-with-css2-fallback`目前有没有办法做到这一点，或者将来是否计划用于 SASS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:22:08.960

SASS 本身可能不支持它，但 Compass 确实支持将列表作为第一个参数传递给`background-with-css2-fallback`mixin。如果您查看 mixin 的源代码，您会发现它使用了一个`compact`函数来处理将参数折叠到单个列表中的逻辑，无论是单独传递还是在单个列表参数中传递。

例如，这对我来说很好：

```
@import "compass";

$item-bgs: (linear-gradient(white, black), #ccc);

.test {
    @include background-with-css2-fallback($item-bgs);
} 
```

# c# - 在没有 System.Windows.Forms 的情况下设置鼠标位置

> ID：11092784
> 
> 赞同：5
> 
> 时间：2012-06-19T00:12:34.773
> 
> 标签：c#, windows, mouse

有没有办法在不使用 System.Windows.Forms.Cursor 的情况下操纵鼠标位置？可能是互操作之类的东西？

原因是我们使用了一个专门的 .NET 子集，它不能包含 System.Windows.Forms。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T00:23:34.407

糟糕，我的问题读得太快了，这是正确的 PInvoke 调用

```
[DllImport("user32.dll")]
static extern bool SetCursorPos(int X, int Y); 
```

来源：[http ://www.pinvoke.net/default.aspx/user32.setcursorpos](http://www.pinvoke.net/default.aspx/user32.setcursorpos)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-19T00:34:08.290

```
private void MoveCursor()
{
   // Set the Current cursor, move the cursor's Position,
   // and set its clipping rectangle to the form. 

   this.Cursor = new Cursor(Cursor.Current.Handle);
   Cursor.Position = new Point(Cursor.Position.X - 50, Cursor.Position.Y - 50);
   Cursor.Clip = new Rectangle(this.Location, this.Size);
} 
```

# php - 如何实时获取部分选项值

> ID：11092788
> 
> 赞同：1
> 
> 时间：2012-06-19T00:13:18.237
> 
> 标签：php, html, real-time

如果这是一个重复的问题，请原谅我，但我无法为我的问题找到正确的措辞。我有一个客户希望我重做他们的日志页面。他们想要一个下拉框，其中包含数据库中所有独特城市的列表。我已经完成了这部分。下一部分是当用户单击其中一个选项时，显示该城市的所有日志。我的问题是我无法弄清楚如何获取选择框的值。我知道我可以通过表单提交来做到这一点，但我希望能够单击该框并实时显示它。如果需要，这是下拉菜单的代码：

下拉代码：

```
$select = mysql_query("SELECT DISTINCT location FROM tbl_overnight");

if (!mysql_num_rows($select)) {
    echo "<option value='none'>No Locations...</option>";
} else {
    while ($row = mysql_fetch_assoc($select)) {
    echo "<option value='".$row['location']."'>".$row['location']."</option>";
    }
};

?> 
```

到目前为止，日志的代码与上面的代码类似，但显示除外。我在某处读到我可能必须使用 AJAX，以便获取实时值然后将其转换为 php 变量，但我不确定这是否是可行的方法。

如果我没有看到其他与此类似的帖子，请在下面的评论中链接它，我会查看并删除此帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T01:41:13.910

您不能在 php 中执行此操作，您可以使用 ajax 和 javascipt 中的 onChange 事件来执行此教程，本教程可能会帮助您做您想做的事

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

# jquery - Jquery Smoothscroll 函数 - 如何控制动画速度？

> ID：11092794
> 
> 赞同：2
> 
> 时间：2012-06-19T00:13:43.833
> 
> 标签：jquery, animation, effects, smooth-scrolling

任何人都可以帮助我吗？尝试使用我的平滑滚动和控制速度添加“慢”功能。

希望实现真正的“流畅滚动”。

以下是代码：

```
$(document).ready(function(){
$('.smoothscroll').live('click',function(e){
    $('html,body').animate({
    'scrollTop': $($(this).attr('href')).offset().top+'px'

    });
    e.preventDefault(); 
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:16:40.663

将动画时间作为第二个参数添加到`.animate()`函数（在选项对象之后），如下所示：

```
$(document).ready(function(){
    $('.smoothscroll').live('click',function(e){
        $('html,body').animate({
            'scrollTop': $($(this).attr('href')).offset().top+'px'
        }, 10000);
        e.preventDefault(); 
    });
}); 
```

在此示例中，动画将花费 10,000 毫秒（10 秒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-08T19:22:15.647

感谢**nbsp**的回答！

只为更新..

**jQuery .live() 从 1.9 版本开始被移除。**

所以这对我有用：

```
 $(document).ready(function() {
    $('.smoothscroll').on('click', 'a',function(e){
        $('html,body').animate({
            'scrollTop': $($(this).attr('href')).offset().top+'px'
        }, 10000);
        e.preventDefault();
    });
}); 
```

# c - 警告：空声明中的无用类型名称

> ID：11092796
> 
> 赞同：3
> 
> 时间：2012-06-19T00:14:18.983
> 
> 标签：c, gcc, warnings, typedef, extern

我有一个项目，项目中的两个文件被命名为`query-structures.h` `query-structures.c`. 中的内容`query-structures.h`是

```
#include <stdint.h>
typedef struct user_identifier user_identifier;
extern user_identifier; 
```

并且在`query-structures.c`是

```
#include "query-structures.h"
struct user_identifier
{
    uint64_t user_id;
}; 
```

现在编译器给我一个警告

`warning: useless type name in empty declaration [enabled by default]`

我不明白为什么会出现此警告，因为我必须`struct`在项目的其他文件中使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T00:19:24.203

此行异常，因为您声明了类型但没有变量名

```
extern user_identifier; 
```

例如，对于整数，你会写

```
extern int x; 
```

不是

```
 extern int; 
```

# python - 初学者python翻译器：我无法将搁置模块中的列表转换为字符串

> ID：11092802
> 
> 赞同：2
> 
> 时间：2012-06-19T00:14:52.543
> 
> 标签：python, python-3.x

我正在尝试制作一个简单的翻译器，它可以从搁置模块中的字典中输入英文单词，然后程序逐字翻译输入的单词，然后将结果放入 .txt 文件中。到目前为止，这几乎是我所拥有的。

```
import shelve

s = shelve.open("THAI.dat")
entry = input("English word")
define = input("Thai word")
s[entry]=define

text_file = open("THAI.txt", "w+")
trys = input("Input english word")

if trys in s:
    print(s[trys])
    part = s[trys]
    text_file.write(part) 
```

这是出现错误的地方。我认为问题在于该部分是一个列表，并且应该是一个能够写入 .txt 文件的字符串。我应该怎么办。我只是一个初学者，所以我可能缺少一些基本的东西。这是错误。

```
Traceback (most recent call last):
  File "C:\Users\Austen\Desktop\phython fun\thai translator.py", line 29, in <module>
    text_file.write(part)
TypeError: must be str, not list
>>> 
```

最后我希望能够做到这一点

```
text_file.readlines() 
```

然后甚至可以进入文本文件并查看翻译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:16:22.883

从您的评论来看，除了没有`s[entry]=[define]`，我认为您需要使用正确的编解码器读写泰语文件。

假设文件`thai.dat`是​​使用 UTF-8 编写的（假设），您现在需要使用相同的编解码器比较字符串，并使用相同的编解码器写入数据文件。

作为开始，从你的命令外壳试试这一行：

```
python -c 'import sys; print sys.getdefaultencoding()' 
```

如果它打印`ascii`，那么您可能需要将默认编码设置为 UTF-8，否则字符串比较将无法正常工作。

此外，您需要以 UTF-8 模式打开输出文件，如下所示：

```
>>>import codecs
>>>f = codecs.open("THAI.txt", "w+", "utf-8") 
```

然后像往常一样写入这个文件。

# clojure - 有什么办法可以从环中查看原始标题？

> ID：11092804
> 
> 赞同：1
> 
> 时间：2012-06-19T00:14:57.033
> 
> 标签：clojure, ring

有没有办法将环的参数哈希映射转换为浏览器和服务器用于通信的原始响应和请求标头？

所以基本上，我希望能够使用 ring 生成和解析原始文本标题，而不是 ring 提供的哈希映射结构。

要求：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:__qca=P0-1122510804-1338534864474; usr=t=pvgxSE5uUO9s&s=Ir7otYoeUaMb; __utma=140029553.119380626.1338534864.1340057197.1340064637.52; __utmb=140029553.6.10.1340064637; __utmc=140029553; __utmz=140029553.1340000628.50.23.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided) 
```

回复：

```
Host:stackoverflow.com
If-Modified-Since:Tue, 19 Jun 2012 00:10:35 GMT
Referer:http://stackoverflow.com/posts/11092804/edit
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.34 Safari/536.11
Response Headersview source
Cache-Control:public, max-age=60
Content-Encoding:gzip
Content-Length:33233
Content-Type:text/html; charset=utf-8
Date:Tue, 19 Jun 2012 00:26:48 GMT
Expires:Tue, 19 Jun 2012 00:27:48 GMT
Last-Modified:Tue, 19 Jun 2012 00:26:48 GMT
Set-Cookie:usr=t=Qz5ObGDYskmu&s=Ir7otYoeUaMb; domain=.stackoverflow.com; expires=Wed, 19-Dec-2012 00:26:48 GMT; path=/; HttpOnly
Vary:* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:07:58.820

我不认为 Ring 提供了这一点，因为 Ring 的目的是使用哈希映射和其他抽象在 HTTP 请求/响应上创建抽象，即使 ring 为您提供对标头字符串的低级别访问，这将是一个泄漏的抽象. 如果您真的想访问原始标头并生成原始响应标头，则可以直接使用像码头接口这样的 Web 服务器，而不是通过环。

# ruby-on-rails - 如何使用 Ruby on Rails 和 ActionMailer 先渲染视图并在后台发送电子邮件

> ID：11092805
> 
> 赞同：1
> 
> 时间：2012-06-19T00:15:03.010
> 
> 标签：ruby-on-rails, ajax, actionmailer

我的应用程序有一个简单的注册，用户在其中输入他/她的电子邮件地址并发布请求。然后使用 AJAX 将请求发送到我的服务器，使用 ActionMailer 将电子邮件发送到用户的电子邮件，并使用 jQuery 呈现感谢消息。使用我目前拥有的代码，仅在发送电子邮件后才会呈现感谢消息，因此显示感谢消息需要一些时间。但是，我希望首先呈现感谢消息，然后在后台将电子邮件发送给用户，以便用户可以立即知道他/她的电子邮件已保存。有没有办法使用 Rails 在后台处理电子邮件？

以下是我当前的代码。在 users_controller.rb

```
def create
  @user = User.new(params[:user])

  respond_to do |format|
    if @user.save
      format.html { redirect_to @user, notice: 'Thank you for signing up!' }
      format.js
      format.json { render json: @user, status: :created, location: @user }
      Notifier.email_saved(@user).deliver
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

在 mailers/notifier.rb 中

```
class Notifier < ActionMailer::Base
  default from: "First Last <my@email.com>"

  def email_saved(user)
    @email = user.email
    mail to: @email, subject: 'Auto-Response: Thank you for signing up'
  end
end 
```

在 users/create.js.erb

```
$("<div class='alert alert-success'>Thank you for showing your interest! A confirmation email will be sent to you shortly.</div>").insertAfter("#notice"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T02:19:49.057

如果你只想发送邮件，你应该使用比“Ajax”更好的“Resque”或“Delayed Job”。

[#271 Resque - RailsCasts http://railscasts.com/episodes/271-resque](http://railscasts.com/episodes/271-resque)

[延迟工作 (DJ) | Heroku 开发中心 https://devcenter.heroku.com/articles/delayed-job](https://devcenter.heroku.com/articles/delayed-job)

但如果您想使用 Ajax 发送邮件，请使用下面的代码片段作为参考。

```
#app/controllers/users_controller.rb
def create
  @user = User.new(params[:user])

  respond_to do |format|
    if @user.save
      format.html { redirect_to @user, notice: 'Thank you for signing up!', sign_up_flag: 1 }
      format.js
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end

def send_mail(user_id)
    begin
      user = User.find(user_id)
      Notifier.sign_up_mail(user.email).deliver
      render :nothing => true, :status => 200
    rescue
      render :nothing => true, :status => 500
    end
end

#app/mailers/notifier.rb
class Notifier < ActionMailer::Base
  default from: "First Last <my@email.com>"

  def sign_up_mail(email)
    mail to: email, subject: 'Auto-Response: Thank you for signing up'
  end
end

#app/views/???.html.erb
<% if @sign_up_flag == 1 %>
  $(document).ready(function(){
    $.ajax({
      type: "POST",
      url:  "/sendmail",
      data: "",
      success : function(){},
      error : function() {}
    });
  });
<% end %>

#config/routes.rb
  post '/sendmail' => 'users#send_mail' 
```

谢谢。

# ruby-on-rails - 在 Ubuntu 上为 Ruby on Rails 安装 PostgreSQL

> ID：11092807
> 
> 赞同：73
> 
> 时间：2012-06-19T00:15:12.627
> 
> 标签：ruby-on-rails, ruby, postgresql, ubuntu, heroku

我目前在 Ubuntu 12.04 中通过 RVM 安装了 Ruby on Rails。默认数据库是在 SQLite3 中设置的，但我想切换到 PostgreSQL 以便推送到 Heroku。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-06-19T00:15:13.673

以下是我遵循的步骤：

*安装 PostgreSQL 和开发包*

```
$ sudo apt-get install postgresql
$ sudo apt-get install libpq-dev 
```

*设置一个与我的 Ubuntu 登录相同的用户*

```
$ sudo su postgres -c psql
postgres=# CREATE ROLE <username> SUPERUSER LOGIN;
postgres=# \q 
```

*修改 Gemfile*

```
# Remove gem 'sqlite3'
gem 'pg' 
```

*`database.yml`在app目录下修改*

```
development:
  adapter: postgresql
  encoding: unicode
  database: appname_development
  pool: 5
  timeout: 5000
  username: <username>
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: appname_test
  pool: 5
  timeout: 5000
  username: <username>
  password: 
```

*运行捆绑安装*

```
$ bundle install 
```

*创建数据库和迁移*

```
$ rake db:create:all
$ rake db:migrate 
```

以下是我用来帮助的资源：http:
[//mrfrosti.com/2011/11/postgresql-for-ruby-on-rails-on-ubuntu/](http://mrfrosti.com/2011/11/postgresql-for-ruby-on-rails-on-ubuntu/)
[http://railscasts.com/episodes/342-migrating-to -postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)
[https://devcenter.heroku.com/articles/local-postgresql](https://devcenter.heroku.com/articles/local-postgresql)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-08T17:02:32.267

对于打开此线程的所有`Ubuntu 13.10`用户，请按照以下步骤安装`postresql`：

```
sudo sh -c "echo 'deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main' > /etc/apt/sources.list.d/pgdg.list"
wget --quiet -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | sudo apt-key add -
sudo apt-get update
sudo apt-get install postgresql-common -t saucy
sudo apt-get install postgresql-9.2 libpq-dev 
```

因为没有官方的 Postgres 存储库`Ubuntu 13.10`。

然后按照`Nick`说明创建用户（您也可以指定密码）：

```
sudo su postgres -c psql
postgres=# CREATE ROLE gotqn SUPERUSER LOGIN;
postgres=# \password gotqn
postgres=# \q 
```

注意：将`gotqn`以上内容替换为`whoami`结果：

![在此处输入图像描述](../Images/3b71f314102ded10d90b63d1ae337ec5.png)

创建 Rails 应用程序的最简单方法是指定您正在使用的应用程序`postgresql`，如下所示：

```
rails new Demo -d postgresql 
```

上面的代码会自动将`pg`gem 添加到您的文件中`GemFile`并创建适当的`database.yml`文件：

```
development:
  adapter: postgresql
  encoding: unicode
  database: Demo_development
  pool: 5
  username: gotqn
  password: mypass 
```

注意：您需要更改用户名并指定正确的密码（如果已设置）。

然后运行`rake db:create`并启动 rails 服务器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-08T16:21:12.810

sudo sh -c "echo 'deb [http://apt.postgresql.org/pub/repos/apt/precision-pgdg](http://apt.postgresql.org/pub/repos/apt/) main' > /etc/apt/sources.list.d/pgdg.list"

wget --quiet -O - [http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc](http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc) | sudo apt-key 添加 -

sudo apt-get 更新

sudo apt-get install postgresql-common

sudo apt-get install postgresql-9.3 libpq-dev

# php - PHP 多次包含一个配置文件

> ID：11092814
> 
> 赞同：0
> 
> 时间：2012-06-19T00:16:02.347
> 
> 标签：php, include

我有一个创建数组的 config.php 文件，例如

```
$config = array(
       'foo' => 'bar'
);
function foo()
{
       echo 'good';
} 
```

我还有另一个打印东西的实用程序.php 文件，这取决于 config.php

```
require_once(-the absolute path to config.php-);
class Utility{
  function bar()
  {
    echo count($config);
    echo foo();
  }
} 
```

我的 index.php 脚本依赖于 config.php 和 utility.php。因此，当我包含 foo.php 时，我再次包含了 config.php。就像是

```
require_once(-the absolute path to config.php-);
require_once(-the absolute path to utility.php-);
echo count($config);
utility::bar(); 
```

这个函数打印出来

```
1good 
```

但是，当我尝试调用 Utility::bar 时，它会为 count($config) 打印 0 - 尽管 count($config) 在 index.php 中返回 1，但 $config 数组永远不会在 utility.php 中创建。有趣的是，在utility.php 中调用函数foo() 仍然返回“好”。使 $config 全局化并没有改变任何东西（我听说这种风格很糟糕）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:23:46.787

看起来你有一个变量范围问题。阅读有关 PHP 变量范围的信息。作为一个例子，我想如果你改变了

```
echo count($config); 
```

至

```
global $config;
echo count($config); 
```

它会起作用的。

# binary-search-tree - 二叉搜索树密度？

> ID：11092818
> 
> 赞同：0
> 
> 时间：2012-06-19T00:16:43.627
> 
> 标签：binary-search-tree

我正在做一个处理二叉搜索树的家庭作业，我遇到了一个我不太明白的问题。该问题询问密度如何影响搜索二叉树所需的时间。我了解二叉搜索树和大 O 表示法，但我们以前从未处理过密度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:21:55.467

二叉搜索树的密度可以定义为累积到一个级别的节点数。一棵完美的二叉树将具有最高的密度。所以这个问题基本上是问你每个级别的节点数量如何影响树中的搜索时间。如果不清楚，请告诉我。

# google-app-engine - 谷歌应用引擎中的多个文件处理程序

> ID：11092825
> 
> 赞同：0
> 
> 时间：2012-06-19T00:17:47.067
> 
> 标签：google-app-engine

我想在google-app引擎（python 2.7）中有多个页面，以下是我的目录结构：根目录包含：pujaweb.py（主脚本），index.html，样式表（文件夹），端口（文件夹）.. .

现在我的第二个页面脚本位于端口文件夹中，我想配置我的 index.html 以便它链接到该页面。我尝试了很多东西，但不知何故它不起作用，总是显示 404 page not found 错误，命令行说 PujaPort 模块不存在（pujaport 是第二页的应用程序处理程序）。

以下是我的 app.yaml 文件代码：

```
application: thepujabhalerao

version: 1

runtime: python27

api_version: 1

threadsafe: true

handlers:

- url: /images

  static_dir: images

- url: /stylesheets

  static_dir: stylesheets

- url: /port
  script: pujaport.app

- url: /.*

  script: pujaweb.app

libraries:

- name: jinja2

  version: latest 
```

这是我的主要处理程序（pujaweb.py）

```
import cgi

import webapp2 

import jinja2

import os

from google.appengine.api import xmpp

from google.appengine.ext import db

jinja_environment = jinja2.Environment(

    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):

  def get(self):

      template_values = {}

      template = jinja_environment.get_template('index.html')

      self.response.out.write(template.render(template_values))

app = webapp2.WSGIApplication([('/', MainPage)],

                              debug=True) 
```

索引文件管理器中的 href 如下所示：

```
<a href="/port/">P</a> 
```

最后这是第二个页面处理程序 pujaport.py：

```
 import cgi

import webapp2 

import jinja2

import os

from google.appengine.api import xmpp

from google.appengine.ext import db

jinja_environment = jinja2.Environment(

    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class PujaPort(webapp2.RequestHandler):

  def get(self):

        self.response.out.write("In handler")

app = webapp2.WSGIApplication([('/port', PujaPort)],

                              debug=True) 
```

我知道这是某个地方的小故障，但请帮助我，因为在使用它太久之后我可能会错过明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:45:01.923

如果您坚持使用该文件夹结构，则需要通过向其添加文件（可以为空）将`port`目录制作成一个包，并将应用程序引用为，它的完全限定名称。`__init__.py``port.pujaport.app`

# html-parsing - 使用 UIMA 处理 HTML

> ID：11092829
> 
> 赞同：4
> 
> 时间：2012-06-19T00:18:15.740
> 
> 标签：html-parsing, uima

我正在尝试了解 UIMA 架构。

我想创建一个以 HTML 标记开头的管道。我需要将其剥离为纯文本，以便它可以由不同的注释器处理，如 POS、分块、实体检测等。但是我还想跟踪哪些区域对应于原始 html 标签，如链接、段落, em 等。基本上我想要一个最终的注释器，它可以同时利用结构注释（来自 html）和语义注释（来自其他组件）。

所以，我可以想象从一个剥离 html 标记并添加注释以跟踪我感兴趣的标签的组件开始。这样的组件是否已经存在？这似乎是很多人想要的东西。

如果我必须从头开始创建它，它是什么组件？它不仅仅是一个直接的注释器，因为它需要更改 SOFA：它需要用纯文本替换标记。

或者我应该让它创建文档的新视图，以便我们维护文档的标记视图和纯文本视图？这看起来很奇怪，考虑到我再也不会关心标记视图了。另外，我如何确保其他注释器（我不会自己编码）在文档的纯文本视图而不是标记视图上操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T12:43:34.190

[UIMA Ruta](http://uima.apache.org/ruta.html)为此任务提供了一些分析引擎。HtmlAnnotator在 html 文本中为不同的标签创建注释[。](http://uima.apache.org/d/ruta-current/tools.ruta.book.html#ugr.tools.ruta.ae.html)[HtmlConverter](http://uima.apache.org/d/ruta-current/tools.ruta.book.html#ugr.tools.ruta.ae.htmlconverter)能够创建一个新视图，该视图仅包含 html 的文本，但带有相应的标签注释。有一些用于处理换行符等的配置参数。对于在管道中没有沙发映射的进一步处理，有一个 ViewWriter 能够将新的纯文本视图复制到新文件的 _initalView 中。

免责声明：我是 UIMA Ruta 的开发人员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:26:42.760

根据标记的复杂程度，有些人使用 Apache Tika，有些人使用 Boilerpipe。

这是一个想要在 UIMA 中使用 Boilerpipe 但遇到障碍的人[的博客文章，因为他想将偏移量保留回 HTML。](http://sujitpal.blogspot.com/2011/08/uima-concept-mapping-interface-to.html)

[这是调用 tika 的 UIMA 注释器。](http://uima.apache.org/sandbox.html#tika.annotator)

# javascript - 在刚刚创建的窗口中为文本输入设置焦点

> ID：11092833
> 
> 赞同：4
> 
> 时间：2012-06-19T00:19:22.260
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我有一个简单的窗口：

```
 this.window = Ext.widget('window', {
            title: 'Find',
            closeAction: 'hide',
            width: 300,
            layout: 'fit',
            items: form
        }); 
```

里面有琐碎的形式

```
var form = Ext.widget('form', {
    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    border: false,
    bodyPadding: 10,

    items: [
        this.findInput,
    ]
}); 
```

只有一项

```
 this.findInput = Ext.widget('textfield', {
        name: 'find'
    }); 
```

问题是：如何在窗口显示后立即设置焦点？我试图在几乎每个窗口事件处理程序中调用`.focus()`方法，但没有运气。`this.findInput`

似乎`afterrender`在 DOM 完全创建所有元素之前同步调用了 even 。

我错过了什么？我应该绑定什么事件来渲染所有元素并能够接受焦点？

PS：如果我`.focus()`在像 10 毫秒这样的小间隔后调用相同的 - 我会集中注意力，但这不是解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T01:17:33.817

查看`activeItem`属性 - [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Panel-cfg-activeItem](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Panel-cfg-activeItem)

或者您也可以使用`defaultFocus`：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.window.Window-cfg-defaultFocus](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.window.Window-cfg-defaultFocus)

# git - Using Git for Windows - 意外丢失了大量工作。我可以拿回来吗？

> ID：11092839
> 
> 赞同：1
> 
> 时间：2012-06-19T00:20:05.577
> 
> 标签：git, github, recovery

我很困惑，我想我已经失去了几个小时的工作。

我之前在 Git 中编辑了一个文件，我保存了它，但没有提交。我确实做了一些其他文件更改，并提交并推送了它们。然而，一个文件被搞砸了，所以我点击了最后一次成功的提交，然后按下了“回滚到这个提交”。令我恐惧的是，它删除了我所有未提交的更改，现在我不知道如何让它们恢复，因为它们没有提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:31:25.597

你说你没有犯。不幸的是，git 只保存提交而不是撤消的工作。所以，很抱歉，没有办法使用 git 来恢复你的工作。

但您可以尝试[恢复已删除的文件](https://www.google.com/search?q=windows%20how%20to%20recover%20deleted%20data)。

您可能还想看看[这个](http://www.codinghorror.com/blog/2008/08/check-in-early-check-in-often.html)编码恐怖帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:36:36.593

您现在（2013 年 3 月）可以使用 GitHub for Windows 检查是否可以撤消“回滚”：

请参阅“ [Windows 版 GitHub 中的撤消按钮](https://github.com/blog/1441-undo-button-in-github-for-windows)”

> 我们添加**了对 Discards、Commits、Rollbacks 和 Merges 的 Undo 支持**：

![撤消按钮](../Images/31eafcaf4ee664466c8148274077b75d.png)

我不知道回滚是否会保存您未*暂存*和未提交的更改，因此新的“撤消”按钮可能不是一个足够好的解决方案。

# linux - Linux 上的普遍 ODBC 错误 [01000][unixODBC][驱动程序管理器]无法打开 lib '/usr/local/psql/lib/odbcci.so'：找不到文件

> ID：11092840
> 
> 赞同：4
> 
> 时间：2012-06-19T00:20:10.167
> 
> 标签：linux, odbc, pervasive

我正在尝试让 Pervasive v10 客户端 ODBC 在 Centos 6 上运行。据我所知，没有 64 位 ODBC 客户端，所以我必须使用 32 位客户端。我终于让它安装没有错误，但尝试使用会给出以下结果：

```
# isql -v mydsn
[01000][unixODBC][Driver Manager]Can't open lib '/usr/local/psql/lib/odbcci.so' : file not found
[ISQL]ERROR: Could not SQLConnect 
```

ldd 显示：

```
# ldd /usr/local/psql/lib/odbcci.so
linux-gate.so.1 =>  (0x007d3000)
libpscore.so.3 => /usr/local/psql/lib/libpscore.so.3 (0x00c32000)
libpscl.so.3 => /usr/local/psql/lib/libpscl.so.3 (0x005f9000)
libuuid.so.1 => /lib/libuuid.so.1 (0x0076d000)
libpthread.so.0 => /lib/libpthread.so.0 (0x00110000)
libdl.so.2 => /lib/libdl.so.2 (0x003e0000)
libstdc++.so.6 => /usr/local/psql/lib/libstdc++.so.6 (0x0012b000)
libm.so.6 => /lib/libm.so.6 (0x00876000)
libgcc_s.so.1 => /usr/local/psql/lib/libgcc_s.so.1 (0x00434000)
libc.so.6 => /lib/libc.so.6 (0x00954000)
/lib/ld-linux.so.2 (0x00f70000) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-15T13:16:41.123

我刚刚在为 Ubuntu 客户端设置 ODBC 和 Pervasive 时遇到了类似的问题。

它在你之后工作的原因`su psql`是因为他们`.bashrc`在 psql 用户帐户中安装了一个。这个问题的关键因素是`export LD_LIBRARY_PATH=...`告诉动态链接器在哪里可以找到库。

关于 SQL 连接管理器的评论中的错误也是我遇到的错误： `[08S01][unixODBC][Pervasive][ODBC Client Interface][Client LNA]The ODBC Client Interface cannot access the data source because SQL Connection Manager is not running at the specified port number. Contact your system administrator for assistance.`

我认为 Pervasive 希望在自己的 etc 目录中拥有自己的 odbc.ini 副本。该`dsnadd`脚本可能会这样做。我没有`dsnadd`在 64 位安装中，但我添加了一个符号链接 from `/etc/odbc.ini`to`/usr/local/psql/etc/odbc.ini`并且它有效。

# c# - 从数据集创建报表查看器

> ID：11092841
> 
> 赞同：0
> 
> 时间：2012-06-19T00:20:10.317
> 
> 标签：c#, asp.net

我正在读取一个文件，我从中创建一个数据集，我需要从该数据集创建一个报告，但此代码不起作用。所以也许有人可以告诉我我做错了什么，我真的很感激它或提出另一种解决这个问题的方法。

BuildataSet 功能正常工作，创建报告给我带来了问题。

```
public DataSet BuildDataSet(string file,string tableName,string delimeter)
{
  //create our DataSet
  DataSet domains = new DataSet();
   //add our table
   domains.Tables.Add(tableName);
    String c =    "VOYAGE|SAILDATE|DELIVERYDATE|AMENITY|QTY|COMPLIMENTS|MESSAGE|CABIN|1STPAXNAME|"
    +"1STPAXLAST|2NDPAXNAME|2NDPAXLAST|3RDPAXNAME|3RDPAXLAST|4THPAXNAME|4THPAXLAST|SHIP|TYPE|DELIVERYTYPE|DROOM|SEATING|TABLE|GHOSTCOLUMN";

try
{
    //first make sure the file exists
    if (File.Exists(file))
    {
        //create a StreamReader and open our text file
        StreamReader reader = new StreamReader(file);

        //read the first line in and split it into columns
        string [] columns = c.Split('|');
        //now add our columns (we will check to make sure the column doesnt exist before adding it)
        foreach (string col in columns)
        {
            //variable to determine if a column has been added
            bool added = false;
            string next = "";
            //our counter
            int i = 0;
            while (!(added))
            {
                string columnName = col;

                    //now check to see if the column already exists in our DataTable
                    if (!(domains.Tables[tableName].Columns.Contains(columnName)))
                    {
                        //since its not in our DataSet we will add it
                        domains.Tables[tableName].Columns.Add(columnName, typeof(string));
                        added = true;
                    }//end if
                    else
                    {
                        //we didnt add the column so increment out counter

                        i++;
                        next = "_" + i.ToString();
                        break;
                    }//end else

             }
        }
        //now we need to read the rest of the text file
        string data = reader.ReadToEnd();

        //now we will split the file on the carriage return/line feed
        //and toss it into a string array
        string [] rows = data.Split("\r".ToCharArray());
        //now we will add the rows to our DataTable
        foreach (string r in rows)
        {
            string[] items = r.Split(delimeter.ToCharArray());
            //split the row at the delimiter
            //for (int i = 0; i <= items.Count() - 1; i++)
            //{

                domains.Tables[tableName].Rows.Add(items);

            //}
        }
    }
    else
    {
        throw new FileNotFoundException("The file " + file + " could not be found");
    }

}
catch (FileNotFoundException ex)
{
    _message = ex.Message;
    return null;
}
catch (Exception ex)
{
    _message = ex.Message;
    return null;
}

//now return the DataSet
 return domains; 
```

} //#endregion

```
 protected void Button1_Click(object sender, EventArgs e)
{

    DataSet ds = BuildDataSet(@"C:/Documents/GIFTCDS.TXT", "MyNewTable", "|");
    GridView1.DataSource = ds;
    GridView1.DataBind();

    ReportDataSource rds = new ReportDataSource("MyNewTable", ds.Tables[0]);
    ReportViewer1.LocalReport.DataSources.Clear();
    ReportViewer1.LocalReport.DataSources.Add(rds);
    ReportViewer1.DataBind();
    ReportViewer1.LocalReport.Refresh();

} 
```

# lua - 在闪烁控件中设置lua基本功能的突出显示颜色

> ID：11092843
> 
> 赞同：3
> 
> 时间：2012-06-19T00:20:11.823
> 
> 标签：lua, scintilla, scilexer.dll

我在基于 MFC 对话框的应用程序中使用 scintilla 编辑控件。

我加载了 scilexer.dll，并将词法分析器设置为 lua，但唯一突出显示的是注释。我还可以设置关键字，它们会突出显示：

```
mySciCtrl.SendMessage(SCI_SETKEYWORDS, 0, "for while end function") 
```

但是，我不知道如何启用 lua 基本功能（如`print`、`setmetatable`等）的突出显示。

我认为这将是自动的，就像评论突出显示一样。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:39:26.773

找到了，当然只需要看看闪烁函数就可以了。因此，如果其他人遇到这种情况：

`SendMessage(SCI_STYLESETFORE, SCE_LUA_WORD2, RGB(100,149,237));`在您的闪烁窗口类中，通过使用第二个关键字列表来初始化颜色。

然后在你的对话框中做`m_ScinCtrl.SendMessage( SCI_SETKEYWORDS, 1, ( long )_T( "the words you want highlighted with the above specified color"));`

`SCE_LUA_WORD2`对应于第二个语句中的整数值 1，因此如果您想要以不同方式突出显示的第三组关键字，只需`SCE_LUA_WORD3`在第二个语句中使用整数值 2！

# objective-c - NSApplicationMain 语法

> ID：11092846
> 
> 赞同：2
> 
> 时间：2012-06-19T00:20:46.237
> 
> 标签：objective-c

我对 Objective C 和 Cocoa 编程完全陌生。

为什么 NSApplicationMain 没有类似的语法

```
[target selector]; 
```

为什么我们称它为

```
NSApplicationMain(); 
```

或者这种语法是否适用于某种全局方法？我在想objective-C中的所有方法都在对象上，似乎这是其中一种全局方法，objective-C中的前辈请解释一下。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:26:12.940

至少在历史上，Objective C 一直是 C 的扩展。

如果您查看从 Xcode 中的模板创建的任何新应用程序，“ `NSApplicationMain()`”是从 main.m 或 main.c 文件调用的。

这是一个为 Macintosh 应用程序实例化 Objective C 运行时的钩子，或者[正如 Apple 文档所说，它](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html)是`NSApplicationMain`：

> 由主函数调用以创建和运行应用程序。

此外，它还提供了一种很好的方式来将传统 C 主函数的“ `int argc, const char *argv[]`”参数与主函数连接到 Objective C 应用程序中。

# android - com.example.android.apis.R 在哪里？

> ID：11092847
> 
> 赞同：3
> 
> 时间：2012-06-19T00:21:35.407
> 
> 标签：android, api, graphics, camera, package

所以我试图在这里完成这个例子：

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/Sur​​faceViewOverlay.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/SurfaceViewOverlay.html)

在最后一个导入行上它说

```
//Need the following import to get access to the app resources, since this
//class is in a sub-package.
import com.example.android.apis.R; 
```

问题是我在哪里可以得到包含这个的包？我在网上找到的信息很少，显然还没有，因为我输入它时它带有红色下划线。我知道这可能是一个菜鸟问题，但嘿，我们都从某个地方开始......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:25:59.433

尝试使用 android 示例应用程序运行此示例。

要安装和运行 Android 示例应用程序，请按照此处的说明进行操作：

[http://developer.android.com/resources/samples/get.html](http://developer.android.com/resources/samples/get.html)

> 为了帮助您快速入门，Android SDK 包含各种示例代码和教程，这些示例代码和教程说明了 Android 应用程序开发的关键概念和技术。例如，示例显示了清单文件的结构以及活动、服务、资源、意图、内容提供者和权限的使用。它们还展示了如何为您的应用程序添加专用功能，例如蓝牙和联系人集成、多屏幕支持、动态壁纸等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:42:31.173

该 R 文件只是您项目的 R 文件。所以这将`your.project.main.package.R`取决于`<mainfest>`你的 AndroidManifest.xml 中标签的包属性。

因此，如果您已从 SDK 导入项目示例，则 R 文件将与示例位于同一包中，即`com.example.android.apis`.

但是，如果您在自己的项目中使用代码，因为您提到导入仍未解决，那么您必须为自己的项目导入 R 文件。请注意，您还必须将所需资源（布局、可绘制对象等）从示例中导入到您的项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T21:37:40.163

就我而言，我收到此错误是因为我需要添加：

`C:\adt-bundle-windows-x86_64-20130729\sdk\add-ons\addon-google_apis-google-18\libs\maps.jar`

到“右键单击项目”/属性的 BuildPath 部分中的库选项卡。

# scala - scaladoc 中的逐字代码

> ID：11092849
> 
> 赞同：3
> 
> 时间：2012-06-19T00:22:16.700
> 
> 标签：scala, scaladoc

我有一个 Color 伴侣对象，其中包含一些有用的颜色，我想以下列方式记录它们：

```
object Color {
  /** (.3, .3, .3, 1) */
  val darkGrey = Color(.3, .3, .3, 1);
} 
```

您可能已经注意到，我想要的只是让字符串`(.3, .3, .3, 1)`显示`val darkGrey`在`Color`. 问题是 Scaladoc 将第一个句点之前的所有内容都视为一个句子，而之前的所有内容都隐藏在可扩展箭头的“内部”。所以我得到的是这样的：

![在此处输入图像描述](../Images/bc1ed056e86c689c0bd0e45bc01f72b6.png)

这显然是不可取的。理想情况下，要么显示整个字符串，要么隐藏整个字符串。有没有办法实现其中任何一个？

我也尝试了以下两种方法，但都没有奏效。

```
object Color {
  /**
    * (.3, .3, .3, 1)
    */
  val darkGrey = Color(.3, .3, .3, 1);
}
object Color {
  /** {{{
    * (.3, .3, .3, 1)
    * }}}
    */
  val darkGrey = Color(.3, .3, .3, 1);
}   
object Color {
  /** ` (.3, .3, .3, 1) ` */
  val darkGrey = Color(.3, .3, .3, 1);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T00:41:43.600

周期检测似乎处于 scaladoc 的后期阶段，它是如何生成或转义的并不重要。我发现的唯一解决方案有点古怪——你需要避免这段时间。使用不同的 unicode：

```
/** @define dot \u2024 */
object Color {
  /** `(${dot}3, ${dot}3, ${dot}3, 1)` */
  val darkGrey = Color(.3, .3, .3, 1);
}
case class Color(r:Double,g:Double,b:Double,alpha:Double) 
```

如果您将源代码保存为 UTF-8，我想您也可以直接粘贴替代句点字符。

# django - Django Nonrel - 使用 noSQL 解决多表继承问题？

> ID：11092854
> 
> 赞同：4
> 
> 时间：2012-06-19T00:22:56.640
> 
> 标签：django, google-app-engine, nosql, django-nonrel, djangoappengine

我正在开发一个在 Google 的 AppEngine 上运行的 django-nonrel 项目。我想为游戏创建一个模型，其中包含所有运动通常共有的细节——即比赛时间、状态、位置等。然后我为 GameBasketball、GameBaseball 等建模了特定的类，这些类继承自基类。

但是，如果我想在某一天检索所有游戏之类的东西，这会产生一个问题：

```
Game.objects.filter(gametime=mydate) 
```

这将返回一个错误：

```
DatabaseError: Multi-table inheritance is not supported by non-relational DBs. 
```

我知道 AppEngine 不支持 JOIN，因此失败是有道理的。但我不确定如何在非关系环境中正确解决这个问题。我尝试过的一个解决方案是将 Game 转换为抽象基类，虽然这允许我以一种很好的方式对数据进行建模 - 它仍然无法解决上述用例，因为它无法获取抽象对象基类。

这里唯一的解决方案是将所有可能的运动的所有数据（并且只将与特定运动无关的字段保留为空）放在游戏模型中，还是有更优雅的方法来解决这个问题？

编辑：我更感兴趣的是了解在任何 noSQL 设置中处理此类问题的正确方法，而不是专门在 AppEngine 上。因此，即使您的答案不是 GAE 特定的，也请随时回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:34:54.350

对于将来遇到此问题的其他任何人，这就是我最终解决该问题的方法。请记住，这在某种程度上是特定于 mongo 的解决方案，并且 AFAIK 仅使用基本 nonrel 类没有简单的方法来解决这个问题。

对于 Mongo，我可以通过使用 Embedded Documents（其他 noSQL 设置可能具有类似的软模式类型功能）来解决这个问题，简化代码如下：

```
class Game(models.Model):
    gametime = models.DateTimeField()
    # etc

    details = EmbeddedModelField() # This is the mongo specific bit.

class GameBasketballDetails(models.Model):
    home = models.ForeignKey(Team)
    # etc 
```

现在，当我实例化 Game 类时，我在 details 字段中保存了一个 GameBasketballDetails 对象。所以我现在可以这样做：

```
games = Game.objects.filter(gametime=mydate)
games[0].details.basketball_specific_method() 
```

这是一个可以接受的解决方案，因为它允许我查询游戏模型，但仍然可以获得我需要的“孩子”特定信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:41:54.810

如您所知，django-nonrel 中不允许多表继承的原因是 Django 为这些模型提供的 API 通常会使用 JOIN 查询。

但我认为你可以手动设置 Django 会用它的模型继承“糖”做的事情，而只是避免在你自己的代码中进行连接。

例如

```
class Game(models.Model):
    gametime = models.DateTimeField()
    # etc

class GameBasketball(models.Model):
    game = models.OneToOneField(Game)
    basketball_specific_field = models.TextField() 
```

当您创建一个新实例`GameBasketball`以创建相应的`Game`实例时，您需要做一些额外的工作（您可以尝试自定义管理器类），但之后您至少可以做您想做的事情，例如

```
qs = Game.objects.filter(gametime=mydate)
qs[0].gamebasketball.basketball_specific_field 
```

django-nonrel 和 djangoappengine 在 GitHub 上有一个新家：[https ://github.com/django-nonrel/](https://github.com/django-nonrel/)

除了 GAE 数据存储 API 本身的速度之外，我不相信 python 框架的选择会有很大的不同，或者 django-nonrel 天生就比 webapp2 慢。

# java - 对象数组的空指针异常

> ID：11092855
> 
> 赞同：1
> 
> 时间：2012-06-19T00:23:09.303
> 
> 标签：java, arrays, object, nullpointerexception, switch-statement

我正在创建的以下程序将允许用户输入值来创建视频数组。每个视频包含多个数据字段（编号、标题、发布者、持续时间和日期）。该程序主要通过开关菜单进行控制。但是，在创建数组后，选择另一个选项，例如 Show videos 将引发 Null Pointer Exception。当您没有为数组赋值时，通常会发生这些异常，但这应该已经在第一个选项 createLibrary() 中完成。搜索视频和更改视频中的其他功能具有相同的问题，并且每次使用 get 方法时都会发生。

任何有合理实际答案的人都会有很大帮助。

这是我的一段代码：

```
import java.util.*;
public class EnterLibrary
{
public final int MAX_ITEMS = 5;
public Library[] videos;
public int size = 0;

public EnterLibrary()
    {
        videos = new Library[MAX_ITEMS];
        java.util.Scanner scannerObject =new java.util.Scanner(System.in);
        LibraryMenu Menu = new LibraryMenu();
        Menu.displayMenu();
        switch (scannerObject.nextInt())
        {
            case 1:
            System.out.println ("1 - Add Videos");
                if (size < MAX_ITEMS) {
                Library video = createLibrary();
                videos[size++] = video;
                }
            new EnterLibrary();
            break;
            case 2:
            System.out.println ("2 - Show Videos");
            printVidLibrary(videos);
            new EnterLibrary();
            break;
            case 3:
            System.out.println ("3 - Search Videos");
            searchLibrary(videos);
            new EnterLibrary();
            break;
            case 4:
            System.out.println ("4 - Change Videos");
            changeLibrary(videos);
            break;      
            case 5:
            System.out.println ("5 - Delete Videos");
            deleteVideo(videos);
            new EnterLibrary();
            break;
            default:
            System.out.println ("Unrecognized option - please select options 1-5 ");
            break;
        }
    }

public Library createLibrary()
{
    Library video = new Library();
    java.util.Scanner scannerObject =new java.util.Scanner(System.in); 
    for (int i = 0; i < videos.length; i++)
    {
    //User enters values into set methods within the Library class
    System.out.print("Enter video number: " + (i+1) + "\n");
    String number = scannerObject.nextLine();
    System.out.print("Enter video title: " + (i+1) + "\n");
    String title = scannerObject.nextLine();
    System.out.print("Enter video publisher: " + (i+1) + "\n");
    String publisher = scannerObject.nextLine();
    System.out.print("Enter video duration: " + (i+1) + "\n");
    String duration = scannerObject.nextLine();
    System.out.print("Enter video date: " + (i+1) + "\n");
    String date= scannerObject.nextLine();
    System.out.print("VIDEO " + (i+1) + " ENTRY ADDED " + "\n \n");
    //Initialize arrays
    videos[i] = new Library ();
    videos[i].setVideo( number, title, publisher, duration, date  );
    }
    return video;
}

public void printVidLibrary( Library[] videos)
{
    //Get methods to print results
    System.out.print("\n***VIDEO CATALOGUE*** \n");
    for (int i = 0; i < videos.length; i++)
    {
    System.out.print("Video number " + (i+1) + ": \n" + videos[i].getNumber() + "\n ");
    System.out.print("Video title " + (i+1) + ": \n" + videos[i].getTitle() + "\n ");
    System.out.print("Video publisher " + (i+1) + ": \n" + videos[i].getPublisher() + "\n ");
    System.out.print("Video duration " + (i+1) + ": \n" + videos[i].getDuration() + "\n ");
    System.out.print("Video date " + (i+1) + ": \n" + videos[i].getDate() + "\n ");
    }
}
//Code for other functions not displayed here

public static void main(String[] args)
    {

    new EnterLibrary();
    }
} 
```

异常错误：

```
Exception in thread "main" java.lang.NullPointerException
        at EnterLibrary.printVidLibrary(EnterLibrary.java:80)
        at EnterLibrary.<init>(EnterLibrary.java:26)
        at EnterLibrary.<init>(EnterLibrary.java:22)
        at EnterLibrary.<init>(EnterLibrary.java:22)
        at EnterLibrary.<init>(EnterLibrary.java:22)
        at EnterLibrary.<init>(EnterLibrary.java:22)
        at EnterLibrary.main(EnterLibrary.java:202) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:29:28.773

您的代码中至少有两个严重错误：

1.  有一个堆栈溢出等待发生：你正在调用`EnterLibrary()`inside `EnterLibrary()`，这将产生一个无限递归
2.  尽管您已经实例化了`videos`数组，但您还没有初始化它，因为它充满了空对象；确保在调用*之前在*构造函数`createLibrary()`的开头调用，它遍历所有内容并假定它已完全初始化`EnterLibrary`*`printVidLibrary()``videos`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:30:22.050

`videos = new Library[MAX_ITEMS];`不初始化库项目，因此每个项目都是空的。试试这个

```
videos = new Library[MAX_ITEMS];
for(int x = 0; x < MAX_ITEMS; x++)
  videos[x] = new Library(); 
```

如果视频参数为空，您还可以签入 printVidLibrary 以避免异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:47:09.950

你错了，你脑子有问题！

如果我知道您想再次检查您的开关（例如在添加视频之后）：您应该在开关周围使用循环，而不是创建*新*的，因此是 video-virgin "EnterLibrary" 对象。

一些代码：

```
while (i = scannerObject.nextInt()) {
  switch(i) {
    case 1:
        System.out.println ("1 - Add Videos");
        if (size < MAX_ITEMS) {
          Library video = createLibrary();
          videos[size++] = video;
        }
        break;
    case 2:
        System.out.println ("2 - Show Videos");
        printVidLibrary(videos);
        break;
    case 3:
        System.out.println ("3 - Search Videos");
        searchLibrary(videos);
        break;
    case 4:
        System.out.println ("4 - Change Videos");
        changeLibrary(videos);
        break;      
    case 5:
        System.out.println ("5 - Delete Videos");
        deleteVideo(videos);
        break;
    default:
        System.out.println ("Unrecognized option - please select options 1-5 ");
        break;
    }
} 
```

在旁注中，我没有考虑太多，我现在有点累，但这感觉不是对 OOP 的整体好用，我可能错了，但我无法理解对于初学者来说，“EnterLibrary”对象是什么。

是的，按照 bmargulies 的建议熟悉调试器，我猜他是你最好的朋友

编辑：我编辑了代码，忘记删除你的递归调用*

# sql - 查看 HTML5 Web SQL 数据库的工具？

> ID：11092859
> 
> 赞同：2
> 
> 时间：2012-06-19T00:23:46.413
> 
> 标签：sql, database, html, web-sql

有谁知道允许我在浏览器中查看 HTML5 Web SQL 数据库的工具（如 PHPMyAdmin 或类似工具）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-04T06:43:31.510

Google Chrome 浏览器提供的开发者工具（又名 F12 工具）是您最好的选择。事实上，它不仅可以帮助您查看 Web SQL 数据库，还可以查看 localStorage、sessionStorage、IndexedDB、cookie 等。

这是导航路径：

```
Google Chrome -> Press F12 -> Application tab -> Storage Node in left navigation bar -> Web SQL node -> <Database Name> node 
```

[![在此处输入图像描述](../Images/825b3df4e0b07d1791c45e2b291ead63.png)](https://i.stack.imgur.com/76QLD.png)

有关这方面的更多详细信息，请[点击此处](https://developers.google.com/web/tools/chrome-devtools/manage-data/local-storage)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:31:26.417

有许多适用于各种系统的 SQLite 浏览器。我喜欢[SQLite Manager](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)，因为它只是 Firefox 的一个插件。在我的 OSX Lion 安装中，sqlite 文件位于此处：`/Users/my_name/Library/Application Support/Firefox/Profiles/1e3lwibu.default/`，但您可以使用扩展名在系统上搜索该位置`.sqlite`。

# jquery - 未记录的 jQuery .ready 函数签名

> ID：11092863
> 
> 赞同：0
> 
> 时间：2012-06-19T00:24:10.137
> 
> 标签：jquery

我发现我可以将一组回调传递给 jQuery(document).ready()：

```
var test1 = function(){alert('test1')}, test2 = function(){alert('test2')};
$(document).ready([test1,test2])​ 
```

它不适用于 .bind() 或其别名，例如 .click()。对 jsfiddle 的快速测试表明，这个功能至少从 jQuery 1.5.2 开始就已经存在，但我没有在任何地方看到它的文档。我只是在文档中错过了它吗？使用未记录的函数签名有缺点吗？作为一个附带问题，您是否发现其他有用的未记录的 jQuery 功能很有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:27:20.627

> 使用未记录的函数签名有缺点吗？

**是的。**

好的，我再补充一句：如果不是文档，则不支持=> 不可靠。

# drupal-7 - Drupal7：以编程方式更改节点权限

> ID：11092868
> 
> 赞同：2
> 
> 时间：2012-06-19T00:25:06.160
> 
> 标签：drupal-7

我正在创建一个自定义 Drupal 7 模块，并在我的模块中以编程方式创建一个节点。总而言之，它是这样的：

```
$node = new stdClass();
$node->type = 'donation';
node_object_prepare($node);
$node->title = 'Donation made on ' . date('r');
node_save($node); 
```

如何修改/设置这个动态创建的节点的权限，以便只有管理员可以访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:11:46.773

我使用了[内容访问](http://drupal.org/project/content_access "内容访问")模块，它解决了我的问题。

# javascript - 使用 if then 语句显示/隐藏 div (javascript)

> ID：11092869
> 
> 赞同：1
> 
> 时间：2012-06-19T00:25:39.870
> 
> 标签：javascript, jquery, show-hide, if-statement

我在这里设置了这个显示/隐藏：http: [//jsfiddle.net/TwDSx/38/](http://jsfiddle.net/TwDSx/38/)

我想做的是，如果内容正在显示，则加号消失，反之亦然，如果内容未显示，则隐藏减号并显示加号。

我阅读了有关使用图像交换的文章，但仅使用 html/css 什么也没有。另外，如果可能的话，我想将 javascript 保留在 html 之外，并在外部调用它。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:29:18.033

编辑 ：

您可以在单击时附加事件处理程序以切换`+`或`-`按钮的显示属性

```
$('#hide,#show').click(function(){
  $('#hide,#show').toggle();
}) 
```

快速演示：http: [//jsfiddle.net/TwDSx/39/](http://jsfiddle.net/TwDSx/39/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:34:46.090

我稍微修改了您的 Javascript 并对其进行了扩展，以便您可以将其保存在外部文件中，您只需要确保在`#show`加载已显示内容的页面时使用 CSS 隐藏 div，反之亦然`#hide`。

Javascript如下：

```
$('#show').click(function() {
    ShowClick();
});  

$('#hide').click(function() {
    HideClick();
});

//This Javascript can be external
function ShowClick() {
    $('#content').toggle('slow');
    $('#hide, #show').toggle();
};

function HideClick() {
    $('#content').toggle('fast');
    $('#show, #hide').toggle();
}; 
```

Js-Fiddle 可以在这里看到：http: [//jsfiddle.net/mtAeg/](http://jsfiddle.net/mtAeg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T02:20:29.237

我认为最简单的解决方案是只有一个按钮，`#toggle`然后像这样更改该按钮的内容：

```
$('#toggle').click(function () {
    if (this.innerHTML == '-') {
        $('#content').slideUp('fast');
        this.innerHTML = '+';
    } else {
        $('#content').slideDown('slow');
        this.innerHTML = '-';
    }
}); 
```

[小提琴](http://jsfiddle.net/TwDSx/41/)

# objective-c - 打印 BOOL 类型时出现 NSLog 问题

> ID：11092874
> 
> 赞同：-2
> 
> 时间：2012-06-19T00:26:35.833
> 
> 标签：objective-c, xcode, nslog

（XCode 4.3）为什么在带有 EXC_BAD_ACCESS 的 NSLog 语句中出现以下崩溃？

```
BOOL autoFlag
@property BOOL autoFlag
@synthesize autoFlag

[object setAutoFlag:YES]

NSLog(@"%@", [object autoFlag]);  //crashes here in debugger with EXC_BAD_ACCESS 
```

我设法用`NSLog(@"%d"...`,来解决它`1`，但为什么不起作用`@"%@"`？我以为它只是将值转换为字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T00:46:45.590

%@ 用于打印作为 NSObject 类的后代的对象的描述，但是可以将其覆盖以使您的对象打印您想要的任何内容。

除非 autoFlag 是一个对象，否则它将使您的程序崩溃。在 NSLog 语句中出现这些类型的错误是很常见的，因为编译器不能告诉你想要打印什么样的“东西”，而且大多数时候它不能事先知道（它会在哪里有一些例外告诉您您使用了错误的标识符）。

如果您想看到类似“True”或“YES”的内容，那么您需要类似的内容

```
NSLog(@"Auto Flag: %@",object.autoFlag? @"True":@"False"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T00:45:22.940

看看：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

`%d`之所以有效，是因为您告诉它将布尔值打印为整数，因此您将使用此方法返回`0`(false) 或(true)。`1`布尔值没有特定的格式化程序。

您遇到了崩溃，因为代码期望使用 指向内存地址的指针`%@`，而是给它一个原始数据类型，在本例中为布尔值。当应用程序尝试使用此地址并且那里没有对象时，您会得到一个`EXEC_BAD_ACCESS`.

# arrays - 提取 2 个数字 n 次并将加法放回 O(n) 而不是 O(n*log(n))

> ID：11092877
> 
> 赞同：23
> 
> 时间：2012-06-19T00:27:09.180
> 
> 标签：arrays, algorithm, list, math, data-structures

我正在用我的 O(n*log(n)) 解决方案提出我的教授在课堂上展示的问题：

给定一个`n`数字列表，我们希望执行以下`n-1`时间：

*   从列表中提取两个最小元素`x,y`并呈现它们
*   创建一个新号码`z`，其中`z = x+y`
*   放回`z`列表

`O(n*log(n))`为和建议数据结构和算法`O(n)`

解决方案：

我们将使用最小堆：

只创建一次堆需要 O(n)。之后，提取两个最小元素将花费 O(log(n))。放入堆中`z`需要 O(log(n))。

执行上述`n-1`时间将花费 O(n*log(n))，因为：

```
O(n)+O(n∙(logn+logn ))=O(n)+O(n∙logn )=O(n∙logn ) 
```

但是我怎么能在 O(n) 中做到这一点？

**编辑：**

`x,y`通过说：“从列表中提取两个最小元素并**呈现它们**”，我的意思是`printf("%d,%d" , x,y)`，其中`x`和`y`是当前列表中的最小元素。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T02:59:52.980

这不是一个完整的答案。但是，如果列表已排序，那么您的问题在`O(n)`. 为此，请将所有数字排列在一个链表中。保持一个指向头部的指针，并在中间的某个地方。在每一步中，从头部取出顶部的两个元素，打印它们，将中间指针推进到总和应该到达的位置，然后插入总和。

起始指针将移动接近`2n`时间，中间指针将移动大约`n`时间，并带有`n`插入。所有这些操作都是`O(1)`这样的总和是`O(n)`。

一般来说，您无法按时间排序`O(n)`，但在一些特殊情况下您可以。所以在某些情况下是可行的。

一般情况当然是无法及时解决的`O(n)`。为什么不？因为给定您的输出，`O(n)`您可以及时运行程序的输出，按顺序建立成对总和列表，并将它们从输出中过滤掉。剩下的是按排序顺序排列的原始列表的元素。这将给出一个`O(n)`通用的排序算法。

*更新：*我被要求展示*你如何从输出 (10, 11), (12, 13), (14, 15), (21, 25), (29, 46) 到输入列表？* 诀窍是你总是把所有东西都整理好，然后你就知道怎么看。对于正整数，下一个即将使用的总和将始终位于该列表的开头。

```
Step 0: Start
  input_list: (empty)
  upcoming sums: (empty)

Step 1: Grab output (10, 11)
  input_list: 10, 11
  upcoming_sums: 21

Step 2: Grab output (12, 13)
  input_list: 10, 11, 12, 13
  upcoming_sums: 21, 25

Step 3: Grab output (14, 15)
  input_list: 10, 11, 12, 13, 14, 15
  upcoming_sums: 21, 25, 29

Step 4: Grab output (21, 25)
  input_list: 10, 11, 12, 13, 14, 15
  upcoming_sum: 29, 46

Step 5: Grab output (29, 46)
  input_list: 10, 11, 12, 13, 14, 15
  upcoming_sum: 75 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T01:32:52.753

这在一般情况下是不可能的。

您的问题陈述表明您必须将数组缩减为单个元素，总共执行 n-1 次缩减操作。因此，所执行的归约操作的数量在 O(n) 的数量级上。为了实现 O(n) 的*总体*运行时间，每个归约操作必须在 O(1) 中运行。

您已经明确定义了归约操作：

*   删除数组中的 2 个最小元素并打印它们，然后
*   将这些元素的总和插入到数组中。

如果您的数据结构是一个排序列表，那么在 O(1) 时间内删除两个最小元素（将它们从列表末尾弹出）是微不足道的。但是，在 O(1) 中重新插入元素是不可能的（在一般情况下）。正如 SteveJessop 指出的那样，如果您可以在 O(1) 时间内插入排序列表，则结果操作将构成 O(n) 排序算法。但是没有这样的已知算法。

这里有一些例外。如果您的数字是整数，您可以使用“基数插入”来实现 O(1) 插入。如果您的数字数组在数轴中足够稀疏，您可以推断出 O(1) 中的插入点。还有许多其他例外，但它们都是例外。

这个答案本身并不能回答你的问题，但我相信它的相关性足以保证答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:37:14.800

如果值的范围小于 n，那么这可以在 O(n) 中解决。

1> 创建一个大小等于值范围的数组 mk 并将其初始化为全零

2> 遍历数组，在数组元素的位置增加mk的值。即如果数组元素是 a[i] 则递增 mk[a[i]]

3) 为了在每个 n-1 次操作之后呈现答案，请遵循以下步骤：

有两种情况：

案例 1：所有 a[i] 都是正数

```
 traverse through mk array from 0 to its size
        cnt = 0
        do this till cnt doesn't equal 2
          grab a nonzero element decrease its value by 1 and increment cnt by 1
        you can get two minimum values in this way
        present them 
        now do mk[sum of two minimum]++ 
```

案例 2：一些 a[i] 是负数

```
 <still to update> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T03:56:55.450

O(nlogn) 很简单 - 只需使用堆、trap 或跳过列表。

O(n) 听起来很难。

```
https://en.wikipedia.org/wiki/Heap_%28data_structure%29
https://en.wikipedia.org/wiki/Treap
https://en.wikipedia.org/wiki/Skip_list 
```

# c# - 如何更新 ToggleButton 内容的颜色？

> ID：11092878
> 
> 赞同：7
> 
> 时间：2012-06-19T00:27:15.457
> 
> 标签：c#, wpf, silverlight, xaml

对于我的 WP7 应用程序，当 ToggleButton 处于选中状态时，我希望内容颜色反转（按钮从黑色变为白色，文本从白色变为黑色）。当内容是文本时，这非常有用，因为 ToggleButton 负责更改颜色。但是，对于其他类型的内容，例如 Patch 对象，情况并非如此。我用 Path 对象替换了 ToggleButton 的内容，并且它的颜色没有改变（当处于选中状态时，ToggleButton 背景从黑色变为白色，并且 Path 对象保持白色而不是变为黑色）。

我做的第一件事是将 Path 对象的 Fill 属性绑定到它的父前景色。但这也没有用。我可以尝试使用 DataTrigger，但 Silverlight/WP 不支持它们。

我更新了文本以使用路径（绘制暂停符号），并且路径的颜色与文本的行为不同。知道为什么吗？我怎么能解决这个问题？

```
<ToggleButton Grid.Column="0" x:Name="PauseButton">
    <ToggleButton.Content>
        <Path Name="PauseIcon" Fill="White" 
                Data="M0,0 0,27 8,27 8,0z M14,0 14,27 22,27 22,0" />
    </ToggleButton.Content>
</ToggleButton> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T11:33:20.310

用途[`Checked`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.checked%28v=vs.90%29)和[`Unchecked`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.unchecked%28v=vs.90%29)事件：

```
<ToggleButton Grid.Column="0" x:Name="PauseButton" 
              Background="Black"
              Checked="PauseButton_Checked"
              Unchecked="PauseButton_Unchecked" 
              Style="{DynamicResource ToggleButtonStyle}">
    <Path x:Name="PauseIcon" Fill="White" 
        Data="M0,0 0,27 8,27 8,0z M14,0 14,27 22,27 22,0" />
</ToggleButton> 
```

并应用`ToogleButton`背景和`Path`填充：

```
private void PauseButton_Checked(object sender, RoutedEventArgs e)
{
    (sender as ToggleButton).Background = Brushes.White;
    PauseIcon.Fill = Brushes.Black;
}

private void PauseButton_Unchecked(object sender, RoutedEventArgs e)
{
    (sender as ToggleButton).Background = Brushes.Black;
    PauseIcon.Fill = Brushes.White;
} 
```

`ToggleButtonStyle`用于（如果需要）禁用`Microsoft_Windows_Themes:ButtonChrome`光标在按钮上或按下按钮时的行为：

```
<Style x:Key="ButtonFocusVisual">
    <Setter Property="Control.Template">
        <Setter.Value>
            <ControlTemplate>
                <Rectangle Stroke="Black" StrokeDashArray="1 2"
                            StrokeThickness="1" Margin="2" 
                            SnapsToDevicePixels="true"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
    <GradientStop Color="#F3F3F3" Offset="0"/>
    <GradientStop Color="#EBEBEB" Offset="0.5"/>
    <GradientStop Color="#DDDDDD" Offset="0.5"/>
    <GradientStop Color="#CDCDCD" Offset="1"/>
</LinearGradientBrush>
<SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF707070"/>
<Style x:Key="ToggleButtonStyle" TargetType="{x:Type ToggleButton}">
    <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
    <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
    <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
    <Setter Property="HorizontalContentAlignment" Value="Center"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Padding" Value="1"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ToggleButton}">
                <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" SnapsToDevicePixels="true" 
                                                        Background="{TemplateBinding Background}" 
                                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                                        RenderDefaulted="{TemplateBinding Button.IsDefaulted}">
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                        Margin="{TemplateBinding Padding}" 
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                        RecognizesAccessKey="True"/>
                </Microsoft_Windows_Themes:ButtonChrome>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="#ADADAD"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T06:57:34.450

我不得不猜测在某处定义文本行为的样式（TextBlock）。

您可以通过对路径使用以下样式来实现相同的目的：

```
 <ToggleButton Grid.Column="0" x:Name="PauseButton">
        <ToggleButton.Content>
            <Path Name="PauseIcon" Data="M0,0 0,27 8,27 8,0z M14,0 14,27 22,27 22,0">
                <Path.Style>
                    <Style TargetType="{x:Type Path}">
                        <Setter Property="Fill" Value="White"></Setter>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=PauseButton, Path=IsChecked}" Value="True">
                                <Setter Property="Fill" Value="Black"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Path.Style>
            </Path>
        </ToggleButton.Content>
    </ToggleButton> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:55:15.067

尝试在您的风格中使用 VisualStates，您可以使用 Expression Blend 轻松完成。

在我的帖子末尾是我的风格的一个例子，当我的内容演示者被禁用时，我将它的前景放在另一种颜色上。

Button 和 ToggleButton 之间的唯一区别在于它具有 Toggled 状态，您必须在其中添加状态并更改前景。状态看起来有点像这样：

```
<VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle">
                                                <EasingColorKeyFrame KeyTime="0" Value="#FF7052A8"/>
                                            </ColorAnimationUsingKeyFrames>
                                        <ColorAnimation Duration="0" To="#FFbab0c7" Storyboard.TargetName="contentPresenter"
                                                                        Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" />
                                        </Storyboard>
                                    </VisualState> 
```

所以这是我的按钮风格的一个例子。只需创建您自己的并将其分配给您的 ToggleButton。

```
<Style TargetType="{x:Type Button}">
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">
                                <Storyboard>
                                    <ColorAnimation Duration="0" To="White" Storyboard.TargetName="contentPresenter"
                                                                    Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle">
                                            <EasingColorKeyFrame KeyTime="0" Value="#FF532B8C"/>
                                        </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="contentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static HorizontalAlignment.Center}"/>
                                    </ObjectAnimationUsingKeyFrames> 
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle">
                                        <EasingColorKeyFrame KeyTime="0" Value="#FF6137ae"/>
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle">
                                            <EasingColorKeyFrame KeyTime="0" Value="#FF7052A8"/>
                                        </ColorAnimationUsingKeyFrames>
                                    <ColorAnimation Duration="0" To="#FFbab0c7" Storyboard.TargetName="contentPresenter"
                                                                    Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" />
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Rectangle x:Name="rectangle" Fill="#FF371C69" RadiusX="10" RadiusY="10"/>

                    <ContentPresenter x:Name="contentPresenter" HorizontalAlignment="Center" Margin="0" VerticalAlignment="Center"/>

                </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="true"/>
                        <Trigger Property="ToggleButton.IsChecked" Value="true"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T06:47:37.000

尝试下一步：

```
<ToggleButton Grid.Column="0" x:Name="PauseButton">
    <ToggleButton.Content>
        <Path Name="PauseIcon" Fill="{Binding ElementName=PauseButton, Path=Foreground}" 
                Data="M0,0 0,27 8,27 8,0z M14,0 14,27 22,27 22,0" />
    </ToggleButton.Content>
</ToggleButton> 
```

它应该工作。

# ruby-on-rails - ActionController::Base 中 url_for 的替代方案

> ID：11092882
> 
> 赞同：1
> 
> 时间：2012-06-19T00:28:03.197
> 
> 标签：ruby-on-rails, ruby

我正在尝试将 url 传递给后台进程，以便它可以在 facebook/tweet 上发布它。

```
class Weeklychecks < ActionController::Base
.
.
.
   def self.verifications
   .
   .
   .
   @my_url = url_for(:action => 'show', :controller => 'profiles', :only_path => false)
   .
   end
end 
```

但似乎不推荐使用此代码：http: [//apidock.com/rails/ActionController/Base/url_for](http://apidock.com/rails/ActionController/Base/url_for)

我在基类是ApplicationController的时候用过这个方法，但是这个需要用到ActionController::Base。我尝试添加 include ActionView::Helpers::UrlHelper 但它也不起作用。有解决方法吗？

我正在运行 Rails 3.2.3

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T07:28:48.990

首先不`url_for`被弃用。当代码被重新组织时，apidock 有时会解释一个方法不再是它曾经的位置这一事实，因为该方法实际上已被删除。

url_for 和 profile_url 等所有辅助方法都作为实例方法包含在内，这就是为什么您不能从类方法中调用它们的原因。

你应该能够做到

```
Rails.application.routes.url_helpers.url_for(...) 
```

无论你在哪里。喜欢的帮手`profile_path`也住在这里。如果要生成绝对 url，则需要传入 tr host。通常这是从控制器正在处理的请求的主机中获取的，但这显然在这种情况下是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:11:15.693

如果您的路线中有

```
resources :profiles 
```

你可以做

```
@my_url = profile_url(some_profile) 
```

# nhibernate - 删除引用自身的实体

> ID：11092883
> 
> 赞同：1
> 
> 时间：2012-06-19T00:28:12.557
> 
> 标签：nhibernate

我在消息线程中有一个消息类。每条消息都有对线程根消息的引用：

```
<class name="Message">
  ...
  <many-to-one name="Root" not-null="true"/>
</class>

<joined-subclass name="Comment" extends="Message">
  ...
</joined-subclass> 
```

现在我想删除评论。这适用于除根注释之外的所有注释。删除根注释，其中 Root 属性指向消息本身，会产生以下异常：

```
NHibernate.PropertyValueException : not-null property references a null or transient value 
at NHibernate.Engine.Nullability.CheckNullability(Object[] values, IEntityPersister persister, Boolean isUpdate)
at NHibernate.Event.Default.DefaultDeleteEventListener.DeleteEntity(IEventSource session, Object entity, EntityEntry entityEntry, Boolean isCascadeDeleteEnabled, IEntityPersister persister, ISet transientEntities)
at NHibernate.Event.Default.DefaultDeleteEventListener.OnDelete(DeleteEvent event, ISet transientEntities)
at NHibernate.Impl.SessionImpl.FireDelete(DeleteEvent event)
at NHibernate.Impl.SessionImpl.Delete(Object obj) 
```

当我从 NHibernate 3.0 升级到 3.3 时，首先出现此错误。当我删除`not-null`约束时，我得到一个 SQL 异常，指示违反了相应的列约束。现在我想知道为什么 NHibernate 实际上会尝试保存要删除的实体。有谁知道如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:36:39.177

not-null 应该设置为 false，因为这些条目中至少有一个需要它：第一个“父亲”。

# ruby-on-rails - 创建一个继承自Ruby中另一个类的类

> ID：11092884
> 
> 赞同：0
> 
> 时间：2012-06-19T00:28:14.483
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试创建一个名为 Musician 的类，它继承自我的 Person 类，然后添加一个乐器属性。我知道我的 Musician 课程是错误的，但我只是想知道 Ruby 中的正确格式是什么。这是我的所有代码：

```
class Person
  attr_reader :first_name, :last_name, :age
  def initialize (first_name, last_name, age)
    @first_name = first_name
    @last_name = last_name
    @age = age
  end
end

p = Person.new("Earl", "Rubens-Watts", 2)
p.first_name
p.last_name
p.age

class Musician < Person
  attr_reader :instrument
  def initialize (instrument)
    @instrument = instrument
  end
end

m = Musician.new("George", "Harrison", 58, "guitar")
m.first_name + " " + m.last_name + ": " + m.age.to_s
m.instrument 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:35:32.960

如果您希望在 Musician 中使用 first_name、last_name 和 age，那么您必须将它们包含在初始化程序中并利用`super`. 就像是：

```
class Musician < Person
  attr_reader :instrument

  def initialize(first_name, last_name, age, instrument)
    super(first_name, last_name, age)
    @instrument = instrument
  end
end 
```

`super`在父类内部调用同名方法。

**更新**

我会把重点带回家。在这种完全虚构的情况下，您也可以使用 super ：

```
class GuitarPlayer < Person
  attr_reader :instrument

  def initialize(first_name, last_name, age)
    super(first_name, last_name, age)
    @instrument = 'guitar'
  end
end 
```

我们没有更改要初始化的参数，但我们已经扩展了行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:33:46.897

That is the format for extending a class.

The problem is that you're calling the `Musician` initializer with more attributes than it accepts.

The error message you get states this pretty explicitly. When reporting or asking for help regarding an error, the error message you get should be shared so we don't have to guess or run your program.

You have at least options:

*   Give `Musician` an `initialize` that takes all the params, grabs instrument, and passes the rest.
*   Use Rails' Hash-based `initialize` (or roll your own, but you tagged it with rails).

# javascript - 仅针对 x 轴防止 touchmove 事件，并让 Safari Mobile 和 Android 中的 y 轴页面滚动

> ID：11092888
> 
> 赞同：5
> 
> 时间：2012-06-19T00:28:49.500
> 
> 标签：javascript, scroll, slider, touch, mobile-safari

我想建立一个经典的画廊，用手指可以将照片向左或向右移动以查看下一张或上一张照片。我使用 jQuery 绑定事件 touchstart、touchmove、touchend 来使用属性 event.pageX 计算照片的位置。问题是当移动手指时页面开始滚动。touchmove 的监听器立即停止被调用。为了解决我在 touchmove 监听器中放置的问题，调用 event.preventDefault() 并定期调用监听器并且页面停止滚动。我希望手指可以移动照片，同时可以滚动页面。我在苹果网站上看到这种情况经常发生（参见这个页面[http://www.apple.com/osx/](http://www.apple.com/osx/)），甚至这个脚本也这样做[http://iosscripts.com/iosslider-jquery-horizo​​ntal-slider-for-iphone-ipad-safari/](http://iosscripts.com/iosslider-jquery-horizontal-slider-for-iphone-ipad-safari/)

我想知道幕后的概念。我不明白我必须做些什么来解决这个问题。我什至尝试使用 preventDefault 并手动设置由 pageY 计算的 $(window).scrollTop 但效果非常难看。

# php - 来自 php foreach 循环的 Javascript getElementById

> ID：11092909
> 
> 赞同：0
> 
> 时间：2012-06-19T00:32:04.700
> 
> 标签：php, javascript, loops, foreach, getelementbyid

所以我有一个php foreach循环如下，

```
$i = 1;
foreach($rows as $record){
       <div id='ytplayer".$i++."'>
       </div>");
} 
```

然后我有javascript，它使用`getElementById`它并且每次循环时都需要获取div，这本质上是一个数组，但我该怎么做，我知道我下面的内容不会工作，但是像这样，因为我知道这非常接近你如何让它在 php 中工作

```
document.getElementById('ytplayer[i]'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:58:51.383

干得好！

[http://jsfiddle.net/epinapala/5yUAx/](http://jsfiddle.net/epinapala/5yUAx/)

假设您的 PHP 编写了以下 div（例如，添加了一个、两个等...）

```
<div id='ytplayer1'>one</div>
<div id='ytplayer2'>two</div>
<div id='ytplayer3'>three</div>
<div id='ytplayer4'>four</div>

for(var i=1; i<5; i++){
var x=document.getElementById('ytplayer'+i);
  alert(x.innerHTML);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:37:15.853

```
document.getElementById('ytplayer'+i); 
```

# java - Struts 2 中的会话

> ID：11092911
> 
> 赞同：5
> 
> 时间：2012-06-19T00:32:11.770
> 
> 标签：java, session, struts2

这是在 Struts2 的会话中存储值的正确方法吗？

```
Map<String, Object> session = ActionContext.getContext().getSession();
session.put("user", "USERNAME"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:45:12.883

struts 2.x 中的 SessionAware 接口，我们的 Action 类需要实现 SessionAware 接口，以便将 HTTP Session 行为获取到我们的 Action 类中。

如果我们从 SessionAware 接口实现，我们需要在我们的动作类中通过 SessionAware 覆盖方法 setSession()。如果我们从 SessionAware 接口实现我们的动作类，那么 struts 2 控制器不会完全注入会话对象，但它会注入具有类似行为的 Map 对象。

```
 Map m;
 public void setSession(Map m)
    {
        this.m=m;
    }

 public String execute()
    {
        m.put("user", "USERNAME");

        return SUCCESS;
    } 
```

# android - 安卓 4.0 全屏

> ID：11092913
> 
> 赞同：1
> 
> 时间：2012-06-19T00:32:35.153
> 
> 标签：android, debugging, android-fragments, fullscreen, android-4.0-ice-cream-sandwich

我想在 android 4.0 中制作全屏，我使用`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"` 的操作栏消失了，但状态栏没有出现

我用

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

前`"setContentView()"`

好的，全屏！！但是，当对话框或弹出窗口显示时，状态栏再次出现，我阅读源代码并找到单词：

*   有一个限制：因为导航控件非常重要，所以最少的用户交互会导致它们立即重新出现。

我可以随时全屏吗？帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:39:36.417

> 有一个限制：因为导航控件非常重要，最少的用户交互将导致它们立即重新出现。

换句话说，Android 告诉您存在限制，因为阻止用户访问导航控件是个坏主意。这样做肯定会破坏用户体验，并且可能会激怒很多用户。也就是说，除非您有*充分*的理由这样做，否则您应该保持原样。

# mysql - SQL 通配符奇怪，需要更严格的结果

> ID：11092915
> 
> 赞同：0
> 
> 时间：2012-06-19T00:32:41.153
> 
> 标签：mysql, wildcard

```
SELECT *
FROM list
WHERE list_item LIKE "%_1375_%" 
```

返回不应该的结果。例如，list_item 中的结果为*13753*而不是*1375*，即使 3 出现在下划线之前。

```
 _13753_  and _1375_ are written above and not suppose to be italic. 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:37:24.680

[从这里的](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)MySQL 参考手册

> SQL 模式匹配使您可以使用“_”匹配任何单个字符，使用“%”匹配任意数量的字符（包括零个字符）。

因此，您必须对它们进行转义以匹配文字下划线字符。像这样：

```
SELECT * FROM list
WHERE list_item LIKE "%\_1375\_%" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:37:17.400

下划线表示任何字符。您是否正在寻找带有下划线的值？在这种情况下，您需要逃避它

```
SELECT *
FROM list
WHERE list_item LIKE "%\_1375\_%" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:48:48.697

试试这个

```
LIKE '%[_]1375[_]%' 
```

# java - 禁止调用 java 扩展中的某些类

> ID：11092919
> 
> 赞同：1
> 
> 时间：2012-06-19T00:33:12.743
> 
> 标签：java, jar, extensibility

我们正在构建一个引擎，允许我们随时添加新的 jar 文件，加载这些 jar 文件并查找某些特定功能，并运行公开该功能的代码。目前的计划是使用 ServiceLoader 来执行此操作（只是一个额外的细节；我不同意这个想法）。目前让我们假设我们完全控制要加载哪些 jar 文件（很大的假设——我想我最终也会发布一些关于它的内容）。

鉴于这一切，我想限制对某些类的这些扩展的访问。对于一个假的例子，我们要确保`java.io.PrintStream`他们使用 而不是使用`our.better.PrintStreamSolution`。

我真的不知道我能在这里做什么。由于目前我们拥有将作为扩展发布的代码，我们可以进行非常彻底的代码审查，但我宁愿在安装时进行静态分析，或者在运行时实际抛出错误。知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:45:50.037

您需要将 API 列入白名单。反射 API 无处不在，因此您无法将其列入黑名单。为此，您需要使用 ASM 之类的库来检查 jar。虽然您可以使用`URLClassLoader`自定义 URL 连接处理程序，但我建议使用自定义类加载器。我强烈建议避免与全局状态有关的任何事情，例如`ServiceLoader`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:50:30.607

创建一个特殊的 ClassLoader 来读取 JAR，并覆盖方法“loadClass”，这样如果类加载器试图从“java.io”包中加载一个类，它就会抛出 SecurityException。像这样的东西：

```
protected Class loadClass(String name, boolean resolve)
                                            throws ClassNotFoundException { 
       if (name.startsWith("java.io")) 
             throw new SecurityException("java.io access not allowed on extensions");

        return super.loadClass(name,resolve); 
} 
```

请记住在 ClassLoader 的重写 findClass 方法中实现您的类加载逻辑。

如果扩展可以获取另一个类加载器（如系统类加载器）来加载“禁止”类，则此检查可能会失败。

如评论中所示，仅当安全管理器可以识别正在从扩展中访问包时，才可以使用 SecurityManager 的替代方法。

# ios - GestureRecognizer 干扰了 MapKit 弹出窗口

> ID：11092921
> 
> 赞同：1
> 
> 时间：2012-06-19T00:33:59.897
> 
> 标签：ios, mapkit, uigesturerecognizer

我有一个简单的 MapKit 应用程序在 iOS 中运行良好。它有注释，当用户单击它们时，会显示带有标题/副标题的小灰色默认弹出窗口。我什至在其中添加了一个 UIButton 视图。

所以问题是，我的地图上方有一个搜索栏。每当用户单击 MapView 时，我想从搜索框中退出 FirstResponder，因此我添加了一个简单的点击手势响应器。效果很好，除了现在不再出现灰色的小细节弹出窗口（只有注释图钉）！我仍然可以点击、缩放、移动等。只是没有弹出窗口。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
tap.cancelsTouchesInView = NO;
tap.delaysTouchesBegan = NO;
tap.delaysTouchesEnded = NO;
[mapView addGestureRecognizer:tap];

-(IBAction)tapped:(UITapGestureRecognizer *)geture {
    [searchBar resignFirstResponder];
} 
```

有没有可能两全其美？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T03:01:36.527

我使用类似于以下的委托方法在应该转到我的自定义视图的平移手势识别器的触摸和应该转到包含我的自定义视图的滚动视图的触摸之间进行仲裁。类似的东西可能对你有用。

```
// the following UIGestureRecognizerDelegate method returns YES by default.
// we modify it so that the tap gesture recognizer only returns YES if
// the search bar is first responder; otherwise it returns NO.
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
  if ((gestureRecognizer == self.tapGestureRecognizer) &&
      (gestureRecognizer.view == self.mapView) &&
      [searchBar isFirstResponder])
  {
    return YES;  // return YES so that the tapGestureRecognizer can deal with the tap and resign first responder
  }
  else
  {
    return NO;  // return NO so that the touch is sent up the responder chain for the map view to deal with it
  }
} 
```

# css - CSS em 测量如何用于高度或边框半径测量？

> ID：11092927
> 
> 赞同：5
> 
> 时间：2012-06-19T00:34:24.023
> 
> 标签：css, em

我知道“em”度量是字体大小的相对单位，如果它是在像 px 这样的绝对单位中指定的，则相对于包含元素的字体大小，或者相对于浏览器中的默认字体大小。

但我试图了解如何使用 em 作为盒子元素（如 div）的边框半径的测量值。我假设它与如何使用 em 作为盒子宽度或高度的测量值有关。

它仍然与字体大小有关吗？具体是如何测量的？我能够找到的关于如何计算边界半径的解释似乎都是基于 px 单位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:02:43.423

它似乎与字体大小有关。最后它仍然是一个度量单位，比如 px。

这个**[例子](http://jsfiddle.net/YegmH/4/)**可能会让你更好地了解它是如何工作的。

**标记：**

```
<div id="A"></div>
<div id="B"></div>
<div id="text-height"></div>
<p>Some text</p>

<div id="C"></div>
<div id="D"></div> 
```

**CSS：**

```
p {
    line-height: 1em;
    background: grey;
    display: inline-block;
    position: relative;
    top: -4px;
}
#A {
    height: 4em;
    background: red;
    width: 1em;
    display: inline-block;
}
#B {
    height: 2em;
    background: blue;
    width: 1em;
    display: inline-block;
}
#text-height {
    height: 1em;
    background: green;
    width: 1em;
    display: inline-block;
}
#C, #D {
    height: 4em;
    width: 4em;
    display: inline-block;
}
#C {
    border-radius: 2em;
    background: red;
}
#D {
    border-radius: 1em;
    background: blue;
} 
```

**图片：**

![在此处输入图像描述](../Images/29e27adfd152c4ca31e4148bc8a8c153.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T02:15:44.890

我在浏览器中尝试了这个，[它仍然与 element 的 font-size 属性相关](http://jsfiddle.net/RecTM/)。如果未定义字体大小，它会从具有字体大小的下一个父级或浏览器默认值（[通常为 16px](http://www.alistapart.com/articles/howtosizetextincss/)；TIL）继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T02:41:27.130

我可能会误解你的问题，但我认为它是这样工作的。如果字体大小为 12px，并且您制作了一个边框半径为 1em 的框，那么它将具有 12px 的边框半径（如果是 13px，则为 13px）。如果您需要框的边框半径与文本保持相同的比例，而不管文本的大小，这很有用。瞬间，如果您有一个带有文本的框，可以说：

```
<style>
  // lets say the browser gives the text a default size of 16px on a pc
  .box {border-radius:5px}// lets say the box's size scales with the text
</style> 
```

看起来盒子几乎有完全的圆角。但是让我们说在 iphone 上，它为文本提供了 80 像素的默认大小（夸张），看起来好像盒子有几乎平的角。解决方案是使用 em 使框的角与文本一起缩放。

# c# - 检查是否列表 包含任何其他列表

> ID：11092930
> 
> 赞同：131
> 
> 时间：2012-06-19T00:34:57.033
> 
> 标签：c#, list, loops, c#-4.0, subset

我有一个这样的参数列表：

```
public class parameter
{
    public string name {get; set;}
    public string paramtype {get; set;}
    public string source {get; set;}
}

IEnumerable<Parameter> parameters; 
```

还有一个字符串数组我想检查它。

```
string[] myStrings = new string[] { "one", "two"}; 
```

我想遍历参数列表并检查源属性是否等于任何 myStrings 数组。我可以使用嵌套的 foreach 来做到这一点，但我想学习如何以更好的方式做到这一点，因为我一直在玩 linq 并且喜欢可枚举的扩展方法，比如 where 等，所以嵌套的 foreach 感觉不对。是否有更优雅的首选 linq/lambda/delete 方式来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-06-19T00:38:18.973

您可以使用嵌套`Any()`进行此检查，该检查可用于任何`Enumerable`：

```
bool hasMatch = myStrings.Any(x => parameters.Any(y => y.source == x)); 
```

在较大的集合上更快地执行将是投影`parameters`到`source`然后使用`Intersect`which 在内部使用 a `HashSet<T>`so 而不是 O(n^2) 对于第一种方法（相当于两个嵌套循环），您可以在 O(n) 中进行检查：

```
bool hasMatch = parameters.Select(x => x.source)
                          .Intersect(myStrings)
                          .Any(); 
```

此外，作为旁注，您应该将类​​名和属性名大写以符合 C# 样式指南。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-02-24T09:38:09.890

这是一个示例，用于查找另一个列表中是否存在匹配元素

```
List<int> nums1 = new List<int> { 2, 4, 6, 8, 10 };
List<int> nums2 = new List<int> { 1, 3, 6, 9, 12};

if (nums1.Any(x => nums2.Any(y => y == x)))
{
    Console.WriteLine("There are equal elements");
}
else
{
    Console.WriteLine("No Match Found!");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-30T11:34:11.063

如果两个列表都太大，并且当我们使用 lamda 表达式时，那么它会花费很长时间来获取。在这种情况下最好使用 linq 来获取参数列表：

```
var items = (from x in parameters
                join y in myStrings on x.Source equals y
                select x)
            .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-12T12:32:44.017

```
list1.Select(l1 => l1.Id).Intersect(list2.Select(l2 => l2.Id)).ToList(); 
```

```
var list1 = await _service1.GetAll();
var list2 = await _service2.GetAll();

// Create a list of Ids from list1
var list1_Ids = list1.Select(l => l.Id).ToList();

// filter list2 according to list1 Ids
var list2 = list2.Where(l => list1_Ids.Contains(l.Id)).ToList(); 
```

# windows - Windows 上的第二个管理员帐户无法杀死第一个进程

> ID：11092932
> 
> 赞同：0
> 
> 时间：2012-06-19T00:35:20.653
> 
> 标签：windows, process, account

所以我有这个名为 svbc_gm.exe 的进程，我以安装 Windows Server 时创建的用户身份启动它。这是一个主要的管理员帐户。我写了一个小批量脚本，它必须在两个用户上工作，但它对第二个管理员帐户不能双向工作。我的意思是，当我作为第一个管理员启动 svbc_gm.exe 时，第二个无法杀死它，但是当我作为第二个启动它时 - 第一个对第二个进程具有完全访问权限。注意：两个帐户都是管理员。

所以，我的问题是。我该怎么做才能让第一个管理员启动这个可执行文件时，系统自动允许第二个管理员对新进程执行所有操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:52:24.183

就平台而言，您没有提供任何详细信息，但听起来系统策略没有授予辅助管理员用户终止其他用户进程的必要权限。

如果你去控制面板 -> 管理工具 -> 本地安全设置，然后展开本地策略 -> 用户权限分配，应该有一个“调试程序”的策略。将“管理员”组添加到此策略中，您应该能够从任何管理员帐户终止该进程。

# jquery - 如何使用 jquery 在现场连续动画（增长和缩小）对象？

> ID：11092933
> 
> 赞同：0
> 
> 时间：2012-06-19T00:35:21.550
> 
> 标签：jquery

如何使用 jquery 为对象设置动画？它应该在一段时间后出现，增长，保持随机数秒，然后缩小并消失（这应该无休止地重复）。我已经尝试了几件事，但我就是无法让它工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:09:17.037

[http://jsfiddle.net/iambriansreed/8sMQF/](http://jsfiddle.net/iambriansreed/8sMQF/)

使用一些[setIntervals](http://www.w3schools.com/jsref/met_win_setinterval.asp)， jQuery [animate()](http://api.jquery.com/animate/)和[fadeIn()](http://api.jquery.com/fadein/) / [fadeOut()](http://api.jquery.com/fadeout/)。

# oracle - TO_WKTGEOMETRY 似乎不适用于多面体（Oracle）

> ID：11092936
> 
> 赞同：1
> 
> 时间：2012-06-19T00:35:49.787
> 
> 标签：oracle, spatial

我正在使用`Oracle Database 11.2`. `sdo_elem_info_array`我已经使用和`sdo_ordinate_array`变量加载了一个带有多面体的几何列。但是当我尝试检索形状的文本版本时，我只得到`MULTIPOLYGON ()`.

这个块说明了我的问题：

```
DECLARE
    v_elem_info_array sdo_elem_info_array;
    v_ordinate_array sdo_ordinate_array;
    v_boundary sdo_geometry;
BEGIN
    -- This works:
    dbms_output.put_line(SDO_UTIL.TO_WKTGEOMETRY( SDO_UTIL.FROM_WKTGEOMETRY('MULTIPOLYGON(((-109.2693 45.00528,-104.0577 44.99743,-104.05325 41.0014,-111.04673 40.99795,-111.0552 45.00132,-109.2693 45.00528)))')));

    -- This does not work:
    v_elem_info_array := sdo_elem_info_array();
    v_ordinate_array := sdo_ordinate_array();

    v_elem_info_array.extend(3);
    v_elem_info_array(1) := 1;
    v_elem_info_array(2) := 103;
    v_elem_info_array(3) := 1;

    v_ordinate_array.extend(12);
    v_ordinate_array(1) := -109.2693;
    v_ordinate_array(2) := 45.00528;
    v_ordinate_array(3) := -104.0577;
    v_ordinate_array(4) := 44.99743;
    v_ordinate_array(5) := -104.05325;
    v_ordinate_array(6) := 41.0014;
    v_ordinate_array(7) := -111.04673;
    v_ordinate_array(8) := 40.99795;
    v_ordinate_array(9) := -111.0552;
    v_ordinate_array(10) := 45.00132;
    v_ordinate_array(11) := -109.2693;
    v_ordinate_array(12) := 45.00528;

    v_boundary := sdo_geometry (2007, 8307, null, v_elem_info_array, v_ordinate_array);

    dbms_output.put_line(SDO_UTIL.TO_WKTGEOMETRY(v_boundary));
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:25:39.530

我相信问题出在你的 SDO_ELEM_INFO_ARRAY 构造上，不应该是 1003 来表示外部多边形吗？

```
v_elem_info_array := sdo_elem_info_array(1, 1003, 1); 
```

# c# - 寻求在 XNA 中为 2D 游戏创建反射“光束”的最佳方法的建议

> ID：11092939
> 
> 赞同：0
> 
> 时间：2012-06-19T00:36:19.343
> 
> 标签：c#, xna, 2d, collision-detection, sprite

对不起，如果这个问题有点开放式，但我对 C# 和 XNA 很陌生......事实上这个论坛！

我正在创建一个游戏，需要一束光从一个固定点（附加的屏幕截图左下角，属于名为 PowerStation 的类）发出，并从用户可以移动和旋转的镜子反射。我添加了每像素碰撞检测方法，可以在附加的捕获中看到（镜子变成红色）。

![这是迄今为止游戏的屏幕截图](../Images/8402af808a5c882e8e451fec7a0f101a.png)

目前我一直在尝试通过创建一个点并沿着光的路径移动它直到检测到碰撞来测试光束路径的障碍物；从那里记录行进的距离，然后以非均匀的方式将光束精灵拉伸所需的量。这已经被证明很困难，我认为这种方法还有很长的路要走。

我只是想知道是否有人对检测障碍物、它们的旋转以及确定反射光束的方向（被镜子的哪一侧击中）的最佳方法有任何建议，然后我才完全承诺可能会得到的东西真的很复杂，甚至从来没有工作过？

这是我的 Beam 类目前的样子......除了一个类之外，所有类都继承自一个名为 Object 的基类，并且 Objects 都在属于单独类 Items 的静态 objectList 中声明。抱歉，如果这是不好的，混乱的编码！

```
 class Beam : Object
{
    private Vector2 start;
    private double length;
    private Vector2 POC;

    public Beam(Vector2 pos)
        : base(pos)
    {

        spriteName = "beam";
        depth = 0.2f;
        solid = true;
        foreach (Object o in Items.objectList)
        {
            if (o.GetType() == typeof(PowerStation))
            {
                start = o.Origin;
            }
        }
    }

    public override void Update()
    {
        Point newPoint = new Point((int)Origin.X, (int)Origin.Y);
        while ((!(collision(new Mirror(new Vector2(0, 0))))) && (newPoint.X > 0) && (newPoint.Y > 0)) // && boundaries of window
        {
            newPoint.Y--; //will be changed to a Vector
        }

        POC = PointOfCollision(new Mirror(new Vector2(0, 0))); // Need to make it do POC of newPoint, not just the Beam Object!
        length = FindLength(start, new Vector2(50, 50));
        //Scale = new Vector2( , );     //amount to scale sprite

        base.Update();
    }

    private double FindLength(Vector2 pos1, Vector2 pos2)
    {
        return (Math.Sqrt(Math.Pow(Math.Abs(pos2.X - pos1.X), 2.0f) + Math.Pow(Math.Abs(pos2.Y - pos1.Y), 2.0f)));
    }
} 
```

任何帮助将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:31:53.037

忘记像素——因为镜子显然可以在任何角度，你肯定会有与镜子相交的地方，而不是在一个均匀的像素上。虽然您可以简单地将撞击点计算为偶数像素，但这会为光束产生略微错误的路径。

取而代之的是，使用您的光束并遍历所有镜子，计算光束与镜子平面的交点（处理没有相交的情况），然后检查相交以确保它在物理镜子内。记录在最短距离内发生的匹配。

您几乎可以肯定地通过提前计算所有镜子的边界框来加快计算速度，并在检查光束时注意它从当前点朝向哪个象限——您可以拒绝至少一半（通常是 3/4）的所有镜子每个镜像都有两个整数比较。

重复直到没有交叉点（光束逃逸）或者它击中了阻止它而不是反射它的东西。

如果有*很多*镜子，您可以更进一步，将屏幕分割成多个扇区，每个扇区都有一个镜子列表。只检查当前扇区中的镜像，如果没有成功，请找出它接下来进入哪个扇区并重复。这是一个更多的数学投射光束，以换取在没有单一指令的情况下排除大多数镜子。如果您正在处理用户放置的镜子，我怀疑它们是否足够值得这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T01:05:04.123

将所有内容表示为矢量：您的光束和它们反弹的形状的侧面。然后是非常简单的代数来检测交叉点和反射角。它也将比任何基于像素的检测快得多。

# cgi - 单击远程文件的链接并使用本地应用程序进行编辑

> ID：11092940
> 
> 赞同：-1
> 
> 时间：2012-06-19T00:36:40.747
> 
> 标签：cgi, executable, local

我希望能够单击具有远程服务器目录路径的链接，并能够打开本地应用程序（即记事本++）来编辑远程文件。

我可以将驱动器映射到远程服务器，以允许 notepad++.exe 在尝试运行应用程序时具有要查找的本地路径...我只需要一种方法来单击链接以自动打开 notepad++.exe远程文件进行编辑。

有任何想法吗？我知道我在这里有点含糊不清，但请询问您可能认为可能会起作用的任何澄清或其他依赖关系，我可能会添加到这个问题的要求中，我很乐意回应。

谢谢你的帮助！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:42:59.817

是的，这是一个编程问题，您如何将其编码到网页中，以允许用户单击链接以打开具有远程服务器路径的本地应用程序到要编辑的文件，这是一个多方面的问题，倾向于非编程问题，但仍然涉及编程）...实际上我大约一个小时前才找到解决方案。基本上需要做一个javascript调用，通过点击远程服务器上的文件位置传递一个ActiveX对象，然后通过javascript打开一个shell，传递notepad++.exe路径以及要打开的远程文件的文件路径。

# c# - 如何分配列表的内容 到 RichTextBox？

> ID：11092943
> 
> 赞同：4
> 
> 时间：2012-06-19T00:36:58.943
> 
> 标签：c#, winforms, generics, arraylist, richtextbox

我试过这个：

```
richTextBoxResults.Text = listStrSessionIdLines.ToString(); 
```

...但是获取 List 的 ToString() 表示形式（我想这就是它的含义：“System.Collections.Generic.List`1[System.String]”）。

...我试过这个：

```
listStrSessionIdLines.CopyTo(richTextBoxResults.Lines); 
```

...但我得到，“*参数异常未处理。目标数组不够长。检查 destIndex 和长度，以及数组的下限。* ”

这是否意味着我必须先为 RichTextBox 分配多行，或者...？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T00:43:14.653

这对我有用：

```
myRichTextBox.Lines = myList.ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T00:46:47.093

试试这个：

```
List<String> list = new List<String>();
list.Add("1");
list.Add("2");
richTextBox1.Lines = list.ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T01:01:20.117

`Most classes in the BCL have a ToString() method.`

当涉及到`List Of strSessionIdLines`ToString() 时，它会告诉您它是什么类型的对象。

例如，如果您将 an`int`转换为 a`string`将`int.ToString()`返回其值，但如果您在整数数组上执行此操作，则`int[].ToString`该`ToString()`方法不会返回例如逗号/换行符分隔的值字符串。正如你所预料的那样。

> 这就是为什么将 .ToArray 分配给 RichTextBox 的 .Lines 属性或循环（或聚合）以将字符串列表连接成一个字符串以适应 RichTextBox 的 .Text 属性。

我赖以生存的另一个技巧是当我需要调用一个方法时，例如，`String.Format`我将鼠标悬停，以便我可以看到该方法的期望 -**期望**`being the keyword`。然后说该方法想要类型 X 的参数中的参数，我声明类型 X 并将其传入。方法通常具有重载，这意味着它们可以使用不同的参数，因此按上/下滚动浏览它们也很有帮助找出在您的情况下最方便的方法。当您将参数传递给方法（在其参数中）时，键入逗号以刷新指示每个参数数据类型的工具提示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T00:43:34.510

`Aggregate`使用在序列上应用累加器函数的linq 。

```
richTextBoxResults.Text = listStrSessionIdLines.Aggregate((i, j) => i + j); 
```

# javascript - 正则表达式友好的 URL

> ID：11092951
> 
> 赞同：-1
> 
> 时间：2012-06-19T00:37:32.243
> 
> 标签：javascript, regex

我正在尝试创建一个动态正则表达式来选择基于段或整个 URL 的 URL。

例如，我需要得到`var.match(/http:\/\/www.something.com\/something/)`

`match()`需要转换里面的文本，以便`\`在它们前面有特殊字符，例如`"\/"`。我找不到将 URL 转换为执行此操作的函数？有吗？

如果不是，哪些字符需要`\`在前面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:48:14.297

我在生成动态正则表达式时使用它来转义字符串：

```
var specials = /[*.+?|^$()\[\]{}\\]/g;
var url_re = RegExp(url.replace(specials, "\\$&")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:45:03.827

`( ) [ ] ? * ^ $ \ . + |`在您的情况下，`/`因为您将其用作匹配中的分隔符。

更多信息主要是为了抢先发表评论和投票：我真的不知道`-`作为一个特殊角色来自哪里。它只有在字符类括号内`[`并且`]`您已经转义时才特别。如果您想包含*有时*特殊的字符（OP 没有），这些字符也将包含前瞻/后视字符，其中包括`=`和.`<``>`

# javascript - 包装在两个容器中的未命名 href 链接

> ID：11092953
> 
> 赞同：0
> 
> 时间：2012-06-19T00:38:02.537
> 
> 标签：javascript, html, dom

我正在尝试更改基本的链接`<a>`。它没有 id。它位于我无法直接访问的 header.aspx 文件中。它也是 ID 为“SiteMenu”的 div 的第一个孙元素。从那个 div 我想使用以下脚本。（我可以将脚本引用放在页脚并上传到主题目录）：

```
document.getElementById("SiteMenu").childNodes[0].childNodes[0].href = "/search.aspx?keyword='+'&page=1";` 
```

也试过：

```
document.getElementById("SiteMenu").firstChild.childNodes[0].href = "/search.aspx?keyword='+'&page=1";` 
```

HTML的基本结构是：

```
<div id="SiteMap">
    <p>
        <a href="/home.aspx">Home</a>
    </p>
</div> 
```

我不是 JS 专业人士。从我在这里发布之前阅读的一些内容来看，似乎 childNodes.childNodes 是在 JS（或 DOM？）中搜索节点级别的无效方法。

还有其他方法可以操纵我的标签的href吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:53:35.390

`.childNodes[0]`不会有任何孩子，因为第一个孩子是**text node**`<p>` ，在（至少在您的示例中）之前包含换行符和空格。您想获得第一个**元素 node**。

例如：

```
document.getElementById("SiteMenu").children[0].children[0].href = '...'; 
```

有关详细信息，请参阅[`.children` *^([MDN])*](https://developer.mozilla.org/en/DOM/Element.children)。

* * *

或者，您可以遍历每个子节点并测试其[`.nodeType` *^([MDN])*](https://developer.mozilla.org/en/DOM/Node.nodeType)以查看它是否是元素节点。

# android - 仅 Android 4.0 中的 Android MySQL 问题？

> ID：11092956
> 
> 赞同：2
> 
> 时间：2012-06-19T00:38:20.643
> 
> 标签：android, mysql, sqlite, android-4.0-ice-cream-sandwich, ui-thread

我的 Ice Cream Sandwich (Android 4.0) 设备和模拟器出现此错误。但该应用程序可以在 Android 2.3 模拟器上完美运行。

```
06-19 00:34:38.357：E/AndroidRuntime（535）：致命异常：主要
06-19 00:34:38.357: E/AndroidRuntime(535): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.kickinglettuce.rate_this/com.kickinglettuce.rate_this.Main}: java.lang.NullPointerException
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.ActivityThread.access$600(ActivityThread.java:123)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.os.Handler.dispatchMessage(Handler.java:99)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.os.Looper.loop(Looper.java:137)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 java.lang.reflect.Method.invokeNative(Native Method)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 java.lang.reflect.Method.invoke(Method.java:511)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-19 00:34:38.357: E/AndroidRuntime(535): at dalvik.system.NativeStart.main(Native Method)
06-19 00:34:38.357：E/AndroidRuntime(535)：由：java.lang.NullPointerException 引起
06-19 00:34:38.357: E/AndroidRuntime(535): 在 org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 org.json.JSONTokener.nextValue(JSONTokener.java:94)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 org.json.JSONArray.(JSONArray.java:87)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 org.json.JSONArray.(JSONArray.java:103)
06-19 00:34:38.357: E/AndroidRuntime(535): at com.kickinglettuce.rate_this.Main.onCreate(Main.java:81)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.Activity.performCreate(Activity.java:4465)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-19 00:34:38.357: E/AndroidRuntime(535): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-19 00:34:38.357: E/AndroidRuntime(535): ... 11 更多

```

启动活动几乎与此相同：

[http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)

这是我的代码中的空行：
jArray = new JSONArray(result);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:45:24.903

今天早上我写了一篇关于同一主题的博客文章：

## [为什么我的应用程序在冰淇淋三明治上崩溃？](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

您正在执行的原因是因为您正在强制关闭，因为您正在尝试在 UI 线程上建立网络连接。这是一个潜在的昂贵操作，并且可能会阻塞 UI 线程导致延迟。ICS 和 HoneyComb 引入了更严格的检查以防止滥用 UI 线程，现在如果您尝试这样做，则会自动强制关闭您的应用程序。这就是为什么您的应用程序在 Android 4.0 上崩溃但在 Android 2.3 上没有崩溃的原因。您应该在某种单独的线程中执行 HTTP 请求（即普通`Thread`或`AsyncTask`）。

阅读上面链接的我的博客文章......它更详细地说明了为什么您应该在单独的工作线程中执行此类操作。您可能还会发现此[示例代码](http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)有助于您入门。

# google-app-engine - JDBC——数据库故障

> ID：11092961
> 
> 赞同：0
> 
> 时间：2012-06-19T00:39:52.213
> 
> 标签：google-app-engine, jdbc

我有以下方法在我的数据库中遇到某种故障。没有错误被写入我的控制台，所以我很困惑。我正在使用 JDBC 和 Google AppEngine。任何人都可以帮助我吗？谢谢。

```
public List<Bulletin> getApprovedBulletins() {
    List<Bulletin> bulletins = new ArrayList<Bulletin>();

    try {
        Connection connection = getConnection();
        Statement statement = connection.createStatement();
        statement.executeQuery("select * from bulletins where approved = true");
        ResultSet resultSet = statement.getResultSet();

        while (resultSet.next()) {
            Bulletin bulletin = new Bulletin();
            bulletin.setId(resultSet.getInt("id"));
            bulletin.setDate(resultSet.getDate("bulletin_date"));
            bulletin.setName(resultSet.getString("name"));
            bulletin.setSubject(resultSet.getString("subject"));
            bulletin.setNote(resultSet.getString("bulletin"));

            bulletins.add(bulletin);
        }

        resultSet.close();
        connection.close();
        return bulletins;
        }
        catch (Exception e) {
            System.out.println(e.toString());
        }

    return null;
}

private Connection getConnection() {
    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/cpc";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "password";
    try {
        Class.forName(driver).newInstance();
        conn = DriverManager.getConnection(url, userName, password);
    } catch (Exception e) {
        return null;
    }

    return conn;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:45:14.980

如果您使用的是 Eclipse，请检查标记选项卡是否有错误。请注意，驱动程序也必须位于应用程序服务器文件夹中才能正常工作。不知道为什么您在控制台中没有收到任何错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:49:19.103

问题解决了。我找到了一个向控制台打印消息的地方，结果发现我需要将以下内容添加到 appengine-web.xml 中，我已经完成了。

```
<sessions-enabled>true</sessions-enabled> 
```

# android - 如何为 320dp 和 360dp 创建布局？

> ID：11092965
> 
> 赞同：1
> 
> 时间：2012-06-19T00:40:38.037
> 
> 标签：android, android-layout, android-emulator

我非常失望。我刚刚完成了基于“普通屏幕”的 360dp 项目，但是当我尝试在摩托罗拉 Atrix 中运行时，我感到很惊讶。摩托罗拉 Atrix 是 360dp 而不是 320dp，因为他的宽度是 540px。现在我正在努力寻找要解决的问题。如何为 360dp 创建布局？

我尝试了所有这些：

*   res/values-sw360dp
*   res/layout-sw360dp

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#DFEFF1">

    <Button
        android:background="#AAAA11"
        android:id="@+id/button1"
        android:layout_width="@dimen/default_width"
        android:layout_height="@dimen/default_height"
        android:text="SOME TEXT 1"         
        />

    <Button
        android:background="#FFAA11"
        android:id="@+id/button2"
        android:layout_width="@dimen/default_width"
        android:layout_height="@dimen/default_height"
        android:text="SOME TEXT 2"
        android:layout_alignParentRight="true" />
</RelativeLayout> 
```

res/values/strings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <dimen name="default_width">160dp</dimen>
    <dimen name="default_height">160dp</dimen>

</resources> 
```

摩托罗拉 Atrix

![摩托罗拉 Atrix](../Images/0f10aff34468ab02251531d4fc48bec6.png)

三星盖乐世 SII

![三星盖乐世 SII](../Images/4ba1998377544e08633124b6650d028a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T01:01:12.520

通常，在设计布局时，您希望避免规划特定的像素大小。如果您要根据需要根据像素分离所有布局，那么您几乎必须为每台设备提供一个布局（世界上有很多设备具有不同尺寸的屏幕）。通常你会想要为几个不同的大小类别提供布局资源。`layout-small`, `layout-normal`, `layout-large`, 等等。如果您提供这些并且您的布局以良好的方式构建，它应该可以很好地扩展到不同尺寸的设备。

当您在较大尺寸的设备中运行布局时，您的布局是否存在特定问题？也许如果您发布我可以帮助您尝试解决它，而无需按像素大小分隔您的布局。

[开发者文档中的Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html) 有很多关于如何构建应用程序以便它们能够很好地扩展的重要信息。

**编辑：**

解决您的问题的一种潜在方法是不使用静态 dp 值作为宽度，而是允许按钮增长以占用多少空间（水平）以填满屏幕的宽度。您可以使用 layout_weight 并将宽度设置为`fill_parent`. 我现在无法访问 Eclipse，所以我无法测试，但我认为肯定还有一种方法可以在没有线性布局的情况下获得这种效果，但这是我想到的第一种方法。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    android:background="#DFEFF1">

    <LinearLayout
     android:id="@+id/buttonRow"
     android:orientation="horizontal"
     android:layout_height="@dimen/default_height"
     android:layout_width="fill_parent">

    <Button
        android:background="#AAAA11"
        android:id="@+id/button1"
        android:layout_width="0"
        android:layout_height="@dimen/default_height"
        android:text="SOME TEXT 1"         
        android:layout_weight="1"
        />

    <Button
        android:background="#FFAA11"
        android:id="@+id/button2"
        android:layout_width="0"
        android:layout_height="@dimen/default_height"
        android:text="SOME TEXT 2"
        android:layout_weight="1" />

</LinearLayout>
</RelativeLayout> 
```

# wordpress - 使用 URL 字符串更改 Wordpress 发布顺序

> ID：11092971
> 
> 赞同：2
> 
> 时间：2012-06-19T00:42:51.820
> 
> 标签：wordpress

我正在尝试添加一个下拉列表来对我的自定义帖子进行排序。

我在这里尝试了解决方案 - [http://ak.net84.net/php/filter-dropdown-for-wordpress/](http://ak.net84.net/php/filter-dropdown-for-wordpress/) - 在这里 - [http://blog.rutwick.com/use-jquery-to-reorder-your -wp-posts-on-the-fly](http://blog.rutwick.com/use-jquery-to-reorder-your-wp-posts-on-the-fly)

我无法让其中任何一个工作，我什至无法通过将其添加到我的 URL 的末尾来对我的帖子进行排序 - ?orderby=title&order=DESC。

出于好奇，我去了 DigWP 并尝试了这个 - [http://digwp.com/category/admin/?orderby=title&order=DESC](http://digwp.com/category/admin/?orderby=title&order=DESC)它工作并按标题和降序对帖子进行排序。所以我想知道为什么它不能在我的网站上运行？这是获取我的帖子的代码。

```
<?php   $my_query = new WP_Query( array( 
                        'post_type' => 'project',
                        'post_status' => 'publish',
                        'paged' => get_query_var('paged'),
                        ));      
                while ( $my_query->have_posts() ) : $my_query->the_post(); ?> 
```

我猜查询有问题，或者 wp_query 可能不允许以这种方式订购帖子？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T01:12:13.290

如果要获取查询字符串变量，即`?orderby=title`

```
$my_query = new WP_Query( array( 
    'post_type' => 'project',
    'post_status' => 'publish',
    'orderby' => get_query_var('orderby'), // will return orderby query string variable
    'order' => 'DESC', 
    'paged' => get_query_var('paged'),
)); 
```

# c++ - 替换 glaux 函数

> ID：11092974
> 
> 赞同：1
> 
> 时间：2012-06-19T00:43:23.297
> 
> 标签：c++, opengl

我正在阅读 NeHe 的教程，但在凹凸贴图方面遇到了问题。到目前为止，我一直在使用 SOIL 库将图像文件加载到 OpenGL 中，效果很好。但是凹凸贴图教程使用指向图像数据的指针来逐个像素地修改图像的颜色。据我所知，我不能用 SOIL 库做到这一点。既然 glaux 已被弃用，有没有什么好的方法来获得这种影响？显然我们正在尝试将 alpha 通道设置为像素颜色的红色分量的值。另一方面，我们是否将它们加载到 char 数组中，因为 c++ 不关心字节和 char 之间的差异（它们的大小相同吗？）还是我在这一切中遗漏了其他一些东西？

```
// Load The Logo-Bitmaps
if (Image=auxDIBImageLoad("Data/OpenGL_ALPHA.bmp")) {
    alpha=new char[4*Image->sizeX*Image->sizeY];
    // Create Memory For RGBA8-Texture
    for (int a=0; a<Image->sizeX*Image->sizeY; a++)
        alpha[4*a+3]=Image->data[a*3];               // Pick Only Red Value As Alpha!
    if (!(Image=auxDIBImageLoad("Data/OpenGL.bmp"))) status=false;
    for (a=0; a<Image->sizeX*Image->sizeY; a++) {
        alpha[4*a]=Image->data[a*3];             // R
        alpha[4*a+1]=Image->data[a*3+1];         // G
        alpha[4*a+2]=Image->data[a*3+2];         // B
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:25:57.233

`SOIL_load_image()`应该给你原始图像位：

```
/**
    Loads an image from disk into an array of unsigned chars.
    Note that *channels return the original channel count of the
    image.  If force_channels was other than SOIL_LOAD_AUTO,
    the resulting image has force_channels, but *channels may be
    different (if the original image had a different channel
    count).
    \return 0 if failed, otherwise returns 1
**/
unsigned char*
    SOIL_load_image
    (
        const char *filename,
        int *width, int *height, int *channels,
        int force_channels
    ); 
```

# javascript - 带有 Javascript 的动态站点地图图

> ID：11092980
> 
> 赞同：1
> 
> 时间：2012-06-19T00:44:00.957
> 
> 标签：javascript, raphael

我有一个页面列表，其中包含从一页到另一页的一些连接。我需要创建一个站点地图图表，该图表可以根据一个元素和另一个元素之间的连接自动处理页面的位置，以避免页面和连接的重叠。

是否有可以处理此问题的 javascript 库？

我需要这样的东西，因为站点地图是动态的。

# windows-phone-7 - 点击展开 WP7 内容元素

> ID：11092981
> 
> 赞同：0
> 
> 时间：2012-06-19T00:44:01.113
> 
> 标签：windows-phone-7

WP7 中是否有任何方法或有任何元素可以随时扩展？例如，如果我使用的是 ItemViewModel `LineOne`，我只想显示 的内容，当点击它时，我想显示`LineTwo`.

我不一定需要使用 ItemViewModel 执行此操作。例如，隐藏的内容也可以是出现的按钮，而不是一行文本。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:40:17.927

您是否`ExpanderView`从[Silverlight 工具包](http://silverlight.codeplex.com/ "Silverlight 工具包")中查看过？它允许您拥有一个点击展开模板和一个标准模板。[在Windowsphonegeek](http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-ExpanderView-in-depth-Part1-key-concepts-and-API "Windowsphonegeek")上有一个合理的概述

# ruby - watir-webdriver click_no_wait

> ID：11092983
> 
> 赞同：1
> 
> 时间：2012-06-19T00:44:47.823
> 
> 标签：ruby, watir-webdriver, selenium-chromedriver

I have a script that hangs after I click a link. This link launches a popup where the user then selects some options and the clicks the submit button to generate a report. After I click on the link the script it will hang indefinitely until I kill it. I am running my tests on a mac osx using chromedriver. I have tried firefox and safari and get same result. there is no click_no_wait in the elements.rb. It seems to only be for windows and ie. I have the latest install, so Is there a way to make the script execute the link and then not wait so that I can access the popup and process the form contained with in it?

Here is the link I need to click on:

```
b.frame(:name, "ifContentBody").link(:text, "Filter").click 
```

javascript:

```
openMdlWindow('InvestmentDetailOptions.aspx?IDAssetType=', '620', '600');
if (window.document.RetValue == '2') {
    window.parent.LoadinIframe('InvestmentDetail.aspx?FromMenu=N&amp;IDAssetType=', 'Investment Details &gt; Full View', 'false');
} 
```

I have searched a million+ posts and sites and can not find the solution. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:29:26.253

你看到这些了吗？

[http://watirwebdriver.com/javascript-dialogs/](http://watirwebdriver.com/javascript-dialogs/)
[http://watirwebdriver.com/browser-popups/](http://watirwebdriver.com/browser-popups/)

# iphone - Create contour of given points using MKPolygon in iPhone

> ID：11092984
> 
> 赞同：0
> 
> 时间：2012-06-19T00:44:48.803
> 
> 标签：iphone, algorithm, google-maps, math, google-maps-api-3

I have various number of points each time, and I want to draw contour from them. So I need to draw polygon using only extreme points. Is there any ready to use solution?

EDIT:

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:37:26.320

听起来您正在寻找[一组点的凸包](http://en.wikipedia.org/wiki/Convex_hull)。

使用[谷歌地图 API v3实现](http://www.geocodezip.com/v3_map-markers_ConvexHull.asp)

# c++ - 使用向量和 QVector 进行奇怪的内存管理

> ID：11092998
> 
> 赞同：1
> 
> 时间：2012-06-19T00:45:56.490
> 
> 标签：c++, qt

我正在开发基于 QT 的应用程序，我需要在动态（QVector）中使用向量。在检查向量的大小时，这比它应该的要高，我用 STL 向量进行了测试，结果是一样的。下面我介绍 STL 向量问题的代码。这种情况使我们无法知道向量的实际大小并正确使用它。怎么修？。谢谢您的帮助。

*   编译器：GCC 4.5.2
*   操作系统：Linux Ubuntu 11.04
*   观察：向量的容量或大小总是以 2 为底的幂

代码是：

```
double PI = 3.1415926536, delta = PI/(100/2);
vector<double> A(0);
vector<double> B(0);
cout<<"Capacity A = "<<A.capacity()<<"; Capacity B = "<<B.capacity()<<endl;
for (int i = 0; i < 100; i++) {
    A.push_back(i*delta);
    B.push_back( sin( A[i]  ) );
    cout<<"A("<<i<<") = " <<A[i]<<"; B("<<i<<") = " <<B[i]<<" "<<"Size A = "<<A.capacity()<<"; Size B = "<<B.capacity()<<endl;
}

for (int i = 0; i < A.capacity(); i++) {
   cout<<"A("<<i<<") = " <<A[i]<<"; B("<<i<<") = " <<B[i]<<" "<<"Size A = "<<A.capacity()<<"; Size B = "<<B.capacity()<<endl;
}
cout<<"Size A = "<<A.capacity()<<"; Size B = "<<B.capacity()<<endl; 
```

输出是：

```
Capacity A = 0; Capacity B = 0
A(0) = 0; B(0) = 0 Size A = 1; Size Y = 1    
A(1) = 0.0628319; B(1) = 0.0627905 Size A = 2; Size B = 2    
A(2) = 0.125664; B(2) = 0.125333 Size A = 4; Size B = 4    
A(3) = 0.188496; B(3) = 0.187381 Size A = 4; Size B = 4    
.    
A(99) = 6.22035; B(99) = -0.0627905 Size A = 128; Size B = 128    
.    
A(126) = 0; B(126) = 1.31947 Size A = 128; Size B = 128    
A(127) = 0; B(127) = 1.3823 Size A = 128; Size B = 128   
Size A = 128; Size B = 128 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:56:17.493

您所看到的是`std::vector`的扩展能力。他们为使其在一般情况下更快地工作而采取的措施之一是保留比所需更多的内存，这样它就不必在每次使用时都保留内存`push_back`。

如您所见，保留的越多，保留的越多。`capacity`是告诉你这个数量的函数。您可以使用`reserve`. 它将告诉向量要保留多少内存，然后`capacity`如果没有进行任何操作（这可能会导致保留内存的另一次更改），则将检索该数字。`reserve`如果您要处理`push_back`大量元素并且您希望向量只保留一次足够的内存，而不是自动保留多少次，这通常很有用。

您要查找的函数是`size`，它为您提供向量中的元素数量。与 this 相关联的`resize`函数`reserve`是`capacity`。也就是说，当你调用 时`resize (10)`，如果你之前有 5 个元素，你将获得 5 个默认初始化的新元素，并`size`返回 10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:08:50.790

你为什么感兴趣`capacity`？您是否专注于内存使用？否则不需要容量方法，您只需要关心大小即可。

如果我们谈论的是容量细节，容量如何变化取决于供应商的实施。您根据 2 的幂重新分配数组的事实可能并不适用于所有情况：例如，我已经看到一些实现按 150% 的比例缩放，而不是 200%。

`capacity`通常会大于大小，有时会大得多（例如：元素数量的两倍）。这是因为向量是可增长的、连续的序列（它们是基于数组的）。如果您完全关心性能，那么您最不想做的就是让每个 push_back/insert/erase 触发内存分配/释放，因此 vector 通常会创建一个大于后续插入所需的数组。还值得注意的是，该`clear`方法不一定会对容量产生任何影响，您可能需要查看收缩适应习语 ( [http://www.gotw.ca/gotw/054.htm](http://www.gotw.ca/gotw/054.htm) )。

如果您想对容量进行绝对控制以达到完美契合，您可以利用预留方法提前分配特定容量。但是，如果您可以提前预测将要放入向量中的元素数量，那只会很有效。

# c# - 如何跟踪应用程序中的所有方法

> ID：11092999
> 
> 赞同：1
> 
> 时间：2012-06-19T00:46:06.793
> 
> 标签：c#, .net, logging, reflection

您知道如何跟踪 .NET 应用程序中的所有方法调用吗？我目前的做法是像这样在每个方法的开头写跟踪

```
void DoSomething()
{
   using(new Tracer(TraceCategory)
{
   //Perform all action here

}

} 
```

但它很糟糕，因为它聚集了我的代码，我将不得不为我的所有方法编写跟踪。

是否有另一种方法来记录何时调用方法以及何时完成？所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:54:31.223

我所知道的实现这一点的唯一实用选择是使用 AOP（如 postsharp）——为了一个很好的演练，请参见[这里](http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T00:53:33.647

您应该使用 Unity 或 PostSharp 等框架。它们都有用于方法开始之前和方法结束事件之后的钩子。

[Unity 示例](http://www.alexthissen.nl/blogs/main/archive/2009/03/25/using-unity-to-do-poor-man-s-tracing.aspx)

Yahia 已经发布了 PostSharp 的示例。