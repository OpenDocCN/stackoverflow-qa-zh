# StackOverflow 问答 11329000-11329999

# asp.net - 如何从 java 脚本创建动态表？

> ID：11329001
> 
> 赞同：0
> 
> 时间：2012-07-04T12:20:03.870
> 
> 标签：asp.net

如何从 java 脚本创建动态表？我正在从数据库中获取记录并将其存储到变量中并将该值添加到表单元格中。在这里，我放了一些文本而不是实际值。

在cs文件的按钮单击事件中我这样做

```
StringBuilder sb = new StringBuilder();
sb.Append(@"<script language='javascript'>");
sb.Append("<table><tbody><tr><td>Information</td></tr></tbody></table>");
sb.Append(@"</script>");

if (!Page.ClientScript.IsClientScriptBlockRegistered(Page.GetType(), "HeyPopup"))

ClientScript.RegisterClientScriptBlock(Page.GetType(), "HeyPopup", sb.ToString()); 
```

但是我看不到信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:22:14.723

您必须在脚本中添加 document.Write

```
so replace with

sb.Append("document.write('<table><tbody><tr><td>Information</td></tr></tbody></table>');"); 
```

# xquery - 如何从搜索：搜索 API 获取上次修改日期和作者？

> ID：11329017
> 
> 赞同：0
> 
> 时间：2012-07-04T12:21:01.043
> 
> 标签：xquery, marklogic

我正在 Marklogic Server 中上传一些文档（doc、docx、pdf、txt 等）。现在我正在用 HTML 和 XQuery 构建一个界面，允许用户输入搜索词，如果它与任何文档的内容匹配，那么该文档名称将显示在网格中。我正在使用`search:search`API 进行搜索。现在我还想在网格中显示文档的最后修改日期和作者。每个 Windows 文档都有最后修改日期和作者属性。但是如何从`search:search`API 获取这些信息，以便在网格中显示这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:53:25.363

如果您启用了“保持上次修改”设置，Marklogic 将上次修改的信息保存在文档属性片段中。但是，这与保存在 Windows 中的属性信息无关，当您在 Marklogic 中加载它们时，这些信息默认会丢失。

如果要保留 Windows 属性数据，请在 Information Studio 中设置过滤器以使用数据填充 Marklogic 属性片段。或者，您可以自己编写`XSLT`并使用`xdmp:document-filter()`将数据直接存储在文档中。

加载文档并使用所需属性填充它们后，如果存储在文档中，则可以直接访问数据，或者`xdmp:document-properties()`如果存储在文档属性中，则可以使用。

# perl - 使用 Perl 轻松创建类/对象？

> ID：11329018
> 
> 赞同：1
> 
> 时间：2012-07-04T12:21:05.803
> 
> 标签：perl, oop, cpan

我知道可以使用`bless`函数和模块在 Perl 中创建类/对象。是否有任何 CPAN 模块可以使这更容易，最好是自动生成 getter/setter？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:25:37.880

[驼鹿](http://moose.perl.org)是天赐之物。Moose中有一些注释——Ricardo Signes[的新革命指南](http://assets.en.oreilly.com/1/event/61/Moose%20is%20Perl_%20A%20Guide%20to%20the%20New%20Revolution%20Presentation%201.pdf)，以及[手册](http://p3rl.org/Moose%3a%3aManual)。

# java - 在 jetty (jetty-env.xml) 中定义两个数据源

> ID：11329022
> 
> 赞同：9
> 
> 时间：2012-07-04T12:21:18.563
> 
> 标签：java, jetty, datasource

我正在尝试使用该`jetty-env.xml`文件在我的 Web 应用程序中定义两个数据源。它只适用于一个数据源，但是当添加第二个数据源时出现此异常：

```
java.lang.IllegalStateException: Nothing to bind for name javax.sql.DataSource/default 
```

这是我的配置：

**码头-env.xml**

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
    <New id="ds" class="org.eclipse.jetty.plus.jndi.Resource">
        <Arg>jdbc/mybd1</Arg>
        <Arg>
            <New class="com.mchange.v2.c3p0.ComboPooledDataSource">
                <Set name="driverClass">com.microsoft.sqlserver.jdbc.SQLServerDriver</Set>
                 <Set name="jdbcUrl">jdbc:jtds:sqlserver://url:1433/mybd1</Set>
                 <Set name="user">xx</Set>
                 <Set name="password">yy</Set>
            </New>
        </Arg>
    </New>

    <New id="ds2" class="org.eclipse.jetty.plus.jndi.Resource" >
        <Arg>jdbc/mybd2</Arg>
        <Arg>
            <New class="com.mchange.v2.c3p0.ComboPooledDataSource">
                <Set name="driverClass">com.microsoft.sqlserver.jdbc.SQLServerDriver</Set>
                <Set name="jdbcUrl">jdbc:jtds:sqlserver://url:1433/mybd2</Set>
                <Set name="user">xx</Set>
                <Set name="password">yy</Set>
            </New>
        </Arg>
    </New>
</Configure> 
```

**web.xml**

```
<resource-ref>
    <res-ref-name>jdbc/mybd1</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref>
<resource-ref>
    <res-ref-name>jdbc/mybd2</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

**hibernate.cfg.xml**（还有另外一个hibernate.cfb.xml来配置第二个数据源）

```
<session-factory>
  <property name="connection.datasource">jdbc/mybd1</property>
  <!-- ... --> 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:14:37.880

我还没有机会对其进行测试，但在我看来，您的问题是您缺少`<Arg />`范围。

您的 DS 应该是：

```
 <New id="ds" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg></Arg>
    <Arg>jdbc/mybd1</Arg>
    <Arg>
        <New class="com.mchange.v2.c3p0.ComboPooledDataSource"> 
```

等等

第一个“Arg”是范围，没有它，你的其余论点就不合适了，可能会导致你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T08:16:16.313

id 参数值应在 jetty-env.xml 和 web.xml 中匹配

**码头-env.xml**

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
    <New id="DS1" class="org.eclipse.jetty.plus.jndi.Resource">...</New>
    <New id="DS2" class="org.eclipse.jetty.plus.jndi.Resource">...</New>
</Configure> 
```

**web.xml**

```
<resource-ref id="DS1">...</resource-ref>
<resource-ref id="DS2">...</resource-ref> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T14:23:54.563

尝试在 Jetty 中启用登录。注意记录器名称是“jndi”。Jetty 开发人员不使用类名作为 JNDI 的记录器名。

我花了 2 天时间来找出 web.xml 和 jetty-env.xml 中定义的名称之间的区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-16T13:53:00.327

看看： [https ://www.eclipse.org/jetty/documentation/9.4.x/using-jetty-jndi.html](https://www.eclipse.org/jetty/documentation/9.4.x/using-jetty-jndi.html)

决定在哪里声明资源 您可以在三个地方定义命名资源：

**jetty.xml** jetty.xml 文件中定义的命名资源的范围是 JVM 级别或服务器级别。资源的类必须在 Jetty 容器级别可见。如果资源的类只存在于你的 webapp 中，你必须在 WEB-INF/jetty-env.xml 文件中声明它。

**WEB-INF/jetty-env.xml** WEB-INF/jetty-env.xml 文件中的命名资源的范围是文件所在的 Web 应用程序。虽然您可以选择输入 JVM 或服务器范围，但我们不建议这样做。此处定义的资源可能会使用 webapp 内部的类。这是 Jetty 特有的机制。

**上下文 xml 文件 上下文 xml 文件** 中的条目的范围应在它们所应用的 webapp 级别，但如果您选择，您可以提供不太严格的服务器或 JVM 范围级别。与在 jetty.xml 文件中声明的资源一样，与资源关联的类必须在容器的类路径中可见。

并放一个这样的文件：

```
 <?xml version="1.0"?>
 <!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">

 <Configure class="org.eclipse.jetty.webapp.WebAppContext">

   <!-- Add an EnvEntry only valid for this webapp               -->
   <New id="gargle"  class="org.eclipse.jetty.plus.jndi.EnvEntry">
     <Arg>gargle</Arg>
     <Arg type="java.lang.Double">100</Arg>
     <Arg type="boolean">true</Arg>
   </New>

  <!-- Add an override for a global EnvEntry                           -->
   <New id="wiggle"  class="org.eclipse.jetty.plus.jndi.EnvEntry">
     <Arg>wiggle</Arg>
     <Arg type="java.lang.Double">55.0</Arg>
     <Arg type="boolean">true</Arg>
   </New>

   <!-- an XADataSource                                                -->
   <New id="mydatasource99" class="org.eclipse.jetty.plus.jndi.Resource">
     <Arg>jdbc/mydatasource99</Arg>
     <Arg>
       <New class="com.atomikos.jdbc.SimpleDataSourceBean">
         <Set name="xaDataSourceClassName">org.apache.derby.jdbc.EmbeddedXADataSource</Set>
         <Set name="xaDataSourceProperties">databaseName=testdb99;createDatabase=create</Set>
         <Set name="UniqueResourceName">mydatasource99</Set>
       </New>
     </Arg>
   </New>

 </Configure> 
```

# jsp - 如何将列表转发到 jsp 文件？

> ID：11329023
> 
> 赞同：0
> 
> 时间：2012-07-04T12:21:19.310
> 
> 标签：jsp, redirect, request, forward, restful-url

我正在使用一种宁静的方法，我想将一个列表传递给一个 jsp 文件。
这是宁静的方法：

```
@Path("myRest")
public void handleRequestInternal() throws Exception {
    try {
        Request req = new Request();
        List<String> roles = manager2.getAllRoles();
        req.setAttribute("roles", roles);
        java.net.URI location = new java.net.URI("../index.jsp");
        throw new WebApplicationException(Response.temporaryRedirect(location).build());
    } catch (URISyntaxException e) {
        e.printStackTrace();
    }
} 
```

我使用**webApplicationException**来访问我想要的页面。*（事实上​​，在使用 restful 方法时，我没有找到其他转发或重定向的方法）*
这是我的 jsp 文件：

```
<% if(request.getAttribute("roles") != null){%>
<%      Object obj = (Object)request.getAttribute("roles");
    List<String> roles = (List<String>) obj;%>
        <select name="role">
    <%int size =  roles.size();%>
    <%for(int i = 0; i < size; i++){ %>
        <option value = "<%= roles.get(i)%>"><%= roles.get(i)%>
    <%} %>
    </select>
<%}%> 
```

但是我从*request.getAttribute("roles")*
中一无所获， 这是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:13:42.923

我认为您最好执行以下操作：
将您的 restful 方法编写如下：

```
@Path("myRest")
public void handleRequestInternal() throws Exception {
    try {
        List<String> roles = manager2.getAllRoles();
        String role = new String();
        for(int i = 0; i < roles.size(); i++){
            if(i != roles.size() - 1)
                role += roles.get(i) + '-';
            else
                role += roles.get(i);
        }
        java.net.URI location = new java.net.URI("../index.jsp?roles=" + role);
        throw new WebApplicationException(Response.temporaryRedirect(location).build());
    } catch (URISyntaxException e) {
        e.printStackTrace();
    }
} 
```

在你的jsp文件中：

```
<% if(request.getParameter("roles") != null){%>
<!-- process request.getParameter("roles") into an arraylist and you are good to go -->
<%}%> 
```

# gwt - 更改 GWT Widget CSS 类前缀

> ID：11329026
> 
> 赞同：0
> 
> 时间：2012-07-04T12:21:24.853
> 
> 标签：gwt

我有一个带有两个 TabPanel 的 GWT 应用程序。TabPanel 生成具有前缀 gwt-TabPanel 的 css 类。

有什么方法可以更改其中一张表的前缀吗？我希望能够独立设置两个 TabPanel 的样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:51:19.443

为了解决这个问题，我做了：

使用 setStylePrimaryName(String); 这将更改 TabPanel 和 TabBar 使用的 CSS 类名称的前缀。

```
tabPanel.getTabBar().setStylePrimaryName("myTabBar"); 
tabPanel.setStylePrimaryName("myTabPanel"); 
```

在您的 CSS 文件中添加如下内容：

```
.myTabBar {
}

.myTabBar .gwt-TabBarFirst {
  width: 5px;  /* first tab distance from the left */
}
.myTabBar .gwt-TabBarRest {
}
.myTabBar .gwt-TabBarItem {
  margin-left: 6px;
  padding: 3px 6px 3px 6px;
  cursor: pointer;
  cursor: hand;
  color: black;
  font-weight: bold;
  text-align: center;
  background: #3A3A3A;
}
.myTabBar .gwt-TabBarItem-selected {
  cursor: default;
  /* background: black; */
} 
.myTabBar .gwt-TabBarItem-disabled {
  cursor: default;
  color: red;
}
.myTabPanel {
}
.myTapPanel .myTabPanelBottom {
  border-width: 0px;
  overflow: hidden;
  padding: 6px;
} 
```

对于第二个 TabPanel，您可以在 TabPanel 和 TabBar 上使用 setStylePrimaryName() 设置不同的值。然后使用第二个主要名称将新部分添加到 CSS 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:23:26.440

您可以使用这些方法`setStyleName()`并`addStyleName()`为 GWT UI 对象设置或添加 css 样式。

# python - 用 numpy 加入相邻的 x-tics

> ID：11329035
> 
> 赞同：0
> 
> 时间：2012-07-04T12:21:54.083
> 
> 标签：python, numpy, matplotlib

我想要做的是以下几点：我有许多属于 x 值的值。像这样：

```
A 12
A 13 
A 15 
A 29
B 23 
B 23
B 23
C 90 
C 83 
```

因此每个 x 值的 y 值数量不同。我基本上想要的是一个看起来像这样的情节：

![我想要的情节](../Images/e6c877b032a5cadd59e63a54ea9f3229.png)

我如何使用 numpy 和 matplotlib 来实现这一点？我怎样才能让 matplotlib 不重复 x 值，反正基本上是一样的？请注意，我想要绘制 3 个 y 值，而不是 x 轴上仅显示一个值？

编辑：我现在做的只是绘制所有对值。看起来像这样： ![在此处输入图像描述](../Images/13c002f329c1f34fdb98ad1d621e9318.png)

我需要的是用值和空白替换 x 轴中的重复值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:33:17.477

我觉得你想要的更像

```
x    y  label
1   12    A
2   13    A
3   15    A
4   29    A
5   23    B
6   23    B
7   23    B
8   90    C
9   83    C 
```

而不是重复标签，您希望每组有一个居中的标签？

```
from itertools import groupby
import matplotlib.pyplot as plt

data = [
    ('A', 12),
    ('A', 13),
    ('A', 15), 
    ('A', 29),
    ('B', 23),
    ('B', 23),
    ('B', 23),
    ('C', 90),
    ('C', 83)
]

labels,ys = zip(*data)
xs = range(len(ys))

def centered(val, ln, empty=''):
    half = (ln - 1) // 2
    return (val if i==half else empty for i in xrange(ln))

def centered_labels(labels):
    return [v for val,grp in groupby(labels) for v in centered(val, len(list(grp)))]

fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_xticklabels(centered_labels(labels))
ax.plot(xs, ys, 'b-', linewidth=3) 
```

结果是

![在此处输入图像描述](../Images/5ce8d08a673c9ba6c8488dae96f0484d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T22:12:54.667

通常在这种情况下，您可以将每组 的**平均值绘制为一个点。**

也就是说，首先使用 numpy 计算每个组的平均值（我的意思是 A、B 等组），然后在 matplotlib 中绘制所有这些平均值，每个组都有一个点（平均值）。除此之外，还可以绘制误差线或箱线图等，以了解每个组内的分布等。

# extjs - 未创建 extjs sdk 构建

> ID：11329040
> 
> 赞同：1
> 
> 时间：2012-07-04T12:22:04.020
> 
> 标签：extjs, sdk, build

我尝试使用 extjs 进行构建。我和建筑师一起创建了这个应用程序。我用这一行开始构建：

```
sencha create jsb -a http://localhost/coolApp/index.html -p app.jsb3 
```

这是我在终端中看到的错误

```
phantomjs://webpage.evaluate():2
phantomjs://webpage.evaluate():1
/Applications/SenchaSDKTools-2.0.0-beta3/compat/scripts/phantomjs-jsb.js:299
ReferenceError: Can't find variable: Ext 
```

这就是我的 app.js 的样子：

```
Ext.Loader.setConfig({
enabled: true
});

Ext.application({
models: [
    'gridPersoneel',
    'gridAuto'
],
stores: [
    'gridPersoneel',
    'gridAuto'
],
autoCreateViewport: true,
name: 'coolApp'
}); 
```

而我的文件夹结构是这样的：

coolApp extjs 资源

在 extjs 中是 sdk 和 extjs 4.1 文件位于

有同样经历的人吗？我正在使用 Mac 进行构建

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:06:39.137

ext-debug 的正确路径`ext-all.css`解决了这个问题。如果您在 中指定了相对路径，请`index.html`确保该路径正确指向库文件。

# python - python 将 sql INSERT 语句保存到文件 . 值周围的单引号与插入的值中存在的单引号冲突

> ID：11329044
> 
> 赞同：0
> 
> 时间：2012-07-04T12:22:24.203
> 
> 标签：python, sql

我正在使用 python 将 blogdata 保存为 sql 文件。

```
str = "INSERT INTO TABLENAME (id,name,con) VALUES ('%d','%s','%s')" %(id,nam,con) 
```

这里，“con”是指包含单引号、双引号等各种内容的内容。所以文件变成了这样：

```
INSERT INTO TABLENAME (id,name,con) VALUES('1','first','Hi I'm XXX . "435"  'sdfsd' ') 
```

请注意上述行的最后一部分，因为它包含不同的引号，如果我使用上述格式，则不会执行 sql 文件。解决方案是什么？如有必要，将提供更多信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:42:18.227

psycopg2 具有将`mogrify`安全 SQL 查询输出为字符串的方法：

```
>>> print cur.mogrify("insert into table_name (id, name, con) values (%s, %s, %s)", ('1','first',"Hi I'm XXX"))

insert into table_name (id, name, con) values (E'1', E'first', E'Hi I''m XXX') 
```

检查您的数据库模块以了解此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:46:55.500

您要做的是清理查询，以避免 sql 注入和有效查询。为此，您需要转义文字值，如字符串。有这方面的图书馆。在您的情况下，这是最不安全的选择，您可以使用`repr`字符串来完成这项工作。有更好的选择，不要使用这个，使用你的数据库驱动程序为你提供的东西。例如：

如果您使用的是 MySQL，您可以使用`python-mysql`( `MySQLdb`) 转义字符串，以便生成可以安全执行的 sql 文件。

```
>>> print a
Hi I'm XXX . "435"  'sdfsd' 
>>> import MySQLdb
>>> encoded_a = MySQLdb.escape_string(a)
>>> print encoded_a
Hi I\'m XXX . \"435\"  \'sdfsd\' 
```

使用时`MySQLdb.escape_string`，您确定字符是安全的，然后使用您正在使用的格式字符串。此外，请确保您为所有值执行此操作，而不仅仅是那些“有风险”的值。

如果您不使用 MySQL，[请查看](https://stackoverflow.com/questions/3823735/psycopg2-equivalent-of-mysqldb-escape-string)postgresql。

如果您不想直接通过 SQL 使用它，请查看 MySQLdb for MySQL 等库。

# java - 创建多个 HSQLDB 服务器数据库的最简单方法是什么？

> ID：11329053
> 
> 赞同：6
> 
> 时间：2012-07-04T12:23:18.997
> 
> 标签：java, sql, database, linux, hsqldb

有没有更简单的方法？要启动许多数据库，我们可以创建简单的文件“ *start.sh* ”

在开始使用之前为每个数据库创建单独的文件夹。

*/opt/db/trunk*

*/opt/db/master*

下一份复制到“ *start.sh* ”：

```
#!/bin/sh
java -cp ./hsqldb/lib/hsqldb.jar  org.hsqldb.server.Server --database.0 file:/opt/db/master/master --dbname.0 master --database.1 file:/opt/db/trunk/trunk --dbname.1 trunk 
```

使该文件可执行：

```
chmod +x start.sh 
```

开始运行：

```
$ ./hsqdb.sh 
```

输出：

```
...
[Server@15c7850]: Database [index=0, id=0, db=file:/opt/db/trunk/trunk, alias=trunk] opened sucessfully in 426 ms.
[Server@15c7850]: Database [index=1, id=1, db=file:/opt/db/master/master, alias=master] opened sucessfully in 128 ms.
...
[Server@15c7850]: From command line, use [Ctrl]+[C] to abort abruptly 
```

所以你会得到两个有别名的数据库：**trunk**和**master**

示例如何配置 HSQL 数据库管理器：

> 类型：HSQL 数据库引擎服务器
> 
> 驱动：org.hsqldb.jdbcDriver
> 
> 网址：jdbc:hsqldb:hsql://localhost:9001/ **trunk**
> 
> 用户：SA
> 
> 密码：

您可以将别名中继更改为另一个别名

JDBC URL 连接：

> jdbc:hsqldb:hsql://localhost:9001/ **trunk**
> 
> jdbc:hsqldb:hsql://localhost:9001/ **master**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:50:08.853

您可以编写更通用的脚本来启动数据库。

关于脚本必须执行的步骤的一些想法

1.  接受参数列表
2.  声明`start_string`。初始化`java -cp ./hsqldb/lib/hsqldb.jar org.hsqldb.server.Server`
3.  第一个参数可以是包含每个数据库的文件夹的文件夹的路径（例如`/opt/db/`）
    *   first 之后的所有参数都被视为数据库名称
4.  遍历所有数据库名称并在父文件夹（第一个参数）中创建数据库文件夹（如果它尚不存在）
    *   附加`--database.<counter_variable> file:<parent_folder>/<db_name>/<db_name> --dbname.<counter_variable> <db_name>`到`start_string`
5.  执行`start_string`

然后，您可以将数据库名称列表传递给您的程序，该程序将使用 URL 连接到它们：`jdbc:hsqldb:hsql://localhost:9001/<db_name>`

# c# - 从 oracle 数据库中获取数据

> ID：11329058
> 
> 赞同：1
> 
> 时间：2012-07-04T12:23:45.210
> 
> 标签：c#, .net, sql, oracle

我使用以下代码连接到我的 oracle 数据库并执行查询。我在示例中使用的查询只是从表中获取一组行。但是，我不断收到“表或视图不存在”的错误消息。但是，我很确定该表存在于数据库中。我哪里错了？

```
 public void UpdateDatabase()
        {
            System.Data.OracleClient.OracleConnection conn = new System.Data.OracleClient.OracleConnection();
            conn.ConnectionString = "Data Source=(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.5.144)(PORT = 1521))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = orcl)));UID=mwm;PWD=mwm";
            conn.Open();
            OracleCommand command = conn.CreateCommand();
            command.CommandText = "Select * from Task"; 
            command.ExecuteNonQuery();
            command.Dispose();
        } 
```

到达 command.ExecuteNonQuery() 时触发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:27:06.767

任务是 oracle [Reserve Word](http://docs.oracle.com/cd/B19306_01/appdev.102/b14354/appb.htm)，这就是您收到此错误的原因。使用双引号。

```
command.CommandText = "Select * from \"Task\""; 
```

ExectueNonQuery，可能不会给你任何错误，但它不会给你想要的结果。你需要做[command.ExecuteReader](http://msdn.microsoft.com/en-us/library/ab4kxd8h.aspx)。请参阅链接。

您可能还会看到此[Oracle Data Provider for .NET 入门（C# 版本）](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/dotnet/GettingStartedNETVersion/GettingStartedNETVersion.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:28:45.410

我认为问题在于`command.ExecuteNonQuery();`

实际上，您在这里执行查询，因此您应该使用[DataAdapter](http://msdn.microsoft.com/en-us/library/bh8kx08z%28v=vs.71%29.aspx)或[DataReader](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.80%29.aspx)。

```
public void UpdateDatabase()
{
   System.Data.OracleClient.OracleConnection conn = new    System.Data.OracleClient.OracleConnection();
  conn.ConnectionString = "Data Source=(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.5.144)(PORT = 1521))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = orcl)));UID=mwm;PWD=mwm";
     conn.Open();
     OracleCommand command = conn.CreateCommand();            
     SqlDataAdapter a = new SqlDataAdapter("Select * from \"Task\"", command))            
     DataTable t = new DataTable();
     a.Fill(t);
     command.Dispose();
} 
```

# javascript - Firefox 中的 window.onmousewheel

> ID：11329062
> 
> 赞同：10
> 
> 时间：2012-07-04T12:23:56.053
> 
> 标签：javascript, jquery, firefox, mousewheel

当我单击文档时，此代码禁用了鼠标滚动功能。

```
$(document).on("click", function () {
    window.onmousewheel = function (e) {
        e.preventDefault();
    }
}); 
```

但是，这适用于除 Firefox 之外的所有浏览器。请告诉，如何使这段代码成为跨浏览器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T12:27:42.910

Firefox 不支持`.onmousewheel`，您必须改用该[`DOMMouseScroll`](https://developer.mozilla.org/en/Gecko-Specific_DOM_Events#DOMMouseScroll)事件：

```
$(document).on( "mousewheel DOMMouseScroll", function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T12:31:16.620

Firefox 不支持`onmousewheel`此事件的名称。你需要用`DOMMouseScroll`事件来代替它。

要检测是否`onmousewheel`支持，您可以执行以下操作：

```
var cancelscroll = function(e) {
    e.preventDefault();
};

if ("onmousewheel" in document) {
    document.onmousewheel = cancelscroll;
} else {
    document.addEventListener('DOMMouseScroll', cancelscroll, false);
} 
```

请注意，您无需在 DOM 就绪时执行此操作：文档将始终可以绑定到，因此您可以立即执行此操作。

* * *

您询问如何在每种情况下删除事件侦听器。类似的条件可以解决问题：

```
if ("onmousewheel" in document) {
    document.onmousewheel = function() {};
} else {
    document.removeEventListener('DOMMouseScroll', cancelscroll, false);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-08T10:14:48.740

您可以使用（新）标准化事件`wheel`。文件：

*   [W3C 标准：DOM 3 级事件](http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents)
*   [Mozilla 开发网络](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel)
*   [Quirksmode 兼容性图表](http://www.quirksmode.org/dom/events/scroll.html)（未列出最前沿的版本）

我发现这适用于 OSX (10.9.3) 上的 Firefox v29.0.1 和 Chrome v35.0.1916.114，但不适用于 Safari v7.0.4。

# java - 程序在 Eclipse 中工作，但在导出到 jar 文件后不能工作

> ID：11329063
> 
> 赞同：0
> 
> 时间：2012-07-04T12:24:03.613
> 
> 标签：java, jar, serial-port, export, jpanel

我编写了一个程序，该程序从设备获取输入并根据输入在 jpanel 上显示数字，当我导出文件时它不会显示任何内容 - 就好像它甚至没有启动这里是一个示例代码：

主要的：

```
public class main1 {

static CommPortIdentifier portId;
static Enumeration portList;

 public static void main(String[] args) {

        portList=CommPortIdentifier.getPortIdentifiers();

        while (portList.hasMoreElements()){
            portId=(CommPortIdentifier) portList.nextElement();

            if (portId.getPortType()==CommPortIdentifier.PORT_SERIAL){

                if (portId.getName().equalsIgnoreCase("COM4")){
                    sensor sensor1= new sensor(portId,portList);
                    try {
                          Thread.sleep(3000);
                        }
                        catch (Exception e) {}

                     JFrame myframe = new JFrame ("mouse controller");

                    myframe.setVisible(true);
                    myframe.setSize(400, 400);
                    MouseControlPanel mymousecontroller = new MouseControlPanel(sensor1);
                    myframe.add(mymousecontroller);

                }

            }

        }

    }
} 
```

窗口的内容——

```
public class MouseControlPanel extends JPanel  {
/**
 * 
 */
private static final long serialVersionUID = 1L;

int i=0;

sensor sensor1;
String value;
public MouseControlPanel (sensor sensor1){
    this.sensor1=sensor1;
    value=sensor1.getvalue()+"";
}

public void paintComponent (Graphics g){
    super.paintComponent(g);
    g.setFont(new Font("ariel",Font.ITALIC,50));
    g.drawString(sensor1.getvalue()+"", 100, 100);
    try {
          Thread.sleep(10);
        }
        catch (Exception e) {}
    repaint();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:25:39.670

代码可以组合成一个类——只需`main`放入`MouseControlPanel`. 然后我看到以下问题：

1.  缺少导入语句
2.  不存在的类`sensor`引用
3.  依赖于[JavaComm](http://www.oracle.com/technetwork/java/index-jsp-141752.html)中的类- 一个用于检测必须从 JDK 单独下载的串行端口活动的库 -**当您尝试运行 .jar 时，您可能会丢失此依赖**项 - 将其添加到您的类路径中。

我无法编译您的代码，但我相信如果上述问题得到解决，以下内容将起作用：

```
import java.awt.Font;
import java.awt.Graphics;
import java.util.Enumeration;
// CommPortIdentifier is part of JavaComm 
// see http://reprap.org/wiki/JavaComm for a description of what and how
import javax.comm.CommPortIdentifier;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class MouseControlPanel extends JPanel {
    sensor sensor1; // what class is this?

    String value;

    public MouseControlPanel(sensor sensor1) {
        this.sensor1 = sensor1;
        this.value = sensor1.getvalue() + "";
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setFont(new Font("ariel", Font.ITALIC, 50));
        g.drawString(sensor1.getvalue() + "", 100, 100);
        Thread.sleep(10);
        repaint();
    }

    public static void main(String[] args) {
        CommPortIdentifier portId;
        Enumeration portList;

        portList = CommPortIdentifier.getPortIdentifiers();

        while (portList.hasMoreElements()) {
            portId = (CommPortIdentifier) portList.nextElement();

            // rewrote conditional as guard clause
            if (portId.getPortType() != CommPortIdentifier.PORT_SERIAL || !portId.getName().equalsIgnoreCase("COM4")) {
                continue;
            }

            sensor sensor1 = new sensor(portId, portList);
            Thread.sleep(3000);

            MouseControlPanel mymousecontroller = new MouseControlPanel(sensor1);
            JFrame myframe = new JFrame("mouse controller");
            myframe.setVisible(true);
            myframe.setSize(400, 400);
            myframe.add(mymousecontroller);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:38:17.143

我应该补充的另一件事是，除非您花费数小时尝试调试代码，否则您永远不会理解空的 catch 语句有多危险。至少包括一个 e.printStackTrace()。您可能会收到错误消息，但您看不到它们。

# javascript - 在 JavaScript 中更改 HTML 表的总行数

> ID：11329069
> 
> 赞同：0
> 
> 时间：2012-07-04T12:24:30.810
> 
> 标签：javascript, html, html-table

我想对 javascript 中 HTML 表的行数更改执行操作。比如说，如果通过添加 rows 来增加总行数，我需要显示一个 Div。是否有任何我可以使用的 HTML 表格事件。

提前致谢。拉维库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:38:18.307

您可以使用该`DOMNodeInserted`事件来通知有关 DOM 更改：

参考：[http ://help.dottoro.com/ljmcxjla.php](http://help.dottoro.com/ljmcxjla.php)

```
document.addEventListener("DOMNodeInserted", function(event){
  var item = event.target;
  if (item.tagName == 'TR' && item.parentNode.getAttribute('id') == 'your-table-id') { 
    // ... event handling code ...
  }
}); 
```

*注意*：以上是未经测试的代码。您可能需要在它完全工作之前对其进行调试。

# sql - SQL 中的 <> 运算符

> ID：11329073
> 
> 赞同：4
> 
> 时间：2012-07-04T12:24:55.953
> 
> 标签：sql, sql-server-2012

我有一张这样的桌子

```
ID   Name    IsDeleted
1    Yogesh  Null
2    Goldy   1 
```

现在当我运行这个查询

```
select  * 
from tableName 
where IsDeleted <> 1 
```

我应该得到`ID 1`记录，但我没有得到它，

但是当我运行这个

```
select  * 
from tableName 
where IsDeleted is null 
```

我得到`ID 1`记录，

为什么我面临这种行为？不是`NULL <> 1`SQL 中的真实语句吗？

`IsDeleted`是一个`bit`类型字段`Allow Null true`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:26:52.243

```
select * from table 
where COALESCE(IsDeleted, 0) <> 1 
-- or ISNULL instead of COALESCE. 
--ISNULL seems to be better in subqueries, but it's not ANSI SQL. 
```

或者

```
select * from table 
where IsDeleted <> 1 or IsDeleted IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:28:17.703

将某些东西与 进行比较`null`总是会导致`unknown`. 这就是为什么您需要使用`is`运算符来比较`null`或使用类似`COALESCE`或`isnull`替换的功能`null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:31:14.153

```
select  * 
from tableName 
where isnull(IsDeleted,0) <> 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T12:31:38.420

你比较不同的类型。在这种情况下，它是另一种类型（未知）且不可比较

使用 or 语句分别比较每种类型

```
WHERE IsDeleted <> 1 OR IsDeleted is null 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T12:33:15.830

了解 NULL - 与 NULL（在标准 SQL 中）进行比较会产生 UNKNOWN，它既非真也非假（以及未满足您的期望的原因）。

尝试这个：

```
PRINT CASE
    WHEN 1 = NULL THEN '1 = NULL'
    WHEN 1 <> NULL THEN '1 <> NULL'
    ELSE '1 is neither = NULL nor <> NULL'
END 
```

您可以首先确保您没有 NULL 值（例如通过使用`ISNULL`or`COALESCE`函数），或者使用带有运算符`IS NULL`or的条件`IS NOT NULL`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-04T12:36:33.450

通常的做法是，如果您的列本质上是真假，是的，没有类型的字段，那么您应该使用默认值设置为 0 的位字段。

所以在你上面的例子中，你可以运行这个：

```
select  * 
from tableName 
where IsDeleted = 0 
```

但是在回答您的上述问题时，如果 Null 是表中的真正 NULL 值，那么这对您有用：

```
select  * 
from tableName 
where IsDeleted is null 
```

或者

```
select  * 
from tableName 
where isnull(IsDeleted,0) = 0 
```

获得记录 1 和

```
select  * 
from tableName 
where IsDeleted is not null 
```

获得记录 2

祝你好运

保罗。

# linux - 如何在 Red Hat Enterprise Linux 中进行 rpm 安装期间将启动器添加到面板？

> ID：11329075
> 
> 赞同：3
> 
> 时间：2012-07-04T12:25:00.190
> 
> 标签：linux, packaging, gnome, rpm, rpm-spec

有谁知道如何在 rpm 安装期间将启动器放在应用程序的面板中？例如在 Firefox 启动器旁边。

我猜它可能涉及在规范文件中的 %post 期间将 .desktop 文件移动到目录中？

rpm 适用于带有 gnome 的 RHEL 6.1 系统。

我正在为我正在处理的项目从规范文件创建一个 rpm。我还使用 .desktop 文件将启动器放入 Applications\Accessories 菜单。我被要求将启动器放入应用程序的面板中，并尝试搜索但收效甚微。

任何的建议都受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:22:04.293

在 GNOME 2 中，要手动将启动器添加到顶部面板，您需要将`.desktop`用于桌面启动器的相同文件放入`$home/.gnome2/panel2.d/default/launchers/`. `$home`应该在哪里解析到用户的主路径。

**更新**

除了将启动器放在那里，您还需要注册它。

跑吧`/usr/lib/gnome-panel/gnome-panel-add --panel=top_panel_screen0 --launcher=<full path to your launcher>`。您还可以添加`--copy-launcher`开关以使该工具为您将启动器复制到用户`launchers`目录。

# node.js - 无法在 Windows 7 上的 node.js 中安装 pg 模块

> ID：11329076
> 
> 赞同：4
> 
> 时间：2012-07-04T12:25:01.927
> 
> 标签：node.js, pg

我尝试使用以下命令将 pg 模块安装到 Node.js：`npm install pg`

起初我必须安装 Python。然后是 PostgreSQL 8.x，然后是 Microsoft Visual C++。但我还是做不到。编译时出现错误：

```
npm http GET https://registry.npmjs.org/pg
npm http 304 https://registry.npmjs.org/pg
npm http GET https://registry.npmjs.org/generic-pool/1.0.9
npm http 304 https://registry.npmjs.org/generic-pool/1.0.9

> pg@0.7.2 install C:\Users\Adam\node_modules\pg
> node-gyp rebuild || (exit 0)

C:\Users\Adam\node_modules\pg>node "C:\Program Files\nodejs\node_modules\npm\bin
\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
  binding.cc
c:\users\adam\.node-gyp\0.8.1\src\node_object_wrap.h(57): warning C4251: 'node:
:ObjectWrap::handle_' : class 'v8::Persistent<T>' needs to have dll-interface t
o be used by clients of class 'node::ObjectWrap' [C:\Users\Adam\node_modules\pg
\build\binding.vcxproj]
          with
          [
              T=v8::Object
          ]
..\src\binding.cc(83): error C2061: syntax error : identifier 'EV_P_' [C:\Users
\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(237): error C2146: syntax error : missing ';' before identifi
er 'read_watcher_' [C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(237): error C4430: missing type specifier - int assumed. Note
: C++ does not support default-int [C:\Users\Adam\node_modules\pg\build\binding
.vcxproj]
..\src\binding.cc(237): error C4430: missing type specifier - int assumed. Note
: C++ does not support default-int [C:\Users\Adam\node_modules\pg\build\binding
.vcxproj]
..\src\binding.cc(238): error C2146: syntax error : missing ';' before identifi
er 'write_watcher_' [C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(238): error C4430: missing type specifier - int assumed. Note
: C++ does not support default-int [C:\Users\Adam\node_modules\pg\build\binding
.vcxproj]
..\src\binding.cc(238): error C4430: missing type specifier - int assumed. Note
: C++ does not support default-int [C:\Users\Adam\node_modules\pg\build\binding
.vcxproj]
..\src\binding.cc(86): error C2065: 'w' : undeclared identifier [C:\Users\Adam\
node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(86): error C2227: left of '->data' must point to class/struct
/union/generic type [C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
          type is ''unknown-type''
..\src\binding.cc(87): error C2065: 'revents' : undeclared identifier [C:\Users
\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(117): warning C4800: 'int' : forcing value to bool 'true' or
'false' (performance warning) [C:\Users\Adam\node_modules\pg\build\binding.vcxp
roj]
..\src\binding.cc(247): error C2065: 'read_watcher_' : undeclared identifier [C
:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(247): error C3861: 'ev_init': identifier not found [C:\Users\
Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(248): error C2065: 'read_watcher_' : undeclared identifier [C
:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(248): error C2228: left of '.data' must have class/struct/uni
on [C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
          type is ''unknown-type''
..\src\binding.cc(249): error C2065: 'write_watcher_' : undeclared identifier [
C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(249): error C3861: 'ev_init': identifier not found [C:\Users\
Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(250): error C2065: 'write_watcher_' : undeclared identifier [
C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(250): error C2228: left of '.data' must have class/struct/uni
on [C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
          type is ''unknown-type''
..\src\binding.cc(312): error C2065: 'EV_DEFAULT_' : undeclared identifier [C:\
Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(312): error C2065: 'write_watcher_' : undeclared identifier [
C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(312): error C3861: 'ev_io_start': identifier not found [C:\Us
ers\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(358): error C2065: 'read_watcher_' : undeclared identifier [C
:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(358): error C2065: 'EV_READ' : undeclared identifier [C:\User
s\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(358): error C3861: 'ev_io_set': identifier not found [C:\User
s\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(359): error C2065: 'write_watcher_' : undeclared identifier [
C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(359): error C2065: 'EV_WRITE' : undeclared identifier [C:\Use
rs\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(359): error C3861: 'ev_io_set': identifier not found [C:\User
s\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(384): error C2065: 'EV_ERROR' : undeclared identifier [C:\Use
rs\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(395): error C2065: 'EV_READ' : undeclared identifier [C:\User
s\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(434): error C2065: 'EV_WRITE' : undeclared identifier [C:\Use
rs\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(623): error C2065: 'EV_DEFAULT_' : undeclared identifier [C:\
Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(623): error C2065: 'write_watcher_' : undeclared identifier [
C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(623): error C3861: 'ev_io_stop': identifier not found [C:\Use
rs\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(629): error C2065: 'EV_DEFAULT_' : undeclared identifier [C:\
Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(629): error C2065: 'write_watcher_' : undeclared identifier [
C:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(629): error C3861: 'ev_io_start': identifier not found [C:\Us
ers\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(635): error C2065: 'EV_DEFAULT_' : undeclared identifier [C:\
Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(635): error C2065: 'read_watcher_' : undeclared identifier [C
:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(635): error C3861: 'ev_io_stop': identifier not found [C:\Use
rs\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(641): error C2065: 'EV_DEFAULT_' : undeclared identifier [C:\
Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(641): error C2065: 'read_watcher_' : undeclared identifier [C
:\Users\Adam\node_modules\pg\build\binding.vcxproj]
..\src\binding.cc(641): error C3861: 'ev_io_start': identifier not found [C:\Us
ers\Adam\node_modules\pg\build\binding.vcxproj]
gyp ERR! rebuild error Error: `C:\Windows\Microsoft.NET\Framework\v4.0.30319\msb
uild.exe` failed with exit code: 1
gyp ERR! rebuild error     at ChildProcess.onExit (C:\Program Files\nodejs\node_
modules\npm\node_modules\node-gyp\lib\build.js:214:23)
gyp ERR! rebuild error     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! rebuild error     at Process._handle.onexit (child_process.js:674:10)
gyp ERR! not ok
pg@0.7.2 node_modules\pg
└── generic-pool@1.0.9 
```

有任何想法吗？如果没有这个模块，我无法通过 Node.js 连接到我的 PostgreSQL 数据库。

# java - Spring消息包问题

> ID：11329080
> 
> 赞同：0
> 
> 时间：2012-07-04T12:25:30.413
> 
> 标签：java, spring, spring-mvc, spring-security

我的网络应用程序中有一个弹簧安全设置。我想用我的自定义消息替换一些 spring security 消息，即

而不是`Bad Credentials`我想要`AbstractUserDetailsAuthenticationProvider.badCredentials`有价值`invalid username or password, please try again`

这是我的弹簧设置：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
<property name="basename" value="/WEB-INF/messages/messages"/>
<!-- Tried this as well <property name="basename" value="/WEB-INF/messages/messages.properties"/> -->
<property name="cacheSeconds" value="0" />
<property name="defaultEncoding" value="UTF-8" />
</bean> 
```

我已经在被`WEB-INF`调用的`messages`. 在这个文件夹中有一个名为`messages.properties`. 这个文件里面有一行：

```
AbstractUserDetailsAuthenticationProvider.badCredentials=invalid username or password, please try again 
```

我在这里做错了什么？

更新 ：

这个 servlet-context 在 web xml 中定义：

```
<!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

**问题解决了，将 messageSource bean 定义移动到另一个上下文。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:41:19.173

一切看起来都不错。尝试使用 spring 消息标签获取消息，以检查问题是出在您的配置上还是与安全消息有关：

```
<spring:message code="AbstractUserDetailsAuthenticationProvider.badCredentials" /> 
```

如果这确实有效，那么问题不在于您的配置（对我来说看起来不错）。

无论如何，尝试将您的消息文件放在类路径（源文件夹）中，并且：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages/messages"/>
    <property name="cacheSeconds" value="0" />
    <property name="defaultEncoding" value="UTF-8" />
</bean> 
```

此外，检查 bean 是否在 Spring 知道的应用程序上下文文件中声明。

# android - 拖动图像

> ID：11329081
> 
> 赞同：2
> 
> 时间：2012-07-04T12:25:34.647
> 
> 标签：android

我正在尝试为我的 android 游戏制作一个浮动操纵杆，但我无法这样做。这是我的 onTouch() 函数：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction();
    c = holder.lockCanvas();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        float x = event.getX();
        float y = event.getY();
        Log.d("joystick", " " + x + " " + y);
        ondraw(c, x, y);
        break;

    case MotionEvent.ACTION_MOVE:
        d = holder.lockCanvas();
        float xdrag = event.getX();
        float ydrag = event.getY();
        Log.d("joystick move", " " + xdrag + " " + ydrag);
        ondraw(d, xdrag, ydrag);
        break;
    }

    return false;
} 
```

由于某种原因，图像没有拖动。有人可以在这里告诉问题并帮助我吗？

我的抽签是：

```
protected void ondraw(Canvas c, float x, float y) {

    c.drawColor(Color.BLACK);
    c.drawBitmap(bmpback, x - (bmpback.getWidth() / 2),
            y - (bmpback.getHeight() / 2), null);
    c.drawBitmap(bmpfront, x - (bmpfront.getWidth() / 2),
            y - (bmpfront.getHeight() / 2), null);
    holder.unlockCanvasAndPost(c);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:07:24.757

像这样简单地拖动图像

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    x = event.getX();
    y = event.getY();
    //Log.d("joy", "x = " + x + "y =" + y);

    invalidate();
    return true;
}

@Override
protected void onDraw(Canvas canvas) {

    canvas.drawBitmap(joyback, x - joyback.getWidth() / 2,
            y - joyback.getHeight() / 2, null);

    super.onDraw(canvas);
} 
```

# android - 带有菜单键的设备上的操作溢出，例如在新的 Google + 应用中

> ID：11329083
> 
> 赞同：3
> 
> 时间：2012-07-04T12:25:49.870
> 
> 标签：android, android-layout, android-actionbar, google-plus, actionbarsherlock

Google 的新 Google + 和 Google + Messenger 在带有菜单键的设备的操作栏中有操作溢出项（至少在我拥有的带有冰淇淋的 Galaxy s2 上）。然而，对于这些设备，我似乎无法在我自己的应用程序的操作栏上强制溢出项目。谷歌搜索是否改变了他们对带有菜单键的设备上的操作溢出的想法？有谁知道现在是否可以添加溢出项？ActionbarSherlock 不算数，因为它不适用于冰淇淋设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:40:02.467

他们使用自己的操作栏实现，看起来与本机版本完全相同，但允许他们使用功能区菜单。这就是他们能够始终显示溢出的方式。

使用本机操作栏的 ActionBarSherlock 无法做到这一点。

# android - 在相对布局中排列元素

> ID：11329089
> 
> 赞同：-1
> 
> 时间：2012-07-04T12:26:11.507
> 
> 标签：android, layout

一段时间以来，我一直在努力寻找最好的方法。我想要的是这样的：

使用代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true" >

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Button" />
</LinearLayout>

<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleLarge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/progressBar1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="50dp"
    android:text="Button" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="49dp"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/progressBar1"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="52dp"
    android:text="TextView" /> 
```

我有这个布局：

![我追求的布局](../Images/1c9a62b7a99f78ca7e97b90d312caf9c.png)

这里的问题是边距是固定的 dpi 量。我想对此进行一些流动性。

我想要这样的方式：

> 进度条上方的空间被分成 3 个相等的部分，第一个文本上方，第一个和第二个文本之间以及第二个文本和进度条之间
> 
> 不确定的进度条 - 垂直和水平居中。
> 
> 进度条下方的空间被分成 2 个相等的部分 - 进度条和按钮之间以及按钮和底部线性布局之间。

有没有办法相对地做到这一点？我更喜欢在布局文件中执行此操作，但我也可以以编程方式进行编程和间距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:01:49.800

这是一个粗略的布局`RelativeLayout`：

```
<RelativeLayout>
<TextView
   android:id="@+id/textView1"
   android:layout_above="@+id/textView2" />

<TextView
    android:id="@+id/textView2"
    android:layout_above="@+id/progressBar1" />

<ProgressBar
  android:id="@+id/progressBar1" />

<Button
   android:id="@+id/button1"
   android:layout_below="@+id/progressBar1" />

<TableRow
   android:layout_below="@+id/button1"
   android:weightSum="1.0">

<Button
   android:layout_weight="0.5" />

<Button
   android:layout_weight="0.5" />

</TableRow>

</RelativeLayout> 
```

**注意：**参考`ProgressBar`居中，您可以安排上下布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:53:19.143

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="center"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="center"
    android:text="TextView" />

<LinearLayout
    android:id="@+id/pb"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="center" >

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout>

<LinearLayout
    android:id="@+id/b1"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="center" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout>

<LinearLayout
    android:id="@+id/b2"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="center" >

    <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:56:00.087

你可以试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/btn_bar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="Button" />
    </LinearLayout>

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />

    <RelativeLayout
        android:id="@+id/btn_wrapper"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/btn_bar"
        android:layout_below="@id/progressBar1" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Button" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/progressBar1"
        android:layout_alignParentTop="true"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <View
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="TextView" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>

</RelativeLayout> 
```

# eclipse - 运行 Eclipse 项目时找不到 build.xml 文件

> ID：11329092
> 
> 赞同：0
> 
> 时间：2012-07-04T12:26:25.473
> 
> 标签：eclipse, gwt, ant

我对 gwt 很陌生，实际上我并不真正了解它。

我有一个已经开发好的网络项目。我只想在 RichTextToolbar.java 文件中更改需要 gwt 的工具栏。所以我下载了 Eclipse 和它的 gwt 插件。

在前面的问题中，我的答案是我应该从我的 php/html 目录中获取唯一的文件 RichTextToolbar，放在我的 Eclipse Web 应用程序项目的 src 文件夹中；然后运行它，最后从 war 文件夹中取回已编译的文件并将其放在我的 php/html 目录中。

现在，问题是当我在 eclipse 中调试或运行文件时，我被告知选择 ant。然后我有一条消息，没有找到 build.xml 文件。有人可以帮忙吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:49:29.257

如果您打算将 GWT 中的 Java 代码编译为 Javascript，那么您可以使用 Eclipse 中 GWT 菜单下的“编译 GWT 项目”选项。

# jakarta-ee - 自动下载 .ics 文件

> ID：11329094
> 
> 赞同：0
> 
> 时间：2012-07-04T12:26:28.993
> 
> 标签：jakarta-ee, icalendar

我有一个 Java EE 应用程序和一个用于下载日历的选项（可以在 Outlook 中导入）。我想做的是每天在特定时间自动下载日历。我想添加此选项以防止每天登录应用程序并手动下载。是否有可能以某种方式设置绝对文件系统路径并在预定时间调用下载操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:32:15.443

在客户端，您必须创建一个计划任务（在 Windows 中）或一个 cron 作业（在 Linux 上），例如执行 wget 来下载您的文件。

请参阅[http://windows.microsoft.com/en-us/windows7/Schedule-a-task](http://windows.microsoft.com/en-us/windows7/Schedule-a-task) 和[http://gnuwin32.sourceforge.net/packages/wget.htm](http://gnuwin32.sourceforge.net/packages/wget.htm)

# jquery - JQuery从asmx Web服务返回一个下拉列表项数组，然后绑定到下拉列表？

> ID：11329099
> 
> 赞同：0
> 
> 时间：2012-07-04T12:26:39.197
> 
> 标签：jquery, asp.net, ajax, asmx, javascript-databinding

全部，

如何将 Web 服务方法返回的下拉列表项数组绑定到 ddlSubCategory asp.net 服务器控件？这是我的代码。请参阅 jquery OnSuccess 方法中的注释：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#<%=ddlParentCategory.ClientID%>').change(function () {
            var selectedParentCategory = getParentCategorySelectedValue();
var params=  []; 
params[id] = selectedParentCategory;  

          $.ajax({
                              type: "POST",
                              url: "MyWebService.asmx/GetSubCategoryItems",
                              data: params,               
                              contentType: "application/json; charset=utf-8",               
                              dataType: "json",               
                              success: OnSuccess,               
                              error: OnError
           });
                      });

    function OnSuccess(data, status) {
;// need to populate ddlSubCategory <asp:DropDownList on UI now
;// using returned array of drop down list items from the web service
    }        

    function OnError(request, status, error) {
                   alert(request.statusText);
    }

        function getParentCategorySelectedValue() {
            var SelectedVal = $('#<%=ddlParentCategory.ClientID %>').val();
            return SelectedVal;
        }

   });    
</script>

Here is my web service web method returning the array of list items:

[WebMethod]
        public ListItem []  GetSubCategoryItems(int id)
        {
            using (var dc = MyDataContext.Open())
            {
                return dc.SubCategory
                    .OrderBy(sc => sc.Name)
                    .Select(sc => new ListItem()
                                     {
                                         Value = sc.ID.ToString(),
                                         Text = sc.Name
                                     })
                    .Prepend(new ListItem() {Value = "", Text = "Please Select"})
                    .ToArray();
            }
        } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:02:43.257

你可以尝试这样的事情：

```
function OnSuccess(data, status) {
    // create a variable to the array
    var list = data;
    //get your combobox
    var $select = $('#<%=ddlParentCategory.ClientID %>'); 
    //check if it contains some items
    if (list.length > 0) {
        $select.empty().append('<option value="0">Please select...</option>');
        $.each(list, function () {
            $select.append($("<option></option>").val(this['Value']).html(this['Text']));
        });
        // $select.val(valueselected); //if you want to select a value... add this line
    }
    else //empty result from array
        $select.empty().append('<option selected="selected" value="0">Empty...<option>');
} 
```

我不知道你是从 web 服务中的 web 方法返回你的数组，但你必须考虑这些项目才能让它工作：

*   您的 Web 服务必须可以通过脚本访问，因此`[System.Web.Script.Services.ScriptService]`请在您的 Web 服务类上添加属性。
*   使您的 Web 服务方法可以通过 get 访问（尝试直接从浏览器访问）。您可以[在](http://msdn.microsoft.com/en-us/library/b2c0ew36%28v=vs.71%29.aspx)web.config 文件上执行类似的操作。
*   返回`json`格式，看[这个链接](http://encosia.com/asmx-and-json-common-mistakes-and-misconceptions/)
*   确保您`data`的`OnSuccess`函数参数与数组没有属性，例如，`data.items`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:19:23.913

```
function OnSuccess(data, status) {
   var array = JSON.parse(data).toArray(); 
   var ddl = $('#<%=ddlParentCategory.ClientID %>');
   for (var item = 0; item < array.length; item++)
   {
      $(ddl).append($("<option>" + item + "</option>"))
   }
} 
```

更多可以在这里找到：http: [//www.dotnetfunda.com/articles/article999-dynamically-adding-an-item-in-a-dropdownlist-control.aspx](http://www.dotnetfunda.com/articles/article999-dynamically-adding-an-item-in-a-dropdownlist-control.aspx) 祝你好运。

# java - 如何通过一个查询从 mongo 中查找和删除多个文档

> ID：11329101
> 
> 赞同：2
> 
> 时间：2012-07-04T12:26:52.170
> 
> 标签：java, mongodb, mongodb-java

java mongo 驱动程序有一个 findAndRemove 方法，该方法查找查询指定的一些文档并将其删除。我的问题是如何从集合中查找和删除指定（例如 100 个）数量的文档。那会是这样的

```
DBObject objects= db.getCollection("someCollection").findAndRemove( 100) ; 
```

其中 objects 是已删除对象的列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:41:53.547

`findAndRemove`是通过 实现`findAndModify`的，它又具有以下限制：

> 命令可用于原子地修改文档（最多一个）并返回它

（来自[`findAndModify`文档](http://www.mongodb.org/display/DOCS/findAndModify+Command)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T00:00:46.253

也许您的目标是批量删除文档，例如

```
BasicDBObject query = new BasicDBObject();
query.append("age", 25);
db.getCollection("someCollection").remove(query); 
```

这是 joews 对我在这里遇到的类似问题的回答 [Use MongoDB db.collection.remove(query) in java](https://stackoverflow.com/questions/20134261/use-mongodb-db-collection-removequery-in-java/20134330?noredirect=1#20134330)

# mysql - Rails 3加入2个belongs_to关联表

> ID：11329104
> 
> 赞同：0
> 
> 时间：2012-07-04T12:26:58.390
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord, arel

我有以下架构：

```
class Locale < ActiveRecord::Base
  has_many :shops

  # region : String
end

class Shop < ActiveRecord::Base
  belongs_to :locale
  has_many :carts

  scope :europe, joins(:locale).where('locales.region = ?', 'Europe')
end

class Cart < ActiveRecord::Base
  belongs_to :shop

  scope :purchased, where('purchased_at is not null')

  # purchased_at : DateTime
end 
```

我想查找在某个地区购买的所有购物车我设置了几个范围以使查询更具可读性但是当我尝试时：

Cart.purchased.join(:shop).merge(Shop.europe)

我收到错误：ActiveRecord::ConfigurationError: Association named 'locale' is not found; 也许你拼错了？

关于如何完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:15:15.110

```
class Locale < ActiveRecord::Base
  has_many :shops

  scope :europe, where(region: 'Europe')
end

class Shop < ActiveRecord::Base
  belongs_to :locale
  has_many :carts
end

class Cart < ActiveRecord::Base
  belongs_to :shop

  scope :purchased, where('purchased_at is not null')
end

Cart.purchased.joins(shop: :locale).merge(Locale.europe) 
```

# hadoop - Reducers 如何在 Hadoop 中收集地图输出

> ID：11329110
> 
> 赞同：0
> 
> 时间：2012-07-04T12:27:48.183
> 
> 标签：hadoop, mapreduce

减速器是拉地图输出还是地图将输出推到减速器？如果 Reducers 拉动，那么他们如何知道要联系哪些 Maps（从属机器）。JobTracker 会告诉 Reducers 联系哪台机器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:08:37.173

This happens completely under the hood. Essentially the MapReduce Framework initiates a shuffle and sort which happens over the network and pass it to the reducers. Your Reducer or Mapper dont do any push or pull, its the Map reduce framework does it and also if you have your custom partitioner, comparator or group comparator it does the shuffling and sorting of data according to those before pushing it to the reducers.

I hope it helps.

# debugging - 提醒事项如何启动应用程序？

> ID：11329111
> 
> 赞同：0
> 
> 时间：2012-07-04T12:27:49.763
> 
> 标签：debugging, windows-phone-7, reminders

我在让我的 Windows Phone 7 特定应用程序`Reminder`正常工作时遇到了一些问题 - 应用程序在开始显示启动画面后几分之一秒后重新关闭。

为了调试这个，我想知道如何`Reminder`启动应用程序，触发哪些事件等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:42:14.423

对于它可能值得 - 这是我发现的。

提醒重新启动应用程序，触发 App.xaml.cs 中的启动事件。也就是说 - 您需要重新加载使应用程序从独立存储或网络运行所需的任何内容

启动事件完成后，应用程序会直接进入请求的视图 - 跳过您可能为应用程序创建的任何加载页面。同样，请记住从独立存储中加载您需要的任何资源。

然后应用程序在 OnNavigatedTo 和 Loaded 关闭之前触发视图的构造函数。

# c++ - 任何人都可以在 cocos2d-x 中发布操纵杆的 c++ 代码吗

> ID：11329112
> 
> 赞同：-4
> 
> 时间：2012-07-04T12:27:59.890
> 
> 标签：c++, ios, cocos2d-iphone

在 cocos2d-x 中找不到实现操纵杆的方法。任何人都可以发布他们在 C++ 框架中使用操纵杆实现创建的任何程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:51:16.127

在这里你可以找到一些东西：

[http://www.gomonkey.it/2011/12/cocos-2d-sneakyjoystick/](http://www.gomonkey.it/2011/12/cocos-2d-sneakyjoystick/)
[http://gohighbeta.com/code/sneakyinput-avirtual-joypad-for-ios/](http://gohighbeta.com/code/sneakyinput-avirtual-joypad-for-ios/)

# objective-c - Xcode写入数据库但仍然为空

> ID：11329114
> 
> 赞同：0
> 
> 时间：2012-07-04T12:28:08.457
> 
> 标签：objective-c, ios, database, xcode, sqlite

首先，我来自西班牙，对我的语法感到抱歉。我正在将一些数据写入 sqlite 数据库，这是我的代码：

我已经检查了数据库、表和列名是否正常，当我更改任何内容时都会出现错误，因此代码可以正常工作。

```
@try {

    NSFileManager *fileMgr=[NSFileManager defaultManager];

    NSString *dbPath=[self database]; 
    BOOL succes=[fileMgr fileExistsAtPath:dbPath];
    if(!succes)
    {
        NSLog(@"Cannot locate database '%@'.",dbPath);
    }
    if (!(sqlite3_open([dbPath UTF8String], &dbcapturas)==SQLITE_OK)) {
        NSLog(@"An error has occured: %@",sqlite3_errmsg(dbcapturas));
    }

    //sqlite3_stmt *sqlStatement;
    NSString *asd=numero.text;
    NSString *insertStatement=[NSString stringWithFormat:@"INSERT INTO captura(key,tecnico, fecha,provincia,municipio,latitud,longitud,altura,familia,especie,numero,comentario)Values(\"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\", \"%@\")",asd,tecnico,fechaHora,tecnico,municipio,latitud,longitud,altura,tecnico,animal,asd,coment];
    char *error;
    if((sqlite3_exec(dbcapturas, [insertStatement UTF8String], NULL, NULL, &error))==SQLITE_OK)
    {
        NSLog(@"Person inserted.");
    }
    else
    {
        NSLog(@"Error: %s", error);
    }
} @catch (NSException *exception) { 
    NSLog(@"fail"); 
}
@finally {
        NSLog(@"cerrada");
    sqlite3_close(dbcapturas);
} 
```

第一次单击保存按钮时，我得到：

> 2012-07-04 12:17:45.644 adasdasd[1783:f803] 插入的人。

我第二次得到：

> 2012-07-04 12:29:18.959 adasdasd[1840:f803] 错误：列键不唯一

所以我的代码应该没问题，但是当我用 firefox 插件打开数据库时，它完全是空的，知道吗？

编辑：我现在打电话

```
-(NSString *)database{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"capturas.sqlite"];
} 
```

但现在我收到一条错误消息：没有这样的表：capturas 我的数据库中有一个表 capturas 100% 肯定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:39:54.677

设置表时，该列`key`可能已编入索引或定义为唯一的或自动递增的。当您进行插入时，您传递了一个特定的键，即变量中的任何内容`asd`。如果您第二次尝试，您将收到 sqlite 错误，因为该列`key`必须是唯一的。如果是自动递增的，不填，它会自动填充。

如果您正确关闭它，第一个条目应该在数据库中。确保您正在使用 Firefox 检查正确的数据库副本（例如，通过在应用程序委托中插入虚拟记录进行测试）。

# css - CSS水平居中线

> ID：11329115
> 
> 赞同：0
> 
> 时间：2012-07-04T12:28:09.517
> 
> 标签：css

如何使用 CSS 实现此视图：

- - - - - - - - - 标题

或者

标题 - - - - - - - - -

我有

```
<div id="titleBlock">
   <div id="title">Some text</div>
   <div id="titleLine"></div>
</div> 
```

我的风格是：

```
#titleLine {
    border-top: 1px solid black;
    width: 84%;
    clear: both;
    height: 20px;
}

#title {
    height: 10px;
    float: right;
} 
```

我的方法在这里：[jsFiddle](http://jsfiddle.net/sY2SV/)

但是线宽是用百分比定义的，我需要它用 CSS 自动调整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:37:16.483

这可能是你所追求的：http: [//jsfiddle.net/XpSWX/1/](http://jsfiddle.net/XpSWX/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:34:50.900

希望这可以帮助

```
<div id="titleBlock">
    <div id="title">Some text</div>
    <div id="titleLine"></div>
</div>​

#titleLine {
    border-top: 1px solid black;
    width: 84%;
    float:left;
    height: 20px;
    margin-top:8px;
}

#title {
    height: 10px;
    float: right;
}​ 
```

[http://jsfiddle.net/sY2SV/1](http://jsfiddle.net/sY2SV/1)

```
<div id="titleBlock">
    <div id="title">Some text</div>
    <div id="titleLine"></div>
</div>​

#titleLine {
    border-top: 1px solid black;
    width: 84%;
    float:right;
    height: 20px;
    margin-top:8px;
}

#title {
    height: 10px;
    float: left;
}​ 
```

[http://jsfiddle.net/sY2SV/2](http://jsfiddle.net/sY2SV/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:39:27.140

这是一个解决方案：

```
#titleBlock {
    width:100%;
}

#titleLine {
    background:black;
    position:absolute;
    z-index:1;
    left:0px;
    top:14px;
    width:100%;
    height: 1px;
}

#title {
    display:inline-block;
    padding:4px;
    background:white;
    position:relative;
    z-index:2;
    /* Only variable to change... Just say left and it woulb be title------- */
    float:right;
}​​​​ 
```

[演示](http://jsfiddle.net/sY2SV/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:54:20.447

嘿，现在你可以用这个了

**HTML**

```
<div class="hello"><span>Hello i m sony</span></div> 
```

**CSS**

```
.hello{
background:green;
  text-align:left;
  position:relative;

}
.hello span{
  padding-right:10px;
background:green;
  display:inline-block;
  position:relative;
  z-index:1
}
.hello:after{
content:'';
  border-top:solid 5px red;
  position:absolute;
 right:0;
  left:0;
  top:7px
} 
```

**现场演示**

[http://tinkerbin.com/1guJzKcI](http://tinkerbin.com/1guJzKcI)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T08:40:12.040

[使用 Css3 在背景](https://stackoverflow.com/questions/11392089/horizontal-line-in-background-using-css3/26157025#26157025)中的水平线中检查我的答案

你可以像这样使用 1% 的渐变

```
.datedAside {
     background: linear-gradient(0deg, transparent 49%, #000 50%, transparent 51%);
}
.datedAside span{
     background: #FFF;
     padding: 0 0.5rem;
} 
```

您需要将额外的跨度设置为与组件背景相同的背景颜色，以使其看起来像是“删除”了文本后面的行。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-04T12:34:53.480

对于文本，最好使用`text-align`

# android - 使用 ffmpeg (sws_scale) 将图像编码为视频

> ID：11329116
> 
> 赞同：0
> 
> 时间：2012-07-04T12:28:10.880
> 
> 标签：android, video, encoding, ffmpeg, scale

我正在尝试使用 ffmpeg 库将图像编码为视频。我有这些全局参数：

```
//Global params
AVCodec         *codec;
AVCodecContext  *codecCtx;
uint8_t         *output_buffer;
int             output_buffer_size; 
```

我将编码分为 3 种方法： 初始化编码器：

```
jint Java_com_camera_simpledoublewebcams2_CameraPreview_initencoder(JNIEnv* env,jobject thiz){
avcodec_register_all();
avcodec_init();
av_register_all();

int fps = 30;

/* find the H263 video encoder */
codec = avcodec_find_encoder(CODEC_ID_H263);
if (!codec) {
    LOGI("avcodec_find_encoder() run fail.");
    return -5;
}

//allocate context
codecCtx = avcodec_alloc_context();

/* put sample parameters */
codecCtx->bit_rate = 400000;
/* resolution must be a multiple of two */
codecCtx->width = 176;
codecCtx->height = 144;
/* frames per second */
codecCtx->time_base = (AVRational){1,fps};
codecCtx->pix_fmt = PIX_FMT_YUV420P;
codecCtx->codec_id = CODEC_ID_H263;
codecCtx->codec_type = AVMEDIA_TYPE_VIDEO;

/* open it */
if (avcodec_open(codecCtx, codec) < 0) {
    LOGI("avcodec_open() run fail.");
    return -10;
}

//init buffer
output_buffer_size = 500000;
output_buffer = malloc(output_buffer_size);

return 0; 
```

}

编码图像：

```
jint Java_com_camera_simpledoublewebcams2_CameraPreview_encodejpeg(JNIEnv* env,jobject thiz,jchar* cImage, jint imageSize){
int             out_size;
AVFrame         *picture;
AVFrame         *outpic;
uint8_t         *outbuffer;

//allocate frame    
picture = avcodec_alloc_frame();    
outpic = avcodec_alloc_frame();

int nbytes = avpicture_get_size(PIX_FMT_YUV420P, codecCtx->width, codecCtx->height);
outbuffer = (uint8_t*)av_malloc(nbytes);
outpic->pts = 0;

//fill picture with image
avpicture_fill((AVPicture*)picture, (uint8_t*)cImage, PIX_FMT_RGBA, codecCtx->width, codecCtx->height);
//fill outpic with empty image
avpicture_fill((AVPicture*)outpic, outbuffer, PIX_FMT_YUV420P, codecCtx->width, codecCtx->height);

//rescale the image 
struct SwsContext* fooContext = sws_getContext(codecCtx->width, codecCtx->height, 
                                                       PIX_FMT_RGBA, 
                                                       codecCtx->width, codecCtx->height, 
                                                       PIX_FMT_YUV420P, 
                                                       SWS_FAST_BILINEAR, NULL, NULL, NULL);
sws_scale(fooContext, picture->data, picture->linesize, 0, codecCtx->height, outpic->data, outpic->linesize);   

//encode the image
out_size = avcodec_encode_video(codecCtx, output_buffer, output_buffer_size, outpic);
out_size += avcodec_encode_video(codecCtx, output_buffer, output_buffer_size, outpic);

//release pictures
av_free(outbuffer);
av_free(picture);
av_free(outpic);

return out_size; 
```

}

并关闭编码器：

```
void Java_com_camera_simpledoublewebcams2_CameraPreview_closeencoder(JNIEnv* env,jobject thiz){
free(output_buffer);
avcodec_close(codecCtx);
av_free(codecCtx); 
```

}

当我发送第一张图像时，我会从编码器中得到一个结果。当我尝试发送另一个图像时，程序崩溃了。我尝试调用 init 一次，然后调用图像，然后关闭 - 不起作用。我尝试为每个图像调用初始化和关闭 - 没有用。

有什么建议么？

谢谢！

编辑：经过进一步研究，我发现问题出在`sws_scale`方法上。仍然不知道是什么导致了这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:10:41.330

> out_size = avcodec_encode_video(codecCtx, output_buffer,output_buffer_size, outpic);
> 
> out_size += avcodec_encode_video(codecCtx, output_buffer, output_buffer_size,outpic);

为什么要编码两次？

也许错误是由于双重编码造成的。尝试删除第二个编码。

# java - 如何用java访问bios信息？

> ID：11329120
> 
> 赞同：3
> 
> 时间：2012-07-04T12:28:25.140
> 
> 标签：java, windows-7, bios

是否可以使用 java 获取 windows 7 的 bios 信息，最少信息至少可以使用 java 获取 cpu 信息、时钟速度、内核解锁、风扇速度等，因为它是我在 C 之后唯一熟悉的编译语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:36:32.483

不和是。

由于 Java 被设计为对多种硬件配置的抽象，因此默认情况下是不可能的。

另一方面，如果您使用 JNI 或 JNA 访问可以访问此类信息的本机库，则可以访问它。

但是如果你对C很了解，那么*不要过河取水*，那就用C吧。

# objective-c - NSDictionary 中的异常解析 NSDictionary

> ID：11329121
> 
> 赞同：3
> 
> 时间：2012-07-04T12:28:32.160
> 
> 标签：objective-c, ios, nsdictionary

我有以下 plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>1_NARR</key>
    <dict>
        <key>audio</key>
        <string>1 NARR AUDIO LOCATION</string>
        <key>text</key>
        <string>1 NARR TEXT</string>
    </dict>
    <key>1_C1_1</key>
    <dict>
        <key>text</key>
        <string>1 C1 1 TEXT</string>
        <key>audio</key>
        <string>1 C1 1 AUDIO LOCATION</string>
        <key>position</key>
        <string>1 C1 1 Position</string>
        <key>frameX</key>
        <string>1 C1 1 FRAMEX</string>
    </dict>
</dict>
</plist> 
```

这是我遍历列表的代码：

```
NSDictionary *mainDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"dialogues" ofType:@"plist"]];

    if (mainDictionary != nil){
        NSLog(@"viewDidLoad: mainDictionary != nil");
        [self parseDictionary:mainDictionary];
    }

- (void)parseDictionary:(NSDictionary*)aDictionary
{
    // enumerate key/values, recursing as necessary
    [aDictionary enumerateKeysAndObjectsUsingBlock:^(id key, id value, BOOL *stop) {
        if ([value isKindOfClass: [NSDictionary class]]) {
            NSLog(@"parseDictionary: isKindOfClass: NSDictionary");
            [self parseDictionary: value];
        } else {
            //... parse value here ...
            NSLog(@"parseDictionary: else: ");
            if ([value valueForKey:@"text"]) 
            {            
                NSLog(@"parseDictionary: else: if: ");
                //NSLog(@"parseDictionary: if: valueForKey:text == %@", [value valueForKey:@"text"]);
            }
        }
    }];
} 
```

我收到以下异常：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFString 0x6899760> valueForUndefinedKey:]: this class is not key value coding-compliant for the key text.' 
```

我无法弄清楚为什么？你看到逻辑有什么问题吗？非常感谢您的回复。

这是完整的堆栈跟踪：

```
Terminating app due to uncaught exception 'NSUnknownKeyException',
reason: '[<__NSCFString 0x6e7a780> valueForUndefinedKey:]: this class
is not key value coding-compliant for the key text.'
*** First throw call stack: (0x16c0022 0x14e0cd6 0x16bfee1 0x1e7efe 0x156831 0x155c99 0x28bf 0x16bf8f8 0x15e39ed 0x165bbd6 0x165b84d
0x165b795 0x27cb 0x287e 0x16bf8f8 0x15e39ed 0x165bbd6 0x165b84d
0x165b795 0x27cb 0x2a41 0x55fa1e 0x23f1 0x4964be 0x497274 0x4a6183
0x4a6c38 0x49a634 0x1be3ef5 0x1694195 0x15f8ff2 0x15f78da 0x15f6d84
0x15f6c9b 0x496c65 0x498626 0x201d 0x1f95) terminate called throwing
an exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:32:35.837

考虑您的 plist 的这一部分：

> ```
>  <key>audio</key>
>     <string>1 NARR AUDIO LOCATION</string> 
> ```

在您的块中，`key`将是字符串“audio”，`value`将是字符串“1 NARR AUDIO LOCATION”。该值是一个字符串，而不是字典，因此我们`else`在您的条件中点击了该子句。然后你这样做：

> ```
>  if ([value valueForKey:@"text"]) 
> ```

但是，正如我们已经发现的，`value`是一个字符串。您不能在字符串上调用字典方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:38:10.990

您正在尝试在对象上使用键值编码 API 方法`valueForKey:`（[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)）`NSString`。

你似乎有你的逻辑从后到前，因为我认为你正在尝试访问 an 中的密钥`text`，`NSDictionary`但是当值**不是**`NSDictionary`实例时（即在`else`你的测试的一部分）你正在执行它。

注意：`[NSDictionary objectForKey:]`无论如何都要使用。

**编辑**：试试这个版本：

```
- (void)parseDictionary:(NSDictionary*)aDictionary
{
    // enumerate key/values, recursing as necessary
    [aDictionary enumerateKeysAndObjectsUsingBlock:^(id key, id value, BOOL *stop) {
        if ([value isKindOfClass: [NSDictionary class]]) {
            NSLog(@"parseDictionary: isKindOfClass: NSDictionary");
            [self parseDictionary: value];
        } else {
            NSLog(@"'%@'='%@'", key, value);
        }
    }];
} 
```

# javascript - jQuery：在特定条件下显示文本框

> ID：11329125
> 
> 赞同：0
> 
> 时间：2012-07-04T12:28:39.013
> 
> 标签：javascript, jquery

当用户选择美国时，我显示美国城市的文本框，但如果用户取消选择美国怎么办？

如果没有隐藏城市文本框 ，我如何检查是否选择了**美国。**![在此处输入图像描述](../Images/6416c4dd23a18a098e33b8e80abda29b.png) 我的脚本是：

```
<tr>
<td nowrap="nowrap">
<label for="countryId">Countries</label>
</td>
<td>
<select id="countryId" onchange="usCity();" multiple="multiple" name="countryId[]">
<option value="1">United States</option>
<option value="2">United Kingdom</option>
<option value="3">Australia</option>
<option value="4">UAE</option>
<option value="5">Denmark</option>
<option value="6">Czech Republic</option>
<option value="7">Brazil</option>
<option value="8">Singapore</option>
<option value="9">Pakistan</option>
<option value="10">Germany</option>
<option value="11">India</option>
<option value="12">SriLanka</option>
<option value="13">UK</option>
<option value="14">Algeria</option>
<option value="15">Andorra</option>
<option value="16">Caneda</option>
<option value="17">HongKong</option>
</select>
</td>
<td valign="top">
</tr>
<tr id="usCitytr" style="display: none;">
<td nowrap="nowrap">
<label for="USCity">US City Name</label>
</td>
<td colspan="3">
<input id="USCity" type="text" value="" name="USCity">
</td>
</tr>

function usCity()
    {
        if ($("#countryId option:selected").text() == 'United States' || $("#countryId option:selected").text() == 'US'){
            $("#usCitytr").show();
        }
    } 
```

我在每次选择时都必须获取数组结构中的所有选定值，然后使用循环查找“US”（如果找到），然后显示“US City”文本框，否则隐藏。为此，我使用

```
alert($('select#countryId').text()); 
```

但它返回组合框中存在的所有值。然而

```
alert($('select#countryId').val()); 
```

仅返回选定的值，但我需要 'US' 而不是存在 'US' 的索引，因为 'US' 可能在任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:36:02.803

```
<option id="opt_US" value="1">United States</option>

if ($("#opt_US").is(":selected") {
    $("#usCitytr").show();
} else {
    $("#usCitytr").hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:51:28.617

```
 function usCity()
    {
        if ($("#countryId option:selected").text() == 'United States' || $("#countryId option:selected").text() == 'US'){
            $("#usCitytr").show();
        } else {
            $("#usCitytr").hide();
        }
    } 
```

# php - PHP - 从返回的数组中访问 MSSQL 日期时间列

> ID：11329133
> 
> 赞同：1
> 
> 时间：2012-07-04T12:29:00.510
> 
> 标签：php, sql-server, arrays

PHP - 从返回的数组中访问 MSSQL 日期时间列

```
Array
(
    [0] => Array
        (
            [CallId] => 45
            [CallLoginId] => 1
            [CustomerId] => 140
            [CallOptionId] => 2
            [CallTypeId] => 2
            [CallStatusId] => 1
            [CallDateTime] => DateTime Object
                (
                    [date] => 2012-06-28 00:00:00
                    [timezone_type] => 3
                    [timezone] => Asia/Kolkata
                )

            [ContactNo] => 45151551115
            [ContactPerson] => Contact Person name
            [ProductId] => 1
            [ProdCompanyId] => 1
            [ProdCategoryId] => 1
            [ModelNo] => 451212151
            [ProdUnderId] => 1
            [Problem] => Simple Problem Details 
            [Remarks] => Remarks 
            [Accessories] => Accessories 
            [CallCaseId] => 
            [CallCaseDate] => 
            [ServiceCharge] => 0
            [CourierName] => 
            [DocketNo] => 
            [CompanyId] => 126
            [ASPId] => 130
            [InsBy] => 134
            [InsDate] => DateTime Object
                (
                    [date] => 2012-06-23 17:04:51
                    [timezone_type] => 3
                    [timezone] => Asia/Kolkata
                )

            [UpdBy] => 11
            [UpdDate] => DateTime Object
                (
                    [date] => 2012-06-28 18:29:23
                    [timezone_type] => 3
                    [timezone] => Asia/Kolkata
                )

            [FName] => Kumar
            [MName] => a
            [LName] => Customer
            [ProductName] => LenovoDesktop420
            [CallOption] => InHouse
            [CallType] => H.W.Installation
            [ProdCompany] => Lenovo
            [ProdCategory] => Desktop
            [ProdUnder] => AMC
            [CallStatus] => Open
            [EntityId] => 134
            [InsertBy] => Bhavin   Rana
        )

) 
```

如何从这个返回的数组中访问日期时间值？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:31:41.547

你有一个带有数字索引的外部数组元素`[0]`，它是一个关联数组。`CallDateTime`作为该数组的键是一个`DateTime`对象。

```
$array[0]['CallDateTime']->format('Y-m-d H:i:s')  // 2012-06-28 00:00:00
$array[0]['CallDateTime']->getTimezone()->getName()    // Asia/Kolkata

// Same with InsDate and UpdDate
$array[0]['InsDate']->format('Y-m-d H:i:s')         // 2012-06-23 17:04:51
$array[0]['InsDate']->getTimezone()->getName()           // Asia/Kolkata 
```

# java - Selenium chromedriver 意外停止

> ID：11329134
> 
> 赞同：2
> 
> 时间：2012-07-04T12:29:02.020
> 
> 标签：java, selenium, webdriver, junit4, selenium-chromedriver

当我在 java selenium web 驱动程序中使用 chrome 驱动程序运行我的测试时，它会自动关闭，在 j 单元中给出以下错误跟踪......任何人都可以帮忙吗？

> org.openqa.selenium.WebDriverException：元素在点 (100, 19) 处不可点击。其他元素将收到点击：...（警告：服务器未提供任何堆栈跟踪信息）命令持续时间或超时：73 毫秒构建信息：版本：'2.24.1'，修订：'17205'，时间：'2012 -06-19 17:28:14' 系统信息：os.name：'Windows 7'，os.arch：'x86'，os.version：'6.1'，java.version：'1.7.0_05' 驱动程序信息： driver.version：RemoteWebDriver 会话 ID：bbf0423d63c2cd68f7a731535c746373 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang。反射.构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:10:10.843

当您尝试单击在执行测试时无法单击的内容时，会发生这种情况。当某些 CSS/Javasript 动画尚未完成或您尝试单击的元素不在窗口的可见区域中时，可能会发生这种情况。

请参阅 Selenium[问题 2766，](http://code.google.com/p/selenium/issues/detail?id=2766)尤其是[评论 27](http://code.google.com/p/selenium/issues/detail?id=2766#c27)

# javascript - Javascript将检查属性应用于内部HTML的复选框

> ID：11329135
> 
> 赞同：0
> 
> 时间：2012-07-04T12:29:09.787
> 
> 标签：javascript, jquery, jquery-ui

我想`$('#riderCheck').attr('checked','true')`在某些情况下检查复选框。但问题是复选框在innerHTML 中。所以我无法将检查属性应用于复选框。innerHTML 就像

```
innerHtml += '<input type = "checkbox" id="riderCheck" value="Rider"/>'. 
```

希望你们能理解我想做什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:50:05.020

@Joseph 梦想家的回答澄清了你的问题。

这是您可以使用 Javascript 执行此操作的另一种方法，但不确定它是否适用于您的情况。

```
innerHtml += var html = '<input type = "checkbox" ' + ((condition)?'checked="checked"':'') + ' id="riderCheck" value="Rider"/>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:51:09.503

jQuery 使用`.prop`设置属性的方法而不是通常的`.attr`方法：

```
jQuery('<input type="checkbox" id="riderCheck" value="Rider" />')
    .prop('checked', true); 
```

[http://jsfiddle.net/steveukx/7uMZh/](http://jsfiddle.net/steveukx/7uMZh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:33:09.637

您可以[将 HTML 包装在 jQuery](http://jsfiddle.net/53Q5Q/1/)中以使用 jQuery 方法

```
//Wrap HTML in jQuery. This creates HTML from the string and let's you use jQuery
//methods on it
var html = $('<input type="checkbox" id="riderCheck" value="Rider"/>');

//check it
html.attr('checked',true); 
```

# android - 最近的应用程序视图访问

> ID：11329136
> 
> 赞同：1
> 
> 时间：2012-07-04T12:29:11.883
> 
> 标签：android, android-layout, android-windowmanager

是否可以在 Android 上访问**最近应用程序**的视图（或任何其他参考） ？这是在某些设备上长按主页按钮时出现在顶部的窗口。

我没有在我的 Activity 的视图层次结构中找到它，也没有在 Window 中找到它。我得到的唯一通知是失去焦点。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:38:46.633

不，对不起。这不是由您的进程显示，而是由操作系统进程显示，因此它不在前台活动的视图层次结构中。对于像`Toast`s 这样的东西也是如此。

# android - 如何识别设备中安装的外部 sd 卡并且该设备也有内部 sd 卡？

> ID：11329137
> 
> 赞同：1
> 
> 时间：2012-07-04T12:29:15.410
> 
> 标签：android, android-intent, android-ndk

```
if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()))            
{           
    System.out.println("​sd card present");         
} 
```

通过使用此代码，我能够找到 sd 卡，但我无法识别它是哪张 sd 卡。那是内置的sd或外部...

[http://androidforums.com/samsung-galaxy-s2-t/557831-am-i-saving-sdcard-not.html](http://androidforums.com/samsung-galaxy-s2-t/557831-am-i-saving-sdcard-not.html)请参考这个链接一次.....

在**SGS2 上，Samsung**有一个 2 GB 的系统分区，剩余的 14 GB 分区并通过将其挂载点 /sdcard 识别为 sd 卡。除此之外，我们可以在该设备中安装一个外部可移动 sd 卡。那么如何通过编程识别外接可移动sd卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:34:31.103

```
String sdcardpath = null;
    File[] faFiles = new File("/mnt").listFiles();
    abc: {
        for (File file : faFiles) {
            if (file.isDirectory()) {
                String pathMain = "" + file.getAbsolutePath();
                Log.v("@@@@@@@@@@@@@@@@", "222222222222" + pathMain);
                if (pathMain.indexOf("ext") > 0&&pathMain.startsWith("/mnt/")) {
                    File fp = new File(pathMain);
                    if (fp.canWrite()) {
                        Log.v("@@@@@@@@@@@@@@@@", "33333333333333333"
                                + pathMain);
                        //external sd card is there..
                        sdcardpath = pathMain;
                        break abc;
                    }
                    else{

                    }
                } else {
                    if (pathMain.indexOf("sd") > 0) {
                        File fp = new File(pathMain);
                        if (fp.canWrite()) {
                            Log.v("@@@@@@@@@@@@@@@@", "33333333333333333"+ pathMain);
                            sdcardpath = pathMain;

                               //internal sd card is there..
                        }

                    }
                }
            }
        }
    } 
```

# javascript - window.onchange = function() 事件

> ID：11329139
> 
> 赞同：0
> 
> 时间：2012-07-04T12:29:29.810
> 
> 标签：javascript

我创建了一个函数，该函数根据使用 window.onchange 事件在 chrome 和 FF 中正常工作的选择下拉列表的组合显示/隐藏不同的消息。谁能告诉我为什么这在 ie 中不起作用，如果他们有解决方案。

由于内部限制，它必须建在表格中。

```
 ;(function(){
    document.onchange = function(){
        // Initialise variables for drop down options
        var homeMove        = document.getElementById('homeMove'),
            transferOrder   = document.getElementById('transferOrder'),
            orderComplete   = document.getElementById('orderComplete'),
            submitBtn       = document.getElementById('submitBtn');

        // Initialise variables for comments
        var comment1 = document.getElementById('comment1'),
            comment2 = document.getElementById('comment2'),
            comment3 = document.getElementById('comment3');

        if((homeMove.value == 'No') && (transferOrder.value == 'No')){
            comment2.style.display = 'none';
            comment3.style.display = 'none';
            comment1.style.display = 'block';
            submitBtn.disabled = true;
        }   

        // if Home Move - No AND Transfer Order - Yes. Display nothing. Submit button abled
        if((homeMove.value == 'No') && (transferOrder.value == 'Yes')){
            comment1.style.display = 'none';
            comment2.style.display = 'none';
            comment3.style.display = 'none';
            submitBtn.disabled = false;
        }

        // If Home Move - Yes AND Transfer Order - NO. Display comment1\. Submit button disables
        if((homeMove.value == 'Yes') && (transferOrder.value == 'No')){
            comment1.style.display = 'block';
            comment2.style.display = 'none';
            comment3.style.display = 'none';
            submitBtn.disabled = true;
        }

        // If Home Move - Yes AND Transfer Order - Yes AND Order Complete - Yes. Display comment2 Subhmit button abled
        if((homeMove.value == 'Yes') && (transferOrder.value == 'Yes') && (orderComplete.value == 'Yes')){
            comment1.style.display = 'none';
            comment2.style.display = 'block';
            comment3.style.display = 'none';
            submitBtn.disabled = false;
        }   

        // If Home Move - Yes AND Transfer Order - Yes and Order Complete - No. Display comment3\. Submit button disabled
        if((homeMove.value == 'Yes') && (transferOrder.value == 'Yes') && (orderComplete.value == 'No')){
            comment1.style.display = 'none';
            comment2.style.display = 'none';
            comment3.style.display = 'block';
            submitBtn.disabled = true;
        }
    }
})(); 
```

对此的任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:38:09.493

IE 仅在元素失去焦点时触发 onchange 事件

尝试使用 onclick 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:40:29.357

首先，如果不做一个document.change，添加事件来改变下拉菜单会更好。

有时 onpropertychange 是一个更可靠的镜头事件，可以依赖于 ie。但请确保对于该事件，您通过添加以下过滤器来执行后续检查该事件是否用于更改值：

```
yourselectboxelement.onpropertychange = function() { 
  if (window.event.propertyName == "value") {   
   // Do stuff here     
  } 
}; 
```

# magento - 在 Magento 控制器中使用 move_uploaded_file

> ID：11329142
> 
> 赞同：3
> 
> 时间：2012-07-04T12:29:33.740
> 
> 标签：magento

我是 magento 的新手，我正在 magento 管理员中为文件上传创建自定义模块。

现在我已经在我的模块控制器中发布了上传文件。在这里，我曾经`move_uploaded_file`将文件上传到与控制器文件夹相同的目录中。下面的代码我用于控制器中的文件上传

```
$file_name=$_FILES["file"]["name"];
    $file_path="import/$file_name";

    if(move_uploaded_file($_FILES["file"]["tmp_name"],$file_path))
    {
        // my files not uploading 
    } 
```

我无法上传目录文件夹中的文件。

那么我做错了什么？或者建议我`move_uploaded_file`在magento控制器中使用是否是处理文件上传的正确方法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T06:11:19.140

为了在 Magento 中上传文件，您可以使用 Varien_File_Uploader::save() 方法：

```
if(isset($_FILES['file']['name']) && $_FILES['file']['name'] != '') {
    try {
        $fileName       = $_FILES['file']['name'];
        $fileExt        = strtolower(substr(strrchr($fileName, "."), 1));
        $fileNamewoe    = rtrim($fileName, $fileExt);
        $fileName       = str_replace(' ', '', $fileNamewoe) . '.' . $fileExt;

        $uploader       = new Varien_File_Uploader('file');
        $uploader->setAllowedExtensions(array('png', 'jpg')); //allowed extensions
        $uploader->setAllowRenameFiles(false);
        $uploader->setFilesDispersion(false);
        $path = Mage::getBaseDir('media') . DS . 'yourModuleFolder';
        if(!is_dir($path)){
            mkdir($path, 0777, true);
        }
        $uploader->save($path . DS, $fileName );
    } catch (Exception $e) {
        echo $e->getMessage();
    }
} 
```

# javascript - 哪个是在 FireFox 中测量浏览器回流的最佳可用工具？

> ID：11329148
> 
> 赞同：1
> 
> 时间：2012-07-04T12:29:55.597
> 
> 标签：javascript, html, css, firefox, pagespeed

我查看[了 Nicole Sullivan 的这篇文章](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)，其中提到了很多可以帮助测量浏览器回流的工具：

*   Google 的 Lindsey Simon 编写了一个[小书签](http://ua-profiler.appspot.com/reflows/)，可以在任何浏览器上测试回流时间。极好的。（注意：所有的震动都是正常的！）
*   John Resig 写了一个小[书签](http://ejohn.org/blog/browser-paint-events/)来可视化绘画事件。
*   Kyle Scholz 创建了这个[工具](http://www.kylescholz.com/blog/2008/11/digging_into_paint_events_in_f_1.html)来在加载之前可视化绘制事件。
*   Yoono 的 Alex 创建了[XUL 分析器](http://www.kylescholz.com/blog/2008/11/digging_into_paint_events_in_f_1.html)。

我尝试使用第一个工具，但它没有带我到任何地方。然后尝试了第二个工具，但我找不到任何信息。然后我安装了第三个工具作为 FF 的附加工具，但这并没有给我屏幕截图选项卡中的任何内容。第四个给我一个 404 错误。

所以我对 SO 中所有专家的问题是，哪个是衡量浏览器回流的最佳可用工具？我希望自从那篇文章发表以来，会有一些新工具出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:48:17.570

我猜Chrome 开发者工具`CTRL+SHFT+I`有类似的东西...单击时间线选项卡并单击页脚中的记录按钮，看看您的页面会发生什么！

在右侧显示所有记录，当您将鼠标悬停在记录上时，它会突出显示页面上的元素。

# mysql - 一张包含大量记录的表中的多个 SQL WHERE 子句

> ID：11329149
> 
> 赞同：0
> 
> 时间：2012-07-04T12:29:55.893
> 
> 标签：mysql, sql, database, select

最近被要求开发一个应用程序，它基本上是使用整个数据库中的1个主单表进行操作。

它必须有大约 20 个不同类型的列 - decimals、int、varchar、date、float。在某些时候，该表将有数千行（3-5k）。

该应用程序必须能够通过组合每个列条件来选择记录 - 例如，在日期之间、大于某物、小于某物、等于某物等。基本上结合了许多 where 子句以查看所需的结果。

所以我的问题是，既然我知道如何结合 wheres 并制作应用程序，那么最好的方法是什么？我的意思是当我有 3k 条记录并使用 15 个 WHERE 子句进行 SELECT 查询时，MySQL 是否足够好，不会减慢速度？我从来没有使用过大于 1k 记录的数据库，所以我不确定是否应该为此使用 MySQL。如果这很重要，我还将使用 PHP 作为服务器语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:34:52.803

您正在谈论 ONE where 子句中的条件。

对于关系数据库来说，3000 行是非常少的。这些通常要大得多（例如 300 万以上甚至更多）

我担心您在一张表中有 20 列。这听起来像是一个标准化问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:34:33.140

为您的数据库定义明确的结构，包括适当的索引，即使有 15 个条件，3k 条记录也算不了什么。即使没有索引，如果记录如此之少，您是否会看到任何性能下降也是值得怀疑的。

然而，我会为未来做计划，也许看看你的查询，看看你在这个阶段是否可以做任何表优化，以减少未来的痛苦。谁知道呢，今天有 3k 条记录，明年有 30m 条记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:45:50.663

由于看到行数非常少，我想它不应该导致任何性能问题。您仍然可以仔细查看使用 OR 运算符并在 where 子句中的列上建立索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:46:53.373

指数，指数，指数！

如果您需要检查很多不同的列，请尝试扁平化您使用的逻辑。在任何情况下，请确保您在选中的列上设置了适当的索引。A 不是每列的索引，而是所有这些列的一个索引，经常使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T12:36:23.850

数据库中的 3000 条记录不算什么。即使使用 15 也不会有任何性能问题`WHERE`。 `MySQL`并且`PHP`会做得很好。

我会更关心你的大量专栏。也许你应该看看[这篇文章](http://www.bkent.net/Doc/simple5.htm)以确保你尊重数据库`normal forms`，

祝你的项目好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T12:37:22.707

我认为查询 3-5K 行的单个表不会特别密集。MySQL 应该能够轻松应对这样的事情。如果这是“阻塞点”，您可以添加大量索引以加快您的选择，但这会减慢插入、编辑等速度。如果您查询很多不同的行，这也不是一个好主意。

# php - 在 PHP/Codeigniter 中声明变量并将其分配给对象

> ID：11329153
> 
> 赞同：0
> 
> 时间：2012-07-04T12:30:12.297
> 
> 标签：php, codeigniter

在 codeigniter 中，我检索数据库结果并将其存储在一个变量中，如下所示：

```
$data['user'] = $this->some_model->get_by_id($id); 
```

假设上面只检索 user_id 和 user_name，所以变量将是

```
$data['user']->user_id;

$data['user']->user_name; 
```

现在，比如说，我想分配另一个值（例如年龄），我可以执行以下操作吗？

```
$data['user']->age = '23'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:48:16.173

从技术上讲，是的，你可以。但这是不好的做法。在 PHP 中为未声明的对象属性赋值是“昂贵的”。另外，读者并不总是清楚价值的来源，因此这使得代码维护更加困难。

# glassfish-3 - 如何在 glassfish 3.1.2 中从虚拟服务器中删除 Web 模块

> ID：11329156
> 
> 赞同：4
> 
> 时间：2012-07-04T12:30:16.353
> 
> 标签：glassfish-3

我开发了一个网络服务。当我想在服务器上发布它时，我收到以下错误

```
cannot Deploy TemperatureConverterServiceClientEAR
Deployment Error for module: TemperatureConverterServiceClientEAR: Error occurred
during  deployment: Exception while loading the app : java.lang.Exception: WEB0113:
Virtual server [server] already has a web module 
[AndroidBackendAuthentication.war] loaded at [/AndroidBackendAuthentication]; 
therefore web module 
[TemperatureConverterServiceClientEAR#AndroidBackendAuthentication.war] cannot be 
loaded at this context path on this virtual server. . Please see server.log for 
more details 
```

我去了目录`C:\glassfish3\glassfish\domains\domain1\eclipseApps`并删除了所有文件。我也去了 ![在此处输入图像描述](../Images/ffecec3b6e47fb47f21f1c72e817190d.png)

然后我点击服务器。在`default Web module`选项中我有以下条目

![在此处输入图像描述](../Images/6c995404ce08ee7965347a1a72ca3e90.png)

我怎样才能从这里删除这些模块。每当我尝试部署 web 服务时，我都会收到此消息。我怎样才能摆脱这个消息？我还从 Application 选项中删除了已部署的模块，之后此`default Web module`选项变为空。但是，如果我尝试部署任何 web 服务，我会收到错误消息。请帮忙

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-31T03:48:25.517

你应该取消部署旧的 web moudle

使用 flow 命令执行此操作：

```
./bin/asadmin --port $port undeploy $app 
```

`$port`表示“glassfish 管理端口”。当你使用`start-domain` 你会看到它

`$app`表示您要取消部署的旧模块的名称，您可以使用`./bin/asadmin --port $port list-applications`命令查看所有 Web 模块已部署到该域

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-23T19:54:33.873

我有同样的问题，我发现存在：进入`server/glass fish server (node)/application`. 那里你有应用程序阻止你的工作。只需删除它，并准备好:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:13:52.170

我遇到了同样的问题。我能够通过重新启动 glassfish 来修复它。转到服务-> 服务器。右键单击 glassfish 并重新启动。希望有帮助。

# javascript - 道场宣示正确方式

> ID：11329163
> 
> 赞同：1
> 
> 时间：2012-07-04T12:31:04.793
> 
> 标签：javascript, static, dojo, declare

文件： `dojo/dir1/utils/XmlJsonUtils.js`

```
// Author: Rajat Khandelwal

define([
    "dojo/_base/declare" // declare
    ], function(declare){
      return declare("dir1.utils.XmlJsonUtils",[],{
        parseXml : function (xml) {
                     var self=this;
                     var dom = null;
                     if (window.DOMParser) {
                       try { 
                         dom = (new DOMParser()).parseFromString(xml, "text/xml"); 
                       } 
                       catch (e) { dom = null; }
                     }
                     else if (window.ActiveXObject) {
                       try {
                         dom = new ActiveXObject('Microsoft.XMLDOM');
                         dom.async = false;
                         if (!dom.loadXML(xml)) // parse error ..

        window.alert(dom.parseError.reason + dom.parseError.srcText);
                       } 
                       catch (e) { dom = null; }
                     }
                     else
                       alert("cannot parse xml string!");
                     return dom;
                   },
                 xml2json  : function (xmldata)
                 {
                   var self=this;
                   if(xmldata.firstChild==null)
                   {
                     return {name:xmldata.nodeName+": (value null)", checked: true}
                   }
                   else if(xmldata.firstChild.nodeType==3)
                   {
                     return {name:xmldata.nodeName+": "+xmldata.firstChild.nodeValue, checked:true}
                   }
                   else
                   {
                     var mychildren=[];
                     var i=0;
                     var nochildren=xmldata.childElementCount
                       for(i=0;i<nochildren;i++)
                       {
                         var j=self.xml2json(xmldata.childNodes[i])
                           mychildren[i]=j
                       }
                     var ret= {name:xmldata.nodeName, children:mychildren, checked:true}
                     return ret
                   }
                 },

                 convert2arr : function (result,ctr,res_arr)
                 {
                   var self=this;
                   if(result[ctr].checked[0]==false)
                     return;
                   if(result[ctr].children==undefined)
                   {
                     var name=result[ctr]['name'][0];
                     var kv = name.split(': ');
                     if(kv[1]=="(value null)")
                       kv[1]="";
                     res_arr.push.apply(res_arr,["<",kv[0],">",kv[1],"</",kv[0],">"]);
                     return ctr+1;
                   }
                   else
                   {
                     var i=ctr;
                     var new_ctr=ctr;
                     var no_children=result[ctr].children.length;
                     res_arr.push.apply(res_arr,["<",result[ctr].name[0],">"])
                       for(i=0;i<no_children;i++)
                       {
                         new_ctr=self.convert2arr(result,result[ctr].children[i]._0,res_arr)
                       }
                     res_arr.push.apply(res_arr,["</",result[ctr].name[0],">"]);
                     return new_ctr;
                   }
                 },
                 convert2xml : function (result)
                 {
                   var arr=[]
                     self.convert2arr(result, 0, arr)
                     return arr.join('')
                 }
      })
    }) 
```

但是当我在代码`require`中时`dir1.utils.XmlJsonUtils`，它会说`Uncaught Error: declare XmlJsonUtils: base class is not a callable constructor`。声明某些实用程序函数的正确方法是什么。

那些应该像静态函数。我不想做`x=new XmlJsonUtils(); x.parseXml(..)`。我想要做`XmlJsonUtils.parseXml(..)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:21:25.957

你的类不应该定义构造方法，dojo.declare 应该处理这个。但是，这样做并没有什么坏处，只需定义一个空白`constructor: function() { }`。我怀疑您面临某种错误。

定义应该是，'define'用于require-scope，当运行require（[“my.module”]）时，它应该有一个`define`方法，它通过返回基类`declare`。

文件`dojo/dir1/utils/XmlJsonUtils.js`：：

```
define([
   // requirements
   "dojo/_base/declare", 
   "dir1/utils/Toolkit" // sample in-package dependency
   "./Toolkit"     // Same as Above
], function (declare) {
   // no slash separator, use dot with declare, 
   // use a reference and return on last line
   var Klass = declare(
   /// declaredClass: string, moduleUrl with dot-separater + filename /.js//
       "dir1.utils.XmlJsonUtils",
   /// base class: Array(mixins)
       [],
   /// class scope
       {
           _methodMeantToBePrivate: function() { },
           randomInstanceMethod: function() { }
       }
   ); // end declare

   // set any aliases, which you want to expose (statics)

   Klass.StaticCallable = function() {
       // careful with your scope access inhere
   }

   // return the declared class to 'define'
   return Klass;
}); // end define 
```

这样（你必须有一个引用，要么用 require 或 getObject 拉入），你就可以在`StaticCallable`不初始化/构造模块实例的情况下使用该函数。AMD 兼容的语法是这样的：

```
require(["dir1/utils/XmlJsonUtils"], function(xmlUtils) {
   xmlUtils.StaticCallable();
}); 
```

或者如果以前需要

```
var xmlUtils = dojo.getObject("dir1.utils.XmlJsonUtils")
xmlUtils.StaticCallable(); 
```

一个具体的例子可以是一个像下面这样的通用类，其中实例和静态访问都是可能的。基类定义“工具”，派生类定义“工具”操作的变量 - 如果实例化，则可以订阅默认主题 - [ [MessageBusBase](https://github.com/mschr/oocms/blob/master/admin/include/_messagebus.js) | [消息总线](https://github.com/mschr/oocms/blob/master/admin/include/messagebus.js)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T13:24:37.493

问题：在您的代码中。

```
return declare("dir1.utils.XmlJsonUtils",[],{
    parseXml : function (xml) { 
```

而不是`dir1.utils.XmlJsonUtils`use `dir1/utils/XmlJsonUtils`，即在函数声明中使用斜杠而不是点。

# java - 刷新后休眠不发布更新

> ID：11329168
> 
> 赞同：1
> 
> 时间：2012-07-04T12:31:16.500
> 
> 标签：java, spring, hibernate, jpa, jta

我正在使用带有 spring 3.0.1 的 hibernate 3.2.7（3.2.5 上的相同问题），全部部署在 weblogic 10.3 和 Oracle 10g 数据库上。我正在使用 JTA 事务管理并且事务是分布式的（它实际上是在另一个应用程序中启动和结束，这段代码就在两者之间）。

hibernate 使用的配置在我的 persistence.xml 中声明，如下所示：

```
<property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
<property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.WeblogicTransactionManagerLookup"/>
<property name="hibernate.query.factory_class" value="org.hibernate.hql.classic.ClassicQueryTranslatorFactory"/>
<property name="hibernate.current_session_context_class" value="jta"/>
<property name="hibernate.connection.release_mode" value="auto"/> 
```

关于事务管理器的spring配置如下：

```
<!-- Instructs Spring to perfrom declarative transaction managemenet on annotated classes -->
<tx:annotation-driven transaction-manager="txManager" proxy-target-class="true"/>

<!-- Data about transact manager and session factory -->
<bean id="txManager" class="org.springframework.transaction.jta.WebLogicJtaTransactionManager">
  <property name="transactionManagerName" value="javax.transaction.TransactionManager"/> 
  <property name="defaultTimeout" value="${app.transaction.timeOut}"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <!-- persistence unit is missing jta data source so that application server is not 
      creating EntitiyManagerFactory, spring will create its own LocalContainerEntityManagerFactoryBean overriding data source-->
  <property name="dataSource" ref="myDataSource"/>
  <!-- specific properties like jpa provider and jpa provider properties are in persistance unit -->
  <property name="persistenceUnitName" value="my.persistence.unit"/>
</bean>

<!-- define data source in application server -->
<jee:jndi-lookup id="myDataSource" jndi-name="${db.jndiName}"/> 
```

我正在使用具有如下更新方法的通用 CrudDao：

```
public void update(Object entity) {
    //entityManager injected by @PersistenceContext
    entityManager.merge(entity);
    entityManager.flush();
}

public Object getById(Object id, Class entityClass) throws PersistenceException{
    return (Object)entityManager.find(entityClass, id);
} 
```

更新：添加了 getById 方法。

无法按预期工作的代码如下所示：

```
MyObject myObj = getMyObjectThroughSomeOneToManyRelation(idOne, idOther);
// till now was null
myObj.setSomeDateAttr(someDate);
genericDao.update(myObj); 

MyObject myObjFromDB = genericDao.getById(myObj.getId(), MyObject.class); 
```

结果是，如果我打印 myObj.getSomeDateAttr()，它会返回 someDate 的值，如果我打印 myObjFromDB.getSomeDateAttr()，它仍然是 null。

我尝试将更新方法更改为：

```
org.hibernate.Session s = (org.hibernate.Session) entityManager.getDelegate();
s.evict(entity);
s.update(entity);
s.flush(); 
```

它仍然不起作用。

打开 hibernate 的 show_sql 标志时，在执行刷新时或在实体管理器中查询具有相同 ID 的对象时，我看不到任何更新。选择都是可见的。更新：在事务结束时，实际上调用了更新并将所有内容写入数据库。所以我的问题是在交易过程中“只是”。

恐怕这个问题可能与 spring 和 hibernate 上的事务管理器的配置有关。

希望有人能帮助我，因为我已经失去了一天半的运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:21:30.920

您需要仔细查看休眠合并行为。根据文档

*   如果存在与当前会话关联的具有相同标识符的持久实例，则将给定对象的状态复制到持久实例上
*   如果当前没有与会话关联的持久化实例，尝试从数据库中加载它，或者创建一个新的持久化实例
*   返回持久实例
*   给定的实例没有与会话关联，它保持分离

根据您对日志中 sql 查询的声明，它看起来像 MyObject myObj = getMyObjectThroughSomeOneToManyRelation(idOne, idOther); 返回持久对象但是当你修改它（变得脏）并调用合并方法时，新状态被复制到会话中的当前持久对象。如果您看到第三点合并返回持久对象，它实际上是您需要在后续操作中使用的新的可管理持久对象。

当您调用 find 方法时，休眠返回会话中的持久对象而不是可管理的持久对象，这就是为什么您找不到通过 find 返回的对象中的更改。

要解决您的问题，请更改更新方法的重复类型

```
public Object update(Object entity) { 
    //entityManager injected by @PersistenceContext 
    return  entityManager.merge(entity); 
} 
```

在服务中，您需要使用如下

```
MyObject myObj = getMyObjectThroughSomeOneToManyRelation(idOne, idOther); 
// till now was null 
myObj.setSomeDateAttr(someDate); 
//You can use myObj as well instead myNewObj
MyObject myNewObj= genericDao.update(myObj);  
 //No need to call get
//MyObject myObjFromDB = genericDao.getById(myObj.getId(), MyObject.class); 
System.out.println("Updated value:"+myNewObj.getSomeDateAttr()); 
```

也看看这篇[文章](http://techblog.bozho.net/?p=266)。

# javascript - 如何在 Three.js 中使用相机作为纹理图像

> ID：11329180
> 
> 赞同：6
> 
> 时间：2012-07-04T12:32:01.617
> 
> 标签：javascript, three.js

在three.js 中，我试图创建一个纹理，其图像是从相机查看的当前场景。使用 CubeCamera 创建类似的效果是有据可查的；并使用 CubeCamera 创建了一个场景示例来说明我的目标：

[http://stemkoski.github.com/Three.js/Camera-Texture-Almost.html](http://stemkoski.github.com/Three.js/Camera-Texture-Almost.html)

但是，我想使用普通相机（而不是 CubeCamera）作为纹理。我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T16:13:55.857

理想情况下，这会起作用。

在里面：

```
renderTarget = new THREE.WebGLRenderTarget( 512, 512, { format: THREE.RGBFormat } );

var planelikeGeometry = new THREE.CubeGeometry( 400, 200, 200 );
var plane = new THREE.Mesh( planelikeGeometry, new THREE.MeshBasicMaterial( { map: renderTarget } ) );
plane.position.set(0,100,-500);
scene.add(plane); 
```

使成为：

```
renderer.render( scene, topCamera, renderTarget, true );
renderer.render( scene, topCamera ); 
```

它几乎是这样，但我们还有一些未完成的事情，因为 y 翻转纹理毁了这里的派对。

所以目前最好的解决方案是使用中间四边形来翻转纹理（也节省了渲染）：

[http://mrdoob.github.com/three.js/examples/webgl_rtt.html](http://mrdoob.github.com/three.js/examples/webgl_rtt.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T20:44:47.933

根据 mrdoob 的示例和建议，我创建了一个带有非常详细评论的工作示例，可在以下位置获取：

[http://stemkoski.github.com/Three.js/Camera-Texture.html](http://stemkoski.github.com/Three.js/Camera-Texture.html)

我的教程式 Three.js 系列示例系列的一部分，位于

[http://stemkoski.github.com/Three.js/](http://stemkoski.github.com/Three.js/)

# java - GAE java appp中OAuth2中的无效授权

> ID：11329184
> 
> 赞同：0
> 
> 时间：2012-07-04T12:32:23.023
> 
> 标签：java, google-app-engine, oauth, oauth-2.0

您好我正在尝试创建一个 GAE/J 应用程序，我必须在其中从给定代码中检索访问令牌

所以这是我的 /oauth2callback servlet 代码

```
public class OAuth2Callback extends HttpServlet{

    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
    String url = "https://accounts.google.com/o/oauth2/token";

        // FetchOptions opt = FetchOptions.Builder.doNotValidateCertificate();
           URL url1=new URL(url); 
           String param="grant_type=authorization_code&code="+req.getParameter("code")+"&client_id=anonymouns&client_secret=anonymous&redirect_uri=https://www.cloudspokestest.appspot.com/oauth2callback";

   HttpURLConnection connection = 
        (HttpURLConnection)url1.openConnection(); 
             connection.setDoOutput(true); 
             connection.setRequestMethod("POST"); 
             connection.setRequestProperty("Content-type", "application/x-www-form-urlencoded");
             connection.getOutputStream().write( param.getBytes() ); 
          InputStream str= connection.getInputStream();
          BufferedReader reader=new BufferedReader(new InputStreamReader(str));
        String l="";
          while((l=reader.readLine())!=null){
              resp.getWriter().println(l);

          }

    }

} 
```

但在浏览器屏幕上，我收到错误无效授权，响应代码为 400。任何人都可以帮助如何消除此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:47:10.910

您很可能会收到此错误，因为您的 url 中的参数值不是 url 编码的。的值`redirect_uri`和可能的值`code`必须是 url 编码的。

您可以使用 java.net.URLEncoder 对值进行编码。

也永远不要`getBytes()`在字符串上使用，因为它使用您平台的默认字符编码将字符转换为字节。在另一台机器上运行相同的代码，或更改您的机器配置可能会产生不同的输出。始终使用`getBytes(charsetname)`。

# asp.net-mvc - 将用户对象传递给控制器 操作会导致很大的延迟

> ID：11329186
> 
> 赞同：3
> 
> 时间：2012-07-04T12:32:29.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, performance, json.net, telerik-mvc

当我使用 Json.net 或 Telerik 网格并将复杂对象传递给我的控制器操作时，我有**600**毫秒的奇怪延迟。这是我的代码：

```
[Authorize, GridAction(EnableCustomBinding = true)]
public ActionResult AjaxItemsLoad(GridCommand command)
{
            var model = new GridModel();

            model.Data = null;
            model.Total = 0;

            return View("Index", model);
} 
```

对于测试，我用简单类型（少量字符串或 int32）更改复杂对象，延迟消失，响应时间为 70 毫秒。

然后我禁用默认`JsonValueProviderFactory`但延迟仍然相同。

问题：什么或谁会导致发布请求如此大的延迟？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:49:23.360

据我所知，您可能有两个问题。第一个是我看到您正在使用 CustomBinding，请查看您正在使用的自定义绑定代码，那里可能存在问题。其次，您是否对模型进行了任何类型的验证，即传递给控制器​​操作的对象？– Nikron 28 分钟前

# c++ - C++中模板类的继承

> ID：11329191
> 
> 赞同：0
> 
> 时间：2012-07-04T12:32:36.460
> 
> 标签：c++, templates, inheritance

> **可能重复：**
> [C++ 继承的模板类无权访问基类](https://stackoverflow.com/questions/4810272/c-inherited-template-classes-dont-have-access-to-the-base-class)

我遇到了模板和继承问题。简单地说，我有一个模板类，我想要另一个模板类继承。我不明白为什么基类的成员在派生类中不可见？尽管不使用模板，但一切都按预期工作。例如：

```
template <typename T>
class Foo
{
public:
    T x;
    T y;
    void doX(){ x = x+1; }
    void doY(){y++;}
protected:
    T a;
    T b;
    void doA(){a++;}
};

template <typename T>
class Bar : public Foo<T>
{
public:
    void doX(){x++; y++;} // ERROR
    void doY(){x++; y++;} // ERROR
    void doA(){a++;b++;}  // ERROR
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T12:36:05.003

这些变量是*从属*名称（有关详细信息，请阅读[可怕的两阶段名称查找](http://blog.llvm.org/2009/12/dreaded-two-phase-name-lookup.html)），因此您**需要**用作`this`：

```
void doX(){ this->x++; this->y++; } 
```

通常`this->`不需要，因为它是隐式的。但在这里它是*必需*的。实际上显式`this->`告诉编译器在实例化基类时在**第二**阶段查找名称，因为这种情况下使用两阶段名称查找机制。

或者您可以使用基类将它们限定为：

```
template <typename T>
class Bar : public Foo<T>
{
    typedef Foo<T> base; //add this friendly typedef!
public:
    void doX(){  base::x++; base::y++;} 
    //...
}; 
```

在这种情况下，在我看来，在实例化之前无法查找名称的事实`base`（这是 的*typedef*`Foo<T>`）变得*更加*明显（对*人类而言）。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T12:37:56.580

如果基类依赖于模板参数，则其成员在派生类定义中不能直接使用。在模板被实例化之前，编译器不知道基类将包含什么，因此它不会从那里查找任何名称。

您可以通过限定名称来强制它将名称视为成员：

```
void doX(){this->x++; Foo<T>::y++;}  // OK: both forms specify that it's a member 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T12:35:57.467

在派生类函数中写 this->x, this->y 而不是 x, y。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T12:37:14.557

尝试使用基类范围引用变量：

```
Foo<T>::x 
```

或使用`this`

```
this->x 
```

# jsf - 评估 Spring Web Flow 中的 Selected Datatable 行

> ID：11329192
> 
> 赞同：0
> 
> 时间：2012-07-04T12:32:54.457
> 
> 标签：jsf, spring-webflow

任何人都知道如何传递选定的行值。当按下“批准”按钮时，我需要更新数据表。

主页.xhtml

```
 <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui"
            template="/WEB-INF/layouts/standard.xhtml">
 <ui:define name="notes">
 <h:form>
 <p:commandButton value="Sick Leave" action="sickleave" id="sickleave"/>
    <p:commandButton value="Paid off Leave" action="paidleave" id="paidleave"/>
</h:form>   

 </ui:define>
<ui:define name="content">

   <h2>Approve Leave</h2>
   <h:form>
<h:dataTable value="#{employeeleave}" var="e"
            styleClass="order-table"
            headerClass="order-table-header"
            rowClasses="order-table-odd-row,order-table-even-row"
            columnClasses="order-table-odd-column,order-table-even-column"
        >

    <h:column>
            <f:facet name="header">
                No.
            </f:facet>
                #{e.employeeId}
        </h:column>

        <h:column>
            <f:facet name="header">
                Start Date
            </f:facet>
                #{e.startDate}
        </h:column>

        <h:column>
            <f:facet name="header">
                End Date
            </f:facet>
                #{e.endDate}
        </h:column>

        <h:column>
            <f:facet name="header">
                Reason
            </f:facet>
                #{e.reason}
        </h:column>

        <h:column>
            <f:facet name="header">
                Status
            </f:facet>
                <h:selectOneMenu id="approveleavetype" value="#{employeeLeave.status}">
                        <f:selectItems value="#{referenceData.approveLeave}"/>
                    </h:selectOneMenu>
        </h:column>
        <p:column>
                    <f:facet name="header">Action</f:facet>
                    <p:commandButton value="Approve Leave" action="approveleave" id="approveleave" style="margin-left:250px;">
                    <f:setPropertyActionListener value="#{e}" target="#{employeeleave.selected}" /></p:commandButton>
                </p:column>
    </h:dataTable>  

    </h:form>
    <h2>Please Apply for Leave Here</h2>
    <h:form>

        <h:panelGrid columns="3" id="leaveform" >

                <h:outputLabel for="beds">Select the Type of the Leave</h:outputLabel>

                    <h:selectOneMenu id="leavetype" value="#{employeeLeave.type}">
                        <f:selectItems value="#{referenceData.leaveType}"/>
                    </h:selectOneMenu>

            <div>

                <h:outputLabel for="startDate">Start Date</h:outputLabel>

                    <p:calendar id="startDate" label="Start Date" 
                        value="#{employeeLeave.startDate}" pattern="MM-dd-yyyy" timeZone="EST" required="true" />

            </div>
            <div>
                <h:outputLabel for="endDate">End Date</h:outputLabel>

                    <p:calendar id="endDate" label="End Date" 
                        value="#{employeeLeave.endDate}" pattern="MM-dd-yyyy" timeZone="EST" required="true" />

            </div>
            <div>
                <h:outputLabel for="checkoutDate">Reason</h:outputLabel>

            <h:inputTextarea id="reason" value="#{employeeLeave.reason}" 
                 required="true" 
                label="reason" >
            </h:inputTextarea>
            </div>

        </h:panelGrid>

        <center><p:commandButton value="Apply Leave" action="applyleave" id="applyleave" style="margin-left:250px;"/></center>

    </h:form>
    <br></br>

   <center> <h1 style="font-size: 16px;font-weight:bold;margin-top:100px;">Leave Application</h1></center>

     </ui:define>
    </ui:composition> 
```

主流.xml

```
 <action-state id="ApproveLeave">
<!-- <set name="viewScope.employeeleave" value="employeeleave.selected" /> -->
    <evaluate expression="leaveBo.approveLeave(employeeLeave.selectedRow)"></evaluate>
    <transition to="managerpage"></transition>
</action-state> 
```

这里试图获取选定的行并尝试评估它。

但我收到以下错误。

```
 javax.el.ELException: /WEB-INF/flows/main/managerpage.xhtml @70,86 target="#{employeeleave.selected}": Cannot convert selected of type class java.lang.String to class java.lang.Integer
at  com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:103)
at  com.sun.faces.facelets.tag.jsf.core.SetPropertyActionListenerHandler$SetPropertyListener.processAction(SetPropertyActionListenerHandler.java:210)
at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
at javax.faces.component.UICommand.broadcast(UICommand.java:300)
at javax.faces.component.UIData.broadcast(UIData.java:1093)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at org.springframework.faces.webflow.FlowLifecycle.invokePhase(FlowLifecycle.java:127)
at org.springframework.faces.webflow.FlowLifecycle.execute(FlowLifecycle.java:70)
at org.springframework.faces.webflow.JsfView.processUserEvent(JsfView.java:120)
at org.springframework.webflow.engine.ViewState.handleEvent(ViewState.java:226)
at org.springframework.webflow.engine.ViewState.resume(ViewState.java:196)
at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258)
at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
at org.springframework.faces.webflow.JsfFlowHandlerAdapter.handle(JsfFlowHandlerAdapter.java:48)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:49:26.910

正如错误日志所说：

```
The method arguments for the setter setSelected need to be of type String in your case, like this:

public class Employeeleave {
  public void setSelected(String newValue){
    selected = newValue;
  }
} 
```

# jquery - 是否可以一次从单个 ajax 调用中填充 2 个 jqGrid？

> ID：11329196
> 
> 赞同：2
> 
> 时间：2012-07-04T12:33:08.937
> 
> 标签：jquery, ajax, asp.net-mvc, jqgrid

我有一个 ASP.NET-MVC 网站，上面有一个带有 2 个 jqGrid 的网页。它们每个都有自己的“URL”属性，因此它们都调用单独的 ajax 调用。

我想看看是否可以将其合并到一个 json 调用中，该调用一次返回两个网格的 json（而不是 2 个单独的调用）

所以不是这个在我的控制器中为每个方法

```
 return Json(new
        {
            Page = 1,
            Records =  GetData().Count,
            Rows = GetData(),
            Total = 1
        }); 
```

我想看看你是否可以在一个电话中同时返回：

```
 var grid1Data = (new
        {
            Page = 1,
            Records =  GetData().Count,
            Rows = GetData(),
            Total = 1
        });

   var grid2Data = (new
        {
            Page = 1,
            Records =  GetOtherData().Count,
            Rows = GetOtherData(),
            Total = 1
        });

      return Json(new
        {
                Grid1 = grid1Data, Grid2 = grid2Data
        }); 
```

但我无法弄清楚这将如何在 javascript 端工作，因为现在我的代码看起来像这样（单独的 ajax 调用）：

```
$("#myGrid1").jqGrid({
    mtype: "POST",
    url: "/GetGrid1Data",
    datatype: "json",

$("#myGrid2").jqGrid({
    mtype: "POST",
    url: "/GetGrid2Data",
    datatype: "json", 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:40:43.283

At the first look the filling of two grids per one Ajax call looks attractive. The problem is that it can have some advantages only if you use `loadonce: true` options for at least in one from the grids. Only in the case you can make one Ajax call and fill another grid (which has `loadonce: true` options). The reason is simple. If you have both grids without `loadonce: true` options then the user can sort the data by clicking on the column header, click on the "Next" page of set the filter *in one grid*. In the case the data from *the grid only* needed be reloaded from the server. I see no sense to load the data for both grids in the case.

If you use `loadonce: true` options for at least in one from the grids then you can just change two options `datatype: 'json', loadonce: true` in the grid to one option `datatype: 'local'`. You can fill the grid during filling of the first grid. You can set `data` parameter for the second grid and call `roloadGrid`.

For example in the fisrt grid you can use

```
jsonReader: {
    root: "Grid1.Rows",
    page: "Grid1.Page",
    total: "Grid1.Total",
    records: "Grid1.Records"
} 
```

So the grid will be loaded from the `Grid1` part of the server response. Additionally you can see `Grid2` property in the `data` parameter of `loadComplete` or `beforeProcessing` callbacks, set the `data` option of the second grid using `setGridParam` and then to trigger `"reloadGrid"` event on the grid. In the case the second grid should be created with `datatype: "local"` and the options `mtype`, `url` and `loadonce` you can remove from list of the options of the second grid.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T12:56:25.907

我希望你希望这能提高性能。好吧，据我所知，jqgrid 使用他们自己的 ajax 调用来填充表数据。这是解决网格问题的一种更简洁的方法，但如果性能是禁止此解决方案的原因，那么您可以尝试这个 startegy：

```
$("#test").jqGrid({

        datatype: 'clientSide',//most important
        colNames:['xx','yy'],
        colModel :[ 
                   {name:'sdsd', index:'termId',}, 
                   {name:'version', index:'version'}, 

                   ],
                   pager: '#testpager',
                   rowNum:10,
                   rowList:[10,20,30],

                   shrinkToFit:true,
                   autowidth:true
});//grid initialised.

 $("#test2").jqGrid({

            datatype: 'clientSide',//most important
            colNames:['xx','yy'],
            colModel :[ 
                       {name:'sdsd', index:'termId',}, 
                       {name:'version', index:'version'}, 

                       ],
                       pager: '#testpager',
                       rowNum:10,
                       rowList:[10,20,30],

                       shrinkToFit:true,
                       autowidth:true
    });//grid 2 initialised. 
```

//JSP------------

```
 <div id="tablecontainer" >
         <table id="test"><tr><td/></tr></table>
       <div id="testpager"></div>
</div>

  <div id="tablecontainer2" >
             <table id="test2"><tr><td/></tr></table>
           <div id="testpager2"></div>
    </div> 
```

//--------

按钮后点击fire ajax ..

内部控制器准备 json 响应为

```
 { "test":{//list of json row data},
       "test2" :{//list of json row data}} 
```

//现在当ajax成功时你会得到数据

使用将其添加到表中

```
 resposeSuccess(data){
            //loop through each row data and add it into respective table using
    $.each(data,function(tableId,tableJson){
       for(j=0;j<tableJson.length;tableJson++)
         $("#"+tableId).addRowData(""+j, tableJson[j]);
});

    } 
```

简而言之，您必须将数据单独添加到相应的表中，而不是 jqgrid。

# javascript - 让 IE 停止在 iframe 内将 ajax 视为跨域

> ID：11329201
> 
> 赞同：5
> 
> 时间：2012-07-04T12:33:48.933
> 
> 标签：javascript, jquery, ajax, internet-explorer, cross-domain

我有以下设置：

`www.domain1.com/page1/`-- 向 ajax 发出 POST 请求`www.domain1.com/page2/`

`www.domain1.com/page2/`-- 返回 json 响应

* * *

`www.domain2.com/page1/`-- 嵌入`www.domain1.com/page1/`iframe

* * *

当我加载`www.domain1.com/page1/`ajax 请求时，一切正常。`www.domain2.com/page1/`当我在 Chrome 或 Firefox 中加载时，`www.domain1.com/page1/`显示在 iframe 中，并且 ajax 请求正常。

当我尝试`www.domain2.com/page1/`在 IE7 / IE8 中加载时，ajax 请求给出了一个 FORBIDDEN 错误——它似乎将请求视为跨域并阻止它，即使请求是从`www.domain1.com/page1/`to 发出的`www.domain1.com/page2/`。

当请求是 GET 但不是 POST 时，它在 IE 中工作正常。我怎样才能让 IE 停止将其视为跨域，仅仅因为整个流程都包含在 iframe 中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:45:26.003

jQuery v1.7.2 将修复 IE 中的 CORS，即使它不是真正的 CORS，但 IE 认为它是。
JavaScript 函数开头的这个简单布尔值应该可以解决此问题

```
$.support.cors = true; 
```

这适用于 GET 和 POST。

# magento - Magento 在工具栏中按子类别添加过滤器

> ID：11329203
> 
> 赞同：0
> 
> 时间：2012-07-04T12:33:50.103
> 
> 标签：magento, custom-controls, product

我正在尝试使用子类别过滤产品列表，可以说我有一个名为的顶级类别`perfume`和名为`for him`&的子类别`for her`。在顶级类别列表页面中，我试图包含名为它的选项`filter results`，它应该显示一个下拉列表`for men and for women`

如果用户点击`for men`它应该只显示产品`for men category`

为此，我尝试过，

```
<?php $categories = Mage::getModel('catalog/category')->getCollection()
         ->addAttributeToSelect('name')
         ->addAttributeToSelect('url_key')
         ->addAttributeToSelect('my_attribute')
         ->addAttributeToSelect('position')
         ->addAttributeToSort('position', 'ASC')
         ->setLoadProductCount(true)
         ->addAttributeToFilter('is_active',array('eq'=>true))
         ->load(); ?><?php foreach($categories as $key=>$category): ?><?php if($category->getName() != ''):?>    <?php $prodCollection = age::getResourceModel('catalog/product_collection')->addCategoryFilter($category); // Magento product collection ?>
<a href="<?php echo $category->getUrl() ?>"><?php echo $category->getName() ?></a> (<?php echo $prodCollection->count() ?>)<br/> 
```

但它显示了所有类别的产品数量。有谁知道如何过滤这个以仅显示当前主要类别的子类别？

谢谢，。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:10:46.130

```
<?php

    $rootCategoryId = Mage::app()->getStore()->getRootCategoryId();
    $categories = Mage::getModel('catalog/category')->getCategories($rootCategoryId);

?>
<?php foreach($categories as $category): ?>
    <a href="<?php echo $category->getUrl() ?>"><?php echo $category->getName() ?></a><br/>
<?php endforeach ?> 
```

# ruby - 在 Sinatra 中调用 haml 模板时如何指定格式

> ID：11329208
> 
> 赞同：1
> 
> 时间：2012-07-04T12:34:23.380
> 
> 标签：ruby, sinatra

在 Sinatra 中，以下代码

```
haml :index 
```

将呈现文件`index.html.haml`或`index.haml`

如何指定文件格式？我一直在阅读 Sinatra README 并尝试不同的组合，但我不知道该怎么做。

我还需要能够通过提供格式来指定 haml 模板，以便我可以执行类似 `index.js.haml`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:15:01.053

正如@Kashyap 指出的那样

```
haml :'index.js' 
```

这样就行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:53:24.293

在回答[另一个问题](https://stackoverflow.com/questions/11343991/sinatra-error-when-handling-php-routes#comment14938283_11343991)时发现了这个。[Sinatra-Respond_to](https://github.com/cehoffman/sinatra-respond_to)。可能这就是你要找的。

# ruby-on-rails - Rails - 使用下拉列表将对象的 id 传递给会话

> ID：11329210
> 
> 赞同：0
> 
> 时间：2012-07-04T12:34:26.750
> 
> 标签：ruby-on-rails, session, drop-down-menu, action

目前，我在项目/索引视图中有一个项目列表。用户当前要做的是单击项目上的“显示”，然后单击“选择项目”。这会调用我在控制器中创建的自定义操作，它将项目的 id 传递到会话中，因此以下页面中仅显示相关任务等。

我想要发生的是在索引视图上有一个下拉菜单，其中包含所有项目的列表。然后，当单击提交按钮时，它会将那个项目的 id 传递到会话中，完全相同。我已经尝试了所有我能想到的方法，但我什么也做不了——主要是因为它看起来好像项目的 id 没有从下拉列表中传递。

我的问题是 - 如何让提交按钮调用自定义操作，该操作将从下拉菜单的项目中获取 id 并将其传递到会话中？

不知道是否需要将代码添加到控制器的 index 动作中，或者提交按钮是否可以调用自定义动作。我对rails很陌生，所以能拼出东西的人越多越好！！

这是项目/索引：

```
<%= form_for(@project) do |f| %>
  <% if @project.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

      <ul>
      <% @project.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
  <%= f.hidden_field :company_id, :value => session[:company_id] %>
  </div>
  <div class="field">
  <%= collection_select :project, :id, Project.all, :id, :name %>
  </div>
  <div class="actions">
    <%= f.submit 'Select Project', :class => "btn btn-primary" %>
  </div>
<% end %> 
```

到目前为止的控制器代码：

```
def index
  @projects = Project.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @projects }
  end
end

def select_project
  project = Project.find(params[:id])
  session[:project_id] = project.id
  redirect_to root_url, notice: "Current project set to: #{project.name}, ID: #{project.id}"
end 
```

我放不下

```
@project = Project.find(params[:id]) 
```

进入 index 动作，否则它说它找不到没有 id 的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:20:37.777

当您提交表单时，这将通过控制器中的更新或创建操作来完成。

请问您为什么要从会话中加载下拉列表？因为您可以使用 rails helpers 使用 :where 等查找（过滤的）记录。

一旦你得到一个返回的数组，你可以在你的下拉列表中列出它们作为选项属性。并将它们提交给您的更新或创建操作。一旦你在那里，你可以使用从提交的哈希中获取值

```
params[:key][:nested_key] 
```

要不就

```
params[:key] 
```

当您在这里执行此操作时，您甚至可以将它们绑定到会话或变量以供以后使用。

试着让流程尽可能的健壮和简单。

玩得开心

# ios - 检查产品是否存在 iOS

> ID：11329211
> 
> 赞同：-2
> 
> 时间：2012-07-04T12:34:30.330
> 
> 标签：ios

我正在开发一个带有购物车的应用程序。添加产品时，我必须检查该产品是否存在。我正在使用这种方法：

```
for (go over all products){

  if(product exists){

  --only change the quantity of the product[n]

  }
  else{

  --create a new product object with all its properties

  }

} 
```

但是使用这种方法，如果我要添加的产品与索引 0 不同（for 检查的第一个），请始终添加一个新对象（产品），例如，如果我的产品存在并且具有索引2、这个永远不会知道它的存在。

对不起我的英语；）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:01:54.183

如果我理解正确，你的问题是，你遍历所有产品，如果产品与新产品不同，你只需添加一个新产品。

但是您需要先遍历所有条目，然后在完成此操作并且没有找到任何内容之后，您将创建一个新产品。

所以在伪代码中：

```
bool productExists = false;
for every product {
    if(same product) {
        productExists = true
        change the quantity
        break;
    }    
}
if(!productExists) {
    add new product
} 
```

# python - 列表值比较的Python浮点列表

> ID：11329212
> 
> 赞同：0
> 
> 时间：2012-07-04T12:34:32.850
> 
> 标签：python, list, floating-point

我已经开始研究 python 并试图以小块的形式掌握新事物，我为自己设定的最新目标是将一个选项卡单独的浮点文件读入内存并比较列表中的值并打印值，如果差异为大为用户指定。到目前为止，我已经为它编写了以下代码：

```
#! /usr/bin/env python
value = raw_input('Please enter a mass difference:')
fh = open ( "values" );
x = []
for line in fh.readlines():
 y = [float for float in line.split()]
 x.append(y)
fh.close()
for i in range(0,len(x)-1):
 for j in range(i,len(x)):
  if x[j][0] - x[i][0] == value:
   print x[i][0],x[j][0] 
```

编译器抱怨我不允许从字符串中减去字符串（逻辑上），但我的问题是......为什么它们是字符串？当我使用浮点数时，嵌套列表不应该是浮点数列表吗？

字面错误：

```
TypeError: unsupported operand type(s) for -: 'str' and 'str' 
```

如果有人能告诉我我的推理哪里出错了，我将不胜感激；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:35:59.153

试试这个代替你的列表理解：

```
y = [float(i) for i in line.split()] 
```

*说明*：

您从文件中读取的数据是字符串，要将它们转换为您需要转换它们的其他类型。因此，在您的情况下，您希望通过`float()`您尝试过的 .. 将您的值转换为浮动，但不完全正确/成功。这应该会给你你正在寻找的结果。

如果您有其他值要转换，则此语法将起作用：

```
 float_val = float(string_val) 
```

假设它`string_val`包含浮点的有效字符，它将转换，否则你会得到一个异常。

```
>>> float('3.5')
3.5

>>> float('apple')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for float(): apple 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:36:50.663

列表理解并没有做你认为它正在做的事情。它只是将每个字符串分配给变量`float`，然后返回它。相反，您实际上想使用另一个名称并对其调用 float ：

```
y = [float(x) for x in line.split()] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T12:37:00.930

**错误 1**：`y = [float(x) for x in line.split()]`或者干脆`map(float,lines.split())`

**错误 2**：`if x[j][0] - x[i][0] == float(value): #you didn't converted value to a float`

# c++ - 调用派生类方法

> ID：11329214
> 
> 赞同：0
> 
> 时间：2012-07-04T12:34:37.200
> 
> 标签：c++, c++11, polymorphism

我有一个基类：

```
class motorcycle
{
public:

   virtual int speed()
   { return 0; }
} 
```

还有一些继承基类的类（示例中只有 2 个，但我可以有很多类）：

```
class honda: public motorcycle 
{
public:

   int speed()
   { return 2; }
}

class yamaha: public motorcycle 
{
public:

   int speed()
   { return 1; }
} 
```

我有一个指向派生类之一的基类的指针：

```
honda* h = new honda();
...
int speed = get_speed(h); 
```

在哪里`get_speed`：

```
int get_speed(motorcycle* m)
{
    // How to return speed according to m class?
} 
```

现在，返回速度的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:35:50.760

```
int get_speed(motorcycle* m)
{
    return m->speed();
} 
```

# c - 合并排序列表

> ID：11329215
> 
> 赞同：0
> 
> 时间：2012-07-04T12:34:38.823
> 
> 标签：c, sorting

我有四个排序列表，我想将它们合并到一个排序列表中。
最有效的方法是什么？如果实现可以并行完成，那将是一个加号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:39:03.417

这是[合并排序](https://en.wikipedia.org/wiki/Merge_sort)的合并部分。

只需在每个列表的开头取四个元素中的最小值并将其转储到输出中。重复直到所有列表都为空。假设这`min4`是一个固定成本，那么这将是 O(N)。

如果您有更多信息（例如列表的范围），您可能可以稍微改进一下，但我认为这些不会影响渐近复杂度。

# objective-c - 如何从远程服务器在 iOS 中加载不同的图像

> ID：11329219
> 
> 赞同：1
> 
> 时间：2012-07-04T12:34:50.400
> 
> 标签：objective-c, ios

我想建立一个画廊，但我的问题是如何加载@2x 图像？

iOS会尝试搜索它们还是我可以指定路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:55:57.933

您可以存储两种版本的图像，一种用于视网膜，一种用于非视网膜。当设备即将从网络服务器下载图像时，（假设您正在使用网络服务脚本）您可以有一个发布数据，如：

```
NSString *postData;
if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
([UIScreen mainScreen].scale == 2.0)) {
   postData = @"retina_device";
} else {
   postData = @"non_retina_device";
} 
```

您将知道设备要求的图像版本，假设您将在 php 中编写 webservice sript

```
 <?php
    $postData = $_REQUEST['postData'];
    if($postData == @"retina_device"){
       //return all images for retina device
    } 
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:47:25.933

当您从服务器加载图像时。

首先，当您将 imagesSize 发送到服务器时，您将请求 /Connection 发送到服务器

示例：- www.example.com/iPhone/abc.php?imagesSize = 1

在哪里 ！@2x

0 表示简单（表示非视网膜）

如果您使用此方法，则图像不是淀粉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:37:54.517

使用这个 if/else 块

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
    ([UIScreen mainScreen].scale == 2.0)) {
  // Retina display
} else {
  // non-Retina display
} 
```

您可以检测您使用的是视网膜显示器还是标准显示器型号，然后加载正确的图像。

# c#-4.0 - 比较大的txt文件

> ID：11329224
> 
> 赞同：0
> 
> 时间：2012-07-04T12:34:57.893
> 
> 标签：c#-4.0

我正在尝试比较两个巨大的文本文件（每个文件从 100MB 到 500MB），以便提取文件之间不同的行并将这些不同的行写入另一个文本文件。

我在网上找到了[C# 的 O(ND) 差异算法，](http://www.codeproject.com/Articles/13326/An-O-ND-Difference-Algorithm-for-C)但实施时结果是 OutOfMemory 异常。

你能知道这条死胡同的出口吗？

非常感谢。

安东尼奥

# css - png 的 CSS 背景与半透明渐变透明显示白色背景

> ID：11329228
> 
> 赞同：4
> 
> 时间：2012-07-04T12:35:13.070
> 
> 标签：css, png, background-image, linear-gradients, png-24

如果您使用 android 浏览器查看这个小提琴（[http://jsfiddle.net/5ajYD/](http://jsfiddle.net/5ajYD/)），您会看到构成花朵的 PNG 具有白色背景。

在所有其他浏览器上，它显示完全正常，除了 android 浏览器。我已经用谷歌搜索了这个问题，但我唯一能找到的是 png 条带问题，并且与 android 应用程序编程有关。

这让我想起了 MSIE 6 对透明图像的问题，我觉得很奇怪这种情况发生了。

有谁知道在 android 浏览器上解决此问题的方法？由于不同浏览器的渐变差异，我不能使用非透明背景。

到目前为止我已经尝试过：

*   我已经尝试过使用位于 0px 0px 位置的“多个”背景，但这不起作用
*   我尝试用鲜花向 div 添加渐变，但这也失败了，并且在其他浏览器中中断了。

我发现这种问题出现在现代浏览器上非常令人费解......即使是诺基亚 n95 也能做到......

我正在测试/发现的 android 版本是 android 2.3.4(Sony Ericsson Xperia Arc S LT18i)

这就是我在手机上的 android 浏览器中看到的小提琴

[http://t.co/mofPkqjf](http://t.co/mofPkqjf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:13:58.573

使用 HTML5 Canvas 创建一个[alphaJPEG](http://blog.jackadam.net/2010/alpha-jpegs/)，一个分层在具有 alpha 通道的等效 PNG 下的 JPEG。

```
<head>
  <style>img[data-alpha-src]{visibility: hidden;}</style>
</head>
<body>
  <img src="image.jpg" data-alpha-src="alpha.png" />
  <!--...-->
  <script src="ajpeg.js"></script>
</body> 
```

ajpeg.js

```
(function() {

  var create_alpha_jpeg = function(img) {

    var alpha_path = img.getAttribute('data-alpha-src')
    if(!alpha_path) return

    // Hide the original un-alpha'd
    img.style.visiblity = 'hidden'

    // Preload the un-alpha'd image
    var image = document.createElement('img')
    image.src = img.src
    image.onload = function () {

      // Then preload alpha mask
      var alpha = document.createElement('img')
      alpha.src = alpha_path
      alpha.onload = function () {

        var canvas = document.createElement('canvas')
        canvas.width = image.width
        canvas.height = image.height
        img.parentNode.replaceChild(canvas, img)

        // For IE7/8
        if(typeof FlashCanvas != 'undefined') FlashCanvas.initElement(canvas)

        // Canvas compositing code
        var context = canvas.getContext('2d')
        context.clearRect(0, 0, image.width, image.height)
        context.drawImage(image, 0, 0, image.width, image.height)
        context.globalCompositeOperation = 'xor'
        context.drawImage(alpha, 0, 0, image.width, image.height)

      }
    }
  }

  // Apply this technique to every image on the page once DOM is ready
  // (I just placed it at the bottom of the page for brevity)
  var imgs = document.getElementsByTagName('img')
  for(var i = 0; i &lt; imgs.length; i++)
    create_alpha_jpeg(imgs[i])

})();

In the head element I linked to FlashCanvas:

<!--[if lte IE 8]><script src="flashcanvas.js"></script><![endif]-->

... and I threw in this to avoid a flicker of the un-alpha’d JPEG: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:49:17.513

我有一个很大的面部表情时刻。

我已经为此奋斗了两个月，我根本无法弄清楚其中的逻辑。问题出在 econtainer 元素中，它有一个参数：width:100%。

发生的情况是它只将宽度渲染到视口的实际页面宽度。

因此，如果您在移动设备上有一个 480 像素宽的浏览器屏幕，它会将宽度设置为 480 像素，渲染 480 像素的渐变，并且在您横向滚动时不会重新渲染。

通过添加 min-width:1200px 解决了这个问题；现在它可以正确渲染了！

谢谢大家关注这个...

# java - 使用 Java 将 Ldap 用户与组关联

> ID：11329229
> 
> 赞同：6
> 
> 时间：2012-07-04T12:35:14.020
> 
> 标签：java, active-directory, ldap, jndi

我在查找如何将#Ldap 用户与给定组关联时遇到问题。

这就是我尝试过的：

```
 Attributes attrs = new BasicAttributes();

    BasicAttribute basicAttrs = new BasicAttribute("objectclass");
    basicAttrs.add("top");
    basicAttrs.add("person");

    BasicAttribute memberOf = new BasicAttribute("memberOf");
    memberOf.add("Managers"); // Tried with distinguished name too
    memberOf.add("Administrators"); // Tried with distinguished name too

    attrs.put(basicAttrs);
    attrs.put("cn", user.getLogin());
    attrs.put("name", user.getLogin());
    attrs.put("login", user.getLogin());
    attrs.put("mail", user.getMail());
    attrs.put("displayName", user.getDisplayName());
    attrs.put("memberOf", memberOf);

    try {
        ctx.bind("CN=" + user.getLogin() + "," + baseDn, null, attrs);
    } catch (NamingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我还尝试使用专有名称，例如：“CN=Managers,OU=<system_name>,OU=Users,OU=<server>,DC=com”，但没有用。我认为它应该在某个地方引用 Ldap 组。

但我得到了这个错误：

```
javax.naming.directory.InvalidAttributeValueException: Malformed 'memberOf' attribute value; remaining name 'CN=lcarvalho,OU=<system_name>,OU=Users,OU=<server>,DC=com'
at com.sun.jndi.ldap.LdapClient.encodeAttribute(LdapClient.java:951)
at com.sun.jndi.ldap.LdapClient.add(LdapClient.java:999)
at com.sun.jndi.ldap.LdapCtx.c_bind(LdapCtx.java:396)
at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_bind(ComponentDirContext.java:277)
at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.bind(PartialCompositeDirContext.java:197)
at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.bind(PartialCompositeDirContext.java:186)
at javax.naming.directory.InitialDirContext.bind(InitialDirContext.java:158)
... 
```

这是除了我的应用程序行之外的所有堆栈跟踪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T18:50:57.237

如果您使用的是 OpenLDAP，则该`memberOf`属性由`memberOf`覆盖层自动维护，您的应用程序根本不应该编写它。您应该做的是将用户的 DN 添加到他加入的组的`uniqueMember`or`roleOccupant`等​​属性中。然后它的DN就会神奇的出现在他的`memberOf`属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:02:58.947

很可能您的 DN 是错误的，因为您似乎指定了一个额外的组织单位而不是域组件：

```
"CN=Managers,OU=<system_name>,OU=Users,OU=<server>,DC=com" 
```

应该：

```
"cn=Managers,ou=<system_name>,ou=Users,dc=<server>,dc=com" 
```

在 LDAP 中，目录结构以 2 个域组件开始，它们是反向的公司域名（按照惯例）。

为了使您的代码正常工作，您必须考虑以下几点：

*   在您的 LDAP 服务器中加载了一个模式“Person”

*   在您的“Person”架构中定义了一个属性“MemberOf”

*   “MemberOf”需要完整的 DN 作为条目

我还鼓励您查看[UnboundID LDAP SDK](https://www.unboundid.com/products/ldap-sdk/docs/javadoc/index.html)。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:52:40.190

属性的值`memberOf`是错误的。该`memberOf`属性可能是一个专有名称。当对属性的语法、排序或匹配规则有疑问时，LDAP 客户端应查阅模式（其基本 DN 可能在[根 DSE中可用）。](http://ff1959.wordpress.com/2011/04/11/the-root-dse-is-that-entry-with-zero-rdns-and-contains-information-about-the-directory-server/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-31T09:01:53.167

我有同样的问题。使用 ldap 的任何客户端（例如：Apache Directory Studio）检查此属性的值类型。如果您尝试将类型为 String 的属性替换为 int 值，则会引发此错误。

# java - 服务器发送的事件在 Google Chrome 中不起作用

> ID：11329233
> 
> 赞同：3
> 
> 时间：2012-07-04T12:35:42.663
> 
> 标签：java, html, jsp, dom-events, server-sent-events

这是我的服务器 JSP 代码“Server_Date.jsp”

```
<%
response.setHeader("cache-control", "no-cache"); 
response.setContentType("text/event-stream");
out.print("data: " + (new java.util.Date()).toString() + "x\n\n");
out.flush();   
%> 
```

这是我的客户端 jsp 页面“Client_Serverdate.jsp”

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body  onload="begin()">
<h1>Getting server updates</h1>
<div id="result"></div>
<script >
if(typeof(EventSource)!=="undefined")
{     
var source=new EventSource("Server_Date.jsp");      
source.addEventListener("message", function(event) {
    document.getElementById("result").innerHTML = event.data;
}, false);
}
else
{
document.getElementById("result").innerHTML="Sorry, your browser does not support server-sent events...";
}
</script>   
</body>
</html> 
```

请帮助我，此代码在 Mozilla Firefox、Opera 中运行良好，但在 Google Chrome 中无法运行（我也检查了 18.x 和 20.x）。

它会转到我已经用 print 语句检查过的服务器页面，但它没有出现`document.getElementById("result").innerHTML = event.data;`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:15:21.827

我曾经有同样的问题。作为服务器部分，我使用了 PHP，但我想它的工作原理是一样的。为我解决的问题是添加`ob_flush()`. 现在，我不知道你的语言应该是什么，但也许它可以帮助你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:58:42.133

对于一个人来说，你正在调用一个`begin()`未定义的函数，尽管这不应该是这里的问题。

Chrome 开发控制台是否显示任何错误？它应该至少显示一个。因为开始功能。网络选项卡是否显示到 Server_Date.jsp 的流量？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T07:23:03.527

问题已解决

解决方案 ：

页面编码问题：客户端使用 UTF-8 编码

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

未提及服务器端 UTF-8，因此在 setContentType 添加 charset=UTF-8 后，它的工作

```
response.setContentType("text/event-stream;charset=UTF-8"); 
```

感谢人们努力回答我的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-18T13:32:53.347

我遇到了同样的问题，我通过在 servlet 末尾添加一个换行符来解决它。像这样：

```
response.setContentType("text/event-stream;charset=UTF-8");
response.addHeader("Cache-Control", "no-cache");
PrintWriter out = response.getWriter();
out.println("data: " + new Date());
out.println();
out.flush();
out.close(); 
```

# regex - c#和正则表达式

> ID：11329239
> 
> 赞同：-2
> 
> 时间：2012-07-04T12:35:58.183
> 
> 标签：regex

我想从这个字符串中获取`100`和`example`

```
?connect:100/username:example/ 
```

我在谷歌搜索，但在我的解决方案中找不到一些有用的正则表达式模式

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:42:10.380

```
try {
    Regex RegexObj = new Regex(":(?<Number>\\d+)/.+?:(?<Text>\\w+)/");
    Match MatchResults = RegexObj.Match(SubjectString);
    while (MatchResults.Success) {
        for (int i = 1; i < MatchResults.Groups.Count; i++) {
            Group GroupObj = MatchResults.Groups[i];
            if (GroupObj.Success) {

            } 
        }
        MatchResults = MatchResults.NextMatch();
    } 
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:44:26.150

这是正则表达式：

```
\?connect:([0-9]+)/username:([^/]*)/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:58:46.893

您不需要为此使用正则表达式，使用 Linq：

```
var url = "?connect:100/username:example/";
var data = url.Substring(1, url.Length-2).Split('/')
                                         .Select(x => x.Split(':'))
                                         .ToDictionary(x => x[0], x => x[1]);

Console.WriteLine(data["connect"]); // 100
Console.WriteLine(data["username"]); // example 
```

`SubString(1, url.Length-2)`如果您在没有开始`?`和结尾的情况下取回字符串，则可以删除呼叫`/`。

# hibernate - 处理 $$enhancerbycglib 类对象的懒惰问题

> ID：11329242
> 
> 赞同：0
> 
> 时间：2012-07-04T12:36:03.707
> 
> 标签：hibernate

我有一个班级 Car 和一个班级 Prenot ...

```
@Entity
@Table(name="car"
    ,catalog="gestcars")
public class Car implements java.io.Serializable {
     private String targ;
     private String model;
     private Set<Prenot> prenots = new HashSet<Prenot>(0);
    public Car() {
    }
…….}

public class Prenot  implements java.io.Serializable {
    @Id
    @Column(name="codice", unique=true, nullable=false)
    @GeneratedValue(strategy =GenerationType.AUTO)
    private int codice;
    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="car_targ", nullable=false)
     private Car car;
    …..} 
```

第一次调用这个

```
For(x: …some cicle)…
     try {
            if(!session.isOpen()){
              this.session=util1.HibernateUtil1.getSessionFactory().getCurrentSession();
            }

        org.hibernate.Transaction tx = session.beginTransaction();
        Criteria crit=session.createCriteria(Prenot.class);
        crit.add(Expression.eq("data", newdata))
        .addOrder(Order.asc("data"))
        .addOrder(Order.asc("from"));        
        prenot = (List<Prenot>) crit.list();
        session.flush();
        session.close();.....
return prenot; 
```

返回给我和对象 Prenot，它使用 EAGER 获取，实际上我可以通过代码获取对象 Car

```
Iterator i = prenot.iterator();
                while (i.hasNext()) {
                    Prenot tempP = (Prenot) i.next();
                   Car c = tempP.getCar();…… } 
```

列表 prenot 中的 cicle（对于 x...）的不可告人的 iterqtion 我有一个对象 Car$$enhancerbycglib$$... 为什么？我从懒惰变成了渴望，因为我不能处理 $$enhancerbycglib$$ 对象。我怎么能？

它看起来改变了 this 调用后获取的对象的类型：

```
 org.hibernate.Transaction tx=session.beginTransaction();
       session.save(p);
        session.flush();
       tx.commit(); 
```

# javascript - 是否有与 Multimap 数据结构等效的 javascript？

> ID：11329244
> 
> 赞同：13
> 
> 时间：2012-07-04T12:36:13.303
> 
> 标签：javascript, data-structures, multimap

[Multimap](http://en.wikipedia.org/wiki/Multimap)是一种将键映射到值列表/值集的数据结构。

有没有一个好的、不显眼的 js 库来实现这个数据结构？

**编辑**- 我知道我可以自己“轻松地”实现它，但我相信将它作为一个独立的抽象是一件好事，所以这个问题的答案不应该是“自己实现它”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:03:17.203

由于@Esailija 仅将此作为评论发布，因此我将其作为可能的答案提交。使用数组作为值的对象是要走的路，并通过[Underscore.js](http://underscorejs.org/)操作值。

```
var map = {
    foo: [1, 2, 3],
    bar: ['1', '2', '3']
};

map.foo = _.union(map.foo, [1, 4]); // map.foo -> [1, 2, 3, 4] 
```

虽然这显然取决于您的需求，但这种方法为您提供了无处不在的通用数据结构，以及一个可以很好地处理集合和列表的库。对于大多数目的，这种方法的性能应该很好（只是不要每秒执行数百万次）。

# java - 如何在 Eclipse 4.2 中获取 IEditorReference

> ID：11329246
> 
> 赞同：1
> 
> 时间：2012-07-04T12:36:19.230
> 
> 标签：java, eclipse, eclipse-plugin

我有在 eclipse 3.7 中工作的以下代码：

```
private static IEditorReference getReference(IEditorPart part) {
        return (IEditorReference) ((PartSite) part.getSite()).getPane().getPartReference();
    } 
```

在 Eclipse 4.2 中，我在`getPane()`.
应该用什么代替？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T05:53:02.827

做就是了`((PartSite) part.getSite()).getPartReference();`

# c# - ArrayList 容量，哪个更好？C＃

> ID：11329250
> 
> 赞同：0
> 
> 时间：2012-07-04T12:36:28.793
> 
> 标签：c#, arraylist, capacity

我有一个输入，今天大约是 450，将来可能会增加。（有时它的运行次数少于 450，可能是 100 或 20）

对我来说更好：

*   未设置容量
*   将容量设置为低 (100)
*   设置容量略小于 450
*   设置容量略高于 450
*   将容量设置为 450 以上
*   将容量设置为超出预期（80% 以上？，两次？）

使用 n 作为增加的数量（不是实际的复杂性）我认为将其设置为小于预期的 n=440 或某些东西会给我“复杂性” n + 2n = (3n)

而如果我把它略高于 (n=460) 只会给出 n

另外，如果我设置 n = 800 给我一个高 n（几乎 2n）（高但我使用 TrimToSize 让它变得更好？

什么是最好的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:39:19.540

[老实说，我忽略了所有关于 n 的讨论，因为我认为它偏离了真正的观点，即相对效率。]

“最佳选择”是使用`System.Collections.Generic.List<T>`，将其初始化为合理的东西，然后在分析告诉您这是一个问题之前**不要担心它。**

通用列表的使用为您提供了强大的类型支持，并且使用值类型可以避免装箱问题。

如果列表大小不断变化，或者列表不会持续很长时间，那么修剪它不会带来太大的改进（如果有的话）。如果您知道所涉及的大小的某些事情，则可以通过使用具有初始容量的重载构造函数来节省一些重新分配：

```
var list = new List<int>(450); 
```

达到初始容量后，列表将继续使用它自己的内部逻辑调整大小，以决定要抓取多少（如果您不指定大小，则默认为双倍大小：从 4 开始，然后是 8、16 , 32 等)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T12:38:56.153

*   有了这些数字 (< 1000) ，这并不重要。

*   如果没有初始容量，您将增长 8、16、32、64 等 log(n) 重新分配。

因此，只需使用任何接近目标的值。400在这里和800一样好。您可能会有 1 次重新分配，*几乎* `N`空间的过冲是不可避免的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:40:38.570

ArrayList 适用于 .net 1.1

你可以使用`List<T>`的是一个泛型类。

它支持存储特定类型的值，而无需对对象进行装箱和拆箱。ArrayList 只是存储对象引用。

1.  使用 List 避免装箱/拆箱操作，节省您的内存 n 时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:41:14.643

您不能使用通用列表是否有原因？这将扩展/收缩到您需要存储的元素数量。如果您必须使用数组，那么我会将其设置为您可以预期的最大值的两倍（即 800），因为这是一个相对较小的数字。对于数字，这将是一小部分要分配的内存。

# mysql - 优化 mysql/postgresql 以进行创建和更新

> ID：11329261
> 
> 赞同：0
> 
> 时间：2012-07-04T12:36:52.020
> 
> 标签：mysql, postgresql, select, rdbms

据我所知，大多数 RDBMS 包都是在构建时牢记 99% 的查询将是选择查询。但是，我的情况是，我们至少有 50% 的查询作为创建/更新查询。由于我们还需要持久性，所以我们不能选择 NoSQL 解决方案。本质上，只要有更新，就应该立即永久存储。所以，我想知道 MySQL 的性能是否会因此受到阻碍。我们当前的 MySQL 引擎是 InnoDb。还有其他 MySQL 引擎更可取吗？我计划使用 Amazon RDS，所以我的重点是 MySQL；但出于好奇，我想知道 postgresql 是否可以提供帮助。

注意 - 只是为了了解规模，我们正在讨论在投入生产的几个月内对至少有一百万个条目的表进行创建/更新查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:46:11.170

拥有尽可能少的索引会提高插入和更新的速度，因为在向表中插入/更新行时必须更新所有索引。但是，当然，请记住，某些索引可能还会增加您的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:56:59.453

如果您的工作集适合内存，那么您的插入和更新往往会非常快。正如其他人所提到的，分区在这里可以提供帮助。大多数 NoSQL 解决方案都具有持久性，因此您不应完全排除它们。Cassandra 有一个专门针对写入调整的存储模型，可能值得一看。

如果您使用 MySQL，则有一些调整参数可以用一些持久性来换取插入性能，以及各种其他硬件和软件设置：

[https://serverfault.com/questions/118504/how-to-improve-mysql-insert-and-update-performance](https://serverfault.com/questions/118504/how-to-improve-mysql-insert-and-update-performance)

在标准磁盘上使用完全耐用性时，您可能会期望大约 100 次插入/秒。如果这不会削减它，设置基准并开始调整参数或准备进行一些重新架构。使用表中的实际数据量进行基准测试很重要。现在发现问题比在 6 个月后表格开始填满时发现问题要好得多。合成数据很好，只要确保索引字段的分布相似。

# xml - 合并没有直接引用的元素

> ID：11329262
> 
> 赞同：1
> 
> 时间：2012-07-04T12:36:52.833
> 
> 标签：xml, xslt, xslt-1.0

有没有办法使用 XSLT 1.0 将 xml1 转换为 xml2？

*xml1*：

```
<E1BPBUSISM008_ITEM_OUT>
    <ITEM_NUMBER>010</ITEM_NUMBER>
</E1BPBUSISM008_ITEM_OUT>
<E1BPBUSISM008_ITEM_OUT>
    <ITEM_NUMBER>020</ITEM_NUMBER>
</E1BPBUSISM008_ITEM_OUT>

<E1BPBUSISM008_ITEM_AD_OUT>
    <ITEM_NUMBER>010</ITEM_NUMBER>
    <AD_SPEC_NO>000001</AD_SPEC_NO>
</E1BPBUSISM008_ITEM_AD_OUT>
<E1BPBUSISM008_ITEM_AD_OUT>
    <ITEM_NUMBER>020</ITEM_NUMBER>
    <AD_SPEC_NO>000002</AD_SPEC_NO>
</E1BPBUSISM008_ITEM_AD_OUT>

<E1BPBUSISM008_AD_SPEC_AD_OU>
    <AD_SPEC_NO>000001</AD_SPEC_NO>
    <KEYWORD>key1</KEYWORD>
</E1BPBUSISM008_AD_SPEC_AD_OU>
<E1BPBUSISM008_AD_SPEC_AD_OU>
    <AD_SPEC_NO>000002</AD_SPEC_NO>
    <KEYWORD>key2</KEYWORD>
</E1BPBUSISM008_AD_SPEC_AD_OU> 
```

进入*xml2*：

```
<Ad>
    <ad-number>010</ad-number>
    <keyword>key1</keyword>
</Ad>
<Ad>
    <ad-number>020</ad-number>
    <keyword>key2</keyword>
</Ad> 
```

如果无法进行直接转换，则将*xml1*合并为以下内容会有所帮助：

```
<E1BPBUSISM008_ITEM_OUT>
    <ITEM_NUMBER>010</ITEM_NUMBER>
    <KEYWORD>key1</KEYWORD>
</E1BPBUSISM008_ITEM_OUT>
<E1BPBUSISM008_ITEM_OUT>
    <ITEM_NUMBER>020</ITEM_NUMBER>
    <KEYWORD>key2</KEYWORD>
</E1BPBUSISM008_ITEM_OUT> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:54:42.413

您可以使用两个键来查找数据。**首先通过ITEM_NUMBER**查找**E1BPBUSISM008_ITEM_AD_OUT**元素

 **```
<xsl:key name="ad1" match="E1BPBUSISM008_ITEM_AD_OUT" use="ITEM_NUMBER" /> 
```

**然后通过AD_SPEC_NO**查找**E1BPBUSISM008_AD_SPEC_AD_OU**元素

 **```
<xsl:key name="ad2" match="E1BPBUSISM008_AD_SPEC_AD_OU" use="AD_SPEC_NO" /> 
```

然后，对于给定的**E1BPBUSISM008_ITEM_OUT**元素，你会得到这样的**关键字**

```
<xsl:value-of select="key('ad2', key('ad1', ITEM_NUMBER)/AD_SPEC_NO)/KEYWORD" /> 
```

因此，给定以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="ad1" match="E1BPBUSISM008_ITEM_AD_OUT" use="ITEM_NUMBER" />
   <xsl:key name="ad2" match="E1BPBUSISM008_AD_SPEC_AD_OU" use="AD_SPEC_NO" />

   <xsl:template match="/ROOT">
      <xsl:apply-templates select="E1BPBUSISM008_ITEM_OUT" />
   </xsl:template>

   <xsl:template match="E1BPBUSISM008_ITEM_OUT">
      <Ad>
         <ad-number><xsl:value-of select="ITEM_NUMBER" /></ad-number>
         <keyword><xsl:value-of select="key('ad2', key('ad1', ITEM_NUMBER)/AD_SPEC_NO)/KEYWORD" /></keyword>
      </Ad>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时（假设存在 ROOT 元素），输出以下内容

```
<Ad>
    <ad-number>010</ad-number>
    <keyword>key1</keyword>
</Ad>
<Ad>
    <ad-number>020</ad-number>
    <keyword>key2</keyword>
</Ad> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:03:47.957

这只是一个建议，因为我现在无法进行任何测试。

使用密钥按 ITEM_NUMBER 获取您的 AD_SPEC_NO：

```
 <xsl:key name="AD_SPEC_NO" match="E1BPBUSISM008_ITEM_AD_OUT" use="ITEM_NUMBER"/> 
```

然后，例如，在匹配 E1BPBUSISM008_ITEM_OUT 的模板中，您可以使用以下表达式来获取相关关键字值：

```
 <xsl:value-of select="following-sibling::E1BPBUSISM008_AD_SPEC_AD_OU[
       AD_SPEC_NO = key('AD_SPEC_NO',current()/ITEM_NUMBER)/AD_SPEC_NO]
       /KEYWORD" /> 
```****

# c# - 仅在构造函数中设置类泛型值

> ID：11329263
> 
> 赞同：3
> 
> 时间：2012-07-04T12:36:54.703
> 
> 标签：c#, .net, generics

有没有办法只在构造函数中设置类的泛型类型（T），而不是在声明中？

```
public class Gen<T>
{
}

public class Da
{
}

public class Program
{
    public static Gen<?> gen;

    public static void Main(string[] args)
    {
        gen = new Gen<Da>();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T12:41:44.473

如果我正确理解您的要求，实现此目的的最简单方法是使用非通用接口：

```
interface IGen { } 
```

那么你的泛型类可以是：

```
class Gen<T> : IGen { } 
```

用法是：

```
IGen objectGen = new Gen<object>();
IGen intGent = new Gen<int>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T12:38:46.857

可以，但只能使用非泛型变量，例如`object`任何非泛型基类或泛型类实现的任何接口。

```
public interface Intf {
  void DoSomething();
}

public class Gen<T>: Intf {
  public void DoSomething() {
    // can use the generic stuff here
  }
}

public class Da {

}

public class Program {
    public static Intf gen;
    public static void Main(string[] args) {
        gen = new Gen<Da>();
        gen.DoSomething();
    }
} 
```

# javascript - crm 2011 通过 Javascript 和 JSON 停用记录（更改状态）

> ID：11329266
> 
> 赞同：1
> 
> 时间：2012-07-04T12:37:09.503
> 
> 标签：javascript, json, dynamics-crm-2011

如何使用 Javascript 和 JSON 表示法更改 CRM 中的状态/禁用记录？所有来源都使用 XML链接到[http://mileyja.blogspot.cz/2011/07/set-status-or-state-of-record-using.html 。](http://mileyja.blogspot.cz/2011/07/set-status-or-state-of-record-using.html)我试图让它与 JSON 一起工作，但是没有成功。以下是我的代码和返回的错误。该代码在更改其他字段时有效。

```
function update(oldObject,id){

   var newObject = new Object();
   newObject.statecode=oldObject.statecode; //take the state object from record of the same entity
   newObject.statuscode=oldObject.statuscode; // -||-

   newObject.statecode.Value=1;   
   newObject.statuscode.Value=2;  

   var jsonEntity = window.JSON.stringify(newObject);
   var ODataPath = serverUrl + 
      "/XRMServices/2011/OrganizationData.svc/ort_hodinyzesmluvSet(guid'" + id + "')";

   var r = new XMLHttpRequest();
   r.open("POST", ODataPath, false);
   r.setRequestHeader("Accept", "application/json");
   r.setRequestHeader("Content-Type", "application/json; charset=utf-8");
   r.setRequestHeader("X-HTTP-Method", "MERGE");
   r.onreadystatechange = function () {

     r=this;
     if (r.readyState == 4 ) {
       if (r.status == 200 || r.status == 201 || r.status == 202 || r.status==1223){
         alert('suc');
       } 
       else
         prompt('error',JSON.stringify(r));
     }

   };
   r.send(jsonEntity);

} 
```

错误：

```
{
"timeout":0,
"responseXML":{},
"ontimeout":null,
"status":500,
"readyState":4,
"statusText":"Internal Server Error",
"responseText":"{\r\n\"error\": {\r\n\"code\": \"-2147187704\", \"message\": {\r\n\"lang\": \"en-US\", \"value\": \"**2 is not a valid status code for state code ort_hodinyzesmluvState.Active on ort_hodinyzesmluv**.\"\r\n}\r\n}\r\n}"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:58:03.897

从错误消息的外观来看，问题是您尝试分配给实体的状态码的值`ort_hodinyzesmluv`

一个实体的状态由两个字段描述：对于每个实体`statecode`，`statuscode`只有这两个字段的某些组合是有效的。

从您在上面发布的代码中，您正在分配：

newObject.statecode.Value=1;
newObject.statuscode.Value=2;

我建议你检查一下表格`StatusMap`。这包含每个实体的所有有效组合（您还需要实体 ObjectTypeCode）。

# android - 带有 actionbar、fragments 和 viewpager 的 Android gui

> ID：11329274
> 
> 赞同：0
> 
> 时间：2012-07-04T12:37:27.980
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager

你好！

我已经编程了很长时间，但刚刚开始为 android 开发，这似乎与 c++ 完全不同，至少可以说......

无论如何，我正在尝试用一些选项卡实现一个 gui，它应该能够在向左/向右滑动时更改选项卡。选项卡是使用操作栏（或准确地说是 ActionBarSherlock）实现的，使用支持库中的 ViewPager 滑动。各个选项卡是片段（即 SherlockFragment:s）。在底部应该有某种状态栏，只是显示一些文本。

我遇到的问题是标签从未显示。我看到顶部带有徽标/标题的操作栏，下面有一个选项卡列表。在屏幕底部，我看到状态栏文本，但没有别的。

如果我`//context.setContentView(pager);`在 SwipeBar() 构造函数中取消注释该行，则会显示选项卡的内容，但不会显示状态栏。（无论如何，这条线在这里感觉真的不对，但如果没有它，我无法弄清楚如何在我的标签中获取一些内容。）

我已经尝试了我能想到的一切。我已经阅读了所有我能找到的关于它的内容，并尝试了很多不同的例子来说明如何自己完成每个功能。但是将它们结合起来......我就是无法让它发挥作用。我真的很感谢你的帮助！

* * *

我的主要（活动）类：
Main.java

```
public class Main extends SherlockFragmentActivity {
private SwipeBar    tabs;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tabs = new SwipeBar(this, R.id.pager);
    tabs.add(One.class, "one", null);
    tabs.add(Two.class, "two", null);
    tabs.add(Three.class, "three", null);
}
} 
```

* * *

这是我实现 actionbar/viewpager/fragments 的类：
SwipeBar.java

```
public class SwipeBar extends FragmentPagerAdapter implements OnPageChangeListener,
    TabListener {
private final ActionBar                 bar;
private final SherlockFragmentActivity  ctx;
private final ViewPager                 pager;
private final ArrayList<TabInfo>        tabs;

public SwipeBar(final SherlockFragmentActivity context, final int viewPagerId) {
    super(context.getSupportFragmentManager());
    bar = context.getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    pager = new ViewPager(context);
    pager.setId(viewPagerId);
    pager.setAdapter(this);
    pager.setOnPageChangeListener(this);
    ctx = context;
    // context.setContentView(pager);
    tabs = new ArrayList<TabInfo>();
}

public void add(final Class<?> clss, final int tabHeaderStringId, final Bundle args) {
    final ActionBar.Tab tab = bar.newTab();
    final TabInfo info = new TabInfo(clss, args);
    tab.setTag(info);
    tab.setText(tabHeaderStringId);
    tab.setTabListener(this);
    tabs.add(info);
    bar.addTab(tab);
    notifyDataSetChanged();
}

@Override
public int getCount() {
    return tabs.size();
}

@Override
public Fragment getItem(final int pos) {
    final TabInfo info = tabs.get(pos);
    return Fragment.instantiate(ctx, info.clss().getName(), info.args());
}

public void onPageScrolled(final int arg0, final float arg1, final int arg2) {}

public void onPageScrollStateChanged(final int arg0) {}

public void onPageSelected(final int pos) {
    bar.setSelectedNavigationItem(pos);
}

public void onTabReselected(final Tab tab, final FragmentTransaction ft) {}

public void onTabSelected(final Tab tab, final FragmentTransaction ft) {
    final TabInfo tag = (TabInfo)tab.getTag();
    for(int i = 0; i < tabs.size(); i++)
        if(tabs.get(i) == tag) pager.setCurrentItem(i);
}

public void onTabUnselected(final Tab tab, final FragmentTransaction ft) {}
} 
```

* * *

主布局：
Main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_weight="1"
    android:layout_width="match_parent"
    android:layout_height="0px">    
</android.support.v4.view.ViewPager>

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:background="#33FF0000"
    android:gravity="center"
    android:layout_weight="0"
    android:text="statusbar">
</TextView> 

</LinearLayout> 
```

* * *

三页的代码：
One/Two/Three.xml/java

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/one"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:gravity="center" >
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="this is tab one" />
</LinearLayout>

public class One extends SherlockFragment {
@Override
public View onCreateView(final LayoutInflater inflater,
            final ViewGroup container, final Bundle savedInstanceState) {
    return (LinearLayout)inflater.inflate(R.layout.one, container, false);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:05:43.143

好的，我终于解决了。上面的代码来自尝试将 ViewPager 功能添加到我所做的选项卡中。我重新开始并实现了一个常规的 ViewPager（就像那里的各种示例一样），然后添加了一个 ActionBar。实际的片段内容现在在 ViewPager 中，并且 ActionBar 选项卡是空的，但通过 ViewPager 回调设置以指示当前的。

我仍然不知道最初的尝试有什么问题......

# iphone - 调用宏

> ID：11329275
> 
> 赞同：0
> 
> 时间：2012-07-04T12:37:35.837
> 
> 标签：iphone, objective-c, ios, c

我有以下宏：

```
#define testMethod(a, b) \
        if (a.length > b.length) \
            return a; \
        return b; 
```

当我尝试用以下方式调用它时：

```
NSString *s = testMethod(@"fir", @"sec"); 
```

我收到一个错误：

> `"Excepted ";" at end of declaration"`

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T12:40:03.333

`if`是语句，不是表达式。它不能`return`有这样的价值。

你可能的意思是：

```
#define testMethod(a, b) ((a).length > (b).length ? (a) : (b)) 
```

右侧论点周围的额外括号很常见，可以保护您免受与优先级相关的意外事件。

另请注意，由于上述内容是通过文本替换进行预处理的，因此它可能会构造比等效函数更多的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T12:41:21.207

如果要在表达式中使用宏，则应将其定义为表达式本身，而不是一组语句。您最终会出现语法错误，因为宏被逐字替换，并且在另一个语句中不允许使用语句。

GCC 有一个名为“语句表达式”的扩展，可以帮助您实现这一点，但它是非标准的：

```
#define testMethod(a, b) ({ \
    typeof(a) result = (a).length > (b).length ? (a) : (b); \
    result; \
}) 
```

实际上，在您的情况下，这些都不需要，因为语句可以很容易地转换为表达式：

```
#define testMethod(a, b) ((a).length > (b).length ? (a) : (b)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:44:31.563

您不需要使用return语句...尝试使用以下代码

```
#define testMethod(a,b)  ((a) < (b) ? (a) : (b)) 
```

这可能会帮助你..

# c# - ajaxToolkit：触发同一页面中的更新面板时，AjaxFileUpload 不起作用

> ID：11329276
> 
> 赞同：1
> 
> 时间：2012-07-04T12:37:38.790
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我有以下情况：

更新面板内带有用户控件的母版页，每分钟触发一个计时器。在内容页面中，我有一个`ajaxToolkit:AjaxFileUpload`具有拖放功能的功能，在页面加载时，上传控件工作正常，但在更新面板上的第一次触发后，控件停止工作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:32:41.097

我能够通过将`AjaxFileUpload`控件放置`ContentTemplate`在`UpdatePanel`.

如果您将其放在自己的`UpdatePanel`中，请确保将`UpdateMode`其设置为“始终”。如果您希望它是“有条件的”，则需要以某种方式使用触发器对其进行更新。

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Always">
    <ContentTemplate>
        <ajaxToolkit:AjaxFileUpload ID="AjaxFileUpload2" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

# android - 为什么android HttpURLConnection不尊重超时值？

> ID：11329277
> 
> 赞同：15
> 
> 时间：2012-07-04T12:37:44.033
> 
> 标签：android, timeout, httpurlconnection

我有以下代码块：

```
try {
    URL url = new URL("http://site-to-test.com/nonexistingpage.html");

    HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
    urlc.setRequestProperty("User-Agent", CoreProtocolPNames.USER_AGENT);
    urlc.setRequestProperty("Connection", "close");
    urlc.setConnectTimeout(500); // timeout is in milliseconds
    urlc.connect();

    if (urlc.getResponseCode() == 404) {
        // Server was reachable
        Log.i(TAG, "Server is reachable");
    }

} catch (MalformedURLException mue) {
    Log.e(TAG, "MalformedURLException: " + mue.getMessage());
} catch (IOException e) {
    Log.e(TAG, "IOException: " + e.getMessage());
} 
```

当`site-to-test`通过当前网络无法访问域时，此代码会阻塞大约 30-40 秒，然后才会收到`IOException`. 我特意将超时值设置为 500ms。我在这里想念什么？无论网络状态和站点的可用性如何，上述块不应该在半秒内终止吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T14:15:02.397

Java URLConnection似乎[在读取时没有提供故障安全超时](http://thushw.blogspot.hu/2010/10/java-urlconnection-provides-no-fail.html)

正如文章所解释的，解决方案是使用单独的线程进行计时，并在计时器线程完成后手动断开 HttpURLConnection。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-22T09:26:27.707

经过深入调查和大量跟踪，我发现为 AsyncTask（或服务，您用来执行后台工作的对象）实现计时器的最佳方法远离 HTTP 连接类，有时当您断开 HTTP 连接时，这不会中断网络调用，我实现了这个类，当你需要超时检查你的 HTTP 连接时使用

```
public abstract class AsyncTaskWithTimer<Params, Progress, Result> extends
    AsyncTask<Params, Progress, Result> {

    private static final int HTTP_REQUEST_TIMEOUT = 30000;

    @Override
    protected Result doInBackground(Params... params) {
        createTimeoutListener();
        return doInBackgroundImpl(params);
    }

    private void createTimeoutListener() {
        Thread timeout = new Thread() {
            public void run() {
                Looper.prepare();

                final Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    @Override
                    public void run() {

                        if (AsyncTaskWithTimer.this != null
                                && AsyncTaskWithTimer.this.getStatus() != Status.FINISHED)
                            AsyncTaskWithTimer.this.cancel(true);
                        handler.removeCallbacks(this);
                        Looper.myLooper().quit();
                    }
                }, HTTP_REQUEST_TIMEOUT);

                Looper.loop();
            }
        };
        timeout.start();
    }

    abstract protected Result doInBackgroundImpl(Params... params);
} 
```

一个样本

```
public class AsyncTaskWithTimerSample extends AsyncTaskWithTimer<Void, Void, Void> {

    @Override
    protected void onCancelled(Void void) {
        Log.d(TAG, "Async Task onCancelled With Result");
        super.onCancelled(result);
    }

    @Override
    protected void onCancelled() {
        Log.d(TAG, "Async Task onCancelled");
        super.onCancelled();
    }

    @Override
    protected Void doInBackgroundImpl(Void... params) {
        // Do background work
        return null;
    };
 } 
```

# c++ - 如何转换dfs

> ID：11329289
> 
> 赞同：0
> 
> 时间：2012-07-04T12:38:25.473
> 
> 标签：c++, algorithm, data-structures, depth-first-search

我有深度优先搜索算法，其伪代码如下：

```
 DFS(Vertex v)
    mark v visited
    make an empty Stack S
    push all vertices adjacent to v onto S
    while S is not empty do
        Vertex w is pop off S
        for all Vertex u adjacent to w do
            if u is not visited then
                mark u visited
                push u onto S 
```

现在，我希望将上述 dfs 算法转换为广度优先搜索。我正在用 C++ 实现该程序。我不知道如何去做同样的事情。

编辑：我知道 bfs 的伪代码。我正在寻找的是如何将上述dfs的伪代码转换为bfs。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:52:42.700

```
BFS（顶点 v）
    标记 v 访问过
    创建一个空队列 Q
    将与 v 相邻的所有顶点排入 Q 上
    而 Q 不为空
        顶点 w 从 Q 中出列
        对于与 w 相邻的所有顶点 u
            如果你没有被访问，那么
                标记你访问过
                将你排入 Q
```

我希望这有帮助

# sql-server-2008 - SQL Server 网络服务帐户权限

> ID：11329290
> 
> 赞同：3
> 
> 时间：2012-07-04T12:38:31.157
> 
> 标签：sql-server-2008, security, permissions, windows-server-2008

我的 SQL Server Windows 服务设置为使用 NETWORK SERVICE 帐户。

服务器安装到`C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL`.

但是查看该文件夹的权限，NETWORK SERVICE 没有任何权限。允许访问该文件夹的组是...

*   创造者所有者——这是谁？
*   系统 - 听起来不错 - 以便 Windows 可以访问我认为的文件夹？
*   SQLServerMSSQLUser$Computer_Name$MSSQLSERVER - 这是一个有趣的 - 这是什么？
*   管理员
*   用户

如果 NETWORK SERVICE 是对系统具有最低权限的用户，并且将操作系统视为从网络连接的人，它如何有权访问 SQL Server 安装文件夹中的任何文件？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:26:57.570

请参阅SQL Server 文档中的[设置 Windows 服务帐户：](http://msdn.microsoft.com/en-us/library/ms143504%28v=sql.100%29.aspx)

> SQL Server 使用安全组来设置资源 ACL，而不是直接使用服务帐户，因此无需重复资源 ACL 过程即可更改服务帐户。安全组可以是本地安全组、域安全组或服务SID。
> 
> 在 SQL Server 安装期间，SQL Server 安装程序为每个 SQL Server 组件创建一个服务组。这些组简化了授予运行 SQL Server 服务和其他可执行文件所需的权限，并帮助保护 SQL Server 文件。
> 
> 根据服务配置，服务或服务 SID 的服务帐户在安装或升级期间添加为服务组的成员。

就是这样`SQLServerMSSQLUser$Computer_Name$MSSQLSERVER`。

* * *

关于[网络服务帐户](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684272%28v=vs.85%29.aspx)：

> NetworkService 帐户是服务控制管理器使用的预定义本地帐户。
> 
> ...
> 
> 在 NetworkService 帐户的上下文中运行的服务将计算机的凭据提供给远程服务器。

**不是**，正如你所说：

> 将操作系统视为从网络连接的人

# php - Facebook 分享链接脚本 - 不提取本地 IMG

> ID：11329291
> 
> 赞同：1
> 
> 时间：2012-07-04T12:38:31.863
> 
> 标签：php

参考此页面上显示的此脚本： [facebook 共享链接脚本](https://stackoverflow.com/questions/6382138/facebook-share-links-script)

我让它工作得很好，但它不显示任何本地图像。一个例子是：

`img src="/path/to/image.jpg" alt=""`

它也不会“抓取”使用某种 php 图像脚本的图像。一个例子是：

`img src="/getimage.php?path/to/image.jpg&w=500" alt=""`

有谁知道如何解决这些问题？我试过`$url`在前面添加字符串，但这根本不起作用。任何帮助，将不胜感激。谢谢你。

源脚本在[这里](http://www.99points.info/2010/07/facebook-like-extracting-url-data-with-jquery-ajax-php/)。

# xslt - 将 xml 作为参数传递给 xslt 并替换 xml

> ID：11329295
> 
> 赞同：2
> 
> 时间：2012-07-04T12:38:46.117
> 
> 标签：xslt

> **可能重复：**
> [XSLT 用于 XML 元素中的替换属性，如果它存在于另一个 XML 中？](https://stackoverflow.com/questions/6996998/xslt-for-replace-attribute-in-xml-element-if-it-exists-in-another-xml)

我有两个 XML：

第一个 XML：

```
<FirstXML>
  <catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
  </catalog>
</FirstXML> 
```

第二个 XML：

```
<SecondXML>
  <catalog>
         <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
  </catalog>
</SecondXML> 
```

我想使用 XSLT 转换我的第一个 XML。第一个 xml 的 cd 节点应替换为第二个 xml 的 cd 节点。

XSLT 转换生成的 XML：

```
<FirstXML>
  <catalog>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
  </catalog>
</FirstXML> 
```

请为此使用 XSLT 帮助我。我认为我们需要将第二个 XML 作为参数传递给 XSLT，我正在尝试这样做。我对 XSLT 很陌生，所以可能没有正确编码。关于我们如何做到这一点的任何意见都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T16:15:57.853

> 我认为我们需要将第二个 XML 作为参数传递给 XSLT。

**这是可能的，但根本没有必要**。

一种更方便的方法是将文档的文件路径传递给转换，并使用 XSLT**[`document()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-document)**函数来解析和访问它：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pDocLink" select=
  "'file:///c:/temp/delete/SecondXml.xml'"/>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:copy-of select="document($pDocLink)/*/*[1]"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的“第一个”文档时**：

```
<FirstXML>
    <catalog>
        <cd>
            <title>Empire Burlesque</title>
            <artist>Bob Dylan</artist>
            <country>USA</country>
            <company>Columbia</company>
            <price>10.90</price>
            <year>1985</year>
        </cd>
    </catalog>
</FirstXML> 
```

**并且“第二个”文档放置在`c:\temp\delete\SecondXml.xml`**：

```
<SecondXML>
    <catalog>
        <cd>
            <title>Hide your heart</title>
            <artist>Bonnie Tyler</artist>
            <country>UK</country>
            <company>CBS Records</company>
            <price>9.90</price>
            <year>1988</year>
        </cd>
    </catalog>
</SecondXML> 
```

**产生了想要的正确结果**：

```
<FirstXML>
   <catalog>
      <cd>
         <title>Hide your heart</title>
         <artist>Bonnie Tyler</artist>
         <country>UK</country>
         <company>CBS Records</company>
         <price>9.90</price>
         <year>1988</year>
      </cd>
   </catalog>
</FirstXML> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:48:59.343

有一个[`document`](http://www.w3.org/TR/xslt/#document)功能，用它来处理多个输入源。您对问题的描述过于模糊，无法提供更详细的建议。尝试搜索一些教程，例如[http://www.ibm.com/developerworks/xml/library/x-tipcombxslt/](http://www.ibm.com/developerworks/xml/library/x-tipcombxslt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:54:47.643

你应该看看这个[`document()`](http://www.w3.org/TR/xslt/#document)功能。将 XML 树作为参数传入是一些 XML 系统，而不是其他系统。

如果您有一个变量，例如

```
<xsl:variable name="source" select="document('filename.xml')//catalog"/> 
```

然后访问该变量`$source`将为您提供 CD 分支的根目录

**编辑**

只是为了清楚我对 Dimitre Novatchev 的回答，正如我所说，你可以做到，尽管在 90% 的情况下你会想要使用文档函数，但可以将节点片段从 C# 传递到样式表使用 AddParam 的应用程序，并且可以在您从自己的应用程序生成该数据时使用，并且不需要编写它（或在不实用的地方）。

因此，对于样式表，例如：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
        <xsl:output method="xml" indent="yes"/>

        <xsl:param name="bonnie_tyler"/>

        <xsl:template match="@* | node()">
            <xsl:copy>
                <xsl:apply-templates select="@* | node()"/>
            </xsl:copy>
        </xsl:template>

        <xsl:template match="cd[ancestor::FirstXML]">
                <xsl:copy>
                    <xsl:apply-templates select="msxsl:node-set($bonnie_tyler)//cd/*"/>
                </xsl:copy>
        </xsl:template>
    </xsl:stylesheet> 
```

第一个和第二个 XML 根据您的原始问题，您可以使用传递节点，例如：

```
 try
        {
            XslCompiledTransform xt = new XslCompiledTransform();
            Assembly ass = Assembly.GetEntryAssembly();
            Stream strm = ass.GetManifestResourceStream("ConsoleApplication1.testparam.xslt");
            XmlTextReader xmr = new XmlTextReader(strm);
            xt.Load(xmr);
            xmr.Close();

            XmlDocument originalDocument = new XmlDocument();
            strm = ass.GetManifestResourceStream("ConsoleApplication1.FirstXML.xml");
            originalDocument.Load(strm);
            XmlDocument replacementNode = new XmlDocument();
            strm = ass.GetManifestResourceStream("ConsoleApplication1.SecondXML.xml");
            replacementNode.Load(strm);

            XsltArgumentList arg = new XsltArgumentList();
            arg.AddParam("bonnie_tyler", "", replacementNode);

            StringBuilder htmlOutput = new StringBuilder();
            XmlWriter writer = XmlWriter.Create(htmlOutput);

            xt.Transform(originalDocument, arg, writer);

            Console.Out.Write(htmlOutput.ToString());
        } 
```

这将为您提供所需的输出（尽管显然您不会像此处那样从磁盘加载文件）

# php - 让 cron 工作与 Wordpress 的 wp-cron.php 一起工作

> ID：11329300
> 
> 赞同：0
> 
> 时间：2012-07-04T12:39:00.257
> 
> 标签：php, wordpress, cron

我正在尝试让 Buddypress/Wordpress 的 Buddypress 组电子邮件通知插件发送摘要，但没有成功。

这是到目前为止发生的事情：

1.  我已经确认所有项目都被添加到插件生成的摘要列表中，方法是访问显示这些项目的页面，即 http://[site url]/?sum=1

2.  我可以通过访问 wp-cron.php 的 URL 来手动触发摘要的发送，即浏览器中的 http://[site url]/wp-cron.php。

所以，问题在于 wp-cron.php 的触发。对此进行研究后，对我来说，在我的服务器上设置一个 cron 作业似乎是一个好主意，因为我的网站没有太多流量，而且内置的 WordPress 伪 cron 作业只有在有人访问该网站时才会触发。

我现在遇到的问题是为 cron 作业的命令输入什么内容。我已经尝试了很多东西，但我目前有这个：

```
wget -O /dev/null http://soteriabrighton.co.uk/wp-cron.php 
```

我已将它设置为在每个 cron 作业运行时向我发送电子邮件，这就是上述命令返回的内容：

```
--2012-07-03 18:15:01-- http://soteriabrighton.co.uk/wp-cron.php
Resolving soteriabrighton.co.uk... 208.53.158.38
Connecting to soteriabrighton.co.uk|208.53.158.38|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 0 [text/html]
Saving to: `/dev/null'

0K 0.00 =0s

2012-07-03 18:15:04 (0.00 B/s) - `/dev/null' saved [0/0] 
```

在我未经训练的眼睛看来，它工作正常，但没有发送任何摘要。

任何帮助解决此问题/使用故障排除步骤将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:51:29.587

试图用谷歌搜索它或查看 i9r 论坛 - 2 秒给了我：

[http://forums.cirtexhosting.com/website-development-scripting/1395-cron-job.html](http://forums.cirtexhosting.com/website-development-scripting/1395-cron-job.html)

> wget 有时被用户允许不允许，因此某些服务器对用户禁用。可能想尝试 curl，lynx，如果它们也被禁用，您可以尝试 /usr/bin/local/php /home/youruser/public_html/file.php 例如将做或 php -q -f /home/user /public_html/file.php

也似乎直接 php 作品，即：

```
php -q -f /home/user/public_html/file.php 
```

其他页面建议（对于critex）：

```
/usr/local/php5/bin/php5 -q /full-path/yours-php5-script.php5 
```

# objective-c - iOS 中 Outlets 的内存管理

> ID：11329304
> 
> 赞同：1
> 
> 时间：2012-07-04T12:39:20.527
> 
> 标签：objective-c, ios

嗨，我的申请中有这个：问题是，我应该输入吗`self.label =nil`？在`viewDidUnload`？如果是，为什么？

```
//.h
@interface MyClass

@property (nonatomic, retain) IBOutlet UILabel *label;

@end

//.m
@implementation Myclass

@syntesize label = label_;

- (void)dealloc
{
   self.label =nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:47:24.387

是的，您应该将 label 属性设置为`nil`in`viewDidUnload`和 in `dealloc`。`viewDidUnload`在内存不足的情况下调用，这使应用程序能够清除不需要的内存。

不将其设置为`nil`in`viewDidUnload`通常不会导致内存泄漏，但它会阻止应用程序在需要时节省内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T12:57:19.750

你应该做。

`viewDidUnload`在内存不足的情况下调用。所以如果你想清理调用`self.yourOutlet = nil`也可以用这个方法。此外，它还允许您为应用程序节省额外的内存。

下一次（在`viewDidUnload`调用方法之后）您`view`将再次加载到内存中（`viewDidLoad`将被调用）并且您的插座将被正确设置。

根据经验`IBOutlet`，您在 中发布的任何 s`dealloc`也应该`self.label = nil`在此方法中发布（引用设置为 nil like ）。

*一张纸条*

你不应该打电话`self.label = nil;`来`dealloc`。而是`[label_ release];`按照[Apple Memory Management Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)中的说明进行操作。

此外，Stack Overflow 搜索是您的朋友：

[何时调用 UIViewController viewDidUnload？](https://stackoverflow.com/questions/1285932/when-is-uiviewcontroller-viewdidunload-called)

[我什么时候应该在 -(void)viewDidUnload 而不是 -dealloc 中释放对象？](https://stackoverflow.com/questions/1158788/when-should-i-release-objects-in-voidviewdidunload-rather-than-in-dealloc)

希望有帮助。

**编辑**

如果你不使用 ARC（我认为不是），你也应该`[super dealloc];`像下面这样调用：

```
- (void)dealloc
{
   [label_ release];

   [super dealloc];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:47:05.340

你应该。尽管在大多数情况下没有必要，但在 viewDidUnload 上将所有指向对象的指针设置为 nil 被认为是一种很好的做法。Paul Hegarty 在 CS193P 第 8 讲“控制器生命周期”中解释了这一点。

你可以在这里观看：http: [//itunes.apple.com/itunes-u/ipad-iphone-application-development/id473757255 ?mt=2](http://itunes.apple.com/itunes-u/ipad-iphone-application-development/id473757255?mt=2)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-04T12:43:50.587

可以放这个，也可以放[label release], self.label = nil; 或者只是[标签发布]；

它是内存管理，以便为该对象保留的内存被垃圾收集[内存释放]。在旧的 iphone 3g 上非常重要，因为它有更少的内存供用户运行程序，但在较新的 iphone 4+/ios 5.x 中却很少，因为它使用 arc，*如果*你使用 ARC 项目，你可以跳过它。

# c++ - “for LOOP”的新 ISO 范围规则

> ID：11329313
> 
> 赞同：-2
> 
> 时间：2012-07-04T12:40:21.177
> 
> 标签：c++, for-loop

我有一段代码是在新 ISO 生效之前由其他人编写的。

由于语法的一部分，`for`LOOP in`for (pa=a.begin(), i=0; pa != a.end(); ++pa)`执行起来有点麻烦。`i=0`此外，我必须在其他`for`循环语法前面`for ( int i .....)` 加上. 但是，我不知道如何解决这一行： . 请帮帮我。`int``i``int i=0``for (pa=a.begin ( ), i=0; pa != a.end ( ); ++pa)`

```
 for ( int i = 0; pa != a.end(); ++pa)
      *pa = ++i;

  for (int i=0; i<10; i++)
      std::cout << "a[" << i << "]=" << a[i] << std::endl;

  // int i;  // note that this will work, but I do not want this extra line.

  for (pa=a.begin(), i=0; pa != a.end(); ++pa)
      std::cout << "a[" << i++ << "]=" << *pa << std::endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:53:36.577

循环外的额外声明`for`是在 C++98 和更高版本的语言中拥有两个不相关类型的迭代变量的唯一明智方法。初始化器可以是单个表达式，也可以是单个声明，一个声明不能声明多个不相关类型的变量。

如果在这种情况下你真的想要一个单线，那么你可以使用这个怪物：

```
for (int i = ((pa = a.begin()), 0); pa != a.end(); ++pa, ++i) 
```

如果你经常做这种事情，那么要确保没有人维护你的代码知道你住在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T12:47:08.477

不，您只能在`for`. 如果您的问题是范围，那么您可以将循环包含在一个块内（对于一些很好的示例，请查看循环宏的 boost 源代码）：

```
for ( int i = 0; pa != a.end(); ++pa)
    *pa = ++i;

for (int i=0; i<10; i++)
    std::cout << "a[" << i << "]=" << a[i] << std::endl;

{
    int i = 0;
    for (pa=a.begin(); pa != a.end(); ++pa)
        std::cout << "a[" << i++ << "]=" << *pa << std::endl;
} 
```

如果你只是想让它变得更好，那么答案是*否定的，你不能*。

**编辑**我看到的做你需要的事情并保持清楚
的**最好技巧**是关于 SO的[这个答案。](https://stackoverflow.com/questions/8644707/can-i-declare-variables-of-different-types-in-the-initialization-of-a-for-loop?rq=1)您可以使用内联声明的未命名结构来代替多个变量：

```
for (struct { int i; iterator it; } d = { 0, pa.begin() }; d.it != a.end(); ++d.i, ++d.it )
    std::cout << "a[" << d.i << "]=" << *d.it << std::endl; 
```

它有点冗长（所以我想知道你用额外的行保存的东西是否被重新支付）但是你清楚你的意图并且你保持代码可读（而且你可以用它来*打包* **任何数字和任何类型**的变量） .

# scala - Scalamock Proxymock，是一个“没想到”可能实现

> ID：11329316
> 
> 赞同：0
> 
> 时间：2012-07-04T12:40:29.977
> 
> 标签：scala, mocking

我有一堂课，我在其中传递了一个模拟服务。此类具有缓存，因此如果我两次运行该方法，我希望在第一次运行时在服务上调用的函数不会在第二次运行时被调用。有没有一种测试方法，即

```
mock expects 'function never 
```

或者

```
mock not expects 'function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:34:41.540

没有注意到 never 或 once 是函数，因此任何直接跟随的代码都被视为参数，因此请留空行，使用 ;，或设置空参数

例如：

```
mock expects 'function never() 
```

或者，

```
mock expects 'function withArgs(arg1, arg2) returns true once() 
```

# eclipse - 将 eclypse 插件安装到 flash builder 4.6

> ID：11329320
> 
> 赞同：0
> 
> 时间：2012-07-04T12:40:42.777
> 
> 标签：eclipse, flash, eclipse-plugin, flash-builder

我正在运行 Flash builder 的独立版本。我想要做的是在其中安装一个 Eclipse 插件。这是可能的还是只有当我将 flash builder 作为 eclipse 插件安装时才有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:50:49.540

是的，您绝对可以在 Flash Builder 4.6 中安装 eclipse 插件。下载系统的工作方式与 Eclipse Indigo 完全一样（我相信 Builder 是基于它构建的）。这意味着您可以安装新软件并访问各种市场以下载软件。一切都与“常规” Eclipse 安装完全一样（包括烦人的依赖消息，因为 Builder 不是完整的 Eclipse 实现！）。

不过，它确实有效。

# workflow-foundation - 用代码表达的非常简单的 WF 工作流

> ID：11329322
> 
> 赞同：1
> 
> 时间：2012-07-04T12:40:55.300
> 
> 标签：workflow-foundation

这个问题实际上只是为了帮助我理解 Windows Workflow Foundation (WF)，以及我将如何使用设计器在 XAML 中创建的工作流与我在代码中理论上可以做的事情进行比较（我是一名程序员！）。

这里是：

```
using System;
using System.Activities;
using System.Activities.Statements;

namespace WorkflowConsoleApplication1
{
    public class CodeDefinedWorkflow : Activity
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Invoking the workflow now");
            WorkflowInvoker.Invoke(new CodeDefinedWorkflow());
        }

        public CodeDefinedWorkflow()
        {
            Sequence s = new Sequence
            {
                Activities = {
                                new WriteLine {Text = "Hello"},
                                new Sequence 
                                {
                                    Activities =
                                    {
                                        new WriteLine {Text = "Workflow"},
                                        new WriteLine {Text = "World"}
                                    }
                                }
                             }
            };
        }
    }
} 
```

我希望`WriteLine`活动将文本写入控制台（默认设置？）。

我一定错过了一些添加根`Sequence`活动的方法。我还尝试将其设为属性并尝试找到某种初始化组件的方法。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:24:13.593

好的，我找到了答案！

删除构造函数的内容 - 并且有一个要覆盖的属性：

```
 protected override Func<Activity> Implementation
    {
        get
        {
            return () =>
                {
                    Sequence s = new Sequence
                        {
                            Activities = {
                                        new WriteLine {Text = "Hello"},
                                        new Sequence 
                                        {
                                            Activities =
                                            {
                                                new WriteLine {Text = "Workflow"},
                                                new WriteLine {Text = "World"}
                                            }
                                        }
                                     }
                        };
                    return s;
                };

        }
        set
        {
            base.Implementation = value;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T19:03:55.023

或者将构造函数中创建的对象赋值给 base.Implementation 属性。

# php - Laravel - 使用 postgre bytea blob 字段

> ID：11329323
> 
> 赞同：5
> 
> 时间：2012-07-04T12:40:56.183
> 
> 标签：php, postgresql-9.1, laravel

我在 Laravel 安装中使用 PostgreSQL。表有一个字节类型字段，用于存储二进制数据（base64_encoded 文件内容）。

当我使用 Eloquent 检索表时，我会在此字段中返回一个资源类型变量。

我怎样才能将其作为字符串检索？

```
$raw = Media::where('id','=',$id)->first();
$raw->file_data = base64_decode($raw->file_data);   // doesn't work 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-03T12:30:54.097

由于该问题的作者没有将详细信息发布到答案中，因此我将在此处发布我的发现。

由于返回的字段是流的句柄，您可以使用[stream_get_contents](http://php.net/manual/en/function.stream-get-contents.php)函数将值读入字符串，然后可以使用 pg_unescape_bytea 获取 bytea 数据的实际值。最后，如果您希望以 HTML 格式显示 bytea 数据，请使用 htmlspecialchars 函数。

示例代码：

```
$my_bytea = stream_get_contents($resource);
$my_string = pg_unescape_bytea($my_bytea);
$html_data = htmlspecialchars($my_string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:47:37.060

答案是在流上使用 stream_get_contents。呃。

# sql - SQL 从桥表中获取包含两行的行

> ID：11329324
> 
> 赞同：1
> 
> 时间：2012-07-04T12:40:57.693
> 
> 标签：sql, postgresql

这个标题的措辞大概很糟糕。我有一些 PostgreSQL 表。有一个桥表，它也保存额外的数据，所以严格来说不是桥，但也以这种方式运行。它是这样的：

```
player_game
===========
player_game_id PK
player_id FK -> player
game_id FK -> game
other stuff. 
```

我想编译一个包含我选择的两个玩家的所有此类 game_id 的列表。

例如，我可以找到玩家 1234 与玩家 9876 一起玩的游戏。

一场比赛可以有 2 到 10 名玩家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:46:59.443

```
select pg1.game_id from player_game pg1
inner join player_game pg2 on pg1.game_id = pg2.game_id
where pg1.player_id = 1234
and pg2.player_id = 9876
group by pg1.game_id -- or : AND  pg1.player_game_id < pg2.player_game_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:50:35.433

您需要使用别名将表连接到自身。（对于两个表），然后根据需要指定两个 id

```
 select *
 from player_game as A
 inner join player_game as B on A.game_id = B.game_id
 where A.player_id = '' and B.player_id = '' 
```

# java - Activity 类型的 loadUrl(String) 方法未定义

> ID：11329325
> 
> 赞同：1
> 
> 时间：2012-07-04T12:40:59.493
> 
> 标签：java, android, eclipse, cordova

我正在使用PhoneGap。并阅读并创作了我的作品。

[http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

我在 MyworkActivity.java 中添加了这一行：

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

但是当作为我的项目运行时，得到这个错误：

```
The method loadUrl(String) is undefined for the type Activity 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T12:52:40.437

当你使用`PhoneGap`时，你的类被扩展了`DroidGap`而不是`Activity`，所以请检查你可能已经扩展了你的类`Activity`。

# ruby-on-rails - 如何为数据库中的合同记录制作 Rails 3.2 树视图

> ID：11329327
> 
> 赞同：0
> 
> 时间：2012-07-04T12:41:06.963
> 
> 标签：ruby-on-rails, treeview, gem, ruby-on-rails-3.2

rails中的treeview是否有gem或函数来显示不同的数据库表？我有桌子。Contracten，contractoorten，contractopmerkingen。（荷兰语）

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:01:05.073

我会使用 JavaScript UI 框架为您处理它...查看 Kendo UI...我相信它具有内置的树视图。

# java - Oracle 连接关闭

> ID：11329336
> 
> 赞同：0
> 
> 时间：2012-07-04T12:41:21.160
> 
> 标签：java, jdbc, oracle11g

我正面临一个非常奇怪的行为。我的 java 应用程序成功地创建了一个针对 Oracle db 的连接 (java.sql.Connection)。当我尝试执行一条语句时，我得到了：

java.sql.SQLRecoverableException：连接已关闭

例外。这是应用程序创建连接的方式（就像过去一样）：

```
conn = DriverManager.getConnection(
        "jdbc:oracle:thin:@localhost:1521:orcl", "usr", "pwd"); 
```

自从程序退出之前（在 finally 块中，正如老师告诉我们的那样），连接从未关闭（几乎是故意的）。如果我使用这种方法获取连接，

```
protected Connection getConn() throws Exception {
if(conn == null || conn.isClosed()) {
    conn = DriverManager.getConnection(
        "jdbc:oracle:thin:@localhost:1521:orcl", "usr", "pwd");
}
return conn;
} 
```

一切正常。当我获得连接时，该方法会验证它是否已关闭并重新创建一个新连接。我不知道发生了什么。为什么连接关闭？TIA。

弗朗切斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:47:04.180

我认为您编写的代码不是一个好主意。我会做更多这样的事情：

```
package persistence;

import java.sql.*;
import java.util.*;

/**
 * util.DatabaseUtils
 * User: Michael
 * Date: Aug 17, 2010
 * Time: 7:58:02 PM
 */
public class DatabaseUtils {
    private static final String DEFAULT_DRIVER = "oracle.jdbc.driver.OracleDriver";
    private static final String DEFAULT_URL = "jdbc:oracle:thin:@host:1521:database";
    private static final String DEFAULT_USERNAME = "username";
    private static final String DEFAULT_PASSWORD = "password";
/*
    private static final String DEFAULT_DRIVER = "org.postgresql.Driver";
    private static final String DEFAULT_URL = "jdbc:postgresql://localhost:5432/party";
    private static final String DEFAULT_USERNAME = "pgsuper";
    private static final String DEFAULT_PASSWORD = "pgsuper";
*/
/*
    private static final String DEFAULT_DRIVER = "com.mysql.jdbc.Driver";
    private static final String DEFAULT_URL = "jdbc:mysql://localhost:3306/party";
    private static final String DEFAULT_USERNAME = "party";
    private static final String DEFAULT_PASSWORD = "party";
*/

    public static void main(String[] args) {
        long begTime = System.currentTimeMillis();

        String driver = ((args.length > 0) ? args[0] : DEFAULT_DRIVER);
        String url = ((args.length > 1) ? args[1] : DEFAULT_URL);
        String username = ((args.length > 2) ? args[2] : DEFAULT_USERNAME);
        String password = ((args.length > 3) ? args[3] : DEFAULT_PASSWORD);

        Connection connection = null;

        try {
            connection = createConnection(driver, url, username, password);
            DatabaseMetaData meta = connection.getMetaData();
            System.out.println(meta.getDatabaseProductName());
            System.out.println(meta.getDatabaseProductVersion());

            String sqlQuery = "SELECT PERSON_ID, FIRST_NAME, LAST_NAME FROM PERSON ORDER BY LAST_NAME";
            System.out.println("before insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));

            connection.setAutoCommit(false);
            String sqlUpdate = "INSERT INTO PERSON(FIRST_NAME, LAST_NAME) VALUES(?,?)";
            List parameters = Arrays.asList("Foo", "Bar");
            int numRowsUpdated = update(connection, sqlUpdate, parameters);
            connection.commit();

            System.out.println("# rows inserted: " + numRowsUpdated);
            System.out.println("after insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));
        } catch (Exception e) {
            rollback(connection);
            e.printStackTrace();
        } finally {
            close(connection);
            long endTime = System.currentTimeMillis();
            System.out.println("wall time: " + (endTime - begTime) + " ms");
        }
    }

    public static Connection createConnection(String driver, String url, String username, String password) throws ClassNotFoundException, SQLException {
        Class.forName(driver);
        if ((username == null) || (password == null) || (username.trim().length() == 0) || (password.trim().length() == 0)) {
            return DriverManager.getConnection(url);
        } else {
            return DriverManager.getConnection(url, username, password);
        }
    }

    public static void close(Connection connection) {
        try {
            if (connection != null) {
                connection.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(Statement st) {
        try {
            if (st != null) {
                st.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void rollback(Connection connection) {
        try {
            if (connection != null) {
                connection.rollback();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static List<Map<String, Object>> map(ResultSet rs) throws SQLException {
        List<Map<String, Object>> results = new ArrayList<Map<String, Object>>();
        try {
            if (rs != null) {
                ResultSetMetaData meta = rs.getMetaData();
                int numColumns = meta.getColumnCount();
                while (rs.next()) {
                    Map<String, Object> row = new HashMap<String, Object>();
                    for (int i = 1; i <= numColumns; ++i) {
                        String name = meta.getColumnName(i);
                        Object value = rs.getObject(i);
                        row.put(name, value);
                    }
                    results.add(row);
                }
            }
        } finally {
            close(rs);
        }
        return results;
    }

    public static List<Map<String, Object>> query(Connection connection, String sql, List<Object> parameters) throws SQLException {
        List<Map<String, Object>> results = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            rs = ps.executeQuery();
            results = map(rs);
        } finally {
            close(rs);
            close(ps);
        }
        return results;
    }

    public static int update(Connection connection, String sql, List<Object> parameters) throws SQLException {
        int numRowsUpdated = 0;
        PreparedStatement ps = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            numRowsUpdated = ps.executeUpdate();
        } finally {
            close(ps);
        }
        return numRowsUpdated;
    }
} 
```

# visual-studio-2010 - 如何在VS2010中删除.cs文件中的所有注释？

> ID：11329337
> 
> 赞同：3
> 
> 时间：2012-07-04T12:41:24.123
> 
> 标签：visual-studio-2010

VS2010是否有任何插件可以删除.cs文件中的所有注释，包括“///摘要”和“//”？

我不想手动 foreach .cs 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:47:33.420

如果你想要它，你就会得到它。首先阅读此[http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx) 您确实需要匹配到行尾的表达式。

并将其替换为`' '`or 等​​。然后按照本手册[http://geekswithblogs.net/MarkPearl/archive/2011/04/12/vs2010-multiline-find-amp-replace.aspx](http://geekswithblogs.net/MarkPearl/archive/2011/04/12/vs2010-multiline-find-amp-replace.aspx) 并全部替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:59:17.290

我会仅次于费诺。您可以录制宏，例如搜索注释“//”，然后删除该行 (Ctrl+L)。编辑宏以将其置于循环中。然后为每个文件运行这个宏。

如果您可以花更多时间编写宏，则可以循环浏览 Projects 和 ProjectItems。所以这将从整个解决方案中删除注释行。为此，您可以了解有关[EnvDTE](http://msdn.microsoft.com/en-us/library/envdte%28v=vs.100%29.aspx)的更多信息。

# php - 如何构造嵌套关联数组

> ID：11329338
> 
> 赞同：2
> 
> 时间：2012-07-04T12:41:25.327
> 
> 标签：php

我正在尝试构建一个深度嵌套的关联数组，但我不知道构建一个关联数组的规则是什么。我有这个理论数组：

```
-one
-two
-three
-four
    -one
    -two
    -three
    -four
-five
-six
-seven
-eight
-nine
    -one
    -two            
    -three 
            -one
            -two
            -three
            -four
            -five
            -six 
```

我尝试将其表示为 php 关联数组；

```
$associative = array(
'one' => 'one-1',
'two' => 'two-2',
'three' => 'three-3',
'four' => 'four-4'
(
    'one' => 'one-four-1',
    'two' => 'two-four-2',
    'three' => 'three-four-3',
    'four' => 'four-four-4'
)
'five' => 'five-5',
'six' => 'six-6',
'seven' => 'seven-7',
'eight' => 'eight-8',
'nine' => 'nine-9'
(
    'one' => 'one-nine-1',
    'two' => 'two-nine-2',          
    'three' => 'three-nine-3' 
(   
        'one' => 'one-nine-three-1',
        'two' => 'two-nine-three-2',
        'three' => 'three-nine-three-3',
        'four' => 'four-nine-three-4',
        'five' => 'five-nine-three-5',
        'six' => 'six-nine-three-6'
))
);
$keys = array_values($associative);
echo $keys[0]; 
```

当我尝试执行 php 片段时，我收到此错误；

> 解析错误：语法错误，第 7 行 C:\wamp\www\array.php 中出现意外的 '('，期待 ')'

所以我的问题是，编写这样一个数组的正确方法是什么，当我希望添加更多孩子时应该遵循什么规则？

注意：在我的理论数组中，四个有四个孩子，九个有三个孩子，三个有六个孩子。无论如何，我希望在我的虚拟数组中理解生孩子的想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T12:44:07.723

子数组是顶级数组元素的实际值，您还必须使用[array()](http://php.net/manual/en/function.array.php)来初始化它们：

```
$associative = array(
    'one' => 'one-1',
    'two' => 'two-2',
    'three' => 'three-3',
    'four' => array(
        'one' => 'one-four-1',
        'two' => 'two-four-2',
        'three' => 'three-four-3',
        'four' => 'four-four-4'
    ),
    'five' => 'five-5',
    'six' => 'six-6',
    'seven' => 'seven-7',
    'eight' => 'eight-8',
    'nine' => array(
        'one' => 'one-nine-1',
        'two' => 'two-nine-2',          
        'three' => array(   
            'one' => 'one-nine-three-1',
            'two' => 'two-nine-three-2',
            'three' => 'three-nine-three-3',
            'four' => 'four-nine-three-4',
            'five' => 'five-nine-three-5',
            'six' => 'six-nine-three-6'
        ),
    ),
); 
```

请注意，我还在`,`每次关闭之后添加了 s `)`，因为就像我说的，数组是父数组元素的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:47:56.773

```
$associative = array(
  'one' => 'one-1',
  'two' => 'two-2',
 'three' => 'three-3',
 'four' => array(
   'one' => 'one-four-1',
    'two' => 'two-four-2',
    'three' => 'three-four-3',
   'four' => 'four-four-4'
 ),
  'five' => 'five-5',
  'six' => 'six-6',
  'seven' => 'seven-7',
  'eight' => 'eight-8',
  'nine' => array(
    'one' => 'one-nine-1',
    'two' => 'two-nine-2',          
    'three' => array(
        'one' => 'one-nine-three-1',
        'two' => 'two-nine-three-2',
        'three' => 'three-nine-three-3',
        'four' => 'four-nine-three-4',
        'five' => 'five-nine-three-5',
        'six' => 'six-nine-three-6'
    )
  )
);
print_r($associative); 
```

# ios - 如何构建 FFMPEG 并将其链接到 iOS？

> ID：11329346
> 
> 赞同：4
> 
> 时间：2012-07-04T12:42:13.473
> 
> 标签：ios, ffmpeg

全部！

我知道，这里有很多关于 iOS 上的 FFMPEG 的问题，但没有一个答案适合我的情况：( 当我试图在我的项目中链接 FFMPEG 时，每种情况都会发生一些奇怪的事情，所以请帮助我！

我的任务是为 iOS 编写视频聊天应用程序，它使用 RTMP 协议向自定义 Flash Media Server 发布和读取视频流。

我决定使用 rtmplib，免费的开源库，用于通过 RTMP 流式传输 FLV 视频，因为它是唯一合适的库。

当我开始研究它时出现了很多问题，但后来我明白了它应该如何工作。

现在我可以在我的应用程序的帮助下读取 FLV 视频的实时流（来自 url）并将其发送回频道。

我现在的麻烦是从相机发送视频。据我了解，基本操作顺序应该如下：

1.  使用 AVFoundation，在序列 (Device-AVCaptureSession-AVVideoDataOutput-> AVAssetWriter) 的帮助下，我将其写入文件（如果需要，我可以更详细地描述此流程，但在问题的上下文中并不重要）。此流程对于将来自摄像机的实时视频进行硬件加速转换为 H.264 编解码器是必需的。但它是 MOV 容器格式。（这是完成的步骤）

2.  我读取了每个写入样本的临时文件，并获得了视频数据字节流（H.264 编码，在 QuickTime 容器中）。（这是已经完成的步骤）

3.  我需要将视频数据从 QuickTime 容器格式转换为 FLV。这一切都是实时的。（包 - 包 - 包）

4.  如果我将拥有包含在 FLV 容器格式中的视频数据包，我将能够使用 rtmplib 通过 RTMP 发送数据包。

现在，对我来说最复杂的部分是第 3 步。

我想，我需要使用 ffmpeg lib 来进行这种转换（libavformat）。我什至找到了源代码，展示了如何从 MOV 文件中解码 h.264 数据包（查看 libavformat，我发现甚至可以从字节流中提取这些数据包，这更适合我）。完成此操作后，我将需要将数据包编码为 FLV（使用 ffmpeg 或手动，以将 FLV 标头添加到 h.264 数据包的方式，这不是问题而且很容易，如果我是正确的）。

FFMPEG 有很好的文档和非常强大的库，我认为使用它不会有问题。但这里的问题是我无法让它在 iOS 项目中工作。

我花了 3 天时间阅读文档、stackoverflow 并在谷歌上搜索“如何为 iOS 构建 FFMPEG”这个问题的答案，我认为，如果我再花一周时间尝试编译这个库，我的 PM 会解雇我的：））

我尝试使用许多不同的构建脚本和配置文件，但是当我构建 FFMPEG 时，我得到了 x86 架构的 libavformat、libavcodec 等（即使我在构建脚本中指定了 armv6 架构）。（我使用“lipo -info libavcodec.a”来展示架构）

所以我无法构建这个源，并决定找到预构建的 FFMPEG，即为架构 armv7、armv6、i386 构建的。

我从 github 的 MidnightCoders 下载了 iOS Comm Lib，它包含使用 FFMPEG 的示例，它包含 avcodec、avformat 和另一个 FFMPEG 库的预构建 .a 文件。

我检查了他们的架构：

```
iMac-2:MediaLibiOS root# lipo -info libavformat.a
Architectures in the fat file: libavformat.a are: armv6 armv7 i386 
```

我发现它适合我！当我尝试将这个库和头文件添加到 xCode 项目时，它编译得很好（我什至没有像“库是为另一个架构编译的”这样的警告），我可以使用头文件中的结构，但是当我试图调用 C - 来自 libavformat (av_register_all()) 的函数，编译器向我显示错误消息“未找到架构 armv7 的符号：av_register_all”。

我想，也许 lib 中没有符号，并试图显示它们：

```
root# nm -arch armv6 libavformat.a | grep av_register_all
00000000 T _av_register_all 
```

现在我卡在这里，我不明白，为什么xCode看不到这个符号，并且无法前进。

如果我对从 iOS 发布 RTMP 流的流程理解有误，请纠正我，并帮助我为 iOS 构建和链接 FFMPEG。

我有 iPhone 5.1。SDK 和 xCode 4.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-30T13:01:13.407

我想为这个问题写一个答案，即使它很旧，因为没有公认的答案。

根据问题中给出的解释，我假设他能够准确地编译 FFmpeg 的源代码。如果有人害怕这样做，你可以从[这里](http://sourceforge.net/projects/ffmpeg-ios/files/ffmpeg-ios-master.tar.bz2/download?use_mirror=liquidtelecom)下载已经编译好的版本。

无论如何，我相信错误原因是因为没有在**PROJECT**的**Build Settings中提供*****Header Search Paths***。

 ****您可以做的是，将您的 Xcode 项目路径添加到 Header Search Paths 键并将其设置为递归。

而且我相信您必须链接下面提到的所有三个库，而不仅仅是前两个。

*   libz.dylib
*   libbz2.dylib
*   libiconv.dylib

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:10:36.137

要为 iOS SDK 5.1 编译 FFMpeg，

使用 XCode 的 AppStore 版本（更改脚本路径），[您可以使用此脚本](http://libav-users.943685.n4.nabble.com/How-to-compile-FFmpeg-for-the-IOS-5-1-td4655114.html)。

它对我有用。还要确保将这些“链接二进制文件与库”添加到您的项目中：

1.  libz.dylib
2.  libbz2.dylib

我还试图在写入时从 .mov 文件中获取 h.264 字节流，所以我很高兴在步骤 (2) 中提供任何提示，谢谢:)****

# ruby-on-rails-3 - Rails 3 f.select不显示当前值

> ID：11329350
> 
> 赞同：3
> 
> 时间：2012-07-04T12:42:32.180
> 
> 标签：ruby-on-rails-3

我有以下内容：

```
<%= f.select :phase_names, options_for_select(["RFP Stage", "Pre Contract", "Awarded", "Unsuccessful", "Completed"]), :class => 'inputboxes' %> 
```

它将它存储在数据库中，但在编辑视图中它不显示存储的值。我该如何展示它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T12:48:11.237

这个：

```
options_for_select(your_array_list, your_selected_value) 
```

# javascript - 单击事件未通过动态创建按钮触发

> ID：11329351
> 
> 赞同：0
> 
> 时间：2012-07-04T12:42:37.047
> 
> 标签：javascript, jquery

我在 div 中动态创建了按钮。并绑定按钮的点击和其他事件。但问题是，单击事件仅针对第一次单击的按钮触发。其他绑定事件也会发生同样的情况。示例代码是

```
 $('#divButtons input[type=button]').each(function () {
     $(this).bind('mouseover', function (e) {
         // some work
     }).bind('mouseout', function (e) {
         // some work
     }).bind('click', function (e) {
         // some work
     });
 }); 
```

绑定它时效果很好`document.ready()`但在我的情况下，按钮是在 DOM 准备好之后创建的。

我也想知道为什么它会这样......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:45:32.880

如果使用 jQuery 1.7+，请使用 on()，并且真的不需要 each()：

```
$(document).on({
    mouseover: function(e) {
            // some work
    },
    mouseout: function(e) {
           // some work
    },
    click: function(e) {
           // some work
    }
}, '#divButtons input[type=button]'); 
```

用最近的非动态元素替换委托事件处理程序的文档。

# android - 在 Edittext 内单击时选项卡向上移动

> ID：11329356
> 
> 赞同：0
> 
> 时间：2012-07-04T12:43:02.230
> 
> 标签：android, tabs

在屏幕上，我在页面底部有一个 EditText 和 2 个选项卡，当我在 EditText 内部单击时，这些选项卡会随着软键盘的打开而向上移动。如何将选项卡固定到屏幕底部，以便在打开软键盘时它们不会向上移动。提前致谢..！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:46:00.000

在应用程序的清单文件中，在当前的 Activity 标记中放置

```
android:windowSoftInputMode="adjustPan" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:50:06.190

只是把这个消息

**android:windowSoftInputMode="adjustPan"**

在您的活动清单文件中。

# r - 如何在 R 中将评级或分类数据制成表格？

> ID：11329357
> 
> 赞同：0
> 
> 时间：2012-07-04T12:43:16.043
> 
> 标签：r, crosstab, tabular

我有一项调查的数据。我有来自几个李克特类型问题的数据。例如：“以下因素在多大程度上促成了您决定攻读博士学位课程？” 有 4 类： 1：完全没有；2：少量；3：在一定程度上；4：很大程度上）

我导出了数据，它目前看起来像这样：

```
id  Q1_Item1  Q1_Item2  Q1_Item3  Q1_Item4
 1         4         4         4         2
 2         1         2         3         4
 3         3         4         4         4
 4         3         3         3         3
 5         2         1         1         1 
```

我想将数据制成表格，看起来像这样

```
 Not at all  To a small extent  To some extent  To a great extent 
Item1          1                  1               2                  1
Item2          1                  1               1                  2
Item3          1                  0               2                  2
Item4          1                  1               1                  2 
```

现在的数字代表每个类别下的响应计数。我怎样才能在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:57:40.560

假设这些已作为因素被读入，这些文本条目作为标签，那么这有效：

```
# If the data was read in as numeric, then this will convert to factor-class
dfrm[-1] <- lapply(dfrm[-1], factor, levels=1:4, labels=c("Not at all", 
                        "To a small extent", "To some extent", "To a great extent") )
t( sapply(dfrm[-1], table) )
        Not at all To a small extent To some extent To a great extent
factor1          2                 1              4                 3
factor2          0                 0              3                 8
factor3          0                 0              3                 9
factor4          0                 0              6                 6
factor5          0                 0              3                 8
factor6          2                 0              0                10
factor7          0                 0              2                10 
```

# javascript - 使用 gzip 压缩的意外令牌非法

> ID：11329358
> 
> 赞同：3
> 
> 时间：2012-07-04T12:43:16.827
> 
> 标签：javascript, compression, gzip, runtime-error, deflate

我在我的网站上遇到 gzip 压缩问题。我已经将几个 javascript 文件合并到一个文件中，并且它们可以在没有压缩的情况下正常工作。之后我将它们压缩（gzip）并尝试再次运行该站点，但出现以下错误：

> Uncaught SyntaxError: Unexpected token ILLEGAL

我已经使用几种方法压缩了文件，一种使用 gzip 软件，我还尝试了其他 gzip 在线压缩工具[，比如这个](http://www.refresh-sf.com/yui/)。

我不明白为什么我会收到这个错误，为什么它不起作用，因为非压缩版本确实有效。我在最新版本的 Chrome 上运行该网站。

它还告诉我错误在第 1 行

> all_js.js.gz:1

当然，压缩后的代码有很多行，而不仅仅是一行。

我已经阅读了一些答案，但没有关于 gzip 压缩的内容。

在本地计算机上使用 Visual Studio (ASP.NET) 时出现此错误。

我尝试使用“application/x-gzip”标头从 S3 提供文件，但它仍然无法正常工作。我想在压缩后通过 CDN 提供我的文件，所以我不搜索服务器压缩解决方案。

* * *

## 回答 #1

> 赞同：-8
> 
> 时间：2012-07-04T12:48:01.280

您不能使用 gzip 或任何其他 zip 例程压缩 javascript 文件并将其加载到您的网页中。

您可以执行以下两项操作之一：

*   使用像[YUI 压缩](http://developer.yahoo.com/yui/compressor/)器这样的 javascript 代码压缩工具。
*   配置您的网络服务器以压缩文件（请阅读您的网络服务器的文档，应该不是很困难）

# android - 操作栏、选项卡、片段和导航

> ID：11329360
> 
> 赞同：1
> 
> 时间：2012-07-04T12:43:18.087
> 
> 标签：android, navigation, android-fragments, android-actionbar, android-ui

我想知道是否有人有连接`ActionBar`with`Tabs`和`Fragments`祖先导航（即向下钻取）的经验？我已经设法将应用程序图标放在一起`ActionBar`并将`Tabs`其`Fragments`用作“向上”按钮......但唯一的导航方式`Fragments`似乎是为每个选项卡实现我自己的后台堆栈并使用`FragmentManager`pop 和 add `Fragments`。

我真正想知道的是——这是最好的方法还是有更好的/设计模式可以遵循？

谢谢！

# jquery - 如何在 jquery 数据表中使表行不可点击？

> ID：11329362
> 
> 赞同：0
> 
> 时间：2012-07-04T12:43:25.093
> 
> 标签：jquery, datatables

我正在使用 jQuery Datatables 列出用户，并使用 selectable 属性来选择和取消选择行。现在我有一个问题，我想让一行不可点击（即登录用户的行）......我该怎么做......任何帮助将不胜感激

```
$('#example tr').click( function() { 

} 
```

如何为特定行禁用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:48:50.570

像这样的东西？（添加`class="trDisable"`到没有点击功能的行）

```
$('#example tr').not("#example tr.trDisable").click( function() 
```

或者

```
$('#example tr.trDisable').click( function(e) {
    e.stopPropagation()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:52:34.940

我想到了两种方法

1 each() 用法

```
$('#example tr').each(function(i) {
    if ( i === 2 ) {//this will select third tr
      $(this).off();
    }
}); 
```

2 eq() 用法 //我不确定这适用于表，也许 index() 会

```
var disabledRow = $('#example tr').eq(2);//this will deactive third row
if ( contition ) {
  disabledRow.off();
} 
```

你可以阅读这些问题，它们应该会有所帮助

[jquery禁用点击直到动画完全完成](https://stackoverflow.com/questions/11283341/jquery-disable-click-until-animation-is-fully-complete)

[如何用单击的对象的父对象定义条件？](https://stackoverflow.com/questions/11278326/how-to-define-condition-with-clicked-objets-parent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T08:54:27.763

我知道这是一个旧线程，但可能会帮助某人..

```
 $('#example').on('click', 'tbody tr', function () {
            var table = $('#example').DataTable();

            // Check if any rows are selected
            if (table.row(this, { selected: true }).any()) {
                // if condition here, if not valid
                if (!condition) table.row(this).deselect();
            }
        }); 
```

# facebook - 使用 HTTPS 时 Facebook 身份验证弹出窗口未关闭

> ID：11329364
> 
> 赞同：1
> 
> 时间：2012-07-04T12:43:42.127
> 
> 标签：facebook, authentication, https

我有一个 Facebook 应用程序，它指向一个 Flash 应用程序，并且我正在使用 Facebook 登录。当我通过 HTTP 访问 Facebook 应用程序时，我看到身份验证弹出窗口正在打开/消失，并且我已通过身份验证。但是，如果我通过 HTTPS 访问 Facebook 应用程序，Facebook auth 弹出窗口会打开，我已通过身份验证，但弹出窗口不会自行关闭。使用 HTTPS 时，这可能是某种 Facebook 错误吗？

提前致谢！

# cocoa-touch - 如何使用外观代理正确更改 UITabBar 的显示方式？

> ID：11329366
> 
> 赞同：0
> 
> 时间：2012-07-04T12:43:52.020
> 
> 标签：cocoa-touch, ios5, uitabbar, uitabbaritem, ios6

由于我正在开发 iOS >= 5.0 应用程序，因此我试图通过外观代理更改主要 UI 组件的外观。

在处理`UITabBar`组件时，我`tintColor`通过该方法正确地将其更改为浅灰色`[[UITabBar appearance] setTintColor:]`。但是这样做，`UITabBarItem`包含在栏中的 s 是完全不可能看到的，因为它们在其标题标签中保留了旧的灰色/白色。

我试图通过`[UITabBarItem appearance]`代理改变它们的外观，但没有办法让它们可见。

谁能建议我解决这个问题的方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:56:01.840

嗨，这将适用于您想做的事情

```
// Customize the UIBarButtonItem
    UIImage *button30 = [[UIImage imageNamed:@"button_textured_30"] 
                         resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
    UIImage *button24 = [[UIImage imageNamed:@"button_textured_24"] 
                         resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];

    [[UITabBarItem appearance] setBackgroundImage:button30 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UITabBarItem appearance] setBackgroundImage:button24 forState:UIControlStateNormal barMetrics:UIBarMetricsLandscapePhone];

    [[UITabBarItem appearance] setTitleTextAttributes:
      [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor colorWithRed:82.0/255.0 
                      green:82.0/255.0
                       blue:82.0/255.0
                      alpha:1.0],                     UITextAttributeTextColor,
      [UIColor colorWithRed:242.0 
                      green:237.0 
                       blue:237.0 
                      alpha:1.0],                     UITextAttributeTextShadowColor,
      [NSValue valueWithUIOffset:UIOffsetMake(0,1)],  UITextAttributeTextShadowOffset,
      [UIFont fontWithName:@"Helvetica" size:0.0],    UITextAttributeFont,nil]
                                         forState:UIControlStateNormal]; 
```

快乐编码:)

# php - wordpress 菜单中的自定义活动菜单项

> ID：11329378
> 
> 赞同：2
> 
> 时间：2012-07-04T12:44:39.483
> 
> 标签：php, wordpress

我有一个使用 wp_nav_menu() 来构建菜单的 wordpress 主题。我在这个菜单中有一个自定义菜单项，它转到一个非标准的 wordpress 页面。有没有办法可以根据 url 字符串中的匹配有条件地将此导航项设置为当前？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:22:13.857

您可以使用 Wordpress 中的 nav_menu_css_class 来实现您想要的结果。使用此钩子，您可以更改可应用于菜单的 CSS 类数组。

```
add_filter( 'nav_menu_css_class', 'add_parent_url_menu_class', 10, 2 );

function add_parent_url_menu_class( $classes = array(), $item = false ) {
    // Get current URL
    $current_url = current_url();
    // Get homepage URL
    $homepage_url = trailingslashit( get_bloginfo( 'url' ) );
    // Exclude 404 and homepage
    if( is_404() or $item->url == $homepage_url ) return $classes;
        if ( strstr( $current_url, $item->url) ) {
            // Add the 'parent_url' class
            $classes[] = 'parent_url';
        }
    return $classes;
}

function current_url() {
    // Protocol
    $url = ( 'on' == $_SERVER['HTTPS'] ) ? 'https://' : 'http://';
    $url .= $_SERVER['SERVER_NAME'];
    // Port
    $url .= ( '80' == $_SERVER['SERVER_PORT'] ) ? '' : ':' . $_SERVER['SERVER_PORT'];
    $url .= $_SERVER['REQUEST_URI'];

    return trailingslashit( $url );
} 
```

此方法将忽略 404 页面或站点的根目录，但如果当前 URL 与菜单项 URL 匹配，则会将类添加到菜单项。

此代码的全部功劳：[http ://www.rarescosma.com/2010/11/add-a-class-to-wp_nav_menu-items-with-urls-included-in-the-current-url/](http://www.rarescosma.com/2010/11/add-a-class-to-wp_nav_menu-items-with-urls-included-in-the-current-url/)

# java - 使用 java ssl 套接字时我是否也需要加密流？

> ID：11329379
> 
> 赞同：4
> 
> 时间：2012-07-04T12:44:46.083
> 
> 标签：java, sockets, encryption, ssl

我目前正在为客户开发基于客户端/服务器的 Java 程序。我用谷歌搜索了一下，得到了使用套接字的结果，还得到了一些关于 SSL 套接字的线程。

我是否也必须使用 SSL 套接字加密流，或者与 SSL 套接字的连接非常安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:46:17.327

SSL 套接字已经被加密。无需手动加密流。

# android - 标题栏自定义问题

> ID：11329381
> 
> 赞同：0
> 
> 时间：2012-07-04T12:44:52.367
> 
> 标签：android, android-titlebar

我创建了一个自定义标题。支持的xml是

```
 <?xml version="1.0" encoding="UTF-8"?>
  <resources> 
    <style name="CustomWindowTitleBackground" /> 
    <style name="CustomTheme" parent="android:Theme"> 
     <item name="android:windowTitleSize">50dp</item>
     <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground
     </item>
    </style> 
 </resources> 
```

自定义标题.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<gradient
    android:angle="90"
    android:endColor="@color/grey7"
    android:startColor="@color/black" />

<corners
    android:bottomLeftRadius="12dp"
    android:bottomRightRadius="12dp"
    android:topLeftRadius="12dp"
    android:topRightRadius="12dp" >
</corners>

</shape> 
```

生成的标题栏应从四个角圆角，但仅在左上角和右上角圆角。如何让它在所有角落都变圆？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T10:58:37.903

您可以使用 android:background 来控制圆形效果：例如：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="270"
        android:startColor="@color/bar_more_main_start"
        android:endColor="@color/bar_more_main_end" />

    <corners
        android:bottomLeftRadius="6dip"
        android:bottomRightRadius="6dip"
        android:topLeftRadius="6dip"
        android:topRightRadius="6dip" />

</shape> 
```

# actionscript-3 - 影片剪辑类参数 ane null

> ID：11329383
> 
> 赞同：-1
> 
> 时间：2012-07-04T12:44:59.120
> 
> 标签：actionscript-3, class, parameters

我有一个附加了外部类的影片剪辑。这是 MC 代码（我只为相关部分缩短了它......）

```
package  {

    //all the imports here...

    public class mc_masterChapter extends MovieClip {

        public function mc_masterChapter() {
            trace (picFile,strChapTitle);
        }

        //Properties 
        public var picFile:String; 
        public var strChapTitle:String;

    }
} 
```

在主类文件中，我使用 addChild 将此对象添加到舞台：

```
var masterChapter:mc_masterChapter = new mc_masterChapter;

masterChapter.picFile = "pic_Chap1.jpg";
masterChapter.strChapTitle = "ABCD:

addChildAt(masterChapter,1); 
```

现在，MC 类代码中的跟踪为两个参数都提供了空值，但如果我在 MC 时间线内放置一个跟踪（而不是附加的类代码），它会给出正确的值！

如何在不获取 nuls 的情况下从 MC 类本身访问值？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:51:06.463

有用！让我解释：

```
var masterChapter:mc_masterChapter = new mc_masterChapter; // Calls class constuctor
                                                           // so calls trace() too!
                                                           // You will get null null

masterChapter.picFile = "pic_Chap1.jpg"; // Assign the variables
masterChapter.strChapTitle = "ABCD";     // so they can be read

trace(masterChapter.picFile, masterChapter.strChapTitle); // Should trace pic_Chap1.jpg ABCD 
```

如果您将以下方法添加到您的类中：

```
public function test():void {
    trace(picFile, strChapTitle);
} 
```

然后调用`masterChapter.test()`它将成功跟踪这两个属性。所以是的，这个类可以读取它的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:48:34.403

制作您在主类中使用的 var `public static var`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:08:54.120

可能更好的解决方案是使用 getter/setter 对，因此您可以在设置属性的确切时刻知道：

```
protected var _picFile:String:

public function get picFile():String {
   return _picFile;
}

public function set picFile(value:String):void {
   if (value != _picFile) {
     _picFile=value;
     trace('picFile set to', _picFile);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T16:16:29.123

好的！

我解开了这个谜。

我放了两条痕迹。主 MC 类中的一个说**“嘿，我在 MC 里面 - picFile=”** 和 put Function 中的一个说**“我正在将此文件放入 picFile：”**

好吧，这就是我所拥有的：

> 嘿，我在 MC 里面 - picFile=null
> 
> 我将此文件放入 picFile:image.jpg

知道了！？！此刻我让他生出一个 MC 的实例（甚至在把它放到舞台上之前 - 只是定义对象（用这条线：）

```
var masterChapter:mc_masterChapter = new mc_masterChapter; 
```

它已经运行了这个类，所以当然在这个阶段，参数还没有完全定义并且是**null**。

定义代码就在该行之后（在 main.as 中）

```
masterChapter.pic="pic_Chap1.jpg"; 
```

所以我所做的就是将所有代码从 MC 对象的主类移动到同一个包内名为 init() 的公共函数中。然后我从父主类手动调用了这个函数。这样**我**可以决定何时调用它（当然在我声明所有参数之后）。

而已。

上帝隐藏在小细节中：）所有助手的tnx。

# java - 如何在java中从输入流中读取png图像

> ID：11329387
> 
> 赞同：0
> 
> 时间：2012-07-04T12:45:10.880
> 
> 标签：java, android, sockets, remote-desktop

有2个应用程序。一个应用程序充当服务器并使用以下代码连续发送桌面屏幕截图。

```
Robot robot=new Robot();
OutputStream os;
BufferedImage image = robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
ImageIO.write(image, "png", os); 
```

第二个应用程序是Android应用程序，它充当客户端应用程序，必须从输入流中连续读取上述图像流。

请帮我从客户端应用程序的输入流中读取 png 图像。

谢谢和问候迷你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:56:15.967

在*客户端*`Socket.getInputStream()`应用程序中，通过方法读取 InputStream 。

```
 BufferedInputStream in = new BufferedInputStream(socket.getInputStream());
 BufferedImage image = ImageIO.read(in); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T01:40:33.103

Android SDK 不支持 ImageIO.read() 方法。即使您可以编译您的代码，您的 android 应用程序也会崩溃并出现有关缺少库的错误，如下所示：

> 找不到方法 javax.imageio.imageio.read

我建议使用位图而不是这个......

# java - 地图的 JAXB 映射

> ID：11329388
> 
> 赞同：3
> 
> 时间：2012-07-04T12:45:13.097
> 
> 标签：java, jaxb

使用JAXB，下面怎么映射`<entry key="childResources">`？

我尝试将其映射到 Map、@XmlRootElement 注释类列表和其他方式，但没有成功。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<map>    
  <entry key="extraProperties">        
    <map>            
      <entry key="methods">                
        <list>                    
          <map>                        
            <entry key="name" value="GET" />
          </map>                    
          <map />                    
          <map>                        
            <entry key="name" value="POST" />                        
            <entry key="messageParameters">                            
              <map>                                
                <entry key="id">                                    
                  <map>                                        
                    <entry key="acceptableValues" value="" />                                        
                    <entry key="optional" value="false" />                                        
                    <entry key="defaultValue" value="" />                                        
                    <entry key="type" value="string" />
                  </map>                                
                </entry>                                
                <entry key="enabled">                                    
                  <map>                                        
                    <entry key="acceptableValues" value="" />                                        
                    <entry key="optional" value="true" />                                        
                    <entry key="defaultValue" value="true" />                                        
                    <entry key="type" value="boolean" />
                  </map>                                
                </entry>                                
                <entry key="factoryclass">                                    
                  <map>                                        
                    <entry key="acceptableValues" value="" />                                        
                    <entry key="optional" value="false" />                                        
                    <entry key="defaultValue" value="" />                                        
                    <entry key="type" value="string" />
                  </map>                                
                </entry>                                
                <entry key="description">                                    
                  <map>                                        
                    <entry key="acceptableValues" value="" />                                        
                    <entry key="optional" value="true" />                                        
                    <entry key="defaultValue" value="" />                                        
                    <entry key="type" value="string" />
                  </map>                                
                </entry>                                
                <entry key="target">                                    
                  <map>                                        
                    <entry key="acceptableValues" value="" />                                        
                    <entry key="optional" value="true" />                                        
                    <entry key="defaultValue" value="server" />                                        
                    <entry key="type" value="string" />
                  </map>                                
                </entry>                                
                <entry key="property">                                    
                  <map>                                        
                    <entry key="acceptableValues" value="" />                                        
                    <entry key="optional" value="true" />                                        
                    <entry key="defaultValue" value="" />                                        
                    <entry key="type" value="string" />
                  </map>                                
                </entry>                                
                <entry key="restype">                                    
                  <map>                                        
                    <entry key="acceptableValues" value="" />                                        
                    <entry key="optional" value="false" />                                        
                    <entry key="defaultValue" value="" />                                        
                    <entry key="type" value="string" />
                  </map>                                
                </entry>                            
              </map>                        
            </entry>                    
          </map>                
        </list>            
      </entry>            
      <entry key="commands">                
        <list />
      </entry>            
      <entry key="childResources">                
        <map>                    
          <entry key="ab/cd" value="http://localhost:4848/management/domain/resources/custom-resource/ab%2Fcd" />                    
          <entry key="xx" value="http://localhost:4848/management/domain/resources/xx" />
        </map>            
      </entry>        
    </map>    
  </entry>    
  <entry key="message" value="" />    
  <entry key="exit_code" value="SUCCESS" />    
  <entry key="command" value="custom-resource" />
</map> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T13:44:36.827

java.util.Map 接口没有提供者来编组/解组其实例。您必须编写一个类来扩展属性并`XmlAdapter`使用.`java.util.Map``@XmlJavaTypeAdapter(MyMapAdapter.class)`

在谷歌上搜索了一段时间后`jax-rs java.util.map`，我得到了下面的代码。就我而言，我将适配器命名为*XmlStringMapAdapter*而不是*MyMapAdapter*。

*服务定义.java*

```
@XmlRootElement(name = "entry")
@XmlAccessorType(XmlAccessType.FIELD)
public class ServiceDefinition {

    @XmlAttribute
    private String key;

    @XmlJavaTypeAdapter(XmlStringMapAdapter.class)
    private Map<String, String> map = new HashMap<String, String>();

    // getters & setters
} 
```

*入口元素.java*

```
public class EntryElement {

    @XmlAttribute public String key;
    @XmlAttribute public String value;

    public EntryElement() {}

    public EntryElement(String key, String value) {
        this.key = key;
        this.value = value;
    }
} 
```

*MapElement.java*

```
@XmlRootElement(name = "map")
public class MapElement {

    @XmlElement(name = "entry")
    public List<EntryElement> entries = new ArrayList<EntryElement>();

    public void addEntry(String key, String value) {
        entries.add(new EntryElement(key, value));
    }

} 
```

*XmlStringMapAdapter.java*

```
public class XmlStringMapAdapter extends XmlAdapter<MapElement, Map<String, String>> {

    @Override
    public MapElement marshal(Map<String, String> v) throws Exception {

        if (v == null || v.isEmpty()) {return null;}

        MapElement map = new MapElement();

        for (String key : v.keySet()) {
            map.addEntry(key, v.get(key));
        }

        return map;
    }

    @Override
    public Map<String, String> unmarshal(MapElement v) throws Exception {
        if (v == null) {return null;}

        Map<String, String> map = new HashMap<String, String>(v.entries.size());

        for(EntryElement entry: v.entries) {
            map.put(entry.key, entry.value);
        }

        return map;
    }

} 
```

下面是我用来测试新地图适配器的一个类。

*服务资源.java*

```
@Path("service")
public class ServiceResource {

    @Context
    private UriInfo uriInfo;

    @GET
    @Path("definition")
    @Produces("application/xml")
    public Response getDefinition() {
        ServiceDefinition def = new ServiceDefinition();
        UriBuilder b = uriInfo.getBaseUriBuilder();

        def.setKey("childResources");
        def.getMap().put("ab/cd", b.path("ab/cd").build(this).getPath());
        def.getMap().put("xx", b.path("xx").build(this).getPath());

        return Response.ok(def).build();
    }
} 
```

上述资源的输出如下所示。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<entry key="childResources">
    <map>
        <entry key="ab/cd" value="http://localhost:8080/management/resources/ab/cd" />
        <entry key="xx" value="http://localhost:8080/management/resources/xx" />
    </map>
</entry> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:35:44.027

查看文档的 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="map" type="mapType"/>
  <xs:complexType name="entryType" mixed="true">
    <xs:sequence>
      <xs:element type="mapType" name="map" minOccurs="0"/>
      <xs:element type="listType" name="list" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute type="xs:string" name="key" use="optional"/>
    <xs:attribute type="xs:string" name="value" use="optional"/>
  </xs:complexType>
  <xs:complexType name="listType" mixed="true">
    <xs:sequence>
      <xs:element type="mapType" name="map" maxOccurs="unbounded" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="mapType" mixed="true">
    <xs:sequence>
      <xs:element type="entryType" name="entry" maxOccurs="unbounded" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

将其与您为课程所做的映射进行比较。很高兴看到你提出问题的类和注释。

您可以使用 Eclipse 和 Intellij 等 IDE 的许多不同实用程序或通过 CLI 从此模式生成具有映射的模型。

# mysql - 复杂的（对我来说）MySQL 日期匹配

> ID：11329389
> 
> 赞同：0
> 
> 时间：2012-07-04T12:45:14.203
> 
> 标签：mysql, left-join, datediff

我有一个跨两个子域镜像的网站。所以我对两者都有单独的分析数据集。我有以下表格：

```
|------------------------------|
| table_a                      |
|------------------------------|
| url             | mod_date   |
|------------------------------|
| /foo/index.html | 2009-10-24 |
| /bar/index.php  | 2010-01-04 |
| /foo/bar.html   | 2009-01-04 |
|------------------------------|

|-----------------------------------------|
| table_b                                 |
|-----------------------------------------|
| url             | views | access_date   |
|-----------------------------------------|
| /foo/index.html | 35000 | 2009-12-01    |
| /foo/index.html | 20000 | 2010-02-01    |
| /bar/index.php  | 35000 | 2010-01-01    |
| /bar/index.php  | 15000 | 2011-01-01    |
|-----------------------------------------|

|-----------------------------------------|
| table_c                                 |
|-----------------------------------------|
| url             | views | access_date   |
|-----------------------------------------|
| /foo/index.html | 35000 | 2009-10-01    |
| /foo/bar.html   | 10000 | 2011-05-01    |
| /bar/index.php  | 35000 | 2011-08-01    |
| /bar/index.php  | 15000 | 2012-04-01    |
|-----------------------------------------| 
```

我有以下查询：

```
SELECT 
    a.url
    ,DATE_FORMAT(a.mod_date, '%d/%m/%Y') AS 'mod_date'
    ,DATE_FORMAT(MIN(b.access_date), '%d/%m/%Y') AS 'first_date'
    ,DATE_FORMAT(MAX(b.access_date), '%d/%m/%Y') AS 'last_date'
    ,SUM(ifnull(b.pages,0)) + SUM(ifnull(c.pages,0)) AS 'page_views'    
    ,DATEDIFF(MAX(b.access_date),MIN(b.access_date)) AS 'days'
    ,ROUND(SUM(b.pages) / (DATEDIFF(MAX(b.access_date),MIN(b.access_date)) / 30.44)) AS 'b_mean_monthly_hits'
    ,ROUND(SUM(c.pages) / (DATEDIFF(MAX(c.access_date),MIN(c.access_date)) / 30.44)) AS 'a_mean_monthly_hits'
FROM
    tabl_a a
        LEFT JOIN
    table_b b ON b.url = a.url
        LEFT JOIN
    table_c c ON c.url = a.url
GROUP BY a.url
HAVING ROUND(SUM(b.pages) / (DATEDIFF(MAX(b.access_date),MIN(b.access_date)) / 30.44)) < 5
AND ROUND(SUM(c.pages) / (DATEDIFF(MAX(c.access_date),MIN(c.access_date)) / 30.44)) < 5
; 
```

我正在寻找的结果是：

```
|------------------------------------------------------------------------------------------|
| results                                                                                  |
|------------------------------------------------------------------------------------------|
| url             | mod_date   | first_date | last_date  | page_views   | avg_monthly_hits |
|------------------------------------------------------------------------------------------|
| /foo/index.html | 2009-10-24 | 2009-10-01 | 2010-02-01 | 90000        | 22273            |
| /bar/index.php  | 2010-01-04 | 2010-01-01 | 2012-04-01 | 85000        | 3275             |
| /foo/bar.html   | 2009-01-04 | 2011-05-01 | 2011-06-01 | 10000        | 9819             |
|------------------------------------------------------------------------------------------| 
```

其中**'avg_monthly_hits'**是**b.views**和**c.views**（作为**'page_views'** ）的总和除以来自**table_b**或**table_c的最旧和最新****access_date**之间的天数（不知道如何获取月份）除以30.44（一个月的平均天数）。

 ****我希望我已经充分解释了自己。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:39:38.683

试试这个查询。有一个日期来测试它会很好

```
select
  a.*,
  b.MinDate as `FirstDate`,
  b.MaxDate as `LastDate`,
  (ifnull(b.PSum,0) + ifnull(c.QSum,0)) as `TotalViews`,
  datediff(b.MaxDate,b.MinDate) as `Diff`,
  (((ifnull(b.PSum,0) + ifnull(c.QSum,0))/datediff(b.MaxDate,b.MinDate))/30.44) as `BMonthlyHits`,
  (((ifnull(b.PSum,0) + ifnull(c.QSum,0))/datediff(b.MaxDate,b.MinDate))/30.44) as `CMonthlyHits`
from table_a as a
left join (select url , min(access_date) as MinDate,max(access_date)as MaxDate,sum(pages) as PSum from table_b group by url) as b on a.url = b.url
left join (select url , min(access_date)as MinDate,max(access_date)as MaxDate, sum(pages) as QSum from table_c group by url) as c on a.url = c.url
group by a.url
HAVING BMonthlyHits < 5 and CMonthlyHits < 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:58:12.247

如果 table_b 和 table_c 具有相同的结构，只需合并它们

```
SELECT
 a.url,
 DATE_FORMAT(a.mod_date, '%d/%m/%Y') AS 'mod_date',
 DATE_FORMAT(MIN(u.access_date), '%d/%m/%Y') AS 'first_date',
 DATE_FORMAT(MAX(u.access_date), '%d/%m/%Y') AS 'last_date',
 SUM(u.views) AS 'page_views',
 DATEDIFF(MAX(u.access_date), MIN(u.access_date)) AS 'days',
 ROUND(SUM(u.views) / (DATEDIFF(MAX(u.access_date),MIN(u.access_date)) / 30.44)) AS 'avg_monthly_hits'
FROM table_a AS a 
LEFT JOIN (
   (SELECT * FROM table_b) 
   UNION 
   (SELECT * FROM table_c)
) AS u USING (url)
GROUP BY a.url
HAVING avg_monthly_hits < 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:08:28.620

最后，嵌套查询解决了这个问题。

```
SELECT DISTINCT a.url
, q.mod_date
, IF(q.b_min_date < q.c_min_date, q.b_min_date, q.c_min_date) AS 'min_date'
, IF(q.b_max_date > q.c_max_date, q.b_max_date, q.c_max_date) AS 'max_date'
, (PERIOD_DIFF(DATE_FORMAT(IF(q.b_max_date > q.c_max_date, q.b_max_date, q.c_max_date), '%Y%m'),DATE_FORMAT(IF(q.b_min_date < q.c_min_date, q.b_min_date, q.c_min_date), '%Y%m')) + 1) AS 'months'
, q.page_views
, ROUND(q.page_views / ((PERIOD_DIFF(DATE_FORMAT(IF(q.b_max_date > q.c_max_date, q.b_max_date, q.c_max_date), '%Y%m'),DATE_FORMAT(IF(q.b_min_date < q.c_min_date, q.b_min_date, q.c_min_date), '%Y%m'))) + 1)) AS 'avg_monthly_hits'
FROM table_a a
INNER JOIN
    (SELECT 
            a.url,
                a.date AS 'mod_date',
                MIN(b.date) AS 'b_min_date',
                MAX(b.date) AS 'b_max_date',
                MIN(c.date) AS 'c_min_date',
                MAX(c.date) AS 'c_max_date',
                SUM(ifnull(b.pages, 0)) + SUM(ifnull(c.pages, 0)) AS 'page_views'
        FROM
            table_a a
                LEFT JOIN
            table_b b ON a.url = b.url
                LEFT JOIN
            table_c c ON a.url = c.url
        GROUP BY a.url
) q
ON a.url = q.url
WHERE ROUND(q.page_views / ((PERIOD_DIFF(DATE_FORMAT(IF(q.b_max_date > q.c_max_date, q.b_max_date, q.c_max_date), '%Y%m'),DATE_FORMAT(IF(q.b_min_date < q.c_min_date, q.b_min_date, q.c_min_date), '%Y%m'))) + 1)) < 5
; 
```****

# android - android保存全局变量

> ID：11329390
> 
> 赞同：0
> 
> 时间：2012-07-04T12:45:14.887
> 
> 标签：android

我想在我拥有的所有屏幕上将一个变量保存为全局变量，例如，对于我正在使用的每次连接到本地主机，`10.0.2.2`所以我必须在每次连接时写入该 ip，当我想在我的手机上尝试我的应用程序时我必须去编码并`10.0.2.2`用我的系统静态 ip替换所有设备`192.168.1.101`，有没有办法说全局变量上的 ip？我读到我必须`string`在android上使用，但我不知道如何，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:47:16.880

使用 SharedPreferences 存储和检索它：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

示例：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

```
public static final String PREFS_NAME = "MyPrefsFile";

//retrieve
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
String ip= settings.getString("ip");
//use ip

//store
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putString("ip", mIp);
editor.commit(); 
```

# android - 在名称搜索中查找包含完整路径的文件

> ID：11329393
> 
> 赞同：0
> 
> 时间：2012-07-04T12:45:20.287
> 
> 标签：android, linux, find

我使用`find / -name xxx`的是“”，但它只搜索文件名。

我想要的是`xxx`在文件的完整路径中包含包含“”的结果。例如，我希望`/data/xxx/somefile.txt`结果中包含路径为“”的文件。

如何在 Android 设备上实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:52:49.130

```
find . -wholename "*xxx*" 
```

或者如果您只需要具有此类名称的目录

```
find . -wholename "*/xxx/*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:21:14.900

@Fivesheep 的评论对我有用。

# php - 将多页pdf转换为多图像

> ID：11329395
> 
> 赞同：3
> 
> 时间：2012-07-04T12:45:28.717
> 
> 标签：php, imagemagick

我正在尝试使用 PHP Image 魔术扩展将多页 PDF 文件转换为图像。问题是，我没有获取与文件的每一页对应的图像，而是将 pdf 的最后一页作为输出图像。这是代码：

```
$handle = fopen($imagePath, "w");
$img1 = new Imagick();

$img1->setResolution(300,300);
$img1->readImage(path to pdf file);
$img1->setColorspace(imagick::IMGTYPE_GRAYSCALE);
$img1->setCompression(Imagick::COMPRESSION_JPEG);
$img1->setCompressionQuality(80);
$img1->setImageFormat("jpg");

$img1->writeImageFile($handle); 
```

我在做什么错？命令行上具有相同参数的转换命令有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T19:03:52.773

尝试这样的事情：

```
$images = new Imagick("test.pdf"); 
foreach($images as $i=>$image) {
    $image->setResolution(300,300);
    //etc 
    $image->writeImage("page".$i.".jpg"); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-28T00:38:43.467

试试 writeImages 函数。它将每个页面创建为一个图像，并为多个图像提供文件名，如下所示：yourimagename、yourimagename-1、yourimagename-2...。它会自动从 0 增加到您的 numberofpagesinPdf-1。

代码如下所示：

```
$imagick = new Imagick($file_handle);
$imagick->readImage();
$imagick->writeImages($yourImagename.'.jpg', false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-02T07:23:41.630

这适用于具有多页和单页的 pdf。

```
$pdf_file = 'path/to/pdf/file.php';
$image = new imagick();
$image->setResolution(300,300);
$image->readImage($pdf);
$image->setImageFormat('jpg');

// Set all other properties

$pages = $image->getNumberImages();

if ($pages) {
    foreach($image as $index => $pdf_image) {
        $pdf_image->writeImage('destination/path/' . $index . '-image_file.jpg');
    }
} else {
    echo 'PDF doesn\'t have any pages';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-10T09:45:28.147

如果您知道 pdf 的页数，请尝试以下操作：

```
$images = new Imagick(); 

foreach ($pages as $p){

    $im->readImage($PdfFile."[".$p."]");    //yourfile.pdf[0], yourfile.pdf[1], ...

    $im->setCompression(Imagick::COMPRESSION_JPEG); 
    $im->setCompressionQuality(82); 
    $im->setImageFormat( "jpg" );
    //...
    $image_out = "image_".$p.".jpg";
    $im->writeImage($image_out);
}

$im->clear();
$im->destroy(); 
```

如果你不知道页数，你可以这样做：

```
$images = new Imagick();
$im->readImage($PdfFile);
$pages = (int)$im->getNumberImages(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-31T17:01:01.680

这对我有用

```
$file = "./path/to/file/name.pdf";
$fileOpened = @fopen($archivo, 'rb');
$images = new Imagick();
$images->readImageFile($fileOpened);
foreach ($images as $i => $image) {
     $image->setResolution(300, 300);
     $image->setImageFormat("jpg");
     $image->setImageCompression(imagick::COMPRESSION_JPEG);
     $image->setImageCompressionQuality(90);
     $image->setImageUnits(imagick::RESOLUTION_PIXELSPERINCH);
     $data_blob = $image->getImageBlob();
     $ouput="./path/images/files/page" . $i . ".jpg";
     file_put_contents($ouput, $data_blob);
}
@fclose($fileOpened); 
```

我希望我也能帮助你

# windows-phone-7 - BackgroundWorker 中的集合处理

> ID：11329398
> 
> 赞同：0
> 
> 时间：2012-07-04T12:45:37.160
> 
> 标签：windows-phone-7, collections, backgroundworker, outofrangeexception

我尝试让连接到 ObservaleCollection 的 ListBox 更高效，因此对于数据库查询，我实现了一个 BackgroundWorker 来完成这项工作。然后在这个后台工作人员中，我想向 UI 添加每个 70 毫秒 3 个条目，因此大量条目（比如 100 个）上的 UI 不会被阻止。这是代码：

```
 void updateTMWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        var MessagesInDB = from MessageViewModel tm in MessagesDB.Messages
                                  where tm.Type.Equals(_type)
                                  orderby tm.Distance
                                  select tm;

        // Execute the query and place the results into a collection.
        Dispatcher.BeginInvoke(() => { MessagesClass.Instance.Messages = new ObservableCollection<MessageViewModel>(); });

        Collection<MessageViewModel> tempM = new Collection<MessageViewModel>();
        int tempCounter = 0;

        foreach (MessageViewModel mToAdd in MessagesInDB)
        {
            if (MessagesClass.Instance.Messages.IndexOf(mToAdd) == -1)
            {
                tempM.Add(mToAdd);
                tempCounter = tempCounter + 1;
            }
            if (tempCounter % 3 == 0)
            {
                tempCounter = 0;
                Debug.WriteLine("SIZE OF TEMP:" + tempM.Count());
                Dispatcher.BeginInvoke(() =>
                {
                    // add 3  messages at once
                    MessagesClass.Instance.Messages.Add(tempM[0]);
                    MessagesClass.Instance.Messages.Add(tempM[1]);
                    MessagesClass.Instance.Messages.Add(tempM[2]);
                });
                tempM = new Collection<MessageViewModel>();
                Thread.Sleep(70);
            } 
        }
        // finish off the rest
        Dispatcher.BeginInvoke(() =>
        {
            for (int i = 0; i < tempM.Count(); i++)
            {
                MessagesClass.Instance.Messages.Add(tempM[i]);
            }
        });            
    } 
```

输出是：

```
SIZE OF TEMP:3

A first chance exception of type 'System.ArgumentOutOfRangeException' occurred in mscorlib.dll 
```

在该行中：MessagesClass.Instance.Messages.Add(tempM[0]); 代码尝试访问 tempM 的第一个元素的位置

有什么提示有什么问题吗？为什么我不能访问 tempM 元素，尽管集合大小 > 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:16:51.490

您忘记了线程同步。看看你的代码：

```
 1: Debug.WriteLine("SIZE OF TEMP:" + tempM.Count());
            Dispatcher.BeginInvoke(() =>
            {
                // add 3  messages at once
                3: MessagesClass.Instance.Messages.Add(tempM[0]);
                MessagesClass.Instance.Messages.Add(tempM[1]);
                MessagesClass.Instance.Messages.Add(tempM[2]);
            });
            2: tempM = new Collection<MessageViewModel>(); 
```

`tempM`已经是`null`什么时候`MessagesClass.Instance.Messages.Add(tempM[0]);`被执行了。因此，请使用某种排序或同步对象，例如：

```
 EventWaitHandle Wait = new AutoResetEvent(false);

            Debug.WriteLine("SIZE OF TEMP:" + tempM.Count());
            Dispatcher.BeginInvoke(() =>
            {
                // add 3  messages at once
                MessagesClass.Instance.Messages.Add(tempM[0]);
                MessagesClass.Instance.Messages.Add(tempM[1]);
                MessagesClass.Instance.Messages.Add(tempM[2]);

                Wait.Set();
            });
            // wait while tempM is not in use anymore
            Wait.WaitOne();

            tempM = new Collection<MessageViewModel>(); 
```

# jenkins - Jenkins - 在不同的时间触发不同的插件，独立于构建

> ID：11329400
> 
> 赞同：2
> 
> 时间：2012-07-04T12:45:42.150
> 
> 标签：jenkins, jenkins-plugins

是否有可能有多个插件执行不同的工作并在不同的时间触发**独立于构建**- 按下构建时插件不会触发？

我目前的问题是每次按下构建时 Jenkins 都会触发插件。我只需要在特定时间触发它。

我尝试过构建触发器 - 计划和[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:36:18.897

使用[运行条件插件](https://wiki.jenkins-ci.org/display/JENKINS/Run+Condition+Plugin)。使发布构建步骤以构建参数为条件（我们将其命名为*DO_PUBLISH*）。默认情况下将该参数设置为*FALSE*，因此当手动启动构建时，不会触发发布步骤。

现在，创建一个计划在每天午夜运行的辅助构建，并通过[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)调用您的主构建，并将*DO_PUBLISH*参数设置为*TRUE*，如下所示：

假设您的构建名为*MY-BUILD*。创建一个新的构建*TRIGGER-MY-BUILD*。在*Build Triggers*中 选中*Build Periodically*并输入*Schedule* (`@daily`或`0 0 * * *`)。

安装*参数化触发器*插件。点击*Add Build Step* -> 选择*Trigger/call builds on other projects* ->在*Projects to build*中输入*MY-BUILD* -> *Add Parameters* -> 选择*Predefined Parameters* ->在*Parameters*编辑框中输入。***`DO_PUBLISH=TRUE`***

# c# - 使用 xsd2Code 和 c# 创建一个数组

> ID：11329401
> 
> 赞同：1
> 
> 时间：2012-07-04T12:45:43.417
> 
> 标签：c#, visual-studio-2010, xsd, xsd2code

我正在使用这样的 .xsd 架构

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="Scene">
<xs:complexType>
  <xs:sequence>
    <xs:element name="SceneName" type="xs:string" minOccurs="0" maxOccurs="1" />
    <xs:element name="PlayerName" type="xs:string" minOccurs="0" maxOccurs="1" />  
    <xs:element name="Button" minOccurs="0" maxOccurs="unbounded" >
      <xs:complexType>
        <xs:sequence>
          <xs:element name="ButtonText" type="xs:string" minOccurs="0" maxOccurs="1" />
          <xs:element name="NextScene" type="xs:string" minOccurs="0" maxOccurs="1" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
 </xs:complexType>
</xs:element>
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
 <xs:complexType>
  <xs:choice minOccurs="0" maxOccurs="unbounded">
    <xs:element ref="Scene" />
  </xs:choice>
  </xs:complexType>
 </xs:element>
</xs:schema> 
```

这是由 Visual Studios xsd.exe 自动生成的。然后我使用 xsd2code 使其成为 .designer.cs 文件。我设置了 xsd2code，以便它创建序列化程序并为数组创建复杂的类型结构。

![xsd2codeWindow](../Images/19e1058c8aabaf200b4230e9e1188666.png)

现在我反序列化一个 xml 并创建我的场景文件，我的子对象（如 playername）都是正确的，即使它们有子对象，只要它们设置为 maxoccurence=1 和 minoccurence=0。除了上例中的 Button 之类的数组，我想我会得到一个像这样的数组：scene.Button[i].Buttontext。嗯，我不明白。我只是得到我不知道这就是为什么我在这里有一个截图。

![失败部分](../Images/19461ec627dd52d4aa5c9f0958eb81da.png)

他抛出一个 IndoexoutofRange 错误。那么我做错了什么？

顺便说一句，我的 example.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <Scene>
  <SceneName>SceneName1</SceneName>
   <PlayerName>PlayerName1</PlayerName>
   <Button>
    <ButtonText>ButtonText1</ButtonText>
    <NextScene>NextScene1</NextScene>
   </Button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:40:28.683

找到了，需要。将 GenerateXMLAttributes 设置为 true；

# html - 处理 oAuth2 access_token 过期

> ID：11329403
> 
> 赞同：1
> 
> 时间：2012-07-04T12:45:52.847
> 
> 标签：html, jquery, oauth-2.0, google-fusion-tables

在通过 Google 进行身份验证后，`oauth2.login`获取`access_token`和`expires_in`. 在我的令牌过期之前一切都很好。到期后，当我再次发送带有旧令牌的数据请求时：

```
var URLHead = 'https://www.google.com/fusiontables/api/query?sql='
var URLTable = encodeURI('SELECT id,COUNT() FROM TABLE_ID')
var URLTail = '&access_token='+ old_token +'&jsonCallback=?'
var queryURL = URLHead + URLTable + URLTail
var jqxhr = $.ajax({
  type: "GET",
  url: queryURL,
  dataType: 'jsonp',
  success: function (d) {
    var max = d.table.rows[0].toString().substr(1)
    localStorage.setItem('cpage', Math.ceil(max / localStorage.getItem('delimeter')))
  },
  error: function(){alert('token_expired')}
}) 
```

努力成功，如果令牌过期，什么也不给。在互联网上找不到明确的例子如何处理到期？我应该算自己 3600 秒并删除 old_token 还是有任何优雅的方法来处理令牌过期错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:32:19.200

令牌过期后的响应是什么样的？API 不一定会抛出错误，只是一个正常的 JSON 响应。响应可能包含令牌已过期的内容，因此您可以使用它来即时检查。

尝试：

```
success: function (d) {
 if(d.error){
   if(d.error == 'invalid_token'){
    alert('invalid_token');
   }
 } else {
  // local storage etc 
 }
} 
```

或（带错误处理）：

```
var request = $.ajax({
  url: "https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=1/fFBGRNJru1FQd44Az%20%E2%80%8BqT3Zg",
  type: "GET",
});

request.done(function(msg) {
 // complete
});

request.fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
}); 
```

​继承人的小提琴：http: [//jsfiddle.net/MFe9d/](http://jsfiddle.net/MFe9d/)

# jquery - Twitter Bootstrap：初始化时在选项卡上附加操作

> ID：11329405
> 
> 赞同：4
> 
> 时间：2012-07-04T12:45:55.473
> 
> 标签：jquery, twitter-bootstrap

我想在页面加载时初始化 Twitter Bootstrap 选项卡时附加一个操作（例如警报）。

我可以将操作附加到任何后续选项卡事件：

```
$('a[data-toggle="tab"]').on('show', function (e) {
    alert('tab shown');
}); 
```

但我想在一开始就对事件“初始化”（或任何该事件的名称）做类似的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T18:40:19.070

与其尝试绑定无法实现的已初始化事件，不如**通过删除`data-toggle="tab"`**来禁用自动初始化。

然后你把你自己的初始化，并添加一个回调来模仿事件调用。

```
$('#myTab .tab a').each(function() {
    var $this = $(this);
    $this.click(function (e) {
        e.preventDefault();
        $this.tab('show');
    });
    someCallback.call(this);
}); 
```

```
<ul class="nav nav-tabs" id="myTab">
    <li class="active tab"><a href="#home">Home</a></li>
    <li class="tab"><a href="#profile">Profile</a></li>
    <li class="tab"><a href="#messages">Messages</a></li>
    <li class="tab"><a href="#settings">Settings</a></li>
    <li><a href="#">Regularlink</a></li>
</ul> 
```

当然有一种更标准的方法来处理事件和所有事件，但这很简单，也很容易实现。

[示例（jsfiddle）](http://jsfiddle.net/Sherbrow/ULTxP/)

# selenium - 远程执行 selenium 脚本时显示“会话 XXXXXXX 不存在”

> ID：11329409
> 
> 赞同：0
> 
> 时间：2012-07-04T12:46:10.883
> 
> 标签：selenium, selenium-rc, selenium-webdriver

我收到以下错误：

```
2012-07-04 15:33:36,582 INFO root:68 - 
at TestRunner.main(TestRunner.java:57)
at TestRunner.startTests(TestRunner.java:108)
at org.testng.TestNG.run(TestNG.java:1006)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1094)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1169)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunner.run(SuiteRunner.java:241)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:309)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:138)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:212)
at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:543)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at Tc.tcCloseSelenium(Tc.java:112)
at Uc.closeSelenium(Uc.java:139)
at org.openqa.selenium.remote.RemoteWebDriver.quit(RemoteWebDriver.java:346)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:476)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:472)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.GeneratedConstructorAccessor85.newInstance(Unknown Source)
Session ID: 7a5fee88-98ec-441b-8412-b9fc9cf73b66
Driver info: driver.version: RemoteWebDriver
System info: os.name: 'Windows Server 2008 R2', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_01'
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 15:28:49'
Command duration or timeout: 0 milliseconds
org.openqa.selenium.WebDriverException: session 7a5fee88-98ec-441b-8412-b9fc9cf73b66 does not exist
2012-07-04 15:33:36,457 INFO root:58 - Tc.tcCloseSelenium
at TestRunner.main(TestRunner.java:57)
at TestRunner.startTests(TestRunner.java:108)
at org.testng.TestNG.run(TestNG.java:1006)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1094)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1169)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunner.run(SuiteRunner.java:241)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:309)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:138)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:212)
at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:543)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at Tc.tcCloseSelenium(Tc.java:112)
at Uc.closeSelenium(Uc.java:139)
at org.openqa.selenium.remote.RemoteWebDriver.quit(RemoteWebDriver.java:346)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:476)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:472)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.GeneratedConstructorAccessor85.newInstance(Unknown Source)
Session ID: 7a5fee88-98ec-441b-8412-b9fc9cf73b66
Driver info: driver.version: RemoteWebDriver
System info: os.name: 'Windows Server 2008 R2', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_01'
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 15:28:49'
Command duration or timeout: 0 milliseconds
org.openqa.selenium.WebDriverException: session 7a5fee88-98ec-441b-8412-b9fc9cf73b66 does not exist 
```

这发生在脚本执行过程的最开始（很可能是`seleniumDriver.get(ddt.gv.get("app_url"));`命令）通过一些 ASP.net Web 应用程序远程执行。结果所有的测试和用例都失败了。

webdriver是internetexplorerdriver：

```
DesiredCapabilities ieCapabilities = DesiredCapabilities.internetExplorer();
ieCapabilities.setCapability("ignoreProtectedModeSettings" , true);

InternetExplorerDriver seleniumDriver = new InternetExplorerDriver(ieCapabilities);
seleniumDriver.get(ddt.gv.get("app_url")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:28:24.843

您是否要多次清理测试？

事情是..

如果您多次执行 driver.Close() 或任何类型的清理，它将擦除/关闭您要清理的内容，然后找不到这些对象，这就是您得到的错误！

希望能帮助到你！让我知道！

# spring - Jpa testing and automatic rollback with Spring

> ID：11329411
> 
> 赞同：1
> 
> 时间：2012-07-04T12:46:14.087
> 
> 标签：spring, testing, jpa-2.0, rollback, transactional

I am in reference to Spring Roo In Action (book from Manning). Somewhere in the book it says "Roo marks the test class as `@Transactional` so that **the unit tests automatically roll back any change**.

Here is the illustrating method:

```
@Test
@Transactional
  public void addAndFetchCourseViaRepo() {
    Course c = new Course();
    c.setCourseType(CourseTypeEnum.CONTINUING_EDUCATION);
    c.setName("Stand-up Comedy");
    c.setDescription(
      "You'll laugh, you'll cry, it will become a part of you.");
    c.setMaxiumumCapacity(10);

    c.persist();
    c.flush();
    c.clear();  
    Assert.assertNotNull(c.getId());

    Course c2 = Course.findCourse(c.getId());
    Assert.assertNotNull(c2);
    Assert.assertEquals(c.getName(), c2.getName());
    Assert.assertEquals(c2.getDescription(), c.getDescription());
    Assert.assertEquals(
      c.getMaxiumumCapacity(), c2.getMaxiumumCapacity());
    Assert.assertEquals(c.getCourseType(), c2.getCourseType());
  } 
```

However, I don't understand why changes in this method would be automatically rolled back if no RuntimeException occurs...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:57:30.320

Quote from [documentation](http://static.springsource.org/spring-framework/docs/3.1.x/spring-framework-reference/html/testing.html#testing-tx):

> By default, the framework will create and roll back a transaction for each test. You simply write code that can assume the existence of a transaction. [...] In addition, if test methods delete the contents of selected tables while running within a transaction, the transaction will roll back by default, and the database will return to its state prior to execution of the test. Transactional support is provided to your test class via a PlatformTransactionManager bean defined in the test's application context.

So, in other words, `SpringJUnit4ClassRunner` who runs your tests always do transaction rollback after test execution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:13:05.210

I'm trying to find a method that allows me to do a rollback when one of the elements of a list fails for a reason within the business rules established (ie: when throw my customize exception)

Example, (the idea is not recording anything if one element in list fails)

```
public class ControlSaveElement {

 public void saveRecords(List<MyRecord> listRecords) {

  Boolean status = true;

  foreach(MyRecord element: listRecords) {
     // Here is business rules
     if(element.getStatus() == false) {
        // something
        status = false;
     }
     element.persist();
  }

  if(status == false) {
     // I need to do roll back from all elements persisted before
  }
 }

...
} 
```

Any idea? I'm working with Roo 1.2.2..

# sql - 如何从同一表名中的值更新表列名？

> ID：11329416
> 
> 赞同：0
> 
> 时间：2012-07-04T12:46:24.200
> 
> 标签：sql, sql-server-2008

```
 eid   |        ename          |    fname       midname  |   lname
--------+-----------------------+-------------+-----------+---------- 
   1            hansen
   2          hansen ola
   3       dennis richard hog 
```

现在如何将它们更新为这样：

```
 eid   |        ename          |    fname       midname  |   lname
--------+-----------------------+-------------+-----------+---------- 
   1             hansen
   2           hansen ola            hansen        ola
   3       dennis richsard hog       dennis      richard       hog 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:49:59.587

只需从表中获取并使用or`ename`将其分解为名字、中间名和姓氏，并相应地更新表。`explode(' ', $name)``str_word_count ($name, 1)`

用于选择行的 SQL：

```
SELECT * FROM <tablename> 
```

用于更新行的 SQL：

```
UPDATE <tablename> SET <columnname> = <value> WHERE ename = <ename> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:49:20.037

您好 检查下面的 SQL 代码以获取更新语句。

```
CREATE TABLE emptble(eid int,ename varchar(200) NULL,fname varchar(50) NULL,midname varchar(25) NULL,lname varchar(100) NULL)

INSERT INTO emptble(eid,ename)
VALUES(1,'hansen'),(2,'hansen ola'),(3,'dennis richard hog')

SELECT ename,
       CASE WHEN CHARINDEX(' ',ename,1)>0 then LEFT(ename,CHARINDEX(' ',ename,1)-1) ELSE ename END,
       CASE WHEN CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1)>0 THEN LEFT((CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1)-1) ELSE (CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END) END,
       CASE WHEN CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1) = 0 THEN NULL ELSE RIGHT(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END,LEN(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END)-CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1)) END

FROM emptble

UPDATE emptble SET fname= CASE WHEN CHARINDEX(' ',ename,1)>0 then LEFT(ename,CHARINDEX(' ',ename,1)-1) ELSE ename END,
                   midname =CASE WHEN CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1)>0 THEN LEFT((CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1)-1) ELSE (CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END) END,
                   lname=CASE WHEN CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1) = 0 THEN NULL ELSE RIGHT(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END,LEN(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END)-CHARINDEX(' ',(CASE WHEN CHARINDEX(' ',ename,1) = 0 then NULL ELSE RIGHT(ename,len(ename)-CHARINDEX(' ',ename,1)) END),1)) END

SELECT * FROM emptble 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:50:53.957

[**`str_word_count`**](http://php.net/manual/en/function.str-word-count.php)如果名称始终按相同的顺序排列，您可以简单地使用:检索数组中字符串的单词`str_word_count ($ result, 1)`。

它对你有帮助还是你希望我发展？

# asp.net - 防止黄屏死机

> ID：11329419
> 
> 赞同：2
> 
> 时间：2012-07-04T12:46:38.627
> 
> 标签：asp.net, postback, ysod

我在使用 asp.net 请求验证时遇到问题。我有一个带有搜索字段和按钮的基本页面。如果用户在搜索字段中输入一些非法字符并单击按钮，那么我当然可以在 JS 中验证他的输入，一切正常。但是，我还有很多与执行回发的搜索功能无关的 LinkBut​​ton，当它发生时，我得到了 YSOD。我知道您可以通过在页面指令或 web.config 中添加 ValidateRequest="false" 来关闭此功能，但是我想知道是否有比完全禁用请求验证更好、更优雅的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:49:10.750

您可以使用反 XSS 库来避免跨脚本攻击。检查此链接[AntiXSS asp.net](http://haacked.com/archive/2010/04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx)。

你可以打开死亡黄屏。通过将 CustomError 模式更改为 Remoteonly。这样远程用户就不会看到 YSOD。只有本地服务器会看到 YSOD

在 web.config 添加这样的行。

```
<configuration>
  <system.web>
    <customErrors defaultRedirect="yourErrorPage.html"
                  mode="RemoteOnly">

    </customErrors>
  </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:23:45.637

Sounds to me like you need to put validation groups against your form elements (could be I'm misunderstanding the question).

(This would be easier if you'd have posted some code)

```
<asp:Panel runat="server" DefaultButton="btnSearch">
    <asp:TextBox runat="server" ID="txtSearch" />
    <asp:RequiredFieldValidator runat="server" ControlToValidate="txtSearch" ValidationGroup="vgSearch" ErrorMessage="Search is required!" />
    <asp:Button runat="server" ID="btnSearch" ValidationGroup="vgSearch" Text="Search" />
</asp:Panel>

<asp:LinkButton runat="server" ID="btnLogin" Text="Login" ValidationGroup="vgLogin" />
<asp:LinkButton runat="server" ID="btnCakes" Text="Cakes!" ValidationGroup="vgCakes" /> 
```

Anyway, the idea is that your search form and associated validators have one validation group, and your other buttons have other validation groups, then the validator won't fire when you click another button.

I'm not actually sure if you NEED the validation groups against individual link buttons, I don't think you do, but I'm putting 'em in there to demonstrate my point.

If I've completely missed the boat, let me know :)

EDIT:

I should mention that I've just thrown the above code together, can't guarantee it's all formatted correctly, etc, etc.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:37:26.603

奇怪的是，在我试图回答这个问题的第二天，一位同事要求我帮助解决同样的问题，所以这就是我目前所做的......

（请记住，虽然我已经在 .Net 中开发了很多年，但我从来不需要深入研究页面生命周期、ViewState 或任何让开发人员保持更好状态的极其复杂的部分夜晚）

最初，我认为覆盖 JavaScript 中的 PostBack 事件将允许我编辑表单帖子并删除有问题的字符，所以我尝试了一个简单的警报，但*潜在危险的 Request.Form*仍然出现，所以不管是什么原因导致它是在 PostBack 事件被触发之前发生。

因此，在调查了[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)，覆盖了我可以使用的所有方法并进行了大量调试之后，我发现错误是在DeterminePostBackMode 方法中引发的。

现在，据我了解，此方法查看表单帖子并将其转换为 NameValueCollection，因此我构建了自己的 NameValueCollection，去掉了“<”字符（我只用该字符开始测试）。

```
Protected Overrides Function DeterminePostBackMode() As System.Collections.Specialized.NameValueCollection
        Dim stream As New System.IO.StreamReader(Request.InputStream)
        Dim nvCollection As New System.Collections.Specialized.NameValueCollection()
        Dim _split() As String = stream.ReadToEnd().Split("&")
        If _split.Length > 1 Then
            For i As Integer = 0 To _split.Length - 1
                Dim kv() As String = _split(i).Split("=")
                Dim _key As String = HttpUtility.UrlDecode(kv(0))
                Dim _value As String = HttpUtility.UrlDecode(kv(1))
                If _value.Contains("<") Then _value = ""
                nvCollection.Add(_key, _value)
            Next
        End If

        'For Each s As String In nvCollection
        '    Response.Write(String.Format("<p>{0}={1}</p>", s, nvCollection(s)))
        'Next

        Return nvCollection
    End Function 
```

这非常有效，有问题的值被删除了，并且 NameValueCollection 被返回而不会导致错误......

除了我仍然看到错误消息。

目前，我已经将它跟踪到 PreInit 页面事件，并且我正在尝试解决它，我会在我取得进展时更新它。

更新：

我现在相当确定问题不在于存储在 ViewState 中的值。在阅读[了这篇](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)关于 ViewState 的优秀文章后，我尝试将 TextBox 的值设置为`"<script"`声明式，这意味着它不应该存储在 ViewState 中，这意味着错误不是由在 ViewState 上执行的处理引起的。

我认为。

# java - .NET 中的 GWT 之类的东西

> ID：11329420
> 
> 赞同：1
> 
> 时间：2012-07-04T12:46:43.803
> 
> 标签：java, javascript, .net

.Net 中是否有任何 GWT 的替代品。GWT 基本上是来自 Google 的 API，它允许您使用 Java 编写代码，并且在部署应用程序时，GWT 交叉编译器将 Java 应用程序转换为独立的 JavaScript 文件，这些文件可以选择性地进行混淆和深度优化。

有关详细信息，请访问：- [http://en.wikipedia.org/wiki/Google_Web_Toolkit](http://en.wikipedia.org/wiki/Google_Web_Toolkit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:48:41.460

您可以查看[Script#](http://projects.nikhilk.net/ScriptSharp/)，但老实说，这些事情在 .NET 世界中并没有得到足够的关注，因为 GWT 可能就是这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:50:35.930

来自快速谷歌：[jsc](http://jsc.sourceforge.net/)，[SharpKit](http://sharpkit.net/)和[Script#](http://projects.nikhilk.net/ScriptSharp/)。

然而，随着 JavaScript 变得越来越普遍（它将会是 node.js 等），花时间学习原生 JavaScript 编码可能是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:50:28.030

我不这么认为。有一些项目尝试将 C# 交叉编译为 JavaScript（ScriptSharp、SharpKit），但我认为这不是正确的方法。

我建议花时间拥抱 Web，并尝试使用类似 MVC 的 Web 框架（KnockoutJS、AngularJS、EmberJS、BackBone）。

# php - 警告：为 mysql 结果上的 foreach() 提供的参数无效

> ID：11329436
> 
> 赞同：-2
> 
> 时间：2012-07-04T12:47:18.810
> 
> 标签：php, mysql

下面的代码给了我一个 foreach 错误。我的代码似乎有什么问题？

```
 $my_word = $_REQUEST['value'];
$bestMatch = array('word' => $my_word, 'match' => 2);
$result = mysql_query("SELECT keyword FROM keywords");
$storeArray = Array();
foreach ($result as $keyword) {
    $lev = levenshtein ($keyword, $my_word, 1, 2, 1);
    if (!isset($lowest) || $lev < $lowest) {
       $bestMatch = array('word' => $keyword, 'match' => $lev);
       $lowest = $lev;
    }
}
if ($bestMatch['match'] > 0)
   echo 'Did you mean: <strong>'.$bestMatch['word'].'</strong> l:'.$bestMatch['match']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:50:46.097

替换这个：

```
foreach ($result as $keyword) 
```

有了这个：

```
while ($keyword = mysql_fetch_array($result)) 
```

[mysql_query()](http://php.net/manual/en/function.mysql-query.php)只是返回一个资源，你需要实际的结果，所以你也需要使用[mysql_fetch_array()](http://php.net/manual/en/function.mysql-fetch-array.php)。

此外，不推荐使用 mysql_* 函数，因此您应该查看 PDO 或 mysqli。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:51:16.423

foreach 需要一个数组。相反，您希望传递查询，请查看[mysql-fetch-array](http://php.net/manual/en/function.mysql-fetch-array.php)以从查询中获取结果数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:53:19.090

```
$result = mysql_query("SELECT keyword FROM keywords"); 
```

这将返回您需要使用其他函数处理的资源。例如： [http ://us.php.net/mysql_fetch_assoc](http://us.php.net/mysql_fetch_assoc)

检查[http://us.php.net/mysql_query](http://us.php.net/mysql_query)

另一方面，MySQL 可能有一些你可以使用的函数，比如 levenshtein。

# ajax - Ajax.BeginForm 与 A jaxForm 内的 UpdateTarget

> ID：11329440
> 
> 赞同：0
> 
> 时间：2012-07-04T12:47:32.193
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-ajax

这是否可以`Ajax.Beginform`与 ajax 表单内的更新目标一起使用。像这样：

```
 using(Ajax.BeginForm("EditPhone", new { id = item.Id.Value }, new AjaxOptions {
       UpdateTargetId = "TRTarget"})) {
    <tr class="gradeA odd" id="TRTarget">
        <input type"submit" value="submit" />
    </tr>
} 
```

**更新**

好的，如果可能的话，这有什么问题？

这是我的部分视图，其中呈现了另一个部分视图：

```
 using(Ajax.BeginForm("EditPhone", new { id = item.Id.Value }, new AjaxOptions {
       UpdateTargetId = "TRTarget"})) {
    <tr class="gradeA odd" id="TRTarget">
        @{Html.RenderPartial("_PhoneRow", item);}
    </tr>
} 
```

和`_PhoneRow`：

```
@model MyModel
<td>@Html.DisplayFor(model=>model.Number)</td>
<td>@Html.DisplayFor(modelItem => Model.PhoneKind)</td>
<td><input type="submit" value="Edit" class="button" /></td> 
```

和`EditPhone`行动：

```
public ActionResult EditPhone(long Id){

  //Get model
  return PartialView("_EditPhoneRow", model);
} 
```

并且`_EditPhoneRow`：

```
<td>@Html.EditorFor(model => model.MainModel.Number)</td>
<td>@Html.EditorFor(model => model.MainModel.PhoneKind)</td>
<td><input type="submit" value="Save" class="button" /></td> 
```

实际上，我的每一行都有一个 Ajax 表单，所以当点击编辑时，我想用另一个行替换你所看到的，但是当我添加编辑时，我的所有页面都被破坏了，`_EditPhoneRow`就像我选择所有页面`updateTrget`一样问题？你有什么建议像这样改变所有特定的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:51:32.490

~~根据 HTML 规范，表格不能嵌套。这会产生无效的 HTML，并且取决于用户代理，外部或内部`<form>`根本无法工作。这是 HTML 规范的限制，不要与 ASP.NET MVC 混淆，与它无关。一种可能性是将您的替换`Ajax.BeginForm`为`Ajax.ActionLink`：~~

 ~~```
<tr class="gradeA odd" id="TRTarget">
    @Ajax.ActionLink(
        "Submit", 
        "EditPhone", 
        new { id = item.Id.Value }, 
        new AjaxOptions { UpdateTargetId = "TRTarget" }
    )
</tr> 
```~~  ~~* * *

更新：

在您更新了问题并解释了症状后，我认为您可能忘记将`jquery.unobtrusive-ajax.min.js`脚本引用到您的页面：

```
<script type="text/javascript" src="@Url.Content("~/scripts/jquery.unobtrusive-ajax.min.js")"></script> 
```

如果您不包含此脚本，那么`Ajax.*`诸如`Ajax.BeginForm`和`Ajax.ActionLink`将是简单的 HTML 表单和锚点之类的助手。根本没有 AJAX。正是这个脚本读取了这些助手发出的 HTML5 data-* 属性，并以不显眼的方式对它们进行 AJAX 化处理。~~

# html - HTML中的退格

> ID：11329442
> 
> 赞同：2
> 
> 时间：2012-07-04T12:47:37.710
> 
> 标签：html, backspace

有没有办法在 HTML 中实现 Backspace 功能？我们有什么特殊的标签吗？

可以在 StackOverflow 本身中找到一个显示需要这种东西的示例。请参阅[在 Java 中获取当前堆栈跟踪](https://stackoverflow.com/questions/1069066/get-current-stack-trace-in-java/1069074#1069074)。在最佳答案中，@jinguiy 试图表达 Thread.currentThread().getStackTrace() 但由于站点对链接的解释，引入了不需要的空间。

如果有办法包含退格，则可以避免这种情况。

这只是一个例子，但在许多我们无法控制输出的某些部分的情况下，在 HTML 中具有退格功能可能非常有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:58:25.093

您可以使用负边距：

HTML：

```
<span>this is</span> <span class="backspace">a test</span> 
```

CSS：

```
.backspace { margin-left: -4px; } 
```

演示：http: [//jsfiddle.net/Guffa/HsCPd/](http://jsfiddle.net/Guffa/HsCPd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:51:23.003

HTML 是无状态的，因此不可能仅使用 HTML 来实现退格功能。你可以用javascript做一些事情来达到类似的效果。

另一种方法是在发送之前缓冲您的输出，然后处理缓冲的输出。您可以滚动自己的退格标记，然后在处理缓冲区时，删除退格标记及其之前的字符/标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T00:45:44.870

古尔塔的回答是最好的。以下是如何在您的 html 源代码中执行所有这些操作：

```
<!-- horizontal backspace; adjust the amount of space by changing 4px -->
<style type="text/css">span.backspace{margin-left: -4px}</style>
<!-- The above sets up a "backspace command" in html in the style css-->
this is<span class="backspace"></span>a test
<!-- which can be placed any where after, and will output
this isa test
--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:50:45.323

据我所知，HTML 没有标签可以做到这一点。您需要在代码中添加一些其他语言来执行此类操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T13:11:52.700

我认为 HTML 中没有这样的功能......但是，根据您要达到的效果（仅仅是可视化问题吗？），您可以对[字间距](http://www.w3schools.com/cssref/pr_text_word-spacing.asp)或[字母间距进行操作](http://www.w3schools.com/cssref/pr_text_letter-spacing.asp)

您还可以使用[其他技术](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)，例如在元素上设置负边距。

在您链接的特定示例中，空间是由于 CSS 中的此规则：

```
p code {
padding: 1px 5px;} 
```

如果你用萤火虫删除它，空格消失，因为没有空格（尝试复制并粘贴文本）

相反，如果问题是文本中有不需要的空格，您可以尝试使用 javascript（[这里是一个示例](https://stackoverflow.com/a/6163180/1498848)）或使用服务器端语言处理文本

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-10-19T01:25:17.110

如果您正在寻找简单有效的方法让用户从您的网页返回，您可以使用此 JavaScript 代码

头部

```
<script>
 function goBack()
  {
   window.history.back()
  }
</script> 
```

并在您的正文中插入 HTML

```
<input type="button" value="Back" onclick="goBack()"> 
```

[W3schools 资源](http://www.w3schools.com/jsref/met_his_back.asp)

# zend-framework2 - Zend Framework 2 中的布局预渲染修改

> ID：11329455
> 
> 赞同：1
> 
> 时间：2012-07-04T12:48:23.040
> 
> 标签：zend-framework2, zend-framework-mvc, zend-framework-modules

我很难弄清楚在交付之前如何在 ZF2 中的布局上调用函数。更具体地说，我有某些元素需要在布局和视图中进行更改。这也需要在动作中的每个模块中完成，以便我可以设置所述元素。

这基本上应该是一个渲染引擎。而且我不能切换到其他东西，比如 Twig 或内置引擎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:29:50.680

我不确定您所说的“已交付”和更改“元素”是什么意思。但是，由于 Zend\View 是事件驱动的，我认为您可能应该在`Zend\Mvc\Application`的*渲染*事件上注册自己的侦听器。给它一个大于 1 的优先级，你的监听器的回调将在渲染发生之前被触发。如果您想在布局渲染后更改 HTML，则使用负优先级注册您的侦听器，以便它在渲染后运行。

# java - 通过 Person 对象的 getName() 属性将 Person 对象列表转换为单独的 String

> ID：11329456
> 
> 赞同：8
> 
> 时间：2012-07-04T12:48:24.727
> 
> 标签：java, apache-commons, separator, apache-commons-collection, apache-stringutils

有没有`XXXUtils`我可以做的地方

```
String s = XXXUtils.join(aList, "name", ","); 
```

其中`"name"`是来自`aList`.

我发现只有`StringUtils`方法`join`，但它只会将 a`List<String>`转换为分离的`String`.

就像是

```
StringUtils.join(BeanUtils.getArrayProperty(aList, "name"), ",") 
```

这很快，值得使用。BeanUtils 抛出 2 个检查异常，所以我不喜欢它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-23T11:28:34.887

Java 8 的做法：

```
String.join(", ", aList.stream()
    .map(Person::getName)
    .collect(Collectors.toList())
); 
```

要不就

```
aList.stream()
    .map(Person::getName)
    .collect(Collectors.joining(", "))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T13:30:03.517

我不知道，但是您可以使用反射编写自己的方法，为您提供属性值列表，然后使用它`StringUtils`来加入：

```
public static <T> List<T> getProperties(List<Object> list, String name) throws Exception {
    List<T> result = new ArrayList<T>();
    for (Object o : list) {
        result.add((T)o.getClass().getMethod(name).invoke(o)); 
    }
    return result;
} 
```

要获得您的加入，请执行以下操作：

```
List<Person> people;
String nameCsv = StringUtils.join(getProperties(people, "name")); 
```

# c# - C#定期从串口读取新行

> ID：11329459
> 
> 赞同：3
> 
> 时间：2012-07-04T12:48:39.583
> 
> 标签：c#, serial-port

检查了很多页面，但我仍然发现它没有答案。

我的问题如下。我有一个设备，通过 RS232 连接到计算机。该设备正在发送 TWICE 一秒钟，如下所示：

```
"*X;0;bbb;cc;d;eee;f\r\n" 
```

这些字段是固定宽度的数字字段。每分钟一次，0 标志上升到 1 并且“cc”更改。那我需要这个号码。

在 C# 应用程序中，我无法让它工作。尝试使用recieve事件获取数据，但刷新结果需要10+秒才能处理。这意味着升旗后 10 秒我得到了结果。有时需要更长的时间。

我首先尝试使用 RecieveEvent。我什至尝试填充缓冲区，直到它填满该行，但同样的结果。然后我尝试使用每 300 毫秒调用一次并读取一行的 Timer。还是同样的问题。

所以我的问题是，如何从串口读取和处理最新数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:37:34.840

读取时，串口会缓存数据。这将引入一个小的延迟（但我们说的是毫秒，而不是几十秒）。大多数串行设备驱动程序也允许您配置缓冲，如果它真的很重要的话。

如果您调用 ReadLine，您可能会引入更多延迟，因为它会等到收到换行符后再返回任何数据。您确定您的设备正在发送良好的换行符吗？使用终端仿真程序来查看设备实际发送的内容，因为设备文档通常很糟糕！

我会从端口读取原始数据，然后自己解析。您可能必须更加小心地接收部分数据包，但是您从图片中删除所有中间人，并且您可以更加宽容（例如，不关心数据中是否有换行符）。开始读取，然后将您收到的数据写出到调试控制台，您很快就会看到您的程序正在接收什么以及频率等。这也会告诉您延迟是在串行端口中还是在您的处理中消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-02T14:23:17.273

您可以尝试`serialPort1.readExisting();`然后尝试解析数据。

祝你好运！

# ant - 如何从ant中的cccheckout任务中获取返回码

> ID：11329463
> 
> 赞同：1
> 
> 时间：2012-07-04T12:48:52.117
> 
> 标签：ant, clearcase

我试图编写一个取决于 cccheckout 命令成功或失败的逻辑。是否有类似于 exec 任务中的 returnProperty 属性的东西？

谢谢， 阿尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:24:37.393

Looking at the [CCCheckout documentation](http://ant.apache.org/manual/Tasks/clearcase.html#cccheckout), I would rather use the exception mechanism to process any failure.

```
failonerr 
```

> Throw an exception if the command fails. Default is true. Since ant 1.6.1

In ant, that means you can separate your ant process in two (one if no failure, one one exception), using the **[ant trycatch task](http://ant-contrib.sourceforge.net/tasks/tasks/trycatch.html)**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:14:01.313

您可能会问这个问题，因为 cleartool.exe
有时会表现得很奇怪，这意味着即使没有发生真正的错误，它也会返回 RC -1。
使用`cccheckout`with 的`failonerr="true"`方法有时会导致不必要`Build failed`
的操作，因为任何 RC != 0 都会被 exec 任务作为错误处理。
但是您可以`<exec>`直接将任务与可执行的 cleartool.exe 一起使用并设置属性

*   resultproperty 使 RC 可用作属性
*   outputproperty 使标准输出可用作属性
*   errorproperty 使 stderr 可用作属性

用于进一步处理，即使用条件任务来检查这些属性..
Ant 插件提供的一些 try/catch/finally 功能，例如：

*   [AntContrib](http://sourceforge.net/projects/ant-contrib/)
*   [弗拉卡](http://code.google.com/p/flaka/)

正如 VonC 已经提到的那样，可能会派上用场。
如果之后变得更复杂，请使用[Groovy ant 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)或脚本任务。

# iphone - 静态 NSMutableDictionary

> ID：11329464
> 
> 赞同：8
> 
> 时间：2012-07-04T12:48:54.393
> 
> 标签：iphone, ios, uitableview, nsdictionary

我想使用静态 NSMutableDictionary。您能否帮助如何在课堂上使用静态 NSMutableDictionary。

这是正确的方式吗？.h 文件

```
+(NSMutableDictionary*)contactsToAssignBill;
+(void)setContactsToAssignBill:(NSMutableDictionary*)value; 
```

.m 文件

```
static NSMutableDictionary * contactsToAssignBill;

+(NSMutableDictionary*)contactsToAssignBill
{
    if (!contactsToAssignBill)
        contactsToAssignBill = [[NSMutableDictionary alloc] init];
    return contactsToAssignBill;
}

+(void)setContactsToAssignBill:(NSMutableDictionary *)value
{
    if(contactsToAssignBill != value)
    {
        [contactsToAssignBill release];
        contactsToAssignBill = [value mutableCopy];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:55:53.193

这是做到这一点的正确方法。请记住，字典在任何时候都不会被释放。

# php - 如何在单个页面上为单个用户保持动态变量不变 php

> ID：11329472
> 
> 赞同：0
> 
> 时间：2012-07-04T12:49:22.873
> 
> 标签：php, session, variables, dynamic, constants

我如何才能仅在访问该特定页面时在 php 中保持变量常量。

还有定义的范围是什么（“xxx”，0.0）；php中的函数。

我想在 php 中存储一个动态变量，只要它仅由一个用户使用，它就可以是常量。

可以 $_Session[]; 可以用于此目的吗？

请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:54:39.480

您定义的所有全局变量都具有当前访问者当前脚本的范围；一旦脚本完成处理，它们就会被销毁。这同样适用于常量。

会话特定于访问者，并在同一用户的页面加载/脚本执行中保留。它们何时被销毁取决于您使用的机制（文件/数据库）和网络服务器的配置。如果没有任何设置/特殊配置，您可能会注意到如果您在大约一个小时内不加载或重新加载页面，您的变量将不复存在。

除了会话之外，您当然还可以使用查询字符串将值从一个脚本（页面加载）传递到另一个脚本，但它们将对访问者可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:00:20.617

您可以在脚本中为最新文件创建符号链接，而不是将值存储在变量中。所以你总是可以使用相同的值来访问最新的文件。

# mod-wsgi - mod_wsgi 我从哪里得到它？

> ID：11329474
> 
> 赞同：0
> 
> 时间：2012-07-04T12:49:35.120
> 
> 标签：mod-wsgi

我正在关注本教程：

[http://code.google.com/p/modwsgi/wiki/QuickInstallationGuide](http://code.google.com/p/modwsgi/wiki/QuickInstallationGuide)

并下载我自己的 mod_wsgi 源。

问题是，教程建议我下载我需要的 tar 文件

[http://code.google.com/p/modwsgi/downloads/list](http://code.google.com/p/modwsgi/downloads/list)

但是那里的所有文件都是“so”文件！我不熟悉“so”文件，但它肯定不是 tar 文件，至少不像教程所示。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:52:07.873

这些 .so 文件不是源文件，而是使 apache 能够运行符合 WSGI 的 python web 应用程序的二进制 apache 模块。请注意，每个平台（MAC OSX 和 win32）和 python 版本（它应该与您安装的 python 版本匹配）都有一个特定的 .so 文件。

如果您在 Windows 上，更简单的安装方法应该是获取正确的 .so 文件并将其安装在您的 apache 模块目录中。在 Linux 上，您应该下载源代码并根据 tar 文件中包含的 README 进行编译，该文件也在您提供的链接上 ( [mod_wsgi-3.3.tar.gz](http://code.google.com/p/modwsgi/downloads/detail?name=mod_wsgi-3.3.tar.gz&can=2&q=) )。

如果您获得二进制形式，则不需要构建模块。无论哪种方式，安装后都必须根据[快速安装指南的将](http://code.google.com/p/modwsgi/wiki/QuickInstallationGuide)**模块加载到 Apache**部分中的说明配置 apache 来加载它

# html - 提交特定表单后 IE9 丢失了一些 CSS

> ID：11329480
> 
> 赞同：0
> 
> 时间：2012-07-04T12:49:08.893
> 
> 标签：html, css, internet-explorer-9

我正在编辑的网站有一个搜索表单。作为记录，网站上还有其他几种形式，联系方式等。这是唯一一个有问题的。

提交表单后，一些样式在 IE9 中丢失（可能是其他版本的 IE，尚未测试）。首先，在 html 和 body 中设置的边距和颜色似乎已经丢失。菜单、横幅、文本等似乎都保留了样式。所有样式都在一张纸上，在这里使用...

有什么有用的建议吗？

这是搜索页面的内容和用于检查表单的 php，如果有帮助，以及我认为丢失的 css。

编辑：该页面是一个搜索页面，上面几乎没有任何内容。搜索重新加载同一页面，同时显示搜索功能的结果。因此，应该嵌入相同的嵌入工作表，就我所见，显示相同的 html ......如果这有助于讨论的话。仍在筛选以找到某种类型的错误。当在 IE7-8 中查看时，IE 开发工具似乎也表明此错误也发生在以前版本的 IE 中......

的HTML：

```
<div id="search">
        <br />
            <div style="float:right;font-size:.8em;">
                <form name="form_sidesearch" action="search.html" method="post">
                <input type="hidden" name="action" value="search" />
                <input type="text" name="search_value" value="<?php echo $systems_primary->search_value ?>" />
                <input type="submit" name="submit_search" value="Search Website" />
                </form> <br />

            </div>
    </div>

<?php echo stripslashes($search_results); 
```

PHP：

```
<?php

// -- Begin Search --------------------------------------------------------------------------------------
if($_REQUEST["action"] === "search")
{
  if(strlen($_REQUEST["pg"]) <= 0)
  {

  $_REQUEST["pg"] = 1;
  }

  $search_results = $systems_primary->search_website("index",urldecode($_REQUEST["search_value"]),"<div class=\"listing ui-corner-all\"><a href=\"{ENTRY_URL}\" title=\"{ENTRY_TITLE}\" class=\"listing_title\">{ENTRY_TITLE}</a>{ENTRY_CONTENT} <a href=\"{ENTRY_URL}\" title=\"{ENTRY_TITLE}\" style=\"font-size:.8em;\">...read more</a></div><br /><br />",345,"all",10,$_REQUEST["pg"]);
}

// -- End Search ----------------------------------------------------------------------------------------
?> 
```

丢失的 CSS（可能更多）：

```
html {
background-color:#F6E6C8;
font-size:16px;
font-family:Helvetica;
}
body {
    width:1027px;
    margin:0 auto;
    background-color:#ffffff;
    font-family: arial, 'times new roman', sans-serif;
} 
```

详细说明：实际发生的情况是页面内容作为一个整体向左移动并保持左对齐，而不是使用自动边距保持居中。此外，html 背景颜色会丢失。搜索字段的样式也会丢失或被忽略。不知道还有什么可以改变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:47:38.330

你可以做这样的事情......

```
$('#yourForm").on('submit',function(e){
 $(this).css({
 // reasign all the atributes you lost
 });
 e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:09:46.983

通常，当提交表单后样式丢失时，尤其是当它是 Ajax 操作而不是整个页面重新加载时，这是因为使用 JavaScript 或 jQuery 应用的某些样式在重新加载页面的更新部分时没有重新应用。这可能涉及创建其他元素，或者可能涉及将 CSS 类添加到 1 个或多个元素。

这尤其可能发生在 HTML 表单元素的样式中，因为在某些情况下，某些表单元素的重样式只能在 JavaScript 或 jQuery 的帮助下完成。

在这种情况下，识别在页面首次加载时为相关内容设置样式的 JavaScript 或 jQuery，然后在页面更新后重新应用它（在 Ajax 调用成功完成之后，或者在浏览器重新加载页面或加载新页面）。

如果做不到这一点，请比较页面前后的 HTML，看看有什么变化。body 标记上可能有一个 CSS 类，或者一个容器类的设置不一致。如果加载了新页面，则可能会下载一组不同的 CSS 文件，或者可能存在一个页面具有但另一个页面没有的嵌入式样式表。

否则，请验证 HTML 和 CSS 是否有效。在呈现无效代码时，某些浏览器比其他浏览器更宽容。看起来像浏览器错误的情况可能是由错误的代码引起的。

如果所有这些都没有结果，而且问题似乎越来越可能是由一个晦涩的浏览器错误引起的，那么将代码减少到可以持续重现问题的最简单状态，并尝试更清楚地确定问题所在bug的性质是。这将使搜索可能的修复和寻求帮助变得更加容易。并且在减少代码的过程中，如果问题突然消失，最后删除的代码可能至少部分是导致问题的原因。

相反，当问题似乎没有规律或原因时，有时从头开始重新实现代码以查看问题是否仍然存在是有帮助的。如果问题在编写代码时的某个时间点开始出现，那么同样，最后添加的代码可能至少部分是导致问题的原因。

# c# - 在 WebBrowser 控件中全屏播放 youtube

> ID：11329484
> 
> 赞同：4
> 
> 时间：2012-07-04T12:50:07.787
> 
> 标签：c#, .net, wpf, youtube, browser

我有以下 XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

<Grid>

    <WebBrowser x:Name="webBrowser1"/>

</Grid> 
```

我尝试播放 youtube 视频。这是我尝试过的：

```
this.webBrowser1.Source = new Uri("http://youtube.googleapis.com/v/L8bE5-g8VC0"); 
```

这个显示带有所有播放器控件的 YouTube 播放器。但是全屏按钮不起作用。我点击它，但播放器没有全屏显示。按钮变为刚刚禁用。

我也试过这个：

```
this.webBrowser1.Source = new Uri("http://www.youtube.com/embed/L8bE5-g8VC0"); 
```

这也会显示带有所有播放器控件的 YouTube 播放器。全屏按钮工作正常。但是，当我再次观看此视频或另一个视频（通过设置 Source 属性）时，播放器按钮会消失。要再次查看播放器按钮，我需要删除 IE 的临时 Internet 文件。我可以在每次播放视频之前删除临时文件，但这对我来说不是解决方案。

我正在运行 Windows 7 64 位并使用 WPF 4.0。我想要的是在我的 WebBrowser 中显示 YouTube 播放器并让全屏按钮正常工作。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T13:06:33.177

对我有用的解决方案 - 构建一个带有嵌入式视频播放器的小型 HTML 页面：

```
public static class WebBrowserExtensions
{
    private static string GetYouTubeVideoPlayerHTML(string videoCode)
    {
        var sb = new StringBuilder();

        const string YOUTUBE_URL = @"http://www.youtube.com/v/";

        sb.Append("<html>");
        sb.Append("    <head>");
        sb.Append("        <meta name=\"viewport\" content=\"width=device-width; height=device-height;\">");
        sb.Append("    </head>");
        sb.Append("    <body marginheight=\"0\" marginwidth=\"0\" leftmargin=\"0\" topmargin=\"0\" style=\"overflow-y: hidden\">");
        sb.Append("        <object width=\"100%\" height=\"100%\">");
        sb.Append("            <param name=\"movie\" value=\"" + YOUTUBE_URL + videoCode + "?version=3&amp;rel=0\" />");
        sb.Append("            <param name=\"allowFullScreen\" value=\"true\" />");
        sb.Append("            <param name=\"allowscriptaccess\" value=\"always\" />");
        sb.Append("            <embed src=\"" + YOUTUBE_URL + videoCode + "?version=3&amp;rel=0\" type=\"application/x-shockwave-flash\"");
        sb.Append("                   width=\"100%\" height=\"100%\" allowscriptaccess=\"always\" allowfullscreen=\"true\" />");
        sb.Append("        </object>");
        sb.Append("    </body>");
        sb.Append("</html>");

        return sb.ToString();
    }

    public static void ShowYouTubeVideo(this WebBrowser webBrowser, string videoCode)
    {
        if(webBrowser == null) throw new ArgumentNullException("webBrowser");

        webBrowser.NavigateToString(GetYouTubeVideoPlayerHTML(videoCode));
    }
} 
```

用法：

```
this.webBrowser1.ShowYouTubeVideo("L8bE5-g8VC0"); 
```

# javascript - iFrame - 在 Web 应用程序中实现 iframe 的成本

> ID：11329487
> 
> 赞同：2
> 
> 时间：2012-07-04T12:50:23.387
> 
> 标签：javascript, performance, iframe

首先，澄清一下，这个问题与加载页面渲染性能无关。

我正在开发一个使用 SVG 和大量 javascript 的 Web 应用程序（HTML5、SVG、CSS3 和 Js）。它达到了拖动明显缓慢的地步，我们不得不返回并重新编写和审查所有现有功能以优化应用程序。

我的一个队友认为，如果我在 iframe 中加载功能，Web 应用程序不会受到太大影响，因为浏览器会在单独的线程中处理它，因此现有的 Web 应用程序选项卡不必首当其冲iframe 内容渲染和更新。另外，如果需要，iframe 中的内容可以很容易地在 div 中呈现。

我的问题是，浏览器（当然是最新的和最好的）在处理 iframe 时是否会为渲染和性能分配单独的资源？应用程序加载不是这个问题的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T23:09:38.757

我不想在这里跳上一个旧线程，但公认的答案具有误导性。您的朋友是对的：iframe 被有效地沙盒化，因此它们的渲染过程在现代浏览器中是独立的、异步的和多线程的。因此，虽然将应用程序的部分分割成 iframe 不会加速任何 javascript 执行，但它很可能会在分割和简化每个页面组件的 DOM 的程度上提高*渲染性能。*

作为参考，请查看[有关 Fastbook 的故事](http://www.sencha.com/blog/the-making-of-fastbook-an-html5-love-story)，这是 Sencha 工程师在几个星期内将其作为一个晚上的项目整理出来的，目的是为了表明 Facebook 网络应用程序可以得到极大的优化。除其他外，他们使用 iframe 进行沙箱渲染。

作为旁注，这并不是浏览器应该如何工作的。（例如，Chrome 团队鼓励人们在需要 iframe 来提高性能的情况下提交错误。）尽管如此，在可预见的未来，它仍然是复杂应用程序的最佳实践，尤其是那些具有多个“面板”和高回流率的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:15:29.253

Same-domain`<iframe>`保证在同一个线程中运行。

如果它们不能相互交互，浏览器只能在不同线程上运行两个页面。

# php - Doctrine 1.2 - 在用户搜索输入后构建查询

> ID：11329490
> 
> 赞同：0
> 
> 时间：2012-07-04T12:50:34.753
> 
> 标签：php, mysql, doctrine, doctrine-1.2

我有下表（文章、类别、关系）结构：

```
articles
 >id
 >title
 >body

cats
 >id
 >title

cat_article_relations
 >id
 >cat_id
 >article_id 
```

现在我创建了一个页面，用户可以在其中选择一个或多个类别（使用复选框）。提交搜索表单后，我有一个选择了所有类别 ID 的数组。现在，当我尝试加载具有所有选定类别的所有文章时，就会出现我的问题。

使用时：

```
...    
->leftJoin('a.Cat_article_relations rl')
->andWhere('rl.cat_id = ?', $sg[0])
... 
```

它之所以有效，是因为我只寻找一个包含的类别。一旦我添加多个“->andWhere”并循环遍历我的所有类别ID（在我得到的数组中），它就不再起作用了。我检查了 Doctrine 1.2 文档以获取任何解决方案，但找不到任何东西。“-> whereIn”和类似的没有给出我想要的结果。

我只想获取与所有选定类别相关的所有文章。也许有人可以给我一个提示:)

**信息：** 如果你有一个纯 MySQL 查询的解决方案，那对我也有很大的帮助。它不必用 Doctrine 编写。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:04:08.803

我不确定我是否理解这种关系，但这应该从：

```
->leftJoin('a.Cat_article_relations rl')
->andWhere('rl.cat_id = ?', $sg[0]) 
```

至

```
->leftJoin('a.Cat_article_relations rl WITH rl.cat_id=?', $sg[0]) 
```

# html - CSS3中闪烁的灯光（点击时）动画

> ID：11329497
> 
> 赞同：0
> 
> 时间：2012-07-04T12:50:46.377
> 
> 标签：html, css

我只有一本用于 iPad 的 HTML5 漫画书，我正在制作交互式。在漫画书的第 8 页（见下面的链接），我所指的场景在右下角，应该看起来很暗，因为目前在它下面有一个深色版本，让它看起来好像很亮尚未开启。

[漫画的链接](http://www.spiritdigital.co.uk/outpost/issue-interactive/08.html)

这就是我想要发生的事情：

1.  点击时，播放声音（完美）
2.  单击时，深色背景层的不透明度会随着播放声音开始时听到的短电音效同步闪烁。不透明度应以 0 结束，以显示灯现在已打开。

这是目前发生的情况：

1.  点击时，播放声音（完美）
2.  单击时，深色背景图层的不透明度设置为 0，但一旦用户释放单击，它就会返回 1。

基本上，我会在不透明度参数之间引入一个延迟和一个“闪烁”来模拟闪烁的光。

HTML

```
<a href="#" onclick="if(!playing) document.getElementById('player').play(); else document.getElementById('player').pause();">

    <div class="ibox" id="p8s5">

        <div id="flicker"></div>    

        <button id="playButt" class="animated flash" onclick="if(!playing) document.getElementById('player').play(); else document.getElementById('player').pause();">                
        </button>

    </div> 

</a> 
```

CSS

```
div#flicker {
opacity: 1;
-transition-property: opacity;
-webkit-transition-duration: 0s;
-webkit-transition-delay: 0s;
position: absolute;
bottom: 1px; right: 1px;
width: 245px; height: 341px;
background: url('img/p8s5.jpg') no-repeat;
}

div#flicker:active, div#flicker:focus {
  opacity:0;
} 
```

希望你能帮忙。

非常感谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:03:08.777

这个[jsfiddle](http://jsfiddle.net/mGqma/)可以解决你的问题。

首先，它用css3创建一个动画：

```
.animateFlicker {
    -webkit-animation: flicker 17s;    
}

@-webkit-keyframes flicker{
    0% {opacity:1}
    3% {opacity:0}
    6% {opacity:0}
    7% {opacity:1}
    8% {opacity:0}
    9% {opacity:1}
    10% {opacity:0}
    99% {opacity:0}
    100% {opacity:1}
} 
```

然后它用jQuery监听click事件来执行动画并在时间结束后停止它。

```
$('#flicker').click(function(){
    var $this = $(this);
    $this.addClass('animateFlicker');
    setTimeout(function() 
    {
        $this.removeClass('animateFlicker');
    }, 17000);    
});​ 
```

注意我只使用了 webkit，因此您需要对其进行更改以使其在所有浏览器中都能正常工作。

# android - 如何创建带圆角的条纹按钮

> ID：11329498
> 
> 赞同：3
> 
> 时间：2012-07-04T12:50:49.417
> 
> 标签：android

是否可以创建一个带有条纹背景和圆角的按钮？

我知道如何使用[http://www.stripegenerator.com/](http://www.stripegenerator.com/)和带有 tileMode="repeat" 的位图 xml 制作条纹背景（对角条纹），并且我知道如何使用形状创建圆角，我什至可以将它们完全放在图层中-list 但我不知道如何制作带圆角的位图....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:54:08.073

我想你可以看看 Draw Nine Patch 技术。

这是官方文档：

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

这是一个很好的教程：

[http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:22:49.457

我用以下 xml 解决了我的问题

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <layer-list>
            <item android:top="1dp" android:bottom="1dp" android:left="1dp" android:right="1dp">
                <bitmap android:src="@drawable/btn_green_light_bkg_pattern"
                        android:tileMode="repeat"
                        android:dither="true"/>
            </item>
            <item>
                <shape android:shape="rectangle">
                    <corners android:radius="5dp"/>
                    <stroke android:width="2dp" android:color="#e6f4cc"/>
                    <solid android:color="@android:color/transparent"/>
                </shape>
            </item>
            <item android:top="2dp">
                <shape android:shape="rectangle">
                    <corners android:radius="5dp"/>
                    <stroke android:width="1dp" android:color="#c3e392"/>
                    <solid android:color="@android:color/transparent"/>
                </shape>
            </item>
            <item>
                <shape android:shape="rectangle">
                    <corners android:radius="5dp"/>
                    <stroke android:width="1dp" android:color="#a6a6a6"/>
                    <solid android:color="@android:color/transparent"/>
                </shape>
            </item>
        </layer-list>
    </item>
    <item android:state_pressed="true">
        <layer-list>
            <item android:top="1dp" android:bottom="1dp" android:left="1dp" android:right="1dp">
                <bitmap android:src="@drawable/btn_green_dark_bkg_pattern"
                        android:tileMode="repeat"
                        android:dither="true"/>
            </item>
            <item>
                <shape android:shape="rectangle">
                    <corners android:radius="5dp"/>
                    <stroke android:width="2dp" android:color="#e6f4cc"/>
                    <solid android:color="@android:color/transparent"/>
                </shape>
            </item>
            <item android:top="2dp">
                <shape android:shape="rectangle">
                    <corners android:radius="5dp"/>
                    <stroke android:width="1dp" android:color="#c3e392"/>
                    <solid android:color="@android:color/transparent"/>
                </shape>
            </item>
            <item>
                <shape android:shape="rectangle">
                    <corners android:radius="5dp"/>
                    <stroke android:width="1dp" android:color="@android:color/black"/>
                    <solid android:color="@android:color/transparent"/>
                </shape>
            </item>
        </layer-list>
    </item>
</selector> 
```

# http - Hadoop - 获取失败太多 - HTTP 响应代码：500

> ID：11329501
> 
> 赞同：0
> 
> 时间：2012-07-04T12:50:56.360
> 
> 标签：http, hadoop

我正在尝试以伪分布式模式运行一个简单的作业。masters 文件包含 localhost，slaves 文件包含 localhost。conf 文件正确指向 jobtracker 和 namenode。

在减少尝试的日志中，我一直看到此错误：2012-07-04 14:31:11,149 WARN org.apache.hadoop.mapred.ReduceTask: java.io.IOException: Server returned HTTP response code: 500 for URL:

```
http://localhost:50060/mapOutput?job=job_201207041420_0002&map=attempt_201207041420_0002_m_000000_0&reduce=0 
```

手动尝试上面的 URL，我得到这个错误： java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.getLocalPort()I

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:50:44.513

问题已解决，是 API 不匹配。我在某个时候将一个特定的与 j2ee 相关的 jar 复制到了 Hadoop 的 lib 目录中，并且该 jar 是一个较新的版本，它不包含另一个 jar 中另一个类所请求的特定类。

我回滚到默认库，它工作！

# c++ - 找到一组整数的多项式

> ID：11329506
> 
> 赞同：2
> 
> 时间：2012-07-04T12:51:16.393
> 
> 标签：c++, wolfram-mathematica, integer, porting, polynomial-math

我一直在研究 Mathematica 中的一个函数，它生成然后改变一组整数，然后找到该组的插值多项​​式。我可以在 C++ 中很好地生成集合，但我不知道如何模拟 Mathematica 的`Expand[InterpolatingPolynomial[]]`命令。我知道这与多项式插值问题有关，我只是不知道从哪里开始为它编写 C++ 代码。

我已经向 Wolfram 请求了一份 MathCode C++ 的试用版，看看它是否会为我转换它，但我想我宁愿尝试自己解决这个问题，所以谁能指出我正确的方向可以开始这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:46:31.043

您可以使用伪逆计算一种形式的插值多项​​式，这是一个使用 5 阶多项式近似`Sin`函数的示例：

```
(* A function to compute {x^5, x^4, x^3, x^2, x, 1} of x *)
f = Function[x, x^# & /@ Reverse@Range[0, 5]]

xvals = Range@5;
yvals = Sin /@ Range@5;

(* Find the polynomial coefficients by solving the matrix equation *)
coeffs = PseudoInverse[f /@ xvals].yvals
poly = {x^5, x^4, x^3, x^2, x, 1}.coeffs

Plot[{Sin[x], poly}, {x, 0, 10}] 
```

> ![数学图形](../Images/927bca9ab92c4e7d29fdc8b4b80eb724.png)

您可以看到这给出了与函数相同的输出`InterpolatingPolynomial`：

```
Simplify[InterpolatingPolynomial[Sin /@ Range@6, x] // N]
Plot[{Sin[x], %}, {x, 0, 10}] 
```

> ![数学图形](../Images/9190f9b045481be42019e4d04fbef3bf.png)

该技术在*构造插值多项式*部分中的[多项式解释中进行了描述](http://en.wikipedia.org/wiki/Polynomial_interpolation)

 *希望这足以让您构建一个有效的 C++ 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:53:37.700

您可能正在考虑最小二乘拟合。在那里你假设一些函数来描述你的数据，然后计算最小化所有点的均方误差的系数。在 Mathematica 中查找 - 知道您要查找的东西的名称会很有帮助。

插值完全是另一回事。*

# ios - 使用 RubyMotion 更新 NSManagedObject 项目

> ID：11329509
> 
> 赞同：1
> 
> 时间：2012-07-04T12:51:20.593
> 
> 标签：ios, ruby, rubymotion

我正在跟上美妙的 RubyMotion 的速度，但在更新 NSManagedObject 字段时遇到了问题，我的项目基于示例应用程序[Locations](https://github.com/HipByte/RubyMotionSamples/tree/master/Locations)

locations_store.rb 中的代码有一个创建和删除...

```
def add_location
    # Yield a blank, newly created Location entity, then save the model.
    yield NSEntityDescription.insertNewObjectForEntityForName('Location', inManagedObjectContext:@context)
    save
end

def remove_location(location)
    # Delete the given entity, then save the model.
    @context.deleteObject(location)
    save
end 
```

但是，我正在努力寻找一种方法来实现类似的方法来更新数据存储，在我的新 location_details_controller.rb 中，我正在存储一个这样的位置实例，

```
def showDetailsForLocation(location)
    @location = location
    navigationItem.title = "%0.3f, %0.3f" % [location.latitude, location.longitude]
end 
```

然后当点击保存按钮时触发......

```
def saveLocation(sender)

    LocationsStore.shared.update_location(@objectid, "field1updatevalue", "field2updatevalue")
end 
```

但是，我尝试了很多方法来破解它，但找不到用这种方法更新记录的方法......

```
def update_location(location, f1, f2)
    location.f1 = f1
    location.f2 = f2
    save
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:08:32.330

我放弃了尝试自己导航 NSManagedObject 并使用了基本但可行[的活动记录，例如 ClarkWare 的包装器](https://github.com/clarkware/Commotion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:51:22.837

看起来您没有在 update_location 中为上下文创建对象。在保存上下文之前，您应该在该上下文中生成一个新对象或在商店中找到一个。

在更新之前尝试从存储中获取对象，然后保存上下文。

# objective-c - 如何创建一个直接接受带有格式的字符串作为参数的方法？

> ID：11329513
> 
> 赞同：5
> 
> 时间：2012-07-04T12:51:30.480
> 
> 标签：objective-c, string, cocoa, methods, format

我不知道该怎么问这个问题。我想创建一个类似`stringWithFormat:`or的方法`predicateWithFormat:`，即我的方法直接接受参数作为带有格式说明符的字符串。我怎样才能做到这一点？

**例如，**

```
-(void) someMethod: (NSString *)str, format; 
```

这样我以后可以这样称呼它：

```
[someObject someMethod:@"String with format %@",anotherString]; 
```

*这与任何特定的上下文无关。*

我正在`predicateWithFormat`使用类似于以下的代码：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name like myName"]; 
```

这没有用，但是：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name like 'myName'"]; 
```

工作类似于：

```
NSString *str = @"myName";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name like %@",str]; 
```

所以这意味着该方法能够理解给定的参数是否在其中使用了格式说明符。我很好奇如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T12:57:08.097

使用可变参数宏`va_start`,`va_end`等：

```
-(void) someMethod: (NSString *)fmt, ...
{
    va_list va;
    va_start(va, fmt);    
    NSString *string = [[NSString alloc] initWithFormat:fmt
                                              arguments:va];
    va_end(va);

    // Do thing with string
} 
```

要记住的重要一点是可变参数会丢失它们的类型，因此函数喜欢`printf()`并`[NSString stringWithFormat]`使用格式字符串来帮助确定有多少参数以及每个参数应该如何解释。如果您需要不同的语义，那么您将需要以某种方式提供此信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T12:58:06.703

您正在寻找具有可变数量参数的方法。方法需要像这样声明：

```
-(void) someMethod: (NSString *)str, ...; // Yes, three dots 
```

在方法内部，您使用宏来一一提取参数。第一个参数需要提供足够的信息来说明传递了多少其他参数。例如，可以通过计算未转义的格式说明符`stringWithFormat`来判断传递了多少参数。`%`

```
- (void) someMethod:NSString *)str, ... {
    va_list args;
    va_start(args, str);
    int some_count = /* figure out how many args there are */;
    for( int i = 0; i < some_count; i++ ) {
        value = va_arg(args, <some_type>); // You need to derive the type from the format as well
    }
    va_end(args);
} 
```

# wcf - IClientChannel 的 Mono WCF 问题

> ID：11329518
> 
> 赞同：0
> 
> 时间：2012-07-04T12:52:12.473
> 
> 标签：wcf, mono

我是 mono 的新手，但被要求考虑使用 mono 为 Linux、Android 和/或 MacOS 运行我们现有的 .NET 客户端应用程序。

服务器/客户端使用 WCF 双工通信与 NetTcpBinding。我创建了一个非常精简的客户端版本，以尝试分析与服务器的连接的哪些基本原理将在单声道中工作（我正在运行单声道 v2.10.8）。

我遇到的第一个问题是对 IClientChannel 的强制转换。客户端上的 factory.CreateChannel 结果给出了 InvalidCastException。但是我设法通过创建一个实现服务合同和 IClientChannel 的辅助接口来解决这个问题

`public interface IMySessionChannel : IMySession, IClientChannel {}`

...并在我的 ChannelFactory 中使用它

`_factory = new DuplexChannelFactory<IMySessionChannel>(....)`

但我仍然有一点问题。我为 IClientChannel 的 Closing、Closed 和 Faulted 事件添加了事件处理程序，它们在接收到事件时将消息写入客户端的屏幕。

在 Windows 上一切正常，但是当以单声道运行客户端（仍然在 Windows 机器上运行单声道命令提示符）并关闭服务器时，事件似乎没有传递给客户端。

我错过了什么吗？单声道中的 IClientChannel 接口是否存在一般问题？对服务器的调用与回调一样工作，但我只是对 IClientChannel 有一些问题。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:45:39.460

Mono 中存在与 Mono相关的[错误 #4511](https://bugzilla.xamarin.com/show_bug.cgi?id=4511)`DuplexChannelFactory`，导致通道无法转换为`IClientChannel`. 我上周解决了这个问题，但可能还有其他问题。

如果您仍然遇到问题，能否请您提交带有测试用例的错误报告？

# java - 从 JNI 操作 ByteBuffer

> ID：11329519
> 
> 赞同：18
> 
> 时间：2012-07-04T12:52:12.763
> 
> 标签：java, java-native-interface, bytebuffer

我需要将（直接）传递给`ByteBuffer`将读取/写入缓冲区的本机函数。完成这些操作后，我想`ByteBuffer`使用常规函数访问 Java 代码；特别是，`limit()`应该`position()`反映缓冲区的当前状态。

由于 JNI 将用于`GetDirectBufferAddress()`直接访问底层缓冲区，因此我假设我应该在完成读/写后调用`flip ()`// 。但是，我一直无法完成这项工作。例如，在我从 C 中读取几个字节到缓冲区中并相应地设置其限制和位置后，我无法从 Java 中查询这些字节；Java关于缓冲区限制和位置的想法与我在C代码中所做的不一致。`limit()``position()`

任何人都可以指出一个可行的例子吗？提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T12:58:50.383

您可以让您的本机方法返回写入的字节数。然后在 Java 端相应地更新 ByteBuffer。

```
public class SomeClass {
    /**
     * @param buffer input/output buffer
     * @return number of bytes written to buffer
     */
    private native int nativeMethod(ByteBuffer buffer);

    public void myMethod() {
        ByteBuffer buffer = ByteBuffer.allocateDirect(100);
        int written = nativeMethod(buffer);
        if (written > 0) {
            buffer.limit(written);
        }
        ...
    }
} 
```

* * *

**编辑**

尝试在 C 端设置限制值也有效，所以我不知道您为什么会遇到问题。

幼稚的实现（没有缓存等）：

```
static jint nativeMethod(JNIEnv *env, jobject obj, jobject buffer) {
    jclass cls = env->GetObjectClass(buffer);
    jmethodID mid = env->GetMethodID(cls, "limit", "(I)Ljava/nio/Buffer;");
    char *buf = (char*)env->GetDirectBufferAddress(buffer);
    jlong capacity = env->GetDirectBufferCapacity(buffer);
    int written = 0;

    // Do something spectacular with the buffer...

    env->CallObjectMethod(buffer, mid, written);
    return written;
} 
```

在 Java 端进行检查时，在缓冲区上设置了限制。

# c - 使用 C 中的宏生成函数

> ID：11329521
> 
> 赞同：2
> 
> 时间：2012-07-04T12:52:20.947
> 
> 标签：c, function, macros

我有以下宏：

```
‎#define GTR(type) \‎
type type##_gtr(type a, type b) \‎
‎{ \‎
‎   return a > b ? a : b;\‎
‎}‎ 
```

我知道它会生成函数，但是如果`GTR(unsigned int)`向外扩展`main()`，我该如何调用生成的函数？`_gtr(a, b)`不工作...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:54:21.973

您必须编写`unsigned int_gtr(a,b)`它，使其不适用于您创建的宏定义的该类型。

原因是预处理器只是简单地替换了`type`参数并将其连接到## 之后的文本中。

你可以做一些事情，比如为 unisgned int 创建一个 typedef，这样就没有空格，然后使用它，例如：

```
typedef unsigned int uint;
GTR(uint)
...
uint_gtr(a,b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T12:54:42.770

这：

```
type##_gtr 
```

宏内部将`type`参数的值与文本粘合在一起`_gtr`。这发生在返回类型和参数列表的左括号之间，即这形成了函数的名称。

所以如果你使用`GTR(unsigned int)`，你会失败，因为完整的函数原型最终看起来像这样：

```
unsigned int unsigned int_gtr(unsigned int a, unsigned int b) 
```

这在语法上是不正确的。基本上，宏有一个弱点，它假定类型名称不能包含空格，这在 C 中是不正确的。

但是，如果您使用`GTR(unsigned)`，则应将其称为`unsigned_gtr()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T12:56:22.387

`GTR(unsigned)`将扩展为：

```
unsigned unsigned_gtr(unsigned a, unsigned b)
{
‎   return a > b ? a : b;
}‎ 
```

在这种情况下，您应该调用`unsigned_gtr(a, b)`.

`GTR(unsigned int)`但是，会因语法错误而失败，因为您有两个单独的标记，并且无法正确生成函数的名称。

# javascript - 主干.js 和车把：字符串不是函数

> ID：11329523
> 
> 赞同：1
> 
> 时间：2012-07-04T12:52:32.633
> 
> 标签：javascript, backbone.js, handlebars.js

我正在尝试运行此代码，但出现此错误：`Uncaught TypeError: string is not a function`在哪里写：`var html = template(context);` 有人知道原因吗？

**看法**

```
define(["jQuery", "underscore", "Backbone", "Handlebars","models/person" ,"text!templates/userlistview.html"], 
function($, _, Backbone, Handlebars,Person, template) {

    var UserListView = Backbone.View.extend({

        template: Handlebars.compile(template),

        render: function() {
          var context = JSON.parse(JSON.stringify(this.model));
          console.log(context);
          var html = template(context);
          $(this.el).html(html);

          return this;
        }

     });

     return UserListView;
}); 
```

**路由器**

```
define(["jQuery", "underscore", "Backbone", "collections/usercollection", "models/person", "views/userlistview"], 
function($, _, Backbone, Usercollection, Person, UserListView) {

    var AppRouter = Backbone.Router.extend({

        routes: {
            "": "list",
        },

        list: function() {
            this.utenti= new Person({name:"stefano",cognome:"magli"});
            this.page= new UserListView({model:this.utenti});

            this.page.render();
        }

    });

    return AppRouter;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:14:12.830

添加`this`：

```
var html = this.template(context); 
```

代替：

```
var html = template(context); 
```

`template`is `"text!templates/userlistview.html"`, while`this.template`是你编译的模板。

**编辑：**

这与您的问题无关，但您可以替换`JSON.parse(JSON.stringify(this.model))`为`this.model.toJSON()`.

# php - PHP stream_select 不起作用

> ID：11329533
> 
> 赞同：2
> 
> 时间：2012-07-04T12:52:59.277
> 
> 标签：php, windows, proc-open

我正在使用 Windows 7 和 php 5。

我在通过 proc_open 执行进程并检查超时时遇到问题。我使用 stream_select 通过以下代码检查超时：

```
<?php
$descriptorspec = array(
0 => array("file", $infile, "r"),  // stdin is a pipe that the child will read from
1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
2 => array("pipe", "w") // stderr is a file to write to
);
$prog = @proc_open ($objname.".exe", $descriptorspec, $pipes, "$DOCUMENT_ROOT/judge/temp", null, null);
if(!is_resource($prog)) ErrorResult("","proc_open err");

$streams = array($pipes[1]);
$start = microtime(true);
$ret = stream_select($streams, $a = null,$a = null, 1);
$stop = microtime(true);
?> 
```

这是我用来测试的 C++ 代码：

```
#include<windows.h>

int main(){
    Sleep(2000);
    return 0;
} 
```

在该代码中，根本没有输出，但 stream_select 不会等待 1 秒并返回 1。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:15:47.053

我怀疑您的 C++ 可执行文件可能由于某种原因没有真正执行，但退出代码可能会被`cmd.exe`.

*   获得 C++ 可执行文件实际运行的证明。在调用`stream_select`.

*   别挡`cmd.exe`道：

    $opts = array('suppress_errors' => false, 'bypass_shell' => true);

    $prog = proc_open ($objname.".exe", $descriptorspec, $pipes, "$DOCUMENT_ROOT/judge/temp", null, null, $opts);

# android - 不显示最近的搜索，自定义建议是

> ID：11329535
> 
> 赞同：9
> 
> 时间：2012-07-04T12:53:09.230
> 
> 标签：android, search-suggestion

我有一个搜索小部件 (SearchView)，在键入时显示自定义建议。我已按照[官方指南](http://developer.android.com/guide/topics/search/adding-recent-query-suggestions.html)将最近的查询添加到建议中，但我仍然只有自定义建议。
对于每次搜索，我的片段调用此函数（已验证）：

```
private void addQueryToRecent(String query) {
    SearchRecentSuggestions suggestions = new SearchRecentSuggestions(getActivity(),
            MyCustomSuggestionProvider.AUTHORITY,
            MyCustomSuggestionProvider.MODE);
    suggestions.saveRecentQuery(query, "recent");
} 
```

我的建议提供者似乎还可以：

```
public class MyCustomSuggestionProvider extends SearchRecentSuggestionsProvider {

public final static String AUTHORITY = "com.zgui.musicshaker.provider.MyCustomSuggestionProvider";
public final static int MODE = DATABASE_MODE_QUERIES | DATABASE_MODE_2LINES;

public MyCustomSuggestionProvider() {
    setupSuggestions(AUTHORITY, MODE);
}

@Override
public Cursor query(Uri uri, String[] projection, String sel,
        String[] selArgs, String sortOrder) {
    //retrieves a custom suggestion cursor and returns it
}
} 
```

可搜索的.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
android:hint="artist, track informations..."
android:label="@string/app_name"
android:queryAfterZeroResults="true"
android:searchSuggestAuthority="com.zgui.musicshaker.provider.MyCustomSuggestionProvider"
android:searchSuggestSelection=" ?" /> 
```

显现 ：

```
 <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>
<provider
        android:name=".provider.MyCustomSuggestionProvider"
        android:authorities="com.zgui.musicshaker.provider.MyCustomSuggestionProvider"
        android:enabled="true" >
    </provider> 
```

根据那篇[文章](https://stackoverflow.com/questions/6270648/where-does-android-store-search-term-history-for-our-search-enabled-activities)，我应该在 data/data/app.package.name/databases/databasename.db 有一个最近的搜索数据库，但我似乎没有......
或者我应该添加MyCustomSuggestionProvider.query() 返回的光标中的“最近的搜索建议”？欢迎任何想法......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T15:29:01.540

找到它：在 Android 文档上根本不清楚，但我需要自己提出请求并在 MyCustomSuggestionProvider.query() 中合并游标：

```
Cursor recentCursor = super.query(uri, projection, sel, selArgs,
            sortOrder);
Cursor[] cursors = new Cursor[] { recentCursor, customCursor};
return new MergeCursor(cursors); 
```

确保您在两者中都有相同的列......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T04:21:43.070

```
private static final String[] SEARCH_SUGGEST_COLUMNS = {
        SearchManager.SUGGEST_COLUMN_FORMAT,
        SearchManager.SUGGEST_COLUMN_ICON_1,
        SearchManager.SUGGEST_COLUMN_TEXT_1,
        SearchManager.SUGGEST_COLUMN_INTENT_DATA,
        BaseColumns._ID }; 
```

以上是最近搜索建议数据库中使用的列列表，为您的自定义搜索建议使用相同的列表以避免冲突

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-17T01:01:54.843

为了扩展 elgui 的答案，以下是我如何匹配列的示例：

```
 @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
        final Cursor recentsCursor = super.query(uri, projection, selection, selectionArgs, sortOrder);
        final Cursor customResultsCursor = queryCache(recentsCursor, selectionArgs[0]);
        return new MergeCursor(new Cursor[]{recentsCursor, customResultsCursor});
    }

    private Cursor queryCache(Cursor recentsCursor, String userQuery) { 
        final MatrixCursor arrayCursor = new MatrixCursor(recentsCursor.getColumnNames());

        final int formatColumnIndex = recentsCursor.getColumnIndex(SearchManager.SUGGEST_COLUMN_FORMAT);
        final int iconColumnIndex = recentsCursor.getColumnIndex(SearchManager.SUGGEST_COLUMN_ICON_1);
        final int displayColumnIndex = recentsCursor.getColumnIndex(SearchManager.SUGGEST_COLUMN_TEXT_1);
        final int queryColumnIndex = recentsCursor.getColumnIndex(SearchManager.SUGGEST_COLUMN_QUERY);
        final int idIndex = recentsCursor.getColumnIndex("_id");

        final int columnCount = recentsCursor.getColumnCount();

        // Populate data here
        int startId = Integer.MAX_VALUE;

        for (String customSearchResult : customSearchResults) {
            final Object[] newRow = new Object[columnCount];
            if (formatColumnIndex >= 0) newRow[formatColumnIndex] = 0;
            if (iconColumnIndex >= 0) newRow[iconColumnIndex] = R.drawable.invisible;
            if (displayColumnIndex >= 0) newRow[displayColumnIndex] = customSearchResult;
            if (queryColumnIndex >= 0) newRow[queryColumnIndex] = customSearchResult;
            newRow[idIndex] = startId--;
            arrayCursor.addRow(newRow);
        }       

        return arrayCursor;
    } 
```

由于这是基于 SearchRecentSuggestionsProvider 的实现细节，所以在其他情况下它仍然可能失败，编写自己的最近历史记录并一起执行可能更值得。

# python - ifs 和 elifs 在轮盘游戏中无法正常工作 - python

> ID：11329538
> 
> 赞同：0
> 
> 时间：2012-07-04T12:53:20.633
> 
> 标签：python, random, if-statement, python-3.x, int

好的，所以我正在制作轮盘赌游戏。旋转器落在的随机数称为“数字”。这是一个非常基本和简单的代码，但它似乎不适用于我。目前你要么选择一个特定的数字，要么选择 1 - 18。我尝试了很多不同的方法，但仍然没有运气。这是我的代码。如果有人知道问题是什么，请告诉我。谢谢：

```
numbers = ['1', '2', '3'.......'35', '36']

figure = choice(numbers)

d = textinput("Pick bet", "")

if int(figure) > 18 and d == '1-18' or '1 - 18' or '1- 18' or '1 -18':
    pu()
    goto(100,100)
    write("Loser", font = ("Comic Sans MS", 30, "bold"))

elif int(figure) < 19 and d == '1-18' or '1 - 18' or '1- 18' or '1 -18':
    pu()
    goto(10,100)
    write("Well done", font = ("Comic Sans MS", 30, "bold"))

elif int(d) in range(36) and int(figure) == int(d):
    pu()
    goto(100,100)
    write("Well done", font = ("Comic Sans MS", 30, "bold"))

elif int(d) in range(36) and int(figure) != int(d):
    pu()
    goto(100,100)
    write("Loser", font = ("Comic Sans MS", 30, "bold")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:55:52.897

看着：

```
if int(figure) > 18 and d == '1-18' or '1 - 18' or '1- 18' or '1 -18': 
```

在这里，您有几个始终评估为 True 的语句；每个`'1 - 18' or '1- 18' or '1 -18'`都是一个非空字符串。`int(figure)`有什么价值或有什么并不重要`d`。这意味着 python 将该行视为`if something or True`.

您想要做的是使用`in`运算符来测试您`d`是否是选项列表的一部分：

```
if int(figure) > 18 and d in ('1-18', '1 - 18', '1- 18', '1 -18'): 
```

同样的问题也适用于你的`elif`陈述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:57:18.547

问题是 Python 认为如下：

```
if (int(figure) > 18 and d == '1-18') or '1 - 18' or '1- 18' ... 
```

布尔运算符的优先级低于比较运算符，因此代码没有按照您的意图执行。相反，末尾的字符串每个都被解释为的操作数，`or`因此被解释为布尔值，在这种情况下总是`True`如此。

您可以通过以下方式重写它：

```
if int(figure) > 18 and d in ['1-18', '1 - 18', '1- 18', '1 -18'] 
```

甚至可能从字符串中删除空格，因此您只需要与单个值进行比较：

```
if int(figure) > 18 and d.replace(' ', '') == '1-18' 
```

# bing-maps - 在鼠标悬停时更改重叠信息框的 zIndex

> ID：11329540
> 
> 赞同：0
> 
> 时间：2012-07-04T12:53:27.113
> 
> 标签：bing-maps

我的地图（Bing Maps AJAX v7）上有多个带有自定义 HTML 内容的信息框。由于其中一些很接近，因此信息框有时会重叠。

另外，我希望当鼠标移到其中一个上时，它会出现在前台，并且（可选地）在鼠标离开时返回后台。

所以，通过使用`zIndex`属性，我添加了这些行：

```
Microsoft.Maps.Events.addHandler(infobox, 'mouseenter', function(e) {
  infobox.setOptions({zIndex : 300});
 });
Microsoft.Maps.Events.addHandler(infobox, 'mouseleave', function(e) {
  infobox.setOptions({zIndex : 0});
}); 
```

但是，这些行变得很奇怪：

*   当鼠标进入时，信息框会跳转位置，直到下一次地图重绘。
*   mouseleave 回调永远不会被调用。

我在 jsFiddle 上复制了这个：http: [//jsfiddle.net/wXFhy/7](http://jsfiddle.net/wXFhy/7)

有没有人知道为什么或如何？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:27:07.270

我认为问题与您通过信息框上的 htmlContent 选项使用自定义 HTML 内容有关。我看到您的自定义内容浮动到左侧。我不知道为什么，但是当您在 htmlContent 中使用 css 浮点数时，它似乎会导致 Bing 地图出现问题。我注释掉了左边的浮动，跳动的行为消失了。

[http://jsfiddle.net/wXFhy/10/](http://jsfiddle.net/wXFhy/10/)

至于鼠标离开没有被调用，它可能也与您的自定义 html 内容有关。尝试从一个简单的 div 开始，看看是否调用了鼠标离开。如果可行，与其依赖 CSS 来布置信息框，不如尝试使用表格。我知道您应该使用 css 进行布局，但是使用 bing 地图信息框，我发现无论出于何种原因，表格都能更好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:52:46.713

我没有找到这种行为的原因。`z-index`但是，我改变了技术，通过仅使用 css (with and `:hover`) 而不是 Javascript来获得我想要的东西，并且效果很好。请参阅[http://jsfiddle.net/wXFhy/8/](http://jsfiddle.net/wXFhy/8/)。

我添加了这些 CSS 属性：

```
.FriendPinMap {
  float: left;
  position: absolute;
  z-index:0;
}

.FriendPinMap:hover {
  z-index:3;
} 
```

并删除了（严重）等效的javascript。

# scala - 参数化类中的类型不匹配 - 但为什么？

> ID：11329546
> 
> 赞同：3
> 
> 时间：2012-07-04T12:53:52.433
> 
> 标签：scala, types

假设我们有以下定义：

```
abstract class A
class B extends A

trait Test[T <: A] {
  def foo(t: T) = println("I'm Foo")

  def bar(t: T) = t match {
    case b: B => foo(b)
    case _ => println("Bar says: Other")
  }
} 
```

Scala 编译器会报错：

```
<console>:14: error: type mismatch;
 found   : b.type (with underlying type B)
 required: T
           case b: B => foo(b)
                            ^ 
```

我不明白，这里有什么问题，因为变量`b`是同一个对象`t`并且`t`是类型`T`？

或者，编译器确实将变量`b`视为新变量（与 没有关系`t`）。然后，`b`是 的子类型`A`，但不一定是 的子类型`T`，因为`T`可以是 的任意子类型`A`。这是正确的解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:02:04.737

`case b: B`实际上会产生如下代码：

```
if(t.isInstanceOf[B]) {
  val b = t.asInstanceOf[B]
  // ...
} 
```

所以`b`不是`t`。它仍然引用同一个实例，但是`b`is`B`和 not的类型`T`。同样的事情：

```
def foo(x: String) = println(x)

foo("Foo bar".asInstanceOf[AnyRef])
<console>:9: error: type mismatch;
 found   : AnyRef
 required: String
                  foo("Foo bar".asInstanceOf[AnyRef]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:28:32.803

您对编译器说，您需要`T`成为 的`A`所有可能值的子类型，`T`但要给出 的非常具体的子类型`A`，即`B`to `foo`。如果你有一个`Test[C]`with `class C extends B`，`foo`期望得到 a`C`但得到 a`B`所以类型不匹配。

不幸的是，即使您不引入新类并密封层次结构，编译器似乎也不关心这一点，或者可能有其他我不知道的合法投诉。

# linux - 屏幕终止后执行命令

> ID：11329551
> 
> 赞同：0
> 
> 时间：2012-07-04T12:54:30.280
> 
> 标签：linux, session, gnu-screen

当指定的会话将终止时，如何设置`screen`执行命令？`screen`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:56:52.163

```
alias screen='\screen;commandhere'; 
```

# php - 优化php内存使用？wp-filebase 插件相关

> ID：11329552
> 
> 赞同：0
> 
> 时间：2012-07-04T12:54:34.307
> 
> 标签：php, wordpress, memory

我正在为 Wordpress 使用[WP-Filebase](http://wordpress.org/extend/plugins/wp-filebase/)插件，当脚本需要更多内存时，我遇到了一些相当糟糕的结果。特别是 ./wp-filebase/classes/Sync.php 中的脚本

这是有问题的脚本。为它的长度道歉，这里有一个[pastebin](http://pastebin.com/HiJPThqe)。

我的问题是 - 这个编码真的很糟糕，因为它使用了大量的内存。当它尝试同步 500MB 的文件时，给予 512 的内存限制仍然挂起。

通常如何改进此脚本以使用更少的内存？

```
static function DEcho($str) {
echo $str;
@ob_flush();
@flush();   
}

static function UpdateItemsPath() {
wpfb_loadclass('File','Category');
$cats = WPFB_Category::GetCats();
$files = WPFB_File::GetFiles2();    
foreach(array_keys($cats) as $i) $cats[$i]->Lock(true);
foreach(array_keys($files) as $i) $files[$i]->GetLocalPath(true);
foreach(array_keys($cats) as $i) {
    $cats[$i]->Lock(false);
    $cats[$i]->DBSave();
}
}

static function SyncCats()
{
$updated_cats = array();

// sync file count
$cats = WPFB_Category::GetCats();
foreach(array_keys($cats) as $i)
{
    $cat = $cats[$i];
    $child_files = $cat->GetChildFiles(false);
    $num_files = (int)count($child_files);
    $num_files_total = (int)count($cat->GetChildFiles(true));
    if($num_files != $cat->cat_num_files || $num_files_total != $cat->cat_num_files_total)
    {
        $cat->cat_num_files = $num_files;
        $cat->cat_num_files_total = $num_files_total;
        $cat->DBSave();         
        $updated_cats[] = $cat;
    }

    // update category names
    if($child_files) {
        foreach($child_files as $file) {
            if($file->file_category_name != $cat->GetTitle()) {
                $file->file_category_name = $cat->GetTitle();
                if(!$file->locked)
                    $file->DBSave();
            }
        }
    }

    @chmod ($cat->GetLocalPath(), octdec(WPFB_PERM_DIR));
}

return $updated_cats; 
```

}

静态函数 Sync($hash_sync=false, $output=false) { @ini_set('max_execution_time', '0'); @set_time_limit(0);

```
wpfb_loadclass("Admin", "GetID3");
require_once(ABSPATH . 'wp-admin/includes/file.php');

$result = array('missing_files' => array(), 'missing_folders' => array(), 'changed' => array(), 'not_added' => array(), 'error' => array(), 'updated_categories' => array());

$sync_id3 = !WPFB_Core::GetOpt('disable_id3');

// some syncing/updating
self::UpdateItemsPath();
WPFB_Admin::SyncCustomFields();

$files = WPFB_File::GetFiles2();
$cats = WPFB_Category::GetCats();

if($output) self::DEcho('<p>'. __('Checking for file changes...',WPFB).' ');
$db_files = array();
foreach($files as $id => /* & PHP 4 compability */ $file)
{
    $file_path = str_replace('//','/',str_replace('\\', '/', $file->GetLocalPath(true)));
    $db_files[] = $file_path;
    if($file->GetThumbPath())
        $db_files[] = str_replace('//','/',str_replace('\\', '/', $file->GetThumbPath()));

    if($file->file_category > 0 && is_null($file->GetParent()))
        $result['warnings'][] = sprintf(__('Category (ID %d) of file %s does not exist!', WPFB), $file->file_category, $file->GetLocalPathRel()); 

    // TODO: check for file changes remotly
    if($file->IsRemote())
        continue;

    if(!@is_file($file_path) || !@is_readable($file_path))
    {
        $result['missing_files'][$id] = $file;
        continue;
    }

    if($hash_sync) $file_hash = @md5_file($file_path);
    $file_size = (int)@filesize($file_path);
    $file_mtime = filemtime($file_path);
    $file_analyzetime = !$sync_id3 ? $file_mtime : WPFB_GetID3::GetFileAnalyzeTime($file);
    if(is_null($file_analyzetime)) $file_analyzetime = 0;

    if( ($hash_sync && $file->file_hash != $file_hash)
        || $file->file_size != $file_size || $file->file_mtime != $file_mtime
        || $file_analyzetime < $file_mtime)
    {
        $file->file_size = $file_size;
        $file->file_mtime = $file_mtime;
        $file->file_hash = $hash_sync ? $file_hash : @md5_file($file_path);

        if($sync_id3)
            WPFB_GetID3::UpdateCachedFileInfo($file);

        $res = $file->DBSave();

        if(!empty($res['error']))
            $result['error'][$id] = $file;
        else
            $result['changed'][$id] = $file;
    }
}
if($output) self::DEcho('done!</p>');

foreach($cats as $id => $cat) {
    $cat_path = $cat->GetLocalPath(true);
    if(!@is_dir($cat_path) || !@is_readable($cat_path))
    {
        $result['missing_folders'][$id] = $cat;
        continue;
    }       
}

if($output) self::DEcho('<p>'. __('Searching for new files...',WPFB).' ');

// search for not added files
$upload_dir = str_replace('//','/',str_replace('\\', '/', WPFB_Core::UploadDir()));
$upload_dir_len = strlen($upload_dir);

$all_files = str_replace('//','/',str_replace('\\', '/', list_files($upload_dir)));
$num_all_files = count($all_files);

$new_files = array();
$num_new_files = 0;
$num_files_to_add = 0;

// 1ps filter    (check extension, special file names, and filter existing file names and thumbnails)
$fext_blacklist = array_map('strtolower', array_map('trim', explode(',', WPFB_Core::GetOpt('fext_blacklist'))));
for($i = 0; $i < $num_all_files; $i++)
{
    $fn = $all_files[$i];
    $fbn = basename($fn);
    if(strlen($fn) < 2 || $fbn{0} == '.' || strpos($fn, '/.tmp') !== false
            || $fbn == '_wp-filebase.css' || strpos($fbn, '_caticon.') !== false
            || in_array($fn, $db_files)
            || !is_file($fn) || !is_readable($fn)
            || (!empty($fext_blacklist) && in_array(trim(strrchr($fbn, '.'),'.'), $fext_blacklist)) // check for blacklisted extension
        )
        continue;
    $new_files[$num_new_files] = $fn;
    $num_new_files++;
}

$num_files_to_add = $num_new_files;

$thumbnails = array();  
// look for thumnails
// find files that have names formatted like thumbnails e.g. file-XXxYY.(jpg|jpeg|png|gif)
for($i = 1; $i < $num_new_files; $i++)
{
    $len = strrpos($new_files[$i], '.');

    // file and thumbnail should be neighbours in the list, so only check the prev element for matching name
    if(strlen($new_files[$i-1]) > ($len+2) && substr($new_files[$i-1],0,$len) == substr($new_files[$i],0,$len) && !in_array($new_files[$i-1], $db_files))
    {
        $suffix = substr($new_files[$i-1], $len);

        $matches = array();
        if(preg_match(WPFB_File::$thumbnail_regex, $suffix, $matches) && ($is = getimagesize($new_files[$i-1])))
        {
            if($is[0] == $matches[1] && $is[1] == $matches[2])
            {
                //ok, found a thumbnail here
                $thumbnails[$new_files[$i]] = basename($new_files[$i-1]);
                $new_files[$i-1] = ''; // remove the file from the list
                $num_files_to_add--;
                continue;
            }
        }           
    }
}

if(WPFB_Core::GetOpt('base_auto_thumb')) {
    for($i = 0; $i < $num_new_files; $i++)
    {
        $len = strrpos($new_files[$i], '.');
        $ext = strtolower(substr($new_files[$i], $len+1));

        if($ext != 'jpg' && $ext != 'png' && $ext != 'gif') {
            $prefix = substr($new_files[$i], 0, $len);

            for($ii = $i-1; $ii >= 0; $ii--)
            {
                if(substr($new_files[$ii],0, $len) != $prefix) break;                       
                $e = strtolower(substr($new_files[$ii], $len+1));
                if($e == 'jpg' || $e == 'png' || $e == 'gif') {
                    $thumbnails[$new_files[$i]] = basename($new_files[$ii]);
                    $new_files[$ii] = ''; // remove the file from the list
                    $num_files_to_add--;    
                    break;              
                }
            }

            for($ii = $i+1; $ii < $num_new_files; $ii++)
            {
                if(substr($new_files[$ii],0, $len) != $prefix) break;                       
                $e = strtolower(substr($new_files[$ii], $len+1));
                if($e == 'jpg' || $e == 'png' || $e == 'gif') {
                    $thumbnails[$new_files[$i]] = basename($new_files[$ii]);
                    $new_files[$ii] = ''; // remove the file from the list
                    $num_files_to_add--;
                    break;              
                }
            }
        }
    }
}

if($output && $num_files_to_add > 0) {
    echo "<p>";
    printf(__('%d Files found, %d new.', WPFB), $num_all_files, $num_files_to_add);
    echo "</p>";

    include(WPFB_PLUGIN_ROOT.'extras/progressbar.class.php');
    $progress_bar = new progressbar(0, $num_files_to_add);
    $progress_bar->print_code();
} else {
    if($output) self::DEcho('done!</p>');
}

for($i = 0; $i < $num_new_files; $i++)
{
    $fn = $new_files[$i];
    if(empty($fn)) continue;
    $fbn = basename($fn);

    $res = WPFB_Admin::AddExistingFile($fn, empty($thumbnails[$fn]) ? null : $thumbnails[$fn]);         
    if(empty($res['error']))
        $result['added'][] = empty($res['file']) ? substr($fn, $upload_dir_len) : $res['file'];
    else
        $result['error'][] = $res['error'] . " (file $fn)";

    if(!empty($progress_bar))
        $progress_bar->step(1);
}

if(!empty($progress_bar))
    $progress_bar->complete();

// chmod
if($output) self::DEcho('<p>Setting permissions...');
@chmod ($upload_dir, octdec(WPFB_PERM_DIR));
for($i = 0; $i < count($db_files); $i++)
{
    if(file_exists($db_files[$i]))
    {
        @chmod ($db_files[$i], octdec(WPFB_PERM_FILE));
        if(!is_writable($db_files[$i]) && !is_writable(dirname($db_files[$i])))
            $result['warnings'][] = sprintf(__('File <b>%s</b> is not writable!', WPFB), substr($db_files[$i], $upload_dir_len));
    }
}
if($output) self::DEcho('done!</p>');

// sync categories
if($output) self::DEcho('<p>Syncing categories... ');
$result['updated_categories'] = self::SyncCats();
if($output) self::DEcho('done!</p>');

wpfb_call('Setup','ProtectUploadPath');
WPFB_File::UpdateTags();

return $result;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:50:59.880

我的猜测是`md5_file()`功能。禁用散列时内存问题是否仍然存在？为了计算 md5，必须将文件读入内存。我不确定 PHP 的实现细节，但这可能是大文件的问题。

如果您需要散列，请查看此处的评论：http: [//php.net/manual/en/function.md5-file.php](http://php.net/manual/en/function.md5-file.php) - 他们建议使用 openssl`md5sum`实用程序而不是`md5_file()`. `md5sum`是通过`exec()`所以 php 内存限制不适用。它应该对大型和巨大的文件进行更多的实战测试。

```
$result = explode("  ", exec("md5sum $file_path"));
echo "Hash = ".$result[0]."<br />"; 
```

所以你尝试替换：

```
if($hash_sync) $file_hash = @md5_file($file_path); 
```

和：

```
if($hash_sync) {
  $file_hash = explode("  ", exec("md5sum $file_path"));
  $file_hash = $file_hash[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:07:05.587

`emteh's`如果有人想解决他们的问题，我使用下面的答案还修改了 wp-filebase 中的另一个 if 语句。

*第 99 行，上面写着*

```
if($hash_sync) {
  $file_hash = explode("  ", exec("md5sum $file_path"));
  $file_hash = $file_hash[0];
} 
```

// 新行修复第 115 行 if 语句

```
$new_file_hash = explode("  ", exec("md5sum $file_path"));
$new_file_hash = $new_file_hash[0]; 
```

115行左右替换

```
$file->file_hash = $hash_sync ? $file_hash : @md5_file($file_path); 
```

和

```
$file->file_hash = $hash_sync ? $file_hash : $new_file_hash; 
```

# objective-c - UIView setFrame 自定义实现

> ID：11329555
> 
> 赞同：2
> 
> 时间：2012-07-04T12:54:40.853
> 
> 标签：objective-c, uiview, overriding, subclass

我有一个子类`UIView`，我将其称为`MyView`. `setFrame`任何人都可以通过以下方式识别覆盖的任何可能的不良副作用：

```
- (void) setFrame:(CGRect)newFrame {

    CGPoint newCentre;

    newCentre.x = newFrame.origin.x + newFrame.size.width / 2.f;
    newCentre.y = newFrame.origin.y + newFrame.size.height/ 2.f;

    [super setCenter:newCentre];

    newFrame.origin = CGPointZero;
    if (CGSizeEqualToSize(newFrame.size, self.bounds.size) == NO) {
        [super setBounds:newFrame];
    }    
} 
```

我知道上面是一个非常奇怪的实现，并且不想讨论我*为什么*`[super setFrame]`不使用- 但我很想知道不使用超级实现是否有任何后果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:30:48.480

你不考虑**`transform`**。将边界大小设置为帧大小仅适用于变换为“身份”( `CGAffineTransformIdentity`) 的情况。

我还将检查如何调用观察方法（[KVO](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/KeyValueCoding.html)）。您正在通过一个可观察的设置器`center`进行更改。`bounds`

# qunit - 转换为 QUnit 代码

> ID：11329565
> 
> 赞同：0
> 
> 时间：2012-07-04T12:55:17.513
> 
> 标签：qunit, testcase

任何人都可以将此 jquery 脚本转换为 Qunit 测试代码。由于是初学者，我想从头开始。

```
$(document).ready(function(){
jQuery("#but1").bind("click",function(e,data){
    alert(data.name);
});

jQuery("#but1").trigger('click', {name:'Dmy', surname:'My'});
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:49:34.003

您是否尝试查看 qunitjs.com 网站的“食谱”部分？事件测试在以下链接中用作实际示例 - [http://qunitjs.com/cookbook/#solution-160](http://qunitjs.com/cookbook/#solution-160) - 只需查看“实际示例”即可。这是示例的副本。

```
test( "a test", 1, function() {
  var $body = $( "body" );

  $body.on( "click", function() {
    ok( true, "body was clicked!" );
  });

  $body.trigger( "click" );
}); 
```

# pear - pear quickform2-处理一个函数

> ID：11329569
> 
> 赞同：0
> 
> 时间：2012-07-04T12:55:31.890
> 
> 标签：pear, quickform

我编写了这个片段，但问题是**进程**函数在 quickform2 中被取代，我想知道如何处理新类 quickform2 中的任何函数

```
session_start();
require("db.php");
require_once("HTML/QuickForm2.php");

$form=new HTML_QuickForm2('myform');
$form->addDataSource(new Html_QuickForm2_Datasource_Array(array('subject'=>'mohamed amin')));

$catsql=mysql_query("select id,category from categories order by category");

while($catrow=mysql_fetch_assoc($catsql)){
    $catarr[$catrow['id']]= $catrow['category'];
    }

$select= $form->addElement('select','cat_id',array('size' => 3),array('label' => 'Test Select:','options' => $catarr));

$subject=$form->addElement('text','subject',array('size'=>50,'maxlength'=>80))->setLabel('عنوان الموضوع');
$body=$form->addElement('textarea','body',array('rows'=>20,'cols'=>80))->setLabel('نص الموضوع');

$submit=$form->addElement('submit',null,array('value'=>'تنفيذ'));

$subject->addFilter('trim');
$subject->addRule('required','من فضلك ادخل عنوان للموضوع');
$body->addRule('required','مطلوب كتابة موضوع');
if($form->validate()){
    $form->toggleFrozen(true);
    $insertid=mysql_insert_id();
    error_reporting(E_ALL);
    $form->process(process_data,false);
    header("Loaction:".$base_dir."viewstory.php?id=".$insertid);
    }
    else {

    echo $form;

        }

function process_data($values){
    $date=date("d/m/y h:i:s");
    $sql=mysql_query("insert into articles(cat_id,user_id,date,subject,body) values (".$values['cat_id'].",".$SESSION_['SESS_userID'].",".$date.",".$values['subject'].",".$values['body'].")"); 
```

我查看了文档，但找不到与迁移此功能相关的任何内容}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:47:57.700

没有特殊的迁移`process()`，该方法非常没用。基本上你应该只使用

```
process_data($form->getValue()); 
```

现在。[有关其他信息，请参阅pear-general](http://marc.info/?l=pear-general&m=133105166130784&w=2)中的此消息。

# wordpress - 关于 Apache / WordPress / 自适应图像的建议

> ID：11329571
> 
> 赞同：1
> 
> 时间：2012-07-04T12:55:41.677
> 
> 标签：wordpress, apache, mod-rewrite

我想在我的 WordPress 网站上使用 Matt Wilcox 的自适应图像 (adaptive-images.com)，但我遇到了麻烦……我尝试使用 Matt 进行故障排除，但没有成功。

我在全新的全新安装上运行 WordPress 3.4.1。没有插件，什么都没有，只有开箱即用的 21 岁主题。它安装在根目录中，而不是子文件夹中。我没有设置漂亮的永久链接，所以 WP 没有生成 .htaccess 文件。

我已将 AI 1.5.2 中的 AI .htaccess 和 Adaptive-images.php 文件（最初均未更改）添加到我的 WP 安装的根目录中。我已将所需的 JS 添加到 header.php 文件中。

在加载页面时，页面上的每个图像都缺少图像。我已经关注了这里的线程 - [https://github.com/MattWilcox/Adaptive-Images/issues/32](https://github.com/MattWilcox/Adaptive-Images/issues/32) - 但图像仍然丢失，我没有得到带有错误消息的黑色图像。我的图像都返回 404。

我试图遵循[https://github.com/MattWilcox/Adaptive-Images/issues/18](https://github.com/MattWilcox/Adaptive-Images/issues/18)中的指导，但没有成功。

未生成 ai-cache 文件夹。我尝试使用 755 和 777 的权限手动创建它，但没有写入文件夹。

我已经手动将 JS 更改为 'document.cookie='resolution=480; 路径=/';' 模拟移动设备屏幕大小但没有香蕉。

我看过每一篇关于 AI 和 WordPress 的文章的感觉。似乎有些人可以很高兴地让它工作；其他人没有。我无法找到任何人关于如何使其工作的明确解决方案。

根据 AI 下载中的 instructions.htm 文件，我尝试阅读有关如何使用 mod_rewrite 的信息——尽管我无法找到答案。看起来*问题*可能与我的服务器配置有关 - 但这确实超出了我的知识范围。

任何指导或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:24:02.180

我也一直在尝试在 Wordpress 中实现自适应图像 - 结果有人已经制作了它的插件：[https ://github.com/JorgenScott/WP-Resolutions](https://github.com/JorgenScott/WP-Resolutions)

还没有机会自己尝试一下，奇怪的是，codex 中没有列出插件。

也看看这里： [https](https://github.com/MattWilcox/Adaptive-Images/issues/10) ://github.com/MattWilcox/Adaptive-Images/issues/10 https://github.com/MattWilcox/Adaptive-Images/issues/22

# windows-phone-7 - 如何使用 php 后端使用 WP7 应用程序将视频上 传到远程 MySQL 服务器？

> ID：11329573
> 
> 赞同：0
> 
> 时间：2012-07-04T12:55:44.477
> 
> 标签：windows-phone-7

我想使用 WebClient 使用 PHP 作为后端将视频上传到远程 MySQL 数据库，但要这样做，我需要将其转换为二进制字符串，我不知道该怎么做。请帮帮我。

非常感谢任何有用的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:25:16.740

看看这个替代解决方案是否对您有用。您可以使用 multipart httpwebrequest 上传数据，您可以发送视频的字节数组

# c# - 如何测试谷歌搜索按钮

> ID：11329574
> 
> 赞同：0
> 
> 时间：2012-07-04T12:55:47.097
> 
> 标签：c#, unit-testing, testing

我正在使用“watin”学习软件测试。目前我想记录一个关于如何搜索单词的测试：Google 上的单元测试。我在我的 IE 上安装了开发者插件并
使用它来获取谷歌的搜索文本框和按钮名称。当我运行测试并
输入搜索时术语我收到此错误消息：First_test 失败引发异常：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using WatiN.Core;

namespace Web_project_test
{
[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void First_test()
    {
        IE ie = new IE("http://www.google.com");  
        ie.TextField(Find.ByName("q")).TypeText("Unit testing");
        ie.Button(Find.ByValue("btnk")).Click();  
        bool Expected_Result = ie.Text.Contains("Unit testing");  
        Assert.IsTrue(Expected_Result);
    }  
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:00:46.050

[这是在http://watin.org/](http://watin.org/)上的 Watin.org 上显示的示例

```
using (var browser = new IE("http://www.google.co.uk"))
  {
    browser.TextField(Find.ByName("q")).TypeText("WatiN");
    browser.Button(Find.ByName("btnK")).Click();

    Assert.IsTrue(browser.ContainsText("WatiN"));
  } 
```

更新 ：

这行代码**ie.Button(Find.ByValue("btnk")).Click();** 看起来不正确，因为 google.com 上的搜索按钮的 id 是**btnk**，值是**“Google 搜索”**

这可能是您测试失败的问题，请将该行更正为：**ie.Button(Find.ByName("btnk")).Click();**

# css - modpagespeed 是否会拆分像 Blesscss.com 这样的 CSS 文件以避免 IE 的 4095 选择器限制？

> ID：11329575
> 
> 赞同：1
> 
> 时间：2012-07-04T12:55:47.317
> 
> 标签：css, internet-explorer, mod-pagespeed, bless

IE 在单个 CSS 文件中的选择器限制为 4095。

当 modpagespeed 合并所有 CSS 文件时，我如何设置它以使用 blesscss.com 功能来拆分 css 文件但仍保留散列文件名，以便我可以保持长期过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T17:01:01.560

看起来可能会在 1.7 中添加支持

请参阅[https://code.google.com/p/modpagespeed/issues/detail?id=658](https://code.google.com/p/modpagespeed/issues/detail?id=658)和[https://code.google.com/p/modpagespeed/issues/detail?id=793](https://code.google.com/p/modpagespeed/issues/detail?id=793)

# ruby-on-rails - 如何增量填充数据仓库？

> ID：11329576
> 
> 赞同：3
> 
> 时间：2012-07-04T12:55:51.193
> 
> 标签：ruby-on-rails, database, postgresql, data-warehouse, enterprise

我已经开发了几个应用程序，并与其他在数据仓库的几个细节方面遇到问题的开发人员进行了交谈。

我看到的主要问题是关于操作数据存储中的变更数据检测 (CDC)。 **更新和硬删除显然很难在操作数据存储中检测到。**

可以通过在每个表上插入触发器来处理更新，该触发器会使用当前时间戳自动更新 updated_at 列。但删除更难——一种解决方案是在其中放置一个触发器，以更新带有已删除 ID、表和时间戳的审计表。

使用触发器似乎是进行更改数据检测的最合理方法，但我看到的另一种选择是解析数据库事务日志文件，尽管这可能会使更新操作数据存储数据库变得更加困难。

**我的问题是，人们通常如何处理这个问题**？我做了一些研究，看起来很多做数据仓库的公司都在推出他们自己的次优解决方案。

我见过的另一个避免与 CDC 相关问题的解决方案是每隔一段时间简单地重建整个（或与源数据相关的部分）数据仓库，这将确保所有数据都是最新的并且没有错误在对操作数据存储执行 CDC 的代码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:44:46.847

这是我通常处理更新和删除的方式。

**源系统中的更新**

一些 DBMS 提供一列，如果将其添加到所有表中，则为仓库提供始终增加的唯一标识符。SQL Server 有 TIMESTAMP 列。Oracle 提供了 ora_rowscn 伪列，擅长块级。

虽然我没有使用它，但 Postgres 有 xmin 伪列，我相信它可以以类似的方式使用。对此存在一些担忧，但我认为出于数据仓库变更跟踪的目的，它可能会奏效。

源系统中的 UPDATE 触发器以更新上次修改日期是另一种选择。如果您在进行提取时正在对 ODS 进行大量更新，请将此日期保持在非常高的精度，以降低“丢失”记录的风险。

**源系统中的删除**

至于删除的记录，我首选的解决方案是确保所有源表都有一个主键（最好是一列，尽管多列是可行的）。我每天将这一列的全部内容提取到一个阶段表中，然后识别与源相比目标表中“缺失”的行，更新目标记录上的“源已删除”标志或其他内容。我通常只对维度表执行此操作，因为即使原始事务已经消失，事实表也应该保留历史记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:07:16.693

作为 postgresql 用户和开发人员，使用您所描述的触发器是--恕我直言--最好的方法。让数据库完成它的设计目的：管理和保护您的数据。使用更新日期和使用删除日期处理的逻辑删除可以更轻松地提供事务的历史跟踪。使用低负载时段将“已删除”数据移动到历史表有助于保持生产表的可管理性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:23:51.543

我认为在正确设计的数据仓库中不应该删除或更新事实表，只有插入。然后通过时间戳或通过一些顺序 ID 捕获插入应该是微不足道的。

# html - chrome中的浮动div清除父div

> ID：11329579
> 
> 赞同：-4
> 
> 时间：2012-07-04T12:55:55.850
> 
> 标签：html, css

有一个高度可变的父 div。在这个父 div 中，还有 2 个 div 分别在左右浮动。父 div 的背景必须在两个子 div 之后结束。但在 Chrome 中并没有发生这种情况（IE 运行良好）。父 div 背景在子 div 开始之前结束。如果从子 div 中删除浮动，它会很好，但它们不会彼此相邻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:00:59.850

尝试`overflow: auto`在父 div 上设置。

问题是它们的父级不包含浮点数，除非它们的父级建立一个新的块格式化上下文。overflow: auto 就是这样做的，就像其他一些事情一样（包括浮动 - 即浮动父框并且包含子浮动）。

**然而**，建立一个新的块格式化上下文并不是实现你想要的，大多数人甚至不这样做。

这就是你的权利？

HTML

```
<div class="out">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

CSS

```
.left {
    float: left;
}

.right {
    float: right;
} 
```

如果在浮动下方插入一个新元素（让我们给它一个 cleardiv 类）并对其应用`clear: both`，它，同一个元素，将被推到它上面的所有浮动元素下方。而且由于它本身不是浮动元素，因此如您所料，它将包含在父元素中。
所以，如果它被父元素包含，并且被推到它的底部，那么父元素将不得不一直“拉伸”到底部——就像你想要的那样。

这是新的 HTML

```
<div class="out">
    <div class="left"></div>
    <div class="right"></div>
    <div class="cleardiv"></div>
</div> 
```

CSS

```
.left {
    float: left;
}

.right {
    float: right;
}

.cleardiv {
    clear: both;
} 
```

# html - CSS菜单项在悬停时消失

> ID：11329585
> 
> 赞同：1
> 
> 时间：2012-07-04T12:56:11.350
> 
> 标签：html, css

我有一个使用 CSS 实现的菜单，如[http://jsfiddle.net/Lijo/vZgTP/](http://jsfiddle.net/Lijo/vZgTP/)所示。

当我将鼠标悬停在子项（产品 I）上时，大多数情况下它不会如图所示突出显示 - 而是子项消失了。如何解决？CSS 代码在 jsFiddle 中可用。如果您可以指定需要进行哪些更改来解决此问题，那就太好了。

儿童的预期行为

![儿童的预期行为](../Images/b538991bb47df87c61250b3b1d0e6459.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:24:42.790

问题是 的高度`<li class="has-sub">`小于 的高度`<ul>`，因此当您将鼠标向下移动到 时，`<li>`它将停止悬停`<li>`并开始悬停`<ul>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:26:56.923

好的，我想我明白了，检查[小提琴](http://jsfiddle.net/vZgTP/26/)

```
/*added padding-bottom: 8px;*/
#cssmenu ul li.has-sub:hover > a{ background:#FF5500; border-color:#FF5500;  top:-1px; z-     index:999;  padding-bottom: 7px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:22:11.447

还没有找到合适的解决方案，但我想我找到了原因。当您将鼠标缓慢向下移动到子菜单时，有几个像素光标不再悬停在#cssmenu > li 上。这当然会导致子菜单消失。相反，如果您快速移动鼠标，则浏览器会在子菜单中触发鼠标事件。

解决方案应该是从 #cssmenu > li 到子菜单的无缝（或无间隙）过渡。

# php - 如何根据相似的时间戳将数据行组合到一个新表中？(蟒蛇/MySQL/PHP)

> ID：11329588
> 
> 赞同：0
> 
> 时间：2012-07-04T12:56:16.093
> 
> 标签：php, python, mysql, json, pingdom

不确定标题是否是表达我的实际问题的好方法，如果这个问题过于笼统，我深表歉意，但我在思考如何做某事时遇到了一些麻烦。

我正在尝试做的事情：这个想法是为我负责监控的数千台服务器创建一个“中断”的 MySQL 数据库。这将提供停机时间的历史记录，并提供一种简单的方法来追溯发生的事情。该数据库将通过一个相当简单的 PHP 表单进行查询，您可以在其中按日期或服务器主机名等浏览这些中断。

到目前为止我所拥有的：我有一个 python 脚本，它定期作为 cron 运行，以调用 Pingdom API 以获取 pingdom 服务报告的当前停机警报列表。对于每个停机警报，将一行插入包含主机名、时间戳、pingdom 检查 ID 等的数据库中。然后我有一个简单的 php 表单，可以很好地查询停机警报。

问题：我现在所拥有的缺少一些重要的功能，并不是我想要的。目前，查询这个数据库会给我一个简单的向下警报列表，如下所示：

从 2012-05-01 到 2012-06-30 的 Test_Check 的 Pindom 警报：

test_check 在 2012-05-24 00:11:11 报告为 DOWN test_check 在 2012-05-24 00:17:28 报告为 DOWN test_check 在 2012-05-24 00:25:24 报告为 DOWN test_check 在2012-05-24 00:25:48

我想要的是这样的：

test_check 被报告了 15 分钟（2012-05-24 00:11:11 到 2012-05-24 00:25:48）（链接到此中断的评论）（链接到有关此中断的信息）。

在这个理想的最终结果中，将有一行包含中断 ID、服务器 pingdom 的主机名报告故障、该框最初报告故障的时间戳和再次报告故障的时间戳以及“注释” ' 我（和其他管理员）在事后将使用该字段添加有关此特定事件的注释。我不确定在从 pingdom 中提取警报时是否应该尝试执行此操作，或者是否应该在收集警报以填充新表后重新处理它们，我也不太确定我会如何解决这些选项中。

我对如何将在短时间内发生的多个停机警报组合成一个“中断”感到有点迷茫被存储。这将允许我评论并添加具体细节以供将来参考，并且通常会使这个东西更有用。我不确定在从 pingdom 中提取警报时是否应该尝试执行此操作，或者是否应该在收集警报以填充新表后重新处理它们，我也不太确定我会如何解决这些选项中。

我一直在绞尽脑汁想弄清楚如何做到这一点。这似乎是一个简单的概念，但我是一个有点缺乏经验的程序员（我是一名专业的 Linux 管理员），在这一点上我很难过。

我正在寻找任何想法、建议、示例，甚至只是对我在这里尝试做的更技术性的解释，以帮助我指明正确的方向。我希望这是有道理的。提前感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:14:16.850

1.  从存储和查询中断数据的角度定义您最喜欢的数据库模式。（基于间隔。）
2.  从记录 Pindom 事件的角度定义您最喜欢的存储过程签名（参数）。（基于事件。）一定要记录成功的 ping，这样您就可以从两个短的中断中分辨出长时间的中断。
3.  按规定实施程序。
4.  每次 ping 后调用该过程。

该过程的主体可能大致如下（伪代码）：

```
-- First, select the last interval as o1, and update it if the status is unchanged
UPDATE Interval SET ended = CURRENT_TIMESTAMP
FROM Interval AS o1 LEFT JOIN Interval o2 ON o2.ended > o1.ended
WHERE o2 IS NULL AND o1.status = @currentStatus

-- If the status changed, insert a new interval with the current status
IF ROW_COUNT() = 0 THEN
    INSERT INTO Interval VALUES (...) 
END IF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:09:14.090

您现在拥有的设置的最基本解决方案是：

*   获取所有事件的列表，按服务器 ID 排序，然后按事件时间排序
*   循环遍历该列表并在以下情况下为新数据库记录新事件的开始/旧事件的结束：
    1.  服务器 ID 更改
    2.  当前事件与来自同一服务器的上一个事件之间的时间大于您设置的某个阈值。
    3.  将您正在监视的旧事件存储在新数据库中

我看到的唯一复杂情况是，下次运行脚本时，您需要确保继续监视上次运行脚本时仍在发生的事件。

# design-patterns - 对于这种情况，什么是好的设计模式？

> ID：11329591
> 
> 赞同：0
> 
> 时间：2012-07-04T12:56:23.083
> 
> 标签：design-patterns

我在我的应用程序中执行了一些测试，但在此之前我必须初始化我的响应信息（执行目录、使用的资源等）。

在特定点之后，我将能够识别我将要执行的测试类型，所以现在我必须有一个适当的响应实例，但这迫使我手动将字段从旧对象复制到新对象，这会导致错误当事情发生变化时。

例如，假设我有以下类：

```
class BaseResponse{
    private int port;
    private int trials;
    protected BaseResponse(BaseResponse response){
        this.port = response.port;
        this.trials = response.port;
    }
}
class TcpResponse extends BaseResponse{
    public TcpResponse(BaseResponse response){
        super(response);
    }
    private int tcpSpecificMetric;
} 
```

所以一开始我初始化了这个`BaseResponse`类，把它填满，然后当我发现我要运行一个 TCP 测试时，我必须初始化一个新的`TcpResponse`！

有人会为此提出一个好的设计建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:58:31.757

编写一个工厂（又名虚拟构造函数）或构建器，它知道如何`BaseResponse`根据传递给它的参数创建不同类型的。

```
public class BaseResponseFactory {
    private static BaseResponseFactory INSTANCE = new BaseResponseFactory();

    private BaseResponseFactory() {}

    public static BaseResponseFactory getInstance() { return INSTANCE; }

    public BaseResponse create(int port, int trials) { return new BaseResponse(port, trials); }

    public BaseResponse create(int port, int trials, int tcpMetric) { return new TcpResponse(port, trials, tcpMetric); }
} 
```

# eclipse - org.springframework.beans.factory.BeanCreationException：创建名为“transactionManager”的bean时出错

> ID：11329592
> 
> 赞同：5
> 
> 时间：2012-07-04T02:05:29.830
> 
> 标签：eclipse, spring, hibernate

当我将代码添加到我的 spring 配置文件 beans-hibernate.xml

```
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

它不起作用，我不知道为什么，有人可以帮助我吗？

我的道课是：

```
public class CourseDaoImpl implements CourseDao {

    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Transactional
    public void store(Course course) {
        sessionFactory.getCurrentSession().saveOrUpdate(course);
    }

    @Transactional
    public void delete(Long courseId) {
        Course course =  (Course)sessionFactory.getCurrentSession().get(Course.class, courseId);
        sessionFactory.getCurrentSession().delete(course);
    }

    @Transactional(readOnly=true)
    public Course findById(Long courseId) {
        return (Course)sessionFactory.getCurrentSession().get(Course.class,   courseId);
    }

        @Transactional
        public List<Course> findAll() {
    Query query = sessionFactory.getCurrentSession().createQuery("FROM Course");
        return (List<Course>)query.list();
    }

} 
```

但 ：

```
juil. 04, 2012 3:38:18 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
Infos: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@6ba8fb1b: startup date [Wed Jul 04 03:38:18 CEST 2012]; root of context hierarchy
juil. 04, 2012 3:38:18 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
Infos: Loading XML bean definitions from class path resource [beans-hibernate.xml]
juil. 04, 2012 3:38:19 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
Infos: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5a7fed46: defining beans [org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,sessionFactory,transactionManager,courseDao]; root of factory hierarchy
juil. 04, 2012 3:38:19 AM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
juil. 04, 2012 3:38:19 AM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.3.Final}
juil. 04, 2012 3:38:19 AM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
juil. 04, 2012 3:38:19 AM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
juil. 04, 2012 3:38:19 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
juil. 04, 2012 3:38:19 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 20
juil. 04, 2012 3:38:19 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: false
juil. 04, 2012 3:38:19 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [org.hibernate.dialect.PostgreSQLDialect] at URL [jdbc:postgresql://localhost:5432/spring]
juil. 04, 2012 3:38:19 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=Bilal, password=****}
juil. 04, 2012 3:38:19 AM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
juil. 04, 2012 3:38:19 AM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
juil. 04, 2012 3:38:19 AM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
juil. 04, 2012 3:38:19 AM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000228: Running hbm2ddl schema update
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000102: Fetching database metadata
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000396: Updating schema
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.TableMetadata <init>
INFO: HHH000261: Table found: public.course
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.TableMetadata <init>
INFO: HHH000037: Columns: [fee, id, title, end_date, begin_date]
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.TableMetadata <init>
INFO: HHH000108: Foreign keys: []
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.TableMetadata <init>
INFO: HHH000126: Indexes: [course_pkey]
juil. 04, 2012 3:38:19 AM org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000232: Schema update complete
juil. 04, 2012 3:38:19 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
Infos: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5a7fed46: defining beans [org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,sessionFactory,transactionManager,courseDao]; root of factory hierarchy
juil. 04, 2012 3:38:19 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl stop
INFO: HHH000030: Cleaning up connection pool [jdbc:postgresql://localhost:5432/spring]
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [beans-hibernate.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/engine/SessionFactoryImplementor
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.boutaya.bill.main.Main.main(Main.java:14)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/engine/SessionFactoryImplementor
    at org.springframework.orm.hibernate3.SessionFactoryUtils.getDataSource(SessionFactoryUtils.java:123)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.afterPropertiesSet(HibernateTransactionManager.java:411)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 12 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.engine.SessionFactoryImplementor
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 16 more 
```

我认为问题出在我使用 Class 时：org.springframework.orm.hibernate3.HibernateTransactionManager ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:35:03.193

我认为您忘记添加

```
<tx:annotation-driven transaction-manager="transactionManager"/> 
```

进入你的spring配置xml文件。

实际上，只有当它与标准（transactionManager）不同时，您才需要明确定义事务管理器名称。但在我的例子中，我离开了它。

同样与以前的休眠版本（4 和更高版本）使用另一个事务管理器类：

```
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"></property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T07:37:38.877

这是版本冲突的问题，你不能使用hibernate 4：

> 信息：HHH000412：休眠核心 {4.1.3.Final}

与**org.springframework.orm.hibernate3.HibernateTransactionManager**

尝试**org.springframework.orm.hibernate4.HibernateTransactionManager**代替

如果要启用基于注释的事务行为配置，请将以下内容添加到 beans-hibernate.xml：

```
<tx:annotation-driven /> 
```

# c# - 读取可以为所有人或只是我安装的 MSI 的正确注册表位置

> ID：11329594
> 
> 赞同：1
> 
> 时间：2012-07-04T12:56:39.437
> 
> 标签：c#, registry

我在 Visual Studio 2008 中有一个带有安装程序的应用程序，用户可以为每个人或只是我安装它。安装程序会写入一些可由应用程序更改的注册表值。安装程序配置为任何 cpu。

从 MSDN 上的文档中，我将注册表值放在安装程序中的“Machine/User Hive”键下，行为似乎是，对于每个人来说，注册表键都出现在下面`HKLM\Software\Wow6432Node\My App`，而对于 Just Me，它们出现在`HKCU\Software\My App`.

我的问题是在尝试读取应用程序中的值时出现的。在我看来，凭借安装程序中的这种聪明才智，可能有一些“正确的方法”可以确保我的应用程序获得正确的注册表位置，但尽我所能尝试我的书和我的 google-fu 失败了:(

对于这方面的任何帮助，我将不胜感激。

编辑：没有回复，文档中仍然没有运气，所以我想没有一个好的方法可以做到这一点，我先检查 localmachine 密钥然后是 currentuser 密钥（如果 localmachine 是空白的）。看起来有点奇怪，但完成了工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:28:05.620

我想没有一个很好的方法可以做到这一点，我在三元操作中检查了 localmachine 键，然后是 currentuser 键（如果 localmachine 是空白的），它似乎已经奏效了。

# spring - Hibernate 和 Spring 会话配置

> ID：11329595
> 
> 赞同：0
> 
> 时间：2012-07-04T12:56:40.170
> 
> 标签：spring, hibernate, session

我对 Hiberante 和 Spring 有疑问。

当我得到一个实体时，一切正常，但是如果我使用子属性，延迟加载由于关闭会话而失败......为什么这么早休眠关闭会话？迫不及待地退出服务或每个线程占用一个会话？

这是我的配置

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan">
        <list>
            <value>com.cinebot.db.entity</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

这是我的道：

```
@Transactional
public class Dao {

    @Autowired
    private SessionFactory sessionFactory;

    public Session getSession(){
        return sessionFactory.getCurrentSession();
    }

    @SuppressWarnings("unchecked")
    public <T> T get(Class<T> classe, Serializable id) throws Exception {
        if(id==null) return null;
        T obj = (T) getSession().get(classe, id);
        return obj;
    } 
```

}

这就是我在 @Service 类中得到错误的地方（getEventi() 是延迟加载的）：

```
 Spettacoli spettacolo = dao.get(Spettacoli.class, spettacoloId);
   if(spettacolo.getEventi().getScadenza()>0) throw new LogicalException("Spettacolo scaduto"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:22:06.747

您正在访问事务之外的实体。您需要将服务方法标记为事务性。

在您当前的代码中，您的事务在您的 dao 方法完成时结束，因此当您在服务方法中访问该实体时，它是分离的实体，这肯定会引发异常。

Remember you need to start transaction in service and not DAO which will allow you to access child entities. So move @transactional annotation to your service method.

# python - 在 selenium 测试用例中将数据字段更改为数据库：django python

> ID：11329598
> 
> 赞同：0
> 
> 时间：2012-07-04T12:56:46.110
> 
> 标签：python, django, django-models, selenium

我的数据库中有这个字段是

> package_expiry_date

，现在我想从 selenium 测试用例本身更改它的值，以便在一段时间后使用它。就像通过添加将日期延长 5 天

> datetime.timedelta(days=5)

. 如何在 django 的 python selenium 测试用例中更改它在数据库表中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:13:37.867

Selenium API 使您能够与网页及其上的各种 Web 元素进行交互。

要更改数据库中的任何值，必须根据您使用的数据库以及使用哪些 python 方法与该数据库提供程序进行交互来执行此操作。（例如 - 使用 Java 语言时将使用 JDBC）

它与 selenium 或它的 API 无关。

# javascript - 在 CSS 中以不同的方式为图像的多个部分着色

> ID：11329599
> 
> 赞同：0
> 
> 时间：2012-07-04T12:56:47.207
> 
> 标签：javascript, jquery, image

我有一个类似于[How to change color of an image using jquery](https://stackoverflow.com/questions/9303757/how-to-change-color-of-an-image-using-jquery)的问题，但使用的是鞋子。问题是鞋子有多个部分（鞋跟、前部、鞋底..），我需要让用户更改每个部分的颜色。我正在使用 jQuery 或一些基于 Javascript 的框架。

最好的方法是什么？有没有办法在图像中定义要独立着色的区域？还是应该将鞋子分成多个图像并使用 CSS 将它们组合在一起？（我不喜欢这个主意……）或者……以上都不是？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:14:43.417

[RaphaelJS](http://raphaeljs.com)值得一看该解决方案。看看他们的[世界地图示例](http://raphaeljs.com/world/)

事实上，如果您能够预先计算或修复您的鞋子部件并在其上设置坐标，您将能够在鞋子上方绘制和填充 SVG 多边形。困难的部分是知道或确定轮廓路径的坐标......

[该站点](http://boen.esignserver2.com/gallery.do)使用 RaphaelJS 进行覆盖

# tridion - 如何使用 coreservice 将活动发送回作者？

> ID：11329602
> 
> 赞同：-5
> 
> 时间：2012-07-04T12:56:53.767
> 
> 标签：tridion, tridion-2011

我想创建一个工作流自动任务（1\. 发回给作者 2\. 发布到暂存）。

任何人都可以使用 SDL Tridion Core Service 提供代码片段来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:39:42.473

我没有核心服务版本，但这是我使用 VBScript 和 TOM 编写的一个版本，它可能会让您朝着正确的方向开始

```
Set objAIs = CurrentWorkItem.ActivityInstance.ProcessInstance.ActivityInstances
Set objAI= objAIs (objAIs.Count - 1)
strLastMessage= objAI.FinishMessage
Set objAI= objAIs(1)
uriFirstUser= objAI.Performer.ID
Set objAI= Nothing
Set objAIs = Nothing
FinishActivity cstr(strLastMessage), "" , uriFirstUser 
```

只需将其粘贴到您的自动化活动的脚本框中，您就可以开始使用了

# iphone - 如何在适用于 iOS 的 Amazon-Dynamodb 中设置扫描过滤器？

> ID：11329604
> 
> 赞同：4
> 
> 时间：2012-07-04T12:57:07.677
> 
> 标签：iphone, amazon-web-services, amazon-dynamodb

我想在从 Dynamodb 获取数据时设置 scanfilter。DynamoDBScanRequest *request = [[[DynamoDBScanRequest alloc] initWithTableName:TEST_TABLE_NAME] autorelease];

任何人都可以告诉我如何在上面的代码中设置扫描过滤器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T06:35:11.157

[ScanFilter](https://github.com/aws/aws-sdk-ios-v1/blob/973a5c2075f050ce20470fcb1e82c5d6cd06a080/src/Amazon.DynamoDB/Model/DynamoDBScanRequest.m#L39)是一个字典，其中键是属性名称，值表示 Scan 调用返回的项目必须满足的条件。这似乎是 legacy-v1 DynamoDB API 的一部分。如果您使用 v2 [aws-sdk-ios SDK](https://github.com/aws/aws-sdk-ios/tree/master/AWSDynamoDB) ，您可以访问更多功能，例如[Scans中的](https://github.com/aws/aws-sdk-ios/blob/master/AWSDynamoDB/AWSDynamoDBModel.h#L1391)[过滤器（条件）表达式](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.SpecifyingConditions.html#Expressions.SpecifyingConditions.ConditionExpressions)，以及[ObjectMapper](http://docs.aws.amazon.com/mobile/sdkforios/developerguide/dynamodb_om.html#getting-started)等更高级别的抽象。

# python - Python Pandas：来自数据帧的 to_panel() 返回二进制变量的奇怪数字

> ID：11329611
> 
> 赞同：0
> 
> 时间：2012-07-04T12:57:23.613
> 
> 标签：python, pandas, dataframe, panel, fixed

我有一个像这样读入的*数据集：*

```
pm10 = pds.read_csv('pm10.csv', index_col = [0,1], parse_dates=True)
panel_exog = pm10.to_panel()['pass_ind'] 
```

但是当我进行转换时，返回的面板有大整数，其中应该是零（或 1）。我必须将“.0”添加到该二进制变量的所有行中，以使其按我想要的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:45:17.913

我在这里报告了一个错误。我在 上看到了另一个错误报告`to_panel`，在 GitHub 上发布的一些附加信息（例如数据文件的链接）会很有用：

[https://github.com/pydata/pandas/issues/1582](https://github.com/pydata/pandas/issues/1582)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:31:44.253

`time_effects`是仅适用于 a 的有效参数`panel OLS`，不适用于 a `simple OLS`。来自熊猫文档：

```
def ols(**kwargs):
"""Returns the appropriate OLS object depending on whether you need
simple or panel OLS, and a full-sample or rolling/expanding OLS.

Will be a normal linear regression or a (pooled) panel regression depending
on the type of the inputs:

y : Series, x : DataFrame -> OLS
y : Series, x : dict of DataFrame -> OLS
y : DataFrame, x : DataFrame -> PanelOLS
y : DataFrame, x : dict of DataFrame/Panel -> PanelOLS
y : Series with MultiIndex, x : Panel/DataFrame + MultiIndex -> PanelOLS 
```

您可以发布您正在使用的 CSV 文件，以找出您正在尝试执行的 OLS 吗？

编辑：从您发布的 CSV 中可以清楚地看出您正在传递给`pandas.ols`两个`Series`对象。从上面的文档字符串中，`PanelOLS`你需要传递两个`DataFrames`来代替。

# perl - 无法在 Windows 64 位上安装 perl 模块 Net::SSH::Perl

> ID：11329617
> 
> 赞同：1
> 
> 时间：2012-07-04T12:57:42.303
> 
> 标签：perl, 64-bit

我已经在 Windows 2008 服务器（64 位）上安装了活动 perl。我尝试使用命令 cpan install Net::SSH::Perl 安装 Net::SSH::Perl。在询问了几个问题后，它开始安装但未能说明“make test 已返回错误状态，不会强制安装。所以我尝试使用命令强制安装，cpanp install Net::SSH::Perl。但仍然没有成功。得到错误结尾“无法为 'Net::SSH:Perl' 创建新的分发对象——无法继续”

有人可以帮我安装这个模块吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:58:33.987

Net::SSH::Perl 是旧的无人维护的，请改用[Net::SSH2](https://metacpan.org/module/Net%3a%3aSSH2)。

**更新**：Net::SSH2 发行版包含一个描述如何在 Windows 下安装它的文件 ( [BUILDING.WIN32](https://metacpan.org/source/RKITOVER/Net-SSH2-0.45/BUILDING.WIN32) )。

此外，如果您使用 ActiveState Perl，您可以从这里获得预编译包：[http ://www.sisyphusion.tk/ppm/](http://www.sisyphusion.tk/ppm/)

# c# - 如何让浏览器忽略cookies

> ID：11329618
> 
> 赞同：3
> 
> 时间：2012-07-04T12:57:42.553
> 
> 标签：c#, windows-phone-7, cookies, webbrowser-control, disqus

我正在制作一个使用 WebBrowser 的 windows phone 应用程序。我使用这个网络浏览器来验证用户的 disqus 帐户。当我启动模拟器并运行应用程序时，要求用户输入他们的帐户/密码，一切正常。

现在我希望能够使用其他用户登录，但网络浏览器（或 disqus，我不知道是手机还是网站记住了）记住了用户，只是给了我接受或接受的选项拒绝（意味着我没有像第一次那样登录的机会）。

如果我给了你足够的信息，有没有办法防止这种行为？是因为cookies还是disqus服务器？

**对于在 windows phone 上实现 disqus api 时遇到此问题的其他人：** 实际上尝试通过代码删除 cookie 的一种方法是：使用 WebBrowserControl，导航到 disqus.com/dashboard。由于手机上存储的 cookie，用户将登录本网站。然后在 LoadComplete 事件处理程序中添加以下行：

```
(sender as WebBrowser).InvokeScript("eval", "document.location.href = \"http://disqus.com/logout\";"); 
```

这将导航到 disqus 的注销页面并返回一个注销 cookie（或其他东西，我不确定这部分实际上是如何工作的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:42:46.190

您不能以编程方式从 Windows Phone 7 中应用程序内的独立存储中删除 cookie。如果您卸载该应用程序，它们将被删除，否则它们将保留。如果用户在 IE 中禁用了 cookie，那么它们将不可用，但在这种情况下它们也不会被删除。

您可以在此处请求此功能：[http ://wpdev.uservoice.com/](http://wpdev.uservoice.com/)

问候，保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:11:12.383

我很确定这是因为服务器记住了你，你可以尝试启动一个新的网络浏览器实例，但你不能手动删除 cookie（但你可以看看它们（也许对你有帮助））例子：

```
Webbrowser test = new Webbrowser();
test.getCookies(); 
```

# php - Bash 文件脚本 - PHP

> ID：11329622
> 
> 赞同：-5
> 
> 时间：2012-07-04T12:58:05.263
> 
> 标签：php, bash, shell, xen

> **可能重复：**
> [执行 bash 文件时出现问题](https://stackoverflow.com/questions/2559245/problem-executing-bash-file)

我创建了一个 bash 文件脚本并存储在某个目录中。现在我需要创建一个 php 脚本来执行这个 bash 脚本，这样任何人都可以帮助我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:59:20.667

你可以使用[exec](http://php.net/manual/en/function.exec.php)。

```
exec('/path/to/that/bash/file'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:00:44.060

函数 exec 获取执行脚本，并使用附加参数从脚本收集输出。

```
$output = '';
exec("/path/to/your/bash/script.sh", &$output);
echo $output; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T13:01:51.533

shell_exec 或 exec 可以帮助你。[在http://us.php.net/exec](http://us.php.net/exec)阅读更多内容

# visual-studio - 在 Microsoft Surface 上运行 Visual Studio？

> ID：11329627
> 
> 赞同：23
> 
> 时间：2012-07-04T12:58:32.600
> 
> 标签：visual-studio, visual-studio-2012, windows-8, tablet

似乎 Windows 8 是关于开发人员的。但我没有意识到一件小事：Visual Studio 2012 是否可以在基于 Intel 的 Surface 上启动，就像在我的 Win8 驱动、基于 Intel 的笔记本电脑上一样？

硬件规格绝对够用，整个意识形态似乎导致“到处编程”，即使是 iPad 也有一些简单的 IDE，当 Surface 上安装 Ubuntu 时，我们肯定会有一些开发工具。但是 Visual Studio 本身呢？有资料吗？

在 Surface 上开发所有东西并不是很舒服，但有时这个想法会在公共汽车上触动你，并且很高兴拥有一个功能齐全的工具来处理你当前的所有项目。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T12:59:55.033

基于 Intel 的 Surface 可以运行任意旧版 Windows 应用程序，包括 Visual Studio。
然而，屏幕可能被证明是小得令人讨厌。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T18:16:30.103

我想说 Windows 8 Pro 和 Surface 平板电脑等设备在任何情况下都非常有用。您可能不会坐在沙发上在 Visual Studio 中编写代码，但您当然可以使用同一台机器（停靠并连接到外部显示器和输入设备）在办公桌上编写代码。它可以随时运行任何应用程序，但 Metro UI 就是要让“平板电脑”上下文更加高效和可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T05:09:03.510

如果它是非 ARM 机器，您可以在其上运行您的视觉工作室。即使现有的三星 slate 系列 7 也可以正常工作。

当您将其与键盘、鼠标和外接显示器对接时，它非常适合开发。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-25T18:35:16.723

如果您希望 PRO 版本像实际笔记本电脑（运行正常程序并进行编程）和平板电脑（从键盘/扩展坞等分离时）之间的交叉，那么 PRO 版本绝对是您想要/需要的。

[http://www.microsoft.com/Surface/en-US/surface-with-windows-rt/help-me-choose](http://www.microsoft.com/Surface/en-US/surface-with-windows-rt/help-me-choose)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-27T15:27:54.530

我认为最大的绊脚石之一可能是可用的硬盘空间。作为粗略的指南，VS 2012 Ultimate 似乎需要大约 10gb 的空间，而 VS Community 可能需要大约 20gb 的空间。

[视觉工作室 2012 下载](http://www.microsoft.com/en-us/download/details.aspx?id=30678 "视觉工作室 2012 下载")

它不允许您安装到 SD 卡上，安装点只会为您提供硬盘驱动器上已有的可用空间。

你需要有一个足够大的硬盘来安装操作系统和那里的开发工具。

# html - 两个图像相对的 Z-index

> ID：11329630
> 
> 赞同：1
> 
> 时间：2012-07-04T12:58:35.770
> 
> 标签：html, css, z-index

我有一个小问题，我似乎无法弄清楚。我尝试搜索这个问题，但似乎找不到可靠的答案。

看这个例子： [提琴手](http://jsfiddle.net/gDCgQ/)

这很简单。我有一个以屏幕为中心的 div。这个 div 包含一个图像，我想根据 XY 位置将另一个图像放在顶部。（通常我从数据库中获取这些 XY 位置，但为了清楚本示例，我对它们进行了硬编码）。

当我运行代码时，我的图像位于我的第一张图像旁边。我添加了 z-index 但这似乎不起作用。我读过一些关于相对 z 索引不起作用的帖子，但有人可以帮我解决这个问题吗？

谢谢大家。亲切的问候， Luuk86

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:00:43.420

要使用 XY 位置定位元素，您应该使用`position: absolute;`

如果要将其放置在另一个元素中，请添加`position: relative;`到容器中。

# sql-server-2008 - SQL Server 2008 空间数据选择查询

> ID：11329633
> 
> 赞同：0
> 
> 时间：2012-07-04T12:58:44.303
> 
> 标签：sql-server-2008, spatial-query

我正在开发一个维护 SQL 数据库的项目。在这个数据库中，我有一个名为 AirportZone 的表，其属性名为“area”，类型为几何。另外，我维护了一个表 OfferRequest，其中包含一个名为“位置”的地理类型的属性。由于我想查看是否在机场区域发生了 OfferRequest，因此我想定义一个复杂的 SQL 查询，该查询将返回某个区域的用户发出的所有请求。就像是：

```
select OfferRequest.offer_id from OfferRequest, AirportZone 
where @tmp_geo is geography::STGeomFromText(CAST(AirportZone.area as varchar(max)), 4326)
and @tmp_geo.STIntersects(OfferRequest.location) = 1 and AirportZone.name = 'given_name' 
```

显然这个查询是错误的，因为变量@tmp_geo（我希望它是地理类型）。有没有办法做到这一点，或者我应该定义一个while循环？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:50:25.213

上面的查询可以实现为：

```
DECLARE @tmp_geo geometry;
SET @tmp_geo = geography::STGeomFromText(CAST(AirportZone.area as varchar(max));
SELECT OfferRequest.offer_id FROM OfferRequest, AirportZone WHERE
@tmp_geo.STIntersects(OfferRequest.location) = 1 AND AirportZone.name = 'given_name'; 
```

# android - 在 Android/Dalvik 上是否推荐使用 ProGuard 合并类？

> ID：11329637
> 
> 赞同：4
> 
> 时间：2012-07-04T12:58:57.143
> 
> 标签：android, proguard

我突然想到，我们使用的 ProGuard 代码优化之一，即合并类层次结构，可能根本不是一个好的选择。

我的预感是合并类以减少对 ClassLoader 的调用是有益的，这至少在 JVM 上是一个特别慢的操作，并且在我们的代码中，我们选择了许多更小的（通常是内部的）类而不是大神对象类，所以ClassLoader会比较频繁地运行。

然而，考虑到所有类都将合并为一个类的极端情况（可能不太可能），那么即使加载器只会被调用一次，我们最终也会将大量代码加载到内存中，而这些代码很可能永远不会被使用（我猜80/20规则也适用于此）。

这让我想知道：

1) Dalvik 中的类加载速度到底有多快？这是一个值得通过使用类合并来减少的操作吗？

2）也就是说，你会推荐在Android上使用类合并吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T14:09:13.857

当不必要地拆分类/接口及其扩展/实现时，垂直类合并会折叠这些类/接口。这应该始终是一种改进（尺寸和性能）。

对于水平类合并，我无法提供一般性答案。代码库会更小，但可以想象一些代码可能会很快加载，或者在极端情况下不必要地加载。

# linq - LINQ to NHibernate - 将 guid 与字符串进行比较

> ID：11329643
> 
> 赞同：4
> 
> 时间：2012-07-04T12:59:23.773
> 
> 标签：linq, nhibernate, linq-to-nhibernate

```
return queryable.Where(version => version.Id.ToString().Contains(searchKey)); 
```

此行将导致“不支持 ToString 异常”。

目标：创建将字符串、int、GUID 与字符串关键字进行比较的搜索查询。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:45:46.193

尚未测试，但您可以尝试在查询之前构建您的 Guid-to-be-searched 对象：

```
Guid searchGuid;
try 
{
    searchGuid = Guid.Parse(searchKey);
} 
catch (System.FormatException) 
{
   // Handle invalid search key
}

return queryable.Where(version => version.Id == searchGuid); 
```

**编辑：**

尚未测试（对不起，再次），但 afaik NHibernate.Linq 能够将类型转换语句转换为等效的 SQL Cast 函数。也许这应该工作：

```
return queryable.Where(version => (string)version.Id == searchGuid); 
```

不过，我不确定 C# sintax。在 VB.NET 中，我会写如下内容：

```
Return queryable.Where(Function(version) CType(version.Id,String) = searchGuid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T01:58:41.853

您不能直接使用 LINQ 来执行此操作（您必须扩展 LINQ 提供程序，这很重要）

然而，使用 NHibernate 拥有的所有其他查询方法很容易。

以下是 QueryOver 的示例：

```
return session.QueryOver<YourEntity>()
              .Where(Restrictions.Like(
                         Projections.Cast(NHibernateUtil.String,
                                          Projections.Property<YourEntity>(
                                              version => version.Id)),
                         searchKey,
                         MatchMode.Anywhere)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:09:27.273

像这样比较的更好方法

```
return queryable.
     Where(version => 
                 (String.Compare(version.Id.ToString(),searchkey, true)==0); 
```

**注意：**在这里，我考虑将 searchkey 作为字符串 anc 转换 version.Id guid 在字符串中并使用 String.Compare 字符串和忽略字符串中的大小写通过在比较方法中放置 true

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T03:08:13.933

至少这是框架 4.5 的答案...

```
 Version Ver = null;
    foreach (Version V in Versions) {
        Guid g = V.ID;
        if (string.Compare(g.Value.ToString(), searchkey)) {
            Ver = V;
            break;
        }
    }

OR in LINQ

Version Ver = Version.Where(v => v.ID.Value.ToString == searchkey).FirstOrDefault;

    //Use found Ver ;-) 
```

# c# - 如何解决expando奇怪的行为来填充mvc3 webgrid？

> ID：11329645
> 
> 赞同：0
> 
> 时间：2012-07-04T12:59:27.933
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我尝试使用一个已[回答的问题](https://stackoverflow.com/questions/11306458/how-to-bind-json-dynamic-model-in-asp-net-mvc-3)和[一篇文章](http://msdn.microsoft.com/en-us/magazine/gg650669.aspx)来填充 webgrid ，但我不能我的所有行都与值重复。所有行值都与其他行值相同。我一直在调试以解决这个奇怪的问题。但是我不能：

```
public class MyViewModel
{
    public IEnumerable<string> Columns { get; set; }
    public IEnumerable<dynamic> Values { get; set; }
    public bool HasNext { get; set; }
    public bool HasPrevious { get; set; }
}

public class JobController : Controller
{
    public ActionResult Index(int? page)
    {
        ViewData["Customers"] = new SelectList(CustomerOperation.GetCustomers().Items, "Id", "Name", null);
        ViewData["Jobs"] = new SelectList(JobOperation.GetCustomersAssemblyList().Items, "scheduleId", "name", null);
        const int pageSize = 10;
        ViewBag.CurrentPage = (page ?? 0);
        if (Session["CustomerId"]!=null && Session["ScheduleId"]!=null)
        {
            int customerId = ConvertUtil.ToInt(Session["CustomerId"]);
            int scheduleId = ConvertUtil.ToInt(Session["ScheduleId"]);
            var model = GetPagedVals((page ?? 0) * pageSize, pageSize, customerId, scheduleId);
            ViewBag.HasPrevious = model.HasPrevious;
            ViewBag.HasMore = model.HasNext;

            return View(model);
        }
        else
            return View();
    }
 public MyViewModel GetPagedVals(int skip, int take, int Id, int scheduleId)
   {
       Session["CustomerId"] = Id;
       Session["ScheduleId"] = scheduleId;
       DataTable dt = JobOperation.GetJobsBySchedulerIdAndCustomerId(scheduleId, Id);
       List<dynamic> dataList = new List<dynamic>();
       dynamic expando = new ExpandoObject();
       var p = expando as IDictionary<String, object>;

       IEnumerable<string> columnNames = dt.Columns.Cast<DataColumn>().Select(x => x.ColumnName);
       foreach (DataRow dr in dt.Rows)
       {
           foreach (string columnName in columnNames)
           {

               p[columnName] = ConvertUtil.ToString(dr[columnName]);

           }
           dataList.Add(expando);
        }

       var result = dataList.Skip(skip).Take(take).ToList();
       var model = new MyViewModel();
       model.Columns = columnNames;
       model.Values = result;
       model.HasNext = (skip + 10 < dataList.Count);
       model.HasPrevious = (skip > 0);
       ViewBag.HasPrevious = model.HasPrevious;
       ViewBag.HasMore = model.HasNext;

       return model;
   } 
```

结果如下：

![在此处输入图像描述](../Images/b10364d66cf259c861b17e96e8617360.png)

但所有行与花药相同！结果必须如下： ![在此处输入图像描述](../Images/f265f6a0baa607f21a210e9e2c48033c.png) 我的 sql 查询运行良好。没有问题的sql。我重复的行最后一行。如何解决这个奇怪的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:01:40.040

```
dynamic expando = new ExpandoObject(); 
```

您只创建*一个* `ExpandoObject`实例。
您为每一行将相同的实例添加到列表中一次，每次都覆盖属性。

您需要`new`为每一行创建一个实例。

# c# - 关于gridviewdatacolumn的C#if语句

> ID：11329650
> 
> 赞同：0
> 
> 时间：2012-07-04T13:00:25.560
> 
> 标签：c#, gridview

我有这样的代码

```
....
       <dx:GridViewDataColumn FieldName="NO_APPEL" VisibleIndex="2" Caption="N° Appel">
                       <DataItemTemplate>

                 IF DataBinder.Eval(Container, "DataItem.NO_APPEL") == NULL  
                      THEN i don't want to show the link (a href)
                  ELSE
                      show the link (a href)

                    <a href="javascript:void(0);" onclick="OnMoreInfoClick_Appel(this, '<%# DataBinder.Eval(Container, "DataItem.NO_APPEL") %>')">Plus d'info</a>

                </DataItemTemplate>
...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:05:06.090

你可以使用这个解决方案

```
<%# SpecificFunction(DataBinder.Eval(Container, "DataItem.NO_APPEL"))%>

public string SpecificFunction(string value)
{
   ...... //your treatment
   return value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:06:25.607

你可以这样做：

```
<%# DataBinder.Eval(Container, "DataItem.NO_APPEL") == NULL ? 
      String.Empty 
      : 
      <a href="javascript:void(0);" onclick="OnMoreInfoClick_Appel(this, '<%#
      DataBinder.Eval(Container, "DataItem.NO_APPEL") %>')">Plus d'info</a> 
 %> 
```

当然它应该是一个衬里，但为了清楚起见，我把它分开了。

# list - 通过函数组合有效的列表追加/前置

> ID：11329660
> 
> 赞同：7
> 
> 时间：2012-07-04T13:01:03.037
> 
> 标签：list, haskell, function-composition

几个月前，我在某处读到了一种在 O(1) 中将列表附加和前置到其他列表的有效方法，方法是用函数组合表示它们，一旦评估，就会在 O(n) 中构建结果列表。

不幸的是，我不记得这篇文章的来源或（如果存在）这种技术/方法的名称。请问您有这方面的参考吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T13:25:35.183

该数据结构称为差异列表（或`DList`简称）。[您可以在 Hackage 上提供的库](http://hackage.haskell.org/package/dlist)中找到它的默认实现。

[正如您所提到的，可以从Real World Haskell 中有关该主题的一章中](http://book.realworldhaskell.org/read/data-structures.html#data.dlist)收集完整的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:14:24.993

你一定在想`ShowS`和朋友们的前奏曲。见[这里](http://www.ninebynine.org/Software/Learning-Haskell-Notes.html#UsingShowS)。

# c# - 以编程方式删除 Internet Explorer 缓存

> ID：11329661
> 
> 赞同：2
> 
> 时间：2012-07-04T13:01:03.170
> 
> 标签：c#, .net, internet-explorer, browser-cache

> **可能重复：**
> [通过“C#”清除临时 Internet 文件](https://stackoverflow.com/questions/8256804/clear-temporary-internet-files-via-c)
> [如何以编程方式清除浏览器缓存？](https://stackoverflow.com/questions/8306839/how-to-clear-browser-cache-programmatically)

我试图`Environment.SpecialFolder.InternetCache`通过迭代此文件夹的所有目录并删除这些目录中的所有文件来删除文件。问题是它不会删除**.tmp**和**index.dat**文件，因为它们被 Windows 本身锁定。

我的问题是：是否有任何解决方法可以删除**.dat**和**.tmp**文件，**或者**我可以读取 Index.dat 文件并删除我想从 IE 缓存中删除的特定文件的条目吗？

**注意：**我想从 C# 桌面应用程序而不是通过 ASP.NET

# matlab - matlab：结构缓冲区大小大于 4096？

> ID：11329662
> 
> 赞同：0
> 
> 时间：2012-07-04T13:01:15.520
> 
> 标签：matlab, file-io, buffer

我有一个其他人编写的 matlab 脚本，它无法加载长度超过 4095 的字符串序列（缓冲区大小错误）。如何使元素`struct`更大以容纳更大的字符串序列？这是创建的代码位`struct`：

```
 [...]
    seq = struct('Header',{}, 'Sequence', {});
    for ii=1:gene_num
        seq(ii).Header = raw{ii+1,1};
        seq(ii).Sequence = raw{ii+1,2};
    end;
    [...] 
```

这是错误：

```
^G??? Buffer overflow (bufsize = 4095) while reading string from
file (row 54660, field 1). Use 'bufsize' option. See HELP TEXTREAD.

Error in ==> textread at 177
[varargout{1:nlhs}]=dataread('file',varargin{:});

Error in ==> fastaread at 101
    ftext = textread(filename,'%s','delimiter','\n');

Error in ==> tfbs_scanner_zscore at 8
S = fastaread(fin); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:46:35.680

您尝试读取的文件包含的行长于 TEXTREAD 函数中使用的默认缓冲区大小。

尝试增加缓冲区大小：

```
ftext = textread(filename, '%s', 'delimiter','\n', 'bufsize',50000); 
```

选择适合您的值

顺便说一句，TEXTREAD 现在已经过时了，考虑升级到 TEXTSCAN

# powershell - 异步 Powershell 脚本

> ID：11329664
> 
> 赞同：1
> 
> 时间：2012-07-04T13:01:23.737
> 
> 标签：powershell, asynchronous, powershell-2.0

我正在尝试在后台运行一个函数。这个函数总是需要等待一段时间。我试图用`start-job`. 但没有成功（日志为空）。

### 我的功能

```
Start-Job { a1 }
function a1()
{
  $timer = [diagnostics.stopwatch]::startnew()
  while ($timer.elapsed.totalseconds -lt 30) 
  {
    writelog "TESTTESTTEST" $timer.elapsed.totalseconds
    start-sleep -seconds 5
  }
  $timer.stop()
} 
```

### 日志

```
function writelog([string]$func, [string] $Message, [string] $Value)
{
  $loggingpath = $LogPath+(Get-Date -displayhint date -Format yyyyMMdd)+".txt"
  Add-Content -Path $loggingpath -Value (" ")
  Add-Content -Path $loggingpath -Value ("Date:" + (Get-Date))
  Add-Content -Path $loggingpath -Value ("Function:" + ($func))
} 
```

如果我运行代码`start-job`一切正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:30:58.000

`Start-Job`在单独的工作进程中运行传递的脚本块。在这种情况下，该过程没有定义`a1`。您需要在引用的脚本（文件）或脚本块中的内联（以及任何其他依赖项，如 ）中`a1`定义`writelog`两者`$LogPath`。

例如。以下确实添加到文件中：

```
$j = start-job { Add-Content -Path "$env:TEMP\JobDemo.txt" -value "A message at $([datetime]::Now)" }
$j | wait-job
$j | Receive-Job
Get-Content -Path "$env:TEMP\JobDemo.txt" 
```

# python - 大双数组中小双数组的最佳匹配

> ID：11329668
> 
> 赞同：2
> 
> 时间：2012-07-04T13:01:37.660
> 
> 标签：python, math, match

我正在尝试将一个大小为~20 的小数组匹配到一个大小为~200000 的较大数组中。两个数组都包含双精度值。在这种情况下，匹配意味着最小的错误，因为不会有完全匹配。

接下来是，我必须更改小数组的值，因为如果它不同但值之间的差距相同，它也应该匹配，这意味着：

```
array 1: [1.3, 1.4, 1.3, 1.5, 1.7]
array 2: [..., 2.3, 2.4, 2.4, 2.5, 2.7, ...] 
```

我必须将每个比较的最后一个元素带到相同的数字。上面的例子将是一个非常好的匹配，因为首先我会 +1.0 整个数组 #1。

[编辑]为了澄清上述陈述：在计算错误之前，示例数组应如下所示：

```
array 1: [2.3, 2.4, 2.3, 2.5, 2.7] 
// (+1 of each element so the last element of the small array, 
// and the last element of the part of the large array I am 
// comparing to, has the same values: in this case: 2.7)
array 2: [..., 2.3, 2.4, 2.4, 2.5, 2.7, ...] 
```

[/编辑]

我知道可以简单地遍历大数组，但是太慢了。当然，我可以使用像 norm(v1 - v2) 这样的向量运算，而不是通过遍历数组来计算误差。

所以我听说，python 非常适合数学运算，但我找不到任何如何比较 2 个数组（数组中只有一个数字）的东西。

最后，问题是：任何想法，我如何能以非常快速的方式解决问题。哪种语言可以很好地解决这类问题（八度不是因为它在矢量计算方面速度很快，而是在迭代方面很慢） - 可能在 python 中有一些好的库？

让我知道我是否需要更详细地解释它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:06:57.270

我承认我对你如何定义最佳匹配有点模糊，但这个例子可以很容易地调整。神奇之处在于函数接收与长度相同`closeness`的切片并返回一个数字。数字越小，匹配越好。`data``target`

```
import random

target = [random.random() * 10 for i in range(20)]
data   = [random.random() * 10 for i in range(200000)]

def closeness(a_range):
    diffs = list(map(lambda e: e[0]-e[1], zip(a_range, target)))
    avg_diffs = float(sum(diffs)) / len(diffs)
    adjusted_target = [i + avg_diffs for i in target]
    return sum(adjusted_target)

ranges = [data[i:i+len(target)] for i in range(len(data)-len(target))]
best_match = min(ranges, key=closeness) 

print(best_match) 
```

# iphone - 如何显示特定表格单元格对象的详细信息？

> ID：11329669
> 
> 赞同：0
> 
> 时间：2012-07-04T13:01:39.397
> 
> 标签：iphone, objective-c

我在表格视图中有一个很长的医院列表，使用 plist 显示。现在我的工作是当我点击表格单元格中的任何医院时，下一个视图中应该显示医生姓名、电话号码和医院的完整地址。我在word文档中有那个特定医生的姓名和医院地址。那么如何实现它。我认为硬编码医院的细节会很痛苦，因为列表太长了。有什么简单的方法？？？请帮助我提供代码或任何其他有效链接。提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:10:36.523

我将尝试解决您的问题的一般方法。您可以尝试在 XML 文件中获取所有医院/医生数据。类似的事情可能是：

```
<Hospitals>
    <Hospital name ="St John" doctorPhone="5554567" doctorName="Carter" hospitalAdresse="1 sq StJohn">
    </Hospital>

    <Hospital name ="St Peter" doctorPhone="5558901" doctorName="Grey" hospitalAdresse="1 sq StPeter">
    </Hospital>
<Hospitals> 
```

您可以在 AppDelegate 中解析此 xml，以便在启动时准备好它。你可以看看做同样事情的地震例子。

然后你会有一个 NSArray of Hospital。表格的每个单元格都应显示为 t index 的医院：indexpath.row

这样，当用户使用 indexpath.row 触摸表格视图中的单元格时，您将获得医院信息。您可以在另一个视图或 UIAlertView 中显示它们。

无论如何，你应该看看 Seismic example project that do something similar to you

祝你好运

# sql - Left 和 Inner Join 的区别......永远一次

> ID：11329683
> 
> 赞同：4
> 
> 时间：2012-07-04T13:02:49.493
> 
> 标签：sql, join, left-join, inner-join

我知道这里和互联网上已经创建了很多关于这个主题的主题。但我真的无法得到关于这两个陈述之间差异的最后一点！我的意思是，尝试和尝试我可以通过查询达到我需要的所有结果，但我真的无法完全控制刀！

我认为自己是一个非常优秀的程序员和一个非常优秀的 SQL-ista，对此我感到有点羞愧......

这是一个例子：

*   我有一个包含网站页面的表格（“web_page”）
*   带有类别（“类别”）的表格。
*   一个类别可以包含一个或多个页面，反之则不行
*   一个类别可能根本不包含任何页面
*   页面可以在网站中可见或不可见

因此，如果我想显示所有类别及其页面，我的意思是有页面和没有页面的两个类别，我必须执行以下操作：

```
FROM category
LEFT JOIN web_page ON ( web_page.category_id = category.category_id AND web_page.active = "Y" ) 
```

因此，如果一个类别没有页面，我会在该类别的记录上看到 web_page_id NULL。

但如果我这样做：

```
FROM category
LEFT JOIN web_page ON ( web_page.category_id = category.category_id )
...
WHERE web_page.active = "Y"... 
```

我将只选择至少有一个 web_page 的类别...但是为什么呢？

这只是一个例子......我想永远理解这种差异！

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:04:51.007

要使查询按预期工作，请将条件放入`ON`子句中：

```
FROM category
LEFT JOIN web_page ON web_page.category_id = category 
   and web_page.active = "Y" 
```

这样做的原因是（对于大多数数据库，但不是全部）该子句在加入*后*`WHERE`过滤行。如果加入没有导致网页行加入（因为该类别没有网页），那么网页的所有列都是，并且任何值（如）与 a 的比较都是假的，所以那些非- 加入行将被过滤掉。*`null``"Y"``null`*

 *但是，通过将条件移动到`ON`子句中，条件*在连接*时执行，因此您只*连接*的行`active = "Y"`，但如果没有任何这样的行，您只会得到左连接`null`网页。

这个版本的查询实际上是在说：“给我所有类别及其*活动*网页（如果有的话）”

请注意，我说的是“大多数数据库”......例如 mysql 足够聪明，可以理解您正在尝试做什么，并且如果在 mysql 上运行，您的查询将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:08:44.713

发生这种情况是因为 SQL 正在分阶段处理：

1.  `FROM`子句（所有连接都在这里）；
2.  `WHERE`条款;
3.  `GROUP BY`条款;
4.  窗口函数（虽然与 MySQL 无关）；
5.  `ORDER BY`条款。

所以这真的很重要，如果你想*过滤*`web_page.active='Y'`或者你想加入*相同*的条件。在前一种情况下，连接完成，您只需过滤掉结果，将您`OUTER`的连接转换为`INNER`一个。在后一种情况下，您将获得所需的结果，因为不匹配的行将导致`NULL`对应列的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:09:54.627

试图帮助你理解部分。

考虑是 SQL 语言的一个方面，当在 中指定条件时`LEFT JOIN`，它适用于查找要匹配的记录。当在底部的 WHERE 子句中指定条件时，它适用于所有记录 - 在连接发生之后。如您所见，这具有将 更改`LEFT JOIN`为 an的意外副作用。`INNER JOIN`

您可以通过执行以下`WHERE`子句来解决此问题：

```
WHERE COALESCE(web_page.active,"Y") = "Y" 
```

但这并不能保证得到相同的结果，因此正确的做法是将该标准保留`ON`在`JOIN`.*

# django - django：urllib2 返回“不完整格式”检索 JSON

> ID：11329684
> 
> 赞同：0
> 
> 时间：2012-07-04T13:03:02.383
> 
> 标签：django, json

我有一段代码可以通过控制台运行，但在我的 django 应用程序上运行时失败：

```
# myapp/utils.py
def get_currencies_json():
try:
    req = urllib2.Request("http://openexchangerates.org/latest.json")
    opener = urllib2.build_opener()
    f = opener.open(req)
    return simplejson.load(f)
except Exception, ex:
    logging.error("get_currencies_json(): %s" % ex)
    return False 
```

当它到达 f = opener.open(req) 时失败并返回：

```
get_currencies_json(): incomplete format 
```

我在这样的视图中加载这个函数：

```
context = {
    ...
    'currencies_json': get_currencies_json(),
} 
```

任何想法？

# ruby - 在Ruby中的索引位置替换字符

> ID：11329685
> 
> 赞同：3
> 
> 时间：2012-07-04T13:03:07.903
> 
> 标签：ruby, indexing, position, substitution

我有一个字符串，想在不同的位置替换多个字符并打印该字符串。

例如

在这里，我喜欢用 string_replace 替换位置处的字符串。

```
string = "AGACACTTTATATGTAT"

positions = ["2", "5", "8", "10"]

string_replace = ["T", "A", "G", "G"] 
```

我需要的输出是这个=>“AGTCAATTGAGATGTAT”

我试过这个但没有成功：

```
positions.zip(string_replace).each do |pos, str|
  string.gsub!(/#{string}[#{pos}]/, '#{str}')
  puts string
end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T13:07:01.940

```
positions.zip(string_replace).each do |pos, str|
  string[pos.to_i] = str
  puts string
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:07:57.913

这里：

```
positions.each_with_index {|o, i| string[o]=replacments[i]} 
```

# javascript - 添加日期到日期并跳过给定的日期

> ID：11329686
> 
> 赞同：0
> 
> 时间：2012-07-04T13:03:09.170
> 
> 标签：javascript, date

我将天数添加到特定日期：

```
myDate.setDate(myDate.getDate()+plusdays 
```

plusdays 是我的变量，一切正常。

现在我想以允许跳过给定时间段（最终由用户指定）（例如从 4 月 1 日到 4 月 15 日）的方式计算结果，这不一定是假期。

我已经查看了类似的问题，但要么我不理解它们，要么我猜它们并没有真正解决我的问题。

有任何想法吗？

编辑：我的主要问题是只有在与计算相关时才应该跳过这些日子。换句话说，我需要一个解决方案，如果我将 30 天添加到 3 月 28 日，它会增加 30 天而不计算 4 月 1 日至 4 月 15 日之间，但如果我将 1 天添加到 3 月 28 日，那么结果就是 3 月 29 日。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:13:13.603

在您当前代码的逻辑中，它应该类似于

```
myDate.setDate(myDate.getDate() + plusdays + skipdays) 
```

计算`skipdays`使用

```
var singleDay = 1000 * 60 * 60 * 24,
    fromdate = new Date('1 Apr 2012'),
    todate = new Date('15 Apr 2012'),
    skipdays = (todate - fromdate) / singleDay ; 
```

* * *

**更新**

发表评论后，您可以使用

```
function interSectionInDays(include, exclude){
    if (!(include.from > exclude.to) && !(include.to < exclude.from)){
        var from = Math.max(include.from, exclude.from),
            to   = Math.min(include.to, exclude.to),
            singleDay = 1000 * 60 * 60 * 24;

        return (to-from)/singleDay;
    }
    return 0;
} 
```

此方法将计算日期范围之间的相交天数..

用于

```
interSectionInDays( {from: <startdate>, to:<enddate>}, {from:<excludestartdate>, to:<excludeenddate>} ); 
```

所以在你的例子中

```
var fromdate = new Date(myDate),
    todate = new Date(fromdate).setDate( fromdate.getDate() + plusdays),
    excludestart = new Date('1 Jan 2012'),
    excludeend = new Date('5 Apr 2012'),
    skipdays = interSectionInDays( {from:fromdate, to:todate}, {from:excludestart, to:excludeend});

myDate.setDate( myDate.getDate() + plusdays + skipdays ); 
```

**演示在** [http://jsfiddle.net/gaby/mACmW/](http://jsfiddle.net/gaby/mACmW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-07T08:09:47.197

```
let curDate = new Date()
let delayDate = new Date(curDate.setDate(curDate.getDate() + 90)) 
```

像这样，一切都会好起来的

# objective-c - iOS addTarget:action:forControlEvents 在 for 循环中分配时仅适用于我的一个按钮

> ID：11329688
> 
> 赞同：0
> 
> 时间：2012-07-04T13:03:17.373
> 
> 标签：objective-c, ios, uiview, for-loop, uibutton

我有一个包含几个子视图的视图，每个子视图都有一个透明按钮。我将这些视图放在我的主 UIView 中的 for 循环中，在这个循环中，我还为子视图按钮属性分配了一个目标和一个动作。我的问题是只有在循环中创建的第一个视图和按钮有效（也就是说，当我单击它时它的动作被调用）。

循环的相关部分如下所示：

```
// _categories is an array
for (int i = 0; i < _categories.count; i++) {

     [...]

    Category *category = [_categories objectAtIndex:i]; 
    CategoryView *categoryView = [[CategoryView alloc] initWithFrame:categoryRect andTitle:category.name];
    [...]

    categoryView.categoryButton.tag = [category.categoryId intValue];
    [categoryView.categoryButton addTarget:self action:@selector(openCategoryWithId:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:categoryView];

    [...]
} 
```

动作如下所示：

```
- (void)openCategoryWithId:(UIButton *)sender
{
    // Only gets called when I click on the first views button. 
    NSLog(@"Hello");
} 
```

我试图为子视图创建一个强大的属性，但这没有帮助。

关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:03:19.220

看起来按钮没有正确定位，因为`categoryRect`.

# javascript - 将今天的日期与日历日期进行比较（仅针对接下来的 7 天，否则会生成警报）

> ID：11329691
> 
> 赞同：-1
> 
> 时间：2012-07-04T13:03:33.567
> 
> 标签：javascript, validation

我必须将今天的日期与日历日期进行比较（使用日期选择器 ajax 选择日期）。如果日期差异超过 7 天，则生成警报。

```
 var mydate = new Date();//Todays date
        var theyear = mydate.getFullYear();
        var themonth = mydate.getMonth() + 1;
        var thetoday = mydate.getDate();

        txtDate.value='04-Jul-2012';//date picker date in this format 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:34:53.377

```
var mydate = new Date(); //Todays date
txtDate.value='16-Jul-2012'; //date picker date in this format

var newDate = new Date(txtDate.value); //make date object

var difference = Math.ceil((newDate-mydate) / (60*60*24*1000)); //calculate days

if (difference > 7) alert('more than 7 days'); 
```

[小提琴](http://jsfiddle.net/7y9XU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:32:04.567

```
var datePicked = '26-Jun-2012';
var datems = Date.parse(datePicked.replace(/-/g, " "));
var dateNow = new Date();
dateNow.setHours(0,0,0,0);
var msDiff = Math.abs(Number(dateNow) - datems);
// 7 Days = 604 800 000 ms
if(msDiff > 604800000) alert("Time difference greater 7 days"); 
```

# web-services - 无法通过认证进行身份验证：已获取跟踪日志（错误 500）

> ID：11329692
> 
> 赞同：1
> 
> 时间：2012-07-04T13:03:33.897
> 
> 标签：web-services, ssl, certificate, httprequest, trace

当我尝试使用认证对 Web 服务进行身份验证时遇到了一些问题。服务器返回 500 并且 xml 结果包含：“{100} Forbidden. You are not allowed to access that resource..” 这意味着身份验证似乎不起作用。请注意，证书已安装在我的计算机和接收器上。我可以通过“thrusted publishers”和“other people”中的IE“Certificate”看到它。您必须知道，如果我使用带有用户名和密码令牌的标题，它会完美运行。

**这是我的 HTTPRequest 代码**

```
 Dim soapAction As String = "http://www.starstandards.org/webservices/2005/10/transport/operations/ProcessMessage/v1_01/GetVehicleServiceHistory"

            'Create Connection 
            Dim requestObj As HttpWebRequest
            Dim responseObj As HttpWebResponse = Nothing

            requestObj = DirectCast(WebRequest.Create("https://gmservices.pp.gm.com:443/ProcessMessage"), HttpWebRequest)
            requestObj.AllowAutoRedirect = False
            requestObj.KeepAlive = False
            requestObj.Method = "POST"
            requestObj.Timeout = 600000

            Dim certEasydeal As X509Certificate = New X509Certificate("C:\test\easydeal.cer")

            requestObj.ClientCertificates.Add(certEasydeal)

            ' 10 minutes 
            requestObj.Headers.Add("SOAPAction", soapAction)
            requestObj.ContentType = "text/xml; charset=UTF-8"
            requestObj.UserAgent = "DSPIdentifier"
            requestObj.ContentLength = Convert.ToInt32(xmlContent.Length)

            'Write XML to Remote Host 
            Dim encoding As New System.Text.UTF8Encoding
            Dim encodedString As Byte() = encoding.GetBytes(xmlContent) 'EasyDeal.Common.Utility.asciiEncodeData(xmlContent)
            Dim requestStream As Stream = requestObj.GetRequestStream()
            requestStream.Write(encodedString, 0, encodedString.Length)
            requestStream.Close()

            'Receive Response from Remote Host 
            Try
                responseObj = DirectCast(requestObj.GetResponse(), HttpWebResponse)
            Catch e2 As System.Net.WebException
                If e2.Status = WebExceptionStatus.ProtocolError Then
                    responseObj = DirectCast(e2.Response, HttpWebResponse)
                End If
            End Try 
```

**这是跟踪日志**

```
System.Net Verbose: 0 : [9584] WebRequest::Create(https://gmservices.pp.gm.com/ProcessMessage)
System.Net Verbose: 0 : [9584] HttpWebRequest#60504916::HttpWebRequest(https://gmservices.pp.gm.com/ProcessMessage#287065899)
System.Net Information: 0 : [9584] Current OS installation type is 'Client'.
System.Net Information: 0 : [9584] RAS supported: True
System.Net Verbose: 0 : [9584] Exiting HttpWebRequest#60504916::HttpWebRequest() 
System.Net Verbose: 0 : [9584] Exiting WebRequest::Create()     -> HttpWebRequest#60504916
System.Net Verbose: 0 : [9584] HttpWebRequest#60504916::GetRequestStream()
System.Net Information: 0 : [9584] Associating HttpWebRequest#60504916 with ServicePoint#47567903
System.Net Information: 0 : [9584] Associating Connection#60180891 with HttpWebRequest#60504916
System.Net Information: 0 : [9584] Connection#60180891 - Created connection from 172.16.16.112:54052 to 198.208.154.146:443.
System.Net Information: 0 : [9584] TlsStream#23785539::.ctor(host=gmservices.pp.gm.com, #certs=1)
System.Net Information: 0 : [9584] Associating HttpWebRequest#60504916 with ConnectStream#63716305
System.Net Information: 0 : [9584] HttpWebRequest#60504916 - Request: POST /ProcessMessage HTTP/1.1

System.Net Information: 0 : [9584] SecureChannel#42282156::.ctor(hostname=gmservices.pp.gm.com, #clientCertificates=1, encryptionPolicy=RequireEncryption)
System.Net Information: 0 : [9584] Enumerating security packages:
System.Net Information: 0 : [9584]     Negotiate
System.Net Information: 0 : [9584]     NegoExtender
System.Net Information: 0 : [9584]     Kerberos
System.Net Information: 0 : [9584]     NTLM
System.Net Information: 0 : [9584]     Schannel
System.Net Information: 0 : [9584]     Microsoft Unified Security Protocol Provider
System.Net Information: 0 : [9584]     WDigest
System.Net Information: 0 : [9584]     TSSSP
System.Net Information: 0 : [9584]     pku2u
System.Net Information: 0 : [9584]     LiveSSP
System.Net Information: 0 : [9584]     CREDSSP
System.Net Information: 0 : [9584] SecureChannel#42282156 - Attempting to restart the session using the user-provided certificate: [Version]
  V3

[Subject]
  CN=DT Soft Ltd, OU=Digital ID Class 3 - Microsoft Software Validation v2, O=DT Soft Ltd, L=Belize City, S=Belize, C=BZ
  Simple Name: DT Soft Ltd
  DNS Name: DT Soft Ltd

[Issuer]
  CN=VeriSign Class 3 Code Signing 2009-2 CA, OU=Terms of use at https://www.verisign.com/rpa (c)09, OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US
  Simple Name: VeriSign Class 3 Code Signing 2009-2 CA
  DNS Name: VeriSign Class 3 Code Signing 2009-2 CA

[Serial Number]
  109F1DAAAFB83315A6B64A6EED82D816

[Not Before]
  03/11/2009 7:00:00 PM

[Not After]
  03/11/2012 7:59:59 PM

[Thumbprint]
  5557C0953FBD9F93745B214FB2483E9369B597F0

[Signature Algorithm]
  sha1RSA(1.2.840.113549.1.1.5)

[Public Key]
  Algorithm: RSA
  Length: 1024
  Key Blob: 30 81 89 02 81 81 00 98 d4 3c 8b db f9 ab f7 b0 62 8e 0f 5c 14 6e 0a 20 d1 17 7f 55 06 43 08 23 87 48 8e e4 6b 02 70 ec f7 bd 62 c4 c5 f1 4d 3f a8 56 8f 9c ce ea 46 9b f3 25 ce a2 06 5e 76 36 92 98 c7 81 94 b8 25 24 61 c5 e5 ....
System.Net Information: 0 : [9584] SecureChannel#42282156 - Left with 1 client certificates to choose from.
System.Net Information: 0 : [9584] SecureChannel#42282156 - Trying to find a matching certificate in the certificate store.
System.Net Information: 0 : [9584] SecureChannel#42282156 - Locating the private key for the certificate: [Version]
  V3

[Subject]
  CN=DT Soft Ltd, OU=Digital ID Class 3 - Microsoft Software Validation v2, O=DT Soft Ltd, L=Belize City, S=Belize, C=BZ
  Simple Name: DT Soft Ltd
  DNS Name: DT Soft Ltd

[Issuer]
  CN=VeriSign Class 3 Code Signing 2009-2 CA, OU=Terms of use at https://www.verisign.com/rpa (c)09, OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US
  Simple Name: VeriSign Class 3 Code Signing 2009-2 CA
  DNS Name: VeriSign Class 3 Code Signing 2009-2 CA

[Serial Number]
  109F1DAAAFB83315A6B64A6EED82D816

[Not Before]
  03/11/2009 7:00:00 PM

[Not After]
  03/11/2012 7:59:59 PM

[Thumbprint]
  5557C0953FBD9F93745B214FB2483E9369B597F0

[Signature Algorithm]
  sha1RSA(1.2.840.113549.1.1.5)

[Public Key]
  Algorithm: RSA
  Length: 1024
  Key Blob: 30 81 89 02 81 81 00 98 d4 3c 8b db f9 ab f7 b0 62 8e 0f 5c 14 6e 0a 20 d1 17 7f 55 06 43 08 23 87 48 8e e4 6b 02 70 ec f7 bd 62 c4 c5 f1 4d 3f a8 56 8f 9c ce ea 46 9b f3 25 ce a2 06 5e 76 36 92 98 c7 81 94 b8 25 24 61 c5 e5 ....
System.Net Information: 0 : [9584] SecureChannel#42282156 - Cannot find the certificate in either the LocalMachine store or the CurrentUser store.
System.Net Information: 0 : [9584] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)
System.Net Information: 0 : [9584] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = (null), targetName = gmservices.pp.gm.com, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [9584] InitializeSecurityContext(In-Buffer length=0, Out-Buffer length=124, returned code=ContinueNeeded).
System.Net Information: 0 : [9584] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 4b0f798:4b75a68, targetName = gmservices.pp.gm.com, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [9584] InitializeSecurityContext(In-Buffers count=2, Out-Buffer length=0, returned code=ContinueNeeded).
System.Net Information: 0 : [9584] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 4b0f798:4b75a68, targetName = gmservices.pp.gm.com, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [9584] InitializeSecurityContext(In-Buffers count=2, Out-Buffer length=0, returned code=ContinueNeeded).
System.Net Information: 0 : [9584] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 4b0f798:4b75a68, targetName = gmservices.pp.gm.com, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [9584] InitializeSecurityContext(In-Buffers count=2, Out-Buffer length=0, returned code=CredentialsNeeded).
System.Net Information: 0 : [9584] SecureChannel#42282156 - We have user-provided certificates. The server has specified 36 issuer(s). Looking for certificates that match any of the issuers.
System.Net Information: 0 : [9584] SecureChannel#42282156 - Selected certificate: [Version]
  V3

[Subject]
  CN=DT Soft Ltd, OU=Digital ID Class 3 - Microsoft Software Validation v2, O=DT Soft Ltd, L=Belize City, S=Belize, C=BZ
  Simple Name: DT Soft Ltd
  DNS Name: DT Soft Ltd

[Issuer]
  CN=VeriSign Class 3 Code Signing 2009-2 CA, OU=Terms of use at https://www.verisign.com/rpa (c)09, OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US
  Simple Name: VeriSign Class 3 Code Signing 2009-2 CA
  DNS Name: VeriSign Class 3 Code Signing 2009-2 CA

[Serial Number]
  109F1DAAAFB83315A6B64A6EED82D816

[Not Before]
  03/11/2009 7:00:00 PM

[Not After]
  03/11/2012 7:59:59 PM

[Thumbprint]
  5557C0953FBD9F93745B214FB2483E9369B597F0

[Signature Algorithm]
  sha1RSA(1.2.840.113549.1.1.5)

[Public Key]
  Algorithm: RSA
  Length: 1024
  Key Blob: 30 81 89 02 81 81 00 98 d4 3c 8b db f9 ab f7 b0 62 8e 0f 5c 14 6e 0a 20 d1 17 7f 55 06 43 08 23 87 48 8e e4 6b 02 70 ec f7 bd 62 c4 c5 f1 4d 3f a8 56 8f 9c ce ea 46 9b f3 25 ce a2 06 5e 76 36 92 98 c7 81 94 b8 25 24 61 c5 e5 ....
System.Net Information: 0 : [9584] SecureChannel#42282156 - Left with 1 client certificates to choose from.
System.Net Information: 0 : [9584] SecureChannel#42282156 - Trying to find a matching certificate in the certificate store.
System.Net Information: 0 : [9584] SecureChannel#42282156 - Locating the private key for the certificate: [Version]
  V3

[Subject]
  CN=DT Soft Ltd, OU=Digital ID Class 3 - Microsoft Software Validation v2, O=DT Soft Ltd, L=Belize City, S=Belize, C=BZ
  Simple Name: DT Soft Ltd
  DNS Name: DT Soft Ltd

[Issuer]
  CN=VeriSign Class 3 Code Signing 2009-2 CA, OU=Terms of use at https://www.verisign.com/rpa (c)09, OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US
  Simple Name: VeriSign Class 3 Code Signing 2009-2 CA
  DNS Name: VeriSign Class 3 Code Signing 2009-2 CA

[Serial Number]
  109F1DAAAFB83315A6B64A6EED82D816

[Not Before]
  03/11/2009 7:00:00 PM

[Not After]
  03/11/2012 7:59:59 PM

[Thumbprint]
  5557C0953FBD9F93745B214FB2483E9369B597F0

[Signature Algorithm]
  sha1RSA(1.2.840.113549.1.1.5)

[Public Key]
  Algorithm: RSA
  Length: 1024
  Key Blob: 30 81 89 02 81 81 00 98 d4 3c 8b db f9 ab f7 b0 62 8e 0f 5c 14 6e 0a 20 d1 17 7f 55 06 43 08 23 87 48 8e e4 6b 02 70 ec f7 bd 62 c4 c5 f1 4d 3f a8 56 8f 9c ce ea 46 9b f3 25 ce a2 06 5e 76 36 92 98 c7 81 94 b8 25 24 61 c5 e5 ....
System.Net Information: 0 : [9584] SecureChannel#42282156 - Cannot find the certificate in either the LocalMachine store or the CurrentUser store.
System.Net Information: 0 : [9584] Using the cached credential handle.
System.Net Information: 0 : [9584] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 4b0f798:4b75a68, targetName = gmservices.pp.gm.com, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [9584] InitializeSecurityContext(In-Buffers count=2, Out-Buffer length=205, returned code=ContinueNeeded).
System.Net Information: 0 : [9584] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 4b0f798:4b75a68, targetName = gmservices.pp.gm.com, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [9584] InitializeSecurityContext(In-Buffers count=2, Out-Buffer length=0, returned code=ContinueNeeded).
System.Net Information: 0 : [9584] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = 4b0f798:4b75a68, targetName = gmservices.pp.gm.com, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [9584] InitializeSecurityContext(In-Buffers count=2, Out-Buffer length=0, returned code=OK).
System.Net Information: 0 : [9584] Remote certificate: [Version]
  V3

[Subject]
  CN=gmservices.pp.gm.com, OU=Global Web Hosting, O=General Motors Corporation, L=Plano, S=Texas, C=US, SERIALNUMBER=sAZ0qkI2PgF74yWm-rXi94vBPG/Q-Ag6
  Simple Name: gmservices.pp.gm.com
  DNS Name: gmservices.pp.gm.com

[Issuer]
  OU=Equifax Secure Certificate Authority, O=Equifax, C=US
  Simple Name: Equifax Secure Certificate Authority

[Serial Number]
  0E7F80

[Not Before]
  21/12/2009 4:57:17 AM

[Not After]
  21/12/2012 6:02:41 PM

[Thumbprint]
  13B7B4207DB271CC0BA8625A892181F2A9D9F7A3

[Signature Algorithm]
  sha1RSA(1.2.840.113549.1.1.5)

[Public Key]
  Algorithm: RSA
  Length: 1024
  Key Blob: 30 81 89 02 81 81 00 d6 14 b4 ae 0f 9e 59 b5 31 53 3e e3 22 1a 58 23 aa 65 52 ae d8 9f fd 4c a9 7e 27 13 3e ed 15 1c ac 0f f4 13 7a 8e 5f 40 57 e1 98 bd 5d 1e d0 93 d7 f0 e9 22 26 8a 2a 93 7e f0 d1 73 f8 52 27 17 ca 8a 64 ce 5a c7 18 1e c8 f6 bd 0b 15 2e 99 20 77 c4 89 3e 88 99 5a 56 c7 85 49 4c 9b 22 21 85 c6 99 98 d2 81 ff 45 a5 86 29 2a 42 ac 4e 6b ....
System.Net Information: 0 : [9584] SecureChannel#42282156 - Remote certificate was verified as valid by the user.
System.Net Information: 0 : [9584] ProcessAuthentication(Protocol=Tls, Cipher=Aes128 128 bit strength, Hash=Sha1 160 bit strength, Key Exchange=RsaKeyX 1024 bit strength).
System.Net Information: 0 : [9584] ConnectStream#63716305 - Sending headers
{
SOAPAction: http://www.starstandards.org/webservices/2005/10/transport/operations/ProcessMessage/v1_01/GetVehicleServiceHistory
Content-Type: text/xml; charset=UTF-8
User-Agent: DSPIdentifier
Host: gmservices.pp.gm.com
Content-Length: 2254
Expect: 100-continue
Connection: Close
}.
System.Net Information: 0 : [9584] Connection#60180891 - Received status line: Version=1.1, StatusCode=100, StatusDescription=Continue.
System.Net Information: 0 : [9584] Connection#60180891 - Received headers
{

}.
System.Net Verbose: 0 : [9584] Exiting HttpWebRequest#60504916::GetRequestStream()  -> ConnectStream#63716305
System.Net Verbose: 0 : [9584] ConnectStream#63716305::Write()
System.Net Verbose: 0 : [9584] Data from ConnectStream#63716305::Write
System.Net Verbose: 0 : [9584] (printing 1024 out of 2254)
System.Net Verbose: 0 : [9584] 00000000 : 3C 3F 78 6D 6C 20 76 65-72 73 69 6F 6E 3D 22 31 : <?xml version="1
System.Net Verbose: 0 : [9584] 00000010 : 2E 30 22 20 65 6E 63 6F-64 69 6E 67 3D 22 75 74 : .0" encoding="ut
System.Net Verbose: 0 : [9584] 00000020 : 66 2D 38 22 3F 3E 3C 65-6E 76 3A 45 6E 76 65 6C : f-8"?><env:Envel
System.Net Verbose: 0 : [9584] 00000030 : 6F 70 65 20 78 6D 6C 6E-73 3A 65 6E 76 3D 22 68 : ope xmlns:env="h
System.Net Verbose: 0 : [9584] 00000040 : 74 74 70 3A 2F 2F 73 63-68 65 6D 61 73 2E 78 6D : ttp://schemas.xm
System.Net Verbose: 0 : [9584] 00000050 : 6C 73 6F 61 70 2E 6F 72-67 2F 73 6F 61 70 2F 65 : lsoap.org/soap/e
System.Net Verbose: 0 : [9584] 00000060 : 6E 76 65 6C 6F 70 65 2F-22 20 78 6D 6C 6E 73 3A : nvelope/" xmlns:
System.Net Verbose: 0 : [9584] 00000070 : 78 73 69 3D 22 68 74 74-70 3A 2F 2F 77 77 77 2E : xsi="http://www.
System.Net Verbose: 0 : [9584] 00000080 : 77 33 2E 6F 72 67 2F 32-30 30 31 2F 58 4D 4C 53 : w3.org/2001/XMLS
System.Net Verbose: 0 : [9584] 00000090 : 63 68 65 6D 61 2D 69 6E-73 74 61 6E 63 65 22 20 : chema-instance" 
System.Net Verbose: 0 : [9584] 000000A0 : 78 6D 6C 6E 73 3A 78 73-64 3D 22 68 74 74 70 3A : xmlns:xsd="http:
System.Net Verbose: 0 : [9584] 000000B0 : 2F 2F 77 77 77 2E 77 33-2E 6F 72 67 2F 32 30 30 : //www.w3.org/200
System.Net Verbose: 0 : [9584] 000000C0 : 31 2F 58 4D 4C 53 63 68-65 6D 61 22 3E 3C 65 6E : 1/XMLSchema"><en
System.Net Verbose: 0 : [9584] 000000D0 : 76 3A 48 65 61 64 65 72-20 78 6D 6C 6E 73 3A 77 : v:Header xmlns:w
System.Net Verbose: 0 : [9584] 000000E0 : 73 75 3D 22 68 74 74 70-3A 2F 2F 64 6F 63 73 2E : su="http://docs.
System.Net Verbose: 0 : [9584] 000000F0 : 6F 61 73 69 73 2D 6F 70-65 6E 2E 6F 72 67 2E 77 : oasis-open.org.w
System.Net Verbose: 0 : [9584] 00000100 : 73 73 2F 32 30 30 34 2F-30 31 2F 6F 61 73 69 73 : ss/2004/01/oasis
System.Net Verbose: 0 : [9584] 00000110 : 2D 32 30 30 34 30 31 2D-77 73 73 2D 77 73 73 65 : -200401-wss-wsse
System.Net Verbose: 0 : [9584] 00000120 : 63 75 72 69 74 79 2D 75-74 69 6C 69 74 79 2D 31 : curity-utility-1
System.Net Verbose: 0 : [9584] 00000130 : 2E 30 2E 78 73 64 22 20-78 6D 6C 6E 73 3A 77 73 : .0.xsd" xmlns:ws
System.Net Verbose: 0 : [9584] 00000140 : 73 65 3D 22 68 74 74 70-3A 2F 2F 64 6F 63 73 2E : se="http://docs.
System.Net Verbose: 0 : [9584] 00000150 : 6F 61 73 69 73 2D 6F 70-65 6E 2E 6F 72 67 2F 77 : oasis-open.org/w
System.Net Verbose: 0 : [9584] 00000160 : 73 73 2F 32 30 30 34 2F-30 31 2F 6F 61 73 69 73 : ss/2004/01/oasis
System.Net Verbose: 0 : [9584] 00000170 : 2D 32 30 30 34 30 31 2D-77 73 73 2D 77 73 73 65 : -200401-wss-wsse
System.Net Verbose: 0 : [9584] 00000180 : 63 75 72 69 74 79 2D 73-65 63 65 78 74 2D 31 2E : curity-secext-1.
System.Net Verbose: 0 : [9584] 00000190 : 30 2E 78 73 64 22 3E 3C-70 61 79 6C 6F 61 64 4D : 0.xsd"><payloadM
System.Net Verbose: 0 : [9584] 000001A0 : 61 6E 69 66 65 73 74 20-78 6D 6C 6E 73 3D 22 68 : anifest xmlns="h
System.Net Verbose: 0 : [9584] 000001B0 : 74 74 70 3A 2F 2F 77 77-77 2E 73 74 61 72 73 74 : ttp://www.starst
System.Net Verbose: 0 : [9584] 000001C0 : 61 6E 64 61 72 64 73 2E-6F 72 67 2F 77 65 62 73 : andards.org/webs
System.Net Verbose: 0 : [9584] 000001D0 : 65 72 76 69 63 65 73 2F-32 30 30 35 2F 31 30 2F : ervices/2005/10/
System.Net Verbose: 0 : [9584] 000001E0 : 74 72 61 6E 73 70 6F 72-74 22 3E 3C 6D 61 6E 69 : transport"><mani
System.Net Verbose: 0 : [9584] 000001F0 : 66 65 73 74 20 63 6F 6E-74 65 6E 74 49 44 3D 22 : fest contentID="
System.Net Verbose: 0 : [9584] 00000200 : 43 6F 6E 74 65 6E 74 30-22 20 6E 61 6D 65 73 70 : Content0" namesp
System.Net Verbose: 0 : [9584] 00000210 : 61 63 65 55 52 49 3D 22-68 74 74 70 3A 2F 2F 77 : aceURI="http://w
System.Net Verbose: 0 : [9584] 00000220 : 77 77 77 2E 73 74 61 72-73 74 61 6E 64 61 72 64 : www.starstandard
System.Net Verbose: 0 : [9584] 00000230 : 73 2E 6F 72 67 2F 53 54-41 52 22 20 65 6C 65 6D : s.org/STAR" elem
System.Net Verbose: 0 : [9584] 00000240 : 65 6E 74 3D 22 47 65 74-56 65 68 69 63 6C 65 53 : ent="GetVehicleS
System.Net Verbose: 0 : [9584] 00000250 : 65 72 76 69 63 65 48 69-73 74 6F 72 79 22 20 76 : erviceHistory" v
System.Net Verbose: 0 : [9584] 00000260 : 65 72 73 69 6F 6E 3D 22-32 2E 30 31 22 20 2F 3E : ersion="2.01" />
System.Net Verbose: 0 : [9584] 00000270 : 3C 2F 70 61 79 6C 6F 61-64 4D 61 6E 69 66 65 73 : </payloadManifes
System.Net Verbose: 0 : [9584] 00000280 : 74 3E 3C 77 73 73 65 3A-53 65 63 75 72 69 74 79 : t><wsse:Security
System.Net Verbose: 0 : [9584] 00000290 : 3E 3C 77 73 75 3A 54 69-6D 65 73 74 61 6D 70 3E : ><wsu:Timestamp>
System.Net Verbose: 0 : [9584] 000002A0 : 3C 77 73 75 3A 43 72 65-61 74 65 64 3E 32 30 31 : <wsu:Created>201
System.Net Verbose: 0 : [9584] 000002B0 : 32 2D 30 37 2D 30 33 54-31 38 3A 32 30 3A 30 39 : 2-07-03T18:20:09
System.Net Verbose: 0 : [9584] 000002C0 : 5A 3C 2F 77 73 75 3A 43-72 65 61 74 65 64 3E 3C : Z</wsu:Created><
System.Net Verbose: 0 : [9584] 000002D0 : 77 73 75 3A 45 78 70 69-72 65 73 3E 32 30 31 32 : wsu:Expires>2012
System.Net Verbose: 0 : [9584] 000002E0 : 2D 30 37 2D 30 33 54 31-38 3A 32 35 3A 30 39 5A : -07-03T18:25:09Z
System.Net Verbose: 0 : [9584] 000002F0 : 3C 2F 77 73 75 3A 45 78-70 69 72 65 73 3E 3C 2F : </wsu:Expires></
System.Net Verbose: 0 : [9584] 00000300 : 77 73 75 3A 54 69 6D 65-73 74 61 6D 70 3E 3C 2F : wsu:Timestamp></
System.Net Verbose: 0 : [9584] 00000310 : 77 73 73 65 3A 53 65 63-75 72 69 74 79 3E 3C 2F : wsse:Security></
System.Net Verbose: 0 : [9584] 00000320 : 65 6E 76 3A 48 65 61 64-65 72 3E 3C 65 6E 76 3A : env:Header><env:
System.Net Verbose: 0 : [9584] 00000330 : 42 6F 64 79 3E 3C 50 72-6F 63 65 73 73 4D 65 73 : Body><ProcessMes
System.Net Verbose: 0 : [9584] 00000340 : 73 61 67 65 20 78 6D 6C-6E 73 3D 22 68 74 74 70 : sage xmlns="http
System.Net Verbose: 0 : [9584] 00000350 : 3A 2F 2F 77 77 77 2E 73-74 61 72 73 74 61 6E 64 : ://www.starstand
System.Net Verbose: 0 : [9584] 00000360 : 61 72 64 73 2E 6F 72 67-2F 77 65 62 73 65 72 76 : ards.org/webserv
System.Net Verbose: 0 : [9584] 00000370 : 69 63 65 73 2F 32 30 30-35 2F 31 30 2F 74 72 61 : ices/2005/10/tra
System.Net Verbose: 0 : [9584] 00000380 : 6E 73 70 6F 72 74 22 3E-3C 70 61 79 6C 6F 61 64 : nsport"><payload
System.Net Verbose: 0 : [9584] 00000390 : 3E 3C 63 6F 6E 74 65 6E-74 20 69 64 3D 22 43 6F : ><content id="Co
System.Net Verbose: 0 : [9584] 000003A0 : 6E 74 65 6E 74 30 22 3E-3C 73 3A 47 65 74 56 65 : ntent0"><s:GetVe
System.Net Verbose: 0 : [9584] 000003B0 : 68 69 63 6C 65 53 65 72-76 69 63 65 48 69 73 74 : hicleServiceHist
System.Net Verbose: 0 : [9584] 000003C0 : 6F 72 79 20 6C 61 6E 67-3D 22 66 72 2D 46 52 22 : ory lang="fr-FR"
System.Net Verbose: 0 : [9584] 000003D0 : 20 78 6D 6C 6E 73 3A 67-77 6D 3D 22 68 74 74 70 :  xmlns:gwm="http
System.Net Verbose: 0 : [9584] 000003E0 : 3A 2F 2F 77 77 77 2E 67-6D 2E 63 6F 6D 2F 32 30 : ://www.gm.com/20
System.Net Verbose: 0 : [9584] 000003F0 : 30 36 2F 47 57 4D 22 20-78 6D 6C 6E 73 3A 73 3D : 06/GWM" xmlns:s=
System.Net Verbose: 0 : [9584] Exiting ConnectStream#63716305::Write() 
System.Net Verbose: 0 : [9584] ConnectStream#63716305::Close()
System.Net Verbose: 0 : [9584] Exiting ConnectStream#63716305::Close() 
System.Net Verbose: 0 : [9584] HttpWebRequest#60504916::GetResponse()
System.Net Information: 0 : [9584] Connection#60180891 - Received status line: Version=1.1, StatusCode=500, StatusDescription=Forbidden.
System.Net Information: 0 : [9584] Connection#60180891 - Received headers
{
Connection: close
Content-Length: 480
Content-Type: text/xml; charset=utf-8
Date: Tue, 03 Jul 2012 18:20:36 GMT
Server: ACE XML Gateway
}.
System.Net Information: 0 : [9584] ConnectStream#63194865::ConnectStream(Buffered 480 bytes.)
System.Net Information: 0 : [9584] Associating HttpWebRequest#60504916 with ConnectStream#63194865
System.Net Information: 0 : [9584] Associating HttpWebRequest#60504916 with HttpWebResponse#25196644
System.Net Verbose: 0 : [9584] ConnectStream#63194865::Read()
System.Net Verbose: 0 : [9584] Data from ConnectStream#63194865::Read
System.Net Verbose: 0 : [9584] 00000000 : 3C 3F 78 6D 6C 20 76 65-72 73 69 6F 6E 3D 22 31 : <?xml version="1
System.Net Verbose: 0 : [9584] 00000010 : 2E 30 22 20 65 6E 63 6F-64 69 6E 67 3D 22 55 54 : .0" encoding="UT
System.Net Verbose: 0 : [9584] 00000020 : 46 2D 38 22 3F 3E 0A 3C-73 6F 61 70 3A 45 6E 76 : F-8"?>.<soap:Env
System.Net Verbose: 0 : [9584] 00000030 : 65 6C 6F 70 65 20 78 6D-6C 6E 73 3A 73 6F 61 70 : elope xmlns:soap
System.Net Verbose: 0 : [9584] 00000040 : 3D 22 68 74 74 70 3A 2F-2F 73 63 68 65 6D 61 73 : ="http://schemas
System.Net Verbose: 0 : [9584] 00000050 : 2E 78 6D 6C 73 6F 61 70-2E 6F 72 67 2F 73 6F 61 : .xmlsoap.org/soa
System.Net Verbose: 0 : [9584] 00000060 : 70 2F 65 6E 76 65 6C 6F-70 65 2F 22 3E 3C 73 6F : p/envelope/"><so
System.Net Verbose: 0 : [9584] 00000070 : 61 70 3A 42 6F 64 79 3E-3C 73 6F 61 70 3A 46 61 : ap:Body><soap:Fa
System.Net Verbose: 0 : [9584] 00000080 : 75 6C 74 3E 3C 73 6F 61-70 3A 66 61 75 6C 74 63 : ult><soap:faultc
System.Net Verbose: 0 : [9584] 00000090 : 6F 64 65 3E 73 6F 61 70-3A 43 6C 69 65 6E 74 3C : ode>soap:Client<
System.Net Verbose: 0 : [9584] 000000A0 : 2F 73 6F 61 70 3A 66 61-75 6C 74 63 6F 64 65 3E : /soap:faultcode>
System.Net Verbose: 0 : [9584] 000000B0 : 3C 73 6F 61 70 3A 66 61-75 6C 74 73 74 72 69 6E : <soap:faultstrin
System.Net Verbose: 0 : [9584] 000000C0 : 67 3E 46 6F 72 62 69 64-64 65 6E 3C 2F 73 6F 61 : g>Forbidden</soa
System.Net Verbose: 0 : [9584] 000000D0 : 70 3A 66 61 75 6C 74 73-74 72 69 6E 67 3E 3C 73 : p:faultstring><s
System.Net Verbose: 0 : [9584] 000000E0 : 6F 61 70 3A 66 61 75 6C-74 61 63 74 6F 72 3E 69 : oap:faultactor>i
System.Net Verbose: 0 : [9584] 000000F0 : 6E 74 65 72 6E 61 6C 2D-66 69 72 65 77 61 6C 6C : nternal-firewall
System.Net Verbose: 0 : [9584] 00000100 : 3C 2F 73 6F 61 70 3A 66-61 75 6C 74 61 63 74 6F : </soap:faultacto
System.Net Verbose: 0 : [9584] 00000110 : 72 3E 3C 73 6F 61 70 3A-64 65 74 61 69 6C 20 78 : r><soap:detail x
System.Net Verbose: 0 : [9584] 00000120 : 6D 6C 6E 73 3A 64 65 74-3D 22 68 74 74 70 3A 2F : mlns:det="http:/
System.Net Verbose: 0 : [9584] 00000130 : 2F 72 65 61 63 74 69 76-69 74 79 2E 63 6F 6D 2F : /reactivity.com/
System.Net Verbose: 0 : [9584] 00000140 : 22 3E 3C 64 65 74 3A 64-65 74 61 69 6C 6D 65 73 : "><det:detailmes
System.Net Verbose: 0 : [9584] 00000150 : 73 61 67 65 3E 7B 31 30-30 7D 20 46 6F 72 62 69 : sage>{100} Forbi
System.Net Verbose: 0 : [9584] 00000160 : 64 64 65 6E 2E 20 20 59-6F 75 20 61 72 65 20 6E : dden.  You are n
System.Net Verbose: 0 : [9584] 00000170 : 6F 74 20 61 6C 6C 6F 77-65 64 20 74 6F 20 61 63 : ot allowed to ac
System.Net Verbose: 0 : [9584] 00000180 : 63 65 73 73 20 74 68 61-74 20 72 65 73 6F 75 72 : cess that resour
System.Net Verbose: 0 : [9584] 00000190 : 63 65 2E 0A 3C 2F 64 65-74 3A 64 65 74 61 69 6C : ce..</det:detail
System.Net Verbose: 0 : [9584] 000001A0 : 6D 65 73 73 61 67 65 3E-3C 2F 73 6F 61 70 3A 64 : message></soap:d
System.Net Verbose: 0 : [9584] 000001B0 : 65 74 61 69 6C 3E 3C 2F-73 6F 61 70 3A 46 61 75 : etail></soap:Fau
System.Net Verbose: 0 : [9584] 000001C0 : 6C 74 3E 3C 2F 73 6F 61-70 3A 42 6F 64 79 3E 3C : lt></soap:Body><
System.Net Verbose: 0 : [9584] 000001D0 : 2F 73 6F 61 70 3A 45 6E-76 65 6C 6F 70 65 3E 0A : /soap:Envelope>.
System.Net Verbose: 0 : [9584] Exiting ConnectStream#63194865::Read()   -> 480#480
System.Net Verbose: 0 : [9584] ConnectStream#63194865::Read()
System.Net Verbose: 0 : [9584] Exiting ConnectStream#63194865::Read()   -> 0#0
System.Net Error: 0 : [9584] Exception in the HttpWebRequest#60504916::GetResponse - The remote server returned an error: (500) Internal Server Error.
System.Net Verbose: 0 : [9584] HttpWebResponse#25196644::GetResponseStream()
System.Net Information: 0 : [9584] ContentLength=480
System.Net Verbose: 0 : [9584] Exiting HttpWebResponse#25196644::GetResponseStream()    -> SyncMemoryStream#20467555 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:51:04.217

我通过将私钥 PFX 正确链接到证书来解决问题。

您可以在我的行中看到问题， `Cannot find the certificate in either the LocalMachine store or the CurrentUser store.`尽管起初它是错误的。但是私钥没有正确链接到证书，也没有真正呈现给发件人。

为此，只需制作一个私钥 (.pfx) 并将其安装到您的计算机或服务器 (.cer) 上的指定证书中。可以清楚的看到证书是否绑定了私钥

这是一个图像示例：http: [//i.stack.imgur.com/pR6LO.png](http://i.stack.imgur.com/pR6LO.png)

# salesforce - 如何在 Salesforce 的 visualforce 自定义页面中添加用户对象控制器？

> ID：11329696
> 
> 赞同：0
> 
> 时间：2012-07-04T13:03:43.117
> 
> 标签：salesforce

我想从我的自定义页面添加用户对象是否可以在 salesforce 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:29:54.943

您可以将用户设置为标准控制器。

我不太确定您要达到的目标。

# mpi - Glut + MPI_Send，实际上没有阻塞

> ID：11329700
> 
> 赞同：-1
> 
> 时间：2012-07-04T13:03:53.110
> 
> 标签：mpi, glut, blocking

我正在尝试使用 MPI（MPMD 通信）通信两个不同的进程。其中一个使用 GLUT 来渲染基于另一个进程发送的数据生成的一些数据。

我的问题是，在初始化阶段，“消费者”（使用 GLUT）将某些配置数据发送给“生产者”，但 MPI_Send 调用似乎没有阻塞。例如，我从消费者向生产者发送了 4 条不同的消息，每条消息都有不同的标签。它似乎工作正常。然后我注释第一个 MPI_Send，而不更改其他进程的代码（这意味着它们中的任何一个都不应分别超过第一个 MPI_Send 和 MPI_Recv）。问题是发送者发送了所有三个消息，并且似乎每个 MPI_Send 返回 MPI_SUCCESS，因为我在每个 MPI_Send 打印消息对应于正确进化之后所做的测试。同时，接收器没有进展。

我试图在没有 GLUT 的情况下在更简单的应用程序中重现这种行为，并且它们奏效了。但与此同时，我认为 GLUT 没有理由导致这个问题。你有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:25:29.840

我刚刚发现 MPI_Send 不保证阻塞，如[1](http://www.mcs.anl.gov/research/projects/mpi/sendmode.html)所述，因此为了获得所需的行为，我应该改用 MPI_Ssend。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:22:09.243

您误读了阻塞 MPI 发送模式的语义。这里的阻塞意味着操作阻塞，直到消息数据及其信封被安全地存储起来并且数据缓冲区可以自由修改。相反，*非阻塞*操作 ( `MPI_I...`) 立即返回控制，但要求您在操作仍在进行时不要修改数据缓冲区。

`MPI_Send`是标准的阻塞发送操作。它可以实现为*同步*阻塞发送（`MPI_Ssend`），它在接收操作开始之前不返回，或者实现为内部*缓冲*阻塞发送（类似于`MPI_Bsend`），它将消息数据复制到一个小的内部缓冲区并返回控制权。标准没有定义标准发送是如何实现的。大多数实现缓冲几个短消息。

# android - 目录列表多项选择列表

> ID：11329703
> 
> 赞同：0
> 
> 时间：2012-07-04T13:04:05.810
> 
> 标签：android

我创建了一个活动，它将显示我手机中所有目录的多项选择列表。到目前为止，我只设法显示只有父文件夹的列表。我希望当用户单击某个项目（而不是复选框）时，它应该展开以显示其子文件夹（也是多项选择列表）。这是我到目前为止所做的。

```
Parent1
Parent2
Parent3
Parent4 
```

我想如果用户选择 Parent1，那么它会扩展为子文件夹：

```
Parent1
- Sub-Folder1
- Sub-Folder2
Parent2
Parent3
Parent4 
```

以下是我到目前为止的代码：

```
public class DirectoryListing extends Activity {

    ListView dirlv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.directorylisting);
        try {
            ArrayList<String> dirList = new ArrayList<String>(); 
            dirList = getAllDirList();
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_multiple_choice, android.R.id.text1,
                    dirList);
            dirlv = (ListView) findViewById(R.id.lvDirList);
            dirlv.setAdapter(adapter);
            dirlv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        } catch (Exception e) {
            Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT);
        }

    }

    private ArrayList<String> getAllDirList() {
        ArrayList<String> result = new ArrayList<String>();
        File home = new File("/");
        File[] files = home.listFiles();
        for (File file : files) {
            if (file.isDirectory()) {
                result.add(file.getName());
            }
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:06:31.433

而不是简单的 ListView 使用[Expandable Listview](http://www.google.co.in/search?q=android+expandable+listview+example&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl=en&client=firefox-a&hs=aTQ&rls=org.mozilla:en-US:official&sa=X&ei=gz_0T4nAMsLorQeFv_zWBg&ved=0CDgQBSgA&q=android+expandablelistview+example&spell=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=df4f14c76f997e44&biw=1366&bih=664)。

通过此链接[http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html](http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html)

和这个 SO 问题[Android ExpandableListView - 寻找教程](https://stackoverflow.com/questions/9824074/android-expandablelistview-looking-for-a-tutorial)

# c# - 记录电话

> ID：11329704
> 
> 赞同：0
> 
> 时间：2012-07-04T13:04:28.460
> 
> 标签：c#, windows-phone-7

我正在从事 Windows Phone 7 的开发，目前我正在大学学习。因此，作为一个课程项目，我正在研究一个适用于电话的项目。为了决定这个项目是否可以实施，我有几个问题要考虑。

首先，是否可以让我的应用程序记录对话（即电话）？其次，是否可以在有人来电时自动启动录音应用程序，还是我必须手动启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:14:22.597

首先，您必须手动启动它，其次，出于多种原因，我高度怀疑这是可能的：例如，您的手机好友的隐私或防止病毒访问。

因此，我会说无法记录来电；拨出电话可能有可能，因为您可以通过您的应用程序拨打电话。

好吧，您可以运行麦克风并记录所有内容，但是：（a）这仅在通过扬声器讲话时才有效，并且（b）质量会如此糟糕，我认为您不会高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:38:41.667

在 Windows Phone 7 上，您无法录制电话，也无法将声音文件回放给呼叫者。

问候，保罗

# sqlalchemy - 如何代替“query.add_column”向实体添加字段？

> ID：11329705
> 
> 赞同：3
> 
> 时间：2012-07-04T13:04:32.193
> 
> 标签：sqlalchemy

我有一些 sqlalchemy 查询：

```
>>> items = (
    Company.query
    .add_column(Address.city)
    .join(Company.address)
    .filter(and_(
        ...some filters...
    ))
    .all()
)
>>> items
[(Company(6239), Berlin), (Company(5388), Moscow), ...] 
```

如何修改我的查询，将 Address.city 放入实体公司？我希望它看起来像：

```
...
>>> items
[Company(6239), Company(5388), ...]
>>> items[0].city
Berlin 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:17:39.240

我认为您不能在不修改模型的情况下直接在查询中执行此操作。
但是您可以在代码中轻松实现这一点：

```
>>> items
[(Company(6239), Berlin), (Company(5388), Moscow), ...]

>>> # set company
>>> for (_company, _city) in items:
        _company.city = _city
>>> # remove city attribute
>>>> items = [_company for (_company, _city) in items]

>>> items
[Company(6239), Company(5388), ...]
>>> items[0].city
Berlin 
```

# ruby-on-rails - 嵌入式字段上的 Mongo / Rails Mongoid 索引

> ID：11329711
> 
> 赞同：2
> 
> 时间：2012-07-04T13:05:13.017
> 
> 标签：ruby-on-rails, mongodb, mongoid

我遇到了一些非常简单的错误，并且不确定我做错了什么。对 Mongo 来说相当新

将 Rails 3.2.6 与 MongoDB 和 Mongoid 一起使用。尝试向嵌入字段添加索引。

我有一个模型“方案”，其中嵌入了“推荐人”。“Referal”有一个字段“to_code”（字符串）。我想索引这个字段。

```
class Scheme
  include Mongoid::Document
  include Mongoid::Timestamps
  embeds_many :referals
  index "referals.to_code" => 1

class Referal
  include Mongoid::Document
  include Mongoid::Timestamps
  embedded_in :scheme 
```

当我运行 'rake db:mongoid:create_indexes' 失败并出现以下错误：

```
 Not a Mongoid parent model: app/models/referal.rb
 rake aborted!
 Invalid index specification {"referals.to_code"=>1}; should be either a string, symbol, or an array of arrays. 
```

据我所知，这完全遵循 Mongoid 文档，所以不确定我做错了什么。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:59:09.347

我认为您正在使用带有 gem 版本 2 的 mongoid 3 语法。

错误消息表明预期使用 mongoid 2 索引语法：http: [//two.mongoid.org/docs/indexing.html](http://two.mongoid.org/docs/indexing.html)

您正在尝试使用 mongoid 3 索引语法：[http ://mongoid.org/en/mongoid/docs/indexing.html](http://mongoid.org/en/mongoid/docs/indexing.html)

检查您正在使用的 gem 的版本并相应地调整您的语法。

# c# - 获取应用路径

> ID：11329713
> 
> 赞同：2
> 
> 时间：2012-07-04T13:05:18.420
> 
> 标签：c#, wpf

我正在尝试将我的项目路径放在根目录下。我一直无法这样做，我尝试过：

```
System.AppDomain.CurrentDomain.BaseDirectory; 
```

但这很深，我如何才能获得项目根目录的路径？

我将 C# 与 .NET 框架 4.0 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:13:26.677

```
 Assembly.GetExecutingAssembly().Location. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T13:15:10.200

尝试

```
Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:32:15.343

你可以试试下面的：

```
String assemblyFileName = typeof(Class1).Assembly.CodeBase.Replace("file:///", "");
FileInfo assemblyInfo = new FileInfo(assemblyFileName);
Console.WriteLine(assemblyInfo.Directory); 
```

注意：Class1 是您正在执行的库中的一个类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T13:15:29.570

从[环境](http://msdn.microsoft.com/en-us/library/system.environment.aspx)中，您至少可以获得命令行

# php - 如何编码 json.stringified 输出

> ID：11329714
> 
> 赞同：1
> 
> 时间：2012-07-04T13:05:20.647
> 
> 标签：php, jquery

我有一个使用 onclick 事件附加表单元素的表单。

然后将表单元素及其值和标签保存在一个数组中。

```
function save_form() {
    var x = document.getElementById("formBuilder");
    var elements_data = new Array;
    for (var i = 0; i < x.length; i++) {
        if (x.elements[i].type == 'checkbox' || x.elements[i].type == 'radio') {
            var all_ele_value = [];
            var ele_id = x.elements[i].id;
            $("input:" + x.elements[i].type + "[name=" + ele_id + "[]]").each(function () {
                all_ele_value.push($(this).val());
            });
            var end_value = all_ele_value.join(";");
        }
        else if (x.elements[i].type == 'select-one') {
            var ele_id = x.elements[i].id;
            var end_value = $("#" + ele_id + " option").map(function (i, n) {
                return n.value;
            }).get().join(";");
        }
        else {
            var end_value = x.elements[i].value;
        }
    }
    var form_data = JSON.stringify(elements_data);
    $.post(software_url + 'form_manager/save_form', {
        'form_data': form_data
    }, function (data) {
        alert(data);
    });
} 
```

现在我想在我的 php 文件中编码 form_data 。我想知道一种方法，因为 json_decode 不起作用。我正在以 json 格式获取所有输出。但我想遍历它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:21:26.180

我强烈推荐两件事给你。

一个是学习[jQuery.serialize，](http://api.jquery.com/serialize/)它完成了将所有元素放在一个字符串中的繁重工作。

继续前进， json_decode 确实有效，除非 JSON 字符串无效，否则检查您收到的内容并在[JSONLint](http://jsonlint.com/)上测试您的 JSON 语法- 看看它是否正确。

在php中，你必须使用json_decode，然后你才能通过它。

```
<?php
$array = json_decode($json_string);
foreach ($array as $key => $value) {
     echo "key: ". $key ." => ". $value;
}
?> 
```

# iphone - 仅在 iOS 应用程序中捆绑视网膜图像

> ID：11329718
> 
> 赞同：9
> 
> 时间：2012-07-04T13:05:43.967
> 
> 标签：iphone, ios

我们可以仅将视网膜图像用于 iOS 应用程序吗？应用程序是否可以在没有非视网膜图像的 3GS 设备上运行。

请帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T13:32:11.977

iOS 应用程序需要的唯一非视网膜图像是图标和默认图像。

对于所有应用内图像，只捆绑视网膜版本并让非视网膜设备缩小它们是可以的。我自己做过几次，以低于 App Store 上的蜂窝网络下载限制，我从未因此而被拒绝。

当然，由于需要缩减操作，不提供非视网膜图像可能会降低旧设备的性能和图像质量，但如果您确实需要减小应用程序大小，这可能会很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T05:38:49.773

是的，您可以使用较大的图像，但是如果屏幕上的图像数量太大，这可能会导致性能下降。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T05:40:16.473

iPhone 4/4S 使用的图像尺寸是 iPhone 3GS 的 2 倍。如果您只提供视网膜图像，那么图像的大小将是 iPhone 3GS 上的两倍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T13:08:47.310

不，您不能，例如，非 Retina 中需要图标，而 App Store 也需要 Retina-Screenshots。

如果没有可用的非 Retina，您可以测试 Retina-Images 是否会自动调整大小，但我不能说您的应用程序是否会被拒绝。

* * *

**更新：**正如 Retterdesdialogs 提到的，Retina-Images 将被调整为非 Retina，但不建议这样做，我强烈建议不要这样做！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T04:32:47.473

您必须为 iphone 3 和 iphone 4 保留单独的图像，如果应用程序在 iphone 4 中，您可以使用两倍于 iphone 3 图像分辨率的图像。

# visual-studio-2010 - 使用 nmake 为 VS2010 构建 Qt 返回链接错误

> ID：11329719
> 
> 赞同：2
> 
> 时间：2012-07-04T13:05:48.433
> 
> 标签：visual-studio-2010, qt, nmake

我正在尝试为 Visual Studio 2010 构建 Qt，并且我正在按照本文接受的答案中的说明进行[操作](https://stackoverflow.com/questions/5601950/how-to-build-qt-for-visual-studio-2010)

我正在使用修改后的配置命令：

```
configure.exe -release -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-qt3support -no-multimedia -qt-libpng -qt-zlib -qt-libmng -qt-libtiff -qt-libjpeg 
```

哪个工作正常，但是当我启动 nmake 时，它​​最终失败并返回此错误：

```
itemviews\qabstractitemview.cpp(2311) : error C2039: 'Key_BackSpace' : is not a member of 'Qt'
itemviews\qabstractitemview.cpp(2311) : error C2065: 'Key_BackSpace' : undeclared identifier
itemviews\qabstractitemview.cpp(2311) : error C2051: case expression not constant

...

Generating Code...
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\cl.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\nmake.exe"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop. 
```

我使用的原始命令是前面提到的帖子中使用的命令，但我添加了这些：

```
-qt-libpng -qt-zlib -qt-libmng -qt-libtiff -qt-libjpeg 
```

并删除了这个：

```
-no-ltcg 
```

使其正常工作，但 nmake 仍然无法正常工作。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:45:51.323

或者你可以尝试从另一个角度来看待这个错误，比如错字或其他东西。实际上，这个问题*是*一种拼写错误。尝试将原始文件修改`Qt::Key_BackSpace`为`Qt::Key_Backspace`，然后`nmake`再次修改。我遇到了您在此处发布的问题，并且**确实使用了*注释掉的*方式**。直到我偶尔看看屏幕下方的键盘......，是的，它是*Backspace*而不是*BackSpace*！

此外，更具体地说，您可以在以下版本中签出相同源文件中的片段，例如：

Qt 4.7.4：%QTDIR%/src/gui/itemviews/qabstractitemview.cpp(2321)：`Qt::Key_Backspace`

Qt 4.8.1：%QTDIR%/src/gui/itemviews/qabstractitemview.cpp(2337)：`Qt::Key_Backspace`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:19:11.260

绝对是事后的事，但我能够通过在 QT 4.6.4 的第 2311 行注释掉 qabstractitemview.cpp 中的 Qt::Key_BackSpace 案例来解决这个问题。我猜关键定义在补丁或同样愚蠢的东西中被改变了。您可以在 /%My QT Directory%/src/gui/itemviews/qabstractitemview.cpp 中找到该文件。希望这可以帮助！

# regex - 正则表达式严格匹配 html 注释字符串

> ID：11329720
> 
> 赞同：0
> 
> 时间：2012-07-04T13:05:54.037
> 
> 标签：regex, comments, strip

我正在尝试使用正则表达式从 .html 文件中删除所有 html 注释。我们知道html评论格式是`<!-- some comments -->` 我创建了这样的正则表达式

`/<!--.*-->/gs`

它可以工作，但如果文件中有多个注释块，它不会将任何一个块剥离到另一个块，而是从第一个`<!--`到最后一个`-->` Fe

```
some html tags
<!-- some comments 1 -->
some html tags 2
<!-- some comments 2--> 
```

它剥离整个

```
<!-- some comments 1 -->
some html tags 2
<!-- some comments 2--> 
```

我是 ActionScript 语言的代码。任何意见将是有益的。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T13:08:40.097

使用这个正则表达式`/<!--.*?-->/gs`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T13:22:09.937

使用问号使星号变得懒惰：

```
/<!--.*?-->/gs 
```

# python - 错误：python 中的文件 i/o

> ID：11329722
> 
> 赞同：0
> 
> 时间：2012-07-04T13:05:54.750
> 
> 标签：python, django, linux, file, ubuntu-10.04

我的views.py文件代码：

```
#!/usr/bin/python 

from django.template import loader, RequestContext
from django.http import HttpResponse
#from skey import find_root_tags, count, sorting_list
from search.models import Keywords
from django.shortcuts import render_to_response as rr

def front_page(request):

    if request.method == 'POST' :
        from skey import find_root_tags, count, sorting_list
        str1 = request.POST['word'] 
        fo = open("/home/pooja/Desktop/xml.txt","r")

        for i in range(count.__len__()):

            file = fo.readline()
            file = file.rstrip('\n')
            find_root_tags(file,str1,i) 

            list.append((file,count[i]))

        sorting_list(list)

        for name, count1 in list:
            s = Keywords(file_name=name,frequency_count=count1)
            s.save()

        fo.close()

        list1 = Keywords.objects.all()
        t = loader.get_template('search/results.html')
        c = RequestContext({'list1':list1,
        })

        return HttpResponse(t.render(c))

    else :  
        str1 = ''
        list = []
        template = loader.get_template('search/front_page.html')
        c = RequestContext(request)
        response = template.render(c)
        return HttpResponse(response) 
```

我在函数中发送的变量“文件”`find_root_tags(file,str1,i)`有一个 xml 文件的名称。该文件存在于我的桌面上，并且此代码编写在我的 django 应用程序的 views.py 文件中，因此无法打开该文件。我如何打开该文件，因为 xml.txt 包含要读取然后打开的相似文件名。简而言之，我怎样才能将文件参数发送为：

```
file1 = '/home/pooja/Desktop/<filename>' 
```

这里`<filename>`等于存储在变量中的值，`file`并且最终可以将其称为：

```
find_root_tags(file1, str1, i) 
```

///////////////////////////////////////// ///////////////////////////////////

澄清：

1）请参考变量“文件”，您可以在其中看到我正在存储xml.txt的读取内容。

2)xml.txt 包含 xml 文件名。views.py 文件是 django 应用程序的一部分，由于它们存在于桌面上，因此无法打开这些文件。

3）我的问题是如何修改和发送包含文件名的文件变量附加它的绝对路径，即：

```
'/home/pooja/Desktop/filename' 
```

通过这样做，它将打开桌面上存在的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:20:33.523

**尝试这个：**

```
pathh='/home/pooja/Desktop/'      #set the base path       
fo = open("/home/pooja/Desktop/xml.txt")
for i in range(len(count)):     #use len(count)
    file = fo.readline()
    file = file.strip()          #use strip()
    find_root_tags(pathh+file,str1,i) #base path+file
    mylist.append((file,count[i]))   #using 'list' as a variable name is not good 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:14:43.383

因此，如果我理解您的问题，该文件`/home/pooja/Desktop/xml.txt`包含文件名，每行一个，相对于`/home/pooja/Desktop/`，您需要将完整路径名传递给`find_root_tags`.

在 Python 中，您可以使用`+`来连接字符串，因此您可以执行以下操作：

```
files_path = "/home/pooja/Desktop/"

for i in range(len(count)):

    file = fo.readline()
    file = file.rstrip('\n')
    find_root_tags(files_path + file, str1, i) 

    list.append((file,count[i])) 
```

### 旁白

首先，请注意我已将您的替换`count.__len__`为`len(count)`. 在 Python 中，魔术方法，即形式`__xxxx__`的方法不被直接调用。它们被定义为由其他机制调用。对于[**len**](http://docs.python.org/reference/datamodel.html#object.__len__)方法，在使用内置时会在内部调用`len()`。

其次，请注意，如果您的行`xml.txt`数少于`len(count)`，那么`fo.readline`一旦您阅读了文件的所有行，就会引发异常。在 Python 中读取文件所有行的常用方法是：

```
my_file = open("/path/to/file", 'r')
for line in my_file:
    # do something with your line 
```

最后，为了确保无论发生什么都关闭您的文件，即即使在您读取文件时引发异常，您也可以使用[with 语句](http://docs.python.org/library/stdtypes.html#file.close)。

因此，在您的示例中，您将执行以下操作：

```
files_path = "/home/pooja/Desktop/"
with open("/path/to/file", 'r') as my_file:
    for file in my_file:
        file = file.rstrip('\n')
        find_root_tags(files_path + file, str1, i) 

        list.append((file,count[i])) 
```

# c++ - output objdump -t 的输出中的“.hidden”是什么意思？

> ID：11329734
> 
> 赞同：12
> 
> 时间：2012-07-04T13:06:34.753
> 
> 标签：c++, c, objdump

例子：

```
$ objdump Logger.cpp.o  -t

00000000 g     F .text  00000000 .hidden __sti___10_Logger_cpp_0b2ae32b 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:16:23.027

这意味着符号的可见性被隐藏：[https ://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/CppRuntimeEnv/Articles/SymbolVisibility.html](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/CppRuntimeEnv/Articles/SymbolVisibility.html)

更改符号可见性的原因包括：

*   符号碰撞的风险较小。
*   较小的二进制文件。
*   减少了启动时间，因为动态链接器不需要处理尽可能多的符号。
*   因为编译器知道不能通过 LD_PRELOAD 类型系统覆盖符号，所以有机会获得更高效的代码。
*   防止第三方软件调用未记录的 API。

有关详细信息，请参阅[http://www.gnu.org/software/gnulib/manual/html_node/Exported-Symbols-of-Shared-Libraries.html](http://www.gnu.org/software/gnulib/manual/html_node/Exported-Symbols-of-Shared-Libraries.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:32:20.950

解释[可见性支持](http://gcc.gnu.org/wiki/Visibility)的链接（用于 gcc）

从链接：

*   它极大地改善了 DSO（动态共享对象）的加载时间。例如，一个经过测试的基于 C++ 模板的大型库（TnFOX Boost.Python 绑定库）现在可以在 8 秒内加载，而不是超过 6 分钟！

*   它让优化器生成更好的代码。可以完全避免 PLT 间接（当必须通过全局偏移表查找函数调用或变量访问时，例如在 PIC 代码中），从而大大避免了现代处理器上的流水线停顿，从而加快了代码速度。此外，当大多数符号在本地绑定时，它们可以在整个 DSO 中完全安全地省略（删除）。这给了更大的自由度，特别是对于不再需要在“以防万一”周围保持入口点的内联。

*   它将 DSO 的大小减少 5-20%。ELF 的导出符号表格式非常占用空间，给出完整的错位符号名称，在大量模板使用的情况下，平均大约 1000 字节。C++ 模板会产生大量符号，一个典型的 C++ 库可以轻松超过 30,000 个符号，大约 5-6Mb！因此，如果您去掉 60-80% 的不必要符号，您的 DSO 可以小几兆！

*   符号冲突的可能性要低得多。两个库内部使用相同符号表示不同事物的旧问题终于在这个补丁中消失了。哈利路亚！

尽管上面引用的库是一个极端情况，但新的可见性支持将导出的符号表从 > 200,000 个符号减少到不到 18,000 个。二进制大小也减少了一些 21Mb！

A [usage sample and also potential pitfall](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/topic/com.ibm.ztpf-ztpfdf.doc_put.cur/gtpl2/export.html#l2export__l2viscplus) when using visibilty attribute

# .net - 如何在 ASP 下使文本居中。NET MVC3 网格单元？

> ID：11329741
> 
> 赞同：0
> 
> 时间：2012-07-04T13:07:17.183
> 
> 标签：.net, asp.net-mvc-3

有没有办法让单元格中的文本居中？

```
 grid.Column("TotalSum", "Total Sum", format: (item) => item.TotalSum.ToString("#,0.00")) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:16:02.940

我发现！

```
 grid.Column("TotalSum", "Total Sum", format: (item) => item.TotalSum.ToString("#,0.00"),style: "CenteredNumbers") 
```

并添加到 CSS

```
.CenteredNumbers
{
    text-align:center;    
} 
```

# python - 基于其他预处理列在postgres中获取数据

> ID：11329742
> 
> 赞同：0
> 
> 时间：2012-07-04T13:07:21.310
> 
> 标签：python, sql, postgresql

在我的数据库表（whitelist_domain_data）中，我有字段 id、url、data

Url 列有多个 url，例如

```
http://www.dailystrength.org/c/Hidradenitis_​​Suppurativa/forum/8870995-solodyn-135-mg-works
http://au.answers.yahoo.com/question/index?qid=20090325215905AA6UVOa
http://navaspot.wordpress.com                                                              
```

我想获取具有相同域的行。

表：Whitelist_domain_data

架构：id、url、数据

```
select regexp_matches(url,'http\:\/\/([a-z0-9\.]+)\.org')  as domain,
       count(*) 
from whitelist_domain_data 
group by domain; 
```

应该返回：

```
dailystrength.org   200 
```

**问题**：如何设计查询以获取所有 urls 数据，如果 url 具有域“dailystrength.org”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:35:30.270

您可以使用 substring() 执行此操作，并且您可能还想使用表达式索引。这是一个例子（我调整了正则表达式以匹配我认为你想要的）：

```
CREATE TABLE whitelist_domain_data(
  id SERIAL PRIMARY KEY,
  url TEXT NOT NULL
);

CREATE INDEX domain_index
  ON whitelist_domain_data (substring(url from 'https?\:\/\/([a-z0-9\.]+)'));

INSERT into whitelist_domain_data (url) VALUES
  ('http://www.dailystrength.org/c/Hidradenitis_Suppurativa/forum/8870995-solodyn-135-mg-works'),
  ('http://au.answers.yahoo.com/question/index?qid=20090325215905AA6UVOa'),
  ('http://navaspot.wordpress.com');

SELECT * FROM whitelist_domain_data WHERE substring(url from 'https?\:\/\/([a-z0-9\.]+)') = 'www.dailystrength.org'; 
```

现在这个查询可以使用索引了。如果这是您计划经常使用的东西，您可以考虑为它创建一个特定的函数：

```
CREATE FUNCTION get_domain(text) RETURNS text
LANGUAGE SQL
AS $$
  SELECT substring($1 from 'https?\:\/\/([a-z0-9\.]+)');
$$; 
```

那么上面就变成了：

```
CREATE INDEX domain_index
  ON whitelist_domain_data (get_domain(url));

SELECT * FROM whitelist_domain_data WHERE get_domain(url) = 'www.dailystrength.org'; 
```

因此，如果您想更改域是什么（忽略子域或其他），您只需更改函数，您的查询仍然有效。不过，我认为您必须在那时重新编制索引。

我检查了这一切都适用于 Postgres 9.1，但它应该与任何最新版本兼容。表达式索引和 substring() 都可以追溯到 7.x 天。

# spring-mvc - 使用所有 @Controller 的用户信息自动填充模型

> ID：11329743
> 
> 赞同：0
> 
> 时间：2012-07-04T13:07:24.950
> 
> 标签：spring-mvc, spring-security, openid, spring-roo

我有一个独特的问题，我正在尝试使用我最近添加了 OpenID 支持的 Spring Roo 构建的站点来解决。我[在 Spring Forums 上发布了一些内容](http://forum.springsource.org/showthread.php?127999-Output-UserDetails-properties-in-JSPX-with-support-for-form-and-OpenID-login)，并尽我所能描述了这个问题，但到目前为止我还没有得到任何帮助。

这是概要，尽我所能描述。我正在处理的站点有一个简单的表单登录，使用 Spring Security 和 JDBCUserDetailsS​​ervice。我们还希望用户能够通过受支持的 OpenID 登录，因此使用[Spring Security 示例来实现带自动注册的 OpenID](http://git.springsource.org/~ltaylor/spring-security/lukes-spring-security/blobs/ee1fd1bc50a7232617a4668c4fcd450958cab437/samples/openid/src/main/java/org/springframework/security/samples/openid/CustomUserDetailsService.java) ，我们修改了站点代码以允许简单表单和 OpenID 登录。UserDetails 仍然来自数据库，唯一的区别是 OpenID 用户 ID 是从 OpenID 提供者传回的完整身份验证 url 字符串。

我遇到的问题出在我们的标头代码中。我们有一些简单的 JSPX 代码，它们执行以下操作：

```
 <c:choose>
    <c:when test="${pageContext['request'].userPrincipal == null}">
      <span>
        <form method="post" action="${login}" name="login_form" id="login_form">
          <input name="j_username" type="text" id="j_username" />
          <input name="j_password" type="password" id="j_password" />
          <input name="submit" type="submit" id="proceed" />
        </form>
      </span>
      <span>or <a href="${registration_form}">Register</a></span>
    </c:when>
    <c:otherwise>
      <span>Hello, <a href="${user_profile_base}${pageContext['request'].userPrincipal.name}"><img src="${user_img_url}" width='10' height='10' />${pageContext['request'].userPrincipal.name}</a></span> | <a href="${logout}">Logout</a>
    </c:otherwise>
  </c:choose> 
```

基本上，如果用户 Principal 不在页面上下文中（即用户未登录），则显示登录名，否则打印出带有用户名的漂亮“欢迎...”。此代码不需要控制器代码中的特殊规定即可运行：用户是否已登录。

现在问题出在 OpenID 用户上。用户名不再是用户定义的好字符串。相反，它是一个长 URL 字符串，其中可能包含或不包含用户可读的 ID 名称（例如，Google 有一些看起来像 GUID 的模糊字符串）。

我想过向存储在数据库中的用户对象添加一个“别名”字段（恰好是 UserDetails 的一个实例，fwiw），并允许用户自己设置它，但我不知道如何去做以“通用”方式从 JSPX 端获取数据。我知道外面有人正在尝试做类似的事情，但我无法找到任何可以显示他们如何接近它的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:17:25.933

问题是，无论出于何种原因，要求

```
${user_profile_base}${pageContext['request'].userPrincipal 
```

[正在返回org.springframework.security.openid.OpenIDAuthenticationToken](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/openid/OpenIDAuthenticationToken.html)的实例。在阅读 JavaDoc 时，我发现我可以先获取实际的 Principal 对象，然后调用我的 Alias getter，如下所示：

```
${user_profile_base}${pageContext['request'].userPrincipal.principal.alias 
```

这按预期工作。我可能需要做一些额外的检查以确保 Principal 和 alias 不为空，但至少它现在可以工作了。

# android - android.database.sqlite.SQLiteException: no such column: aa: , while compile: Select Name from stud Where Address=aa

> ID：11329746
> 
> 赞同：5
> 
> 时间：2012-07-04T13:07:47.750
> 
> 标签：android

我正在尝试从 android sqlite 数据库中检索数据，但它的例外是没有这样的列：

* * *

**Sqlite 选择查询是-：**

```
c=db.rawQuery("Select Name from stud Where Address="+a,null); 
```

* * *

**例外情况：-**

```
07-04 18:07:00.888: I/Database(648): sqlite returned: error code = 1, msg = no such column: aa
07-04 18:07:00.910: D/AndroidRuntime(648): Shutting down VM
07-04 18:07:00.910: W/dalvikvm(648): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-04 18:07:00.948: E/AndroidRuntime(648): FATAL EXCEPTION: main
07-04 18:07:00.948: E/AndroidRuntime(648): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.StudentInfoManagement/com.my.StudentInfoManagement.ListData}: android.database.sqlite.SQLiteException: no such column: aa: , while compiling: Select Name from stud Where Address=aa
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.os.Looper.loop(Looper.java:123)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-04 18:07:00.948: E/AndroidRuntime(648):  at java.lang.reflect.Method.invokeNative(Native Method)
07-04 18:07:00.948: E/AndroidRuntime(648):  at java.lang.reflect.Method.invoke(Method.java:507)
07-04 18:07:00.948: E/AndroidRuntime(648):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-04 18:07:00.948: E/AndroidRuntime(648):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-04 18:07:00.948: E/AndroidRuntime(648):  at dalvik.system.NativeStart.main(Native Method)
07-04 18:07:00.948: E/AndroidRuntime(648): Caused by: android.database.sqlite.SQLiteException: no such column: aa: , while compiling: Select Name from stud Where Address=aa
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
07-04 18:07:00.948: E/AndroidRuntime(648):  at com.my.StudentInfoManagement.DataHelper.show(DataHelper.java:86)
07-04 18:07:00.948: E/AndroidRuntime(648):  at com.my.StudentInfoManagement.ListData.onCreate(ListData.java:19)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-04 18:07:00.948: E/AndroidRuntime(648):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-04 18:07:00.948: E/AndroidRuntime(648):  ... 11 more
07-04 18:07:03.140: I/Process(648): Sending signal. PID: 648 SIG: 9 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T13:11:09.580

这仅仅是因为你的 sql 查询错误。查询文本时，您需要在查询字符串周围添加单引号。

您的行应为：

```
c=db.rawQuery("Select Name from stud Where Address='"+a+"'",null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T12:15:29.610

如果您正在使用，`string`那么您必须用单引号表示它，例如：

```
Cursor cursor = db.rawQuery("SELECT '"+WINNER+"' FROM '"+TABLE.trim()+"' WHERE 
       country1='"+c1.trim()+"' AND Country2='"+c2.trim()+"'", null); 
```

如果您代表一个`int`值，那么您可以像这样简单地使用： `+num+`

# php - 从我的网站中删除谷歌自定义搜索

> ID：11329747
> 
> 赞同：0
> 
> 时间：2012-07-04T13:07:51.013
> 
> 标签：php, javascript, search

我已从我的网站上删除了以下代码。

```
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script> 
```

但是，在 url 中出现了以下代码。

```
&Search1.x=0&Search1.y=0 
```

如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:10:43.433

你用`<input type="image" .../>`提交表格？将其更改为提交按钮或使用 javascript 提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:51:45.203

关掉`register_globals`

要关闭注册全局变量，您需要将 php.ini 文件中的设置更改为：

`register_globals = Off`（注意 Off 中的大写字母 O）

这将阻止[PHP 自动将 URL 中的任何值转换为变量](http://plus84ga.blogspot.com/2012/07/php-from-automatically-turning-any.html)。这是一件好事，因为这意味着黑客无法尝试将任何他们想要的内容插入到您的代码中，只需将其插入您的 URL 即可。编写良好的代码无论如何都应该验证变量，但这提供了额外的安全性，以防脚本无法正确验证变量或验证有问题。

# ios - iOS 中的方形集成

> ID：11329748
> 
> 赞同：4
> 
> 时间：2012-07-04T13:07:54.870
> 
> 标签：ios, api, sdk, square

我正在尝试查找一些技术文档、博客或示例代码，它们可以帮助我将 Squareup API 集成到 iOS 中。我已经用谷歌搜索了它，这对我没有多大帮助。我有 android github 代码供参考。

我还在 iOS 中发现了 squareup 的可行性，您可以查看此应用：http: [//itunes.apple.com/us/app/drchrono-emr/id363897223 ?mt=8](http://itunes.apple.com/us/app/drchrono-emr/id363897223?mt=8)

这个应用程序使用了 squareup，这意味着它可以集成到 iOS 中。

期待建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-19T23:59:01.017

截至 2014 年，看起来他们确实提供了一个 API：

[https://connect.squareup.com/](https://connect.squareup.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T13:22:43.653

Square does not offer an API. [[Source1]](https://help.squareup.com/customer/portal/articles/159619-can-i-process-payments-online-) [[Source2]](https://help.squareup.com/customer/portal/articles/357440-does-square-offer-an-api-)

Their [official Github account](https://github.com/square) does have a deprecated (as of April 2012) [android api](https://github.com/square/android-api) that will not work. I would advise looking elsewhere for in-app payment solutions.

Also keep in mind that in-app payments are a gray area in the iOS terms of service. If you are selling something in the app, it must be available for sale outside of the app as well. Selling items through the app only will have to use Apple's In-App Purchase framework so they get their 30% cut.

# android - 在为 Eclipse 更新 android sdk 和 adt 插件后，我的所有 android 项目都出现以下错误

> ID：11329751
> 
> 赞同：0
> 
> 时间：2012-07-04T13:08:03.143
> 
> 标签：android

以下是错误的屏幕截图。

![截屏。](../Images/037ac734c4556b1dbfa4226dc97ae048.png)

[点击](https://i.stack.imgur.com/3vWgT.png)查看完整尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:49:16.250

尝试将此添加到清单中。

```
<manifest>
      .....
      <uses-sdk android:minSdkVersion="lowest_sdk_supported" />
</manifest> 
```

它的警告之一是“应用程序未指定 API 级别要求。

# iphone - 我应该如何在 Objective-C 中解码 % 转义的日语字符串

> ID：11329752
> 
> 赞同：1
> 
> 时间：2012-07-04T13:08:08.990
> 
> 标签：iphone, objective-c, xml, escaping

我想解码 % 转义字符串，如下所示。

```
%E7%89%9B%E4%B9%B3%E3%81%8C%E7%BE%8E%E5 
```

通过 Web API，我得到了包含日文字符串的 xml 数据。这个应用程序通过 NSURLConnection 收到。所以数据是通过以下方法接收的。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSString *xml = [[NSString alloc] initWithData:receivedData encoding:encoding];
    NSData *xmlData = [[xml stringByReplacingPercentEscapesUsingEncoding:encoding]
                       dataUsingEncoding:encoding];
    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:xmlData];
    [parser setDelegate:self];
    [parser parse];
} 
```

但是，这个 xmlData 只有英文字母字符串，没有日文转义字符串。所以我无法从 xmlData 获取日语字符串数据。

无论如何，这个 xmlData 应该是

```
<?xml version="1.0" encoding="UTF-8" ?><ResultSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:yahoo:jp:jlp" xsi:schemaLocation="urn:yahoo:jp:jlp http://jlp.yahooapis.jp/MAService/V1/parseResponse.xsd"><ma_result><total_count>3</total_count><filtered_count>3</filtered_count><word_list><word><surface>夏&lt;/surface><reading>なつ</reading><pos>名詞</pos></word><word><surface>は&lt;/surface><reading>は&lt;/reading><pos>助詞</pos></word><word><surface>あつい&lt;/surface><reading>あつい&lt;/reading><pos>形容詞&lt;/pos></word></word_list></ma_result></ResultSet> 
```

但现在 xmlData 是

```
<?xml version="1.0" encoding="UTF-8" ?><ResultSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:yahoo:jp:jlp" xsi:schemaLocation="urn:yahoo:jp:jlp http://jlp.yahooapis.jp/MAService/V1_list></ma_result></ResultSet> 
```

我认为 stringByReplacingPercentEscapesUsingEncoding 方法省略了日语数据，不是吗？请告诉我如何解决。

# java - Eclipse 中没有 Android 项目选项

> ID：11329753
> 
> 赞同：3
> 
> 时间：2012-07-04T13:08:12.083
> 
> 标签：java, android, eclipse, adt

我正在使用安装了 Eclipse Classic Juno 的 Windows 7 64 位。我已经安装了 ATD 插件和 Android SDK。所以这就是问题所在：当我去 NEW -> Project -> Others 并选择 Android 文件夹时，我看到的只是 Android Activity、Android 应用程序项目、Android 测试项目等。里面没有“Android 项目”。

我尝试选择“Android 应用程序项目”，但单击完成后，创建项目窗口不会关闭，但会创建一个新项目，如包资源管理器中所示。当我单击时，源文件夹是空的。那里不应该有什么吗？

有什么我做错了吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:32:40.913

哇，我以前从来没有遇到过这种情况，android ADT 插件显然有问题。或者你的日食发行版。我能给你的唯一建议是尝试处女日食发行版。

或者，您可以使用本教程在命令行中创建项目。[http://incise.org/android-development-on-the-command-line.html](http://incise.org/android-development-on-the-command-line.html)然后将其导入 Eclipse。（虽然不是很漂亮）。

您也可以卸载 android ADT 插件。单击帮助 > 安装新软件。选择显示已安装什么的链接？它将打开安装详细信息对话框，然后您可以卸载所有 android 插件并重新安装。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:01:52.283

我在这里遇到了同样烦人的问题。花了 3 个小时尝试一切。卸载和安装所有可能和不可能的插件......当我几乎失去所有希望时，它神秘地工作了！\o/

我做了什么？没有什么不寻常的。正确的问题是：我没有做什么...

让我们继续我的进一步调查：当我使用那个新的图标创建工具并**使用 TEXT**而不是剪贴画或图像创建一个新应用程序时，没有任何效果。但是，当我使用剪贴画 BINGO 时，一切都按照预期的方式优雅地工作，并且像以前一样工作了很多次。

就这么简单：不要使用文本创建图标。它出问题了。我在这里查过。已删除应用程序，尝试使用文本图标再次创建：错误。用剪贴画再次尝试：好！

就是这样！希望我的回答对您有所帮助... ;]

# objective-c - 这是实现 NSMutableCopying 的合理模式吗？

> ID：11329754
> 
> 赞同：2
> 
> 时间：2012-07-04T13:08:13.123
> 
> 标签：objective-c, nscopying, nsmutablecopying

我正在寻找实现`NSMutableCopying`接口，因为我有一组不可变的对象，但我还需要能够创建修改后的副本。假设我们有一个定义类似这样的电影（当然，真的会有更多的属性）：

```
// BBMovie.h

@interface BBMovie : NSObject < NSCopying, NSMutableCopying >
@property(readonly, nonatomic, copy) NSString *title;
@end

@interface BBMutableMovie : BBMovie
@property(readwrite, nonatomic, copy) NSString *title;
@end 
```

根据我的阅读，如果您需要在构造函数之外设置 ivars，就像我将在这里实现的那样`NSCopying`，那么为它们定义私有 setter 是一种很好的做法。所以我最终会得到这样的实现`BBMovie`（请注意，这些类型并非旨在允许子类化）：

```
// BBMovie.m (note: compiling with ARC)

@interface BBMovie ()
@property(readwrite, nonatomic, copy) NSString *title;
@end

@implementation BBMovie
@synthesize title = _title;

- (id)copyWithZone:(NSZone *)zone
{
    BBMovie *copy = [[BBMovie allocWithZone:zone] init];
    if (copy) copy.title = self.title;
    return copy;
}

- (id)mutableCopyWithZone:(NSZone *)zone
{
    BBMutableMovie *copy = [[BBMutableMovie allocWithZone:zone] init];
    if (copy) copy.title = self.title;
    return copy;
}

@end 
```

现在，鉴于我知道`BBMovie`实现具有属性的 getter 和 setter，看来我应该能够`BBMutableMovie`简单地实现：

```
@implementation BBMutableMovie
@dynamic title;
@end 
```

这种方法有什么问题，和/或我遗漏了什么吗？

当然，我意识到 BBMovie 实现并不是真正不可变的，因为如果库的消费者发送它会响应设置的消息，但这对我来说并不是真正的问题，因为它不会带来安全风险并且会下降在图书馆的“正常”使用之外。

# sql - 如何在引用特定列的行中测试一系列相等的 X 配对行？

> ID：11329755
> 
> 赞同：6
> 
> 时间：2012-07-04T13:08:20.867
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 SQL Server 2008 R2。

考虑这个表@t（ORDER BY PK DESC 的前 20 名）：

```
PK  SK  VC  APP     M   C
==  ==  ==  ====    ==  ==================
21  7   79  NULL    0   NULL
20  9   74  1       3   20=14, 18=13, 15=2
19  6   79  1       2   19=11, 17=7
18  9   77  1       0   NULL
17  6   74  1       0   NULL
16  7   79  1       0   NULL
15  9   74  1       0   NULL
14  9   74  1       0   NULL
13  9   77  1       0   NULL
12  7   77  1       0   NULL
11  6   79  1       0   NULL
10  7   79  1       0   NULL
9   7   74  1       0   NULL
8   7   79  1       0   NULL
7   6   74  1       0   NULL
6   6   74  1       0   NULL
5   7   79  1       0   NULL
4   7   77  1       0   NULL
3   6   79  1       0   NULL
2   9   74  1       0   NULL 
```

用这个创建：

```
DECLARE @t TABLE(PK INT NOT NULL IDENTITY(1,1) PRIMARY KEY CLUSTERED, SK INT NOT NULL, VC INT NULL,  APP INT NULL, M INT NOT NULL,  C NVARCHAR(111) NULL);

INSERT @t (SK,VC,APP,M,C) VALUES
(7,77,1,0,NULL),
(9,74,1,0,NULL),
(6,79,1,0,NULL),
(7,77,1,0,NULL),
(7,79,1,0,NULL),
(6,74,1,0,NULL),
(6,74,1,0,NULL),
(7,79,1,0,NULL),
(7,74,1,0,NULL),
(7,79,1,0,NULL),
(6,79,1,0,NULL),
(7,77,1,0,NULL),
(9,77,1,0,NULL),
(9,74,1,0,NULL),
(9,74,1,0,NULL),
(7,79,1,0,NULL),
(6,74,1,0,NULL),
(9,77,1,0,NULL),
(6,79,1,2,'19=11, 17=7'),
(9,74,1,3,'20=14, 18=13, 15=2'),
(7,79,NULL,0,NULL) 
```

我的任务是`true`如果最新行 ( `where APP IS NOT NULL`) 完成一系列 X 匹配对或同一组的最新行（相同的当前 SK），则返回匹配。

例如，当仅测试 2 对时，假设当前所需的测试是在 SK=6 上，一旦达到 PK = 19，就会有匹配。

匹配是 VC(19)=VC(11)=79 AND VC(17)=VC(7)=74

通过执行以下命令来查看：

```
DECLARE @PairsToTest int = 2
DECLARE @SK int = 6
SELECT 
    TOP (2*@PairsToTest) 
    * 
    FROM @t 
    WHERE 
            APP IS NOT NULL 
        AND SK = @SK 
    ORDER BY SK, PK DESC 
```

结果：

```
PK  SK  VC  APP M   C
19  6   79  1   2   19=11, 17=7
17  6   74  1   0   NULL
11  6   79  1   0   NULL
7   6   74  1   0   NULL 
```

另一个例子：

测试 3 对时，在 SK=9 中查找 PK=20 时发现匹配（虽然这本身就是一个有趣的问题，但对于我的任务而言，不需要测试所有 SK。给定 SK 的结果就足够了为了我。

要查看比赛，请执行以下操作：

```
DECLARE @PairsToTest int = 3
DECLARE @SK int = 9
SELECT 
    TOP (2*@PairsToTest) 
    * 
    FROM @t 
    WHERE 
            APP IS NOT NULL 
        AND SK = @SK 
    ORDER BY SK, PK DESC 
```

结果：

```
PK  SK  VC  APP M   C
20  9   74  1   3   20=14, 18=13, 15=2
18  9   77  1   0   NULL
15  9   74  1   0   NULL
14  9   74  1   0   NULL
13  9   77  1   0   NULL
2   9   74  1   0   NULL 
```

如您所见：VC(20)=VC(14)=74, VC(18)=VC(13)=74 和 VC(15)=VC(2)

我想以正确的顺序选择所需的行集，并在 VC 中计算相等的行。如果计数与计数相同，`@PairsToTest`则表示升旗。

我试过了：

```
DECLARE @PairsToTest int = 3
DECLARE @SK int = 9
;with t0 as
(
SELECT 
    TOP (2*@PairsToTest) 
    * 
    FROM @t 
    WHERE 
            APP IS NOT NULL 
        AND SK = @SK 
    ORDER BY SK, PK DESC
),
t1 AS
(
SELECT TOP (@PairsToTest) * FROM t0
),
t2 AS
(
SELECT TOP (@PairsToTest) * FROM t0 ORDER BY PK ASC 
)
,t3 AS
(
SELECT TOP 99999999 * FROM t2 ORDER BY PK DESC
)

IF (SELECT COUNT(*) FROM t1 LEFT OUTER JOIN t3 ON t1.VC = t3.VC) = @PairsToTest 
    SELECT 1
ELSE
    SELECT 0 
```

但这也可能存在缺陷：

1.  VC 不包含唯一数据（只是偶然）
2.  不允许使用 IF
3.  我应该摆脱 t3 中的 TOP 99999999（尽管我可以忍受）

为了解决这个问题，我应该采取哪些必要的改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:53:30.330

```
DECLARE @t TABLE(PK INT NOT NULL IDENTITY(1,1) PRIMARY KEY CLUSTERED, SK INT NOT NULL, VC INT NULL,  APP INT NULL, M INT NOT NULL,  C NVARCHAR(111) NULL);

INSERT @t (SK,VC,APP,M,C) VALUES
(7,77,1,0,NULL),
(9,74,1,0,NULL),
(6,79,1,0,NULL),
(7,77,1,0,NULL),
(7,79,1,0,NULL),
(6,74,1,0,NULL),
(6,74,1,0,NULL),
(7,79,1,0,NULL),
(7,74,1,0,NULL),
(7,79,1,0,NULL),
(6,79,1,0,NULL),
(7,77,1,0,NULL),
(9,77,1,0,NULL),
(9,74,1,0,NULL),
(9,74,1,0,NULL),
(7,79,1,0,NULL),
(6,74,1,0,NULL),
(9,77,1,0,NULL),
(6,79,1,2,'19=11, 17=7'),
(9,74,1,3,'20=14, 18=13, 15=2'),
(7,79,NULL,0,NULL)

DECLARE @PairsToTest int = 3
DECLARE @SK int = 9

IF ((SELECT COUNT(*) FROM @t WHERE APP IS NOT NULL AND SK = @SK)-@PairsToTest) >=0
    BEGIN
        DECLARE @swapData  TABLE(PK1 INT NOT NULL IDENTITY(1,1) PRIMARY KEY CLUSTERED, PK INT NOT NULL, SK INT NOT NULL, VC INT NULL,  APP INT NULL, M INT NOT NULL,  C NVARCHAR(111) NULL);
        DECLARE @olderData TABLE(PK2 INT NOT NULL IDENTITY(1,1) PRIMARY KEY CLUSTERED, PK INT NOT NULL, SK INT NOT NULL, VC2 INT NULL,  APP INT NULL, M INT NOT NULL,  C NVARCHAR(111) NULL);
        DECLARE @newerData TABLE(PK3 INT NOT NULL IDENTITY(1,1) PRIMARY KEY CLUSTERED, PK INT NOT NULL, SK INT NOT NULL, VC3 INT NULL,  APP INT NULL, M INT NOT NULL,  C NVARCHAR(111) NULL);

        INSERT @swapData  SELECT TOP ((SELECT COUNT(*) FROM @t WHERE APP IS NOT NULL AND SK = @SK)-@PairsToTest) * FROM @t WHERE APP IS NOT NULL AND SK = @SK ORDER BY PK
        INSERT @olderData SELECT TOP (@PairsToTest) PK,SK,VC,APP,M,C FROM @swapData ORDER BY PK1 DESC
        INSERT @newerData SELECT TOP (@PairsToTest) * FROM @t WHERE APP IS NOT NULL AND SK = @SK ORDER BY SK, PK DESC

        DECLARE @Matches int = (SELECT COUNT(*)FROM @newerData INNER JOIN @olderData ON PK2 = PK3 WHERE VC2=VC3)

        IF @Matches = @PairsToTest 
            SELECT 1 AS Match 
        ELSE 
            SELECT 0 AS Match
    END
ELSE
    SELECT 0 AS Match

/*
SELECT TOP (2*@PairsToTest) * FROM @t WHERE APP IS NOT NULL AND SK = @SK ORDER BY SK, PK DESC
SELECT * FROM @olderData
SELECT * FROM @newerData
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:01:20.543

试试这个代码，它计算每个 SK 分区中的行对数，并从结果中排除没有对的行：

```
DECLARE @t TABLE(PK INT NOT NULL IDENTITY(1,1) PRIMARY KEY CLUSTERED, SK INT NOT NULL, VC INT NULL,  APP INT NULL, M INT NOT NULL,  C NVARCHAR(111) NULL);

INSERT @t (SK,VC,APP,M,C) VALUES
(7,77,1,0,NULL),
(9,74,1,0,NULL),
(6,79,1,0,NULL),
(7,77,1,0,NULL),
(7,79,1,0,NULL),
(6,74,1,0,NULL),
(6,74,1,0,NULL),
(7,79,1,0,NULL),
(7,79,1,0,NULL),
(6,79,1,0,NULL),
(7,77,1,0,NULL),
(9,77,1,0,NULL),
(9,74,1,0,NULL),
(9,74,1,0,NULL),
(7,79,1,0,NULL),
(6,74,1,0,NULL),
(9,77,1,0,NULL),
(6,79,1,2,'19=11, 17=7'),
(9,74,1,3,'20=14, 18=13, 15=2'),
(7,79,NULL,0,NULL)

;WITH c AS
(
    SELECT  *,
            DENSE_RANK() OVER (PARTITION BY SK ORDER BY VC DESC) DenseRankPartitionBySK,
            ROW_NUMBER() OVER (PARTITION BY SK ORDER BY PK DESC) ordinalNumberInSKPartition
    FROM    @t
    WHERE   APP IS NOT NULL
),
e AS
(
    SELECT  *,
            COUNT(*) OVER (PARTITION BY SK, DenseRankPartitionBySK) _Sum,
            ROW_NUMBER() OVER (PARTITION BY SK, DenseRankPartitionBySK ORDER BY PK) Odd
    FROM    c
),
d AS (
    SELECT  *,
            COUNT(*) OVER (PARTITION BY SK) numberOfRows
    FROM    e 
    WHERE   _Sum % 2 = 0 OR Odd <> 1
)

SELECT  
        d.PK, d.SK, d.VC, d.APP, d.M, d.C, 
        CASE WHEN ordinalNumberInSKPartition = 1 THEN 1 ELSE 0 END IsTopRow,
        numberOfRows / 2 [NumberOfPairsInSKPartition(M)]
FROM    d
ORDER   BY SK, PK DESC 
```

# c# - 如何使网站执行链接？

> ID：11329757
> 
> 赞同：0
> 
> 时间：2012-07-04T13:08:40.070
> 
> 标签：c#, asp.net

我正在制作一个将执行链接的小网页，具体是磁铁链接。但是 webserveruserrole 并没有携带足够的 mojo（权限，`Process.Start()`）来实现这一点。

我试图寻找这个用户角色，但找不到它。

如何使网络服务器执行/启动`magnet:?xt`链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:16:14.157

如果可以从网页启动进程，这将是病毒的高速公路。

当然，我假设您了解 http 模型。网页实际上是在服务器上执行的，所有代码都在服务器上运行。客户端浏览器仅显示从一次 http 请求/响应接收到的 html。

但是，正如您所猜测的那样，您可以创建自定义 url Scheme (yourapp://yourquery)。客户端必须注册一个应用程序来处理这些 url（这就是磁力链接的工作方式）。

有关[msdn 页面的更多信息：将应用程序注册到 URL 协议](http://msdn.microsoft.com/en-us/library/aa767914.aspx)。

但是，我强调微软所说的：

> ![安全警报](../Images/702c13d887d57bf10077658e03c5e097.png) **安全警报** 处理 URL 协议的应用程序必须考虑如何响应恶意数据。因为处理程序应用程序可以从不受信任的来源接收数据，所以传递给应用程序的 URL 和其他参数值可能包含试图利用处理程序应用程序的恶意数据。

如果应用程序不知道如何处理恶意数据，这可能会导致严重的问题。

# ruby - 将哈希值和连接值合并为数组

> ID：11329767
> 
> 赞同：0
> 
> 时间：2012-07-04T13:09:00.663
> 
> 标签：ruby, hash

我正在寻找转换以下数据结构

```
series = [{:name => "foo", :data => [12, 23]}, 
          {:name => "bar", :data => [14, 22]}, 
          {:name => "foo", :data => [15, 26]}] 
```

到

```
series = [{:name => "foo", :data => [[12, 23],[15,26]]},
 {:name => "bar", :data => [14, 22]}] 
```

在 ruby​​ 1.8 中解决这个问题的最佳方法应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:34:40.010

```
series.group_by { |h| h[:name] }.map do |name, hs_for_name| 
  {:name => name, :data => hs_for_name.map { |h| h[:data] }}
end
#=> [{:name=>"foo", :data=>[[12, 23], [15, 26]]}, 
#    {:name=>"bar", :data=>[[14, 22]]}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:13:45.983

使用该[`Enumerable#inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)方法映射所有项目并根据您的需要减少结果。

# iphone - 方法：didRegisterForRemoteNotificationsWithDeviceToken：不调用

> ID：11329768
> 
> 赞同：1
> 
> 时间：2012-07-04T13:09:08.870
> 
> 标签：iphone, objective-c, ios5, push-notification

我在我的应用程序中编写了推送通知的代码如下：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     [Parse setApplicationId:kPARSEAPPID clientKey:kPARSECLIENTKEY];
     // Override point for customization after application launch.
    [application registerForRemoteNotificationTypes:UIRemoteNotificationTypeAlert|UIRemoteNotificationTypeBadge|UIRemoteNotificationTypeSound]; 
} 
```

但是在下面的方法中控制不去。

```
-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
    NSString *str = [NSString 
                     stringWithFormat:@"Device Token=%@",deviceToken];
    NSLog(@"str=%@",str);
    [PFPush storeDeviceToken:deviceToken];

} 
```

我的代码应该有什么问题？任何想法？

提前谢谢...

# c++ - 列表分配错误

> ID：11329770
> 
> 赞同：1
> 
> 时间：2012-07-04T13:09:22.520
> 
> 标签：c++, c++11, shared-ptr, bad-alloc

我有这个虚拟方法：

```
const string& my_class::to_string() const
{
    string str(this->name + string(" "));

    if(!this->children.empty())
    {
        for(const std::shared_ptr<base_class> e : this->children)
            str.append(e.get()->to_string());
    }

    return str;
} 
```

哪里`children`是 a `std::list<std::shared_ptr<base_class>>`，并`my_class`继承`base_class`。但是，在第一次递归调用 (of `my_class::to_string`) 之后，在我返回这个 child 之后`str`，我得到了一个错误的分配。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:17:35.540

正如 BoBTFish 所指出的，您应该将函数签名更改为：

```
string my_class::to_string() const 
```

因为您正在本地修改字符串，而不仅仅是返回对类成员的引用。否则，您只需返回对本地字符串的引用，即 UB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T13:20:19.737

您返回对局部变量的引用。当函数 to_string() 退出其范围时，此变量会过时。如果你使用 C++11，你可以自由地按值返回 str。将使用移动语义并且不会发生复制。

```
std::string my_class::to_string() const
{
} 
```

# javascript - jquery ajax调用导致浏览器错误

> ID：11329773
> 
> 赞同：0
> 
> 时间：2012-07-04T13:09:33.260
> 
> 标签：javascript, jquery, ajax

HTML 代码：

```
<div class="clearfix" style="color: #555" style="display:block; ">
<input type="text" id="id_site" placeholder="nom-du-site" style="width: 245px;  font-size: 16px;">
<div style="float: right; color: black; font-size: 16px; margin-top: 10px; margin-left: -6px">.domain.com</div>
</div>
<br>
<div class="spacing">
<a href="" id="envoyer" class="bouton">Envoyer</a> 
```

这是带有 Query Ajax 调用的 javascript 代码：

```
 $("#envoyer").click(function (e) {

        // checks user input:
        nom = document.getElementById('id_nom');
        email = document.getElementById('id_email');
        site = document.getElementById('id_site');

        $.ajax({
            url: 'http://localhost/website/script.php',
            dataType: 'jsonp',
            data: {
                nom: nom,
                email: email,
                site: site
            },
            success: function (json) {
                DataSeries = json;
            },
            error: branchAjaxFailed
        });

}); 
```

这是script.php（目前）：

```
<?
if (isset($_GET["nom"])) $nom = $_GET["nom"];
if (isset($_GET["email"])) $email = $_GET["email"];
if (isset($_GET["site"])) $site = $_GET["site"];
?> 
```

*   Chrome 无限期冻结。如果我在此 Ajax 调用之后添加调试中断，Chrome 永远不会在“检查元素”工具中到达那里。
*   IE 给我一个“第 2 行的堆栈溢出”错误。

谁能看到问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:11:24.110

在尝试了几件事之后，我发现了“有罪”的部分：以下 html 代码导致了问题：

```
<a href="" id="envoyer" class="bouton">Envoyer</a> 
```

删除 href 可以解决问题：

```
<a id="envoyer" class="bouton">Envoyer</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:20:49.050

我在处理 JSONP 时通常使用 JQuery getJSON，您的服务器是否设置为处理 JSONP？例如，如果我正在调用 Flickr API，我可能会遇到以下情况（未经测试）：

```
$.getJSON("http://api.flickr.com/services/rest/?jsoncallback=?",
{
  tags : 'Apple',
  tagmode : "any",
  method : "flickr.photos.search",
},
function(data) {
  $.each(data.photos.photo, function(i,item){
    var src = "http://farm"+ item.farm +".static.flickr.com/"+ item.server +"/"+ item.id +"_"+ item.secret +"_m.jpg";
    var image = $('<img class="flickr" alt="' + item.title + '" />');
    image.load(function() {
      $(this).animate({ 'opacity':1 }, { duration:300, queue:false });
    });
    $('#images').append($('<a href="'+srcLarge+'" rel="prettyPhoto[location]" />').append(image));
    image.attr('src',src);
  });
 }); 
```

# asp.net-mvc-3 - 如何简化我的 MVC3 路由？

> ID：11329775
> 
> 赞同：2
> 
> 时间：2012-07-04T13:09:36.067
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我有以下路线。我想我可以简化它们，但我不确定如何。有人可以给我一些建议吗？这些路线中 id = ... 的原因是什么。如果我的方法中没有任何 id 参数，那么这是在做什么吗？

```
context.MapRoute(
    "Admin_test",
    "Admin/Tests",
    new { controller = "Contents", action = "Tests", id = UrlParameter.Optional }
);
context.MapRoute(
    "Admin_menus",
    "Admin/Menus",
    new { controller = "Contents", action = "Menus", id = UrlParameter.Optional }
);
context.MapRoute(
    "Admin_notes",
    "Admin/Pages",
    new { controller = "Contents", action = "Pages", id = UrlParameter.Optional }
);
context.MapRoute(
    "Admin_cores",
    "Admin/Cores",
    new { controller = "Cores", action = "Cores", id = UrlParameter.Optional }
);
context.MapRoute(
    "Admin_default3",
    "Admin/References",
    new { controller = "References", action = "References", id =     UrlParameter.Optional }
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:11:52.003

```
context.MapRoute(
    "Admin_Contents",
    "Admin/{action}",
    new { controller = "Contents" },
    new { action = "^tests|menus|pages$" }
);

context.MapRoute(
    "Admin_Default",
    "Admin/{controller}",
    new { action = "Index" }
); 
```

`Cores`然后在你的和`References`控制器上使用更多的 RESTful 动作命名约定，并`Index`用作默认动作而不是`Cores`and `References`。

但在第二个路由定义中，您可能还希望允许用户在 url 中指定不同的操作：

```
context.MapRoute(
    "Admin_Default",
    "Admin/{controller}/{action}",
    new { action = "Index" }
); 
```

# java - 在运行时运行 Java 文件

> ID：11329777
> 
> 赞同：0
> 
> 时间：2012-07-04T13:09:44.230
> 
> 标签：java, class, runtime

我想在运行时运行我的应用程序用户提供的 java 文件。

我试过了：

```
Process p1 = Runtime.getRuntime().exec("javac MyClass.java");
p1.waitFor();
Process p2 = Runtime.getRuntime().exec("java MyClass");
p2.waitFor(); 
```

但它不起作用。它创建一个类文件，但它不创建一个二进制文件。

有什么建议吗？

我会准确地说我在做什么：

所以这是我的java文件：

```
public class MyClass {
    public void myMethod(){
        System.out.println("My Method Called");
    }
} 
```

这是我试图编译和执行这个类的代码：

```
 public class TestExecute {

    private static void printLines(String name, InputStream ins) throws Exception {
        String line = null;
        BufferedReader in = new BufferedReader(
            new InputStreamReader(ins));
        while ((line = in.readLine()) != null) {
            System.out.println(name + " " + line);
        }
      }

      private static void runProcess(String command) throws Exception {
        Process pro = Runtime.getRuntime().exec(command);
        printLines(command + " stdout:", pro.getInputStream());
        printLines(command + " stderr:", pro.getErrorStream());
        pro.waitFor();
        System.out.println(command + " exitValue() " + pro.exitValue());
      }

      public static void main(String[] args) {
        try {
          runProcess("javac MyClass.java");
          runProcess("java MyClass");
        } catch (Exception e) {
          e.printStackTrace();
        }
      }

} 
```

在路径中，创建了 MyClass.class。Hier 是控制台中的输出：

```
javac C:/Users/Maher/workspace/1/src/main/java/model/MyClass.java exitValue() 0 
```

我在 Windows 7 上使用 Eclipse。

我想显示“我的方法调用”来测试这个解决方案，但它没有显示。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:24:23.947

If you are expecting *output* of compiled or running java class then you have to read the `InputStream` of child process.

```
 Process p2 = Runtime.getRuntime().exec("java MyClass");
 BufferedReader br=new BufferedReader(new InputStreamReader(p2.getInputStream()));

 String line=null;
 while( (line=br.readLine())!=null)
  {
    System.out.println(line);
  }
 p2.waitFor(); 
```

EDIT: Add `main()` method.

```
public class MyClass {
    public void myMethod(){
        System.out.println("My Method Called");
    }
    public static void main(String[] args){ 
       new MyClass().myMethod();
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:45:08.083

你可以考虑另一种方法。Java 有一个用于嵌入 JavaScript、Python 等的脚本 API。现在，[BeanShell](http://www.beanshell.org/)是 java。

它比使用 exec 两次更快，更不易碎。

# php - exec() 什么都不做

> ID：11329781
> 
> 赞同：1
> 
> 时间：2012-07-04T13:10:06.987
> 
> 标签：php, linux

当我在 shell 命令提示符中键入以下内容时，它会将 .docx 文件转换为 .pdf 文件。

```
HOME=/tmp libreoffice3.5 --headless -convert-to pdf --outdir /tmp/ayb /tmp/ayb/document_16_64.docx 
```

但是当我运行下面的 PHP 脚本时，什么也没有发生。我已将 /tmp/ayb 权限设置为 777，但仍然不行。有任何想法吗？谢谢

```
<?php
  $cmd='HOME=/tmp libreoffice3.5 --headless -convert-to pdf --outdir /tmp/ayb /tmp/ayb/document_16_64.docx';
  exec($cmd);
?> 
```

编辑-以下脚本产生以下结果。请注意，当 shell_exec() 不需要时， exec() 需要一些时间。

```
<?php
  $cmd='HOME=/tmp; /usr/bin/libreoffice3.5 --headless -convert-to pdf --outdir /tmp/ayb /tmp/ayb/document_16_64.docx';
  echo($cmd);
  exec($cmd,$out,$ret);
  echo('<br />exec()<br />$out='.print_r($out,1).'<br />$ret='.$ret);
  $out=shell_exec($cmd);
  echo('<br />shell_exec()<br />$out='.print_r($out,1));
?> 
```

输出

```
HOME=/tmp; /usr/bin/libreoffice3.5 --headless -convert-to pdf --outdir /tmp/ayb /tmp/ayb/document_16_64.docx
exec()
$out=Array ( )
$ret=134
shell_exec()
$out= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:13:17.653

Apache 是否具有正确的用户权限？如果您以 root 身份登录 SSH，那么您将拥有对命令的完全访问权限；因此您可能需要升级 Apache 对某些目录的权限。

您可能还会发现值得一试[`shell_exec()`](http://php.net/manual/en/function.shell-exec.php)。

正如迈克尔指出的那样，这也可能是目录问题。指向完整的目录路径而不是相对路径。

# android - 如何在 Spinner Android 中对齐第一条可见行中的文本

> ID：11329782
> 
> 赞同：1
> 
> 时间：2012-07-04T13:10:07.643
> 
> 标签：android, android-view, android-spinner

我在微调器中执行此操作

//文本居中对齐

[http://i.stack.imgur.com/GE8aG.png](http://i.stack.imgur.com/GE8aG.png)

但我想实现这一目标

//文本左对齐

[http://i.stack.imgur.com/FTjhs.png](http://i.stack.imgur.com/FTjhs.png)

我该怎么办？我尝试使用“重力”但不起作用

爪哇代码：

```
void addProvinceSpinner() {

    ArrayList<String> listaProvince = new ArrayList<String>();
    listaProvince.add("MILANO");
    listaProvince.add("ROMA");
    listaProvince.add("BARI");

    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            R.layout.layout_riga_spinner_inserzionisti,
            R.id.inserzionisti_txt_riga_spinner, listaProvince);

    spinner_province.setAdapter(dataAdapter);
} 
```

xml 代码 (R.layout.layout_riga_spinner_inserzionisti):

```
<TextView
    android:id="@+id/inserzionisti_txt_riga_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textColor="#01a0d1"
    android:textSize="20sp" /> 
```

主要的xml代码：

```
<Spinner
    android:id="@+id/inserzionisti_spinner_province"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/inserzionisti_spinner_bg"
    android:prompt="@string/inserzionisti_prompt"/> 
```

我刚解决...

我必须设置

> android:layout_width="wrap_content"

至

> android:layout_width="fill_parent"

在微调...

谢谢大家！<3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:16:02.727

```
Create an xml -  raw.xml and put this code:

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/spinnerTarget"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center" // As per your requirement (left, center , right etc)
android:textColor="#454545"
android:padding="5dip"
android:textSize="14dip" />

In class file use like this:

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.im_arrays, R.layout.row_spiner); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:25:05.863

今天我自己也遇到了这个。确实无法将其设置在实际的文本视图上。您必须改为更改 Spinner 的重力（这样做就足够了）。添加这个：

```
android:gravity="center" 
```

像这样对你的微调器：

```
<Spinner
    android:id="@+id/inserzionisti_spinner_province"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:background="@drawable/inserzionisti_spinner_bg"
    android:prompt="@string/inserzionisti_prompt"/> 
```

我正在使用`android.R.layout.simple_spinner_item`，像这样：

```
new ArrayAdapter<String>(context, android.R.layout.simple_spinner_item, ...); 
```

# c++ - C++ 在模板中使用运算符关键字？

> ID：11329784
> 
> 赞同：2
> 
> 时间：2012-07-04T13:10:17.153
> 
> 标签：c++, templates, operator-overloading, friend

我正在努力定义朋友运算符功能。我的代码如下：

```
 template <typename typ>
    class VecClass 
    {
     public:
        VecClass();
        /* other class definitions */
        friend void operator+(VecClass op1,VecClass op2);
    }

    template <typename typ>
    void VecClass<typ>::operator+(VecClass<typ> &op1,VecClass<typ> &op2)
    {
        /* do some stuff on op1 and op2 in here */
    } 
```

其中 VecClass 是一个用于创建向量并在这些向量上执行各种功能的类（注意，我已经简化了代码以尝试尽可能清晰）。编译时，使用

```
 int main()
    {
        VecClass=a,b;
        a+b;
        return 0;
    } 
```

我收到以下编译错误

```
 error C2039: '+' : is not a member of 'VecClass<typ>' 
```

我显然遗漏了一些东西，如果有任何建议，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T13:12:16.833

您声明了一个朋友运算符，而不是类成员，所以删除`VecClass<typ>::`

```
template <typename typ>
void operator+(VecClass<typ> &op1,VecClass<typ> &op2)
{
        /* do some stuff on op1 and op2 in here */
} 
```

# c# - 搜索提交完成事件之类的内容以关闭加载程序

> ID：11329789
> 
> 赞同：0
> 
> 时间：2012-07-04T13:10:36.730
> 
> 标签：c#, javascript, jquery, asp.net, webforms

我正在尝试在我的 asp.net webforms 应用程序上使用加载器。我的 javascript 加载器：

```
 function loading() {
            $("#loading").show();
        }

        function loaded() {
            $("#loading").hide();
        } 
```

html加载器

```
 <div id="loading">
         <span id="MessageLoader">Loading...</span>
         <img id="imgLoading" src="../Skin/images/blue-ajax-loader.gif" />
    </div> 
```

这不是问题，每次我尝试它都可以正常工作，我的问题是如何为每个请求使用这个加载器？我尝试通过两种方式使用它：首先将加载程序调用放在每个链接中，并在我加载每个页面正文 onload 事件时取消调用它，它工作正常，但是当我点击打开新选项卡、新窗口或下载某些文件的链接时我的加载程序永远不会完成，请参见下面的代码：

```
 $('a').click(function () {
              if ($(this).attr('href') != '#'){
                 loading();
              }
        } 
```

其次，我使用了我的页面拥有的一个资源：我系统上的每个页面在代码隐藏中都与另一个页面有继承关系，因此在父页面加载中我将这段代码放在下面：

```
 ScriptManager.RegisterOnSubmitStatement(this, this.GetType(), "myscript", "loading();"); 
```

它比上一个效果更好，它仍然使用页面正文 onload 事件来关闭加载器，但仍然存在一个问题，当我提交尝试下载文件时它不会在页面上进行回发，所以它不会把我的装载机下来。那么，我能做些什么呢？我搜索了诸如提交完整事件之类的东西，但没有成功。我的想法是将提交完成事件放在父页面上，但我需要知道该事件。如果您想给我另一个想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:19:51.240

在打开新标签/窗口时，您的当前页面将成为新标签/窗口中的页面。与上一页的 loader 有什么关系？其次，您的主文档现在如何加载新页面？

注意：该`click`事件是立即触发的，并且持续时间为 0，因此它没有任何回调。

但是，如果您需要加载 gif 一段时间并在一段时间后隐藏您的 setTimeout 函数。

[单击以获取 jsfiddle 示例](http://jsfiddle.net/hfuGx/52/)

```
$('a').click(function () {
              if ($(this).attr('href') != '#'){
                  loading();
                  setTimeout(loaded, 3000); //3 secs
              }

}); 
```

# vb6 - 在 vb6 中连接到 Access

> ID：11329802
> 
> 赞同：2
> 
> 时间：2012-07-04T13:11:28.280
> 
> 标签：vb6

我正在尝试使用密码连接到数据库，但出现错误这是我的连接字符串

```
cn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & App.Path & "\Database\HMS.mdb;" _
& "Password=admin;" 
```

我收到一个错误：无法启动您的应用程序。工作组信息文件丢失或由另一个用户独占打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:30:44.493

试试这个连接字符串：

```
cn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" _
& "Data Source=" & App.Path & "\Database\HMS.mdb;" _
& "Jet OLEDB:Database Password=admin;" 
```

# android - Android画廊查看器回收

> ID：11329805
> 
> 赞同：0
> 
> 时间：2012-07-04T13:11:39.143
> 
> 标签：android, adapter, image-gallery, android-gallery

我根据[本](http://saigeethamn.blogspot.nl/2010/05/gallery-view-android-developer-tutorial.html)教程制作了一个画廊查看器，但在单击缩略图时遇到了问题。例如，如果我点击第二个缩略图，它会转到第三个，如果我点击第四个，它会转到第五个等等。但是如果我点击第六个，它实际上会转到第六个。我认为它必须与缩略图的位置和适配器的回收有关，但我无法偶然找到解决方案。

这是我的适配器：

```
public class ImageAdapter extends BaseAdapter {

        private Context ctx;
        int imageBackground;

        public ImageAdapter(Context c) {
            ctx = c;
            TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
            imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
            ta.recycle();
        }

        public int getCount() {
            return mImagesUrls.size();
        }

        public Object getItem(int arg0) {
            return arg0;
        }

        public long getItemId(int arg0) {
            return arg0;
        }

        // Thumbnails gallery

        public View getView(int arg0, View arg1, ViewGroup arg2) {
            ImageView iv;
            if (arg1 == null) {
                iv = new ImageView(ctx);
            } else {
                iv = (ImageView) arg1;
            }

            // iv.setImageResource(mImagesUrls.get(arg0));
            mCache.loadBitmap(mImagesUrls.get(arg0), iv);
            iv.setScaleType(ImageView.ScaleType.FIT_XY);

            // Image size of the thumbnails
            iv.setLayoutParams(new Gallery.LayoutParams(200, 120));
            iv.setBackgroundResource(imageBackground);
            GalleryTitleTv.setText((arg0 + 1) + " van " + mImagesUrls.size());
            return iv;
        }
    } 
```

提前非常感谢！

编辑：这是我对缩略图图像进行的缓存：

```
public void loadBitmap(String url, ImageView imageView) {
        Bitmap mImageHolder = BitmapFactory.decodeResource(context.getResources(), R.drawable.pic_2);
        final String imageKey = url;
        final Bitmap bitmap = get(imageKey);
        if (bitmap != null) {
            imageView.setImageBitmap(bitmap);
        } else {
            imageView.setImageBitmap(mImageHolder);
            BitmapWorkerTask task = new BitmapWorkerTask(imageView);
            task.execute(url);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:18:31.673

> 我认为它必须与缩略图的位置和适配器的回收有关，但我无法偶然找到解决方案。

由于画廊不回收视图，我认为不会。

```
 ImageView iv;
            if (arg1 == null) {
                iv = new ImageView(ctx);
            } else {
                iv = (ImageView) arg1;
            } 
```

出于同样的原因，这个片段没有用。您可以避免控制并分配`ImageView`每次，因为 arg1 将始终为空。您应该提供有关您是否缓存位图的更多信息。恕我直言，问题与缓存或 mImagesUrls 相关。

# asp.net - 没有泄漏的连接池问题（！？）

> ID：11329807
> 
> 赞同：2
> 
> 时间：2012-07-04T13:11:51.100
> 
> 标签：asp.net, sql-server-2008-r2, iis-7.5

我有一个基于 asp.net 4 的 Web 应用程序，但存在连接池问题。

```
Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached 
```

起初我以为有一些连接我忘了关闭，但似乎不是问题所在。当我设置 Pooling=False 时，我可以看到所有连接都已释放（通过查看 ssms）。

奇怪的是，这个问题只发生在我们的生产环境中。我尝试在本地启动 Web 应用程序并将其连接到生产数据库，然后它工作正常（释放连接）。这让我认为它与 IIS 有关，但我不知道是什么导致了这个错误。环境之间的唯一区别是应用程序池由 dev 中的 NetworkService 和 prod 中的 AD 帐户运行。由于该网站尚未启动，因此用户数量没有差异。

我什至尝试设置 Max Pool Size = 10 以在我们的开发环境中引发错误，但它仍然有效。

有任何想法吗？

**更新**

看起来我们有泄漏的连接

```
using (SqlCommand cmd = new SqlCommand())
{
      cmd.CommandType = CommandType.Text;
      cmd.Connection = ConnectionUtil.CreateNewConnection();

      //query code 
} 
```

我猜上面的代码只会处理 SqlCommand 但不会关闭连接。

我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:11:52.070

当我忘记关闭 finally 块中的连接时，我曾经看到过这个错误。

回到经典的 ASP，当默认数据库语言设置为英语而不是数据库默认语言时，我曾经看到“错误”。（这曾经抛出无法捕获的异常——至少在经典 ASP 中不会）

# php - Zen Cart 中缺少管理选项卡

> ID：11329810
> 
> 赞同：0
> 
> 时间：2012-07-04T13:11:54.000
> 
> 标签：php, e-commerce, shopping-cart, zen-cart

我正在为朋友的电子商务网站做一些小维护。我对 Zen Cart 的了解非常有限，但我想在他的结账时添加优惠券。

我已经在“订单总计”中安装了“折扣券”模块，并且所有帐户都应该在管理导航栏中有一个标题为“礼券/优惠券”的选项卡？但是这个标签不见了，也找不到了。

经过进一步检查，我注意到缺少许多选项卡和子菜单下拉菜单。无论如何要重新启用这些选项卡还是它们是附加的附加组件？

它应该看起来像这样...... ![在此处输入图像描述](../Images/3f0911b8ca95a8c3526cb62836be2e2f.png) 但它看起来像这样...... ![在此处输入图像描述](../Images/548d9e9b859984da768d3acbf85512fd.png)

我希望这是一件小事。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:54:53.520

您的朋友可能安装了管理员个人资料，而您的个人资料没有查看其他项目的权限。看看你是否可以去工具->管理设置（如果你的帐户受到限制，你可能需要你的朋友这样做）。

# java - 使用 Java 检索 XML 数据

> ID：11329812
> 
> 赞同：2
> 
> 时间：2012-07-04T13:12:00.983
> 
> 标签：java, xml, xml-parsing

我对 Java 和 Xml 解析非常陌生。我的要求是获取一个 xml 文件并使用 java 将 XML 文件的数据以表和列格式存储在数据库中。我尝试在谷歌中找到正确的解决方案。但我很无奈。到目前为止，我所做的是，我可以动态获取 xml 数据并存储标签名称或值。但是我的要求是仅将标记名称作为列名和与行格式中特定列相关的数据一次，任何人都可以更正我的代码。

```
<?xml version="1.0"?>
<company>
    <staff>
        <firstname>yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
    <staff>
        <firstname>low</firstname>
        <lastname>yin fong</lastname>
        <nickname>fong fong</nickname>
        <salary>200000</salary>
    </staff>
</company> 
```

Java 代码

```
 import java.io.*;
    import javax.xml.parsers.*;
    import org.w3c.dom.*;
    import org.xml.sax.*;

    public class XmlData{
     static public void main(String[] arg){
     try {
     BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
     System.out.print("Enter XML File Path: ");
     String xmlFile = bf.readLine();
     //Store the String into the File
     File file = new File(xmlFile);
     if(file.exists()){
     // Create a factory
     DocumentBuilderFactory factory =DocumentBuilderFactory.newInstance();
     // Use the factory to create a builder
     DocumentBuilder builder = factory.newDocumentBuilder();
     Document doc = builder.parse(xmlFile);
     Element docEle = doc.getDocumentElement();
     System.out.println("Root element of the document: "+ docEle.getNodeName());
     // Get a list of all elements in the document
     NodeList list = doc.getElementsByTagName("*");

     int totalElements = list.getLength();

     System.out.println("XML Elements: " + totalElements);
     for (int i=0; i<list.getLength(); i++) 
     {
     // Get element
     Element element = (Element)list.item(i);
     String tag=element.getTagName();
     String name=list.item(0).getChildNodes().item(0).getNodeValue();
     System.out.println(name);
     System.out.print(tag);
     System.out.print(" ");
     //System.out.println(element.getNodeName());

     }
     }
     else{
     System.out.print("File not found!");
     }
     }
     catch (Exception e) {
     System.exit(1);
     }
     }
    } 
```

此代码的输出：

```
company 
staff 
firstname 
lastname 
nickname 
salary 
staff 
firstname 
lastname 
nickname 
salary 
```

预期输出：

```
FirstName, Lastname, nickname  , salary  //column

yong     ,mook kim, mkyong     , 100000   // rows
low      ,yin fong, fong fong   ,200000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:41:25.923

我假设您已经创建了一个包含四列的数据库表 - FirstNAme、LastName、NickName、Salary。

读取数据并存储在数据库中真的很简单。

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

public class ParseStaff {
    public static void main(String [] args){
        parseFile();
    }
    public static void parseFile() {
        //get the factory
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            //Using factory get an instance of document builder
            DocumentBuilder db = dbf.newDocumentBuilder();
            //parse using builder to get DOM representation of the XML file
            //Document dom = db.parse("employees.xml");
            Document dom = db.parse("C:\\GAE\\NetBeansProjects\\Test\\src\\statff.xml");
            //get the root element
            Element docEle = dom.getDocumentElement();
            //get a nodelist of elements
            NodeList nl = docEle.getElementsByTagName("staff");

            if (nl != null && nl.getLength() > 0) {
                for (int i = 0; i < nl.getLength(); i++) {
                    //get the employee element
                    Element el = (Element) nl.item(i);
                    String firstname = getTextValue(el, "firstname");
                    String lastname = getTextValue(el, "lastname");
                    String nickname = getTextValue(el, "nickname");
                    int salary = getIntValue(el, "salary");

                    System.out.println(firstname);
                    System.out.println(lastname);
                    System.out.println(nickname);
                    System.out.println(salary);
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
    private static String getTextValue(Element ele, String tagName) {
        String textVal = null;
        NodeList nl = ele.getElementsByTagName(tagName);
        if (nl != null && nl.getLength() > 0) {
            Element el = (Element) nl.item(0);
            textVal = el.getFirstChild().getNodeValue();
        }

        return textVal;
    }
    private static int getIntValue(Element ele, String tagName) {
        return Integer.parseInt(getTextValue(ele, tagName));
    }
} 
```

将打印：

```
yong
mook kim
mkyong
100000
low
yin fong
fong fong
200000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-31T10:40:50.753

我不确定这个 XML 有多大。但是如果 xml 很大，你就不能将所有的 XML 导入内存。

因此，您可以使用[声明式流映射 (DSM)](https://mfatihercik.github.io/dsm)库。

DSM 允许您将 XML 作为流处理并部分处理数据。

首先，您必须按如下方式定义 yaml 映射文件。

```
result:
  type: object     # result is map
  path: /.+staff  # path is regex. its match with /company/staff
  function: processStuff  # call processStuff function when /company/stuff tag is closed
  fields:
    firstName:  # firstName is not same as firstname (camel case)
      path: firstname
    lastName:
      path: lastname
    nickName:
      path: nickname
    salary: long 
```

为流程人员创建 FunctionExecutor。

```
FunctionExecutor processStuff=new FunctionExecutor(){

            @Override
            public void execute(Params params) {

                // directly serialize Stuff class
                //Stuff stuff=params.getCurrentNode().toObject(Stuff.class);

                Map<String,Object> stuff= (Map<String,Object>)params.getCurrentNode().toObject();
                System.out.println(stuff);
                // process stuff ; save to db. call service etc.
            }
        }; 
```

使用 DSM 处理 xml

```
 DSMBuilder builder = new DSMBuilder(new File("path/to/mapping.yaml")).setType(DSMBuilder.TYPE.XML);

       // register processStuff Function
        builder.registerFunction("processStuff",processStuff);

        DSM dsm= builder.create();
        Object object =  dsm.toObject(xmlContent); 
```

输出：

```
{firstName=yong, lastName=mook kim, nickName=mkyong, salary=100000}
{firstName=low, lastName=yin fong, nickName=fong fong, salary=200000} 
```

# svn - 无法使用 svn 签出项目

> ID：11329815
> 
> 赞同：1
> 
> 时间：2012-07-04T13:12:12.270
> 
> 标签：svn, tortoisesvn

当我尝试签出这个项目时：

[https://src.springframework.org/svn/spring-samples/mvc-ajax/trunk/](https://src.springframework.org/svn/spring-samples/mvc-ajax/trunk/)

我收到错误：

![在此处输入图像描述](../Images/6a186cfeb29266e46f573a7f1ec4811e.png)

'src.springframework.org' 是一个有效的主机名，所以我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:17:24.920

乌龟配置错误。

我尝试了命令： svn checkout [https://src.springframework.org/svn/spring-samples/mvc-ajax/trunk/](https://src.springframework.org/svn/spring-samples/mvc-ajax/trunk/)，它运行良好。

你是如何配置乌龟的？

例如，Yuo 可以用 putty 尝试我的命令。

编辑：您的主机名不是 root 或其他？

# android - 在启用 Wifi 或等待 Gmail 响应时强制 android 使用 3G

> ID：11329818
> 
> 赞同：0
> 
> 时间：2012-07-04T13:12:19.143
> 
> 标签：android, gmail, wifi, 3g, notify

我制作了一个应用程序，它将在本地 Wifi（不是互联网连接）上运行，它需要通过 Gmail 或电子邮件应用程序发送邮件。所以我想通过3G连接强制它。我已经这样做了：

```
if (imageLoaded) {

    ConnectivityManager cm =
            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if (ni == null) {

    }else{
        if (ni.getType() == ConnectivityManager.TYPE_WIFI
                || ni.getType() == ConnectivityManager.TYPE_WIMAX) {
            WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);

            if (wm != null)
                System.out.println(wm.disconnect());
        }
        while (true) {
            ni = cm.getActiveNetworkInfo();
            if (ni != null && ni.getType() == ConnectivityManager.TYPE_MOBILE
                        && ni.isConnected()) {
                sendOnClick();
                break;
            }
        }
    }
} 
```

发送的代码是：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_EMAIL, adress);
intent.putExtra(Intent.EXTRA_SUBJECT, subject);
intent.putExtra(Intent.EXTRA_TEXT, emailBody);
Uri fileUri = Uri.fromFile(file);               

intent.putExtra(Intent.EXTRA_STREAM, fileUri);      

try {
    startActivity(Intent.createChooser(intent, "mail"));
} 
```

但问题是我不知道如何在发送邮件时收到通知，以便我可以重新连接到本地 Wifi。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:19:00.540

好的，您只需要使用 startActivityForResult 方法来启动您的邮件活动。

然后，当电子邮件应用程序返回您的应用程序时，您将在活动的 onActivityResult 回调中收到警告。

请参阅：[StartActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

开始：

```
private final static int INTENT_UUID = 69;//Declare this in your class
startActivity(Intent.createChooser(intent, "mail"), INTENT_UUID); 
```

之后收到：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (requestCode == INTENT_UUID) {
    //Do something
  }     
} 
```

# java - 当前面的字符是单词边界时，\b 不匹配

> ID：11329821
> 
> 赞同：5
> 
> 时间：2012-07-04T13:12:28.043
> 
> 标签：java, regex

我有一个相当奇特的问题。我正在尝试找到类似的模式`[some string][word boundary]`。简化，我的代码是：

```
final Pattern pattern = Pattern.compile(Pattern.quote(someString) + "\\b");
final String value = someString + " ";
System.out.println(pattern.matcher(value).find()); 
```

我的逻辑告诉我这应该总是输出`true`，不管是什么`someString`。然而：

*   如果`someString`以单词字符结尾（例如“abc”），`true`则输出；
*   如果`someString`以单词边界（例如“abc.”）结尾，`false`则输出。

任何想法发生了什么？我目前的解决方法是使用`\W`而不是`\b`，但我不确定其含义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T13:21:13.860

一个点然后一个空格不是单词边界。

单词边界位于单词字符之间，然后是非单词字符，反之亦然。
即在`[a-zA-Z0-9_][^a-zA-Z0-9_]`或之间`[^a-zA-Z0-9_][a-zA-Z0-9_]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T13:18:14.440

单词边界是前面有单词字符的非单词字符，反之亦然。句点前面的空格（2 个非单词字符）不符合此要求。

使用的效果`\W`是任何非单词字符都将被匹配（与 相同`\b`，但没有字符前面有单词字符的条件），这对于您的示例来说似乎是正确的。

# c# - 以动态/编程方式将 WHERE 子句添加到 SQL

> ID：11329823
> 
> 赞同：14
> 
> 时间：2012-07-04T13:12:41.630
> 
> 标签：c#, sql, sql-server, stored-procedures, ado.net

如何以编程方式将搜索条件添加到 SQL 存储过程？在我的应用程序（C#）中，我使用存储过程（SQL Server 2008R2）

```
ALTER PROCEDURE [dbo].[PROC001]
@userID varchar(20),
@password varchar(20)
AS
SELECT * FROM tUsers WHERE RTRIM(Name) = @userID AND RTRIM(Password) = @password 
```

我想通过更多条件扩展此查询，现在我不知道由于程序执行有多少条件将使用此查询.. 2、3、6 或 20。我想以编程方式添加这些条件，例如：

```
SELECT * FROM tUsers WHERE RTRIM(Name) = @userID AND RTRIM(Password) = @password
AND Field2 = '1' AND Field3 = '0' OR Field4 <> '8' AND Field5 < '100' .... 
```

是否可以动态地将条件发送到存储过程？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T13:16:10.857

您只能在 sql 中执行此操作，如下所示：

```
SELECT * 
FROM tUsers 
WHERE 1 = 1
  AND (@userID IS NULL OR RTRIM(Name) = @userID )
  AND (@password IS NULL OR RTRIM(Password) = @password)
  AND (@field2 IS NULL OR Field2 = @field2)
.... 
```

如果任何带有`NULL`值的参数传递给存储过程，则整个条件将被忽略。

**请注意**：我添加`WHERE 1 = 1`是为了使查询工作，以防没有参数传递给查询，在这种情况下，所有结果集都将被返回，因为`1 = 1`它总是正确的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T13:29:44.333

**编辑 - 如果可能，首选基于 LINQ 的 ORM**

如果您不需要在 ADO 中执行此操作，更好的解决方案是使用 ORM，它最终将构建参数化的 ad-hoc sql。这是两全其美的方式——您可以获得动态查询的灵活性，没有多余的过滤器会扰乱优化器，查询计划本身是可缓存的，并且您可以免受注入攻击等恶意攻击。基于 Linq 的 ORM 查询使阅读更容易：

```
 // Build up a non-materialized IQueryable<>
 var usersQuery = db.Users;
 if (!string.IsNullOrEmpty(userID))
 {
       usersQuery = usersQuery.Where(u => u.Name == userId);
 }
 // Of course, you wouldn't dream of storing passwords in cleartext.
 if (!string.IsNullOrEmpty(anotherField))
 {
       usersQuery = usersQuery.Where(u => u.AnotherColumn == anotherField);
 }
 ...
 // Materialize (and execute) the query
 var filteredUsers = usersQuery.ToList(); 
```

对于复杂的查询，您可能需要查看[PredicateBuilder](https://stackoverflow.com/questions/877034)

**ADO/手动查询构建**

您可以使用`sp_executesql`以下方法动态构建 SQL。如果您参数化变量，您应该可以避免 SQL 注入和转义引号等问题，我们将为您处理。

```
CREATE PROCEDURE [dbo].[PROC001]
    @userID varchar(20),
    @pwdHash varchar(20),
    @optionalParam1 NVARCHAR(50) = NULL -- Other optional parameters
AS        
    BEGIN        
        SET NOCOUNT ON        

        DECLARE @SQL NVARCHAR(MAX)        

        -- Mandatory / Static part of the Query here. 
        -- Cleartext passwords are verboten, and RTRIM is redundant in filters
        SET @SQL = N'SELECT * FROM tUsers WHERE Name = @userID AND PwdHash = @pwdHash'

        IF @OptionalParam1 IS NOT NULL        
            BEGIN        
                SET @SQL = @SQL + N' AND AnotherField = @OptionalParam1'    
            END        

        EXEC sp_executesql @SQL,        
            N'@userID varchar(20),
            @pwdHash varchar(20),
            @optionalParam1 NVARCHAR(50)'
            ,@userID = @userID
            ,@pwdHash = @pwdHash
            ,@optionalParam1 = @optionalParam1
    END 
```

**重新，为什么是`WHERE (@x IS NULL OR @x = Column)`一个坏主意？**

（来自我下面的评论）

尽管“可选参数”模式在小表上使用时可以很好地作为“瑞士军刀”查询可选过滤器的多种排列，但不幸的是，对于大表，这会导致针对所有过滤器排列的单个查询计划查询，由于[参数嗅探问题](https://www.brentozar.com/blitzcache/parameter-sniffing/)，这可能导致可选参数的某些排列的查询性能不佳。如果可能，您应该完全消除冗余过滤器。

**回复：为什么在谓词中应用函数是个坏主意**

例如

```
WHERE SomeFunction(Column) = @someParameter 
```

在谓词中使用函数经常会取消 RDBMS 对索引的使用（[“non-sargable”](https://stackoverflow.com/questions/799584/what-makes-a-sql-statement-sargable)）。

在这种情况下，`RTRIM`是不必要的，因为 Sql server[在比较过程中会](https://stackoverflow.com/questions/4166159/sql-where-clause-matching-values-with-trailing-spaces)[忽略](https://support.microsoft.com/en-za/kb/316626)尾随空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T13:18:14.170

您可以将您的过程作为字符串，并发送一个带有条件、连接和执行的字符串。

```
ALTER PROCEDURE [dbo].[PROC001] @userID varchar(20), @password varchar(20), @WhereToAdd varchar(MAX) AS 

exec ('SELECT * FROM tUsers WHERE RTRIM(Name) = @userID AND RTRIM(Password) = @password AND ' + @WhereToAdd) 
```

# javascript - chrome.tabs.sendRequest：“端口错误：无法建立连接。接收端不存在。”

> ID：11329828
> 
> 赞同：1
> 
> 时间：2012-07-04T13:12:59.027
> 
> 标签：javascript, google-chrome-extension

我正在开发一个 Google Chrome 扩展程序，它会产生一个我无法修复的错误。

我的 manifest.json 看起来像这样：

```
{
    "name": "my extension",
    "version": "1.0",
    "background_page": "background.html",
    "permissions": [
        "tabs",
        "<all_urls>"
    ],
    "content_scripts": [
        {
            "matches": ["<all_urls>"],
            "js": ["content.js"],
            "all_frames": true
        }
    ]
} 
```

background.html 尝试与 content.js 对话：

```
<script>
chrome.tabs.onUpdated.addListener
(
    function(tabId, changeInfo) 
    { 
        chrome.tabs.sendRequest(tabId, {action : 'getMyValue'}, function(output) {
            console.log(output);
        });
    }
);
</script> 
```

最后，content.js：

```
chrome.extension.onRequest.addListener(function(request, sender, callback)
{
    if (request.action == 'getMyValue')
    {    
        callback('test');
    }
}); 
```

开发者工具控制台打印：“**端口错误：无法建立连接。接收端不存在。** ”在第 232 行的“miscellaneous_bindings”中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:52:28.463

[`chrome.tabs.onUpdated`](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated)选项卡更新时运行。还包括开发工具、chrome（扩展）页面等。要消除错误，您必须过滤无法访问的 URL。

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo) {
    // Example: allow http:, https: and file:
    if (changeInfo.status === 'complete' &&
       /^(https?|file):/.test(changeInfo.url)) {
        chrome.tabs.sendRequest(tabId, {action: 'getMyValue'}, function(output) {
            console.log(output);
        });
    }
}); 
```

# php - 使用 .htaccess 排除奇怪的页面

> ID：11329834
> 
> 赞同：0
> 
> 时间：2012-07-04T13:13:34.017
> 
> 标签：php, .htaccess, url

我的网站上发生了一个奇怪的情况，谷歌认为某些 php 页面是其他 php 页面的子级。例如，我在谷歌网站管理员工具中出现错误，显示如下页面：[http://domain.com/page1.php/page5.php](http://domain.com/page1.php/page5.php)。page1.php 和 page5.php 都存在于网站上，但我不明白为什么 google 认为应该将一个连接到另一个。

浏览到这样的链接将加载 page1.php，但不正确。我的目标是使用 .htaccess （或其他建议）来简单地重定向到第一页，如果后面有其他页面。我是否正确地考虑了这个问题，任何人都可以提供建议来帮助我解决这个问题吗？谢谢！

更新：我的 .htaccess 文件中唯一的几行是从以前的文件夹结构重定向到单个 php 文件，但这已经存在至少一年了。例如：

`RedirectMatch 301 ^/widgets/?$ http://firesage.com/widgets.php`

Update2：我刚刚在网站管理员工具中发现了这个“软 404”错误：[http](http://domain.com/page2.php/include/include/lookup.php?id=22) ://domain.com/page2.php/include/include/lookup.php?id=22 。首先，我通过 robots.txt 排除了包含文件夹。并且包含文件夹在 url 中列出两次的事实非常值得怀疑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:45:44.680

一般来说，您可以使用`.htaccess`重定向 Google，但我宁愿建议您找到 Google 看到这些“错误”链接的原因（s. Jeroen 对您的问题的评论）。这是`.htaccess`开始的，直到你找到原因。

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /
Options +FollowSymLinks

# every page on its own
RewriteRule ^page1.php/(.*)$ /page1.php [R=301,L]
RewriteRule ^page2.php/(.*)$ /page2.php [R=301,L]
# or in general maybe the following to replace all of the above, if you think it'll fit
# RewriteRule ^([^/.]+)\.php/(.*)$ /$1.php [R=301,L]

</IfModule> 
```

**更新**
如果您还需要传递任何可能的`GET`参数，只需添加`QSA`标志，使其变为`[R=301,L,QSA]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:53:29.190

寻找链接`page1.php/`而不是`page1.php`.

如果 google（或浏览器）跟随指向 的链接`page1.php/`，网络服务器将提供“正确”文件`page1.php`，但 google 会认为这`page1.php`是一个目录，因此解释相对链接（至`page2.php`），就像它们从“目录”中的*索引文件*`page1.php`开始一样.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:20:50.200

我根本不是 .htaccess 方面的专家，但您的重定向规则可能很混乱。要进行重定向，只需在 .htaccess 中使用它：

```
RewriteEngine On
RewriteRule ^some regex$ http://yourdomain.com/page1.php [L] 
```

你的 .htaccess 看起来像这样吗？你能用它更新你的问题吗？

# magento - 如何扩展 Magento 核心模块块（在不编辑核心的情况下修复 Magento 错误）

> ID：11329840
> 
> 赞同：0
> 
> 时间：2012-07-04T13:14:13.840
> 
> 标签：magento, grid, widget, block, adminhtml

到目前为止我所拥有的：

etc/modules/BugFix_MageAdminhtmlBlockWidgetGrid.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <BugFix_MageAdminhtmlBlockWidgetGrid>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Adminhtml />
            </depends>
        </BugFix_MageAdminhtmlBlockWidgetGrid>
    </modules>
</config> 
```

app/local/BugFix/MageAdminhtmlBlockWidgetGrid/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <BugFix_MageAdminhtmlBlockWidgetGrid>
            <version>1.0.0</version>
        </BugFix_MageAdminhtmlBlockWidgetGrid>
    </modules>
    <global>
        <blocks>
            <mageadminhtmlblockwidgetgrid>
                <class>BugFix_MageAdminhtmlBlockWidgetGrid_Block</class>
            </mageadminhtmlblockwidgetgrid>
            <adminhtml>
                <rewrite>
                    <widget_grid>BugFix_MageAdminhtmlBlockWidgetGrid_Block_Widget_Grid</widget_grid>
                </rewrite>
            </adminhtml>
        </blocks>
    </global>
</config> 
```

app/local/BugFix/MageAdminhtmlBlockWidgetGrid/Block/Widget/Grid.php

```
<?php

class BugFix_MageAdminhtmlBlockWidgetGrid_Block_Widget_Grid extends Mage_Adminhtml_Block_Widget_Grid
{
    public function getRowUrl($item)
    {
        $res = parent::getRowUrl($item);
        return ($res ? $res : '#');
    }
} 
```

不知何故，上面的代码不起作用。应该是很简单的...

作为一个模块的错误修复适用于 Magento 1.4（并由 Magento 在 1.7 中修复）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:27:52.577

子类化时重写不起作用。在这种情况下，grid classes subclass ( `extends`) 是 adminhtml grid 小部件，这意味着用于该类的名称是原始名称，而不是配置中的重写名称。

POC：

```
<?php
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors',1);

include 'app/Mage.php';
Mage::setIsDeveloperMode(true);
Mage::app();

$block = Mage::app()->getLayout()->createBlock('adminhtml/widget_grid');
echo get_class($block);
//or echo Mage::getConfig()->getBlockClassName('adminhtml/widget_grid');

$block = new Mage_Adminhtml_Block_Widget_Grid;
echo get_class($block); 
```

In this case you will need to copy the path and file from the core codepool to the local codepool and change the definition in there. Because of the include path precedence the definition from the local codepool will be used. You must account for this in an upgrade, though.

# xamarin.ios - 处理子 UIViewController

> ID：11329842
> 
> 赞同：2
> 
> 时间：2012-07-04T13:14:18.103
> 
> 标签：xamarin.ios

我正在实现我自己的导航控制器。从导航控制器中删除子 UIViewController 后，是否必须手动处理它？

我担心内存消耗，但处置子控制器可能会导致不可预知的应用程序崩溃，具体取决于调用 Close() 方法的位置。例如，如果它是从孩子的按钮事件处理程序调用的，则保证应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:31:19.223

当我收到内存警告时，我使用了这段代码：

应用委托：

```
public override void ReceiveMemoryWarning(UIApplication application)
    {
        System.GC.Collect();
    } 
```

# r - 如何增加或减少传说的等级？

> ID：11329845
> 
> 赞同：0
> 
> 时间：2012-07-04T13:14:26.787
> 
> 标签：r

下面给出的代码将绘制二进制文件的图像。问题是大多数值都在 1 到 3000 之间，但图例的类是这样的：0 到 2000 和 2000 到 4000 和 4000 到 6000。所以所有低于 2000 的值具有相同的颜色。如何增加类？例如：1 到 300 然后 300 到 600 然后 600 到 900 等等......

```
library(fields)
t<- file("C:annual_Prc2000_without999_1.img","rb")
 e=readBin(t, double(), size=4,n=720*360, signed=TRUE)
 y<-matrix(data=e,ncol=360,nrow=720)
image.plot(t(t(y)),main="Annual prcipitation_2000 _mm/yr ", add = FALSE,
 legend.shrink = 0.9, legend.width = 1.2, legend.mar = NULL, graphics.reset = FALSE,
horizontal = FALSE, bigplot = NULL, smallplot = NULL, legend.only = FALSE, lab.breaks=NULL,
 axis.args=NULL, ylim=c(1,0)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:08:31.247

这是一个从帮助页面略微修改的工作示例：

```
 x<- 1:10; y<- 1:15; z<- outer( x,y,"+") 
 brk<- quantile( c(z), probs=(0:10)/10 )
 image.plot(x,y,z, breaks=brk, col=rainbow(10)) 
```

# windows - desktop.ini 用于驱动器的根目录

> ID：11329846
> 
> 赞同：1
> 
> 时间：2012-07-04T13:14:39.133
> 
> 标签：windows, shell-extensions, desktop.ini

在 Windows 中，您可以通过设置 System 或 Readonly 属性并在其中放置适当的 with来[将 Shell 命名空间扩展绑定到文件夹](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144096%28v=vs.85%29.aspx#file)。`desktop.ini``CLSID`

但是，我看不到将`system`属性设置*为驱动器根目录的方法*。

这是否意味着我做不到，或者我错过了一些明显的东西？

# android - 如何在android中显示所有共享选项？

> ID：11329851
> 
> 赞同：3
> 
> 时间：2012-07-04T13:14:51.340
> 
> 标签：android, share

我正在开发一个 Android 应用程序，并希望通过打开
设备中可用的所有共享选项来共享一些文本。但目前该列表显示的是电子邮件、蓝牙、Gmail 和消息传递。

BBC 新闻等其他应用程序在 Bump、Picasa 等同一设备上显示了更多选项。如何显示所有可用选项并处理它们？

我正在使用这个：

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.setType("text/vcard");
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,mailBody);            
startActivity(Intent.createChooser(sharingIntent,"Share using")); 
```

并在清单中

```
 <intent-filter>
  <action android:name="android.intent.action.SEND" />
  <category android:name="android.intent.category.DEFAULT" />
  <data android:mimeType="text/plain"/>
  </intent-filter> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T13:18:30.283

这是因为您只显示注册处理的意图`text/vcard`而不是使用

```
sharingIntent.setType("text/plain"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T05:57:49.147

```
Intent i=new Intent(android.content.Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(android.content.Intent.EXTRA_SUBJECT,"Subject test");
i.putExtra(android.content.Intent.EXTRA_TEXT, "extra text that you want to put");
startActivity(Intent.createChooser(i,"Share via")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T06:01:20.573

对于共享文本，仅使用sharingIntent.setType("text/plain"); 而对于 sgaring 图片使用sharingIntent.setType("image/*");

# vim - 如何确定一段代码在 VIM 中属于哪个颜色组

> ID：11329852
> 
> 赞同：0
> 
> 时间：2012-07-04T13:14:55.707
> 
> 标签：vim, syntax-highlighting

有没有办法确定一段代码属于哪个颜色组？我正在努力让我的配色方案与各种文件类型很好地配合使用。有一个命令可以在当前光标位置打印出文本的当前颜色组会很方便。

例如 ([X] 标记光标位置：

```
def foobar
  @some[X]thing = "foo"
end 
```

会打印出“标识符”（如果我是对的那个;-)）这样的事情可能吗？或者您有任何其他建议如何“解决”识别要使用的正确颜色组的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:37:53.500

请参阅此处：[找出特定关键字/符号在 vim 中属于哪个突出显示组](https://stackoverflow.com/questions/1467438/find-out-to-which-highlight-group-a-particular-keyword-symbol-belongs-in-vim)

此外，甚至还有一个现成的插件：[SyntaxAttr.vim](http://www.vim.org/scripts/script.php?script_id=383)

# html - 圆角黑客 - 这里做错了什么？

> ID：11329856
> 
> 赞同：0
> 
> 时间：2012-07-04T13:15:06.880
> 
> 标签：html, css, internet-explorer

我已经实现了一个 .htc 行为来尝试从这里获得 IE-6-8 的圆角：http: [//jonraasch.com/blog/css-rounded-corners-in-all-browsers](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)

即使遵循它推荐的所有小 IE 方法，似乎也无法让它工作。

```
#callbox {
position:relative;
background-image:url(images/callbox_bg.png);
width:360px;
height:75px;
float:right;
padding:10px 20px 0px 10px;
font-size:26px;

display:block;

border-radius: 15px;
-webkit-border-radius: 15px;
-moz-border-radius: 15px;

behavior: url(/css/border-radius.htc);
zoom:1; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:20:33.720

在他们的例子中，他们有`border-radius: 15px;` *after* `behavior`。看看这是否有效或你。还要查看 IE 的注意事项列表，确保其中不适用于您的布局。

```
.rounded-corners {
    behavior: url(/css/border-radius.htc);
    border-radius: 20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:25:53.103

在我看来没问题，你确定 htc 文件路径是正确的，即它可以通过 访问`http://example.com/css/boarder-radius.htc`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T13:41:46.223

通常在 CSS 中，url 路径是相对于文档的。使用 .htc 文件虽然它需要相对于站点根目录。

采取以下站点结构：

```
Root
   - images/
      - image.png
   - css/
      - layout.css
- index.html
- border-radius.htc 
```

要在您的 layout.css 文件中使用图像，您的 url 将是`('../images/image.png')` 要使用 .htc 文件，它将是`('../border-radius.htc')`

此外（这可能不相关），但要让 CSS3PIE.htc 正常工作，您需要添加 position: relative 到样式。

# python - 具有用户定义哈希的对象

> ID：11329860
> 
> 赞同：0
> 
> 时间：2012-07-04T13:15:24.593
> 
> 标签：python, oop

假设我有一个 A 类，它有一个重写的哈希方法，它返回一些用户定义的整数：

```
class A:
   def __init__(self,hash):
      self.hash = hash

   def __hash__(self):
      return self.hash

   def __cmp__(self,other):
      return cmp(self.hash,other.hash) 
```

现在，在任何给定的时间点，我都希望只有一个具有相同哈希的对象，所以我维护一个`s`包含 A 类对象的集合。我的问题如下：

```
s = {A(1234)} 
a = A(1234)

if a in s:
   # then assign the corresponding object in set s to a 
```

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:20:05.413

不要使用集合，使用字典（从某种意义上说，它也是一个集合）。

```
objects = {}
a = A(1234)
if a.hash in objects:
    a = objects[a.hash]
objects[a.hash] = a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:20:20.497

我会使用作为类变量实现的单例：

```
>>> class A:
    HASH = 0
    def __init__(self):
        self.hash = A.HASH
        A.HASH += 1
    def __hash__(self):
        return self.hash
    def __cmp__(self,other):
        return cmp(self.hash, other.hash)

>>> a = A()
>>> a.__hash__()
0
>>> a2 = A()
>>> a2.__hash__()
1
>>> 
```

由于每次实例化一个新对象时它都会增加，因此您肯定不会有两倍的相同值（尽管这可能不是线程安全的）。

**编辑**：如果计算哈希值，则此解决方案无效，因为它任意从 0 开始...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:17:15.773

I used the following mechanism to make sure that no duplicate object was ever created. This is a mixture of Emmanuel's and Jordan's answers.

```
class A(object):
   __singletons__ = dict()

   def __new__(cls,hash):
      if hash not in cls.__singletons__.keys():
         cls.__singletons__[hash] = super(A,cls).__new__(cls)

      return cls.__singletons__[hash]

   def __init__(self,hash):
      self.hash = hash

   def __hash__(self):
      return self.hash

   def __cmp__(self,other):
      return cmp(self.hash,other.hash) 
```

# facebook-javascript-sdk - 同一页面中有 2 个 facebook 连接按钮

> ID：11329862
> 
> 赞同：0
> 
> 时间：2012-07-04T13:15:30.797
> 
> 标签：facebook-javascript-sdk

在我的网站中，我有 2 个 facebook 连接按钮，它们具有以下代码；

```
<div id="fb-root"></div>
            {literal}
            <script>             

              window.fbAsyncInit = function() {
                FB.init({
                  appId: {/literal}{$fb_app_id}{literal},
                  cookie: true,
                  xfbml:  true,
                  oauth:  true
                });                            

                FB.Event.subscribe('auth.login', function(resp) {
                    window.location.reload();
                });    

               };
               (function() {
                var e = document.createElement('script'); e.async = false;
                e.src = document.location.protocol +
                  '//connect.facebook.net/en_US/all.js';
                document.getElementById('fb-root').appendChild(e);
               }());
            </script>
            {/literal}

            <a class="facebook-connect" href="#" onclick="fb_login();return false;">facebook connect</a>    

            {literal}
            <script>
            function fb_login(){                                                      
              FB.login( function( response) {
                    if( response.authResponse){
                         // dont do anything, it will reload the page
                         window.location.reload();
                    }
                    else // user cancelled facebook connect
                    {
                        return false;
                    }
                }, {scope : 'email, user_about_me, user_birthday, user_location, friends_about_me, publish_actions, offline_access '});   

        } 
```

在那之后，我有一个相同的 facebook 连接按钮，但是 didderent 类；

`<a class="facebook" href="" >facebook connect</a>`

但是，在第二节课中，我不想让`FB.init`加载 js-sdk 异步。所以，我使用了这段代码；

```
$('.facebook').click( function(){

        $('.facebook-connect').click();
}); 
```

但是，单击`.facebook`按钮后，会出现对话框，facebook 会询问登录凭据（电子邮件/密码）。之后，对话框变为空白。有任何想法吗 ？

# javascript - 设置 JavaScript 以调用具有不同参数的函数

> ID：11329865
> 
> 赞同：3
> 
> 时间：2012-07-04T13:15:42.263
> 
> 标签：javascript, extjs, extjs4, extjs-mvc, extjs4.1

我有以下 ExtJS 控制器代码：

```
init: function() {
    this.control({
        '#menuitem-A': { click: this.handlerA },
        '#menuitem-B': { click: this.handlerB },
    });
}, 
```

和以下事件处理程序：

```
commonFunc: function(param1, param2) {
    // do something with param1 and param2 in here
},

handlerA: function(button, event) {
    this.commonFunc('param-A1', 'param-A2');
},

handlerB: function(button, event) {
    this.commonFunc('param-B1', 'param-B2');
}, 
```

**问题：**当前代码是多余的：`handlerA`只是`handlerB`用`commonFunc`不同的参数调用

**问题：**对于不同的事件处理程序， 我想删除`handlerA`and`handlerB`而不是`call`或上面带有任意参数`apply`的通用函数和函数。是否可以？`commonFunc``handlerA``handlerB`

例子：

```
init: function() {
    this.control({
        '#menuitem-A': { click: /*commonFunc with ['param-A1', 'param-A2']*/ },
        '#menuitem-B': { click: /*commonFunc with ['param-B1', 'param-B2']*/ },
    });
}, 
```

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T13:20:47.870

这个怎么样：

```
init: function() {
    this.control({
        '#menuitem-A': { 
            click: function(button, event){
                this.commonFunc('param-A1', 'param-A2');
            }
        },
        '#menuitem-B': { 
            click: function(button, event){
                this.commonFunc('param-B1', 'param-B2');
            }
        }
    });
}, 
```

# html - 我不能在这种情况下使用 :first-child 选择器吗？

> ID：11329879
> 
> 赞同：1
> 
> 时间：2012-07-04T13:16:41.187
> 
> 标签：html, css, css-selectors

我的[代码](http://jsfiddle.net/NdYuD/)：

```
<div class="allegati-item">
    <div class="allegati-titolo">Download</div>
    <a class="allegati-link" href="/documenti/DocumentoTest.pdf">Link1</a>
    <a class="allegati-link" href="/documenti/DocumentoTest.pdf">Link2</a>
</div>

.allegati-link
{
    border-top:1px solid #FF0000;
    display:block;
    margin-bottom:4px;
}

.allegati-item a.allegati-link:first-child
{
    border:0;
}​ 
```

我想删除第一个`allegati-link`元素中的边框，但是由于在它之前有一个 div，在里面`allegati-item`，似乎这不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:18:25.987

你可以试试这个：

```
.allegati-item .allegati-titolo + a.allegati-link{ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T13:19:45.510

改为使用`:first-of-type`或

```
.allegati-item > .allegati-titolo + a 
```

最后一个版本具有更好的浏览器支持（从 IE7 开始），而第一个版本对您的标记的依赖程度较低。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T13:24:56.877

假设这`:first-of-type`可能是最好的选择，这是不支持该伪类的浏览器的另一种选择

```
.allegati-link { border: 0; }
.allegati-link + .allegati-link { border-top: ...} 
```

这样做你只会从第一个链接中删除边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:37:50.987

你也可以这样

```
$(".allegati-titolo").next().attr("style", "border-top:0px; display:block; margin-bottom:4px;"); 
```

这将首先选择具有 class="allegati-titolo" 的 div 的下一个元素，然后将样式应用于第一个链接。

# mp3 - 在 Windows 和软件中具有不同比特率的 Mp3

> ID：11329880
> 
> 赞同：0
> 
> 时间：2012-07-04T13:16:48.943
> 
> 标签：mp3

在搜索我的 Mp3 库时，我注意到一些 Mp3 的比特率高于 192kbps。我激活了一个编码软件并将这些 Mp3 拖放到其中，以便我可以将它们编码为 192kbps。这样做之后，软件向我显示这些 Mp3 的 bot 速率介于 34kbps 和 112kbps 之间。在检查大小时，Mp3 大约为 8 到 10MB。有人可以解释这种差异，我该怎么办？

谢谢，

皮埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:01:55.823

MP3的一些概念

`MP3 file structure`

MP3 文件由一系列 MP3“帧”组成，每个帧都可以使用不同的比特率进行编码。因此，第一帧可能以 128kbps 编码，而下一帧可能是 192kbps。

`CBR and VBR MP3`

鉴于此，有两种类型的 MP3 文件
(a) 恒定比特率 (CBR) MP3 - 比特率在文件的整个持续时间内是相同的。
(b) 可变比特率 (VBR) MP3 - 比特率可能因文件中的 MP3 帧而异。

根据您的问题，您的文件看起来像可变比特率 MP3 文件。

`Average bit rate`

通过以下公式计算 MP3 文件的平均比特率 =（文件大小，以字节为单位 * 8）/（文件的持续时间，以秒为单位）。

`When to re-encode to reduce size of a MP3 file?`

使用此平均比特率，您可以决定是否值得重新编码。通常 128 kbps CBR 以合理的质量提供良好的压缩。

# f# - 使用 F# 的度量单位和统计模型

> ID：11329894
> 
> 赞同：1
> 
> 时间：2012-07-04T13:17:28.247
> 
> 标签：f#, units-of-measurement

对于统计模型，如果我想始终如一地使用度量单位，我需要在某处编码我拥有的数据数量。

```
type DataSet<[<Measure>] 'x, [<Measure>] 'y, [<Measure>] 'n>  = 
        DataSet of Matrixu<'n,'x> * Vectoru<'n,'y> 
```

然后我可以定义一个合并 2 个数据集的函数

```
static member (+) (a:DataSet<'x,'y,'n1>,b:DataSet<'x,'y,'n2>):DataSet<'x,'y,n>  = ... 
```

但我希望能够合并未知数量的不同大小的数据集。如何定义这样的功能？

天真的方法失败了，因为序列只有一种，所以我需要静态定义大小。

```
 static member merge (ar:DataSet<'x,'y, ??? > seq) : DataSet<'x,'y, 'n>  = 
        if seq.empty, etc...
        let   head = ar |> Seq.head
        let others = ar |> Seq.skip 1
        others |> Seq.fold (fun st el -> st + el) head 
```

或者我应该只添加特定的规则而不考虑数据的大小。这意味着在应用程序代码中添加自定义维度管理，这也很脏......并且首先破坏了拥有干净维度的点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:55:39.613

我认为您正在扩展计量单位的使用范围。根据我的经验，它们在物理学和类似领域（我猜是金融）非常有用，但仅此而已。我不相信他们可以处理静态容器的大小（例如 n×m 矩阵）。

你听说过依赖类型系统和[F*](http://research.microsoft.com/en-us/projects/fstar/)吗？我已经看到带有固定大小列表的示例，表明它可能适合这项工作。它仍然是微软的一个研究项目，可能不适合商业用途。

# css - GWT：更新 css 失败

> ID：11329896
> 
> 赞同：0
> 
> 时间：2012-07-04T13:17:42.443
> 
> 标签：css, gwt

我有一个奇怪的 GWT 问题，希望有人能帮助我。我使用复合组件开发了我的用户界面，并添加了一些手动 HTML 代码。此代码将使用 css 文件进行样式设置。

CSS 片段：

```
#twitterVis{
    position:relative;
    background-color:yellow;
    overflow:visible;
}

#emmVis{
    position:relative;
    background-color:yellow;
    overflow:visible;
} 
```

我将 css 存储在 war-folder 中，并将其包含在 *.gwt.xml 文件中。

当我尝试运行应用程序时，css 代码将与旧的 css 样式合并，这些样式的定义如下：

```
#emmVis{
    background-color:#888888;
    overflow:scroll;
    width:100%;
    height:95%
} 
```

您可以在文件中看到问题：war/applicationName/....cache.html：

```
#emmVis{background-color:yellow;width:100%;height:95%;background-color:#888;overflow:scroll;} 
```

或者在检查器中，使用 Chrome 时：

![在此处输入图像描述](../Images/794d5030bf03ad31948324965ca36b78.png)

我确定旧的 css 代码不再可用（我搜索了整个项目），我也

*   重新编译项目
*   删除了 *.cache.html 文件
*   清理并刷新了项目

但错误仍然相同。如果我用 GWT-Designer 打开我的界面，一切都很好。所以我认为，GWT 中的缓存存在问题。

有人有想法还是我应该将文件放在战争文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-21T09:18:28.763

我和你有同样的问题。清除浏览器缓存，在 Eclipse 中清理项目或重新编译对我不起作用。在我重命名 CSS 文件并更新 *.gwt.xml 文件中的引用后，CSS 文件中的更改已成功加载。

# forms - 忽略来自 bindFromRequest 的一些错误

> ID：11329900
> 
> 赞同：1
> 
> 时间：2012-07-04T13:17:51.617
> 
> 标签：forms, validation, playframework-2.0

我的表单上有一个名为“allergies”的特殊输入表单（选择多个），但如果我这样做，它会返回错误：

```
Form<Child> form = form(Child.class).bindFromRequest(); 
```

从我的服务器端，出现“无效值”错误。

为了让它几乎可以工作，我应该将我的字段重命名为“allergies.id”，但我无法更改它。

所以我想忽略这个字段的错误，并做了类似的事情：

```
form.field("allergies").errors().clear() 
```

但是，如果我做一个

```
if (form.hasErrors()) 
```

它返回 true，仅用于过敏。

我怎么能忽略过敏的验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:36:20.423

我不确定操纵列表是否非常聪明。一个更干净的方法是只绑定你想要的字段。`public Form<T> bind(Map<String,String> data, String... allowedFields) {`.

无论如何 form.field("allergies").errors().clear() 无法工作，因为您有一个错误映射，其中键 'allergies' 存在一个空列表。`form.errors().remove("allergies");`应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T22:42:33.200

您可以使用：

```
 form.discardErrors(); 
```

# python - 如何获得从 UTC 到给定时区的小时差？

> ID：11329904
> 
> 赞同：6
> 
> 时间：2012-07-04T13:18:12.060
> 
> 标签：python

有没有办法获得 UTC 和给定时区之间有多少小时的差异？

例如，UTC 和欧洲/阿姆斯特丹之间的差异是 +2 小时。

python中有什么东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T13:42:25.293

假设您有一个带时区的日期时间：

```
import datetime
import pytz

d = datetime.datetime(2012, 1, 1, 0, 0, 0, tzinfo=pytz.utc)
In [54]: d
Out[54]: datetime.datetime(2012, 1, 1, 0, 0, tzinfo=<UTC>) 
```

要将其转换为阿姆斯特丹时间，请使用：

```
ams = pytz.timezone('Europe/Amsterdam')

In [55]: d.astimezone(ams)
Out[55]: datetime.datetime(2012, 1, 1, 1, 0, tzinfo=<DstTzInfo 'Europe/Amsterdam' CET+1:00:00 STD>)

pst = timezone('US/Pacific')
In [118]: d.astimezone(pst)
Out[118]: datetime.datetime(2011, 12, 31, 16, 0, tzinfo=<DstTzInfo 'US/Pacific' PST-1 day, 16:00:00 STD>) 
```

如果我们有一个没有时区的日期时间（天真的日期时间），我们可以这样转换它：

```
dd = datetime.datetime(2012, 2, 2, 0, 0)
ams.localize(naive_dt).astimezone(pst)  # set it as 'ams' first, then convert to pst
Out[131]: datetime.datetime(2012, 2, 1, 15, 0, tzinfo=<DstTzInfo 'US/Pacific' PST-1 day, 16:00:00 STD>) 
```

要查看两个时区之间的差异：

```
In [137]: ams.utcoffset(datetime.datetime(2012,1,1))
Out[137]: datetime.timedelta(0, 3600)

In [138]: pst.utcoffset(datetime.datetime(2012,1,1))
Out[138]: datetime.timedelta(-1, 57600) 
```

所以根据UTC，ams是+1H，而pst是-8（-1天和+16H）

编辑：正如[文档](http://pytz.sourceforge.net/)中所解释的，这：

```
datetime(2002, 10, 27, 12, 0, 0, tzinfo=amsterdam) 
```

不管用。

# android - 在操作栏上的项目之间添加分隔线

> ID：11329911
> 
> 赞同：2
> 
> 时间：2012-07-04T13:18:32.327
> 
> 标签：android, android-actionbar

简单的问题，我只是找不到明确的答案。

我在下拉列表中显示了几个菜单选项（项目被赋予 showAsAction 值：collapseActionView），其余操作项显示为图标（项目被赋予 showAsAction 值：总是）。

我想在始终可见的图标和溢出菜单下拉按钮之间画一个分隔线。

如果您查看此屏幕抓取的右上角，您可以看到它可以完成 - 下拉图标和其他图标之间出现分隔线： [http ://www.droid-life.com/wp-content/uploads/2011 /10/screen_20111023_0800.png](http://www.droid-life.com/wp-content/uploads/2011/10/screen_20111023_0800.png)

我目前从 xml 文件扩充我的菜单，如下所述：http: [//developer.android.com/guide/topics/ui/actionbar.html#ActionItems](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)

提前致谢

# post - file_get_contents - 授权和发送数据

> ID：11329912
> 
> 赞同：0
> 
> 时间：2012-07-04T13:18:37.240
> 
> 标签：post, get, authorization, file-get-contents

如何将 GET / POST 数据发送到需要使用 file_get_contents 授权的服务器？

我知道如何发送 GET/POST 数据并在 file_get_contents 中进行授权，但不知道将这些合并为一个。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:23:34.093

是的，这是可能的，类似于使用的协议中（重新）设置选项的上下文：

```
function http_post($url, $data) {
$serialized_data = http_build_query($data);
$options = array(
    'http' => array(
        'method' => 'POST',
        'header' => "Content-type: application/x-www-form-urlencoded\r\n" . 'Content-Length: ' . strlen($serialized_data) . "\r\n",
        'content' => $serialized_data
    )
);
$contexte = stream_context_create($options);
return file_get_contents($url, 0, $contexte); 
```

}

$content = http_post('http://domain/mypage', array('var1' => 'val1', /* ... */, 'varN' => 'valN'));

你想要更多的解释吗？

# sql - 使用 sql server 中的 xml.nodes 函数创建临时表

> ID：11329913
> 
> 赞同：0
> 
> 时间：2012-07-04T13:18:41.473
> 
> 标签：sql, sql-server

我有下面的xml结构。我正在尝试使用返回结果创建一个临时表，但我做不到。

```
declare @xml xml
set @xml = '
<Root>
  <ValueHolder>
     <Value>3.00</Value>
     <IsNoteDirty>false</IsNoteDirty>
     <Timestamp>
        <StampType>Month</StampType>
        <Stamp>3</Stamp>
        <Year>2007</Year>
     </Timestamp>
     </ValueHolder>
  <ValueHolder>
     <Value>23.00</Value>
     <IsNoteDirty>false</IsNoteDirty>
     <Timestamp>
        <StampType>Month</StampType>
        <Stamp>3</Stamp>
        <Year>2007</Year>
     </Timestamp>
     </ValueHolder>
</Root>'

select Tab.Col.value('(Value)[1]','MONEY') 
          from @xml.nodes('/Root/ValueHolder') Tab(Col) 
```

这段代码完美无缺。我想要做的是，把这个结果放到一个临时表中。我试过这个，但它不起作用

```
select * into #TempTable
    from (select Tab.Col.value('(Value)[1]','MONEY') 
          from @xml.nodes('/Root/ValueHolder') Tab(Col)) 
```

错误信息是

> 消息 102，级别 15，状态 1，第 26 行 ')' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:32:38.670

尝试这样的事情：

```
select MoneyValue = Tab.Col.value('(Value)[1]', 'MONEY') 
into #TempTable
from @xml.nodes('/Root/ValueHolder') Tab(Col) 
```

如果我这样做，效果很好。

# python - 从自身内部重新启动 python-script

> ID：11329917
> 
> 赞同：58
> 
> 时间：2012-07-04T13:19:22.920
> 
> 标签：python

我有一个基于 python 的 GTK 应用程序，它加载了几个模块。它从（linux）终端运行，如下所示：

`./myscript.py --some-flag setting`

用户可以从程序中下载（使用 Git）较新的版本。如果存在/已下载，则会出现一个按钮，我希望使用新编译的内容（包括依赖项/导入）重新启动程序。最好它还使用 的内容重新启动它，`sys.argv`以保持所有标志不变。

所以我找不到/需要的是一个很好的重启过程，它会杀死程序的当前实例并使用相同的参数启动一个新实例。

该解决方案最好也适用于 Windows 和 Mac，但这不是必需的。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-04T13:22:16.723

您正在寻找[`os.exec*()`](http://docs.python.org/library/os.html#os.execl)命令系列。

要使用与最初运行的命令行参数完全相同的命令行参数重新启动当前程序，可以使用以下命令：

```
os.execv(sys.argv[0], sys.argv) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-10-25T19:37:03.293

我认为这是一个更详细的答案，因为有时您最终可能会打开太多打开的文件对象和描述符，这可能会导致内存问题或与网络设备的并发连接。

```
import os
import sys
import psutil
import logging

def restart_program():
    """Restarts the current program, with file objects and descriptors
       cleanup
    """

    try:
        p = psutil.Process(os.getpid())
        for handler in p.get_open_files() + p.connections():
            os.close(handler.fd)
    except Exception, e:
        logging.error(e)

    python = sys.executable
    os.execl(python, python, *sys.argv) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-22T15:43:29.600

更新 - 以上答案的一些示例以供将来参考

我有`runme.sh`

```
#!/bin/bash
kill -9 server.py
python /home/sun/workspace/c/src/server.py & 
```

我有`server.py`我需要重新启动应用程序本身的地方，所以我有：

```
os.system('runme.sh') 
```

但这并没有通过遵循runme.sh重新启动应用程序本身，所以当我使用这种方式时：

```
os.execl('runme.sh', '') 
```

然后我能够重新启动自己

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-02T06:54:19.893

我知道这个解决方案在技术上并不是你所要求的，但如果你想 100% 确定你释放了所有东西或者不想依赖依赖项，你可以从另一个循环中运行脚本：

```
import os, time

while 1:
    os.system("python main.py")
    print "Restarting..."
    time.sleep(0.2) # 200ms to CTR+C twice 
```

然后你可以重启 main.py，就像这样：

```
quit() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-01T20:06:02.167

对我来说，这部分就像一个魅力：

```
def restart():
    import sys
    print("argv was",sys.argv)
    print("sys.executable was", sys.executable)
    print("restart now")

    import os
    os.execv(sys.executable, ['python'] + sys.argv) 
```

我在[这里](https://gist.github.com/plieningerweb/39e47584337a516f56da105365a2e4c6)得到它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-27T21:12:40.357

在 Windows 上工作（没有参数）

```
os.startfile(__file__)
sys.exit() 
```

或者

```
os.startfile(sys.argv[0])
sys.exit() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-30T16:46:30.327

我对#s3niOr 的代码做了一点改进。

在我的情况下，python文件的路径中有空格。因此，通过添加适当的格式，可以解决问题。

请注意，在我的情况下，我的 python 文件没有其他参数。因此，如果您确实有其他论点，则必须处理它们。

这解决了重新启动路径中有空格的 python 脚本的问题：

```
import os
import sys
import psutil
import logging

def restart_program():
    """Restarts the current program, with file objects and descriptors
       cleanup
    """

    try:
        p = psutil.Process(os.getpid())
        for handler in p.get_open_files() + p.connections():
            os.close(handler.fd)
    except Exception, e:
        logging.error(e)

    python = sys.executable
    os.execl(python, python, "\"{}\"".format(sys.argv[0])) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-23T08:55:56.200

我一直在寻找解决方案，但没有发现任何适用于任何堆栈溢出帖子的内容。也许有些答案太过时了，例如 os.system 已被 subprocess 取代。我在 linux lubuntu 17.10 上，使用 python 3。

两种方法对我有用。两者都打开一个新的 shell 窗口并在其中运行 main.py 脚本，然后关闭旧的。

**1\. 使用带有 .sh 脚本的 main.py。**

改编自@YumYumYum 方法。我不需要 kill 选项，（尽管它并没有按名称杀死我的 python 进程，我必须`killall python3`在测试时使用它来实现它）。

我使用 lxterminal，但您可能可以使用任何一个。

在名为 restart.sh 的文件中（chmod +x 使其可执行）

```
#!/bin/bash

lxterminal -e python3 /home/my/folder/main.py & 
```

然后在 main.py 中，当你需要调用它时使用它

```
import subprocess

subprocess.run('/home/my/folder/restart.sh', shell=True)
quit() 
```

**2\. 从 main.py 中**

改编自 @Stuffe 方法。这个在 main.py 脚本内部，打开一个新的 shell 窗口，然后运行新脚本，然后退出旧脚本。我不确定它是否需要 time.sleep 延迟，但我还是使用了它。

```
import subprocess, time

cmd = 'python3 /home/my/folder/main.py'
subprocess.run('lxterminal -e ' + cmd, shell=True)   
time.sleep(0.2)
quit() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-11T07:57:31.803

受@YumYumYum 启发并使用restart.sh 和os.execl 解决了问题

```
restart.sh

#!/bin/bash/
pkill -f main.py
python main.py 
```

将此添加到您的 main.py

```
os.excel("restart.sh","") 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-15T02:18:51.360

我正在使用它为用户提供在控制台中重新启动脚本的选项。希望能有所帮助。

```
def close_restart(self,csvfile):

    choice = input('Do you want to restart the program? Please select \'Y\' if you would like to restart.')

    if choice == 'Y' or choice == 'y':
        print('Restarting now...')
        os.execl(sys.executable, sys.executable, *sys.argv)

    else:
        print('Thank you for using the tool!')
        print('The program will close in 10s...')
        time.sleep(10) 
```

所以用户可以输入一个选项'Y/N'来重新启动程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-24T18:56:41.033

旧的答案利用`exec`这很好，但从长远来看是不可扩展的。还有一种主/从进程关系或后台守护程序/服务的方法，它们将监视更改，但主要是特定于操作系统的，甚至在同一操作系统系列（init.d vs systemd vs）之间也不同。

通过使用引导技术和简单`subprocess.Popen()`调用也有一个中间立场，因此假设启动原始程序的用户有权运行可执行文件（例如`/usr/bin/python`），由于使用完全相同的可执行文件，也应该在没有任何权限错误的情况下工作。引导，因为它是创建和调用重启程序的主程序，也就是在初始启动后通过自己的引导程序拉动自己。

所以一个简单的程序（重新）启动器可以这样写，如其他答案中所写：

```
from subprocess import Popen
from time import sleep

def main():
    sleep(<delay>)
    Popen([<executable path>, *<list of argv>], cwd=<cwd path>)

if __name__ == "__main__":
    main() 
```

根据您的需要，您可能希望在之后进行一些清理，例如删除（重新）启动文件。

```
import sys
from os import remove
from os.path import realpath
from subprocess import Popen
from time import sleep

def start():
    sleep(<delay>)
    # unpack -----------------v
    Popen([<executable path>, *<list of argv>], cwd=<cwd path>)

def cleanup():
    remove(realpath(sys.argv[0]))

def main():
    start()
    cleanup()

if __name__ == "__main__":
    main() 
```

该文件将从您的主程序中调用。但是，您的主程序可能有异常，利用`sys.exit()`，可能被操作系统信号杀死等等。*Python 提供了多个钩子，如何在这样的事件之后*无缝地做某事，其中一个是由[`atexit`](https://docs.python.org/3/library/atexit.html)模块实现的。`atexit`也不关心 Python 异常和一些信号 ( `SIGINT`) （用于进一步改进检查[`signal`](https://docs.python.org/3/library/signal.html)模块），因此在实现自己的信号处理程序之前这是一个合理的选择。

这允许您注册一个将在程序停止后执行的函数。该函数可以是 Python 中的任何内容，因此它也可以写入文件。

文件内容本身可以使用 F 字符串、[`format()`](https://docs.python.org/3.8/library/functions.html#format).、Jinja 进行模板化，甚至可以将其保留在主程序之外 ( `restartable.py`)，甚至可以通过 CLI + 提供值，[`argparse`](https://docs.python.org/3/library/argparse.html)例如`python restarter.py --exe <path> --argv <one> [--argv <two>, ...], --cwd <cwd>`. 一切都取决于用例以及在实现操作系统服务/守护程序或主/从进程生成+监视之前您希望将其扩展多远。

这是一个示例：

```
# restartable.py
import sys
from atexit import register

# getcwd() is necessary if you want to prevent issues
# with implicitly changing working directory by a mistake
from os import getpid, getcwd
from os.path import exists, realpath, join, dirname
from subprocess import Popen
from tempfile import NamedTemporaryFile

RESTARTER = """
import sys
from atexit import register
from os import remove
from os.path import realpath
from subprocess import Popen
from time import sleep

def start():
    # unnecessary, but may provide enough breathing space
    # for the previous process to shut down correctly
    # alternatively, watch for a file/file contents
    # or utilize a socket
    sleep({delay})
    # repr() on strings, list is passed as is to unpack it properly
    # will fail on custom objects / serialization
    Popen([{exe!r}, *{argv}], cwd={cwd!r})

def cleanup():
    # remove itself because it's always created
    # by the main program on exit
    remove(realpath(sys.argv[0]))

def main():
    # the register() call can be encapsulated in a condition
    # so it restarts only in some cases
    register(cleanup)
    start()

if __name__ == "__main__":
    main()
""".lstrip("\n")

def restart():
    with NamedTemporaryFile(mode="w", delete=False) as file:
        file.write(RESTARTER.format(
            delay=5,  # 5s until restart
            exe=sys.executable,
            argv=sys.argv,
            cwd=getcwd()
        ))

        # call the restarting program by the Python executable
        # which started the main program
        Popen([sys.executable, file.name])

def main():
    # create a "norestart.txt" in the folder of "restartable.py" to halt
    if not exists(join(dirname(realpath(__file__)), "norestart.txt")):
        register(restart)

    # tail -f log.txt to check it works properly
    # or "ps aux|grep python"
    with open("log.txt", "a") as file:
        file.write(f"Hello, from {getpid()}\n")

if __name__ == "__main__":
    main() 
```

注意：使用临时文件夹可能会失败，因此在这种情况下，只需将其切换到`join(dirname(realpath(__file__)), "restarter.py")`并从主程序中调用它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-01T15:11:00.213

```
os.execv(sys.executable, ['python3'] + sys.argv) 
```

或者

```
os.execv(sys.executable, ['python2'] + sys.argv) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-26T09:38:50.153

**在 Windows 上尝试这项工作：**

> **当您想重新启动脚本时调用此函数**

```
import os
def rest():
    os.system('cls')
    script_name = os.path.basename(__file__)
    os.system(script_name) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2022-02-05T13:04:00.193

我这样做如下：

```
 def restartApp(self):
        python = sys.executable
        os.execl(python, python, *sys.argv) 
```

奇迹般有效

# java - java - 如何处理多线程 Web 应用程序中的错误日志记录

> ID：11329921
> 
> 赞同：0
> 
> 时间：2012-07-04T13:19:39.863
> 
> 标签：java, multithreading

在 Web 应用程序中，我使用多线程同时解析多个 XML 文件。

现在，在解析过程的不同阶段，消息被发送到日志中。

当错误发生时，我试图将正确的消息放入日志 - 但是我如何确保如果一个线程由于某种原因失败，那么该特定错误的整个消息列表将发送到一个单独的块中？即不应该混淆不同线程的消息（因为这将使我很难准确理解错误是什么以及哪个线程报告了错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:23:14.500

You should leverage [Log4j's MDC or NDC.](http://wiki.apache.org/logging-log4j/NDCvsMDC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:20:18.197

在这种情况下，您应该使用 MDC 或 NDC，例如[http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/](http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/)

所以每个线程都会有一个唯一的 id，错误消息将再次写入这个唯一的 id。

在日志文件中搜索特定线程的任何错误时，您可以按此 ID 对行进行 grep。

从设计和性能的角度来看，我认为尝试为每个线程维护一系列行以进行日志记录不是一个好主意。

看看有没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:06:50.510

```
myLogContainer=CreateLogContainer();
myLogContainer.push(logMessage);
myLogContainer.push(logMessage);
myLogContainer.push(logMessage);
..
myLogContainer.push(logMessage);
logger.submit(myLogContainer);
myLogContainer=CreateLogContainer(); // ready for next lot of errors 
```

# php - Doctrine2：“类不存在”ReflectionException，类路径重复

> ID：11329923
> 
> 赞同：1
> 
> 时间：2012-07-04T13:19:41.047
> 
> 标签：php, symfony, doctrine-orm

所以我在两个实体 A 和 B 之间有一个多对一对多的关系。要获取与一个特定 A 匹配的所有实体 B。C 是在 A 和 B 之间建立链接的类。

```
$bs = $this->getDoctrine()
                    ->getEntityManager()
                    ->getRepository('MyBundle:C')
                    ->findByContact($a->getId()); 
```

所以这部分可能正在工作，但是当我执行它时会出现这个错误：

> 类 My\Bundle\Entity\My\Bundle\Entity\D 不存在

所以 D 是一个与 B 存在一对多关系的类。当存储库获取 B 的列表时调用它是很自然的。

但是为什么它会复制实体的路径呢？

注意：我已经搜索了 D 类的调用，但该路径在我的代码中的任何地方都不会重复。

编辑 ：

在花了一段时间试图查看问题根源的路径之后，我终于发现了 Doctrine 注释路径之间的一个非常小的（但重要的）差异，它们基本上是：

> 我的\捆绑\实体\ D

以及在 php 本身中为类调用的路径，尤其是在 getter 和 setter 中：

> \我的\捆绑\实体\ D

那个反斜杠已经让我在这里呆了很长时间，但现在一切都恢复了。问题解决了。

# c - #if 将未定义的符号常量假定为 0 是标准的吗？

> ID：11329925
> 
> 赞同：13
> 
> 时间：2012-07-04T13:19:42.637
> 
> 标签：c, gcc, c-preprocessor

在这个`c`节目 中

```
#include<stdio.h>
int main()
{

        #if UnDefinedSymbolicConstant==0
                printf("UnDefinedSymbolicConstant is equal to 0\n ");
        #else
                printf("UnDefinedSymbolicConstant is not equal to 0\n");

        #endif
        return 0;
} 
```

**UnDefinedSymbolicConstant**没有出现在`#define`任何地方，仍然**被假定为 0**并给出如下[输出`gcc-4.3.4`](http://ideone.com/dIzNx) ：

```
UnDefinedSymbolicConstant is equal to 0 
```

那么， **这是标准行为还是仅在 gcc 中这样工作？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T13:25:17.800

是的，这是由 6.10.1 中的标准规定的：

> 在执行了由于宏扩展和定义的一元运算符而导致的所有替换之后，所有剩余的标识符（包括那些在词法上与关键字相同的标识符）都被替换为 pp-number 0

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T13:32:05.003

这是默认设置，但您至少可以使用`-Wundef`gcc 选项为此生成警告。

> **`-Wundef'：** 每当在 `#if' 指令中遇到不是宏的标识符时发出警告，在 `defined' 之外。这样的标识符被零替换。

# html - 如何从 html 表单执行 ruby 代码？

> ID：11329926
> 
> 赞同：0
> 
> 时间：2012-07-04T13:19:43.390
> 
> 标签：html, ruby

我有一个表格。考虑我的表单中有一个按钮，我需要做的是在单击按钮时执行 ruby​​ 文件。实际上，我的 ruby​​ 文件将数据写入 html 文件。所以我还想在单击按钮时在框架中打开该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:23:31.820

Make the button a `submit` button. Put it inside a [`<form>`](http://www.w3.org/TR/html401/interact/forms.html). Set the `action` of the form to a URL that your webserver maps onto the Ruby program. (You'll need to pick an interface that your program will conform to, e.g. CGI or Rack). Since you are playing with frames, also set the `target` attribute of the form.

Either change the output of the Ruby program so it outputs to the web server instead of a file, or set it to send an HTTP Redirect to the location you saved the file to.

# java - Android：我选择哪种加密方式将数据安全地发送到使用 WCF 的应用程序？

> ID：11329929
> 
> 赞同：0
> 
> 时间：2012-07-04T13:19:52.640
> 
> 标签：java, android, wcf, encryption, aes

我有一个项目，我需要将 Android 应用程序连接到使用 WCF、IIS（Internet 信息服务）、Active Directory 和基于角色的 Scurity 的 ERP。

因此，默认情况下已经包含许多安全选项，例如允许使用证书和 HTTPS 等的 basicHttpBinding。

我还没有决定的一件事是，当数据从应用程序传输到 ERP 时，我将使用什么数据加密来保护数据。我读到有一个可以使用的 Java AES 库，然后我又读到有人也可以解密这些包，如果他或她拦截它们。

我想知道两件事：

*   是否有关于移动应用程序数据加密的“最佳实践”，因为计算能力不如计算机强大，并且消息不能太重或太长而无法解密，因为这会减慢我们不想要的应用程序当然。

*   我实际上正在考虑使用某种 PGP 公钥，其中公钥在 Android 设备中，而私钥在 ERP 中，但也许这不是一种聪明甚至不是非常安全的方法？

再说一遍..因为我将使用 TLS，也许我不需要加密我的数据并且它足够安全？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:51:03.487

android 的安全协议非常严格。

您可以做的是使用此功能并找到您想要使用的协议：

```
Provider[] providers = Security.getProviders();
for (Provider provider : providers) {
    for (Object entry : provider.keySet()) {
        String name = String.valueOf(entry);
        if (name.startsWith("Cipher")) {
            Log.d("Cipher", "Supports: " + name.substring(7));
        }
    }
} 
```

其中任何一个都是标准协议，可以在客户端和服务器端使用。

祝你好运。

# c# - 如何使用空参数 P/Invoke SetFileTime？

> ID：11329930
> 
> 赞同：3
> 
> 时间：2012-07-04T13:19:58.723
> 
> 标签：c#, .net, file-io, pinvoke

尝试从我的 C# 程序中 P/Invoke[`SetFileTime`函数](http://msdn.microsoft.com/en-us/library/ms724933%28v=vs.85%29)，我使用以下签名：

```
[DllImport(@"kernel32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
internal static extern bool SetFileTime(
    IntPtr hFile,
    ref long lpCreationTime,
    ref long lpLastAccessTime,
    ref long lpLastWriteTime); 
```

该文档说明了以下非托管签名：

```
BOOL WINAPI SetFileTime(
  __in      HANDLE hFile,
  __in_opt  const FILETIME *lpCreationTime,
  __in_opt  const FILETIME *lpLastAccessTime,
  __in_opt  const FILETIME *lpLastWriteTime
); 
```

它对第二、第三和第四个参数说它们可以是可选的：

> 如果应用程序不需要更改此信息，则此参数可以为 NULL。

这正是我想要做的：只传递三个日期时间值之一，并将其​​他设置为`null`.

我完全不知道如何用 P/Invoke 签名来表达这一点。

**因此我的问题是：**

哪个是能够传递`null`给`SetFileTime`函数参数的正确 P/Invoke 签名（或正确的调用方式）？

**编辑1：**

由于[`FileInfo`该类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)已经提供了用于设置文件时间的可写属性，您可能会问，为什么我要自己做而不是使用该类。

原因是我打算在我的[Long Paths](http://zetalongpaths.codeplex.com)库中使用这个函数来克服`MAX_PATH`限制，因此不能使用标准的 .NET 函数。

因此`FileInfo`，不幸的是，使用该类不是一种选择。

**编辑2：**

我已经通过使用 Hans 建议的解决方案解决了这个问题。之后，我[在函数下方发现了一条用户提供的评论](http://msdn.microsoft.com/en-us/library/ms724933%28v=vs.85%29#1)：

> 此外，为其中一个参数指定零值与指定 NULL 具有相同的效果。

虽然我没有检查这是否属实，但对于与我有类似要求的其他人来说，它可能仍然是一个选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:34:58.977

您无法使用 C# 中的**ref**关键字对其进行建模，该关键字始终在运行时生成非空指针。您实际上必须声明它`long*`，这需要使用 unsafe 关键字。`&local-var`使用语法传递参数或使用`null`.

避免使用不安全的一个可能技巧是使用不同名称声明此方法的 3 个版本，使用 DllImport 的 EntryPoint 属性将它们全部映射到 SetFileTime()。指定您不想设置为 IntPtr 的那些，以便您可以传递 IntPtr.Zero，即您想要设置为 ref long 的那个。例如：

```
[DllImport("kernel32.dll", SetLastError = true, EntryPoint="SetFileTime", ExactSpelling=true)]
internal static extern bool SetFileCreateTime(
    IntPtr hFile,
    ref long lpCreationTime,
    IntPtr lpLastAccessTimeUnused,
    IntPtr lpLastWriteTimeUnused); 
```

对 SetFileAccessTime 和 SetFileWriteTime 重复此操作。

# c++ - 在提升匹配结果中查找不匹配

> ID：11329931
> 
> 赞同：1
> 
> 时间：2012-07-04T13:20:01.490
> 
> 标签：c++, regex, boost

我正在使用 boost::regex_match 并且试图找到一个函数来获取正则表达式停止匹配的位置。我在 boost::match_results 对象中找不到任何属性，但有几个代码片段使用 boost::regex_search 来显示子匹配项。我的实施是否走在正确的道路上，还是我必须做一些不同的事情才能实现这一目标？我的代码如下所示：

```
int main(int args, char** argv)
{
    boost::match_results<std::string::const_iterator> what;

    if(args == 3) 
    {
        std::string text(argv[1]);
        boost::regex expression(argv[2]);

        std::cout << "Text : " << text << std::endl;
        std::cout << "Regex: " << expression << std::endl;

        if(boost::regex_match(text, what, expression, boost::match_default) != 0) 
        {
            int i = 0;

            for(boost::match_results<std::string::const_iterator>::const_iterator it=what.begin(); it!=what.end(); ++it) 
            {
                std::cout << "[" << (i++) << "] " << it->str() << std::endl;
            }
            std::cout << "Matched!" << std::endl;
        } 
        else 
        {
            std::string::const_iterator start = text.begin();
            std::string::const_iterator end   = text.end();

            while(boost::regex_search(start, end, what, expression)) 
            {
                std::string submatch(what[1].first, what[1].second);
                std::cout << submatch << std::endl;
                start = what[0].second;
            }
            std::cout << "Didn't match!" << std::endl;
        }
    } //if(args == 3)
    else 
    {
        std::cout << "Invalid usage! $> ./boost-regex <text> <regex>" << std::endl;
    }
    return 0;
} 
```

输出：

```
$> ./boost_regex "We're building it up to burn it down" ".*(build.*)(to.*)(burn.*)"
Text : We're building it up to burn it down
Regex: .*(build.*)(to.*)(burn.*)
[0] We're building it up to burn it down
[1] building it up
[2] to
[3] burn it down
Matched!

$> ./boost_regex "We're building it up to burm it down" ".*(build.*)(to.*)(burn.*)"
Text : We're building it up to burm it down
Regex: .*(build.*)(to.*)(burn.*)
Didn't match! 
```

对于最后一个输入，我想要类似于：

```
Text : We're building it up to burm it down
Regex: .*(build.*)(to.*)(burn.*)
[0] We're building it up to
[1] building it up
[2] to
Didn't match! 
```

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:28:29.910

首先，您的示例中的正则表达式有问题。因为它无法匹配`(burn.*)`子组，所以整个正则表达式无法匹配任何内容，并且不返回任何结果。添加一个“？” after`(burn.*)`将使前两个子组匹配，而第三个子组不匹配。

我会查看 rubular.com，它是调整正则表达式并实时观察它们工作的好工具。

要测试子组是否参与匹配，您需要检查`sub_match::matched`for 循环中的布尔变量，如果子组匹配，则为真。[在此处](http://www.boost.org/doc/libs/1_50_0/libs/regex/doc/html/boost_regex/ref/sub_match.html)查看 boost::submatch 的文档

希望这会有所帮助，这实际上是我的第一篇 Stackoverflow 帖子、答案或评论。:)

# sql - 计算查询中的百分比 - Access SQL

> ID：11329936
> 
> 赞同：1
> 
> 时间：2012-07-04T13:20:29.393
> 
> 标签：sql, ms-access, group-by, percentage

我试图量化一些事情。这是一个示例（当然是简化的）：

```
tblParent: { Number, Name }
tblChild: { Number, Name, ParentNumber, Criterion } 
```

我想计算具有相同的孩子的总数（很容易使用 Group By 和 Count(1) ），但问题是将该数字与具有相同的孩子`ParentNumber`的数量进行比较。`ParentNumber``Criterion = "Something"`

这是我到目前为止所拥有的：

```
SELECT "Criterion = 1" AS CritDesc,
COUNT(1) AS Total,
ParentNumber AS Parent,
( COUNT(1) / (SELECT Total FROM [TotalCountingQuery]) ) AS Percentage
FROM tblChild
WHERE Criterion = 1
GROUP BY ParentNumber; 
```

`[TotalCountingQuery]`简单地计算每个 ParentNumber 的所有孩子并将总数放入`Total`

```
SELECT COUNT(1) AS Total FROM tblChild GROUP BY ParentNumber; 
```

因此，我尝试使用该 TOTAL 计数并找出有多少（以百分比计）Criterion = 1。但由于它使用的是子查询，因此子查询不能返回多个 Total。我需要它返回每个 ParentNumber 的总数，以用于每个具有该 ParentNumber 的孩子的百分比计算。

最终结果应该是：

```
CritDesc   |    Total    |   Parent    |   Percentage
```````````````````````````````````````````````````````
Criterion=1|      2      |   45011     |      0.333    // Means there should be 6 Children with 45011 as parent
Criterion=1|      4      |   43255     |       0.9
Criterion=1|      1      |   59056     |      0.44 
```

我有几个这样的查询，我将它们合并到一个报告中以生成一个完整的报告，按父母分组，显示所有父母的所有“标准=X”。那行得通，我只需要上面的工作。

想法？

编辑：我为此目的尝试加入：

```
SELECT "Criterion=1" AS CritDesc,
COUNT(c.Number) AS Total,
ParentNumber AS Parent,
COUNT(c.Number)/q.Total AS Percentage
FROM tblChild AS c INNER JOIN tblParent AS q ON c.ParentNumber = q.Number
GROUP BY ParentNumber 
```

这抛出：`You tried to execute a query ... 'Count(1)/q.Total' as part of an aggregate function`。将其添加到 group-by 语句会引发`Cannot have aggregate function in GROUP BY`...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T13:42:11.443

您的子查询没有 where 子句，因此计算所有记录，但您可以在没有子查询的情况下执行此操作

```
SELECT
    "Criterion = 1" AS CritDesc,
    SUM(IIf(Criterion = 1, 1, 0)) AS NumCrit,
    COUNT(*) AS TotalNum,
    SUM(IIf(Criterion = 1, 1, 0)) / COUNT(*) AS Percentage,
    ParentNumber AS Parent
FROM
    tblChild
GROUP BY
    ParentNumber; 
```

注意：我放弃了 WHERE 子句。相反，我通过总结和其他方式`1`来计算满足标准的记录。这使我可以同时获得每个的总数。`Criterion = 1``0``ParentNumber``Count(*)`

* * *

更新

您可能也希望为没有孩子的父母获得结果。在这种情况下，您可以使用外连接

```
SELECT
    "Criterion = 1" AS CritDesc,
    SUM(IIf(C.Criterion = 1, 1, 0)) AS NumCrit,
    COUNT(C.Number) AS TotalNumOfChildren,
    SUM(IIf(C.Criterion = 1, 1, 0)) / COUNT(*) AS Percentage,
    P.Number AS Parent
FROM
    tblChild AS C
    LEFT JOIN tblParent AS P
        ON C.ParentNumber = P.Number  
GROUP BY
    P.Number; 
```

请注意，我得到的孩子总数`Count(C.Number)`也`Count(*)`将计算没有孩子的记录，并`1`在这种情况下产生。然而，在百分比计算中，我除以`Count(*)`以避免除以零。在这种情况下，结果仍然是正确的，因为与 的记录总和`Criterion = 1`为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:25:12.117

如果您在 MS Access 中工作，您可以除以父母的 DCount。

```
Total/DCount("Parent","Table","Parent=" & Parent) 
```

您还可以创建计数查询

```
SELECT Parent, Count(Parent) FROM Table GROUP BY Parent 
```

然后将这两个查询添加到设计网格中，将它们连接到父节点上。

# ios - NSObject 可能不响应“onEnter”（在 AppDelegate 中使用 iAd 时）

> ID：11329937
> 
> 赞同：0
> 
> 时间：2012-07-04T13:20:32.150
> 
> 标签：ios, cocos2d-iphone, iad

使用 iAd。很少收到警告。下面是我在 AppDelegate.m 中的代码

什么不见​​了？

警告以代码行结尾表示

```
-(void)onEnter
{
    [super onEnter]; //<-- NSObject may not respond to this
    adView = [[ADBannerView alloc]initWithFrame:CGRectZero];
    adView.delegate = self;
    adView.requiredContentSizeIdentifiers = [NSSet setWithObjects: ADBannerContentSizeIdentifierLandscape, ADBannerContentSizeIdentifierLandscape, nil];
    adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    [[[CCDirector sharedDirector] openGLView] addSubview:adView];
    adView.hidden = YES;
}

-(void)onExit
{
    adView.delegate = nil;
    [adView removeFromSuperview];
    [adView release];
    adView = nil;
    [super onExit]; //<-- NSObject may not respond to this
}

-(void)bannerViewActionDidFinish :(ADBannerView *)banner
    {    
        NSLog(@"bannerViewActionDidFinish called");
        [[UIApplication sharedApplication] setStatusBarOrientation :(UIInterfaceOrientation)[[CCDirector sharedDirector] deviceOrientation]];
    }
//<-- Instance method deviceOrientation not found (return type defaults to id) 
```

怎么了？缺少要继承的任何类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:00:08.927

您需要继承自`CCNode`，而不是`NSObject`

**编辑**此外，`deviceOrientation`不是成员，`CCDirector`那么您为什么假设它是成员？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:01:26.167

onEnter 和 onExit 方法仅在从 CCNode 派生的类中可用。你的类是 NSObject 的子类。

如果您手动发送 onEnter/onExit 消息，只需删除对 super onXXX 的调用，因为它是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:35:58.497

出现警告是因为您正在调用的方法（可能在您的超类中实现）在`@implementation`您的`@interface`. 只需在您的超类`.h`文件中声明它们。

```
- (UIDeviceOrientation)deviceOrientation;
- (void)onExit;
- (void)onEnter; 
```

如果您不希望它们公开可见，请在`.m`您知道它们存在的子类文件的类别中声明它们。

# android - 用于模拟器的英特尔果冻豆图像

> ID：11329940
> 
> 赞同：1
> 
> 时间：2012-07-04T13:20:37.247
> 
> 标签：android, sdk, android-emulator, intel, android-4.2-jelly-bean

如何为 SDK**模拟器安装****Intel Jelly Bean 映像**？如果它不可用，是否有可能的发布日期？

 **大家好，我要的是***JELLY BEAN***的图片。适用于***Android 4.1的******Intel x86 Atom 系统映像***。;-)

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T00:58:45.227

JellyBean 模拟器现在可用。![在此处输入图像描述](../Images/5600a050d8144487cda235cef2489c97.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T14:14:48.707

> 如何为 SDK 模拟器安装 Intel Jelly Bean 映像？

目前没有这样的图像可用。

> 如果它不可用，是否有可能的发布日期？

没有宣布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T12:49:48.513

英特尔似乎在 8 月底发布了 x86 Jelly Bean 映像。

根据[http://software.intel.com/en-us/articles/android-41-jelly-bean-x86-emulator-system-image](http://software.intel.com/en-us/articles/android-41-jelly-bean-x86-emulator-system-image)它应该出现在 SDK 管理器中（我不是这种情况），还提出了一种手动安装方法。***

# java - 获取内存（RAM）上的地图大小

> ID：11329941
> 
> 赞同：7
> 
> 时间：2012-07-04T13:20:40.020
> 
> 标签：java, memory, map

当我的应用程序启动时，我正在使用 HashMap 来缓存一些重要数据。
此缓存有时会增长然后减少。我想知道它在 RAM 上占用了多少内存。
是否可以通过 KB 的地图获取内存？有API吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T03:30:57.910

我正在使用这种方法来估计 MAP 大小：

```
public static void size(Map map) {
    try{
        System.out.println("Index Size: " + map.size());
        ByteArrayOutputStream baos=new ByteArrayOutputStream();
        ObjectOutputStream oos=new ObjectOutputStream(baos);
        oos.writeObject(map);
        oos.close();
        System.out.println("Data Size: " + baos.size());
    }catch(IOException e){
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T13:24:59.830

为此目的有一个很好的工具：[ClassMexer](http://www.javamex.com/classmexer/)

您可以通过以下方式估计 HashMap 的内存，包括引用的对象：

long noBytes = MemoryUtil.deepMemoryUsageOf(myCacheMap);

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T13:26:00.760

当然，您意识到您`Map`持有对在堆中存在的对象的引用，而不是对象本身。`Map`因此，如果不追查整个参考树以将键和值的字节相加，就问消耗了多少内存是没有意义的。

对象不这样做；没有办法实现它。

就像上面所说的明智评论一样，获取带有所有插件的 Visual VM 并配置您的应用程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-04T13:28:18.060

在没有仪器的情况下，几乎不可能计算出对象的实际大小。

有时你可以根据指针的大小、原始类型、对象的开销等来计算它，但是对于像带有内容的 HashMap 这样复杂的东西（实际大小取决于它的历史和哈希因子以及它的所有元素都以哈希因子为模）几乎是不可能的。

唯一真正的解决方案是使用堆分析器，例如[Eclipse Mat](http://www.eclipse.org/mat/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T13:29:33.097

这在很大程度上取决于您的 JVM 供应商和版本。您可以查看[此演示文稿](http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf)以进行粗略估计。

# c# - 响应和重定向到页面来自

> ID：11329946
> 
> 赞同：0
> 
> 时间：2012-07-04T13:20:57.380
> 
> 标签：c#, asp.net, redirect, response.redirect

我有几页

例如：

```
 PageA.aspx

          pageB.aspx

          pageC.aspx 
```

我还有 1 页

例如：AccessChecker.aspx 检查此用户是否允许在此应用程序中查看此页面

如果他允许，他将被重定向到**pageA.aspx**

```
Response.Redirect("~/pageA.aspx"); 
```

但真正的问题是，如果有人输入网址，例如**www.example.com/pageB.aspx**，如果没有可用的会话，它将将该人重定向到 **AccessChecker.aspx**，但根据我在检查他的访问级别后的编码，人将被重定向到 **www.example.com/pageA.aspx**但我希望**AccessChecker.aspx**页面重定向到该人来自的页面。在这种情况下，用户将被重定向到**www.example.com/pageB.aspx**而不是**www.example。 com/pageA.aspx** ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:25:52.027

在您的 pageB 中执行此操作

```
if(Session["LoggedIn"]==null)//Check Session
Response.Redirect("AccessChecker.aspx?Nav=B", false); 
```

在您的 AccessChecker 代码隐藏中

```
 //When you want to redirect
    if(Request.QueryString["Nav"]=="B")
    Response.Redirect("~/pageB.aspx", false);
    else
    Response.Redirect("~/pageA.aspx", false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:29:50.897

您是否尝试过使用

```
Request.UrlReferrer 
```

所以你可以有

```
Response.Redirect(Request.UrlReferrer.ToString()) 
```

或类似的规定...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:50:22.233

我已经编写了一个导航框架来帮助你，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)

首先，您配置页面和页面之间的导航。您的示例如下所示：

```
<state key="A" page="~/pageA.aspx">
    <transition key="NoSession" to="Access">
</state>
<state key="B" page="~/pageB.aspx">
    <transition key="NoSession" to="Access">
</state>
<state key="Access" page="~/AccessChecker.aspx"/> 
```

然后，要从 pageA 或 pageB 导航到 AccessChecker，您可以编写：

```
StateController.Navigate("NoSession"); 
```

并从 AccessChecker 导航回它们来自您的位置：

```
StateController.NavigateBack(1); 
```

# html - WordPress CSS背景图像未出现

> ID：11329947
> 
> 赞同：2
> 
> 时间：2012-07-04T13:20:58.753
> 
> 标签：html, css, wordpress, wordpress-theming, image

如标题所述，我的网站的背景图片没有出现。我对wordpress很陌生。我已经设法让 HTML 文件中的普通图像出现`<img src="<?php echo get_bloginfo('template_url');?>/images/image01.jpg" alt="image description" width="1269" height="441" />` ，但由于某种原因，我的 CSS 中的所有图像都不会出现。我在尝试解决这个问题时做了一些研究，最常见的答案是像这样格式化 css：

```
.logo{
    background:url("/images/logo.png") no-repeat; } 
```

但这不起作用。

任何帮助将不胜感激。

在此先感谢，汤姆

编辑：链接到`header.php`文件中的 stye.css：

```
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:27:31.173

您是否使用它来导入样式表：

```
bloginfo('stylesheet_url'); 
```

它应该放在*样式表链接的**href*标记中，并且 style.css 文件本身应该与 index.php 位于同一目录中

 *查看要包含在您的 head 标签中的代码：http: [//jsfiddle.net/wpWbN/](http://jsfiddle.net/wpWbN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-19T09:36:45.980

如果您从头开始创建主题意味着...

*确保您的自定义主题文件夹中的图像文件夹中的背景图像

*然后包括自定义主题文件夹中的图像

## css 文件

```
 .header{
         background: url("../custom_theme_folder_name/images/123.png") repeat;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T13:30:50.210

你试过这个吗？

```
.logo{
    background:url("images/logo.png");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-24T07:51:00.280

就我而言，我的代码就像下一行

```
background: url("assets/images/icon.png"); 
```

我的文件夹是

> `wp-content\themes\theme-name\assets\images`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T13:29:00.683

您的源属性中的地址可能不是从您认为的位置开始（这意味着您可能不是从根节点开始）。尝试这个：

```
.logo{
    background:url("../images/logo.png") no-repeat; } 
```

或这个

```
.logo{
    background:url("../../images/logo.png") no-repeat; } 
```*

# sql - 如何在 PL/SQL 的新行中打印输出？

> ID：11329953
> 
> 赞同：28
> 
> 时间：2012-07-04T13:21:17.710
> 
> 标签：sql, oracle, plsql

如何在 PL/SQL 中打印新行？我在 C 语言中追求类似于 '\n' 的东西。

例子：

```
begin

    dbms_output.put_line('Hi, good morning friends');

end; 
```

我需要的输出是这样的：

```
hi,
good 
morning
friends 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-04T13:30:01.787

您可以连接 CR 和 LF：

```
chr(13)||chr(10) 
```

（在窗户上）

要不就：

```
chr(10) 
```

（否则）

```
dbms_output.put_line('Hi,'||chr(13)||chr(10) ||'good' || chr(13)||chr(10)|| 'morning' ||chr(13)||chr(10) || 'friends'); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-01-30T22:11:22.553

在 PL/SQL 代码中，可以使用：DBMS_OUTPUT.NEW_LINE；

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-04T13:29:13.900

您很可能需要使用此技巧：

```
dbms_output.put_line('Hi' || chr(10) || 
                     'good' || chr(10) || 
                     'morning' || chr(10) || 
                     'friends' || chr(10)); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-04T13:26:29.123

```
dbms_output.put_line('Hi,');
dbms_output.put_line('good');
dbms_output.put_line('morning');
dbms_output.put_line('friends'); 
```

或者

```
DBMS_OUTPUT.PUT_LINE('Hi, ' || CHR(13) || CHR(10) || 
                     'good' || CHR(13) || CHR(10) ||
                     'morning' || CHR(13) || CHR(10) ||
                     'friends' || CHR(13) || CHR(10) ||); 
```

试试看。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-11T04:40:23.483

传递字符串并用换行符替换空格，它会给你想要的结果。

```
select replace('shailendra kumar',' ',chr(10)) from dual; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-04T13:30:10.177

```
 begin

        dbms_output.put_line('Hi, '||CHR(10)|| 'good'||CHR(10)|| 'morning' ||CHR(10)|| 'friends');

    end; 
```

# c# - RSACryptoServiceProvider(RSACryptoServiceProvider) 构造函数在 .NET 3.5 中因某些键名而崩溃

> ID：11329955
> 
> 赞同：3
> 
> 时间：2012-07-04T13:21:23.373
> 
> 标签：c#, .net, cryptography, rsacryptoserviceprovider

如果您查看下面的代码，它除了创建一个新的`RSACryptoServiceProvider`. 密钥容器名称是从基于各种参数创建名称的属性初始化的。我在这个演示代码中添加了硬编码值。

该代码在 Windows 2008 R2 服务器安装上运行，并且已经运行了几个月，为密钥容器名称返回了一个常量值。

几天前，代码停止工作，我们面临以下异常。使用已使用数月的密钥容器名称不再有效。服务器已重新启动，IIS 已重新启动 - 没有成功。只有在更改密钥名称后，它才重新开始工作。

有人可以解释为什么会发生这种情况以及如何解决吗？据我所知，这段代码没有创建任何持久对象。为什么重启后还是会失败？从 MSDN (http://msdn.microsoft.com/de-de/library/ca5htw4f.aspx) 我读到构造函数“*构造函数创建或重用使用 KeyContainerName 字段指定的密钥容器*”。“*重用*”是否意味着它正在某处缓存内容，并且在执行此操作时崩溃并且现在卡在损坏的缓存版本中？另请注意，当前许多其他机器上仍在使用相同的键名 - 任何地方都没有问题。

**这是崩溃的行：**

```
using ( RSACryptoServiceProvider rsa = new RSACryptoServiceProvider( this.oCspParameters ) )
{
} 
```

**这些是使用的 CspParameters：**

```
private readonly CspParameters oCspParameters = new CspParameters
{
  Flags = CspProviderFlags.UseMachineKeyStore,
};

this.oCspParameters.KeyContainerName = oProfile.KeyName; 
```

**这就是关键名称：**

```
public string KeyName
{
    get
    {
        return string.Format( "API-{0}-v{1}", "TestClient", "1.0.0.0" );
    }
} 
```

**最后是例外：**

```
CryptographicException: An internal error occurred.
Service Operation: ISessionService.Identify #f173250b-d7ac-45d5-98ed-7fffcf37d95a
at System.Security.Cryptography.Utils.CreateProvHandle(CspParameters parameters, Boolean randomKeyContainer)
at System.Security.Cryptography.Utils.GetKeyPairHelper(CspAlgorithmType keyType, CspParameters parameters, Boolean randomKeyContainer, Int32 dwKeySize, SafeProvHandle& safeProvHandle, SafeKeyHandle& safeKeyHandle)
at System.Security.Cryptography.RSACryptoServiceProvider.GetKeyPair()
at System.Security.Cryptography.RSACryptoServiceProvider..ctor(Int32 dwKeySize, CspParameters parameters, Boolean useDefaultKeySize) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T13:40:46.620

> 据我所知，这段代码没有创建任何持久对象

如果密钥容器不存在，以下代码**将创建它：**

```
using ( RSACryptoServiceProvider rsa = new RSACryptoServiceProvider( this.oCspParameters ) ) 
{ 
} 
```

如果要强制使用现有密钥，则应指定：

```
cp.Flags = CspProviderFlags.NoPrompt | CspProviderFlags.UseExistingKey | CspProviderFlags.UseMachineKeyStore; 
```

> “重用”是否意味着它正在某处缓存内容，并且在执行此操作时崩溃并且现在卡在损坏的缓存版本中？

它将重用存储在`Microsoft\Crypto\RSA\MachineKeys\`文件夹子文件夹中的密钥`Environment.SpecialFolder.CommonApplicationData`，如果它存在并且您有权访问它。否则它将尝试创建它。

也许那里有一个您无权访问的密钥？

密钥容器的文件名使用生成的唯一 ID (CspKeyContainerInfo.UniqueKeyContainerName)，但您可以使用文本编辑器检查文件内容，密钥容器名称位于文件的前几个字符中。

一旦你找到了有问题的文件，你就可以检查它的权限，也许可以删除它以便重新创建它。

来自评论：

> 我怎样才能强制它不这样做，或者我怎样才能删除容器？

使用以下代码完成后，您可以删除现有的密钥容器（前提是您具有必要的权限）：

```
CspParameters cp = new CspParameters();
cp.Flags = CspProviderFlags.NoPrompt | CspProviderFlags.UseExistingKey | 
                   CspProviderFlags.UseMachineKeyStore;
cp.KeyContainerName = containerName;

using (RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(cp))
{
    rsa.PersistKeyInCsp = false;
} 
```

我没有尝试过，但也许`PersistKeyInCsp=false`在创建密钥时设置会阻止 if 被持久化。

但是，以上都没有解释为什么您不再能够访问您以前成功使用的密钥。最明显的原因是权限 - 我知道`CryptographicException`如果您尝试访问您无权访问的密钥容器，您会收到一个错误消息，但我不知道您是否希望收到比“An发生内部错误”。我要做的第一件事是检查密钥容器文件上的 ACL。也许您有两个以不同身份运行的应用程序实例试图创建密钥容器 - 身份 1 创建的密钥容器不能被身份 2 访问。

最后，您似乎建议您不想保留密钥容器，为什么要使用机器存储？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-14T18:30:33.440

我最近在帮助另一个开发人员在他的本地机器上解决这个问题时发现了这个问题。

在我们的场景中，我们使用 RSA 来加密密码。有问题的代码已经在应用程序中工作了多年。突然，`RSACryptoServiceProvider`构造函数开始在一位开发人员的机器上遇到错误。该消息是模棱两可且令人恐惧的“**密钥在指定状态下无效。** ”

从上面乔的回答中，我们发现将密钥存储在如下位置：

```
C:\Users\<user name>\AppData\Roaming\Microsoft\Crypto\RSA\ 
```

通过在 notepad++ 中打开密钥文件，我们能够在其中一个文件的顶部找到我们的密钥名称。

**删除有问题的文件允许开发人员再次成功运行应用程序**- 下次我们调用构造函数时重新生成文件。

我仍然不确定发生了什么，但似乎原始密钥文件已损坏。

# objective-c - NSFileSize 只返回 102

> ID：11329962
> 
> 赞同：2
> 
> 时间：2012-07-04T13:21:52.687
> 
> 标签：objective-c, cocoa, osx-lion, nsfilemanager

当我调用以下代码行时，返回值始终为 102。

```
[[(NSFileManager*)manager attributesOfItemAtPath:[(NSURL*)file path] error:nil] objectForKey:@"NSFileSize"]; 
```

为了演示，我将 NSLog 路径及其大小。 ![](../Images/b8701c25abe2dcc2d6b770d3cec3979b.png)

Aperture（我通过上面的代码运行的路径）实际上是 912MB。 ![d](../Images/8141afd3b0a82279cd80bf49a7b98dba.png)

我在这里做错了什么？我真的很感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T13:24:37.507

该`.app` *文件*实际上是一个名为[App Bundle](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html)的特殊文件夹。文件夹（目录）只需要保存其内容的元信息，所以 102 字节看起来对我来说是正确的。

如果您想要二进制文件的大小，请查看`Aperature.app/Contents/MacOS/Aperature`，尽管显示的 912.5MB 可能包括捆绑包中的**所有**文件，而不仅仅是二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:24:35.633

`attributesOfItemAtPath`不适用于文件夹。

# java - 如何在 Maven 编译期间忽略 Java 源目录？

> ID：11329965
> 
> 赞同：25
> 
> 时间：2012-07-04T13:22:05.430
> 
> 标签：java, maven, lombok

我正在尝试使用[Lombok Maven 插件来确保在使用](http://awhitford.github.com/lombok.maven/lombok-maven-plugin/index.html)[Lombok](http://projectlombok.org/)时正确创建 Javadocs 。

Lombok Maven 在编译之前引入了一个新的代码生成目标。在我的配置中，我的`sourceDirectory`（带有 Lombok 注释的 Java `src/main/java`）被处理以在`target/generated-sources/delombok`.

但是，`sourceDirectory`现在 in 中的每个文件都有一个对应的（名称相同的）文件 in `target/generated-sources/delombok`，导致由于类重复而导致编译失败。

**如何告诉 Java 编译器忽略 中的源`sourceDirectory`？**

请注意，默认的 Lombok Maven 配置会让开发人员将 Java（带有 Lombok 注释）放在`src/main/lombok`文件夹中，而不是`src/main/java`. 但是，我不希望这样做，因为它会混淆 IDE 并且我的代码编译得很好（如果我删除了 Maven 插件）。

另请注意，简单地重新定义`sourceDirectory`也会让 IDE 感到不安（它们不再知道在哪里可以找到 Java 源代码！）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-13T08:53:38.187

我最近从使用 flakey maven-exec-plugin 方法为 javadoc 工具生成原始源代码切换到使用 lombok-maven-plugin

我的设置

*   所有来源`src/main/java`
*   生成的源进入`target/generated-sources/delombok`

我最初遇到了这个问题，但它似乎很容易解决：不要让 lombok-maven-plugin 将 delombok 路径添加到编译器源路径中`addOutputDirectoy`。IE

```
<plugin>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok-maven-plugin</artifactId>
    <version>0.11.2.0</version>
    <executions>
        <execution>
            <phase>generate-sources</phase>
            <goals>
                <goal>delombok</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <addOutputDirectory>false</addOutputDirectory>
        <sourceDirectory>src/main/java</sourceDirectory>
    </configuration>
</plugin> 
```

这似乎暂时解决了这个问题

**编辑：**奖金，如何使用此设置生成正确的 javadocs

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.8.1</version>
    <configuration>
        <defaultVersion>${project.version}</defaultVersion>
        <sourcepath>target/generated-sources/delombok</sourcepath>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T14:07:50.473

创建一个新的[Maven 配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)，并在新的配置文件中，重新定义源：

```
<sourceDirectory>target/generated-sources/delombok</sourceDirectory> 
```

**或者**

1.  构建助手：有一个[构建助手](http://blog.tfd.co.uk/2009/07/29/howto-add-more-than-one-source-directory-into-a-maven-build/)似乎提供了这个功能，但我之前没有使用过这个。
2.  Hack：这里[描述了](https://stackoverflow.com/questions/3908013/maven-how-to-change-path-to-target-directory-from-command-line)一个 hack ，但作者建议不要这样做，此外：如果你打算花时间修改你的 POM 并创建这个 hack，你最好做正确的事情并实现一个配置文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-01T07:19:30.650

`delombok`目标旨在将 java代码`src/main/lombok`从`target/generated-source/delombok`. 然后，将在其中找到的其他 java 代码`src/main/java`组合起来`target/generated-source/delombok`以生成组合的 java 类。

**将 delombok 视为源代码生成器会有所帮助。**

*那么如何才能得到你真正想要的呢？* （请注意，Maven 有一个[addCompileSourceRoot](https://maven.apache.org/ref/3.3.3/apidocs/org/apache/maven/project/MavenProject.html#addCompileSourceRoot(java.lang.String))方法，但没有相应的*removeCompileSourceRoot*。）想象一下以下**hack**：

1.  覆盖默认值`<build><sourceDirectory>`from`src/main/java`是`${project.build.directory}/generated-sources/delombok`。
2.  覆盖默认的 delombok`sourceDirectory`从`src/main/lombok`to `src/main/java`，并禁用`addOutputDirectory`。

基本上，您将使用`src/main/java`，但 Maven 会忽略它而使用`target/generated-sources/delombok`. Lombok 插件将转换`src/main/java`为`target/generated-sources/delombok`.

```
<build>
  <sourceDirectory>${project.build.directory}/generated-sources/delombok</sourceDirectory>
  <plugins>
    <plugin>
      <groupId>org.projectlombok</groupId>
      <artifactId>lombok-maven-plugin</artifactId>
      <version>1.16.6.1</version>
      <executions>
        <execution>
          <id>delombok</id>
          <phase>generate-sources</phase>
          <goals>
            <goal>delombok</goal>
          </goals>
          <configuration>
            <addOutputDirectory>false</addOutputDirectory>
            <sourceDirectory>src/main/java</sourceDirectory>
          </configuration>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

请注意，您不需要破解其他插件，例如`maven-jar-plugin`or `maven-javadoc-plugin`，因为它们应该尊重`sourceDirectory`.

*使用此 hack 需要您自担风险。* （我的猜测是这可能会使您的 IDE 和其他一些开发人员感到困惑。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-24T12:52:38.883

我尝试使用其他答案中的解决方案，但 IntelliJ 仍会将我的源文件标记`src/main/java`为重复。`delombok`所以我只是决定在编译后摆脱's 的内容。最后，该文件夹仅用作编译的中间阶段（在我的情况下，它需要将 lombok 与 AspectJ 编译器一起使用）并且没有真正需要保留它。我通过配置专门针对`delombok`文件夹的干净插件的额外执行来做到这一点。

你的 POM 应该包含

```
<build>

    <sourceDirectory>${project.build.directory}/generated-sources/delombok</sourceDirectory>

    <plugins>
        <!-- will delombok source files into /target/generated-sources/delombok -->
        <plugin>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok-maven-plugin</artifactId>
            <version>1.16.16.0</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>delombok</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <addOutputDirectory>false</addOutputDirectory>
                <sourceDirectory>src/main/java</sourceDirectory>
            </configuration>
        </plugin>

        <!-- other plugins bound to compile phase should go here -->

        <plugin>
            <artifactId>maven-clean-plugin</artifactId>
            <executions>
                <execution>
                    <id>delombok-removal</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>clean</goal>
                    </goals>
                    <configuration>
                        <excludeDefaultDirectories>true</excludeDefaultDirectories>
                        <filesets>
                            <fileset>
                                <directory>${project.build.sourceDirectory}/com</directory> <!-- assuming your root package is something like com.mycompany -->
                            </fileset>
                        </filesets>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T14:04:07.773

似乎没有设置 Lombok Maven 的好方法。@opyate 建议的“配置文件”方法不起作用，因为

[http://jira.codehaus.org/browse/MNG-5310](http://jira.codehaus.org/browse/MNG-5310)

但是，一个非常丑陋的解决方法是简单地拥有另一个`pom.xml`，除了重新定义之外，在所有方面都相同`sourceDirectory`，使用命令行参数来使用文件，如下所示：

[Maven 备用 pom](https://stackoverflow.com/questions/4519672/)

# php - 我无法将表单提交到服务器

> ID：11329974
> 
> 赞同：0
> 
> 时间：2012-07-04T13:22:40.437
> 
> 标签：php, javascript, jquery

我创建了一个登录表单并尝试使用 jquery 提交它，但它不起作用。我搜索了谷歌，但所有方法都有点复杂。这是我的代码

```
<form id="form1">
<p>Username<p/>
<input type="text" id="username"/>
<p>Password</p>
<input type="password" id="password"/>
<p><input type="Submit" value="Log in" id="button"></p>
</form>

<script type="text/javascript" src="jquery.js"></script>
<script>

$("#button").click(function(){

var username=$("#username").val();
var password=$("#password").val();

$.get("signing.php",{'username':username,'password':password},function(response){
alert(response);
});

});

</script> 
```

我的php文件是这样的

```
<?php

session_start();

$username=$_POST['username'];
$password=$_POST['password'];

include 'model/existusername.php';//This is used to connect to database and find the user

if (existusername($username,$password))
{
$_SESSION['username']=$username;
echo "loged in";  
}
else
{
echo "not loged in"; 
}

?> 
```

有什么问题吗？如果我使用选择框（尽管对登录没有用）而不是输入框，则代码可以正常工作。这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:27:34.163

您正在使用 $.get() 它使用 jquery 发送获取请求。

您的 php 文件正在检查 $_POST 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:27:38.197

在您的表单上添加一个“action =”，然后在类似的内容之后：

```
$('#button').click(function() {
  $('#form').submit();
}); 
```

不 ？

而您正在使用 GET 并尝试恢复 POST ..我认为这不正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:27:06.813

```
<form id="form1" method="post" action="pathToYourPhpScript">
 <p>Username<p/>
 <input type="text" id="username"/>
 <p>Password</p>
 <input type="password" id="password"/>
 <p><input type="Submit" value="Log in" id="button"></p>
</form> 
```

您必须记住选择方法，并在表单开始标记中探测操作。

作为标准，数据是通过 GET 请求发送的，并且您正在尝试从帖子中读取。

我提供的示例没有 AJAX，但同样，如果您想让它与 ajax 一起使用，您必须更改您的 javascript 以执行 POST 请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T15:16:23.283

编辑您的方法，使其如下所示：

```
$("#button").click(function(event){
    event.preventDefault();

    // ...
}); 
```

或者，使用不会导致提交的按钮输入。

```
<input type="button" value="Log in" id="button"> 
```

由于该按钮是提交按钮，因此页面在 GET 响应到达之前执行表单提交。防止提交发生，您的代码应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:20:47.023

这很简单

```
$.ajax({
                        type: "POST",
                        cache:false,
                        async:true,
                        url: "index.php",   
                        data: $('#id').serialize(),                         
                        success: function(data){
                            alert(data);
                        }
            }); 
```

这里 id 是你的表单 id。试试这个很容易你可以做到

# android - Create columns with specific format in xml?

> ID：11329975
> 
> 赞同：-1
> 
> 时间：2012-07-04T13:22:42.553
> 
> 标签：android, android-layout

Sample Screenshot
![enter image description here](../Images/1fb5ad19eb57e1f3d6366355560e0b8a.png)

How to create this format using any Layout.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:43:27.367

下面的布局将使 imageview 只占用它需要的空间，并导致 Textview 扩展并占用所有剩余空间。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:orientation="horizontal" > 
    <TextView 
        android:layout_width="0dp" 
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:text="Welcome" /> 
    <ImageView 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:src="@drawable/yourimagename" /> 
</LinearLayout> 
```

# javascript - how refocus when insert image in contenteditable DIVs in IE?

> ID：11329982
> 
> 赞同：1
> 
> 时间：2012-07-04T13:23:09.523
> 
> 标签：javascript, jquery, internet-explorer, range

There is a div: `<div contenteditable="true"></div>` in IE(7,8,9), then I click a button to insert an image with using the `document.execCommand('insertImage')` method. Then the image was inserted. Until now there is no problem. But the inserted image is selected with resizable handlers. How could I cancel the selection and refocus behind the image? Thanks.

`$button.click(function(){ document.execCommand("insertImage",false,'url'); });`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T14:04:27.843

**用更简单的代码更新**

这是一些讨厌的代码来做到这一点。在其他浏览器中，它似乎无论如何都可以工作，因此可以按原样使用以下内容。

演示：http: [//jsfiddle.net/timdown/mr7Ac/6/](http://jsfiddle.net/timdown/mr7Ac/6/)

代码：

```
function insertImage() {
    var sel = document.selection;
    if (sel) {
        var textRange = sel.createRange();
        document.execCommand('insertImage', false, "someimage.png");
        textRange.collapse(false);
        textRange.select();
    } else {
        document.execCommand('insertImage', false, "someimage.png");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:44:07.433

尝试这样的事情（仅限 IE）：

```
function insertImage(){
    if(document.selection){
        var sel=document.selection;
        var range=sel.createRange();
        var amount=(document.addEventListener)?2:1;
        document.execCommand('insertImage', false, 'url');
        range.move('character',amount);
        range.select();
    }
    return;
} 
```

# plsql - PLS-00103: Encountered the symbol "&" when expecting one of the following: ( - + case mode new not null

> ID：11329985
> 
> 赞同：0
> 
> 时间：2012-07-04T13:23:18.457
> 
> 标签：plsql

```
declare
    v_empno empdab.eno%type:=&n;
    v_empdab empdab%rowtype;
    begin
    select eno, ename,doj,position,salary,comm,address into v_empdab from empdab where eno=v_empno;
      dbms_output.put_line(v_empdab.eno||v_empdab.ename||v_empdab.doj||v_empdab.position||v_empdab.salary||v_empdab.comm||v_empdab.address);
end ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:52:26.577

SQL*Plus 命名参数**可以**在 PL/SQL 中使用。我认为您还没有向我们发送真正的代码。

```
Script start cc.sql
accept n prompt 'Enter value for n :'

set serveroutput on

declare
   v_v test.v%type := &n;
   r_v test%rowtype;

begin
   dbms_output.put_line(v_v);
   select v into v_v from test where rownum = 1;
   dbms_output.put_line(v_v);
   dbms_output.put_line(&n);

end;
/
End Script cc.sql 
```

```
SQL> @cc
Enter value for n :'abc'
old   2:    v_v test.v%type := &n;
new   2:    v_v test.v%type := 'abc';
old   9:    dbms_output.put_line(&n);
new   9:    dbms_output.put_line('abc');
abc
a
abc

PL/SQL procedure successfully completed.

SQL> 
```

# android - Android Flip Animation between Activity and Activity Group

> ID：11329986
> 
> 赞同：0
> 
> 时间：2012-07-04T13:23:22.077
> 
> 标签：android

I have an Activity with some buttons. On click of Button,Next Screen is displayed. The new Screen is displayed on a TabHost. I want to apply Flip Screen Transition between current Activity and the TabActivity.

Any help would be appreciated. Thanks in Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:44:08.923

检查这个：

[http://developerlife.com/tutorials/?p=343](http://developerlife.com/tutorials/?p=343)

您可以使用 overridePendingTransition()。过渡动画可以在 XML 中定义。

# ruby-on-rails - Setting class and value in simple form (Rails)

> ID：11329991
> 
> 赞同：14
> 
> 时间：2012-07-04T13:23:42.980
> 
> 标签：ruby-on-rails, simple-form

I am using simple form in my Rails application, i tried to set value and class to a specific input field just like below

`<%= f.input :email, :required => true, :autofocus => true, :value => "Email", :class => "myclass" %>`

**Html output :**

![enter image description here](../Images/249fe32142a5daf1cab8b7018a03babd.png)

but i could not able to see value and class set in the actual html form.

What am i doing wrong?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-04T13:27:26.983

我没有为 Rails 使用[simple_form](https://github.com/plataformatec/simple_form/)插件，但正如文档所说，您应该为此使用该`:input_html`属性。

请执行下列操作：

```
<%= f.input :email, required: true, autofocus: true, input_html: { :value => "Email", class: "myclass" } %> 
```

# ios - How to update location in background online in an iOS app?

> ID：11329992
> 
> 赞同：3
> 
> 时间：2012-07-04T13:23:43.783
> 
> 标签：ios, core-location

I'm trying to build an iPhone app that requires me to keep track of the user's location at all times using Core Location. I am using **startMonitoringSignificantLocationChanges** so that it updates in the background and because the accuracy is not as important as it being updated whenever there is a significant change.

Currently I make an HTTP request to a web service to update the location. This works perfectly when I am running the app - my location gets updated in the MySQL database I'm storing location data in. But when the app enters into the background - I can see the location services icon in the top right corner of the phone still running, but when I go back and look at the database, it didn't update my location at all. I tested this by taking a drive across town, one way with the app running, and one way with the app in the background.

From Apple's documentation:

> If you leave this service running and your application is subsequently suspended or terminated, the service automatically wakes up your application when new location data arrives. At wake-up time, your application is put into the background and given a small amount of time to process the location data. Because your application is in the background, it should do minimal work and avoid any tasks (such as querying the network) that might prevent it from returning before the allocated time expires. If it does not, your application may be terminated.

How long exactly is this "small amount of time to process location data"? And is it just not recommended to query the network, or is it not possible to query the network in that time? Is there a better way to keep track of the location of several different users even when the app is in the background?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:56:14.307

你应该看看后台任务。

当 Apple 说`small amount of time to process location data`时，您不应该真正依赖在`locationManager:didUpdateToLocation:fromLocation:`方法返回后获得任何处理时间。假设您在单独的线程中异步运行 HTTP 请求，您可能没有足够的时间在应用程序暂停之前完成它。

UIBackgroundTasks 让你在后台请求操作系统额外的处理时间。发出 HTTP 请求可能就是这样的任务。时间限制为 10 分钟，但不能保证您有这么多时间。

在您的位置回调中，您应该为您的请求定义一个新的后台任务。如果操作系统决定它不能再给你更多的处理时间，过期处理程序块会随时触发。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    // Start your request here
    UIBackgroundTaskIdentifier backgroundTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        backgroundTask = UIBackgroundTaskInvalid;
        // Cancel your request here
    }];
} 
```

当请求完成时，您应该告诉应用程序任务已完成：

```
- (void)requestFinished:(id)request {
    [[UIApplication sharedApplication] endBackgroundTask:backgroundTask];
    backgroundTask = UIBackgroundTaskInvalid;
} 
```

在此示例中，我没有考虑到您可能会在请求完成之前收到多个位置回调。如果发生这种情况，您需要在开始新的请求之前取消该请求和当前后台任务，或者为每个请求创建单独的后台任务。

另一种方法是在位置回调方法中在主线程上同步运行 HTTP 请求，但这将是一件坏事，原因有多种，例如如果用户在请求时打开应用程序会锁定界面在跑。

# java - 解密字符串与预加密字符串不同

> ID：11329994
> 
> 赞同：2
> 
> 时间：2012-07-04T13:23:45.627
> 
> 标签：java, file, encryption, rsa

我有以下代码：

**全局变量**

```
public static PublicKey pubKey;
public static PrivateKey privKey;
public static Cipher cip; 
```

**主要的**

```
public static void main(String[] args) throws Exception {
    //Generate the keys

    KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
    kpg.initialize(1024);
    KeyPair kp = kpg.genKeyPair();
    Key publicKey = kp.getPublic();
    Key privateKey = kp.getPrivate();

    KeyFactory fact = KeyFactory.getInstance("RSA");
    cip = Cipher.getInstance("RSA/ECB/NoPadding");

    // Store Public Key.

    X509EncodedKeySpec x509EncodedKeySpec = new X509EncodedKeySpec(
            publicKey.getEncoded());
    FileOutputStream fos = new FileOutputStream("public.key");
    fos.write(x509EncodedKeySpec.getEncoded());
    fos.close();

    // Store Private Key.
    PKCS8EncodedKeySpec pkcs8EncodedKeySpec = new PKCS8EncodedKeySpec(
            privateKey.getEncoded());
    fos = new FileOutputStream("private.key");
    fos.write(pkcs8EncodedKeySpec.getEncoded());
    fos.close();

    //Get the public and private keys out of their files
    getPubAndPrivateKey();

    //Check if the keys gotten out of the files are the same as the generated files (this returns truetrue)
    System.out.print(publicKey.equals(pubKey));
    System.out.print(privateKey.equals(privKey));

    byte[] text = "This is my super secret secret".getBytes();
    encryptToFile("encrypted.txt", text );
    decryptToFile("encrypted.txt", "decrypted.txt");

} 
```

**从文件中获取密钥**

```
private static void getPubAndPrivateKey() throws IOException, Exception {
    // Read Public Key.
    File filePublicKey = new File("public.key");
    FileInputStream fis = new FileInputStream("public.key");
    byte[] encodedPublicKey = new byte[(int) filePublicKey.length()];
    fis.read(encodedPublicKey);
    fis.close();

    // Read Private Key.
    File filePrivateKey = new File("private.key");
    fis = new FileInputStream("private.key");
    byte[] encodedPrivateKey = new byte[(int) filePrivateKey.length()];
    fis.read(encodedPrivateKey);
    fis.close();

    KeyFactory keyFactory = KeyFactory.getInstance("RSA");
    X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(
            encodedPublicKey);
    pubKey = keyFactory.generatePublic(publicKeySpec);

    PKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(
            encodedPrivateKey);
    privKey = keyFactory.generatePrivate(privateKeySpec);

} 
```

**加密**

```
 public static void encryptToFile(String fileName, byte[] data)
        throws IOException {

    try {
        cip.init(Cipher.ENCRYPT_MODE, privKey);
        byte[] cipherData = cip.doFinal(data);
        String encryptedData = cipherData.toString();
        BufferedWriter out = new BufferedWriter(new FileWriter(fileName));
        out.write(encryptedData);
        out.close();

    } catch (Exception e) {
        throw new RuntimeException("Spurious serialisation error", e);
    }

} 
```

**解密**

```
private static void decryptToFile(String string, String string2)
        throws Exception {

    try {
        File encryptedFile = new File("encrypted.txt");

        byte[] encrypted = getContents(encryptedFile).getBytes();

        cip = Cipher.getInstance("RSA/ECB/PKCS1Padding");
        cip.init(Cipher.DECRYPT_MODE, pubKey);

        byte[] cipherData = cip.doFinal(encrypted);

        String decryptedData = cipherData.toString();
        BufferedWriter out = new BufferedWriter(new FileWriter(
                "decrypted.txt"));
        out.write(decryptedData);
        out.close();

    } catch (Exception e) {
        throw e;
    }
} 
```

**我已经检查过的东西**

*   解密时使用的数据与加密文件中的数据相同
*   生成的密钥与从文件中获取的相同
*   加密和解密都不会出错

**结果**
原始字符串：
My super secret secret
加密结果：
[B@1747b17 解密结果：[B@91a4fb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:16:49.403

如果您通过`toString()`方法打印出一个字节数组，您将获得一个完全独立于内容的值。

因此值 [B@1747b17 [B@91a4fb 只是垃圾，不会告诉你任何事情。

如果要打印字节数组的内容，请将其转换为 Base64 或十六进制字符串。

```
System.out.println(new sun.misc.BASE64Encoder().encode(myByteArray)); 
```

可以使用[Apache Commons Codec library](http://commons.apache.org/codec/)中的 org.apache.commons.codec.binary.Hex 生成十六进制字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:39:23.807

我同意楼上的回答。我想补充一点，在您的情况下，您可以简单地使用 FileOutputStream，将字节写入文件 - 例如：

```
public static void encryptToFile(String fileName, byte[] data)
        throws IOException {

    FileOutputStream out = null;
    try {
        cip.init(Cipher.ENCRYPT_MODE, privKey);
        byte[] cipherData = cip.doFinal(data);
        out  = new FileOutputStream(fileName);
        out.write(cipherData);
    } catch (Exception e) {
        throw new RuntimeException("Spurious serialisation error", e);
    } finally {
       if (fos != null) {
           try {
              fos.close();
           } catch (IOException ex) {
           }
       }
    }

} 
```