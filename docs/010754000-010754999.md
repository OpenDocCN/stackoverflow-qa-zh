# StackOverflow 问答 10754000-10754999

# c# - 如何查看 mongoDB 中的任何更改（新行）？

> ID：10754000
> 
> 赞同：2
> 
> 时间：2012-05-25T11:56:50.247
> 
> 标签：c#, winforms, mongodb, collections, onchange

有没有办法观察每个`collection`（甚至一个）`mongoDB`？现在我考虑使用计时器来检查文档编号或最后一个 ID，但也许有可能实现类似的机制`newDocumentAddedEvent`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T11:58:36.130

MongoDB 中没有触发器（还没有？），但是如果您正在运行一个[副本集](http://www.mongodb.org/display/DOCS/Replica+Sets)（正如您应该的那样），您的应用程序可以假装是一个追赶辅助，跟踪[oplog](http://www.mongodb.org/display/DOCS/Tailable+Cursors)[集合](http://ru.wiki.mongodb.org/display/DOCS/Replica+Sets+-+Oplog)并获取有关新插入/更新的信息.

这是一种非常有效的方法（mongodb 本身使用它进行复制）。

# linux - JFFS2 中使用的算法

> ID：10754001
> 
> 赞同：4
> 
> 时间：2012-05-25T11:56:57.017
> 
> 标签：linux, filesystems, linux-kernel, jffs2

我是 JFFS2 文件系统的新手。我正在寻找有关 JFFS2 中使用的垃圾收集算法的参考/文章/论文。如果有人引导我这样做，那就太好了。

谢谢。

-山姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T13:12:42.550

JFFS2 的最佳技术描述是[原始论文](http://linux-mtd.infradead.org/~dwmw2/jffs2.pdf)。

JFFS2 从设备的开头一直到结尾顺序写入，然后从头重新开始。在本次和后续的遍中，它会擦除​​在之前的遍中写入的块。它会擦除所有脏块和部分干净块（用于磨损均衡）。在擦除它们之前，它会在那些仍然需要的块中写入所有内容的新副本。不再需要的块的其余内容（垃圾）在擦除中消失。

# java - 使用 jquery post 通过 Http Servlet 启动一个新的 java 线程

> ID：10754008
> 
> 赞同：-1
> 
> 时间：2012-05-25T11:57:17.860
> 
> 标签：java, jquery, servlets, post

我有一个带有开始/暂停按钮（控制和 xml 提取器）的网页，单击该按钮时，将执行以下 jquery 函数：

```
function start() {
    // Posts to the start servlet
    $.post("servlets/start", function(data) {
        update();
    });
} 
```

我有一个 web.xml 文件，将 url 'servlets/start' 映射到一个名为 'StartServlet.java' 的 HttpServlet。这个 servlet 的 doPost 方法应该在一个新线程上启动一个 xml 提取器，或者，如果一个提取器已经在运行，它应该暂停它。就这些。doPost 方法只调用 startExtractor() ，如下所示。

```
 private void newExtractor() {
        ArrayList<URL> urls = null;
        try {
            String path = this.getServletContext().getRealPath(
                    "internalLinks.txt");
            urls = GlobalUtils.getLinks(path);
            extractor = new Extractor(urls);
            thread = new Thread(extractor);
            fillContextPool(extractor, false);
        } catch (IOException e) {
            System.out.println("Failed to start");
        }
    }

    private void startExtractor() {
        if (thread == null) {
            newExtractor();
            thread.run();
        } else {
            extractor.togglePause();
            fillContextPool(extractor, stopForced);
        }
    } 
```

问题是，直到提取器完成后，jquery 帖子才完成，这意味着在提取器完成之前无法再次单击该按钮；本质上使得无法真正暂停提取器。

关于如何在提取器启动时使帖子完成的任何想法，而不必等到它完成？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:00:11.093

使用该`start()`方法启动一个线程。不是`run()`方法。

# jquery - 从删除函数中获取值 - jQuery

> ID：10754012
> 
> 赞同：0
> 
> 时间：2012-05-25T11:57:40.840
> 
> 标签：jquery

我的 aspx 页面中有一个自动完成框，如果我选择任何数据，则从列表中将值绑定到这样的 div 中，

```
 var data = "<div class='close'><table><tr><td rowspan='4' width='50px;'>
      <img src='" + studentItem.Photo + "' Width='48' Height='48'  /></td><td>" 
      + studentItem.Name + " ( <span class='stuId'>" + studentItem.StudentId 
      + "</span> )</td><td align='right' ><div class='close16'/></td></tr>
      <tr><td><table cellpadding='0' cellspacing='0'><tr><td>" 
      + studentItem.Email + "</td><td>&nbsp;|&nbsp;</td><td>" 
      + studentItem.Mobile + "</td></tr></table></td></tr></table></td></tr>
      </table></div>"; 
```

并将数据绑定到一个div中

```
$("#students").append(data); 
```

我可以删除像

```
 $(document).on('click', '.close16', function () {
            $(this).parentsUntil('#students').remove();
        }); 
```

这里我想要做的是如果我点击删除（close16），我需要获取相应的学生ID（在即`stuId`跨度中）

我`alert($("stuId").text());`在点击事件中尝试过`close16`，但它没有显示任何内容，任何人都可以在这里帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:00:21.433

```
$(document).on('click', '.close16', function () {
    alert($(this).closest('table').find('.stuId').text()); /* span text */
    ...
    $(this).parentsUntil('#students').remove();
}); 
```

# c# - 实体框架起点

> ID：10754014
> 
> 赞同：0
> 
> 时间：2012-05-25T11:57:55.600
> 
> 标签：c#, entity-framework

我正在创建一个自定义成员资格提供程序，以便在我的所有 MVC3 和 ASP.NET 应用程序之间共享。我从在 CodeProject 上找到的一些示例代码开始。虽然一切都很好，但我想从示例代码中使用的 Linq-to-SQL 转移到 EF4。

我已经在线阅读了一些示例和一些教程。我对 ORM 的经验很少，但想对此进行扩展。不过现在，我需要了解三个实体生成器之间的区别。我有以下选择...

ADO.NET EntityObject 生成器 ADO.NET POCO 实体生成器 ADO.NET 自跟踪实体生成器

我的对象几乎已经在数据库中定义了。我也已经使用链接到 sql 将类映射到数据库。例如，我的用户。

```
[Table(Name = "User")]
    public class User {
        [Column(IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
        public int UserID { get; set; }
        [Column]
        public string UserName { get; set; }
        [Column]
        public string Password { get; set; }
        [Column]
        public string EmailAddress { get; set; }
        [Column]
        public string FirstName { get; set; }
        [Column]
        public string LastName { get; set; }
    } 
```

在可用的三个选项中，我应该从什么开始？还是有其他我不知道的选择？或者，至少有人可以为每个人提供足够的信息，以便我自己做出决定吗？

我希望我能快速完成这项工作，但似乎使用 ORM 可能比在数据库中创建存储过程和在代码中创建 DTO 更有效。任何帮助或链接将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:01:20.117

[此问题](https://stackoverflow.com/questions/62110/adonet-entity-framework-tutorials)中提供了一些教程的列表。

[这](http://forums.microsoft.com/msdn/ShowForum.aspx?ForumID=533&SiteID=1)是一个有用的实体框架论坛。

对我来说，当我开始使用实体框架时，最有用的参考资料是[Daniel Simmons 的 FAQ](http://social.technet.microsoft.com/wiki/contents/articles/3737.entity-framework-faq-en-us.aspx)。看看这个！

# c# - MVC Ajax Form returning entire contents of View

> ID：10754019
> 
> 赞同：3
> 
> 时间：2012-05-25T11:58:34.740
> 
> 标签：c#, jquery, .net, ajax, asp.net-mvc-4

I am using MVC4\. Unobtrusive JavaScript is enabled and referenced in my project. The Ajax scripts are loading in my shared master page. FireBug reports no errors or 404's.

I have added a `Text` box to my page, which updates the contents of a `Hidden` field inside of my `Ajax` form. When a user presses a key, and the `KeyUp` event fires, I force my `Ajax` form to submit by calling:

```
$("form#ajaxForm").trigger("submit"); 
```

Where *ajaxForm* is the name of the Ajax form. This works fine. The form is submitted, behind the scenes, and my controller event fires. The Model is updated with the new data, based on the input from the user.

However, where it gets strange, is when the result returns to my form. The entire contents of my form `div` tag is replaced by the result -- which is the entire page.

```
<div id="basic-modal-content"">
   <input id="breed" type="text"/>
<div>
<form id="ajaxForm" method="post" data-ajax-update="#results" data-ajax-mode="replace" data-ajax="true" action="/Poultry/ListBreeds?Length=7">
   <div id="results">
    ->THIS AREA IS GETTING REPLACED WITH THE ENTIRE FORM <-
      <div id="basic-modal-content">
      </div>
   </div>
</form> 
```

*   Notice how *basic-modal-content* now contains itself, another *basic-modal-content*. The result div should only contain the updates results, not the entire view -- obviously.

My code is as follows:

**View** (*BreedSelectorPartial.cshtml*)

```
@model IQueryable<Inert.BreedViewModel>

<script type="text/javascript">
    $(document).ready(function () {
        $("#breed").keyup(function (e) {
            $("input[name=breedSearch]").val($("#breed").val());
            $("form#ajaxForm").trigger("submit");
        });
    });
</script>

<div id="basic-modal-content">
<input id="breed" type="text" style="width:100%; height:22px;" />
    <div>
        <div style="margin-top: 4px;">
            <label for="breed">Begin by typing a breed, e.g. <span style="font-style: italic">Wyandotte</span></label>
        </div>
    </div>
    @using (Ajax.BeginForm("ListBreeds", "Poultry", new AjaxOptions {UpdateTargetId = "results" }, new { id = "ajaxForm" }))
    {
        <input id="breedSearch" name="breedSearch" type="hidden" />
    }
    <div id="results" style="height: 320px; color: black; margin-top: 12px; font-size: 18px;">
        @{
            var grid = new WebGrid(Model, ajaxUpdateContainerId: "results");
            int c = Model.Count();
         }
        @grid.GetHtml(tableStyle: "webgrid",
            alternatingRowStyle: "webgrid-alternating-row",
            rowStyle: "webgrid-row-style",
            displayHeader: true)
    </div>
</div>
<script type="text/javascript" src="/scripts/jquery.simplemodal.js"></script>
<script type="text/javascript" src="/scripts/basic.js"></script> 
```

**Controller** (*PoultryController.cs*)

```
[HttpPost]
public ActionResult ListBreeds(string breedSearch)
{
    InertDatabaseEntitiesConnection db = new InertDatabaseEntitiesConnection();
    var breeds = db.Breeds.Where(q => q.Name.Contains(breedSearch));
    var names = breeds.Select(q => new BreedViewModel { Name = q.Name });
    return PartialView("BreedSelectorPartial", names);
} 
```

I'm not sure where I'm going wrong on this. I've spent hours trying to figure this out. Any solutions?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T12:34:44.337

第一个问题是您使用了错误的`Ajax.BeginForm`帮助程序重载（但这不会导致不良行为，它只是一个旁注）：

```
@using (Ajax.BeginForm(
    "ListBreeds",                                      // actionName
    "Poultry",                                         // routeValues
    new AjaxOptions { UpdateTargetId = "results" },    // ajaxOptions
    new { id = "ajaxForm" })                           // htmlAttributes
) 
```

而你需要：

```
@using (Ajax.BeginForm(
    "ListBreeds",                                      // actionName
    "Poultry",                                         // controllerName
    null,                                              // routeValues
    new AjaxOptions { UpdateTargetId = "results" },    // ajaxOptions
    new { id = "ajaxForm" })                           // htmlAttributes
) 
```

* * *

现在真正的问题是您需要将`#results`div**放在**局部视图之外和主视图内：

```
<div id="results" style="height: 320px; color: black; margin-top: 12px; font-size: 18px;">
    @Html.Partial("BreedSelectorPartial")
</div> 
```

当然，如果您只需要更新该`WebGrid`部分，那么只将网格保留在部分内部并将表单移到主视图中会更有意义。

所以你的主要观点现在变成了：

```
@model IQueryable<BreedViewModel>
<script type="text/javascript">
    $(document).ready(function () {
        $("#breed").keyup(function (e) {
            $("input[name=breedSearch]").val($("#breed").val());
            $("form#ajaxForm").trigger("submit");
        });
    });
</script>

<div id="basic-modal-content">
    <input id="breed" type="text" style="width:100%; height:22px;" />
    <div>
        <div style="margin-top: 4px;">
            <label for="breed">Begin by typing a breed, e.g. <span style="font-style: italic">Wyandotte</span></label>
        </div>
    </div>
    @using (Ajax.BeginForm("ListBreeds", "Poultry", null, new AjaxOptions { UpdateTargetId = "results" }, new { id = "ajaxForm" }))
    {
        <input id="breedSearch" name="breedSearch" type="hidden" />
    }
    <div id="results" style="height: 320px; color: black; margin-top: 12px; font-size: 18px;">
        @Html.Partial("BreedSelectorPartial")
    </div>
</div> 
```

唯一需要更新的`BreedSelectorPartial.cshtml`部分是包含网格的部分：

```
@model IQueryable<BreedViewModel>
@{
    var grid = new WebGrid(Model, ajaxUpdateContainerId: "results");
}
@grid.GetHtml(
    tableStyle: "webgrid",
    alternatingRowStyle: "webgrid-alternating-row",
    rowStyle: "webgrid-row-style",
    displayHeader: true
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:10:43.927

前几天我有类似的事情。

我不记得确切的问题是什么，但它与返回整个对象有关，而不仅仅是对象的 HTML 元素。

我目前找不到代码，但是如果您使用的是 Firebug 或类似的东西，请查看您是否可以监视返回的数据，如果我没记错，我需要做的就是将 .html 添加到末尾线。

对不起，它有点含糊，但希望它会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:15:36.370

您确定您没有进行常规表单提交吗？我认为这条线 `$("form#ajaxForm").trigger("submit");` 是在做常规的表单提交。您可能应该在此处发布 ajax 表单，而不是调用正常的表单提交。因此，您会看到整个页面重新加载。

# android - Accessing Oracle database in android application

> ID：10754022
> 
> 赞同：-1
> 
> 时间：2012-05-25T11:58:36.470
> 
> 标签：android, oracle

I want to access an oracle database in my android app. I searched through many tutorials but didn't find the proper one. Can someone suggest me some good tutorials to access oracle in android.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:28:59.493

考虑到移动域，使用 JDBC 或 ODBC 驱动程序连接 mysql 或 oracle 数据库是不明智的，而且很可能不可能，因为它们很重，并且不是为在移动操作系统上运行而设计的。

选择 SOAP 或 RESTful 等轻量级 Web 服务……这些 Web 服务返回 xml 或 json 作为响应。在android端解析它并使用数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:05:14.657

您应该考虑移动服务器，这是 Oracle 专门为移动设备设计的一款明确产品。它包括一个完整的同步引擎，例如可以单独运行，也可以通过 API 从您的应用程序内部进行控制。

检查[Oracle Database Mobile Server 11g](http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html?origref=http://www.oracle.com/technetwork/database/database-lite/lite-mobile-server-083863.html)它可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:07:50.283

最好的方法是让代理/应用程序服务器与 oracle 通信，并可以通过方便的格式（如 json 或 xml）将数据传送到 android。

直接连接到 oracle 数据库服务器需要：

1.  稳定的网络连接
2.  oracle驱动，挺重的

# c# - 如何使用 Log4net 在应用程序中读取和显示我的日志文件信息

> ID：10754037
> 
> 赞同：1
> 
> 时间：2012-05-25T11:59:59.530
> 
> 标签：c#, log4net

我在我的应用程序中使用 Log4net。

谁能解释一下如何阅读我的日志文件（Txt）并将其显示在我的应用程序中。因为我的日志文件在另一台服务器中。

从服务器读取日志文件并将其显示在 C# 应用程序中的配置设置是什么。这是用于编写日志的代码。

```
 <log4net>
  <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
  <file value="\\10.8.8.87\temp\logs.log" />
  <appendToFile value="true" />
  <maximumFileSize value="10MB" />
  <maxSizeRollBackups value="50" />
  <rollingStyle value="Size" />
  <layout type="log4net.Layout.PatternLayout">
     <conversionPattern value="%identity---- %date [%thread] %-5level %logger - %message%newline" />
  </layout>
</appender>
<root>
  <level value="DEBUG" />
  <appender-ref ref="RollingFile" />
</root>
</log4net> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:04:44.880

您可以更好地使用例如 sql appender 来代替 rollingfile appender 将您的异常记录到数据库中，并且您可以从您的应用程序查询数据库。在此页面上，您可以找到一些配置示例：

[http://logging.apache.org/log4net/release/config-examples.html](http://logging.apache.org/log4net/release/config-examples.html)

# .htaccess - mod_rewrite 下载 - 使文件看起来可疑

> ID：10754041
> 
> 赞同：0
> 
> 时间：2012-05-25T12:00:05.740
> 
> 标签：.htaccess, mod-rewrite, download

我决定尝试使用 mod_rewrite 来隐藏用户可以下载的文件的位置。

所以他们点击指向“/download/some_file/”的链接，然后他们得到“/downloads/some_file.zip”

像这样实现：

```
RewriteRule ^download/([^/\.]+)/?$ downloads/$1.zip [L] 
```

这有效，除非当下载进度出现时我得到一个没有扩展名的文件“下载”，这看起来很可疑，并且用户可能不知道他们应该解压缩它。有没有办法让它看起来像一个实际的文件？还是有更好的方法我应该这样做？

为隐藏文件的位置提供一些上下文/原因。这是一个乐队，只要用户注册邮件列表，就可以免费下载音乐。

我也不需要在 .htaccess 中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:06:54.503

您可以通过发送`Content-disposition`标头来设置文件名：

[https://serverfault.com/questions/101948/how-to-send-content-disposition-headers-in-apache-for-files](https://serverfault.com/questions/101948/how-to-send-content-disposition-headers-in-apache-for-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:51:50.940

好的，所以我相信我可以使用 .htaccess 设置哪些标头

所以我改用php解决了这个问题。

我最初复制了一个在这里找到的下载 php 脚本： [How to rewrite and set headers at the same time in Apache](https://stackoverflow.com/questions/2364848/how-to-rewrite-and-set-headers-at-the-same-time-in-apache)

但是我的文件太大了，所以这不能正常工作。

经过一番谷歌搜索后，我发现了这个：[http ://teddy.fr/blog/how-serve-big-files-through-php](http://teddy.fr/blog/how-serve-big-files-through-php)

所以我的完整解决方案如下......

首先发送请求下载脚本：

```
RewriteRule ^download/([^/\.]+)/?$ downloads/download.php?download=$1 [L] 
```

然后获取完整的文件名，设置标题，并逐块提供：

```
<?php
if ($_GET['download']){
  $file = $_SERVER['DOCUMENT_ROOT'].'media/downloads/' . $_GET['download'] . '.zip';
}

define('CHUNK_SIZE', 1024*1024); // Size (in bytes) of tiles chunk

// Read a file and display its content chunk by chunk
function readfile_chunked($filename, $retbytes = TRUE) {
    $buffer = '';
    $cnt =0;
    // $handle = fopen($filename, 'rb');
    $handle = fopen($filename, 'rb');
    if ($handle === false) {
      return false;
    }

    while (!feof($handle)) {
        $buffer = fread($handle, CHUNK_SIZE);
        echo $buffer;
        ob_flush();
        flush();
        if ($retbytes) {
            $cnt += strlen($buffer);
        }   
    }
    $status = fclose($handle);
    if ($retbytes && $status) {
        return $cnt; // return num. bytes delivered like readfile() does.
    }
    return $status;
}

$save_as_name = basename($file);   
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: no-cache');
header("Content-Type: application/zip");
header("Content-Disposition: disposition-type=attachment; filename=\"$save_as_name\"");

readfile_chunked($file); 
?> 
```

# c# - Java 泛型 vs C# where 关键字

> ID：10754044
> 
> 赞同：4
> 
> 时间：2012-05-25T12:00:12.150
> 
> 标签：c#, java, generics, where

我在 C# 项目中有一个方法，看起来像这样

```
public T AddEC<T>() where T : EntityComponent, new() {
    if (!HasEC<T>())
    {
      T nComponent = new T();
    }
} 
```

现在我最近才开始正确使用 Java 泛型，但我不知道如何移植这样的方法，或者由于语言限制甚至可能，任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:01:38.223

这是一个非常不错的文章。

[http://www.jprl.com/Blog/archive/development/2007/Aug-31.html](http://www.jprl.com/Blog/archive/development/2007/Aug-31.html)

从那个来源

> Java 类型和方法约束是在声明泛型类型参数的“<”和“>”中使用“迷你表达式语言”指定的。对于每个具有约束的类型参数，语法为：
> 
> ```
> TypeParameter ListOfConstraints 
> ```
> 
> `ListOfConstraints`以下约束之一的“&”分隔列表在哪里：
> 
> *   使用以下方法在通用类型参数上指定基类或实现的接口： extends BaseOrInterfaceType
> 
> （必须使用 '&' 代替 ',' 因为 ',' 分隔每个泛型类型参数。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:05:45.180

这是一个例子

```
class GenericClass<T extends Number & Comparable<T>> {
    void print (T t) {
        System.out.println (t.intValue ()); // OK
    }
} 
```

在此示例中，Number 和 Comparable 是约束，因为它们将出现在 C# 类声明的 where 子句中。

# ffmpeg - FFMPEG：AVPacket 的 FLV 标头

> ID：10754047
> 
> 赞同：0
> 
> 时间：2012-05-25T12:00:28.310
> 
> 标签：ffmpeg, flv

我在我的应用程序中使用了 FFMPEg 代码，我需要为我的程序获取 FLV 数据包。为此，我使用 avcodec_encode_video2()。我的问题是该函数创建了 AVPacket 数据包，它不保留完整的 FLV 格式，只有它的主体。但我仍然需要它的标题。通常另一个函数 (av_write_frame()) 可以做到这一点。我不能在我的应用程序中使用 av_write_frame()，因为它不符合我的要求。所以也许有人知道 ffmpeg 库中的一个函数，它可以将 FLV 标头添加到通过 avcodec_encode_video2() 创建的数据包中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:45:27.510

FLV 标头本身相对简单。

可以使用以下代码对其进行建模：

```
/* FLV file header */
#define FLV_SIGNATURE       "FLV"
#define FLV_VERSION         ((uint8)0x01)

#define FLV_FLAG_VIDEO      ((uint8)0x01)
#define FLV_FLAG_AUDIO      ((uint8)0x04)

typedef struct __flv_header {
    uint8_t         signature[3]; /* always "FLV" */
    uint8_t         version; /* should be 1 */
    uint8_t         flags;
    uint32_t        offset; /* always 9 */
} flv_header; 
```

该`flags`字段是一个位掩码，说明文件是否拥有视频、音频或两者兼有。例如，如果您的文件有音频和视频，则其值为 5。

请注意，该`offset`字段以 big-endian 编码，在 little-endian 平台上由值 150994944 表示。

如果你不想使用这样的结构，并且有办法直接写一个缓冲区，你可以这样创建它：

```
uint_8 buffer[9] = {0x46, 0x4c, 0x56, 0x01, 0x05, 0x00, 0x00, 0x00, 0x09}; 
```

# tfs-sdk - 如何以编程方式获取工作项“集成构建”字段值

> ID：10754049
> 
> 赞同：0
> 
> 时间：2012-05-25T12:00:36.830
> 
> 标签：tfs-sdk, sdf

我目前已经实现了 isubscriber 接口，以便能够检测工作项何时发生更改。我注意到，当将事件转换为引用的 workitemchanged 事件时：corefields 和 changedfields。但是，我无法从工作项中获取“集成构建”字段，因为它是基于工作项是错误类型时的。除了必须引用 Microsoft.TeamFoundation.WorkItemTracking.Client.dll 并使用函数 GetService 之外，如何获取此字段值。

干杯

赛博鸡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:10:10.260

获取您工作的 WorkItem 对象（从其 ID），使用 WorkItem.Item 属性（请参阅[此处的文档](http://msdn.microsoft.com/en-us/library/bb164821)）和字段的引用名称。

# iphone - UIScrollView - 防止 UIImageView 作为 UIScrollView 的子视图被拖出屏幕

> ID：10754050
> 
> 赞同：0
> 
> 时间：2012-05-25T12:00:39.483
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UIImageView 元素作为我的主要 UIScrollView 元素的子视图。我希望图像始终填满整个屏幕，但我可以将边缘拖得太远，以便黄色“背景”变得可见。如果我抬起手指，图像会“弹回”并正确填满屏幕。

我想防止将图像拖出屏幕。但是，我确实希望将图像拖出“安全区域”后反弹。

这是我的 ScrollView 初始化：

```
- (id)initWithFrame:(CGRect)frame{
self = [super initWithFrame:CGRectMake(0, 0, frame.size.height, frame.size.width)];
if (self) {
    [self initImageValues];

    self.showsVerticalScrollIndicator = NO;
    self.showsHorizontalScrollIndicator = NO;
    self.bouncesZoom = YES;
    self.decelerationRate = UIScrollViewDecelerationRateFast;
    self.delegate = self;
    self.backgroundColor = [UIColor yellowColor];
    self.minimumZoomScale = 1.0;
    self.maximumZoomScale = 2.0;
    [self setCanCancelContentTouches:YES];
    self.clipsToBounds = YES;

    // Load Image
    imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:imageName]];
    [self addSubview:imageView];

    [self setContentSize: CGSizeMake(imageView.frame.size.width, imageView.frame.size.height)];

    // Set bigger "bounce" zone (safety area)
    self.contentInset=UIEdgeInsetsMake(-SAFETY_ZONE,-SAFETY_ZONE,-SAFETY_ZONE,-SAFETY_ZONE);

    self.scrollEnabled = YES;

}
return self;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:33:42.523

使用这些委托方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView 
```

然后读取偏移量，如果它超出“安全区域”，则返回。

可能是您需要 UIScrollView 中的另一个委托方法，但是这样的解决方法应该可以解决您的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:08:39.473

尝试这个： **

```
self.scrollView.maximumZoomScale = 1.0;
self.scrollView.minimumZoomScale = 1.0; 
```

**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:04:15.743

尝试将其`bounces`属性设置为`NO`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:05:27.727

尝试在滚动视图上设置反弹：

```
self.bounces = NO; 
```

# java - 如何避免嵌套 h:form (s)？

> ID：10754054
> 
> 赞同：-2
> 
> 时间：2012-05-25T12:00:58.543
> 
> 标签：java, jsf, facelets

由于某些演示需要，我`h:form`在 parent 中遇到了一个标签`h:form`。我应该如何在不影响页面外观的情况下完成这项工作？

```
 <h:form>
        ....
        ....

        <h:outputText value="Your city not listed? Add here..">
        <p:dialog>
             <h:form>   
                <p:commandButton value="Add" action="#gpController.create()}" />
             </h:form>                 
        </p:dialog>

        ....
        ....
    </h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:55:01.297

只需将对话框放在表单之外。对话框组件位于视图中的 UI 并不重要。

```
<h:form>
   ...
   <h:outputText value="Your city not listed? Add here..">
   ...
</h:form>
<p:dialog>
     <h:form>   
        <p:commandButton value="Add" action="#{gpController.create()}" />
     </h:form>                 
</p:dialog> 
```

# javascript - 使用 jquery $.ajax 提交表单 - 仅第一次提交

> ID：10754057
> 
> 赞同：1
> 
> 时间：2012-05-25T12:01:10.917
> 
> 标签：javascript, jquery, ajax

我在提交 AJAX 表单时遇到问题 - 使用[本教程](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)。

我的表格在里面`div#upform`，当我试图通过`$.ajax`它提交任何一个时，它只提交第一个，这里是代码：

```
$(function() {  
    $(".button").click(function() {  
        var txt = $(".tekst#test").val();  
        var dataString = 'tekst='+ tekscior;

        $.ajax({  
            type: "POST",  
            url: "upload/base",  
            data: dataString,  
            success: function() {  
                $('#upform').html("<div id='message'></div>");  
                $('#message').html("<h2>described!</h2>")  
                    .append("<p>thanks!</p>")  
                    .hide()  
                    .fadeIn(1500, function() {  
                        $('#message').append("<img id='checkmark' src='http://artivia-dev2/i/check.png' />");  
                    });  
            }  
        });  
        return false; 
    });  
}); 
```

这是我的表格：

```
<!-- ONLY THIS ONE IS SUBMITTED, EVEN WHEN I'M SUBMITTING THE SECOND ONE! -->
<div class="slidingDiv">
    <div id="upform">
        <form name="contact" action="">  
            <input type="text" value="TESTFORM" class="tekst" id="test">
            <input type="submit" name="submit" class="button" id="submit" value="Send" />
        <form>
    </div> 

    <div class="slidingDiv">
        <div id="upform">
            <form name="contact" action=""> 
                <input type="text" value="TESTFORM" class="tekst" id="test">
                <input type="submit" name="submit" class="button" id="submit" value="Send" />
            <form>
        </div> 
```

**@@更新**

问题，当我提交一个表单时 - 这很好 - 但是在提交这个表单后我想提交第二个表单时 - 数据已正确提交，但成功消息在两种表单中都刷新了，这就是我试图解决的问题使用，但它不起作用：

```
 $.ajax({  
          type: "POST",  
          url: "upload/base",  
          data: dataString,  
          success: function() {  

        upform.html("<div class='message'></div>");  

             var mess =  $(this).closest('.message');

             mess.html("<h2>Described</h2>")  
            .append("<p>Thanks!</p>")  
            .hide()  
            .fadeIn(1500, function() {  
            mess.append("<img id='checkmark' src='http://ar-dev2/i/check.png' />");  
            });  

          }  
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T12:04:21.650

首先，您不应该`id`对多个元素使用相同的元素。取而代之的是，您可以使用`class`or `name`or`data`属性。

```
$(".button").click(function() {  

   var upform = $(this).closest('.upform'); // keep reference of upform

    var txt = $(this).prev(".tekst").val();  // this will retrieve the value of input
                                             // nearest to the button

    var dataString = 'tekst='+ tekscior;

    ......

    $.ajax({
      type: "POST",  
      url: "upload/base",  
      data: dataString,
      success: function() {
        upform.html();
        .....
      }
    });
}); 
```

### 选择器问题`var txt = $(".tekst#test");`：

它已经从顶部开始搜索，当它找到匹配项时，它会停止旅程并返回值，你总是会得到第一个的值。如果你使用

`var txt = $(".tekst");`没有`id`，你将面临同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:04:30.117

ID 是单数的。您不能在页面上多次使用相同的 id！

如果要重复标识符，请使用名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:05:44.823

您应该为这两种形式使用不同的 id。您的两个表单都具有相同的 id`upform`

# javascript - blueimp 多文件上传器

> ID：10754058
> 
> 赞同：2
> 
> 时间：2012-05-25T12:01:10.993
> 
> 标签：javascript, jquery, file-upload, blueimp

我正在使用`blueimp multiple file uploade`r，一切都很好。但是在某些情况下，我必须使用单个文件上传。是否有某种选项可以触发以禁用插件的多文件部分？

**重要的是流量不会改变。**这样我就可以继续使用它，但可以轻松禁用多个文件。

我想提一下，如果超过 maxx 文件数，我不想给出错误。我只想一起禁用多个文件。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T12:05:13.247

这很简单，只需删除`multiple`输入元素上的属性即可。

# php - 设置一个 cronjob 来执行一个 api 回调 URL

> ID：10754059
> 
> 赞同：-1
> 
> 时间：2012-05-25T12:01:12.773
> 
> 标签：php, api, cpanel

请任何人都可以给我一个关于如何设置 cronjob 以每 15 分钟执行一次我的 API 回调 URL 的线索，因为我的控制面板没有这种能力，请我需要带有示例的规范，因为我仍处于电枢级别，例如：我想设置一个 cronjop 来执行这个 API 回调 url [http://shop.site.com/modules/cashenvoy/validation.php](http://shop.site.com/modules/cashenvoy/validation.php)每 15 分钟，我的控制面板没有直接 cronjob 设置的选项，请我该如何设置一个 cronjob 来执行这个 URL，谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:09:12.337

```
*/15 * * * *       root    /usr/bin/wget -O - http://localhost/your/callback.html >/dev/null 2>&1 
```

这是用于 /etc/crontab - 如果你想把它放到每个用户的 crontab 中（使用 crontab -e），只需省略“root”。

**另请注意，运行 root 之类的东西是个坏主意 - 您可能应该将“root”替换为非特权用户名，例如“nobody”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:11:58.333

许多网络托管站点都有自己的控制面板，您可以在其中设置和编辑 cronjobs。例如，在 cPanel 中，有此选项。请先看看那里。

如果控制面板没有这个能力，也许你可以试试这个命令：

```
0,15,30,45 * * * * /path/to/command 
```

[资源](http://www.electrictoolbox.com/run-cron-command-every-15-minutes/ "资源")

# java - IzPack TargetPanel 是否允许选择多个目录？

> ID：10754062
> 
> 赞同：0
> 
> 时间：2012-05-25T12:01:24.567
> 
> 标签：java, deployment, installation, izpack

IzPack TargetPanel 允许一个选择一个目标目录。但是我需要允许用户选择两个（一个用于应用程序，一个用于数据）。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:19:16.963

您可以创建一个`UserInputPanel`并从用户那里获取路径作为变量。然后你可以在任何你想要的地方使用变量替换。您必须添加一个`userInputSpec.xml`文件并定义自己的面板（任意数量）。要获取目录，请使用`<field type="dir" ... >`

我的一个应用程序的例子`userInputSpec.xml`。我在安装程序中包含 mongoDB 并使用它来获取一些设置。

```
<userInput>
    <panel order="0">      
        <createForPack name="MongoDB" />
        <!-- Other settings like port, ip, username, password-->
        <field type="staticText" align="left" txt="Select the catalogue where data will be stored." id="staticText.registry.db.data.text" />
        <field type="dir" align="left" variable="mongo.data.dir">
            <spec txt="Data directory" size="25" set="$INSTALL_PATH\data" mustExist="false" create="true" />
        </field>
    </panel>    
    <panel order="1">
        <!-- definition of a second panel -->
    </panel>
</userInput> 
```

您还需要`userInputSpec.xml`在主安装文件中包含作为资源，并`UserInputPanel`为您在其中定义的每个面板添加一个元素`userInputSpec.xml`

像这样（在`<installation>`元素中：

```
<resources>
    <!-- other resources -->
    <res id="userInputSpec.xml"  src="userInputSpec.xml" />             
</resources>

 <panels>
    <panel classname="HelloPanel"/>             
    <panel classname="InfoPanel"/>
    <panel classname="LicencePanel"/>
    <panel classname="TargetPanel"/>
    <panel classname="TreePacksPanel"/>
    <panel classname="UserInputPanel"/>
    <panel classname="UserInputPanel"/>
    <panel classname="InstallPanel"/>
    <panel classname="ShortcutPanel"/>
    <panel classname="FinishPanel"/>
</panels> 
```

注意我在 userInputSpec 中定义了两个面板的双重出现

确保您`UserInputPanels`出现在之前，`InstallPanel`因为您必须在复制文件之前从用户那里获取变量。

这只是我的应用程序中的一个示例。请参阅官方文档以了解我使用的元素和属性的含义。有许多与用户输入相关的功能。

# facebook - 我的应用程序的管理员，但仍然无法测试操作

> ID：10754069
> 
> 赞同：0
> 
> 时间：2012-05-25T12:02:01.513
> 
> 标签：facebook, action

我是我的应用程序的管理员。我正在尝试在图形 API 资源管理器中测试一个操作并返回......

```
 {
   "error": {
   "message": "(#100) The Action Type namespace:Place is not approved, so app 1456349955xxxxx can only publish to administrators, developers, and testers of the app.  User 63114xxxx is not one of those roles.", 
   "type": "OAuthException", 
   "code": 100
   }
 } 
```

用户 id 实际上是我的用户 id。还有人打这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:22:18.257

您应该选择您是管理员的应用程序。默认情况下，它使用图形 api explorer 应用程序。

您可以在时间轴中找到该应用程序 ![在此处输入图像描述](../Images/16d27accaaf1251389c0f5199f266f58.png)

# asp.net - 在 ASP.NET MVC 中构建 CustomAuthorization

> ID：10754073
> 
> 赞同：2
> 
> 时间：2012-05-25T12:02:15.707
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, authorization, custom-attributes

在`DB`我有`Role`和`User`实体有一对多的关系。

我想要做的是构建自定义授权过滤器。我见过的所有教程都使用默认`ASP.NET`会员资格。我所知道的是我需要继承`AuthorizationAttribute`但不知道我需要重写哪些方法以及如何实现它们。

```
public class UserAuth : AuthorizeAttribute
{

} 
```

在`DB`：

**角色**

```
public class Role
{
    [Key]
    public int RoleID { get; set; }

    [Required]
    public int RolenameValue { get; set; }

    [MaxLength(100)]
    public string Description { get; set; }

    // // // // //

    public Rolename Rolename 
    {
        get { return (ProjectName.Domain.Enums.Rolename)RolenameValue; }
        set { RolenameValue = (int)value; }
    }

    public virtual ICollection<User> Users { get; set; }
} 
```

**用户**

```
public class User
{
    [Key]
    public int UserID { get; set; }

    [Required]
    [MaxLength(30)]
    public string Username { get; set; }

    [Required]
    [MinLength(5)]
    public string Password { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [MaxLength(30)]
    public string FirstName { get; set; }

    [MaxLength(50)]
    public string LastName { get; set; }

    [DataType(DataType.Date)]
    public DateTime Birthdate { get; set; }

    public int GenderValue { get; set; }

    // // // // // // //

    public Gender Gender
    {
        get { return (ProjectName.Domain.Enums.Gender)GenderValue; }
        set { GenderValue = (int)value; }
    }

    public int RoleID { get; set; }

    [ForeignKey("RoleID")]
    public Role Role { get; set; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T12:04:32.330

您不需要创建自定义属性。您可以使用现有的`AuthoriseAttribute`，但您应该做的是实现自定义`Principal`类，该类将使用您自己的 DB 角色。在您的`Principal`课程中，您将实现 IsInRole 方法：

```
public bool IsInRole(string role)
{
    if(this.Roles == null)
        this.Roles = DependencyResolver.Current
           .GetService<ISecurityService>()
           .GetUserPermissions(this.Identity.Name);

    return this.Roles.Any(p => p.Name == role);
} 
```

您应该`Principal`在 Global.asax 中设置您的自定义

```
 void OnPostAuthenticateRequest(object sender, EventArgs e)
    {
         // Get a reference to the current User 
        IPrincipal user = HttpContext.Current.User; 

        // If we are dealing with an authenticated forms authentication request         
        if (user.Identity.IsAuthenticated && user.Identity.AuthenticationType == "Forms") 
        { 
            // Create custom Principal 
            var principal = new MyCustomPrincipal(user.Identity); 

            // Attach the Principal to HttpContext.User and Thread.CurrentPrincipal 
            HttpContext.Current.User = principal; 
            System.Threading.Thread.CurrentPrincipal = principal; 
        }
    } 
```

# android - 无法从视图转换为按钮

> ID：10754079
> 
> 赞同：0
> 
> 时间：2012-05-25T12:02:41.507
> 
> 标签：android

我在这里遇到了非常令人沮丧的问题。我有这个代码：

```
Button b = findViewById(android.R.id.button1); 
```

我收到了这个错误：

> 类型不匹配：无法将表单视图转换为按钮

但是button1**是**一个按钮！！在我的 XML 布局文档中，按钮的声明如下：

```
<Button
   android:id = "@+id/button1"
   android:layout_width = "wrap_content"
   android:layout_height = "wrap_content"
   android:text = "Next Activity" 
/> 
```

在我的 R.java 中：

```
public static final class id {
   public static final int button1=0x7f050000;
} 
```

为什么我得到并错误地说我的按钮实际上是一个按钮时是一个视图......这是一个谜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:03:52.153

删除`android.R from packages`并导入您的`R`.

```
import com.companyname.productname.R; 
```

并更改按钮参考

```
Button b = (Button)findViewById(R.id.button1);
                                ^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:04:51.367

您需要将视图转换为 Button：

```
Button b = (Button) findViewById(android.R.id.button1); 
```

更多详细信息，请访问[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

另外，正如其他人回答的那样，id是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:05:01.047

你的错误在这里-Button b = findViewById(android.R.id.button1);

将上面的行替换为 findViewById(R.id.button1);

# session - 使用 memcached 作为会话故障转移恢复 JSF 应用程序状态

> ID：10754081
> 
> 赞同：2
> 
> 时间：2012-05-25T12:02:49.860
> 
> 标签：session, jsf, serialization, memcached, restore

我设置了两个相同的 tomcat 服务器，它们托管相同的 Web 应用程序（Sun RI JSF 2 / Tomahawk）。对于负载平衡和故障转移场景，我使用 nginx 服务器作为反向代理，将请求委托给一台或另一台服务器。现在定义了一个 tomcat 作为备份解决方案，以便 tomcat server 1 处理所有请求。当我终止 tomcat 1 的进程时，nginx 很好地将以下请求委托给 tomcat 服务器 2。为了重用会话数据，我将两个 tomcat 服务器配置为使用 memcached 作为会话存储。JSF 被配置为将其状态存储在服务器上。

关于日志文件，这个设置看起来相当不错，会话数据是使用 memcached 服务器读取和存储的。例如，这有助于使用 Web 应用程序，即使 Tomcat 1 已关闭，也无需再次登录。

然而，似乎我的（会话范围的）支持 bean 在分别恢复会话后没有被存储或使用。表单字段留空，应该用会话 bean 中的数据填充。

是否有可能用上述技术做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T13:01:36.460

使用 memcached-session-manager 和 OWB，您应该使用 tomcat < 7.0.22，因为在此版本中 ServletRequestListeners 的通知已更改（这是 OWB 用于故障转移支持的机制）。

我目前正在开发与 OWB 和 tomcat >= 7.0.22 一起使用的新版本的 msm。

# html - 跨度在 h2 内 - 不能应用内联样式

> ID：10754087
> 
> 赞同：1
> 
> 时间：2012-05-25T12:03:24.113
> 
> 标签：html, css

我的页面上有这个标题：

```
<h2 style='color:#33bbff;'>Los Angeles, <span style='font-size:10px;color:black;'>Unites States</span></h2> 
```

如你所见，我希望这个国家的颜色和大小与城市不同。现在，我可能已经做过一百次类似的事情了，但由于某种原因，这里没有应用跨度样式 - 国家看起来就像城市。我究竟做错了什么？

我尝试编写 h2 span { ... } 之类的样式，而不是内联，但没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:08:00.273

您的代码似乎没问题（请参见[此处](http://jsfiddle.net/eezgY/)）。

也许您已经缓存了旧版本。在您的测试浏览器中，按 CTRL+F5 强制重新加载所有文件。

否则，请尝试检查您是否使用了`!important;`强制样式并忽略其他样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:13:52.223

使用**开发人员工具栏**（例如*FireBug* ）对其进行调试，并跟踪应用的样式，也许其他东西会覆盖样式。( [http://jsfiddle.net/unVNN/](http://jsfiddle.net/unVNN/) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:18:00.613

没有错，直接在浏览器中删除cash，CTRL+F5

# iphone - iOS StoreKit - 通过应用登录进行应用内购买

> ID：10754090
> 
> 赞同：0
> 
> 时间：2012-05-25T12:03:36.210
> 
> 标签：iphone, ios, in-app-purchase, in-app-billing, storekit

这是应用程序现在的场景：

我正在开发的应用程序有它自己的登录服务，即用户可以在应用程序上注册并登录它。

用户登录到应用程序（通过应用程序的凭据），然后可以选择购买其中列出的 10 本书中的任何一本。购买这本书后，它将使用他的应用程序的用户 ID 进行注册，并且每次用户使用该 ID 登录时，在任何设备上，他都可以使用该书。

现在，由于在这种情况下，用户应该能够一次又一次地购买一本书（但使用不同的应用程序凭据），我正在考虑使用“消耗品”产品选项并在应用程序本身中添加一个条件来检查哪些书登录的用户已经购买并且不向他们显示他们购买的书籍（同样，通过应用程序凭据）。这样，就再也买不到同一本书了。

那可能吗？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:24:52.830

我认为您想要实施非消耗性产品，如果用户从一台设备购买任何书籍，那么它也应该可供其他设备上的用户使用。Store Kit 提供内置支持以在多个设备上恢复非消耗性产品。恢复交易，您的应用程序调用支付队列的 restoreCompletedTransactions 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:28:48.783

如果我理解正确，您只是不想让用户多次购买同一本书。如果是这样，您只需要在应用程序启动时检查用户已经购买了哪些书籍，然后更正从已购买的书籍中删除的可购买书籍列表。

# opencv - Opencv cvHoughCircles-参数疑惑

> ID：10754093
> 
> 赞同：0
> 
> 时间：2012-05-25T12:03:44.287
> 
> 标签：opencv

`cvHoughCircles`我对参数有一些疑问。我有一个有一些圆圈的图像，我想数一数，计数给了我错误的圆圈数。

所以我不知道如何选择一些函数的参数，比如：

```
dp,min_dist,param1,param2,min_radius, max_radius. 
```

我不知道我在这个参数中使用了哪些数字。我该如何计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:20:51.067

选择参数取决于您使用的图像。参数本身的解释可以在参考这里找到

[http://opencv.willowgarage.com/documentation/cpp/imgproc_feature_detection.html#cv-houghcircles](http://opencv.willowgarage.com/documentation/cpp/imgproc_feature_detection.html#cv-houghcircles)

使用具有以下参数的函数

```
HoughCircles(gray, circles, CV_HOUGH_GRADIENT,2, gray->rows/4, 200, 100, 10, 50); 
```

将使其搜索 dp 为 2 的圆，图像 1/4 的圆之间的最小距离和最大 200,100 的累加器值，以确定接受什么作为圆。10 和 50 是圆圈接受的最小和最大半径。

如果您无法找到这些参数，请尝试制作一个将这些值附加到滑块的测试程序，以便您可以在测试图像上看到结果。

特别是 param2 是很难通过测量来确定的。因为您知道图像中有多少个圆圈，所以您可以通过以下方式进行参数抓取：

```
for(int i=0;i<200;i++) {
 cv::HoughCircles(gray, circles, CV_HOUGH_GRADIENT,2, gray->rows/4, 200, i, 10, 50);
 std::cout<<"HoughCircles with param2="<<i<<" gives "<<circles.size()<<" circles"<<endl;
} 
```

我不知道 param1 和 2 是如何完全相关的，但是您可以使用双 for 循环来做同样的事情来找到最佳值。其他值需要从图片中测量。除了制作屏幕截图，您还可以使用以下功能保存此图像：

```
cvSaveImage("image.jpg",gray); 
```

以确保您真正测量的是准确的图片。

# sql - SQL 查询：每刻钟数

> ID：10754095
> 
> 赞同：1
> 
> 时间：2012-05-25T12:03:45.997
> 
> 标签：sql, oracle, date-arithmetic

我有一个包含 4 列的 sql 表（id​​ (char)、ref(varchar)、received(timestamp)、sent(timestamp)）。我想做一个 sql 查询，根据“received”列获取每一刻钟的引用数。我一直在搜索一段时间，但在查询中没有找到真正的解决方案。有人知道如何做到这一点吗？提前致谢。

亲切的问候，

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:23:12.767

您可以使用[TRUNC](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions220.htm#i79761)和[EXTRACT](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions059.htm#i1017161)每一刻钟对数据进行分组：

```
SELECT date_hour, time_quarter_hour, COUNT(*)
  FROM (SELECT TRUNC(your_timestamp, 'hh24') date_hour,
               floor(EXTRACT(MINUTE FROM your_timestamp) / 15) time_quarter_hour
          FROM your_table)
 GROUP BY date_hour, time_quarter_hour 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:33:08.780

见下文一试。时间戳在这里并不重要，可以是一个日期。

```
select 
   trunc(sysdate, 'hh24') + trunc(to_char(sysdate,'mi')/15)*15/1440 
from dual; 
```

# c++ - SIP Python/C++ 绑定无法编译为简单示例

> ID：10754096
> 
> 赞同：0
> 
> 时间：2012-05-25T12:03:47.967
> 
> 标签：c++, python, python-sip

在使用 SIP 成功编译 Python/C 绑定后，我想用 Python/C++ 做同样的事情。由于某种原因，这不起作用。

这是文件：

fib.cpp

```
#include "fib.h"

int fib1(int n)
{
    if (n <= 0) {
        return 0;
    } else if (n <= 2) {
        return 1;
    } else {
        return fib1(n-1) + fib1(n-2);
    }
} 
```

文件.h

```
int fib1(int n); 
```

fib.sip

```
%Module fib

%Include fib.h 
```

我运行以下命令来构建中间文件： `sip -c . fib.sip`

到目前为止一切正常。

现在我想使用 distutils 构建 .pyd 文件。

安装程序.py

```
from distutils.core import setup, Extension
import sipdistutils

setup(
  name = 'fib',
  versione = '1.0',
  ext_modules=[
    Extension("fib", ["fib.sip", "fib.cpp"]),
    ],

   cmdclass = {'build_ext': sipdistutils.build_ext}
 ) 
```

我运行以下命令： `python setup.py build`

这失败并出现以下错误：

```
build\temp.win32-2.7\Release\sipfibcmodule.cpp:29:29: error: 'fib1' was not declared in this scope
error: command 'gcc' failed with exit status 1 
```

问题可能是什么？顺便说一句，不应该将 c++ 用作编译器而不是 gcc 吗？

任何帮助表示赞赏！

亲切的问候

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:35:27.613

我找到了一个足够好的解决方案：命名空间。下次我会更好地阅读文档。我还应该提到一个带有斐波那契类的解决方案可以解决这个问题，但我觉得这并不令人满意。

可以在下面找到文件的内容。

fib.cpp

```
#include "fib.h"

namespace test
{
    int fib1(int n)
    {
        if (n <= 0) {
            return 0;
        } else if (n <= 2) {
            return 1;
        } else {
            return fib1(n-1) + fib1(n-2);
        }
    }
} 
```

文件.h

```
namespace test
{
    int fib1(int n);
} 
```

fib.sip

```
%Module fib

namespace test {
    %TypeHeaderCode
    #include "fib.h"
    %End

    int fib1(int n);
}; 
```

setup.py - 没有任何改变

使用了与前面提到的完全相同的命令。

# windows-phone-7 - 不允许在查询中显式构造实体类型

> ID：10754098
> 
> 赞同：0
> 
> 时间：2012-05-25T12:03:49.497
> 
> 标签：windows-phone-7

> **可能重复：**
> [不允许在查询中显式构造实体类型“###”](https://stackoverflow.com/questions/787296/explicit-construction-of-entity-type-in-query-is-not-allowed)

以下代码显示错误

```
var toDoSessionsInDB =    
    from todo in todoZession.ZSESSIONs
     select new ZSESSION 
                {
                    ZTYPE = Convert.ToString(todo.ZENDTIME.TimeOfDay),
                    ZNAME = todo.ZNAME,
                    ZTRACK = todo.ZTRACK
                };

ToDoZessions = new ObservableCollection<ZSESSION>(toDoSessionsInDB); 
```

错误是...不允许在查询中显式构造实体类型“App.MainPage+ZSESSION”。——</p>

# android - Android，在框架内接收意图

> ID：10754099
> 
> 赞同：0
> 
> 时间：2012-05-25T12:03:51.990
> 
> 标签：android, frameworks, android-intent, android-activity, nfc

我试图弄清楚如何在 android 框架内接收意图。更具体地说，我想在“com.android.internal.policy.impl”下的“PasswordUnlockScreen”中将自己注册为 NFC 意图的接收者。问题是我不在活动上下文中。

有什么方法可以在没有活动上下文的情况下通知我新的 NFC 意图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:24:34.857

首先，向PasswordUnlockScreen 的构造函数传递上下文参数。第二种选择是使用`getContext()`方法来获取上下文。您也可以在此文件中找到该示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:16:31.073

不，您需要一个 Activity 上下文来接收 NFC 意图。此外，当屏幕被锁定时，NFC 被关闭：即无论如何都不会发送任何意图。

# java - 二维数组中的第一个元素为空？

> ID：10754102
> 
> 赞同：0
> 
> 时间：2012-05-25T12:04:00.203
> 
> 标签：java, android, arrays, multidimensional-array, null

我正在使用此代码将详细信息插入到二维数组中。但是在从数组中检索数据时，第一个元素值变为 null。

```
 Cursor consultancy = db.getConsultancy(this);
        if(consultancy!=null)
        {
            consultancy.moveToFirst(); 
            consultancy.moveToNext();  
            consultancynames = new String[(int) db.getConsultancyCount()-1];
            for(int i=0;i<db.getConsultancyCount()-1;i++)
            { 
                consultancynames[i] = consultancy.getString(2);  
                int consultantid = Integer.parseInt(consultancy.getString(consultancy.getColumnIndex(TimeAndExpensesLocalDB.CT_CONSULTANCYID))); 
                Cursor project_namecur = db.getProjectCode(this, consultantid);
                if(project_namecur!=null)
                {
                    project_namecur.moveToFirst();  
                    projectname = new String[(int) db.getConsultancyCount()][project_namecur.getCount()];
                    for(int j=0;j<project_namecur.getCount();j++)
                    {  
                        projectname[i][j] = project_namecur.getString(3);    
                        project_namecur.moveToNext();  
                    } 
                }
                consultancy.moveToNext();
            }  

        }  

        //... Print array  
        for (int i =0; i < consultancynames.length; i++) {
        for (int j = 0; j < projectname.length; j++) {
        System.out.print(" " + projectname[i][j]);
        }
        System.out.println("");
        } 
```

输出

```
 05-25 12:58:22.700: I/System.out(2373):  null null null
       05-25 12:58:22.700: I/System.out(2373):  Other-1 Other-2 Other-3 
```

我不确定发生了什么。

谢谢你们的帮助。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:07:56.383

您正在循环的每次迭代中创建一个新数组：

```
projectname = new String[(int) db.getConsultancyCount()][project_namecur.getCount()]; 
```

因此，在第一次迭代中，您将创建一个数组并填充数组的*第一*“行”。在第二次迭代中，您将创建一个新数组（默认为具有空元素）并填充*第二*行。

我怀疑您需要在循环*之前*分配一次“外部”数组，然后根据该顾问有多少项目名称分配“内部”数组：

```
 // Note: more idiomatic names would be consultancyNames and
 // projectNames. It's also unclear why you're subtracting one from the count...
 consultancynames = new String[(int) db.getConsultancyCount() - 1];
 projectnames = new String[consultancynames.length][];
 for (int i = 0;i< consultancenames.length; i++) {
     ...
     projectnames[i] = new String[project_namecur.getCount())];
     ...
 } 
```

然后你也需要改变你的显示代码，例如

```
for (int i =0; i < projectname.length; i++) {
    for (int j = 0; j < projectname[i].length; j++) {
        System.out.print(" " + projectname[i][j]);
    }
    System.out.println("");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:08:59.393

请注意，您不能执行以下操作：

```
projectname = new String[(int) db.getConsultancyCount()][project_namecur.getCount()];
for(int j=0;j<project_namecur.getCount();j++)
{  
    projectname[i][j] = project_namecur.getString(3);    
    project_namecur.moveToNext();  
} 
```

原因如下：

第一行之后`projectname`将是一个数组数组。

由于数组是对象引用，因此您有一个对象引用数组。

由于对象引用的默认值为，因此您将拥有一个元素`null`数组。`null`

这意味着你不能做

```
projectname[i][j] = project_namecur.getString(3); 
```

因为它对应于

```
String[] row = projectname[i];
// row == null !
row[j] = project_namecur.getString(3); 
```

# asp.net - linq 到 sql。两个相对表

> ID：10754111
> 
> 赞同：1
> 
> 时间：2012-05-25T12:04:48.313
> 
> 标签：asp.net, linq-to-sql

我有两张桌子：

```
tab1                                                     tab2

ID | Name | Sername | PostID                  ID | PostDecription 
```

问题：如果 PostDecription 的值为 NULL，我如何在来自 tab2 PostDecription 的单元格 PostID 单元格中的 tab1 中显示？

```
(from p in tab1 join s in tab2 on p.PostID equals
                                         s.ID select new
                    {                 
                       ID = p.ID,
                       Name= p.Name,
                       Sername = p.Sername,
                       PostID = s.PostDecription,

                    }) 
```

使用此代码，我只能获得两个表中具有相同值的单元格。PostDecription 可以具有值“NULL”的情况呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:15:41.940

你需要一个左连接

```
from p in tab1 
join s in tab2 on p.PostID equals s.ID into tab2s 
from s in tab2s.DefaultIfEmpty()    
select new
                    {                 
                       ID = p.ID,
                       Name= p.Name,
                       Sername = p.Sername,
                       PostID = s.PostDecription,

                    } 
```

# c++ - 链表迭代器模板中的编译错误

> ID：10754118
> 
> 赞同：1
> 
> 时间：2012-05-25T12:05:14.210
> 
> 标签：c++, templates, compiler-errors

我是 C++ 模板的新手。编译时出现错误：

```
main.cpp(17) : error C2923: 'Iterator' :
    'myWords' is not a valid template type argument for parameter 'T'

main.cpp(17) : error C2133: 'iterator' : unknown size error C2512:
    'Iterator' : no appropriate default constructor available 
```

代码：

```
#include "MyList.h"
#include "MyList.cpp"
#include <string>
using namespace std;

int main()
{
    LinkedList<string> myWords;
    myWords.addAtBeginning("Data");

    Iterator<myWords> iterator;

    //iterator.advance();
    return 0;
} 
```

头文件

```
 #ifndef MYLIST_H
#define MYLIST_H

template <class T>
class Iterator;

template <class T>
struct link
{
   link * previous;
   link * next;
   T s;
};

template <class T>
class LinkedList 
{
   link<T> * head;   // No longer a global variable 
 public:
   void addAtBeginning(T word);
   void printAll();
   void printString(link<T> *p);  // prints the string in the link pointed to by p.
   void deleteFromBeginning(); // deletes the first link in the list.    
   LinkedList();  // default constructor
   friend class Iterator<T>;
};

template <class T>
class Iterator
{
private:
   link<T> * p;

public:
    // construct the iterator by having it refer to a linked list
    Iterator(LinkedList<T> whatIamIterating);   

    // returns the string in the current link
    T current();                        

    // move the Iterator to the next link
    void advance();                          

    // returns true when we are finished with list
    int atEnd(); 
};

#endif 
```

文件

```
 #include "MyList.h"

// Default constructor of linkedlist
template <class T>
LinkedList<T>::LinkedList()  
{
   head=0;
}

// Function to add at the beginning
template <class T>
void LinkedList<T>::addAtBeginning(T word)
{
   link<T> * tmp;
   tmp = new link<T>;
   tmp->s = word;
   tmp->next=head;
   tmp->previous=0;
   head=tmp;
}

// Function to print the all strings
template <class T>
void LinkedList<T>::printAll()
{
   link<T> * tmp;
   tmp = head;
   while (tmp != 0)
   {
      cout << tmp->s;
      tmp = tmp->next;
   }
   cout << endl;
}

// Prints the string in the link pointed to by p.
template <class T>
void LinkedList<T>::printString(link<T> *p)
{                          
    cout << p->s << endl;
}

// Deletes the first link in the list.
template <class T>
void LinkedList<T>::deleteFromBeginning()
{
    link<T> *oldhead = head;                    
    head = head->next;

    delete oldhead;
}

// Function definitions for Iterator class
// Constructor for iterator class
template <class T>
Iterator <T>::Iterator(LinkedList<T> whatIamIterating)
{
   p = whatIamIterating.head;
}

// Function to get the current string of the node
template <class T>
T Iterator<T>::current()
{
    return p->s;
}

template <class T>
void Iterator<T>::advance()
{
    p = p->next;
}

template <class T>
int Iterator<T>::atEnd()
{
    if (p == 0)
        return 1;
    else
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:08:09.433

它需要是`Iterator< LinkedList<string> >`。*类型名称*是模板参数，而不是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:08:40.120

在

```
Iterator<myWords> iterator; 
```

您`myWords`用作类型，但它是一个变量。你要

```
Iterator<string> iterator(myWords); 
```

与`string`您用于您的类型一样`LinkedList`（**解决**第一个编译器错误），并且`Iterator`cosntrcutor 采用一个`LinkedList<T>`对象（在您的情况`T`下`string`）（**解决**第二个编译器错误）

# javascript - timezonedb 将 gmt_offset 转换为 +5:30 格式？

> ID：10754124
> 
> 赞同：1
> 
> 时间：2012-05-25T12:05:38.597
> 
> 标签：javascript, time, timezone

这是我的链接：

[http://timezonedb.com/download](http://timezonedb.com/download)

```
 timezone.csv
 Fields: "zone_id","abbreviation","time_start","gmt_offset","dst"

"370","CDT","-273686400","-18000","1"    
"370","EST","-266432400","-18000","0"
"370","EDT","-52938000","-14400","1"    
"370","EST","-37216800","-18000","0"
"370","EDT","-21488400","-14400","1"
"370","EST","-5767200","-18000","0"
"370","EDT","9961200","-14400","1"
"370","EST","25682400","-18000","0"
"370","EDT","41410800","-14400","1"
"370","EST","57736800","-18000","0" 
```

正如你所看到的，它给出了与时间相关的数据作为一个大数字，我怎样才能将它转换为格式“utc + 5:30”小时......
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:13:07.137

除以 3600（一小时的秒数）得到 UTC 偏移量（以小时为单位）

# php - 如何仅删除父类别表单网址的一部分 - Magento

> ID：10754131
> 
> 赞同：0
> 
> 时间：2012-05-25T12:05:55.883
> 
> 标签：php, magento

我不知道它是否非常简单，或者是否可以从后端或通过修改核心文件来完成。

如果我在子类别中有产品，并且我的测试产品的 url 看起来像这样

`http://www.domain.com/pc/subc1/subc2/test-product`

我想从那里减少一层，

`http://www.domain.com/subc1/subc2/test-product3`

所以总是只削减我父类别的第一部分，保持其余部分完好无损。

如何才能做到这一点？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:12:13.140

请按照以下步骤更改产品网址。

```
Admin-panel > system > configuration > catalog > catalog > Search Engine Optimizations > Use Categories Path for Product URLs > Change to "NO". 
```

# mule - Mule CXF 消费网络服务

> ID：10754132
> 
> 赞同：1
> 
> 时间：2012-05-25T12:06:03.293
> 
> 标签：mule

我正在使用 cxf:jaxws-service 在 mule 中创建一个 web 服务。这是网址：http://localhost:65042/InsertDocService/InsertDoc，我可以生成 WSDL 文件，但我想使用 cxf:jaxws-client 在 mule 中使用此服务。

```
<flow name="documentumclientflowFlow1" doc:name="documentumclientflowFlow1">
    <inbound-endpoint address="http://localhost:65042/InsertDocumentumService/InsertDocumentum" doc:name="Generic"/>
    <cxf:jaxws-client operation="insertDocumentum" serviceClass="com.integration.IDocumentumInsert" port="80" mtomEnabled="true" enableMuleSoapHeaders="true" doc:name="SOAP"/>
    <outbound-endpoint address="http://locahhost:65042/InsertDocumentumService/InsertDocumentum" doc:name="Generic"/>
</flow> 
```

如果我调用它，它将进入服务项目并得到类似“org.apache.cxf.interceptor.Fault：没有这样的操作：（HTTP GET PATH_INFO：/InsertDocumentumService/InsertDocumentum）”的错误。请任何人建议我如何解决此问题以及如何使用此服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:08:20.490

除了类型（`locahhost`而不是`localhost`）之外，您似乎试图在出站端点中使用与入站端点相同的地址。我不认为这是你想要做的，因为它会导致循环重入调用，最终会耗尽池线程、阻塞、超时并死于火灾。

那么你想用“documentumclientflowFlow1”做什么呢？从你的问题中不清楚。

# structuremap - 为类型 Y 的实例 X 检测到重复对象

> ID：10754135
> 
> 赞同：3
> 
> 时间：2012-05-25T12:06:21.413
> 
> 标签：structuremap

我从结构映射中得到以下异常-“为类型的实例 d54e25dc-d19c-4d70-99d1-56bd2502d203 检测到重复对象......”

堆栈跟踪是：

```
at StructureMap.InstanceCache.Set(Type pluginType, Instance Instance, Object result) in c:\code\structuremap\Source\StructureMap\InstanceCache.cs:line 60
at StructureMap.BuildSession.CreateInstance(Type pluginType, Instance instance) in c:\code\structuremap\Source\StructureMap\BuildSession.cs:line 159
at StructureMap.BuildSession.<>c_DisplayClass3.<.ctor>b_1() in c:\code\structuremap\Source\StructureMap\BuildSession.cs:line 34
at StructureMap.BuildSession.CreateInstance(Type pluginType) in c:\code\structuremap\Source\StructureMap\BuildSession.cs:line 192
at StructureMap.BuildSession.GetInstance[T]() in c:\code\structuremap\Source\StructureMap\BuildSession.cs:line 78 
```

此异常仅偶尔发生，并且很难重现。

到目前为止我发现了什么：

*   调用`ObjectFactory.Container.GetInstance(type)`将创建一个`BuildSession`带有新的非静态缓存的新缓存。
*   调用将到达`BuildSession.CreateInstance(Type pluginType, Instance instance)`，但缓存中还没有实例。（[https://github.com/structuremap/structuremap/blob/master/Source/StructureMap/BuildSession.cs#L149-166](https://github.com/structuremap/structuremap/blob/master/Source/StructureMap/BuildSession.cs#L149-166 "github链接")）
*   现在我们继续`_builder.Resolve(pluginType, instance, this);`
*   在某个地方`Resolve()`，对象将进入缓存，稍后`CreateInstance`我们再次将其保存到缓存中，接收到异常。

该对象配置了*单例*生命周期。该应用程序是托管在 IIS 中的 WCF 服务。

感谢您对查找原因的任何帮助。

# c# - 如何在 PartialViews 中连接使用 HtmlHelper 扩展生成的 JavaScript 并添加到父视图？

> ID：10754138
> 
> 赞同：0
> 
> 时间：2012-05-25T12:06:35.087
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, partial-views

我在父视图中有 2 个 PartialView。

在这 2 个 PartiaView 中，我生成了一些 JavaScript 代码，这些代码需要包含在父视图的底部。

这是在 PartialViews 中生成一些 JavaScript 的 HtmlHelper 扩展。

```
public static MvcHtmlString KO_ObjectFor<TModel>(this HtmlHelper<TModel> htmlHelper)
{
    String str = "some javascript code";
    return MvcHtmlString.Create(str);
} 
```

这是父视图（主视图）

```
...
//First Partial View
<% Html.RenderPartial("_PartialViewFirst"); %>

//Second Partial View
<% Html.RenderPartial("_PartialViewSecond"); %>

//Here I need to display the JavaScript from the PartialViews
<script type="text/javascript">
   <%: Html.FunctionToConcatenateJavaScript() %>
</script>
... 
```

**什么是正确的方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:48:55.140

您可以使用 Stack 在 HttpContext 中推送和弹出脚本：

```
public static class HtmlExtensions
{
    private const string ScriptsKey = "__scripts__";

    public static MvcHtmlString KO_ObjectFor<TModel>(this HtmlHelper<TModel> htmlHelper)
    {
        var stack = htmlHelper.ViewContext.HttpContext.Items[ScriptsKey] as Stack<string>;
        if (stack == null)
        {
            stack = new Stack<string>();
            htmlHelper.ViewContext.HttpContext.Items[ScriptsKey] = stack;
        }
        String str = "some javascript code";
        stack.Push(str);

        return new HtmlString("some code that the helper needs to generate and output to the view");
    }

    public static IHtmlString FunctionToConcatenateJavaScript(this HtmlHelper htmlHelper)
    {
        var stack = htmlHelper.ViewContext.HttpContext.Items[ScriptsKey] as Stack<string>;
        if (stack == null)
        {
            return MvcHtmlString.Empty;
        }

        var scriptTag = new TagBuilder("script");
        scriptTag.Attributes["type"] = "text/javascript";
        var sb = new StringBuilder();
        foreach (var script in stack)
        {
            sb.AppendLine(script);
        }
        scriptTag.InnerHtml = sb.ToString();

        return new HtmlString(scriptTag.ToString());
    }
} 
```

然后你可以推：

```
<%= Html.KO_ObjectFor(x => x.Foo) %>
<%= Html.KO_ObjectFor(x => x.Bar) %>
... 
```

然后将它们全部弹出主人：

```
<%= Html.FunctionToConcatenateJavaScript() %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:42:58.853

也许你可以这样做：

第 1 部分：

```
@{
    ViewBag.JS = @Html.KO_ObjectFor(firstJs);
} 
```

第 2 部分：

```
@{
    ViewBag.JS += @Html.KO_ObjectFor(secondJs);
} 
```

主要的：

```
<script type="text/javascript">
   @ViewBag.JS
</script> 
```

抱歉，剃刀语法

# .net - 无法将 IE9 渲染引擎与 vb.net 浏览器控件集成

> ID：10754139
> 
> 赞同：1
> 
> 时间：2012-05-25T12:06:41.550
> 
> 标签：.net, vb.net, registry, browser, internet-explorer-9

我在下面尝试了这个注册表，但它没有用。我的应用程序名称是“Testapp”，在安装了 IE9 的 Windows 7 上使用 VS2010。我想在 IE9 而不是 IE7 中呈现页面。

下面的链接帮助了我：

[http://msdn.microsoft.com/en-us/library/ee330730%28VS.85%29.aspx#browser_emulation](http://msdn.microsoft.com/en-us/library/ee330730%28VS.85%29.aspx#browser_emulation)

在下面使用此注册表，通过单独制作一个然后在注册表中注册。之后我启动了我的应用程序，但它仍然在 IE7 中加载。

> Windows 注册表编辑器版本 5.00
> 
> [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION] "testapp.exe"=dword:00002328

谁能帮助我，我如何使用 IE9 而不是 IE7 作为渲染器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T01:03:38.890

不应该是 dword:000090000 而不是 dword:00002328

# haskell - 未定义和发展中（第 2 部分）

> ID：10754140
> 
> 赞同：0
> 
> 时间：2012-05-25T12:06:45.313
> 
> 标签：haskell, undefined

我已经问[过关于 undefined 的问题](https://stackoverflow.com/questions/10738806/a-show-instance-for-undefined)。而且因为不可能做这样的事情，所以我将描述这可能有用的情况。但我认为这个问题很常见，在其他情况下也很有用。

让我们想象一种情况，当我们为某些语法编写解析器时。我们定义了由许多数据类型实现的 AST，每个数据类型都有一组构造函数，每个构造函数都有一组参数。每种类型都派生自 Show。然后我们开始编写解析器实现，我们在其中定义了许多具有递归依赖关系的函数。

由于我们有许多功能，因此很难在没有检查的情况下一次编写整个模块。但是函数循环引用不允许编译未完成的模块。在这种情况下，我定义了不期望返回所需类型的值的钩子函数。

这是一个问题！函数必须返回的不是简单类型，而是构造函数中带有构造函数的数据构造函数。这对于钩子函数来说太难了。所以我这样做：

```
parseHook _ = undefined 
```

一切都很简单，直到“未定义”不在结果数据树中。我想指出这种情况发生在发展阶段，我唯一想要的就是看到树结构。当然，我可以将每种类型都包装在“Maybe”中，但我不想更改已经存在的类型。

英语不是我的母语，所以我不确定我是否正确地表达了我的想法。这就是为什么我想添加一个这种情况的例子：

```
data StructParam = StructParam Int Int
                 deriving Show 

data Struct1 = Struct1 Int Int StructParam Int Int Int Int StructParam
             deriving Show 

data Struct2 = Struct2 Int Int StructParam Int Int Int Int StructParam  
             deriving Show 

data Struct3 = Struct3_var1 Struct1 
             | Struct3_var2 Struct2
             deriving Show 

-- this hook is ok, but too long
parse1 _ = Struct1 1 2 (StructParam 3 4) 5 6 7 8 (StructParam 9 0)

-- this hook is short, but undefined
parse2 _ = undefined

-- complete function
rootParse 1 = Struct3_var1(parse1 1)    
rootParse 2 = Struct3_var2(parse2 2)

>print $ rootParse 1
Struct3_var1 (Struct1 1 2 (StructParam 3 4) 5 6 7 8 (StructParam 9 0))

>print $ rootParse 2
Prelude.undefined

-- but I want something like this
>print $ rootParse 2
Struct3_var2("undefined") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T12:36:02.583

您可以在数据类型中添加“未实现”作为构造函数，为所有以定义结尾的解析设置默认情况`Unimplemented`，然后显示实例将正常工作。

```
data Exp = Literal Int
         | Variable String
         | Operator Op Exp Exp
         | Unimplemented

    deriving Show 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:41:49.080

可能实现这一点的一个丑陋的技巧是在这个类的 Show-instance 中使用`unsafePerformIO`和`catch`来检测 undefined 抛出的异常。不过，我不推荐这种方法。

# spring - 找到对集合的共享引用：当从同一用户会话中并行使用事务时

> ID：10754144
> 
> 赞同：0
> 
> 时间：2012-05-25T12:06:56.953
> 
> 标签：spring, hibernate, jpa

我正在使用带有 spring 3.0.5 的休眠 3.3 并使用 JPA 事务管理器。我的场景是一个 ui 页面调用服务层上的两个 get 方法以在 UI 中呈现两个区域，请求是并行 ajax 请求。服务层中的 get 方法返回相同实体的两个“单独”列表。

```
List<Car> getCarsA();
List<Car> getCarsB(); 
```

我已将 JPA 事务管理器配置如下：

```
<tx:method name="get*" read-only="true" propagation="REQUIRED"/> 
```

问题：当每个服务方法结束后休眠/JPA 调用 flush 时，可能会有一些集合（通过多对多映射）在方法返回的两个列表之间共享，因此会出现异常。我也在使用 OpenEntityManagerInViewFilter。如果我串行调用这些方法，我不会遇到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:41:42.303

Hibernate 会话对象不是线程安全的。您必须为每个线程使用自己的会话实例，或者必须将会话实例的访问与 java`synchronized`块同步。

在 Web 环境中，每个浏览器会话应至少使用一个休眠会话。同一浏览器会话的访问可以`synchronized`或也使用多个会话（当您同时获取 UI 的不同区域时，我会同步它，`synchronized`除非一个查询需要相当长的时间而其他查询不应该等待为了）。

注意：一个会话中的更新在另一个会话中不直接可见（对于实例已经缓存在另一个会话中的情况）。

# c# - 如何在 Windows 上使用 C# 从 MACOS 中提取 ZIP 档案

> ID：10754145
> 
> 赞同：0
> 
> 时间：2012-05-25T12:06:58.800
> 
> 标签：c#, macos, zip

在 C# 中，我的应用程序在 Windows Server 2008 R2 上运行，我需要能够提取在 Windows 或 MAC OSX 上创建的任何 ZIP 文件。我目前正在使用[DotNetZip 库](http://dotnetzip.codeplex.com/)。

但是这个库在提取文件名中带有特殊北欧字符的 MACOSX ZIP 档案时遇到了麻烦。我尝试在 Encoding.GetEncoding(string) 方法中指定不同的编码，包括**macintosh 。**

Windows 内置的 zip 工具也会弄乱特殊字符。WinRAR 3.x 也可以。但是 WinRAR 4.x 似乎是唯一能正确完成这项工作的工具。

是否有可能使用任何可用的 C# ZIP 库来提取这样的 ZIP 存档？

更新：这是使用 Mac OSX 中的默认 Zip 功能创建的 zip 存档的示例。第一个屏幕截图显示了 Windows Zip 功能如何无法解码文件名。第二个屏幕截图显示了使用 WinRAR 4.11 打开的存档：

![使用 Windows 7 Zip 打开的存档](../Images/8f477f220d4f09cf1446e9c217b93354.png) ![使用 WinRAR 4.11 打开的存档](../Images/3027f3428fe5265e7fa940376f6e2516.png)

从 Mac OSX下载[示例 ZIP 存档](https://www.dropbox.com/s/4dz23xp3wbt3e4y/Arkiv.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:13:10.913

你结帐了吗[`SevenZipSharp`](http://sevenzipsharp.codeplex.com/)...它使用 7-Zip dll 来提取档案和 IMO，7-zip 是最好的档案处理程序..

## 更新 ：

我正在研究示例 zip 和`DotNetZip`.

通过`DotNetZip-WinFormsTool.exe`在`DotNetZip`二进制文件中提供，您可以在`DropDownBox`.

我尝试了其中一些，包括 UTF-8、Zip Default(IBM437)、UTF-32、Unicode 等。

我使用 UTF-8 编码获得了最好的结果...与 WinRAR 相同的阅读...

此外，IMO 只有 WinRAR 对所有存档使用 UTF-8，而其他 Zip 工具（如 7-Zip、Explorer Default Zip Viewer）使用 Zip Default 编码，这使他们能够错误地读取文件名！

所以你最好的选择是坚持`DotNetZip`并使用一些这样的代码：

```
using (ZipFile zf = new ZipFile(Application.StartupPath + "\\Arkiv.zip", new UTF8Encoding()))
{
    zf.ExtractAll(Application.StartupPath + "\\Arkiv\\");
} 
```

这段代码经过测试可以由我使用！请注意，提取后文件名将在资源管理器中以 UTF8 格式显示，但如果您直接打开 zip 文件，资源管理器将使用 Zip 默认编码。

**`DotNetZip`以 UTF-8 编码显示该工具的图像：** ![图片](../Images/77e2037fd6812bfa693c916e73691549.png)

## 更新 2：

对于文本的自动检测，您`Encoding`可以参考[`This SO Question`](https://stackoverflow.com/q/1025332/1118933)和[`This Code-Project Article`](http://www.codeproject.com/Articles/17201/Detect-Encoding-for-In-and-Outgoing-Text)[`UDE - C# port of Mozilla Universal Charset Detector`](http://code.google.com/p/ude/)

# c# - c#中带有列表的动态类型

> ID：10754150
> 
> 赞同：5
> 
> 时间：2012-05-25T12:07:26.357
> 
> 标签：c#, dynamic, types

我有一个小问题要问你们。

我想这样做：

```
Type[] classes = new Type[]{ Class1, Class2 };

foreach(Type t in classes){   
  List<t> list = new List<t>(); 
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T12:19:36.370

您**不能**在运行时强制转换为泛型类型，因为泛型中的类型需要在编译时解析。

您**可以**使用反射以动态方式创建泛型类型，但除非您对转换进行硬编码，否则您得到的只是一个对象。

我无法真正说出您想要什么，我必须同意评论这是一个[XY 问题](http://www.perlmonks.org/?node_id=542341)。我倾向于做出冒昧的陈述，即在某处试图解决设计问题，而不是直接解决设计问题，或者直接询问您要实现的目标。

* * *

您可以使用以下代码创建类型，然后该`dynamic`类型可用于在不知道/关心它是列表还是列表的情况下对各种成员进行[回避](http://en.wikipedia.org/wiki/Duck_typing)：`List<T>``T`

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication61
{
    class Program
    {
        static void Main(string[] args)
        {
            dynamic o = CreateGeneric(typeof(List<>), typeof(int));
            o.Add(1);
            Console.WriteLine(o[0]);
            Console.Read();
        }

        public static object CreateGeneric(Type generic, Type innerType, params object[] args)
        {
            System.Type specificType = generic.MakeGenericType(new System.Type[] { innerType });
            return Activator.CreateInstance(specificType, args);
        }
    }
} 
```

上面的示例鸭子类型的`Add`方法和索引器。DLR 在运行时进行类型处理和鸭子类型 - 例如，知道这`1`是一个`int`。

澄清一下，我可能不会在生产中使用此类代码（除非您的要求非常具体，需要此代码）并且任何类型不匹配的问题都会在运行时出现；因此，您要么需要非常准确地键入（有限的 IntelliSense），要么需要有良好的错误处理能力。

感谢[这篇博](http://geekswithblogs.net/marcel/archive/2007/03/24/109722.aspx)文提供的`CreateGeneric`方法。

这假设 .NET 4 带有新的 CLR。正如@MartinLiversage 还指出的那样，这个特定的示例假设您正在以一种强类型的方式使用该列表。在我的示例中，我将 a 传递`int`给`List<int>`隐藏在 a 中的 a `dynamic`。

* * *

自从 .NET 4 发布以来，我们几乎一直在使用它。我们有一个带有更大代码库的大型应用程序。`dynamic`在应用程序中不使用一次，在测试代码库中仅使用几次。这并不是说“不要使用它”，而是说“大多数时候，你不需要它”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T12:13:01.973

你可以这样做：

```
foreach(Type t in classes)
{
   var listType = typeof(List<>).MakeGenericType(t);
   var instance = Activator.CreateInstance(listType);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T12:12:48.850

这可以通过[Type.MakeGenericType 方法实现](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)

这是我发现对你有用的一个绝妙方法：[CodeRef](http://geekswithblogs.net/marcel/archive/2007/03/24/109722.aspx)

```
public static object CreateGeneric(Type generic, Type innerType, params object[] args)
{
    System.Type specificType = generic.MakeGenericType(new System.Type[] { innerType });
    return Activator.CreateInstance(specificType, args);
} 
```

并像这样使用它：

```
var o = CreateGeneric(typeof(List<>), t); 
```

不幸的是，要添加项目，您必须这样做（其中 item 是您要添加的项目）。

```
MethodInfo addMethod = o.GetType().GetMethod("Add");
addMethod.Invoke(o, new object[] { item.ToType(t) }); 
```

或者使用`Generic`另一个答案中提到的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T12:21:14.057

你可以试试这个：

```
Type[] classes = new Type[] { typeof(A), typeof(B) };           
foreach (Type t in classes)
{
     Type genericType = typeof(List<>).MakeGenericType(t);
     var list = Activator.CreateInstance(genericType);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T12:39:33.523

如果您想将对象保留在一个列表中，那么它们可能有一些共同点。

在这种情况下，我会争辩说，就像评论中提到的 LB 一样，你在这里问了一个错误的问题。

可能这是您遇到的设计问题。想想这些类型，看看它们有什么共同点，并考虑从一种基本类型派生，或者让两者实现相同的接口。在这种情况下，您将能够实例化基本类型/接口的对象列表并使用它们。

只是给你一个良好的开端：

```
 abstract class Vehicle {
        public int NumberOfWheels { get; set; }
    }

    class Car : Vehicle
    {
        public Car()
        {
            NumberOfWheels = 4;
        }
    }

    class Bicycle : Vehicle
    {
        public Bicycle()
        {
            NumberOfWheels = 2;
        }
    }

    static void Main(string[] args)
    {

        var v1 = new Car();
        var v2 = new Bicycle();

        var list = new List<Vehicle>();
        list.Add(v1);
        list.Add(v2);

        foreach (var v in list)
        {
            Console.WriteLine(v.NumberOfWheels);
        }

        Console.ReadKey();
    } 
```

# ruby-on-rails - validates_presence_of 和未保存的关联

> ID：10754151
> 
> 赞同：1
> 
> 时间：2012-05-25T12:07:30.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord

采用以下代码（Rails 3.0.10）：

```
User < AR
  has_many :providers

Provider < AR
  belongs_to :user
  validates_presence_of :user

user = User.new
user.providers.build
# so both models not yet saved but associated with each other

user.valid?
=> false

user.errors
=> {:providers=>["is invalid"]}

user.providers.first.errors
=> {:user_id=>["can't be blank"]} 
```

为什么 Provider 看不到它有一个尚未保存的关联用户模型可用？或者换句话说 - 我该如何处理才能使验证仍然存在？或者也许我做错了什么？

请注意，我正在寻找一个干净的解决方案，因此建议在 Provider 模型中使用验证前回调将 User 模型保存到数据库中是不行的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:29:24.883

使用 :inverse_of

```
class User < ActiveRecord::Base
  has_many :providers, :inverse_of => :user
end

class Provider < ActiveRecord::Base
  belongs_to :user, :inverse_of => :providers
  validates :user, :presence => true
end 
```

# c++ - C++ 中成员修改的事件/通知

> ID：10754154
> 
> 赞同：1
> 
> 时间：2012-05-25T12:07:48.000
> 
> 标签：c++, events, notify

```
class A{
  int i;
};

class B{
  // sense i is changed by A    
}; 
```

如果 的值`i`被 A 更改，则 B 应该得到通知。有什么建议如何实施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:09:58.757

您在寻找[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:10:04.830

[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)是实现这一点的标准方式。维基百科文章和网络上有很多指针（只是谷歌“观察者模式 c++”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T12:11:10.350

查看[观察者](http://en.wikipedia.org/wiki/Observer_pattern)或发布者-订阅者模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T12:13:44.240

这`Observer Pattern`是您问题的主要解决方案。

您也可以使用`SIGNALS`和`SLOTS`。有两个主要的库实现它们：

1)[提升](http://www.boost.org/doc/libs/1_49_0/doc/html/signals.html)

2）[QT](http://qt-project.org/doc/qt-4.8/signalsandslots.html)`SIGNAL` （虽然它是一个只使用和`SLOT`api的大型库）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T13:13:49.183

您的类需要不同的实现：

```
class B {

public:
  Alert(int value_changed) {
     // implement whatever you want
     // for example printf("Value has changed to %i class A!!!\n", value_changed);
       }

}

class A {
/* constructor implementation */
 A(int i) {
           internal_value = i;
           B_class = new B() //notice that B will automatically be created by A!
          }

~A() { delete B_class; }

public:

 ChangeValue(int new_value) {
           internal_value = new_value;
           B_class.Alert(internal_value);
           }

private:

int internal_value;
B *B_class;

}

int main() {

A my_A(10); // you implicitly create a pair of classes A - B;

my_A.ChangeValue(20); // you should notice that A calls B automatically

return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T12:10:13.300

C++ 不提供开箱即用的此功能，您必须自己编程。我想你应该阅读设计模式[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)来实现这一点。

# ios - 类别最佳做法

> ID：10754167
> 
> 赞同：2
> 
> 时间：2012-05-25T12:08:28.420
> 
> 标签：ios, cocoa, categories

我正在考虑使用*类别*来处理我以前可能使用继承的一些事情。

我现在正在做的事情更像是一个最佳实践问题，我不确定它*应该*如何实施。我正在编写一个类别`UIActivityIndicatorView`，基本上将用于在任意视图中放置活动指示器。下面你会找到我如何做的代码示例，我的主要问题是这是否好。如果是这样的话，我会很感激评论为什么它很糟糕。谢谢。

**类别：**

```
@interface UIActivityIndicatorView (Customizations)
    - (UIActivityIndicatorView *) inView:(UIView *) target;
@end 
```

**执行：**

```
@implementation UIActivityIndicatorView (Customizations)

- (UIActivityIndicatorView *) inView:(UIView *) target {
    [self startAnimating];
    [self setHidden:NO];
    self.frame = target.bounds;
    self.backgroundColor = [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.6f];

    return self;
}
@end 
```

**然后我会这样使用它：**

```
[background addSubview:[loader inView:background]]; 
```

我猜另一种方法是创建一个初始化函数来获取容器视图并仅返回“样式化”视图，或者可能不返回任何内容（`void`）并让该方法进行样式设置。

所以我正在寻找一些关于如何处理这个问题的指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:18:25.593

> 让我担心的是，我实际上正在制作 UIActivityIndi​​catorView 的第二个副本，这似乎没有必要

不，你没有。您可能会对您从类别方法返回 self 的事实感到困惑，但这只是一个指针，而不是对象本身被复制。

但是，我会实现它略有不同：

```
- (void) addToSuperView:(UIView *) target {
    [self startAnimating];
    [self setHidden:NO];
    self.frame = target.bounds;
    self.backgroundColor = [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.6f];

    [target addSubview:self];
} 
```

这样，您在添加时不需要进行额外的、不必要的调用：

```
[loader addToSuperView:background]; 
```

# sql-server-2008 - 在我的本地 SQL Server 上的链接服务器上使用一个输入参数调用存储过程时出现问题

> ID：10754176
> 
> 赞同：0
> 
> 时间：2012-05-25T12:09:09.207
> 
> 标签：sql-server-2008, stored-procedures, linked-server

我正在设置一个 SQL Server 数据库，并获得了在远程服务器中调用存储过程的权限，以帮助填充一些表。

我在 Visual Studio 2008 中创建了一个链接服务器作为 SSIS，SQL Server Management Studio 2008 似乎不喜欢`EXEC`远程服务器的 SSIS 包中的语句。

因此，在成功设置链接服务器后，我尝试使用以下命令执行我的存储过程

```
Select * from OPENQUERY(LinkedServerName, 'exec  storedProc paramValue') 
```

但是得到以下错误

> 消息 208，级别 16，状态 1，过程 storedProc，第 49 行
> 无效的对象名称“#tmp_bl”。

我已经尝试过`Select`我的链接服务器，但没有运气。

有谁知道 exec 语句应该是什么，以便我可以将它放入本地 SSIS 包中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:42:03.053

```
Msg 208, Level 16, State 1, Procedure storedProc, 
Line 49 Invalid object name '#tmp_bl'. 
```

看起来像您正在调用的 SP，然后尝试访问名为`#tmp_bl`.

因此，当您尝试从设计 (BIDS) 运行 SSIS 包时，它会验证包并且找不到临时表；所以错误。

解决方法：先创建临时表（使用SSMS/Sqlcmd），然后尝试运行包；喜欢

```
create table #tmp_tbl .... 
```

如果您尝试使用`dtexec`实用程序从命令提示符运行包`delayvalidation`，则将包控件的属性（控制实际执行临时表的控件；DataFlow 任务或 SQLTask）设置为`True`( `DelayValidation = True`)。其中，在验证整个包时不会验证临时表是否存在。

# java - Cassandra Hector API 结果对象

> ID：10754181
> 
> 赞同：1
> 
> 时间：2012-05-25T12:09:47.167
> 
> 标签：java, cassandra, hector

我正在尝试在我的 cassandra 数据库中进行查询。我想检索位于 superColumn 中的单个列中的数据，该列位于 superColumn 中……有点复杂，但我需要它来对我的数据库进行建模。

我使用了 Hector 的文档：[http ://www.datastax.com/sites/default/files/hector-v2-client-doc.pdf](http://www.datastax.com/sites/default/files/hector-v2-client-doc.pdf)

但是，当我尝试阅读单列时，此文档旨在使用此方法：

```
 <code>ColumnQuery<String, String, String> columnQuery =
HFactory.createStringColumnQuery(keyspace);
columnQuery.setColumnFamily("Standard1").setKey("jsmith").setName("first");
Result<HColumn<String, String>> result = columnQuery.execute(); </code> 
```

但是，什么是“结果”？我在 google 上搜索，我发现结果是一个对象 Result，但我有所有的库，没有人知道这个对象。

我用 QueryResult 替换了 Result，但是，当我启动我的主类时，我收到了这个错误：

> me.prettyprint.hector.api.exceptions.HInvalidRequestException：在 me.prettyprint.cassandra.service.ExceptionsTranslatorImpl.translate(ExceptionsTranslatorImpl.java:45) 在 me.prettyprint 中的 InvalidRequestException（为什么：supercolumn 参数对于超级 CF Super2 不是可选的）。 cassandra.service.KeyspaceServiceImpl$23.execute(KeyspaceServiceImpl.java:851) 在 me.prettyprint.cassandra.service.KeyspaceServiceImpl$23.execute(KeyspaceServiceImpl.java:1) 在 me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation. java:103) 在 me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:258) 在 me.prettyprint.cassandra.service.KeyspaceServiceImpl.operateWithFailover(KeyspaceServiceImpl.java:131) 在 me.prettyprint.cassandra.service .KeyspaceServiceImpl。getColumn(KeyspaceServiceImpl.java:857) 在 me.prettyprint.cassandra.model.thrift.ThriftColumnQuery$1.doInKeyspace(ThriftColumnQuery.java:57) 在 me.prettyprint.cassandra.model.thrift.ThriftColumnQuery$1.doInKeyspace(ThriftColumnQuery.java: 1) 在 me.prettyprint.cassandra.model.ExecutingKeyspace.doExecute(ExecutingKeyspace.java:85) 在 me.prettyprint.cassandra.model.thrift 在 me.prettyprint.cassandra.model.KeyspaceOperationCallback.doInKeyspaceAndMeasure(KeyspaceOperationCallback.java:20) .ThriftColumnQuery.execute(ThriftColumnQuery.java:52) at com.riptano.cassandra.hector.example.InsertSuperColumn.main(InsertSuperColumn.java:74) org.apache.cassandra.thrift.Cassandra$get_result.read(Cassandra.java:5930) 在 org.apache.cassandra.thrift.Cassandra$Client.recv_get(Cassandra.java:505) 在 org.apache.cassandra.thrift.Cassandra $Client.get(Cassandra.java:490) 在 me.prettyprint.cassandra.service.KeyspaceServiceImpl$23.execute(KeyspaceServiceImpl.java:846) ... 11 更多

当我关注导致此错误的行时，它的行：

```
**QueryResult<HColumn<String, String>> result5 = result3.execute();** 
```

我将 Result 替换为 QueryResult。

请问我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:46:42.380

我在这里看到几个问题......

首先——“在一个超级列中的单个列中的数据，它在一个超级列中”。你不能那样做。您可以在 superColumns 中包含列，但只有一层嵌套。无论哪种方式，我都建议不要使用 superColumns，它们是 Cassandra 正在远离的东西，转而支持 Composite Columns。看看您是否可以调整您的数据模型以使用复合材料。

现在，转到您的代码。您正在对超级列进行常规列查询...您需要使用 SuperColumnQuery。SuperColumnQuery 有 4 个类型参数——键、超级列名、列名和值类型。您还得到一个 QueryResult 对象，而不是一个结果。在这种情况下，QueryResult 对象包含一个 SuperColumn，而 SuperColumn 又包含一个 Columns 的集合。

所以它看起来像......

```
 SuperColumnQuery<String, String, String, String> superColumnQuery = 
    HFactory.createSuperColumnQuery(ksp);
    superColumnQuery.setColumnFamily("Standard1").setKey("jsmith").setSuperName("first");
    QueryResult<HSuperColumn<String, String, String>> queryResult = superColumnQuery.execute();

    if (queryResult != null && queryResult.get() != null) {
        List<HColumn<String, String>> resultCols = queryResult.get().getColumns();
        for (HColumn<String, String> col : resultCols) {
            doSomething(col.getValue());
        }
    } 
```

希望这可以帮助！

# javascript - 如何使用jquery在html中获取选定的选项

> ID：10754182
> 
> 赞同：0
> 
> 时间：2012-05-25T12:09:52.123
> 
> 标签：javascript, jquery, html

我想检索`id`我选择的选项。在这里你可以看到我的 HTML。

```
<select name="zaal" id="zaal">
    <DIV CONTENTEDITABLE="FALSE" ID="MACONTAINER" MACONSTRAINT="" MAPARAMETER="ZALEN">
        <DIV CONTENTEDITABLE="TRUE" ID="MAITEM">
            <option value="~@ITEM.ID~" id="ZAALNAME">~ITEM.ID~, ~ITEM.NAME~</option>
        </DIV>
    </DIV>
</select> 
```

我正在这样做。

```
var selectVal = $("#zaal :selected").val();
var id = selectVal.substring(1);
console.log("id is: " + selectVal); 
```

但由于某种原因，它不起作用。

有人可以帮忙吗？

**编辑**

好的，div是问题所在。但我需要那些从我的数据库中获取我的值。所以我认为我需要找到另一种解决方案而不是选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:13:54.547

```
$("#zaal option:selected").attr('value'); // will return you ~@ITEM.ID~ 
```

要获得`id`

```
$("#zaal option:selected").attr('id'); // will return you ZAALNAME 
```

要`id`进行选择更改，请尝试以下操作：

```
$('#zaal').on('change', function() {

  // To get id
  $('option:selected', this).attr('id');

  $('option:selected', this).attr('value'); // return the value of selected option

  // To get the select box value
  var value = this.value;

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:13:08.617

也许尝试：

```
$("#zaal option:selected").val(); 
```

另外，尝试将 div 移到选择元素之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:13:37.460

看这个问题：

[<div> 和 <select> 标签](https://stackoverflow.com/questions/1499216/html-div-and-select-tag)

您只能将`<option>`or`<optgroup>`放在一个`<select>`. 如果你想把其他东西放在那里，你必须自己做一些清单。

无论如何，您为什么要将任何 div 放在 select 中？

* * *

如果我将您提供给我的 HTML（带有已编辑的字符串）放入 Google Chome，这就是您的代码的组成部分：

```
<select name="zaal" id="zaal">
  <option value="x" id="ZAALNAME">X, Y</option>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:14:09.180

```
$("#zaal option[value='0']").text() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T12:15:19.303

试试这个：

```
var selectVal = $("#zaal option:selected").val();
var id = selectVal.substring(1);
console.log("id is: " + selectVal); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T12:15:36.527

html应该是

```
<select name="zaal" id="zaal">
  <option value="~@ITEM.ID~" id="ZAALNAME">~ITEM.ID~, ~ITEM.NAME~</option>
</select> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T12:15:59.467

```
$('#zaal').change(function(){
    alert($($(this)+':selected').attr('id'));

}); 
```

小提琴[http://jsfiddle.net/cBaZ7/1/](http://jsfiddle.net/cBaZ7/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-25T12:17:01.317

`val()`将检索所选选项的值。它不是`id`

所以试试这个：

```
 $("#zaal option:selected").attr("id") 
```

# android - CERT.RSA (Android) 上 CERT.SF 的签名在哪里

> ID：10754184
> 
> 赞同：3
> 
> 时间：2012-05-25T12:09:59.807
> 
> 标签：android, signature, verification

我想验证 android apk 的签名。（不使用 jarsigner lib。）所以，我有一个这样的计划：

1.  从 apk 获取公钥。
2.  从 apk 获取 CERT.SF 的签名
3.  使用来自 1 的公钥验证签名。

我可以使用这样的 openssl 命令从 CERT.RSA 获取公钥。（-openssl pkcs7 -inform DER -in CERT.RSA -noout -print_certs -text）

但是，我怎样才能在 CERT.RSA 文件中获得 CERT.SF 的签名。

如果有人知道如何获得它，请告诉我。这对我很有帮助。谢谢！

# c# - 启动 Windows 服务时找不到程序集文件“example.dll”

> ID：10754189
> 
> 赞同：2
> 
> 时间：2012-05-25T12:10:13.357
> 
> 标签：c#, windows, wcf, windows-services, net.tcp

我开发了一个 WCF 服务，它使用**net.tcp**绑定并将文件**读写****到**文件系统。当我启动 Windows 服务（在控制台中）时，即使**sample.dll**在文件夹中，我也会收到以下错误：

 ******找不到程序集文件 sample.dll**

这个特定的 WCF 服务托管在 Windows 服务中，该服务在 Windows 7 64 位上运行，我有以下问题：

我应该为我的应用程序使用哪个帐户：

**用户/网络服务/本地系统/本地服务**

为什么即使它存在操作系统也不能加载dll？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:23:28.460

对于 dll，您应该在 OnStart 方法的开头添加以下代码行。

```
 System.Environment.CurrentDirectory = System.AppDomain.CurrentDomain.BaseDirectory 
```

这应该允许您的服务从实际目录加载 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:10:12.140

根据 ServiceAccount 上的[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount%28v=vs.80%29)，用户成员会提示输入用户名和密码。我猜如果您使用的是用户帐户并且它没有 windows/system32 的读取权限，那将导致您的程序集无法找到。

也许将 ServiceAccount 更改为 LocalService？****

# android - 如何为 Android 模拟器创建 SD 卡映像文件？

> ID：10754195
> 
> 赞同：17
> 
> 时间：2012-05-25T12:11:25.327
> 
> 标签：android, image, file, emulation, sd-card

我需要为我正在运行的 Android 模拟器创建一个 SD 卡映像文件。鉴于我是 Android 开发的初学者，一个完整的分步教程会很棒。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T12:18:35.983

有一个名为 mksdcard 的命令行程序： [https ://developer.android.com/studio/command-line/mksdcard.html](https://developer.android.com/studio/command-line/mksdcard.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T12:14:13.967

已经有用于安装模拟器的 SD 卡图像文件。

如果您创建 AVD，则选择 SD 卡的文件路径

在我的机器上，文件路径是：

```
C:\Users\Samir\.android\avd\Android2.2.avd\sdcard 
```

然后，单击“确定”并保存更改，然后当您在模拟器中运行使用 AVD 时，这将模拟 SD 卡

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T12:17:23.270

> 有人可以告诉我该怎么做。

在 AVD 管理器中，当您创建 AVD 时，在“SD 卡”字段中填写一个正整数。这是您的 SD 卡的大小（以 MB 为单位）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T12:38:09.247

![工作组](../Images/a7e2e16190bf76b59009191ee5148454.png)

当您创建虚拟设备时，有一个 SD 卡选项：您可以选择您想要 SD 卡的文件，或者您也可以指定 SD 卡的大小，以便默认为您创建 SD 卡映像安卓模拟器位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T12:15:53.847

你可以谷歌搜索之前找到这个：[http ://www.androiddevelopment.org/2008/11/11/how-to-create-and-use-the-sd-card-with-the-android-emulator/](http://www.androiddevelopment.org/2008/11/11/how-to-create-and-use-the-sd-card-with-the-android-emulator/)

# opengl-es - 如何在 Android Native 语言中加载和渲染 .obj 模型

> ID：10754200
> 
> 赞同：-1
> 
> 时间：2012-05-25T12:11:58.533
> 
> 标签：opengl-es, android-ndk, qcar-sdk

我想将 Qualcomm 的增强现实 SDK (Vuforia) 与 min3D 库一起使用并加载 obj 模型。如何将 QCAR (Vuforia) 与 min3D 合并？如何将 QCAR (Vuforia) 的投影和模型视图矩阵应用于 min3D？以便在 min3d.glsurfaceview 中正确渲染场景？有没有人开发过一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:25:22.967

有很多用于 C++ 的 OBJ 文件加载器。检查以下答案以获取更多信息。

[用于 C/C++ 的轻量级 OBJ 网格文件加载器？](https://stackoverflow.com/questions/861458/lightweight-obj-mesh-file-loader-for-c-c)

在 Android NDK 中渲染网格并不像您想象的那么简单，您需要为此学习 OpenGLES。相反，您可以使用许多已经移植到 Android NDK 的渲染引擎。我使用 Irrlicht 来渲染我们的游戏。Android 端口对于基本渲染需求非常稳定。Irrlicht 已经内置了许多 3d 网格格式加载器

# java - 使用 Java 和 Apache POI 3.8 读取 XLSX 文件

> ID：10754207
> 
> 赞同：1
> 
> 时间：2012-05-25T12:12:47.700
> 
> 标签：java, apache, xlsx

我正在尝试使用 Apache POI 读取 XLSX 文件，但我无法读取该文件。我收到以下代码的错误：

```
A sheet hyperlink must either have a location, or a relationship 
```

请帮我查明我哪里出错了：

```
public void readFile() throws Exception {       
    String filePath="/home/work1/DATA FEB/MANI-FINAL/ENGG-1.xlsx";
    XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(filePath));
    sheet = workbook.getSheetAt(0);
} 
```

这是堆栈跟踪：

```
Exception in thread "main" java.lang.IllegalStateException: A sheet hyperlink must either have a location, or a relationship. Found:
<xml-fragment ref="J502:J503" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"/>
    at org.apache.poi.xssf.usermodel.XSSFHyperlink.<init>(XSSFHyperlink.java:72)
    at org.apache.poi.xssf.usermodel.XSSFSheet.initHyperlinks(XSSFSheet.java:182)
    at org.apache.poi.xssf.usermodel.XSSFSheet.read(XSSFSheet.java:139)
    at org.apache.poi.xssf.usermodel.XSSFSheet.onDocumentRead(XSSFSheet.java:119)
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.onDocumentRead(XSSFWorkbook.java:222)
    at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:200)
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:179) 
```

# objective-c - 无法在 iPhone 的 SQLite 中保存图像

> ID：10754209
> 
> 赞同：1
> 
> 时间：2012-05-25T12:12:51.113
> 
> 标签：objective-c

谁能告诉我为什么我无法在 sqlite 中插入图像。有时我得到如下错误：1）（sqlite3_step（stm）== SQLITE_DONE），将值设为21。2）存储在数组中而不是数据库中。我是目标 c 的新手，所以如果你能发回代码，那就太好了，因为我几乎搜索了每个网站。谢谢！

```
 -(IBAction)submitDetails:(id)sender
    {
               sqlite3_stmt    *stm;
            const char *dbpath = [databasePath UTF8String];
            if (sqlite3_open(dbpath, &connectDB) == SQLITE_OK)
            {

                UIImage *contactImage = imageView.image;
                NSData *imageData = UIImageJPEGRepresentation(contactImage, 100);
                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
                [defaults setObject:imageData forKey:@"image"];
                [defaults synchronize];
                NSLog(@"Data saved");             
                NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO STUDENTS (name,salary, gid,photo) VALUES (\"%@\", \"%@\", \"%@\",?)", name.text,salary.text,gid.text,imageData] ;

                const char *insert_stmt = [insertSQL UTF8String];
                sqlite3_prepare_v2(connectDB, insert_stmt, -1, &stm, NULL); 
                NSArray *paths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirec = [paths objectAtIndex:0];
    NSString *imgePath = [documentsDirec stringByAppendingPathComponent:@"note.sqlite"];

    if(sqlite3_open([imgePath UTF8String], &database) == SQLITE_OK){

        const char *sql = "insert into images (images) values (?)";
        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) == SQLITE_OK){
            UIImage *edtedImae = [info objectForKey:UIImagePickerControllerOriginalImage];
            NSData *dataForImage = UIImagePNGRepresentation(edtedImae);
            sqlite3_bind_blob(addStmt, 1, [dataForImage bytes], [dataForImage length], SQLITE_TRANSIENT);
                NSLog(@"1st ..... %i",sqlite3_step(stm));
                NSLog(@" 2nd.... %i",SQLITE_DONE);
                if (sqlite3_step(stm) == SQLITE_DONE)
                {                   
                    NSString* aName=name.text;
                    NSString* aSalary=salary.text;
                    NSString* aGid=gid.text;

                   UIImage* aPhoto=[UIImage imageWithData:imageData];
                    Person *person = [[Person alloc] initWithName:aName salary:aSalary gid:aGid photo:aPhoto];  
               [rootObject.list addObject:person];
               [person release];                
                    status.text = @"Contact added";
                    NSLog(@"contact added %@  %@",name.text,gid.text);
                    NSLog(@"the count in person list is %i",[rootObject.list count]);
                    name.text = @"";
                    gid.text = @"";
                    salary.text = @"";

                } 
                else
                {
                    status.text = @"Failed to add contact";
                }
                sqlite3_finalize(stm);
                sqlite3_close(connectDB);      
            }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T15:16:24.883

如果可以避免，请不要将图像保存在数据库中。相反，使用列来存储文件名和任何其他属性，然后将图像保存为文档。我使用 guid 方法来创建文件名。如果您应该删除 db 条目，请不要忘记删除文档。

# wpf - WPFs DrawingContext.DrawText 不绘制

> ID：10754210
> 
> 赞同：0
> 
> 时间：2012-05-25T12:12:56.310
> 
> 标签：wpf, text, drawing, controls, render

我正在写一个标尺控件，我想在它下面画一个刻度。不幸的是 WPFs DrawingContext.DrawText 方法（尽管它被调用）不绘制任何东西。有没有人有同样的问题并知道解决方案？这是呈现文本的代码部分：

```
protected void RenderRulerScale(DrawingContext drawingContext)
{
    int value = 0;
    for (double x =  this.LargeUnit * (this.ActualWidth / this.Maximum);
        x < this.ActualWidth; x += this.LargeUnit * (this.ActualWidth / this.Maximum))
    {
        string unitString = (++value).ToString() + this.UnitName;
        FormattedText formattedUnitString = new FormattedText(unitString,
            new CultureInfo("en-US"), FlowDirection.LeftToRight,
            new Typeface("Arial"), 5.0, Brushes.Black)
            {
                TextAlignment = TextAlignment.Center,
                MaxTextWidth = 2 * this.LargeUnit,
                MaxTextHeight = 25.0
            };
        drawingContext.DrawText(formattedUnitString, new Point(x, (2.0 / 3.0) *
            this.ActualHeight));
    }
} 
```

此方法在 OnRender 方法中调用：

```
protected override void OnRender(DrawingContext drawingContext)
{
    base.OnRender(drawingContext);
    this.RenderRulerScale(drawingContext);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:39:30.827

我终于找到了解决方案！我认为问题是文本对齐。我把它放回左边，它就起作用了。这是代码：

```
int value = 0;
for (double x = this.LargeUnit * (this.ActualWidth / this.Maximum);
    x < this.ActualWidth; x += this.LargeUnit * (this.ActualWidth / this.Maximum))
{
    string unitString = (++value).ToString() + this.UnitName;
    FormattedText formattedUnitString = new FormattedText(unitString,
        Thread.CurrentThread.CurrentUICulture, FlowDirection.LeftToRight,
        new Typeface(new FontFamily("Arial"), FontStyles.Normal, FontWeights.Normal,
        FontStretches.Normal) , 10.0, Brushes.Black);
    drawingContext.DrawText(formattedUnitString,
        new Point(x - (formattedUnitString.Width / 2.0), (2.0 / 3.0) *
        this.ActualHeight));
} 
```

# hibernate - 如何修复带有弃用警告的 Hibernate 查询？

> ID：10754211
> 
> 赞同：25
> 
> 时间：2012-05-25T12:12:56.387
> 
> 标签：hibernate

有人知道如何避免以下代码的下一个警告吗？

```
org.hibernate.hql.internal.ast.HqlSqlWalker [HqlSqlWalker.java:929] [DEPRECATION] Encountered positional parameter near line 1, column 56\.  Positional parameter are considered deprecated; use named parameters or JPA-style positional parameters instead.
Hibernate: select user0_.ID_USER as ID1_0_, user0_.USERNAME as USERNAME0_, user0_.PASSWORD as PASSWORD0_ from USER user0_ where user0_.USERNAME=?
Hibernate: select authoritie0_.ID_USER as ID1_0_1_, authoritie0_.ID_ROLE as ID2_1_, role1_.ID_ROLE as ID1_2_0_, role1_.NOMBRE as NOMBRE2_0_, role1_.DESCRIPCION as DESCRIPC3_2_0_ from USER_ROLE authoritie0_ inner join ROLE role1_ on authoritie0_.ID_ROLE=role1_.ID_ROLE where authoritie0_.ID_USER=?

Query query = sessionFactory.getCurrentSession().createQuery("from User where username=?");
query.setString(0, username);   
List<User> users = query.list(); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-25T13:14:10.730

如消息所述，请改用命名参数。

```
List users = sessionFactory.getCurrentSession()
        .createQuery( "from User where username = :username" )
        .setString( "username", username )
        .list(); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-24T07:05:27.207

或者您可以使用 JPA 样式的位置参数：

```
createQuery("from User where username=?1"); 
```

您还需要更改 NamedQueries。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-28T11:47:01.470

这是一个扫描所有 hbm 查询文件并将它们更改为 jpa 样式的位置参数的代码示例。

```
@Test
public void replaceQuestionMark() throws IOException {

    org.springframework.core.io.Resource[] resources = new org.springframework.core.io.Resource[0];
    String queryFilesLocation = "persistence/hibernate/hbm/queries";
    resources = (new PathMatchingResourcePatternResolver()).getResources("classpath*:" + queryFilesLocation+ "/**");

    for (org.springframework.core.io.Resource resource : resources) {

        //remove xml description tag because it has also question mark and it can disturb the question mark scanning.
        // I will put it back at the end
        String queryFile = new String(IOUtils.toByteArray(resource.getInputStream())).replace("<?xml version=\"1.0\" encoding=\"UTF-8\" ?>", "");

        //split the queries file by "</named-query>" ending tag
        Iterable<String> queriesInFile = Splitter.on("</named-query>").split(queryFile);

        //initialize new list for new fixed queries string
        List<String> fixedQueryInFile = Lists.newArrayList();

        for (String queryString : queriesInFile) {

            Integer questionIndex = 0;
            char[] queryChars = queryString.toCharArray();
            StringBuffer fixedQueryString = new StringBuffer();
             //scan each char in a single query
            for (int i = 0; i < queryChars.length; i++) {

                char character = queryChars[i];
                //copy the char to the new fixed query
                fixedQueryString.append(character);
                if (character == '?') {
                    //add the question mark order number after the question mark
                    fixedQueryString.append(questionIndex);
                    //increase the order for the next question mark in this single query
                    questionIndex++;
                }

            }
            //add the fixed  query string to the list
            fixedQueryInFile.add(fixedQueryString.toString());
        }

        //add the xml description tag that we removed before + the fixed queries.
        String fixedFile = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>" + Joiner.on("</named-query>").join(fixedQueryInFile);
        File file = null;
        try {
            file = resource.getFile();
            //find the query file in the sources
            FileOutputStream fileOutputStream = new FileOutputStream(new File(file.getPath().replace("target\\classes", "src\\main\\resources")));
            //overwrite the file with the new fixed queries 
            fileOutputStream.write(fixedFile.getBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    if (resources == null) {
        throw new RuntimeException("resource not found");
    }
} 
```

# iphone - 在地图上查找线和点之间的距离

> ID：10754214
> 
> 赞同：0
> 
> 时间：2012-05-25T12:13:08.040
> 
> 标签：iphone, ios, geometry, latitude-longitude

我正在构建一个地理感知 iPhone 应用程序，我想计算用户位置与两点之间的线之间的距离。我发现这个答案是这样的：

[点到线段的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

然而，这并没有考虑到线是有限的 - 如果用户远离线但靠近线的无限投影的位置，它将作为点和无限投影之间的距离出现，而不是线上最近的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:59:10.173

如果你有 AB 线和 P 点，你应该找到从 P 点到 AB 线的距离，然后是 AP 和 BP 的距离，然后选择最短的（抱歉英语不好）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:12:40.637

正如您所描述的，使用您链接到的解决方案在无限线上给您一个点。然后检查该点是否在您的有界线内（即 x 坐标位于 min 和 max x 坐标内，y 相同）。如果确实如此，则返回。否则，最近点是端点之一。找出哪个。完毕。

# c# - Ninject 的 Dispose 方法真的有必要吗？

> ID：10754217
> 
> 赞同：0
> 
> 时间：2012-05-25T12:13:14.920
> 
> 标签：c#, ninject, ninject-2

我们目前正在评估是否可以将 Ninject 用于未来的项目。一个条件是，库不应强迫我们调用 Dispose 方法。那么，真的有必要吗？不调用它会导致内存泄漏和其他丑陋的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:28:00.390

如果您不调用 Dispose()，我认为作为纯托管解决方案的 Ninject 不会出现内存泄漏或其他问题。特别是因为您只会调用内核的 D​​ispose() 方法作为您在终止应用程序之前所做的最后一件事，因此内存将被 GC 或操作系统的进程隔离回收。

您需要一个允许您调用 Dispose() 的 IoC 容器的原因是它将在任何实现 IDisposable 的服务提供程序上调用 Dispose()。我相信这是一个有用的功能，因为服务提供者可能拥有非托管资源或需要等待异步操作完成（或至少以有序的方式中止它们）。

我敢打赌，这就是大多数在其内核/提供者/定位器类上实现 IDisposable 的 IoC 容器背后的原因。

为什么在 IoC 容器上使用 Dispose() 对您来说是个问题？到目前为止，我总是找到一个合适的位置来调用它，无论是在控制台应用程序、基于 XAML 的 WPF 应用程序还是 Xbox 游戏中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T15:09:21.623

您可以配置 Ninject 以帮助您使用 Dispose。这取决于您对 Ninject 使用的*范围*和*策略。*例如：

*   [Ninject 会释放具有另一个作用域的每个 Disposable 对象，而不是 `InTransientScope`在 GC 收集所创建对象所绑定的作用域对象时。](https://stackoverflow.com/a/10242470/443366),
*   当内核处理时，单例将被处理，
*   你也可以使用`OnDeactivation`方法或`InScope(x => new DisposableStrategy())`
*   或用于`StandardScopeCallbacks.Request`使您的对象与`HttpRequest`. 这对 Web 应用程序很有用。

# typo3 - TYPO3 我不能再使用新的扩展

> ID：10754218
> 
> 赞同：0
> 
> 时间：2012-05-25T12:13:20.117
> 
> 标签：typo3

在对我的 TYPO3 站点（现在在 4.6.4 上）进行了几次更新后，我无法再安装新的扩展。扩展管理器获取它们但我不能实际使用它们（插入内容元素时它们不会显示在模块列表中）。

该网站的其余部分运行良好，我什至能够更新现有的扩展。

知道如何解决此错误吗？有没有办法只卸载和重新安装 Extension Manager ？我试图删除表 sys_ter 但它没有区别。我对删除表 cache_extension 犹豫不决。

编辑：删除数据库错误消息，因为 pgame 建议这不是问题。另外：为了清楚起见，重新阐述了这个问题

EDIT2：升级到typo3 4.7解决了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:05:02.530

尝试使用 修复它`Install tool`，选择`Database Analyser`下一步`COMPARE`，您将看到缺少哪些表，您可以通过选择相应的复选框来添加它们。

小心删除建议的表和/或字段，确保它们没有真正被使用。

当然，我建议在操作前创建完整转储。

# javascript - Chrome、位置固定和 javascript 问题

> ID：10754233
> 
> 赞同：0
> 
> 时间：2012-05-25T12:14:12.323
> 
> 标签：javascript, css, google-chrome, position, fixed

就像标题告诉你的那样，我在使用 Chrome 时遇到了一些问题。

我得到了一个背景图像，它覆盖了浏览器大小的 100% 宽度和高度自动。位置设置为固定。这适用于所有浏览器。但后来我想让我的脚注位置固定，它只是不想留在 Chrome 的页面底部！

只要我不滚动，它就在底部。当我滚动时，页脚菜单会上升。它仅在 Chrome 中以这种方式运行。有人知道我该如何解决吗？

另一件事是我有一些看起来像这样的javascript：

```
function showContent() {
    document.getElementById('showbox').style.marginTop = '20px';
    document.getElementById('showcontent_btn').onclick = function() {hideContent();} 
    document.getElementById('showcontent_btn').id = 'hidecontent_btn';
}

function hideContent() {
    document.getElementById('showbox').style.marginTop = '30%';
    document.getElementById('hidecontent_btn').onclick = function() {showContent();} 
    document.getElementById('hidecontent_btn').id = 'showcontent_btn';
} 
```

这是2个功能，showContent让我的contentbox向上，在主菜单下方20px，hideContent让contentbox向下，占整个浏览器的30%，这样就可以看到背景图片了。它适用于所有浏览器，除了 chrome...

在 chrome 中，每次单击按钮时，似乎什么都没有发生，但是如果我开始移动鼠标，我悬停的部分内容开始弹出，只显示部分内容，看起来真的很乱向上。为了摆脱这个，我必须刷新页面。

请帮我解决我的问题。我已经尝试了我所知道的一切，但它不起作用。

**编辑：在这里你有一个工作的 jsfiddle 的 javascript 函数：http: [//jsfiddle.net/Z8XPA/4/](http://jsfiddle.net/Z8XPA/4/)**

* ***EDIT2：这是我想要定位的页脚菜单的 HTML 和 CSS：HTML：**

```
<div id="footer_menu"><?php print render($page['footer_menu']); ?></div> 
```

**CSS：**

```
#footer_menu { 
    position:fixed; 
    z-index:2; 
    bottom:0px; 
    width:100%;
    height:45px;
    background:rgba(0,0,0,0.5) !important;
    background-color:#000000;
} 
```

最好的问候，丹尼尔·伦达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T13:53:29.513

听起来这可能是由于使用跳转链接时导致固定元素有时消失的同一件事（[固定元素在 Chrome 中消失](https://stackoverflow.com/questions/11258877/fixed-element-disappears-in-chrome)）。chrome 中有一个错误导致这种情况发生。

对我有用的解决方案是将其添加到固定元素：

```
-webkit-transform: translateZ(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:43:42.640

试试 CSS

正文,html{高度:100%,宽度:100%}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-16T14:41:56.683

通过简单地添加 position:sticky （供应商前缀），我们可以告诉一个元素是 position: relative ，直到用户将项目（或其父项）滚动到距离顶部 15px 处：

```
.sticky {
  position: -webkit-sticky;
  position: -moz-sticky;
  position: -ms-sticky;
  position: -o-sticky;
  top: 15px;
} 
```

在顶部：15px，元素变得固定。

[资源](https://developers.google.com/web/updates/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)

# ios - ZBar SDK 与 IOS 集成

> ID：10754235
> 
> 赞同：0
> 
> 时间：2012-05-25T12:14:14.543
> 
> 标签：ios

我最近下载了 ZBar SDK，现在想扫描条码，但在教程和示例应用程序中，需要在 modalview 中显示 ZBarReaderViewController，以便为扫描做好准备。有什么方法可以在不显示 zbarviewcontroller 的情况下读取条形码，让我们说在后台模式下做某事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:16:56.513

您根本不需要显示 ViewController，您需要的是 UIView 子类：ZBarReaderView。您可以将其显示为任何视图控制器根视图的子视图。如果你想让它对用户不可见，你可以添加视图，然后使用 start 和 stop 方法开始捕捉，并简单地在这个视图上覆盖一些东西，这样用户就看不到相机捕捉。

希望有帮助。

# apache - 如何在 Apache ACE 中访问 OBR？

> ID：10754238
> 
> 赞同：1
> 
> 时间：2012-05-25T12:14:22.470
> 
> 标签：apache, repository, obr, apache-ace

当我运行 Apache ACE 时，控制台会显示一条消息，指出 OBR 站点托管在 `http://localhost:8080/obr`. 但是当我试图访问这个链接时，什么也没有发生。需要进行哪些修改才能使其工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:10:24.467

你期望发生什么（假设你已经在浏览器中打开了链接）？您可能正在寻找的是安装在 OBR 中的捆绑包列表，可以通过以下方式获得：“http://localhost:8080/obr/repository.xml”

# flash - Adobe Flash Player / Flex 选择扬声器

> ID：10754239
> 
> 赞同：0
> 
> 时间：2012-05-25T12:14:24.670
> 
> 标签：flash, apache-flex

有没有办法从 Adob​​e Flex 中选择使用过的扬声器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:56:28.223

不是通过代码或现有的 API。如果您正在运行 AIR 应用程序，您可以编写一个 Native Extension 来选择声音输出设备；因为这是在操作系统级别完成的。

# php - 重置操作的图像

> ID：10754240
> 
> 赞同：1
> 
> 时间：2012-05-25T12:14:30.097
> 
> 标签：php, javascript, html

我正在使用图像而不是重置按钮 n html-php。我编写了一个 javascript 函数来清除所有文本框值，但它会重新加载整个页面，以便在重新加载页面时值再次出现在文本框中，当单击重置操作的图像按钮..我的代码是

```
<script type="text/javascript">
function clearall() {
$(".tinput").val('');
$(".tinput1").val('');
}
</script> 
```

我不希望页面重新加载，而只清除所有文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:27:40.230

用这个：

```
<script type="text/javascript">
function clearall() {
$(".tinput").val('');
$(".tinput1").val('');
return false;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:27:57.850

看起来您的表单正在提交中。

您需要停止按钮的默认操作，为此您必须`.preventDefault()`在事件上或`return false`从处理程序中调用方法。

您还应该使用表单的`.reset()`方法..

```
function resetForm(callingElement) {
   callingElement.form.reset();
   return false;
} 
```

并将其与`<input type="image" src=".." onclick="return resetForm(this)" />`

**演示在** [http://jsfiddle.net/gaby/3R2TX/](http://jsfiddle.net/gaby/3R2TX/)

* * *

由于您使用的是 jQuery，您可以将其简化为

```
function resetForm(e) {
   e.preventDefault();
   this.form.reset();
} 
```

并应用它

```
 $('#id_of_reset_button').click(resetForm); 
```

**jQuery 演示在** [http://jsfiddle.net/gaby/3R2TX/1/](http://jsfiddle.net/gaby/3R2TX/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:19:28.463

当有超链接或提交按钮时，您的函数必须返回 FALSE 才能停止处理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:20:06.323

```
<img id="reset" src="" />

<script type="text/javascript">
  $("#reset").click(function(){
    $(".tinput").val('');
    $(".tinput1").val('');
  });
</script> 
```

# multithreading - 使用多线程程序接收和组织串行消息（在 C++ 中）

> ID：10754243
> 
> 赞同：0
> 
> 时间：2012-05-25T12:14:51.423
> 
> 标签：multithreading, multidimensional-array, serial-port, mutex, critical-section

我是多线程编程的新手，所以我想知道是否有人可以帮助我。

我必须制作一个程序来接收串行（和连续）异步消息，然后读取并组织该消息。

我正在尝试使用多线程策略：第一个线程负责接收串行信息并将其写入矩阵 (RxTh[col][row])，*一次一行*。然后，调用第二个线程，读取 RxTh 矩阵的每一行并搜索特定字符（表示“开始行”消息）。该线程还必须将收到的消息放入另一个矩阵 (Msg[col2][row2]) 中，将 msg 的每一行分隔在新矩阵的不同行中。

将来，我将不得不使用这些重新排列的行，并搜索具体信息，但我现在不考虑这部分。

所以，我对这个程序有一些问题：

*   首先，当我停止写入开始读取部分时，我丢失了一些串行消息。这就是我尝试使用互斥锁或临界区的原因。但它不起作用，我不知道为什么。

*   第二个问题是第二个矩阵 (Msg[][]) 在某些行的中间有奇怪的“0”序列，我怀疑这个“0”出现在这个线程开始读取新行时RxTh 矩阵。这有什么意义吗？

*   当我使用互斥锁时，我可以一次只锁定一行吗？

如果有人可以帮助我，我将不胜感激！！

如果您需要更多信息或一段代码，请问我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:48:26.560

你真正想要的是一个缓冲区队列。您的矩阵只是复制它，但令人困惑并且不携带元数据（关于数据的数据）。

1）定义一个包含缓冲区的类或结构+有关此缓冲区中内容的一些信息（例如已写入多少数据）。喜欢：

```
class Buff
{
    char contents[1024]; //(this represents your row)
    int numWritten;
    ...
} 
```

2) 创建一个由临界区保护的先进先出队列。

现在 Thread1 创建`new`缓冲区，填充它并获取临界区，将缓冲区推送到队列末尾，并释放临界区。

Thread2 获取临界区，从队列中取出第一个缓冲区，释放临界区。处理完缓冲区后，将其删除。

您将需要一些额外的同步，因此如果没有更多完整的缓冲区要处理，thread2 可以等待。如果填充的缓冲区数量过多，线程 1 也应该暂停，以便给线程 2 更多时间。

如果您觉得创建和删除缓冲区可能不是最佳选择，那么请制作一些缓冲区管理器。它将保存预定义数量的缓冲区（列数）。Thread1将从该池中获取缓冲区，而不是`new`thread2 将它们返回到池中，而不是`delete`.

如果为每个缓冲区创建单独的互斥锁，则可以轻松地一次锁定一个缓冲区。但是在只有一个线程正在发送和一个正在接收的情况下没有必要。

# c# - 在 C# 中将 double 转换为 int

> ID：10754251
> 
> 赞同：134
> 
> 时间：2012-05-25T12:15:19.103
> 
> 标签：c#, int, double

在我们的代码中，我们有一个需要转换为 int 的 double。

```
double score = 8.6;
int i1 = Convert.ToInt32(score);
int i2 = (int)score; 
```

谁能解释我为什么`i1 != i2`？

我得到的结果是：`i1 = 9`和`i2 = 8`。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-05-25T12:17:30.817

因为[`Convert.ToInt32`](http://msdn.microsoft.com/en-us/library/ffdk7eyz.aspx)回合：

> 返回值：四舍五入到最接近的 32 位有符号整数。如果 value 在两个整数的中间，则返回偶数；即4.5转换为4，5.5转换为6。

...而演员[截断](http://msdn.microsoft.com/en-us/library/yht2cx7b.aspx)：

> 当您从 double 或 float 值转换为整数类型时，该值将被截断。

**更新：**有关其他差异，请参阅下面的 Jeppe Stig Nielsen 的评论（但是，如果是实数，则不会发挥作用`score`，就像这里的情况一样）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-25T12:20:05.670

强制转换将忽略小数点后的任何内容，因此 8.6 变为 8。

`Convert.ToInt32(8.6)`是确保您的双精度数舍入到最接近的整数的安全方法，在本例中为 9。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-25T12:20:04.000

你可以把你的替身和演员四舍五入：

```
(int)Math.Round(myDouble); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-05-18T12:37:25.580

在提供的示例中，您的小数是**8.6**。如果是 8.5 或 9.5，陈述**i1 == i2** 可能是真的。事实上，对于 8.5 来说它是真的，而对于 9.5 来说它是假的。

**解释：**

无论小数部分如何，第二条语句`int i2 = (int)score`都会丢弃小数部分并简单地返回整数部分。这样做非常危险，因为可能会发生数据丢失。

现在，对于第一个语句，可能会发生两件事。如果小数部分是5，也就是半途而废，就要做出决定。我们向上还是向下取整？在 C# 中，Convert 类实现银行家的舍入。有关更深入的解释，请参阅[此](https://stackoverflow.com/questions/311696/why-does-net-use-bankers-rounding-as-default)答案。简单来说，如果是偶数，则向下取整，如果是奇数，则向上取整。

例如考虑：

```
 double score = 8.5;
        int i1 = Convert.ToInt32(score); // 8
        int i2 = (int)score;             // 8

        score += 1;
        i1 = Convert.ToInt32(score);     // 10
        i2 = (int)score;                 // 9 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T12:18:49.133

ToInt32 轮。转换为 int 只会丢弃非整数部分。

# c# - 如何使 ASP.NET 网站与 TCP 服务器应用程序通信

> ID：10754255
> 
> 赞同：1
> 
> 时间：2012-05-25T12:15:23.577
> 
> 标签：c#, asp.net, wcf, windows-services

我有一个架构，其中通过服务器应用程序管理和监视一组硬件（通过 TCP 套接字进行通信并更新与硬件相关的数据库）。还有一个 asp.net 网站，用户可以通过它通过 tcp 服务器获得硬件的实时状态。tcp 服务器和网站将托管在同一台机器上。

我的问题是如何让 USER 与 TCP SERVER 交互？

我遇到的一种方法是在 Windows 服务中制作 tcp 服务器并在其中托管 wcf，并制作 asp.net 网站来使用此服务。但由于我是一个完全的新手，我对此感到困惑。所以请告诉我这个解决方案是否适用于我的问题。如果是，请详细说明如何完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:52:24.327

这是可能的实现之一。由于您的应用程序（IIS 托管网站和 Windows 服务应用程序）在同一台机器上，您应该使用 NetNamedPipeBinding（因为它是单台机器上最快的 WCF 通信）。

在 HTTP 应用程序和 Windows 服务之间还有其他通信方式，但这种方式快速、可靠且非常容易实现。我当然会这样做。

# android - Android：在文本视图上画线

> ID：10754265
> 
> 赞同：7
> 
> 时间：2012-05-25T12:15:55.947
> 
> 标签：android, drawable, textview

[我曾在Android: Ruled/horizo​​nal lines in Textview](https://stackoverflow.com/questions/10748467/android-ruled-horizonal-lines-in-textview)上问过一个题为“Android：TextView中的规则/水平线”的问题。但我没有得到要求的答案。所以我打算通过java在TextView上画线来做到这一点。有没有办法在TextView中画线？或者如果我从 java 代码中获得行尾，那么我将能够为每一行添加 textview。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-26T23:59:39.447

我正在使用在**EditText**中的每一行文本之间绘制线条的技术，然后我将通过将**setKeyListener(null)设置为自定义 EditText 对象来使****EditText**不可编辑，这样 EditText 就像**TextView** :)

 ***** * *

## 一个自定义的 EditText，它在显示的每行文本之间画线：

```
public class LinedEditText extends EditText {
    private Rect mRect;
    private Paint mPaint;

    // we need this constructor for LayoutInflater
    public LinedEditText(Context context, AttributeSet attrs) {
        super(context, attrs);

        mRect = new Rect();
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(0x800000FF);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int count = getLineCount();
        Rect r = mRect;
        Paint paint = mPaint;

        for (int i = 0; i < count; i++) {
            int baseline = getLineBounds(i, r);

            canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);
        }

        super.onDraw(canvas);
    }
} 
```

* * *

现在在需要**TextView的地方使用****LinedEditText**类的对象并使其不可编辑。

 **## 一个例子：

```
public class HorizontalLine extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);
        setTitle("Android: Ruled/horizonal lines in Textview");

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        LayoutParams textViewLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        LinedEditText et = new LinedEditText(this, null);
        et.setText("The name of our country is Bangladesh. I am proud of my country :)");
        et.setLayoutParams(textViewLayoutParams);
        et.setKeyListener(null);

        ll.addView(et);
        this.setContentView(ll);

    }

} 
```

* * *

**et.setKeyListener(null)**使 EditText 不可编辑，因此它就像一个 TextView。

* * *

## 输出：

![在此处输入图像描述](../Images/05b20a8a788bd3b3ae3eb6e3e0a0e9e5.png)

## 光标问题：

如果您仅使用**et.setKeyListener(null)**，那么它只是不听键，但用户可以在 EditText 上看到光标。如果您不想要此光标，只需添加以下行即可禁用 EditText：

```
 et.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:15:55.123

我不知道你为什么要在 textview 中添加一行。如果您想绘制一条水平单线，只需将此代码放在您从数据库中读取的文本视图之间，显然是在您的布局 xml 文件中：

`<View android:background="#colorYouWant" android:layout_width = "fill_parent" android:layout_height="1dip" android:id="+@id/horizontalLine"/>`

在相关的 java 代码中通过 java 编码调整分隔：

```
View horizontalLine = (View)findViewById(R.id.horizontalLine);
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
lp.setMargins(left, top, right, bottom);
horizontalLine.setLayoutParams(lp); 
```

左侧、顶部、右侧、底部参数是您必须更改的参数。******

# debugging - 管理调试代码

> ID：10754268
> 
> 赞同：0
> 
> 时间：2012-05-25T12:16:00.830
> 
> 标签：debugging, language-agnostic, refactoring, project-management

在某些项目中使用 IDE 的调试会变得很长，特别是在处理图形时，所以有时我使用调试代码，它会根据环境打印出值，有时在项目本身上，有时在控制台上。但是当项目完成后，很难找到调试代码并将其删除，当一个不需要的东西弹出时，它会显得很奇怪。我现在还是学生，现在学好，以后学，怎么管理？

我在搜索时找不到正确的答案，但我有一些想法：

1.  测试模块后立即删除代码，因此找到的内容更少。它可以工作，但是当模块必须稍后（在更高级别）进行测试时，它必须再次添加，而不是删除的程度，但仍然如此。

2.  将其包围`if`以确保它仅在`debugging`flag 为 true 时运行，并将其保留在项目的最终版本中。

3.  与项目一起计划调试代码，保持方法和类分开（如果可能）并删除调用和对象以及何时完成。

管理它的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:20:32.483

最简单的方法是使用`debugging`标志。

如果此标志是编译器常量（或以其他方式硬编码），如果您想要/不想要调试，则需要重新编译项目。

更好的方法是使标志使用配置文件/命令行参数中的值——这样您就可以控制调试而无需重新编译项目。

更好的方法是使用功能强大的日志库（如果有的话）并使用它的设施——优点是您可以更好地微调您想要记录的内容、位置和格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:49:37.347

最好的方法是调试代码中的变量

```
set isDebugEnabled=true // in case of development server
set isDebugEnabled=false // in case of production server 
```

或者日志也可以在生产中进行管理以跟踪问题，但不能达到开发服务器所需的程度

```
var isDebugEnabled=ConfigurationManager.Appsettings["isDebugEnabled"].ToString();
if(Convert.ToBoolean(isDebugEnabled))
{
  Console.log("Log Message");
} 
```

不要忘记检查 window.console 以防不支持 Console.Log 上面的语句会抛出异常，所以：

```
var isDebugEnabled=ConfigurationManager.Appsettings["isDebugEnabled"].ToString();
if(Convert.ToBoolean(isDebugEnabled) && window.Console)
{
  Console.log("Log Message");
}
else
{
  //Follow file logging mechanism.
} 
```

# google-apps-script - 返回超链接或现有公式的自定义 Google 电子表格函数

> ID：10754269
> 
> 赞同：12
> 
> 时间：2012-05-25T12:16:01.713
> 
> 标签：google-apps-script, google-sheets

我目前在 Google 电子表格中以以下形式输入超链接：

```
=HYPERLINK("http://jira.com/browse/ISSUE-12345","ISSUE-12345") 
```

我每次都在复制“ISSUE-12345”。我想创建一个函数 JIRA(12345)，它给出与上述超链接相同的结果。有没有办法在脚本中返回超链接，例如

```
function JIRA(jiraNum) {
  // Returns JIRA hyperlink
  var link = ("http://jira.com/browse/ISSUE-"+jiraNum,"ISSUE-"+jiraNum);
  return link;
} 
```

会工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T23:25:49.843

我也遇到了同样的问题，提交了[功能请求并收到了一个有趣的解决方案](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2521)：

适用于您的情况，以下将起作用。

```
function onEdit(e) {
 // limit to only apply to specific range
  col = e.range.getColumn();
  row = e.range.getRow();        
  if (row > 1 && row < 10 && col == 1) { // A2:A9
    if (e.value != "")
      e.range.setFormula("=HYPERLINK(\"http://jira.com/browse/ISSUE-"+e.value+"\", \"ISSUE-"+e.value+"\")");
  }
} 
```

我认为这是一种解决方法，但目前它可能是唯一的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T19:34:21.567

看看这个：[https ://code.google.com/p/google-apps-script-issues/issues/detail?id=2521](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2521)

看来此功能不可用，也将不可用。

如果您愿意跳过文本显示“ISSUE-1234”，您至少可以返回**链接**以获得工作链接。

```
function JIRA(jiraNum) {
  var link = 'http://jira.com/browse/ISSUE-' + jiraNum;
  return link;
 } 
```

我希望这会有所帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-16T07:58:13.083

`setForumla`您可以通过如下设置单元格值来减轻处理权限的需要和必须处理的问题：

```
=HYPERLINK(getJiraTicketLink(12345), getJiraTicketLabel(12345)) 
```

其中`12345`当然可以是*（隐藏列）*相邻单元格而不是硬编码字符串。

然后创建两个类似于以下的简单函数：

```
var JIRA_BASE_URL = "http://jira.com/";
var JIRA_PROJECT_PREFIX = "ISSUE-";

function getJiraTicketLink(jiraNum) {
  return JIRA_BASE_URL + "browse/" + JIRA_PROJECT_PREFIX + jiraNum;
}

function getJiraTicketLabel(jiraNum) {
  return JIRA_PROJECT_PREFIX + jiraNum;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-10T08:41:53.563

您可以使用富文本生成器：

```
function onEdit(e){
      var jiraIDColumnID = 1;
      var jiraIDfirstRow = 5;
      var jiraBaseURL = "https://jira.tttttt.com/";
      if (e.value != null && 
          e.value.trim().length != 0 &&
          e.range.getColumn() == jiraIDColumnID && 
          e.range.getRow() >= jiraIDfirstRow ) 
      {
        var richValue = SpreadsheetApp.newRichTextValue()
          .setText(e.value)
          .setLinkUrl(jiraBaseURL + "browse/" + e.value)
          .build();
        e.range.setRichTextValue(richValue);
      } 
    } 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-26T04:10:44.577

不需要脚本功能：

```
=HYPERLINK(CONCATENATE("http://jira.com/browse/ISSUE-",12345),CONCATENATE("ISSUE-",12345)) 
```

如果您在单元格中有 jiraNum（例如 A2），则可以使用单元格引用：

```
=HYPERLINK(CONCATENATE("http://jira.com/browse/ISSUE-",A2),CONCATENATE("ISSUE-",A2)) 
```

# jquery - iPhone JQuery：如何使用 iPhone 中的 Jquery Mobile + phone gap 在 iPad 中实现拆分视图

> ID：10754271
> 
> 赞同：6
> 
> 时间：2012-05-25T12:16:20.597
> 
> 标签：jquery, iphone, ipad, jquery-mobile, cordova

我曾尝试***`split view`***使用**`JQuery mobile Phone gap`**

*示例代码在* **`index.html`**

```
 <head> 
        <link rel="stylesheet" href="inc/jquery.mobile.structure-1.0.1.min.css" />
        <link rel="stylesheet" href="inc/jquery.mobile-1.0.1.min.css" />
        <link rel="stylesheet" href="inc/resources/css/jquery.toastmessage.css" />

        <script type="text/javascript" src="inc/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="inc/jquery.mobile-1.0.1.min.js"></script>

        <script type="text/javascript" src="inc/phonegap-1.2.0.js"></script>
    </head> 

    <body> 

        <div data-role="page" data-theme="c">
            <div data-role="header">
                Mpbile Split View
            </div>   

            <div data-role="content">

                 <!--- Left side view------>
                <div class="left-content">
                    <h3>lef hand content</h3>
                    <ul data-role="listview">
                        <li>One</li>
                        <li>One</li>
                        <li>One</li>
                        <li>One</li>
                    </ul>
                </div>

                <!--- Right side view------>
                <div class="right-content">
                    <h3>Right hand content</h3>
                    <ul data-role="listview">
                        <li>Two</li>
                        <li>Two</li>
                        <li>Two</li>
                        <li>Two</li>
                    </ul>
                </div>
            </div>
        </div>

    </body> 
</html> 
```

但它从上到下一页一页地显示同一页面上的两个视图，如下所示

![在此处输入图像描述](../Images/42418a89df08db8b3a9f6bf2eaca7c24.png)

我需要两张桌子，***一张在左侧***（），**另一张在右侧**（）**`split view`** ****`root view`********`details view`******

 ***怎么可能使用 jQuery？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:34:57.833

您可以使用[http://jeromeetienne.github.com/jquery-mobile-960/](http://jeromeetienne.github.com/jquery-mobile-960/)并将其与该网格分开。

如果您了解 960.gs 或任何其他 css 网格框架，这对您来说将非常容易。在提到的站点上有使用演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T03:12:46.953

试试 simplesplitview

[http://simplesplitview.sourceforge.net/](http://simplesplitview.sourceforge.net/)

它是最好的 jquerymobile splitview 并且该死的易于实现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:33:26.270

尝试使用我的[多视图插件](https://github.com/frequent/multiview/tree/master/multiview%20JQM%201.1)。

它允许在 Jquery Mobile 中并排显示 1/2/3 个面板以及弹出面板。我没有用 PhoneGap 尝试过（刚刚完成 JQM 1.1），所以如果你试一试，请告诉我它是否有效（我应该猜）。

请使用 1.1 版本和 JQM 1.1.multiview，这需要一些调整才能正常工作。

我目前正在做新的 README 和示例站点。过几天应该就起来了。***

# google-app-engine - Google App Engine 使用 Google Apps 非主域

> ID：10754273
> 
> 赞同：1
> 
> 时间：2012-05-25T12:16:43.080
> 
> 标签：google-app-engine, dns, subdomain, google-apps

我在 Google App Engine 上有一个应用程序，我想使用我的自定义域访问它。我有一个刚刚注册的新域，并且我成功地使用 Google Apps 设置了它：forwardfour.com。

但是，我将其设置为电子邮件托管的主域。我真的很想从我刚刚注册并设置为同一 Google Apps 帐户中的另一个域（不是域别名）的第二个域托管此应用程序。域是 ffstatic.com。

我已经在 Google App Engine 上部署了我的应用程序的最新版本，并按照 Google 的文档为 ffstatic.com 添加了一个子域。我创建了一个登录名为 somename@ffstatic.com 的用户，并以该用户身份登录以链接到该域。

但是，我只能选择为主域 forwardfour.com 添加一个子域，即使我在 App Engine 控制台中输入了 ffstatic.com 以创建子域。没有我在哪里可以选择为 ffstatic.com 创建子域，即使它是经过验证的域。

有谁知道为什么我不能这样做？我听说可以做到。

感谢您的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T14:58:01.253

我相信目前可以在主域或别名上添加自定义域映射。

您必须删除 ffstatic.com 作为辅助域并将其重新添加为别名。

**更新**：正如马特指出的那样，您现在有一个甚至不涉及 Google Apps 映射的替代方案：

> 我们从 Google Developers Console 添加了对 App Engine 自定义域的支持，这意味着您现在可以关联自定义域，而无需先将该域与 Google Apps 关联。
> 
> 要访问该功能，请访问[https://console.developers.google.com/](https://console.developers.google.com/) ，您将在 App Engine > 设置下找到添加自定义域的选项。
> 
> 注意：目前我们不支持通过此方法创建的自定义域上的 SSL（尽管我们希望在未来的版本中纠正此问题）。同时，我们继续为通过 Google Apps 创建的自定义域支持 SSL（通过 VIP 或 SNI），并且我们继续为所有 *.appspot.com 域提供免费的 HTTPS。

[https://code.google.com/p/googleappengine/issues/detail?id=8517#c5](https://code.google.com/p/googleappengine/issues/detail?id=8517#c5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-12T11:52:04.780

这刚刚使用新功能进行了重建。

可以在 App Engine -> 设置下的[https://console.developers.google.com](https://console.developers.google.com)找到设置自定义域

您现在可以映射多个域，我认为甚至是裸域。

但此时不支持 SSL。

马特

# java - 正则表达式捕获组与使用日期拆分，哪个更好？

> ID：10754275
> 
> 赞同：3
> 
> 时间：2012-05-25T12:16:58.367
> 
> 标签：java, regex, groovy

在多种情况下，我发现自己需要捕获格式如下的日期的“日”部分：`"YYYY/DD/MM"`我的问题是，将正则表达式与捕获组一起使用是否是一个更好的主意，而不是仅在“/”上调用 split " 并且只取数组中的第二项？

从功能上讲，我意识到两者都得到相同的结果。

在内存方面，我意识到他们都在后台使用正则表达式引擎，并且在大多数情况下，我只是在使用 split 读取一天的值后丢弃数组。`Match`但从技术上讲，我在读取对象后也会做同样的事情。我正在寻找是否有任何极端情况和权衡我应该考虑我不是？（除了可读性......“分裂”显然在那里获胜......）

===EDIT=== API 方面，出于愚蠢的遗留原因，我仅限于 Groovy 1.5.0。

澄清edmastermind的解决方案：

```
def nowCal = Calendar.instance 
def currentDay = nowCal.get(Calendar.DAY_OF_MONTH) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:24:26.133

如果它的格式始终相同，我会使用 String 的 substring 方法来提取您想要的内容。每次使用 REGEX 时都必须对其进行解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:24:29.143

如果您使用 DateFormat，则该代码更有意义，setDateFormat 与字符串的格式，然后解析为 Date 对象。性能方面，可能比您的方法有更多的开销。

但是，我想指出：
如果您可以信任输入字符串，那么您可以使用任何您想要的结果来获得结果。
如果你不能，那么只需使用 DateFormat 来解析日期字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T13:10:05.717

在 Groovy 中，您可以这样做：

```
def date = '2012/05/25'

assert 25 == Date.parse( 'yyyy/MM/dd', date )[ Calendar.DAY_OF_MONTH ] 
```

对于 Groovy 1.5.0，这将是（包装为函数）：

```
int getDay( String date, String format='yyyy/MM/dd' ) {
  Calendar.instance.with {
    time = new java.text.SimpleDateFormat( format ).parse( date )
    get( Calendar.DAY_OF_MONTH )
  }
}

def date = '2012/05/25'
assert 25 == getDay( date ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T12:24:52.950

对于这种情况，您应该选择产生最具可读性和可维护性代码的解决方案，所以我会选择这种`.split`方法而不是正则表达式方法。

考虑几个月后，日期的格式会发生变化。这意味着您必须对正则表达式进行细微的更改。尽管这可能不是一项艰巨的任务，但对于那些接触过正则表达式的人来说，这可能不是那么简单。

对于这种情况，`.split("//")`在这种情况下非常直观，因此没有正则表达式经验的人更容易理解和维护。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T12:26:26.057

如果您需要使用最少的资源来完成此操作，请考虑使用 String#indexOf 和 String#substring。同样重要的是要注意，进行基准测试将帮助您做出正确的决定。

我认为在这件事上使用正则表达式非常简洁，并且表明您只对中间部分感兴趣，拆分版本更难阅读，因为您不知道拆分返回多少元素，除非您将其编码为评论。

简单的正则表达式方法和拆分方法都不会为您提供正确的日期验证。为此，请尝试考虑使用 DateFormat 的解析函数。这可能是最慢的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T16:07:34.800

注意到 java 标签，调用[DAY_OF_MONTH](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DAY_OF_MONTH)来获取“day”部分而不是正则表达式或拆分它是否可行？

# wpf - 绑定值未更改时的 WPF 表单验证

> ID：10754278
> 
> 赞同：2
> 
> 时间：2012-05-25T12:17:02.283
> 
> 标签：wpf, data-binding, validation

这是问题所在：

1.  我有一个简单的表格（文本框等）。
    *   绑定都在一个`BindingGroup`.
    *   每个绑定都有`UpdateSourceTrigger=Explicit`设置。
    *   某些绑定附加了不允许空白/空值（必填字段）的验证规则。
2.  我将一个**全新**的**空**对象绑定到表单。
3.  不输入任何数据，用户点击保存按钮触发`BindingGroup.UpdateSources()`。
4.  UpdateSources 成功，不会触发验证错误。

我相信这是因为 WPF 仅在用户主动更改 UI 中该字段的值时才会触发每个绑定的验证规则，并且由于我最初将空对象绑定到表单，因此没有任何更改。这不是我想要的行为 - 我希望在调用 UpdateSources 时评估所有验证规则。

有谁知道获得我想要的行为的（希望是干净的）方法？

* * *

这是 C# 和 XAML 代码的（缩短的、简化的）示例：

**ToolTypeModelPanel.xaml.cs**

```
private void addModelButton_Click(object sender, RoutedEventArgs e)
{
    ToolModel model = new ToolModel();

    // bind the model details view to the new model
    this.createModelBinding = new Binding();
    this.createModelBinding.Source = model;
    this.modelFormGrid.SetBinding(Grid.DataContextProperty, this.createModelBinding);
}

private void saveModelButton_Click(object sender, RoutedEventArgs e)
{
    Binding modelDataContext = this.modelFormGrid.GetBindingExpression(Grid.DataContextProperty).ParentBinding;

    if (modelDataContext == this.modelDetailsBinding && this.modelListBox.SelectedItem != null)
    {
        // update existing tool model
        if (this.modelFormBindingGroup.UpdateSources())
        {
            // ...
        }
    }
    else if (modelDataContext == this.createModelBinding)
    {
        // create new tool model
        ToolModel modelToCreate = (ToolModel)this.createModelBinding.Source;

        if (this.modelFormBindingGroup.UpdateSources())
        {
            Context.ToolModel.AddObject(modelToCreate);
            Context.SaveChanges();

            // ...
        }
    }
} 
```

**工具类型模型面板.xaml**

```
<GroupBox
    Grid.Row="3"
    Grid.Column="2"
    Margin="5"
    Header="{x:Static prop:Resources.HeaderModelDetails}">
    <Grid x:Name="modelFormGrid" DataContext="{Binding ElementName=modelListBox, Path=SelectedItem}">

        <Grid.BindingGroup>
            <BindingGroup x:Name="modelFormBindingGroup" />
        </Grid.BindingGroup>

        <Label Grid.Row="0" Grid.Column="0" Content="{x:Static prop:Resources.LabelModelName}" />
        <TextBox x:Name="modelNameTextBox"
            Grid.Row="0"
            Grid.Column="1">
            <TextBox.Text>
                <Binding Path="ModelName" UpdateSourceTrigger="Explicit">
                    <Binding.ValidationRules>
                        <vr:RequiredValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>

        <Label Grid.Row="3" Grid.Column="0" Content="{x:Static prop:Resources.LabelModelParameter}" />
        <TextBox x:Name="modelParameterTextBox"
            Grid.Row="3"
            Grid.Column="1"
            Text="{Binding Path=ModelParameter, UpdateSourceTrigger=Explicit}" />

        <Label Grid.Row="4" Grid.Column="0" Content="{x:Static prop:Resources.LabelFactoryAssemblyName}" />
        <TextBox x:Name="modelFactoryAssemblyTextBox"
            Grid.Row="4"
            Grid.Column="1">
            <TextBox.Text>
                <Binding Path="FactoryAssemblyName" UpdateSourceTrigger="Explicit">
                    <Binding.ValidationRules>
                        <vr:NamespaceValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>

        <Button x:Name="saveModelButton"
            Width="100"
            Margin="36,0,0,0"
            IsEnabled="False"
            Content="{x:Static prop:Resources.ButtonSaveText}"
            Click="saveModelButton_Click" />
    </Grid>
</GroupBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:29:29.383

我当前的解决方法是：将新项目绑定到表单后，将需要验证的表单字段设置为非空但为空值，例如：

```
this.modelNameTextBox.Text = string.Empty; 
```

这会导致 WPF 验证方案在更新源时验证此文本框的绑定。如果有人有更清洁的解决方案，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:05:08.750

为什么您将 UpdateSourceTrigger 设置为显式控件？将其更改为 lostfocus 或 propertychanged。

# login - 在 Magento 1.6.2 中登录/注销时如何从 top.likks 中删除链接

> ID：10754281
> 
> 赞同：2
> 
> 时间：2012-05-25T12:17:28.303
> 
> 标签：login, logout, magento-1.6

我已经很好地搜索并找到了`customer_logged_in`and`customer_logged_out`标签，但我无法让它们正常工作，我敢肯定这是我对它们的误解。

`top.links`我的目标是在用户未登录时*从*块中隐藏登录、帐户和结帐链接，并在用户登录*时*显示它们。

我在`local.xml`文件末尾放置了以下内容，以尝试删除登录链接：

```
 <customer_logged_in>
        <reference name="top.links">
            <action method="removeLinkByUrl"><url helper="customer/getLoginUrl"/></action>
        </reference>
    </customer_logged_in>

</default> 
```

但它不起作用。有人可以解释为什么这不起作用吗？这让我疯狂！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T12:35:08.753

在我的情况下，删除 local.xml 中的链接有效。这是代码：

```
<customer_logged_in>
    <reference name="top.links">
        <action method="removeLinkByUrl"><url helper="customer/getLogoutUrl"/></action>
    </reference>
</customer_logged_in>
<customer_logged_out>
    <reference name="top.links">
        <action method="removeLinkByUrl"><url helper="customer/getLoginUrl"/></action>
    </reference>
</customer_logged_out> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T13:06:11.940

好的，我找到了原因，首先它们是顶级标签，不应该放在默认标签中，其次它在 local.xml 中不起作用，所以我将代码放在 customer.xml 的顶部，然后它是一种享受。注意：我删除了添加到 top.links 链接的 xml，这似乎会干扰它。

工作xml：

```
<!--
Load this update on every page when customer is logged in
-->

    <customer_logged_in>
        <reference name="top.links">
            <action method="addLink" translate="label title" module="checkout"><label>My Cart</label><url helper="checkout/cart/getCartUrl"/><title>My Cart</title><prepare/><urlParams/><position>9</position></action>
            <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><urlParams/><position>10</position></action>
            <action method="addLink" translate="label title" module="customer"><label>Log Out</label><url helper="customer/getLogoutUrl"/><title>Log Out</title><prepare/><urlParams/><position>100</position></action>
        </reference>
    </customer_logged_in>

<!--
Load this update on every page when customer is logged out
-->
    <customer_logged_out>
        <reference name="top.links">
            <action method="addLink" translate="label title" module="customer"><label>Sign up</label><url helper="customer/getRegisterUrl"/><title>Register </title><prepare/><urlParams/><position>100</position></action>
            <action method="addLink" translate="label title" module="customer"><label>Log In</label><url helper="customer/getLoginUrl"/><title>Log In</title><prepare/><urlParams/><position>100</position></action>
            <action method="removeLinkByUrl"><url helper="checkout/url/getCheckoutUrl"/></action>
            <action method="removeLinkByUrl"><url helper="checkout/cart/getCartUrl"/></action>         
            <action method="removeLinkByUrl"><url helper="customer/getLogoutUrl"/></action>
        </reference>
    </customer_logged_out> 
```

# delphi - 从 Delphi 代码调用 Visual C++ DLL 的函数

> ID：10754282
> 
> 赞同：2
> 
> 时间：2012-05-25T12:17:28.387
> 
> 标签：delphi, visual-c++, dll

在 Delphi 程序中，我使用 DLL 来控制外部可执行文件。DLL 是用 Visual C++ 编写的。在 C++ 中，使用 DLL 的代码是：

```
// defining pointer's type to a function compatible with 'launcher' function:
typedef int (WINAPI* PFI_HD_ST_N)(HDC, LPCSTR, int);
…
…
HINSTANCE m_hiDLLCTRL;  // handle to DLL instance
PFI_HD_ST_N pfStart;    // pointer to function that starts external program

// initialization
m_hiDLLCTRL = NULL;
pfStart = NULL;

// links DLL dynamically
m_hiDLLCTRL = LoadLibrary(“ExtProgCTRL.dll”);

// if DLL has been loaded
If (m_hiDLLCTRL)
    // I get the address to funcion that launches ExtProg
    pfStart = ( PFI_HD_ST_N) GetProcAddress( m_hiDLLCTRL, “ExtProgStart” );
// launches external program
If ( pfStart )
    // hWnd is handle to window where I want do draw 
    pfStart -> ( GetDC ( hWnd ), “C:\\Programs\\ExtProg”, 1 ); 
```

我在 Delphi 中有一个等效的代码：

```
private
    DLLHandle: THandle;
    XInt: function: Integer: cdecl;

...
implementation
...
...
DLLHandle := LoadLibrary('ExtProgCTRL.dll');
if DLLHandle <> 0 then
begin
    @XInt := GetProcAddress(DLLHandle, ''ExtProgStart);
    if @XInt <> nil then
    begin
        MessageDlg('Function ExtProgStart loaded !', mtError, mbOKCancel, 0);
        ...
        ...
    end;
end; 
```

它似乎工作正常，但我无法找到最后一条指令的 Delphi 代码来启动外部程序......

```
pfStart -> ( GetDC ( hWnd ), “C:\\Programs\\ExtProg”, 1 ); 
```

德尔福有什么？

我改变了：

```
private
    DLLHandle: THandle;
    XInt: function(DC: HDC; Text: PAnsiChar; SomeInt: Integer); Integer: cdecl;

...
implementation
...
retval: Integer;

DLLHandle := LoadLibrary('ExtProgCTRL.dll');
if DLLHandle <> 0 then
begin
    @XInt := GetProcAddress(DLLHandle, ''ExtProgStart);
    if @XInt <> nil then
    begin
        MessageDlg('Function ExtProgStart loaded !', mtError, mbOKCancel, 0);
       retval := XInt(GetDC(hWnd), 'C:\Programs\ExtProg', 1);
    end;
end; 
```

但现在我有最后一条指令：retval := XInt... 以下错误： DCC 错误： '(' 预期但 ')' 找到（hWnd 后的括号）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:21:36.373

你需要这样声明`XInt`：

```
XInt: function(DC: HDC; Text: PAnsiChar; SomeInt: Integer): Integer; stdcall; 
```

1.  您需要声明一个与 C++ 代码中的定义相匹配的参数列表。
2.  我不知道参数的有意义的名称，但我相信你可以提供它们。
3.  C++ 代码指定了在 Delphi`WINAPI`中匹配的调用约定。`stdcall`

然后你可以这样称呼它：

```
retval := XInt(GetDC(hWnd), 'C:\Programs\ExtProg', 1); 
```

# .net - 如何搜索我的文本文件？

> ID：10754284
> 
> 赞同：-3
> 
> 时间：2012-05-25T12:17:33.890
> 
> 标签：.net, vb.net, vb.net-2010

我希望有人可以在这里给我一点帮助。我有一个文本文件，它有两列，每列用空格（“”）分隔，第一列是字符串，第二列是数字字段。

我正在尝试读取 textbox1 中的数字字段并将其与 column2 中的每个数字字段匹配，如果 textbox1 中的数字不大于该字段，则将该行（列 1 和列 2）复制到另一个文本文件中。

到目前为止，我有以下编码。

```
Dim l1Infos = Textbox1.text
        Select New With {.Line = l1, .Tokens = l1.Split(" "c)}
        Dim result = From l1 In l1Infos
                     Join l2 In IO.File.ReadAllLines("C:\Test2",)
                     On l1.Tokens(0) Equals l2
                     Select l1.Line
        IO.File.WriteAllLines("C:\Test2", result) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:24:07.200

虽然将尽可能多的逻辑塞进一个语句中可能会令人印象深刻，并且可能会为您赢得代码混淆奖，但有时更简单的解决方案更容易阅读、调试和维护：

```
 Dim maxValue As Integer = Integer.Parse(TextBox1.Text)
    For Each line As String In File.ReadAllLines("C:\Test1")
        If Integer.Parse(line.Split(" "c)(1)) < maxValue Then
            File.AppendAllText("C:\Test2", line)
        End If
    Next 
```

我想如果这对您不起作用，那么弄清楚为什么不这样做会容易得多。启动的代码甚至更少！

# linux - 在linux中自动启动应用程序

> ID：10754290
> 
> 赞同：0
> 
> 时间：2012-05-25T12:17:46.370
> 
> 标签：linux, embedded

我的豹目标板上有 linux 操作系统，带有 tms320dm368 处理器。它是一个只有内核和 rfs 的原始板。目标板上没有 linux 发行版（ubuntu、fedora、red hat 等）。我创建了如下脚本文件

```
#!/bin/sh
echo "my application is here"
./helloworld  # helloworld is our application 
```

1.  创建脚本文件后，我将其复制到`init.d`
2.  我给出了命令`chmod +x /etc/init.d/vcc_app`（`vcc_app`是我创建的脚本的名称）
3.  然后我给了命令`ln -s /etc/init.d/vcc_app /etc/rc.d/vcc_app`（`rc.d`是运行级目录）

但是当我重新启动板时，我的应用程序不会自动执行。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:37:13.447

知道你在你的板上实际有什么会很有趣——你声称你没有发行版，但你使用的东西（/etc/init.d）只能在某种发行版中使用。

所以假设你真的不使用发行版，这意味着你没有 shell，你没有 init 系统。

如果您只需要运行单个应用程序，则不需要任何 shell 或类似的东西 - 只需将您的应用程序静态链接并将其作为 /sbin/init、/etc/init、/bin/init 放入您的 rootfs 中。请参阅[linux 内核 main.c init_post()](http://lxr.linux.no/#linux+v3.4/init/main.c%20%20main.c%3ainit_post%28%29)。

否则，如果您有多个应用程序，则需要一个 init 系统。一个简单的是[uxlaunch](http://meego.gitorious.org/meego-os-base/uxlaunch)，其他选项包括[systemd](http://www.freedesktop.org/wiki/Software/systemd)或[busybox init](http://www.busybox.net/)。即使使用busybox init，您仍然不一定需要系统上的shell。

市场上的一些设备都在运行没有外壳的 Linux，包括许多电视机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:26:51.637

你应该把你的脚本放在 中`/etc/rcX.d/vcc_app`，将 X 更改为你想要执行的 init 级别，如果你想在 init 5 上运行它，那么脚本应该放在：

```
/etc/rc5.d/vcc_app 
```

有关初始化级别的更多信息，[请查看此链接](http://www.krishnababug.com/2009/04/what-are-init-0-init-1-init-2-init-3.html)

此外，在某些发行版中，您可以添加命令以在`/etc/rc.local` or启动脚本`/etc/rc.d/rc.local`，检查哪些文件存在并添加命令。

# ios5 - IOS多个目标，每个目标链接自己的架构静态库..？

> ID：10754293
> 
> 赞同：0
> 
> 时间：2012-05-25T12:18:09.107
> 
> 标签：ios5, xcode4

我遇到了以下问题。从第 3 方开始，我需要添加 2 个不同的（静态）库：1 个用于模拟器，1 个用于设备（​​同名 libIKEA.a，但架构不同）。

所以我想为具有特定库的模拟器设置一个目标，为设备设置一个目标。但我无法让它工作。

如果我复制目标（模拟器），它工作正常，并更改库（构建阶段 - >链接库），项目不想再编译。

```
Ignoring file ..../Debug-iphonesimulator/libIKEA.a, file was built for archive which is not the architecture being linked (armv7) 
```

我还尝试将 2 个不同的库拖到项目中，并为每个目标选择**一个**目标。

我喜欢基于活动方案仅构建（并运行）一个特定目标。

知道如何进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:21:47.800

好的，我知道了。

只需在项目文件夹中创建单独的文件夹，将 lib (.a) 复制到每个文件夹中。然后在构建设置下确保每个构建只包含其中一个库的搜索路径。

# jsf - t:inputFileUpload 不上传文件

> ID：10754300
> 
> 赞同：1
> 
> 时间：2012-05-25T12:18:31.520
> 
> 标签：jsf, file-upload, richfaces, myfaces, tomahawk

我正在使用 myfaces ExtensionFilter 上传文件，但该文件未设置为我的 bean 以进行进一步处理。

这是代码：

```
<h:form id="uploadFileForm" enctype="multipart/form-data">
    <tom:inputFileUpload id="file" 
        value="#{paramUpload.uploadFile}">
        <f:valueChangeListener type="com.bosch.de.plcd.plugin.ParamFileUpload" />
    </tom:inputFileUpload>
    <a4j:commandButton value="#{tpMsgs.upload}"
        styleClass="button" action="#{paramUpload.uploadParamFile}"
        onclick="javascript:updateParentScreen();">
    </a4j:commandButton>
</h:form> 
```

和 web.xml 配置如下

```
<filter>
    <filter-name>Extensions Filter</filter-name>
    <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>Extensions Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

由于`UploadFile`未设置为 bean，因此我也尝试使用 ValueChangeListener，不过如此，它不是 bean :)

豆码

```
public class ParamFileUpload implements ValueChangeListener {

    private UploadedFile uploadFile;

    public void uploadParamFile() {
        if(uploadFile != null) {
            LOGGER.info("File type: " + uploadFile.getContentType());
            LOGGER.info("File name: " + uploadFile.getName());
            LOGGER.info("File size: " + uploadFile.getSize() + " bytes");
        }
    }

    public UploadedFile getUploadFile() {
        return uploadFile;
    }

    public void setUploadFile(UploadedFile uploadFile) {
        this.uploadFile = (UploadedFile)uploadFile;
    }

    public void processValueChange(ValueChangeEvent event)
        throws AbortProcessingException {
        this.uploadFile = (UploadedFile) event.getNewValue();
    }
} 
```

您是否看到我在这里可能缺少的任何其他配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:35:14.243

当前 JSF 和 Tomahawk 版本无法通过 ajax 上传文件。JSF 创建的 Ajax 请求不支持也不使用`multipart/form-data`. Tomahawk 不是基于 ajax 的组件库。请改用普通的命令按钮。

```
<h:commandButton value="#{tpMsgs.upload}"
    styleClass="button" action="#{paramUpload.uploadParamFile}"
    onclick="javascript:updateParentScreen();">
</h:commandButton> 
```

[计划](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-802)在即将推出的带有新`<h:inputFile>`组件的 JSF 2.2 中支持使用 ajax 上传文件。

或者，您可以使用 RichFaces 自己的`<rich:fileUpload>`. 根据所使用的 RichFaces 版本，它在后台使用 Flash 或 iframe hack 来实现异步文件上传。

# windows-phone-7 - 我们可以在 Windows Phone 7 中访问 Twitter 更新吗？

> ID：10754305
> 
> 赞同：2
> 
> 时间：2012-05-25T12:18:41.003
> 
> 标签：windows-phone-7, twitter

请帮我解决以下情况。1.我们可以在windows phone 7中访问twitter更新消息吗？

请澄清我的锄头来实现吗？有任何API吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:20:33.283

是的，您需要一个用于 .NET 的 Twitter 库。[有**很多**](https://dev.twitter.com/docs/twitter-libraries#dotnet)。选择适合您需求的那一款。

# java - 使用来自非 Qt DLL (JNA) 的 QTimer

> ID：10754308
> 
> 赞同：0
> 
> 时间：2012-05-25T12:18:52.987
> 
> 标签：java, c++, qt, jna, qt-mfc-migration

我写了一个库（DLL）。Java 代码将我的 DLL 与 JNA 一起使用。在库中，我通过 QThread 派生类中的“new”创建 Qtimer。

但是，我有以下错误：

```
ERROR: QTimer can only be used with threads started with QThread 
```

在没有 QApplication/QCoreApplication 的情况下，我应该如何正确使用 QTimer 从非 Qt 线程调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:48:38.300

不幸的是，据我所知，QTimer 需要 QCoreApplication 。而且 QCoreApplication 必须在创建我看到的第一个 QObject 的线程中实例化。我所做的是实例化 QCoreApplication 一个使用[QtConcurrent::run](http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html#run)产生的新线程，并在那里实例化我的 QObjects。[我在这里](http://thebugfreeblog.blogspot.it/2012/05/embedded-cross-platform-development-for.html)报告了一个简单的例子。QTimer 现在似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:38:37.743

看看[`QBasicTimer`](http://qt-project.org/doc/qt-4.8/qbasictimer.html)。我不是 100% 确定这是否会起作用，但至少文档根本没有提到`QThread`s 和事件循环（与[`QTimer`](http://qt-project.org/doc/qt-4.8/QTimer.html)类的文档相反）。

缺点是它有点复杂（它调用`timerEvent()`你的重新实现`QObject`，没有信号槽连接），但如果它是真的，你可以在没有事件循环的情况下使用它。

# google-maps - Google maps api geocode web 服务返回一个添加了点的地址

> ID：10754310
> 
> 赞同：0
> 
> 时间：2012-05-25T12:19:04.730
> 
> 标签：google-maps, google-maps-api-3

我将地理编码网络服务称为： [http://maps.googleapis.com/maps/api/geocode/xml?address=viale+carlo+felice+roma&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=viale+carlo+felice+roma&sensor=false)。它的响应是“Viale Carlo Felice., 00185 Roma, Italia”，以点结尾，为什么？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:19:44.927

因为在数据库中谷歌是以这种方式注册的，可能的错误

[https://maps.google.com.br/maps?q=Viale+Carlo+Felice+Roma](https://maps.google.com.br/maps?q=Viale+Carlo+Felice+Roma)

在 bing/maps 中查看，它是不同的

[http://br.bing.com/maps/#JndoZXJlMT1WaWFsZStDYXJsbytGZWxpY2UlMmMrMDAxODUrUm9tZStSTSZiYj00MS44OTEyNjk3MTc1NzA3JTdlMTIuNTE4NDkxNzUzMDI0MyU3ZTQxLjg4MzUY0NDI4MjQZUNTYL](http://br.bing.com/maps/#JndoZXJlMT1WaWFsZStDYXJsbytGZWxpY2UlMmMrMDAxODUrUm9tZStSTSZiYj00MS44OTEyNjk3MTc1NzA3JTdlMTIuNTE4NDkxNzUzMDI0MyU3ZTQxLjg4MzU0NDI4MjQyOTMlN2UxMi41MDQ2NTYyNDY5NzU3)

# javascript - 如何检测对历史记录或书签条目的点击？

> ID：10754313
> 
> 赞同：0
> 
> 时间：2012-05-25T12:19:19.130
> 
> 标签：javascript, firefox, firefox-addon, dom-events, bookmarks

在我的 Firefox 扩展中，我想检测页面加载的来源——例如，在点击后：链接、历史条目或书签。到目前为止，我已经设法检测到点击链接并使用“后退/前进”历史按钮。

但是，我无法检测到对历史菜单项目的点击，更不用说点击历史库窗口中的项目（单击“显示所有历史记录”时弹出）。书签菜单和书签库窗口也有同样的问题。

是否有或多或少直接的方法来实现这一点？对于书签菜单，我可以考虑为所有书签添加一个点击监听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:25:04.773

所有对历史记录和书签项目的点击（在主浏览器窗口和单独的窗口/侧边栏中）都将调用[PlacesUIUtils.openNodeWithEvent()](http://hg.mozilla.org/mozilla-central/file/2582b429e896/browser/components/places/src/PlacesUIUtils.jsm#l604)或[PlacesUIUtils.openNodeIn()](http://hg.mozilla.org/mozilla-central/file/2582b429e896/browser/components/places/src/PlacesUIUtils.jsm#l604)（后者用于当用户明确选择从上下文中打开项目的位置时菜单）。您可以使用以下方法扩展这些功能：

```
Components.utils.import("resource:///modules/PlacesUIUtils.jsm");
if (!("myExtensionHooked" in PlacesUIUtils.openNodeWithEvent))
{
  var origOpenNodeWithEvent = PlacesUIUtils.openNodeWithEvent;
  PlacesUIUtils.openNodeWithEvent = function(node)
  {
    // Remember node.uri here - user chose this URL
    ...

    // Call original function
    return origOpenNodeWithEvent.apply(this, arguments);
  };
  PlacesUIUtils.openNodeWithEvent.myExtensionHooked = true;
} 
```

对于其他功能也是如此。请注意，您应该在每个浏览会话中只执行一次 -`PlacesUIUtils`对象由所有浏览器窗口共享。这就是示例代码中属性的用途`myExtensionHooked`（您应该将其更改为您的扩展所独有的东西）。

# jquery - Ajax/JSON 表单 jQuery.parseJSON() 错误如何在 JavaScript 中写入每个值？

> ID：10754317
> 
> 赞同：1
> 
> 时间：2012-05-25T12:19:35.200
> 
> 标签：jquery, ajax, json, forms

我制作了一个用于显示用户统计图的表格。用户需要选择月份和年份，然后将显示图表。

我用 AJAX 做了这个并做出了 JSON 响应。

这是我的 JavaScript 代码：

```
//Show statistic
$('.statistic_submit').click(function(){
    if ($('#month').val() == 'none' || $('#year').val() == 'none') {
        $("#dialog_empty").dialog( "open" );
        return false;
    }

    var form = $('#statistic_view');  
    var data = form.serialize(); 

    $.ajax({
        url: "include/scripts/user_statistic.php",
        type: "POST",
        data: data,
        dataType: 'json',
        success: function (reqCode) {
            console.log(reqCode);
            if (reqCode['error_code'] == 1) {
                //Generate diagram  
                $(".done").html( 
                    '<p class="bold center">' + reqCode['month'] + ' ' + reqCode['year'] + '</p>' +
                    '<canvas id="cvs" width="650" height="250">[No canvas support]</canvas>'
                );  

                var data_string = jQuery.parseJSON(reqCode['data_string']);
                var labels_tooltip = jQuery.parseJSON(reqCode['labels_tooltip']);
                var labels_string = reqCode['labels_string'];

                var chart = new RGraph.Line('cvs', data_string);
                    chart.Set('chart.tooltips', labels_tooltip);
                    chart.Set('chart.tooltips.effect', "expand");
                    chart.Set('chart.background.grid.autofit', true);
                    chart.Set('chart.gutter.left', 35);
                    chart.Set('chart.gutter.right', 5); 
                    chart.Set('chart.hmargin', 10);
                    chart.Set('chart.tickmarks', 'circle');
                    chart.Set('chart.labels', labels_string);
                    chart.Draw();

                $('.done').fadeOut('slow'); 
                $('.done').fadeIn('slow');
            }
            if (reqCode['error_code'] == 2) {
                //No values found
                $('.done').fadeOut('slow');
                $("#dialog_error").dialog( "open" );
            }
        }
    });
    return false;
}); 
```

这是我的 user_statistic.php 的提取：

```
$data = array();
$sql = "SELECT
                Anzahl
            FROM
                 Counter
            WHERE
                 YEAR(Datum) = '".$year."' AND
                 MONTH(Datum) = '".$month."'";

    if (!$result = $db->query($sql)) {
        return $db->error;
    }

    $row = $result->fetch_assoc();
    $data = (int)$row['Anzahl'];

$response['error_code'] = '1'; 
    $response['data_string'] = "[" . join(", ", $data) . "]";
    $response['labels_string'] = "['" . join("', '", $labels) . "']";
    $response['labels_tooltip'] = "['" . join("', '", $data) . "']";
    $response['month'] = $month_name[$month];
    $response['year'] = $year;

    echo json_encode($response); 
```

这个 reqCode 响应：

```
error_code "1"
data_string "[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 2, 2, 0, 26, 1, 5, 3, 1, 1, 0, 0, 0, 0, 0, 0]"  
labels_string "['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31']" 
labels_tooltip "['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '3', '2', '2', '0', '26', '1', '5', '3', '1', '1', '0', '0', '0', '0', '0', '0']" 
month "Mai" 
year 2012 
```

这就是 .log 所说的：

```
JSON.parse: unexpected character! 
```

我发现 data_string 工作正常。由于“..”，labels_string 和 labels_tooltip 是问题所在。唯一的问题是图表需要'..'。

我是 JavaScript 和 Ajax/JSON 的新手，所以我不知道如何处理这个问题。在 php 中，我会使用一个数组 [][] 并创建一个循环。例如：

```
echo "[";
for ($i; $i<= ..;$i++) {
  echo "'".reqCode['labels_string'][$i]."', ";
}
echo"]"; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:27:44.587

问题来自解析单引号`'`。JSON 使用双引号`"`来设置字符串值。因此，您的*有效*字符串化 JSON 响应应如下所示`"[\"1\",\"2\", ...]"`，而您的响应`"['1','2', ...]"`不正确。

事实上，我不明白你为什么要这样做：

```
$response['data_string'] = "[" . join(", ", $data) . "]"; 
```

如果你最终使用`json_encode($response)`.

实际上，即使某些元素包含其他数组，PHP 函数`json_encode()`也会成功地将您的数组字符串化。`$response`

所以，你可以简单地使用

```
$response['data_string'] = $data; 
```

然后，在客户端，将不需要使用`parseJSON`方法解析字符串。您只需要这样获取它：

```
var data_string = reqCode['data_string']; 
```

如果您需要传递`$data`带有字符串元素的数组，您可以创建一个新数组或使用类似的东西：

```
array_filter($data, create_function('$x', 'return strval($x)')); 
```

# php - PHP fgets() 无法从同一 IP 上的域获取

> ID：10754330
> 
> 赞同：0
> 
> 时间：2012-05-25T12:20:32.110
> 
> 标签：php, shared-hosting, addon-domain

我正在尝试对托管在同一共享主机帐户下的所有网站执行基本的正常运行时间监控。我想将网络问题与本地（服务器负载）问题隔离开来，所以我不能使用外部正常运行时间监视器。

以下 php 脚本可以轮询托管在其他 IP 地址上的站点，但不是它自己的。我可以通过 SSH 控制台从我的主域和附加域（所有相同的 IP）wget & curl，但我似乎无法通过 PHP 执行相同的环回操作。为什么？

```
<?php
check('some-other-host.com', 'validation text 2'); //succeeds
check('addon-domain-on-same-host.com', 'validation text 1'); //fails
// other sites go here //

function check($host, $find) {
    $fp = fsockopen($host, 80, $errno, $errstr, 10);
    if (!$fp) {
        echo "$errstr ($errno)\n";
    } else {
        $header = "GET / HTTP/1.1\r\n";
        $header .= "Host: $host\r\n";
        $header .= "Connection: close\r\n\r\n";
        fputs($fp, $header);
        while (!feof($fp)) {
            $str .= fgets($fp, 1024);
        }
        fclose($fp);
        if (strpos($str, $find) == false) {
            echo $host." is down. ";
            mail('me@mine.com', $host.' is down.', $str);
        }
    }
}
?> 
```

# callstack - 在通话中发送 DTMF 音

> ID：10754335
> 
> 赞同：0
> 
> 时间：2012-05-25T12:20:46.743
> 
> 标签：callstack, dtmf

您好，我是 android 新手，我想知道在 android 中可以在通话中发送 DTMF 音吗？我想在android中做以下事情。是否可以 ？

1) 呼叫 +xx xxxxxxx

2）等到第一个音结束

3) 插入通行证：xxxx

4）等待短暂的高音结束

5) 按 1 直到您听到特定的声音。

这里的音调是 DTMF 音调，我试图用呼叫意图来做到这一点，但我如何使用代码输入正在进行的呼叫？

有人可以指导我吗？

提前致谢 ！

请帮我找出这个。我想知道它是如何工作的。我在互联网上搜索越来越多，但我对此并不完全了解。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:15:49.480

尝试在播放音调时禁用`microphone`（也许通过）。`AudioManager.setMicrophoneMute`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:41:45.993

只有在`VOIP`可能的情况下，Android 应用程序无法访问通话中的音频流。您可以在免提模式下稍微伪装一下。

# android - Android 软键盘/输入法 UI 的自动化测试是否可行？

> ID：10754336
> 
> 赞同：3
> 
> 时间：2012-05-25T12:20:50.583
> 
> 标签：android, robotium

我想创建一个测试（类似于 robots/selenium 测试）来测试我的键盘服务在不同配置中的布局。

由于键盘作为服务运行，robotium 无法直接对其进行测试。相反，我在服务中创建了一个活动来测试键盘。键盘在单独的窗口中运行，因此机器人无法看到它的视图。

我的问题是：是否有能够测试输入法的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:38:11.883

不能确定，但​​您可能想尝试 Nativedriver ( [http://code.google.com/p/nativedriver/](http://code.google.com/p/nativedriver/) ) 的功能，我发现它比 Robotium 更灵活，虽然有点难建立。

1.  您确实需要`server-instrumentation.jar`在您的应用程序中包含该库以及此处概述的其他一些必需品：[http](http://code.google.com/p/nativedriver/wiki/AndroidMakeAnAppTestable) ://code.google.com/p/nativedriver/wiki/AndroidMakeAnAppTestable 。您可以轻松地分叉服务器仪表代码，以增加其功能的丰富性。我发现自己这样做是为了简单的事情，比如通过提示而不是资源 ID 更容易找到文本框。 **如果您发现内置功能不允许测试您的键盘，请在此处添加该功能，**然后为我们所有人提交代码！

2.  我非常喜欢 Nativedriver 方法仅使用 vanilla JUnit 测试而不是 Android JUnit 测试的方式，它为您提供了许多与 JUnit 配合良好的其他工具（例如 Cucumber 的 java 端口），但不适合 Android JUnit 测试模型。

3.  您可能会像我一样发现，在基于 Nativedriver 的 JUnit 测试用例结束时没有终止活动这一事实很好，尤其是当您正在编写测试并试图记住接下来要做什么时你的用户界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:14:11.430

您可以尝试按该位置，因为这是显示的位图。这更像是您开发的方法 UI。

# facebook - E107 重定向 facebook 抓取错误

> ID：10754345
> 
> 赞同：0
> 
> 时间：2012-05-25T12:21:23.923
> 
> 标签：facebook, .htaccess, redirect, scraper

这是我的 .htaccess 文件：

```
RewriteCond %{REQUEST_METHOD} POST
RewriteCond %{REQUEST_URI} !^/?(usersettings\.php|page\.php|news\.php|signup\.php|admin/|plugins/forum/|plugins/.*/.*config\.php)
RewriteCond %{HTTP_REFERER} !^http://(.*\.)?lf1medsoc\.com [NC]
RewriteRule .* - [F,L]

# 2\. Redirect all access to the following user agents and files
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/4\.76\ \[ru\]\ \(X11;\ U;\ SunOS\ 5\.7\ sun4u\) [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla/5.0$ [OR]
RewriteCond %{HTTP_USER_AGENT} (Bot\ Search|kangen|CaSpEr|MaMa|crew|plaNETWORK|dex|perl\ post$) [NC,OR]
RewriteCond %{REQUEST_URI} (contact\.php|help_us\.php|forum_index\.php|crossdomain\.xml|\.htaccess)
RewriteRule .* http://%{REMOTE_ADDR}/ [R,L]

# 3\. Deny access to requests with contact.php or help_us.php in the query
# string, UNLESS those are referred from our own site (e.g. search)
RewriteCond %{QUERY_STRING} (contact\.php|request\.php\help_us\.php|casper)
RewriteCond %{HTTP_REFERER} !^http://(.*\.)?lf1medsoc\.com [NC]
RewriteRule .* - [F,L]

# 4\. Redirect empty user agent, UNLESS it's accessing the RSS feed
RewriteCond %{HTTP_USER_AGENT} ^$ 
RewriteCond %{REQUEST_URI} !^/?e107_plugins/rss_menu/rss.php
RewriteRule .* http://%{REMOTE_ADDR}/ [R,L]

# 5\. Deny access to these files UNLESS referred from our site.
RewriteCond %{REQUEST_URI} ^/?(top|download|user|search|submitnews|fpw)\.php
RewriteCond %{HTTP_REFERER} !^http://(.*\.)?lf1medsoc\.com [NC]
RewriteRule .* - [F] 
```

[http://www.lf1medsoc.com/page.php?19](http://www.lf1medsoc.com/page.php?19)的 Facebook linter 结果（可公开访问，无需登录等）：

（[整个结果页面](https://developers.facebook.com/tools/debug/og/object?q=www.lf1medsoc.com/page.php?19)）

> 报废信息
> 
> 响应代码：200 获取 URL：http://www.lf1medsoc.com/page.php [?](http://www.lf1medsoc.com/page.php?19) 19 规范 URL： [http](http://www.lf1medsoc.com/) ://www.lf1medsoc.com/最终 URL： [http://www.lf1medsoc.com/page。 php?2](http://www.lf1medsoc.com/page.php?2)必须修复的错误
> 
> 循环重定向路径：检测到循环重定向路径（有关详细信息，请参阅“重定向路径”部分）。
> 
> 重定向路径
> 
> 原文：[http](http://www.lf1medsoc.com/page.php?19) ://www.lf1medsoc.com/page.php? 19 og:url: [http://www.lf1medsoc.com/](http://www.lf1medsoc.com/) 302: **http://www.lf1medsoc.com/page.php?2** og: url: [http://www.lf1medsoc.com/](http://www.lf1medsoc.com/) 最终 URL 以粗体显示（这是我们试图从中提取元数据的 URL）。属于循环重定向路径的 URL 会突出显示。

我在 htaccess 中遗漏了什么吗？有没有办法添加允许访问的 facebook 用户代理

注意：page.php?2 是主页（重定向自 lf1medsoc.com --> index.php --> page.php?2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:45:33.960

您的 og:url 标签`http://www.lf1medsoc.com/page.php?2`指向`http://www.lf1medsoc.com/`

将其更改为`http://www.lf1medsoc.com/page.php?2`

# postgresql - 如何按度获取地图边界框中的点

> ID：10754346
> 
> 赞同：1
> 
> 时间：2012-05-25T12:21:26.960
> 
> 标签：postgresql, geospatial, postgis

我对 BOX3D PostGIS 功能的工作有些担心。我试图在正方形 -158.721365889063 66.09275164148659、154.608712235937 52.56807548751039（度）中找到地方。但是这个 where 语句

```
 some_place.point && SetSRID('BOX3D(-158.721365889063 66.09275164148659,
    154.608712235937 52.56807548751039)'::box3d,4326) 
```

返回两个可能的方格中最大的方位。

当我更改角度顺序或使用“xmin ymin,xmax ymax”顺序时，我得到了相同的结果。

我也用过

```
 ST_Contains( SetSRID( ST_MakeBox2D( 
      ST_Point(143.930001298437,66.82980906973742), 
      ST_Point(-145.757498701563,51.37699768868392) ), 4326 ), some_place.point) 
```

结果相同。

对于某些特定的角度点顺序，我该如何做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:03:49.933

Postgis 希望协调员如下：

```
ST_MakeBox2D(<LL>, <UR>) 
```

LL 表示左下，UR 表示右上：

所以对你来说，这意味着：

```
some_place.point && SetSRID('BOX3D(154.608712235937  52.56807548751039,
-158.721365889063 66.09275164148659)'::box3d,4326) 
```

和

```
ST_Contains( SetSRID( ST_MakeBox2D( 
  ST_Point(143.930001298437,51.37699768868392), 
  ST_Point(-145.757498701563,66.82980906973742) ), 4326 ), some_place.point) 
```

如果仍然得到错误的结果，请尝试将查询拆分为 180 / -179.9999999 度

# sql - 数据库与重复的 PK/FK 同步

> ID：10754347
> 
> 赞同：1
> 
> 时间：2012-05-25T12:21:29.380
> 
> 标签：sql, sql-server-2008, database-design

我正在尝试设计一个数据库结构。它将安装到几个 sql 服务器实例中。我需要定期合并这些数据库。

问题出在 中`server_A` `(PK)id=222` `user=Tom`，但在`server_B` `(PK)id=222` `user=Peter`.

因此，在`server_A`for `Tom`, `(FK)userid=222`, `Address=1 abc street`... 中，但`(FK)userid=222`在`server_B`地址表中相同的含义不同。

我能想到的就是这种便宜的方法。如果我有 3 台服务器，我会在第 1 台服务器中播种 id，从 开始`1000000001`，第 2 台服务器在`2000000001`，第 3 台在`3000000001`.... 所以他们不会重复自己，这可能适用于一个小型项目吗？而且我不需要使用 Guid/uniqueidentifier 来使问题进一步复杂化？

这种情况的常见/正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T00:31:05.397

您可以将 a`server_id`作为外键添加，该外键现在与原始主键一起成为*复合主键的一部分。*每个服务器都有自己的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:29:50.513

使用 SQL Server 的合并复制功能，它将为您处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:08:33.607

使用 GUID 而不是整数作为主键。即使在不同的系统上生成它们也是独一无二的。

我不是 SQL Server 合并复制方面的专家，但是根据[这篇文章](https://stackoverflow.com/q/5964062/533120)，它无法自动解决冲突的 PK，因此最好首先避免冲突的 PK。

# c++ - 为什么 ld 链接器允许使用相同方法定义多个类？

> ID：10754350
> 
> 赞同：18
> 
> 时间：2012-05-25T12:21:46.043
> 
> 标签：c++, linker, g++, ld

考虑这个文件，`first.cpp`包含一个类定义并使用：

```
#include <iostream>

struct Foo
{
    Foo(){ std::cout << "Foo()" << std::endl; }
    ~Foo(){ std::cout << "~Foo()" << std::endl; }
};

int main(){
    Foo f;
    return 0;
} 
```

另一个，`second.cpp`，包含一个冲突的类定义：

```
#include <iostream>

struct Foo
{
    Foo();
    ~Foo();
};

Foo::~Foo(){ std::cout << "wrong ~Foo()" << std::endl; } 
```

当定义了两个具有相同名称的函数时，链接器会抱怨重复符号，但是这些具有重复类方法的文件编译时不会出错。

我用这些命令编译：

```
$ g++ -c second.cpp -o second
$ g++ second first.cpp -o first 
```

对第二次调用的参数重新排序`g++`不会改变输出。

运行时`first`，这是输出：

```
$ ./first
Foo()
wrong ~Foo() 
```

**为什么链接器允许重复的类方法？**如果显然允许，为什么要`wrong ~Foo()`打印？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T13:51:00.553

再次，未定义的行为。您的程序对 的析构函数有多个定义`Foo`，这意味着它违反了 ODR。程序是错误的，任何事情都可能发生。

为什么链接器不接它？在类定义中定义函数时，它是隐式的`inline`。编译器通常将这些函数标记为“弱符号”。然后链接器获取所有翻译单元并尝试解析符号。如果需要，链接器将删除弱符号（即，如果符号已在其他地方定义）。

在程序的实际输出中，看起来编译器实际上并没有内联对构造函数的调用，因此在运行时将其分派给链接器留下的符号（非弱符号）

* * *

> 为什么链接器允许有重复的方法？

因为所有（但最多一个）都是弱符号（即`inline`）

> 为什么在这种情况下会打印错误的 ~Foo() ？

因为调用没有内联，并且链接器丢弃了弱符号

# sql - SQL 协助：尝试从两个相关表中检索行（从结果中排除/过滤掉特定的 user_id）

> ID：10754352
> 
> 赞同：0
> 
> 时间：2012-05-25T12:21:49.693
> 
> 标签：sql, join, subquery

我需要一些 SQL 建议。解决此问题的最佳方法是什么（利用 SQL 连接和/或子查询）？提前致谢 ：）

> ```
> users TABLE (user_id = Primary Key) 
> ```

```
+---------+----------+------------+
| user_id |   name   |   surname  |
+---------+----------+------------+
| 001     | Tangi    | Amalenge   |
| 002     | John     | Doe        |
| 003     | Sally    | Angula     |
| 004     | Simon    | v Wyk      |
| 005     | Nangula  | Abed       |
+---------+----------+------------+ 
```

> 消息表（message_id = 主键；user1 & user2 = 引用回 users.user_id 的外键）

```
+------------+----------+------------+----------------+
| message_id |  user1   |   user2    |  date_created  |
+------------+----------+------------+----------------+
|   101      |   001    |    003     |  2012-05-20    |
|   102      |   002    |    001     |  2012-05-18    |
|   103      |   003    |    005     |  2012-05-18    |
|   104      |   005    |    002     |  2012-05-17    |
|   105      |   001    |    004     |  2012-05-09    |
+------------+----------+------------+----------------+ 
```

> ```
> I would like to retrieve the names and the id of the message I 
> share with a user. My user_id is 001.
> If I'm user1 in the messages TABLE, then I want to know who user2 is, and if I'm user2,
> I want to know who user1 is, plus the id of the message we share. 
> ```

```
Like this:
+----------+------------+
|   name   | message_id |
+----------+------------+
| Sally    | 101        |
| John     | 102        |
| Tangi    | 105        |
+----------+------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:33:05.037

尝试这个：

```
SELECT u.name, m.message_id
FROM users u, messages m
WHERE (m.user1 = u.user_id AND m.user2 = "001")
   OR (m.user2 = u.user_id AND m.user1 = 001) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:39:32.370

```
Select u.name, m1.message_id from users u 
inner join messages m1
On m1.user1 = u.user_id
Inner join Messages m2
On m2.user2=u.user_id
Where m1.user1='001' or m2.user2='001' 
```

我希望这能帮到您。

# c++ - 如何调用 boost multi_index 元素的非常量成员函数

> ID：10754359
> 
> 赞同：2
> 
> 时间：2012-05-25T12:22:35.447
> 
> 标签：c++, linux, boost

我发布这个是因为我有点不明白 boost 教程是如何工作的。

我有一个类，其对象是 boost multi_index 容器的元素。

我需要使用成员函数更新对象的成员变量。我不知道该怎么做。请问你能帮帮我吗。我准备了一个简单的例子：

```
#include <string>
#include <iostream>
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include<vector>

using boost::multi_index::multi_index_container;
using boost::multi_index::ordered_non_unique;
using boost::multi_index::ordered_unique;
using boost::multi_index::indexed_by;
using boost::multi_index::member;

class employee_entry
{
public:
   employee_entry( const std::string& first,
                   const std::string& last,
                   long id):
                   first_name_(first),
                   last_name_(last),
                   id_(id)
   {}
   void change(){id_++;}//causing the problem
   std::string first_name_;
   std::string last_name_;
   std::vector<int> mySet;
   long id_;

   std::vector<int>::iterator mySet_begin()  {return mySet.begin();   }
};

typedef multi_index_container<
employee_entry, indexed_by<
   ordered_unique<member<employee_entry, std::string, &employee_entry::first_name_> >
   , ordered_non_unique<member<employee_entry, std::string, &employee_entry::last_name_> >
   , ordered_non_unique<member<employee_entry, long, &employee_entry::id_> >
   >
> employee_set;

//employee set.... multi-index
employee_set m_employees;

int main()
{
   using boost::multi_index::nth_index;
   using boost::multi_index::get;

   typedef nth_index<employee_set, 0>::type first_name_view;
   first_name_view& fnv = get<0>(m_employees);

   fnv.insert(employee_entry("John", "Smith", 110));
   fnv.insert(employee_entry("Fudge", "Hunk", 97));

   ///get employees sorted by id
   typedef nth_index<employee_set, 2>::type id_view;
   id_view& idv = get <2> (m_employees);
   for(id_view::reverse_iterator it = idv.rbegin(), it_end(idv.rend()); it != it_end; ++it)
   {
       std::cout << it->first_name_  <<" "
                 << it->last_name_ << ":"
                 << it->id_ << std::endl;
       it->change();//calling the troublesome function
   }

   return 0;
} 
```

产生的错误是：

```
 $c++ dr_function.cpp 
dr_function.cpp: In function ‘int main()’:
dr_function.cpp:65:19: error: passing ‘const employee_entry’ as ‘this’ argument of ‘void employee_entry::change()’ discards qualifiers [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:23:33.163

您发布的解决方案不起作用：充其量它会得到一个乱码索引，最坏的情况是您的应用程序会崩溃。由于您的最后一个索引取决于`employee_entry::id_`，因此您无法随意更改它，因为您隐含地破坏了索引顺序。对于这种东西，Boost.MultiIndex 提供了更新功能`replace`，正如[这里](http://www.boost.org/libs/multi_index/doc/tutorial/basics.html#ord_updating)`modify`所讨论的。在您的特定情况下，您可以按如下方式调用您的成员函数：`change`

```
idv.modify(idv.iterator_to(*it),boost::bind(&employee_entry::change,_1)); 
```

一点解释：`idv.iterator_to(*it)`只是将您的反向迭代器转换为常规迭代器，这正是`modify`需要的。至于`boost::bind`部分，这封装`&employee_entry::change`成一个合适的修饰函子。这样，您就可以让 Boost.MultiIndex 了解即将发生的变化`id_`并相应地更新索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T23:10:21.287

好吧，我回答我的问题至少是为了调试上面提到的代码。在问题下方的评论中讨论并回答了我的主要担忧。我下面的代码，我做`long id_`了`mutable`并`void change(){...}`改为`void change()const{...}`

```
#include <string>
#include <iostream>
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include<vector>

using boost::multi_index::multi_index_container;
using boost::multi_index::ordered_non_unique;
using boost::multi_index::ordered_unique;
using boost::multi_index::indexed_by;
using boost::multi_index::member;

class employee_entry
{
public:
   employee_entry( const std::string& first,
                   const std::string& last,
                   long id):
                   first_name_(first),
                   last_name_(last),
                   id_(id)
   {}
   void change() const {id_++;}//causing the problem
   std::string first_name_;
   std::string last_name_;
   std::vector<int> mySet;
   mutable long id_;

   std::vector<int>::iterator mySet_begin()  {return mySet.begin();   }
};

typedef multi_index_container<
employee_entry, indexed_by<
   ordered_unique<member<employee_entry, std::string, &employee_entry::first_name_> >
   , ordered_non_unique<member<employee_entry, std::string, &employee_entry::last_name_> >
   , ordered_non_unique<member<employee_entry, long, &employee_entry::id_> >
   >
> employee_set;

//employee set.... multi-index
employee_set m_employees;

int main()
{
   using boost::multi_index::nth_index;
   using boost::multi_index::get;

   typedef nth_index<employee_set, 0>::type first_name_view;
   first_name_view& fnv = get<0>(m_employees);

   fnv.insert(employee_entry("John", "Smith", 110));
   fnv.insert(employee_entry("Fudge", "Hunk", 97));

   ///get employees sorted by id
   typedef nth_index<employee_set, 2>::type id_view;
   id_view& idv = get <2> (m_employees);
   for(id_view::reverse_iterator it = idv.rbegin(), it_end(idv.rend()); it != it_end; ++it)
   {
       std::cout << it->first_name_  <<" "
                 << it->last_name_ << ":"
                 << it->id_ << std::endl;
       it->change();//calling the troublesome function
   }

   return 0;
} 
```

# php - 使用 QueryPath 查找和替换

> ID：10754360
> 
> 赞同：3
> 
> 时间：2012-05-25T12:22:35.700
> 
> 标签：php, querypath

我有一个分配给 $output 变量的字符串。我想使用 QueryPath 遍历字符串并向每个匹配的元素添加一个类。

目前我有：

`$output = qp($output)->find('table')->addclass('table')->html();`

唯一的问题是它在第一次匹配之前删除了 $output 的内容。有没有办法使用 QueryPath 来查找匹配项，然后添加类，同时保持 $output 的内容不变？

编辑：

```
Pseudo code:

$output = '<table class="temp"><blah></blah></table>';

Magic QueryPath

$output = '<table class="temp blah"><blah></blah></table>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:42:12.633

尝试删除**html()**

```
$output = qp($output)->find('table')->addclass('table'); 
```

用于显示：

```
$output->writeHTML(); 
```

> html():: 替换 HTML 文档中当前元素或元素的子内容

# google-apps-script - 编辑表单后发送电子邮件

> ID：10754365
> 
> 赞同：0
> 
> 时间：2012-05-25T12:22:46.057
> 
> 标签：google-apps-script

我有一个很好用的 Google 表单。在该表格中，我还编写了发送电子邮件的脚本。这些也很好用。

我没有办法让这些脚本自行触发和运行。现在，当编辑表单时，我会收到一封通知电子邮件。然后我必须登录电子表格并手动运行我的电子邮件脚本。

我希望电子表格自动运行脚本并在从表单添加数据时发送电子邮件。我尝试了下面的 onEdit，但只有在我打开电子表格并启动它时才有效。是否有另一种方法可以在编辑表单后自动运行脚本而无需打开它？

这是一个基本的电子邮件代码 + 我试图做的我的 onEdit。

```
// Ran when the spreadsheet is edited
function onEdit(){ 
  emailEOnEdit();
}

// Sends an email when the New User Request Form is edited
function emailEOnEdit(row){ 
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var subject = "Test Email On Edit";
  var recipients = "user@domain.com"
  var message = "<HTML><BODY>" 
    + "<P>" + sheet.getRange("E1").getValues()
    + "</HTML></BODY>"; 
  MailApp.sendEmail(recipients, subject, "", {htmlBody: message});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:33:02.460

您是否尝试过[onFormSubmit 触发器？](https://developers.google.com/apps-script/guide_events#TriggerAttributes)

# c# - 如何加速 C# 数学代码

> ID：10754371
> 
> 赞同：18
> 
> 时间：2012-05-25T12:23:22.033
> 
> 标签：c#, performance, windows-phone-7, optimization, xna

我有一些 3d 插值代码占用了我项目运行时间的 90%，并且无法预先计算。

我可以使用哪些技术来加快速度？算法优化还是微优化？

这是给感兴趣的人的代码。

它基本上采用放置在 2 个 3d 数组中的数据并插入其余数据。

编辑：此外，我已经将其拆分为更高级别的线程以提高性能，但这对 windows phone 没有帮助，因为它们都是单核......

我可能会执行类似 (Single[] DensityMap = new Single[128 * 128 * 128];) 的操作来移除多维数组命中。我在 100 多个地方访问数组，并希望不必这样做（包装在函数中无济于事，因为 windows phone 不会内联函数调用，然后它无助于性能......）

```
float[, ,] DensityMap = new float[128, 128, 128];
float[, ,] PressureMap = new float[128, 128, 128];

unchecked
{
    for (int x = 0; x < g_CraftWorldConstants.RegionSizeX; x++)
    {
        int offsetX = (x / SAMPLE_RATE_3D_HOR) * SAMPLE_RATE_3D_HOR;
        int plusOffsetX = SAMPLE_RATE_3D_HOR + offsetX;
        int poxox = plusOffsetX - offsetX;
        double poxxpoxox = ((plusOffsetX - x) / (double)poxox);
        double xoxpoxox = ((x - offsetX) / (double)poxox);

        for (int y = 0; y < g_CraftWorldSettings.GET.RegionSizeY; y++)
        {
            int offsetY = (y / SAMPLE_RATE_3D_VERT) * SAMPLE_RATE_3D_VERT;
            int plusOffsetY = SAMPLE_RATE_3D_VERT + offsetY;
            int poyoy = plusOffsetY - offsetY;
            double poyypoyoy = ((plusOffsetY - y) / (double)poyoy);
            double yoypoyoy = ((y - offsetY) / (double)poyoy);

            for (int z = 0; z < g_CraftWorldConstants.RegionSizeZ; z++)
            {
                if (!(x % SAMPLE_RATE_3D_HOR == 0 && y % SAMPLE_RATE_3D_VERT == 0 && z % SAMPLE_RATE_3D_HOR == 0))
                {
                    int offsetZ = (z / SAMPLE_RATE_3D_HOR) * SAMPLE_RATE_3D_HOR;
                    int plusOffsetZ = SAMPLE_RATE_3D_HOR + offsetZ;
                    int pozoz = plusOffsetZ - offsetZ;
                    double pozzpozoz = ((plusOffsetZ - z) / (double)pozoz);
                    double zozpozoz = ((z - offsetZ) / (double)pozoz);

                    double x00 = poxxpoxox * in_DensityMap[offsetX, offsetY, offsetZ] + xoxpoxox * in_DensityMap[plusOffsetX, offsetY, offsetZ];
                    double x10 = poxxpoxox * in_DensityMap[offsetX, offsetY, plusOffsetZ] + xoxpoxox * in_DensityMap[plusOffsetX, offsetY, plusOffsetZ];
                    double x01 = poxxpoxox * in_DensityMap[offsetX, plusOffsetY, offsetZ] + xoxpoxox * in_DensityMap[plusOffsetX, plusOffsetY, offsetZ];
                    double x11 = poxxpoxox * in_DensityMap[offsetX, plusOffsetY, plusOffsetZ] + xoxpoxox * in_DensityMap[plusOffsetX, plusOffsetY, plusOffsetZ];

                    double r0 = poyypoyoy * x00 + yoypoyoy * x01;
                    double r1 = poyypoyoy * x10 + yoypoyoy * x11;
                    in_DensityMap[x, y, z] = (float)(pozzpozoz * r0 + zozpozoz * r1);

                    double x02 = poxxpoxox * in_CaveDensity[offsetX, offsetY, offsetZ] + xoxpoxox * in_CaveDensity[plusOffsetX, offsetY, offsetZ];
                    double x12 = poxxpoxox * in_CaveDensity[offsetX, offsetY, plusOffsetZ] + xoxpoxox * in_CaveDensity[plusOffsetX, offsetY, plusOffsetZ];
                    double x03 = poxxpoxox * in_CaveDensity[offsetX, plusOffsetY, offsetZ] + xoxpoxox * in_CaveDensity[plusOffsetX, plusOffsetY, offsetZ];
                    double x13 = poxxpoxox * in_CaveDensity[offsetX, plusOffsetY, plusOffsetZ] + xoxpoxox * in_CaveDensity[plusOffsetX, plusOffsetY, plusOffsetZ];

                    double r2 = poyypoyoy * x02 + yoypoyoy * x03;
                    double r3 = poyypoyoy * x12 + yoypoyoy * x13;
                    in_CaveDensity[x, y, z] = (float)(pozzpozoz * r2 + zozpozoz * r3);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T12:36:34.333

看来你有很多机会来优化你的代码。您的 x 循环执行 128 次，您的 y 循环执行 128*128=16,384 次，您的 z 循环执行 128^3=2,097,152 次。z 循环中有许多项仅取决于 x 或 y 迭代，但在每次 z 迭代时都会重新计算它们。例如，

```
int poxox = plusOffsetX - offsetX; 
```

和

```
double poxxpoxox = ((plusOffsetX - x) / (double)poxox); 
```

这两个项被计算了超过 200 万次，但如果我对你的函数的粗略扫描是正确的，则只需要计算 128 次。将项移动到适当的循环级别，这样您就不会浪费循环多次重新计算相同的值。

这是您进行了基本优化的代码。我很想知道这如何影响您的运行时间。其中一些项仅取决于迭代值，并且对于 x、y 和 z 是相同的。所以我将它们完全提取出来并预先计算了一次。我还将外部 mod 操作移出内部循环，并修改了逻辑以确保评估短路，这应该会删除以前执行的大部分 mod 操作。

```
int[] offsets = new int[128];
int[] plusOffsets = new int[128];
double[] poii = new double[128];
double[] ioip = new double[128];
for (int i = 0; i < 128; i++) {
    offsets[i] = (i / SAMPLE_RATE_3D_HOR) * SAMPLE_RATE_3D_HOR;
    plusOffsets[i] = SAMPLE_RATE_3D_HOR + offsets[i];
    double poioi = (double) (plusOffsets[i] - offsets[i]);
    poii[i] = ((plusOffsets[i] - i) / poioi);
    ioip[i] = ((i - offsets[i]) / poioi);
}

float[, ,] DensityMap = new float[128, 128, 128];
float[, ,] PressureMap = new float[128, 128, 128];

for (int x = 0; x < g_CraftWorldConstants.RegionSizeX; x++)
{
    int offsetX = offsets[x];
    int plusOffsetX = plusOffsets[x];
    double poxxpoxox = poii[x];
    double xoxpoxox = ioip[x];
    bool xModNot0 = !(x % SAMPLE_RATE_3D_HOR == 0);

    for (int y = 0; y < g_CraftWorldConstants.RegionSizeY; y++)
    {
        int offsetY = offsets[y];
        int plusOffsetY = plusOffsets[y];
        double poyypoyoy = poii[y];
        double yoypoyoy = ioip[y];
        bool yModNot0 = !(y % SAMPLE_RATE_3D_VERT == 0);

        for (int z = 0; z < g_CraftWorldConstants.RegionSizeZ; z++)
        {
            //if (!(x % SAMPLE_RATE_3D_HOR == 0 && y % SAMPLE_RATE_3D_VERT == 0 && z % SAMPLE_RATE_3D_HOR == 0))
            if (xModNot0 || yModNot0 || !(z % SAMPLE_RATE_3D_HOR == 0))
            {
                int offsetZ = offsets[z];
                int plusOffsetZ = plusOffsets[z];
                double pozzpozoz = poii[z];
                double zozpozoz = ioip[z];

                double x00 = poxxpoxox * DensityMap[offsetX, offsetY, offsetZ] + xoxpoxox * DensityMap[plusOffsetX, offsetY, offsetZ];
                double x10 = poxxpoxox * DensityMap[offsetX, offsetY, plusOffsetZ] + xoxpoxox * DensityMap[plusOffsetX, offsetY, plusOffsetZ];
                double x01 = poxxpoxox * DensityMap[offsetX, plusOffsetY, offsetZ] + xoxpoxox * DensityMap[plusOffsetX, plusOffsetY, offsetZ];
                double x11 = poxxpoxox * DensityMap[offsetX, plusOffsetY, plusOffsetZ] + xoxpoxox * DensityMap[plusOffsetX, plusOffsetY, plusOffsetZ];

                double r0 = poyypoyoy * x00 + yoypoyoy * x01;
                double r1 = poyypoyoy * x10 + yoypoyoy * x11;
                DensityMap[x, y, z] = (float)(pozzpozoz * r0 + zozpozoz * r1);

                double x02 = poxxpoxox * PressureMap[offsetX, offsetY, offsetZ] + xoxpoxox * PressureMap[plusOffsetX, offsetY, offsetZ];
                double x12 = poxxpoxox * PressureMap[offsetX, offsetY, plusOffsetZ] + xoxpoxox * PressureMap[plusOffsetX, offsetY, plusOffsetZ];
                double x03 = poxxpoxox * PressureMap[offsetX, plusOffsetY, offsetZ] + xoxpoxox * PressureMap[plusOffsetX, plusOffsetY, offsetZ];
                double x13 = poxxpoxox * PressureMap[offsetX, plusOffsetY, plusOffsetZ] + xoxpoxox * PressureMap[plusOffsetX, plusOffsetY, plusOffsetZ];

                double r2 = poyypoyoy * x02 + yoypoyoy * x03;
                double r3 = poyypoyoy * x12 + yoypoyoy * x13;
                PressureMap[x, y, z] = (float)(pozzpozoz * r2 + zozpozoz * r3);
            }
        }
    } 
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T12:39:18.373

你可以做一些事情来加速你的代码：

*   避免使用 multidim.-arrays 因为它们很慢
*   使用多个线程
*   将要转换为双精度的变量存储在双精度变量中
*   预先计算一切你可以（见斧头的帖子）

### 数组

要模拟 3D 阵列，您可以这样做：

```
Single[] DensityMap = new Single[128 * 128 * 128];
DensityMap[z + (y * 128) + (x * 128 * 128)] = ...; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T15:42:23.153

Use a jagged array rather than multi-dimensional, i.e. do

```
float[][][] DensityMap = new float[128][][]; 
```

And then create the inner arrays using for loops, or the [LINQ syntax](https://stackoverflow.com/a/1099794/154766) (which might be sub-optimal).

This will give MUCH better performance than using a multi-dimensional array, and equal or better performance than using a single-dimensional array and calculating the offsets yourself. That is, unless the cost of initializing the jagged array is significant; it will after all create 128^2 arrays. I'd benchmark it and only revert to a single-dimensional array if the cost really is significant.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T15:04:26.417

您可以更改您的 for 循环，因为您没有为所有这些的中间值做任何事情

```
for (int x = 0; x < 128; x+= SAMPLE_RATE_3D_HOR) {
   for (int y = 0; y < 128; y+= SAMPLE_RATE_3D_VERT) {
      for (int z = 0; z < 128; z+= SAMPLE_RATE_3D_HOR) { 
```

并行执行这些会更好。

有了这个，您可以消除 600 万个 mod % 计算和 60+ 千次乘法。

--edit-- 对不起，我错过了“！” 与 3 个 mods 在线上。您仍然可以跳过其中一些计算。请参阅下面的评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T15:22:39.700

1）你真的需要双打吗？特别是你正在混合一些浮点数、双精度数和整数。

2) 您应该预先计算 k / SAMPLE_RATE_3D_HOR * SAMPLE_RATE_3D_HOR 模式。

```
int pre_calc[128];
for( int i = 0; i < 128; ++i )
    pre_calc[i] = (i / SAMPLE_RATE_3D_HOR) * SAMPLE_RATE_3D_HOR; 
```

# android - OSX Lion上的adb，但无法连接到galaxy 10.1选项卡，但在linux中工作正常

> ID：10754372
> 
> 赞同：6
> 
> 时间：2012-05-25T12:23:24.183
> 
> 标签：android, macos, osx-lion, adb, galaxy-tab

我正在尝试连接到运行 Android 3.2 的 Galaxy Tab 10.1

我见过几个类似的问题，但它们似乎都与设备设置不正确有关。我将其设置为允许“未知来源”，并且还启用了“Usb 调试”。我可以在 linux 和 windows 机器上使用 adb，所以我的平板电脑似乎设置正确并且电缆工作正常。

当我将它插入我的 macbook pro 时，选项卡会以 ping 响应以表明它知道连接，但是当我运行 adb devices 时，没有列出任何设备。

我的 OSX 安装相当新，我还没有安装任何类型的网络共享软件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T21:35:18.373

未为所有设备类型设置默认 adb。请将您当前的 ~/.android/adb_usb.ini 文件替换为以下文件，它将解决问题。我必须在我的 Mac 上为完全相同的设备做同样的事情。

```
# ANDROID 3RD PARTY USB VENDOR ID LIST -- DO NOT EDIT.
# USE 'android update adb' TO GENERATE.
# 1 USB VENDOR ID PER LINE.
# Acer
0x0502
# AOC
0x2207
# Amazon Kindle
0x1949
# ASUS
0x0B05
# Dell
0x413C
# Foxconn
0x0489
# Fujitsu
0x04C5
# Fujitsu Toshiba
0x04C5
# Garmin-Asus
0x091E
# Google
0x18D1
# Hisense
0x109B
# HTC
0x0BB4
# Huawei
0x12D1
# K-Touch
0x24E3
# KT Tech
0x2116
# Kyocera
0x0482
# Lenevo
0x17EF
# LG
0x1004
# Motorola
0x22B8
# NEC
0x0409
# Nook
0x2080
# Nvidia
0x0955
# OTGV
0x2257
# Pantech
0x10A9
# Pegatron
0x1D4D
# Philips
0x0471
# PMC-Sierra
0x04DA
# Qualcomm
0x05C6
# SK Telesys
0x1F53
# Samsung
0x04E8
# Sharp
0x04DD
# Sony
0x054C
# Sony Ericsson
0x0FCE
# Teleepoch
0x2340
# Toshiba
0x0930
# ZTE
0x19D2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:04:10.857

检查设备是否显示在 System Profiler（包含在 OS X 中）中的 USB 下。如果它显示在那里，但不在 ADB 中，请尝试将手机的 USB 供应商 ID 添加到 ~/.android/adb_usb.ini

如果该文件尚不存在，则可以创建此文件。您将需要 Galaxy Tab 10.1 供应商 ID。

请确保文件的最后一行是供应商 ID，不要在最后留下空行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T11:23:31.277

执行

```
android update adb 
```

~/.android/adb_usb.ini 文件会自动更新。重启 adb 或重启你的机器。

# css - CSS等高元素

> ID：10754374
> 
> 赞同：5
> 
> 时间：2012-05-25T12:23:35.900
> 
> 标签：css, html

我阅读了几种不同的解决方案来模拟等高的列或元素，但它们都没有真正引起我的注意，因为它们使用了 hack、极其复杂的 HTML 布局或不受广泛支持的属性。

这是[Fiddle](http://jsfiddle.net/weppos/satgw/)的示例。

我的目标是确保所有元素具有相同的高度，或者至少是行中兄弟姐妹的最大高度。

一行由 3 个元素组成（在这种情况下，不存在行包装器，但我可以考虑添加这样的容器元素）。

有没有解决方案：

1.  不需要 JS
2.  [不使用`display: table`](http://www.456bereastreet.com/lab/equal_height/)
3.  不使用负值的宽填充/边距
4.  [不需要 div 和 float 的指数使用](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:31:33.087

有了你所做的限制：不，没有。

编辑：因为您没有提到这一点：您可以为此使用表格。（欢迎回到 90 年代）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T13:25:47.273

您可以为此使用 CSS3 **flex**属性。像这样写：

```
CSS

.parent{
    display:-moz-box;
    display:-webkit-box;
    display:box;
    -moz-box-orient: horizontal;
    -webkit-box-orient: horizontal;
    box-orient: horizontal;
    width:100%;
    min-height:200px;
}

.parent div{
    background:red;
    -moz-box-flex: 1;
    -webkit-box-flex: 1;
    box-flex: 1;
    border:2px solid green;
} 
```

**HTML**

```
<div class="parent">
    <div class="child">1</div>
    <div class="child">2</div>
    <div class="child">3</div>
</div> 
```

检查这个[http://jsfiddle.net/VkPmg/2/](http://jsfiddle.net/VkPmg/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:23:03.610

如果你有一个固定宽度的布局，你可以通过背景图像来伪造它。想象一个模拟边框的平铺图像背景，您只需在主容器中重复-y。

例如，如果您有一个 400px 的容器和 3 100px 的浮动框（就像您的小提琴一样），您将不得不在主容器中重复制作一个 1x400 的图像。只需在良好的 x 位置添加此图像 1 像素看起来就像您使用的边框颜色。并重复它！

使用这种技术，您的盒子将不会具有相同的高度（实际上），但显示看起来会像盒子一样，因为较高的盒子会推动容器并出现背景。

# cmd - 从 Windows 或 Unix 根目录的子目录中删除所有名为“XXX”的目录

> ID：10754380
> 
> 赞同：0
> 
> 时间：2012-05-25T12:24:05.750
> 
> 标签：cmd, rmdir

我有很多目录需要删除一些子目录。有没有办法 deltree/rmdir 以便删除所有标题为“TAB”、“Tab_old”的目录和其中的文件。

目录结构就像

```
root>townx>TAB
root>towny>
root>towny>TAB
root>towny>zone1>
root>towny>zone1>Tab 
```

等等......所以应该删除所有“TAB”目录。

===== edmastermind29 建议的流程输出 ====

```
$ find / -name "TAB" -type d -exec rm -rf {} \;

atgisuser@ATGISLAPTOP02 /c/scratch/Test_Lidar
$ ls
Ath_test.csv  LAS               Success_LOG.txt  asc
Contours      Orthophotomosaic  XYZ              schema.ini

atgisuser@ATGISLAPTOP02 /c/scratch/Test_Lidar
$ cd contours

atgisuser@ATGISLAPTOP02 /c/scratch/Test_Lidar/contours
$ ls
Atherton  TAB

atgisuser@ATGISLAPTOP02 /c/scratch/Test_Lidar/contours
$ 
```

上面的“TAB”目录应该删除...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T13:04:38.453

这是一个 Windows CMD 解决方案

```
for /f "delims=" %F in ('dir /b /s /ad x:\rootFolder ^| findstr /le "\TAB \Tab_old"') do 2>nul rd /s /q "%F" 
```

如果在批处理脚本中使用，则`%F`必须更改为`%%F`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:29:36.500

`find / -name "XXX" -type d -exec rm -rf {} \;`

`/`搜索整个文件系统。如果您只想搜索根文件夹，那么您可以使用`/root`

的用法`-name`区分大小写。但是，`-iname`忽略大小写敏感。

用简单的英语，上面的命令说明：在整个文件系统中搜索“XXX”，一个目录。找到“XXX”后，递归强制删除“XXX”目录中的内容。

# ruby-on-rails - `rails c` 或 `rake` 膨胀内存

> ID：10754386
> 
> 赞同：0
> 
> 时间：2012-05-25T12:24:29.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memory

当我尝试启动`ENV_RAILS=production rails c`（或`rake`任务）时，服务器上的某个进程杀手会在几秒钟后杀死该进程，因为它使用了超过 400mb 的物理内存。现在我需要找出那个肿块是从哪里来的。服务器

我知道 newrelic 和 oink - 但它们似乎只适用于服务器请求 - 而不是控制台或 rake 任务。有哪些选择可以对此进行调查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:25:08.970

嗯，我用的不多，但你可以试试探查器[http://ruby-prof.rubyforge.org/](http://ruby-prof.rubyforge.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T22:10:15.087

Heroku 建议总是做 rake，尤其是在实现有很多记录的情况下。这并不复杂，创建耙子，创建文件。耙入 lib/tasks/clear_cache.rake

```
namespace :admin  do
  desc "Start clear cache"
  task :clear_cache => :environment do
    puts "preparing"
    Rails.cache.clear
    puts "Sucess"
  end
end 
```

要运行，请执行命令：“rake clear_cache” [了解更多详细信息](http://www.ultrasaurus.com/sarahblog/2009/12/creating-a-custom-rake-task/)

# django - Django：使用 urlresolver 设置 cookie 路径

> ID：10754387
> 
> 赞同：2
> 
> 时间：2012-05-25T12:24:30.630
> 
> 标签：django, cookies, django-settings

我在 django 上编写了一个 web 服务应用程序。此应用程序可以在我们的服务器上作为多个实例找到。

例如：

```
http://server1/testapp/
http://server2/sandboxapp/
http://server2/productionapp/ 
```

应用程序实例通过 mod_wsgi 托管在 apache2 上。

我对所有这些实例都使用 cookie 身份验证，并且希望每个实例的 cookie 不与其他实例重叠。我需要设置 SESSION_COOKIE_PATH 值。

碰巧我事先并不知道部署应用程序的 URL。所以我想使用反向 url 来猜测这个值。

我的主要`urls.py`看起来像这样：

```
urlpatterns = patterns('',
    (r'admin/', include(admin.site.urls)),
     url(r'^$', view_server_root, {}, name='server_root'),
    ),
# here I also includes urls from the various sub-apps
for app in apps:
    urlpatterns.append(url(urlprefix,  include(app.urls)) 
```

我在加载所有网址后添加了这一点：

```
from django.core import urlresolvers
from django.conf import settings
settings.SESSION_COOKIE_PATH = urlresolvers.reverse('server_root') 
```

不幸的是`urlresolvers.reverse('server_root')`返回`/`而不是预期的，例如，`/testapp/`。如果我登录到每个实例，我的 cookie 会重叠。

不过，稍后在应用程序使用中，我使用`django.db.models.permalink`了一些视图，它返回一个正确的前缀 URL（例如`/testapp/page/465`）。

执行时可能缺少上下文的某些内容`urls.py`。

有任何想法吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:43:06.373

您[不应该在运行时更改 Django 设置](https://docs.djangoproject.com/en/dev/topics/settings/#altering-settings-at-runtime)。如果您使用的是 Django 1.4 或更高版本，您也许可以在您的 settings.py 中使用[`reverse_lazy`](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-lazy)和`SESSION_COOKIE_PATH`设置。

```
SESSION_COOKIE_PATH = reverse_lazy('server_root') 
```

# php - 如何使用php在当前页面url的站点名之后获取内容

> ID：10754389
> 
> 赞同：0
> 
> 时间：2012-05-25T12:24:34.853
> 
> 标签：php

我想要来自当前 URL 的站点名之后的详细信息。

例如：如果当前 url 是`http://mysite.com/a/article`，我想获取 之后的内容`http://mysite.com/`，在这种情况下`a/article`。是否有任何 PHP 函数可以获取这些详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:25:37.193

```
echo $_SERVER['REQUEST_URI']; // will print /a/article 
```

如果您不需要'/'：

```
echo substr($_SERVER['REQUEST_URI'], 1); // will print a/article 
```

# delphi - 德尔福：SQLite 和 UniDac

> ID：10754390
> 
> 赞同：2
> 
> 时间：2012-05-25T12:24:40.563
> 
> 标签：delphi, sqlite, unidac

需要在 SQLite 中存储一些数据。使用 SQLite 选择 UniDac，但有一个问题：在 UniConnection 中，在“数据库”字段中，我选择 SQLite 并输入数据库的名称 - 得到错误“不支持的元数据类型”。未创建数据库文件。问题是什么？正如之前与 UniDac 合作的那样，没有观察到此类问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:55:45.523

UniDAC 4.1.6 with Delphi XE2 我没有看到任何问题。SQLite3.dll 必须位于系统路径或与可执行文件相同的目录中。以下非常基本的示例在单击 btnConnect 时创建数据文件。

```
unit uMain;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.Grids, Vcl.DBGrids, UniProvider,
  SQLiteUniProvider, Data.DB, MemDS, DBAccess, Uni, Vcl.ExtCtrls, Vcl.DBCtrls,
  Vcl.StdCtrls;

type
  TfrmMain = class(TForm)
    UniDataSource1: TUniDataSource;
    UniConnection1: TUniConnection;
    UniQuery1: TUniQuery;
    SQLiteUniProvider1: TSQLiteUniProvider;
    DBGrid1: TDBGrid;
    edtDBName: TEdit;
    Label1: TLabel;
    DBNavigator1: TDBNavigator;
    btnConnect: TButton;
    procedure btnConnectClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmMain: TfrmMain;

implementation

{$R *.dfm}

procedure TfrmMain.btnConnectClick(Sender: TObject);
begin
  if (btnConnect.Caption = 'Connect') then
  begin
    UniConnection1.ProviderName := 'SQLite';
    UniConnection1.Database := ExtractFilePath(Application.ExeName)
     + edtDBName.Text;
    UniConnection1.Connect;
    btnConnect.Caption := 'Disconnect';
  end
  else
  begin
    UniConnection1.Disconnect;
    btnConnect.Caption := 'Connect';
  end;
end; 
```

# c++ - 来自二维网格的不同随机点

> ID：10754392
> 
> 赞同：2
> 
> 时间：2012-05-25T12:24:52.220
> 
> 标签：c++, random

我有一个大的二维网格，让我们说 10000 X 10000。从这些网格中我需要选择 1000 个随机点，但我还需要注意两个点都不相同。我想到的标准方法是在选择每个点之后，我应该检查所有以前的条目以查看该点是否已经被选择，但对于大型网格和大量点来说，这将变得低效。有更好的方法吗？我正在使用 C++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:32:56.317

> 似乎对于大型网格和大量点，这将变得低效

不必要。有两个潜在的低效率来源：

1.  拒绝采样导致的开销（即，必须不断尝试，直到找到尚未选择的点）。鉴于您选择了 0.001% 的点，随机选择同一点两次的机会非常小。因此，重试的成本应该可以忽略不计。
2.  检查随机选择的点是否已被选择的开销。如果您将所有先前选择的点存储在合适的数据结构中，则可以及时完成`O(1)`。为此，`std::unordered_set`将是一个很好的候选人。集合的大小将随着您需要选择的元素数量线性增长，并且完全独立于网格大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:29:22.947

你可以实现这样的算法：

> 1.  创建一个从哈希到点的空映射
> 2.  选择随机点
> 3.  计算哈希
> 4.  如果在映射中散列，则转到 1
> 5.  保存哈希和点
> 6.  如果积分还不够，请转到 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:33:05.240

随机选择任何点然后如果它存在于*Selected Points*列表中则将其丢弃应该不会是低效的，只要您有*Selected Points*的良好排序集合，您也可以轻松插入。

此外，根据您的点的定义方式（即它们是否都与您定义的类或结构相关联），您可以向点对象添加一个布尔变量，名为`Selected`. 选择一个点后，检查它是否已标记为`Selected`。如果没有，请将其添加到您的列表中并将`Selected`值更改为`TRUE`. 否则，继续选择随机点。

# php - Mysql Utf-8 和 PHP

> ID：10754400
> 
> 赞同：0
> 
> 时间：2012-05-25T12:25:21.733
> 
> 标签：php, mysql, utf-8

我讨厌角色集和所有相关的东西，它们让我头疼！！

我现在正在开发一个与 OpenCart 一起使用的应用程序。该数据库使用 utf8-bin 编码。

我想在 PHP 中使用我的应用程序从 XML 中获取数据（以 ISO-8859-1 编码）并将其正确地放在数据库中（以 UTF8-BIN 编码）

我尝试使用 $msqli->set_charset("utf8"); 连接时， utf8_encode 与字符串，但什么都没有，它仍然显示奇怪的字符。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:31:53.993

您需要全程使用 UTF8。使用 UFT8 连接到 MySQL 是正确的，但您还必须在读取文件后对其进行转换，并确保在 HTML 页面、带有 的标头`<meta http-equiv="content-type" content="text/html;charset=utf-8" />`或 HTTP 标头中指定了 UTF8。否则，您需要在打印字符串之前转换为您在页面上使用的任何字符集。

*我的建议是到处*使用 UTF8 。然后你会避免很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:31:13.353

在将 XML 放入数据库之前，您必须将其从 ISO 转换为 UTF！检查这个

[http://www.unicodetools.com/](http://www.unicodetools.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:09:40.107

奇怪的是，经过多次尝试，它使编码工作的是“utf8_decode”。不知道是什么问题，现在解决了！

谢谢你的回答！！

# microdata - 架构的架构

> ID：10754406
> 
> 赞同：0
> 
> 时间：2012-05-25T12:25:37.963
> 
> 标签：microdata, schema.org

有[架构的](http://schema.org/docs/full.html)架构吗？

也许在[Thing > Intangible > StructuredValue](http://schema.org/StructuredValue)但在这里找不到...

目的是描述一个模式。

有人知道这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:52:57.593

Schema.org 不提供描述模式的方法，但[RDF Schema](http://www.w3.org/TR/rdf-schema/) (RDFS) 提供。请参阅[http://schema.rdfs.org/](http://schema.rdfs.org/)以获取 RDFS 中 Schema.org 术语的表达式。[Turtle 版本](http://schema.rdfs.org/all.ttl)可能是最易读的版本，但也有 JSON、CSV 等。

# jquery - jquery json 数组 Googlemap

> ID：10754413
> 
> 赞同：0
> 
> 时间：2012-05-25T12:26:09.220
> 
> 标签：jquery, arrays, json, google-maps

得到了一个很好的例子。我使用了这个谷歌地图示例，它正在使用在 javascript 中创建的本地数组：http: [//jsfiddle.net/jFMQ5/2/](http://jsfiddle.net/jFMQ5/2/)

现在我只需要更改它以从 php.ini 获取数组。

步骤是

*   在php中创建数组
*   使用 json_encode 将数组转换为 json
*   用javascript抓住它

**问题...**如何迭代 json 而不是数组。或者如何从 json 创建一个 javascript 数组

在我的javascript中我得到了这个（也充满了字符集错误，但我想这是另一个问题）

```
var arrAddress = ["Sir vej 3 7500 Holstebro","Ivar Lundgaardsvej 8 7500 Holstebro","H\u00f8jtoftvej 6 7500 Holstebro","Svalev\u00e6nget 22 7500 Holstebro","Ringk\u00f8bingvej 21 7500 Holstebro","Elkj\u00e6rvej 90 7500 Holstebro","Hovedgaden 2 7500 Holstebro","Skolegade 32 7500 Holstebro","Fuglsangvej 2 7500 Holstebro","Sl\u00e5envej 150 7500 Holstebro","Burvej 2A Idom 7500 Holstebro"]; 
```

在 jsfiddle 示例中，它期望这样的数组：

```
$arrAddress[0] = "Sir vej 3 7500 Holstebro";
$arrAddress[1] = "Ivar Lundgaardsvej 8 7500 Holstebro"
etc. etc. 
```

如何使 jsfiddle 链接使用这个 json 字符串而不是本地定义的数组？

**更新** PHP 正在创建这样的数组：

```
// in PHP //
While(...) {
    $arrAddress[] = $row['address'].' '.$row['zip'].' '.$row['city'];
}
// after while
$arrAddress = json_encode($arrAddress);
// end php //

// in javascript //
var addAddress = {$arrAddress} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:23:49.163

您确定要在 javascript 中返回 JSON 对象吗？尝试执行 a`console.log(addAddress)`并查看它返回的是字符串还是对象。这还将向您显示“数组”索引（无论如何在 Chrome 中）。

也尝试解析 json 字符串

```
var addAddress = $.parseJSON({$arrAddress}); 
```

# c++ - Vim 无法使用 clang 设置全功能

> ID：10754414
> 
> 赞同：0
> 
> 时间：2012-05-25T12:26:15.867
> 
> 标签：c++, vim, clang, omnicomplete

我知道可以使用 clang 代替omnicppcomplete。但是，安装 clang 后，vim 无法自动完成 vimrc 中指定的脚本。即以前，`autocmd FileType python set omnifunc = pythoncomplete#Complete`在 .vimrc 文件中工作正常。

但是，安装 clang 后，每当我打开文件时它都会返回此错误：

```
Error detected while processing FileType Auto commands for "python":
E518: Unknown option: pythoncomplete#Complete 
```

我也尝试删除 clang 目录，但错误仍然存​​在。任何想法？

编辑：经过大量调试后意识到你不能在'='符号之间留下空格。所以正确的方法是' `autocmd FileType python set omnifunc=pythoncomplete#Complete`'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:26:47.110

Vim 将`pythoncomplete#Complete`视为另一种设置（不存在），因为您不小心在`=`. `:set`您可以使用该命令更改多个设置。

# android - Android：如何在选项卡内从一个片段导航到另一个片段？

> ID：10754416
> 
> 赞同：4
> 
> 时间：2012-05-25T12:26:17.753
> 
> 标签：android, tabs, fragment

该应用程序有两个选项卡，选项卡 A 和选项卡 B 都扩展了 Fragment。现在我的问题是，当我单击选项卡 B 的列表项时，应该在选项卡中调用一个新的片段 C。使用以下代码，我可以调用 Fragment C ，但不能在 tab 中调用。

```
Intent intent = new Intent();
intent.setClass(getActivity(), C.class);
startActivity(intent); 
```

当我使用活动时，我可以通过使用 ActivityGroup 来解决我的问题。片段中有没有类似的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:37:35.800

尝试使用此代码 onClick 列表项

```
private void stackAFragment() {
            Fragment f;
            f = new MedicationOrderFragment();
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            ft.replace(R.id.main_details_fragment_container, f);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
            ft.addToBackStack(null);
            ft.commit();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:37:29.467

尝试替换您的片段：

```
protected void replaceDataFragment(Fragment fragment){
    android.app.FragmentTransaction ftr = getFragmentManager().beginTransaction();
    ftr.replace(R.id.data<id of your fragment layout>, fragment);
        ftr.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        ftr.commit();   
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:38:20.120

使用此代码，您可以使用意图启动一个新活动。尝试在您的片段中使用它：

```
getSupportFragmentManager().beginTransaction().replace(
R.id.my_container_in_xml, new MyFragment(), 0).commit(); 
```

# maven - 在 Maven 中是否可以使用其他本地存储库来安装工件？

> ID：10754417
> 
> 赞同：0
> 
> 时间：2012-05-25T12:26:19.567
> 
> 标签：maven, repository, artifacts

当我运行时`mvn install`，已编译的工件会落在我的本地存储库中，与安装远程工件的位置相同。有时这是问题所在，因为您将安全值为零的公共 jar（它们已经是公共的）与安全值最高的（您创建的）混合在一起。从非公共存储库下载的工件介于两者之间。从安全的角度来看，这种混音很难管理。

最大的问题是需要为新开发人员提供完整的存储库（是的，当然，他可以运行 maven 并等待一整天的所有插件等下载，但这是浪费时间）。删除他不应该访问的所有内容并不容易。

我试图在 maven 文档中找到一个用于选择*安装*位置的开关，但是这个文档很难搜索到，所以我什么也没找到的事实并不让我相信不存在或曾经是这样的选项未尝试创建。因此，我正在向社区查询此类解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:31:46.723

我能给出的最佳建议是使用像[Archiva](http://archiva.apache.org)、[Artifactory](http://www.jfrog.org)或[Nexus](http://nexus.sonatype.org/)（按字母顺序排列）这样的存储库管理器。此外，将文件安装到不同的位置是没有意义的，因为您需要在几个本地存储库之间更改构建，这将破坏本地存储库的想法。

# java - 如何使用 google-Gson 和 JSON.stringfy 获得相同的结果

> ID：10754418
> 
> 赞同：1
> 
> 时间：2012-05-25T12:26:20.773
> 
> 标签：java, javascript, json, gson, stringify

在我的 java 代码中，我有一个类型为 o 成员的类`Map<String,String>`。我使用 google Gson 库将对象转换为 json 字符串，反之亦然。

我想对 json.org 的 javascript 和 JSON 库做同样的事情。

问题是 javascript 没有“地图对象”，如果我使用数组来模拟地图，则 JSON.stringify over 数组的结果与 Gson over 不同`Map<String,String>`。

我还尝试使用库 jshashtable 2.1 (http://www.timdown.co.uk/jshashtable/index.html) 中的 Hashtable javascript 对象并创建自定义 toJSON 方法，但这种方法不起作用，因为 JSON 在这些case 是对自定义 toJSON 方法返回的对象进行字符串化。

这就是我得到的：

使用 java 和 Gson：

```
{
    "var_1": "value_1",
    "var_2": "value_2",
    "map": {
        "name_1": "value_1",
        "name_2": "value_2"
    }
} 
```

使用 javascript 和 JSON：

```
{
    "var_1": "value_1",
    "var_2": "value_2",
    "map": [
        ["name_1", "value_1"],
        ["name_2", "value_2"]
    ]
} 
```

有没有办法解决这个问题并从 java 和 javascript 中获取相同的“json 字符串”？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:30:24.557

> 问题是javascript没有“映射对象”......

是的，确实如此：**所有**JavaScript 对象都是映射。要获得您要查找的内容，您将创建此对象图：

```
var obj = {
    "var_1": "value_1",
    "var_2": "value_2",
    "map": {
        "name_1": "value_1",
        "name_2": "value_2"
    }
}; 
```

...并使用`JSON.stringify`它。

```
var json = JSON.stringify(obj); 
```

后面那一点`var obj =`似曾相识？那是因为它是一个 JavaScript[对象初始化器](http://ecma-international.org/ecma-262/5.1/#sec-11.1.5)，而 JSON 是对象初始化器语法的一个子集。:-) 如果您愿意，您可以通过其他方式构建该对象：

```
var obj = {};
obj.var_1 = "value_1";
obj.var_2 = "value_2";
obj.map = {};
obj.map.name_1 = "value_1";
obj.map.name_2 = "value_2"; 
```

...在调用它之后也会给你同样的东西`JSON.stringify`。

# android - 列表视图中的页脚无法正常工作

> ID：10754424
> 
> 赞同：0
> 
> 时间：2012-05-25T12:26:39.190
> 
> 标签：android, listview, footer

我想在我的屏幕上实现 heaser 和页脚，我已经尝试了代码，但问题是提交按钮和页脚之间应该有一些空间，但是在设备中它显示为按钮附加到页脚。我已经完成了一个解决方案是我给scrollview的硬编码值，但它不是正确的方法，有人可以给我适当的解决方案吗？

我的代码是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/bckcolor"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/upper"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/payment_03" >
    </RelativeLayout>

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="wrap_content"
        android:layout_height="250dp"
        android:layout_below="@+id/upper"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="10dip"
        android:layout_marginTop="15dip" >

        <RelativeLayout
            android:id="@+id/middle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/my_border"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/actntlist"
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:hint="Enter Phone number" />

            <EditText
                android:id="@+id/receivercode"
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:layout_below="@+id/actntlist"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:hint="Enter receiver code" />

            <EditText
                android:id="@+id/amount"
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:layout_below="@+id/receivercode"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:hint="Enter amount" />

            <EditText
                android:id="@+id/remarks"
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:layout_below="@+id/amount"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:hint="Enter remarks" />

            <EditText
                android:id="@+id/pin"
                android:layout_width="300dp"
                android:layout_height="wrap_content"
                android:layout_below="@+id/remarks"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:hint="Enter Pin number" />

            <Button
                android:id="@+id/submit"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_below="@+id/pin"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:text="submit" >
            </Button>
        </RelativeLayout>
    </ScrollView>

    <RelativeLayout
        android:id="@+id/bottom"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" >

        <TextView
            android:id="@+id/foot"
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:layout_alignParentBottom="true"
            android:background="@drawable/footer"
            android:text="" >
        </TextView>
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:34:50.697

您可以将底部边距设置为滚动视图，因此它会在底部留下一些空间。试试这个。

```
 <ScrollView
        android:id="@+id/scroll"
        android:layout_width="wrap_content"
        android:layout_height="250dp"
        android:layout_below="@+id/upper"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="10dip"
        android:layout_marginTop="15dip"
        android:layout_marginBottom="15dip" > 
```

# matlab - matlab：返回矩阵列中小数点后的2个数字

> ID：10754429
> 
> 赞同：0
> 
> 时间：2012-05-25T12:27:12.637
> 
> 标签：matlab, precision

抱歉，如果这是个愚蠢的问题，但我是 MATLAB 新手。我有一个包含`float`数字的大矩阵，我想更改矩阵以显示小数点后的两个数字。

当我在命令窗口中输入以下代码时：

```
 sprintf('%.2f',  ObjectTrack3(5,6)) 
```

没关系，输出是：`ans = 3.40`

但是，当我添加`sprintf('%.2f', ObjectTrack3(i,6))`代码以仅显示第 6 列中所有项目的小数点后两个数字时`ObjectTrack3`，它只会给我一个错误。

我怎样才能做到这一点？

（代码用于将单元格数组转换为矩阵）

在某人的指导下，我刚刚注意到矩阵的一个单元格的实际数字是 44.849998474121094 但我只看到 44.8500 0.400000005960465 显示为 0.4000

为什么它加零？为什么它不显示 0.4 和 44.85 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:01:49.760

我认为你在正确的轨道上，你只是在语法上遇到了一些问题。
假设这`ObjectTrack`是一个矩阵，你应该做的是：

```
sprintf('%.2f\n', ObjectTrack3(:, 6)) 
```

这会从中选择第 6^列`ObjectTrack3`并将其发送到`sprintf`命令。请注意，`sprintf`对其输入列向量的每个元素进行操作，因此`'\n'`每个元素都打印在新行中。

**编辑：**此答案还假设您只想以所需的精度*打印*列，但不更改它。如果您想要后者，请考虑 Memming 的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:58:53.297

根据@Peter 的评论，我认为你想要的是：

`ObjectTrack3 = round(ObjectTrack3 * 100) / 100;`

它应该足够直观以便理解。`sprintf`是创建字符串，而不是双打。

# android - 抱歉，此视频无法播放 - 在 android 中流式传输 rtsp

> ID：10754430
> 
> 赞同：0
> 
> 时间：2012-05-25T12:27:19.253
> 
> 标签：android, video-streaming, rtsp

我正在开发 android 应用程序来流式传输在线视频频道。现在，我想从中流式传输，`rtsp://62.220.122.4/tv1`并使用以下代码从该链接流式传输：

```
import java.io.IOException;
import android.widget.MediaController;
import android.widget.VideoView;
import android.app.Activity;
import android.content.res.Configuration;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;

public class TVStreamerActivity extends Activity {
    private VideoView mVideoView = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.videoview);

        mVideoView = (VideoView) findViewById(R.id.surface_view);

        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(mVideoView);

        mVideoView.setVideoURI(Uri.parse("rtsp://62.220.122.4/tv1"));
        mVideoView.setMediaController(mediaController);
        mVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer arg0) {
                mVideoView.start();
                Log.e("Runnbale Thread : Run MediaPlayer",
                        "MediaPlayer Prepared");
            }
        });

        mVideoView.requestFocus();
    }
} 
```

在`videoview.xml`是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.widget.VideoView
        android:id="@+id/surface_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

一切都很好，但是当我运行应用程序时，过了一会儿我看到了`Error (1, -16)`in`LogCat`并且消息`Sorry, this media cannot be played`显示在 android 设备中。

任何人都可以给我一个解决这个问题的解决方案吗？

**编辑：**在清单中我设置了`android:minSdkVersion="10"`，并且我已经对其进行了测试`Galaxy Ace S5830 (Android 2.3.6)`

提前致谢 ：）

# opengl - How to Using the #include in glsl support ARB_shading_language_include

> ID：10754437
> 
> 赞同：30
> 
> 时间：2012-05-25T12:27:42.123
> 
> 标签：opengl, glsl

I wan't to use the `#include` macro to include shader files in glsl, and I heard there is a `ARB_shading_language_include` [extension](http://www.opengl.org/registry/specs/ARB/shading_language_include.txt) support the `#include` macro. Is there anyone can give me a code snippet showing how to use the `#include` macro?

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-25T14:20:28.000

The first thing you need to understand about [shading_language_include](http://www.opengl.org/registry/specs/ARB/shading_language_include.txt) is what it *isn't*. It is not "I `#include` a *file* from the disk." OpenGL doesn't know what files are; it has no concept of the file system.

Instead, you must *pre-load* all of the files you might want to include. So you have a shader string and a filename that you loaded the string from. Essentially, you must build a virtual filesystem within OpenGL.

You use `glNamedStringARB` to upload a string to the virtual filesystem. The name of the string is its full pathname.

Once you've built your virtual filesystem, you must then, for each shader you compile, initialize the extension.

```
#version MY_OPENGL_VERSION //Whatever version you're using.
#extension GL_ARB_shading_language_include : require 
```

After the `#extension` statement, you may `#include` as you see fit.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-20T13:46:49.000

I would like to answer 0xbadf00d's question, but lack reputation.

From [ARB/shading_language_include.txt](https://www.opengl.org/registry/specs/ARB/shading_language_include.txt): "`<type>` must be `SHADER_INCLUDE_ARB`"

# google-app-engine - 在映射到 GAE 应用程序的自定义域 CNAME 上设置什么 TTL/目标？

> ID：10754439
> 
> 赞同：0
> 
> 时间：2012-05-25T12:27:49.620
> 
> 标签：google-app-engine, dns

我的一些客户在访问映射到 GAE 应用程序的自定义域时遇到问题，他们收到 HTTP 404 错误。

对我来说奇怪的是，通过[http://dziennikel.appspot.com](http://dziennikel.appspot.com) URL 访问应用程序时，他们从来没有遇到过同样的问题。

我对他们的机器没有物理访问权限，但一些远程调试指向他们 ISP 网络中某个级别的陈旧 DNS 缓存。

AFAIK 我已经正确设置了 CNAME（我的口味 TTL 很短）：

```
host                 type   destination     priority  TTL
app.dziennik.edu.pl  CNAME  ghs.google.com  10        3600 
```

域已在我的 Google Apps 面板中正确映射，并且对我和我的大多数客户来说都可以正常工作。

我想知道是否有某种方法可以提高可靠性、降低 TTL 或者将目的地添加/更改为其他东西（例如`dziennikel.appspot.com`）。这方面的指导方针是什么？您的应用程序使用哪些映射设置？

PS。我知道这与编程无关，但 GAE 支持已移至此处，并且筛选 Google Apps 支持文档没有给出任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:17:49.673

First, assuming all of the properties are as you desire, I recommend setting your DNS settings and not mess around with them any further. Yes, you can lower you TTL value (which is currently set to an hour) but if your settings won't change in the future, this isn't a problem.

How long has this been a problem? I know this isn't a direct answer, but I can state from experience that I've never had a perfect experience setting up domains with my App Engine applications and I've done it 4 times.

My recommendation is to verify that your settings are correct on your DNS and wait it out for 48 hours. If that doesn't solve the problem. If your domain still misbehaves, you may request that your customers contact their ISP but that could cost your customers if their ISP doesn't offer free support.

# c# - 如果 cmd 不能显示某些字符怎么办？

> ID：10754440
> 
> 赞同：2
> 
> 时间：2012-05-25T12:27:50.267
> 
> 标签：c#, .net, windows, cmd

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:32:17.440

这是您在控制台中使用的字体。例如，打开命令提示符并尝试粘贴 € 字符，您会看到一个问号。但是如果你右键单击控制台窗口的边框并选择属性 > 字体，然后选择 Consolas 或 Lucida 控制台，你的角色就会正常显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:32:12.323

由于您已经在使用控制台，因此您始终可以使用带有 RichTextBox 控件的简单 winforms 应用程序进行输出。如果您觉得需要，这甚至可以让您格式化输出。如果您将其保留为单一形式进行输出，它不会比控制台应用程序更复杂。而不是`Console.WriteLine`你有`rtbOutput.Text +=`.

# c# - 检测哈希表或字典中的重新散列或碰撞

> ID：10754441
> 
> 赞同：3
> 
> 时间：2012-05-25T12:27:58.673
> 
> 标签：c#, .net, dictionary, hashtable

我正在研究 .NET [Hashtable](http://msdn.microsoft.com/en-us/library/ms379571%28v=vs.80%29.aspx)类，并想尝试各个方面...

*   给定数据集中发生了多少次冲突（重新散列）
*   散列表的扩展对于多线程访问是否安全？
*   我的哈希表的当前负载因子是多少？

我如何试验或学习有关给定哈希表或字典的上述信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:53:08.960

的线程安全性`Hashtable`在[MSDN](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)中说明。如果只有一个线程写入 ，这是线程安全的`Hashtable`，这必须包括扩展。

现在，使用反射器进行一些挖掘：

负载因子存储在`loadFactor`私有字段中，如果您想检查其值，可以使用反射访问该字段。

重演更难。`Hashtable`这些不是由 rehash 以可检测方式修改的内部状态，*并且只能通过 rehash*进行修改。因此，您将不得不在这里查看其他选项，例如使用 Reflector 创建您自己的相同 Hashtable 实现，然后添加一些代码来计算重新散列。如果您这样做，您也可以将负载因子作为属性公开，以使您的生活更轻松。

# javascript - 使用 JavaScript 获取经度和纬度并将它们设置为 vars

> ID：10754445
> 
> 赞同：0
> 
> 时间：2012-05-25T12:28:22.537
> 
> 标签：javascript, google-maps

今天是我使用 Google Maps API 的第一天。现在我有一个ID为“map”的DIV，下面的代码......

```
function initializeMap() {

        var opts = {
            center: new google.maps.LatLng( 0, 0), // ignore the zero values for now
            zoom: 10,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map'), opts);
        geocoder = new google.maps.Geocoder();
} 
```

我称之为使用`window.onload = initializeMap`

好的，我想将地图放在我当前位置的中心。我知道我可以使用 long 和 lat

```
navigator.geolocation.getCurrentPosition(displayLocation);

function displayLocation(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude; 
 } 
```

现在我对如何将位置对象推回成功处理程序 displayLocation 有点迷茫。无论如何，我怎样才能将纬度和经度传递给 initializeMap() 函数，就像这样......

```
center: new google.maps.LatLng( latitude, longitude) 
```

我目前正在查看 Google Maps API 文档，因为我确定有一种方法可以得到它，但我想在不同的函数中使用纬度、经度，所以我想我在问如何使这些变量可访问对所有函数（如全局但不是坏全局），而不是仅对`displayLocation`函数可用。对不起，如果这措辞不好......如果我让人们感到困惑，请说，我会改写这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:31:30.387

只需声明

```
var latitude, longitude; 
```

进入父范围，所以函数是

```
function displayLocation(position) {
    latitude = position.coords.latitude; /* no var keyword */
    longitude = position.coords.longitude; 
} 
```

当然，您应该选择定义这些变量的范围取决于您。另外，请注意，它们将`undefined`直到`displayLocation`不被调用

# c# - 从数据集中填充 DataGridView

> ID：10754446
> 
> 赞同：1
> 
> 时间：2012-05-25T12:28:29.377
> 
> 标签：c#, .net, winforms

我有一个`DataSet`和一个`DataGridView`。如果我单击第一个按钮，我想显示第一个表中的数据，如果我单击第二个按钮，我想显示第二个表中的数据。

我尝试了以下

```
if(b==1)
{
    dataGridView1.DataSource = ds.Table1;
}
else if(b==1)
{
    dataGridView1.DataSource = ds.Table2;
} 
```

但我看到的是一个空的`DataGridView`（没有列名）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:30:26.177

DataSet 在`Tables`集合中添加表，您可以通过它们的索引或表名从中访问这些表。

为您的按钮创建公共事件，在 Form_Load 上创建如下：

```
btn1.Click += new EventHandler(Button_Click);
btn2.Click += new EventHandler(Button_Click); 
```

然后事件方法为：

```
void Button_Click(object sender, EventArgs e)
        {
            if ((sender as Button) == btn1)
            {
                dataGridView1.DataSource = ds.Tables[0];
            }
            else if ((sender as Button) == btn2)
            {
                dataGridView1.DataSource = ds.Tables[1];
            }
        } 
```

////

```
if(b==1)
{
dataGridView1.DataSource = ds.Tables[0];
}
else if(b==2)
{
dataGridView1.DataSource = ds.Tables[1];
} 
```

例如

```
DataTable dt = new DataTable("Table1");
DataTable dt2 = new DataTable("Table2");

DataSet ds = new DataSet();
ds.Tables.Add(dt);
ds.Tables.Add(dt2);

//Now you can access these as:

if(b==1)
    {
    dataGridView1.DataSource = ds.Tables["Table1"];
    }
    else if(b==2)
    {
    dataGridView1.DataSource = ds.Tables["Table2"];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:32:39.213

分配数据源后是否调用了 databind ？

```
dataGridView1.DataBind() 
```

# iphone - 更改 UIImage 的像素颜色值

> ID：10754448
> 
> 赞同：1
> 
> 时间：2012-05-25T12:28:39.830
> 
> 标签：iphone, ios, core-animation, core-graphics

我想改变 UIImage 中所有像素的颜色。此代码成功地更改了单个点的颜色，但是当我在整个图像的循环中运行它时，我的图像消失了。首先，我读取像素颜色值，然后将更改应用于该像素的颜色。循环也只为 i 的 0 值运行。下面是代码

```
 UIImage *grayImage=[UIImage imageWithCGImage:source.CGImage];
            for(int i=0;i<imageToTest.frame.size.width;i++){
                for(int j=0;j<imageToTest.frame.size.height;j++){
                    NSLog(@"%d",i);
                    CGPoint point=CGPointMake((CGFloat) i,(CGFloat) j);
                    if (!CGRectContainsPoint(CGRectMake(0.0f, 0.0f, source.size.width, source.size.height), point)) {
                        return nil;
                    }

                    NSInteger pointX = trunc(point.x);
                    NSInteger pointY = trunc(point.y);
                    CGImageRef cgImage = source.CGImage;
                    NSUInteger width = CGImageGetWidth(cgImage);
                    NSUInteger height = CGImageGetHeight(cgImage);
                    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
                    int bytesPerPixel = 4;
                    int bytesPerRow = bytesPerPixel * 1;
                    NSUInteger bitsPerComponent = 8;
                    unsigned char pixelData[4] = { 0, 0, 0, 0 };
                    CGContextRef context = CGBitmapContextCreate(pixelData, 
                                                                 1,
                                                                 1,
                                                                 bitsPerComponent, 
                                                                 bytesPerRow, 
                                                                 colorSpace,
                                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
                    CGColorSpaceRelease(colorSpace);
                    CGContextSetBlendMode(context, kCGBlendModeCopy);

                        // Draw the pixel we are interested in onto the bitmap context
                    CGContextTranslateCTM(context, -pointX, -pointY);
                    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, (CGFloat)width, (CGFloat)height), cgImage);
                    CGContextRelease(context);

                        // Convert color values [0..255] to floats [0.0..1.0]
                    CGFloat red   = (CGFloat)pixelData[0] / 255.0f;
                    CGFloat green = (CGFloat)pixelData[1] / 255.0f;
                    CGFloat blue  = (CGFloat)pixelData[2] / 255.0f;
                    CGFloat alpha = (CGFloat)pixelData[3] / 255.0f;
                    UIColor *currentPixelColor;
                    CGFloat Answer=sliderValue/10;
                    red=red*Answer;
                    green=green*Answer;
                    blue=blue*Answer;
                    alpha=alpha*Answer;
                    currentPixelColor=[UIColor colorWithRed:red green:green blue:blue alpha:alpha];

                    int width2 = source.size.width;
                    int height2 = source.size.height;

                    CGColorSpaceRef colorSpace2 = CGColorSpaceCreateDeviceRGB();    
                    CGContextRef context2 = CGBitmapContextCreate (nil,
                                                                   width2,
                                                                   height2,
                                                                   8,
                                                                   0,
                                                                   colorSpace2,
                                                                   kCGImageAlphaPremultipliedFirst);

                    CGColorSpaceRelease(colorSpace2);

                    if (context2 == NULL) {
                        return nil;
                    }

                    CGContextDrawImage(context2,
                                       CGRectMake(0, 0, width2, height2), grayImage.CGImage);

                    CGContextSetFillColorWithColor(context2, currentPixelColor.CGColor);
                    CGContextFillRect(context2, CGRectMake(point.x, point.y, 1, 1));

                    grayImage = [UIImage imageWithCGImage:CGBitmapContextCreateImage(context2)];
                    CGContextRelease(context2);

                }

            }

            return grayImage;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:07:55.660

我怀疑您遇到了这种情况并返回 nil （因此您的图像消失了）：

```
if (!CGRectContainsPoint(CGRectMake(0.0f, 0.0f, source.size.width, source.size.height), point)) {
    return nil;
} 
```

我认为您的迭代应该超过 source.size.width 和 source.size.height 而不是包含视图的尺寸。

附带说明一下，您可能正在迭代到高水平。仅在 CGContextRef 上创建并应用所有更改可能是可能的（当然更有效）。老实说，我对您的算法的研究还不够仔细，但是您应该尝试将不需要一遍又一遍地重复的所有内容都排除在循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T23:42:44.240

您应该考虑使用 Core Image 过滤器来进行颜色调整。它们非常快，而且非常易于使用。Erica Sadun 的《The iOS 5 Developer's Cookbook》一书中有一个关于使用 CI 的章节，非常清晰且易于使用。它还包括一个针对操作系统错误的解决方法，该错误会阻止您将修改后的图像从核心图像恢复到 UIImage。

# php - 在非对象错误上调用成员函数

> ID：10754450
> 
> 赞同：0
> 
> 时间：2012-05-25T12:28:43.650
> 
> 标签：php, wordpress

我在[这里使用此代码](https://github.com/xPaw/PHP-Minecraft-Query)从我的 Minecraft 服务器获取信息。它使用静态 .php 文件按预期完成，但在将其移动到 WordPress 的本地副本后，我收到以下错误：

```
Fatal error: Call to a member function GetPlayers() on a non-object in C:\...\home.php on line 125 
```

我很确定我正确地移动了所有东西。在第 125 行，是这段代码：

```
<div class="online group container">
      <h2> Who's online </h2>
          <?php if( ( $Players = $Query->GetPlayers( ) ) !== false ): ?>
          <?php foreach( $Players as $Player ): ?>
          <div class="player">                      
            <span class="p"  title="<?php echo htmlspecialchars( $Player ); ?>" data-player="<?php echo htmlspecialchars( $Player ); ?>">☺&lt;/span>
          </div><!-- /.player --> 
```

这就是我在 doctype 之前在 header.php 中调用 PHP 类的方式。

```
<?php

  define( 'MQ_SERVER_ADDR', '108.170.3.138:25643' );
  define( 'MQ_SERVER_PORT', 25643 );
  define( 'MQ_TIMEOUT', 1 );

  require bloginfo('template_url') . 'inc/avatars/MinecraftQuery.class.php';

  $Timer = MicroTime( true );
  $Query = new MinecraftQuery( );

  try
  {
    $Query->Connect( MQ_SERVER_ADDR, MQ_SERVER_PORT, MQ_TIMEOUT );
  }
  catch( MinecraftQueryException $e )
  {
    $Error = $e->getMessage();
   echo 'error. <br>'. $Error;
  }

?> 
```

这很奇怪，因为它在没有 WordPress 的情况下工作得很好，但是一旦我移动它，它就坏了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:47:14.360

创建将返回查询的函数

函数.php

```
function get_MQ_Query() {
  define( 'MQ_SERVER_ADDR', '108.170.3.138:25643' );
  define( 'MQ_SERVER_PORT', 25643 );
  define( 'MQ_TIMEOUT', 1 );

  require bloginfo('template_url') . 'inc/avatars/MinecraftQuery.class.php';

  $Timer = MicroTime( true );
  $Query = new MinecraftQuery( );

  try
  {
    $Query->Connect( MQ_SERVER_ADDR, MQ_SERVER_PORT, MQ_TIMEOUT );
  }
  catch( MinecraftQueryException $e )
  {
    $Error = $e->getMessage();
   echo 'error. <br>'. $Error;
  }
  return $Query;
} 
```

主页.php

```
$Query = get_MQ_Query();
?><div class="online group container">
  <h2> Who's online </h2> 
```

# c# - 如何在 Web 服务中返回处理方法（C#）的状态？

> ID：10754453
> 
> 赞同：0
> 
> 时间：2012-05-25T12:29:01.620
> 
> 标签：c#, asp.net, web-services, webservices-client

我在 .net Web 服务中为“从数据库读取数据”、“数据传输”和“插入到另一个数据库”创建了 3 种方法。我的问题是如何将每个方法的状态（自定义消息）返回给请求的客户端？例如：在方法一运行时，客户端状态必须显示为“正在读取数据库处理”。当第二种方法运行时，必须显示“读取数据库完成。数据传输处理”。可能吗？还是有任何替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:40:59.320

看看[SignalR](https://github.com/SignalR/SignalR) .. 它很容易使用，听起来它可以解决你的问题。

# jsf-2 - JSF2：未找到转换器属性：

> ID：10754456
> 
> 赞同：1
> 
> 时间：2012-05-25T12:29:14.837
> 
> 标签：jsf-2, migration, converter

我正在将我们的 webapp 从 JSF1.2 升级到 JSF2。我们的 VDL 是 JSP。我们正在使用 Richfaces 3.3.3

我有 ah:selectOneMenu 和 h:outputText 使用以下属性：

```
converter="SelectObjectConverter" 
```

“SelectObjectConverter”在 faces-config.xml 中定义：

```
<converter>
  <converter-id>SelectObjectConverter</converter-id>
  <converter-class>com.vc.mm.utils.jsf.converter.SelectObjectConverter</converter-class>
</converter> 
```

**该转换器在 JSF1.2 中按预期工作，但在 JSF2 中却没有**。

这是错误消息：

> 异常：org.apache.jasper.el.JspELException：/bla/bla/foobar.jsp (14,1) 'SelectObjectConverter' 无法从类 java.lang.String 强制转换为接口 javax.faces.convert.Converter

如果我使用这种语法：

```
<f:converter converterId="SelectObjectConverter"/> 
```

这是工作！但是，由于我们有很多使用其他语法的文件，我想找出原因。

faces-config 文件头已更新为：

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:28:52.173

在我们的 ear/lib 中，有一个 jbpm.jar 和 juel**.jar。

juel.jar 是 EL 的开源实现。删除所有“juel”罐子解决了这个问题。

我猜 juel 正在向 JSF 提供（错误的）EL 实现。

# java - 如何使用javascript知道安装的jvm是32位还是64位

> ID：10754464
> 
> 赞同：2
> 
> 时间：2012-05-25T12:29:45.537
> 
> 标签：java, javascript, deployment, jnlp, java-web-start

我想知道安装在用户机器上的 JVM 的位版本，并基于此我想使用 Java WebStart 安装我的应用程序的不同版本。我认为可以从浏览器上安装的 java 插件中提取此信息。

我不想要操作系统或 CPU 位版本，因为 32 位 JVM 可以安装在 64 位机器上。

这可以使用javascript完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:46:36.357

> 这可以使用javascript完成吗？

没有。没有 Java 的帮助（或其他更复杂的方法）。

但是，JWS 可以根据启动文件中列出的详细信息，按操作系统和体系结构部署代码（和本机等）。

有关详细信息，请参阅[JNLP 文件语法](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html)，尤其是[`resources`元素](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources)部分。表格总结：

*   `resources`- 描述应用程序所需的所有资源。
    *   `os`指定应考虑资源元素的操作系统。
    *   `arch`指定应考虑资源元素的体系结构。

# ios - ios uiscrollview delayscontenttouches 仅用于垂直滑动

> ID：10754466
> 
> 赞同：2
> 
> 时间：2012-05-25T12:29:52.683
> 
> 标签：ios, uiscrollview, swipe

我在 UIView 的右侧使用 UIScrollView。ScrolView 包含许多 UIImageView 项目，我只允许在滚动视图上进行垂直滚动。ImageView 项目可以拖到滚动视图之外以放置在另一个视图上。UIScrollview 设置为 delaysContentTouches = YES。这允许即使在触摸其中一个内容项时也可以快速滚动条的不错功能，但另一方面，当触摸其中一个内容项以将其拖动到另一个视图时，它会引入大约 0.15 秒的小延迟.

设置 delaysContentTouches = NO，允许使用水平滑动手势拖动内容项，但当然不允许垂直滑动手势上的滚动视图垂直滚动。

所以我想保持delaysContentTouches = YES，但不知何故只在垂直滑动手势上使用它，而对于水平滑动我想要一种行为，好像delaysContentTouches = NO

有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:15:51.063

尝试设置 delaysContentTouches = YES 并将内容视图的宽度设置为等于滚动视图的宽度，这样就不可能进行水平滚动。

平移手势识别器*可能会*很快识别出不可能进行水平滚动，从而提前结束延迟。或者也许只有在没有 H 或 V 滚动可能的情况下才有效。

# iphone - 在段单击时切换图像

> ID：10754472
> 
> 赞同：2
> 
> 时间：2012-05-25T12:30:24.633
> 
> 标签：iphone, objective-c, cocoa-touch

我今天开始了目标 C，在过去的一个小时里，我一直在尝试解决如何在单击按钮时切换图像，这是一个带有 2 段的分段按钮，第一段*应*加载 0.jpg，第二段应加载 1 .jpg。

我可以让它从 0->1 改变但不能变回来，所以好像只有第一个开关被注册，有什么想法吗？

（如您所见，我尝试过调试，一切都应该检查：

```
2012-05-25 13:22:31.173 Clock2[3398:f803] Segment clicked: 0
2012-05-25 13:22:31.174 Clock2[3398:f803] 0.jpg
2012-05-25 13:22:31.367 Clock2[3398:f803] Segment clicked: 1
2012-05-25 13:22:31.368 Clock2[3398:f803] 1.jpg 
```

.

```
- (IBAction)clockselect:(id)sender {
    NSString* segindex= [NSString stringWithFormat:@"%d", clockselectout.selectedSegmentIndex];
    NSString* type= @".jpg";
    NSString* filename= [segindex stringByAppendingString:type ];
    if (clockselectout.selectedSegmentIndex == '0') {
       NSLog(@"Segment clicked: %d", clockselectout.selectedSegmentIndex);
       // NSLog(filename);
        [clockimg setImage:[UIImage imageNamed: filename]]; 
    } else {
       NSLog(@"Segment clicked: %d", clockselectout.selectedSegmentIndex);
       // NSLog(filename);
        [clockimg setImage:[UIImage imageNamed: filename]]; 
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:50:22.403

```
-(IBAction)segmentControleChanged
 {

  switch(self.yourSegmet.selectedSegmentIndex)
    {

        case 0:
         [clockimg setImage:[UIImage imageNamed: @"image1"]];
         break;

          case 1:
          [clockimg setImage:[UIImage imageNamed:@"image2"]];
           break;

            default:
             break;
       }

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:43:02.300

你必须使用

```
if (clockselectout.selectedSegmentIndex == 0) { 
```

比较 int 值。

你总是可以从 0 交换到 1 因为

```
if (clockselectout.selectedSegmentIndex == '0') { 
```

总是假的；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:11:28.057

如果只有 == 是问题，那么在日志中它不应该打印

2012-05-25 13:22:31.367 Clock2[3398:f803] 段点击：1 2012-05-25 13:22:31.368 Clock2[3398:f803] 1.jpg

因为如果它没有进入该块，那么它不应该打印在日志之上。我正确吗？那么你是如何获得日志之上的？

# mysql - 不同大小的列表

> ID：10754476
> 
> 赞同：0
> 
> 时间：2012-05-25T12:30:38.080
> 
> 标签：mysql, list, optimization, redundancy

我的问题是我有一堆“对象”。这些对象可以有一个最多包含 3 个单词的单词列表，也可以没有。对于 mysql，每个对象我已经有一行，我试图弄清楚如何合并这些单词。这是我的方法：

1：每个单词我有 3 个额外的列。但是，当没有 3 个单词时，这会留下空的、多余的单元格。

2：有 1 列，每个单词由该列中的空格分隔。当没有单词时，这会留下一个冗余单元格，并且还需要额外的处理

3：制作另一个表来保存带有参考编号的单词，该参考编号将其引用到相应的对象。这需要一个额外的查询，但我认为冗余度最低。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:40:21.050

我总是会使用额外的桌子去＃3。这确保了将来如果您需要在所有对象上使用 SQL 进行任何“单词”搜索或更改结构以添加更多单词或减少单词，那么不会有任何问题。此外，这些额外的查询对于 RDBMS 服务器的负担通常非常小。此外，所有其他选项也需要 PHP 进行某种处理（假设它是编码语言），这也会消耗一些 CPU 周期。但由于#3 将来会很好地扩展，我更愿意选择#3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:49:54.140

编号 #3 有一个名为**words (id_word,word)**的表和其他名为**object_words (id_object,id_word)**的表，它们具有 innodb 表类型，以确保完整性

# ruby-on-rails-3 - 无法使用 GET 参数中的模型名称创建 mongoid 查询

> ID：10754479
> 
> 赞同：0
> 
> 时间：2012-05-25T12:30:41.523
> 
> 标签：ruby-on-rails-3, mongoid

我在 mongoid 中的查询

```
model_name = params[:state].classify.constantize
@result = model_name.find(:name => params[:name]) 
```

上面的代码不起作用我得到一个错误的**常量名称 California** ，因为下面的代码起作用

```
@result = California.find(:name => params[:name]) 
```

我的 model_name 变量由我项目中的模型数据“California”组成。我想根据传入的参数查询我的数据库。该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:02:36.020

您是否发布了确切的错误消息？这就是我得到的

```
'california'.classify # => "Californium" 
```

我打赌你没有`Californium`模型:)

# facebook - 使用 Cron 发布到 Facebook 页面墙

> ID：10754481
> 
> 赞同：0
> 
> 时间：2012-05-25T12:30:49.470
> 
> 标签：facebook, facebook-graph-api, cron

我正在为工作中的客户制定一个想法，以便能够提前将元素发布到他们的 Facebook 页面墙上。这使他们可以推送文章和状态更新一次，而 CRON 工作将完成实际工作，将帖子发布到墙上。

我已经阅读`offline_access`了 Facebook API 中的弃用，并且您现在获得了一个扩展的长期访问代码。但是，我不太确定如何使用访问代码不时地运行 CRON 作业。

有没有人知道如何作为 CRON 工作登录并发布到 Facebook 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:12:18.043

你可以做什么创建一个页面，客户可以在其中“安排”他们所有的帖子。当他们访问该网站时，请他们登录到 facebook，您可以在其中获得`access_token`用于 cron 的。

为此，请按照[离线访问指南](http://developers.facebook.com/roadmap/offline-access-removal/)获取长期访问令牌。这也将使您获得长期的`access_token`页面访问权限。您将需要使用 cron 中的长期页面`access_token`来发布计划的帖子 - 该位与进行常规 API 调用相同，但使用页面访问令牌。

# c# - 确保列表中的唯一标识符

> ID：10754483
> 
> 赞同：0
> 
> 时间：2012-05-25T12:31:05.000
> 
> 标签：c#, uniqueidentifier

我正在创建一个 Excel 加载项，它允许用户通过指定域名和他们希望用于生成 PURL 的列来生成 PURL [。](http://purls.source4.com/index2.htm)

因此，例如，用户可以指定**stackoverflow.com**的域以及列**first name**和**last name**。生成的 PURL 将是：

`http://stackoverflow.com/JamesHill`.

此插件的唯一真正挑战是确保 PURL 的唯一性。假设有两个 James Hill。在这种情况下，应生成以下 PURL：

```
http://stackoverflow.com/JamesHill
http://stackoverflow.com/JamesHill1 
```

**问题**

假设我`List<CustomObject>`每个都包含一个 PURL 属性（字符串），那么确保 PURL 唯一性的最佳方法是什么。我想我正在寻找与 SQL`OVER`和`PARTITION BY`.

任何建议，将不胜感激。

**附加信息**

在 Excel 中生成 PURL 后，数据将返回给我们的客户进行数据处理。在某个时候，数据将被导入到处理我们的 PURL 服务器请求的数据库中。加载项的目的是允许非程序员快速生成 PURL 并将它们返回给客户，而无需程序员参与。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:44:55.270

两种最常见的解决方案是

**1）**`HashSet<K>`如果您只想测试密钥的唯一性，请使用 a 。

```
var purlsSet = new HashSet<string>();
purlsSet.Add("http://stackoverflow.com/JamesHill");
...
if (purlsSet.Contains("http://stackoverflow.com/JamesHill") {
    ...
} 
```

**2）**`Dictionary<K,V>`如果要存储键和值，请使用 a 。

```
var purlsDict = new Dictionary<string, CustomObject>();
CustomObject customObject = ...;
purlsDict.Add("http://stackoverflow.com/JamesHill", customObject);
...

if (purlsDict.ContainsKey("http://stackoverflow.com/JamesHill") {
    ...
}

// OR

if (purlsDict.TryGetValue("http://stackoverflow.com/JamesHill", out customObject) {
    ...
} 
```

您还可以使用 a `OrderedDictionary`，它结合了列表和字典的功能，或者`SortedDictionary<K,V>`如果您希望条目始终被排序，则可以使用 a 。

# asp.net-mvc - 如何为 MVC 项目中的所有模型实现“DropCreateDatabaseIfModelChanges”？

> ID：10754484
> 
> 赞同：0
> 
> 时间：2012-05-25T12:31:05.593
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

有没有办法可以将 DropCreateDatabaseIfModelChanges 应用于 Global.asax 的 Application_Start 中的所有模型，而不是像这样对每个模型使用它。

```
Database.SetInitializer<MovieDBContext>(new MovieInitializer()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:34:04.877

不。如果您有多种类型的上下文访问同一个数据库，“诀窍”是创建一个特殊的上下文，其中将包含您的所有模型并将其仅用于数据库初始化。

# iphone - 分发证书错误：“此证书尚未生效。”

> ID：10754486
> 
> 赞同：10
> 
> 时间：2012-05-25T12:31:05.723
> 
> 标签：iphone, app-store-connect

我已经从 itunesconnect 网站下载了分发证书。

通过双击我将它添加到钥匙串访问。

但在钥匙串访问中，它向我显示“此证书尚未有效”。

那么问题是什么？

提前谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T12:32:15.940

检查证书和本地计算机上的有效日期和到期日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:36:02.420

您是否已将 .cer 文件和分发配置文件正确安装到您的 MAC？请从钥匙串中删除它，重新启动 XCode 并尝试再次安装 .cer 文件和配置文件

# html - 我无法显示基于 div 的菜单

> ID：10754488
> 
> 赞同：0
> 
> 时间：2012-05-25T12:31:21.370
> 
> 标签：html, css, menu

我在标签内使用`ul`和标签创建了一个菜单。`il``div`

```
<div class="menu">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
        <li><a href="#">FAQ</a></li>
        <li><a href="#">News</a></li>
    </ul>
</div> 
```

..将以下样式应用于菜单：

```
.menu
{
    background-position: center;
    clear: left;
    float: left;
    padding: 0;
    background: #CBC396 url(metaltop-gray.gif) repeat-x top;
    border-bottom: 4px solid black;
    border-top: 1px solid #7E7567;
    width: 100%;
    overflow: auto;
    font-family: Verdana, sans-serif;
    border-top-color: #CCCCCC;
    border-bottom-color: black;
}
.menu ul {
   clear:left;
   float:left;
   list-style:none;
   margin:0;
   padding:0;
   position:relative;
   left:50%;
   text-align:center;
}
.menu ul li {
   display:block;
   float:left;
   list-style:none;
   margin:0;
   padding:0;
   position:relative;
   right:50%;
}
.menu ul li a {
   display:block;
   margin:0 0 0 1px;
   padding:3px 10px;
   background: #CBC396 url(metaltop-gray.gif) top repeat-x;
   color:#000;
   text-decoration:none;
   line-height:1.3em;
}
.menu ul li a:hover {
   background:#369;
   color:#fff;
}
.menu ul li a.active,
.menu ul li a.active:hover {
   color:#fff;
   background:#000;
   font-weight:bold;
} 
```

当我在 Google Chrome 中运行页面并调整页面大小时，菜单消失了。此外，这个菜单永远不会出现在 IE 中。有什么问题？
===================编辑=========================
请查看
页面时的图像全屏菜单没问题
![在此处输入图像描述](../Images/9ca78ed7cda89e7b0fb0755c1064d16b.png)

* * *

但是当我调整页面大小时
![在此处输入图像描述](../Images/fdd2d6f7b22bbc0a8d493dce2f20a307.png)
，就像您在图像中看到的那样，菜单变成隐藏并且不滚动

**正如我提到的，在 IE 菜单中永远不会显示！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:45:15.053

试试这个代码它可能工作正常，只需更改您的`.menu`：

```
.menu {
  margin: 0 auto;
  padding: 0;
  border-top: 1px solid #CCCCCC;
  border-bottom: 4px solid black;
  width: 100%;
  clear: left;
  float: left;
  overflow: visible;
  font-family: Verdana, sans-serif;
  background: #CBC396 url(metaltop-gray.gif) repeat-x top;
} 
```

试试这个它应该在所有浏览器中都能正常工作。

```
<div class="menuwrapper">
<div class="menu">
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
    <li><a href="#">FAQ</a></li>
    <li><a href="#">News</a></li>
</ul>
</div>
</div> 
```

和

```
.menuwrapper {
 background: #CBC396 url(metaltop-gray.gif) repeat-x top;
 width: 100%;
 height: auto;
 padding: 0;
 margin:0;
 border-top: 1px solid #7E7567;
 border-top-color: #CCCCCC;
 border-bottom-color: black;
 border-bottom: 4px solid black;

 }

.menu
{
    margin: 0 auto;
    padding: 0;
    background: #CBC396 url(metaltop-gray.gif) repeat-x top;
    width: 340px;
    overflow: auto;
    font-family: Verdana, sans-serif;
}
.menu ul {
   float:left;
   list-style-type:none;
   margin:0;
   padding:0;
   text-align:center;
}
.menu ul li {
   display:block;
   float:left;
   list-style:none;
   margin:0;
   padding:0;
}
.menu ul li a {
   display:block;
   margin:0 0 0 1px;
   padding:3px 10px;
   background: #CBC396 url(metaltop-gray.gif) top repeat-x;
   color:#000;
   text-decoration:none;
   line-height:1.3em;
}
.menu ul li a:hover {
   background:#369;
   color:#fff;
}
.menu ul li a.active,
.menu ul li a.active:hover {
   color:#fff;
   background:#000;
   font-weight:bold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:22:07.463

这是我机器上的正常现象。可能是因为您没有发布所有代码。如果您删除所有“位置：相对”和所有定位属性，它会有所帮助。

我想你想在中间对齐菜单使用这个命令会更好。

```
.menu ul {
  list-style:none;
  margin:0 auto;
  padding:0;
  width: 350px;
 }
.menu ul li {
  display:block;
  float:left;
  list-style:none;
  margin:0;
  padding:0;
 } 
```

您的代码在我的机器上显示此内容，并且在任何尺寸的 chrome 上显示相同。我想帮忙，但我不知道你的问题是什么。

![在此处输入图像描述](../Images/64aba4009e36cd395ca577a7019020f4.png)

# java - 我的 Java 缓存线程安全且高效吗？

> ID：10754492
> 
> 赞同：1
> 
> 时间：2012-05-25T12:31:39.890
> 
> 标签：java, multithreading, performance, thread-safety, guava

我已经实现了一个小助手类，它为枚举的 valueOf 方法提供了一个简单的故障安全实现。这意味着如果找不到该值，它将返回 null 而不是异常。

这是代码：

```
import com.google.common.collect.ImmutableMap;
import com.google.common.collect.Maps;

import java.io.Serializable;
import java.util.EnumSet;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

/**
 * <p>
 * This permits to easily implement a failsafe implementation of the enums's valueOf method
 * </p>
 *
 * <p>
 * Basic usage exemple on an enum class called MyEnum:
 * FailSafeValueOf.get(MyEnum.class).valueOf("EnumName");
 * </p>
 *
 * @author Sebastien Lorber <i>(lorber.sebastien@gmail.com)</i>
 */
public class FailSafeValueOf<T extends Enum<T>> implements Serializable {

    /**
     * This will cache a FailSafeValueOf for each enum so that we do not need to recompute a map each time
     */
    private static final Map< Class<? extends Enum<?>> , FailSafeValueOf<? extends Enum<?>> >  CACHE = Maps.newHashMap();

    private final Map<String,T> nameToEnumMap;
    private FailSafeValueOf(Class<T> enumClass) {
        Map<String,T> map = Maps.newHashMap();
        for ( T value : EnumSet.allOf(enumClass)) {
            map.put( value.name() , value);
        }
        this.nameToEnumMap = ImmutableMap.copyOf(map);
    }

    /**
     * Returns the value of the given enum element
     * If the element is not found, null will be returned, and no exception will be thrown
     * @param enumName
     * @return
     */
    public T valueOf(String enumName) {
        return nameToEnumMap.get(enumName);
    }

    /**
     * Get a failsafe value of implementation for a given enum
     * @param enumClass
     * @param <U>
     * @return
     */
    public static <U extends Enum<U>> FailSafeValueOf<U> get(Class<U> enumClass) {
        FailSafeValueOf<U> fsvo = (FailSafeValueOf<U>)CACHE.get(enumClass);
        if ( fsvo == null ) {
            synchronized (FailSafeValueOf.class) {
                fsvo = (FailSafeValueOf<U>)CACHE.get(enumClass);
                if ( fsvo == null ) {
                    fsvo = new FailSafeValueOf<U>(enumClass);
                    CACHE.put(enumClass,fsvo);
                }
            }
        }
        return fsvo;
    }

} 
```

因为我不希望在每次访问时创建一个新的 FailSafeValueOf 的（小）开销，所以我制作了一个缓存，为每个已经访问过的枚举保存一个已经构建的 FailSafeValueOf 实例。

我不习惯处理并发。在这种情况下，并发访问可能不是大问题，因为 FailSafeValueOf 是不可变的，并且同一枚举的 get 方法可以返回 2 个不同的 FailSafeValueOf 实例。但是我想知道我的线程安全实现是否可行，以及它是否真的是线程安全的？（主要用于学习目的）

我不想让我的方法同步，因为一段时间后，所有的FailSafeValueOf都在缓存中创建，不需要禁止并发线程进入get方法。

所以我所做的是首先检查是否有缓存未命中，然后创建一个自动同步的块：再次检查缓存并最终创建实例。它是线程安全的并且是满足这种需求的方法吗？

顺便说一句，枚举通常具有少量值。在这种情况下，HashMap 是一个合适的结构吗？迭代 EnumSet 并获得适当的值是否比使用缓存更快？

* * *

**编辑：**

请注意，我的课程不是很有用，因为 Guava 团队已经关联了一个 Enums.getIfPresent() 方法，它返回一个 Optional

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:46:23.843

您的类不是线程安全的，因为您没有围绕该`CACHE.get()`方法进行同步。这假设`Maps.newHashMap()`返回一个`HashMap`而不是一个`ConcurrentHashMap`类。您可以在此代码段中看到这一点：

```
 // you need to move your synchronized block out to here
    FailSafeValueOf<U> fsvo = (FailSafeValueOf<U>)CACHE.get(enumClass);
    if ( fsvo == null ) {
        synchronized (FailSafeValueOf.class) {
           ...
           CACHE.put(enumClass,fsvo);
        }
    } 
```

如果经常调用该方法，您将需要移动`synchronized`或`CACHE.get(...)`切换到使用。`ConcurrentHashMap`问题是`HashMap`当当前线程正在读取它时，它会被另一个线程更新——这很容易因为竞争条件而导致问题。

尽管略有不同，但您还应该查看[“双重检查锁定”](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)类文档，以了解更多尝试将自己从同步中解救出来的困难。

最后，我将在`CACHE`对象而不是类上进行同步，除非您确实需要该锁定粒度，否则不推荐使用该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:50:52.627

这是有问题的：

```
synchronized (FailSafeValueOf.class) 
```

您应该只在私有成员上同步。类对象是可公开访问的，其他代码也可能选择锁定它，从而导致潜在的死锁。

此外，允许并发获取的正确解决方案是读写锁，而不是跳过锁。如果您当前的代码在编写时读取，您可能会感到各种悲伤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T10:16:33.343

我会用

```
private static final Cache<Class<?>, FailSafeValueOf<?>> CACHE
    = CacheBuilder.newBuilder().build(
        new CacheLoader<Class<?>, FailSafeValueOf<?>>() {
            @Override
            public FailSafeValueOf<?> load(Class<?> key) throws Exception {
                return new FailSafeValueOf(key);
            }
    }); 
```

以最少的工作为您提供最大的[灵活性](http://code.google.com/p/guava-libraries/wiki/CachesExplained)。此外，您可以非常确定它可以正确且快速地工作。

# python - python eclipse依赖插件-m2eclipse之类的

> ID：10754496
> 
> 赞同：0
> 
> 时间：2012-05-25T12:32:08.597
> 
> 标签：python, eclipse, pydev

有没有用于python依赖管理的eclipse插件？就像 M2Eclipse 为 maven 项目所做的那样？因此，当我使用 pydev 开发 python 时，我可以解决所有依赖关系并摆脱所有错误。

如果没有这样的插件，我如何解决依赖关系，我必须在本地安装依赖模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:23:51.410

到目前为止，我发现唯一可用的是 PyFlakes，它会进行某种程度的依赖检查和导入验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:59:40.903

[通常，您使用 setuptools/ pip](http://www.pip-installer.org/en/latest/index.html)和[Python Package Index](http://pypi.python.org/pypi)处理 Python 依赖项。作为最终用户，您将调用`pip install mypackage`并且依赖项将被自动解决。

对于开发来说，分发一个*requirements.txt*是一个常见的工作流程，它可以通过[virtualenv](http://pypi.python.org/pypi/virtualenv)安装在一个单独的环境中。现实生活中的例子：[requirements.txt](https://github.com/ametaireau/pelican/blob/master/dev_requirements.txt)和[开发者文档](http://readthedocs.org/docs/pelican/en/2.8/contribute.html)

# java - 处理多线程事件

> ID：10754499
> 
> 赞同：0
> 
> 时间：2012-05-25T12:32:15.457
> 
> 标签：java, multithreading, network-programming

我正在实现 TCP 的简单版本，但缺乏多线程技术。主线程控制2个子线程：

*1\. timer（倒计时，如果超时，通知主线程再做一些工作）*

*2.监听传入的数据包，永远循环。如果收到数据包，则更新主线程中的一些数据*

当某个信号发生时，主线程应该采取行动。

我没有事件处理的经验，并设计了一些信号来通知主线程。我应该从哪里开始？例如，子线程更新主线程私有字段。或者我应该创建一些事件？

这是主线程的一些伪代码：

```
while(true){
  event: send data ,then ...
  event: timeout , then send packet again
  event: packet received, then update data in private filed 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:44:27.543

如果您不熟悉 Java 中的多线程概念，我建议您先阅读本教程：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

讨论您的具体问题，您应该有两个线程： - 一个用于侦听您的套接字，它将扩展线程。它应该在构造时接收对您的主要对象的引用并继续侦听您的套接字。当有东西到达时，该线程将调用主对象的处理例程以采取行动。仅在忙于等待时要小心-在套接字未准备好时让出一段时间。- 您的计时器可以是 TimerTask 的扩展。请查看[http://www.cloudhadoop.com/2012/01/timers-in-java-create-timer-in-java.html](http://www.cloudhadoop.com/2012/01/timers-in-java-create-timer-in-java.html)以了解更多信息。

# opengl - 一种逼真的图像生成技术

> ID：10754508
> 
> 赞同：1
> 
> 时间：2012-05-25T12:32:48.090
> 
> 标签：opengl, 3d, directx, textures, texture-mapping

我们正在构建一个基于 Web 的应用程序来设计定制衬衫。它将具有与[http://www.blanklabel.com/Products/Shirt相同的功能](http://www.blanklabel.com/Products/Shirt)

这两个应用程序都基于访问者的选择，使用预先生成的图像切片来显示定制的衬衫图像。

我想知道这些切片是如何生成的。由图形设计师手动使用图形或建模工具（Photoshop/3DSMax 等），还是以编程方式使用 3D 模型上的纹理映射等技术？

是否有可能使用程序化技术获得像[blanklabel.com中那样的真实结果？](http://www.blanklabel.com/Products/Shirt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:40:30.757

这只是一个猜测，但我会在建模应用程序（Blender、3ds max、Maya 等）中创建衬衫（或者更确切地说是衬衫的组件），并以这种方式设置所有 UV 映射。然后，当用户进行选择时，图像会通过服务器上的游戏引擎渲染（阴影可以烘焙，因为没有照明或相机移动），然后推送到客户端的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T00:00:39.773

如果您想以编程方式生成逼真的织物，有几篇关于此的论文，尤其是最近的论文：
[http](http://www.cs.cornell.edu/projects/ctcloth/)
://www.cs.cornell.edu/projects/ctcloth/ 和
[http://www.cs。 Cornell.edu/~srm/publications/TOG12-cloth.html](http://www.cs.cornell.edu/~srm/publications/TOG12-cloth.html)
但是，它们的计算成本很高（您不会获得实时结果来显示您的客户），因此您最好离线渲染这些织物 - 或者选择关闭质量好向上的图片。

您可能还想破解一个空间变化的 BRDF 模型，其中包含一些 Phong 裂片和用于控制裂片的纹理......但我不确定这是否真的很好看。结果在很大程度上取决于艺术家，他们将手动调整参数，使其看起来像实际的织物。

# javascript - jquery：厌倦了 css().css().css()

> ID：10754510
> 
> 赞同：10
> 
> 时间：2012-05-25T12:32:58.563
> 
> 标签：javascript, jquery, css, parameters, styles

我真的厌倦了这样的语法：

```
.css('position','absolute').css('z-index',z-index)
.css('border','1px solid #00AFFF').css('margin','-1px 0px 0px -1px')
.css('left',pleft) 
```

我想知道是否有任何方法可以在一个函数中传递所有参数，例如：

```
.foo('position':'absolute','z-index':z-index,
     'border':'1px solid #00AFFF','margin':'-1px 0px 0px -1px',
     'left':pleft) 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-25T12:33:42.820

是的，将对象传递给`.css()`（也在[文档中提到](http://api.jquery.com/css/#css-map)）：

```
.css({
    position: 'absolute',
    left: pleft,
    zIndex: 123
    ...
}); 
```

请注意，您可以对键使用两种语法：`zIndex`，即可以直接在 JavaScript 中使用的驼峰式版本和`'z-index'`（需要引号，`-`否则会破坏事情）。

对于始终相同的选项 - 在您的情况下可能`position`，`border`并且`margin`- 通过 class/id 选择器设置经典的 CSS 规则可能是一个好主意。然后你只需要通过设置剩余的（动态）选项`.css()`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T12:35:37.547

在单独的类中定义样式

css

```
.myCustomClass
{
     position: absolute;
     border: 1px solid #00AFFF
} 
```

和js

```
.addClass('myCustomClass'); 
```

如果样式太复杂，这很容易管理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:37:32.803

```
$(element).css({'position':'absolute','z-index':zIndex,
     'border':'1px solid #00AFFF','margin':'-1px 0px 0px -1px',
     'left':pleft}); 
```

# c# - 为什么 c1 上传可以在调试模式下工作，但不能在 localhost 上工作？

> ID：10754517
> 
> 赞同：0
> 
> 时间：2012-05-25T12:33:14.507
> 
> 标签：c#, asp.net, web-services, componentone

我在 Visual Studio 2010 中使用 c1 上传（组件一）。它在调试时工作，但在 localhost 上不起作用。我在组件一中使用 4.0.20113.47 版本。请建议我如何解决这个问题？

```
 protected void C1Upload_sample_ValidatingFile(object sender, C1.Web.Wijmo.Controls.C1Upload.ValidateFileEventArgs e)
    {
        string sample_code = txt_code.Text;
        if (sample_code == "")
        {

            return;
        }
        try
        {

            var s = e.UploadedFile.GetStream();

            byte[] imgbyte = new byte[s.Length];
            s.Read(imgbyte, 0, Convert.ToInt32(s.Length));

            //sample image upload into c1caurosel
            cmd = new SqlCommand("sp_pdm_shopping_upload", con);
            cmd.CommandType = CommandType.StoredProcedure;
            con.Open();
            cmd.Parameters.Add(new SqlParameter("@sample", SqlDbType.Char, 10));
            SqlParameter contentparameter = null;
            contentparameter = (new SqlParameter("@image", SqlDbType.Image));
            contentparameter.Direction = ParameterDirection.Input;
            cmd.Parameters.Add(contentparameter);
            cmd.Parameters.Add(new SqlParameter("@type", SqlDbType.Char, 10));
            cmd.Parameters["@sample"].Value = txt_code.Text;
            cmd.Parameters["@image"].Value = imgbyte;
            cmd.Parameters["@type"].Value = "IMG";
            cmd.ExecuteNonQuery();
            con.Close();
            getuploadimage();
            e.IsValid = false;
            s.Close();
            e.UploadedFile.Delete();

        }
        catch
        {
            return;
        }

    } 
```

# java - Collections.emptyList() 之谜

> ID：10754518
> 
> 赞同：5
> 
> 时间：2012-05-25T12:33:22.540
> 
> 标签：java, generics, collections

```
int j = 0; 
List<Integer> i = j > 0 ? Collections.emptyList() : new ArrayList<Integer>(); // compiler error:cannot convert from List<capture#1-of ? extends Object> to List<Integer> 
```

尽管，

```
List<Integer> li = Collections.emptyList(); // it works 
```

虽然我知道类型擦除，但我不知道编译失败的原因！

帮助，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T12:35:55.643

尝试这个：

```
List<Integer> i = j > 0 ? Collections.<Integer>emptyList() : new ArrayList<Integer>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:41:13.033

在第一个示例中，您不允许 Java 捕获`<T>`in，`public static <T> List<T> Collections.emptyList()`因为您没有将其直接分配给 var。Java 的类型推断很弱，无法看穿条件运算符。在第二个示例中，您有一个简单的情况并`T`成功捕获到`Integer`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:41:13.193

第二个起作用的原因是编译器能够从存储结果的变量类型中找出所需的确切类型。OTOH Java 的类型计算功能不足以在第一种情况下做同样的事情

# jquery-mobile - Symbian^1 设备上的 JQuery Mobile

> ID：10754520
> 
> 赞同：2
> 
> 时间：2012-05-25T12:33:24.690
> 
> 标签：jquery-mobile, symbian

我想使用 JQuery Mobile 创建一个 html 页面。

正如他们在[他们的网站上](http://jquerymobile.com/gbs/)所说，N97 可以将 JQuery Mobile 处理为 B 级。我有一部 5530 XpressMusic 智能手机，它具有与 N97 相同的 CPU 和 RAM，并且都具有 Symbian^1。

但是当我尝试从存储卡打开我的 JQueryMobile 简单 html 页面时，浏览器会打开然后立即关闭......我的意思是，我至少不能拥有 JQuery Mobile 的 C 级功能。

问题是什么？为什么手机的默认网络浏览器会关闭？为什么我的手机不能拥有 B 级或至少 C 级的 JQuery Mobile 体验？

以及如何解决这个问题？

编辑：他们网站上的另一个地方告诉我的手机应该获得 A 级体验（[这里](http://jquerymobile.com/original-graded-browser-matrix/)） - 5530 和 N97 都是 S60v5 手机......但是问题是什么？！？？

编辑 2：我正在使用最新的固件版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:25:53.900

诺基亚的浏览器是出了名的垃圾。试试 Opera 的 Symbian。

# javascript - 全屏时捕捉键盘输入似乎不起作用

> ID：10754521
> 
> 赞同：4
> 
> 时间：2012-05-25T12:33:34.837
> 
> 标签：javascript, keyboard, fullscreen, three.js

我正在使用 Three.js 制作游戏，我需要获取用户输入。我有两个处理函数；

```
function press(evt) 
{
    console.log(evt);

    //evt = window.event;
    var code = evt.which || evt.keyCode;

    switch(code) 
    {
        case KEY.W: input.up = true; break;
        case KEY.A: input.left = true; break;
        case KEY.S: input.down = true; break;
        case KEY.D: input.right = true; break;
        case KEY.E: input.e = true; break;
        case KEY.Z: input.z = true; break;
        case KEY.ONE: input.one = true; break;
        case KEY.CTRL: input.ctrl = true; break;
        case KEY.P: input.plus = true; break;
        case KEY.M: input.minus = true; break;
        case KEY.SH: input.shift = true; break;
    }
}

function release(evt)
{
    console.log(evt);

    //evt = window.event;
    var code = evt.which || evt.keyCode;

    switch(code) 
    {
        case KEY.W: input.up = false; break;
        case KEY.A: input.left = false; break;
        case KEY.S: input.down = false; break;
        case KEY.D: input.right = false; break;        
        case KEY.E: input.e = false; break;
        case KEY.Z: input.z = false; break;
        case KEY.ONE: input.one = false; break;
        case KEY.CTRL: input.ctrl = false; break;
        case KEY.P: input.plus = false; break;
        case KEY.M: input.minus = false; break;
        case KEY.SH: input.shift = false; break;
    }
} 
```

我在其他项目中都使用了这两种方法，它们都工作得很好。这就是我附加事件侦听器的方式：

```
document.addEventListener("keydown", press, false);
document.addEventListener("keyup", release, false); 
```

这在网站正常加载时有效，但在网站全屏时无效！

这是 init() 中的 while 设置；`onload`在身体事件上调用的函数：

```
 var init = function()
        {
            started = false;
            isFullscreen = false;

            changeFSState = function()
            {
                if (isFullscreen == true)
                {
                    isFullscreen = false;

                    game.stop(); //lol
                }
                else
                {
                    isFullscreen = true;
                }
            }

            container = document.getElementById("container");
            document.body.appendChild(container);

            document.addEventListener("keydown", press, false);
            document.addEventListener("keyup", release, false);

            document.addEventListener("webkitfullscreenchange", changeFSState, false);
            document.addEventListener("mozfullscreenchange", changeFSState, false);

            game = new Game(container);
        } 
```

`play`单击按钮后，会发生这种情况：

```
 THREEx.FullScreen.request(self.container);  
    self.renderer.setSize(screen.width, screen.height); 
```

现在，正如我所说，在我单击`play`按钮（实际上是链接）之前，捕获输入一直有效，然后控制台停止记录事件，就好像它们没有发生一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T16:51:13.567

[THREEx.FullScreen](http://learningthreejs.com/data/THREEx/docs/THREEx.FullScreen.html)似乎正在使用此代码：

```
element.webkitRequestFullScreen(); 
```

你需要的是这样的：

```
element.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT); 
```

似乎[这只是Chrome](http://hacks.mozilla.org/2012/01/using-the-fullscreen-api-in-web-browsers/)。

# javascript - 在 javascript 中使用 window.open 打开 div 内的任何页面

> ID：10754524
> 
> 赞同：0
> 
> 时间：2012-05-25T12:33:38.187
> 
> 标签：javascript

我有代码：

```
var flashlaunchserver="http://devonestopdigital.s3.amazonaws.com/"; 
```

现在我正在打开新窗口，例如：

```
window.open(flashlaunchserver, "_blank",'left=0,top=0,width=1010,height=700,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,fullscreen=no,directories=no', false); 
```

它在新窗口中打开但我想在 div 标签中打开这个 window.open。

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:40:30.443

由于 JavaScript 的 XmlHttpRequest 对象对跨域请求的限制，您需要在服务器端构建一个可通过 AJAX 访问的页面抓取工具。然后，您可以在本地创建一个调用您的函数的 AJAX 请求。

您的函数需要刮掉`<html>`->`<body>`标签和结束标签。然后可以将原始 html 插入到您的 div 中`innerHTML`。要完成使用 iframe 会更简单的事情，这将是一项艰巨的工作。

**编辑：**作为旁注，刮掉标签很棘手，因为您需要确保**没有**刮掉任何必要的脚本或资源包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:38:41.990

您只能在 iframe 中加载外部内容：

`<iframe src="http://devonestopdigital.s3.amazonaws.com/"></iframe>`

# groovy - Groovy mixin 结合 Gradle DefaultTask 导致运行时错误

> ID：10754525
> 
> 赞同：0
> 
> 时间：2012-05-25T12:33:40.040
> 
> 标签：groovy, gradle, mixins

为了以最简单的方式解释我的问题，我将首先向您展示一个有效的 Groovy 脚本，然后添加一些破坏它的 Gradle 酱汁。

工作脚本：

```
class MyMixin {
    String myname = 'max'
}

@Mixin(MyMixin)
class MyClass {}

MyClass c = new MyClass()
println 'hello ' + c.myname 
```

这会按预期打印出“hello max”。现在让我们`MyClass`用 Gradle 任务类替换它。为此，我们扩展[DefaultTask](http://gradle.org/docs/current/javadoc/org/gradle/api/DefaultTask.html)并使用`@TaskAction`注释。

```
@Mixin(MyMixin)
class MyTask extends DefaultTask {

    @TaskAction
    void sayHello() {
        println 'hello ' + myname
    }
} 
```

如果我们现在安装这个 Gradle 任务并执行它，我们会收到以下运行时错误：

```
Execution failed for task ':myproject:mytask'.
> MyTask.getMyname()Ljava/lang/String; 
```

有趣的是，这只发生在返回某些东西的方法上。`void`方法执行得很好。

所以问题很简单：**我怎样才能让我的 mixin 与我的 Gradle 任务合作？**（仅供参考：它似乎与继承无关；我检查了这一点，但没有将其包含在示例脚本中以保持简单。我还使用运行时混合而不是编译时进行了测试：结果是相同）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:32:10.887

我在 Gradle 论坛上发布了同样的问题，根据 Gradle 开发人员的说法，这是 Groovy`@Mixin`和 Gradle 自己的元编程工具之间的不兼容。他们建议改用 Gradle 的额外属性和/或扩展对象。

供参考：[http ://forums.gradle.org/gradle/topics/groovy_mixin_combined_with_gradle_defaulttask_results_in_runtime_error](http://forums.gradle.org/gradle/topics/groovy_mixin_combined_with_gradle_defaulttask_results_in_runtime_error)

# image - HTML/CSS Firefox 需要多次刷新才能加载所有图像

> ID：10754526
> 
> 赞同：1
> 
> 时间：2012-05-25T12:33:41.650
> 
> 标签：image, firefox, loading

我最近编写了一个网站，该代码是有效的 xHTML 1.0 strict。

问题出现在 Firefox 12 中，我相信其他版本。当我第一次加载站点时，它没有加载 +- 一半的图像。我点击刷新，它加载更多，在 ~5 次刷新后它完全加载。

我清除了cookies，同样的事情发生了。

问题可能出在哪里，为什么它在第一次加载时没有完全加载？

网站：[http ://tinyurl.com/7ropf8c](http://tinyurl.com/7ropf8c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:39:10.090

您可以通过预加载图像来解决这个问题

[http://elouai.com/javascript-preload-images.php](http://elouai.com/javascript-preload-images.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:12:24.733

这是您服务器中的错误。对于一堆图像，它返回“500 内部服务器错误”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:33:43.140

奇怪的是，这是一个主机问题。我不知道怎么做，但我让我的朋友将文件上传到他的主机，它在那里工作正常。

# c++ - 跨线程复制 boost::exception 崩溃

> ID：10754530
> 
> 赞同：4
> 
> 时间：2012-05-25T12:33:48.347
> 
> 标签：c++, boost

下面的示例代码将 boost::exception 对象从 1 个线程复制/传输到另一个线程，由于异常/exception_ptr 内部状态销毁期间的竞争条件而崩溃。我不确定解决它的最佳方法是什么。

使用的 boost 版本是 1.42，平台是在双核 Intel m/c 上运行的 Ubuntu Lucid。编译器是 gcc 4.4.3。

```
#include <iostream>

#include <boost/exception/all.hpp>
#include <boost/thread.hpp>

struct Exception
    : public virtual std::exception
    , public virtual boost::exception
{
};

struct MyException : public virtual Exception {};

struct MyTag {};

typedef boost::error_info<MyTag, std::string> MyError;

struct Test
{
    Test()
    {
        _t.reset(new boost::thread(boost::bind(&Test::executor, this)));
    }

    ~Test()
    {
        _t->join();
    }

    void executor()
    {
        std::cerr << "executor: starting ...\n";
        for (;;)
        {
            boost::unique_lock<boost::mutex> lk(_mx);
            while(_q.empty())
            {
                _cv.wait(lk);
            }
            {
                boost::shared_ptr<boost::promise<int> > pt = _q.front();
                _q.pop_front();
                lk.unlock();
                pt->set_exception(boost::copy_exception(MyException() << MyError("test")));
            }
        }
    }

    void run_impl()
    {
        try
        {
            boost::shared_ptr< boost::promise<int> > pm(new boost::promise<int>());

            boost::unique_future<int> fu = pm->get_future();
            {
                boost::unique_lock<boost::mutex> lk(_mx);
                _q.push_back(pm);
                pm.reset();
            }
            _cv.notify_one();

            fu.get();
            assert(false);
        }
        catch (const MyException& e)
        {
            throw;
        }
        catch (const boost::exception& )
        {
            assert(false);
        }
        catch (...)
        {
            assert(false);
        }
    }

    void run()
    {
        std::cerr << "run: starting ...\n";
        for (;;)
        {
            try
            {
                run_impl();
            }
            catch (...)
            {
            }
        }
    }

private:

    boost::mutex _mx;
    std::list< boost::shared_ptr< boost::promise<int> > > _q;
    boost::shared_ptr<boost::thread> _t;
    boost::condition_variable_any _cv;
};

int main()
{
    Test test;
    test.run();
}

/*
#0  0x080526bd in boost::exception_detail::refcount_ptr<boost::exception_detail::error_info_container>::release (this=0x806e26c) at /boost_1_42_0/boost/exception/exception.hpp:79            
#1  0x0804f7c5 in ~refcount_ptr (this=0x806e26c, __in_chrg=<value optimized out>) at /boost_1_42_0/boost/exception/exception.hpp:34                                                           
#2  0x0804bb61 in ~exception (this=0x806e268, __in_chrg=<value optimized out>) at /boost_1_42_0/boost/exception/exception.hpp:254                                                             
#3  0x0805579a in ~clone_impl (this=0x806e260, __in_chrg=<value optimized out>, __vtt_parm=<value optimized out>) at /boost_1_42_0/boost/exception/exception.hpp:391                          
#4  0x001ff633 in ?? () from /usr/lib/libstdc++.so.6                                                                                                                                                           
#5  0x0027233d in _Unwind_DeleteException () from /lib/libgcc_s.so.1                                                                                                                                           
#6  0x001fe110 in __cxa_end_catch () from /usr/lib/libstdc++.so.6                                                                                                                                              
#7  0x0804f7a4 in Test::run (this=0xbffff74c) at ex_org.cpp:89                                                                                                                                                 
#8  0x0804b869 in main () at ex_org.cpp:106 
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:34:05.373

我不是提升专家，但我注意到一些比赛问题，它在调试模式下运行正常吗？

对于执行者，我会这样写

```
void executor()
{
    std::cerr << "executor: starting ...\n";

    for (;;)
    {            
        _cv.wait(lk);

        boost::unique_lock<boost::mutex> lk(_mx);

        __sync_synchronize (); // Tells the compiler to prevent optimizations

        if ( !_q.empty() ) {                
            boost::shared_ptr<boost::promise<int> > pt = _q.front();
            _q.pop_front();
            pt->set_exception(boost::copy_exception(MyException() << MyError("test")));
        }
    }
} 
```

也

```
void run_impl()
{
    try
    {
        boost::shared_ptr< boost::promise<int> > pm(new boost::promise<int>());

        boost::unique_future<int> fu = pm->get_future();

        {
            boost::unique_lock<boost::mutex> lk(_mx);

            // prevent the compiler from mixing above and below code
            __sync_synchronize ();

            _q.push_back(pm);
            pm.reset();
        }

        _cv.notify_one();

        // This one is the paranoïd's one ;), one must check without ! 
        __sync_synchronize ();

        {
            // since fu must holds an internal reference pm being currently 
            // changed by the other thread !
            boost::unique_lock<boost::mutex> lk(_mx);

            // Then you are assured that everything is coherent at this point
            // the stack frame holding the exception stuffs won't be corrupted

            fu.get();
        }

        assert(false);
    } 
```

# spring - Spring 3 Autowired注释不起作用

> ID：10754539
> 
> 赞同：0
> 
> 时间：2012-05-25T12:34:37.187
> 
> 标签：spring, annotations, autowired

我在使 Autowired 注释正常工作时遇到了一些麻烦。看到这两个类：

```
@Component("upAuthenticationProvider")
public class UPAuthenticationProvider implements AuthenticationProvider {

    @Autowired
    private AuthenticationDAO authenticationDAO;

    // snip

    public AuthenticationDAO getAuthenticationDAO() {
    return authenticationDAO;
    }

    public void setAuthenticationDAO(
          AuthenticationDAO authenticationDAO) {
    this.authenticationDAO = authenticationDAO;
    }
} 
```

和依赖：

```
@Repository
public class AuthenticationPostgresDAO implements AuthenticationDAO{

    @Autowired
    private DataSource dataSource;

    // snip...
} 
```

当应用程序初始化时，我在日志中看到了这一点：

```
08:09:41.268 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Creating shared instance of singleton bean 'upAuthenticationProvider'
08:09:41.268 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Creating instance of bean 'upAuthenticationProvider'
08:09:41.269 [pool-2-thread-1] DEBUG o.s.b.f.annotation.InjectionMetadata - Found injected element on class [com.mycompany.authentication.UPAuthenticationProvider]: AutowiredFieldElement for private com.mycompany.dao.AuthenticationDAO com.mycompany.authentication.UPAuthenticationProvider.AuthenticationDAO
08:09:41.269 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Eagerly caching bean 'upAuthenticationProvider' to allow for resolving potential circular references
08:09:41.271 [pool-2-thread-1] DEBUG o.s.b.f.annotation.InjectionMetadata - Processing injected method of bean 'upAuthenticationProvider': AutowiredFieldElement for private com.mycompany.dao.AuthenticationDAO com.mycompnay.authentication.UPAuthenticationProvider.AuthenticationDAO
08:09:41.273 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Creating shared instance of singleton bean 'AuthenticationPostgresDAO'
08:09:41.273 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Creating instance of bean 'AuthenticationPostgresDAO'
08:09:41.273 [pool-2-thread-1] DEBUG o.s.b.f.annotation.InjectionMetadata - Found injected element on class [com.mycompnay.dao.AuthenticationPostgresDAO]: AutowiredFieldElement for private javax.sql.DataSource com.mycompany.dao.AuthenticationPostgresDAO.dataSource
08:09:41.273 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Eagerly caching bean 'authenticationPostgresDAO' to allow for resolving potential circular references
08:09:41.273 [pool-2-thread-1] DEBUG o.s.b.f.annotation.InjectionMetadata - Processing injected method of bean 'authenticationPostgresDAO': AutowiredFieldElement for private javax.sql.DataSource com.mycompnay.dao.AuthenticationPostgresDAO.dataSource
08:09:41.274 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dataSource'
08:09:41.274 [pool-2-thread-1] DEBUG o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'AuthenticationPostgresDAO' to bean named 'dataSource'
08:09:41.274 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Finished creating instance of bean 'authenticationPostgresDAO'
08:09:41.274 [pool-2-thread-1] DEBUG o.s.b.f.a.AutowiredAnnotationBeanPostProcessor - Autowiring by type from bean name 'upAuthenticationProvider' to bean named 'authenticationPostgresDAO'
08:09:41.274 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Finished creating instance of bean 'upAuthenticationProvider'
08:09:41.274 [pool-2-thread-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'authenticationPostgresDAO' 
```

看起来它告诉我它创建了依赖项并将其连接起来，但是在我的应用程序中，当我尝试从 upAuthenticationProvider 访问 authenticationPostgresDAO 时，我得到了一个 NPE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:41:26.720

所以问题显然不在于您向我们展示的代码... 1）您如何访问您的 upAuthenticationProvider 实例，您应该从 Spring ApplicationContext 中获取它。2) 抛出 NPE 的代码是什么？除了 DAO 之外的其他东西可以在抛出异常的行上为 null 吗？

# php - 查询不会从数据库中删除数据

> ID：10754544
> 
> 赞同：2
> 
> 时间：2012-05-25T12:35:04.347
> 
> 标签：php, mysql

这是我的查询

```
$db2=mysql_connect("localhost","root","");
    mysql_select_db("my_requests",$db2);

    $query=mysql_query("SELECT * FROM details INNER JOIN product ON details.user_id = product.user_id"); // find the city
    $row=mysql_fetch_array($query);// save record

        $id=$row['user_id'];
        echo "$id";

        $query1=mysql_query("DELETE * FROM details WHERE details.user_id=$id");
        $query2=mysql_query("DELETE * FROM product WHERE product.user_id=$id"); 
```

这里我有两个表产品和详细信息，用户 ID 是详细信息的主键，并在产品中设置了外键。

假设我在数据库中有两个条目，user_id = 12，另一个条目 user_id = 11 1\. 当我采用两个表的内部连接并尝试显示 user_id 时，它只显示一个 user_id 12 2\. 当我试图删除数据时使用 user_id，它不会从表中删除数据。

抱歉英语不好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T12:37:26.660

[查询](http://dev.mysql.com/doc/refman/5.5/en/delete.html)的[正确语法`DELETE`](http://dev.mysql.com/doc/refman/5.5/en/delete.html)不包括`*`

```
DELETE FROM product WHERE product.user_id=$id
//^^^^^^^^^ 
```

如果您进行一些基本的错误检查和调试，API 会报告语法错误。

```
// This query has a syntax error and will return FALSE...
$query1 = mysql_query("DELETE * FROM details WHERE details.user_id=$id");
if (!$query1) {
  // On failure, see what your error was.
  echo mysql_error();
} 
```

上面会报类似如下的错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '* FROM 附近使用的正确语法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:38:18.013

在您的`SELECT`查询中，您必须指定该表以获得`*`like `details.*`or `products.*`，因为您要连接两个表。在你的情况下，结果是一样的。

您还需要放置`$row=mysql_fetch_array($query);`在一个循环中，以获取每一行，然后，您的`DELETE`语法错误：

```
while($row=mysql_fetch_array($query)) {
    $id=$row['user_id'];
    echo "$id";

    $query1=mysql_query("DELETE FROM details WHERE details.user_id=$id");
    $query2=mysql_query("DELETE FROM product WHERE product.user_id=$id");

} 
```

# c - FFT bin 宽度说明

> ID：10754549
> 
> 赞同：4
> 
> 时间：2012-05-25T12:35:26.207
> 
> 标签：c, signal-processing, fft, avr, spectrum

我正在为 8 位 Atmega32 开发一个频谱分析仪，它可以输出到 LCD 显示器上。最大采样频率为 40kHz，因此最大频率为 20kHz，遵循 fs > 2B。目前，我正在内部生成一个信号，然后对该信号应用 FFT 并在 LCD 上查看频谱。

请注意，这是用伪代码编写的：

```
 #define SIG_N 128 //Number of samples in signal buffer
 #define FFT_N 64  //2*Output bins 
 uint_8 signal[SIG_N];
 uint_8 spektrum[FFT_N];

 for (int i = 0; i < SIG_N; i++){
   signal[i] = 255*sin(2*3.14*f*i / SIG_N);
 }
 computeFFT(signal,spektrum,FFT_N); //arbitrary method computes signal outputs spektrum 
```

输出频谱目前有 FFT_N/2 = 32 个 bin，每个代表 1Hz。因此，我的频谱目前代表的最高频率（我已经测试过） - 32Hz。如何增加这些 bin 的“频率宽度”，以便每个 bin 代表 625Hz？请记住，我不能将 FFT_N 的大小增加到 64~128 以上，因为我有内存限制。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T12:43:48.577

每个 bin 的宽度 (Hz) 取决于两件事：采样率`Fs`(Hz) 和 FFT bin 的数量 N：

```
bin_width = Fs / N; 
```

因此，如果您在 FFT 中采样`Fs = 40 kHz`并且您`N = 64`的 FFT 中有 bin，那么每个 bin 的宽度将是 625 Hz。感兴趣的箱子将是从 0 到 N / 2 - 1 的箱子：

```
Bin 0        0 Hz
Bin 1      625 Hz
Bin 2     1250 Hz
...
Bin 31  19,375 Hz 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-06T22:42:56.123

将 Paul 的示例转换为范围：

```
Bin 0:    -312.5 Hz  to    312.5 Hz  (center:     0.0 Hz)
Bin 1:     312.5 Hz  to    937.5 Hz  (center:   625.0 Hz)
Bin 2:     937.5 Hz  to   1562.5 Hz  (center:  1250.0 Hz)
...
Bin 32:  19687,5 Hz  to -19687,5 Hz  (center: 20000.0 Hz) 
```

请注意`Bin[0]`和`Bin[32]`（第 33 个 bin 在从零开始的数组中）如何接收来自“负”频率的贡献。

这与 FFT（或任何复杂的离散傅立叶变换）的周期性性质一致。

# sql - 数据库设计：新表与新列

> ID：10754564
> 
> 赞同：5
> 
> 时间：2012-05-25T12:36:49.090
> 
> 标签：sql, database

目前有一个表..并且需要开始向它添加新的数据列。并非每条记录（即使在添加新数据列后继续使用新数据）都会有数据。所以我想知道这是否更适合新表，因为它实际上是某些数据行的扩展，并不适用于每一行。

换句话说，因为这些新数据元素会有很多未使用的列，所以这似乎更适合新表？

**编辑（认为这太有限了）**

第一张表是页面浏览量的记录（目前200万条记录）-id-IP地址-浏览次数-created_at时间戳-日期

对于每个 IP 地址，每天都会创建一个记录 - 连续的网页浏览量会添加到每天的时间浏览量中

附加字段将用于源点跟踪（即谷歌分析源/媒体/活动）

并非每次访问都会获得该信息。我会假设大约 10% 的行会有数据（因为它通常只在第一次访问时被归因）

数据的主要用途是确定人们来自哪里。这可能会被更频繁地使用（然后似乎适合单张桌子）

感谢反馈 - 如果需要可以添加更多

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T12:46:35.983

基本规则是这个（从更严格的规范化规则简化而来）。

如果属性/列依赖于整个主键而不依赖于其他任何东西，则它属于表。

如果它依赖于主键以外的东西，或者除了主键之外，它属于其他地方，并且它所属的表应该与当前表有关系。

例如，您的姓名取决于您的 SSN，因此，如果 SSN 是主键，您的姓名将属于该表。您的汽车或电话号码并不*完全*取决于您的 SSN（因为您可能有不止一部汽车或电话，所以它会放在不同的表中（您的*主要*电话号码可能会放在第一个表中）。

如果您真的想了解数据库设计，请忘记`select`命令的语法并查看规范化。我对其他人的建议是，*所有*数据库模式都应该从 3NF 开始，并且只有在性能需要时才恢复。

然后，只有当您了解（并减轻）这样做所固有的问题时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:43:37.993

如果大多数列都是数据类型，`varchar`那么该方法很好。

因为`varchar`数据类型根据表格单元格中内容的大小占用表格中的空间。

如果使用 Sql server 2008，您可以将新列定义为 SPARSE。

[参考了解更多关于 SPARSE Column 的优缺点](https://stackoverflow.com/questions/1398453/why-when-should-i-use-sparse-column-sql-server-2008)

# jenkins - 如何配置 jenkins 以使用其他用户启动节点？

> ID：10754565
> 
> 赞同：1
> 
> 时间：2012-05-25T12:36:55.020
> 
> 标签：jenkins

我想使用 NIS 帐户运行 jenkins 节点但继续在本地用户上运行 jenkins，因此它不依赖于 NIS 帐户的可用性。

如何配置 jenkins 以尝试使用不同的用户名启动节点。

主节点和节点都是 Linux 机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:50:02.310

您可以这样做，但您必须通过高级配置为每个 ssh 启动的节点执行此操作。

出于这个原因，以这样的方式安排 jenkins 设置可能更容易，它将在所有机器上使用相同的用户名，因此您不必欺骗每个工人的设置。

很快，将 jenkins 重新配置为作为 NIS 帐户运行要容易得多：编辑`/etc/default/jenkins`和`chown -R xxx:xxx /var/lib/jenkins`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:14:19.477

在设置新节点时的配置中。首先，选择“将 Jenkins 作为 Windows 服务运行”。选择“运行服务为”，这会弹出一个用户/密码字段，供您指定运行服务的用户。我需要使用 Active Directory 帐户来访问网络资源。

# perl - 为什么 utf8::all 和 HTML::Table 一起产生奇怪的警告？

> ID：10754566
> 
> 赞同：0
> 
> 时间：2012-05-25T12:36:59.170
> 
> 标签：perl

我编写了一个小的包装子程序来生成 HTML 表[`HTML::Table`](http://search.cpan.org/perldoc?HTML%3a%3aTable)，同时我使用[`utf8::all`](http://search.cpan.org/perldoc?utf8%3a%3aall)它们并一起产生一个奇怪的警告：

```
utf8 "\xE4" does not map to Unicode at /usr/share/perl5/HTML/Table.pm line 756. 
```

第 756 行在 POD 的中间很深，所以我不知道那里可能有什么问题。

重现问题的示例脚本：

```
use 5.012;
use utf8::all;
use HTML::Table;

my @head = qw(col1 col2 col3);
my @table = (
        [ qw( yks kaks kolm) ],
        [ qw( neli viis kuus) ],
    );

say table_draw( table => \@table, header => \@head );

sub table_draw {
    my (%args) = @_;

    $args{border} ||= 0;
    $args{padding} ||= 1;
    $args{width} ||= '95%';

    my $table = new HTML::Table(
                -head=> $args{header},
                -data=> $args{table},
                -width=> $args{width},
                -border=> $args{border},
                -padding=> $args{padding},
            );

    return $table;
} 
```

编辑：更改了最小 Perl 版本，因为在 5.10 下我也没有收到警告，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:19:21.473

行号不太正确，但错误似乎与 POD 中以下绅士/女士的名字有关：

Ville Skyttä, ville.skytta@iki.fi

我怀疑实际上不是utf8。大概是一个小的错误报告。

# c++ - 在 OpenGL 中使用 Qt 进行颜色拾取

> ID：10754568
> 
> 赞同：1
> 
> 时间：2012-05-25T12:37:13.177
> 
> 标签：c++, qt, opengl, picking

我一直在阅读有关采摘的教程，而颜色采摘是迄今为止最流行和最简单的形式。

以雪人为例尝试了一些教程，但它对我不起作用。当我运行该程序时，它只给我一个黑色的画面，没有任何绘画。当我单击几次时，除了关闭窗口时，什么都没有发生，然后它说“你还没有点击雪人”。

不知道有什么问题可以帮助我吗？

```
void GLWidget::paintGL() {
    glEnable(GL_DEPTH_TEST);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();

    gluLookAt(camPosx ,camPosy ,camPosz,
              camPosx + camViewx,camViewy,camPosz + camViewz,
              camUpx, camUpy, camUpz );

    draw(); //draw the normal scene

    if (mode == SELECT)
        drawPickingMode();
    else
        drawPickingMode();

    if (mode == SELECT) {
        processPick();
        mode = RENDER;
    }
    else
        QGLWidget::swapBuffers();

    // restore current matrix
    glMatrixMode( GL_MODELVIEW );
    glPopMatrix( );

}

void GLWidget::mousePressEvent(QMouseEvent * e)
{
    if(e->button() == Qt::LeftButton)
    {
        qDebug("mouse");
        qDebug("%d %d",QCursor::pos().x(),QCursor::pos().y());
        this->cursorX = QCursor::pos().x(); // set x and y cord from mouse
        this->cursorY = QCursor::pos().y();
        mode = SELECT; // set the mode to select
    }
}

void GLWidget::draw() {

// Draw ground
    glColor3f(0.9f, 0.9f, 0.9f);
    glBegin(GL_QUADS);
        glVertex3f(-100.0f, 0.0f, -100.0f);
        glVertex3f(-100.0f, 0.0f,  100.0f);
        glVertex3f( 100.0f, 0.0f,  100.0f);
        glVertex3f( 100.0f, 0.0f, -100.0f);
    glEnd();

// Draw 4 Snowmen

    glColor3f(1.0f, 1.0f, 1.0f);

    for(int i = 0; i < 2; i++)
        for(int j = 0; j < 2; j++) {
            glPushMatrix();
            glTranslatef(i*3.0,0,-j * 3.0);
            glColor3f(1.0f, 1.0f, 1.0f);
            glCallList(snowman_display_list);
            glPopMatrix();
        }

}

void GLWidget::processPick ()
{
    GLint viewport[4];
    GLubyte pixel[3];

    glGetIntegerv(GL_VIEWPORT,viewport);

    glReadPixels(cursorX,viewport[3]-cursorY,1,1,
        GL_RGB,GL_UNSIGNED_BYTE,(void *)pixel);

    printf("%d %d %d\n",pixel[0],pixel[1],pixel[2]);
    if (pixel[0] == 255)
      printf ("You picked the 1st snowman on the 1st row");
    else if (pixel[1] == 255)
      printf ("You picked the 1st snowman on the 2nd row");
    else if (pixel[2] == 255)
      printf ("You picked the 2nd snowman on the 1st row");
    else if (pixel[0] == 250)
      printf ("You picked the 2nd snowman on the 2nd row");
    else
       printf("You didn't click a snowman!");
  printf ("\n");

}

void GLWidget::drawPickingMode() {

// Draw 4 SnowMen

    glDisable(GL_DITHER);
    for(int i = 0; i < 2; i++)
           for(int j = 0; j < 2; j++) {
        glPushMatrix();

// A different color for each snowman

        switch (i*2+j) {
            case 0: glColor3ub(255,0,0);break;
            case 1: glColor3ub(0,255,0);break;
            case 2: glColor3ub(0,0,255);break;
            case 3: glColor3ub(250,0,250);break;
        }

        glTranslatef(i*3.0,0,-j * 3.0);
        glCallList(snowman_display_list);
        glPopMatrix();
       }
    glEnable(GL_DITHER);
}

void GLWidget::initializeGL() {

    loadGLTextures();
    //LoadXml();
    glEnable(GL_TEXTURE_2D);       // Enable Texture Mapping
    glShadeModel(GL_SMOOTH);       // Enable Smooth Shading
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);    // Black Background
    glClearDepth(1.0f);         // Depth Buffer Setup
    glEnable(GL_DEPTH_TEST);       // Enables Depth Testing
    glDepthFunc(GL_LEQUAL);        // The Type Of Depth Testing To Do
    glEnable(GL_LIGHT0);        // Quick And Dirty Lighting (Assumes Light0 Is Set Up)
    glEnable(GL_LIGHTING);        // Enable Lighting
    glEnable(GL_COLOR_MATERIAL);      // Enable Material Coloring
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST); // Perspective Calculations
   // buildLists(2);                                      // Creating displaylist #
    glLoadIdentity();

    timer->start(50);
    qDebug("Init");
} 
```

投影矩阵设置如下：

```
void GLWidget::resizeGL(int width, int height) {

    //set viewport
    glViewport(0,0,width,height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    //set persepective
    //change the next line order to have a different perspective
    aspect_ratio=(GLdouble)width/(GLdouble)height;
    gluPerspective(45.0f, aspect_ratio, 0.1 , 100.0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:51:05.743

Although you're not specifying it explicitly, you're probably rendering to the back buffer double buffered window. Hence you should prepend calls to glReadPixels with a call to glReadBuffer to set which buffer to read the color from. Also remember that on-screen windows are subject to pixel ownership tests and other things that may interfere with your method of choice.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T14:55:26.527

我没有看到冲洗。这可能会导致一个空白屏幕，因为它正在加载以前的数据（通常是无意义的，因此是空白的）

# java - AS400 服务器 Java 6 兼容性

> ID：10754569
> 
> 赞同：1
> 
> 时间：2012-05-25T12:37:14.987
> 
> 标签：java, ibm-midrange

我想知道是否有人知道 AS400 是否与 Java 6 兼容？我在网上查过，我只能找到 Java 2 之前的过时材料。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T18:02:55.407

IBM Java 6 32 位 JDK 作为 LPP 5722JV1 选项 11 可用于 V5R4。

对于 V6R1 和 V7R1，LPP 为 5761JV1。选项 11 是 32 位 JDK，选项 12 是 64 位 JDK。

您可以通过菜单查看 LPP 的安装状态`GO LICPGM`并选择选项 10。按`F11`两次可查看选项列。

这是[在 IBM i5/OS 的 R540 上安装 JDK 6.0 32-Bit (1.6)](http://www-304.ibm.com/support/docview.wss?uid=nas102adb33da4e936d0862574a30076f322)的文档。

要使用 Java 6，您只需将`JAVA_HOME`环境变量设置为指向 JDK 安装路径。

例如：

```
ADDENVVAR ENVVAR(JAVA_HOME) VALUE('/QOpenSys/QIBM/ProdData/JavaVM/jdk60/32bit') 
```

或来自 QSH：

```
export JAVA_HOME="/QOpenSys/QIBM/ProdData/JavaVM/jdk60/32bit" 
```

* * *

IBM Technology for Java (J9) 与 AIX 版本基本相同，支持小组推荐[IBM SDK 和 Runtime Environment Java Technology Edition Version 6](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/index.jsp)中提供的文档。

以下软件技术文档在使用中端 JVM 时可能会派上用场：

[IBM Technology for Java (J9) Serviceability - JVMINFO 以及如何在 IBM i 5.4 及更高版本中收集系统、Java、堆和 GcCycle 转储](http://www-912.ibm.com/8625680A007CA5C6/1AC66549A21402188625680B0002037E/94C28EBF811A93F78625735C006E2C3C)

[IBM Support Assistant](http://www-01.ibm.com/software/support/isa/download.html)工作台具有用于处理和分析各种转储的插件工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T13:09:29.387

它来自版本 V5R4 选项 10。

看

[http://www-304.ibm.com/support/docview.wss?uid=nas13e0b7af2cf7fa663862577a500503434](http://www-304.ibm.com/support/docview.wss?uid=nas13e0b7af2cf7fa663862577a500503434)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T09:02:00.393

AS400 与 Java 6 兼容，*但*您需要明确要求它（因为默认值通常是旧版本）。

这过去是通过“java.version”系统属性完成的，但该机制正在被 J9 JVM（非经典）的“export JAVA_HOME=/....”机制所取代。

请注意，*Classic* Java 6 不（根据我的经验）包括 apt 处理器，因此如果您有元信息`@Something`（

# ruby-on-rails - 如何在没有 XSS 问题的情况下显示地址

> ID：10754570
> 
> 赞同：0
> 
> 时间：2012-05-25T12:37:20.027
> 
> 标签：ruby-on-rails

我正在使用 Rails 3.2.x，并且查看了以下代码。

```
<%= order.address.address_array.join('<br />').html_safe %> 
```

address 是 address1、address2、城市名称、州名、国家名称和邮政编码的数组 - 标准的东西。

由于我将内容标记为`html_safe`用户输入`<script>something</script.`城市名称，因此将执行该 JavaScript 代码。

什么是用换行符显示地址而不暴露安全问题的干净方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:41:06.137

在加入之前，您必须在地址数组的每一行上调用 html_safe。它应该看起来像这样（未经测试）：

```
<%= order.address.address_array.map(&:html_escape).join('<br />') %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:09:59.310

尝试：

```
simple_format(h(address)) 
```

它会转义脚本，然后添加`<br/>`而不是换行符。

# java - JSF - 选择一个 RadioButton 并且不可见一个 outputText

> ID：10754574
> 
> 赞同：3
> 
> 时间：2012-05-25T12:37:31.663
> 
> 标签：java, jsf, jsf-2, visible, invisible

我的 xhtml 页面中有一个单选按钮和一个 outputText。

当我选择单选按钮时，我希望 outputText 可见，而当我取消选择单选按钮时，OutputText 将不可见。

什么是可见/不可见标签？以及如何使用它？

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:42:14.750

您可以检查`rendered`输出文本的父级属性中的单选按钮值。您可以`<f:ajax>`在单选按钮组内使用单选按钮每次更改时更新输出文本的父级。

开球示例：

```
<h:form id="form">
    <h:selectOneRadio value="#{bean.radio}">
        <f:selectItem itemValue="one" itemLabel="This should hide output text" />
        <f:selectItem itemValue="two" itemLabel="This should show output text" />
        <f:ajax render="output" />
    </h:selectOneRadio>
    <h:panelGroup id="output">
        <h:outputText value="output text" rendered="#{bean.radio == 'two'}" />
    </h:panelGroup>
</h:form> 
```

请注意，您不能指向`id`输出文本本身，因为 ajax`render`需要一个*始终*呈现的组件以更新其内容。

* * *

**根据您似乎表明您正在寻找客户端解决方案而不是服务器端解决方案的评论进行**更新。**在这种情况下，只需获取基本的 JavaScript。**

 **```
<h:form id="form">
    <h:selectOneRadio value="#{bean.radio}" onclick="document.getElementById('form:output').style.display = (value == 'two' ? 'block' : 'none')">
        <f:selectItem itemValue="one" itemLabel="This should hide output text" />
        <f:selectItem itemValue="two" itemLabel="This should show output text" />
    </h:selectOneRadio>
    <h:outputText id="output" value="output text" style="display: #{bean.radio == 'two' ? 'block' : 'none'}" />
</h:form> 
```**

# sql-server - 实体框架。如何优雅地报告 SQL 约束错误

> ID：10754578
> 
> 赞同：2
> 
> 时间：2012-05-25T12:37:38.933
> 
> 标签：sql-server, entity-framework, validation, extjs, extjs4

我有一个 Web 应用程序：ExtJs 前端 - EntityFramework + SQL Server 作为后端。让我们看一下其中一种错误场景：

*   我有用户名的数据库限制（名称必须是唯一的）
*   我没有任何客户端验证（我应该吗？有没有办法使这种验证通用？）
*   如果我尝试插入同名用户，服务器返回 500 错误。
*   如果我从 IIS 开启的同一台机器上运行它 - 我会收到完整的错误消息（基本上是带有密钥冲突的 SQL 异常描述等），如果我从另一台机器上运行它 - 我只会收到 500 错误并且没有错误消息。

处理这个问题的最佳方法是什么？我需要以某种人类可读的格式告诉用户该错误。我真的不想在 IIS 上打开错误消息，因为这不是一个好习惯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:34:56.053

我认为您在这里没有错误，而是违反了业务规则。

我喜欢区分这两种情况，首先是一些*意外*情况（例如数据库连接丢失），然后是您知道可能发生的一些情况。

对于错误，我认为适当的是以通用方式通知用户（例如，“发生意外错误”），因为用户无法更正也不需要详细信息。

另一方面，业务规则是用户可能理解并可以采取行动纠正的东西（这里是用户名约束）。所以应该通知用户。

在我从事的项目中，我们有一种异常，`BusinessException`. 我们抛出一条消息，指出问题出在哪里，并以人类可读的格式呈现。我们没有明确地尝试捕获这些异常，而是使用处理程序来管理它们。如果您使用的是 MVC，则可以使用扩展挂钩。

对于其他类型的异常，将堆栈跟踪记录在某处（即 EventViewer）是一个很好的做法，但不向用户提供详细信息。

在这种情况下，我会执行以下操作：

*   有一个按钮*检查名称*以允许用户预先验证名称。
*   验证名称的位置取决于您希望将应用程序的业务逻辑放在何处。在 DB 上，使用存储过程是一种方法，但如果您使用的是 EF，这意味着您要从数据访问中抽象出来。相反，您可以自己编写此验证，使用`LINQ`( 之类的`Context.Users.SingleOrDefault(x => x.Name == name)`，然后检查它是否返回 null 或某个用户​​。您可能认为此验证不是必需的，因为您已经有了数据库约束，但是这样做，逻辑仍然存在您的应用程序的代码。
*   从 EF 捕获异常可能会很麻烦，因为您需要检查 SQL 错误代码以确定它是违反约束还是其他错误。即使您确定了这一点，您也需要将消息转换为用户友好的消息。

我希望这对您的决定有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:48:14.870

首先，我建议您在向客户端上的服务器提交之前进行验证，通过向用户提供即时反馈是一种很好的体验。

其次，对于我使用的实际插入，您可以考虑的选项很少：

1.  使用执行检查和插入的存储过程并返回新记录作为成功插入的确认，这很容易处理事务并处理存储过程中的所有问题，但是现在您拥有位于编译代码之外的功能
2.  在您的插入过程中包装一个调用以首先在事务中进行验证并适当地处理它，为您提供编译的代码和较少的外部依赖关系（如存储过程），但是您对该层的事务锁类型有一些限制但可行
3.  尝试插入并捕获异常，并适当处理，这是我最不喜欢的

我没有看到你提到更新`UserName`，如果你确实允许这个功能，你也必须在更新之前进行验证，因为你在插入时会出现同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T13:47:01.570

> 我没有任何客户端验证（我应该吗？有没有办法使这种验证通用？）

我会一直这样做。您可以使用 jquery ajax 调用服务器页面并检查那里的数据。这让用户在点击提交按钮之前就知道用户名不可用。这提供了更好的用户体验。这种方法避免了另一个服务器往返（带有所有表单数据的正常表单发布，然后收到错误）

> 如果我尝试插入同名用户，服务器返回 500 错误。

始终在您的代码中捕获异常并**记录它**。向用户显示有关错误的友好消息。永远不要向最终用户显示异常的堆栈跟踪。如果您使用的是 ASP.NET，请使用自定义错误页面功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T15:58:53.627

如果您使用 DbContext，您可以通过自定义内置验证来验证唯一性。看看这篇博文：http: [//blogs.msdn.com/b/adonet/archive/2011/05/27/ef-4-1-validation.aspx](http://blogs.msdn.com/b/adonet/archive/2011/05/27/ef-4-1-validation.aspx)。最后有一个例子展示了如何做到这一点。

# objective-c - 如何使用 UIScrollView 和 CATiledLayer 在可缩放的 UIView 上绘制标记

> ID：10754579
> 
> 赞同：1
> 
> 时间：2012-05-25T12:37:54.083
> 
> 标签：objective-c, ios, xcode, uiview, catiledlayer

我想在使用 UIScrollView 和 CATiledLayer 的可缩放 UIView 上绘制标记。我目前使用的设置与 Apple 的 PhotoScroller 演示应用程序相同。我绘制形状没有问题，但我希望它们即使在缩放后也能保持在同一个位置。我可以为此使用转换矩阵吗？或者我是否必须在缩放之后或缩放期间重新绘制形状？这似乎是一项昂贵的操作。

我不想缩放我正在绘制的形状。所以使用缩放转换是不可能的。

我很好奇 MapView 是如何实现这个功能的。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:08:30.217

如果您希望“标记”不随缩放而缩放，我假设它是某种工具显示。

我建议不要将它放在滚动视图的内容视图中 - 直接是滚动视图的子视图或滚动视图的兄弟并显示在其上方。

另一种选择是对滚动委托和缩放委托方法进行操作以调整/替换标记的大小，使其看起来没有移动。可能更多的工作，但可能有好处。

# java - 数据库包含来自集合的重复条目

> ID：10754581
> 
> 赞同：0
> 
> 时间：2012-05-25T12:38:01.340
> 
> 标签：java, jpa, entity, set

在我的应用程序中，我有以下实体：

```
@Entity
public class Commentable implements Serializable {
    ... 
    @ElementCollection(targetClass = String.class)
    protected Set<String> likers = new HashSet<String>();
    ...
} 
```

每当用户单击“赞”按钮时，我会将他的用户名添加到上面`Set`，以确保他永远不会两次赞同一个帖子。但是，当我查看数据库时，我看到多次出现相同的用户名。

如果我打电话`likers.size()`，我仍然可以从`Set`. 然而，以下查询将始终返回更大的数字：

```
Query q1 = em.createQuery("SELECT COUNT(L) FROM Commentable C JOIN C.likers L WHERE C.id = :id");
q1.setParameter("id", commentableID);
long numberOfLikes = (Long) q1.getSingleResult();
System.out.println("HERE " + numberOfLikes); 
```

该数据库包含如下条目：

```
# |  Commentable_ID  |  LIKERS
1 |       1801       |  Mr.James
2 |       1801       |  Mr.James
3 |       1801       |  Mr.James 
```

**更新 1：**

正如 JMelnik 所建议的，我尝试加入唯一约束：

```
@Entity
public class Commentable implements Serializable {
    ... 
    @ElementCollection(targetClass = String.class)
    @Column(unique=true)
    protected Set<String> likers = new HashSet<String>();

    public void addLiker(String liker) {
        this.likers.add(liker);
    }
    ...
} 
```

当我第二次单击“赞”按钮时，GlassFish 向我抛出了以下异常：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'jamesboyz' for key 'LIKERS'
Error Code: 1062
Call: INSERT INTO Commentable_LIKERS (Commentable_ID, LIKERS) VALUES (?, ?)
bind => [2 parameters bound]
Query: DataModifyQuery(sql="INSERT INTO Commentable_LIKERS (Commentable_ID, LIKERS) VALUES (?, ?)")
...
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'jamesboyz' for key 'LIKERS' 
```

**更新 2：**

在我的一个中`SessionBean`，我有以下记录喜欢的方法：

```
@Override
public int like(long commentableID, String liker) {
    Commentable c = em.find(Commentable.class, commentableID);
    if (c == null) return STATUS_NOT_FOUND;
    else {
        c.addLiker(liker);
        return STATUS_SUCCESSFUL;
    }
} 
```

如果您能告诉我为什么会发生这种情况以及如何避免数据库中的重复条目，我将不胜感激。

此致，

詹姆斯·特兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:38:45.617

我的猜测是，如果您将 addLiker 方法更改为，

```
public void addLiker(String liker) {
    this.likers.size();
    this.likers.add(liker);
} 
```

然后它将起作用。我记得这是一个问题，但认为它已解决。您可以尝试 2.4 里程碑版本。否则记录一个错误，或者找到并投票给现有的错误。

您还应该能够通过建立关系 EAGER 或在实体中使用 @ChangeTracking(DEFERRED) 来修复它。你也可以使用，

```
public void addLiker(String liker) {
    if (!this.likers.contains(liker)) {
        this.likers.add(liker);
    }
} 
```

# powershell - PowerShell 中哈希表值的字符串插值

> ID：10754582
> 
> 赞同：45
> 
> 时间：2012-05-25T12:38:08.390
> 
> 标签：powershell

我有一个哈希表：

```
$hash = @{ First = 'Al'; Last = 'Bundy' } 
```

我知道我可以这样做：

```
Write-Host "Computer name is ${env:COMPUTERNAME}" 
```

所以我希望这样做：

```
Write-Host "Hello, ${hash.First} ${hash.Last}." 
```

...但我明白了：

```
Hello,  . 
```

如何在字符串插值中引用哈希表成员？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-25T12:42:16.340

```
Write-Host "Hello, $($hash.First) $($hash.Last)." 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-25T12:45:29.717

```
"Hello, {0} {1}." -f $hash["First"] , $hash["Last"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-10T21:37:01.737

通过添加一个小功能，如果您愿意，您可以更通用一点。但请注意，您正在执行`$template`字符串中可能不受信任的代码。

```
Function Format-String ($template) 
{
    # Set all unbound variables (@args) in the local context
    while (($key, $val, $args) = $args) { Set-Variable $key $val }
    $ExecutionContext.InvokeCommand.ExpandString($template)
}

# Make sure to use single-quotes to avoid expansion before the call.
Write-Host (Format-String 'Hello, $First $Last' @hash)

# You have to escape embedded quotes, too, at least in PoSh v2
Write-Host (Format-String 'Hello, `"$First`" $Last' @hash) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T14:10:54.233

无法让[狐猴的答案](https://stackoverflow.com/a/17033283/406859)在 Powershell 4.0 中工作，因此改编如下

```
Function Format-String ($template) 
{
  # Set all unbound variables (@args) in the local context
  while ($args)
  {
    ($key, $val, $args) = $args
    Set-Variable -Name $key.SubString(1,$key.Length-2) -Value $val
  }
  $ExecutionContext.InvokeCommand.ExpandString($template)
} 
```

# sql - 如何在 SQL Server 上的 CASE 中使用“IN”？

> ID：10754589
> 
> 赞同：3
> 
> 时间：2012-05-25T12:38:23.037
> 
> 标签：sql, sql-server

我想完成以下工作`case when`

```
If @chk='Y'  
    Select * From Table1 Where Column1=@Value  
Else If (@chk='N')
    Select * From Table1 Where Column1 In (Select column2 from Table2) 
```

我认为它可能是这样的：

```
 Select * 
 From Table1 
 Where 
    Case  When @chk='Y' Then
        Column1=@Value
    Else
        Column1 In (Select column2 from Table2)
 End 
```

我知道除了`Case When`. 但是可以使用 来做到这一点`Case when`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T12:44:18.657

CASE 是一个返回单个值的表达式。它不用于流量控制。

```
WHERE (Column1 = @Value AND @chk = 'Y')
OR (@chk <> 'Y' AND Column1 IN (SELECT column2 FROM table2)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T12:44:13.223

`CASE`用于表达式的内联求值。这不是真正的动态`WHERE`子句。

您所要求的解决方案是使用`WHERE`按括号分组的子句：

```
 Select * From Table1 
 Where 
 (@chk='Y' AND Column1=@Value)
 OR
 (@chk <> 'Y' AND Column1 In (Select column2 from Table2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:06:13.357

我们也可以这样做，`CASE WHEN`这可能是理想的。我对这个问题回答了一个类似的问题（[表格一列的三个条件](https://stackoverflow.com/questions/10736036/three-conditions-on-one-column-of-table/10736180#10736180)）

```
Select * From Table1 
Where 
   CASE @Chk
   WHEN 'Y' THEN
        CASE WHEN Column1=@Value THEN 1 END 
   WHEN 'N' THEN
        CASE WHEN Column1 In (Select column2 from Table2) THEN 1 END
   END = 1 
```

`CASE`可以*在某种程度上*强制短路表达式。

`OR`为什么应该避免的例子： [http ://www.sqlfiddle.com/#!6/29531/2](http://www.sqlfiddle.com/#!6/29531/2)

鉴于这两个功能相同的查询：

```
-- using CASE WHEN to convince your RDBMS to short-circuit things:
select count(*)
from usermessages um
join "user" u    
on
(case when um.friendId = 1 then um.sourceUserId else um.friendId end) = u.userId;

-- pure boolean approach, RDBMS can't short-circuit the OR expression
select count(*)
from usermessages um
join "user" u    
on 
(um.friendId = 1 and um.sourceUserId = u.userId)
or 
(um.friendId = u.userId); 
```

[给定来自http://www.sqlfiddle.com/#!6/29531/2](http://www.sqlfiddle.com/#!6/29531/2)的样本数据，第一个查询只用了 88 毫秒，而第二个查询用了 4.7 秒。速度上的差异对用户来说是非常明显的。

这不是一个硬性规定，您仍然必须检查您的 RDBMS 将如何实际执行您的查询。您的 RDBMS 在使用`CASE WHEN`. 最好的规则仍然是分析您的查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:03:55.363

您*可以*在 WHERE 子句中使用 Case 语句。他们这样做的方式是：

```
Select *
From Table1
Where (Case When @chk='Y' and Column1=@Value the 'Y'
            Else Column1 In (Select column2 from Table2)
       End) = 'Y' 
```

通常，您不想这样做，主要是出于审美原因。也就是说，在某些情况下，使用 case 编写的代码比使用 where 中的相应逻辑更具可读性。事实上，这可能是这样的情况。

但是，更重要的是，您出于性能或语法原因想要短路的情况。使用 WHERE 子句几乎可以保证对子查询的评估。它可能不会使用 CASE 执行。

错误是另一种情况。当列不是数字时，以下可能会生成 SQL 类型错误，因为 SQL 不保证 WHERE 中子句的顺序：

```
where isnumeric(val) = 1 and cast(val to float) < 100.0 
```

另一方面，以下工作：

```
where (case when isnumeric(val) = 1 then cast(val to float) end) < 100.0 
```

就个人而言，当遇到这种情况时，我更喜欢将 case 放在子查询中，因此 WHERE 将包含列名。

# php - 哪个是最好的会话处理程序？

> ID：10754590
> 
> 赞同：-1
> 
> 时间：2012-05-25T12:38:37.890
> 
> 标签：php, mysql, session, session-timeout

上个月我读了很多关于这个的书，我尝试了很多不同的东西，我听到了很多不同的意见。

在这个主题的完全无知中，我已经开始在 PHP 中构建一个自定义会话处理程序，在每个页面中运行一个验证脚本，检查保存在 $_SESSION 中的以下条件是否为真（所有这些条件都在 MD5 中散列）：

1) IP 等于最后一页中最后使用的 IP 2) 浏览器等于最后一页中最后使用的

而且我有一个自定义会话超时，在登录中指定，这只是让我保持登录状态例如 5 分钟。我也在重新生成 id，每个页面。

我进入了#php irc 频道，有人说我疯了，因为我试图复制 php 预定义函数来完成这一切，并说我只是将 PHP 变量（session.max_time 等）设置到极限，这就足够了。

我已经设置了它，但它在某些服务器（localhost 和 webserv）中工作，其他人似乎忽略了它。

我的一位老师说我使用数据库会话验证。还有一次，irc 中的人们称我为每次加载页面时通过建立连接来验证这些内容而浪费大量内存而疯狂。

来吧，我真的不知道什么是正确的选择，应该遵循什么。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:51:46.633

不要依赖相同的 IP 地址。那是您的用户无法控制的。

将会话存储在数据库中的一个原因是支持多个共享同一数据库服务器（或集群）的 Web 服务器。这使您可以扩展。它还让您不必担心 PHP 会话设置，因此许多第三方应用程序使用它只是为了简化支持。

在大多数情况下，默认的基于 cookie（基于服务器的文件）会话是可以的。确保在身份验证后立即使用 regenerate_session_id() 防止会话固定，并使用 SSL 防止其他会话劫持方式。

如果您需要用户保持登录状态，您可以正常使用会话，但您会在其上添加另一个表示令牌的 cookie。

当您说您的会话使用 MD5 加密时，我不明白您的意思。也许你可以进一步解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:25:52.853

> 1）IP等于最后一页使用的最后一个IP

这将在有效场景下失败 - 例如通过负载平衡代理访问。

> 2) 浏览器等于最后一页使用的最后一个浏览器

对于有效场景，这将失败 - 谷歌浏览器将即时更新自身，即使是在会话中。

> 我也在重新生成 id，每一页。

如果用户打开多个浏览器实例，这将导致问题。如果用户提供不存在的 sesison id，或者当您更改身份验证状态时，您应该更改会话 id。其他时候不会。

您没有说出所有这些恶作剧要达到的目标，因此无法建议正确的解决方案是什么。到目前为止，这不是关于会话处理程序，而是关于如何管理会话。

> 我的一位老师说我使用数据库会话验证

为什么？大概这优先于基于默认文件的处理程序，但是您要解决哪些缺点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:52:23.090

我建议您在数据库中实现会话处理，因为它是最不受服务器设置影响的解决方案，同时也相对简单。您可以像使用 php 的会话处理函数一样使用它们，但是您将它们存储在数据库而不是磁盘中。谷歌一下，但我建议阅读[http://www.devshed.com/c/a/PHP/Storing-PHP-Sessions-in-a-Database/](http://www.devshed.com/c/a/PHP/Storing-PHP-Sessions-in-a-Database/)

# arrays - 如何在没有数组的 Prolog 程序中创建点系统

> ID：10754593
> 
> 赞同：0
> 
> 时间：2012-05-25T12:38:56.253
> 
> 标签：arrays, prolog

嗨，我正在尝试制作一个 Prolog 程序，用户可以在其中回答一些问题，然后我会为他找到合适的游戏！我想制作一个积分系统，当答案套件具有游戏特色时，我会保留每个游戏的名称和积分

例如 ：

```
sims3 :-
    simulationGame,
    rolePlayingGame.
dragonAgeII :-
    rolePlayingGame.

rolePlayingGamev :-
    test(do_you_like_play_games_with_structured_decision_and_chars_development).
simulationGame :-
    test(do_you_like_simulation_games). 
```

但是在Prolog中我不能创建一个数组我还应该做什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:03:32.433

您可以尝试将信息记录在配对列表`[(gameA,7), (gameB,12)]`或`assert`编辑事实中。这里的主要问题是您希望如何处理您的数据，并且根据您的回答，这个或那个数据表示将更适合。

# c# - Treeview 异步问题

> ID：10754596
> 
> 赞同：1
> 
> 时间：2012-05-25T12:38:58.807
> 
> 标签：c#, multithreading, treeview

我在树视图中遇到问题，我尝试根据 Node.Text 索引添加子节点（我也根据 int 索引尝试过这个 - 无济于事）。当同步运行时，这非常有效。但是，我运行完全相同的 Async (backgroundWorker) 会引发未处理的 ArgumentOutOfRange 异常。另一个奇怪的部分是我试图在两个不同的领域捕捉到这个异常。见代码：

```
 using (Microsoft.Win32.RegistryKey key = Registry.LocalMachine.OpenSubKey(registry_key))
        {
            int x = 0;
            foreach (string subkey_name in key.GetSubKeyNames())
            {
                using (RegistryKey subkey = key.OpenSubKey(subkey_name))
                {
                    foreach (string a in (string[])subkey.GetValue("Users", ""))
                    {
                        User u = new User(a);
                        usrs.addUser(new User(a));
                        wgs.addUserToWorkgroup(subkey_name, a);
                        usrs.AddWorkGroupToUser(subkey_name, a);
                        int trycount = 0;
                    TryAgain:
                        try
                        {
                            //here is where the exception occurs
                            ExecuteSecure(() => treeView1.Nodes[subkey_name].Nodes.Add(a, a));
                        }
                        catch (ArgumentOutOfRangeException)//This does not catch it.
                        {
                            trycount++;
                            if (trycount < 100)
                            {
                                goto TryAgain; //b/c I cannot catch it this never happens...
                            }
                        }

                    }
                }

                x++;
                //System.Threading.Thread.Sleep(2);
                //As you can see I've tried to let the tread sleep to resolve this 
                //- it will get a little farther but still eventually bomb out.
            }
        } 
```

这是 ExecuteSecure 代码[（https://stackoverflow.com/a/8021020/1387186）](https://stackoverflow.com/a/8021020/1387186)

```
 private void ExecuteSecure(Action a)
    {
        o = new object();
        try
        {
            if (InvokeRequired)
            {
                lock (o)
                {
                    BeginInvoke(a);
                }
            }
            else
                a();
        }
        catch (Exception) //again **sigh** this does not catch the error
        { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:24:31.353

你有几个问题。

*   您正在关闭循环变量。
*   您的锁定毫无意义，因为您每次都使用*不同的实例。*
*   你的锁是没有意义的，因为没有其他线程竞争它。
*   您使用的新解决方案`Invoke`导致 UI 和工作线程来回进行乒乓球运动，因此您的工作线程现在变得无用。

任何在这里监视我的答案的人都知道我对这些编组技术的感受（例如`Invoke`）。它可能（并且通常是）最糟糕的更新 UI 的方法。事实上，它被过度使用了，以至于我认为它可以被视为一种[货物崇拜编程](http://en.wikipedia.org/wiki/Cargo_cult_programming)形式。

您应该做的是让您的工作线程将更新所需的数据发布到队列中，然后让您的 UI 线程在最适合您的时间间隔内`TreeView`将其拉出。`System.Windows.Forms.Timer`这是它的样子。

```
public class YourForm : Form
{
  private sealed class YourData
  {
    public string SubKeyName { get; set; }
    public string Value { get; set; }
  }

  private ConcurrentQueue<YourData> queue = new ConcurrentQueue<YourData>();

  private void StartTreeViewUpdate_Click(object sender, EventArgs args)
  {
    Task.Factory.StartNew(WorkerThread);
    TreeViewUpdateTimer.Enabled = true;
  }

  private void TreeViewUpdateTimer_Tick(object sender, EventArgs args)
  {
    // Update in batches of 100 (or whatever) so that the UI stays
    // responsive.
    treeView1.BeginUpdate();
    for (int i = 0; i < 100; i++)
    {
      YourData value = null;
      if (queue.TryDequeue(value) && value != null)
      {
        treeView1.Nodes[value.SubKeyName].Nodes.Add(value.Value, value.Value)
      }
      else
      {
        // We're done.
        TreeViewUpdateTimer.Enabled = false;
        break;
      }
    }
    treeView1.EndUpdate();
  }

  private void WorkerThread()
  {
    using (RegistryKey key = Registry.LocalMachine.OpenSubKey(registry_key))
    {
      foreach (string subkey_name in key.GetSubKeyNames())
      {
        using (RegistryKey subkey = key.OpenSubKey(subkey_name))
        {
          foreach (string a in (string[])subkey.GetValue("Users", ""))
          {
            User u = new User(a);
            usrs.addUser(new User(a));
            wgs.addUserToWorkgroup(subkey_name, a);
            usrs.AddWorkGroupToUser(subkey_name, a);
            var data = new YourData();
            data.SubKeyName = subkey_name;
            data.Value = a;
            queue.Enqueue(data);
          }
          queue.Enqueue(null); // Indicate that queueing is done.
        }
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:30:49.347

我能够像这样解决这个问题：

通过将 BeginInvoke() 更改为 Invoke() 我还更改了 O 的范围，因此它实际上是锁定的。

```
private void ExecuteSecure(Action a)
{

    try
    {
        if (InvokeRequired)
        {
            lock (o)
            {
                Invoke(a);
            }
        }
        else
            a();
    }
    catch (Exception) //again **sigh** this does not catch the error
    { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:57:11.907

如果评论很明显，请执行以下操作：

```
 var uncapturedSubKey_name = subkey_name;
 ExecuteSecure(() => treeView1.Nodes[uncapturedSubKey_name].Nodes.Add(a, a)); 
```

lambda 正在捕获另一个变量，并且直到循环完成后才执行（即最后一个 subkey_name...

# java - log4j ：我的 java 文件服务器日志的日志记录也将归档

> ID：10754601
> 
> 赞同：0
> 
> 时间：2012-05-25T12:39:11.460
> 
> 标签：java, log4j

根据我的 logger-log4j.properties 文件：

```
log4j.rootCategory=DEBUG, TestLogger
log4j.appender.TestLogger=org.apache.log4j.FileAppender
log4j.appender.TestLogger.File=TestLogger.log
log4j.appender.TestLogger.MaxFileSize=10000KB
log4j.appender.TestLogger.MaxBackupIndex=10
log4j.appender.TestLogger.layout=org.apache.log4j.PatternLayout
log4j.appender.TestLogger.layout.ConversionPattern=%d{yyyy-MMM-dd HH:mm:ss,SSS} [%t]- %p
log4j.category.org.apache=DEBUG 
```

当我的课程被执行时，执行后我也得到了服务器日志。如何停止从服务器记录。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:47:45.297

问题出在第一行：

```
log4j.rootCategory=DEBUG, TestLogger 
```

现在，不要将根设置为`DEBUG`，只需将其设置为`ERROR`，然后设置您想要的类别的日志记录级别`DEBUG`。

我认为你应该纠正这样的事情`log4j.category.com.mypackage.MyClass=DEBUG`

这里的 com.mypackage.MyClass 应该是您文件中预期的完全限定的类名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:18:08.340

研究 log4j 的可加性选项。

[http://veerasundar.com/blog/2009/08/log4j-tutorial-additivity-what-and-why/](http://veerasundar.com/blog/2009/08/log4j-tutorial-additivity-what-and-why/)

# android - Android 垂直标签布局

> ID：10754603
> 
> 赞同：0
> 
> 时间：2012-05-25T12:39:18.823
> 
> 标签：android, android-tabhost, android-tablelayout

我在运行时不断收到此错误但没有编译错误？这是主要的 logcat 和代码。

```
05-25 12:29:25.543: W/dalvikvm(384): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-25 12:29:25.582: E/AndroidRuntime(384): FATAL EXCEPTION: main
05-25 12:29:25.582: E/AndroidRuntime(384): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.tablayout/com.example.tablayout.TablayoutActivity}: java.lang.NullPointerException
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.os.Looper.loop(Looper.java:123)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-25 12:29:25.582: E/AndroidRuntime(384):  at java.lang.reflect.Method.invokeNative(Native Method)
05-25 12:29:25.582: E/AndroidRuntime(384):  at java.lang.reflect.Method.invoke(Method.java:521)
05-25 12:29:25.582: E/AndroidRuntime(384):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-25 12:29:25.582: E/AndroidRuntime(384):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-25 12:29:25.582: E/AndroidRuntime(384):  at dalvik.system.NativeStart.main(Native Method)
05-25 12:29:25.582: E/AndroidRuntime(384): Caused by: java.lang.NullPointerException
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.Activity.setContentView(Activity.java:1647)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.TabActivity.ensureTabHost(TabActivity.java:114)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.TabActivity.getTabHost(TabActivity.java:136)
05-25 12:29:25.582: E/AndroidRuntime(384):  at com.example.tablayout.TablayoutActivity.<init>(TablayoutActivity.java:15)
05-25 12:29:25.582: E/AndroidRuntime(384):  at java.lang.Class.newInstanceImpl(Native Method)
05-25 12:29:25.582: E/AndroidRuntime(384):  at java.lang.Class.newInstance(Class.java:1429)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-25 12:29:25.582: E/AndroidRuntime(384):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-25 12:29:25.582: E/AndroidRuntime(384):  ... 11 more

    <?xml version="1.0" encoding="utf-8"?>
    <TabHost xmlns:android="http://schemas.android.com/apk/res/android" 
      android:id="@android:id/tabhost" 
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">
     <LinearLayout android:orientation="horizontal" 
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent"
      android:baselineAligned="false">
    <FrameLayout android:layout_width="0dip" 
        android:layout_height="fill_parent" 
        android:layout_weight="0.2">
    <TabWidget android:id="@android:id/tabs" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:visibility="invisible"/>
        <LinearLayout android:layout_width="fill_parent"  
            android:layout_height="fill_parent"
            android:orientation="vertical">
            <Button android:layout_height="0dip" 
                android:layout_width="fill_parent" 
                android:layout_weight="1.0"
            android:background="@drawable/icon_photos_tab"               
                android:id="@+id/artist_id" 
                android:onClick="tabHandler"/>
            <Button android:layout_height="0dip" 
                android:layout_width="fill_parent" 
                android:layout_weight="1.0"
            android:background="@drawable/icon_videos_tab"  
                android:id="@+id/album_id" 
                android:onClick="tabHandler"/>
            <Button android:layout_height="0dip" 
                android:layout_width="fill_parent" 
                android:layout_weight="1.0"
            android:background="@drawable/icon_songs_tab"   
                android:id="@+id/song_id" 
                android:onClick="tabHandler"/>
    </LinearLayout> 
    </FrameLayout>       
    <FrameLayout 
     android:id="@android:id/tabcontent" 
     android:layout_width="0dip" 
     android:layout_height="fill_parent" 
     android:layout_weight="0.8"/>
    </LinearLayout>
    </TabHost> 
```

这是 main.java 文件，这样您就可以看到它是如何成为全局变量以及我从哪里删除它的。还将按钮全局而不是本地添加到该位置。

```
 import android.app.TabActivity;
    import android.content.Intent;
   import android.os.Bundle;
   import android.view.View;
   import android.widget.Button;
   import android.widget.TabHost;
   import android.widget.TabHost.TabSpec;

   public class TablayoutActivity extends TabActivity {
    /** Called when the activity is first created. */

Button artistButton, songButton, videosButton;
TabHost tabHost = getTabHost();

@Override
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //TabHost tabHost = getTabHost();

    // Tab for Photos
    TabSpec photospec = tabHost.newTabSpec("Photos");
    // setting Title and Icon for the Tab
    photospec.setIndicator("Photos",   getResources().getDrawable(R.drawable.icon_photos_tab));
    Intent photosIntent = new Intent(this, PhotosActivity.class);
    photospec.setContent(photosIntent);

    // Tab for Songs
    TabSpec songspec = tabHost.newTabSpec("Songs");
    songspec.setIndicator("Songs", getResources().getDrawable(R.drawable.icon_songs_tab));
    Intent songsIntent = new Intent(this, SongsActivity.class);
    songspec.setContent(songsIntent);

    // Tab for Videos
    TabSpec videospec = tabHost.newTabSpec("Videos");
    videospec.setIndicator("Videos",         getResources().getDrawable(R.drawable.icon_videos_tab));
    Intent videosIntent = new Intent(this, VideosActivity.class);
    videospec.setContent(videosIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(photospec); // Adding photos tab
    tabHost.addTab(songspec); // Adding songs tab
    tabHost.addTab(videospec); // Adding videos tab

   }

    public void tabHandler(View target){
    artistButton.setSelected(false);
    videosButton.setSelected(false);
    songButton.setSelected(false);
    if(target.getId() == R.id.artist_id){
        tabHost.setCurrentTab(0);
        artistButton.setSelected(true);
    } else if(target.getId() == R.id.album_id){
        tabHost.setCurrentTab(1);
        videosButton.setSelected(true);
    } else if(target.getId() == R.id.song_id){
        tabHost.setCurrentTab(2);
        songButton.setSelected(true);
    }
   };

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:59:17.503

您可能正试图`getTabHost()`在构造函数中的某个地方调用或在您的类上设置一个字段。您必须从内部调用它，`onCreate()`因为`getTabHost()`down deep 尝试获取当前窗口，该窗口在构造函数时尚未创建。

`onCreate()`被调用后的任何时间都可以。

# javascript - Sencha Touch 2 - 文本字段的“更改”事件监听器

> ID：10754605
> 
> 赞同：1
> 
> 时间：2012-05-25T12:39:29.727
> 
> 标签：javascript, dom-events, sencha-touch-2

我想为文本字段上的更改事件添加一个事件侦听器。我创建了一个包含表单面板的视图 - 到目前为止一切正常。

现在我尝试向其中一个文本字段添加一个事件侦听器：

```
 items:[
        {
            xtype    :"textfield",
            name     :"field",
            label    :"field",
            required :true,
            listeners:{
                change:{
                    fn    : "onChangeHandler",
                    scope: this
                },
            }
    }, 
```

但它并没有真正起作用..没有任何反应。没有错误，也没有函数调用。我究竟做错了什么？

编辑：

尝试了另一件事 - 直接在项目定义中：

```
 {
    xtype    :"textfield",
    name     :"field",
    label    :"field",
    required :true,
    listeners:{
        change:{
            fn    :this.onChange
        },
        scope :this
    }
}, 
```

但随后在更改时，我在控制台上收到此错误：

> 未捕获的类型错误：无法调用未定义的方法“应用”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:20:44.033

尝试改变这个：

```
listeners:{
                        change:{
                            fn    : "onChangeHandler",
                            scope: this
                        },
                    } 
```

对此：

```
listeners:{
                        change: this.onChangeHandler
                    } 
```

**更新：** 最简单的方法是为你的`app.view.Login`（比如'abc'）设置一个id，然后：

```
fn: function() {Ext.getCmp('abc').onEvent();}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:59:56.407

我认为“this”存在某种范围界定问题。在控制器中处理事件可能会更好。将 id 添加到您的用户名文本字段（id：'username'，），然后尝试使用我的控制器。我得到 keyup 和 tap 事件的回调；*更改*回调后我遇到了某种错误，但它确实触发了。此外，您的 keyup 事件名称错误。Sencha 列出了每个对象的所有[事件](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Text)，我觉得这很有帮助。

![在此处输入图像描述](../Images/bee7dbff461ed6e8e83f8b8fffb7518d.png)

登录控制器

```
Ext.define("App.controller.LoginController", {
    扩展：“Ext.app.Controller”，

    配置：{
        参考：{
            用户名：'#username'
        },
        控制： {
            用户名： {
                keyup: 'onUsernameKeyUp',
                更改：'onUsernameChange'
            }
        }
    },
    onUsernameKeyUp：函数（）{
        console.log("onUsernameKeyUp");
    },
    onUsernameChange：函数（）{
        console.log("onUsernameChange");
    },
    启动：函数（）{
        this.callParent();
        console.log("启动");
    },
    初始化：函数（）{
        this.callParent();
        console.log("init");
    }
});

```

app.js - 添加控制器：[]

```
分机应用程序（{
    名称：'应用程序'，

    控制器：['LoginController']，
    phoneStartupScreen :'resources/loading/Homescreen.jpg',
    tabletStartupScreen:'resources/loading/Homescreen~ipad.jpg',

    启动：函数（）{
        var loginform = Ext.create("App.view.Login");

        Ext.Viewport.add([loginform]);
    },
});

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T07:32:25.203

您必须将“范围”放入“更改”块中。

```
listeners:{
  change:{
    fn    :this.onChange,
    scope :this
  }
} 
```

你有错误`Uncaught TypeError: Cannot call method 'apply' of undefined` ，因为你写了：

```
listeners:{
  change:{
    fn    :this.onChange
    },
    scope :this
} 
```

你看得到差别吗？:)

还要检查您是否将侦听器放入“config”块并在“config”块之后执行“onChange”函数。

# c# - 从 nhibernate Criteria api 查询到 linq

> ID：10754606
> 
> 赞同：0
> 
> 时间：2012-05-25T12:39:30.227
> 
> 标签：c#, linq, nhibernate, nhibernate-criteria

我想将以下查询从 nhibernate 标准查询 api 转换为 linq。

```
 var userquery = session.CreateCriteria(typeof(User))
          .SetFirstResult(pageIndex * pageSize)
          .SetMaxResults(pageSize);

 var totalcountQuery = CriteriaTransformer.Clone(userquery)
           .SetProjection(Projections.RowCountInt64()); 
```

谢谢

更新

```
IEnumerable<User> dbUsers = userquery.Future<User>();
IFutureValue<long> count = totalcountQuery.FutureValue<long>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:48:03.983

直接（ish）翻译将是：

```
var userQuery = session.Query<User>().Skip(pageIndex * pageSize).Take(pageSize);

var totalCount = userQuery.LongCount(); 
```

但是，我不确定您为什么要在 Skip & Take 之后进行计数，我想是这样的：

```
var totalCount = session.Query<User>().LongCount(); 
```

会更接近你想要的

见[http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Executing-future-queries-with-NHibernate-Linq.aspx](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Executing-future-queries-with-NHibernate-Linq.aspx)

对于 Linq 上的期货，您可以这样做：

```
var users = userQuery.ToFuture();    
var totalCount = userQuery.LongCount(); // users will be a future, count won't be but if it's only 2 queries then this will execute them both 
```

# android - Android：NFC：AAR 和数据：使用额外数据启动应用程序

> ID：10754607
> 
> 赞同：2
> 
> 时间：2012-05-25T12:39:30.350
> 
> 标签：android, nfc, ndef, android-applicationrecord

我正在研究一些 NFC 功能，

我想在我的标签中嵌入两条 ndef 消息。

1.  Android 应用记录
2.  纯文本数据

我想创建以下场景：

1.  点按标签
2.  根据嵌入在标签中的 Android Application Record 启动我的应用程序
3.  在我的活动中从标签中检索更多信息（来自 NFC 或意图系统等？）

我想知道这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:27:18.600

我已经为这个场景创建了一个[NFC Eclipse 插件。](http://code.google.com/p/nfc-eclipse-plugin)您还可以在同一项目的下载部分找到一个 Android 样板项目。

您可能想查看[适用于 Android 的 NDEF 工具](http://code.google.com/p/ndef-tools-for-android/)，并在应用商店中搜索读写应用程序。

# facebook-like - Facebook like 按钮从 og:url 获取 URL 而不是提供的 URL

> ID：10754608
> 
> 赞同：0
> 
> 时间：2012-05-25T12:39:33.503
> 
> 标签：facebook-like

当在 facebook 上点赞按钮时，它不会共享所提供的正确 URL，而是使用 og:url 中的 URL。我看到在浏览器 iframe 中发布了正确的 URL，但是当在 facebook（发布的链接）中看到相同的 URL 时，它会忽略 URL 中发布的参数。请参阅以下示例：

发布的实际网址：[https ://sub.domain.com/Welcome.aspx?s=a1111&lang=en&refid=fb1&sms=5](https://sub.domain.com/Welcome.aspx?s=a1111&lang=en&refid=fb1&sms=5)

Facebook 将其显示为：[https ://sub.domain.com/Welcome.aspx?s=a1111](https://sub.domain.com/Welcome.aspx?s=a1111)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:06:16.690

Facebook Like 按钮倾向于忽略传递给 URL 的所有参数。您将需要使用类似的东西为用户喜欢的每个页面`mod_rewrite`创建URL。`unique`实现这一点的方法是将查询变量屏蔽为页面。

我在这里写了一个快速教程： [http ://www.webniraj.com/2011/09/06/using-htaccess-files-to-hide-query-variables/](http://www.webniraj.com/2011/09/06/using-htaccess-files-to-hide-query-variables/)

但是谷歌周围，你会发现更多关于如何为你的服务器/环境做这件事的信息。

# asp-classic - 如何将我的 asp 文件与数据库文件一起转换为可执行文件，即 (.exe)

> ID：10754612
> 
> 赞同：0
> 
> 时间：2012-05-25T12:39:38.683
> 
> 标签：asp-classic, vbscript, exe

如何将我的 asp 文件（即使用 Classic ASP (Vbscript) 与数据库文件一起制作）转换为可执行文件，即 (.exe)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:21:01.380

多一点解释是明智的，对于 HTML 有一些产品（例如 HTML2Exe），它们会生成站点的离线副本，PDF 也是可能的。但是从 asp 呢？Asp 是交互式的，因此您需要一个程序来完成 IIS 服务器的工作。我也用 Ruby 编程，这没问题，你唯一需要的就是 Ruby 本身，一些易于获取的库并且你已经设置好了，即使有可能将它变成 JAR、WAR 或 EXE .. 试试如果 PDF 足够，则使用[http://pdfmyurl.com/ 之](http://pdfmyurl.com/)类的服务。以下以您所要求的内容为前提，但没有数据库，没有使用过

```
http://www.bestshareware.net/download/asp-to-exe.htm 
```

如果您的意思是为客户端设置 Web 项目的可执行文件，您可以在 Visual Studio .NET 中执行此操作，您可以创建安装程序或 Web 设置项目并为 Web 应用程序创建 exe。还可以使用 VS 和 ASP.net 将您的网络项目编译为 .dll

# java - 启用屏幕旋转android

> ID：10754614
> 
> 赞同：5
> 
> 时间：2012-05-25T12:39:53.083
> 
> 标签：java, android, rotation, orientation

我在特定时间的一项活动中禁用了屏幕旋转。现在我需要它启用的特定时间。当我使用以下方法禁用旋转时，如何启用旋转[：](http://russenreaktor.wordpress.com/2010/01/03/solved-set-screen-orientation-programmatically/) ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T12:43:53.567

你可以用这个

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

更多详情请查看[官方文档](http://developer.android.com/reference/android/content/pm/ActivityInfo.html#SCREEN_ORIENTATION_BEHIND)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T12:44:56.770

将此行放在清单中

```
android:configChanges="orientation" 
```

并根据您的要求使用此代码

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

并把它启用

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNDEFINED); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-12T12:36:36.360

还要检查您的活动清单文件中是否没有此行：

```
android:screenOrientation="portrait" 
```

这将禁用屏幕的旋转。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-29T12:50:19.297

这`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNDEFINED);`是**不正确的**

如果要再次启用旋转，则必须使用：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T12:43:14.517

如果您想再次启用旋转，只需使用：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNDEFINED); 
```

# sql - sqlite 在 vb.net 中一一选择记录

> ID：10754615
> 
> 赞同：1
> 
> 时间：2012-05-25T12:39:53.470
> 
> 标签：sql, vb.net, select

我在表中有这些记录：

```
username, password, rights, allowance
admin, asdf, admin, 20
john, qwer, user, 10
peter, zxcv, user, 10 
```

我想一次选择一条记录

我用了：

```
for i as integer = 1 to sqliteDataReader.FieldCount
dim ss as string = "select * from xtable where recno()=" & Ctr(i)
...
Next 
```

但它一次没有得到 1 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:03:29.020

[这里](http://osdir.com/ml/db.sqlite.general/2003-10/msg00050.html)描述了一种使用 recno 进行迭代的方法。

但是，我建议使用您设置的主键或唯一键而不是特定于 DBMS 的行编号方案从数据库表中选择单个记录。在您的情况下，最好在一个查询中获取您需要的所有记录，然后在您的应用程序代码中迭代该集合，这样您就不必重复连接并从数据库中选择。也许使用[DataTable](http://www.java2s.com/Code/VB/Database-ADO.net/PopulateDatafromdatatable.htm)或[SqliteDataReader](http://zetcode.com/db/sqlitevb/read/)可能更合适。

另外，我应该指出，您目前正在通过首先仅获取表中列的计数来遍历记录。我不确定表的行数是否总是等于列数。这看起来很奇怪。

# jquery - 使用 jQuery 在鼠标悬停时使用事件处理程序弹出一个弹出框 - 元素跟随鼠标

> ID：10754629
> 
> 赞同：2
> 
> 时间：2012-05-25T12:41:11.880
> 
> 标签：jquery, popup, mouseevent

我有以下 jQuery 代码：

```
 $('span.readMoreReputation').mouseover(function(event) {
        createTooltip(event);               
    }).mouseout(function(){
        // create a hidefunction on the callback if you want
        hideTooltip(); 
    });

    function createTooltip(event){          
        $('<div class="tooltip">test</div>').appendTo('body');
        positionTooltip(event);        
    };

    function positionTooltip(event){
        var tPosX = event.pageX - 10;
        var tPosY = event.pageY - 20;
        $('div.tooltip').css({'position': 'absolute', 'top': tPosY, 'left': tPosX});
    }; 
```

它工作得很好，但我想复制 qtip（jquery 插件）的工作方式。在我将鼠标移到 READ MORE 文本（代码中的事件）上的那一刻，附加的 div 跟随鼠标围绕 READ MORE 文本。

我希望将其放置在 READ MORE 文本中的固定位置。

有什么想法为什么要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:09:41.227

我试图使用 jQuery 函数 Offset 和 Position 使某些东西工作，但它们不会返回任何东西。也许这就是我在 jsfiddle 中的方式？Idk，无论如何，这是一种方法：http: [//jsfiddle.net/jMYkS/1/](http://jsfiddle.net/jMYkS/1/)

我添加相对于跨度的位置并将 div 绝对定位在其中。您可以更改 div 上的右/左和上/下值以相对于跨度移动它。

# performance - 何时从不同的机器提供 Windows Azure 表存储分区？

> ID：10754633
> 
> 赞同：2
> 
> 时间：2012-05-25T12:41:27.510
> 
> 标签：performance, azure, azure-storage, performance-testing

有没有办法强制 Windows Azure 表存储分区到不同的物理硬件？[Windows Azure MSDN 博客](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/12/30/windows-azure-storage-architecture-overview.aspx)说环境自动负载平衡服务器之间的分区，但我无法执行压力测试，我可以量化地看到两个分区位于不同的实际机器上。

考虑查询中的以下过滤器：

(PartitionKey == "a" && RowKey == "1") || (PartitionKey == "b" && RowKey == "2")

如果两个分区位于不同的物理机上，则查询可以并行方式执行，同时寻址两个分区服务器，因此它的评估速度更快。但是，我似乎无法找到一种方法来实际衡量这种性能提升。

分区更重要的是什么？[表中的数据量或此处](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)提到的分区上 500 次查询/秒的限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T00:26:16.130

您提到的查询是一个不好的查询。Windows Azure 存储不会像这样优化 OR 查询，因此会导致全表扫描。您肯定希望自己并行触发两个查询并将结果合并（在这种情况下，只是返回的两个实体）。

要真正回答您的问题，我知道没有办法强制表存储重新平衡分区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:56:09.133

您可以使用并行线程读取获得卓越的性能（在 500 个查询/秒/分区和 5000 个/事务/秒/存储帐户的限制下），并根据您的压力测试添加更多线程。

下面的链接有一个实验，其中“我能够使用 365 个线程读取 365,000 行，平均大约 7 秒获得数据。对于使用 30 个线程分布在 30 个分区上的 30,000 行，我平均需要 1.4 秒。巨大的胜利！”，值得检查！

[来自大规模并行线程读取的 Azure 表存储性能](https://stackoverflow.com/questions/3878274/azure-table-storage-performance-from-massively-parallel-threaded-reading)

# ruby-on-rails - Mac OS X（最新版本） - 找不到 .screenrc

> ID：10754639
> 
> 赞同：1
> 
> 时间：2012-05-25T12:42:04.967
> 
> 标签：ruby-on-rails, unix, rvm, gnu-screen, screenrc

非常简单的问题：我正在使用最新版本的 Mac OS 并想修改我的 .screenrc 文件...找不到该文件。我已经通过 Finder 使不可见文件可见，*并且* 我还通过命令行搜索了它。

我已经通过我的 $HOME 目录中明显的目录结构搜索它，我已经进入根目录并尝试在那里搜索它......所有搜索都没有结果。

我使用带有通配符的实际名称和部分字符串进行搜索......我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:45:24.407

> 我错过了什么？

您需要创建它，因为默认情况下不存在。

只是为了仔细检查它不存在，打开 Terminal.app 并输入：

```
ls -al ~/.screenrc 
```

如果它什么都不返回，那么它就不存在。

去创造：

```
touch ~/.screenrc 
```

# java - 运行 weblogic 或 tomcat 时无法获取属性文件

> ID：10754646
> 
> 赞同：0
> 
> 时间：2012-05-25T12:42:38.667
> 
> 标签：java, tomcat, weblogic

我正在尝试通过 ResourceBundle 获取属性文件，如下所示。

```
ClassLoader loader = new URLClassLoader(urls);   
ResourceBundle system = ResourceBundle
    .getBundle("system",Locale.getDefault(),loader); 
```

但我得到了以下例外。严重：servlet jsp 的 Servlet.service() 抛出异常 java.util.MissingResourceException：找不到基本名称系统的包，语言环境 en_US

我将属性文件保存在 src 文件夹中。我也检查了类文件夹。属性文件的路径在 classes 和 src 文件夹中是相同的。请协助解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:11:29.230

你的电话需要上课

```
import java.util.ResourceBundle;
public class system_en_US extends ResourceBundle {

  @Override
  public Enumeration<String> getKeys() {
    // TODO Auto-generated method stub
    return null;
  }

  @Override
  protected Object handleGetObject(String key) {
    // TODO Auto-generated method stub
    return null;
  }
} 
```

（在默认包中）。`system`是一个类的不常见名称，所以它可能只是丢失了。

其次，您提供自定义类加载器。所以`system.class`必须在其中一个 url 中找到。

# php - NetBeans 调试问题

> ID：10754647
> 
> 赞同：0
> 
> 时间：2012-05-25T12:42:44.990
> 
> 标签：php, debugging, netbeans, xdebug, netbeans-7

当我单击调试按钮时，会打开一个指向以下 url 的浏览器：

```
http://localhost/www/somepage.php?XDEBUG_SESSION_START=netbeans-xdebug 
```

出于某种原因，它不断将 插入`www`到 url

如果我从浏览器地址栏中手动删除`www`，调试将继续进行。

任何人都知道如何让它停止将其添加`www`到网址中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:47:25.873

请检查项目属性和“运行配置”选项卡中的**“项目 URL”**和**“索引文件”**值。

**Netbeans 会在“参数”**输入字段下方提醒您最终的 URL 。您应该会看到这样的 URL：

`http://localhost/www/index.php`

希望这可以帮助 ！

# dynamics-crm - 在 CRM 2011 中添加验证的位置

> ID：10754657
> 
> 赞同：1
> 
> 时间：2012-05-25T12:43:10.060
> 
> 标签：dynamics-crm, dynamics-crm-2011

我似乎找不到如何向表单添加简单的验证。我以前从未这样做过。我用谷歌搜索了一个战利品，但找不到任何东西。

在 Lead 实体上，我必须填写字段。用户不应该只填写一个。他们必须同时填写或不填写。

1-我在哪里可以添加验证码？似乎在 CRM 4 中它发生在表单编辑中，在字段属性 -> 事件选项卡中。但是从那里，没有地方可以添加任何代码。

任何帮助和指针都非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T13:03:08.223

在 CRM 2011 中，JavaScript 代码现在进入[Web 资源](http://msdn.microsoft.com/en-us/library/gg309473.aspx)文件。您定义您的方法，然后出于验证目的，您可以使用字段的 OnChange 事件或表单的 OnSave 事件来调用验证函数。定义事件时，您将选择 JavaScript 资源文件，然后输入要在事件触发时调用的方法名称。

# php - 将数字从字符串转换为 int 会改变 php 中的值

> ID：10754660
> 
> 赞同：3
> 
> 时间：2012-05-25T12:43:19.290
> 
> 标签：php, string, casting, integer

我正在使用 PHP 开发一个项目，并尝试使用 中的参数之一`$_POST`，不幸的是我想将结果发送到 Web 服务，该服务只接受参数作为整数。所以我必须转换类型，`(int)`但这项工作会改变参数的值，例如它是这样的：

```
$o =  4924869620;
$c = (int) $o; 
```

那么 c 的值为 629902324

为什么会发生这种事情？我怎样才能保持价值不变？我也用过`intval()`，它也会改变价值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:50:34.107

我猜你在 32 位系统上运行，这意味着最大 int 将是 4294967295 类型将其转换为 float instad：

```
$c = (float) $o; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T12:48:25.890

整数范围从 -2.147.483.648 开始，到 2.147.483.647 结束 - 您的数字大于最大范围。请改用其他数据类型，例如浮点数。

浮点数的范围从 1.5E-45 开始到 3.4E38 ;o)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T12:49:59.430

您的数字大于整数允许的数字。尝试将其转换为浮点数或双精度数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T13:18:02.210

您应该尝试将其作为浮点数发送。如果那不可能，您可以发送一个整数数组吗？（如果是这样，您可以将您的数字拆分为 4 字节的块，并能够创建一个存储这些值的数组，而另一方面，您将能够基于该数组重新构建数字）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T12:59:05.880

如上所述，`(float) $o;`4924869620 不是整数。如果您要发布到服务器，那么数据类型是否不相关，只是它只是数字数据，因为它只是一个无论如何发送的 url 编码字符串......

# javascript - JavaScript：在没有画布的情况下获取 ImageData

> ID：10754661
> 
> 赞同：65
> 
> 时间：2012-05-25T12:43:25.733
> 
> 标签：javascript, html, canvas

`ImageData`是否可以从不在画布上但在 DOM 树中的其他位置正常的图像中获取对象`<img>`？

如果是，如何？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-25T13:09:04.520

您必须创建一个内存画布，然后在此画布上绘制图像：

```
var canvas = document.createElement('canvas');
var context = canvas.getContext('2d');
var img = document.getElementById('myimg');
canvas.width = img.width;
canvas.height = img.height;
context.drawImage(img, 0, 0 );
var myData = context.getImageData(0, 0, img.width, img.height); 
```

但如果图像来自另一个域，这将不起作用。如果您无法控制服务器，这是您无法绕过的安全限制（请注意，如果您使用 file:// 打开 html 文件，您将有很多额外的限制，请使用 http://）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-25T13:55:40.363

正如已经暗示的那样，canvas 提供了创建 ImageData 对象的唯一解决方案。

如果你真的反对使用 canvas 元素来加载图像数据（也许我们正在谈论 lte IE8），你总是可以考虑使用图像对象的 src 位置来解析 base64 图像数据

[http://blog.calyptus.eu/seb/2009/05/png-parser-in-javascript/](http://blog.calyptus.eu/seb/2009/05/png-parser-in-javascript/)

这很困难，但如果必须，可以通过这种方式将图像解析为数组。

[https://github.com/devongovett/png.js/blob/master/png.js](https://github.com/devongovett/png.js/blob/master/png.js)

这向您展示了如何使用 xhr 请求加载数据并解析 png 数据。在内部，它使用画布做一些其他事情，但您感兴趣的子集是无画布的。对于您感兴趣的每种图像格式，您都需要遵循类似的实现。

我应该提到，图像像素读取限制在安全性方面是相同的。无论有没有画布，您都无法读取来自第三方的像素。XMLHTTPRequest 将绑定到跨域策略的治理。这可以防止脚本窃取第三方内容，其中包括可能包含敏感用户信息的图像。

如果您需要读取第三方域上的图像（不需要身份验证即可查看），您应该在您的域上运行一个图像代理服务器，它允许您请求同一域上的图像。如果您需要麻烦，首先将图像数据简单地提供为 json 数组可能会更容易。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-13T11:25:39.037

如果您使用的是网络工作者，您可以`OffscreenCanvas`使用`document.createElement('canvas')`

```
 var response = await fetch(imageUrl);
  var fileBlob = await response.blob();
  var bitmap = await createImageBitmap(fileBlob);
  var canvas = new OffscreenCanvas(bitmap.width, bitmap.height);
  var context = canvas.getContext('2d');
  context.drawImage(bitmap, 0, 0);
  var myData = context.getImageData(0, 0, bitmap.width, bitmap.height); 
```

请注意，对 OffscreenCanvas 的支持是有限的：[https ://caniuse.com/#feat=offscreencanvas](https://caniuse.com/#feat=offscreencanvas)

# google-app-engine - UrlFetchApp 无法通过 oauth 2.0 重定向

> ID：10754662
> 
> 赞同：1
> 
> 时间：2012-05-25T12:43:37.480
> 
> 标签：google-app-engine, redirect, oauth-2.0, fetch, google-apps-script

我已经编写了一个基于 Google App Engine 的 Java 网络服务，它存储和检索有关给定页面排名的信息。

我添加了 Oauth 身份验证，因为该服务不应该在我们公司之外提供。
身份验证和存储/检索数据正常工作。

当我尝试使用 Google Apps 脚本函数 UrlFetchApp 获取此数据时，会出现此问题。

它没有按预期返回 JSON 编码数据，而是从标题为“Google Accounts”的 google 身份验证页面返回一些 HTML。

我相信这是由于重定向 oauth 需要返回数据。
我现在的问题是如何使用应用程序脚本检索我的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:15:17.513

Apps 脚本目前不支持 OAuth2。

# sql - 更改大表中的列类型

> ID：10754665
> 
> 赞同：23
> 
> 时间：2012-05-25T12:43:47.420
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我在 SQL Server 2008 R2 中有一个近十亿行的表。我想将两列的数据类型从 int 更改为 bigint。两次`ALTER TABLE zzz ALTER COLUMN yyy`有效，但速度很慢。我怎样才能加快这个过程？我正在考虑将数据复制到另一个表，删除，创建，复制回并切换到简单恢复模式，或者以某种方式使用游标一次 1000 行，但我不确定这些是否真的会导致任何改进。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-25T12:49:56.630

根据您所做的更改，有时进行维护窗口会更容易。在该窗口期间（没有人应该能够更改表中的数据），您可以：

1.  删除任何指向旧列的索引/约束，并禁用触发器
2.  使用新数据类型添加一个新的可为*空*列（即使它是 NOT NULL）
3.  更新新列，将其设置为旧列的值（您可以在单个事务的块中执行此操作（例如，使用 一次影响 10000 行`UPDATE TOP (10000) ... SET newcol = oldcol WHERE newcol IS NULL`）并使用 CHECKPOINT 以避免超出日志）
4.  更新完成后，删除旧列
5.  重命名新列（并在适当时添加 NOT NULL 约束）
6.  重建索引和更新统计信息

这里的关键是它允许您在第 3 步中以增量方式执行更新，而您无法在单个 ALTER TABLE 命令中执行此操作。

这假设该列在数据完整性中没有发挥主要作用——如果它涉及一堆外键关系，那么还有更多步骤。

**编辑**

另外，只是大声想知道，我没有对此进行任何测试（但将其添加到列表中）。我想知道页面+行压缩是否会有所帮助？如果将 INT 更改为 BIGINT，则在适当的压缩后，SQL Server 仍应将所有值视为仍然适合 INT。同样，我还没有测试这是否会使更改更快或更慢，或者首先添加压缩需要多长时间。只是把它扔在那里。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2015-01-10T06:28:37.217

如果您使用的是 SQL Server Management Studio 之类的东西，您只需转到数据库中的表，右键单击，选择“设计”，然后选择要编辑的列：将其设置为 bigint 并点击保存。更改整个列，但以前的值将保持不变。这对于允许表“从”int 到 bigint 是有好处的，但据我所知不会更改现有数据。

# forms - SWI-Prolog CGI cgi_get_form(Arguments) web 隐藏表单

> ID：10754667
> 
> 赞同：0
> 
> 时间：2012-05-25T12:43:50.087
> 
> 标签：forms, list, web, prolog, swi-prolog

我在使用 SWI-Prolog 的 CGI 库传递输入 type="hidden" 表单时遇到问题。具体来说，我这样做：

`<form id="frmCGIPrologIni" name="frmCGIPrologIni" method="post" action="http://localhost/cgi-bin/x.pl"> <p><input type="hidden" name="initial" value="ini" /> <input class="submit" type="submit" value="Start" /> </p></form>`

当程序 x.pl 调用时，`cgi_get_form(Arguments)`Arguments 应该是 Name(Value) 术语的列表，即：[Name, Value]，所以它应该是 [initial(ini)]。

但是当我使用它时它说：错误：=../2：参数没有充分实例化

```
print_args([]).
print_args([F|T]) :- % with Arguments
    F =.. [Name, Value], % and should continue doing things 
```

我尝试使用 write(Arguments) 手动打印它，我得到的是：`_L160`，打印第一个元素是：`_G472`并且 write_canonical(Arguments) 返回：`'.'(_,_)`

我也尝试使用 method="get" 来检查它，它会正确打印 URI，`http://localhost/cgi-bin/x.pl?initial=ini`所以我猜这不是提交问题，而是使用 cgi_get_form(Arguments) 处理的问题。

第一次运行“http://localhost/cgi-bin/x.pl”时，我会这样做：

```
cgi_get_form(Arguments),

(Arguments = []) ->
(
format('<p>Print this as the index.</p>~n', []),
) ; true, % and it works well because there are no Arguments the first time

write('<p>'), write(Arguments), write('</p>'), nl, % and print other things 
```

问题是第二次。这次调用同一个程序有参数所以它不打印消息，到这里一切都很好。然后通过 true 并继续。那是我尝试使用之前解释的结果编写（参数）的时候（`_L160`）。结果应该是表单传递的数据。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:01:50.020

你有没有尝试过

```
print_args([F|T]) :- % with Arguments
    F =.. [Name | Value], % and should continue doing things 
```

# javascript - 将高度变化的图像水平居中而不扭曲图像

> ID：10754670
> 
> 赞同：2
> 
> 时间：2012-05-25T12:44:02.267
> 
> 标签：javascript, jquery, css

```
<div class="container">
    <img src="..." style="position: fixed; height: 80%;" />
</div> 
```

图像高度设置为与窗口高度成比例，如何使其固定但居中，也不会扭曲图像。

因为图像的宽度也随高度而变化，所以不能只获取宽度并执行 'left:0; margin-left: -width/2' 技巧。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:57:30.360

如果您能够使用以下样式，它将完成这项工作。

```
.container {
    position: fixed;
    width: 100%;
    height: 100%;
    text-align: center;
}

img {
    position: relative;
    height: 80%;
} 
```

**演示：http:** [//jsfiddle.net/9qKsj/](http://jsfiddle.net/9qKsj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:00:27.520

如果你想保持位置固定，你需要一些javascript。请参阅[jsFiddle 示例](http://jsfiddle.net/satgw/5/)

html:

```
<img id="img" src="http://upload.wikimedia.org/wikipedia/en/8/81/Mdna-standard-edition-cover.jpg" /> 
```

​CSS：

```
#img {
    position: fixed;
    height: 80%;
} 
```

​js:

```
$(document).ready(function() {
    $(window).resize(function() {
        $('#img').css('margin-left', ($(window).width() - $('#img').width())/2);        
    }).resize();        
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:55:01.673

```
.container {
  margin: 5px/*top bottom*/ auto/*left and right*/;
} 
```

如果您想要它在中间并且无论您滚动还是使用任何东西都使用#thecodeparadox's answer

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:57:35.353

这个例子[http://dabblet.com/gist/2787939](http://dabblet.com/gist/2787939)有帮助吗？它居中且有弹性。

# java - 并发 hashmap size() 方法复杂度

> ID：10754675
> 
> 赞同：3
> 
> 时间：2012-05-25T12:44:24.523
> 
> 标签：java, concurrency, java.util.concurrent, concurrenthashmap

我想知道`size()`调用的方法是否与通常的 HashMap 方法`ConcurrentHashMap`具有相同的复杂性。`size()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-10T18:42:08.773

**JDK 8中**[ConcurrentHashMap.size()](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#size--)的新实现使用了一种很酷的算法，他们从[LongAdder](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html)复制粘贴。

 **实际上，复杂度`ConcurrentHashMap.size()`几乎是恒定的（书呆子语言中的“O(1)”），并且与之相比的实时成本`HashMap.size()`可以忽略不计。不相信我？打开我的基本[测试项目](https://github.com/MartinanderssonDotcom/concurrent-hashmap-size-cost)并自己运行。我当前的机器上没有安装 JDK 7，与 Java 1.8 相比，获得有关 Java 1.7 时间成本的反馈会很酷。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T12:48:26.700

`size()`on的复杂性`HashMap`是`O(1)`，因为大小存储在一个字段中。如果我们查看`size()`on的实现`ConcurrentHashMap`，我们会发现它更大（> O(1)）

**参考（openjdk-6）**

*   [哈希映射#size()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.size%28%29)
*   [ConcurrentHashMap#size()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/ConcurrentHashMap.java#ConcurrentHashMap.size%28%29)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T12:48:21.393

它不是。在我的 JDK 版本中，`HashMap.size()`它具有`O(1)`复杂性，而`ConcurrentHashMap.size()` *在最好的情况下*必须遍历这些段。在最坏的情况下，它将锁定所有段，这在多线程场景中可能是一项非常昂贵的操作。

当然，哪个*更快*是完全不同的问题。答案很大程度上取决于有多少线程正在访问映射，以及它们到底在做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:50:14.513

ConcurrentHashMap 中 size() 方法的复杂性本质上是一个 O(N) 操作（主要随段数而变化），正如您在源代码中看到的那样。HashMap 是一个 O(1) 操作。

```
/**
 * Returns the number of key-value mappings in this map.  If the
 * map contains more than <tt>Integer.MAX_VALUE</tt> elements, returns
 * <tt>Integer.MAX_VALUE</tt>.
 *
 * @return the number of key-value mappings in this map
 */
public int size() {
    final Segment<K,V>[] segments = this.segments;
    long sum = 0;
    long check = 0;
    int[] mc = new int[segments.length];
    // Try a few times to get accurate count. On failure due to
    // continuous async changes in table, resort to locking.
    for (int k = 0; k < RETRIES_BEFORE_LOCK; ++k) {
        check = 0;
        sum = 0;
        int mcsum = 0;
        for (int i = 0; i < segments.length; ++i) {
            sum += segments[i].count;
            mcsum += mc[i] = segments[i].modCount;
        }
        if (mcsum != 0) {
            for (int i = 0; i < segments.length; ++i) {
                check += segments[i].count;
                if (mc[i] != segments[i].modCount) {
                    check = -1; // force retry
                    break;
                }
            }
        }
        if (check == sum)
            break;
    }
    if (check != sum) { // Resort to locking all segments
        sum = 0;
        for (int i = 0; i < segments.length; ++i)
            segments[i].lock();
        for (int i = 0; i < segments.length; ++i)
            sum += segments[i].count;
        for (int i = 0; i < segments.length; ++i)
            segments[i].unlock();
    }
    if (sum > Integer.MAX_VALUE)
        return Integer.MAX_VALUE;
    else
        return (int)sum;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T10:50:50.850

这是一个无关紧要的问题，因为在并发可变结构上调用 size() 本质上是毫无意义的事情。它只会告诉你大小是多少，*除了*记录它之外，你实际上无法对这些信息做任何事情。

如果您尝试使用 size() 而不锁定结构，您将遇到竞争条件。**

# c++ - 尝试在 C++ 中创建 makefile 时出错

> ID：10754680
> 
> 赞同：1
> 
> 时间：2012-05-25T12:44:57.393
> 
> 标签：c++, makefile

我有 3 个文件：Triliza.h、Triliza.cpp 和 Game.cpp。这是我的makefile

```
CC = g++
prog: Game.o
    $(CC) Game.o -Wall -Werror -pedantic -o Triliza
Game.o: Game.cpp Triliza.h
    $(CC) -Wall -Werror -pedantic -c Game.cpp
Triliza.o: Triliza.cpp Triliza.h
    $(CC) -Wall -Werror -pedantic -c Triliza.cpp 
```

这是我的主文件：Game.cpp

```
#include <iostream>
using namespace std;
#include "Triliza.h"

Triliza *triliza;

int main(int argc, char* argv[])
{
while (1)
{
    triliza = new Triliza();
    triliza->verifyFirstPlayer();
    triliza->loop();

    if (!triliza->playAgain())
        break;
}

return 0;
} 
```

有错误输出：

```
g++ Game.o -Wall -Werror -pedantic -o Triliza
Undefined symbols:
"Triliza::Triliza()", referenced from:
  _main in Game.o
"Triliza::verifyFirstPlayer()", referenced from:
  _main in Game.o
"Triliza::loop()", referenced from:
  _main in Game.o
"Triliza::playAgain()", referenced from:
  _main in Game.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [prog] Error 1 
```

所以我想当我尝试将每个文件一起导入时有问题。谁能指出我正确的方法。谢谢

编辑：更改后出现另一个错误。

```
make: *** No rule to make target `Trizilla.o', needed by `prog'.  Stop. 
```

感谢所有回复。我知道了。因为在 Triliza 中有拼写错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:50:15.323

实际上，您的 make 文件可以像这样简单（每行只有这两行）：

```
CXXFLAGS:=-Wall -Werror -pedantic
prog: Game.cpp Triliza.cpp 
```

尽管您可能想要这个：

```
CXXFLAGS:=-Wall -Werror -pedantic
Triliza: Game.cpp Triliza.cpp 
```

尽管在这两种情况下，它都不会明确考虑（更改的）头文件。

`CXX`将`.cpp`使用 GNU make 的内置规则自动编译文件。执行以下操作以查看内置规则和目标：

```
make -np -f /dev/null 
```

（小写`-f`在编辑之前确实有大写）

* * *

现在让我们假设头文件的依赖关系也是相关的。在这种情况下，我将调整我的第二个示例以形成以下（完整）make 文件：

```
CXXFLAGS:=-Wall -Werror -pedantic
Triliza: Game.cpp Triliza.cpp
dependencies: Game.cpp Triliza.cpp
    $(CXX) -M $(CXXFLAGS) $^ > $@

include dependencies 
```

显然，只有在`$(CXX)`理解的情况下才有效。`-M`GCC 会（无论调用为`gcc`还是`g++`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:49:58.780

由于依赖问题，构建可执行文件时，您没有在 Triliza.o 中进行链接。更改 prog 目标如下：

```
prog: Game.o Triliza.o
    $(CC) Game.o Triliza.o -Wall -Werror -pedantic -o Triliza 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:50:13.483

问题是`prog`不依赖于`Triliza.o`. 也没有`Game.o`

```
prog: Game.o Triliza.o
    $(CC) -Wall -Werror -pedantic -o Triliza $^ 
```

这应该这样做。 `$^`将依赖项添加到空格分隔的列表中。

# regex - 如何在 SED 或 AWK 的行中添加双引号？

> ID：10754682
> 
> 赞同：26
> 
> 时间：2012-05-25T12:45:12.027
> 
> 标签：regex, shell, awk, sed, text-processing

我有以下单词列表：

```
name,id,3 
```

我需要像这样双引号：

```
"name,id,3" 
```

我已经尝试`sed 's/.*/\"&\"/g'`并得到：

```
"name,id,3 
```

其中只有一个双引号，并且缺少结束双引号。

我也尝试`awk {print "\""$1"\""}`过完全相同的结果。我需要帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-25T12:57:00.327

使用它将您的输入传输到：

```
sed 's/^/"/;s/$/"/' 
```

`^`是线开始`$`的锚点和线结束的锚点。使用该`sed`行，我们分别用`"`和替换行开始和行结束`"`。

例子：

```
$ echo -e "name,id,2\nname,id,3\nname,id,4"|sed 's/^/"/;s/$/"/'
"name,id,2"
"name,id,3"
"name,id,4" 
```

没有`sed`：

```
$ echo -e "name,id,2\nname,id,3\nname,id,4"
name,id,2
name,id,3
name,id,4 
```

**您的文件似乎有 DOS 行结尾。`dos2unix` *先*通过管道。**

证明：

```
$ cat test.txt
name,id,2
name,id,3
name,id,4
$ sed 's/^/"/;s/$/"/' test.txt
"name,id,2
"name,id,3
"name,id,4
$ cat test.txt|dos2unix|sed 's/^/"/;s/$/"/'
"name,id,2"
"name,id,3"
"name,id,4" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-25T13:32:41.587

您的输入文件在行尾有回车符。您需要`dos2unix`在文件上使用来删除它们。或者你可以这样做：

```
sed 's/\(.*\)\r/"\1"/g' 
```

这将删除回车并添加引号。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-25T13:32:56.347

您可以像这样使用 awk 而不是 sed：

```
line='name,id,3'
echo $line | awk '{printf("\"%s\"\n", $0);}' 
```

或者更好的是像这样使用 BASH printf：

```
printf '"%s"\n' $line 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-07-14T16:24:56.770

我发现最简单的方法是使用 HEX 代码作为双引号：

```
 echo name,id,3 | awk '{print "\x22" $1 "\x22"}'
 "name,id,3" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-16T09:55:34.943

类似于@Dennis 解决方案，

利用

```
sed 's/\(.*\)/"\1"/g' 
```

无需查找'\r'，这将对所有字符串应用双引号。这不需要在输入文件上运行 dos2unix。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-11-26T13:46:15.620

在使用 sed 命令之前，您可以使用 \ 作为转义字符，然后它将在您的字符串中打印 "。例如，我使用以下命令将类似的字符串放在文本文件的第一行：

```
var = "\"name,id,3\""
sed -i '1i' "$var" /tmp/out.txt 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-12-18T03:34:20.027

这对我有用：

```
echo name,id,3 | sed 's/name,id,3/"name,id,3"/'
"name,id,3" 
```

# requestcontext - 如何在自定义控制器 Umbraco 5 中获取上下文对象？

> ID：10754683
> 
> 赞同：1
> 
> 时间：2012-05-25T12:45:13.123
> 
> 标签：requestcontext, umbraco5

我想在我的自定义控制器中访问 GetDictionaryItem() 函数，所以我需要 Context 对象，我通过纯 jquery Ajax 从自定义控制器访问数据。

我可以访问我的 SurfaceController 中的 GetdictionaryItem，如下所示

```
var dictionaryHelper = new DictionaryHelper(_routableRequestContext.Application);
        string dearDictonaryItem = dictionaryHelper.GetDictionaryItemValueForLanguage("Common/Dear", Thread.CurrentThread.CurrentCulture.Name, "Dear"); 
```

但我的自定义控制器中也需要它，

谢谢，谢尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:32:45.343

创建自定义控制器作为表面控制器，

感谢@seraphym

# visual-studio-2010 - Web应用程序和网站项目之间的区别

> ID：10754687
> 
> 赞同：2
> 
> 时间：2012-05-25T12:45:29.063
> 
> 标签：visual-studio-2010, web, web-application-project

> **可能重复：**
> [ASP.NET：网站还是 Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)
> [Visual Studio 中“网站”和“项目”之间的区别](https://stackoverflow.com/questions/590501/difference-between-web-site-and-project-in-visual-studio)

在 Visual Studio 2010 中，网站（使用 File->New->Web Site 创建）与众多 Web 应用程序项目中的任何一个有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T14:40:44.947

MSDN在其文档中涵盖了[Web 应用程序项目与网站项目。](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

它突出了 Web 应用程序和网站项目之间的差异，例如：

*   Web 应用程序项目将有关项目的信息存储到项目文件中。网站项目没有项目文件。
*   Web 应用程序项目编译单个程序集。网站项目编译多个程序集（默认情况下）。
*   默认情况下，命名空间会添加到 Web 应用程序中的页面、类和控件中。网站并非如此，尽管您可以手动将名称空间添加到页面、类和。
*   “Visual Studio 为 [网站项目] 部署提供了工具，但它们不会像可用于 Web 应用程序项目的工具那样自动执行许多部署任务。”

# c# - 具有 Windows 服务的后台工作人员

> ID：10754689
> 
> 赞同：3
> 
> 时间：2012-05-25T12:45:30.973
> 
> 标签：c#, windows-services

我正在使用 C# 在 Visual Studio 2010 中创建 Windows 服务，并且我有一些方法，例如`Add`,`Multiply`和其他方法，我将它们放入该`onStart`方法中。现在，我希望这些方法每五分钟运行一次。那么后台工作进程将如何帮助我呢？

```
protected override void OnStart(string[] args)
{
    add(); // yes, it doesn't have parameters      
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T13:42:11.430

计时器是正确的方法。我有一个稍微增强的版本，它负责在 OnStop 方法中关闭计时器。

在您的 program.cs 中，我将执行以下操作以使调试更容易：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Threading;

namespace SampleWinSvc
{
  static class Program
  {
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    static void Main()
    {
#if (!DEBUG)
      ServiceBase[] ServicesToRun;
      ServicesToRun = new ServiceBase[] { new Service1() };
      ServiceBase.Run(ServicesToRun);
#else
      //Debug code: this allows the process to run 
      // as a non-service. It will kick off the
      // service start point, and then run the 
      // sleep loop below.
      Service1 service = new Service1();
      service.Start();
      // Break execution and set done to true to run Stop()
      bool done = false;
      while (!done)
        Thread.Sleep(10000);
      service.Stop();
#endif
    }
  }
} 
```

然后，在您的 Service1.cs 代码中：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Timers;
using System.Text;

namespace SampleWinSvc
{
    public partial class Service1 : ServiceBase
    {
        /// <summary>
        /// This timer willl run the process at the interval specified (currently 10 seconds) once enabled
        /// </summary>
        Timer timer = new Timer(10000);

        public Service1()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            Start();
        }

        public void Start()
        {
            // point the timer elapsed to the handler
            timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
            // turn on the timer
            timer.Enabled = true;
        }

        /// <summary>
        /// This is called when the service is being stopped. 
            /// You need to wrap up pretty quickly or ask for an extension.
        /// </summary>
        protected override void OnStop()
        {
            timer.Enabled = false;
        }

            /// <summary>
            /// Runs each time the timer has elapsed. 
            /// Remember that if the OnStop turns off the timer, 
            /// that does not guarantee that your process has completed. 
            /// If the process is long and iterative, 
            /// you may want to add in a check inside it 
            /// to see if timer.Enabled has been set to false, or 
            /// provide some other way to check so that 
            /// the process will stop what it is doing.
            /// </summary>
            /// <param name="sender"></param>
            /// <param name="e"></param>
        void timer_Elapsed(object sender, ElapsedEventArgs e)
        {
            MyFunction();
        }

        private int secondsElapsed = 0;
        void MyFunction()
        {
            secondsElapsed += 10;
        }
    }
} 
```

通过在编译选项中设置#DEBUG var，您可以让自己将代码作为程序运行，然后当您准备好测试关闭逻辑时，只需将所有内容都中断并将完成设置为true。我多年来一直使用这种方法并取得了很大的成功。

如代码中所述，如果您在计时器事件中做任何冗长的事情，那么您可能希望从 OnStop 监视它，以确保它在中间关闭时有足够的时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T12:51:21.873

将这些函数包装在一个类中并在该类中创建一个 System.Timers.Timer() 并在该计时器中调用所有这些函数。调用服务的示例类 NewClass 的 Start() 函数`OnStart`。

```
class NewClass
{
 this._watcherTimer = new System.Timers.Timer();
 this._watcherTimer.Interval =  60000;
 this._watcherTimer.Enabled=False;
 this._watcherTimer.Elapsed += new System.Timers.ElapsedEventHandler(this.Timer_Tick);

 public void Start()
{
 this._watcherTimer.Enabled=true;

}

 private void Timer_Tick(object sender, EventArgs e)
    {
        Add();
        Multiply();
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T14:02:40.193

Backgroundworker 的另一种可能的解决方案：

```
public partial class Service1 : ServiceBase
{
    private System.ComponentModel.BackgroundWorker bwMyWorker;
    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        bwMyWorker = new BackgroundWorker();            
        bwMyWorker.DoWork += delegate(object sender, DoWorkEventArgs workArgs)
        {
            //Endless loop
            for (; ; )
            {
                //Your work... E.g. add()
                System.Threading.Thread.Sleep(new TimeSpan(0, 5, 0)); //Pause for 5 min
            }

        };
        bwMyWorker.RunWorkerAsync();
    } 
```

# perl - 在 perl 中使 pdf 只读

> ID：10754690
> 
> 赞同：0
> 
> 时间：2012-05-25T12:45:31.827
> 
> 标签：perl, pdf, cam-pdf

我有一个 .pdf，其中包含很多我不希望用户能够编辑的表单。

已经尝试过`CAM::PDF`，但我无法将我的 pdf 文件加载到此文件中。我只得到一个带有复选框但没有文本的页面

这就是 pdf 的样子：

![-](../Images/68604e4a89f14a367949f9801373680d.png)

这是文件的样子`CAM::PDF`

![-](../Images/e56054d62d71754d6e9559559f1239f3.png)

有谁知道我做错了什么？如果我删除 setPrefs 行，我会得到没有我想要的设置的 rigth pdf。

代码示例：

```
my $file = CAM::PDF->new($pdf_file_path);
$file->sefPrefs('', '', 1, 0, 1, 0);
$file->output('C:\temp\campdf.pdf');
$file->save(); 
```

编辑：使用 pdftk，这有一个选项可以展平 pdf 并使我的 pdf 不可编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:20:39.243

对于其他有此问题的人，我可以使用 CAM::PDF 将 PDF 设为只读：

```
$file->sefPrefs(undef, undef, 1, 0, 0, 0); 
```

我相信如果“复制”首选项设置为 true，用户仍然可以编辑字段，因为他们仍然可以选择“保存副本”但不能覆盖原件。

就我而言，我还必须执行以下操作才能正确填写表单字段：

```
$file->getFormFieldList;   # I think this forces the fields to be cached but it wouldn't work without
...
$file->clean; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T13:18:25.203

如果你想只读试试这个。

```
chmod 0555, "example.pdf"; 
```

# java - 循环和操作

> ID：10754702
> 
> 赞同：0
> 
> 时间：2012-05-25T12:46:29.600
> 
> 标签：java, operators, while-loop, boolean

我很难理解这是什么！在这个while循环中。我知道它会反转布尔值，但这如何导致循环退出？如果它是假的，那么它就会把它变成真的，如果它是真的，那么它就会把它变成假的？

```
 String userChoice;
            do
            {

                userChoice = select.promptChoice();

            } while ( !select.isValidChoice(action ) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:48:27.143

循环继续，直到`action`是一个有效的选择。

也就是说，代码示例没有显示对`action`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:48:34.857

循环转换为：如果选择无效，则再次要求用户输入。

The loop exits when the selection is valid, which is negation of the condition in the while loop (not of not valid is valid).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:48:06.293

它的意思是“不”。在这种情况下，它是说“不是有效的选择”，或者在英语中是“不是有效的选择”。

这种情况下的循环将继续提示用户，直到选择有效。

这 ！用于简单地说NOT，在您的特定情况下，它与说相同`isValidChoice == false`，您应该尝试用简单的英语来思考这些事情，以便更好地理解它们。

话虽如此，您不需要使用 ! 如果听起来不自然。这是一个使用 ! 听起来很自然的例子。

```
bool happy = true;

if(!happy)
{
   cry();
}

else
{
   smile();
} 
```

这取决于什么最适合您的代码，如果听起来自然使用！然后使用它，否则不要。

编辑：在任何一种情况下，如果结果是`FALSE`. 这 ！没有直接改变你的布尔值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T12:49:45.240

用英语讲：

虽然`select.isValueChoice(action)`返回`false`( `!true`) 做`userChoice = select.promptChoice();`

的原因是在返回`!`时循环退出。`isValidChoice``true`

# android - layout_weighsum 如何在 android 中工作

> ID：10754705
> 
> 赞同：0
> 
> 时间：2012-05-25T12:47:01.363
> 
> 标签：android

任何人都可以告诉 layout_weigh sum 在 android 中是如何工作的。我为线性布局提供了 weightsum 100，为 texview 提供了 layout_weight="33"，为按钮提供了 layout_weight="67"。但是 textview 的尺寸越来越大

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:background="#FFFFFF"
    android:weightSum="100">
    <TextView android:text="left" android:textColor="#000000" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:layout_weight="33" />
    <Button android:text="right"  android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:layout_weight="67" />
</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:53:59.313

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFFF"
     >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="left"
        android:textColor="#000000" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="right" />

</LinearLayout> 
```

请删除 android:weightSum="100" 并尝试使用此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:00:01.297

Work on`android:layout_weight`只不过是用来为其父布局设置 dp。

```
It can be Sum of 1 or 10 or 100. 
```

IE

```
1) 0.8 and 0.2

2) 80 and 20

3) 800 and 200 
```

所有三个选项都相同

您可以将上述权重添加到子布局中。你可以参考[这里](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android)。

# google-apps-script - 以编程方式打开刚刚创建的文件

> ID：10754706
> 
> 赞同：1
> 
> 时间：2012-05-25T12:47:01.380
> 
> 标签：google-apps-script

我正在使用只有脚本的谷歌工作表。我希望我明白这是提出这个问题的地方。

在我的工作表上，我为用户创建了一个按钮来关闭 WS 并为下一个命名。

现在创建了 WS，我需要获取 ID 以打开该新文件以“粘贴”一些变量。

有两件事我不知道该怎么做：

首先，在我的驱动器上的特定文件夹中创建文件。二、如何将刚才创建的文件的ID读取到openById，然后传递信息？

打开网址也是一件好事，因此它会在另一个选项卡上弹出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:13:48.530

如果您使用[SpreadsheetApp.create()](https://developers.google.com/apps-script/class_spreadsheetapp#create)创建新的电子表格，那么它会返回一个电子表格类型的对象，您可以在该对象上调用[Spreadsheet.getId()](https://developers.google.com/apps-script/class_spreadsheet#getId)。这将为您提供所需的 ID。

要将电子表格移动到特定文件夹，请使用[DocsList.getFileById()](https://developers.google.com/apps-script/class_docslist#getFileById)获取 File 对象，然后[使用 File.addToFolder()](https://developers.google.com/apps-script/class_file#addToFolder)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T17:44:54.040

Jan 清楚地回答了您关于创建文件和获取 ID 的第一个问题。至于你的第二个问题，要知道不可能让该文件在另一个选项卡中弹出。试想一下，一个程序员弹出无限的标签会造成多大的伤害。

您可以做的最接近的方法是电子表格.getURL()，然后创建一个包含 URL 的对话框。这样用户就可以点击 URL 并打开新的电子表格。

# phpstorm - PHPstorm 项目导航

> ID：10754709
> 
> 赞同：51
> 
> 时间：2012-05-25T12:47:06.387
> 
> 标签：phpstorm

如何在 PHPstorm 的项目列表中选择打开的文件？我的意思是，有一个 PHPstorm“在项目中选择”Netbeans 功能模拟。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-25T13:13:32.100

`Navigate`（`View`在旧版本中）| `Select In...`| `Project View`. 也可以`Autoscroll from source`在设置中启用选项`Project View`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-07-18T14:31:39.540

在 PHPStorm 6 中，项目工具窗口提供了`Scroll from Source` ![从源滚动](../Images/894c940fbcf70c6136fd907fc3ae9ba0.png)按钮，我相信它可以满足您的需求。请注意，该按钮只会出现一次`Autoscroll from Source`，未从窗口设置中选中，可以通过单击齿轮图标访问![从源自动滚动](../Images/f4fc405618f00ee0f85c3c9c377e3ff1.png)

也在寻找这个并偶然发现了这个问题，所以我会在这里提供我的答案。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-16T16:55:22.100

Alt + F1 + 1（用于项目窗口）

Alt + F1，将显示一个列表，您可以通过按数字或使用鼠标从中选择一个窗口。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-05T07:13:22.480

虽然 NetBeans 允许您在一个键盘快捷键中完成所有这些操作，但我找不到一个快捷键来完成此操作。但是通过以下过程，您可以通过两个简单的击键来完成它。

对于 PhpStorm 5：

1.  打开首选项对话框并`Keymap`在左侧选择。
2.  使用“Select In”搜索框或在树中导航到`Main menu`> `Navigate`>`Select In...`然后右键单击它并选择`Add Keyboard Shortcut`。
3.  选择顶部框`First Stroke`并按下键盘上要用于启动`Select In...`对话框的组合键。
4.  单击`OK`按钮关闭“首选项”窗口并接受新的键盘映射。
5.  点击步骤 3 中的组合键。打开一个小对话框。`1\. Project View`默认选择通知选项。只需按`[ENTER]`或`1`，当前打开的文件将在您的项目窗格中突出显示。

![PhpStorm 导航 > 选择在...对话框](../Images/7191736d04dadc63c708d5ecd729a097.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-11T03:45:30.793

`Ctrl`++然后在`Shift`PHPStorm 5.x 中工作，是@crazycoder 给出的答案的加速器`1``Enter`

# android - 如何将额外数据传递给片段类以及如何在片段中获取该数据？

> ID：10754713
> 
> 赞同：1
> 
> 时间：2012-05-25T12:47:28.440
> 
> 标签：android, android-fragments

我使用 FragmentActivity 开发了一个带有选项卡的应用程序。如何在调用片段时传递一些额外的数据以及如何在片段类中获取这些数据？

添加标签的代码如下。片段类直接在其中指定。

```
mTabManager.addTab(mTabHost.newTabSpec("simple").setIndicator("Simple"),
    DetailFragment.class, null); 
```

在这种情况下，我如何将一些数据传递给片段类。请任何人帮助做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T13:26:09.100

你可以在这里查看：http: [//developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)

在该示例中，他们展示了如何将 FragmentTabs 与支持包一起使用，如果您向下看，您会看到他们实现了自己的 TabManager 类。他们在那里实现了函数addTab：

```
 public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mActivity));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        info.fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag);
        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
        }

        mTabs.put(tag, info);
        mTabHost.addTab(tabSpec);
    } 
```

在那里创建对象 TabInfo，之前定义为：

```
 static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    } 
```

您可以将数据放在该捆绑包（args）上。现在，如果您查看覆盖的函数 onTabChanged，您可以看到捆绑包是如何在片段的实例化（newTab.args）上传递的：

```
 @Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);
        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }
    } 
```

最后，您可以从片段本身调用 getArguments () 访问该捆绑包

希望有帮助。

# ruby-on-rails - 如何将大量记录（4m+）迁移到 Heroku/Postgresql？

> ID：10754717
> 
> 赞同：4
> 
> 时间：2012-05-25T12:47:56.630
> 
> 标签：ruby-on-rails, postgresql, heroku

我有一个来自 MSSQL 2008 的 csv 文件，其中包含 400 万条记录，我想在 heroku 上的 postgresql 中导入该文件。我准备了一个脚本来迁移数据，但加载时间太长，我试图将其拆分为多个文件，但又花费了太长时间。

我正在尝试在我的本地电脑上进行导入，然后将数据推送到 heroku，但我又没那么快。

有什么想法、建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:50:09.160

我们最近进行了一次大型导入，包含 30+ 百万条记录。

这就是我们所做的。

我们已经设置了 postgres 的本地副本。我们正在运行一个 Rails 应用程序，因此我们将其连接为我们的开发数据库并运行所有迁移以获取我们正在寻找的正确表结构和索引。

在那之后，我们从我们的 MSSQL 和 MySQL 环境中导入我们的数据，然后我们将把它们推送到 Heroku。

我们运行了我们的测试脚本并测试了我们的应用程序以确保所有数据都是有效的（检查日期、布尔字段和集合等列）

设置完所有数据后，我们对数据运行了本地 pgdump。我们使用了这个命令：

```
PGPASSWORD=your_db_password_here pg_dump -Fc --no-acl --no-owner -h localhost -U your_db_user_here your_db_name_here > mydb.dump 
```

之后，我们将它放在一个私有的 amazon s3 存储桶上，这样 heroku 就可以轻松找到它。

如果您在 Heroku 有多个数据库，或者您正在使用专用的 postgres 实例，请确保从命令行设置数据库：

```
heroku pg:promote HEROKU_POSTGRESQL_RED 
```

将 HEROKU_POSTGRESQL_RED 替换为您的。你可以使用 heroku pg:info 命令找到它。如果你不这样做，你的数据库将被导入到一个共享实例中，你将不得不重做这个过程。

您还需要确保在导入之前打开了 pgbackups 插件。如果你还没有这样做，现在就去做。

下一步来自 Heroku 的文档页面：[https ://devcenter.heroku.com/articles/pgbackups#importing_from_a_backup](https://devcenter.heroku.com/articles/pgbackups#importing_from_a_backup)

```
heroku pgbackups:restore DATABASE 'http://s3.amazonaws.com/.....mydb.dump?authparameters' 
```

在那之后，你应该准备好了。随意问的问题。我们花了一点时间才弄清楚，因为我们的数据转储的大小超过 50gigs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:36:18.990

当我有一个像这样的巨大导入时（我的是 1 百万），我使用了两个脚本来完成它。

一个将导入分成 100 行的部分并将其导入排队到 DelayedJob 任务中。

第二个是 DelayedJob 运行的导入它的脚本。

这是批处理器：

```
def Importer.create_import_jobs(filename)
    batch_size = 100
    puts "reading csv"
    rows = []
    batch_counter = 1
    CSV.foreach(filename, :headers => true) do |row|
      rows << row
      if rows.size == batch_size
        puts "making batch #{batch_counter}"
        Delayed::Job.enqueue ImportJob.new(rows)
        rows = []
        batch_counter += 1
      end
    end   
  end 
```

这是工人

```
class ImportJob < Struct.new(:rows)
  def perform
    rows.each do |row|
      # do you import command here.  if you want to go through ActiveRecord it would be like Employee.create(:name => row[1], :phone => row[2])
    end
  end    

  def error(job, exception)
    Airbrake.notify(exception) # for my debugging / exception purposes, not necessary
  end

end 
```

然后，您可以运行第一个脚本来将作业排入队列。然后在你的 heroku 管理面板中打开工作人员来吃掉所有批次。我的花了大约一周的时间，但它完全取决于 1 个导入的速度（我的正在构建索引，这使得每个额外的行导入要慢得多）

注意：工人的成本为 0.05 美元/小时。所以就像一个工人的一天 = 1.20 美元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:28:50.427

您可以尝试将其加载到本地 PostgreSQL 安装，然后进行转储并压缩结果以上传到 heroku。由于我不使用 Heroku，我不知道您是否有 CLI PostgreSQL 工具，如果您使用过它们，否则它们应该提供类似的方式来进行转储和恢复。

查看[PostgreSQL](http://www.postgresql.org/docs/8.1/static/backup.html)文档以获取有关备份和恢复的更多信息。

# mysql - MySQL查询多年值

> ID：10754720
> 
> 赞同：1
> 
> 时间：2012-05-25T12:48:00.710
> 
> 标签：mysql

我构建了一个搜索过滤器，在该过滤器中，用户可以使用不同的年份字段进行过滤，他们可以选择所有或仅选择特定年份，并使用不同的值进行排序。我想知道如何在 MySQL 数据库中运行这个查询。

我想要实现的是：

```
SELECT * 
  FROM table 
  WHERE year LIKE 7, 8, 9, 10, 11, 12, 
  ORDER BY parent DESC, student ASC, audience DESC 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:50:02.603

```
SELECT * FROM `table` 
WHERE year IN (7, 8, 9, 10, 11, 12)
ORDER BY parent DESC, student ASC, audience DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:50:59.473

您可以使用括号和`IN`运算符对多个选项进行分组。

```
SELECT * 
  FROM `table`
  WHERE year IN ( '7', '8', '9', '10', '11', '12' )
  ORDER BY parent DESC, student ASC, audience DESC 
```

# binding - Spring webflow 2绑定：嵌套对象不遵循流规则

> ID：10754730
> 
> 赞同：0
> 
> 时间：2012-05-25T12:48:26.337
> 
> 标签：binding, spring-webflow-2

我有一个对象，它有一个嵌套在同一个视图中的对象：

```
class MyForm{
   private String var1;
   private String var2;
   private MyNestedForm nested;
}

class MyNestedForm{
   private String var3;
} 
```

在我的jsp中：

```
<form:input path="var1" /> 
<form:input path="var2" /> 
<form:input path="nested.var3"/> 
```

当我在表单中输入 var1 和 var2 中的一些值时，一切顺利（验证、上一个/后退按钮......）但 var3 始终保持最后插入的值！即使我从头开始重新开始流程

我错过了什么吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:50:47.147

尝试在两个类中实现 java.io.Serializable 并添加生成的序列版本 ID。

希望这可以帮助。

# google-drive-api - 缺少刷新令牌时appNotInstalled？

> ID：10754734
> 
> 赞同：1
> 
> 时间：2012-05-25T12:48:31.597
> 
> 标签：google-drive-api

最近，我在尝试访问云端硬盘特定操作时注意到了一种奇怪的行为。用例如下：

*   用户安装 Chrome 商店应用程序
*   用户启动应用程序，我们获得电子邮件和配置文件范围的刷新令牌
*   用户想要将文档导出到 Google Drive
*   错误消息 403：返回 appNotInstalled

如果用户使用我们的应用程序访问 Google Drive 并从那里打开一个文件，他们将被重定向到一个新的授权对话框，该对话框询问电子邮件、配置文件、驱动器范围。用户授予访问权限后，初始导出也可以正常工作。我的假设是我们拥有的初始刷新令牌不再有效，即使将其交换为访问令牌有效并且刷新令牌不会过期。

在这种情况下，我们是否应该收到更具描述性的错误消息，表明我们只需将用户重定向到身份验证对话框而不是 Chrome 商店列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:28:22.097

问题可能是您使用的客户端 ID/密码与您为 Drive SDK 注册的不同。

一个快速的测试是：

1.  在您的测试帐户上撤销所有已授予您的应用程序的令牌
2.  从新标签页访问您的应用程序，它应该将您重定向到授权页面：复制您生成的 URL（不批准）。
3.  从 Drive 访问您的应用程序，它应该将您重定向到授权页面：复制 URL（不批准）。

`scope`确保 2 个 URL 相同（它们应该是相同的），尤其是在和`client_id`查询参数中寻找相似之处。

# grails - 如何从类中获取静态枚举

> ID：10754741
> 
> 赞同：3
> 
> 时间：2012-05-25T12:49:16.333
> 
> 标签：grails, enums, gsp

我有一个 java-constraint-interface 声明了一些枚举。

```
public interface MyClass{static enum BOOP{a,b,c,d,e,f}}; 
```

如何从“BOOP”-enum 动态获取第 6 个 enum-const 的名称？

```
${org.java.some.MyClass."$enumName"[5]} 
```

确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:01:03.683

这应该工作：

```
public interface MyClass{static enum BOOP{a,b,c,d,e,f}};

${org.java.some.MyClass.BOOP.values()[5]}    // prints f 
```

此外，由于数组是基于 0 的，并且您的枚举中没有 7 个元素，因此您无法获取索引为 6 的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:13:32.033

我自己弄的

```
<%=org.java.some.MyClass.class.getDeclaredClasses().find{it.simpleName=enumName}.values()[5]%> 
```

# java - 将滚动条添加到 JFreeChart 3DBarChart

> ID：10754747
> 
> 赞同：0
> 
> 时间：2012-05-25T12:49:40.690
> 
> 标签：java, scrollbar, jfreechart

我可以向 JFreeChart 添加一个滚动条以允许我**水平**移动该条吗？

```
JFreeChart chart = ChartFactory.createBarChart3D(
    title, 
    "X",
    "Y",
    dataset, 
    PlotOrientation.VERTICAL, 
    true, 
    false, 
    false
); 
```

因为数据集可能很长，没有足够的宽度来显示结果......

我可以在上面使用 JSlide 吗？还是其他方法？

如果可能的话，请给我一些示例代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:40:04.820

. 是的，如果您可以访问 JFreeChart 演示代码，只需修改 SlidingCategoryDatasetDemo2 并将*createBarChart3D*替换为*createBarChart3D*，您将得到：

![3d 滚动图表](../Images/8e6870345a819f4ffe86262410fc5c59.png)

您将需要使用 SlidingCategoryDataset。你可以在这里找到源代码和演示[JFreeChart](http://sourceforge.net/projects/jfreechart/files/)

# java - 监控 Java 应用程序自己的内存使用情况

> ID：10754748
> 
> 赞同：15
> 
> 时间：2012-05-25T12:49:42.873
> 
> 标签：java, memory, jvm

我想在一个 Java 进程中运行多个 REST Web 应用程序，以节省内存并在 Akka 的帮助下轻松扩展。我想估计每个请求处理程序消耗多少内存，并检测这些对整个系统的危险。

1.  是否可以在该进程内几乎实时监控内存使用情况并找出每个请求处理程序使用了多少内存？我需要什么来实现这一目标？有什么工具吗？

2.  是否有可能捕获`out of memory exception`并根据内存使用情况做某事，例如仅崩溃请求处理程序超出假定的内存限制？如果是这样，那有什么不好的呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T16:36:36.503

一个程序的总使用/空闲内存可以通过java.lang.Runtime.getRuntime()在程序中获取；

运行时有几个与内存相关的方法。以下编码示例演示了它的用法。

```
package test;

import java.util.ArrayList;
import java.util.List;

public class PerformanceTest {
  private static final long MEGABYTE = 1024L * 1024L;

  public static long bytesToMegabytes(long bytes) {
    return bytes / MEGABYTE;
  }

  public static void main(String[] args) {
    // I assume you will know how to create a object Person yourself...
    List<Person> list = new ArrayList<Person>();
    for (int i = 0; i <= 100000; i++) {
      list.add(new Person("Jim", "Knopf"));
    }
    // Get the Java runtime
    Runtime runtime = Runtime.getRuntime();
    // Run the garbage collector
    runtime.gc();
    // Calculate the used memory
    long memory = runtime.totalMemory() - runtime.freeMemory();
    System.out.println("Used memory is bytes: " + memory);
    System.out.println("Used memory is megabytes: "
        + bytesToMegabytes(memory));
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T13:03:56.710

为了回答您的第一个问题，您可以使用许多工具来监视内存使用情况，但是我不知道有任何应用程序可以“实时”将内存使用情况映射到线程。在应用程序中，您可以使用[MemoryMXBean](http://docs.oracle.com/javase/6/docs/api/java/lang/management/MemoryMXBean.html)和[MemoryPoolMXBeans](http://docs.oracle.com/javase/6/docs/api/java/lang/management/MemoryPoolMXBean.html)来监控内存使用情况，

回答你的第二个问题：不，不是。除了捕获 OOME 通常是个坏主意之外，主要问题是接收异常的线程可能不是真正的罪魁祸首。OOME 被抛出到发出最终分配请求的线程上。但是，*其他*一些线程可能会填满大部分内存。另一个问题是，由于 OOME 可以随时抛出，它可能会被抛出到应用程序的一些关键代码中，使其处于瘫痪状态。长话短说，当您收到 OOME 时，您几乎*总是希望重新启动您的应用程序。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T12:55:22.427

VisualVM 是一个很好且简单的监控应用程序的工具。你可以试试：http: [//visualvm.java.net/](http://visualvm.java.net/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T13:04:32.823

您还可以添加代码语句来监控空闲内存，例如：

```
Runtime runtime = Runtime.getRuntime();
System.out.println("Free memory: " + runtime.freeMemory() + " bytes."); 
```

无法处理此异常。问题是，如果你在一个通用的应用服务器（例如 tomcat）中运行所有的 Web 服务，那么如果出现“内存不足”的异常，JVM 就会宕机。尝试查看您的程序中是否存在任何内存泄漏或错误的内存处理。您可以在 Netbeans 或 Eclipse 中使用分析。此外，使用“findbugs”或“sonar”之类的工具进行代码分析可能会向您展示代码中可能存在的不良做法。

在任何情况下，使用有关垃圾收集或 JVM 内存的 java 选项（如 -Xmx）可以减少此类异常并提高性能。

# java - 计算最终长度

> ID：10754764
> 
> 赞同：0
> 
> 时间：2012-05-25T12:50:26.213
> 
> 标签：java, string

以下代码将重复的名称分隔为 1 列，将与名称关联的数字总和分隔为第二列。

像 ：

```
 Nokia 21

   Blackberry 3

   Nimbus 30 
```

从程序中给出的数组中。

* * *

我想知道包含这些条目的数组的最终长度。在这种情况下 3\. 我该如何计算？

```
package keylogger;
import java.util.ArrayList;
import java.util.List;

public class ArrayTester {

private static int finalLength = 0;
private static String Name[][];
private static String data[][] = { 
                               {"Nokia" , "7"},
                               {"Blackberry" ,"1"},
                               {"Nimbus","10"},
                               {"Nokia" , "7"},
                               {"Blackberry" , "1"},
                               {"Nimbus","10"},
                               {"Nokia" , "7"},
                               {"Blackberry" , "1"},
                               {"Nimbus","10"}

                          };  

public void calculator() {

    Name = new String[data.length][2];
    List<String> marked = new ArrayList<String>();
    try {
        for(int i=0;i<data.length;i++) {
            Name[i][0] = data[i][0];
            Name[i][1] = data[i][1];
            String name = data[i][0];
            if(marked.contains(name)) {

                continue;
            }
            marked.add(name);
            int k = i + 1;
            int v = k;
            for (int j = 0; j < data.length - v; j++) {
                String s = data[k][0];
                if(Name[i][0].equalsIgnoreCase(s)) {
                    Name[i][0] = s;
                    Integer z = Integer.parseInt(Name[i][1]) + Integer.parseInt(data[k][1]);
                    Name[i][1] = z.toString();
                }
                k++;
            }

        }
    }catch(Exception exc) {
        exc.printStackTrace();
    }
}

public static void main(String args[]) {
    ArrayTester o = new ArrayTester();
    o.calculator();
    for(String s[] : Name) {
        for(String x : s) {
            System.out.println(x);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:55:58.177

您无法先验地知道它，只有在您完成拆分字符串并进行数学运算时，才会知道大小。

在您的示例中，最终`marked.size()`将具有您正在寻找的大小，但我建议您直接使用 HashMap 这样您就不会关心在线性时间内搜索现有元素，然后将其转换为数组。

就像是：

```
String[][] names = new String[map.size()];
Set<String> keys = map.keys();
int c = 0;

for (String k : keys)
{
  names[c] = new String[2];
  names[c][0] = k;
  names[c++][1] = map.get(k).toString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T13:05:04.537

据我了解，您想知道数组中不同名称的数量而不调用`calculator()`，对吗？我真的不知道这是否有意义，因为您仍然必须检查每个条目并将其与一组进行比较。但是你可以用 Set 来做到这一点：

```
private int getNumberOfEntries(String[][] data) {
  Set<String> names = new HashSet<String>();
  for (int i=0; i<data.length; i++) {
    names.add(data[i][1]);
  }
  return names.size();
} 
```

现在你可以打电话`int n = getNumberOfEntries(data);`...

编辑：当然，在同一步骤中进行求和更有意义，请参阅 Bohemians 解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T13:10:52.757

像往常一样，“问题”是糟糕的编码。正确编写的整个程序可以减少到仅 3 行代码（如果包括定义数组和打印输出，则为 5 行）：

```
public static void main(String[] args) {
    String data[][] = {{"Nokia", "7"}, {"Blackberry", "1"}, {"Nimbus", "10"},
        {"Nokia", "7"}, {"Blackberry", "1"}, {"Nimbus", "10"}, {"Nokia", "7"},
        {"Blackberry", "1"}, {"Nimbus", "10"}, {"Zebra", "78"}};

    HashMap<String, Integer> totals = new HashMap<String, Integer>();
    for (String[] datum : data)
        totals.put(datum[0], new Integer(datum[1]) + (totals.containsKey(datum[0]) ? totals.get(datum[0]) : 0));
    System.out.println("There are " + totals.size() + " brands: " + totals);
} 
```

输出：

```
There are 4 brands: {Nimbus=30, Zebra=78, Nokia=21, Blackberry=3} 
```

# sql - 循环通过gridview得到错误

> ID：10754768
> 
> 赞同：0
> 
> 时间：2012-05-25T12:50:35.573
> 
> 标签：sql, asp.net, gridview

我有一个gridview，我试图循环以获取要更新的值并将其存储在我的数据库中。网格视图代码：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                AutoGenerateColumns="False" 
                Width="1020px" EnableTheming="True" PageSize="25" CellPadding="4" 
                ForeColor="#333333" >
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                <Columns>
                    <asp:BoundField DataField="Column1" HeaderText="Col1" ReadOnly="True" >
                    <ItemStyle Width="35px" />
                    </asp:BoundField>
                    <asp:BoundField DataField="Column2" HeaderText="Col2" />
                    <asp:BoundField DataField="Column3" HeaderText="Col3" />
                    <asp:BoundField DataField="Column4" HeaderText="Col4" />
                    <asp:BoundField DataField="Column5" HeaderText="Col5" />
                    <asp:TemplateField HeaderText="Col6">
                        <EditItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("Column6") %>'></asp:Label>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label2" runat="server" Text="$"></asp:Label>&nbsp;
                            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Column6", "{0:f}") %>' CssClass="boxright"></asp:TextBox>
                        </ItemTemplate>
                        <ItemStyle HorizontalAlign="Right" VerticalAlign="Middle" />
                    </asp:TemplateField>
                    <asp:BoundField DataField="Column7" ReadOnly="True" >
                    <ItemStyle Width="35px" />
                    </asp:BoundField>
                    </Columns>
                <EditRowStyle BackColor="#999999" />
                <FooterStyle BackColor="#003399" Font-Bold="True" ForeColor="White" />
                <HeaderStyle BackColor="#003399" Font-Bold="True" ForeColor="White" />
                <PagerSettings Mode="NextPreviousFirstLast" />
                <PagerStyle BackColor="#003399" ForeColor="White" HorizontalAlign="Left" />
                <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <SortedAscendingCellStyle BackColor="#E9E7E2" />
                <SortedAscendingHeaderStyle BackColor="#506C8C" />
                <SortedDescendingCellStyle BackColor="#FFFDF8" />
                <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
            </asp:GridView> 
```

我正在使用按钮单击事件来触发存储的 sql 过程来更新我的表，如下所示...

```
Protected Sub btnB_Save_Click(sender As Object, e As EventArgs) Handles btnB_Save.Click
Dim gvRow As GridViewRow
    Dim str As String = ""
    For Each gvRow As GridViewRow In gv_Budgets.Rows
        str = ((str + gvRow.Cells(0).Text) + (gvRow.Cells(1).Text) + (gvRow.Cells(2).Text) + (gvRow.Cells(3).Text) + (gvRow.Cells(4).Text) + (gvRow.Cells(6).Text))
    Dim dtRow As TextBox = CType(gvRow.FindControl("TextBox1"), TextBox)
    Response.Write(dtRow.Text)

    dt = dal.ExecuteStoredProc(DAL.dbType.SqlServer, "UpdateData", "@col1", str + gvRow.Cells(0).Text, "@col2", str + gvRow.Cells(1).Text, "@col3", str + gvRow.Cells(2).Text, "@col4", str + gvRow.Cells(3).Text, "@col5", str + gvRow.Cells(4).Text, "@col6", dtRow.Text, "@col7", str + gvRow.Cells(6).Text, "@txt1", Textbox2.Text, "@txt2", Textbox3.Text)

    Next
End Sub 
```

但是，我在“dt（datatable）”表达式下不断收到那些蓝色的语法错误行......关于如何或为什么这样做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:59:06.700

好吧，“变量 gvRow 隐藏...”错误正在发生，因为您已经在循环之外声明了 gvRow，然后在循环的定义中重新声明了它。

```
Dim gvRow As GridViewRow    ' First declaration
Dim str As String = ""
For Each gvRow As GridViewRow In gv_Budgets.Rows    ' Skip the "As GridViewRow here 
```

另一个错误来自您的表达：

```
dt = dal.ExecuteStoredProc( ... 
```

我假设（因为你没有列出它） dt 是某个地方的 DataTable 类型的一些全局变量。在这种情况下，您的 sProc 似乎正在返回一个字符串并尝试将其插入到数据表对象中。确保您的 sProc 返回有效的数据表。同时，您可能会尝试将结果插入到字符串中，以使事情正常进行，直到您可以解决为止。

# php - 这是检查是否可以通过文件获取内容获取 URL 的好方法吗

> ID：10754771
> 
> 赞同：0
> 
> 时间：2012-05-25T12:50:38.133
> 
> 标签：php

```
if($url  = file_get_contents("https://api.twitter.com/1/statuses/user_timeline.json?screen_name=".$user)){}
else die("Invalid User"); 
```

这是运行此脚本的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:00:20.017

我不确定你的意思，但是如果你问你的电话`file_get_contents`是否正确，那么我必须说是的，因为，正如[这里](http://php.net/manual/en/function.file-get-contents.php)所说：

```
On failure, file_get_contents() will return FALSE. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:00:52.997

是的，您的代码是正确的，并且将填充`$url`页面的内容，或者如果请求的 URL 导致错误代码，则返回 false。但是请注意，值为`0`或为空字符串的页面也将被[解释为`false`](http://php.net/manual/en/language.types.boolean.php). 为避免这种情况，请使用强匹配`!==`：

```
if(false !== ($url  = file_get_contents("https://api.twitter.com/1/statuses/user_timeline.json?screen_name=".$user))) 
```

如果您只想检查 URL 是否有效，请使用[get_headers](http://php.net/manual/en/function.get-headers.php)仅通过 HTTP HEAD 请求获取响应的标头：

```
stream_context_set_default(
    array(
        'http' => array(
            'method' => 'HEAD'
        )
    )
);

$headers = get_headers('http://example.com'. 1);

// get the response code
$parts = explode(' ', $headers[0]);
$code = $parts[1];

if($code == 200) ... // success
if($code == 404) ... // failure 
```

这将使您免于通过网络传输整个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:06:27.893

您需要检查`=== false`（注意三个`=`），因为空内容或内容`0`也会导致测试失败。

[`$http_response_header`最好通过变量](http://php.net/http_response_header)检查 HTTP 状态代码- 它应该在 200 范围内 (200-299)。

# iphone - RestKit 请求似乎只工作一次

> ID：10754772
> 
> 赞同：3
> 
> 时间：2012-05-25T12:50:40.967
> 
> 标签：iphone, ios, ios5, restkit

好吧，我一整天都在调试，但无法弄清楚我的代码有什么问题。

目标是使用用户名/密码将带有 RestKit 的 POST 发送到 Heroku API，以检索 API 密钥。

问题是我只能发送一次请求。第二次发送请求时出现错误。（所以第一次我确实将 API 密钥绑定到我的对象，但第二次只是一个错误）

我正在使用当前版本的 RestKit (0.10)

**编码：**

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError: %@", error);
}
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObject:(id)object
{
    Account *account = (Account *)object;
    NSLog(@"API_KEY: %@", account.apiKey);
}

- (IBAction) login:(id)sender
{
    Account *account = [[Account alloc] init];
    account.email = [emailField text];
    account.password = [passwordField text];

    [[RKObjectManager sharedManager] postObject:account delegate:self];
} 
```

**日志**

```
/// ---> FIRST CLICK
2012-05-25 14:57:00.028 HerokuApp[11154:fb03] API_KEY: 1234567890
/// ---> SECOND CLICK
2012-05-25 14:57:03.427 HerokuApp[11154:fb03] W restkit.network:RKObjectLoader.m:281 Unable to find parser for MIME Type 'text/html'
2012-05-25 14:57:03.427 HerokuApp[11154:fb03] W restkit.network:RKObjectLoader.m:309 Encountered unexpected response with status code: 200 (MIME Type: text/html -> URL: https://api.heroku.com/login -- https://api.heroku.com -- https://api.heroku.com -- https://api.heroku.com)
2012-05-25 14:57:03.429 HerokuApp[11154:fb03] didFailWithError: Error Domain=org.restkit.RestKit.ErrorDomain Code=4 "The operation couldn’t be completed. (org.restkit.RestKit.ErrorDomain error 4.)" 
```

谁能帮我解释为什么会发生这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:40:04.943

当您登录时，API 的行为可能有所不同。从您的日志消息中，它似乎返回文本/html 内容，而不是 RestKit 知道如何处理的内容。

在 Wireshark 正在捕获数据包的机器上运行模拟器。重现错误，然后找到发生这种情况的 TCP 流并查看它。如果您需要帮助，请使用 Wireshark 中的“Follow Stream”结果更新您的问题，以便我们可以看到完整的 HTTP 流量。

# php - PHP脚本根据按下的按钮显示不同的数组

> ID：10754773
> 
> 赞同：0
> 
> 时间：2012-05-25T12:50:46.477
> 
> 标签：php, arrays, loops, switch-statement, decision-tree

我正在编写一个 PHP 脚本，它会询问 4 个是/否问题，并根据答案显示你最后想到的动物，但它还没有完成。我已经完成了前 3 组问题，共 4 组，但我不知道如何显示最后一组问题，然后在不做大约 6 或 7 个 switch/if 语句的情况下显示答案，有没有更好的方法来做它比这，也许使用某种循环？下面是我到目前为止编写的代码，您可以在[http://s504518.brunelweb.net/Creatures.php](http://s504518.brunelweb.net/Creatures.php)查看测验，尽管它还没有完成。任何帮助，将不胜感激。

```
<?php
session_set_cookie_params(2592000); //Sets cookie to last for 30 days
session_start();
?>

<html>
<head>
<title>Creature Guessing Game</title>
</head>
<body>
<h1>Creature Guessing Game</h1>
<p> Welcome to the creature guessing game! </p>
<p>Click the button below to start or restart the game </p>

<form method="post" action="Creatures.php">
<input type="submit" name="start" value="Start Game" />
</form>
 <?php
 $firstquestion = "Does the creature live on the land?"; //Question 1

 $questions = array( //Question 2   //Question 3
    array('Does it have wings?', 'Is it amphibious?'), //First answer is for yes, second for no

        //Question 4    //Question 5     //Question 6       //Question 7
    array('Can it fly?', 'Is it an insect?', 'Is it white?', 'Does it have tentacles?'), //First 2 are yes/no for Q2 and second 2 are yes/no for Q3

            //Question 8    //Question 9       //Question 10    //Question 11
    array('Is it brown?','Does it live in Australia?','Is it green?','Does it have 2 arms?'), //First 2 are yes/no for Q4, second 2 are yes/no for Q5

        //Question 12           //Question 13           //Question 14           //Question 15
    array('Does it live in the Artic?','Do they eat their legs in France?','Has is got eight of them?','Can you keep them as pets?')
    //First 2 are yes/no for Q6 and second 2 are yes/no for Q7
            );

 $answers1 = array('Eagle','Parrot','Ostrich','Turkey','Grasshopper','Ant','Gorilla','Tiger'); //Answers is Q1 is yes

 $answer2 = array('Penguin','Goose','Frog','Salamander','Octopus','Jellyfish','Goldfish','Eel'); //Answers is Q1 is no

 $number;
  function showquestion($number) {
      echo "<form method ='post' action='Creatures.php'>
     <input type='submit' name='answer$number' value='Yes' />
     <input type='submit' name='answer$number' value='No' />
     </form>";
 }
//If form not submitted, display form.
if (!isset($_POST['start'])){
?>
<?php
} //If form is submitted, process input
else{ 
echo $firstquestion;
     echo "<form method ='post' action='Creatures.php'>
     <input type='submit' name='yes1' value='Yes' />
     <input type='submit' name='no1' value='No' />
     </form>";
}
if ($_POST['yes1']) //If answer to Q1 is yes then display this
{
echo $questions[0][0];
showquestion(1);
}

if ($_POST['no1']) 
{
echo $questions[0][1]; //If answer to Q1 is no then display this
showquestion(2);
}

switch($_POST['answer1']) //Q2 - Show the next question depending on the button pressed
{
case 'Yes': echo $questions[1][0]; showquestion(3);
break;
case 'No': echo $questions[1][1]; showquestion(4);
}

switch($_POST['answer2']) //Q3 - Show the next question depending on the button pressed
{
case 'Yes': echo $questions[1][2]; showquestion(5);
break;
case 'No': echo $questions[1][3]; showquestion(6);
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:24:28.240

我建议不要使用数组，而是创建下表

问题表

```
QId,Question 
```

问题选项表

```
Qid, AID, Answer Description 
```

问题流表

```
QId, AID, QID 
```

当针对特定问题回答了问题时，您可以根据问题 ID 和答案 ID 推断下一个问题。添加新问题/更改问题流程也很简单。例如，根据您的图表，QuesitonsFlow 表将是这样的

```
QID | AnsID | NextQID
1   | 1     |  2
1   | 2     | 3 
```

这样你就可以扩展你的桌子。

# java - Hibernate 类转换异常

> ID：10754777
> 
> 赞同：1
> 
> 时间：2012-05-25T12:51:08.633
> 
> 标签：java, hibernate, annotations, classcastexception

尝试将结果集转换为映射类时，我遇到了带有休眠的类转换异常...我能够看到返回的结果集中的数据...但是它以 Object [] 的形式返回，并且我能够将 Object [] 设置为列表...我的休眠映射是否正确？我从查询中得到正确的数据，但它没有正确映射......

***映射***

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.ibm.db2.jcc.DB2Driver</property>
        <property name="hibernate.connection.url">jdbc:db2://****</property>
        <property name="hibernate.connection.username">*****</property>
        <property name="hibernate.connection.password">*****</property>
        <property name="hibernate.connection.pool_size">1</property>
        <property name="show_sql">true</property>
        <property name="hbm2ddl.auto">NONE</property>
        <property name="dialect">org.hibernate.dialect.DB2Dialect</property>
        <property name="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
        <property name="hibernate.current_session_context_class">thread</property>
        <mapping package="db2"/>
        <mapping class="db2.EQP_UT"/>
        <mapping class="db2.EQP_COMP_PRIMARY"/>
    </session-factory>
</hibernate-configuration> 
```

***映射类***

```
@Entity
@Table(name = "EQP_UT")
public class EQP_UT implements Serializable {

    @Id
    private String INITIAL;

    @Id
    private String NUMBER;
    private Integer AXL_CNT;
    private String EQP_TYP_CD;
    private String EIN;
    private Integer TRUK_CNT;

    @OneToOne
    @JoinTable(name = "EQP_COMP_PRIMARY",
        joinColumns = {@JoinColumn(name = "INITIAL"), @JoinColumn(name = "NUMBER")},
         inverseJoinColumns = {
            @JoinColumn(name = "INITIAL"), @JoinColumn(name="NUMBER")
            }  
    )
    public EQP_COMP_PRIMARY eqp_comp;

    public EQP_UT(){
        this.INITIAL = "";
        this.NUMBER = " ";
        int a = this.retrieve();
        System.out.println("This is the data is here..." + a);
    }

    public String getNumber()
    {
        return NUMBER;
    }

    public void setNumber(String num)
    {
        this.NUMBER = num;
    }

    public String getInitial()
    {
        return INITIAL;
    }

    public void setInitial(String init)
    {
        this.INITIAL = init;
    }

    public int retrieve()
    {
        Session session = null;
        Transaction transaction = null;

        try{
            session = HibernateUtil.getDB2SessionFactory().getCurrentSession();
            transaction = session.beginTransaction();

            String init = "AARE";
            String number = String.format("%010d", 9350);
            Integer num = Integer.parseInt(number);

            String queryString = "SELECT A.INITIAL, A.NUMBER, " + 
                    "A.TRUK_CNT, A.EQP_TYP_CD, A.AXL_CNT, " +
                    "B.TRUK_AXL_CNT, A.EIN FROM EQP_UT AS A " +
                    "LEFT JOIN A.eqp_comp AS B " +
                    "WHERE A.INITIAL||A.NUMBER IN (:carList) AND A.INITIAL IN (:initList) AND A.NUMBER IN (:numberList) " + 
                    "AND B.TRUK_AXL_CNT > 0";

            Query query = session.createQuery(queryString);
            query.setParameterList("carList", Globals.returnCarList());
            query.setParameterList("initList", Globals.returnCarListCarInits());
            query.setParameterList("numberList", Globals.returnCarListCarNumbers());

            @SuppressWarnings("unchecked")
            List obj =  query.list();

            System.err.println("CLASS NAME IS " + obj.get(0).getClass().getClass().getName());

            Globals.eqpList = obj; //Globals.eqpList is List<EQP_UT>

            session.getTransaction().commit(); 

            return 10;      
        }
        catch(HibernateException ex)
        {
            ex.printStackTrace();
            transaction.rollback();

        }
        catch(Exception ex)
        {
            System.err.println(ex.getMessage());
        }

        return -1;  
    }   
} 
```

***加入班级***

```
@Entity
@Table(name = "EQP_COMP_PRIMARY")
public class EQP_COMP_PRIMARY implements Serializable{

        private Integer TRUK_AXL_CNT;

        @Id
        private String INITIAL;
        @Id
        private String NUMBER;
} 
```

***主要的***

```
//tons more code...
for(int i = 0; i < Globals.eqpList.size(); i++)
{
     EQP_UT e = Globals.eqpList.get(i); //class cast exception - and Globals.eqpList is List<EQP_UT>
}
//tons more code... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:13:29.123

对于测试，我建议您在产生类强制转换异常的语句周围放置一个 try-catch 子句，在 catch 块中设置断点并查看第 i 个元素真正属于哪个类。

对于您的问题：

您正在使用 HQL`SELECT`语句。使用此语句的查询返回一个列表，但列表中的元素不一定是 EQP_TU 的实例；它们也可以是对象数组。

为您解决方案：

使用`FROM`语句而不是`SELECT`语句。在您的代码中：

```
String queryString = "FROM EQP_UT AS A " +
                "LEFT JOIN A.eqp_comp AS B " +
                "WHERE A.INITIAL||A.NUMBER IN (:carList) AND A.INITIAL IN (:initList) AND A.NUMBER IN (:numberList) " + 
                "AND B.TRUK_AXL_CNT > 0"; 
```

然后，您可以确保获得一个列表，其中包含您在 FROM 之后提到的类的实例（代码中的 EQP_UT）。

# jquery-ui - 如何防止 jQuery UI 滑块句柄重叠？

> ID：10754778
> 
> 赞同：11
> 
> 时间：2012-05-25T12:51:10.950
> 
> 标签：jquery-ui

使用 jQuery-UI 1.7，我集成了滑块。一切正常，但滑块的手柄在拖动时相互重叠。我该如何防止这种情况。

你可以在这里看到我的 ui 滑块

默认视图：

![在此处输入图像描述](../Images/250b4658937f2f5d74401633adc339a4.png)

重叠视图：

![在此处输入图像描述](../Images/519b0ab742d1d1df3c34e7a235c348f6.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-25T13:00:37.333

您可以通过检测`slide`事件处理程序中的重叠并返回 false 以防止发生滑动来完成此操作。例子：

```
$( "#slider-range" ).slider({
    range: true,
    min: 0,
    max: 500,
    values: [ 75, 300 ],
    slide: function( event, ui ) {
        if ( ( ui.values[ 0 ] + 20 ) >= ui.values[ 1 ] ) {
            return false;
        }
    }
});
```

```
body { padding: 50px; }
```

```
<link href="http://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<div id="slider-range"></div>
```

请注意，在此示例中，值`20`只是根据句柄的宽度进行硬编码。根据您的用例，您必须将其更改为任何有意义的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-20T07:32:11.467

```
<script>
    $( "#slider-range" ).slider({
        range: true,
        min: 0,
        max: 500,
        values: [ 75, 300 ],
        slide: function(event, ui) {
            if ( (ui.values[0] + 55) >= ui.values[1] ) {
                return false;
            }
        }
    });​
</script> 
```

# mysql - 分组可排序天时从 group_concat 中选择第一行和最后一行

> ID：10754779
> 
> 赞同：7
> 
> 时间：2012-05-25T12:51:10.927
> 
> 标签：mysql, group-concat

再次参考我之前关于group concat [Mysql的问题，group by并显示其余行](https://stackoverflow.com/questions/10744778/mysql-again-group-by-and-display-rest-of-rows)

我需要从该查询中获取第一天和最后一天

例如

```
row 3 from 8,9,10 to first collumn 8, last collumn 10
row 5 from 21,22,23,24,28,29,30 to first collumn 21, last collumn 30
row 6 from 17,21,22,23,24,25 to first collumn 17 last collumn 25

SUBSTR(GROUP_CONCAT(DAY),-1) as fl 
```

但它给了我最后一个字符，例如，很少有 1 或 2 个字符的行

```
1,2,3,22
1,3,6,3 
```

在第一个示例中，它给了我 2，而不是 22：/

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T13:05:13.710

另一种选择（除了迈克尔的解决方案）是使用 SUBSTRING_INDEX：

```
SUBSTRING_INDEX(str,delim,count) 
```

和

```
count = 1 
```

你得到第一天，

和

```
count=-1 
```

你得到最后一个

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T12:58:53.137

不要浪费时间尝试解析`GROUP_CONCAT()`. 相反，只需将`MIN()`and`MAX()`与`CONCAT()`.

```
SELECT 
  user,
  CONCAT(MIN(DAY)), ',', MAX(DAY)) AS f1
FROM yourtable
GROUP BY user 
```

# android - 如何显示两个文本字段

> ID：10754780
> 
> 赞同：0
> 
> 时间：2012-05-25T12:51:15.870
> 
> 标签：android

我有两个活动，比如 A1 和 A2，它们都有两个编辑文本字段，一个用于标题，另一个用于故事。当用户在活动 A1 中的这两个文本字段中输入文本并按下保存按钮时，该条目将保存在列表视图中。现在，当用户再次点击刚刚保存的条目时，标题和故事应该会显示在活动 A2 的标题和故事文本字段中。我在活动 A2 中获得了标题，但我不明白为什么故事部分没有显示。

这是单击项目时活动 A1 的代码。

```
static String title = "";
static String story = "";

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // here arg3 is the id of the item which is pressed
    registerForContextMenu(arg1);
    id_item_clicked = arg3;
    position_item = arg2;
    Cursor c = (Cursor) arg0.getItemAtPosition(arg2);
    title = c.getString(c.getColumnIndex(DataHolder.KEY_TITLE));
    story = c.getString(c.getColumnIndex(DataHolder.KEY_STORY));
    Intent i = null;

    // remove this toast later
    Toast.makeText(DiaryActivity.this, "TestClick", Toast.LENGTH_SHORT).show();

    try {
        i = new Intent(A1.this,
                Class.forName("com.android.project.A2"));
        i.putExtra(ROW_ID, arg3);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }

    startActivity(i);
} 
```

这是 Activity A2 的代码，它在两个文本字段中显示文本：

```
EditText title_read, display_story_read;
private long rowId;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.readdata);

    // bundle receives the row id of the item clicked
    Bundle extras = getIntent().getExtras();

    rowId = extras.getLong("row_id");

    setupVaiables();

    title_read.setText(A1.title);
    display_story_read.setText(A1.story);
} 
```

标题正在显示，但故事部分没有，请帮我解决这个问题，我已经尝试了几个小时。有人能告诉我为什么我的问题只得到几个答复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:57:16.427

以这种方式传递变量是不好的做法。您可以通过意图传递变量：

```
i.putExtra(TITLE_KEY, title);
i.putExtra(STORY_KEY, story); 
```

或者在活动 A2 中从数据库中获取标题和故事，而不是 A1。

您确定故事字段是在数据库中编写的吗？检查您获得的故事的价值，将其写在日志或敬酒中。

* * *

旁注：您可以从类中构造意图：

```
Intent i = new Intent(A1.this, A2.class); 
```

在这种情况下，您不需要`try..catch`阻止。

# xcode - Xcode 在没有指定和错误的情况下失败

> ID：10754784
> 
> 赞同：20
> 
> 时间：2012-05-25T12:51:35.120
> 
> 标签：xcode, build, project, workspace

突然间，我的项目无法在 Xcode 中构建。如果我查看日志，我会看到正在构建所有需要的依赖项，然后我收到一个奇怪的错误：

```
Verify final result code for the complete build operation
Build operation failed without specifying any errors. 
Individual build tasks may have failed for unknown reasons. 
```

我删除了我的代码目录并用备份替换它，进行了清理，尝试单独构建所有其他组件（它们成功） - 没有任何效果。我尝试了命令行构建，同样的问题。

这个错误在谷歌上只有几条点击，没有提供任何有用的建议。

有人可以帮忙吗？

更新：当我运行命令行构建时，我看到以下错误：

```
2012-05-25 08:55:53.830 xcodebuild[3358:4203] No recorder, buildTask: <Xcode3BuildTask: 0x400f35e60:'ProcessPCH MyProject-Prefix.pch':REfc(32370056113422336):deps=0:phaseNum=4> 
```

我检查了 xcodebuild 的输出，它返回“65”。

我认为 MyProject-Previx.pch 文件可能有问题，所以我关闭了“Precompile Prefix Header”，现在我在另一个文件中遇到了同样的错误：

```
2012-05-25 09:15:11.784 xcodebuild[3882:3703] No recorder, buildTask: <Xcode3BuildTask: 0x40048ab60:'CompileC HelperRoutines.m':REfc(33777199068741632):deps=0:phaseNum=4> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-07-29T16:40:14.617

> 构建操作失败，但未指定任何错误。个别构建任务可能因未知原因而失败。一个可能的原因是如果有太多（可能是僵尸）进程；在这种情况下，重新启动可能会解决问题。下面可能会列出一些单独的构建任务失败（最多 12 个）。

我最近在运行 Xcode 9.0 Beta 3 和 Xcode 8.3.3 时一直遇到这个问题。

修复方法是删除派生数据文件夹中的*所有*。然后它似乎再次起作用。

```
rm -rf ~/Library/Developer/Xcode/DerivedData 
```

注意：只是清理构建或删除项目的当前构建文件夹似乎没有帮助。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T18:41:45.157

我遇到了这个错误，它激怒了我一个小时左右。下面的答案对我有很大帮助：基本上你的机器有大量正在运行的进程，XCode 无法处理它，重新启动你的机器是最好的答案。

[https://stackoverflow.com/a/13183522/1863655](https://stackoverflow.com/a/13183522/1863655)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-01T20:25:16.063

我环顾四周，唯一对我有用的是缩短我的项目文件夹名称。

所有其他尝试：重新启动、重新克隆、删除派生数据等均无效。唯一有效的是使项目文件夹名称更短。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-03T05:48:57.653

```
Build operation failed without specifying any errors. Individual build tasks may have failed for unknown reasons.
One possible cause is if there are too many (possibly zombie) processes; in this case, rebooting may fix the problem.
Some individual build task failures (up to 12) may be listed below. 
```

当总路径长度太长时会发生这种情况。

**更改文件夹名称**或目录位置，比以前更短。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-27T11:07:26.547

我也遇到了同样的错误。我被编辑了 .pch (Prefix Header) 文件。然后我开始收到这个奇怪的错误。然后我删除了我在 .PCH 中制作的所有版本。然后我退出了我的 Xcode。当我重新启动 Xcode 时，这个奇怪的错误消失了。

希望这也对你有用。祝你好运好友（y）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-26T16:28:05.290

祝大家 2019 年快乐，但遗憾的是，这在 Xcode 10.2 中仍然可能发生。

我在 Xcode 中打开了四个项目，但只有一个以这种方式失败。我尝试了主菜单 > *Product* > *Clean Build Folder*。小进度旋转器启动，5 分钟后仍在旋转。嗯。

所以我退出了 Xcode 并在终端中做了一个`cd ~/Library/Developer/Xcode/DerivedData`. 虽然`ls -alww`只显示了一个以我的其他项目命名的子文件夹，但正如预期的那样，有**五个子文件夹的名称以问题项目的名称开头**。我把它们都删了

`rm -R ProblemProjectName-*`

并重新启动了 Xcode。问题解决了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-25T23:56:01.423

我的有时会出现此错误，LLVM 也因退出代码 1 而失败，而 clang 因退出代码 255 而失败，每次都在不同的代码位置。我只需要重新启动（OS X 10.7，Xcode 4.5）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-18T19:08:58.770

我重新启动，没有运气。然后我注意到当我重新启动 XCode 时，我的一个选项卡被加载，其中没有文件。我弄清楚我在其中编辑了什么文件，打开它，保存它，然后我就可以构建了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-15T22:52:53.173

在 XCode 5 上，这些答案都不适合我。

幸运的是，我仍然只测试 XCode 5 - 我保留了 XCode 4。

XCode 5 根本不会构建我的两个项目中的一个，声称我的库没有使用正确的设置构建，并且我一直在另一个页面上遇到此页面上描述的错误......所以我坚持XCode 4，它完美地构建了我的两个项目。

如果您在 XCode 5 上遇到此问题，请考虑将“恢复到 XCode 4”作为另一种策略。

总的来说，重复运行一个程序，不管是否是 XCode，都会将你的系统降级到你必须重新启动的地步，这并不能让我对该程序充满信心。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-23T15:54:22.760

对于 Xcode 5.0.0，此错误是在更新 CLI 工具后引起的。

更新到 Xcode 5.0.1 并再次安装所有必需的组件仍然没有修复错误。但是，5.0.1 非常友好，实际上发出了一个有用的错误。

`/bin/mkdir -p /Users/xxx/Documents/XCode/SampleApp/bin/SampleAppDebug.app/Contents`

`error: (null)`

这导致我查看 bin 文件夹，并发现使用损坏的 CLI 工具构建的 5.0.0 已在 bin/ 中使用 SampleAppDebug.app 与派生信息文件夹建立了符号链接，由于某种原因它无法写入。

我手动删除了 bin/ 文件夹的所有内容并重建没有错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-19T06:15:42.293

我遇到了同样的问题。我更改了系统时间。我删除了文件“/Users/YOURNAME/Library/Developer/Xcode/DerivedData/ModuleCache/YOURBUNDLEID/UIKit.pcm”。然后它对我来说很好。试试这个。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-26T20:29:40.653

我在框架搜索路径中添加了头文件位置......从顶级项目设置中删除它为我解决了这个问题。

改变后果自负。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-07-02T09:43:58.390

唯一对我有用的解决方法 -**将您的代码推送到 git repo 并将其克隆到新位置**。我强烈建议重新克隆您的 repo，因为如果您更喜欢重新启动/关闭和 onXcode，您将处理一些随机问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-27T04:57:18.460

您是否将“执行单对象预链接”设置为“是”？尝试将其关闭。

我有类似的问题。我在静态库中有大量文件。减少文件数量或将“执行单对象预链接”设置为 NO 解决了我的问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-05T13:58:35.993

对于 Mac OS X Yosemite 10.10.3 上的 Xcode 6.3.2，相同的错误和以下对我**不起作用：**

1.  Git 放弃了对上一个成功构建点的更改
2.  从内置模板从头开始创建新项目（尽管我不记得它是否成功构建）
3.  重启 Xcode
4.  系统重启

并且以下**工作**：

1.  我早上遇到了这个问题，晚上通过几次 Xcode 重启和系统重启以及新项目的创建解决了。所以，我不确定真正触发了什么。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-02-19T13:37:26.600

我今天遇到了同样的问题。清理 DerivedData 并将项目克隆到其他地方并没有帮助。解决我的问题是从`Disk Utility`应用程序中修复音量并删除所有 Xcode 插件。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-02-23T13:39:59.773

我在 Xcode 9.2 上运行的项目没有任何代码更改也遇到了同样的问题。看起来如果您有一些运行脚本或附加到项目的外部构建系统，这可能会导致问题。尝试提交或放弃更改并重新构建。如果它仍然存在，请删除本地 repo 并再次克隆。还要为项目位置维护较小的文件夹名称。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-11-04T22:57:13.290

在 iOS 应用程序中添加 watchOS 目标时，使用 Xcode 11.1 和 SwiftUI 时出现同样的问题：

*   转到菜单**Xcode / 首选项 / 位置**
*   在 Finder 中打开**Derived Data文件夹，单击***/Users/yourUserName/Library/Developer/Xcode/DerivedData旁边的箭头*
*   找到您的应用派生数据文件夹并将**其删除**
*   菜单产品/清洁构建文件夹

您应该能够再次编译。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-03-02T09:04:06.630

我知道这回答太晚了，但我正在回答，因为上述解决方案都没有奏效。对我来说，重新启动、清理构建、删除派生数据都不起作用。因为问题不是由于任何僵尸对象或类似的东西。我正在使用 Xcode 11。我认为这是一个 Xcode 错误，有时错误不会显示在问题导航器中。但是不要担心在报告导航器中检查构建报告（项目导航器中的最后一个选项卡：看起来像一个带有行的注释框。或者只是**cmd + 9**）。

[![报告导航器](../Images/91fad9dfb63c9f724abd72124598dfb1.png)](https://i.stack.imgur.com/kpGWb.png)

单击相关构建并解决问题，我的 pods 目录中缺少文件。 [![构建日志](../Images/fd7d061e112119640420fef4303d11e4.png)](https://i.stack.imgur.com/BT6aS.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-03-18T07:55:59.870

只需尝试重命名项目的文件夹名称。它对我有用

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-04-13T20:05:02.847

我遇到了同样的问题，但是接受的解决方案对我不起作用，起作用的是：

*   删除**.workspace**文件
*   删除**Podfile.lock**文件
*   删除**Pods**文件夹
*   `pod deintegrate ; pod install`

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-10-05T11:09:25.683

对我来说，它是通过更改为新的构建系统来修复的（在文件 -> 项目设置中）

我有**Xcode 11.7**

# bash - 比较两个文件中的值

> ID：10754788
> 
> 赞同：2
> 
> 时间：2012-05-25T12:51:45.620
> 
> 标签：bash, shell

我正在比较两个文件，每个文件都有一列和 n 行。

文件 1

文西·亚历
克斯·
罗宾

文件 2

艾伦·
亚历克斯
·亚伦·
拉尔夫·
罗宾

如果文件 1 的数据存在于文件 2 中，则它应该在制表符分隔的文件中返回 1 或 0。

像这样的东西

文西 0
亚历克斯 1
罗宾 1

我正在做的是

```
#!/bin/bash
for i in `cat file1 `
do
cat file2 | awk '{ if ($1=="'$i'") print 1 ; else print 0 }'>>binary
done 
```

上面的代码没有给我我正在寻找的输出。

请查看并建议更正。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:47:04.370

简单的 awk 解决方案：

```
awk 'NR==FNR{ seen[$0]=1 } NR!=FNR{ print $0 " " seen[$0] + 0}' file2 file1 
```

简单解释：对于file2中的行，NR==FNR，所以执行第一个动作，我们简单记录下看到了一行。在 file1 中，执行第二个操作并打印该行，然后是一个空格，然后是“0”或“1”，具体取决于该行是否在 file2 中看到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T13:47:11.733

AWK*喜欢*做这种事情。

```
awk 'FNR == NR {a[tolower($1)]; next} {f = 0; if (tolower($1) in a) {f = 1}; print $1, f}' file2 file1 
```

交换参数列表中 file2 和 file1 的位置，以使 file1 成为字典而不是 file2。

当`FNR`（当前文件中的记录号）和`NR`（到目前为止所有记录的记录号）相等时，则第一个文件是正在处理的文件。简单地引用一个数组元素就可以实现它。这设置了字典。该`next`指令读取下一条记录。

一旦`FNR`和`NR`不相等，后续文件将被处理，并在字典数组中查找它们的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T13:00:47.113

下面的代码应该做到这一点。

仔细查看`BEGIN`和`END`部分。

```
#!/bin/bash
rm -f binary
for i in $(cat file1); do
     awk 'BEGIN {isthere=0;} { if ($1=="'$i'") isthere=1;} END { print "'$i'",isthere}' < file2 >> binary
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T13:06:27.907

该`comm`命令可以为您进行这种比较。

以下方法只执行一次，并且可以很好地扩展到非常大的输入列表：

```
#!/bin/bash
while read; do
        if [[ $REPLY = $'\t'* ]] ; then
                printf "%s\t0\n" "${REPLY#?}"
        else
                printf "%s\t1\n" "${REPLY}"
        fi
done < <(comm -2 <(tr '[A-Z]' '[a-z]' <file1 | sort) <(tr '[A-Z]' '[a-z]' <file2 | sort)) 
```

另请参阅[BashFAQ #36](http://mywiki.wooledge.org/BashFAQ/036)，它直接在点上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T13:09:04.457

有几种体面的方法。您可以简单地使用[逐行设置数学](http://mywiki.wooledge.org/BashFAQ/036)：

```
{
    grep -xF -f file1 file2 | sed $'s/$/\t1/'
    grep -vxF -f file1 file2 | sed $'s/$/\t0/'
} > somefile.txt 
```

另一种方法是简单地组合文件并使用 uniq -c，然后只需将数字列与 awk 之类的东西交换：

```
sort file1 file2 | uniq -c | awk '{ print $2"\t"$1 }' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T13:30:13.403

另一个解决方案，如果您安装了 python。如果您熟悉 Python 并对解决方案感兴趣，您只需要一点格式。

```
#/bin/python
f1 = open('file1').readlines()
f2 = open('file2').readlines()
f1_in_f2 = [int(x in f2) for x in f1]
for n,c in zip(f1, f1_in_f2):
    print n,c 
```

# java - 访问其他包中的公共变量

> ID：10754805
> 
> 赞同：-3
> 
> 时间：2012-05-25T12:52:41.797
> 
> 标签：java

因此，可以从任何地方访问公共变量，甚至可以从其他包访问。但是，当我尝试从外部包创建对象时，为了访问它包含的公共变量，我收到以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    Foo cannot be resolved to a type 
```

我的代码：

```
Foo obj = new Foo(); 
```

我想知道创建存在于包中的对象而不是创建它的对象的正确方法是什么？

我感谢在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:54:00.983

你有`import Foo;` 吗？

具有限定名称`com.some.package.Foo`

如果你声明你的班级`Foo`

```
package com.mycompany.app.package1;

public class Foo{} 
```

然后你需要通过写来导入这个类型

```
import com.mycompany.app.package1.Foo; 
```

在使用的任何其他（除`com.some.package`）包`Foo`中

* * *

**看**

*   [使用包](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)

# .net - 寻找一些关于用户控件/继承的 WPF 建议

> ID：10754809
> 
> 赞同：0
> 
> 时间：2012-05-25T12:53:01.300
> 
> 标签：.net, wpf

我对 WPF 相当陌生，并希望创建我所谓的“小部件框架”。我的应用程序将有一个带有画布的窗口，我可以在其中放置一个或多个“小部件”用户控件，这些控件可以拖动并调整大小。所有小部件都有一个共同的“镶边”，可能顶部带有按钮以最大化/最小化、打开配置对话框等。

在我的 winform 时代，我会创建一个包含通用 UI 元素的基类用户控件，每个小部件用户控件都从该控件继承，但是我相信 WPF 没有等效于用户控件继承。

所以我正在寻找让我开始的指针。答案是否存在于模板、用户控件中？任何代码片段或示例将不胜感激！

要了解我在寻找什么，请查看 Codeplex 上的“Chronos WPF”框架 - [http://chronoswpf.codeplex.com/](http://chronoswpf.codeplex.com/)。它是一个小部件框架等等——我徒劳地试图解开小部件的东西，但源是一个巨大的野兽，而且还与一个复合应用程序框架交织在一起。唉，它也不再被积极开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:10:37.767

一个可能的基于 MVVM 的解决方案如下所示：

1.  将 chrome 创建为 UserControl 并将其绑定到 ChromeViewModel 以执行操作
2.  在 chrome 中使用 ContentPresenter 控件，然后将其绑定到 ChromeViewModel 上的 Content 属性。这个 Content 属性应该是一个 WidgetViewModel，它是在您创建小部件时在运行时设置的。
3.  您应该使用 DataTemplate 上的 TargetType 属性指定一个与每个 WidgetViewModel 关联的 DataTemplate（确保将它们放在自己的资源字典文件中）。

# mysql - 每个不同列值的自动编号和重置计数

> ID：10754812
> 
> 赞同：4
> 
> 时间：2012-05-25T12:53:11.657
> 
> 标签：mysql, sql

我试图弄清楚如何为给定列中的每个不同值重置 mysql 中的行编号。最好用一个例子来解释：

我有一组进行客户访问的用户，每个客户可能会被访问​​多次，并且我的表记录了访问的日期（但不记录这是第一次、第二次、第三次等访问）。所以我的桌子看起来像：

```
clientid   visitdate
100        10-apr-2012
101        15-apr-2012
101        25-apr-2012
102        26-apr-2012
100        28-apr-2012 
```

我要找出的是在给定日期期间进行了多少（例如）第二次访问。所以在上面的数据中，有 3 次第一次访问和 2 次第二次访问。

我假设我需要使用类似@rownum 功能的东西，如下所示：

SELECT visitdate, clientid @rownum := @rownum + 1 as row from visit, (SELECT @rownum := 0) a ORDER BY clientid,visitdate

这给了我：

```
clientid   visitdate     row
100        10-apr-2012   1
100        28-apr-2012   2
101        15-apr-2012   3
101        25-apr-2012   4
102        26-apr-2012   5 
```

但我真正想要的是：

```
clientid   visitdate     row
100        10-apr-2012   1
100        28-apr-2012   2
101        15-apr-2012   1
101        25-apr-2012   2
102        26-apr-2012   1 
```

我无法弄清楚如何为每个客户端重置行计数器。

也许我以错误的方式处理这个问题，我可以在应用程序 (PHP) 代码中进行这些计算，但感觉应该可以在 db.xml 中实现。

我见过 SQLServer 的方法（例如：[http ://www.sqlmonster.com/Uwe/Forum.aspx/sql-server-programming/74891/Auto-number-and-reset-based-on-data-value- in-a](http://www.sqlmonster.com/Uwe/Forum.aspx/sql-server-programming/74891/Auto-number-and-reset-based-on-data-value-in-a)），但这似乎不适用于mysql？

非常感谢任何帮助/建议，干杯，亚历克斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T13:03:47.113

未经测试，但这应该可以解决问题：

```
SELECT
IF(@prev != a.clientid, @rownum:=1, @rownum:=@rownum+1) as rownumber, @prev:=a.clientid, a.*
FROM (
SELECT 
visitdate, 
clientid 
FROM visit, (SELECT @rownum := 0, @prev:='') sq
ORDER BY clientid,visitdate
) a 
```

顺便说一句，没有“@rownum 功能”，它只是一些自制的“解决方案”，@rownum 只是一个变量。您也可以将其命名为@whatever。

# view - 将一个视图添加到在两个视图中都可见的两个视图中，一个视图在一个视图中打开

> ID：10754814
> 
> 赞同：1
> 
> 时间：2012-05-25T12:53:37.290
> 
> 标签：view, rcp, perspective

我在我的应用程序中遇到了一个问题，我需要在两个透视图中显示给定的视图（添加到两个不同的透视图），如果在视图中具有相同内容的任何透视图中打开一次。这意味着如果我在任何一个透视图中打开视图，当我们切换透视图时它应该为另一个透视图打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:13:42.383

您描述的行为在某种程度上违反了 Eclipse UI 指南和 Eclipse UI 隐喻的想法。但是，您可以使用如下代码实现所需的行为：

```
public class MyViewPart extends ViewPart {

    public final static String ID = "foo.bar.perspectivesync.view";

    private final class PerspectiveListenerImplementation implements IPerspectiveListener4 {
        final Set<String> PERSPECTIVE_IDS = new HashSet<String>(Arrays.asList("foo.bar.perspectivesync.p1",
                                                                              "foo.bar.perspectivesync.p2"));

        @Override
        public void perspectiveActivated(final IWorkbenchPage page, final IPerspectiveDescriptor perspective) {                
            if (PERSPECTIVE_IDS.contains(perspective.getId())) {
                if (!viewIsAlreadyInPage(MyViewPart.ID, page)) {
                    try {
                        page.showView(MyViewPart.ID);
                    }
                    catch (PartInitException e) {
                        // TODO log exception properly
                        e.printStackTrace();
                    }
                }
            }
        }

        private boolean viewIsAlreadyInPage(final String id, final IWorkbenchPage page) {
            boolean result = false;
            IViewReference[] viewReferences = page.getViewReferences();
            for (IViewReference ref: viewReferences) {
                if (id.equals(ref.getId())) {
                    result = true;
                }
            }
            return result;
        }

        //@formatter:off
        @Override public void perspectiveChanged(final IWorkbenchPage page, final IPerspectiveDescriptor perspective, final String changeId) {}
        @Override public void perspectiveChanged(final IWorkbenchPage page, final IPerspectiveDescriptor perspective, final IWorkbenchPartReference partRef, final String changeId) {}
        @Override public void perspectiveSavedAs(final IWorkbenchPage page, final IPerspectiveDescriptor oldPerspective, final IPerspectiveDescriptor newPerspective) {}
        @Override public void perspectiveOpened(final IWorkbenchPage page, final IPerspectiveDescriptor perspective) {}
        @Override public void perspectiveDeactivated(final IWorkbenchPage page, final IPerspectiveDescriptor perspective) {}
        @Override public void perspectiveClosed(final IWorkbenchPage page, final IPerspectiveDescriptor perspective) {}
        @Override public void perspectivePreDeactivate(final IWorkbenchPage page, final IPerspectiveDescriptor perspective) {}
        //@formatter:on
    }

    private final IPerspectiveListener4 perspectiveListener = new PerspectiveListenerImplementation();

    @Override
    public void init(final IViewSite site) throws PartInitException {
        super.init(site);
        site.getWorkbenchWindow().addPerspectiveListener(perspectiveListener);
    }

    @Override
    public void dispose() {
        getSite().getWorkbenchWindow().removePerspectiveListener(perspectiveListener);
        super.dispose();
    }

    //@formatter:off
    @Override public void createPartControl(final Composite parent) {}
    @Override public void setFocus(){}
    // @formatter:on

} 
```

# c# - 什么时候应该在 C# 2.0 及更高版本中使用 `Object`？泛型会替换所有出现的对象吗？

> ID：10754821
> 
> 赞同：7
> 
> 时间：2012-05-25T12:54:01.547
> 
> 标签：c#, .net, generics, .net-2.0

`Object`我的同事声称在 .NET 2.0 及更高版本中声明变量、返回参数等时永远不需要使用。

他进一步说，在所有这些情况下，都应该使用 Generic 作为替代方案。

这种说法是否有效？在我的脑海中，我用它`Object`来锁定并发线程......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T12:56:00.643

`object`在很多情况下，泛型确实胜过，但仅限于**已知**类型的情况。

有时您仍然不知道类型 - `object`，或者其他一些相关的基本类型是这些情况下的答案。

例如：

```
object o = Activator.CreateInstance("Some type in an unreferenced assembly"); 
```

您将无法转换该结果，或者甚至无法在编译时知道类型是什么，因此`object`是有效的用途。

您的同事过于笼统地概括了-也许将他指向这个问题。泛型很棒，给了他那么多，但它们并没有“取代” `object`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T12:55:38.720

`object`非常适合锁。泛型允许您正确键入它。您甚至可以将其限制为接口或基类。你不能用`object`.

考虑一下：

```
void DoSomething(object foo)
{
   foo.DoFoo();
} 
```

没有任何铸造是行不通的。但是对于泛型...

```
void DoSomething<T>(T foo) where T : IHasDoFoo
{
   foo.DoFoo();
} 
```

使用 C# 4.0 和`dynamic`，您可以将其推迟到运行时，但我真的没有看到需要。

```
void DoSomething(dynamic foo)
{
   foo.DoFoo();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T12:55:54.743

将互操作与 COM 一起使用时，您并不总是有选择的余地……泛型并不能真正解决互操作的问题。

`Object`也是 a 最轻量级的选项`lock`，正如[@Daniel A. White在](https://stackoverflow.com/users/23528/daniel-a-white)[他的回答](https://stackoverflow.com/a/10754838/1583)中提到的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T12:57:46.523

是的，有有效性。[这里](https://stackoverflow.com/questions/4424030/c-system-object-vs-generics)已经进行了很好的细分。

但是，我无法确认是否没有您*永远不会*使用对象的实例，但我个人不使用它们，甚至在泛型之前我避免装箱/拆箱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T12:58:04.603

有很多反例，包括你提到的那个，使用对象进行同步。

另一个例子是`DataSource`数据绑定中使用的属性，它可以设置为多种不同的对象类型之一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T18:57:33.913

广泛的反例：System.Collections 命名空间在 .NET 4 中仍然存在并且运行良好，没有任何弃用迹象或警告不要在 MSDN 上使用它。您在那里找到的方法获取并返回对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-27T19:11:09.237

问题中固有的实际上是两个问题：

1.  何时应使用“对象”类型的存储位置
2.  什么时候应该使用“Object”类型的实例

类型的存储位置`Object`显然必须在任何需要保存对该类型实例的引用的情况下使用（因为对此类实例的引用不能保存在任何其他类型中）。除此之外，它们应该在它们持有对没有单一有用的公共基类型的对象的引用的情况下使用。这在许多使用反射的场景中显然是正确的（其中对象的类型可能取决于在运行时计算的字符串），但也可以应用于某些类型的集合，其中填充了在编译时类型已知的东西。`string`作为一个简单的例子，一个可以表示一个由序列索引的分层集合，`int`通过让每个节点的类型`Object`为`String``Object[]`. 从这样的集合中读取项目会有些笨拙，因为必须检查每个项目并确定它是否是`Object[]`or的实例`String`，但是这种存储方法将非常节省内存，因为唯一的对象实例是那些保存字符串或数组的。可以使用`Node`type 字段和 type 字段定义`String`类型`Node[]`，甚至可以`Node`使用派生类型`StringNode`（包括 type 字段`String`）和`ArrayNode`（带有type 字段）定义抽象类型，`Node[]`但这种方法会增加使用的堆对象的数量保存一组给定的数据。

请注意，通常最好设计集合，以便要检索的对象的类型不取决于被推入集合中的内容（可能对不同的类型使用“并行集合”），但并非一切都以语义方式进行。

关于 type 的实例`Object`，我不确定他们可以扮演的任何角色都不能被称为类似`TokenObject`which 继承自的密封类型所满足`Object`。在许多情况下，拥有一个唯一目的是成为唯一标记的对象实例很有用。从概念上讲，这样说可能会更好：

```
令牌对象 myLock = 新令牌对象；

```

不如说

```
对象 myLock = 新对象；

```

因为前一个声明会清楚地表明，声明的变量永远不会被用来保存除了令牌对象之外的任何东西。尽管如此，通常的做法是`Object`在对象唯一重要的是它的引用在程序的整个生命周期中将是唯一的情况下使用类型的实例。

# c# - 代码生成的 XML 输出中的 C# XML 格式错误

> ID：10754824
> 
> 赞同：1
> 
> 时间：2012-05-25T12:54:37.037
> 
> 标签：c#, xml, formatting

所以我有一个已经存在的文件，我读取了这个文件并向其中添加了一些节点。由于所需处理的性质，我的代码处于循环中，因此对于给定数据表中的每一行，我打开现有文件，写入新节点，然后关闭文件。

第一次迭代完美地插入了节点组。此后的每次迭代都是有问题的，并且以某种方式添加到第一个分组而不是创建自己的分组。

这是每个分组的样子，也是它生成第一个分组的方式：

```
 <item identifier="ITEM-F2D7FEDF240B4DCCBF346DBE2C47AC89" identifierref="RES-770DCE40C5BA4E97B1E3B3DB49BBBD4F" isvisible="true" parameters="">
    <title>Title1</title>
    <adlcp:datafromlms xmlns:adlcp="http://www.imsproject.org/xsd/imscp_rootv1p1p2">
    </adlcp:datafromlms>
  </item> 
```

但是，一旦整个事情都处理完毕，它最终看起来像这样：

```
 <item identifier="ITEM-F2D7FEDF240B4DCCBF346DBE2C47AC89" identifierref="RES-770DCE40C5BA4E97B1E3B3DB49BBBD4F" isvisible="true" parameters="">
    <title>Title1</title>
    <adlcp:datafromlms xmlns:adlcp="http://www.imsproject.org/xsd/imscp_rootv1p1p2">
    </adlcp:datafromlms>
    <title>Title2</title>
    <adlcp:datafromlms xmlns:adlcp="http://www.imsproject.org/xsd/imscp_rootv1p1p2">
    </adlcp:datafromlms>
    <title>Title3</title>
    <adlcp:datafromlms xmlns:adlcp="http://www.imsproject.org/xsd/imscp_rootv1p1p2">
    </adlcp:datafromlms>
    <title>Title4</title>
    <adlcp:datafromlms xmlns:adlcp="http://www.imsproject.org/xsd/imscp_rootv1p1p2">
    </adlcp:datafromlms>
    <title>Title5</title>
    <adlcp:datafromlms xmlns:adlcp="http://www.imsproject.org/xsd/imscp_rootv1p1p2">
    </adlcp:datafromlms>
  </item>
  <item identifier="ITEM-4D80AFFE59D04E2188F39908B9325961" identifierref="RES-A9CFDC9208714DAF9EA351D4656A7EBC" isvisible="true" parameters="" />
  <item identifier="ITEM-F4EDB38AD0D74CC38722E6D1A8D67E24" identifierref="RES-E2F92D4C5165482386421944053EE933" isvisible="true" parameters="" />
  <item identifier="ITEM-BF1C7474919B4B22BC300F98034ABDD1" identifierref="RES-8A0ED1C94CA44A71A07A8A4A5DA2A528" isvisible="true" parameters="" />
  <item identifier="ITEM-156731B2ABB14AB29135CBF5D8CBCFF3" identifierref="RES-D452D539C49A4D65BC3A8AC6B16DE718" isvisible="true" parameters="" /> 
```

所以基本上它最终将大量新数据添加到现有节点（我不想要它）并在组织组的底部（它应该在的位置）创建新的项目节点。我需要在每个新项目节点下附加标题和 adlcp 条目。

这是我正在使用的代码。请记住，此代码在同一个文件上多次执行，每组条目一次。代码创建了一个额外的节点，该节点进入另一个称为资源的地方，但该部分工作正常，因此我没有将它包含在上面的 XML 摘录中。

```
 string strItem = Guid.NewGuid().ToString("N").ToUpper(); // GUID for random unique value.
            string strRes = Guid.NewGuid().ToString("N").ToUpper(); // GUID for random unique value.

            XmlDocument docXMLFile = new XmlDocument();
            docXMLFile.Load(resultPath + "imsmanifest.xml"); // Load file

            #region Item Element Creation
            XmlNode xItem = docXMLFile.CreateNode(XmlNodeType.Element, "item", docXMLFile.DocumentElement.NamespaceURI);
            XmlAttribute xIdentifier = docXMLFile.CreateAttribute("identifier");
            XmlAttribute xIdentifierRef = docXMLFile.CreateAttribute("identifierref");
            XmlAttribute xIsVisible = docXMLFile.CreateAttribute("isvisible");
            XmlAttribute xParameters = docXMLFile.CreateAttribute("parameters");
            xIdentifier.Value = "ITEM-" + strItem;
            xIdentifierRef.Value = "RES-" + strRes;
            xIsVisible.Value = "true";
            xParameters.Value = "";

            xItem.Attributes.Append(xIdentifier);
            xItem.Attributes.Append(xIdentifierRef);
            xItem.Attributes.Append(xIsVisible);
            xItem.Attributes.Append(xParameters);

            // NOTE - the docXMLFile.DocumentElement.NamespaceURI GETS RID OF XMLNS="" WHICH IS BULLSHIT.
            XmlNode xTitle = docXMLFile.CreateNode(XmlNodeType.Element, "title", docXMLFile.DocumentElement.NamespaceURI);

            if ((dataRow["product_name"].ToString() + " - " + dataRow["topic_name"].ToString()).Count() > 255)
                xTitle.InnerText = (dataRow["product_name"].ToString() + " - " + dataRow["topic_name"].ToString()).Substring(0, 255);
            else
                xTitle.InnerText = dataRow["product_name"].ToString() + " - " + dataRow["topic_name"].ToString();

            XmlNode xADLCPDataFromLMS = docXMLFile.CreateNode(XmlNodeType.Element, "adlcp:datafromlms", docXMLFile.DocumentElement.NamespaceURI);
            xADLCPDataFromLMS.InnerText = dataRow["datafromlms"].ToString();

            // This is where the new stuff gets inserted.
            docXMLFile.GetElementsByTagName("organization")[0].InsertAfter(xItem, docXMLFile.GetElementsByTagName("organization")[0].LastChild);
            docXMLFile.GetElementsByTagName("item")[0].InsertAfter(xTitle, docXMLFile.GetElementsByTagName("item")[0].LastChild);
            docXMLFile.GetElementsByTagName("item")[0].InsertAfter(xADLCPDataFromLMS, docXMLFile.GetElementsByTagName("item")[0].LastChild);
            #endregion

            #region Resource Element Creation
            XmlNode xResource = docXMLFile.CreateNode(XmlNodeType.Element, "resource", docXMLFile.DocumentElement.NamespaceURI);
            XmlAttribute xRefIdentifier = docXMLFile.CreateAttribute("identifier");
            XmlAttribute xRefADLCP = docXMLFile.CreateAttribute("adlcp:scormtype");
            XmlAttribute xRefHREF = docXMLFile.CreateAttribute("href");
            XmlAttribute xRefType = docXMLFile.CreateAttribute("type");
            xRefIdentifier.Value = "RES-" + strRes;
            xRefADLCP.Value = "sco";
            xRefHREF.Value = dataRow["launch_url"].ToString().ToLower();
            xRefType.Value = "webcontent";

            xResource.Attributes.Append(xRefIdentifier);
            xResource.Attributes.Append(xRefADLCP);
            xResource.Attributes.Append(xRefHREF);
            xResource.Attributes.Append(xRefType);

            docXMLFile.GetElementsByTagName("resources")[0].InsertAfter(xResource, docXMLFile.GetElementsByTagName("resources")[0].LastChild);
            #endregion

            docXMLFile.Save(resultPath + "imsmanifest.xml"); //save 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:58:48.603

好吧，这就是问题所在：

```
docXMLFile.GetElementsByTagName("item")[0]
          .InsertAfter(xTitle,
                       docXMLFile.GetElementsByTagName("item")[0].LastChild);
docXMLFile.GetElementsByTagName("item")[0]
          .InsertAfter(xADLCPDataFromLMS, 
                       docXMLFile.GetElementsByTagName("item")[0].LastChild); 
```

您*明确地*使用了第一个`item`元素。我怀疑你真的只是想要：

```
xItem.AppendChild(xTitle);
xItem.AppendChild(xADLCPDataFromLMS); 
```

毕竟，你做了什么来将元素附加到新创建的`item`元素，对吧？

# delphi - nrComm 分配端口

> ID：10754825
> 
> 赞同：0
> 
> 时间：2012-05-25T12:54:44.223
> 
> 标签：delphi

我最近开始接受来自 stackoverflow 的某人的推荐，以使用 nrComm 库来处理计算机和 GSM 调制解调器之间的通信。我在为组件分配某个端口时遇到问题，也许有人以前使用过该组件，可以告诉我我做错了什么。

当我使用 TnrDeviceBox 选择一个 COM 端口时，它工作正常，但是当我像这样手动分配它时，它失败了：

```
...
  nrcm1.ComPort := cpCOMxx;
  nrcm1.ComPortNo := comportnumber;
  nrcm1.Active := True;
... 
```

我究竟做错了什么。我需要分配 COM23 并且组件仅将 COMS 定义为 1 - 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:44:45.723

将 设置为`ComPortNo`大于 8 的数字时，库会使用 ComPort 属性进行检查。如果该属性已设置为`cpCOMxx`，它将跳过更新`ComPortNo`。

对我来说，这看起来像一个错误，但您可以通过**不在**第一行设置`ComPort`属性来规避它。`cpCOMxx`

# mysql - Mysql复制：查询插入选择时键“主”的重复条目

> ID：10754826
> 
> 赞同：1
> 
> 时间：2012-05-25T12:54:49.380
> 
> 标签：mysql, replication

MySQL 复制失败，并出现“在查询插入到选择中时键 'primary' 的重复条目..”错误。

带有详细信息的票是在 forums.mysql.com 上创建的，详细信息请参阅下面的链接。

[http://forums.mysql.com/read.php?26,539932,539932#msg-539932](http://forums.mysql.com/read.php?26,539932,539932#msg-539932)

如果您遇到任何此类情况，请提供帮助。

谢谢，阿米特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:55:03.683

`"REPLACE INTO"`：当它们具有相同的 PK 时，在插入新行之前删除旧行。

`"IGNORE INTO"`：丢弃新行并保留旧行，当它们具有相同的 PK 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:27:14.053

而不是`insert into`使用`insert ignore into`它将解决您的问题。

# cocoa - 如何在非 ARC 下将弱引用归零？

> ID：10754827
> 
> 赞同：5
> 
> 时间：2012-05-25T12:54:50.577
> 
> 标签：cocoa, automatic-ref-counting, weak-references

我不喜欢ARC。

但是在非 ARC 下缺少 ARC 最重要的特性，即归零弱引用。目前我正在使用[MAZeroingWeakRef](https://github.com/mikeash/MAZeroingWeakRef)，它可以工作，但是很笨拙，有时会使代码变得多余。还有其他方法可以将弱引用归零吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T02:02:30.523

实现归零弱引用并不难。您所要做的只是跟踪所有引用指针 - 将它们存储在集合中 - 并`NULL`在指向对象被释放时进行分配。*无论如何，手动*完成所有这些事情确实是很多工作，您实际上需要编写所有手动跟踪代码才能在 Objective-C 中足够高效。

最后，您最终会发现您需要一些自动代码编写机器——静态编译器——而这正是 ARC 所做的。你可以自己实现类似 ARC 的东西。但如果我是你，我只会使用编译器维护者已经存在的、健壮的、稳定的、精心设计和支持的实现。

此外，如果您想开发 Apple 的东西，不跟随 Apple 也不是明智的行为。与其他平台持有者（例如 Microsoft）不同，Apple 不太关心保持向后兼容性。如果他们认为某些东西不好，它最终会被弃用并删除——就像 Objective-C GC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T10:39:26.710

我认为您应该坚持在引入 ARC 之前 Apple 自己推荐的范式，也就是说，从`-dealloc`方法中清除所有“弱”引用。它不仅是事实上的标准，而且还是 Xcode 代码重构在 ARC 未启用时的行为方式，因此遵守它应该可以为您省去一些麻烦。

# jquery-mobile - iscroll水平问题

> ID：10754836
> 
> 赞同：0
> 
> 时间：2012-05-25T12:55:34.573
> 
> 标签：jquery-mobile, cordova, iscroll4

我创建了一个使用 phonegap、jquery mobile 和 iscroll 的应用程序，带有 3 个滚动 div，前 2 个垂直滚动，我试图让第三个水平滚动，但是遇到了问题。水平正在工作，就像让我滚动到 div 的右侧一样，但是，当我尝试进一步滚动时，div 会跳回到开头。我希望有人遇到过类似的事情并有解决方案。我的代码如下所示；

```
var myScroll, myScroll2, myScroll3;

 $(".scrollArea").live("pageshow", function() {
        setTimeout(function(){myScroll = new iScroll('wrapper', {vScroll:true, hScroll:false});},0);
        setTmeout(function(){myScroll2 = new iScroll('wrapper2', {vScroll:true, hScroll:false});},0);
        setTimeout(function(){myScroll3 = new iScroll('wrapper3', {vScroll:false, hScroll:true});},0);

                             });

<div data-role="content">
            <div id="wrapper3">
               stuff here...
            </div> 
```

我已经将包装器的宽度设置为 1500px 来测试滚动，但是这个跳跃错误让我发疯。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:17:21.283

请使用来自 github 的 jq.scroll.js 它对我有用。 [https://github.com/appMobi/jQ.Mobi/tree/master/plugins](https://github.com/appMobi/jQ.Mobi/tree/master/plugins)

# cassandra - Cassandra 中的超级列

> ID：10754844
> 
> 赞同：1
> 
> 时间：2012-05-25T12:56:23.073
> 
> 标签：cassandra, super-columns

我必须做 5M (5 000 000) 个超级列，或 ~25M (5M * 5) 个常规复合键列。或者，我需要使用有序分区器。

太多超级列的确切缺点是什么？以及为什么我应该避免它们，因为如果我使用复合键，它是“自制”超级列，所有键都将仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:02:38.537

超级列已被弃用，最终将被复合材料取代。这足以避免它们。此外，SC 的性能也会受到影响，而且它们的代码库通常没有被广泛使用。

# rest - 休息申请和授权

> ID：10754851
> 
> 赞同：1
> 
> 时间：2012-05-25T12:57:04.090
> 
> 标签：rest, oauth, authorization

我想构建自己的 REST 应用程序。

我打算使用 oAuth 作为主要的身份验证方法。

问题是：我可以使用登录名和密码作为 client_id 和 client_secret（根据 oAuth 规范）吗？

我没有任何第三方应用程序、公司、网站等...可以验证我的用户。

我有自己的 REST 服务器和 JS 应用程序。

整个站点将以通常（RPC）的方式制作，但一些私有部分将作为 RESTfull 服务完成，并具有足够的独立 JS 应用程序。

更新：我不确定我什至需要完整的 oAuth 支持。在我看来，我可以在 https 页面上询问登录名和密码，然后生成一些令牌。后来我可以用它来检查这个用户是否已经通过身份验证。但在这种情况下，这个 oAuth 变得几乎与我们在 Web 应用程序中的相同。我不需要 oAuth 来授权用户吗？

我不考虑 HTTP(s) 授权，因为我不想将 evrytime 用户和密码发送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:02:27.720

[我认为您可能会在安全站点](https://security.stackexchange.com/)上得到更好的答案。例如，参见[这个问题](https://security.stackexchange.com/q/7307/3304)。

在任何情况下，您都需要从详细评估您试图阻止哪些攻击以及哪些攻击是“可接受的”开始。例如，如果您使用 HTTPS，那么您可能会接受中间人攻击的剩余危险，因为它需要伪造 SSL 证书。一般来说，很难说重放攻击是否可以接受。

一种合理的解决方案是通过让用户使用用户名和密码通过 HTTPS 进行身份验证，生成具有到期日期的安全令牌，然后将该令牌和到期日期发送回客户端，从而创建一个有时间限制的临时令牌。例如，您可以通过获取秘密的 SHA1 哈希值加上用户名加上过期时间戳来创建（合理的）安全令牌。然后客户端可以在未来的请求中包含令牌、用户名和身份验证时间戳，您可以使用您的密码和时钟对其进行验证。这些不需要作为 3 个参数发送；它们可以连接成一个字符串`user|timestamp|token`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:19:57.460

向 SLI 注册您的应用程序。SLI 授予唯一的客户端 ID 和客户端密码，使您的应用程序能够向 SLI API 进行身份验证。您还必须注册应用程序的重定向 URI 以用于身份验证和授权流程。

向特定教育组织启用您的应用程序，以便可以批准该应用程序在这些地区使用。

在您的应用程序中配置和实施适当的 OAuth 2.0 身份验证和授权流程，包括管理会话和授权超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:13:04.407

不。

如果 OAuth 存在的主要原因之一是允许集成，而用户不会泄露他们的用户名和密码。

如果您打算使用用户名和密码，如果您仍想签署您的请求，请查看 xAuth 作为选项。更多信息：[https](https://dev.twitter.com/docs/oauth/xauth) ://dev.twitter.com/docs/oauth/xauth 。

但是您也可以选择 HTTP 基本身份验证。至少如果您通过 SSL 发布 API。更多信息：[http ://en.wikipedia.org/w/index.php?title=Basic_access_authentication](http://en.wikipedia.org/w/index.php?title=Basic_access_authentication)

# java - 是否可以从字符串表示构建 Apache HtmlEmail？

> ID：10754856
> 
> 赞同：1
> 
> 时间：2012-05-25T12:57:39.803
> 
> 标签：java, jakarta-mail, apache-commons

我正在构建一个[`ImageHtmlEmail`](http://commons.apache.org/email/apidocs/org/apache/commons/mail/ImageHtmlEmail.html)，以便从给定的 HTML 下载所有图像并将其嵌入到多部分电子邮件中。我需要存储该电子邮件以便以后发送。

问题是，我可以获得生成的电子邮件文本和内容类型，但我看不出有任何方法可以`ImageHtmlEmail`从文本和内容类型中构造一个返回。有可能吗？还是我应该使用 raw`javax.mail`进行实际发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-30T22:06:30.723

我能够创建`javax.mail.internet.MimeMessage`电子邮件的字符串表示形式（ASCII 转储作为一个从 gmail 下载原始电子邮件的人）。然而，在从它构建`Email`子类方面还不是很成功。`HtmlEmail`

```
MimeMessage mimeMessage  =  MimeMessageUtils.createMimeMessage(Session.getDefaultInstance(new Properties()), new ByteArrayInputStream(oneEmail.toString().getBytes())); 
```

它确实给了我大部分我认为使用它的 getter 方法有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:05:41.587

不确定“从字符串构建 HtmlEmail”是什么意思，但构建 ImageHtmlMail 应该相当容易，请参阅[http://commons.apache.org/email/userguide.html](http://commons.apache.org/email/userguide.html)上的示例，您需要提供的只是一些 html - 文本通过 setHtmlMsg()

```
import org.apache.commons.mail.HtmlEmail;
...

// load your HTML email template
String htmlEmailTemplate = ....

// define you base URL to resolve relative resource locations
URL url = new URL("http://www.apache.org");

// create the email message
HtmlEmail email = new ImageHtmlEmail();
email.setDataSourceResolver(new DataSourceResolverImpl(url));
email.setHostName("mail.myserver.com");
email.addTo("jdoe@somewhere.org", "John Doe");
email.setFrom("me@apache.org", "Me");
email.setSubject("Test email with inline image");

// set the html message
email.setHtmlMsg(htmlEmailTemplate); 

// set the alternative message
email.setTextMsg("Your email client does not support HTML messages");

// send the email
email.send(); 
```

# xml - Xerces DOMWriter 需要替换 API

> ID：10754860
> 
> 赞同：2
> 
> 时间：2012-05-25T12:57:55.117
> 
> 标签：xml

根据从 Xerces-C v2.x 到 v3.x 的新 Xerces API 迁移，我需要迁移使用 DOMWriter 和 DOMBuilder API 的代码。

我已经浏览了**[这个](https://stackoverflow.com/questions/3678396/xerces-c-migration-from-v2-x-to-v3-x)**链接并且知道使用 DOMLSParser 代替 DOMBuilder 并且使用 DOMLSSerializer 代替 DOMWriter。

但是，我只能找到与旧 API 完全匹配的有限 API。所以，说到点子上，我只想要 DOMWriter 类的 DOMLSSerializer 类中的类似 API：-

canSetFeature();

设置功能（）；

另外，我想要以下 DOMBuilder 类的类似 API：-

设置错误处理程序（）；

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-03T16:03:07.643

有点晚了，但我现在自己想弄清楚这一点，并想我会分享我发现的东西。canSetFeature 和 setFeature 已被 canSetParameter 和 setParameter 替换。尽管您不在 DOMLSSerializer 上调用这些函数，而是在 DOMConfiguration 上调用这些函数。

此链接向您展示了它们的翻译方式： [https ://xerces.apache.org/xerces-c/program-dom-3.html#DOMLSSerializer](https://xerces.apache.org/xerces-c/program-dom-3.html#DOMLSSerializer)

# javascript - java - 如何在java脚本中检查电子邮件ID的存在？

> ID：10754864
> 
> 赞同：0
> 
> 时间：2012-05-25T12:58:14.137
> 
> 标签：javascript

我正在输入表单上的电子邮件 ID 以及其他详细信息，如姓名、地址、联系方式等。现在，用户可以输入任何电子邮件 ID。

例如 abc@abc.com

我可以检查标准域是否存在。但是有什么方法可以检查电子邮件 ID 是否存在？

有没有可用的API？？

我如何检测错误的电子邮件 ID。

将不胜感激帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:00:38.443

检测电子邮件地址是否存在的唯一有效解决方案是发送电子邮件并等待答复。

大多数时候，您还希望确保您的用户是帐户的所有者，并且此解决方案会同时进行这两项检查。

您不能只在客户端执行此操作，您需要一个服务器端 API。精确您的语言（或谷歌“发送电子邮件您的语言”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:01:32.403

检查的方法是发送指向该电子邮件的链接，用户单击该链接验证电子邮件是否有效。无效的电子邮件当然不会回复。

如果电子邮件有效并且用户单击了您发送给他的链接，您可以注册他或执行任何其他您想要的操作。

# xslt - 使用 XSLT 进行 xml 转换，在内部节点中按字母排序

> ID：10754867
> 
> 赞同：0
> 
> 时间：2012-05-25T12:58:34.670
> 
> 标签：xslt

我有下一个 WSDL 文件

```
 <definitions targetNamespace="http://soft.com/" name="LoggingWebService" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://ws.config.softid.softcomputer.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
      <types>
        <xsd:schema>
          <xsd:import namespace="http://soft.com/" schemaLocation="my.xsd"/>
        </xsd:schema>
      </types>
      <message name="log">
        <part name="parameters" element="tns:log"/>
      </message>
      <message name="getLogs">
        <part name="parameters" element="tns:getLogs"/>
      </message>
   <portType name="LoggingWebService">
       <operation name="log">
           <input message="tns:log"/>
       </operation>
       <operation name="getLogs">
           <input message="tns:getLogs"/>
           <output message="tns:getLogsResponse"/>
      </operation>
  </portType>
</definitions> 
```

我想将此文件转换`javax.transformation`为另一个文件，该文件`messages`将按字母排序（使用“名称”中的字符串）。

```
<definitions targetNamespace="http://soft.com/" name="LoggingWebService" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://ws.config.softid.softcomputer.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://soft.com/" schemaLocation="my.xsd"/>
    </xsd:schema>
  </types>
  <message name="getLogs">
    <part name="parameters" element="tns:getLogs"/>
  </message>
    <message name="log">
    <part name="parameters" element="tns:log"/>
  </message>
   <portType name="LoggingWebService">
       <operation name="getLogs">
            <input message="tns:getLogs"/>
            <output message="tns:getLogsResponse"/>
       </operation>
       <operation name="log">
           <input message="tns:log"/>
       </operation>

   </portType>

</definitions> 
```

为此我需要什么 XSLT 文件？请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:33:13.653

此样式表也适用于您上一个问题中的文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    version="1.0" >

  <xsl:output method="xml" indent="yes" />
  <xsl:strip-space elements="*"/> 

  <xsl:template match="/wsdl:definitions" >

    <xsl:copy>

      <xsl:copy-of select="wsdl:types" />

      <xsl:apply-templates select="wsdl:message" >
        <xsl:sort select="@name" />
      </xsl:apply-templates>

      <xsl:apply-templates select="wsdl:portType" />

    </xsl:copy>

  </xsl:template>

  <xsl:template match="wsdl:message">
    <xsl:copy-of select="current()"/>
  </xsl:template>

  <xsl:template match="wsdl:portType">
    <xsl:copy>
      <xsl:apply-templates select="wsdl:operation">
        <xsl:sort select="@name"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="wsdl:operation">
    <xsl:copy-of select="current()"/>
  </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<?xml version="1.0" encoding="utf-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/">
   <types>
      <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
         <xsd:import namespace="http://soft.com/" schemaLocation="my.xsd"/>
      </xsd:schema>
   </types>
   <message name="getLogs">
      <part element="tns:getLogs" name="parameters"/>
   </message>
   <message name="log">
      <part element="tns:log" name="parameters"/>
   </message>
   <portType>
      <operation name="getLogs">
         <input message="tns:getLogs"/>
         <output message="tns:getLogsResponse"/>
      </operation>
      <operation name="log">
         <input message="tns:log"/>
      </operation>
   </portType>
</definitions> 
```

# apache - 域 example.com:443 中的 htaccess 重定向错误

> ID：10754868
> 
> 赞同：-1
> 
> 时间：2012-05-25T12:58:46.957
> 
> 标签：apache, .htaccess, mod-rewrite, ssl

我遇到了 htaccess 重定向问题。

我喜欢做什么：

我想将链接重定向`https://www.example.com/folder`到`https://www.example.com/folder/subfolder`.

所以通常我会使用：

```
redirect /folder /folder/subfolder 
```

但是我遇到了问题，我的浏览器被重定向到`http://www.example.com:443/folder/subfolder`. 所以没有`https`，但最后很好`:443`。浏览器给我一个404错误。

有人知道我如何正确重定向网址吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:27:19.353

试试这个：

```
redirect permanent /folder https://www.example.com/folder/subfolder 
```

**编辑：**如果 mod_alias 不适合您，您可以尝试使用基于 mod_rewrite 的规则，如下所示：

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^folder/?$ https://www.example.com/folder/subfolder [L,R=301,NC] 
```

# configuration-files - 以最小的努力以编程方式更改 Linux 中的文本配置文件

> ID：10754872
> 
> 赞同：1
> 
> 时间：2012-05-25T12:59:03.090
> 
> 标签：configuration-files

我正在寻找一种可以简化文本配置文件修改的工具，例如：

*   `ForwardAgent yes`在 /etc/ssh/ssh_config 上设置
*   附加`HGUSER`到`AcceptEnv`/etc/ssh/sshd_config （这更复杂，因为它接受几个参数，如果你的参数还没有，它应该添加它）

最重要的：

*   运行几次应该没有副作用。
*   如果某些东西看起来很奇怪，它应该会抱怨（例如，如果您在文件中多次找到同一行，或者预期的语法不匹配）。

是否有任何 linux 工具可以轻松用于自动化这样的事情？

重点是能够在某处编写这些配置补丁，以便您可以在需要时将它们部署在多台机器或新机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-19T05:20:52.517

您可能想了解嵌入式 Linux 系统中使用的[统一配置接口 (UCI) 。](http://wiki.openwrt.org/doc/uci)如果您可以灵活地为您的配置文件调整 UCI 格式，那么这与您正在寻找的内容非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:07:40.197

我当然会用 bash 脚本来做到这一点。这是一个很棒的教程。

[http://linuxconfig.org/Bash_scripting_Tutorial](http://linuxconfig.org/Bash_scripting_Tutorial)

要更改文件中的一行，您可以执行以下操作：
检查文件是否存在
grep 以获取您要更改的值 - 如果它出现多次或
使用 sed 更改该行时出现错误

将某些内容附加到文件
检查文件是否存在
grep 以确保它没有被附加到已经
回显任何 >> 文件 - 双大于附加到文件

对于其中的每一个，我都会先制作文件的备份副本，以防万一出现问题

# javascript - 如何使用 jQuery 清空输入值？

> ID：10754874
> 
> 赞同：78
> 
> 时间：2012-05-25T12:59:05.773
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试使用图像制作一个模态对话框，您可以在其中选择多个图像。我需要从输入中获取值然后清空它，但我无法清空输入。我试过`.val('')`and `.val(null)`，但都不适合我。

这是完整的代码：

```
$("#hdselect").click(function(){
        $(".modal").html("");

        $.post('mediaservice.php',{hd:'ok',images:$("#hdimages").val()},function(data){
            $(".modal").append(data);
        });
        $(".modal").dialog({
            'modal':true,
            'title':"Click the image to select",
            'width':960,
            'height':600,
            'resizable':false,
            'show': {effect: 'drop', direction: "up"},
            'buttons': {"Ok": function() {  
                    var hd=Array();
                    var hdval=$("#hdimages").val();
                    $("#hdimages").attr('value',' ');
                    $("input[name='hd[]']:checked").each(function(){
                        hd.push($(this).val());
                    });
                    if(hdval!=''){
                        hdval=hdval+","+hd;
                    }else{
                        hdval=hd;
                    }                        
                    $("#hdimages").val(hdval);
                    var images=$("#hdimages").val();
                    $.post('mediaservice.php',{getHd:images},function(data){
                        $("#imgthumbBase").append(data);
                    });
                    $(this).dialog("close");
                }
            }
        });
    }); 
```

这个想法是用户单击一个按钮，然后打开一个带有多个图像和复选框的模式对话框。此时我需要从输入中获取值，然后将其清除。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-05-25T13:01:50.003

要使值为空，您可以执行以下操作：

```
 $("#element").val(''); 
```

要获取所选值，您可以执行以下操作：

```
var value = $("#element").val(); 
```

`#element`您要选择的元素的 id 在哪里。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-05-25T13:02:39.187

你可以试试：

```
$('input.class').removeAttr('value');
$('#inputID').removeAttr('value'); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-07-21T01:24:48.480

更好的方法是：

```
$("#element").val(null); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-05-25T13:07:07.643

使用 jquery 清空文本框的常用方法是：

```
$('#txtInput').val(''); 
```

如果上面的代码不起作用，请检查您是否能够获取输入元素。

```
console.log($('#txtInput')); // should return element in the console. 
```

如果仍然遇到同样的问题，请发布您的代码。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-05-11T13:34:21.370

另一种方法是：

```
$('#element').attr('value', ''); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-19T17:23:47.457

```
$('.reset').on('click',function(){
           $('#upload input, #upload select').each(
                function(index){  
                    var input = $(this);
                    if(input.attr('type')=='text'){
                        document.getElementById(input.attr('id')).value = null;
                    }else if(input.attr('type')=='checkbox'){
                        document.getElementById(input.attr('id')).checked = false;
                    }else if(input.attr('type')=='radio'){
                        document.getElementById(input.attr('id')).checked = false;
                    }else{
                        document.getElementById(input.attr('id')).value = '';
                        //alert('Type: ' + input.attr('type') + ' -Name: ' + input.attr('name') + ' -Value: ' + input.val());
                    }
                }
            );
        }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-29T12:11:47.833

对我来说，这是解决这个问题的最好方法：

`$('yourElementName').val(null);`

# ruby - 红宝石火车残骸

> ID：10754882
> 
> 赞同：1
> 
> 时间：2012-05-25T12:59:28.050
> 
> 标签：ruby

以下代码：

```
class Avalon 
  def h
    puts "petrezselyem"
  end
end
Avalon.new.h 
```

打印出来`"petrezselyem"`。但是，如果我输入：

```
puts Avalon.new.h.size 
```

它给

```
undefined method `size' for nil:NilClass (NoMethodError). 
```

你能解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T13:02:04.480

该方法`h`不返回`"petrezselyem"`，它打印出来`"petrezselyem"`。所以`Avalon.new.h == nil`。

Java 会给你一个编译错误，但是像 Ruby 这样的动态语言不知道返回的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T13:24:29.833

查看[Kernel#puts](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-puts)的签名：

```
puts(obj, ...) → nil 
```

这意味着`puts`将始终返回`nil`，因为它是方法中的最后一条语句`h`，这也将是该方法的返回值。

# asp.net - 将 XML 流写入 xml 文件

> ID：10754884
> 
> 赞同：1
> 
> 时间：2012-05-25T12:59:35.663
> 
> 标签：asp.net, windows-phone-7, xmlhttprequest, linq-to-xml

我知道这一定是一个菜鸟问题，但我该怎么做呢？因为从我在这里看到的：http: [//msdn.microsoft.com/en-us/library/system.io.streamwriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter)或 XMLWriter 对我没有帮助，因为我只想保存所有内容，而不是写特定的行。

基本上我有一个返回 XML 响应的 httpRequest。我在一个流中得到它，并且我想将它保存到一个 xml 文件中，以备后用。部分代码：

```
HttpWebResponse response = (HttpWebResponse)httpRequest.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamRead = new StreamReader(streamResponse);
            string responseString = streamRead.ReadToEnd();

            XDocument blabla = XDocument.Parse(responseString);

            // Here is where the saving to a file should occur

            streamResponse.Close();
            streamRead.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:06:51.383

为什么需要解析文件？在 .NET 4 中，您可以使用如下文件流将其直接写入磁盘：

```
using (var fileStream = File.Create("file.xml"))
{
    streamResponse.CopyTo(fileStream);
} 
```

如果您使用的是早期版本的 .NET 框架，则可以使用[此处](https://stackoverflow.com/questions/230128/best-way-to-copy-between-two-stream-instances-c-sharp)描述的方法将数据从一个流复制到另一个流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:09:46.203

由于您已经将 XML 响应作为字符串，我认为您需要使用[StreamWriter](http://msdn.microsoft.com/en-us/library/3ssew6tk)类将响应字符串直接写入文件。

这里有一个使用它的 MSDN 示例：[How to: Write Text to a File](http://msdn.microsoft.com/en-us/library/6ka1wd3w)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:05:28.740

看看这个：

[http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.save.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.save.aspx)

应该可以帮助您完成工作！

# mysql - 当两个视图的计数不同时如何组合它们？

> ID：10754886
> 
> 赞同：0
> 
> 时间：2012-05-25T12:59:42.450
> 
> 标签：mysql

我创建了这个 ipview： ![在此处输入图像描述](../Images/51b737565c9de4d619814d5773503812.png)

这个tcpview： ![在此处输入图像描述](../Images/cbba9f0d68b524ec16da7d31bbb7a857.png)

如您所见，tcpview 较小，因为某些 cid 没有端口，所以我想将这两个视图结合起来，当 cid 没有端口时，在该字段中将其设为空，我应该在这里进行哪些操作以及如何操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:22:19.353

[`left join`](http://www.w3schools.com/sql/sql_join_left.asp)表并用于[`ifnull`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)将`null`值更改为*空*。

```
select i.cid, i.ip_src, i.ip_dst, ifnull(t.tcp_sport, '') as tcp_sport, ifnull(t.tcp_dport, '') as tcp_dport
from ipview i
left join tcpview t on i.cid = t.cid 
```

# regex - 在 mongodb 查询中结合正则表达式和嵌入对象

> ID：10754888
> 
> 赞同：4
> 
> 时间：2012-05-25T12:59:45.993
> 
> 标签：regex, mongodb, embedded-object

我正在尝试结合正则表达式和嵌入式对象查询并且失败得很惨。我要么遇到了 mongodb 的限制，要么只是遇到了一些小问题，也许有人遇到了这个问题。该文档当然不包括这种情况。

被查询的数据：

```
{
    "_id" : ObjectId("4f94fe633004c1ef4d892314"),
    "productname" : "lightbulb",
    "availability" : [
            {
                    "country" : "USA",
                    "storeCode" : "abc-1234"
            },
            {
                    "country" : "USA",
                    "storeCode" : "xzy-6784"
            },
            {
                    "country" : "USA",
                    "storeCode" : "abc-3454"
            },
            {
                    "country" : "CANADA",
                    "storeCode" : "abc-6845"
            }
    ]
} 
```

假设集合仅包含一条记录

此查询返回 1：

```
db.testCol.find({"availability":{"country" : "USA","storeCode":"xzy-6784"}}).count(); 
```

此查询返回 1：

```
db.testCol.find({"availability.storeCode":/.*/}).count(); 
```

**但是，此查询返回 0**：

```
db.testCol.find({"availability":{"country" : "USA","storeCode":/.*/}}).count(); 
```

有谁明白为什么？这是一个错误吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:16:42.350

您错误地引用了嵌入式存储代码 - 您将其作为嵌入式对象引用，而实际上您拥有的是一个对象**数组**。比较这些结果：

```
db.testCol.find({"availability.0.storeCode":/x/});
db.testCol.find({"availability.0.storeCode":/a/}); 
```

使用上面的示例文档，第一个不会返回，因为第一个 storeCode 中没有 x（“abc-1234”），第二个将返回文档。这对于您正在查看数组的单个元素并传入位置的情况很好。为了搜索数组中的所有对象，您需要[$elemMatch](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29#DotNotation%28ReachingintoObjects%29-Matchingwith%24elemMatch)

例如，我添加了第二个示例文档：

```
{
    "_id" : ObjectId("4f94fe633004c1ef4d892315"),
    "productname" : "hammer",
    "availability" : [
            {
                    "country" : "USA",
                    "storeCode" : "abc-1234"
            },

    ]
} 
```

现在，看看这些查询的结果：

```
PRIMARY> db.testCol.find({"availability" : {$elemMatch : {"storeCode":/a/}}}).count();
2
PRIMARY> db.testCol.find({"availability" : {$elemMatch : {"storeCode":/x/}}}).count();
1 
```

# configuration - .NET 4.5 / 在没有 loadFromRemoteSources=true 的情况下从远程资源加载程序集

> ID：10754892
> 
> 赞同：1
> 
> 时间：2012-05-25T12:59:55.150
> 
> 标签：configuration, .net-4.5, sandbox

安装 .NET 4.5 beta 后，我注意到我使用网络路径调用 Assembly.LoadFrom 成功，而没有在应用程序配置文件中明确指定“loadFromRemoteSources=true”（而在 .NET 4.0 中，这会导致“System.NotSupportedException：尝试从网络位置加载程序集，这会导致程序集在以前版本的 .NET Framework 中被沙盒化。")

我想知道，如果它确实是新行为并且在我的设置中没有什么特别之处（我尚未反编译相应的反射类或调试加载过程以检查差异），是否是策略的有意更改并将保留在RTM 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:10:16.030

文档似乎没有表明这种行为变化。[http://msdn.microsoft.com/en-us/library/dd409252(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/dd409252(v=vs.110).aspx)。我会期待它的通知。

如果它确实以这种方式工作，那么默认情况下您将完全信任并且不可见地授予潜在危险的程序集，我无法想象这将是一天中的顺序。

您是否有机会将其添加到 machine.config 中？

另外我会创建一个小程序并将其定位到 4.0 平台并引发此异常。然后我会将它重新定位到 4.5，看看是否确实如此。然后我会将二进制文件移动到另一台机器上并在那里测试。

# django - GeoDjango：创建 PostGIS 空间数据库模板时“没有这样的文件或目录”

> ID：10754893
> 
> 赞同：0
> 
> 时间：2012-05-25T12:59:55.807
> 
> 标签：django, osx-lion, postgis, geodjango, django-postgresql

我正在开发 MacOS Lion。[根据官方说明](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/#kyngchaos-packages)，我已经成功地为 Postgres 和 PostGIS 设置了 KyngChaos 库，没有任何问题。

我已经到了关于创建[空间数据库模板](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/#creating-a-spatial-database-template-for-postgis)的部分，现在我遇到了一个问题：

```
$ psql -d template_postgis -f $POSTGIS_SQL_PATH/postgis.sql
/postgis.sql: No such file or directory 
```

我该如何调试呢？首先从哪里来`postgis.sql`？

**更新：**

我只是确保`POSTGIS_SQL_PATH`实际设置如下：

```
$ POSTGIS_SQL_PATH=`pg_config --sharedir`/contrib/postgis-1.5
$ echo $POSTGIS_SQL_PATH
/usr/local/Cellar/postgresql/9.1.3/share/postgresql/contrib/postgis-1.5
$ psql -d template_postgis -f $POSTGIS_SQL_PATH/postgis.sql
/usr/local/Cellar/postgresql/9.1.3/share/postgresql/contrib/postgis-1.5/postgis.sql: No such file or directory 
```

它看起来好像`/usr/local/Cellar/postgresql/9.1.3/share/postgresql/`存在，但`contrib`它下面没有目录。这是从哪里来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:14:56.353

好像你没有找到postgis。首先搜索 postgis.sql。如果找不到，则安装 postgis。如果找到，则适当地设置您的路径。

# android - 如何在 Eclipse 中将开源文件添加到我的应用程序？

> ID：10754896
> 
> 赞同：1
> 
> 时间：2012-05-25T13:00:16.757
> 
> 标签：android, dialog, implementation

只是想将此颜色选择器（[http://code.google.com/p/devmil-android-color-picker/source/browse/](http://code.google.com/p/devmil-android-color-picker/source/browse/)）添加到我的应用程序中，并在单击首选项时显示它，但我的问题是如何添加它？我应该在哪里复制这些文件夹？我有这个，我应该在里面放什么？

```
Preference.OnPreferenceClickListener colordialog = new Preference.OnPreferenceClickListener(){
    public Boolean OnPreferenceClick(Preference preference){
        if (preference.getKey().equals("color")){

                      }
                return false;}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:17:00.600

1.  该项目似乎是一个Android库项目
2.  源代码控制似乎是[Mercurial](http://mercurial.selenic.com/)。[如果您有 Eclipse 的 Mercurial 插件，您可以使用它从位于http://code.google.com/p/devmil-android-color-picker/source/checkout](http://code.google.com/p/devmil-android-color-picker/source/checkout)的项目存储库中将项目导入 Eclipse
3.  导入项目后，您需要在项目中引用它，如[使用 ADT 从 Eclipse 管理项目的引用库项目部分中所述](http://developer.android.com/guide/developing/projects/projects-eclipse.html)

# datetime - 黑莓日期时间字符串格式

> ID：10754898
> 
> 赞同：1
> 
> 时间：2012-05-25T13:00:24.663
> 
> 标签：datetime, blackberry, java-me, timezone, dst

我需要解析日期/时间字符串，添加原始偏移量并根据本地时区进行转换。

我从服务器获取的日期时间采用以下格式：“05-25-2012 02:30 PM”

这种格式不被解析：HttpDateParser.parse(time) 方法

但是 HttpDateParser 确实解析了这种格式：“25-MAY-2012 02:30 PM”

你能告诉我，我应该如何解析 BB 中的“05-25-2012 02:30 PM”字符串以获得长值。

我还有 1 个问题，我需要以 GMT、IST 格式显示时区，但我只能显示 Asia/Calcutta、America/Los_Angeles 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T07:40:29.370

黑莓 Java 缺少一些有用的字符串处理和日期格式化 API，开发人员在桌面 Java 甚至 Android Java 应用程序中习惯使用这些 API。所以，你必须自己做一些解析，如果你需要处理时区，那就很痛苦了。您没有说您的服务器所在的时区，所以我必须假设您知道这一点，即使您在问题中显示的字符串没有时区信息。

**免责声明：** *此代码并非直接来自我的一个应用程序，因此未经**严格**测试。这是一个概念证明。您必须测试您自己的所有时区，并可能验证它在夏令时转换期间是否有效。* 此外，有关我在此处使用的方法的限制的信息，请参阅[blackberry API 文档。](http://www.blackberry.com/developers/docs/5.0.0api/java/util/TimeZone.html)`TimeZone.getOffset()`

首先我的进口：

```
import java.util.Date;
import java.util.TimeZone;
import java.util.Hashtable;
import java.util.Calendar;

import net.rim.device.api.i18n.SimpleDateFormat;
import net.rim.device.api.io.http.HttpDateParser;
import net.rim.device.api.util.StringUtilities; 
```

然后，解析服务器给出的字符串的代码。我假设这个时间是在服务器的当前时区，为夏令时调整，或者在可能不是移动客户端时区的其他已知时区。更改已知服务器时区的值**New_York**以满足您的需求：

```
 private Date parseServerTime(String timeFromServer) {
      // separate the time string into tokens, which accepts ' ' or '-' or ':' as delimeters
      String tokens[] = StringUtilities.stringToKeywords(timeFromServer);
      int month = Integer.parseInt(tokens[0]);
      int day = Integer.parseInt(tokens[1]);
      int year = Integer.parseInt(tokens[2]);
      int hours = Integer.parseInt(tokens[3]);
      int minutes = Integer.parseInt(tokens[4]);
      boolean isPm = tokens[5].equalsIgnoreCase("PM");
      // convert hours to 24 hour time
      if (hours == 12 && !isPm) {
         hours = 0;
      } else if (hours != 12 && isPm) {
         hours += 12;
      }
      int millisToday = ((hours * 60) + minutes) * 60 * 1000;

      StringBuffer reformattedTime = new StringBuffer();
      // reorder the year, month and day to be able to use HttpDateParser (YYYY-MM-DDTHH:mm)
      reformattedTime.append(tokens[2]).append('-').append(tokens[0]).append('-').append(tokens[1]);
      reformattedTime.append('T').append(hours).append(':').append(minutes);
      long unadjustedTimeFromServer = HttpDateParser.parse(reformattedTime.toString());

      int monthIndex = month - 1;
      // This example assumes the server is giving us a time from the Eastern US time zone
      TimeZone serverZone = TimeZone.getTimeZone("America/New_York");
      int serverOffset = serverZone.getOffset(1, // 1 -> AD, not BC
            year, 
            monthIndex, 
            day, 
            1, // I'm not sure, but I don't think day-of-week matters here?
            millisToday);

      return new Date(unadjustedTimeFromServer - serverOffset);
   } 
```

`Date`然后，我使用他们设备的时区和您想要的时区显示短代码为客户端格式化解析：

```
 private String formatClientTime(Date dateFromServer) {
      TimeZone clientZone = TimeZone.getDefault();
      String tzKey = clientZone.toString();
      String[] tzDisplayNames = StringUtilities.stringToKeywords((String) _timeZones.get(tzKey));

      // we might have to use the "daylight" time zone short code
      Calendar cal = Calendar.getInstance(clientZone);
      cal.setTime(dateFromServer);
      int clientOffset = clientZone.getOffset(1, cal.get(Calendar.YEAR), cal.get(Calendar.MONTH),
            cal.get(Calendar.DAY_OF_MONTH), cal.get(Calendar.DAY_OF_WEEK), cal.get(Calendar.MILLISECOND));
      int rawOffset = clientZone.getRawOffset();

      // if the daylight savings time adjusted offset isn't equal to the raw offset, we
      //   must be in daylight savings time
      boolean isTimeDuringDaylightSavings = (clientOffset != rawOffset);
      String tzCode = isTimeDuringDaylightSavings ? tzDisplayNames[1] : tzDisplayNames[0];

      // TODO: change this to whatever output format you want to use for the UI
      SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy hh:mm aa");
      return formatter.formatLocal(dateFromServer.getTime()) + " " + tzCode;
   } 
```

我像这样使用所有这些代码：

```
 mapTimeZoneCodes(); 

  Date date = parseServerTime("05-25-2012 02:30 PM");
  String text = formatClientTime(date); 
```

我的`mapTimeZoneCodes()`方法只是一个实用程序，用于初始化您不喜欢的长 BlackBerry 时区字符串（“Asia/Calcutta”）和短代码（“IST”）之间的映射。据我所知，黑莓没有提供任何 API 来显示人们习惯的短代码，至少对于 OS 5.0 来说是这样，许多开发人员仍然需要支持。您可以选择将其重构为静态实用程序类。这是我使用的映射，基于[这篇关于 Desktop Java](http://www.jarvana.com/jarvana/view/net/sourceforge/saxon/saxon/9.1.0.8/saxon-9.1.0.8-sources.jar!/net/sf/saxon/number/NamedTimeZone.java?format=ok)的文章。

我只是费心填写一些时区字符串映射，来测试一下。如果你想使用这个，你需要填写其余的，或者至少是你的应用需要的，**否则它可能会崩溃**。请注意，我使用的表需要两个（子）字符串用于每个时区，用于夏令时。如果您愿意，可以在完成工作后更新解决方案。但是，我会把它留给你。

```
 private Hashtable _timeZones;

   private void mapTimeZoneCodes() {
      // TODO: you can uncomment this code and use it to generate your map of time zone ids and short codes
      //String[] ids = TimeZone.getAvailableIDs();
      //for (int i = 0; i < ids.length; i++) {
      //   System.out.println(" _timeZones.put(\"" + ids[i] + "\", \"\");");
      //}
      _timeZones = new Hashtable();
      _timeZones.put("Pacific/Kwajalein", "");
      _timeZones.put("Pacific/Midway", "");
      _timeZones.put("Pacific/Honolulu", "");
      _timeZones.put("America/Anchorage", "");
      _timeZones.put("America/Tijuana", "");
      _timeZones.put("America/Los_Angeles", "PST PDT");
      _timeZones.put("America/Phoenix", "");
      _timeZones.put("America/Denver", "MST MDT");
      _timeZones.put("America/Tegucigalpa", "");
      _timeZones.put("America/Tegucigalpa_2", "");
      _timeZones.put("America/El_Salvador", "");
      _timeZones.put("America/Regina", "");
      _timeZones.put("America/Chicago", "CST CDT");
      _timeZones.put("America/Mexico_City", "");
      _timeZones.put("America/Mexico_City_2", "");
      _timeZones.put("America/Bogota", "");
      _timeZones.put("America/Indianapolis", "");
      _timeZones.put("America/New_York", "EST EDT");
      _timeZones.put("America/Caracas", "");
      _timeZones.put("America/La_Paz", "");
      _timeZones.put("America/Manaus", "");
      _timeZones.put("America/Santiago", "");
      _timeZones.put("America/Halifax", "");
      _timeZones.put("America/St_Johns", "");
      _timeZones.put("America/Montevideo", "");
      _timeZones.put("America/Guyana", "");
      _timeZones.put("America/Buenos_Aires", "");
      _timeZones.put("America/Sao_Paulo", "");
      _timeZones.put("America/Godthab", "");
      _timeZones.put("America/South_Georgia", "");
      _timeZones.put("Atlantic/Cape_Verde", "");
      _timeZones.put("Atlantic/Azores", "");
      _timeZones.put("GMT", "GMT");
      _timeZones.put("Europe/Dublin", "");
      _timeZones.put("Africa/Luanda", "");
      _timeZones.put("Europe/Amsterdam", "");
      _timeZones.put("Europe/Belgrade", "");
      _timeZones.put("Europe/Brussels", "");
      _timeZones.put("Europe/Belgrade Yugoslavia(YU)", "");
      _timeZones.put("Africa/Windhoek", "");
      _timeZones.put("Asia/Amman", "");
      _timeZones.put("Africa/Harare", "");
      _timeZones.put("Asia/Jerusalem", "");
      _timeZones.put("Europe/Minsk", "");
      _timeZones.put("Africa/Cairo", "");
      _timeZones.put("Asia/Beirut", "");
      _timeZones.put("Europe/Athens", "");
      _timeZones.put("Europe/Helsinki", "");
      _timeZones.put("Asia/Kuwait", "");
      _timeZones.put("Africa/Nairobi", "");
      _timeZones.put("Asia/Baghdad", "");
      _timeZones.put("Europe/Moscow", "");
      _timeZones.put("Asia/Tehran", "");
      _timeZones.put("Asia/Tbilisi", "");
      _timeZones.put("Asia/Muscat", "");
      _timeZones.put("Asia/Baku", "");
      _timeZones.put("Asia/Yerevan", "");
      _timeZones.put("Asia/Caucasus", "");
      _timeZones.put("Asia/Kabul", "");
      _timeZones.put("Asia/Karachi", "");
      _timeZones.put("Asia/Tashkent", "");
      _timeZones.put("Asia/Yekaterinburg", "");
      _timeZones.put("Asia/Calcutta", "");
      _timeZones.put("Asia/Colombo", "");
      _timeZones.put("Asia/Katmandu", "");
      _timeZones.put("Asia/Dhaka", "");
      _timeZones.put("Asia/Almaty", "");
      _timeZones.put("Asia/Rangoon", "");
      _timeZones.put("Asia/Bangkok", "");
      _timeZones.put("Asia/Krasnoyarsk", "");
      _timeZones.put("Asia/Hong_Kong", "");
      _timeZones.put("Asia/Kuala_Lumpur", "");
      _timeZones.put("Australia/Perth", "");
      _timeZones.put("Asia/Taipei", "");
      _timeZones.put("Asia/Irkutsk", "");
      _timeZones.put("Asia/Tokyo", "");
      _timeZones.put("Asia/Seoul", "");
      _timeZones.put("Asia/Yakutsk", "");
      _timeZones.put("Australia/Darwin", "");
      _timeZones.put("Australia/Adelaide", "");
      _timeZones.put("Pacific/Guam", "");
      _timeZones.put("Asia/Vladivostok", "");
      _timeZones.put("Australia/Hobart", "");
      _timeZones.put("Australia/Brisbane", "");
      _timeZones.put("Australia/Sydney", "");
      _timeZones.put("Asia/Magadan", "");
      _timeZones.put("Pacific/Fiji", "");
      _timeZones.put("Pacific/Auckland", "");
      _timeZones.put("Pacific/Tongatapu", "");
   } 
```

# c# - 如何将键/值对插入字典？

> ID：10754900
> 
> 赞同：2
> 
> 时间：2012-05-25T13:00:34.153
> 
> 标签：c#, dictionary

当我将条目添加到`Dictionary`using`Add`时，将`KeyValuePair`添加到它的末尾。我想预先添加它，因此当我迭代`KeyValuePair`'s 时，它是第一项。

有没有办法用一个`Dictionary`或者我应该建立一个`List<KeyValuePair<TKey, TValue>>`或者你有更好的提议？

**编辑：**我以为我可以在枚举中工作`Dictionary`，看来我不能。

我试过了`List<KeyValuePair<TKey, TValue>>`，不太实用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T13:02:45.943

该类`Dictionary`中没有顺序的概念 - 没有位置索引`Dictionary`。

如果您需要在字典上使用位置索引，请查看命名空间中的[`OrderedDictionary`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary)类。`System.Collections.Specialized`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T13:02:55.537

我认为您正在寻找[OrderedDictionary](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T13:04:47.267

使用`OrderedDictionary`.

表示可由键或索引访问的键/值对的集合。您可以在所需的索引处插入键值 pait。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-25T13:05:17.487

如果您希望保持顺序，`Dictionary`则不是您要使用的集合（它没有顺序的概念）。

[`OrderedDictionary`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)如果您需要索引字典，有一个集合会有所帮助。

还有一个[`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)集合，它将根据键值对添加的值进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T13:54:11.767

`Dictionary<,>`正式地，如果您遍历它（`foreach`它，从而调用`GetEnumerator()`），您永远无法知道您的键值对将以什么顺序出现。当然，如果您`Remove`的字典中有一些项目，然后是`Add`其他一些项目，当您`foreach`通过集合时，新项目将位于已删除项目的空间中，**而不是**在迭代“列表”的末尾。

但是：如果您从不知道您`Delete`的`Dictionary<,>`，看起来枚举会按照添加的顺序生成项目。不能保证这将始终有效，但看起来它在当前实现中有效。

所以**如果**你敢依赖这个，你可以说

```
foreach (var keyValuePair in myDict.Reverse())
{
  ... 
```

该`Reverse`方法是 LINQ 的一部分（需要`using System.Linq`）。

# ruby - Ruby：传递给函数的变量已更改

> ID：10754904
> 
> 赞同：2
> 
> 时间：2012-05-25T13:00:48.423
> 
> 标签：ruby, string, function

为什么`var`在函数执行后，以下代码中传递给函数的变量会发生变化？

```
def my_func(my_var)
  out_var = my_var
  out_var[3]="STUFF"
  return out_var
end

var = "Testing"
puts my_func(var)
puts var 
```

输出：

```
TesSTUFFing
TesSTUFFing 
```

为什么“var”被改变了？有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T13:02:37.863

在 Ruby 中，变量是通过引用传递的。

您必须显式克隆变量：

```
def my_func(my_var)
  out_var = my_var.clone
  out_var[3]="STUFF"
  out_var
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T13:06:43.650

字符串在 Ruby 中不是不可变的，因此您可以将字符串传递给修改字符串的函数。

# jquery - Wordpress 帖子的水平时间线

> ID：10754909
> 
> 赞同：0
> 
> 时间：2012-05-25T13:01:22.260
> 
> 标签：jquery, wordpress, customization, timeline, posts

我正忙于为自己创建一个博客，需要制作一个水平时间线，但我不确定如何实现这一点。

我花了我晚上谷歌搜索的大部分时间，发现了这个时间表[http://tutorialzine.com/2012/04/timeline-portfolio/](http://tutorialzine.com/2012/04/timeline-portfolio/)但它比我需要的要广泛得多。

基本上我想做一些类似这样的东西，但没有内容滑块或 JSON 内容，只是一个时间线，显示帖子的标题可能是缩略图，当然正确地放置在与他们的日期相对应的时间线上被创造。

有什么想法我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-27T15:06:01.763

这是一个旧帖子，但答案可能对其他人有所帮助，帖子时间轴提供水平和垂直时间轴，您可以为 WordPress 下载它。

[https://wordpress.org/plugins/post-timeline/](https://wordpress.org/plugins/post-timeline/)

[时间轴演示](https://posttimeline.com/timeline-templates/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-04T16:58:18.620

这是一个老问题，但我真的想分享我找到的解决方案。

一起使用 WordPress、[高级自定义字段](https://www.advancedcustomfields.com/)(ACF) 和[TIMELINE JS](https://timeline.knightlab.com/) (TL)。

**我真的很喜欢时间轴 js，尤其是它们对移动友好的外观非常完美！一探究竟。**

我希望能够为我的学校创建一个用户，这样基本上每个人都可以使用 WordPress 用户友好的设计并为 TL 前端视图**创建新事件**。

> 我想说，并不是每个人都对 excel 感到满意，而且使用这种数据并不是最好的工作。

为了能够做到这一点，我编写了一些代码来获取 WordPress 安装的所有帖子，并将它们导出到 TL 可以读取为事件的 json 格式文件，每次更新或创建新帖子时。

*[您可以在此处](https://timeline.knightlab.com/docs/json-format.html)阅读有关 json 结构的更多信息*

### 1\. 步骤

使用 ACF 创建两个日期字段 - 一个用于开始日期，一个用于结束日期 - 并将返回格式设置为 Ymd [![在此处输入图像描述](../Images/914f2843e639e3b8d9ff41520bcf391e.png)](https://i.stack.imgur.com/OM0jR.jpg)

将它们设置为在帖子中显示。

### 2\. - 导出数据

之后，此代码会将帖子数据导出到文件结构中的文件中： *两个 ACF 字段的开始日期和结束**`startdato`日期`slutdato`*

```
function export_posts_in_json (){

    $args = array(
        'post_type' => 'post',
        'post_status' => 'publish',
        'posts_per_page' => -1,
    );

    $query = new WP_Query( $args );
    $text = new stdClass();
    $text->headline = "Det Kongelige Danske Kunstakademi";
    $text->text = "Som har været en del igennem";
    $timelineObj = new stdClass();
    $timelineObj->title = "media";
    $timelineObj->title = $text;

    $eventArray = array();

    while( $query->have_posts() ) : $query->the_post();

      $obj = new stdClass();

      if( has_post_thumbnail() ) {
        $media = new stdClass();
        $media->url = get_the_post_thumbnail_url(); 
        $media->thumbnail = get_the_post_thumbnail_url(get_the_ID(), 'thumbnail');
        $media->caption = get_post( get_post_thumbnail_id())->post_excerpt;
        $obj->media = $media;
      }

      $text = new stdClass();
      $text->headline = get_the_title();
      $text->text = get_the_content();

      $obj->text = $text;

      $startDate = new stdClass();
      $dateObject = new DateTime( get_field('startdato', get_the_ID() ) ); 
      $startDate->year = $dateObject->format('Y');
      $startDate->month = $dateObject->format('m');
      $startDate->day = $dateObject->format('d');

      $obj->start_date = $startDate;

      if( get_field('slutdato', get_the_ID() ) ) {  // Hvis der er en slutdato
        $endDate = new stdClass();
        $dateObject = new DateTime( get_field('slutdato', get_the_ID() ) ); 
        $endDate->year = $dateObject->format('Y');
        $endDate->month = $dateObject->format('m');
        $endDate->day = $dateObject->format('d');

        $obj->end_date = $endDate;
      }
      if( get_the_category() ) { // Can only take one!
        $category = new stdClass();
        $obj->group = get_the_category()[0]->name;
      }

      $eventArray[] = $obj; 

    endwhile;

    wp_reset_query();

    $timelineObj->events = $eventArray;

    $data = json_encode($timelineObj);
    $folder = get_stylesheet_directory() . '/it-timeline/';
    $file_name = 'timeline-data.json';
    $succes = file_put_contents( $folder.$file_name , $data );

} 
```

这将保存数据并可供 TL 读取（如我所说）。

### 3\. 实现库

然后添加 TL javascript 和 CSS 并从您的文件之一调用该`.php`文件：

```
<link title="timeline-styles" rel="stylesheet" href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">
<script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>

<div id='timeline-embed' style="width: 100%; height: 600px"></div>

<script type="text/javascript">
  var options = {
      hash_bookmark: true 
  }

  var json_url = "wp-content/themes/twentyseventeen-child/it-timeline/timeline-data.json"

  $.getJSON( json_url, function( data ) {
      timeline = new TL.Timeline('timeline-embed', data, options);
      console.log(data);
  } );
</script> 
```

### 瞧！

现在，您可以与可能不是 Excel 中最好的朋友或同事共享用户登录名，或者只是想要 WordPress 的功能。或者就我而言，如果你想开发一个包含很多不同人知识的时间线，**你可以**在一个用户友好的流程中共同完成一个项目——而不是在 Excel 中。

**希望这会对某人有所帮助**

这个对我有用。

# mysql - MYSQL 函数，它是 Workbench 还是只是让我感到厌烦？

> ID：10754910
> 
> 赞同：0
> 
> 时间：2012-05-25T13:01:23.933
> 
> 标签：mysql, function, workbench

几天来，我一直在使用 MySQL 的存储过程，它只是无法工作，所以我想我会回到基本并做一个非常简单的函数来检查项目是否存在。

我在第一个问题上遇到的问题是它说 END IF 在我的一个 IF 子句上是无效语法，但不是其他两个。第二个甚至不会将 BEGIN 识别为有效语法...

是我搞错了，还是我偶然发现了一个 MYSQL Workbench 错误？我有 Workbench 5.2（我写这篇文章时的最新版本），这是代码：

```
DELIMITER $$

CREATE FUNCTION `filmsidan`.`f_lateornot` (movie_id INT)
BEGIN
    DECLARE check_val INT;
    DECLARE return_val INT;

    SELECT stockId
    FROM orders
    WHERE stockId = movie_id
    INTO check_val;

    IF check_val <= 0
    THEN
        SET return_val = 1;
    ELSE
        SET return_val = 0;
    END IF;

    RETURN return_val;

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:05:43.760

要修复“开始”语法错误，您必须声明一个返回值，如下所示：

```
CREATE FUNCTION `filmsidan`.`f_lateornot` (movie_id INT) RETURNS INT(11) 
```

之后，Workbench 将不再返回错误；o)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:13:01.253

您必须在签名中指定返回值，并且缺少最后的分隔符。所以，你的功能应该看起来像

```
DELIMITER $$  
CREATE FUNCTION `filmsidan`.`f_lateornot` (movie_id INT) RETURNS INT
BEGIN  
DECLARE check_val INT;     
DECLARE return_val INT;      
SELECT stockId     
FROM orders     
WHERE stockId = movie_id     
INTO check_val;      
IF check_val <= 0     
THEN         
SET return_val = 1;     
ELSE         
SET return_val = 0;     
END IF;      
RETURN return_val;  
END
$$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T12:57:31.013

```
DELIMITER $$

CREATE FUNCTION `filmsidan`.`f_lateornot` (movie_id INT)
BEGIN
    DECLARE check_val INT;
    DECLARE return_val INT;

    SELECT stockId
    FROM orders
    WHERE stockId = movie_id
    INTO check_val;

    IF check_val <= 0
    THEN
        SET return_val = 1;
    ELSE
        SET return_val = 0;
    END IF;

    RETURN return_val;

END

$$

DELIMITER ; 
```

添加它工作的最后一件事：

```
$$

DELIMITER ; 
```

这意味着您在函数中使用 ( ; ) this ，因此我们使用它..see

另请参阅 [MySQL - 创建用户定义函数 (UDF) 时遇到问题](https://stackoverflow.com/questions/6628390/mysql-trouble-with-creating-user-defined-function-udf)

# python - 龙卷风。类 Django 的测试运行程序和测试数据库

> ID：10754912
> 
> 赞同：5
> 
> 时间：2012-05-25T13:01:35.633
> 
> 标签：python, django, unit-testing, tornado

我喜欢 django 单元测试，因为它们会在运行时创建和删除测试数据库。

存在哪些为龙卷风创建测试数据库的方法？

**UPD：**我对在测试运行时创建 postgresql 测试数据库感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T07:44:35.783

我发现最简单的方法就是对测试数据库使用 SQL 转储。创建一个数据库，用夹具填充它，然后将其写入文件。只需`load_fixtures`在运行测试之前调用（或在您想要重置数据库时）。这种方法当然可以改进，但它已经足够满足我的需要了。

```
import os
import unittest2

import tornado.database

settings = dict(
    db_host="127.0.0.1:3306",
    db_name="testdb",
    db_user="testdb",
    db_password="secret",
    db_fixtures_file=os.path.join(os.path.dirname(os.path.abspath(__file__)), 'fixtures.sql'),
)

def load_fixtures():
    """Fixtures are stored in an SQL dump.
    """
    os.system("psql %s --user=%s --password=%s < %s" % (settings['db_name'], 
        settings['db_user'], settings['db_password'], settings['db_fixtures_file']))

    return tornado.database.Connection(
        host=settings['db_host'], database=settings['db_name'],
        user=settings['db_user'], password=settings['db_password']) 
```

# android - 如何处理这个 SD 卡 Android 模拟器错误？

> ID：10754919
> 
> 赞同：-2
> 
> 时间：2012-05-25T13:02:15.303
> 
> 标签：android, emulation

我想将文件添加到 android 模拟器的 sd 卡，但我收到此错误：

推送选择失败：只读文件系统

我该怎么办？我是一名 Android 初学者，仍在学习如何使用终端和所有这些东西。所以拜托，有人可以给我一个分步教程，而不仅仅是另一个链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:21:45.077

[这](http://www.streamhead.com/android-tutorial-sd-card/)是一个关于创建 SD 卡的教程。在创建当前 SD 卡时，您可能没有授予它写入权限。按照该教程中的步骤，您将能够将图像上传到 SD 卡。

***编辑***

步骤1：`...tools>android create avd -n myemulator -t 8`

第2步：`...tools>mksdcard -l e 512M mysdcard.img`

第三步：`...tools>emulator -avd myemulator -sdcard mysdcard`

# ubuntu - ESX、KVM 和 QEMU 的区别

> ID：10754920
> 
> 赞同：1
> 
> 时间：2012-05-25T13:02:16.177
> 
> 标签：ubuntu, qemu, kvm, esx

ESX、KVM 和 QEMU 之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T14:41:58.073

Qemu 是一个开源的用户空间虚拟机监视器。它使用二进制翻译来运行客户指令。

```
Pros : 
1) Has support of helpers which help a lot in debugging
2) Can be used to run guest of a different ISA. (You can emulate an ARM guest on x86 desktop)
3) Does not need hardware support
4) code is available. you can modify it for debugging 
```

缺点：

```
1) Slow 
```

KVM 是一个在 linux 内核中实现的开源虚拟机监视器。Qemu 可以使用 /dev/kvm 接口在 KVM 上运行来宾。

```
Pros:
1) very fast
2) code is available in the kernel tree. you can modify it for debugging

Cons:
1) needs hardware support
2) Requires a user level software for interfacing (generally qemu) 
```

VMX 是 VMWare 的虚拟机监视器。VMX 的源代码不是免费提供的。但它同时支持用户空间和硬件支持的仿真。

```
Pros : 
1) Very easy to use. GUI is good.
2) Fast and configurable. 

Cons :
1) Cannot modify it to obtain more information about the guest. 
```

# php - Facebook Graph API 如何检索对 FB questionObject 的评论和关注

> ID：10754930
> 
> 赞同：0
> 
> 时间：2012-05-25T13:02:56.400
> 
> 标签：php, facebook-graph-api, facebook-comments

我需要检索对 FB 问题的评论和关注。我可以通过调用来检索问题对象：

https://graph.facebook.com/[user-id]/questions 或 https://graph.facebook.com/[question-id]

每个返回问题对象，但只包括基本信息和问题选项。它不包括评论和关注。

有谁知道如何检索这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:58:00.753

如果您使用的是 GRAPH API，请使用以下内容获取发布的所有评论和喜欢的问题。

[https://graph.facebook.com/me/questions](https://graph.facebook.com/me/questions)

# web-config - Dotnetnuke，“缺少 web.Config 注册”

> ID：10754941
> 
> 赞同：-1
> 
> 时间：2012-05-25T13:03:38.787
> 
> 标签：web-config, dotnetnuke, registration

我正在使用 Dotnetnuke，当我编辑主门户的内容时，它可以，

但是，当我想编辑子门户（RADEditor）的内容时，我收到以下错误。！

错误：“缺少 Web.config 注册”。

我查了一下，Web.config中有Httphandler注册。

我该如何解决它，任何人都可以帮忙吗？！

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:57:52.837

检查您是否在子门户的子根文件夹中没有额外的 web.config。

# iphone - UIScrollView contentInset 与视口填充

> ID：10754949
> 
> 赞同：0
> 
> 时间：2012-05-25T13:04:43.150
> 
> 标签：iphone, uiscrollview, padding, insets

我知道`contentInset`on `UIScrollView`，但是我试图实现一些稍微不同的东西：我想在滚动视图上有一个“视口”：基本上所有内容都在滚动视图中滚动，但始终在所有侧面都有空白填充。

在 CSS 方面，我想实现 {height: 300px; 填充：10px；溢出：滚动；}

这可能吗？如果可以，我该怎么做？

# c++ - g ++ mysql链接器错误

> ID：10754950
> 
> 赞同：3
> 
> 时间：2012-05-25T13:04:46.677
> 
> 标签：c++, linker, g++, libmysql

我正在尝试使用以下命令行编译用 c++ 编写的程序：

```
g++ test.cpp pugixml-1.0/src/pugixml.cpp -lcurl -lmysqlclient -lmysqlcppconn-static -lboost_thread 
```

这在 Debian 32 位机器上一切顺利，但在 Ubuntu 64 位机器上失败了，我不知道为什么。我已经安装了使用 mysql 所需的所有软件包。错误消息如下所示：

```
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libmysqlcppconn-static.a(mysql_client_api.cpp.o): In function `sql::mysql::NativeAPI::LibmysqlStaticProxy::thread_init()':
(.text+0x1): undefined reference to `mysql_thread_init'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libmysqlcppconn-static.a(mysql_client_api.cpp.o): In function `sql::mysql::NativeAPI::LibmysqlStaticProxy::thread_end()':
(.text+0x11): undefined reference to `mysql_thread_end'
etc. ...
collect2: ld returned 1 exit status 
```

该消息很长，并且所有行看起来都与更改引用非常相似；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:08:31.820

尝试反转`-lmysqlclient` `-lmysqlcppconn-static`链接器调用中的顺序。

如果对象 A 需要来自对象 B 的符号，则在链接器命令行中 A 必须位于 B 的前面。

# jquery - 当拇指悬停未单击时，NivoSlider 更改幻灯片

> ID：10754952
> 
> 赞同：0
> 
> 时间：2012-05-25T13:04:48.517
> 
> 标签：jquery, hover, nivo-slider, jquery-hover

您好，我希望有人可以帮助我，我已经设置了 nivoslider，但我希望改变 contral-nav 拇指操作的方式。开箱即用时，单击缩略图时主图像会发生变化，我希望将其更改为悬停。我在 nivoslider 插件中找到了以下几行：

```
 else {
        nivoControl.append('<a class="nivo-control" rel="'+ i +'">'+ (i + 1) +'</a>');
       }

        }
        //Set initial active link
        $('.nivo-controlNav a:eq('+ vars.currentSlide +')', slider).addClass('active');

        $('.nivo-controlNav a', slider).live('click', function(){
            if(vars.running) return false;
            if($(this).hasClass('active')) return false;
            clearInterval(timer);
            timer = '';
            slider.css('background','url("'+ vars.currentImage.attr('src') +'") no-repeat');
            vars.currentSlide = $(this).attr('rel') - 1;
            nivoRun(slider, kids, settings, 'control');
        }); 
```

然后我将 .live('click, 更改为 'hover' 并且在悬停时滑块确实发生了变化。问题在于尝试将鼠标悬停在上一个缩略图上时：主图像没有改变我必须返回两个项目才能得到它再次改变。有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T01:02:43.710

我成功地从以下更改了 jquery 插件代码：

```
.live("click",function(){if(e.running)return false;if(a(this).hasClass("active"))return false;clearInterval(i); 
```

到以下：

```
.live("mouseover",function(){if(a(this).hasClass("active"))return false;clearInterval(i); 
```

基本上将点击更改为鼠标悬停，然后删除“if(e.running)return false;”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:37:03.777

也许[这](http://www.soslignes-ecrivain-public.fr/Nivo-Slider-playing-with-transitions.html)会有所帮助。尝试更改`nivo-nextNav`to`nivo-controlNav:hover`并告诉我它是否有效；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:41:25.557

谢谢上面的链接......为了更简单的方法，你可以使用这个

```
 jQuery('#slider .nivo-control, .nivo-prevNav, .nivo-nextNav').live('mousemove',       function()
    {
        jQuery(this).trigger('click');
    }); 
```

我使用 mousemove 是因为我遇到的问题是，如果您从一个控件元素快速移动到另一个控件元素，它无法识别。

# file - 将包含目录的 SVN 修改文件复制到另一个目录

> ID：10754954
> 
> 赞同：3
> 
> 时间：2012-05-25T13:04:56.677
> 
> 标签：file, svn, unix, cut, ack

我的当前工作副本中有一个已在本地修改的文件列表。大约有 50 个文件已更改。

我正在使用以下命令将已在 subversion 中修改的文件复制到名为 /backup 的文件夹中。有没有办法做到这一点，但*维护*他们所在的目录？所以它会做一些类似于导出文件的 SVN 差异的事情。例如，如果我更改了一个名为的文件，`/usr/lib/SPL/RFC.php`那么它也会将该`usr/lib/SPL`目录复制到备份中。

```
cp `svn st | ack '^M' | cut -b 8-` backup 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T16:22:24.053

看起来很奇怪，但是用`tar`. 例如

```
tar -cf - $( svn st | ack '^M' | cut -b 8- ) |
tar -C /backup -xf - 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:17:14.457

为什么不为您的更改创建一个补丁？这样，您就有了一个包含所有更改的文件，您可以在名称中加上时间戳 - 例如`2012-05-28-17-30-00-UnitTestChanges.patch`，每天一个。

然后，您可以在准备好后将更改汇总到新的结帐，然后提交它们。

仅供参考：[Subversion 1.8](http://subversion.apache.org/roadmap.html#next-release-status)应该有[检查点](http://subversion.tigris.org/issues/show_bug.cgi?id=3626)/[搁置](http://subversion.tigris.org/issues/show_bug.cgi?id=3625)（这是您似乎想要做的），但这还有很长的路要走，并且可能只会在 Subversion 1.9 中添加。

# web-services - 为 Web 服务应用 HTTPS 的最佳实践

> ID：10754959
> 
> 赞同：-1
> 
> 时间：2012-05-25T13:05:13.853
> 
> 标签：web-services, apache, tomcat, https

我正在开发用 CXF 2.5.2 实现的 JAVA 中的 web 服务。我使用 apache Tomcat 作为 Web 服务器。

我需要在一些 web 服务方法中添加 HTTPS 安全性，我想知道最好的实现 HTTPS 安全性。我听说我可以通过指定安全约束在 web.xml 中配置 HTTPS……或者我可以在 Apache tomcat 中为任何方法配置 HTTPS。

我对每种解决方案的优缺点的看法，我认为在 web.xml 中配置 https 的好处是在 webservice 的同一个 webapp 中本地化。apache tomcat 配置的优势在于不与任何 webapp 耦合。

我确信还有更多方法可以实现 HTTPS。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:34:22.190

在 web.xml 中配置安全性（例如）

```
<security-constraint>
      <web-resource-collection>
         <web-resource-name>REST Service </web-resource-name>
         <url-pattern>/*</url-pattern>
      </web-resource-collection>
       <auth-constraint>
         <role-name>User</role-name>
      </auth-constraint>
  </security-constraint>

  <login-config>
      <auth-method>BASIC</auth-method>
      <realm-name>Test</realm-name>
   </login-config>
   <security-role>
      <role-name>User</role-name>
   </security-role> 
```

# javascript - 在域上设置 cookie 并在子域上获取它

> ID：10754961
> 
> 赞同：0
> 
> 时间：2012-05-25T13:05:24.763
> 
> 标签：javascript, cookies

我已经在以下位置设置了一个 cookie（在 Javascript 中）：`www.sampledomain.com`但是当我去的时候，`blurrrp.sampledomain.com`我似乎看不到它:(

我的 cookie 域设置为`"/"`但不正确 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:08:11.657

您可以为域设置 cookie：example.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:06:49.377

那是因为`x.example.com`不是`www.example.com`.

您需要摆脱`www`，或将子域更改为`x.www.example.com`.

# css - 960 GS 的 CSS 布局问题

> ID：10754962
> 
> 赞同：-1
> 
> 时间：2012-05-25T13:05:26.927
> 
> 标签：css, 960.gs

我只是想使用 960 GS 实现以下 CSS 布局。几乎是报纸文章的布局。我发现定位有问题。

我正在使用您的信息

> ```
>  $ninesixty-grid-width: 978px;
>    $ninesixty-columns:12;
>    $ninesixty-gutter-width: 0px;
>    $ninesixty-class-separator: "-"; 
> ```

我无法用文本中的图像实现报纸式的布局。请指导我一些链接或指针或代码来实现这一点。如果您需要更多信息，请告诉我

![CSS 图像布局](../Images/5d433b6c74d574ed6ea525db94563435.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:52:51.460

你没有说你是否已经有了网格，但无论如何如果你去 -[网格生成器站点](http://grids.heroku.com/)并输入设置：

![在此处输入图像描述](../Images/5d06ec6e83bd65f8b4288ceececfb0f6.png)

首先将整个页面包装在一个`container-12`然后我会在你的 div 上使用以下类进行布局：

![在此处输入图像描述](../Images/cbe63943c3c0326b846014ee7df7e980.png)

笔记：

我认为您需要将两个元素都放在第一个 grid-6 中以避免浮动问题。其他要考虑的事情是你没有排水沟，所以元素会彼此紧密相连。我建议修改设置并添加一个装订线。

通常我不会向网格元素添加填充，因为这意味着您需要编辑宽度并且这与网格系统相违背。

# performance - 启用密钥缓存时，cassandra 缓存密钥时是否有任何性能开销？

> ID：10754966
> 
> 赞同：1
> 
> 时间：2012-05-25T13:05:40.230
> 
> 标签：performance, cassandra, cassandra-0.7

1）我们正在使用大约 8000 个行键查询 Cassandra，并且对于每一行，请求的超列有 5 个子列。

2) 我们启用了缓存= KEYS_ONLY 和 2 MB 的键缓存的键缓存。

3) 我们有 10 个 cassandra 节点在 Cassandra-1.1 上运行

第一次没有缓存键时，大约需要 35 秒才能返回结果。如果再次触发相同的查询，则在 1.5 - 2.0 秒内返回结果。

所以我想知道 Cassandra 在密钥缓存中缓存密钥时是否有任何类型的开销。这是否是在未缓存键时需要花费太多时间来返回结果的原因？还是这是一般行为？

# python - 我可以在哪个 py.test 标注中找到“项目”和“报告”数据？

> ID：10754970
> 
> 赞同：8
> 
> 时间：2012-05-25T13:06:08.347
> 
> 标签：python, pytest

pytest_runtest_makereport() 获取两个参数，item 和 call。从 item 中，我可以找到为此测试创建的 funcarg，从 call 中，我可以找到异常信息（如果有）：

```
def pytest_runtest_makereport (item, call):
    my_funcarg = item.funcargs['name']
    my_funcarg.excinfo = call.excinfo 
```

不幸的是，excinfo 被填充为失败和跳过。为了区分，我需要查看 pytest_report_teststatus() 的报告参数：

```
def pytest_report_teststatus (report):
    if report.when == 'call':
        if report.failed:
            failed = True
        elif report.skipped:
            skipped = True
        else:
            passed = True 
```

这是很好的信息，但我无法将它与我为测试创建的 funcarg 相关联。我查看了报告参数（TestReport 报告），但找不到任何方法来返回传递给 pytest_runtest_makereport() 或我创建的 funcarg 的项目。

我在哪里可以访问两者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:44:52.680

有一些未记录的有点非官方的方法，钩子实现可以与其他钩子实现交互，例如对它们的结果进行后处理。在您的具体情况下，您可能会执行以下操作：

```
@pytest.mark.tryfirst
def pytest_runtest_makereport(item, call, __multicall__):
    rep = __multicall__.execute()
    # your code follows and you can use rep.passed etc.
    return rep 
```

笔记：

*   一个钩子调用通常会调用多个钩子实现
*   “tryfirst”标记指示钩子调用让您的实现被尽早调用
*   **multicall**参数表示正在进行的钩子调用，可用于调用剩余的钩子实现，然后
    将其结果用于进一步处理
*   你需要在这里返回“rep”，因为你隐藏了“真实”的创作

**多重**调用 API 真的很少，我怀疑可能有针对您的用例不需要它的解决方案。

HTH，霍尔格

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-06T02:53:13.497

虽然 hpk42 的答案有效，`__multicall__`但正在贬值。

但是，这实现了相同的结果：

```
@pytest.hookimpl(hookwrapper=True)
def pytest_runtest_makereport(item, call):
    outcome = yield
    rep = outcome.get_result()
    setattr(item, "rep_" + rep.when, rep)
    return rep 
```

# facebook - 在用户墙上发布活动的应用程序

> ID：10754975
> 
> 赞同：0
> 
> 时间：2012-05-25T13:06:16.003
> 
> 标签：facebook, facebook-graph-api, android-activity, facebook-c#-sdk

我希望有一个应用程序可以在 Facebook 上发布关于我网站上用户的所有活动的信息，而无需一次又一次地征求许可。

我希望每次您在那里观看视频时都像[dailymotion那样做。](http://www.dailymotion.com)

任何人都可以指导我。只需步骤或一些示例代码就足够了。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:13:06.597

你应该了解[open grpah](https://developers.facebook.com/docs/opengraph/)

这是[教程](https://developers.facebook.com/docs/opengraph/tutorial/)

以下是[示例代码](https://developers.facebook.com/docs/opengraph/samples/)。

此外，还有一个官方的 php sdk 和用于 facebook api 的 JS sdk，这让生活更轻松。

# wordpress - 修复 wordpress 查询（如果有则添加）

> ID：10754981
> 
> 赞同：0
> 
> 时间：2012-05-25T13:06:32.870
> 
> 标签：wordpress

```
<ul>
<?php
global $post;
$args = array( 'numberposts' => 12, 'orderby' => 'date', 'year' => '2012', 'order' => 'ASC', 'document_language' => 'english');
$myposts = get_documents( $args );
foreach( $myposts as $post ) :  setup_postdata($post); ?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php endforeach; 
?>
</ul> 
```

如果有帖子查询，我该如何输入？它基本上是自定义帖子类型查询，但它使用文档修订插件（所以 get_posts 是 get_documents）？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:28:13.083

如果您只想检查查询是否返回任何帖子。你仍然可以用你的代码来做。

这是示例：

```
<?php

    global $post;

    // This is your query
    $args = array( 'numberposts' => 12, 'orderby' => 'date', 'year' => '2012', 'order' => 'ASC', 'document_language' => 'english');
    $myposts = get_documents( $args );

    if (count($myposts) > 0 ) : // If the query returned results

    ?>

    <ul>

        <?php foreach( $myposts as $post ) :  setup_postdata($post); // for each post in array ?>
            <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
        <?php endforeach; ?>

    </ul>

    <?php endif; ?> 
```

# c++ - C++：CRTP 析构函数？

> ID：10754991
> 
> 赞同：0
> 
> 时间：2012-05-25T13:07:30.997
> 
> 标签：c++, inheritance, crtp

在一个项目中，我有以下问题：

我有一个非常简单的继承方案（我需要继承而不是组合）：

类基础

-> 类 DerivedA

-> 类 DerivedB

-> 类 DerivedC

A、B 和 C 从 Base 派生，仅此而已。所以现在我有两个选择：

具有虚拟性的公共继承

没有虚拟性的私有继承

由于某些优化原因（我需要大量内联），我不想要虚拟性......而且我不想要私有继承。我认为剩下的唯一选择是 CRTP。但是基类有大约 300 个函数，在其中实现 CRTP 将是一个真正的痛苦。

所以我想知道以下解决方案是否有效：我只在基类的析构函数中使用 CRTP：

```
template<class TCRTP> class Base
{
    ~Base() {delete static_cast<TCRTP*>(this);}
} 
```

其中 TCRTP 将是 DerivedA、B 或 C，我进行公共继承。完全没问题，还是有问题？

非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T13:36:58.847

你的析构函数肯定是错误的。类的析构函数不会也不应该`delete`是对象的内存。

你反对没有虚函数的公共继承？有（至少）几种方法可以防止有人通过基指针意外删除派生对象。一是制作基础析构函数`protected`。

另一种是将派生类的动态分配实例直接填充到`shared_ptr`. 这甚至可以是`shared_ptr<Base>`：

```
std::shared_ptr<Base> foo(new DerivedA(...)); 
```

因为`shared_ptr`有一个模板构造函数来捕获其参数的类型，所以`Base*`指针将`DerivedA*`在与 关联的删除器函数中转换为`shared_ptr`，因此被正确删除。没有人应该愚蠢到试图从 a 中提取指针`shared_ptr`并将其删除为`Base*`.

当然，如果您没有虚函数，那么只有当派生类之间的唯一区别在于它们在构造函数中设置的内容时，这个技巧才真正有用。否则，您最终需要从 向下转换`Base*`指针`shared_ptr`，在这种情况下，您应该使用 a`shared_ptr<DerivedA>`开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:49:18.930

我可以看到在 的实现中使用类似代码`IUnknown::Release`，但从来没有在析构函数中使用。析构函数仅在派生对象被销毁后运行，在该点`Base`尝试`delete`派生对象是未定义的行为。我很确定在这种特殊情况下你会得到无限递归。

# ssrs-2008 - SSRS：tablix 单元格中的外部图像

> ID：10754993
> 
> 赞同：2
> 
> 时间：2012-05-25T13:07:40.013
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

我的数据集包含一个名为的列`IconUri`，其中包含位于 Web 服务器上的图像的完整 HTTP 地址。此数据集绑定到 tablix，我想在单元格中显示图像。

1）我试图将图像拖到单元格中，但我不能使用表达式，因为图像本身不知道其父（tablix）数据集。

2）我还尝试将图像应用为单元格背景，虽然这肯定会显示图像，但它会在水平和垂直方向重复，这是不可取的。单元格应仅包含图像的一份副本。

3）我试图在单元格中创建一个矩形，但它会缩放到单元格本身，因此与上面的效果相同。

有没有办法做到这一点？如果这是必要的，我什至愿意执行一些 XML 黑客攻击。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-10T07:20:14.503

从工具箱中将图像拖到 tablix 的单元格中：

[![在此处输入图像描述](../Images/09e515ccc04971c8cc8d4461d4e49bba.png)](https://i.stack.imgur.com/kmLei.png)

然后右键单击单元格中新添加的图像并选择图像属性：

[![在此处输入图像描述](../Images/ca9ef38b6d2805cbce34f7fc72a5c5a2.png)](https://i.stack.imgur.com/P9dbk.png)

将图像源更改为外部，然后选择包含您的产品 URL 的数据集字段：

[![在此处输入图像描述](../Images/7da687a0ee6b3606ad0d9a53f8d48627.png)](https://i.stack.imgur.com/Ouij0.png)

如果您在运行报告时看到可怕的红十字而不是图像，请三重检查 URL 是否确实指向公开可用的图像。

如果您使用文件系统中的文件而不是 url 上托管的图像，则需要确保文件路径[的格式为 "file:///C:/RDLCTest/TestImage.png"](https://stackoverflow.com/a/16890787/1879019)。

如果您还在 ReportViewer 控件中显示报告，则需要[在代码](https://social.msdn.microsoft.com/Forums/en-US/48f25025-0e76-4107-92a5-a61ac631bceb/the-enableexternalimages-property-has-not-been-set-for-this-report-vs2015?forum=sqlreportingservices)[`EnableExternalImages`](https://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.localreport.enableexternalimages.aspx)中打开报告，但如果您只是将报告输出为 PDF 并下载它，则不需要这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:21:38.470

使用 Image 并在图像属性中将值设置为如下所示 = Code.ConvertTotWebUrl(First(Fields!Logo.Value, "dsOrder"))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:35:35.130

我通过检查编辑器为图像创建的 XML 代码解决了这个问题，我在 tablix 单元格中移动了相关标记并分配了适当的绑定。当我再次重新打开编辑器时，一切都到位：图像识别数据源，编译和渲染工作完美无缺。

# android - 如何从我的应用程序中的重置状态停止屏幕方向更改

> ID：10754996
> 
> 赞同：0
> 
> 时间：2012-05-25T13:07:54.100
> 
> 标签：android, multithreading, atomicboolean

当我的线程启动时，我将 an 设置`AtomicBoolean`为 true。最后，我在关联的处理程序中将其重置为 false。

当我在线程结束之前更改屏幕方向时：

*   onSaveInstanceState() 打印此布尔为 TRUE
*   onPause() 也打印 TRUE。-> 逻辑

线程结束，我再次改变方向：

*   我的 Log.e "Bool" 打印 FALSE -> OK
*   onSaveInstanceState() 打印 TRUE -> 问题
*   onPause() 打印 TRUE -> 问题
*   onCreate() 打印 TRUE -> 问题

创建（）：

```
if (savedInstanceState != null) {
    boolLocThread.set(savedInstanceState.getBoolean("boolLocThread"));
    Log.i("APP", "load LOC: " + boolLocThread.get());
    if (boolLocThread.get()) {
       Log.i("APP", "show progressDialog again");
       progressDialog = ProgressDialog.show(App.this, "", "Loading...", true);              
    }
} 
```

处理程序：

```
Handler handlerLoc = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        Log.i("APP", "Handler received (LOC)");
        Log.i("APP", "Suppress progressDialog (LOC)");
        progressDialog.dismiss();
        boolLocThread.set(false);
        Log.e("APP", "Bool: " + String.valueOf(boolLocThread.get()));

    }
}; 
```

OnSaveInstanceState：

```
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean("boolLocThread", boolLocThread.get());
    Log.i("APP", "save LOC: " + boolLocThread.get());           
} 
```

在 OnStop 方法中，我将布尔值设置为 false，在 OnPause 方法中，如果它存在，我将关闭我的 progressDialog。如果我在结束前不转动屏幕，bool 被重置为 FALSE，没有问题。我怎样才能正确重置我的布尔值？谢谢

# c# - 依赖属性，无法创建新的类实例

> ID：10754998
> 
> 赞同：0
> 
> 时间：2012-05-25T13:07:55.917
> 
> 标签：c#, wpf, xaml, dependency-properties

我正在设计一个可以有两种主要状态的控件。状态将通过依赖属性设置。我想通过 XAML 设置属性。我知道 setter 仅在通过 XAML 设置时才会运行 setValue 代码，如下所述：[WPF: XAML property declarations not being set via Setters?](https://stackoverflow.com/questions/3836076/wpf-xaml-property-declarations-not-being-set-via-setters)

所以我试图设置一个 DependencyPropertyChangedEvent 事件，但是当我运行我的代码时，我得到了这个错误：

```
XamlParseException Occurred
'The invocation of the constructor on type 'RouteOneClient.VehicleInfoControl'
that matches the specified binding constraints threw an exception.' Line number 
'134' and line position '34'. 
```

当我查看它时，它告诉我我无法在我的事件中创建我的控件的新实例。C# 逻辑如下所示：

```
 public enum VehicleType
    {
        Sale = 1,
        Trade = 2,
    }

    public static readonly DependencyProperty VehicleTypeProperty =  DependencyProperty.Register(
        "VehicleTYPE", 
        typeof(VehicleType), 
        typeof(VehicleInfoControl), 
        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.AffectsRender, new PropertyChangedCallback(OnVehTypeChanged)));  // optionally metadata for defaults etc.

    public VehicleInfoControl()
    {
        InitializeComponent();
    }

    public VehicleType VehicleTYPE
    {
        get { return (VehicleType)GetValue(VehicleTypeProperty); }
        set
        {
            SetValue(VehicleTypeProperty, value);
        }          
    }

    private static void OnVehTypeChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        VehicleInfoControl instance = d as VehicleInfoControl;

        if (instance.VehicleTYPE == VehicleType.Sale)
        {
            instance.TitleLabel.Content = "Sale Vehicle";
            instance.IntendedUse.Visibility = System.Windows.Visibility.Visible;
            instance.VehicleNewUsed.Visibility = System.Windows.Visibility.Visible;
            instance.VehicleVin.Visibility = System.Windows.Visibility.Visible;
            instance.VehicleInceptionMiles.Visibility = System.Windows.Visibility.Visible;
            instance.IntendedUseLabel.Visibility = System.Windows.Visibility.Visible;
            instance.VehicleNewUsedLabel.Visibility = System.Windows.Visibility.Visible;
            instance.VehicleVinLabel.Visibility = System.Windows.Visibility.Visible;
            instance.VehicleInceptionMilesLabel.Visibility = System.Windows.Visibility.Visible;
        }
        else
        {
            instance.TitleLabel.Content = "Trade Vehicle";
            instance.IntendedUse.Visibility = System.Windows.Visibility.Hidden;
            instance.VehicleNewUsed.Visibility = System.Windows.Visibility.Hidden;
            instance.VehicleVin.Visibility = System.Windows.Visibility.Hidden;
            instance.VehicleInceptionMiles.Visibility = System.Windows.Visibility.Hidden;
            instance.IntendedUseLabel.Visibility = System.Windows.Visibility.Hidden;
            instance.VehicleNewUsedLabel.Visibility = System.Windows.Visibility.Hidden;
            instance.VehicleVinLabel.Visibility = System.Windows.Visibility.Hidden;
            instance.VehicleInceptionMilesLabel.Visibility = System.Windows.Visibility.Hidden;
        }
    } 
```

和 XAML：

```
<Expander Header="Vehicle Information" Width="Auto" Height="Auto" Grid.Row="2">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width=".3*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <custom:VehicleInfoControl x:Name="SaleVeh" Width="Auto" Height="Auto" Grid.Column="0" VehicleTYPE="Sale"/>
        <custom:VehicleInfoControl x:Name="TradeVeh" Width="Auto" Height="Auto" Grid.Column="2" VehicleTYPE="Trade"/>

    </Grid>
</Expander> 
```

上面给出的错误指向该行。

我觉得我正确地遵循了表格，但它没有运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:16:22.847

您的依赖属性的类型是一个枚举，它是一个[ValueType](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)，但您`null`在属性元数据中指定为默认属性值。那是行不通的，因为`null`它不是 ValueType 的有效值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T13:18:30.180

在注册您的依赖属性时，您将“null”传递给“FrameworkPropertyMetadata”构造函数。

您传递的第一个参数将是您的 Dependency 属性的默认值。在您的情况下，您将 Null 作为 ENUM 类型的依赖项属性的默认值传递，这是不允许的。

传递有效的默认值可能会解决您的问题..

像这样的事情可能会做

```
new FrameworkPropertyMetadata(VehicleType.Sale,  FrameworkPropertyMetadataOptions.AffectsRender,  new PropertyChangedCallback(OnVehTypeChanged))); 
```