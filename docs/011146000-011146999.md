# StackOverflow 问答 11146000-11146999

# jquery - 可在表格行上排序的 jQueryUI 在拖动时缩小它们

> ID：11146000
> 
> 赞同：15
> 
> 时间：2012-06-21T20:12:35.213
> 
> 标签：jquery, jquery-ui, html-table, jquery-ui-sortable, shrink

这个在 sortable 函数中拖动时表格行缩小的问题困扰了我很长时间。有什么答案吗？（问答）

PS为了使可排序的表完全可以工作，您必须在要排序的表行周围使用TBODY，然后在包含的TBODY上调用可排序函数。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-12-01T14:38:34.413

```
.ui-sortable-helper {
    display: table;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T20:12:36.803

您需要做的就是为表格单元格提供特定的像素宽度。我们如何在不知道表格单元格内容的情况下做到这一点？简单的：

```
$(document).ready(function(){
    $('td').each(function(){
        $(this).css('width', $(this).width() +'px');
    });
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-03-24T16:16:53.607

我在网上偶然发现了一个解决方案。

```
var fixHelper = function(e, ui) {  
  ui.children().each(function() {  
    $(this).width($(this).width());  
  });  
  return ui;  
};
$(“#sort tbody”).sortable({  
 helper: fixHelper  
 }).disableSelection(); 
```

[修复可排序的 tr 不收缩](http://www.foliotek.com/devblog/make-table-rows-sortable-using-jquery-ui-sortable/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-01T11:39:21.783

提供的解决方案都不适合我。

在我的例子中，jQuery 的 ui sortable 计算的高度和宽度被向下舍入并通过 style 属性覆盖自动计算的尺寸。

这是我为解决这个问题所做的，我发现它比大多数提供的解决方案更优雅。（即使里面有`!important`s。）

```
.ui-sortable-helper {
    width: auto !important;
    height: auto !important;
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-05-16T03:17:36.487

src jquery-1.12.4.js

src jquery-ui.js

链接 rel jquery-ui.css

```
@model Servidor.CListados
@{
    ViewBag.Title = "Index";
}
@using (Html.BeginForm())
{
    <h2>Listados</h2>
    <h2>@ViewBag.Mensaje</h2>
    <table>
            <tr>
                <th>Campo1</th>
                <th>Campo2</th>
            </tr>
        <tbody id="sortable">
            @foreach (var item in Model.ListaTabla1)
            {
                <tr >
                    <td>@Html.DisplayFor(modelItem => item.Campo1)</td>
                    <td>@Html.DisplayFor(modelItem => item.Campo2)</td>
                </tr>
            }
        </tbody>
    </table>
    @*<ul id="sortable">
        @foreach (var item in Model.ListaTabla1)
        {
            <li>@Html.DisplayFor(modelItem => item.Campo1)</li>
        }
    </ul>*@
}
     <script>$("#sortable").sortable();</script> 
```

# c++ - 继承函数中的参数消失

> ID：11146002
> 
> 赞同：0
> 
> 时间：2012-06-21T20:12:36.070
> 
> 标签：c++, parameters

我有 1 个父类（“区域”）和一些子类（“圆”、“多边形”等）。其中一个虚拟继承函数的行为非常奇怪——它的输入参数在运行时消失（在调试模式下可见）。它使一些记忆奇怪的错误..你有什么想法吗？（让我们假设 Segment 类运行良好）

```
class Point {
    int x, y;
public:
    Point(){};
    Point(int xP, int yP):x(xP), y(yP){}
};

class Area {
public:
    virtual ~Area() {
    }
    virtual bool contains(const Point& p1) const=0;
};

class Circle: public Area {
    double radius;
    Point center;
public:
    ~Circle() {}
    Circle(double radiusP, Point centerP) :
            radius(radiusP), center(centerP) {}
    bool contains(const Point& p1) const;
}; 
```

以及函数的定义（包含）：

```
bool Circle::contains(const Point& p1) const {
    return Segment(center, p1).getLength() < radius;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:17:36.813

P1 是一个参考。如果 p1 被删除，或者是在 contains 运行时超出范围的临时文件，则会出现内存错误。

@lezebulon 临时超出范围的示例：

```
Point& getPoint()
{
    Point p;
    return p;
}

void doStuff()
{
    Point& p = getPoint(); // p is already bad... but will probably still work.
    area->contains( p ); // oops stack overwritten, p obliterated
} 
```

# ireport - JasperServer 上的输入控件 - 取消选中可见，获取错误

> ID：11146008
> 
> 赞同：0
> 
> 时间：2012-06-21T20:13:01.850
> 
> 标签：ireport, jasperserver

我有一个在 iReport Professional 4.5.1 中创建并部署到 JasperServer 的报告。我的报告中有一个参数用于指定排序列：

名称：profit_loss_sort
参数类：java.lang.String
用作提示：是
默认值表达式：“FAC_ID”

然后我有另一个参数，它采用 $P{profit_loss_sort} 并使用它为我的查询创建一个 ORDER BY 子句：

名称：profit_loss_sort_function
参数类：java.lang.string
用作提示：无
默认值表达式：“ORDER BY”+$P{profit_loss_sort}+“ASC”

当 $P{profit_loss_sort} 设置为可见时，这在 iReport 和 JasperServer 上运行良好。我在每个列标签上设置了一个超链接，当您单击它们时，报告会按每列排序。

当我取消选中 $P{profit_loss_sort} 的可见框时，第一次尝试运行报告时，我收到一个 Oracle 错误，指出我缺少表达式（ORA-00936：缺少表达式）。我不明白，因为我的查询中的 ORDER BY 子句是：

$P!{profit_loss_sort_function}

所以 JasperServer 应该采用这两个参数的默认值并提出一个 ORDER BY 子句。事实上，当我使用“Run JasperServer Report”选项从 iReport 运行报告时，它会正确运行并填写默认的 ORDER BY 子句。$P{profit_loss_sort} 是强制性的，在 JasperServer 端，我为我的输入控件取消选中“始终提示”。

我不希望 $P{profit_loss_sort} 成为可见的输入控件，但我仍然希望它在第一次运行报表时使用默认值。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:28:39.003

我想通了 - 我有一个将参数传递给子报表的主报表。我在子报表中为参数 $P{profit_loss_sort} 设置了默认值，但在主报表中没有。

我在主报告中为其设置了默认值，现在当我取消选中“可见”框时，JasperServer 报告隐藏了该输入控件，我可以使用我的超链接进行排序。

# javascript - Rally App SDK 2.0：按 UserPermissions 过滤用户商店

> ID：11146013
> 
> 赞同：1
> 
> 时间：2012-06-21T20:13:20.523
> 
> 标签：javascript, extjs, rally

我正在尝试构建一个仅包含未禁用且对所选项目具有编辑权限的用户的商店。但是，UserPermissions 是一个 UserPermission 对象数组，这使得这样的过滤器相当复杂。似乎 UserPermission 可以是 WorkspacePermission 或 ProjectPermission 类型。因此，看起来我首先必须检查 UserPermission 的类型，然后检查 _refObjectName 是否包含所选项目的名称和“编辑器”，或者，深入研究 ProjectPermission 本身并检查项目的名称和“编辑”的角色分开。我试图使用 filterBy 函数，传入一个接受记录和 id 的函数，但我无法命中我在该函数中设置的断点，所以我不知道它是否有效。组合框中显示的结果似乎与我查询的内容不匹配。有什么建议么？

**Edit1**：我尝试将查询修改为特定项目名称的范围，但我收到此错误：“无法解析：查询表达式中不允许类型 ProjectPermission 上的属性 \"Project\"。” 有没有办法解决这个问题？

这是修改后的查询，不包括实际的项目名称： [https ://rally1.rallydev.com/slm/webservice/x/ProjectPermission.js?pagesize=1&fetch=true&includeSchema=true&includeMeta=true&query=%28%28Role%20=% 20Editor%29%20AND%20%28Project.Name%20%3D%20%22](https://rally1.rallydev.com/slm/webservice/x/ProjectPermission.js?pagesize=1&fetch=true&includeSchema=true&includeMeta=true&query=%28%28Role%20=%20Editor%29%20AND%20%28Project.Name%20%3D%20%22) **{此处的项目名称}** %22%29%29

**Edit2**：只是想有人可能想知道。我在尝试向查询添加另一个参数以按用户的 DisplayName 过滤时收到此错误。

“无法解析：UserPermission 尚不支持复杂查询。您只能按角色或按用户查询，不能同时按两者。”

**Edit3**：我在调用根据用户的 DisplayName 获取用户的所有项目权限时遇到了额外的麻烦。就我而言，查询已按应有的格式格式化。但是，只返回某些用户的结果，我不知道为什么不包括其他用户。我什至尝试修改它以查询名字，并且用户的权限不包含在结果集中。

[https://rally1.rallydev.com/slm/webservice/x/ProjectPermission.js?pagesize=200&fetch=true&includeSchema=true&includeMeta=true&query=%28User.DisplayName%20%3D%20%22](https://rally1.rallydev.com/slm/webservice/x/ProjectPermission.js?pagesize=200&fetch=true&includeSchema=true&includeMeta=true&query=%28User.DisplayName%20%3D%20%22) **{在此处插入名称}** %22% 29

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:30:59.070

您可以查询 Permissions 端点以确保该权限适用于编辑器，您可以通过点击此[链接](https://rally1.rallydev.com/slm/webservice/x/ProjectPermission.js?pagesize=1&fetch=true&includeSchema=true&includeMeta=true&query=%28Role%20=%20Editor%29)查看该请求的 json 。

要获取活动用户列表，您可以使用 disabled = false 来查询他们，如下[所示](https://rally1.rallydev.com/slm/webservice/x/users.js?pagesize=1&includeSchema=true&query=%28disabled%20=%20false%29)。

一旦您在内存中拥有权限数据，您就可以过滤掉没有编辑权限的用户，并将它们与活动用户列表匹配。

# android - Android：打开从电子邮件客户端附件查看意图传递到 Activity 的文件

> ID：11146017
> 
> 赞同：1
> 
> 时间：2012-06-21T20:13:34.700
> 
> 标签：android, android-intent

我正在开发一个使用自定义文件类型的应用程序，我已经弄清楚如何将我的应用程序注册到系统，以便能够使用意图过滤器打开这种类型的文件，并且我的应用程序也将显示在应用程序列表中可用于在尝试打开此类附件时从内置电子邮件客户端打开此文件。问题是从文件浏览器传入时处理打开文件的代码在从电子邮件客户端传入时不起作用。在选择正确类型的文件后，从文件浏览器调用 Activity 时，我使用的代码可以正常工作：

```
Intent i = getIntent();
if(i == null) return;
Uri u = i.getData();
if(u == null) return;
String filePath = u.getEncodedPath();
if(filePath == null) return;
Util.loadOTDRFile(filePath); 
```

从文件浏览器加载时，我在“filePath”字符串中得到的内容类似于“mnt/storage/Android/data/com.fiberdroid.001/downloads/filename.trc... loadOTDRFile() 函数成功。

但是，当我从电子邮件客户端打开相同类型的文件时，该代码中的 filePath 变量最终类似于以下内容：“//mail/parts/4217”未加载，我的加载函数返回未找到的文件错误。

以下是 loadOTDRFile() 函数的相关代码：

```
File file = new File(filePath);
InputStream is;
try
{
    is = new FileInputStream(filePath);
}
catch(FileNotFoundException e)
{
    return D.ERROR_FILENOTFOUND;
} 
```

我想我的问题是“//mail/parts/4217”是什么样的路径，为什么我不能打开它？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T21:29:20.670

那是一个内容 URI...您需要使用 ContentResolver 从邮件提供商打开文件。

为此，您应该这样做：

```
getContentResolver().openInputStream(u); // Where 'u' is the uri you extract from the intent. 
```

你可能希望这样写：

```
Uri u = i.getData();
String scheme = u.getScheme();
if (ContentResolver.SCHEME_CONTENT.equals(scheme)) {
    // handle as content uri
} else {
    // handle as file uri
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T13:15:01.413

对于任何可能偶然发现这个问题的人，以下是我从内容 URI 或以第三方应用程序的意图传入的文件 URI 读取文件数据的操作：

首先，将这些意图过滤器放入清单中，将“.trc”替换为您希望应用打开的类型的文件扩展名：

```
 <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="*/*" />
                <data android:scheme="file" />
                <data android:host="*" />
                <data android:port="*" />
                <data android:pathPattern=".*..*..*..*..*..*.trc" />
                <data android:pathPattern=".*..*..*..*..*.trc" />
                <data android:pathPattern=".*..*..*..*.trc" />
                <data android:pathPattern=".*..*..*.trc" />
                <data android:pathPattern=".*..*.trc" />
                <data android:pathPattern=".*.trc" />
            </intent-filter>

            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:scheme="content" />
                <data android:mimeType="text/plain" />
            </intent-filter> 
```

不要问我那些路径模式，在偶然发现这个网站上的那个解决方案之前，我尝试了很多不起作用的东西，它是第一个有效的，所以我保留了它。

然后，将与此类似的代码添加到将接收文件的活动的 onCreate() 方法（util.loadOTDRFile 函数特定于我的应用程序，您必须自己制作才能加载文件）：

```
 Intent i = getIntent();
        if(i == null) return;
        Uri u = i.getData();
        if(u == null) return;
        String scheme = u.getScheme();

        if(ContentResolver.SCHEME_CONTENT.equals(scheme))
        {
            try
            {
                ContentResolver cr = getContentResolver();
                AssetFileDescriptor afd = cr.openAssetFileDescriptor(u, "r");
                long length = afd.getLength();
                byte[] filedata = new byte[(int) length];
                InputStream is = cr.openInputStream(u);
                if(is == null) return;
                try
                {
                    is.read(filedata, 0, (int) length);
                    Util.loadOTDRFileFromByteArray(filedata);
                }
                catch(IOException e)
                {
                    return;
                }   
            }
            catch(FileNotFoundException e)
            {
                return;
            }
        } 
        else
        {
            String filePath = u.getEncodedPath();
            if(filePath == null) return;
            Util.loadOTDRFileFromPath(filePath);
        } 
```

# ios - 如何减慢 UIDocument 的初始 loadFromContents:ofType:error:?

> ID：11146019
> 
> 赞同：1
> 
> 时间：2012-06-21T20:13:36.223
> 
> 标签：ios, uidocument

当我将文件包从 Finder 拖到 iTunes.app 文件共享窗格中时，我的 UIDocument 类正在尝试读取关联的文件包装器，并且看起来我读取它的代码执行速度比 iTunes.app 复制内容的速度快. 初始文件包装器数组仅包含包装器内的两个文件之一。

那么我如何“减慢”我的代码呢？

我使用 performSelector:withObject:AfterDelay:1.0f 进行了测试，效果很好，但感觉真的很冒险：如果将一个非常大的文件拖入 iTunes 怎么办（我的意思是一个非常大的文件超过了我的延迟）？如果同时放置多个文件怎么办？

我看着以某种方式辨别文件已准备好读取，但苹果的 NSFileManager 文档说

> “尝试一项操作（例如加载文件或创建目录）、检查错误并优雅地处理这些错误要比尝试提前确定操作是否会成功要好得多。”

但是出现时间问题的地方是在解码组成文件包装器的过程中，所以如何“优雅地”处理它让我望而却步。

我的包文件中有两个数据文件（在这个早期阶段，但设计是因为会有更多）：data.dat 和 info.dat。当我第一次让代码工作到可以将文件拖到 iTunes.app 并在我的视图控制器中注意到它的地步时，data.dat 总是可以正常解码，但找不到 info.dat。一旦文件位于我的本地文档文件夹中，视图控制器就会按预期显示所有数据（即 info.dat 位于文件包装器内并且格式正确）。怀疑这是一个时间问题，我将文件名常量和磁盘文件重命名为 zdata.dat 和 ainfo.dat —— 果然：加载了 ainfo.dat 并且我的 UIDocument 子类抱怨找不到 zdata.dat。

我使用延迟加载，但视图控制器对 info.dat 内容有直接的兴趣，因此延迟加载不足以让 iTunes 完成复制！

从我的 UIDocument 子类实现：

```
- (BOOL)loadFromContents:(id)contents ofType:(NSString *)typeName error:(NSError *__autoreleasing *)outError
{
    self.fileWrapper = (NSFileWrapper *)contents;

    // Lazy load everything!

    _data = nil;
    _metadata = nil;

    return YES;
}

- (id)decodeObjectFromWrapperWithPreferredFilename:(NSString *)preferredFilename
{
    NSFileWrapper *fw = [self.fileWrapper.fileWrappers objectForKey:preferredFilename];
    if (!fw) {
        NSLog(@"Unexpected error: Couldn't find %@ in the file wrapper for %@", preferredFilename, self.fileURL);
        return nil;
    }
    NSData *data = [fw regularFileContents];
    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];

    return [unarchiver decodeObjectForKey:@"data"];
}

- (GSBMetadata *)metadata
{
    if (_metadata == nil) {
        if (self.fileWrapper != nil) {
           // NSLog(@"Loading metadata for %@...",self.fileURL);
            _metadata = [self decodeObjectFromWrapperWithPreferredFilename:kGSBMetadataFileName];
        } else {
            _metadata = [[GSBMetadata alloc] init];
        }
    }
    return _metadata;
} 
```

问题是在 decodeObjectFromWrapperWithPreferredFilename: 中发现的，当进行检查以确保存在预期的文件包装器时。通常情况下，如果文件损坏，或者应用程序的版本 2 使用了不同的文件格式，就会出现这种情况。但是优雅地处理这些情况属于“偏执的编程预期那种事情”的标题，而不是“稍等片刻，您的所有数据都将提供给您”的标题。

# c - 条件的 C 代码和正确语法

> ID：11146021
> 
> 赞同：3
> 
> 时间：2012-06-21T20:13:46.777
> 
> 标签：c, if-statement

我有 C 代码，我在其中声明了一些变量：`char c[8][8]; int pos[2][2];`（k 和 l 是整数）并且我将一些条件设置为：

```
if('a' <= c[pos[k][l]][pos[k][l+1]]<='z'){...}else{...} 
```

其中条件验证字符`c[pos[k][l]][pos[k][l+1]]`是 'a' 和 'z' 之间的某个字母。但我总是收到同样的错误信息

```
line ..: warning: comparisons like 'X<=Y<=Z' do not have their mathematical meaning 
```

这个问题肯定很简单，但是在 if 语句中比较的正确语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:16:25.897

这里的问题是 C 解析

```
a <= b <= c 
```

作为

```
(a <= b) <= c 
```

意思是“检查 a ≤ b。然后，获取该比较的结果（0 或 1）并检查它是否小于`c`。这与检查是否 a ≤ b ≤ c 和编译器错误完全不同试图警告你，你写的和你可能想要的数学表达式不是一回事。

为了解决这个问题，正如其他人所提到的，将条件分成两个检查，然后将它们组合在一起。在一般情况下，这将被重写为

```
if (a <= b && b <= c) {
    ...
} 
```

在你的情况下，你会写

```
if ('a' <= c[pos[k][l]][pos[k][l+1]] && c[pos[k][l]][pos[k][l+1]] <= 'z') {
   ...
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:15:37.707

使用逻辑*AND*运算符`&&`并将条件分成两部分：

```
if('a' <= c[pos[k][l]][pos[k][l+1]] && c[pos[k][l]][pos[k][l+1]] <='z') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:16:19.897

**您需要使用AND**`&&`运算符将其拆分为布尔表达式：

 **```
if (('a' <= c[pos[k][l]][pos[k][l+1]]) &&
    (c[pos[k][l]][pos[k][l+1]] <= 'z')) 
```

更好的是：

```
char ch;

... 

ch = c[pos[k][l]][pos[k][l+1]];
if (('a' <= ch) && (ch <= 'z'))
    ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T20:16:32.067

您需要使用两个比较和布尔逻辑。

就像是：

```
 if('a' <= c[pos[k][l]][pos[k][l+1]] && c[pos[k][l]][pos[k][l+1]] <='z'){...} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T20:18:28.677

您需要使用 AND ( `&&`) 之类的逻辑运算符尝试以下操作：

```
if(('a' <= c[pos[k][l]][pos[k][l+1]])&&(c[pos[k][l]][pos[k][l+1]] <= 'z')) 
```**

# c++ - 过滤 1bpp 图像

> ID：11146029
> 
> 赞同：2
> 
> 时间：2012-06-21T20:14:15.153
> 
> 标签：c++, image-processing, performance

我正在寻找使用 3x3 过滤器过滤每像素 1 位的图像：对于每个输入像素，如果其周围像素的加权和（由过滤器确定的权重）超过某个阈值，则相应的输出像素设置为 1 .

我希望这比转换为 8 bpp 然后过滤它更有效，但我想不出一个好的方法来做到这一点。一种简单的方法是跟踪指向字节的九个指针（三个连续的行以及指向每行中当前字节任一侧的指针，用于计算这些字节中第一个和最后一个位的输出）和每个输入像素计算

`sum = filter[0] * (lastRowPtr & aMask > 0) + filter[1] * (lastRowPtr & bMask > 0) + ... + filter[8] * (nextRowPtr & hMask > 0)`,

对于字节边缘的位有额外的 faff。但是，这很慢，而且看起来真的很难看。您没有从每个字节中有八个像素的事实中获得任何并行性，而是不得不做大量额外的工作来屏蔽事物。

有没有什么好的资源可以最好地做这种事情？这个特定问题的解决方案将是惊人的，但我很高兴有人指出任何在 C/C++ 中对 1bpp 图像进行高效图像处理的示例。我想在将来用 1 bpp 算法替换更多 8 bpp 的东西，以避免图像转换和复制，因此任何关于此的一般资源将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:39:08.430

查看可分离的过滤器。除其他外，它们允许在它们工作的情况下进行大规模并行。

例如，在您的 3x3 样本权重和过滤器案例中：

1.  将1x3（水平）像素采样*到缓冲区*中。这可以针对每个像素单独完成，因此 1024x1024 图像可以同时运行 1024^2 个任务，所有这些任务都执行 3 个样本。
2.  *从缓冲区*中采样 3x1（垂直）像素。同样，这可以同时在每个像素上完成。
3.  使用缓冲区的内容从原始纹理中剔除像素。

从数学上讲，这种方法的优势在于它将样本操作的数量从`n^2`减少到`2n`，尽管它需要与源相同大小的缓冲区（如果您已经在执行复制，则可以将其用作缓冲区；您只是无法修改第 2 步的原始来源）。为了将内存使用保持在`2n`，您可以一起执行步骤 2 和 3（这有点棘手，并不完全令人愉快）；如果内存不是问题，您可以花在`3n`两个缓冲区（source、hblur、vblur）上。

因为每个操作都在与不可变源完全隔离的情况下工作，所以如果您有足够的内核，您可以同时对每个像素执行过滤器。或者，在更现实的场景中，您可以利用分页和缓存来加载和处理单个列或行。这在处理奇数步幅、行尾填充等时很方便。第二轮样本（垂直）可能会破坏您的缓存，但最糟糕的是，一轮将是缓存友好的，并且您已经将处理从指数切割为线性。

现在，我还没有具体谈到以位存储数据的情况。这确实使事情变得稍微复杂了一点，但并不是非常复杂。假设您可以使用滚动窗口，例如：

```
d = s[x-1] + s[x] + s[x+1] 
```

作品。有趣的是，如果您在步骤 1 的输出期间将图像旋转 90 度（微不足道，`(y,x)`读取时的样本），您可以为任何样本加载最多两个水平相邻的字节，并且只加载一个像 75 这样的字节％ 的时间。这在读取过程中对缓存的友好程度稍低，但大大简化了算法（足以让它重新获得损失）。

伪代码：

```
buffer source, dest, vbuf, hbuf;

for_each (y, x)   // Loop over each row, then each column. Generally works better wrt paging
{
    hbuf(x, y) = (source(y, x-1) + source(y, x) + source(y, x+1)) / 3   // swap x and y to spin 90 degrees
}
for_each (y, x)
{
    vbuf(x, 1-y) = (hbuf(y, x-1) + hbuf(y, x) + hbuf(y, x+1)) / 3    // 1-y to reverse the 90 degree spin
}
for_each (y, x)
{
    dest(x, y) = threshold(hbuf(x, y))
} 
```

访问字节内的位（`source(x, y)`表示访问/样本）相对简单，但在这里写出来有点痛苦，所以留给读者。该原理，特别是以这种方式实现的（使用 90 度旋转），`n`每次只需要 2 次采样，并且总是从紧邻的位/字节中采样（不需要您计算下一行中位的位置）。总而言之，它比任何替代方案都更快、更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T20:39:55.473

几年前，我发现将位解包为字节，进行过滤，然后将字节打包回位比直接使用位要快。这似乎违反直觉，因为它是 3 个循环而不是 1 个，但是每个循环的简单性足以弥补它。

我不能保证它仍然是最快的；编译器，尤其是处理器很容易发生变化。然而，简化每个循环不仅使优化更容易，而且更易于阅读。那一定是值得的。

解包到单独缓冲区的另一个优点是它为您在边缘执行的操作提供了灵活性。通过使缓冲区比输入大 2 个字节，您从字节 1 开始解包，然后将字节 0 设置`n`为您喜欢的任何内容，并且过滤循环根本不必担心边界条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:36:07.033

与其将整个图像扩展为 1 位/字节（或 8bpp，本质上，正如您所指出的），您可以简单地扩展当前窗口 - 读取第一行的第一个字节，移位和掩码，然后读出您的三位需要; 对其他两行做同样的事情。然后，对于下一个窗口，您只需丢弃左列并从每一行中再获取一位。做到这一点的逻辑和代码并不像简单地扩展整个图像那么简单，但它会占用更少的内存。

作为中间立场，您可以扩展您当前正在处理的三行。以这种方式编码可能更容易。

# c# - backgroundworker 没有从另一个班级获得进度信息

> ID：11146032
> 
> 赞同：0
> 
> 时间：2012-06-21T20:14:33.900
> 
> 标签：c#, class, user-interface, backgroundworker, exchange-server

我在单击按钮后调用它：

FORM1-代码：

```
{

   ProgressBar.Maximum = 500;    
   myArguments gifargs = new myArguments();    //class for passing arguments to the bgW    
   gifargs.InputFilePath = listBox1.SelectedItem.ToString(); // input filepath    
   gifargs.OutputFilePath = saveFileDialog1.FileName;        //output filepath    
   backgroundWorker1.RunWorkerAsync(gifargs);                // run bgW async with args   
}

// here is bgW doWork
private void backgroundWorker1_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)   
{   
myArguments args = e.Argument as myArguments; //myArguments class
if (backgroundWorker1.CancellationPending)    
{
  e.Cancel = true;
}
PictureHandler makeAnimatedGIf = new PictureHandler(); // creating new object    
makeAnimatedGIf.imageGif(args.InputFilePath,args.OutputFilePath); //call method with args

makeAnimatedGIf.GifProgress += new PictureHandler.myprogressgetter(this.GifProgressF1);

//add the delegate 
```

完美运行，直到这里

这是我的回调函数，应该更新 bgW.ReportProgress

但它永远不会到达那里？！

```
private void GifProgressF1(int i)
{
             System.Threading.Thread.Sleep(500);
            backgroundWorker1.ReportProgress(i);
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
            ProgressBar.Value = e.ProgressPercentage;
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
           ProgressBar.Value = 0;
            if (e.Cancelled)
            {
                MessageBox.Show("Process canceled!");
            }
            else
            {
                MessageBox.Show("Process complete!");
            }

        } 
```

<----Picturehandler.cs-Code----->

//我的 Picturehandler 类中的委托定义

```
public delegate void myprogressgetter(int i);

public myprogressgetter GifProgress;

public void imageGif(string input, string output)
    {
        Process imagemagick = new Process();
        imagemagick.StartInfo.FileName = "convert.exe";
        imagemagick.StartInfo.Arguments = "-monitor -delay 1 " + input + " +map " + output;
        imagemagick.EnableRaisingEvents = false;
        imagemagick.StartInfo.UseShellExecute = false;
        imagemagick.StartInfo.CreateNoWindow = true;
        imagemagick.StartInfo.RedirectStandardOutput = true;
        imagemagick.StartInfo.RedirectStandardError = true;
        imagemagick.Start();
        StreamReader ima = imagemagick.StandardError;
        bool assign2 = false;

        do
        {
            string consolausgabe = ima.ReadLine();
            if (consolausgabe.Contains("Reduce") == true)
            {
                assign2 = true;
            }
            gifprocess(consolausgabe, assign2);

        } while (!ima.EndOfStream);
        imagemagick.WaitForExit();
        imagemagick.Close();
    }

 private void gifprocess(string cline, bool zähl)
    {
        if (cline.Contains("Load"))
        {
            string a1 = cline;
            string[] a11 = a1.Split(new char[] { ':', ',' });
            string a12 = a11[3];
            string[] a13 = a12.Split(new char[] { '%' });
            int load1 = Convert.ToInt32(a13[0]);
            GifProgress(load1;)  //<<<<<------------- this will give me an exception
            // Visual Studio says GifProgress = null in Autos 
```

}

现在，如果我调用`GifProgress(100)`或任何其他整数，我得到异常（对象引用未设置为对象的实例。），进度条永远不会更新。

图片处理程序类的进度信息不会到达 UI，我现在尝试了 2 天。

我使用相同的代码从 form2 获取 textbox.text 并且回调函数工作得很好。工人报告进度 = TRUE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:28:42.417

通常，您的`DoWork`方法中会有一个循环。循环的每次迭代都可以通过调用来结束`ReportProgress`，这将导致 in`ProgressChanged`运行。

由于您只是运行几行代码，因此请使用`RunWorkerCompleted`设置进度指示器并完全忘记`ReportProgress`。

这是我用来更好地理解 BackgroundWorker的[教程，如果它有帮助的话......](http://www.albahari.com/threading/part3.aspx#_BackgroundWorker)

除非你正在做你正在做的事情，因为你的后台工作线程在`makeAnimatedGIf.imageGif`完成它所做的任何事情之前退出......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:28:13.007

确保将 WorkerReportsProgress 设置为 true 并使用 Invoke() 从另一个线程更新进度条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:25:43.963

确保 BackgroundWorker 的 WorkerReportsProgress 属性设置为 true。默认为假

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:30:42.583

您希望调用的函数`GifProgressF1`仅作为“PictureHandler”类实例的回调引用。这个回调的位置和方式完全取决于该类。但是，根据您的描述，尚不清楚此类来自何处或做什么。我建议参考类文档或源代码，以准确找到应该何时调用此回调并从那里开始。

# xml - Debug和Release模式下的序列化不同

> ID：11146040
> 
> 赞同：0
> 
> 时间：2012-06-21T20:15:15.370
> 
> 标签：xml, web-services, msbuild, xml-serialization, xmlserializer

我们的 .NET 4 应用程序使用外部 .NET Web 服务，在调试模式下一切正常，但在发布模式下，我们遇到了序列化错误。检查发送到服务的 SOAP 请求，发现其中一个元素存在一些差异

调试模式下的 SOAP 元素

```
 <Key>pswhistory</Key>
        <Value xsi:type="ArrayOfString">
           <string>a</string>
           <string>B</string>
        </Value> 
```

释放模式下的肥皂元素

```
 <Key>pswhistory</Key>
        <Value xmlns:q1="http://tempuri.org/" xsi:type="q1:ArrayOfString">
           <q1:string>a</q1:string>
           <q1:string>B</q1:string>
        </Value> 
```

有人可以用 XMLSerializer 解释这种行为吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:23:07.263

@Phil - 你猜对了。在发布模式下生成消息时，soap 消息中的命名空间不正确。

问题是因为自动生成的序列化程序集。通过关闭项目属性中的“生成序列化程序集”选项，问题得到解决。当此选项打开时，编译器使用 sgen.exe 为程序集中的所有类型生成序列化程序集，这会增加应用程序的启动时间。由于某种原因，生成的程序集指的是错误的程序集。请参阅下面的墨水以了解更多详细信息

[http://msdn.microsoft.com/en-us/library/bk3w6240(VS.80).aspx](http://msdn.microsoft.com/en-us/library/bk3w6240(VS.80).aspx)

[序列化程序集。是否需要？](https://stackoverflow.com/questions/926919/serialization-assembly-is-it-needed-or-not)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:22:37.033

听起来像是需要显式声明的命名空间。您能否附上您尝试序列化的代码/业务对象的示例？

# html - 从网页中删除注释掉的代码

> ID：11146043
> 
> 赞同：1
> 
> 时间：2012-06-21T20:15:31.417
> 
> 标签：html, comments, ssi

我正在清理 .cfm 文件并删除注释掉的代码。我不确定可以安全删除什么，因为脚本语言不是使用像 SSI 这样的注释掉的代码吗？

例如

```
<!--[if lt IE 8]>
    <style type="text/css" media="all">
        @import "../styles/ie.css";
    </style>
    <script type="text/javascript" src="../scripts/jquery.bgiframe.min.js"></script>
<![endif]--> 
```

我认为这很重要，但我是否需要在这之间保留任何`<!--`内容`-->`：

```
<!-- /#toolbar -->

    <div id="content">

    <div id="sidebar-left" class="sidebar">
        <div class="top"></div>
        <div id="sidebar-left-inner">
            <p id="date"></p>
            <cfinclude template="requires/nowProcessing.cfm">
            <!-- /.now-serving -->

            <div id="sub-nav">
            <!-- InstanceBeginEditable name="leftMenuInclude" --> 
```

不确定是否相关，但该文件包含 JavaScript 和 CSS 以及可能的其他语言。

编辑：出于好奇，这些来自什么语言？

```
<!-- InstanceBeginEditable name="leftMenuInclude" -->
<!-- /#main -->
<!-- /#content --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:31:52.553

由于您没有使用脚本，这很容易......只需删除注释掉的代码！

这并不意味着您应该删除以下之间的所有内容：

```
<!-- --> 
```

有些会是评论，例如：

```
<!-- this is a comment to explain something --> 
```

有些是有条件的评论，例如：

```
<!--[if lt IE 8]> <![endif]--> 
```

使用您对代码的了解来删除适当的注释掉的代码......也就是没有目的的代码！

确保您了解注释和注释掉的代码之间的区别！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:18:46.760

那是有条件的评论。由于这条线，它将针对小于 IE8。所以它是有目的的。

```
<!--[if lt IE 8]> 
```

[http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)

# ruby - 我需要将omniauth 与fb_graph 一起使用吗

> ID：11146047
> 
> 赞同：1
> 
> 时间：2012-06-21T20:15:40.280
> 
> 标签：ruby, ruby-on-rails-3, facebook-graph-api, omniauth, fb-graph

我使用omniauth通过我的rails应用程序对用户进行身份验证，我阅读了很多关于fb_graph gem的信息，我想知道：

*   fb_graph 用简单的英语做什么？
*   如果我想获取所有用户的 Facebook 朋友，我是否只能使用omniauth，或者omniauth 仅
    用于验证用户身份？
*   有些人使用 fb_graph 进行身份验证和获取用户信息数据，最好是使用omniauth 和 fb_graph 还是只使用 fb_graph？

链接到：[fb_graph gem](https://github.com/nov/fb_graph) 链接到：[omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:53:52.590

fb_graph 是 Facebook Graph API 的包装器，它允许你做很多事情，比如创建相册。

Omniauth 就像雅虎和 Facebook 等许多服务提供商之间的通用身份验证接口。您不需要为不同的站点实施不同的身份验证。这意味着 Omniauth 以提供者 API 的用户身份验证部分为中心。

因此，我认为仅使用 Omniauth 无法获取提供商的特定信息（如果我错了，请纠正我）。就算能做到，也不会干净。

因此 fb_graph 是比 Omniauth 更低级别的 API 包装器，因此可以使用它来进行身份验证 + 访问其他信息。但是，如果您使用 fb_graph 进行身份验证，您将需要在其他服务提供商中进行身份验证。

因此，总而言之，如果您想允许用户使用不同的网站（如 Linkedin）进行身份验证，您需要使用 Omniauth。并使用 fb_graph 获取 FB 特定信息。

如果您只想让用户单独使用 Facebook 登录，您可以使用 fb_graph 进行身份验证（您编写身份验证代码）

# .net - 在 ListView 中同步 IsSelected 和 SelectedItem

> ID：11146049
> 
> 赞同：1
> 
> 时间：2012-06-21T20:15:44.993
> 
> 标签：.net, wpf, mvvm

我在 WPF 控件中有一些图像（位置）。`ListView`每个图像都与该控件下方的项目相关联。当用户单击一个位置时，我希望`ListViewItem`在`ListView`. 同样，当用户单击 a 时`ListViewItem`，我希望选择相应的位置。

我可以完成一种行为或另一种行为，但我似乎无法让两者一起工作。

我有一个在选择位置时`Style`将`IsSelected`属性设置为“真”：

```
<Style x:Key="PositionItem" TargetType="ListViewItem">
    <Setter Property="IsSelected" Value="False" />
    <Style.Triggers>
        <DataTrigger Value="True">
            <DataTrigger.Binding>
                <MultiBinding Converter="{StaticResource IsCurrentPositionConverter}">
                    <Binding RelativeSource="{RelativeSource Self}" Path="DataContext" />
                    <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type UserControl}}" Path="DataContext.CurrentBackplane.CurrentCard.CurrentPosition" />
                </MultiBinding>
            </DataTrigger.Binding>
            <Setter Property="IsSelected" Value="True" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

在我的`ListView`中，我设置了一个处理程序`SelectionChanged`：

```
private void Positions_SelectionChanged(object sender, SelectionChangedEventArgs e) {
    var listView = sender as ListView;
    if (listView == null) return;
    var currentPos = listView.SelectedItem as IGraphicPositionViewModel;
    if (currentPos == null) return;
    if (currentPos != _ViewModel.CurrentBackplane.CurrentCard.CurrentPosition)
        _ViewModel.CurrentBackplane.CurrentCard.CurrentPosition = currentPos;
} 
```

**问题是**的`IsSelected`属性`ListViewItem`似乎与 的`SelectedItem`属性没有很好的相关性`ListView`。

我可以使用其他属性或事件来同步这些属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:27:06.900

您需要定义具有属性的视图模型`SelectedPosition`和`SelectedListItem`. 然后，在这些属性之一的事件处理程序中，您应该更改另一个属性：

```
 private Position _selectedPosition;
    public Position SelectedPosition
    {
        get
        {
            return _selectedPosition;
        }
        set
        {
            if (_selectedPosition != value)
            {
                _selectedPosition = value;
                RaisePropertyChanged("SelectedPosition");
                _OnSelectedPositionChanged();
            }
        }
     }

     private void _OnSelectedPositionChanged()
     {
         _selectedListItem = ... ; // find corresponding item in the list
         RaisePropertyChanged("SelectedListItem"); // update selection of the ListView
     } 
```

并且应该在`SelectedListItem`事件处理程序中使用类似的代码。

# r - 数据在openCPU中的作用

> ID：11146050
> 
> 赞同：3
> 
> 时间：2012-06-21T20:15:55.517
> 
> 标签：r, opencpu

我很清楚这样一个事实，这可能不是典型的 SO 问题，但由于这是我所知道的最强大的 R 编程社区，并且 opencpu 的作者[明确鼓励在这里发帖](http://public.opencpu.org/pages/faq.html)，我会试一试：

数据在方法中扮演什么角色`opencpu`？我的意思是云计算很好，但你需要一些数据来计算。上传一些示例 .csv 或 .xls 表可能很简单，但是 opencpu 对现实世界的数据有什么想法？

几百 MB（甚至 GB）的数据呢？您将如何 a) 将其传输到您的用户文件夹？您将如何 b) 在一组经过身份验证的用户之间共享它并 c) 对公众隐藏它？

我阅读了[许可证](http://public.opencpu.org/pages/license.html)部分，根据我对安全的理解，只要源代码是公开的，就应该可以在幕后运行计算。但是，这份小文件仍然留下了悬而未决的问题和很多猜测。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:15:24.080

感谢您试用 OpenCPU。OpenCPU 目前仍是一个不断发展的项目，因此我们对有趣的建议或用例持开放态度。

关于数据……您一次要问很多事情。一些想法：

*   在这一点上，OpenCPU 并没有解决“大数据”问题。它的规模不会超出 R 本身的规模。它主要是作为中小型数据的基础设施；例如典型的研究论文、项目等。
*   OpenCPU 是一个 API。它不限于浏览器客户端。它也被设计为从其他客户端调用。
*   OpenCPU 有一个存储区，用于在服务器上存储 R 对象。例如，您上传 CSV 或其他任何内容，然后存储实际的数据帧。然后，在任何后续调用中，您可以将此对象作为函数调用的参数包含在内。
*   另一种方法是将其与外部数据库（例如 mysql）结合起来，并在您的 R 代码中动态提取数据（例如使用 RMySQL）
*   Afaik，在这一点上，开放数据的法律方面并不完全清楚。我认为对于版权如何适用于数据以及什么是好的许可没有达成共识。然而，OpenCPU 设计中的一个关键特性是确保事物易于重现。当然，这只能在数据实际公开时才能完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-02T09:35:58.597

马特，

我正在处理一个真实的用例，该用例涉及转换和处理来自 3GB（但不断增长的）数据集的数据。这是我正在使用的方法（主要基于[Gergely Daróczi](https://disqus.com/home/user/twitter-718673564)的建议）：

*   只要源数据可以放入服务器内存，我会选择使用我的 R 包加载数据并在用户会话中保留该数据（例如使用 OpenCPU 预加载数据包）
*   如果这不是您的服务器上的选项，另一种方法是将您的数据复制到 Ramdisk（Linux tmpfs 系统）到`.rds`（或`.rda`，`.rData`等）文件中，并`getOption("path_to_my_persistent_data_files")`在您的 R 包中使用这些路径，然后加载/卸载这些文件（S）根据您的包功能的需要
*   当您的数据不再适合内存时，我会考虑将 MongoDB 后端与 R 接口[rmongodb](http://cran.r-project.org/web/packages/rmongodb/index.html)一起使用，因为这可能比 RDBMS 更快、更容易维护。

目前 OpenCPU 不为大型持久数据集提供任何支持，您可以自行寻找最适合您的需求和资源的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T23:27:55.853

您可以安装 opencpu 的本地实例。您不必使用 Internet 上现有的。网站上有说明。

# directx - 将项目转换为 Visual Studio 2012 WinRT，无法设置 directx 库

> ID：11146052
> 
> 赞同：0
> 
> 时间：2012-06-21T20:16:01.363
> 
> 标签：directx, visual-studio-2012

我在 Visual Studio 2012 中将 DirectX 项目转换为 WinRT 项目，并且无法设置对 Direct X 库的引用。我正在使用生成的 Direct3D 解决方案作为指南。我在项目设置中添加了我认为正确的包含文件夹和库，但我必须遗漏其他内容。在生成的 Direct3D 解决方案中，解决方案资源管理器中的“外部依赖项”树中有一大堆 directx 标头，但我不知道它是如何设置的。简单地拖放 DirectX 标头是行不通的，这并没有让我感到惊讶。

我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:29:17.193

重新审视这个问题，我注意到生成的 DirectX 示例使用了预编译的头文件，而我正在使用的项目却没有。预编译的头文件包括我的项目没有的 DirectX 头文件。

所以我加了

```
#include <DirectXmath.h>
#include <d3d11_1.h> 
```

并编译。

# facebook-likebox - 获取指定页面的点赞框时出错

> ID：11146055
> 
> 赞同：2
> 
> 时间：2012-06-21T20:16:17.723
> 
> 标签：facebook-likebox

过去我已经成功安装了一些类似的盒子，它们现在仍在运行。最近我试图用相同的代码为另一个网站添加类似框，但我无法让我工作。

在 facebook 的like box 生成器页面上会出现以下警告：

> “获取指定页面的点赞框时出错。”

我对 facebook 不是很熟悉，但我很惊讶它有时会起作用，有时我会收到这个警告。

# c# - .Net Regex 与其他工具不匹配

> ID：11146060
> 
> 赞同：0
> 
> 时间：2012-06-21T20:16:51.090
> 
> 标签：c#, regex, match

我正在尝试匹配以*./media开头的字符串*

我有以下正则表达式：

```
bool match = Regex.IsMatch(@"^\./media", imgSourcePath); 
```

我的源字符串看起来像： ./media/ *somefile.png*

[当我在其他工具](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)中测试此表达式时，它按预期工作。但是，在 C# 源代码实现中永远找不到匹配项。有人能告诉我为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:24:18.170

您的参数似乎是向后的：`Regex.IsMatch(String input, String pattern)`. 试试这个：

```
var m = Regex.IsMatch("./media", "(./media)(.*?)", RegexOptions.IgnoreCase | 
    RegexOptions.Singleline);
MessageBox.Show(m.ToString());  //displays true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:30:18.957

[http://msdn.microsoft.com/en-us/library/sdx2bds0.aspx#Y30](http://msdn.microsoft.com/en-us/library/sdx2bds0.aspx#Y30)

你有输入和模式倒退。您要搜索匹配的字符串应该是第一个参数，而要使用的模式应该是第二个参数。

# php - .htaccess 简短而友好的网址

> ID：11146062
> 
> 赞同：2
> 
> 时间：2012-06-21T20:17:03.180
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在寻找正确的`.htaccess`规则来制作 Facebook.com/user URL，例如

例如，如果我访问我想要什么

```
www.domain.com/StackOverFlow 
```

它将被重写为

```
www.domain.com/index.php?category=StackOverFlow 
```

或者

```
www.domain.com/category.php?item=StackOverFlow 
```

有什么帮助吗？我在这里尝试了一些问题，但他们没有明确地这样做。

提前致谢

编辑：

忘了说我只想使用此规则进行重定向，域之后的任何内容都没有任何扩展名

例如它应该重定向`www.domain.com/categoryDescription`但没有`www.domain.com/categoryDescription.php`或`www.domain.com/categoryDescription.html`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:22:18.870

下面的示例采用 URI`.com/`并将其分配给`$1`. 你可以对“项目”做同样的事情

```
RewriteEngine On
RewriteRule ^([^/]*)$ /index.php?category=$1 [L] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T20:24:41.567

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  # Rewrite URLs of the form 'x' to the form 'index.php?category=x'.
  RewriteRule ^(.*)$ index.php?category=$1 [L,QSA]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T20:19:47.823

尝试：

```
RewriteRule ^StackOverFlow$ index.php?category=StackOverFlow [NC,L] 
```

或者：

```
 RewriteRule ^StackOverFlow$ category.php?item=StackOverFlow [NC,L] 
```

大体上：

```
RewriteRule ^([^/]*)$ index.php?category=$1 [NC,L] 
```

或者：

```
 RewriteRule ^([^/]*)$ category.php?item=$1 [NC,L] 
```

# excel - 如何在excel中对角选择一个范围？

> ID：11146067
> 
> 赞同：1
> 
> 时间：2012-06-21T20:17:19.907
> 
> 标签：excel, sap, dashboard, xcelsius

嗨，我有一个简单的问题，如何在 excel 中选择对角线范围，假设我需要选择（a3 和 b1）或（a3 和 b2）或只是 a1 和 b2 我需要这个范围用于 Sap 仪表板设计（xcelsius）和按住控制键不是一个选项！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:40:01.323

您不能选择对角线范围。在您的情况下，我认为最好的选择是获取您想要的范围并使用公式复制到列中。

例如，如果要选择 a1、b2 和 c3。在单元格 d1 中输入 =if(a1="";"";a1)，在单元格 d2 =if(b2="";"";b2) 和单元格 d3 中 =if(c3="";"";c3 ）。然后选择 d1 到 d3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T10:16:59.930

我制作了一个用户表单来选择任意方向的任意数量的单元格。我不知道这个有什么用。

```
Option Explicit
'Run this to open Userform named "Select_Diago"
Sub open_form()
Select_Diago.Show
End Sub 
```

这个东西会弹出来

[![在此处输入图像描述](../Images/a0558e583fe7b3ab163e08f3114f0753.png)](https://i.stack.imgur.com/bExOY.jpg)

输入要选择的单元格数量和需要选择的方向（默认设置为右下）

```
Private Sub Submit_Click()
Dim Direction As String
Select_Diago.Hide
Direction = "SE"
If NE.Value = True Then Direction = "NE"
If SE.Value = True Then Direction = "SE"
If SW.Value = True Then Direction = "SW"
If NW.Value = True Then Direction = "NW"
Call Select_Diagonal(Direction, TextBox1.Value - 1)
End Sub

Sub Select_Diagonal(Direction As String, Num As Integer)
Dim Diagonal As Range, i As Integer
Dim StrEx As String
'Num = InputBox("How Many cells would you like to select diagonally?")
Select Case Direction
Case "SW"
'For SW
For i = 0 To Num
    On Error Resume Next
    StrEx = StrEx + (Split(Cells(, ActiveCell.Column - i).Address, "$")(1)) + CStr((ActiveCell.Row + i)) + ","
Next i
Case "SE"
'For SE
For i = 0 To Num
    On Error Resume Next
    StrEx = StrEx + (Split(Cells(, ActiveCell.Column + i).Address, "$")(1)) + CStr((ActiveCell.Row + i)) + ","
Next i
Case "NE"
'For NE
For i = 0 To Num
    On Error Resume Next
    StrEx = StrEx + (Split(Cells(, ActiveCell.Column + i).Address, "$")(1)) + CStr((ActiveCell.Row - i)) + ","
Next i
Case "NW"
'For NW
For i = 0 To Num
    On Error Resume Next
    StrEx = StrEx + (Split(Cells(, ActiveCell.Column - i).Address, "$")(1)) + CStr((ActiveCell.Row - i)) + ","
Next i
End Select
StrEx = Left(StrEx, Len(StrEx) - 1)
ActiveSheet.Range(StrEx).Select
End Sub 
```

**结果1：** [![在此处输入图像描述](../Images/fe5b0d2735f0c08f42d360b51b7766c2.png)](https://i.stack.imgur.com/3diGo.jpg)

**结果 2：** [![在此处输入图像描述](../Images/c2eea5f31d12feab3a5b7acd3b399843.png)](https://i.stack.imgur.com/N84Ry.jpg)

# javascript - 无法从 IE 8-9 中的 JS 更改字体大小

> ID：11146069
> 
> 赞同：0
> 
> 时间：2012-06-21T20:17:33.547
> 
> 标签：javascript, html, css, internet-explorer-9

我正在使用 ContentFlow JS 库，但在 IE 中遇到问题（8 和 9，我不打算支持的旧版本）。ContentFlow 的脚本无法调整轮播中的字体大小。在 Chrome、FireFox、Safari、Safari (iOS) 中一切正常。

任何人都可以在 IE 中提出这种行为的原因吗？

**铬：**
![](../Images/3cf454316d8038ab1c11645c2aa72d2d.png)
**Internet Explorer：**
![](../Images/cc8a2cb9c98716ed547c1b92ffc4a103.png)

根据要求的一些代码：

轮播元素代码：

```
<div class="item" id="backstage1">
    <div class="content">
        <div class="video-title">Конференции</div>
        <div class="video-event">
            <strong>Microsoft TechEd</strong>
        </div>
        <img id="banner1" class="ibanner bordered" src="img/video/c1.jpg" alt="" title="" />
        <img class="shadow" src="img/flow-item-shadow.png" alt="" title="" />
    </div>
    <div class="caption">Some description text</div>
</div> 
```

元素的 CSS：

```
.video-title {
    font-family: "FSAlbertPro", "Arial", serif;
    font-size: 3.4em;
    font-weight: bold;
    color: white;
    text-transform: uppercase;
    text-align: center;
    line-height: 0.9em;
    margin-top: 17px;
    margin-left: -6px;
    margin-bottom: -8px;
    position: relative;
}

.video-event {
    position: relative;
    top: 28px;
    left: 15px;
    font-family: "FSAlbertPro", "Arial", serif;
    font-size: 1.3em;
    font-weight: 100;
    color: #4d4d4d;
    line-height: 100%;
} 
```

其他“魔法”由 ContentFlow 完成。

ps试图制作一个jsFiddle来重新创建问题......将更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:52:30.137

您的字体大小以 em 为单位。我认为，IE 默认使用比 firefox 或 chrome 更大的字体。尝试在正文中指定以 px 为单位的字体大小，并注意标题！

# c# - 如何在 C# 中为 PPTX 文件生成缩略图？

> ID：11146072
> 
> 赞同：1
> 
> 时间：2012-06-21T20:17:39.127
> 
> 标签：c#, powerpoint, openxml-sdk

有没有办法使用 OpenXML 库自动为 PPTX 文件创建缩略图？我正在构建一个小型 C# ASP.NET Web 应用程序，用于从 PPTX 文件库构建 PPTX 文件。要求之一是为库中的每个 PPTX 文件显示缩略图。我想将其自动化，因为将使用该系统的人不知道如何创建屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:46:48.990

pptx文件已经有了，解压文件可以找到id。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:43:59.483

有一个商业图书馆可以在演示文稿中生成幻灯片的缩略图。所以至少你知道这是可能的：[http ://www.aspose.com/docs/display/slidesnet/Creating+Slides+Thumbnail+Image](http://www.aspose.com/docs/display/slidesnet/Creating+Slides+Thumbnail+Image)

# java - 保持oracle连接活跃，访问oracle

> ID：11146079
> 
> 赞同：1
> 
> 时间：2012-06-21T20:18:17.243
> 
> 标签：java, oracle, jsp

我有一个在登录页面上连接到 oracle 的 JSP 应用程序。如何保持此连接处于活动状态并在另一个页面上执行查询？

```
DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
Connection con = DriverManager.getConnection("jdbc:oracle:thin:@" + HOST + ":1521:fcprod", request.getParameter("username"), request.getParameter("password")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:56:30.333

我使用执行连接池的[c3p0](http://www.mchange.com/projects/c3p0/)保持连接处于活动状态。它具有在不使用时保持连接活动的命令。我在 grails 应用程序（类似于 jsp）和基于休眠的应用程序中使用它。

上面的评论是正确的，但是您需要将连接信息从页面移到控制器（不是一个好主意）或服务（可能是最好的主意）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:29:54.653

这绝对不是要走的路。尝试实施另一种解决方案，因为在我看来，您正在尝试自己动手。

如果您正在使用支持池连接的应用程序服务器，请尝试使用它。如果没有，请尝试在单独的请求中打开和关闭连接。如果您想在打开的会话期间保持与数据库的打开连接，随着会话数量的增加，这将迅速清除您的所有资源。尝试在应用程序的生命周期内保持单个连接打开会更糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:11:05.320

出现这种情况并不是一个好习惯。但是您可以使用 session.setAttribute("con", con); 将此 con 对象存储到会话范围中。在您需要的任何页面上，使用 Connection con = (Connection)session.getAttribute("con");

# header - 如何添加 Blogger 标题图片

> ID：11146081
> 
> 赞同：1
> 
> 时间：2012-06-21T20:18:31.567
> 
> 标签：header, blogger

我是 Blogger 的新手，在编程和网页设计方面的技能最低。我想知道或问我如何在我的博客标题中添加图像，变成我主页的链接？

非常感谢你，祝你有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:33:00.460

基本上，您必须使用 html 编辑在 header-wrapper 中添加图像和 url，如果您不喜欢网页设计，请参阅此[线程](http://fundapass.blogspot.in/2012/10/how-to-add-image-to-blogger-header.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:29:14.793

要将图像添加到 Blogger 标题，请执行以下步骤：

*   转到博客`design`标签
*   选择`Header`博客小部件顶部的链接
*   在那里你可以找到一个链接来浏览并将图像附加到带有图像的标题中。

你可以在这里找到一些选项来放置一些文本和图像或仅图像等

# php - 在 Javascript/Smarty 中访问 PHP stdClass 对象

> ID：11146085
> 
> 赞同：0
> 
> 时间：2012-06-21T20:18:58.157
> 
> 标签：php, javascript, smarty, stdclass

我有一个在 PHP 代码中初始化的 stclass 对象。对象返回

```
object(stdClass)[238]
  public '0' => string 'Jun 20, 2012 03:02 PM' (length=21)
  public '1' => string 'Jun 20, 2012 03:26 PM' (length=21)
  public '2' => string 'Jun 21, 2012 01:12 PM' (length=21) 
```

在做 var_dum($myObjectName)

我将它传递给 smarty 模板，我需要根据 javascript 变量访问索引 [i] 处的 stdClass 对象的值。

我已经尝试了其中的几个：

```
{/literal} {$myObjectName}{literal} 
{/literal} {$myObjectName.0}{literal} 
{/literal} {$myObjectName.'0'}{literal} 
{/literal} {$myObjectName.'myLocalJSVariable'}{literal} 
```

但我不能在特定索引处获取对象的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:21:48.623

你试过了`{$myObjectName->0}`吗？

如果您想像使用数组一样使用它，则必须将对象的*数组版本*传递给 Smarty：

```
$smarty->assign('myObjectName', get_object_vars($obj)); 
```

该[**`get_object_vars()`**](http://php.net/manual/en/function.get-object-vars.php)方法返回一个对象的所有属性的命名数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:31:56.703

我可以建议您使用[json_encode()](http://php.net/json_encode)将您的数据转储到 json，将其保存到 javascript 可访问的内容中，然后从 javascript 访问您的数据吗？

`{$myObjectName->javaScriptVariable}`*听起来就像您试图访问服务器上的某些客户端数据或客户端上的某些服务器数据 - 除非您提供*数据，否则这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:34:07.747

为什么不将对象的引用传递给 smarty？

```
$smarty->assign('myObjectName', &$obj); 
```

然后在 smarty 中你可以使用 {$myObjectName->whatever} 语法...

# javascript - ajax即跨浏览器activexobject问题

> ID：11146087
> 
> 赞同：2
> 
> 时间：2012-06-21T20:19:15.880
> 
> 标签：javascript, ajax, internet-explorer, cross-browser

我是 AJAX 的初学者。我有一个在互联网上找不到的问题，所以我来到这里:)。我的第一个问题与下面的代码块有关。

```
function createXHR() {
  var iexhr...;

  iexhr = ["MSXML2.XMLHttp.7.0", "MSXML2.XMLHttp.6.0", "MSXML2.XMLHttp.5.0", "MSXML2.XMLHttp.4.0", "MSXML2.XMLHttp.3.0", "MSXML2.XMLHttp", "MSXML3.XMLHttp", "Microsoft.XMLHttp"];
} 
```

我对上面代码的问题是：在我的谷歌搜索和研究过程中，我收集了使用不同版本 xmlhttprequest 的代码示例。我想创建一个跨浏览器 xhr，并且想知道是否所有这些版本都很重要，还是应该只使用一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:28:19.563

我不认为你想要这些。

您确实需要担心两个版本的 XHR：`window.ActiveXObject( "Microsoft.XMLHTTP")`oldIE 和`window.XMLHttpRequest()`其他所有人。

您将看到的通常模式类似于：

```
if(window.XMLHttpRequest){
    return new window.XMLHttpRequest();
} 
else {
    return new window.ActiveXObject( "Microsoft.XMLHTTP" );
} 
```

或者类似的东西，取决于你想要做什么。

然而，XHR 不仅仅是返回对象，例如监控状态和错误，所以这正是人们使用库来做这类事情的原因。不要重新发明轮子。

# google-apps-script - 接收应用程序脚本通知大约每分钟 1 个

> ID：11146089
> 
> 赞同：0
> 
> 时间：2012-06-21T20:19:22.533
> 
> 标签：google-apps-script

我每分钟大约收到 1 封应用脚本通知电子邮件。我认为我没有运行任何脚本。我如何让它停止？

您的脚本未保存的脚本最近未能成功完成。故障摘要如下所示。要为此脚本配置触发器，或更改您的设置以接收未来的失败通知，请单击此处。

详细信息： Start Function Error Message Trigger End 6/21/12 1:15 PM myFunction 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 6/21/12 下午 1:15

真挚地，

Google Apps 脚本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:27:15.387

您应该检查是否有一些正在运行的触发器...

检查：打开或创建电子表格转到>工具>脚本编辑器>编辑>所有触发器，看看是否每分钟都在触发。

和...删除它`x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T03:30:44.563

我发现我创建了一个脚本并忘记了它。不断收到很多通知。就我而言，它是 Google Drive 中的一个脚本。试试这个：打开 Google Drive 在搜索栏中输入：'app:"Google Apps Script"' 这应该列出所有应用程序。找到与通知同名的通知并编辑/禁用。

请注意，您可能还有一个脚本绑定到一个可以内置触发器的 google 文档又名插件 ( [https://developers.google.com/apps-script/guides/bound )。](https://developers.google.com/apps-script/guides/bound)

我必须找到所有电子表格并在工具（如上）下查找罪魁祸首。我找不到用脚本搜索工作表的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-12T04:04:13.093

转到 google.com，然后单击屏幕右上角的帐户图片。接下来，单击帐户，然后单击安全，然后单击查看权限。单击要撤消其授权的脚本旁边的撤消访问权限。

# mercurial - Mercurial：如何识别部分重叠的历史（细粒度）？

> ID：11146096
> 
> 赞同：0
> 
> 时间：2012-06-21T20:19:53.133
> 
> 标签：mercurial, dvcs

Mercurial（或任何其他 DVCS）如何识别部分重叠的历史？例如细粒/粗粒。

Mercurial 中是否有任何方法可以有效地合并两个历史记录相似但不相同的存储库？

例如，其中一个代表具有粗粒度修订 0、1、2，而另一个代表具有细粒度修订 0、0.1、0.2、1、1.1、1.2、2，并得出一个单一的历史记录？

当我尝试使用我所知道的 Mercurial 时，我得到的不是一堆乱七八糟的树枝和头？

或者更高级的
Repo 1: 0, 1, 1.1, 1.2, 2
Repo 2: 0, 0.1, 0.2, 1, 2, 3
Merge: 0, 0.1, 0.2, 1, 1.1, 1.2 2, 3

### 更详细

我想要的是一个可以识别文件内容何时相同的合并，或者可以识别两行历史记录是相似的，尽管并非一行中的所有版本都在另一行中，并给出如下内容：

```
o=o changesets with same file contents on different historical lines
o |  (line1) 
| |  changeset:   2:2a02e67e7b5d
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| o  (line2)
| |  changeset:   8:089179dde80a
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| |
| o  changeset:   7:615416921e33
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.2
| |
| o  changeset:   6:a43a88065141
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.1
| |
| |
o=o changesets with same file contents on different historical lines
o |  (line1) 
| |  changeset:   1:93cbae111269
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:13 2012 -0700
| |  summary:     1
| o  (line2) 
| |  changeset:   5:fef4050e0162
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     1
| |
| o  changeset:   4:b51fbedc72e5
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     0.2
| |
| o  changeset:   3:45b7f64b2a23
| |  parent:      0:c80bc10826be
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     0.1
| |
| |
|/
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0 
```

我可以想象在 o=o 点可能需要合并变更集。

但我想让它自动识别。

以下是如何创建此类历史的示例。在这个例子中是人为的，但在现实生活中，当一个项目需要粗粒度提交，但我想保留细粒度 ciommits（以及发布到项目的粗粒度内容）时，我正在发生类似的事情。

```
[glew@mipscs587 ~/hack/hg-granularity] 900$ bash 12:39:54>. ./eg

% set verbose

% mkdir hg-repo
% cd hg-repo
% ./hg-repo
% hg init
% echo 0 > a
% hg add a
% hg ci -m0 a

% cd ..
% hg clone hg-repo fine
updating to branch default
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
% hg clone hg-repo coarse
updating to branch default
1 files updated, 0 files merged, 0 files removed, 0 files unresolved

% cd fine
./fine
% echo 0.1 > a; hg ci -m0.1
% echo 0.2 > a; hg ci -m0.2
% echo 1 > a; hg ci -m1
% cat a
1
% hg push default
pushing to /home/glew/hack/hg-granularity/hg-repo
searching for changes
adding changesets
adding manifests
adding file changes
added 3 changesets with 3 changes to 1 files
% hg glog
@  changeset:   3:fef4050e0162
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     1
|
o  changeset:   2:b51fbedc72e5
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     0.2
|
o  changeset:   1:45b7f64b2a23
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     0.1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0

% cd ../coarse
% cp ../fine/a .
% cat a
1
% hg ci -m1
% hg glog
@  changeset:   1:93cbae111269
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:13 2012 -0700
|  summary:     1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0

% cd ../fine
% echo 1.1 > a; hg ci -m1.1
% echo 1.2 > a; hg ci -m1.2
% echo 2 > a; hg ci -m2
% cat a
2
% hg push default
pushing to /home/glew/hack/hg-granularity/hg-repo
searching for changes
adding changesets
adding manifests
adding file changes
added 3 changesets with 3 changes to 1 files
% hg glog
@  changeset:   6:089179dde80a
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:15 2012 -0700
|  summary:     2
|
o  changeset:   5:615416921e33
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:14 2012 -0700
|  summary:     1.2
|
o  changeset:   4:a43a88065141
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:14 2012 -0700
|  summary:     1.1
|
o  changeset:   3:fef4050e0162
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     1
|
o  changeset:   2:b51fbedc72e5
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     0.2
|
o  changeset:   1:45b7f64b2a23
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     0.1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0

% cd ../coarse
% cp ../fine/a .
% cat a
2
% hg ci -m2
% hg glog
@  changeset:   2:2a02e67e7b5d
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:15 2012 -0700
|  summary:     2
|
o  changeset:   1:93cbae111269
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:13 2012 -0700
|  summary:     1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0 
```

好的，所以现在我在精细回购中有细粒度历史，在粗回购中有粗粒度历史。我想合并它们。（Firget 粗是细的一个子集：我可以很容易地设计出它们不是的例子）。

简单地推送粗粒度历史会发出警告。稍后我将对其进行操作，但首先我将尝试合并到一个单独的克隆中。

```
% hg push default
pushing to /home/glew/hack/hg-granularity/hg-repo
searching for changes
abort: push creates new remote head 2a02e67e7b5d!
(you should pull and merge or use push -f to force)

% cd ..

% hg clone coarse merge-fine-and-coarse
updating to branch default
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
% cd merge-fine-and-coarse/
./merge-fine-and-coarse/

% hg glog
@  changeset:   2:2a02e67e7b5d
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:15 2012 -0700
|  summary:     2
|
o  changeset:   1:93cbae111269
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:13 2012 -0700
|  summary:     1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0

% hg pull ../hg-repo
pulling from ../hg-repo
searching for changes
adding changesets
adding manifests
adding file changes
added 6 changesets with 6 changes to 1 files (+1 heads)
(run 'hg heads' to see heads, 'hg merge' to merge)

% hg heads
changeset:   8:089179dde80a
tag:         tip
user:        Andy Glew <glew@mips.com>
date:        Thu Jun 21 12:40:15 2012 -0700
summary:     2

changeset:   2:2a02e67e7b5d
user:        Andy Glew <glew@mips.com>
date:        Thu Jun 21 12:40:15 2012 -0700
summary:     2 
```

这里是合并。

请注意，变更集的对：8:089179dde80a | @ 变更集：2:2a02e67e7b5d 和 o 变更集：5:fef4050e0162 | o 变更集：1:93cbae111269 具有相同的文件内容，一个来自 coartse，另一个来自 Fine repo。但 Mercurial 历史图表并未反映这一点。

```
% hg glog
o  changeset:   8:089179dde80a
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:15 2012 -0700
|  summary:     2
|
o  changeset:   7:615416921e33
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:14 2012 -0700
|  summary:     1.2
|
o  changeset:   6:a43a88065141
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:14 2012 -0700
|  summary:     1.1
|
o  changeset:   5:fef4050e0162
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     1
|
o  changeset:   4:b51fbedc72e5
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     0.2
|
o  changeset:   3:45b7f64b2a23
|  parent:      0:c80bc10826be
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:12 2012 -0700
|  summary:     0.1
|
| @  changeset:   2:2a02e67e7b5d
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| |
| o  changeset:   1:93cbae111269
|/   user:        Andy Glew <glew@mips.com>
|    date:        Thu Jun 21 12:40:13 2012 -0700
|    summary:     1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0

% hg diff -r 2a02e67e7b5d -r 089179dde80a 
```

所以我会尝试合并

```
% hg merge -r 8
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit)

% hg ci -m'merge of fine and coarse at 2' 
```

更好 - 这表明 o 变更集：8:089179dde80a | @ changeset: 2:2a02e67e7b5d 是一个收敛点，尽管需要额外的虚拟更改。

但它没有显示 o 变更集之间的共性： 5:fef4050e0162 | o 变更集：1:93cbae111269

这是合并图

```
% hg glog
@    changeset:   9:328db8187d31
|\   tag:         tip
| |  parent:      2:2a02e67e7b5d
| |  parent:      8:089179dde80a
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:43:51 2012 -0700
| |  summary:     merge of fine and coarse at 2
| |
| o  changeset:   8:089179dde80a
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| |
| o  changeset:   7:615416921e33
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.2
| |
| o  changeset:   6:a43a88065141
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.1
| |
| o  changeset:   5:fef4050e0162
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     1
| |
| o  changeset:   4:b51fbedc72e5
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     0.2
| |
| o  changeset:   3:45b7f64b2a23
| |  parent:      0:c80bc10826be
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     0.1
| |
o |  changeset:   2:2a02e67e7b5d
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| |
o |  changeset:   1:93cbae111269
|/   user:        Andy Glew <glew@mips.com>
|    date:        Thu Jun 21 12:40:13 2012 -0700
|    summary:     1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0 
```

再来一次合并怎么样？

```
% hg update -r 1
1 files updated, 0 files merged, 0 files removed, 0 files unresolved

% hg merge -r 5
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit)

% hg ci -m'merge of fine and coarse at 1'
created new head

% hg glog
@    changeset:   10:cca7fec90d3f
|\   tag:         tip
| |  parent:      1:93cbae111269
| |  parent:      5:fef4050e0162
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:45:03 2012 -0700
| |  summary:     merge of fine and coarse at 1
| |
| | o    changeset:   9:328db8187d31
| | |\   parent:      2:2a02e67e7b5d
| | | |  parent:      8:089179dde80a
| | | |  user:        Andy Glew <glew@mips.com>
| | | |  date:        Thu Jun 21 12:43:51 2012 -0700
| | | |  summary:     merge of fine and coarse at 2
| | | |
| | | o  changeset:   8:089179dde80a
| | | |  user:        Andy Glew <glew@mips.com>
| | | |  date:        Thu Jun 21 12:40:15 2012 -0700
| | | |  summary:     2
| | | |
| | | o  changeset:   7:615416921e33
| | | |  user:        Andy Glew <glew@mips.com>
| | | |  date:        Thu Jun 21 12:40:14 2012 -0700
| | | |  summary:     1.2
| | | |
| +---o  changeset:   6:a43a88065141
| | |    user:        Andy Glew <glew@mips.com>
| | |    date:        Thu Jun 21 12:40:14 2012 -0700
| | |    summary:     1.1
| | |
| o |  changeset:   5:fef4050e0162
| | |  user:        Andy Glew <glew@mips.com>
| | |  date:        Thu Jun 21 12:40:12 2012 -0700
| | |  summary:     1
| | |
| o |  changeset:   4:b51fbedc72e5
| | |  user:        Andy Glew <glew@mips.com>
| | |  date:        Thu Jun 21 12:40:12 2012 -0700
| | |  summary:     0.2
| | |
| o |  changeset:   3:45b7f64b2a23
| | |  parent:      0:c80bc10826be
| | |  user:        Andy Glew <glew@mips.com>
| | |  date:        Thu Jun 21 12:40:12 2012 -0700
| | |  summary:     0.1
| | |
+---o  changeset:   2:2a02e67e7b5d
| |    user:        Andy Glew <glew@mips.com>
| |    date:        Thu Jun 21 12:40:15 2012 -0700
| |    summary:     2
| |
o |  changeset:   1:93cbae111269
|/   user:        Andy Glew <glew@mips.com>
|    date:        Thu Jun 21 12:40:13 2012 -0700
|    summary:     1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0 
```

这个不对。它已经建立了一个新的头部，而我们想要的是某种方式来指示 o 变更集：5:fef4050e0162 | o 变更集：1:93cbae111269 相同。

OK，切换回原来的粗略

```
% cd ../coarse

% hg push default
pushing to /home/glew/hack/hg-granularity/hg-repo
searching for changes
abort: push creates new remote head 2a02e67e7b5d!
(you should pull and merge or use push -f to force)

% hg push -f default
pushing to /home/glew/hack/hg-granularity/hg-repo
searching for changes
adding changesets
adding manifests
adding file changes
added 2 changesets with 2 changes to 1 files (+1 heads)

% hg glog
@  changeset:   2:2a02e67e7b5d
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:15 2012 -0700
|  summary:     2
|
o  changeset:   1:93cbae111269
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:13 2012 -0700
|  summary:     1
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0

% cd ../hg-repo/

% hg glog
o  changeset:   8:2a02e67e7b5d
|  tag:         tip
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:15 2012 -0700
|  summary:     2
|
o  changeset:   7:93cbae111269
|  parent:      0:c80bc10826be
|  user:        Andy Glew <glew@mips.com>
|  date:        Thu Jun 21 12:40:13 2012 -0700
|  summary:     1
|
| o  changeset:   6:089179dde80a
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| |
| o  changeset:   5:615416921e33
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.2
| |
| o  changeset:   4:a43a88065141
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.1
| |
| o  changeset:   3:fef4050e0162
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     1
| |
| o  changeset:   2:b51fbedc72e5
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     0.2
| |
| o  changeset:   1:45b7f64b2a23
|/   user:        Andy Glew <glew@mips.com>
|    date:        Thu Jun 21 12:40:12 2012 -0700
|    summary:     0.1
|
@  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0

% echo This is not right
This is not right 
```

我想要的是一个可以识别文件内容何时相同的合并，或者可以识别两行历史记录是相似的，尽管并非一行中的所有版本都在另一行中，并给出如下内容：

```
o=o changesets with same file contents on different historical lines
o |  (line1) 
| |  changeset:   2:2a02e67e7b5d
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| o  (line2)
| |  changeset:   8:089179dde80a
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:15 2012 -0700
| |  summary:     2
| |
| o  changeset:   7:615416921e33
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.2
| |
| o  changeset:   6:a43a88065141
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:14 2012 -0700
| |  summary:     1.1
| |
| |
o=o changesets with same file contents on different historical lines
o |  (line1) 
| |  changeset:   1:93cbae111269
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:13 2012 -0700
| |  summary:     1
| o  (line2) 
| |  changeset:   5:fef4050e0162
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     1
| |
| o  changeset:   4:b51fbedc72e5
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     0.2
| |
| o  changeset:   3:45b7f64b2a23
| |  parent:      0:c80bc10826be
| |  user:        Andy Glew <glew@mips.com>
| |  date:        Thu Jun 21 12:40:12 2012 -0700
| |  summary:     0.1
| |
| |
|/
|
o  changeset:   0:c80bc10826be
   user:        Andy Glew <glew@mips.com>
   date:        Thu Jun 21 12:40:11 2012 -0700
   summary:     0 
```

我可以想象在 o=o 点可能需要合并变更集。

但我想让它自动识别。

哎呀，忘记“公认”。我想有一种方法可以手动识别它，但让它在 Mercurial 中表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:40:02.260

我认为 Mercurial 无法获得您正在寻找的设计模式。Mercurial 跟踪从父变更集到子变更集的差异，因此它并不真正关心整个文件的内容。即使您在树 A 上的修订版 2 中的文件和树 B 上修订版 5 的文件具有相同的内容，它们来自不同的父级，因此具有不同的存储方式来存储它们的更改方式。我没有过多地研究 mq 扩展，但这是我能想到的唯一可以编辑树的历史以做你想做的事。编辑一棵树的历史总是一件很危险的事情，而且很少被推荐。

编辑：我也不太确定这个，但是 rebase 扩展也可能对你有用。

# jquery - jQuery UI：使元素在同一个父元素中既可拖动又可排序

> ID：11146097
> 
> 赞同：1
> 
> 时间：2012-06-21T20:19:57.097
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我正在使用 jQuery UI 创建一个日程管理器小部件，它允许用户调整给定日期的时间段元素的大小和排序。每个时隙都有一个由其高度表示的持续时间，以及一个根据其在堆栈中的顺序及其持续时间计算的开始/结束时间。时间表中的“间隙”由占位符元素表示，它们的高度等于间隙持续时间。

现在，用户可以通过调整时隙的大小来修改时隙的持续时间（如果有的话，它会反向调整相邻占位符的大小），或者他们可以通过相对于其他时隙/占位符对其进行排序来更改其开始/结束时间。

我还想让每个时隙元素可拖动，以便用户可以手动将元素定位在日期列中，此时将计算其正确的开始/结束时间以及任何其他必要的更改（例如添加新的占位符或拼接现有的时隙）

然而，当我尝试将这两个小部件组合在一起时，我遇到了一些奇怪的 UI 错误和不一致的行为。请参阅以下小提琴以获取粗略示例...

[http://jsfiddle.net/SETTM/16/](http://jsfiddle.net/SETTM/16/)

谁能告诉我我是否以正确/错误的方式进行此操作，或者这是否可能？

谢谢！

# bash - 在 sed 命令中使用变量

> ID：11146098
> 
> 赞同：28
> 
> 时间：2012-06-21T20:20:00.520
> 
> 标签：bash, variables, sed, escaping

我似乎无法在 sed 命令中使用变量，例如：

```
sed "24s/.*/"$ct_tname"/" file1.sas > file2.sas 
```

我想要`$ct_tname`变量，而不是字面意思`$ct_tname`，这是我不断得到的。

有人知道如何让它工作吗？

这个问题实际上更复杂，我省略了一些信息。

```
ct_fname="%let outputfile="/user/ct_"$1".csv";" 
```

这`$1`是在我的 bash 脚本开始时传入的参数（sed 在 bash 脚本中运行）。

这没有成功运行，但如果我替换它会`ct_fname`运行

```
ct_fname="%let table=ct_$1;" 
```

有没有办法让第一个`ct_fname`成功通过？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-21T20:24:10.040

您需要使用双引号 ( `"`) 而不是单引号 ( `'`)。单引号按字面意思传递它们的内容，而不翻译变量（扩展）。

尝试

```
sed "24s/.*/\"$ct_tname\"/" file1.sas > file2.sas 
```

顺便说一句，如果你要编辑一个文件（也就是说，如果*file2.sas*是一个临时文件），你应该使用它`ed`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-17T10:51:57.503

就我而言，我只是用双引号替换了单引号：

```
for a in $(cat ext.cnf); do sed -n "/$a$/p" file1 >> file2; done 
```

目前，它运行良好...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-12T15:09:09.433

问题是当`$ct_fname`被替换时，会`sed`看到额外的`/`分隔符，所以

```
sed "24s/.*/"$ct_tname"/" file1.sas > file2.sas 
```

变成

```
sed "24s/.*/"%let outputfile=/user/ct_ARGUMENT1.csv;"/" file1.sas > file2.sas 
```

你会得到一个`sed`错误，因为有 5 个`/`而不是预期的 3 个。

相反，将`sed`分隔符更改为未使用的字符，例如`|`or `:`，单引​​号或双引号都可以正常工作：

```
sed '24s|.*|'$ct_tname'|' file1.sas > file2.sas
sed "24s|.*|"$ct_tname"|" file1.sas > file2.sas 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T20:25:51.787

Shell 变量不在单引号内展开。试试这个：

```
sed "24s/.*/\"$ct_tname\"/" file1.sas > file2.sas 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T20:25:23.640

您需要使用双 ( `"`) 引号，使用单 ( `'`) 引号时变量的值不会被替换。由于您的替换文本中有双引号，因此您需要对它们进行转义：

```
sed "24s/.*/\"$ct_tname\"/" file1.sas > file2.sas 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-11T11:15:50.807

其他答案集中在他们的示例中使用转义双引号。请注意，这并不总是您想要的：

```
$ FOO="auie"; echo foo123bar|sed "s/123/\"$FOO\"/"
foo"auie"bar
$ FOO="auie"; echo foo123bar|sed "s/123/$FOO/"
fooauiebar
$ FOO="auie"; echo fooauiebar|sed "s/\"$FOO\"/123/"
fooauiebar
$ FOO="auie"; echo fooauiebar|sed "s/$FOO/123/"
foo123bar 
```

# c# - 常见事件处理的最佳实践

> ID：11146099
> 
> 赞同：2
> 
> 时间：2012-06-21T20:20:07.730
> 
> 标签：c#, .net, winforms, event-handling

在 WinForms 解决方案中，您有多个相同类型的控件。您需要为每个控件添加一个事件处理程序，并且当前事件处理程序将执行相同的操作。您不希望它们之间有任何差异。

例如：

```
ScheduledPatientsGrid.ProcessGridKey += ScheduledPatientsGrid_ProcessGridKey;
RecentPatientsGrid.ProcessGridKey += RecentPatientsGrid_ProcessGridKey;
RecentPatientsGrid.ProcessGridKey += RecentPatientsGrid_ProcessGridKey;

... 

private void ScheduledPatientsGrid_ProcessGridKey(object sender, KeyEventArgs e)
{
   ...
}

private void RecentPatientsGrid_ProcessGridKey(object sender, KeyEventArgs e)
{
   ...
}

private void PatientsGrid_ProcessGridKey(object sender, KeyEventArgs e)
{
   ...
} 
```

**现在是在如下所示的不同事件之间共享单个事件处理程序更好，还是像上面显示的代码示例中使用不同的事件处理程序更好？**

```
ScheduledPatientsGrid.ProcessGridKey += ProcessGridKey;
RecentPatientsGrid.ProcessGridKey += ProcessGridKey;
RecentPatientsGrid.ProcessGridKey += ProcessGridKey;                

private void ProcessGridKey(object sender, KeyEventArgs e)
{
  ...
} 
```

在接下来的页面中，微软似乎建议共享更好，但是我注意到自 .NET 2.0 以来他们没有更新它（即：Visual Studio 2008）

[http://msdn.microsoft.com/en-us/library/4ac48519%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/4ac48519%28v=vs.90%29.aspx)

**在这种情况下，是否有提供最佳实践建议的指南？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T20:22:53.687

我*绝对*会使用相同的方法。拥有多个完全相同的方法有什么可能的好处，但没有一个被命名来说明它的作用？

我个人厌恶`source_EventName`Visual Studio 产生的约定。我更愿意给我的事件处理程序方法赋予有意义的名称，以说明它们*的作用*。然后当你在设计器中向下查看事件处理程序列表时，你可以看到当一个按钮被单击时，X 会发生，而不是“按钮的单击事件处理程序将被调用”，这是没有用的。

或者，使用 lambda 表达式订阅事件并使用有意义的参数调用有意义的方法。（`sender`and`args`通常对事件处理程序无用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:24:31.947

在这种情况下，我通常让它们包装一个通用方法，但我会根据使用情况来命名它们的事件处理程序。这使我可以轻松地对该方法进行单元测试并（通常）减少所需的参数，并且堆栈跟踪中的任何错误对于进程失败的网格都是非常易读的：

```
ScheduledPatientsGrid.ProcessGridKey += ScheduledPatientsGrid_ProcessGridKey;
RecentPatientsGrid.ProcessGridKey += RecentPatientsGrid_ProcessGridKey;
RecentPatientsGrid.ProcessGridKey += RecentPatientsGrid_ProcessGridKey;

... 

private void ScheduledPatientsGrid_ProcessGridKey(object sender, KeyEventArgs e)
{
   ProcessGridKey(e.Key);
}

private void RecentPatientsGrid_ProcessGridKey(object sender, KeyEventArgs e)
{
   ProcessGridKey(e.Key);
}

private void PatientsGrid_ProcessGridKey(object sender, KeyEventArgs e)
{
   ProcessGridKey(e.Key);
}

private void ProcessGridKey(Key e)
{
    ...
} 
```

您的里程可能会因共享方法的作用或传入的参数而异。（例如，在我上面的示例中，我复制了`Key`从`KeyEventArgs`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:23:30.507

我更喜欢分享，如果逻辑失控，您始终可以将单个事件用作正确方法的路由器，例如...

```
private void ProcessGridKey(object sender, KeyEventArgs e)
{
     if (sender is x)
          xmethod();
     if (sender is y)
          ymethod();    //etc 
} 
```

我知道这种语法不太有意义，因为在 OP 示例中发送者将始终是同一个对象，但你明白了。

# java - 加入表休眠+分组

> ID：11146105
> 
> 赞同：2
> 
> 时间：2012-06-21T20:20:29.437
> 
> 标签：java, hibernate, detachedcriteria

我需要用 Java + Hibernate 来做这个查询。

```
SELECT 
    table2.id,
    COUNT(table2.id) AS count
FROM
  table1 
    JOIN table2
       ON table1.fk_tb2 = table2.id  --many2one
GROUP BY
   table2.id 
```

我会使用 DetachedCriteria 类.....我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:30:24.207

尝试使用这样的投影：

```
Criteria table1Crit = session.createCriteria("table1");
Criteria table2Crit = table1Crit.createCriteria("table2", Criteria.INNER_JOIN);
table2Crit.setProjection( Property.forName("id").count() ); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-21T20:37:12.103

使用您的查询`createNativeQuery`方法

# python - 在 Python 将要打开的文件中序列化 GeoTIFF 作为 Numpy 数组的最佳方法

> ID：11146106
> 
> 赞同：0
> 
> 时间：2012-06-21T20:20:30.047
> 
> 标签：python, serialization, file-io, numpy

我在 GeoTIFF（地理参考 TIFF 图像）中有一个文件，我可以使用 GDAL 在 Python 中加载它并转换为 Numpy 数组，然后我的程序使用 GDAL 从文件中获取的地理参考信息进行处理。

由于我想删除 GDAL 依赖项，我计划将 GeoTIFF 信息序列化为另一种文件格式（想到 JSON），并满足以下要求：

*   文件体积小；
*   快速访问；
*   如果可能，随机访问（切片）；
*   Numpy 友好（不需要花哨的类或其他模块依赖来解码）；
*   简单/直接/“人类可读”；
*   可以很容易地被其他语言的其他脚本使用，而不是晦涩难懂；

JSON 可以正常工作，但我担心它不是最小的，也不是最快的访问格式。由于数组类型是`uint16`，二进制可能是一个选项。泡菜可能太神秘了。CSV 将难以将地理参考信息（角坐标和分辨率）与网格值分开。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:51:59.870

我不熟悉 GeoTIFF 信息，但对于存储平面数据，我强烈推荐[hdf5](http://alfven.org/wp/hdf5-for-python/)格式，它有一组很好的 python 绑定，称为[h5py](http://h5py.alfven.org/docs-2.0/intro/quick.html)。这是一个简单的示例，展示了使用它是多么容易：

```
>>> import h5py
>>> f = h5py.File('data.hdf5')
>>> a = np.arange(12.0).reshape((4,3))
>>> a
array([[  0.,   1.,   2.],
       [  3.,   4.,   5.],
       [  6.,   7.,   8.],
       [  9.,  10.,  11.]])
>>> f.create_dataset('array', data=a)
<HDF5 dataset "array": shape (4, 3), type "<f8">
>>> f['array'].attrs['info'] = 'some data I want to store'
>>> f['array'].attrs['date'] = (6, 21, 2012)
>>> f.close()
>>> f = h5py.File('data.hdf5')
>>> f['array']
<HDF5 dataset "array": shape (4, 3), type "<f8">
>>> f['array'].value
array([[  0.,   1.,   2.],
       [  3.,   4.,   5.],
       [  6.,   7.,   8.],
       [  9.,  10.,  11.]])
>>> f['array'].attrs['info']
'some data I want to store'
>>> f['array'].attrs['date']
array([   6,   21, 2012]) 
```

# php - jquery验证，提交按钮在php中不起作用

> ID：11146107
> 
> 赞同：-2
> 
> 时间：2012-06-21T20:20:34.887
> 
> 标签：php, jquery, jquery-validate, validation

我单击按钮，没有任何反应。如果我取出验证代码，则单击该按钮可以工作，它会退回到我已实现的 PHP 验证。我首先编写了 jquery 验证并且它工作了，然后我编写了 PHP 端。但是在 PHP 端没问题后 jquery 验证停止工作。

有人可以帮忙吗？

我尝试添加

```
submitHandler: function(form) {
    form.submit();
} 
```

像这样：

```
submitHandler: function(form) {
    form.submit();
},
rules: {
    ...
} 
```

但是什么也没发生。

这是相关代码，如果有不清楚的地方请告诉我，谢谢！我已经坚持了一段时间了。

```
if (isset($_POST['submit']))
{
    foreach($_POST as $key=>$value)
    {
        unset($_SESSION[$key]);
        $_SESSION[$key] = $value;
    }
    $errors = validation($job);
    if (count($errors) == 0)
    {
        sendEmail($job);
        sendEmailToApplicant($job);
    }
}

$output = "
<script src='http://code.jquery.com/jquery-latest.js'></script>
<script type='text/javascript' src='http://jzaefferer.github.com/jquery-validation/jquery.validate.js'></script>
<script type='text/javascript'>
jQuery.validator.setDefaults({
    debug: true,
    success: 'valid'
});
jQuery.validator.addMethod('phoneUS', function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ''); 
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, 'Please specify a valid phone number');
</script>
<script>
    $(document).ready(function(){
        $('#applicationForm').validate({
            rules: {
                firstName: {
                    required: true,
                    rangelength: [2, 15]
                },
                lastName: { 
                    required: true,
                    rangelength: [2, 15]
                },
                email: {
                    required: true,
                    email: true
                },
                phone: {
                    required: true,
                    phoneUS: true
                },
                website: {
                    url: true
                }
            }
        });
    });
</script>

<form id='applicationForm' name='applicationForm' method='post' enctype='multipart/form-data'>

            ...

    <input id='submit' type='submit' name='submit' />
</form>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:32:21.450

真的很快尝试。不确定这是否是问题，因为我真的看起来不太近，但为什么会有 jQuery。如果您没有 jquery.noConflict，则在某些操作中。

尝试将它们更改为 $ 像这样：

```
<script>
$(document).ready(function(){
    $('#applicationForm').validate({
        rules: {
            firstName: {
                required: true,
                rangelength: [2, 15]
            },
            lastName: { 
                required: true,
                rangelength: [2, 15]
            },
            email: {
                required: true,
                email: true
            },
            phone: {
                required: true,
                phoneUS: true
            },
            website: {
                url: true
            }
        }
    });

    $.validator.setDefaults({
        debug: true,
        success: 'valid'
    });
    $.validator.addMethod('phoneUS', function(phone_number, element) {
        phone_number = phone_number.replace(/\s+/g, ''); 
        return this.optional(element) || phone_number.length > 9 &&
            phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
    }, 'Please specify a valid phone number');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:26:11.520

使用以下代码检查是否已发布帖子：

`if($_SERVER['REQUEST_METHOD'] == 'POST'){`

检查提交按钮的存在是非常不可靠的。

# tsql - 如何替换 transact-sql 中的字符代码？

> ID：11146108
> 
> 赞同：0
> 
> 时间：2012-06-21T20:20:37.363
> 
> 标签：tsql

我正在尝试修复由于复制/粘贴而插入某些内容的 Microsoft 单词智能引号（和其他单词智能字符）。虽然我们正在努力解决这个问题，但我正在尝试创建一个脚本，以便我们可以在数据成为问题时对其进行修复。

为了测试它，我正在运行以下查询：`select title from DigArticleArticle where ArticleId = 8249`。这会正确检索我们的标题，由于无效字符而带有问号。为了替换它，我尝试了以下查询：

```
select REPLACE(title, CHAR(8216), char(39)), Title from DigArticleArticle where ArticleID = 8249 
```

这将返回 null 作为第一列。为什么我的替换会返回 null？即使找不到字符代码，它仍应返回原始字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:28:47.483

尝试：

```
select REPLACE(title, NCHAR(8216), char(39)), Title from DigArticleArticle where ArticleID = 8249 
```

如上所述，CHAR() 处理 ASCII 字符 (0-255)。在这种情况下需要 Unicode 版本，NCHAR() 可以处理范围 0-65535

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:23:39.300

来自 MSDN Docs 关于[char的论点](http://msdn.microsoft.com/en-us/library/ms187323.aspx)

> CHAR (整数表达式)
> 
> 论据
> 
> 整数表达式
> 
> 是从 0 到 255 的整数。如果整数表达式不在此范围内，则返回 NULL。

8216 大于 255 所以它的 null

[更换](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

> 返回类型
> 
> 如果输入参数之一是 nvarchar 数据类型，则返回 nvarchar；否则，REPLACE 返回 varchar。
> 
> 如果任一参数为 NULL，则返回 NULL。

因此，如果`char(8216)`是替换中的参数，您将始终返回 null

根据[trekstuff 的回答](https://stackoverflow.com/a/11146241/119477)，您应该改用 nchar

# asp.net - 带有 DropDownList 的 ASPX EventValidation 错误

> ID：11146110
> 
> 赞同：4
> 
> 时间：2012-06-21T20:20:43.067
> 
> 标签：asp.net, webforms

这必须有一个明显的解决方案，但我很难过。我们正在开发一个主要`XHR`基于 - 的应用程序，所以当我们使用`.aspx`时，很少使用典型的控件。但是，在某些情况下，我们只是在做基本的“将这些数据放入电子表格中供用户使用”的事情，其中​​有几个下拉菜单用于报告的时间跨度等。

问题是当我们使用`asp:DropDownList`控件时，它会立即导致我们放入它们的任何页面在提交时抛出事件验证错误。我创建了不共享应用程序母版页的其余部分的测试页面（也就是，根本没有 JS 修改客户端的东西）只是为了确保我们没有一些杂散的 JS 导致问题。

如果我在以下示例中删除了`DropDownList`，按钮单击就会发生。如果我点击页面如图所示的按钮，它会抛出`Event Validation error`.

*但是*，在同一台机器上运行的其他应用程序，在 4.0 集成应用程序池中，没有表现出这种行为，所以我假设它与配置有关。这`web.config`是相当标准的......试图`httpCompression`在绝望的尝试中关闭部分，但无济于事。

有没有人建议从哪里开始？请记住...**没有客户端修改**正在进行。这直接从服务器到浏览器，然后在 ASP 生成的按钮上“单击”。

在页面指令中关闭事件验证确实消除了错误，但如果我能提供帮助，我宁愿不关闭验证。

**环境**：

*   视窗 7 专业版
*   IIS 7.5
*   .NET 4.0 集成应用程序池
*   IE9/Chrome/Firefox/Safari 中发生错误

**页面**：

```
<html>
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="ddlDays" runat="server">
            <asp:ListItem Text="30 Days" Value="30"></asp:ListItem>
            <asp:ListItem Text="60 Days" Value="60"></asp:ListItem>
            <asp:ListItem Text="90 Days" Value="90"></asp:ListItem>
        </asp:DropDownList>
        <asp:Button ID="butExport" Text="Export" runat="server" />
    </div>
    </form>
</body>
</html> 
```

**代码隐藏**：

```
protected void Page_Load(object sender, EventArgs e) {
    butExport.Click += new EventHandler(butExport_Click);
}

void butExport_Click(object sender, EventArgs e) {
    Syslog("clicked");
} 
```

**表单数据（根据 Chrome Inspector）**：

*   __VIEWSTATE:/wEPDwULLTIwOTUzNjUzOTVkZIiv1cdholWibyWL8h5HASwxedB47NUpctCv8OQc1CWM
*   __EVENTVALIDATION:/wEWAgL0voCyDQKDgcL6CAX34hdaRiHyNiY1xLIh5Pr6aj5q8h8gGG875vMq1SXF
*   ddl天数：30
*   但是导出：导出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:21:09.610

好的，我开始浏览我的项目，寻找任何可能导致问题的配置项。结果是一位同事使用了 a`WebControlAdapter`并将其应用于所有`DropDownLists`，而在渲染期间，没有使用`RegisterForEventValidation`.

我不是特别喜欢适配器，但为了继续生活，我把它留在那里，在渲染绑定项目时，我调用`Page.ClientScript.RegisterForEventValidation`了每个值。这解决`DropDownList`了我们在应用程序中遇到的所有问题。

谢谢大家的建议。

# java - 如何让 StringTemplate V4 忽略 < 作为分隔符？

> ID：11146113
> 
> 赞同：4
> 
> 时间：2012-06-21T20:20:58.087
> 
> 标签：java, stringtemplate, stringtemplate-4

我正在使用 StringTemplate V4 在我的项目中生成一些 HTML 代码。我需要在我的模板中设置 HTML 格式，因此使用默认分隔符`<`会`>`很尴尬。

所以，我正在创建一个将分隔符作为参数传递的组（正如[这个问题](https://stackoverflow.com/questions/8490351/stringtemplate-remove-as-delimiters)所建议的那样），但它根本不起作用。

这是我的测试代码：

```
public void testTemplate() {
    char sep = '$';
    STGroup stGroup = new STGroupString("temp",
            "<html>hello, $name$!</html>", sep, sep);
    System.out.println("Group created");
    ST st = stGroup.getInstanceOf("temp");
    if (st == null) {
        System.out.println("Failed to get template!");
    } else {
        st.add("name", "Guest");
        System.out.println("Template initialized correctly");
    }
} 
```

这是我得到的输出：

```
temp 1:1: invalid character '<'
temp 1:5: invalid character '>'
temp 1:1: garbled template definition starting at 'html'
temp 1:6: garbled template definition starting at 'hello'
temp 1:13: invalid character '$'
temp 1:18: invalid character '$'
temp 1:19: invalid character '!'
temp 1:21: invalid character '<'
temp 1:22: invalid character '/'
temp 1:14: garbled template definition starting at 'name'
temp 1:26: invalid character '>'
temp 1:22: garbled template definition starting at 'html'
Failed to get template! 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:34:05.567

问题是提供给`STGroupString`构造函数的模板不是有效的“组模板”语法。

要获得不需要特殊语法的组模板，请尝试：

```
STGroup group = new STGroup('$', '$');
group.registerRenderer(...);
CompiledST compiledTemplate = group.defineTemplate("name", ...);
compiledTemplate.hasFormalArgs = false; // very important!

// later on...
ST template = group.getInstanceOf("name"); 
```

（以上是对我的 C# 代码的改编，所以 YMMV。我已尝试确保类型/名称有效且语法正确，但尚未验证。请随时根据需要更新/更正。）

快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:53:46.227

上面非常有趣的技巧（通过 pst），它也给出了一个提示：“无效的组模板语法”。

因此，作为参考，这里是他的代码的替代方案，对此类组使用有效的语法：

```
 STGroup groupS = new STGroupString("some group", "val(value) ::= \"<span>Value is {value; format=\\\"%1.5f\\\"}</span>\"", '{', '}');
 groupS.registerRenderer(Number.class, new NumberRenderer());
 ST valTpl = groupS.getInstanceOf("val");
 valTpl.add("value", 3.14159265358979353);
 System.out.println(valTpl.render()); 
```

Java 字符串中的语法变得笨拙，有许多转义...

# html - 底部的页脚

> ID：11146121
> 
> 赞同：0
> 
> 时间：2012-06-21T20:21:28.417
> 
> 标签：html, css, position, footer

这是我的问题，我的页脚不会留在页面底部。

我尝试任何事情：clear:boths;bottom:0; 保证金...没有任何工作..

我的问题是：我怎样才能把它放在页面的底部。

这是我的代码

```
<div id = "wrapper">
       .....
       ....

   <div id = "content2">
    <div id = "fastMenu">
        <a href="conseil-d-administration">
            <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes                    /default/interface/FR/menuAdmin.png'; ?>" border="0" />
        </a>
        <a href="congres-2012">
            <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuCongres.png'; ?>" border="0" />
        </a>
        <a href="formation">
            <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuFormation.png'; ?>" border="0" />
        </a>            
        <a href="devenir-membre">
            <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuMembre.png'; ?>" border="0" />
        </a>            
    </div>  
    <div id="contenu" class="txt">          
        </div>   <?php //CONTENU2 ?>  
      <div id = "leftSide">
        <?php  include_once(INC_PATH_FULL_THEME.'event-teaser.php'); ?>
      </div>          
   </div>  <?php //CONTENT2 ?>   
     <div id = "footer">

       </div> 
```

CSS

```
#footer{
width: 900px;
height: 100px;
background:white;
margin-top: 100px;    
bottom: 0;
clear:both;    
 }
  #contenu2{
background:white;
width: 600px;
float:right;
padding-right: 2.5%;
 z-index: 1;
 }
 #content2{
width: 900px;
height: auto;
margin-left: 1px;
background:white;
overflow: auto;
z-index: 1;
position:absolute;
   }

#wrapper{
width:900px;    
align: 26.5%;
margin: 0 auto;
margin-top: 15px;
font-family: "Lucida Sans Unicode", Arial, Verdana;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:27:14.373

您必须添加到您的 CSS：

```
position: relative; 
```

到包含元素的`footer`元素。

当然还有`position: absolute`元素`footer`。

在你的情况下：

```
#wrapper {
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:50:59.307

参考这个**[LIVE DEMO](http://jsfiddle.net/SivaCharan/tTCbp/)**

在格式化您的代码时`jsfiddle`，我遇到了一些问题并修复了这些问题：-

1.  在 HTML 上，`div`缺少关闭
2.  在 CSS 上，从一个类中删除了 2 号`"#contenu2"`（现在是`"#contenu"`）
3.  添加`position: absolute;`到`#footer`班级

## HTML：

```
<div id="wrapper">
    <div id="content2">
        <div id="fastMenu">
            <a href="conseil-d-administration">
                <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes                    /default/interface/FR/menuAdmin.png'; ?>" border="0" />
            </a>
            <a href="congres-2012">
                <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuCongres.png'; ?>" border="0" />
            </a>
            <a href="formation">
                <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuFormation.png'; ?>" border="0" />
            </a>            
            <a href="devenir-membre">
                <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuMembre.png'; ?>" border="0" />
            </a>            
        </div>  
        <div id="contenu" class="txt">          
        </div>   <?php //CONTENU2 ?>  
        <div id="leftSide">
        <?php  include_once(INC_PATH_FULL_THEME.'event-teaser.php'); ?>
        </div>          
    </div>  <?php //CONTENT2 ?>
    <div id="footer">
        FooterText
    </div>      
</div>
​ 
```

## CSS：

```
#footer {
    width: 900px;
    height: 100px;
    background:white;
    margin-top: 100px;    
    bottom: 0;
    clear:both;    
    position: absolute;
}

#contenu {
    background:white;
    width: 600px;
    float:right;
    padding-right: 2.5%;
    z-index: 1;
}

#content2 {
    width: 900px;
    height: auto;
    margin-left: 1px;
    background:white;
    overflow: auto;
    z-index: 1;
    position:absolute;
}

#wrapper{
    width:900px;    
    align: 26.5%;
    margin: 0 auto;
    margin-top: 15px;
    font-family: "Lucida Sans Unicode", Arial, Verdana;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:26:27.640

如果您希望您的页脚始终位于页面底部，除非被内容向下推，请查看[此粘性页脚教程](http://ryanfait.com/sticky-footer/)。以下代码应该是您所需要的。

**HTML**：

```
<div class="wrapper">
    <div class="header">    
    </div>
    <div class="push"></div>
</div>
<div class="footer">
</div> 
```

**CSS**：

```
* {
    margin: 0;
}

html, body {
    height: 100%;
}

.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
}

/*

Sticky Footer by Ryan Fait
http://ryanfait.com/

*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T20:35:06.523

这对我有用。尝试使其适应您的代码。如果有帮助，请签名作为答案。

```
html, body {
    margin:0 auto; /* to center page align (can be left, right)*/
    height:100%;
}

#container {  /* contains everything, footer inclusive. */
    min-height:100%; 
    position:relative; 
}

#footer {
    clear: both;  
    position:absolute;
    bottom:0; 
    height:55px; /*Required, Height of the footer */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T20:26:51.263

输入“位置：绝对；” 在页脚 css 中。JsFiddle [http://jsfiddle.net/sdxaZ/](http://jsfiddle.net/sdxaZ/)

# python - python-daemon 不记录标准输出重定向

> ID：11146128
> 
> 赞同：4
> 
> 时间：2012-06-21T20:21:48.767
> 
> 标签：python, stdout, daemon

我在我的代码中使用 python-daemon，其中包含打印语句。我想将它们发送到一个文件，所以我运行了以下命令：

```
python server.py >> log.out 
```

然而，什么都没有进去`log.out`。

谁能告诉我我需要做什么？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-18T06:20:48.233

DaemonContext 对象允许在创建对象时重定向 stdout/stderr/stdin。例如：

```
import os
import daemon

if __name__ == '__main__':
    here = os.path.dirname(os.path.abspath(__file__))
    out = open('checking_print.log', 'w+')

    with daemon.DaemonContext(working_directory=here, stdout=out):
        for i in range(1, 1000):
            print('Counting ... %s' % i) 
```

您应该能够`cat checking_print.log`看到打印语句的输出。

DaemonContext 对象的一个​​很好的参考是[PEP 3143](http://www.python.org/dev/peps/pep-3143/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:31:14.147

如果您的代码中有错误，则不会将其写入文件。请参阅[http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)

尝试创建此文件：

```
print 'stdout'
raise Exception('stderr') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T20:30:31.417

如果它已经作为守护进程运行，您很可能需要强制重定向 STDOUT、STDERR 等。您可以在[此处阅读有关 I/O 重定向的](http://tldp.org/LDP/abs/html/io-redirection.html)更多信息。

```
python server.py 2>log.out >&2 
```

# asp.net - 从 Web 角色设置配置 ASP.NET SQL 成员资格提供程序

> ID：11146129
> 
> 赞同：2
> 
> 时间：2012-06-21T20:21:53.110
> 
> 标签：asp.net, azure, asp.net-membership, sqlmembershipprovider

我有一个使用 ASP.NET SQL Membership 提供程序的 Web 角色。当前配置位于 Web.Config 文件中。我想将连接字符串配置为 Web 角色设置，而不是将其放在 Web.Config 中。我想要这样做的主要原因是，我可以在 azure 项目上设置配置以发布到不同的托管服务（dev、qa 等）。现在，我每次都必须手动编辑 web.config发布到不同的服务。

我对如何实现这一点有几个想法。

1.  编写一个自定义成员资格提供程序，该提供程序包装 SQL 提供程序并为其提供自定义配置。
2.  在 Web Role OnStart 方法中添加一些内容以更改 Web.config 文件中的连接字符串。

以前有没有人做过类似的事情，或者对哪个选项可能是最好的有建议，或者对如何实现这一点有其他想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:44:40.153

Windows Azure SDK 允许您在每个环境中拥有多个服务配置。但是 web.config 修改有点困难。在您的情况下，我建议您编写一些代码（或启动任务），从服务配置中读取连接字符串并将其写入 web.config。

Andy 的博文“[在 WebRole Startup 上以编程方式修改 web.config](http://blog.elastacloud.com/2011/05/13/azure-howto-programmatically-modify-web-config-on-webrole-startup/) ”准确解释了如何做到这一点：

```
public override bool OnStart()
{
    using (var server = new ServerManager())
    {
        // get the site's web configuration
        var siteNameFromServiceModel = "Web"; // TODO: update this site name for your site. 
        var siteName =
            string.Format("{0}_{1}", RoleEnvironment.CurrentRoleInstance.Id, siteNameFromServiceModel);
        var siteConfig = server.Sites[siteName].GetWebConfiguration();

        // get the appSettings section
        var appSettings = siteConfig.GetSection("appSettings").GetCollection();

        AddElement(appSettings, "deploymentId", RoleEnvironment.DeploymentId);
        AddElement(appSettings, "internalEndpointPort", RoleEnvironment.CurrentRoleInstance.InstanceEndpoints
            .First(t=>t.Key=="InternalEndpoint1").Value
            .IPEndpoint.Port.ToString());

        server.CommitChanges();
    }
    return base.OnStart();
} 
```

# c# - 将多个点引用到同一类中

> ID：11146138
> 
> 赞同：-1
> 
> 时间：2012-06-21T20:22:29.433
> 
> 标签：c#, .net, interface

我有 3 个接口，应该在一个类中定义。

例如

```
public class ChitChats : IServers, IClients, IInternalOnly 
{ 
   protected void SendChatMsg() { }
   public void SendMsg() { SendChatMsg(); }
} 
```

我的问题是每个接口实际上是一个引用相同框架程序集的不同可执行文件。我要做的所有事情都是确保相关的可执行引用不会被看到其他公开的可用类型。

我的问题是我如何能够引用单个单词/对象，它的基础基本类型可以根据其他标准进行交换。

例如我可以做

```
IServers.SendMsg() // Works
IClients.SendMsg() // Breaks
IInternalOnly.SendMsg() // Works as it inherits from IServers ... 
```

但我只想在其他任何地方使用一个接口名称。但它应该足够聪明，知道要为我链接哪个接口......

```
IAwesomeInterface.SendMsg(); // Works ... <g> .. we dont care what was implemented out of the available options. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:29:53.807

您需要选择一个通用名称 - 以`SendMsg()`这种`IMessageSender`方式您只需在您的认知空间中声明该想法一次即可。

# php - PHP 缓存安全性：文件缓存与内存缓存

> ID：11146139
> 
> 赞同：0
> 
> 时间：2012-06-21T20:22:31.600
> 
> 标签：php, caching, memcached

在 PHP 中使用文件缓存（即 PEAR Cache_Lite）来保存数据（序列化数组、对象）时是否存在任何相关的安全问题？数据缓存在内存中是否更安全，即使用 memcache 或 APC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:32:26.197

既然您提到：来自黑客的安全性，答案是否定的。

如果有人能够访问您的文件系统或一般系统，他们将可以访问几乎所有内容，包括您的 mysql 数据。

在缓存方面，您需要担心的主要额外问题是您是否与其他人共享服务器。

如果您使用的是 memcache，您确实希望绝对确保没有人可以从外部访问 memcache 服务器。你有防火墙吗？您是否只保持必须打开的端口？

如果这些答案是肯定的，那么您最大的安全问题就是您自己的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:24:27.907

使用文件缓存时，您至少可以获得底层文件系统的内置安全性。我不相信 Memcached 或 APC 有任何类型的权限分离，因此同一系统上的其他用户理论上可以访问您存储在上述内存缓存之一中的任何内容。

# extjs - 在 ExtJS 中似乎找不到将图表轴字段标签转换为超链接的方法

> ID：11146149
> 
> 赞同：1
> 
> 时间：2012-06-21T20:23:24.560
> 
> 标签：extjs, charts, customization

我正在使用 ExtJS 4 并且有一个工作水平条形图。在“轴：”部分中，我需要将字段标签作为超链接，因此当您查看图表时，x 轴上的所有标签以及条形本身都将是指向另一个网页的链接，该网页描述了更多关于它。

```
...
axes: [{
  type: 'Numeric',
  position: 'bottom',
  fields: ['field1', 'field2', 'field3', 'field4'],
  title: 'Percentages',
  grid: true
}, {
  type: 'Category',
  position: 'left',
  fields: ['machineName'],
  title: 'Machine Names'
}],
... 
```

正是“类别”的“字段”部分打印出机器的名称。默认情况下，此字段仅在从 JSON 中获取名称时打印出名称。我创建了另一个变量，它试图获取机器名称并用 ' + name + ' 包围它，但这只是将其呈现为文本，没有可点击性。所有其他搜索都不足。我在 Themes 或 LabelLinks 上看到了一些东西，但无法在我的特定设置中使用这些东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:30:09.113

我就是这样做的。您可以通过覆盖 Axis.js 中的 getOrCreateLabel 方法将“单击”事件处理程序附加到轴标签。

```
function labelClickHandler(e, t, eopts) {
        console.log('clicked ' + e.text); // do your stuff here
}

// override getOrCreateLabel  
Ext.chart.axis.Axis.override({
        getOrCreateLabel: function (i, text) {
        // Copy and paste original getOrCreateLabel body from Axis.js here
        ...
        textLabel = surface.add(Ext.apply({
            group: labelGroup,
            type: 'text',
            x: 0,
            y: 0,
            text: text
        }, me.label));
        surface.renderItem(textLabel);
        textLabel._bbox = textLabel.getBBox();
        // Add event handler after label creation
        textLabel.on('click', labelClickHandler); 
        ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:00:57.210

这是我基于科伦坡的解决方案。

此版本允许您在声明轴时设置处理程序。此外，它允许您检索标签索引，并且仅将覆盖应用于`Category`轴，因为无论如何我们对单击其他类型的轴不感兴趣。

轴声明：

```
...
axes: [{
  type: 'Numeric',
  position: 'bottom',
  fields: ['field1', 'field2', 'field3', 'field4'],
  title: 'Percentages',
  grid: true
}, {
  type: 'Category',
  position: 'left',
  fields: ['machineName'],
  title: 'Machine Names',
  handler: function(axis, i, label){
    console.log('Label text: %o',label.text);
    console.log('Label index: %o',i);
    console.log('Axis: %o',axis);
  }
}],
... 
```

覆盖：

```
Ext.override(Ext.chart.axis.Category,{
  getOrCreateLabel: function(i, text) {
    var me = this,
        labelGroup = me.labelGroup,
        textLabel = labelGroup.getAt(i),
        surface = me.chart.surface;
    if (textLabel) {
        if (text != textLabel.attr.text) {
            textLabel.setAttributes(Ext.apply({
                text: text
            }, me.label), true);
            textLabel._bbox = textLabel.getBBox();
        }
    }
    else {
        textLabel = surface.add(Ext.apply({
            group: labelGroup,
            type: 'text',
            x: 0,
            y: 0,
            text: text
        }, me.label));
        surface.renderItem(textLabel);
        textLabel._bbox = textLabel.getBBox();
        // add event handler
        if (me.label.handler && typeof(me.label.handler) == 'function') {
          textLabel.on('click',Ext.pass(me.label.handler,[me, i]));
        }
    }
    if (me.label.rotation) {
        textLabel.setAttributes({
            rotation: {
                degrees: 0
            }
        }, true);
        textLabel._ubbox = textLabel.getBBox();
        textLabel.setAttributes(me.label, true);
    } else {
        textLabel._ubbox = textLabel._bbox;
    }
    return textLabel;
  }
}); 
```

请注意，这是在**ExtJS 4.0.7上完成的**

# php - laravel上传文件时避免异常

> ID：11146158
> 
> 赞同：5
> 
> 时间：2012-06-21T20:23:59.087
> 
> 标签：php, laravel

当我在 laravel 中处理表单时，我的表单中有一个文件上传字段（附件 1），其中可能有也可能没有文件上传。

当我尝试处理页面时，此行会生成异常：

```
Input::upload('attachment1',path('storage').'attachments/'.$name); 
```

这是异常的文本：

```
Message:
Call to a member function move() on a non-object 
```

看来我需要提前检查是否`'attachment1'`有文件，我发现该函数`Input::has_file('attachment1')`应该告诉我是否`'attachment1'`有文件，但即使我提交一个空表单，它也会返回true。

此外，从阅读文档来看，似乎`Input::upload`应该在尝试上传不存在的文件时返回 false，那么为什么它会产生这个异常，我该如何解决呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T10:31:29.060

在尝试上传附件之前，您应该尝试进行一些检查。这对我有用：

```
$file = Input::file('attachment1');
 if (is_array($file) && isset($file['error']) && $file['error'] == 0) {
 Input::upload('attachment1',path('storage').'attachments/'.$name);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T20:46:51.947

无论文件是否上传，PHP`$_FILES`都将在其中包含密钥。`tmp_name`它是作为空字符串发送的，而不是`NULL`. 看来`has_file()`期望`NULL`：

```
public static function has_file($key)
{
    return ! is_null(static::file("{$key}.tmp_name"));
} 
```

要在您的控制器中解决它，您可以尝试：

```
if (array_get(Input::file('attachment1'), 'tmp_name'))
{
    // file uploaded
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T03:48:08.717

在试图弄清楚 Laravel 如何处理 uplaod 和文件时，我学到了一些要点。我希望他们对你有帮助

第一的：

> “消息：在非对象上调用成员函数 move()”

可能会抛出此异常，因为您的文件夹可能没有写入权限。

第二：

您可以在验证规则中验证您的输入，例如

> '附件' => '图像|mime:jpg,gif,png|max:(以千字节为单位)

第三：

我在我的项目中使用扩展的引导程序。他们不喜欢使用“名称”属性。和

```
<input type="file" /> 
```

您可以从此[链接](http://jasny.github.com/bootstrap/javascript.html#fileupload "关联")查看。请向下滚动到选项部分并阅读名称的描述列。因此我基本上明白了，即使输入为空，Laravel 也会返回 true，因为它实际上是帖子的一部分

第四：我想分享我的代码并接受任何建议。我希望他们都能帮助...

```
try
    {

        $comp = new Company();
        $comp->name = newCompanyForm::get('name');
        $comp->save();
        if($comp)
        {
                if(newCompanyForm::has('logo'))
                {

                    $logo = Input::upload('logo', path('public').'company_logos');
                    if($logo)
                    {

                        $comp->logo = URL::base().'lms/company_logos/'.$logo->getfileName();
                        $comp->save();
                    }
                    else
                        throw new \Exception("Logo yüklenirken hata oluştu. Şirket logosuz kayıt edildi.");
                }
                Session::flash('status_success', 'Şirket eklendi.');
                newCompanyForm::forget_input();
                return Redirect::back();
        }
        else
            throw new Exception("Şirket eklenirken hata oluştu. Şirket eklenmedi.");

    }
    catch(\Exception $e)
    {
        $errors->add('lms', $e->getMessage());
        return Redirect::back()->with_errors($errors);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-07T19:25:18.773

最简单的“Laravel”方法是检查输入名称。

```
if (Input::has('attachment1'))
{
    // Do stuff
} 
```

# android - httpUnit 在 JAVA Android 应用程序中解析 HTML 无法解析超类

> ID：11146159
> 
> 赞同：1
> 
> 时间：2012-06-21T20:24:01.183
> 
> 标签：android, httpwebrequest, html-parsing, jsoup

我正在尝试登录网站（使用 POST）并解析一些 HTML。登录有效（使用 jsoup），但是当我尝试解析整个页面时，Inputstream 缓冲区不够大，无法捕获整个页面。

```
public String Test() throws Exception {

    Log.d(TAG, "-->>> STARTING TEST");
    WebConversation wc = new WebConversation();
    WebRequest     req = new GetMethodWebRequest( "http://www.meterware.com/testpage.html" );
    WebResponse   resp = wc.getResponse( req );
    // Log.d(TAG, "Response : " + resp.toString());
    return resp.toString();
} 
```

我收到一个错误：

> 06-21 20:12:52.945: W/dalvikvm(414): 无法解析 Lcom/meterware/httpunit/javascript/ScriptingEngineImpl 的超类；(826)

感谢所有帮助。即使这意味着切换到不同的解析器..（到目前为止，我已经尝试过 jsoup、htmlutil 和 httputil）.. 都有自己的困难。我发现 httpUtil 最后一次更新是在 2008 年（？）。另外，我需要能够在 GET 请求中发送 cookie 的东西。

我的日志：

```
06-21 20:12:52.945: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/javascript/ScriptingEngineImpl; (826)
06-21 20:12:52.945: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/javascript/ScriptingEngineImpl;' failed
06-21 20:12:52.945: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/dom/AbstractDomComponent; (279)
06-21 20:12:52.945: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/dom/AbstractDomComponent;' failed
06-21 20:12:52.955: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/dom/DomWindow; (201)
06-21 20:12:52.955: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/dom/DomWindow;' failed
06-21 20:12:52.955: E/dalvikvm(414): Could not find class 'com.meterware.httpunit.dom.DomWindow', referenced from method com.meterware.httpunit.WebResponse.createDomScriptingHandler
06-21 20:12:52.955: W/dalvikvm(414): VFY: unable to resolve new-instance 211 (Lcom/meterware/httpunit/dom/DomWindow;) in Lcom/meterware/httpunit/WebResponse;
06-21 20:12:52.955: D/dalvikvm(414): VFY: replacing opcode 0x22 at 0x0006
06-21 20:12:52.989: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/javascript/ScriptingEngineImpl; (826)
06-21 20:12:52.989: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/javascript/ScriptingEngineImpl;' failed
06-21 20:12:53.006: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/dom/AbstractDomComponent; (279)
06-21 20:12:53.006: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/dom/AbstractDomComponent;' failed
06-21 20:12:53.015: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/dom/NodeImpl; (201)
06-21 20:12:53.025: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/dom/NodeImpl;' failed
06-21 20:12:53.025: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/dom/DocumentImpl; (256)
06-21 20:12:53.035: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/dom/DocumentImpl;' failed
06-21 20:12:53.045: W/dalvikvm(414): Unable to resolve superclass of Lcom/meterware/httpunit/dom/HTMLDocumentImpl; (207)
06-21 20:12:53.045: W/dalvikvm(414): Link of class 'Lcom/meterware/httpunit/dom/HTMLDocumentImpl;' failed
06-21 20:12:53.045: E/dalvikvm(414): Could not find class 'com.meterware.httpunit.dom.HTMLDocumentImpl', referenced from method com.meterware.httpunit.WebResponse.createDomScriptingHandler
06-21 20:12:53.045: W/dalvikvm(414): VFY: unable to resolve check-cast 224 (Lcom/meterware/httpunit/dom/HTMLDocumentImpl;) in Lcom/meterware/httpunit/WebResponse; 
```

/edit ：我在控制台窗口中找到了这个。它给了我重新编译的线索。所以我获取了 httpUnit 的源代码并发出了一个 'jar cf * *'.. 但是当我将该 jar 添加到我的项目中时，我无法访问它的方法？！

```
[2012-06-21 22:12:06 - Mobile] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(com.meterware.httpunit.Button$1) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class. 
```

我尝试重新编译 .jar，但没有成功。也许我在那个过程中做错了什么，这会是解决方案吗？

# perl - Perl, GridFS, and storing/recovering .docx files

> ID：11146172
> 
> 赞同：1
> 
> 时间：2012-06-21T20:24:32.970
> 
> 标签：perl, mongodb, gridfs

I'm using perl and MongoDB::GridFS (along with other mongo modules) to store and retrieve files. It works fine with .txt, but I want to store and retrieve .docx. Here is my code:

```
#!usr/bin/perl

use MongoDB::GridFS;
use MongoDB;
use MongoDB::Database;
use MongoDB::OID;

my $conn = new MongoDB::Connection; 
my $db   = $conn->test; #name of our local db is test...default of mongoDB
my $coll = $db->err0; #err0 is the name of the collection
my $grid = $db->get_gridfs;
my $fh = IO::File->new("wordtoyamutha.docx", "r");
$grid->insert($fh, {"filename" => "test"});

my $outfile = IO::File->new("wordtoyamutha.docx", "w");
my $file = $grid->find_one({"filename" => "test"});;
$file->print($outfile); 
```

I first created a .docx called "wordtoyamutha.docx", then ran the above code with the last three lines commented out. It ran well and a new entry appeared in my MongoDB fs.files. I then deleted the .docx ran the code with all the "storing" code commented out- to be explicit these lines were commented out from the above:

```
my $fh = IO::File->new("wordtoyamutha.docx", "r");
$grid->insert($fh, {"filename" => "test"}); 
```

A docx appeared with the title wordtoyamutha...but when i tried to open it Word complained that it was rendered unreadable via corruption.

I don't know of any other way to retrieve files...and this is all the perl MongoDB::GridFS suggests to do...what is the trick here?

The exact error from Word appears in a dailog and says "The file wordtoyamutha cannot be opened because there are problems with the contents".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:01:25.930

And here is the (fully functional!) results of the help I was given:

```
#!usr/bin/perl
#Using Strawberry Perl and on Windows 7 box

use strict;
use warnings;
use MongoDB::GridFS;
use MongoDB;
use MongoDB::Database;
use MongoDB::OID;

my $conn = new MongoDB::Connection; 
my $db   = $conn->test; #name of our local db is test...default of mongoDB

my $grid = $db->get_gridfs;
my $fh = IO::File->new("cool.docx", "r");
$fh->binmode();
$grid->insert($fh, {"filename" => "docx"});

my $outfile = IO::File->new("return.docx", "w");
$outfile->binmode();
my $file = $grid->find_one({"filename" => "docx"});
$file->print($outfile); 
```

Again, this is not a great script - things are hardcoded here. This pulls a docx file titled "cool" from the **same directory as the perl script**, stores it in my db "test" and then retrieves it **again in the same directory as the perl script** as return.docx. AKA return.docx will appear in the directory and be an exact copy! This is not very useful alone - but obviously if we can do this it implies we can do much more.

=======WHAT DO I NEED TO CHANGE TO MAKE THIS SCRIPT WORK FOR ME?========

The parameter name "docx" is changeable - it is how the file will be addressed in the GridFS database. Then obviously the filename is changeable. Future users will probably have to change the "my $db" line as well to

```
my $db   = $conn->name_of_your_DB; 
```

If you don't know what the name of your DB is, go into the Mongo shell, type

```
show dbs 
```

it gives a list of dbs. Now choose one of the listed dbs - we will call it db_you_want_to_use. Now type

```
use db_you_want_to_use 
```

And change that $db line in the script to point to the same thing you just typed, AKA:

```
my $db   = $conn->db_you_want_to_use; 
```

Upon inserting a file with GridFS it creates a *collection* called fs.files. Use

```
db.fs.files.find() 
```

To see the entries in your DB - AKA to check if things were properly inserted.

# node.js - calipso.js 和 nodejitsu

> ID：11146176
> 
> 赞同：0
> 
> 时间：2012-06-21T20:24:48.990
> 
> 标签：node.js, nodejitsu

我正在尝试使用 nodejitsu mongo 数据库设置我的 calipso 站点。

在**第 1 步：配置 MongoDB**我从 jitsu 数据库列表中复制了*Connection url*并将其放入*MongoDB URI*字段中。一切正常，就像**创建管理员用户**步骤一样。但是在第三步（**添加功能**）中，单击*Save Configuration and Install*按钮（使用默认设置）后，我有：

> 哇塞。我们将尝试锁定它。
> 
> 服务器上的某些东西不太正常。
> 
> (500)

在页面上。

和

> 不明确的

在控制台中。

毕竟，当我尝试使用本地 mongo 数据库时 - 一切正常。

有什么建议我做错了什么以及如何在 nodejitsu 主机上使用 calipso 网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:06:19.723

您可能只是将 mongodb 配置错误。运行时看到什么日志`jitsu logs app`？也许它们包含有关您所看到的错误的更多详细信息。

# android - 使用 uri 获取其他应用程序图标

> ID：11146179
> 
> 赞同：2
> 
> 时间：2012-06-21T20:25:03.237
> 
> 标签：android, icons, android-appwidget

我有一个 appwidget，我想在上面显示其他已安装应用程序的启动器图标。我可以使用以下两个代码中的任何一个来获取图标

```
pkgInfo.applicationInfo.loadIcon(context.getPackageManager()); 
```

或者

```
context.getPackageManager().getApplicationIcon(pkgInfo.packageName); 
```

[PackageInfo](http://developer.android.com/reference/android/content/pm/PackageInfo.html)`pkgInfo`的实例在哪里

除了几个应用程序没有显示它们的图标并且日志中没有打印错误之外，一切都运行良好。根据[此处](https://stackoverflow.com/a/7121959/829617)的答案，我们还可以使用 URI 来获取可绘制对象。

我的问题是如果`android.resource://[package]/[res type]/[res name]`是 URI 那么如何获取`[res name]`？以及如何从此 URI 中获取其他应用程序图标的可绘制对象？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T13:10:48.363

如果您不知道资源名称，您还可以通过资源 id 访问资源：

```
android.resource://[package]/[res_id] 
```

应用程序图标的资源 id 在应用程序中可用`ApplicationInfo`：

```
ApplicationInfo appInfo = pm.getApplicationInfo(packageName, 0);
if(appInfo.icon != 0) {
    Uri uri = Uri.parse("android.resource://" + packageName + "/" + appInfo.icon);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:30:22.160

看起来问题出在转换`Drawable`为`Bitmap`. 需要进行转换，因为`RemoteViews`没有`setImageDrawable`可以与`ImageView`. 进行以下更改可以解决问题。

**前**

`Bitmap bitmap = ((BitmapDrawable) drawable).getBitmap();`

**后**

```
Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap); 
drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
drawable.draw(canvas); 
```

# javascript - JS 对象返回但 responseText 不起作用

> ID：11146180
> 
> 赞同：1
> 
> 时间：2012-06-21T20:25:08.827
> 
> 标签：javascript, jquery, ajax

因此，我发布了对仅返回字符串的方法的调用，并且我的发布请求在 responseText 字段中返回带有字符串的对象，但`d.responseText`返回“未定义”。有谁知道为什么？我以为是因为它是 AJAX 但为什么 var d 具有正确的值？

```
var d = $.post("/home/status_update", function(data) {return data});
console.log(d);
console.log(d.responseText); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:26:36.783

`$.post`返回一个 promise 对象，尝试使用它。

```
var d = $.post("/home/status_update");
d.done(function(data) {
    console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T20:40:54.827

这是我在 AJAX 请求中发现的最常见的错误之一：许多人没有意识到 AJAX 是 *A* 同步的，你不能指望你的`d`变量会被重视，因为*代码会继续执行*而不管完成 AJAX 请求。

**只有**在请求-响应往返完成后，您才能使用检索到的值。

您需要做的是实际*使用**内部*的返回值`function(data)`，因为您保证它只会在实际检索到该值*之后执行。*

另一个用户通过绑定事件获得相同的东西，该`done`事件在 AJAX 请求/响应完成时触发。这是以稍微不同的方式编码的同一件事。简写是：

```
var d = $.post("/home/status_update", function(data) {console.log(data);}); 
```

* * *

请记住，作为一个通用的应用程序架构，对于 AJAX 请求，您不能期望使用单个函数，您将定义在每次 AJAX 完成时操纵您的响应的函数。尝试以更“碎片化”的方式思考您的应用程序。

# android - 将文件从手机上传到android中的Dropbox

> ID：11146186
> 
> 赞同：3
> 
> 时间：2012-06-21T20:25:20.833
> 
> 标签：android, dropbox, dropbox-api

我是 Android 开发的新手。我正在为我的研究小组编写一个应用程序。我想将用安卓手机编写的数据（.txt）文件上传到我们的研究组保管箱。有人知道有关将文件上传到保管箱的任何参考吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:29:44.027

试试这个方法。我认为它对你有帮助。

[链接](http://www.codeproject.com/Articles/385431/Android-RESTful-OAuth-upload-file-to-Dropbox) [链接](https://stackoverflow.com/questions/9819829/using-dropbox-api-to-upload-a-file-with-android)

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:28:23.293

你在这里： [https ://www.dropbox.com/developers/reference/sdk](https://www.dropbox.com/developers/reference/sdk)

# python - Python TypeError：格式字符串的参数不足

> ID：11146190
> 
> 赞同：150
> 
> 时间：2012-06-21T20:25:24.833
> 
> 标签：python, string, format, typeerror

这是输出。我相信这些是 utf-8 字符串......其中一些可以是 NoneType 但它会立即失败，在这样的字符串之前......

```
instr = "'%s', '%s', '%d', '%s', '%s', '%s', '%s'" % softname, procversion, int(percent), exe, description, company, procurl 
```

TypeError：格式字符串的参数不足

7换7吗？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2012-06-21T20:27:31.243

您需要将格式参数放入一个元组（添加括号）：

```
instr = "'%s', '%s', '%d', '%s', '%s', '%s', '%s'" % (softname, procversion, int(percent), exe, description, company, procurl) 
```

您目前拥有的相当于以下内容：

```
intstr = ("'%s', '%s', '%d', '%s', '%s', '%s', '%s'" % softname), procversion, int(percent), exe, description, company, procurl 
```

例子：

```
>>> "%s %s" % 'hello', 'world'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not enough arguments for format string
>>> "%s %s" % ('hello', 'world')
'hello world' 
```

* * *

## 回答 #2

> 赞同：188
> 
> 时间：2012-06-21T20:36:18.223

请注意，`%`格式化字符串的语法已经过时了。如果你的 Python 版本支持它，你应该写：

```
instr = "'{0}', '{1}', '{2}', '{3}', '{4}', '{5}', '{6}'".format(softname, procversion, int(percent), exe, description, company, procurl) 
```

这也解决了您碰巧遇到的错误。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-07-06T18:33:01.327

`%`在我的格式字符串中用作百分比字符时，我遇到了同样的错误。解决这个问题的方法是加倍`%%`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-04T14:49:57.537

我有同样的问题，我出于特定原因使用*原​​始查询，这是在 TIME_FORMAT 函数中添加双引号。*

```
User.objects.raw(
            f'SELECT f1,f2,TIME_FORMAT(SEC_TO_TIME(SUM(TIME_TO_SEC(end_time) - TIME_TO_SEC(start_time))),"%%H:%%i") AS log FROM users GROUP BY start_dt') 
```

# sql - 对多个数据库使用数据集市

> ID：11146193
> 
> 赞同：1
> 
> 时间：2012-06-21T20:25:36.763
> 
> 标签：sql, ssis, business-intelligence, datamart

我目前正在开展一个使用 ERP 数据库中的 SSIS 2008 r2 构建数据集市的项目。

这些数据集市必须在具有相同结构（相同表/字段）的每个数据库中使用。

问题是源表名会根据连接的数据库而变化。但是表结构（元数据）在这些环境之间不会改变。

例如，数据库 1*项目*表名是**company_name1$item** 数据库 2*项目*表名是**company_name2$item**

我正在寻找一种使数据集市可用于两个数据库的解决方案。

我做了一些研究；我发现我的解决方案可以像图片中解释的那样 ![在此处输入图像描述](../Images/c2a4ec233a76bac33d50134b46eb4804.png)

正如您在图中所示，构建数据集市需要遵循以下步骤：

*   要构建数据集市，您将提取信息并通过 ETL 处理它们以获得所需的数据集市。此过程需要应用于所有数据库

*   此过程可以通过 erp 数据库中名为
    object 的表来完成。该表包含有关数据库
    表的所有类型的信息，但最有用的字段是表 id、表名和公司名称

![在此处输入图像描述](../Images/97ff42ddf80271cf2d925da6e530f451.png)

现在，我想使用这个表 id，Name Company 来选择合适的表，而不必根据表名选择数据，但对象表和其他表之间没有链接，所以你需要创建某种代码或能够创建链接的东西。 *简而言之，当我想将包用于数据库时，我插入的是公司名称，并且将运行包来填充我的数据集市。*

正如一些人建议的那样，我应该使用这种类型的 sql 过程 USE YourDataBaseName;

```
CREATE PROCEDURE GetMyData
    @aCompany NVARCHAR(50) = NULL,
    @tbl_ID INT = 0
AS
    SET NOCOUNT ON;
    DECLARE @tableName NVARCHAR(50)
    DECLARE @aQuery NVARCHAR(4000) 

    SELECT @tableName = [Name]
    FROM [object]
    WHERE [Company Name] = @aCompany AND [ID] = @tbl_ID

    SET @aQuery = 'SELECT * FROM ' + @tableName
    EXEC(@aQuery)
GO 
```

另一个也很有趣的是**，SSIS 允许在源和目标中使用变量名。我只需要提供使该值发生变化的机制。也许那是一个包含数据流或运行时参数集的 foreach 枚举器。** 两个建议的解决方案都很棒，但仍然不清楚如何做到这一点，我希望现在我已经解释了我的问题，我会得到一个更具体的答案

# python - 从 QTableView 中提取最后一列数据

> ID：11146194
> 
> 赞同：0
> 
> 时间：2012-06-21T20:25:37.870
> 
> 标签：python, pyqt

从[this question](https://stackoverflow.com/questions/8328041/extract-data-from-qtableview)的回答中，我找到了访问QTableView中所选行的第一列的方法。但是我如何访问最后一列，而不对列号进行硬编码？

```
 itmIndex = self.viewInQuestion.currentIndex()
        id = itmIndex.sibling(itmIndex.row(), -1) 
```

不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:28:41.963

以下方法有效：

```
 itmIndex = self.viewInQuestion.currentIndex()
        id = itmIndex.sibling(itmIndex.row(), self.modelForView.columnCount() - 1)
        itmCt = self.modelForView.data(id).toFloat() 
```

# silverlight - 舍入任意内容控件

> ID：11146197
> 
> 赞同：0
> 
> 时间：2012-06-21T20:25:50.100
> 
> 标签：silverlight, esri

我有一个 Esri ArcGis 地图控件，我想围绕它的边缘进行四舍五入。我也在使用 Prism4.0/MEF 和 SL4。

我试图将其放置在边框中，但这不起作用（Esri 控件已加载到 MapRegion 中，在另一个模块中）：

```
<Border Grid.Row="2"
                Margin="2"
                CornerRadius="25">
            <ContentControl
                prism:RegionManager.RegionName="MapRegion"
                VerticalContentAlignment="Stretch"
                HorizontalContentAlignment="Stretch">
            </ContentControl>
        </Border> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:59:23.537

**更新**：看起来这是不可能的。这实际上并不是地图本身的错误，但它确实是。地图使用网格“RootElement”内的画布。此 Canvas 包含地图的图像。使用 Canvas 时，它不尊重给定的边界。您可以使用以下 XAML 重现该错误

```
 <Border BorderBrush="Red" BorderThickness="2" CornerRadius="25">
            <Grid>
                <Grid>
                    <Canvas>
                        <Image Source="/Images/MyPicture.png"/>
                    </Canvas>
                </Grid>
            </Grid>
        </Border> 
```

最好的方法是为地图设置明确的样式。使用这种样式，任何使用的地图都将具有圆角

```
<Style TargetType="esri:Map">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="esri:Map">
                <Border CornerRadius="25" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                    <Grid>
                        <Grid x:Name="RootElement" Height="Auto" Width="Auto"/>
                        <Rectangle x:Name="ZoomBox" Fill="#55FFFFFF" Stroke="Red" StrokeThickness="2" Visibility="Collapsed"/>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# c# - 使用 C#.net 程序通过 pass 登录

> ID：11146202
> 
> 赞同：-2
> 
> 时间：2012-06-21T20:26:15.130
> 
> 标签：c#, http, authentication, post

我的目标是向客户提供一个链接，当客户单击该链接时，他/她应该使用他们登录的 AD 凭据自动登录到这个新站点（不受我们公司控制的外部网站）。仅供参考，登录的凭据与此外部网站上的登录名匹配，并且所有人的密码都相同。所以，我可以安全地在我的程序中对密码进行硬编码。

现在我在想的是编写一个 C# 程序，该程序将完成外部网站的身份验证过程并返回登录后收到的页面。

我的分析：-

1）当我第一次访问该页面`http://website2/default.aspx`时，它会返回一个包含用户名、密码和提交按钮的登录页面。

我还注意到它正在返回一个会话 ID。 ***ASP.NET_SessionId=i0j3d155mxxkuyr3fedp00yf***。

2）稍后，当我输入用户名、密码并单击提交按钮时。它正在创建一个查询字符串，例如 ***user=adf&password=adsf&buttonName=Login+%21***

我认为它正在使用 HTTP Post 调用。

你能帮我这个吗！！！！如果可能，请为我提供一个代码，我可以参考并进行更改以实现这一目标.....非常感谢您的关注....任何帮助表示赞赏.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:58:47.817

您将无法执行此操作，因为无法从 AD 中检索密码。唯一可能的方法是，如果外部站点与您的站点之间存在信任关系，并且听起来情况并非如此（如果我错了，请纠正我！）。

您需要让用户手动输入身份验证并将该信息编组到外部站点，这实际上并不比让用户直接对外部站点进行身份验证更好。

附带说明一下，您可以在程序中安全地硬编码密码的情况很少见。只是在说。此外，如果你得到一个可以在浏览器地址栏中看到的查询字符串，那么它不是使用 POST，而是使用 GET。

# python - 如何根据另一个列表的值过滤列表

> ID：11146203
> 
> 赞同：3
> 
> 时间：2012-06-21T20:26:15.830
> 
> 标签：python

例如，我有两个相同长度的列表：

```
a = [[1,2],[2,2],[3,3],[4,2],[5,6]]
b = [1,2,2,3,1] 
```

我想要一个这样的功能

```
func(a,b,1) = [[1,2],[5,6]]
func(a,b,2) = [[2,2],[3,3]]
func(b,b,2) = [2,2] 
```

该函数所做的是返回 a 的元素列表，列表 b 中相同索引的对应元素等于第三个参数。

在 Matlab 中，我将做一些简单的事情，例如 a(b==1)、a(b==2)、b(b==2)。在 Python 中实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T20:32:18.210

如果你想要*非常*类似于 Matlab 的功能，你可以使用 numpy：

```
>>> import numpy
>>> a = [[1,2],[2,2],[3,3],[4,2],[5,6]]
>>> b = [1,2,2,3,1]
>>> a = numpy.array(a)
>>> b = numpy.array(b)
>>> a[b==1]
array([[1, 2],
       [5, 6]])
>>> a[b==2]
array([[2, 2],
       [3, 3]])
>>> b[b==2]
array([2, 2]) 
```

如果做不到这一点，我可能会简单地使用列表理解：

```
>>> [i for i,j in zip(a,b) if j == 1]
[[1, 2], [5, 6]]
>>> [i for i,j in zip(a,b) if j == 2]
[[2, 2], [3, 3]]
>>> [i for i,j in zip(b,b) if j == 2]
[2, 2] 
```

将它包装在一个函数中是微不足道的：

```
>>> def func(a,b,x):
...     return [i for i,j in zip(a,b) if j == x]
... 
>>> func(a,b,2)
[[2, 2], [3, 3]]
>>> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T20:35:21.513

我将[`itertools.compress()`](http://docs.python.org/library/itertools.html#itertools.compress)与[生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)一起使用来执行此操作：

```
def func(a, b, c):
    return itertools.compress(a, (x == c for x in b)) 
```

请注意，这将返回一个生成器。如果您需要列表，请将其包装在`list()`调用中。

```
>>> import itertools
>>> def func(a, b, c):
...     return list(itertools.compress(a, (x == c for x in b)))
... 
>>> a = [[1,2],[2,2],[3,3],[4,2],[5,6]]
>>> b = [1,2,2,3,1]
>>> func(a, b, 1)
[[1, 2], [5, 6]]
>>> func(a, b, 2)
[[2, 2], [3, 3]]
>>> func(b, b, 2)
[2, 2] 
```

还值得注意的是，这应该是好的和快速的——`itertools`被设计成一个快速的模块。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T20:31:14.877

这首先找到`b`等于目标值 ( `[i for i, x in enumerate(b) if x==c]`) 的索引，然后使用这些索引来获取您想要的元素`a`：

```
def func(a,b,c):
    return [a[j] for j in [i for i, x in enumerate(b) if x==c]]

>>> func(a,b,1)
[[1, 2], [5, 6]]
>>> func(a,b,2)
[[2, 2], [3, 3]]
>>> func(b,b,2)
[2, 2] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T20:53:27.410

```
def func(a,b,n):
   return [a[i] for i,x in enumerate(b) if x==n]

a = [[1,2],[2,2],[3,3],[4,2],[5,6]]
b = [1,2,2,3,1]
print(func(a,b,1)) #[[1, 2], [5, 6]]
print(func(a,b,2)) #[[2, 2], [3, 3]]
print(func(b,b,2)) #[2, 2] 
```

# sas - 使用 SAS 检测大于某个值的 b/w 年龄差异

> ID：11146204
> 
> 赞同：0
> 
> 时间：2012-06-21T20:26:16.433
> 
> 标签：sas

我正在尝试检测包含第一年龄和第二年龄之间的差异大于 5 的组。例如，如果我有以下数据，年龄之间的差异`grp=1`是 39，所以我想在单独的数据集中输出该组. grp 4 也是如此。

```
id  grp age sex
1   1   60  M
2   1   21  M
3   2   30  M
4   2   25  F
5   3   45  F
6   3   30  F
7   3   18  M
8   4   32  M
9   4   18  M
10  4   16  M 
```

我最初的想法是对它们进行排序`grp`，然后使用类似`if first.grp then do;`. 但是我不知道如何按组获得第一年龄和第二年龄之间的绝对值，或者实际上我不知道应该如何开始。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:05:41.997

这是我认为可行的一种方法。

```
data have;
 input id $ grp $ age sex $;
 datalines;
1   1   60  M
2   1   21  M
3   2   30  M
4   2   25  F
5   3   45  F
6   3   30  F
7   3   18  M
8   4   32  M
9   4   18  M
10  4   16  M
;

proc sort data=have ;
 by grp descending age;
run;

data temp(keep=grp);
 retain old;
 set have;
 by grp descending age;
 if first.grp then old=age;
 if last.grp then do;
  diff=old-age;
  if diff>5 then output ;
 end;
run;

Data want;
 merge temp(in=a) have(in=b);
 by grp ;
 if a and b;
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:50:15.603

我会使用 PROC TRANSPOSE，以便可以轻松比较每组中的值。例如：

```
data groups1;

 input id $ grp age sex $;
 datalines;
1   1   60  M
2   1   21  M
3   2   30  M
4   2   25  F
5   3   45  F
6   3   30  F
7   3   18  M
8   4   32  M
9   4   18  M
10  4   16  M
;
run;

proc sort data=groups1;
  by grp; /* This maintains age order */
run;

proc transpose data=groups1 out=groups2;
  by grp;
  var age;
run; 
```

使用转置后的数据，您可以进行任何您喜欢的比较（我无法从您的问题中看出您到底想要什么，所以我只比较前两个年龄）：

```
/* With all ages of a particular group in a single row, it is easy to compare */
data outgroups1(keep=grp);
  set groups2;
  if abs(col1-col2)>5 then output;
run; 
```

在这种情况下，这将是我为满足任何应用条件的每个组创建单独数据集的首选方法（动态生成和包含代码）：

```
/* A separate data set per GRP value in OUTGROUPS1 */
filename dynacode catalog "work.dynacode.mycode.source";
data _null_;
  set outgroups1;
  file dynacode;
  put "data grp" grp ";";
  put "  set groups1(where=(grp=" grp "));";
  put "run;" /;
run;

%inc dynacode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:37:29.013

如果您只关注 1 代和 2 代之间的差异，那么下面的代码是提取这些的一种相当简单的方法。它读取数据集以识别组，然后使用直接访问方法 POINT= 来提取相关记录。我设置了一个额外的条件， grp=lag(grp) 以防万一您有任何只有 1 条记录的组。

```
data want;
set have;
by grp;
if first.grp then do;
    num_grp=0;
    outflag=0;
    end;
outflag+ifn(lag(first.grp)=1 and grp=lag(grp) and abs(dif(age))>5,1,0) /* set flag to determine if group meets criteria */;
if not first.grp then num_grp+1; /* count number of records in group */
if last.grp and outflag=1 then do i=_n_-num_grp to _n_;
    set have point=i; /* extract required group records */
    drop num_grp outflag;
    output;
    end;
run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:03:46.437

这是一种 SQL 方法（使用 CarolinaJay 的代码创建数据集）：

```
data groups1;

 input id grp age sex $;
 datalines;
1   1   60  M
2   1   21  M
3   2   30  M
4   2   25  F
5   3   45  F
6   3   30  F
7   3   18  M
8   4   32  M
9   4   18  M
10  4   16  M
;
run;

proc sql noprint;
  create table xx as
  select a.*
  from groups1 a
  where grp in (select b.grp
                from groups1 b
                join groups1 c  on c.id = b.id+1
                               and c.grp = b.grp
                               and abs(c.age - b.age) > 5
                left join groups1 d  on d.id = b.id-1
                                    and d.grp = b.grp
                where d.id eq .
               )
  ;   
quit; 
```

C 上的连接查找同一组中后续记录的绝对值 > 5 的所有匹配项。 D 上的连接（和 where 子句）确保我们仅在记录是第一个时才考虑 C 连接的结果记录在群里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T03:24:45.940

```
data have;
input id $ grp $ age sex $;
datalines;
1   1   60  M
2   1   21  M
3   2   30  M
4   2   25  F
5   3   45  F
6   3   30  F
7   3   18  M
8   4   32  M
9   4   18  M
10  4   16  M
;

data want;
  do i = 1 by 1 until(last.grp);
    set have;
by grp notsorted;
if first.grp then cnt = 0;
cnt + 1;
    if cnt = 1 then age1 = age;
if cnt = 2 then age2 = age;
diff = sum( age1, -age2 );
  end;
 do until(last.grp);
     set have;
 by grp;
 if diff > 5 then output;
 end;
 run; 
```

# ruby-on-rails - rails respond_to json 格式包含两个（或更多）模型及其一些虚拟属性？

> ID：11146206
> 
> 赞同：0
> 
> 时间：2012-06-21T20:26:33.713
> 
> 标签：ruby-on-rails, respond-to

在我的控制器操作之一中，我将一个项目分配给用户，并且我想用一些关于用户的信息和一些关于项目的信息来响应对它的 json 请求。目前，我可以看到他们所有的数据库属性，如下所示：

```
 # ruby code...
    # current_user.first_name #=> "Nik" db attr
    # current_user.full       #=> "Nik So" virtual attr
    # @project.name           #=> "buy something"

    format.json { render json: {user:current_user), assignable:@project}} 
```

所以在我的萤火虫控制台中，我可以在我的控制台中看到响应对象

```
 // JS code
    success: function(r){window.test = r}

    //in console
    test.user.first_name //"Nik"
    test.assignable.name //"buy something"
    test.user.full       //undefined 
```

我可以在 JSON 响应中与模型一起返回虚拟属性吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:43:23.977

明白了！，这是一个解决方案：

```
 format.json { render json: {user:current_user.as_json(methods:[:full]), assignable:@project}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:24:09.247

这对我很有效：

```
SomeController
  respond_to :json

def some_action
  @response = { :user => current_user, :assignable => @project )
  respond_with @response
end 
```

# python - nginx + uwsgi + flask - 禁用自定义错误页面

> ID：11146210
> 
> 赞同：10
> 
> 时间：2012-06-21T20:26:55.160
> 
> 标签：python, nginx, flask, uwsgi, werkzeug

是否可以禁用 nginx 的自定义错误页面 - 如果我可以这样称呼它们 - 以显示我的框架的异常页面？

我真的看不到我的 werkzeug 调试器工具以 html 呈现...

**更新**

好的，我必须制作一个非常简单的烧瓶应用程序才能工作，我将发布这些位：

**/home/my_user/.virtualenvs/nginx-test/etc/nginx.conf**

```
worker_processes 1;
events { worker_connections 1024; }
http {
        server {
                listen 5000;
                server_name localhost;
                access_log /home/my_user/.virtualenvs/nginx-test/lib/nginx/access.log;
                error_log /home/my_user/.virtualenvs/nginx-test/lib/nginx/error.log;

                location / {
                        include uwsgi_params;
                        uwsgi_pass unix:/tmp/uwsgi.sock;
                }
        }
} 
```

**/home/my_user/dev/nginx_test/___init___.py**

```
from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    raise Exception()

if __name__ == '__main__':
    app.run('0.0.0.0', debug=True) 
```

PYTHONPATH 环境变量：

```
$ echo $PYTHONPATH
/home/my_user/dev/ 
```

我如何运行 uwsgi：

```
$ uwsgi -s /tmp/uwsgi.sock --module nginx_test --callable app 
```

我如何运行 nginx：

```
$ nginx -c ~/.virtualenvs/nginx-test/etc/nginx.conf -p ~/.virtualenvs/nginx-test/lib/nginx/ 
```

如果我点击根页面：

![服务器错误](../Images/10e5a0818d4f1bc8a50ec8c28b85a763.png)

如果我像这样手动运行 nginx：

```
python /home/my_user/dev/nginx_test/___init___.py 
```

相反，我会看到，以及我想看到的：

![在此处输入图像描述](../Images/8d2d9335b885fee4a4ce858978e4b4f5.png)

当然，当我没有引发异常时，我确保它会起作用，而是在我的 index() 函数中返回“Hello World”。

这被称为 .NET 中的自定义错误页面。我想禁用它，让 nginx/uwsgi 将调试器生成的 html 直接传递给浏览器，而不是内部服务器错误的东西。

**更新 2**

现在，如果我通过以下方式更改我的烧瓶应用程序以启用调试模式：

**/home/my_user/dev/nginx_test/___init___.py**

```
from flask import Flask

app = Flask(__name__)
app.config.update(DEBUG=True)
@app.route('/')
def index():
    raise Exception()

if __name__ == '__main__':
    app.run('0.0.0.0', debug=True) 
```

然后我得到502错误。

但是，如果我不提出异常：

**/home/my_user/dev/nginx_test/___init___.py**

```
from flask import Flask

app = Flask(__name__)
app.config.update(DEBUG=True)
@app.route('/')
def index():
    return 'Hello World'

if __name__ == '__main__':
    app.run('0.0.0.0', debug=True) 
```

当我点击页面（[http://localhost:5000](http://localhost:5000)）时，我的浏览器上会出现“Hello World”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T18:59:23.153

这个“内部服务器错误”页面不是来自 nginx，而是来自 Flask。它**在调试模式关闭时**这样做。

uwsgi 将您的代码作为模块导入，而不是作为脚本运行。`__name__ == '__main__'`为 False 且不执行 if 语句。尝试在 if 之外设置调试模式：

```
app = Flask(__name__)
app.debug = True 
```

但是，强烈建议**不要**在公共 Internet 上的服务器上离开调试模式，因为用户可以让服务器运行任何代码。这是一个严重的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:00:31.300

Simon Sapin 真的给了你正确的答案。您需要在 Flask 中启用调试。Nginx 不会返回任何自定义错误页面，除非您明确配置它这样做。

如果您使用以下代码，您将看到来自烧瓶的调试消息，通过 Nginx 代理。

```
from flask import Flask

app = Flask(__name__)
app.debug = True

@app.route('/')
def index():
    raise Exception() 
```

根据您的更新 2。您看到的是 502（错误网关），因为 Flask 根本没有返回任何响应，或者 Nginx 不理解的响应。502 不是 Nginx 的问题。这意味着无论 Nginx 试图谈论什么（在这种情况下是你的烧瓶应用程序）都无法正常工作。

然而，在许多方面你不应该这样做。只有在本地开发机器上运行烧瓶时才应启用调试模式。`if __name__ == "__main__":`无论如何，这就是这条线的重点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:30:35.633

用于[`Flask#errorhandler`](http://flask.pocoo.org/docs/api/#flask.Flask.register_error_handler)在烧瓶中注册您自己的错误处理程序。例如，要替换 404，您可以执行以下操作：

```
app = Flask()

@app.errorhandler(404)
def handel_404(error):
    return render_template('404.html') 
```

# jsp - jsp访问spring mvc资源

> ID：11146212
> 
> 赞同：1
> 
> 时间：2012-06-21T20:26:57.220
> 
> 标签：jsp, spring-mvc, resources

我花了最后几个小时试图弄清楚如何从 Spring mvc Web 应用程序中的 jsp 访问静态资源。

这是我的 bean 配置文件中的一部分：

```
<mvc:resources mapping="/images/**" location="/images/" />
<mvc:resources mapping="/css/**" location="/css/" /> 
```

现在在第一个 jsp 页面中，我的 css 文件`/css/style.css`可以正常工作，如下所示：

```
<link rel="stylesheet" href="css/style.css" type="text/css" /> 
```

但在第二个 jsp 页面中，我无法访问位于以下位置的此图像`/images/logo.gif`：

```
<img src="images/logo.gif" alt="anotherimage" /> 
```

有人可以解释一下`<mvc:ressources />`jsp 的工作原理吗？

编辑：这是我的上下文

```
<?xml version="1.0" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
            http://www.springframework.org/schema/aop 
            http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean name="viewResolver" 
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
        <property name="exposeContextBeansAsAttributes" value="true" />
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName"    value="com.mysql.jdbc.Driver" />
        <property name="url"                value="jdbc:mysql://localhost/test" />
        <property name="username"           value="root" />
        <property name="password"           value="" />
    </bean>

    <bean id="sessionFactory"   class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="mmapp.domain" />
        <property name="hibernateProperties">
            <value>
                hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect
            </value>
        </property>
    </bean>

    <bean id="transactionManager"     class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
    <bean id="jdbcTemplate"     class="org.springframework.jdbc.core.simple.SimpleJdbcTemplate">
        <constructor-arg ref="dataSource" />
    </bean>

    <bean id="simpledata" class="mmapp.util.SimpleDataProvider" />

    <tx:annotation-driven transaction-manager="transactionManager" />
    <context:annotation-config />
    <context:component-scan base-package="mmapp" />

    <mvc:default-servlet-handler/>
    <mvc:resources mapping="/images/**" location="/images/" /> 
</beans> 
```

和我的 web.xml

```
<?xml version="1.0" ?>

<web-app version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:shemaLocation="http://java.sun.com/xml/ns/j2ee
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <servlet>
        <servlet-name>mmapp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>mmapp</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:04:10.030

访问资源最安全的方法是使用 jstl 核心库。至少，您可以确保在任何上下文中都生成了正确的 url。将以下代码行添加到您的 jsp 文件中：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

并将 img 标签更改为使用 c:url 标签：

```
<img src="<c:url val="/images/logo.gif" />" alt="anotherimage" /> 
```

进行此更改后，确保您的 src 属性看起来不错。您还必须将 jstl 库添加到您的项目中（这可能是一个好主意，因为它非常标准）。据我所知，您的 mvc:resources 映射看起来不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:33:51.590

在这之后

```
<mvc:default-servlet-handler/>
<mvc:resources mapping="/images/**" location="/images/" />
<mvc:resources mapping="/css/**" location="/css/" /> 
```

获取您的 css/图像：

```
<link rel="stylesheet" href="${pageContext.request.contextPath}/css/style.css" type="text/css" />
<img src="${pageContext.request.contextPath}/images/logo.gif" alt="anotherimage" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T01:35:00.320

我不知道这是否有意义，但这是我解决这个问题的方法：

首先我的控制器看起来像：

```
@Controller
@RequestMapping(value="/reports")
public class ReportsController {

    @RequestMapping(value = "/reporting", method = RequestMethod.GET)
    public String onSubmit() {
        return "home" ;
    }
} 
```

使用上面的所有配置列表，我只需将我的 home.jsp 中的 img 标签从 更改`<img src="images/logo.gif" />`为`<img src="../images/logo.gif" />`，并且一切正常，如果我`value = "/reporting"`从我的第二个中删除`@RequestMapping`它，那就是`<img src="images/logo.gif" />`哪个工作！

# android - 如何使用robotium点击其他活动中的项目列表？

> ID：11146219
> 
> 赞同：0
> 
> 时间：2012-06-21T20:27:17.643
> 
> 标签：android, robotium, android-testing

我的应用程序中有一个按钮，可以打开 android 联系人应用程序以从列表中选择联系人，换句话说，我需要单击其他活动中的列表项。我如何使用机器人来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:39:28.600

Robotium 一次只能测试一个应用程序。

这是一个可以回答此类问题的链接：[http ://code.google.com/p/robotium/wiki/QuestionsAndAnswers](http://code.google.com/p/robotium/wiki/QuestionsAndAnswers)

# python - Django向模板中的按钮添加功能

> ID：11146221
> 
> 赞同：1
> 
> 时间：2012-06-21T20:27:36.050
> 
> 标签：python, django

我不知道如何`views.py`在我的模板中添加函数到属性操作。我希望当我单击按钮时我的页面会刷新并向数据库添加评论。

我的模板的一部分：

```
 <form action = '???' method = "post">
    {{ formularz.as_p}}
    <input type="submit" value="Submit" />
</form> 
```

部分`views.py`：

```
def ShowNewses(request):
    newses = News.objects.filter(status = 'p')
    return render_to_response('news.html', {'news_set': newses})

def ArchiveNews(request,topic,year, month, day):
    news = News.objects.filter(date__year = int(year), date__month = int(month), date__day = int(day),topic = topic)
    comments = Comments.objects.all()
    formularz = CommentsForm()
    return render_to_response('knews.html', {'news': news[0],'comments': comments, 'formularz': formularz}) 

def AddComment(request):
    L = request.META['PATH_INFO'].split('/')
    if request.POST:    
    k = CommentsForm(request.POST)
    k.save()
    return HttpResponseRedirect(reverse('ArchiveNews', kwargs = {'request' = request, 'year' = L[3], 'month' = L[4], 'day' = L[5]})) 
```

`AddComment`是我想要在我的按钮中的功能。 `ArchiveNews`当我选择将在新页面中的新闻时被诱导。

**编辑**
部分`urls.py`：

```
url(r'^news/$', ShowNewses),
url(r'^news/(?P<topic>.+)/(?P<year>\d{4})/(?P<month>\d{2})/(?P<day>\d{2})', ArchiveNews), 
```

我在这里更新了`views.py`. 我补充说`ShowNewses`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:04:35.303

您需要添加`AddComment`到您的 urls.py 文件中。然后，假设您的应用名为“myapp”，您将在模板中使用它：`{% url myapp.views.AddComment %}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:11:00.653

我使用了网址名称。我的实际文件：views.py

```
def ArchiveNews(request, topic, year, month, day):
    print request.POST
    news = News.objects.filter(date__year = int(year), date__month = int(month), date__day = int(day),topic = topic)
    comments = Comments.objects.all()
    formularz = CommentsForm()
    return render_to_response('knews.html', {'news': news[0], 'comments': comments, 'formularz': formularz, 'topic': topic, 'year': year, 'month': month,'day': day})   

def AddComment(request,topic,year,month,day):
    print 'foo'
    if request.POST:
        k = CommentsForm(request.POST)
        k.save()
    return HttpResponseRedirect(reverse('ArchiveNews', args = (topic,year,month,day))) 
```

我的模板的一部分：

```
<form action = {% url addcomment topic year month day %} method = "post">
        {{ formularz.as_p}}
        <input type="submit" value="Submit" />
    </form> 
```

urls.py 的一部分：

```
url(r'^news/(?P<topic>.+)/(?P<year>\d{4})/(?P<month>\d{2})/(?P<day>\d{2})', ArchiveNews),
url(r'^news/(?P<topic>.+)/(?P<year>\d{4})/(?P<month>\d{2})/(?P<day>\d{2})', AddComment, name = 'addcomment'), 
```

编辑：我更新了我的文件

# eclipse - Eclipse 调试器：找不到项目引用的源

> ID：11146226
> 
> 赞同：1
> 
> 时间：2012-06-21T20:27:44.013
> 
> 标签：eclipse

我看到一个问题，即 Eclipse 调试器无法找到作为项目引用包含的类的源代码。我的应用程序包含 2 种类型的引用库：Maven 存储库中的库，以及作为项目引用的一部分包含在我的工作区中另一个项目的引用库。

调试器在显示 Maven 存储库中任何类的源代码时都没有问题。

但是，当它尝试使用项目引用调试包含的类时，它找不到源。即使我单击“编辑源查找路径”并指定项目的位置，它也找不到源。我已经确认有问题的类确实存在于项目的输出文件夹中，所以我不确定问题出在哪里。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:44:33.497

好的，我几乎和打开它一样快地解决了这个问题。

该问题似乎是由我导入应用程序项目的方式引起的。

所以在 Eclipse 中，我使用 m2e 的 File > Import > maven > Existing Maven Projects 导入了这个。

这导致我的工作空间中存在的依赖项被包含为项目引用，而不是对 Maven 存储库的实际 jar 文件引用。

为了获得对 Maven 存储库的实际 jar 文件引用，我运行了 mvn eclipse:eclipse 并且我的调试器能够获取源代码。

这是 m2e 插件的已知问题吗？

# python - 在 Python 中创建具有多个给定值的掩码数组

> ID：11146229
> 
> 赞同：5
> 
> 时间：2012-06-21T20:27:51.050
> 
> 标签：python, arrays, numpy, mask

我正在针对相同大小的时间列绘制大量数据的几列（通过 numpy.genfromtxt）。丢失的数据通常被称为 nan、-999、-9999 等。但是我不知道如何从数组中删除多个值。这是我目前拥有的：

```
for cur_col in range(start_col, total_col):
    # Generate what is to be graphed by removing nan values
    data_mask = (file_data[:, cur_col] != nan_values)
    y_data = file_data[:, cur_col][data_mask]
    x_data = file_data[:, time_col][data_mask] 
```

之后，我使用 matplotlib 为每列创建适当的数字。如果 nan_values 是单个整数，这可以正常工作，但我希望使用列表。

编辑：这是一个工作示例。

```
import numpy as np

file_data = np.arange(12.0).reshape((4,3))
file_data[1,1] = np.nan
file_data[2,2] = -999
nan_values = -999

for cur_col in range(1,3):
    # Generate what is to be graphed by removing nan values
    data_mask = (file_data[:, cur_col] != nan_values)
    y_data = file_data[:, cur_col][data_mask]
    x_data = file_data[:, 0][data_mask]
    print 'y: ' + str(y_data)
    print 'x: ' + str(x_data)
print file_data

>>> y: [  1\.  nan   7\.  10.]
    x: [ 0\.  3\.  6\.  9.]
    y: [  2\.   5\.  11.]
    x: [ 0\.  3\.  9.]
    [[   0\.    1\.    2.]
    [   3\.   nan    5.]
    [   6\.    7\. -999.]
    [   9\.   10\.   11.]] 
```

如果 nan_values = ['nan', -999] 这是我想要完成的，这将不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T21:13:30.013

我建议使用像这样的[掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)：

```
>>> a = np.arange(12.0).reshape((4,3))
>>> a[1,1] = np.nan
>>> a[2,2] = -999
>>> a
array([[   0.,    1.,    2.],
       [   3.,   nan,    5.],
       [   6.,    7., -999.],
       [   9.,   10.,   11.]])
>>> m = np.ma.array(a,mask=(~np.isfinite(a) | (a == -999)))
>>> m
masked_array(data =
 [[0.0 1.0 2.0]
 [3.0 -- 5.0]
 [6.0 7.0 --]
 [9.0 10.0 11.0]],
             mask =
 [[False False False]
 [False  True False]
 [False False  True]
 [False False False]],
       fill_value = 1e+20) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T20:37:34.260

我会尝试类似（伪代码）：

```
nan_values = [...]

for cur_col in range(start_col, total_col):
    # Generate what is to be graphed by removing nan values
    y_data = [file_data[i,cur_col] for i in range(len(file_data)) if not(file_data[i,cur_col] in nan_values)]
    x_data = [file_data[i,time_col] for i in range(len(file_data)) if not(file_data[i,cur_col] in nan_values)] 
```

# c# - 检测/阻止 SendKeys.Send 关键消息

> ID：11146230
> 
> 赞同：1
> 
> 时间：2012-06-21T20:27:56.940
> 
> 标签：c#, sendkeys

我想知道是否有办法检测击键是来自键盘还是来自 SendKeys.Send 调用。

我想阻止特定的 SendKeys.Send 键，但如果这些键直接来自键盘，那么就放开它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:49:24.977

创建一个控制台应用程序并运行位于此处的代码：http: [//blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

创建第二个应用程序，`SendKeys.Send`当您单击按钮时将触发该应用程序。您会注意到第一个控制台应用程序检测到来自键盘的击键而不是来自`SendKeys.Send`

我确定您可以使用文章中的代码来检测击键是否来自键盘或`SendKeys.Send`

# python - Pip 没有更新到最新的 python 版本

> ID：11146231
> 
> 赞同：1
> 
> 时间：2012-06-21T20:28:03.243
> 
> 标签：python, pip

Python 的版本是 2.7.3，但是当我尝试通过“pip”升级 python 时，我得到了这个：

```
$ pip install --upgrade python
Requirement already up-to-date: python in /usr/lib64/python2.6/lib-dynload
Cleaning up... 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:43:23.367

`pip`安装 python 包，而不是 python 本身。

更改系统 python 版本是个坏主意。要在系统范围内安装额外的 python 版本，您可以使用系统包管理器，例如`apt-get`.

要管理个人 python 安装，您可以使用[`pythonz`](https://github.com/saghul/pythonz).

# trigger.io - 您可以在 CSS 中使用 trigger.io 中的背景图像吗？

> ID：11146244
> 
> 赞同：2
> 
> 时间：2012-06-21T20:29:09.970
> 
> 标签：trigger.io

我试图在 trigger.io ios 移动应用程序中使用背景图像，但它们似乎不起作用。当我使用催化剂时，它会在一些不存在的临时本地文件中列出图像位置。

是否可以将 CSS 中的 background-image 属性与 trigger.io 一起使用，如果可以，我该如何让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:46:33.740

如果您使用 zepto 或 jQuery 动态创建 DOM 元素：

```
forge.tools.getURL('img/yourImage.png', function(path) { 
   var el = $('<div style="background-image: url(' + path + ')"></div>');
}); 
```

或者，如果您只需要通过 zepto 或 jQuery 设置它：

```
forge.tools.getURL('img/yourImage.png', function(path) { 
   $("#yourElement").css("background-image", "url(" + path + ")");
}); 
```

注意：我一直在使用**backbone.js**，我只是将“路径”变量传递给我对*forge.tools.getURL 一无所知*的视图。

# android - 持续通知在几秒钟后消失

> ID：11146246
> 
> 赞同：3
> 
> 时间：2012-06-21T20:29:24.330
> 
> 标签：android, service, notifications

我试图在服务启动时在状态栏中放置通知并将其保留在那里直到我停止服务但几秒钟后消失（大约 10 秒）。关于我缺少什么的任何建议？这在我尝试使用 notification.builder 重新编写以与 api 15 兼容之前有效。日志条目显示在我停止服务之前不会调用 onDestroy，因此它仍在运行。

```
public class MyService extends Service {
    private NotificationManager mNM;
    private int NOTIFICATION = R.string.service_started;

public void onCreate() {
    super.onCreate();
    mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    showNotification();
}
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.e("MyService", "Service Started");
    return START_STICKY;
}

@Override
public void onDestroy() {
    super.onDestroy();
    mNM.cancel(NOTIFICATION);
    Log.e("MyService", "Service Ended");
}

@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

private final IBinder mBinder = new LocalBinder();

private void showNotification() {

    Notification.Builder builder = new Notification.Builder(getApplicationContext());
    builder.setAutoCancel(false)
           .setOngoing(true)
           .setSmallIcon(R.drawable.myicon)
           .setTicker(getText(R.string.service_label))
           .setWhen(System.currentTimeMillis())
           .setContentTitle(getText(R.string.service_started))
           .setContentText(getText(R.string.service_label));
    Notification notification = builder.getNotification();
    mNM.notify(NOTIFICATION, notification);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T11:15:18.253

我遇到了同样的问题，新手机上的 ICS 中的持续通知消失了。该应用程序和通知在我之前测试过的每个版本的 Android 中都能完美运行，甚至可以在 ICS 模拟器上运行。不用说，这已经让我发疯了几个月了，但我终于找到了答案。

[http://code.google.com/p/android/issues/detail?id=21635](http://code.google.com/p/android/issues/detail?id=21635)

我正在使用广播接收器来监视手机上的来电，并且除了设置通知之外，我还以编程方式在切换按钮时启用接收器。因此，我编写了一个小型测试应用程序，连接了相同的 BroadcastReceiver，并且能够重现该问题。我注释掉了 setComponentEnabledSetting 调用，通知不再消失。

# android - ACTION_DISCOVERY_STARTED 从未调用过 android

> ID：11146249
> 
> 赞同：4
> 
> 时间：2012-06-21T20:29:34.083
> 
> 标签：android, bluetooth

我有下一个代码：

```
public class AddPrinter extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    bluetoothAdapter.startDiscovery();
    filter = new IntentFilter();
    filter.addAction(BluetoothDevice.ACTION_FOUND);
    filter.addAction(BluetoothAdapter.ACTION_DISCOVERY_STARTED);
    filter.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
    registerReceiver(receiver, filter);
}

BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        System.out.println(action);
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            adapter.add(device);
        }
        else if (BluetoothAdapter.ACTION_DISCOVERY_STARTED.equals(intent.getAction())) {
            System.out.println("STARTED");
        }
        else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(intent.getAction())) {
            Utils.dialog.dismiss();
        }
    }
}; 
```

我遇到的问题很奇怪，出于某种原因，从未调用过 ACTION_DISCOVERY_STARTED，但所有其他操作都很好，我错过了什么？感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T20:44:34.783

试试这个

```
public class AddPrinter extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);  
            registerReceiver(receiver, filter);  
            filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_STARTED);  
            registerReceiver(receiver, filter);  
            filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);  
            registerReceiver(receiver, filter); 

             //
             bluetoothAdapter.startDiscovery();

} 
```

`bluetoothAdapter.startDiscovery();`注册接收方后放

# css - 将样式表的效果限制为父小部件？

> ID：11146251
> 
> 赞同：6
> 
> 时间：2012-06-21T20:29:46.020
> 
> 标签：css, qt, stylesheet

我正在设置`QWidget`子类的背景颜色。当我使用样式表执行此操作时，其他组件的样式会`QWidget`发生变化（例如，按钮的颜色及其外观会发生变化）。

如何确保只有容器小部件的背景颜色发生变化，而其余子组件保持不变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:01:03.370

一种方法是指定一个 ID 选择器。确保设置`objectName`容器小部件的 （带有`setObjectName()`）并在 CSS 选择器中使用该名称。假设一个名为 的小部件`MyContainer`，您将使用如下内容：

```
QWidget#MyContainer {...} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T21:17:46.437

在子 els 背景颜色属性上尝试 !important 限定符。

# mongodb - MongoDB 是否以原子方式支持以下操作？

> ID：11146253
> 
> 赞同：0
> 
> 时间：2012-06-21T20:29:58.080
> 
> 标签：mongodb

假设我有以下架构

```
t = {name: 'John', reviews: [{sid: 1, comment: 'Great', rating: 4}, {sid: 2, comment: 'Awesome', rating: 5}]}
db.teacher.save(t)
db.teacher.find() 
```

现在 sid 2 的学生将评分更新为 4。是否有任何内置操作可以原子地执行此操作？目前我检索整个文档，手动操作评论，然后 $set 整个评论数组。它有效，但感觉有点沉重。我查看了所有原子运算符，其中很多都接近了，但据我所知，它们都没有完全按照我的要求进行。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:04:39.453

与许多其他 DBMS 一样，MongoDB 实现了[更新](http://www.mongodb.org/display/DOCS/Updating)命令：

```
db.teacher.update({'reviews.sid': 2}, {$set: {'reviews.$.rating': 4}}, false, true); 
```

作为旁注，我经常向有 SQL 经验但刚开始使用 Mongo 的人推荐这个[备忘](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)单。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:01:23.130

是的，您可以直接使用[$set仅更新您想要的密钥，并使用](http://www.mongodb.org/display/DOCS/Updating#Updating-%24set)[点表示法](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)引用该密钥。

# python - 在 Google App Engine Python 沙盒中调试

> ID：11146254
> 
> 赞同：1
> 
> 时间：2012-06-21T20:30:06.557
> 
> 标签：python, debugging, google-app-engine, sandbox

我刚刚开始在 Windows 7 中使用 Python GAE。根据我的观察，当我将代码启动到“localhost:XXXX”时，我对本地应用程序引擎目录中的 python 脚本所做的更改似乎没有显示出来沙盒。

例如，我将导入我的一个脚本并调用一些函数，我得到以下错误。
这个错误的奇怪之处在于，'exec()' 调用不再位于我一直在修改的 'main.py' 副本中的第 99 行。

```
Traceback (most recent call last):
  File "/base/data/home/apps/[app name]/1.354953192642593048/main.py", line 99, in post
    exec(cmd, safe_globals)
  File "<string>", line 5, in <module>
NameError: name 'myFunction' is not defined 
```

我想我的问题是：
1）'/base/data/home/apps/[app name]/1.354953192642593048/main.py'是什么/在哪里？这是他们编译和运行所有东西的地方吗？
2）如何“重建”我的应用程序文件夹的本地副本，以便我所做的修订反映在沙箱中？

抱歉这个相对模糊的问题。如果有人可以解释沙箱是如何设置的，那么我可以弄清楚如何正确地进行调试，我将不胜感激。

* * *

**更新：**

从来没有弄清楚这个错误是如何/为什么发生的。无论我尝试进行何种更改，该应用程序引擎目录的输出都是完全静态的，因此我只是删除了该文件夹并打开了一个新文件夹。使用这个新文件夹（完全相同的内容，包括 app.yaml 和 main.py），我可以即时进行更改，并且我的本地调试器会反映这些更改。

不再是一个紧迫的问题，但如果有人知道这个错误是如何/为什么发生的，我很想听听。正如下面评论中所建议的，错误消息中提供的路径高度指示了某些远程基/目录的工作原理，即使我一直在我的 localhost:[Port#] 上运行所有内容而没有任何应用程序部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:43:05.517

你确定你在本地运行它？回溯看起来像是来自应用服务器。“ `/base/data/home/apps/[app name]/1.354953192642593048/main.py`” 看起来像是 Google 应用服务器上您的应用程序的路径，而不是 Windows 文件路径。

# java - 创建一个可变的 java.lang.String

> ID：11146255
> 
> 赞同：50
> 
> 时间：2012-06-21T20:30:07.650
> 
> 标签：java, string, security

众所周知，Java`String`是不可变的。从一开始，不可变字符串就是对 java 的一个很好的补充。不变性允许快速访问和大量优化，与 C 风格的字符串相比，出错率显着降低，并有助于实施安全模型。

可以在不使用 hack 的情况下创建一个可变的，即

*   `java.lang.reflect`
*   `sun.misc.Unsafe`
*   引导类加载器中的类
*   JNI（或 JNA，因为它需要 JNI）

但是在纯 Java 中是否有可能，以便可以随时修改字符串？问题是*如何*？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-06-21T21:33:46.237

使用 Charset 构造函数创建一个`java.lang.String`，可以注入你自己的 Charset，它会带来你自己的`CharsetDecoder`. 在decodeLoop 方法中`CharsetDecoder`获取对对象的引用。`CharBuffer`CharBuffer 包装了原始 String 对象的 char[]。由于 CharsetDecoder 具有对它的引用，因此您可以使用 CharBuffer 更改底层 char[]，因此您有一个可变字符串。

```
public class MutableStringTest {

    // http://stackoverflow.com/questions/11146255/how-to-create-mutable-java-lang-string#11146288
    @Test
    public void testMutableString() throws Exception {
        final String s = createModifiableString();
        System.out.println(s);
        modify(s);
        System.out.println(s);
    }

    private final AtomicReference<CharBuffer> cbRef = new AtomicReference<CharBuffer>();
    private String createModifiableString() {
        Charset charset = new Charset("foo", null) {
            @Override
            public boolean contains(Charset cs) {
                return false;
            }

            @Override
            public CharsetDecoder newDecoder() {
                CharsetDecoder cd = new CharsetDecoder(this, 1.0f, 1.0f) {
                    @Override
                    protected CoderResult decodeLoop(ByteBuffer in, CharBuffer out) {
                        cbRef.set(out);
                        while(in.remaining()>0) {
                            out.append((char)in.get());
                        }
                        return CoderResult.UNDERFLOW;
                    }
                };
                return cd;
            }

            @Override
            public CharsetEncoder newEncoder() {
                return null;
            }
        };
        return new String("abc".getBytes(), charset);
    }
    private void modify(String s) {
        CharBuffer charBuffer = cbRef.get();
        charBuffer.position(0);
        charBuffer.put("xyz");
    }

} 
```

运行代码打印

```
abc
zzz 
```

我不知道如何正确实现 decodeLoop()，但我现在不在乎 :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-22T08:37:18.207

@mhaller 很好地回答了这个问题。我会说所谓的拼图非常简单，只需查看 String one 的可用 c-tors 就应该能够找出*如何*部分，a

**演练**

感兴趣的 C-tor 在下面，如果您要闯入/破解/寻找安全漏洞，请始终寻找非最终任意类。这里的案例是`java.nio.charset.Charset`

```
 //String
public String(byte bytes[], int offset, int length, Charset charset) {
    if (charset == null)
        throw new NullPointerException("charset");
    checkBounds(bytes, offset, length);
    char[] v = StringCoding.decode(charset, bytes, offset, length);
    this.offset = 0;
    this.count = v.length;
    this.value = v;
} 
```

c-tor 通过传递 Charset 而不是图表集名称来提供所谓的快速转换`byte[]`为 String 的方法，以避免查找 chartsetName->charset。它还允许传递任意 Charset 对象来创建字符串。Charset 主路由将 的内容转换`java.nio.ByteBuffer`为`CharBuffer`. CharBuffer 可能包含对 char[] 的引用，并且可以通过 使用`array()`，而且 CharBuffer 是完全可修改的。

```
 //StringCoding
    static char[] decode(Charset cs, byte[] ba, int off, int len) {
        StringDecoder sd = new StringDecoder(cs, cs.name());
        **byte[] b = Arrays.copyOf(ba, ba.length);**
        return sd.decode(b, off, len);
    }

    //StringDecoder
    char[] decode(byte[] ba, int off, int len) {
        int en = scale(len, cd.maxCharsPerByte());
        char[] ca = new char[en];
        if (len == 0)
            return ca;
        cd.reset();
        **ByteBuffer bb = ByteBuffer.wrap(ba, off, len);**
        CharBuffer cb = CharBuffer.wrap(ca);
        try {
            CoderResult cr = cd.decode(bb, cb, true);
            if (!cr.isUnderflow())
                cr.throwException();
            cr = cd.flush(cb);
            if (!cr.isUnderflow())
                cr.throwException();
        } catch (CharacterCodingException x) {
            // Substitution is always enabled,
            // so this shouldn't happen
            throw new Error(x);
        }
        return safeTrim(ca, cb.position(), cs);
    } 
```

为了防止更改`char[]`java 开发人员复制数组，就像任何其他 String 构造（例如`public String(char value[])`）一样。但是有一个例外 - 如果没有安装 SecurityManager，则不会复制 char[]。

```
 `//Trim the given char array to the given length
    //
    private static char[] safeTrim(char[] ca, int len, Charset cs) {
        if (len == ca.length 
                && (System.getSecurityManager() == null
                || cs.getClass().getClassLoader0() == null))
            return ca;
        else
            return Arrays.copyOf(ca, len);
    }` 
```

`因此，如果没有 SecurityManager，那么绝对有可能拥有一个由字符串引用的可修改 CharBuffer/char[]。`

 `现在一切看起来都很好 - 除了`byte[]`也被复制（上面的粗体）。这就是 Java 开发人员变得懒惰和大错特错的地方。

该副本是必要的，以防止流氓字符集（上面的示例）能够更改源字节 []。但是，想象一下大约 512KB 的`byte[]`缓冲区包含很少的字符串的情况。试图创建一个小而少的图表 -`new String(buf, position, position+32,charset)` 导致大量 512KB 字节 [] 副本。如果缓冲区为 1KB 左右，则永远不会真正注意到影响。但是，对于大缓冲区，性能影响确实很大。简单的解决方法是复制相关部分。

...或者设计者`java.nio`通过引入只读缓冲区进行了思考。简单地调用`ByteBuffer.asReadOnlyBuffer()`就足够了（如果 Charset.getClassLoader()!=null)* 有时甚至工作的人`java.lang`也会完全错误地理解它。

[*Class.getClassLoader() 为引导类返回 null，即 JVM 本身附带的类。]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T20:33:20.000

我会说 StringBuilder（或用于多线程使用的 StringBuffer）。是的，最后你会得到一个不可变的字符串。但这是要走的路。

例如，在循环中附加字符串的最佳方法是使用 StringBuilder。当您使用“fu”+变量+“ba”时，Java 本身使用 StringBuilder。

[http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)

append(blub).append(5).appen("dfgdfg").toString();

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-20T10:59:28.087

```
// How to achieve String Mutability

import java.lang.reflect.Field; 

public class MutableString {

    public static void main(String[] args) { 
        String s = "Hello"; 

        mutate(s);
        System.out.println(s); 

    } 

    public static void mutate(String s) {
        try {

            String t = "Hello world";
            Field val = String.class.getDeclaredField("value"); 
            Field count = String.class.getDeclaredField("count"); 
            val.setAccessible(true); 
            count.setAccessible(true); 

            count.setInt (s, t.length ());
            val.set (s, val.get(t));
        } 
        catch (Exception e) { e.printStackTrace(); }
    } 

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-07T10:55:04.990

不要重新发明轮子。[Apache commons](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/mutable/MutableObject.html)提供了这一点。

```
MutableObject<String> mutableString = new MutableObject<>(); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-06-20T22:16:33.563

交换和的引导类路径的更简单`java`方法`javac`

1）转到jdk安装并复制到单独的文件夹`rt.jar`和`src.zip`

2) 从源 zip 解压 String.java 并将其内部 char 数组的私有字段值更改为公共

```
public final class String
    implements java.io.Serializable, Comparable<String>, CharSequence {
    /** The value is used for character storage. */
    public final char value[]; 
```

3）借助javac编译修改后的String.java：

```
javac String.java 
```

4）将编译好的String.class和其他编译好的类移动到该目录下的rt.jar

5）创建使用字符串私有字段的测试类

```
package exp;

    class MutableStringExp { 

        public static void main(String[] args) {
            String letter = "A";
            System.out.println(letter);
            letter.value[0] = 'X';
            System.out.println(letter);
        }
    } 
```

6）创建空目录`target`并编译测试类

```
javac -Xbootclasspath:rt.jar -d target MutableStringExp.java 
```

7）运行它

```
java -Xbootclasspath:rt.jar -cp "target" exp.MutableStringExp 
```

输出是：

```
A
X 
```

PS这仅适用于修改`rt.jar`并使用此选项来覆盖`rt.jar`违反`jre`许可证。`

# powershell - 在不使用 ActiveDirectory 模块的情况下在 powershell 中获取当前计算机的可分辨名称

> ID：11146264
> 
> 赞同：7
> 
> 时间：2012-06-21T20:30:58.100
> 
> 标签：powershell, active-directory

我有一个脚本，我需要找到`CN=MyComputer, OU=Computers, DC=vw, DC=local`运行它的计算机的完整专有名称 ( )，但是我不能保证该`ActiveDirectory`模块在运行该脚本的所有计算机上都可用。有没有办法在不使用的情况下获取当前计算机的完整专有名称`Get-ADComputer $Env:COMPUTERNAME`？

* * *

以防万一这是一个 XY 问题，我想做的是将计算机移动到特定的 OU，但我需要一种方法来获取正在运行的计算机的 ASDI 条目。

```
[ADSI]$computer = ("LDAP://" + $localDN)
if($Production)
{
    [ADSI]$destination = 'LDAP://ou=Production,ou=Computers,ou=VetWeb,dc=vw,dc=local'
    $computer.MoveTo($destination);
}
else
{
    [ADSI]$destination = 'LDAP://ou=Test,ou=Computers,ou=VetWeb,dc=vw,dc=local'
    $computer.MoveTo($destination);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T21:22:32.653

试试这个（需要 v2）：

```
$filter = "(&(objectCategory=computer)(objectClass=computer)(cn=$env:COMPUTERNAME))"
([adsisearcher]$filter).FindOne().Properties.distinguishedname 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-31T04:28:05.547

小心使用 ADSIsearcher 方法。如果您在同一林中的不同域中有两台同名计算机（导致我执行返回本文的搜索的问题），则此方法不能保证返回正确的计算机。此方法将简单地在 AD 中搜索具有由 ComputerName 环境变量返回的名称的计算机。如果您处于森林中具有多个域的环境中，则需要确保交叉引用计算机加入的域。

版主，这真的应该是对Shay Levy回答的评论，但我不能发表评论，因为我是新人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-14T08:43:07.407

cmdlet Get-ADComputer (PS ver 2.0) 可以提供帮助。

```
PS:\> $(Get-ADComputer 'mycomputer').distinguishedName 
```

计算机的名称应该是短名称，例如 $env:COMPUTERNAME。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:51:31.000

尝试这样的事情：

```
$de = New-Object System.DirectoryServices.DirectoryEntry
$ds = New-Object System.DirectoryServices.DirectorySearcher
$ds.SearchRoot = $de
$ds.Filter = "(&(objectCategory=computer)(objectClass=computer)(samAccountName=$($env:ComputerName)$))"
$ds.SearchScope = "SubTree"

$r = $ds.FindOne()

$r.Path 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-09T06:39:37.120

试试这个......易于理解且易于记忆......

`$cn = Read-Host`“输入计算机名”

`$cnObj = Get-ADComputer $cn`

`$ou = $cnObj.distinguishedname`

`$ou`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-14T19:48:37.980

我知道找到计算机的 DistinguishedName 的唯一可靠方法是以下必须以管理员身份运行：

```
gpresult /r /scope:computer | find "CN=" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-16T17:30:43.127

```
Get-ItemPropertyValue -Path "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\DataStore\Machine\0" -Name "DNName" 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-21T20:34:54.960

我认为您可以通过以下方式从环境中获取它：

```
$computer = gc env:computername 
```

或者这正是你不想要的？我对powershell很糟糕。

# php - 这个协会怎么成立？

> ID：11146266
> 
> 赞同：2
> 
> 时间：2012-06-21T20:31:05.877
> 
> 标签：php, cakephp, associations

我正在使用 cakephp 框架来开发应用程序，并且在完全理解这些模型之间的关联时遇到了一些麻烦。您可以在下面看到四个模型及其相关的数据库字段。

```
User
 id

Profile
 id
 user_id

Post (A blog post on the users profile)
 id
 profile_id
 topic_id

Topic (A topic for a blog post)
 id
 name 
```

以下是目前的协会：

```
User
 hasOne: Profile

Profile
 hasMany: Posts

Post
 belongsTo: Topic, Profile 
```

现在我的问题。我不确定您是否必须定义关联，`User hasMany Posts`或者是否已经假设因为`User hasOne Profile`and `Profile hasMany Posts`。我的另一个问题是定义帖子与其主题之间的关系。

*   个人资料可以有无限的帖子
*   帖子必须与个人资料相关联
*   一篇文章只能有一个主题
*   主题表包含所有主题的列表
*   帖子不需要主题

鉴于这些标准，我的关联应该如何看待？我对关联所做的所有研究都只展示了简单的例子。

我正在使用 CakePHP 2.1.3 版

感谢您提前提供任何和所有帮助和/或建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:04:08.397

您可以递归地找到关联的关联，甚至更好的是，使用 Containable。

在模型中（我建议把它放在 AppModel 中，因为我发现自己对所有东西都使用了 Containable）：

```
class AppModel extends Model {
    public $actsAs = array('Containable');
    ...
} 
```

然后，当您为用户调用读取（或查找或分页）时，很可能在您的控制器中，执行以下操作：

```
$this->User->contain(array(
    'Profile' => array(
        'Post'
    )
));
$data = $this->User->read();
$set('user',$data); 
```

如果您将该数据设置为您的视图，则您可以访问其中一篇文章的 id `$user['Profile']['Post'][0]['id']`。

现在对于您的下一个问题，您可以有条件关联。

```
public $hasMany = array(
    'Topic' => array(
        'className' => 'Topic',
        'conditions' => 'Post.topic_id IS NOT NULL'
    )
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T23:00:29.007

我认为一切看起来都很好

您的假设是正确的，您不必定义用户/帖子关系。用户没有很多帖子，个人资料有。您可以将 user_id 存储在 Post 而不是 profile_id 以使事情更直观，但这取决于您。

主题有很多帖子，你就完成了。您描述的主题/帖子条件可以通过表格和保存在模型上之前进行控制。例如，“帖子必须与个人资料相关联”，在您根据登录用户的会话信息保存您添加到 profile_id 中的帖子时。

# php - 如何正确格式化发布请求的正文？

> ID：11146268
> 
> 赞同：4
> 
> 时间：2012-06-21T20:31:13.290
> 
> 标签：php, jquery, json, rest, post

我正在使用名为 restclient 的 firefox pluing 来模拟发布请求。它似乎没有拾取任何帖子数据，但不确定我是否正确格式化它。

使用标头：内容类型：应用程序/json 和正文：{“id”：1234}

但不去，它没有在我的 php 中获取 id 参数，我需要设置一些特殊的格式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T20:49:45.940

好的，搞定了，这是需要的

两种内容类型：

```
Content-Type: application/json
Content-Type: application/x-www-form-urlencoded 
```

然后在正文中设置你的参数：

```
param1=value1&param2=value2 
```

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T20:36:33.430

PHP 不会将 JSON 正文自动解析到`$_POST`超全局中。这只发生在`application/x-www-form-urlencoded`和`multipart/form-data`POST 主体上。也就是说，您*可以*自己解析正文——您可以通过[`php://input`伪流](http://php.net/manual/en/wrappers.php.php)访问原始 POST 正文。

# sql - 嵌入在 c 中的 SQL

> ID：11146275
> 
> 赞同：-2
> 
> 时间：2012-06-21T20:31:31.903
> 
> 标签：sql, c

数据库就像：

```
table book: book_id, title

table wrote: book_id, author_id, author_order

table author: author_id, author_name 
```

每本书都是由几个人写的，并且有 author_order。

我需要使用 c 程序输出，例如：

```
book_id

authors: author1, author2, ... , authork

title 
```

现在我使用游标来获取 book_id 和 title，但是如何获取所有写书的作者呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:36:50.520

您的数据模型非常简单，我认为您需要的只是从作者到写书的连接。

```
SELECT author_id, author_name, bookid, title
  FROM author
  JOIN wrote 
    ON (author.authorid = wrote.authorid)
  JOIN book
    ON (wrote.bookid = book.bookid) 
```

# java - 从 java.sql.Timestamp 到 joda 的 LocalDate 的意外转换

> ID：11146279
> 
> 赞同：1
> 
> 时间：2012-06-21T20:32:03.903
> 
> 标签：java, calendar, jodatime

我在将 Timestamp 对象转换为 joda 的 LocalTime 时遇到问题。

请参见下面的示例：

```
public static void main(String[] args) {

    Timestamp t = Timestamp.valueOf("1111-11-11 00:00:00");
    System.out.println(t); //-- prints '1111-11-11 00:00:00.0'
    System.out.println(new LocalDate(t)); //-- prints '1111-11-17'

    Calendar calendar = Calendar.getInstance();
    calendar.setTime(t);
    System.out.println(LocalDate.fromCalendarFields(calendar)); //-- prints '1111-11-11'
} 
```

我无法确定为什么“new LocalDate(t)”会导致“1111-11-17”。任何人都可以帮助我吗？

我在使用 joda-time-hibernate 填充我的 bean 类型为 LocalDate 的属性时注意到了这个“问题”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T22:43:30.783

这确实与不同类型的日历有关。`java.sql.Timestamp`, 比如`java.util.Date`, 没有任何日历信息, 因为它们仅作为数字存储, 自 1970 年以来的毫秒数, 隐含假设在 1582 年 10 月 4 日和 15 月 15 日之间有一个跳跃, 当公历正式成为采用，取代旧的儒略历。因此，您不可能有一个代表 1582 年 10 月 7 日的日期（或时间戳）对象。如果您尝试创建这样的日期，您将自动在 10 天后结束。例如：

```
 Calendar c = Calendar.getInstance();
    c.setTimeZone(TimeZone.getTimeZone("UTC"));
    c.set(1582, Calendar.OCTOBER, 7, 0, 0, 0);
    c.set(Calendar.MILLISECOND, 0);
    d = c.getTime();
    System.out.println("Date: " + d);
    // Prints:
    // Date: Sun Oct 17 00:00:00 GMT 1582 
```

换句话说， Date 对象有一个隐含的 Julian+Gregorian 年表，在这两者之间自动切换。

JodaTime 更聪明一点，它支持多种年表，包括连续的儒略历、预测的[公历](http://en.wiktionary.org/wiki/proleptic)、混合的儒略历+公历，以及几乎与公历相同的标准 ISO 年表。如果您阅读[该`LocalDate.fromCalendarFields`方法](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html#fromCalendarFields%28java.util.Calendar%29)的 JavaDoc ，您会看到它提到：

> 此工厂方法忽略日历的类型并始终创建具有 ISO 年表的 LocalDate。

混合 Julian+Gregorian 年表的行为类似于隐式 Java 日期，在两个不同的日历之间自动切换。纯年表假设他们的日历系统永远在使用，例如它假设公历从时间开始就一直在使用。

让我们看看每个 Chronology 如何处理 1111-11-11 日期：

```
 Calendar c = Calendar.getInstance();
    c.setTimeZone(TimeZone.getTimeZone("UTC"));
    c.set(1111, Calendar.NOVEMBER, 11, 0, 0, 0);
    c.set(Calendar.MILLISECOND, 0);
    Date d = c.getTime();
    System.out.println("Date: " + d + " (" + d.getTime() + " milliseconds)");
    System.out.println("ISO: " + new DateTime(d, ISOChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Julian+Gregorian: " + new DateTime(d, GJChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Julian: " + new DateTime(d, JulianChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Gregorian: " + new DateTime(d, GregorianChronology.getInstance(DateTimeZone.forID("UTC")))); 
```

结束为：

```
Date: Sat Nov 11 00:00:00 GMT 1111 (-27079747200000 milliseconds)
ISO: 1111-11-18T00:00:00.000Z
Julian+Gregorian: 1111-11-11T00:00:00.000Z
Julian: 1111-11-11T00:00:00.000Z
Gregorian: 1111-11-18T00:00:00.000Z 
```

如您所见，两个现代年表（ISO 和公历）报告正确的日期**，如果它们从一开始就一直在使用**，而使用儒略历的两个报告**当时已知**的日期，尽管在事后看来，与真正的春分日期相比，我们知道它要提前 7 天。

让我们看看交换机周围发生了什么：

```
 c.set(1582, Calendar.OCTOBER, 15, 0, 0, 0);
    d = c.getTime();
    System.out.println("Date: " + d + " (" + d.getTime() + " milliseconds)");
    System.out.println("ISO: " + new DateTime(d, ISOChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Julian+Gregorian: " + new DateTime(d, GJChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Julian: " + new DateTime(d, JulianChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Gregorian: " + new DateTime(d, GregorianChronology.getInstance(DateTimeZone.forID("UTC")))); 
```

最终为：

```
Date: Fri Oct 15 00:00:00 GMT 1582 (-12219292800000 milliseconds)
ISO: 1582-10-15T00:00:00.000Z
Julian+Gregorian: 1582-10-15T00:00:00.000Z
Julian: 1582-10-05T00:00:00.000Z
Gregorian: 1582-10-15T00:00:00.000Z 
```

所以唯一留下的就是儒略历。在所有尚未接受公历的国家中，这都是一个有效的日期，当时有很多国家。希腊在 1923 年做出了转变……

在那之前的一毫秒，日期是：

```
 c.add(Calendar.MILLISECOND, -1);
    d = c.getTime();
    System.out.println("Date: " + d + " (" + d.getTime() + " milliseconds)");
    System.out.println("ISO: " + new DateTime(d, ISOChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Julian+Gregorian: " + new DateTime(d, GJChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Julian: " + new DateTime(d, JulianChronology.getInstance(DateTimeZone.forID("UTC"))));
    System.out.println("Gregorian: " + new DateTime(d, GregorianChronology.getInstance(DateTimeZone.forID("UTC")))); 
```

意义：

```
Date: Thu Oct 04 23:59:59 GMT 1582 (-12219292800001 milliseconds)
ISO: 1582-10-14T23:59:59.999Z
Julian+Gregorian: 1582-10-04T23:59:59.999Z
Julian: 1582-10-04T23:59:59.999Z
Gregorian: 1582-10-14T23:59:59.999Z 
```

ISO 和公历年表报告的日期实际上并不存在于公历中，因为在 10 月 15 日之前没有公历，但该日期在延长的、预知的公历中有效。这就像找到一个刻在公元前纪念碑上的公元前日期......甚至在基督出生之前，没有人知道他们*在基督之前。*

因此，问题的根源在于日期字符串不明确，因为您不知道您正在测量哪个日历。5772 年是未来的一年，还是现在的希伯来年？Java 采用混合儒略历+公历。JodaTime 为不同的日历提供广泛的支持，默认情况下它采用 ISO8601 年表。您的日期会自动从 1111 年使用的儒略历转换为我们当前使用的 ISO 年表。如果您希望您的 JodaTime 增强时间戳使用与类相同的年表，则在构造 JodaTime 对象时`java.sql.Timestamp`显式选择。`GJChronology`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:54:54.987

过去几个世纪以来发生这种情况的原因与（全球）从儒略历转换到公历有关。基本上，随着各国以零碎的方式实施新的日历系统，他们将在此过程中损失数天或数周（在某些情况下，甚至数月）。例如，在西班牙，儒略历中的 1582 年 10 月 4 日紧随其后的是公历中的 1582 年 10 月 15 日。[维基百科](http://en.wikipedia.org/wiki/Gregorian_calendar#Adoption)对该主题进行了不错的讨论。

只要您的应用程序没有处理过早的日期，您就不必处理与此相关的差异。正如您在评论中提到的，`System.out.println(new LocalDate(Timestamp.valueOf("1999-11-11 00:00:00")))`正确输出 1999-11-11。如果您需要使用这些较旧的日期，我建议您查看儒略历的替代日期。

（顺便说一句，我很想知道如果你询问当地的日期，在西班牙，1582 年 10 月 5 日……那一天会发生什么从未发生过。）

# ruby-on-rails - Rails 应用程序中的用户权限

> ID：11146285
> 
> 赞同：0
> 
> 时间：2012-06-21T20:32:59.987
> 
> 标签：ruby-on-rails, authorization

My Rails 应用程序是一个简单的应用程序，用户可以在其中注册和查看某个组织的工作。我已经设置了 Devise，以便用户必须经过身份验证才能执行某些操作，例如查看工作、发布工作等。我目前有一个工作模型和一个用户模型。我将如何设置权限，以便用户可以创建新帖子并且只能编辑和删除他们写的帖子？

```
Job.rb:

class Job < ActiveRecord::Base

# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable

    devise  :database_authenticatable,
            :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model
attr_accessible :contact_email, :contact_phone, :description, :district, :due_date,     :expiration_date, :job_title, :posting_date, :requirements, :salary, :submission_process

end

User.rb

class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body
end

Jobs_Controller.rb:

class JobsController < ApplicationController
before_filter :authenticate_user!, :except => [:show, :index]

  # GET /jobs
  # GET /jobs.json
  def index
    @jobs = Job.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @jobs }
    end
  end

  # GET /jobs/1
  # GET /jobs/1.json
  def show
    @job = Job.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @job }
        end
      end

   # GET /jobs/new
   # GET /jobs/new.json
  def new
    @job = Job.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @job }
    end
  end

  # GET /jobs/1/edit
  def edit
    @job = Job.find(params[:id])
  end

  # POST /jobs
  # POST /jobs.json
  def create
    @job = Job.new(params[:job])

    respond_to do |format|
      if @job.save
        format.html { redirect_to @job, notice: 'Job was successfully created.' }
        format.json { render json: @job, status: :created, location: @job }
      else
        format.html { render action: "new" }
        format.json { render json: @job.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /jobs/1
  # PUT /jobs/1.json
  def update
    @job = Job.find(params[:id])

    respond_to do |format|
      if @job.update_attributes(params[:job])
        format.html { redirect_to @job, notice: 'Job was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @job.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /jobs/1
  # DELETE /jobs/1.json
  def destroy
    @job = Job.find(params[:id])
    @job.destroy

    respond_to do |format|
      format.html { redirect_to jobs_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:06:02.087

如果您打算扩展您的系统并添加其他角色，例如管理员、超级管理员、普通用户、访客等，那么我给您的建议是查看名为[CanCan](https://github.com/ryanb/cancan)的 Ryan Bates 的身份验证 gem .

如果应用程序像您在回答中提到的那样简单，那么您还必须使用`current_user`设计 gem 提供的方法，您必须设置工作和用户之间的关系。我想这将是一个一对多的关系（每个用户可以有很多工作），这可以通过：

1.  创建一个向`jobs`表添加列的新迁移，列名应该是`user_id`
2.  添加`has_many :jobs`用户模型（user.rb）
3.  添加`belongs_to :user`工作模型（job.rb）
4.  在您的控制器中，方法编辑、更新和销毁应该是这样的

    ```
     def update
        @job = current_user.jobs.find(params[:id])
        # the rest of the code is omitted 
      end

      def destroy
        @job = current_user.jobs.find(params[:id])
        @job.destroy
        # the rest of the code is omitted 
      end

      def edit
        @job = current_user.jobs.find(params[:id])
      end 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:53:09.433

有一个 gem 可以帮助你[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

还有一个截屏视频演示了它是如何工作的。[http://railscasts.com/episodes/192-authorization-with-cancan](http://railscasts.com/episodes/192-authorization-with-cancan)

您可以使用 cancan 定义确定的用户可以执行的操作。

# salesforce - 如何判断实例特定的 Salesforce URL 是来自沙盒还是生产？

> ID：11146286
> 
> 赞同：3
> 
> 时间：2012-06-21T20:33:06.320
> 
> 标签：salesforce

如果我只有 URL 和会话 ID，如何判断实例特定的 Salesforce URL 是来自沙盒还是生产？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:37:06.003

如果您知道实例和 sessionId，那么您可以`{instance}/services/data/v25.0`通过在 Authorization 标头中传递 sessionId 来调用 REST api 的发现服务，例如使用 curl 这将是

```
curl -v -H "Authorization: OAuth {sessionId}" https://{instance}/services/data/v25.0/ 
```

这将为您返回发现数据，包括用户身份 ID，例如

```
"id": "https://login.salesforce.com/id/00D300000000QSfEAM/00530000000dImzAAE" 
```

如果主机是`login.salesforce.com`它的生产，如果它是`test.salesforce.com`它的沙箱。

# java - 迭代时是否使用 arraylist 或其他集合

> ID：11146287
> 
> 赞同：0
> 
> 时间：2012-06-21T20:33:10.987
> 
> 标签：java, collections

我有两个配置文件说`SignProfile`和`ValidationProfile`。这些配置文件可以超过 1 个，比如说

```
SignProfile.size >1 and  ValidationProfile.size>1 
```

现在有一段代码我必须在任何时候执行`SignProfile`和`ValidationProfile`不执行，`null`如果它们对于签名和验证都不止一个，我也需要遍历这些配置文件。

我在用

```
List<SignProfile> SP = new ArrayList<>;
List<ValidationProfile> Vali = new ArrayList<>;
while SP_interator.hasnext
{
    while Vali_interator.hasnext
    {
        // do something
    }
    // Piece of code
} 
```

现在我面临的问题是有时 SignProfile 来了`null`，但 ValidationProfile 不是`null`。因此，按照上面的代码，没有执行预期的代码。

有人可以指导我吗？我应该使用其他收藏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:40:37.170

你是这个意思吗？

```
if (signProfiles != null && validationProfiles != null) {

    for (SignProfile signProfile : signProfiles) {
        //do something with signProfile
    }

    for (ValidationProfile validationProfile : validationProfiles) {
        //do something with validationProfile
    }
} 
```

或者嵌套版本...

```
if (signProfiles != null && validationProfiles != null) {

    for (SignProfile signProfile : signProfiles) {
        //do something with signProfile

        for (ValidationProfile validationProfile : validationProfiles) {
        //do something with validationProfile, and signProfile?
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:42:30.803

如果您使用的是 Java 5 或更高版本，则可以使用 foreach 语法：

```
List<SignProfile> signProfileList = new ArrayList<>;
List<ValidationProfile> validationProfileList = new ArrayList<>;

if(signProfileList != null) {
  for(SignProfile sp : signProfileList) {
    // you can work with the sp variable here, which represents the current item from signProfileList
    if(validationProfileList != null) {
      for(ValidationProfile vp : validationProfileList) {
        // you can work with vp variable here, which represents the current item from validationProfileList
      }
    }
  }
} 
```

注意：我已经重命名了一些变量以使代码更清晰。

顺便问一下，您确定要嵌套这些吗？他们之间似乎没有任何关系。

# vim - 在 vim 中定义自定义命令时出现 E488 错误

> ID：11146289
> 
> 赞同：2
> 
> 时间：2012-06-21T20:33:30.347
> 
> 标签：vim

我正在尝试为 vim 中的现有命令创建快捷方式。具体来说，我正在设置 eclim，并且想仅使用 :LF 调用 :LocateFile 命令。我这样定义它：

```
command LF LocateFile 
```

这在没有参数的情况下可以正常工作，但是如果我给它一个文件名参数，我会得到一个“E488：尾随字符”：

```
:LF MyFile 
```

我想我需要在某个地方放一个 nargs，但我找不到任何在这种情况下应该如何使用它的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:18:58.847

有[`cmdalias`](https://github.com/vim-scripts/cmdalias.vim)插件 - 它应该能够完全实现你正在寻找的东西 - 这里我从[vim-wiki复制](http://vim.wikia.com/wiki/Tabclose_instead_of_quit-all)

```
function! InitPlugins()
  call CmdAlias('LF', 'LocateFile')
  au! InitPlugins VimEnter
endfunction

aug InitPlugins
  au!
  au VimEnter * :call InitPlugins()
aug END 
```

# windows-7 - 如何删除名称过长的文件？

> ID：11146290
> 
> 赞同：6
> 
> 时间：2012-06-21T20:33:42.967
> 
> 标签：windows-7, filesystems

我以前从未见过这个问题。你？

首先，我在 Windows 7 计算机上有一个文件，我首先尝试将其从一个文件夹移动到另一个文件夹，但它抛出了一个错误，提示“文件名对于目标文件夹来说将是工具长... ”。

所以我首先尝试将它复制到根目录 C 驱动器，它抛出了同样的错误。

所以我试图删除该文件。它抛出了同样的错误，因为很明显它会进入回收站。

所以我尝试了alt-delete。令人惊讶的是，它再次抛出了同样的错误。

错误说我可以尝试重命名文件。我右键单击该文件，它没有提供该选项。

然后我尝试以管理员身份打开的命令行窗口。试图删除该文件表示访问被拒绝。

是的，顺便说一下，它是一个 AppData 文件夹文件。所以可能是系统的原因

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-21T18:02:22.630

有时我遇到了同样的问题，对我有用的是运行 robocopy：试试这个：到要删除的父文件夹上，比如 parent>：

```
parent> mkdir new_empty_dir
parent> robocopy new_empty_dir dir_want_to_delete /s /mir
parent> rmdir new_empty_dir
parent> rmdir dir_want_to_delete 
```

希望这对其他人有帮助...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T01:24:56.080

尝试删除包含一些名称很奇怪的文件的 spring 工具套件安装时，我遇到了同样的问题。我尝试了其他人建议的所有其他技巧，但都没有奏效。最后，我搜索 Windows 帮助，发现“ *Windows 将单个路径限制为 260 个字符。这就是为什么在将文件名很长的文件复制到路径较长的位置时偶尔会出错的原因比文件的原始位置*。所以，我将文件路径中的每个文件夹名称缩短为 3 个字符的名称，猜猜看 - 我成功删除了所有那些丑陋的长命名文件！

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-13T20:24:46.377

我在使用 node 时遇到了这个问题。它创建了大量的子文件夹，当我尝试删除它们时，我收到了文件名太长的错误。我使用这个非常简单、免费、开源的 Java 程序在大约 5 秒内将它们删除。我强烈推荐它。

[http://www.osmstudios.com/projects/path-too-long](http://www.osmstudios.com/projects/path-too-long)

唯一的先决条件是安装 Java。源代码可在 GitHub 上的[https://github.com/DawsonG/PathTooLong](https://github.com/DawsonG/PathTooLong)获得。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-12T11:39:57.790

由于这是Windows的问题，即使您尝试通过CMD控制台删除它也会出现同样的问题；您可以尝试使用**cygwin**或**mobaxterm**等虚拟 linux 终端应用程序将其删除。

[https://www.cygwin.com/](https://www.cygwin.com/)

[http://mobaxterm.mobatek.net/](http://mobaxterm.mobatek.net/)

在其中一个应用程序中，只需转到要删除的文件或目录所在的路径并键入：

`rm foo`（其中 foo 是**文件**名）

或者

`rm -r foo`（其中 foo 是**目录**的名称）

希望这对任何人都有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T10:26:03.173

作为临时解决方法，您可以使用[Delimon Win32 Explorer](http://gallery.technet.microsoft.com/Delimon-Win32-Explorer-V40-bc957ab4)，它使用不同的库来解决 260 个字符的问题（它最多支持 32K 个字符）并且似乎在 Win7 中工作。确保检查“已知问题”部分。

[资源](https://superuser.com/questions/705417/in-windows-7-how-do-i-get-around-the-the-file-names-would-be-too-long-for-th)

# linux - 如何使用 linux ubuntu 定位哪些文件位于哪个分区上

> ID：11146293
> 
> 赞同：1
> 
> 时间：2012-06-21T20:33:54.147
> 
> 标签：linux, filesystems

我有一个分区已满的 linux 机器，分区已满正在阻止 SQL 启动。我需要弄清楚我需要删除哪些文件以释放分区上的空间，我尝试使用 rm 手动从 mysql 删除备份数据库文件，并删除旧的日志文件，但这只是从 sda8 释放更多空间- 有足够的空间。有谁知道如何找出 sda7 中的哪些文件？

这是 df -h 的输出

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda6             4.6G  1.2G  3.2G  27% /
tmpfs                 1.8G     0  1.8G   0% /lib/init/rw
varrun                1.8G   92K  1.8G   1% /var/run
varlock               1.8G     0  1.8G   0% /var/lock
udev                  1.8G  168K  1.8G   1% /dev
tmpfs                 1.8G     0  1.8G   0% /dev/shm
lrm                   1.8G  2.5M  1.8G   1% /lib/modules/2.6.28-19-generic/volatile
/dev/sda5              76M   20M   53M  27% /boot
/dev/sda8             220G  7.4G  202G   4% /home
/dev/sda7             4.6G  4.4G     0 100% /var 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:44:26.740

```
/dev/sda7             4.6G  4.4G     0 100% /var
varrun                1.8G   92K  1.8G   1% /var/run
varlock               1.8G     0  1.8G   0% /var/lock 
```

我重新安排了您的`df -h`输出，并将其修剪为最有意义的行。

您需要删除*不在*or中`/var/`的内容。在 Debian 派生系统（包括 Ubuntu）上释放大量可用空间的一种非常*快速*的方法是运行- 这将从. *将通过从该目录中删除所有*包来释放更多空间。（这些软件包是为了您的故障排除而保留的。）如果您不确定要运行哪个，这是我的建议——无论如何，您几乎永远不需要这些软件包。*`/var/run``/var/lock`*`apt-get autoclean``/var/cache/apt/archives/``apt-get clean`*`apt-get clean`***

 ***但这不是您问题的长期解决方案。您可能应该将您的 SQL 数据库存储在`/home`其中。您在那里有 202 GB 的可用空间，*并且*`/home`您的分区上可能有某种备份解决方案——对吗？- 您可能没有想过要从中备份`/var/`。为您的 SQL 数据库创建一个新目录`/home/`，使其归 SQL 服务器的用户和组帐户所有，移动您的数据库，并配置数据库服务器以使用新位置。***

# php - 为什么我的 php 页面加载这么慢？

> ID：11146294
> 
> 赞同：-1
> 
> 时间：2012-06-21T20:33:54.617
> 
> 标签：php, mysql, performance, load

这让我沮丧了一段时间。我开始为使用 ajax 加载内容的朋友开发一个网站，但是每次加载图片库时都需要很长时间。令人讨厌的是，当我在自己的服务器上测试它时，情况并非如此。

测试站点在这里：[http ://www.europeanbob.co.uk/phil/index.html](http://www.europeanbob.co.uk/phil/index.html)

实际站点在这里：[http ://www.philmarsdenphotography.co.uk](http://www.philmarsdenphotography.co.uk)

测试是在dreamhost上进行的，而实际是在krystal上进行的，如果这有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:45:18.797

您正在做一些奇怪的事情，但[Stack Overflow 不是调试服务](https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not/135066#135066)。我从粗略查看网络窗格中看到，当您单击 时`Gallery > People`，有*两个*同时请求`/inc/people.php`- 一个需要 4-4.5 秒，另一个需要 8-9 秒，因此我的猜测是一个被锁定等待另一个完成，这可能是由于会话或数据库。这些脚本的返回值略低于 4k，因此无法用网络延迟来解释长延迟——这是您在服务器端执行的操作。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:08:51.527

部分问题是您有很多 javascript 和 css 文件，这些文件都必须在图像加载之前加载。

您链接到的每个外部文件（即非内联文件）都需要单独的 dns 查找然后检索。问题是浏览器一次只能查找几个（TCP/IP 协议的限制），并让浏览器在查找下一个之前等待那些返回。解决方案是将其中一些 javascript 和 css 文件从 8 个左右合并到 2-3 个。这应该会减少大约 2 秒

# jquery - Onclick 显示下一个 div

> ID：11146298
> 
> 赞同：-1
> 
> 时间：2012-06-21T20:34:27.833
> 
> 标签：jquery

我有 1000 个 div，其中 20 个是可见的，其余的是隐藏的。

在 onClick jquery 事件中，我希望接下来的 20 个 div 可见，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:17:56.720

我建议类似于以下内容，但我强烈建议将其变成一个函数或插​​件：

```
var perSlice = 20; // how many to show on each 'page'

// hides all but the first 'page' of the matched elements
$('#wrap > div').hide().slice(0, perSlice).show();

$('a').click(
    function(e) {
            // reference to the elements being 'paged'
        var divs = $('#wrap div'),
            // the first of the visible 'paged' elements
            firstVisible = divs.filter(':visible:first'),
            // the index of the first visible 'paged' elements
            firstVisibleIndex = firstVisible.index('#wrap div'),
            lastVisible = divs.filter(':visible:last'),
            lastVisibleIndex = lastVisible.index('#wrap div'),
            // the index of the first of the 'paged' elements
            firstIndex = divs.filter(':first').index('#wrap div'),
            lastIndex = divs.filter(':last').index('#wrap div');

        // if you've clicked the a element with id="prev"
        if (this.id == 'prev') {
            // prevents the default action of the link
            e.preventDefault();
            // if the index of the first visible element is the same as the
            // index of the first element
            if (firstVisibleIndex == firstIndex) {
                // don't do anything, and exit
                return false;
            }
            else {
                // otherwise, hide all the paged elements
                divs.hide();
                // and then take a selection of those paged elements, and show them
                divs.slice((firstVisibleIndex) - perSlice, firstVisibleIndex).show();
            }
        }
        else if (this.id == 'next') {
            e.preventDefault();
            if (lastVisibleIndex == lastIndex) {
                return false;
            }
            else {
                divs.hide();
                divs.slice((lastVisibleIndex + 1), (lastVisibleIndex + 1) + perSlice).show();
            }
        }
    });​ 
```

JS 小提琴演示。

参考：

*   [`event.prevendDefault()`](http://api.jquery.com/event.preventDefault/).
*   [`filter()`](http://api.jquery.com/filter/).
*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`hide()`](http://api.jquery.com/hide/).
*   [`index()`](http://api.jquery.com/index/).
*   [`:last`选择器](http://api.jquery.com/last-selector/)。
*   [`slice()`](http://api.jquery.com/slice/).
*   [`show()`](http://api.jquery.com/show/).
*   [`:visible`选择器](http://api.jquery.com/visible-selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:41:07.353

将 20 组分配给 css 类，并让您的 jQuery 方法在该类中全部显示。你可以有一个全局的 js 变量跟踪点击次数，然后如果是 if 语句，显示隐藏相应的部分：

```
<script type="text/javascript">var numberOfClicks = 0;</script>
<style>.IncurredDate1 {} .IncurredDate2 ... {}</style>
<div class="incurredRow1">blah</div>
<div class="incurredRow2">blah</div>
//in click event
<script type="text/javascript">
function buttonClick(event){
    switch(numberOfClicks )
    {
        case 1:
        ...
        case 20;  
            $(".incurredRow1").show();
            break;
        case 21:
        ...
        case 40:
            $(".incurredRow2").show();
            break;
        default:
            code to be executed if n is different from case 1 and 2
     }
   }();    
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:43:48.670

如果您使用的是 jquery，则可以使用该`.slice()`方法。

[http://api.jquery.com/slice/](http://api.jquery.com/slice/)

就像是：

```
$('button').click(function(e){
  var divs = $('.mydivs');
  divs.hide().slice(0, 20).show(); // 0 is the starting index
}); 
```

你只需要弄清楚逻辑来确定你的起始索引是什么。

我没有非 jquery 解决方案，也许其他人可以在这方面提供帮助。

# c++ - 在调试器之外运行时发布构建更改行为

> ID：11146301
> 
> 赞同：1
> 
> 时间：2012-06-21T20:34:34.583
> 
> 标签：c++, visual-studio-2010, debugging

我正在用 C++ 和 Lua 编写程序。当我在调试器外部以发布模式运行程序时，程序的行为不符合预期（它没有崩溃，只是没有按照我的想法执行）。当我从调试器启动它时，它表现得很好。

我知道程序在调试器中的运行方式与在调试器之外的方式存在差异（堆差异？一些未初始化的变量？）。是否可以配置调试器，使其以尽可能少的更改运行我的程序的发布版本，所以我可以尝试在调试时解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:56:55.223

这里有几件事可以尝试：

*   在调试器外部运行，然后附加到进程。当进程从调试器启动时，它会有一个稍微不同的环境，所以如果这是不同行为的原因，那么这将允许你调试它
*   创建一个关闭优化的发布版本，看看您是否在调试器内部和外部运行相同的行为。如果您仍然可以重现该问题，那么这将使调试它（通过使用上述附加过程方法）更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:40:27.557

不确定是否使调试器像发布版本一样，但您可以在某种程度上模拟它们。

取决于行为上的差异到底是什么。

所有变量都初始化了吗？调试器会这样做。您还可以使用 asm { int 3 } 来中断发布模式。

# javascript - 删除不需要的 javascript 和 css 是否包括减轻网页加载时间？

> ID：11146302
> 
> 赞同：2
> 
> 时间：2012-06-21T20:34:34.880
> 
> 标签：javascript, css, web

我们有一个 Web 应用程序，所有页面都有一个公共头文件。我们希望减少页面加载时间。我们正在考虑为不同的页面设置单独的标题，具体取决于每个页面的特定 javascript 和 css 需求。这是否会对加载时间产生任何影响（因为它们被浏览器缓存）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:35:41.863

***是的。绝对地。***

许多人清除他们的缓存，甚至完全关闭它（比如我）。

即使缓存了不需要的 JavaScript，它仍然由浏览器运行。

查看[http://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/)。

该工具会测试该页面的加载时间，以便您对其进行分析并找出加载时间的瓶颈。

当你说不同的标题时，你在说什么 CMS？大多数 CMS 允许您在挂钩或 ugh 占位符中添加额外的页眉数据、JS 或 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:50:42.507

人们已经解决了 JS 问题。

CSS 包含也会显着影响页面速度。CSS 规则由浏览器从右到左匹配，这与大多数人对编写规则的看法大不相同。给定足够复杂的布局，CSS 优化可以显着改善渲染时间。

[http://css-tricks.com/efficiently-rendering-css/](http://css-tricks.com/efficiently-rendering-css/)

[http://taligarsiel.com/Projects/howbrowserswork1.htm#CSS_parsing](http://taligarsiel.com/Projects/howbrowserswork1.htm#CSS_parsing)

[为什么浏览器从右到左匹配 CSS 选择器？](https://stackoverflow.com/questions/5797014/css-selectors-parsed-right-to-left-why)

# ubuntu - ubuntu 上的 zsh 选项卡完成错误

> ID：11146306
> 
> 赞同：9
> 
> 时间：2012-06-21T20:34:51.497
> 
> 标签：ubuntu, zsh, gnome-terminal

我在这里遇到了一个非常烦人的错误：

`% git s<TAB>`变成

```
% git   sgit  s  
send-email   -- send collection of patches as emails  
send-pack     -- push objects over git protocol to another repository  
... 
```

它只是复制命令。如果我调整屏幕大小，它会恢复正常：`git s`

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T22:05:52.810

我知道了！该死。这是我的提示

代替：

`PS1=$'%B%F{$fg[green]%}${PWD/#$HOME/~}%{$reset_color%}`git-prompt` ${VIMODE} '`

我应该做

`PS1=$'%{$fg_bold[green]%}${PWD/#$HOME/~}%{$reset_color%}`git-prompt` ${VIMODE} '`

现在一切正常...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-17T09:42:01.263

我在 macOS 上遇到了这个问题，并想分享我是如何解决它的。

据我所知，当您的自定义提示出现问题时会发生这种情况。我有：

```
PROMPT='%{$fg[green]%}%n@%m%{$reset_color%}:%{$fg[cyan]%}${(%):-%~}$reset_color%}$ ' 
```

仔细检查后，我注意到最后一次换色 ( `$reset_color`) 包装不正确。然后我改变了提示，如下所示：

```
PROMPT='%{$fg[green]%}%n@%m%{$reset_color%}:%{$fg[cyan]%}${(%):-%~} %{ $reset_color%}$ '

```

我不再有这个问题。

# c# - 如果选中的复选框列表项在 linq 结果中，则显示列表框

> ID：11146313
> 
> 赞同：0
> 
> 时间：2012-06-21T20:35:13.967
> 
> 标签：c#, asp.net, linq

如果选择了一个或多个特定复选框列表项，我正在尝试找到正确的代码隐藏以显示列表框。复选框列表是从实体数据源创建的，并且该源的 SQL 表还有一个字段，指示该选择是否应显示列表框。哇！该表如下所示：

```
GUID grade_level show_college_list
(gen)    12           0 (bit)
(gen)  College        1 
```

asp是这样的：

```
 <asp:EntityDataSource ID="GradeLevelEntityDataSource" runat="server" 
            ConnectionString="name=NewCourseRequestDataEntities" 
            DefaultContainerName="NewCourseRequestDataEntities" EnableFlattening="False" 
            EntitySetName="grade_levels" OrderBy="it.grade_level_description">
        </asp:EntityDataSource>
        <asp:Label ID="Label7" cssClass="leftlabel" runat="server" text="Grade Level (check all that apply):"></asp:Label>
        <asp:CheckBoxList ID="GradeLevelCheckBoxList" runat="server" cssClass="horizontalcontrols"
            DataSourceID="GradeLevelEntityDataSource" 
            DataTextField="grade_level_description" DataValueField="grade_level_id" AutoPostBack="True"
            OnSelectedIndexChanged="CollegeInstitutionsListboxChange"
            RepeatDirection="Horizontal" RepeatLayout="Flow">
        </asp:CheckBoxList> 
```

如果选中 College，我希望显示机构列表框面板。这是我对代码的了解：

```
 if (sender != null)
            {
                foreach (ListItem grade in GradeLevelCheckBoxList.Items)
                {
                    if (grade.Selected == true)
                    {
                        NewCourseRequestDataEntities context = new NewCourseRequestDataEntities();
                        var guids = from g in context.grade_levels where g.show_college_list == true select g;

                        if ( guids.Contains(new Guid(grade.Value)) )
                        {
                            testselected.Text = grade.Value; //for testing
                            CollegeInstitutionsSelectPanel.Visible = true;
                        }
                    }
                }
            } 
```

我在 contains 方法上收到这两个错误。我不知道他们是什么意思。

错误 1 ​​实例参数：无法从 'System.Linq.IQueryable' 转换为 'System.Linq.ParallelQuery' Y:\visual studio\New Course Request\NewCourseRequestForm.aspx.cs 146 34 New Course Request

错误 2 'System.Linq.IQueryable' 不包含 'Contains' 的定义，并且最佳扩展方法重载 'System.Linq.ParallelEnumerable.Contains(System.Linq.ParallelQuery, TSource)' 有一些无效参数 Y:\visual工作室\新课程请求\NewCourseRequestForm.aspx.cs 146 34 新课程请求

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:41:33.067

找到了 -

```
 NewCourseRequestDataEntities context = new NewCourseRequestDataEntities();
     var guids = (from g in context.grade_levels where g.show_college_list == true select g**.grade_level_id**).ToList();

                        bool contains = guids.Contains(new Guid(grade.Value));
                        if (contains)
                        {
                            CollegeInstitutionsSelectPanel.Visible = true;
                        }
                        else
                        {
                            CollegeInstitutionsSelectPanel.Visible = false;
                        } 
```

我没有在表中指定 Guid 字段。我有 ' *select g* ' 应该有 '*select g.grade_level_id*' （这是 Guid 字段）。不确定我是否需要 ToList ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:44:33.360

这应该可以解决问题（对 .Where(...) 答案稍作修改）：

`foo.Visible = guids.Any(x=>x==new Guid(grade.Value)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:18:27.580

尝试（对于 Error2-我不明白 Error1 来自哪里......）：

```
if(guids.Where(x=>x==new Guid(grade.Value)).FirstOrDefault()!=null)
{
     //etc
} 
```

# google-maps-api-3 - 如何处理包含地名和位置的混合 Google 地方信息查询？

> ID：11146315
> 
> 赞同：0
> 
> 时间：2012-06-21T20:35:21.490
> 
> 标签：google-maps-api-3, google-places-api, google-places

我需要开发一个兴趣点搜索应用程序。我想允许用户输入诸如“圣地亚哥星巴克”或“圣地亚哥星巴克”之类的查询。我可以在 map.google.com 上执行此操作，但我不确定 Google Maps API 是否提供任何此类启发式功能。

我已经在使用 Google 地方信息来查找特定区域内的地方。我可以使用 Geocoding API 在地图上定位地址。

使用当前的 API 是否有可能？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:03:43.550

我建议使用 Google Places Autocomplete API 执行`input`参数为“San Diego Starbucks”的请求，这将返回一个预测列表：

> [https://maps.googleapis.com/maps/api/place/autocomplete/json?input=San%20Diego%20Starbucks&sensor=false&key=your_api_key](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=San%20Diego%20Starbucks&sensor=false&key=your_api_key)

然后，您可以使用`reference`预测返回的参数来执行地点详细信息请求，该请求将为您提供有关所选地点的更多信息，包括地址和地理位置：

> [https://maps.googleapis.com/maps/api/place/details/json?reference=ClREAAAA2UwUUGS85fmru6jzwcSS6fcaMgPItqqLPB-cyTTJm6dMSX0IPmpHAqUR6JWiWoZWrtk6sPI_TJzlfoHma4m0kk3VAoDMu21gebdIdtaMnscSEDDjFLZ5iCC-W1iiAvbZM3caFJuU7TIwS6vj9T77wk24BfpeObSB&sensor=true&key=you_api_key](https://maps.googleapis.com/maps/api/place/details/json?reference=ClREAAAA2UwUUGS85fmru6jzwcSS6fcaMgPItqqLPB-cyTTJm6dMSX0IPmpHAqUR6JWiWoZWrtk6sPI_TJzlfoHma4m0kk3VAoDMu21gebdIdtaMnscSEDDjFLZ5iCC-W1iiAvbZM3caFJuU7TIwS6vj9T77wk24BfpeObSB&sensor=true&key=you_api_key)

# java - 动态改变 JTable 字体大小

> ID：11146319
> 
> 赞同：3
> 
> 时间：2012-06-21T20:35:32.660
> 
> 标签：java, swing, jtable

* * *

**编辑：[已解决]**：似乎每次我尝试增加和减少字体大小时都会调用 CustomTableCellRenderer 的 getTableCellRendererComponent 。

所以我更新了我的代码来处理这个方法本身的字体大小。我正在使用一个静态变量来跟踪当前的字体大小（*这是因为这个值会影响当前在我的 UI 中显示的所有表格的字体大小*）

我已经更新了代码来解决这个问题。欢迎对此提出任何意见/反馈。再次感谢！

* * *

我要解决的问题是基于单击不同的 JLabel 动态更改（即增加/减少）JTable 中的字体大小

我有一个面板，其中包含两个标签（用于增加/减少字体大小）和一个 JTable。我在这个表上附加了一个自定义的 TableCellRenderer。

创建表的代码如下：

```
JTable table = new JTable(data, tableHeader){
    @Override
    public Component prepareRenderer(TableCellRenderer renderer, int row,
            int column) {
        Component component = super.prepareRenderer(renderer, row, column);
        int rendererWidth = component.getPreferredSize().width;
        TableColumn tableColumn = getColumnModel().getColumn(column);
        tableColumn.setPreferredWidth(Math.max(rendererWidth +
                getIntercellSpacing().width + 10,
                tableColumn.getPreferredWidth()));
        return  component;
    }

};
table.setPreferredScrollableViewportSize(new Dimension(5000, 200));
table.setFillsViewportHeight(true);
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
table.setDefaultRenderer(table.getColumnClass(0), new CustomTableCellRenderer()); 
```

自定义 TableCellRenderer 实现如下：

```
public class CustomTableCellRenderer extends DefaultTableCellRenderer {

    private Font customFont;

    public Component getTableCellRendererComponent(JTable table,
            Object value,
            boolean isSelected,
            boolean hasFocus,
            int row,
            int column) {
        Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        customFont = component.getFont();
        customFont = new Font(customFont.getName(), customFont.getStyle(), MainUI.DEFAULT_TABLE_FONT_SIZE);
        component.setFont(customFont);

        if (value.toString().matches("(?i:.*error.*)")) {
            c.setForeground(Color.RED);
        } else {
            c.setForeground(Color.BLACK);
        }
        return c;
    }

    public void increaseFontSize(){
        MainUI.DEFAULT_TABLE_FONT_SIZE = getFont().getSize() + 1;
    }

    public void decreaseFontSize(){
        MainUI.DEFAULT_TABLE_FONT_SIZE = getFont().getSize() + 1;
    }

} 
```

对于按钮，我附加了一个鼠标侦听器和 mouseClicked 事件，我正在尝试执行以下操作来实现该功能：

```
if(table.getDefaultRenderer(table.getColumnClass(0)) instanceof CustomTableCellRenderer){
    CustomTableCellRenderer tableCellRenderer = (CustomTableCellRenderer) table.getDefaultRenderer(table.getColumnClass(0));
    tableCellRenderer.increaseFontSize();
    table.repaint();            
} 
```

但是我看表没有变化。我究竟做错了什么？以及如何实现所需的功能？

任何意见/建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:42:23.383

*   基本上你必须设置 JTable#setFont()

*   在渲染器中你可以增加 FontSize 取决于

    a) TableCell 中的值

    b) 行或列索引

    c) isSelected 和 hasFocus

*   在渲染器中最好覆盖 isSelected 和 hasFocus

*   对于没有更改 TabelModel 和 ColumnModel 的 JTable，可以仅使用 prepareRender（我的观点是我喜欢 prepareRenderer）

编辑

我将更改 JTable#setFont()，而不是将其增加到 Renderer，然后将更改的字体应用于行、列或选择

![在此处输入图像描述](../Images/0719a534340fbff31cbb73c21bf86d59.png)

![在此处输入图像描述](../Images/46fc82b6ce6d07a513b325309883ae96.png)

![在此处输入图像描述](../Images/650e96b9e2357bd646ed8b78074286fa.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.font.TextAttribute;
import java.util.Map;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.MatteBorder;
import javax.swing.table.*;

public class TablePrepareRenderer extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table;

    public TablePrepareRenderer() {
        Object[] columnNames = {"Type", "Company", "Shares", "Price", "Boolean"};
        Object[][] data = {
            {"Buy", "IBM", new Integer(1000), new Double(80.50), false},
            {"Sell", "MicroSoft", new Integer(2000), new Double(6.25), true},
            {"Sell", "Apple", new Integer(3000), new Double(7.35), true},
            {"Buy", "Nortel", new Integer(4000), new Double(20.00), false}
        };
        DefaultTableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) /*{

                private static final long serialVersionUID = 1L;
                private Border outside = new MatteBorder(1, 0, 1, 0, Color.red);
                private Border inside = new EmptyBorder(0, 1, 0, 1);
                private Border highlight = new CompoundBorder(outside, inside);

                @Override
                public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component comp = super.prepareRenderer(renderer, row, column);
                JComponent jc = (JComponent) comp;
                Map attributes = (table.getFont()).getAttributes();
                //attributes.put(TextAttribute.WEIGHT, TextAttribute.WEIGHT_BOLD);
                attributes.put(TextAttribute.STRIKETHROUGH, TextAttribute.STRIKETHROUGH_ON);
                if (!isRowSelected(row)) {
                comp.setForeground(Color.black);
                comp.setBackground(row % 2 == 0 ? Color.white : Color.orange);
                int modelRow = convertRowIndexToModel(row);
                String type = (String) getModel().getValueAt(modelRow, 0);
                if (type.equals("Sell")) {
                comp.setFont(new Font(attributes));
                comp.setForeground(Color.red);
                } else {
                comp.setFont(table.getFont());
                }
                } else {
                comp.setFont(table.getFont());
                }
                jc.setBorder(BorderFactory.createCompoundBorder(jc.getBorder(), BorderFactory.createEmptyBorder(0, 0, 0, 5)));
                return comp;
                }
                }*/;
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        JButton increase = new JButton("+");
        increase.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                Font font = table.getFont();
                font = font.deriveFont((float) (font.getSize2D() * 1.10));
                table.setFont(font);
            }
        });
        add(increase, BorderLayout.EAST);
        JButton decrease = new JButton("-");
        decrease.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                Font font = table.getFont();
                font = font.deriveFont((float) (font.getSize2D() * .90));
                table.setFont(font);
            }
        });
        add(decrease, BorderLayout.WEST);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TablePrepareRenderer frame = new TablePrepareRenderer();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# entity-framework-4.1 - 是否可以将 WillCascadeOnDelete 添加到多对多关系的一侧

> ID：11146324
> 
> 赞同：7
> 
> 时间：2012-06-21T20:35:53.367
> 
> 标签：entity-framework-4.1, ef-code-first

我有以下模型：

```
public class List
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }

    public virtual ICollection<ListRules> ListRule { get; set; }
}

public class ListRule
{
    public virtual int Id { get; set; }
    public virtual List List { get; set; }

    public virtual ICollection<List> Lists { get; set; }
} 
```

一个 List 可以有许多 ListRules。ListRule 必须属于一个列表。ListRule 也可以有 0、1 或许多与之关联的列表。

我尝试了以下绑定：

```
modelBuilder.Entity<ListRule>()
            .HasRequired(x => x.List)
            .WithMany(x => x.ListRule)
            .Map(x => x.MapKey("ListId"));
modelBuilder.Entity<ListRule>()
            .HasMany(x => x.Lists)
            .WithMany()
            .Map(x => {
                          x.MapLeftKey("ListRuleId");
                          x.MapRightKey("ListId");
                          x.ToTable("ListRuleLists");
                      }); 
```

在我们进一步讨论之前，我想澄清一下我正在寻找的结果：

当有人删除列表时，我希望级联删除约束自动删除与 ListRule 表中的列表关联的关系以及 ListRule 和 ListRuleLists 表之间的多对多关系。

当我尝试更新数据库时，我收到一条错误消息，提示“表 'ListRuleLists' 上的 FOREIGN KEY 约束 'FK_ListRuleLists_Lists_ListId' 可能会导致循环或多个级联路径。” 我理解为什么会这样，目前解决它的一种方法是将 WillCascadeOnDelete(false) 添加到上面的第一个模型绑定中。

但这会产生不希望的副作用。假设在 ListRuleList 表中有一个 List 和一个 ListRule，没有多对多关系。如果用户删除列表，则 ListRule 现在将因为 WillCascadeOnDelete(false) 而成为孤立对象。

我该如何将 WillCascadeOnDelete(false) 添加到第二个绑定的 RightKey 侧？换句话说，我想从外键约束“FK_ListRuleLists_Lists_ListId”中删除级联删除。

可能吗？如果没有，有没有其他方法可以解决这个问题？

# c# - 如何在 C# 中交换 2 个 Dictionary 对象而不进行复制

> ID：11146335
> 
> 赞同：0
> 
> 时间：2012-06-21T20:37:11.743
> 
> 标签：c#

全部：

我有 2 个字典对象 d1 和 d2。它们在开始时是单独创建的，内容是单独添加到它们的。经过一些处理，我想做以下事情：

*   使 d1 参考 d2；
*   使 d2 引用一个新对象。

我是 C# 初学者，只能找到以下方法来完成这项工作：

```
d1 = new Dictionary<int, int>(d2);
d2 = new Dictionary<int, int>(); 
```

我可以像下面的 C++ 方式那样更有效地做到这一点吗？伪代码：

```
d1 = d2;
d2 = new Dictionary<int, int>(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:38:46.570

```
d1 = d2;
d2 = new Dictionary<int, int>(); 
```

这实际上可以完成这项工作。我不明白为什么这不起作用。字典是引用类型，因此您不会复制它们，而只是在执行上述操作时重新分配引用（正是您想要做的）。

[http://msdn.microsoft.com/en-us/library/490f96s2.aspx](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)

# ajax - Anti Forge 令牌和 Ajax JSON Post 不起作用

> ID：11146338
> 
> 赞同：-1
> 
> 时间：2012-06-21T20:37:20.597
> 
> 标签：ajax, json, asp.net-mvc-3, antiforgerytoken

我正在运行 MVC3、.Net 4 和 VS2010。我有以下示例项目来说明问题。

我的控制器代码

```
namespace AntiForgeAjaxTest.Controllers
{
    public class IndexController : Controller
    {
        public ActionResult Index()
        {
            MyData d = new MyData();
            d.Age = 20;
            d.Name = "Dummy";
            return View(d);
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public ActionResult Index(MyData data)
        {
            NameValueCollection nc = Request.Form;
            return View(data);
        }

        protected override void ExecuteCore()
        {
            base.ExecuteCore();
        }
    }
} 
```

我的观点和 JavaScript 代码

```
@model AntiForgeAjaxTest.Models.MyData

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Index</title>
    <script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
    <script src="../../Scripts/json2.js" type="text/javascript"></script>
</head>
<body>
@using (Html.BeginForm("Index", "Index"))
{ 
    @Html.AntiForgeryToken()

    <table>
        <tr>
            <td>Age</td>
            <td>@Html.TextBoxFor(x => x.Age)</td>
        </tr>
        <tr>
            <td>Name</td>
            <td>@Html.TextBoxFor(x => x.Name)</td>
        </tr>
    </table>

    <input type="submit" value="Submit Form" /> <input type="button" id="myButton" name="myButton" value="Ajax Call" />
}

<script type="text/javascript">
    $(document).ready(function () {

        $('#myButton').click(function () {
            var myObject = {
                __RequestVerificationToken: $('input[name=__RequestVerificationToken]').val(),
                Age: $('#Age').val(),
                Name: $('#Name').val(),
            };

            alert(JSON.stringify(myObject));

            $.ajax({
                type: 'POST',
                url: '/Index/Index',
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(myObject),
                success: function (result) {
                    alert(result);
                },
                error: function (request, error) {
                    alert(error);
                }
            });
        });
    });
</script>
</body>
</html> 
```

这里我有 2 个按钮，第一个触发表单发布，第二个触发 Ajax 发布。表单发布工作正常，但 Ajax 没有，`A required anti-forgery token was not supplied or was invalid.`即使我已经在我的 JSON 中包含了令牌，服务器也会抱怨。

知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:33:04.480

此代码有效。

```
@model AntiForgeAjaxTest.Models.MyData

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Index</title>
    <script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
    <script src="../../Scripts/json2.js" type="text/javascript"></script>
</head>
<body>
@using (Html.BeginForm("Index", "Index"))
{ 
    @Html.AntiForgeryToken()

    <table>
        <tr>
            <td>Age</td>
            <td>@Html.TextBoxFor(x => x.Age)</td>
        </tr>
        <tr>
            <td>Name</td>
            <td>@Html.TextBoxFor(x => x.Name)</td>
        </tr>
    </table>

    <input type="submit" value="Submit Form" /> <input type="button" id="myButton" name="myButton" value="Ajax Call" />
}

<script type="text/javascript">
    $(document).ready(function () {

        $('#myButton').click(function () {
            post();
        });
    });

    function post() {
        var myObject = {
            __RequestVerificationToken: $('input[name=__RequestVerificationToken]').val(),
            Age: $('#Age').val(),
            Name: $('#Name').val(),
        };

        $.post('/Index/Index/', myObject);
    }

</script>
</body>
</html> 
```

# c# - 为什么相同的 NHibernate 查询在 WinForm 项目中的运行速度比 MSTest 单元测试慢一个数量级？

> ID：11146341
> 
> 赞同：4
> 
> 时间：2012-06-21T20:37:28.297
> 
> 标签：c#, winforms, fluent-nhibernate, mstest, select-n-plus-1

我有一个在生产环境中作为服务运行的应用程序，但我们使用简单的 GUI 进行了一些手动测试——其中几乎没有发生任何事情，它只是一个带有用于输入的文本框的包装器。

我最近更改了我的数据库模式并更新了我的映射以匹配，然后 GUI 突然在一个微不足道的情况下工作得非常缓慢。经过一些记录并多次运行后，发现新的瓶颈是这个查询：

```
public void Refresh()
{
  using (var session = _sessionFactory.OpenSession()) 
  {
      _allFields = session.Query<FieldDefinition>().ToList();
  }
} 
```

重复地，该方法花费了 1:08 分钟（即使数据库中只有大约 300 个 FieldDefinitions）。到这个时候，我已经厌倦了手动重新运行 GUI，所以我编写了一个单元测试来执行完全相同的情况 - 但我无法重现减速。

我的测试调用了 GUI 使用相同输入执行的相同顶级对象。我希望这将在几乎相同的时间内运行。但是，当使用 MSTest 在 Visual Studio 中运行时，相同的查询只用了不到两秒的时间。那是时间的 1/30。它正在做完全相同的工作，只是速度要快得多。

我检查了是否可以使它们运行相同的东西：

*   两种方法都产生相同数量的 SQL 语句。
*   它似乎不是由 JITter 引起的（多次运行 GUI 而不重新启动它，同时一遍又一遍的结果）
*   将其隔离以使其`ISessionFactory`对每个`Refresh`都使用全新的没有效果
*   关闭日志记录（log4net）没有效果

将查询更改为急切加载孩子*确实*有效……有点：应用修复后，WinForms 应用程序的速度仅与单元测试的速度一样*快*。单元测试的速度没有显着变化（十分之一秒）。

旧查询导致了`select n+1`问题：但 Winform 和 MSTest 运行中都存在该问题。因此，只有 WinForm 应用程序出现了明显的放缓。

我该如何解释？**为什么只有 WinForm 应用程序在 Select N+1 查询期间会遭受巨大的减速？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:38:07.600

我会说简介它，然后你就会知道。

# php - 使用自动完成搜索文件

> ID：11146344
> 
> 赞同：0
> 
> 时间：2012-06-21T20:37:35.167
> 
> 标签：php, arrays, json, autocomplete

我正在尝试使用自动完成功能来搜索一些文件，但它不起作用，我不知道为什么。

将制作一个使用数据库结果的简单自动完成示例：

```
$items = array();
while(!$res->EOF){

    $descPi  = "PI: ".$res->fields["FIELD1"];
    $descEmb = " - EMB: ".$res->fields["FIELD2"]."/".$res->fields["FIELD3"]."/".$res->fields['FIELDS4'];
    $origem  = " - ORI: ".$res->fields['FIELD5'];
    $fornec  = " - FOR: ".$res->fields['FIELD6'];   

    $items[$descPi.$descEmb.$origem.$fornec]  = $res->fields["FIELD1"];
    $res->MoveNext();
} 
```

这项工作完美，输出这样的数组（通过萤火虫）：

```
Array
  (
    [PI: 3221554 - EMB: 30/6/2012 - ORI: TAIWAN - FOR: SIRUBA] => 3221554
   )
[ { "id": "3221554", "label": "PI: 3221554 - EMB: 30/6/2012 - ORI: TAIWAN - FOR: SIRUBA", "value": "PI: 3221554 - EMB: 30/6/2012 - ORI: TAIWAN - FOR: SIRUBA" } ] 
```

完美的。

* * *

现在我有几乎相同的，但搜索文件，它**不工作**：

```
$items = array();
for($j=0;$j<count($files);$j++)
{
    if($files[$j] != "." and $files[$j] != ".."){
        $items[$files[$j]]  = $files[$j];
    }
} 
```

并输出这个（通过萤火虫）：

```
Array
 (
   [Dock.jpg] => Dock.jpg
   [Forest Flowers.jpg] => Forest Flowers.jpg
   [Forest.jpg] => Forest.jpg
   [Tree.jpg] => Tree.jpg
 )
 [  ] // return's empty 
```

调试代码，我发现了这个`strpos`验证，他说我的数组正在返回`false`，而不是输入`array_push`：

```
$result = array();
foreach ($items as $key=>$value) {
if (strpos(strtolower($key), $q) !== false) {
    array_push($result, array("id"=>$value, "label"=>$key, "value" => strip_tags($key)));
}
if (count($result) > 11)
    break;
} 
```

所以，比较两个数组，我没有发现任何差异，我错过了什么？

就是这样，有任何问题，请做我的客人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:28:56.900

根据上面的评论，`strpos(strtolower($key), $q)`您的查询与数组索引不匹配。您的索引是文件名，因此要实现匹配，您需要将文件名作为`$q`.

# java - IntelliJ：添加依赖项不起作用，但在 SDK（项目设置）下添加到类路径有效

> ID：11146346
> 
> 赞同：1
> 
> 时间：2012-06-21T20:37:50.193
> 
> 标签：java, intellij-idea, classpath

谁能帮忙？

我已经阅读了各种博客，它似乎包括 i18n 属性和其他文件，我必须将它们添加为模块依赖项，选择 Jar .. 目录，然后选择“类”类别。

我已经这样做了，但我一直收到一个错误，说它找不到 XML 文件。特别是这个

```
admin-sidebar.xml 
```

我设法通过在 Projec Settings、SDK 下添加 2 个目录并将它们添加到类路径来解决此问题。

但这很烦人，因为它在教程中不起作用..我一定做错了什么。

我必须在类路径中添加 2 个目录。

第一个目录有大约 8 个 .properties 文件，这些是标准的 javabundle。

下一个目录有以下内容

> admin-sidebar.xml METAINF（目录） mime.types（METAINF 目录中的文件）

谁能告诉我我做错了什么，当然我可以按照我所做的方式离开它似乎可以解决问题，但感觉就像我做的不对

有什么想法或帮助吗？

提前致谢

**编辑**

这是压缩的项目。

[https://docs.google.com/open?id=0ByGL4ug6mtrsdFFNNmtZNXMxV0k](https://docs.google.com/open?id=0ByGL4ug6mtrsdFFNNmtZNXMxV0k)

好的，这就是我正在做的，添加模块但它不起作用

添加时的外观，我选择类

![在此处输入图像描述](../Images/88c5618c0e9f64ae2e21f66e1d40c4c0.png)

这就是添加时的样子

![在此处输入图像描述](../Images/dc7a4cc1c3003a146ab738b682b0a6ac.png)

上面的这个不起作用，但是直接添加它也可以在 jdk 类路径中起作用，注意它是相同的 2 个目录。

![在此处输入图像描述](../Images/44efcc864e1f24c260301cc6febfad08.png)

目录的内容是（按顺序）

![在此处输入图像描述](../Images/4603548d3de4e8ed6c06394196bbf3dc.png)

![在此处输入图像描述](../Images/146460ba0bbe098239140ca47f3f994a.png)

![在此处输入图像描述](../Images/c63ad30f8d9c08abd1240a23c8e15940.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:18:54.837

您可以将其配置为添加到[模块依赖](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)项的库（类路径）条目，或者将目录设置为**Sources**以便这些文件自动添加到类路径（并根据`Settings`| `Compiler`|复制到输出`Resource Patterns`）。

如果此方法不起作用，请共享一个示例项目，其中任一配置显示问题。

另请参阅我对相关问题的回复：[Add a properties file to IntelliJ's classpath](https://stackoverflow.com/q/3765998/104891)。

# php - 我可以在 quote->getAllItems() 上调用哪些方法？

> ID：11146347
> 
> 赞同：2
> 
> 时间：2012-06-21T20:37:53.023
> 
> 标签：php, magento

事实证明，这不可能找到谷歌搜索，所以如果有人能帮我解决这个问题，我将不胜感激。我对 Magento 比较陌生，所以它甚至可能有官方文档。

当我有以下内容时，即抓取引用对象，然后在其上调用 getAllItems()，我在哪里可以看到我可以在 getAllItems() 上调用的所有方法？

```
$cart = Mage::getModel('checkout/cart')->getQuote();

foreach ($cart->getAllItems() as $item) {
    $productId = $item->getProduct()->getId();
    $productPrice = $item->getProduct()->getPrice();
} 
```

即我见过 getId() 等，但我还可以使用哪些其他方法？

此外，如果我想在报价对象中包含自定义数据，我应该在哪里创建自定义 get 方法来访问这些数据？

谢谢保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:42:04.793

### 获取类方法

如果您只想知道可以调用哪些方法`$item`，请使用

```
var_dump(get_class_methods($item)); 
```

获取类方法列表。

### 识别类文件

如果你想知道哪个文件包含 的类定义`$item`，首先使用

```
var_dump(get_class($item)); 
```

获取类名（`Mage_Sales_Model_Quote_Item`在这种情况下）。

`_`然后用斜杠 ( )替换所有下划线 ( )`/`并附`.php`加到它。这将为您提供类文件的相对文件路径（`Mage/Sales/Model/Quote/Item.php`在本例中）。

现在检查文件夹

```
app/code/local/
app/code/community/
app/code/core/
lib/ 
```

按照给定的相对路径的顺序。第一个匹配通常是你想要的类文件。

### 创建访问自定义报价属性的方法

你不必。Magento 将为您执行此操作。

像许多其他 Magento 模型一样，报价对象基于`Varien_Object`. 后者提供了一种`_call()`方法，这是 PHP 的[神奇方法](http://www.php.net/manual/en/language.oop5.magic.php)之一：

```
public function __call($method, $args)
{
    switch (substr($method, 0, 3)) {
        case 'get' :
            //Varien_Profiler::start('GETTER: '.get_class($this).'::'.$method);
            $key = $this->_underscore(substr($method,3));
            $data = $this->getData($key, isset($args[0]) ? $args[0] : null);
            //Varien_Profiler::stop('GETTER: '.get_class($this).'::'.$method);
            return $data;

        case 'set' :
            //Varien_Profiler::start('SETTER: '.get_class($this).'::'.$method);
            $key = $this->_underscore(substr($method,3));
            $result = $this->setData($key, isset($args[0]) ? $args[0] : null);
            //Varien_Profiler::stop('SETTER: '.get_class($this).'::'.$method);
            return $result;

        case 'uns' :
            //Varien_Profiler::start('UNS: '.get_class($this).'::'.$method);
            $key = $this->_underscore(substr($method,3));
            $result = $this->unsetData($key);
            //Varien_Profiler::stop('UNS: '.get_class($this).'::'.$method);
            return $result;

        case 'has' :
            //Varien_Profiler::start('HAS: '.get_class($this).'::'.$method);
            $key = $this->_underscore(substr($method,3));
            //Varien_Profiler::stop('HAS: '.get_class($this).'::'.$method);
            return isset($this->_data[$key]);
    }
    throw new Varien_Exception("Invalid method ".get_class($this)."::".$method."(".print_r($args,1).")");
} 
```

现在，当您想在报价对象中包含自定义数据时，您只需调用

```
$quote->setMyCustomAttribute(911); 
```

在这样的调用中，PHP 将检查引用对象中定义的方法`setMyCustomAttribute()`。如果找不到这样的方法，它会检查对象是否有魔法`__call()`方法并调用这个方法。

在我们的示例中，将匹配的`set`大小写。`__call()`

现在发生的事情是，Magento 首先将驼峰式字符串`setMyCustomAttribute`转换为带下划线的键`my_custom_attribute`。然后它将值存储`911`到受保护的属性`Varien_Object::_data['my_custom_attribute']`中。

要从报价对象中读​​取自定义数据，您可以简单地调用

```
$value = $quote->getMyCustomAttribute(); 
```

原理是一样的：`getMyCustomAttribute`转换成`my_custom_attribute`，返回当前值`Varien_Object::_data['my_custom_attribute']`。

这就是所有的魔法。

但请注意，这只是暂时的。如果您希望能够保存/加载自定义属性，则需要扩展报价对象。但那是另一回事了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:26:20.990

报价项目的类型是`Mage_Sales_Model_Quote_Item`

您可以通过执行以下操作来确认：`get_class($item)`

所以你的调查将从这里开始：`app/code/core/mage/sales/model/quote/item.php`

注意：其中一个非常有用且经常使用的方法是`getProduct()`返回报价项目所代表的产品。它将为您提供类型模型，`Mage_Catalog_Model_Product`因此可以访问产品属性，这在很多情况下都非常有用。

同样值得注意的是 getQuote() 方法。

除此之外，只需查看报价项目类文件及其扩展的文件即可发现正在发生的事情以及您可以使用的内容。

最终，一个引用项扩展了:`Mage_Core_Model_Abstract`并且反过来`Varien_Object`( `lib/varien/object.php`)

通过查看，`Varien_Object`您会发现`getData()`&`setData()`方法 + 神奇的 getter 和 setter。这些是一些可用于获取和设置模型（扩展`Varien Object`）属性的方法 - 这应该回答您问题的第二部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:47:15.687

如果我错了，请纠正我，但我相信您可以使用销售订单项目模型中的所有方法：http: [//docs.magentocommerce.com/Mage_Sales/Mage_Sales_Model_Order_Item.html](http://docs.magentocommerce.com/Mage_Sales/Mage_Sales_Model_Order_Item.html)

大部分方法是用来检查物品的状态，是否与其他物品分开发货等，但它也继承了一堆方法。

您也可以使用旧的*$item->getData('attribute')*来获取特定产品属性的数据。

# javascript - 使用触摸激活事件

> ID：11146350
> 
> 赞同：0
> 
> 时间：2012-06-21T20:38:04.290
> 
> 标签：javascript

我正在开发基于[此](http://www.lostdecadegames.com/how-to-make-a-simple-html5-canvas-game/)的游戏，但试图实现它以在触摸设备上工作。他们是否接触的代码仍然相同；

```
if (
    reggie.x <= (monster.x + 32)
    && ball.x <= (reggie.x + 32)
    && reggie.y <= (monster.y + 32)
    && ball.y <= (reggie.y + 32)
) {
    ++ballsCollected;
    reset();
} 
```

为了使它到达您不需要触摸设备上的方向键的位置，我试图弄清楚如何使它在您单击球时将其添加到ballsCollected中。我看过使用触摸事件，但我不确定如何让它工作。

如果有一种方法可以通过用手指拖动雷吉来移动雷吉，以使两个对象连接起来，并且仍然添加一个很酷并增加一点挑战的对象。

任何帮助或指向正确方向都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:34:41.393

> 任何帮助或指向正确方向都会有所帮助

网上有很多参考资料。看一下

*   [W3 规范草案](http://www.w3.org/TR/touch-events/)
*   [MDN 参考](https://developer.mozilla.org/en/DOM/Touch_events)
*   [html5rocks 教程](http://www.html5rocks.com/en/mobile/touch/)
*   quriksmode.org：[触摸动作](http://www.quirksmode.org/blog/archives/2010/02/the_touch_actio.html)/[我们需要触摸事件吗？](http://www.quirksmode.org/blog/archives/2010/02/do_we_need_touc.html)
*   [jQuery mobile 的事件](http://jquerymobile.com/test/docs/api/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:45:09.867

如果要使用触摸设备，请使用 touchmove 事件而不是 keydown。

```
 $("#game-container").bind("touchmove", function (event) {

          reggie.x = event.originalEvent.targetTouches[0].pageX;
          reggie.y = event.originalEvent.targetTouches[0].pageY;

          if (
      reggie.x <= (monster.x + 32)
      && monster.x <= (reggie.x + 32)
      && reggie.y <= (monster.y + 32)
      && monster.y <= (reggie.y + 32)
          ) {
              ++monstersCaught;
          reset();
        }

      }); 
```

# memory-management - 为什么内存映射文件总是映射在页边界？

> ID：11146352
> 
> 赞同：1
> 
> 时间：2012-06-21T20:38:08.890
> 
> 标签：memory-management, computer-architecture

这是我在这里的第一个问题；我不确定它是否离题。

在自学时，我发现了以下关于操作系统的陈述：

> 允许内存映射文件的操作系统总是需要在页面边界映射文件。例如，对于 4 KB 页，文件可以从虚拟地址 4096 开始映射，但不能从虚拟地址 5000 开始映射。

该语句解释如下：

> 如果一个文件可以映射到页面的中间，则单个虚拟页面将需要磁盘上的两个部分页面来映射它。特别是第一页将被映射到暂存页以及文件页。为它处理页面错误将是一项复杂且昂贵的操作，需要复制数据。此外，没有办法捕获对页面未使用部分的引用。由于这些原因，它被避免了。

我想寻求帮助以理解这个答案。特别是，说“单个虚拟页面需要磁盘上的两个部分页面来映射它”是什么意思？根据我对内存映射文件的发现，虚拟页面映射到磁盘上的文件，而不是页面文件。这就是“部分页面”的意思吗？

另外，这里的“临时页面”是什么意思？我试图在书籍（Tanenbaum 的“现代操作系统”和“结构化计算机组织”）和网络上查找这个术语，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:30:11.463

首先，在阅读书籍和文档时，请始终尝试批判性地看待您所看到的。有时作者倾向于使用诸如“没有其他方法”之类的语言来宣传他们所描述的解决方案。其他方式总是可能的。

现在谈这个问题。现代操作系统总是为每个分配的内存页分配一个磁盘位置。这是有道理的。一旦有必要丢弃内存中的页面 - 如果它是“脏”的，则已经清楚将该页面放置在哪里，或者如果它没有被修改，则将其丢弃。这种策略被广泛接受。尽管替代政策也是可能的。

磁盘位置可以是页面文件或内存映射文件。内存映射文件的最常见用途 - 可执行文件和 dll。它们（几乎）从未被修改过。如果带有代码的页面有一段时间没有使用 - 丢弃它。如果控制将出现 - 从文件中重新读取它。

在你提到的摘要中，他们说`would need two partial pages on disk to map it. The first page, in particular, would be mapped onto a scratch page`。他们倾向于呈现这种情况，就像这里只有一种解决方案一样。事实上，可以在页面文件中为这样的组合页面分配页面并处理适当的数据复制。也可以在该页面的页面文件中没有任何内容，并使用临时页面从文件中组装该页面。在 99% 的情况下，磁盘控制器只能从/向页面边界读取/写入。这意味着您需要从第一个文件读取到内存页面，从第二个文件读取到临时页面。从临时页面复制数据并立即丢弃。

如您所见，完全可以在一页中合并多个文件。这里没有原则问题。尽管处理这种解决方案的算法会更复杂，并且会消耗更多的 CPU 时钟。重建这样的页面（如果它将被丢弃）将需要从几个不同的文件中读取。在我们的时代，4kb 是相当小的数量。节省 2kb 并不是一个巨大的收获。在我看来，看看收益和成本，我会说收益不够显着。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:24:06.447

虚拟地址页面（在我听说过的每台机器上）在页面大小的边界上对齐。这仅仅是因为它使数学变得非常容易。在 x86 上，页面大小为 4096。这正好是 12 位。要找出地址所指的虚拟页面，只需将地址向右移动 12。如果要将磁盘块（假设 4096 字节）映射到地址 5000，它将从第 1 页开始（ 5000 >> 12 == 1) 并在第 2 页结束 (9095 >> 12 == 2)。

内存映射文件通过将一大块虚拟地址空间映射到文件来工作，但数据是按需加载的（实际上，文件可能比物理内存大得多并且可能不适合）。当您第一次访问虚拟地址时，如果数据不存在（即它不在物理内存中）。处理器将出现故障，操作系统必须获取数据。获取数据时，需要获取页面的所有数据，否则无法关闭故障。如果您没有对齐地址，那么您必须引入多个磁盘块来填充页面。你当然可以这样做，它只是混乱和低效。

# c++ - Boost 序列化版本错误

> ID：11146353
> 
> 赞同：2
> 
> 时间：2012-06-21T20:38:14.887
> 
> 标签：c++, boost, xml-serialization, boost-serialization

以下代码在使用 1.49.0 版本的 boost 序列化库运行时会破坏版本号。

```
#include <boost/serialization/nvp.hpp>
#include <boost/archive/xml_oarchive.hpp>
#include <iostream>

using namespace std;
using namespace boost::archive;

class Nested {
public:
    explicit Nested()
    : mC()
    { }

    explicit Nested(char c)
    : mC(c)
    { }

private:
    friend class boost::serialization::access;

    template<class Archive>
    void serialize(Archive& ar, const unsigned int)
    {
        using boost::serialization::make_nvp;
        ar & make_nvp("c", mC);
    };

private:
    char mC;
};

BOOST_CLASS_VERSION(Nested, 0);

int main()
{
    Nested n('c');

    {
        using boost::serialization::make_nvp;
        xml_oarchive ar(cout);
        ar << make_nvp("Nested", n);
    }

    return 0;
} 
```

版本 1.49.0 的输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE boost_serialization>
<boost_serialization signature="serialization::archive" version="9">
<Nested class_id="0" tracking_level="0" version="2057815296">
        <c>99</c>
</Nested>
</boost_serialization> 
```

当我使用旧版本运行时，我得到了预期的 0 版本：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE boost_serialization>
<boost_serialization signature="serialization::archive" version="6">
<Nested class_id="0" tracking_level="0" version="0">
        <c>99</c>
</Nested>
</boost_serialization> 
```

我是否错过了跨版本更改的内容？还有其他人经历过吗？

# c++ - 在 unique_ptr 上使用强制转换运算符是否危险？

> ID：11146354
> 
> 赞同：5
> 
> 时间：2012-06-21T20:38:17.033
> 
> 标签：c++, c++11, unique-ptr

我们有一个广泛的代码库，目前使用原始指针，我希望迁移到 unique_ptr。但是，许多函数期望原始指针作为参数，并且在这些情况下不能使用 unique_ptr。我意识到我可以使用 get() 方法来传递原始指针，但这增加了我必须接触的代码行数，而且我觉得它有点难看。我推出了自己的 unique_ptr，如下所示：

```
template <class T>
class my_unique_ptr: public unique_ptr <T>
{
  public:

    operator T*() { return get(); };
}; 
```

然后，每次我向需要原始指针的函数 parm 提供 my_unique_ptr 时，它都会自动将其转换为原始指针。

问题：这样做有什么本质上的危险吗？我原以为这会是 unique_ptr 实现的一部分，所以我假设它的遗漏是故意的——有人知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T23:09:23.437

隐式转换可能会意外发生很多丑陋的事情，例如：

```
std::unique_ptr<resource> grab_resource() 
{return std::unique_ptr<resource>(new resource());}

int main() {
    resource* ptr = grab_resource(); //compiles just fine, no problem
    ptr->thing(); //except the resource has been deallocated before this line
    return 0; //This program has undefined behavior.
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T20:44:24.990

`get`它与在上调用 相同`unique_ptr<>`，但它会自动完成。您必须确保在函数返回后指针不被存储/使用（因为`unique_ptr<>`在其生命周期结束时将删除它）。

还要确保您不要`delete`（甚至间接地）调用原始指针。

还要确保的另一件事是，您不会创建另一个拥有指针所有权的智能指针（例如另一个`uniqe_ptr<>`）——请参阅上面的删除注释

`unique_ptr<>`不自动为您进行转换（并且您是否显式调用）的原因`get()`是为了确保您可以控制何时访问原始指针（以避免上述问题可能会以其他方式静默发生）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:06:41.990

在 a 上提供隐式转换运算符（到原始指针）的主要“危险”`unique_ptr`源于`unique_ptr`应该对单一所有权语义建模的事实。这也是为什么不能复制 a `unique_ptr`，但可以移动它的原因。

考虑这个“危险”的一个例子：

```
class A {};

/* ... */

unique_ptr<A> a(new A);

A* a2 = a;
unique_ptr<A> a3(a2); 
```

现在*两个* `unique_ptr`s 模型对指向的对象的单一所有权语义，自由世界的命运——不，**宇宙**——悬而未决。

好吧，我有点戏剧化，但这就是想法。

就解决方法而言，我通常只会调用`.get()`指针并完成它，小心地认识到我只是`got()`.

鉴于您有一个大型的遗留代码库并试图迁移到 using `unique_ptr`，我认为您的转换包装器很好 - 但仅假设您和您的同事将来在维护此代码时不会出错. 如果您认为这是一种可能性（我通常会因为我是偏执狂），我会尝试改进所有现有代码以`.get()`显式调用而不是提供隐式转换。编译器会很高兴地为您找到需要进行此更改的所有实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T23:19:47.557

> 在 unique_ptr 上使用强制转换运算符是否危险？

**编辑**看评论

^(~~---不，它当然不应该是危险的---：~~)事实上，标准要求~~隐式~~ `explicit`转换为*“安全布尔”*（参见[安全布尔成语](http://www.artima.com/cppsource/safebool.html)）。

编辑说明：

新标准（也引入了 unique_ptr）引入了**`explicit operator T()`**演员表。它仍然适用于 unique_ptr *，就好像*它是隐式转换一样，因为,`if`会自动*将*上下文转换为 bool。`while``for(;x;)`

 *在我的辩护中，我的知识主要基于像[Boost](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/scoped_ptr.htm)这样的 C++03 库，它们*确实*定义了到`unspecified-bool-type` *隐式*的转换。

我希望这对其他人仍然有用。

* * *

（有关更多规范处理，请参见其他答案，包括转换为原始指针）*

# ruby-on-rails - 编辑已存在的复选框选项

> ID：11146356
> 
> 赞同：0
> 
> 时间：2012-06-21T20:38:25.320
> 
> 标签：ruby-on-rails

我有一个`User`has_many `Categories`。

这些类别表示为复选框。

我想要发生的是在他们的设置页面上，它应该显示所有复选框，并且他们之前选择的复选框已经被选中。

它还应该允许他们检查新的，或取消选中现有的以更新他们的个人资料。

这是我在他们第一次选择类别时最初生成复选框的方式：

```
 <% @categories.each do |cat| %>
              <span class="three columns alpha">
          <label for="regularCheckbox">
        <%= check_box_tag "user[category_ids][]", cat.id, false %>
            <span class="gig-check"><%= cat.name %></span>
          </label>                  
        </span>
      <% end %> 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:56:23.450

check_box_tag 的定义是：

```
check_box_tag(name, value = "1", checked = false, options = {}) 
```

所以，第三个参数是复选框是否被选中。你总是把它作为“假”传递。相反，你应该有这样的东西：

```
<% @categories.each do |cat| %>
      <span class="three columns alpha">
      <label for="regularCheckbox">
        <%= check_box_tag "user[category_ids][]", cat.id, @user.categories.include?(cat) %>
        <span class="gig-check"><%= cat.name %></span>
      </label>                  
    </span>
  <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:10:53.437

我通常这样做：

```
<% @categories.each do |cat| %>
  <% checked = @user.categories.include?(cat) %>
  <span class="three columns alpha">
    <label for="regularCheckbox">
      <%= check_box_tag "user[category_ids][]", cat.id, checked %>
      <span class="gig-check"><%= cat.name %></span>
    </label>                  
  </span>
<% end if @categories %> 
```

# android - 标题栏颜色变化问题

> ID：11146359
> 
> 赞同：1
> 
> 时间：2012-06-21T20:38:33.150
> 
> 标签：android

我想动态改变标题栏的颜色，即：有人点击一个按钮，它改变了颜色。但是，我似乎无法让它填满整个标题栏。这发生在模拟器和 Nexus One 上。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/title_bar" android:background="@color/title_bar_blue" android:layout_width="fill_parent" android:layout_height="fill_parent">
    <TextView android:id="@+id/title_left_text" android:layout_alignParentLeft="true" style="?android:attr/windowTitleStyle" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
    <TextView android:id="@+id/title_right_text" android:layout_alignParentRight="true" style="?android:attr/windowTitleStyle" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
</RelativeLayout> 
```

```
 requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

    titleBar = (RelativeLayout) findViewById(R.id.title_bar);
    titleBar.setBackgroundResource(R.color.title_bar_green); 
```

![标题栏](../Images/73f144808501ff4c7a443a3f816d8d15.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:48:36.383

试试这个`((View) titleBar.getParent()).setBackgroundColor(R.color.title_bar_green);` 这不是完成这项工作的最佳方式。但如果它有效，那么您将知道您需要设置`R.id.title_bar`父级的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:46:52.430

尝试这个

```
titleBar = (RelativeLayout) findViewById(R.id.title_bar);
final FrameLayout titleContainer = (FrameLayout)titleBar.getParent(); 
 titleContainer.setPadding(0, 0, 0, 0)
titleBar.setBackgroundResource(R.color.title_bar_green); 
```

# java - 格式化内存输入

> ID：11146364
> 
> 赞同：2
> 
> 时间：2012-06-21T20:38:49.143
> 
> 标签：java, io

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T20:43:29.923

> Why is that and why it doesn't print english ASCII symbols out?

From `DataInput.readChar()`:

> Reads two input bytes and returns a char value. Let a be the first byte read and b be the second byte. The value returned is: `(char)((a << 8) | (b & 0xff))`
> 
> This method is suitable for reading bytes written by the writeChar method of interface DataOutput.

In other words, it's treating your file as if it's UTF-16-encoded - and it almost certainly isn't.

When you want to read text data you *should* use a `Reader` subclass, e.g. `InputStreamReader` wrapped around `FileInputStream`, specifying the appropriate encoding for the input data.

# php - 如何更改用户所有者，以便可以通过 FTP 编辑和/或删除使用 PHP 脚本创建的文件夹？

> ID：11146373
> 
> 赞同：0
> 
> 时间：2012-06-21T20:39:36.267
> 
> 标签：php, permissions, ftp, server-configuration

我们有一个小的 CMS，我们在其中为特定内容创建文件夹。在我们搬到新服务器之前，一切都运行良好；我注意到在新服务器上，来自 PHP（CMS 操作）的“用户”与 FTP 用户不同。以前不会发生这种情况，但现在每次通过 PHP 脚本创建新文件夹时，都无法通过 FTP 对其进行修改。

我注意到 PHP 文件夹的所有者是 99 99，我认为它是“nobody”。

我需要做什么才能让它像以前的服务器一样工作？在我的 PHP 脚本中，权限设置为 0777，所以我真的不知道还能做什么。

我可以访问 SSH、WHM 和 cpanel，也许我可以修改 PHP 设置或 APACHE 设置中的某些内容，可能直接通过 WHM。

请，如果在命令 shell 上有什么可以工作的，请逐步描述它，因为我对 shell 脚本一无所知。

这是我在 PHP 中用来创建文件夹的代码：

```
$year_folder = date(Y)."/";
$user_folder = $year_folder."$alias/";
$section_folder = $user_folder."$section/";

//CREATE YEAR FOLDER and persmissions (Forbiden to access directly)
if (!file_exists($year_folder)) {
    mkdir("$year_folder", 0711);// create directory
}

//CREATE USER FOLDER
if (!file_exists($user_folder)) {
    mkdir("$user_folder", 0777);// create directory
}           

    //CREATE CLASS FOLDER
if (!file_exists($section_folder)) {
    mkdir("$section_folder", 0777);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:46:32.333

您可以尝试 chown (http://php.net/manual/en/function.chown.php)，但这取决于服务器是否允许 Web 服务器修改文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:57:51.037

首先，永远不要将文件设置为 0777。永远不需要它。如果应用程序告诉您这样做，您应该重新考虑该应用程序的实施，因为可能存在危险的安全漏洞。

Apache 在哪个用户下运行？哪些用户需要访问此文件夹？

其次，使用[chmod](http://www.php.net/manual/en/function.chmod.php)或[chgrp](http://php.net/manual/en/function.chgrp.php)。

最有可能，也是更安全的方法之一，但不是唯一的方法，是使用[chgrp](http://php.net/manual/en/function.chgrp.php)将文件夹分配给需要访问的用户组。

如果您向所有者和组（例如 760 或 770 等）授予读/写访问权限，并将其他权限设置为 0，则您可以保护您的应用程序，同时仍然允许您自己和组中的其他人访问。

您是否愿意编辑创建文件夹以添加 chgrp 或 chmod 命令的 PHP CMS 脚本？ **更新**

您可以使用递归执行一次，而不是三次创建目录：

```
$year_folder = date(Y)."/";
$user_folder = $year_folder."$alias/";
$section_folder = $user_folder."$section/";

//CREATE Folder
if (!is_dir($section_folder)) { // changed to is_dir to keep syntax within context
    if(!mkdir($section_folder, 0764, true)){
        echo "Failed to create directory: $section_folder";
    }
} 
```

作为调试步骤，您可以在上述代码之后添加以下内容以[检查权限：](http://php.net/manual/en/function.fileperms.php)

```
$perms = fileperms($section_folder);

if (($perms & 0xC000) == 0xC000) {
    // Socket
    $info = 's';
} elseif (($perms & 0xA000) == 0xA000) {
    // Symbolic Link
    $info = 'l';
} elseif (($perms & 0x8000) == 0x8000) {
    // Regular
    $info = '-';
} elseif (($perms & 0x6000) == 0x6000) {
    // Block special
    $info = 'b';
} elseif (($perms & 0x4000) == 0x4000) {
    // Directory
    $info = 'd';
} elseif (($perms & 0x2000) == 0x2000) {
    // Character special
    $info = 'c';
} elseif (($perms & 0x1000) == 0x1000) {
    // FIFO pipe
    $info = 'p';
} else {
    // Unknown
    $info = 'u';
}

// Owner
$info .= (($perms & 0x0100) ? 'r' : '-');
$info .= (($perms & 0x0080) ? 'w' : '-');
$info .= (($perms & 0x0040) ?
            (($perms & 0x0800) ? 's' : 'x' ) :
            (($perms & 0x0800) ? 'S' : '-'));

// Group
$info .= (($perms & 0x0020) ? 'r' : '-');
$info .= (($perms & 0x0010) ? 'w' : '-');
$info .= (($perms & 0x0008) ?
            (($perms & 0x0400) ? 's' : 'x' ) :
            (($perms & 0x0400) ? 'S' : '-'));

// World
$info .= (($perms & 0x0004) ? 'r' : '-');
$info .= (($perms & 0x0002) ? 'w' : '-');
$info .= (($perms & 0x0001) ?
            (($perms & 0x0200) ? 't' : 'x' ) :
            (($perms & 0x0200) ? 'T' : '-'));

echo $info; 
```

以上应回显：

```
-rwxrw--r-- 
```

# c# - 如何从某些列中删除标题下划线？

> ID：11146375
> 
> 赞同：2
> 
> 时间：2012-06-21T20:39:56.937
> 
> 标签：c#, asp.net

我有一个gridview 和sqldatasource。

我想删除标题文本下划线，但仅适用于某些列而不是全部。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:57:33.777

您可以使用`RowDataBound`删除 的下划线 `LinkButton`。

这会从所有列中删除下划线，但具有`HeaderText == "Date":`

```
protected void Grid_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    switch (e.Row.RowType)
    {
        case DataControlRowType.Header:
            var notDateFields = ((GridView)sender).Columns
                 .Cast<DataControlField>()
                 .Select((c, index) => new { Column = c, Index = index })
                 .Where(x => x.Column.HeaderText != "Date");
            foreach (var field in notDateFields)
            {
                LinkButton Link = (LinkButton)e.Row.Cells[field.Index].Controls[0];
                Link.Attributes.Add("style", "text-decoration:none;");
            }

            break;
    }
} 
```

这种方法只设置样式，以便删除下划线，但无论如何都允许对列进行排序。

如果您只想防止该列是可排序的，则只需删除该`SortExpression`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:01:30.927

设置`autogeneratecolumns="false"`和`allowsorting="true"`。然后，您需要将要在`<columns>`子元素中显示的所有列定义到 gridview，如下所示：

```
<columns>
     <asp:boundfield datafield="Date" headertext="Date" sortexpression="Date"/>
     <asp:boundfield datafield="OtherColumn" headertext="Other Data"/>
</columns> 
```

当您使用时`autogeneratecolumns="true"`，`allowsorting="true"`默认情况下所有列都是可排序的。当您显式定义列时，那些没有`sortexpression`设置属性的列将不可排序。

# c++ - 使用 mongoose 为我的 C++ 应用程序提供 rest api？

> ID：11146377
> 
> 赞同：2
> 
> 时间：2012-06-21T20:40:02.407
> 
> 标签：c++, c, web-services, rest, mongoose-web-server

我想使用 mongoose 从我的应用程序内部公开休息 api。但是，我没有看到如何实现这一点的任何模型。

**有谁知道使用猫鼬是否可行？**

**可以提供任何示例来演示它的简单案例吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:15:09.587

我使用 mongoose 在 C++ 中实现了到 Windows 服务的 HTTP 接口。将 mongoose 包装在一组 C++ 类中是相当简单的。检索请求信息和生成输出流很容易。我使用[Boost.IOStreams](http://www.boost.org/doc/libs/1_49_0/libs/iostreams/doc/index.html)来实现连接流，以便请求处理程序可以使用 std::ostream 接口将结果写回连接。

使用该`set_uri_callback()`函数为每个可能的请求定义一个处理程序。

在每个处理程序中获取请求类型（GET、PUT、POST 等）和参数。

将适当的结果写回连接。

# api - 从朋友墙上删除帖子（我创建的）

> ID：11146378
> 
> 赞同：1
> 
> 时间：2012-06-21T20:40:09.750
> 
> 标签：api, facebook-opengraph

据我了解，Facebook 允许您（通过 API）在您的朋友墙上发帖。

是否可以删除该帖子（如果我创建了它），就像我可以将帖子删除到我自己的墙上一样？

如果是，我该怎么做？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:50:29.470

这很简单 - 发出 HTTP DELETE 请求`https://graph.facebook.com/{POST_ID_HERE}?access_token=ACCESS_TOKEN`

据我所知，访问令牌需要 publish_stream 权限，并且帖子需要使用生成令牌的同一应用程序发布。

# c++ - 拆分 std::string 并插入到 std::set

> ID：11146379
> 
> 赞同：5
> 
> 时间：2012-06-21T20:40:17.833
> 
> 标签：c++

根据 C++ 聊天室中出色的家伙的要求，什么是分解文件的好方法（在我的例子中，它包含一个大约 100 行的字符串，每行大约 10 个单词）并插入所有这些单词进入 std::set？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-21T20:43:23.980

从包含一系列该元素的源构造任何容器的最简单方法是使用带有一对迭代器的构造函数。用于`istream_iterator`迭代流。

```
#include <set>
#include <iostream>
#include <string>
#include <algorithm>
#include <iterator>

using namespace std;

int main()
{
  //I create an iterator that retrieves `string` objects from `cin`
  auto begin = istream_iterator<string>(cin);
  //I create an iterator that represents the end of a stream
  auto end = istream_iterator<string>();
  //and iterate over the file, and copy those elements into my `set`
  set<string> myset(begin, end);

  //this line copies the elements in the set to `cout`
  //I have this to verify that I did it all right
  copy(myset.begin(), myset.end(), ostream_iterator<string>(cout, "\n"));
  return 0;
} 
```

[http://ideone.com/iz1q0](http://ideone.com/iz1q0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:07:49.383

假设您已将文件读入字符串， boost::split 将起到作用：

```
#include <set>
#include <boost/foreach.hpp>
#include <boost/algorithm/string.hpp>

std::string astring = "abc 123 abc 123\ndef 456 def 456";  // your string
std::set<std::string> tokens;                              // this will receive the words
boost::split(tokens, astring, boost::is_any_of("\n "));    // split on space & newline

// Print the individual words
BOOST_FOREACH(std::string token, tokens){
    std::cout << "\n" << token << std::endl;
} 
```

如有必要，可以使用列表或向量代替 Set。

另请注意，这几乎是一个骗局： [Split a string in C++?](https://stackoverflow.com/questions/236129/how-to-split-a-string-in-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T20:41:06.740

```
#include <set>
#include <iostream>
#include <string>

int main()
{
  std::string temp, mystring;
  std::set<std::string> myset;

  while(std::getline(std::cin, temp))
      mystring += temp + ' ';
  temp = "";      

  for (size_t i = 0; i < mystring.length(); i++)
  {
    if (mystring.at(i) == ' ' || mystring.at(i) == '\n' || mystring.at(i) == '\t')
    {
      myset.insert(temp);
      temp = "";
    }
    else
    {
      temp.push_back(mystring.at(i));
    }
  }
  if (temp != " " || temp != "\n" || temp != "\t")
    myset.insert(temp);

  for (std::set<std::string>::iterator i = myset.begin(); i != myset.end(); i++)
  {
    std::cout << *i << std::endl;
  }
  return 0;
} 
```

让我们从顶部开始。首先，您需要使用一些变量。`temp`只是字符串的占位符，而您从要解析的字符串中的每个字符构建它。`mystring`是您要拆分的字符串，`myset`也是您要粘贴拆分字符串的位置。

然后我们读取文件（通过`<`管道输入）并将内容插入到`mystring`.

现在我们要向下迭代字符串的长度，搜索空格、换行符或制表符来分割字符串。如果我们找到其中一个字符，那么我们需要`insert`将字符串放入集合中，并清空占位符字符串，否则，我们将字符添加到占位符中，这将构建字符串。完成后，我们需要将最后一个字符串添加到集合中。

最后，我们遍历集合，并打印每个字符串，这只是为了验证，但在其他情况下可能有用。

编辑：[Loki Astari](https://stackoverflow.com/users/14065/loki-astari)在我认为应该将其集成到答案中的[评论中对我的代码进行了重大改进：](https://stackoverflow.com/questions/11146379/splitting-stdstring-and-inserting-into-a-stdset/11146391#comment14617346_11146391)

```
#include <set>
#include <iostream>
#include <string>

int main()
{
  std::set<std::string> myset;
  std::string word;

  while(std::cin >> word)
  {
      myset.insert(std::move(word));
  }

  for(std::set<std::string>::const_iterator it=myset.begin(); it!=myset.end(); ++it)
    std::cout << *it << '\n';
} 
```

# c# - 监视桌面应用程序的最佳方式是什么？

> ID：11146381
> 
> 赞同：26
> 
> 时间：2012-06-21T20:40:35.647
> 
> 标签：c#, .net, windows-services, desktop-application, watchdog

我需要一些方法来监视桌面应用程序并在它死机时重新启动它。

最初我认为最好的方法是从 Windows 服务监视/重新启动进程，直到我发现由于 Vista [Windows 服务不应该与桌面交互](http://social.msdn.microsoft.com/Forums/en-US/windowssdk/thread/f8f91e8f-5954-43a7-8bc4-80ed2ff1e3b1)

我已经看到了几个处理这个问题的问题，但我看到的每个答案都涉及某种被微软不鼓励的黑客行为，并且可能会在未来的操作系统更新中停止工作。

因此，Windows 服务可能不再是一种选择。我可能只是创建一个不同的桌面/控制台应用程序来执行此操作，但这违背了它的目的。

在您看来，哪种方式是实现这一目标的最优雅的方式？

编辑：**这既不是恶意软件也不是病毒。**需要监控的应用程序是将在嵌入式系统上运行的媒体播放器，即使我试图涵盖所有可能的崩溃场景，我也不能冒险让它因意外错误而崩溃（发生了） . 这个看门狗只是一个保障，以防万一其他一切都出错了。此外，由于播放器将显示第 3 方 Flash 内容，因此额外的优点是监控资源使用情况，并在某些糟糕的 Flash 电影开始泄漏内存时重新启动播放器。

编辑 2：我忘了提及，我想监控/重新启动的应用程序**绝对不需要**在 LocalSystem 帐户上运行，也不需要任何管理权限。实际上，我**更希望**它使用当前记录的用户凭据运行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-29T18:19:05.877

我终于实现了@A_nto2 建议的解决方案，它完全实现了我想要的：我现在有一个 Windows 服务来监视进程列表，每当它们关闭时，它们会使用活动用户的凭据和会话再次自动启动，所以 GUI 是可见的。

但是，由于他发布的链接显示了 VC++ 代码，因此我将我的 C# 实现分享给任何处理相同问题的人：

```
public static class ProcessExtensions
{
    public enum SECURITY_IMPERSONATION_LEVEL
    {
        SecurityAnonymous,
        SecurityIdentification,
        SecurityImpersonation,
        SecurityDelegation
    }

    [StructLayout(LayoutKind.Sequential)]
    public class SECURITY_ATTRIBUTES
    {
        public int nLength;
        public IntPtr lpSecurityDescriptor;
        public int bInheritHandle;
    }

    public enum TOKEN_TYPE
    {
        TokenPrimary = 1,
        TokenImpersonation
    }

    [Flags]
    public enum CREATE_PROCESS_FLAGS : uint
    {
        NONE = 0x00000000,
        DEBUG_PROCESS = 0x00000001,
        DEBUG_ONLY_THIS_PROCESS = 0x00000002,
        CREATE_SUSPENDED = 0x00000004,
        DETACHED_PROCESS = 0x00000008,
        CREATE_NEW_CONSOLE = 0x00000010,
        NORMAL_PRIORITY_CLASS = 0x00000020,
        IDLE_PRIORITY_CLASS = 0x00000040,
        HIGH_PRIORITY_CLASS = 0x00000080,
        REALTIME_PRIORITY_CLASS = 0x00000100,
        CREATE_NEW_PROCESS_GROUP = 0x00000200,
        CREATE_UNICODE_ENVIRONMENT = 0x00000400,
        CREATE_SEPARATE_WOW_VDM = 0x00000800,
        CREATE_SHARED_WOW_VDM = 0x00001000,
        CREATE_FORCEDOS = 0x00002000,
        BELOW_NORMAL_PRIORITY_CLASS = 0x00004000,
        ABOVE_NORMAL_PRIORITY_CLASS = 0x00008000,
        INHERIT_PARENT_AFFINITY = 0x00010000,
        INHERIT_CALLER_PRIORITY = 0x00020000,
        CREATE_PROTECTED_PROCESS = 0x00040000,
        EXTENDED_STARTUPINFO_PRESENT = 0x00080000,
        PROCESS_MODE_BACKGROUND_BEGIN = 0x00100000,
        PROCESS_MODE_BACKGROUND_END = 0x00200000,
        CREATE_BREAKAWAY_FROM_JOB = 0x01000000,
        CREATE_PRESERVE_CODE_AUTHZ_LEVEL = 0x02000000,
        CREATE_DEFAULT_ERROR_MODE = 0x04000000,
        CREATE_NO_WINDOW = 0x08000000,
        PROFILE_USER = 0x10000000,
        PROFILE_KERNEL = 0x20000000,
        PROFILE_SERVER = 0x40000000,
        CREATE_IGNORE_SYSTEM_DEFAULT = 0x80000000,
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    public struct STARTUPINFO
    {
        public Int32 cb;
        public string lpReserved;
        public string lpDesktop;
        public string lpTitle;
        public Int32 dwX;
        public Int32 dwY;
        public Int32 dwXSize;
        public Int32 dwYSize;
        public Int32 dwXCountChars;
        public Int32 dwYCountChars;
        public Int32 dwFillAttribute;
        public Int32 dwFlags;
        public Int16 wShowWindow;
        public Int16 cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public int dwProcessId;
        public int dwThreadId;
    }

    public class Kernel32
    {
        [DllImport("kernel32.dll", EntryPoint = "WTSGetActiveConsoleSessionId")]
        public static extern uint WTSGetActiveConsoleSessionId();

        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool CloseHandle(IntPtr hObject);
    }

    public class WtsApi32
    {
        [DllImport("Wtsapi32.dll", EntryPoint = "WTSQueryUserToken")]
        public static extern bool WTSQueryUserToken(UInt32 sessionId, out IntPtr phToken);
    }

    public class AdvApi32
    {
        public const uint MAXIMUM_ALLOWED = 0x2000000;

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public extern static bool DuplicateTokenEx
        (
            IntPtr hExistingToken,
            uint dwDesiredAccess,
            SECURITY_ATTRIBUTES lpTokenAttributes,
            SECURITY_IMPERSONATION_LEVEL ImpersonationLevel,
            TOKEN_TYPE TokenType,
            out IntPtr phNewToken
        );

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern bool CreateProcessAsUser
        (
            IntPtr hToken,
            string lpApplicationName,
            string lpCommandLine,
            SECURITY_ATTRIBUTES lpProcessAttributes,
            SECURITY_ATTRIBUTES lpThreadAttributes,
            bool bInheritHandles,
            CREATE_PROCESS_FLAGS dwCreationFlags,
            IntPtr lpEnvironment,
            string lpCurrentDirectory,
            ref STARTUPINFO lpStartupInfo,
            out PROCESS_INFORMATION lpProcessInformation
        );
    }

    public class UserEnv
    {
        [DllImport("userenv.dll", SetLastError = true)]
        public static extern bool CreateEnvironmentBlock(out IntPtr lpEnvironment, IntPtr hToken, bool bInherit);

        [DllImport("userenv.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool DestroyEnvironmentBlock(IntPtr lpEnvironment);
    }

    public static void StartAsActiveUser(this Process process)
    {
        // Sanity check.
        if (process.StartInfo == null)
        {
            throw new InvalidOperationException("The StartInfo property must be defined");
        }

        if (string.IsNullOrEmpty(process.StartInfo.FileName))
        {
            throw new InvalidOperationException("The StartInfo.FileName property must be defined");
        }

        // Retrieve the active session ID and its related user token.
        var sessionId = Kernel32.WTSGetActiveConsoleSessionId();
        var userTokenPtr = new IntPtr();
        if (!WtsApi32.WTSQueryUserToken(sessionId, out userTokenPtr))
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }

        // Duplicate the user token so that it can be used to create a process.
        var duplicateUserTokenPtr = new IntPtr();
        if (!AdvApi32.DuplicateTokenEx(userTokenPtr, AdvApi32.MAXIMUM_ALLOWED, null, SECURITY_IMPERSONATION_LEVEL.SecurityIdentification, TOKEN_TYPE.TokenPrimary, out duplicateUserTokenPtr))
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }

        // Create an environment block for the interactive process.
        var environmentPtr = new IntPtr();
        if (!UserEnv.CreateEnvironmentBlock(out environmentPtr, duplicateUserTokenPtr, false))
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }

        // Create the process under the target user’s context.
        var processFlags = CREATE_PROCESS_FLAGS.NORMAL_PRIORITY_CLASS | CREATE_PROCESS_FLAGS.CREATE_NEW_CONSOLE | CREATE_PROCESS_FLAGS.CREATE_UNICODE_ENVIRONMENT;
        var processInfo = new PROCESS_INFORMATION();
        var startupInfo = new STARTUPINFO();
        startupInfo.cb = Marshal.SizeOf(startupInfo);
        if (!AdvApi32.CreateProcessAsUser
        (
            duplicateUserTokenPtr, 
            process.StartInfo.FileName, 
            process.StartInfo.Arguments, 
            null, 
            null, 
            false, 
            processFlags, 
            environmentPtr, 
            null, 
            ref startupInfo, 
            out processInfo
        ))
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }

        // Free used resources.
        Kernel32.CloseHandle(processInfo.hProcess);
        Kernel32.CloseHandle(processInfo.hThread);
        if (userTokenPtr != null)
        {
            Kernel32.CloseHandle(userTokenPtr);
        }

        if (duplicateUserTokenPtr != null)
        {
            Kernel32.CloseHandle(duplicateUserTokenPtr);
        }

        if (environmentPtr != null)
        {
            UserEnv.DestroyEnvironmentBlock(environmentPtr);
        }
    }
} 
```

以下是代码的调用方式：

```
var process = new Process();
process.StartInfo = new ProcessStartInfo { FileName = @"C:\path-to\target.exe", Arguments = "-arg1 -arg2" };
process.StartAsActiveUser(); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T21:06:45.663

> 最初我认为最好的方法是从 Windows 服务监视/重新启动进程......

你当然可以！我以前做过几次。您可以开始学习如何观看：

[http://msdn.microsoft.com/en-us/windows7trainingcourse_win7session0isolation_topic2#_Toc243675529](http://msdn.microsoft.com/en-us/windows7trainingcourse_win7session0isolation_topic2#_Toc243675529)

还有这个：

[http://www.codeproject.com/Articles/18367/Launch-your-application-in-Vista-under-the-local-s](http://www.codeproject.com/Articles/18367/Launch-your-application-in-Vista-under-the-local-s)

实际上，您必须以 SYSTEM 身份运行程序，但使用当前用户的 SessionID。

如果您感到懒惰，我想可能有一些不错的小服务可以满足您的需求。尝试在[www.codeproject.com](http://www.codeproject.com)上搜索。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T21:01:46.943

看门狗进程可以`System.Diagnostics.Process`用来启动应用程序，使用`WaitForExitMethod()`和检查`ExitCode`属性。

为了回应对这个问题的抱怨，我在使用我没有源代码控制访问权限的遗留呼叫中心应用程序时不得不使用这种方法。

**编辑：**

对于宿主应用程序，您可以使用输出类型为“Windows 应用程序”的 .NET 应用程序，而根本没有表单。例如：

```
namespace WindowsFormsApplication1
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            var info = new ProcessStartInfo(@"calc.exe");
            var process = Process.Start(info);
            process.WaitForExit();
            MessageBox.Show("Hello World!");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-24T05:39:42.170

发现这个库写在代码项目上： [https ://www.codeproject.com/Tips/1054098/Simple-Csharp-Watchdog](https://www.codeproject.com/Tips/1054098/Simple-Csharp-Watchdog)

它是在此处的最新答案后 3 年发布的，因此为了记录而添加它。

-- 附录：在我们的应用程序中安装了它，它工作得很好。需要稍作调整以支持我们的用例，但代码非常可靠且直截了当

# mysql - SQL问题：一对多关系和EAV模型

> ID：11146382
> 
> 赞同：1
> 
> 时间：2012-06-21T20:40:36.730
> 
> 标签：mysql, sql

大家晚上好，我是 Web 编程的新手，我需要你的帮助来解决 SQL 查询固有的问题。我使用的数据库引擎是 MySQL，我通过 PHP 访问它，这里我将解释我的数据库的简化版本，只是为了修正想法。让我们假设使用包含三个表的数据库：`teams`, `teams_information`, `attributes`。更确切地说：

1)`teams`是一个包含有关意大利足球队的一些基本信息的表格（足球，而不是美式足球：D），它由三个字段组成：'id' ( `int, primary key)`, 'name' (varchar, 球队名称), `nickname`( `Varchar`, 球队昵称) ;

2)`attributes`是一个表格，其中包含有关足球队的可能信息列表，例如`city`（球队主场比赛所在的城市）、`captain`（球队队长的全名）、`f_number`（球迷人数）等。该表由三个字段组成： id `(int, primary key)`, `attribute_name`( `varchar`, 属性的标识符), `attribute_desc`(text, 属性含义的解释)。该表的每条记录代表一个足球队的单个可能属性；

3)`teams_information`是一个表格，其中包含有关表格中列出的团队的一些信息`team`。该表包含三个字段：id ( `int`, 主键), `team_id`( `int`, 标识团队的外键), `attribute_id`( , 标识表中`int`列出的属性之一的外键), ( , 属性值)。每条记录代表单个团队的单个属性。一般来说，不同的团队会有不同数量的信息，因此对于某些团队，大量的属性可用，而对于其他团队，只有少量的属性可用。`attributes``attribute_value``varchar`

请注意，`teams`和之间的关系`teams_information`是一对多的，并且在`attributes`和之间存在相同的关系`teams_information`

好吧，给定这个模型，我的目的是实现一个网格（可能使用 ExtJS 4.1）来向用户显示意大利足球队的列表，这个网格的每条记录将代表一个足球队并包含所有可能的属性：一些字段可能是空（因为对于考虑的团队，对应的属性是未知的），而其他将包含存储在`teams_information`表中的值（对于考虑的团队）。根据上面网格的字段有：id、team_name 和一些字段来表示'attributes'表中列出的所有不同的属性。

我的问题是：我可以通过使用 SINGLE SQL 查询（也许是一个适当的`SELECT`查询，从数据库表中获取我需要的所有数据）来实现这样的网格吗？谁能建议我如何编写类似的查询（如果存在）？

提前感谢您帮助我。

问候。

恩里科。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:14:34.880

您的问题的简短回答是否定的，MySQL 中没有简单的构造来实现您正在寻找的结果集。

但是可以仔细（精心）制作这样的查询。这是一个示例，我相信您将能够破译它。基本上，对于我想要返回的每个属性，我在选择列表中使用相关子查询。

```
SELECT t.id
     , t.name
     , t.nickname

     , ( SELECT v1.attribute_value 
           FROM team_information v1 
           JOIN attributes a1
             ON a1.id = v1.attribute_id AND a1.attribute_name = 'city'
          WHERE v1.team_id = t.id ORDER BY 1 LIMIT 1
       ) AS city

     , ( SELECT v2.attribute_value
           FROM team_information v2 JOIN attributes a2
             ON a2.id = v2.attribute_id AND a2.attribute_name = 'captain'
          WHERE v2.team_id = t.id ORDER BY 1 LIMIT 1
       ) AS captain

     , ( SELECT v3.attribute_value
           FROM team_information v3 JOIN attributes a3
             ON a3.id = v3.attribute_id AND a3.attribute_name = 'f_number'
          WHERE v3.team_id = t.id ORDER BY 1 LIMIT 1
       ) AS f_number

  FROM teams t
 ORDER BY t.id 
```

对于“多值”属性，您必须分别提取属性的每个实例。（使用 LIMIT 指定您是检索第一个、第二个等）

```
 , ( SELECT v4.attribute_value
           FROM team_information v4 JOIN attributes a4
             ON a4.id = v4.attribute_id AND a4.attribute_name = 'nickname'
          WHERE v4.team_id = t.id ORDER BY 1 LIMIT 0,1
       ) AS nickname_1st

     , ( SELECT v5.attribute_value
           FROM team_information v5 JOIN attributes a5
             ON a5.id = v5.attribute_id AND a5.attribute_name = 'nickname'
          WHERE v5.team_id = t.id ORDER BY 1 LIMIT 1,1
       ) AS nickname_2nd

     , ( SELECT v6.attribute_value
           FROM team_information v6 JOIN attributes a6
             ON a6.id = v6.attribute_id AND a6.attribute_name = 'nickname'
          WHERE v6.team_id = t.id ORDER BY 1 LIMIT 2,1
       ) AS nickname_3rd 
```

* * *

我在这里以昵称为例，因为美国足球俱乐部经常有多个昵称，例如芝加哥火焰足球俱乐部有昵称：“The Fire”、“La Máquina Roja”、“Men in Red”、“CF97”等.)

不是您的问题的答案，但是...

我之前是否多次提到过，我有多不喜欢使用 EAV 数据库实现？IMO 应该是一个非常简单的查询变成了一个潜在的调光查询的过度复杂的野兽。

创建一个每个“属性”都是一个单独的列的表不是更简单吗？然后返回合理结果集的查询看起来更合理......

```
SELECT id, name, nickname, city, captain, f_number, ... FROM team 
```

但真正让我不寒而栗的是，一些开发人员将决定将 LDQ 作为视图“隐藏”在数据库中，以启用“更简单”的查询。

如果你走这条路，请拒绝任何你可能不得不将此查询作为视图存储在数据库中的冲动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:44:59.147

我将采取稍微不同的路线。斯宾塞的回答很棒，它很好地解决了这个问题，但仍然存在一个很大的潜在问题。

您尝试在网站上显示的数据在数据库中被过度规范化。我不会详细说明，因为斯宾塞的回答再次很好地突出了这个问题。

相反，我想推荐一种对数据进行非规范化的解决方案。

将您的所有团队数据转换为一个包含许多列的表。（如果问题中没有包含玩家数据，那将是第二个表，但我现在将忽略它。）

当然，您将拥有*一大堆*列，并且对于很多行来说，很多列可能为 NULL。它没有标准化，也不是很漂亮，但这是您获得的巨大优势。

您的查询变为：

```
SELECT * FROM Teams 
```

而已。这会直接显示在网站上，您就完成了。您可能必须不遗余力地实现此模式，但这完全值得花时间投资。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T08:44:04.973

我写了一个简单的 PHP 脚本来概括斯宾塞的想法来解决我的问题。这是代码：

```
<?php
    require_once('includes/db.config.php'); //this file performs connection to mysql

/*
 * Following function requires a table name ($table)
 * and a number of service fields ($num). Given those parameters
 * it returns the number of table fields (excluding service fields). 
 */

function get_fields_number($table,$num,$conn)
{   
    $query = "SELECT * FROM $table";
    $result = mysql_query($query,$conn);
    return mysql_num_fields($result)-$num; //remember there are $num service fields
}

/*
 * Following function requires a table name ($table) and an array
 * containing a list of service fields names. Given those parameters, 
 * it returns the list of field names. That list is contained within an array and
 * service fields are excluded.
 */

function get_fields_name($table,$service,$conn)
{
    $query = "SELECT * FROM $table";
    $result = mysql_query($query,$conn);
    $name = array(); //Array to be returned
    for ($i=0;$i<mysql_num_fields($result);$i++)
    {
        if(!in_array(mysql_field_name($result,$i),$service))
    {
       //currently selected field is not a service field
       $name[] = mysql_field_name($result,$i); 
    }
    }
    return $name;
}

//Below $conn is db connection created in 'db.config.php'

$query = "SELECT `name` FROM  `detail_arg` WHERE visibility = 0";
$res = mysql_query($query,$conn);
if($res===false)
{
    $err_msg = mysql_real_escape_string(mysql_error($conn));
    echo "{success:false,data:'".$err_msg."'}";
    die();
}
$arg = array(); //list of argument names
while($row = mysql_fetch_assoc($res))
{
    $arg[] = $row['name'];
}

//Following function writes the select subquery which is
    //necessary to build a column containing a single attribute.

function make_subquery($attribute) //$attribute contains attribute name
{
    $query = "";
    $query.="(SELECT incident_detail.arg_value ";
    $query.="FROM incident_detail ";
    $query.="INNER JOIN detail_arg ";
    $query.="ON incident_detail.arg_id = detail_arg.id AND      detail_arg.name='".$attribute."' ";
    $query.="WHERE incident.id = incident_detail.incident_id) ";
    $query.="AS $attribute";
    return $query;
}

/*

echo make_subquery("date"); //debug code

*/

$subquery = array(); //list of subqueries
for($i=0;$i<count($arg);$i++)
{
    $subquery[] = make_subquery($arg[$i]); 
}

$query = "SELECT "; //final query containing subqueries

$fields = get_fields_name("incident",array("id","visibility"),$conn); 
    //list of 'incident' table's fields

for($i=0;$i<count($fields);$i++)
{
    $query.="incident.".$fields[$i].", ";
}

//insert the subqueries

$sub = implode($subquery,", ");
$query .= $sub;

    $query.=" FROM incident ORDER BY incident.id";
echo $query;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:50:37.193

我认为您要说的是您希望属性表中的行在结果记录集中显示为列。如果这是正确的，那么在 SQL 中您将使用 PIVOT。对 SO 的快速搜索似乎表明 MySql 中没有 PIVOT 等效项。

# r - 错误：使用 .First() 时“找不到函数..”

> ID：11146384
> 
> 赞同：1
> 
> 时间：2012-06-21T20:40:38.890
> 
> 标签：r, startup

我在 .First() 中有一个脚本。我将它保存到 .RData 并将其放在一个文件夹中，我在 Rterm.exe 64 位的 Windows 快捷方式中指向该文件夹（如此处所述[）](https://stackoverflow.com/questions/10312417/running-an-r-script-using-a-windows-shortcut)。当我打开快捷方式时，我收到错误“找不到功能..”，即使是基本功能..

像这样：

```
.First <- function() {
plot(rnorm(100))
}

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252   
[3] LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:12:26.790

带有`.RData`扩展名的文件通常被指定为数据而不是源文件。然而，问题是 .First 脚本只能使用基本包中的函数，除非首先加载其他包。

```
.First <- function() { require(graphics)
plot(rnorm(100))
}

?Startup 
```

就个人而言，我会用`.R`扩展名来命名它。

# virtualbox - 将基本框下载到 ~/.vagrant.d 后，Vagrant 会更改那里的文件吗？

> ID：11146387
> 
> 赞同：1
> 
> 时间：2012-06-21T20:40:49.560
> 
> 标签：virtualbox, vagrant

我假设 .vagrant.d 中的基本框将与您下载时几乎一样，并且对正在运行的 VM 的任何更改只会反映在 VirtualBox 的文件中，但我将我的更改`lucid32`为`lucid32_backup`，并做了一个new在. `vagrant box add lucid32 http://files.vagrantup.com/lucid32.box`_ 然后我对文件进行了比较，XML 文件（box.ovf）有很多不同，二进制文件（box-disk1.vmdk）也不同。`lucid32``.vagrant.d`

为什么 .vagrant.d/lucid32/ 中的文件会发生变化？

我是否误解了它们的使用方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:15:46.130

我相信你得出了错误的结论。我不认为您当地的 Vagrant 在下载后更改了基本框。

相反，他们可能会更改（重新生成）服务器上的盒子。这可能是为了更改配置或使用最新的软件包预加载它。

新盒子制作后经过的时间越长，时间越长：

```
sudo apt-get update && sudo apt-get upgrade 
```

需要（由于更新）。

# jquery - 如何一次淡入和淡出一个元素？

> ID：11146393
> 
> 赞同：1
> 
> 时间：2012-06-21T20:41:13.973
> 
> 标签：jquery

我有一些从包含 html 块的 ajax 调用返回的 html。我想淡出现有的块并淡入新的块，以便它按顺序发生（每次 1 个）。现在它同时发生。

似乎在回调进行时，$.each 函数一直在遍历剩余的 html 块，因此它们都同时淡入和淡出。有没有办法做到这一点，每个 html 块在移动到下一个之前淡入淡出？

**代码**

```
 var $newestResults = $('#newest .pcVideomaincontainer:lt(' + data.d.Newest.ChannelsReturned + ')');
            $newestResults.fadeOut('slow'), function () { remove() };
            $.each($newestResults, function (index, value) {
                $(this).animate({
                    opacity: 0
                }, 1000,
                function () {
                    $(this).remove();
                    $('#pcContentHolder_newest').prepend(data.d.MostFamous.HtmlChannelSegments[index]).hide().fadeIn('slow');
                });
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:43:13.200

根据当前索引添加延迟。

```
 $.each($newestResults, function (index, value) {
            $(this).delay(index*1000).animate({
                opacity: 0
            }, 1000,
            function () {
                $(this).remove();
                $('#pcContentHolder_newest').prepend(data.d.MostFamous.HtmlChannelSegments[index]).hide().fadeIn('slow');
            });
        }); 
```

我还没有测试过，但是fadeIn也应该被延迟，因为它在第一个动画方法的回调中已经被延迟了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:44:48.880

你可以在你的函数周围使用一个具有类似延迟的超时吗？

window.setTimeout(your_function,1000)

# javascript - JQuery & history.js 后退按钮不起作用

> ID：11146397
> 
> 赞同：15
> 
> 时间：2012-06-21T20:41:30.260
> 
> 标签：javascript, jquery, history.js

我正在使用 history.JS (latest) 和 Jquery (latest) 来加载和替换网站的一部分，这一切都在工作，目前我只是想让它在现代浏览器中工作，所以我没有摆弄随着哈希的变化。

一切似乎都正常，但是当我单击浏览器（最新的 FF 和 Chrome）上的后退按钮时，页面并没有改变（尽管 url 和标题确实改变了）。我有一个谷歌和看这里，但我看不到发生了什么。

查看堆栈溢出时，我发现了这个页面：[Restoring content when click back button with History.js](https://stackoverflow.com/questions/7949040/do-not-understand-history-js)，这似乎在问一个类似的问题。我已经将#left_col（被替换的div）的加载内容添加到状态数据中，但我不确定从那里去哪里，我知道当状态改变时我需要重新加载该数据，但我不知道怎么做。

```
var History = window.History; 
var origTitle = document.title;
if ( !History.enabled ) {
    return false;
}

History.Adapter.bind(window,'statechange',function(){ 
    var State = History.getState();     
    History.log(State.data, State.title, State.url);
});

$('.ajaxload').live("click", function() {
    History.pushState({state:1,leftcol:$('#left_col').html()}, origTitle, $(this).attr("href"));
    $('#left_col').load($(this).attr("rel"));
    return false;
}); 
```

我真的很感激任何帮助！

## 更新：

我设法让页面在用户单击返回时更改，但它没有加载正确的状态（它似乎返回两种状态而不是一种），我添加到上述代码的代码是：

```
window.addEventListener('popstate', function(event) {
    var State = History.getState(); 
    $('#left_col').html(State.data.leftcol);
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T21:54:44.390

事实证明，我需要使用 History.js 更新 statechange 页面，而不是我想的 poState。以下是我为可能遇到相同问题的任何人提供的完整（和工作）代码：

```
 var History = window.History;
    var origTitle = document.title;

    if ( !History.enabled ) { return false; }
    History.pushState({state:$(this).attr('data-state'),leftcol:$('#left_col').html()}, origTitle, $(this).attr("href"));           // save initial state to browser history

    function updateContent(data) {
        if(data == null) return;                    // check if null (can be triggered by Chrome on page load)
        $('#left_col').html(data);              // replace left col with new (or old from history) data
        History.pushState({state:$(this).attr('data-state'),leftcol:$('#left_col').html()}, origTitle, $(this).attr("href"));           // save this state to browser history
    }

    History.Adapter.bind(window,'statechange',function(){           // use this NOT popstate (history.JS)
        var State = History.getState();
        //History.log(State.data, State.title, State.url);
        updateContent(State.data.leftcol);                                          // call update content with data for left col from saved state
    });

    $('.ajaxload').live("click", function() {                                   // attach click event, get html and send it to updateContent
        $.get($(this).attr("rel"), updateContent);
        return false;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:50:57.827

当您说在状态更改时需要重新加载数据时，您是正确的，因为您必须让 javascript 撤消所做的更改或从原始状态再次呈现内容。

这可能更适合您的议程： [https ://github.com/thorsteinsson/jquery-routes](https://github.com/thorsteinsson/jquery-routes)

## 编辑：

您也可以考虑使用backbone.js (http://backbonejs.org/)，因为它可以帮助您以一种更容易理解需要做什么的方式创建结构和抽象代码。

Backbone 带有它自己的 url 路由器和所谓的视图。

# lucene - lucene 索引匹配

> ID：11146398
> 
> 赞同：0
> 
> 时间：2012-06-21T20:41:30.450
> 
> 标签：lucene, match

我正在尝试使用 Lucene 进行 undup 或 dedup 匹配。本质上，我有一个文件，其中包含要根据某些字段（模糊搜索）进行分组的记录，并使用匹配键返回结果，该匹配键告诉我该文件中的哪些记录相互匹配。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:24:28.897

这可以做到（如果我理解正确的话）。您将索引您的术语/记录将在一次通过中进行搜索。在第二遍中，您将搜索每个术语并记录结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:40:24.277

在预处理文档时，您可以生成一个聚合这些字段的哈希，并将其存储（作为`NOT_ANALYZED`），这样您只需按一个已知大小的字段进行搜索，看看[MessageDigest](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)。这是我通常对文件内容的重复检测所做的（因为内容可能对于单个查询来说太大了）。

如果您正在寻找的是创建更复杂的查询，请尝试使用[CachingWrapperFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/CachingWrapperFilter.html)，这样后续对重复数据删除算法的调用会更快。

# cocos2d-iphone - 鉴于以下信息，我的精灵在屏幕上的表现如何？

> ID：11146403
> 
> 赞同：0
> 
> 时间：2012-06-21T20:41:51.480
> 
> 标签：cocos2d-iphone

我真的很难理解 cocos2d 2.0 以及它的图层和坐标是如何工作的。我有一个包含单个精灵的单层场景。以下是统计数据：

图层：位置：(0,0) 原点：(-384, -430) 大小：(768, 860)（与视图相同） AnchorPoint：(0.5, 0.5) ignoreAnchorPointForPosition：NO 比例：1.0

精灵：位置：(768, 860) 原点：(499.5, 413.5) 大小：(537, 893) 锚点：(0.5, 0.5)

我在层的初始化中添加精灵。

精灵是如何定位在 iPad 模拟器中视图的中心的？如果有人能帮我画出一张心理图（或真实的：）），那真的很有帮助。

这张图片显示了我是如何理解这个展示位置的，它没有任何意义。 **如果这是一个不好的问题或不是正确的论坛，请告诉我，我会将其移至正确的位置。**![在此处输入图像描述](../Images/bdd0806146528fc3a1b8a0c25a4070df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:26:01.080

锚点是节点上的相对点。(0.f, 0.f) 对应于左下角，(1.f, 1.f) 对应于右上角。您为节点设置的位置是为锚点设置的。当然，如果它的属性`isRelatieveAnchorPoint`是`YES`.

因此，如果锚点为 (0.5f, 0.5f)，则设置节点中心的位置。这就是为什么您的图层以其中心放置在世界坐标的 (0.f, 0.f) 中的原因。

但内部坐标总是从当前节点的 (0.f, 0.f) 开始计算。因此，如果您使用精灵的锚点 (0.5, 0.5f) 将精灵添加到 (768.f, 860.f)，精灵的中心将定位到相对于父图层原点的坐标。

我希望我描述得足够清楚 =)

# c# - WPF动画并按顺序更改图像的不透明度

> ID：11146405
> 
> 赞同：1
> 
> 时间：2012-06-21T20:41:56.527
> 
> 标签：c#, wpf, xaml, animation, opacity

我有三个图像，其中两个图像动画如下，第三个图像应该闪烁：

```
<Window.Resources>
    <Storyboard x:Key="AnimateTarget" RepeatBehavior="Forever">

        <DoubleAnimationUsingKeyFrames BeginTime="0:0:0" Duration="0:00:03" Storyboard.TargetName="img1" Storyboard.TargetProperty="Y">
            <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0" />
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="200" />
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="0" />
        </DoubleAnimationUsingKeyFrames>

        <DoubleAnimationUsingKeyFrames BeginTime="0:0:2" Duration="0:00:03" Storyboard.TargetName="img2" Storyboard.TargetProperty="x">
            <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0" />
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="200" />
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="0" />
        </DoubleAnimationUsingKeyFrames>

        <DoubleAnimation BeginTime="0:0:4" Duration="0:0:0.5" Storyboard.TargetProperty="(Image.Opacity)" Storyboard.TargetName="img3"  From="1.0" To="0.0" RepeatBehavior="Forever" AutoReverse="True" />

    </Storyboard>
</Window.Resources> 
```

前两个图像的动画效果很好，但第三个图像不闪烁，它什么也不做，就呆在那里，如您所见，我使用以下代码使第三个图像闪烁：

```
<DoubleAnimation BeginTime="0:0:4" Duration="0:0:0.5" Storyboard.TargetProperty="(Image.Opacity)" Storyboard.TargetName="img3"  From="1.0" To="0.0" RepeatBehavior="Forever" AutoReverse="True" /> 
```

这也是第三张图片的代码：

```
<Image Height="65" Name="image1" Stretch="Fill" Width="67" Source="/PicTakeWPF;component/Images/422505_110594629067212_100003500265268_37406_1212153553_n.jpg">
    <Image.RenderTransform>
         <TranslateTransform x:Name="img3"></TranslateTransform>
    </Image.RenderTransform>
</Image> 
```

如果有人帮助我，我将不胜感激谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:11:52.900

尝试使用图像对象的名称 (image1) 作为不透明动画的 Storyboard.TargetName

```
<DoubleAnimation BeginTime="0:0:4" Duration="0:0:0.5" Storyboard.TargetProperty="(Image.Opacity)" Storyboard.TargetName="image1"  From="1.0" To="0.0" RepeatBehavior="Forever" AutoReverse="True" /> 
```

因为不透明度是图像本身的一个属性，所以其他 2 个动画会影响图像对象的平移，这就是为什么您为这些动画使用 TranslateTransform 名称的原因。

你甚至不需要添加

```
<Image.RenderTransform>
    <TranslateTransform x:Name="img3"></TranslateTransform>
</Image.RenderTransform> 
```

第三张图片（如果您不打算为翻译制作动画）。

# php - 更新两行进行加减

> ID：11146406
> 
> 赞同：0
> 
> 时间：2012-06-21T20:41:56.707
> 
> 标签：php, mysql, sql

我有一个包含用户信息的数据表和一个名为“Bits”的列。有一个传输功能，我想将 x 数量的位从登录用户传输到他们指定的用户。我有以下可用的函数，但我想知道是否有更好（更简单、更清洁、更快？）的方法来完成所有这些工作，并可能在最后返回第一个 SQL 语句的行。无论如何，我都不是高级 MySQL 用户，但我很确定我缺少一个可以使这变得更容易的功能。

```
function transferBits($toid, $amount)
{
    global $loggedInUser, $db;
    $fromid = $loggedInUser->user_id;
    $sql = "INSERT INTO `dl_Transfers` SET From_ID = '".$db->sql_escape($fromid)."',
        `To_ID`='".$db->sql_escape($toid)."',
        `Bits`='".$db->sql_escape($amount)."',
        `When`=Now()";
    $result = $db->sql_query($sql);
    $sql2 = "UPDATE `dl_Users` SET Bits = Bits - '".$db->sql_escape($amount)."' WHERE `User_ID` = '".$db->sql_escape($fromid)."'";
    $result2 = $db->sql_query($sql2);  
    $sql3 = "UPDATE `dl_Users` SET Bits = Bits + '".$db->sql_escape($amount)."' WHERE `User_ID` = '".$db->sql_escape($toid)."'";
    $result3 = $db->sql_query($sql3);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:57:15.373

我认为您可以通过在插入时加入上一个记录 id 来在单个查询中进行更新`dl_Transfers`：

```
UPDATE `dl_Transfers` r 
JOIN `dl_Users` f ON ( r.From_ID = f.User_ID )
JOIN `dl_Users` t ON ( r.To_ID = t.User_ID )
SET f.Bits = f.Bits - r.Bits, t.Bits = t.Bits + r.Bits
WHERE r.Transfer_ID = ?; 
```

同样正如其他人在评论中所说，您绝对应该在这里使用交易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:00:13.823

您可能会考虑使用 MySQL 触发器来处理此问题。基本上，您将对其进行设置，以便在 dl_Transfers 上有插入时，它会更新 dl_Users 中的相应行。

[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

# c# - 绑定到依赖属性不起作用

> ID：11146407
> 
> 赞同：1
> 
> 时间：2012-06-21T20:42:02.417
> 
> 标签：c#, wpf, xaml, binding, dependency-properties

我从 Button 类派生了 ImageButton。我希望能够使用自定义属性在其上设置文本。

图像按钮 XAML

```
<Button x:Class="MyProject.ImageButton"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="50" Width="75" Template="{DynamicResource BlueButton}">
    <StackPanel>
        <TextBlock Text="{Binding Path = ImageButton.ButtonText}" TextWrapping="Wrap" Foreground="White"/>
    </StackPanel>
</Button> 
```

后面的 ImageButton 代码

```
 public partial class ImageButton : Button
    { 
        public string ButtonText
        {
            get { return (string)GetValue(ButtonTextProperty); }
            set { SetValue(ButtonTextProperty, value); }
        }

        public static readonly DependencyProperty ButtonTextProperty =
            DependencyProperty.Register("ButtonText", typeof(string), typeof(ImageButton), new UIPropertyMetadata(string.Empty));

        public ImageButton()
        {
            InitializeComponent();
        }
    } 
```

客户端代码：

```
<local:ImageButton Margin="114,15.879,96,15.878" Grid.Row="2" ButtonText="test"/> 
```

按钮上没有显示任何文字。由于某种原因，绑定似乎没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:50:55.337

您没有`DataContext`集合，因此数据绑定不知道它应该绑定到哪个源对象。

我发现解决此问题的最简单方法是为外部控件命名，并`ElementName`在绑定中使用它来引用它：

```
<Button x:Class="MyProject.ImageButton"
        x:Name="myImageButton"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="50" Width="75" Template="{DynamicResource BlueButton}">
    <StackPanel>
        <TextBlock Text="{Binding ElementName=myImageButton, Path=ButtonText}" 
                   TextWrapping="Wrap" Foreground="White"/>
    </StackPanel>
</Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:57:31.030

改变这个

```
 <TextBlock Text="{Binding Path = ImageButton.ButtonText}" 
```

至

```
 <TextBlock Text="{Binding Path = ButtonText}" 
```

# php - nginx php，root 为 wordpress，子目录中有另一个应用程序

> ID：11146411
> 
> 赞同：2
> 
> 时间：2012-06-21T20:42:27.380
> 
> 标签：php, nginx

我在让子目录在我的 nginx 服务器上工作时遇到了一些问题。

我正在使用 nginx 作为 web 根目录提供 wordpress 安装，并尝试在子目录中运行额外的 php 应用程序。Wordpress 运行良好，但我无法在没有 404、403 或“未指定输入文件”的情况下让应用程序在子目录中运行。各种配置出错。我敢肯定有一些明显的东西，但我似乎无法弄清楚！

以下是相关配置：

任何帮助将不胜感激！

```
server {
listen       myserver.edu:8081;                
server_name  myserver.edu:8081;           

try_files $uri $uri/ /index.php;

location / {
    root /path/to/nginx/html/wordpress;
    index index.php;
}

location /stacks {
    alias /another/path/to/usr/local/share/stacks/php;
    index index.php;
}

location ~ \.php$ {
    set $php_root /path/to/nginx/html/wordpress;
    include        fastcgi_params;
    fastcgi_pass   localhost:8082;
    fastcgi_param  SCRIPT_FILENAME  $php_root$fastcgi_script_name;
    }

location ~ \stacks.php$ {
    set $php_root /another/path/to/usr/local/share/stacks/php;
    include        fastcgi_params;
    fastcgi_pass   localhost:8082;
    fastcgi_param  SCRIPT_FILENAME  $php_root$fastcgi_script_name;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:33:36.027

我不知道如何使用您的别名并设置 $php_root. 如果您从外部文件夹创建符号链接到您的 wordpress-root 目录，我确实知道如何修复它。

因此，使用终端创建符号链接，以便您的 stacks-subdirectory 是一个实际的子目录：

```
 ln -s /another/path/to/usr/local/share/stacks/php /path/to/nginx/html/wordpress/stacks 
```

作为 nginx-config 我会使用

```
server {
    listen       myserver.edu:8081;                
    server_name  myserver.edu:8081;

    root /path/to/nginx/html/wordpress;
    index index.php;       

    location / {    
        try_files $uri $uri/ /index.php;
    }

    location /stacks {
        try_files $uri $uri/ /stacks/index.php;
    }

    location ~ \.php$ {
        fastcgi_pass   localhost:8082;
        include        fastcgi_params;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:32:36.553

注释掉“try_files”。那么子目录开始工作了吗？也许它是在考虑“位置”指令之前处理的。如果是这种情况，则将“try_files”移动到“location /”的块中。

无论如何，我认为这对于“try_files”来说是一个更好的地方。在当前配置中，看起来对不存在的文件的请求将全部发送到 Wordpress，即使它们位于“堆栈”目录中。

# android - Gps 服务 - 无法检索位置

> ID：11146414
> 
> 赞同：0
> 
> 时间：2012-06-21T20:42:36.000
> 
> 标签：android, gps

我是新手。我写了一个类，它实现服务并使用gps，但位置总是空的。所有需要的权限都被写入并且服务正常启动，我可以绑定到它，但检索到的位置总是空的，它永远不会进入*onLocationChanged(Location location)*。有人可以帮忙吗？

```
public class GPSService extends Service {

    private static final String TAG = "GPS_SERVICE";
    private LocationManager mLocationManager = null;
    private static final int LOCATION_INTERVAL = 1000;
    private static final float LOCATION_DISTANCE = 10f;
    Location currentLocation;

    private class LocationListener implements android.location.LocationListener{

        Location mLastLocation;

        public LocationListener(String provider)
        {
            Log.e(TAG, "LocationListener " + provider);
            mLastLocation = new Location(provider);
        }

        public void onLocationChanged(Location location)
        {
            Log.e(TAG, "onLocationChanged: " + location);
            if (location != null){
                mLastLocation.set(location);
                currentLocation = mLastLocation;                
            }

        }

        public void onProviderDisabled(String provider)
        {
            Log.e(TAG, "onProviderDisabled: " + provider);            
        }

        public void onProviderEnabled(String provider)
        {
            Log.e(TAG, "onProviderEnabled: " + provider);
        }

        public void onStatusChanged(String provider, int status, Bundle extras)
        {
            Log.e(TAG, "onStatusChanged: " + provider);
        }

    } 

    LocationListener[] mLocationListeners = new LocationListener[] {
            new LocationListener(LocationManager.GPS_PROVIDER),
            new LocationListener(LocationManager.NETWORK_PROVIDER)
    };

    private IBinder mBinder = new GPSServiceBinder();

    public class GPSServiceBinder extends Binder {
        public GPSService getServerInstance() {
            return GPSService.this;
        }
    }

    public int onStartCommand(Intent intent, int flags, int startId)
    {
        Log.e(TAG, "onStartCommand");
        super.onStartCommand(intent, flags, startId);       
        return START_STICKY;
    }

    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    int minTime = 6000;
    float minDistance = 15;

    public void onCreate()
    {
        Log.e(TAG, "onCreate");
        initializeLocationManager();

        try {
            mLocationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                    mLocationListeners[1]);
        } catch (java.lang.SecurityException ex) {
            Log.i(TAG, "fail to request location update, ignore", ex);
        } catch (IllegalArgumentException ex) {
            Log.d(TAG, "network provider does not exist, " + ex.getMessage());
        }
        try {
            mLocationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                    mLocationListeners[0]);
        } catch (java.lang.SecurityException ex) {
            Log.i(TAG, "fail to request location update, ignore", ex);
        } catch (IllegalArgumentException ex) {
            Log.d(TAG, "gps provider does not exist " + ex.getMessage());
        }
    }

    public Location getLocation()
    {   
        return currentLocation;
    }

    public void onDestroy()
    {
        Log.e(TAG, "onDestroy");
        super.onDestroy();
        if (mLocationManager != null) {
            for (int i = 0; i < mLocationListeners.length; i++) {
                try {
                    mLocationManager.removeUpdates(mLocationListeners[i]);
                } catch (Exception ex) {
                    Log.i(TAG, "fail to remove location listners, ignore", ex);
                }
            }
        }
    } 

    private void initializeLocationManager() {
        Log.e(TAG, "initializeLocationManager");
        if (mLocationManager == null) {
            mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:51:48.597

如果您使用 2.3 版 Android 的模拟器，则存在错误。我最近才面对它。在这种情况下，您可以安装 2.3 x86 模拟器。它工作正常。

# solr - 需要帮助了解 Solr

> ID：11146419
> 
> 赞同：1
> 
> 时间：2012-06-21T20:43:22.837
> 
> 标签：solr, nutch

我刚刚开始使用 Nutch 和 Solr。我只用一个种子 URL 运行了一次爬网。我运行了这个命令：

`bin/nutch crawl urls -dir crawl -solr http://localhost:8983/solr/ -depth 3 -topN 5`

一切都很好，我假设 Solr 索引页面？那么我现在该如何进行搜索呢？我去了这里**localhost:8983/solr/admin/**但是当我输入搜索查询并单击搜索时，我得到了这个：

```
HTTP ERROR 400
Problem accessing /solr/select/.
Reason: undefined field text 
```

我还尝试了[教程](http://lucene.apache.org/solr/api/doc-files/tutorial.html)中的一个示例，但是当我运行此命令时：

`java -jar post.jar solr.xml monitor.xml`

我明白了：

```
SimplePostTool: version 1.4
SimplePostTool: POSTing files to http://localhost:8983/solr/update..
SimplePostTool: POSTing file solr.xml
SimplePostTool: FATAL: Solr returned an error #400 ERROR: [doc=SOLR1000] unknown field 'name' 
```

我的最终目标是以某种方式将这些数据添加到 Accumulo 并将其用于搜索引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:17:12.403

我假设您使用的是 Nutch 1.4 或更高版本。如果是这种情况，您需要将在 solr/conf/schema.xml 文件中添加的字段类型从“text”更改为“text_general”，不带引号。

我现在正在朝着类似的目标努力，并使用该修复程序至少让 solr 正常工作，尽管我仍然无法让 solr 搜索索引站点。希望这会有所帮助，让我知道如果你得到它的工作。

# uiviewcontroller - ViewControllers 和 :(id) 发送者

> ID：11146422
> 
> 赞同：0
> 
> 时间：2012-06-21T20:43:25.713
> 
> 标签：uiviewcontroller

我想在我的项目上开设一个课程来改变视图。这就是我通常会这样做的方式：

```
NewViewController * newView = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:NSBundle mainBundle]];
[self presentModalViewController:newView animated:NO]; 
```

我想将 NewViewController 实例发送到另一个类方法，这样我就可以将其余的视图更改代码放在那里，从而减少我的主类文件中的混乱。我该怎么做呢？

会不会是这样的：

```
-(void) switchViews:(UIViewController *) switchTo{ } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:05:30.657

如果你通过模态创建新的viewController，它会相互分配内存

在这种情况下，委托是您可以轻松完成的最佳方式。

“委托”是指类的协议。所以必须练习它。

# android - Android：如何处理旧 SDK 的主题

> ID：11146424
> 
> 赞同：0
> 
> 时间：2012-06-21T20:43:29.373
> 
> 标签：android, sdk, themes, android-manifest

我有一个应用程序，它是 minSDK 10，目标是 14。我很想使用 Light.Holo 主题（如果适用于设备 - 并且回退到旧设备的轻主题）。有没有办法我可以做到这一点？

当您以 14 为目标时，它似乎默认为 Dark.Holo，但是当我尝试添加任何其他主题时，它会覆盖它并使其在较新的设备上看起来更旧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:57:54.287

您需要为两个平台提供单独的样式，以确保在运行时找到正确的样式。

在您的 res/values/styles.xml 文件中，创建以下样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.MyTheme" parent="@android:style/Theme.Light" />
</resources> 
```

在您的 res/values-v11/styles.xml 文件中，创建以下样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.MyTheme" parent="@android:style/Theme.Holo.Light" />
</resources> 
```

在您的 AndroidManifest.xml 文件中，使用以下行作为应用程序的主题：

```
android:theme="@style/Theme.MyTheme" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:47:35.510

我认为这些答案可能适合：[在较旧的 Android 版本中设置 Holo 主题？](https://stackoverflow.com/questions/9649634/set-holo-theme-in-older-android-versions)

基本上，他们建议将主题复制到您自己的项目中，以便所有用户都可以使用

# javascript - Jquery blur() 对输入和 div 的影响

> ID：11146435
> 
> 赞同：2
> 
> 时间：2012-06-21T20:44:13.107
> 
> 标签：javascript, jquery

因此，我正在构建一个带有自动建议框的输入字段，该框根据用户对该字段的部分输入来建议内容。有点像堆栈上的标签框。自动建议框绝对位于输入字段的正下方，并且仅在用户开始输入文本时出现。

我想让框在输入字段模糊时消失，即当用户单击站点上的其他任何位置时。通常，我只会使用 jquery 的`blur()`功能来隐藏自动建议框。问题是，如果我这样做，用户将无法从自动建议框中选择任何内容，因为这会模糊输入字段并隐藏自动建议框。如果用户单击输入字段或自动建议框以外的任何位置，我需要找到一种方法来隐藏自动建议框。有什么想法可以使用 jquery 进行设置吗？

想象一下它是这样设置的：

```
<div id="auto_suggest">
<ul>
<li>Jane</li>
<li>john</li>
</ul>
</div>

<input type="text"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:46:17.130

使用超时。

```
$("input, #auto_suggest, #auto_suggest a").blur(function() {
   $('#auto_suggest').addClass('hiding');
    setTimeout(function(){
        $('#auto_suggest.hiding').hide();
    },1000);
}).focus(function() {
   $('#auto_suggest').removeClass('hiding').show();
});

$('#auto_suggest, #auto_suggest a').focus(function() {
   $('#auto_suggest').removeClass('hiding').show();
});​ 
```

更新为与选项卡或点击一起工作：

[http://jsfiddle.net/iambriansreed/vUeeT/](http://jsfiddle.net/iambriansreed/vUeeT/)

# dynamics-crm-4 - Inaport 查找找不到目标实体 - CRM4 连接器

> ID：11146438
> 
> 赞同：0
> 
> 时间：2012-06-21T20:44:32.830
> 
> 标签：dynamics-crm-4, data-migration

inaport 的文档指出，您只需映射查找字段，它就会计算出它们是什么类型。

我正在从 CRM 4 映射到 CRM 2011（使用 CRM 连接器），但是我所有的查找都失败了

```
A lookup value was mapped to account.{field name} but no target entity name was supplied and no default is available. 
```

我必须回退到添加自定义字段，检查它们是否是该字段中的查找 id，然后根据 guid::entityname 的文档使用令人痛苦的表达式创建查找值。

此功能对其他人有用吗？我需要建立亲子关系吗？我只为我正在处理的实体添加地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:28:44.840

Inaport 将尝试找出正确的实体引用是什么并默认它。例如，如果查找是子表中的外键，则实体引用将默认为父表。

在某些情况下，查找可能会引用多个实体类型，而 Inaport 无法推断出正确的类型。例如，“关于”查找的活动可能会引用 12 种不同的实体类型。

当自定义查找仅引用单个实体类型并且已将更改请求放入系统时，它可以做得更好。

正如您所指出的，当 Inaport 无法正确推断实体类型时，您可以通过将“::entityname”附加到您要映射到查找字段的 GUID 来强制它。帮助中对此进行了更详细的讨论。

高温高压

问候

大卫埃文斯

# regex - Jmeter - 正则表达式提取器不工作

> ID：11146440
> 
> 赞同：0
> 
> 时间：2012-06-21T20:44:33.843
> 
> 标签：regex, jmeter

我正在尝试从 HTML 响应中提取一个简单的字符串。响应看起来像这样

```
patients-list-of-visits.aspx?p=a1363839-76fb-43f3-97ba-26218faefee1 
```

到目前为止我尝试过的正则表达式是

```
patients-list-of-visits.aspx?p=(.+?)
patients-list-of-visits.aspx?p=(.+) 
```

有人可以让我知道我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:46:08.727

这个更好：

```
patients-list-of-visits\.aspx\?p=(.+) 
```

2 备注

*   别忘了逃跑。和 ？如果你想从字面上匹配它们
*   您的第一次尝试`.*?`是惰性匹配，只会匹配第一个字母。你的第二次尝试更好

# c++ - 多重映射错误（键类型为 std::string）

> ID：11146442
> 
> 赞同：3
> 
> 时间：2012-06-21T20:44:36.727
> 
> 标签：c++, multimap

我一直在让 multimap 工作时遇到问题。我将只显示代码并描述问题：

```
 #include <string>
    ...

    multimap<std::string, pinDelayElement> arcList
    pinDelayElement pde;
    std:string mystring = "test"
    arcList[mystring] = pde; 
```

但是，当我编译时，最后一行给了我以下错误：

> 错误 C2676：二进制 '[' : 'std::multimap<_Kty,_Ty>' 未定义此运算符或转换为具有 [ _Kty=std::string, _Ty=Psdfwr::pinDelayElement 的预定义运算符可接受的类型]

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T20:49:36.200

那是因为[std::multimap](http://en.cppreference.com/w/cpp/container/multimap)没有`operator[]`. 尝试使用[插入](http://en.cppreference.com/w/cpp/container/multimap/insert)方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T20:53:15.007

下面的代码是如何正确执行此操作的示例。

1.  正如其他人指出的那样， std::multimap 没有索引`operator[]`，因为从中提取元素是没有意义的——每个索引都有多个值。

2.  你必须`insert`一个`multimap<...>::value_type`.

```
#include <string>
#include <map>

void test()
{
    typedef std::multimap<std::string, int> Map;
    Map map;
    map.insert(Map::value_type("test", 1));
} 
```

# c++ - 为什么我可以在头文件中声明数组，而不是指针？

> ID：11146447
> 
> 赞同：2
> 
> 时间：2012-06-21T20:44:57.837
> 
> 标签：c++, pointers, namespaces, linker-errors

我的 Consts.hpp 文件有问题：

```
#pragma once
#include <stdafx.h>

namespace consts {
    const GLchar* TEXTURE_DIR = "../../blabla/"; // doesn't work
    const GLchar TEXTURE_DIR[14] = "../../blabla/"; // works
}; 
```

该文件被添加到 stdafx.h 文件中。ColladaReader.cpp 是我访问 TEXTURE_DIR 的文件。为什么指针在命名空间中不起作用？访问常量时出现此错误：

```
 Error  5   error LNK2005: "char const * const consts::TEXTURE_DIR" (?TEXTURE_DIR@consts@@3PBDB) already defined in ColladaReader.obj   D:\Privat\code\openglearn\projects\ColladaReader\stdafx.obj 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:49:45.603

这里的问题是，如果您将此代码放在头文件中，包含它的每个 .cpp 文件都会认为它具有唯一的 .cpp 副本`consts::TEXTURE_DIR`。这将在编译代码时导致链接器错误，因为链接器会找到该变量的多个副本，并且不知道应该使用哪一个。

第一个版本不起作用而第二个版本起作用的原因很微妙。在 C++ 中，文件范围内的任何常量都自动具有内部链接，因此回避了上述问题（因为链接器将每个副本视为单独的）。当您声明数组时，您的数组本身就是一个常量：

```
const GLchar TEXTURE_DIR[14] = "../../blabla/"; 
```

但是，您声明的指针*不是*常量：

```
const GLchar* TEXTURE_DIR = "../../blabla/"; 
```

这样做的原因是指针指向的`GLchar`s 是常量，但指针本身可以重新分配。例如，线

```
consts::TEXTURE_DIR = "Now I'm different!" 
```

会编译得很好。

要解决此问题，请更改指针声明，使其成为*常量*指针：

```
const GLchar* const TEXTURE_DIR = "../../blabla/"; 
```

注意`const`这里的第二个，这意味着不能重新分配指针。这应该可以解决链接器错误。

希望这可以帮助！

# php - 将新用户插入 mysql 数据库时遇到问题

> ID：11146448
> 
> 赞同：2
> 
> 时间：2012-06-21T20:45:02.397
> 
> 标签：php, mysql

我有一个表单，允许我将用户输入到我的数据库中。但是，每当我单击提交时，我都会收到`query failed`错误消息。下面是我建立的表格：

注册-admin.php

```
<form id="resgisterform" name="registerform" method="post" action="register-admin-exec.php">
  <table width="300" border="0" align="center" cellpadding="2" cellspacing="0">
    <tr>
      <th>Username </th>
      <td><input name="username" type="text" class="textfield" id="username" /></td>
    </tr>
    <tr>
      <th>First Name </th>
      <td><input name="first_name" type="text" class="textfield" id="first_name" /></td>
    </tr>
    <tr>
      <th>Last Name </th>
      <td><input name="last_name" type="text" class="textfield" id="last_name" /></td>
    </tr>
    <tr>
      <th>Muvdigital Email </th>
      <td><input name="muvdigital_email" type="text" class="textfield" id="muvdigital_email" /></td>
    </tr>
    <tr>
      <th>Personal Email </th>
      <td><input name="personal_email" type="text" class="textfield" id="personal_email" /></td>
    </tr>
    <tr>
      <th>Title </th>
      <td><input name="title" type="text" class="textfield" id="title" /></td>
    </tr>
    <tr>
      <th>Address 1 </th>
      <td><input name="address_1" type="text" class="textfield" id="address_1" /></td>
    </tr>
    <tr>
      <th>Address 2 </th>
      <td><input name="address_2" type="text" class="textfield" id="address_2" /></td>
    </tr>
    <tr>
      <th>City </th>
      <td><input name="city" type="text" class="textfield" id="city" /></td>
    </tr>
    <tr>
      <th>State </th>
      <td><input name="state" type="text" class="textfield" id="state" /></td>
    </tr>
    <tr>
      <th>Zip Code </th>
      <td><input name="zip" type="text" class="textfield" id="zip" /></td>
    </tr>
    <tr>
      <th>Phone </th>
      <td><input name="phone" type="text" class="textfield" id="phone" /></td>
    </tr>
    <tr>
      <th>Password </th>
      <td><input name="password" type="password" class="textfield" id="password" /></td>
    </tr>
    <tr>
      <th>Confirm Password </th>
      <td><input name="cpassword" type="password" class="textfield" id="cpassword" /></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><input type="submit" name="Submit" value="Register" /></td>
    </tr>
  </table>
</form> 
```

然后将此表单中的值带到下面的 register-admin-exec.php 页面

```
<?php
    //Start session
    session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Function to sanitize values received from the form. Prevents SQL injection
    function clean($str) {
        $str = @trim($str);
        if(get_magic_quotes_gpc()) {
            $str = stripslashes($str);
        }
        return mysql_real_escape_string($str);
    }

    //define and validate the post values
    /*if (isset ($_POST['admin_id']) && !empty ($_POST['admin_id'])) {
        $admin_id = $_POST['admin_id'];
    } else {
        echo 'Error: admin id not provided!';
    }*/

    if (isset ($_POST['username']) && !empty ($_POST['username'])) {
$username = clean($_POST['username']);
} else {
    echo 'Error: username not provided!';
}

if (isset ($_POST['first_name']) && !empty ($_POST['first_name'])) {
$first_name = clean($_POST['first_name']);
} else {
    echo 'Error: first name not provided!';
}

if (isset ($_POST['last_name']) && !empty ($_POST['last_name'])) {
$last_name = clean($_POST['last_name']);
} else {
    echo 'Error: last name not provided!';
}

if (isset ($_POST['muvdigital_email']) && !empty ($_POST['muvdigital_email'])) {
$muvdigital_email = clean($_POST['muvdigital_email']);
} else {
    echo 'Error: muvdigital email not provided!';
}

if (isset ($_POST['personal_email']) && !empty ($_POST['personal_email'])) {
$personal_email = clean($_POST['personal_email']);
} else {
    echo 'Error: personal email not provided!';
}

if (isset ($_POST['title']) && !empty ($_POST['title'])) {
$title = clean($_POST['title']);
} else {
    echo 'Error: title not provided!';
}

if (isset ($_POST['phone']) && !empty ($_POST['phone'])) {
$phone = clean($_POST['phone']);
} else {
    echo 'Error: phone not provided!';
}

if (isset ($_POST['address_1']) && !empty ($_POST['address_1'])) {
$address_1 = clean($_POST['address_1']);
} else {
    echo 'Error: address 1 not provided!';
}

$address_2 = clean($_POST['address_2']);

if (isset ($_POST['city']) && !empty ($_POST['city'])) {
$city = clean($_POST['city']);
} else {
    echo 'Error: city not provided!';
}

if (isset ($_POST['state']) && !empty ($_POST['state'])) {
$state = clean($_POST['state']);
} else {
    echo 'Error: state not provided!';
}

if (isset ($_POST['zip']) && !empty ($_POST['zip'])) {
$zip = clean($_POST['zip']);
} else {
    echo 'Error: zip not provided!';
}

if (isset ($_POST['password']) && !empty ($_POST['password'])) {
$password = clean($_POST['password']);
} else {
    echo 'Error: password not provided!';
}

if (isset ($_POST['cpassword']) && !empty ($_POST['cpassword'])) {
$cpassword = clean($_POST['cpassword']);
} else {
    echo 'Error: confirm password not provided!';
}

    //encrypt the password
    $salt = sha1($username);
    $password = sha1($salt.$password);

    //Check for duplicate login ID
    if($username != '') {
        $qry = "SELECT * FROM members WHERE username='".$username."'";
        $result = mysql_query($qry);
        if($result) {
            if(mysql_num_rows($result) > 0) {
                $errmsg_arr[] = 'Login ID already in use';
                $errflag = true;
            }
            @mysql_free_result($result);
        }
        else {
            die("Query failed");
        }
    }

    //If there are input validations, redirect back to the registration form
    if($errflag) {
        $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
        session_write_close();
        header("location: register-admin.php");
        exit();
    }

    //Create INSERT query
    $qry = "INSERT INTO admins (
            'username',
            'password',
            'first_name', 
            'last_name', 
            'muvdigital_email', 
            'personal_email', 
            'titles', 
            'phone', 
            'address_1', 
            'address_2',
            'city',
            'state',
            'zip')
    VALUES (
            '$username',
            '$password',
            '$first_name', 
            '$last_name', 
            '$muvdigital_email', 
            '$personal_email', 
            '$title', 
            '$phone', 
            '$address_1', 
            '$address_2',
            '$city',
            '$state',
            '$zip')";
    $result = mysql_query($qry);

    //Check whether the query was successful or not
    if($result) {
        header("location: register-success.php");
        exit();
    }else {
        die("Query failed $qry");
    }
?> 
```

我知道它在我的插入语句中失败了，因为我尝试注释掉之前对重复登录 ID 的验证检查，但它仍然失败。我无法弄清楚为什么我的插入语句不起作用。在呼应之后`$qry`，我得到

`INSERT INTO admins ( 'username', 'password', 'first_name', 'last_name', 'muvdigital_email', 'personal_email', 'titles', 'phone', 'address_1', 'address_2', 'city', 'state', 'zip') VALUES ( 'johndoe', '7afbb2186cf26d85bdfe948d367fb6baa6739283', 'john', 'doe', 'john.doe@muvdigital.com', 'jdoe@gmail.com', 'intern', '6024013776', '18b main st', 'apt 12', 'Hooksett', 'NH', '03106')`

所以这个`$_POST`功能正在工作。我尝试在命令行手动输入插入语句，我收到了`ERROR 1054 (42S22): Unknown column 'johndoe' in 'field list'`.

这`admin_id`是一个 auto_increment 字段，这就是我将其注释掉的原因（我尝试取消注释并手动创建一个`admin_id`，但仍然不起作用）

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T20:47:20.240

您已经用单引号引用了所有列名，这是不正确的。它们应该不加引号，除非您使用了[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)（您没有使用）

```
// Column names are unquoted, but VALUES() should be quoted.
$qry = "INSERT INTO admins (
        username,
        password,
        first_name, 
        last_name, 
        muvdigital_email, 
        personal_email, 
        titles, 
        phone, 
        address_1, 
        address_2,
        city,
        state,
        zip)
VALUES (
        '$username',
        '$password',
        '$first_name', 
        '$last_name', 
        '$muvdigital_email', 
        '$personal_email', 
        '$title', 
        '$phone', 
        '$address_1', 
        '$address_2',
        '$city',
        '$state',
        '$zip')";
$result = mysql_query($qry); 
```

# java - 安全警告：运行 JWS 应用程序时无法验证网站的证书

> ID：11146454
> 
> 赞同：2
> 
> 时间：2012-06-21T20:45:22.503
> 
> 标签：java, applet, java-web-start, signing, jar-signing

我正在尝试运行 JWS 应用程序。我已经签署了所有 .jar 文件并将它们放在文档根目录中。签名由使用 .pfx 文件的 Verisign 证书完成。但是，我仍然收到一条安全警告，上面写着：
*“无法验证网站的证书。您要继续吗？”*
名称：托管它的系统的 IP 地址
发布者：未知

但是，当我接受它时，会弹出我期望的*安全信息弹出窗口：*
*“应用程序的数字签名已经过验证。您要运行该应用程序吗？”*

那为什么我首先得到安全警告弹出窗口？证书（.cer 文件）是否应该放在文档根目录之外的其他位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:56:45.170

![弹出窗口“警告-安全”](../Images/40db4b27c5bb8a62955ba4316de40195.png)

![证书](../Images/82050edba82a78f8650e02dddec18d12.png)

当我点击更多信息时，我看到的证书详细信息与我签署的不同。

# css - 如何在子 li 元素中覆盖悬停和焦点？

> ID：11146456
> 
> 赞同：1
> 
> 时间：2012-06-21T20:45:25.743
> 
> 标签：css, wordpress

我正在使用 WordPress

我在导航菜单中放了一个额外的容器。导航菜单的 ID 为 #access，额外的容器的 ID 为 #language-selection 。#language-selection 容器使用`<li>`元素，但悬停和焦点被以下内容覆盖：

```
#access li:hover > a,
#access ul ul :hover > a,
#access a:focus {
    background: #efefef;
}
#access li:hover > a,
#access a:focus {
    background: #f9f9f9; /* Show a solid color for older browsers */
    background: -moz-linear-gradient(#f9f9f9, #e5e5e5);
    background: -o-linear-gradient(#f9f9f9, #e5e5e5);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#f9f9f9), to(#e5e5e5)); /* Older webkit syntax */
    background: -webkit-linear-gradient(#f9f9f9, #e5e5e5);
    color: #373737;
} 
```

我怎样才能覆盖这些规则，以便当它在#access 容器内时，悬停和专注于#language-selection 容器时不会发生任何事情？

以下是 HTML：

```
<nav id="access" role="navigation">
  <h3 class="assistive-text">Main menu</h3>
  <div class="skip-link">
    <a class="assistive-text" href="#content" title="Skip to primary content">Skip to primary content</a>
  </div>
  <div class="skip-link">
    <a class="assistive-text" href="#secondary" title="Skip to secondary content">Skip to secondary content</a>
  </div>
  <div class="menu">
    <ul>
      <li class="page_item page-item-24 current_page_item">
        <a href="http://localhost/katarina/?lang=en">Home</a>
      </li>
      <li class="page_item page-item-26">
        <a href="http://localhost/katarina/?page_id=26&amp;lang=en">Contact</a>
      </li>
    </ul>
  </div>
  <div id="language-selection">
    <ul class="qtrans_language_chooser" id="qtranslate-chooser">
      <li class="lang-en active">
        <a href="http://localhost/katarina/?lang=en" hreflang="en" title="English" class="qtrans_flag qtrans_flag_en">
          <span style="display:none">English</span>
        </a>
      </li>
      <li class="lang-DK">
        <a href="http://localhost/katarina/?lang=DK" hreflang="DK" title="Dansk" class="qtrans_flag qtrans_flag_DK">
          <span style="display:none">Dansk</span>
        </a>
      </li>
      <li class="lang-fa">
        <a href="http://localhost/katarina/?lang=fa" hreflang="fa" title="Farsi" class="qtrans_flag qtrans_flag_fa">
          <span style="display:none">Farsi</span>
        </a>
      </li>
      <li class="lang-ar">
        <a href="http://localhost/katarina/?lang=ar" hreflang="ar" title="???????" class="qtrans_flag qtrans_flag_ar">
          <span style="display:none">???????</span>
        </a>
      </li>
    </ul>
    <div class="qtrans_widget_end"></div>
  </div>
</nav> 
```

所以基本上我希望悬停和焦点在“Home”和“Contact”链接上保持不变，但要在#language-selection 中的每个 li 元素上停用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:47:40.133

由于您提供了 HTML，因此更容易理解您的意思。我的建议是`.menu`在样式中添加为说明符，以便它仅在该容器中有效，不包括`#language-selection`. 所以：

```
#access a:focus { ... } 
```

然后变成

```
#access .menu a:focus { ... } 
```

然后它只会将该样式应用于在`div.menu`.

关键是尽可能具体地说明你的风格。不过要小心，因为你应用的越多，样式[特异性](http://www.w3.org/TR/CSS2/cascade.html#specificity)就越高。意义：

```
<div id="foo">
  <div id="bar">
    <a class="baz">Hello, world!</a>
  </div>
</div> 
```

然后申请：

```
#foo #bar a { color: red; } /* higher specificity */
#bar a.baz { color: green; } 
```

该链接实际上是红色而不是绿色。

# ruby-on-rails - 幻影黄瓜步

> ID：11146460
> 
> 赞同：1
> 
> 时间：2012-06-21T20:45:40.617
> 
> 标签：ruby-on-rails, cucumber

用黄瓜和 rspec 跑卫。在通过最近的一些测试时，每次运行黄瓜时都会出现以下情况：

```
Running all features
Disabling profiles...
Running tests with args ["--no-profile", "--color", "--format", "progress", "--strict", "--require", "/usr/local/rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/guard-cucumber-1.1.0/lib/guard/cucumber/notification_formatter.rb", "--format", "Guard::Cucumber::NotificationFormatter", "--out", "/dev/null", "--require", "features", "features"]...
Disabling profiles...
....................................U-----........................

10 scenarios (1 undefined, 9 passed)
63 steps (5 skipped, 1 undefined, 57 passed)
0m3.703s

You can implement step definitions for undefined steps with these snippets:

Given /^I fill in "(.*?)""$/ do |arg1|
  pending # express the regexp above with the code you wish you had
end

Done. 
```

`Given /^I fill in "(.*?)""$/`我在任何文件中都找不到`.feature`！我已经 grepped 了整个应用程序目录结构，但它不存在（`grep -Hr "I fill in" *`）。

现在，为了清楚起见，有一个`When /^I fill in "(.*?)" with "(.*?)"$/ do |title, text|`我经常使用的步骤，但这不是黄瓜在上面的代码片段中谈论的内容。

布勒？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:48:44.643

弄清楚了。在我们的一个`.feature`文件中，缺少一个结束引号，因此它搞砸了下一步的解析。通过手动运行我们的每个功能文件来跟踪它`be cucumber feature/filename.feature`

# xml - log4j:WARN 文档根元素“log4j:configuration”，必须匹配 DOCTYPE 根“null”

> ID：11146461
> 
> 赞同：15
> 
> 时间：2012-06-21T20:45:44.167
> 
> 标签：xml, log4j, xsd, doctype

我想将我的 log4j.xml 与 log4j.xsd（xml 模式）连接起来。项目没有任何警告或错误。但是当我启动它时，我有这样的控制台警告：

log4j:WARN 可继续解析错误 6 和第 66 列。

log4j:WARN 文档根元素“log4j:configuration”，必须匹配 DOCTYPE 根“null”。

log4j:WARN 可继续解析错误 6 和第 66 列。

log4j:WARN 文档无效：未找到语法。

我认为，模式位置存在问题。但我不知道，如何正常写。希望得到您的建议。

我的 log4j.xml：

```
 <?xml version="1.0" encoding="UTF-8" ?>

   <log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    debug="false"
    xsi:schemaLocation="http://www.example.org/log4j log4j.xsd ">

<appender name="logFileAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="E:/Codes/HorseRacing/logFile.log"/>
        <param name="MaxFileSize" value="1MB"/>
        <param name="MaxBackupIndex" value="5"/>
        <param name="Encoding" value="UTF-8"/>
        <layout class="org.apache.log4j.EnhancedPatternLayout">
        <param name="ConversionPattern" value="%d{ISO8601} [%-5p][%-16.16t][%40.40c] - %m%n"/>
        </layout>
    </appender>

     <appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
        <param name="Encoding" value="Cp866"/>
        <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ISO8601} [%-5p][%-25.25l][%10.10c] - %m%n" />
        </layout>
    </appender>

   <logger name="appLogger">
        <level value="INFO"/>
        <appender-ref ref="logFileAppender"/>
        <appender-ref ref="ConsoleAppender"/>
    </logger>

</log4j:configuration> 
```

还有我的 log4j.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema attributeFormDefault="unqualified"
    elementFormDefault="qualified" version="1.0"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="configuration">
   <xsd:complexType>
      <xsd:sequence>
        <xsd:element maxOccurs="unbounded" name="appender">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element maxOccurs="unbounded" name="param">
                <xsd:complexType>
                  <xsd:attribute name="name" type="xsd:string" />
                  <xsd:attribute name="value" type="xsd:string" />
                </xsd:complexType>
              </xsd:element>
              <xsd:element name="layout">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="param">
                  <xsd:complexType>
                    <xsd:attribute name="name" type="xsd:string" />
                    <xsd:attribute name="value" type="xsd:string" />
                  </xsd:complexType>
                </xsd:element>
              </xsd:sequence>
              <xsd:attribute name="class" type="xsd:string" />
            </xsd:complexType>
          </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="name" type="xsd:string" />
        <xsd:attribute name="class" type="xsd:string" />
      </xsd:complexType>
    </xsd:element>
    <xsd:element name="logger">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="level">
            <xsd:complexType>
              <xsd:attribute name="value" type="xsd:string" />
            </xsd:complexType>
          </xsd:element>
          <xsd:element maxOccurs="unbounded" name="appender-ref">
               <xsd:complexType>
                <xsd:attribute name="ref" type="xsd:string" />
               </xsd:complexType>
             </xsd:element>
           </xsd:sequence>
          <xsd:attribute name="name" type="xsd:string" />
         </xsd:complexType>
       </xsd:element>
     </xsd:sequence>
     <xsd:attribute name="debug" type="xsd:boolean" />
     <xsd:attribute name="schemaLocation" type="xsd:string" />
   </xsd:complexType>
  </xsd:element>
   </xsd:schema>

   <logger name="appLogger">
    <level value="INFO"/>
    <appender-ref ref="logFileAppender"/>
    <appender-ref ref="ConsoleAppender"/>
    </logger>

    </log4j:configuration> 
```

PS对不起我的英语...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T14:00:56.427

将以下行添加到您的 log4j.xml 配置文件中的`<xml>`元素后面：

`<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">`

[从他们的 wiki 完成 log4j 配置示例：](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <appender name="console" class="org.apache.log4j.ConsoleAppender"> 
    <param name="Target" value="System.out"/> 
    <layout class="org.apache.log4j.PatternLayout"> 
      <param name="ConversionPattern" value="%-5p %c{1} - %m%n"/> 
    </layout> 
  </appender> 

  <root> 
    <priority value ="debug" /> 
    <appender-ref ref="console" /> 
  </root>

</log4j:configuration> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T21:01:10.043

产生此消息的 jar 期望看到经过 DTD 验证的配置，而不是经过模式验证的配置。

检查你的类路径。您为此配置使用的框架版本太旧。很可能您的磁盘上有多个版本的同名 jar，这种情况会指出问题所在，并删除您不想使用的非常旧的库。

# java - 如何添加数组中的数字以便输出高分

> ID：11146468
> 
> 赞同：0
> 
> 时间：2012-06-21T20:46:10.703
> 
> 标签：java

我需要从发给用户的 13 张牌中找出排名的总和。

这是在我的类 card.java 中，它以字符串形式返回卡片的值，然后以字符串形式返回花色，然后以 int 形式返回等级。

```
public  String toString(){

String s = ("I am the " + rankString[rank-2] + " of " + suit + "(rank): " + rank);

    return  s;

} 
```

这是在我的 CardFrame 课程中。CardFrame.java

```
private void doButton1Stuff(){
    //textArea.append("\nButton 1 Clicked");
    textArea.setText("");
    for(int i = 0; i<13; i++){
    textArea.append(deck.getNextCard().toString()+"\n");
    } 
```

一切正常，我只需要找出一种方法，将用户收到的 13 张牌中的所有等级加在一起，然后将其输出为他们的分数。

```
public Card getNextCard(){
    //check for end of deck
        topCard++;
        if(topCard==53){
        topCard = 1;
        shuffle();
        }

    return cards[deck[topCard-1]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:51:42.027

您需要一个`rank`变量访问器。

```
public int getRank() {
    return rank;
} 
```

然后你可以将它用于某个集合中的每张卡片（这里我假设一个数组）：

```
for(Card c: cards) {
    sum += c.getRank();
} 
```

对于您的用例，它可以在这里使用：

```
int sum = 0;
for(int i = 0; i<13; i++) {
    Card c = deck.getNextCard();
    textArea.append(c.toString()+"\n");
    sum += c.getRank();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:58:34.217

如果您无法从 Card 类中访问您的排名值，您可以随时从其`toString()`输出中读取它，如下所示：

```
String cardToStringOutput = "I am the " + "rankString[rank-2]" + " of "
        + "suit" + "(rank): " + "11";
int rank=Integer.parseInt(cardToStringOutput.split(" ")[6]);
System.out.println("rank="+rank); 
```

但是考虑向 Card 类添加一些 getter，这样您就不必使用上面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:59:04.833

看起来您的“卡片”类（我无法从代码中分辨出您将其命名为什么）有一个“等级”成员，我猜它是一个整数。所以我认为你遇到的问题是迭代。试试这个：

```
private void doButton1Stuff(){
    //textArea.append("\nButton 1 Clicked");
    textArea.setText("");
    int score = 0;
    for(int i = 0; i<13; i++){
        Card card = deck.getNextCard();
        score += card.rank
        textArea.append(card.toString()+"\n");
    }
    textArea.append("Score: ");
    textArea.append(score);
} 
```

这假设您的成员 var “rank” 是可访问的（请参阅“public”、“protected”、“private”）

# javascript - Ember.js 可拖放 jqueryUI / 原生拖放 mixin

> ID：11146470
> 
> 赞同：4
> 
> 时间：2012-06-21T20:46:16.117
> 
> 标签：javascript, jquery, jquery-ui, ember.js

我需要创建具有拖放和排序功能的项目。因此可以将一个项目拖到另一个项目中。

我已经看到了一些解决方案，通过 mixin 进行拖动并使用这个 mixin 创建一个可拖动的视图，然后通过 droppable mixin 从 droppable 创建另一个视图。

但我需要每个项目/视图都具有可拖动、可放置和可排序的功能。

请任何人都可以告诉我通过mixins或子类或...来做到这一点的最佳方法吗？

我还可以创建一个 jqueryUi mixin 作为基础 mixin，然后在创建可拖动、可放置和可排序的 mixin 时使用该 mixin 吗？这可能吗 ？

最好使用jqueryUI或html5拖放api或其他东西吗？

感谢您的帮助瑞克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T17:29:47.780

不确定您是否在[这里](http://yehudakatz.com/2011/06/11/using-sproutcore-2-0-with-jquery-ui/)看到了 Katz 的代码，但我正在使用它来制作 View：Droppable、Draggable... 或 jQuery UI 支持的任何其他交互。因此，您定义了一个基本 Mixin，您将在所有 jQuery UI 交互 Mixin 中使用它：

```
// Create a new mixin for jQuery UI widgets using the new SproutCore 2.0
// mixin syntax.
JQ.Base = Ember.Mixin.create({
  // When SproutCore creates the view's DOM element, it will call this
  // method.
  didInsertElement: function() {
    this._super();

    // Make jQuery UI options available as SproutCore properties
    var options = this._gatherOptions();

    // Make sure that jQuery UI events trigger methods on this view.
    this._gatherEvents(options);

    // Create a new instance of the jQuery UI widget based on its `uiType`
    // and the current element.
    var ui = jQuery.ui[this.get('uiType')](options, this.get('element'));

    // Save off the instance of the jQuery UI widget as the `ui` property
    // on this SproutCore view.
    this.set('ui', ui);

  },

  // When SproutCore tears down the view's DOM element, it will call
  // this method.
  willDestroyElement: function() {
    var ui = this.get('ui');

    if (ui) {
      // Tear down any observers that were created to make jQuery UI
      // options available as SproutCore properties.
      var observers = this._observers;
      for (var prop in observers) {
        if (observers.hasOwnProperty(prop)) {
          this.removeObserver(prop, observers[prop]);
        }
      }
      ui._destroy();
    }
  },

  // Each jQuery UI widget has a series of options that can be configured.
  // For instance, to disable a button, you call
  // `button.options('disabled', true)` in jQuery UI. To make this compatible
  // with SproutCore bindings, any time the SproutCore property for a
  // given jQuery UI option changes, we update the jQuery UI widget.
  _gatherOptions: function() {
    var uiOptions = this.get('uiOptions'), options = {};

    // The view can specify a list of jQuery UI options that should be treated
    // as SproutCore properties.
    uiOptions.forEach(function(key) {
      options[key] = this.get(key);

      // Set up an observer on the SproutCore property. When it changes,
      // call jQuery UI's `setOption` method to reflect the property onto
      // the jQuery UI widget.
      var observer = function() {
        var value = this.get(key);
        this.get('ui')._setOption(key, value);
      };

      this.addObserver(key, observer);

      // Insert the observer in a Hash so we can remove it later.
      this._observers = this._observers || {};
      this._observers[key] = observer;
    }, this);

    return options;
  },

  // Each jQuery UI widget has a number of custom events that they can
  // trigger. For instance, the progressbar widget triggers a `complete`
  // event when the progress bar finishes. Make these events behave like
  // normal SproutCore events. For instance, a subclass of JQ.ProgressBar
  // could implement the `complete` method to be notified when the jQuery
  // UI widget triggered the event.
  _gatherEvents: function(options) {
    var uiEvents = this.get('uiEvents') || [], self = this;

    uiEvents.forEach(function(event) {
      var callback = self[event];

      if (callback) {
        // You can register a handler for a jQuery UI event by passing
        // it in along with the creation options. Update the options hash
        // to include any event callbacks.
        options[event] = function(event, ui) { callback.call(self, event, ui); };
      }
    });
  }
}); 
```

然后定义 Draggable Mixin：

```
JQ.Draggable = Ember.Mixin.create( JQ.Base, {
    uiType: 'draggable',
    uiOptions: ['disabled', 'addClasses', 'appendTo', 'axis', 'cancel', 'connectToSortable', 'containment', 'cursor', 
              'delay', 'distance', 'grid', 'handle', 'snap', 'snapMode', 'stack'],
    uiEvents: ['create', 'start', 'drag', 'stop']

}); 
```

可调整大小的 Mixin：

```
 JQ.Resizable = Ember.Mixin.create( JQ.Base, {
    uiType: 'resizable',
    uiOptions: ['disabled', 'alsoResize', 'animate', 'animateDuration', 'animateEasing', 'aspectRatio', 'autoHide', 'cancel', 
              'containment', 'delay', 'distance', 'ghost', 'grid', 'handles', 'helper', 'maxHeight', 'maxWidth', 'minHeight',
              'minWidth'],
    uiEvents: ['create', 'start', 'resize', 'stop']
}); 
```

基本上，对于您想要定义的每个 UI 交互`uiType`（可拖动、可放置、可排序等）、`uiOptions`交互的类型（由 mixin 观察）以及`uiEvents`要在视图中实现的交互的类型。

通过在您的视图中包含 JQ.Draggable 和 JQ.Droppable，它会自动变为可拖动和可放置 + 您可以在您的视图中更改其选项并将这些更改反映在 UI 插件上，例如`this.set('delay', 900)`，并在您的视图中实现插件事件，例如`drag: function(){ /* do something when dragging*\ }`）。

# c# - C# 代码大小和代码执行时间

> ID：11146474
> 
> 赞同：7
> 
> 时间：2012-06-21T20:46:29.753
> 
> 标签：c#, performance

有什么方法可以找到代码的大小和执行时间，以便我可以比较两个代码并决定哪个更好？

例如，假设我想找到这个的大小和执行时间

代码 1

```
for(int i=0; i<5; i++)
{
   sum+=1;
} 
```

和这个

代码 2

```
for(int i=0; i<=4; i++)
{
   sum = sum + 1;
} 
```

决定哪个更好（我现在不关心这个例子）。例如，结果将是：

```
Code 1:
Size: ? KB
Time: ? ms

Code 2:
Size: ? KB
Time: ? ms 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T20:48:50.297

您可以使用 ANTS Profiler [http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)（付费产品，但他们有试用版）或其他 Profiler 产品（ANTS、vTune、 OptimizeIt、DevPartner、YourKit、dotTrace）。

您也可以通过设置一些单元测试来自行测试这些功能，这些单元测试使用手动 StopWatch 检测来执行这两个功能，以比较执行时间（更快且更便宜）。如果您以后需要更改实现，单元测试还可以确保您没有任何性能回归。[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

```
 var stopWatch = new Stopwatch();
    stopWatch.Start();
    var result = CallFunction();
    stopWatch.Stop();
    var executionTime = stopWatch.Elapsed; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T20:49:23.230

要测量您应该使用的执行时间[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)- 如果您想要一个适当的基准，您将需要多次运行多次迭代并将它们平均。

```
var sw = new StopWatch();
sw.Start();

// do a million iterations

sw.Stop();

var time = sw.Elapsed; 
```

至于内存大小 - 您可以使用许多可用的内存分析器之一 - [ANTS 内存分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)，[dotTrace](http://www.jetbrains.com/profiler/)是两个商业选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T20:48:02.217

您可以使用[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类（参见`Length`属性）来确定文件的大小。

您可以使用[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类来确定运行程序需要多长时间。

# java - Cassandra 一致性级别规则

> ID：11146478
> 
> 赞同：1
> 
> 时间：2012-06-21T20:46:49.213
> 
> 标签：java, cassandra, hector

我们在理解 QUORUM 和 TWO ConsistencyLevel 规则之间的差异时遇到了问题。我们定义了一个包含 3 个节点、一个 NetworkTopologyStrategy 和一个 SimpleSnitch 的集群。如果 ConsistencyLevel 设置为 Quorum 进行写入，则没有问题。如果我们将 ConsistencyLevel 设置为 2 进行写入，则写入失败。

我相信在这种情况下，两个 ConsistencyLevels 都需要 2 个节点来写入，但一个失败，一个成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:07:03.243

你看到什么错误信息？

你的复制因子是多少？这将影响“法定人数”的含义。

例如，当 RF=1 时，QUORUM 只写入一个节点，这可以解释为什么它在两个节点失败时工作。有关方便的计算器，请参见[http://www.ecyrd.com/cassandracalculator/](http://www.ecyrd.com/cassandracalculator/)（尽管它不支持 CL=TWO 级别）。

两个和三个不适用于低 RF：请参阅[http://www.datastax.com/docs/0.7/consistency/index](http://www.datastax.com/docs/0.7/consistency/index)

> 对于复制因子高于 3 的特殊情况，Cassandra 提供了 2 和 3 的一致性级别

# python - 如何将多个变量存储在一个文件中，并从不同的文件访问这些变量？

> ID：11146483
> 
> 赞同：1
> 
> 时间：2012-06-21T20:47:11.313
> 
> 标签：python, database, variables

我想创建一个“迷你数据库”。我想要一个包含很多变量的文件，并且能够从文件中获取这些变量，同时还能够向文件中添加变量？例如，假设这是“mini-db”：

```
hello = ['a', 'b', 'c']
world = ['d', 'e', 'f']
foo = ['g', 'h', 'i'] 
```

从不同的文件中，我想说的是：

```
print MiniDB.hello[0] 
```

所以基本上访问变量。另外，我需要将变量写入文件。所以是这样的：

```
MiniDB.bar = ['j', 'k', 'l'] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:52:01.063

[`shelve`](http://docs.python.org/library/shelve.html)是最简单的方法。不过请注意并发限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:30:36.670

这可能不是您要查找的内容，但此类允许存储程序设置。您使用代表您需要的变量的默认设置加载它并嵌入字典以生成命名空间。它并不完美，但试图允​​许多个数据库定义相互共存，同时确保数据类型不会改变。它的使用范围有限，但可以作为您需要的解决方案。

```
import copy
import pprint
import pickle

################################################################################

class _Interface:

    def __init__(self, default, database=None):
        self.__default = default
        if database is None:
            self.__database = copy.deepcopy(default)
        else:
            self.__database = database

    def __repr__(self):
        return pprint.pformat(self.__database)

    def __getattr__(self, name):
        attr = self.__default[name]
        if isinstance(attr, dict):
            return _Interface(attr, self.__database[name])
        raise AttributeError(name)

    def __setattr__(self, name, value):
        if name in {'_Interface__default', '_Interface__database'}:
            super().__setattr__(name, value)
        else:
            raise AttributeError(name)

    def __getitem__(self, name):
        item = self.__default[name]
        if isinstance(item, dict):
            raise KeyError(name)
        return self.__database[name]

    def __setitem__(self, name, value):
        item = self.__default[name]
        if isinstance(value, type(item)):
            self.__database[name] = value
        else:
            raise TypeError(type(value))

################################################################################

class Registry(_Interface):

    @property
    def __database(self):
        return self._Interface__database

    def load(self, path):
        with open(path, 'rb') as file:
            data = pickle.load(file)
        self.__merge(data, self.__database)

    @classmethod
    def __merge(cls, source, sink):
        for key, value in source.items():
            if key not in sink:
                sink[key] = value
            elif isinstance(value, type(sink[key])):
                if isinstance(value, dict):
                    cls.__merge(value, sink[key])
                else:
                    sink[key] = value

    def save(self, path):
        with open(path, 'wb') as file:
            pickle.dump(self.__database, file)

################################################################################

file1 = Registry({'hello': ['a', 'b', 'c'],
                  'world': ['d', 'e', 'f'],
                  'foo': ['g', 'h', 'i'],
                  'namespace': {'j': 0,
                                'k': 1,
                                'm': '2',
                                'n': '3'}})

file2 = Registry({'hello': ['a', 'b', 'c'],
                  'world': ['d', 'e', 'f'],
                  'foo': ['g', 'h', 'i'],
                  'namespace': {'j': '4',
                                'k': '5',
                                'm': '6',
                                'n': '7'},
                  'bar': []})

file1['hello'][0] = 'z'
file1.save('mini.db')
file2.load('mini.db')
file2['bar'].extend(['j', 'k', 'l'])

print(file2)
print(file2.namespace['k'])
print(file2.namespace['m']) 
```

# php - 带有 json 和 php 的 jquery 自动完成

> ID：11146484
> 
> 赞同：1
> 
> 时间：2012-06-21T20:47:11.303
> 
> 标签：php, ajax, json, jquery-ui, jquery-ui-autocomplete

我正在尝试复制它，[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)。只是，我不想查询 geonames.org 服务器，而是查询我自己的服务器。麻烦的是，该教程没有提到任何关于地理名称的内容。

我试图抓住它并抓住 $_POST 变量，但我想我不明白 ajax 正在传递什么。$_POST['name_startsWith'] 不存在，这似乎正在传递。谁能告诉我发送的信息是什么样的？

此外，本教程是关于 jsonp，而不是 json。这有多重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:52:06.067

`jsonp`仅用于对外部服务器的请求（跨源）。返回的是`JSON`该调用的对象。

如果您向自己的服务器发出请求，只需使用带有`Content-Type: application/json`. 查看演示**远程数据源**和**远程缓存**。那些可能更适合你的盟友。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T20:57:39.737

JSONP 与 JSON 完全不同。正如其他人所说，JSONP 是一个跨服务器。

JSON 是从您自己的服务器获取数据的更好方法，并且更容易在所有浏览器中进行翻译和工作。

返回的是一个item数组，相对格式为：

```
[{label: '', description: ''}, { //etc }] 
```

标签用作显示名称，除非您带回额外的数据（如 ID），否则它将是用于在自动完成中选择项目的唯一数据。

使用诸如`select`您可以使用的函数`ui.item.id`（id 将与上面定义的数组一起返回）并使用它从列表中选择唯一的项目，以执行进一步的 AJAX 函数。

编辑：

要使用 pass-backed vars 来更改菜单的显示，您需要编写自己的`displayMenuItem`函数来利用上面定义的数组中的 vars。

进一步编辑：

他们实际上这样做的方式是双向的。远程服务器只是传回一个回显的 JSON 格式数组，就像上面定义的那样，没有别的（除了标题）。之后，JQuery 只是对数组进行排序并填充数据。

所以在 PHP 中这样做的一个例子：

```
echo json_encode(array('name' => 'whoop')); 
```

从字面上看，这就是远程服务器端...

再次编辑我忘记了用 JSONP 发送的回调

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:54:30.187

使用 Firefox 和一个名为 Firebug 的插件。使用“网络”视图面板。

我看到以下数据正在传递：

```
_            1340311947284
callback    jQuery17206118978844942496_1340311935530
featureClass    P
maxRows 12
name_startsWith atlanta
style   full 
```

请求的 URL 就是[这个](http://ws.geonames.org/searchJSON?callback=jQuery172005432004510136901_1340312135109&featureClass=P&style=full&maxRows=12&name_startsWith=atl&_=1340312142379)。在那里你可以看到 JSON 是如何形成的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T21:09:28.653

一些基本规则可以帮助您开始编写自己的 JSON 服务：

*   如果您希望其他网站能够使用您的数据，那么您需要实现 JSONP；否则 JSONP/JSON 都可以使用。JSONP 机制规避了[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的问题。

*   如果您希望其他网站能够使用您的数据，那么您的脚本应该通过查询字符串接受参数；查询字符串和表单变量都可以以其他方式使用。

*   对于 JSON 请求，您的服务器需要发出 JSON 编码的数据。数据必须与内容类型一起发送`application/json`。示例 PHP 代码：

```
header("Content-type: application/json");
echo json_encode(array("foo" => "bar"));
// {"foo":"bar"} 
```

*   对于 JSONP 请求，您的服务器需要发出包含在 JavaScript 函数调用和内容类型中的 JSON 数据`text/javascript`。示例 PHP 代码：

```
header("Content-type: text/javascript");
echo "callback(";
echo json_encode(array("foo" => "bar"));
echo ");";
// callback({"foo":"bar"}); 
```

*   您通常从 GET/POST 变量中获取回调函数的名称，而不是硬编码。

*   在实践中，JSONP 请求是使用`<script src>`标签生成的；而 JSON 请求是使用 XML HTTP 请求发出的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T20:58:14.737

这可能是您正在寻找的地理名称的文档：[http ://www.geonames.org/export/geonames-search.html](http://www.geonames.org/export/geonames-search.html)

如果您尝试其中一个示例链接，您应该会看到一个`geonames`元素列表。除其他外，每个都包含属性：和`name`，这就是本示例中显示的内容。`adminName1``countryName`

`jsonp`如果您从另一台主机请求数据，而不是提供您的页面的主机，这一点很重要。如果你打算调用自己的服务，你可以使用简单`json`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T21:02:11.297

**JSON 与 JSONP**

JSON 和 JSONP 之间的区别在于 JSON 如何从服务器返回。使用常规 JSON，服务器会以其标准响应格式返回纯 JSON。使用 JSONP，服务器返回一个 javascript 文档，其中包含一个函数调用，其中 JSON 数据传递给您发送到服务器的函数名称。

**从服务器返回的示例 JSON**

JSON：{名称：数据}

JSONP：函数名称（{名称：数据}）；

**何时使用 JSONP 与 JSON**

从 www.name.com 到 www.other.com 的查询使用 JSONP。

从 www.name.com 到 www.name.com 的查询使用常规 JSON。

**自动完成插件**

关于您的其他问题，自动完成插件发送的变量作为 GET 变量发送，因此请使用：$_GET['name_startsWith'] 或 $_REQUEST['name_startsWith']。（REQUEST 将检查 GET 和 POST）。

# algorithm - 伪随机对数正态值

> ID：11146488
> 
> 赞同：1
> 
> 时间：2012-06-21T20:47:25.367
> 
> 标签：algorithm, random, logarithm

我试图从两个对数正态分布中生成成对的随机值 - 问题是其中一个必须小于另一个。例如：

```
a1 <- log(47.31)
b1 <- sqrt(2*log(50.84/47.31))
a2 <- log(47.31)
b2 <- sqrt(2*log(59.34/47.31))

x1 <- rlnorm(1,a1,b1)
x2 <- rlnorm(1,a2,b2) 
```

我需要某种方法来确保 x1 < x2。有什么巧妙的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:52:09.143

嗯，是的，也不是。最简单的方法是检查是否满足条件，如果不满足，则重新生成随机数。但是这样做的结果是您的变量不再以您开始时的统计分布为特征：过滤过程偏差 x1 低和 x2 高。但是，如果您对此感到满意，那么只需循环直到满足所需的条件……理论上这可能需要无限次数的迭代，但我认为您并没有那么不幸:)。

如果两个分布相同，则更简单：如果 x1 > x2 则交换它们（我假设它们不相等！）

# c# - C#如何连续复制一些东西

> ID：11146494
> 
> 赞同：0
> 
> 时间：2012-06-21T20:47:49.773
> 
> 标签：c#, regex

我想做一些类似“复制链接”的东西，

例如列出的文件：

```
this is example http://stackoverflow.com and nothing more.
and another way http://www.google.com. 
```

如何只保留 URL？喜欢：

```
 http://stackoverflow.com
 http://www.google.com 
```

我知道这样的事情：

```
MatchCollection mc = Regex.Matches(str, "http.+?com", RegexOptions.Singleline); 
```

这是一个很好的代码？如何将结果 ^ 复制到文本文件？

请给我一个例子。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:53:53.900

我会更严格一点

```
Protocol, domain name, page and CGI parameters are captured into backreferenes 1 through 4

\b((?#protocol)https?|ftp)://((?#domain)[-A-Z0-9.]+)((?#file)/[-A-Z0-9+&@#/%=~_|!:,.;]*)?((?#parameters)\?[A-Z0-9+&@#/%=~_|!:,.;]*)? 
```

甚至

```
URL: RFC 3986
Validate if a string holds a URL as specified in RFC 3986\.  Both absolute and relative URLs are supported. 

(# Scheme
 [a-z][a-z0-9+\-.]*:
 (# Authority & path
  //
  ([a-z0-9\-._~%!$&'()*+,;=]+@)?              # User
  ([a-z0-9\-._~%]+                            # Named host
  |\[[a-f0-9:.]+\]                            # IPv6 host
  |\[v[a-f0-9][a-z0-9\-._~%!$&'()*+,;=:]+\])  # IPvFuture host
  (:[0-9]+)?                                  # Port
  (/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?          # Path
 |# Path without authority
  (/?[a-z0-9\-._~%!$&'()*+,;=:@]+(/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?)?
 )
|# Relative URL (no scheme or authority)
 ([a-z0-9\-._~%!$&'()*+,;=@]+(/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?  # Relative path
 |(/[a-z0-9\-._~%!$&'()*+,;=:@]+)+/?)                            # Absolute path
)
# Query
(\?[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?
# Fragment
(\#[a-z0-9\-._~%!$&'()*+,;=:@/?]*)? 
```

# java - 使用 Docs api JAVA 检索文本文档内容

> ID：11146497
> 
> 赞同：2
> 
> 时间：2012-06-21T20:48:18.680
> 
> 标签：java, gdata, google-docs-api, google-drive-api

如何使用 google docs api 在 java 中获取文档内容。这是我的代码。

```
 MediaContent mc = (MediaContent) entry.getContent();
      String UrlForDownload = mc.getUri()+"&exportFormat=txt&format=txt";
        mc.setUri(UrlForDownload);
    MediaSource ms = client.getMedia(mc); 
```

但是我没有得到内容，这是正确的获取方式吗？提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:50:01.953

我不确定是否有使用 Google Docs API 获取导出 URL 的好方法。但是，您可以尝试使用 Drive API v2 中的此 URL：

```
https://docs.google.com/feeds/download/documents/export/Export?id=<docID>&exportFormat=txt 
```

唯一的问题是 URL 应该是模糊的（尽管不太可能很快改变），理论上你应该只使用导出链接，它是 Google Drive API 中文件元数据的一部分：

```
"exportLinks": {
  ...
  "text/plain": "https://docs.google.com/feeds/download/documents/export/Export?id=1X24S59c2o4pXW9HkAzG-qnq9uegsLNXfnG_2usiVGDs&exportFormat=txt",
  ... 
```

但为此，您需要使用 Google Drive API 而不是 Google Document List API。

# hibernate - 我的内部连接不起作用

> ID：11146499
> 
> 赞同：0
> 
> 时间：2012-06-21T20:48:22.670
> 
> 标签：hibernate, inner-join, entities

我在两个表之间进行了内部连接，但它不起作用。如果有人能尽快帮助我，这将对我有很大帮助。

提前致谢

它看起来像这样：

```
List<Bondetal> bondetals = session.createQuery("from Bondetal bd inner join bd.Bon b where bd.idbon = b.idbon and idprodus = " + idprodus +" and Bon.suma >=" + suma).list(); 
```

我收到此错误：

```
Exception in thread "AWT-EventQueue-0" org.hibernate.QueryException: could not resolve property: Bon of: sakila.entity.Bondetal [from sakila.entity.Bondetal bd inner join bd.Bon b where bd.idbon = b.idbon and idprodus = 2 and Bon.suma >=1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:34:54.970

为了能够进行连接，您需要实体之间的关联。因此，BonDetal 实体应该有类似的东西

```
@ManyToOne
@JoinColumn(name = "idbon")
private Bon bon; 
```

它不能有任何`idbon`属性，因为 idbon 列是由关联映射的。

并且查询不需要任何`where bd.idbon = b.idbon`子句，因为 Hibernate 知道实体是如何相互关联的。因此，查询应该是：

```
select bd from Bondetal bd 
inner join bd.bon b 
where bd.idprodus = :idprodus 
and b.suma >= :suma 
```

您还应该使用命名参数而不是将值连接到查询中，以避免 SQL 注入攻击和转义问题。

所有这些都在[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)中进行了解释。如果你这么着急，你应该阅读它而不是尝试随机查询。

# c - 用于任务调度的 C++ 代码

> ID：11146507
> 
> 赞同：-2
> 
> 时间：2012-06-21T20:48:56.650
> 
> 标签：c

这段代码没有错误，但是当我执行它时，没有输出，程序自动关闭，说程序已停止工作。

```
#include<unistd.h>
#include<stdio.h>
#include<stdlib.h>
#include<time.h>
#include<string.h>
int main()
{
char *timetoken;
char currtime[7];
char schedtime[7];
int i;
struct tm *localtimeptr;
strcpy(schedtime,"15:25:00");
while(6!=9)
{
   time_t lt;
   sleep(1);
   lt = time(NULL);
   localtimeptr = localtime(lt);
   timetoken=strtok(asctime(localtimeptr)," ");
   for(i=1;i<5;i++)
   timetoken=strtok('\0'," ");
   if(i==3)
   {
           strcpy(currtime,timetoken);
    }
}
           printf("The current time is: %s\n",currtime);
           printf("We are waiting for: %s\n",schedtime);
           if(!strcmp(currtime,schedtime))
           {
                                          printf("Time to do stuff \n");
                                          system("C:\PROJECT X");
            }        
            getch();
            return 0;                      
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:54:28.283

我不确定您要做什么，但这很可疑：

```
while(6!=9)
{
   /* ... */
}
/* ... more code ... */ 
```

6 永远不等于 9，所以这是一个无限循环。没有办法跳出循环，因此“更多代码”部分中的任何内容都不会执行。这意味着您`printf`的 s 不会执行，您的`system`电话也不会执行。你需要一些方法来摆脱这个循环。

为了使代码更易于阅读（*这应该始终是重中之重！*），我建议只写

```
while (true) {
    ...
} 
```

为了更清楚地表明循环应该运行，直到您明确地`break`从中运行。

另一个注意事项：此代码

```
system("C:\PROJECT X"); 
```

不正确，因为 C++ 将解释`\P`为转义字符。要解决此问题，请转义您的斜线：

```
system("C:\\PROJECT X"); 
```

对于另一个错误，请仔细查看此循环：

```
 for(i=1;i<5;i++)
   timetoken=strtok('\0'," ");
   if(i==3)
   {
       strcpy(currtime,timetoken);
   } 
```

C++ 将其解释为

```
 for(i=1;i<5;i++) {
       timetoken=strtok('\0'," ");
   }

   if(i==3)
   {
       strcpy(currtime,timetoken);
   } 
```

从这里可以清楚地看出这是行不通的，因为该`if`语句在循环之外。因此，`i`永远不会是 3。您可能的意思是

```
 for(i=1;i<5;i++) {
       timetoken=strtok('\0'," ");
       if(i==3)
       {
           strcpy(currtime,timetoken);
       }
   } 
```

努力清理代码格式（缩进、空格等）将有助于防止此类错误。如果您已将`i`for 循环声明为本地，那么您可能会更早发现这一点。例如，此代码无法编译：

```
 for(int i = 1; i < 5; i++) {
       timetoken=strtok('\0'," ");
   }

   if(i==3) // i is not in scope
   {
       strcpy(currtime,timetoken);
   } 
```

作为一般规则，推迟声明变量，直到您绝对需要它们。它使代码更易于阅读（使用的变量往往与使用它们的代码接近）并且错误更少（如上所示）。

希望这可以帮助您入门！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T20:52:25.570

发布的代码存在一些问题：

*   这超出了数组的末尾：

    ```
    strcpy(schedtime,"15:25:00"); 
    ```

    as`schedtime`声明为 a `char[7]`，必须是`char[9]`（8 个字符加上空终止符）。

*   的第一个参数`strtok()`是 a `char*`，而不是 a `char`：

    ```
    timetoken=strtok('\0'," "); 
    ```

    你的意思是：

    ```
    timetoken=strtok(NULL," "); 
    ```

*   没有检查`timetoken`不为空或确保它适合`currtime`：

    ```
    if(i==3)
    {
        strcpy(currtime,timetoken);
    } 
    ```

    传递一个空指针`strcpy()`几乎肯定会导致分段错误（[http://ideone.com/bacOG](http://ideone.com/bacOG)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T21:00:29.797

这个序列是[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overflow)。你已经用你的字符串的内容在不相关的内存上乱涂乱画，所以在这之后*任何事情都*可能发生。（缓冲区溢出曾经是最广泛和最容易被利用的安全问题。）

```
char schedtime[7];
strcpy(schedtime,"15:25:00"); 
```

您需要确保`schedtime`足够长以容纳整个字符串，包括`NUL`末尾的 ascii 字节。`schedtime[9]`就足够了。

这是编写无限循环的一种奇怪方式：

```
while(6!=9)
{
...
} 
```

更惯用的是`while (1)`or `for (;;)`。坚持这些，它们使其他人更容易阅读您的代码。

*您的代码细节中可能还有其他错误，但问题的设计*存在更大的错误；您假设`sleep(1)`在无限循环中运行并根据目标时间检查时间的字符串值最终会比较*正确*——这是一个不正确的假设。进入睡眠一秒钟的进程可能会在指定的时间过去*后被*唤醒- 当您的条件评估为*true*时，您的进程可能会在 1000 毫秒内睡眠。

更好的是检查当前时间与所需时间，找出还有多少秒，以及`sleep()`整个持续时间。除非您的任务首先被信号唤醒，否则它将在所需时间的一秒钟内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T20:55:15.520

您复制的数据`schedtime`多于分配的数据：

```
strcpy(schedtime,"15:25:00"); 
```

复制的字符串有 9 个字符长，你有 7 个字符的空间。这本身可能不是问题，但是如果以涉及的方式排列内存，则在调用时`localtimptr`不会出现终止的空字符，可能会碰到未为您的进程分配的内存，因此以错误结束`printf()``scheduletime`

# git - 使用 git，如何在父远程分支重新定位后保存主题分支？

> ID：11146510
> 
> 赞同：9
> 
> 时间：2012-06-21T20:49:03.270
> 
> 标签：git, git-rebase

我有一个基于 git repo 上的远程分支的本地主题分支：

```
1 - 2 - 4 - 5 - 9 - 11  master
      \
        3 - 6 - 8 - 12  remote branch
              \
                7 - 10  my topic 
```

远程分支最近从 master 重新定位：

```
1 - 2 - 4 - 5 - 9 - 11  master
                       \
            ?            3' - 6' - 8' - 12'  remote branch
              \
                7 - 10  my topic 
```

我想将我的主题分支从远程分支的头部重新定位，以便我最终可以将我的更改合并回远程。但是，由于父提交的哈希已经改变，尝试一个简单的

```
$ git rebase origin/remote_branch 
```

导致我从未接触过的文件中出现许多冲突。

我能做些什么来清理这些分支吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T21:04:06.360

简单`origin/remote_branch`地 rebase 会让 git 感到困惑，因为它会尝试在 remote_branch 的尖端上 rebase 过时的提交，这会导致重复提交和冲突。

`--onto`相反，您必须使用选项关闭和打开与第六个相关的新点提交

```
git rebase --onto <6'-SHA> <6-SHA> my-topic 
```

`<6'-SHA>`并且分别是创建`<6-SHA>`的提交的新旧 id 。`my-topic`

# android - 使用 Windows 命令提示符获取 Google Maps API 调试密钥

> ID：11146512
> 
> 赞同：1
> 
> 时间：2012-06-21T20:49:18.060
> 
> 标签：android, google-maps

这是我第一次为我的 Android 应用程序获得 Google Maps API 调试密钥。在我的 Windows 命令提示符下，我不断在提示符处收到“keytool notrecognized....” `C:\Users\MyName>`。debug.keystore 的路径是`C:\Users\MyName\.android\debug.keystore`当我将目录更改为获取调试密钥的正确命令时仍然出现`C:\Users\MyName\.android>`错误`keytool -list -alias androiddebugkey -keystore C:\Users\MyName\.android\debug.keystore -storepass android -keypass android`？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T21:00:19.253

像使用 jdk1.7 一样获取地图密钥

```
 C:\<YOUR_JDK_PATH\bin>keytool -v androiddebugkey -keystore "C:Users\YOUR_NAME\.android
\debug.keystore" -storepass android -keypass android 
```

有关更多帮助，请参见下图：

![在此处输入图像描述](../Images/cc5cdb4b8b78859507e8d73097ffbb17.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:56:02.430

您需要将 keytool 添加到 PATH 变量中，或者说“C:\Program Files\Java\jdkxxxx\bin\keytool”而不仅仅是 keytool（不要复制和粘贴它，将其替换为您的 keytool 的路径）

# python - 在 Python 中验证 HTML/RDFa

> ID：11146520
> 
> 赞同：3
> 
> 时间：2012-06-21T20:49:47.857
> 
> 标签：python, html, validation, rdfa

编写可以验证 HTML 的 python 模块的最佳方法是什么，尤其是嵌入式 RDFa？我熟悉validator.w3.org，并且我对编写一个执行类似功能的自定义验证器感兴趣，但是对于使用RDFa 元素元数据的不同标准。有哪些不错的源代码可供查看，Python 库可供尝试，有哪些需要注意的事项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:15:12.607

埃米特，

我不确定你想要达到什么目的。我确实用 Python 编写了一个 RDFa 蒸馏器。您要问的第一个问题是您要考虑 XHTML 还是 HTML5。如果是前者，周围有一堆 XML 环境，还有用于 RDFa 的 DTD-s。那可以工作。对于 HTML5，您可能希望[在 Python 中使用 HTML5 解析器，](http://code.google.com/p/html5lib/)但它并不“了解” RDFa，但它可以生成，比如说，一个 DOM 树（或其他表示），然后您可以使用它来检查 RDFa 属性。但是请注意，HTML5 解析器不会执行“验证”，即针对各种可能的错误情况分析 HTML5 代码；它只是根据 HTML5 规范生成一个 DOM 树。

我希望这有帮助。

干杯

伊万

# ios - UIImageView+AFNetworking 图像未在 UITableViewCell 中正确加载

> ID：11146522
> 
> 赞同：2
> 
> 时间：2012-06-21T20:50:07.230
> 
> 标签：ios, uitableview, afnetworking

我正在使用 setImageWithURL 将图像延迟加载到我的 tableview 单元格中，但是有一个问题。它可以很好地加载图像，但设备上似乎存在刷新问题，其中图像仅在您将它们滚动出视图并再次滚动时才会显示。

它在模拟器中完美运行。该设备在 iPhone 4S 上运行 iOS 5.1.1

该表显示在 UINavigation 控制器中，并且由于图像被缓存，我希望当我重新访问屏幕时图像会很快出现。他们这样做了，但显示的大小只有原来的一半。

图像尺寸为 60x30。

将图像加载到只有一半大小的视网膜屏幕上是否存在问题？什么会导致此刷新问题？

下面的代码片段...

```
- (UITableViewCell *)tableView:(UITableView *)tableview cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    }

    ...
    [cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"transparent_shade"]];

    ...

    return cell;
} 
```

提前感谢您的任何见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:01:13.910

I would suggest loading/preparing the images before the `cellForRowAtIndexPath` method. The reason you are seeing the images after scrolling is because the images were previously downloading at the time this method was called, hence the files were not yet available.

Make a `NSMutableArray` inside your view's `viewWillAppear` method (override it if non-existent) for instance, and put all the images inside the array. Then, in the `cellForRowAtIndexPath` simply get the images from the array and assign them as needed; they should be displayed on demand, without delays.

Let us know how this works for you.

# ios - 将添加了子视图的 UIView 制作成单个图像？

> ID：11146525
> 
> 赞同：0
> 
> 时间：2012-06-21T20:50:20.927
> 
> 标签：ios, uiview

我有一个添加了子视图的视图。我想将具有许多子视图的视图转换为单个图像或视图。

这怎么可能？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T06:40:37.637

在 iOS7 上，您可以使用新`[UIView snapshotViewAfterScreenUpdates:]`方法。

为了支持较旧的操作系统，您可以使用 Core Graphics 将任何视图渲染到 UIImage 中。我在 UIView 上使用这个类别来拍摄快照：

`UView+Snapshot.h`：

```
#import <UIKit/UIKit.h>

@interface UIView (Snapshot)
- (UIImage *)snapshotImage;
@end 
```

`UView+Snapshot.m`：

```
#import "UIView+Snapshot.h"
#import <QuartzCore/QuartzCore.h>

@implementation UIView (Snapshot)

- (UIImage *)snapshotImage
{
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultingImage;
}

@end 
```

它需要 QuartzCore 框架，因此请确保将其添加到您的项目中。

要使用它，请导入标头并：

```
UIImage *snapshot = [interestingView snapshotImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:54:55.673

确实有可能，使用 Core Graphics 的渲染函数将视图渲染到上下文中，然后使用该上下文的内容初始化图像。[请参阅此问题](https://stackoverflow.com/questions/2500915/how-to-create-an-image-from-a-uiview-uiscrollview)的答案以获得良好的技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-19T07:00:33.003

***Swift 5***，调用方便

```
extension UIView {
    var asImg: UIImage? {
        let renderer = UIGraphicsImageRenderer(bounds: bounds)
        return renderer.image { rendererContext in
            layer.render(in: rendererContext.cgContext)
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-02T14:55:05.913

这是 Vytis 示例的 swift 2.x 版本

```
extension UIView {

    func snapshotImage() -> UIImage {
        UIGraphicsBeginImageContextWithOptions(self.bounds.size, false, 0.0)
        self.layer.renderInContext(UIGraphicsGetCurrentContext()!)
        let resultingImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return resultingImage
    }
} 
```

# facebook - 无需身份验证即可获取 Wall Facebook 消息

> ID：11146526
> 
> 赞同：0
> 
> 时间：2012-06-21T20:50:22.387
> 
> 标签：facebook, spring-mvc, spring-social

您知道是否有任何方法可以在我的网络应用程序上发布用户在我的 facebook 墙应用程序上发布的 facebook 消息？

我正在使用spring social，我尝试使用您可以在下面看到的代码：

```
facebook.feedOperations().getPosts() 
```

使用这句话，它会启动一个异常警报，提示需要身份验证。

谢谢。看待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:53:39.967

没有。如果可以，那么 Facebook 需要认真评估他们的安全性。用户需要授予您访问其数据的权限。验证后可以使用返回的用户令牌访问用户的 Facebook 墙贴。

# python - setuptools打包为.exe时可以安装依赖吗？

> ID：11146532
> 
> 赞同：0
> 
> 时间：2012-06-21T20:50:45.173
> 
> 标签：python, windows, packaging, setuptools

我是一个纯 Python 库的作者，该库旨在方便从命令行使用。对于 Windows 用户，最好只从 .exe 或 .msi 包安装包。

但是，我无法让安装程序安装包依赖项（尤其是对 setuptools 本身的依赖项，因此运行软件失败并在 pkg_resources 上出现导入错误）。如果用户需要手动安装 setuptools 和其他库，我认为提供简单的 .exe 安装程序没有多大意义。我宁愿告诉他们如何将easy_install 添加到他们的PATH 并通过这种方式（http://stackoverflow.com/questions/1449494/how-do-i-install-python-packages-on-windows）。

我过去曾构建过 .exe 包，但不记得这是否以我喜欢的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:21:27.903

分发具有依赖关系的包是很常见的，尤其是那些你有的包，但我理解你希望使安装尽可能简单。

看看[部署引导程序](http://msdn.microsoft.com/en-us/library/ms165429%28v=vs.80%29.aspx)，这是一个专门用于解决交付软件问题的工具，包括其先决条件。

无论您最终选择哪种打包方法，都不要以任何方式将 MSI 包含在其他 MSI 中，以保持您的理智。由于事务安装要求和 Windows Installer 数据库的锁定，这只是行不通。

# string - R从半标准字符串中提取时间分量

> ID：11146540
> 
> 赞同：7
> 
> 时间：2012-06-21T20:51:23.603
> 
> 标签：string, r, time, posixct

### 设置

我有一列持续时间作为字符串存储在数据框中。我想将它们转换为适当的时间对象，可能是[POSIXlt](http://stat.ethz.ch/R-manual/R-devel/library/base/html/DateTimeClasses.html)。[使用此方法](https://stackoverflow.com/questions/9022908/convert-list-vector-of-strings-with-date-format-into-posix-date-class-with-r)可以轻松解析大多数字符串：

```
> data <- data.frame(time.string = c(
+   "1 d 2 h 3 m 4 s",
+   "10 d 20 h 30 m 40 s",
+   "--"))
> data$time.span <- strptime(data$time.string, "%j d %H h %M m %S s")
> data$time.span
[1] "2012-01-01 02:03:04" "2012-01-10 20:30:40" NA 
```

缺少的持续时间已编码`"--"`并需要转换为`NA`- 这已经发生但应该保留。

挑战在于*字符串会丢弃零值元素*。因此，所需的值`2012-01-01 02:00:14`将是 string `"1 d 2 h 14 s"`。然而，这个字符串`NA`用简单的解析器解析：

```
> data2 <- data.frame(time.string = c(
+  "1 d 2 h 14 s",
+  "10 d 20 h 30 m 40 s",
+  "--"))
> data2$time.span <- strptime(data2$time.string, "%j d %H h %M m %S s")
> data2$time.span
[1] NA "2012-01-10 20:30:40" NA 
```

### 问题

1.  处理所有可能的字符串格式的“R Way”是什么？也许单独测试并提取每个元素，然后重新组合？
2.  POSIXlt 是正确的目标类吗？我需要不受任何特定开始时间的持续时间，因此添加错误的年月数据 ( `2012-01-`) 很麻烦。

### 解决方案

@mplourde 绝对有正确的想法，即基于测试日期格式中的各种条件来动态创建格式化字符串。添加`cut(Sys.Date(), breaks='years')`作为基线`datediff`也很好，但未能解决`as.POSIXct()` *注意中的一个关键怪癖：我使用的是 R2.11 基础，这可能已在以后的版本中修复*。

`as.POSIXct()`根据是否包含日期组件，输出会发生巨大变化：

```
> x <- "1 d 1 h 14 m 1 s"
> y <-     "1 h 14 m 1 s"  # Same string, no date component
> format (x)  # as specified below
[1] "%j d %H h %M m %S s"
> format (y)
[1] "% H h % M %S s"    
> as.POSIXct(x,format=format)  # Including the date baselines at year start
[1] "2012-01-01 01:14:01 EST"
> as.POSIXct(y,format=format)  # Excluding the date baselines at today start
[1] "2012-06-26 01:14:01 EDT" 
```

因此函数的第二个参数`difftime`应该是：

*   *如果输入字符串具有*日组件，则为当年第一天的开始
*   如果输入字符串*没有*日期组件，则为*当前*日期的开始

 *这可以通过更改函数的单位参数来实现`cut`：

```
parse.time <- function (x) {
  x <- as.character (x)
  break.unit <- ifelse(grepl("d",x),"years","days")  # chooses cut() unit
  format <- paste(c(if (grepl("d", x)) "%j d",
                    if (grepl("h", x)) "%H h",
                    if (grepl("m", x)) "%M m",
                    if (grepl("s", x)) "%S s"), collapse=" ")

  if (nchar(format) > 0) {
    difftime(as.POSIXct(x, format=format), 
             cut(Sys.Date(), breaks=break.unit),
             units="hours")
  } else {NA}

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T21:38:51.007

`difftime`对象是可以添加到一个`POSIXct`或多个对象的持续时间`POSIXlt`对象。也许你想用这个代替`POSIXlt`？

关于从字符串到时间对象的转换，您可以执行以下操作：

```
data <- data.frame(time.string = c(
    "1 d 1 h",
    "30 m 10 s",
    "1 d 2 h 3 m 4 s",
    "2 h 3 m 4 s",
    "10 d 20 h 30 m 40 s",
    "--"))

f <- function(x) {
    x <- as.character(x)
    format <- paste(c(if (grepl('d', x)) '%j d',
                      if (grepl('h', x)) '%H h',
                      if (grepl('m', x)) '%M m',
                      if (grepl('s', x)) '%S s'), collapse=' ')

    if (nchar(format) > 0) {
        if (grepl('%j d', format)) {
            # '%j 1' is day 0\. We add a day so that x = '1 d' means 24hrs.
            difftime(as.POSIXct(x, format=format) + as.difftime(1, units='days'), 
                    cut(Sys.Date(), breaks='years'),
                    units='hours')
        } else {
            as.difftime(x, format, units='hours')
        }
    } else { NA }
}

data$time.span <- sapply(data$time.string, FUN=f) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T22:01:15.977

[我认为使用lubridate](https://github.com/hadley/lubridate)会有更好的运气：

使用lubridate[轻松实现日期和时间](http://vita.had.co.nz/papers/lubridate.pdf)：

> 5.3\. 持续时间
> 
> ...
> 
> 持续时间的长度不受闰年、闰秒和夏令时的影响，因为持续时间以秒为单位。因此，持续时间具有一致的长度，并且可以很容易地与其他持续时间进行比较。持续时间是比较基于时间的属性（例如速度、速率和寿命）时使用的合适对象。lubridate 使用来自基础 R 的 difftime 类持续时间。已经创建了其他 difftime 方法来促进这一点。
> 
> lubridate 使用来自基础 R 的 difftime 类持续时间。已经创建了其他 difftime 方法来促进这一点。
> 
> ...
> 
> Duration 对象可以使用辅助函数 dyears()、dweeks()、ddays()、dhours()、dminutes() 和 dseconds() 轻松创建。标题中的 d 代表持续时间，并将这些对象与第 5.4 节中讨论的周期对象区分开来。每个对象使用上面给出的估计关系创建以秒为单位的持续时间。

也就是说，我（还）没有找到将字符串解析为持续时间的函数。

* * *

您还可以查看[Ruby 的 Chronic](http://chronic.rubyforge.org/)来了解时间解析的优雅程度。我还没有为 R 找到这样的库。*

# ios - NSTimer - 活动序列 - 如何使计时器无效？

> ID：11146552
> 
> 赞同：0
> 
> 时间：2012-06-21T20:52:22.117
> 
> 标签：ios, nstimer

我想使用 2 个计时器进行一系列活动（A 和 B）。我遇到了定时器无效的一些问题......这是正确的方法吗？谢谢！！！

```
timerAStart = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(startActivityA) userInfo:nil repeats:NO];
timerAStop = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(StopA) userInfo:nil repeats:NO];
timerBStart = [NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(startActivityB) userInfo:nil repeats:NO];
timerBStop = [NSTimer scheduledTimerWithTimeInterval:4 target:self selector:@selector(StopB) userInfo:nil repeats:NO];
- (void) StopA {
[timerAStart invalidate];
timerAStart=nil;
}
- (void) StopB {
[timerBStart invalidate];
timerBStart=nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:22:47.183

由于您的计时器是非重复的，因此您不需要无效。如果您查看文档，您会看到非重复计时器自失效。

# javascript - 在 Jqgrid 编辑表单上显示成功消息

> ID：11146557
> 
> 赞同：0
> 
> 时间：2012-06-21T20:52:36.997
> 
> 标签：javascript, asp.net-mvc-3, jqgrid

成功提交数据到服务器后如何显示成功消息？

就像Jqgrid 编辑表单上的**“行添加成功”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:41:10.177

```
afterSubmit: function () { 
    alert("Row added Successfully");    
    $(this).jqGrid("setGridParam", {datatype: 'xml'});     
    return [true]; },          
closeAfterAdd:true,
reloadAfterSubmit:true,
recreateForm: true,             
bottominfo:"Fields marked with (*) are required"}, 
```

# model-view-controller - 如果我安装一个 ColdFusion MVC 框架，它会弄乱旧的应用程序吗？

> ID：11146559
> 
> 赞同：1
> 
> 时间：2012-06-21T20:52:44.360
> 
> 标签：model-view-controller, frameworks, coldfusion, coldbox

标题几乎解释了问题的实质。我正在讨论使用 MVC 和 Coldbox 框架（或可能另一个）开始**新**的开发，但我不确定**不**使用该框架的旧应用程序是否能正常工作。

事情的设置方式，我不想回去将服务器上的旧应用程序重新设计为 MVC。太多了，而且太大了。然而，我确实想利用 MVC 架构进行所有新的开发（不是应用程序扩展）。

服务器在 ColdFusion 9 上运行。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:09:50.353

大多数 mvc 框架将使用前端控制器，例如`index.cfm?event=x.y`，因此至少您需要更改所有的`href`，除非您还进行 URL 重写，否则您的 SEO 将失败。

# python - 在用 Python 解析的 csv 文件中处理额外的换行符（回车）？

> ID：11146564
> 
> 赞同：14
> 
> 时间：2012-06-21T20:53:15.107
> 
> 标签：python, csv, newline

我有一个 CSV 文件，其中包含包含换行符的字段，例如：

```
A, B, C, D, E, F
123, 456, tree
, very, bla, indigo 
```

（在这种情况下，第二行的第三个字段是“tree\n”

我尝试了以下方法：

```
import csv
catalog = csv.reader(open('test.csv', 'rU'), delimiter=",", dialect=csv.excel_tab)
for row in catalog:
    print "Length: ", len(row), row 
```

我得到的结果是这样的：

```
Length:  6 ['A', ' B', ' C', ' D', ' E', ' F']
Length:  3 ['123', ' 456', ' tree']
Length:  4 ['   ', ' very', ' bla', ' indigo'] 
```

有谁知道如何快速删除无关的换行符？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T02:18:31.977

假设您有这个 Excel 电子表格：

![Excel 文件中的常见“问题”](../Images/73b5e110e561cfda46eb18e9b07ab016.png)

笔记：

1.  C2中的多行单元格；
2.  在 C1 和 D3 中嵌入逗号；
3.  空白单元格和 D4 中带有空格的单元格。

将其保存为 Excel 中的 CSV，您将获得此 csv 文件：

```
A1,B1,"C1,+comma",D1
,B2,"line 1
line 2",D2
,,C3,"D3,+comma"
,,,D4 space 
```

假设您希望将其读入 Python，其中空白单元格仍然有意义并且嵌入的逗号得到正确处理。

所以这：

```
with open("test.csv", 'rU') as csvIN:
    outCSV=(line for line in csv.reader(csvIN, dialect='excel'))

    for row in outCSV:
        print("Length: ", len(row), row) 
```

正确生成 Excel 中表示的 4x4 列表矩阵列表：

```
Length:  4 ['A1', 'B1', 'C1,+comma', 'D1']
Length:  4 ['', 'B2', 'line 1\nline 2', 'D2']
Length:  4 ['', '', 'C3', 'D3,+comma']
Length:  4 ['', '', '', 'D4 space'] 
```

您发布的示例 CSV 文件在字段周围缺少引号，并带有“额外的换行符”，使该换行符的含义不明确。是新行还是多行字段？

因此，您只能解释此 csv 文件：

```
A, B, C, D, E, F
123, 456, tree
, very, bla, indigo 
```

作为一个一维列表，如下所示：

```
with open("test.csv", 'rU') as csvIN:
   outCSV=[field.strip() for row in csv.reader(csvIN, delimiter=',') 
              for field in row if field] 
```

这会产生这个一维列表：

```
['A', 'B', 'C', 'D', 'E', 'F', '123', '456', 'tree', 'very', 'bla', 'indigo'] 
```

然后可以根据需要将其解释并重新组合到任何子组中。

python中惯用的重组方法使用[zip](http://docs.python.org/library/functions.html#zip)，如下所示：

```
>>> zip(*[iter(outCSV)]*6)
[('A', 'B', 'C', 'D', 'E', 'F'), ('123', '456', 'tree', 'very', 'bla', 'indigo')] 
```

或者，如果你想要一个列表列表，这也是惯用的：

```
>>> [outCSV[i:i+6] for i in range(0, len(outCSV),6)]
[['A', 'B', 'C', 'D', 'E', 'F'], ['123', '456', 'tree', 'very', 'bla', 'indigo']] 
```

如果您可以更改 CSV 文件的创建方式，那么解释起来就不会那么模棱两可了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T21:09:37.093

如果您有非空白单元格，这将起作用

```
data = [['A', ' B', ' C', ' D', ' E', ' F'],
['123', ' 456', ' tree'],
['   ', ' very', ' bla', ' indigo']]

flat_list = chain.from_iterable(data)
flat_list = [cell for cell in flat_list if cell.strip() != ''] # remove blank cells

rows = [flat_list[i:i+6] for i in range(0, len(flat_list), 6)] # chunk into groups of 6 
print rows 
```

输出：

```
[['A', ' B', ' C', ' D', ' E', ' F'], ['123', ' 456', ' tree', ' very', ' bla', ' indigo']] 
```

如果输入中有空白单元格，这将在大多数情况下起作用：

```
data = [['A', ' B', ' C', ' D', ' E', ' F'],
['123', ' 456', ' tree'],
['   ', ' very', ' bla', ' indigo']]

clean_rows = []
saved_row = []

for row in data:
    if len(saved_row):
        row_tail = saved_row.pop()
        row[0] = row_tail + row[0]  # reconstitute field broken by newline
        row = saved_row + row       # and reassemble the row (possibly only partially)
    if len(row) >= 6:
        clean_rows.append(row)
        saved_row = []
    else:
        saved_row = row

print clean_rows 
```

输出：

```
[['A', ' B', ' C', ' D', ' E', ' F'], ['123', ' 456', ' tree   ', ' very', ' bla', ' indigo']] 
```

然而，即使是第二种解决方案也会因输入而失败

```
A,B,C,D,E,F\nG
1,2,3,4,5,6 
```

在这种情况下，输入是模棱两可的，如果您的意思是，没有算法能够猜测：

```
A,B,C,D,E,F
G\n1,2,3,4,5,6 
```

（或上面给出的输入）

如果您可能遇到这种情况，您将不得不回到保存数据的人那里，并让他们以更清晰的格式保存数据（顺便说一句，CSV 文件中的 open office 引用换行符比 Excel 好得多）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T21:18:13.833

这应该有效。（警告：大脑编译代码）

```
with open('test.csv', 'rU') as infile:
   data = []
   for line in infile:
       temp_data = line.split(',')
       try:
           while len(temp_data) < 6: #column length
               temp_data.extend(infile.next())
       except StopIteration: pass
       data.append(temp_data) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T21:27:08.543

这适用于 CSV 模块并清除空白字段和​​行：

```
import csv
import StringIO

data="""A, B, C, D, E, F
123, 456, tree

,,
, very, bla, indigo"""

f=StringIO.StringIO(data)   #used just to simulate a file. Use your file here...
reader = csv.reader(f)
out=[]
for line in reader:
    line=[x.strip() for x in line if x]   # remove 'if x' if you want blank fields
    if len(line):
        out.append(line)

print out 
```

印刷：

```
[['A', ' B', ' C', ' D', ' E', ' F'], 
 ['123', '456', 'tree'], 
 ['very', 'bla', 'indigo']] 
```

如果你想要 6 个 col 块：

```
cols=6        
out=[i for sl in out for i in sl]                      # flatten out
out=[out[i:i+cols] for i in range(0, len(out), cols)]  # rechunk into 'cols' 
```

印刷：

```
[['A', 'B', 'C', 'D', 'E', 'F'],
 ['123', '456', 'tree', 'very', 'bla', 'indigo']] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T21:45:58.650

如果每行中的字段数相同且字段不能为空：

```
from itertools import izip_longest

nfields = 6
with open(filename) as f:
     fields = (field.strip() for line in f for field in line.split(',') if field)
     for row in izip_longest(*[iter(fields)]*nfields): # grouper recipe*
         print(row) 
```

[*石斑鱼食谱](https://stackoverflow.com/q/434287/4279)

### [输出](http://ideone.com/tmIUY)

```
('A', 'B', 'C', 'D', 'E', 'F')
('123', '456', 'tree', 'very', 'bla', 'indigo') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T21:12:39.823

如果您知道列数，最好的方法是忽略行尾然后拆分。

像这样的东西

```
with open(filename, 'rU') as fp:
    data = ''.join(fp.readlines())

data = data.split(',')
for n in range(0, len(data), 6)
    print(data[n:n+6]) 
```

如果您愿意，可以轻松地将其转换为生成器：

```
def read_ugly_file(filename, delimiter=',', columns=6):
    with open(filename, 'rU') as fp:
        data = ''.join(fp.readlines())

    data = data.split(delimiter)
    for n in range(0, len(data), columns)
        yield data[n:n+columns]

for row in read_ugly_file('myfile.csv'):
    print(row) 
```

# bash - 为什么在 bash 中运行某些东西时按箭头键会产生“^[[A^[[C^[[B^[[D””？

> ID：11146567
> 
> 赞同：2
> 
> 时间：2012-06-21T20:53:31.540
> 
> 标签：bash, shell, command-line

假设您运行命令

```
find . -iname bob 
```

在它运行时，按下键盘上的各种字母会将其插入到“find”产生的下一行的标准输出之前。但是，按向上箭头会产生“^[[A”。这是箭头键的一些键盘快捷键吗？

我目前正在想象它类似于 CTRL + ？+ A 因为 CTRL + C 产生“^C”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:55:25.303

> 这是箭头键的一些键盘快捷键吗？

正确的。当按下扩展键时，终端会生成这些字符序列，并由软件（例如 readline）来适当地解释这些序列。

> 我目前正在想象它类似于 CTRL + ？+ A 因为 CTRL + C 产生“^C”。

也正确。就是`Ctrl``[`，如图所示。

# ios - UITableView 未加载但已填充数组

> ID：11146572
> 
> 赞同：0
> 
> 时间：2012-06-21T20:54:08.273
> 
> 标签：ios, uitableview

我有一个 UITableView，我想通过 WebAPI 填充数据。我已经完成了所有设置，并且可以验证数据是否以 JSON 格式返回。我不明白为什么我在使用 NSLog 时看到我的数组中的数据打印了好几次，以及如何将这些数据分配给 UITableView。我能够从 viewDidLoad 方法填充表，但这些是硬编码值。我想用从我对远程服务器的调用返回的数据填充网格。我可以在我的 didReceiveData 委托中获得这些数据。我在这里做错了什么？

我的 MasterViewControler.h 中有这段代码

```
@interface MasterViewController : UITableViewController <UITableViewDataSource, UIAlertViewDelegate> {

NSMutableArray *dataArray;
NSMutableArray *categoryNames; 
```

}

这是我在 MasterViewController.m 文件中的精简版

```
NSMutableData* receivedData;
NSString* hostName;
NSInteger portNumber = 9999;
NSMutableDictionary* dictionary;
NSInteger maxRetryCount = 5;
int count = 0;

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

NSLog(@"Succeeded! Received %d bytes of data",[data length]);
NSError *error = nil;
// Get the JSON data from the website

id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

if ([result isKindOfClass:[NSArray class]]) {

    for (NSArray *item in result)
        [dataArray addObject:item];

    NSLog(@"%@", dataArray);
}
else {
    NSDictionary *jsonDictionary = (NSDictionary *)result;

    for(NSDictionary *item in jsonDictionary)
        NSLog(@"Item: %@", item);
}}

- (void)viewDidLoad{
[super viewDidLoad];

hostName = [[NSString alloc] initWithString:@"12.34.56.78"];

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@:%i%@", hostName, portNumber, @"/api/products"]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url cachePolicy: NSURLRequestReloadIgnoringLocalCacheData timeoutInterval: 2]; 

NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
[connection start];

// Do any additional setup after loading the view, typically from a nib.
self.navigationItem.leftBarButtonItem = self.editButtonItem;

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addNewItem)];  //insertNewObject
self.navigationItem.rightBarButtonItem = addButton;

dataArray = [[NSMutableArray alloc] init];
//[dataArray addObject:@"Apple"];
//[dataArray addObject:@"Mango"];
//[dataArray addObject:@"Orange"];} 
```

我没有在此处填充 dataArray，而是尝试在 didReceiveData 委托中填充它。dataArray 将被分配，但几乎就像我必须重新加载 UITableView 才能查看值。我在 didReceiveData 结束时尝试过，但收到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:56:09.980

首先确保您的`UITableViewDataSource`和`UITableViewDelegate`已设置。

填充数组后（在您的情况下，在 末尾`-(void)connection:didReceiveData:`），您将调用`[tableView reloadData]`以刷新表。

然后你将你的单元格设置为：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // If your array is an array of strings, change if applicable
    NSString *string = [dataArray objectAtIndex:indexPath.row];
    [cell.textLabel setText:string];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:57:07.173

你的类应该实现 UITableView 的 UITableViewDataSource 协议，然后将自己指定为数据源。然后实现 cellForRowAtIndexPath:，这是您实际使用模型数组初始化单元的地方。当您的数据准备就绪时，请在表格视图上调用 reloadData。

# javascript - 从表单JS中的div获取元素

> ID：11146575
> 
> 赞同：1
> 
> 时间：2012-06-21T20:54:16.530
> 
> 标签：javascript, html

如何从表单中的某个 div 中获取输入元素，而不是从所有 div 中获取？

我想使用 JAVASCRIPT 而不是 JQUERY。

我试着像这样使用`discountForm.oldDivIdName.elements[i].value.length`，但它不起作用。

更新：

我有这样的表格，

```
<form action="action.php" method="post">
 <div id='div1'>
  <input type="text" id="id[]" />
 </div>
 <div id='div2'>
  <input type="text" id="id[]" />
 </div>
 <input type="submit" name="submit" />
</form> 
```

两个文本字段 id 命名相同，我想获取名为 div1 而不是从 div2 的 div 文本字段的值，我该怎么做。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:57:26.830

如果输入元素有`id`'s，你可以做类似的事情

```
var value = document.getElementById('div1').children[0].value; 
```

你在哪里

```
<form action="action.php" method="post">
 <div id="div1">
  <input type="text" id="id" />
  <input type="submit" name="submit" />
 </div>
</form> 
```

# ruby-on-rails - Rails 3 的联系表中没有方法错误

> ID：11146576
> 
> 赞同：0
> 
> 时间：2012-06-21T20:54:21.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用以下教程将联系表放在一起：http: [//matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)

我已按照所有说明进行操作，但由于某种原因，当我尝试访问我的应用程序中的联系人页面时，我不断收到此错误：

```
NoMethodError in Contact#new

undefined method `[]' for nil:NilClass
Extracted source (around line #1):

1: <%= form_for @message, :url => contact_path do |form| %>
2:   <fieldset class="fields">
3:     <div class="field">
4:       <%= form.label :name %> 
```

我在这里想念什么？

**新的.html.erb**

```
<%= form_for @message, :url => contact_path do |form| %>
<fieldset class="fields">
<div class="field">
  <%= form.label :name %>
  <%= form.text_field :name %>
</div>

<div class="field">
  <%= form.label :email %>
  <%= form.text_field :email %>
</div>
<div class="field">
  <%= form.label :subject %>
  <%= form.text_field :subject %>
</div>

<div class="field">
  <%= form.label :body %>
  <%= form.text_area :body %>
</div>
</fieldset>

<fieldset class="actions">
<%= form.submit "Send" %>
</fieldset>
<% end %> 
```

**联系人控制器.rb**

```
class ContactController < ApplicationController

def new
  @message = Message.new
end

def create
  @message = Message.new(params[:message])

if @message.valid?
  NotificationsMailer.new_message(@message).deliver
  redirect_to(root_path, :notice => "Message was successfully sent.")
else
  flash.now.alert = "Please fill all fields."
  render :new
end
end
end 
```

**通知邮件程序.rb**

```
class NotificationsMailer < ActionMailer::Base

default :from => "myemail@gmail.com"
default :to => "myemail@gmail.com"

def new_message(message)
  @message = message
  mail(:subject => "[myemail@gmail.com] #{message.subject}")
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T13:08:06.910

我在本教程中遇到了类似的问题。这是因为我忘记`< ActiveRecord::Base`从 Message 类中删除。我也忘记换`attr_accessible`了`attr_accessor`。您可能需要仔细检查这两点。

# java - 正确使用 Java 泛型

> ID：11146577
> 
> 赞同：0
> 
> 时间：2012-06-21T20:54:26.050
> 
> 标签：java, generics

我有以下功能：

```
/**
 * Finds all entities of a certain type
 * @param <T> The type of the entity
 * @param entityType The class of the entity
 * @return A list of all the entities found, null if the entity is not in the database
 * or on error
 */
public <T> List<T> findAll(Class entityType) 
{
    javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    cq.select(cq.from(entityType));
    return getEntityManager().createQuery(cq).getResultList();
} 
```

你会注意到这是相当重复的。无论如何我可以重构这个函数，以便它不需要将 Class 作为参数。无论如何我可以使用传入的泛型类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:02:14.557

不，你不能——直接。在几段中，我将向您展示解决此问题的另一种方法。

Java 泛型是通过*类型擦除*实现的，这意味着所有类型信息都在运行时被剥离。当你的方法被调用时，它知道它应该返回 a `List`，但是在运行时没有什么告诉它它应该返回`List<Foo>`。构造`ArrayList`函数不需要访问类对象来完成它的工作；但是，您的代码可以。

解决这个问题的方法是*只*传递类，因为这是一个泛型方法（而不是泛型类），你可以这样做。如果您将方法的声明更改为

```
public <T> List<T> findAll(Class<T> entityType) 
```

然后你可以用类调用它：

```
findAll(String.class) 
```

并且编译器会自动检测到它应该返回一个`List<String>`. 它减少了冗余，但是通过从类中推断类型参数而不是相反。这是解决这类问题的标准方法——它在像[Guava](https://code.google.com/p/guava-libraries/)这样的库中出现了很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:03:32.907

简单回答是不”。由于所谓的类型擦除，所有参数化类型`Object.class`在编译的字节码中都被视为运行时。泛型类型仅在编译时使用，以防止您使用错误的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:58:06.690

创建“通用 DAO”的标准做法是拥有一个可参数化的抽象类，并拥有具有特定参数的子类。这样，方法本身就已经用正确的类型参数化了。

看一下这个例子：

[http://netbeans.org/projects/samples/sources/samples-source-code/content/samples/javaee/AffableBean/src/java/session/AbstractFacade.java](http://netbeans.org/projects/samples/sources/samples-source-code/content/samples/javaee/AffableBean/src/java/session/AbstractFacade.java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T20:59:29.773

不是真的，不。泛型是一个编译时特性。在运行时，您的 API 的调用者可以提供实体类型的任何实例，`Class<T>`因此您需要它在运行时可用以提供给休眠。编译器基本上没有能力为每个可能的方法构建一个单独的版本`T`，这是为了省略类参数而必须做的。

另外，`Class`是原始类型，您已经不正确地使用了泛型；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T20:59:38.297

Java 使用类型擦除，这意味着泛型类型参数在运行时不可用（在编译时使用以确保您的代码对类型正确）。这意味着要使用持久性，您需要显式传递类，以便运行时可以弄清楚如何进行持久性（例如，持久化对象属于哪个类）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T21:27:03.317

你可以或多或少地做你在 Scala 中要求的事情。（我不确定你是否可以使用 scala，但仅供参考，在这里）。

```
object Main extends App{
    def findAll[T : Manifest]() : Array[T] = {
       var a = new Array[T](0)
       println(a.getClass)
       a
    }

    var result = findAll[String]()
    println(result.getClass)

    var result2 = findAll[Array[Int]]()
    println(result2.getClass)
} 
```

通过使用隐式 Manfiest，scala 编译器记录了编译时删除了哪些泛型。

# javascript - 扩展 $.fn.init 函数

> ID：11146580
> 
> 赞同：2
> 
> 时间：2012-06-21T20:54:29.997
> 
> 标签：javascript, jquery

我正在尝试使用以下内容扩展 jQuery：

```
$.fn.extend({
    initCore:   $.fn.init,
    init:       function (selector, context, rootjQuery) {
        return $.fn.initCore(selector, context, rootjQuery);
    }
}), 
```

但是，它似乎无法正常工作，并且创建简单的东西（例如点击警报）会产生错误。谁能发现问题？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T20:56:26.330

`$.fn.init`是类构造函数本身。

尝试添加`$.fn.init.prototype = $.fn`后记以恢复原始原型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:58:12.487

我猜你错过了上下文。尝试

```
return $.fn.initCore.call(this, selector, context, rootjQuery); 
```

甚至更容易

```
return this.initCore(selector, context, rootjQuery); 
```

* * *

不，等等，`init`是构造函数本身。这意味着

```
$.fn.initCore.call(this, selector, context, rootjQuery);
doSomeThingWith(this);

...

$.fn.init.prototype = $.fn; 
```

或者

```
var ob = new $.fn.initCore(selector, context, rootjQuery);
doSomeThingWith(ob);
return ob; 
```

# c# - 如何在 Mono 中获取/运行 csharp REPL 的“gsharp”GUI 包装器？

> ID：11146590
> 
> 赞同：3
> 
> 时间：2012-06-21T20:55:09.207
> 
> 标签：c#, mono, read-eval-print-loop

[Mono 的 C# REPL](http://www.mono-project.com/CsharpRepl)在其页面上有以下信息：

> 此工具的 GUI 版本称为 gsharp，在安装 mono-tools 包时可用

[Mono 2.2 发行说明](http://www.mono-project.com/Release_Notes_Mono_2.2)中提到了同样的信息。

但是，虽然我已经安装了 mono-tools 的 30 天试用版（VS2010 的 vsix）和 Windows 软件包的普通 Mono（2.10.8），但我没有看到任何可以让我从屏幕截图“C# InteractiveBase Shell”。我也找不到以“gsharp”开头的磁盘上的任何文件（安装两者后）

'gsharp' 移动到其他地方了吗？

我知道源代码可作为 mono-tools repo @ [https://github.com/mono/mono-tools/tree/master/gsharp](https://github.com/mono/mono-tools/tree/master/gsharp)的一部分提供，但如果可能的话，只是试图找到一个“发布版本”来使用. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:35:29.407

Visual Studio 的 Mono-tools 是 Novell 的前产品，现已停产（Xamarin 也不提供）。

我建议您尝试从[http://www.mono-project.com/](http://www.mono-project.com/)安装Mono for Windows 官方捆绑包或 mingw32。

PS：注意，“Visual Studio 的 Mono 工具”和“mono-tools”模块（https://github.com/mono/mono-tools）是两个不同的东西。

（顺便说一句，Mono 2.2 已经很老了。现在只接受 Mono 2.10.x 或更高版本）

# php - 从外部页面提取信息

> ID：11146593
> 
> 赞同：0
> 
> 时间：2012-06-21T20:55:16.200
> 
> 标签：php, javascript, external, extract

好吧，忍受我。我的部分工作是为来电的客户填写在线表格。在这些表格中，输入标签中隐藏着各种有用的信息。我想制作我自己的页面来提取和显示所有这些有用的信息。我还将使用此页面来计算我一整天提交表单的次数。

我目前设置它的方式是在框架集中。左侧框架包含指向我们填写的不同表格的链接，当我单击一个时，外部表格会填充到右侧框架中。Javascript 非常适合这项工作，只是我的框架与表单不在同一台服务器上。

我讨厌 PHP。不会撒谎。所以我不是在寻找任何施舍，但任何指针都会很棒。

例如，您可以查看[http://www.youcangetacar.com上的表格，您可以使用密码“A101”，或者您可以在](http://www.youcangetacar.com)[http://customertrack.host-ed.me](http://customertrack.host-ed.me/)查看我目前所拥有的[/](http://customertrack.host-ed.me/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:06:15.367

制作一个页面，cURL 的页面是通过 url(curl.php?url=http://www.google.com) 传递给它的页面，然后你就不会遇到相同的域策略的问题。

不要忘记用绝对网址替换相对网址。

例如，action="/submit/form.php" 必须变为 action="http://www.domain.com/submit/form.php"

# boost - 在ubuntu中安装odtone

> ID：11146594
> 
> 赞同：0
> 
> 时间：2012-06-21T20:55:22.660
> 
> 标签：boost

请有人帮我在ubuntu中安装odtone！我是 ubuntu 新手，只知道几个命令！一份 PDF 建议安装 boost 库并手动编译它们！请解释什么是手动编译。如果有人向我推荐该编译的命令，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:03:15.037

查看[http://atnog.av.it.pt/odtone/documentation.html](http://atnog.av.it.pt/odtone/documentation.html)上的文档，请参阅“入门”部分。PDF 已过时，最新的文档仅以 HTML 格式提供。

# sql - 如何创建使用表名和数据库名中的变量归档 SP 的脚本？

> ID：11146597
> 
> 赞同：1
> 
> 时间：2012-06-21T20:55:40.107
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures, dynamic

所以我知道如何为我的所有表格执行此操作：

```
DECLARE @month VARCHAR(9)
DECLARE @db VARCHAR(10)
DECLARE @sql NVARCHAR(max)

SET @month = (SELECT Datename(month, Getdate()))
SET @db = 'MyDatabase'
SET @sql = 'SELECT * INTO ' + @db + '.dbo.MyTable_' + @month
           + ' FROM ' + @db + '.dbo.MyTable'

PRINT @sql

EXEC Sp_executesql @sql 
```

但是我无法将几个大型 SP 放入 @sql 变量中，即使我显然可以：

*CREATE/ALTER PROCEDURE' 不允许将数据库名称指定为对象名称的前缀*

有没有办法在没有整个文本的情况下编写 SP 传输脚本？

如果是这样，我怎样才能在变量中获取数据库名称`USE [dbname]`

我知道使用`sqlmcd`模式我可以做类似的事情

```
:setvar dbname "MyDatabase" 
USE $(dbname) 
```

但我需要将 dbname 作为变量也喜欢

```
DECLARE @db VARCHAR(10)
SET @db = (SELECT Datename(year, Getdate()))
:setvar dbname @db
USE $(dbname) 
```

因此，目标是每个月将一堆 SP 归档到数据库中，每年都有新的数据库，而无需手动更改脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:51:40.900

我将冒险尝试并假设您每个月都在尝试归档存储过程的源代码：

```
DECLARE @month VARCHAR(9)
DECLARE @db VARCHAR(128)
DECLARE @sql NVARCHAR(max)

SET @month = (SELECT Datename(month, Getdate()))
SET @db = 'AdventureWorks'
SET @sql = 'SELECT m.* INTO ' + @db + '.dbo.SPs_' + @month
           + ' FROM ' + @db + '.sys.procedures p '
           + 'INNER JOIN ' + @db + '.sys.sql_modules m ' 
           + 'ON p.object_id = m.object_id'

PRINT @sql

EXEC Sp_executesql @sql 
```

表中的`definition`列将包含存储过程代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:09:07.833

你需要做一些额外的工作。要在数据库中创建存储过程，您需要：

```
<database>..sp_executesql(<create table statement>) 
```

如果您知道数据库，那就太好了！如果没有，你必须在动态sql中做动态sql。它最终是这样的：

```
declare @sql nvarchar(max);
set @sql = @databasename+N'..sp_executesql '''+replace(@createsql, '''', '''''')+'''
exec(@sql); 
```

我想我说得对。

# objective-c - 在 Objective-C 中使用单例时的链接器错误

> ID：11146598
> 
> 赞同：0
> 
> 时间：2012-06-21T20:55:42.763
> 
> 标签：objective-c, linker, singleton, linker-errors

尝试实例化单例时，**链接器命令失败，退出代码为 1（使用 -v 查看调用）错误。**

这是我一直用来使我的班级成为单身人士的代码：

。H

```
@interface CoursesManager : NSObject
{

}
+ (id)SharedInstance;
@end 
```

.m

```
@implementation CoursesManager

+ (id)SharedInstance
{
     static dispatch_once_t once;
     static id sharedInstance;
     dispatch_once(&once, ^{
     sharedInstance = [[self alloc] init];
     });

     return sharedInstance;
}
@end 
```

这就是我在其他课程中使用它的方式：

```
coursesManager = [CoursesManager SharedInstance]; 
```

在进一步研究之后，似乎只是将此文件导入其他 .m 文件会导致链接器错误。我很困惑可能是什么原因造成的。任何帮助，将不胜感激。

仅供参考，我使用的是 Xcode 4.3.3。

**编辑错误的完整评论如下：**

ld：../Objects-normal/armv7/CourseEditorViewController.o 和 .../Objects-normal/armv7/CourseSelectionViewController.o 中的重复符号 _MAX_COURSES 用于架构 armv7 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

在@interface CoursesManager 上方，我声明了两个 const int 变量，MAX_COURSES 和 MAX_HOLES。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:12:58.553

> 似乎只是将此文件导入其他 .m 文件会导致链接器错误。

你不能那样做。您的文件中有一个静态变量和实现。静态变量对链接器来说不是问题，因为您导入它的每个 .m 文件都有自己的实例`cm`（虽然不是您想要的），但您也会得到重复`@implementation`的 s 这可能是导致链接器的原因错误。

将接口放入头文件并在任何地方导入。实现和静态变量放在一个单独的`.m`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:01:21.507

你有`@end`在你的实施结束时`CourseManager.m`？

您是否在文件中导入任何`CourseManager.h`文件？如果是这样，请确保您正在导入的所有文件都没有导入语句`CourseManager.h`（即两个文件相互导入）。

仅供参考，这是创建单例的推荐且线程安全的方法：

```
+ (id)sharedInstance
{
    static dispatch_once_t once;
    static id sharedInstance;
    dispatch_once(&once, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
} 
```

**更新**

出现错误是因为@rkeller`const int`在他的 CourseManager.h 文件中声明值，然后将该 .h 文件导入到其他几个文件中。

为了避免这种情况，您可以做一些事情：

1.  切换`const int`到`#define`
2.  切换`const int`到`static const int`
3.  `CourseManager.h`在as中声明值，`extern const int MyConstant` 然后`CourseManager.m`像这样实例化值：`const int MyConstant = 0;`

当您在头文件中声明一个非静态常量时，编译器将该常量视为导入该头文件的每个文件的独立全局变量。然后，当链接器尝试链接所有已编译的源时，它将多次遇到全局 - 因此出现链接器错误。

# c# - 创建倒计时日期 C#

> ID：11146602
> 
> 赞同：6
> 
> 时间：2012-06-21T20:56:03.083
> 
> 标签：c#, datetime, timer, timespan

我想做一个 Windows 窗体应用程序，它只显示一个计时器：

xx天xx小时xx分钟xx秒

*   没有设置计时器或任何东西的选项，我想在代码中这样做但是，问题是我希望它从当前时间（DateTime.Now）倒计时到特定日期。所以我最终将剩下的时间设置为 TimeSpan 类型。我现在怀疑如何实际显示它，所以它实际上正在工作，并且更新（倒计时）似乎找不到对我有帮助的教程，所以我希望我能在这里得到一些帮助:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T21:07:27.953

您可以使用[时间跨度格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)和计时器：

```
DateTime endTime = new DateTime(2013,01,01,0,0,0);
private void button1_Click(object sender, EventArgs e)
{ 
    Timer t = new Timer();
    t.Interval = 500;
    t.Tick +=new EventHandler(t_Tick);
    TimeSpan ts = endTime.Subtract(DateTime.Now);
    label1.Text = ts.ToString("d' Days 'h' Hours 'm' Minutes 's' Seconds'");
    t.Start();
}

void  t_Tick(object sender, EventArgs e)
{
    TimeSpan ts = endTime.Subtract(DateTime.Now);
    label1.Text = ts.ToString("d' Days 'h' Hours 'm' Minutes 's' Seconds'");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T21:02:03.780

以下将为您提供倒计时字符串

```
//Get these values however you like.
DateTime daysLeft = DateTime.Parse("1/1/2012 12:00:01 AM");
DateTime startDate = DateTime.Now;

//Calculate countdown timer.
TimeSpan t = daysLeft - startDate;
string countDown = string.Format("{0} Days, {1} Hours, {2} Minutes, {3} Seconds til launch.", t.Days, t.Hours, t.Minutes, t.Seconds); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T20:59:21.817

使用 ToDate.Subtract(Now) 然后您所要做的就是格式化您获得的 TimeSpan 并将其显示在表单上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T21:00:32.490

您应该能够在谷歌上搜索类似的内容并获得数百个结果。 [http://channel9.msdn.com/coding4fun/articles/Countdown-to](http://channel9.msdn.com/coding4fun/articles/Countdown-to)，这是第一个看起来不错的。

# objective-c - 使用 ARC 临时保留对象的最佳方法

> ID：11146604
> 
> 赞同：0
> 
> 时间：2012-06-21T20:56:07.177
> 
> 标签：objective-c, ios, macos, cocoa-touch, cocoa

非常短的片段：

```
#pragma mark - NSNetServiceBrowserDelegate

- (void)netServiceBrowser:(NSNetServiceBrowser *)netServiceBrowser didFindService:(NSNetService *)netService moreComing:(BOOL)moreServicesComing
{
    netService.delegate = self;
    [netService resolveWithTimeout:30];
} 
```

在这个例子`- netServiceWillResolve:`中是在同一个事件循环中调用的。然后，`netService`被释放（因为 ARC）和休息没有机会被调用。

我不喜欢 ivar 的解决方案。`NSNetService *`既不是阵列。`netService`在调用最后一个委托方法之前，是否有更好的“保留”方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:03:05.083

[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNetService_Class/Reference/Reference.html#//apple_ref/doc/uid/20000918-BCIGBIAA)明确表示不保留委托，这是 Cocoa 中的正常模式。[resolveWithTimeout:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNetService_Class/Reference/Reference.html#//apple_ref/doc/uid/20000918-BCIIFEIH)上的文档也没有说明在调用委托方法之前保留 NSNetService。在正常的内存管理规则下（我认为这也适用于 ARC），您不能在该方法范围之外对该对象的生命周期做出任何假设。

或者换一种说法，通过不保持对对象的强引用，您是在说“我不再对此感兴趣，如果您愿意，请取消它”。

# django - django 可再发行应用程序与南

> ID：11146609
> 
> 赞同：0
> 
> 时间：2012-06-21T20:56:17.017
> 
> 标签：django, django-south

打算重新分发的 Django 应用程序没有 manage.py（也没有 settings.py，因为它是项目的一部分，而不是应用程序的一部分）。

在这种情况下如何运行 schemamigration --auto ？为了做到这一点，我是否需要有一个最小的 settings/manage.py 作为应用程序存储库的一部分？有没有办法用 django-admin.py 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:04:34.657

您只需要将应用程序添加到您`Installed_Apps`的`settings.py`

然后你可以运行`./manage.py schemamigration <app_name> --auto`

如果应用程序没有任何迁移，您将需要先运行`./manage.py schemamigration <app_name> --initial`，然后`./manage.py schemamigration <app_name> --auto`再运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T09:23:35.650

刚刚设法让这个在我的一个项目中发挥作用。这是对我有用的代码：

```
import sys

from django.conf import settings
from django.core.management import call_command

if not settings.configured:
    settings.configure(
        ROOT_URLCONF='',
        DEBUG=False,
        DATABASES={
            'default': {
                'ENGINE': 'django.db.backends.sqlite3',
                'NAME': 'test.db'
            }
        },
        INSTALLED_APPS=(
            'south',
            'my_app',
        )
    )

if __name__ == "__main__":
    call_command('schemamigration', 'my_app', 
                 initial=len(sys.argv) > 1,
                 auto=len(sys.argv) == 0 
```

上面的脚本保存为`migrate.py`并使用`python migrate.py`or运行`python migrate.py i`（`i`可以是任何东西，如果存在，它将使用`--initial`而不是`--auto`）。显然，您可以执行更高级的命令行选项解析，但这对我有用。

编辑：更新了脚本，`DATABASES`缺少密钥。在这个项目中，我使用相同的数据库来测试代码，所以它不是一个完全任意的配置。

# java - servlet 中的 xpath 查询给出异常

> ID：11146611
> 
> 赞同：0
> 
> 时间：2012-06-21T20:56:41.860
> 
> 标签：java, servlets, xpath, thread-safety

我在 servlet 的 init() 方法中初始化了一个 Document 对象，并在 doPost() 方法中使用它来为请求提供服务。

当 servlet 同时服务多个请求时，selectNodeList() xpath 查询会给出异常。异常如下所示：

```
Caused by: javax.xml.transform.TransformerException: -1
    at org.apache.xpath.XPath.execute(XPath.java:331)
    at org.apache.xpath.CachedXPathAPI.eval(CachedXPathAPI.java:328)
    at org.apache.xpath.CachedXPathAPI.selectNodeList(CachedXPathAPI.java:255)
    at org.apache.xpath.CachedXPathAPI.selectNodeList(CachedXPathAPI.java:235)
    at com.pro.bb.servlets.Controller.getDataOrPeriodForReport(Controller.java:511)
    ... 23 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: -1
    at org.apache.xpath.XPathContext.pushCurrentNode(XPathContext.java:808)
    at org.apache.xpath.axes.PredicatedNodeTest.acceptNode(PredicatedNodeTest.java:447)
    at org.apache.xpath.axes.AxesWalker.nextNode(AxesWalker.java:409)
    at org.apache.xpath.axes.WalkingIterator.nextNode(WalkingIterator.java:176)
    at org.apache.xpath.axes.NodeSequence.nextNode(NodeSequence.java:320)
    at org.apache.xpath.axes.NodeSequence.runTo(NodeSequence.java:474)
    at org.apache.xpath.axes.NodeSequence.setRoot(NodeSequence.java:257)
    at org.apache.xpath.axes.LocPathIterator.execute(LocPathIterator.java:257)
    at org.apache.xpath.XPath.execute(XPath.java:308) 
```

帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:01:12.117

该类`CachedXPathAPI`不是线程安全的。如果您在 servlet 中使用它，则必须手动注意同步访问（或使用多个实例）。

来自[Apache Xalan-j javadoc](http://xml.apache.org/xalan-j/apidocs/org/apache/xpath/CachedXPathAPI.html#CachedXPathAPI%28%29)：

> 请注意，任何特定的[CachedXPathAPI](http://xml.apache.org/xalan-j/apidocs/org/apache/xpath/CachedXPathAPI.html)实例都不得在没有同步的情况下由多个线程操作；我们目前不支持对单个[DTM](http://xml.apache.org/xalan-j/apidocs/org/apache/xml/dtm/DTM.html)的多线程访问。[类似地，任何CachedXPathAPI](http://xml.apache.org/xalan-j/apidocs/org/apache/xpath/CachedXPathAPI.html)的特定实例都不得在没有同步的情况下由多个线程操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:56:01.277

试试撒克逊。Saxon 文档实例和缓存查询/样式表/xpath 表达式都是完全线程安全的。

# c++ - 轮廓积分算法 C++

> ID：11146612
> 
> 赞同：3
> 
> 时间：2012-06-21T20:56:45.880
> 
> 标签：c++, math, numerical-integration

我正在尝试编写一个应用数学程序来计算复平面中的轮廓积分。对于初学者，我想为梯形方法编写一个算法，但我有点难以理解它会是什么样子。毕竟 - 我们通常将梯形方法视为 2D 图，这里我们有 f: C -> C 所以我们说的是 4D。

最终我希望用这个算法计算残差，但是当我尝试最简单的简单 f(z) = 1/z 时，轮廓为围绕原点的半径为 1 的圆，我在 1 附近什么也得不到（这就是我应得）。这是梯形方法的代码：

```
complexCartesian trapezoid(complexCartesian *c1, complexCartesian *c2)
{
     complexCartesian difference = *c1 - *c2;
     complexCartesian ans(0.5 * (function(c1).real + function(c2).real) * 
                                                     difference.mag(), 
                          0.5 * (function(c1).imag + function(c2).imag) *
                                                     difference.mag());
     return ans;
} 
```

在这里，'function' 只计算 f(z) = 1/z （我确信这是正确完成的），而 complexCartesian 是我的 a + bi 格式复点类：

```
class complexCartesian
{
    public:
    double real;
    double imag;

    complexCartesian operator+ (const complexCartesian& c) const;
    complexCartesian operator- (const complexCartesian& c) const;
    complexCartesian(double realLocal, double imagLocal);
    double mag(); //magnitude
    string toString();
    complexPolar toPolar();
}; 
```

我非常有信心这些功能中的每一个都在做它应该做的事情。（我知道复数有一个标准类，但我想我会自己写一个练习）。要实际集成，我使用以下内容：

```
double increment = .00001;
double radius = 1.0;
complexCartesian res(0,0); //result
complexCartesian previous(1, 0); //start the point 1 + 0i

for (double i = increment; i <= 2*PI; i+=increment)
{
    counter++;
    complex cur(radius * cos(i), radius * sin(i));
    res = res + trapezoid(&cur, &previous);
    previous = cur;
}

cout << "computed at " << counter << " values " << endl;
cout << "the integral evaluates to " << res.toString() << endl; 
```

当我只沿着实轴积分，或者当我用一个常数替换我的函数时，我得到了正确的结果。否则，我倾向于得到大约 10^(-10) 到 10^(-15) 的数字。如果您有任何建议，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:43:58.847

检查你的梯形规则：确实，等高线积分被定义为黎曼和的极限，$\sum_k f(z_k)\delta z_k$，其中乘法被理解为复数乘法，这不是你所做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T22:23:20.347

你的梯形规则并没有真正计算*复杂*的梯形规则，而是一些介于真实和复杂之间的科学怪人。

下面是一个独立的示例，利用`std::complex`, 并“正确”工作。

```
#include <cmath>
#include <cassert>
#include <complex>
#include <iostream>

using std::cout;
using std::endl;
typedef std::complex<double> cplx;

typedef cplx (*function)(const cplx &);
typedef cplx (*path)(double);
typedef cplx (*rule)(function, const cplx &, const cplx &);

cplx inv(const cplx &z)
{
    return cplx(1,0)/z;
}

cplx unit_circle(double t)
{
    const double r = 1.0;
    const double c = 2*M_PI;
    return cplx(r*cos(c*t), r*sin(c*t));
}

cplx imag_exp_line_pi(double t)
{
    return exp(cplx(0, M_PI*t));
}

cplx trapezoid(function f, const cplx &a, const cplx &b)
{
    return 0.5 * (b-a) * (f(a)+f(b));
}

cplx integrate(function f, path path_, rule rule_)
{
    int counter = 0;
    double increment = .0001;
    cplx integral(0,0);
    cplx prev_point = path_(0.0);
    for (double i = increment; i <= 1.0; i += increment) {
        const cplx point = path_(i);
        integral += rule_(f, prev_point, point);
        prev_point = point;
        counter ++;
    }

    cout << "computed at " << counter << " values " << endl;
    cout << "the integral evaluates to " << integral << endl;
    return integral;
}

int main(int, char **)
{
    const double eps = 1E-7;
    cplx a, b;
    // Test in Octave using inverse and an exponential of a line
    // z = exp(1i*pi*(0:100)/100);
    // trapz(z, 1./z)
    // ans =
    //   0.0000 + 3.1411i
    a = integrate(inv, imag_exp_line_pi, trapezoid);
    b = cplx(0,M_PI);
    assert(abs(a-b) < eps*abs(b));

    // expected to be 2*PI*i
    a = integrate(inv, unit_circle, trapezoid);
    b = cplx(0,2*M_PI);
    assert(abs(a-b) < eps*abs(b));

    return 0;
} 
```

PS。如果要关心性能，那么`integrate`会将所有输入作为模板参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T17:19:21.143

我喜欢这里发布的两种解决方案，但我想出的另一种解决方案是将我的复杂坐标参数化并在极地工作。因为（在这种情况下）我只在极点周围的小圆圈上进行评估，所以我的坐标的极坐标形式只有一个变量（theta）。这将 4D 梯形规则变成了普通的 2D 规则。当然，如果我想沿非圆形轮廓进行积分，这将不起作用，为此我需要上述解决方案。

# javascript - Facebook 应用程序权限

> ID：11146614
> 
> 赞同：0
> 
> 时间：2012-06-21T20:56:49.943
> 
> 标签：javascript, facebook, flash

您好，我使用 Action-script 3 在 Flash 中开发了一个 Facebook 应用程序。该应用程序运行良好。我用 JavaScript 开发了 Facebook 登录和身份验证。问题是用户没有登录到 Facebook 应用程序工作正常，提供用户登录面板和应用程序权限面板并在用户墙上发布想要的东西，但如果用户已经登录，那么 JavaScript 不会要求 Facebook应用程序权限，因此该应用程序不会发布在用户墙上。我的 JavaScript 代码是

```
<script type="text/javascript">
    var APP_ID = "xxxxxxxxxxxxxxx";
    var REDIRECT_URI = "http://apps.facebook.com/engel-tanimiyorum/";
    var PERMS = 'publish_stream , email, user_birthday'; //comma separated list of extended permissions

    function init()
    {
        FB.init({appId:APP_ID, status: true, cookie: true, oauth: true});
        FB.getLoginStatus(handleLoginStatus);
    }

    function handleLoginStatus(response)
    {
        if (response.authResponse && response.status=="connected")
        {

            //Show the SWF
            $('#ConnectDemo').append('<h1>You need at least Flash Player 9.0 to view this page.</h1>');
            swfobject.embedSWF("index.swf",
                "ConnectDemo", "803", "516", "9.0", null, null, null, {name:"ConnectDemo"});

        }
        else
        {
            var params = window.location.toString().slice(window.location.toString().indexOf('?'));
            top.location = 'http://graph.facebook.com/oauth/authorize?client_id='
                +APP_ID
                +'&scope='+PERMS
                +'&redirect_uri=' + REDIRECT_URI
                + params;

        }

    }
    $(init);
</script> 
```

您的快速反应将是高度赞赏的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:06:21.870

我不知道这是否有帮助。但不是你的 var PERMS = 'publish_stream , email, user_birthday';

我确实相信它应该是一个数组，然后你会列出你的权限。
它对我有用，所以我认为它应该是这样的：

public var PERMS:Array = ["publish_stream","email","user_birthday"];

此外，不公开您的变量也可能是问题所在。

另外，据我所知，您没有任何按钮或文本输入？

如果没有，您需要创建这些。然后有一个点击处理程序，当文本输入中有文本时，它将激活一个点击处理程序，然后将转到提交后处理程序，然后转到一个获取状态处理程序，该处理程序将向您显示您创建的新状态。我可能说这一切都错了。毕竟，我没有在我的应用程序中使用 Java。但在我看来，你会这样做是合乎逻辑的。尝试我的第一个建议，然后回复我。如果您愿意，请通过 Shandan_Spencer@live.com 给我发电子邮件，我可以为您提供更多帮助。

# unix - 使用 GREP 转义字符

> ID：11146615
> 
> 赞同：0
> 
> 时间：2012-06-21T20:56:50.513
> 
> 标签：unix, grep

我正在使用 shell 在服务器上搜索带有 PHP 文件的特定字符串。字符串是

> [...]

通常我会使用类似的东西：

> grep "我的字符串" *.php

但它不适用于这些字符。我需要逃离他们吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:02:14.540

“[”、“.”和“]”是特殊字符，所以它们都需要转义。

`grep \[\.\.\.\] *.php`

# python - 在 Jinja2 中将“None”输出抑制为字符串

> ID：11146619
> 
> 赞同：59
> 
> 时间：2012-06-21T20:57:08.177
> 
> 标签：python, jinja2

`"None"`当值为 时，如何说服 Jinja2 不打印`None`？

我在字典中有许多条目，我想在一个循环中输出所有内容，而不是为不同的关键字设置特殊情况。如果我有一个值`None`（`NoneType`不是字符串），那么该字符串`"None"`将插入到模板渲染结果中。

尝试使用它来抑制它 `{{ value or '' }}`效果很好，因为它也会替换数值零。

在将字典传递给 Jinja2 进行渲染之前，我是否需要对其进行过滤？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-21T21:01:48.980

在 Jinja2 (2.9+) 的新版本中：

`{{ value if value }}`

在旧版本的 Jinja2（2.9 之前）中：

`{{ value if value is not none }}`效果很好。

如果这引发了关于没有 else 的错误，请尝试使用 else ..

`{{ value if value is not none else '' }}`

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-07-15T19:10:07.520

另一种选择是`finalize`在环境中使用钩子：

```
>>> import jinja2
>>> e = jinja2.Environment()
>>> e.from_string("{{ this }} / {{ that }}").render(this=0, that=None)
u'0 / None' 
```

但：

```
>>> def my_finalize(thing):
...     return thing if thing is not None else ''
...
>>> e = jinja2.Environment(finalize=my_finalize)
>>> e.from_string("{{ this }} / {{ that }}").render(this=0, that=None)
u'0 / ' 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-21T21:35:38.620

[默认过滤器](http://jinja.pocoo.org/docs/templates/#default)：

```
{{ value|default("", True) }} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-10-23T20:35:02.090

根据 Pocco 邮件列表中的这篇文章：[https ://groups.google.com/d/msg/pocoo-libs/SQ9ubo_Kamw/TadIdab9eN8J](https://groups.google.com/d/msg/pocoo-libs/SQ9ubo_Kamw/TadIdab9eN8J)

Armin Ronacher（Jinja2/Flask 等的创建者）推荐以下“pythonic”片段：

`{{ variable or 0 }}` `{{ variable or '' }}`

这里的概念是，再一次，显式优于隐式。

编辑：选择的答案绝对是正确的。我还没有真正遇到过模板变量是字符串或数字零的情况，因此上述代码段可能有助于减少模板中的代码噪音。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2014-03-29T09:39:29.553

自定义过滤器可以解决问题。像这样声明它：

```
def filter_suppress_none(val):
    if not val is None:
        return val
    else:
        return '' 
```

像这样安装它：

```
templating_environment.filters['sn'] = filter_suppress_none 
```

像这样使用它：

```
{{value|sn}} 
```

# php - 使用 Fwrite 用另一个 php 文件编辑一个 PHP 文件

> ID：11146626
> 
> 赞同：5
> 
> 时间：2012-06-21T20:57:32.403
> 
> 标签：php, fwrite

我的最后一个问题没有得到很好的解释。

我在这里要做的是将数据插入到 PHP 文件中，在另一个 .php 文件上使用 fwrite 功能。

为了简单起见，我将要插入的数据标记为 file.php，而我使用 fwrite 执行的标记是 edit.php

现在，我把事情写下来了，我的问题是，我需要在 file.php 上的关闭 php 标记之前插入该数据。

我尝试做的是，删除结束 php 标签，写入数据，然后重写标签。

这是我的源代码：

```
<?php
$rows = file("file.php");    
$tagremove = "?>";
foreach($rows as $key => $row) {
if(preg_match("/($tagremove)/", $row)) {
    unset($rows[$key]);
}
}
file_put_contents("file.php", implode("", $rows));

$User = $_GET["user"];
$File = "file.php"; 
$Handle = fopen($File, "a");
fwrite($Handle, "");
fwrite($Handle, $User);
fwrite($Handle, "\r\n");
fwrite($Handle, "?>");
print "Data Written"; 
fclose($Handle); 
?> 
```

当我在 Edit.php 上运行它时，它会将数据插入到文件中，但它只写入第一行，并替换已经存在的任何内容。（在我的例子中，它是开始的 php 标签）。我不知道我做错了什么，或者是否有其他方法可以做到这一点，但任何帮助将不胜感激。

编辑：这又是一个聊天客户端。

我有一个文件，它将消息发送到客户端然后读取的 .txt 文件中。

该文件正在读取 file.php (staff.php) 以检查提交的用户是否是工作人员。

如果用户确实是员工，那么它会更改 send.php 中的用户名变量。

到目前为止，send.php 只成功包含了 Staff.php，我尝试过 Staff.txt，原因是 php 代码在 Staff.php 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T21:11:21.227

试试这个：

```
$data="echo 'hello world!';";
$filecontent=file_get_contents('file.php');
// position of "?>"
$pos=strpos($filecontent, '?>');
$filecontent=substr($filecontent, 0, $pos)."\r\n".$data."\r\n".substr($filecontent, $pos);
file_put_contents("file.php", $filecontent); 
```

请不要忘记，您需要检查用户的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:07:31.407

好的更好的选择使用数据文件。我将使用 json ，因为它易于使用，也很容易被人眼解析：

```
// read file
$data = file_get_contents('data.json');
$json = json_decode($data, true);

// manipulate data
$json['users'][] = $_GET['user'];

// write out file
$dataNew = json_encode($json);
file_put_contents('data.json', $dataNew); 
```

> 原因是，php代码在staff.php中

那么这不是你的解决方法。您应该从数据存储中写入/读取这种信息 - 可以是文件或数据库......但不是实际的脚本。

# c# - Facebook 喜欢按钮 OG-tags

> ID：11146635
> 
> 赞同：1
> 
> 时间：2012-06-21T20:58:07.220
> 
> 标签：c#, facebook, facebook-graph-api

我有这样的方法：

```
private void LoadMetaTagsForFacebook()
{
    HtmlMeta meta = new HtmlMeta();
    meta.Attributes.Add("property", "fb:app_id");
    meta.Attributes.Add("content", "");
    Page.Header.Controls.Add(meta);

    meta = new HtmlMeta();
    meta.Attributes.Add("property", "og:url");
    meta.Attributes.Add("content", Request.Url.ToString());
    Page.Header.Controls.Add(meta);

    meta = new HtmlMeta();
    meta.Attributes.Add("property", "og:site_name");
    meta.Attributes.Add("content", "Site.com");
    Page.Header.Controls.Add(meta);

    meta = new HtmlMeta();
    meta.Attributes.Add("property", "og:title");
    meta.Attributes.Add("content", this._product.Name);
    Page.Header.Controls.Add(meta);

    meta = new HtmlMeta();
    meta.Attributes.Add("property", "og:image");
    meta.Attributes.Add("content", this._product.ImagePath);
    Page.Header.Controls.Add(meta);

    meta = new HtmlMeta();
    meta.Attributes.Add("property", "og:type");
    meta.Attributes.Add("content", "drink");
    Page.Header.Controls.Add(meta);
} 
```

但是当我运行调试器时，我得到了这个错误：

推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:image”属性，即使可以从其他标签推断出值。

1.  当我查看网站上的页面源代码时，元标记是正确的。我是否必须以其他方式添加元标记？我怎么做？

2.  我也收到一个错误，因为我有一个重定向路径（您必须登录才能看到该页面）。对此有什么解决方案？

我会很高兴得到答案，如果对我有帮助，我会接受答案……我花了 3 个小时搜索和尝试。

非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T12:22:44.913

尝试使用“名称”而不是“属性”，我在这里做了一个测试，它可以工作。

```
 meta= new HtmlMeta();
        meta.Attributes.Add("name", "og:title");
        meta.Content = this._product.Name;
        Page.Header.Controls.Add(meta); 
```

# sql-server - 格式化 SELECT..FOR XML 语句中返回的日期时间值

> ID：11146642
> 
> 赞同：3
> 
> 时间：2012-06-21T20:58:32.817
> 
> 标签：sql-server, xml, tsql, for-xml

考虑下表：

**订单**

```
OrderId             Date               CustomerId
 1000       2012-06-05 20:03:12.000         51
 1001       2012-06-16 12:02:31.170         48  
 1002       2012-06-18 19:45:16.000         33 
```

当我使用 FOR XML 提取订单数据时：

```
SELECT 
    OrderId AS 'Order/@Order-Id', 
    Date AS 'Order/ShipDate', 
    CustomerId AS 'Order/Customer' 
FROM Orders  
WHERE OrderId = 1000
FOR XML PATH ('') 
```

我得到以下结果：

```
<Order Order-Id="1000">
  <ShipDate>2010-02-20T16:03:12</ShipDate>
  <Customer>51</Customer>
</Order> 
```

问题是，`ShipDate`XML 文件中的值需要采用`M/DD/YYYY H:mm:ss PM`. 如何`ShipDate`将 XML 文件中的输出更改为所需的格式？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:53:37.730

类似于 Andomar 的解决方案，但这提供了当时请求的`h:mm:ss PM`格式：

```
DECLARE @o TABLE(OrderId INT, [Date] DATETIME, CustomerId INT);

INSERT @o SELECT 1000,'2012-06-05 20:03:12',51
UNION ALL SELECT 1001,'2012-06-16 12:02:31',48  
UNION ALL SELECT 1002,'2012-06-18 19:45:16',33;

SELECT 
    OrderId AS 'Order/@Order-Id', 
    CONVERT(CHAR(10), [Date], 101) 
    + ' ' + LTRIM(RIGHT(CONVERT(CHAR(20), [Date], 22), 11))
    AS 'Order/ShipDate', 
    CustomerId AS 'Order/Customer' 
FROM @o --WHERE OrderId = 1000
FOR XML PATH (''); 
```

结果：

```
<Order Order-Id="1000">
  <ShipDate>06/05/2012 8:03:12 PM</ShipDate>
  <Customer>51</Customer>
</Order>
<Order Order-Id="1001">
  <ShipDate>06/16/2012 12:02:31 PM</ShipDate>
  <Customer>48</Customer>
</Order>
<Order Order-Id="1002">
  <ShipDate>06/18/2012 7:45:16 PM</ShipDate>
  <Customer>33</Customer>
</Order> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:49:01.843

这是一个如何使用[CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)格式化日期的示例，例如`mm-dd-yyyy hh:mmAM`：

```
select  convert(varchar(19), OrderDate, 110) + ' ' +
        substring(convert(varchar(19), OrderDate, 100),13,8) AS 'Order/ShipDate'
from    (
        select cast('2012-06-01 01:00' as datetime) as OrderDate
        union all select cast('2012-06-01 14:00' as datetime)
        union all select cast('2012-06-11 23:00' as datetime)
        ) Orders
for xml path ('') 
```

这打印：

```
<Order>
  <ShipDate>06-01-2012  1:00AM</ShipDate>
</Order>
<Order>
  <ShipDate>06-01-2012  2:00PM</ShipDate>
</Order>
<Order>
  <ShipDate>06-11-2012 11:00PM</ShipDate>
</Order> 
```

# objective-c - 表从数组中删除索引路径行值

> ID：11146647
> 
> 赞同：1
> 
> 时间：2012-06-21T20:58:59.170
> 
> 标签：objective-c, arrays, uitableview, checkbox, didselectrowatindexpath

我正在尝试从选定的表行创建一个数组，以便可以将其推送到新视图。我的问题是从数组中删除未选择的行，尽管我选择了其他项目，但它会引发超出范围的索引错误。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
//listOfItems is a Pre Populated Array for the table 
    NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];     
//the array i want my selected items to be added to  
     NSArray *array = names;

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryNone) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

   [names addObject:cellValue];

        NSLog(@"ARRAY: %@", array);

    }
    else {
        cell.accessoryType = UITableViewCellAccessoryNone;

             [names removeObjectAtIndex:indexPath.row];        

         NSLog(@"ARRAY: %@", array);  
    }

    [tableView deselectRowAtIndexPath:indexPath animated:NO];

     } 
} 
```

如何在正在创建的数组中找到索引号，以便删除正确的值？任何帮助将不胜感激:-) 谢谢！

**-----解决方案-----** 这是另一种方法，以防其他人想知道。

```
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *selected = [listOfItems objectAtIndex:indexPath.row];

   if (cell.accessoryType == UITableViewCellAccessoryNone) {
      cell.accessoryType = UITableViewCellAccessoryCheckmark;

               [names addObject:selected];
             NSLog(@"ARRAY ADDED %@", names);
        }

   else {

        cell.accessoryType = UITableViewCellAccessoryNone;            

        [names removeObject:selected];   

        NSLog(@"ARRAY DELETED %@", names);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:25:25.437

如果您的意图是将一组已检查的单元格值传递给视图，为什么要在每个单元格选择时添加和删除对象？在您即将展示新的视图控制器之前，您可以轻松地实现这一点。像这样的东西：

```
// In whatever method you have to present the new view controller
// ...
NSMutableArray *names = [[NSMutableArray alloc] initWithCapacity:0];

for (int i = 0; i < listOfItems.count; i++)
{
    if ([self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]].accessoryType == UITableViewCellAccessoryCheckmark) //Change section number if not 0
    {
        [names addObject:[listOfItems objectAtIndex:i]];
    }
}

// Pass the array now to the destination controller 
```

Ps. You still have to manage checking/unchecking of cells (just as you're already doing in the code above).

# jquery - 灯箱背景效果

> ID：11146651
> 
> 赞同：2
> 
> 时间：2012-06-21T20:59:13.630
> 
> 标签：jquery

我刚开始学习 jQuery，我不确定如何启用类似于灯箱的背景效果。

我希望我的`<div>`（注册向导）以 100% 的不透明度显示，并且我希望它后面的所有其他内容都在 50% 左右的不透明度和不可点击的位置。

如何使用 jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:04:57.810

这是如何：

```
$('<div id="overlay" />').css({
   position:'fixed'
 , width: '100%'
 , height : '100%'
 , opacity : 0.6
 , background: '#000'
 , zIndex:9999
 , top: 0
 , left: 0
}).appendTo(document.body); 
```

# [演示](http://jsdo.it/blaster/dLI8)

您可以将上面的代码放在一个函数中，并在需要该覆盖时调用它。要在不需要时将其删除，您可以：

```
$('#overlay').remove(); 
```

* * *

仅供参考，您还可以将上述样式放在 CSS 中的类中，然后在`addClass`需要`body`时和`removeClass`想要删除它时使用 jQuery。

# java - 检查一个日期是否恰好在另一个日期之后 24 小时或更长时间

> ID：11146653
> 
> 赞同：17
> 
> 时间：2012-06-21T20:59:24.270
> 
> 标签：java, date

我正在使用 Java 中的 compareTo 方法来尝试检查某个日期是否大于或等于另一个日期之后的 24 小时。

如何确定将日期与哪个整数进行比较？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T21:04:50.900

使用[`Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类。如果您已经有一个`Date`对象，您仍然可以使用`Calendar`：

```
Date aDate = . . .
Calendar today = Calendar.getInstance();
today.setTime(aDate);
Calendar tomorrow = Calendar.getInstance();
tomorrow.setTime(aDate);
tomorrow.add(Calendar.DAY, 1);
Date tomorrowDate = tomorrow.getTime(); // if you need a Date object 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T21:06:12.607

答案取决于您想要实现的目标。

一种方法，可能是以毫秒为单位检查差异。以毫秒为单位的 24 小时可以通过以下方式计算

```
24  *  60  *  60  *  1000   =  86400000
h      min    sec    millis 
```

（在代码中，您还可以编写`TimeUnit.HOURS.toMillis(24)`哪个 IMO 更具描述性）

所以现在你可以检查两个日期之间的差异（以毫秒表示）是否大于 86400000。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-25T04:07:17.757

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-16T17:24:37.327

这将帮助您检查您的日期是否是昨天

```
public static final long ONE_MINUTE = 60 * 1000;
public static final long ONE_HOUR = 60 * ONE_MINUTE;
public static final long ONE_DAY = 24 * ONE_HOUR;

public static boolean isYesterday(Date d) {
    return DateUtils.isToday(d.getTime() + ONE_DAY);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-03T12:24:44.693

在您的活动 OnCreate

```
 //Get current date - yymmdd increases only
    SimpleDateFormat formatter = new SimpleDateFormat("yyMMdd");
    Date now = new Date();
    int nowTime= Integer.parseInt(formatter.format(now));

    //Get last login date - stored in db
    int lastLogin= dbManager.getLastLoginDate();

    //Check if next day
    if(nowTime> lastLogin){

        //Do your stuff
        //Update last login date
        dbManager.saveLoginDate(nowTime);
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T21:05:42.963

查找日期之间的增量：简而言之，

```
long endL = end.getTimeInMillis() + end.getTimeZone().getOffset( end.getTimeInMillis() ); 
long startL = this.getTimeInMillis() + this.getTimeZone().getOffset(this.getTimeInMillis());
return (endL - startL) / MILLISECS_PER_DAY; 
```

详细地，

[http://user.xmission.com/~goodhill/dates/deltaDates.html](http://user.xmission.com/~goodhill/dates/deltaDates.html)

# c++ - 使用默认构造函数提升 shared_ptr 的使用

> ID：11146654
> 
> 赞同：3
> 
> 时间：2012-06-21T20:59:27.557
> 
> 标签：c++, boost, shared-ptr

我想我可能需要在我的应用程序中执行类似以下伪代码的操作：

```
boost::shared_ptr<T> p;
...
...
p = boost::shared_ptr<T>(new T); 
```

我意识到使用赋值运算符还有其他选项，但我在`boost::shared_ptr`文档/示例中注意到他们从未讨论过像这样涉及默认构造函数的案例。

我想我的问题是：这是有效的用途吗？换句话说，它是否合法，是否会导致潜在的内存泄漏？感谢任何想法/更正。非常感谢！

`shared_ptr`注意：我确实记得读过，正如下面的一些评论所建议的那样，他们建议在调用构造函数时始终使用命名`new`。尽管如此，我还是很难想象这会造成任何伤害。如果您有任何反例，请发布它们。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:01:53.177

这是完全合法且记忆安全的。您调用默认构造函数的事实`T`是无关紧要的：只要您有一个动态分配的对象，您就可以将它包装在一个`shared_ptr<>`

如果你引用默认构造函数也可以：包装指针为NULL，在分配`shared_ptr<>`另一个时不会被删除`shared_ptr<>`

您必须小心，但要检查内容是否为 NULL，否则您可能正在访问无效指针

# android - Android：wifi和3g之间的HttpPost内容类型标题和正文不同

> ID：11146655
> 
> 赞同：2
> 
> 时间：2012-06-21T20:59:28.623
> 
> 标签：android, json, http-post, 3g, antiforgerytoken

一段时间以来一直试图弄清楚这个有什么问题。我正在使用 HttpClient.execute 向我的服务器 api 发出带有 json 正文的发布请求。在普通 wifi 和大多数 3g 下工作正常，但特别是在具有 AT&T 数据计划并且它在 3g 上的手机上，当我尝试执行请求时，我收到了一个 HttpResponseException，状态码为 422。对 422 做了一些研究，它说它是由于到：

“422 Unprocessable Entity (WebDAV) (RFC 4918)，请求格式正确，但由于语义错误而无法遵循。”

所以我猜测请求的发出方式出了点问题，但我在形成请求时做同样的事情，无论我是在 wifi 还是 3g 上。关于可能导致此错误的任何想法？

编辑：看起来我的服务器正在使用伪造保护来捕捉帖子。关闭它，错误停止，但api没有通过。挖得更深一点，打印出服务器实际接收到的内容，比较了 wifi 的开启和关闭，发现了两个不同之处。首先，3g 上的 body 是空的，好像它被阻止发送。其次，标头更改了正在发送的内容类型：

wifi: "HTTP_CONTENT_TYPE"=>"application/json" att 3g: "HTTP_CONTENT_TYPE"=>"text/plain; charset=ISO-8859-1,application/json"

鉴于我正在像这样设置连接，我期待“应用程序/json”：

```
StringEntity se = new StringEntity(json.toString());
se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); 
```

任何想法为什么当我转移到 3g 时情况会发生变化？

更新：运行 tcpdump，看起来我从 android 发送的内容在 wifi 和 3g 之间完全相同，所以似乎是提供者正在更改我的数据。除了 HTTPS 之外，还有其他建议的策略吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:30:43.830

解决了！

旧代码：

```
 mPost = new HttpPost(ur);
    StringEntity se = new StringEntity(json.toString());
    se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    mPost.setEntity(se); 
```

新代码：

```
 mPost = new HttpPost(ur);
    ByteArrayEntity baEntity = new ByteArrayEntity(json.toString().getBytes("UTF8"));
    baEntity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    mPost.setEntity(baEntity); 
```

看起来很像使用 ByteArrayEntity 而不是 StringEntity，因为我的帖子的正文使其适用于 3g。不确定为什么在使用 StringEntity 时 wifi 和 3g 之间的 tcpdump 看起来完全一样，但它似乎已经解决了这个问题，所以我没有抱怨。

# android - Android：mySQL，建表命令

> ID：11146658
> 
> 赞同：1
> 
> 时间：2012-06-21T20:59:40.957
> 
> 标签：android, mysql, sqlite, command-prompt

我正在尝试创建一个表，我已经尝试了很多次来解决这个问题......由于某种原因它不会接受这个......它在说一些关于 auto_increment

```
create table if not exists Assignments(
    id auto_increment primary key,
    class_name VARCHAR(30),
    assignment_name VARCHAR(30) not null,
    due_date VARCHAR(30) not null,
    notes VARCHAR(30)); 
```

有什么问题？

编辑：我最终尝试使用 SQLite，但是这个命令是通过 WAMP 写在我的 mySQL 上的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:02:26.817

是`autoincrement`，不是`auto_increment`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:06:27.350

首先，Android 使用 SQLite，所以你的 mysql 标签稍微不正确，除非我错过了你正在做的事情。

其次，你会说

```
CREATE TABLE ASSIGNMENTS(id INTEGER PRIMARY KEY, class_name TEXT, assignment_name TEXT NOT NULL, due_date TEXT NOT NULL, notes TEXT); 
```

如果您将主键设置为 INTEGER 类型，则会自动处理“自动增量”，即使 SQLite 在幕后对所有内容都使用字符串

参考：[SQLite 数据类型](http://www.sqlite.org/datatype3.html)

进一步参考：[整数主键](http://www.sqlite.org/lang_createtable.html#rowid)

更多参考：“如果 INSERT 语句尝试将 NULL 值插入 rowid 或整数主键列，系统会自动选择一个整数值作为 rowid 使用。单独提供有关如何完成的详细说明。”

# javascript - 更新 DOM 中的标签

> ID：11146659
> 
> 赞同：1
> 
> 时间：2012-06-21T20:59:41.543
> 
> 标签：javascript

我有一个如下所示的 JavaScript 函数：

```
function recalculateWhatIfCurrentRate(aEle, aChangedLabel, recordID, yearEndCurrentRate) {
    var rate = document.getElementById(aEle).value;
    document.getElementById(aChangedLabel).value = yearEndCurrentRate * (1 + rate);
}

aEle = ctl00_cpMain_tbCurrentRatePercentIncrease_131578
aChangedLabel = ctl00_cpMain_lblScrollCurrentRate_131578
recordId = 131578
yearEndCurrentRate = 100.65 
```

我想更改`aChangedLabel`.

为什么它在 DOM 中没有改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:01:15.383

`<label>`元素没有`value`属性，它们是标准容器元素。他们的文本内容将在他们的孩子（或后代）中表示为 TextNodes。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:03:35.913

标签标签没有 value 属性，需要设置 innerHTML 来改变文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:01:33.790

默认情况下，从 DOM 中提取的值是**字符串**。这可能在计算中失败，因为你不能用字符串做数学运算。

尝试将值转换为数字：

```
var rate = parseFloat(document.getElementById(aEle).value); 
```

# html - 标题元素中的标题标签

> ID：11146660
> 
> 赞同：1
> 
> 时间：2012-06-21T20:59:42.550
> 
> 标签：html, semantic-markup

我刚读完 HTML5 Developer's Cookbook 并有一个问题。我已经阅读了规格，但现在我找不到我想要弄清楚的参考资料。

在 HTML5 Developer's Cookbook 中，代码示例之一；图 1.9，清单 1.10 - 是：

```
// ...
<header>
    <h1>Jase is awesome</h1>
</header>
// ... 
```

现在，我了解了何时何地使用`header`元素，也了解了何时何地使用`h1`标签。但是，我的问题是，我们应该或必须*始终*或*只*在元素内使用`h1`标签`header`，如上例所示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:03:33.137

不，你可以在任何你喜欢的地方使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:05:20.170

您可以在文档中允许的任何地方使用`<h1>`标签。如果碰巧您在`<header>`元素中使用它，请继续。如果页面的主标题*不在*元素内`<header>`，请不要在那里使用它。

简而言之，是的，如果合适的话。用你最好的判断。

# c++ - 无法从 char*[] 转换为 char**

> ID：11146662
> 
> 赞同：5
> 
> 时间：2012-06-21T20:59:57.817
> 
> 标签：c++, arrays, pointers

当我尝试仅使用这两行的测试程序时

```
char array[256];
char** arrayPointer=&array; 
```

我得到错误

> 无法从 char*[256] 转换为 char**。

然而，如果我这样做：

```
char array[256];
char* temp=array;
char** arrayPointer=&temp; 
```

我没有得到这样的抱怨。

我认为这是 eclipse 的错误行为（我的 eclipase 现在的行为很有趣）但是当我尝试为该函数做一个 to 的`&array`转换`char**`时，我最终出现了异常行为，并且我的调试器暗示该数组没有被修改正如它应该。

PS。所有这些都是手写的，请原谅错别字。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T21:04:34.637

在 C++ 中，数组和指针**不是**一回事。数组在很多情况下可以隐式转换为指针，但是数组类型和指针类型是不同的。

在你的情况下，变量

```
char array[256]; 
```

有类型`char[256]`。如果你通过写来获取它的地址，你会得到一个指向 256 s`&array`数组的指针，它的类型是。这不一样了。这实际上是一件好事。如果你可以进行转换，如果你这样做会发生什么？`char``char (*)[256]``char**`

```
char array[256];
char** ptrPtr = &array; // Not legal!
*ptrPtr = new char[256]; 
```

在这种情况下，第三行将“重新分配”`array`以指向一个包含 256 个元素的新数组。但是，`array`不是指针！这个操作没有意义。

编写时出现奇怪的调试器错误的原因

```
char array[256];
char** ptrPtr = (char**) &array; // Legal, but Bad Times!
*ptrPtr = new char[256]; 
```

是您投入的演员表会导致未定义的行为。您假装指向 256 个实际`char`对象的数组的指针实际上是指向 a 的指针的指针`char`。这是一个毫无意义的演员表，所以当你这样做时，所有的赌注都没有了。

另一方面，如果您显式引入这样的`char*`变量：

```
char array[256];
char* ptr = array;
char** ptrPtr = &ptr; 
```

然后一切都很好。在第二行中，您创建一个指针（实际类型`char*`），它指向 的第一个元素`array`。在第三行中，您创建一个指向该新指针的指针。如果你再写

```
*ptrPtr = new char[137]; 
```

然后没有什么不好的事情发生；您刚刚更改了`ptr`指向的位置，并且没有破坏`array`.

希望这可以帮助！

# c# - 如何在 C# 中使用 QuickGraph 创建树 3-4-x 树？

> ID：11146664
> 
> 赞同：1
> 
> 时间：2012-06-21T18:44:43.123
> 
> 标签：c#, algorithm, tree

在 C# 中，使用 QuickGraph 库，是否可以在搜索树中创建 3-x 树并实现 Tree Traversal PreOrder (Inorder, PostOrder)？

[我在QuickGraph 文档](http://quickgraph.codeplex.com/documentation)中没有找到有关如何执行此操作的示例

# javascript - 将 YouTube/Vimeo 视频转换为无声的动画图像（想想哈利波特中的“动态图片”）？

> ID：11146665
> 
> 赞同：1
> 
> 时间：2012-06-21T21:00:10.303
> 
> 标签：javascript, ios, video, html5-video

您如何以编程方式将 YouTube/Vimeo 视频转换为一系列动画图像，每个图像都反映了视频的 5 秒？从本质上讲，目标是将视频解构为无声的 5 秒动画图片——想想哈利波特的“动态图片”。

一种选择是将视频切成 5 秒的视频块，但输出应该感觉像动画 GIF ......也就是说，立即播放，比将 150 张图片组合成一个 JavaScript 幻灯片（假设 30 FPS）更轻，但有JPG 或 PNG 的图像质量。如果视频可以做到这一点，那么这是我们愿意探索的一个选项。

另一种选择是拍摄视频的屏幕截图，但这不是程序化的。

想法？

输出需要在 Mobile Safari 上以 HTML5 呈现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:04:34.677

你这里有点问题——质量与文件大小直接相关。因此，如果您创建 30fps 的视频（真的比普通广播电视高吗？），您将遇到轻快加载的问题。

如果您正在寻找高帧率，我不知道我是否会走上制作实际 GIF 的路线，但如果它用于 Web 项目，HTML5 视频标签应该能够具有集成到的自动播放视频页面相当流畅。

您在这里想要做的是使用像[Handbrake](http://handbrake.fr/)这样的程序，将视频置于尽可能高的压缩设置（最低质量/帧率）并慢慢调高它，直到您认为您认为可以摆脱的最低限度。

[从那里，您可以查看使用这些设置和FFmpeg](http://ffmpeg.org/)之类的东西编写脚本的过程。您可能还希望删除视频元数据以尽可能多地节省文件空间。

# sql-server - 为什么“ (800) 555-1212” 不适合 varchar(20) 字段？

> ID：11146669
> 
> 赞同：2
> 
> 时间：2012-06-21T21:00:26.900
> 
> 标签：sql-server

我有一个定义为 varchar(20) 的 SQL Server 电话号码字段。像“800-555-1212”这样的电话号码没有问题，但像“(800) 555-1212”这样的电话号码会导致“数据将被截断”错误。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:05:53.820

该示例可以很好地插入以这种方式定义的字段（我运行了一个测试）。

您可能会添加一些不可见的字符，例如制表符和回车符。

或者，您可能有一个基于该字段（我们有一个 phone_number_stripped 字段仅存储数字）的计算字段（或触发器中的代码），该字段已考虑了剥离 - 但不是（或）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T21:04:24.367

一个值可以“像”那个值，但在两端用空格填充。

确保您的软件能够处理这种情况。我建议允许空间，但自动修剪它。

# android - Android中计量单位的国际化

> ID：11146675
> 
> 赞同：2
> 
> 时间：2012-06-21T21:00:42.537
> 
> 标签：android, internationalization, units-of-measurement

在我的应用程序中，有长度、重量等输入。不同的国家/地区遵循不同的测量准则，例如美国的英里、加仑和英国的公里、升。android Locale 是否支持在语言环境更改时进行此类转换，或者我们是否必须对其进行显式编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:46:38.410

你可以做这样的事情：

```
 if (locale.getCountry().equals("US")){
 // Code to compute weight based on USA format
 }

 else {
 // Code to compute weight based on metric system
 } 
```

除了美国，缅甸和利比里亚都有非公制格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:06:48.100

我不会是一个有用的功能！不，我担心你能指望`Locale`的只是帮助你用适当的分组字符格式化十进制数字。您必须编写代码来对数据进行数字转换，并且可能使用`Locale`设备上的默认值来确定向用户显示哪些单位。

# php - 使用 AJAX 表单提交从 MySQL 提交和检索数据

> ID：11146676
> 
> 赞同：0
> 
> 时间：2012-06-21T21:00:57.293
> 
> 标签：php, jquery, mysql, ajax

基本上，我试图做到这一点，以便在将帖子提交到我的网站时，它使用 AJAX 发送帖子，这样他们就不会更改页面，然后如果 AJAX 帖子成功，则检索所有帖子说来自 MySQL 的用户并将它们写入页面。

我的问题是浏览器（Chrome、IE）完全忽略了 AJAX 请求。

我的表格：

```
<div id="updatestatus">
                    <form action="" method="post" id="ps">
                        <textarea name="status" id="status"></textarea>
                        <input type="hidden" name="uid" id="uid" value="<?php echo $uid; ?>" />
                        <input type="submit" id="poststatus" name="poststatus" value="Share" />
                    </form>
                </div> 
```

我的 AJAX 请求：

```
$(function() {  
$("#poststatus").click(function() {  
    var status = $("textarea#status").val();  

    if (status == "") {  
    return false;  
    }

    var uid = $("input#uid").val();  
    var dataString = 'status='+ status + '&uid=' + uid;  

    $.ajax({  
        type: "POST",  
        url: "updatestatus.php",  
        data: dataString,  
        success: function() {  
            $.ajax({                                      
                url: 'ajax/query.php',         
                data: "uid=<?php echo $uid; ?>",        
                dataType: 'json',                
                success: function(data) {
                    var status = data[0];              
                    var sid = data[1];          
                    $('#mainprofile').html("<div id='statuses'><p>"+status+"</p></div>);
                    return false;  
                }  
            });  
        return false;  
        });  
    });
});
}); 
```

我的 ajax/query.php 请求

```
<?php 

  //connect stuff

    $uid = strip_tags(stripslashes(htmlspecialchars(htmlentities(mysql_real_escape_string($_GET['uid'])))));

  $result = mysql_query("SELECT * FROM mingle_status WHERE uid = '$uid' ORDER BY timestamp DESC");          //query
  $array = mysql_fetch_row($result);                          //fetch result    
  echo json_encode($array);

?> 
```

在此先感谢您的帮助-乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:37:59.857

在这一段 JS 代码中

```
$.ajax({  
    type: "POST",  
    url: "updatestatus.php",  
    data: dataString,  
    success: function() {  
        $.ajax({                                      
            url: 'ajax/query.php',         
            data: "uid=<?php echo $uid; ?>",        
            dataType: 'json',                
            success: function(data) {
                var status = data[0];              
                var sid = data[1];          
                $('#mainprofile').html("<div id='statuses'><p>"+status+"</p></div>);
                return false;  
            }  
        });  
    return false;  
    });  
}); 
```

您需要在最后一个 return false 之后的花括号之后删除结束括号，例如...

```
$.ajax({  
        type: "POST",  
        url: "updatestatus.php",  
        data: dataString,  
        success: function() {  
            $.ajax({                                      
                url: 'ajax/query.php',         
                data: "uid=<?php echo $uid; ?>",        
                dataType: 'json',                
                success: function(data) {
                    var status = data[0];              
                    var sid = data[1];          
                    $('#mainprofile').html("<div id='statuses'><p>"+status+"</p></div>");
                    return false;  
                }  
            });  
        return false;  
        };  
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:34:47.227

```
Try this

$(function() {  
$("#poststatus").click(function() { 
    var status = $.trim($("#status").val());  

    if (status == "") {  
    return false;  
    }

    var uid = $("#uid").val();  
    var dataString = 'status='+ status + '&uid=' + uid;  

    $.ajax({  
        type: "POST",  
        url: "updatestatus.php",  
        data: dataString,  
        success: function() {  
            $.ajax({                                      
                url: 'ajax/query.php',         
                data: "uid="+<?php echo $uid; ?>,      
                dataType: 'json',                
                success: function(data) {
                    var status = data[0];              
                    var sid = data[1];          
                    $('#mainprofile').html("<div id='statuses'><p>"+status+"</p></div>);
                    return false;  
                }  
            });  
        return false;  
        }  
    });
});
}); 
```

# java - 如何循环存储值到一个ArrayList中，j要传给JSP显示

> ID：11146678
> 
> 赞同：0
> 
> 时间：2012-06-21T21:01:03.367
> 
> 标签：java, jsp, jstl

我必须能够将数据存储在一个新对象中，这是我从一个复杂对象中获取的，其中每个项目都保存在一个列表中。

层次结构如下： 1) libraryId (Library) 2) bookId (book) 3) pageId (page) 4) wordId (word)

*   图书馆可以有零到多本书。每本书都是唯一的，可以有零到多个 pageId，如果有一个页面，每个 pageId 可以有零到多个 wordId。

我有数据，但我需要循环遍历每个项目并放入一个对象 - ArrayList 或类似对象 - 所以我可以传递给另一个需要一个列表的类。在下一个类中，数据将呈现在 JSP 数据表中。

我有以下分类来做到这一点：

```
class Library{ 
  int libraryId; 
  ArrayList<Book> books; 
} 

class Book { 
  int bookId; 
  ArrayList<Page> pages; 
} 

class Page { 
  int pageId; 
  ArrayList<Word> words; 
} 

class Word { 
  int wordId; 
} 
```

我已经开始这样做了：

```
Book book = new Book(); // create Book object 
ArrayList<Page> pages = new ArrayList<Page>; 
pages.add(new Page()); // add first page 
pages.add(new Page()); // add next page 
book.setPages(pages); // set reference to pages for book 
```

我已经尝试过了。我不确定它是否正常工作。根据上面的答案，我就是这样做的。我上相同的课程等。

我有以下数据示例：

1 本书，有 1 页，该页有 8 个单词。我还有一本书，有 2 页，每页 6 个字。我希望这是有道理的。

基于上面的例子，我该如何编写这段代码，然后我又如何检索数据呢？目的是我将其传递给 JSP，然后使用 JSTL 将其检索到表中。对此的任何帮助，以检索此数据也将有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:14:46.477

这实际上取决于您的框架。你是一个贪婪的惩罚者并使用直接的 JSP，如果是这样，看看 <jsp:useBean> 或使用一个脚本（呃......）来填充“书”变量。

否则，它将非常依赖于框架。像春天这样的东西是：

```
@Controller
public class MyController {
  @RequestMapping(...)
  public ModelAndView processRequest(HttpServletRequest request, 
        HttpServletResponse response) {
      Map<String, Object> model = new HashMap<String, Object>();
      Book book = ...;
      model.put("book", book);
      return new ModelAndView("viewbook", model);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T08:22:24.047

你可以这样做

```
<c:forEach var="book" items="${bookList}">
                        <tr>                        
                            <td>${book.id}</td>
                            <td>${book.name}</td>
                        </tr>
                        <c:forEach var="page" items="${book.pages}">
                            <tr>                        
                                <td>${page.id}</td>
                                <td>${page.name}</td>
                            </tr>
                        </c:forEach>                    
                    </c:forEach> 
```

# php - 为 php 切换 HTML - 导致轻微的布局问题，不确定如何修复

> ID：11146698
> 
> 赞同：-1
> 
> 时间：2012-06-21T21:02:06.663
> 
> 标签：php, html, css

[现场直播。](http://www.frshstudio.com)

理想情况下，在边框顶部和边框底部之间，我想要 3 个投资组合缩略图、一个分隔符（.png）和 3 个博客缩略图。每个部分最右边的下方应该是“...”（next.png）。

![理想的](../Images/d42ddda2e952261de0bf9f70a2cbbb69.png)

目前，“Recent Work”顶部有一个不应该存在的随机边框，“Recent Blog”的“...”按钮位于边框底部下方。是什么原因造成的/我该如何补救？

在我为 php 切换 HTML 之前，一切都很好。

```
<?php if ($portfolio_query->have_posts()) : ?>
        <div id="recent">
            <div id="recent-work">
                    <p><span>Recent Work</span></p>
                    <?php while ( $portfolio_query->have_posts() ) : $portfolio_query->the_post(); ?>
                    <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail( array(130,130) ); ?></a>
                    <?php endwhile; ?>
                        <div class="next"><a href="http://www.frshstudio.com/blog/"><img src="<?php echo get_template_directory_uri(); ?>/img/next.png" alt="next" id="next" /></a></div>
            </div><!-- end recent-work -->
        <?php endif; ?>

            <div class="divider">
                    <img src="<?php echo get_template_directory_uri(); ?>/img/divider.png" alt="Section divider" id="divider" />
            </div><!-- end divider -->

        <?php if ($blog_query->have_posts()) : ?>
        <div id="recent">
            <div id="recent-blog">
                    <p><span>Recent Blog</span></p>
                    <?php while ( $blog_query->have_posts() ) : $blog_query->the_post(); ?>
                    <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail( array(130,130) ); ?></a>
                    <?php endwhile; ?>
                        <div class="next"><a href="http://www.frshstudio.com/work/"><img src="<?php echo get_template_directory_uri(); ?>/img/next.png" alt="next" id="next" /></a></div>
            </div><!-- end recent-blog -->
        <?php endif; ?> 
```

&

```
#recent {
    border-top: 1px solid #202020;
    padding-bottom: 40px;
    padding-top: 40px;
}

#recent .divider {
    display: block;
    float: left;
    margin-left: 20px;
    padding-bottom: 20px;
}

#recent #recent-work {
    display: block;
    float: left;
    position:relative;
}

#recent #recent-work p {
    padding-bottom: 20px;
}

#recent #recent-work p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
}

#recent #recent-work a {
    padding-bottom: 40px;
    padding-right: 20px;
}

#recent #recent-blog {
    display: block;
    float: right;
    position:relative;
}

#recent #recent-blog p {
    padding-bottom: 20px;
}

#recent #recent-blog p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    padding-left: 20px;
    text-transform: uppercase;
}

#recent #recent-blog a {
    padding-bottom: 40px;
    padding-left: 20px;
}

#recent .next {
    position: absolute;
    bottom: -40px;
    right: 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:07:31.117

尝试添加关闭`</div>`以关闭您的第一个`<div id="recent">`

我认为您无意中嵌套`<div id="recent">....<div id="recent">`而没有关闭它们中的任何一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:09:37.517

您不止一次地使用了 id 并且它弄乱了您的页面。这将产生错误，搜索引擎将使用这些错误对您进行低排名。检查[http://validator.w3.org/](http://validator.w3.org/)自己看看。

此外，您的 id 最近带有顶部边框，并且您多次使用 div。尝试将最近更改为一个类，然后将包含两者的“最近”div 更改为顶部没有边框的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:06:04.507

只需发布动态 PHP 的输出，然后是硬编码的 HTML 版本，然后将它们并排比较。他们之间有什么不同就是答案。

# sql - 上一个值的 ms 访问查询

> ID：11146701
> 
> 赞同：0
> 
> 时间：2012-06-21T21:02:14.003
> 
> 标签：sql, ms-access

这个 MS-Access 查询可以改进吗？

即重复“SELECT TOP 1 col FROM Table2”行

如果Table2中curindex之前有索引，则查询返回Table2中col之前的值，

否则从 Table3 中返回 col 匹配 id 的值。

IE

如果 curindex = 7 返回值 = 来自 Table2 的 221

如果 curindex = 5 返回值 = 200 来自 Table3

```
Table2                               Table3
id index  col                        id    col
1    1    110                        1     100
1    2    120                        2     200
1    3    130                        3     300
1    4    140
2    5    211
2    6    221
2    7    231

PARAMETERS [curindex] Short;
SELECT TOP 1
  IIF (
    ( SELECT TOP 1 col
      FROM Table2
      WHERE index < [curindex]
       AND id =
        ( SELECT id
           FROM Table2
           WHERE index = [curindex])
    ) ,
        ( SELECT TOP 1 col
          FROM Table2
          WHERE index < [curindex]
            AND id =
            ( SELECT id
              FROM Table2
              WHERE index = [curindex])
          ORDER BY index DESC
        ),
        ( SELECT TOP 1 col
          FROM Table3
          WHERE id = 
           ( SELECT id
             FROM Table2
             WHERE index = [curindex])
        )
     ) AS col
FROM Table2
ORDER BY index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:21:56.763

您可以通过减少结果查询来限制 iff 条件的成本。

IE

```
SELECT TOP 1
  IIF (
( SELECT TOP 1 col
  FROM Table2
  WHERE index < [curindex]
   AND id =
    ( SELECT id
       FROM Table2
       WHERE index = [curindex])
) ,
    ( SELECT TOP 1 col
      FROM Table2
      WHERE index = [curindex])
    ),
    ( SELECT TOP 1 col
      FROM Table3
      WHERE id = 
       ( SELECT id
         FROM Table2
         WHERE index = [curindex])
    )
 ) AS col
FROM Table2
ORDER BY index 
```

# git - git push 与当前 unix 用户不同的用户

> ID：11146708
> 
> 赞同：4
> 
> 时间：2012-06-21T21:02:32.243
> 
> 标签：git

我正在尝试用 git 创建一个新的仓库。服务器是https。我以另一个无权推送到服务器的用户身份登录。我可以使用特定的用户名推送吗？我执行以下操作：

```
git remote add origin ssh://git.example.com/repo/project.git
git config auth
git config credential.https://git.example.com/repo/project.git username@example.com
git push -v origin master 
```

例如，我被要求以 vagrant 身份登录，而不是 username@example.com：

```
vagrant@lucid64:~/django_projects$ git push origin master
vagrant@git.frogdesign.com's password: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:28:23.210

尝试：`git remote set-url origin ssh://user@git.example.com/repo/project.git`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T10:10:48.870

你的有一个小错误`git config credential.https...`。

它应该是 ：

```
git config credential.https://github.com/repo/project\.git.username [YOUR_EMAIL] 
```

**应该是 ' project\.git '，而不是 ' project.git '。**

**不要忘记'\'，转义字符。**

* * *

你可以`less .git/config`检查一下：

```
[credential "https://github.com/repo/project.git"]
    username = [YOUR_EMAIL] 
```

* * *

`git config`正在**做同样的**工作`vim .git/config`。

`git config --global`正在**做同样的**工作`vim ~/.gitconfig`

* * *

您可以`man git-config`了解`man gitcredentials`更多信息。

# ruby-on-rails - 如何在 CanCan 中禁止用户操作

> ID：11146710
> 
> 赞同：0
> 
> 时间：2012-06-21T21:02:43.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

在我的ability.rb 文件中，如何设置它以便只有定义的用户可以做事，否则（未定义/未登录的用户）不能做任何事情？

例子：

```
def initialize(user)
    user ||= User.new #not logged in user
    if user.admin_user?
        can :manage, :all
    else
        #can't do anything. Cannot view, edit, or update.
    end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:10:17.400

我从未真正使用过 CanCan，但我查看了文档，我认为您不需要明确定义用户*不能*做什么。

你应该可以在你的控制器中做这样的事情：

```
if cannot? :destroy, @project 
  # redirect the user or do something else to disallow access
end 
```

`cannot?`如果未为用户分配定义了任何能力的角色，则应返回 true。反之则`can?`返回假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:17:50.697

您可以在初始化函数中尝试一个简单的条件集：

```
# app/models/ability.rb
def initialize(user)
  if user && user.admin_user?
    # Abilities for registered admin users
    can :manage, :all
  elsif user
    # Abilities for registered users
    can :read, :all
  else
    # Abilities for no user
  end
end 
```

当`initialize`被调用时，`user`可能（取决于您的身份验证解决方案）`nil`用于未登录的用户，这将触发最后一个分支。

# java - 无法安装jdk-7u5-windows-x64，双击什么都不做

> ID：11146718
> 
> 赞同：1
> 
> 时间：2012-06-21T21:03:22.880
> 
> 标签：java, installation, double-click, java-7

我在安装 Oracle jdk-7u5 时遇到了一个奇怪的问题。从[oracle site](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html)下载文件后，我无法运行它。当我双击文件*jdk-7u5-windows-x64*时，没有任何反应。什么都没有！当我尝试安装*jre-7u5-windows-x64*时，它运行正常！问题似乎只出在 jdk 上。有什么建议么 ？非常感谢！

# c# - Center Image inside Canvas

> ID：11146719
> 
> 赞同：1
> 
> 时间：2012-06-21T21:03:24.160
> 
> 标签：c#, wpf

I have an `Image` inside a `Canvas`:

```
<Canvas>
    <Image HorizontalAlignment="Center" VerticalAlignment="Center" />
</Canvas> 
```

And I want to display the `Image` *always* (even after a possible resizing) in the center of my `Canvas`, but in this way the image is draw in the Top-Left corner. How can I do?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T22:19:46.087

The coolest thing of this aproach taht it would work if you change sizes of both image and canvas. Converter code:

```
internal sealed class CenterConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        double canvasWidth = System.Convert.ToDouble(values[0]);
        double canvasHeight = System.Convert.ToDouble(values[1]);
        double controlWidth = System.Convert.ToDouble(values[2]);
        double controlHeight = System.Convert.ToDouble(values[3]);
        switch ((string)parameter)
        {
            case "top":
                return (canvasHeight - controlHeight) / 2;
            case "bottom":
                return (canvasHeight + controlHeight) / 2;
            case "left":
                return (canvasWidth - controlWidth) / 2;
            case "right":
                return (canvasWidth + controlWidth) / 2;
            default:
                return 0;
        }
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

XAML, somewhere in resources:

```
 <local:CenterConverter x:Key="CenterConverter" /> 
```

XAML:

```
<Canvas x:Name="superCoolCanvas">
    <Image x:Name="superCoolImage" >
        <Canvas.Top>
            <MultiBinding Converter="{StaticResource CenterConverter}" ConverterParameter="top">
                <Binding ElementName="superCoolCanvas" Path="ActualWidth" />
                <Binding ElementName="superCoolCanvas" Path="ActualHeight" />
                <Binding ElementName="superCoolImage" Path="ActualWidth" />
                <Binding ElementName="superCoolImage" Path="ActualHeight" />
            </MultiBinding>
        </Canvas.Top>
        <Canvas.Left>
            <MultiBinding Converter="{StaticResource CenterConverter}" ConverterParameter="left">
                <Binding ElementName="superCoolCanvas" Path="ActualWidth" />
                <Binding ElementName="superCoolCanvas" Path="ActualHeight" />
                <Binding ElementName="superCoolImage" Path="ActualWidth" />
                <Binding ElementName="superCoolImage" Path="ActualHeight" />
            </MultiBinding>
        </Canvas.Left>
    </Image>
</Canvas> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T03:17:27.683

Canvas is intended to use absolute coordinates. You may use solution provided by dwrd or put Canvas and Image both in Grid and then center the Image in this Grid.

# flash - 语法错误：左大括号前应有分号

> ID：11146724
> 
> 赞同：1
> 
> 时间：2012-06-21T21:03:40.193
> 
> 标签：flash, actionscript-2

我是这个程序的新手，所以我需要一点帮助。我正在尝试在 Flash 5 中制作一个按钮，单击该按钮并开始播放。但它总是有错误

> Sceene4，图层“按钮”，frame756，line1 1086：语法错误：左大括号前应有分号

```
on(release){
_root.gotoAndPlay(2);
}
stop(); 
```

当我在那里写分号时，它有更多的错误。谢谢！

# python - isinstance 和 Mocking

> ID：11146725
> 
> 赞同：40
> 
> 时间：2012-06-21T21:03:42.850
> 
> 标签：python, unit-testing, mocking

```
class HelloWorld(object):
    def say_it(self):
        return 'Hello I am Hello World'

def i_call_hello_world(hw_obj):
    print 'here... check type: %s' %type(HelloWorld)
    if isinstance(hw_obj, HelloWorld):
        print hw_obj.say_it()

from mock import patch, MagicMock
import unittest

class TestInstance(unittest.TestCase):
    @patch('__main__.HelloWorld', spec=HelloWorld)
    def test_mock(self,MK):
        print type(MK)
        MK.say_it.return_value = 'I am fake'
        v = i_call_hello_world(MK)
        print v

if __name__ == '__main__':
    c = HelloWorld()
    i_call_hello_world(c)
    print isinstance(c, HelloWorld)
    unittest.main() 
```

这是回溯

```
here... check type: <type 'type'>
Hello I am Hello World
True
<class 'mock.MagicMock'>
here... check type: <class 'mock.MagicMock'>
E
======================================================================
ERROR: test_mock (__main__.TestInstance)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/mock.py", line 1224, in patched
    return func(*args, **keywargs)
  File "t.py", line 18, in test_mock
    v = i_call_hello_world(MK)
  File "t.py", line 7, in i_call_hello_world
    if isinstance(hw_obj, HelloWorld):
TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types

----------------------------------------------------------------------
Ran 1 test in 0.002s 
```

**Q1。**为什么会抛出这个错误？他们是`<class type='MagicMock>`

**Q2。**如果错误已修复，如何暂停模拟以便第一行通过？

从[文档](http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.__class__)：

> 通常，`__class__`对象的属性将返回其类型。对于具有规范的模拟对象，`__class__`返回规范类。这允许模拟对象通过`isinstance()`他们正在替换/伪装的对象的测试：

```
mock = Mock(spec=3)
isinstance(mock, int)
True 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-10-25T22:08:20.813

恕我直言，这是一个很好的问题，并且说“*不要使用`isinstance`，而是使用鸭子打字*”是一个糟糕的答案。鸭子打字很棒，但不是灵丹妙药。有时`isinstance`是必要的，即使它不是pythonic。例如，如果您使用一些非 Python 的库或遗留代码，则必须使用`isinstance`. 这只是现实世界，mock 就是为了适应这种工作而设计的。

在代码中，最大的错误是您编写时：

```
@patch('__main__.HelloWorld', spec=HelloWorld)
def test_mock(self,MK): 
```

从我们阅读的[`patch`文档](https://docs.python.org/3/library/unittest.mock.html#patch)中（强调是我的）：

> 在函数体或 with 语句中，目标被一个新的**object**修补。

这意味着当您修补`HelloWorld` **类对象**时，引用`HelloWorld`将被函数`MagicMock`上下文的对象替换`test_mock()`。

然后， when`i_call_hello_world()`被执行的`if isinstance(hw_obj, HelloWorld):` `HelloWorld`是一个`MagicMock()`对象而不是一个类（如错误所示）。

这种行为是因为作为修补类引用的副作用，第二个参数`isinstance(hw_obj, HelloWorld)`变成了一个对象（一个`MagicMock`实例）。这既不是 a`class`也不是`type`. 一个简单的实验来理解这种行为是修改`i_call_hello_world()`如下：

```
HelloWorld_cache = HelloWorld

def i_call_hello_world(hw_obj):
    print 'here... check type: %s' %type(HelloWorld_cache)
    if isinstance(hw_obj, HelloWorld_cache):
        print hw_obj.say_it() 
```

该错误将消失，因为在加载模块时`HelloWorld`保存了对类的原始引用。`HelloWorld_cache`当应用补丁时，它会改变只是`HelloWorld`而不是`HelloWorld_cache`。

不幸的是，之前的实验没有给我们任何方法来处理像您这样的案例，因为您无法更改库或遗留代码来引入这样的技巧。此外，这些是我们不希望在代码中看到的技巧。

好消息是你可以做一些事情，但你不能只`patch`在`HelloWord`你有 `isinstace(o,HelloWord)`代码要测试的模块中引用。最好的方法取决于您必须解决的实际情况。在您的示例中，您可以只创建一个`Mock`用作`HelloWorld`对象，使用`spec`参数将其打扮成`HelloWorld`实例并通过`isinstance`测试。这正是`spec`设计的目标之一。你的测试会这样写：

```
def test_mock(self):
    MK = MagicMock(spec=HelloWorld) #The hw_obj passed to i_call_hello_world
    print type(MK)
    MK.say_it.return_value = 'I am fake'
    v = i_call_hello_world(MK)
    print v 
```

而只是 unittest 部分的输出是

```
<class 'mock.MagicMock'>
here... check type: <type 'type'>
I am fake
None 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-06T22:20:21.050

Michele d'Amico 在我看来提供了[正确的答案](https://stackoverflow.com/a/26567750/1093087)，我强烈建议您阅读它。但是我花了一些时间思考，而且我确信我将来会回到这个问题，我认为一个最小的代码示例将有助于阐明解决方案并提供快速参考：

```
from mock import patch, mock

class Foo(object): pass

# Cache the Foo class so it will be available for isinstance assert.
FooCache = Foo

with patch('__main__.Foo', spec=Foo):
    foo = Foo()
    assert isinstance(foo, FooCache)
    assert isinstance(foo, mock.mock.NonCallableMagicMock)

    # This will cause error from question:
    # TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types
    assert isinstance(foo, Foo) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-24T14:05:21.390

您可以通过从`MagicMock`类继承并覆盖`__subclasscheck__`方法来做到这一点：

```
class BaseMagicMock(MagicMock):

    def __subclasscheck__(self, subclass):
        # I couldn't find another way to get the IDs
        self_id = re.search("id='(.+?)'", self.__repr__()).group(1)
        subclass_id = re.search("id='(.+?)'", subclass.__repr__()).group(1)
        return self_id == subclass_id

    # def __instancecheck__(self, instance) for `isinstance` 
```

然后你可以将这个类与`@patch`装饰器一起使用：

```
class FooBarTestCase(TestCase):
    ...

    @patch('app.services.ClassB', new_callable=BaseMagicMock)
    @patch('app.services.ClassA', new_callable=BaseMagicMock)
    def test_mock_for_issubclass_support(self, ClassAMock, ClassBMock):
        check_for_subclasses(ClassAMock) 
```

就是这样！

* * *

* * *

* * *

评论：

您**必须**模拟**所有**使用`issubclass`.

例子：

```
def check_for_subclasses(class_1):
    if issubclass(class_1, ClassA): # it's mocked above using BaseMagicMock
        print("This is Class A")
    if issubclass(class_1, ClassB): # it's mocked above using BaseMagicMock
        print("This is Class B")
    if issubclass(class_1, ClassC): # it's not mocked with @patch
        print("This is Class C") 
```

`issubclass(class_1, ClassC)`将导致错误 `{TypeError}issubclass() arg 1 must be a class`，因为`ClassC`包含默认`__issubclass__`方法。然后我们应该像这样处理测试：

```
class FooBarTestCase(TestCase):
    ...

    @patch('app.services.ClassC', new_callable=BaseMagicMock)
    @patch('app.services.ClassB', new_callable=BaseMagicMock)
    @patch('app.services.ClassA', new_callable=BaseMagicMock)
    def test_mock_for_issubclass_support(self, ClassAMock, ClassBMock):
        check_for_subclasses(ClassAMock) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-07T11:36:52.207

只需使用以下方法修补 isinstance 方法：

```
@patch('__main__.isinstance', return_value=True) 
```

因此，您将获得预期的行为和覆盖率，您始终可以断言调用了模拟方法，请参见下面的测试用例示例：

```
class HelloWorld(object):
    def say_it(self):
        return 'Hello I am Hello World'

def i_call_hello_world(hw_obj):
    print('here... check type: %s' %type(HelloWorld))
    if isinstance(hw_obj, HelloWorld):
        print(hw_obj.say_it())

from unittest.mock import patch, MagicMock
import unittest

class TestInstance(unittest.TestCase):
    @patch('__main__.isinstance', return_value=True)
    def test_mock(self,MK):
        print(type(MK))
        MK.say_it.return_value = 'I am fake'
        v = i_call_hello_world(MK)
        print(v)
        self.assertTrue(MK.say_it.called)

    @patch('__main__.isinstance', return_value=False)
    def test_not_call(self, MK):
        print(type(MK))
        MK.say_it.return_value = 'I am fake'
        v = i_call_hello_world(MK)
        print(v)
        self.assertFalse(MK.say_it.called) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T23:03:23.663

我最近在编写一些单元测试时一直在努力解决这个问题。一种可能的解决方案是不实际尝试模拟整个 HelloWorld 类，而是模拟由您正在测试的代码调用的类的方法。例如，这样的事情应该可以工作：

```
class HelloWorld(object):
    def say_it(self):
        return 'Hello I am Hello World'

def i_call_hello_world(hw_obj):
    if isinstance(hw_obj, HelloWorld):
        return hw_obj.say_it()

from mock import patch, MagicMock
import unittest

class TestInstance(unittest.TestCase):
    @patch.object(HelloWorld, 'say_it')
    def test_mock(self, mocked_say_it):
        mocked_say_it.return_value = 'I am fake'
        v = i_call_hello_world(HelloWorld())
        self.assertEquals(v, 'I am fake') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-19T10:34:33.700

我认为使用[freezegun](https://github.com/spulec/freezegun)是安全的。正确模拟模块的所有必要准备工作`datetime`都在那里完成。此外，`isinstance`检查对我来说并没有失败。

它是这样工作的：

```
@freeze_time("2019-05-15")
def test_that_requires_frozen_time(): ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-21T04:32:44.690

`isinstance`是一个内置函数，因此修补内置函数不是一个好主意，因为它在[这个答案](https://stackoverflow.com/questions/44920344/is-it-possible-to-mock-the-builtin-len-function-in-python-3-6#answer-44920382)中有所解释。为了`isinstance`返回您想要的值，并避免此错误：

> TypeError: isinstance() arg 2 必须是类型或类型的元组

`isinstance`您可以在被测模块中打补丁。我还鼓励您在如下声明中用作`patch`上下文管理器：`with`

```
from mock import patch

def test_your_test(self):
    # your test set up

    with patch('your_module.isinstance', return_value=True): # or False
        # logic that uses isinstance 
```

用作上下文管理器`patch`允许您仅在要模拟它的特定函数/方法中进行模拟，而不是在整个测试中模拟它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-29T18:22:52.650

我想可能的解决方案可能是检查对象的子类。

```
issubclass(hw_obj.__class__, HelloWorld) 
```

例子：

```
from unittest.mock import patch, MagicMock
import unittest

class HelloWorld(object):
    def say_it(self):
        return 'Hello I am Hello World'

def i_call_hello_world(hw_obj):
    print('here... check type: %s' % type(HelloWorld))
    if isinstance(hw_obj, HelloWorld) or issubclass(hw_obj.__class__, HelloWorld):
        print(hw_obj.say_it())

class TestInstance(unittest.TestCase):
    @patch('__main__.isinstance', return_value=True)
    def test_mock(self, MK):
        print(type(MK))
        MK.say_it.return_value = 'I am fake'
        v = i_call_hello_world(MK)
        print(v)
        self.assertTrue(MK.say_it.called)

    @patch('__main__.isinstance', return_value=False)
    def test_not_call(self, MK):
        print(type(MK))
        MK.say_it.return_value = 'I am fake'
        v = i_call_hello_world(MK)
        print(v)
        self.assertFalse(MK.say_it.called)

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2012-06-21T21:09:55.847

不要使用`isinstance`，而是检查`say_it`方法是否存在。如果该方法存在，则调用它：

```
if hasattr(hw_obj, 'say_it'):
    print hw_obj.say_it() 
```

无论如何，这是一个更好的设计：依赖类型信息更加脆弱。

# c# - EventWaitHandle 没有在进程终止时关闭

> ID：11146729
> 
> 赞同：3
> 
> 时间：2012-06-21T21:04:01.727
> 
> 标签：c#, .net, events, windows-services, ipc

我有一个 C# 程序，它打开一个像这样的 EventWaitHandle 以由 Windows 服务触发。

```
EventWaitHandle sampleEventHandle = new EventWaitHandle(false, EventResetMode.AutoReset, "Global\\sampleEvent"); 
```

当程序现在被杀死（或由于意外错误而死亡）时，EventWaitHandle 不会被关闭，并且在重新启动程序时会发生以下错误：

> System.UnauthorizedAccessException：对路径的访问被拒绝。
> 在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
> 在 System.Threading.EventWaitHandle..ctor(Boolean initialState, EventResetMode mode, String name)

一分钟后，EventWaitHandle 将关闭，您可以重新启动应用程序。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:23:41.153

发生这种情况是因为服务在同一个对象上打开了一个句柄。这是意料之中的，毕竟您正在使用它来实现服务和程序之间的信令。在关闭最后一个句柄之前，物理底层 Windows 命名对象不会从全局命名空间中删除。

因此，获得一个异常可以为您提供真正的问题诊断，该服务使用了错误的句柄，并且在您重新启动程序时永远无法与您通信。很难猜一分钟后如何解决这个问题，我不得不假设该服务会定期调用 OpenExisting()。

解决方案很简单：它应该是创建等待句柄的*服务，并且您的 UI 程序应该调用 OpenExisting()。*该事件现在始终存在，至少只要服务还活着。如果没有，那么 OpenExisting() 会通过 WaitHandleCannotBeOpenedException 为您提供出色的诊断

# javascript - 工具提示是否有跨浏览器的方式？

> ID：11146734
> 
> 赞同：4
> 
> 时间：2012-06-21T21:04:32.980
> 
> 标签：javascript, jquery, cross-browser, tooltip, d3.js

我正在使用 d3.js 来渲染我的图表。出于某种原因，我不是 svg title 的忠实粉丝，因为它会导致延迟并且无法设置它们的样式。如果我错了，请纠正我。我最近遇到了，[醉](https://raw.github.com/bigmlcom/tipsy/master/src/javascripts/jquery.tipsy.js)了，但它似乎不兼容跨浏览器。

例如，考虑[这个](http://dl.dropbox.com/u/1531353/Misc/Docudocker/setups/tipsyCrashingApplication/force-html.html)。工具提示在 Firefox 和 Chrome 中运行良好，但即使在 IE 9 中也不会出现，我不确定发生了什么。除了使用属性之外，对于与 d3.js 兼容的工具提示，是否有更简洁的跨浏览器方法`svg title`？

**编辑**：我正在寻找适用于 d3.js 的东西。例如，使用tipsy，我们执行以下操作：

`$("svg circle").tipsy({});`

这适用于 Firefox 和 Chrome，但不适用于 IE。在使用 Twitter 的 Bootstrap 的工具提示插件时也观察到了类似的情况。这是我的[jsFiddle](http://jsfiddle.net/Legend/bZY9e/) *，没有*添加工具提示以启用快速测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T21:07:46.067

这可能是您正在寻找的。我没有在 IE9 中测试过它，但我想它可以工作。

[http://twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T21:06:28.127

[qTip](http://craigsworks.com/projects/qtip2/)是一个很好的跨平台工具提示插件。

JQueryUI 1.9 将很快[添加对工具提示的支持](http://wiki.jqueryui.com/w/page/12138112/Tooltip)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T21:10:57.500

JQuery Tooltip 是轻量级的并且具有很好的兼容性，我在使用它的项目中取得了很好的效果。

[http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)

# erlang - Erlang：如何实现 Erlang 列表理解？

> ID：11146737
> 
> 赞同：6
> 
> 时间：2012-06-21T21:04:35.767
> 
> 标签：erlang, list-comprehension

实现一个 Erlang 列表推导式，它从一个列表中获取两个元素并创建一个新的列表列表。

我有这个代码

```
pair([], Acc) -> lists:reverse(Acc);

pair(L, Acc0) -> 
    [ A, B | T ] = L,
    Acc = [ [A, B] | Acc0 ],
    pair(T, Acc). 
```

效果很好：

```
7> l:pair(lists:seq(1,6), []).  
[[1,2],[3,4],[5,6]] 
```

但似乎我应该能够将其实现为列表理解。我的二郎夫太弱了，想不出来。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T23:16:40.337

不，列表理解不是一个好方法，根据定义，它们一次只对一个元素起作用。在您的代码中确实不需要使用累加器，速度差异很小，[在这里](http://www.erlang.org/doc/efficiency_guide/myths.html#id61381)，没有它会变得更清晰。至少我是这么认为的。

```
pairs([A,B|L]) ->
    [[A,B]|pairs(L)];
pairs([]) -> []. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:26:26.967

列表推导会很笨拙，因为它不可避免地必须为列表的*每个*元素做一些事情。因此，要创建列表理解，您必须尝试找出您正在与之交谈的元素是偶数还是奇数。这是我在说什么的一个想法：

```
pair(L) ->
    L2 = lists:zip(lists:seq(1, length(L)), L),
    [[A, B] || {Ai, A} <- L2, {Bi, B} <- L2,
          Ai rem 2 == 1, Bi rem 2 == 0, Ai + 1 == Bi]. 
```

这个的时间复杂度可能很可怕，因为据我所知，Erlang 不会以任何方式优化它。

我认为您的功能没有任何问题，您应该坚持下去。

# codeigniter - 一个名为 site 的 codeigniter 控制器需要处理多个域

> ID：11146739
> 
> 赞同：1
> 
> 时间：2012-06-21T21:04:40.267
> 
> 标签：codeigniter, routes, multiple-domains

在处理不同子站点的 codeigniter 中有一个控制器。

*   `site/index/1`获取子站点 A 的内容

*   `site/index/2`获取子站点 B 的内容

现在我们决定为这些子站点注册域名。

所以我们需要：

```
http://www.subsite1.com  -> default controller should be site/index/1 
```

没有`site/index/1`URI 中的。

```
http://www.subsite2.com  -> default controller should be site/index/2 
```

没有`site/index/2`URI 中的。

我摆弄并试图玩，`routes.php`但无处可去..有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:12:02.930

在你的 routes.php 文件中你需要设置这个：

```
$route['default_controller'] = ($_SERVER['SERVER_NAME'] == 'http://www.subsite1.com' ? "site/index/1" : "site/index/2"); 
```

如果您在输入一些奇怪的 url 时试图在某个地方强制它：

```
$route['404_override'] = ($_SERVER['SERVER_NAME'] == 'http://www.subsite1.com' ? "site/index/1" : "site/index/2"); 
```

而对于第二个，只需将其切换为 2

# javascript - y轴反转时是否可以保持填充颜色？

> ID：11146741
> 
> 赞同：1
> 
> 时间：2012-06-21T21:04:51.840
> 
> 标签：javascript, highcharts

我有一个使用填充颜色/线性渐变的折线图。当我反转 y 轴时，填充会从直线向上移动到图表的顶部。我希望它保持从直线到 x 轴的填充。

例如：

[http://highcharts.com/stock/demo/yaxis-reversed](http://highcharts.com/stock/demo/yaxis-reversed)

请注意，当 Y 轴反转时，蓝色填充位于线条上方。即使我反转轴，我也希望它保持在线下方。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:30:33.597

[这](http://jsfiddle.net/wergeld/4tTWH/1/)是我的评论中解释的一个简单示例。我希望这有帮助。

这是重要的部分：

```
 chart: {
            renderTo: 'container',
            ...
            backgroundColor: {
                linearGradient: [0, 0, 0, 300],
                    stops: [
                        [0, 'rgb(69, 114, 167)'],
                        [1, 'rgba(2,0,0,0)']
                    ]
            },
        },
...
    plotOptions: {
                series: {
                    fillColor: 'white'
                }
            }, 
```

# f# - F# 项目中的 FsUnit、NUnit 引用

> ID：11146752
> 
> 赞同：3
> 
> 时间：2012-06-21T21:05:58.283
> 
> 标签：f#, nunit, visual-studio-2012, fsunit

我在 Visual Studio 2012 中有一个解决方案。它包括两个用于测试的项目，一个在 F# 中，一个在 C# 中。我已将 NUnit 和 FsUnit 安装为 Nuget 包。安装后，对这些程序集的引用指向在我的解决方案内的文件夹中`dll`找到的 ' 。`\packages\`编译解决方案后，F# 项目中的引用发生变化，并指向安装在我的`C:\Program Files (x86)\`文件夹和`\bin\Debug\FsUnit.NUnit.dll`我的 F# 项目中的 NUnit。在 C# 项目中，引用一直指向包文件夹。

该项目在 Visual Studio 中构建，测试运行良好。当我在 TeamCity 中构建它时，它失败了，因为它在 F# 项目中找不到 NUnit 和 FsUnit。

任何想法为什么我编译时参考会发生变化？

此外，与 C# 项目中的属性相比，为什么 F# 项目中引用的属性包含的信息要少得多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:46:43.370

`.fsproj`为了结束这个问题，并供将来参考，

```
<Reference Include="FsUnit.NUnit, Version=1.1.0.0, Culture=neutral, PublicKeyToken=null">
  <Private>True</Private>
</Reference>
<Reference Include="nunit.framework, Version=2.6.0.12051, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77">
  <Private>True</Private>
</Reference> 
```

`.csproj`按照布赖恩的建议，我用下面的替换了它们

```
<Reference Include="FsUnit.NUnit, Version=1.1.0.0, Culture=neutral, processorArchitecture=MSIL">
  <HintPath>..\packages\FsUnit.1.1.0.0\Lib\Net40\FsUnit.NUnit.dll</HintPath>
</Reference>
<Reference Include="nunit.framework, Version=2.6.0.12051, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77, processorArchitecture=MSIL">
  <HintPath>..\packages\NUnit.2.6.0.12054\lib\nunit.framework.dll</HintPath>
</Reference> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:39:34.210

这似乎是 NuGet 中的一个错误，仅影响 F# 项目，然后仅影响 VS 2012。您会注意到，如果您曾经使用 NuGet 升级到更新版本的 NUnit 或 FSUnit，您的 HintPaths 将再次被剥离`.fsproj`文件。

[http://nuget.codeplex.com/workitem/2149](http://nuget.codeplex.com/workitem/2149)

请为该问题投票，以便在 VS 2012 最终发布之前得到一些关注！

# mysql - 获取数据库中浏览次数最多的数据

> ID：11146760
> 
> 赞同：2
> 
> 时间：2012-06-21T21:06:31.667
> 
> 标签：mysql, sql, compare

我想从数据库中获取观看次数最多的照片，但我不知道如何实现这一点。这是我目前的SQL：

```
SELECT * FROM photos AS p, viewers AS v
WHERE p.id = v.id_photo
GROUP BY v.id_photo 
```

数据库：

```
CREATE TABLE IF NOT EXISTS `photos` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `photo_filename` varchar(50) NOT NULL,
  `photo_camera` varchar(150) NOT NULL,
  `photo_taken` datetime NOT NULL,
  `photo_resolution` varchar(10) NOT NULL,
  `photo_exposure` varchar(10) NOT NULL,
  `photo_iso` varchar(3) NOT NULL,
  `photo_fnumber` varchar(10) NOT NULL,
  `photo_focallength` varchar(10) NOT NULL,
  `post_coordinates` text NOT NULL,
  `post_description` text NOT NULL,
  `post_uploaded` datetime NOT NULL,
  `post_edited` datetime NOT NULL,
  `checkbox_approxcoor` enum('0','1') NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
)

CREATE TABLE IF NOT EXISTS `viewers` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `id_photo` int(10) DEFAULT '0',
  `ipaddress` text NOT NULL,
  `date_viewed` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) 
```

中的数据`viewers`如下所示：

```
(1, 85, '3892a0ab97d6ff325f285b27b847070f', '2012-06-21 22:49:25'),
(2, 84, '3892a0ab97d6ff325f285b27b847070f', '2012-06-21 22:49:25'),
(3, 85, '3892a0ab97d6ff325f285b27b847070f', '2012-06-21 22:49:25'); 
```

来自数据库的一行，用于`photos`了解这些行在此数据库中的外观：

```
(85, 'P1170986.JPG', 'Panasonic DMC-LX3', '2012-06-19 18:00:40', '3968x2232', '10/8000', '80', '50/10', '51/10', '', '', '2012-06-19 18:45:17', '0000-00-00 00:00:00', '0') 
```

目前 SQL 只打印 ID 为 84 的照片。在这种情况下，它是错误的 - 它应该打印出 ID 为 85 的照片。

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:11:53.893

你可能想用`order by count(*) desc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:20:54.007

观看次数最多的照片...有两种方法。

简单的一个：在照片表中添加一个作为计数器的字段，并在每次查看照片时更新该字段。

难点：这将允许您跟踪用户的浏览量。制作一个允许用户 ID、照片 ID 和计数器的新表。

每次用户查看一张新照片时，它都会与计数器一起放入其中。当他或她再次查看它时，增加计数器。

然后使用 group by 和 count(userid) 构建一个复杂的查询，有点像：

```
SELECT photoid , count(photoid) as howmuch FROM photostats WHERE 1 GROUP BY photoid ORDER BY howmuch DESC 
```

# vim - 关于删除尾随空格并保存的键绑定

> ID：11146763
> 
> 赞同：1
> 
> 时间：2012-06-21T21:06:41.697
> 
> 标签：vim

我的 .vimrc 中有这行：

```
map gu :%s/\s\+$//<enter> :w<enter> 
```

删除尾随空格并同时保存文件。

当文件中有尾随空格时，它可以正常工作（它会删除空格并保存文件），但是当没有尾随空格时，它不会保存文件，它只是说*Pattern not found: \s+$*。

注意：我找到[了这个](https://stackoverflow.com/questions/356126/how-can-you-automatically-remove-trailing-whitespace-in-vim)，但我很好奇我问的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T21:16:06.443

在搜索标志中添加一个`e`以抑制错误消息：

```
map gu :%s/\s\+$//e<enter> :w<enter> 
```

来自`:help substitute`：

```
[e]     When the search pattern fails, do not issue an error message and, in 
        particular, continue in maps as if no error occurred.  This is most 
        useful to prevent the "No match" error from breaking a mapping.  Vim 
        does not suppress the following error messages, however:  
            Regular expressions can't be delimited by letters
            \ should be followed by /, ? or &
            No previous substitute regular expression
            Trailing characters
            Interrupted 
```

# iphone - ios - 配置文件问题

> ID：11146766
> 
> 赞同：0
> 
> 时间：2012-06-21T21:06:55.100
> 
> 标签：iphone, ios, profile, ios-provisioning

我最近重新安装了我的 mac 以进行良好的春季清洁，并使用 Super Duper 进行了完整的备份:-)

现在，在我重新安装 Apple 的服务器的那天，签名证书有问题，我不知道并认为我把事情搞砸了。所以我从我的帐户中删除了所有这些，并想重新开始。

我已经下载了它们，但显然它们不再在我的帐户中了。

现在我在应用商店中更新了一个应用，无论我尝试什么，我都无法签署该应用以使其准备好上传。**我是否已经完全填满了这个，我需要在 iTunes Connect 中制作一个新应用程序吗？**

PS我不相信这个问题在保密协议下 - 如果我很乐意删除它，我也在苹果论坛上发布了这个，但我似乎在这里得到更快的答案:-)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:59:00.103

无论您做什么，都不要制作新的应用程序。这只是一个配置文件和签名证书问题。只需再次完成所有设置的过程。然后确保您的项目知道使用新的，并且没有在 Git 或您使用的任何源代码控制中引用旧的。

# c - 我怎样才能在c中打印f

> ID：11146770
> 
> 赞同：0
> 
> 时间：2012-06-21T21:07:10.030
> 
> 标签：c, printf

如何在不使用两个 printf 调用的情况下正确打印？

```
char* second = "Second%d";
printf("First%d"second,1,2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:18:29.010

您向我们展示的代码在语法上无效，但我认为您想做的事情与以下效果相同：

```
printf("First%dSecond%d", 1, 2); 
```

如您所知，第一个参数`printf`是格式字符串。它不必是文字；你可以以任何你喜欢的方式构建它。

这是一个例子：

```
#include <stdio.h>
#include <string.h>
int main(void)
{
    char *second = "Second%d";
    char format[100];
    strcpy(format, "First%d");
    strcat(format, second);

    printf(format, 1, 2);

    putchar('\n');
    return 0;
} 
```

一些注意事项：

我在输出后添加了一个换行符。输出文本应该（几乎）总是以换行符结束。

我为格式字符串设置了 100 字节的任意大小。更一般地说，您可以声明

```
char *format; 
```

并通过调用来初始化它`malloc()`，分配你实际需要的大小（并通过返回一个空指针来检查它是否表示`malloc()`失败）；然后你想`free(format);`在你完成后打电话。

正如 templatetypedef 在评论中所说，如果格式字符串来自不受控制的来源，这种事情可能会很危险。

（或者您可以只调用`printf`两次；它并不比调用一次贵多少。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:12:40.400

```
char *second = "Second%d";
char tmp[256];
memset(tmp, 0, 256);
sprintf(tmp, second, 2);
printf("First%d%s", 1,tmp); 
```

或类似的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:21:18.773

使用预处理器连接两个字符串。

```
#define second "Second%d"
printf("First%d"second,1,2); 
```

[不要在*实际*程序中这样做。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T21:36:43.490

```
char *second = "Second %d";
char *first = "First %d";
char largebuffer[256];

strcpy (largebuffer, first);
strcat (largebuffer, second);
printf (largebuffer, 1, 2); 
```

使用生成格式（如上述方法）的问题在于 printf() 函数，因为它是一个可变长度参数列表，无法知道提供的参数数量。它所做的是使用提供的格式字符串并使用格式字符串中描述的类型，然后它将从参数列表中选择该数量和类型的参数。

如果您提供正确数量的参数，例如上面的示例，其中有两种 %d 格式，并且提供了两个整数以在这些位置打印，那么一切都很好。但是，如果您执行以下操作怎么办：

```
char *second = "Second %s";
char *first = "First %d";
char largebuffer[256];

strcpy (largebuffer, first);
strcat (largebuffer, second);
printf (largebuffer, 1); 
```

在此示例中， printf() 函数需要格式字符串以及可变数量的参数。格式字符串表示将有两个附加参数，一个整数和一个以零结尾的字符串。然而，只提供了一个附加参数，因此 printf() 函数将只使用堆栈中的下一个作为指向零终止字符串的指针。

如果幸运的话，printf() 函数解释为指针的数据将是您的应用程序的有效内存地址，指向的内存区域将是一对以零结尾的字符。如果您不太幸运，则指针将为零或垃圾，您将立即遇到访问冲突，并且很容易找到应用程序崩溃的原因。如果你一点运气都没有，指针会足够好，它会指向一个大约 2K 字符的有效地址，结果是 printf() 将完全弄乱你的堆栈并进入杂草并导致崩溃数据将毫无用处。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-21T21:27:55.177

我假设你想要输出：

`First 1 Second 2`

为此，我们需要`printf`更好地理解 's 的功能。如此有用的真正原因`printf`是它不仅可以打印字符串，还可以为您格式化变量。根据您希望变量格式化的方式，您需要使用不同的格式化字符。`%d`告诉`printf`将变量格式化为您已经知道的有符号整数。但是，还有其他格式，例如`%f`浮点数和双精度数、`%l%`长整数、`%s`字符串或`char*`.

使用`%s`格式化字符打印`char*`变量`second`，我们的代码如下所示：

```
char* second = "Second";
printf ( " First %d %s %d ", 1, second, 2 ); 
```

这告诉`printf`您希望将第一个变量格式化为整数，将第二个变量格式化为字符串，将第三个变量格式化为另一个整数。

# firefox - DIV 在 FF + Opera 中无法识别，在 IE + Chrome 中有效

> ID：11146772
> 
> 赞同：0
> 
> 时间：2012-06-21T21:07:21.357
> 
> 标签：firefox, html, css-float, opera, widget

在过去的几天里，我一直在努力克服这个问题，因为我现在只想让这个网站首先启动。上周左右我一直在开发这个，我一直在使用我特别喜欢的浏览器，谷歌浏览器。是的，大错特错！

无论如何，这里是演示站点，它显示了我想要的所有东西的外观（对一些不合适的东西表示歉意，还没有完成！）：[http ://www.weburton.co.uk/content /演示/](http://www.weburton.co.uk/content/demo/)

你看到社交区域了吗？它在 Chrome 中正确显示；正是我想要的。在 IE 中它显示 div 区域，但存在一些样式问题，例如 Twitter 端的文本。

但是，在其他浏览器中似乎完全忽略了 div 区域；这是一个奇怪的问题，我承认。我将它们封装在一个具有背景图像（selenasocial）的 div 中，然后让其他 div 浮动。这是代码（CSS）：

```
#selenasocial {
background: url(images/wls/social-bg.jpg) no-repeat top center;
    display: inherit;
width: 100%;
min-height: 263px;
z-index: 555;
border: none; 
    overflow:auto;}

.selenasocial {
background: url(images/wls/social-bg.jpg) no-repeat top center;
    display: inherit;
width: 100%;
min-height: 263px;
    z-index: 255;
border: none; 
    overflow:auto;}

.selenasocial img {
border: none;}

.twitsocial {
float: left;
width: 480px;
padding-top: 10px;
text-align: center;
border: none;}

.facesocial {
float: left;
width: 480px;
padding-top: 10px;
text-align: center;
border: none;} 
```

这是 HTML，我正在使用小部件（是的，它们在 functions.php 中的样式正确）：

```
<!-- Selena Gomez Social Networks -->

<div class="selenasocial">

<?php if ( !function_exists('dynamic_sidebar') || !dynamic_sidebar("Social Sidebar") ) : ?> <?php   endif;?>
<?php if ( !function_exists('dynamic_sidebar') || !dynamic_sidebar("Social Sidebar 2") ) : ?> <?php   endif;?>
</div> 
```

通过将上面的 CSS 复制到单独的 IE.css 文件中，我克服了 IE 中的错误（因为它也发生在那里）。我只是不明白为什么两个领先于 IE 的浏览器没有从主 CSS 文件中读取。

任何帮助将不胜感激 - 在过去的几天里，我一直在为此烦恼。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:35:48.893

您的代码（技术上）没有任何问题 - 您发布的部分。您将两个浮动属性都设置为左侧，我猜这不是您想要的，但这并不能解释为什么其他属性被忽略。

我不会阅读您的 4700 行 CSS 文件来找出其中的问题，但我会尽力帮助您自己解决。

我做的第一件事是尝试寻找你用 firebug 发布的 CSS 代码，令我惊讶的是，它不存在。CSS firefug 给我的最后一行是第 902 行，它是这样的：

```
 .clearfix {
        zoom: 1;
    } 
```

实际上，萤火虫没有显示缩放的东西（括号是空的）。所以我直接去 CSS 文件查找它，在想知道为什么有人会使用这种非标准化属性之后，我检查了下一行，发现第 907 行有一个括号而不是括号。

发现此类错误后，我继续在您的 CSS 文件上运行[CSS 验证器](http://jigsaw.w3.org/css-validator/)，结果不是很好。修复这些错误，Firefox 将正确绘制。

确定 IE 和 Chrome 解释错误 CSS 文件的能力究竟是好是坏，这里不讨论，但学习如何查找和纠正错误可以帮助您在更严格的浏览器上工作。

# twitter-bootstrap - 导航栏高度变化

> ID：11146773
> 
> 赞同：0
> 
> 时间：2012-06-21T21:07:25.057
> 
> 标签：twitter-bootstrap, navbar

在 Bootstrap 的启动示例中，当我缩小浏览器的宽度时，导航栏突然变高（因为菜单选项进入下拉按钮）。有没有办法控制这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:28:31.517

Bootstrap 通过 CSS 媒体查询处理浏览器宽度变化。例如，您可以通过为导航栏创建自己的 CSS 并将其包含在引导程序之后来覆盖它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T17:17:52.083

我确实遇到了这个问题，经过一番研究，我找到了解决方案。

![比较](../Images/81cbc32d7964746a4fc06c6f0b72173b.png)

将“填充：”下方更改为 0px：

```
navbar-fixed-top .navbar-inner,  .navbar-fixed-bottom .navbar-inner {
padding: 0px;} 
```

将解决问题。我想更改也可以在 LESS 文件中完成并重新编译 css，但我将更改放在“main.css”文件中。

# asp.net - 属性设置不正确

> ID：11146781
> 
> 赞同：1
> 
> 时间：2012-06-21T21:07:56.943
> 
> 标签：asp.net, properties

我有一个奇怪的问题。我使用了很多会话变量，因此我不必在每次页面进行回发时都来回传递它们。我多年来一直这样做，所以我完全不知所措。

我在 App_Code 文件夹中有一个名为 SessionHandler.vb 的文件，其中包含以下代码：

```
Imports Microsoft.VisualBasic

Public Class SessionHandler

    Private Shared _chgLinePkNum As String = "0"
    Private Shared _chgStudentIDPk As String = "0"

    Public Shared Property chgLinePkNum() As String
        Get
            ' Check for null first
            If (HttpContext.Current.Session(SessionHandler._chgLinePkNum) Is Nothing) Then
                ' Return an empty string if session variable is null.
                Return "Nothing"
            Else
                Return HttpContext.Current.Session(SessionHandler._chgLinePkNum).ToString()
            End If
        End Get

        Set(ByVal value As String)
            If (value Is Nothing) Or (value = "") Then
                HttpContext.Current.Session(SessionHandler._chgLinePkNum) = "Nothing"
            Else
                HttpContext.Current.Session(SessionHandler._chgLinePkNum) = value
            End If
        End Set
    End Property

    Public Shared Property chgStudentIDPk() As String
        Get
            ' Check for null first
            If (HttpContext.Current.Session(SessionHandler._chgStudentIDPk) Is Nothing) Then
                ' Return an empty string if session variable is null.
                Return "Nothing"
            Else
                Return HttpContext.Current.Session(SessionHandler._chgStudentIDPk).ToString()
            End If
        End Get

        Set(ByVal value As String)
            If (value Is Nothing) Or (value = "") Then
                HttpContext.Current.Session(SessionHandler._chgStudentIDPk) = "Nothing"
            Else
                HttpContext.Current.Session(SessionHandler._chgStudentIDPk) = value
            End If
        End Set
    End Property 
```

很简单......然后，在我的代码中，我引用了 SessionHandler.chgLinePkNum 的属性。此代码块具有 LineItemNumber = 1 和 StudentID = [实际 ID 号]。

```
 If IsParking And checkbox.Checked = True Then
        SessionHandler.chgLinePkNum = LineItemNumber
        SessionHandler.chgStudentIDPk = StudentID
        peParkingRegistration.Show()
    End If 
```

当第一行运行时，chgLinePkNum 按预期设置为 1。出于某种奇怪的原因，它还将 chgStudentIDPk 设置为 1。当下一行运行时，它将 chgStudentIDPk 设置为正确的 StudentID 号。问题是，它还将 chgLinePkNum 设置为 StudentID 号。

我已经在调试器中逐行运行它，并且每个属性集函数仅在调用时运行。我只是无法弄清楚“HttpContext.Current.Session(SessionHandler._chgLinePkNum) = value”如何设置 chgStudentIDPk 的值，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:13:05.607

与这些具有完全相同的值有什么关系？

```
Private Shared _chgLinePkNum As String = "0"
Private Shared _chgStudentIDPk As String = "0" 
```

# java - Android - 在 TableRow 上设置固定高度似乎不起作用

> ID：11146783
> 
> 赞同：0
> 
> 时间：2012-06-21T21:08:15.600
> 
> 标签：java, android, android-layout

我正在尝试通过绘制一个具有可变行高的表格来制作某种电视节目表，以表示节目持续时间。问题是行高不受影响。所有行都有子项的高度。一些忠告？

代码：

```
for(int i=0;(i+1)<DownloadInfo.nextTitle.size();i++){

  // Create row
  tableRw = new TableRow(currentContext);
  tableRw.setPadding(0, 0, 0, Math.round(5*dpScale+0.5f));
  nx_table.addView(tableRw);

  // Create and add time label
  tableTv = new TextView(currentContext);
  tableTv.setPadding(0, 0, Math.round(5*dpScale+0.5f), 0);
  tableTv.setText(outFormater.format(DownloadInfo.nextTime.get(i)));
  tableTv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.MATCH_PARENT));
  tableRw.addView(tableTv);

  // Create and add title label
  tableTv = new TextView(currentContext);
  tableTv.setText(DownloadInfo.nextTitle.get(i));
  tableTv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.MATCH_PARENT));
  tableRw.addView(tableTv);

  // Modify row height
  long timeDifference = (DownloadInfo.nextTime.get(i+1).getTime()-DownloadInfo.nextTime.get(i).getTime())/200000;
  tableRw.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,tableRw.getChildAt(0).getHeight()+Math.round((timeDifference)*dpScale+0.5f)));
  Log.d("RPod_MainActivity","Height of row"+i+": "+tableRw.getChildAt(0).getHeight()+Math.round((timeDifference)*dpScale+0.5f));
} 
```

这里是 Logcat 输出：

```
06-21 23:02:12.675: DEBUG/RPod_MainActivity(27189): Height of row0: 032
06-21 23:02:12.679: DEBUG/RPod_MainActivity(27189): Height of row1: 029
06-21 23:02:12.679: DEBUG/RPod_MainActivity(27189): Height of row2: 043
06-21 23:02:12.683: DEBUG/RPod_MainActivity(27189): Height of row3: 038
06-21 23:02:12.687: DEBUG/RPod_MainActivity(27189): Height of row4: 025
06-21 23:02:12.691: DEBUG/RPod_MainActivity(27189): Height of row5: 022
06-21 23:02:12.691: DEBUG/RPod_MainActivity(27189): Height of row6: 044
06-21 23:02:12.695: DEBUG/RPod_MainActivity(27189): Height of row7: 034
06-21 23:02:12.695: DEBUG/RPod_MainActivity(27189): Height of row8: 040
06-21 23:02:12.699: DEBUG/RPod_MainActivity(27189): Height of row9: 013
06-21 23:02:12.699: DEBUG/RPod_MainActivity(27189): Height of row10: 067
06-21 23:02:12.703: DEBUG/RPod_MainActivity(27189): Height of row11: 059
06-21 23:02:12.703: DEBUG/RPod_MainActivity(27189): Height of row12: 05
06-21 23:02:12.707: DEBUG/RPod_MainActivity(27189): Height of row13: 017
06-21 23:02:12.707: DEBUG/RPod_MainActivity(27189): Height of row14: 032
06-21 23:02:12.710: DEBUG/RPod_MainActivity(27189): Height of row15: 04
06-21 23:02:12.714: DEBUG/RPod_MainActivity(27189): Height of row16: 02
06-21 23:02:12.714: DEBUG/RPod_MainActivity(27189): Height of row17: 040
06-21 23:02:12.718: DEBUG/RPod_MainActivity(27189): Height of row18: 049
06-21 23:02:12.718: DEBUG/RPod_MainActivity(27189): Height of row19: 052
06-21 23:02:12.722: DEBUG/RPod_MainActivity(27189): Height of row20: 04
06-21 23:02:12.722: DEBUG/RPod_MainActivity(27189): Height of row21: 041
06-21 23:02:12.722: DEBUG/RPod_MainActivity(27189): Height of row22: 032
06-21 23:02:12.726: DEBUG/RPod_MainActivity(27189): Height of row23: 016
06-21 23:02:12.730: DEBUG/RPod_MainActivity(27189): Height of row24: 07
06-21 23:02:12.730: DEBUG/RPod_MainActivity(27189): Height of row25: 026
06-21 23:02:12.730: DEBUG/RPod_MainActivity(27189): Height of row26: 050
06-21 23:02:12.734: DEBUG/RPod_MainActivity(27189): Height of row27: 032 
```

所以，我认为差异应该是可见的。但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:28:23.810

您是否尝试`nx_table.addView(tableRw, new LayoutParams(LayoutParams.MATCH_PARENT,tableRw.getChildAt(0).getHeight()+Math.round((timeDifference)*dpScale+0.5f)));` 或使用过这个：[ViewGroup.addView(view,w,h)](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20int%29)

# c# - 为什么编译器会添加不必要的局部变量

> ID：11146788
> 
> 赞同：9
> 
> 时间：2012-06-21T21:08:43.200
> 
> 标签：c#, compiler-construction, cil

这个 C# 代码：

```
private void LoadAssignments(AssignmentType assignmentType, Collection<Assignment> assignments)
    {
        bool flag;
        DataTable lessons = this.GetResults(assignmentType);
        try
        {
            IEnumerator enumerator = lessons.Rows.GetEnumerator();
            try
            {
                while (true)
                {
                    flag = enumerator.MoveNext();
                    if (!flag)
                    {
                        break;
                    }
                    DataRow row = (DataRow)enumerator.Current;
                }
            }
            finally
            {
                IDisposable disposable = enumerator as IDisposable;
                flag = disposable == null;
                if (!flag)
                {
                    disposable.Dispose();
                }
            }
        }
        finally
        {
            flag = lessons == null;
            if (!flag)
            {
                lessons.Dispose();
            }
        }
    } 
```

生成此 CIL (.NET 4)

```
 .method private hidebysig 
    instance void LoadAssignments (
        valuetype TTReporterCore.AssignmentType assignmentType,
        class [mscorlib]System.Collections.ObjectModel.Collection`1<valuetype TTReporterCore.Assignment> assignments
    ) cil managed 
{
    .locals init (
        [0] bool flag,
        [1] class [System.Data]System.Data.DataTable lessons,
        [2] class [mscorlib]System.Collections.IEnumerator enumerator,
        [3] class [System.Data]System.Data.DataRow row,
        [4] class [mscorlib]System.IDisposable disposable,
        [5] bool flag1
    )

    IL_0000: nop
    IL_0001: ldarg.0
    IL_0002: ldarg.1
    IL_0003: call instance class [System.Data]System.Data.DataTable TTReporterCore.TTReader::GetResults(valuetype TTReporterCore.AssignmentType)
    IL_0008: stloc.1
    .try
    {
        IL_0009: nop
        IL_000a: ldloc.1
        IL_000b: callvirt instance class [System.Data]System.Data.DataRowCollection [System.Data]System.Data.DataTable::get_Rows()
        IL_0010: callvirt instance class [mscorlib]System.Collections.IEnumerator [System.Data]System.Data.InternalDataCollectionBase::GetEnumerator()
        IL_0015: stloc.2
        .try
        {
            IL_0016: nop
            IL_0017: br.s IL_0038
            .loop
            {
                IL_0019: nop
                IL_001a: ldloc.2
                IL_001b: callvirt instance bool [mscorlib]System.Collections.IEnumerator::MoveNext()
                IL_0020: stloc.0
                IL_0021: ldloc.0
                IL_0022: stloc.s flag1
                IL_0024: ldloc.s flag1
                IL_0026: brtrue.s IL_002b

                IL_0028: nop
                IL_0029: br.s IL_003d

                IL_002b: ldloc.2
                IL_002c: callvirt instance object [mscorlib]System.Collections.IEnumerator::get_Current()
                IL_0031: castclass [System.Data]System.Data.DataRow
                IL_0036: stloc.3
                IL_0037: nop

                IL_0038: ldc.i4.1
                IL_0039: stloc.s flag1
                IL_003b: br.s IL_0019
            }

            IL_003d: nop
            IL_003e: leave.s IL_0062
        }
        finally
        {
            IL_0040: nop
            IL_0041: ldloc.2
            IL_0042: isinst [mscorlib]System.IDisposable
            IL_0047: stloc.s disposable
            IL_0049: ldloc.s disposable
            IL_004b: ldnull
            IL_004c: ceq
            IL_004e: stloc.0
            IL_004f: ldloc.0
            IL_0050: stloc.s flag1
            IL_0052: ldloc.s flag1
            IL_0054: brtrue.s IL_0060

            IL_0056: nop
            IL_0057: ldloc.s disposable
            IL_0059: callvirt instance void [mscorlib]System.IDisposable::Dispose()
            IL_005e: nop
            IL_005f: nop

            IL_0060: nop
            IL_0061: endfinally
        }

        IL_0062: nop
        IL_0063: nop
        IL_0064: leave.s IL_007e
    }
    finally
    {
        IL_0066: nop
        IL_0067: ldloc.1
        IL_0068: ldnull
        IL_0069: ceq
        IL_006b: stloc.0
        IL_006c: ldloc.0
        IL_006d: stloc.s flag1
        IL_006f: ldloc.s flag1
        IL_0071: brtrue.s IL_007c

        IL_0073: nop
        IL_0074: ldloc.1
        IL_0075: callvirt instance void [System]System.ComponentModel.MarshalByValueComponent::Dispose()
        IL_007a: nop
        IL_007b: nop

        IL_007c: nop
        IL_007d: endfinally
    }

    IL_007e: nop
    IL_007f: ret
} 
```

为什么MSIL添加flag1，继续执行相同的逻辑设置flag，设置flag1为flag，最后检查！flag1。这对我来说似乎是编译器效率低下。

更新：我使用的是 Telerik 的 JustDecompile，虽然结果与 ILDASM 完全不同，但额外的布尔值仍然在调试模式下创建。

另外，我通过完全删除布尔值修改了代码，调试版本仍然添加了一个布尔值。我真的在寻找编译器为什么这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:52:34.607

似乎创建了一个临时本地来保存比较结果（即一次性 == null）。

试试这个例子：

```
class Program
{
   static void Main()
   {
       if (1 == 1) return;
   }
} 
```

..正在我的机器上生成以下 IL（Microsoft (R) Visual C# 2010 Compiler 版本 4.0.30319.1）：

```
.method private hidebysig static void  Main() cil managed
{
  .entrypoint
  .maxstack  1
  .locals init (bool V_0)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.0
  IL_0003:  br.s       IL_0005
  IL_0005:  ret
} 
```

本地 V_0 被创建，即使它实际上没有被使用。我相信即使对于“非”优化编译，这也是一个明显的优化:) ..或者更有可能：生成所有必要的代码以启用调试。我不知道如何在调试会话中使用它，但这是我最好的猜测。

当编译**优化**（即发布配置）时，我看不到额外的本地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:36:31.990

当我写一个类似的程序时，额外的变量并没有出现在发布模式下。同样在汇编视图中，调试显示设置了额外的变量（[ebp-44h]），而 release 没有：

**调试：**

![在此处输入图像描述](../Images/cc4436222d6f066aa0d0ddfcdd23b57d.png)

**释放：**

![在此处输入图像描述](../Images/c2ba50db851ec7d701096617c8d63b1f.png)

# objective-c - 使用 NSWindow windowNumbersWithOptions 进行简单的 Objective-C 代码段错误

> ID：11146789
> 
> 赞同：0
> 
> 时间：2012-06-21T21:08:55.460
> 
> 标签：objective-c, segmentation-fault, exc-bad-access

```
#import <Foundation/Foundation.h>
#import <AppKit/AppKit.h>

int main(int argc, const char * argv[])
{     
@autoreleasepool {

    NSArray* windowList = [[NSArray alloc] init];

    windowList = [NSWindow windowNumbersWithOptions:0];
    NSLog(@"%lu", [windowList count]);
}
return 0;
} 
```

调用 NSWindow windowNumbersWithOptions 时出现段错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:13:39.813

文档`windowNumbersWithOptions`说，对于选项值，

> 如果改为传递值 0，则从该方法返回的列表包含属于调用应用程序的活动空间上的可见窗口的窗口编号。

可能是您`windowList`的`NULL`，因为您的应用程序没有创建一个？

# java - struts 2.0 迭代器标签 prbm

> ID：11146791
> 
> 赞同：0
> 
> 时间：2012-06-21T21:09:02.310
> 
> 标签：java, struts2, struts

我有一个 jsp 和一个 struts 2.0 动作类。我在我的动作类中设置了一个列表，我将在我的 jsp 中使用它。

模型类是：

```
public class Student {
    int stdid;
    String stdName;
    String stdroll;
    Address stdAddress;
}

public class Address {
    String houseNo;
    String street;
    String area;
    String state;
    String country;
    String pin;

}

public class IteratorKFCAction extends ActionSupport{

    private List<Student> studentList;

    public List<Student> getStudentList() {
        return studentList;
    }

    public void setStudentList(List<Student> studentList) {
        this.studentList = studentList;
    }

    public String execute() {

        studentList = new ArrayList<Student>();
        studentList.add(std1);
        studentList.add(std4);
        studentList.add(std3);
        studentList.add(std2);
        return SUCCESS;
    }
} 
```

现在，在我的 jsp 上，我想显示每个学生的地址。我想用特定的密码显示学生的地址。有人能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:39:03.227

你能展示你到目前为止所做的尝试以及你得到的结果吗？这些结果与您正在寻找的结果有何不同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:31:48.847

您可以尝试使用 struts 标签来迭代 JSP 中的列表。

将 struts 标签库导入 JSP 文件。

```
<%@taglib uri="/struts-tags" prefix="s"%> 
```

现在迭代请求范围内可用的列表。

```
<s:iterator value="#studentList" var="student">
   <label><s:property value="%{#student.stdAddress.houseNo}"/></label><br>
   <label><s:property value="%{#student.stdAddress.street}"/></label><br>
   <label><s:property value="%{#student.stdAddress.area}"/></label><br>
   <label><s:property value="%{#student.stdAddress.country}"/></label><br>
   <label><s:property value="%{#student.stdAddress.pin}"/></label><br>
</s:iterator> 
```

还要确保学生和地址类中的字段具有匹配的 getter/setter 方法。

# javascript - AngularJS，如何使 UI 依赖于哪个字段具有焦点？

> ID：11146792
> 
> 赞同：9
> 
> 时间：2012-06-21T21:09:02.543
> 
> 标签：javascript, html, angularjs

我有一个带有多个表单输入的 AngularJS 页面。

当某些输入具有焦点时，我想更改页面的其他任意方面。

例如，当用户在“股票代码”输入时，我想显示热门股票代码列表。当他们在“数量”字段中时，我想显示库存数量和交货时间。

是否有一个包含“当前”输入的变量（具有焦点的输入），或者我是否需要恢复到 jQuery 的 onFocus。（现在看起来有点原始。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T23:28:22.633

做个指令怎么样？您可以在用户离开/进入输入时设置一个变量，并检测到：http: [//jsfiddle.net/TZnj2/](http://jsfiddle.net/TZnj2/)

如果您对正在发生的事情感到困惑，请务必阅读指令指南：http: [//docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

我也在该指令中使用了 scope.$apply ，这是对它的作用的解释：[http ://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-28T04:55:47.123

[ngFocus](https://docs.angularjs.org/api/ng/directive/ngFocus)和[ngBlur](https://docs.angularjs.org/api/ng/directive/ngBlur)是内置指令：

```
<input ng-focus="hasFocus = true" ng-blur="hasFocus = false" type="text">
<p ng-show="hasFocus">The field has focus!!</p> 
```

[在 jsfiddle 上尝试演示](http://jsfiddle.net/sqren/os4dr5dp/1/)

# javascript - HTML/Javascript - 定位不一致

> ID：11146795
> 
> 赞同：1
> 
> 时间：2012-06-21T21:09:13.583
> 
> 标签：javascript, html, css

我正在设计这个网站[http://www.parisgaa.org/parisgaels](http://www.parisgaa.org/parisgaels)并且遇到了问题。

主页上的图像滑块有时会混乱。大多数时候它可以工作并且看起来很好，但其他时候它的位置似乎被弄乱了，它出现在应该在它下面的内容之下（即，该内容与图像重叠）。您应该能够在 Chrome 中复制它 - 只需刷新几次。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:36:27.897

看起来这可能是您用于图像滑块的任何 jQuery 插件的问题。由于某种原因，元素的高度`.bx-window`没有被正确评估（对我来说，它在 20-30 像素而不是 420 像素的范围内）。我会尝试一个不同的滑块（那里有大量的 jQuery 图像滑块，只需 google 一下），但如果这不是一个选项，那么在他们的代码中自己修复它可能相当简单。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:11:50.980

尝试使图像滑块位置相对：

```
style = "position:relative;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:33:20.127

您将不得不在滑块文件中编辑一行

```
js/slider.js

.wrap('<div class="bx-window" style="width:'+childrenMaxWidth+'px; height:'+wrapperHeight+'px; position:relative; overflow:hidden;"></div>')
            .css({
              height: '999999px',
              position: 'relative',
                top: '-'+(origTop)+'px'
            }); 
```

在他的范围内，您需要定义一个适用于您的图像的高度，例如

```
.wrap('<div class="bx-window" style="width:'+childrenMaxWidth+'px; height:400px; position:relative; overflow:hidden;"></div>')
            .css({
              height: '999999px',
              position: 'relative',
                top: '-'+(origTop)+'px'
            }); 
```

问题不在于您的实现，而在于您正在使用的脚本。您可以尝试使用不同的脚本，但希望此调整对您有用！

# javascript - $.ajax、$.post 或 $.get 不起作用，无法使用响应

> ID：11146801
> 
> 赞同：-4
> 
> 时间：2012-06-21T21:09:35.233
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [返回 AJAX 回调返回](https://stackoverflow.com/questions/9041321/return-ajax-callback-return)

我已经使用 AJAX 制作了一个 JQuery 代码，但尽管我付出了所有努力（尝试*和*`$.post`） ，但我无法得到任何响应，也无法在我的代码中使用它。示例代码：`$.get` *`$.ajax`*

 *```
var r = $.post("ajaxpage.php", function(data) {return data});
console.log(r); // nothing 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:09:36.950

初学者程序员对 Javascript 和 AJAX 最常见的误解之一是将 AJAX 请求视为“正常”函数，进行变量赋值或期望在其代码中立即使用 AJAX 响应。

但这不是它的工作方式。让我们尝试了解正确的实现是如何工作的。

**AJAX**代表 *异步 JavaScript 和 XML*。

我们将暂时忽略 XML 部分（更多关于请求是如何进行的， via `XMLHttpObject`），Javascript 部分非常明显（它是我们使用的脚本语言，有或没有 JQuery），让我们关注**异步**。

> 以这种方式思考 AJAX：它大致就像您在工作时向同事发送工作电子邮件并提供一些信息；并要求采取行动和/或其他信息作为回报；无论您的朋友是否立即回答，您仍然必须继续工作，因为回答可能会延迟（您的朋友今天可能特别忙）。当您的朋友回答相关信息时，*您*才会解决问题并采取适当的措施。如果要求采取行动，您的同事只有在收到您的电子邮件时才会继续执行。

AJAX 以类似的方式工作：从*客户端*，您向*服务器端页面**发出请求*，并期待一个*操作*（例如在数据库中写入一行）或*响应*（从您的页面获取服务器端的一些数据）正在打电话。

 ***重要的是，**无论往返是否完成，您的 JavaScript 代码都会继续执行**，因为当您的客户端（请记住 JS 在客户端运行）对服务器进行 AJAX 调用（服务器速度慢、连接速度慢等）。

所以你不能指望做这样的事情：

```
var r = $.post("ajaxpage.php", function(data) {return data}); 
```

因为`$.post`实际上并没有像“常规”函数那样“返回”一个值，所以该变量`r`不能被 $.post 赋值

相反，您应该根据`done`事件组织代码，该事件在 AJAX 调用完成后触发：它**保证**（如果没有失败，如服务器端错误、未找到页面等）我们实际上有一个成功时在您的代码中使用的响应。通过该事件，我们可以调用一个函数，该函数将响应作为参数接收并实际使用它。

```
$.post("ajaxpage.php").done(useMyResponse);
// rest of the code

function useMyResponse(response)
{
    // do fancy things with the response like:
    console.log(response); // works!
    // or maybe
    $("#someElement").html(response);
} 
```

对此的简写是：

```
$.post("ajaxpage.php",function (response) { 
     // use response
     console.log(response);
}); 
```

*编辑：*我不是以英语为母语的人，请原谅我的错误。****

# windows - 精湛的 lnk2019 glew

> ID：11146807
> 
> 赞同：1
> 
> 时间：2012-06-21T21:10:00.840
> 
> 标签：windows, opengl, glew

我正在使用 Superbible 第 5 版，我已经遇到了第一个程序的问题。通过添加 Windows.h 并删除 #define FREEGLUT_STATIC 行，我已经能够解决很多问题，但是我无法克服我现在遇到的链接器错误。

```
#include <Windows.h>
#include <GLTools.h>
#include <GLShaderManager.h>

#include <gl\glew.h>
#include <gl\glut.h>

GLBatch triangleBatch;
GLShaderManager shaderManager;

void ChangeSize(int w, int h)
{
glViewport(0, 0, w, h);
}

void SetupRC()
{
glClearColor(0.0f, 0.0f, 1.0f, 1.0f);

shaderManager.InitializeStockShaders();

GLfloat vVerts[] = 
{ 
    -0.5f, 0.0f, 0.0f,
    0.5f, 0.0f, 0.0f,
    0.0f, 0.5f, 0.0f
};

triangleBatch.Begin(GL_TRIANGLES, 3);
triangleBatch.CopyVertexData3f(vVerts);
triangleBatch.End();
}

 void RenderScene(void)
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

GLfloat vRed[] = { 1.0f, 0.0f, 0.0f, 1.0f };
shaderManager.UseStockShader(GLT_SHADER_IDENTITY, vRed);
triangleBatch.Draw();

glutSwapBuffers();
}

int main(int argc, char* argv[])
{
gltSetWorkingDirectory(argv[0]);

glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH | GLUT_STENCIL);
glutInitWindowSize(800, 600);
glutCreateWindow("Triangle");
glutReshapeFunc(ChangeSize);
glutDisplayFunc(RenderScene);

GLenum err = glewInit();
if(GLEW_OK != err)
{
    fprintf(stderr, "GLEW Error: %s\n", glewGetErrorString(err));
    return 1;
}

SetupRC();

glutMainLoop();
return 0;
} 
```

这些是我得到的错误：

```
1>triangle test.obj : error LNK2019: unresolved external symbol "public: void __thiscall GLBatch::End(void)" (?End@GLBatch@@QAEXXZ) referenced in function "void __cdecl SetupRC(void)" (?SetupRC@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: void __thiscall GLBatch::Begin(unsigned int,unsigned int,unsigned int)" (?Begin@GLBatch@@QAEXIII@Z) referenced in function "void __cdecl SetupRC(void)" (?SetupRC@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: bool __thiscall GLShaderManager::InitializeStockShaders(void)" (?InitializeStockShaders@GLShaderManager@@QAE_NXZ) referenced in function "void __cdecl SetupRC(void)" (?SetupRC@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: void __thiscall GLBatch::CopyVertexData3f(float (*)[3])" (?CopyVertexData3f@GLBatch@@QAEXPAY02M@Z) referenced in function "public: void __thiscall GLBatch::CopyVertexData3f(float *)" (?CopyVertexData3f@GLBatch@@QAEXPAM@Z)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: virtual void __thiscall GLBatch::Draw(void)" (?Draw@GLBatch@@UAEXXZ) referenced in function "void __cdecl RenderScene(void)" (?RenderScene@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: int __cdecl GLShaderManager::UseStockShader(enum GLT_STOCK_SHADER,...)" (?UseStockShader@GLShaderManager@@QAAHW4GLT_STOCK_SHADER@@ZZ) referenced in function "void __cdecl RenderScene(void)" (?RenderScene@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol _glewGetErrorString referenced in function _main
1>triangle test.obj : error LNK2019: unresolved external symbol _glewInit referenced in function _main
1>triangle test.obj : error LNK2019: unresolved external symbol "void __cdecl gltSetWorkingDirectory(char const *)" (?gltSetWorkingDirectory@@YAXPBD@Z) referenced in function _main
1>triangle test.obj : error LNK2019: unresolved external symbol "public: __thiscall GLBatch::GLBatch(void)" (??0GLBatch@@QAE@XZ) referenced in function "void __cdecl `dynamic initializer for 'triangleBatch''(void)" (??__EtriangleBatch@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: __thiscall GLShaderManager::GLShaderManager(void)" (??0GLShaderManager@@QAE@XZ) referenced in function "void __cdecl `dynamic initializer for 'shaderManager''(void)" (??__EshaderManager@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall GLBatch::~GLBatch(void)" (??1GLBatch@@UAE@XZ) referenced in function "void __cdecl `dynamic atexit destructor for 'triangleBatch''(void)" (??__FtriangleBatch@@YAXXZ)
1>triangle test.obj : error LNK2019: unresolved external symbol "public: __thiscall GLShaderManager::~GLShaderManager(void)" (??1GLShaderManager@@QAE@XZ) referenced in function "void __cdecl `dynamic atexit destructor for 'shaderManager''(void)" (??__FshaderManager@@YAXXZ) 
```

它应该能够仅使用网站中包含的文件进行编译，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:14:58.890

您必须将一些库添加到提供上述功能体的项目中。您可以使用项目属性（“Linker”、“Input”、“Additional Dependencies”）或`#pragma`源代码中的任何位置来执行此操作：

```
#pragma comment(lib, "libraryname.lib") 
```

我不知道图书馆名称；它很可能在书中某处进行了解释，但它可能是`GLTools.lib`or `GLShaderManager.lib`（或不同的东西；您应该将这些文件放在包含文件旁边的某个位置（但在一个`lib`目录中）。

编辑：您也缺少 glew 的 lib 文件（`glew32.lib`）。

# c# - 使用 aspnet_Membership 表成功扩展自定义 SQL 数据表

> ID：11146809
> 
> 赞同：0
> 
> 时间：2012-06-21T21:10:13.510
> 
> 标签：c#, asp.net-mvc-3, razor, sqlmembershipprovider

我有一个使用 MVC3 和自定义 SQL 数据库创建的应用程序，其中包含 3 个表 ：`mm_Table1`、、`mm_Table2``mm_Jobs`

我用 a 构建了 MVC 应用程序，`JobsController`并`Views`使用`Create.cshtml`、`Delete.cshtml`、和`Details.cshtml``Edit.cshtml``Index.cshtml`

我想`mm_Profile`与用户关联。

将`ASPNET_MEMBERSHIP`表集成到我的自定义数据库后，我添加了一`UserId`列 Type `uniqueidentifier`to并创建了与表 ( )`mm_Jobs`的正确外键关系`aspnet_Users``FK_Jobs_aspnet_Users`

我这样做了，现在当我填写我的工作表（位于`Jobs -> Create.cshtml`）并按下提交按钮时，我收到以下错误：

```
Cannot insert the value NULL into column 'UserId', table 'MovinMyStuff.dbo.Moves'; column does not allow nulls. INSERT fails. The statement has been terminated 
```

我的方法中我的 JobsController 中的代码行`Create()`：

> 行：52 db.SaveChanges();

如何更新我`Create()`的以保存更改并将用户与作业相关联，从而将其推`UserId`入表`UserId`中的列`Jobs`？完整的创建方法如下：

```
 [HttpPost]
    public ActionResult Create(Job job)
    {
        if (ModelState.IsValid)
        {
            db.Moves.Add(job);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(job);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:36:51.367

我想出了这个。我在我的区域内的共享文件夹中有一个额外的 _Layout 文件。显然，即使隐藏它，编译器也会看到这个文件。

# c# - 使用 foreach 的异步方法

> ID：11146811
> 
> 赞同：3
> 
> 时间：2012-06-21T21:10:22.107
> 
> 标签：c#, asynchronous, foreach

我有一些异步方法

```
 public static Task<JObject> GetUser(NameValueCollection parameters)
        {
            return CallMethodApi("users.get", parameters, CallType.HTTPS);
        } 
```

我在下面写方法

```
public static IEnumerable<JObject> GetUsers(IEnumerable<string> usersUids, Field fields)
{
    foreach(string uid in usersUids)
    {
        var parameters = new NameValueCollection
                             {
                                 {"uids", uid},
                                 {"fields", FieldsUtils.ConvertFieldsToString(fields)}
                             };
        yield return GetUser(parameters).Result;
    }
} 
```

这个方法是异步的吗？如何使用 Parallel.ForEach 编写这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:17:59.450

有点像这样。

```
public static IEnumerable<JObject> GetUsers(IEnumerable<string> usersUids, Field fields)
{
    var results = new List<JObject>
    Parallel.ForEach(usersUids, uid => {
        var parameters = new NameValueCollection
                             {
                                 {"uids", uid},
                                 {"fields", FieldsUtils.ConvertFieldsToString(fields)}
                             };
        var user = GetUser(parameters).Result;
        lock(results)
            results.Add(user);
    });
    return results;
} 
```

注意：结果的顺序与您预期的不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T23:56:47.443

您的方法不是异步的。假设您的`GetUser`方法已经启动了一个异步任务，`Parallel.ForEach`将使用*额外*的线程来启动您的任务，这可能不是您想要的。

相反，您可能想要做的是启动所有任务并等待它们完成：

```
public static IEnumerable<JObject> GetUsers(IEnumerable<string> usersUids, Field fields)
{
    var tasks = usersUids.Select(
        uid =>
        {
            var parameters = new NameValueCollection
            {
                {"uids", uid},
                {"fields", FieldsUtils.ConvertFieldsToString(fields)}
            };
            return GetUser(parameters);
        }
    ).ToArray();

    Task.WaitAll(tasks);

    var result = new JObject[tasks.Length];
    for (var i = 0; i < tasks.Length; ++i)
        result[i] = tasks[i].Result;

    return result;
} 
```

如果您还想并行启动它们，您可以使用 PLINQ：

```
 var tasks = usersUids.AsParallel().AsOrdered().Select(
        uid =>
        {
            var parameters = new NameValueCollection
            {
                {"uids", uid},
                {"fields", FieldsUtils.ConvertFieldsToString(fields)}
            };
            return GetUser(parameters);
        }
    ).ToArray(); 
```

两个代码片段都保留了 uid 和返回对象的相对顺序 -`result[0]`对应于`usersUids[0]`等。

# javascript - 如何在不重新填充列表的情况下维护 aa 下拉列表的当前信息？

> ID：11146812
> 
> 赞同：2
> 
> 时间：2012-06-21T21:10:24.307
> 
> 标签：javascript, jquery, ajax

目前，我有一个下拉列表，其中填充了来自 SQL 数据库的团队名称：

```
$(".show_hide2").click(function () {
    ("#team").find("tr:gt(0)").remove();
    $(".slidingDiv2").slideToggle();
    teams = $.parseJSON(getTeams());
    for (i = 0; i < teams.length; i++) {
        var team = getTeam(teams[i]);
        updateTeamBoard(team);
        populateTeamSelection(team);
    }
} 
```

这是填充下拉列表的代码。

JS：

```
function populateTeamSelection(team) {
    var team = $.parseJSON(team);
    $("#teamSelection").find("#tr:gt(0)").remove();
    $("<option value='" + team.teamID + "'>" + team.teamName + "</option>").appendTo("#teamSelection");
} 
```

HTML：

```
<div class="slidingDiv2">
    <select id="teamSelection">
        <option id="default" value="0">Select A Team</option>
    </select>
    <input type="button" id="teamViewer" value="Team Viewer"></input>
</div> 
```

问题是，每次我单击显示/隐藏按钮时，它都会在列表中保留当前信息，然后将相同的信息添加到列表中。我正在使用 AJAX 来动态生成表格和列表，但由于某种原因，我无法弄清楚这一点，我觉得它相当简单。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:53:21.647

```
$(function ($)
{
    $populateTeamSelection = function(team)
    {
        $result = $.parseJSON(team,function(call){$handle = call;});
        $result.success(function(){ $data = $handle; });
        $result.error(function()
        {
            //Do something or nothing on error
        });
        $result.complete(function()
        {
            //Clear all current options first
            $('#teamSelection').html('');

            //Populate with new data
            $.each($data,function(lable,value)
            {
                $("#teamSelection").append($("<option></option>").attr("value",value['teamID']).text(value['teamName']));
            });
        });
    };
}(jQuery));

$(document).ready(function()
{
    $('.show_hide2').click(function()
    {
        $(".slidingDiv2").slideToggle();
        $populateTeamSelection(team);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:43:23.373

每次点击，`populateTeamSelection()`都会被调用。每次`populateTeamSelection()`被调用时，它都会在列表中附加一些内容。快速解决方法是在添加任何项目之前从列表中删除所有项目。

您可以使用`$('select').children().remove()`删除循环`option`之前的所有项目。`for`

# javascript - 将函数分配给变量之间的区别

> ID：11146814
> 
> 赞同：35
> 
> 时间：2012-06-21T21:10:37.203
> 
> 标签：javascript, jquery

我参与了几个不同的项目，并且看到了两种不同的创建 jQuery/JavaScript 函数的方法。

首先：

```
function testFunction(){

}; 
```

第二：

```
var testFunction = function (){

}; 
```

这些有区别吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-21T21:13:08.123

主要区别在于第一个（函数声明）被*提升*到声明它的范围的顶部，而第二个（函数表达式）不是。

这就是您能够调用在调用后已声明的函数的原因：

```
testFunction();
function testFunction() {} 
```

你不能用函数表达式来做到这一点，因为赋值发生在原地：

```
testFunction();
var testFunction = function() {}; //TypeError 
```

还有第三种形式（*命名*函数表达式）：

```
var testFunction = function myFunc() {}; 
```

在这种情况下，标识符`myFunc`仅在函数内部的范围内，而`testFunction`在它声明的任何范围内都可用。*但是*（并且总是有一个但是当涉及到 Internet Explorer 时）在版本 9 以下的 IE 中，`myFunc`标识符错误地泄漏到包含范围内。当您需要引用调用函数（因为[`arguments.callee`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)已弃用）时，命名函数表达式很有用。

* * *

另请注意，变量声明也是如此：

```
console.log(x); //undefined (not TypeError)
var x = 10; 
```

你可以想象 JavaScript 引擎是这样解释代码的：

```
var x; //Declaration is hoisted to top of scope, value is `undefined`
console.log(x);
x = 10; //Assignment happens where you expect it to 
```

# c++ - 在 OSX 中执行时，如何强制 Qt 应用程序成为活动/前台窗口？

> ID：11146815
> 
> 赞同：3
> 
> 时间：2012-06-21T21:10:38.080
> 
> 标签：c++, macos, qt, user-interface, window

我正在阅读有关 OSX 的 Qt 教程。我注意到的一件事是，当我启动可执行文件（例如，按钮 hello world 示例）时，应用程序将作为后台窗口启动，我必须切换任务才能将其置于前台。如何在执行时强制 Qt 应用程序窗口成为前台窗口？

我想这样做，因为这是大多数应用程序的行为方式，更不用说手动切换任务会减慢我的编辑-编译-运行-调试周期）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:14:47.150

您观察到的行为是由于使用 ⌘-Y 在调试器下启动应用程序时与调试器交互所致。如果您只是使用 ⌘-R 运行它，它的行为与您预期的一样。您的应用程序本身很好。

通过直接从终端启动应用程序包中的可执行文件来启动 OS X 应用程序的行为类似于使用 ⌘-Y 运行它们——它们都在后台启动。Qt 可能正在模仿 Finder 在通过 ⌘-R 启动进程时所做的任何魔术——说魔术可能会简化为简单地将子应用程序带到前台。OS X 上的 gdb 不是那么“聪明”，这可能是有充分理由的。

OS X 的方法是更加努力地不窃取焦点——恕我直言，这是一件好事。

如果您只想*运行*应用程序，而不是调试它，那么将您的启动命令修改为如下所示`open -a '/Users/daj/foo/bar/baz.app'`，其中 baz.app 是应用程序包文件夹。不要附加尾部斜杠。

如果您可以诱使您的调试器跟踪子进程，那么您当然可以在 gdb 下启动 open 本身，它会按预期工作 - 将您的子应用程序放在顶部。

# magento - createBlock 是做什么的？[Magento]

> ID：11146816
> 
> 赞同：0
> 
> 时间：2012-06-21T21:10:53.033
> 
> 标签：magento

createBlock 中的参数是什么意思？

```
createBlock('adminhtml/customer', 'customer') 
```

另外，我在哪里可以找到有关 magento 的所有功能的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:19:02.900

`Mage_Core_Model_Layout->createBlock()`是块类实例化的工厂方法。第一个参数是一个完整的类名或所谓的类组表示法，它根据配置解析类名（例如，“adminhtml”指向配置的类前缀“Mage_Adminhtml_Block”，因此给出类名“Mage_Adminhtml_Block_Customer”）。工厂方法允许基于运行时配置重写类名。

从理论上讲，所有功能都记录在代码中。Magento 1 没有文档。Magento 2 确实有一个文档计划：[https ://wiki.magento.com/display/MAGE2DOC/Magento+2+Product+Documentation](https://wiki.magento.com/display/MAGE2DOC/Magento+2+Product+Documentation)

# javascript - 父函数原型中带有原型的 Javascript 函数

> ID：11146820
> 
> 赞同：0
> 
> 时间：2012-06-21T21:11:10.670
> 
> 标签：javascript, function, object, prototype

这甚至可能吗？

```
function foo() {
    // do stuff
}
foo.prototype = {
    // stuff...
    bar: function() {
        // do some things with this, where this refers to foo
    },
    bar.prototype: {
        // set some definitions for bar to work with.
        // Where does "this" go and what does it refer to?
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:16:00.637

不，你需要使用

```
function bar() {...}
bar.prototype = {...};
function foo() {...}
foo.prototype.bar = bar; 
```

虽然这行不通。没有理由将`bar`构造函数放在`foo`s 原型上，因为通过 using 实例化 bar 对象时`new ((new foo()).bar)()`，将不会引用 foo 实例。你同样可以使用`new foo.prototype.bar()`.

# java - 尝试使用 JAVA 客户端连接到 .Net SOAP 服务

> ID：11146822
> 
> 赞同：0
> 
> 时间：2012-06-21T21:11:17.860
> 
> 标签：java, .net, wcf, soap, self-hosting

我尝试连接到 .Net SOAP 服务，该 SOAP 服务由另一个项目成员制作，并用 C# 编写。他告诉我他使用 WCF Self Host Client。

我使用 netbeans 7.1 生成基于 WSDL 的 Java SOAP 客户端。当我用java客户端到java服务器尝试它时，这很有效。但是当我使用 .Net 服务器尝试它时，我得到：

```
 WARNING: SP0100: Policy assertion WARNING: SP0100: Policy assertion Assertion[com.sun.xml.ws.security.impl.policy.SpnegoContextToken] {
    assertion data {
        namespace = 'http://schemas.xmlsoap.org/ws/2005/07/securitypolicy'
        prefix = 'sp'
        local name = 'SpnegoContextToken'
        value = 'null'
        optional = 'false'
        ignorable = 'false'
        attributes {
            name = 'http://schemas.xmlsoap.org/ws/2005/07/securitypolicy:IncludeToken', value = 'http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient'
        }
    }
    no parameters
    nested policy {
        namespace version = 'v1_5'
        id = 'null'
        name = 'null'
        vocabulary {
            1\. entry = 'http://schemas.xmlsoap.org/ws/2005/07/securitypolicy:RequireDerivedKeys'
        }
        assertion set {
            Assertion[com.sun.xml.ws.policy.sourcemodel.DefaultPolicyAssertionCreator$DefaultPolicyAssertion] {
                assertion data {
                    namespace = 'http://schemas.xmlsoap.org/ws/2005/07/securitypolicy'
                    prefix = 'sp'
                    local name = 'RequireDerivedKeys'
                    value = 'null'
                    optional = 'false'
                    ignorable = 'false'
                    no attributes
                }
                no parameters
                no nested policy
            }
        }
    }
} is not supported under Token assertion. 
```

我在其他论坛上看到这个问题无法解决，有人知道如何帮助我吗？

对于服务器端，我们设置了 wsHttpBinding，但我们希望在没有任何安全设置的情况下运行 SOAP 服务。这就是为什么我们尝试在我们的 app.config 中使用这段 xml 来修复它

```
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpBindingConfig">
      <security mode="None">
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

它只是一个基本的自托管 WCF 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:02:33.340

```
<endpoint address ="" binding="basicHttpBinding" contract="ReparatieSysteem.WCFLibrary.IOrderListenerService"> 
```

我们仍然将端点绑定设置为 wsHttpBinding，wsHttpBinding 启用了几个安全功能，但不支持 SpnegoToken（java 客户端需要）。

我们已将其设置为 basicHttpBinding，因为我们不需要这些安全功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:45:11.660

我们正在使用 wsHttpBinding，但我们希望在没有任何安全设置的情况下这样做。这就是为什么我尝试在我们的 app.config 中使用这段 xml 来修复它

```
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpBindingConfig">
      <security mode="None">
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

它只是一个基本的自托管 WCF 应用程序。

# f# - 选项类型和可空类型有什么区别？

> ID：11146825
> 
> 赞同：15
> 
> 时间：2012-06-21T21:11:23.833
> 
> 标签：f#, null

在 F# 的口头禅中，似乎本能地避免了`null`,`Nullable<T>`及其同类。作为交换，我们应该改用选项类型。老实说，我真的看不出有什么区别。

*   我对 F# 选项类型的理解是，它允许您指定一个可以包含其任何正常值的类型，或者`None`. 例如，除了 之外，an 还`Option<int>`允许 an 可以具有的所有值。`int``None`

*   我对 C# 可空类型的理解是，它允许您指定一个可以包含其任何正常值的类型，或者`null`. 例如，除了. 之外， `Nullable<int>`aka还`int?`允许 an 可以具有的所有值。`int``null`

有什么不同？`Nullable`用and `Option`, `null`and做一些词汇替换`None`，你基本上有同样的事情。有什么大惊小怪的`null`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T21:33:00.433

F# 选项是通用的，您可以`Option<'T>`为任何类型创建`'T`。

`Nullable<T>`是一种非常奇怪的类型；您只能将其应用于结构，虽然该`Nullable`类型本身就是一个结构，但它不能应用于自身。所以你不能创造`Nullable<Nullable<int>>`，而你可以创造`Option<Option<int>>`。他们必须做一些框架魔术才能使其适用于`Nullable`. 无论如何，这意味着对于 Nullables，您必须先验地知道类型是类还是结构，如果是类，您只需要使用 null 而不是 Nullable。这是一个丑陋的泄漏抽象；它的主要价值似乎在于数据库互操作，因为我猜在数据库域中处理“int，或无值”对象是很常见的。

我认为，.Net 框架在涉及 null 和 .Net 时简直是一团糟`Nullable`。您可以争辩说 F# 通过具有 '增加了混乱' `Option`，或者通过建议您避免 null/ `Nullable`（除非对于互操作*绝对必要*）并专注于使用`Option`s. 你可以找到有两种观点的人。

你可能还想看看

[没有 null 的语言的最佳解释](https://stackoverflow.com/questions/3989264/best-explanation-for-languages-without-null/3990754#3990754)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T15:13:44.987

> 有什么不同？

F# 允许您选择是否希望您的类型成为一种`option`类型，并且当您这样做时，鼓励您检查并在类型中明确`None`存在或不存在。`None`

C# 强制每个引用类型允许`null`并且不鼓励您检查`null`.

所以这只是默认值的差异。

> 用 Nullable 和 Option、null 和 None 做一些词汇替换，你基本上得到了同样的东西。null 有什么大惊小怪的？

正如 SML、OCaml 和 Haskell 等语言所展示的那样，删除`null`可以从真实代码中移除大量运行时错误。以至于原创者`null`甚至将其描述为他的“[十亿美元错误](http://qconlondon.com/london-2009/presentation/Null+References%3a+The+Billion+Dollar+Mistake)”。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-21T22:14:14.987

因为每个 .NET 引用类型都可以有这个额外的、无意义的值——无论它是否*为*null，这种可能性都存在，你必须检查它——而且因为`Nullable`使用`null`它表示“无”，我认为它使很多消除所有怪异（F# 所做的）并要求明确“无”的可能性是有意义的。`Option<_>`这样做。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-21T21:34:39.697

使用的优点`option`是它明确表示变量不能包含任何值，而可为空的类型使其隐含。给定如下定义：

```
string val = GetValue(object arg); 
```

类型系统没有记录 val 是否可以为空，或者如果 arg 为空会发生什么。这意味着需要在函数边界进行重复检查，以验证调用者和被调用者的假设。

除了模式匹配，还可以静态检查使用选项类型的代码，以确保两种情况都得到处理，例如以下代码会导致警告：

```
let f (io: int option) = function
| Some i -> i 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-28T00:31:21.823

正如 OP 所提到的，在传达*可选*类型时使用单词***optional***或***nullable***之间没有太大的语义差异。

 *`null`当您想要表达***非***可选类型时，内置系统的问题变得很明显。

在 C# 中，***所有引用类型都可以是*** `null`. 所以，如果我们依靠内置`null`来表达可选值，***所有***的引用类型都被迫是可选的……不管开发者是否有意。开发人员无法指定***非可选***引用类型（直到 C# 8）。

所以，问题不在于`null`. 问题是`null`被引用类型劫持了。

作为一名 C# 开发人员，我希望我可以使用内置`null`系统来表达可选性。这正是 C# 8 对***可空引用类型***所做的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T21:16:04.113

嗯，一个区别是，对于 a `Nullable<T>`， T 只能是一个结构，它可以显着减少用例。

另请务必阅读此答案：[https ://stackoverflow.com/a/947869/288703](https://stackoverflow.com/a/947869/288703)*

# ruby-on-rails - 使用 node.js，您实际上是在 js 中编写业务逻辑还是调用您的服务层？

> ID：11146828
> 
> 赞同：3
> 
> 时间：2012-06-21T21:11:32.473
> 
> 标签：ruby-on-rails, web-services, node.js

当使用node.js 来为backbone.js 前端的请求提供服务时，node.js 是否真的有你的应用程序业务逻辑，或者它会调用你用Rails 或Java 编写的Web 服务后端？

如果它调用 Rails/Java，这将如何完成？很困惑，因为它是单线程的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:55:41.953

您的业​​务逻辑将用 Javascript 编写。我在两个不同的项目中结合使用 Node.js + Backbone.js。Node 非常适合快速轻松地编写后端 ReSTful API，Backbone.js 非常适合保持我的客户端逻辑井井有条。

与任何 Web 技术一样，客户端/服务器之间的分离仍然必不可少，但 Node 允许您以一种语言思考/编写，并在服务器端和客户端使用相同的库。这在小商店有很多好处，因为“前端”人员和“后端”人员之间不再存在分歧。

Node 的单线程特性让很多新手望而却步……它可以通过多个 proc 实例和负载均衡器轻松克服。（如果您甚至需要所有这些... Node 是基于事件模型构建的，并且可以在您需要考虑运行另一个实例之前处理相当多的负载...当然，这完全取决于您是否正在编写良好的异步代码)

这是说 Node.js + Backbone.js 是您项目的最佳答案吗？不，但是在做出决定之前，您应该权衡使用 Node 相对于 Rails/Java/PHP/Python 的优势。对我来说，在考虑 RAD 时这很简单……一种语言，一组库……到目前为止，它是我最喜欢的 Web 堆栈。

# html - HTML 5 视频标签能否获取 IP 多播流？

> ID：11146830
> 
> 赞同：7
> 
> 时间：2012-06-21T21:11:50.950
> 
> 标签：html, video-streaming, html5-video

我一直在研究通过 UDP 向浏览器获取 IP 多播的方法，但几乎没有发现表明我可以在不使用 Java、Flash 或 Silverlight 之类的插件来打开 UDP 端口的情况下做到这一点并（以某种方式）渲染视频。

查看 HTML 5`<video>`规范，（显然）很少有具体的实现细节，据我所知，没有什么能阻止浏览器解析“udp://224.1.1.1”形式的地址:8000" 并加入该 IP/端口上的多播组。这是一个正确的理解吗？还是必须是文件指向的资源`<source>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:55:59.847

当您的浏览器不能播放 RTP 流时，您可能可以从 UDP 多播接收该 RTP。不确定当前哪些浏览器可以。

# php - 如何在 PHP 中进行类型提示以指定模板内的变量范围？（特别是 PhpStorm）

> ID：11146832
> 
> 赞同：6
> 
> 时间：2012-06-21T21:11:51.503
> 
> 标签：php, phpstorm

我正在寻找可以定义当前 php 模板的范围/上下文的文档注释。（类似于@var）

示例视图类：

```
<?php

class ExampleView {

    protected $pageTitle;

    public function __construct($title) {
        $this->pageTitle = $title;
    }

    public function render() {
        require_once 'template.php';
    }

} 
```

--

```
<?php
// template.php 

/** @var $this ExampleView */
echo $this->pageTitle; 
```

PHPStorm 给出检查错误，因为 $pageTitle 上的访问受到保护。

![在此处输入图像描述](../Images/69f079b499df26df5b8d02026a866821.png)

是否有提示给出范围？就像是：

```
<?php
// template.php 
/** @scope ExampleView */ // <---????

/** @var $this ExampleView */
echo $this->pageTitle; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:43:18.563

不幸的是，你不能——没有这样的标签（一般或特定于 PhpStorm）。

让我们希望他们（JetBrains 开发人员）对此有所作为：http: [//youtrack.jetbrains.com/issue/WI-11022](http://youtrack.jetbrains.com/issue/WI-11022) -- vote/comment/etc，如果它会获得更多投票，我们可能会看到它很快实施（对现在“很快”已经很远了）。

# jquery - 使用 jQuery 工具提示 doesn't work in IE

I am having trouble displaying a tooltip from a title attribute on an anchor tag in IE. I have gotten it to work great in all other browsers.

There is a

> ID：11146837
> 
> 赞同：1
> 
> 时间：2012-06-21T21:12:08.023
> 
> 标签：jquery, css, internet-explorer, tooltip

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:59:57.990

您是否尝试过让工具提示 div 的“工具提示”ID 变成一个类？所以，而不是`id="tooltip"`，让它成为，并用而不是`class="tooltip"`引用它。`div.tooltip``div#tooltip`

# ms-access - 访问启动表单锁定的 GUI

> ID：11146838
> 
> 赞同：1
> 
> 时间：2012-06-21T21:12:14.943
> 
> 标签：ms-access, vba

我刚刚在 MS Access 2010 中使用启动表单获得了有趣的体验。我设计了一个登录表单，当我认为我完成时，我将启动表单设置为我刚刚创建的登录表单。然后我关闭了 Access 并重新打开它，但我的登录表单没有出现。相反，整个 GUI 都被锁定了。我不能点击任何东西。

在我将其设置为启动表单并重新加载 Access 之前，我的表单在测试期间正在工作。如何将我的表单作为启动对象删除或重新使用我的 GUI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:12:16.020

我仍然不确定为什么这一系列事件导致我的 GUI 冻结，但这就是我为解决它所做的。我可以使用 alt+F11 进入 VBA IDE。在我输入的即时窗口中

```
for i = 11 to Application.CurrentDb.Properties.Count - 1: Debug.Print Currentdb.Properties(i) & "::" & i: next i 
```

这让我弄清楚`Properties`集合中的第 49 项是启动表单。再次在我输入的即时窗口中

```
Application.CurrentDb.Properties(49) = "(none)" 
```

然后按回车。

然后我可以在没有启动表单的情况下保存、关闭和重新打开我的数据库！

后来我尝试再次将我的登录表单设置为启动表单（没有更改任何内容）并且效果很好。当我第一次设置启动表单时，似乎某些地方已经损坏了。

# python - 导入错误：没有名为 testrunner 的模块

> ID：11146843
> 
> 赞同：2
> 
> 时间：2012-06-21T21:12:25.943
> 
> 标签：python, plone, importerror, buildout

我按照[这个](http://plone.org/documentation/manual/upgrade-guide/version/upgrading-plone-3-x-to-4.0/updating-add-on-products-for-plone-4.0/no-longer-bin-instance-test-use-zc.recipe.testrunner)添加`zc.recipe.testrunner`到我的构建中。我可以成功运行 buildout 但是当我运行时`bin/test`，我得到：

```
ImportError: No module named testrunner 
```

我`zope.testrunner-4.0.4-py2.4.egg`有

```
/usr/local/lib/python2.4/site-packages 
```

我也钉了

```
zope.testrunner = 4.0.4
zc.recipe.testruner = 1.4.0
zc.recipe.egg = 1.3.2 
```

当我运行 buildout 时，我使用`-vvv`并得到了：

```
...
Installing 'zc.recipe.testrunner'.
We have the distribution that satisfies 'zc.recipe.testrunner==1.4.0'.
Egg from site-packages: z3c.recipe.scripts 1.0.1
Egg from site-packages: zope.testrunner 4.0.4
Egg from site-packages: zope.interface 3.8.0
Egg from site-packages: zope.exceptions 3.7.1
...
We have the distribution that satisfies 'zope.testrunner==4.0.4'.
Egg from site-packages: zope.testrunner 4.0.4
Adding required 'zope.interface'
 required by zope.testrunner 4.0.4.
We have a develop egg: zope.interface 0.0
Adding required 'zope.exceptions'
 required by zope.testrunner 4.0.4.
We have a develop egg: zope.exceptions 0.0
... 
```

为什么我会收到 ImportError？zope.testrunner 是否安装不正确？

**编辑：**

**这是我的构建中的相关部分：**

```
[buildout]
...
parts =
    ...
    test

[test]
recipe = zc.recipe.testrunner
defaults = ['--auto-color', '--auto-progress']
eggs = 
    my.product 
```

**这是中的内容`bin/test`：**

```
#!/usr/local/bin/python2.4 -S

import sys
sys.path[0:0] = [
    '/home/jil/mySandbox/myTrunk/parts/test/site-packages',
    ]

import os
path = sys.path[0]
if os.environ.get('PYTHONPATH'):
    path = os.pathsep.join([path, os.environ['PYTHONPATH']])
os.environ['BUILDOUT_ORIGINAL_PYTHONPATH'] = os.environ.get('PYTHONPATH', '')
os.environ['PYTHONPATH'] = path
import site # imports custom buildout-generated site.py
import os
sys.argv[0] = os.path.abspath(sys.argv[0])
os.chdir('/home/jil/mySandbox/myTrunk/parts/test/working-directory')

import zope.testrunner

if __name__ == '__main__':
    zope.testrunner.run((['--auto-color', '--auto-progress']) + [
        '--test-path', '/home/jil/mySandbox/myTrunk/src/my.product',
        ]) 
```

**这是运行后的错误`bin/test`：**

```
Traceback (most recent call last):
File "/home/jil/mySandbox/myTrunk/bin/test", line 20, in ?
  import zope.testrunner
ImportError: No module named testrunner 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:27:18.023

我有同样的问题。至少在我的情况下，原因是混合了已经安装在“site-packages”中的依赖项和由 buildout 在“eggs”中安装的依赖项：zope.deprecation 和 zope.interface 已经在我的“site-packages”目录中，因此不是由 buildout 重新安装。“bin/test”可执行文件的路径操作似乎从“site-packages”导入了“zope”包，没有“testrunner”子包。

尝试从“site-packages”中删除所有 zope.* 包并重新运行 buildout，或者在 buildout.cfg 的“[buildout]”部分中使用“include-site-packages = false”。第一个解决方案对我有用。

# c# - 为什么要通过公共字段修改数据合约中的私有字段？

> ID：11146844
> 
> 赞同：0
> 
> 时间：2012-06-21T21:12:27.040
> 
> 标签：c#, .net, wcf

当您创建一个新的 WCF 项目时，会为您生成示例服务。默认数据协定是（我刚刚更改了字符串类型字段标题）：

```
[DataContract]
public class CompositeType
{
    bool boolValue = true;
    string name = "";

    [DataMember]
    public bool BoolValue
    {
        get { return boolValue; }
        set { boolValue = value; }
    }

    [DataMember]
    public string Name
    {
        get { return name; }
        set { name = value; }
    }
} 
```

拥有这些私有字段**boolValue**和**name**有什么意义？在合同中编写一些数据清理或其他一些操作是否是一种好习惯，从而使其膨胀？这似乎是我不直接写入字段的唯一合理原因。那么它是一个过时的软件还是它背后有一些原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:49:08.460

在我看来，DataContracts 的唯一目的应该是在域之间传输数据。验证/清理逻辑应该不在 DataContract 的职责范围内。特别是如果目的是在多个项目/平台中共享/链接代码文件以供重用。

这也意味着您不应该在应用程序的其他地方使用您的 DataContract 对象。它应该通过某种适配器或转换器来读取/写入内容到您的应用程序特定对象。它在那个转换（或您的应用程序对象）中，您可以在其中进行一些验证。数据传输层越简单越好。

有可能的是，您可以在 setter/getter 中添加日志记录/调试代码（最好是临时的），以根据需要跟踪数据输入/输出。到目前为止，这是我唯一觉得可以在 DataContract 对象中放置除简单属性之外的任何内容的情况*（*同样，我只是暂时这样做）。

编辑：至于为什么这是默认生成的文件，我不确定。我的 DataContract 对象始终使用自动属性。我建议这可能是在引入自动属性之前对 .NET 2.0 的回归，但无论如何直到 3.0 才引入 WCF/DataContracts。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:15:58.030

与您曾经为任何私有值编写 getter 和 setter 的原因相同，以帮助封装并允许您操纵类的内部工作，而不必担心外部成员会破坏，因为它们直接操纵变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T21:24:49.470

简短的回答是，公共属性允许您（设计者）在将值分配给您的私有字段之前对其进行限制，从而可能使您免于处理意外数据。尽管大多数 get 和 set 方法是相同的，但它们通常是抵御不良数据的第一道防线。

# php - 拒绝通过浏览器访问文件

> ID：11146847
> 
> 赞同：0
> 
> 时间：2012-06-21T21:12:49.510
> 
> 标签：php

我正在使用 PHP 创建文件：

```
 $handle = fopen('backup/db-'.date("ymdhis").'.sql.gz','w+');
 fwrite($handle, $gzdata);
 fclose($handle);
 chmod('backup/db-'.date("ymdhis").'.sql.gz', 0700); 
```

但创建的文件可以通过网络浏览器访问。这里有什么方法不允许吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:23:28.823

添加您的`.htaccess`文件

```
 <FilesMatch "\.(inc)$">
    Order deny,allow
    Deny from all
</FilesMatch> 
```

还有一个好建议：将您的包含放在一个目录中，并拒绝访问您`.htaccess`文件中的该目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:25:27.273

有两种方法：
如果你必须使用公共空间地址，保护它在 .htaccess
上写一个适当的“拒绝”另一方面，把它放在一个私人空间

# c# - 使用 Linq-to-XML 查询 XML 文档

> ID：11146848
> 
> 赞同：1
> 
> 时间：2012-06-21T21:12:54.957
> 
> 标签：c#, linq-to-xml

我有以下 XML 架构：

```
<Root>
   <EventSet>
      <Event>
         <id> 
            //random id 
         </id>
         <time>
            <localTime> 
               //random local time 
            </localtime>
            <utcTime> 
               //corresponding UTC time 
            </utcTime>
         </time>
      </Event>
   </EventSet>
</Root> 
```

给定一个`XDocument`（`xDoc`在这种情况下称为），我可以通过以下方式获取根：`var root = xDoc.Root;`

我试图`var events = xDoc.Descendants("EventSet").Descendants("Event");`查询 中的所有事件`EventSet`，但它返回了`null`. *我很确定这是不对的。*

我将如何查询事件，然后遍历以获取每个事件的`id`、`localTime`和`utcTime`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:22:44.100

我无法重现您的问题。修复了 XML 以使标签匹配后，这可以工作：

```
using System;
using System.Linq;
using System.Xml.Linq;

class Program
{    
    public static void Main()
    {
        var doc = XDocument.Load("Test.xml");
        var query = doc.Descendants("EventSet")
                       .Descendants("Event");
        Console.WriteLine(query.Count()); // 1
    }    
} 
```

或获取位：

```
foreach (var element in query)
{
    string id = (string) element.Element("id");
    string localTime = (string) element.Element("time").Element("localTime");
    string utcTime = (string) element.Element("time").Element("utcTime");
    ...
} 
```

您可以转换为`DateTime`而不是`string`- 这取决于元素中的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:27:14.657

你可以简单地做一个这样的查询

```
var events = from e in xDoc.Root.Desendants("Event") select new {
id = e.Element("id").Value
Time = e.Element("time").Element("localTime").Value ////or you can cast it into datetime
UtcTime = e.Elelemt("time").Element("utcTime").Value //or you can cast it into datetime
} 
```

# java - 记录 MDB 和 Web 服务

> ID：11146854
> 
> 赞同：0
> 
> 时间：2012-06-21T21:13:15.193
> 
> 标签：java, jakarta-ee, logging, log4j, weblogic

我有一个 Ear 文件，它包含在 weblogic 上部署的 2 个 jars (mdbs) 和一个 war (webservice)。我应该放在哪里

DOMConfigurator.configure("log4j.xml"); ?

我阅读了一种在 web xml 上配置 servlet 的方法，仅用于初始化记录器，但我不觉得为此创建 servlet 很舒服。

在 web 服务构造函数中再次不行，因为 ws migt 被实例化超过一次......（由容器实例化尽可能多的 ws ）

在 Mdbs 中，我不知道在哪里初始化日志。

我应该创建只调用一次的单例吗？（看起来很难看，但应该可以）

有什么想法吗 ？

# modelica - Modelica 和 CANBus（通用、CANO pen 和/或 J1939）

> ID：11146856
> 
> 赞同：3
> 
> 时间：2012-06-21T21:13:20.120
> 
> 标签：modelica, can-bus

我有使用 Simulink 和 CANbus 接口进行仿真和代码生成的经验……但我真的很喜欢开源。很长一段时间以来，Octave 已经成为 MATLAB 的替代品（在我的使用水平上），但我最近才发现了 Modelica。除了 Extessy 的 Exite 的断开链接之外，我还没有找到关于 CANbus 的任何模块集的任何信息（Modelica 倾向于使用什么术语？）。

任何人都可以提供有关将 Modelica 与 CANbus 一起使用的个人经验或信息参考吗？我知道我可以编写自己的块集，但这似乎是其他人已经做过的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:58:14.983

我能找到的关于这个主题的最佳参考是[这篇论文](https://www.modelica.org/events/modelica2009/Proceedings/memorystick/pages/papers/0058/0058.pdf)。它显然是作为 EuroSysLib 项目的一部分开发的。我不知道它是否在任何地方都可以公开获得。我建议你联系作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:06:27.233

此处描述了包括 CAN 在内的整个 ECU 仿真的另一种选择：http: [//qtronic.de/en/index_news_12_6_ATZ.html](http://qtronic.de/en/index_news_12_6_ATZ.html) 请参阅 ATZ 电子杂志 2012 年 6 月号中的文章“快速经济地构建虚拟 ECU”。使用 Modelica 构建车辆仿真模型以导出为 FMU，并使用 Silver Basic 软件 (SBS) 来配置基于 DBC 文件的 CAN 仿真，并在 Silver 中闭环运行这两个部分。

# perl - 如何打印不匹配的行？

> ID：11146859
> 
> 赞同：0
> 
> 时间：2012-06-21T21:13:49.417
> 
> 标签：perl

我编写的脚本输出文件中所有以文件`2`中的数字开头的行`1`。

**问题**

如何输出所有其他不匹配的行？

```
#!/usr/bin/perl

use strict;
use warnings;
use Data::Dumper;

my @res;

open(FILE, '<', "1") or die $!;
while (defined (my $line = <FILE>)) {
  chomp $line;
  push @res, $line;
}
close FILE;

open(FILE, '<', "2") or die $!;
while (defined (my $line = <FILE>)) {
  chomp $line;
  $line =~ m/(\d+)/;

  if (defined $1) {
    foreach my $a (@res) {
      if ($a == $1) {
        print $line . "\n";
      }
    }
  }
}
close FILE; 
```

文件 1

```
155
156
157
158
159
160 
```

文件 2

```
150 a
151 f
152 r
153 a
154 a
155 a
156 a
157 f
158 f
159 f 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:20:46.513

您的答案实际上非常接近：改变这一点就足够了

```
foreach my $a (@res) {
  if ($a == $1) {
    print $line . "\n";
  }
} 
```

……到这……

```
my $found;
foreach my $a (@res) {
  if ($a eq $1) { # we compare strings, not numbers, even if these strings are 'numeric'
    $found = 1;
    print $line . "\n";
    last; # no need to look further, we already found an item
  }
}
print "Not matched: $line", "\n" unless $found; 
```

不过还是有话要说。）看，因为第一个文件中的所有这些数字字符串都是唯一的，所以最好使用散列来存储它们。代码实际上不会有太大变化：

```
my %digits;
... # in the first file processing loop:
$digits{$line} = 1;
... # in the second file processing loop, instead of foreach:
if ($digits{$1}) { 
  print $line, "\n"; 
} else {
  print "Not matched: $line", "\n";
} 
```

但关键是在哈希中搜索比一次又一次地遍历数组要快得多。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:31:15.820

```
use strict;
use warnings;

my %res;

open(FILE, '<', "1") or die $!;
while (defined (my $line = <FILE>)) {
  chomp $line;
  $res{$line} = 1;
}
close FILE;

open(FILE, '<', "2") or die $!;
while (defined (my $line = <FILE>)) {
  if ($line =~ m/(\d+)/) {
      print $line if not $res{$1};
  }
}
close FILE; 
```

# asp.net - ASP.NET 和 IIS 7.5 - HTTP 错误 403.14 - 禁止

> ID：11146860
> 
> 赞同：0
> 
> 时间：2012-06-21T21:13:54.957
> 
> 标签：asp.net, windows, iis

我尝试在新服务器（Windows Server 2008 R2）上配置 IIS 7.5，以便运行 ASP.NET 4.0 应用程序。在服务器上定义了两个“域”（由 Parallels Plesk 管理），每个域都在 IIS 中显示为一个站点。一个域用于公共站点，另一个用于测试。目前，测试站点的 DNS 指向那台新服务器，而公共站点的 DNS 仍然指向我们的旧服务器。在将公共站点转移到新服务器之前，我们先转移测试站点，看看是否一切正常。

指向 IIS 中的测试站点，如果我在应用程序的文件夹上运行 Browse 命令，我会收到 HTTP 错误 403.14，并显示消息：*Web 服务器已配置为不列出此目录的内容*。奇怪的是：如果我将完全相同的文件夹结构放在同一服务器上的另一个域中，并运行相同的浏览命令，我会看到应用程序的默认页面（我不知道之后是否一切正常但是，至少，第一页按预期显示）。我应该补充：

*   两个站点使用相同的应用程序池。
*   两个站点的权限是一样的（我一一查过，也和cacls比较过）
*   默认页面没有在 IIS 中设置，而是在 Web.config 中指定的身份验证表单

因此，相同的设置但不同的结果。我不知道是否还有其他需要检查的地方。当我谈论服务器配置和 IIS 时，我的立场非常不稳定。所以我希望这个描述足够清楚并且有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:30:35.433

我想我找到了。它可能不适用于新服务器上的两个站点。当我运行浏览命令时，它使用站点的 DNS 在 IE 中显示页面。由于公共站点的DNS仍然指向旧服务器，因此IE中显示的页面不是来自我点击的文件夹，而是来自旧服务器站点。

我现在可以在新服务器上寻找 403.14 问题的标准解决方案...

# string - ASP.NET MVC 将 Razor 部分视图呈现为字符串错误？

> ID：11146862
> 
> 赞同：2
> 
> 时间：2012-06-21T21:14:00.107
> 
> 标签：string, view, razor

为了发送电子邮件，我正在使用此代码尝试将剃刀部分视图呈现为字符串。

```
 public static string RenderPartialToString(
        string userControlPath,
        object viewModel,
        ControllerContext controllerContext,
        TempDataDictionary tempData)
    {
        using (var writer = new StringWriter())
        {
            var viewDataDictionary = new ViewDataDictionary(viewModel);
            var view = new WebFormView(controllerContext, userControlPath);
            var viewContext = new ViewContext(
                controllerContext,
                view,
                viewDataDictionary,
                tempData,
                writer
                );

            viewContext.View.Render(viewContext, writer);

            return writer.GetStringBuilder().ToString();
        }

    } 
```

问题是我收到以下错误：

```
must derive from ViewPage, ViewPage<TModel>, ViewUserControl, or ViewUserControl<TModel>. Stack Trace:  at  System.Web.Mvc.WebFormView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) at .... RenderPartialToString 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:16:50.383

确实，`WebFormView`不从上述类继承，只是`IView`. 我做了一些谷歌研究并得到了一个原型。[这个页面](http://forums.asp.net/t/1667832.aspx/1/10)是最有帮助的。

我创建了一个空的 MVC3 应用程序并创建了以下`HomeController`. 当我运行应用程序时，页面显示呈现的字符串。该`resultAsString`变量显示如何将渲染捕获为字符串。

```
using System;
using System.IO;
using System.Web.Mvc;

public class HomeController : Controller
{
    public ActionResult Index()
    {
        var result = RenderPartial(this.ControllerContext, "This is @DateTime.Now right now");
        var resultAsString = result.Content;
        return result;          
    }

    private ContentResult RenderPartial(ControllerContext controllerContext, string template)
    {
        var temporaryViewPath = string.Format("~/Views/{0}.cshtml", Guid.NewGuid());
        using (var stringWriter = new StringWriter())
        {
            using (var fileStream = System.IO.File.Create(Server.MapPath(temporaryViewPath)))
            {
                using (var streamWriter = new StreamWriter(fileStream))
                {                       
                    streamWriter.WriteLine(template);
                    streamWriter.Close();
                }
                fileStream.Close();
            }
            var razor = new RazorView(controllerContext, temporaryViewPath, null, false, null);
            razor.Render(new ViewContext(controllerContext, razor, new ViewDataDictionary(), new TempDataDictionary(), stringWriter), stringWriter);
            System.IO.File.Delete(Server.MapPath(temporaryViewPath));
            return Content(stringWriter.ToString());
        }
    }
} 
```

# facebook - facebook 是否使这些部分随时可用？

> ID：11146863
> 
> 赞同：0
> 
> 时间：2012-06-21T21:14:07.670
> 
> 标签：facebook, api

我希望允许用户根据需要将 Facebook 的某些部分添加到网页中。我有一张照片，并已圈出并编号了我要查找的内容。我已经浏览了入门部分和 javascript SDK，但我遇到了困难。

我要查找的部分是顶部栏 (1) 谁在线 (2) 谁在线和聊天 (3) 新闻提要 (4) 上方的部分

这些是否可以在我可以放入的 iFrame 中使用？如果没有，我可以编写代码来获取它们吗？如果我可以自己编写代码，是否有人可以指出我正确的方向。

[http://i46.tinypic.com/nmlzk5.png](http://i46.tinypic.com/nmlzk5.png)

感谢您的任何帮助。

编辑：我不知道如何使图片显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:18:26.673

这是不可能的，因为您需要获得所有用户朋友的许可才能访问此类信息。

# ruby-on-rails - 当属性被另一个类包装时，Rails 中的正确属性初始化

> ID：11146866
> 
> 赞同：0
> 
> 时间：2012-06-21T21:14:26.547
> 
> 标签：ruby-on-rails

假设我们有以下类

```
class Foo < ActiveRecord::Base
  attr_accessible :name, :bars, :bazs

  def bars=(bars)
    baz = []
    bars.each { |b| barz << Baz.new(bar:b, magic_number: 123) }
  end

  def bars
    bazs.map(&:bar)
  end
end

class Bar < ActiveRecord::Base
  attr_accesible :name
end

class Baz < ActiveRecord::Base
  attr_accesible :magic_number, :bar
  has_one :bar
end 
```

这是声明初始化方法的“rails”方式，因此当从哈希创建 Foo 时，会初始化 bazs。例如

```
Foo.new(name:"foo", bars:[Bar.new(name:"b1"), Bar.new(name:"b2")]) 
```

你不能使用`after_initialize`，因为`self[:bars]`返回 nil。另一种选择是覆盖该`initialize`方法，但 Rails 文档不推荐它，我不能使用`barz=`，因为初始化`barz`返回后`nil`，我必须使用`self[:barz]=`. 另一种选择是声明一个类构造函数方法，该方法通过调用 setter 进行正确的初始化，但它似乎不是 Ruby 方式（`Foo.from(name:"foo", bars:[Bar.new(name:"b1"), Bar.new(name:"b2")])`）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:17:19.853

好的，我最后所做的就是将所有内容声明为 attr_accessible 并覆盖初始化方法

```
class Foo < ActiveRecord::Base
  attr_accessible :name, :bars, :bazs 

  def initialize(attributes = nil, options = {})
    super
    self.bars = attributes[:bars]
  end

  def bars=(bars)
    self.bazs = []
    self.bars.each { |b| self.bazs << Baz.new(bar:b, magic_number: 123) }
  end

  def bars
    self.bazs.map(&:bar)
  end

end 
```

我不知道要注意的一件事是，每次我需要调用 getter/setter 时，都需要使用`self.`

# sharepoint - 检查文件名的一个小问题（Powershell）

> ID：11146871
> 
> 赞同：2
> 
> 时间：2012-06-21T21:14:50.730
> 
> 标签：sharepoint, powershell

```
$list = $web.Lists[$folder.ParentListId]
$itemCollection = $list.GetItems($query)
foreach ($item in $itemCollection){
Write-Host $item.Name
} 
```

我想检查文件是否以“MDNSO”开头，我该怎么写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:42:13.143

您可以使用 -like 运算符：

```
$something -like "MDNSO*" 
```

对于区分大小写的比较，请使用：

```
$something -clike "MDNSO*" 
```

查看 about_Comparison_Operators 了解更多信息：

```
Get-Help about_Comparison_Operators 
```

# javascript - 获取输入的 img 类型选定图片并加载到图像标签中

> ID：11146874
> 
> 赞同：4
> 
> 时间：2012-06-21T21:14:59.520
> 
> 标签：javascript, jquery, html, file-upload, image

所以，我有一个用于上传 img 文件的输入框。我想要做的是从该（或选定的源）获取数据并将其路由到图像标签的 src 属性中。

像这样：http: [//jsfiddle.net/QC2c4/](http://jsfiddle.net/QC2c4/)

它有点像客户端验证器，以显示用户将要上传的内容。我知道我需要检查有效 img 类型的扩展名，.png、.bmp、.png、.tiff 等。

我将如何进行链接过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T21:47:13.330

这是答案，作为额外的奖励，我将图像加载到预览窗格中。`files[0]`关键是在更改时从文件选择器中拉出对象。

[http://jsfiddle.net/TbZzH/1/](http://jsfiddle.net/TbZzH/1/)

# macos - Qt/C++中如何获取Mac统一标题和工具栏的高度

> ID：11146875
> 
> 赞同：1
> 
> 时间：2012-06-21T21:15:00.790
> 
> 标签：macos, qt, toolbar, titlebar

我有一个带有 C++ 应用程序的 Qt 4.7.4，它在 Mac 上使用统一的标题和工具栏： `setUnifiedTitleAndToolBarOnMac(true);` 在我的应用程序运行的某个时间点，我需要以编程方式知道统一标题和工具栏的高度是多少。

我怎样才能得到它的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T22:11:29.627

至少对于 Qt 4.8.4 和 Mountain Lion，这看起来有点问题：

打开工具栏，`QMainWindow::frameGeometry()`报告错误的 y 位置但正确的**总**窗口大小。在我的测试中，它的`height()`减号`QMainWindow::geometry()`是标题栏*和*统一工具栏`height()`的高度。要找出单独的工具栏有多高，您可以隐藏它并使用差异。

 *从事此工作的 Qt 人员似乎遇到了一些问题并且已经停止`QMainWindow::setUnifiedTitleAndToolBarOnMac()`：

> > Qt 4 的统一工具栏实现没有也不会移植到 Qt 5。这意味着调用 QMainWindow::setUnifiedTitleAndToolBarOnMac 对 Qt 5 没有影响。包装 NSToolbar 的替代 API 在 QtMacExtras 中可用。*

# ios - 将一个 UIViewController 从一个 UINavigationController 推送到另一个 UINavigationController

> ID：11146878
> 
> 赞同：0
> 
> 时间：2012-06-21T21:15:43.290
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我有一个`UINavagationController`（NC）为一组“项目”显示大量`UIViewController`（VC）视图，我有一个为一组“所有者”`UINavigationController`显示大量视图。`UIViewController`用户可以滚动浏览项目，选择一项，然后查看相应的所有者（反之亦然）。由于所有者 VC 与项目 NC 位于不同的 NC 上，因此我得到“嵌套动画可能导致导航栏损坏”和“开始/结束外观转换的不平衡调用”。

如何将属于另一个 NC 的视图推送到另一个 NC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:30:53.990

每个导航控制器都有一个`viewControllers`属性：

```
@property(nonatomic, copy) NSArray *viewControllers 
```

这只是导航控制器堆栈中所有视图控制器的数组。当您“将属于另一个 NC 的视图推送到不同的 NC”时，您可以先从第一个导航控制器的`viewControllers`数组中删除该视图控制器，然后再将同一视图控制器推送到第二个导航控制器的堆栈中。

# uitableview - 设置 UITableViewCell 的背景视图 - 哪种方式更好？

> ID：11146879
> 
> 赞同：0
> 
> 时间：2012-06-21T21:15:44.987
> 
> 标签：uitableview, uikit, ios5

我一直在 cellForRowAtIndexPath 调用中设置 UITableViewCell 的背景，如下所示：

```
CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:simple];

if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];

    for (id findCell in nib )
    {
        if ( [findCell isKindOfClass: [CustomCell class]])
        {
            cell = findCell;
        }    
    }

    UIView *cellBackView = [[UIView alloc] initWithFrame:CGRectZero];
    UIView *cellSelectedBackView = [[UIView alloc] initWithFrame:CGRectZero];

    if (UIUserInterfaceIdiomPad == UI_USER_INTERFACE_IDIOM()) {

        cellBackView.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed:@"cell_shadows_ipad_light.png"]];
        cellSelectedBackView.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed:@"blue_cell.png"]];
    }else {
        cellBackView.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed:@"cell_shadows.png"]];
        cellSelectedBackView.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed:@"blue_cell.png"]];
    }

    cell.backgroundView = cellBackView;
    cell.selectedBackgroundView = cellSelectedBackView; 
```

现在我发现还有另一种方法可以实现这一点，那就是在这个委托中设置背景视图：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
   // load the background image and set it as the background color as above
} 
```

而且从 iOS5 开始，你可以只用 tableView 注册 nib，所以我也不需要循环查找类 nib。因此，在 viewDidLoad 中：

```
[self.tableView registerNib:[UINib nibWithNibName: @"CustomCellSplit" bundle:nil] forCellReuseIdentifier: @"CustomCellId"]; 
```

所以这行得通，它更简单，它是苹果推荐的加载单元格的笔尖和设置背景视图的方式。但是，我发现当您滚动列表时，每行都会调用这个 tableView: willDisplayCell: forRowAtIndexPath 。使用我之前加载背景视图的方式，它只会在创建单元格时设置背景视图（最多 8 或 10 次）。

因此，新方法听起来像是加载单元格和设置背景视图的性能较差的方法。这是正确的假设，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:42:31.360

事实证明这真的很简单。您只需在 nib 中添加一个子视图并将其连接到`selectedBackgroundView`UITableViewCell 中的插座。

[http://cl.ly/image/322L2k3j2U1A](http://cl.ly/image/322L2k3j2U1A)![从 nib 连接 selectedBackgroundView 插座](../Images/e3de486fea49bf3ea7d75137adc48fb0.png)

瞧。

iOS5 足够聪明，可以在运行时从单元格的 contentView 中删除 backgroundView。

无需使用该`tableView:willDisplayCell`功能。

# perl - 通过Unix删除某些字段中具有Null值的文件中的记录

> ID：11146880
> 
> 赞同：0
> 
> 时间：2012-06-21T21:15:51.210
> 
> 标签：perl, bash, unix, sed, awk

我有一个管道分隔文件（下面的示例），我需要删除字段 2（电子邮件）、4（邮件 ID）、6（通信 ID）中具有空值的记录。在此示例中，应删除第 2、3、4 行。输出应保存到另一个文件。如果 'awk' 是最好的选择，请告诉我实现这一目标的方法

```
id|email|date|mailing-id|seg_id|comm_id|oyb_id|method
|-fabianz-@yahoo.com|2010-06-23 11:47:00|0|1234|INCLO|1000002|unknown
||2010-06-23 11:47:00|0|3984|INCLO|1000002|unknown
|-maddog-@web.md|2010-06-23 11:47:00|0||INCLO|1000002|unknown
|-mse-@hanmail.net|2010-06-23 11:47:00|0||INCLO|1000002|unknown
|-maine-mei@web.md.net|2010-06-23 11:47:00|0|454|INCLO|1000002|unknown 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:31:48.933

Steve 是对的，给出的示例中缺少字段 2 和 5。第二行缺少电子邮件，第三行和第四行缺少 seq_id

这是史蒂夫解决方案的略微简化版本

```
awk -F "|" ' $2!="" && $5!=""' file.txt > results.txt 
```

如果第 2,4 和 6 列是重要的，则解决方案是：

```
awk -F "|" ' $2!="" && $4!="" && $6!=""' file.txt > results.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:48:58.033

这是一个`awk`可能有帮助的解决方案。但是，要删除第 2、3 和 4 行，有必要仅检查字段 2 和 5 中的空值（即不是您所说的字段 2、4 和 6）。我理解正确吗？这是`awk`做你想做的事：

```
awk -F "|" '{ if ($2 == "" || $5 == "") next; print $0 }' file.txt > results.txt 
```

`cat results.txt:`

```
id|email|date|mailing-id|seg_id|comm_id|oyb_id|method
|-fabianz-@yahoo.com|2010-06-23 11:47:00|0|1234|INCLO|1000002|unknown
|-maine-mei@web.md.net|2010-06-23 11:47:00|0|454|INCLO|1000002|unknown 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:41:12.997

This might work for you:

```
 sed 'h;s/[^|]*/\n&/2;s/[^|]*/\n&/4;s/[^|]*/\n&/6;/\n|/d;x' file.txt > results.txt 
```

# wcf - 通过组策略管理网络 TCP 端口共享配置

> ID：11146881
> 
> 赞同：3
> 
> 时间：2012-06-21T21:15:57.077
> 
> 标签：wcf, windows-server, system-administration, group-policy, tcpportsharing

我们的组织有一个应用程序基础结构，它由部署在我们网络上许多不同服务器上的许多 WCF 服务组成。我们希望转向使用 Net TCP 端口共享服务，以便我们无需为特定服务分配特定端口。启用该服务很容易，但我们遇到的问题是允许自定义服务用户访问该服务。

根据[MSDN](http://msdn.microsoft.com/en-us/library/aa702669.aspx)，必须通过 .NET 框架目录中的 SMSvcHost.exe.config 文件添加以默认身份以外的身份运行的服务。我们对必须为要启用端口共享的每台机器单独修改此配置文件的想法并不完全满意，是否有一种方法可以通过组策略或其他一些集中方式控制此服务的访问和配置?

# jquery - AJAX .load url 和回发不起作用

> ID：11146883
> 
> 赞同：0
> 
> 时间：2012-06-21T21:15:59.480
> 
> 标签：jquery, ajax, url, postback

我使用以下代码将我网站一部分的特定 div (.source_div) 引入我网站另一部分的另一个 div (.destination_div)：

```
<script type="text/javascript">
$(document).ready(function(){
$('.destination_div').load('http://myurl.mypage.com/something.aspx .source_div');
});
</script> 
```

但是，.source_div 包含指向我网站其他部分的链接。当我单击这些链接时，我希望这些页面继续显示在我所在的同一个 .destination_div 中，而不是将我带到另一个页面（这是它目前所做的）。在另一个稍微相关的注释中，我的 .source_div 中还有一个表单，该表单执行回发，该回发也附加了 html。这在我的 .load 中也不起作用。我环顾四周，无法弄清楚如何正确地做这些事情中的任何一件。有人可以帮助解决这些问题中的一个或两个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:25:05.583

将事件委托给`destination_div`执行相同操作的元素中的所有锚标记`.load`，只需使用给定链接的 href。

[http://api.jquery.com/on](http://api.jquery.com/on)
[http://api.jquery.com/delegate](http://api.jquery.com/delegate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:28:35.383

实施可能是这样的。

```
$(document).ready(function(){
   $('.destination_div').load('http://myurl.mypage.com/something.aspx .source_div'); // your page is loaded first
   $('.destination_div').on('click','a',function() {
       var url = $(this).attr("href");
       $('.destination_div').load(url);
       return false;
   });
});​ 
```

编辑：添加了您以前的代码

# wcf - 在服务中拥有更多 WCF 方法会降低性能吗？

> ID：11146886
> 
> 赞同：1
> 
> 时间：2012-06-21T21:16:05.500
> 
> 标签：wcf, performance, methods, size, operations

关于在单个服务下使用或多或少的操作，设计 WCF 服务的最佳实践是什么。

考虑到服务必须是通用的和面向业务的，我遇到了一些 SOAP 服务@work，它们的合同中每个操作的 XML 元素太多，而单个服务中的操作太多。

从我的角度来看，如果不进行测试，我认为服务中的操作数量不会对中间件的性能产生任何影响，因为响应是专门为每个操作构建的，其中仅包含与该操作相关的 XML 元素。

或者在 SOAP 服务中有太多操作有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:30:10.257

有一个问题，那就是尝试使用多种方法（可能有数千种方法）对服务进行元数据交换或代理创建时。由于它将尝试一次完成整个事情，它可能会超时，甚至会遇到 OutOfMemory 异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:06:42.297

不要认为它会对性能产生很大影响，但重要的是方法必须在逻辑上分组到不同的服务中。具有大量方法的服务通常意味着它们没有被逻辑考虑。

# cordova - 在 Phonegap 应用程序中在社交媒体上分享的简单方法

> ID：11146888
> 
> 赞同：2
> 
> 时间：2012-06-21T21:16:10.137
> 
> 标签：cordova, facebook-social-plugins, addthis, sharethis

感谢 Phonegap，我正在将我的 web 应用程序移植到本机应用程序。一切正常，但 Addthis （这似乎是文件引用的问题，因为我收到“在此服务器上找不到 URL”错误，但我无法解决它，并且脚本是从 Addthis 服务器动态加载的）。

我[在这里](https://stackoverflow.com/questions/9755099/is-is-possible-to-use-sharethis-in-a-phonegap-app)读到，如果不使用一些 Objective-C 编码，Sharethis 也无法工作。

有没有一种简单的方法（即没有任何 Objective-C 知识）让具有一些高级功能（如计数器）的社交媒体插件与 Phonegap 一起使用？

如果没有，我将求助于一个简单的 jQuery 插件......

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:47:01.923

您希望人们喜欢什么内容？如果它是应用程序内部的页面，那么他们将无法喜欢内部本地 URL。如果您希望他们“喜欢或分享”您的应用程序，您需要创建一个 Facebook 应用程序页面或查看添加 Facebook 插件以发布到人墙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:49:47.137

Add This Plugin 生成的脚本存在问题。我通过在本地复制 javascript 并将变量 _atr 更改为 http//s7.addthis.com/ 来解决这个问题

[http://support.addthis.com/customer/portal/questions/375961-integrate-addthis-in-an-app-with-phonegap](http://support.addthis.com/customer/portal/questions/375961-integrate-addthis-in-an-app-with-phonegap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-31T20:48:25.807

我通过创建以下模块克服了这个问题 - [https://www.npmjs.com/package/cordova-network-interceptor](https://www.npmjs.com/package/cordova-network-interceptor)拦截并修复了由脚本中使用的相关协议引起的不良网络请求，例如 addthis 使用的脚本。希望有帮助！

# javascript - IE8 无法 .append() jquery 对象

> ID：11146889
> 
> 赞同：1
> 
> 时间：2012-06-21T21:16:10.900
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我编写了这个函数来使列可排序。我想重新排列与特定订单号相关联的 div。它在 chrome 和 firefox 中运行良好，但由于某种原因在 IE8 中，而不是在函数的末尾，将所有重新排列的内容附加到`#current_orders_content2`div 中，所有内容都消失了。该函数在 JSlint 中检出（通过 jsfiddle），奇怪的是查看最后的所有值（通过 IE 控制台），一切看起来都很好——值是我所期望的。只是似乎`append()`失败了。所以我用 进行了测试`.html()`，`appendTo`但仍然没有喜悦。如果我向它传递一个 html 字符串，它就可以工作，但是这些 jquery 对象失败了。

关于为什么或如何使它工作的任何想法？

谢谢！

```
$('.sortable').click(function () {
    "use strict";
    if ($(this).hasClass('sortable_numeric')) {

        /*
        *function sets ascending/descending classes
        *for formatting, placement of arrow_up.png, arrow_down.png
        *returns the sort order to be used below "asc" or "desc"
        */
        var sort_order = sort_class_distribution($(this));
        var current_val = "";
        var order_number = "";

        /*
        *determine what column is being sorted
        *remove the "_header" text from the id to
        *get this information
        */
        var sort_column = this.id;

        sort_column = sort_column.replace("header_", "");

        /*
        *append "_div" to the end of the string to get
        *the class of the divs we are sorting by
        */
        sort_column += "_div";

        var valuesArr = [];

        $('.' + sort_column).each(function () {

            var current_val = $.trim($(this).text());

            current_val = parseInt(current_val, 10);

            valuesArr.push(current_val);

        });

        var sorted = [];

        if (sort_order == "asc") {

            sorted = valuesArr.slice(0).sort(sortA);

        } else if (sort_order == "desc") {

            sorted = valuesArr.slice(0).sort(sortD);

        }

        /*
        * for each item in this array, get the parent div 
        * with the class order_and_lines_container_div. 
        * 
        * push it into an array of its own to to put back 
        * onto the page in the order of the sorted array
        */

        var containerArr = [];
        var current_container = "";
        var c = 0;

        for ( c = 0; c <= sorted.length; c++ ) {

            current_container = $('#order_container_' + sorted[c]);

            containerArr.push(current_container);

        }

        $('#currentOrdersContent2').html('');

        for ( c = 0; c <= sorted.length; c++ ) {

            $('#currentOrdersContent2').append(containerArr[c]);

        }

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:22:43.790

我不知道这是否是问题所在，但是您的循环超出了范围。

这个...

```
for ( c = 0; c <= sorted.length; c++ ) { 
```

应该是这个……

```
 // -----------v---constrain to indices less than sorted.length
for ( c = 0; c < sorted.length; c++ ) { 
```

此外，您似乎使用的代码比此类所需的代码多得多。

* * *

这是你的代码修改了一下......

```
$('.sortable').click(function () {
    "use strict";
    if ($(this).hasClass('sortable_numeric')) {

        var sort_order = sort_class_distribution($(this)),
            sort_column = this.id.replace("header_", "") + "_div",
            content2 = $('#currentOrdersContent2');

        var sorted = $('.' + sort_column).map(function () {
                return parseInt($(this).text(), 10);
            })
            .toArray()
            .sort(sort_order == "asc" ? sortA : sortD);

        $.each(sorted, function(i, item) {
            content2.append($('#order_container_' + item));
        });
    }
}); 
```

其中一些变化是...

*   删除了一堆不必要的变量声明*（阴影或未使用）*

*   用过`.map()`。这只是迭代元素，并将您提供的任何内容作为`return`值放入一个新的 jQuery 对象中，因此您最终会得到一个充满数字的 jQuery 对象。

*   摆脱了`$.trim()`因为`parseInt`忽略了前导/尾随空格

*   用于`.toArray()`将新的 jQuery 对象转换为实际的 Array。

*   立即调用`.sort()`并将返回值分配给变量，因为它返回相同的数组，尽管已修改。

*   那时，简单地做了`.append()`每个项目。追加时，元素会从原来的位置移除，并放在新的位置，所以不需要缓存和清除元素。

这`.map().toArray().sort()`只是方法链接。`.map()`如上所述返回新的 jQuery 对象。`.toArray()`在该对象上调用，并返回一个数组。`.sort()`在该数组上调用，并返回分配给变量的相同数组。

这部分`sort_order == "asc" ? sortA : sortD`是一个条件运算符，类似于`if...else`. 基本上，如果条件为真，则返回`sortA`，否则返回`sortD`。

# joomla - Joomla v1.5 插件 sys.ini 语言文件

> ID：11146890
> 
> 赞同：2
> 
> 时间：2012-06-21T21:16:43.800
> 
> 标签：joomla, joomla1.5

Joomla v1.5 插件可以使用 sys.ini 语言文件吗？我想在插件安装期间使用它。因为在安装过程中无法访问默认语言 ini 文件。所以安装管理器只输出语言键常量，如 PLG_MY_PLUGIN_DESCRIPTION。我在 Joomla v1.5 开发人员手册中没有找到任何提示。所以我猜 sys.ini 文件只适用于组件？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:36:41.137

Joomla 1.5 不读取 .sys.ini 语言文件。只有 Joomla 1.6 及更高版本可以。如果您打开调试工具（站点>>全局配置>>系统），它将显示是否正在加载语言文件。

其他一些需要检查的事情：

1.  XML 中的描述与语言文件中的描述相匹配。
2.  描述区域的语言文件开头的每一行都以哈希标记开头，`#`而不是`;`
3.  XML 指向正确位置的语言文件。

如果您已经检查了所有这些，请为`.XML`and`.INI`文件发布一些代码。

问候

# android - Android：突出显示 ListView 中的列表项

> ID：11146904
> 
> 赞同：0
> 
> 时间：2012-06-21T21:18:22.433
> 
> 标签：android, android-listview

我有一个具有列表视图的应用程序，我想在用户进行该活动时突出显示特定的列表项。

到目前为止，我有一个通用的实现，我正在创建一个 listView 并且我有一个 OnListItemClick 方法。如果有人可以提供如何在列表视图中突出显示特定列表项的示例实现，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:21:25.517

它应该自动完成，否则您可以执行我在这里写的操作：[如何在单击时突出显示表格行？](https://stackoverflow.com/questions/4075356/how-can-i-highlight-the-table-row-on-click/8204768#8204768)

将您在[Adapter.getView()](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法中膨胀的视图的背景设置为`android:background="@android:drawable/list_selector_background"`...

# asp.net - 如果我们更改区域和语言选项，我们的 ActiveX 会抛出此错误：类不支持自动化

> ID：11146908
> 
> 赞同：0
> 
> 时间：2012-06-21T21:18:35.220
> 
> 标签：asp.net, .net, activex

我们有一个在 Windows 7 上运行的 IE 中完美运行的 ActiveX……只要将区域和语言选项设置为英语（美国）。

如果我们关闭浏览器，切换到法语（加拿大），重新打开浏览器，然后重复测试，我们会得到这个错误：类不支持自动化

我们检查了注册表，没有看到任何特定于我们组件的语言/区域设置。

有谁知道这可能是什么原因造成的？

谢谢！

格伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:15:47.377

我们发现了问题......它在 JavaScript 中。

# java - 获取两条线之间的点的距离

> ID：11146910
> 
> 赞同：2
> 
> 时间：2012-06-21T21:18:49.563
> 
> 标签：java, math, trigonometry, lwjgl

我有 4 个点，其中三个点组成两条线，如 V 或 < 或 >，你明白了，现在我在那个圆锥（V）中得到一个点，我可以得到从顶部到的距离左下角和右下角，但不是底部 pos 所在的位置。

也许这会有所帮助。 ![https://dl.dropbox.com/u/28109593/e​​xamplevec.png](../Images/6c4404bbcba4c67c0d6ceeb3727879ab.png)

我有代码可以解决这个问题：

```
public float GetDist(Vector3f one, Vector3f two, Vector3f three, Vector3f p){

          Vector3f one_to_point = new Vector3f(0,0,0);
          Vector3f.sub(p,one,one_to_point);            //Storing vector A->P

          Vector3f one_to_two = new Vector3f(0,0,0);
          Vector3f.sub(two, one, one_to_two);            //Storing vector A->B

          Vector3f one_to_three = new Vector3f(0,0,0);
          Vector3f.sub(three, one, one_to_three);            //Storing vector A->C

          float q1 =  Vector3f.dot(one_to_point,  one_to_two) / one_to_two.lengthSquared();            // The normalized "distance" from a to b
          float q2 =  Vector3f.dot(one_to_point,  one_to_three) / one_to_three.lengthSquared();            // The normalized "distance" from a to c 
```

现在我已经知道 pos 向量在锥体中，那么我需要做什么才能获得图像中绿色圆圈的 pos 所示的 pos？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:55:12.927

您在平面上有 4 个点：A、B、C 和 D（其中 D 是您在图中标记为 pos 的位置）。可以在任意 2 个不同的点之间绘制一条独特的直线，因此找到连接 A 和 D 的直线，并以形式获得其方程

```
 y = m_1 * x + c_1 
```

对 B 点和 C 点进行相同操作以获得

```
 y = m_2 * x + c_2 
```

现在你知道了 2 条线，你可以求解这对联立方程来得到位于图表上绿色圆圈处的点 (x,y) - 我称之为 E。给定 E，计算向量 BE 的长度和除以向量 BC 的长度。该值是`X`您在问题中寻找的值。

如果您不知道如何找到通过 2 点的线的方程式，请查看此链接以获取详细信息[http://www.ugrad.math.ubc.ca/coursedoc/math100/notes/zoo/eqline.html](http://www.ugrad.math.ubc.ca/coursedoc/math100/notes/zoo/eqline.html)

我不怀疑有一种更简单更优雅的方法可以做到这一点，但如果你在这里没有得到其他答案，这种方法将达到你的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:17:04.327

自从我完成向量代数以来已经有一段时间了，但让我看看我是否做对了。您正在寻找绿点，即从 A 到 Pos 的线与从 B 到 C 的线相交的地方。

我相信如果你知道 BA-Pos 形成的角度与 BAC 形成的角度的比值，那么这个比值将与从 B 到 Green 的距离与从 B 到 C 的距离的比值相同。 Green 的方向与 C 的方向相同，所以表示 Green 位置的向量为

VectorGreen = VectorB + (x1 / x2)(VectorC - VectorB) //到B的向量加上从B到C的向量的一部分

x1 = arccos ( Normalize(VectorP - VectorA ) * Normalize(VectorB - VectorA) )//A到B和A到Pos之间的角度

x2 = arccos ( Normalize(VectorB - VectorA ) * Normalize(VectorC - VectorA) ) //A 到 B 和 A 到 C 之间的角度

# android - 使用命令行参数启动 phonegap/cordova 应用程序？

> ID：11146914
> 
> 赞同：0
> 
> 时间：2012-06-21T21:18:59.587
> 
> 标签：android, ios, mobile, cordova

我有一个 phonegap 应用程序，用于处理某种类型的文件。我想把它连接起来，这样你就可以双击任何具有给定扩展名的文件，它将使用我的应用程序打开。

据我所知，这涉及通过启动我的应用程序通过命令行参数传递文件的路径来连接操作系统以响应该扩展名的文件。最后一部分是我卡住的地方。如何读取传递给我的 phonegap 应用程序的任何命令行参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:26:25.850

这个 SO 答案将使您了解如何注册您的 Android 应用程序以根据 mimeType 或文件扩展名打开。

[特定文件扩展名的Android意图过滤器？](https://stackoverflow.com/questions/1733195/android-intent-filter-for-a-particular-file-extension)

# ruby-on-rails - 选择显示当前选择的选项

> ID：11146916
> 
> 赞同：0
> 
> 时间：2012-06-21T21:19:05.473
> 
> 标签：ruby-on-rails, select, highlight

我正在使用 rails 并拥有以下代码：

```
<%= select_tag :tag, options_for_select(["Politics", "Technology", "Entertainment", 
   "Sports", "Science", "Crime", "Business", "Social", "Nature", "Other"]), :selected => 
    "Politics" %> 
```

这`:selected`部分显然不是一个有效的选择，但它传达了我想要做的事情。代替`"Politics"`应该是当前选择的选项（我知道如何做这部分）。但更重要的是，默认突出显示选择选项的选项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:37:07.170

默认选择的选项在 option_for_select 方法中说明

该方法接受的第二个属性是应该选择哪个元素。

```
options_for_select(container, selected = nil) 
```

因此，在您的情况下，代码将是：

```
<%= select_tag :tag, options_for_select(["Politics", "Technology", "Entertainment", 
   "Sports", "Science", "Crime", "Business", "Social", "Nature", "Other"], "Politics") %> 
```

# ruby-on-rails - rails 3.2 具有可选参数的范围

> ID：11146917
> 
> 赞同：4
> 
> 时间：2012-06-21T21:19:15.707
> 
> 标签：ruby-on-rails

我有以下范围来查找属于特定客户的产品。

```
scope :client, lambda {|client| where("client_id = ?", client) } 
```

并且可以被调用

```
Product.client(parameter) 
```

如果没有给出客户 ID，有什么方法可以声明我的范围以返回所有产品？这是不应该使用范围的情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T21:47:48.800

它可以与范围一起正常工作

```
scope :client, lambda {|client =  nil| where("client_id = ?", client) unless client.nil? } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:24:09.853

您应该使用范围以外的东西，因为您真的想在两种情况之间切换（指定/不指定客户端 ID）并做出不同的响应。这个怎么样：

```
class Product < ActiveRecord::Base
  def self.by_client(client)
    if client
      where(client_id: client)
    else
      all
    end
  end
end 
```

此代码将始终返回类似于 的输出的内容`scope`，因此您可以链接它等。

请注意，这也会整理代码并且不需要特定的范围。并确保您实际上并不意味着`has_many :clients`无论如何`Product`...

# google-maps - 自定义全景街景，在 Flash 街景播放器上

> ID：11146918
> 
> 赞同：0
> 
> 时间：2012-06-21T21:19:18.760
> 
> 标签：google-maps, google-street-view

V3 google maps api 详细介绍了如何使用 html5(?) 播放器创建自定义全景街景。如此处所述：[https](https://developers.google.com/maps/documentation/javascript/streetview) ://developers.google.com/maps/documentation/javascript/streetview 对于街景的 Flash 版本，没有示例或教程，关于如何制作自定义全景视图：[https://developers .google.com/maps/documentation/javascript/v2/services#StreetviewOverlays](https://developers.google.com/maps/documentation/javascript/v2/services#StreetviewOverlays) 这个问题在 api v3 之前已经被提出过好几次了，但由于 html5 街景播放器的答案后来出现了，所以从未回答过。现在有没有人设法使用 Flash 播放器创建自定义全景街景？（因为flash街景播放器质量还是比较好的，比如用在google art project、business photos等）

Rgrds，米诺斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:07:38.630

好吧，谢谢@ManoMarks，但似乎 Flash 街景播放器独立于 api 版本，也可以在版本 3 上使用。我再次引用谷歌文档：“虽然街景功能旨在与地图结合使用，但这种用法不是必需的。您可以使用没有地图的独立街景对象”，但没有解释如何使用它没有地图或地图 V3（或者我没有看到解释）。另外[http://goo.gl/maps/RBIV](http://goo.gl/maps/RBIV)在桌面上，我得到了 Flash 街景播放器，所以在我看来，谷歌将继续使用它与手机中的 html5 街景播放器并行使用。此外，谷歌似乎进一步在其他新项目中使用和支持这个播放器，如谷歌艺术项目和商业照片，有或没有地图，独立于地图 api 版本。我会接受这样的答案：“flash 街景全景播放器不应该支持使用自定义全景，或者谷歌不打算提供任何关于如何做到这一点的文档，就像 html5 街景全景播放器一样“但我没有得到这样的答案。所以我再问一遍，请原谅我坚持：我可以使用这个flash街景播放器使用自定义全景吗？[http://tinyurl.com/84wdwar](http://tinyurl.com/84wdwar)这与此 Flash 街景播放器 www.goo.gl/maps/xy6r 相同，与此 Flash 街景播放器 www.maps.google.com/help/maps/businessphotos/ 相同，仅从此处嵌入：www。 goo.gl/maps/Q79U。我知道我想要弄清楚的内容可能会令人困惑且过于具体，但我尽我所能来澄清它。我已经搜索了所有可用的信息，但没有明确的答案。

# java - 为具有菱形图块的游戏转换鼠标位置背后的数学原理是什么？

> ID：11146921
> 
> 赞同：3
> 
> 时间：2012-06-21T21:19:35.627
> 
> 标签：java, math, transform, isometric

我正在开发一个轴测图（等轴测图，但有角度视图）基于图块的游戏。

我的磁贴系统工作得很好，现在我正在处理输入问题。

瓷砖在视觉上与它们背后的逻辑（数组）不匹配（未对齐/偏移的菱形）。

在我使用“google-fu”找到的许多方法中，对输入应用转换（“旋转”）似乎是一种（代码量方面）易于实现且性能良好的方法。

问题是，对于我找到的所有来源，我无法真正掌握数字来自哪里，也无法掌握公式对它们的作用。

所以，我想解释一下“仿射变换”的数学公式（如果这是它的名字，因为我不确定......）

* * *

@Yochai_Timmer 对[这个问题](https://stackoverflow.com/questions/6915555/how-to-transform-mouse-location-in-isometric-tiling-map)的回答是我想要使用的，但我不明白这些值的来源（主要是*），也不知道对它们做了什么。

[大部分*]：“28”是瓷砖宽度和全高的一半，“14”是半高，“56”是全宽......可能......但这几乎就是我从中得到的全部，无论正确与否，我还是被卡住了。

* * *

如果它可以帮助您给我一个更清晰的答案，我自己的图块是`80 width`by `46 height`，我正在使用相同的方法应用（渲染）它们（图块的右上角`1x2y`位于图块的中心`1x1y`，依此类推.. .)

此外，我使用的是 Java，API 是 Slick2D。因此，如果您知道任何有助于公式数学的隐藏函数/类（例如：`Math.sen()`、、`Math.cos()`...）或一般问题，也欢迎您指出它们，因为它可能对我有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:32:40.497

转换背后的关键思想是将瓦片视为经过[线性转换](http://en.wikipedia.org/wiki/Linear_map)的普通矩形。要理解这一点，假设您从一个普通的正方形开始，如下所示：

```
 +-----+
  |     |
  |     |
  +-----+ 
```

给定这个正方形，您可以想到两个[向量](http://en.wikipedia.org/wiki/Vector_space)，它们仅通过取正方形的两侧来定义“上”和“右”的含义：

```
 +-----+     ^
  |     |     |
  |     |     |
  +-----+     +-----> 
```

我们称这些向量为 i 和 j。您可以想象通过旋转和倾斜正方形将这个正方形变成菱形。如果你这样做，你可以想想这两个向量 i 和 j 会发生什么：

```
 /\          ^
  /  \        /
 /    \      /
 \    /      \
  \  /        \
   \/          > 
```

注意 i 和 j 是如何旋转和缩放的。

确定一个点在投影下的正方形的数学背后的技巧是试图扭转这个过程。不是从正常的 i 和 j 向量开始并以倾斜/旋转的向量结束，而是从倾斜/旋转的 i 和 j 向量开始，然后尝试在变换下将世界转换回漂亮的方形网格。您执行的计算通过说“假设鼠标位于投影中的位置 (x, y)，如果我们取消此转换，它将具有什么坐标 (x', y')？” 这背后的所有数学都是在两个坐标空间之间转换的标准线性代数。有关如何执行此操作的说明，请考虑阅读[有关转换矩阵的 Wikipedia 文章](http://en.wikipedia.org/wiki/Transformation_matrix)，该文章描述了此过程的工作原理。

希望这可以帮助！

# iphone - 在 UIView 类中调用函数？在 Xcode 上使用 Obj C

> ID：11146928
> 
> 赞同：0
> 
> 时间：2012-06-21T21:20:23.803
> 
> 标签：iphone, objective-c, xcode

我正在尝试在 SecondViewController.m 中名为 ScanAnimation.m 的文件中调用一个名为 animateRight 的函数。

在 SecondViewController.m 的顶部，我有：

```
ScanAnimation * Animation = [[ScanAnimation alloc] init]; 
```

我打电话给：

```
[Animation animateRight]; 
```

我得到了错误：

'ScanAnimation' 未声明

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:23:39.597

您需要将 ScanAnimation 头文件导入到您正在调用的文件中。

因此，在 SecondViewController.m 中，您将`#import "ScanAnimation.h"`在顶部添加`#import "SecondViewController.h"`

# iphone - 检查 URL 请求是否已经在 NSOperationQueue

> ID：11146930
> 
> 赞同：1
> 
> 时间：2012-06-21T21:20:28.123
> 
> 标签：iphone, objective-c, ios, ipad, nsoperationqueue

我有一个`NSOperationQueue`接受一堆操作下载请求的。问题是如何检查我是否已经有特定的 URL `NSOperationQueue`？因为如果它已经在队列中，我不想再次排队。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:06:19.727

您可以子类化`NSOperation`（如果您还没有这样做），`URL`向您的子类添加一个属性，并检查您要添加的 URL 的操作是否已经在队列中：

```
if (![[queue.operations valueForKey:@"URL"] containsObject:myURL]) {
   //add operation...
} else {
   //operation with this URL is already in the queue...
} 
```

如果您有*很多*操作正在进行，您可能希望单独跟踪 URL，`NSMutableSet`这样对成员资格测试更有效。然后，您必须在操作完成时从集合中删除 URL。

# symfony - 在调试模式下串联的资产资产集合

> ID：11146939
> 
> 赞同：5
> 
> 时间：2012-06-21T21:21:03.390
> 
> 标签：symfony, assetic

我正在尝试在 Symfony 2 项目中使用 Assetic。我的 config.yml 中有以下设置：

```
# app/config/config.yml
assetic:
    debug:          %kernel.debug%
    use_controller: true
    filters:
        cssrewrite: ~
        yui_css:
            jar: /home/testing/bin/yuicompressor-2.4.7.jar
        less:
            node: /usr/bin/node
            node_paths: [/usr/local/bin/]
            apply_to: "\.less$"
    assets:
        all_js:
            inputs:
                - @FoundationViewBundle/Resources/public/js/*
            filters: [?yui_js]
        all_css:
            inputs:
                - @FoundationViewBundle/Resources/public/css/*
            filters: [less, ?yui_css] 
```

（如果您想知道，这些设置不会在 config_dev.yml 文件中被覆盖。）

这些集合由 Assetic 拾取并为它们创建路由。每个文件都有单独的路径，带有数字和不带文件扩展名的文件名。例如，对于“base.css”文件，下载文件（应用过滤器）的路径是“/assetic/all_css_part_1_base_1”。

然后，我将资产集合包含在我的 Twig 模板中，如下所示：

```
{% stylesheets '@all_css' %}
    <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}">
{% endstylesheets %} 
```

（对于“all_js”集合也是如此，但我将使用 css 端来演示我的问题。）

当 Twig 呈现我的模板时，它不使用为单个文件创建的路由，而是将“all_css”集合的“asset_url”显示为“/css/9118a5a_part_1.css”。

我正在使用开发前端控制器并测试了 Assetic 认为它处于调试模式。（不应用仅生产过滤器。）尽管文档另有说明，但文件仍在连接中。

由于行号不匹配，因此很难追踪这些文件中的问题，尤其是对于 JavaScript 错误。为了让 Twig 单独显示文件，我还需要做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T22:10:37.443

您必须`ouput`在树枝块中指定参数，如下所示。

```
{% javascripts '@all_js' output="assetic/js/all.min.js" debug=false %}
   <script type="text/javascript" charset="utf-8" src="{{ asset_url }}">
{% endjavascripts %}

{% stylesheets '@all_css' output="assetic/css/all.min.css" debug=false  %}
   <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}">
{% endstylesheets %} 
```

最好的办法是依赖***config.yml***`output`中指定的参数，但不幸的是它不起作用。它可以在转储资产时输出正确的文件，但不能在树枝中自动插入资产。**您必须像前面的示例一样指定它。**

 ***此处的调试参数是可选的，它旨在为特定集合强制调试模式并输出不同的文件。您也可以在***config.yml***中设置此参数。

```
assets:
    all_js:
        inputs:
            - @FoundationViewBundle/Resources/public/js/*
        filters: [?yui_js]
        output: "assetic/css/all.min.js"
        debug: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:00:20.803

您可以在模板中列出单独的资产，它会生成单独的文件，[如此处](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#combining-assets)所述。在生产中，它将被合并为 1 个文件。***

# javascript - 找不到 Twitter @anywhere JSDK 的许可信息 - 有人知道吗？

> ID：11146940
> 
> 赞同：0
> 
> 时间：2012-06-21T21:21:12.740
> 
> 标签：javascript, twitter, licensing, twitter-anywhere

我需要为网站中包含的每个第 3 方脚本提供许可信息，但我似乎找不到 Twitter 的[@anywhere JSDK](https://dev.twitter.com/docs/anywhere/welcome)脚本的许可信息。

我在 github 上找到了[Facebook JSDK](https://github.com/facebook/facebook-js-sdk)许可证，根据 Apache 许可证版本 2.0 获得许可。

所以，我给一些 Twitter 开发者发了推文，但他们没有回复，所以我想我会在这里发布这个问题。

另外 - 对于 meta.stackoverflow.com 来说，这是一个更好的话题吗？不完全确定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:54:39.653

代码的使用可能属于通用 Twitter[开发人员 API 条款](https://dev.twitter.com/terms/api-terms)。根据第 1 节，您对它的使用也属于 Twitter [TOS](http://twitter.com/tos)的范围：

> 1.  对 Twitter API 以及在 Twitter 上或通过 Twitter 提供给您的内容、文档、代码和相关材料（“Twitter 内容”）的所有使用均受且必须遵守这些规则。提醒一下，你和你的服务受[Twitter 服务条款的](http://twitter.com/tos)约束。

# javascript - onClick 单选按钮时更改特定地标的颜色

> ID：11146943
> 
> 赞同：0
> 
> 时间：2012-06-21T21:21:24.180
> 
> 标签：javascript, html, openlayers

我有一个使用 OpenLayers 的具有 10 多个地标的 KML 文件。我想要做的是，当我点击单选按钮时，一个特定的地标会改变它的颜色。

有人知道该怎么做吗？

谢谢。

**编辑：**

所以这是我到目前为止所拥有的：

```
 function init(){

        ///////////////////////////////////////////////
                  CONTROLS AND MAP STUFF
        //////////////////////////////////////////////     

        var myvector = new OpenLayers.Layer.Vector("myvector", {

            projection: map.displayProjection,
            styleMap: new OpenLayers.StyleMap(
                 { 'default': 
                    {
                    strokeColor: "#777777",
                    strokeOpacity: 1,
                    strokeWidth: "2",
                    fillColor: "#FFF900",
                    fillOpacity: 1,
                    pointRadius: 8,
                    pointerEvents: "visiblePainted",                        
                    graphicName: "circle",
                }
            }),
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: url_time,
                format: new OpenLayers.Format.KML({
                    extractStyles: false,
                    extractAttributes: true
                })
            })
        });

        map.addLayers([wms, wms2, myvector]);

        select = new OpenLayers.Control.SelectFeature(myvector);

        myvector.events.on({
            "featureselected": onFeatureSelect,
            "featureunselected": onFeatureUnselect
        });            
        map.addControl(select);
        select.activate();   
        map.zoomToExtent(new OpenLayers.Bounds(-53,-21,13,22));
    }

    function switchLabels() {

        /////// PROBABLY HERE IS THE PLACE TO DO THE TRICK ////////

        myvector.redraw();

    }

        ///////////////////////////////////////////////
                        SOME OTHER THINGS
        ////////////////////////////////////////////// 
```

和单选按钮：

```
<input name="button1" type="radio" value="button1" onClick="switchLabels()"> 
```

[这](https://gis.stackexchange.com/questions/9631/relabel-vector-points-in-openlayers)是显示此 switchLabels 的帖子，但我不知道如何更改由一个地标创建的点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:33:38.293

好的。我放弃了使用 KML 来做我想做的事。对于那些需要在 OpenLayers 中更改向量的某些属性的人，这里有一个可能的解决方案：

```
var features = [];
        features[0] = new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point(10,10),
            {
            name : "Hello",
            body : "world",
            }, {strokeColor: "#777777",strokeOpacity: 1,strokeWidth: "2",fillColor: "#FFF900",fillOpacity: 1,pointRadius: 8,pointerEvents: "visiblePainted",graphicName: "circle"});
        features[1] = new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point(15,10),
            {
            name : "Hello",
            body : "Mars",
            }, {strokeColor: "#777777",strokeOpacity: 1,strokeWidth: "2",fillColor: "#FFF900",fillOpacity: 1,pointRadius: 8,pointerEvents: "visiblePainted",graphicName: "circle"});

  ///////////// POPUPS //////////////

vector = new OpenLayers.Layer.Vector("LAYER",{
    eventListeners:{
        'featureselected':function(evt){
            var feature = evt.feature;
            var popup = new OpenLayers.Popup.FramedCloud("popup",
                OpenLayers.LonLat.fromString(feature.geometry.toShortString()),
                new OpenLayers.Size(350,350),
                feature.attributes.name + feature.attributes.body,
                                 null, false, onPopupClose
            );
    popup.maxSize = new OpenLayers.Size(350, 350);
       popup.minSize = new OpenLayers.Size(350, 350);
            feature.popup = popup;
            map.addPopup(popup);
        },
        'featureunselected':function(evt){
            var feature = evt.feature;
            map.removePopup(feature.popup);
            feature.popup.destroy();
            feature.popup = null;
        }
    }
});

function onPopupClose(evt) {
        select.unselectAll();
    }

vector.addFeatures(features);

// create the select feature control
var selector = new OpenLayers.Control.SelectFeature(vector,{
    click:true,
    autoActivate:true
}); 

map.addLayers([vector]);
map.addControl(selector);
map.zoomToExtent(new OpenLayers.Bounds(-53,-21,13,22));        
}

///////////////////// FUNCTION TO CHANGE THE VECTOR STYLE ///////////
function switchColors(p_ind,p_id) {
  if (eval('document.form.' + p_id).checked == 1){
    vector.features[p_ind].style = {
                strokeColor: "#777777",
                    strokeOpacity: 1,
                    strokeWidth: "2",
                    fillColor: "#FF0000",
                    fillOpacity: 1,
                    pointRadius: 8,
                    pointerEvents: "visiblePainted",                        
                    graphicName: "circle"
     };
    }
  else {
    vector.features[p_ind].style = {
          strokeColor: "#777777",
          strokeOpacity: 1,
          strokeWidth: "2",
          fillColor: "#FFF900",
          fillOpacity: 1,
          pointRadius: 8,
          pointerEvents: "visiblePainted",                        
          graphicName: "circle"
      };
    }
    vector.redraw();
} 
```

然后是收音机：

```
<form name="form" method="post" action="action.php">
<input name="p1" type="checkbox" value="p1" onClick="switchColors(0,'p1');">
<input name="p2" type="checkbox" value="p2" onClick="switchColors(1,'p2');">
</form> 
```

# internet-explorer - 如何获取对嵌入在另一个应用程序中的 Internet Explorer 实例的 COM 引用

> ID：11146948
> 
> 赞同：6
> 
> 时间：2012-06-21T21:21:37.493
> 
> 标签：internet-explorer, com, dynamics-crm

Outlook 的 Dynamics 插件通过 Internet Explorer 嵌入式窗口显示内容。我正在尝试找到一种方法来获取该嵌入式窗口的 SHDocVw.InternetExplorer COM 对象。我们的应用程序独立运行（它不是 Outlook 或 IE 插件），我们根本无法控制嵌入式 IE 窗口的创建。

当我使用：

```
Dim SWs As SHDocVw.ShellWindows
Set SWs = New SHDocVw.ShellWindows 
```

SWs 集合不包含对 Outlook 中嵌入式浏览器的引用（尽管我确实得到了对常规浏览器窗口的引用）。

使用 Spy++，我看到嵌入式 Outlook 窗口的以下窗口层次结构：

```
Window "xxxxxx" WindowsForms10.Window.8.app.0.5c39d4_r64_ad2
  - "" Shell Embedding
    - "" Shell DocObject View
      - "" Internet Explorer_Server 
```

层次结构中的最后两个窗口（Shell DocObject View 和 Internet Explorer_Server）与正在运行的 Internet Explorer 实例中的嵌入式查看器完全相同。

似乎必须有某种方法来获得对这些嵌入式浏览器的 COM 引用 - 任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T22:15:24.077

请参阅[知识库文章 249232](http://support.microsoft.com/kb/q249232/)。您可以使用辅助功能`IHTMLDocument2`从`Internet Explorer_Server`窗口中获取指针。它不漂亮，如果您在与目标进程不同的完整性级别上运行，它将无法工作。

根据您的操作，您可能会破坏目标应用程序的稳定性，因此请小心。并注意编组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-14T17:52:53.893

以下是使用 Hwnd 获取 HTMLDocument 的方法：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Diagnostics;
    using System.Drawing;
    using System.Runtime.InteropServices;
    using System.Text;
    using System.Windows.Forms;
    using mshtml;

    namespace HookBrowser
    {
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        #region API CALLS

        [DllImport("user32.dll", EntryPoint = "GetClassNameA")]
        public static extern int GetClassName(IntPtr hwnd, StringBuilder lpClassName, int nMaxCount);

        /*delegate to handle EnumChildWindows*/
        public delegate int EnumProc(IntPtr hWnd, ref IntPtr lParam);

        [DllImport("user32.dll")]
        public static extern int EnumChildWindows(IntPtr hWndParent, EnumProc lpEnumFunc, ref  IntPtr lParam);
        [DllImport("user32.dll", EntryPoint = "RegisterWindowMessageA")]
        public static extern int RegisterWindowMessage(string lpString);
        [DllImport("user32.dll", EntryPoint = "SendMessageTimeoutA")]
        public static extern int SendMessageTimeout(IntPtr hwnd, int msg, int wParam, int lParam, int fuFlags, int uTimeout, out int lpdwResult);
        [DllImport("OLEACC.dll")]
        public static extern int ObjectFromLresult(int lResult, ref Guid riid, int wParam, ref IHTMLDocument2 ppvObject);
        public const int SMTO_ABORTIFHUNG = 0x2;
        public Guid IID_IHTMLDocument = new Guid("626FC520-A41E-11CF-A731-00A0C9082637");

        #endregion

        public IHTMLDocument2 document;

        private void button1_Click(object sender, EventArgs e)
        {
            document = documentFromDOM();
            /// check that we have hold of the IHTMLDocument2...
            if (!(bool)(document == null))
            {
                this.Text = document.url;
            }
        }

        private IHTMLDocument2 documentFromDOM()
        {
            Process[] processes = Process.GetProcessesByName("iexplore");
            if (processes.Length > 0)
            {
                IntPtr hWnd = processes[0].MainWindowHandle;
                int lngMsg = 0;
                int lRes;

                EnumProc proc = new EnumProc(EnumWindows);
                EnumChildWindows(hWnd, proc, ref hWnd);
                if (!hWnd.Equals(IntPtr.Zero))
                {
                    lngMsg = RegisterWindowMessage("WM_HTML_GETOBJECT");
                    if (lngMsg != 0)
                    {
                        SendMessageTimeout(hWnd, lngMsg, 0, 0, SMTO_ABORTIFHUNG, 1000, out lRes);
                        if (!(bool)(lRes == 0))
                        {
                            int hr = ObjectFromLresult(lRes, ref IID_IHTMLDocument, 0, ref document);
                            if ((bool)(document == null))
                            {
                                MessageBox.Show("NoLDocument Found!", "Warning");
                            }
                        }
                    }
                }
            }
            return document;
        }

        private int EnumWindows(IntPtr hWnd, ref IntPtr lParam)
        {
            int retVal = 1;
            StringBuilder classname = new StringBuilder(128);
            GetClassName(hWnd, classname, classname.Capacity);
            /// check if the instance we have found is Internet Explorer_Server
            if ((bool)(string.Compare(classname.ToString(), "Internet Explorer_Server") == 0))
            {
                lParam = hWnd;
                retVal = 0;
            }
            return retVal;
        }
    }
} 
```

请参阅此链接以获取更多信息：

[http://www.xtremevbtalk.com/code-library/295336-internet-explorer-dom-using-objectfromlresult.html](http://www.xtremevbtalk.com/code-library/295336-internet-explorer-dom-using-objectfromlresult.html)

# git - 尝试合并分支，然后尝试变基 - 仍然无法强制 master 与 dev 分支相同

> ID：11146949
> 
> 赞同：0
> 
> 时间：2012-06-21T21:21:49.460
> 
> 标签：git, merge, rebase, git-merge, git-rebase

我一直在尝试将我的 dev 分支合并到 master 分支，但这是我第一次，我想我完全误解了术语。

**首先，我尝试了合并：**

我试图将 dev 合并到 master 中，但没有成功。在解决冲突时，我使用“我们的”，认为这意味着将“我的”开发分支合并到主分支中，但是当事情发生变化时，该站点看起来与开发分支结帐时的样子不同。

**然后我尝试了一个变基：**

然后我相当鲁莽地尝试了一个变基，认为这会迫使主分支与开发分支相同，但同样，可能使用了错误的选项来解决冲突，因为站点看起来与初始合并后的相同。

**此时，我可以强制master分支与dev分支相同吗？**

如果我切换回 dev 分支，站点看起来是正确的 - 如何将更改合并到 master 分支中，以便站点看起来与签出 dev 分支时相同？

或者在这一点上，有没有办法强制master与dev相同？

抱歉，如果这很容易，我发现 git 中的术语令人困惑，并且似乎不理解我读过的答案/教程 - 任何帮助将不胜感激。

顺便说一句，我正在使用 Mac Git 客户端 Tower。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:26:51.497

如果您想“强制主人与开发者相同”，则始终有效的程序是：

*   删除主分支 ( `git checkout dev; git branch -D master`)
*   `git branch master; git checkout master`从 dev ( )重新创建 master 分支

...现在这两个分支是相同的（相同`HEAD`，因此历史相同）。

您的问题很可能是您在拙劣的合并后没有重置。理论上，无论是变基（具有共同祖先）还是合并都会产生一个分支，该分支集成来自两个分支的更改。如果合并没有按您希望的那样进行，请重置回之前并重试。在您满意之前不要提交结果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:30:02.873

我不知道 Mac 客户端，但我一直在使用 Windows/linux 的 git 客户端和 eclipse 的插件，它们都有强制更新的选项。

如果您使用图形界面进行推送，应该会出现一个选项，否则您肯定需要在命令行中添加选项。

但是在进行严厉的强制更新之前，您是否尝试过：

-提交您的更改

- 从主分支拉取

- 使用合并工具，在 Eclipse 中，您还可以比较来自其他上游的分支。解决冲突后，再次添加所有文件`git add .`

-再次提交！

- 将您的分支推送到主分支

希望了解Tower的人可以帮助您更多！

# python - python日志过滤器

> ID：11146954
> 
> 赞同：2
> 
> 时间：2012-06-21T21:22:16.453
> 
> 标签：python, python-3.x

我真的对日志中的这个过滤器感到困惑。我已阅读文档和日志记录食谱。
我有一个用几个文件编写的应用程序。每个文件都有一个类及其例外。
- 主文件：mcm
- 在 mcm 中我导入配置器并启动它的类
- 在配置器中我导入 rosApi 并启动它的类

我想要实现的目标：
- 在主文件中，决定我要记录哪些模块及其级别。
- 一个处理程序。可在主文件中配置

这个想法是我想在一个文件中打开和关闭给定模块的调试，每个运行时可自定义，并带有传递给主文件的选项。

例如：
如果我通过 -d 它将（另外）打印来自配置器的所有调试信息，但不打印 rosApi。
如果我通过 -D 它将打印来自配置器和 rosApi 的所有调试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:34:03.373

我所做的是创建一个记录器模块，类似于以下内容：

```
import os
import logging

logger = logging.getLogger()
fh = logging.handlers.RotatingFileHandler(logfile, maxBytes=10000000, backupCount=10)
fm = logging.Formatter('%(asctime)s %(module)s %(levelname)s %(message)s')
fh.setFormatter(fm)
logger.addHandler(fh)
level = os.environ['LOGGING'].upper()
level = getattr(logging, level)
logging.getLogger().setLevel(level) 
```

然后我`import logger`在所有模块的顶部做一个。

# php - PHP PNG 24 位清洁透明度

> ID：11146955
> 
> 赞同：3
> 
> 时间：2012-06-21T21:22:23.487
> 
> 标签：php, png, transparency

我一直在尝试以干净的 24 位 alpha 透明度上传 PNG。经过大量研究后，我设法让它工作起来，但是透明度似乎是低质量的 8 位，正如您在此屏幕截图中看到的那样：

[http://cozomo.com/apple.png](http://cozomo.com/apple.png)

非常感谢任何有助于实现干净的 PNG 上传和调整大小的 24 位平滑透明度。我当前的代码如下。

```
if($extension=="png")
    {
        $uploadedfile = $_FILES['photo']['tmp_name'];
        $src = imagecreatefrompng($uploadedfile);
    }

        $dest_x = 1400; 
        $dest_y = 1200;

        if ($width > $dest_x or $height > $dest_y) { 

                if ($width >= $height) { 
                    $fullSize_x = $dest_x; 
                    $fullSize_y = $height*($fullSize_x/$width); 
                } else { 
                    $fullSize_x = $width*($fullSize_y/$height); 
                    $fullSize_y = $dest_y; 
                } 
        }

        $fullSize=imagecreatetruecolor($fullSize_x,$fullSize_y);

    //TEST
    $black = imagecolorallocate($fullSize, 0, 0, 0);
    imagecolortransparent($fullSize, $black);
    //TEST END

    // OUTPUT NEW IMAGES
    imagecopyresampled($fullSize,$src,0,0,0,0,$fullSize_x,$fullSize_y,$width,$height);

    imagepng($fullSize, "/user/photos/".$filename);

    imagedestroy($fullSize);

  [1]: http://i.stack.imgur.com/w8VBI.png 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:54:15.900

要保存您必须使用的完整 alpha 通道[`imagesavealpha`](http://www.php.net/manual/en/function.imagesavealpha.php)，请在保存 png 之前放置它

```
imagealphablending($fullSize, false);
imagesavealpha($fullSize, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:19:39.890

这是修改后的代码，感谢 Musa，感谢任何有同样问题的人

```
function processPNG($pngImage) {
        $black = imagecolorallocate($pngImage, 0, 0, 0);
        imagecolortransparent($pngImage, $black);
        imagealphablending($pngImage, false);
        imagesavealpha($pngImage, true);
    }    

   if($extension=="png")
{
    $uploadedfile = $_FILES['photo']['tmp_name'];
    $src = imagecreatefrompng($uploadedfile);
}

    $dest_x = 1400; 
    $dest_y = 1200;

    if ($width > $dest_x or $height > $dest_y) { 

            if ($width >= $height) { 
                $fullSize_x = $dest_x; 
                $fullSize_y = $height*($fullSize_x/$width); 
            } else { 
                $fullSize_x = $width*($fullSize_y/$height); 
                $fullSize_y = $dest_y; 
            } 
    }

    $fullSize=imagecreatetruecolor($fullSize_x,$fullSize_y);
    if ($extension == "png") processPNG($fullSize);

// OUTPUT NEW IMAGES
imagecopyresampled($fullSize,$src,0,0,0,0,$fullSize_x,$fullSize_y,$width,$height);

imagepng($fullSize, "/user/photos/".$filename);

imagedestroy($fullSize); 
```

# javascript - 将 window.onresize 合并到 OO JS 类中

> ID：11146956
> 
> 赞同：0
> 
> 时间：2012-06-21T21:22:29.977
> 
> 标签：javascript, window-resize

我只是想更好地构建我的 Javascript 并想知道如何将 window.onresize 合并到返回的对象中，如下所示：

```
var baseline = function(){

    var tall, newHeight, target, imgl, cur, images = [];

    return {

        init: function(selector, target){
            this.images = document.querySelectorAll(selector);
            this.target = target;
            this.setbase(this.images);
            window.onresize = this.setbase(this.images);
        },

        setbase: function(imgs){
            this.imgl = imgs.length;
            if(this.imgl !== 0){
                while(this.imgl--){
                    this.cur = imgs[this.imgl];
                    this.cur.removeAttribute("style");
                    this.tall = this.cur.offsetHeight;
                    this.newHeight = Math.floor(this.tall / this.target) * this.target;
                    this.cur.style.maxHeight = this.newHeight + 'px';
                }
            } else {
                return false;
            }
        }

    }

}(); 
```

这是人们会这样做的方式吗，这会奏效吗？谢谢

编辑：

像这样调用：

```
window.onload = function(){
        baseline.init('img', '24');
    }; 
```

我希望在调整窗口大小时，使用与初始 init 函数调用相同的参数调用baseline.init...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:41:11.490

这是主要错误

```
init: function(selector, target){
    this.images = document.querySelectorAll(selector);
    this.target = target;
    this.setbase(this.images);
    // This line says call setbase now and assign the result of that
    // as the onresize handler
    window.onresize = this.setbase(this.images);
}, 
```

*   你的`this.images`并不指向`var images = []`你创建的。这适用于您使用原型样式对象时。你应该只`images`在你的函数中使用。
*   您的某些变量看起来仅在 setBase 中使用，它们应该是本地的
*   查看您的对象，很难说出它应该做什么，听起来您将代码包装在一个对象中只是为了将其包装到一个对象中。基线是什么意思？

这是您的代码的更好版本，您应该阅读并理解[http://www.joezimjs.com/javascript/javascript-closures-and-the-module-pattern/](http://www.joezimjs.com/javascript/javascript-closures-and-the-module-pattern/)和[http://js-bits.blogspot.com/ 2010/08/javascript-inheritance-done-right.html](http://js-bits.blogspot.com/2010/08/javascript-inheritance-done-right.html)以便您决定要使用的模式以及它们的实际工作方式。您正在混合两种模式，即使您不打算这样做。诀窍是使用您编写它的方式（模块模式），无需`this`在代码中使用，它们实际上是*模块中的局部变量*

```
var baseline = function(){
    // Don't use "this.tall", just "tall" gets you the variable
    // Class variables, are you sure you need them throughout the class
    var tall, newHeight, target, imgl, cur, images = [];

    // Different name for the parameter so it doesn't get confused with 
    // the class variables
    function init(selector, pTarget) {
        images = document.querySelectorAll(selector);
        target = pTarget;
        setBase();
        // Since we're not using this, you 
        // can just reference the function itself
        window.onresize = setBase
    }

    // Most JS developers name methods using camelCase
    function setBase() {
        imgl = imgs.length;
        if(imgl !== 0){
            while(imgl--){
                cur = imgs[imgl];
                cur.removeAttribute("style");
                tall = cur.offsetHeight;
                newHeight = Math.floor(tall / target) * target;
                cur.style.maxHeight = newHeight + 'px';
            }
            // should you return true here? what does returning 
            // something even mean here?
        } else {
            return false;
        }
    }

    // Return just the public interface
    return {    
        init: init
        setBase: setBase
    };   
}(); 
```

# php - IIS PHP 500 错误

> ID：11146960
> 
> 赞同：1
> 
> 时间：2012-06-21T21:22:37.043
> 
> 标签：php, iis-6

我有一个在两个地方运行的应用程序——一个在 OS X 上使用 PHP 5.3 和 Apache 的开发 MAMP 服务器，以及一个使用 PHP 5.3 的生产 IIS 6.0 服务器。

问题是，该应用程序在 Apache 上运行良好。没有错误、警告或任何东西。

但是当我在 IIS 服务器上调用实用程序类的静态函数时，我收到 500 错误。问题是，函数永远不会被调用——在函数的开头放置一个“echo”什么都不做，这告诉我问题不是函数*内部*的代码......上课很好。

检查日志 ( `C:\Windows\temp\php-errors.log`) 未显示与此问题相关的任何内容，但它正在正确记录其他错误（意外字符和其他任何内容）。

这是被调用的函数和脚本停止执行的地方：

```
json_encode(Utilities::ContextifyToUser(Article::getArticlesInCollectionOfUser($user), $user); 
```

分离`json_encode`和`getArticlesInCollection`表明它们都在工作并返回正确的值。杀死它的是“上下文化”功能。

这是 contextify 函数，在名为 的类中定义`Utilities`：

```
public static function ContextifyToUser($obj = array(), $user = null){
        if(is_null($user) || !is_array($obj)){
            return null;
        }

        foreach($obj as $key => $value){
            $obj[$key] = $value->contextifyToUser($user);
        }

        return $obj;
    } 
```

正如我之前提到的，函数中的任何代码都不会被调用。如果我在函数定义后加上“echo 'hello'”，它就永远不会被调用。

是我的代码，还是 IIS 有点奇怪？考虑到这在 Apache 中完美运行，我认为是后者......

我还想指出，尽管更改了 display_errors INI 并使用`error_reporting(E_ALL)`. 简单地抛出一个 500 错误，并且脚本在该点之后停止执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:42:04.530

事实证明，这是我在其中一个 contextifyToUser 中的函数之一，它假设变量是一个类，但在某些情况下它为空。这在我的开发机器中没有发生，因为它使用了一组不同的输入数据。

它。恨。IIS。我仍然不确定为什么没有记录错误，也没有抛出异常或*任何东西*。

# c# - C#控制台应用程序保存excel文件（不提示）

> ID：11146961
> 
> 赞同：0
> 
> 时间：2012-06-21T21:22:42.600
> 
> 标签：c#, console-application, export-to-excel

我想编写一个控制台应用程序，我将在其中将数据提取到数据集中。然后我想将文件保存到本地硬盘驱动器。我的 webapp 中有代码提示用户保存它，但我想将它保存到服务器的本地硬盘驱动器并向用户发送电子邮件。到目前为止，这是我的代码：

```
Response.Clear();
Response.ContentType = "application/octet-stream";
Response.AddHeader("Content-Disposition", "attachment; filename=Test.xls;");
Response.Charset = "";

System.IO.StringWriter sw = new System.IO.StringWriter();
HtmlTextWriter htw = new HtmlTextWriter(sw);
dg.RenderControl(htw);
Response.Write("<style>.fraction { mso-number-format:#\\/#; }</style>");                   
Response.Write(sw.ToString());

Response.End(); 
```

我将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:34:33.373

浏览器提示用户保存文件，而不是您的 Web 应用程序。如果您有一个本地执行的控制台应用程序，您可以绕过所有这些，只需打开一个[`FileStream`](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)用于编写的，并将您的`HtmlTextWriter`与它相关联。如果您明确编写代码来执行此操作，它只会提示用户覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:43:06.043

这是我的控制台应用程序的一个片段，它在没有用户提示的情况下保存文件。您必须为 Excel 添加 COM 引用。

```
 private void btnExcel_Click(object sender, EventArgs e)
    {
        Microsoft.Office.Interop.Excel.Application app = new Microsoft.Office.Interop.Excel.Application();
        app.Visible = true;
        Microsoft.Office.Interop.Excel.Workbook wb = app.Workbooks.Add(1);
        Microsoft.Office.Interop.Excel.Worksheet ws = (Microsoft.Office.Interop.Excel.Worksheet)wb.Worksheets[1];
        int i = 1;
        int i2 = 1;
        foreach (ListViewItem lvi in lvwResults.Items)
        {
            i = 1;
            foreach (ListViewItem.ListViewSubItem lvs in lvi.SubItems)
            {
                ws.Cells[i2, i] = lvs.Text;
                i++;
            }
            i2++;
        }

        wb.SaveAs(String.Format(@"C:\MyReportABC-{0}-{1}", String.Format("{0:yyyyMMdd}", DateTime.Today), String.Format("{0:hhmm}", DateTime.Now)));
        wb.Close(true);
    } 
```

输出一个名为 MyReportABC-20120621-0539.xls 的文件（每次都更改，您也可以在字符串中添加用户 ID）

# android - 如何在状态栏中显示信息但不在android的通知中显示？

> ID：11146964
> 
> 赞同：1
> 
> 时间：2012-06-21T21:22:44.133
> 
> 标签：android, notifications, statusbar, android-notification-bar

我想在 android 状态栏中显示一些信息。但我不希望在通知中显示任何内容。但是当我向下拖动状态栏并看到通知栏时，我看到一个空白的通知位置。如果有人碰巧知道我怎样才能摆脱在通知栏中显示这个空白的通知位置？

我已阅读此链接[http://developer.android.com/reference/android/app/Notification.html](http://developer.android.com/reference/android/app/Notification.html)并尝试创建宽度和高度为零且没有通知图像和文本的自定义通知布局。但这没有帮助。我仍然在通知栏中看到通知的空白区域。

这是自定义通知布局

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout"
android:layout_width="0dp"
android:layout_height="0dp"
android:padding="0dp" >
</RelativeLayout> 
```

这是我的代码膨胀通知

```
public class BatteryStatusBarActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final int HELLO_ID = 1;

    //Get a reference to the NotificationManager:
     String ns = Context.NOTIFICATION_SERVICE;
     NotificationManager mNotificationManager = (NotificationManager)getSystemService(ns);

    //Instantiate the Notification:
    int icon = R.drawable.notification_icon;
    CharSequence tickerText = "Hello";
    long when = System.currentTimeMillis();

    Notification notification = new Notification(icon, tickerText, when);

    //Define the notification's message and PendingIntent:
    Context context = getApplicationContext();
    Intent notificationIntent = new Intent(this, BatteryStatusBarActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    notification.setLatestEventInfo(context, tickerText, tickerText, contentIntent);
    // redefine content view for notification
    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.custom_notification);
    notification.contentView = contentView;

    //Pass the Notification to the NotificationManager:
    mNotificationManager.notify(HELLO_ID, notification);

    //mNotificationManager.cancel(HELLO_ID);    
}
} 
```

# c# - c# Tuple - Tuple 的实际用途是什么

> ID：11146966
> 
> 赞同：7
> 
> 时间：2012-06-21T21:22:53.430
> 
> 标签：c#

我在网上查看示例，`Tuple`但我没有看到它的任何理想用途。

意思是，它似乎是一个存储变量的地方。

有没有实际用途`Tuple`。我喜欢做的是将一个值传递给元组，然后让它返回 3 个都是字符串的值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T21:27:18.387

元组与列表相对应。

虽然 List 存储 0-N 个*相同*类型的项目，但 Tuple 存储 1-M 个（可能）*不同*类型的项目，其中 N 是无界的，而 M 是静态固定/定义的。

这些项目中的每一个都可以通过它们的名称（或碰巧对齐时的“索引”）以强类型的方式访问。

因此它们*类似于*匿名类型（实际上，这更像是“记录”而不是“元组”，因为名称可以任意选择）：

```
new { _0 = value0, _1 = value1, /* etc, as needed */ } 
```

但是 Tuple 类型是*指定类型*的（它们由一堆不同的类支持，就像`Action`or一样`Func`），因此可以显式指定*特定*的Tuple 类型（例如在方法签名中），这是匿名类型不能使用的。

While I would say that the practical use of Tuples in C# is hampered by the lack of support (e.g. no decomposition, no application, etc.), they are used *all the* time in languages like Scala. The C# approach is generally to "create a new named type", but introduces the `Tuple` types as another available tool.

(A big place where Tuples are very useful is in intermediate computations -- but C# has anonymous types, which as seen with LINQ, fulfill this role quite well in most cases where the computations are done within the same method.)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T21:34:04.827

Microsoft .NET 4.0 introduces type called `Tuple` which is a fixed-size collection of heterogeneously typed data. Like an array, a tuple has a fixed size that can't be changed once it has been created. Unlike an array, each element in a tuple may be a different type, and a tuple is able to guarantee strong typing for each element. This is really handy in scenario otherwise be achieved using custom types or struct.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T21:25:13.400

元组 sa 容器。你可以在里面存储任何东西

对于 3 个项目，它被称为 Triple。4 项目四倍等。

本质上，您可以将物品放入其中。

这是一个[例子](http://www.dotnetperls.com/tuple)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-21T21:26:59.547

Tuple 是一个类型化的、不可变的和通用的构造。它是用于存储概念相关数据的有用容器。一个带有注释成员和附加方法的简单类对于重要的事情更有用。但是元组可用于存储杂项但相关的信息。元组在信息隐藏领域存在不足。它是一个有用的短期容器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-10T23:54:23.050

A practical use-case: let's say you want to pass around a list of structured data between different internal components of a software.

1.  You can either declare a class which represents the structured data. In this case this class has to be dumb ideally, it'll only contain a bunch auto properties. You probably declare this in an interface as an embedded class (but then you have to prefix it with the interface name), or in the same namespace as the interface. At some point this maybe unnecessary plumbing code to define a sole class for this purpose.
2.  Or you can use a tuple. This way you don't have to define a class for all of that, you can still remain type safe. You may loose the advantage of naming the properties, which can be problematic if you have many properties, maybe even from the same type.

More concrete example: You want to set a column sorting for a `TreeListView` 3rd party component. You initiate the sorting from the controller object, which calls the right function (`SortByColumns`) on the view, which calls the function on your wrapper class around the 3rd party component, which calls the 3rd party components' proper functions.

1.  If you define a DTO (dtata transfer object) object:

    ```
    // Somewhere around an interface
    class ColumnSortItem
    {
        string Caption { get; set; }
        SortOrder Order { get; set; }
    }

    // Other places:
    void SortByColumns(IList<ColumnSortItem> pColumnSortItems); 
    ```

2.  Tuples:

    ```
    void SortByColumns(IList<Tuple<string, SortOrder>> pColumnSortItems); 
    ```

I don't say tuples are always the better choice, but notice that we just had to **declare a certain order and structure of items**. Note, that in this concrete example it's pretty clear what is the string part of the tuple and what is the SortOrder part.

Addition: the actual calls of the function:

1.  DTO

    ```
    controller.SortByColumns(new List<ColumnSortItem>() {
        new ColumnSortItem() { Caption = "Record", Order = SortOrder.Ascending },
        new ColumnSortItem() { Caption = "Description", Order = SortOrder.Ascending }
      }); 
    ```

2.  Tuple

    ```
    controller.SortByColumns(new List<Tuple<string, SortOrder>>() {
        new Tuple<string, SortOrder>("Record", SortOrder.Ascending),
        new Tuple<string, SortOrder>("Description", SortOrder.Ascending)
      }); 
    ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T21:27:33.427

Tuple is a lightweight class to group several items together. It's an alternative to defining a new class any time you want to group two items together.

I find it useful when I want to return multiple items from a single method, but I can't use ref or out parameters.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-21T21:27:40.793

It seems like it's there for temporary data storage; very localized use. These are occasions when writing your own class is either too time consuming or really not worth it because the data's life time is so short.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-26T08:51:46.643

The .NET Framework 4 introduce the System.Tuple class for creating tuple objects that contain structured data. It also provides generic tuple classes to support tuples that have from one to eight components . Here is example in C#

```
var objTupe = new System.Tuple<string, string, double,long>"Mike","Anderson",29000,9999999999);
 Response.Write("Item1 : " + objTupe.Item1);
 Response.Write("<br/>Item2 : " + objTupe.Item2);
 Response.Write("<br/>Item3 : " + objTupe.Item3);
 Response.Write("<br/>Item4 : " + objTupe.Item4); 
```

# r - 合并较大数据的有效替代方法。框架 R

> ID：11146967
> 
> 赞同：29
> 
> 时间：2012-06-21T21:22:58.977
> 
> 标签：r, merge, dataframe, plyr, data.table

我正在寻找一种有效的（计算机资源方面的和学习/实施方面的）方法来合并两个较大的（大小>100 万/300 KB RData 文件）数据帧。

基本 R 中的“合并”和 plyr 中的“加入”似乎耗尽了我所有的内存，有效地使我的系统崩溃。

示例
负载[测试数据框](https://github.com/edielivon/Useful-R-functions/raw/master/Example%20files/test.RData)

并尝试

```
test.merged<-merge(test, test) 
```

或者

```
test.merged<-join(test, test, type="all") 
```

* * *

以下帖子提供了合并和替代方案的列表：
[如何加入（合并）数据帧（内部、外部、左侧、右侧）？](https://stackoverflow.com/questions/1299871/how-to-join-data-frames-in-r-inner-outer-left-right)

以下允许对象大小检查：
[https ://heuristically.wordpress.com/2010/01/04/r-memory-usage-statistics-variable/](https://heuristically.wordpress.com/2010/01/04/r-memory-usage-statistics-variable/)

[匿名](https://stackoverflow.com/questions/10454973/how-to-create-example-data-set-from-private-data-replacing-variable-names-and-l/10458688#10458688)数据

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T23:40:32.663

以下是 data.table 与 data.frame 方法的一些时间安排。
使用 data.table 非常快。关于内存，我可以非正式地报告这两种方法在 RAM 使用方面非常相似（在 20% 以内）。

```
library(data.table)

set.seed(1234)
n = 1e6

data_frame_1 = data.frame(id=paste("id_", 1:n, sep=""),
                          factor1=sample(c("A", "B", "C"), n, replace=TRUE))
data_frame_2 = data.frame(id=sample(data_frame_1$id),
                          value1=rnorm(n))

data_table_1 = data.table(data_frame_1, key="id")
data_table_2 = data.table(data_frame_2, key="id")

system.time(df.merged <- merge(data_frame_1, data_frame_2))
#   user  system elapsed 
# 17.983   0.189  18.063 

system.time(dt.merged <- merge(data_table_1, data_table_2))
#   user  system elapsed 
#  0.729   0.099   0.821 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-21T22:23:58.520

这是强制性`data.table`示例：

```
library(data.table)

## Fix up your example data.frame so that the columns aren't all factors
## (not necessary, but shows that data.table can now use numeric columns as keys)
cols <- c(1:5, 7:10)
test[cols] <- lapply(cols, FUN=function(X) as.numeric(as.character(test[[X]])))
test[11] <- as.logical(test[[11]])

## Create two data.tables with which to demonstrate a data.table merge
dt <- data.table(test, key=names(test))
dt2 <- copy(dt)
## Add to each one a unique non-keyed column
dt$X <- seq_len(nrow(dt))
dt2$Y <- rev(seq_len(nrow(dt)))

## Merge them based on the keyed columns (in both cases, all but the last) to ...
## (1) create a new data.table
dt3 <- dt[dt2]
## (2) or (poss. minimizing memory usage), just add column Y from dt2 to dt
dt[dt2,Y:=Y] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:29:24.553

你必须在R中进行合并吗？如果不是，请使用简单的文件连接合并底层数据文件，然后将它们加载到 R 中。（我意识到这可能不适用于您的情况 - 但如果适用，它可以为您省去很多麻烦。）

# google-app-engine - Restlet 和 GAE 的奇怪行为

> ID：11146968
> 
> 赞同：0
> 
> 时间：2012-06-21T21:22:59.707
> 
> 标签：google-app-engine, restlet

我有来自 Android 客户端`Restlet`的以下代码。`Google AppEngine`

```
ClientResource clientResource = new ClientResource(RESTLET_TEST_URL);
ProductResource productResource = clientResource.wrap(ProductResource.class);
productResource.store(mProduct);
Status status = clientResource.getResponse().getStatus();
Toast.makeText(this, "Status: "+ status.getDescription(), Toast.LENGTH_SHORT).show();
clientResource.release(); 
```

该`.store()`方法类似于 PUT 请求。奇怪的是，当我连接到开发服务器时，这工作正常，但在实际的 AppEngine 站点上，什么都没有发生。我只是`Status: OK`表明请求已通过。

我无法排除故障，因为我只能在开发服务器中执行此操作，并且工作正常。

关于问题可能是什么或如何解决这个问题的任何想法？

作为参考，服务器端的代码是：

```
if (product != null ) {
    if (new DataStore().putToDataStore(product) ) {
    log.warning("Product written to datastore");
} else {
        log.warning("Product not found in datastore");
    }
} 
```

这只是使用`Objectify`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:14:07.990

原来这是一个已知问题。看[这里](http://restlet.tigris.org/issues/show_bug.cgi?id=1219)

解决方案是使用`clientResource.setEntityBuffering(true);`. 但是，请注意，此方法仅适用于 Android 客户端的候选版本，而不适用于稳定版本。

# c#-4.0 - 如何阻止网格视图创建更多行

> ID：11146973
> 
> 赞同：0
> 
> 时间：2012-06-21T21:23:14.617
> 
> 标签：c#-4.0, gridview

我正在通过数据适配器创建网格视图，并且所有列和行都是从数据库创建的，但是出现的问题是，当创建所有行时，会出现另一个空行，我想停止生成该行，并且当我单击并在那个额外的行创建了另一个新行我想停止所有额外的行如何做到这一点任何帮助？？？

这是我正在使用的网格视图代码

```
 conn.ConnectionString = s;
            conn.Open();
            dAdapter = new SqlDataAdapter(query, s);
            dTable = new DataTable();
            DataView myDataView = dTable.DefaultView;
            dAdapter.Fill(dTable);
            BindingSource bndSource = new BindingSource();
            bndSource.DataSource = dTable;
            dataGrid.DataSource = bndSource;
            dataGrid.Columns["StudentId"].ReadOnly = true;
            dataGrid.Columns["StudentName"].ReadOnly = true;
            conn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:13:14.953

尝试设置`AllowUserToAddRows`为`false`.

# php - 如何将 PHPSESSID cookie 限制为 https？

> ID：11146974
> 
> 赞同：3
> 
> 时间：2012-06-21T21:23:21.180
> 
> 标签：php, security, session

我想限制 phpsessid cookie 仅用于管理员会话期间的安全连接，但允许 phpsessid 用于普通用户的不安全连接。每次在调用 session_start() 之前运行脚本时都需要调用 session_set_cookie_params，但我需要先调用 session_start() 来检查告诉我用户是否是管理员的会话数据。

我希望只有通过 https（管理面板、登录等）才能访问的页面和站点的其余部分（文章等）可通过普通用户的正常连接和管理员的安全连接访问。使管理员的sid永远不暴露；暴露 sid 并仅依靠 IP、用户代理等检查是不够的。重要的交易将受到密码保护，但不可能对所有交易都进行密码保护，这会令人讨厌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:31:28.860

在 PHP 中，您设置[session.use_only_cookies](http://www.php.net/manual/en/session.configuration.php#ini.session.use-only-cookies)和[session.cookie_secure](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-secure)配置选项。这可以在运行时或在您的 php.ini 中完成。cookie_secure 是一个糟糕的名字，但它告诉客户端这个 cookie 必须始终通过 https 传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:32:36.237

一个简单的方法可能是使用[session_name()](http://us.php.net/session_name)并设置会话的名称。然后，仅在管理页面和 HTTPS 的页面上启动“管理会话”。

# c# - DatePicker 数据绑定将默认值设置为 1/1/0001 WPF c#

> ID：11146977
> 
> 赞同：3
> 
> 时间：2012-06-21T21:23:33.440
> 
> 标签：c#, wpf, datetime, data-binding, datepicker

我有一个 DatePicker 绑定到对象内的 DataTime，并且在运行时，而不是 DatePicker 中的字符串“Select a Date”，而是显示“1/1/0001”，这使得很难使用实际的日历。当我将 DatePicker 与字符串绑定时，我没有遇到问题，但是将其更改为 DateTime 就可以了。请让我知道这是如何工作的。这是我到目前为止所拥有的：

在 XAML 中，我有：

```
<DatePicker Grid.Column="4" Grid.Row="9" Name="dueDateBox" VerticalAlignment="Center">
    <DatePicker.SelectedDate>
        <Binding Path="DueDate" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
            <Binding.ValidationRules>
                <my:DateRangeRule/>
            </Binding.ValidationRules>
        </Binding>
    </DatePicker.SelectedDate>
</DatePicker> 
```

在 C# 中，我有：

```
public DateTime DueDate
{
    get { return dueDate; }
    set
    {
        if (DueDate != null) || !DueDate.Equals(value))
        {
            dueDate = value;
            OnPropertyChanged("DueDate");
        }
    }
} 
```

我也有一个依赖属性集，不确定这是否起作用：

```
public static readonly DependencyProperty DueDateProperty =
        DependencyProperty.Register("DueDate", typeof(DateTime),
        typeof(UpdateJobDialog), new PropertyMetadata(DateTime.Now)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T21:25:59.643

可能有助于使用 DateTime？而不是 DateTime，因为 DateTime 不可为空，所以您设置为默认值 1/1/0001，而不是 null，这将导致请选择您习惯的日期消息。

```
public DateTime? DueDate
{
    //Need to change the type of the private variable as well
    get { return dueDate; }
    set
    {
        if (DueDate != null) || !DueDate.Equals(value))
        {
            dueDate = value;
            OnPropertyChanged("DueDate");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:42:25.443

您没有将`DueDateProperty`依赖项属性连接到您的`DueDate`属性。试试这个：

```
public DateTime DueDate
{
    get { return (DateTime)GetValue(DueDateProperty); }
    set { SetValue(DueDateProperty, value); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T14:31:31.997

我在将日期属性绑定到日期选择器时遇到了同样的问题。无论我尝试什么，显示的值都是 01/01/0001。我最终通过将第二个属性设置为专门绑定到 xaml 日期选择器的字符串来解决此问题，如果我的日期为空，则返回 string.empty

这解决了它......（VB中的代码）

```
Public Property ClosedDateDTP() As String
    Get
        If _closedDate = Nothing Then
            Return String.Empty
        Else
            Return _closedDate.ToString
        End If
    End Get
    Set(value As String)
        If value = Nothing Then
            _closedDate = Nothing
        Else
            _closedDate = CDate(value)
        End If
    End Set
End Property 
```

XAML 日期选择器代码...

```
 <DatePicker x:Name="dtpClosedDate"
                SelectedDate="{Binding ClosedDateDTP, Mode=TwoWay}"
                HorizontalAlignment="Left"
                Margin="284,120,0,0"
                VerticalAlignment="Top">
    </DatePicker> 
```

# c# - 在 NAudio waveOut 上无法流畅播放，WaveProvider 被清空太快

> ID：11146982
> 
> 赞同：0
> 
> 时间：2012-06-21T21:23:58.507
> 
> 标签：c#, naudio

我正在尝试创建一个类似于 NAudio 中的网络聊天演示的应用程序。

然而，在接收/收听端，我正在缓冲接收到的音频数据包，直到在调用 WaveProvider.addSamples() 之前获得其中的 2 个。我已经尝试过根本不缓冲，缓冲大量等，但问题仍然存在，所以我认为这不是明确的原因。

我遇到的问题是，无论我尝试添加采样的速度有多快，播放音频时 WaveProvider 都会反复耗尽（BufferedBytes == 0）。我运行了一些测试，我的调试输出是这样的：

1.  0.690s WaveProvider 空
2.  0.695s 样本添加到 WaveProvider
3.  0.871s WaveProvider 空
4.  0.875s 样本添加到 WaveProvider
5.  1.013s WaveProvider 空

... ETC。

WaveProvider 直到每 150 毫秒左右才显示“空”，这是有道理的，因为 addSamples 调用添加了与 100 毫秒音频数据相对应的数据。

有趣的部分是从 WaveProvider 为空到尝试下一个 addSamples 之间的 4 毫秒到 5 毫秒的时间。缓冲区大小没有变化或加快 addSamples 的努力似乎减少了这种差距，因此播放的音频总是有这些微小的静音间隙，听起来像爆裂声/中断。

我想知道这个微小的时间延迟是否可能是由于 WaveOut 设备正在播放时 WaveProvider 被锁定而导致的，因此我被锁定无法将样品添加到 WaveProvider 直到它完成播放？有没有办法纠正这个问题？

我的初始化代码如下：（我希望它们应该是正常的）

WaveProvider = new BufferedWaveProvider(new WaveFormat(16000, 1));

WaveProvider.BufferDuration = new TimeSpan(0, 0, 10);

AudioPlayer = new WaveOut(WaveCallbackInfo.FunctionCallback());

AudioPlayer.Init(WaveProvider);

我将不胜感激有关此事的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:18:22.230

如果您接收数据的速度不如播放数据的速度，那么您将在播放过程中出现间隙，您对此无能为力。但是，您可以通过在缓冲（最多一秒钟）音频时自动暂停来改善体验。然后，如果缓冲区用完，您将再次暂停。这样，音频听起来会少很多波涛汹涌。

# c++ - 在游戏中实现漫游行为

> ID：11146987
> 
> 赞同：2
> 
> 时间：2012-06-21T21:24:37.087
> 
> 标签：c++, game-ai

我正在做一些游戏，现在我正在尝试为我的坦克实现漂移行为，但我无法成功实现它。

**问题是它计算它的位置，如果它像 (430,130) 并使用 rand_floatRange 函数，它会给自己一个介于 0 和屏幕高度 (500) 之间的值，比如说 320，它会离开屏幕。**

我的调试过程完全没有错误。它构建得很好，坦克在场上移动，但一段时间后它们会离开屏幕，因为没有限制可以阻止它们达到高值（例如：坦克位置在（450,100）并且屏幕是（600,600） ，如果坦克有新的目标（它的目标将从那个地方到达（300,200）（它的值从0到600），它将是（750,300）并且它会离开屏幕。

**还有什么其他的，所以我可以修复它以正常工作并在屏幕高度和屏幕宽度范围内。**

```
void Tank::Wander()
{
    float randXs,randZs;
    srand(time(NULL));
    for(int i=0;i<tanks.size();i++)
    {
        randXs = rand_FloatRange(screenHeight);
        randZs = rand_FloatRange(screenHeight);
        {
            if(randXs < tanks[i]->givePosX() && randZs < tanks[i]->givePosZ() )
            {
                tanks[i]->posX= tanks[i]->givePosX() - 0.1;
                tanks[i]->posZ= tanks[i]->givePosZ() - 0.1;
            }
            else if(randXs > tanks[i]->givePosX() && randZs < tanks[i]->givePosZ() )
            {
                tanks[i]->posX= tanks[i]->givePosX() +0.1;
                tanks[i]->posZ= tanks[i]->givePosZ() - 0.1;
            }
            else if(randXs > tanks[i]->givePosX() && randZs > tanks[i]->givePosZ() )
            {
                tanks[i]->posX= tanks[i]->givePosX() + 0.1;
                tanks[i]->posZ= tanks[i]->givePosZ() +0.1;
            }
            else 
            {
                tanks[i]->posX= tanks[i]->givePosX() - 0.1;
                tanks[i]->posZ= tanks[i]->givePosZ() + 0.1;
            }
        }
    }
}  

float Tank::rand_FloatRange(float a)
{
    float c;
    c = rand() % (int) a;
    return c;
} 
```

如果还有其他需要，如果我有，我会在这里提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:01:32.977

我的 C++ 不太好，但我在你的逻辑中看到了问题。

```
randXs = rand_FloatRange(screenHeight);
randZs = rand_FloatRange(screenHeight); 
```

顺便说一句，我假设您的 randXs 实际上是随机到 screenWidth 的？你有 screenHeight 那里（也许他们是一样的？）

无论如何，不​​要这样做，而是做这样的事情：

```
randXs = rand_FloatRange(screenWidth - tanks[i]->posX);
randZs = rand_FloatRange(screenHeight - tanks[i]->posZ); 
```

这样做的作用是，当坦克接近屏幕边缘时，它会减少你的随机范围，以使其保持在边界内。

这应该确保您不会获得屏幕之外的随机值！如果不起作用，请报告！祝你好运！

* * *

编辑：

回顾我的解决方案并再次检查您的代码，我实际上不确定我的解决方案是否会给出正确的结果。但请确保正确处理屏幕宽度和高度。也许这就是问题所在？

此外，您可以单独处理 2 轴。如果我是你，我会这样做。如下：

```
if(randXs < tanks[i]->givePosX())  
{
  tanks[i]->posX = tanks[i]->givePosX() - 0.1;
}
else if(randXs > tanks[i]->givePosX())
{
  tanks[i]->posX= tanks[i]->givePosX() +0.1;
}

if(randZs > tanks[i]->givePosZ() )
{
  tanks[i]->posZ= tanks[i]->givePosZ() +0.1;
}
else if (randZs < tanks[i]->givePosZ() )
{
  tanks[i]->posZ= tanks[i]->givePosZ() - 0.1;
} 
```

请注意，在 else 之后有一个相反的 if 语句很重要，而不仅仅是一个 else 块。这就是我的意思：

这样做： if (...) { ... } else if (... 相反第一个 if) { ... }

并不是：

```
if (...)
{
...
}
else //no if here. 
{
...
} 
```

否则如果随机值与自己的值相同，坦克仍然会移动。我假设您想要的是，如果随机值相同，它应该保持静止（在特定方向上）。例如，如果我们有一个 x 值为 5 的坦克，我们随机选择一个 x 值为 5，x 中应该没有运动，上面的代码将确保这一点。

在你的情况下，你有一个没有条件的 else 块，所以你的坦克可能会离开屏幕（虽然它应该只是瞬间）。我发布的第一个解决方案，我很确定是错误的，但我会把它留在那里以免混淆你（我的解决方案突然改变了！）

# iphone - 安全地将 iPhone 应用程序验证到服务器？

> ID：11146990
> 
> 赞同：0
> 
> 时间：2012-06-21T21:24:56.947
> 
> 标签：iphone, ios, authentication

将用户从 iPhone 客户端验证到 PHP/MySQL Web 服务的最佳/最简单方法是什么？我没有设置任何身份验证，我想跟踪用户，所以当我调用我的服务时，它会发送用户名。我想确保这个用户是独一无二的，如果他们丢失了手机，他们将能够重新下载应用程序并使用凭据登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:01:20.867

这是一个非常开放的问题。您能否提供一些我们可以提供帮助的用例。如果您在谈论安全身份验证，那么只需使用 HTTPS：

HTTPS 专门设计用于：

1）使用加密来防御数据包嗅探

2) 使用权威机构签署的证书来防御 MITM

# wordpress - 显示标签与当前帖子名称相同的 Wordpress 帖子

> ID：11146992
> 
> 赞同：0
> 
> 时间：2012-06-21T21:25:09.920
> 
> 标签：wordpress, content-management-system, tags

如何显示带有与当前帖子标题匹配的标签的 wordpress 帖子。例如，当前帖子的标题为“Jaguar”。美洲虎内容显示后，我希望任何带有“Jaguar”字样的帖子都显示在下面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:20:12.753

您可以使用以下代码获取所有带有特定单词标记的帖子。

```
$query = new WP_Query( 'tag='.get_the_title() ); 
```

链接：[http ://codex.wordpress.org/Class_Reference/WP_Query#Tag_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Tag_Parameters)

# google-app-engine - 是否可以在 Google App Engine 上运行比特币？/ 备择方案？

> ID：11146996
> 
> 赞同：0
> 
> 时间：2012-06-21T21:25:24.190
> 
> 标签：google-app-engine, hosting, bitcoin

[这个问题在bitcoin.stackexchange](https://bitcoin.stackexchange.com/questions/4028/is-it-possible-to-run-bitcoin-on-google-app-engine-alternatives)、[stackoverflow](https://stackoverflow.com/questions/11146996/is-it-possible-to-run-bitcoin-on-google-app-engine-alternatives)和[bitcointalks](https://bitcointalk.org/index.php?topic=88949.0)上交叉发布。

* * *

我计划在 Google App Engine 上构建一个应用程序，该应用程序将大量使用比特币交易。我一直在谷歌搜索，但我找不到是否可以在 App Engine（使用 Java）上运行比特币本身。我对 App Engine 有一些经验，但仅限于以纯网络应用为中心的使用。我读过一些人使用带有 App Engine 的比特币制作应用程序，并且在 Amazon EC2 实例上单独托管比特币。

那么，这里有没有人有在 App Engine for Java 中运行比特币的经验，或者有没有人知道如何做到这一点？我知道那里有很多比特币应用程序，我想知道这些应用程序如何管理他们的比特币流量。

我试图避免在 App Engine 旁边一直运行单独的亚马逊服务。

事实上，通过使用[blockexplorer](http://blockexplorer.com/)或[blockchain](https://blockchain.info/)等被动 API 可以轻松接收比特币，因此我正在考虑找到一个可靠的 API 来处理我的付款。但是这种方法会导致对这个 API 服务的极度依赖，我实际上是想尽可能避免这种依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:00:35.860

我想你已经总结了可能性。

*   依赖于提供交易通知并发送它们的外部服务，我建议不要这样做。
*   让第二台服务器永久运行并使用 json-rpc 连接到它

由于 GAE 的线程限制，在应用引擎上运行任何类型的 p2p 节点都会失败。

第三种可能性是使用地层/电子超级节点，这样你就依赖于第三方服务，但至少它是有据可查的，你可以自己轻松地设置一个。AFAIK，stratum 基于http。

资料来源：大约 6 个月前，我编写了一个处理比特币的 GAE 应用程序。（使用第二种服务器方法）

# html - 水平 CSS 菜单有问题

> ID：11146999
> 
> 赞同：1
> 
> 时间：2012-06-21T21:25:28.470
> 
> 标签：html, css, internet-explorer, firefox, menu

我的水平 CSS 菜单有问题。问题或错误在于，在 Internet Explorer 和 Firefox 上，它不会与徽标直接对齐，它就像下方的半个空格。我好像排不上号 在 Safari 和 Chrome 上它是直线排列的。另外，在 IE 上，logo 和菜单之间有一个额外的间隙，它将菜单移向 logo。在另一个浏览器上它不动，它保持不动。

这是我的 HTML：

```
<div id="center" style="  
<a href="index.php"><img src="image/New.png" alt="" width="300" height="60"/></a>
<ul id="minitabs">
<li><a href="home.php"><u>Home</u></a></li>
<li><a href="news.php"><u>News</u></a></li>
<li><a href="contact.php"><u>Contact</u></a></li> 
</ul> 
</div> 
```

这是我的 CSS

```
 .center {margin-left:0px;
          margin-right:0px;
          margin-top:0px;
          margin-bottom:0px;}

  ul#minitabs{list-style: none;margin: -25px 46px 0px 0px; padding: 0px 0px 0px 0px;
              border-bottom: 0px solid #CCC;font-weight: regular;
              font-family:Times New Roman; font-size: 14px;text-align: right;}
  ul#minitabs li{display: inline; border-bottom: 1px;
              margin: 0px 0px 0px 0px; padding: 1px 5px 0px 5px;}
  ul#minitabs a{text-decoration:none; padding: 0px 0px 0px 0px; 
                border-bottom: 0px solid #FFF;color: #000000;}
  ul#minitabs a#current{border-color: #F60;color: #000000;}
  ul#minitabs a:hover{text-decoration:underline; text-color: #999999;} 
```

到目前为止，我找不到解决方案。我很感激任何解释，这样我就可以学习如何管理这个错误，并且一个例子也可以，这样我就可以学习如何修复这个错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:42:32.307

我相信浏览器正在以不同的方式格式化您的边框。尝试将您的菜单放在一个 div 中以查看。

```
<div style="height: 60px; overflow:hidden;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:43:26.380

您是想将导航放在徽标旁边还是在其下方？如果你把它放在它旁边，我找到了一个解决方案。做这个：

HTML：

```
<div id="center">  
<a href="index.php"><img src="image/New.png" alt="" width="300" height="60"/></a>
<ul id="minitabs">
<li><a href="home.php"><u>Home</u></a></li>
    <li>&nbsp<a href="news.php"><u>News</u></a></li>
    <li>&nbsp<a href="contact.php"><u>Contact</u></a></li> 
</ul> 
</div> 
```

CSS：

```
img {float:left;}
li { float:left; margin-top: /*amount you want to move nav down*/;}​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

否则，如果您希望它位于徽标下方，只需将 CSS 更改为此

```
li { float:left; margin-left: /*amount you want to move nav right*/;}​ 
```

​</p>