# StackOverflow 问答 11066000-11066999

# c# - 使用 Alglib 进行 C# 线性判别分析

> ID：11066004
> 
> 赞同：0
> 
> 时间：2012-06-16T18:28:35.163
> 
> 标签：c#, alglib

假设我有一个包含 10 个类的数据集。每个类在 3D 中包含 3 个点：

```
Class 1: (1,2,3),(4,5,6),(7,8,9)
Class 2: (2,3,4),(5,6,7),(8,9,10)
.
.
Class 10: (10,15,20),(10,11,19),(4,8,9) 
```

如何使用 Alglib LDA（或任何其他免费 LDA 库）确定 X 类是否属于上述类之一？

示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:03:59.053

一段时间后，我终于想通了：

```
static public double[,] Test()
    {
        // This example is for points in 3D.
        // The forth variable is the class label. In this case 2 classes: 0 and 1.
        double[,] xy = new double[,]
        {
        { 4,2,1, 0 }, { 2,4,2, 0 }, { 2,3,3, 0 }, { 3,6,4, 0 }, { 4,4,5, 0 },
        { 9,10,10, 1 }, { 6,8,11, 1 }, { 9,5,12, 1 }, { 8,7,9, 1 }, { 10,8,10, 1 }
        };

        int NPoints = 10;
        int NVars = 3; // 1 for 1 dimension, 2 for 2D and so on...
        int NClasses = 2;

        int info = 0;
        double[,] w = new double[0, 0];

        alglib.lda.fisherldan(xy, NPoints, NVars, NClasses, ref info, ref w);

        return w; // The projection vector/s.
    } 
```

# android - 0 个进程和 1 个服务

> ID：11066005
> 
> 赞同：1
> 
> 时间：2012-06-16T18:28:35.757
> 
> 标签：android, debugging, service, ddms

知道为什么我在管理应用程序“运行”选项卡中看到我的应用程序和谷歌地图都带有“0 个进程和 1 个服务”吗？我的应用程序已经死了，但不是完全死了，它不会重新启动。我试图连接 DDMS 以查看发生了什么，但没有显示该设备的进程（我已检查我的清单是否具有 debuggable="true"）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:09:36.520

答案是......服务不是进程，因此创建服务但未启动服务是有效的。如果服务未启动，则有 0 个进程。在我的特殊情况下，我注意到日志显示“计划重启崩溃的服务”。我认为这意味着 onStart() 将被调用，但事实并非如此。这里有两个链接有助于回答这个问题：

[http://groups.google.com/group/android-developers/browse_thread/thread/a9d3c1acbd46e384#](http://groups.google.com/group/android-developers/browse_thread/thread/a9d3c1acbd46e384#)

[“计划重新启动崩溃的服务”，但没有调用 onStart()](https://stackoverflow.com/questions/2398482/scheduling-restart-of-crashed-service-but-no-call-to-onstart-follows)

# ios - 为什么我的 UIButton.tintColor 不起作用？

> ID：11066008
> 
> 赞同：57
> 
> 时间：2012-06-16T18:29:22.857
> 
> 标签：ios, uibutton

我的构建目标是为 IOS5 设置的，这是我理解`UIButton.tintColor`的介绍...

我在视图控制器的 viewDidLoad 中有这个

```
[timelineButton setTintColor:[UIColor blackColor]];
[timelineButton setTitle:@"test" forState:UIControlStateNormal]; 
```

文本正确更改但按钮不是黑色？

谢谢！

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-16T18:34:21.760

根据[文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-DontLinkElementID_2)：

> 此属性并非对所有按钮类型都有效。

您需要将您的切换到[其中的](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW39)`buttonType`另一个。（不幸的是，文档没有指定哪些特定的按钮类型支持此属性。）

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-02-09T20:14:10.937

确保您的按钮“类型”设置为系统。如果它设置为自定义，则可能是您的按钮颜色没有改变的原因。这就是发生在我身上的事情，将类型更改为 System 修复了它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-15T21:21:54.580

它为您突出显示的状态颜色着色。当您点击/单击 UIButton 时，只要您按住点击/单击 UIButton，就会出现使用 tintColor 指定的颜色。

```
resetButton.tintColor = [UIColor colorWithRed:0.764 green:1.000 blue:0.000 alpha:1.000]; 
```

该按钮在正常状态下为白色。但是如果我点击按钮，颜色会变成红色，但只有这样。

**如果您需要更改按钮，使其在 UIControlStateNormal 中看起来像红色或蓝色，那么**

在 Interface Builder 中或以编程方式将 UIButtonType 更改为 UIButtonTypeCustom

```
 UIButton *resetButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

自行更改属性并重新创建圆角

```
resetButton.backgroundColor = [UIColor redColor];
resetButton.layer.borderColor = [UIColor blackColor].CGColor;
resetButton.layer.borderWidth = 0.5f;
resetButton.layer.cornerRadius = 10.0f; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-04T20:13:43.377

如其他答案中所述，色调不适用于自定义按钮类型。确保明确声明按钮类型。不要只使用 [UIButton alloc] init]

这将起作用：

```
UIButton *mybutton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[mybutton setImage:[UIImage imageNamed:@"myImage"] forState:UIControlStateNormal];
mybutton.tintColor = [ODTheme blueTintColor]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-08T06:01:24.073

今天，我也遇到了这个问题。我使用委托来解决它。

```
[button addTarget:self action:@selector(buttonPress:) forControlEvents:UIControlEventTouchDown];
[button addTarget:self action:@selector(buttonPressReset:) forControlEvents:UIControlEventTouchUpInside | UIControlEventTouchUpOutside];

-(void)buttonPress:(id)sender{
UIButton* button = (UIButton*)sender;
[button setBackgroundColor:[UIColor greenColor]];
NSLog(@"buttonPressed");
}

-(void)buttonPressReset:(id)sender{
UIButton* button = (UIButton*)sender;
[button setBackgroundColor:[UIColor redColor]];
NSLog(@"buttonPressReset");
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-01-26T07:16:52.577

我发现必须遵循 3 件事。

**1\. 将图像渲染为`Default`**

去`Images.xcassets > Your Image > Show the Attributes inspector > Render As > Default`

[![默认渲染](../Images/95f411f2755fbf2b6b5f798cdfed919d.png)](https://i.stack.imgur.com/bAM2q.png)

**2.确保您的按钮类型是系统**

**3\. 现在更改按钮的 tintColor。**

完毕。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-15T23:15:18.933

应该试试这个方法：

```
- (void)setTitleColor:(UIColor *)color
             forState:(UIControlState)state 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-01-21T14:19:40.643

在 iOS 13 中，您可以为图像着色，然后将其设置为按钮：

```
let coloredImage = UIImage().withTintColor(UIColor.red)
UIButton().setImage(coloredImage, for: .normal) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-12T07:39:43.423

只需在**Storyboard**`UIButton`中设置您的类型**System**。

 **[![在此处输入图像描述](../Images/19c1f209c462982c80e3dcd7722d7e16.png)](https://i.stack.imgur.com/T8P3F.png)

然后在代码中使用：

```
myButton.tintColor = UIColor.whiteColor() 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-11-26T06:35:50.773

如果您的 UIButton 类型是系统，那么只有 tint color 属性有效。因此，首先您需要将按钮类型设置为系统，然后为特定状态应用色调颜色。

```
let btn = UIButton.init(type: .system)
[btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-13T10:16:56.397

要更改 Button 文本的颜色，您可以使用：

```
resetButton.setTitleColor(UIColor.blackColor(), forState: .Normal) 
```

或 OBJ-C：

```
- (void)setTitleColor:(UIColor *)color
         forState:(UIControlState)state 
```

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/#//apple_ref/occ/instm/UIButton/setTitleColor:forState](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/#//apple_ref/occ/instm/UIButton/setTitleColor:forState)：

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-09T09:58:29.530

只需使用：

```
[yourButton setBackgroundImage:[yourButton.currentBackgroundImage imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate] forState:UIControlStateNormal]; 
[yourButton setTintColor:[UIColor blackColor]]; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-24T04:27:10.100

斯威夫特 4：

```
yourButton.setTitleColor(UIColor.white, for: .normal) 
```**

# android - 使用两个按钮启动和停止 MP3 文件 - 可能吗？

> ID：11066010
> 
> 赞同：0
> 
> 时间：2012-06-16T18:29:44.820
> 
> 标签：android

我有一个 mp3 文件，我想用一个按钮开始，但用另一个按钮停止。这可能吗？这是我在 button1 上启动文件的代码 - 如何在 button2 上停止文件？

谢谢！

```
button1.setOnClickListener(new View.OnClickListener() {

    private MediaPlayer mplay;
    public void onClick(View v) {
    if (mplay == null){
       mplay = MediaPlayer.create(getApplicationContext(), R.raw.mysound);
       }
    mp.start();
    }             
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:33:31.727

定义您`MediaPlayer`的 ClickListener 外部 - 作为类变量 - 然后在按钮的单击处理中处理开始和停止，因为它们都可以看到它。

# java - 如何在 Java Swing 应用程序中管理来自控制器的视图更新

> ID：11066015
> 
> 赞同：5
> 
> 时间：2012-06-16T18:30:18.863
> 
> 标签：java, swing, model-view-controller, view, controller

我发现用 Swing 编写好的 OO 代码非常困难。我的问题本质上是我有一个具有动作侦听器的视图（JPanel）。动作侦听器确定单击了哪个按钮并调用适当的控制器方法。问题是这个控制器方法需要更新另一个视图。所以我遇到的问题是我的视图被到处传递给控制器​​。这是一个例子。

```
public class MyView extends JPanel implements ActionListener {
  private final MyController controller = new MyController();

  @Override public void actionPerformed(ActionEvent e) {
    this.controller.updateOtherView();
  }
} 
```

这基本上是我想要的，但这就是最终发生的事情。

```
public class MyView extends JPanel implements ActionListener {
  private MyController controller = new MyController();
  private OtherView otherView;

  public MyView(MyOtherView otherView) {
    this.otherView = otherView;
  }

  @Override public void actionPerformed(ActionEvent e) {
    this.controller.updateOtherView(otherView);
  }
} 
```

而且你可以看到随着需要更新的视图数量的增加和看起来像这样的类数量的增加，视图本质上是全局变量，代码变得复杂和不清楚。我遇到的另一个问题是这个其他视图通常不会直接传递到 MyView，但它必须通过 MyView 的父级才能到达 MyView，这真的让我很烦恼。

举一个真实的例子，假设我有一个菜单和这个 MyView。MyView 有一个播放按钮，它会播放一些音乐一段时间，它会禁用（灰显）播放按钮，直到音乐播放完毕。如果我有一个名为播放的菜单选项，现在我需要访问其他视图播放按钮，以便将其变灰。如果没有这种恼人的观点传递，我怎么能做到这一点？尽管可能有针对此问题的特定解决方案，但我正在寻找可以在一般情况下解决此视图访问问题的方法。

我完全不确定如何解决这个问题。我现在有点使用 MVC 模式术语，而不使用 MVC 模式，这可能有必要也可能没有必要。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T19:00:22.293

一种解决方案：只需让控制器更新模型。然后附加到模型的侦听器将更新视图。您还可以让 JMenuItems 和相应的 JButtons 共享相同的操作，因此当您禁用该操作时，它将禁用所有使用该操作的按钮/菜单/等。

例如主类：

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class MvcExample {

   private static void createAndShowGui() {
      MyView view = new MyView();
      MyMenuBar menuBar = new MyMenuBar();
      MyModel model = new MyModel();
      MyControl control = new MyControl(model);
      control.addProgressMonitor(view);
      control.addView(view);
      control.addView(menuBar);

      model.setState(MyState.STOP);

      JFrame frame = new JFrame("MVC Example");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(view.getMainPanel());
      frame.setJMenuBar(menuBar.getMenuBar());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);

   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

   private static final byte[] DATA_ARRAY = { 0x43, 0x6f, 0x70, 0x79, 0x72,
         0x69, 0x67, 0x68, 0x74, 0x20, 0x46, 0x75, 0x62, 0x61, 0x72, 0x61,
         0x62, 0x6c, 0x65, 0x2c, 0x20, 0x30, 0x36, 0x2f, 0x31, 0x36, 0x2f,
         0x32, 0x30, 0x31, 0x32, 0x2e, 0x20, 0x46, 0x75, 0x62, 0x61, 0x72,
         0x61, 0x62, 0x6c, 0x65, 0x20, 0x52, 0x75, 0x6c, 0x65, 0x73, 0x21 };

} 
```

控制：

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.ArrayList;
import java.util.List;

import javax.swing.AbstractAction;

@SuppressWarnings("serial")
public class MyControl {
   private MyModel model;
   private PlayAction playAction = new PlayAction();
   private PauseAction pauseAction = new PauseAction();
   private StopAction stopAction = new StopAction();
   private List<MyProgressMonitor> progMonitorList = new ArrayList<MyProgressMonitor>();

   public MyControl(MyModel model) {
      this.model = model;

      model.addPropertyChangeListener(new MyPropChangeListener());
   }

   public void addProgressMonitor(MyProgressMonitor progMonitor) {
      progMonitorList.add(progMonitor);
   }

   public void addView(MySetActions setActions) {
      setActions.setPlayAction(playAction);
      setActions.setPauseAction(pauseAction);
      setActions.setStopAction(stopAction);
   }

   private class MyPropChangeListener implements PropertyChangeListener {
      @Override
      public void propertyChange(PropertyChangeEvent pcEvt) {
         if (MyState.class.getName().equals(pcEvt.getPropertyName())) {
            MyState state = (MyState) pcEvt.getNewValue();

            if (state == MyState.PLAY) {
               playAction.setEnabled(false);
               pauseAction.setEnabled(true);
               stopAction.setEnabled(true);
            } else if (state == MyState.PAUSE) {
               playAction.setEnabled(true);
               pauseAction.setEnabled(false);
               stopAction.setEnabled(true);
            } else if (state == MyState.STOP) {
               playAction.setEnabled(true);
               pauseAction.setEnabled(false);
               stopAction.setEnabled(false);
            }
         }
         if (MyModel.PROGRESS.equals(pcEvt.getPropertyName())) {
            for (MyProgressMonitor progMonitor : progMonitorList) {
               int progress = (Integer) pcEvt.getNewValue();
               progMonitor.setProgress(progress);
            }            
         }
      }
   }

   private class PlayAction extends AbstractAction {
      public PlayAction() {
         super("Play");
         putValue(MNEMONIC_KEY, KeyEvent.VK_P);
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         model.play();
      }
   }

   private class StopAction extends AbstractAction {
      public StopAction() {
         super("Stop");
         putValue(MNEMONIC_KEY, KeyEvent.VK_S);
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         model.stop();
      }
   }
   private class PauseAction extends AbstractAction {
      public PauseAction() {
         super("Pause");
         putValue(MNEMONIC_KEY, KeyEvent.VK_A);
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         model.pause();
      }
   }
} 
```

状态枚举：

```
public enum MyState {
   PLAY, STOP, PAUSE
} 
```

视图界面之一：

```
import javax.swing.Action;

public interface MySetActions {

   void setPlayAction(Action playAction);
   void setPauseAction(Action pauseAction);
   void setStopAction(Action stopAction);
} 
```

另一个视图界面：

```
public interface MyProgressMonitor {
   void setProgress(int progress);
} 
```

主 GUI 视图：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;

import javax.swing.Action;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JPanel;
import javax.swing.JProgressBar;

public class MyView implements MySetActions, MyProgressMonitor {
   private JButton playButton = new JButton();
   private JButton stopButton = new JButton();
   private JButton pauseButton = new JButton();
   private JPanel mainPanel = new JPanel();
   private JProgressBar progressBar = new JProgressBar();

   public MyView() {
      progressBar.setBorderPainted(true);

      JPanel btnPanel = new JPanel(new GridLayout(1, 0, 5, 0));
      btnPanel.add(playButton);
      btnPanel.add(pauseButton);
      btnPanel.add(stopButton);

      mainPanel.setLayout(new BorderLayout(0, 5));
      mainPanel.setBorder(BorderFactory.createEmptyBorder(5, 15, 5, 15));
      mainPanel.add(btnPanel, BorderLayout.CENTER);
      mainPanel.add(progressBar, BorderLayout.PAGE_END);
   }

   @Override
   public void setPlayAction(Action playAction) {
      playButton.setAction(playAction);
   }

   @Override
   public void setStopAction(Action stopAction) {
      stopButton.setAction(stopAction);
   }

   @Override
   public void setPauseAction(Action pauseAction) {
      pauseButton.setAction(pauseAction);
   }

   @Override
   public void setProgress(int progress) {
      progressBar.setValue(progress);
   }

   public JComponent getMainPanel() {
      return mainPanel;
   }

} 
```

视图的菜单栏部分：

```
import java.awt.event.KeyEvent;
import javax.swing.Action;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class MyMenuBar implements MySetActions {
   private JMenuItem playMenItem = new JMenuItem();
   private JMenuItem pauseMenuItem = new JMenuItem();
   private JMenuItem stopMenItem = new JMenuItem();
   private JMenuBar menuBar = new JMenuBar();

   public MyMenuBar() {
      JMenu menu = new JMenu("Main Menu");
      menu.setMnemonic(KeyEvent.VK_M);
      menu.add(playMenItem);
      menu.add(pauseMenuItem);
      menu.add(stopMenItem);
      menuBar.add(menu);
   }

   public JMenuBar getMenuBar() {
      return menuBar;
   }

   @Override
   public void setPlayAction(Action playAction) {
      playMenItem.setAction(playAction);
   }

   @Override
   public void setStopAction(Action stopAction) {
      stopMenItem.setAction(stopAction);
   }

   @Override
   public void setPauseAction(Action pauseAction) {
      pauseMenuItem.setAction(pauseAction);
   }

} 
```

最后，模型：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeListener;
import javax.swing.Timer;
import javax.swing.event.SwingPropertyChangeSupport;

public class MyModel {
   public final static String PROGRESS = "progress";
   protected static final int MAX_PROGRESS = 100; 
   private MyState state = null;
   private SwingPropertyChangeSupport pcSupport = new SwingPropertyChangeSupport(
         this);
   private Timer timer;
   private int progress = 0;

   public MyState getState() {
      return state;
   }

   public void setState(MyState state) {
      MyState oldValue = this.state;
      MyState newValue = state;
      this.state = newValue;
      pcSupport.firePropertyChange(MyState.class.getName(), oldValue, newValue);
   }

   public int getProgress() {
      return progress;
   }

   public void setProgress(int progress) {
      Integer oldValue = this.progress;
      Integer newValue = progress;
      this.progress = newValue;
      pcSupport.firePropertyChange(PROGRESS, oldValue, newValue);
   }

   public void play() {
      MyState oldState = getState();
      setState(MyState.PLAY);

      if (oldState == MyState.PAUSE) {
         if (timer != null) {
            timer.start();
            return;
         }
      }
      int timerDelay = 50;
      // simulate playing ....
      timer = new Timer(timerDelay, new ActionListener() {
         int timerProgress = 0;

         @Override
         public void actionPerformed(ActionEvent actEvt) {
            timerProgress++;
            setProgress(timerProgress);
            if (timerProgress >= MAX_PROGRESS) {
               setProgress(0);
               MyModel.this.stop();
            }
         }
      });
      timer.start();
   }

   public void pause() {
      setState(MyState.PAUSE);
      if (timer != null && timer.isRunning()) {
         timer.stop();
      }
   }

   public void stop() {
      setState(MyState.STOP);
      setProgress(0);
      if (timer != null && timer.isRunning()) {
         timer.stop();
      }
      timer = null;
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      pcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      pcSupport.removePropertyChangeListener(listener);
   }
} 
```

请询问这是否有任何令人困惑的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T18:38:51.037

在这种情况下，我倾向于使用单例。当然，这取决于您的观点的独特性。我的“windows”（JFrames）通常有单例，所以我可以通过使用 getter 从这些导航到我需要的任何孩子。然而，在非常复杂的情况下，这可能不是最好的主意。

# css - CSS3 将 -webkit-gradient 转换为标准

> ID：11066020
> 
> 赞同：0
> 
> 时间：2012-06-16T18:30:55.353
> 
> 标签：css, gradient

这个梯度在标准语法中是什么？

```
-webkit-gradient(radial, center top, 0, center top, 1000, from(black), to(white)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:31:08.483

如果您正在寻找跨浏览器 CSS3 径向渐变：

```
background: #ffffff;
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPHJhZGlhbEdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IjUwJSIgcj0iNzUlIj4KICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjNDA5NmVlIiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogIDxyZWN0IHg9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-radial-gradient(center, ellipse cover,  #ffffff 0%, #4096ee 100%);
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#ffffff), color-stop(100%,#4096ee));
background: -webkit-radial-gradient(center, ellipse cover,  #ffffff 0%,#4096ee 100%);
background: -o-radial-gradient(center, ellipse cover,  #ffffff 0%,#4096ee 100%);
background: -ms-radial-gradient(center, ellipse cover,  #ffffff 0%,#4096ee 100%);
background: radial-gradient(center, ellipse cover,  #ffffff 0%,#4096ee 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#4096ee',GradientType=1 ); 
```

在我看来，CSS 渐变的最佳工具是[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:49:16.490

尝试这个。

```
background: -webkit-radial-gradient(center top,ellipse,#color1,#color2); 
```

注意：它可以是椭圆或圆形等。也可以为不同的浏览器添加-moz、-ms、-o等。

# linux - need_resched 信息（Linux 内核 2.6.30）

> ID：11066021
> 
> 赞同：1
> 
> 时间：2012-06-16T18:30:57.050
> 
> 标签：linux, kernel, scheduler

我知道“need_resched 标志是向内核发出的一条消息，即应尽快调用调度程序，因为应该运行另一个进程”，但我遗漏了一些要点：

谁负责检查这个标志？有一个内核进程ad hoc吗？最后，可能我唯一想提出的问题是：内核在设置标志后尽快调用 schedule() 做什么？

我希望我已经清楚了，

斯特凡诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:42:04.847

通常，将在中断和系统调用返回路径中检查此标志 - 如果在从中断或系统调用返回时设置它，并且（在中断情况下）内核是可抢占的，那么内核将在返回之前调用重新调度函数之一.

例如，在[arch/x86/kernel/entry_32.S 中](http://lxr.linux.no/linux+v2.6.30/arch/x86/kernel/entry_32.S#L358)：

```
 358 ENTRY(resume_userspace)
 359        LOCKDEP_SYS_EXIT
 360        DISABLE_INTERRUPTS(CLBR_ANY)    # make sure we don't miss an interrupt
 361                                        # setting need_resched or sigpending
 362                                        # between sampling and the iret
 363        TRACE_IRQS_OFF
 364        movl TI_flags(%ebp), %ecx
 365        andl $_TIF_WORK_MASK, %ecx      # is there any work to be done on
 366                                        # int/exception return?
 367        jne work_pending
 368        jmp restore_all
 369 END(ret_from_exception) 
```

请注意，need_resched 是 TI_flags 中的一个位标志，`_TIF_WORK_MASK`包括大多数 TI_flags 位，包括 need_resched 的位。还有许多其他类似的检查，返回内核路径也有显式检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:34:54.053

只要安全，内核代码就会显式地检查这个标志，`schedule`如果设置了这个标志就会调用。它不能被任何外部进程或异步机制检查，因为它的全部目的是处理不可抢占的代码，只能自愿让出 CPU。

# android - Android - 在gridview中的特定图像上覆盖小检查图标或更改边框

> ID：11066022
> 
> 赞同：2
> 
> 时间：2012-06-16T18:31:31.887
> 
> 标签：android, image, gridview, drawable, sharedpreferences

大约一个小时前，我刚刚问了一个问题，在等待答复时，我想也许我可以以不同的方式实现我想要的。我正在考虑更改图像，但如果我可以在网格视图中的完整关卡的顶部覆盖一些东西会更好，即一个小勾号图标 目前，当一个关卡完成时，我将它与 sharedpreferences 一起存储

所以我有一个 gridView 布局来显示代表级别的图像。假设对于这个例子，我有 20 个级别。当一个关卡完成时，是否可以覆盖勾号图标或以某种方式突出显示关卡图像。也许改变图像的边框？

这是我使用的图像数组

```
int[] imageIDs = {
   R.drawable.one,
   R.drawable.two,
   R.drawable.three,
   R.drawable.four,
   R.drawable.five,
   R.drawable.six
   etc....... 
```

然后我有我的代码来设置gridView中的图像。显然，两者之间还有更多代码。

```
public View getView(int position, View convertView, ViewGroup parent) 
{
   ImageView imageView;
   if (convertView == null) {
       imageView = new ImageView(context);
       imageView.setLayoutParams(new GridView.LayoutParams(140, 140));
       imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
       imageView.setPadding(5, 5, 5, 5);
   } else {
       imageView = (ImageView) convertView;
   }
   imageView.setImageResource(imageIDs[position]);
   return imageView; 
```

是否可以执行上述任何操作，即使是边框方法也可以。谢谢你的帮助

* * *

当关卡打开时，我使用 switch case 来执行其他任务，并将**项目**字符串更改为它所代表的图像的名称。

```
 switch(question){
    case 0:
        iv.setImageResource(R.drawable.one);
        item = imageOne;
                    answer1 = "one"         

    break;
    case 1:
        iv.setImageResource(R.drawable.two);
        item = imageTwo;
                    answer1 = "two"
    break;
    default:
    break;
    } 
```

然后我调用该字符串来保存一个带有图像名称的布尔值

```
final boolean answerStatusCase = preferences.getBoolean(item, false);
final SharedPreferences.Editor editor = preferences.edit();

Button checkAnswer = (Button) findViewById(R.id.bCheckAnswer);
    checkAnswer.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            String yourAnswerCheck = yourAnswerReview.toString();

            if (yourAnswerCheck.equals(answer1)) {
                Toast.makeText(getBaseContext(), "That's correct", 2000).show();

                    editor.putBoolean(item, true);
                    editor.commit();    

            }else{
                Toast.makeText(getBaseContext(), "That's incorrect", 2000).show();
            }

        }

    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T19:01:15.567

是的，绝对有可能。我想说你可以简单地继承`ImageView`并处理方法中的绘图`onDraw(Canvas)`。例如（这只是一个快速操作，实际上我可能会处理以不同尺寸绘制它，并针对不同的画布尺寸处理固定的倾斜偏移）：

```
public class MarkableImageView extends ImageView {
    private boolean checked = true;

    public MarkableImageView(Context context) {
        super(context);
    }

    public MarkableImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MarkableImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setChecked(boolean checked) {
        this.checked = checked;
        invalidate();
    }

    public boolean isChecked() {
        return checked;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        if(checked) {
            Bitmap check = BitmapFactory.decodeResource(
                    getResources(), R.drawable.check);
            int width = check.getWidth();
            int height = check.getHeight();
            int margin = 15;
            int x = canvas.getWidth() - width - margin;
            int y = canvas.getHeight() - height - margin;
            canvas.drawBitmap(check, x, y, new Paint());
        }
    }
} 
```

![例子](../Images/ea453176d1330b43464ac76ca77a5d32.png)

编辑：那么您的代码将类似于：

```
public View getView(int position, View convertView, ViewGroup parent) 
{
   MarkableImageView imageView;
   if (convertView == null) {
       imageView = new MarkableImageView(context);
       imageView.setLayoutParams(new GridView.LayoutParams(140, 140));
       imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
       imageView.setPadding(5, 5, 5, 5);
   } else {
       imageView = (MarkableImageView) convertView;
   }
   imageView.setImageResource(imageIDs[position]);
   imageView.setChecked(shouldBeChecked);
   return imageView; 
```

# php - 学说映射超类不识别主键

> ID：11066023
> 
> 赞同：0
> 
> 时间：2012-06-16T18:31:31.993
> 
> 标签：php, orm, symfony, doctrine-orm

我有一个这样定义的映射超类：

```
/** @ORM\MappedSuperclass */
abstract class BaseEntity {
/**
 * @var string $id
 *
 * @ORM\Column(name="id", type="string", length=32, nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
protected $id;

/**
 * @var datetime $dateCreated
 *
 * @ORM\Column(name="date_created", type="datetime", nullable=false)
 */
protected $dateCreated;

function __construct() {
    $this->id = $this->generateId();
} 
```

以及扩展它的子类。我得到这个例外：

```
General error: 1364 Field 'id' doesn't have a default value 
```

在构造对象后，我对 getId 方法进行了回显，它返回了一个有效的字符串，所以不是这样。有趣的是，在将某些内容插入同一个表之前，我会进行查找查询。查找查询识别“id”字段，插入不识别但都识别 date_created 字段。会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:06:18.260

如果您自己生成 id，则应使用：

```
* @ORM\GeneratedValue(strategy="NONE") 
```

`IDENTITY`告诉学说中继数据库特定的身份生成。

# mongodb - 如何使用 MongoDB Java 驱动程序按日期对 GridFS 文件进行排序？

> ID：11066026
> 
> 赞同：1
> 
> 时间：2012-06-16T18:31:43.240
> 
> 标签：mongodb, gridfs, mongodb-java

GridFS [API](http://api.mongodb.org/java/2.6/com/mongodb/gridfs/GridFS.html)似乎`.sort`不像[DBCursor](http://api.mongodb.org/java/2.0/com/mongodb/DBCursor.html)对象有

有没有办法按`uploadDate`（或任何其他 GridFS 元数据字段）进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:27:09.370

我建议直接将 fs.files 排序为普通集合，并根据结果使用 GridFS API 检索文件。

例如：

```
var cur = db.fs.files.find({}, {"_id" : true}).sort({"uploadDate" : true}) 
```

然后您可以使用 id 值来检索文件。

# ruby - 为 rails 3 中的 2 个现有模型创建参考列

> ID：11066027
> 
> 赞同：0
> 
> 时间：2012-06-16T18:31:56.207
> 
> 标签：ruby, ruby-on-rails-3, reference, migration

我正在做 Rails 3.2.3 并且有一个问题：

我已经有 2 个模型产品和用户。User 表是在我设置设计时创建的。我想让产品属于用户，这就是我所做的：

```
rails g migration AddUserToProduct user_id:integer 
```

在产品模型中，我添加：

```
belongs_to :user 
```

在用户模型中，我添加：

```
has_many :products 
```

我跑了

```
rake db:migrate 
```

我看起来很好。为了测试它，我进入 Web 界面，登录并制作一个新产品，然后使用 Rails 控制台，我输入

```
Product.last 
```

我很困惑，因为 user_id:nil 这意味着用户和产品之间没有参考。

我的代码有什么问题吗？在两个现有模型之间创建参考列的正确方法是什么？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:38:19.560

你能展示你的产品控制器吗？最有可能的是，你有类似的东西

```
def create
  @product = Product.new(params[:product])
  ...
end 
```

如果是这样，将其更改为

```
def create
  @product = current_user.products.build(params[:product])
  ...
end 
```

# javascript - jQuery mousedown 停止点击？（在 Rails 3 环境中）

> ID：11066033
> 
> 赞同：0
> 
> 时间：2012-06-16T18:32:43.367
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, jquery-events

我在 Rails 中有一个远程链接（即通过 ajax 提交）

链接是这样的：

```
<a href="#myurl" data-remote="true">
<div class="switchIt switchOn">my linked item</div>
</a> 
```

单击链接时-页面上没有任何反应，这就是成功。

所以我在`.mousedown`, 上添加了一个效果来改变 div 的样式（一个简单的`.removeClass`and `.addClass`）。由于我想要达到的效果，我需要它是 mousedown，而不是 click（这更像是 mouseup）。

我现在遇到的问题是，单击 div 后，链接根本不再“提交”url。好像mousedown已经阻止了它。

我可以通过 jQuery ajax 调用使链接成为远程链接并修复这个废话 - 但我宁愿让 rails 照原样处理它，并在我网站的其他地方做。

任何想法可能导致此问题？

用脚本更新...：

```
$('body').delegate('.switchIt', 'mousedown', function(){
   $(this).toggleClass('switchOn');
   $(this).toggleClass('switchOff');
}); 
```

# c++ - OpenCV - 网络摄像头不工作

> ID：11066045
> 
> 赞同：0
> 
> 时间：2012-06-16T18:34:21.980
> 
> 标签：c++, c, opencv, webcam

我正在学习 OpenCV，因为我想在夏天构建和编程 3D 扫描仪。

为此，我购买了三个网络摄像头（两个用于实际立体图像，一个用于纹理[或作为备份]）。

我试图用 OpenCV 获取网络摄像头的视频。但是，这不起作用，因为我最终得到了黑屏，而不是视频。

然后我用我祖母的网络摄像头尝试了相同的代码。它工作得很好。但是，我已经购买了 3 个我计划用来构建扫描仪的网络摄像头：http: [//www.amazon.com/Webcam-Camera-Vision-Meeting-compatible/dp/B0015TJNEY/ref=pd_bxgy_e_img_b](https://rads.stackoverflow.com/amzn/click/com/B0015TJNEY)

我不想购买任何新的网络摄像头。

有人知道为什么我的网络摄像头不能与 OpenCV 一起使用（它们可以与其他程序一起使用）吗？

如何让 OpenCV 接受我的网络摄像头？

任何建议，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:09:59.640

如果你的程序通过了这一步，你应该尝试一个不同的数字，`cvCaptureFromCAM(0);`0 是第一个网络摄像头，但也许你的设置为 1、2 或 3。你也可以尝试 -1 看看会发生什么

```
CvCapture *capture;
capture = cvCaptureFromCAM(0);
if (!capture)
{
    printf("Error at capture");
    return 1;
} 
```

# javascript - 为什么我的球消失了？

> ID：11066050
> 
> 赞同：203
> 
> 时间：2012-06-16T18:35:13.400
> 
> 标签：javascript, canvas, geometry, physics, collision

原谅这个有趣的标题。我创建了一个 200 个球弹跳和碰撞的小图形演示，它们都靠墙和彼此碰撞。你可以在这里看到我目前拥有的：[http ://www.exeneva.com/html5/multipleBallsBouncingAndColliding/](http://www.exeneva.com/html5/multipleBallsBouncingAndColliding/)

问题是，每当它们相互碰撞时，它们就会消失。我不确定为什么。有人可以看看并帮助我吗？

更新：显然，球阵列的球坐标为 NaN。下面是我将球推到数组的代码。我不完全确定坐标是如何获得 NaN 的。

```
// Variables
var numBalls = 200;  // number of balls
var maxSize = 15;
var minSize = 5;
var maxSpeed = maxSize + 5;
var balls = new Array();
var tempBall;
var tempX;
var tempY;
var tempSpeed;
var tempAngle;
var tempRadius;
var tempRadians;
var tempVelocityX;
var tempVelocityY;

// Find spots to place each ball so none start on top of each other
for (var i = 0; i < numBalls; i += 1) {
  tempRadius = 5;
  var placeOK = false;
  while (!placeOK) {
    tempX = tempRadius * 3 + (Math.floor(Math.random() * theCanvas.width) - tempRadius * 3);
    tempY = tempRadius * 3 + (Math.floor(Math.random() * theCanvas.height) - tempRadius * 3);
    tempSpeed = 4;
    tempAngle = Math.floor(Math.random() * 360);
    tempRadians = tempAngle * Math.PI/180;
    tempVelocityX = Math.cos(tempRadians) * tempSpeed;
    tempVelocityY = Math.sin(tempRadians) * tempSpeed;

    tempBall = {
      x: tempX, 
      y: tempY, 
      nextX: tempX, 
      nextY: tempY, 
      radius: tempRadius, 
      speed: tempSpeed,
      angle: tempAngle,
      velocityX: tempVelocityX,
      velocityY: tempVelocityY,
      mass: tempRadius
    };
    placeOK = canStartHere(tempBall);
  }
  balls.push(tempBall);
} 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-16T18:45:02.100

您的错误最初来自这一行：

```
var direction1 = Math.atan2(ball1.velocitY, ball1.velocityX); 
```

你有`ball1.velocitY`(即`undefined`) 而不是`ball1.velocityY`. `Math.atan2`给你也是如此`NaN`，而这个`NaN`价值正在通过你的所有计算传播。

这不是您的错误的根源，但您可能希望在这四行中更改其他内容：

```
ball1.nextX = (ball1.nextX += ball1.velocityX);
ball1.nextY = (ball1.nextY += ball1.velocityY);
ball2.nextX = (ball2.nextX += ball2.velocityX);
ball2.nextY = (ball2.nextY += ball2.velocityY); 
```

您不需要额外的分配，并且可以`+=`单独使用运算符：

```
ball1.nextX += ball1.velocityX;
ball1.nextY += ball1.velocityY;
ball2.nextX += ball2.velocityX;
ball2.nextY += ball2.velocityY; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-16T18:46:46.147

函数有错误`collideBalls`：

```
var direction1 = Math.atan2(ball1.velocitY, ball1.velocityX); 
```

它应该是：

```
var direction1 = Math.atan2(ball1.velocityY, ball1.velocityX); 
```

# android - 在android中每2分钟显示一次toast的后台服务

> ID：11066057
> 
> 赞同：1
> 
> 时间：2012-06-16T18:36:32.357
> 
> 标签：android, service, broadcastreceiver, alarmmanager

我正在编写一个在后台执行某些操作（即服务）的小型 android 应用程序，我希望它在每隔“x”分钟后显示一条 toast 消息。我该如何使用广播监听器和警报管理器来做这件事。有人可以写一个示例代码来演示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-09T09:31:22.280

您可以通过在课堂上使用`Timer`和轻松做到这一点。`TimerTask``Service`

**1.**在您的`Service`类中，首先创建一个内部类`DisplayToastTimerTask`，扩展 from `TimerTask`以显示`Toast`消息。您必须使用`Handler`with`Runnable`来显示`Toast`from `TimerTask`：

```
private class DisplayToastTimerTask extends TimerTask {

    Handler mHandler = new Handler();

    @Override
    public void run() {

        // Do something....

        mHandler.post(new Runnable() {
            @Override
            public void run() {
                Toast.makeText(getApplicationContext(), 
                               "Hello world", Toast.LENGTH_SHORT).show();
            }
        });

    }
} 
```

**2.**用于`Timer`安排`DisplayToastTimerTask`重复执行的时间间隔为`2 min`

```
private static final int TIMER_INTERVAL = 120000; // 2 Minute
private static final int TIMER_DELAY = 0;

// Create new Timer
Timer mTimer = new Timer();
mTimer.scheduleAtFixedRate(new DisplayToastTimerTask(), TIMER_DELAY, TIMER_INTERVAL); 
```

**例子：**

**#.** 这是完全的工人阶级`Service`：**

```
//MyService.java

import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.support.annotation.Nullable;
import android.widget.Toast;
import java.util.Timer;
import java.util.TimerTask;

public class MyService extends Service {

    private Timer mTimer;
    private Handler mHandler = new Handler();

    private static final int TIMER_INTERVAL = 120000; // 2 Minute
    private static final int TIMER_DELAY = 0;

    @Override
    public void onCreate() {
        super.onCreate();

        if (mTimer != null)
            mTimer = null;

        // Create new Timer
        mTimer = new Timer();

        // Required to Schedule DisplayToastTimerTask for repeated execution with an interval of `2 min`
        mTimer.scheduleAtFixedRate(new DisplayToastTimerTask(), TIMER_DELAY, TIMER_INTERVAL);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        return Service.START_STICKY;
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        // Cancel timer
        mTimer.cancel();
    }

    // Required to do some task
    // Here I just display a toast message "Hello world"
    private class DisplayToastTimerTask extends TimerTask {

        @Override
        public void run() {

            // Do something....

            mHandler.post(new Runnable() {
                @Override
                public void run() {
                    Toast.makeText(getApplicationContext(), "Hello world", Toast.LENGTH_SHORT).show();
                }
            });
        }
    }
} 
```

**#.** 你可以从`service`下面开始你的喜欢：

```
Intent intentMyService = new Intent(context, MyService.class);
mContext.startService(intentMyService); 
```

**#.** 不要忘记将`MyService`类声明为`AndroidManifest.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest>
    <application>

        <service android:name=".MyService" />

    </application>
</manifest> 
```

希望这会有所帮助~

# opencv - 如何在python中使用flann_index函数

> ID：11066063
> 
> 赞同：0
> 
> 时间：2012-06-16T18:37:40.657
> 
> 标签：opencv, computer-vision, python-2.7

我是 Python 中 OpenCV 的新手。

我安装了 Python 2.7 的 OpenCV 2.4.0。

谁能解释一下这个函数的参数是什么？一个简单的例子会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:38:19.147

OpenCV 有一个这个函数的例子：[find_obj.py](http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/samples/python2/find_obj.py#L27)

文档没有解释 python 签名，但参数可以映射到[C++ 文档](http://docs.opencv.org/modules/flann/doc/flann_fast_approximate_nearest_neighbor_search.html)。

# python - 程序意外停止

> ID：11066065
> 
> 赞同：0
> 
> 时间：2012-06-16T18:37:54.470
> 
> 标签：python, exception, overflow

我编写了这个程序，该程序应该打印出 100 到 200 之间的质数。（我在此过程中添加了一些额外的打印命令，这样我就可以看到它到达了哪里。）谁能给我一个关于它为什么停止的提示在 137，而脚本正在检查这个数字？

谢谢！

这是脚本：

```
import math
import sys
index=100.0
checker=2.0

def start():
    print("A")
    global index
    while index<=200.0:
        fu1()
    if index>200.0:
        end()

def fu1():
    print ("B")
    print ("checker", checker)
    print ("index", index)
    global index
    global checker
    varb=index/checker
    varb2=round(index/checker, 0)
    if checker>=index:
        print ("C")
        print(index)
        index=index+1.0
        checker=2.0
        start()
    if varb2==varb:
        print("D")
        checker=2.0
        index=index+1.0
        start()
    checker=checker+1.0
    fu1()

def end():
    print("E")
    print("ENDED")
    sys.exit()

start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:50:08.487

您的程序已达到递归调用数量的限制（我认为在 python 中默认为 1000）......您可以通过使用此命令来增加它`sys.setrecursionlimit(5000)`。

# c++ - 如何使用 Qt5 编写 C++11？

> ID：11066068
> 
> 赞同：16
> 
> 时间：2012-06-16T18:38:05.920
> 
> 标签：c++, qt, gcc, c++11, cross-platform

我正准备和我的朋友一起编写一个跨平台项目。我们决定分别使用 Qt 和 gcc 作为我们的 IDE 和工具链。他在 Linux 上工作，我在 Windows 上工作。

但是，Linux 上的 gcc 不一定是 Windows 上的 gcc。更具体地说，Windows 上的 Qt 使用 gcc 4.4 安装 mingw，而我的朋友使用 gcc 4.7。所以我尝试为 Windows 获取更新的 gcc 版本。

我当前的 Qt 版本是 5，并使用从该站点下载并安装的 gcc 4.7：http: [//www.equation.com/servlet/equation.cmd? fa=fortran](http://www.equation.com/servlet/equation.cmd?fa=fortran)

我将它安装在 C:\QtSDK\mingw 并简单地覆盖了 Qt 安装中存在的所有文件。我想如果我只是走捷径，我就不必在 Qt 中重新配置任何东西。

但是，即使使用编译器标志：

```
QMAKE_CXXFLAGS += -std=c++0x (Qt 4.7) 
```

和

```
CONFIG   += c++11 (Qt5) 
```

IDE 或工具链无法编译简单的基于范围的 for 循环：

```
int main(int argc, char *argv[])
{
    int my_array[5] = {1, 2, 3, 4, 5};
    for (auto x : my_array)
        std::cout << x << std::endl;

    return 0;
} 
```

或初始化列表：

```
int main(int argc, char *argv[])
{
    QVector<int> testsData { 1, 2, 10, 42, 50, 123  };
    QStringList options = { QLatin1String("foo"), QLatin1String("bar")  };

    return 0;
} 
```

然而，看看 gcc 4.7 的实现细节，这两个特性以及更多特性都应该很容易获得。

有没有其他人尝试在 Windows 上使用 gcc 和 Qt？如果是这样，你是如何让它工作的？我想要一个使用 gcc 4.6 或 4.7 的解决方案，但如果根本不可能，我会接受更少。

或者，是否有使用 C++11 特性的 Linux 和 Windows 开发环境？如果它能正常工作，我也会满足于 Qt 之外的其他东西......

我使用了以下来源：

[Qt 中的 C++0x (Qt 4.7-4.8)](http://labs.qt.nokia.com/2011/05/26/cpp0x-in-qt/)

[Qt5 中的 C++11](http://woboq.com/blog/cpp11-in-qt5.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T18:52:12.587

```
QMAKE_CXXFLAGS += -std=c++0x 
```

导致错误，因为您没有使用 MinGW 编译器。“D9002：忽略未知选项`-std=c++0x`”是来自 MSVC 编译器的错误。

在 QtCreator 中，转到项目选项卡（左侧）并更改您正在使用的工具链。如果它没有自动检测到 MinGW，您将不得不通过单击管理按钮自己添加它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-09T09:43:56.237

## **更新：**

根据此链接：[https ://wiki.qt.io/How_to_use_C%2B%2B11_in_your_Qt_Projects](https://wiki.qt.io/How_to_use_C%2B%2B11_in_your_Qt_Projects)

现在可以这样做：

```
CONFIG += c++11 
```

或者

```
CONFIG += c++14 
```

此外，即将推出的 Qt 5.7 将默认需要 C++11 编译器，并将放弃对旧版非 C++11 编译器的支持。

## **较早的更新：**

要启用***C++11*** - 需要 GCC 4.7 和更高版本：

**qmake**构建系统：

```
QMAKE_CXXFLAGS += -std=c++11 
```

**qbs**构建系统：

```
cpp.cxxLanguageVersion: "c++11" 
```

要启用***C++14*** - 需要 GCC 4.9 和更高版本：

**qmake**构建系统：

```
QMAKE_CXXFLAGS += -std=c++14 
```

**qbs**构建系统：

```
cpp.cxxLanguageVersion: "c++14" 
```

* * *

**注意：**请注意“c++11”、“c++14”等是区分大小写的。

* * *

## **过时的版本：**

**qbs**构建系统：

```
cpp.cxxFlags: "-std=c++11"
cpp.cxxFlags: "-std=c++14" 
```

## **旧版本：**

Qt5 现在推荐使用 GCC 4.7。使用 GCC 4.7，您可以使用 QMAKE_CXXFLAGS += -std=c++11

**编辑：**使用 GCC 4.9，现在可以通过传递此标志来启用 C++14：QMAKE_CXXFLAGS += -std=c+11

# quickfix - 使用带有 dds 和/或 tibco 的修复 - 想法？

> ID：11066071
> 
> 赞同：0
> 
> 时间：2012-06-16T18:38:20.147
> 
> 标签：quickfix, data-distribution-service

如果我要通过 dds 实现修复协议，而不是使用 quickfix 引擎及其发送/接收修复消息的方式，你会建议我如何处理它？

我是dds的新手。我知道我可能必须配置主题，但是要修复的主题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:49:56.027

您应该考虑使用 TargetCompID（标签 49）和/或其他标题标签（DeliverToCompID 标签 128）来设计主题。这些标签的值要么*是*主题，要么您使用它们来查找要发布的主题（即在路由表/内存映射中查找）。这是建立买方/卖方中心的常用方法。

或者，您可以以类似的方式使用 Symbol（标签 55）、Account（标签 1）、ExDest（标签 207）或任何其他标签。这一切都取决于用例。

RV 上的 FIX 非常常见 - 生产中的整个大型应用程序使用 FIX 接收数据并使用 RV 路由到其他“出站”FIX 会话。你在正确的轨道上。

# java - LinkedHashMap 后进先出还是先进先出？

> ID：11066075
> 
> 赞同：13
> 
> 时间：2012-06-16T18:38:40.667
> 
> 标签：java, data-structures, fifo, linkedhashmap

LinkedHashMap 本质上是 LIFO 还是 FIFO？如果我的地图是以下形式：

```
map.put(1,"one");
map.put(2,"two"); 
```

如果我要使用键集在地图上迭代，顺序是什么？

编辑：我想我确实混淆了两个不同的概念。让我重新表述这个问题。我使用 entryset 遇到数量的顺序是什么？谢谢你指出这一点。我不打算删除任何条目。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T18:50:05.930

在链接的哈希映射中，支持双向链表中的元素被添加到末尾（显然：为了保留迭代顺序），但是当元素从映射中删除时，可以从列表的任何部分中删除，这是不正确的将后备列表（以及扩展名：映射）标记为 LIFO 或 FIFO，两者都不是 - 映射中没有删除顺序的概念，因此不能为链接哈希映射中的后备列表假定删除顺序。

链接哈希映射*确实*保证迭代其内容（无论是键还是条目）将按照元素插入映射的顺序发生；从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)：

> 此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。

**编辑 ：**

关于问题的最后一次编辑， a`LinkedHashMap` *保证*的迭代顺序`keySet()`将与插入元素的顺序相同：`1, 2`对于问题中的示例。这与 FIFO/LIFO 无关，这些概念涉及从数据结构中删除元素的顺序，与插入元素后的迭代顺序无关。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-16T18:48:21.223

引用[javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)的 LinkedHashMap是“Map 接口的哈希表和链表实现，具有可预测的迭代顺序”。所以 keySet 将根据**插入的顺序**返回键，本质上是一个 FIFO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T18:54:08.910

根据 Java 文档，如果您要遍历地图，则键集将按插入顺序排列。因此，您获得的第一个键是输入的第一个键，而不是现有键。请注意，重新插入键值对不会更改原始键位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T19:36:10.717

当不使用访问顺序时（标准情况），您可以将 LHM 视为一个链表，通过键快速访问 O(1)。

在这方面，当访问顺序未使用时，它是 FIFO（查看 c-tors）。当使用访问顺序时，插入顺序无关紧要，`get()`因为它们重新排序条目时是否有任何操作。看看`protected boolean removeEldestEntry(Map.Entry<K,V> eldest)` 最年长的=FIFO。

本质上，LHM 是一个很好的双向链表，`Map.Entry<Key, Value>`在键上具有哈希索引。我自己从来没有像现在的 impl 那样使用 vanilla HashMap。与 LHM 相比，它几乎没有什么好处——内存占用少，但迭代非常糟糕。Java8（或 9）也许最终会修复 HashMap，希望 Doug Lea 能够推动他的实现。

# android - Android：服务-活动通信

> ID：11066078
> 
> 赞同：0
> 
> 时间：2012-06-16T18:39:04.240
> 
> 标签：android, android-intent, android-activity, android-service

我只是在学习使用服务，有点卡住了。

我有一个`IntentService`用于下载文件队列的文件。我有一个`Activity`能够打开和关闭应该下载哪些文件的功能。文件下载完成后，我在`SharedPreferences`. 我有两个问题/问题：

1.  启动 Service 的原始 Activity 很可能会消失，但很有可能该 Activity 的新实例已经启动。在这种情况下，我需要向该 Activity 发送一条消息以检查 SharedPreferences 并相应地更新它的 UI。因此我的问题是：**如何向可能正在运行或未运行的活动发送消息？**

2.  活动可以在服务运行时打开和关闭应下载的文件。这造成了几种情况。如果服务未运行并且文件已打开，那么我想将此文件添加到它的队列中来启动它。如果服务正在运行并且文件被打开，那么我只想将文件添加到它的队列中。如果服务没有运行并且文件被关闭，我已经有了删除它的方法。但是，如果服务正在运行并且尚未下载文件，我想将其从队列中删除，或者如果它当前正在下载它，则停止下载它。我在我的 SharedPreferences 中保留了应该下载的文件，所以我想所有这些都可以通过向服务发送消息来检查 SharedPreferences 来涵盖。这就引出了我的第二个问题：**如果服务正在运行，我如何获得，如果是，向它发送消息？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T18:44:46.937

您可能想要的是某种绑定服务。 [http://developer.android.com/guide/topics/fundamentals/bound-services.html](http://developer.android.com/guide/topics/fundamentals/bound-services.html) 您可以向它发送消息并从中接收消息。因此，当您的活动再次启动时，它可以再次绑定到服务并在下载完成时接收回调。此外，活动可以向服务发送消息以开始或停止下载。好的部分：当你绑定到它并且它还没有运行时，服务就会启动。

希望这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:07:33.117

您的问题 1 和问题 2 的可能答案：

使用广播接收器：http: [//developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

对于问题 1：您可以将您的活动注册到您将定义的某种接收器，并在您想要广播时发送。如果活动已注册到广播 - 它会接收它...

对于问题 2：相同的答案：将您的服务注册到特殊广播代表您要传递给该服务的消息。如果它没有运行（并且没有注册到广播） - 那么什么都不会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-07T14:57:41.980

用于[`LocalBroadcastManager`](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)发送意图，它们将留在应用程序范围内，然后在活动中使用广播接收器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T19:09:21.760

```
ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager
            .getRunningServices(Integer.MAX_VALUE)) {
        if ("com.pkg.PlayerService".equals(service.service
                .getClassName())) {
            isrunning = true;
            ;
        }
    }
    return isrunning; 
```

运行此代码可为您提供服务状态。您可以在您的 intentService 的 onDestroy() 中登录并检查您的服务何时停止。

# r - 提取 R 中的连续出现（如 unix uniq）

> ID：11066080
> 
> 赞同：2
> 
> 时间：2012-06-16T18:39:51.727
> 
> 标签：r

我开始为我的论文分析数据。我首先需要将连续出现的字符串计为一个。这是一个示例向量：

```
test <- c("vv","vv","vv","bb","bb","bb","","cc","cc","vv","vv") 
```

我想简单地提取唯一值，就像在 unix 命令 uniq 中一样。所以预期的输出将是一个向量：

"vv","bb","cc","vv"

我查看了 rle 函数，这似乎很好，但是如何将 rle 的输出作为向量？我似乎不明白 rle 类...

```
> rle(test)
Run Length Encoding
  lengths: int [1:5] 3 3 1 2 2
  values : chr [1:5] "vv" "bb" "" "cc" "vv" 
```

如何获得 rle 输出的值的一个向量和长度的另一个向量？希望我说清楚...

再次感谢任何帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:47:21.503

`rle()`返回 class 的二元素列表`"rle"`；正如@gsk 指出的那样，您可以使用普通的列表索引结构来访问分量向量。

另外，试试这个，把结果`rle`变成更熟悉的格式：

```
as.data.frame(rev(unclass(rle(test))))
#   values lengths
# 1     vv       3
# 2     bb       3
# 3              1
# 4     cc       2
# 5     vv       2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T18:52:25.690

资料来源：[http ://www.sigmafield.org/2009/09/22/r-function-of-the-day-rle](http://www.sigmafield.org/2009/09/22/r-function-of-the-day-rle)

解决方案：`rle(test)$values`

他们使用：`coin.rle <- rle(coin)`所以`coin.rle$values`，`rle(test)$values`应该工作。

# android - Android 中的 XmlPullParser 问题

> ID：11066081
> 
> 赞同：0
> 
> 时间：2012-06-16T18:40:23.173
> 
> 标签：android, xmlpullparser, xmlexception

因此，在查看代码时，读取 xml 时不会引发异常......工作正常。

```
public void ReadXML() throws XmlPullParserException, IOException
   {

      factory = XmlPullParserFactory.newInstance();
      factory.setNamespaceAware(false);
      xpp = factory.newPullParser();

      InputStream raw = getApplicationContext().getAssets().open("trial_info.xml");
      xpp.setInput(raw,null);
   }
} 
```

问题出在 doXML 方法中，我试图在其中读取文本 b/w 两个标签...例如。

```
<trial>
<title>The Book</title>
<author></author>
....
</trial> 
```

生成的错误是 18:19:41.654: W/System.err(329): org.xmlpull.v1.XmlPullParserException: name expected (position:START_TAG @59:57 in java.io.InputStreamReader@44f049c8)

我认为代码可能比它需要的更复杂......但无法找出错误。谢谢

```
public void doXML() throws  XmlPullParserException, IOException{

          int eventType = XmlPullParser.START_TAG;

          while(eventType != XmlPullParser.END_DOCUMENT)
          {
              if(eventType == XmlPullParser.TEXT && xpp.getText().equals(selectedTrial))
              {
                   trialTxt = (TextView)findViewById(R.id.TrialAbbrevData);
                   trialTxt.setText(xpp.getText());
                   Log.d("what is this", xpp.getText());

           while(!(eventType == XmlPullParser.END_TAG && xpp.getName().equals("...")))
                   {  

           if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialName"))
                      {    
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                            trialTxtDesc = (TextView)findViewById(R.id.TrialNameData);
                            trialTxtDesc.setText(xpp.getText());
                            Log.d("in loop",xpp.getText());
                         }
                      }

         if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialDetails"))
                      {   
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                            trialTxtConc = (TextView)findViewById(R.id.TrialDescData);
                            trialTxtConc.setText(xpp.getText());
                         }
                      }

         if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialResults"))
                      {   
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                            trialTxtConc = (TextView)findViewById(R.id.TrialResultsData);
                            trialTxtConc.setText(xpp.getText());
                         }
                      }

        if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("trialConclusion"))
                      {   
                         eventType = xpp.next();
                         if(eventType == XmlPullParser.TEXT)
                         {
                            trialTxtConc=(TextView)findViewById(R.id.TrialConclusionData);
                            trialTxtConc.setText(xpp.getText());
                         }
                      }

        if(eventType == XmlPullParser.START_TAG && xpp.getName().equals("whatItMeans"))
                      {  
                          eventType = xpp.next();
                          if(eventType == XmlPullParser.TEXT)
                          {
                             trialTxtMeans = (TextView)findViewById(R.id.TrialWIMData);
                             trialTxtMeans.setText(xpp.getText());
                          }
                      }

                      eventType = xpp.next();

                   }         

            }
              eventType = xpp.next();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:55:04.510

错误消息似乎表明 XML 文件中的错误，而不是代码中的错误。

# jsf-2 - 如何从 id 获取所选复选框值的名称？

> ID：11066083
> 
> 赞同：0
> 
> 时间：2012-06-16T18:40:37.343
> 
> 标签：jsf-2, primefaces

我已经渲染了复选框，并且我已经渲染了选定的复选框值，如下所示：

```
 <h:selectManyCheckbox id="chkedition" value="#{adcreateBean.selectedEditions}" layout="lineDirection" styleClass="nostyle">
                                        <f:selectItems value="#{adcreateBean.editions}" var="item" itemLabel="#{item.editionName}" itemValue="#{item.editionID}"/>
  <p:ajax update="dt1" />

    </h:selectManyCheckbox>
    <h:dataTable id="dt1" value="#{adcreateBean.selectedEditions}" var="it" styleClass="nostyle" width="100%">
     <f:facet name="header">
      <h:outputText value="You have selected :" />
      </f:facet>
     <h:column>
         <h:outputText value="#{it}" />
     </h:column>
     </h:dataTable> 
```

我的问题是，它显示所选值的 id。但我想要选定值的名称（标签）。所以我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:45:56.513

您`itemValue`确实只通过了版本 ID。您需要改为传递版本名称。

```
<f:selectItems value="#{bean.editions}" var="edition" 
    itemLabel="#{edition.name}" itemValue="#{edition.name}"/> 
```

或者，只是传递整个`Edition`对象。

```
<f:selectItems value="#{bean.editions}" var="edition" 
    itemLabel="#{edition.name}" itemValue="#{edition}"/> 
```

您只需要创建一个在和`Converter`之间转换的自定义。`Edition``String`

# matlab - matlab中如何将向量添加到矩阵中？

> ID：11066084
> 
> 赞同：2
> 
> 时间：2012-06-16T18:40:39.910
> 
> 标签：matlab

如何将向量添加到 Matlab 中的矩阵，以将向量的 i 索引添加到 i 行中的所有成员？

例如：

```
A = [1 2 3;
     4 5 6;
     6 7 8]
v = [1;
     2;
     3] 
```

所需的结果是：

```
[2 3 4;
 6 7 8;
 9 10 11] 
```

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T18:53:46.790

您可以使用[bsxfun](http://www.mathworks.fr/help/techdoc/ref/bsxfun.html)：

```
B=bsxfun(@plus,A,v); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-16T23:48:17.107

纯娱乐：

```
A + v(:,[1 1 1]); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-16T19:16:56.917

另一种方法`bsxfun`是使用[`repmat`](http://www.mathworks.nl/help/techdoc/ref/repmat.html)和重复列向量与列`v`一样多`A`：

```
A = [1 2 3; 4 5 6; 6 7 8];
v = [1; 2; 3]

A = A + repmat(v,1,3); 
```

# python - 不使用类时使用 map 或类似方法更新字典

> ID：11066085
> 
> 赞同：1
> 
> 时间：2012-06-16T18:40:41.510
> 
> 标签：python, function, dictionary, map, functional-programming

当一个人不使用方法时，什么是最好的，实现以下的方法。

1.  具有将项目添加到字典的单个功能
2.  向字典添加多个项目时使用该功能
3.  这会让一切都变得超级慢吗？

以下作品，我对使用它不是很认真，但对可能的事情很感兴趣。

创建和更新字典的简单函数。

```
from collections import defaultdict
from functools import partial

def addfoo(mydict, foo):
    x,y,z = foo
    mydict[x].add((y,z))
    mydict[y].add((x,z))
    return mydict

makemydict = partial(addfoo, defaultdict(set))

foo = ('foo','bar',1)

mydict = makemydict(foo)

print(mydict)
# defaultdict(<class 'set'>, {'foo': {('bar', 1)}, 'bar': {('foo', 1)}}) 
```

虽然下一部分有效，但我想知道是否有一种方法可以使用 map 来在“foos”（复数）上运行该函数。但是由于 addfoo 函数返回一个值，它怎么能被映射。以下工作，但还有其他方法吗？

```
def addfoos(mydict, foos):
    for foo in foos:
        mydict = addfoo(mydict,foo)
    return mydict

makemany = partial(addfoos, defaultdict(set))

foos = { ('foo','bar',1),
         ('bar','baz',0) }

mydict = makemany(foos)

print(mydict)
# defaultdict(<class 'set'>, {'baz': {('bar', 0)}, 'foo': {('bar', 1)}, 'bar': {('foo', 1), ('baz', 0)}}) 
```

事实上，它可以工作......但我很好奇python是否有 fmap 或类似的。

* * *

好的......对于任何偶然发现这一点的人——使用reduce！

以下，虽然有不同的变量正是我的目标：

```
from collections import defaultdict
from functools import partial
from functools import reduce

def addnode(graph, node):
    x,y,z = node
    graph[x].add((y,z))
    graph[y].add((x,z))
    return graph

def addnodes(graph, nodes):
    return reduce(addnode, nodes, graph)

graphnode  = partial(addnode, defaultdict(set))
graphnodes = partial(addnodes, defaultdict(set)) 
```

现在，可以调用函数 (`addnode`或`addnodes`) 来更新字典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:51:59.143

您想要`reduce`，而不是`map`，因为您将输入减少为单个结果，而不是将它们一对一地转换为结果列表。

```
>>> reduce(addfoo, foos, defaultdict(set))
defaultdict(<type 'set'>, {'baz': set([('bar', 0)]), 'foo': set([('bar', 1)]), 'bar': set([('foo', 1), ('baz', 0)])}) 
```

那是python 2.6。Python3 版本的工作原理相同，但现在`reduce`是`functools`：

```
>>> from functools import reduce
>>> reduce(addfoo, foos, defaultdict(set))
defaultdict(<class 'set'>, {'baz': {('bar', 0)}, 'foo': {('bar', 1)}, 'bar': {('foo', 1), ('baz', 0)}}) 
```

# android - Android：拖动搜索栏时歌曲播放不完美

> ID：11066089
> 
> 赞同：1
> 
> 时间：2012-06-16T18:41:02.430
> 
> 标签：android, media-player

我正在开发一个音乐应用程序。SeekBar 进度根据歌曲完美变化，但是当我拖动搜索栏时，歌曲没有完美播放/拖动。例如：当我将搜索栏的位置从 1:20 拖动到 1:50 时，拖动后，1:20 的一首歌曲（1 秒）正在播放，然后歌曲从 1:50 开始照常继续。而且即使在拖动搜索栏时，歌曲也不能流畅地拖动。我从市场上安装了2-3个音乐应用程序，它们在拖动搜索栏时播放歌曲很流畅。

这是我在 Activity 中编写的代码：

```
songSeekBar.setOnTouchListener(new OnTouchListener(){
   @Override
   public boolean onTouch(View v, MotionEvent event) {
   SeekBar sb = (SeekBar)v;
   myMediaPlayer.seekTo(sb.getProgress());
   return false;
   }
}); 
```

拖动搜索栏时，有什么方法可以使歌曲顺利进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T18:45:02.130

不要在`OnTouchListener`这里使用。相反，使用[`OnSeekBarChangeListener`](http://developer.android.com/reference/android/widget/SeekBar.OnSeekBarChangeListener.html)，这会更好。

# tsql - SQL Server 书籍

> ID：11066090
> 
> 赞同：0
> 
> 时间：2012-06-16T18:41:05.113
> 
> 标签：tsql, sql-server-2012

我已经在 SQL 中工作了 8 个月，并且具有基本的知识。现在我想提高我在编写 TSQL、构建逻辑和存储过程方面的技能。谁能推荐一些好书或培训？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:02:24.807

有关性能调整（包括在查询级别），请参阅[此 dba.stackexchange 问题](https://dba.stackexchange.com/questions/18934/some-book-suggestions-for-performance-tuning/)。我可以在这里重复所有这些建议，但我认为这会适得其反。

从您的问题和标签中不清楚您是否想总体上提高 T-SQL 技能，或者您是否想专注于 SQL Server 2012 的新技术。上述问题应该有助于了解一般知识，而以下问题将有所帮助专门针对最新版本（以下内容仍将包含许多可能对早期版本有所帮助的信息 - 例如，Itzik 的书显示了许多常见场景的查询前后）。

对于 SQL Server 2012，请查看[Itzik Ben-Gan 的 2012 年窗口函数一书](https://rads.stackoverflow.com/amzn/click/com/B007X4M3LK)；新的窗口函数为某些查询模式提供了比现有方法更可取的解决方案（例如，这是我们第一次有一种受支持且可靠的方法来运行不需要 (a) 游标，(b) 指数昂贵的总计）自加入或 (c) 不受支持的“古怪”更新）。

[联机丛书](http://msdn.microsoft.com/en-us/library/cc645577)很好地总结了 SQL Server 2012 中的一些新的可编程性增强功能，并且可能是学习诸如`SEQUENCE`、`FORMAT()`和. 一些印刷书籍，如[Programming Microsoft SQL Server 2012](https://rads.stackoverflow.com/amzn/click/com/0735658226)尚未发布。`TRY_CONVERT()``OFFSET/FETCH`

# javascript - 无尽的页面导轨

> ID：11066094
> 
> 赞同：0
> 
> 时间：2012-06-16T18:41:45.173
> 
> 标签：javascript, jquery, ruby-on-rails, will-paginate, jquery-masonry

大家好，我的无尽页面 js 代码运行良好，但由于某种原因，它只触发第二页。我对找到的一些代码进行了一些更改以满足我的需求，但现在不是继续加载项目，而是在我的控制台记录状态时在第 2 页停止。这是我的代码，有人可以检查它并告诉我为什么这没有触发吗？至于我的分页，我使用的是 will_paginate gem，我得到了底部页面的链接，所以后面的 es 工作正常。先感谢您。

编辑 2：如果有人遇到我的问题，这是我的最终设置。

```
- content_for :scripts do
  :javascript
    (function() {
      var divContainer = $('#posts-container');
      var page = 1,
          loading = false;
      var current_url = divContainer.data('url') + '?page=';

      function nearBottomOfPage() {
        return $(window).scrollTop() >= $(document).height() - $(window).height() - 10;
      }

      $(window).scroll(function(){
        if (loading) {
          return;
        }

        if(nearBottomOfPage()) {
          loading=true;
          page++;
          $.ajax({
            url: current_url + page,
            type: 'get',
            dataType: 'script',
            success: function(html) {
              var $items = $(html).find('.item');
              jQuery(".content").append($items).masonry( 'appended', $items, true );
              $(".content").masonry('reload');
            },
            error: function() {
              console.log("Error")
            },
            complete: function() {
              loading = false;
            }
          });
        }
      });
    }()); 
```

编辑1：

我发现 nearBottomOfPage() 函数无法正常工作。它只触发第一次，并且永远不会再次返回 true。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:01:52.420

我注意到的一件事是您将“正在加载”标志设置为`true`：

```
if(nearBottomOfPage()) {
  loading=true; 
```

但您从未将其设置回`false`. 这意味着您的`nearBottomOfPage()`支票只会被触发一次。

尝试更新您的 AJAX 成功处理程序以重置`loading`：

```
success: function(html) {
  var $items = $(html).find('.item');
  $(".content").append($items).masonry( 'appended', $items, true );
  $(".content").masonry('reload');
  console.log("Reloaded masonry");
  loading = false; // <----------------------------- This is sort of important.
} 
```

您可能还想向 AJAX 添加错误处理程序。然后你可以将 移动`loading = false;`到`complete`回调：

```
success: function(html) {
  // As you have it now...
},
error: function() {
  // Complain or something...
},
complete: function() {
  loading = false;
} 
```

# java - 具有相同事件侦听器的堆叠组件

> ID：11066099
> 
> 赞同：0
> 
> 时间：2012-06-16T18:42:08.707
> 
> 标签：java, swing, events, event-handling

我有一个 JPanel (A)，其中包含另一个 JPanel (B)。每个面板都实现了一个 MouseMotionListener 和一个 MouseListener。在拖动时，只有内部/上面板 (B) 响应此事件。所以我从 A 中删除了 MouseMotionListener，从 B 中删除了 MouseListener。第二个测试表明 A 仅在光标位于 B 之外时才会响应。

是否有两个面板对同一个听众做出反应的解决方案。我需要每个事件的 getX() 方法。每个面板应在拖动事件中返回另一个 x 值。因此，就我而言，事件转发不是解决方案。

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:06:38.077

我不相信 Swing 为事件冒泡提供任何支持（这意味着一个元素上的事件不会传输到其父元素）。解决方法是将父对象传递给子对象，并在子对象上发生事件时手动调用其事件处理程序（不是很好，但它有效）。

# c# - 堆栈跟踪跳过一个方法？

> ID：11066105
> 
> 赞同：1
> 
> 时间：2012-06-16T18:42:56.140
> 
> 标签：c#, .net, reflection, exception-handling, stack-trace

我有一个`Foo`方法类`SomeMethod()`。在`SomeMethod()`中，我运行：`Bar bar = new Bar(); bar.BBQ();`。在其中`BBQ()`，我调用了`Name(n)`引发消息异常的私有方法`new StackTrace().GetFrame(n).GetMethod().Name`。

我的意图是将 1 传递给 Name(n)，以便它返回值“BBQ”。但是，Name(0) 返回“Name”，而 Name(1) 返回“SomeMethod”。在引发异常的堆栈跟踪中，它也读起来好像 Name 是由 SomeMethod 直接调用的（没有提到 BBQ）。

有没有解决的办法？有谁知道可能导致此错误的原因是什么？是否有更好的方法来完成从 Name 获取值“BBQ”？

```
[TestClass]
public class Foo
{
    public Foo()
    {
    }
    [TestMethod]
    public void SomeMethod()
    {
        Bar bar = new Bar();
        bar.BBQ();
    }
}

public class Bar
{
    public Bar()
    {
    }
    public void BBQ()
    {
        Name( 1 );
    }
    private void Name( int n )
    {
        throw new Exception( new StackTrace().GetFrame(n).GetMethod().Name );
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T18:51:44.210

我强烈怀疑问题在于 JIT 编译器正在内联该方法。您可能可以通过在调试器中运行调试版本来验证这一点，并查看是否可以解决问题。

您可以相对容易地[获得*立即*调用方法](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getcurrentmethod.aspx)，但我相信在非调试器环境中获得完全准确的堆栈跟踪是不可行的。毕竟，您不想禁用内联。

# vba - If-then / 为单元格引用中定义的日期范围选择案例

> ID：11066107
> 
> 赞同：1
> 
> 时间：2012-06-16T18:43:15.560
> 
> 标签：vba, excel, select-case

我为新手问题道歉，但尚未在线找到解决方案。我正在尝试对 VBA 中的日期范围做一个简单的 if-then 语句。到目前为止我的代码（不工作）：

```
 LR = 52
            Set rngData = Range("D2:D" & LR)
            'define the data range to evaluate
            For Each rngCell In rngData
                Select Case rngCell.Value
                    Case Val(Range("'Some_dates'!O8").Value) To Val(Range("'Some_dates'!P8").Value): rngCell.Value = Range("'Some_dates'!N8").Value
                    Case Val(Range("'Some_dates'!O9").Value) To Val(Range("'Some_dates'!P9").Value): rngCell.Value = Range("'Some_dates'!N9").Value
                    Case Val(Range("'Some_dates'!O10").Value) To Val(Range("'Some_dates'!P10").Value): rngCell.Value = Range("'Some_dates'!N10").Value
                    Case Val(Range("'Some_dates'!O11").Value) To Val(Range("'Some_dates'!P11").Value): rngCell.Value = Range("'Some_dates'!N11").Value
                Case Else: rngCell.Value = "Outside date ranges"
                End Select
            Next rngCell 
```

所有单元格的输出都是“日期范围之外”，这意味着它为 rngData 中的所有单元格选择了“else”值，这是不正确的。

“Some_dates”工作表中的单元格 O8:P11 定义了四个日期范围（开始是 O 列，结束是 P 列）。这些日期可能看起来像数字或日期，具体取决于您格式化单元格的方式。“Some_dates”工作表中的 N 列包含每个日期范围的标签。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T18:56:53.573

如果您要比较的所有内容都是日期，那么`Val`就是问题所在。 `Val(1/1/2012)`，其中 1/1/2012 是“真实”Excel 日期（或就此而言是假的）返回“1”。Val 返回字符串的开头直到第一个非数字字符。所以，试试：

```
Case Range("'Some_dates'!O8").Value To Range("'Some_dates'!P8").Value: rngCell.Value = Range("'Some_dates'!N8").Value 
```

当日期以 General 或 Number 格式存储时，您的代码应该可以工作，因为 Val 返回整个数字（字符串）。

# ruby-on-rails - 无法在嵌套模型编辑页面的 _form 视图中显示图像

> ID：11066108
> 
> 赞同：2
> 
> 时间：2012-06-16T18:43:24.897
> 
> 标签：ruby-on-rails, nested-forms, carrierwave, railscasts

我正在使用 Carrierwave 将图像字段添加到基于 Ryan Bates 修订的 #196 截屏视频的 Rails 嵌套模型中。Carrierwave 位基于他的截屏视频 #253

问题和答案模型嵌套在类别模型中。

我可以让图像上传并显示在“显示”页面上。但是当我返回编辑视图时，没有图像，我仍然看到选择文件按钮旁边的“未选择文件”文本。我可以来回切换到 Show 页面，它仍然出现在 Show 中，但永远不会出现在 Edit 中。我的用户会认为他们每次都必须上传新图片！

我的显示视图中有这行代码：

```
<%= image_tag question.image_url(:thumb).to_s if question.image? %> 
```

但是如果我尝试将其放入 _form 视图中，则会出现未知的局部变量或方法错误。

我已经尝试了几个 if 语句，但没有得到它的工作。我试图把它全部放在编辑视图中，但无济于事。

我的 _form 视图：

```
<%= form_for @category, :html => {:multipart => true} do |f| %>
  <% if @category.errors.any? %>
    <div class="error_messages">
      <h2><%= pluralize(@category.errors.count, "error") %> prohibited this category from being saved:</h2>
      <ul>
      <% @category.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div id="categorytitle" class="field">
    <%= f.label :name, "Category Name" %><br />
    <%= f.text_field :name %>
  </div>

  <%= f.fields_for :questions do |builder| %>
    <%= render 'question_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add Question", f, :questions %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我的 _questions 部分

```
<fieldset id="questionarea">
  <%= f.label :content, "Question" %>
  <%= f.text_field :content%>
  <hr>
  <div class="field">
    <p>
      <%= f.check_box :active, class: "pull-left" %>
      <%= f.label :active %>
      <span class="help-block">Turning questions on and off helps you customize the category.</span>
    </p>
  </div>
  <hr>

  <div class="field clearthat">
    <%= f.label :image, "Add an Image"%>
    <span class="help-block">Images will help non-readers understand the question.</span>
    <%= f.file_field :image %>
    <%= f.hidden_field :image_cache %>
  </div>
  <hr>
  <!-- <%= link_to "remove", '#', class: "remove_fields" %> -->
  <p class="clearthat">&nbsp;</p>
  <%= f.fields_for :answers do |builder| %>
    <%= render 'answer_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add Answer", f, :answers %>
</fieldset> 
```

有一个 _answer 部分，但似乎没有考虑到它。

这是我尝试将图像直接放入我的 _question 部分时收到的错误消息（从上面的 _question 代码的中心截取）：

```
<div class="field clearthat">
  <%= f.label :image, "Add an Image"%>
  <span class="help-block">Images will help non-readers understand the question.</span>
  <%= image_tag question.image_url(:thumb).to_s  if question.image?  %>
  <%= f.file_field :image %>
  <%= f.hidden_field :image_cache %>
</div> 
```

这是我得到的错误：

```
NameError in Categories#edit
undefined local variable or method `question' 
```

我的类别模型：

```
class Category < ActiveRecord::Base
  attr_accessible :name, :questions_attributes
  has_many :questions
  accepts_nested_attributes_for :questions, allow_destroy: true
end 
```

我的问题模型：

```
class Question < ActiveRecord::Base
  attr_accessible :content, :category_id, :answers_attributes, :active, :image, :image_cache
  belongs_to :category
  has_many :answers
  accepts_nested_attributes_for :answers, allow_destroy: true
  mount_uploader :image, ImageUploader
end 
```

我的类别控制器：

```
class CategoriesController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update, :destroy]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy

def index
  @categories = Category.all
end

def show
  @category = Category.find(params[:id])
end

def new
  @category = Category.new
end

def create
  @category = Category.new(params[:category])
  if @category.save
    redirect_to @category, :notice => "Successfully created category."
  else
    render :action => 'new'
  end
end

def edit
  @category = Category.find(params[:id])
end

def update
  @category = Category.find(params[:id])
  if @category.update_attributes(params[:category])
    redirect_to @category, :notice  => "Successfully updated category."
  else
    render :action => 'edit'
  end
end

def destroy
  @category = Category.find(params[:id])
  @category.destroy
  redirect_to categories_url, :notice => "Successfully destroyed category."
end

private

  def signed_in_user
    unless signed_in?
      store_location
      redirect_to signin_path, notice: "Please sign in."
    end
  end

  def correct_user
    @user = User.find(params[:id])
    redirect_to(root_path) unless current_user?(@user)
  end

  def admin_user
    redirect_to(root_path) unless current_user.admin?
  end 
```

结尾

感谢任何能提供帮助的人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T02:29:18.940

也许我的问题没有被很好地提出，因为我没有得到任何帮助。但我终于想通了！

这是导致问题的代码行：

```
<%= image_tag question.image_url(:thumb).to_s if question.image? %> 
```

这是有效的代码行：

```
<%= image_tag f.object.image_url(:thumb) %> 
```

我并不完全清楚，但似乎我的问题是部分的，并且调用了一个名为 question 和 rails 的方法不知道我的意思。

我在这个 stackoverflow QA 中找到了答案：[Rails Nested Forms With Images](https://stackoverflow.com/questions/7599812/rails-nested-forms-with-images)

现在我有了一个有效的 if 语句，所以我的用户可以更改图像：

```
<% if f.object.image? %>
  <%= image_tag f.object.image_url(:thumb) %>
  <%= f.file_field :image %>
<% else %>
  <%= f.file_field :image %>
  <%= f.hidden_field :image_cache %>
<% end %> 
```

接下来我必须弄清楚如何更改 file_field 按钮上的值。

# linux - wget 仅记录成功下载的 url

> ID：11066112
> 
> 赞同：4
> 
> 时间：2012-06-16T18:44:42.723
> 
> 标签：linux, shell, wget

我只想记录成功下载的网址。我尝试使用-o log.txt，但这是记录所有内容，如标题、ip ...

我只想要一个简单的列表

```
http://example/
http://example/toto.html
http://example/sub/tata.html 
```

我怎么能做到这一点？

我的 wget ：

```
wget http://example.com/ -r -v -S -R js,css,png,gif,jpg,pdf -o log.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:00:02.360

您可以尝试以下方法：

```
wget http://example.com/ -r -nv -S -R js,css,png,gif,jpg,pdf 2>&1 | perl -ne 's|^.*URL:(https?://.*?) .*|\1|; print "$1\n"' 
```

请注意，我使用*-nv*（无详细）而不是*-v*。我还将输出从标准错误重定向到标准输出，所以它可以由 Perl 在管道中处理。损坏的链接在 wget 输出中具有不同的格式，因此您只会获得成功下载的链接（这是您要求的）。

# iphone - 切换视图时的 iOS 特定行为

> ID：11066114
> 
> 赞同：1
> 
> 时间：2012-06-16T18:44:49.820
> 
> 标签：iphone, objective-c, cocoa-touch, viewwillappear

我看到一个与调用子视图方法相关的奇怪问题，这似乎是特定于 iOS 版本的。

我有两个带有父视图控制器的可交换视图，而不是确定显示哪一个。基本上有一个登录视图，当您登录时换出到帐户视图，并在您注销时换回登录。

代码非常简单。这是您登录时调用的父视图控制器的示例方法：

```
- (void) showAccountView:(BOOL)animated
{
    if(self.accountController == nil)
        self.accountController = [[[AccountViewController alloc] initWithNibName:@"AccountViewController" bundle:nil] autorelease];

    [self.loginController viewWillDisappear:animated];
    [self.accountController viewWillAppear:animated];

    [self.loginController.view removeFromSuperview];
    [self.view insertSubview:alertsController.view atIndex:0];

    [self.loginController viewDidDisappear:animated];
    [self.accountController viewDidAppear:animated];
} 
```

还有一个类似这样的用于显示登录视图。很简单。我遇到的问题是 viewWillAppear、viewDidAppear、viewWillDisappear、viewDidDisappear 方法在 iOS 4.3 下都被调用一次，但在 iOS 5.0 和 5.1 下调用了两次。

例如，在所有 iOS 版本中，子视图的 viewWillAppear 会在父视图直接调用时被调用（当然）。但是，只有 iOS 5.0 和 5.1 会在调用 insertSubview 期间再次调用它。

所以，如果我删除除了对 removeFromSuperview 和 insertSubview 的调用之外的所有内容，它看起来像这样：

```
- (void) showAccountView:(BOOL)animated
{
    if(self.accountController == nil)
        self.accountController = [[[AccountViewController alloc] initWithNibName:@"AccountViewController" bundle:nil] autorelease];

    [self.loginController.view removeFromSuperview];
    [self.view insertSubview:alertsController.view atIndex:0];
} 
```

现在在 5.0 和 5.1 下，subview 方法在 insertSubview 期间每个只被调用一次。但是，它会导致 4.3 下的问题，因为它们根本没有被调用。

我已经阅读了几篇与确保调用子视图方法相关的帖子，但我还没有看到类似这样的行为是依赖于 iOS 的。

此外，我能想到的唯一方法是在运行时检查 iOS 版本并直接为 iOS 4.3 调用子视图方法，而不是在 5.0 和 5.1 下调用它们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:30:42.573

你不应该在另一个视图控制器中拥有一个视图控制器的内容，除非在 iOS 5 中添加了新的父/子视图控制器支持。现在正式支持使用许多新方法（例如 addChildViewController、transitionFromViewController:toViewController:持续时间：选项：动画：完成）

如果您确实尝试在 iOS 4 或更早版本下将一个视图控制器的视图托管在另一个视图控制器中，那么您每一步都在与操作系统作斗争。

# python - Phantomjs 在 Windows 7 中找不到脚本

> ID：11066143
> 
> 赞同：0
> 
> 时间：2012-06-16T18:48:35.293
> 
> 标签：python, windows-7, phantomjs

我正在尝试从 python 启动一个 phantomjs 进程，但由于某种原因它没有找到我的脚本文件：

```
 PHANTOM = 'C:\\Users\\ahald1\\phantomjs'
    SCRIPT = 'C:\\Users\\ahald1\\hello.js'
    params = [PHANTOM, SCRIPT]
    exitcode = subprocess.call(params) 
```

hello.js 包含：

```
 console.log('Hello, world!');
    phantom.exit(); 
```

这返回`Can't open 'C:\Users\ahald1\hello.js'`

尝试从 cmd 执行此操作会返回相同的错误，但`phantomjs --version`会返回一个值。我在 Windows 7 上运行 python 2.7.3。

抱歉新手问题，并提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:52:08.763

最有可能的是，您`hello.js`以不同的文件名保存了文件，例如`hello.js.txt`. 如果您将文件保存在记事本或其他文件类型不是*All Files*的编辑器中，则可能会发生这种情况。确保[启用文件扩展名显示](http://windows.microsoft.com/en-us/windows-vista/show-or-hide-file-name-extensions)。

或者，您可能已将 hello.js 文件保存在与`C:\Users\ahald1\`.

# html - 如何为所有屏幕尺寸自动居中缩略图

> ID：11066145
> 
> 赞同：1
> 
> 时间：2012-06-16T18:48:40.590
> 
> 标签：html, css, thumbnails, center, fluid-layout

```
body{
    width:auto;
    color:white;
    font-size:15px;
    width:100%;
    max-width:1980px;
    min-width:334px;    
    margin:0px auto;
} 
```

这是我的代码。我需要缩略图位于所有屏幕分辨率的中心。但我做不到。我什至尝试过标签。它也没有用。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:01:25.303

看到这个网址：http: [//jsfiddle.net/DyRS4/2/](http://jsfiddle.net/DyRS4/2/)

html:

```
<div id="my-div">my div</div> 
```

CSS：

```
div#my-div{
    margin:0px auto;
    background: red;
    width: 100px;
    height: 100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:27:48.390

使用以下组件：

*   height:100% 用于 html 标签、body 标签、容器和一个空的占位符元素

*   显示：内联块；和 vertical-align: middle 用于内容和占位符，用于垂直居中跨浏览器具有未定义高度的内容。

*   占位符元素被赋予 100% 的高度来支撑线框，因此 vertical-align: middle 具有预期的效果。

*   一个固定宽度的容器来包装图像。

*   display:inline 用于内容 div 和 text-align center 到容器 div 以对跨浏览器具有未定义宽度的内容进行水平居中。

结合垂直对齐和文本对齐技术来创建一个居中的图片库：

```
 <!doctype html>
    <html>
    <head>
    <title>Centered Image Gallery</title>
    <style type="text/css">
    html, body, .container, .placeholder { height: 100%;}

    img { width:16px; height:16px; margin-left: 20px; margin-top: 10px; }

    .container { text-align:center; }

    /* Use width of less than 100% for Firefox and Webkit */
    .wrapper { width: 50%; }

    .placeholder, .wrapper, .content { vertical-align: middle; }

    /* Use inline-block for wrapper and placeholder */
    .placeholder, .wrapper { display: inline-block; }

    .fixed { min-width: 1px; }

    .content { display:inline; }

    @media,
     {
     .wrapper { display:inline; }
     }
     </style>

    </head>
      <body>
      <div class="container">
        <div class="content">
            <div class="wrapper">
              <div class="fixed">
                <img src="http://microsoft.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://microsoft.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
                <img src="http://mozdev.org/favicon.ico">
                <img src="http://webkit.org/favicon.ico">
                <img src="https://vivaldi.com/favicon.ico">
                <img src="http://www.srware.net/favicon.ico">
                <img src="http://build.chromium.org/favicon.ico">
                <img src="http://www.apple.com/favicon.ico">
                <img src="http://opera.com/favicon.ico">
            </div>
          </div>
       </div>
       <span class="placeholder"></span>
    </div>

    </body>
    </html>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T20:17:00.620

CSS

```
.picture_area { width:/*width of picture area you want in pixels*/;
                height: auto; 
                min-width:/*smallest size of window in pixels that does not push pics left*/;}
                margin-left: auto; margin-right: auto; }
.navigation_area { margin-bottom: 5%; } 
```

HTML

```
 <div class="navigation_area">
        <!--Nav code here-->
    </div>

    <div class="picture_area">
          <!--All your image code here-->
    </div> 
```

您可能希望为放置缩略图的区域创建一个特殊的 div。首先
，您需要设置导航面板的底部边距，这样它们就不会与您的图片重叠。然后用像素定义缩略图区域的宽度。例如`宽度：500px; 然后将 min-width 属性设置为不向左推图片的最小尺寸。例如最小宽度：500px；。然后将其在页面中居中设置 margin-left 和 margin-right 为图片区域自动。

# javascript - imacros点击页面的flash元素

> ID：11066146
> 
> 赞同：1
> 
> 时间：2012-06-16T18:48:54.553
> 
> 标签：javascript, flash, imacros

我想知道如何使用 imacros 单击 Flash 中的页面元素

```
http://i.imgur.com/djkiv.jpg 
```

这是该元素的代码图片。

imacros 也可以选择页面元素并单击该元素上的坐标吗？

我需要所有这些，因为我需要找到一种方法使鼠标悬停在 Flash 上并单击该页面上 Flash 上的某个位置。我也在 imacros 中尝试了 DS 命令，但由于某种原因它们不起作用。

# php - 哪个编码效率更高？

> ID：11066148
> 
> 赞同：-2
> 
> 时间：2012-06-16T18:49:13.653
> 
> 标签：php, mysql, performance

我有一个圣经项目，我需要专家的一些输入来确定在页面中显示结果时哪个更快、更有效。

我的圣经表目前只包含 3 个字段？id、verse_code 和 verse_content。

为了让我能够在单词中显示适当的圣经书和经文（例如创世记 1:1），我正在对 verse_code 进行 switch-case 语句，其中包括 66 个案例，例如......

```
select (verse_code)
{
case 1: echo "Genesis";
case 2: echo "Exodus";
...
case 66: echo "Revelation";
} 
```

我可以保持这种方式，或者我可以添加新列**book_name**并输入每个相应经文的书名。这将相当于 31,103 行。

性能方面，这两种方法之间更快。我应该保留我的案例陈述，我应该输入 31,103 行的书名吗？

测试代码在这里。 [http://sandbox.littlegraffyx.com/bible/test.html](http://sandbox.littlegraffyx.com/bible/test.html)要使用它，请尝试输入 Gen x:x 其中 x 是章节和诗句以及书的前 3 个字母。样本：Gen 1:1 或 Exo 2:2

文本框位于左下角

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:02:32.423

最好的方法是在查询中使用查找表，无论如何您都在往返于数据库，并且对于数据库连接数据，它的设计目的是：

```
CREATE TABLE verses (verse_id INT PRIMARY KEY AUTO_INCREMENT,book_id INT NOT NULL, chapter INT NOT NULL,verse INT NOT NULL, verse_content TEXT NOT NULL, FOREIGN KEY(book_id) REFERENCES books(book_id)) ENGINE = InnoDB;

CREATE TABLE books(book_id INT PRIMARY KEY AUTO_INCREMENT,book_name VARCHAR(100)) ENGINE = InnoDB; 
```

在 verses 表中，您会看到一个 book_id 字段，该字段用作书籍的[外键](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)（因此您确定它链接到现有书籍），并且您以后可以在查询中使用该字段将来自 verses 的数据与来自 book_name 的数据[连接](http://dev.mysql.com/doc/refman/5.6/en/select.html)在一起图书。

然后，您可以使用指定书 book_id 必须是您在 verses 中找到的查询条件来查找它，并且您的查询将自动返回正确的书名。

```
 SELECT book_name,chapter,verse,verse_content FROM verses,books WHERE books.book_id = verses.book_id; 
```

[联接](http://en.wikipedia.org/wiki/Join_%28SQL%29)是真正使您能够掌握数据的伟大 SQL 概念之一，Jeff Atwood 的这篇[博客文章](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)将让您清楚地了解它们对您意味着什么。我真的建议你调查一下。:)

作为额外的好处，由于您可能不只是为了自己使用而编写此代码，因此通过将代码放入数据库中来抽象化可视化数据允许您将此方面（数据输入和数据更正）交给其他人可以完全不了解（底层）编码。

如果您打错字并称其为 Potter 而不是 Peter，您是否希望人们必须更改您的源代码，或者为他们提供一个远离您的代码的漂亮界面以允许他们将其更改为 Peter 会更安全吗？

它还允许您通过让他们都插入数据而不相互干扰或干扰您的代码来将工作分配给更多人。

# android - android如何在媒体播放器的表面视图中调整视频宽度和高度

> ID：11066152
> 
> 赞同：5
> 
> 时间：2012-06-16T18:49:59.547
> 
> 标签：android, android-layout, android-video-player

**想要在表面视图中调整视频大小**

我正在使用 Surface 视图和视频支架在 Media Player 中播放视频...

*// 但在某些设备上实现 MediaPlayerControl 时，例如 Micromax、iball、Akash 平板电脑，它给出了 ACRA 错误跟踪所跟踪的抽象方法不可用的错误。*

现在我想解决提到的问题：

*   如何使媒体播放器控件在所有设备中处于活动状态而不会由于某些设备中的媒体控制器的抽象方法而崩溃。

*   如何调整视频的表面视图大小。

该代码在**三星galaxy gt p1000 OS 2.2**和一些更便宜的设备WorldTeck等上运行f9。

但在**Creative ziio 7 操作系统版本为 2.2.1 (480*800)** **分辨率密度为 160 dpi**视频似乎被缩放并从边缘被切断。

代码如下所示：

```
/* Media Player Control is commented due to force close in some devices say *micromax,Creative ziio, akash etc */

    public class VideoViewerActivity extends Activity implements
            OnBufferingUpdateListener, OnCompletionListener, OnPreparedListener,
            OnVideoSizeChangedListener, SurfaceHolder.Callback {
        // implements  ERROR in some devices , MediaPlayerControl
        private static final String TAG = "MediaPlayerDemo";
        private int mVideoWidth;
        private int mVideoHeight;
        private MediaPlayer mMediaPlayer;
        private SurfaceView mPreview;
        private SurfaceHolder holder;
        private String path = "";
        private Bundle extras;
        private static final String MEDIA = "media";
        private static final int LOCAL_AUDIO = 1;
        private static final int STREAM_AUDIO = 2;
        private static final int RESOURCES_AUDIO = 3;
        private static final int LOCAL_VIDEO = 4;
        private static final int STREAM_VIDEO = 5;
        private boolean mIsVideoSizeKnown = false;
        private boolean mIsVideoReadyToBePlayed = false;
        /* ERROR In Abstract method implementation in the other devices */
        // private MediaController mediaController;
        private Context context;
        private final Handler handler = new Handler();

        /**
         * 
         * Called when the activity is first created.
         */
        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.video_layout);
            context = this;
            path = getIntent().getExtras().getString("media");

            Log.v("arpit", "path " + path);
            mPreview = (SurfaceView) findViewById(R.id.surfaceview1);
            holder = mPreview.getHolder();
            holder.addCallback(this);
            holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            extras = getIntent().getExtras();

        }

        private void playVideo() {
            doCleanUp();
            try {

                // Create a new media player and set the listeners
                File f = new File(path);
                // FileInputStream in = new FileInputStream(f);

                RandomAccessFile randomAccessFile = new RandomAccessFile(f, "r");
                // randomAccessFile.skipBytes(1024);
                FileDescriptor fileDescriptor = randomAccessFile.getFD();

                mMediaPlayer = new MediaPlayer();
                mMediaPlayer.setDataSource(fileDescriptor, Constant.key1.length
                        + Data.deviceID.length(), f.length());

                mMediaPlayer.setDisplay(holder);
                mMediaPlayer.prepare();
                mMediaPlayer.setOnBufferingUpdateListener(this);
                mMediaPlayer.setOnCompletionListener(this);
                mMediaPlayer.setOnPreparedListener(this);
                mMediaPlayer.setOnVideoSizeChangedListener(this);
                mMediaPlayer.setScreenOnWhilePlaying(true);

                // mediaController = new MediaController(this);
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

            } catch (Exception e) {
                Log.e(TAG, "error: " + e.getMessage(), e);
                Toast.makeText(context, "supported video was not found",
                        Toast.LENGTH_SHORT).show();
                finish();
            }
        }

        public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
            Log.v(TAG, "onVideoSizeChanged called");
            if (width == 0 || height == 0) {
                Log.e(TAG, "invalid video width(" + width + ") or height(" + height
                        + ")");
                return;
            }
            mIsVideoSizeKnown = true;
            mVideoWidth = width;
            mVideoHeight = height;
            if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
                startVideoPlayback();
            }
        }

        public void surfaceDestroyed(SurfaceHolder surfaceholder) {
            Log.d(TAG, "surfaceDestroyed called");
        }

        public void surfaceCreated(SurfaceHolder holder) {
            Log.d(TAG, "surfaceCreated called");
            playVideo();

        }

        private void doCleanUp() {
            mVideoWidth = 0;
            mVideoHeight = 0;
            mIsVideoReadyToBePlayed = false;
            mIsVideoSizeKnown = false;
        }

        private void startVideoPlayback() {
            Log.v(TAG, "startVideoPlayback");
//also tried and used the below line but nothing good 

// holder.setFixedSize(480, 800);

holder.setFixedSize(mVideoWidth, mVideoHeight);

mMediaPlayer.start();

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T11:28:41.683

I used TextureView instead of surface view (it allows to rotate video) and set its setScale{X|Y}() appropriately in:

```
@Override
public void onVideoSizeChanged(MediaPlayer mp, int w, int h) {
    if (w > 0 && h > 0) {
        RelativeLayout.LayoutParams l;
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        l = new RelativeLayout.LayoutParams(metrics.heightPixels, metrics.widthPixels);
        l.addRule(RelativeLayout.CENTER_IN_PARENT, -1);
        float scale = (metrics.heightPixels * 1.0f) / (metrics.widthPixels * 1.0f);
        videoView.setScaleX(scale);
        videoView.setLayoutParams(l);
        Log.d(YourApp.TAG, "video size: " + mp.getVideoWidth() + "x" + mp.getVideoHeight() + " vertical scale: " + scale);
    }
} 
```

Note that I have rotated my video, this is why I set scale for X.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:03:16.237

嗨，arpit，我也在使用与您提到的播放视频文件相同的设备，我在将控件应用于视频播放器时遇到了同样的问题（抽象方法不可用）。

根据我对这个主题的研发，我得出的结论是，定制的 android 操作系统和这些设备的硬件彼此不兼容，因为它们与三星设备相比质量很差，尽管它们在 android 中有很多方法操作系统，但此类设备不支持。

所以我认为在这些设备中没有解决此类问题的方法。

请尝试在开发任何项目时专注于使用标准设备。这可能对您有很大帮助。

谢谢。:)

# c# - 如何检查多个文本字段的空值；

> ID：11066156
> 
> 赞同：-2
> 
> 时间：2012-06-16T18:50:31.863
> 
> 标签：c#, .net

如何检查三个不同的文本字段是否有空值？我有以下代码，但它给出了错误。你能在 if 语句中测试三个不同的条件吗？

```
public bool IsFieldBlank(string fieldValue)
    {
        if (fieldValue != null)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    private bool ValidateFields()
    {
//attempts to check all three fields but will not compile to do syntex
        if(IsFieldBlank(incidentTextBox.Text),IsFieldBlank(returnTextBox.Text),IsFieldBlank(actionTextBox.Text))
        {
            return true;
        }
        else
        {
            return false;

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:51:21.417

这更短：

```
return string.IsNullOrWhitespace(fieldValue); 
```

如果您不在 .NET 4.0 或更高版本上，您可以使用：

```
return string.IsNullOrEmpty(fieldValue); 
```

您仍然需要单独检查*每个*字段。

如果您在表单中有这些，您可以递归地迭代子控件集合并为每个控件检查它是否是`TextBox`（使用`is`关键字）并检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:02:22.917

```
 private bool ValidateFields()     
{ 
        return !(string.IsNullOrEmpty(incidentTextBox.Text) || string.IsNullOrEmpty(returnTextBox.Text) || string.IsNullOrEmpty(actionTextBox.Text));
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T18:53:32.607

进行这样的检查时，您必须使用逻辑 AND 运算符。

```
if(IsFieldBlank(incidentTextBox.Text) && IsFieldBlank(returnTextBox.Text) &&IsFieldBlank(actionTextBox.Text)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T18:53:46.477

您需要将您的 if 语句从

```
 if(IsFieldBlank(incidentTextBox.Text),IsFieldBlank(returnTextBox.Text),IsFieldBlank    (actionTextBox.Text)) 
    { 
        return true; 
    } 
```

对此：

```
 if((IsFieldBlank(incidentTextBox.Text))&&(IsFieldBlank(returnTextBox.Text))&&(IsFieldBlank(actionTextBox.Text))) 
    { 
        return true; 
    } 
```

这将允许您的代码编译。如果所有文本框都是空白的，这将返回 true。如果您希望它在其中任何一个为空白的情况下返回 true，那么您将需要使用 OR 运算符 ||

# mysql - MySQL中的if语句

> ID：11066158
> 
> 赞同：0
> 
> 时间：2012-06-16T18:50:43.653
> 
> 标签：mysql, if-statement

我想在 MySQL 查询中使用 if 语句来查询`SELECT`数据库中的所有信息，如果它返回 true，或者返回`COUNT`名为`aid`​​ .

伪代码：

```
IF (COUNT(`AID`) > 0) {
  SELECT * FROM `a_votes` WHERE `aid` = '1'
} ELSE {
  RETURN 'No Rows'
} 
```

请你能告诉我我该怎么做吗？

编辑 - -

我尝试了以下查询，但收到错误消息`Operand should contain 1 column(s)`

```
SELECT IF( (

SELECT COUNT( aid ) AS  `count` 
FROM  `a_votes` 
WHERE  `aid` =1 ) =0,  'true', (

    SELECT * 
    FROM  `a_votes` 
    WHERE  `aid` =1
  )

) AS message 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:00:29.020

```
SELECT * FROM (
    SELECT COUNT(*) as COUNT FROM a_votes WHERE aid = '1'
) x WHERE COUNT > 0; 
```

如果没有匹配的行，一个简单的将返回一个用于计数`COUNT(*))`的单行。`0`将常规`COUNT(*)`查询包装在消除该条件的外部查询中将不返回任何行。

### 编辑：

感谢[`@bisiclop`](https://stackoverflow.com/users/260007/biziclop)，这是一个更好的解决方案：

```
SELECT COUNT(*) as COUNT
FROM a_votes
WHERE aid = '1'
HAVING COUNT(*) > 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:59:37.503

如果我想将您的伪代码转录为 SQL，这将是结果，但我认为它不必要地复杂，所以它只是一个演示：

```
/* this query might return zero rows, so beware */
SELECT
  (SELECT COUNT(`aid`) > 0 FROM `a_votes`) AS the_count,
  the_row.*
FROM
  (SELECT * FROM `a_votes` WHERE `aid` = '1') AS the_row 
```

同样 using `LEFT JOIN`，它必须至少返回一行：

```
SELECT *
/* count will create exactly 1 row */
FROM      (SELECT COUNT(`aid`) > 0 FROM `a_votes`)    AS the_count
/* this is allowed to return 0,1,...N rows */
LEFT JOIN (SELECT * FROM `a_votes` WHERE `aid` = '1') AS the_row 
```

# php - 为您的 Web 应用程序使用 api 的优点和缺点是什么。

> ID：11066159
> 
> 赞同：3
> 
> 时间：2012-06-16T18:51:12.997
> 
> 标签：php, mysql, codeigniter, rest, xml-rpc

我正在使用 codeigniter 构建一个 Web 应用程序。而不是 http 服务器通过 php 与 MySQL 通信，如果我构建 2 个应用程序会怎样，第一个将直接与 MySQL 通信，并用作 api 服务器。也许使用 xml rpc 或休息..

第二个应用程序，它将服务于前端，http 的东西，但直接与 api 服务器对话，而不是与 MySQL 对话

使用这种方法的优缺点是什么。一切都将在内部在同一网络上运行，但只有 http / 前端服务器可以通过负载平衡器访问 Web。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T18:56:48.193

优点：

*   如果您更改对数据库的调用，则不必更改第二个应用程序。
*   您可以通过复制前端来处理更多请求，同时接受不同类型的传入请求
*   您可以在其他地方重复使用数据访问应用程序

缺点：根据您的需要，可能会过大

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T18:59:12.387

优点

*   它将使您的应用程序更加模块化，允许在不破坏应用程序其他部分的情况下进行更改
*   这将使测试更容易，因为您可以独立地测试这两个部分

缺点

*   可能过于复杂导致维护问题
*   由于抽象总是会引入开销，因此会导致性能变慢

# sql-server-2008 - 根据字符串变量内容对结果进行排序

> ID：11066161
> 
> 赞同：0
> 
> 时间：2012-06-16T18:51:29.247
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。

我想按我作为字符串保存的特定顺序对结果进行排序

（字符串是以编程方式创建的）。

考虑这张表：

```
Col1    Col2    Col3
1       Jon     a
2       Joan    b
3       John    a
4       Jonnie  b
5       Jonny   a 
```

我有一个`nvarchar`声明为 的变量`@myOrderString`，其中包含我要选择的行的顺序。

让我们这么说`@myOrderString = '213'`（编辑）

所以，我想做这样的事情：

```
SELECT 
    ROW_NUMBER() OVER (ORDER BY @mySortString) AS Row, 
    ( Col2 + '(' + Col1 + ')' ) AS Outcome
FROM 
    myTable 
WHERE 
    Col3 = 'a' 
ORDER BY 
    @mySortString 
```

为了得到结果：（已编辑）

```
Row Outcome
1   John (3)
2   Jon (1)
3   Jonny (5) 
```

我什至如何开始解决这个问题？

附言

如果中的值`@myOrderString`应该分开，我可以做到`@myOrderString = '2,1,3'`（编辑）

* * *

编辑问题的原因：

1.  字符串内容有错误。[标记为（已编辑）]
2.  结果出现错误。感谢 Andriy M. [标记为（已编辑）]
3.  我添加了外观更改并更正了一些语法和拼写错误。

* * *

澄清：（此澄清的一部分基于 Aaron Bertrand 的评论）

1.  字符串中的值数始终与结果中的行数匹配。
2.  字符串中的值始终是从 1 到行数的数字。
3.  第一个结果的行标记为 1；第二个标记为 2，第三个标记为 3。现在，该字符串用于对结果进行重新排序。当字符串`2,1,3`为时表示选择结果被重新排序：第二行现在将作为第一行，第一个结果将显示为第二，第三行将保持第三
4.  最大行数为 15，因此字符串可以是形式`123456789ABCDEF`，或者如果这种简化形式的解决方案不简单，则字符串可以是形式`1,2,3,4,5,6,7,8,9,10,11,12,13,14,15`

* * *

感谢这里和那里的许多人，我已经达到了以下解决方案：

（不需要函数或循环）

```
-- creating the original table and filling it
DECLARE @t TABLE(Col1 INT, Col2 VARCHAR(22), Col3 CHAR(1));

INSERT @t VALUES
(1,'Jon',   'a'),
(2,'Joan',  'b'),
(3,'John',  'a'),
(4,'Jonnie','b'),
(5,'Jonny', 'a');

-- this is the required order of the results
DECLARE @myOrderString VARCHAR(32) = '213';

-- this is my current solution
SELECT 
    ROW_NUMBER()OVER (ORDER BY CHARINDEX(CAST(rr AS NVARCHAR(MAX)), @myOrderString)) As [Row],
    Outcome 
FROM 
    (
        SELECT 
            ROW_NUMBER()OVER (ORDER BY Col1) AS rr, 
            Col2 + ' (' + CONVERT(NVARCHAR(22),Col1)+ ')' AS Outcome 
        FROM @t 
        WHERE  Col3 = 'a'
    ) as r
ORDER BY 
    [Row] 
```

但是，它最多可以处理 9 行结果，而我最多可以使用 15 行来表示表单`123456789ABCDEF`。

我尝试通过使用对结果的行号使用 Dec 到 Hex 转换`CONVERT(CHAR(1),CONVERT(VARBINARY(1),@Dec))`，但没有运气。

**是否有一个*简单*的更正可以使它起作用？**

* * *

## 一个长示例（超过 9 行）

为了测试超过 9 行的示例，我使用以下命令：

```
-- creating the original table and filling it
DECLARE @t TABLE(Col1 INT, Col2 VARCHAR(22), Col3 CHAR(1));

INSERT @t VALUES
(1,'Jon',   'a'),
(2,'Joan',  'b'),
(3,'John',  'a'),
(4,'Jonnie','b'),
(5,'Jonny', 'a'),
(6,'Don',   'a'),
(7,'Doan',  'b'),
(8,'Dohn',  'a'),
(9,'Donnie','b'),
(10,'Donny', 'a'),
(11,'Gon',   'a'),
(12,'Goan',  'a'),
(13,'Gohn',  'a'),
(14,'Gonnie','a'),
(15,'Gonny', 'a');

-- this is the required order of the results
DECLARE @myOrderString VARCHAR(32) = '456B213A789'; 
```

* * *

## 一个完整的解决方案：

我将在这里使用答案部分的循环提供我的完整解决方案，而不将其作为答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:15:00.437

使您的字符串以逗号分隔会好得多。您可以使用这样的拆分功能：

```
CREATE FUNCTION dbo.SplitInts
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
AS
    RETURN (SELECT Number = ROW_NUMBER() OVER (ORDER BY Number),
        Item FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
      FROM sys.all_objects) AS n(Number)
      WHERE Number <= CONVERT(INT, LEN(@List))
      AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
    ) AS y
    WHERE ISNUMERIC(Item) = 1
  );
GO 
```

现在你可以这样做：

```
DECLARE @myOrderString VARCHAR(32) = '2,1,3';

DECLARE @t TABLE(col1 INT, col2 VARCHAR(32), col3 CHAR(1));

INSERT @t VALUES
(1,'Jon',   'a'),
(2,'Joan',  'b'),
(3,'John',  'a'),
(4,'Jonnie','b'),
(5,'Jonny', 'a');

SELECT 
  [Row] = s.Number, 
  Outcome = t.col2 + ' (' + CONVERT(VARCHAR(12), t.col1) + ')' 
FROM 
(
  SELECT col1, col2, rn = ROW_NUMBER() OVER (ORDER BY col1)
  FROM @t WHERE col3 = 'a'
) AS t 
INNER JOIN 
  dbo.SplitInts(@myOrderString, ',') AS s
  ON s.Item = t.rn 
ORDER BY s.Number; 
```

再次，结果：

```
Row  Outcome
--   ----------
1    John (3)
2    Jon (1)
3    Jonny (5) 
```

**编辑**

这是一个不使用函数的版本（尽管我不确定为什么在这种情况下如此令人反感），不需要列表以逗号分隔（根据OP 的自我回答），并且不必在继续之前在循环中手动填充表变量（这会导致整体计划的成本更低，即使当您忽略循环时 OP 答案中的最终查询确实看起来更便宜）插入）。这将返回与 OP 的自我回答相同的结果（给定新的“长示例”示例数据添加到问题中），但同样限制为 15 个最大排序值。

```
;WITH n(n,c) AS 
(
  SELECT CASE WHEN n < 10 THEN n ELSE n -7 END, CHAR(n+48)
  FROM 
  (
    SELECT TOP (21) n = ROW_NUMBER() OVER (ORDER BY [object_id])
    FROM sys.objects ORDER BY [object_id]
  ) AS x WHERE n BETWEEN 1 AND 9 OR n BETWEEN 17 AND 21
),
x(Outcome, n) AS 
(
  SELECT col2 + ' (' + CONVERT(VARCHAR(12), col1) + ')', 
  ROW_NUMBER() OVER (ORDER BY col1)
  FROM (SELECT col1, col2 FROM @t WHERE col3 = 'a') AS y
)
SELECT [Row] = ROW_NUMBER() OVER (ORDER BY 
    COALESCE(NULLIF(CHARINDEX(n.c, @myOrderString), 0), 16)), 
  Outcome FROM x LEFT OUTER JOIN n ON x.n = n.n
ORDER BY [Row], Outcome; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:49:03.727

我是这个问题的作者。我不认为这个答案是答案。

该解决方案基于对每个字符进行循环`@myOrderString`。

这里给出这个解决方案是为了启发，希望能根据我在问题中描述的解决方案找到一个解决方案。

## 创建原始表并填充它：

```
DECLARE @t TABLE(Col1 INT, Col2 VARCHAR(32), Col3 CHAR(1));

INSERT @t VALUES
(1,'Jon',   'a'),
(2,'Joan',  'b'),
(3,'John',  'a'),
(4,'Jonnie','b'),
(5,'Jonny', 'a'),
(6,'Don',   'a'),
(7,'Doan',  'b'),
(8,'Dohn',  'a'),
(9,'Donnie','b'),
(10,'Donny', 'a'),
(11,'Gon',   'a'),
(12,'Goan',  'a'),
(13,'Gohn',  'a'),
(14,'Gonnie','a'),
(15,'Gonny', 'a') 
```

## 这是所需的结果顺序

```
DECLARE @myOrderString VARCHAR(32) = '456B213A789' 
```

## 使用 Order Colomn (OC) 将字符串转换为表格

我希望有一个内置函数可以将 [delimited] 字符串转换为执行类似操作的表。

```
DECLARE @ot TABLE (PK INT IDENTITY(1,1) PRIMARY KEY CLUSTERED, OC INT)
DECLARE @i int
SET @i = 0
WHILE @i < LEN(@myOrderString) 
    BEGIN
        SET @i = @i + 1
        IF ASCII(UPPER(SUBSTRING(@myOrderString,@i,1))) < 65
            INSERT @ot VALUES (SUBSTRING(@myOrderString,@i,1))
        ELSE
            INSERT @ot VALUES (ASCII(UPPER(SUBSTRING(@myOrderString,@i,1)))-55)
    END 
```

## 按要求的顺序呈现结果：

```
SELECT 
    ROW_NUMBER() OVER (ORDER BY PK) AS [Row], 
    r.Outcome 
FROM @ot 
INNER JOIN (
    SELECT 
        ROW_NUMBER() OVER (ORDER BY Col1) AS [RRow], 
        Col2 +' (' + CONVERT(varchar(11), Col1) + ')' AS Outcome
    FROM @t 
    WHERE Col3 = 'a') AS r
ON OC=RRow 
```

## 附录

对于一个有趣的结果（选择结果的行 - 不需要）尝试设置`@myOrderString = '333222111'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T19:02:44.147

如果您将字符串逗号分隔，则将其插入临时表并加入该表，然后临时表可以包含一个序列号，每次您从逗号分隔字符串中插入一个整数时，该序列号都会递增，并且是你订购的

这是一个非常快速的例子（可能有优化的空间）

```
DECLARE @string varchar(max),
    @delimiter char(1),
    @xml xml

SELECT @string = '3,1,4',
    @delimiter= ','

SELECT @xml = CONVERT(xml,'<root><s>' + REPLACE(@string,@delimiter,'</s><s>') + '</s></root>')

create table #values
(
    seq integer identity(1, 1),
    value integer
)

insert into #values (value)
SELECT [Value] = T.c.value('.','varchar(20)')
FROM @xml.nodes('/root/s') T(c)

select
    v.seq,
    m.Col2,
    m.Col1
from dbo.myTable m
inner join #values v on m.Col1 = v.value
order by v.seq

drop table #values 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T19:25:02.033

根据要求，下面提到的是解决方案......

```
Select col1, Col2 + ' (' + Convert(Varchar, col1) + ')'
From #T
Where CHARINDEX(CAST(Col1 AS NVARCHAR(MAX)), '3,1,4') <> 0
order by CHARINDEX(CAST(Col1 AS NVARCHAR(MAX)), '3,1,4') 
```

## 编辑 -2 UDF 中忽略了非数值。

## 编辑 - 1 支持大于 9 的值

```
declare @myTable table(col1 int, col2 varchar(10), col3 varchar(1))

insert @myTable values
(1,'Jon',   'a'),
(2,'Joan',  'b'),
(322,'John',  'a'),
(4,'Jonnie','b'),
(5,'Jonny', 'a')

Select col1, Col2 + ' (' + Convert(Varchar, col1) + ')'
From @myTable T
INNER JOIN 
(
    Select * From dbo.Split('322,1,4', ',')
)K
ON K.val = T.col1
Order by K.id 
```

* * *

## 用户定义函数

```
CREATE FUNCTION [dbo].[Split](@String varchar(8000), @Delimiter char(1))       
returns @temptable TABLE (id int IDENTITY(1,1), Val Int)       
as       
begin       
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(isnumeric(@slice) = 0) 
        Set @slice = '';

        if(len(@slice)>0)  
            insert into @temptable(Val) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return       
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T19:28:00.313

鉴于提供的数据，您的输出表是不可能的，因为 Jonnie 是“b”而不是“a”。此外，在下面的示例中，'Jonny' 是一个 'a' 但不会返回，因为 5 不在提供的排序字符串中。需要一些关于如何处理这样的行的指导。

```
declare @sortTable table (sortId int identity, sortOrder varchar(1))
declare @sortString nvarchar(100) = '314'

declare @position int = 1
declare @sortOrder varchar(1) = substring(@sortString,@position,1)
while @sortOrder != ''
begin
    insert @sortTable (sortOrder) values (@sortOrder)
    set @position = @position + 1
    set @sortOrder = SUBSTRING(@sortString,@position,1)
end

declare @myTable table(col1 varchar(1), col2 varchar(10), col3 varchar(1))

insert @myTable values
(1,'Jon',   'a'),
(2,'Joan',  'b'),
(3,'John',  'a'),
(4,'Jonnie','b'),
(5,'Jonny', 'a')

SELECT ROW_NUMBER() OVER (ORDER BY rsSort.SortID) AS Row, ( Col2 + '(' + Col1 + ')' ) AS Outcome
FROM @myTable rsMain
inner join @sortTable rsSort on rsSort.sortOrder = rsMain.col1
WHERE Col3 = 'a' 
```

[工作示例](https://data.stackexchange.com/stackoverflow/query/73187 "工作示例。")

# php - 如何在没有 html 标签的情况下从数据库中检索文章

> ID：11066166
> 
> 赞同：1
> 
> 时间：2012-06-16T18:52:10.397
> 
> 标签：php

我正在使用编辑器（ckeditor），在那里创建的文章作为包含 html 标签的格式化文章保存在数据库中。

现在，我想在不获取 html 标签的情况下检索那篇文章，但我必须检索的文章是那些已经格式化的文章。

任何人都可以分享如何做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T18:53:26.440

您可以使用[`strip_tags()`](http://php.net/strip_tags)从字符串中删除 HTML 标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T18:55:08.667

您可以使用 PHP 函数`strip_tags()`来执行此操作，这是链接：

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

> strip_tags($article);

编辑：但在你这样做之前，你可能想`<br>`用一个换行符替换所有标签，`\n`通过使用类似这个函数的东西

```
 function br2nl($article) 
 {
     return preg_replace('/\<br(\s*)?\/?\>/i', "\n", $article); 
 } 
```

# shell - OpenSSL 从 shell 标准输入创建 SHA 哈希

> ID：11066171
> 
> 赞同：20
> 
> 时间：2012-06-16T18:52:28.177
> 
> 标签：shell, unix, openssl

如何在不使用文件的情况下从命令行使用 OpenSSL 生成 SHA-512 哈希？

我试过这个

```
echo "password" | openssl dgst -sha512 
```

但哈希看起来不对（与[http://hash.online-convert.com/sha512-generator](http://hash.online-convert.com/sha512-generator)相比）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-16T18:55:06.880

试试`echo -n "password"`。

正在发生的事情是`echo`添加到字符串末尾的新行字符被散列。`-n`to`echo`抑制这种行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-01T18:29:14.490

如果您使用的是 MacOS，您可能会偶然发现`echo`忽略`-n`参数的情况。要解决此问题，请直接调用二进制文件：

```
/bin/echo -n "password" | openssl sha512 
```

# android - 如何判断何时绘制了膨胀视图？

> ID：11066172
> 
> 赞同：0
> 
> 时间：2012-06-16T18:52:30.863
> 
> 标签：android

当用户单击我的主视图上的按钮时，我会膨胀一个新视图并将其添加到我的主视图中。我的新视图包含一个默认文本为“HelloWorld”的 TextView，同时在我的 textview 上设置我 setText("You have just come from...") 和 getLeft() 和 getRight() 的视图。问题是，它返回的坐标好像文本仍然是“HelloWorld”。

我认为它可能正在这样做，因为尚未绘制更新的文本。但是，如果我在这个新视图中单击一个按钮并在 onClick 中执行 getLeft() 和 getRight()，它会正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:58:27.797

我认为你可以为你的视图创建一个类，然后覆盖[View.onFinishInflate](http://developer.android.com/reference/android/view/View.html#onFinishInflate%28%29)并在那里做你的事情。

应该是一个非常短的类，只有这个方法被覆盖。

或者，您可以使用此处建议的解决方案：[ViewGroup finish inflate event](https://stackoverflow.com/questions/7517636/viewgroup-finish-inflate-event) 但缺点是每次重做或更新布局时都会被回调，而不仅仅是在膨胀之后。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T20:16:22.317

这是一种无需扩展或覆盖任何东西的方法：

```
private static void runJustBeforeBeingDrawn(final View view, final Runnable runnable)
{
    final ViewTreeObserver vto = view.getViewTreeObserver();
    final OnPreDrawListener preDrawListener = new OnPreDrawListener()
    {
        @Override
        public boolean onPreDraw()
        {
            runnable.run();
            final ViewTreeObserver vto = view.getViewTreeObserver();
            vto.removeOnPreDrawListener(this);
            return true;
        }
    };
    vto.addOnPreDrawListener(preDrawListener);
} 
```

在 runnable 参数中，您可以获得更新后的大小和位置以及您需要的所有其他内容。

或者，如果您愿意，您可以使用[`addOnGlobalLayoutListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnGlobalLayoutListener%28android.view.ViewTreeObserver.OnGlobalLayoutListener%29)而不是。[`addOnPreDrawListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnPreDrawListener%28android.view.ViewTreeObserver.OnPreDrawListener%29)

编辑：替代 runJustBeforeBeingDrawn：[https ://stackoverflow.com/a/28136027/878126](https://stackoverflow.com/a/28136027/878126)

# c# - WPF：在运行时对 XMLdataprovider 进行排序

> ID：11066176
> 
> 赞同：0
> 
> 时间：2012-06-16T18:53:06.227
> 
> 标签：c#, wpf, sorting, xmldataprovider

再会！

我花了很长时间来创建自己的 HTPC 应用程序，它基本上允许我简单地浏览和播放我的电影收藏。我编写了另一个小应用程序来索引所有内容并准备一个 XML 文件，其布局如下所示。

一切正常，但现在我想实现一些排序选项。通过按“S”键，我想遍历一些固定的排序方法，例如“按标题”、“按发布日期”、“按流派”……

我的 XAML 是我在网上找到的东西的混搭，不幸的是我不是专家，它显示在凌乱的代码中。它基本上将同人画显示为背景，并在屏幕底部有一个水平滚动条，您可以在其中选择电影（它还将所选电影保持在屏幕中间）。

我将如何解决这个问题？

```
<MOVIES>
  <MOVIE>
    <TITLE></TITLE>
    <PATH></PATH>
    <FANART></FANART>
    <COVER></COVER>
    <RELEASEDATE></RELEASEDATE>
    etc...
  </MOVIE>
</MOVIES>

<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" WindowStartupLocation="CenterScreen" ResizeMode="NoResize" WindowState="Maximized" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="350" Width="525" ShowInTaskbar="True" WindowStyle="None" Loaded="Window_Loaded">
<Window.Resources>
    <XmlDataProvider x:Key="MovieData"
               Source="movies.xml" />

    <DataTemplate x:Key="ItemTemplate">
        <Image Source="{Binding XPath=COVER}" Width="166" Height="250" Margin="0,0" MaxWidth="166" MaxHeight="250" MinWidth="166" MinHeight="250" Stretch="Fill" />
    </DataTemplate>

    <DataTemplate x:Key="SelectedItemTemplate">
        <Border BorderBrush="WhiteSmoke" BorderThickness="3">
            <Image Source="{Binding XPath=COVER}" Width="250" Height="375" Margin="0,0" MaxWidth="250" MaxHeight="375" MinWidth="250" MinHeight="375" Stretch="Fill" />
        </Border>
    </DataTemplate>

    <Style TargetType="{x:Type ListBoxItem}" x:Key="ContainerStyle">
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
        </Style.Resources>
        <Setter Property="FocusVisualStyle">
            <Setter.Value>
                <Style />
            </Setter.Value>
        </Setter>
        <Setter Property="ContentTemplate" Value="{StaticResource ItemTemplate}" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="ContentTemplate" Value="{StaticResource SelectedItemTemplate}" />
            </Trigger>
        </Style.Triggers>
    </Style>

</Window.Resources>
<Grid DataContext="{Binding Source={StaticResource MovieData}, XPath=/MOVIES/MOVIE}">
    <Grid.RowDefinitions>
        <RowDefinition Height="178*" />
        <RowDefinition Height="133*" />
    </Grid.RowDefinitions>
    <Grid.Background>
        <ImageBrush ImageSource="{Binding XPath=FANART}"/>
    </Grid.Background>
    <ListBox x:Name="Listbox1" 
             SelectionChanged="ScrollIntoView"
             ItemContainerStyle="{StaticResource ContainerStyle}"
             IsSynchronizedWithCurrentItem="True" 
             ItemsSource="{Binding}"
             HorizontalAlignment="Center" Grid.Row="1" VerticalAlignment="Bottom" KeyDown="Listbox1_KeyDown">
        <ListBox.Style>
            <Style TargetType="ListBox">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ListBox}">
                            <Border>
                                <ScrollViewer x:Name="ScrollView1" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" VerticalContentAlignment="Bottom" CanContentScroll="True">
                                    <VirtualizingStackPanel x:Name="SPanel1" IsItemsHost="True" Orientation="Horizontal" VerticalAlignment="Bottom"  HorizontalAlignment="Center"/>
                                </ScrollViewer>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ListBox.Style>
    </ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:09:06.280

在列表框的 KeyDown 事件处理程序中，您需要这样的调用：

```
Listbox1.Items.SortDescriptions.Clear();
Listbox1.Items.SortDescriptions.Add(new SortDescription("TITLE", ListSortDirection.Descending)); 
```

这会将排序描述添加到绑定到 ItemsSource 时创建的默认集合视图。你也可以这样过滤。

排序描述中的属性文本可以是 XPath 选择器。

# c# - 错误无法从“GameLibrary.GamePlayLoader2.WinningLinesParent”转换为“int”

> ID：11066183
> 
> 赞同：0
> 
> 时间：2012-06-16T18:53:51.750
> 
> 标签：c#

这是我遇到覆盖错误的地方。新 WinningLinesParent(0, num, num2, list, list2)

```
 public WinningLinesParent(int id, int rowForCol_0, int rowForCol_1, List<int> linesSharedByFirst2Rows, List<int> linesSharedByFirst3Rows)
    {
        this.Id = id;
        this.RowForCol_0 = rowForCol_0;
        this.RowForCol_1 = rowForCol_1;
        this.LinesSharedByFirst2Rows = linesSharedByFirst2Rows;
        this.LinesSharedByFirst3Rows = linesSharedByFirst3Rows;
    }

    protected void buildWinningLineParents()
    {
        List<int> list2;
        int num = 0;
        int num2 = 0;
        List<int> list = new List<int> { 2, 13, 0x15, 0x16 };
        list2 = new List<int> {
            13,
            0x16,
            new WinningLinesParent(0, num, num2, list, list2)
        };
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:55:32.853

好吧，您正在尝试将 a 添加`WinningLinesParent`到`List<int>`. 你*希望*它如何工作？

A`List<int>`只能包含整数。`List<int>`如果您想要可以包含`WinningLinesParent`.

同样与您以前的帖子一样，您在无缘无故地初始化变量之前声明了一个变量，并且还尝试在分配该变量*之前*`list2`使用该变量（用作`WinningLinesParent`构造函数的参数）。

在这篇文章和你之前的文章之间，我认真地建议你退后一步，想想你想要实现的目标，并确保你了解`List<T>`它的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:57:34.507

int 类型的 List 不能将 WinningLinesParent 添加到其元素（不是 int 类型），因此该错误是很正常的。

# java - Android 如何在我的线程上执行回调？

> ID：11066186
> 
> 赞同：0
> 
> 时间：2012-06-16T18:54:27.213
> 
> 标签：java, android, multithreading, callback

我看到类似的问题，但答案各不相同，并不统一。

考虑一个 MediaPlayer 和一个注册的侦听器（例如，用于完成播放，或 onPrepared 等）。我对其进行了测试，并且回调在与开始播放的线程相同的线程上执行。由于我的应用程序是一个游戏，这个线程*不是*UI 线程，它是游戏的线程（顺便说一下，没有任何处理程序）。

是否有关于何时调用它的保证？我的游戏线程一直在运行，所以我无法想象系统调用回调的*方式和限制（如果有的话）。*我的游戏线程一直在工作，因此必须在操作中间调用回调（？）——但我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:24:05.077

经过更多测试，并将线程名称记录到正确的位置后，我得到了答案。

如果您的线程（创建 MediaPlayer）不是 Looper，那么 Android 显然无法向其发送消息。所以它会从你的 UI 线程调用这些回调（通过消息队列机制，正如 Martin James 所说的那样）。我的测试证实了这一点，它在概念上也是正确的（因为它符合 Android 架构的 Looper 概念）。

# php - 使用 preg_replace_callback 从 MySQL Query 中创建链接！请帮忙

> ID：11066187
> 
> 赞同：-1
> 
> 时间：2012-06-16T18:54:35.150
> 
> 标签：php, mysql

这是我目前用于代码的内容，但它无法正常工作。

我试过理解文学，但它没有点击

```
<?php
$con = mysql_connect("localhost","----","----");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("----", $con);

$result = mysql_query("SELECT * FROM posts");

while($row = mysql_fetch_array($result))
  {

$str = 'post_content';

$str = preg_replace_callback('#(?:https?://\S+)|(?:www.\S+)|(?:\S+\.\S+)#', function($arr)
{
    if(strpos($arr[0], 'http://') !== 0)
    {
        $arr[0] = 'http://' . $arr[0];
    }
    $url = parse_url($arr[0]);

    // images
    if(preg_match('#\.(png|jpg|gif)$#', $url['path']))
    {
        return '<img src="'. $arr[0] . '" />';
    }
    // youtube
    if(in_array($url['host'], array('www.youtube.com', 'youtube.com'))
      && $url['path'] == '/watch'
      && isset($url['query']))
    {
        parse_str($url['query'], $query);
        return sprintf('<iframe class="embedded-video" src="http://www.youtube.com/embed/%s" allowfullscreen></iframe>', $query['v']);
    }
    //links
    return sprintf('<a href="%1$s">%1$s</a>', $arr[0]);
}, $str);

echo $str;
echo "<br />";
}

mysql_close($con);
?> 
```

我知道问题出在 $str = 'post_content'; 显然，它只是为mysql中的每一行显示一行，只有post_content。

我想要它做的是显示 MySQL 中 post_content 行中的所有值，并将链接显示为 links ，将 youtube 视频显示为 youtube vids 和图像等等，但它没有转换它。

谁能看到我错过了什么？如果你能解释这棵树是如何发出这个声音的，我也会非常爱你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:00:49.300

如果您有一列`post_content`并且想要获取它，那么不要使用赋值`$str = 'post_content';`使用：

```
 $str = $row['post_content']; 
```

# trigger.io - 如何在 iOS 中调试 Trigger.io？

> ID：11066191
> 
> 赞同：2
> 
> 时间：2012-06-16T18:55:08.643
> 
> 标签：trigger.io, forge

我无法让 Catalyst 调试器在启动后识别应用程序。我不知道我做错了什么。URL 中的哈希值与应用程序头块中的哈希值完全相同，但“目标”仍显示“无”。可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:47:09.957

事实证明，必须修改 iPhone 模拟器的 plist 文件才能接受外部域。当我遇到与 Phonegap 相同的问题时，我发现了这一点。

# android - 在 Android 2.3 中主题时隐藏的 ActionBarSherlock ActionBar

> ID：11066198
> 
> 赞同：3
> 
> 时间：2012-06-16T18:55:56.050
> 
> 标签：android, actionbarsherlock

我正在尝试为我的应用程序个性化 UI，但是当我更改操作栏的背景时，操作栏没有显示，但拆分操作栏没问题。在某些活动中，我看到带有主题的 ActionBar，但只是菜单项（没有 appicon 和标题）。在 Android 4.0 中它工作得很好，但我在兼容模式下遇到了这个问题（Android 2.3）

主题代码

```
<style name="aTheme" parent="@style/Theme.Sherlock">
    <item name="android:actionBarStyle">@style/ActionBar.a</item>
    <item name="actionBarStyle">@style/ActionBar.a</item>
</style>

<!-- style actionbar -->
<style name="ActionBar.a" parent="@android:style/Widget.Holo.ActionBar">
    <item name="background">@drawable/sc4th_actionbartop</item>
    <item name="backgroundSplit">@drawable/sc4th_actionbarbot</item>
    <item name="android:background">@drawable/sc4th_actionbartop</item>
    <item name="android:backgroundSplit">@drawable/sc4th_actionbarbot</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T14:50:30.160

解决了 ！替换`<style name="ActionBar.a" parent="@android:style/Widget.Holo.ActionBar">`为`<style name="ActionBar.a" parent="Widget.Sherlock.ActionBar">`

# objective-c - 如何在 Getter 中使用委托数据？

> ID：11066200
> 
> 赞同：0
> 
> 时间：2012-06-16T18:56:26.810
> 
> 标签：objective-c, ios, delegates

几个小时以来，我一直在脑海中喋喋不休。我正在尝试`UserProfileViewController`在我的应用程序上创建一个可以处理喜欢、书签等的程序。它将接收来自子控制器的 access_token：`LoginViewController`

我有`LoginViewController`工作。它将 UIWebView 启动到远程系统。远程系统处理登录并接收作为用户 ID 的 access_token。

我已经在我的文件中设置了一个委托`LoginViewController`来传回数据，但我想我想要`UserProfileViewController`.

这是我想象的 UserProfileViewController.m 的样子，但显然它不起作用：

```
@synthesize access_token = _access_token;

- (NSString *) access_token  // Getter
{
    if(!_access_token)
    {
        _access_token= [[NSUserDefaults standardUserDefaults] objectForKey:@"access_token"];
        if (!_access_token)
        {
            LoginViewController *loginViewController = [[LoginViewController alloc] init];
            loginViewController.delegate = self;

            [self.navigationController pushViewController:loginViewController animated:YES];
            // I need the access_token here but it won't arrive until delegate_AccessToken is called by LoginViewController
        }
    }
    return _access_token;
}

// received from LoginViewController
- (void) delegate_AccessToken: (NSString *) aAccess_token
{
    // now it's too late to use this in the Getter
}

- (IBOutlet *) likes: (id) sender
{
    [self likeThis: sender access_token: _access_token];
} 
```

什么时候打电话`LoginViewController`来获取 access_token 的好时机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:06:58.923

一个很好的模式是尽快`UserProfileViewController`调用，`LoginViewController`例如`viewDidLoad`在 `UserProfileViewController`请在获取访问令牌时加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:39:09.207

因此，如果我正确理解了您的流程，那么如果用户未登录（换句话说，除非您已登录，否则您没有个人资料），让用户进入 UserProfileViewController 是没有意义的。所以我要做的是：

*   强制用户首先从您的 ParentViewController 推送 LoginViewController 登录。将其存储在 LoginViewController 类中的 NSUSerDefaults 中，然后推送您的 UserProfileViewController。

*   如果由于某种原因发生超时，并且您的 access_token 不再有效，您应该使用 NSNotifications 执行注销操作（从您在应用程序中的任何 ViewController 再次推送 LogInViewController）。

发生超时时发布通知：

```
NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
[notificationCenter postNotificationName:@"performLogOut"
                                  object:nil
                                userInfo:nil]; 
```

使依赖于该令牌的每个 ViewController 成为侦听器：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(performLogOut)
                                             name:@"logOut"
                                           object:nil]; 
```

最后，在所有正在侦听的 ViewController 中实现 performLogOut，并将 LogInViewController 推入其中以强制用户登录。

希望这可以帮助！

# windows - Windows API 函数声明中的“CALLBACK”是什么意思？

> ID：11066202
> 
> 赞同：13
> 
> 时间：2012-06-16T18:56:50.547
> 
> 标签：windows, winapi

> **可能重复：**
> [C 中的“CALLBACK”声明是做什么的？](https://stackoverflow.com/questions/530504/what-does-a-callback-declaration-in-c-do)

WindowProc() 函数的原型是这样的

```
LRESULT CALLBACK WindowProc(HWND hWnd,UINT message , WPARAM wParan, LPARAM lParam); 
```

但是我从来没有遇到过 CALLBACK 关键字，我只知道回调函数是一个你将指针传递给另一个函数的函数，那么这里的 CALLBACK 到底是什么？它有什么作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T19:05:38.300

它是 #defined as `__stdcall`，因为这是 Win32 API 对回调函数的假设。这是一个调用约定——它描述了函数调用在低级别上的排列方式——参数在 CPU 堆栈上的排列方式等等。关于预期堆栈布局（即调用约定）的假设必须在调用者和被调用者之间匹配，否则可能会出现各种有趣的后果。

从历史上看，在 Intel CPU 上有多种调用约定。如果算上非 Microsoft 编译器，则更多。如果您计算除 C[++] 之外的能够调用和被 Windows API 调用的语言，那就更是如此。确保您的 Windows API 回调被明确标记为`__stdcall`与 WinAPI 预期匹配是一种很好的做法。在某些情况下，取决于编译器和设置，`__stdcall`是默认调用约定（即您可以安全地省略 CALLBACK），但并非总是如此。

回到 Win16，CALLBACK 被定义为`far pascal`. 这更不可能成为用户函数的默认值，尤其是在 C 程序中。回调被认为具有 Pascal 调用约定的事实是一个历史产物。它也起到了微优化的作用。

# android - 在 AndEngine 中，如何拖动不被触摸时会掉落的对象？

> ID：11066204
> 
> 赞同：0
> 
> 时间：2012-06-16T18:56:56.747
> 
> 标签：android, andengine, physics

我是 AndEngine 的新手，遇到了一些麻烦。我想在屏幕上拖动一个精灵，当手指从精灵上抬起时，让对象落到屏幕底部。每次触摸屏幕（但不是精灵）时都会创建一个新的精灵。我尝试将 PhysicsExample 结合起来，它会在您每次触摸时创建形状然后让它们下落，而 TouchDragExample 可以让您在屏幕上拖动精灵。我剩下的是在最后一个精灵所在的位置创建一个精灵，并立即移动到触摸屏幕的位置。然后每个精灵都有自己的“引力场”或其他东西。它们不会倒下，而是尽可能地远离彼此。此外，在创建我的纹理区域时，我在点 (0,0) 处留下了图像。如何将图像加载到纹理区域，但不让它显示在屏幕上？我的代码如下：

```
public class TestGFXActivity extends SimpleBaseGameActivity implements IAccelerationListener, IOnSceneTouchListener{
    /** Called when the activity is first created. */
    private Camera camera;
    private static final int Camera_Width = 512;
    private static final int Camera_Height = 512;
    int centerX, centerY;

    private BitmapTextureAtlas backgroundTextureAtlas;
    private ITextureRegion backgroundTextureRegion, circleTR;
    private PhysicsWorld mPhysicsWorld;
    private Scene scene;
    private static final FixtureDef FIXTURE_DEF = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);

    @Override
    public EngineOptions onCreateEngineOptions() {
        // TODO Auto-generated method stub
        camera = new Camera(0,0,Camera_Width,Camera_Height);
        EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED,
                new FillResolutionPolicy(), camera);

        return engineOptions;
    }

    @Override
    protected void onCreateResources() {
        // TODO Auto-generated method stub
        backgroundTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(),
                512,512,TextureOptions.DEFAULT);
        backgroundTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(backgroundTextureAtlas, this, "bluelavabackground2.png",0,0);
        circleTR = BitmapTextureAtlasTextureRegionFactory.createFromAsset(backgroundTextureAtlas, this, "bubble2.png",0,0);
        backgroundTextureAtlas.load();
    }

    @Override
    protected Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());
        centerX = (int) ((Camera_Width - this.backgroundTextureRegion.getWidth())/2);
        centerY = (int) ((Camera_Height - this.backgroundTextureRegion.getHeight())/2);

        scene = new Scene();
        this.scene.setOnSceneTouchListener((IOnSceneTouchListener) this);
        scene.setBackground(new Background(1,1,1));
        this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false); //Sets x and y acceleration 

        final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();
        final Rectangle ground = new Rectangle(0, Camera_Height - 2, Camera_Width, 2, vertexBufferObjectManager);
        final Rectangle roof = new Rectangle(0, 0, Camera_Height, 2, vertexBufferObjectManager);
        final Rectangle left = new Rectangle(0, 0, 2, Camera_Height, vertexBufferObjectManager);
        final Rectangle right = new Rectangle(Camera_Height - 2, 0, 2, Camera_Width, vertexBufferObjectManager);

        final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(0, 0.5f, 0.5f);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, ground, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, roof, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, left, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, right, BodyType.StaticBody, wallFixtureDef);

        this.scene.attachChild(ground);
        this.scene.attachChild(roof);
        this.scene.attachChild(left);
        this.scene.attachChild(right);

        this.scene.registerUpdateHandler(this.mPhysicsWorld);

        final Sprite background = new Sprite(centerX,centerY,this.backgroundTextureRegion, getVertexBufferObjectManager());
        scene.attachChild(background);
        return scene;
    }

    @Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
        final Sprite face;
        final Body body;
        if(this.mPhysicsWorld != null) {
            if(pSceneTouchEvent.isActionDown()) {
                face = new Sprite(pSceneTouchEvent.getX(), pSceneTouchEvent.getY(), this.circleTR, this.getVertexBufferObjectManager()) {
                    @Override
                    public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                        this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2, pSceneTouchEvent.getY() - this.getHeight() / 2);
                        return true;
                    }
                };
                body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);

                face.setScale((float) .25);
                scene.attachChild(face);
                scene.registerTouchArea(face);
                scene.setTouchAreaBindingOnActionDownEnabled(true);
                this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face, body, true, true));
                return true;
            }else if(pSceneTouchEvent.isActionDown()){
                scene.setTouchAreaBindingOnActionDownEnabled(false);
            }
        }
        return false;
    }

    @Override
    public void onAccelerationAccuracyChanged(AccelerationData pAccelerationData) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAccelerationChanged(AccelerationData pAccelerationData) {
        final Vector2 gravity = Vector2Pool.obtain(pAccelerationData.getX(), pAccelerationData.getY());
        this.mPhysicsWorld.setGravity(gravity);
        Vector2Pool.recycle(gravity);
    }

    public void onResumeGame() {
        super.onResumeGame();

        this.enableAccelerationSensor(this);
    }

    public void onPauseGame() {
        super.onPauseGame();

        this.disableAccelerationSensor();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:42:46.477

尝试使用 注册触摸区域`onClick(not in onSceneTouchEvent)`。为此，只需实施`onClickLisener`. 为了让你的 Sprite 下落，你可以很容易地使用 PhysicsBox（只需设置重力）。或者，您可以选择创建 PhysicsHandler 并设置速度。

# embedded - 关于 Bus Pirate 设备编程器的意见？

> ID：11066208
> 
> 赞同：5
> 
> 时间：2012-06-16T18:57:39.920
> 
> 标签：embedded, firmware, jtag

我想在家里做一些爱好固件开发，需要一个设备编程器。希望继续使用开源解决方案，我找到了[OpenOCD](http://openocd.sourceforge.net/)项目和[Bus Pirate](http://dangerousprototypes.com/bus-pirate-manual/)。30 美元似乎很容易，尤其是因为它不仅支持 JTAG（SPI、I2C 等）。我已经看到一些提到它不是那里最快的界面。

有没有人使用过其中一种并对它有意见？[与 OpenOCD 文档](http://openocd.sourceforge.net/doc/html/Debug-Adapter-Hardware.html#Debug-Adapter-Hardware)的调试适配器硬件页面中列出的其他程序员有什么比较？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T17:04:05.977

BusPirate 的目标是/更倾向于作为通用通信嗅探器，尽管它已扩展为嵌入式开发的瑞士军刀。同样，开放式逻辑分析仪也很划算。

我不会说 BP 是出于开发目的将固件放入嵌入式微控制器的最佳方式（专用调试器可能会是最好的），但我会说拥有 BusPirate、LogicSniffer 以及如果你可以扩展到它，一个DSO-Quad。

这三个对于嵌入式开发都非常有用，尽管我们在实验室里有所有“合适的”设备可以求助，但所有这三个都在这里节省了很多倍的时间。

我们发现 BP 在尝试让新设备（EEPROM、SPI 外围设备/传感器等）与我们的微通信时特别有用，因为您可以在将魔法咒语转换为嵌入式代码之前通过 PC 启动并运行设备对您以正确的顺序发送正确的命令有一定的信心。

对于嵌入式编程/调试，专用调试器（通常随 devkit a-la MSP430 启动板一起提供）可能会让您更快地进行并轻松与 IDE 集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-10T16:51:38.027

我正在使用 BusPirate 来嗅探两块板之间的流量，并模拟 I2C 主机以进行测试。

简而言之，它非常有用。快速方便地查看数据并完全按照我的意愿行事。

然而，我遇到了麻烦，有一次我用示波器验证了嗅探的数据，发现 BusPirate 没有准确地报告总线发送的正确数据。它误读了一点，并从可重复的启动序列中错过了整个字节。有时它只是偏离了轨道。

这是以 100kHz 传输的数据。有人建议我用较短的电线再试一次，因为这可能是电容问题，但即使有 1 英寸的电线连接到 busPirate，它仍然报告相同的错误。

所以，你知道的，需要注意的是，你需要验证你的工具不时告诉你什么。

# ios - Cocos2d。精灵消失

> ID：11066210
> 
> 赞同：0
> 
> 时间：2012-06-16T18:58:10.933
> 
> 标签：ios, xcode, cocos2d-iphone

每个人！我有动作移动的精灵，有健康栏（进度条）。当健康条的值为零时，精灵应该停止并从场景中消失。任何想法如何做到这一点？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:24:16.860

您可以使用条形图像，并根据精灵的健康状况更改 x 比例。当健康为零时，将其设置为不可见。你可以在 CCSprite 类参考中找到如何做所有这些事情

# android - 从 sd 卡获取歌曲名称以在 android >2.3 或 4.0 中显示

> ID：11066211
> 
> 赞同：1
> 
> 时间：2012-06-16T18:58:15.463
> 
> 标签：android

我能够显示从本地 sd 卡获取的歌曲块。问题是当我看到我的歌曲列表和默认音乐播放器时，我发现如果有一些额外的字符串（字符串可能是第三方网站），歌曲名称已被修剪或电影名称。）。我怎样才能实现它。？

```
 tempCursor = ((Activity)context).managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, null, null, null,MediaStore.Audio.Media.DISPLAY_NAME);

            tempCursor.moveToFirst();
            ArrayList<Song> list = new ArrayList<Song>();
            for (int i = 0; i < tempCursor.getCount(); i++) {

                id = temp    Cursor.getString(tempCursor.getColumnIndexOrThrow(MediaStore.Audio.Media._ID));
                artist = temp    Cursor.getString(tempCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ARTIST));
                name = temp    Cursor.getString(tempCursor.getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));
                data = temp    Cursor.getString(tempCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA));
                albumName = temp    Cursor.getString(tempCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM));
                albumId = temp    Cursor.getString(tempCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)); 
```

注意歌曲名称的不同：

![截图一](../Images/b3903d9933d76bbeabfb4085fdc8889c.png) ![截图一](../Images/b791f49bac6554c94127fc3a231720cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:05:26.033

**改写**

感谢我看到问题的屏幕截图，只需更改以下内容：

```
name = tempCursor.getString(tempCursor.getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME)); 
```

对此：

```
name = tempCursor.getString(tempCursor.getColumnIndex(MediaStore.Audio.Media.TITLE)); 
```

**从评论添加**

我看不到哪些歌曲没有标题，所以我会提供这个：

```
name = tempCursor.getString(tempCursor.getColumnIndex(MediaStore.MediaColumns.TITLE));
if(name.isEmpty())
    name = tempCursor.getString(tempCursor.getColumnIndex(MediaStore.EXTRA_MEDIA_TITLE));
if(name.isEmpty())
    name = tempCursor.getString(tempCursor.getColumnIndex(MediaStore.MediaColumns.DISPLAY_NAME)); 
```

我无法重新创建您所描述的内容并且没有太多信息可以使用，希望这可行。

# unix - 为什么数字不能通过 websphere MQ 从 Windows 正确转换为 Unix？

> ID：11066213
> 
> 赞同：-1
> 
> 时间：2012-06-16T18:58:34.327
> 
> 标签：unix, encoding

Windows 中的 ASCII 编码数字似乎无法通过 Websphere MQ 在 Unix 上正确转换。

这是 win like(Encoding.ASCII) 中的列表：

*   111
*   222
*   ...

它在 Unix 上变成以下内容：

*   ^@1^@1^@1^@^M^@$
*   ^@2^@2^@2^@^M^@$
*   ...

我对每个字符转换'x'到'^@x'感到困惑？

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:24:25.817

经过研究，我知道通过 websphere MQ 放置消息（字符串）而不指定字符集，默认为 Unicode。因此 Unix（UTF-8）中字符串中的每个字符将“x”（2 字节）转换为“^@x”。我不太确定。任何建议将不胜感激。

# jquery - 停止对同一元素应用两次的 jQuery 插件

> ID：11066214
> 
> 赞同：1
> 
> 时间：2012-06-16T18:58:43.560
> 
> 标签：jquery

目前我正在尝试弄清楚如何在 jQuery 插件中使用默认和自定义设置。我希望能够使用通用类将插件的默认设置应用于元素，但另外通过选择它们的 ID 来自定义其中一些元素。示例：http: [//jsfiddle.net/srkPT/2/](http://jsfiddle.net/srkPT/2/)

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <title>Untitled Document</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <style type="text/css">
        .box {width:200px; height:200px; padding:50px; margin:40px; border:1px solid; float:left;}​
        </style>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.min.js"></script>
        </head>

        <body>

       <div class="box">Box 1 - </div>

    <div id="one" class="box">Box 2 - </div>

    <div id="two" class="box">Box 3 - </div>

    <div class="box">Box 4 - </div>

        <script type="text/javascript">

    (function($) {

        $.fn.myPlugin = function(params) {

            var defaults = {

                background: '#ddd',

                content: 'foo'

            };

            var params = $.extend(defaults, params);

            return this.each(function() {

                $(this).css('background-color', params.background)

                .append(params.content + ' ');

            }); //RETURN this EACH

        }; //fn myPlugin

    })(jQuery);

        $(function(){

        $('.box').myPlugin();

            $('#one').myPlugin({content:'bar'});

            $('#two').myPlugin({background:'yellow'});

        });//document READY​

        </script>

        </body>
        </html> 
```

运行时会发生什么，它将 2 大量内容附加到 #one 和 #two，我可以理解为什么；该插件会在所有带有 .box 的元素（包括 #one 和 #two）上触发，然后在 div #one 和 #two 上第二次运行，将新内容附加到顶部。

如果不更改或在选择器上运行过滤器，或者向 html 添加额外的类，是否有任何实用的方法来解决这个问题，所以它不会将插件两次应用于同一元素？提前致谢。

**更新**

由于 czarchaic 的建议，这项工作得以实现。示例：http: [//jsfiddle.net/srkPT/3/](http://jsfiddle.net/srkPT/3/)

但是，它取决于以特定顺序应用的插件。现在，我很高兴，但如果有人能想出一种方法来获得所需的效果，而不管它应用哪个顺序，我将不胜感激。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T19:11:11.197

您可以设置数据属性并对其进行测试。

```
$.fn.myPlugin=function(){
  return this.each( function(){
    if ( $( this ).data( 'test' ) ){
      return false;
    }
    $( this ).data( 'test', true );
    // plugin code
  });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:12:55.237

几种选择：

1）向元素添加额外的类，然后根据类调用插件

```
$('.box.yellow').myPlugin({background:'yellow'}); 
```

2）将`data-`属性添加到标记并在插件中检查它们是否存在并在插件中相应地修改html

```
<div class="box" data-bgColor="yellow">Box 1 - </div> 
```

然后在插件中：

```
 if( $(this).data('bgColor')){
      $(this).doSomething();
 } 
```

方法将部分取决于插件的整体复杂性或您需要使用它的频率

# algorithm - 用 getRandom 设置

> ID：11066220
> 
> 赞同：3
> 
> 时间：2012-06-16T19:00:04.163
> 
> 标签：algorithm, data-structures, language-agnostic, set

这是一个面试问题：用、和实现一个`Set`类。`get``put``getRandom`

我会考虑以下选项：

*   已排序/未排序的链表：`get`- O(N)，`put`- O(N)，`getRandom`- O(N)
*   未排序的向量（可调整大小的数组）：`get`- O(N), `put`- ?, `getRandom`- O(1)
*   排序向量（可调整大小的数组）：`get`- O(logN)，`put`- ?，`getRandom`- O(1)
*   哈希表：`get`-O(1)，`put`-O(1)，`getRandom`-O(表大小)
*   平衡二叉搜索树：`get`- O(logN), `put`- O(logN), `getRandom`- O(N)

看起来最好的候选人是：

*   哈希表如果`get/put`比`getRandom`
*   排序向量（可调整大小的数组）如果`getRandom`比`get/put`

现在我想知道我们是否可以以某种方式组合向量和哈希表来组成一个更好的集合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T19:51:49.350

你可以做`get`，`put`而且`getRandom`都是`O(1)`平均时间。

您所做的是存储 2 个数据结构。一个是哈希。另一个以可增长数组中的随机顺序列出元素。

当你`put`，你把它放在散列中，将元素添加到数组的末尾，然后将数组的末尾交换为随机数组元素。

当 you 时`get`，您会在哈希中查找元素。

当你 时`getRandom`，你取数组的最后一个元素，然后将最后一个元素与数组中的另一个位置交换。

如果你愿意，你可以添加`delete`只是删除哈希。现在`getRandom`通过获取元素来实现，检查它是否在散列中，如果不在则缩小数组，然后重复。在这一点`getRandom`上偶尔`O(n)` **但**所有操作的摊销平均成本可以被证明是`O(1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:26:57.927

如果您保留一个单独的结构来告诉您哈希表的每个存储桶中有多少项目，您可以使用二进制搜索来查找第 n 个元素，这将为您提供所有三个操作的 O(log n)。

为每个节点增加一个“计数”的平衡二叉搜索树（告诉有多少节点的子树以该节点为根）也适用于这些边界。

对上述内容的一些更正：您不能在链表中进行随机访问，因此所有操作都是 O(N)。此外，由于必须替换已排序版本中的元素并检查未排序版本中的重复项，因此在两个向量中的 put 都是 O(n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T19:19:48.640

find ~O(1)
delete ~O(1)
add ~O(1)
对于随机我们使用包含所有元素的数组并选择一个随机元素 O(1)

```
#include <stdio.h>
#include <vector>
#define MOD 666013
using namespace std;

int N;
vector<int> G[MOD];

vector<int>::iterator find(int x)
{
    int list=x%MOD;                  // f(i) = i % MOD this is my hash function
    vector<int>::iterator it;

    for (it=G[list].begin();it!=G[list].end();++it)
        if (*it==x)
            return it;
    return G[list].end();
}

void add(int x)
{
    int list=x%MOD;                     //again this is my hash function that gives me the key
    if (find(x)==G[list].end())
        G[list].push_back(x);
}

void delete(int x)
{
    int list=x%MOD;
    vector<int>::iterator it=find(x);

    if (it!=G[list].end())
        G[list].erase(it);
} 
```

# javascript - Javascript中的函数名称（）和名称=函数（）有什么区别？

> ID：11066224
> 
> 赞同：4
> 
> 时间：2012-06-16T19:00:42.663
> 
> 标签：javascript, function

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

AFAIK，有两种创建函数的方法：

```
function name()
{
} 
```

和，

```
name = function()
{
} 
```

我总是使用第二个，因为它看起来更直观。

**这两种创建函数的方式有什么区别？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:04:01.030

不同之处在于第一个 case 函数是在解析时为脚本块定义的，而第二个 case 函数是在运行时定义的。

从这里开始：[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

# algorithm - Android 的拼写检查器中使用了哪种算法？

> ID：11066225
> 
> 赞同：13
> 
> 时间：2012-06-16T19:00:47.813
> 
> 标签：algorithm, string-matching

我正在对字符串匹配算法进行一些研究。我遇到的最有用的一个是我的手机使用的那个（SE xPeria neo v 上的 android 2.3.4）。

![在此处输入图像描述](../Images/94af9edc811bbba27e8ee5746a519939.png)

如屏幕截图所示，我按下了我想要的字符**附近**`jiw`的字符，并且它正确建议了。

 **该算法似乎类似于[列文斯坦距离](http://en.wikipedia.org/wiki/Levenshtein_distance)（我的输入和字典之间的距离）。不知何故，附近的字符在字符串匹配中具有**一定的价值。**

关于正在使用的算法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:51:59.713

我提取了[Android 源代码](http://source.android.com/source/downloading.html)并寻找拼写检查。我发现这个目录似乎包含您正在寻找的来源：

```
packages/inputmethods/LatinIME/java/src/com/android/inputmethod/latin/ 
```

该文件`spellcheck/AndroidSpellCheckerService.java`看起来像是在做所有繁重的工作，但`Suggest.java`似乎也以某种方式参与其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T00:38:28.183

这本[优秀的信息检索书](http://nlp.stanford.edu/IR-book/)有详细的[列文斯坦距离](http://nlp.stanford.edu/IR-book/html/htmledition/edit-distance-1.html)部分，包括加权变化。然后可以将权重视为键盘上按键之间的距离。**

# c++ - Eclipse 块保存选项卡

> ID：11066228
> 
> 赞同：2
> 
> 时间：2012-06-16T19:00:58.100
> 
> 标签：c++, eclipse

在 Eclipse 中，一些未被发现的组合键使当前选项卡的标题变为灰色并禁用`CTRL`+ `S`。要保存当前文件，我必须按选项卡上的“X”将其关闭，从而引发“退出时保存”窗口，我可以在其中按“是”，文件保存。为什么？

已解决：只需激活另一个窗口并再次切换到 Eclipse 窗口（-;

# angularjs - 评估 ngrepeat 的表达式

> ID：11066231
> 
> 赞同：2
> 
> 时间：2012-06-16T19:01:28.907
> 
> 标签：angularjs

我想通过 ng-repeat 表达式访问分配给变量的范围表达式。

所以，我想做的是这样的：

```
ng-repeat="variable in eval(key)" 
```

不幸的是，它无效。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T23:34:38.570

这会起作用：

HTML：

```
<div ng-controller="MyCtrl">
    <div ng-repeat="item in $eval(key)">{{item}}</div>
</div> 
```

JS：

```
function MyCtrl($scope) {
    $scope.key = "items";
    $scope.items = [1,2,3];
}
​ 
```

[http://jsfiddle.net/andytjoslin/n5h4U/](http://jsfiddle.net/andytjoslin/n5h4U/)

（已编辑，见评论）

# javascript - 弹出窗口关闭时的内置功能？

> ID：11066237
> 
> 赞同：0
> 
> 时间：2012-06-16T19:02:28.780
> 
> 标签：javascript, popup, window

我一直在专心研究，但无法找到解决问题的方法。我有一个“主页”页面，您可以选择一个按钮来生成一个名为“测试”的弹出窗口。现在，如果我关闭弹出窗口，我希望它立即在我的主页上做一些事情，比如写“Hello World”。是否有检查窗口是否关闭的内置函数？我遇到了许多自制的链接，这些链接带有名为 window.close 的自制函数。这是我生成弹出窗口的代码。任何帮助将非常感激。

```
$var = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/register.html\");' class='two'>Register</a> | <a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/signin.php\");' class='two'>Sign In</a>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:10:13.503

我认为你需要[`window.onbeforeunload`](https://developer.mozilla.org/En/DOM/Window.onbeforeunload).

另请阅读[此问题](https://stackoverflow.com/questions/7389554/crossbrowser-onbeforeunload)。

# php - jQuery Mobile PHP 表单发布返回未定义

> ID：11066240
> 
> 赞同：1
> 
> 时间：2012-06-16T19:03:08.623
> 
> 标签：php, jquery-mobile

我在这里看到很多类似的问题，但与我所经历的完全不同。

我的网站上有一个简单的联系页面，它适用于桌面版本，但是当我使用 jQuery mobile 设置移动版本时，它只是在页面发布时返回未定义。

下面是 php.ini 后面的表格。

```
<html>
<head>
<title>John's Website | Contact Me</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="../js/menu.js"></script>
<LINK REL="SHORTCUT ICON" HREF="../favicon.ico"> 
</head>
<body>
<div data-role="page">
<h2>Fill out the form below to contact me.</h2>
<form action="contact.php" method="post">
<label for="firstName">First Name:</label>
<input type="text" id="firstName" name="firstName" size="40" /><br />
<label for="lastName">Last Name:</label>
<input type="text" id="lastName" name="lastName" size="40" /><br />
<label for="userEmail">Your Email:</label>
<input type="text" id="userEmail" name="userEmail" size="40" /><br />
<label for="message">Message:</label>
<textarea id="message" name="message" cols="30" rows="5"></textarea><br />
<input data-role="none" type="submit" value="Submit"></input>
<input data-role="none" type="reset" value="Reset"></input>
</form> 
</div>
</body>
</html> 
```

和 PHP

```
<?php
$host="localhost"; // Host name 
$username="Idont"; // Mysql username 
$password="thinkso"; // Mysql password 
$db_name="john"; // Database name 
$tbl_name="contact"; // Table name

//connect
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

//gather vars and sanitize input
$first_name = htmlentities($_POST['firstName']);
$last_name = htmlentities($_POST['lastName']);
$email = htmlentities($_POST['userEmail']);
$message = htmlentities($_POST['message']);
$date_stamp = date("Y-m-d h:i:s");

$first_name = mysql_real_escape_string($_POST['firstName']);
$last_name = mysql_real_escape_string($_POST['lastName']);
$email = mysql_real_escape_string($_POST['userEmail']);
$message = mysql_real_escape_string($_POST['message']);

if(empty($_POST['firstName']) && empty($_POST['lastName']) &&
empty($_POST['userEmail']) && empty($_POST['message'])){
echo 'You did not fill out all fields. Please go back and enter all info.';
}

//write contents to db.
$sql = "INSERT INTO $tbl_name (firstName, lastName, email, date, message) 
VALUES ('$first_name', '$last_name', '$email', '$date_stamp', '$message')";

if(mysql_query($sql)){
$content = "Your message has been sent. /n Click <a href="index.php">here</a> to go
back to the home page.";
} else {
$content = mysql_error() . $date_stamp . 'Unable to send your message. Try again
later.';
}
?>

<html>
<head>
<title>John's Website | Contact Me</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/jquery.mobile-1.1.0.min.js"></script>
<LINK href="../js/jquery.mobile-1.1.0.min.css" rel="stylesheet" type="text/css">
<LINK REL="SHORTCUT ICON" HREF="../favicon.ico"> 
</head>
<body>
<div data-role="page">

<div data-role="header">its loaded</div>
<div data-role="content"><?php echo $content; ?></div>
</div>
</body>
</html> 
```

我计划使用 PDO 和更多 OO 样式重新编写代码，但页面应该可以工作。这也是我第一次使用 JQM，所以我认为我因此而遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T20:14:39.537

我试过这个并且它有效。在我的我添加了一个 target="_blank" ，它使它在一个新窗口中弹出，我不再得到未定义的错误。这就是我的代码的样子，它适用于 Android 版 Chrome。它需要一个新窗口来显示 PHP 脚本生成的 HTML，包括错误代码。

```
<form name="contactform" method="post" action="http://myphpcontactform.php" target="_blank"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:13:24.380

我关闭了页面加载的 AJAX 功能，它现在可以正常工作，就像我怀疑的那样。必须是另一个原因，但这目前有效。我确实失去了光滑的过渡效果，但哦，好吧。

把它贴在每一页的头上

```
$(document).bind("mobileinit", function(){
        $.mobile.ajaxenabled = false;
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T04:48:39.763

首先你检查 $_POST 但你也执行 SQL，没有条件停止执行或者这个

这就是你所拥有的：

```
if( empty($_POST['firstName']) && 
    empty($_POST['lastName']) &&
    empty($_POST['userEmail']) && 
    empty($_POST['message'])) {
    echo 'You did not fill out all fields. Please go back and enter all info.';
}
// continue to execute the script ( SQL Below ) 
```

这是一个建议：

```
if( empty($_POST['firstName']) && 
    empty($_POST['lastName']) &&
    empty($_POST['userEmail']) && 
    empty($_POST['message'])) {

    // use $content instead of echo
    $content = 'You did not fill out all fields. Please go back and enter all info.';
}
// Add else condition here
else {
    //write contents to db.
    $sql = "INSERT INTO $tbl_name (firstName, lastName, email, date, message) 
    VALUES ('$first_name', '$last_name', '$email', '$date_stamp', '$message')";

    if(mysql_query($sql)) {
        $content = "Your message has been sent. /n Click <a href="index.php">here</a> to go
back to the home page.";
    } else {
        $content = mysql_error() . $date_stamp . 'Unable to send your message. Try again
later.';
    }
} 
```

您可以进行其他优化，但希望这可以解决您的问题。

您还可以使用带有此插件的 Google Chrome 来模仿移动设备：

*   [https://chrome.google.com/webstore/detail/ljfpjnehmoiabkefmnjegmpdddgcdnpo](https://chrome.google.com/webstore/detail/ljfpjnehmoiabkefmnjegmpdddgcdnpo)

然后打开 Chrome 开发者工具，开始调试乐趣吧！

# sql - SQL查询如何提取每天，每周，每月打开的记录数

> ID：11066242
> 
> 赞同：0
> 
> 时间：2012-06-16T19:03:11.467
> 
> 标签：sql, db2

我`ticket`在 DB2 中有一个表，其中包含示例信息

```
TICKETID  CREATIONDATE
1000         2012-05-01 11:11:11
1001         2012-05-01 12:11:11
1002         2012-05-05 11:11:11
1003         2012-05-12 11:11:11
1004         2012-05-19 11:11:11
1005         2012-05-27 11:11:11
1006         2012-06-01 11:11:11
1007         2012-06-03 11:11:11 
```

所以我想在输出中像这样

```
DATE           NUMBER
2012-05-01       2
2012-05-05       1
2012-05-12       1
2012-05-19       1
2012-05-27       1
2012-06-01       1
2012-06-01       1 
```

月份：

```
MONTH  NUMBER
May      6
June     2 
```

几个星期以来，我不知道什么是最可行和视觉上最好的呈现方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:06:29.503

您无需指定在哪个平台上运行 DB2，但如果是在 Linux、UNIX 或 Windows 上，您可以查看`DATE()`,`WEEK()`和`MONTHNAME()`函数。这三个都可以应用于 CREATIONDATE 列。

# php - Mysqli - 使用选择案例但其他数据未绑定

> ID：11066243
> 
> 赞同：2
> 
> 时间：2012-06-16T19:03:14.477
> 
> 标签：php, sql, oop, mysqli

我正在使用 Mysqli OO 使用 MySQL 语句 CASE 在数据库中搜索 2 个特定值。如果两个值都找到，则返回值“true”，如果只找到一个，则值为“false”，如果均未找到，则结果均不是。无论如何，我已经完成了这项工作，但我的问题是我还需要它来显示列中相关的值。

```
$query = "SELECT 'userName','email','code',
CASE 
    WHEN (email=? AND code=?) THEN 'true'
    WHEN (email=?) THEN 'false'
    ELSE  'NONE'
END AS answer
FROM users WHERE email=?";
$stmt = $mysqli->prepare($query);
$stmt->bind_param("ssss", $email,$code, $email,$email);
$email = $mysqli->real_escape_string($email);
$code = $mysqli->real_escape_string($code);
$stmt->execute();
$stmt->bind_result($user,$email,$code,$answer);
$stmt->fetch();
print_r($stmt->fetch);
$stmt->store_result();
echo "User: ".$user." Email: ".$email." Code: ".$code." Answer: ".$answer; 
```

好的，所以当我运行代码时，它应该显示为：

```
User: ryan Email: local@localhost Code: 12 Answer: true 
```

但相反，它显示为：

```
User: userName Email: email Code: code Answer: true 
```

所以我认为这个错误更多地与它的 SQL 方面有关，但我被困住了，需要一些帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:04:40.513

您正在选择字符串文字，`'userName'`而不是列中包含的值。

要解决此问题，请删除列名周围的引号：

```
SELECT userName,email,code,... 
```

或者使用反引号（允许，但仅当列名是[保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)时才需要）：

```
SELECT `userName`,`email`,`code`,... 
```

# objective-c - Objective-C – 何时/何地检查被忽略的 UILocalNotifications

> ID：11066244
> 
> 赞同：1
> 
> 时间：2012-06-16T19:03:30.607
> 
> 标签：objective-c, uilocalnotification

我有一点编程挑战。在我的应用程序中，我使用重复`UILocalNotification`s。我编写了一个处理被忽略通知的方法，在该方法中我检查通知是否被忽略，然后我将其记录到一个名为`EntityA`. 因此，例如，重复通知设置为每天重复。如果用户在 10 天内忽略该通知，我们将有 10 个错过的通知，即 10`EntityA`秒。

当我检查忽略的通知时，将这种方法放在哪里合适？我在想：

`application:didFinishLaunchingWithOptions:`- 如果在触发通知时应用程序没有运行

`applicationWillEnterForeground:`- 如果在触发通知时应用程序在后台并且用户忽略了通知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:49:43.610

我决定将检查方法放入`application:didFinishLaunchingWithOptions:`并`applicationDidBecomeActive:`

这样我的应用程序在启动时将始终具有准确的数据。

# javascript - JW 播放器 xml 播放列表和 javascript

> ID：11066251
> 
> 赞同：0
> 
> 时间：2012-06-16T19:03:51.357
> 
> 标签：javascript, jwplayer

当我的 xml 文件中的“标题”元素的值为“R15”、“R30”、“R45 [”](http://jsfiddle.net/Apnu2/6/)或'R60'。字母“R”后面的数值是我想通过javascript函数的倒计时时间。

这是一个示例布局。第一个元素将播放视频。第二个元素应该调用上面提到的javascript函数，第三个元素是另一个应该在倒计时javascript函数达到零后播放的视频。

```
<?xml version="1.0"?>
<rss xmlns:media="http://search.yahoo.com/mrss/"xmlns:jwplayer="http://developer.longtailvideo.com/trac/" version="2.0">
<Channel>
  <Title>MRSS Playlist Playlist</Title>
    <item>
      <title>04:48</title>
      <media:content url="videos/Set1_mid.flv"></media:content>
      <media:thumbnail url="thumbs/set1_mid.jpg"></media:thumbnail>
      <description>5 minute cardio with handweights</description>
      <jwplayer:duration>288</jwplayer:duration>
      <jwplayer:start>0</jwplayer:start>
    </item>
    <item>
      <title>R15</title>
      <media:content url="nothing"></media:content>
      <media:thumbnail url="nothing"></media:thumbnail>
      <description>rest option</description>
      <jwplayer:duration>15</jwplayer:duration>
      <jwplayer:start>0</jwplayer:start>
    </item>
    <item>
      <title>01:20</title>
      <media:content url="http://youtu.be/WG2N0WKmquE"></media:content>
      <media:thumbnail url="http://img.youtube.com/vi/WG2N0WKmquE/3.jpg"></media:thumbnail>
      <description>harder than what it looks</description>
      <jwplayer:duration>580</jwplayer:duration>
      <jwplayer:start>500</jwplayer:start>
    </item>
</Channel>
</rss> 
```

现在我的播放列表只播放下一个视频，这很好；但我在监听上面提到的标题值、运行 javascript 代码、然后在 javascript 函数完成时返回播放列表中的下一个元素时遇到了问题。

如果我的问题没有意义，请告诉我。如果需要，我很乐意澄清并发布我正在使用的其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:14:45.243

这是代码：

```
onPlaylistItem: function(event){

                           var getMessage = jwplayer("container").getPlaylistItem().message;

                           if (getMessage.substr(0,1)=="R"){

                               $("#bottomtimer").hide();
                               $("#bottomRestTimer").show();
                               var restTime = getMessage.substr(1,2);
                               var minutes = 0;
                               var time = minutes*60 + restTime;

                               var interval = setInterval(function(){

                                   if (time == 0 ){

                                   clearInterval(interval);                                       
                                   $("#bottomRestTimer").hide("slow");
                                   //$("#bottomtimer").show("slow");
                                   $("#bottomtimer").fadeIn(5000);

                                   jwplayer().playlistNext();

                                   }
                                   var minutes = (Math.floor(time/60 ));
                                   //this code add a zero like 01:15 which I like but I need to add
                                   //the same logic to the routine countdown
                                   //if (minutes < 10) minutes = "0" + minutes;
                                   var seconds = time % 60;
                                   if (seconds < 10) seconds = "0" + seconds;
                                   var text = minutes + ":" + seconds;

                                  document.getElementById('resttimer').innerHTML = text;

                                  time--;

                               }, 1000);

                           } else {
                               document.getElementById('topstatus').innerHTML = getMessage; 

                           } 
```

# git - 项目的 Git 存储库在不相关的目录中包含文件

> ID：11066254
> 
> 赞同：0
> 
> 时间：2012-06-16T19:04:23.647
> 
> 标签：git, frameworks, repository, libraries

我需要在 GitHub 上发布几个相关的 Arduino 项目。为此，我正在研究如何运行 Git。

在我的项目中，我将代码拆分为库和更高级别的应用程序。库在多个项目中共享。Arduino 环境（与许多其他环境一样）规定了库应位于的库目录`<arduino>\libraries\<my_library>`。因此，构建项目所需的文件在几个不相关的目录之间拆分。根据我的阅读，Git repo 是一个目录。

我希望库和项目一起提交到 GitHub 上的同一个 repo。当然，我可以手动复制库文件，但这会引入人为错误。

**现有技术**

1.  [在这个线程](https://stackoverflow.com/a/5591333/279844)中有一些答案。但是，我对 Git 的理解还不够好，无法得到 VonC 的建议。
2.  从他的评论来看，在[这一期中](https://stackoverflow.com/q/933864/279844)，OP 没有解决问题。

任何建议，见解或参考都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:32:01.953

看看将 Git 子模块用于将在不同项目之间共享的库。

# c++ - 真的需要 DPI 意识吗？

> ID：11066255
> 
> 赞同：2
> 
> 时间：2012-06-16T19:04:35.363
> 
> 标签：c++, windows, window, gdi+, gdi

我正在学习如何使用 GDI/GDI+ 绘制 GUI，我发现了 这个[http://msdn.microsoft.com/en-us/library/windows/desktop/dd756596(v=vs.85).aspx#step_2__declare_that_the_application_is_dpi-aware](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756596(v=vs.85).aspx#step_2__declare_that_the_application_is_dpi-aware)每个应用程序都会进行计算，以便正确显示它还是什么？

有人可以解释如何计算窗口上按钮、图像和所有控件的客户端坐标，以便它们在不同分辨率下具有相同的对齐方式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:26:53.840

使用 GDI，您可以使用`GetDeviceCaps`函数`LOGPIXELSX`和`LOGPIXELSY`来查找您的 DPI，并使用这些值来缩放您的尺寸：

```
HDC hdc = GetDC(hwnd);
int ppix = GetDeviceCaps(hdc, LOGPIXELSX);
int ppiy = GetDeviceCaps(hdc, LOGPIXELSY);
ReleaseDC(hdc);

// for a control that is 1.5 inches wide and 0.5 inches high.

int ctrl_width = int(1.5 * ppix + 0.5);
int ctrl_height = int(0.5 * ppiy + 0.5);

// for a button that conforms to Microsoft's UI guidelines of 75x23 @ 96dpi.

int btn_width = (75 * ppix + 48) / 96;
int btn_height = (23 * ppiy + 48) / 96; 
```

GDI+ 使这变得相当简单：

```
Graphics g;
g.SetPageUnit(UnitInch);

// now you can specify draw coordinates in inches
// and it'll figure out DPI for you. 
```

请注意，GDI+ 解决方案只会影响 GDI+ 绘制调用，而不影响 GDI 调用或控件坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T20:08:58.267

忽略 dpi 意识很快就开始变得痛苦。显示技术一直停留在 96 dpi 很长一段时间，已经 20 年了。Vista 的自动 dpi 缩放和高度可访问的“标尺”小程序改变了游戏规则。推动“视网膜”显示器的苹果是真正的推动力。下一个 Apple MacBook 有一个 2880 x 1800 的显示屏，典型的 1024x768 窗口将是这样的显示屏上的邮票。

使其自动化的工具很容易获得，基于 XAML 的类库（WPF、Silverlight、Metro）完全独立于分辨率。HTML 和 Winforms 的自动缩放非常好。但当然对 GDI 帮助不大。在 User32 中没有任何东西，牢牢地停留在像素领域。您当然可以编写代码，只是编写代码并不愉快。如果您出于遗留原因仍在对原始 API 进行编程，那么内置于 Vista 及更高版本中的自动缩放将很有吸引力。好吧，为了减少工作量，它看起来不会很有吸引力:)

# java - 用Java中的String替换XML文档中的元素

> ID：11066256
> 
> 赞同：1
> 
> 时间：2012-06-16T19:04:37.563
> 
> 标签：java, xml, xpath

我正在编写一个 HTTP 服务器，我将在其中接收 HTTP PUT 中的 XPATH 和请求正文中的数据。

我需要将 XPATH 表达式的结果替换为 XML 文档中 HTTP 请求数据中的数据

例如

XML 文档是

```
<presence>
<tuple id="x8eg92n">
<note> i am reading email 3 times a day </note>
</tuple>
</presence> 
```

HTTP请求例如是

```
 PUT /pidf-manipulation/users/sip:someone@example.com/index/
  ~~/presence/tuple%5b@id='x8eg92n'%5d/note HTTP/1.1
  If-Match: "xyz"
  Host: xcap.example.com
  Content-Type: application/xcap-el+xml
  ...

  <note>I'm reading mails on Tuesdays and Fridays</note> 
```

以上应该将 XML 中的 note 元素替换为 PUT 请求。客户端可以通过这种方式发送任何 XPATH 并替换 XML 文档的内容。

请帮助如何在 Java 代码中完成此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:57:56.473

基本上你需要做的是：

1.  加载要更改的xml；
2.  加载要在替换中使用的片段；
3.  在您在 [1] 上加载的文档中采用您在 [2] 中加载的节点；
4.  使用 XPath 查找要替换的节点；
5.  从你在[4]中找到的节点中获取父节点，从父节点中移除在[4]中找到的节点，并添加你采用的节点。

你可以使用类似的东西：

```
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.StringWriter;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.xml.sax.SAXException;

public class XmlXPathReplace {

    public static void main(final String[] args) throws SAXException, IOException, ParserConfigurationException,
            XPathExpressionException, TransformerException {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true); // never forget this!
        DocumentBuilder builder = factory.newDocumentBuilder();

        // step 1.
        Document doc = builder.parse(new ByteArrayInputStream(( //
                "<?xml version=\"1.0\"?>" + //
                        "<people>" + //
                        "<person><name>First Person Name</name></person>" + //
                        "<person><name>Second Person Name</name></person>" + //
                        "</people>" //
                ).getBytes()));

        // step 2
        String fragment = "<name>Changed Name</name>";
        Document fragmentDoc = builder.parse(new ByteArrayInputStream(fragment.getBytes()));

        // step 3
        Node injectedNode = doc.adoptNode(fragmentDoc.getFirstChild());

        // step 4
        XPath xPath = XPathFactory.newInstance().newXPath();
        XPathExpression expr = xPath.compile("//people/person[2]/name");
        System.out.println();
        Element nodeFound = (Element) expr.evaluate(doc, XPathConstants.NODE);

        // step 5
        Node parentNode = nodeFound.getParentNode();
        parentNode.removeChild(nodeFound);
        parentNode.appendChild(injectedNode);

        DOMSource domSource = new DOMSource(doc);
        Transformer transformer = TransformerFactory.newInstance().newTransformer();
        StreamResult result = new StreamResult(new StringWriter());
        transformer.transform(domSource, result);
        System.out.println(result.getWriter().toString());
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T18:26:59.277

```
Node importedTemplateChildNode = targetDoc.importNode(templateChildNode, true);   
// Importing template node to the target document(this solves wrong_DOCUMENT_ERR:)

targetParentNode.replaceChild(importedTemplateChildNode, targetChildnode);       
// Replace target child node with the template node

Transformer tranFac =TransformerFactory.newInstance().newTransformer();
tranFac.transform(new DOMSource(targetDoc), new StreamResult(new FileWriter(targetXmlFile))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T07:01:19.500

除了删除旧节点并添加新节点，您还可以使用 : `parentNode.replaceChild(injectedNode, nodeFound)`。使用此功能，您将保持节点井井有条

# nginx - 带有 try_files 和 gzip_static 的 nginx 只提供未压缩的服务

> ID：11066258
> 
> 赞同：6
> 
> 时间：2012-06-16T19:05:12.633
> 
> 标签：nginx

戴着我的系统管理员帽子，我的一位应用程序开发人员给了我这个问题：

在他的 app 目录中，他在 app/assets/javascripts 和 app/public/javascripts 中有 javascript 文件。在 public/javascripts 目录中，有未压缩文件和 .gz 文件。期望 nginx 将提供 javascripts 的压缩版本。

在应用程序的 nginx 配置文件中，我添加了以下内容：

```
 location /javascripts {
    gzip on;
    gzip_static on;
    try_files /srv/app_dir/current/public/$uri /srv/app_dir/current/assets/$uri;
  } 
```

使用这些参数，应用程序可以正常工作。找到并提供所有 .js 文件。但是 nginx 永远不会找到并提供文件的 gzip 版本。

有什么解决这个问题的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T22:43:53.727

Nginx 1.6 不需要解压文件：

```
 location ~ \.txt$ {
        gzip_static on;
        gunzip on;
    } 
```

两者`curl http://localhost/index.txt`和`curl -H "Accept-Encoding: gzip" http://localhost/index.txt | gunzip`现在都可以`/srv/www/localhost/index.txt.gz`在我的根目录中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-29T15:25:44.700

我刚刚在 nginx/1.13.8 上尝试了@hendry 的答案，但它不起作用。当我使用“gzip_static always;”时它开始工作了 而不是“gzip_static on;”。

```
location /fd/ {
    gunzip on;
    gzip_static always;
} 
```

卷曲输出：

```
$ curl --silent -H "Accept-encoding: gzip" "http://myhost.com/fd/test.txt" | file -
/dev/stdin: gzip compressed data, from Unix
$ curl --silent "http://myhost.com/fd/test.txt" | file -
/dev/stdin: ASCII text 
```

# jquery - 使用自定义方法进行 Jquery 验证我无法提交表单

> ID：11066260
> 
> 赞同：0
> 
> 时间：2012-06-16T19:05:29.607
> 
> 标签：jquery, validation

我正在使用带有自定义方法的 jquery 验证。不知何故，我需要单击两次才能提交表单。如果您在提交之前生成 onblur 事件，它会起作用。

我已经设置了一个字段并单击以下链接中的按钮进行验证。我设置为返回您输入的任何内容，但如果您不单击两次或生成 onblur 并单击，我将无法提交表单。我在这里做错什么了吗？

[http://skoizumi.com/autocomplete/](http://skoizumi.com/autocomplete/)

```
jQuery.validator.addMethod("contractorName", function (value, element) {
            console.log( '1');
            console.log( element);
            //$('#searchtext').autocomplete('close');

            var result = false;
            var contractorName = $("#searchtext" ).val();

            //validating the specified field has a valid name
            $.ajax({
                type: "GET",
                url: "/autocomplete/testdata.php",
                dataType:"json",
                async: false,                    
                complete: function(){

                },
                success: function(msg)
                {                        
                    console.log( msg);
                    result = true;                         

                }             
            });
            console.log( '2'); 
            return result;
        }, "Specified Contractor doesn't exist");

        $("#myform").validate(
        {
            rules:{
                    searchtext: {
                        contractorName: true    
                    }
            },
            onsubmit: false,
            onkeyup: false
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:59:40.620

最后我设法找到了工作。不知何故，当我将 onfocusout 设置为 true 时，我无法发布有效数据。通过添加自定义方法，您无需将服务器端更改为 true/false，但您可以决定完整的功能。[http://skoizumi.com/autocomplete/index.html](http://skoizumi.com/autocomplete/index.html)如果您输入“European Nightjar”，您可以提交表单，否则会出现一些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:27:00.130

AJAX 是异步的，因此`result`在您的方法中将始终返回`false`. 使用插件的内置`remote`方法。 [http://docs.jquery.com/Plugins/Validation/Methods/remote#options](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)

# c# - 如何使用上下文菜单获取列表视图中条目的值

> ID：11066267
> 
> 赞同：0
> 
> 时间：2012-06-16T19:05:49.500
> 
> 标签：c#, .net, windows

我在列表视图上有一个上下文菜单控件，尽管当我右键单击它时我试图在列表视图中获取所选项目的值 - 我查看了许多来源，但没有找到任何令人信服的东西

```
private void startCheckToolStripMenuItem_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:47:21.307

只需将发件人投射到 ListBox（假设这是右键单击的内容），然后您就可以遍历选定的项目。

```
var lbx = sender as ListBox;
foreach (var item in lbx.SelectedItems) ... 
```

[手键，所以可能是大写错误等]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:03:46.703

```
 private void listView1_MouseClick(object sender, MouseEventArgs e)
            {
                ListView listView = sender as ListView;
                this.contextMenuStrip1.Items.Clear();
                if (e.Button == System.Windows.Forms.MouseButtons.Right)
                {
                    ListViewItem item = listView.GetItemAt(e.X, e.Y);
                    if (item != null)
                    {
                        this.contextMenuStrip1.Items.Add(item.Text);
                        item.Selected = true;
                        contextMenuStrip1.Show(listView, e.Location);
                    }
                }
            } 
```

![带有 ContextMenuStrip 的 ListView](../Images/fb9e63b6b5b1e37fa0e93d4417f0421d.png)

# javascript - 主干视图上没有“应用”方法

> ID：11066273
> 
> 赞同：0
> 
> 时间：2012-06-16T19:07:12.197
> 
> 标签：javascript, backbone.js, coffeescript

我一直试图在我的（相当简单的）Backbone/Coffeescript 代码中找出一个奇怪的错误。

运行我的应用程序时，我收到此错误：

```
Uncaught TypeError: Object #<IndexView> has no method 'apply' 
```

这是我的路由器：

```
class window.App.Router extends Backbone.Router
    initialize: ->
        Backbone.history.start({pushState: true})
        $(document).on "click", "a:not([data-bypass])", (evt) ->
            href = $(this).attr "href"
            protocol = this.protocol + "//"
            if href.slice(protocol.length) != protocol
                evt.preventDefault()
                App.navigate(href, true)

    routes: {
        "": "index",
        "artist/:id": "artist",
        "albums/:id": "album"
    }

    index:
        @view = new App.IndexView() 
```

和观点：

```
class App.IndexView extends Backbone.View
    template: "index"
    el: $("#container")

    initialize: ->
        @render()

    render: ->
        get_template(@el, @template, @domEvents)

    domEvents: ->
        $("#searchInput").on "change keydown", ->
            if $(this).val().length >= 0
                $("#placeholder").css("display", "none")
            else
                $("#placeholder").css("display", "inline-block") 
```

从我的测试来看，一旦我摆脱`Backbone.history.start({pushState: true})`了代码行，这个错误就会消失。不幸的是，我的应用程序需要 pushState，所以摆脱它不是一种选择。

有没有人知道这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:52:17.447

当您在路由器中`->`定义时，您错过了：`index`

```
class window.App.Router extends Backbone.Router
    #...
    index:
        @view = new App.IndexView() 
```

结果是`new App.IndexView()`在您的`App.Router`类正在构建时执行并`index`成为`new App.IndexView()`; 此外，在这种情况下`@`是类本身，所以你最终设置`App.Router.view = new App.IndexView()`. JavaScript 看起来像这样：

```
Router.prototype.index = Router.view = new IndexView(); 
```

然后，由于您的路线：

```
routes: {
    "": "index",
    #...
} 
```

路由系统尝试`router.index`作为函数调用（[`Function.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)用于确保适当的调用上下文）以响应路由请求；但是`router.index`是一个视图实例而不是一个函数/方法，所以你得到你的错误：

```
Uncaught TypeError: Object #<IndexView> has no method 'apply' 
```

因为你不能调用`apply`视图实例。

据推测，您`Backbone.history.start({pushState: true})`触发了初始路由到`index`.

因此，修复您的类定义以定义`index`为方法，然后重试。

* * *

`Backbone.history.start({pushState: true})`顺便说一句，在路由器内部打电话`initialize`有点奇怪。通常的[过程是在您的路由器创建`start` *后*](http://documentcloud.github.com/backbone/#History-start)调用：

> 当您的所有路由器都已创建，并且所有路由都已正确设置后，调用`Backbone.history.start()`以开始监视`hashchange`事件和调度路由。

因此，可能会在所有路由都正确设置并准备就绪之前启动历史系统。这可能会导致一些奇怪的事情发生。

# java - 通过 long[] 而不是 Long

> ID：11066275
> 
> 赞同：0
> 
> 时间：2012-06-16T19:07:40.043
> 
> 标签：java

我有这样的功能

```
void doSmth(Long... paramg){
} 
```

但我不能通过`long[]`而不是`Long...`。为什么？我认为这是相同的事情（它们之间有什么区别？）。

**我怎样才能通过 long[] 而不是 Long... ？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T19:08:31.150

`long`可以自动[装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)，`Long`而不是数组 ( `long[]`)

为了`long[]`工作，它应该是

```
void doSmth(long... paramg){
} 
```

# php - PHP crud 抽象方法

> ID：11066277
> 
> 赞同：0
> 
> 时间：2012-06-16T19:07:46.907
> 
> 标签：php, crud, layer, abstraction

这是我在这里找到好的答案几年后的第一个问题。我正在重新编写我的一项工作，试图使用更深层次的 OOP 方法，但我不知道我所做的是否“正确”。

我想做的是一个简单的产品创建，但足够抽象，因此其他编码人员不必知道使用什么数据库，或者如何验证产品数据。就像简单的 create($attr) 方法一样。

这是代码的基本方案。

```
abstract class Crud_model_abstract {

 # private vars
 # getter for private vars
 # setter for private vars
 # some basic methods
}

class Product_model_crud extends Crud_model_abstract {

 # private vars
 # getter for private vars
 # setter for private vars
 # CRUD methods (using phpactiverecord.com lib)
} 
```

然后是与 Product_model_crud 结构相同的类别、品牌等的一些类

现在我的问题是：我是否应该创建另一个构成实际产品的模型（将类别添加到它的表中，然后将品牌添加到它的表中......然后创建产品并存储它）然后从传递参数的控制器调用该模型，或者我应该将那个大模型（构成产品的模型）转换为控制器。

我相信我应该创建一个大模型，但目前我还不确定。我已经阅读了太多关于 OOP 良好实践的材料，但我对每一步都有疑问：D

我所理解的（如果我错了，请纠正我）我的代码中应该有足够的层以使其更加干净和具体。但在某些情况下，我看不出什么时候足够。

也许这是一个愚蠢的问题（当然！！）但我不知道我在做什么了！！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:12:22.627

只需使用一个模型插入产品。例如：

```
class Products extends abstractClass {

public function addProduct($params) {
 // Insert
}

public function getProduct($id) {
 // Get a product
}

public function editProduct($id, $params) {
 // Edit
}

} 
```

您的抽象类将指定哪些方法需要包含在您的子类中。我认为你在考虑整个场景。

然后你会这样做：

```
$product = new Products();
$product->addProduct(array('id' => 5, 'name' => 'Dog toy')); 
```

# java - Java 应用程序中的 Microsoft 翻译 API

> ID：11066283
> 
> 赞同：1
> 
> 时间：2012-06-16T19:09:53.040
> 
> 标签：java, noclassdeffounderror, language-translation, microsoft-translator

我正在尝试在我的 Java 应用程序中制作 Microsoft Translator API。我在 Windows Azure 市场注册，并注册了我的 Microsoft Translate 应用程序，所以我有这些 ClientId 和 Client Secret 密钥，但它仍然不起作用。

我找不到我做错了什么。

这是我的代码：

```
import com.memetix.mst.language.Language;
import com.memetix.mst.translate.Translate;

public class Main {
    public static void main(String[] args) {
        try{
            Translate.setClientId(/* my Client Id */);
            Translate.setClientSecret(/* my Client Secret */);

            String translatedText = Translate.execute("Bonjour le monde", Language.FRENCH, Language.ENGLISH);

            System.out.println(translatedText);
        }
        catch(Exception e) {
            System.err.println("Exception: " + e.getMessage());
        }
    }
} 
```

这是我得到的错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/json/simple/JSONValue
at     com.memetix.mst.MicrosoftTranslatorAPI.retrieveResponse(MicrosoftTranslatorAPI.java:161)
at com.memetix.mst.MicrosoftTranslatorAPI.retrieveString(MicrosoftTranslatorAPI.java:199)
at com.memetix.mst.translate.Translate.execute(Translate.java:61)
at dictionary.mainWindow.main(mainWindow.java:27)
Caused by: java.lang.ClassNotFoundException: org.json.simple.JSONValue
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 4 more
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:26:35.957

您的类路径中缺少 json-simple.jar：[http://search.maven.org/remotecontent?filepath=com/googlecode/json-simple/json-simple/1.1.1/json-simple-1.1.1。罐](http://search.maven.org/remotecontent?filepath=com/googlecode/json-simple/json-simple/1.1.1/json-simple-1.1.1.jar)

# java - 从侦听器内部更改的通知数据集不起作用

> ID：11066284
> 
> 赞同：1
> 
> 时间：2012-06-16T19:09:57.717
> 
> 标签：java, android

我正在尝试使用 notifyDatasetChanged() 从位置侦听器的 onLocationChanged 函数中更新我的 Activity 的 ListView，但它不起作用。但是，我可以在代码中的同一点使用 setListAdapter，这将起作用。

这是我的代码：

```
public class TestListeners extends ListActivity {

    ArrayAdapter adapter;

    private final LocationListener networkLocationListener = new LocationListener() {

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            switch (status) {
            case LocationProvider.AVAILABLE:
                break;
            case LocationProvider.OUT_OF_SERVICE:
                break;
            case LocationProvider.TEMPORARILY_UNAVAILABLE:
                break;
            }
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onLocationChanged(Location location) {
            checkProximity(location.getLatitude(), location.getLongitude(), cx);
        }
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //get a list here venueNamesArray        
        //etc

         adapter = new ArrayAdapter<String>(this,
         android.R.layout.simple_list_item_1, android.R.id.text1,
         venueNamesArray); 

         setListAdapter(adapter);
    }

    private void checkProximity(double curLat, double curLon, Context cx) {

        //get a different list here venueNamesArray
        //etc

        adapter = new ArrayAdapter<String>(getApplicationContext(),
                android.R.layout.simple_list_item_1, android.R.id.text1,
                venueNamesArray);

        adapter.notifyDataSetChanged();//this doesnt work and no error is thrown
            setListAdapter(adapter);//this works

    }

} 
```

我想使用 notifyDatasetChanged() 而不是 setListAdapter 的原因是因为 listview 在设置时会滚动回顶部。当我使用 notifyDatasetChanged() 时没有抛出错误，所以我很难明白为什么这不起作用。

我已经尝试为此使用普通的 ListView 而不是扩展 ListActivity 并遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:13:52.980

因为您每次都在创建一个新的适配器。您不仅要更改当前链接到列表的同一适配器中的数据........

由于您正在创建新适配器，并且在您调用 setAdpter 之前，新的 adter 不会与列表链接所以不值得调用 adapter.notifyDataSetChanged(); 对于未与列表链接的 adtper...

解决方案

无需每次都创建适配器。jsut 在 On-create 中创建并设置一次，仅更改 ArrayList（添加/删除而不是创建新的）并调用 adapter.notifyDataSetChanged();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:20:56.193

您正在 checkProximity 中重新创建适配器，这就是 notifyDataSetChanged 不起作用的原因。

将您的代码更改为以下。

```
private void checkProximity(double curLat, double curLon, Context cx) {

        //get values that are to be added into venueNamesArray.

        venueNamesArray.add(value1); //This is just sample you will put your values
        venueNamesArray.add(value2);

        adapter.notifyDataSetChanged();

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T19:16:34.663

当您在回调中创建新对象时`Adapter`，设置为列表适配器的对象不会受到影响。在新实例上调用so `notifyDataSetChanged`，而与 关联的实例`List`不知道方法调用。

将代码更改为以下内容：

```
private void checkProximity(double curLat, double curLon, Context cx) {

    //update the original venueNamesArray, don't create a new instance

    adapter.notifyDataSetChanged();
} 
```

# ruby-on-rails - b/w minitest-rails 和 minitest-spec-rails 有什么区别？

> ID：11066286
> 
> 赞同：8
> 
> 时间：2012-06-16T19:10:05.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, minitest

研究将 Minitest 用于现有的 Rails 3.2。我试图了解 minitest-rails 和 minitest-spec-rails 之间的区别。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T16:19:21.663

[minitest-spec-rails](https://github.com/metaskills/minitest-spec-rails)和[minitest-rails](https://github.com/blowmage/minitest-rails)之间的主要区别在于它们解决问题的范围。

## minitest-spec-rails

minitest-spec-rails 覆盖了 Rails 默认提供的测试基础设施，并增加了在测试中使用 Minitest Spec DSL 和匹配器的能力。这意味着您无需对现有测试进行任何更改即可开始使用 Spec DSL。这也意味着 Spec DSL 在每个测试中都可用。

## minitest-rails

minitest-rails 增加了使用 Spec DSL 的能力，但也改变了编写测试的方法。它为您的测试提供了新的生成器，并允许您从 TDD 风格的断言或 BDD 风格的期望中进行选择。它将测试文件放置在更合理的位置。

它还允许您现有的测试与新的 Minitest 测试并存。您可以选择覆盖类似于 minitest-spec-rails 的默认测试基础架构，但您也可以选择不更改它们。

*披露：我是 minitest-rails 的作者*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:34:31.167

使用 minitest-spec-rails，我们有一个可行的解决方案，将 MiniTest::Spec 替换为 ActiveSupport::TestCase 的超类。这个解决方案很简单，不需要您在 test_helper.rb 中重新创建新的测试用例，也不需要使用 minitest-rails 等 gem 提供的生成器。

在 Rails 中进行测试的最小更改。您的测试类将从 MiniTest::Rails::ActiveSupport::TestCase 继承，而不是 ActiveSupport::TestCase。您可以使用 MiniTest::Spec DSL。您可以使用标准模型、控制器、资源和其他生成器生成测试文件。

```
rails generate model User 
```

或者

您可以通过提供 --spec 选项指定在任何生成器上使用 MiniTest::Spec DSL 生成测试

```
rails generate model User --spec 
```

# html - HTML 聊天：附加文本是最好/唯一的方法吗？

> ID：11066288
> 
> 赞同：1
> 
> 时间：2012-06-16T19:10:17.827
> 
> 标签：html

到目前为止，我看到的所有浏览器内聊天室都将消息附加到 html 中。

问题：这是建立基于浏览器的聊天室的正确方法吗？如果我实现这样的基于浏览器的聊天，我会遇到任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:16:04.983

是的，这就是如何在 html 中创建聊天室。在不以某种方式更改 html 的情况下，没有实用的方法来显示更多文本。

您可能要注意的唯一问题是自动滚动。浏览器不会继续向下滚动以显示下一条新消息（假设您在底部附加），除非您将自动滚动代码编写到 javascript 中，因此您可能应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:20:43.210

它应该可以跨浏览器工作，但您可能会遇到 IE 和`document.getElementById();`

# scala - 抑制 sbt 控制台/Scala REPL 中的返回类型

> ID：11066289
> 
> 赞同：6
> 
> 时间：2012-06-16T19:10:40.073
> 
> 标签：scala, sbt, read-eval-print-loop

我记得有一个开关可以抑制Scala REPL 中返回类型的打印，但我找不到它。我对将此开关添加到 sbt 构建文件特别感兴趣。类似的东西`returnTypes in console := false`。

例如，现在我有

```
scala> within( Span( 0, 33 ))
res7: scala.collection.immutable.IndexedSeq[(de.sciss.lucre.expr.SpanLike, scala.collection.immutable.IndexedSeq[(de.sciss.lucre.expr.Expr[de.sciss.lucre.stm.InMemory,de.sciss.lucre.expr.SpanLike], de.sciss.lucre.expr.Expr[de.sciss.lucre.stm.InMemory,Long])])] = Vector() 
```

出于显而易见的原因，我想要

```
scala> within( Span( 0, 33 ))
res7: Vector() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T00:19:39.080

我的问题基本上反映在[这个邮件列表问题](http://www.scala-lang.org/node/11813)中。根据 Rex Kerr 的想法，以下内容可以进入`build.sbt`：

```
initialCommands in console := """// helper method to disable type printing
def shortresults[T](t: => T) = {
   val s = t.toString
   val name = s.takeWhile(_ != ':')
   val idx = s.indexOf(" = ")
   val full = if (idx >= 0) name + s.substring(idx) else s
   val short = if (full.length>799) full.substring(0,796)+"..." else full
   print(short)
   t
}
""" 
```

但遗憾的是，在控制台启动并运行后，仍然需要手动执行以下三个 REPL 转义命令：

```
:power
:wrap shortresults
:silent 
```

# iphone - UINavigationController 中的 CCGLView 空白

> ID：11066290
> 
> 赞同：0
> 
> 时间：2012-06-16T19:10:45.033
> 
> 标签：iphone, ios, cocos2d-iphone

我有一个在 Interface Builder 中创建的 CCGLView。我有一个根导航控制器，我将自定义 UIViewController 推送到该控制器上。当这个 UIViewController 加载时，我在 viewDidLoad 中连接我的 CCGLView，一切正常——我可以与我的场景交互。

当我使用后退按钮弹出视图控制器，然后尝试再次加载它时，我的场景应该显示为黑色的空间。我错过了什么吗？

这就是我为导演设置场景和视图的方式：

```
- (void)viewDidLoad
{
[super viewDidLoad];
CCDirector *director = [CCDirector sharedDirector];
[director setAnimationInterval:1.0/60];
[director setView:glView]; // glView declared/typed in IB

CCScene *scene = [CCScene node];
[scene setContentSize:self.glView.frame.size];
scene.position = ccp(0,0);

self.storySceneLayer = [StorySceneLayer node];  // Create the scene that contains our game world
self.storySceneLayer.delegate  = self;
[scene addChild: self.storySceneLayer];

[director pushScene:scene];
[director runWithScene:scene];
[director startAnimation]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:20:57.417

这与另一个问题有关，@gmogames 在[https://stackoverflow.com/a/11077131/30512上发布了解决方案](https://stackoverflow.com/a/11077131/30512)

# python - 在 python 中的 matplotlib 中以交互方式显示图形

> ID：11066295
> 
> 赞同：1
> 
> 时间：2012-06-16T19:11:30.290
> 
> 标签：python, numpy, ipython, matplotlib

对于我的生活，我无法`matplotlib`在不活动的情况下显示图表`ipython`。

我尝试了两种方法 - 每次，我都会得到相同的结果：

```
In [10]: plot([1,2,3])
Out[10]: [<matplotlib.lines.Line2D at 0x104e9ca50>] 
```

以下是我迄今为止尝试过的两种方法： 使用[文档](http://matplotlib.sourceforge.net/users/shell.html)作为指导，我尝试了两种不同的方法：

第一的：

```
ipython --pylab

plot([1,2,3])
xlabel('hi mom')

In [3]: plot([1,2,3])
Out[3]: [<matplotlib.lines.Line2D at 0x107e369d0>] 
```

第二：

```
ipython
import numpy
import pylab

In [5]: pylab.plot([1,2,3])
Out[5]: [<matplotlib.lines.Line2D at 0x104ca7b90>] 
```

如何让情节显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T19:16:30.667

您可能有一个非 GUI 后端集。试着做`pylab.get_backend()`看看你设置了什么后端。查看[此处](http://matplotlib.sourceforge.net/faq/usage_faq.html#what-is-a-backend)和[此处](http://matplotlib.sourceforge.net/api/matplotlib_configuration_api.html)的文档以了解如何设置后端。

# svn - svn 删除删除的文件

> ID：11066296
> 
> 赞同：46
> 
> 时间：2012-06-16T19:11:46.923
> 
> 标签：svn

我有一个 SVN 项目的工作副本。文件被应用程序从此工作副本中删除。当我使用 SVN 命令行提交工作副本时，我想从存储库中删除这些已删除的文件。

如果我使用提交工作副本`svn commit`，则不会从项目中删除文件（因为它们没有在本地被删除`svn delete`。有什么方法可以告诉 SVN 删除（从存储库中）在工作副本？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-06-16T19:21:11.647

使用

```
svn status 
```

它将列出工作副本的更改。（删除的文件以 ! 开头）

那么你也能 ：

```
svn delete file_to_del1 file_to_del2 etc 
```

最后提交

您还可以编写一个小片段来自动执行此操作：

```
svn status | grep '^!' | awk '{print $2}' | xargs svn delete 
```

并最终添加一个别名：

```
alias svn_precommit="svn status | grep '^!' | awk '{print $2}' | xargs svn delete" 
```

如果您需要在文件名中支持 @ / 空格，则需要使脚本复杂化（您不应在文件名中使用这些字符，但有时这是由其他人做出的决定） - 您可以在 .bashrc 中直接使用它：

```
svn_prepare_del() {
        svn st | grep '^!' | awk '{$1=""; 打印 " --force \""substr($0,2)"@\"" }' | xargs svn 删除
}

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T00:34:15.060

您所说的问题（*我可以通过某种方式告诉 SVN 删除（从存储库中）工作副本中缺少的任何文件吗？*）实际上是相关问题[svn command to delete all local missing files](https://stackoverflow.com/questions/9600382/svn-command-to-delete-all-locally-missing-files)的副本。为了回答这个问题，我提供了一个单行 PowerShell 脚本，让您可以自动识别并从存储库中删除必要的文件。为了方便起见，我在这里复制它：

```
svn status | ? { $_ -match '^!\s+(.*)' } | % { svn rm $Matches[1] } 
```

当然，这假设您使用的是 Windows。如果您使用的是 Linux/Unix，[这是一个类似的解决方案。](http://wpquicktips.wordpress.com/2011/04/14/remove-all-missing-files-from-a-svn-working-copy/)

但是，当您添加问题的第二部分时，您在稍后的评论中无意中透露了:-) -*有没有办法在提交时自动发生这种情况？*--那么你的问题是独一无二的。

我能看到回答第二部分的唯一途径是使用**预提交挂钩**，即在启动提交时但在提交本身实际发生之前执行的[挂钩脚本。](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html#svn.reposadmin.create.hooks)通常，您将使用预提交挂钩来验证某些条件，并允许提交继续或终止。唉，我认为在提交期间修改正在提交的文件集是不允许的，更不用说是可取的了。但是我没有发现这一点记录在案，所以你可能想进一步挖掘这一点。

**2012.06.19 根据 Don 的评论进行澄清**

Don 是正确的，您需要一个*客户端*挂钩，而不是*服务器*端挂钩，因为要处理的已删除文件位于客户端上。命令行 svn 没有这个选项，但 TortoiseSVN 确实提供[了客户端钩子](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-hooks)。事实上，在我阅读了参考手册页之后，我被提醒说 TortoiseSVN 不仅提供了**预提交**钩子，而且还提供了一个**start-commit**钩子，非常适合这种情况。不同之处在于 pre-commit 挂钩*在*您打开提交对话框之后以及*在*您按 OK 尝试执行提交之后运行。另一方面，start-commit 钩子在*之前运行*提交对话框打开。因此，有了钩子脚本，当您看到要提交的文件列表时，它也将包含要删除的文件！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-08T15:55:54.230

当您收到一堆文件或其中包含文件名的路径目录时，以下工作。它将适用于 OSX、IOS 和 linux

```
svn st | grep ^! | awk '{$1=""; print " --force \""substr($0,2)"@\"" }' | xargs svn rm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-16T16:36:11.613

这甚至适用于[上述答案](https://stackoverflow.com/a/11066348/5506547)`@`中提到的文件名中的和空格。

```
svn status | grep "^!" | cut -c2- | xargs -i{} svn delete "{}" 
```

为什么？它获取可删除文件的列表并逐行传递到`svn delete`. [在此处](https://superuser.com/a/526354)了解更多关于`xargs`带牙套的信息。

**编辑**：如果您在 CI/CD（例如 GitLab CI）中使用上面的命令，您需要确保忽略错误，因为如果未找到匹配项`grep`将返回：`exit code 1`

```
(svn status | grep "^!" | cut -c2- | xargs -i{} svn delete "{}") || : 
```

# php - 我的 php 函数有什么问题？

> ID：11066297
> 
> 赞同：-5
> 
> 时间：2012-06-16T19:12:14.010
> 
> 标签：php

我相信我的 php 函数的语法一定有问题，但我不确定它是什么。谁能发现它？

```
function sortByMetal() {
    global $conn;

    $query = "SELECT * FROM necklaces WHERE metal_id = 1 AND color_id = 2";
    $result = mysql_query($query, $conn);

    $output = "";
    while ($necklaces = mysql_fetch_array($result)) {
            $output .= $necklaces['name'];
    }
    return $output;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T19:18:24.720

虽然我没有看到语法错误，但我确实看到了其他一些不那么重要的问题：

1.  您正在使用全局变量。
2.  你正在使用`mysql_*`函数。
3.  您选择的数据超出了您的需要。

让我们解决其中的每一个问题：

## 您正在使用全局变量

不要使用全局变量，而是将您需要的作为参数传递给函数：

```
function sortByMetal($conn) { 
```

## 您正在使用`mysql_*`函数

请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有很好的 PDO 教程](http://goo.gl/vFWnC)。

## 您选择的数据超出了您的需要

`SELECT *`如果您只打算使用`name`. 您可以使用`SELECT `name``来仅选择您需要的数据。

* * *

了解了所有这些后，我想出了这个：

```
/**
 * @param PDO $conn
 *
 * @return string
 */
function sortByMetal(PDO $conn) {
    $query = <<<MySQL
SELECT `name`
  FROM `necklaces`
  WHERE `metal_id` = 1
    AND `color_id` = 2;
MySQL;
    $stmt = $conn->prepare($query);
    $stmt->execute();

    $result = "";
    while ($necklace = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $result .= $necklace['name'];
    }

    return $result;
} 
```

一口气解决了所有这些问题。请务必花时间阅读我提供的链接，以了解我在此代码中所做的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:23:09.893

我唯一看到的（除了其他答案非常有效的点）：你的输出字符串会很丑，因为你没有用空格分隔单词。

也许您可以使用 GROUP_CONCAT 使用不同的 sql 查询，因此您将立即获得一个不错的名称列表：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT GROUP_CONCAT( necklaces.name )
FROM necklaces
WHERE metal_id = 1 AND color_id = 2
GROUP BY NULL; -- force group by 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T19:19:27.470

检查字段是否正确，或者全局变量是否正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T19:17:21.443

假设您的表格和 $conn 设置正确，我看不到任何突出的东西。

首先在该行 `mysql_error();` 之后添加该`$result`行，这应该显示任何 mysql 错误。

`,$conn)`此外，假设您已经操作了 mysql 数据库连接，您可能不需要`mysql_query`.

试试看，看看你会得到什么。

# ios - iOS App Engine 身份验证 Cookie

> ID：11066299
> 
> 赞同：2
> 
> 时间：2012-06-16T19:12:37.097
> 
> 标签：ios, google-app-engine, authentication, cookies, uiwebview

在我的 iOS 应用程序中，我有一个 WebView，它使用我的 GAE 应用程序进行身份验证。登录工作正常，我可以看到 cookie 数据。

我在验证后看到的示例 cookie 数据：（为简洁起见，缩短了 ACSID）

```
=======
2012-06-16 10:00:13.784 FooApp[6342:12203] <NSHTTPCookie version:0 name:"ACSID" value:"AJKiYcGJTQ964S0JF7Rp5H" expiresDate:2012-06-30 13:57:59 +0000 created:2012-06-16 13:58:01 +0000 (3.61548e+08) sessionOnly:FALSE domain:"foo.appspot.com" path:"/" isSecure:FALSE>
===== 
```

2个问题..

1.  检查 ACSID 是否具有足以证明身份验证的值？如果不是，我应该检查什么？
2.  是否可以获得用户登录时使用的电子邮件地址？

谢谢！乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:10:16.560

我从未尝试在 iOS 上执行此操作。但在 Android 上，我使用 App Engine Rest Client 进行身份验证。我看到他们为每个请求存储和恢复 cookie。所以我相信它肯定会在 iOS 上运行。

我很难为每个请求都包含 ACSID cookie，它确实有效。您必须确保它们确实位于服务器上的请求标头中。如果您成功通过应用引擎进行身份验证。您可以在 appstats 中查看 CGI 环境并查看身份验证信息。

这是应用引擎上的 android 客户端身份验证器的链接[https://code.google.com/p/aerc/](https://code.google.com/p/aerc/)。您可以在 iOS 上查看并重新实现。

如果您想要用户电子邮件地址，并且可以从应用引擎上的用户对象获取它，`users.get_current_user().email()` 并通过 http 请求从您的客户端应用程序请求它。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:21:50.083

我不会依赖未记录的行为——如果您想知道用户是否已登录以及用户的电子邮件地址，请将该信息以 HTTP 响应的形式直接发送回您的客户端。

没有什么说行为 ACSID cookie 不会随意改变。

# perl - 如何从嵌入式 lua/perl 中的 nginx 上传模块访问（POST）参数？

> ID：11066300
> 
> 赞同：1
> 
> 时间：2012-06-16T19:12:37.683
> 
> 标签：perl, file-upload, nginx, lua

我一直在试图弄清楚如何从嵌入式 perl（使用 nginx-perl）或 lua（使用嵌入式 lua 模块）访问 nginx 上传模块的结果。我只能找到如何将模块与 fastcgi（或类似）一起使用的示例，如果可能的话，我希望避免使用该模块。

简单地让 upload_pass 有一个 lua/perl 内容处理程序似乎不起作用；正文以某种方式被截断为第一行（是的，我已经告诉它等待正文并确保它没有写入文件）。

至少在使用 Perl 时（我没有尝试过 Lua，但我怀疑会发生同样的事情），如果一个人对另一个 nginx 实例执行 proxy_pass，则可以使用完整的主体（作为原始多部分/表单数据） .

我的问题是三方面的。首先，这是预期的行为/参数如何从上传模块传递？其次，是否可以在不使用内容处理程序中的 perl/lua 库（重新）解析 multipart/form-data 的情况下访问上传模块的结果。

最后，如果后者不可行，我可以使用 nginx/upload 使用的 multipart/form-data 解析器，而无需手动导出函数并使用某种形式的 FFI。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:53:25.223

使用 lua，您可以通过以下方法获取普通参数：

```
ngx.req.read_body()
local inputjson = ngx.req.get_body_data() 
```

对于记录的帖子参数：[http ://wiki.nginx.org/HttpLuaModule#ngx.req.get_post_args](http://wiki.nginx.org/HttpLuaModule#ngx.req.get_post_args)

常规变量：

```
ngx.var.my_var 
```

Lua nginx 模块有这个很好的文档：[http ://wiki.nginx.org/HttpLuaModule](http://wiki.nginx.org/HttpLuaModule)

为上传模块记录的变量：http: [//www.grid.net.ru/nginx/upload.en.html](http://www.grid.net.ru/nginx/upload.en.html)

```
upload_set_form_field $upload_field_name.name "$upload_file_name";
upload_set_form_field $upload_field_name.content_type "$upload_content_type";
upload_set_form_field $upload_field_name.path "$upload_tmp_path"; 
```

应该可以通过以下方式访问：

```
ngx.var.upload_field_name.path 
```

只需在 var 上做一个日志或打印来验证

# iphone - iphone：如何检查 uitableview 行模数

> ID：11066301
> 
> 赞同：0
> 
> 时间：2012-06-16T19:12:42.083
> 
> 标签：iphone, ios, uitableview, modulus

这是一个很难解释的问题，所以我希望我能说明一下

我有一个tableview，我想要那个..

第 1 行有一个背景，第 2 行有另一个背景。

和第 3 行有第三个背景..

第四行应该有第一个背景，第五行应该有第二个..

等等..

我用了这段代码

```
if(row+1%1==0){
    bg = [UIImage imageNamed:@"row1.png"];
    selectionBg = [UIImage imageNamed:@"row1.png"];
}

else if(row+1%2==0){
    bg = [UIImage imageNamed:@"row2.png"];
    selectionBg = [UIImage imageNamed:@"row2.png"];
}else if(row+1%3==0){
    bg = [UIImage imageNamed:@"row3.png"];
    selectionBg = [UIImage imageNamed:@"row3.png"];
} 
```

我正在尝试使用模数，但我迷路了..那么有办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:17:49.213

您应该使用`mod 3`，因为您有三个选项：

```
if (row % 3 == 0) {
    // Option A
} else if (row % 3 == 1) {
    // Option B
} else {
    // Option C
} 
```

* * *

顺便说一句，您了解模运算的作用吗？这可能很有趣（来自[Wikipedia](http://en.wikipedia.org/wiki/Modulo_operation)）：

> 在计算中，模运算求一个数除以另一个数的余数。
> 
> 给定两个正数，a（被除数）和 n（除数），模 n（缩写为 mod n）可以被认为是 a 除以 n 的余数。例如，表达式“5 mod 4”的计算结果为 1，因为 5 除以 4 余数为 1，而“9 mod 3”的计算结果为 0，因为 9 除以 3 余数为 0；乘以 3 乘以 3 后，9 没有什么可减去的。

* * *

这是代码中发生的事情：

```
row       row % 3   option
0         0         A
1         1         B
2         2         C
3         0         A
4         1         B
5         2         C
6         0         A
…         …         … 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:22:12.613

不要使用模数，而是使用静态计数器，如下所示

```
 static int rowBGSelector = 0;
    switch (rowBGSelector) {
        case 0:
            NSLog(@"%d, first", i); //Chose BG 1
            break;
        case 1:
            NSLog(@"%d, second", i); //Chose BG 2
            break;
        case 2:
            NSLog(@"%d, third", i); //Chose BG 3
            break;

        default:
            rowBGSelector = -1; //Reset the static
            break;
    }

    rowBGSelector++; //Increment 
```

# wpf - 如何在C#中获取不同国家的当前时间

> ID：11066303
> 
> 赞同：2
> 
> 时间：2012-06-16T19:13:42.193
> 
> 标签：wpf, windows, c#-4.0, timezone

**如何**使用以下任何参数在 C# 中获取不同国家/地区的当前时间，1.国家名称 2.国家时区

这是针对**Windows / WPF 应用程序**的，不像 Web 有人可以回答这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T19:26:16.103

您应该查看`TimeZoneInfo`课程，特别是[TimeZoneInfo.ConvertTime 方法](http://msdn.microsoft.com/en-us/library/bb382770.aspx)。

例如，要获取中欧的当前时间：

```
var remoteTimeZone = TimeZoneInfo.FindSystemTimeZoneById("Central European Standard Time");
var remoteTime = TimeZoneInfo.ConvertTime(DateTime.Now, remoteTimeZone);
Console.WriteLine("Time in {0} is {1}", remoteTimeZone.Id, remoteTime.TimeOfDay.ToString()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-17T04:33:16.380

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

public class Example
{
    public static void Main()
    {

        DateTime thisTime = DateTime.Now;

        Console.WriteLine("Enter the Country");
        var Input= Console.ReadLine();
        string InputConcatenate = (Input + " Standard Time");

        TimeZoneInfo tst = TimeZoneInfo.FindSystemTimeZoneById(InputConcatenate);
        DateTime tstTime = TimeZoneInfo.ConvertTime(thisTime, TimeZoneInfo.Local, tst);
        Console.WriteLine("Time in {0} zone: {1}", tst.IsDaylightSavingTime(tstTime) ?
                          tst.DaylightName : tst.StandardName, tstTime);
        Console.WriteLine("   UTC Time: {0}", TimeZoneInfo.ConvertTimeToUtc(tstTime, tst));

        Console.ReadLine();
    }
} 
```

# asp.net-mvc-3 - 如何传递到或更多系列列表以设置系列

> ID：11066306
> 
> 赞同：2
> 
> 时间：2012-06-16T19:13:57.183
> 
> 标签：asp.net-mvc-3, highcharts

嗨，我正在尝试使用 dotnet highcharts 实现组合的 highchart。所以我有一个柱形图+饼图。我为柱形图制作了 List allSeries = new List()，为饼图制作了 List pieSeries = new List()。

我不知道如何将这两个系列传递给 .SetSeries() ，它接受 SetSeries(Series series); 或 SetSeries(Series[] seriesArray);

```
 public ActionResult Profit()
    {
        DBContext.Current.Open();
        List<RoomType> result = new List<RoomType>();
        result = RoomType.Selectcount();
        List<Series> allSeries = new List<Series>();
        List<Series> pieSeries = new List<Series>();
        List<DotNet.Highcharts.Options.Point> puncte = new List<DotNet.Highcharts.Options.Point>();
        string[] categories = new[] { "Ianuarie", "Februarie", "Martie", "Aprilie", "Mai", "Iunie", "Iulie", "August", "Septembrie", "Octombrie", "Noiembrie", "Decembrie" };
        object[] pointnum = new object[12];
        foreach (var j in result)
        {

            for (int i = 0; i < pointnum.Length; i++)
            {
                pointnum[i] = Roomtypereservations.RoomTypeByDate(j.RoomType_ID, i + 1).FirstOrDefault().NumRezervari;
            }
            allSeries.Add(new Series
            {
                Type=ChartTypes.Column,
                Name = j.Room_Type,
                //Data = new Data(myData)
                Data = new Data(pointnum.ToArray())

            });
            pieSeries.Add(new Series
            {
                Type = ChartTypes.Pie,
                Name = "Total rooms",
                Data = new Data(puncte.ToArray())
            });
            puncte.Add(new DotNet.Highcharts.Options.Point
            {

                Name = j.Room_Type,
                Y=13
                //Data = new Data(myData)

            }); 
        }

        Highcharts chart = new Highcharts("chart")
            .SetTitle(new Title { Text = "Combination chart" })
            .SetTooltip(new Tooltip { Formatter = "function() { return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %'; }" })
            .SetXAxis(new XAxis { Categories =categories} )
            .SetTooltip(new Tooltip { Formatter = "TooltipFormatter" })
            .AddJavascripFunction("TooltipFormatter",
                                  @"var s;
                if (this.point.name) { // the pie chart
                   s = ''+
                      this.point.name +': '+ this.y +' fruits';
                } else {
                   s = ''+
                      this.x  +': '+ this.y;
                }
                return s;")
            .SetLabels(new Labels
            {
                Items = new[]
                                   {
                                       new LabelsItems
                                       {
                                           Html = "Total fruit consumption",
                                           Style = "left: '40px', top: '8px', color: 'black'"
                                       }
                                   }
            })
            .SetPlotOptions(new PlotOptions
            {
                Pie = new PlotOptionsPie
                {
                    Center = new[] { "100", "80" },
                    Size = "100",
                    ShowInLegend = false,
                    DataLabels = new PlotOptionsPieDataLabels { Enabled = false }
                }
            })
            .SetSeries(allSeries.Select(s => new Series { Type = s.Type, Name = s.Name, Data = s.Data }).ToArray());

        return View(chart); 
```

当我只使用一个系列时，如我的示例中它的工作：.SetSeries(allSeries.Select(s => new Series { Type = s.Type, Name = s.Name, Data = s.Data }).ToArray( ));

我如何将 pieSeries 和所有系列都传递给 .SetSeries？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:38:23.353

您不需要 allSeries 和 pieSeries。我会摆脱 pieSeries。您可以根据需要将任意数量的系列分配给您的 allSeries 列表，它们可以是任何类型。因此，更改您的 pieSeries.Add 到以下内容：

```
allSeries.Add(new Series
{
   Type = ChartTypes.Pie,
   Name = "Total rooms",
   Data = new Data(puncte.ToArray())
}) 
```

然后以下语句将起作用，并将您所需的所有系列都添加到图表中：

```
.SetSeries(allSeries.Select(s => new Series { Type = s.Type, Name = s.Name, Data = s.Data }).ToArray()); 
```

# html - 什么时候一起使用 dfn 和 dt？

> ID：11066307
> 
> 赞同：7
> 
> 时间：2012-06-16T19:14:11.067
> 
> 标签：html

根据[HTML5Doctor 关于 dl 元素的文章](http://html5doctor.com/the-dl-element/)：“`<dl>`可用于标记术语表，尽管您必须记住使用它`<dfn>`来表示该词已定义 [in the same document]。” 注意：括号中的语言是我自己的。文章给出了这个标记来解释：

```
<dl>
  <dt><dfn>RSS</dfn></dt>
  <dd>An XML format for aggregating information from websites whose
    content is frequently updated.</dd>
</dl> 
```

请注意，术语“RSS”包含在`dt`和`dfn`标记中。

我的问题是：为什么我们必须记住使用`dfn`？这没有令人信服的解释。我正在寻找对`dfn`用法的明确解释以及一些具体示例。

注意：我查看[了 W3C 的 dfn 标签文档，](http://www.w3.org/TR/html-markup/dfn.html)但这并没有回答我的问题。

### 其他背景和参考资料

有趣的是（或不是），根据[HTML5Doctor 文章](http://html5doctor.com/the-dl-element/)，该`dl`元素在 HTML5 中被重命名为“描述列表”。以前它是“定义列表”。来自[描述列表上的 W3C 工作草案](http://www.w3.org/TR/html-markup/dl.html#dl)：

> dl 元素表示一个描述列表，它由零个或多个术语-描述（名称-值）分组组成；每个分组将一个或多个术语/名称（dt 元素的内容）与一个或多个描述/值（dd 元素的内容）相关联。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T19:20:15.560

> 有趣的是（或不是），根据[HTML5Doctor 文章](http://html5doctor.com/the-dl-element/)，该`dl`元素在 HTML5 中被重命名为“描述列表”。

总结一下；现在它`dl`不再只适用于*定义*列表，而是适用于任何类型的包含术语及其相应*描述*的列表，`dfn`建议使用标签来指示**的内容`dt`实际上是*定义*术语**；也就是说，一个术语的描述实际上就是它的定义（在以前的规范中曾经必然是正确的，但在 HTML5 中不再是这样）。

令人困惑，我知道，但这是基本思想：`dfn`在 a`dt`的内容`dt`是由其定义的内容时使用`dd`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:45:35.860

正如我刚刚了解到的，使用`dt`without的好时机`dfn`是元数据。这是一个在我眼皮子底下的同一个[定义列表 writeup](http://html5doctor.com/the-dl-element/)的例子：

> `<dl>`也适用于标记内容元数据，例如我们关于如何在您的客户端工作中使用 HTML5 的文章的信息。”

这是标记：

```
<dl>
  <dt>Authors:</dt>
  <dd>Remy Sharp</dd>
  <dd>Rich Clark</dd>
  <dt>Editor:</dt>
  <dd>Brandan Lennox</dd>
  <dt>Category:</dt>
  <dd>Comment</dd>
</dl> 
```

（对这个例子的一个小批评：“：”被标记为术语的一部分，但实际上，它被用作分隔符。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-01T15:12:11.413

从最初的博客到这篇文章，没有人对此进行过报道。原因是这样的：

```
<dl>
  <dt><dfn>RSS</dfn> flibbit </dt>
  <dd>An XML format for ...</dd>
</dl> 
```

您可以将非定义目标措辞添加到`<dt>`，因此 CSS 将其标记为定义术语端，而不是定义数据端。

这与`<dfn>`必须出现一次的规则相结合`<dl>`（否则扫描它的人可能会感到困惑）。

# css - 如何创建像谷歌的“更多”按钮这样的下拉菜单？

> ID：11066311
> 
> 赞同：1
> 
> 时间：2012-06-16T19:14:33.033
> 
> 标签：css

在 google 主页上，如果您单击更多按钮，则会在该按钮下方打开一个菜单，如下所示：

![谷歌截图](../Images/5eafd046918074645ad7bcf540853651.png)

如何使用 css/javascript/jquery 对我的网站导航栏中的选项卡之一做类似的事情？

编辑：更具体地说，我想知道如何完成其​​中的 CSS 部分，即：

*   切换下拉菜单时如何在选项卡上显示向上/向下箭头图形。（即切换时显示向下箭头，不切换时显示向上箭头）。（而不是仅仅放一个`<img>`我宁愿使用背景图像来切换箭头）

*   如何让新列表在选项卡下方弹出并与之对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:36:41.310

这是可以做到这一点的一种方式的示例。当然，您可以尝试不同的方法和东西，但这是一个基本的工作解决方案。

通过单击链接来切换的下拉元素非常好。

```
<div id="topBar">
    <a href="#" id="more">More
        <span id="arrow">
            <span id="arrdown">&#x25BC;</span>
            <span id="arrup">&#x25B2;</span>
        </span>
    </a>
    <div class="dropdown">
        <a href="#">One</a>
        <a href="#">Two</a>
        <a href="#">Three</a>
    </div>
</div>​ 
```

然后你通过 JS 点击来切换它。

```
$('#more').click(function() {
    $(this).toggleClass('active');
    $(this).next('.dropdown').toggle();
    return false;
});

$('.dropdown a').click(function() {
    return false;
}); 
```

CSS：

```
body { background: #fee; font-family: calibri; }
#topBar { text-align: right; background: black; color: white; padding: 5px; }
#topBar a { color: white; text-decoration: none; padding: 5px 7px; }
#topBar a:hover { background: #ddd; color: black; }
#topBar a.active { background: white; color: black; }
.dropdown { display: none; position: absolute; right: 5px; background: white; color: black; }
.dropdown a { display: block; color: black !important; text-decoration: none; padding: 5px 7px; }
.dropdown a:hover { background: #ccc; }
#arrup { display: none; }
#arrow { font-size: 0.6em; } 
```

​</p>

这是一个使用 CSS 的实时示例：http: [//jsfiddle.net/ZUPBj/](http://jsfiddle.net/ZUPBj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:20:41.060

对此有许多不同的方法，其中一种最简单：

创建一个隐藏的 div，当单击菜单项时它会被切换。

```
<div class="menu"></div>
<div class="dropDown"></div> <!-- Hidden by default -->
<script>
    $(".menu").on("click",function(){
        $(".dropDown").toggle();
    });
</script>​​​​ 
```

[提琴手](http://jsfiddle.net/sAQPB/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T19:20:57.227

一些谷歌搜索会在网上找到很多教程。我搜索了“在 html 中构建下拉菜单”。下面的这些链接是我发现的一些更好的教程。

[http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)

[http://www.onextrapixel.com/2011/06/03/how-to-create-a-horizo​​ntal-dropdown-menu-with-html-css-and-jquery/](http://www.onextrapixel.com/2011/06/03/how-to-create-a-horizontal-dropdown-menu-with-html-css-and-jquery/)

[http://youhack.me/2011/09/18/how-to-build-a-drop-down-menu-enhanced-with-css3/](http://youhack.me/2011/09/18/how-to-build-a-drop-down-menu-enhanced-with-css3/)

基本上，当用户将鼠标悬停在菜单的第一级时，他们正在做的是显示一个隐藏的 div。

# java - 使用 Datanucleus Rest API 时出错

> ID：11066312
> 
> 赞同：0
> 
> 时间：2012-06-16T19:14:51.210
> 
> 标签：java, google-app-engine, datanucleus

当我对本地 Appengine 开发服务器中的 Datanucleus Rest 资源执行 Http POST 时，服务器会抛出此错误：

```
Caused by: java.lang.ClassNotFoundException: org.datanucleus.NucleusContext
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 37 more 
```

从表面上看，平台不允许在 appengine 上使用 Datnuclues Rest API？

**编辑：** pom 中的数据核：

```
<dependency>
    <groupId>com.google.appengine.orm</groupId>
    <artifactId>datanucleus-appengine</artifactId>
    <version>2.0.0</version>
</dependency>
<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-core</artifactId>
    <version>3.0.0-release</version>
</dependency>

<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-api-jpa</artifactId>
    <version>3.0.0-release</version>
</dependency>
<dependency>
    <groupId>org.apache.geronimo.specs</groupId>
    <artifactId>geronimo-jpa_2.0_spec</artifactId>
    <version>1.0</version>
</dependency>

        <!-- Required by Datanucleus REST API -->
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-rest</artifactId>
            <version>2.0.0-release</version>
        </dependency>
        <dependency>
            <groupId>net.sf.flexjson</groupId>
            <artifactId>flexjson</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-json</artifactId>
            <version>2.0.0-release</version>
        </dependency> 
```

**以下是 WEB-INF/lib 文件夹中与 DN 相关的 jar：**

*   datanucleus-rest-2.0.0-release.jar
*   datanucleus-json-2.0.0-release.jar
*   datanucleus-core-3.0.0-release.jar
*   datanucleus-appengine-2.0.0.jar
*   datanucleus-api-jpa-3.0.0-release.jar

编辑：

通过使用 v3.0 DN 依赖项修复了初始问题。

但是，现在当我尝试从 DN servlet 访问 REST 资源时，它会引发此错误：

```
Error : An error occurred trying to instantiate an instance of the API adapter "org.datanucleus.api.jdo.JDOAdapter" (perhaps you dont have the requisite datanucleus-api-XXX jar in the CLASSPATH?) : {1}
org.datanucleus.exceptions.NucleusUserException: Error : An error occurred trying to instantiate an instance of the API adapter "org.datanucleus.api.jdo.JDOAdapter" (perhaps you dont have the requisite datanucleus-api-XXX jar in the CLASSPATH?) : {1} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:27:31.470

因此，您使用了某些版本的 datanucleus-api-rest（大概是 3.x），而您没有必要版本的 datanucleus-core（也是 3.x）。这通常是 ClassNotFoundException 的意思

# jquery - jQuery项目在被触发一次后不触发

> ID：11066316
> 
> 赞同：0
> 
> 时间：2012-06-16T19:15:36.433
> 
> 标签：jquery

我有一个简单的常见问题解答页面，其中每个项目都有以下 HTML 语法

```
 <article>
       <h3><a href="#"><i class="icon-down"></i> Item Title</a></h3>
       <p class="entry">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
   </article> 
```

我的jQuery是：

```
 $('#faq h3').click(function(e){
       e.preventDefault();
       if ( !$(this).hasClass('hidden') ) {
           $(this).addClass('shown');
           $(this).next('.entry').slideDown();
       } else {
           $(this).removeClass('shown');
           $(this).next('.entry').show();
       }
   }); 
```

当我单击我的项目标题时，下面的文本会立即消失。当我单击标题时，该项目不会按预期显示。我的控制台没有显示错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:41:46.890

您每次都得到相同的操作，因为它从来没有“隐藏”类。最简单的方法是：

```
$('#faq h3').on('click',function(e){
   e.preventDefault();
   $(this).next('.entry').slideToggle();
}); 
```

希望对你有帮助

# session - 检测用户是否在未注销或未填写表单的情况下离开网站

> ID：11066324
> 
> 赞同：0
> 
> 时间：2012-06-16T19:17:15.513
> 
> 标签：session, web

我正在尝试制作问卷，现在我想检查用户是否没有完成所有问题并离开网页。

谁能帮我检测一下？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:18:58.750

您可以使用该[`onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)事件：

```
window.onbeforeunload = function(){
   alert('user leaving');
}; 
```

在此之前，您可以设置一个***标志***（布尔变量），并在此基础上使用上面的代码警告他。例如，最初将此标志设置为`false`，一旦用户填写了所有表单，您就可以将其设置为`true`。在上述情况下，您可以检查变量是否为`true`or`false`并在他未填写表格时警告他。

# python - 具有具体继承的基础实体

> ID：11066327
> 
> 赞同：1
> 
> 时间：2012-06-16T19:17:49.490
> 
> 标签：python, sqlalchemy, python-elixir

我想要一个带有`deleted`标记已删除记录的字段的基本实体。我有 2 个子类，每个子类都有自己的表和所有自己的列：

```
from elixir import *
from sqlalchemy import create_engine

class Catalog(Entity):
    using_options(inheritance='concrete')
    deleted = Boolean

class Contact(Catalog):
    using_options(inheritance='concrete')
    name = Field(String(60))

class Location(Catalog):
    using_options(inheritance='concrete')
    name = Field(String(100))

setup_all()

metadata.bind = create_engine('sqlite:///', echo=True)
metadata.create_all() 
```

结果：

```
CREATE TABLE __main___catalog (
        id INTEGER NOT NULL, 
        PRIMARY KEY (id)
)

CREATE TABLE __main___contact (
        id INTEGER NOT NULL, 
        name VARCHAR(60), 
        PRIMARY KEY (id)
)

CREATE TABLE __main___location (
        id INTEGER NOT NULL, 
        name VARCHAR(100), 
        PRIMARY KEY (id)
) 
```

问题：

1.  ~~如何避免为基础实体创建表？~~- 解决了：`using_options(abstract = True)`
2.  ~~为什么字段`deleted`不在创建的表中？~~- 这解决了 - 我忘了把它放在里面`Field`
3.  我想避免输入每个子类`using_options(inheritance='concrete')`，但仍然有“具体继承”。有没有办法让它默认所有子类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:09:24.407

这有效：

```
class Catalog(Entity):

    deleted = Field(Boolean)
    using_options(abstract = True, inheritance = 'concrete')        

class Contact(Catalog):

    name = Field(String(60))

class Location(Catalog):

    name = Field(String(100)) 
```

并创建以下表格：

```
CREATE TABLE __main___contact (
        id INTEGER NOT NULL, 
        deleted BOOLEAN, 
        name VARCHAR(60), 
        PRIMARY KEY (id), 
        CHECK (deleted IN (0, 1))
)

CREATE TABLE __main___location (
        id INTEGER NOT NULL, 
        deleted BOOLEAN, 
        name VARCHAR(100), 
        PRIMARY KEY (id), 
        CHECK (deleted IN (0, 1))
) 
```

# javascript - Javascript 中的原型设计

> ID：11066328
> 
> 赞同：4
> 
> 时间：2012-06-16T19:17:56.983
> 
> 标签：javascript, oop, prototype, prototypal-inheritance

在原型语言中，对象基本上可以相互克隆。

所以，假设我们有一个构造函数：

```
Bla = function()
{
    this.a = 1;
} 
```

我可以像这样创建该对象的新实例`x = new Bla();`：现在，`x.a`返回 1。

如果我要写`Bla.prototype.b = 2`，那么`x.b`将返回 2。但是，为什么？如果 x “克隆” Bla，**为什么我不能只说`Bla.b = 2`，而不引用`Bla.prototype`，并且仍然获得相同的功能？**这与`this`关键字有关吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T19:24:26.717

ECMAScript (JavaScript) 支持“基于原型的继承”。这意味着 JS 中的“类”和“实例”之间没有区别。相对于其他语言的 OOP，在 JS 中“类”和“实例”基本上是一回事：

当您定义`Bla`时，它会立即实例化（准备好使用），但也可以用作“原型”来克隆`object Bla`具有相同属性和方法的另一个实例的初始（！）定义。

在 ECMAScript 中，一切都是对象，即使是对象的初始定义。在其他 OOP 语言中，定义部分有一个“类”。

该`prototype`对象适用于您想要在初始定义***之后***扩展“Bla”的原型（阅读：类“Bla”）并将新属性/函数添加到所有**当前和未来实例**的情况`Bla`。

如果您现在感到困惑，我认为此代码示例可能有助于发现差异：

```
// when defining "Bla", the initial definition is copied into the "prototype"
var Bla = function()
{
    this.a = 1;
}
// we can either modify the "prototype" of "Bla"
Bla.prototype.b = 2;
// or we can modify the instance of "Bla"
Bla.c = 3;

// now lets experiment with this..

var x = new Bla();  // read: "clone the prototype of 'Bla' into variable 'x'"  
console.log(x.b);     // logs "2"  -- "b" was added to the prototype, available to all instances

console.log(x.c);     // undefined   -- "c" only exists in the instance "Bla"
console.log(Bla.c);   // logs "3"  -- "Bla" is an object, just like our new instance 'x'

// also note this:
Bla.a = 1337;
var y = new Bla();
console.log(y.a);     // logs "1"  -- because the "prototype" was cloned, 
                // opposed to the current state of object "Bla"
console.log(Bla.a);   // logs "1337" 
```

**正如您在最后一个示例中看到的，“原型”的概念对于避免克隆对象的当前“状态”是必要的。**

如果不以这种方式实现，您可能会得到奇怪的效果，因为如果在克隆之前使用/修改了原始对象“Bla”，那么当前状态也会被复制。这就是语言设计者选择`prototype`构造的原因。

永远记住：“Bla”不是静态定义，就像“类”在其他 OOP 语言中一样。

* * *

[ECMAScript](http://www.ecma-international.org/publications/standards/Ecma-262.html)`prototype`规范说：

> 原型是用于在 ECMAScript 中实现结构、状态和行为继承的对象。当构造函数创建一个对象时，该对象隐式引用构造函数的关联原型，以解析属性引用。构造函数的关联原型可以由程序表达式constructor.prototype引用，并且添加到对象原型的属性通过继承由共享原型的所有对象共享。

一些 JS 框架，例如同名的“[原型](http://www.prototypejs.org)”，大量使用此功能来扩展 Javascript 内置对象的功能。

例如，它`array`使用方法扩展原生对象`forEach`，将这个缺失的特性添加到 JS：

```
Array.prototype.forEach = function each(iterator, context) {
  for (var i = 0, length = this.length >>> 0; i < length; i++) {
    if (i in this) iterator.call(context, this[i], i, this);
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T19:22:01.347

它与类和实例之间的区别有关。x 是 Bla 类的一个实例。如果设置 xb = 2，则为该实例添加/设置属性 b。如果在 b 的原型上设置 b，则为该类（以及每个现有实例）创建一个属性。同时这也是在构造函数中设置它的区别，就像在此处使用 a 所做的那样：当在实例上更改 a 时，它......改变得很好。如果 b 改变了，原型 b 仍然存在，它的旧值，但是一个新的属性 b 为那个实例创建了新的值。（这对于重置为默认值很有用）

**编辑**意识到文本有时比代码示例清晰得多，所以添加了一个完整的示例，我希望能说明差异

```
​function bla(){
    this.a= 1;
}

var x = new bla(),
    y= new bla();

bla.prototype.b= 2;
x.c = 3;

//x already exists, but b is still set
//by setting the prototype all existing instances are changed
console.log(x.b); //2
console.log(y.b); //2

//because c has been explicitly set, it only exists on instance x
console.log(x.c); //3
console.log(y.c); //undefined

x.b = 6; //at this point
//as mentioned, setting a property on an instance, only affects
//that instance
console.log(x.b); //6
console.log(y.b); //2

//but, because b is also a prototype property, it can be 'reset'
//by deleting the instance property
delete x.b; //removes the instance b
delete y.b; //on y this does nothing, because only the prototype property exists
console.log(x.b); //2 (reset to prototype)
console.log(y.b); //2

//the final difference, because a is a class bla property, and
//not of its prototype, deleting property 'a', will actually cause a remove
delete x.a;
console.log(x.a); //undefined 
```

# build - 使用 gradle 访问存储库中的最新文件

> ID：11066333
> 
> 赞同：0
> 
> 时间：2012-06-16T19:19:06.543
> 
> 标签：build, gradle, artifactory

我创建了一个任务，可以提取本地 .tar 文件（我之前从 Artifactory 手动下载）作为测试。当文件在我的 gradle 脚本中的 Artifactory 上时，如何引用它们？我应该只使用服务器路径吗？我对 gradle 所做的只是基本的东西，还没有使用存储库。

我还想根据我上次运行脚本后文件是否发生更改来执行某个操作，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:05:13.133

一种方法是`configuration`为您的 TAR 文件创建一个新文件。在我的例子中，我给它起了名字`myTar`。在 repositories 闭包中，您定义 Artifactory 存储库的 URL，并将 TAR 文件作为`dependencies`闭包中的依赖项引用。运行 Gradle 时，它​​会为您下载文件并将其放入本地存储库中。正如我所读到的，您已经创建了一个提取 TAR 文件的任务。我创建了一个名为的任务`extractMyTar`，它通过配置名称引用您下载的 TAR 文件并将其解压缩到本地目录中。

```
configurations {
    myTar
}

repositories {
    mavenRepo urls: 'http://my.artifactory/repo'
}

dependencies {
    myTar 'your.org:artifact-name:1.0@tar'
}

task extractMyTar << {
    File myTarFile = configurations.getByName('myTar').singleFile

    if(myTarFile.exists()) {
        ant.untar(src: myTarFile, dest: file('myDestDir'))
    }
} 
```

# html - 防止谷歌浏览器缓存html页面

> ID：11066336
> 
> 赞同：2
> 
> 时间：2012-06-16T19:20:03.470
> 
> 标签：html, caching, google-chrome, browser-cache, cache-control

我在 iframe 中有一个带有另一个 html 页面的页面。在这个 iframe 中，我放了这个 header 标签

```
<META http-equiv="Pragma" content="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">
<meta http-equiv="cache-control" content="no-cache" /> 
```

但是 chrome 仍然缓存它，当 iframe 内容发生变化时，点击 f5 按钮但 chrome 仍然加载缓存版本，而不是新版本。

请告诉我如何 pevent google chrome 缓存这个 iframe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:28:06.533

在来自服务器的 HTTP 响应中设置正确的[过期标头](http://httpd.apache.org/docs/2.4/mod/mod_expires.html)。它们会覆盖您在`meta`标签中放置的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-18T18:12:10.720

这适用于 Chrome：

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-store" />
<meta http-equiv="expires" content="-1" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
```

我在 Chromium 错误中发现了这一点。 [https://bugs.chromium.org/p/chromium/issues/detail?id=28035](https://bugs.chromium.org/p/chromium/issues/detail?id=28035)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T19:28:39.020

元标记可以忽略。取而代之的是，您的服务器应该为缓存控制设置适当的 HTTP 标头。您还应该设置*Expired*标头。

[https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Avoiding_caching](https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Avoiding_caching)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-29T19:34:22.800

我发现 Chrome 可能会忽略文件中的那些元设置，转而支持 http 响应标头中的缓存设置。我可以通过在我的 web.config 中添加它来解决 IIS 中的这个问题

```
<system.webServer>
  <staticContent>
    <clientCache cacheControlMode="NoControl" /> 
```

文件仍会被缓存，但现在我可以根据需要明确排除文件。

# css - 输入：焦点不起作用

> ID：11066340
> 
> 赞同：7
> 
> 时间：2012-06-16T19:20:43.437
> 
> 标签：css, input

我试图谷歌风格的输入框。但我坚持输入：焦点。代码如下 [http://jsfiddle.net/GmgUZ/](http://jsfiddle.net/GmgUZ/)

```
 input:hover{
    border-bottom-color: #B9B9B9;
    border-bottom-style: solid;
    border-bottom-width: 1px;
    border-left-color-ltr-source: physical;
    border-left-color-rtl-source: physical;
    border-left-color-value: #B9B9B9;
    border-left-style-ltr-source: physical;
    border-left-style-rtl-source: physical;
    border-left-style-value: solid;
    border-left-width-ltr-source: physical;
    border-left-width-rtl-source: physical;
    border-left-width-value: 1px;
    border-right-color-ltr-source: physical;
    border-right-color-rtl-source: physical;
    border-right-color-value: #B9B9B9;
    border-right-style-ltr-source: physical;
    border-right-style-rtl-source: physical;
    border-right-style-value: solid;
    border-right-width-ltr-source: physical;
    border-right-width-rtl-source: physical;
    border-right-width-value: 1px;
    border-top-color: #A0A0A0;
    border-top-style: solid;
    border-top-width: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) inset;
    }

  input[type="text"]:focus {
  border:1px solid #4D90FE;
  -webkit-box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) inset;
  -moz-box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) inset;
  box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) inset;

    } 
```

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T08:11:09.837

使用`input#gText:focus` 代替`input[type="text"]:focus`并添加`outline: none;`

> 输入#gText:focus {
> 边框:1px 实心#4D90FE;
> -webkit-box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) 插图；
> -moz-box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) 插图；
> box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) inset;
> 大纲：无；
> }

演示：http:
[//jsfiddle.net/GmgUZ/1/](http://jsfiddle.net/GmgUZ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:51:26.590

你有一个[CSS 特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)问题，这意味着什么？这意味着您有一些规则样式可以胜过您的 "input[type="text"] 选择器，如果您真的需要您的选择器来胜出，您需要使用关键字 "!重要”在每种样式的末尾，请尝试：

```
input[type="text"]:focus {
    border:1px solid #4D90FE !important;
    -webkit-box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) inset !important;
    -moz-box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) inset !important;
    box-shadow:0 1px 2px rgba(0, 0, 0, 0.3) inset !important;
    outline: none !important;
} 
```

这不是 css 规范中的 hack，但是如果你像那样离开这种风格，你有一天会后悔，因为你没有很好的特异性，以及你试图应用于这个元素的任何规则，例如这个规则将赢得具有元素 id 的规则，例如“#my_input_type_text”或类选择器“.my-input-text”

# wcf - UriTemplate FormatException "{}" 不是段或查询部分的有效格式

> ID：11066346
> 
> 赞同：0
> 
> 时间：2012-06-16T19:21:08.773
> 
> 标签：wcf, rest, uritemplate

我的 Web 服务 url 工作正常，现在返回以下错误：UriTemplate 不支持“{}”作为段或查询部分的有效格式。

我通常处理 Visual Web Developer 2010 Express 中的文件。我在他们工作和不工作之间所做的唯一一件事（我能想到的）是我在 Visual Studio 2010 的专业版中处理文件。然后我保存了它们，并打开现在正在 Express 中再次处理它们. （我检查了 .sln 文件，它们是相同的。）

（更新）帖子的其余部分更详细地描述了这个问题，但我认为这是导致问题的原因：VS 2010 Professional 编辑了一个配置文件（或某个文件），这在随后在 Visual 中打开时破坏了解决方案Web 开发人员 2010 速成版。但是我无法弄清楚哪些文件被编辑了。也许有人可以告诉我哪些文件是可疑的。它在 MyRootDirectory/Properties 中没有。我试过那些。

问题详情：

这个 url 以前可以工作，现在它抛出了上面的错误

```
http://localhost:52631/WebServices/gg.svc/GetStoresForDropdown 
```

这个 url 过去可以工作，现在也返回相同的错误。

```
http://localhost:52631/WebServices/gg.svc/StoreGroceryTable?UserId=1&StoreId=2 
```

该请求未到达我的代码页。- 那里的断点不会被击中。

这是堆栈跟踪的顶部。我认为，不知何故，我的网址在到达那里之前就被修改了。

[FormatException：UriTemplate 不支持“{}”作为段或查询部分的有效格式。] System.UriTemplateHelpers.IdentifyPartType(String part) +3049859

System.UriTemplateQueryValue.CreateFromUriTemplate（字符串值，UriTemplate 模板）+49

System.UriTemplate..ctor（字符串模板，布尔忽略TrailingSlash，IDictionary`2 additionalDefaults）+1004

这两种方法的 WebGet 属性是：

```
[WebGetAttribute(UriTemplate = "GetStoresForDropdown", ResponseFormat = WebMessageFormat.Json)]
[WebGetAttribute(UriTemplate = "StoreGroceryTable?UserId={UserId}&StoreId={StoreId}", ResponseFormat = WebMessageFormat.Json)] 
```

我使用以下浏览器得到相同的结果：IE8、Chrome、FireFox

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:54:19.437

我会寻找任何一种网络方法，不一定是你遇到问题的那种，它有这样的东西：

```
[WebInvoke(UriTemplate = "(some url)?Param1={}&..."] 
```

很容易声明一个 UriTemplate 而忘记在 {} 中添加参数名称。

# iphone - 如何在 UIWebView 中使用自定义字体

> ID：11066349
> 
> 赞同：2
> 
> 时间：2012-06-16T19:21:13.580
> 
> 标签：iphone, objective-c, uiwebview, custom-font

我正在开发一个使用 UIWebView 加载 xhtml 文件的 iPhone 应用程序，该 html 文件可能包含使用自定义字体的 css 文件，但看起来 web 视图不支持自定义字体，因为它不呈现自定义字体在 css 文件中

示例：xhtml 文件：

```
<head>   
    <link href="../Styles/p1.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <p class="line1">تجريب</p>
</body>
</html> 
```

css 文件：

```
@font-face {
font-family: "AHRAM";
font-style: normal;
font-weight: bold;
src:url("../Fonts/andlso.ttf");
} 

p.line1 {
font-family: "AHRAM";
} 
```

有什么建议吗？提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:00:38.043

您是否将字体添加到 info.plist（UIAppFonts 键）？

这是此过程的教程，展示了如何在 UIWebView 中使用字体。

[http://tetontech.wordpress.com/2010/09/03/using-custom-fonts-in-your-ios-application/](http://tetontech.wordpress.com/2010/09/03/using-custom-fonts-in-your-ios-application/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-27T22:51:41.337

在上述答案中将字体设置为 info.plist 后。然后复制 - 将以下代码粘贴到本地 html 文件中：

```
<style>
    .heading1{font-family: "GurbaniAkharThick"}
    @font-face
       {
           font-family: 'GurbaniAkharThick';
           font-weight: 200;
           src: url(GurbaniAkharThick.ttf);
       }
    </style>
<div style = "font-family: 'GurbaniAkharThick'">AMimRq vyly dw jwp</div><br/> 
```

# css - 使用百分比保持/缩放 DIV 比率

> ID：11066350
> 
> 赞同：0
> 
> 时间：2012-06-16T19:21:15.637
> 
> 标签：css, html, image-resizing, percentage

目前，我有一个布局，可以将多个缩略图拉入一个`grid`- 每个都由一种样式定义，该样式使它们保持固定比例（大约 16:9），由像素尺寸（`389px x 230px`）定义，但它们看起来有点小在高分辨率屏幕上。

图像实际上是作为覆盖`100%`宽度和高度的背景拉入 DIV 的`DIV`，然后 DIV 显然控制着纵横比和大小。

我要做的是让这些 DIV 根据设备的页面大小动态调整大小，但要保持 DIV 的比例。

这可能吗？

我的想法是根据页面的百分比设置宽度，但我不确定如何设置高度并保持正确的纵横比（由于不同的分辨率等）

最好的方法是什么？

* * *

**编辑 -**感谢您迄今为止的所有想法，我想也许我应该向您展示我目前是如何提取数据的。

> 在我的 HTML 中，我有以下代码生成了网格

```
<a class="griditem" href="../video.php?video=13" style="background-image:url(../video/Relentless/Relentless.jpg); background-size:100% 100%;">
<div class="titles">
   <h5>Relentless Short Stories</h5>
   <h6>Frank Turner: The Road</h6>
</div> 
```

* * *

> 这是使用以下 CSS 设计的

```
.griditem {
    position: relative;
    float: left;
    margin-right: 17px;
    margin-bottom: 17px;
    background-color: #777;
    -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    width: 389px;
    height: 230px;
    text-align: left;
}

.titles {
    padding: 5px;
    position: absolute;
    bottom: 10px;
    left: -1px;
    right: -1px;
    background: transparent url(../images/layout/white80.png) top left;
    -moz-border-radius: 1px 1px 0 0;
    border-radius: 1px 1px 0 0;
    text-align: left;
} 
```

* * *

我以这种方式实现它的原因是让 Div 可以漂浮在图像的底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:48:38.650

只是一个可能对您有用的快速想法。它基于这样一个事实，即垂直填充/边距在设置为百分比时使用父框的宽度，因此可以相对于其父框调整 div 的大小

[http://jsfiddle.net/xExuQ/2/](http://jsfiddle.net/xExuQ/2/)

```
body,html { height:100%; }

.fixed-ratio-resize {
    width:          50%; /* child width  = parent width * percent */
    padding-bottom: 50%; /* child height = parent width * percent */
    height: 0;           /* well, it is not perfect :) */
} 
```

​如果你想把一些（非背景的）内容放到这个调整好大小的盒子里，那么在里面放一个绝对定位的 div。

参考：

[http://www.w3.org/TR/CSS2/box.html#margin-properties](http://www.w3.org/TR/CSS2/box.html#margin-properties)和 [http://www.w3.org/TR/CSS2/box.html#padding-properties](http://www.w3.org/TR/CSS2/box.html#padding-properties)说：

边距：“百分比是根据生成框的包含块的宽度计算的。请注意，‘margin-top’和‘margin-bottom’也是如此。如果包含块的宽度取决于此元素，则生成的布局在 CSS 2.1 中未定义。”

填充：“百分比是相对于生成框的包含块的宽度计算的，即使对于 'padding-top' 和 'padding-bottom'。如果包含块的宽度取决于此元素，则生成的布局在CSS 2.1。”

## 编辑

[http://jsfiddle.net/mszBF/6/](http://jsfiddle.net/mszBF/6/)

HTML：

```
<a class="griditem" href="#" style="background-image: url(http://pic.jpg);">
    <span class="titles">
        <span class="name">Unicomp Studios</span>
        <span class="title">Springs Buckling (2012)</span>
    </span>
</a> 
```

CSS：

```
.griditem {
    float: left;
    margin-right:  17px;
    margin-bottom: 17px;
    min-width:  100px; /* extremely narrow blocks ==> crap looking */
    width: 30%;
    background: blue no-repeat;
    background-size: contain; /* from IE9 only: https://developer.mozilla.org/en/CSS/background-size */
    border: 1px solid transparent; /* prevent .titles:margin-top's margin collapse */
}

.titles {
    /* <a> elements must only have inline elements like img, span.
       divs, headers, etc are forbidden, because some browsers will display a big mess (safari) */
    display: block; /* so display those inline elements as blocks */
    padding: 5px;
    margin: 0 auto;
    margin-top: 105%;
    background: yellow;
}

.titles > span {
    display: block;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:56:32.757

我知道这可能不是最好的解决方案，但是

```
<html>
<style type="text/css">
#cool{
width:40%;
background:blue;
padding-bottom:10%;
}
</style>
<div id="cool" >
</div>
</html> 
```

这里我使用了 padding-bottom 来保持它的高度相对于它的宽度。U 可以将 padding-bottom 设置为百分比。希望这有帮助。

# c++ - 以 pthreads 弹出列表的大小填充列表

> ID：11066352
> 
> 赞同：1
> 
> 时间：2012-06-16T19:21:26.933
> 
> 标签：c++, c, pthreads, linked-list, singly-linked-list

我有一个单链表，每个元素中包含 1 个值。

```
struct listElement
{
    char guid[20];
    struct listElement *next;
    struct listElement *last;
    int numElements;
}; 
```

该代码在一个池中启动了 10 个 pthread，所有这些 pthread 都是`pthread_cond_wait()`为了将​​一个元素添加到列表中。

我的 main() 正在从文件中读取字符串，一次一行并通过调用填充链表`listPush(val)`

`listPush(val)`获取锁，创建新元素，添加到列表末尾（如果为空则创建头部）解锁然后调用`pthread_cond_signal()`让 10 个线程之一知道现在有一个元素需要完成。

在 numElements > numThreads 我调用的情况下，`pthread_cond_broadcast()`因为每个线程应该有足够的工作来弹出和执行。

每个线程都`listPop(rVal)`关闭一个值（锁定、删除、修复指针、解锁）并对其进行处理，然后返回`pthread_cond_wait()`状态。

我的文件有大约 2 亿行。(1.2GB) 我不希望我的链表变得这么大，所以我试图“限制”链表的大小。

在里面`listPush()`，在我锁定互斥锁之前，我有

```
if(head && head->numElements >= maxNumElements)
{
    while(head && head->numElements >= maxNumElements)
    {
        sleep(1);
    }
} 
```

这个想法是，如果我“填满”我的列表，我会等待线程处理其中的一部分，然后再添加更多。我已经到了应用程序开始“跳动”的地步；基本上我可以看到它等待 1 秒。我希望这永远不会发生或很少发生。

除了使用之外，还有更好的方法来限制我的列表的大小`sleep()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:28:55.547

是的，您可以在信号量上等待（类似于互斥体，但以另一种方式），而不是使用睡眠，并在将新元素添加到列表时被唤醒。您可能能够找到一个*事件*库或使用 pthreads 自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:29:04.573

这听起来像是一个经典的[生产者-消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)。`listPush()`如果列表太大，解决方案是等待条件变量。然后，一旦使用了列表元素，其中一个消费者线程就可以向这个条件变量发出信号。

一种完全不同的方法是只使用 a`pipe()`来处理通信和同步。这将消除对链表和互斥体的需要。

# javascript - Slick.Grid 中有没有办法将所有数据呈现到数组中以便可以导出？

> ID：11066362
> 
> 赞同：1
> 
> 时间：2012-06-16T19:23:13.327
> 
> 标签：javascript, jquery, slickgrid

Slick.Grid 中有没有办法将所有数据呈现到数组中以便可以导出？

我能够从我的 Slick.Grid 实例“mygrid.getData().getItems()”中获取数据，但它只是原始数据而不是格式化数据。

有没有可以用来遍历集合并返回格式化数据的函数？

到目前为止，我必须两次实现我的格式化程序。

例子：

```
UnixToDate: (row, cell, value, columnDef, dataContext) ->
  moment.unix(value).format("MMM Do YY")

items: [
   {id: 1, activity_at: 915148798 },
   {id: 2, activity_at: 999148800 }
]

columns: [
    {field: 'id', id: 'id', name: 'Id'},
    {field: 'activity_at', id: 'activity_at', name: 'Activity', formatter: UnixToDate}
]

@data = new Slick.Data.DataView()
@grid = new Slick.Grid( $('#table'), @data, columns )
@data.setItems(items) 
```

我想知道是否有办法返回带有格式化值的数据。我认为@grid.getData().getItems() 会这样做，但它会返回原始数据数组。

返回的数据应如下所示：

```
data: [
   {id: 1, activity_at: "Dec 31st 98" },
   {id: 2, activity_at: "Aug 29th 01" }
] 
```

我希望最终用户能够过滤和排列网格，然后以 csv 格式导出结果，除了格式化部分之外，我已经完成了所有这些工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:50:26.713

好的，我编写了一个导出方法（用咖啡脚本编写并使用 underscore.js）。我还必须在 slick.grid.js 中公开 getFormatter 方法

```
getFormattedData: (grid) ->
  columns = grid.getColumns()
  rows = grid.getData().getItems()
  _(rows).map (row) ->
    h = {}
    i = 0
    _(columns).each (column) ->
      f = grid.getFormatter(row, column)
      h[column.id] = f(row, i, row[column.id], column, row)
      i += 1
    h 
```

在 // Public API 部分向 slick.grid.js 添加行

```
"getFormatter": getFormatter, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:21:09.897

当你设置`autoHeight: true`完整的网格被渲染并且可以导出 html。

[http://mleibman.github.com/SlickGrid/examples/example11-autoheight.html](http://mleibman.github.com/SlickGrid/examples/example11-autoheight.html)

回答更新的问题：

格式化程序仅在呈现/可见行时调用，因此具有格式化数据的数组永远不存在。来源：[https ://github.com/mleibman/SlickGrid/blob/master/slick.grid.js#L1291](https://github.com/mleibman/SlickGrid/blob/master/slick.grid.js#L1291)

# php - PHP 电子邮件和超链接

> ID：11066364
> 
> 赞同：0
> 
> 时间：2012-06-16T19:23:24.450
> 
> 标签：php, url, hyperlink, html-email

我试图在我的电子邮件中包含一个超链接，但它只是显示为纯文本。我可能只是错过了在 $BODY 部分中使用我的引号，而我只是没有看到它。

```
echo "Activation Code: " . $emailString . " <br>";
mysql_query("INSERT INTO accounts 
(name, pass, email, activated, code) VALUES('$user', '$pass', '$email', 'false', '$emailString') ") 
or die(mysql_error()); 

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$to = "$email";
$subject = "Hi!";
$body = '<html><head></head><body> Thank you for registering! Please go to this address to activate your account: <a href="'. $_SERVER['SERVER_NAME'] .'/PHP%20project/activate.php?activationCode='.$emailString.'">' .$emailString . '</a> </body></html>';
$from = "From:---@gmail.com";
if (mail($to, $subject, $body, $from, $headers)) {
    echo("<p>Message successfully sent!</p>");
} else {
    echo("<p>Message delivery failed...</p>");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:29:34.217

你用错了：

```
 mail($to, $subject, $body, $from, $headers) 
```

该[`mail()`](http://php.net/mail)函数没有`$from`参数。你也应该把它扔进去`$headers`。

# ruby-on-rails - 由于 ajax 调用表单部分而未检测到所选插件？

> ID：11066368
> 
> 赞同：1
> 
> 时间：2012-06-16T19:24:15.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我不确定为什么动态调用我的表单部分时没有调用[Chosen Plugin 。](http://harvesthq.github.com/chosen/)

相对宝石 -

```
 rails, 3.1.0
 cancan, 1.6.7
 dynamic_form, 1.1.4
 simple_form, 2.0.1
 jquery-rails 
```

设想 -

我有一个名为的页面`/index`，您可以添加一个`House`,`Dog`或`Cat`. 该页面一开始是空白的，但侧面有链接，您可以单击这些链接以动态调出其中一个表单。这些形式是它们自己的部分。

狗控制器

```
def new
 @dog = Dog.new

 respond_to do |format|
  format.js
 end
end 
```

狗/_form.html.erb

```
<%= simple_form_for(@dog, :remote => true, :html => { :class => 'form-horizontal span8' }) do |f| %>
  <%= render :partial => "shared/error_message", :locals => { :f => f } %>
     <%= f.association :house, :prompt => "Select a House", :input_html => { :id => "house-select", :class => "span4" } %>
  <%= f.button :submit, 'Done', :class => 'btn-primary span2' %>
<% end %> 
```

页面控制器

```
def index
  @cats = current_user.cats.all
  @dogs = current_user.dogs.all

  respond_to do |format|
    format.html
  end
end 
```

页面/index.html.erb

```
<li><%= link_to "Dog", new_dog_path, :remote => true %></li>
<li><%= link_to "Cat", new_cat_path, :remote => true %></li>

<div id="generate-form">
  <div class="ajax-loader"></div>
</div> 
```

狗/new.js.erb

```
$("#generate-form").html("<%= escape_javascript(render(:partial => 'dogs/form', locals: { dog: @dog })) %>"); 
```

所有这些代码都成功地在单击链接时显示所选表单。我的狗模型和猫模型一样。这些是选择插件问题的问题。现在为什么在任何一种形式出现时都没有检测到 Chosen 插件？

## 回答

狗/new.js.erb

```
$("#generate-form").html("<%= escape_javascript(render(:partial => 'dogs/form', locals: { dog: @dog })) %>");
$('.house-select').chosen(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T19:33:37.410

我在您的代码示例中没有看到对所选插件的任何调用，但我遇到了同样的问题。

初始调用`$('.chzn-select').chosen()`将应用于当时页面上的所有 DOM 元素，但不适用于稍后添加的元素。

要将插件添加到`.house-select`通过 AJAX 插入的新元素中，请将其添加到 dogs/new.js.erb 的末尾：

`$('#generate-form .house-select').chosen();`

值得注意的是，您可以在选择框上多次安全地运行 jQuery .chosen() 函数。它添加了自己的 css 类来跟踪选择应用的类，并在连续运行时优雅地忽略它们。

# spring - 所有@RequestMapping 到标题页（SPRING MVC）

> ID：11066372
> 
> 赞同：0
> 
> 时间：2012-06-16T19:24:37.307
> 
> 标签：spring, spring-mvc

如何获取所有@ReqpuestMapping

我有一个标题页和一些其他页面

我的标题页有侧边栏菜单，我想在所有页面中显示我的菜单

谢谢普拉迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:33:32.937

如果您正在尝试执行以下操作，那么 Apache Tiles 非常适合您的要求。

> Apache Tiles™ 是一个模板框架，旨在简化 Web 应用程序用户界面的开发。
> 
> Tiles 允许作者定义页面片段，这些片段可以在运行时组装成一个完整的页面。这些片段或拼贴可以用作简单的包含以减少常见页面元素的重复或嵌入其他拼贴中以开发一系列可重用的模板。这些模板简化了整个应用程序中一致外观的开发。

它还与弹簧很好地集成在一起。您可以开始查看[Spring 参考](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/view.html#view-tiles)以与 Apache 磁贴集成。[这里](http://www.vaannila.com/spring/spring-tiles-integration-1.html)有一个简单的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:38:30.957

如果您正在使用一些布局框架，例如 Tiles 等，那么您可以在 xml 配置文件中配置您的布局。

或者，如果您没有使用任何布局框架，并且您使用的是纯 jsp 页面，则创建单独的页面，例如 header.jsp、footer.jsp、menu.jsp，并在需要时将这些页面包含在所有其他页面中。

前任。

```
<body>        
<table>
    <tr>
     <td>
         <jsp:include page="menu.jsp"/> 
     </td>
    </tr>
    <tr>
     <td>
        Actual page code will go here
     </td>
    </tr>
    <tr>
     <td>
         <jsp:include page="footer.jsp"/> 
     </td>
    </tr>
</table>
</body> 
```

# objective-c - Objective-C 中块的使用

> ID：11066375
> 
> 赞同：3
> 
> 时间：2012-06-16T19:25:01.863
> 
> 标签：objective-c, objective-c-blocks

```
const char *sentence = "He was not in the cab at the time.";

printf("\"%s\" has %d spaces\n", sentence, (int) ^ {
    int i = 0;
     int countSpaces = 0;

    while (sentence[i] != '\0') {
        if (sentence[i] == 0x20) {
            countSpaces++;
        }
        i++;
    }    
    return countSpaces;
}); 
```

这段代码只计算字符串中的空格，但由于某种原因，它说的是 1606416608 个空格而不是 8 个。我不确定出了什么问题，所以感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T19:27:12.040

您将实际块传递给`printf`，而不是块的结果。相反，尝试

```
const char *sentence = "He was not in the cab at the time.";

printf("\"%s\" has %d spaces\n", sentence, (int) ^ {
    int i = 0;
    int countSpaces = 0;

    while (sentence[i] != '\0') {
        if (sentence[i] == 0x20) {
            countSpaces++;
        }
        i++;
    }    
    return countSpaces;
}()); // <-- note the extra parentheses here, indicating that you're calling the block 
```

# iphone - iPhone 摄像头和 OpenCV

> ID：11066379
> 
> 赞同：8
> 
> 时间：2012-06-16T19:25:55.613
> 
> 标签：iphone, python, macos, opencv, camera

我正在尝试将我的 iPhone 相机连接到基于 OpenCV 库构建的 python 脚本。OpenCV 与 OSX 上的内置摄像头配合得很好，但我不知道如何将它与某种远程或移动摄像头连接。尝试在 macOS 上使用模拟网络摄像头的软件，但 openCV 无法识别它。我找不到任何出路。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:11:01.637

不幸的是，iOS (iPhone/iPad) 平台不支持当前 OpenCV (2.4.1) 中的视频捕获。但据我所知，不可能以这种方式将移动设备的罕见相机连接到 python 应用程序。

但总的来说，可以在此处找到如何在 iPhone 相机上设置视频捕获的一个很好的教程：[OpenCV 教程 - 第 3 部分](https://computer-vision-talks.com/2012-06-27-opencv-tutorial-part-3/) 您还可以在[OpenCV 教程 - 第 1 部分](https://computer-vision-talks.com/2012-06-23-opencv-tutorial-part-1/)和[OpenCV 教程 - 第 2](https://computer-vision-talks.com/post/2012-06-24-opencv-tutorial-part-2/)部分中阅读有关在 iPhone 和 iPad 上使用 OpenCV 进行图像处理的信息。

[带有教程代码的](https://github.com/BloodAxe/OpenCV-Tutorial)Git 存储库。

# perl - 使用 'sfdp' 用 perl-GraphViz2 绘制大图

> ID：11066380
> 
> 赞同：0
> 
> 时间：2012-06-16T19:25:56.097
> 
> 标签：perl, graphviz

我的 Perl 脚本使用模块生成了一个非常大的图表[`GraphViz2`](http://search.cpan.org/dist/GraphViz2/)

```
use GraphViz2;

my($graph) = GraphViz2 -> new
(
    edge   => {color => 'grey'},
    global => {directed => 0},
    node   => {shape => 'oval'},
);
add_very_many_nodes_and_edges();
$graph -> run(format => 'png', output_file => 'ptg.png'); 
```

`ps`告诉我，这个脚本现在运行`dot`来绘制 PNG，但这需要几个小时。`sfdp`用于处理大图。我怎么知道`GraphViz2`使用`sfdp`？我在文档中找不到任何内容。旧`GraphViz`模块具有在、和之间`layout`切换的属性。`dot``neato``fdp``sfdp`

或者有什么方法可以将 .dot 文件作为输出，作为某种解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:57:34.733

尝试使用`driver`来解决您的任务。该`driver`选项指定运行哪个外部程序来处理输出流。

# javascript - 为什么我不能做 .ajax ( return data; )？jQuery

> ID：11066382
> 
> 赞同：0
> 
> 时间：2012-06-16T19:26:03.203
> 
> 标签：javascript, jquery, ajax

我试图让我的函数返回它进入另一个函数的数据，但它似乎不起作用？我怎样才能让它返回数据？

```
function playerid(playername) {
    $.ajax({
        type: "POST",
        url: "fn.php?playerid",
        data: "playername="+playername,
        success: function(data) {
            //$("#test").text(data);
            return data;
        }
    });
} 
```

我想在这样的另一个函数中使用它

```
showBids(playerid(ui.item.value));

function showBids(playerid) {
    $.ajax({
        type: "POST",
        url: "poll.php?",
        async: true,
        dataType: 'json',
        timeout: 50000,
        data: "playerid="+playerid,
        success: function(data) {

            //.each(data, function(k ,v) {

            //})
            //$("#current_high").append(data);

            setTimeout("getData()", 1000);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:32:23.123

首先，你的`playerid()`不返回任何东西，那么你想用什么？它只有`$.ajax()`调用，没有返回语句（其中一个回调`$.ajax()`有返回语句，但见下文）。

其次，JavaScript 会异步执行一些操作，否则每个界面元素都需要等待对用户操作做出反应，直到 AJAX 调用从服务器返回。

通过将回调传递给某些函数，使用基于事件的方法。然后，在他们完成后，只需调用回调将结果传递给他们：

```
function getplayerid(playername, callback) {
    $.ajax({
        type: "POST",
        url: "fn.php?playerid",
        data: "playername="+playername,
        success: function(data) {
            //$("#test").text(data);
            callback(data);
        }
    });
} 
```

然后像这样使用它：

```
getplayerid(ui.item.value, showBids); 
```

（注意函数名称更改，因为它实际上并没有*返回*玩家 ID，它*获取它*并将其传递给回调）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:32:05.580

您可以尝试使用同步 Ajax：

```
function playerid(playername) {
    return $.ajax({
        type: "POST",
        url: "fn.php?playerid",
        data: "playername="+playername,
        async : false   //making Ajax syncronous
    }).responseText;
} 
```

否则你需要使用`showBids`函数作为回调：

```
function playerid(playername, callback) { 
     $.ajax({
        type: "POST",
        url: "fn.php?playerid",
        data: "playername="+playername,
        success: function(data) {
           callback(data);
        }
     });
} 
//Usage
playerid(ui.item.value,showBids); 
```

# git - 如果您无法提交到他们的分支，如何将提交到另一个人的 github 拉取请求添加到您的仓库？

> ID：11066388
> 
> 赞同：32
> 
> 时间：2012-06-16T19:27:05.423
> 
> 标签：git, github, pull-request

这是场景：

我有一个公共回购**A**。*Bob*分叉**A**，添加一些提交`Bob/master`并提交拉取请求以将这些更改合并到`A/master`. 在将其合并回`A/master`.

如果我不能推动，我该怎么做`Bob/master`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-16T19:42:22.883

您可以在此处使用许多工作流程。一些例子是：

1.  评论拉取请求，并让 Bob 进行一些更改。有关更多信息，请参阅[拉取请求讨论](https://help.github.com/articles/merging-a-pull-request/)。

2.  将拉取请求合并到*不同*的分支，然后在合并到 master 之前进行更改。您需要从命令行执行此操作；有关分步说明，请参阅[合并拉取请求。](https://help.github.com/articles/merging-a-pull-request/)

3.  在应用之前编辑补丁`git am`。请参阅[修补和应用](https://help.github.com/articles/merging-a-pull-request/)。这可能是最灵活的选择，但也是最手动的。

    ```
    git checkout master
    curl http://github.com/<username>/<project_name>/pull/<patch_number>.patch
    sensible-editor <patchfile>
    git am <patchfile>
    git push origin master 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:31:50.250

您可以从他的本地仓库中的分支中提取（不在 github gui 中）

```
# make same work-in-progress branch and check it out
$ git checkout -b WIP

# pull his changes into WIP
$ git pull https://github.com/... master 
```

然后从那里无情地改变。

另一种选择是使用 github 的评论系统说服他更改他的补丁集（这样他也可以在合并后保留信用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-24T16:44:49.163

一种解决方案是让 PR`Bob/master`包含您的修订。Bob 可以将你的 PR 合并到`Bob/master`; 当您将 Bob 的 PR 合并到`A/master`中时，它将包含 Bob 的提交和您的提交。

您可以创建从任何 fork/branch 到任何其他 fork/branch 的 PR。因此，如果 Bob 从 提交 PR `Bob/feature`，只需将 PR 创建到`Bob/feature`.

# c++ - c++11线程与.Net线程？

> ID：11066391
> 
> 赞同：2
> 
> 时间：2012-06-16T19:27:14.153
> 
> 标签：c++, .net, multithreading

我应该在我的**C++11/CLI 程序**中使用哪一个？

c++11线程和.net线程的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:58:26.957

> 我的程序仅适用于 Windows，并且是用 .net 构建的。

考虑到托管语言通常更喜欢开发人员的生产力而不是性能（发生冲突时），我想说托管线程可能对开发人员更加友好。此外，垃圾收集是一个众所周知的生产力功能。

您是否极度需要性能和/或控制？如果没有，我推荐托管代码和托管线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:32:38.437

C++11 将是一种基于标准的、平台独立的线程处理方式。如果您需要跨平台工作，这一点很重要。

使用 .Net 进行线程化通常会将您的应用程序与操作系统 (Windows) 联系起来。这有一些优点，例如垃圾收集（这在标准 C++ 中是错误的）。但是，请注意，您可能需要将 .Net 框架与您的应用程序一起提供。跨框架版本的问题并不少见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T21:07:05.247

如果您询问托管与本机，请尽可能使用托管代码 C#，这是一种更好的开发人员体验。此外，.NET 4 支持出色的 API 来帮助处理多线程，对于初学者，请参阅任务并行库 (TPL) 和并发集合支持。

通用建议是尽可能多地使用托管代码，然后仅在需要时使用互操作到本机，以解决不太适合托管解决方案的问题。

如果您询问使用 C# 与 C++/CLI，请使用 C#。两者都是 CLI（托管）语言，但 C++/CLI 更难使用，最适合用于某些托管/本机边界场景。此外，C++/CLI 不支持 Intellisense（至少对于 VS2010，也许现在在 2012 年支持？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T21:01:19.457

考虑任期：.NET 线程已经存在了很长时间，并且已知可以与 C++/CLI 一起使用。C++11 线程是新的，我完全可以看到它和 C++/CLI 之间出现的问题，因为 /CLI 的东西不是主流，而且可能很少有人同时使用 /CLI 和 C++11 线程。

# angularjs - 从另一个加载表达式

> ID：11066392
> 
> 赞同：0
> 
> 时间：2012-06-16T19:27:16.680
> 
> 标签：angularjs

是否有任何指令或方法可以从另一个表达式加载范围表达式？

假设我们有

```
$scope.find = 'a_expression';
$scope.a_expression = 'found'; 
```

我们怎么能做那样的事情？

```
{{ {{ find }} }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:32:24.627

`{{$eval(find)}}`

这样就可以了。

# javascript - HTML5 画布颜色

> ID：11066395
> 
> 赞同：4
> 
> 时间：2012-06-16T19:27:31.253
> 
> 标签：javascript, jquery, html, canvas, colors

我在 HTML5 画布中有两个块。

1.  蓝色块即固定在画布中
2.  可以用鼠标拖动的黄色块。

当有人将黄色块移到蓝色块上时，我想将重叠或交叉区域的颜色更改为绿色。（请参阅附图以获得清晰的想法）

![在此处输入图像描述](../Images/6685b97f9a993578b61563466b582535.png)

由于*blue + yellow = green*，有没有办法通过改变块的不透明度来实现这一点，或者我必须搜索两个块的重叠区域并在该区域显示绿色块，还是有其他方法？

我想知道实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:34:08.423

看看[画布 globalCompositeOperation](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)。**较轻**的复合类型似乎适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:35:06.067

您可以使用 3 个元素：

*   黄底：不透明度 1
*   黄色顶部：不透明度 0.x，与底部相同的尺寸
*   蓝色：黄色 div 之间完全不透明

[jsFiddle 上的示例](http://jsfiddle.net/cMhmY/)

这远未完成，但也许是朝着正确方向迈出的一步。

编辑：我注意到你在画布上要求它为时已晚，但那里的原则应该是一样的。

# python - 从 Unicode 格式的字符串中删除标点符号

> ID：11066400
> 
> 赞同：44
> 
> 时间：2012-06-16T19:28:05.580
> 
> 标签：python, unicode

我有一个从字符串列表中删除标点符号的函数：

```
def strip_punctuation(input):
    x = 0
    for word in input:
        input[x] = re.sub(r'[^A-Za-z0-9 ]', "", input[x])
        x += 1
    return input 
```

我最近修改了我的脚本以使用 Unicode 字符串，这样我就可以处理其他非西方字符。这个函数在遇到这些特殊字符时会中断，只返回空的 Unicode 字符串。如何可靠地从 Unicode 格式的字符串中删除标点符号？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-16T20:11:54.563

你可以使用`unicode.translate()`方法：

```
import unicodedata
import sys

tbl = dict.fromkeys(i for i in xrange(sys.maxunicode)
                      if unicodedata.category(unichr(i)).startswith('P'))
def remove_punctuation(text):
    return text.translate(tbl) 
```

您也可以使用[正则表达式模块](http://pypi.python.org/pypi/regex)`r'\p{P}'`支持的：

```
import regex as re

def remove_punctuation(text):
    return re.sub(ur"\p{P}+", "", text) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-02-07T19:14:58.020

如果你想在 Python 3 中使用 JF Sebastian 的解决方案：

```
import unicodedata
import sys

tbl = dict.fromkeys(i for i in range(sys.maxunicode)
                      if unicodedata.category(chr(i)).startswith('P'))
def remove_punctuation(text):
    return text.translate(tbl) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-16T19:34:19.343

`unicodedata`您可以使用模块的函数遍历字符串[`category`](http://docs.python.org/library/unicodedata.html#unicodedata.category)以确定字符是否为标点符号。

有关 的可能输出`category`，请参阅 unicode.org 的关于[General Category Values的文档](http://www.unicode.org/reports/tr44/tr44-4.html#General_Category_Values)

```
import unicodedata.category as cat
def strip_punctuation(word):
    return "".join(char for char in word if cat(char).startswith('P'))
filtered = [strip_punctuation(word) for word in input] 
```

* * *

此外，请确保您正确处理编码和类型。此演示文稿是一个很好的起点：[http ://bit.ly/unipain](http://bit.ly/unipain)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-16T19:55:19.700

基于[Daenyth 答案的较短版本](https://stackoverflow.com/a/11066443/181337)

```
import unicodedata

def strip_punctuation(text):
    """
    >>> strip_punctuation(u'something')
    u'something'

    >>> strip_punctuation(u'something.,:else really')
    u'somethingelse really'
    """
    punctutation_cats = set(['Pc', 'Pd', 'Ps', 'Pe', 'Pi', 'Pf', 'Po'])
    return ''.join(x for x in text
                   if unicodedata.category(x) not in punctutation_cats)

input_data = [u'somehting', u'something, else', u'nothing.']
without_punctuation = map(strip_punctuation, input_data) 
```

# objective-c - 试图从一个类中获取一个 NSPanel 以在不同的类中查看？

> ID：11066409
> 
> 赞同：0
> 
> 时间：2012-06-16T19:29:27.677
> 
> 标签：objective-c, xcode, methods, nspanel

我有：

```
MyWindowController.h
MyWindowController.m
HistoryController.h
HistoryController.m 
```

在 MyWindowController.h 中，有：

```
IBOutlet NSPanel* viewInvoice; 
```

后来：

```
- (IBAction)viewInvoice:(NSNumber *)invoiceNumber; 
```

我想在整个程序中使用这个面板。在我的 HistoryController.m 中，有：

```
- (IBAction)viewSelectedInvoice:(id)sender{
  id viewInvoiceObject = [[MyWindowController alloc] init];
  [viewInvoiceObject viewInvoice:[NSNumber numberWithInt:1]];
  [viewInvoiceObject release];
} 
```

现在我可以成功访问该方法（一些 NSLog 调用验证了这一点），但我根本无法真正让 NSPanel 出现。这是那里的一些代码：

```
- (IBAction)viewInvoice:(NSNumber *)invoiceNumber {
  [viewSelectedInvoicePanel makeKeyAndOrderFront:viewSelectedInvoicePanel];
} 
```

如果我将我的历史视图中的按钮链接到 FirstResponder 操作“viewInvoice”，我可以弹出面板，但是我似乎无法通过参数（即发票号）发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:17:04.997

编辑您的 HistoryController 以将您的自定义`NSPanel`设置为属性：

```
@property (nonatomic, retain) IBOutlet NSPanel *viewInvoice; 
```

`IBAction`然后，在您上创建一个`HistoryController`来调用您的自定义`NSPanel`函数：

```
-(IBAction)viewInvoice:(id)sender {
  [self.viewInvoice viewInvoice:self.some_property_with_invoice_number];
} 
```

并将您的按钮链接到`viewInvoice`方法（在`HistoryController`类内部。此外，您应该将属性对象类型从更改`NSPanel`为您为类命名的任何内容。

# python - mysql错误：错误1018（HY000）：无法读取'.'的目录 （错误号：13）

> ID：11066411
> 
> 赞同：46
> 
> 时间：2012-06-16T19:29:35.167
> 
> 标签：python, mysql, database, django, permissions

当我尝试在 mysql 中查看数据库时，出现此错误：

```
ERROR 1018 (HY000): Can't read dir of '.' (errno: 13) 
```

这会阻止我的应用程序显示...

我的 django 调试器说：

```
(2002, "Can't connect to local MySQL server through socket '/var/lib/mysql/my_database' (13)") 
```

这是我的设置文件：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'my_database',                      # Or path to database file if using sqlite3.
    'USER': 'root',                      # Not used with sqlite3.
    'PASSWORD': '****',                  # Not used with sqlite3.
    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '3306',                      # Set to empty string for default. Not used with sqlite3. 
```

什么会导致问题？

提前致谢

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-16T19:38:12.463

您需要为目录设置所有权和权限：

```
chown -R mysql:mysql /var/lib/mysql/ #your mysql user may have different name
chmod -R 755 /var/lib/mysql/ 
```

注意：`-R`使命令递归 - 如果在`/var/lib/mysql/`.

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-12-09T17:47:30.103

这应该适用于 Mac 用户：

```
sudo chown -R mysql:mysql /usr/local/mysql/
sudo chmod -R 755 /usr/local/mysql/ 
```

如果这不起作用，请尝试运行`which mysql`以查看您的 mysql 安装所在的位置，然后`/usr/local/mysql/`在上面的命令中替换为 'bin' 目录之前的任何内容。

例如，在我的系统上`which mysql`产生以下输出：

```
/usr/local/mysql/bin/mysql 
```

所以我的道路是`/usr/local/mysql/`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-15T11:58:39.347

在 CentOS/RedHat 上，你应该在不同的路径上做同样的事情：

```
chown -R mysql:mysql /data/mysql/
chmod -R 755 /data/mysql/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-17T16:19:54.300

```
chown -R mysql:mysql /var/lib/mysql/

chmod -R 755 /var/lib/mysql/ 
```

我可以确认这两个 chmod 语句对我有用（Webmin 没有看到数据库也没有显示表）但我不确定为什么在使用 MySQL 设置可能两打服务器（Centos）之后我必须这样做过去几年。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-18T17:08:13.983

osx high sierra 使用以下命令解决问题：

```
chown -R mysql:mysql /usr/local/mysql 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-06T14:16:44.703

如果您使用自制软件安装了 mariadb，您可以针对 OS X 运行以下命令

```
sudo chown -R mysql:mysql /var/lib/var/mysql/
sudo chmod -R 777 /usr/local/var/mysql/ 
```

# php - PHP将12位十六进制转换为6

> ID：11066412
> 
> 赞同：1
> 
> 时间：2012-06-16T19:29:55.070
> 
> 标签：php, css, colors

我正在解析某些软件提供的 XML 文件。部分解析是从某些属性中提取颜色。我遇到的问题是颜色是 12 位十六进制值。IE，

```
<Text AdornmentStyle="0" Background="#FFFFFFFFFFFF" Color="#DD6B08C206A2" Font="Courier Final Draft" RevisionID="0" Size="12" Style="">Test</Text> 
```

如您所见，颜色为 12 位长。我需要获得 6 位颜色，以便可以在 html 上正确显示。

有没有人遇到过这个？

希望你能给点建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T19:34:13.493

以前从未见过 12 位十六进制颜色字符串。每个通道必须使用 2 个字节，这意味着如果您转换它，您将丢失一些信息。

我相信颜色是格式`#RRRRGGGGBBBB`，所以取每 4 个 hexgits 并除以 (16^4/16^2)=256，如有必要，四舍五入。那应该这样做。

...如果这不能为您提供正确的颜色，请尝试 CMYK，就像 cypher 建议的那样：（`#CCCMMMYYYKKK`每通道 12 位）。

例如，转换`DD6B08C206A2`做：

```
0xDD6B / 0x100 = 0xDD
0x08C2 / 0x100 = 0x08
0x06A2 / 0x100 = 0x06 
```

把它们放回去，你就得到了`#DD0806`。

# android-4.0-ice-cream-sandwich - 在 Android 4.0 中以编程方式解锁钥匙锁

> ID：11066417
> 
> 赞同：1
> 
> 时间：2012-06-16T19:30:38.880
> 
> 标签：android-4.0-ice-cream-sandwich

如何在 Android 4.0 中以编程方式解锁钥匙锁？

```
 mKeyGuardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
    mLock = mKeyGuardManager.newKeyguardLock("activity_classname");
    mLock.disableKeyguard(); 
```

此代码似乎不适用于 Android 4.0。在第二行 newKeylock 方法被贬值。

# objective-c - 在objective-c中声明块时可以引用实例方法吗

> ID：11066418
> 
> 赞同：0
> 
> 时间：2012-06-16T19:30:48.493
> 
> 标签：objective-c, objective-c-blocks

我有一个实例方法，我想直接使用来自objective-c 中的块的回调参数调用。当我需要在回调中做的不仅仅是简单的 1 行时，我更喜欢这种方法。

这是基本设置...

我用某种类型的回调初始化一个类，这样我就可以在 http 请求之后解析 json 让我们说

```
- (void)initFooAndDoStuff {
    Foo *foo = [[Foo alloc] initWithCallback:^(NSData * response){
        // do stuff
    }];
}

//this is the instance method I'd like to invoke instead of an inline function
- (void)callBackWithHttpResponse:(NSData *)response {
    // do stuff ... assuming it's more complex than a 1 liner that is
} 
```

我可以设置一个内联的回调（但更复杂的东西在独立的实例方法中可能会更好）

```
Foo *foo = [[Foo alloc] initWithCallback:^(NSData * response){ 
    NSLog(@"foo"); 
}]; 
```

我可以使用下面的实例方法，但感觉有点啰嗦。我可以通过任何方式减少它（即语法）。

```
Foo *foo = [[Foo alloc] initWithCallback:^(NSData * response){ 
    [self callBackWithHttpResponse:response]; 
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:02:48.410

如果您要将实现放在一个方法中，您不妨让该方法返回整个块：

```
-(void (^)(NSData *))httpResponseHandler {
    return ^(NSData *responseData){
        // do something with responseData
    };
} 
```

那么你使用它的地方会更简洁一些：

```
Foo *foo = [[Foo alloc] initWithCallback:[self httpResponseHandler]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:09:43.280

```
Foo *foo = [[Foo alloc] initWithCallback:^(NSData * response){ 
    [self callBackWithHttpResponse:response]; 
}]; 
```

好的——它的可读性非常好。

现在，进入另一个房间，用砖头敲击自己的头部 3 次，以模拟在 6 个月到一年内没有看过这个项目。

现在，再次阅读代码。

仍然可读，不是吗？

当冗长准确地说明代码在做什么时，有点冗长并没有错。您可以按照 Ken Thomases 的建议采用目标/动作模式，但这需要在其他地方增加额外的复杂性。

而不是`callback`，我会将其更改为更具体。即如果回调真的是一个完成处理程序：

```
Foo *foo = [[Foo alloc] initWithHTTPResponseCompletionHandler:^(NSData * response){ 
    [self httpResponseCompletionHandler:response]; 
}]; 
```

# javascript - Javascript 中用于上传表单数据的变量未定义

> ID：11066421
> 
> 赞同：1
> 
> 时间：2012-06-16T19:31:47.050
> 
> 标签：javascript, uploadify

嗨，我需要在 Javascript 中保存一个变量并将其提供给 uploadify。

这是我的代码：

```
var mediaID;

$(".edit_photo_media").live("click", function() {
    mediaID = $(this).data("media-id");
    $.ajax({
        url: 'edit.php?action=media_select',
        type: 'GET',
        dataType: 'html',
        success: function (select) {
            if (select == '3') {
                document.location = "login.php";
            } else {
                $("#dialog_upload_media").dialog("open");
            }
        }
    });
    return false;
});

$('#file_upload').uploadify({
    'fileTypeDesc' : 'Image Files',
    'fileTypeExts' : '*.jpg;',
    'fileSizeLimit' : '4096KB',
    'debug'    : true,
    'method'   : 'post',
    'formData'      : {'id' : '' + mediaID},
    'swf'      : 'include/swf/uploadify.swf',
    'uploader' : 'include/scripts/upload_mult.php'
}); 
```

所以每次在打开上传器之前，都会点击 .edit_photo_media 。

```
<a href="#" data-media-id="'.$getID[$i].'" data-table="Media" class="edit_photo_media" title="Foto hochladen"><img src="images/photo.png" /></a> 
```

这是 var mediaID 获取其内容的地方。内部 .edit_photo_media mediaID 定义正确。

但是如果我点击上传按钮 mediaID 是未定义的。为什么变量失去了它的价值？

编辑：好的，这似乎与上传错误有关？如果我在任何其他功能上检查 mediaID，它工作正常......真的很奇怪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:47:41.793

好的问题解决了。刚刚添加了“onUploadStart”并将 id 保存在那里

```
$('#file_upload').uploadify({
    'fileTypeDesc' : 'Image Files',
    'fileTypeExts' : '*.jpg;',
    'fileSizeLimit' : '4096KB',
    'buttonText'    : 'Bilder auswählen',
    'debug'    : true,
    'method'   : 'post',
    'formData' : {'id' : 0},
    'swf'      : 'include/swf/uploadify.swf',
    'uploader' : 'include/scripts/upload_mult.php',
    'onUploadStart' : function(file) {
        $('#file_upload').uploadify("settings", "formData", {"id": mediaID});
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:12:43.570

jQuery 从 1.6 版开始才开始包含在源代码中设置的 HTML5 数据属性。如果您使用的是 < 1.6，则不会发生这种情况，在这种情况下升级 jQ。

# php - Zend 框架会话问题

> ID：11066426
> 
> 赞同：1
> 
> 时间：2012-06-16T19:32:37.940
> 
> 标签：php, zend-framework, session

Zend 应用程序的问题。当我登录到我的应用程序会话开始并存储在 /tmp 文件夹中。但是当我重定向到其他页面时，它返回 null。

这是我使用的会话代码：

[http://pastie.org/4099332](http://pastie.org/4099332)

当我重定向到我的主页时，“$authNamespace->userData”返回 null。

我正在使用 ubuntu 12.04。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T04:50:13.697

您是否在引导程序中开始了会话？

```
Zend_Session::start(); 
```

# java - 如何使用 Intents 录制视频？

> ID：11066428
> 
> 赞同：0
> 
> 时间：2012-06-16T19:32:46.870
> 
> 标签：java, android

我需要了解如何以编程方式录制视频。现在我使用这个结构：

```
public class AndroidLearningActivity extends Activity {
    /** Called when the activity is first created. */   
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.main);

        Intent captureVideoIntent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
        startActivityForResult(captureVideoIntent, 100);
    }  

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        Uri uri=data.getData();
        Log.e("result", "result:"+resultCode);

    }
} 
```

当应用程序打开时，相机也将打开。我已经录制了一些视频，但是如果我按下设备上的“返回”按钮，那么应用程序就会崩溃。请解释一下，我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:43:22.243

看起来你正在按下返回键并且数据（意图）没有被设置。所以数据在这里可能为空

```
 @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) { 
        Uri uri=data.getData();
        Log.e("result", "result:"+resultCode);
       }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:45:03.757

你在这个陈述中有问题

```
 Uri uri=data.getData();
        Log.e("result", "result:"+resultCode); 
```

当您按下后退按钮时，录制将被取消，并且`data.getData`由于没有录制完成，您将获得 null。因此，将您的代码更改为以下。

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (data != null) {
            Uri uri = data.getData();
            Log.e("result", "result:" + resultCode);
        }

        super.onActivityResult(requestCode, resultCode, data);
    } 
```

# triggers - 有没有办法在 onEdit() 中获取单元格的原始值？

> ID：11066429
> 
> 赞同：4
> 
> 时间：2012-06-16T19:32:47.363
> 
> 标签：triggers, google-apps-script

我想知道是否有办法从 onEdit() 事件中获取单元格的**原始值。**

例如：

*   单元格 A1 的当前值为“hello”
*   我通过将其更改为“世界”来编辑 A1
*   现在，当我尝试从活动范围中获取值时，我会得到“世界”

但我也希望有可能获得原始值，即“你好”。目前有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-28T21:42:27.480

如果您正在处理单个单元格，则可以使用 onEdit(e) 和 e.oldValue 。下面的示例在编辑任何单元格时将原始值添加到 A1。如果单元格为空白，则为“未定义”。

```
function onEdit(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cell = sheet.getActiveCell();
  var origValue = e.oldValue
 sheet.getRange('A1').setValue(origValue);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:57:26.277

唯一接近此的代码是使用 onOpen 退出来保存初始值。可以通过多种方式保存初始值。有“用户属性”。我还不知道它们是如何工作的。我是新来的。

您还可以在“onOpen”出口中使用“隐藏”表来保存值。可能还有其他方法，我不知道。

随着您要为其保存原始值的单元格数量的增加，问题变得更加困难。

顺便说一句，您应该了解“onOpen”例程在打开电子表格时触发。碰巧的是，最终用户也可以在 onOpen 处理程序完成执行之前访问并更改单元格值。您可能无法捕获所有初始值。

你应该知道的最后一件事。发生 UNDO 或 REDO 事件时不会触发 onEdit 触发器。单元格的内容可能会发生变化，而您不会知道。

我不知道验证程序是如何工作的。如果例程拒绝一个值，电子表格会恢复原始值吗？如果是这样，那么这可能会解决 onOpen 问题。如果它只是告诉用户该值无效，那将没有多大帮助。

一种可能有效但非常复杂的方法是在电子表格关闭之前保存图像。您将所有“之后”图像发布到第二个电子表格。然后在您的 onEdit 处理程序中查看另一个电子表格中的相应单元格。然后，您决定恢复以前的映像或允许新映像继续进行。

最后一个使用数据表代替第二个电子表格的疯狂想法。

我只是在学习所有这些概念，所以不要问我如何实现它们。我只是明白他们可能是可能的。出于编码和支持目的，它们可能不是最佳选择。但是由于当前的脚本服务不提供之前的图像访问，它是我能做的最好的。您必须了解这个 google 界面是一个客户端-服务器应用程序。您的脚本在服务器上运行。数据更改发生在“客户端”（最终用户）浏览器中。

最后一点：onEdit 触发器不会因为对单元格的 UNDO 或 REDO 更改而触发。所以单元格可能会改变，而您的脚本不知道它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T19:57:14.963

我不认为这是可能的。

我想您可以通过在第二张工作表上拥有工作表的精确副本来获得该功能，该工作表会在您的“onEdit”功能结束时自动更新。在该更新之前，第二张表上的数据将具有以前的值。有点棘手，但为什么不呢？-)

编辑：似乎是“当天的问题”，请参阅[这篇文章](https://stackoverflow.com/questions/11063340/onedit-event-object-access-to-previous-value-of-a-cell-that-has-been-modified)和 Henrique Abreu 的相关评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T19:56:31.443

当您以图形方式更改单元格的值时，可以使用 setComment 方法将原始值作为注释存储在该单元格中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-12T05:48:43.760

你基本上需要做的是创建一个影子表（你可以保护和隐藏它，甚至将它放在一个完全独立的电子表格中）并使用 IMPORTRANGE 函数将原始表的值放入影子表中（这提供了足够的延迟时间以获取编辑之前单元格中的旧值）。

```
=IMPORTRANGE("enter your original sheet's ID","enter the range you wish to get from the sheet") 
```

请注意，使用此代码，同时编辑多个单元格时，该功能仅适用于第一个单元格。

```
function onEdit(){
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var originalSheet = sheet.getSheetByName('Original');
  var shadowSheet = sheet.getSheetByName('Shadow');
  var editedCell = originalSheet.getActiveCell();
  var cellColumn = editedCell.getColumn();
  var cellRow = editedCell.getRow();
  var oldValue = shadowSheet.getRange(cellRow, cellColumn).getValue();
  var cellValue = editedCell.getValue();
  var editorMail = Session.getActiveUser().getEmail();    \\getting the editor email

if ("The condition you want to meet for the onEdit function to activate"){
    editedCell.setNote(editorMail + "\n" + new Date + "\n" + oldValue + " -> " + cellValue);
  }
} 
```

# wpf - 在 Silverlight 中连接事件处理程序的 MVVM 方法

> ID：11066431
> 
> 赞同：1
> 
> 时间：2012-06-16T19:32:57.027
> 
> 标签：wpf, silverlight, events, mvvm, prism

在 Silverlight/WPF 中使用 MVVM 模式，如何连接事件处理程序？我正在尝试将 XAML *Click*属性绑定到视图模型中的委托，但无法使其正常工作。

换句话说，我想替换这个：

```
<Button Content="Test Click" Click="Button_Click" /> 
```

其中 Button_Click 是：

```
private void Button_Click(object sender, RoutedEventArgs e) 
{ 
    // ...
} 
```

有了这个：

```
<Button Content="Test Click" Click="{Binding ViewModel.HandleClick}" /> 
```

其中 HandleClick 是处理程序。尝试这样做会引发运行时异常：

> “System.Windows.Data.Binding”类型的对象无法转换为“System.Windows.RoutedEventHandler”类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T20:12:14.113

执行此操作的 MVVM 方法是使用命令和[`ICommand`接口](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)。该`Button`控件有一个名为的属性`Command`，它接收一个类型的对象`ICommand`

一个常用的实现`ICommand`是[Prism 的`DelegateCommand`](http://msdn.microsoft.com/en-us/library/gg431410%28v=pandp.40%29.aspx). 要使用它，您可以在视图模型中执行此操作：

```
public class ViewModel
{
    public ICommand DoSomethingCommand { get; private set; }

    public ViewModel()
    {
        DoSomethingCommand = new DelegateCommand(HandleDoSomethingCommand);
    }

    private void HandleDoSomethingCommand()
    {
        // Do stuff
    }
} 
```

然后在 XAML 中：

```
<Button Content="Test Click" Command={Binding DoSomethingCommand} /> 
```

此外，请确保将视图模型设置为视图的 DataContext。一种方法是在视图的代码隐藏中：

```
this.DataContext = new ViewModel(); 
```

如果您想了解更多关于 MVVM 的信息，[本文是一个很好的起点。](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:32:58.417

答案是在[Prism](http://www.microsoft.com/en-us/download/confirmation.aspx?id=28950)框架中使用微软提供的扩展。使用 DLL *System.Windows.Interactivity.dll*和*Microsoft.Expression.Interactions.dll*，可以将事件绑定到视图模型中的处理程序方法：

```
<Button Content="Test Click"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"      
    xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
    >
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <ei:CallMethodAction TargetObject="{Binding ViewModel}" MethodName="HandleClick" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

# hadoop - 如何用hadoop实现自加入/跨产品？

> ID：11066434
> 
> 赞同：4
> 
> 时间：2012-06-16T19:33:16.490
> 
> 标签：hadoop, mapreduce, self-join

对项目对进行一些评估是常见的任务： 示例：重复数据删除、协同过滤、相似项目等 这基本上是具有相同数据源的自连接或交叉产品。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T12:55:32.847

要进行自连接，您可以遵循“reduce-side join”模式。映射器发出连接/外键作为键，记录作为值。

因此，假设我们想要对以下数据的“城市”（中间列）进行自连接：

```
don,baltimore,12
jerry,boston,19
bob,baltimore,99
cameron,baltimore,13
james,seattle,1
peter,seattle,2 
```

映射器将发出键->值对：

```
(baltimore -> don,12)
(boston -> jerry,19)
(baltimore -> bob,99)
(baltimore -> cameron,13)
(seattle -> james,1)
(seattle -> peter,2) 
```

在 reducer 中，我们将得到：

```
(baltimore -> [(don,12), (bob,99), (cameron,13)])
(boston -> [(jerry,19)])
(seattle -> [(james,1), (peter,2)]) 
```

从这里，您可以执行内部连接逻辑，如果您愿意的话。为此，您只需将每个项目与其他项目相匹配。为此，将数据加载到数组列表中，然后对项目执行 N x N 循环以相互比较。

意识到 reduce-side 连接是昂贵的。如果您不过滤任何内容，它们会将几乎所有数据发送到减速器。此外，请注意将数据加载到减速器的内存中——通过将所有数据加载到数组列表中，您可能会在热连接键上炸毁堆。

* * *

以上与典型的 reduce-side join 有点不同。连接两个数据集的思路是一样的：外键是键，记录是值。唯一的区别是这些值可能来自两个或多个数据集。您可以使用[`MultipleInputs`](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/mapreduce/lib/input/MultipleInputs.html)不同的映射器解析不同的输入集，然后让 reducer 从两者收集数据。

* * *

在没有任何约束的情况下交叉乘积是一场噩梦。IE，

```
select * from tablea, tableb; 
```

有很多方法可以做到这一点。它们都不是特别有效。如果你想要这种类型的行为，请给我留言，我会花更多时间解释一种方法来做到这一点。

如果你能找出某种连接键，它是相似性的基本键，你会好很多。

* * *

插入我的书：[MapReduce 设计模式](http://shop.oreilly.com/product/0636920025122.do)。它应该在几个月内发布，但如果你真的感兴趣，我可以通过电子邮件向你发送关于连接的章节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:43:06.857

通常使用 reducer 来执行连接所需的任何逻辑。诀窍是两次映射数据集，可能会在值上添加一些标记，指示它是哪个运行。那么自联接与任何其他类型的联接没有什么不同。

# javascript - jQuery取消选中复选框不起作用

> ID：11066436
> 
> 赞同：3
> 
> 时间：2012-06-16T19:33:41.607
> 
> 标签：javascript, jquery, html, checkbox

在 StackOverflow 上尝试了多个示例来解决我的问题后，我仍然无法弄清楚我的问题。

我有 3 个复选框：

```
<input id="pets_dog" class="text" type="checkbox" class="pets" name="pets[]" value="pets_dog"> Dogs</input>
<input id="pets_cats" class="text" type="checkbox" class="pets" name="pets[]" value="pets_cats"> Cats</input>
<input id="pets_none" class="text" type="checkbox" class="pets" name="pets[]" value="pets_no"> None</input> 
```

检查“PES_NONE”时，我需要未选中其他2个复选框，反之亦然。这是我当前的 jQuery 代码：

```
 $("#pets_none").change(function() {
            if($("#pets_none").attr('checked')) {
            $("#pets_cats").removeAttr('checked');
            $("#pets_dogs").removeAttr('checked');
            } 
        }); 
```

我无法弄清楚为什么它不起作用，并感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T19:51:06.933

你的 html 应该是

```
<input id="pets_dog" class="text pets" type="checkbox" name="pets[]" value="pets_dog" /> Dogs
<input id="pets_cats" class="text pets" type="checkbox" name="pets[]" value="pets_cats" /> Cats
<input id="pets_none" class="text pets" type="checkbox" name="pets[]" value="pets_no" /> None​​​​​​​​​​​ 
```

**JS**

```
$(function(){
   $("#pets_none").on('change', function(e) {
       if($(this).is(':checked')) {
           $("#pets_dog").attr('checked', false);
           $("#pets_cats").attr('checked', false);
       } 
   });
}); 
```

[**演示。**](http://jsfiddle.net/heera/u6wVG/)

**更新：** 你已经使用了两次类属性，应该如下

```
<input id="pets_dog" type="checkbox" class="pets text" name="pets[]" value="pets_dog" /> Dogs
<input id="pets_cats" type="checkbox" class="pets text" name="pets[]" value="pets_cats" /> Cats
<input id="pets_none" type="checkbox" class="text pets" name="pets[]" value="pets_no" /> None​ 
```

**JS**

```
$(function(){
    $(".pets").on('change', function(e) {
        var el=$(this);
        if(el.is(':checked') && el.attr('id')=='pets_none') {
            $(".pets").not(el).attr('checked', false);
        }
        else if(el.is(':checked') && el.attr('id')!='pets_none')
        {
            $("#pets_none").attr('checked', false);
        }  
    });
}); 
```

[**演示。**](http://jsfiddle.net/heera/u6wVG/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T19:41:51.653

您可以使用以下`prop`方法：

```
 $("#pets_none").change(function() {
     if (this.checked) {
        $("#pets_cats, #pets_dog").prop('checked', false);
     } 
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T19:38:24.037

使用`.prop()`方法：

```
...

$("#pets_cats").prop('checked', false);
$("#pets_dogs").prop('checked', false);

... 
```

并检查是否`#pets_none`已检查，也使用该方法：

```
$("#pets_none").prop('checked'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T06:07:20.623

```
var checked = $(this).find('Enable').text().toLowerCase();
$("#chk__Enable").each(function () {
    if (checked == 'true') {
        $(this).attr('checked', 'checked');
    } else {
        $(this).removeAttr('checked');
    }
}); 
```

# java - 解释 mongostat 中的 mongo 故障指标

> ID：11066438
> 
> 赞同：4
> 
> 时间：2012-06-16T19:33:49.013
> 
> 标签：java, mongodb

我对 mongostat 中的故障指标有疑问。我在 ubuntu 上运行 mongo 2.0，在 raid-0 配置中有 2 个磁盘（每个 32G）。

将 500 万个用户配置文件加载到 mongo 中的测试。我在单线程中执行该过程并使用 insert (bulk of 1000 entries) 。

当我**第一次**设置 mongo并将配置文件加载到其中时，我在加载过程中看到 mongostat（2,5，甚至 15）中有许多故障。

然后我再次运行加载：首先我删除旧集合，然后运行加载。以下时间几乎所有时间**故障=0 。**

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T19:47:02.163

MongoDB 通过内存映射文件机制将内存管理传递给操作系统。基本上，这种机制允许程序打开比已安装 RAM 大得多的文件。当程序尝试访问该文件的一部分时，操作系统会查看该部分（页面）是否在 RAM 中。如果不是，则发生[页面错误](http://en.wikipedia.org/wiki/Page_fault)，并且该页面是从磁盘加载的。`faults/s`mongostat 中的指标正好显示了这一点：每秒发生了多少页错误。

现在，当您启动 mongo 并将数据加载到其中时，数据文件不会映射到内存中，它们必须从磁盘加载（页面错误）。当你删除一个集合时，它在逻辑上会被删除，但对应的物理文件不会被删除，会被重复使用。由于它们已经在 RAM 中，因此没有页面错误。

如果您改为删除数据库，它会带走文件，因此您下次应该会看到页面错误。

# javascript - SlidesJS - 一页上有多个“产品”示例滑块？

> ID：11066439
> 
> 赞同：0
> 
> 时间：2012-06-16T19:34:05.317
> 
> 标签：javascript, jquery, css

我正在使用此处找到的 SlidesJS 产品示例[http://slidesjs.com/examples/product/](http://slidesjs.com/examples/product/)

我想在页面上有超过 1 个这样的单元，但是当只是复制它的标记并在下面粘贴时不起作用。第一个会显示得很好，但第二个只显示 2 个分页元素并且不可点击。我的主要问题是为什么我再次复制滑块的方法不起作用，我的一般方法完全错误吗？一般来说，SlidesJS 或 Jquery 是否存在一些怪癖，需要我创建单独的 css div 或类似的东西？

HTML：

```
<div id="containerSlides">
      <div id="products_example">
        <div id="products">
            <div class="slides_container">
                <a href="#"><img src="img/lamp1.png" width="360" alt="1144953 3 2x"></a>
                <a href="#" ><img src="img/lamp2.png" width="360" alt="1144953 1 2x"></a>

            </div>
            <ul class="pagination">
                <li><a href="#"><img src="img/lamp1.png" width="55" alt="1144953 3 2x"></a></li>
                <li><a href="#"><img src="img/lamp2.png" width="55" alt="1144953 1 2x"></a></li>
            </ul>
        </div>
    </div>
</div>
<div id="containerSlides">
      <div id="products_example">
        <div id="products">
            <div class="slides_container">
                <a href="#"><img src="img/lamp3.png" width="360" alt="1144953 3 2x"></a>
                <a href="#" ><img src="img/lamp4.png" width="360" alt="1144953 1 2x"></a>

            </div>
            <ul class="pagination">
                <li><a href="#"><img src="img/lamp3.png" width="55" alt="1144953 3 2x"></a></li>
                <li><a href="#"><img src="img/lamp4.png" width="55" alt="1144953 1 2x"></a></li>
            </ul>
        </div>
    </div>
</div> 
```

CSS：

```
#containerSlides {
    width:580px;
    padding:10px;
    margin:0 auto;
    position:relative;
    z-index:0;
    float:left;
}

#products_example {
    width:600px;
    height:282px;
    position:relative;
}

/*
    Slideshow
*/

#products {
    margin-left:26px;
}

/*
    Slides container
    Important:
    Set the width of your slides container
    Set to display none, prevents content flash
*/

#products .slides_container {
    width:360px;
    /*overflow:hidden;*/
    float:left;
    position:relative;
    border:1px solid #dfdfdf;
    display:none;
}

/*
    Each slide
    Important:
    Set the width of your slides
    If height not specified height will be set by the slide content
    Set to display block
*/

.slides_container a {
    width:360px;
    height:268px;
    display:block;
}

/*
    Next/prev buttons
*/

#products .next,#products .prev {
    position:absolute;
    top:127px;
    left:0;
    width:21px;
    height:0;
    padding-top:21px;
    overflow:hidden;
    display:block;
    z-index:101;
}

#products .prev {
    background:url(../img/arrow-prev.png);
}

#products .next {
    left:398px;
    background:url(../img/arrow-next.png);
}

/*
    Pagination
*/

#products .pagination {

    width:55px;
    padding:5px 5px;
    float:left;
    margin-left:30px;
    border-radius:5px;
    -webkit-border-radius:5px;
    -moz-border-radius:5px;
}

#products .pagination li {
    float:left;
    margin:2px 4px;
    list-style:none;
}

#products .pagination li a {
    display:block;
    width:55px;
    height:41px;
    margin:1px;
    float:left;
    background:#f9f9f9;
}

#products .pagination li.current a {
    border:1px solid #7f7f7f;
    margin:0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:38:37.810

如果没有看到 javascript，就不可能确切地说出问题出在哪里，但是标记存在一些直接问题。

页面上有多个具有相同 id 的元素（containerSlides、products_example、products）。

为第二个容器提供唯一 ID 将有助于解决问题。然后您可能（再次，不能肯定地说没有看到 javascript）需要添加另一个“初始化”调用以在第二个容器上设置 slidesjs 以及将 id 添加到您的 css 以便第二个容器获得相同的样式.

前任：

标记

```
<code>
<div id="secondContainerSlides">
    …
</div>
</code> 
```

CSS

```
<code>
#containerSlides,
#secondContainerSlides{
    …
}
</code> 
```

# ios - 刷新标签栏（标签栏图标的标签）

> ID：11066444
> 
> 赞同：0
> 
> 时间：2012-06-16T19:34:25.710
> 
> 标签：ios, xcode, uitabbarcontroller, uilabel, uitabbar

我像这样切换第一个 tabbaricon 的标签名称：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

   NSString *temp = [[NSUserDefaults standardUserDefaults] stringForKey:@"stateOfSwitch"];
    if ([temp isEqualToString:@"OFF"]) {
        self.title = NSLocalizedString(@"TabButtonOFF", nil);
    }
    else {

    self.title = NSLocalizedString(@"TabButton1", nil);

    }
        self.tabBarItem.image = [UIImage imageNamed:@"first"];

}
return self;
} 
```

通过启动和停止应用程序可以正常工作，但是有没有办法刷新（重新加载）标签名称？运行时？

# zend-framework - 这是检查 db_row 是否存在的有效方法吗？

> ID：11066451
> 
> 赞同：2
> 
> 时间：2012-06-16T19:35:16.100
> 
> 标签：zend-framework, zend-db

我正在使用 Zend，我需要检查数据库中的一行是否已经存在（一个简单的解决方案来消除我遇到的重复键错误）。我尝试了几件事，但似乎没有任何效果......（例如**Zend_Validate_Db_NoRecordExists**方法）

所以我编写了以下代码，我想知道这是否是一种有效的方法，或者我是否应该以不同的方式做事：

在模型中：

```
 $where =  $condition = array(
        'user_id = ' . $user_id,
        'page_id = ' . $page_id
        );

        $check = $this->fetchRow($where);

        if(count($check) > 0) {

            return null;

        }else{
              // Here I create a new row, fill it with data, save and return it.
        } 
```

然后在我看来：

```
 if($this->result != null) { /* do stuff */  }else{ /* do other stuff */ } 
```

它确实有效，但似乎需要更多时间（呃，因为额外的查询），我有点不确定我是否应该坚持这个..

欢迎任何建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:33:38.067

假设您已经在控制器中编写了函数

```
$row = $this->fetchRow($where);   //If no row is found then $row is null .

    if(!$row)
    {
    $row = $dbTb->createNew($insert); //$insert an associative array where it keys map cols of table
    $row->save();
     $this->view->row_not_found = true;
    }

    return $row; 
```

在您看来，您可以这样做

```
if($this->row_not_found)
{
}else {

} 
```

# javascript - 我该如何写 || Javascript 中的表达式，其中 0 不被视为虚假值？

> ID：11066452
> 
> 赞同：5
> 
> 时间：2012-06-16T19:36:09.890
> 
> 标签：javascript

请原谅我的英语。我不是母语人士。

当我编写这样的代码时，我的问题就出现了

```
luminosity = settings.luminosity || 50;
opacity = settings.opacity || 100; 
```

问题是它`0`应该是一个有效值，但它会被忽略，因为`0`它在 Javascript 中是虚假的，它将设置为`||`.

有没有办法进行修复所以`0`不被视为虚假？

现在我正在做

```
luminosity = "luminosity" in settings ? settings.luminosity : 50; 
```

但我不喜欢那样，因为它太长了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:40:52.540

您可以将其转换为字符串`'0'`是`truthy`：

```
luminosity = settings.luminosity === 0 ? '' + settings.luminosity : settings.luminosity || 50;
opacity = settings.opacity === 0 ? '' + settings.opacity : settings.opacity || 100; 
```

或者您可以根据您的输入或要求简单地使用它：

```
luminosity = '' + settings.luminosity || 50;
opacity = '' + settings.opacity || 100; 
```

`'' + number`是将数字转换为字符串的简写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:46:53.693

拥有默认选项/设置的常用方法是[`.extend()`jQuery](http://api.jquery.com/jQuery.extend/)中的方法。Pure JS 也有这种方法，但有一些不同。

```
/* merge object2 into object1 */
$.extend(object1, object2); 
```

**这就是你需要的：**

```
var defaultSetting = {luminosity : 50, opacity : 100};
setting = $.extend({}, defaultSetting, setting); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T19:54:20.817

您需要做的就是编写一个辅助函数...

```
function ifNotSet(val, other) {
    return typeof val === "undefined" ? other : val;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T20:12:08.153

调整@Tooraj 代码的初始版本：

```
var setting = {luminosity:0};
var defaultSetting = {luminosity:50, opacity:100};

setting = $.extend({}, defaultSetting, setting);

// setting now has a value of {luminosity:0, opacity:100} 
```

我以前没有这样做过。但它似乎在 FF、Chrome 和 IE9 中运行良好。

# c++ - 要求基类中的方法被其所有子类覆盖

> ID：11066457
> 
> 赞同：0
> 
> 时间：2012-06-16T19:37:06.550
> 
> 标签：c++, inheritance

在 C++ 中，是否可以要求基类中的方法被其所有派生类覆盖而不使其成为纯虚拟方法？

```
#include <iostream>
using namespace std;

class BaseClass{
    public:
    int printStuff(){ //find some way to require all derived classes to override this method
        cout << "Printing some stuff";
    }
};

class DerivedClass: public BaseClass{

};

int main(){
    cout << "Hello World!";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T19:39:18.590

我知道您说过您不想使用纯虚函数，但是您可以使用纯虚函数，并且如果您正在尝试这样做，仍然可以给该方法一个定义（不确定您是否已经知道）：

```
class BaseClass{
public:
    virtual int printStuff() = 0;
};

// give the pure virtual function an implementation
int BaseClass::printStuff() {
    cout << "Printing some stuff";
}

class DerivedClass: public BaseClass{
    // compiler error; DerivedClass must override printStuff
};

class DerivedClass2: public BaseClass{
public:
    int printStuff() {
        return BaseClass::printStuff(); // use the base class's implementation
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:32:51.363

这取决于你的要求是什么意思。通常“require”的意思是“除非编译完成，否则无法编译”。如果那是您想要的，那么纯虚拟是唯一想要定义实现该目标的方法。如果您的意思是“除非完成，否则程序将无法工作”，那么您可以为虚拟方法提供默认实现，该实现会通知用户该实现丢失。

```
class BaseClass {
protected:
    virtual int printStuff () {
        std::cout << "Nothing to print, please override printStuff()."
                  << std::endl;
        return -1;
    }
}; 
```

当提供了虚拟方法的实现时（即，虚拟方法没有用 的赋值声明`0`），它不再是“纯”的。所以这个技术满足了你“不是纯虚方法”的要求，但它仍然是虚方法。

我假设你想要这个，因为你相信你的代码的某些部分需要实例化一个普通的`BaseClass`. 如果是这种情况，您可以考虑`BaseClass`分成两部分。一个是“纯”接口，另一个是您在实例化它时实际要使用的东西。

```
class BaseObject {
    //...
};

class BaseClass {
protected:
    BaseObject base;
    virtual int printStuff () = 0;
}; 
```

所以你会实例化 a`BaseObject`而不是 a `BaseClass`。

# javascript - 在 Node.js 中保存应用程序状态

> ID：11066459
> 
> 赞同：5
> 
> 时间：2012-06-16T19:37:18.673
> 
> 标签：javascript, node.js, network-programming, distributed

如何保存主要由 HTTP 请求组成的 node.js 应用程序的应用程序状态？

我在 Node.JS 中有一个脚本，它使用 RESTful API 将大量（10,000 多种）产品导入电子商务应用程序。API 对可以发出的请求数量有限制，我们正在努力克服这个限制。在之前的运行中，脚本退出`Error: connect ETIMEDOUT`可能是由于超出 API 限制。我希望能够尝试连接 5 次，如果连接失败，则在恢复限制后一小时后恢复。

在发生崩溃（断电、网络崩溃等）的情况下保存整个进度也是有益的。并且能够从它停止的地方恢复脚本。

我知道 Node.js 作为一个巨大的事件队列运行，所有 http 请求及其回调都被放入该队列（连同其他一些事件）。这使它成为保存当前执行状态的主要目标。其他令人愉快的（对于这个项目不是完全必要的）将能够在不同网络上的多台机器之间分配工作以增加吞吐量。

那么有没有现有的方法来做到这一点？也许是一个框架？或者我是否需要自己实现这个，在这种情况下，任何关于如何做到这一点的有用资源都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T19:53:56.057

我不确定你说的是什么意思

> 我知道 Node.js 作为一个巨大的事件队列运行，所有 http 请求及其回调都被放入该队列（连同其他一些事件）。这使其成为保存当前执行状态的主要目标

如果您发现它与答案相关，请随时对此发表评论或阐述。

也就是说，如果您只是为这个特定任务寻找持久性机制，我可能会推荐[Redis](http://redis.io/)，原因如下：

*   它允许对许多数据类型进行[原子操作；](http://en.wikipedia.org/wiki/Atomicity_%28database_systems%29)例如，如果您在 Redis 中有一个名为的条目，`num_requests_made`它表示发出的请求数，您可以在 Redis 中使用 轻松增加这个数字`INCR num_requests_made`，并且它保证是原子的，从而更容易扩展到多个工作人员。
*   它有[几种数据类型](http://redis.io/topics/data-types)可以证明对您的需求有用；例如，一个简单的字符串可以表示在特定时间段内发出的 API 请求数（如上一个要点）；您可以将需要重新提交的失败 API 请求的详细信息存储在列表中；等等
*   它提供了[发布/订阅机制](http://redis.io/topics/pubsub)，允许您在程序的多个实例之间轻松通信。

如果这听起来很有趣或有用，并且您还不熟悉 Redis，我强烈建议您尝试[交互式教程](http://try.redis-db.com/)，它向您介绍了一些数据类型和命令。另一本不错的阅读材料是[15 分钟 Redis 数据类型介绍](http://redis.io/topics/data-types-intro)。

# email - SoundCloud 使用电子邮件上传

> ID：11066462
> 
> 赞同：2
> 
> 时间：2012-06-16T19:37:44.060
> 
> 标签：email, upload, soundcloud, friendfeed

有没有办法使用电子邮件（即 SoundCloud 用户的注册电子邮件）上传音频文件？FriendFeed采用了这种方式，绕过了集成他们的API的需要，解决了上传请求时移动设备不在网络时排队的问题。他们使用主题行作为标题，使用消息内容作为描述。它使任何可以通过电子邮件发送声音的应用程序都可以轻松加载到 FriendFeed 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:34:36.403

不，这是不可能的，但我会作为功能请求向团队提出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T03:18:31.167

可以使用连接到您的 SoundCloud 帐户的 ifttt.com 来实现此功能。

添加 IFTTT 电子邮件频道和 SoundCloud 频道，然后添加此配方：[https ://ifttt.com/recipes/230468-soundcloud-upload-via-email](https://ifttt.com/recipes/230468-soundcloud-upload-via-email)

然后只需发送电子邮件至 trigger@recipe.ifttt.com 并附上曲目，它将作为公共曲目自动上传到 SoundCloud。

# r - 您可以缩写列表名称吗？为什么？

> ID：11066464
> 
> 赞同：16
> 
> 时间：2012-06-16T19:37:53.730
> 
> 标签：r, list, names

这让我很糟糕。您可以缩写列表名称吗？我以前从未注意到它，我完全被搞砸了一天。有人可以解释这里发生了什么以及为什么它可能比它更有用吗？为什么它在底部这样不一致？如果我可以把它关掉？

```
> wtf <- list(whatisthe=1, pointofthis=2)  
> wtf$whatisthe  
[1] 1  
> wtf$what  
[1] 1  

> wtf <- list(whatisthe=1, whatisthepointofthis=2)  
> wtf$whatisthepointofthis  
[1] 2  
> wtf$whatisthep  
[1] 2  
> wtf$whatisthe  
[1] 1  
> wtf$what  
NULL 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-16T19:56:25.713

我怀疑`$`在选项卡式完成实施之前的日子里，操作员的部分匹配是一个很好的交互式使用功能

如果您不喜欢这种行为，则可以改用`"[["`运算符。它需要一个参数`exact=`，它允许您控制部分匹配行为，默认为`TRUE`.

```
wtf[["whatisthep"]]                 # Only returns exact matches
# NULL

wtf[["whatisthep", exact=FALSE]]    # Returns partial matches without warning
# [1] 2

wtf[["whatisthep", exact=NA]]       # Returns partial matches & warns that it did
# [1] 2
# Warning message:
# In wtf[["whatisthep", exact = NA]] :
#   partial match of 'whatisthep' to 'whatisthepointofthis' 
```

`"[["`（这是在 R 编程中通常首选的原因之一`$`。另一个是能够做到这一点`X <- "whatisthe"; wtf[[X]]`但不是这个`X <- "whatisthe"; wtf$X`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:52:01.567

对于列表元素名称（和函数参数名称），R 应用以下算法：

如果该项目完全匹配，请使用它。如果没有完全匹配，则查找部分匹配。如果只有一个部分匹配，请使用它。否则，什么都不用。

# select - solr java.lang.NullPointerException on select

> ID：11066465
> 
> 赞同：1
> 
> 时间：2012-06-16T19:37:55.130
> 
> 标签：select, solr, nullpointerexception

我最近开始在 /select 查询上使用 solr-3.6 粘贴下面的错误。

我不知道配置中的任何更改开始导致此错误。我还在同一台机器上运行第二个独立的 solr 服务器，它继续运行良好，并且除了端口号外，它的配置与第一个相同。

第一个似乎可以正常执行数据导入操作并像往常一样更新索引文件，但在选择查询时失败。

失败查询（过去运行良好）的示例是：

```
http://[machine_name]/solr/select/?q=title%3Afoo&version=2.2&start=0&rows=10&indent=on 
```

我还发现只有当结果集非空时才会出现此错误。我惊呆了。任何想法？

```
HTTP ERROR 500

Problem accessing /solr/select/. Reason:

null

java.lang.NullPointerException
at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:398)
at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:186)
at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我正在使用`solrconfig.xml`从 solr 示例中获取的内容。

# c# - 实体框架控制台应用程序连接到错误的数据库

> ID：11066466
> 
> 赞同：6
> 
> 时间：2012-06-16T19:37:54.850
> 
> 标签：c#, entity-framework, ef-code-first

我有一个运行良好并正确连接到数据库服务器的 EF 代码优先 Web 应用程序。我在解决方案中添加了一个控制台应用程序，以测试将与该应用程序一起使用的服务的逻辑。

对控制台应用程序不保存数据的原因感到头疼，所以我将其缩减为从数据库中提取的简单数据，结果发现原始控制台应用程序正在保存记录，但保存到与指定数据库不同的数据库在连接字符串中。

这是 app.config 中的连接字符串：

```
 <add name="DatabaseContext" connectionString="Data Source=xxx.xx.x.xx; Initial Catalog=OKWU_Gateway; User ID=xxxxx; Password=********; Trusted_Connection=False;" providerName="System.Data.SqlClient" />
  <add name="DevelopmentEntities" connectionString="metadata=res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=;Data Source=|DataDirectory|\OKWU_Gateway.mdf" providerName="System.Data.EntityClient" /> 
```

数据库上下文是

控制台应用程序非常简单

```
 Database.SetInitializer<DatabaseContext>(null);
    static void Main(string[] args)
    {
        using (DatabaseContext db = new DatabaseContext())
        {
            var query = from u in db.Users where u.Id == 1 select u;
            foreach (User u in query)
            {
                Console.WriteLine(u.Id + " " + u.FirstName + " " + u.LastName);
            }
            Console.ReadLine();
        }
    } 
```

但不是连接到远程服务器上的数据库，而是连接到开发机器上的 sqlexpress 并访问该数据库。

```
UniversityGateway.Data.DatabaseContext 
```

我尝试更改连接字符串以指向 |DataDirectory| 到 SQL 连接字符串，这没有任何区别。连接字符串与 web.config 中的相同，正如我所说，Web 应用程序运行良好。

关于我所缺少的任何想法或指出我解决此问题的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:53:31.013

好的，经过大量挖掘，我找到了解决方案。不确定它是否是正确/最好的，但它有效，所以我可以继续前进。

由于控制台应用程序不尊重 app.config 中的连接字符串，因此我在代码中指定了连接

```
db.Database.Connection.ConnectionString 
```

不过，我仍然觉得我在这里遗漏了一些东西。

发现我的问题的另一个部分是 EF Codefirst 不能很好地处理 Sql Server 2005 DateTime 数据类型。

# android - 如何在录制时检查音频的强度（强度）？

> ID：11066470
> 
> 赞同：7
> 
> 时间：2012-06-16T19:38:45.510
> 
> 标签：android, voice-recording

我正在开发一个录音机应用程序。我想知道在录制音频时有什么方法可以找到音频的强度。我不想将录音保存在任何地方。我只想向用户展示麦克风捕捉到的声音是否大于预定义的阈值。

假设如果声音低于 2 分贝，它应该在红色画布中显示“低”。一旦声音变大并超过 2 分贝阈值，画布应变为绿色并显示“高”信息。

是否可以使用 MediaRecorder 或者我必须使用 AudioRecorder 类。以及如何解决。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T20:21:20.383

您可以在录制开始时启动另一个线程并使用`getMaxAmplitude`函数来捕获幅度。

下面是代码片段。这里我们每 250 毫秒采样一次并计算最大幅度

```
public void run() {
            int i = 0;
            while(i == 0) {

                try {
                    sleep(250);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                if (mRecorder != null) {
                    amplitude = mRecorder.getMaxAmplitude();

                    //Here you can put condition (low/high)
                    Log.i("AMPLITUDE", new Integer(amplitude).toString());
                } 

            }
        } 
```

# c++ - 暂停视频后，如何访问 C++ builder 6 MediaPlayer 对象中的当前帧？

> ID：11066473
> 
> 赞同：0
> 
> 时间：2012-06-16T19:39:04.273
> 
> 标签：c++, c++builder

暂停视频后，如何访问 C++ builder 6 MediaPlayer 对象中的当前帧？

我使用面板或 Animate 对象作为其显示，但我找不到 MediaPlayer 对象或其显示的属性或函数，可让我访问当前暂停的帧，以便能够将其像素信息复制到位图或者对其进行一些处理！

我这样做是为了将显示图像复制到位图图像，但它只是复制显示（面板或动画）背景颜色：

```
MediaPlayer1->Display->PaintTo(Image1->Canvas, 200, 200); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:46:38.930

`TMediaPlayer` does not support what you want. You will have to switch to another API, like DirectX or libav, which can give you access to the frame data and expects you to render the frames visually yourself as they are being given to you.

# iphone - 更改标签并添加值

> ID：11066481
> 
> 赞同：0
> 
> 时间：2012-06-16T19:41:40.307
> 
> 标签：iphone, objective-c, ios, xcode, ios-simulator

我想更改我设计上的标签我已将它们链接起来，当我使用此代码时它不会改变这是在 H

```
IBOutlet UILabel *label;
    NSInteger fred; 
```

这是在 M

```
fred = fred+1;
    label.text = @"Level : " +fred; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T19:42:47.437

代替

```
label.text = @"Level : " +fred; 
```

采用

```
 label.text = [NSString stringWithFormat:@"Level : %d" ,fred]; 
```

# java - 计算没有地图数据的地理空间边界框

> ID：11066486
> 
> 赞同：0
> 
> 时间：2012-06-16T19:42:21.193
> 
> 标签：java, algorithm

我正在寻找一种算法，它可以让我在不使用地图数据的情况下找到纬度/经度的封闭边界框。本质上，我希望能够为给定大小的平面世界地图定义网格，然后绘制纬度/经度落在哪个网格中。

有谁知道以前可能在这方面做过的工作？是否有标准的方法可以通过自制解决方案来执行此操作，在这些解决方案中，我为世界创建自己的边界框的哈希图（或类似的）并进行查找等。

我不想为此使用实际的制图。只是寻找一些数学，它将为所有属于它的纬度/经度返回一个固定的边界框

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T21:35:57.973

我猜你的意思是你想做一些事情，比如用固定大小的正方形（或矩形）覆盖地球表面，也许是 100 平方公里，并找出一种从任何（纬度，经度）坐标对映射到它坐落在哪个广场？好吧，忘记这一点，这是不可能的，根本没有办法用相同大小的正方形覆盖球体的表面（在这个讨论中忽略地球的轻微非球形）。

您可能对[Universal Transverse Mercator](http://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system)感兴趣，它与您想要做的很接近，但它需要您参与一些地图投影的数学运算。我看不出有什么办法。

我不考虑你会对等角测量的“正方形”感到满意，我的意思是（例如）每边 2 度纬度或长的“正方形”。数学将是微不足道的，您不会在 SO 上要求指导。

# c# - C#中的搜索按钮

> ID：11066489
> 
> 赞同：2
> 
> 时间：2012-06-16T19:42:39.390
> 
> 标签：c#, winforms

我知道这个问题已经被问过很多次关于如何创建搜索按钮的问题。我对 C# 编程非常陌生，我很难创建搜索，只是没有从其他帖子中找到我想要的东西。所以我希望有人能帮助我。

我创建了一个 Windows 窗体应用程序，并且我使用数据集中的“详细信息”视图进行了表单设置，当我从一个记录滚动到另一个记录时，数据在应用程序中正确显示。我的数据存储在 sdf 文件中。我想让人们输入一个“帐号”或一个人的“姓氏”，然后能够点击搜索按钮。在搜索按钮之后，预先安排的字段将更新信息。为了能够选择“姓氏”或“帐号”，如果需要，我可以在组合框中列出项目。

我已经包含了代码的副本，其中一些项目的命名已更改，以免泄露我的职业。任何帮助是极大的赞赏。

```
using System.Collections.Generic;   
using System.ComponentModel;   
using System.Data;   
using System.Drawing;   
using System.Linq;   
using System.Text;   
using System.Windows.Forms;   

namespace WindowsFormsApplication1   
{
public partial class Form1 : Form   
{   
    public Form1()   
    {   
        InitializeComponent();   
    }   

    private void custtableBindingNavigatorSaveItem_Click(object sender, EventArgs e)   
    {   
        this.Validate();   
        this.custtableBindingSource.EndEdit();    
        this.tableAdapterManager.UpdateAll(this.custDataSet);   

    }    

    private void label1_Click(object sender, EventArgs e)   
    {   

    }   

    private void tableLayoutPanel1_Paint(object sender, PaintEventArgs e)   
    {   

    }   

    private void custtableBindingNavigatorSaveItem_Click_1(object sender, EventArgs e)   
    {   
        this.Validate();   
        this.custtableBindingSource.EndEdit();   
        this.tableAdapterManager.UpdateAll(this.custDataSet);   

    }   

    private void Form1_Load(object sender, EventArgs e)   
    {   
        // TODO: This line of code loads data into the 'custDataSet.custtable' table.    You can move, or remove it, as needed.   
        this.custtableTableAdapter.Fill(this.custDataSet.custtable);   

    }   

    private void file_Name_12TextBox_TextChanged(object sender, EventArgs e)   
    {   

    }   

    private void fillByToolStripButton_Click(object sender, EventArgs e)   
    {   
        try   
        {   
            this.custtableTableAdapter.FillBy(this.custDataSet.custtable);    
        }   
        catch (System.Exception ex)   
        {   
            System.Windows.Forms.MessageBox.Show(ex.Message);   
        }   

    }   

    private void btnfind_Click(object sender, EventArgs e)
    {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:58:36.390

custtableBindingNavigatorSaveItem_Click 和 custtableBindingNavigatorSaveItem_Click_1 是什么？是一样的，如果它们是两个按钮做同样的事情，那么你可以从两个按钮使用相同的方法（虽然我不知道为什么两个按钮做同样的事情）。

无论如何，您有一些选择，这取决于数据大小、所需的速度、数据是否应该脱机或数据库锁定等等......

1.  设置您的查询/存储过程（存储过程更安全）以允许限制结果。这让 DB 可以完成所有艰苦的工作——这就是 DB 的设计目的。

2.  将所有内容读入内存（您的表格填充）并从表格中选择 - 不要与 Linq 查询真正不同。这意味着所有数据都处于脱机状态，您需要决定何时以及如何将其写回数据库（如果有的话）。

PS：我很好奇，你是什么职业，你这里的化名还不够躲？想象力变得疯狂！

# c++ - QTableWidget 中的明星代表

> ID：11066491
> 
> 赞同：0
> 
> 时间：2012-06-16T19:42:49.077
> 
> 标签：c++, qt

我已经从示例[http://doc.qt.io/qt-5/qtwidgets-itemviews-stardelegate-example.html](http://doc.qt.io/qt-5/qtwidgets-itemviews-stardelegate-example.html)复制了 stardelegate、stareditor 和 starrating 源文件和头文件，并且我尝试在树小部件中实现星级评分功能而不是像示例中的表格小部件。星星正在显示，问题是不能像上述示例中那样编辑，实际上是整行。我的代码导致了这个：

```
ui->tree->setItemDelegate(new StarDelegate);
ui->tree->setItemDelegateForColumn(2, new StarDelegate);
ui->tree->setEditTriggers(QAbstractItemView::DoubleClicked | QAbstractItemView::SelectedClicked);
ui->tree->setSelectionBehavior(QAbstractItemView::SelectRows);
ui->tree->setColumnCount(3);
ui->tree->setHeaderLabels(QStringList() << "Name" << "Date" << "Rating"); 
```

请告诉我我做错了什么，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:23:58.330

`QTableWidget`默认情况下，`QTreeWidget`项目是可编辑的，项目不是。

您必须将标志添加`Qt::ItemIsEditable`到评级列中所有项目的现有标志中。

# android - 如何从 Android 应用程序中删除系统文件？

> ID：11066493
> 
> 赞同：0
> 
> 时间：2012-06-16T19:43:16.563
> 
> 标签：android, shell, system

我正在使用[Root 工具](http://code.google.com/p/roottools/downloads/list)，但我并没有走得太远......我想有权从 /system/app 和其他需要 root 的目录中删除文件。我很想通过 Java 以编程方式完成它，但如果我可以通过 shell 命令完成它，那没关系。也。我的手机已经root了。这是我到目前为止所尝试的。

```
RootTools.remount("/system", "rw");
                 try {
                    RootTools.sendShell("rm /system/app/Videos.apk", -1);
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (RootToolsException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (TimeoutException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } 
```

我也试过：

```
 public static void sendShell(List<String> cmds) throws Exception {
        Process process = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());

        for (String tmpCmd : cmds) {
                os.writeBytes(tmpCmd+"\n");
        }

        os.writeBytes("exit\n");
        os.flush();
        os.close();

        process.waitFor();
    } 
```

我不知道从这里做什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:54:43.193

根据我们的对话，您似乎需要一个不同的 rom，因为在您的设备上重新安装分区时出现问题。

我敢打赌，刷新一个新的 rom 会缓解这个问题，并允许 RootTools 正确地将 /system 重新挂载为 rw 并允许您删除文件。

# algorithm - 4 向渐变填充。可能的？

> ID：11066496
> 
> 赞同：3
> 
> 时间：2012-06-16T19:43:42.010
> 
> 标签：algorithm, html, graphics, svg, graph-algorithm

我需要绘制 4 个点并通过线性渐变填充该区域，每个点都有不同的颜色。是否可以在 HTML5、SVG 或任何其他“浏览器”方式中执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:11:17.893

[我在这个](http://jsfiddle.net/y7N3f/)小提琴中试验了以下代码

```
<svg height="500" width="500">
    <linearGradient id="R">
        <stop offset="0" stop-color="red" stop-opacity="1"/>
        <stop offset="1" stop-color="white" stop-opacity="0"/>
    </linearGradient>

    <linearGradient id="G" gradientTransform="rotate(180 0.5 0.5)">
        <stop offset="0" stop-color="green" stop-opacity="1"/>
        <stop offset="1" stop-color="white" stop-opacity="0"/>
    </linearGradient>
    <linearGradient id="B" gradientTransform="rotate(270 0.5 0.5)">
        <stop offset="0" stop-color="blue" stop-opacity="1"/>
        <stop offset="1" stop-color="white" stop-opacity="0"/>
    </linearGradient>

    <path d="M 100,100 L 300,100 L 200,300 Z" fill="url(#R)"/>
    <path d="M 300,100 L 100,100 L 200,300 Z" fill="url(#G)"/>
    <path d="M 200,300 L 300,100 L 100,100 Z" fill="url(#B)"/>
</svg> 
```

得到这个结果

![线性梯度叠加样本](../Images/f3878c9780aa993edf3304824f69e20a.png)

高温高压

**编辑**我尝试改进并扩展到 4 点：请参阅[更新](http://jsfiddle.net/y7N3f/2/)的小提琴。您的问题对我学习 SVG 结构的基础知识很有用。

```
<svg height="500" width="500">

    <linearGradient id="R" gradientTransform="rotate(45 .5 .5)">
        <stop offset="0" stop-color="red" stop-opacity="1"/>
        <stop offset=".5" stop-color="white" stop-opacity="0"/>
    </linearGradient>
    <linearGradient id="G" gradientTransform="rotate(135 .5 .5)">
        <stop offset="0" stop-color="green" stop-opacity="1"/>
        <stop offset=".5" stop-color="white" stop-opacity="0"/>
    </linearGradient>
    <linearGradient id="B" gradientTransform="rotate(225 .5 .5)">
        <stop offset="0" stop-color="blue" stop-opacity="1"/>
        <stop offset=".5" stop-color="white" stop-opacity="0"/>
    </linearGradient>
    <linearGradient id="Y" gradientTransform="rotate(315 .5 .5)">
        <stop offset="0" stop-color="yellow" stop-opacity="1"/>
        <stop offset=".5" stop-color="white" stop-opacity="0"/>
    </linearGradient>
    <defs>
        <path id="P" d="M 100,100 L 300,100 L 300,300 L 100,300 Z"/>
    </defs>
    <use xlink:href="#P" fill="url(#R)"/>
    <use xlink:href="#P" fill="url(#G)"/>
    <use xlink:href="#P" fill="url(#B)"/>
    <use xlink:href="#P" fill="url(#Y)"/>
</svg> 
```

值得注意的是，与`stop offset="0"`我们一起玩会得到不同的结果......这是基本的：

![在此处输入图像描述](../Images/a1af625030e5669fbf78187e34bbcc8a.png)

# javascript - 具有多个范围的 JQuery UI 可拖放？

> ID：11066497
> 
> 赞同：8
> 
> 时间：2012-06-16T19:43:45.083
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我想要几类可拖动的，每一个对应于一类可放置的。但除此之外，我还想有一个单独的“垃圾箱”，所有的可拖动对象都可以在其中被丢弃，直到可以为它们找到合适的可丢弃对象。

现在，这可以通过接受函数轻松实现。但是，我可能有多达 20 个类，每个类有 30-40 个可拖动/可拖放。因此，如果我为此使用“接受”功能，当我拿起一个可拖动的时，我的 chrome 会冻结，因为它会为屏幕上的每个 droppable 运行测试:(

如果我使用“范围”属性，这可以解决，因为它似乎使用了一些不同的方式。但是，当我使用范围时，我似乎无法实现“垃圾箱”的概念，因为它只能有一个范围！

有没有办法绕过这个问题？给可拖动对象多个范围，还是给垃圾箱多个范围？或者也许是我想不出的其他解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T02:33:48.253

每当您开始拖动 a`draggable`以确定哪些`droppable`s 有资格接收`draggable`.

```
var m = $.ui.ddmanager.droppables[t.options.scope] || [];
var type = event ? event.type : null; // workaround for #2317
var list = (t.currentItem || t.element).find(":data(droppable)").andSelf();

droppablesLoop: for (var i = 0; i < m.length; i++) {

    if(m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0],(t.currentItem || t.element)))) continue;   //No disabled and non-accepted
    for (var j=0; j < list.length; j++) { if(list[j] == m[i].element[0]) { m[i].proportions.height = 0; continue droppablesLoop; } }; //Filter out elements in the current dragged item
    m[i].visible = m[i].element.css("display") != "none"; if(!m[i].visible) continue;                                   //If the element is not visible, continue

    if(type == "mousedown") m[i]._activate.call(m[i], event); //Activate the droppable if used directly from draggables

    m[i].offset = m[i].element.offset();
    m[i].proportions = { width: m[i].element[0].offsetWidth, height: m[i].element[0].offsetHeight };

} 
```

正如您所看到的，代码并非微不足道，并且可以解释为什么每次开始拖动时都会看到性能缓慢。

需要注意的一点是，检查的第一件事`droppablesLoop`是是否`droppable`禁用。

因此，为了提高性能，您总是可以手动禁用适当的`droppable`小部件，这将使您快速跳出上面的代码块。您可以使用 上的`start`事件来执行此操作，该事件`draggable`将首先触发。

```
$('.draggable').draggable({
    start: function() {
        $('.invalid-droppable-elements').droppable('option', 'disabled', true);
    },
    stop: function() {
        $('.invalid-droppable-elements').droppable('option', 'disabled', false);
    }
}); 
```

这基本上使您自己实现`accept`/`scope`逻辑，性能影响取决于您的算法。不过实施起来应该没那么糟糕。插件之所以这么慢，是因为它们必须处理很多不同的情况。

jQuery UI 不支持向单个`draggable`/`droppable`元素添加多个范围，但您可以自己滚动该功能。

我在这里举了一个例子来展示这个 - [http://jsfiddle.net/tj_vantoll/TgQTP/1/](http://jsfiddle.net/tj_vantoll/TgQTP/1/)。

# php - php date_diff 以小时为单位

> ID：11066503
> 
> 赞同：0
> 
> 时间：2012-06-16T19:44:48.197
> 
> 标签：php, datetime, date

如何使下面的代码以小时为单位转换天数？

```
$timestart = date_create('02/11/2011' . $row->timestart); //$row->timestart returns time in 00:00:00 format
$timestop = date_create('02/11/2011' . $row->timestop); //$row->timestop returns time in 00:00:00 format

date_add($timestop, date_interval_create_from_date_string('2 days')); //add 2 days

$date_diff = date_diff($timestart, $timestop);

echo "Timespan: ";
echo $date_diff->format('%h hours');
echo "<br />"; 
```

我怎样才能得到`hours:minutes:seconds`过去的？我正在尝试保留该`date_diff`功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T20:00:28.297

date_diff() 的结果是[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)类的对象。这样的对象有一个非常有用的属性 - `$days`：它是开始日期和结束日期之间的总天数。此外，它以小时、分钟和秒为单位存储（作为其公共属性）差异。

所以，我想，你需要的只是从 $date_diff 变量中提取这些属性的值，然后添加`24*$days`到小时数。) 所有这些都可以包装成一个简单的函数：

```
function hms_date_diff(DateInterval $date_diff) {
  $total_days = $date_diff->days;
  $hours      = $date_diff->h;
  if ($total_days !== FALSE) {
    $hours += 24 * $total_days;
  }
  $minutes    = $date_diff->i;
  $seconds    = $date_diff->s;
  return sprintf('%02d:%02d:%02d', $hours, $minutes, $seconds);
} 
```

至于 DateDiff::format，[文档](http://www.php.net/manual/en/dateinterval.format.php)说...

> DateInterval::format() 方法不会重新计算时间字符串或日期段中的结转点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:01:49.550

返回的`DateInterval`对象，`date_diff`分别存储每个时间段，秒，分钟，小时，天，月和年。

由于差异为 2 天，因此 hours 属性为 0，这就是您得到的。

# html - 使用按钮单击 jquery 显示隐藏多行

> ID：11066510
> 
> 赞同：1
> 
> 时间：2012-06-16T19:45:59.340
> 
> 标签：html, jquery-plugins, jquery

我有一个像这样的html表

```
 <html>
    <head>
    </head>
    <body>
<div>
    <div>
    <table>
    <tr></tr> --visible row 1
    <tr></tr> --show\hide on click by visible row1
    <tr></tr> --show\hide on click by visible row1
    </table>
    </div>
    <div>
    <table>
    <tr></tr> --visible row 2
    <tr></tr> --show\hide on click by visible row2
    <tr></tr> --show\hide on click by visible row2
    <tr></tr> --show\hide on click by visible row2
    </table>
    </div>
    <div>
    <table>
    <tr></tr> --visible row 3
    <tr></tr> --show\hide on click by visible row3
    </table>
    </div>
<div>
    </body>
    </html> 
```

我如何通过单击相应的可见行来执行 tr 的显示\隐藏。我已经看到删除下一行的示例，但是我如何在可见行的父表中显示隐藏 tr 并隐藏所有不在第一个位置的子行。

如果有人可以发布 jquery 函数，我可以解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:14:21.183

不确定页面加载状态，以下将隐藏加载时每个表的第一行，并将点击处理程序应用于顶行

```
$('table').each(function(){
    $('tr:first', this) .click(function(){
        $(this).siblings().toggle()
    })
  $('tr:gt(0)', this).hide()
}) 
```

演示：http: [//jsfiddle.net/Rd8PU/](http://jsfiddle.net/Rd8PU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:02:36.180

为可见行分配一个类（class="clickable"）

那么这是你的功能

```
$('tr.clickable').click(function() {
    $(this).siblings().toggle();
}); 
```

希望这可以帮助

# javascript - jQuery 绑定一个不同的 this

> ID：11066511
> 
> 赞同：3
> 
> 时间：2012-06-16T19:46:04.207
> 
> 标签：javascript, jquery

我想将函数绑定到事件，但我想更改调用函数的上下文

```
function Foo(){

  t : "123",
  bar: function(){
    // I am here
    $('#selector').bind('click' this.foo);
  }
  ,
  foo: function(){
    //I want when to be able to use the current object here by this
    //this.t should be 123 and this.bar should call the above function
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T19:55:36.933

您可以使用[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)：

```
$('#selector').bind('click', $.proxy(this.foo,this) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:50:21.740

将对对象的引用复制到局部变量，并在函数中使用它：

```
var me = this;
$('#selector').bind('click' function() { me.foo(); }); 
```

如果您需要事件对象，请将其传递：

```
var me = this;
$('#selector').bind('click' function(e) { me.foo(e); }); 
```

# java - File.list() 的运行时间？

> ID：11066512
> 
> 赞同：0
> 
> 时间：2012-06-16T19:46:17.327
> 
> 标签：java, android

如果 File.list() 文件夹中有更多文件，它的运行时间是否更长？例如，如果我有 5 个文件与 200,000 个文件，我认为后者需要更长的时间才能返回？

谢谢

[http://developer.android.com/reference/java/io/File.html#list](http://developer.android.com/reference/java/io/File.html#list) ()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:52:55.607

File.list() 返回一个数组。当然，对于更大的数组，分配和填充它需要更多时间。此外，任何文件系统都会因目录中的对象数量而变慢。IOW，是的，随着目录 File.list() 中文件数量的增加，将需要更多时间。

# c# - StreamWriter.Flush(); 不会冲洗

> ID：11066513
> 
> 赞同：0
> 
> 时间：2012-06-16T19:46:35.970
> 
> 标签：c#, java, unity3d, flush

我正在尝试使用 C# 将 Unity 游戏链接到 Java 服务器

当 Java 服务器启动时，我可以发送数据的唯一方法是关闭 StreamWriter (OUT.Close();)，它实际上也关闭了连接。所以我只能发送一次数据。或者，每次我想发送消息时，我都必须重新连接到服务器。

当我只使用 Flush() 时，数据不会发送到服务器。代码：

```
NetworkStream STREAM = connection.GetStream();
StreamWriter OUT = new StreamWriter(STREAM);
OUT.Write(text);
OUT.Flush() 
```

这是我的阅读代码：

```
BufferedReader input = new BufferedReader(new InputStreamReader(client.getInputStream()));
String inputstring = input.readLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:07:08.580

您使用 编写不带行分隔符的文本`Write`并使用 读取`ReadLine`，因此这不匹配。在没有行分隔符的情况下，`ReadLine`读取到流的末尾，这解释了为什么需要关闭流。替换`Write`为`WriteLine`。

# django - Satchmo 运输模块订单信息

> ID：11066515
> 
> 赞同：1
> 
> 时间：2012-06-16T19:46:55.860
> 
> 标签：django, satchmo

在我的运输模块中，我正在尝试检查付款类型，如果付款类型不是 COD，则仅返回 true for valid()。基本上，如果通过 COD 付款并且不允许实际的运输方式，我只想提供本地交付或本地取货的运输选择。

我的问题是在运输模块的 valid() 方法中我不知道如何访问当前的订单信息。有没有办法将订单信息传递给**init**调用？或者有什么其他方法可以查到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:20:19.860

经过更多研究，我发现了一个信号

```
shipping.signals.shipping_choices_query 
```

这使我能够过滤显示的运输选项。

# c# - 弹出窗口的替代（相同的功能）

> ID：11066517
> 
> 赞同：0
> 
> 时间：2012-06-16T19:47:12.693
> 
> 标签：c#, web, popupwindow

我正在开发一个网站（C#、.Net 3.5 框架）并寻找替代方法`Popup window`以避免浏览器的弹出窗口阻止程序设置，或者换句话说，想要删除网站弹出窗口阻止程序的依赖关系。许多用户禁用它们是因为他们不喜欢它。

我正在为菜单和网站的通用界面使用母版页。

但是所有的要求都是一样的。

1.  重叠窗口
2.  `Common Interface/component`可用于显示其他 HTML/ASPX 页面的内容
3.  值可以是`passed and returned`Opener Window。

对于这种情况，哪个是最佳选择？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:51:21.507

你最好的选择是 javascript，也许是 jquery 的模态插件，但是......问题是，它也不是 100% 可靠的。许多人禁用 javascript 或者可能没有带有该 js 的浏览器（一些旧手机等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:51:13.530

我找到了一种方法，作为弹出窗口的替代方法。

**样式表**（Popup 相关的 CSS）
用途：用于弹出窗口的 CSS

```
.PopupOuterDiv
{
height:100%;
width:100%;
top:0px;
left:0px;
background-color:#000000;
filter:alpha(opacity=50);
-moz-opacity:.50;
opacity:.50;
z-index:50;
}

.PopupInnerDiv
{
position:fixed;
background-color:#ffffff;
z-index:50;
left:25%;
right:25%;
top:25%;
border-right: #0066ff 5px solid;
border-top: #0066ff 5px solid;
border-left: #0066ff 5px solid;
border-bottom: #0066ff 5px solid;
font-family: Arial;
}

.PopoupTitle
{
background-color: #0066ff;
height:25px;
color: white;
}

.PopoupButton
{
color: #ffffff;
width:20px;
border:white 1px solid;
background-color: #663300;
} 
```

**母版页**
目的：包含弹出窗口的通用代码

1\. 为外部褪色效果创建 1 个 Div
2\. 将 Div 创建为容器或弹出窗口
3\. 在容器 DIV 内创建 Iframe 并分配 URL。

```
 <div class="PopupOuterDiv" runat="server" id="PopupOuterDiv" style="display:none;"></div>
    <div class="PopupInnerDiv" runat="server" id="PopupInnerDiv" style="display:none;">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr class="PopoupTitle">
            <td id="PopoupTitle"></td>
            <td align="right">
                <input class="PopoupButton" type="Button" value="X" onclick="closePopup();" />
            </td>
        </tr>
        <tr style="height:8px;" ><td></td></tr>        
        <tr>
            <td colspan="2">&nbsp;
            <iframe id="PopupIframe" src="" runat="server" height="300px" width="480px"></iframe> 
            </td>
        </tr>
    </table>
    </div> 
```

**JavaScript**打开和关闭弹出窗口

```
 function closePopup()
  {
    document.getElementById('<%=PopupOuterDiv.ClientID%>').style.display = 'none';
    document.getElementById('<%=PopupInnerDiv.ClientID%>').style.display = 'none';
  }

  function openPopup(PopupTitle, PopupURL)
  {
    document.getElementById('<%=PopupOuterDiv.ClientID%>').style.display = '';
    document.getElementById('<%=PopupInnerDiv.ClientID%>').style.display = '';
    document.getElementById('PopoupTitle').innerText = PopupTitle;    
    document.getElementById('<%=PopupIframe.ClientID%>').src = PopupURL;    
  } 
```

**内容页**

从任何内容页面调用弹出窗口。

```
openPopup('My Custom Popup', '../aspx/User.aspx'); 
```

# c - C: 读取内核模块中文件指针的 filp->private_data

> ID：11066521
> 
> 赞同：2
> 
> 时间：2012-06-16T19:47:38.870
> 
> 标签：c, kernel-module, file-pointer

我想知道是否可以读取文件指针的 private_data？还是真的“私人”？！

我在内核模块中！

```
struct file *intercepted_fp;

intercepted_fp = filp_open("/dev/snd/pcmC0D0p_bak", O_RDWR, (S_IRWXU | S_IRWXG | S_IRWXO));

if (intercepted_fp == NULL) {
    LOGI("Cannot open intercepted device!");
    return -ENODEV;
}

mm_segment_t old_fs = get_fs();
set_fs(get_ds());

LOGI("private data: %p", intercepted_fp->private_data); // -> prints "private data: ffffffff"
LOGI("buffer: %d", ((struct snd_pcm_file*) intercepted_fp->private_data)->substream->runtime->buffer_size); // ->  Unable to handle kernel paging request at virtual address ffffffff
set_fs(old_fs); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T01:36:36.413

当然可以。它只是`struct file`.

它旨在从文件系统接口传递只有特定设备驱动程序知道的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T08:30:28.713

private_data 指针是一个有用的资源，用于在系统调用中保存模块的状态信息。open 系统调用在调用驱动程序的 open 方法之前将此指针设置为 NULL。内核模块代码需要分配内存并释放它。所以**内存是在内核空间中分配的**——从用户空间不太容易访问，但从内核空间很容易访问。**您可以访问它，但更改它会干扰驱动程序的功能。**您可以在一本好书[Linux Device Drivers, 3rd Edition](http://www.makelinux.net/ldd3/) [(archive)](https://web.archive.org/web/20170908030552/http://www.makelinux.net/ldd3/)[中找到](https://web.archive.org/web/20170527105025/http://www.makelinux.net/ldd3/chp-3-sect-3)[有关 private_data 指针](http://www.makelinux.net/ldd3/chp-3-sect-3#chp-3-ITERM-4510)的更多信息。

# qt - 在 QtQuick 中获得我的职位

> ID：11066524
> 
> 赞同：0
> 
> 时间：2012-06-16T19:48:21.427
> 
> 标签：qt, geolocation, nokia, qt-mobility

我需要在诺基亚 QT 中获取我的位置。

我有以下代码：

```
Rectangle {
            id: page
            width: 350
            height: 350
            PositionSource {
                id: positionSource
                updateInterval: 1000
                active: true
            onPositionChanged: {
                console.log("latitude : "+positionSource.position.coordinate.latitude);
                console.log("longitude :"+positionSource.position.coordinate.longitude);
            }
        }
} 
```

在项目文件中，我设置了功能和移动性配置：

```
symbian:
{
    TARGET.CAPABILITY +=  Location
    CONFIG += mobility
    MOBILITY +=location
} 
```

此代码在模拟器上运行良好，但在真正的手机（诺基亚 5530 XpressMusic）上它不起作用，我收到以下消息：

```
[Qt Message] QGeoPositionInfoSource::createDefaultSource() requires the Symbian Location capability to succeed on the Symbian platform 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:45:58.743

Other than some certification problems, that `CAPABILITY+=Location` line is sufficient.

However, after adding that, you must ensure that qmake is run at least once, so all your build scripts and metafiles are refreshed. If you are still getting that error after adding that line, just run qmake either from command line, or from project context manu in qtcreator

# opengl - 如何将3个角度转换为矢量

> ID：11066525
> 
> 赞同：0
> 
> 时间：2012-06-16T19:48:24.047
> 
> 标签：opengl

> **可能重复：**
> [如何将欧拉角转换为方向矢量？](https://stackoverflow.com/questions/1568568/how-to-convert-euler-angles-to-directional-vector)

我正在使用 OpenGL 来旋转砖块。积木模拟具有加速度计的手机。我使用的初始向量是 (0.0, 0.0,-1.0)

```
glRotatef(angle.x, 1.0, 0.0, 0.0);
glRotatef(angle.y, 0.0, 1.0, 0.0);
glRotatef(angle.z, 0.0, 0.0, 1.0); 
```

如何从上面的角度获得加速度计的矢量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:23:10.753

您不必将初始向量乘以您提到的 3 个矩阵吗？只是复制 OpenGL 的方式。

这不是最有效的，但这会给出结果向量。我错过了什么吗？

# javascript - 如果页面大于 div，则仅居中 div

> ID：11066526
> 
> 赞同：0
> 
> 时间：2012-06-16T19:48:28.433
> 
> 标签：javascript, html, css

所以我在这里使用这种风格将 div 作为背景居中：

```
#example{
    z-index:-1; 
    width: 950px; 
    height:100%; 
    position:fixed; 
    background-color:#F0F0F0;
    background:url(images/main_background_sidebar.png) repeat-y top center;
    top: 0px;
    left: 50%;
    margin-left: -475px;
} 
```

效果很好，它保持居中，但如果页面宽度低于 950 像素，有没有办法阻止它保持居中？例如：如果浏览器窗口只有 800px 宽，则背景图像的左侧会卡在屏幕的左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:57:46.413

如果您对使用 CSS3 没问题，那么您可以应用[`@media`](http://reference.sitepoint.com/css/mediaqueries)规则。未经检验的可能性：

```
#example {
   /* Don't center it. */
}
@media only screen and (min-width: 950px) and (min-device-width: 950px)  {
  #example {
   /* It's 950px or more! Let's center it! */
  }
} 
```

只需阅读并玩它。

**更新：我该如何使用它？我把它放在哪里，就在我的`style.css`?**

> 媒体查询可用于标签、XML 处理指令、@import at-rule 和 @media at-rule。

# ios - IOS重启主线程

> ID：11066528
> 
> 赞同：0
> 
> 时间：2012-06-16T19:48:51.427
> 
> 标签：ios, multithreading

我有一个应用程序/游戏，我正在向其中添加重新启动按钮。对我来说最简单的事情是，如果有一些代码可以释放由运行的应用程序创建的所有对象并重新启动主线程（其中有很多包括可能在按下重置按钮时运行的计时器）。

有没有这样的代码？

我知道可以在辅助线程中运行应用程序并刷新它，但我没有任何线程经验。

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:54:46.580

我唯一知道的是你可以强行杀死你的应用程序，但要做好准备，因为它会被苹果拒绝，即使你成功地杀死了应用程序，你也无法重新启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:54:17.523

无法*重新启动主线程*或类似的东西。您可能正在考虑错误的设计。从面向对象的角度考虑：您需要做的是**恢复一些**跟踪应用程序状态的对象的状态。假设您有一个`Game`具有以下属性的类：

*   等级
*   积分

您要做的就是将它们恢复为 0（或任何初始值）。

希望你明白这个想法；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T19:54:19.570

没有简单的方法可以做到这一点，如果您想重新启动游戏或关卡，您将不得不重新创建关卡，通过重新分配关卡变量重新绘制正确的组件等......，您将无法重新启动游戏或通过重新启动线程来升级，

# ajax - ExtJS store.loadData() 不加载 JSON 数据

> ID：11066529
> 
> 赞同：1
> 
> 时间：2012-06-16T19:48:56.933
> 
> 标签：ajax, json, grid, extjs4

我正在尝试加载由 AJAX 请求回复到网格的 JSON 数据。我的店铺定义：

```
Ext.define('Report.store.CustomerDataStore', {
    extend: 'Ext.data.Store',
    requires: [
        'Report.model.Customer'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: false,
            storeId: 'CustomerDataStore',
            model: 'Report.model.Customer',
            proxy: {
                type: 'ajax',
                url: '',
                reader: {
                    type: 'json',
                    root: 'data',
                    record: 'fields'
                }
            }
        }, cfg)]);
    }
}); 
```

我的应用程序中有一个按钮，定义如下：

```
xtype: 'button',
handler: function(button, event) {
    var queryform = this.up('form').getForm();
    var me = this;
    if(queryform.isValid())
    {
        Ext.Ajax.request({
            url: 'customers/',    // where you wanna post
            success: function(response) {
                var mystore = Ext.data.StoreManager.lookup('CustomerDataStore');
                var myData = Ext.JSON.decode(response.responseText);
                console.log(myData.toSource());
                mystore.loadData(myData);
            },
            jsonData: Ext.JSON.encode(queryform.getValues())
        });
    }
}, 
```

问题是我的网格没有显示回复的数据！我确定我回复的 JSON 格式没问题。我已经用 json 文件检查了它。还`myData.toSource()`返回我想要的 JSON 格式。我很困惑我做错了什么？

你能帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T07:00:43.940

我找到了解决方案，我不得不使用 loadRawData() 函数而不是 loadData()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T01:59:58.903

`loadData()`加载模型即记录，并且不解析内部的 JSON 数据。您需要在代理阅读器中指定您的 JSON 格式，然后当您调用时 store 会自动进行 Ajax 调用`store.load()`

# perl - 如何测试错误消息，包括 $! 没有语言环境问题？

> ID：11066533
> 
> 赞同：9
> 
> 时间：2012-06-16T19:50:08.150
> 
> 标签：perl, unit-testing, localization, internationalization, error-handling

在我的模块中，我有以下代码：

```
croak("unable to parse file: $!"); 
```

然后，在我的测试中，我想检查当我尝试解析一个不存在的文件时是否收到了正确的错误消息：

```
like(
    exception { HTML::Tree->new_from_file( "t/non_existent.html" ) },
    qr!^unable to parse file: No such file !,
    "opening missing file failed"
); 
```

只要测试在英语语言环境中运行，它就可以正常工作。但是，如果您在德语语言环境中运行测试，则会返回错误消息`unable to parse file: Datei oder Verzeichnis nicht gefunden`并且测试失败。其他地区也有类似的问题。

我不敢相信这是第一次出现这种情况，但我在 CPAN 上找不到任何可以解决此问题的模块。人们只是从不测试`$!`错误消息的一部分吗？有没有比将测试更改为仅检查更好的解决方案`qr!^unable to parse file: !`？

注意：这是[HTML-Tree 中的 RT#77823](https://rt.cpan.org/Ticket/Display.html?id=77823)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T20:36:13.430

> 有没有比将测试更改为仅检查 qr!^unable to parse file: 更好的解决方案：！？

[`$!`](http://perldoc.perl.org/perlvar.html)是一个对偶变量，即它具有字符串和数值。您可以在错误消息中使用数值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T20:42:42.657

您可以使用`%!`符号来测试错误，如

```
unless (open my $fh, "<", "/does/not/exist") {
  die "$0: unexpected errno " . ($! + 0)
    unless $!{ENOENT};
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T15:12:16.670

我解决这个问题的方法是把

```
BEGIN { $ENV{LANG} = $ENV{LC_MESSAGES} = $ENV{LC_ALL} = "C" } 
```

在任何涉及此类测试的单元测试脚本中。这样，在该测试期间，语言环境设置为 C，并且消息将可靠地以纯 C 语言环境出现，而不是被本地化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T07:50:33.917

1.  模块 M 的测试不应**检查**M 不负责的功能。
2.  由于文件不存在而失败的代码不应发出**“**无法解析（文件规范）”，而是“无法找到（文件规范）”。

# javascript - HTML5 历史、后退按钮和外部链接

> ID：11066535
> 
> 赞同：0
> 
> 时间：2012-06-16T19:50:38.480
> 
> 标签：javascript, ajax, html, external, history

我有一个 HTML5 应用程序，它操纵浏览器历史记录以显示 Ajax 调用的正确 URL。这很好用，但是当我的应用程序具有指向外部站点的超链接时会出现问题，例如[http://www.google.com](http://www.google.com)。发生这种情况时，历史记录如下所示：

我的应用页面 A -> 我的应用页面 B -> Google

当用户点击一次后退按钮时，一切都很好。显示了我的应用页面 B。

但是当用户第二次点击后退按钮时，URL 会改变，但页面不会改变。我的应用程序无法进行正确的 Ajax 调用来显示我的应用程序页面 A 的状态，因为从未调用过 onpopstate 处理程序。这是因为当浏览器返回“我的应用程序页面 B”时，处理程序未初始化（该返回事件没有触发任何事件，因此我无法重新初始化处理程序。）

这种体验适用于 Chrome，但我没有理由相信它是 Chrome 特有的。有没有办法解决这个问题？

我知道像 Gmail 这样的应用程序会在新窗口中打开所有外部超链接。但是我的应用程序的要求不允许我这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:18:06.073

@Pumbaa80 提供的链接让我走上了正确答案的轨道。

如果你放在`<body onunload="">`你的页面上，那么就会破坏 Chrome 和其他浏览器上的 bfcache。这意味着当您单击返回按钮从 Google 返回到“我的应用程序页面 B”时，所有页面状态 JavaScript 事件都会触发。

从谷歌回来后，没有办法让 onpopstate 在我的应用页面 B 上被调用。（这不合逻辑，因为该事件仅在您点击后退按钮的页面上触发。）

另一种方法是在 My App Page B 加载时执行逻辑。通过如上所述破坏 bfcache，jQuery dom ready 将触发。通过在 jQuery dom 就绪回调中运行来自 onpopstate 的类似代码，我可以访问存储在 History 对象中的数据，从而在从外部页面返回后重置我的 HTML5 Web 应用程序的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:54:31.363

我认为您需要使用哈希标签来保存页面的状态，我看不出有什么办法。过去我使用[这个 jQuery 插件](http://benalman.com/projects/jquery-bbq-plugin/)取得了巨大的成功，它的名字非常流行，名为[BBQ（Back Button & Query library）](http://benalman.com/projects/jquery-bbq-plugin/)。这将允许您的页面根据 URL 中的哈希标签执行操作。

# javascript - Backbone.js 和 jquery 绑定点击事件到一个视图函数

> ID：11066543
> 
> 赞同：0
> 
> 时间：2012-06-16T19:51:46.217
> 
> 标签：javascript, backbone.js

我正在使用backbone.js 这是我的场景

可以说我有一个名为`FooView`

```
class FooView extends Backbone.view

  initialize:->
    $('#manage-foo').bind('click', @render)

  render: ->
    //whatever I want to render 
```

我想绑定对元素#manage-foo 的单击以呈现我的视图或调用我的视图 FooView 的函数，但我不想松散调用函数的上下文，应该调用函数 render 并`this`指向FooView 而不是元素我如何实现这一点。?

我的情况是我在 pageLoad 上创建了 FooView 并且我必须在单击给定元素时显示它

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:07:47.537

不确定这是否能 100% 回答您的问题，但可以`_.bindAll(this, 'render');`解决上下文丢失的问题。您可以添加所有需要执行此操作的方法，因此您可以`_.bindAll(this, 'render,click');`添加单击方法。

[http://arturalib.com/hello-backbonejs/docs/1.html](http://arturadib.com/hello-backbonejs/docs/1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:05:00.547

那里的 bind 方法用于将方法绑定到上下文，而不是注册事件处理程序。

你应该尝试的是：

```
class FooView extends Backbone.View
  events:
    "click #manage-foo": "render"  
     # this registers @render as the event handler for clicking on the #manage-foo element in the view

  render: ->
    # your rendering code 
```

感谢 Trevor（在评论中）指出您不再需要使用 _.bindAll 来绑定事件对象中定义的事件的上下文。（更新了代码以反映这一点）

在 events 对象中定义的任何事件处理程序都将在 FooView 的上下文中自动执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T20:14:31.407

如果`#manage-foo`是你的孩子，`FooView`那么`@el`你可以使用 Backbone 的事件系统：

```
class FooView extends Backbone.View
  events:
    'click #manage-foo': 'render'
  #... 
```

如果`#manage-foo`不在视图的元素内，`events`则将无法工作，因为事件处理基于 jQuery [`delegate`](http://api.jquery.com/delegate/)，并且`delegate`调用附加到视图的`@el`. 在这种情况下，您应该`render`使用[粗箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)进行定义，以确保它`this`在调用时始终具有正确性：

```
render: =>
  #... 
```

您还需要`remove`在您的视图中避免泄漏对您的视图的引用：

```
remove: ->
  $('#manage-foo').off('click', @render)
  Backbone.View::remove.apply(@) 
```

# java - 以插入频率排序的方式打印字符串的程序

> ID：11066545
> 
> 赞同：2
> 
> 时间：2012-06-16T19:51:50.053
> 
> 标签：java, list, sorting, collections

假设我已经插入了
*asd dsa asd dsa kk km ka km kk*
因此我想将 O/P 打印为：
**asd:2
dsa:2
km:2
kk:2
ka:1**

在这里，我提供了我已经实现的代码

```
 import java.util.*;
class Subex1
{
    public static void main(String[] args) 
    {
        try{
        List<String> l=new ArrayList<String>();
        for(String s:args)
        {
            l.add(s);
        }
        Set<String> unique = new HashSet<String>(l);
        for (String key : unique) {
            int count=Collections.frequency(l, key);
            System.out.println(key + ": " +count );
        }
    }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
} 
```

但是这里的 O/P 是这样的
**asd: 2
ka: 1
dsa: 2
kk: 2
km: 2**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:01:41.157

使用比较器进行排序`Collections.sort(originalSourceUniqueSet, new MyComparator());`

并实现比较器

```
class MyComparator implements Comparator<String>{
 List<String> originalSource;
 public MyComparator(List<String> originalSource){
  this.originalSource=originalSource;
 }
 @Override
 public int compare(String str1, String str2){
    int result = Collections.frequency(originalSource, str1) -  Collections.frequency(originalSource, str2);
    //if same frequency then sort based on natural ordering
    if(result == 0 ){
        return str1.compareTo(str2);
    }
    return result;
 }
} 
```

# recursion - 如何在纸上分析这个递归函数？

> ID：11066547
> 
> 赞同：1
> 
> 时间：2012-06-16T19:52:06.557
> 
> 标签：recursion

```
void recursive(int n) {
  if (n<=0) {
  return;
  }
printf("%d ",n);
recursive(n-2);
recursive(n-2);
printf("%d ",n);
} 
```

所以我的问题是：除了笔和纸之外，我如何在没有任何工具的情况下确定这段代码的输出（如果我们最初假设 n=3）？是否有任何技术可以标记递归调用的不同级别，因为我一直迷失在试图绕开这个问题。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:59:37.690

> 是否有任何技术可以标记递归调用的不同级别

缩进。方格纸使这更容易。将每行中的前*k*个方块留空，表示您处于递归深度*k*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:00:00.360

我会试着把它想象成一棵电话树。在这种`int n`通过值传递的特殊情况下，您可以复制第一个递归调用的后代。

什么时候`n=3`

首先 n 将被打印为等于`3` 然后递归将被调用`n=1`所以然后它将打印`1` 然后递归将被调用`n=-1`。这将触发直接返回语句，导致没有输出。最后输出原始数字

对于每个原始递归调用，上述情况将发生两次，从而产生以下输出。

```
3
1
1
1
1
3 
```

# java - 计算字符串在文件中出现的次数

> ID：11066552
> 
> 赞同：0
> 
> 时间：2012-06-16T19:52:19.383
> 
> 标签：java, string, filereader

我试图弄清楚我将如何读取文件，然后计算某个字符串出现的次数。

这是我的文件的样子，它是一个 .txt：

```
 Test
    Test
    Test
    Test 
```

我希望该方法然后返回它在文件中的次数。关于我如何去做这件事的任何想法？我主要需要第一部分的帮助。因此，如果我正在搜索字符串“Test”，我希望它返回 4。

提前致谢！希望我提供了足够的信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:59:41.830

将此方法添加到您的类中，将您的 FileInputStream 传递给它，它应该返回文件中的单词数。请记住，这是区分大小写的。

```
public int countWord(String word, FileInputStream fis) {
BufferedReader in = new BufferedReader(new InputStreamReader(fis));
String readLine = "";
int count = 0;
while((readLine = in.readLine()) != null) {
String words = readLine.split(" ");
for(String s : words) {
if(s.equals(word)) count++;
}
return count;
} 
```

现在刚刚写了，它未经测试，所以让我知道它是否有效。另外，如果这是一个家庭作业问题，请确保您了解我做了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:00:56.017

这个给你：

```
public int countStringInFile(String stringToLookFor, String fileName){
  int count = 0;
  try{
    FileInputStream fstream = new FileInputStream(fileName);
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    while ((strLine = br.readLine()) != null)   {
      int startIndex = strLine.indexOf(stringToLookFor);
      while (startIndex != -1) {
        count++;
        startIndex = base.indexOf(stringToLookFor, 
                                  startIndex +stringToLookFor.length());
      }
    }
    in.close();
  }catch (Exception e){//Catch exception if any
    System.err.println("Error: " + e.getMessage());
  }
  return count;
} 
```

用法：`int count = countStringInFile("SomeWordToLookFor", "FileName");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:06:38.227

如果您必须将每个文件读入一个字符串，我建议您查看 String 方法拆分。

给它字符串代码'Test'，它将返回一个字符串类型的数组 - 计算每行的元素数。把它们加起来得到你的总发生率。

```
import java.io.*;

public class StringCount {
    public static void main(String args[]) throws Exception{

        String testString = "Test";
        String filePath = "Test.txt";
        String strLine;
        int numRead=0;

        try {
            FileInputStream fstream = new FileInputStream(filePath);
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));

            while ((strLine = br.readLine()) != null)   {
                strLine = strLine + " ";
                String [] strArry = strLine.split(testString);

                if (strArry.length > 1) {
                     numRead = numRead + strArry.length - 1;
                }
                else {
                     if (strLine == testString) {
                         numRead++;
                     }
                }
            }

            in.close();

            System.out.println(testString + " was found " + numRead + " times.");

        }catch (Exception e){
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T18:22:02.420

我会这样做：

1.  打开并逐行读取文件，
2.  检查一行包含给定单词的频率...
3.  为此增加一个全球计数器..

* * *

```
public static void main(String[] args) throws IOException {
    BufferedReader in = new BufferedReader(new FileReader("Test.txt"));
    Scanner sc = new Scanner(System.in);
    System.out.print("Enter the subtring to look for: ");
    String word = sc.next();
    String line = in.readLine();
    int count = 0;
    do {
    count += (line.length() - line.replace(word, "").length()) / word.length();
    line = in.readLine();
    } while (line != null);
    System.out.print("There are " + count + " occurrences of " + word + " in ");
} 
```

# java - 最佳实践：如何判断一个集合/集合/让是否是 Guava ImmutableSet/Immutable 映射？

> ID：11066553
> 
> 赞同：3
> 
> 时间：2012-06-16T19:52:20.723
> 
> 标签：java, guava

我的代码中有一个错误，我正在尝试修改一个实际上是从客户端程序/程序员传入的 Guava ImmutableList 的列表。

对此进行测试的最佳方法是什么，而不是在 .add() 失败时等待异常？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T21:54:18.183

> 对此进行测试的最佳方法是什么，而不是在 .add() 失败时等待异常？

如果您不*知道*返回的列表是否可变，则无论如何都应该将其复制到可变集合中。如果返回的列表是另一个列表`ArrayList`，则复制的成本是最低的——它会以极快的速度减少`System.arraycopy`。

（也就是说，客户端库有时返回可修改列表，有时返回不可修改列表本身就是一种邪恶行为。）

如果您必须在运行时检查，请使用`instanceof ImmutableMap`or`ImmutableCollection`或任何合适的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T20:00:04.023

对于特定的 Guava，您可以检查实例是否为 com.google.common.collect.ImmutableCollection。

```
if (list instanceof com.google.common.collect.ImmutableCollection) {
   // is immutable
} 
```

对于不可变地图，您需要检查实例是否为`com.google.common.collect.ImmutableMap`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T19:59:35.320

检查列表是否是 ImmutableCollection 子类型之一很容易：

```
if (list instanceof ImmutableCollection) {
    // do whatever you want to do if the list is a Guava immutable collection/set/list/multiset
} 
```

但是，这并没有为您提供确定列表是否不可变的通用解决方案（可能存在用户实现的不可变列表或从 Collections.unmodifiableList() 获得的不可修改列表）。

所以如果你想要一个通用的解决方案，你仍然必须捕获异常 list.add() 方法可能会抛出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T10:26:17.247

' `instanceof`' 绝对没问题。

But if possible I would recommend use `ImmutableList` in method signature instead of `List`. Because `ImmutableList` is-a `List` in syntax, but actually `ImmutableList` throws `UnsupportedOperationException` when `addXXX()`, `removeXXX()`, `clear()` is called.

# android - 在 android 项目之外构建 sqlite 数据库？

> ID：11066554
> 
> 赞同：6
> 
> 时间：2012-06-16T19:52:23.267
> 
> 标签：android

我想创建一个生成 sqlite 数据库的项目，最终将由 android 应用程序使用。我想将此项目创建为标准 java 应用程序，因此我可以将其连接到构建脚本等。这样做的好方法是什么，以便我输出的 sqlite 数据库与 android sqlite 的方式一致类期望有它？

我可以将这个 util 项目创建为一个 android 项目，然后我可以访问所有的 sqlite 类，但是输出的 sqlite 文件将存在于一个模拟器实例上，对吧？每当我想运行该工具时，我都必须启动一个模拟器等，呃。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T01:39:04.287

正如其他人所建议的那样，我不会为它构建一个项目，我会在那里找到一个现有的实用程序并以这种方式创建数据库。我使用[SQLite 专家](http://www.sqliteexpert.com/)。

尽管 Seva 说了什么，但**您**必须做一些事情才能使其对 android*可用*。它在任何状态下都是可读的，但是如果您希望框架能够按预期使用它（填充列表视图和其他小部件），它必须具有某些东西。

1）数据库必须包含一个名为“android_metadata”的表
2）该表必须有“locale”列
3）表中应该有一个值为“en_US”的记录
4）每个表需要的主键被称为“_id”（这是为了让 Android 知道在哪里绑定表的 id 字段）

然后你把数据库放在你的资产文件夹中，并在启动时将它复制到你的应用程序数据目录中。

这个过程的一个很好的链接是[here](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:59:01.757

为什么要创建一个单独的 Java 项目来创建 SQLite 数据库？SQLite 上有图形外壳。我个人喜欢[SQLiteStudio](http://sqlitestudio.one.pl/)。

Android 访问它们的方式没有什么特别之处——SQLite 就是 SQLite，数据库格式在每个平台上都是相同的。创建一个新的数据库文件，在其中创建一些表，插入一些数据，然后将其放入 Android 项目中并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T19:57:05.737

可以将您创建为其他 libray 项目，并可以将其附加到您的项目中...根据您的需要，libaray 项目可能是一个 android 或简单的 java 项目...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T04:21:04.020

注意：使用 SDK 自带的 sqlite 版本——稍作修改。如果使用现成的 sqlite3 命令行工具，它生成的数据库与 Android 不兼容。

# java - 用java编写泛型函数

> ID：11066555
> 
> 赞同：3
> 
> 时间：2012-06-16T19:52:38.853
> 
> 标签：java, generics

我想编写一个函数，它会返回我传递给它的指定类型的向量。例如：

```
// Here getNewVector(<ClassType>) should return me an integer Vector.
Vector<Integer> myIntVector = getNewVector(Integer.class);
//should get a String vector in this case and so on.
Vector<String> myStringVector = getNewVector(String.class) ; 
```

我想以`getVector(Class classType)`这样的方式实现，以便返回该特定类类型的新向量。我们如何在不使用反射和不将类名作为字符串传递的情况下实现它（我只想传递类类型，就像我在上面的示例中提到的那样。）

实际上，我想要一个有点像这样的函数 getVector() ..

```
Vector<T> getVector(T t) {
    return new Vector<t>();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T19:55:03.937

查看[通用方法的 Java 教程](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)。这是做你想做的事情的一种方法：

```
public static <T> Vector<T> getVector(Class<T> clazz) {
  return new Vector<T>()
}

public static <T> Vector<T> getVector(T t) {
  Vector<T> vector = new Vector<T>();
  vector.add(t);
  return vector;
} 
```

我假设你不会只是想扔掉`t`你传入的东西`getVector(T t)`，所以我把它卡在了`Vector`.

从理论上讲，如果您想要的只是类型机制，则不需要将任何内容传递给该方法：

```
public static <T> Vector<T> getVector() {
  return new Vector<T>();
}

//Usage
Vector<Integer> vector = getVector(); 
```

`Vector<Integer>`Java 可以从声明中的泛型类型中找出您希望将其键入为 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T19:55:19.660

```
public <T> Vector<T> getNewVector(Class<T> type) {
    return new Vector<T>();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T21:58:01.427

为什么还要在这里写一个函数呢？

```
Vector<Integer> myIntVector = new Vector<Integer>(); 
```

或者，更好的是，如果您使用的是 Java 7，

```
Vector<Integer> myIntVector = new Vector<>(); 
```

（当然，具有不同元素类型的向量类型在运行时没有实际差异。）

# javascript - 使用构造函数进行原型设计时如何访问实例？

> ID：11066556
> 
> 赞同：1
> 
> 时间：2012-06-16T19:52:47.307
> 
> 标签：javascript, oop, constructor, prototype

我正在通过该`prototype`方法扩展构造函数类的功能，但我无法弄清楚如何访问即将成为构造函数类的实例。

假设我们有以下类：

```
Bla = function()
{
    this.a = 5;
} 
```

很简单。现在，我将用一个非常简单的方法来扩展它......

`Bla.prototype.f = function(){console.log("Abdf.")};`

`new Bla().f(); //Logs "Abdf as expected."`

但是，如果我想访问`a`属性 (5) 怎么办？假设我正在尝试像这样扩展构造函数类：

`Bla.prototype.f2 = function(b){return b * here_are_the_problems.a};`

显然 using`this`指的是别的东西。我应该改用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:58:59.817

用于`this`引用调用方法的对象...

```
console.log(this.a); 
```

有几种方法`this`可以设置 的值。一是如果函数作为对象的方法被调用，一般是指调用函数的对象。

```
Bla = function()
{
    this.a = 5;
}

Bla.prototype.f = function(){console.log(this.a)};

var bla = new Bla();

bla.f(); //Logs 5 
```

所以你可以看到，由于`f`被作为变量`Bla`引用的实例的方法调用，所以in的值将被设置为引用同一个对象。`bla``this``f`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:59:54.140

使用`this`关键字访问任何实例属性或方法。 `this`代表实例。由于`a`是实例属性，`prototype`方法是实例方法，因此可以在`prototype`.

```
Bla = function() {
    this.a = 5;
};
Bla.prototype.foo = function () {
   console.log( this.a );
}

var x = new Bla;
x.foo(); // logs 5
​ 
```

但是，如果我们直接向 Bla 添加一个方法...

```
Bla.bar = function () {
   console.log( this.a ); // ERRORRRRR
} 
```

因为 bar 不是实例 ( `prototype`) 方法。在这种情况下，它是`static method`of`Bla`并且没有实例并且`this`引用 function `Bla.bar`，在这种情况下没有属性`a`

# iphone - 尝试调整 UITableView 的大小会在正确显示之前使屏幕出现一秒钟的故障

> ID：11066562
> 
> 赞同：0
> 
> 时间：2012-06-16T19:53:34.313
> 
> 标签：iphone, ios, uitableview, uiview, uinavigationbar

我在调整 UITableView 的大小以适应 UINavigationBar 和 UITabBar 之间遇到了很多麻烦。我的实现涉及在 viewDidAppear() 中创建自定义框架，然后将 UITableView 设置为适当的框架。尽管此解决方案效果很好，但效果并不理想 - 每次加载视图时屏幕都会有一点痉挛。我认为这个问题是由于 UITableViewb 变成全屏的，因为它想要，然后我在用户眼前调整它的大小。但是，我不知道如何实现我想要的：调整 UITableView 的大小以正确适应屏幕。这是我在 viewDidAppear() 中的实现：

```
- (void)viewDidAppear:(BOOL)animated{
    [self.view.superview addSubview:navigationBar];

    CGRect frame = self.view.frame;
    frame.size.height = self.view.frame.size.height - navigationBar.frame.size.height;
    frame.origin.y = self.view.frame.origin.y + 44;
    self.tableView.frame = frame;

    [super viewDidAppear:animated];
} 
```

录制在视频上时很难看到效果，而且在 GIF 格式中可能很糟糕，但这是我录制[的一个小 GIF](http://gifninja.com/animatedgifs/107243/uitableview-glitch.gif)动画被诱导的闪光。

如果我在 viewWillAppear() 中使用相同的代码，结果如下： ![结果](../Images/d4982238c7b1d38f4efe60766683de58.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T22:37:58.483

我遇到了这个问题，原来这是视图上的自动布局问题。在 Interface Builder 中，切换到 File Inspector 属性视图并确保未选中“Use Autolayout”。

在此之后，您可以在 viewWillAppear 方法中一致地调整 UITableView 的大小，而不会出现故障。

```
- (void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   CGRect frame = [tableView frame];    
   frame.size.height = 365; 
   self.tableView.frame = frame;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:57:45.917

为什么要使用`viewDidAppear`，当这个方法被调用时，你的视图在屏幕上是可见的，那么你当然会收到一个小故障。

您要做的就是将方法从 更改`viewDidAppear`为`viewWillAppear`。

# c++ - 重载括号运算符 [] 以获取和设置

> ID：11066564
> 
> 赞同：65
> 
> 时间：2012-06-16T19:54:10.147
> 
> 标签：c++, indexing, overloading, square-bracket

我有以下课程：

```
class risc { // singleton
    protected:
        static unsigned long registers[8];

    public:
        unsigned long operator [](int i)
        {
            return registers[i];
        }
}; 
```

如您所见，我已经为“获取”实现了方括号运算符。
现在我想实现它进行设置，即：`risc[1] = 2`.

如何做呢？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-16T19:57:14.830

试试这个：

```
class risc { // singleton
protected:
    static unsigned long registers[8];

public:
    unsigned long operator [](int i) const    {return registers[i];}
    unsigned long & operator [](int i) {return registers[i];}
}; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-16T19:56:33.153

您需要从您返回一个引用，`operator[]`以便该类的用户使用它来设置值。所以函数签名是`unsigned long& operator [](int i)`.

# cakephp - 在哪里可以找到 cake bake 命令的完整参考？

> ID：11066571
> 
> 赞同：-2
> 
> 时间：2012-06-16T19:54:40.647
> 
> 标签：cakephp, command, cakephp-1.3, acl

有没有学习蛋糕烘焙命令的网址。
例如我想在命令中学习acl，我在命令中写

> 蛋糕acl帮助

但这并不完整。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T20:10:43.743

您可以从以下资源中找到帮助

[CakePhp 备忘单](http://cheat.errtheblog.com/s/cakephp/)

[使用 Bake 生成代码](http://book.cakephp.org/1.3/view/1522/Code-Generation-with-Bake)

[控制台和外壳](http://book.cakephp.org/2.0/en/console-and-shells.html)

[用 CakePhp 烘焙](http://www.jamesfairhurst.co.uk/posts/view/baking_with_cakephp)

# php - 上传脚本返回空白数据

> ID：11066575
> 
> 赞同：1
> 
> 时间：2012-06-16T19:54:50.753
> 
> 标签：php, jquery, uploadify, rapidshare

我在我的网站上设置了 Uploadify jQuery 插件来管理文件上传。在`onUploadSuccess`活动中，我有以下代码：

```
'onUploadSuccess' : function(file, data, response) {
    console.log("Upload complete for file " + file.name + ". Script returned: " + data);
} 
```

这是为了向我展示上传脚本吐出的任何内容。现在，通常响应是这样的：

> 文件 test.jpg 的上传完成。返回的脚本：{"status":1,"file":{"id":"v8rwlxj3","name":"test.jpg"}}

上传脚本首先接受文件，然后使用 cURL 将其上传到 Rapidshare，如下所示：

```
// Move uploaded file
move_uploaded_file($_FILES['Filedata']['tmp_name'], $targetDir . '/' . $id);

// Get the RapidShare server to upload to
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver');
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
if(!$uploadServer = trim(curl_exec($ch))) {
    error('nextuploadserver failed');
}
if(strstr($uploadServer, 'ERROR:')) {
    error('nextuploadserver failed');
}

// Upload the file to RapidShare
$uploadID = mt_rand(1000000000, 9999999999);
$url = 'http://rs' . $uploadServer . '.rapidshare.com/cgi-bin/rsapi.cgi?uploadid=' . $uploadID;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
$postFields = array('sub' => 'upload',
                    'login' => 'login',
                    'password' => 'password',
                    'uploadid' => $uploadID,
                    'filename' => $_FILES['Filedata']['name'],
                    'filecontent' => '@' . $targetDir . '/' . $id);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
if(!$resp = curl_exec($ch)) {
    error('upload call failed');
} 
```

上传后，上传脚本会输出一个 JSON 响应，如下所示：

```
// Output
echo json_encode(array('status' => 1, 'file' => array('id' => $id, 'name' => $uploadDetails[1]))); 
```

这适用于较小的文件。然而，当我上传我的 30MB 测试文件时，我收到了以下回复：

> 文件 30mb.txt 的上传完成。返回的脚本：

起初我认为 PHP 正在达到最大执行时间，但我在脚本的顶部有这个：

```
set_time_limit(21600); // 6 hours 
```

此外，我会看到返回的 PHP 错误。但它只是不返回*任何东西*。什么可能导致这种情况？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:59:16.580

您确定您的[upload_max_filesize](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)设置为30M 以上吗？过去那件事让我有些头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:06:50.130

移除uploadid post参数。带简历上传的 Uploadid 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:55:48.070

是的，很好的答案，虽然它在评论中但对我有所帮助。 [http://www.uploadify.com/documentation/uploadify/successtimeout/](http://www.uploadify.com/documentation/uploadify/successtimeout/)

将 successTimeout 设置为某个较高的值。让我们说1小时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T23:19:57.103

PHP 可能没有达到时间限制，但 ajax 可能在等待响应时达到连接超时。

# actionscript-3 - 将 MovieClip 添加到舞台时，MovieClip 的子项的子项不显示？

> ID：11066577
> 
> 赞同：2
> 
> 时间：2012-06-16T19:55:09.913
> 
> 标签：actionscript-3, flash

这个问题对我来说似乎很简单，但我一直无法解决它，或者在任何地方找到答案。

这是在类构造函数中调用的类`block`，`block_maker`是调用构造函数的对象，是 的实例`level`。

```
this.bitmap = new Bitmap(this.bitmap_data);

this.addChild(this.bitmap);     

this.block_maker.stage_foreground.addChild(this); 
```

在`level`,`stage_foreground`被添加到舞台，但什么也没有出现。`trace(stage_foreground.numChildren);`显示正确的孩子数量，并且`var temp = (this.stage_foreground.getChildAt(0)); trace(temp.numChildren);`正确但孩子的孩子实际上并没有出现，舞台只是保持空白。

当我将上面的代码更改为

```
this.bitmap = new Bitmap(this.bitmap_data);

this.block_maker.stage_foreground.addChild(this.bitmap); 
```

块作为 的子项出现在舞台上`level_instance.stage_foreground`，但使用此方法时，位图的位置不正确，因为它们没有位置数据。我可以简单地给出`this.bitmap` `x`和`y`定位，它可以工作，但我很好奇为什么当只是将位图作为子项添加到块中然后将其作为子项添加到`stage_foreground`.

我已经尝试用许多其他对象类替换，`this.bitmap`例如`MovieClip`我制作的临时对象类或.`Shape``Bitmap`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:23:32.040

正如你所说

> 这是在一个类的构造函数中为一个叫做block的类，block_maker是调用构造函数的对象，一个level的实例。

```
this.bitmap = new Bitmap(this.bitmap_data);
this.addChild(this.bitmap);     
this.block_maker.stage_foreground.addChild(this); 
```

关卡类需要扩展一个显示对象才能显示出来。
换句话说

> “这个”

必须是显示对象或以某种形式扩展它。

这不起作用的原因。

```
this.block_maker.stage_foreground.addChild(this); 
```

这确实

```
this.block_maker.stage_foreground.addChild(this.bitmap); 
```

是因为“this”不是显示对象，但“this.bitmap”是。

[DisplayObject 类是可放置在显示列表中的所有对象的基类。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:01:56.380

首先，即使它不是必需的，我建议让类名以大写字母开头，而 vars 总是以小写字母开头。这是 AS3 中的一个常见“规则”，主要是为了避免混淆。

问题很可能在于您使用`this`; 你正在做的是添加`this` *到* `this`. 在我看来，这不是一种正确的编码方式。

此外，由于所有其他尝试均无效；您是否尝试过制作要添加 var 的`public static`var？

# json - Jackson JSON from a list，帮助格式化 JSON

> ID：11066582
> 
> 赞同：3
> 
> 时间：2012-06-16T19:55:43.690
> 
> 标签：json, jax-rs, jackson, resteasy

我有以下课程....

```
@XmlType
@XmlRootElement(name = "milestones")
@XmlAccessorType(XmlAccessType.FIELD)
public static class Circle {
    public String type = "circle";
    public double cx;
    public double cy;
    public int r;
    public String title;
    public Integer width;   
} 
```

我正在返回一个圈子列表（实际上使用 JaxRS 和 RestEasy，它使用杰克逊）

我希望 Json 输出像

```
[{"type":"circle","cx":100.0,"cy":100.0,"r":0,"title":"test1","width":2},
{"type":"circle","cx":150.0,"cy":150.0,"r":0,"title":"test2","width":0}] 
```

在我的开发机器上，这就是输出的样子，但在生产中它就像

```
[{"milestones":{"type":"circle","cx":100,"cy":100,"r":0,"title":"test1","width":2}}, 
{"milestones":{"type":"circle","cx":150,"cy":150,"r":0,"title":"test2","width":0}}] 
```

有没有办法强制它使用第一种输出格式（没有列出名称）？

谢谢你的帮助，梅森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:07:29.330

使用相同的代码库，两台机器上的输出不太可能不同。

此行为是由 ObjectMapper 的 WRAP_ROOT_VALUE 功能驱动的，因此您可能想尝试使用下面的代码显式关闭它（您可能还想检查它是否在代码中的某处被显式打开，默认情况下此功能被禁用）

```
mapper.configure(SerializationConfig.Feature.WRAP_ROOT_VALUE, false); 
```

由于您使用的是 RestEasy，因此您需要扩展 RestEasyJacksonProvider 以访问底层 ObjectMapper。

# java - 我的代码在 Netbeans 中运行良好，但在运行 jar 时抛出异常

> ID：11066590
> 
> 赞同：0
> 
> 时间：2012-06-16T19:57:13.343
> 
> 标签：java, exception, netbeans, jar

在 Netbeans 中运行时，我的代码运行良好，没有任何错误。如果我做了一个干净的构建然后执行 jar 文件，它会崩溃而没有任何可见的错误（swing 应用程序）。

当我在命令行中执行 jar 文件时，出现此错误：

```
D:\xxx>java -jar ScreenShotUploader.jar
Exception in thread "AWT-EventQueue0"java.lang.NoClassDefFoundError: com/melloware/jintellitype/JIntellitype
    at screenshotuploader.HKRegistering.registerHK(HKRegistering.java:13)
    at screenshotuploader.ScreenShotUploaderJFrame$3.run(ScreenShotUploaderJ
 Frame.java:69)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.melloware.jintellitype.JIntellitype
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 16 more 
```

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:01:08.337

好像您正在引用某个库。您是否告诉 netbeans 将引用的 jar 导出到您的 jar 中？

# android - Eclipse ADT - xml 编辑时未处理的循环异常

> ID：11066594
> 
> 赞同：0
> 
> 时间：2012-06-16T19:57:29.693
> 
> 标签：android, xml, eclipse, adt

我对 Eclipse Indigo SR2 + ADT 18.0 有疑问。当我更改 xml 文件中的任何内容（例如：宽度、重量、位置、在 xml 中添加或删除任何元素等）时，Eclipse 开始多次刷新。这种刷新看起来像顶部面板的闪烁，带有更改几何参数（重力、重量）的按钮, ...)。

如果在此刷新期间您尝试更改另一个元素，则 Eclipse 崩溃并显示消息“unhandle loop exception”。重新启动 Eclipse 后，项目加载正常而不会丢失最后的数据。

这会导致在更改 xml 中的任何元素后等待很长时间。

我记得在一些以前版本的 ADT（或 Eclipse）中没有这样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:18:47.967

当我将 ADT 更新到版本 20 后问题就消失了

# c# - 串口+ C#数据接收问题

> ID：11066595
> 
> 赞同：3
> 
> 时间：2012-06-16T19:57:37.990
> 
> 标签：c#, serial-port, arduino

我想将 Arduino 中出现的数据传输到我的 C# 应用程序，但不知道我的代码有什么问题。Arduino代码来了：

```
int switchPin = 7;
int ledPin = 13;
boolean lastButton = LOW;
boolean currentButton = LOW;
boolean flashLight = LOW;

void setup()
{
  pinMode(switchPin, INPUT);
  pinMode(ledPin, OUTPUT);
}

boolean debounce(boolean last)
{
  boolean current = digitalRead(switchPin);
  if (last != current)
  {
    delay(5);
    current = digitalRead(switchPin);
  }
  return current;
}

void loop()
{
  currentButton = debounce(lastButton);
  if (lastButton == LOW && currentButton == HIGH)
  {
    Serial.print("UP");

    digitalWrite(ledPin, HIGH);
  }
  if (lastButton == HIGH && currentButton == LOW)
  {
    Serial.print("DOWN");

    digitalWrite(ledPin, LOW);
  }

  lastButton = currentButton;
} 
```

如您所见，这个简单的草图在按下按钮时向端口发送消息。我创建了一个控制台 C# 应用程序来接收数据：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Text;
using System.IO.Ports;

namespace ArduinoTestApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            SerialPort port = new SerialPort("COM3", 9600);
            port.Open();
            string lane;
            while (true)
            {
                lane = port.ReadLine();

                Console.WriteLine(lane);
            }

        }
    }
} 
```

但是当我按下按钮控制台仍然是空的。请告诉我怎么了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:11:23.563

一切都很简单。我忘记写了

> 序列号.begin()

:D 就是这样。现在它起作用了。

# amazon-web-services - Amazon AWS Beanstalk 自定义 AMI 问题

> ID：11066598
> 
> 赞同：1
> 
> 时间：2012-06-16T19:57:46.523
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

我正在尝试将一个应用程序部署到 AWS，该应用程序需要在服务器上安装一些额外的软件。为了创建自定义映像，我按照在[此处](https://stackoverflow.com/questions/8049431/customize-elastic-beanstalk-instances)和[此处](https://stackoverflow.com/questions/5042000/cant-generate-a-working-customized-ec2-ami-from-amazon-beanstalk-sample-appl)找到的说明启动 EC2 实例并安装我的软件。然后我在终止实例之前创建了一个快照。

现在我的问题是：如何让 beanstalk 在创建应用程序时使用我的快照？当我尝试创建应用程序时，只有 7 个基本 AMI 可用于“容器类型”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T17:45:07.987

从个人经验来看，我可以说大多数关于弹性 beanstalk 定制的文档都已经过时了。使用自定义 ami 怎么样，你需要知道弹性 beanstalk 的实际版本无论如何都会安装 beanstalk 脚本并在新实例引导程序上执行配置，所以如果你使用自定义 ami 它也会发生。基于此，当您需要进行一些操作系统级别的自定义时，我建议您使用自定义 ami。

如果您需要安装一些其他软件或更改某些内容，我建议您使用此处描述的方法：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html)

这里描述的好例子： [http ://www.hudku.com/blog/innocuous-looking-evil-devil/](http://www.hudku.com/blog/innocuous-looking-evil-devil/)

如果您尝试查找关键字，您也可以在 github 上找到很多示例：.ebextentions

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:07:03.903

启动您的环境配置，然后在环境设置中切换到您已注册的自定义 AMI。如果可能，请保存配置模板以供进一步使用。

# android - 如何在垂直布局中将两个 TextView 放在同一行

> ID：11066601
> 
> 赞同：8
> 
> 时间：2012-06-16T19:58:05.170
> 
> 标签：android, textview

我正在尝试显示带有 4 个 textView 的 ImageView。“标题”“时代”“年龄”和“信息”。它们都在全局水平布局中。并且 4 textView 处于垂直布局中。问题是我想让“时代”和“年龄”在同一条线上。但它不能与垂直布局。这是我的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >
<ImageView
    android:id="@+id/imgLink"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

     <TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Titre"
    android:textSize="8sp" 
    android:textStyle="bold" />

    <TextView
    android:id="@+id/time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="8sp"
    android:text="age" />

    <TextView
    android:id="@+id/age"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:textSize="8sp"
    android:text="age" />

    <TextView
    android:id="@+id/information"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="end"
     android:textSize="8sp"
    android:text="phrase" />

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T20:04:41.227

干得好

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imgLink"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Titre"
            android:textSize="8sp"
            android:textStyle="bold" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/time"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Time"
                android:textSize="8sp" />

            <TextView
                android:id="@+id/age"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:text="age"
                android:textSize="8sp" />
        </LinearLayout>

        <TextView
            android:id="@+id/information"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="end"
            android:text="phrase"
            android:textSize="8sp" />
    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T20:03:33.450

`LinearLayout`作为两个文本视图的父级并将该LinearLayout的**方向**设置为`Horizontal`..

```
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
    android:id="@+id/time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="8sp"
    android:text="time" />
<TextView
    android:id="@+id/age"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="8sp"
    android:text="age" />

<LinearLayout/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:19:24.517

正如我所说，还有另一种使用相对布局的方法

```
 <TextView
android:id="@+id/title"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Title"
android:textSize="8sp"
android:textStyle="bold"
android:layout_alignParentTop="true" />

<TextView
android:id="@+id/time"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:textSize="8sp"
android:text="time"
android:layout_below="@id/title" />

<TextView
android:id="@+id/age"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
 android:textSize="8sp"
android:text="age"
android:layout_below="@id/title" 
android:layout_toRightOf="@id/time" />

<TextView
android:id="@+id/information"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:ellipsize="end"
 android:textSize="8sp"
android:text="phrase"
android:layout_below="@id/time" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T21:33:29.410

使用图形布局，将年龄和时间字段放在同一行上……更容易

# c - 特定舍入模式的意外结果

> ID：11066609
> 
> 赞同：5
> 
> 时间：2012-06-16T19:59:19.130
> 
> 标签：c, rounding, numerical-methods, numerical-analysis

首先，抱歉标题不好：/

我试图重现一篇论文关于计算三对角对称矩阵的特征值的结果。我分别通过四舍五入到正无穷和负无穷来确定一些值“上限和下限”。

我不是每次都更改舍入模式，而是使用“技巧”：fl⁻(y) = -fl⁺(-y)，其中 fl⁻(y) 是使用负无穷大舍入模式时 y 的值，并且fl⁺(y) 是使用舍入模式到正无穷大时的 y 值。因此，我在 C 中有以下代码：

```
fesetround(FE_UPWARD);
first =  - (-d[i] + x);
second =  ( - (( e[i-1]*e[i-1] ) / a_inf ));
a_inf = first + second;

first = d[i] - x;
second = - ( ( e[i-1]*e[i-1] ) / a_sup );
a_sup = first + second; 
```

它工作正常，除了一个例子 a_inf 给了我正确的结果，但 a_sup 给出了错误的结果，尽管第一个和第二个变量似乎具有相同的值。

但是，如果我这样做：

```
 fesetround(FE_UPWARD);
  first =  - (-d[i] + x);
  second =  ( - (( e[i-1]*e[i-1] ) / a_inf ));

  fesetround(FE_DOWNWARD);
  first =  - (-d[i] + x);
  second =  ( - (( e[i-1]*e[i-1] ) / a_sup )); 
```

我得到了正确的结果。因此，如果我使用技巧 fl⁻(y) = -fl⁺(-y)，我会得到正确的结果，如果我更改舍入模式并使用原始表达式，我会得到错误的结果。知道为什么吗？

在这两种情况下，变量 first 和 second 的值如下：

```
first  1.031250000000000e+07,  second -1.031250000000000e+07
first  1.031250000000000e+07,  second -1.031250000000000e+07 
```

a_inf 和 a_sup 的正确值分别是 -1.862645149230957e-09 和 +1.862645149230957e-09，但在第一种情况下 a_sup = 0，这是错误的

我猜它正在发生的是某种灾难性的取消，但我不知道在这种情况下如何解决它......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:43:07.240

您遇到的第一个问题是您仅使用“技巧”来`first`向 -inf 舍入，而不是`second`，因此它仍然向 +inf 舍入。

第二个问题是 C 没有给你任何关于它如何进行浮点计算的保证。特别是，编译器可以自由地重新排序和重新关联操作，因为它认为适合性能，即使这种重新排列可能会改变程序的舍入行为。所以当你说：

```
first =  - (-d[i] + x); 
```

编译器可能会重新排列它并执行一次减法，而不是求反、加法、求反，这会反转舍入的方向。现在，您有时可以通过禁用所有优化来使事情按您期望的方式工作，但即使这样，也不能保证。

# pthreads - main() 线程与由 pthread_create() 创建的线程

> ID：11066618
> 
> 赞同：0
> 
> 时间：2012-06-16T20:00:03.683
> 
> 标签：pthreads, main

我一直在使用 POSIX 线程创建示例并发错误的程序。

我的总体问题是 main() 线程和由`pthread_create()`. 我最初的理解是它们几乎相同，但是我从下面的两个程序中得到了不同的结果。

在显示我编写的代码之前展开，我想知道的是：以下之间是否有区别。

```
int main() {
    ...
    pthread_create(&t1, NULL, worker, NULL);
    pthread_create(&t2, NULL, worker, NULL);
    ...
} 
```

和

```
int main() {
    ...
    pthread_create(&t1, NULL, worker, NULL);
    worker();
    ...
} 
```

使用完整的示例程序进行扩展。我已经制作了同一个程序的两个版本。它们都具有相同的功能`worker()`

```
void *worker(void *arg) {
    printf("Entered worker function\n");
    int myid;

    int data = 999;

    pthread_mutex_lock(&gidLock);
    myid = gid;
    gid++;
    printf("myid == %d\n", myid);

    pthread_mutex_unlock(&gidLock);

    if (myid == 0) {
        printf("Sleeping since myid == 0\n");
        sleep(1);     
        result = data;
        printf("Result updated\n");
    }

    return NULL;
} 
```

`gid`并且`data`是全局变量，初始化为 0。

`main()`以下功能有什么区别

```
int main_1() {
    pthread_t t1, t2;
    int tmp;

    /* initialize globals */
    gid = 0;
    result = 0;

    pthread_create(&t1, NULL, worker, NULL);

    pthread_create(&t2, NULL, worker, NULL);

    pthread_join(t2, NULL);

    printf("Parent thread exited worker function\n");

    tmp = result;
    printf("%d\n", tmp);

    pthread_exit((void *) 0);
} 
```

和

```
int main_2() {
    pthread_t t1;
    int tmp;

    /* initialize globals */
    gid = 0;
    result = 0;

    pthread_create(&t1, NULL, worker, NULL);

    worker(NULL);

    printf("Parent thread exited worker function\n");

    tmp = result;
    printf("%d\n", tmp);

    pthread_exit((void *) 0);
} 
```

样本输出`main_1()`

```
Entered worker function
myid == 0
Sleeping since myid == 0
Entered worker function
myid == 1
Parent thread exited worker function
0
Result Updated 
```

样本输出`main_2()`

```
Entered worker function
myid == 0
Sleeping since myid == 0
Entered worker function
myid == 1
/* program waits here */
Result updated
Parent thread exited worker function
999 
```

**编辑：**该程序故意存在并发错误（违反原子性）。通过调用 sleep() 来尝试强制错误交错发生，从而增加了延迟。该程序的目的是用于测试自动检测并发错误的软件。

我认为`main_1()`和`main_2()`本质上是相同的程序，当在同一系统上运行时应该导致相同的交错（或基本上相同的交错；它是不确定的，但在同一系统上运行相同的程序只会探索一小部分潜在的调度并且很少偏离[1]）。

“期望的”输出是来自`main_1()`

我不确定为什么线程`myid == 1`停止并且不返回`main_2()`。如果我不得不猜测

感谢您阅读本文，如果有人需要更多信息，我很乐意提供帮助。以下是完整源代码的链接。

`main_1()`：[https ://gist.github.com/2942372](https://gist.github.com/2942372)

`main_2()`：[https ://gist.github.com/2942375](https://gist.github.com/2942375)

我一直在编译`gcc -pthread -lpthread`

再次感谢。

[1] S. Park，S. Lu，Y. Zhou。“CTrigger：从隐藏处暴露原子性违规漏洞”

# c - 在 C 中进行简单绘图和事件捕获的最简单方法是什么？

> ID：11066627
> 
> 赞同：0
> 
> 时间：2012-06-16T20:01:10.010
> 
> 标签：c, opengl, gtk, drawing, sdl

我需要在 c 中为图形（即节点和线）创建一个简单的绘图程序，因此我还需要捕获事件。我需要在 Linux 和 Windows 中运行它（虽然现在不是 Windows 的必需品）。我之前没有在c中做过任何绘图（很久以前有点opengl），我猜我的选择是gtk、sdl或opengl。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:05:17.803

有了这些要求，我会选择 GTK+。您将使用 Cairo 来制作原始图形，这很简单。

这些事件将是标准的 GUI 事件，所以也很简单。

GTK+ 可以有一些学习曲线，虽然......但肯定不会超过 OpenGL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:39:54.853

您可以使用 GTK+。对于图形，cairo 就足够了（它是 GTK 用于绘图的库）。但是如果你需要节点、线条和事件（比如移动你绘制的东西），你需要使用一个画布，比如 GooCanvas。您也可以使用 GTK 和 Clutter。

# android - 从 onBootBroadcastreceiver 调用 SmsBroadcastreceiver？

> ID：11066628
> 
> 赞同：0
> 
> 时间：2012-06-16T20:01:11.113
> 
> 标签：android, broadcastreceiver, boot, app-startup

我有一个短信广播接收器类，它扩展了广播接收器来处理传入的短信，我想让它在启动时运行。如何从扩展广播接收器的 onBootReceiver 类中激活它？

我的 SmsBroadcastReceiver.java 看起来像这样

```
public class SmsBroadcastReceiver extends BroadcastReceiver {

   @Override
   public void onReceive(Context konteks, Intent intent) { 

   Log.v("SmsReceiver", "Tel Number: " + telNumber);

   sendSMS(konteks, intent, telNumber);
   }

private void sendSMS(Context context, Intent intent, String phoneNumber) {

    //ambil sms yang masuk
    Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    if (bundle != null) {

//menerima pesan dan menyalinnya untuk kemudian dikirim ke nomor tujuan

        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i = 0; i < msgs.length; i++) {
            msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            SmsManager sms = SmsManager.getDefault();
            String from = msgs[i].getDisplayOriginatingAddress();
            String message = msgs[i].getMessageBody().toString();
            String all = from + ":" + message;
            Log.v("SmsReceiver", "SMS Message: " + all);
            sms.sendTextMessage(phoneNumber, null, all, null, null); //kirim pesan
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:09:48.793

在 BootReceiver 类中，您可以动态注册 SmsBroadcastReceiver 类。

```
public class MyBootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        IntentFilter filter = new IntentFilter();  
        filter.addAction("android.provider.Telephony.SMS_RECEIVED");  
        registerReceiver(new SmsBroadcastReceiver(), filter);
    }

} 
```

# sql - sqlite - 查找可以由一组成分制成的食谱

> ID：11066631
> 
> 赞同：3
> 
> 时间：2012-06-16T20:01:42.737
> 
> 标签：sql, sqlite, relational-database, tagging

现在我在 ios 应用程序中使用 sqlite，我希望能够搜索可以从成分列表中制作的食谱（即，作为所提供成分子集的食谱）

例如：

```
Recipe 1: A B C
Recipe 2: A B
Recipe 3: C D
Recipe 4: A
Recipe 5: E

Query for ingredients A B C returns recipes {1, 2, 4}
Query for ingredients A B returns recipes {2, 4}
Query for ingredients D returns {} 
```

目前我设置的是

```
Table Items
name text primary key

Table Recipes
ID required_item integer, recipe_name text 
```

我可以轻松地查询包含三种成分中的任何一种的食谱，并查询包含所有三种成分的食谱，但我无法弄清楚如何仅查询

```
Recipes ∈ P(Ingredients) 
```

对不起，我是数据库编程的新手，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T23:05:51.610

您可以使用`left join`搜索表。然后`group by`食谱。使用一个`having`子句来要求对于每个食谱，没有不在搜索列表中的成分。例如：

```
select  ri.RecipeNr
from    RecipeIngredients ri
left join
        (
        select  'A' as Ingredient
        union all
        select  'B'
        union all
        select  'C'
        ) search
on      ri.Ingredient = search.Ingredient
group by
        ri.RecipeNr
having  count(case when search.Ingredient is null then 1 end) = 0 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!5/aa772/29/0)

# arrays - 将向量分配给数组时发生 R 错误

> ID：11066636
> 
> 赞同：1
> 
> 时间：2012-06-16T20:03:13.030
> 
> 标签：arrays, r, vector

我在 R 中有一个函数的编码如下：

```
 matching_score=function(nitems, tot.score) {

  nInterval <- 4*nitems+1
  tot <- array(0, dim=c(nInterval,2,nGroup.all) )
  minimum <- nitems
  maximum <- nitems*5
  tot[,1,] <- c(minimum: maximum)    
    for (nGcut in 1:nGroup.all)
    { 
```

...但是 R 给出了一条错误消息：tot[, 1, ] <- c(minimum:maximum) 中的错误：下标数量不正确我该如何解决这个问题？当最小值和最大值是实际数字时，不会出现错误。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:54:37.707

当您尝试`cbind`tot 对象时，可能会发生该错误。错误消息抱怨尺寸。您正在使用“[”，就好像该对象是一个具有三个维度的数组，而“cbind”不适用于数组。如果它真的是一个三维对象安装包'abind'并使用函数`abind`。

```
require(abind)
arr <- array(1:(2*3*4), c(4,3,2) )
abind(arr, arr[,,1], along=3) 
```

这条线的尺寸：

```
tempo[nRw,] <- cbind(tot[nRw,1,1], sum(tot[nRw,2,])) 
```

......似乎都错了。LHS 有两个维度，“tot”对象有三个维度，sum 的返回将是一个标量。

# android - 为 TTS 提供更多原创声音

> ID：11066639
> 
> 赞同：0
> 
> 时间：2012-06-16T20:03:45.207
> 
> 标签：android, text-to-speech

目前我正在android中处理文本到语音，我正在尝试构建一个文档阅读器，它可以为你阅读文档，但问题是我不想使用默认语音。有什么方法可以让我使用不同的声音，看起来更真实或更人性化..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:09:18.370

有提供额外 TTS 语音的市场应用程序。不过，它们需要在“设置”中明确启用。

“SVOX Classic”就是一个例子。这是一个将自己设置为 TTS 引擎的应用程序，并允许您下载其他声音。不过，他们的重点是广泛的语言支持。

需要 Android 2.2+ - 在 2.1 及更低版本中，没有对第三方 TTS 引擎的内置支持（不是开箱即用的）。

# python - 工作人员池，其中某些任务只能由某些工作人员完成

> ID：11066646
> 
> 赞同：1
> 
> 时间：2012-06-16T20:05:19.183
> 
> 标签：python, multithreading, concurrency, process, threadpool

我有很多任务，我想一次执行几个。正常的解决方案是线程池。但是，我的任务需要只有某些线程拥有的资源。所以我不能只将任务分配给任何旧线程；线程必须拥有任务所需的资源。

似乎应该有一个并发模式，但我似乎找不到它。我在 Python 2 中通过多处理实现了这一点，所以这些术语的答案会很好，但是通用的解决方案很好。在我的情况下，“线程”实际上是独立的操作系统进程，资源是网络连接（不，它不是服务器，所以 (e)poll/select 不会有帮助）。一般来说，一个线程/进程可以拥有多个资源。

这是一个幼稚的解决方案：将任务放在工作队列中，然后将我的线程池放在上面。让每个线程检查“我可以执行此任务吗？” 如果是，就去做；如果不是，则将其放回队列中。但是，如果每个任务只能由 N 个线程中的一个来完成，那么我正在做大约 2N 个昂贵的、浪费的对共享队列的访问，只是为了获得一个工作单元。

这是我目前的想法：每个资源都有一个共享的工作队列。将任务分配到匹配队列。每个线程检查它可以处理的队列。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:19:59.207

一种常见的方法是不为线程分配资源并将适当的资源与数据一起排队，尽管我理解如果资源绑定到特定线程，这并不总是可行的。

每个资源使用一个队列，线程只从包含它可以处理的对象的队列中弹出对象的想法可能有效。

可以使用按资源索引的信号量+并发队列数组来发送此类线程的信号并提供优先级系统，从而消除大部分轮询和浪费的重新排队。我将不得不更多地考虑这一点 - 这有点取决于资源如何映射到线程。

# google-chrome - 嵌入在 SVG 中的 YouTube iframe 在 Chrome 中播放时移到前面

> ID：11066648
> 
> 赞同：4
> 
> 时间：2012-06-16T20:06:14.960
> 
> 标签：google-chrome, svg, youtube, embed, z-index

## 问题

我正在尝试在 SVG 中嵌入 YouTube 视频。它在 Chromium (Ubuntu) 上按预期工作，但在 Google Chrome (Windows 7) 上，视频在播放时会自行移动到画布的前面，然后在播放停止时回到原来的位置。

有谁知道为什么视频似乎改变了它的 z-index，以及如何停止它？

还有一个次要问题（在我的情况下稍微不那么紧迫），Firefox 在播放视频时不显示视频，只显示音频。

## 编码

我正在使用以下 HTML 嵌入视频：

```
<svg height="600" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg">
    <foreignObject x="10" y="10" height="300" width="500">
        <div xmlns="http://www.w3.org/1999/xhtml">
            <iframe xmlns="http://www.w3.org/1999/xhtml" width="500" height="300"
                    src="http://www.youtube.com/embed/jOV1-mkIOd0?wmode=opaque"
                    frameborder="0">
            </iframe>
        </div>
    </foreignObject>
    <circle cx="250" cy="250" r="150" fill="#ff0000"></circle>
</svg>​ 
```

我创建了一个演示问题的**[小提琴。](http://jsfiddle.net/qydzm/25/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:41:16.510

如果您不想出现 z-index 问题，请先输出 <circle> 标签，然后输出视频/视频的容器；顺序很重要（最后一个对象将自动位于顶部）。还要确保您保留在 YouTube 视频上声明的“wmode=opaque”参数，就像您已经拥有它一样，因为没有它，无论如何视频都会排在首位。

```
<svg height="600" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg">
    <circle cx="250" cy="250" r="150" fill="#ff0000"></circle>
    <foreignObject x="10" y="10" height="300" width="500">
        <div xmlns="http://www.w3.org/1999/xhtml">
            <iframe xmlns="http://www.w3.org/1999/xhtml" width="500" height="300"
                    src="http://www.youtube.com/embed/jOV1-mkIOd0?wmode=opaque"
                    frameborder="0">
            </iframe>
        </div>
    </foreignObject>
</svg>​ 
```

# iphone - 背景中的 iPhone 音频和主页按钮

> ID：11066651
> 
> 赞同：0
> 
> 时间：2012-06-16T20:06:24.863
> 
> 标签：iphone, ios, avaudioplayer

我有一个带有音频的应用程序，可以在 Safari 中打开一个 URL。当应用程序进入后台并且 Safari 变为活动状态时，音频会继续播放。

问题是，当按下主页按钮并且应用程序进入后台时，我希望音频停止。可能吗？

*   `AVAudioSession`类别是`AVAudioSessionCategoryPlayback`

*   音频是`[MPMusicPlayerController iPodPlayer]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:23:00.180

您需要将类别更改为`AVAudioSessionCategoryAmbient`而不是`AVAudioSessionCategoryPlayback`阅读更多有关会话[类别的 Apple 文档](https://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html)

# javascript - Batman.js 新应用问题

> ID：11066652
> 
> 赞同：2
> 
> 时间：2012-06-16T20:06:25.400
> 
> 标签：javascript, batman.js

我重复了 batman.js[自述](https://github.com/Shopify/batman#installation)文件中的步骤：

```
npm install -g batman
batman new mj
cd mj
batman server 
```

并在 Firebug 中尝试打开 localhost:1047

```
global is not defined

Mj.run();

localhost:1047 (line 52)
Mj.global is not a function

Mj.global(true);

mj.js (line 15)
Mj is undefined

Mj.run(); 
```

我错过了什么还是应该打开问题？谷歌搜索`batman.js global is not defined`没有给出相关结果......

* * *

正如 user341180 所指出的，问题出在 node.js 版本上。有没有人为最新版本打补丁，或者降级是当今对付蝙蝠侠最明智的方法？

* * *

嗯……`README.md`据说*你需要安装 node.js（0.4.x 目前，0.5.x 支持即将推出）*，但`package.json`包含：

```
"engines": {
  "node": "~>0.6.0 || ~>0.7.0"
} 
```

所以，我很困惑。我想，`package.json`有更新，所以蝙蝠侠应该与我的 node.js v0.6.19 一起使用。

* * *

我目前的解决方法是定义`root = @`befor`class Mj extends Batman.App`并替换`@global yes`为`root.Mj = @`inside one。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:41:53.813

0.9.0 和 0.10.0 之间有很多变化，删除`global`就是其中之一。看起来生成器没有更新，仍在生成 0.9.0 代码。

我实际上不确定你是如何运行生成器的，它会抛出一个关于`camelize`为我调用未定义对象的错误。

无论如何，这绝对是一个 0.10.0 的错误。

### 添加

自述文件看起来也不是从 0.9.0 更新的

### 更多跟进

看起来 Shopify 现在已经解决[了这个问题](https://github.com/Shopify/batman/issues/451)

# objective-c - 查找阻塞主线程的代码的最佳方法是什么？

> ID：11066657
> 
> 赞同：11
> 
> 时间：2012-06-16T20:07:02.810
> 
> 标签：objective-c, ios, uiscrollview

我有一个`UIScrollView`在你滚动时放置一堆视图的地方。它正在从 api 端点下载图像。问题是滚动感觉不像它应该的那样平滑。我知道这是因为大多数情况下阻塞了主线程。我已经搜索了整个代码并注释掉了任何 UI 更新代码，但快速滚动仍然很慢。

关于什么是找到代码的哪一部分阻塞主线程的最佳方法的任何指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T20:12:30.383

仪器。没有什么比这更可怕的了。甚至苹果的[文档](https://developer.apple.com/library/mac/documentation/developertools/conceptual/InstrumentsUserGuide/AnalysingCPUUsageinYourOSXApp/AnalysingCPUUsageinYourOSXApp.html#//apple_ref/doc/uid/TP40004652-CH16-SW1)也提到了寻找高 CPU 相关的任务。

不过就个人而言，我推荐使用 Time Profiler。其中，一个优秀的教程可以在[这里](http://cocoawithlove.com/2010/02/finding-cause-of-simple-performance.html?m=1)找到。

# ruby-on-rails - AASM 不适用于我的 rails 3 和 ruby 1.8.7（nil:NilClass 的未定义方法“名称”）

> ID：11066659
> 
> 赞同：8
> 
> 时间：2012-06-16T20:07:23.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-1.8.7, aasm

我正在使用带有 aasm gem 的 Rails 3.2.2，我有这样的`Document`模型：

```
class Document < ActiveRecord::Base
  include AASM

  aasm do  
    state :unread, :initial => true
    state :read
    state :closed

    event :view do
      transitions :to => :read, :from => [:unread]
    end

    event :close do
      transitions :to => :closed, :from => [:read, :unread]
    end
  end 
```

现在在我的控制台上：

```
➜  ✗ bundle exec rails c
Loading development environment (Rails 3.2.2)
irb(main):006:0> Document.create!(:title => 'test')
   (0.2ms)  BEGIN
  SQL (0.3ms)  INSERT INTO `documents` (`aasm_state`, `checklist_id`, `created_at`, `description`, `dir`, `planned_date`, `procedure_id`, `section`, `subsection`, `title`, `updated_at`) VALUES (0, NULL, '2012-06-16 20:03:18', NULL, NULL, NULL, NULL, NULL, NULL, 'test', '2012-06-16 20:03:18')
   (0.4ms)  COMMIT
=> #<Document id: 28, title: "test", description: nil, dir: nil, section: nil, subsection: nil, planned_date: nil, procedure_id: nil, checklist_id: nil, created_at: "2012-06-16 20:03:18", updated_at: "2012-06-16 20:03:18", aasm_state: 0>
irb(main):007:0> doc = Document.last
  Document Load (0.3ms)  SELECT `documents`.* FROM `documents` ORDER BY `documents`.`id` DESC LIMIT 1
=> #<Document id: 28, title: "test", description: nil, dir: nil, section: nil, subsection: nil, planned_date: nil, procedure_id: nil, checklist_id: nil, created_at: "2012-06-16 20:03:18", updated_at: "2012-06-16 20:03:18", aasm_state: 0>
irb(main):008:0> doc.view!
NoMethodError: undefined method `name' for nil:NilClass
    from /Library/Ruby/Gems/1.8/gems/aasm-3.0.6/lib/aasm/supporting_classes/state.rb:15:in `=='
    from /Library/Ruby/Gems/1.8/gems/aasm-3.0.6/lib/aasm/aasm.rb:143:in `aasm_state_object_for_state'
    from (irb):8:in `find'
    from /Library/Ruby/Gems/1.8/gems/aasm-3.0.6/lib/aasm/aasm.rb:143:in `each'
    from /Library/Ruby/Gems/1.8/gems/aasm-3.0.6/lib/aasm/aasm.rb:143:in `find'
    from /Library/Ruby/Gems/1.8/gems/aasm-3.0.6/lib/aasm/aasm.rb:143:in `aasm_state_object_for_state'
    from /Library/Ruby/Gems/1.8/gems/aasm-3.0.6/lib/aasm/aasm.rb:158:in `aasm_fire_event'
    from /Library/Ruby/Gems/1.8/gems/aasm-3.0.6/lib/aasm/base.rb:48:in `view!'
    from (irb):8 
```

如你所见，我不断得到

> nil:NilClass 的未定义方法“名称”

我正在使用 Ruby 1.8.7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T04:54:40.207

我只是有同样的问题。它的出现是因为默认情况下状态变量`nil`不是设置为初始状态。要解决此问题，在您的情况下，您需要在模型上添加一个访问器，如下所示：

```
def aasm_state
  self[:aasm_state] || "unread"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T12:37:40.377

需要写列的确切名称。

```
aasm column: :aasm_state do 
end 
```

# python - Python 中用于输出的文本框（基于文本的游戏）

> ID：11066661
> 
> 赞同：1
> 
> 时间：2012-06-16T20:07:43.900
> 
> 标签：python

我想用文本框将 Python shell 的输出重定向到我的 Tkinter GUI。

例如，在我的游戏中单击 Inventory 将在 Python shell 中显示您的耗材。我希望它显示在 GUI 文本框中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:44:05.340

您可以为您的文本框创建一个处理程序，以便：

```
class textbox_handler:
  def __init__(self, text):
    self.data = []
    self.text = text #text is your tk text widget.
  def write(self, s):
    self.data.append(s)
  def print_out(self):
    for line in data:
        self.text.insert('end',line) 
```

然后，在您的主要功能中：

```
import sys
def main():
  handler = textbox_handler(text1)
  sys.stdout = handler
  print "sample text."
  print "sample text #2."
  print "another sample text."
  #or you can use without setting sys.stdout
  print >>handler, "yet another sample text." 
```

每个打印语句调用处理程序对象的 write 方法。您可以简单地从 handler.data 中检索这些字符串。

# java - HashMap 键更新与双重条目

> ID：11066668
> 
> 赞同：0
> 
> 时间：2012-06-16T20:08:15.827
> 
> 标签：java, hashmap

我正在使用哈希图来存储具有随时间演变的键的对象。

```
HashMap<String,Stuff> hm = new HashMap<String,Stuff>()
东西东西=新东西（）；
hm.put("原始密钥", 东西);

```

我没有找到比删除“OrignalKey”和 put() 具有相同对象的新条目更好的方法。

```
hm.remove("原始密钥");
hm.put("NewKey", 东西);

```

remove() 似乎占用了大量的 CPU 资源，因此我的问题是：

1.  留下重复条目的实际内存成本是多少（没有重叠风险）？
2.  我只是缺少一些简洁的 swapKey() 方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T20:12:08.977

> 留下重复条目的实际内存成本是多少（没有重叠风险）？

好吧，您有一个额外的条目，并且密钥本身不能被垃圾收集。如果键是“大”的，那可能是个问题。这也意味着您将永远无法获得准确的计数，您将永远无法明智地迭代所有值等。这对我来说似乎是个坏主意。

> 我只是缺少一些简洁的 swapKey() 方法吗？

没有这样的事情——这对我来说是一个相当罕见的要求。无论如何，任何这样的方法几乎都必须做你正在做的事情——它必须找到旧密钥，将其从数据结构中删除，然后为新密钥插入一个条目。仅仅通过同时了解这两个操作，我无法轻易想象任何可能的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:16:04.280

密钥的交换并不容易，因为密钥用于散列。更改键意味着哈希值也很可能不同。在这种情况下，更改密钥符合删除并重新插入

# ruby-on-rails - Railties gem 兼容问题 - 对不起，我是 Rails 和 Ruby 的新手

> ID：11066670
> 
> 赞同：0
> 
> 时间：2012-06-16T20:08:39.823
> 
> 标签：ruby-on-rails, heroku, bundler

推送到 Heroku 时出现以下捆绑程序错误

```
Fetching gem metadata from https://rubygems.org/.........
 Bundler could not find compatible versions for gem "railties":
In Gemfile:
            rails (= 3.2.1) ruby depends on
             railties (= 3.2.1) ruby
               jquery-rails (= 2.0.0) ruby depends on
                  railties (3.2.6) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:33:56.570

我遇到了同样的问题，所以我查看了 jquery-rails gem，发现它已经更新到 2.0.2 版。我将我的 Gemfile 更新到该版本并再次运行 bundle install 并且一切正常。当然，提交您的 Gemfile，以便更新也被推送到 Heroku。

# .htaccess - .htaccess 简单重写不起作用

> ID：11066671
> 
> 赞同：0
> 
> 时间：2012-06-16T20:08:44.913
> 
> 标签：.htaccess, pattern-matching, rewrite

由于某种原因，这不起作用，我是否遗漏了一些明显的东西？

```
RewriteRule ^(.*)infopopup.html$ /acatalog/infopopup.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:59:09.533

我想您需要从 RewriteRule 中排除您的目标文件，因为这可能会导致无限循环的重写：

```
RewriteRule ^acatalog/infopopup.html - [L]
RewriteRule ^(.*)infopopup.html$ acatalog/infopopup.html [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:00:12.980

这是一个循环问题，这就是最终的工作：

```
RewriteBase /
RewriteCond %{REQUEST_URI} !/acatalog/.*
RewriteRule ^(.*)infopopup.html$ acatalog/infopopup.html [QSA,L] 
```

# linker-errors - LIBCMTD.lib(wcrt0.obj) LNK2019：函数 ___tmainCRTStartup 中引用的未解析的外部符号 _wmain 未解析的外部符号 freeGLUT.dll

> ID：11066681
> 
> 赞同：0
> 
> 时间：2012-06-16T20:10:31.760
> 
> 标签：linker-errors, visual-studio-debugging, freeglut

我在 VS2010 中使用了一个使用 freeGLUT 开发的解决方案（不是我自己的），它是 GLUT（OpenGL 的实用工具包）的开源和扩展替代品。该程序在发布模式下编译并运行 exe 就好了，但是在尝试调试时，我收到以下错误：

错误 1 ​​错误 LNK2019：未解析的外部符号*wmain 在函数 _* _tmainCRTStartup LIBCMTD.lib(wcrt0.obj) freeglut中引用

错误 2 error LNK1120: 1 unresolved externals freeglut.dll freeglut

我下载并引用了所有的 lib 和包含文件，例如 README 文件告诉我：

```
Installation

Create a folder on your PC which is readable by all users, for example
“C:\Program Files\Common Files\MSVC\freeglut\” on a typical Windows system. Copy
the “lib\” and “include\” folders from this zip archive to that location.

The appropriate freeglut DLL can either be placed in the same folder as your
application, or can be installed in a system-wide folder which appears in your
%PATH% environment variable. Be careful not to mix the 32 bit DLL up with the 64
bit DLL, as they are not interchangeable.

Compiling 32 bit Applications

To create a 32 bit freeglut application, create a new Win32 C++ project in MSVC.
From the “Win32 Application Wizard”, choose a “Windows application”, check the
“Empty project” box, and submit.

You’ll now need to configure the compiler and linker settings. Open up the
project properties, and select “All Configurations” (this is necessary to ensure
our changes are applied for both debug and release builds). Open up the
“general” section under “C/C++”, and configure the “include\” folder you created
above as an “Additional Include Directory”. If you have more than one GLUT
package which contains a “glut.h” file, it’s important to ensure that the
freeglut include folder appears above all other GLUT include folders.

Now open up the “general” section under “Linker”, and configure the “lib\”
folder you created above as an “Additional Library Directory”.

A freeglut
application depends on the import libraries “freeglut.lib” and “opengl32.lib”,
which can be configured under the “Input” section.

However, it shouldn’t be
necessary to explicitly state these dependencies, since the freeglut headers
handle this for you. Now open the “Advanced” section, and enter “mainCRTStartup”
as the “Entry Point” for your application. This is necessary because GLUT
applications use “main” as the application entry point, not “WinMain”—without it
you’ll get an undefined reference when you try to link your application.

That’s all of your project properties configured, so you can now add source
files to your project and build the application. If you want your application to
be compatible with GLUT, you should “#include <GL/glut.h>”. If you want to use
freeglut specific extensions, you should “#include <GL/freeglut.h>” instead.

Don’t forget to either include the freeglut DLL when distributing applications,
or provide your users with some method of obtaining it if they don’t already
have it! 
```

这是我现在拥有的链接器设置屏幕截图的链接：http: [//imgur.com/a/SDwBv](http://imgur.com/a/SDwBv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-16T13:23:27.753

属性->链接器->系统->子系统

将 Windows (/SUBSYSTEM:WINDOWS) 更改为控制台 (/SUBSYSTEM:CONSOLE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:36:07.337

“wmain”是图形 Windows .exe 的主要入口点。

问：您是否按照说明选择了“Windows 应用程序”？

问：您是在构建一个 .exe（整个程序），还是只是一个 .dll？

链接器认为您正在尝试构建一个 .exe，并且它需要一个“主程序”（带有“wmain()”）。

如果您正在构建 .dll，请将您的 Visual Studio“目标”更改为 .dll 并“全部重建”。

如果您正在构建 .exe，请找到“主模块”并确保它包含在您的项目中。

# javascript - 加载 URL 后调用函数

> ID：11066683
> 
> 赞同：0
> 
> 时间：2012-06-16T20:11:01.790
> 
> 标签：javascript, html, url

我想在加载指定的 URL 后执行某个函数。我试图设置一个间隔来检测我想要的 url，但到目前为止它还没有工作。这是我调用该函数的代码：

```
pub.startup = function() {
var currURL = window.top.getBrowser().selectedBrowser.contentWindow.location.host;
window.setInterval(currURL, 1000);
if (currURL == 'www.google.com')
FunctionToCall();
} 
```

希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:29:28.257

```
pub.startup = function() {
    function checkCurrURL() {
        var currURL = window.top.getBrowser().selectedBrowser.contentWindow.location.host;
        if (currURL == 'www.google.com')
            FunctionToCall();
    }
    window.setInterval(checkCurrURL, 1000);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:19:40.383

window.setInterval 期望执行一个函数（或任意代码）。你为它提供了一个变量，这不起作用。

请参阅[https://developer.mozilla.org/en/window.setInterval](https://developer.mozilla.org/en/window.setInterval)

# emacs - 在 python-mode.el 中的 Cc Cc 上打开新的 python shell

> ID：11066684
> 
> 赞同：1
> 
> 时间：2012-06-16T20:11:19.593
> 
> 标签：emacs, python-mode

我有一个小型 GTK python 应用程序，它导入了一个可能不会被加载两次的包（Twisted）。

如果我使用 python-mode.el 在 emacs 中运行我的应用程序并按 Cc Cc，则应用程序将在 python shell 窗口中执行。如果我现在关闭应用程序，python shell 将保持启动并运行。如果我现在再次按 Cc Cc，emacs 会“重用”旧的 python 进程，因此我遇到了问题，因为我安装了两次 Twisted reactor。

每次执行缓冲区时是否可以让 python-mode.el 打开一个新的 shell 窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:32:31.097

python-mode.el comes with a command py-execute-buffer-dedicated, opening a new and reserved process for it

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:53:29.233

在中，如果变量设置为 ，`python.el`则在新缓冲区中启动新的劣质进程。因此，可以建议函数在每次调用后将该变量重置为，从而强制为每个后续命令执行一个新的 Python 进程。像下面这样的东西应该可以工作：`python-buffer``nil``python-send-buffer``nil``python-send-buffer`

```
(defadvice
  python-send-buffer
  (after python-send-buffer-new-proc activate)
  (setq python-buffer nil))

(ad-activate python-send-buffer) 
```

我知道您的帖子是在寻求帮助`python-mode.el`，但我认为无论如何提及这一点可能会有所帮助，因为如果`python-mode.el`不使用类似的机制，我会感到惊讶。如果我有时间，我会试着研究一下。

编辑：`python-mode.el`包使用命令`py-shell`启动一个新的劣质 Python 进程。我发现[了一个邮件列表帖子](http://mail.scipy.org/pipermail/ipython-user/2007-May/004365.html)，其中用户提供了一个*临时*功能，似乎可以满足您的需求。

顺便说一句，可能值得考虑的是，尝试更改 的默认行为`python-mode`并不是解决此问题的最佳方法。我不知道您的代码是做什么的，而且我对 Twisted 也不是特别熟悉，但在我看来，在同一会话中第二次评估您的代码时遇到重大错误可能表明存在更基本的设计问题. 我看不出这可能是多个`imports`相同模块的问题，因为 Python 模块只加载一次，连续的`import`语句没有效果（为此，需要显式的`reload`or `execfile()`）。如果我在这里完全脱离基地，我道歉，但我觉得这种可能性可能值得一提。

# python - 在 mac 上使用 opencv 和 python 创建 avi 视频

> ID：11066689
> 
> 赞同：3
> 
> 时间：2012-06-16T20:12:02.843
> 
> 标签：python, macos, video, opencv, avi

这是我的情况：

*   我正在尝试使用 opencv 从一些 png 图像生成 avi 电影
*   在 Mac OSX 上使用 OpenCV 2.3.4、Python 2.7
*   程序没有错误结束，生成文件。但是不能玩。

这是代码：

```
 import cv 
    def make_video(nFrames):
        isColor = 1
        fps     = 1  #25 or 30, frames per second
        size = cv.GetSize(cv.LoadImage("canvas.png"))

        writer=cv.CreateVideoWriter("~/Documents/Workspace/Brief/video.avi",cv.CV_FOURCC('D','I','V','X'), fps,size,isColor)
#-----------------------------#Writing the video file:#-----------------------------
        for i in range(nFrames):    
            img = cv.LoadImage("canvas%d.png"%i) #specify filename and the extension
        cv.WriteFrame(writer,img) # add the frame to the video 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:42:34.900

我找到了 Mac OSX 原生的编解码器列表：http: [//opencv.willowgarage.com/wiki/QuickTimeCodecs](http://opencv.willowgarage.com/wiki/QuickTimeCodecs)

现在，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:29:03.970

您正在尝试在既没有本机编码器也没有解码器的平台上使用 DIVX 编解码器。这行不通。尝试使用更简单的东西，例如 MJPG (Motion JPEG)。

# git - 以 Git SSH 用户的身份发送电子邮件

> ID：11066690
> 
> 赞同：2
> 
> 时间：2012-06-16T20:12:03.867
> 
> 标签：git, ssh, gitosis

我在一个项目中，来自 LDAP 服务器的所有用户都只有电子邮件作为唯一标识符。我需要让用户从他们在 linux 服务器上的远程主目录中克隆他们的项目。所以我正在考虑使用 GIT 的 SSH 协议对它们进行身份验证和授权。

但是我在使用 Eclipse EGit 插件时遇到了问题，因为 git clone 命令看起来像这样：

```
git clone jhon.smith@emailserver@reposerver:pathtosomeproject 
```

Eclipse 试图通过转义 @ 来提供帮助：

```
git clone jhon.smith%40emailserver@reposerver:pathtosomeproject 
```

但这不起作用，并且显示身份验证错误。我所做的是在电子邮件中添加一个“”。

```
git clone 'jhon.smith@emailserver'@reposerver:pathtosomeproject 
```

这很好用，但是当 Eclipse 尝试在下一页中使用 ls-remote 列出所有分支时，它说无法显示消息错误。

我的问题是，是否有人已经经历过这种要求并有替代解决方案？

我不知道 Gitosis 在这里是否有帮助，因为环境不会有组，只有用户在他们的主文件夹中拥有他们的项目并使用 Eclipse EGit 来克隆和推送项目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:09:50.350

首先，[gitosis 已过时，请使用 Gitolite](https://stackoverflow.com/a/10888358/6309)。

其次，ssh 地址用于 Git 存储库服务器的管理员帐户（例如“ `gitadmin`”），以检查一个人的公钥是否在该`~gitadmin/.ssh/authorized_keys`.

当你使用像“jhon.smith@emailserver@reposerver:pathtosomeproject”这样的 ssh 地址时，你要求 reposerver SSH 守护进程检查 `~jhon.smith@emailserver/.ssh/authorized_keys`，这是没有意义的（你有*一个*Git 管理员帐户，而不是每个用户一个！，我怀疑您会在 unix 服务器上找到用户 ID 名称“ `jhon.smith@emailserver`”）

[Gitolite](https://github.com/sitaramc/gitolite)会有所帮助，因为它将形式化每个用户将交流的公钥。阅读“[添加和删除用户](http://sitaramc.github.com/gitolite/users.html)”和“ [ssh 基础](http://sitaramc.github.com/gitolite/glssh.html)”。
该公钥的名称将代表从 Gitolite 服务器查看的他们的“id”。
（所以不要使用复杂的公共 ssh 密钥，例如`jhon.smith@emailserver`!`jhon.smith_emailserver`并且`jhon.smith_emailserver.pub`会做得很好，例如）

# mysql - Mysql查询WHERE子句针对表中特定的不同分类

> ID：11066697
> 
> 赞同：1
> 
> 时间：2012-06-16T20:12:47.280
> 
> 标签：mysql, wordpress, taxonomy

我正在尝试获取具有特定分类的帖子。在这种情况下，假设我要搜索分类为“电视”且值为“SON”的帖子，我无法确定要查询哪个表，因为电视似乎没有明确的 ID。每个电视实例都分配有一个新的 term_id 和 term_taxonomy_id。

我对需要加入哪个表以及哪些值有点困惑。

请有人给我一些建议，因为我想我已经把我秃头上剩下的头发拔掉了。谢谢。我的查询和数据库值如下，数据库图如下，

```
SELECT SQL_CALC_FOUND_ROWS wp_posts.ID,
       MIN(wp_offers.price)
FROM       wp_posts
INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id)
LEFT  JOIN wp_offers             ON (wp_posts.ID = wp_offers.post_id)
WHERE DATE(wp_offers.offer_date) = '2012-05-18'
  AND () # **********the query goes here**********
  AND wp_term_relationships.term_taxonomy_id IN (8,9)
  AND wp_posts.post_type = 'offer'
  AND wp_posts.post_status = 'publish'
GROUP BY wp_posts.ID
ORDER BY wp_posts.post_title ASC
LIMIT 0, 15 
```

* * *

```
**wp_term_relationships**

object_id        term_taxonomy_id         term_order
10           3                0
10           4                0
10           5                0
21           3                0

**wp_term_taxonomy**

term_taxonomy_id      term_id     taxonomy      description     parent  count
3                 3           television                    0       2
4                 4           television                    0       1
5                 5           television                    0       1

**wp_terms**

term_id         name       slug      term_group
3               SON        SON       0
4               SAM        SAM       0
5               TOS        TOS       0 
```

![在此处输入图像描述](../Images/af4c01524999d036c723a71d49bbe50f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:55:17.610

如果您尝试在页面上显示它们，您可以使用

```
$query = new WP_Query( array( 'television' => 'SON' ) ); 
```

[WordPress 法典](http://codex.wordpress.org/Taxonomies#Querying_by_taxonomy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:56:27.230

```
$query = new WP_Query( array( 'television' => 'SON' ) ); 
```

或者

```
$args = array(
'tax_query' => array(
    array(
        'taxonomy' => 'television',
        'field' => 'slug',
        'terms' => 'SON'
        )
    )
);
$query = new WP_Query( $args ); 
```

[**参考。**](http://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters)

# html - 推荐大型 HTML 数据表的解决方案？

> ID：11066698
> 
> 赞同：1
> 
> 时间：2012-06-16T20:12:53.187
> 
> 标签：html, css, html-table

我正在翻新一个遗留的 Java webapp。我重做了一个显示数据库搜索结果的屏幕。搜索可能会产生大量结果。旧版只打印了所有内容。我通过放入一些 div 和 CSS 以便在需要时出现水平和垂直滚动条来做得更好。

这不是很好。当垂直滚动多行时，用户会看不到列标题。将列标题放在自己的 div 中并不是一个很好的解决方案，因为有足够多的列也需要水平滚动。用户会卡住垂直滚动结果然后水平滚动列名。

有人愿意推荐一个不涉及花钱或不涉及学习全新框架或系统的解决方案吗？

我不需要高功率的东西。就像我写的那样，如果列数减少 2-3，我可能不需要水平滚动，只需将标题放在它们自己的固定 div 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T20:18:51.647

我使用数据表来显示表格。是一些 jquery 将平面表转换为可排序、可搜索的漂亮表。

[http://datatables.net/](http://datatables.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:09:31.933

您应该在查询中使用分页。例如，当获取第 7 页且页面大小为 10 时，只需从数据库中获取第 61 到 70 条记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:19:13.380

为什么不每 20 行重复一次列标题，这样当标题滚动出屏幕时，您可以将它们进一步向下移动。这可以在您的服务器端脚本中完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-31T22:50:20.843

一种简单的方法是定期重复标题。下面的代码显示了如何做到这一点，不需要库。该示例构建了一个示例大表（100 列，100 行），然后每 10 行克隆一次标题行。

```
const COLS = 100;
const ROWS = 100;
const HEADER_PERIOD = 10;

const table = document.querySelector("table");

// prepare header template
const header = document.createElement("tr");
header.classList.add("header");
for (let i = 0; i < COLS; i++) {
    const cell = header.insertCell();
    cell.innerText = String.fromCharCode(65 + Math.floor(Math.random() * 26));
}

// make some random rows and columns
for (let j = 0; j < ROWS; j++) {

    // repeat header row periodically so user doesn't get lost
    if (j % HEADER_PERIOD === 0) {
        table.appendChild(header.cloneNode(true));
    }

    const row = table.insertRow();
    for (let i = 0; i < COLS; i++) {
        const cell = row.insertCell();
        cell.innerText = Math.trunc(10 + Math.random() * 90).toFixed();
    }
}
```

```
body {
    font-family: monospace, sans-serif;
}
table {
    border-collapse: collapse;
}
th, td {
    padding: 2px;
    border: 1px solid;
    margin: 0;
}
.header {
    background-color: #ccc;
    text-align: center;
    font-weight: bold;
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Large table</title>
</head>
<body>

<table>
</table>

</body>
</html>
```

# sql-server-2008 - 选择语句作为存储过程

> ID：11066699
> 
> 赞同：-5
> 
> 时间：2012-06-16T20:13:18.653
> 
> 标签：sql-server-2008, tsql, stored-procedures

我有这个要用作存储过程的查询：

```
 SELECT ISNULL(P.firstname, s.firstname) AS Expr1,ISNULL(P.lastname,
  s.lastname) AS Expr2 FROM comment AS C LEFT OUTER JOIN professor AS P ON P.ID =   

  C.PID LEFT OUTER JOIN student AS s ON s.ID = C.SID

  WHERE (C.VID = @VID) 
```

它应该返回 Expr1 和 Expr2 的值

我试图声明输入和输出，但没有运气

请帮忙

编辑 ：

```
 CREATE PROCEDURE [dbo].[GetDepartmentName]
  @ID int,
  @fName varchar(50) OUTPUT
   @lName varchar(50) OUTPUT
  AS

SELECT @fName=COALESCE(p.firstname, s.firstname)   @lName=COALESCE(p.lastname,     

   s.lastname)as 
  FROM comment c
  LEFT JOIN Professor p
    ON c.pid = p.id
  LEFT JOIN Student s
    ON c.sid = s.id
 WHERE c.vid = @ID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T20:21:24.063

```
ALTER PROCEDURE [dbo].[GetDepartmentName]
  @ID    INT,
  @fName varchar(50) OUTPUT, -- added missing comma here
  @lName varchar(50) OUTPUT
AS
BEGIN
  SET NOCOUNT ON;

  SELECT  
    @fName = COALESCE(p.firstname, s.firstname), -- added missing comma here
    @lName = COALESCE(p.lastname,  s.lastname)   -- removed strange "as" here 
  FROM dbo.comment AS c
  LEFT OUTER JOIN dbo.Professor AS p
    ON c.pid = p.id
  LEFT OUTER JOIN dbo.Student AS s
    ON c.sid = s.id
  WHERE c.vid = @ID;
END
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:46:15.320

简短的答案是下面的存储过程，**从@Aaron Bertrand 的正确**答案修改，将以您似乎需要数据的方式返回您想要的结果。

```
CREATE PROCEDURE [dbo].[GetDepartmentName]
  @ID    INT 
  AS
  BEGIN
  SET NOCOUNT ON;

  SELECT  
  COALESCE(p.firstname, s.firstname) as firstname,  
  COALESCE(p.lastname,  s.lastname) as lastname 
  FROM dbo.comment AS c
  LEFT OUTER JOIN dbo.Professor AS p
  ON c.pid = p.pid
  LEFT OUTER JOIN dbo.Student AS s
  ON c.sid = s.sid
  WHERE c.vid = @ID;
  END
  GO 
```

这里发生了几件事。我将向您详细介绍我所做的工作，并努力帮助您并解释如何继续前进，因为这是您在过去几天中提出的与此相关的第四个问题。

好的 - @Aaron Bertrand 的存储过程很好。他接受了您在问题中提供的查询并使其发挥作用，并为您的问题提供了很好的答案。但是，我认为您的问题存在一些问题。 **要获得好的答案，您需要提出一个好的问题**。

我去了[您已经问过的其他相关问题](https://stackoverflow.com/questions/11064177/using-isnull-or-select-coalesce-in-linq)之一，并得到了您的表结构和 IN MANAGEMENT STUDIO：创建了表并插入了您提供的数据，在本地编译了他的 sproc 并得到：

```
Msg 207, Level 16, State 1, Procedure GetDepartmentName, Line 14
Invalid column name 'id'.
Msg 207, Level 16, State 1, Procedure GetDepartmentName, Line 16
Invalid column name 'id'. 
```

我从您的其他问题的表结构中知道我需要更改连接：

```
LEFT OUTER JOIN dbo.Professor AS p
    ON c.pid = p.pid -- changed from c.pid = p.id, p.id is not a column
LEFT OUTER JOIN dbo.Student AS s
    ON c.sid = s.sid -- changed from c.pid = s.id, s.id is not a column 
```

我在存储过程语句之外复制了变量声明和查询，`create`并进行了我提到的更改并设置了变量并突出显示并运行了这个。有效。当您遇到存储过程问题时，您可以执行此操作来测试您的查询是否只是语法或简单问题。

`JOINS`我在存储过程中 进行了刚刚测试过的更改。**我编译它并成功运行它。**

**以下是从 Management Studio 运行存储过程的方法（注意我在 MS 测试中使用[EXEC](http://msdn.microsoft.com/en-us/library/aa258848%28v=sql.80%29.aspx)，因为它易于键入，但了解 SP_EXECUTESQL 和 EXEC 之间的区别）**：

```
Execute a stored procedure:

[ [ EXEC [ UTE ] ] 
    { 
        [ @return_status = ] 
            { procedure_name [ ;number ] | @procedure_name_var 
    } 
    [ [ @parameter = ] { value | @variable [ OUTPUT ] | [ DEFAULT ] ] 
        [ ,...n ] 
[ WITH RECOMPILE ] 
```

**你说“我试图声明输入和输出但没有运气”。** 我不认为你真的想要输出变量——这很重要。我有一种非常强烈的感觉，您希望它作为结果集返回。做一些研究并**了解从存储过程返回数据的不同方法**。所以无论如何 - 给你 -`Drop`或者`Alter`你的旧 sproc 并尝试这个 - 它是从@Aaron's 快速修改的并且没有输出变量 - 它与我的答案开头的第一个相同。

```
CREATE PROCEDURE [dbo].[GetDepartmentName]
  @ID    INT 
  AS
  BEGIN
  SET NOCOUNT ON;

 SELECT  
 COALESCE(p.firstname, s.firstname) as firstname,  
 COALESCE(p.lastname,  s.lastname) as lastname 
 FROM dbo.comment AS c
 LEFT OUTER JOIN dbo.Professor AS p
    ON c.pid = p.pid
 LEFT OUTER JOIN dbo.Student AS s
    ON c.sid = s.sid
 WHERE c.vid = @ID;
END
GO 
```

使用“EXEC”（管理工作室）在**SSMS**中运行它：

```
EXEC [GetDepartmentName] 1 
```

回报：

```
firstname   lastname
--------------------
mark    abram
john    adam
sean    hoak 
```

**已编辑 - 决定删除一些东西**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:21:35.407

假设您的选择在您运行时有效，即连接是正确的并且这将返回数据，那么下面的创建过程脚本应该可以满足您的需求。

```
CREATE PROCEDURE uspYourProcedureName 
  @VID INT
  AS 
  SET NOCOUNT ON;

  SELECT ISNULL(P.firstname, s.firstname) AS Expr1,
         ISNULL(P.lastname, s.lastname) AS Expr2 
  FROM   comment AS C 
         LEFT OUTER JOIN professor AS P ON P.ID = C.PID 
         LEFT OUTER JOIN student AS s ON s.ID = C.SID
  WHERE (C.VID = @VID) 
```

如果您只需要返回 Expr1 和 Expr2 值，则无需像在编辑中那样将它们定义为 OUTPUT 参数。select 语句返回的任何内容都将出现在您的结果中。

尝试从网页运行该过程，但使用 SQL Profiler 查看您的 @VID 参数是否按预期传递。

# vb.net - 在 VB 中使用 ASP.NET 处理图像时提高性能

> ID：11066700
> 
> 赞同：0
> 
> 时间：2012-06-16T20:13:20.783
> 
> 标签：vb.net, performance, image-processing, graphics, system.drawing

我正在尝试加快我网站的各个方面。

该网站是一个购物网站，各种搜索页面都很慢。这有几个潜在的原因，一个是使用图像。

前几天晚上，我创建了一个函数，为我的 Facebook OG 标签生成缩略图。该函数向服务器写入一个 400px x 400px 的方形图像，该图像是通过平铺搜索查询生成的前几个（最多 14 个）产品图像而创建的。

在一个文件上完全隔离运行这个脚本`test.aspx`给了我合理的加载时间，但我不能做任何事情来加快它，即使我没有在浏览器中返回任何东西，只是执行这个过程大约需要 3 秒，这显然扩大了在整个实时站点上放慢速度。

整个代码是：

```
Function mergeImgs(idList, imgList, head, fileName) As String

    Try
        Dim maxRows = HttpContext.Current.Request.QueryString("r")
        Dim imgDim = 400
        Dim Image3 As New Bitmap(imgDim, imgDim)
        Dim g As Graphics = Graphics.FromImage(Image3)

        Dim i = 0
        Dim left = 0
        Dim rows = 0
        For Each item In idList
            Dim img = Common.getImageUrl(idList(i), imgList(i), "server", "-tb")
            i += 1
            If img <> "/Images/awaiting.png" Then

                Dim imageData As System.Drawing.Image = System.Drawing.Image.FromFile(img)
                Dim aspect As Double = imageData.Width / imageData.Height ' determine aspect and decide how to display image

                Dim Image1
                Dim fixedHeight = imgDim / maxRows
                Dim objGraphic As System.Drawing.Image = System.Drawing.Image.FromFile(img)

                Dim aspectRatio = objGraphic.Height / objGraphic.Width
                Dim reduction = fixedHeight / objGraphic.Height
                Dim newwidth = objGraphic.Width * reduction
                Image1 = New Bitmap(objGraphic, objGraphic.Width * reduction, fixedHeight)

                g.DrawImage(Image1, New Point(left, fixedHeight * rows))
                If left >= imgDim Then
                    rows += 1
                    left = 0
                ElseIf left < imgDim Then
                    left += newwidth
                ElseIf left < imgDim AndAlso rows = maxRows Then
                    Exit For
                End If
            End If
        Next

        Image3.Save(HttpContext.Current.Server.MapPath("/" & fileName), System.Drawing.Imaging.ImageFormat.Jpeg)

        Return rootUrl & fileName

        g.Dispose()
        g = Nothing

    Catch ex As Exception
        Return ("<P>" & ex.ToString)
    End Try
End Function 
```

有一个外部函数`getImageUrl`，它只是一系列逻辑，它根据项目 ID 写出一个目录结构，这很快，所以我怀疑它是否能坚持下去。

传递给函数的变量是：

```
idList = a generic List(of String) ' a list of item IDs
imgList = a generic List(of String) ' a list of image names (image names only stored in DB)
head = the Page.Header ' not actually needed in this prototype, but aimed to allow this to write the OG tag to the Page Header
fileName = simply the name to give the generated image file 
```

我不禁想到，从

```
Dim imageData As System.Drawing.Image = System.Drawing.Image.FromFile(img) 
```

以后可能会加快速度。这样做是计算加载图像的纵横比，然后重新计算大小，使它们都具有相同的高度，这样图块就可以整齐地排列在整齐的行中。

```
Dim img = Common.getImageUrl(idList(i), imgList(i), "server", "-tb") 
```

此行加载相关图像的缩略图版本（最后一个变量中的“-tb”），因此所有正在处理的图像大约为 50x50px，因此加载和确定宽高比非常小

我的服务器上存储了每个图像的 4 个版本，有 4 种不同的尺寸，以便在网站上快速显示，在这里加载的不同图像弄乱了，似乎对脚本加载时间几乎没有影响。

有什么比`System.Drawing.Image.FromFile(img)`我可以用来加载图像并确定图像的宽度和高度更快的方法吗？

在我的网站上还有其他几种情况，我需要确定图像的尺寸，然后对其进行处理，但似乎都有些慢。

**欢迎任何建议！**

仅供参考，这是由上述代码生成的图像示例

[http://www.hgtrs.com/recents.jpg](http://www.hgtrs.com/recents.jpg)

这是从此页面返回的产品生成的（可能加载缓慢！）：

[http://www.hgtrs.com/search.aspx?Type=recents](http://www.hgtrs.com/search.aspx?Type=recents)

我应该说我的`test.aspx`文件还包括对数据库的调用，在测试了直接使用的查询后，我得到了 0.18 秒的查询时间，我不知道这个时间如何扩展到真正的应用程序中。我已经尽我所知优化了这个查询和表（它使用一个嵌套查询和一个连接）。

# jquery - 如何通过jquery ui的自动完成显示一项值

> ID：11066702
> 
> 赞同：0
> 
> 时间：2012-06-16T20:14:13.867
> 
> 标签：jquery, search, input, autocomplete, onclick

我正在开发一个输入文本搜索，使用 post 获取数据的自动完成功能：

```
$('#name_search').autocomplete({
  source: "search/name.php",
  open: function(){
     $(this).autocomplete('widget').css('z-index', 1000);
        return false;
  }}).data( "autocomplete" )._renderItem = function( ul, item ){
     return $( "<li></li>" )
     .data( "item.autocomplete", item )
     .append( "<a>" + item.nome + "<br>" + item.cognome + "</a>" )
     .appendTo( ul );
}; 
```

它向我显示了小部件行内的两个项目，但是当我单击它时，它会自行关闭并清除输入文本中的文本。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:48:46.040

我解决了在选择函数中添加 return false ：

```
$('#name_search').autocomplete({
            source: "search/name.php",
            open: function(){
                $(this).autocomplete('widget').css('z-index', 1000);
                    return false;
            },
            select:function(event, ui){
                $(this).val(ui.item.nome+" - "+ui.item.cognome);
                return false;
            }
            }).data( "autocomplete" )._renderItem = function( ul, item ){
                return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.nome + "<br>" + item.cognome + "</a>" )
                .appendTo( ul );
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:38:40.127

使用自动完成的 select 方法来定义目标输入元素的值。

```
 $('#name_search').autocomplete({
           source: "search/name.php",
           open: function(){
                  $(this).autocomplete('widget').css('z-index', 1000);
                  return false;
            },
            select:function(event, ui){
                $(this).val(ui.item.label);
            }
      }).data( "autocomplete" )._renderItem = function( ul, item ){
     return $( "<li></li>" )
     .data( "item.autocomplete", item )
     .append( "<a>" + item.nome + "<br>" + item.cognome + "</a>" )
     .appendTo( ul );
}; 
```

资源：

jquery ui 自动完成方法 [http://jqueryui.com/demos/autocomplete/#event-select](http://jqueryui.com/demos/autocomplete/#event-select)

# java - android-java 错误

> ID：11066705
> 
> 赞同：-1
> 
> 时间：2012-06-16T20:14:33.943
> 
> 标签：java, android

我正在尝试开发一个应用程序..以下是一个片段

```
class metro_nodes {
public String station;
public GeoPoint point; }

public class mainscreen extends MapActivity {
/** Called when the activity is first created. */

MapController controller;
double latitude,longitude;
LocationManager loc;
Location lastknownloc;
LocationListener loclistener;
List<GeoPoint> geopoints = new ArrayList<GeoPoint>();
MapView mapView;
private LinkedList<metro_nodes> station_location = new LinkedList<metro_nodes>();
metro_nodes anand_nagar;
anand_nagar.station = "anand_nagar";
    } 
```

现在在倒数第二行给出-“令牌“站”上的语法错误，此令牌后预期的VariableDeclaratorId”

如果我在这个语句周围加上花括号，那么错误就会被删除..但是我得到 java lang 空指针异常......问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:26:11.973

您在那里有类字段声明，倒数第二行是不属于变量声明部分的语句 - 必须作为方法/构造函数的一部分来完成。

通过将它括在花括号中，您实际上是在创建一个类初始化块，但是在将任何实例分配给它之前尝试访问 anand_nagar 变量会导致 NPE。Austin 是对的 - 似乎您缺少一些基本的 Java 编程知识，所以也许您应该先从一些 Java 教程开始：[http ://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:23:19.663

空指针到期是因为您没有使用 new 为变量 anand_nagar 创建 metro_nodes 实例

```
metro_nodes anand_nagar;
anand_nagar = new metro_nodes();//<----------------need this line to avoid NPE 
anand_nagar.station = "anand_nagar"; 
```

并且还请遵循标准，例如类名应该像 java 中的 MetroNode .....

```
public class MainScreen extends MapActivity {

    private MapController mController;
    private double mLatitude,mLongitude;
    private LocationManager mLoc;
    private Location mLastknownloc;
    private LocationListener mLoclistener;

    private MapView mMapView;
    private LinkedList<MetroNode> mStationLocations;
    MetroNode mAnandNagar;

    //in general we use cunstructor for initliaztion but in android we usesonCreate
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // ..other code ..............

        List<GeoPoint> geoPoints = new ArrayList<GeoPoint>();
        mStationLocations = new LinkedList<MetroNode>();
        mAnandNagar = new MetroNode();
        mAnandNagar.setStation("anand_nagar");
    }
}

class MetroNode {
    private  String station;
    private  GeoPoint point;

    public MetroNode(){
        super();    
    }

    public MetroNode(String station, GeoPoint point) {
        super();
        this.station = station;
        this.point = point;
    }

    public String getStation() {
        return station;
    }
    public void setStation(String station) {
        this.station = station;
    }
    public GeoPoint getPoint() {
        return point;
    }
    public void setPoint(GeoPoint point) {
        this.point = point;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:27:23.577

你还没有发布给你语法错误的代码......但我猜你得到了空指针异常，因为你从未初始化任何“metro_nodes”对象。

例如：

```
// This is a helper class
class MetroNode {
  public String station;
  public GeoPoint point; 

  public MetroNode (String station, GeoPoint point) {
    this.station = station;
    this.point = point;
  }
}

// This is the module's main class
public class MainScreen extends MapActivity {

  // This is public and private data for each class instance
  private LinkedList<MetroNode> station_location = null;

  // This is the activity's initialization
  public void onCreate(Bundle savedInstanceState) 
    station_locations = new LinkedList<MetroNode>();
    MetroNode metroNode = new MetroNode ("anand_nagar", new GeoPoint (1.00, 2.00));
    station_locations.add (metroNode);
  ... 
```

# jquery - JQuery XML 有 .text() 只返回当前节点文本

> ID：11066706
> 
> 赞同：0
> 
> 时间：2012-06-16T20:14:36.550
> 
> 标签：jquery, xml

抱歉标题含糊。这是我想做的一个例子。

```
<book>
  The Lord of the Rings
  <author>JRR Tolkien</author>
</book>

$xml.find("book").each(function()
{
  $(this).text();
}); 
```

$(this).text(); 不仅返回“指环王”，还返回......以及里面的任何其他节点。我正在寻找一种一致的方式来只返回“指环王”或我在那里的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:17:00.370

您需要使用`contents()`获取所有节点，然后`.filter()`删除任何不是文本节点的节点：

```
$xml.find("book").contents().filter(function() {
    return this.nodeType == Node.TEXT_NODE;
}).each(function() {
    // $(this).text();
}); 
```

^([来源](https://stackoverflow.com/a/298758/298479))

如果代码也需要在 IE7 中运行，则必须替换`Node.TEXT_NODE`为`3`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T20:33:15.997

可能该文本将始终在标记之前，因此您也可以获取内容的第一个节点

```
$(xml).find('book').each(function(){
   var text=$(this).contents().eq(0).text();
}); 
```

演示：http: [//jsfiddle.net/nS5bj/](http://jsfiddle.net/nS5bj/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T20:27:37.557

您可以克隆元素并删除该克隆的子元素，留下裸文本：

```
$xml.find("book").each(function()
{
    var title = $(this).clone().children().remove().end().text();
}); 
```

这里的使用[`.end`](http://api.jquery.com/end/)是关键，因为它会终止`.remove`操作（删除所有子标签），留下剩余的文本。

[JSFiddle](http://jsfiddle.net/YD8LH/)

# jquery - 单击选项时显示元素

> ID：11066709
> 
> 赞同：1
> 
> 时间：2012-06-16T20:15:19.473
> 
> 标签：jquery, onclick, hide, show, option

我试图让一个选择元素显示何时单击另一个选择元素中的选项或不等于默认值。我尝试在这里查看其他一些帖子，但我无法获得与我的代码一起使用的解决方案。

```
$(document).ready(function() {
    $("div.caseType ul").hide();
    $("#stateSelect").click(function() {
        var currentState = $("#stateSelect option:selected").val();

        if(currentState != "State") {
            $("ul#" + currentState).show();
        }
    });
}); 
```

```
<div id="select">
    <select name="state" id="stateSelect">
            <option value="State">State</option>
            <option value="Arizona">Arizona</option>
            <option value="California">California</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Florida">Florida</option>
            <option value="Illinois">Illinois</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New York">New York</option>
            <option value="Ohio">Ohio</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Washington">Washington</option>
    </select>
</div>
<br style="clear:both;"/>
<div id="label">
        <label>Case type:</label>
    </div>
<div id="select" class="caseType">

    <ul id="Arizona">

    <li style="list-style-type:none;">
            <select name="conviction">
                <option>Select One</option>
                <option value="arrestedWithoutConviction">Arrested without Conviction</option>
                <option value="adultConviction">Adult Conviction</option>
                <option value="diversionDeferred">Diversion Program / Deferred Case</option>
                <option value="juvenile">Juvenile Conviction</option>
            </select>
    </li>
    </ul>
    <ul id="Ohio">
    <li style="list-style-type:none;">
    <select name="conviction">
    <option>Select One</option>
    <option value="adultConviction">Adult Conviction</option>
    <option value="adultDismissedCase">Adult Dismissed Case</option>
</select>
    </li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:23:50.487

可能您需要使用`change`事件，而不是`click`：

```
$(document).ready(function() {    
    $("#stateSelect").change(function() {
        $("div.caseType ul").hide();

        var currentState = $(this).val();         
        if(currentState != "State") {
            $("ul#" + currentState).show();
        }
    }).trigger('change');   //For hiding all 'ul's on initial load
}); 
```

# c# - 如何继续跟踪按基本类型选择的实体？

> ID：11066710
> 
> 赞同：1
> 
> 时间：2012-06-16T20:15:24.817
> 
> 标签：c#, entity-framework, ef-code-first

我有一个基础实体，超过 20 个实体是从这个基础实体派生的。这是我的实体样本；

```
Base -> Desc { Id, Description, Code } 
Derived from Desc -> DescCity { Plate } 
Derived from Desc -> DescSex 
Derived from Desc -> DescNationality 
```

和更多...

现在我选择我所有的实体作为基本类型，没有 OfType() 方法，也没有强制转换。

当我通过 Id 或 Description 或任何其他具有 .Where(x=>x.....) 函数的属性选择实体时，一切似乎都正常。但是如果想创建一个像 Person { Name="Baran", DescSex = (DescSex)selectDescById(1) } 这样的实体，问题就开始了……让我们看看 selectDescById 函数；

```
public void selectDescById(int id){ return db.Desc.Where(x=>x.Id==id).FirstOrDefault(); } 
```

当我将返回的 Desc 对象转换为 DescSex 类型时，实体框架会丢失对实体的跟踪并重新创建选定的 DescSex 实体（我之前从数据库中选择的实体）。并且在每个新的 Person EF 上插入新的 DescSex 实体。

如何在不为每个派生类型编写选择函数的情况下解决此问题？有没有办法继续跟踪？谢谢。

# python - 如何使用 virtualenvwrapper 进行 ckan 开发？

> ID：11066711
> 
> 赞同：1
> 
> 时间：2012-06-16T20:15:58.607
> 
> 标签：python, virtualenv, virtualenvwrapper, ckan

使用 virtualenvwrapper 在 CKAN 项目上进行开发比您从[virtualenvwrapper 介绍](http://www.doughellmann.com/docs/virtualenvwrapper/)中获得的简单工作流程要复杂一些，即只需`mkvirtualenv ckan`按照[CKAN 源安装说明](http://docs.ckan.org/en/latest/install-from-source.html)将 CKAN 安装到您的 virtualenv 中，然后在 CKAN 上进行破解。

如果我正确理解了 virtualenvwrapper 文档，最好使用该`mkproject ckan`命令，以便在您的`WORKON_HOME`（默认情况下）中隐藏一个名为 ckan 的 virtualenv，并在您的（在我的机器上）中有一个名为 ckan`~/.virtualenvs`的漂亮、整洁的项目目录，其中仅包含您实际正在处理的源代码存储库，并且不会与进入 virtualenv 的所有其他文件混杂在一起。但是 virtualenvwrapper 的项目管理文档不是很详细..`PROJECT_HOME``~/Projects`

如果我这样做`mkproject ckan`然后继续按照 ckan 源安装说明进行操作，则该`pip install --ignore-installed -e git+https://github.com/okfn/ckan.git#egg=ckan`命令将 ckan git repo 安装在我想要的位置`~/.virtualenvs/ckan/src/ckan`而不是我的目录中。`~/Projects/ckan`如何让 ckan git repo 在我的项目目录中？

作为同一个 virtualenvwrapper 项目的一部分，我还想破解不同的 CKAN 扩展（其中一些在他们自己单独的 git 存储库中），所以我希望 virtualenvwrapper 也安装这些扩展`~/Projects/ckan`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:16:00.340

我正在回答我自己的问题，以下似乎对我来说已经足够好了，但我认为可以通过自动化我手动执行的所有 git 克隆和 pip 安装等来改进这个答案......

诀窍是稍微偏离 ckan 源安装说明并`git clone`“手动”将 ckan 安装到项目目录中，然后您需要执行一个附加`python setup.py develop`命令将 ckan 安装到您的 virtualenv 中（pip install 命令会为您处理这个）：

```
> mkproject ckan 
```

这将创建一个 ckan virtualenv at`WORKON_HOME/ckan`和一个 ckan 项目目录 at `PROJECT_HOME/ckan`，激活 virtualenv 和 cd 到项目目录中。到目前为止，virtualenv 和项目目录是“空的”，还没有安装 ckan。现在克隆 ckan git repo：

```
(ckan)~/Projects/ckan> git clone git@github.com:okfn/ckan.git 
```

这会将 git 存储库克隆到`~/Projects/ckan/ckan`. 此时 ckan 命令仍然不起作用，您已经克隆了 git repo 但您还没有将 ckan 安装到您的 virtualenv 中：

```
(ckan)~/Projects/ckan> cd ckan
(ckan)~/Projects/ckan/ckan> python setup.py develop 
```

在您将 ckan 的依赖项安装到您的 virtualenv 之前，ckan 命令*仍然无法工作：*

```
(ckan)~/Projects/ckan/ckan> pip install --ignore-installed -r requires/lucid_missing.txt -r requires/lucid_conflict.txt -r requires/lucid_present.txt
(ckan)~/Projects/ckan/ckan> pip install webob==1.0.8 
```

现在，终于可以运行 ckan 命令了：

```
(ckan)~/Projects/ckan/ckan> paster make-config ckan development.ini
    (edit development.ini as necessary)
(ckan)~/Projects/ckan/ckan> paster serve development.ini
Starting server in PID 17356.
serving on 0.0.0.0:5000 view at http://127.0.0.1:5000 
```

从现在开始，每次您想开始在 ckan 上开发时，您只需运行`workon ckan`以激活您的 ckan virtualenv 并 cd 到您的 ckan 项目目录，然后破解。

如果您还想破解 CKAN 扩展，例如 ckanext-harvest，您可以将该 git repo 安装到您的 ckan 项目目录中，并与 ckan git repo 一起：

```
(ckan)~/Projects/ckan> git clone git@github.com:okfn/ckanext-harvest.git
(ckan)~/Projects/ckan> cd ckanext-harvest
(ckan)~/Projects/ckan/ckanext-harvest> python setup.py develop 
```

# mongodb - MongoDB：动态生成的字段值

> ID：11066714
> 
> 赞同：1
> 
> 时间：2012-06-16T20:16:12.693
> 
> 标签：mongodb

假设我有一个包含学生信息的数据库：

```
{'student_name' : 'Alen', 'subjects' : {'cse101' : 4, 'cse102' : 3, 'cse201' : 4}} 
```

假设我还需要存储学生的汇总信息。我可以将字段添加`'aggregate' : 3.67`到记录中。但是当另一个主题添加到`subjects`列表中时，聚合会发生变化。有没有办法可以编写一个“动态字段”，可以在请求时计算聚合？类似的东西`student['aggregate']`不是持久的，但在需要时可用？

PS：聚合只是一个简单的例子。我正在处理涉及元素的各个其他领域的更复杂的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:40:48.140

目前 MongoDB 中没有动态或计算字段（尽管 jira 中有[一些票证](https://jira.mongodb.org/browse/SERVER-2549)）。

但是您始终可以在应用程序代码中实现此功能。

# android - 手机响铃时Android Text to Speech中断

> ID：11066716
> 
> 赞同：3
> 
> 时间：2012-06-16T20:16:27.670
> 
> 标签：android, text-to-speech

在我的 android 应用程序中，我使用文本到语音引擎来说出一段文本。语音代码在电话响铃时运行。语音中断，我在 logcat 中看到以下警告。请注意，在 SDK 15（冰淇淋三明治）上会出现此问题，尤其是仅在电话响铃时调用语音代码时，否则即使在 ICE 上，在电话不响铃的任何其他时间调用语音代码时都可以正常工作。该代码在 SDK 8 和 10 上运行良好。

我得到的警告是：

```
com.svox.pico W/AudioTrack(549): obtainBuffer() track 0x177dd8 disabled, restarting
com.svox.pico W/AudioTrack(549): obtainBuffer() track 0x177dd8 disabled, restarting
com.svox.pico D/dalvikvm(549):   GC_CONCURRENT freed 441K, 8% free 6552K/7111K, paused 3ms+107ms
com.svox.pico W/AudioTrack(549): obtainBuffer() track 0x156058 disabled, restarting
com.svox.pico D/dalvikvm(162):   GC_CONCURRENT freed 532K, 11% free 8391K/9415K, paused 5ms+6ms 
```

相关的代码在 Service 的线程中运行，服务在接到电话时在广播接收器中启动。

```
// The constructor of speaker class
public Speaker(final Context context, final Settings settings) 
{   
    this.settings = settings;
    params = new HashMap<String, String>();      
    params.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_ALARM));
    params.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, "myapp");

    this.context = context;      

    synchronized (synch) 
    {   
        talker = new TextToSpeech(context, this);
    }

    Utils.log(TAG, "Created TextToSpeech..");
}

@Override
public void onInit(final int status) 
{
    synchronized (synch) 
    {   
        Utils.log(TAG, "TTS onInit..");

        if(talker == null)
        {
            throw new RuntimeException(Utils.collectPlatformInfo(context));
        }

        if(TextToSpeech.ERROR == talker.setOnUtteranceCompletedListener(new SpeechFinishedListener()))
        {
            Utils.log(TAG, "Error tts setUt");
            return ; 
        }

        int code = talker.setLanguage(Locale.getDefault());

        if(code == TextToSpeech.LANG_NOT_SUPPORTED || code ==TextToSpeech.LANG_MISSING_DATA)
        {
            Utils.log(TAG, String.format("Error settingLang on TTS code %d", code));            
        }

        if(TextToSpeech.ERROR == talker.setSpeechRate(settings.getSpeed()))
        {
            //this error is not a fatal, we can continue
            Utils.log(TAG, "Error tts setSPeechrate");                      
        }

        if(TextToSpeech.ERROR == talker.setPitch(settings.getPitch()))
        {   
            //this error is not a fatal, we can continue
            Utils.log(TAG, "Error tts setPitch");           
        }

        ready = true;
    }
}

    // The function used to provide text to be spoken..
public void speak(final String text) throws InterruptedException
{
    if(bEngineFailure)
        return;

    if(!ready)
    {
        Utils.log(TAG, "engine not initialized");
        bEngineFailure = true;
        return;
    }

    bSpeechComplete = false;

    talker.speak(text, TextToSpeech.QUEUE_ADD, params);

    while(!bSpeechComplete)
    {
           Thread.sleep(100);           
    }   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:40:45.057

这只是一个猜测，因为这里没有什么可做的，但是如果电话音量在响铃（不振动）到来电时铃声将播放的位置以及某种其他音频时，我已经看到了类似的情况播放（即：TTS/音乐/视频）其中一个音频流变得断断续续/中断，因为它试图同时播放两者。如果这是您希望同时播放两者的效果，那么您可以做的一项工作是`PhoneStateListener`每隔一段时间延长并暂停音频，然后播放 TTS

`PhoneStateListener`可以在[这里](https://stackoverflow.com/questions/3387556/incoming-call-dynamically-override-default-ringtone)找到扩展的示例

# android - 再次开机时，MapView Fragment 显示黑色（View 为空）

> ID：11066721
> 
> 赞同：0
> 
> 时间：2012-06-16T20:17:06.220
> 
> 标签：android, google-maps, tabs, android-fragments, android-mapview

我在 Fragment 中的 MapView 解决方案主要基于 ChristophK、user1414726 和 inazaruk 在这篇 SO 帖子中提供的示例：[mapview-in-a-fragment](https://stackoverflow.com/questions/5109336/mapview-in-a-fragment-honeycomb)

在 Fragment 中调用 onPause() 时，会进行一些清理以避免 IllegalArgumentException。onPause 和 onStop 中的代码：

```
if (mapViewContainer != null) {
mapViewContainer.setVisibility(View.GONE);
((ViewGroup) mapViewContainer.getParent()).removeView(mapViewContainer);
mapViewContainer = null;
} 
```

这在滑动到其他 Fragment 时调用 onPause 时效果很好，因为当 MapActivity 再次可见时，onCreateView(..) 在 Fragment 中被覆盖，其中 mapViewContainer 被重新实例化。

**但是**当我关闭屏幕时；当屏幕重新开机时，onCreateView(..) 不会被覆盖（onPaused 和 onResume 调用工作正常）。这会导致 MapView 显示为黑色，因为在 onPause 中的 removeView 调用中视图为空，直到在某些交互后再次调用 onCreateView(..)。

当屏幕重新启动时，如何强制 onCreateView 覆盖或以某种方式将 MapView 添加回 Fragment？

onCreateView(..) 中的代码：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState) {
// This is where you specify you activity class
Intent i = new Intent(getActivity(), MapTabActivity.class);
Window w = mLocalActivityManager.startActivity("tag", i);
mapViewContainer = w.getDecorView();
mapViewContainer.setVisibility(View.VISIBLE);
mapViewContainer.setFocusableInTouchMode(true);
((ViewGroup)
mapViewContainer).setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
return mapViewContainer; } 
```

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:51:46.263

我可能已经找到了我们问题的答案。我不认为这是一个很好的，但它似乎工作..

如果您在 onStart() 中保存对 mapViewContainer 的父级（我将其设为静态）的引用，则可以在 onResume() 中将 mapViewContainer 添加到父级（如果它尚未包含）。

这是我所做的：

```
private static ViewParent parent;
@Override
public void onStart() {
    super.onStart();

    parent = mapViewContainer.getParent();      

}

@Override
public void onResume() {
    super.onResume();

    if(mapViewContainer != null && parent != null && ((FrameLayout) parent).findViewById(mapViewContainer.getId()) == null) {
        ((FrameLayout) parent).addView(mapViewContainer);
    }
} 
```

在 onPause() 中我没有设置 mapViewContainer == null，所以我可以重用它。

如果您有任何改进此“解决方案”的建议，非常欢迎您！

希望能帮助到你。

干杯

# php - PHP自动完成搜索不显示

> ID：11066723
> 
> 赞同：-3
> 
> 时间：2012-06-16T20:17:39.077
> 
> 标签：php, sql, search

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

每次输入关键字进行搜索；它显示警告“警告：mysql_num_rows() 期望参数 1 是资源，第 134 行给出的布尔值”。php 在键入时成功显示自动完成搜索，但一旦我“提交”就会出现此错误。我的相关代码：

```
 <?php
//allow sessions to be passed so we can see if the user is logged in
session_start();

//connect to the database so we can check, edit, or insert data to our users table
require_once("functions/connection.php"); 
//include out functions file giving us access to the protect() function made earlier
include "functions/functions.php";

?>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <link rel="shortcut icon" href="http://sifeiitd.org/favicon.ico">
<link rel="stylesheet" href="css/style.css" type="text/css" media="all">

<script type="text/javascript">

var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30675532-1']);
    _gaq.push(['_setDomainName', 'SIFE IIT Delhi']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script>
$(document).ready(function() {
  $("#keywords").autocomplete({
    source: keywordList,
    minLength: 2,

  });
});
</script>
<?php echo keywordArray(); ?>
<?php function keywordArray()
{
  $rsKeywords = mysql_query("SELECT * FROM job");

  $output = '<script>'."\n";
  $output .= 'var keywordList = [';

  while($row_rsKeywords = mysql_fetch_assoc($rsKeywords))
  {
    $output .= '"'.$row_rsKeywords['work'].'",';
  }

  $output = substr($output,0,-1); //Get rid of the trailing comma
  $output .= '];'."\n";
  $output .= '</script>';
  return $output;
}
?> 

</head>

<body>
    <div id="container">
<!-- header -->
        <header class="b_border">
            <h1><a href="index.html"><img src="images/logo_page.png"></a></h1>
        </header>
<!-- / header -->
<!-- content -->
        <section class="content">
            <?php

                //if the login session does not exist therefore meaning the user is not logged in
                if(strcmp($_SESSION['uid'],"") == 0){
                    //display and error message
                    echo "<center>You need to be logged in to user this feature!</center>";
                }else{
                    //otherwise continue the page

                    //this is out update script which should be used in each page to update the users online time
                    $time = date('U')+50;
                    $update = mysql_query("UPDATE `employer` SET `online` = '".$time."' WHERE `id` = '".$_SESSION['uid']."'");
                    $display_query = mysql_query("SELECT * FROM employer WHERE `id` = '".$_SESSION['uid']."'");
                    echo '<div class="col1 lfloat">';
                    echo "<table id='pageTable'><tbody><th>Your Details</th>";
                    echo "<tbody>";
                    while($row = mysql_fetch_array($display_query)){
                        echo "<tr><td>Name&#58;&nbsp;</td><td>".$row['name']."</td><tr>";
                        $currentuser = $row['name'];
                        echo "<title>".$row['name']. "&#124; SIFE IIT Delhi</title>";
                        echo "<tr><td>E&#45;Mail ID&#58;&nbsp;</td><td>".$row['email']."</td><tr>";
                        echo "<tr><td>Contact No&#46;&#58;&nbsp;</td><td>".$row['contact']."</td><tr>";
                        echo "<tr><td>Company&#58;&nbsp;</td><td>".$row['company']."</td><tr>";
                        echo "<tr><td>Designation&#58;&nbsp;</td><td>".$row['designation']."</td><tr>";
                    }

                    echo "</tbody>";
                    echo "</table>";
                    echo "<table><tr><td>";
                    echo '<div class="button"><a href="functions/logout.php">Logout</a></td></tr></table>';
                    echo '</div>';

                    echo '<div class="col1 rfloat">';
                    echo "Dear ".$currentuser." please input the type of job for a potential candidate";

                    echo '<form action="loggedin_employer.php" method="post" id="loginForm">';
                        echo '<table cellpadding="2" cellspacing="0" border="0"><tr><td>';
                            echo '<input class="input" id="keywords" name="keywords" type="text" ></td></tr>';
                            echo '<tr><td colspan="2" align="right"><input class="button" type="submit" name="submit" value="Search" /></td>
                        </tr></table>';
                //make sure you close the check if they are online

                    if(!isset($_POST['submit'])){
                        echo "Your search was invalid";
                        exit;
                    } 

                    $keyword = mysql_real_escape_string($_REQUEST['keywords']);
                    $sql = "SELECT * FROM job WHERE work=$keyword LIMIT 10";

                    $result = mysql_query($sql);
                    $numrows = mysql_num_rows($result);

                    echo "<table id='pageTable'><tbody><th>Your Details</th>";
                    echo "<tbody>";
                    if($numrows == 0){
                        echo "Sorry, your search did not return any results";
                    }

                    else{

                        $i = 0;

                        while($i < $numrows){
                        $row1 = mysql_fetch_array($result);
                        echo "<tr><td>Name&#58;&nbsp;</td><td>".$row1['name']."</td><tr>";
                        echo "<tr><td>E&#45;Age&#58;&nbsp;</td><td>".$row1['age']."</td><tr>";
                        echo "<tr><td>Sex&#46;&#58;&nbsp;</td><td>".$row1['gender']."</td><tr>";
                        echo "<tr><td>Location&#58;&nbsp;</td><td>".$row1['location']."</td><tr>";
                        $i++;
                        }
                    }

                    echo "</tbody>";
                    echo "</table>";

                    echo '</div>';
                    echo '</form>';

                }

            ?>

        </section>
<!-- / content -->
<!-- footer -->
        <div class="footer" >

        </div>
<!-- / footer -->
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:20:29.307

## 简答

只需不要将任何参数传递给`mysql_num_rows()`函数。

## 更长的答案

成功时`mysql_query()`返回资源，失败时返回 FALSE，这会弄乱您的代码。

您想要的是捕获 的结果`mysql_connect()`，**或者根本不传递参数**。

*但是你**需要**的是使用函数以外的东西`mysql_*`：*

> 欢迎来到堆栈溢出！请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有很好的 PDO 教程](http://goo.gl/vFWnC)。

# css - Twitter Anywhere 下拉菜单上的奇怪 IE 唯一错误

> ID：11066724
> 
> 赞同：0
> 
> 时间：2012-06-16T20:17:47.110
> 
> 标签：css, internet-explorer, twitter, twitter-anywhere

我真的希望我能找到一位 CSS 专家来帮助解决这个奇怪的问题。

在 Chrome/Firefox 和 Opera 中，这可以正常工作。

但是在 IE9 和更早的版本中我遇到了问题。

要查看问题，请按照以下简单步骤操作。

1) 转到 www.spoilertv.com 并将鼠标悬停在 HOME 按钮/链接上

2）将鼠标悬停在“Twitter Connect”按钮上

3) 菜单消失。

Twitter Connect 按钮是一个 Twitter Anywhere 按钮，它基本上创建了一个 iframe。

将鼠标悬停在 twitter 按钮上会导致菜单和按钮消失。就好像鼠标已经从下拉菜单中移开一样。

这一切都适用于 Firefox、Chrome 和 Opera。

我在这里完全不知所措:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:54:45.773

看起来这是“设计”的 IE 行为

[IE7/8：如果鼠标移到 div 内的 iframe 上，则 div 会丢失 :hover！](https://stackoverflow.com/questions/4507388/ie7-8-div-loses-hover-if-mouse-moves-over-an-iframe-which-is-inside-the-div)

我不得不用自定义按钮和登录功能替换 Twitter @Anywhere 按钮，这消除了对 iframe 的需要

[https://dev.twitter.com/docs/anywhere/welcome#login-signup](https://dev.twitter.com/docs/anywhere/welcome#login-signup)

# c# - C# 后台工作者，winform。“跨线程操作无效：”

> ID：11066725
> 
> 赞同：2
> 
> 时间：2012-06-16T20:17:51.913
> 
> 标签：c#, winforms, multithreading, backgroundworker

我试图让后台工作人员以最基本的方式使用 Windows 窗体运行，例如让后台进程更改标签中的文本。我在这里得到了基本的后台工作人员代码[。http://www.albahari .com/threading/part3.aspx](http://www.albahari.com/threading/part3.aspx) Heres the code in my form.. 试图让它按下一个按钮，然后生成后台工作线程，这会更改标签中的文本

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

       namespace WindowsFormsApplication4
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            BackgroundWorker _bw = new BackgroundWorker();

             void backgroundio()
            {
                _bw.DoWork += bw_DoWork;
                _bw.RunWorkerAsync("Message to worker");

            }

             void bw_DoWork(object sender, DoWorkEventArgs e)
            {
                // This is called on the worker thread
                label1.Text = (string)(e.Argument);        // writes "Message to worker"
                // Perform time-consuming task...
            }

             void button1_Click(object sender, EventArgs e)
             {
                 backgroundio();
             }

        }
    } 
```

对于 label1.Text = (string)(e.Argument); 我得到这个错误。

跨线程操作无效：控件“label1”从创建它的线程以外的线程访问。

感谢您的帮助！:)

实际上，当我在这里时，有人可以解释一下这条线吗？

```
 _bw.DoWork += bw_DoWork; 
```

我不明白 += 在这种情况下有什么意义。你怎么能添加这些东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T20:33:47.043

## 第一季度

你的`bw_doWork`方法是静态的。这意味着您的类的所有实例只有其中一种方法。该方法无法访问特定于实例的属性或字段或方法。这解释了编译器错误。

如果您将该方法更改为不是静态的，它将允许您在`label1`其中引用。

* * *

## Q2。

您引用的语法是向该事件添加事件处理程序的快捷方式。

它只是意味着“将此处理程序添加到给定事件的处理程序列表中”。这样做的长期方法是使用 AddEventHandler。

[http://msdn.microsoft.com/en-us/library/system.reflection.eventinfo.addeventhandler.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.eventinfo.addeventhandler.aspx)

## 第三季度

您在运行时收到的神秘消息表明您无法在非 uI 线程上更新 UI 对象。（bg worker 意味着不同的线程。）解决方案是在 UI 线程上执行您想要的更新。

```
void bw_DoWork(object sender, DoWorkEventArgs e)
{
    // This is called on the worker thread
    UpdateLabel((string)e.Argument));
      ...more work here...
}

void UpdateLabel(string s)
{
    if (this.label1.InvokeRequired)
    {
        // It's on a different thread, so use Invoke.
        this.BeginInvoke (new MethodInvoker(() => UpdateLabel(s));
    }
    else
    {
        // It's on the same thread, no need for Invoke
        this.label1.Text = s;
    }
} 
```

要了解更多信息，[请访问 http://msdn.microsoft.com/en-us/library/ms171728(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms171728(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T20:45:05.110

在 DoWork 事件中，您应该执行要在不同线程上执行的工作，即。“不会冻结您的应用程序的后台工作”。

然后你有一个进度事件（我认为，至少类似的东西） - 这是你更新你的 GUI 的地方，即。更改文本或标签。不要在这里做任何繁重的工作，这是你的主线。

在您的 DoWork 事件中，即。后台线程，您可以使用 BackgroundWorker 对象上的方法向主线程报告进度（我不记得方法的名称，例如 Report、Progress 之类的东西），然后将调用 Progress-event主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:26:39.347

您不能从`DoWork`事件更新 UI 控件。UI 可以从`_bw_RunWorkerCompleted`.

通过事件参数将要在 UI 元素中更新的值从`DoWork`事件传递给`RunWorkerCompleted`Even，并在 Completed 事件中更新标签。

# c# - OOP - 如何在类构造函数之前调用函数

> ID：11066727
> 
> 赞同：1
> 
> 时间：2012-06-16T20:18:07.093
> 
> 标签：c#, java, oop

我明天有一个工作面试，我试图回答这个问题：

该类中有一个名为`C`和方法`m`的类，该类也有空的构造函数：

```
Main ()
{
C c = new c();

}

Class C {

public c {

//empty constructor

}

public m {

//does something - doesnt mind

}

} 
```

您需要做的是更改代码，以便在创建实例类时，在类构造函数之前调用`C`该方法。`m`

您必须在不更改`main`（仅编辑类代码）的情况下执行此操作。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:24:40.803

要在调用其构造函数之前调用类的方法，您必须将此方法转换为**静态**方法，这样您就不需要该类的实例来调用它，或者（在 C# 中）您可以使用[FormatterServices.GetUninitializedObject 方法](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatterservices.getuninitializedobject.aspx)来获取实例在不运行构造函数的情况下运行你的类（这当然可能不是明智的做法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T20:28:18.353

就像其他答案所说的那样，您可以将方法设为静态。但是你需要明确地调用它。如果您创建一个静态类构造函数，它将在第一次引用该类时自动调用一次（您不需要调用它）（就像您构造第一个实例时一样）。您无法准确控制它何时执行，但它将在第一个实例构建之前执行。根据他们提出问题的方式（您不能更改 Main 方法），我认为静态类构造函数是他们正在寻找的答案。

[http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)

> 静态构造函数具有以下属性： 静态构造函数不采用访问修饰符或具有参数。在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。不能直接调用静态构造函数。用户无法控制何时在程序中执行静态构造函数。

Java 没有静态类构造函数，但它们确实有静态初始化块。

```
static {
    // code in here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T20:38:06.627

在 Java 和 C# 中，您可以使用基类构造函数、静态构造函数（编辑：Java 中的静态初始化程序块）和字段初始化程序，在`C`类的构造函数执行之前调用代码，而无需修改`Main`.

在 Java 中使用字段初始值设定项块的示例：

```
class C {

    { m(); }

    public C() {
        System.out.println("cons");
    }

    public void m() {
        System.out.println("m");
    }
} 
```

这会打印“m”，然后是“cons”。请注意，`m`每次`C`构造 a 时都会调用它。JVM 只会调用一次静态初始化程序块。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-16T20:46:48.843

**在 JAVA 中：** 制作方法并在块`static`中调用您的方法。`static`

```
class C{

static{
    m();
}

public C() {
    System.out.println("Constructor Called..");
}

public static void m() {
    System.out.println("m() is called.");

}
} 
```

主叫

```
public static void main(String[] args) {
    new C();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T20:25:08.180

它的基本面向对象。您必须创建一个公共静态方法并调用它。然后该方法可以调用构造函数，或者您可以直接从 main 调用构造函数。

在调用构造函数之前，对象不存在，因此不存在实例方法，因此无法调用与实例/对象相关的任何内容。在调用构造函数之前唯一存在的是静态方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-10T18:25:57.113

以下方式似乎可以达到所需的效果。不使用静态方法/变量

```
namespace FnCallBeforeConstructor
{
    static void Main(string[] args)
    {
        MyClass s = new MyClass();

        Console.ReadKey();
    }

    partial class  MyClass: Master
    {
        public override void Func()
        {
            Console.WriteLine("I am a function");
        }

        public MyClass()
            : base()
        {
            Console.WriteLine("I am a constructor");
        }
    }

    class Master
    {
        public virtual void Func() { Console.WriteLine("Not called"); }

        public Master()
        {
            Func();
        }
    }
} 
```

输出是：

我是一个函数

我是构造函数

# php - createFormat PHP 输入字符串与输出对象不匹配

> ID：11066729
> 
> 赞同：0
> 
> 时间：2012-06-16T20:18:45.690
> 
> 标签：php, string, datetime

我将以下字符串分配给变量：

```
$date = "16 June, 2012, 13:00pm"; 
```

我正在通过 createFromFormat 运行它以尝试将其转换为 DateTime 对象：

```
$dateTime = DateTime::createFromFormat("d M, Y, H:ia", $date); 
```

这是我回来的对象：

```
DateTime Object
(
    [date] => 2012-06-17 01:00:00
    [timezone_type] => 3
    [timezone] => Europe/Dublin
) 
```

老实说，我不确定我做错了什么，createFromFormat 中使用的格式看起来与输入字符串的格式匹配，但输出错误。在此示例中，日期是 17 日而不是 16 日，时间显示为 01:00:00 而不是 13:00:00

任何想法或指示都会有帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:22:54.953

PM 被解释`DateTime`为“在结果中增加 +12 小时”，这会使您的日期失去平衡。

简单的解决方案：删除 PM，或使用 12 小时制版本（即下午 1:00）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:20:54.643

尝试摆脱下午。24 小时制的重点是您不需要上午/下午。

```
$date = "16 June, 2012, 13:00";
$dateTime = DateTime::createFromFormat("d M, Y, H:i", $date); 
```

# javascript - 动态生成元素的淘汰数据绑定

> ID：11066732
> 
> 赞同：52
> 
> 时间：2012-06-16T20:19:14.710
> 
> 标签：javascript, jquery, knockout.js

如何使剔除数据绑定对动态生成的元素起作用？例如，我在 div 中插入了一个简单的 html 选择菜单，并希望使用敲除选项绑定来填充选项。这就是我的代码的样子：

```
$('#menu').html('<select name="list" data-bind="options: listItems"></select>'); 
```

但这种方法不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-16T21:46:36.017

如果在绑定视图模型后动态添加此元素，它将不在视图模型中并且不会更新。你可以做两件事之一。

1.  将元素添加到 DOM 并通过再次调用重新绑定`ko.applyBindings();`它
2.  或者从头开始将列表添加到 DOM，并将视图模型中的选项集合留空。在您稍后将元素添加到选项中之前，Knockout 不会渲染它。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-14T09:13:28.660

淘汰赛 3.3

```
ko.bindingHandlers.htmlWithBinding = {
          'init': function() {
            return { 'controlsDescendantBindings': true };
          },
          'update': function (element, valueAccessor, allBindings, viewModel, bindingContext) {
              element.innerHTML = valueAccessor();
              ko.applyBindingsToDescendants(bindingContext, element);
          }
    }; 
```

上面的代码片段允许您使用“htmlWithBinding”属性动态注入 html 元素。然后还会评估添加的子元素......即它们的数据绑定属性。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-13T12:38:27.910

重写 html 绑定代码或创建一个新的。因为 html 绑定可以防止动态 html 中的“注入绑定”：

```
ko.bindingHandlers['html'] = {
  //'init': function() {
  //  return { 'controlsDescendantBindings': true }; // this line prevents parse "injected binding"
  //},
  'update': function (element, valueAccessor) {
    // setHtml will unwrap the value if needed
    ko.utils.setHtml(element, valueAccessor());
  }
};
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-16T18:10:20.910

**编辑：这似乎从[LosManos指出的 2.3 IIRC 版本开始不起作用](https://stackoverflow.com/questions/11066732/knockout-data-bind-on-dynamically-generated-elements/16044129#comment45578780_16044129)**

您可以使用 myViewModel[newObservable] = ko.observable('') 将另一个 observable 添加到您的视图模型

之后，再次调用 ko.applyBindings。

这是一个简单的页面，我在其中动态添加段落，新的视图模型和绑定完美无缺。

```
// myViewModel starts only with one observable
    	var myViewModel = {
    	    paragraph0: ko.observable('First')
    	};

    	var count = 0;

    	$(document).ready(function() {
    		ko.applyBindings(myViewModel);

    		$('#add').click(function() {
    			// Add a new paragraph and make the binding
    			addParagraph();
    			// Re-apply!
    			ko.applyBindings(myViewModel);			
    			return false;	
    		});
    	});

    	function addParagraph() {
    		count++;
    		var newObservableName = 'paragraph' + count;
    	    $('<p data-bind="text: ' + newObservableName + '"></p>').appendTo('#placeholder');

    	    // Here is where the magic happens
    		myViewModel[newObservableName] = ko.observable('');
    		myViewModel[newObservableName](Math.random());

    		// You can also test it in the console typing
    		// myViewModel.paragraphXXX('a random text')
    	}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.1/knockout-min.js"></script>

<div id="placeholder">
    <p data-bind="text: paragraph0"></p>
</div>

<a id="add" href="#">Add paragraph</a>
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-26T14:52:23.693

对于 v3.4.0，使用下面的自定义绑定：

```
ko.bindingHandlers['dynamicHtml'] = {
    'update': function (element, valueAccessor, allBindings, viewModel, bindingContext) {
        // setHtml will unwrap the value if needed
        ko.utils.setHtml(element, valueAccessor());
        ko.applyBindingsToDescendants(bindingContext, element);
    }
}; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-27T18:41:11.193

这是一个老问题，但这是我希望得到的最新答案（淘汰赛 3.3.0）：

当使用 knockout 模板或自定义组件向预绑定的 observable 集合添加元素时，knockout 将自动绑定所有内容。您的示例看起来像一个可观察的菜单项集合可以完成开箱即用的工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-07T20:14:14.997

基于[这个现有的答案](https://stackoverflow.com/a/24142397/795158)，我已经实现了与您最初的意图类似的东西：

```
function extendBinding(ko, container, viewModel) {
    ko.applyBindings(viewModel, container.children()[container.children().length - 1]);
}

function yourBindingFunction() {
    var container = $("#menu");
    var inner = $("<select name='list' data-bind='options: listItems'></select>");
    container.empty().append(inner);

    extendBinding(ko, container, {
        listItems: ["item1", "item2", "item3"]
    });
} 
```

这是一个可以玩的[JSFiddle 。](http://jsfiddle.net/6jer2kdc/7/)

请注意，一旦新元素成为 dom 的一部分，您就无法通过调用重新绑定它`ko.applyBindings`- 这就是我使用`container.empty()`. 如果您需要保留新元素并使其随着视图模型的变化而变化，请将 observable 传递给方法的`viewModel`参数`extendBinding`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-15T12:44:12.230

查看此答案：[如何使用预定义的文本和值选项定义自定义剔除“选项绑定”](https://stackoverflow.com/questions/20002952/how-do-define-a-custom-knockout-options-binding-with-predefined-text-and-value)

`ko.applyBindingsToNode`特别有用。

# java - Zxing via intent

> ID：11066733
> 
> 赞同：-3
> 
> 时间：2012-06-16T20:19:24.437
> 
> 标签：java, android, android-intent, zxing

在我的应用程序中，我使用 zxing 库。我通过意图开始 de zxing 条码扫描仪。但是当用户没有安装条形码扫描仪时。应用程序停止工作。如何检查 zxing 条码扫描仪是否已安装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T20:39:27.830

zxing wiki 上有一个页面明确提到了这种情况：

> ## [如何通过 Intents 从另一个 Android 应用程序扫描条形码](https://github.com/zxing/zxing/wiki/Scanning-Via-Intent)
> 
> 最好的集成方式是使用我们提供的小型代码库。它为您正确处理许多细节，例如设置类别、标志、选择最合适的应用程序，以及***最重要的是处理未安装 Barcode Scanner 的情况***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:28:55.467

您可以使用以下代码段检查用户设备上是否安装了特定应用程序

```
try{
    ApplicationInfo info = getPackageManager().
            getApplicationInfo("com.facebook.android", 0 );
    return true;
} catch( PackageManager.NameNotFoundException e ){
    return false;
} 
```

对于特定的 Zxing，您将使用以下内容。

```
 Intent intent1 = new Intent("com.google.zxing.client.android.SCAN");
 List<ResolveInfo> list = getPackageManager().queryIntentActivities(intent1,     
            PackageManager.MATCH_DEFAULT_ONLY);    
        if(list.size() > 0)  
                // Zxing is available 
        else  
           // Zxing is not available 
```

一旦你发现 Zxing 可用，你可以如下调用它

```
public Button.OnClickListener mScan = new Button.OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
        startActivityForResult(intent, 0);
    }
};

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            // Handle successful scan
        } else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
        }
    }
} 
```

# wordpress - 我需要在没有循环的情况下获取类别的名称

> ID：11066738
> 
> 赞同：0
> 
> 时间：2012-06-16T20:20:23.833
> 
> 标签：wordpress

我在页面的结尾处显示类别的名称，其中包含 CSS 所针对的标记。然后我希望循环吐出该类别中的所有帖子。我不能在循环中包含名称，因为打印出来五十次看起来很愚蠢。

# javascript - 将项目发布到叶节点时没有通知传播到集合节点

> ID：11066745
> 
> 赞同：0
> 
> 时间：2012-06-16T20:21:18.327
> 
> 标签：javascript, xmpp, openfire

给出了以下场景：

1.  /Collection1（许多用户订阅了这个集合）

2.  /Collection1/ new Leaf1（用户创建子叶节点）

    ->所有订阅者都将收到新孩子的通知。

3.  /Collection1/Leaf1/new item（用户在新创建的 Leaf1 中发布了一个 item）

是否可以配置 Collection 节点，以便将此 Collection1 节点的所有订阅者通知 Leaf1 节点中的新发布项目？

创建新的leaf1 节点时，我只看到父collection1 节点的订阅者（subscr1）的通知。但是如果另一个用户发布了一个项目，订阅者“subsc1”将不会被通知，因为他没有直接订阅新的Leaf节点。subscr1 是否可以自动成为新创建节点的订阅者以接收 Leaf1 的通知？

我实际上为 collection1 和 Leaf1 将 var "pubsub#deliver_payloads" 设置为 1。但是当项目在叶节点中发布时，subsc1 甚至不会收到通知（也没有有效负载）。

据我了解 pubsub 当项目将在子节点中发布时，应通知 Collection 节点的所有订阅者（通知将向上传播）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:24:56.390

您必须将订阅配置为类型**项目**

`pubsub#subscription_type=items`

您现在在添加叶节点时收到通知这一事实意味着订阅配置为类型为**nodes**。这只会提供叶节点的添加、删除和配置更改的通知。

如果您想在这两种情况下都收到通知，那么您只需创建另一个订阅。

# java - 如何将关系输入二维数组？

> ID：11066749
> 
> 赞同：0
> 
> 时间：2012-06-16T20:21:25.887
> 
> 标签：java

我的项目数学有问题。

我的项目是编写一个程序来读取一组元素及其关系。您的输入数据将来自文本文件。（设置关系）。

`{1,2,3} {(1,1),(2,2),(3,3),(1,2),(1,3),(2,3)}`

我将文本文件读入程序没有问题，但是当我想尝试将关系放入二维数组时我被卡住了。

例如：`{(1,1),(2,2),(3,3),(1,2),(1,3),(2,3)}`

二维数组必须是这样的：

```
col[0][1][2]
[0] 1  1  1
[1]    1  1
[2]       1 
```

我不知道如何将一个设置为二维数组，因为文本文件中有各种关系。

这是我的编码。

```
import javax.swing.*;
       import java.util.ArrayList;
       import java.io.*;
       import java.util.StringTokenizer;
       import java.lang.*;
       import java.util.*;

       public class tests 
       {
          public static int s1[][];
          public static int s2[][];
          public static int s3[][];
          public static int s4[][];
          public static int s5[][];
          public static int s6[][];
          public static int s7[][];
          public static int s8[][];
          public static int s9[][];
          public static int s10[][];

    public static void main(String[] args) throws IOException, FileNotFoundException
    {
        BufferedReader infile = null; 

        ArrayList arr1 = new ArrayList();
        ArrayList arr2 = new ArrayList(); 
        ArrayList arr3 = new ArrayList();
        ArrayList arr4 = new ArrayList();
        try
        {
              infile = new BufferedReader (new FileReader ("numbers.txt"));

              String indata = null;

              while ((indata = infile.readLine())!= null) 
              {
                     StringTokenizer st = new StringTokenizer(indata," ");
                     String set = st.nextToken();
                     arr1.add(set);
                     String relation = st.nextToken();
                     arr2.add(relation);
              } 

              for(int i =0; i < arr2.size(); i++)
              {
                  String r = arr2.get(i).toString();
                  String result = r.replaceAll("[{}(),; ]", "");
                  arr3.add(result);
              }

              for(int i = 0; i < arr3.size(); i++)
              {
                  System.out.println(arr3.get(i).toString());
              }

              for(int i =0; i < arr1.size(); i++)
              {
                  String s = arr1.get(i).toString();
                  String result = s.replaceAll("[{}(),; ]", "");
                  arr4.add(result);  
              }

              int set1 = Integer.parseInt(arr4.get(0).toString());
              String ss1 = arr4.get(0).toString();
              int a = ss1.length();
              s1 = new int[a][a];
              int sA[][];
              /*for(int row=1;row< a;row++)
              {
                  for(int col=0;col < a;col++)
                  {
                      sA = new int[row][col];
                      int firstNo = Integer.parseInt(arr3.get(row).toString());
                      int secondNo = Integer.parseInt(arr3.get(col).toString());
                      sA = new int [firstNo][ secondNo] ;  

                      System.out.print(sA);
                  }
                  System.out.println();
              }*/
              char arrA;
              char indOdd=' ',indEven=' ';
                 char[] cArr = arr3.get(0).toString().toCharArray();
                 //System.out.println(arr3.get(0).toString().length());
                 int l = arr3.get(0).toString().length();
                 int arr10[][] = new int[(l/2)][2];

                    for(int i=0;i< 2;i++)
                    {
                        for(int row = 0; row < (l/2);row++)
                        {
                            for(int gh = 0;gh < l;gh++)
                            {
                                if(i%2==0)
                                {
                                indEven = cArr[gh];
                                System.out.println(indEven);
                                arr10[row][i] = indEven;
                                //System.out.println(arr10[row][i]);
                                //row++;
                            }
                            else
                            {
                                indOdd = cArr[gh+1];
                                System.out.println(indOdd);
                                arr10[row][i] = indOdd;
                                //row++;
                            }
                         }
                        }
                            //arr10 = new int[indOdd][indEven];
                            //System.out.println(arr10);
                    }         

        }
        catch (FileNotFoundException fnfe)
        {
               System.out.println("File not found");
        }
        catch (IOException ioe)
        {
               System.out.println(ioe.getMessage());
        }
        catch (Exception e)
        {
               System.out.println(e.getMessage());
        }

        infile.close();

    }
} 
```

但是如果关系是`{(a,b),(a,c),(b,a),(b,c),(c,c)};`和`{(33,33),(45,45),(67,67),(77,77),(78,78)};`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:31:10.477

所以，你有两个问题：解析输入和设置数组。

要解析输入，请考虑给定的格式。一个左大括号，一组有序对，然后是一个右大括号。想想这个伪代码：

```
Read in a left curly brace
While the next character is not a right curly brace{
    Read in a left parenthesis
    Get the first number and put it in a variable!
    Read in a comma
    Get the second number and put it in a variable!
    Read in a right parenthesis
    Store your relation in the array!
} 
```

现在您的问题只是如何将其放入数组中。您的关系实际上已经是网格中的索引！注意 0 索引，因此只需从两者中减去 1，并将结果坐标设置为等于 1。

```
array[first number-1][second number-1]=1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:35:47.063

只是一个提示：

例如，如果您的集合是`{b,c,e}`并且希望在某处存储关系，`elemnt <-> index`例如`b<==>0`, `c<==>1`，`e<==>2`则可以将该元素存储在其中`List`，然后使用 method `indexOf()`。

我的意思是这样的

```
List<String> list=new ArrayList<String>();
list.add("b");
list.add("c");
list.add("e");
System.out.println(list.indexOf("c"));//return 1
System.out.println(list.indexOf("e"));//return 2
System.out.println(list.indexOf("b"));//return 0 
```

现在你只需要弄清楚如何使用它来创建你的数组。

# c# - 为什么 SQL 整数数值列在 C# 数据集中映射为 System.Decimal？

> ID：11066752
> 
> 赞同：1
> 
> 时间：2012-06-16T20:21:41.037
> 
> 标签：c#, sql-server, types, dataset, dataadapter

`NUMERIC(3,0)`为什么在 C# 中（在 DataSet 中作为列类型或在 DataAdapter 中作为参数类型）生成SQL 整数数字列（例如）作为类型`Decimal`？

`NUMERIC(3,0)`可以存储 -999 到 999 范围内的整数值。我认为它应该在 C# 中生成为类型`int`或另一个整数。

我认为，这种行为是 .NET 或 Visual Studio 的严重错误。如果我不想重写生成的代码并且我不想在我使用它的任何地方在 int 和 decimal 之间进行转换，我应该如何解决它？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T20:42:13.973

您的问题是为什么将 MSSQL`NUMERIC`转换为 C# `Decimal`，答案是因为`NUMERIC`它仍然是一个浮点值，即使您指定它没有像`NUMERIC[3,0]`.

如果`NUMERIC`根据您是否指出它有任何小数点，将 where 转换为不同类型的 C# 是没有意义的。

我假设您正在使用`NUMERIC[3,0]`以节省数据库中的空间，但根据文档，它[使用 5 bytes](http://msdn.microsoft.com/en-us/library/ms187746)。`INT`另一方面，SQL[仅使用 4](http://msdn.microsoft.com/en-us/library/ms187745.aspx)。而且，更好的是， a`SMALLINT` [只使用 2 个字节](http://msdn.microsoft.com/en-us/library/ms187745.aspx)。

不幸的是，您要么必须将数据库转换为使用`SMALLINTs`，`NUMERIC`要么必须在 C# 中进行转换。

如果您只有一个实体从数据库中检索数据，然后您可以将转换保持在最低限度并本地化到一个位置，那就太好了。

# php - 根据 post_id 返回 meta_value 的 SUM

> ID：11066755
> 
> 赞同：0
> 
> 时间：2012-06-16T20:22:05.530
> 
> 标签：php, select

我试图显示表中相同的`meta_value`所有实例的总和（数字）。从查看其他回复来看，以下似乎应该是这样做的，但我什么也没得到`post_id``postmeta`

```
<?php     
    global $wpdb;

    $data = $wpdb->query("
        SELECT SUM(meta_value)
        FROM $wpdb->postmeta
        WHERE `post_id` = $post_id
                ");
    echo $data;
  ?> 
```

与其他答案相比，我无法弄清楚这有什么问题。任何指针？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:50:03.537

对于 SELECTing，您应该使用`$wpdb->get_results()`而不是`$wpdb->query()`.

`$wpdb->query()`“……返回一个与受影响/选择的行数相对应的整数。”

[http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:54:15.687

好的，我已经更改了代码以反映上述内容，包括他的封装和使用`get_results`而不是，`query`但现在只需获取“数组”作为返回的结果。

```
 global $wpdb;

$data = $wpdb->get_results("
        SELECT SUM($wpdb->postmeta.meta_value)
        FROM {$wpdb->postmeta}
        WHERE `post_id` = the_id()
                ");
    echo $data; 
```

我是否需要使用`foreach()`循环来循环生成的数组？我还检查了有数据，这`the_id()`也是有效的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:26:08.227

嗯……你连接到数据库了吗？当您在字符串中包含对象属性时，最好将它们括在大括号中，如下所示：

```
$data = $wpdb->query("SELECT SUM(meta_value)
                      FROM {$wpdb->postmeta}
                      WHERE `post_id` = $post_id
                     "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T20:28:42.643

如果它们很复杂，请封装您的 php 变量，因此：

```
FROM {$wpdb->postmeta} 
```

# vb.net - DataGridView 不显示 ShortTime 记录

> ID：11066756
> 
> 赞同：0
> 
> 时间：2012-06-16T20:22:41.410
> 
> 标签：vb.net, winforms

我正在使用从 Microsoft Access 中的表中获取其数据的 DataGridView，其中一个字段是短时间类型记录（例如 16:00），但是当加载 DataGridView 时，它将记录显示为“16:00 12/31 /1899" 并且从不只显示 ShortTime。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:31:20.393

datagridview 不会查看原始类型来进行格式化。如果系统类型是时间跨度而不是日期时间，则使用默认时间格式。也许你可以影响绑定？

无论如何，您始终可以使用 datagridview 的[CellFormatting](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)事件覆盖任何默认格式（例如，请参见链接）

**编辑**哎呀，忘了提最简单的方法：设置列的defaultcellstyle的格式（可以在设计器中完成）：

```
 YourDataGridView.Columns["NameOfTimecolumn"].DefaultCellStyle.Format = "HH:mm"; 
```

# ruby-on-rails - Omniauth-google-oauth2 是简单地允许身份验证，还是也满足 API 需求？

> ID：11066768
> 
> 赞同：4
> 
> 时间：2012-06-16T20:24:27.620
> 
> 标签：ruby-on-rails, oauth-2.0, omniauth, google-spreadsheet-api

我在概念上难以理解 OAuth2。关于整个握手过程，我已经读过一百遍了。我可以使用 google 帐户登录我的应用程序，但是一旦完成，我需要访问 Google 的 API（从我登录的同一帐户上的 Google 电子表格中读取数据，并且我将电子表格包含在 :scope 中策略自述文件）。

目前，我正在使用 Omniauth 和 omniauth-google-oauth2 策略；这很好用；它会调出 Google 的身份验证/登录屏幕，当我返回回调链接时，我正在存储 [omniauth][credentials][token]。

然后使用该令牌与 Google Docs 一起使用 API 的最佳方法是什么？

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:42:34.963

我认为 Oauth2 是一种“获取用户密码以确认他们在我的网站上存在的方式”。

因此，本质上，它使用 Google 说“这家伙很酷”，而不是您的 User 模型有一个密码列。

现在，这与 API 调用有什么关系，你想知道……我也是。

如果我记得，有一个**刷新令牌**持续超过 20 毫秒的身份验证，如果谷歌的 api 允许你这样做，你可以访问他们的谷歌文档。

说了这么多，如果谷歌需要他们的令牌，加上你的 API 令牌来访问他们的电子表格，我会把它放到会话中。

但是如果他们的 API 说要在范围内粘贴电子表格，那么它也必须说明如何一起使用它，不是吗？

## 更多编辑

[Google 电子表格 Oauth 2.0](https://developers.google.com/google-apps/spreadsheets/#authorizing_requests_with_oauth_20)身份验证部分在这里，有一个流程。请注意有关刷新令牌的部分。我会调查的。

它说将它存储在某个地方，我会选择会话，或者如果你完全偏执于某个地方的 db 列，但也不确定这是否正确。只是在这里吐口水。

## 最终编辑

事实证明，即使是[帮助 Oauth 2.0 的人也不同意/从](http://hueniverse.com/2012/07/oauth-2-0-and-the-road-to-hell/)概念上理解它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:54:09.537

您也许可以找到一个封装了 Google API 的 gem，以简化您的任务。

[这是适用于 Google Drive 和电子表格的一个](https://github.com/gimite/google-drive-ruby)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-26T23:12:00.500

@Galen 提到的[google-drive-ruby](https://github.com/gimite/google-drive-ruby%20google-drive-ruby) gem 似乎可以很好地与 google-oauth-2 提供程序配合使用：

猜测您已经将令牌存储在回调处理程序的会话中，例如

```
 auth = request.env["omniauth.auth"]
  session[:token] = auth["credentials"]["token"] 
```

然后您可以使用它来构建会话并访问工作表：

```
 require 'googleauth'

  session = GoogleDrive::Session.from_access_token(token)
  worksheet = session.spreadsheet_by_key(spreadsheet_id).worksheet_by_title(worksheet_name)
  ...etc 
```

希望这可以帮助。

# java - 无法从外部 Jar 文件中检索资源

> ID：11066773
> 
> 赞同：0
> 
> 时间：2012-06-16T20:25:39.930
> 
> 标签：java, jar, classloader, archive, embedded-resource

注意：这是我的问题的后续行动[。](https://stackoverflow.com/questions/11044353/simple-way-to-use-a-jar-as-a-resource-archive/11044509#11044509)

* * *

我有一个程序，它获取目录的内容并将所有内容捆绑到 JAR 文件中。我用来执行此操作的代码在这里：

```
 try
    {
        FileOutputStream stream = new FileOutputStream(target);
        JarOutputStream jOS = new JarOutputStream(stream);

        LinkedList<File> fileList = new LinkedList<File>();
        buildList(directory, fileList);

        JarEntry jarAdd;

        String basePath = directory.getAbsolutePath();
        byte[] buffer = new byte[4096];
        for(File file : fileList)
        {
            String path = file.getPath().substring(basePath.length() + 1);
            path.replaceAll("\\\\", "/");
            jarAdd = new JarEntry(path);
            jarAdd.setTime(file.lastModified());
            jOS.putNextEntry(jarAdd);

            FileInputStream in = new FileInputStream(file);
            while(true)
            {
                int nRead = in.read(buffer, 0, buffer.length);
                if(nRead <= 0)
                    break;
                jOS.write(buffer, 0, nRead);
            }
            in.close();
        }
        jOS.close();
        stream.close(); 
```

所以，一切都很好，并且创建了 jar，当我使用 7-zip 探索它的内容时，它包含了我需要的所有文件。但是，当我尝试通过 URLClassLoader 访问 Jar 的内容时（该 jar 不在类路径上，我不打算这样做），我得到空指针异常。

奇怪的是，当我使用从 Eclipse 导出的 Jar 时，我可以以我想要的方式访问它的内容。这让我相信我在某种程度上没有正确地创建 Jar，并且遗漏了一些东西。上面的方法有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:43:47.837

[我根据这个问题](https://stackoverflow.com/questions/1281229/how-to-use-jaroutputstream-to-create-a-jar-file)弄清楚了- 问题是我没有正确处理反斜杠。

固定代码在这里：

```
 FileOutputStream stream = new FileOutputStream(target);
        JarOutputStream jOS = new JarOutputStream(stream);

        LinkedList<File> fileList = new LinkedList<File>();
        buildList(directory, fileList);

        JarEntry entry;

        String basePath = directory.getAbsolutePath();
        byte[] buffer = new byte[4096];
        for(File file : fileList)
        {
            String path = file.getPath().substring(basePath.length() + 1);
            path = path.replace("\\", "/");
            entry = new JarEntry(path);
            entry.setTime(file.lastModified());
            jOS.putNextEntry(entry);
            FileInputStream in = new FileInputStream(file);
            while(true)
            {
                int nRead = in.read(buffer, 0, buffer.length);
                if(nRead <= 0)
                    break;
                jOS.write(buffer, 0, nRead);
            }
            in.close();
            jOS.closeEntry();
        }
        jOS.close();
        stream.close(); 
```

# html - 干扰标签

> ID：11066774
> 
> 赞同：0
> 
> 时间：2012-06-16T20:26:01.050
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:54:22.720

`#Syllabus a`是一个后代选择器。这意味着该规则适用于所有 #Syllabus 的后代锚点。

使用子选择器只会选择 #Syllabus: 的直接子代锚`#Syllabus > a`。

```
#Syllabus > a {
    position:          absolute;
    top:               0px;
    left:              130px;
    width:             112px;
    height:            40px;
    background-image:  url(/Assets/Syb_but.png);
    background-repeat: no-repeat;
}

#Syllabus > a:hover {
    background-image: url(/Assets/QuesPap_but_ul.png);
}

.ul_menu {
    position: relative;
    top:      44px;
    left:     43px;
    display:  none;
}

ul, li {
    margin:  auto;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:53:03.710

@jussinen 说的是对的，您也可以使用其他解决方案，为链接提供具体的类。例如：

**HTML**

```
<div id="Syllabus" class="syl">
    <a href="#" class="link-level-one">
    </a>
    <ul class="ul_menu">
        <li><a href="#">link 1</a></li>
        <li><a href="#">link 2</a></li>
    </ul>
</div> 
```

**CSS**

```
#Syllabus a.link-level-one{
position:          absolute;
top:               0px;
left:              130px;
width:             112px;
height:            40px;
background-image:  url(/Assets/Syb_but.png);
background-repeat: no-repeat;
}

#Syllabus a.link-level-one:hover {
background-image: url(/Assets/QuesPap_but_ul.png);
}

.ul_menu {
position: relative;
top:      44px;
left:     43px;
display:  none;
}

ul, li {
margin:  auto;
padding: 0;
} 
```

希望这可以帮到你

# jython - 使用 Jython 运行 HtmlUnit

ID：11066775

赞同：1

时间：2012-06-16T20:26:02.533

标签：jython, htmlunit, importerror

# ruby-on-rails - 当关联的子记录在 Rails 3.1.4 中无效时，如何不保存父记录和子记录？

> ID：11066777
> 
> 赞同：1
> 
> 时间：2012-06-16T20:26:05.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, nested-attributes

在我们的 rails 3.1.4 应用程序中，有 user（父）和 user_levels（子）模型。

```
class User < ActiveRecord::Base
  attr_accessible :name, :login, :password, :user_levels_attributes, :as => :role_new
  has_many :user_levels
  ccepts_nested_attributes_for :user_levels, :allow_destroy => true, :reject_if => proc { |a| a['position'].blank? }
  validates_associated :user_levels
end

class UserLevel < ActiveRecord::Base
  belongs_to :user
  validates_presence_of :position
end 
```

必须填写 user_level 中的位置列。如果不是，则不应保存 user 和 user_levels。上面的问题是，即使参数中有位置值，它总是会导致“位置不能为空”的错误。

```
{"utf8"=>"✓",
 "user"=>{"name"=>"tester ceo",
 "login"=>"testceo",
 "update_password_checkbox"=>"[FILTERED]",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]",
 "user_levels_attributes"=>{"1339886115748"=>{"position"=>"ceo"}}},
 "commit"=>"Save"} 
```

删除 user_levels_attribues 后，无论填写什么样的 user_levels，模型都会将 user 保存到 users 表中。我们进行了广泛的在线搜索，但尚未找到解决方案。例如，如果将 validates_presence_of :user_levels 添加到用户模型中，则即使位置有效，也无法保存或更新任何用户级别。

关于如何实现两个关联模型的协调保存/更新的任何建议？非常感谢。

更新：_user_level.html.erb：

```
<div class="fields">
  <%= f.input :position, :collection => return_position, :prompt => "Choose position", 
                      :label => false, :include_blank => true, :selected => i_id %>
  <%= link_to_remove_fields "remove", f %>
</div> 
```

_form_new.html.erb：

```
<%= simple_form_for @user do |f| %>
  <%= f.input :name, :label => 'name：' %>
  <%= f.input :login, :label => 'login：', :hint => '6 digits ' %>
  <%= f.input :password, :label => 'password：', :hint => '6digits', :input_html => {:id => 'new_user_password'} %>
  <%= f.input :password_confirmation, :label => 'confirmation：' %>  
  <%= f.input :user_type, :label => 'user type：', :collection => return_user_type, :include_blank => true %>
  &nbsp;&nbsp;position：
  <p><%= link_to_add_fields "Choose position", f, :user_levels %></p>

  <p><%= f.button :submit, 'Save' %></p>
<% end %> 
```

这是添加位置字段的方法：

```
 #add user position in system user creation
  def link_to_add_fields(name, f, association)
    new_object = f.object.class.reflect_on_association(association).klass.new
    fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
      render :partial => association.to_s, :locals => {:f => builder, :i_id => 0} 
    end
    link_to_function(name, "add_fields(this, \"#{association}\", \"#{j fields}\")")
  end 
```

JS文件：

```
function add_fields(link, association, content) {
  var new_id = new Date().getTime();
  var regexp = new RegExp("new_" + association, "g")
  $(link).parent().before(content.replace(regexp, new_id));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:33:00.197

我认为您需要删除`:reject_if`并更改`validates_associated :user_levels`为`validates_presence_of :user_levels`.

# javascript - 如何在用户位置上制作地图中心

> ID：11066784
> 
> 赞同：2
> 
> 时间：2012-06-16T20:26:57.650
> 
> 标签：javascript, google-maps, google-maps-api-3, geolocation

如何在客户端的当前位置上制作地图中心，但如果当前位置无法确定，则默认为下面的 LatLng。

```
var myOptions = {
  center: new google.maps.LatLng(12.659493, 79.415412),
  zoom: 12,
  scrollwheel: false,
  mapTypeId: google.maps.MapTypeId.ROADMAP
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T20:41:47.777

为此，您可以使用 HTML 5 地理定位功能。它很接近，但不是非常精确。

[**演示**](http://freezoo.alwaysdata.net/geoloc.html)

```
 var map;

  function initialize() {
    if(navigator.geolocation) {
      success = function(position) {
        createMap(position.coords.latitude, position.coords.longitude);
      };
      error = function() { createMap(12.659493, 79.415412); }

      navigator.geolocation.getCurrentPosition(success, error);
    }
    else {
      createMap(12.659493, 79.415412);
    }
  }

  function createMap(lat, lng) {
    var mapOptions = { center: new google.maps.LatLng(lat, lng), 
      zoom: 12,
      scrollwheel: false,
      mapTypeId: google.maps.MapTypeId.ROADMAP };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  } 
```

# java - 将数据库表转换为 JTree

> ID：11066786
> 
> 赞同：0
> 
> 时间：2012-06-16T20:27:28.090
> 
> 标签：java, database, oracle, parent, jtree

任何人都可以提供一个工作示例代码来将具有父子关系的 Oracle DB 表转换为 Java 代码中的 JTree 吗？

`Table T (columns: Id, Parent_Id, Description).`

我搜索了许多类似的问题，但对于 JTree 新手来说，所有问题似乎都模糊且不完整。我不需要任何代码来连接数据库，只需要检查结果并填充 JTree。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:24:19.263

当我开始使用 JTree 时，我实现了这个与您的问题非常相似的类。

检查方法：`getElementTreeFromPlainList`这或多或少是用于从持久层获取数据的方法和`createTreeNodesForElement`为树创建节点的方法。

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.swing.JFrame;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;

public class MyJFrame extends JFrame {

    private static final long serialVersionUID = 1L;

    private static List<String[]> data = new ArrayList<String[]>();

    static {
        data.add(new String[] { "Id1", "Start 1", null });
        data.add(new String[] { "Id2", "Node 1.1", "Id3" });
        data.add(new String[] { "Id3", "Node 1", "Id1" });
        data.add(new String[] { "Id4", "Node 1.2", "Id3" });
        data.add(new String[] { "Id5", "Node 2", "Id1" });
        data.add(new String[] { "Id6", "Start 2", null });
    }

    public static void main(final String[] args) {
        new MyJFrame();
    }

    MyJFrame() {
        JTree tree = new JTree();

        DefaultMutableTreeNode root = new DefaultMutableTreeNode("Found Nodes");

        createTreeNodesForElement(root, getElementTreeFromPlainList());

        tree.setModel(new DefaultTreeModel(root));

        add(tree);

        setVisible(true);
        setBounds(0, 0, 200, 200);
    }

    Collection<Element> getElementTreeFromPlainList() {
        // builds a map of elements object returned from store
        Map<String, Element> values = new HashMap<String, Element>();
        for (String[] s : data) {
            values.put(s[0], new Element(s[2], s[1]));
        }

        // creates a result list
        Collection<Element> result = new ArrayList<MyJFrame.Element>();

        // for each element in the result list that has a parent, put it into it
        // otherwise it is added to the result list
        for (Element e : values.values()) {
            if (e.parent != null) {
                values.get(e.parent).getChildren().add(e);
            } else {
                result.add(e);
            }
        }

        return result;
    }

    void createTreeNodesForElement(final DefaultMutableTreeNode dmtn, final Collection<Element> elements) {
        // for each element a tree node is created
        for (Element child : elements) {
            DefaultMutableTreeNode created = new DefaultMutableTreeNode(child.getName());
            dmtn.add(created);
            createTreeNodesForElement(created, child.getChildren());
        }
    }

    public static class Element {
        private final String parent;
        private final String name;
        private final Collection<Element> children = new ArrayList<MyJFrame.Element>();

        public Element(final String parent, final String name) {
            super();
            this.parent = parent;
            this.name = name;
        }

        public String getName() {
            return name;
        }

        public Collection<Element> getChildren() {
            return children;
        }

    }

} 
```

# javascript - 如何编写一个 JS 库？

> ID：11066788
> 
> 赞同：0
> 
> 时间：2012-06-16T20:27:42.203
> 
> 标签：javascript

我正在寻找在 JS 中编写库的良好实践或模式。我想获得关于如何写作的**良好参考。**或要遵循的模式。

我刚刚写了一个库，但似乎不是很好的代码。所以，我正在寻找相关的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:36:49.400

在[dailyJS 上](http://dailyjs.com/)，有关于如何创建 javascript 框架的优秀系列，请查看：

*   [让我们做一个框架](http://dailyjs.com/tags.html#lmaf)（[pdf格式的系列](http://dailyjs.com/2010/12/02/framework-review/)）

您将要学习的功能以及教程包括：

*   图书馆架构
*   函数式编程
*   选择器
*   活动
*   阿贾克斯
*   动画片
*   模块加载
*   插件架构

[这是那个伟大的教程系列的结果，“turningjs”框架](http://turingjs.com/)

# codeigniter - ActiveRecord Join 获得第一张相关产品照片

> ID：11066790
> 
> 赞同：0
> 
> 时间：2012-06-16T20:28:11.207
> 
> 标签：codeigniter, activerecord, join

我在 CodeIgniter 中使用 ActiveRecord 与 MySQL 数据库进行交互。

我有一个产品表和一个产品照片表，用于存储产品的相关照片以及每个产品照片的排序顺序。

我正在尝试选择第一张产品照片（最低排序顺序），但似乎无法使其正常工作。

我将其归结为选择 product_photo 并将产品加入其中（我最初尝试相反）但我总是以第一个 product_photo 用于第一个测试产品，第二个 product_photo 用于第二个测试产品。

为了进一步简化，我尝试仅选择 product_photo 记录，按 product_id 和 sort_order 对它们进行排序，然后将其吐出，但我仍然得到不匹配的结果。

这是我的 ActiveRecord 查询：

```
$this->db->select('product_id, url, sort_order')
         ->from('product_photo')
         ->order_by('product_id, sort_order')
         ->group_by('product_id'); 
```

我确信有更好的方法来解决这个问题，但我还没有找到。提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:29:45.463

你不能用`DISTINCT 1`吗？此外，您应该从产品表中进行选择，并使用左连接来选择相应的照片。

# php - 在删除文件之前检查用户是否拥有文件

> ID：11066792
> 
> 赞同：0
> 
> 时间：2012-06-16T20:28:18.973
> 
> 标签：php, mysql, sql, api

我正在为我的网站构建一个 API，允许用户删除他们上传的文件。显然，我想在用户通过 API 删除它之前检查用户是否拥有该文件。

我有一个文件表和一个用户表，这是架构：

```
f_id, s_id, u_id, name, size, uploaded

u_id, username, password, email, activated, activation_code 
```

`u_id`是外键。files 表中的`u_id`字段指向`u_id`users 表中的 。

给定用户用户名，我想找到 users `u_id`，然后通过文件 ID ( `f_id`) 检查他们是否拥有该文件。

我写了这个 SQL：

```
$sql = 'SELECT u.username
        FROM `users` u
        JOIN `files` f
        ON u.u_id = f.u_id
        WHERE f_id = ? AND u.u_id = ?
        LIMIT 1'; 
```

我假设如果我`u_id`在 API 请求中获得了用户，那会起作用，但可惜我只获得了他们的用户名。

如何修改该 SQL 以找到他们的用户 ID 并使用它？

谢谢。

编辑：好吧，我有这个查询，但它总是返回一个空的结果集，即使文件 ID 和用户名都存在。

```
SELECT u.username
FROM `users` u
JOIN `files` f
ON u.u_id = f.u_id
WHERE f.f_id = ? AND u.username = ?
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:12:07.580

试一试：

```
SELECT f.name
FROM `users` AS u
INNER JOIN `files` AS f ON f.u_id = u.u_id AND f.f_id = ?
WHERE u.username = ?
LIMIT 1 
```

我认为在这种情况下内连接更合适（也可能比左连接稍快）

# iphone - 部署到 iPhone，无网络访问

> ID：11066793
> 
> 赞同：0
> 
> 时间：2012-06-16T20:28:26.700
> 
> 标签：iphone, ios

我已经设法让 iPad 和 iPhone 都连接到 xcode，并且可以成功部署到设备上。出于某种原因，每次尝试访问需要互联网的功能时，我都会遇到网络错误，所以我认为 XCode 中一定有一些我缺少的设置。

我是否需要明确告诉 xcode 我允许设备访问网络？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:10:54.450

原来这是 PhoneGap 的问题（用于使用 HTML5 创建跨平台应用程序）。

我得到的错误与此类似：

```
SampleApp[549:17803] ERROR whitelist rejection: url='http://code.jquery.com/jquery-1.6.4.min.js' 
```

可以在这里找到解决方案：

[http://www.anujgakhar.com/2011/11/22/phonegap-gotcha-error-whitelist-rejection/](http://www.anujgakhar.com/2011/11/22/phonegap-gotcha-error-whitelist-rejection/)

> “在您的 PhoneGap.plist 文件中，您需要将允许的 URL 添加到 ExternalHosts 数组。我添加了“*”，因为我不想将每个单独的 URL 单独添加到列表中，但这是您的选择。”

# javascript - 设计 JQuery / Ajax 网站向后兼容 w' 无 JavaScript 浏览器

> ID：11066799
> 
> 赞同：1
> 
> 时间：2012-06-16T20:29:22.827
> 
> 标签：javascript, jquery, html, ajax

有没有人知道寻找设计 JQuery 富网站的基本原则和教程的好地方，但它们仍然可以在不支持 JavaScript 或禁用 JavaScript 的浏览器中工作？

如果这甚至可能，实际上......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:38:03.063

在你看这一切之前，你应该知道一些事情。

从历史上看，有很多理由可以在没有 JS 的情况下使事情顺利进行：

*   搜索引擎优化。Googlebot 运行起来很像 Lynx
*   移动设备。几乎没有，如果有的话会运行 JS
*   关闭 JS 的偏执用户
*   企业限制
*   辅助功能 - 屏幕阅读器等

如果我们看看今天的风景，情况就不同了

*   Googlebot 评估 JS。在我自己的测试中，我发现 Googlebot 可以通过 jQuery 代码发出 ajax 请求，并在结果中包含插入页面的文本。
*   对于许多用户（即 Android 手机 + IE8 用户）而言，移动设备运行的浏览器比台式机更好
*   Noscript 等允许您将网站列入白名单，尽管几乎没有人使用它
*   一些公司可能仍然禁止 JS，但同样，它是最小的
*   可访问性越来越好，在很多方面都不是问题，但用户可能仍在使用不能很好地处理 JS 的旧版本。

这意味着出于可访问性的原因，您正在制作一个没有 JS 的网站。这让您可以更专注于在没有 JS 的情况下创建的体验。

简而言之，您应该确保通过 AJAX 发生的任何事情都可以在没有 AJAX 的情况下发生。这通常意味着修改您的服务器端代码，以便在生成 JSON 时，它还可以创建要插入 JSON 的整个页面（即，如果您有一个将文本加载到 div 的按钮，您应该有一个实际的页面中查看）。

另一种方法是谨慎地为没有 JS 的用户提供不同版本的应用程序。许多旧的移动网站就是这方面的“好”例子。

# c# - TextBlock 宽度绑定到 GridView

> ID：11066804
> 
> 赞同：0
> 
> 时间：2012-06-16T20:31:04.827
> 
> 标签：c#, xaml, windows-8

在我的 XAML 页面上，我有一个带有以下绑定的文本块：

```
<TextBlock Width="{Binding ActualWidth, ElementName=SessionList, Mode=OneWay}" ...  /> 
```

这绑定到网格视图：

```
<GridView x:Name="SessionList" ItemsSource="{Binding Sessions}"... /> 
```

现在，当页面首次加载并且数据可用时，文本块将可见并具有正确的宽度。当页面加载并且没有数据时，由于绑定的宽度，文本框将不可见。

但是......当我在后台加载数据并在一段时间后数据进入（通过MVVM）时，将显示列表，但文本块宽度不会相应改变，并将其设置为`TwoWay`无效。

有什么想法/提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:03:08.343

像这样的绑定问题通常是由不可绑定的属性引起的，即它们不是依赖属性和/或没有实现 INotifyPropertyChanged。任何。我使用附加的依赖属性，或者，如果这还不够，则使用行为。现在行为不包含在 WinRT 中，但[该问题已得到解决](http://winrtbehaviors.codeplex.com/)；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:19:40.623

ActualWidth 不是您可以在 WinRT 中绑定到的属性。不确定您是显示静态文本还是绑定文本。如果绑定的文本和数据与 GridView 相同，那么如果数据为空，它应该消失。如果是静态数据，则使用 ValueConverter 根据数据为 null/empty 设置 TextBlock 的可见性

# objective-c - UIScrollView 分页标记

> ID：11066812
> 
> 赞同：2
> 
> 时间：2012-06-16T20:32:46.873
> 
> 标签：objective-c, ios, uiscrollview

我创建了一个 UIScrollView，其中包含多个图像的分页，每个“页面”有 1 个图像，我想知道是否有任何方法可以将图像彼此区分开来？外汇。当第一张图片显示时，我会有一个按钮将 UILabel 设置为“1”，而当第二张图片显示时，同一个按钮会将相同的 UILabel 设置为“2”。

这是我的代码：

```
pictures = [NSArray arrayWithObjects: [UIImage imageNamed:@"AND.png"], [UIImage imageNamed:@"ALB.png"], nil];

    for (int i = 0; i < pictures.count; i++) {
        CGRect frame;
        frame.origin.x = 135 + (self.scrollViewQuiz.frame.size.width * i);
        frame.origin.y = 40;
        frame.size = CGSizeMake(50, 50);

        UIImageView *subview = [[UIImageView alloc] initWithFrame:frame];
        subview.image = [pictures objectAtIndex:i];
        [self.scrollViewQuiz addSubview:subview];
    }

    self.scrollViewQuiz.contentSize = CGSizeMake(self.scrollViewQuiz.frame.size.width * pictures.count, self.scrollViewQuiz.frame.size.height); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:49:23.837

听起来您只想计算滚动视图当前显示的“页码”。您可以尝试这样的操作作为按钮的操作：

```
- (IBAction)buttonWasTapped:(id)sender {
    UIScrollView *scrollView = self.scrollViewQuiz;
    int pageNumber = (int)roundf(scrollView.contentOffset.x / scrollView.bounds.size.width);
    self.label.text = [NSString stringWithFormat:@"%d", pageNumber];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:43:22.763

您可以实现以下滚动视图委托方法：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
```

在其中您将检查滚动视图的 contentOffset 并相应地设置标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:46:28.253

试试这两个..这些应该可以工作..希望这有帮助..

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
               CGFloat xOffset = scrollView.contentOffset.x;
   int currentPage = floor(xOffset / scrollView.bounds.size.width);
    [itsLabel setText:[NSString stringWithFormat:@"%i", currentPage]];
}

- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView {
               CGFloat xOffset = scrollView.contentOffset.x;
   int currentPage = floor(xOffset / scrollView.bounds.size.width);
    [itsLabel setText:[NSString stringWithFormat:@"%i", currentPage]];
} 
```

# opengl - 在视图中居中对象opengl

> ID：11066814
> 
> 赞同：1
> 
> 时间：2012-06-16T20:32:51.463
> 
> 标签：opengl, libgdx

我有一个 3d 对象，我想将其保留在视图的中心。如果我要平移对象，我希望相机随之移动并将对象保持在屏幕中央。我将如何使用 opengl 和 libgdx 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:12:01.947

[`gluLookAt`](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/GLU.html#gluLookAt%28com.badlogic.gdx.graphics.GL10,%20float,%20float,%20float,%20float,%20float,%20float,%20float,%20float,%20float%29)会做你想做的。

伪代码：

```
float objPos[3];
float camPos[3] = objPos - float[3]{0, 0, 3} //camera 3 units behind object on Z axis
float upVec[3] = { 0, 1, 0}

onDraw {
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(camPos[0], camPos[1], camPos[2], objPos[0], objPos[1], objPos[2], upVec[0], upVec[1], upVec[2]);

    ...draw...
} 
```

# c# - 无法使用 Gmail 发送电子邮件

> ID：11066820
> 
> 赞同：0
> 
> 时间：2012-06-16T20:33:32.290
> 
> 标签：c#, asp.net-mvc-3

我正在尝试使用我的 mvc 应用程序中的 gmail 发送电子邮件。我收到以下异常

> 无法从传输连接读取数据：现有连接被远程主机强行关闭。

这是发送电子邮件的代码

```
string tn = "EmailVerification.htm";
string fileName = Path.GetFileName(tn);
string templatePath = Path.Combine(Path.Combine(System.Web.HttpContext.Current.Server.MapPath("~/EmailTemplates")), fileName);
  System.Net.Mail.MailMessage mailMessage = new System.Net.Mail.MailMessage();

            mailMessage.From = new MailAddress(EmailFrom, "Email");
            mailMessage.To.Add(new MailAddress(To));
            mailMessage.Subject = "subject";
            mailMessage.IsBodyHtml = true;
            MailDefinition mailDef = new MailDefinition();
            mailDef.BodyFileName = templatePath;
            mailDef.IsBodyHtml = true;
            mailDef.Subject = "mailDefsubject";
            mailDef.From = mailMessage.From.ToString();

            ListDictionary replacements = new ListDictionary();

            replacements.Add("<%FIRSTNAME%>", FirstName);
            replacements.Add("<%USERNAME%>", "asd");
            replacements.Add("<%VERIFICATIONLINK%>", VerificationLink);     
            replacements.Add("<%WEBSITE%>", "http://www.mysite.com");

            MailMessage msgHtml = mailDef.CreateMailMessage(To, replacements, new System.Web.UI.Control());
            AlternateView htmlView = AlternateView.CreateAlternateViewFromString(msgHtml.Body, null, "text/html");

            AddLinkedResources(templatePath, ref htmlView);

            mailMessage.AlternateViews.Add(htmlView);

            SmtpClient smtpClient = new SmtpClient();
            Object userState = mailMessage;
            smtpClient.Credentials = new System.Net.NetworkCredential("myaddress@gmail.com", "1234567");
            smtpClient.EnableSsl = true;
            smtpClient.Host = "smtp.gmail.com";
            smtpClient.Port = 587;

            //Attach event handler for async callback
            smtpClient.SendCompleted += new SendCompletedEventHandler(smtpClient_SendCompleted);
            try
            {               

                smtpClient.Send(mailMessage);
                EmailStatus = true;
            }
            catch (SmtpException smtpEx)
            {
                EmailStatus = false;

            }
            catch (Exception ex)
            {
                //HttpContext.Current.Response.Write(ex.InnerException);
                EmailStatus = false;

            } 
```

在 web.config 我有

```
<system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="noreply@asd.com">
        <network host="smtp.gmail.com" port="587"
                                       userName="asd@gmail.com"
                                       password="asd" />
      </smtp>
    </mailSettings>
  </system.net> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:45:28.953

尝试设置：

```
smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
smtpClient.UseDefaultCredentials = false;
smtpClient.Credentials = new System.Net.NetworkCredential("myaddress@gmail.com", "1234567"); 
```

此外，您似乎正在订阅该[`SendCompleted`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.sendcompleted.aspx)事件，但此事件旨在在异步发送电子邮件（[`SendAsync`](http://msdn.microsoft.com/en-us/library/x5x13z6h)方法）时使用，因此您可以摆脱它。您正在使用的`Send`方法是阻塞。

您也可以查看[以下答案](https://stackoverflow.com/a/6974160/29407)。

# android - 副本岛只有一组图像，为什么？

> ID：11066822
> 
> 赞同：1
> 
> 时间：2012-06-16T20:33:49.773
> 
> 标签：android, image, opengl-es, bitmap

当我查看： [http](http://replicaisland.googlecode.com/svn/trunk/res/drawable/) ://replicaisland.googlecode.com/svn/trunk/res/drawable/ 并发现它只有一组图像时，我想知道这是为什么。显然我错过了一些东西，因为我认为每个人都需要三组图像，这样你就可以支持所有的安卓设备。（电话）我还没有查看所有代码，但是**克里斯只是调整图像大小还是不支持其他设备？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:45:22.097

> 显然我错过了一些东西，因为我认为每个人都需要三组图像，这样你就可以支持所有的安卓设备。

拥有*四*组图像（`-ldpi`、`-mdpi`、`-hdpi`、`-xhdpi`）通常是一个好主意……如果您使用的是基于小部件的框架，并且对于操作系统使用的图像（例如，启动器图标）。

如果您正在编写游戏——尤其是像 Replica Island 那样使用 OpenGL 的游戏——您可能会使用不同的技术。在 Replica Island 的案例中，它似乎`DrawableBitmap`处理“位图分辨率和显示分辨率之间”的缩放。

# html - 标签的边距和填充

> ID：11066823
> 
> 赞同：22
> 
> 时间：2012-06-16T20:33:52.490
> 
> 标签：html, stylesheet, padding, margin

我正在编写一个非常简单的 HTML 代码，如下所示。用记事本编写并在 IE-8 和 Firefox（操作系统：Window Vista）中打开。

```
<html>
<body>
    <table border="1"><tr><td>test</td></tr></table>
</body>
</html> 
```

上面的代码没有什么特别之处，它从左上角创建了一些空间。

![在此处输入图像描述](../Images/1469e24f7a28dd15bde7f1abd5af5eb7.png)

可以使用以下代码轻松删除

```
<body style="margin:0; padding:0"> 
```

现在我找到了默认的边距和填充，它`4`适用于 Firefox，而适用于 IE-8。

```
<body style="margin:4; padding:4"> 
```

我对这种情况有一些疑问。

1.  为什么这个值为 4？
2.  这个值是从哪里来的，它是否保存在某个地方？
3.  我们可以修改（可配置）这个默认值吗？
4.  这些值对于浏览器有何不同？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T20:38:01.230

1.  首先，它可能是`4px`而不是`4`。其次，这正是浏览器供应商决定的默认方式。
2.  它保存在默认浏览器样式表中。
3.  你可以，但你**不应该**。它因每个浏览器而异。去谷歌上查询！`How do I change default stylesheet on <insert browser here>?`
4.  可能存在细微差别，您应该可以通过查看默认样式表来判断......

这种差异是我们作为设计师使用 CSS 重置的主要原因之一，以标准化遵循不同浏览器实现的所有 CSS 尴尬。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T22:38:34.823

浏览器为大多数 HTML 元素的 CSS 内置了“合理的默认值”——如果你有没有 CSS 的纯 HTML，这只会防止你的页面看起来完全不可读，但它们当然打算被你自己的 CSS 覆盖。

默认浏览器样式通常被称为**“用户代理样式表”** ——以下站点很好地参考了 IE 多年来拥有的各种特殊 UA 表单，并在底部提供了其他浏览器的表单：

[http://www.iecss.com/](http://www.iecss.com/)

许多人用来*“规范化”默认值的一种方法是***“CSS 重置”**，因此您在所有浏览器中都有相同的起点- 这只是您在设置所有 UA 的自己的 CSS 之前放置的 CSS 片段风格相同的东西。这是一个众所周知的：

[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-17T18:43:22.783

尝试这个

```
body{
    line-height: 0
} 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2015-04-20T20:23:06.137

将此添加到您的样式表顶部

```
*{margin:0px;padding:0px;} 
```

这消除了浏览器之间填充和边距的所有差异。

# python - Web2py：自定义表单的自定义 CSS 类

> ID：11066825
> 
> 赞同：3
> 
> 时间：2012-06-16T20:34:09.127
> 
> 标签：python, css, web2py

如何指定自定义 web2py 表单的类？例如

```
{{=form.custom.begin}}
Image name: <div>{{=form.custom.widget.name}}</div>
Image file: <div>{{=form.custom.widget.file}}</div>
Click here to upload: {{=form.custom.submit}}
{{=form.custom.end}} 
```

如何指定 CSS 类`form`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T23:33:55.873

如果是 SQLFORM，则可以在创建表单时指定类：

```
form = SQLFORM(db.mytable, _class='myclass') 
```

否则，`form.custom.begin`只需生成以下 HTML：

```
<form action="" enctype="multipart/form-data" method="post"> 
```

`form.custom.begin`因此，您可以直接将该 HTML（添加了您的类）输入到模板中，而不是使用。

# http - 如何查找发送到 CGI 页面的 HTTP POST 数据？

> ID：11066829
> 
> 赞同：0
> 
> 时间：2012-06-16T20:35:01.390
> 
> 标签：http, post, cgi

我在谷歌上搜索了好几个小时。也许我搜索了错误的关键字。这就是我想要做的。

我正在将数据发布到一个网站，然后该网站发出一个 HTTP POST 请求并返回一个 .CGI 网页。我想知道网页用于发送 HTTP POST 请求的参数，以便我可以通过让用户在我自己的网页上输入数据来直接将我的网页中的页面链接到最终的 .CGI 网页。

我如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:02:04.037

通常 POST 正文通过管道传输到 STDIN，只需将其作为普通文件读取

# c++ - 在 Linux 上使用 zlib 编译 boost

> ID：11066831
> 
> 赞同：1
> 
> 时间：2012-06-16T20:35:14.050
> 
> 标签：c++, boost, compilation, linker, zlib

我正在尝试编译使用 Boost 的 zlib 包装器的代码。但是，无论我做什么，我都无法让它发挥作用。

在我的 cpp 文件中，我有以下标题：

```
#include <algorithm>
#include <fstream>
#include <vector>
#include <boost/archive/binary_oarchive.hpp>
#include <boost/archive/binary_iarchive.hpp>
#include <boost/serialization/vector.hpp>
#include <boost/iostreams/filter/zlib.hpp>
#include <boost/iostreams/filtering_stream.hpp> 
```

我正在使用命令编译：

```
g++ -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -L/usr/lib -lboost_filesystem -lboost_serialization -lz -I /usr/include/boost -o zlib_test zlib_test.o 
```

Boost 本身是在运行命令后使用 bjam 构建的：

```
./bootstrap.sh --prefix=/home/anon/boost --with-libraries=filesystem,program_options,system,serialization 
```

我收到的错误消息如下：

```
zlib_test.o: In function `boost::detail::sp_counted_impl_p<boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_compressor_impl<std::allocator<char> >, std::allocator<char> >::impl>::dispose()':
zlib_test.cpp:(.text._ZN5boost6detail17sp_counted_impl_pINS_9iostreams16symmetric_filterINS2_6detail20zlib_compressor_implISaIcEEES6_E4implEE7disposeEv[boost::detail::sp_counted_impl_p<boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_compressor_impl<std::allocator<char> >, std::allocator<char> >::impl>::dispose()]+0x30): undefined reference to `boost::iostreams::detail::zlib_base::reset(bool, bool)' 
```

ETC....

关于如何编译此代码的任何想法？如果重要的话，这是在 Centos 5 机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:07:59.937

好的，我发现了问题。在编译 Boost 时，我忘记编译 iostreams。

因此，构建 Boost 的命令应该是：

./bootstrap.sh --prefix=/home/andyyen/boost --with-libraries=filesystem,program_options,system,serialization,iostreams

# linux - printf + bash 脚本

> ID：11066832
> 
> 赞同：0
> 
> 时间：2012-06-16T20:35:21.170
> 
> 标签：linux, bash, printf

我有以下文件（典型 file.txt 的示例）

备注 - 参数长度不同

```
 param1=353
     param2=726
     param3=75.32
     param4=21.03
     number100=234
     arg1=100
     the_last_number=true
     x=55
     .
     .
     . 
```

如何将 file.txt 转换为以下格式：（通过 printf 或其他可以成为我的 bash 脚本一部分的解决方案）

```
 1  param1.....................353
   2  param2.....................726
   3  param3.....................75.32
   4  param4.....................21.03
   5  number100..................234
   6  agr1.......................100
   7  the_last_number............true
   8  x..........................55
     .
     .
     . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:41:39.710

```
while read -r line
do
    printf '%s\n' "${line/=/........}"
done < inputfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:15:33.107

这应该有效。

```
SC=$(cat<<ENDDOC
if(~/(.*)=(.*)/){print "\$1"."."x(32-length(\$1))."\$2\n";}
else{print;}
ENDDOC)
perl -n -e "$SC" < file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T10:37:19.317

另一个：

```
no=0
fill='....................'                     # e.g. 20 points
while IFS='=': read left right ; do
  printf "%4d  %s%s%s\n" $((++no)) $left ${fill:${#left}} $right
done < "$infile" 
```

输出：

```
 1  param1..............353
   2  param2..............726
   3  param3..............75.32
   4  param4..............21.03
   5  number100...........234
   6  arg1................100
   7  the_last_number.....true
   8  x...................55 
```

# android - Android 从 ListView 获取复选框信息

> ID：11066846
> 
> 赞同：0
> 
> 时间：2012-06-16T20:37:08.990
> 
> 标签：android, checkbox

我有一个带有多个复选框的 ListView（每个列表项一个）。创建包含来自选定复选框的信息的数组的最佳方法是什么。

例如，这是一个列表。

```
 Item 1 "Ham" Checked
  Item 2 "Turkey" NotChecked
  Item 3 "Bread" Checked 
```

我想创建一个包含“火腿”和“火鸡”的数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:43:09.337

您可以创建一个 ArrayList，然后用户检查的任何项目将它们添加到 arraylist。

下面的代码片段完全符合您的要求。

```
package com.windrealm.android;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class PlanetsActivity extends Activity
{

    private ListView mainListView;
    private Planet[] planets;
    private ArrayAdapter<Planet> listAdapter;
    private Button check;
    private Context context;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        context = PlanetsActivity.this;
        check = (Button) findViewById(R.id.check);
        // Find the ListView resource.
        mainListView = (ListView) findViewById(R.id.mainListView);

        // When item is tapped, toggle checked properties of CheckBox and
        // Planet.
        mainListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener()
                {
                    @Override
                    public void onItemClick(AdapterView<?> parent, View item,
                            int position, long id)
                    {
                        Planet planet = listAdapter.getItem(position);
                        planet.toggleChecked();
                        PlanetViewHolder viewHolder = (PlanetViewHolder) item
                                .getTag();
                        viewHolder.getCheckBox().setChecked(planet.isChecked());
                    }
                });

        // Create and populate planets.
        planets = (Planet[]) getLastNonConfigurationInstance();
        if (planets == null)
        {
            planets = new Planet[]
            { new Planet("Mercury"), new Planet("Venus"), new Planet("Earth"),
                    new Planet("Mars"), new Planet("Jupiter"),
                    new Planet("Saturn"), new Planet("Uranus"),
                    new Planet("Neptune"), new Planet("Ceres"),
                    new Planet("Pluto"), new Planet("Haumea"),
                    new Planet("Makemake"), new Planet("Eris") };
        }
        ArrayList<Planet> planetList = new ArrayList<Planet>();
        planetList.addAll(Arrays.asList(planets));

        // Set our custom array adapter as the ListView's adapter.
        listAdapter = new PlanetArrayAdapter(this, planetList);
        mainListView.setAdapter(listAdapter);

        check.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View view)
            {
                for (int i = 0; i < listAdapter.getCount(); i++)
                {
                    Planet planet = listAdapter.getItem(i);
                    if (planet.isChecked())
                    {
                                            //Add this item in ArrayList
                        Toast.makeText(context,
                                planet.getName() + " is Checked!!",
                                Toast.LENGTH_SHORT).show();
                    }
                }

            }
        });
    }

    /** Holds planet data. */
    private static class Planet
    {
        private String name = "";
        private boolean checked = false;

        public Planet()
        {
        }

        public Planet(String name)
        {
            this.name = name;
        }

        public Planet(String name, boolean checked)
        {
            this.name = name;
            this.checked = checked;
        }

        public String getName()
        {
            return name;
        }

        public void setName(String name)
        {
            this.name = name;
        }

        public boolean isChecked()
        {
            return checked;
        }

        public void setChecked(boolean checked)
        {
            this.checked = checked;
        }

        public String toString()
        {
            return name;
        }

        public void toggleChecked()
        {
            checked = !checked;
        }
    }

    /** Holds child views for one row. */
    private static class PlanetViewHolder
    {
        private CheckBox checkBox;
        private TextView textView;

        public PlanetViewHolder()
        {
        }

        public PlanetViewHolder(TextView textView, CheckBox checkBox)
        {
            this.checkBox = checkBox;
            this.textView = textView;
        }

        public CheckBox getCheckBox()
        {
            return checkBox;
        }

        public void setCheckBox(CheckBox checkBox)
        {
            this.checkBox = checkBox;
        }

        public TextView getTextView()
        {
            return textView;
        }

        public void setTextView(TextView textView)
        {
            this.textView = textView;
        }
    }

    /** Custom adapter for displaying an array of Planet objects. */
    private static class PlanetArrayAdapter extends ArrayAdapter<Planet>
    {

        private LayoutInflater inflater;

        public PlanetArrayAdapter(Context context, List<Planet> planetList)
        {
            super(context, R.layout.simplerow, R.id.rowTextView, planetList);
            // Cache the LayoutInflate to avoid asking for a new one each time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            // Planet to display
            Planet planet = (Planet) this.getItem(position);

            // The child views in each row.
            CheckBox checkBox;
            TextView textView;

            // Create a new row view
            if (convertView == null)
            {
                convertView = inflater.inflate(R.layout.simplerow, null);

                // Find the child views.
                textView = (TextView) convertView
                        .findViewById(R.id.rowTextView);
                checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);

                // Optimization: Tag the row with it's child views, so we don't
                // have to
                // call findViewById() later when we reuse the row.
                convertView.setTag(new PlanetViewHolder(textView, checkBox));

                // If CheckBox is toggled, update the planet it is tagged with.
                checkBox.setOnClickListener(new View.OnClickListener()
                {
                    public void onClick(View v)
                    {
                        CheckBox cb = (CheckBox) v;
                        Planet planet = (Planet) cb.getTag();
                        planet.setChecked(cb.isChecked());
                    }
                });
            }
            // Reuse existing row view
            else
            {
                // Because we use a ViewHolder, we avoid having to call
                // findViewById().
                PlanetViewHolder viewHolder = (PlanetViewHolder) convertView
                        .getTag();
                checkBox = viewHolder.getCheckBox();
                textView = viewHolder.getTextView();
            }

            // Tag the CheckBox with the Planet it is displaying, so that we can
            // access the planet in onClick() when the CheckBox is toggled.
            checkBox.setTag(planet);

            // Display planet data
            checkBox.setChecked(planet.isChecked());
            textView.setText(planet.getName());

            return convertView;
        }

    }

    public Object onRetainNonConfigurationInstance()
    {
        return planets;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T20:44:37.710

如果您将 ListView 的内置复选框方法与 setChoiceMode() 一起使用，则只需调用 getCheckedItemIds [()](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemIds%28%29)或[getCheckedItemPositions()](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPositions%28%29)。

```
public class Example extends Activity implements OnClickListener {
    ListView mListView;
    String[] array = new String[] {"Ham", "Turkey", "Bread"};

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, array);

        mListView = (ListView) findViewById(R.id.list);
        mListView.setAdapter(adapter);
        mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(this);
    }

    public void onClick(View view) {
        SparseBooleanArray positions = mListView.getCheckedItemPositions();
        int size = positions.size();
        for(int index = 0; index < size; index++) {
            Log.v("Example", "Checked: " + array[positions.keyAt(index)]);
        }
    }
} 
```

如果适配器绑定到游标，那么这将变得更加实用。

# java - 以编程方式将按钮添加到片段

> ID：11066847
> 
> 赞同：11
> 
> 时间：2012-06-16T20:37:26.857
> 
> 标签：java, android, android-fragments, button, fragment

我正在尝试以编程方式将图像按钮添加到作为 viewpager 一部分的片段中。我尝试了不同的代码，但即使 Eclipse 没有返回错误，也没有显示任何按钮。

[我在这里](https://stackoverflow.com/questions/4448779/how-to-inflate-xml-layout-file-correctly-inside-custom-viewgroup)发现了一个类似的问题，但答案并没有帮助我让我的按钮出现。

这是我的代码。

```
public class ViewPagerFragment extends Fragment {

private ViewPagerActivity mViewPagerActivity;
private String mId;

public ViewPagerFragment(String id) {
    mId = id;
}

@Override
public void onAttach(Activity activity) {
    if (activity instanceof ViewPagerActivity) {
        mViewPagerActivity = (ViewPagerActivity)activity;
    }
    super.onAttach(activity);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment, container, false);

     int[] image_array = {
            R.drawable.elebutton,
            R.drawable.right,
            R.drawable.middle,
            };

     for (int i =0;i<image_array.length;i++){
            ImageButton b1 = new ImageButton(getActivity());
            b1.setId(100 + i);
             b1.setImageResource(image_array[i]);

            RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            if (i > 0) {
                lp.addRule(RelativeLayout.BELOW, b1.getId() - 1);
            }   
            b1.setLayoutParams(lp);

            ImageHolder ih = new ImageHolder(getActivity());
            ih.addView(b1);

    }

    return v;

}
public class ImageHolder extends FrameLayout {

    public ImageHolder(Context context) {
        super(context);
        initView(context);
    }

    public ImageHolder(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView(context);
    }

    public ImageHolder(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initView(context);
    }

    private void initView(Context context){
        View.inflate(context, R.layout.fragment, this); 
    }

   @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        // TODO Auto-generated method stub
        for(int i = 0 ; i < getChildCount() ; i++){
            getChildAt(i).layout(l, t, r, b);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T00:49:11.907

似乎您正在创建 i 数量的图像，并将它们中的每一个添加到图像持有者。但是，我没有看到您将图像持有者实际加入主布局的任何部分。所以基本上，这些都是创建的，但没有添加到任何地方。让我们假设您的 R.layout.fragment 只有一个 ID 为 frameLayout1 的 FrameLayout。以下是我的建议：

```
public class ViewPagerFragment extends Fragment {

private ViewPagerActivity mViewPagerActivity;
private String mId;

public ViewPagerFragment(String id) {
    mId = id;
}

@Override
public void onAttach(Activity activity) {
    if (activity instanceof ViewPagerActivity) {
        mViewPagerActivity = (ViewPagerActivity)activity;
    }
    super.onAttach(activity);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment, container, false);
}
// IMPORTANT PART! Here we will add images after fragment is inflated and instantiated
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // Get the root layout of fragment, we called it frameLayout1
    FrameLayout fl = (FrameLayout)(this.getActivity.findViewById(R.id.frameLayout1));
    int[] image_array = {
            R.drawable.elebutton,
            R.drawable.right,
            R.drawable.middle,
            };

     for (int i =0;i<image_array.length;i++){
            ImageButton b1 = new ImageButton(getActivity());
            b1.setId(100 + i);
             b1.setImageResource(image_array[i]);

            RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            if (i > 0) {
                lp.addRule(RelativeLayout.BELOW, b1.getId() - 1);
            }   
            b1.setLayoutParams(lp);

            ImageHolder ih = new ImageHolder(getActivity());
            ih.addView(b1);
            fl.addView(ih);
    }
}
// End of important part
public class ImageHolder extends FrameLayout {...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-14T02:00:34.450

您可以参考我对[动态添加按钮到片段](https://stackoverflow.com/questions/50210994/adding-buttons-to-fragments-dynamically)的回答。

基本上在你的 onCreateView 方法上，实现它。此外，您不应该使用`getActivity()`ImageButton 而是使用它`yourView.getContext()`。

```
View myView = inflater.inflate(R.layout.fragment, container, false);

 for (int i = 0; i < image_array.length; i++) {

            final ImageButton b1 = new ImageButton(myView.getContext());
            b1.setImageResource(image_array[i]);
            b1.setId(i + 1);
            b1.setOnClickListener(this);

//Change the linearlayout to relative layout for your context
//you should set another layout within your R.layout.fragment
            LinearLayout linearlayout = (LinearLayout) myView.findViewById(R.id.btnholder); 
            linearlayout.setOrientation(LinearLayout.VERTICAL);

            LinearLayout.LayoutParams buttonParams = new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.MATCH_PARENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT);
            buttonParams.setMargins(left, top, right, btm);

            linearlayout.addView(b1, buttonParams);
} 
```

希望这可以帮助。当我创建普通按钮时，我有一段时间遇到同样的问题。如果您需要其他任何东西，请告诉我:)。

# python - 尝试构建 CKAN 的文档时出现错误消息“没有名为 'sphinx-theme-okfn' 的主题”

> ID：11066850
> 
> 赞同：2
> 
> 时间：2012-06-16T20:38:00.840
> 
> 标签：python, git, python-sphinx, ckan

我在 virtualenv 中安装了 CKAN 并激活了 virtualenv，并且我已经在 pip-requirements-docs.txt 中安装了要求，但是当我尝试构建文档时出现此错误：

```
> python setup.py build_sphinx
...
sphinx.errors.ThemeError: no theme named 'sphinx-theme-okfn' found (missing theme.conf?) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T20:38:01.387

问题是 CKAN 使用的 Sphinx 主题不是 CKAN git 存储库本身的一部分，它有自己的 git 存储库，它是 CKAN git 存储库的[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。因此，在构建文档之前，您需要检查子模块：

```
> git submodule init
> git submodule update
> python setup.py build_sphinx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T13:59:46.270

我多次尝试上述解决方案。我什至升级了 Babel 和 Pygments 并再次尝试 - 无济于事。一直都是同样的错误。最后，我将一个名为 theme.conf 的文件从[https://github.com/rostock/opendata.hro/tree/master/ckan/doc/_themes/sphinx-theme-okfn](https://github.com/rostock/opendata.hro/tree/master/ckan/doc/_themes/sphinx-theme-okfn)复制到目录 ~/ckan/default/src/ckan /doc/_themes/sphinx-theme-okfn; 因此我能够以某种方式运行 sphinx 并在 Windows 上为我的 CKAN 1.8 生成可读的文档。也许我的解决方法会对某人有用？

# php - 使用 PHP 检测 EOL 类型

> ID：11066857
> 
> 赞同：13
> 
> 时间：2012-06-16T20:38:19.967
> 
> 标签：php, newline, platform

> **参考：**这是一个自我回答的问题。它旨在分享知识，问答风格。

如何检测PHP[中行尾字符的类型？](http://en.wikipedia.org/wiki/Newline)

*PS：我已经从头开始编写这段代码太久了，所以我决定在 SO 上分享它，另外，我相信有人会找到改进的方法。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T20:38:20.450

```
/**
 * Detects the end-of-line character of a string.
 * @param string $str The string to check.
 * @param string $default Default EOL (if not detected).
 * @return string The detected EOL, or default one.
 */
function detectEol($str, $default=''){
    static $eols = array(
        "\0x000D000A", // [UNICODE] CR+LF: CR (U+000D) followed by LF (U+000A)
        "\0x000A",     // [UNICODE] LF: Line Feed, U+000A
        "\0x000B",     // [UNICODE] VT: Vertical Tab, U+000B
        "\0x000C",     // [UNICODE] FF: Form Feed, U+000C
        "\0x000D",     // [UNICODE] CR: Carriage Return, U+000D
        "\0x0085",     // [UNICODE] NEL: Next Line, U+0085
        "\0x2028",     // [UNICODE] LS: Line Separator, U+2028
        "\0x2029",     // [UNICODE] PS: Paragraph Separator, U+2029
        "\0x0D0A",     // [ASCII] CR+LF: Windows, TOPS-10, RT-11, CP/M, MP/M, DOS, Atari TOS, OS/2, Symbian OS, Palm OS
        "\0x0A0D",     // [ASCII] LF+CR: BBC Acorn, RISC OS spooled text output.
        "\0x0A",       // [ASCII] LF: Multics, Unix, Unix-like, BeOS, Amiga, RISC OS
        "\0x0D",       // [ASCII] CR: Commodore 8-bit, BBC Acorn, TRS-80, Apple II, Mac OS <=v9, OS-9
        "\0x1E",       // [ASCII] RS: QNX (pre-POSIX)
        //"\0x76",       // [?????] NEWLINE: ZX80, ZX81 [DEPRECATED]
        "\0x15",       // [EBCDEIC] NEL: OS/390, OS/400
    );
    $cur_cnt = 0;
    $cur_eol = $default;
    foreach($eols as $eol){
        if(($count = substr_count($str, $eol)) > $cur_cnt){
            $cur_cnt = $count;
            $cur_eol = $eol;
        }
    }
    return $cur_eol;
} 
```

**笔记：**

*   需要检查编码类型
*   ~~需要以某种方式知道我们可能在像 ZX8x 这样的奇异系统上（因为 ASCII x76 是普通字母）~~ @radu 提出了一个很好的观点，在我的情况下，不值得努力很好地处理 ZX8x 系统。
*   **我应该将功能一分为二吗？** `mb_detect_eol()`（多字节）和`detect_eol()`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-17T02:37:12.087

[使用 regex 替换除新行之外的所有内容](http://www.regular-expressions.info/dot.html)不是更容易吗？

> [点匹配单个字符，而不关心该字符是什么。**唯一的例外是换行符。**]

考虑到这一点，我们做了一些魔术：

```
$string = 'some string with new lines';
$newlines = preg_replace('/.*/', '', $string);
// $newlines is now filled with new lines, we only need one
$newline = substr($newlines, 0, 1); 
```

不确定我们是否可以信任正则表达式来完成所有这些，但我没有任何东西可以测试。

![在此处输入图像描述](../Images/aba1f81fa61b3b107961279bde4e555a.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-24T07:12:32.983

这里已经给出的答案为用户提供了足够的信息。以下代码（基于已经给出的答案）可能会有所帮助：

*   它提供了找到的 EOL 的参考*   该检测还设置了一个可以由应用程序使用的密钥来引用该引用。*   它展示了如何在实用程序类中使用引用。*   展示如何使用它来检测返回找到的 EOL 的键名的文件。我希望这对大家有用。

```
/**
Newline characters in different Operating Systems
The names given to the different sequences are:
============================================================================================
NewL  Chars       Name     Description
----- ----------- -------- ------------------------------------------------------------------
LF    0x0A        UNIX     Apple OSX, UNIX, Linux
CR    0x0D        TRS80    Commodore, Acorn BBC, ZX Spectrum, TRS-80, Apple II family, etc
LFCR  0x0A 0x0D   ACORN    Acorn BBC and RISC OS spooled text output.
CRLF  0x0D 0x0A   WINDOWS  Microsoft Windows, DEC TOPS-10, RT-11 and most other early non-Unix
                          and non-IBM OSes, CP/M, MP/M, DOS (MS-DOS, PC DOS, etc.), OS/2,
----- ----------- -------- ------------------------------------------------------------------
*/
const EOL_UNIX    = 'lf';        // Code: \n
const EOL_TRS80   = 'cr';        // Code: \r
const EOL_ACORN   = 'lfcr';      // Code: \n \r
const EOL_WINDOWS = 'crlf';      // Code: \r \n 
```

然后在静态类实用程序中使用以下代码来检测

```
/**
Detects the end-of-line character of a string.
@param string $str      The string to check.
@param string $key      [io] Name of the detected eol key.
@return string The detected EOL, or default one.
*/
public static function detectEOL($str, &$key) {
   static $eols = array(
     Util::EOL_ACORN   => "\n\r",  // 0x0A - 0x0D - acorn BBC
     Util::EOL_WINDOWS => "\r\n",  // 0x0D - 0x0A - Windows, DOS OS/2
     Util::EOL_UNIX    => "\n",    // 0x0A -      - Unix, OSX
     Util::EOL_TRS80   => "\r",    // 0x0D -      - Apple ][, TRS80
  );

  $key = "";
  $curCount = 0;
  $curEol = '';
  foreach($eols as $k => $eol) {
     if( ($count = substr_count($str, $eol)) > $curCount) {
        $curCount = $count;
        $curEol = $eol;
        $key = $k;
     }
  }
  return $curEol;
}  // detectEOL 
```

然后是一个文件：

```
/**
Detects the EOL of an file by checking the first line.
@param string  $fileName    File to be tested (full pathname).
@return boolean false | Used key = enum('cr', 'lf', crlf').
@uses detectEOL
*/
public static function detectFileEOL($fileName) {
   if (!file_exists($fileName)) {
     return false;
   }

   // Gets the line length
   $handle = @fopen($fileName, "r");
   if ($handle === false) {
      return false;
   }
   $line = fgets($handle);
   $key = "";
   <Your-Class-Name>::detectEOL($line, $key);

   return $key;
}  // detectFileEOL 
```

*将Your-Class-Name*更改为实现类的名称（所有静态成员）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-24T20:33:09.970

我的回答是，因为我既不能制作[ohaal](https://stackoverflow.com/users/1210983/ohaal)的作品，也不能制作[transilvlad](https://stackoverflow.com/users/1311393/transilvlad)的作品，因此我的回答是：

```
function detect_newline_type($content) {
    $arr = array_count_values(
               explode(
                   ' ',
                   preg_replace(
                       '/[^\r\n]*(\r\n|\n|\r)/',
                       '\1 ',
                       $content
                   )
               )
           );
    arsort($arr);
    return key($arr);
} 
```

## 解释：

两种提议的解决方案的总体思路都很好，但实现细节阻碍了这些答案的有用性。

实际上，这个函数的重点是返回文件中使用的换行符类型，并且**换行符可以是一个或两个字符长**。

仅此一项就导致使用`str_split()`不正确。正确切割标记的唯一方法是使用一个函数来切割具有可变长度的字符串，而不是基于字符检测。这就是`explode()`发挥作用的时候。

但是为了让有用的标记爆炸，有必要用正确的匹配替换正确的字符，在正确的数量。大多数*魔法*都发生在正则表达式中。

需要考虑3点：

1.  [按照ohaal](https://stackoverflow.com/users/1210983/ohaal)`.*`的建议使用是行不通的。虽然确实不会匹配换行符，但在不是换行符或换行符一部分的系统上，将不正确地匹配它（提醒：我们正在检测换行符，因为它们可能与我们系统上的不同.否则没有意义）。`.``\r``.`
2.  用任何东西替换`/[^\r\n]*/`将“起作用”以使文本消失，但一旦我们想要有分隔符就会成为一个问题（因为我们删除了除换行符之外的所有字符，任何不是换行符的字符都将是有效的分隔符）。因此，创建与换行符匹配的想法，并在替换中使用对该匹配项的反向引用。
3.  在内容中，可能会有多个换行符连续出现。但是，我们不想在这种情况下对它们进行分组，因为其余代码会将它们视为不同类型的换行符。这就是为什么在反向引用的匹配中明确说明换行符列表的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-14T12:24:04.727

基于ohaal的回答。

这可以为 EOL 返回一个或两个字符，例如 LF、CR+LF..

```
 $eols = array_count_values(str_split(preg_replace("/[^\r\n]/", "", $string)));
  $eola = array_keys($eols, max($eols));
  $eol = implode("", $eola); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-22T06:13:56.253

如果您只关心 LF/CR，这是我写的一种方法。无需处理您永远不会看到的所有可能的文件案例。

```
/**
 * @param  string  $path
 * @param  string  $format  real or human_readable
 * @return false|string
 * @author Sorin-Iulian Trimbitas
 */
public static function getLineBreak(string $path, $format = 'real')
{
    // Hopefully my idea is ok, the rest of the stuff from the internet doesn't seem to work ok in some cases
    // 1\. Take the first line of the CSV
    $file = new \SplFileObject($path);
    $line = $file->getCurrentLine();
    // Do we have an empty line?
    if (mb_strlen($line) == 1) {
        // Try the next line
        $file->next();
        $line = $file->getCurrentLine();
        if (mb_strlen($line) == 1) {
            // Give up
            return false;
        }
    }
    // What does we have at its end?
    $last_char = mb_substr($line, -1);
    $penultimate_char = mb_substr($line, -2, 1);
    if ($last_char == "\n" || $last_char == "\r") {
        $real_format = $last_char;
        if ($penultimate_char == "\n" || $penultimate_char == "\r") {
            $real_format = $penultimate_char.$real_format;
        }
        if ($format == 'real') {
            return $real_format;
        }
        return str_replace(["\n", "\r"], ['LF', 'CR'], $real_format);
    }
    return false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-10T04:09:31.900

我不使用 php 作为主要语言，但尽量简单和记忆，如果有一些更正，欢迎评论或编辑。

```
<?php
function eol_detect(&$str, $buffSize=1024) {
    $buff = substr($str, 0, $buffSize);
    $eol = null;

    if (strpos($buff, "\r\n") !== false)
        $eol = "\r\n";
    elseif (strpos($buff, "\n") !== false)
        $eol = "\n";
    elseif (strpos($buff, "\r") !== false)
        $eol = "\r";

    return $eol;
} 
```

# c++ - 为什么 set::find 不是模板？

> ID：11066859
> 
> 赞同：6
> 
> 时间：2012-06-16T20:38:26.867
> 
> 标签：c++, stl, c++11, std

使用模板功能，`<algorithm>`您可以执行以下操作

```
struct foo
{
    int bar, baz;
};

struct bar_less
{
    // compare foo with foo
    bool operator()(const foo& lh, const foo& rh) const
    {
        return lh.bar < rh.bar;
    }
    template<typename T>  // compare some T with foo
    bool operator()(T lh, const foo& rh) const
    {
        return lh < rh.bar;
    }
    template<typename T>  // compare foo with some T
    bool operator()(const foo& lh, T rh) const
    {
        return lh.bar < rh;
    }
};

int main()
{
    foo foos[] = { {1, 2}, {2, 3}, {4, 5} };
    bar_less cmp;
    int bar_value = 2;
    // find element {2, 3} using an int
    auto it = std::lower_bound(begin(foos), end(foos), bar_value, cmp);
    std::cout << it->baz;
} 
```

在`std::set`诸如`find`您必须传递类型的对象的方法中，`set::key_type`这通常会迫使您创建一个虚拟对象。

```
set<foo> foos;
foo search_dummy = {2,3};  // don't need a full foo object;
auto it = foos.find(search_dummy); 
```

如果可以调用 just 会非常有帮助`foos.find(2)`。有什么理由`find`不能成为模板，接受可以传递给 less 谓词的所有内容。如果它只是丢失了，为什么不在 C++11 中（我认为不是）。

## **编辑**

主要问题是为什么不可能，如果可行，为什么决定标准不提供它。您可以提出解决方法的第二个问题:-)（`boost::multi_index_container`我刚刚想到，它提供了从值类型中提取的键）

另一个构造值类型更昂贵的示例。key`name`是 type 的一部分，不应该作为 maps key 的副本；

```
struct Person
{
    std::string name;
    std::string adress;
    std::string phone, email, fax, stackoferflowNickname;
    int age;
    std::vector<Person*> friends;
    std::vector<Relation> relations;
};

struct PersonOrder
{
    // assume that the full name is an unique identifier
    bool operator()(const Person& lh, const Person& rh) const
    {
        return lh.name < rh.name;
    }
};

class PersonRepository
{
public:

    const Person& FindPerson(const std::string& name) const
    {
        Person searchDummy;  // ouch
        searchDummy.name = name;
        return FindPerson(searchDummy);
    }

    const Person& FindPerson(const Person& person) const;

private:
    std::set<Person, PersonOrder> persons_;
    // what i want to avoid
    // std::map<std::string, Person> persons_;
    // Person searchDummyForReuseButNotThreadSafe;

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:13:58.830

`std::find_if`适用于未排序的范围。所以你可以传递任何你想要的谓词。

`std::set<T>`始终使用`Comparator`模板参数（`std::less<T>`默认情况下）来维护集合的顺序，以及再次查找元素。

因此，如果`std::set::find`是模板化的，则它必须要求您只传递一个观察比较器总排序的谓词。

再说一遍，`std::lower_bound`所有其他在排序范围上工作的算法已经完全需要这个，所以这不是一个新的或令人惊讶的要求。

所以，我想这只是一个疏忽，没有`find_if()`（说）在`std::set`. 为 C++17 提出它 :) （**编辑：：** EASTL[已经有了这个](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2271.html)，而且他们使用的名称比我做的要好得多：） `find_as`。

也就是说，你知道[你不应该使用`std::set`](http://lafstern.org/matt/col1.pdf)，对吗？在大多数情况下，排序的向量会更快，并为您提供您发现缺乏的灵活性`std::set`。

**编辑：**正如 Nicol 指出的那样，在[Boost](http://www.boost.org/doc/libs/1_49_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx)和[Loki](http://loki-lib.sourceforge.net/html/a00025.html)（以及其他地方，我敢肯定）中有这个概念的实现，但是看到你不能使用它们的主要优势（内置`find()`方法），你使用裸机不会损失太多`std::vector`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T06:13:05.807

该标准规定`std::set::find`具有对数时间复杂度。在实践中，这是通过实现`std::set`为二叉搜索树来实现的，其中[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)比较用作排序标准。任何不满足同样严格的弱排序标准的查找都不会满足对数复杂度。所以这是一个设计决策：如果您想要对数复杂度，请使用`std::set::find`. 如果您可以用复杂性换取灵活性，请在场景中使用[std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T21:03:12.073

他们已经提供了您想要的东西，但方式与您正在考虑的方式完全不同。

实际上，有两种不同的方法：一种是为包含的类构建一个构造函数，1）可以隐式使用，2）只需要你真正需要比较的元素子集。有了这个，您*可以*搜索`foods.find(2);`. 您最终*将*创建一个临时对象`2`，然后找到该临时对象，*但这*将是一个真正的临时对象。您的代码不必显式（在任何地方）处理它。

编辑：我在这里谈论的是创建一个与您在地图中存储的类型相同的实例，但（可能）将您未使用的任何字段作为未初始化（或已初始化）的“键”说“不存在”的东西）。例如：

```
struct X { 
   int a; // will be treated as the key
   std:::string data;
   std::vector<int> more_data;
public:
   X(int a) : a(a) {} // the "key-only" ctor
   X(int a, std::string const &d, std::vector<int> const &m); // the normal ctor
};

std::set<X> s;

if (s.find(2)) { // will use X::X(int) to construct an `X`
    // we've found what we were looking for
} 
```

是的，当你`X`用单参数构造函数构造你的（或者我称之为 X 的东西）时，你构造的东西很可能除了搜索之外不能用于任何事情。

结束编辑]

第二个，库提供了更直接的支持，通常更简单一些：如果你真的只使用元素的一些子集（可能只有一个）进行搜索，那么你可以创建一个`std::map`而不是`std::set`. 使用`std::map`，显式/直接支持搜索您指定为键类型的任何实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T20:48:39.193

> key_type 是集合容器中定义的成员类型，作为Key 的别名，它是第一个模板参数，也是容器中存储的元素的类型。

请参阅[文档](http://www.cplusplus.com/reference/stl/set/find/)。

对于用户定义的类型，库无法知道键类型是什么。碰巧*对于您的特定用例*，键类型是`int`. 如果你使用 a`set< int > s;`你可以调用`s.find( 2 );`. 但是，如果您想搜索 a`set< foo >`并且只想传入一个整数，则需要帮助编译器（想想和 a`set`之间的排序如何工作）。`foo``int`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T00:33:31.010

因为如果你想这样做，除了两个s之间的比较之外，`std::find(2)`你还必须定义如何`int`进行比较。但由于和是不同的类型，您实际上将需要两个附加功能：`foo``foo``int``foo`

```
bool operator<(int, foo);
bool operator<(foo, int); 
```

（或其他一些逻辑等效对）。

现在，如果你*这样做*，你实际上是在and和之间定义一个**双射函数**，你也可以简单地使用 a and be done。`int``foo``std::map<int, foo>`

如果您仍然不想要`std::map`但想要排序搜索的好处，那么虚拟对象实际上是最简单的方法。

当然，该标准`std::set`可以提供一个成员函数，您向该函数传递一个接收 a`foo`并返回 -1, 0, 1 如果它小于、等于或大于搜索到的函数......但这不是 C++ 方式。请注意，甚至`bsearch()`需要两个相同类型的参数！

# magento - 如何在分层导航 Magento 中按属性过滤？

> ID：11066860
> 
> 赞同：0
> 
> 时间：2012-06-16T20:38:28.430
> 
> 标签：magento

我的管理员中有两个属性：颜色和大小。

此属性具有以下配置：

范围：全局目录输入类型：下拉应用到：全部在分层导航中使用：可过滤结果

而且我有具有简单产品的可配置产品。例如：

可配置：我的 T 恤 SIMPLE 1：我的 T 恤，颜色 = 白色，尺寸 = L 简单 2：我的 T 恤，颜色 = 黑色，尺寸 = L

可配置：我的另一件 T 恤简单 1：我的另一件 T 恤，颜色 = 白色，尺寸 = S 简单 2：我的另一件 T 恤，颜色 = 黑色，尺寸 = M

但我在分层导航中看不到“颜色”或“大小”过滤器。我只能按价格和子类别进行过滤。

为什么这些属性没有出现在我的分层导航中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T09:05:43.767

可能是导致问题的其中之一：

1.  该类别未设置为锚定。转到管理区域中的类别，然后转到“显示设置”选项卡。确保“是锚”选项设置为“是”。

2.  属性不在您正在查看的类别中的产品的正确属性集中

3.  类别中的产品没有这些属性的值

# file - NAnt 中目录或文件集的最后写入时间

> ID：11066866
> 
> 赞同：2
> 
> 时间：2012-06-16T20:39:12.547
> 
> 标签：file, directory, nant

NAnt 有[directory::get-last-write-time](http://nant.sourceforge.net/release/0.91/help/functions/directory.get-last-write-time(System.String).html)和[file::get-last-write-time](http://nant.sourceforge.net/release/0.91/help/functions/file.get-last-write-time(System.String).html)，但我正在寻找一种方法来获取目录中任何文件的最新写入时间（递归）或文件集。

directory::get-last-write-time 可能看起来很有用，但只有在直接写入目录中的文件时才会更新，而不是子目录中的文件。

有没有办法用股票 NAnt 做到这一点，或者我是否必须编写一些递归目录/文件集的所有内容并找到最近的写入时间的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:19:02.917

您可以使用 NAnt 使用普通的旧`<foreach>`循环来执行此操作。有点尴尬，但它有效：

```
<target name="go">
  <fileset
    id="paths"
    basedir="C:\foo">
    <include name="**/*" />
  </fileset>
  <!-- preset with Unix epoch -->
  <property
    name="most.recent"
    value="1970-01-01T00:00:00Z" />
  <foreach item="File" property="path">
    <in>
      <items refid="paths" />
    </in>
    <do>
      <property
        name="current"
        value="${file::get-last-write-time(path)}" />
      <property
        name="most.recent"
        value="${current}"
        if="${datetime::parse(current) > datetime::parse(most.recent)}" />
    </do>
  </foreach>
  <echo message="${most.recent}" />
</target> 
```

# playframework-2.0 - PlayFramework2 链接

> ID：11066867
> 
> 赞同：2
> 
> 时间：2012-06-16T20:39:13.033
> 
> 标签：playframework-2.0

我可以通过以下方式创建 html 链接：

```
<a href="/about">About Us</a> 
```

这将遵循`/about`. 但在以下页面上（我知道这是针对早期版本的 Play，但我找不到 2.0.1 的任何信息）：

[http://www.playframework.org/documentation/1.1/tags](http://www.playframework.org/documentation/1.1/tags)

[playframework如何从带有一个参数的href中的html调用方法？](https://stackoverflow.com/questions/9187114/playframework-how-to-call-method-from-html-in-href-that-takes-one-parameter)

该链接是从路由文件中获取的。我将上述链接的路由定义为：

`GET /about controllers.Application.about()`

在 PlayFramework2 中，如何通过传入控制器和函数名称以编程方式实现路由？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T22:07:54.683

在模板中使用它：

```
<a href="@routes.Controller.method("param-value")">Link</a> 
```

在你的情况下：

```
<a href="@routes.Application.about()">Link</a> 
```

您也可以在控制器中使用类似语法的路由器：

```
public static Result redirectSomwhere(){
    return redirect(routes.Application.about());
} 
```

# excel - 根据特定条件计算 Excel 中的多个项目

> ID：11066870
> 
> 赞同：1
> 
> 时间：2012-06-16T20:39:43.287
> 
> 标签：excel, excel-formula, countif, vba

我浏览了其他问题，找不到我需要的东西。

最好我解释如下：

我有一个包含三列的电子表格：

产品名称 供应商

一些供应商有相同的产品。

我需要计算供应商有多少相同的产品名称。

非常感谢所有帮助。

谢谢，

用户1114330

![示例数据](../Images/aab27028b20245060295c5e9c8127901.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:09:26.073

将此公式粘贴到单元格 C1

```
 =SUMPRODUCT(($A$1:$A$10=A1)*($B$1:$B$10=B1)) 
```

**快照**

![在此处输入图像描述](../Images/aa2f8d99b335751acc65c4fb3d46829e.png)

但是，如果您仍然想要 VBA，请参阅此

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lrow As Long

    Set ws = Sheets("Sheet1")

    With ws
        lrow = .Range("A" & .Rows.Count).End(xlUp).Row
        .Range("C1:C" & lrow).Formula = "=SUMPRODUCT(($A$1:$A$" & lrow & _
                                        "=A1)*($B$1:$B$" & lrow & "=B1))"
    End With
End Sub 
```

# python - beautifulsoup 使用正则表达式在文件中找不到 href

> ID：11066874
> 
> 赞同：7
> 
> 时间：2012-06-16T20:40:27.253
> 
> 标签：python, beautifulsoup

我有一个 html 文件，如下所示：

```
<form action="/2811457/follow?gsid=3_5bce9b871484d3af90c89f37" method="post">
<div>
<a href="/2811457/follow?page=2&amp;gsid=3_5bce9b871484d3af90c89f37">next_page</a>
&nbsp;<input name="mp" type="hidden" value="3" />
<input type="text" name="page" size="2" style='-wap-input-format: "*N"' />
<input type="submit" value="jump" />&nbsp;1/3
</div>
</form> 
```

如何在 next_page 中提取 href ""/2811457/follow?page=2&gsid=3_5bce9b871484d3af90c89f37"？

它是html的一部分，我打算说清楚。当我使用beautifulsoup时，

```
print soup.find('a',href=re.compile('follow?page')) 
```

它返回无，为什么？我是beautifulsoup的新手，我看过文档，但仍然很困惑。

现在我用一种丑陋的方式：

```
 urls = soup.findAll('a',href=True))
    for url in urls:
        if follow?page in url:
            print url 
```

我需要一种更清晰、更优雅的方式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-16T20:42:25.577

您需要转义问号。正则表达式的`w?`意思是`zero or one w`。尝试这个：

```
print soup.find('a', href = re.compile(r'.*follow\?page.*')) 
```

# c# - 本机和托管析构函数

> ID：11066880
> 
> 赞同：12
> 
> 时间：2012-06-16T20:41:17.823
> 
> 标签：c#, c++-cli

我有一个本机对象 (C++)，它有一个`gcroot`指向托管对象 (C#) 的指针。

```
class SomeNativeClass {
    gcroot<SomeManagedClass ^> managedClass;
}; 
```

**问题**`delete(someNativeClass)`当我在以前分配 的本机代码中删除此类的本机实例时，该`managedClass`实例是否会被垃圾收集，或者我是否也应该显式删除它（在本机析构函数中）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T21:26:15.233

> 如果只删除本机对象并且在其他任何地方都没有引用托管对象，它会被垃圾收集吗？

这就是垃圾回收的本质。收集器在找不到对象的引用时会销毁该对象。当您使用 gcroot<> 模板类时，它的完成方式略有不同，收集器查找托管对象引用的“正常”方式是通过在 cpu 寄存器和托管代码堆栈和托管堆中发现它们。这在本机代码中不起作用， gcroot<> 类可以提供帮助。

gcroot<> 构造函数调用 GCHandle::Alloc() 来分配对该对象的显式引用。它的析构函数调用 GCHandle::Free() 来删除它。能够分配这些“跟踪句柄”是 CLR 中的次要机制，它为它们维护一个表，除了它自己找到的引用之外，收集器还会参考该表。

最终效果是当你的类析构函数运行时，它会自动调用 gcroot<> 析构函数。对象引用消失了。如果那是唯一的引用，在这种情况下很可能，下一次垃圾收集扫描会破坏该对象。自动地。之后。

# mysql - 如何查看用户在过去 10 天内是否每天都登录？

> ID：11066894
> 
> 赞同：0
> 
> 时间：2012-06-16T20:42:59.740
> 
> 标签：mysql, sql, date, select

我正在使用 mysql 并有一个存储用户登录日期的表 (Log_Table)，这是一种日志记录表。我需要了解用户连续登录了多少天，或者我需要了解用户在过去 10 天内是否每天都登录。问题是我只需要在一个 SQL 选择命令中找到它。Log_Table 有一个`user_id:int`和一个`login_date:DATE`字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:01:21.313

[http://sqlfiddle.com/#!2/56437/7](http://sqlfiddle.com/#!2/56437/7)

```
SELECT user_id,
       COUNT( DISTINCT DATE( login_date )) AS days
FROM   Log_Table
WHERE  login_date > DATE_SUB( CURRENT_TIMESTAMP, INTERVAL 3 DAY )
GROUP BY user_id
HAVING days >= 3; 
```

# c# - Winform 内嵌 XNA 内容管理器仅识别 XNB

> ID：11066902
> 
> 赞同：0
> 
> 时间：2012-06-16T20:44:15.747
> 
> 标签：c#, winforms, xna, shader

我正在用嵌入 XNA 的 winform 编写 MapEditor。我最大的问题是每当我尝试使用 ContentManager 加载任何文件时，它只会读取 .XNB 文件。

我想读一个这样的效果文件：

```
effect = contentManager.Load<Effect>("Effect2"); 
```

但后来我得到“Effect2.xnb 不存在”的错误。如果我添加“Effect2.fx”，它仍然会给我错误消息“Effect2.fx.xnb 不存在”：\

我不知道该怎么做。我通过设置内容属性看到了一个解决方案。但在这种情况下我无法设置这些属性，因为它是一个 winform 应用程序。

有没有人有一个好主意或任何东西？

**编辑！**

找到解决方案！

我通过编写一些用于动态加载的辅助方法来实现此示例中的 ContentBuilder：http: [//create.msdn.com/en-US/education/catalog/sample/winforms_series_2](http://create.msdn.com/en-US/education/catalog/sample/winforms_series_2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:47:06.137

您必须添加一个 XNA Content 项目，并将您的内容包含在该项目中。所有这些文件都将被编译/处理成单独的 XNB 文件，您可以加载这些文件。只要确保在您的 WinForms 项目中引用该项目即可。

同样的规则也适用于游戏项目：它仍然需要一个附带的内容项目。

***编辑***：

啊，对……你想动态加载它们。为此，您需要确保任何尝试使用地图编辑器的计算机都安装了 XNA 开发框架。然后，您需要在使用 ContentManager 加载文件之前手动处理文件......不完全确定如何执行此操作。

***编辑***：

查看这篇文章，了解有关在运行时加载未处理内容的更多信息：[如何在运行时在 XNA 中加载纹理？](https://stackoverflow.com/questions/3495156/how-do-i-load-a-texture-in-xna-at-runtime)

# ios - XCode 找不到 #import "ASIHTTPRequest.h" IOS 4.3

> ID：11066908
> 
> 赞同：0
> 
> 时间：2012-06-16T20:45:10.133
> 
> 标签：ios, import, asihttprequest

我正在按照教程将我的应用程序连接到 facebook。当我导入 JSON 和 ASIHTTPRequest 库时，我无法调用标头来使用该库中的函数

![进口问题](../Images/49ab0678f517c82f8444f9fe8118d461.png)

我添加了“${SRCROOT}”，并在标题搜索路径调试和标题搜索路径发布中添加了两个引号

![设置](../Images/6526c65a81556baa8b7ad1d518133817.png)

它没有用。

我也看过这个问题，但无法完成 [ASIHTTPRequest；安装问题](https://stackoverflow.com/questions/4301143/asihttprequest-installation-issues)

[将系统头搜索路径添加到 Xcode](https://stackoverflow.com/questions/3428216/adding-system-header-search-path-to-xcode)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:55:38.067

您需要将包含 AFNetworking 标头的文件夹添加到**User Header Search Paths**。

看起来这很`$(SRCROOT)/AFNetworking/AFNetworking`适合你。

（此外，这同样适用于您的 JSON 库。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:08:33.477

我无法相信虚拟 Xcode 是如何工作的，我刚刚删除了所有 JSON、Classes 和 Reachability 文件夹，并再次复制了所有没有文件夹的标题，现在它可以工作了。我不明白为什么标题在文件夹之外工作？但

无论如何，如果有人尝试所有其他解决方案并且它不起作用，那么这个解决方案可能会起作用。 ![在此处输入图像描述](../Images/aef76e5d3535e99c7866ccb04b764d05.png)

# c# - 以编程方式添加 WPF UserControl 没有样式

> ID：11066920
> 
> 赞同：0
> 
> 时间：2012-06-16T20:47:53.983
> 
> 标签：c#, wpf, xaml, user-controls, styles

我正在尝试创建一个类似按钮的 UserControl，它由边框和标签组成。当直接在 MainWindow 的 XAML 中添加这个 UserControl 时，它会正确呈现（它放在 WrapPanel 中），但如果我以编程方式添加它，它看起来根本不一样。没有边框，没有背景颜色，标签的文本大小错误，文本颜色也是如此。

这是我的用户控件：

```
<UserControl x:Class="Jishi.SonosPartyMode.UserControls.Player"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="150" d:DesignWidth="300"
             Width="200"
             Height="100">
    <Border BorderBrush="#086EAA" CornerRadius="8,8,8,8"  BorderThickness="4" Margin="15" Padding="15px" VerticalAlignment="Center" Background="#0A4069">
        <Label Name="PlayerName" TextElement.Foreground="White" TextElement.FontSize="20px">asdasdasd</Label>
    </Border>
</UserControl> 
```

添加它时，我只是这样调用它：

```
var button = new Player { Content = player.Properties.RoomName, DataContext = player.Properties.UDN };
PlayerList.Children.Add( button ); 
```

PlayerList 是实际的 WrapPanel，而 Player 是我的 UserControl。我已经尝试查找有关此的信息，但我没有找到任何东西。如果您有其他我可以采取的方法，请提出建议。我想要的只是一个可点击的区域，带有一些可以包含文本（一行或多行）的圆角。

我可以以编程方式应用样式，但不会保留在 xaml 中为 UserControl 定义的样式（边框、边距、颜色等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:53:45.117

首先，您不需要为此创建自定义控件，您可以轻松做到

```
var button = new Border { *border properties*, Content = new Lable {Content="dfsdfsdfsd"}}; 
```

如果你使用 PlayerList.Children.Add(button); 然后它添加到 Wrappanel 的末尾，并在 XAML 代码中添加它而不是作为最后一个元素（也许）..

最后一个想法是您在测试时丢失了一些在 XAML 中添加的属性（如对齐、边距等）

希望这可以帮助。

# java - 如何从给定的纬度/经度中找到 X (k) 米的经度/经度？

> ID：11066921
> 
> 赞同：-3
> 
> 时间：2012-06-16T20:48:01.173
> 
> 标签：java, algorithm, geometry, geospatial

如何获得 X 点的纬度/经度，即 Y 点向北 1KM（例如 39.777012，-105.068951）？

请使用 Java 代码！没有外部链接（我不读数学）。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:52:09.397

使用您在代码中[发布的答案](https://stackoverflow.com/questions/1125144/how-do-i-find-the-lat-long-that-is-x-km-north-of-a-given-lat-long/1125425#1125425)`UnitConstants.DegreesToRadians`，定义如下：

```
double DegreesToRadians = Math.PI / 180.0; 
```

你也可以`Math.toRadians`用来做转换（感谢@Hovercraft Full Of Eels 指出这一点）

计算这样的距离是使用一些**使用弧度而不是度数**的数学公式完成的，这就是为什么所有角度都需要通过应用`UnitConstants.DegreesToRadians`因子转换为弧度，更多信息[在这里](http://www.movable-type.co.uk/scripts/latlong.html)

调用我提供的上一个链接中定义的方法，如下所示：

```
LatLonAlt dest= CalculateDerivedPosition(source, 1000, 0); 
```

`source`作为源点，`1000`到目标点和`0`度数（或弧度）为 1KM，因为与源点相比，目标点位于北方。

不要重复这些信息，看看[这个](https://stackoverflow.com/a/837957/782719)SO answer。看看[这篇](http://www.zipcodeworld.com/samples/distance.java.html)文章，它肯定会对你有所帮助。

# c++ - 为什么 GetClientRect 包括窗口边框和标题栏？

> ID：11066923
> 
> 赞同：4
> 
> 时间：2012-06-16T20:48:35.247
> 
> 标签：c++, windows, winapi, screenshot

我正在编写一些代码，它将在 C++ 中给另一个应用程序的窗口句柄截屏。我使用的方法是使用`BitBlt`. 我的应用程序正在成功截取屏幕截图，并且我有一个函数可以将该图像数据保存到 bmp 文件中。

屏幕截图包含窗口的镶边。即边框和标题栏。根据我的理解，`GetClientRect`应该排除窗口的边框和标题栏。我知道`GetWindowRect`返回用户桌面内的坐标，并`GetClientRect`返回相对于应用程序本身的坐标。

我注意到在我的屏幕截图中，标题栏和左边框是可见的，但应用程序的右边框和底部被截断了。所以，我在想，如果我想排除标题和边框，那么我需要对 and 进行某种组合，`GetWindowRect`并`GetClientRect`使用有关窗口本身的信息来偏移`GetClientRect`尺寸，无论窗口标题栏的高度是多少， 例如。

这听起来准确吗，还是我下面的代码做错了什么？

```
#include <Windows.h>
#include "ScreenshotManager.h"

namespace Managers {

    ScreenshotManager::ScreenshotManager(HWND gameHandle) {

        // get a device context for the window
        m_gameContext = GetWindowDC(gameHandle);

        // create a compatible device context for bitblt
        m_bitmapContext = CreateCompatibleDC(m_gameContext);

        // get window client area dimensions
        GetClientRect(gameHandle, &m_gameClientArea);

    }

    bool ScreenshotManager::TakeScreenshot() {

        // create a compatible bitmap for the game screenshots
        m_bitmap = CreateCompatibleBitmap(m_gameContext, m_gameClientArea.right, m_gameClientArea.bottom);

        // select the bitmap into the compatible device context
        SelectObject(m_bitmapContext, m_bitmap);

        // perform bit block transfer
        if (BitBlt(m_bitmapContext, 0, 0, m_gameClientArea.right, m_gameClientArea.bottom, m_gameContext, 0, 0, SRCCOPY) == false)
            return false;

        // get information about the taken screenshot
        GetObject(m_bitmap, sizeof(BITMAP), &m_bitmapInformation);

        return true;

    }

    void ScreenshotManager::SaveScreenshot(LPCWSTR outputPath) {

        BITMAPFILEHEADER   bmfHeader;    
        BITMAPINFOHEADER   bi;

        bi.biSize = sizeof(BITMAPINFOHEADER);
        bi.biWidth = m_bitmapInformation.bmWidth;
        bi.biHeight = m_bitmapInformation.bmHeight;
        bi.biPlanes = 1;    
        bi.biBitCount = 32;    
        bi.biCompression = BI_RGB;    
        bi.biSizeImage = 0;  
        bi.biXPelsPerMeter = 0;    
        bi.biYPelsPerMeter = 0;    
        bi.biClrUsed = 0;    
        bi.biClrImportant = 0;

        DWORD dwBmpSize = ((m_bitmapInformation.bmWidth * bi.biBitCount + 31) / 32) * 4 * m_bitmapInformation.bmHeight;

        // Starting with 32-bit Windows, GlobalAlloc and LocalAlloc are implemented as wrapper functions that 
        // call HeapAlloc using a handle to the process's default heap. Therefore, GlobalAlloc and LocalAlloc 
        // have greater overhead than HeapAlloc.
        HANDLE hDIB = GlobalAlloc(GHND,dwBmpSize);
        char *lpbitmap = (char *)GlobalLock(hDIB);

        // Gets the "bits" from the bitmap and copies them into a buffer which is pointed to by lpbitmap.
        GetDIBits(m_gameContext, m_bitmap, 0, (UINT)m_bitmapInformation.bmHeight, lpbitmap, (BITMAPINFO *)&bi, DIB_RGB_COLORS);

        // A file is created, this is where we will save the screen capture.
        HANDLE hFile = CreateFile(outputPath, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);   

        // Add the size of the headers to the size of the bitmap to get the total file size
        DWORD dwSizeofDIB = dwBmpSize + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);

        //Offset to where the actual bitmap bits start.
        bmfHeader.bfOffBits = (DWORD)sizeof(BITMAPFILEHEADER) + (DWORD)sizeof(BITMAPINFOHEADER); 

        //Size of the file
        bmfHeader.bfSize = dwSizeofDIB; 

        //bfType must always be BM for Bitmaps
        bmfHeader.bfType = 0x4D42; //BM   

        DWORD dwBytesWritten = 0;
        WriteFile(hFile, (LPSTR)&bmfHeader, sizeof(BITMAPFILEHEADER), &dwBytesWritten, NULL);
        WriteFile(hFile, (LPSTR)&bi, sizeof(BITMAPINFOHEADER), &dwBytesWritten, NULL);
        WriteFile(hFile, (LPSTR)lpbitmap, dwBmpSize, &dwBytesWritten, NULL);

        //Unlock and Free the DIB from the heap
        GlobalUnlock(hDIB);    
        GlobalFree(hDIB);

        //Close the handle for the file that was created
        CloseHandle(hFile);

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T21:45:19.470

`GetClientRect()`不包括边框和标题栏。它所做的只是告诉您客户区的*尺寸*。

`BitBlt()`将像素的矩形区域从一个设备上下文复制到另一个。在这个例子中，源 DC 是一个*窗口*DC，所以原点坐标是相对于那个窗口的。

您的代码正在做的是从*window*的原点复制一个*客户端*大小的矩形。（这就是缺少右边缘和下边缘的原因。）

 *您可能有兴趣`AdjustWindowRectEx()`帮助确定要复制的区域的坐标。*

# c++ - 什么是 R 语言的快速免费矩阵/线性代数库？

> ID：11066925
> 
> 赞同：4
> 
> 时间：2012-06-16T20:49:06.040
> 
> 标签：c++, math

我一直在处理数学密集型代码，需要一个好的矩阵库。我可以使用二维数组，但一个完整的矩阵库（包括乘法、加法等）会更方便。我显然已经用谷歌搜索过了，但这给了我很多选择。我希望一些有经验的程序员的意见能帮助缩小范围。

**C++ 有哪些好的免费矩阵/线性代数库？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T20:58:42.877

[Eigen](http://eigen.tuxfamily.org)是一个非常快速的矩阵操作和线性代数库，它在可用时使用硬件加速。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T20:51:27.243

你可以试试[uBlas](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/index.htm)

> **功能性**
> 
> uBLAS 为密集、单位和稀疏向量、密集、恒等、三角形、带状、对称、厄米特和稀疏矩阵提供模板化 C++ 类。向量和矩阵的视图可以通过范围、切片、适配器类和间接数组来构造。该库涵盖了向量和矩阵的常用基本线性代数运算：不同范数的约简、向量和矩阵的加法和减法以及与标量的乘法、向量的内积和外积、矩阵向量和矩阵矩阵积以及三角求解器。容器、视图和表达式模板化操作之间的粘合剂主要是符合 STL 的迭代器接口。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T03:15:44.870

还有[IT++](https://sourceforge.net/projects/itpp/)，它具有易于使用的语法，类似于 Matlab。[Armadillo](http://arma.sourceforge.net)也有非常相似的语法，但已知它比 IT++ 快得多。（犰狳使用模板元编程，而 IT++ 没有）。Armadillo 和 IT++ 都提供了特征分解、奇异值分解、矩阵求逆等。相比之下，[uBlas](http://www.boost.org/libs/numeric)使用模板元编程来提高速度，但不能做矩阵求逆等。

速度差异锥在权衡不同领域的不同功能组，例如。IT++ 有许多信号处理功能，而[Armadillo](http://arma.sourceforge.net)几乎只专注于线性代数。

这带来了一个相关的观点：图书馆的速度只是其整体有用性或价值的一个因素。例如，你可能有一个非常快的库，但是学习它的 API/语法需要相当长的时间，或者语法很难使用。另一个问题是库中已经存在的功能数量——例如。您可能需要编写自己的函数。您可能还需要考虑该库的目的是简化 Matlab 代码到 C++ 的转换，还是您已经熟悉 Matlab 语法。

鉴于上述几点，您最终可能会花费比运行代码更多的时间进行编码和调试，这最终违背了快速库的目的。换句话说，原始执行速度只是一个因素，不应将其作为整体决定因素。开发时间也是一个非常重要的因素（例如，“产品时间”），不仅从成本角度来看，而且因为更少的编码时间可以让您腾出时间做其他事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T00:07:48.163

过去我用过[犰狳](http://arma.sourceforge.net/)。我不能说它的速度能力——它是朋友推荐给我的，因为它与 MATLAB 函数和符号有一些相似之处。我没有尝试任何非常密集的事情，但它在我使用它时达到了我的目的。我也听说过关于 uBlas 的好消息，这里也推荐。

# paypal - 支付网关 | 本地资金转账到银行

> ID：11066927
> 
> 赞同：1
> 
> 时间：2012-06-16T20:49:15.433
> 
> 标签：paypal, payment-gateway, payment, authorize.net

我正在开发需要发送自动付款的门户。对于国际支付，我已经在研究 Paypal 的自适应 API。但我想知道如何整合本地资金转账，直接到用户的银行账户。

我看到了 oDesk.com ，他们有很好的通过当地银行账户汇款的系统。

我想知道他们是怎么做到的？有没有像authorize.net 之类的商家？

最初的目标是来自印度的用户（他们将收到付款），是否有任何银行为此提供一些 API？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-23T12:57:42.193

谷歌“印度支付网关 API”。此外，您是否尝试联系维护电子转账系统（即 NEFT）的印度储备银行，并检查是否有 API 可供开发人员使用？

# android - 平板电脑上的应用程序不是全屏

> ID：11066931
> 
> 赞同：0
> 
> 时间：2012-06-16T20:49:42.640
> 
> 标签：android

有没有办法确保应用程序在平板电脑的小屏幕上运行？我需要用投影仪演示我的应用程序。我打算将我的平板电脑与 micro-hdmi 一起使用……但该应用程序全屏显示。而且很丑。它是专为智能手机设计的......有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:51:46.080

尝试以兼容模式在应用程序中运行

[http://developer.android.com/guide/practices/screen-compat-mode.html](http://developer.android.com/guide/practices/screen-compat-mode.html)

并尝试遵循 UI 指南来支持多个屏幕以使其看起来不错

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:59:03.183

Timon，我相信，一般来说，没有快速简便的方法可以做到这一点，但这是可能的。您可以做的（我不确定您的演示是否值得所有这些努力）是对您的平板设备进行 root，然后查找并安装一个自定义 ROM，该 ROM 允许在每个应用程序的基础上设置自定义 DPI 值。

当然，以上假设这个应用程序是由其他人编写的，而您没有源代码。但是，如果它是您自己的应用程序，那么我会遵循 Dheeresh Singh 的建议。

希望这可以帮助。祝你好运！

# java - Java RMI 复制

> ID：11066932
> 
> 赞同：0
> 
> 时间：2012-06-16T20:49:45.917
> 
> 标签：java, replication, rmi

哪些是使用 Java RMI 在服务器上实现复制的最佳方法。我想实现一个容错系统，但要求是用户 Java RMI。我已经使用单个服务器开发了一个应用程序。现在我需要使用另一台接收复制数据的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:40:43.857

使用 RMI/IIOP 和支持您的要求的 Java ORB。

# ios - 音频框架混乱

> ID：11066935
> 
> 赞同：0
> 
> 时间：2012-06-16T20:50:17.290
> 
> 标签：ios, audio, avfoundation, core-audio

我在这里（[iPhone 中的音频框架](https://stackoverflow.com/questions/3067184/audio-framework-in-iphone)）和国外都读了很多，但仍然对使用哪个音频框架感到困惑。

我能够完成一些更简单的事情，比如录音和回放，但我期待应用程序的未来，我将做更复杂的事情，比如管理过去的录音（尽管这可能是一个`NSURL`书签的事情）和编辑音频。

现在我正在使用`AVFoundation`但已经开始阅读 Core Audio 的文档（还有 AudioToolbox）。我希望有一个名为“了解不同的音频框架以及如何以及何时使用它们”的开发人员文档，因为，文档很密集，我无法弄清楚该走哪条路。

好的文档的链接也将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:27:25.020

我建议你[看看](http://www.informit.com/store/product.aspx?isbn=0321636848)最近的*Learning Core Audio*书籍。其目的是消除 Mac OS 和 iOS 上音频框架的混淆。如果您想要“好的文档”，那么值得一试。

根据您的要求，您可能还需要考虑一些非 Apple 音频框架，特别是[STK 的 MoMu 版本](http://momu.stanford.edu/stk/)，它在某些方面比 Apple 的框架更简单易用。

# android - 在 Android 中更改标签颜色

> ID：11066937
> 
> 赞同：1
> 
> 时间：2012-06-16T20:50:33.123
> 
> 标签：android

我的两个标签都有这些代码。我想改变颜色，但我不知道怎么做。应该在我的 java 文件中还是在我的 xml 中完成？谢谢你

这是我的代码

```
import android.app.Activity;
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Window;
import android.widget.TabHost;

// This is now the first activity that you see when you enter the app, it derives from      TabActivity
public class TabsActivity extends TabActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);

    // The activity displays a TabHost layout with a TabWidget below the actual  tab contents
    setContentView(R.layout.tabs);

    // Two tabs are added one displays the main list activity, the other an     info activity
    addNewTab("Kalender", MainActivity.class);
    addNewTab("Info", InfoActivity.class);
}

// This function defines and adds a tab to the interface
private void addNewTab(String name, Class<? extends Activity> activityClass)
{
    TabHost tabHost = getTabHost();

    // The new tab will display a separate activity, so it needs an intent for it
    Intent activityIntent = new Intent().setClass(this, activityClass);

    // The TabSpec sets the internal name and the visible name of the newly created    tab
    TabHost.TabSpec spec =     tabHost.newTabSpec(name).setIndicator(name).setContent(activityIntent);

    // Finally, the new tab is added to the TabHost
    tabHost.addTab(spec);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:00:48.507

更改 TAB 的文本颜色和背景颜色

```
 for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
    {

        tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.WHITE); //Changing background color of tab

        TextView tv = (TextView) tabHost.getTabWidget().getChildAt(i).findViewById(android.R.id.title); /*for Selected Tab changing text color*/
        tv.setTextColor(Color.BLACK);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:00:16.880

如果您想自定义标签的外观，您应该使用自己的标签小部件。问题是大多数 android 小部件都是使用位图主题的，所以你不能简单地改变渐变颜色。

有些人建议简单地更改标准小部件的背景颜色，但它看起来会相当平坦。

使用您自己的小部件是[这样](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)的：

```
// Initialize a TabSpec for each tab and add it to the TabHost
spec = tabHost.newTabSpec("artists").setIndicator("Artists",
                  res.getDrawable(R.drawable.ic_tab_artists))
              .setContent(intent);
tabHost.addTab(spec); 
```

还可以查看[Android 样式指南的选项卡部分](http://developer.android.com/design/building-blocks/tabs.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:04:06.777

这是使单个选项卡的背景*具有*颜色的一种方法，也可以设置一种颜色。

```
tabHost.getTabWidget().getChildAt(tabIndex).setBackgroundColor(color); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-27T07:50:27.830

嘿，如果您想像在 Google Playstore 中一样更改标签颜色，请尝试以下操作：

```
public class MainActivity extends AppCompatActivity implements TabLayout.BaseOnTabSelectedListener {

private AppBarLayout appBarLayout;
private Toolbar toolbar;
private TabLayout tabLayout;
private ViewPager viewPager;
private View mRevealView;
private View mRevealBackgroundView;

private int fromColor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    appBarLayout = findViewById(R.id.main_appbar);
    toolbar = findViewById(R.id.main_toolbar);
    tabLayout = findViewById(R.id.main_tablayout);
    viewPager = findViewById(R.id.main_viewPager);
    mRevealView = findViewById(R.id.reveal);
    mRevealBackgroundView = findViewById(R.id.revealBackground);

    setUpTabs();

    setSupportActionBar(toolbar);

    fromColor = R.color.colorTabOne;
}

private void setUpTabs() {
    viewPager.setAdapter(new ViewPagerAdapter());
    tabLayout.setupWithViewPager(viewPager);
    tabLayout.addOnTabSelectedListener(this);

    tabLayout.getTabAt(0).setText("TAB ONE");
    tabLayout.getTabAt(1).setText("TAB TWO");
    tabLayout.getTabAt(2).setText("TAB THREE");
}

@Override
public void onTabSelected(TabLayout.Tab tab) {
    switch (tab.getPosition()) {

        case 0:
            animateAppAndStatusBar(0, R.color.colorTabOne);
        break;

        case 1:
            animateAppAndStatusBar(appBarLayout.getWidth() / 2, R.color.colorTabTwo);
            break;

        case 2:
            animateAppAndStatusBar(appBarLayout.getWidth(), R.color.colorTabThree);
            break;

    }
}

@Override
public void onTabUnselected(TabLayout.Tab tab) {

}

@Override
public void onTabReselected(TabLayout.Tab tab) {

}

private void animateAppAndStatusBar(int cx, final int toColor) {
    Animator animator = ViewAnimationUtils.createCircularReveal(
            mRevealView,
            cx,
            appBarLayout.getBottom(), 0,
            appBarLayout.getWidth() / 2);

    animator.addListener(new AnimatorListenerAdapter() {
        @Override
        public void onAnimationStart(Animator animation) {
            mRevealView.setBackgroundColor(getResources().getColor(toColor));
        }
    });

    mRevealBackgroundView.setBackgroundColor(getResources().getColor(fromColor));
    animator.setStartDelay(200);
    animator.setDuration(125);
    animator.start();
    mRevealView.setVisibility(View.VISIBLE);
    fromColor = toColor;
}

class ViewPagerAdapter extends FragmentPagerAdapter {

    ViewPagerAdapter() {
        super(MainActivity.this.getSupportFragmentManager());
    }

    @Override
    public Fragment getItem(int i) {
        switch (i) {
            case 0:
                return new TabOneFragment();

            case 1:
                return new TabTwoFragment();

            case 2:
                return new TabThreeFragment();

            default:
                throw new IllegalArgumentException("Invalid position " + i);
        }
    }

    @Override
    public int getCount() {
        return 3;
    }
}
} 
```

你可以查看我的[Github](https://github.com/adrianseraspi12/Android-Tutorials/tree/master/Change%20Tab%20Color%20with%20Animation)或[Youtube](https://www.youtube.com/watch?v=rP94bE6MTvI&list=PLCRF4ppnFvasJviT1CXAJyOFxKB90WZU_&index=2)教程

# ruby-on-rails - Omniauth / Rails 问题 - 无法启动服务器

> ID：11066938
> 
> 赞同：0
> 
> 时间：2012-06-16T20:50:55.837
> 
> 标签：ruby-on-rails, twitter, omniauth

我正在尝试跟随 Railscasts #235（rails 应用程序中的 Omniauth）。

Rails (v3.2) 中的 Omniauth gem 遇到一些问题。当我在我的 Gemfile 中安装 gem 时，并在 omniauth.rb 中指定以下内容（在 config/initializers/ 中）：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :twitter, '...', '...'
end 
```

我似乎无法启动我的服务器 - 我收到以下错误：

```
/Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/omniauth-1.1.0/lib/omniauth/builder.rb:38:in `rescue in provider': Could not find matching strategy for :twitter. You may need to install an additional gem (such as omniauth-twitter). (LoadError) 
```

我可以包含omniauth-twitter gem（服务器以它开头），但我不知道为什么没有它就行不通。**当我为 railscast 分叉存储库时，一切正常**，所以不知道为什么会这样。我认为这是因为我安装了omniauth-twitter gem（虽然没有在捆绑包中使用），但我卸载了它，但没有奏效。

完整的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.2'
gem 'omniauth'
gem 'jquery-rails'
gem 'bootstrap-sass'
gem 'bcrypt-ruby'
gem 'redcarpet'

group :development, :test do
  gem 'pg', '0.12.2'
  gem 'rspec-rails', '2.9.0'
  gem 'annotate'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

下面的完整堆栈跟踪：

```
/Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/omniauth-1.1.0/lib/omniauth/builder.rb:38:in `rescue in provider': Could not find matching strategy for :twitter. You may need to install an additional gem (such as omniauth-twitter). (LoadError)
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/omniauth-1.1.0/lib/omniauth/builder.rb:35:in `provider'
    from /Users/tarunsachdeva/Development/rails/workbench/config/initializers/omniauth.rb:2:in `block in <top (required)>'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/omniauth-1.1.0/lib/omniauth/builder.rb:7:in `initialize'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/stack.rb:43:in `new'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/stack.rb:43:in `build'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/stack.rb:113:in `block in build'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/stack.rb:113:in `each'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/stack.rb:113:in `inject'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/stack.rb:113:in `build'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/engine.rb:470:in `app'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application/finisher.rb:31:in `block in <module:Finisher>'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/tarunsachdeva/Development/rails/workbench/config/environment.rb:5:in `<top (required)>'
    from /Users/tarunsachdeva/Development/rails/workbench/config.ru:4:in `require'
    from /Users/tarunsachdeva/Development/rails/workbench/config.ru:4:in `block in <main>'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/tarunsachdeva/Development/rails/workbench/config.ru:1:in `new'
    from /Users/tarunsachdeva/Development/rails/workbench/config.ru:1:in `<main>'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands/server.rb:46:in `app'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands/server.rb:70:in `start'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands.rb:50:in `tap'
    from /Users/tarunsachdeva/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T21:00:52.320

阅读错误信息。您需要将`omniauth-twitter`gem 添加到`Gemfile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:52:34.403

我在这里参加聚会很时髦，但我认为您被要求使用omniauth-twitter，因为您使用的是最新版本的Omniauth > 1，而不是Railscasts 中的〜> 0.3.0 版本。

但你可能已经想通了；）

# javascript - 如何在js中进行同步力？

> ID：11066939
> 
> 赞同：0
> 
> 时间：2012-06-16T20:50:56.883
> 
> 标签：javascript, jquery, sync

我正在编写一个 js lib，它使用来自服务器（BE）的服务。我正在使用 Jquery - AJAX 来使用这些服务。但是，要使用此服务器，我需要为成功/错误设置回调

```
function CallAjax(callback){

$.ajax({
  url: 'http://server.com/service1.svc',
  success: function(data) {
        callback(data);
      }
});

} 
```

所以我需要等待回调返回正确的值，但是**do**函数已经返回到主页面。

```
myLib = (function () {

   do = function ()
   {
       var callback = function() { return true };

          CallAjax(callback);
   }

 }()) 
```

主页：但我想使用我的 lib 同步，但从调用的性质来看，我没有找到实现它的方法。

```
 I would like something like 
   if ( mylib.do() == true)
     { } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:52:22.103

您可以将`async`开关设置为 false。这将导致对服务器的同步调用。请注意这样做的后果：客户端浏览器将在请求执行期间冻结。如果您不希望这种情况发生，您将不得不重新设计您的库，以便它与回调一起使用，恕我直言，这是使用 AJAX 的正确方法。因此，为您的库的使用者提供回调。

# java - Java 找不到主类 HelloWorld - ColdFusion 干扰？

> ID：11066940
> 
> 赞同：0
> 
> 时间：2012-06-16T20:51:07.097
> 
> 标签：java

我是java新手（一个真正的新手）。

我在以下文件夹中安装了 Java 1.7.0

```
 C:\Program Files\Java 
```

我设置的环境变量是

```
 PATH      : C:\Program Files\Java\jdk1.7.0\bin;
    JAVA_HOME : C:\Program Files\Java; 
```

我在这里展示了我系统中的类名。接下来我写了一个简单的HelloWorld程序

```
 /*  HelloWorld.java */
    public class HelloWorld {
        public static void main(String args[]) {
           System.out.println("Hello, world carajo!");
        }
    } 
```

我能够使用`javac HelloWorld.java`. 但是当我尝试运行它时，`java HelloWorld`我遇到了以下错误：

> ```
>  Error: Could not find main class HelloWorld 
> ```

我可以让它工作的唯一方法是使用`java –cp . HelloWorld`. 我做错了什么？

另外，我安装了 ColdFusion，并且有一个系统变量 PATH 设置为以下值。这和它有什么关系吗？

```
C:\ColdFusion9\verity\k2\_nti40\bin;%CommonProgramFiles%\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;c:\Program Files\Common Files\Roxio Shared\DLLShared\;c:\Program Files\Common Files\Roxio Shared\10.0\DLLShared\;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Broadcom\Broadcom 802.11\Driver;C:\Program Files\QuickTime\QTSystem\;c:\Program Files\Microsoft SQL Server\90\Tools\binn\;C:\Program Files\MATLAB\R2012a Student\bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:58:21.370

放

`JAVA_HOME=C:\Program Files\Java\jdk1.7.0`

使用以下命令。

`java -cp . (Your package.)HelloWorld`

# c++ - 原始输入鼠标 - 未收到数据

> ID：11066943
> 
> 赞同：4
> 
> 时间：2012-06-16T20:51:35.173
> 
> 标签：c++, winapi, mouse, raw-input

我正在从键盘和鼠标中获取原始数据——键盘数据正在完美地接收到我的应用程序中，我完全没有遇到任何问题。不知何故，我的应用程序没有收到任何鼠标数据。事实上，它甚至没有通过该`if (raw->header.dwType == RIM_TYPEMOUSE)`子句。

```
case WM_CREATE:{

    /*  ...
        other initialisations 
        ... */

    // register for raw data
    rid[0].dwFlags=RIDEV_NOLEGACY|RIDEV_INPUTSINK;  // ignore legacy messages
    rid[0].usUsagePage=1;                           
    rid[0].usUsage=6;                               // keyboard
    rid[0].hwndTarget=hWnd;

    rid[1].dwFlags=RIDEV_NOLEGACY;                  // ignore legacy messages   
    rid[1].usUsagePage=1;                           
    rid[1].usUsage=2;                               // mouse
    rid[1].hwndTarget=hWnd;

    RegisterRawInputDevices(rid,2,sizeof(RAWINPUTDEVICE));

    break;
}

case WM_INPUT:{         
    if(GetRawInputData((HRAWINPUT)lParam,RID_INPUT,NULL,&dwSize,sizeof(RAWINPUTHEADER))==-1){
        break;
    }
    LPBYTE lpb=new BYTE[dwSize];
    if(lpb==NULL){
        break;
    } 
    if(GetRawInputData((HRAWINPUT)lParam,RID_INPUT,lpb,&dwSize,sizeof(RAWINPUTHEADER))!=dwSize){
        delete[] lpb;
        break;
    }

    PRAWINPUT raw=(PRAWINPUT)lpb;
    UINT KeyEvent;

    if (raw->header.dwType == RIM_TYPEKEYBOARD)
    {
        KeyEvent=raw->data.keyboard.Message;
        keyChar=MapVirtualKey(raw->data.keyboard.VKey,MAPVK_VK_TO_CHAR);

        if(KeyEvent==WM_KEYDOWN){

            /* Works great */

        }

    }

    else if (raw->header.dwType == RIM_TYPEMOUSE)
    {

        WriteFile(hFile, TEXT_ENTER, strlen(TEXT_ENTER), &fWritten, 0);                 // TEXT_ENTER contains "Mouse event occured"
            // Even this never gets executed. My file never gets logged with this message

        LMButtonDown = raw->data.mouse.ulButtons & RI_MOUSE_LEFT_BUTTON_DOWN;
        MMButtonDown = raw->data.mouse.ulButtons & RI_MOUSE_MIDDLE_BUTTON_DOWN;
        RMButtonDown = raw->data.mouse.ulButtons & RI_MOUSE_RIGHT_BUTTON_DOWN;

        if (LMButtonDown)
            WriteFile(hFile, LCLICK, strlen(LCLICK), &fWritten, 0);                 // LCLICK contains "Left mouse button clicked"
        if (MMButtonDown)
            WriteFile(hFile, MCLICK, strlen(MCLICK), &fWritten, 0);                 // MCLICK contains "Middle mouse button clicked"
        if (RMButtonDown)
            WriteFile(hFile, RCLICK, strlen(RCLICK), &fWritten, 0);                 // RCLICK contains "Right mouse button clicked" */
    }
    delete[] lpb;       
    CloseHandle(hFile);
    break;
              } 
```

任何人都可以发现任何错误，并告诉我它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:30:18.047

这是将标志添加`RIDEV_INPUTSINK`到`dwFlags`. 我的应用程序不在前台 - 并且此标志使您能够接收系统范围的输入（您的应用程序无需处于焦点即可接收输入）。

# c++ - ShowWindow 在 64 位操作系统上不能从 DLL 工作？

> ID：11066944
> 
> 赞同：1
> 
> 时间：2012-06-16T20:51:38.730
> 
> 标签：c++, dll, mfc, setwindowshookex, showwindow

我有一个调用`SetWindowsHook`来捕获键盘事件的进程。在处理事件的 DLL 中，我有条件地调用`ShowWindow`设置挂钩的进程的窗口句柄。

该代码在 32 位操作系统 (XP) 上完美运行，并且在 64 位操作系统上作为 32 位应用程序运行，但是当编译为 64 位时，窗口不显示。

使窗口可见的代码是：

```
if (idx == passlen) {
    HWND h = FindWindow(NULL,windowNameToShow);
    ShowWindow(h,SW_SHOW);
    idx = 0;
    logger->backerase(passlen - 1);
    nextCharToMatch = passPointer;
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-17T07:35:39.677

看看下面的文章：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384203(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384203(v=vs.85).aspx)

# json - 部分 JSON 在 Go 中解组为地图

> ID：11066946
> 
> 赞同：137
> 
> 时间：2012-06-16T20:51:50.163
> 
> 标签：json, map, go

我的 websocket 服务器将接收和解组 JSON 数据。此数据将始终包含在具有键/值对的对象中。键字符串将充当值标识符，告诉 Go 服务器它是什么类型的值。通过知道什么类型的值，我可以继续使用 JSON 将值解组为正确的结构类型。

每个 json 对象可能包含多个键/值对。

示例 JSON：

```
{
    "sendMsg":{"user":"ANisus","msg":"Trying to send a message"},
    "say":"Hello"
} 
```

有没有简单的方法使用这个`"encoding/json"`包来做到这一点？

```
package main

import (
    "encoding/json"
    "fmt"
)

// the struct for the value of a "sendMsg"-command
type sendMsg struct {
    user string
    msg  string
}
// The type for the value of a "say"-command
type say string

func main(){
    data := []byte(`{"sendMsg":{"user":"ANisus","msg":"Trying to send a message"},"say":"Hello"}`)

    // This won't work because json.MapObject([]byte) doesn't exist
    objmap, err := json.MapObject(data)

    // This is what I wish the objmap to contain
    //var objmap = map[string][]byte {
    //  "sendMsg": []byte(`{"user":"ANisus","msg":"Trying to send a message"}`),
    //  "say": []byte(`"hello"`),
    //}
    fmt.Printf("%v", objmap)
} 
```

感谢您的任何建议/帮助！

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-06-16T21:15:18.920

这可以通过解组到`map[string]json.RawMessage`.

```
var objmap map[string]json.RawMessage
err := json.Unmarshal(data, &objmap) 
```

要进一步解析`sendMsg`，您可以执行以下操作：

```
var s sendMsg
err = json.Unmarshal(objmap["sendMsg"], &s) 
```

对于`say`，您可以做同样的事情并解组为一个字符串：

```
var str string
err = json.Unmarshal(objmap["say"], &str) 
```

* * *

**编辑：**请记住，您还需要导出 sendMsg 结构中的变量以正确解组。所以你的结构定义是：

```
type sendMsg struct {
    User string
    Msg  string
} 
```

示例： https: [//play.golang.org/p/OrIjvqIsi4-](https://play.golang.org/p/OrIjvqIsi4-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-13T09:21:34.783

这是做类似事情的一种优雅方式。但为什么部分 JSON 解组？那没有意义。

1.  为聊天创建结构。
2.  将 json 解码为 Struct。
3.  现在您可以轻松访问 Struct/Object 中的所有内容。

看看下面的工作代码。复制并粘贴它。

```
import (
   "bytes"
   "encoding/json" // Encoding and Decoding Package
   "fmt"
 )

var messeging = `{
"say":"Hello",
"sendMsg":{
    "user":"ANisus",
    "msg":"Trying to send a message"
   }
}`

type SendMsg struct {
   User string `json:"user"`
   Msg  string `json:"msg"`
}

 type Chat struct {
   Say     string   `json:"say"`
   SendMsg *SendMsg `json:"sendMsg"`
}

func main() {
  /** Clean way to solve Json Decoding in Go */
  /** Excellent solution */

   var chat Chat
   r := bytes.NewReader([]byte(messeging))
   chatErr := json.NewDecoder(r).Decode(&chat)
   errHandler(chatErr)
   fmt.Println(chat.Say)
   fmt.Println(chat.SendMsg.User)
   fmt.Println(chat.SendMsg.Msg)

}

 func errHandler(err error) {
   if err != nil {
     fmt.Println(err)
     return
   }
 } 
```

[去游乐场](https://play.golang.org/p/zWU3cuESqJn)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-03T18:36:09.460

继斯蒂芬温伯格的回答之后，我已经实现了一个名为[iojson](https://github.com/junhsieh/iojson)的便捷工具，它有助于轻松地将数据填充到现有对象中，并将现有对象编码为 JSON 字符串。还提供了一个 iojson 中间件来与其他中间件一起工作。更多示例可以在[https://github.com/junhsieh/iojson找到](https://github.com/junhsieh/iojson "在 golang 中编写 RESTful API 的便捷工具。 它使您能够通过统一的 JSON 格式在客户端和服务器之间交换数据。")

**例子：**

```
func main() {
    jsonStr := `{"Status":true,"ErrArr":[],"ObjArr":[{"Name":"My luxury car","ItemArr":[{"Name":"Bag"},{"Name":"Pen"}]}],"ObjMap":{}}`

    car := NewCar()

    i := iojson.NewIOJSON()

    if err := i.Decode(strings.NewReader(jsonStr)); err != nil {
        fmt.Printf("err: %s\n", err.Error())
    }

    // populating data to a live car object.
    if v, err := i.GetObjFromArr(0, car); err != nil {
        fmt.Printf("err: %s\n", err.Error())
    } else {
        fmt.Printf("car (original): %s\n", car.GetName())
        fmt.Printf("car (returned): %s\n", v.(*Car).GetName())

        for k, item := range car.ItemArr {
            fmt.Printf("ItemArr[%d] of car (original): %s\n", k, item.GetName())
        }

        for k, item := range v.(*Car).ItemArr {
            fmt.Printf("ItemArr[%d] of car (returned): %s\n", k, item.GetName())
        }
    }
} 
```

**样本输出：**

```
car (original): My luxury car
car (returned): My luxury car
ItemArr[0] of car (original): Bag
ItemArr[1] of car (original): Pen
ItemArr[0] of car (returned): Bag
ItemArr[1] of car (returned): Pen 
```

# css - 垂直对齐 img

> ID：11066952
> 
> 赞同：1
> 
> 时间：2012-06-16T20:52:40.943
> 
> 标签：css, image, alignment, vertical-alignment

我有一个名为的 div `images_box`，其宽度为`277px`. 在那个 div 中，我有 9 个图像，只是存储为`<a>`标签。我让图像向左浮动并在我的 div 中很好地排列，但我希望图像垂直对齐，因为有些是纵向的，有些是横向的。我知道如果我将每个图像都包含在一个 div 中，我可以做到这一点，但是我用来启动画廊的插件将无法识别正在触发的图像，所以我需要将它们包含在`<a>`标签中。

这是我的代码，如果有人可以帮助我将图像水平和垂直对齐。我不希望图像歪斜。

```
#images_box a {
    float: left;
    padding: 9px;
    width: 70px;
    height: 70px;
    text-align: center;
    vertical-align: middle;
    display: table-cell;
} 
```

我的数据

```
<div id="images_box">
    <a class="fancybox" rel="gallery1" href="http://farm8.staticflickr.com/7069/7060779347_fbee5aae15_b.jpg" title="morning after[explored] (mariosworld343)">
        <img src="http://farm8.staticflickr.com/7069/7060779347_fbee5aae15_m.jpg" alt="" />
    </a>
    <a class="fancybox" rel="gallery1" href="http://farm8.staticflickr.com/7234/7047458501_46a2203733_b.jpg" title="Self confined... (TVidhya)">
        <img src="http://farm8.staticflickr.com/7234/7047458501_46a2203733_m.jpg" alt="" />
    </a>
    <a class="fancybox" rel="gallery1" href="http://farm8.staticflickr.com/7053/6918451990_20fa76f338_b.jpg" title="kleiner schrittmacher (KatjaGiersig)">
        <img src="http://farm8.staticflickr.com/7053/6918451990_20fa76f338_m.jpg" alt="" />
    </a>
    <a class="fancybox" rel="gallery1" href="http://farm8.staticflickr.com/7121/7059981833_abe404f4a0_b.jpg" title="(caro diario.)">
        <img src="http://farm8.staticflickr.com/7121/7059981833_abe404f4a0_m.jpg" alt="" />
    </a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:56:17.570

我想我知道你想要什么。`float: left`没有必要并排获取图像。

```
#images_box {
    background: #eee;
    overflow: hidden; /* this div will get the height of the tallest element inside it */
    white-space: nowrap; /* prevent line-breaks */
}

#images_box a {
    padding:9px;
    display: inline-block; /* required to apply vertical-align as expected */
    vertical-align: middle;
}​ 
```

**工作于**：

*   互联网浏览器 6+
*   和现代浏览器

**现场演示**：http: [//jsfiddle.net/vjDVp/1/](http://jsfiddle.net/vjDVp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:12:48.453

基本上，您似乎正在寻找：

```
#images a {
    padding: 9px;
    width: 70px;
    height: 70px;
    text-align: center;
    vertical-align: middle;
    display: table-cell;
} 
```

您可以根据需要在哪里调整`vertical-align`to`top`或`middle`。不需要花车。您在原始问题中描述的尺寸已关闭，如果我误解了，请道歉。

另请注意，这`display: table-cell`不是 IE6/7 友好的，如果这很重要的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:34:05.697

将 css 设置为图像，而不是`a`标签。给他们一个类名（以确保您的其他图像不受影响）并将您在问题中提供的代码应用于该（`img.myclass`）。或者，至少`vertical-align`.

另外，图片的尺寸是多少？根据是横向图像还是纵向图像，它们是否都具有相同的宽度、相同的高度或特定的大小？

哦，我不知道为什么，但`text-align`有时似乎也可以处理 img 标签。

# jsf-2 - JSF 设置欢迎页面

> ID：11066955
> 
> 赞同：1
> 
> 时间：2012-06-16T20:52:56.013
> 
> 标签：jsf-2, spring-security

我使用 Spring Security 3 和 JSF2 Primefaces。然后，我为欢迎页面创建 index.xhtml，为登录页面创建 login.xhtml

当我访问根网站时，它会将我重定向到 login.xhtml 页面。为什么不？

如何将欢迎页面设置为 index.xhtml

这是 web.xml

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping>
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list> 
```

这是 spring-security.xml

```
<global-method-security secured-annotations="enabled"
    jsr250-annotations="enabled" />

<!-- Resource Security -->
<http access-denied-page="/accessDenied.jsp">
    <intercept-url pattern="/pages/**" access="ROLE_ADMIN" />

    <form-login login-page="/login.jsf" default-target-url="/pages/index.jsf" />

    <logout logout-success-url="/login.jsf" invalidate-session="true" />
    <session-management invalid-session-url="/login.jsf">
        <concurrency-control max-sessions="10"
            error-if-maximum-exceeded="true" />
    </session-management>
</http> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:47:54.210

对于具有 JSF、Spring 和 Spring-Security 的基本应用程序，您需要配置 web.xml，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID"  
         version="3.0">

<welcome-file-list>
  <welcome-file>pages/index.jsf</welcome-file>
</welcome-file-list>
<servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param>
<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
  <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

并且还配置 faces-config.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

     <application>
       <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
     </application>

 </faces-config> 
```

和您的 applicationContext-security.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
      xmlns:beans="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security.xsd">

  <global-method-security secured-annotations="enabled"
jsr250-annotations="enabled" />     
  <http auto-config="true" >
     <intercept-url pattern="/login.jsf*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
     <intercept-url pattern="/pages/*" access="ROLE_USER,ROLE_ADMIN" />
     <intercept-url pattern="/pages/super/**" access="ROLE_ADMIN" />
     <access-denied-handler error-page="/accessDenied.jsf" />
     <form-login login-page='/login.jsf' default-target-url='/pages/index.jsf'
    always-use-default-target='true'/>
     <logout logout-success-url="/" logout-url="/j_spring_security_logout" invalidate-session="true" />
     <session-management invalid-session-url="/login.jsf">
        <concurrency-control max-sessions="10"
        error-if-maximum-exceeded="true" />
     </session-management>
 </http>
  <authentication-manager>
    <authentication-provider>
      <user-service>
        <user name="ravi" password="password" authorities="ROLE_USER, ROLE_ADMIN" />
      </user-service>
    </authentication-provider>
  </authentication-manager>
</beans:beans> 
```

最后，如果您有任何 spring bean，则基于注释的配置的 applicationContext.xml 将是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context.xsd">

   <context:annotation-config/>
   <context:component-scan base-package="com.examples" />

 </beans> 
```

并像这样注释你的豆子：

```
@Component 
@Scope("request") 
```

因此，所有这些与您的页面一起到位应该没有问题。

# model-view-controller - 在 Model-View-Controller 原则中，什么是 Frontend，什么是 Backend？

> ID：11066958
> 
> 赞同：27
> 
> 时间：2012-06-16T20:53:34.257
> 
> 标签：model-view-controller

维基百科说：

> MVC 为数据库、用户和数据处理组件提供前端和后端。将软件系统分离为前端和后端简化了开发并分离了维护。

我仍然看不到模型-视图-控制器原理与前端和后端概念之间的联系。可以将访问数据库的模型视为后端，将视图视为前端吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-17T00:01:35.000

好的..首先是条款：

*   **前端**- 是用户*可见*的部分：HTML、CSS、客户端 Javascript。这一切基本上都是“前端”。在桌面应用程序前端将是 GUI。
*   **后端**- 是*不可见*的部分。在您的 java、ruby、php 或任何其他服务器端代码的 Web 应用程序中。它可以被解释或编译，因为它的“如何”工作对它的“什么”没有影响。

如果您阅读[**GUI Architectures**](http://martinfowler.com/eaaDev/uiArchs.html)并总体上研究 MVC 模式，您就会明白**MVC 不是后端和前端的分离**。特别是当涉及到[受 MVC 启发的模式](https://stackoverflow.com/a/7622038/727208)时，我们将其用于 Web 应用程序。

MVC 和相关模式的目标是将表示与领域业务逻辑分开。

以下是 MVC 部分的基本职责：

*   **模型**- 业务逻辑
*   **视图**- 表示逻辑
*   **控制器**- 改变模型和视图的状态（基于用户输入）

举个例子：

*   twitter 的替代客户端应用程序
*   使用 OAuth 进行身份验证
*   用户可以输入不同的搜索词组
*   通过 Twitter 的 REST API 获取信息
*   验证数据
*   解析 JSON 响应
*   操纵 DOM 来呈现信息

这一切都可以通过客户端 JavaScript 完成。**你可以让 MVC 三元组运行*“前端”*！**同时，提供 REST API 的“后端”是一个类似 MVC 的结构。只有这一次*视图*生成 JSON 响应，而不是 HTML。

> ***结论：**您可以在后端和前端使用 MVC 模式。**

## 后经

由于您一直在使用 Rails 构建一些应用程序，因此您对 MVC 的理解可能有些曲解。我之所以这么说是因为，由于 RoR 最初是作为原型框架制作的*（注意所有用于生成一次性代码的脚手架和其他功能）*，并且由于它的起源，Rails 实际上是在实现一个非常贫乏的 MVP 版本。

我称之为“贫血”，因为他们*削弱*了 View *（它应该是 MVP 中的被动对象，而不是简单的模板）*和模型层*（是的，它应该是一个复杂的层，而不是 ORM 实例的集合）*。

我建议您阅读两篇出版物以更好地掌握该主题：

*   [企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420).. 认真的开发人员必读
*   [Smalltalk-80系统中模型-视图-控制器用户界面范式的描述](http://www.itu.dk/courses/VOP/E2005/VOP2005E/8_mvc_krasner_and_pope.pdf)

第二个是尽可能接近模式的初始定义。这与“GUI 架构”文章一起，应该为您在该主题上打下坚实的基础。PoEAA 书（硬读，顺便说一句）会给你扩展它的上下文。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-02T11:02:00.493

也许下图可以帮助..

```
MVC               Human language    backend/frontend
---------------   ---------------   ---------------
model          -> data           -> backend
controllers    -> actions        -> backend/frontend (depends on implementation)
views          -> GUI            -> frontend 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T20:58:01.750

*   视图 = 前端
*   模型 = 后端
*   控制器 = 前端和后端之间的粘合

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T20:56:52.667

前端是用户看到哪些是视图。后端是控制器和模型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T20:59:00.937

在这种情况下，后端传统上意味着更深层次的操作系统代码，甚至是用户无法看到/控制的代码。

前端是用户看到的实际视图。

# xna - 字段的 ExpandableObjectConverter

> ID：11066959
> 
> 赞同：3
> 
> 时间：2012-06-16T20:54:16.787
> 
> 标签：xna, field, propertygrid, typeconverter

我知道 expandableobjectconverter 与属性一起使用，但我正在编写一个与 XNA Vector2 结构一起使用的 2D 关卡设计器

这个结构有X，Y“字段”，而不是属性，有一种方法可以像属性一样扩展它？？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-29T10:19:43.690

您可以创建一个包含 Vector2 并具有 X 和 Y 属性以及 Vector2 元素本身的类。

您还可以编写自己的 Vector2，它可以生成用于绘图的 XNA-Vector2。这将是我的第一次尝试。

类似于以下内容，但使用重载运算符使其更易于使用：

```
public class SerializableVector2 
{
    Vector2 internal;

    public Vector2 Internal {
        get { return internal; }
        set { internal = value; }
    }

    public float X {
        get { return internal.X; }
        set { internal.Y = value; }
    }

    public float Y {
        get { return internal.Y; }
        set { internal.Y = value; }
    }
} 
```

# jquery - IE9下拉列表问题

> ID：11066964
> 
> 赞同：0
> 
> 时间：2012-06-16T20:55:13.947
> 
> 标签：jquery, html

我对 IE9 中的动态下拉列表有疑问。

我有一个表格，其中一列用组合填充，每行一个组合，每个组合都是用 HTML 5.0 代码创建的，如下所示：

```
<select id="cboABC0" class="RetrieveList cboABC" data-index="0" data-info="3" name="cboABC">
<option selected="selected" value="N">Select</option>
<option value="P">Partial</option>
<option value="C">Complete</option>
<option value="CA">Cancelled</option>
</select>
</td> 
```

我希望在下拉列表中选择一个选项时发生一些事情，具体取决于所选选项，为此，我尝试了使用 JQuery 使用 RetrieveList 类的事件的不同方法：

```
$(".RetrieveList").live(''click'',function(event){      

var val_info = $(this).attr("data-info"); 
var val_index = $(this).attr("data-index");

var sOptionSelected = $(this).val();

alert(sOptionSelected);

// Here is where I want to do something , depending on the selected option.

}); 
```

使用“实时点击”，至少点击事件会被“触发”，但它无法识别我选择的内容，它会保留我选择的最后一个选项，例如，如果没有选择任何内容并且我打开组合，移动到另一个选项并单击该选项，它会转到单击事件，但 $(this).val() 返回的值是前一个而不是刚刚选择的那个。另一方面，如果我使用箭头键选择选项然后单击，id 确实会识别新值。就像它只识别“点击”的变化而不识别价值。

我尝试过使用“绑定点击”、“实时更改”和“绑定更改”，并且使用这些选项，点击甚至不会被“触发”。

同样，这一切都发生在 IE9 和 Mozilla 上，我没有遇到任何重大问题。

如果有人可以帮助我解决这个问题，我将不胜感激。

提前致谢，

问候！

布伦达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:58:36.757

首先，你有`''click''`什么时候应该是公正`'click'`的。无论如何我都不会使用`click`，而是使用`change`所以它会在列表更改时触发，而不仅仅是在用户单击它时触发。`click`即使您只是单击它而不进行其他选择也会触发（单击以查看所有下拉项）

解决这个问题，它适用于我的所有浏览器。

[演示](http://jsfiddle.net/UDZX5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:00:57.640

尝试：

```
 $(".RetrieveList").live('change',function(event){      

var val_info = $(this).attr("data-info"); 
var val_index = $(this).attr("data-index");

var sOptionSelected = $(this).val();

alert(sOptionSelected);

// Here is where I want to do something , depending on the selected option.

}); 
```

# solr - solr 架构设计，多个键/值

> ID：11066966
> 
> 赞同：-1
> 
> 时间：2012-06-16T20:55:33.200
> 
> 标签：solr

我有一个我正在尝试在 solr 中设计的模式，数据很简单，只需一个 productKey，然后我获取该产品密钥，访问几个不同的网站并存储他们对该产品的产品描述以进行搜索。

例如：productKey: 1234，我点击siteA 并返回“cool razor”，siteB 我返回“neat razor”

所以理想情况下，我想在一个文档中存储一些在概念上类似于：

（伪代码）

```
<doc>
<productKey>1234</productKey>
<site>siteA</site>
<desc>coolrazor</desc>
<site>siteB</site>
<desc>near razor</desc>
</doc> 
```

但我希望能够进行搜索，例如，向我展示所有 siteA 认为其中只有“酷剃刀”的文档。现在它会拉出任何在 desc 中有剃刀的网站。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:06:21.060

我会为每个站点创建一个文档，将 productKey 以外的内容作为唯一 id 字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:06:27.673

您对 desc 字段使用什么类型的分析器？我认为，您将需要在描述字段上使用 solr.KeywordTokenizerFactory。

参考[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)

# r - 使用 XML 包在 R 中使用 XPath 检索图像源

> ID：11066967
> 
> 赞同：3
> 
> 时间：2012-06-16T20:55:36.053
> 
> 标签：r, xpath

我想在下面的 HTML 代码块中检索图像源，但找不到正确的语法。

```
library(XML)
library(RCurl)
script <- getURL("http://www.floraweb.de/pflanzenarten/druck.xsql?suchnr=4346")
(doc <- htmlParse(script))

<div class="divider"><hr></div>
<div id="contentblock"><div id="content">
<h1>Alle Angaben</h1>
<p>Zu der von Ihnen gewÃ¤hlten Pflanzenart liegen folgende Informationen vor:</p>
<p><a href="../glossar.html#bname">Wissenschaftlicher Name</a>:Â Poa badensis agg. </p>
<p><a href="../glossar.html#bdeu">Deutscher Name</a>:Â Artengruppe Badener Rispengras</p>
<p><a href="../glossar.html#bfam">FamilienzugehÃ¶rigkeit</a>: Poaceae, SÃ¼ÃŸgrÃ¤ser</p>
<p><a href="../glossar.html#bsta">Status</a>:Â keine AngabenÂ </p>
<p class="centeredcontent"><img border="0" src="../bilder/Arten/dummy.tmb.jpg"></p> 
```

期望的结果：“../bilder/Arten/dummy.tmb.jpg”

任何指针都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T21:16:51.570

尝试以下操作：

```
script <- getURL("http://www.floraweb.de/pflanzenarten/druck.xsql?suchnr=4346")
doc <- htmlTreeParse(script,useInternalNodes=T)
img<-xpathSApply(doc,'//*/p[@class="centeredcontent"]/img',xmlAttrs)
> img[2]
[1] "../bilder/Arten/dummy.tmb.jpg" 
```

可能需要使用内部表示

编辑：

我只是抬头看`htmlParse`它相当于`htmlTreeParse(useInternalNodes=T)`

@Martin Morgan 谢谢在下面添加

```
doc <- htmlParse("http://www.floraweb.de/pflanzenarten/druck.xsql?suchnr=4346")
xpathSApply(doc, '//*/p[@class="centeredcontent"]/img/@src') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:08:28.397

**使用**：

```
//div[@id='contentblock']
   /div/p[@class='centeredcontent']
         /img/@src 
```

这将选择其属性具有值`src`的任何`p`元素的属性，并且该（元素）是 a 的子级，该子级是其属性具有值“内容块”的 a 的子级。`class``"centeredcontent"``p``div``div``id`

**如果要直接获取此属性的值，请使用**：

```
string(//div[@id='contentblock']
         /div/p[@class='centeredcontent']
              /img/@src) 
```

# php - 管理对 PHP 脚本的多个 AJAX 调用

> ID：11066969
> 
> 赞同：1
> 
> 时间：2012-06-16T20:56:09.737
> 
> 标签：php, jquery, ajax

我有一组 5 个 HTML 下拉列表，它们充当过滤器，用于缩小从 mySQL 数据库返回的结果。三个相关的过滤器分别用于“Province”、“Region”和“City”的选择。

我有三个功能：

1.  `findSchools()`，它在任何过滤器（标记为 CSS 类`.filter`）发生更改时运行，并通过 AJAX 从 PHP 脚本中获取结果。完成后，将调用另外两个函数...

2.  `changeRegionOptions()`，在更改“省”过滤器时，并使用与第一个函数相同的方法更新可用选项，但发布到不同的脚本。

3.  `changeCityOptions()`，如果“区域”过滤器被更改，则运行，并更新选项，再次使用相同的方法。

问题是，由于我希望这些 AJAX 函数同时运行，并且它们本质上是异步运行的，所以我尝试使用`$.when`它来控制函数的执行，但这并不能解决问题。

函数运行，但 Region 和 City 过滤器返回空白（无选项）；FireBug 报告显示绝对没有输出，即使 POST 请求通过。filter_province 的已发布参数正常发送，但 region 的参数在最后被切断 - 它发送为`filter_region=`，没有传递任何值。所以我假设我的逻辑在某个地方是错误的。代码如下：

```
// When any of the filters are changed, let's query the database...
$("select.filter").change(function() {
    findSchools();
});

  // First, we see if there are any results...
      function findSchools() {

          var sch_province = document.filterform.filter_province.value;
          var sch_region = document.filterform.filter_region.value;
          var sch_city = document.filterform.filter_city.value;
          var sch_cat = document.filterform.filter_category.value;
          var sch_type = document.filterform.filter_type.value;

          $.post("fetch_results.php",
          { filter_province : sch_province,
            filter_region : sch_region,
            filter_city : sch_city,
            filter_category : sch_cat,
            filter_type : sch_type },

            function(data) {

              $("#results").html("");
              $("#results").hide();
              $("#results").html(data);
              $("#results").fadeIn(600);
            }
          );

    // Once the results are fetched, we want to see if the filter they changed
       was the one for Province, and if so, update the Region and City options
        to match that selection...

            $("#filter_province").change(function() {

                $.when(findSchools())
                .done(changeRegionOptions());

                $.when(changeRegionOptions())
                .done(changeCityOptions());
        });
  }; 
```

这只是我尝试解决的方法之一；我尝试使用 IF 语句，并尝试直接在通用`select.filter.change()`函数中调用函数（在 之后`findSchools();`），但它们都返回相同的结果。

对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:15:53.427

Try this .hope this is what you were expecting. [jsfiddle->sample code](http://jsfiddle.net/xNvVF/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:11:31.670

您需要将 async 设置为 false。之后，您的代码将逐行执行。

例如像这样，在调用 $.post 之前

```
$.ajaxSetup({async:false}); 
```

# ios4 - iPhone SDK：UIMenuController 在选定的 UITableCell 上方弹出

> ID：11066975
> 
> 赞同：0
> 
> 时间：2012-06-16T20:57:35.087
> 
> 标签：ios4, uitableview, ios5, uimenucontroller

我正在尝试在用户选择的任何单元格上方弹出 UIMenuControl ....

目前我在下面有这段代码，它总是将 UIMenuControl 放在 iPhone 屏幕的中间......

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

[tableView deselectRowAtIndexPath:indexPath animated:YES];

[self becomeFirstResponder];

UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"View" action:@selector(viewListing:)];
UIMenuItem *menuItem1 = [[UIMenuItem alloc] initWithTitle:@"Edit" action:@selector(editListing:)];
UIMenuItem *menuItem2 = [[UIMenuItem alloc] initWithTitle:@"Call" action:@selector(callListing:)];
UIMenuItem *menuItem3 = [[UIMenuItem alloc] initWithTitle:@"Open Houses" action:@selector(openHouses:)];

UIMenuController *menuController = [UIMenuController sharedMenuController];
[menuController setTargetRect:CGRectMake(0, 205, 320, 200) inView:self.view];
menuController.menuItems = [NSArray arrayWithObjects:menuItem, menuItem1, menuItem2, menuItem3, nil];
menuController.arrowDirection = UIMenuControllerArrowDown;
[menuController setMenuVisible:YES animated:YES];
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:45:20.750

很明显，您的菜单始终位于中心：您正在对坐标进行硬编码。

**解决方案**：
您首先必须计算单元格的位置。然后从中计算你的`targetRect`框架。

提示：您可以使用`rectForRowAtIndexPath:`.

# linux - Linux 上的 mlock() 与 shmctl(SHM_LOCK)？

> ID：11066976
> 
> 赞同：5
> 
> 时间：2012-06-16T20:57:45.810
> 
> 标签：linux, memory

`mlock()`调用某些内存和调用`shmctl(SHM_LOCK)`同一内存有什么区别？

这些是我能确定的唯一区别：

*   `mlock()`保证在返回时加载所有锁定的页面。 `shmctl(SHM_LOCK)`防止交换，但不会主动加载非常驻页面。
*   `shmctl(SHM_LOCK)`只能用于共享内存段。
*   `shmctl(SHM_LOCK)``SHM_LOCKED`在共享内存段的权限上设置一个额外的标志 ( )。

还有其他区别吗？特别是，有什么理由不在`mlock()`共享内存段上使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-05T13:31:32.970

首先，mlock() 是用于将进程内存锁定在 RAM 中的 syscall，而 shmctl(X,SHM_LOCK,Y) 用于做共享（IPC）内存，这需要所有生产者和消费者更多的控制，所以，这就是为什么 mlock() 系统调用更容易的原因：

```
 int mlock(const void *addr, size_t len); 
```

虽然 shmctl 操作起来要复杂得多，例如：

```
 int shmctl(int shmid, SHM_LOCK, struct shmid_ds *buf); 
```

其中： buf 参数是指向 shmid_ds 结构的指针，定义如下：

```
 struct shmid_ds {
           struct ipc_perm shm_perm;    /* Ownership and permissions */
           size_t          shm_segsz;   /* Size of segment (bytes) */
           time_t          shm_atime;   /* Last attach time */
           time_t          shm_dtime;   /* Last detach time */
           time_t          shm_ctime;   /* Last change time */
           pid_t           shm_cpid;    /* PID of creator */
           pid_t           shm_lpid;    /* PID of last shmat(2)/shmdt(2) */
           shmatt_t        shm_nattch;  /* No. of current attaches */
           ...
       }; 
```

# git - 谁获得了手工编辑补丁文件的功劳？

> ID：11066980
> 
> 赞同：4
> 
> 时间：2012-06-16T20:58:02.393
> 
> 标签：git, github, diff, patch, pull-request

[关于编辑 GitHub 拉取请求的回答](https://stackoverflow.com/a/11066487/1301972)的后续问题询问是否直接在应用补丁文件之前对其进行编辑会导致原作者的工作受到赞扬。由于它实际上并不是原始问题的一部分，因此我在这里将其作为一个新问题提出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T20:58:03.093

### TL;博士

Git 会将作者身份归属于补丁的创建者，而不是当前的提交者。但是，您可以覆盖此行为，

### Git 如何处理邮箱文件中的补丁

该`git am`命令处理存储在邮箱中的一系列补丁。在 GitHub 拉取请求的情况下，每个补丁文件只是以[mbox 格式](http://en.wikipedia.org/wiki/Mbox)存储的一系列差异。Git 解析邮箱中的*From 行*以确定每个提交的 GIT_AUTHOR_NAME 和 GIT_AUTHOR_EMAIL 的值。

### 这意味着什么

即使您手动编辑单个 diff hunks，Git 通常也会将 Bob 视为作者，而您则视为提交者。这通常是 The Right Thing™。

然而，虽然这肯定是坏业力，但从*技术*角度来看，您可以想象将 Bob 完全从提交中删除。毕竟，它只是一个文本文件，您可以根据自己的需要进行调整，如果您更改邮箱中的 From 行，那么 Git 在应用每个补丁时将使用新值来填充其作者字段。

这样做肯定有道德和法律上的影响，但问题是关于归属。默认情况下，Git 正确地赋予作者身份，但控制权最终归你所有。

# iphone - 如何在 ios 应用程序中删除某些 ViewControllers 上的状态栏？

> ID：11066983
> 
> 赞同：1
> 
> 时间：2012-06-16T20:58:31.903
> 
> 标签：iphone, objective-c, ios

我有一个在大多数屏幕上显示状态栏的应用程序。大多数应用程序都锁定为纵向模式，但有一部分在横向模式下是有意义的。我想通过一个可以正常工作的模态幻灯片过渡到风景。问题是我希望横向视图隐藏状态栏。目前看起来很难看，因为状态栏只是切换到横向视图的顶部，并在滑入时在纵向视图上显示一个小黑条。有没有办法优雅地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T21:01:03.277

你可以这样做：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade]; 
```

# javascript - 从具有事件侦听器的对象调用函数

> ID：11066987
> 
> 赞同：1
> 
> 时间：2012-06-16T20:58:53.527
> 
> 标签：javascript, dom-events

我有一个像这样的视图模型：

```
CANVAS = getElementById...

RemixView = function(attrs) {
     this.model = attrs.model;
     this.dragging = false;
     this.init();
};

RemixView.prototype = {
    init: function() {
        CANVAS.addEventListener("click", this.handleClick);
    },
    handleClick: function(ev) {
        var obj = this.getHoveredObject(ev);
    },
    getHoveredObject: function(ev) {}
    ...
    ...
}
rv = new RemixView() 
```

问题是我在触发 clickHandler 事件时，该对象等于**CANVAS**对象，**而不是 RemixView**。所以我收到一条错误消息：

> this.getHoveredObject 不是函数

在那种情况下正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T21:08:53.733

通常的方法是对回调使用简单的闭包，并`this`在闭包可以引用的局部变量中捕获适当的值：

```
RemixView.prototype = {
    init: function(this) {
        var _this = this;
        CANVAS.addEventListener("click", function(ev) {
            return _this.handleClick(ev);
        });
    },
    //...
}; 
```

您还可以[`Function.prototype.bind`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)用来制作绑定函数（如[user123444555621](https://stackoverflow.com/a/11067094/479863)所做的那样）：

```
RemixView.prototype = {
    init: function(this) {
        CANVAS.addEventListener("click", this.handleClick.bind(this));
    },
    //...
}; 
```

或者，如果你想使用 ES6，你可以使用[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)：

```
RemixView.prototype = {
    init: function(this) {
        CANVAS.addEventListener("click", ev => this.handleClick(ev));
    },
    //...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:18:16.440

你想[绑定](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)处理函数：

```
CANVAS.addEventListener("click", this.handleClick.bind(this)); 
```

请注意，这可能不适用于旧版浏览器，但有针对这些的[polyfills](https://github.com/kriskowal/es5-shim/blob/master/es5-shim.js)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:21:27.883

做`prototype`一个函数。

```
RemixView.prototype = function () {
    init: function() {
        CANVAS.addEventListener("click", this.handleClick);
    },
    handleClick: function(ev) {
        var obj = this.getHoveredObject(ev);
    } ///...
//...
} 
```

# java - 为 REST API 构建 Java SDK 的最佳实践

> ID：11066992
> 
> 赞同：4
> 
> 时间：2012-06-16T20:59:12.120
> 
> 标签：java, rest, sdk

我即将针对 REST API 开发 Java SDK，并且想知道构建它的最佳实践方法是什么。我查看了 Google，还使用了许多连接到 REST API 的 SDK，而且从来没有太多的一致性。我遇到了一些我觉得有趣的模式，并且想知道哪一个可以被认为是最佳实践，如果有的话，或者是否有替代方案？

我提供了示例/伪代码以方便。

1）模型/请求/客户端都是分开的。示例调用：

```
Client client = new Client( ... credentials ... );

try {
    Something obj = client.post( new PostSomethingRequest( ..params... ) );
} catch( Exception oops ) { ...handle... }

try {
    Something obj2 = client.get( new GetSomethingRequest( id ) );
} catch( Exception oops ) { ...handle... } 
```

2）模型和请求绑定在一起，客户端是分开的。示例调用：

```
Client client = new Client( ... credentials ... );

try {
    Something obj = client.post( new Something( ..params... ) );
} catch( Exception oops ) { ...handle... }

try {
    Something obj2 = client.get( new Something( id ) );
} catch( Exception oops ) { ...handle... } 
```

3）模型包含一切。示例调用：

```
Client.setCredentials( ... credentials ... );

Something obj = new Something( ..params... );
try {
    obj.post();
} catch( Exception oops ) { ...handle... }

try {
    Something obj2 = Something.get( id );
} catch( Exception oops ) { ...handle... } 
```

如果有更好的方法来构建它，我也很高兴听到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:01:08.197

如果您为特殊的 REST api 构建 sdk，我将使用代表 REST 服务调用的方法名称，并且不会那么通用。

# ruby-on-rails-3 - “bundle exec rails server”相对于简单的“rails server”的优势？

> ID：11066993
> 
> 赞同：2
> 
> 时间：2012-06-16T20:59:40.420
> 
> 标签：ruby-on-rails-3

我这个周末买了[Crafting Rails Applications](http://pragprog.com/book/jvrails/crafting-rails-applications)并注意到作者使用

```
bundle exec rails server 
```

启动开发服务器。与简单的“rails 服务器”相比，使用此命令有什么优势？是否只是为了控制 gem 依赖关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T21:10:04.100

`bundle exec`在您已安装的捆绑包的上下文中运行服务器...... `rails s`或`rails server`几乎相同。

但是，如果您使用的是 rvm 或其他东西，您可能会有一些带有特殊版本 gem 的特殊捆绑包。

# java - JDK for android app development

> ID：11066998
> 
> 赞同：1
> 
> 时间：2012-06-16T21:00:17.193
> 
> 标签：java, android

Im trying to get started with app development. Isnt this the corrent JDK if i want to use eclipse + android plugin?

Java SE Development Kit 7u5: [http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html)

When i try to install the android SDK tools it tells me that i dont have the correct JDK installed.

And yes, ive tried this already: [Android SDK installation doesn't find JDK](https://stackoverflow.com/questions/4382178/android-sdk-installation-doesnt-find-jdk)

Thanks

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T21:04:39.443

Java 7 is not officially supported by the Android SDK at this time. Please use the latest version of the Java 6 JDK.

**UPDATE**: Java 7 is now supported.