# StackOverflow 问答 10491000-10491999

# java - 子类是否从超类继承私有实例变量

> ID：10491002
> 
> 赞同：9
> 
> 时间：2012-05-08T00:36:19.190
> 
> 标签：java, inheritance, encapsulation, information-hiding

[子类是否继承私有字段？](https://stackoverflow.com/questions/4716040/does-subclasses-inherit-private-fields)

这个问题解决了同样的问题，但我不太明白它如何满足下面（看似）矛盾的情况。

[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

说“子类不继承其父类的私有成员。”

这意味着它既不继承私有实例变量也不继承私有方法，对吗？

但是，如果它从其父级继承公共访问器方法，这将如何工作？它返回一个它不知道存在的实例变量？

此外，我的计算机科学书籍（Baron's AP Computer Science A）对“（子类）从（超类）继承所有私有实例变量和公共访问器方法”的问题有正确答案。

这不是oracle教程的缩影吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T00:38:47.397

访问器将正常工作。请记住，访问器在超类的“上下文”中运行，因此访问器将能够看到对子类隐藏的成员。

至于教科书，就看你的观点了。子类继承了私有成员，因为它们实际上存在于子类的实例中（因此它们会占用内存等），但子类将无法直接访问它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T08:54:45.687

把它想象成洋葱。层次结构的每一层都是洋葱中的一层。例如，如果 C 类扩展了 B 类，而 B 类扩展了 A 类，那么 C 类的对象将如下所示：

[**C类对象**](http://i.stack.imgur.com/q1TLY.png)

```
 -------------------------------------------------------------
       |                                                           | 
       |                   C and it's members                      |
       |                                                           |
       |    ------------------------------------------------       |
       |    |                                              |       |
       |    |              B and it's members              |       |
       |    |    ------------------------------------      |       |                                              
       |    |    |         A and it's members       |      |       |
       |    |    |                                  |      |       |
       |    |    ------------------------------------      |       |                                   
       |    ------------------------------------------------       |
       |                                                           |
       ------------------------------------------------------------- 
```

因此，C 类的对象确实有 B 和 A 的成员。但它不能访问 B 和 A 的私有成员。

但是，它可以访问 B 和 A 的公共和受保护成员。

因此，B 或 A 的公共访问器函数将允许 C 类的这个对象访问 B 类或 A 类的私有实例变量对象的“***部分***”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T00:38:37.867

这里的“不继承”意味着您无法访问它。它仍然存在，只是不能以任何方式与之交互（通过调用超类的非私有方法除外）。

您链接到的问题中[接受的答案确实解释了这一点。](https://stackoverflow.com/a/4716335/771837)该解释中是否有任何不明确的特定部分？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T00:43:42.140

当然，当您创建一个类的对象时，如果该类具有私有项，则该类`B`继承自一个类，根据 Java 中的访问规则，您*不能访问它们*，但是这些元素确实存在于私有内存中，即使作为空引用如果它们是空对象。`A``A`

 *在*Java 语言规范*中，您可以阅读：

> 一个类从其直接超类和直接超接口继承超类和超接口的所有非私有字段，这些字段都可以被类中的代码访问，并且不会被类中的声明隐藏。
> 
> 子类可能可以访问超类的`private`字段 - 例如，如果两个类都是同一类的成员。然而，一个`private`字段永远不会被子类继承。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-08T14:12:32.070

如果子类在同一个包中，它也继承私有成员，否则它只继承公共和受保护成员！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T00:48:13.613

私有成员也被继承。要对此进行测试，您可以在超类中执行以下操作：

```
//...
private String myText = "I'm in the superclass";

private void setMyText(String myTextValue)
{
    this.myText = myTextValue;
}

public void setMyTextPublic(String myTextValue)
{
    setMyText(myTextValue);
}

public String getMyText()
{
    return myText;
}
//... 
```

在继承的类中创建一个方法：

```
//...
public void setMyTextInTheSuperClass(String myTextValue)
{
    System.out.println(getMyText());
    setMyTextPublic(myTextValue);
    System.out.println(getMyText());
}

public void setConstantValueToMyText()
{
    setMyTextInTheSuperClass("I am in the child class");
}
//... 
```

并在某处调用 setConstantValueToMyText 。*

# php - SQL MAX 与 WHERE 子句结合使用

> ID：10491004
> 
> 赞同：0
> 
> 时间：2012-05-08T00:36:35.523
> 
> 标签：php, mysql

我需要从 mysql 表中的一个特定列中找到最大值，其中另一列的值等效于某个值。但是，通过我正在使用的查询，我不断收到一条显示 SQL 错误的消息。我的查询如下：

```
SELECT MAX(message_id) AS top_message HAVING(child_id) = '".$message_id[$i]."' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T00:39:35.087

您还缺少一个表名：

```
SELECT MAX(message_id) AS top_message FROM tablename WHERE child_id = '".$message_id[$i]."' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T00:38:49.190

您应该使用`WHERE`代替`HAVING`子句：

```
SELECT MAX(message_id) AS top_message 
FROM tablename 
WHERE child_id = '".$message_id[$i]."' 
```

当你有一个聚合条件时使用 only`HAVING`子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T00:55:27.103

您需要一个 from 子句和一个 where 子句。have 子句用于组过滤器。您没有 group by 子句，因此没有理由编写 having 子句。如果您要从中选择的表称为“MyTable”，那么您的查询如下：

```
SELECT MAX(message_id) AS top_message
FROM MyTable
WHERE child_id = '".$message_id[$i]."' 
```

请注意，不需要 child_id 周围的括号。请阅读 SQL 和 MySQL 教程以获取更多信息，您的生活会轻松很多。

# mysql - 如何在 MySQL 存储函数中自定义错误消息

> ID：10491005
> 
> 赞同：3
> 
> 时间：2012-05-08T00:36:35.810
> 
> 标签：mysql

对于大多数人来说，这可能是一个微不足道的问题......下面是我在 MySQL 中创建的一个存储函数：

```
DROP PROCEDURE IF EXISTS teamSize;
DELIMITER //

CREATE PROCEDURE teamSize(IN teamName VARCHAR(50), IN teamYear INT(4), OUT noOfPlayers INT)
BEGIN
    IF teamName IN (SELECT teamName FROM team) THEN
        SELECT COUNT(playerID) INTO noOfPlayers 
        FROM team
        JOIN teamAllocation
        ON teamAllocation.teamID = team.teamID
        WHERE team.teamName = teamName 
        AND team.teamYear = teamYear;
    ELSE
        SELECT "That team does not exist in the database" AS "Error Message";
    END IF;
END //

DELIMITER ; 
```

我制作了这个函数，以便我可以计算给定团队在给定年份的规模。团队名称和团队年份被解析为参数值。对于此功能，如果用户输入的团队名称在数据库中不存在，我希望显示用户友好的错误消息。

例如：我输入一个确实存在的团队，我得到以下结果，正如我所料：

```
mysql> CALL teamSize("U11 Orange", 2012, @noOfPlayers);
--------------
CALL teamSize("U11 Orange", 2012, @noOfPlayers)
--------------

Query OK, 0 rows affected (0.00 sec)

mysql> SELECT @noOfPlayers;
--------------
SELECT @noOfPlayers
--------------

+--------------+
| @noOfPlayers |
+--------------+
|            2 |
+--------------+
1 row in set (0.00 sec)

mysql> 
```

...但是如果我输入一个我知道数据库中不存在的团队，我会得到以下信息：

```
mysql> CALL teamSize("jkgefkrkvbey", 2012, @teamSize);
--------------
CALL teamSize("jkgefkrkvbey", 2012, @teamSize)
--------------

Query OK, 0 rows affected (0.00 sec)

mysql> SELECT @teamSize;
--------------
SELECT @teamSize
--------------

+-----------+
| @teamSize |
+-----------+
|         0 |
+-----------+
1 row in set (0.00 sec)

mysql> 
```

对于解析为函数的团队名称不存在的情况，我想要的是以下内容：

```
+------------------------------------------+
| Error Message                            |
+------------------------------------------+
| That team does not exist in the database |
+------------------------------------------+
1 row in set (0.00 sec)

mysql> 
```

如果有人对我如何实现上述目标有一些反馈或建议，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T00:44:27.533

我认为您的问题是术语的重载`teamName`。由于`teamName`是您的过程的参数，因此以下查询：

```
SELECT teamName FROM team 
```

相当于：

```
SELECT 'foo' FROM team 
```

`'foo'`对于中的每条记录，它总是会返回一次字符串`team`（因此`IF 'foo' IN ...`条件始终为真）。建议您重命名参数，以免与列名冲突。

此外，您不需要`IF`以您现在的方式执行。相反，为什么不：

```
IF (SELECT COUNT(*) FROM team WHERE teamName = new_parameter_name) THEN ... 
```

顺便说一句，我更喜欢引发 SQL 错误（例如，通过调用不存在的过程）而不是返回消息字符串。

# python - Python 运算符重载和运算符关联性

> ID：10491006
> 
> 赞同：5
> 
> 时间：2012-05-08T00:36:47.337
> 
> 标签：python, operator-overloading

我正在编写一个 python 程序，我需要在其中重载 >> 运算符。我面临的问题是这个运算符需要是右关联的。因此，如果我执行以下操作

```
A >> B >> C >> D >> E 
```

我希望将其解析为

```
(A >> (B >> (C >> (D >> E)))) 
```

据我了解，在 python 中，这个运算符是左关联的，所以我会得到，

```
((((A >> B) >> C) >> D) >> E) 
```

当您进行运算符重载时，是否可以更改python中运算符的默认关联性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:53:03.907

这可以做到……但这需要一些努力。基本思想是使用右移运算符来创建和更新延迟实际计算的新型对象。

例如，假设上面的变量：A、B、C、D 和 E 都是 Actual 类型的对象。我们将介绍一个新类 Deferred，它由对 Actual 实例的 rshift 操作生成。Deferred 还实现了 rshift 运算符，它更新对象并返回自身。

（顺便说一句，对于这个答案的其余部分，我假设 A、B、C、D 和 E 是不可变的，并且 rshift 操作会产生一个新对象。）

```
F = A >> B >> C >> D >> E 
```

将被计算为...

```
F = Deferred(A,B) >> C >> D >> E
F = Deferred(A,B,C) >> D >> E
F = Deferred(A,B,C,D) >> E
F = Deferred(A,B,C,D,E) 
```

F 维护一个缓存的 Actual 实例，该实例是从反向序列中计算出来的。此外，F 实现了与 Actual 相同的接口，因此在 Deferred 实例上调用的方法被委托给缓存的 Actual 实例。

我不知道你在做什么样的计算，所以在下面的例子中，我做了一些微不足道的事情，只是为了证明当延迟计算实际执行时，它们是相反的。

```
class Var(object):
    def __init__(self):
        pass

    @property
    def name(self):
        return self._name( )

    @property
    def length(self):
        return len(self.name)

class Actual(Var):
    def __init__(self, name):
        Var.__init__(self)
        self._text = name

    def _name(self):
        return self._text

    def __rshift__(self, other):
        if isinstance(other, Actual):
            return Deferred(self, other)

        return len(self.name)

    @staticmethod
    def NewFromShiftComputation(sequence):
        x = ' >> '.join(reversed(map(lambda actual: actual.name, sequence)))
        return Actual(x)

class Deferred(Var):
    def __init__(self, *args):
        Var.__init__(self)

        self._items  = [ ]
        self._actual = None  #-- cached "actual"

        for item in args:
            self._items.append(item)

    def _name(self):
        self._assure_actual( )
        return self._actual.name

    def __rshift__(self, other):
        self._actual = None  #-- Invalidate the cached "actual"
        self._items.append(other)
        return self

    def _assure_actual(self):
        if self._actual is None:
            self._actual = Actual.NewFromShiftComputation(self._items)

A = Actual('A')
B = Actual('B')
C = Actual('C')
D = Actual('D')
E = Actual('E')

F = A >> B >> C >> D >> E

print F.name
print F.length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:01:49.053

这不是运营商的问题。Python 从左到右计算： http:
[//docs.python.org/reference/expressions.html#evaluation-order](http://docs.python.org/reference/expressions.html#evaluation-order)

因此，在这种情况下需要括号，因为它都是相同的运算符。

# hibernate - 更新 @OneToMany 集合时出现问题

> ID：10491011
> 
> 赞同：0
> 
> 时间：2012-05-08T00:37:31.503
> 
> 标签：hibernate, jpa, jpa-2.0, hibernate-mapping, hibernate-onetomany

我被困在我试图更新@OneToMany 映射的地步。

问题：我有 2 个实体：标准和任务。一个条件可以包含多个任务。

```
class Criteria {
    @OneToMany(mappedBy = "criteria", cascade = { CascadeType.PERSIST,
    CascadeType.MERGE, CascadeType.REFRESH }, fetch = FetchType.LAZY)
    @Cascade({ org.hibernate.annotations.CascadeType.SAVE_UPDATE,
               org.hibernate.annotations.CascadeType.ALL,
               org.hibernate.annotations.CascadeType.MERGE,
               org.hibernate.annotations.CascadeType.PERSIST })
     private Set<Task> tasks;
}

class Task {
    @ManyToOne
    @JoinColumn(name = "CRITERIA_ID", nullable=false)
    private Criteria criteria;
} 
```

我正在尝试使用一组新任务更新现有标准。这需要删除所有现有任务并添加新任务。这是我的做法：

```
criteriaDao.persist(criteria);
Set<Task> existingTasks=criteria.getTasks();
if(existingTasks != null) {
    for (Task task : existingTasks) {
        task.setCriteria(null);
    }
    criteria.setTasks(tasks);
    //more code which sets criteria for each task - this works if i try to save new criteria with new tasks
} 
```

Hibernate 抛出异常：

```
Caused by: java.sql.BatchUpdateException: ORA-00001: unique constraint (CCA_DEV_5.TASK__UN) violated 
```

抛出此异常是因为它没有删除现有任务。

如果我只删除所有任务，它可以完美运行并使用以下代码删除给定条件的所有任务：

```
criteriaDao.persist(criteria);
Set<Task> existingTasks=criteria.getTasks();
if(existingTasks != null) {
    for (Task task : existingTasks) {
    task.setCriteria(null);
}
} 
```

在添加新任务和更多内容后，我尝试了使用合并的所有选项，但似乎对我没有任何用处。我被严重困在这里，并且肯定错过了 Hibernate 中非常基本的东西。

提前致谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:03:48.353

在你的`Task`课堂上，你根本不应该参考`Criteria`。只需将其连同其注释一起删除即可。

然后，不要设置由`Criteria`引用的`Task`，因为这个引用不再存在，只需使用`criteria.setTasks(newTasks)`并保存`criteria`。

* * *

让我解释一下。`Criteria`和之间的关系`Task`显然是`Criteria 1 --- n Tasks`- 1 到 n。现在，您可以调用`one-to-many`关系，也可以调用它`many-to-one`，这取决于您的观点。从`Criteria`角度看，它是`one-to-many`，从`Task`角度看，它是`many-to-one`。一般来说，选择**其中一种**观点并**坚持下去**是明智的，也更直观。选择一个观点，定义了“控制”关系的实体，通过该实体应该应用任何修改。

在您的情况下，如果您认为 a`Criteria`包含**或**拥有**一**组`Task`s -您会将关系视为`one-to-many`。确定之后，就不需要**在.java类**中`Criteria`引用了。您仅使用API 控制关系（但是，在数据库中创建的表确实有一个引用其包含的列）。**`Task``Criteria``Task``Criteria`**

# ruby-on-rails - 使用 Rails 进行功能测试时在多个表中创建记录的问题

> ID：10491012
> 
> 赞同：0
> 
> 时间：2012-05-08T00:37:35.123
> 
> 标签：ruby-on-rails, ruby, postgresql, testing

我正在尝试在我的 Rails 3.2.3 项目中执行默认功能测试。当我这样做时，我多次收到类似以下错误：

```
|| test_should_create_food_item(FoodItemsControllerTest):                                                                                   
|| ActiveRecord::InvalidForeignKey: PG::Error: ERROR:  insert or update on table "food_items" violates foreign key constraint "food_items_us 
```

我的 food_item 记录有一个外键指向用户表中的用户 ID。

据我了解，Rails 在每次调用测试方法时都会在“测试”数据库中创建和销毁测试数据。如果这是真的，那么这个错误是有道理的，因为当记录被插入到 food_items 表中时 users 表将是空的。

这是我为尝试解决此问题所做的工作。首先，我确保相关模型具有适当的 has_many 和 belongs_to 部分。

接下来，我在 food_items_controller_test.rb 的设置函数中添加了以下内容：

```
setup
  do                                                                                                                                  
> @user = users(:one)                                                                                                                     
  @food_item = food_items(:one)                                                                                                           
end 
```

我还尝试将 @user 调用添加到单个测试中，但没有任何区别。

在 food_items_controller_test 中执行功能测试之前，我还能做些什么来创建用户记录？

另外，如果可能的话，我宁愿不关闭“测试”数据库中的数据库约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:15:03.353

是的，[rails seed](http://railscasts.com/episodes/179-seed-data/)可以在您执行 food_items_controller_test 中的功能测试之前创建用户记录。

# asp.net - 毫秒被 ASP.NET MVC 隐藏输入元素截断

> ID：10491014
> 
> 赞同：3
> 
> 时间：2012-05-08T00:37:42.050
> 
> 标签：asp.net, .net, asp.net-mvc, datetime

我有一个呈现项目列表的视图，每个项目都包含一个`Date`属性。

```
<%:Html.HiddenFor(m => m.Items[j].Date)%> 
```

许多其他属性被隐藏或显示，用户可以对任何项目输入评论并将这些评论保存到数据库中。这是一个“批量编辑”类型的视图。

我以前使用过这些视图效果很好，但是我遇到了 Date 属性的问题，因为它是这样渲染的

```
<input name="Items[3].Date" type="hidden" value="3/05/2012 11:56:48 AM" /> 
```

问题是我需要使用 DateTime 作为该数据项的主键的一部分。我可以截断数据库中的毫秒数以允许匹配，但不能保证每秒只有一个数据点。

如何确保我的隐藏输入字段`DateTime`保留所有属性信息，包括毫秒组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:19:29.400

那么你真的需要使用吗

```
<%:Html.HiddenFor(m => m.Items[j].Date)%> 
```

为什么不保持简单

```
<input type="hidden" name="Items[<%:j%>].Date" value="<%:model.Items[j].Date.ToString("dd/MM/yy/ HH:mm:ss.fffff")%>"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:46:32.250

利用

```
<%:Html.HiddenFor(m => m.Items[j].Date.Ticks)%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T05:12:50.757

我没有成功在`HiddenFor`字段中强制使用 DateTime 的格式。

该`DisplayFormat`属性可以强制字段的格式，`DisplayFor`但对字段没有影响`HiddenFor`。

我采用了下面的 no-quite-a-hack 来让它工作 - 序列化和反序列化 ticks 属性以确保保留真实时间。

```
public long DateTicks 
{ 
    get
    {
        return this.Date.HasValue ? this.Date.Value.Ticks : 0; 
    } 
    set 
    { 
        if (value == 0) 
            this.Date = null; 
        else 
            this.Date = new DateTime(value); 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T00:43:02.997

在模型中的 Date 属性上使用**DisplayFormat**属性，并在格式字符串中拼出毫秒：

```
[DisplayFormat(DataFormatString = "{0:yyyyMMddhhmmssfff}")] 
```

# ruby-on-rails - 你如何输出所有属性，包括 attr_accessor 属性？

> ID：10491023
> 
> 赞同：3
> 
> 时间：2012-05-08T00:38:50.940
> 
> 标签：ruby-on-rails, ruby, activerecord, attr-accessor

假设我有一个包含列名称和电子邮件的用户类：

```
Class User < ActiveRecord::Base
  attr_accessor :gender
end

user = User.new(:gender => 'male', :name => 'joe', :email => 'user@example.com') 
```

如果我想要属性，我通常可以使用 user.attributes、user.inspect 或 user.to_yaml。但是，这不会输出性别。有没有办法可以轻松输出所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:59:19.583

我不相信你想要做的事情很容易做到。

看到这个问题：

[如何迭代 ActiveRecord 属性，包括 attr_accessor 方法](https://stackoverflow.com/questions/993839/how-to-iterate-activerecord-attributes-including-attr-accessor-method)

# javascript - 通过 AJAX 渲染 Jade 模板并尝试与 HTML 分开传递/访问数据

> ID：10491024
> 
> 赞同：1
> 
> 时间：2012-05-08T00:39:08.117
> 
> 标签：javascript, html, node.js, express, pug

我正在通过 res.render 和 Express 在 ajax 调用上渲染 Jade 模板。问题是我想将一些 JSON 变量或 Javascript 对象与 HTML 一起传回。

这是否可能以一种优雅的方式或根本没有？我知道我可以将脚本标记与 HTML 一起传递，但我不确定如何直接在“数据”响应中访问这些值。

这里的例子：

```
- var someNumber = 89
h1 Hello World
li #{someNumber} 
```

通常在 ajax 调用的这个模板的 res.render() 中你会得到

```
<h1> Hello Wolrd </h1>
<li> 89 </li> 
```

全部采用 HTML 格式。

如何访问回调中的 HTML 节点之一？理想情况下使用 jQuery 选择器，例如 $('h1 li')。我需要访问回叫中的号码，但它似乎没有抓住它。我正在考虑监听器或添加延迟，或者我需要将它分配给一个字符串并将其解析出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:31:25.027

不完全确定我理解这个问题。但是，通过 Jade 将 JSON 直接传递给浏览器。在您的路线逻辑中，您需要以下内容：

```
 res.render "test",
    title: "Test"
    debugJson: {
      'Read Folder Result' : result, 
      'HTTP' : {
        'Req URL' : req.url,
        'Req Query' : req.query,
        'Req User' : req.user,
        'Req Headers' : req.headers,
        'Req' : req,
        'Res' : res
      }
    } 
```

（对不起，那是在 CoffeeScript 而不是 JS 中）

在您的 Jade 模板中，您需要具有类似（在脚本中）的内容：

```
var myJson = !{JSON.stringify(debugJson)}; 
```

这会将 JSON 直接传递到脚本中。如果您希望它直接进入 DOM，例如：

```
#debug !{JSON.stringify(debugJson)} 
```

这会将它转储到一个div中。

但是，如果您只想在 Jade 模板中处理它，您可以简单地在 Jade 中使用循环。有关如何做到这一点，请参阅这个[先前的 StackOverflow 问题。](https://stackoverflow.com/questions/8728637/loop-in-jade-engine)

# amazon-s3 - 如何将文件从远程服务器直接上传到 Amazon S3？

> ID：10491025
> 
> 赞同：22
> 
> 时间：2012-05-08T00:39:14.603
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services

是否可以从远程服务器将文件上传到 S3？

远程服务器基本上是一个基于 URL 的文件服务器。例如，使用[http://example.com/1.jpg](http://example.com/1.jpg)，它提供图像。它不执行任何其他操作，也无法在此服务器上运行代码。

可以让另一台服务器告诉 S3 从`http://example.com/1.jpg`

```
 upload from http://example.com/1.jpg 
server -------------------------------------------> S3 <-----> example.com 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-08T08:32:01.183

如果您不能在服务器上运行代码或执行请求，那么，不，您不能这样做。您必须将文件下载到您拥有的服务器或计算机并从那里上传。

您可以在[http://docs.amazonwebservices.com/AmazonS3/latest/API/APIRest.html上查看可以在 amazon S3 上执行的操作](http://docs.amazonwebservices.com/AmazonS3/latest/API/APIRest.html)

检查 REST 和 SOAP API 的操作，您会发现无法为 Amazon S3 提供远程 URL 并让它为您抓取对象。所有 PUT 请求都要求将对象的数据作为请求的一部分提供。这意味着发起 Web 请求的服务器或计算机需要拥有数据。

过去我遇到过类似的问题，我想下载用户的 Facebook 缩略图并将它们上传到 S3 以在我的网站上使用。我这样做的方法是将图像从 Facebook 下载到我服务器上的内存中，然后上传到 Amazon S3 - 整个过程不到 2 秒。上传到 S3 完成后，将存储桶/密钥写入数据库。

不幸的是，没有其他方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T13:39:31.323

我认为提供的建议非常好，您可以将文件 SCP 到 S3 Bucket。提供 pem 文件将是一种无密码身份验证，通过 PHP 文件您可以验证扩展。PHP 文件可以将文件作为参数传递给 SCP 命令。

**此解决方案的唯一问题是，您的实例必须在 AWS 中。如果您的网站托管在其他托管服务提供商中并且您尝试将文件直接上传到 S3 存储桶，则无法使用此解决方案。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-29T22:04:43.387

从技术上讲，[使用 AWS Signature Version 4](http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-UsingHTTPPOST.html)是可能的，假设您`remote server`是下图中的客户，您可以在主服务器中准备一个表单，然后将表单字段发送到远程服务器，供其使用`curl`。详细的例子[在这里](http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-post-example.html)。

![使用 POST 请求上传 Amazon S3](../Images/e5b32c2eb8b9694436047f9c560a7e3e.png)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-08-08T21:11:38.443

您可以从终端使用 scp 命令。

1）使用终端，转到您要传输到服务器的文件的地方

2）输入：

```
scp -i yourAmazonKeypairPath.pem  fileNameThatYouWantToTransfer.php ec2-user@ec2-00-000-000-15.us-west-2.compute.amazonaws.com: 
```

注意在您从 Ec2 网站获得的 ec2blablbla 内容之前添加“ec2-user@”！！这是一个如此挑剔的错误！

3）您的文件将被上传并显示进度。当它是 100% 时，你就完成了！

# tcl - 使用网格时无法将 tcl/tk 程序居中

> ID：10491026
> 
> 赞同：3
> 
> 时间：2012-05-08T00:39:17.897
> 
> 标签：tcl, tk

我这样做的原因是因为我试图将窗口设置在屏幕的中心。我使用的是网格而不是打包，我已经阅读了有关使用`wm grid`但不明白如何设置它的信息。我也不明白为什么`. cget -width`返回`0`我认为网格应该在没有选项时设置大小？

```
set width [. cget -width]
set height [. cget -height]
puts $height
puts $width
set x [expr { ( [winfo vrootwidth  .] - $width  ) / 2 }]
set y [expr { ( [winfo vrootheight .] - $height ) / 2 }]

wm title . "a3q2" 
wm geometry . ${width}x${height}+${x}+${y} 
```

这次我做错了什么？PS作业我不只是想要一个代码帖子。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:15:31.407

`[. cget -width]`并`[. cget -height]`返回*显式配置*的窗口宽度/高度。对于 Tk 中的大多数小部件，您没有明确配置尺寸。相反，小部件具有基于小部件内容的“自然”宽度/高度。例如，标签的宽度/高度足以容纳其中的文本。顶层窗口足够大以容纳其中的所有小部件。

要获得窗口的实际尺寸，您应该使用`[winfo width .]`和`[winfo height .]`。确保*在*窗口和其中的所有小部件都已映射之后执行此操作（通常这意味着在`[update]`调用之前进行`[winfo ...]`调用）。否则几何管理器可能尚未更新小部件/窗口的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T05:02:59.133

关于 Eric 回答的注释： [update][~~通常~~几乎总是一个错误](http://wiki.tcl.tk/1255 "被认为有害的更新")。有关如何避免它的示例，请参阅 Tcl wiki。一种技巧是绑定到 <configure> 事件并在绑定脚本中调用 [winfo ...]。

# python - Python 3.2 中的 **kwargs 和 dict 有什么区别？

> ID：10491027
> 
> 赞同：17
> 
> 时间：2012-05-08T00:39:23.000
> 
> 标签：python, syntax, dictionary, arguments

似乎 python 的许多方面只是功能的重复。除了我在 Python 中的 kwargs 和 dict 中看到的冗余之外，还有什么不同吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T00:44:12.477

参数解包（许多人使用 ）和作为参数之一`kwargs`传递是有区别的：`dict`

*   使用参数解包：

    ```
    # Prepare function
    def test(**kwargs):
        return kwargs

    # Invoke function
    >>> test(a=10, b=20)
    {'a':10,'b':20} 
    ```

*   将 dict 作为参数传递：

    ```
    # Prepare function
    def test(my_dict):
        return my_dict

    # Invoke function
    >>> test(dict(a=10, b=20))
    {'a':10,'b':20} 
    ```

差异主要是：

*   可读性（即使没有明确定义，您也可以简单地传递关键字参数），
*   灵活性（您可以显式支持一些关键字参数，其余使用`**kwargs`），
*   参数解包可帮助您避免对“包含”参数的对象进行意外更改（这不太重要，因为 Python 通常假设开发人员知道他们在做什么，这是一个不同的主题），

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-08T09:05:56.977

没错，在大多数情况下，您可以互换 dicts 和 **kwargs。

例如：

```
my_dict = {'a': 5, 'b': 6}
def printer1(adict):
    return adict
def printer2(**kwargs):
    return kwargs

#evaluate:
>>> printer1(my_dict)
{'a': 5, 'b': 6}
>>> printer2(**my_dict)
{'a': 5, 'b': 6} 
```

但是，如果将 kwargs 与其他参数结合使用，您将拥有更大的灵活性：

```
def printer3(a, b=0, **kwargs):
    return a,b,kwargs

#evaluate
>>> printer3(**my_dict)
(5, 6, {}) 
```

# c# - 复选框/切换按钮检查/取消选中本身

> ID：10491029
> 
> 赞同：1
> 
> 时间：2012-05-08T00:39:52.823
> 
> 标签：c#, winforms, checkbox, togglebutton

我有许多复选框，我想将它们作为切换按钮处理。每个都完全独立于另一个，可以选中或不选中。当用户单击复选框/按钮时，它保持选中状态，如果用户再次单击，则复选框/按钮返回“未选中”状态。复选框/按钮可以选中/取消选中本身吗？

我已经尝试了很长时间，也在互联网上搜索并找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:56:40.380

Check the status of the check box, every time the button is clicked, change it.

```
private void toggButton_CheckedChanged(object sender, EventArgs e) 
{ 
    // everytime you click the button checkbox states will change.
    if(checkBox.Checked)
    {
        checkBox.Checked = false;
    }
    else
    {
       checkBox.Checked = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T10:03:22.700

一个很短的命令：

```
checkBox.Checked = !checkBox.Checked; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T02:33:21.120

> 问题是复选框/按钮始终被“显示”，即它在选中时具有的“蓝色”颜色没有改变，给人的印象是它没有被选中。– 用户 1304490

可能设置[CheckBox.ThreeState](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.threestate.aspx)属性 false 有帮助。

如果 ThreeState 属性设置为 false，则 CheckState 属性值只能在代码中设置为 System.Windows.Forms.CheckState 的 Indeterminate 值，而不能通过用户交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T00:56:17.610

You can assign a common event to all Checkboxes. Write this code in your .cs file and select all Checkboxes and assign this event to checkedChange event.

```
private void chkboxes_CheckedChanged(object sender, EventArgs e)
{
    CheckBox chk = (CheckBox)sender;
    if(!chk.Checked)
        chk.Checked = true;
    else
        chk.Checked = false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T01:19:36.410

参考：[CheckBox.CheckState](http://www.google.co.in/gwt/x?wsc=hg&wsi=51573f8fca08bc22&source=m&u=http://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.checkstate.aspx&ei=bG6oT9ONF-uviQeZqtDkAw)属性。
它是读写属性，因此您可以在 GUI 中或通过代码进行设置。

**Checked** CheckBox 显示一个复选标记。控件出现凹陷。
**未选中**CheckBox 为空。控件出现凸起。
**Indeterminate** CheckBox 显示复选标记并带有阴影。控件显示为扁平。

将其写入已检查的更改事件并检查它是否切换.. *它将像开关一样工作..*

```
 label1.Text = "ThreeState: " + checkBox1.ThreeState.ToString() + "\n" + "Checked: " + 
checkBox1.Checked.ToString() + "\n" + "CheckState: " + checkBox1.CheckState.ToString(); 
```

为您的问题的答案检查[CheckBox.AutoCheck 属性](http://www.google.co.in/gwt/x?source=m&u=http://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.autocheck.aspx&wsi=51573f8fca08bc22&ei=-22oT6blCsGeiQfq5cXqAQ&wsc=hg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-03T13:03:49.263

当您想更改一个表单上太多复选框的复选框状态时，您需要快速可靠的代码，而不是复杂性。

最好的方法是使用：

> CheckBox.CheckState

例如，您可以使用以下代码将复选框状态更改为（未选中）：

```
checkbox1.CheckState = CheckState.Unchecked;
checkbox2.CheckState = CheckState.Unchecked;
checkbox3.CheckState = CheckState.Unchecked; 
```

如需进一步阅读，请参阅MSDN 中的[此内容。](https://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.checkstate%28v=vs.110%29.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-26T20:39:53.570

这个问题非常不清楚，但如果有人仍在为复选框而苦苦挣扎：

在其中两个之间切换（不能同时勾选两个复选框，至少需要勾选一个）：

```
 private void chkBoxON_CheckedChanged(object sender, EventArgs e)
    {
        if (chkBoxON.Checked)
        {
            chkBoxOFF.Checked = false;
            // here some code to do after this checkbox is ticked
        }
        else
        {
            chkBoxOFF.Checked = true;
        }

    }

    private void chkBoxOFF_CheckedChanged(object sender, EventArgs e)
    {
        if (chkBoxOFF.Checked)
        {
            chkBoxON.Checked = false;
            // here some code to do after this checkbox is ticked
        }
        else
        {
            chkBoxON.Checked = true;
        }

    } 
```

如果您只需要一个选中或两个都未选中，那么：

```
 if (chkBoxON.Checked)
        {
            chkBoxOFF.Checked = false;
        }
    }

    private void chkBoxOFF_CheckedChanged(object sender, EventArgs e)
    {
        if (chkBoxOFF.Checked)
        {
            chkBoxON.Checked = false; 
        } 
```

如果您需要使用按钮更改其状态，则：

```
private void button1_Click(object sender, EventArgs e)
    {
        chkBoxON.Checked = false;
        //chkBoxON.Checked = true; //if need to be checked
    } 
```

如果您需要禁用单击复选框的可能性，则：

```
chkBoxOFF.Enabled = false; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-11-05T00:00:58.063

您只需要使用 NOT 运算符来创建最简单的切换。

```
checkBox.Checked = !checkBox.Checked; 
```

# lisp - Common Lisp 中的 Web 开发

> ID：10491030
> 
> 赞同：6
> 
> 时间：2012-05-08T00:39:53.560
> 
> 标签：lisp, common-lisp

我对Scheme有点熟悉。我正在阅读 OnLisp，并且很想在其中做一个真实世界的项目。最有可能的网络开发。我很想知道人们使用什么样的设置来开发 lisp 网站。我家里有几台mac，我想我会使用clozure cl。不过，我对一些事情保持警惕。我在互联网上读到 cl 没有可靠的线程设施，也没有良好的网络。这是真的？你的经历是什么？

PS：不要告诉我关于clojure :)。Lisp 是我需要抓挠的痒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T12:12:01.107

目前我正在使用[Restas](http://restas.lisper.ru/en/)一个基于`Hunchentoot`Rails 路由系统并受其启发的框架。我还使用[Postmodern](http://marijnhaverbeke.nl/postmodern/)与数据库交互，并使用[cl-markup](https://github.com/arielnetworks/cl-markup)`PostgreSQL`生成 HTML，尽管我正在考虑切换到看起来更可定制的[cl-who 。](http://weitz.de/cl-who/)

当我开始时，我也考虑过使用[Parenscript](http://common-lisp.net/project/parenscript/)来生成，`JavaScript`但现在我对[Mootools](http://mootools.net/)和 plain很满意`JavaScript`。

一切都在 SBCL 上运行，并且可用于 Quicklisp。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T02:19:48.750

不知道为什么它没有“良好的网络”；如果您想编写可移植的 Common Lisp 应用程序，则不能依赖线程，因为某些实现不支持它们（AFAIK，只是[`clisp`](http://www.clisp.org/)，尽管您可以使用实验性线程支持来编译它）。如果你打算选择一个实现并坚持下去，你就不会有这个问题。

“标准” CL Web 堆栈是[Hunchentoot](http://weitz.de/hunchentoot/) / [cl-who](http://weitz.de/cl-who/) / [clsql](http://clsql.b9.com/)，尽管您可以找到在[Araneida](http://www.cliki.net/araneida)或[Portable AllegroServe](http://portableaserve.sourceforge.net/)上运行的教程。

我使用的设置是运行[quicklisp的](http://www.quicklisp.org/beta/)[Debian](http://www.debian.org/) / [SBCL](http://www.sbcl.org/)和上述系统以及 MySQL（尽管我正在认真考虑跳到[Postgres](http://www.postgresql.org/)），以便数据库和[nginx](http://nginx.org/)在 Hunchentoot 前面运行，以提供任何静态内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T05:11:09.093

mck-一直在维护heroku common lisp webapp。

[https://github.com/mck-/heroku-cl-example/tree/](https://github.com/mck-/heroku-cl-example/tree/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T05:49:46.380

Common Lisp 的“网络”的问题是，我们在 CL 标准中没有套接字，所以每个实现都有自己的套接字 API。不过，我们尝试了一些提供通用接口的尝试，例如`usocket`. [您可以在此处](http://www.cliki.net/networking)找到与网络相关的软件包列表。

如果您需要 Web 框架，请查看[Caveman](https://github.com/fukamachi/caveman)。我还没有使用它，但它看起来是我见过的最完整的 CL Web 框架。

# jsp - JSTL/JSP 生成 url 并强制 HTTP/HTTPS

> ID：10491031
> 
> 赞同：2
> 
> 时间：2012-05-08T00:40:00.317
> 
> 标签：jsp, jstl

我`c:url`用来生成相对于上下文路径的 url。但是，如果在安全页面中，所有 url 都将是***https ，在不安全页面中则为******http***。我已经设置了我的服务器，即使我使用 http 访问例如登录页面，它也会重定向到 https，但是在登录页面中，我使用的所有相对 URL 都将是 https。

例如，我想将主页链接设为 http，这样它就不会发出 https 请求，然后再重定向到 http ！

在 JSP 中生成 url 时，有没有办法强制***安全（https）***或***不安全（http） ？***

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-04T10:18:02.160

我发现处理此问题的最简单方法是使用以下方法之一：

```
http://${pageContext.request.serverName}<c:url value="/my/path"/> 
```

或者

```
https://${pageContext.request.serverName}<c:url value="/my/path"/> 
```

例如（在您的 JSP 中）：

```
You can
<a href="https://${pageContext.request.serverName}<c:url value='/reset-password.jsp'/>">reset your password</a>
if you like. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:58:00.423

如果您查看从 c:url 生成的 HTML，您会看到它们是这样的 这并没有告诉您该资源来自哪个主机或通过什么协议，但您的浏览器将采用与您的页面相同的主机和协议在...上。

如果您的页面位于[http://example.com/mysite](http://example.com/mysite)并且您想链接到[https://secure.example.com/mysite](https://secure.example.com/mysite)上的子页面，那么这将被视为当前 web 应用程序之外的链接（即使代码该链接后面最终将由同一个 webapp 处理）。像对待链接到其他外部网站一样对待它们。

# java - 如何检查媒体播放器是否正在播放或停止？

> ID：10491032
> 
> 赞同：1
> 
> 时间：2012-05-08T00:40:01.517
> 
> 标签：java, media-player, jmf

如何使用 Java Media Framework 检查媒体播放器是否正在播放或停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T00:45:09.043

您可以致电[`getState`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/bean/playerbean/MediaPlayer.html#getState%28%29)并检查[`Controller.Started`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Controller.html#Started)：

```
if (mediaPlayer.getState() == Controller.Started) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:21:33.570

```
// Register ControllerListener :

public class myPlayer implements ControllerListener  {
// ....
    Player player = Manager.createRealizedPlayer(url);
    player.addControllerListener(this);
// ....

// And check for EndOfMedia event in the controllerUpdate method:

    public void controllerUpdate(ControllerEvent event) {
    if (event instanceof EndOfMediaEvent) {
        // Take appropriate action
        }
    }
} // End of class 
```

通过检查状态和监听 EndOfMedia 事件，可以检测媒体是否正在播放或停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T16:34:02.467

自从接受答案以来，它似乎有点变化。以下对我有用：

```
if(this.player.getStatus() == MediaPlayer.Status.STOPPED){
     // Do something
} 
```

# javascript - 当我单击同一行中的 asp:button 时，如何将 gridview 复选框设置为选中？

> ID：10491041
> 
> 赞同：1
> 
> 时间：2012-05-08T00:41:40.733
> 
> 标签：javascript, jquery, asp.net, gridview, checkbox

我有一个带有一列 asp 按钮的 gridview，我使用 javascript 来切换文本，如下所示：

```
function btnBuyToggle(objRef) 
{ 
    var row = objRef.parentNode.parentNode;
    var rowIndex = row.rowIndex;
    if (objRef.value == "ADD")
    {
        objRef.value = "REMOVE";
        $("#" + objRef.id).parent().parent().css("color", "#800080").css("font-style", "italic").css("background-color", "#F5FA61");
    } 
    else 
    {
      objRef.value = "ADD";
    }
} 
```

现在，我添加了另一个隐藏复选框的 gridview 列，我想用它来将切换按钮实例传递回另一个按钮单击事件后面的代码。所以，我需要做的是修改上面的脚本（JQuery 很好）以在被切换的同一行上设置复选框（选中 ADD 按钮文本值，并取消选中 REMOVE 按钮文本值。

这是我的gridview字段：

```
<asp:TemplateField HeaderText="Prior <br /> Downld" HeaderStyle-ForeColor="White" > 
    <ItemTemplate >
       <asp:Button id="btnBuy" runat="server" OnClientClick="btnBuyToggle(this); return false;"
             Text="ADD" CssClass="buyButton" Visible="true" />
     </ItemTemplate>
    <HeaderStyle Width="7%" />
    <ItemStyle CssClass="sessionOrderDownloadItems" VerticalAlign="Middle" HorizontalAlign="Center" />
</asp:TemplateField>
<asp:TemplateField HeaderStyle-Width="0px" >
    <ItemTemplate>
        <asp:CheckBox Visible="False" Enabled="false" ID="buyCheckBoxHidden" runat="server"
             Checked='<%# Eval("SORD_SelectedForPurchaseFlag") %>' />
    </ItemTemplate>
    <HeaderStyle Width="0px" />
</asp:TemplateField> 
```

谢谢你，吉姆

这是我尝试的固定脚本：

```
 function btnBuyToggle(objRef) 
          { 
            var $btn = $("#" + objRef.id);

            if (objRef.value == "ADD")
            {
                objRef.value = "REMOVE";
                $btn.closest('.myClass').prop("checked", true);
                $btn.parent().parent().css("color", "#800080").css("font-style", "italic").css("background-color", "#F5FA61");
            } else {
                objRef.value = "ADD";
                $btn.closest('.myClass').prop("checked", false);
                $btn.parent().parent().css("background-color", "#FFFFFF").css("color", "#191970").css("font-style", "normal");
            }
        } 
```

我修改过的复选框标记：

```
<asp:TemplateField HeaderStyle-Width="0px" >
   <ItemTemplate>
     <asp:CheckBox style="display:block;" ID="buyCheckBoxHidden" runat="server" CssClass="myClass" Checked="false" />
   </ItemTemplate>
   <HeaderStyle Width="0px" />
</asp:TemplateField> 
```

谢谢你，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T00:55:45.223

您的第一个问题是您的复选框设置为`visible="false"`. 执行此操作时，javascript 将看不到该复选框。你需要改变它`display:none`。其次，您可以使用 jquery [nearest()](http://api.jquery.com/closest/)方法来获取最近的复选框。为了使这更容易，您可能应该在您的复选框中添加一个类。找到复选框后，您可以使用 jquery [prop()](http://api.jquery.com/prop/)方法将选中的属性设置为 true 或 false。

**HTML**：

```
<asp:CheckBox runat="server" ID="buyCheckBoxHidden" Checked='<%# Eval("SORD_SelectedForPurchaseFlag") %>' style="display:none;" CssClass="class" /> 
```

Javascript：

```
function btnBuyToggle(objRef) 
{
    var $row = $(objRef).closest('tr');

    if (objRef.value == "ADD")
    {
        objRef.value = "REMOVE";
        $row.find('.myClass').prop("checked", true);
        // OR $row.find('input[type=checkbox]').prop("checked", true);
        $row.css("color", "#800080").css("font-style", "italic").css("background-color", "#F5FA61");
    } else {
        objRef.value = "ADD";
        $row.find('.myClass').prop("checked", false);
        // OR $row.find('input[type=checkbox]').prop("checked", false);
        $row.css("background-color", "#FFFFFF").css("color", "#191970").css("font-style", "normal");
    }
}​ 
```

这是一个示例[jsfiddle](http://jsfiddle.net/EVTRz/8/)。

**编辑**：

顺便说一句，jquery [prop()](http://api.jquery.com/prop/)是更改 jquery 1.6 及更高版本的属性值的推荐方法。如果您使用的是较早版本的 jquery，则需要使用[attr()](http://api.jquery.com/attr/)方法。

**编辑**：

因为似乎 ASP.Net 控件正在删除您的类。仅供参考，ASP.Net 控件具有预设皮肤，可以在您的 App_Themes 文件夹和您使用的主题中找到。在特定主题中，通常有一个 Default.skin 文件，它指定默认情况下控件上的类。ASP.Net 在创建复选框时可能会删除您的类。如果你不需要自己的类，你应该搜索 ASP.net 添加的类。

# javascript - 添加不四舍五入的用户输入（Google Apps 脚本）

> ID：10491044
> 
> 赞同：0
> 
> 时间：2012-05-08T00:42:57.770
> 
> 标签：javascript, add, rounding, google-apps-script

我正在向 UI 添加用户输入，因为他们添加数字并返回结果。输入是货币，所以我需要执行两位小数而不是四舍五入。

这是我的代码示例：

```
 function ceiling2(number) {
  var ceiling2;
  return ceiling2 = Math.ceil(number*100)/100;
}
//Totals
function lD23Total (e){
  var app = UiApp.getActiveApplication();
  var tB1v = parseInt(e.parameter.TextBox1);
  var tB9v = parseInt(e.parameter.TextBox9);
  var tB17v = parseInt(e.parameter.TextBox17);
  var tB25v = parseInt(e.parameter.TextBox25);
  var tB33v = parseInt(e.parameter.TextBox33);
  var tB41v = parseInt(e.parameter.TextBox41);
  var tB49v = parseInt(e.parameter.TextBox49);
  var lD23 = app.getElementById("LabelD23").setStyleAttribute('fontWeight','bold');
  var lD23T = tB1v + tB9v + tB17v + tB25v + tB33v + tB41v + tB49v;
  lD23.setText("$ " + ceiling2(lD23T));

  var app = UiApp.getActiveApplication();
  app.close();
  return app;  
} 
```

目前它返回一个四舍五入的数字。

感谢您提供的建议！

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:40:46.677

函数 parseInt() 会将值转换为整数，删除小数点后的值。请改用 parseFloat()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:21:06.320

我认为您的功能很好...如果您删除 parseInt() 并按照 Eric 或 Number() 的建议将其替换为 parseFloat() 它应该可以工作...如果不是，那么问题可能来自方式数字写成：

如果您使用了 26,4567，但您应该使用 26.4567 并用点作为分隔符来代替逗号。

你能试着让我们知道吗？问候， 塞尔吉

或者您可以在发送到您的函数之前使用它：

```
var newnumber=Number(number.toString().replace(",","."));// convert to string, replace comma with dot and set as number again. 
```

并且您的功能在这两种情况下都可以使用

# bash - cp 文件名* 备份/* (Bash)

> ID：10491046
> 
> 赞同：0
> 
> 时间：2012-05-08T00:43:07.203
> 
> 标签：bash, cp

我想将所有以字符串开头的文件复制到同一目录中的文件夹中。我试过`cp foo* backup/foo*`但得到

```
usage: cp [-R [-H | -L | -P]] [-fi | -n] [-apvX] source_file target_file
   cp [-R [-H | -L | -P]] [-fi | -n] [-apvX] source_file ... target_directory 
```

我怎样才能复制完成这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T00:44:32.727

```
cp foo* backup/ 
```

只需指定目标目录。这不是 DOS 命令窗口。

# opencv - 使用 Racket FFI 快速访问阵列

> ID：10491047
> 
> 赞同：6
> 
> 时间：2012-05-08T00:43:29.983
> 
> 标签：opencv, racket, ffi

我正在尝试在 Racket 中编写 OpenCV FFI 并到达需要有效操作数组的地步。但是，我使用 Racket FFI 访问数组的所有尝试都导致代码效率非常低。有没有办法使用 FFI 快速访问 C 数组？

在 Racket 中，这种类型的操作相当快，即：

```
(define a-vector (make-vector (* 640 480 3)))
(time (let loop ([i (- (* 640 480 3) 1)])
    (when (>= i 0)
      ;; invert each pixel channel-wise
      (vector-set! a-vector i (- 255 (vector-ref a-vector i)))
      (loop (- i 1)))))
->  cpu time: 14 real time: 14 gc time: 0 
```

现在，在 OpenCV 中，有一个名为的结构`IplImage`，如下所示：

```
typedef struct _IplImage
{
    int  imageSize;             /* sizeof(IplImage) */
    ...
    char *imageData;        /* Pointer to aligned image data.*/
}IplImage; 
```

该结构在 Racket 中定义如下：

```
(define-cstruct _IplImage
    ([imageSize _int]
     ...
     [imageData _pointer])) 
```

`cvLoadImage`现在我们使用如下函数加载图像：

```
(define img
  (ptr-ref
   (cvLoadImage "images/test-image.png" CV_LOAD_IMAGE_COLOR)
   _IplImage)) 
```

`imageData`可以通过以下方式访问指针：`(define data (IplImage-imageData img)))`

现在，我们要操作`data`，而我能想到的最有效的方法是使用指针：

```
(time (let loop ([i (- (* width height channels) 1)]) ;; same 640 480 3
    (when (>= i 0)
      ;; invert each pixel channel-wise
      (ptr-set! data _ubyte i (- 255 (ptr-ref data _ubyte i)))
      (loop (- i 1)))))
-> cpu time: 114 real time: 113 gc time: 0 
```

与原生 Racket 向量的速度相比，这非常慢。我还尝试了其他方法，例如`_array`，`_cvector`它们甚至达不到使用指针的速度，除了用 C 语言编写一个一流的函数，该函数获得一个运行整个数组的函数。这个 C 函数被编译成一个库并使用 FFI 绑定在 Racket 中。然后，可以将 Racket 过程传递给它并应用于数组的所有元素。速度与指针相同，但仍不足以继续将 OpenCV 库移植到 Racket。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T00:44:34.940

我尝试了 Eli 建议的方法，结果成功了！这个想法是使用一个字节串。由于在这种情况下数组的大小是已知的，`(make-sized-byte-string cptr length)`因此可以使用：

```
(define data (make-sized-byte-string (IplImage-imageData img)
                                     (* width height channels))) 
```

这导致运行时间接近 Racket 的原生向量：

```
(time (let loop ([i (- (* 640 480 3) 1)])
    (when (>= i 0)
      ;; invert each pixel channel-wise
      (bytes-set! data i (- 255 (bytes-ref data i)))
      (loop (- i 1)))))
-> cpu time: 18 real time: 18 gc time: 0 
```

谢谢你，伊莱。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T01:08:09.803

使用字节串（通过）设置整个事情可能会更好`_bytes`，但这是一个非常粗略的猜测。最好在邮件列表上问这个问题......

# xml - VB.NET 中的 MSXML

> ID：10491052
> 
> 赞同：1
> 
> 时间：2012-05-08T00:44:22.687
> 
> 标签：xml, vb.net

此代码在良好的旧 VB6 中运行良好。我已经尝试了各种方法在 VB.NET 中执行此操作，但无法使其正常工作。任何人都可以帮我编写在 .NET 中工作的代码吗？

```
Dim objHTTP As New MSXML2.XMLHTTP

Dim strReturn As String
Dim objReturn As New MSXML2.DOMDocument

Dim url As String
Dim XMLEnvelope As String

url = "http://zzzzzdummy.com"

XMLEnvelope = vbNull

objHTTP.open("post", url, False, "", "")  '

Debug.Print(Err.Number)

objHTTP.setRequestHeader("Content-Type", "text/xml")
objHTTP.setRequestHeader("Content-length", Len(XMLEnvelope))
Debug.Print("------------Send Envelope-------------")
Debug.Print(XMLEnvelope)
Debug.Print("--------------------------------------")
objHTTP.send(XMLEnvelope)

strReturn = objHTTP.responseText
objReturn.loadXML(strReturn)
Debug.Print("----------Response Envelope-----------")
Debug.Print(strReturn)
Debug.Print("--------------------------------------") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:05:54.947

这就是我想出的。然后我可以将来自此的响应放入 XML 返回并解析它。

```
Function WRequest(ByVal URL As String, ByVal method As String, ByVal POSTdata As String) As String
     Dim responseData As String = ""

     Try
         Dim hwrequest As Net.HttpWebRequest = Net.WebRequest.Create(URL)
         hwrequest.Accept = "*/*"
         hwrequest.AllowAutoRedirect = True
         hwrequest.UserAgent = "http_requester/0.1"
         hwrequest.Timeout = 60000
         hwrequest.Method = method

         If hwrequest.Method = "POST" Then
             hwrequest.ContentType = "application/x-www-form-urlencoded"

             Dim encoding As New Text.ASCIIEncoding() 'Use UTF8Encoding for XML requests
             Dim postByteArray() As Byte = encoding.GetBytes(POSTdata)
             hwrequest.ContentLength = postByteArray.Length

             Dim postStream As IO.Stream = hwrequest.GetRequestStream()
             postStream.Write(postByteArray, 0, postByteArray.Length)
             postStream.Close()

         End If

         Dim hwresponse As Net.HttpWebResponse = hwrequest.GetResponse()
         If hwresponse.StatusCode = Net.HttpStatusCode.OK Then
             Dim responseStream As IO.StreamReader =  New IO.StreamReader(hwresponse.GetResponseStream())
             responseData = responseStream.ReadToEnd()
         End If

         hwresponse.Close()
     Catch e As Exception
         responseData = "An error occurred: " & e.Message
     End Try
     Return responseData

 End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T00:47:55.627

不要在 .NET 应用程序中使用 MSXML。各种`System.Xml`命名空间中的类更强大，更易于使用。它们也可能具有更长的使用寿命。

您实际上很幸运能够使用 VB.NET。它通过 XML 文字和 LINQ to XML 内置了对 XML 的处理。

* * *

实际上，您的代码不包括对 XML 的任何处理。您应该简单地使用`WebClient`or`WebRequest`类。

# sql-server - SQL Server 作业完成后是否有任何事件？

> ID：10491056
> 
> 赞同：0
> 
> 时间：2012-05-08T00:44:42.997
> 
> 标签：sql-server, jobs

我想获取最新的原始作业历史记录，并在每次作业完成后以我的格式保存它们。我编写了一个存储过程来获取历史记录`sp_help_jobhistory`，然后格式化结果，然后将它们保存到一个新表中。

但是，什么时候调用这个存储过程呢？

作业完成时是否触发了某些事件？

也许还有其他一些解决方案。

感谢您的评论/回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T00:58:38.490

正如 Akhil 所说，只需在您的工作中添加一个步骤并确保它被正确链接（假设您的工作链步骤仅基于成功，在最后一步成功时，执行您的存储过程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:25:13.560

我已经尝试了该解决方案，并且效果很好。Step 1：调用sp BeginHistoryLog，这个sp会通过job name从[msdb].[dbo].[sysjobs]表中获取job的信息。并且这个 SP 会将初始数据写入记录历史消息的 JobHistory。

第2步：将调用执行实际工作的sp。

Step 3：会调用SP EndHistoryLog，这个SP会通过job id和step id从msdb.dbo.sysjobhistory和INNER JOIN [msdb].[dbo].[sysjobs]获取step2执行信息。而这个 sp 会将执行信息写入 JobHistory 表中。

# loops - Server.Execute 复制动态内容

> ID：10491057
> 
> 赞同：0
> 
> 时间：2012-05-08T00:44:58.593
> 
> 标签：loops, dynamic, asp-classic, duplicates

我在 ASP 中创建了一个页面，该页面使用类似于以下的代码加载动态内容：

```
<%
  var1 = int(rnd * 5) + 1
  var2 = int(rnd * 10) + 1
%>
<html>
<body>

what variable 1 is: <%=var1%>
what variable 2 is: <%=var2%>

</body>
</html> 
```

然后我有另一个页面，它使用 Server.Execute 使用循环执行前面提到的文件 2 次以上。代码如下所示：

```
<% filename = request.querystring("page") %>

<table class="domtable">
<% for j = 1 to 2%> <%qnumb = qnumb + 1%>
  <tr> 
      <td align="left">
        <%server.execute (filename)%> 
        <% If qnumb < 2 then%>
        <br/><hr><br/>
        <%end if%>
      </td></tr>
  <%next%>
</table> 
```

所以在过去的几个月里，这对我来说非常有效，在两个单独的执行中为两个变量加载不同的数字。然后今天，我在我的服务器上复制了一个文件夹，将其重命名，现在神奇的是，在浏览器刷新的 10 次中有 9 次变量是相同的数字。

一个月前我的第二台服务器上的相同文件发生在我身上，我不得不删除第二台服务器上的所有文件，并从我的第一台服务器下载它们（现在正在复制），然后将它们上传回来修复。不幸的是，我没有下载我的第一台服务器的整个服务器内容，所以我无法逆转这个过程。所以我不确定这个问题是服务器端的，还是与我正在编写的代码有关？我只是不知道为什么它会工作这么长时间，然后突然停止工作。

我试过使用元无缓存控件。我删除了我之前从服务器复制的新文件夹，但没有用。我还尝试删除过去几天上传的文件，但也没有用。我尝试将“文件名”加载为数组，例如：

```
filename(1) = request.querystring("page")
filename(2) = request.querystring("page") 

for j = 1 to 2
  Server.Execute(filename(j))

next 
```

我真的希望有人知道我在这里做错了什么。

-编辑-

我也在这样做并得到相同的结果。

```
<%
'rnd.asp'
pStr = "private, no-cache, must-revalidate" 
Response.ExpiresAbsolute = #2000-01-01# 
Response.AddHeader "pragma", "no-cache" 
Response.AddHeader "cache-control", pStr
server.execute ("rndj.asp")
response.write ("<hr>")
randomize(3)
server.execute ("rndj.asp")
%>

<%
'rndj.asp'
pStr = "private, no-cache, must-revalidate" 
Response.ExpiresAbsolute = #2000-01-01# 
Response.AddHeader "pragma", "no-cache" 
Response.AddHeader "cache-control", pStr
randomize
response.write rnd
response.write "<br>"
response.write rnd
%> 
```

我开始使用下面的代码，它将指定文件视为纯文本并从中删除 asp 标签，然后使用 Execute 在原始文件中运行它。问题在于我调用的所有页面都在它们中用于其他资源，并且替换脚本不会让我在包含行周围添加 asp 标签。

```
<%
Dim sTargetFile, sTargetFileContents
Dim oFSO, sContents

Function GetFileContentsForExecution(sTargetFile)

'Obtain a reference to the FileSystemObject
Set oFSO = Server.CreateObject("Scripting.FileSystemObject")

'Obtain the file contents
sContents = oFSO.OpenTextFile(Server.MapPath(".") & "\" & sTargetFile).ReadAll
Set oFSO = Nothing 'reference to the FileSystemObject

'Remove the ASP scripting tags
rand = int(rnd * 2) 
sContents = Replace (sContents, "<" & "%", "")
sContents = Replace (sContents, "%" & ">", "")
GetFileContentsForExecution = sContents
End Function

sTargetFile = "rndj.asp"

for j = 1 to 6

'Get the contents of the file to execute
sTargetFileContents = GetFileContentsForExecution(sTargetFile)
Execute sTargetFileContents

next

if j < 3 then 
response.write ("<br/><hr><br/>")
end if
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:41:56.510

[链接到工作解决方案](http://stevenschemers.com/random/rnd.asp)

```
<%
 'rnd.asp'
 randomize

 application("randomseed") = rnd
 server.execute ("rndj.asp")

 application("randomseed") = rnd
 server.execute ("rndj.asp")

%>

<%
 'rndj.asp'
 randomize application("randomseed")
 response.write rnd
 response.write("<br />")
 response.write rnd
 response.write("<br />")
 response.write("<br />") 
```

%>

# picker - 为尚未启用云端硬盘的用户通过选择器访问文件

> ID：10491062
> 
> 赞同：2
> 
> 时间：2012-05-08T00:45:30.887
> 
> 标签：picker, google-drive-api

对于已安装我们的 Chrome 网上应用店应用程序但尚未启用驱动器的用户，我在选择器 api 方面遇到了困难。对于处于这种状态的用户，可以使用 files/insert api 保存新文件，这会返回成功响应，但这些文件不会显示在选择器中。一旦用户启用驱动器，他们之前保存的所有文件都开始显示在选择器中。

这种行为是有意的吗？如果是这样，确定用户是否启用了驱动器的最佳方法是什么，以便我们可以提示用户启用驱动器而不是让它看起来像我们没有保存他们的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:01:10.810

首先，奇怪的是选择器没有为您的未启用驱动器的用户显示文件。

所以我只是用非驱动器帐户测试了选择器，一切都按预期工作......例如，您可以尝试使用 Balsamiq Drive 应用程序[https://chrome.google.com/webstore/detail/pplbmgaodhjmbklkgkgmlghaekcfhhkk](https://chrome.google.com/webstore/detail/pplbmgaodhjmbklkgkgmlghaekcfhhkk)他们正在使用选择器在样机>打开...

安装后你必须去[https://balsamiqgdrive.appspot.com](https://balsamiqgdrive.appspot.com)

我首先创建了一个模型并保存了它。它出现在文档中。然后我尝试了 Balsamiq 中的选择器，我可以看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:27:18.480

目前，选择器和 API 仅在用户已将您的 Drive 应用程序安装到 Chrome 网上应用店时才能工作。

我们理解开发人员所面临的痛苦，我们正在寻求放宽这一限制。

同时，有一种方法可以检查用户是否安装了 Drive 应用程序，为此您需要 OAuth 2.0 访问令牌（因此您的用户需要通过 OAuth 流程并授权您访问他的 Drive 数据） . 然后，您可以简单地尝试读取具有虚假 ID 的文件（比如说 ID“000”或“abcdefghijklmnopqrstuvw”）。如果 API 返回错误["403: The authenticated user has not installed the app with client id {clientId}"](https://developers.google.com/drive/handle-errors#403_the_authenticated_user_has_not_installed_the_app_with_client_id_clientid)，这意味着他尚未安装该应用程序，您应该隐藏 Drive 功能并可能向他展示一些“要利用我们最新的 Google Drive 集成/功能，我们建议您安装我们的 Drive App*链接到 Chrome Web Store 列表*“。[此请求出现“404：找不到文件：{fileId}”](https://developers.google.com/drive/handle-errors#404_file_not_found_fileid)错误。

# java - 如果文件包含Java中的特定数据，则需要从文件中删除一行文本

> ID：10491063
> 
> 赞同：1
> 
> 时间：2012-05-08T00:45:49.347
> 
> 标签：java

我需要能够根据行中的特定文本（不是整行）删除一行。

到目前为止，这就是我所拥有的，但它正在删除整个文件！我可能错过了一个半冒号或一些愚蠢的东西..有人可以帮忙吗？

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Scanner;

public class DeleteStudent 
{

    public static void removeStudentData()
    {
        File inputFile = new File("StudentsII.txt");
        File tempFile = new File("myTempFile.txt");
        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new FileReader(inputFile));
        } catch (FileNotFoundException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }
        BufferedWriter writer = null;
        try {
            writer = new BufferedWriter(new FileWriter(tempFile));
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        CharSequence sID = null;
        String lineToRemove = (String) sID;
        String currentLine;

        Scanner UI = new Scanner(System.in);
        boolean found = false;

        System.out.println("\n***DELETE STUDENT RECORD***\n");
        System.out.println("Enter a student ID: ");
        sID=UI.next();
        try {
            while((currentLine = reader.readLine()) != null)
            {
                String trimmedLine = currentLine.trim();
                if(trimmedLine.contains(sID))
                    continue;
                try {
                    writer.write(currentLine);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        boolean successful = tempFile.renameTo(inputFile);
        Menu.displayMenu();
    }
} 
```

txt 文件包含以下信息...

```
Martha Stewart 123 Freshman
Cindi Lauper 234 Senior
Tina Turner 345 Freshman 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T00:48:27.483

完成编写后，您需要关闭流和文件：

```
writer.close();
tempFile.close();
//etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:04:46.050

使用调试器（或只是 println）来查看您的代码的哪些位正在被执行。例如 print`sID`和`trimmedLine`- 它们是您所期望的吗？

快速浏览一下，我看不到任何实际错误，但有一些风格的东西（这通常可以帮助使代码更具可读性，以便更容易找到错误）

被调用的变量`UI`有点令人困惑——看起来像一个类名或其他东西（由于大写字母）——它是 100% 的合法代码，但你不会看到太多程序员使用这种局部变量的命名约定。

```
if (condition) continue; 
```

有点奇怪 - 我可以看到它有效，但将其写成会更明显

```
if (!condition) { /* write the line */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:43:51.237

简单看一下，我发现下面这段代码很可疑。tempFile.renameTo(inputFile);

原因是临时文件想要重命名为输入文件，但尚未正确关闭。在我看来，这应该会导致文件 IO 错误。

也许明天，我将使用 Eclipse 调试器来确定这个问题。但你也应该这样做。如果您用您对最佳答案的投票来奖励我，那将激励我这样做:)

**问题**如您所说，哪个文件被删除了？我猜是临时文件吗？

祝你好运，

# entity-framework - 审计实体框架中的多对多关系？

> ID：10491066
> 
> 赞同：3
> 
> 时间：2012-05-08T00:46:18.653
> 
> 标签：entity-framework, entity-framework-4.1

我一直在阅读一些关于使用关系管理器来访问具有相关数据的条目的文章。我仍然不清楚当添加或更新相关数据的实体时，最好的审计方式是什么。

示例类：

```
public class Rfi
{
     public Guid Id {get;set;}
     public string Number {get;set;}
     public virtual ICollection<Attachment> Attachments {get;set;}
}

public Class Attachment
{
    public Guid Id {get;set;}
    public string Name {get;set;}
    public string Description {get;set;}
    public string FileName {get;set;}
    public string Path {get;set;}        
} 
```

示例映射：

```
public class RfiMapping: EntityTypeConfiguration<Rfi>
{
     public Rfimapping()
     {
        HasMany(r => r.Attachments).WithMany().Map(m =>
                                                           {
                                                               m.MapLeftKey("RfiId");
                                                               m.MapRightKey("AttachmentId");
                                                               m.ToTable("Rfi_Attachments");
                                                           });
     }
} 
```

我正在使用存储库和工作单元模式。我的 UoW 继承自 DbContext。存储库调用可能如下所示：

```
public void AddAttachmentToRfi(Attachment attachment, Guid rfiId)
{
     var rfi = _rfiRepository.FindById(rfiId);
     rfi.Attachments.Add(attachment);
     _rfiRepository.UnitOfWork.Commit();
} 
```

是否有可能在重写的 SaveChanges 方法中找出附件实体已添加到 Rfi 实体？当我遍历 ChangeTracker.Entries 时，我没有看到它的状态被设置为已修改。这是有道理的，因为我只是添加到关系而不是直接添加实体。

我知道将我的 DbContext 转换为 IObjectContextAdapter，但我不确定我需要对 RelationshipManager 做什么才能对任何关系进行更改。我也很想知道我以后是否要更新附件的描述属性，如果我仍然可以看到对任何相关数据进行了哪些更改。

我的目标是，Rfi 的用户界面允许用户附加文件（Rfi 显然不是唯一可以有附件的实体）。我需要展示 Rfi 发生的所有事情的历史。这意味着如果添加了附件，我需要对其进行审核。如果附件的数据更新了，我需要审核这些更改并显示它们是通过 Rfi 接口更新的。如果该附件与另一个实体共享，这可能会变得复杂，但我稍后会穿过那条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:42:14.947

正如您所说，您不会更改任何实体，只会更改它们之间的关系。

然后，EF 会将其转换为对 Rfi_Attachments 表的插入或删除。

对此进行审核的一种方法是添加一个数据库触发器，该触发器在每次添加或删除条目时将条目写入日志表。

# jquery - 为什么使用内置的 jQuery 事件

> ID：10491068
> 
> 赞同：4
> 
> 时间：2012-05-08T00:46:38.467
> 
> 标签：jquery, jquery-ui, syntax, jquery-events, conventions

我只是想知道是否有人可以指出为什么应该使用 jQuery 事件绑定而不是原生 JavaScript。我的一位同事向我发送了以下代码。

```
document.forms[0].onsubmit = function () {
    if (Page_IsValid) {
        $("#dialog").dialog({
            height: 140,
            modal: true,
            resizable: false,
            title: ''

        });
        $(".ui-dialog-titlebar").hide();
    }
} 
```

我告诉他把它改写为。

```
$(".form").submit(function () {
    if (Page_IsValid) {
        $(".dialog").dialog({ 
            height: 140,
            modal: true,
            resizable: false,
            title: '',
            open: function (event, ui) {
                $(".ui-dialog-titlebar").hide();
            }
        });
    }
}); 
```

但是当被问及为什么要使用我的代码时，除了语法清晰和约定之外，我无法提供任何具体原因。那么还有什么其他原因会使用第二个例子而不是第一个例子吗？如果不是，那么在这种情况下使用 jQuery 的真正优势是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T00:50:02.840

One reason is you don't have to worry about trampling over previously-defined event callbacks. jQuery will queue them up and run all of them.

note: Your rewritten version will also attach the behavior to anything on the page with a class of `form`, while the original version attaches to the first form on the page, regardless of its class. This may not be what you want.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T00:52:10.347

The problem with `onsubmit` event is that only one handler can be set per element and per event. In normal browser you can use `addEventListener` but what IE? Thanks to jQuery you can forget what browser running your script and just add many listeners to one element.

Or one to many, many to many or just one to one like in your first sample.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T00:52:54.877

The second example will do better if there are multiple forms you want add submit functions to. Apart from that there is no technical reason to prefer the second over the former.

Consistency is a good enough reason for the second IMO. Seasoned developers will process either without thought, but green talent may find themselves having to mentally shift gears.

# android - 使用 onCreateOptionsMenu() 时姜饼崩溃？

> ID：10491071
> 
> 赞同：0
> 
> 时间：2012-05-08T00:46:53.497
> 
> 标签：android, android-emulator, actionbarsherlock, android-menu

我的应用在 ICS emu 上运行良好。但是，使用 Gingerbread 时，只要我的 onCreateOptionsMenu 正在使用，它就会崩溃。如果我改用 showPopup，它还会引发另一组类似但不同的错误。有谁知道这里到底发生了什么？**理想情况下，我希望有一点菜单代码（当然不包括监听器），它将为运行应用程序的所有版本的 android 布局一个菜单。**不过，我应该提一下，我有一个 GUI 菜单按钮（作为 ImageView 位于我的 XML 文件中），而不是 ActionBar 中的一个。所以，这里是代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;

} 
```

这是菜单 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:id="@+id/demographics"
              android:title="@string/demographics" />
        <item android:id="@+id/tabSelection"
              android:title="@string/tabs" />            
        <item android:id="@+id/settings"
              android:title="@string/settings" />

</menu> 
```

这是 LogCat：

```
threadid=1: thread exiting with uncaught exception (group=0x40015560)
FATAL EXCEPTION: main
java.lang.IllegalStateException: Cannot interact with object designed for temporary instance passing. Make sure you using both SherlockFragmentActivity and SherlockFragment.
at com.actionbarsherlock.internal.view.menu.MenuMule.add(MenuMule.java:40)
at android.view.MenuInflater$MenuState.addItem(MenuInflater.java:310)
at android.view.MenuInflater.parseMenu(MenuInflater.java:154)
at android.view.MenuInflater.inflate(MenuInflater.java:80)
at com.davekelley.polling.Polling.onCreateOptionsMenu(Polling.java:203)
at android.app.Activity.onCreatePanelMenu(Activity.java:2158)
at android.support.v4.app.FragmentActivity.onCreatePanelMenu(FragmentActivity.java:209)
at com.actionbarsherlock.app.SherlockFragmentActivity.onCreatePanelMenu(SherlockFragmentActivity.java:236)
at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:543)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:467)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:269)
at com.actionbarsherlock.internal.ActionBarSherlockCompat$1.run(ActionBarSherlockCompat.java:972)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:03:50.397

根据这个[答案](https://stackoverflow.com/questions/7847540/imposssible-to-override-oncreateoptionsmenu-in-listfragment)，您需要添加[v4 支持](http://developer.android.com/sdk/compatibility-library.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:32:22.597

所以基本上为了完成这个，我不能使用 showPopup 因为那只在 API 11 及更高版本上。

我在尝试让它在旧版本的 Android 上正常工作时遇到了很多麻烦，至少部分是由于我不完全理解的 ActionBarSherlock 的一些不协调。我使用的哪些导入对于让应用程序在不崩溃的情况下启动非常重要，它们是：

进口com.actionbarsherlock.view.Menu；进口com.actionbarsherlock.view.MenuInflater；进口com.actionbarsherlock.view.MenuItem；

除此之外，我发现另一个 Stack Overflow 帖子突出了 openOptionsMenu 方法。所以在我的片段中，我为我的 menuButton ImageView 添加了一个 onClickListener。当用户点击它时，主活动被告知 openOptionsMenu，它运行 onCreateOptionsMenu。现在 onMenuItemClick 方法似乎没有完成它的工作，但我想我明天可以很快解决这个问题。不过，现在菜单的加载方式有一个不同。它不是直接在 ImageView 顶部弹出，而是在屏幕底部加载（以旧方式或 ICS 中的新垂直菜单）。所以就是这样，但这不是一个大问题。

我认为这几乎涵盖了它。

代码：

```
 ImageView menuImg = (ImageView) activity.findViewById(R.id.menuImageView);
    menuImg.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            activity.openOptionsMenu();
        }
    }); 
```

* * *

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;    
} 
```

* * *

```
public boolean onMenuItemClick(MenuItem item) {
     switch (item.getItemId()) {
        case R.id.demographics:

            return true;
        case R.id.settings:
            Log.v("v", "settings clicked");
            return true;
        default:
            return false;
     }
} 
```

# java - ActionBarSherlock，使用不带标签的 fragmentTabPager 效果

> ID：10491075
> 
> 赞同：0
> 
> 时间：2012-05-08T00:47:57.253
> 
> 标签：java, android, actionbarsherlock, android-actionbar

我正在使用[actionbarsherlock](http://actionbarsherlock.com/index.html)，所以我想在没有丑陋标签的情况下使用 fragmentTabPager 效果。我想使用演示示例中使用的 ActionBar.tab。对我来说，片段很难完全理解，所以我需要一些代码、教程或任何可以帮助我的帮助。

我假装的，就像个人资料下的 google+ 应用操作栏。

这可以合并两个样本吗？

如果是必要的，只是示例代码。我在哪里把片段效果放在这里？

```
setTheme(R.style.Theme_Sherlock); //Used for theme switching in samples
    super.onCreate(savedInstanceState);

    setContentView(R.layout.tab_navigation);
    mSelected = (TextView)findViewById(R.id.text);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    for (int i = 1; i <= 3; i++) {
        ActionBar.Tab tab = getSupportActionBar().newTab();
        tab.setText("Tab " + i);
        tab.setTabListener(this);
        getSupportActionBar().addTab(tab);
    } 
```

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:00:54.750

我不想过多地插入我自己的网站，但我相信我可以在这方面为您提供很多帮助。在过去的一两个月里，我一直在使用 ABS 和 actionbartabs/viewpager。对此感到非常痛苦（听起来你正在经历我所做的事情），我决定在我的网站上发布一两个关于它的教程。到目前为止，它已经帮助了几个人（他们通过电子邮件向我提问等）。

这是我布置的教程：[http ://davidjkelley.net/?p=34](http://davidjkelley.net/?p=34)

还有其他一些与之相关的，但我不想发送垃圾链接并让人们感到不安。如果您有任何问题，请告诉我！

# python - 从游戏制作者到 Python

> ID：10491079
> 
> 赞同：2
> 
> 时间：2012-05-08T00:48:35.647
> 
> 标签：python, 2d, game-maker

我使用 Game Maker 为 Windows 创建简单（而不是简单）的 2D 游戏。

我真的很喜欢它。它易于使用，功能强大，让我可以非常快速地创建游戏。

但现在我知道了 Python。Python是我的新爱。

我现在想用 Python 创建游戏。我想有类似 Game Maker 但里面有 Python 的东西。

谷歌搜索“python游戏引擎”，我发现了这些：

**1) 游戏** 

2) Cocos2D

3) 搅拌机

**4) Python-食人魔**

也许我错了，但我发现：

1) PyGame 并不比 Game Maker 更强大（对于 Windows）。最后一个realese是在2009年。

2) Cocos2D 通常用于用 C# 和 Java 创建手机游戏。它也不比 Game Maker 更强大。

3) Blender 是 3D 引擎。不要认为它比 Game Maker 更容易创建 2D 游戏。

4) Python-Ogre——与 Blender 相同。

那么，你会推荐我什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T11:28:32.787

还有[Kivy](http://kivy.org/#home)，一个跨平台的 Python 框架

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T02:10:35.223

[你错过了一个](http://www.renpy.org/)。如果你需要一些更低级别的东西，它就是下面的 PyGame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T04:00:49.403

两者的结合呢？ [gmpython](http://gmc.yoyogames.com/index.php?showtopic=454433&hl=gmpython)

# objective-c - UIImage resizing not working properly

> ID：10491080
> 
> 赞同：8
> 
> 时间：2012-05-08T00:48:41.367
> 
> 标签：objective-c, ios, cocoa-touch, ios5, ios4

So I've been trying to figure out what I'm doing wrong for a while now and I can't figure it out. What I'm trying to accomplish is this:

1.  Take a photo with `UIImagePickerController`
2.  Take the resulting photo and crop off the top and bottom so it becomes a square (similar to Instagram)
3.  Display that image within a `UIButton`

For some reason, every time I take the photo it ends up distorted within the `UIButton` and it appears as though the cropping didn't work properly. Here's what I do. Within the `didFinishPickingMediaWithInfo` method I have the following code:

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    //Copy the image to the userImage variable
    [picker dismissModalViewControllerAnimated:YES];
    userImage = nil;

    //Rotate & resize image
    userImage = [self resizeAndRotatePhoto:(UIImage *)[info objectForKey:UIImagePickerControllerOriginalImage]];
    NSLog(@"Userimage size, width: %f , height: %f", userImage.size.width , userImage.size.height);

    //Update the image form field with the image and set the image in the controller
    NSLog(@"Button size is height: %f , width: %f" , userImageAvatarButton.frame.size.height , userImageAvatarButton.frame.size.width);
   [userImageAvatarButton.layer setMasksToBounds:YES];
   [userImageAvatarButton.layer setCornerRadius:3.0];
   [userImageAvatarButton setImage:userImage forState:UIControlStateNormal];
} 
```

I'll include the resizeAndRotatePhoto method momentarily but the result is below. Also, in the code above, `@property (strong) (UIImage *)userImage;` is defined in the ViewController's header file. The log output also results in:

```
2012-05-07 17:38:07.995 NewApp[10666:707] Userimage size, width: 1936.000000 , height: 1936.000000
2012-05-07 17:38:08.000 NewApp[10666:707] Button size is height: 60.000000 , width: 60.000000 
```

As you see in the image below, it ends up distorted.
![form with button](../Images/267cc05c280214cee19f6598ce940cb0.png)

As for the resizeAndRotate method, here it is:

```
- (UIImage *)resizeAndRotatePhoto:(UIImage *)source
{
if( source.imageOrientation == UIImageOrientationRight )
{
    source = [self rotateImage:source byDegrees:90];
}
if( userImage.imageOrientation == UIImageOrientationLeft)
{
    source = [self rotateImage:source byDegrees:-90];
}

CGFloat x,y;
CGFloat size;
if( source.size.width > source.size.height ){
    size = source.size.height;
    x = (source.size.width - source.size.height)/2;
    y = 0;
}
else {
    size = source.size.width;
    x = 0;
    y = (source.size.height - source.size.width)/2;
}

CGImageRef imageRef = CGImageCreateWithImageInRect([source CGImage], CGRectMake(x,y,size,size) );
return [UIImage imageWithCGImage:imageRef];
} 
```

At this point I have no idea how to get this image to show up undistorted. It appears to be cropping it wrong and displaying it wrong despite the system saying that the image is indeed a square.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T02:18:52.713

由于其他原因，我放弃了 vocaro.com 解决方案（该解决方案在与非典型图像格式（例如 CMYK）一起使用时会崩溃）。

无论如何，我现在使用`imageByScalingAspectFillSize`以下`UIImage`类别的方法来制作我的方形缩略图。

顺便说一句，这会自动应用设备主屏幕的比例（例如`UIButton`，在 Retina 设备上是 60x60 点的按钮，这将应用 2x（或 3x）的比例，即 120x120 或 180x180 图像）。

UIImage+SimpleResize.h：

```
/*  UIImage+SimpleResize.h
 *
 *  Modified by Robert Ryan on 5/19/11.
 */

@import UIKit;

/** Image resizing category.
 *
 *  Modified by Robert Ryan on 5/19/11.
 *
 *  Inspired by http://ofcodeandmen.poltras.com/2008/10/30/undocumented-uiimage-resizing/
 *  but adjusted to support AspectFill and AspectFit modes.
 */

@interface UIImage (SimpleResize)

/** Resize the image to be the required size, stretching it as needed.
 *
 * @param size         The new size of the image.
 * @param contentMode  The `UIViewContentMode` to be applied when resizing image.
 *                     Either `UIViewContentModeScaleToFill`, `UIViewContentModeScaleAspectFill`, or
 *                     `UIViewContentModeScaleAspectFit`.
 *
 * @return             Return `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingToSize:(CGSize)size contentMode:(UIViewContentMode)contentMode;

/** Resize the image to be the required size, stretching it as needed.
 *
 * @param size         The new size of the image.
 * @param contentMode  The `UIViewContentMode` to be applied when resizing image.
 *                     Either `UIViewContentModeScaleToFill`, `UIViewContentModeScaleAspectFill`, or
 *                     `UIViewContentModeScaleAspectFit`.
 * @param scale        The scale factor to apply to the bitmap. If you specify a value of 0.0, the scale factor is set to the scale factor of the device’s main screen.
 *
 * @return             Return `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingToSize:(CGSize)size contentMode:(UIViewContentMode)contentMode scale:(CGFloat)scale;

/** Crop the image to be the required size.
 *
 * @param bounds       The bounds to which the new image should be cropped.
 *
 * @return             Cropped `UIImage`.
 */

- (UIImage * _Nullable)imageByCroppingToBounds:(CGRect)bounds;

/** Crop the image to be the required size.
 *
 * @param bounds       The bounds to which the new image should be cropped.
 * @param scale        The scale factor to apply to the bitmap. If you specify a value of 0.0, the scale factor is set to the scale factor of the device’s main screen.
 *
 * @return             Cropped `UIImage`.
 */

- (UIImage * _Nullable)imageByCroppingToBounds:(CGRect)bounds scale:(CGFloat)scale;

/** Resize the image to fill the rectange of the specified size, preserving the aspect ratio, trimming if needed.
 *
 * @param size    The new size of the image.
 *
 * @return        Return `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingAspectFillSize:(CGSize)size;

/** Resize the image to fill the rectange of the specified size, preserving the aspect ratio, trimming if needed.
 *
 * @param size    The new size of the image.
 * @param scale   The scale factor to apply to the bitmap. If you specify a value of 0.0, the scale factor is set to the scale factor of the device’s main screen.
 *
 * @return        Return `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingAspectFillSize:(CGSize)size scale:(CGFloat)scale;

/** Resize the image to be the required size, stretching it as needed.
 *
 * @param size    The new size of the image.
 *
 * @return        Resized `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingToFillSize:(CGSize)size;

/** Resize the image to be the required size, stretching it as needed.
 *
 * @param size    The new size of the image.
 * @param scale   The scale factor to apply to the bitmap. If you specify a value of 0.0, the scale factor is set to the scale factor of the device’s main screen.
 *
 * @return        Resized `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingToFillSize:(CGSize)size scale:(CGFloat)scale;

/** Resize the image to fit within the required size, preserving the aspect ratio, with no trimming taking place.
 *
 * @param size    The new size of the image.
 *
 * @return        Return `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingAspectFitSize:(CGSize)size;

/** Resize the image to fit within the required size, preserving the aspect ratio, with no trimming taking place.
 *
 * @param size    The new size of the image.
 * @param scale   The scale factor to apply to the bitmap. If you specify a value of 0.0, the scale factor is set to the scale factor of the device’s main screen.
 *
 * @return        Return `UIImage` of resized image.
 */

- (UIImage * _Nullable)imageByScalingAspectFitSize:(CGSize)size scale:(CGFloat)scale;

@end 
```

UIImage+SimpleResize.m:

```
//  UIImage+SimpleResize.m
//
//  Created by Robert Ryan on 5/19/11.

#import "UIImage+SimpleResize.h"

@implementation UIImage (SimpleResize)

- (UIImage *)imageByScalingToSize:(CGSize)size contentMode:(UIViewContentMode)contentMode {
    return [self imageByScalingToSize:size contentMode:contentMode scale:0];
}

- (UIImage *)imageByScalingToSize:(CGSize)size contentMode:(UIViewContentMode)contentMode scale:(CGFloat)scale {
    if (contentMode == UIViewContentModeScaleToFill) {
        return [self imageByScalingToFillSize:size];
    }
    else if ((contentMode == UIViewContentModeScaleAspectFill) ||
             (contentMode == UIViewContentModeScaleAspectFit)) {
        CGFloat horizontalRatio   = self.size.width  / size.width;
        CGFloat verticalRatio     = self.size.height / size.height;
        CGFloat ratio;

        if (contentMode == UIViewContentModeScaleAspectFill)
            ratio = MIN(horizontalRatio, verticalRatio);
        else
            ratio = MAX(horizontalRatio, verticalRatio);

        CGSize  sizeForAspectScale = CGSizeMake(self.size.width / ratio, self.size.height / ratio);

        UIImage *image = [self imageByScalingToFillSize:sizeForAspectScale scale:scale];

        // if we're doing aspect fill, then the image still needs to be cropped

        if (contentMode == UIViewContentModeScaleAspectFill) {
            CGRect  subRect = CGRectMake(floor((sizeForAspectScale.width - size.width) / 2.0),
                                         floor((sizeForAspectScale.height - size.height) / 2.0),
                                         size.width,
                                         size.height);
            image = [image imageByCroppingToBounds:subRect];
        }

        return image;
    }

    return nil;
}

- (UIImage *)imageByCroppingToBounds:(CGRect)bounds {
    return [self imageByCroppingToBounds:bounds scale:0];
}

- (UIImage *)imageByCroppingToBounds:(CGRect)bounds scale:(CGFloat)scale {
    if (scale == 0) {
        scale = [[UIScreen mainScreen] scale];
    }
    CGRect rect = CGRectMake(bounds.origin.x * scale, bounds.origin.y * scale, bounds.size.width * scale, bounds.size.height * scale);
    CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], rect);
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef scale:scale orientation:self.imageOrientation];
    CGImageRelease(imageRef);
    return croppedImage;
}

- (UIImage *)imageByScalingToFillSize:(CGSize)size {
    return [self imageByScalingToFillSize:size scale:0];
}

- (UIImage *)imageByScalingToFillSize:(CGSize)size scale:(CGFloat)scale {
    UIGraphicsBeginImageContextWithOptions(size, false, scale);
    [self drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
}

- (UIImage *)imageByScalingAspectFillSize:(CGSize)size {
    return [self imageByScalingAspectFillSize:size scale:0];
}

- (UIImage *)imageByScalingAspectFillSize:(CGSize)size scale:(CGFloat)scale {
    return [self imageByScalingToSize:size contentMode:UIViewContentModeScaleAspectFill scale:scale];
}

- (UIImage *)imageByScalingAspectFitSize:(CGSize)size {
    return [self imageByScalingAspectFitSize:size scale:0];
}

- (UIImage *)imageByScalingAspectFitSize:(CGSize)size scale:(CGFloat)scale {
    return [self imageByScalingToSize:size contentMode:UIViewContentModeScaleAspectFit scale:scale];
}

@end 
```

# python - 通过 GAE 上的 webapp2 返回大型/流式响应？

> ID：10491082
> 
> 赞同：2
> 
> 时间：2012-05-08T00:49:25.980
> 
> 标签：python, google-app-engine, webapp2

我正在为 GAE 构建一个 Web 应用程序，登录用户可以在其中下载潜在的大文件。我如何构建这样的响应（或彗星响应）？我相信 webapp2`Response`对象完全缓冲并且没有`flush()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:43:11.673

将文件存储在 blob 中并让用户下载 blob。 [https://developers.google.com/appengine/docs/python/blobstore/overview](https://developers.google.com/appengine/docs/python/blobstore/overview)

# c++ - Constructing string from parameter?

> ID：10491087
> 
> 赞同：0
> 
> 时间：2012-05-08T00:50:13.443
> 
> 标签：c++, class, constructor

I was wondering if yall knew how to construct the parameter "input" i have below so that it can be thrown into a parser and used to create a tree. This is an infix postfix program that is based on classes and uses variable expressions. If you need more info let me know

```
arithmetic_expression::arithmetic_expression(RPNstring input)  //constructor
{

}

arithmetic_expression::arithmetic_expression(const arithmetic_expression &inExpression)
{

} 
```

Rpnstring coming from

```
#ifndef AE_H
#define AE_H

class RPNstring
{
public:
RPNstring(std::string inString){ expression = inString; };
std::string getString(){return(expression);}

private:
std::string expression;
};

class Infixstring
{
public:
Infixstring(std::string inString){ expression = inString; };
std::string getString(){return(expression);};
private:
std::string expression;
};

class arithmetic_expression
{
public:
arithmetic_expression(RPNstring inString);
arithmetic_expression(Infixstring inString);
arithmetic_expression(const arithmetic_expression &inExpression);  //Copy constructor
~arithmetic_expression();  //Destructor
arithmetic_expression & operator=(const arithmetic_expression &inExpression); //assignment          operator
void printRPN();
void printInfix();
int evaluate_Expression(std::map< std::string, int > ipmap); 
```

and

```
RPNstring in1("3  2 + xyz *");
arithmetic_expression expression1(in1);
std::cout<<"Expression 1"<< std::endl;
expression1.printInfix();
expression1.printRPN();
std::cout<<"---- 
```

and inString from

```
class Tree
{
public:
Tree(std::string input,Tree *leftSubTree=NULL,Tree *rightSubTree=NULL);
Tree(const Tree &inTree);   //COPY CONSTRUCTOR
~Tree(); //DESTRUCTOR 
```

and also...

```
Tree::Tree(std::string input,Tree *leftSubTree,Tree *rightSubTree){
Op = input;
leftPtr = leftSubTree;
rightPtr = rightSubTree;
int num;
if (input == "+"|input == "-"|input == "*"|input == "/")
            NodeType = TYPE_OPERATOR;
else if(std::istringstream(Op)>>num)
    NodeType = TYPE_NUMBER;
else
    NodeType = TYPE_VARIABLE; 
```

# javascript - jQuery Mobile 选择菜单数据绑定

> ID：10491089
> 
> 赞同：0
> 
> 时间：2012-05-08T00:50:29.073
> 
> 标签：javascript, data-binding, jquery-mobile, select-menu

页面底部的代码动态填充 jQuery Mobile 选择菜单。除了填充菜单之外，我还想将数据绑定到每个菜单项并分配一个单击处理程序。尝试使用以下行。

```
menuItem.bind("click",{testdata: "test"}, clickHandler); $("#testMenu").append(menuItem); } 
```

这种方法过去曾与 jQuery Mobile 列表一起使用。任何人都可以看到出了什么问题吗？

完整代码：

```
<!DOCTYPE html>
<html xmlns:fb="https://www.facebook.com/2008/fbml">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="fbObj1.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"
    />
    <link rel="stylesheet" href="http://jquerymobile.com/test/docs/buttons/css/themes/default/jquery.mobile.css"
    />
    <link rel="stylesheet" href=http://jquerymobile.com/test/docs/buttons/_assets/css/jqm-docs.css "/>
<link rel="stylesheet "  href="http://jquerymobile.com/test/docs/buttons/css/themes/default/jquery.mobile.css " />  
</head> 
<body> 

<script>

    function clickHandler(e) {
    alert("click ");
    alert(e.testdata);
    };

$(document).ready(function() {
   var int = 0;

        for (int=0;int<=4;int=int+1)
        {
    var menuItem = $("<option id=''></option>"); 
    menuItem.html("Item "+int); menuItem.attr('id',int); 
    //DATA BIND LINE
    menuItem.bind("click",{testdata: "test"}, clickHandler); 
    //menuItem.on("click", {testdata: "test"}, clickHandler);
    $("#testMenu").append(menuItem); 
        }   
    $("#testMenu").selectmenu('refresh');
    $("#testMenu").selectmenu('open'); });
</script>
    <div data-role="page">
        <div data-role="header"></div>
        <div data-role="content">
            <div data-role="fieldcontain" id="testMenuFC" style="DISPLAY: none">
                <select name="testMenu" id="testMenu" data-native-menu="false"></select>
            </div>
        </div>
    </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:14:31.563

改变

```
menuItem.bind 
```

到

```
$("#testMenu").bind 
```

编辑 ：

```
function clickHandler(e) {
  e.preventDefault();
  alert($(this).val());     
 } 
```

// 我忘了提到“选择菜单”你应该使用“更改”事件而不是“点击”

```
$("#testMenu").on("change",
  {testdata: "test"}, 
  clickHandler); 
}); 
```

编辑2：

```
var i = 0;
        function clickHandler(e) {
            e.preventDefault();
            $(":selected",$(this)).html(i).val(i).parent().selectmenu('refresh');
            alert($(":selected",$(this)).val());
            i++;
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:53:01.910

```
 <link rel="stylesheet"  href="http://jquerymobile.com/test/docs/buttons/css/themes/default/jquery.mobile.css" />  
<link rel="stylesheet" href=http://jquerymobile.com/test/docs/buttons/_assets/css/jqm-docs.css"/>
<link rel="stylesheet"  href="http://jquerymobile.com/test/docs/buttons/css/themes/default/jquery.mobile.css" />  
  </head> 
<body> 

<script>

$(document).ready(function() {

    function clickHandler(e) {
       var listItem = $(":selected",$(this));
       alert(listItem.data("test").first);
       alert(listItem.data("test").second);
    };

var int = 0;

        for (int=0;int<=4;int=int+1)
{
var menuItem = $("<option id=''></option>");
menuItem.html("Item "+int);
menuItem.attr('id',int);
menuItem.data("test", { first: int, second: "hello" })
$("#testMenu").append(menuItem);
} 
$("#testMenu").on("change",{testdata: "test"}, clickHandler); 
$("#testMenu").selectmenu('refresh');    
  $("#testMenu").selectmenu('open');            
});

</script>

<div data-role="page">

<div data-role="header"> 

</div>

<div data-role="content">
<div data-role="fieldcontain" id="testMenuFC" style="DISPLAY: none">
    <select name="testMenu" id="testMenu" data-native-menu="false">
    </select>
</div> 
```

# r - 是否可以不在数据框中显示 NA？

> ID：10491092
> 
> 赞同：2
> 
> 时间：2012-05-08T00:50:48.000
> 
> 标签：r, dataframe, na

我正在尝试创建一个 data.frame，其中某些单元格缺少值。我想知道是否有任何方法可以隐藏 NA，而不是显示 NA？我想要的基本上就像一个方差分析表，如下所示。

```
 x = rnorm(40)    
 y = rep(1:2, each=20)    
 z = rep(c(1,2,1,2), each=10)  
 model1 = lm(x~y * z)  
 model2 = lm(x~y + z)  
 anova(model1, model2)  

 #Analysis of Variance Table
 #Model 1: x ~ y * z
 #Model 2: x ~ y + z
 #Res.Df    RSS Df Sum of Sq      F Pr(>F)
 #1     36 38.931                           
 #2     37 39.248 -1  -0.31705 0.2932 0.5915 
```

输出如上。如果您尝试访问这些空白单元格，您将获得 NA

```
 anova(model1, model2)[1,4]
 #[1] NA 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T01:18:38.607

`print.anova`通过使用 的`na.print`选项来工作`print.default`，如下所示：

```
> x <- matrix(c(101:111/100, NA), nrow=3)
> print(x, na.print="")
     [,1] [,2] [,3] [,4]
[1,] 1.01 1.04 1.07 1.10
[2,] 1.02 1.05 1.08 1.11
[3,] 1.03 1.06 1.09 
```

但是，这仅适用于矩阵，不适用于数据帧。

对于数据帧，将 NA 替换为 "" 的建议很好，但会丢失通常的数字打印；您可以`format.data.frame`在更换前使用。阅读该`print.data.frame`功能以获取更多详细信息。这样做，您也可以替换为 NA 然后使用`na.print`选项，如上。

```
> y <- as.data.frame(x)
> m <- as.matrix(format.data.frame(y, digits = NULL, na.encode = FALSE))
> m[is.na(y)] <- NA
> print(m, na.print="", quote=FALSE)
  V1   V2   V3   V4  
1 1.01 1.04 1.07 1.10
2 1.02 1.05 1.08 1.11
3 1.03 1.06 1.09 
```

看看第四列中的数字是如何排列的？与此相比。

```
> z <- y
> z[is.na(z)] <- ""
> print(z)
    V1   V2   V3   V4
1 1.01 1.04 1.07  1.1
2 1.02 1.05 1.08 1.11
3 1.03 1.06 1.09 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T00:59:03.097

这个问题有点令人困惑。但是我认为您有一个带有 NA 的表，并且您不希望 NA 出现在您提供的 anova 表中？如果这是正确的，您可以索引以查找 NA 并替换为“”：

```
(w <- data.frame(anova(model1, model2))) #your example as a data frame with NAs
w[is.na(w)] <- ""                        #index to find NAs and replace with ""
w 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T20:44:25.280

Aaron 的答案（这是一个很好的答案）依赖于`print.default`- 我发现这不太理想，因为我需要使用`row.names = FALSE`，仅在`print.data.table`. （并且`quote=FALSE`是默认设置`print.data.table`，所以那里少了一件需要担心的事情。）

您不必将 data.table 转换为矩阵，您可以将其转换为字符列表并返回 data.frame，如下所示：

```
prettyPrintDf <- function(df, ...) # My function
  print(format.data.frame(data.frame(lapply(df, as.character)), na.encode = FALSE), 
        na.print="", ...) 
```

所以给定一个像这样的data.frame

```
some_df <- data.frame(a = c(1,2,NA), b = c(4,NA,6), c = letters[1:3]) 
```

你可以做：

```
> prettyPrintDf(some_df, row.names=FALSE)
 a b c
 1 4 a
 2   b
   6 c 
```

# php - Apache Rewrite 打破 PHP SuperGlobals

> ID：10491093
> 
> 赞同：1
> 
> 时间：2012-05-08T00:50:49.390
> 
> 标签：php, apache, mod-rewrite

我有一个很奇怪的谜团。我有一个相当简单的 Apache Rewrite，出于某种奇怪的原因，它弄乱了我的 php Superglobals。首先Rewrite如下：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

当此规则到位时，唯一的超全局变量是 $_GET 和 $_REQUEST（当然 $REQUEST 会这样做，因为它是从 $_GET，... 获取它们的）。无论我在 URL 中输入什么，我都只会收到 /index_php 作为唯一的键，它没有任何价值。起初我以为我的代码搞砸了，但作为索引文件的第一行，我尝试了以下操作：

```
foreach($_GET as $key => $value)
{
    echo "$key = $value<br/>";
}
foreach($_POST as $key => $value)
{
    echo "$key = $value<br/>";
}
foreach($_REQUEST as $key => $value)
{
    echo "$key = $value<br/>";
} 
```

唯一打印的是“/index_php =”两次。我之前已经搞砸了几次重写，但显然我做错了。作为旁注，这是我的预期行为：

```
URL: localhost/users/dashboard?item=id 
```

这会给我 $_GET 超全局键：项目，值：id。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T00:52:37.903

您需要在重写规则中传递原始查询字符串：

```
RewriteRule ^(.*)$ index.php?/$1 [L,QSA]
                                    ^^^ 
```

这样，无论您将来可能添加什么新值，旧值也会被传递。

# .net - Accessing other entities from an EF Code-First POCO

> ID：10491094
> 
> 赞同：1
> 
> 时间：2012-05-08T00:50:55.127
> 
> 标签：.net, entity-framework-4, ef-code-first, poco

I have a data model which I've created using Entity Framework Code First POCO objects.

In one of my classes, I'd like to add a method 'GetUsefulInfo'.

In order to implement this method, I need to run queries against other entities in the data model.

The question is, how should I get hold of the data context from within this method? Do I need to pass it in as a parameter to the method? It feels like there should be a way to implement this without having to ask the consumers of this class do this?

Thanks, - Chris

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:04:33.123

这看起来很适合`UserRepository`.

通常，存储库使用某种依赖注入来保存对您的上下文的引用，或者只是对您的 DataContext 的私有引用。

在那里，您可以查询任何存储库以收集所需的信息。

示例代码：

```
public class UserRepository : IUserRepository
{
    private readonly EntityFrameworkDataContext database =
                                                     new  EntityFrameworkDataContext();

    public User GetUserFullInfo()
    {
        try
        {
            // Your DataContext queries to return the User and all his info...
        }
        catch
        {
            // Whaterver...
        }
    }

} 
```

# php - Wordpress - 类别列表不起作用

> ID：10491095
> 
> 赞同：0
> 
> 时间：2012-05-08T00:50:59.400
> 
> 标签：php, wordpress

我有一个有趣的。我有一个 WP 网站，我需要获取一个类别列表以从中构建菜单。我一直在环顾四周，看起来我正在使用最认可的工作代码，而且在本地，它工作得很好。但是，一旦我将它上传到我的托管服务器 (MediaTemple)，我发现它并没有像我预期的那样生成列表。我有两个站点（本地，MT）设置几乎相同，唯一的区别是 MT 上的站点有更多类别。

这是我所拥有的：

```
 <?php 
    $args=array(
      'orderby' => 'name',
      'order' => 'ASC'
      );
    $categories=get_categories($args);
    ?> 
```

然后再往下：

```
 <ul id="categorySubmenu">
                <?php
                foreach($categories as $cat) {
                ?>
                    <li><?php echo "<a href='" . get_category_link($cat->term_id) . "'> $cat->cat_name </a>"  ?></li>
                <?php
                }
                ?>
            </ul> 
```

在本地站点中，我得到了 WP 中所有类别的列表（本地只有 2 个），但是，在托管站点中，我没有得到任何返回（没有列出，只是一个空的`<ul></ul>`）

看起来很基本的东西。有什么我想念的吗？！？！

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:11:22.657

你可以改变：

```
get_category_link($cat->term_id) 
```

到：

```
get_category_link($cat->cat_ID) 
```

或者您可以简单地使用：

```
wp_list_categories(); 
```

# asp.net-mvc-3 - MVC3 用户认证链接

> ID：10491096
> 
> 赞同：0
> 
> 时间：2012-05-08T00:51:08.973
> 
> 标签：asp.net-mvc-3, entity-framework, asp.net-membership

在我的应用程序中，我有一个可以创建`Tournament`对象的管理员。创建对象时，服务还会创建一个用户（基于创建时输入的锦标赛主管信息）。用户的用户名是导演的邮箱，密码是随机生成的，然后邮寄给导演。

当主管使用他的电子邮件地址和密码登录时，我需要能够将他链接到他自己的锦标赛，以便只允许他编辑他自己的锦标赛的详细信息。我试图找到一种方法将其存储`TournamentId`在默认的 ASP Net Users 数据库中，但没有成功。

我看了一下[这个](https://stackoverflow.com/questions/4237394/asp-net-mvc-3-using-authentication/4692843#4692843)SO question 这肯定会对我有所帮助，但我不知道它如何适用于我的问题。当用户登录时，我无法将其放入用户数据`TournamentId`中，因为我不知道。

然后我应该在`Tournament`表中查找哪个 ID 对应于登录时输入的电子邮件地址并将其存储在 userData 中吗？这种方式看起来很不雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:08:50.180

我想您应该在 Tournament 表中有一个 CreatedBy 列，您可以在其中存储创建比赛的用户的 ID。然后当用户登录时，获取他的 id（可能来自会话，如果你将它存储在那里），做一个选择查询`where CreatedBy=loggedInUserId`。这应该可以解决问题。

# javascript - 在 Underscore.js 模板中连接 @Url.Content 的字符串

> ID：10491099
> 
> 赞同：0
> 
> 时间：2012-05-08T00:51:36.157
> 
> 标签：javascript, templates, underscore.js

我无法为 @Url.Content 方法准备字符串 url。

这是我来自下划线模板的代码块

```
 <%  var imgId = "~/Content/images/" +pocket.get('imageId'); %>   
        <div class="image1">       
            <% alert(imgId); %>         
            <img src= "@Url.Content("+<% imgId %>+")"  alt="Assigned Details" /> 
```

我将通过口袋对象传递“imageId”。

我也尝试使用以下方法。获取 imgId 变量的编译错误

`<img src= "<%= @Url.Content(string.Format("~/Content/Images/{0}", imgId)) %>" />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:44:30.800

您用于`<% ... %>`在 Underscore 模板中评估一些 JavaScript，但`<%= ... %>`如果您希望输出以结果结束，则使用；来自[精美手册](http://underscorejs.org/#template)：

> 模板函数既可以使用 插入变量，也可以使用`<%= … %>`执行任意 JavaScript 代码`<% … %>`。

您希望将`imgId`值插入结果中，因此您需要：

```
<img src= "@Url.Content("+<%= imgId %>+")"  alt="Assigned Details" /> 
```

简化演示：http: [//jsfiddle.net/ambiguous/9gyKC/](http://jsfiddle.net/ambiguous/9gyKC/)

大概`@Url.Content`是在服务器上运行以生成`src`给定资源的属性的东西。如果是这种情况，那么您将不得不重新考虑它是如何工作的；这些东西在执行*后*`<%= ... %>`发生在浏览器中，所以当下划线模板运行时为时已晚。您对此错误的说明： *`@Url.Content``imgId`*

 *```
<img src= "<%= @Url.Content(string.Format("~/Content/Images/{0}", imgId)) %>" /> 
```

支持这个理论。您的服务器代码不知道是什么`imgId`，只有客户端 JavaScript 知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T01:35:28.670

**解决方案：** 最后我从另一个线程中找到了解决方案：[Call js function from underscore template](https://stackoverflow.com/questions/4745940/url-content-like-method-in-jquery-or-javascript) 1\. js function

```
<script type="text/javascript">
var fullPath = '@HttpContext.Current.Request.Url.Scheme://@HttpContext.Current.Request.Url.Authority';
function GetPath(url) {
    return fullPath + url;
} 
```

2.  从您的代码中调用 js：`<img src= '<%= GetPath(imgId) %>' alt="Med Assigned" />`*

# r - 对 R 中的值范围求和（不使用 for 循环）

> ID：10491100
> 
> 赞同：2
> 
> 时间：2012-05-08T00:52:01.207
> 
> 标签：r

你如何在 R 中执行这样的求和？

```
sum_{i=1}^3 (x^2)

i=1 is lower bound
i=3 is upper bound
x^2 is the operation 
```

所以我们会表演

1^2 + 2^2 + 3^2

使用标准循环：

```
tot <-0
for (x in 1:3) {
  tot <- tot + x^2
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:05:33.803

首先，我将指出要生成一个包含`1,2,3`您可以执行的元素的向量：

```
x <- 1:3 
```

其次，R 是一种矢量化语言 - 意思是 if`x`是一个矢量，我这样做`x + 5`会为我的每个元素添加 5，而不*需要*`x`for 循环。

```
# Recalling that "x <- x + 5" is the same as
for ( i in 1:length(x) ) {
    x[i] <- x[i] + 5
}
# try to do something that makes  x squared, i.e. x == c(1,4,9). 
```

第三，看`?sum`，从而`sum(x)`将 中的所有元素相加`x`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T03:21:25.617

```
the_answer <- sum( (1:3)^2 ) 
```

For 循环在上个世纪是如此。

# php - 如果允许用户上传的所有文件类型扩展名存在安全风险

> ID：10491103
> 
> 赞同：0
> 
> 时间：2012-05-08T00:52:31.910
> 
> 标签：php, security, codeigniter, file-upload

**背景：**我有一个网站，人们可以在其中存储交易。作为交易的一部分，他们可以根据需要附上收据。

**问题：**如果允许用户将任何类型的文件扩展名上传到我的网站，是否存在任何安全风险？

**信息：**

*   用户将是唯一重新下载相同文件的人
*   用户将没有机会“运行”文件
*   他们只能将其下载回给自己。
*   没有其他用户可以访问其他用户的文件
*   说会有大小限制（比如2mb）

**更多信息：**我最初打算将文件限制为“pdf/doc/docx” - 但后来意识到有些人可能想要存储 jpg 或 .xls 等 - 并意识到他们“可能”想要的文件列表店面挺大的。。。

**编辑：**该文件将存储在 public_html 之外-并通过接受文件名（不是路径）的“readfile（）”函数提供服务-那么有什么可以“扰乱”readfile（）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T00:56:51.220

“用户将没有机会“运行”该文件”

只要您 100% 确定这将成立，它就是安全的。但是，请确保该文件将无法由网络服务器执行。例如，如果用户上传一个 .php 文件，请确保服务器不执行它。

计算机本身不会神奇地运行程序，所以基本上你只需要确保用户没有能力欺骗你的服务器运行文件。这意味着如果文件位于 Web 根目录下，则确保禁用正确的处理程序，或者如果文件不在则通过代理脚本传递它们（基本上`echo file_get_contents('/path/to/upload')`使用其他一些逻辑）

另一种选择是像这样存储文件，`name.upload`但这需要保留一个映射到存储名称的原始名称列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T00:57:51.523

是的，除非您采取预防措施，否则这绝对是一种安全风险。可以说，要重新下载文件，用户必须转到`example.com/uploads/{filename}`. 用户可以上传恶意 PHP 文件，然后通过转到`example.com/uploads/malicious.php`. 当然，这会导致 PHP 脚本在您的服务器上执行，从而使他有足够的能力彻底破坏一切。

为防止这种情况，请创建一个接收文件名作为参数的页面，然后使用正确的`content-type`.

就像是，`example.com/files?filename=malicious.php`

# ruby-on-rails - Rails：2个脚手架模型的嵌套形式？

> ID：10491105
> 
> 赞同：0
> 
> 时间：2012-05-08T00:52:32.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, nested-forms, nested-attributes

如何为 2 个脚手架模型创建嵌套表单？

我有一个教学大纲模型，其中包含许多任务。以前，创建任务的唯一方法是通过 Syllabus 嵌套表单（我使用 Railscasts 制作的）。昨天，我决定用户应该能够自己创建任务，所以我在跳过迁移的同时搭建了任务，因此它为现有任务模型创建了所有控制器和视图。

**所以问题来了：**我现在可以自己创建任务，但是当我尝试通过教学大纲嵌套表单创建任务时，它给了我一个错误“*未定义的方法 `difficulty' for #<\Mission:0xb372ffc.>* ”猜测它正在尝试将 Syllabus 属性传递给 Missions 属性，该属性未在 Missions 模式中定义。（难度仅是教学大纲的属性）。

总结一下：当我只有任务模型时，嵌套表单与“构建器”一起使用，但是当我为任务搭建脚手架使其可以独立存在时，我无法使用嵌套表单。

因为有不止几个文件可能会影响到这一点，所以我创建了一个要点。 **https://gist.github.com/2631734**

顺便说一句，这些是应该传入的参数

```
{"utf8"=>"✓",
"authenticity_token"=>"YxkzNmIJl0jBA467tdHP2zqNv22DgKrzSx+WCFgwKtk=",
"syllabus"=>
    {"category"=>"Technology and Internet",
    "difficulty"=>"Beginner",
    "title"=>"missions testing",
    "description"=>"deccrip",
    "missions_attributes"=>
        {"0"=>
            {"_destroy"=>"false",
            "title"=>"plz",
            "content"=>"<p>\r\n\tdad</p>\r\n"
            }
        }
    },
    "commit"=>"Create Syllabus"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:17:02.463

我最好的猜测`creations`是

```
current_user.creations.build(params[:syllabus]) 
```

指的是任务的集合而不是教学大纲。如果没有完整的错误和用户模型，它很难确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T00:48:35.047

我想通了，但它真的很混乱......我确信有更好的方法来做到这一点，但在为此苦苦挣扎了几天之后，我对这个解决方案非常满意：

```
 @syllabus = Syllabus.new(:title => params[:syllabus][:title], :category => params[:syllabus][:category], :difficulty => params[:syllabus][:difficulty], :description => params[:syllabus][:description], :author_id => current_user)

  @syllabus.save!

  params[:syllabus][:missions_attributes].each do |a, b|

    @mission = Mission.new(:title => b[:title], :content => b[:content], :syllabus_id => @syllabus.id, :author_id => current_user, :category => @syllabus.category)

    @mission.save!

    end 
```

# javascript - Underscore js times series

> ID：10491113
> 
> 赞同：1
> 
> 时间：2012-05-08T00:53:05.750
> 
> 标签：javascript, node.js, asynchronous, backbone.js, underscore.js

I'm using UnderscoreJs with nodejs and have a need for the [`_.times()`](http://underscorejs.org/#times) method. times() will invoke a function X number of times

This works as expected, however I need to iterate in a series, instead of in parallel which this appears to be doing.

Any idea if there's a way to use this in series w/ callback methods?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:26:51.520

Given something like this:

```
function f() {
    some_async_call({ callback: function(err, results) {...})
}
_(3).times(f); 
```

Then the three `f` calls will happen in series but the `some_async_call` calls won't necessarily happen in series because they're asynchronous.

If you want to force your calls to run in series then you need to use the callback on the async call to launch the next one in the series:

```
function f(times, step) {
    step = step || 0;
    some_async_call({
        callback: function(err, results) {
            // Do something with `err` and `results`...
            if(step < times)
                f(times, step + 1);
        }
    });
}
f(3); 
```

That approach will execute the three `some_async_calls` in series but, alas, the initial `f(3)` will return immediately. One solution to that problem is, of course, another callback:

```
function f(from_n, upto, and_finally) {
    some_async_call({
        callback: function(err, results) {
            // Do something with `err` and `results`...
            if(from_n < upto)
                f(from_n + 1, upto, and_finally);
            else
                and_finally();
        }
    });
}
f(0, 3, function() { console.log('all done') }); 
```

Where does `_.times` in with all this? No where really. [`_.times` is just a `for` loop](https://github.com/documentcloud/underscore/blob/master/underscore.js#L891):

```
_.times = function(n, iterator, context) {
  for (var i = 0; i < n; i++) iterator.call(context, i);
}; 
```

`_.times` exists for completeness and to allow you to add `for` loop when using [`_.chain`](http://documentcloud.github.com/underscore/#chain). You could probably shoe-horn it in if you really wanted to but you would be making a big ugly mess instead of simplifying your code.

You could use 250R's async idea but you'd have to build an array of three functions but [`_.range`](http://documentcloud.github.com/underscore/#range) and [`_.map`](http://documentcloud.github.com/underscore/#map) would be more appropriate for that than `_.times`:

```
// Untested off the top of my head code...

function f(callback) {
    some_async_call({
        callback: function(err, results) {
            // Deal with `err` and `results`...
            callback();
        }
    });
}

var three_fs = _(3).range().map(function() { return f });
async.series(three_fs); 
```

But you still have to modify `f` to have a callback function and if you're always calling `f` three times then:

```
async.series([f, f, f]); 
```

might be better than dynamically building the array with `_.range` and `_.map`.

The real lesson here is that once you get into asynchronous function calls, you end up implementing all your logic as callbacks calling callbacks calling callbacks, callbacks all the way down.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:22:11.420

This **async** library might get you started [https://github.com/caolan/async#series](https://github.com/caolan/async#series)

Or if you want to do it yourself, the idea is to do recursive calls after each function callback is called, here's the source code [https://github.com/caolan/async/blob/master/lib/async.js#L101](https://github.com/caolan/async/blob/master/lib/async.js#L101)

# iphone - Export Configuration Profiles from iOS

> ID：10491114
> 
> 赞同：6
> 
> 时间：2012-05-08T00:53:27.697
> 
> 标签：iphone, certificate, export, profile

I have a profile on my iPhone that is no longer available elsewhere. However, I would like to install this profile on my iPad. Is there any way to export these certificates? I tried grabbing the TrustCore.sqlite3 file form my iPhone and putting it on my iPad, replacing the one that was there previously, but that did not work after rebooting my iPad. I also tried using the iPhone Configuration Utility but it doesn't allow me to export individual certificates. Does anyone have any idea how I would go about doing this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:47:01.637

AFAIK，您无法从设备中获取准确的配置文件。我也尝试过越狱手机，但找不到快速解决方案。我认为它的安全性由 Apple 提供。否则，任何人都可以检索已安装的配置文件并对其进行修改并重新安装。

@obuseme 给出的答案是用于配置文件。你可以按照他所说的那样得到它们。配置文件不同于配置文件。

# php - CRON 不工作

> ID：10491115
> 
> 赞同：0
> 
> 时间：2012-05-08T00:53:33.343
> 
> 标签：php, cron

我将以下 php 代码设置为作为 CRON 作业运行。它每天运行一次并且从不返回错误，所以我认为它运行正常。问题是，这些行没有从我的数据库中删除！

我已经测试了 php 并且变量工作。我已经测试了我的查询并且它也有效，所以我很茫然......

```
<?php
$isCLI = ( php_sapi_name() == 'cgi-fcgi' );

if (!$isCLI)
    die("cannot run! sapi_name is ".php_sapi_name());
exit;

//Connect to DB
mysql_connect("xxxxxx.com", "xxxxxxxxxx", "xxxxxxxxxxxx") or die(mysql_error());
mysql_select_db("xxxxxxxxxxx") or die(mysql_error());

//Get today's date
$todayis = date("Y-m-d");
$todayis = strtotime(date("Y-m-d", strtotime($todayis)) . " -4 hours");
$todayis = date('Y-m-d', $todayis);

//Delete rows in userContests where reminder is less than or equal to today's date
mysql_query("DELETE FROM userContests WHERE reminder <= '$todayis';") or die(mysql_error());
?> 
```

有人可以向我解释为什么这些行不会删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:56:25.437

如果这是整个脚本，我会说你忘记了连接到数据库。

**编辑：**这似乎是问题所在：

```
if (!$isCLI)
    die("cannot run! sapi_name is ".php_sapi_name());
exit; 
```

这转化为：

```
if (!$isCLI) 
{
    die("cannot run! sapi_name is ".php_sapi_name());
}

exit; 
```

所以基本上你总是在第 6 行停止你的脚本，之后什么都不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T00:56:53.623

如果是 CRON 作业，则应该使用`PHP-CLI`not `PHP-CGI`。您可以将其添加到文件顶部以进行正确检查。

```
<?php if(PHP_SAPI != 'cli') throw new Exception('Not in CLI mode!');

... 
```

# php - 如何将电子邮件排队并通过 PHPMailer 发送？

> ID：10491116
> 
> 赞同：2
> 
> 时间：2012-05-08T00:53:44.937
> 
> 标签：php, phpmailer

每个人

背景：我正在使用 phpmailer 发送电子邮件。为一组用户注册到我们的系统。所以管理员点击注册，所有的电子邮件（100+）都应该发送到他们的邮箱。

问题：管理员不能等待很长时间才能等待系统响应。此外，系统将在 30 秒后报告超时。

现在，只有前 6 或 7 封电子邮件发送成功。其他邮件会因为超时而发送失败。

问题：那么，如何解决这个问题？

很多谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:03:48.473

您可以使用[set_time_limit](http://php.net/manual/en/function.set-time-limit.php)来增加允许脚本运行的时间，还可以查看[我如何使用 PHP 实现此场景？](https://stackoverflow.com/questions/10403521/how-do-i-implement-this-scenario-using-php/)

# html - HTMLTidy - 样式表需要测试

> ID：10491121
> 
> 赞同：0
> 
> 时间：2012-05-08T00:54:54.623
> 
> 标签：html, css, firefox, htmltidy

我更改了 HTMLTidy 选项中的可访问性级别，现在我收到“访问警告”，上面写着

```
Access: [6.1.1.1]: style sheets require testing (link) (Priority 1) 
```

“解决方案”非常无用：

![在此处输入图像描述](../Images/674e4090b27565955dc32a81de69c52f.png)

**如何以正确**的方式清理它（而不是通过切换设置或关闭选项）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:55:31.247

没有办法清理它，因为警告是指无法自动测试的问题（如果有的话）。每当页面使用样式表时，Tidy 都会发出警告。这确实是一个非常普遍的提醒。

消息基本上是这样的：关闭样式表，并检查页面是否仍然有效。在 Firefox 上，您可以轻松关闭样式表（通过 View 菜单；使用 Web Developer Extension，您还可以关闭单个样式表）。

请注意，Tidy 对“WAI 1.0”（即 WCAG 1.0）的引用已过时；WCAG 1.0 于 2008 年被[WCAG 2.0](http://www.w3.org/TR/WCAG20/)取代，HTML 技术文档已被[WCAG 2.0 技术](http://www.w3.org/TR/WCAG20-TECHS/)取代。WCAG 2.0 与 WCAG 1.0 非常不同。

# ruby - 下载文件循环列表 - net/http

> ID：10491122
> 
> 赞同：1
> 
> 时间：2012-05-08T00:55:05.973
> 
> 标签：ruby, loops, download

```
 require 'net/http' 
 1.upto(99) do |novel|
    puts "Downloading ##{novel}..."
    Net::HTTP.start("http://www.nbc.com") do |http|
      resp = http.get("/heroes/novels/downloads/Heroes_novel_0#{novel}.pdf")
      open("Heroes_novel_#{novel}.pdf", "w") do |file|
        file.write(resp.body)
      end
    end
    puts "Next..."
    puts
 end
puts "Okay, Sneak it's done!" 
```

当我运行我的脚本时，我得到了这些错误：

> C:/Ruby192/lib/ruby/1.9.1/net/http.rb:644:in `initialize': getaddrinfo: No such host is known. (SocketError) from C:/Ruby192/lib/ruby/1.9.1/net/http.rb:644:in`open' 来自 C:/Ruby192/lib/ruby/1.9.1/net/http.rb:644:in `block in connect' from C:/Ruby192/lib/ruby/1.9.1/timeout.rb:44:in`timeout' 来自C:/Ruby192/lib/ruby/1.9.1/timeout.rb:89:in `timeout' from C:/Ruby192/lib/ruby/1.9.1/net/http.rb:644:in`connect' from C:/Ruby192/lib/ruby/1.9.1/net/http.rb:637:in `do_start' from C:/Ruby192/lib/ruby/1.9.1/net/http.rb:626:in`start' from C: /Ruby192/lib/ruby/1.9.1/net/http.rb:490:in `start' from heroes.rb:5:in`block in ' from heros.rb:3:in `upto' from heroes.rb:3:in`'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:03:16.513

您需要将正确的参数解析为`start()`. 它需要一个主机和一个端口。最简单的方法是首先创建一个 URI 对象。

```
uri = URI('http://www.nbc.com')
Net::HTTP.start(uri.host, uri.port) do |http|
  #do some get requests and handle it
end 
```

这转化为`Net::HTTP.start("www.nbc.com", 80)`

# delphi - 使用字符串形式的类名确定 Delphi 6 类对象是否是派生类？

> ID：10491125
> 
> 赞同：4
> 
> 时间：2012-05-08T00:55:25.063
> 
> 标签：delphi, class, inheritance, rtti

出于记录和报告的原因，我创建了具有属于异常的类名和消息的对象。我这样做是为了不必管理 Exception 对象的生命周期。我想做的是恢复 RTTI 识别的优点，它允许您使用Delphi 6 中的“ **is ”运算符判断对象是否从给定类派生。**

有没有办法使用字符串形式的类名来判断字符串包含的类是否派生自另一个类？

假设我有一个对象的类存储在 strClassName 中，并且该类是“derivedClass”。此外，derivedClass 是从 baseClass 派生的。有没有我可以编写的函数来判断 strClassName 中字符串形式的类是否派生自 baseClass？例如：

```
// Hypothetical function that returns TRUE if the class in strClassName is
//  derived from the class passed in theBaseClass
function isDerivedClass(strClassName: string; theBaseClass: TAnyClass): boolean; 
```

该方法的主体会是什么样子？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T01:09:18.303

```
function isDerivedClass(strClassName: string; theBaseClass: TClass): boolean;
begin
  Result := FindClass(strClassName).InheritsFrom(theBaseClass);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  RegisterClass(TLabel); // must be registered to be found by FindClass/GetClass

  if isDerivedClass('TLabel', TWinControl) then
    .. 
```

如果您不希望在找不到名为“strClassName”的类时引发异常，请使用`GetClass`代替`FindClass`：

```
function isDerivedClass(strClassName: string; theBaseClass: TClass): boolean;
var
  aClass: TClass;
begin
  Result := False;
  aClass := GetClass(strClassName);
  if Assigned(aClass) then
    Result := aClass.InheritsFrom(theBaseClass);
end; 
```

# java - ThreadLocal 用于多线程访问 SimpleDateFormat

> ID：10491135
> 
> 赞同：2
> 
> 时间：2012-05-08T00:57:48.653
> 
> 标签：java, thread-safety, simpledateformat, thread-local

`SimpleDateFormat`我有许多 Java 日期模式，并希望通过静态引用在不同线程的对象中多次重用它们以提高速度。

代码看起来像这样（在一个名为 的类中`FormatClass`）：

```
private static String[] PATTERNS = new String[] {...};

public ThreadLocal<SimpleDateFormat[]> LOCAL_FORMATS = new ThreadLocal<SimpleDateFormat[]>
{
    @Override
    protected SimpleDateFormat[] initialValue()
    {
        List<SimpleDateFormat> formatList = new ArrayList<SimpleDateFormat>();

        for (String pattern:PATTERNS)
        {
            formatList.add(new SimpleDateFormat(pattern);
        }

        return formatList.toArray(new SimpleDateFormat[0]);
    }
} 
```

使用上面的代码，另一个类的方法可以`format`（或`parse`）多个日期字符串，如下所示：

```
public static void printFormatted(String date)
{
    for (SimpleDateFormat sdf:FormatClass.LOCAL_FORMATS.get())
    {
        System.out.println(sdf.format(date));
    }
} 
```

该`printFormatted()`方法可能是静态的，也可能不是静态的，但肯定会被多个不同的线程访问。

上述方法会按预期工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:15:00.233

直接回答您的问题：是的，每个线程都会有自己独特的副本，如 SimpleDateFormat 文档中所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:08:09.850

它看起来很不错，但是您可以使用多线程程序轻松测试它。只需打印线程的 ID ( `Thread.currentThread().toString()`)`System.identifyHashCode(simpleDateFormat)`并验证您是否为每个线程获取了唯一的副本并适当地重用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T07:42:19.333

这很好用，但代码相对复杂。我建议检查一下您是否可以将 SimpleDateFormat 分配给方法内的某个局部变量（始终是线程本地的）。当许多值在一个循环中格式化，然后可以在同一个方法中时，这很有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T17:54:08.880

我认为还有一种更优雅的方法，目前还没有人提出过——只需为 SimpleDateFormat 创建一个替换包装类，以同步对其方法的访问。在大多数情况下，我认为同步开销并不比 ThreadLocalMap 中的哈希查找差。

# java - Glassfish 安全领域基于 URL

> ID：10491138
> 
> 赞同：0
> 
> 时间：2012-05-08T00:58:07.947
> 
> 标签：java, spring, security, glassfish

我正在开发一个 RESTFul API，它需要根据调用的 URL 对不同领域的用户进行身份验证。例如，如果调用 /service1，则需要在 JDBCRealm 上进行身份验证，但如果调用 /service2，则需要在 LDAPRealm 上进行身份验证。

此外，我希望能够配置（数据库或配置文件）哪个 url 使用哪个领域。如果可能的话，这种配置不需要重新部署我的战争。

你知道我怎么能做到这一点吗？

我正在使用带有 Jersey 和 Spring 3.0.5 的 Glassfish 3.1.2

谢谢，祝你有美好的一天！

——
塞缪尔·迪翁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:06:36.763

您可以为其添加一个单独的层，以便它在每次身份验证时将请求转发到正确的设备。实际上，如果您是一家大型企业，这对于 IBM DataPower 设备来说是一个很好的用例，如果不是简单的代理服务器也可以为您完成这项工作。

# ruby-on-rails - 多对多关联的视图 [ Rails ]

> ID：10491139
> 
> 赞同：0
> 
> 时间：2012-05-08T00:58:25.360
> 
> 标签：ruby-on-rails, associations

我是 Ruby on Rails 的新手，并试图通过编写自己的项目来学习这种艰难的方式。

我有一个测试包含许多问题的场景，并且问题也可以在其他测试中重用。所以我创建了类似这样的模型。

```
 class Test < ActiveRecord::Base
    has_many :test_problems
    has_and_belongs_to_many :problems
    has_many :problems, :through => :test_problems

    belongs_to :user

    attr_accessible :name, :user_id, :reusable
  end

class Problem < ActiveRecord::Base
    belongs_to :user
    has_many :test_problems
    has_and_belongs_to_many :tests
    has_many :tests, :through => :test_problems

    attr_accessible :name, :statement, :input, :output, :user_id , :reusable
end

class TestProblem < ActiveRecord::Base
    belongs_to :test
    belongs_to :problem

    attr_accessible :problem_id, :test_id
end 
```

现在我已经测试了我可以在保存后在测试控制器创建中正确添加关联。

```
@test.problems << Problem.find( :last ) 
```

我正在寻找用户在创建新问题时如何在他的测试中添加许多问题的方法。我无法编写处理此问题的视图和控制器代码。需要什么javascript。首先一个解决方案是好的，然后如何使用部分额外来优化它会很棒。

-赫曼特

# php - 如何正确创建联系人页面？

> ID：10491142
> 
> 赞同：1
> 
> 时间：2012-05-08T00:59:09.533
> 
> 标签：php, sql, friend

我想做一个联系人页面。这是我的表结构：

```
Accounts Table: 

1) id
2) User_id
3) Full_name
4) Username
5) Email
6) Password

Contacts Table: 

1) My_id (This is the user who added friend_id)
2) Contact_id (this is the contact who was added by my_id)
3) Status 
```

我的查询看起来像这样：

```
$sid = ID of user who is viewing;

$sql = "SELECT STRAIGHT_JOIN DISTINCT contacts.contact_id, 
accounts.full_name FROM contacts INNER JOIN accounts
on contacts.contact_id = accounts.user_id WHERE 
contacts.my_id = '$sid' OR contacts.contact_id = '$sid'"; 
```

问题是它不能以正确的方式工作。我最终在查询中看到我的名字（这意味着当我登录时，我在联系人中看到我的名字而不是联系人姓名）。

如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:40:52.593

此处的`STRAIGHT_JOIN`关键字不应该是必需的。要获取联系信息，请使用第二个`JOIN`将`contacts`其与帐户相关联的表。

```
SELECT
  DISTINCT c.contact_id,
  cn.full_name
FROM 
  accounts a
  /* first join connects the adding user's id to records in contacts */
  INNER JOIN contacts c ON a.user_id = c.My_id
  /* second join connects contact list user ids back to names in accounts */
  INNER JOIN accounts cn ON cn.user_id = c.Contact_id
WHERE a.User_id = '$sid' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:44:53.513

这个查询应该足够了：

```
SELECT DISTINCT contacts.contact_id, accounts.full_name
FROM contacts, accounts
WHERE (contacts.my_id = '$sid' AND contacts.contact_id = accounts.user_id)
OR (contacts.contact_id = '$sid' AND contacts.my_id = accounts.user_id) 
```

# git - 在 git 中，如何将我的标签与远程服务器同步？

> ID：10491146
> 
> 赞同：78
> 
> 时间：2012-05-08T00:59:44.167
> 
> 标签：git, git-tag

有没有办法让我的本地 git 标签与远程标签保持同步？也就是说 - 不仅在创建时获取新标签（像往常一样，当`fetch`-ing/ `pull`-ing 时），而且修剪不再在遥控器上的标签，并在其他人`git push -f`的标签时删除现有标签。我知道我可以`git fetch remotename`随后`git remote prune remotename`为分支实现类似的行为。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2018-03-10T23:46:37.707

> ...还修剪不再在遥控器上的标签

`git fetch`使用 Git 2.17（2018 年第二季度）是摆脱本地持有的陈旧标签的方便快捷方式。

See [commit 6317972](https://github.com/git/git/commit/6317972cff9b4df7a6cc666b08be7133ba81617c) , [commit 97716d2](https://github.com/git/git/commit/97716d217c1ea00adfc64e4f6bb85c1236d661ff) , [commit e249ce0](https://github.com/git/git/commit/e249ce0ccdb5c57f45a88daa25d24c5b602ee6e9) , [commit 627a129](https://github.com/git/git/commit/627a129b46530773369586f7982925fd41dc7227) , [commit d0e0747](https://github.com/git/git/commit/d0e07472faa938c83e9b1f76567f16614672668c) , [commit 2c72ed7](https://github.com/git/git/commit/2c72ed740f302bf51e6cd0824b8e7cbde1b1e8c2) , [commit e1790f9](https://github.com/git/git/commit/e1790f9245f120940be9333b09015e04a8e73127) , [commit 59caf52](https://github.com/git/git/commit/59caf52d094494a8c02dd7f15302891678533182) , [commit 82f34e0](https://github.com/git/git/commit/82f34e03e91af42a020f15a1d248bc75785c565a) , [commit 6fb23f5](https://github.com/git/git/commit/6fb23f56c16c0981a2f7b46f53ac3af12b247996) , [commit ca3065e](https://github.com/git/git/commit/ca3065e7e7bcb406043f8202ef672f884eeb925d) , [commit bf16ab7](https://github.com/git/git/commit/bf16ab795574c27ffa0fe180cede2d355de41619) , [commit eca142d](https://github.com/git/git/commit/eca142d30818bd9cfc0d3a6b38d6ae4dc4c500a0) , [commit 750d0da](https://github.com/git/git/commit/750d0da9cfbc2519f1ef478d50de0ce549c41f05) , [commit 0711883](https://github.com/git/git/commit/0711883218039750f940d8febf05a81aa46d2ab9) , [commit ce3ab21](https://github.com/git/git/commit/ce3ab21b0c179559621fb7450a6f8c24e0a28ddb) , [commit aa59e0e](https://github.com/git/git/commit/aa59e0eaf65b1e535248f67822053e3b2f5fcc26)（2018 年 2 月 9 日）作者：[Ævar Arnfjörð Bjarmason（`avar`）](https://github.com/avar)。
^(（合并于[Junio C Hamano -- `gitster`--](https://github.com/gitster)在[提交 c1a7902](https://github.com/git/git/commit/c1a7902f9adda4c3a64de99d565cf9982f12b1d9)中，2018 年 3 月 6 日）)

> ## **fetch** : 添加`--prune-tags`选项和`fetch.pruneTags`配置

> 添加一个`--prune-tags`选项到`git-fetch`，以及`fetch.pruneTags`配置选项和`-P`简写（`-p`is `--prune`）。
> 这允许执行以下任何操作：
> 
> ```
> git fetch -p -P
> git fetch --prune --prune-tags
> git fetch -p -P origin
> git fetch --prune --prune-tags origin 
> ```
> 
> 或者简单地说：
> 
> ```
> git config fetch.prune true &&
> git config fetch.pruneTags true &&
> git fetch 
> ```
> 
> 而不是更冗长：
> 
> ```
> git fetch --prune origin 'refs/tags/*:refs/tags/*' '+refs/heads/*:refs/remotes/origin/*' 
> ```
> 
> **在此功能之前**，支持从定期删除其分支*和*标签的 repo 中提取用例是很痛苦的，并让我们的本地引用反映上游。
> 
> 在工作中，我们在 repo 中为每次推出创建部署标签，并且有*很多*这样的标签，因此出于性能原因，它们会在几周内存档。
> 
> **如果没有此更改**，很难集中配置此类存储库 `/etc/gitconfig`（在仅用于处理它们的服务器上）。您需要`fetch.prune=true`全局设置，然后为每个 repo：
> 
> ```
> git -C {} config --replace-all remote.origin.fetch "refs/tags/*:refs/tags/*" "^\+*refs/tags/\*:refs/tags/\*$" 
> ```
> 
> 现在我也可以简单地设置**`fetch.pruneTags=true`**，`/etc/gitconfig`运行“ `git pull`”的用户将自动获得我想要的修剪语义。

* * *

2021 年 4 月更新，Git for Windows 2.30.1 和[GitHub Desktop 2.8](https://github.blog/2021-04-28-github-desktop-hiding-whitespace-expanding-diffs-repo-aliases/)

如果您有设置`prune` *和* `pruneTags`选项，它会起作用：

```
cd C:\path\to\local\repo
git config fetch.prune true
git config fetch.pruneTags true 
```

然后在 GitHub Deskop 中单击 Fetch origin：日志将显示：

```
2021-04-28T20:25:21.244Z - info: [ui] Executing fetch: 
  git -c credential.helper= -c protocol.version=2 fetch --progress --prune origin (took 2.986s) 
```

...并且遥控器中不存在的任何本地标签都将消失！

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-05-22T15:05:57.297

以下对我有用：

```
git fetch --prune --tags 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-17T22:11:30.757

一些研究表明，*git*无法区分本地或外部标签（所有标签都转到 .git/refs/tags/）。因此，无法确定本地创建的标签和可修剪的远程标签之间的区别。然后选项被简化为：拥有不断增长的标签集，或者只有服务器上的标签。

```
git push --tags origin && \
git tag | xargs -n1 git tag -d && \
git fetch --tags 
```

删除后一种行为的第一行，并且可能是 git 别名以供频繁使用。

另一种方法是在标签点创建一个分支（因为它们可以被识别为本地/远程），并且永远不会再写入它。然后使用 remotename/branchname 作为结帐的标签将使标签保持同步（除了`git fetch`and `git remote prune remotename`）。

无论哪种方式都是一种技巧，“正确”的答案是始终停止更改标签。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-12-01T11:05:46.883

另一个实际上对我有用的解决方案：

```
git tag -l | xargs git tag -d && git fetch -t 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-05-08T01:28:23.490

使用这些命令同步标签（删除所有本地然后获取所有远程）

```
git tag -d $(git tag) # delete all local tags
git fetch --all # fetch all remote to local 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-08T01:26:25.033

git push --tags 会将您的本地标签推送到服务器。默认情况下，git fetch（git pull 或 git pull --rebase 的前半部分）会拉取标签，但您可以指定 -t 或 --tags 来拉取所有标签。

我不确定如何修剪远程删除的标签，但提取应该拉下任何强制更新的标签。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-14T23:45:26.080

**免责声明**这使用了 git 内部（有些人可能会争辩说文件系统*是*一个 git 接口，但那是另一天：D）

```
# Blow away all local tags, this will remove any that are tagged locally
# but are not on the remote
rm .git/refs/tags/*

# Download all the tags from the remote
git fetch --tags 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-19T20:11:15.263

这是一个替代解决方案：

```
git fetch -p +refs/tags/*:refs/tags/* 
```

从[git fetch](https://git-scm.com/docs/git-fetch)文档：

> -p --修剪
> 
> 在获取之前，删除远程上不再存在的任何远程跟踪引用。如果仅由于默认标签自动跟踪或由于 --tags 选项而获取标签，则不会对其进行修剪。但是，**如果由于显式 refspec**（在命令行或远程配置中，例如，如果远程是使用 --mirror 选项克隆的）而获取标签，**那么它们也会受到 pruning 的影响**。

# asp.net - 如何清除 asp:FileUpload 控件上的 hasfile 属性？

> ID：10491147
> 
> 赞同：4
> 
> 时间：2012-05-08T00:59:45.890
> 
> 标签：asp.net, .net-2.0, file-upload

我有一个 .NET 2.0 文件上传控件，旁边有一个按钮，如下所示：

```
<asp:fileupload id="uploadedFile" runat="server" />
<asp:Button runat="server" ID="upload" Text="Upload" OnClick="Page_Load"/> 
```

现在，这一切都在 webpart 内的页面上（sharepoint，即 - 对于那些不熟悉 webpart 的人 - 它基本上是一个 iframe）。另请注意，我正在调用 Page_Load。

用户浏览文件后，控件的`hasfile`属性`uploadedFile`变为`true`（`false`开始时）。美好的。用户点击按钮，文件上传。我在那里有代码，可以向我发送一封电子邮件，让我知道文件已上传，只要`hasfile`是`true`.

如果用户在他的浏览器中按下刷新按钮，页面会重新加载，但`hasfile`属性没有被清除，所以我收到了另一封电子邮件！（如果我使用 Firefox 在没有缓存的情况下重新加载的能力，那么一切都会正确刷新）

*如何清除`hasfile`FileUpload 控件上的属性？*或者当用户重新加载时如何使页面跳过缓存？

我不介意调用 Page_Load 以外的函数，但它需要能够接收参数，所以我也可以从 Page_Load 调用它（由于我正在做的其他事情）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T01:18:10.073

`hasfile`在 LoadPage() 函数中添加清除属性的功能，当您刷新时（当页面加载时）会调用该函数。

或者也许不是放置功能，而是编写一个实现所述功能的函数并从页面加载中调用它。 [指南代码](http://www.velocityreviews.com/forums/t237593-cannot-delete-file-after-file-upload-asp-net-2-0-a.html)：

```
private void clearFileUpload()
{
    fileUpload.Dispose();
} 
```

或者

上传文件后立即尝试处理该问题。

```
private void clearFileUpload()
{
    fileUpload.PostedFile.InputStream.Dispose();
    // fileUpload.HasFile is now  false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T11:55:05.443

我这样做是为了清除 FileUpload：

```
fubanner.Attributes.Clear(); 
```

# java - java list 无法添加类然后更改原始类而不更改列表中的副本

> ID：10491153
> 
> 赞同：1
> 
> 时间：2012-05-08T01:00:14.670
> 
> 标签：java, arraylist

所以我主要用 C++ 编程，而 Java 与 C++ 非常相似。我已经创建了一个列表命令

```
 List<Item> stuff =new ArrayList<Item>(); 
```

其中 Item 是一个基本上存储数据的自定义类。我从文本文件中获取信息并将其存储到 Item。然后我使用 stuff.add 来获取项目类。之后我使用命令删除项目类中的所有数据，并看到它也删除了列表中的所有数据。基本上我想知道是否有办法添加类的副本而不是类本身的地址。

编辑：所以我发现重新初始化项目类也解决了我的问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:01:59.867

您想在将项目添加到列表之前对其进行克隆。该列表仅包含对您创建的原始项目的*引用。*因此，当您改变您的项目时，列表中的项目也会受到影响（它是同一个对象）。

如果您想“断开”您放入列表中的项目，那么您可以先[克隆](http://en.wikipedia.org/wiki/Clone_%28Java_method%29)它。您的项目类将需要实现[`Cloneable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html)并覆盖该[`clone()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)方法。如果您在 Item 中只有原语，那么您可以简单地执行以下操作：

```
public Object clone()
{
  return super.clone();
} 
```

如果您在 Item 中有其他对象，则默认克隆操作只会制作*浅拷贝*，您需要使您的克隆方法更广泛，以便它制作*深拷贝*。来自 Object.clone() 的 Javadoc：

> 按照惯例，此方法返回的对象应独立于此对象（正在克隆）。为了实现这种独立性，可能需要在返回 super.clone 之前修改对象的一个​​或多个字段。通常，这意味着复制任何包含被克隆对象的内部“深层结构”的可变对象，并将对这些对象的引用替换为对副本的引用。如果一个类只包含原始字段或对不可变对象的引用，那么通常情况下 super.clone 返回的对象中不需要修改任何字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:03:22.380

在 Java 中，对象引用的作用类似于 C++ 中的指针。没有“复制构造函数”的概念。当您将某些内容添加到列表中并在将其添加到列表后更改该项目时，您已经注意到了这一点。

通常，在 Java 中，每次向列表中添加一个新条目时，您都会使用它`new`来创建一个新条目。`Item`所以像：

```
while (...) {
    Item i = new Item(...);
    stuff.add(i);
} 
```

而不是

```
Item i = new Item();
while (...) {
    i.foo = ...;
    stuff.add(i);
} 
```

上面的第二个示例将多次将*相同的对象添加到列表中。*

# mysql - 邮政编码的 MySQL REGEX WHERE 子句

> ID：10491154
> 
> 赞同：0
> 
> 时间：2012-05-08T01:00:16.230
> 
> 标签：mysql, regex, where-clause

我有一个要清理的数据库。他们在邮政编码列中有 70k 个条目，其中包含一些错误的值。我想检查并删除没有有效 5 位或 9 位邮政编码的行。这是我目前的陈述：

```
SELECT * FROM `sample_requests` WHERE `request_zip` RegExp '^\d{5}$)|(^\d{5}-\d{4}$)' 
```

我对正则表达式不是很熟悉，但我知道的足够多了。这个特殊的正则表达式现在也用在表单上，​​所以如果没有有效的邮政编码就不会提交，所以我知道它可以工作。我只是无法让 MySQL 部分工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:05:31.937

您需要使用`DELETE`而不是`SELECT`. 在执行此操作之前，您可能需要创建一个重复的“sample_requests”表以防出错。

这是您感兴趣的命令（首先删除重复的表行，以便您知道它有效）：

```
DELETE FROM sample_requests_duplicate 
WHERE request_zip NOT RegExp '(^\d{5}$)|(^\d{5}-\d{4}$)' 
```

# mongodb - 是否建议将 Riak 用于存储和流式传输大型二进制文件？

> ID：10491156
> 
> 赞同：4
> 
> 时间：2012-05-08T01:00:32.720
> 
> 标签：mongodb, riak, clob, nosql

比如说，如果我使用 Riak 数据库存储电影等，我如何将二进制文件分块传输到任何客户端（可以是下载然后播放或直接播放？）是否建议使用 Riak 存储大型二进制文件？另外，我在某处读到最大文件为 50 MB，否则会导致问题，但这似乎是旧文档。谁能提供更多信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T02:12:20.803

出于性能原因，我们不建议存储超过 50M 的对象。在这方面没有任何改变。鉴于此，答案是 Riak 不太适合您所描述的内容。

我们为分布式文件存储解决方案（兼容 Amazon S3 的 API）开发了企业产品 RiakCS，~~但这不是开源项目~~。

**编辑添加：**我们试图合并 Luwak 以支持大型对象/文件，但不幸的是我们不再这样做。如果其他人想继续工作，该项目当然可以在 github 上找到。

**更新：**我们现在开源了 Riak CS。见：[http ://basho.com/riak-cloud-storage/](http://basho.com/riak-cloud-storage/)

# parsing - 在柠檬解析器中使用变量？

> ID：10491157
> 
> 赞同：2
> 
> 时间：2012-05-08T01:00:33.463
> 
> 标签：parsing, math, parser-generator, lemon

我想在我的 Lemon 解析器驱动的应用程序中允许数学变量。例如，如果用户输入 x^2+y，我希望能够针对 100000 对不同的 x 和 y 值进行评估，希望不必每次都重新解析。我能想到的唯一方法是让解析器生成一个对象树，然后在给定输入时评估表达式。有更好/更简单/更快的方法吗？

性能可能是这里的一个问题。但我也关心编码和代码维护的便利性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:51:56.960

如果您想要最可维护的代码，请在解析时评估表达式。不要造树。

如果您想多次重新执行表达式，并且表达式很复杂，则需要避免重新解析（按照可维护性从高到低的顺序）：构建树并评估，生成线程代码并评估，生成本机代码和评估。

如果表达式通常像您的示例一样简单，那么动态评估的递归下降手动编码解析器可能会非常快，并且工作得很好，即使是 100,000 次迭代。这种解析器的执行时间可能比 Lemon 少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:15:17.553

这确实是您通常会这样做的方式，除非您想生成实际（真实或虚拟）代码。x 和 y 在您的情况下只是变量，因此您将填写实际值，然后调用 Evaluate 函数来评估表达式。然后树节点将包含指向变量 x 和 y 的指针，依此类推。无需为每对测试值解析它。

# r - ggplot2：热图绘图，geom_text 仅在选定单元格中放置

> ID：10491158
> 
> 赞同：2
> 
> 时间：2012-05-08T01:00:50.197
> 
> 标签：r, ggplot2, heatmap

我正在使用热图来跟踪实验中的损耗，并且我想在前两列中专门打印一些日期信息，但由于某种原因，ggplot2 不会接受那么多缺失的观察结果。

这就是我目前的情节（许多日期的方式）。

谁能告诉我如何将 geom_text 限制为仅前两列？

有关示例代码，请参阅打击。 ![热图和 facet_grid](../Images/cc28afc6705ce63718a4f19462c1853f.png)

```
require(ggplot2)
require(plyr)
require(reshape)

# create sample data
set.seed(666)
dfn <- data.frame(
Referral  = seq(as.Date("2007-01-15"), len= 26, by="23 day"),
VISIT01  = seq(as.Date("2008-06-15"), len= 24, by="15 day")[sample(30, 26)],
VISIT02  = seq(as.Date("2008-12-15"), len= 24, by="15 day")[sample(30, 26)],
VISIT03  = seq(as.Date("2009-01-01"), len= 24, by="15 day")[sample(30, 26)],
VISIT04  = seq(as.Date("2009-03-30"), len= 24, by="60 day")[sample(30, 26)],
VISIT05  = seq(as.Date("2010-11-30"), len= 24, by="6 day")[sample(30, 26)],
VISIT06  = seq(as.Date("2011-01-30"), len= 24, by="6 day")[sample(30, 26)],
Discharge = seq(as.Date("2012-03-30"), len= 24, by="30 day")[sample(30, 26)],
Patient  = factor(1:26, labels = LETTERS),
openCase  = rep(0:1, 100)[sample(100, 26)])

 # set today's data for cases that do not have an Discharge date
 dfn$Discharge[ is.na(dfn$Discharge) ] <- as.Date("2014-01-30")

 mdfn <- melt(dfn, id=c('Patient', 'openCase'), variable_name = "Visit")
 names(mdfn)[4] <- 'Year'

 # order data in mdfn by 'Referral' in dfn
 mdfn$Patient <- factor(mdfn$Patient,levels = (dfn$Patient[order(dfn$Referral)]),
 ordered = TRUE)

mdfn$Year2 <- ifelse(mdfn$Year != 0, 1, 0)
mdfn$Year2[ is.na(mdfn$Year) ] <- 0

mdfn$FWrap <- 'Core Measures'
mdfn$FWrap[mdfn$Visit == 'Referral'] <- 'Referral'
mdfn$FWrap[mdfn$Visit == 'VISIT05' | mdfn$Visit == 'VISIT06'] <- 'Optional Measures'
mdfn$FWrap[mdfn$Visit == 'Discharge'] <- 'Discharge'
mdfn$FWrap <- ordered(mdfn$FWrap, levels = c('Referral', 'Core Measures', 'Optional Measures', 'Discharge'))

base_size <- 9
m2 <- ggplot(mdfn, aes(Visit, Patient)) + 
geom_tile(aes(fill = Year2), colour = "gray") +
scale_fill_gradient(low = "white", high = "steelblue")
m2 + theme_grey(base_size = base_size) + labs(x = "", y = "") +
scale_x_discrete(expand = c    (0, 0)) + scale_y_discrete(expand = c(0, 0)) + 
opts(legend.position = "none", axis.ticks = theme_blank(), 
axis.text.x = theme_text(size = base_size * 0.8, angle = 330, hjust = 0,
colour = "grey50")) + facet_grid(~ FWrap, scales = "free", space="free") + 
geom_text(aes    (label=format(Year, "%b. %d, %Y")), size=3, colour='white')

# this is how I thought I could solve it.
mdfn$Yearlabel <- mdfn$Year
mdfn$Yearlabel[mdfn$Visit != 'Referral' & mdfn$Visit != 'VISIT01'] <- NA
# mdfn[,c(4,5,7,3)]

m2 <- ggplot(mdfn, aes(Visit, Patient)) + 
geom_tile(aes(fill = Year2), colour = "gray") +
scale_fill_gradient(low = "white", high = "steelblue")
m2 + theme_grey(base_size = base_size) + labs(x = "", y = "") +
scale_x_discrete(expand = c    (0, 0)) + scale_y_discrete(expand = c(0, 0)) + 
opts(legend.position = "none", axis.ticks = theme_blank(), 
axis.text.x = theme_text(size = base_size * 0.8, angle = 330, hjust = 0,
colour = "grey50")) + facet_grid(~ FWrap, scales = "free", space="free") + 
geom_text(aes    (label=format(Yearlabel, "%b. %d, %Y")), size=3, colour='white') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T03:50:26.553

试试这个，

```
p = ggplot(mdfn, aes(Visit, Patient)) + 
  geom_tile(aes(fill = Year2), colour = "gray") +
  scale_fill_gradient(low = "white", high = "steelblue") + 
  theme_grey(base_size = base_size) + 
  labs(x = "", y = "") +
  scale_x_discrete(expand = c(0, 0)) + 
  scale_y_discrete(expand = c(0, 0)) + 
  opts(legend.position = "none", axis.ticks = theme_blank(), 
       axis.text.x = theme_text(size = base_size * 0.8, angle = 330,
         hjust = 0, colour = "grey50")) + 
  facet_grid(~ FWrap, scales = "free", space="free") 

s = subset(mdfn, Visit %in% c("Referral","VISIT01"))
p + geom_text(aes(label=format(Year, "%b. %d, %Y")), data = s, 
              size=3, colour = 'white') 
```

# php - 如何在 php 中包含文件的一系列行？

> ID：10491162
> 
> 赞同：0
> 
> 时间：2012-05-08T01:01:24.110
> 
> 标签：php, file, echo, lines

我知道这一点：

```
 <?php

$file2 = file('website/files/myfolder/file.html');

echo $file2[8];
echo $file2[9];
echo $file2[10];
echo $file2[11];

?> 
```

会给我 file.html 文件中第 8、9、10、11 行的内容，但是我想在第 23 到 116 行的大约 100 行中执行此操作。如果不使用 echo $file2，我将如何完成此操作[数字]; 一百次？

如果我可以在 php 中执行此操作，另一种解释我正在尝试做的事情的方法可能是：

`echo $file2[23-116];`

显然这行不通，但这就是概念。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T01:04:18.150

像这样使用循环

```
$data = file('website/files/myfolder/file.html');
for ($i = 23; $i <= 116; $i++) {
    echo $data[$i];
} 
```

*   [http://php.net/manual/en/control-structures.for.php](http://php.net/manual/en/control-structures.for.php)

或者你可以拼接数据：

```
$data = file('website/files/myfolder/file.html');
echo implode(PHP_EOL, array_splice($data, 23, 116 - 23)); 
```

*   [http://php.net/manual/en/function.array-splice.php](http://php.net/manual/en/function.array-splice.php)
*   [http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:04:41.090

这样的事情怎么样？

```
$file = file('website/files/myfolder/file.html');

foreach( range( 23, 116) as $i) {
    echo $file[$i]; 
} 
```

# android - 使用 Android 操作 Amazon EC2 的困难

> ID：10491167
> 
> 赞同：0
> 
> 时间：2012-05-08T01:02:03.597
> 
> 标签：android, amazon-ec2, amazon-web-services

我是 Android 新手，我需要开发一个操作 EC2 和 S3（亚马逊网络服务）的应用程序。我在 VirtualBox 上的 Ubuntu 10.04 上使用 Eclipse Indigo。我已经安装了适用于 Android 的 SDK，创建了一个新项目，添加了这些 jar：

-aws-android-sdk-1.2.2-ec2.jar -aws-android-sdk-1.2.2-s3.jar -aws-android-sdk-1.2.2-debug.jar

我收到了这个错误：

> 找不到方法 com.amazonaws.services.ec2.AmazonEC2Client.describeRegions，引用自方法 app.workman.Ec2Activity.onCreate。

这是我的活动代码：

```
public class Ec2Activity extends Activity{
private AmazonClientManager acm;
private AmazonEC2Client ec2;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ec2);

    acm = new AmazonClientManager();

    if (this.acm.hasCredentials()){

    ec2 = acm.ec2();

    System.out.println(ec2.describeRegions());
    }
  }
} 
```

这是 AmazonClientManager.java 的代码：

```
public class AmazonClientManager {
private static final String LOG_TAG = "AmazonClientManager";

private AmazonS3Client s3Client = null;
private AmazonEC2Client ec2Client = null;

public AmazonClientManager() {
}

public AmazonS3Client s3() {
    validateCredentials();
    return s3Client;
}

public AmazonEC2Client ec2() {
    validateCredentials();
    return ec2Client;
}

public boolean hasCredentials() {
    return PropertyLoader.getInstance().hasCredentials();
}

public void validateCredentials() {
    if ( s3Client == null || ec2Client == null) {        
        Log.i( LOG_TAG, "Creating New Clients." );

//            AWSCredentials credentials = new BasicAWSCredentials(PropertyLoader.getInstance().getAccessKey(), PropertyLoader.getInstance().getSecretKey());
        AWSCredentials credentials = new PropertiesCredentials(this.getClass().getResourceAsStream("AwsCredentials.properties"));

        s3Client = new AmazonS3Client(credentials);
        ec2Client = new AmazonEC2Client(credentials);
    }
}

public void clearClients() {
    s3Client = null;
    ec2Client = null;
}
} 
```

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:24:44.180

这个代码亚马逊 s3 我试试这个它正在工作。我只添加了 aws-android-sdk-1.2.1-debug.jar

```
public class AWSTestActivity extends ListActivity  {
/** Called when the activity is first created. */
AmazonS3Client s3Client;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    AWSCredentials credentials = new BasicAWSCredentials(
            "aKey",
            "sKey");
     s3Client = new AmazonS3Client(credentials);

    List buckets = s3Client.listBuckets();

    List<String> bucketNames = new ArrayList<String>(buckets.size());
    Iterator<Bucket> bIter = buckets.iterator();
    while (bIter.hasNext()) {
        bucketNames.add((bIter.next().getName()));
    }

    List<String> ls=new ArrayList<String>();
    ListObjectsRequest listObjectsRequest = new ListObjectsRequest();

    int keyCount = 1;

        String path="";
             listObjectsRequest.setBucketName(bucketNames.get(0));
  //                 listObjectsRequest.setPrefix(Key);
             ObjectListing listing =  s3Client.listObjects(listObjectsRequest);
             List<S3ObjectSummary> objectSummaries1 = listing
                        .getObjectSummaries();
             ListIterator<S3ObjectSummary> listIterator = objectSummaries1
                        .listIterator();
                while (listIterator.hasNext()) {
                    path = listIterator.next().getKey();
                    keyCount++;
                    ls.add(path);
   //                       if(folder.endsWith("_$folder$")){}
  //                        else{
  //                            
 //                         ls.add(folder.replace(Key+"/", ""));
  //                        }

    }

    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, bucketNames));

}
 protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Object o = this.getListAdapter().getItem(position);
        String pen = o.toString();
        Toast.makeText(this, "Backet Name " + " " + pen, Toast.LENGTH_LONG).show();
        List<String> ls=new ArrayList<String>();
        ListObjectsRequest listObjectsRequest = new ListObjectsRequest();

        int keyCount = 1;

            String path="";
                 listObjectsRequest.setBucketName(pen);
     //                  listObjectsRequest.setPrefix(Key);
                 ObjectListing listing = s3Client.listObjects(listObjectsRequest);
                 List<S3ObjectSummary> objectSummaries1 = listing
                            .getObjectSummaries();
                 ListIterator<S3ObjectSummary> listIterator = objectSummaries1
                            .listIterator();
                    while (listIterator.hasNext()) {
                        path = listIterator.next().getKey();
                        keyCount++;
  //                            ls.add(path);
                        if(path.endsWith("_$folder$")){
  //                                   ls.add(path.replace("_$folder$", ""));
                        }
                        else{

                            ls.add(path.replace(path+"/", ""));
                        }
                        setListAdapter(new ArrayAdapter<String>(this,
                                android.R.layout.simple_list_item_1, ls));
        }
                    System.out.println("path::::::"+ls.toString());

        }

 } 
```

# javascript - jquery/js - 我有一堆值（字符串）。我想通过 POST 将它发送到另一个 url，我该怎么做？

> ID：10491168
> 
> 赞同：-1
> 
> 时间：2012-05-08T01:02:05.017
> 
> 标签：javascript, jquery

我有这个（简化）

```
<script>

  dataToSend = 'dummy data here';

function sendIt() {

//code here

}
</script>

<a href='#' onclick='sendIt();'>Click here to send data</a> 
```

我需要在 sendIt() 中放入什么来进行 POST 提交（不是 ajax，我也希望将用户发送到页面）。

使用 jQuery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:20:30.760

我不知道你想用这个做什么，但你去吧

```
<script type="text/javascript">
dataToSend = 'dummy data here';
function sendIt() {
        $('body').append('<form id="sendit" method="post"><input type="hidden" name="data" value="'+dataToSend+'"/></form>');
        $('#sendit').submit();
}
</script>

<a href='#' onclick='sendIt();'>Click here to send data</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:09:28.540

这是一个解决方法。为什么不创建一个表单和一个包含字符串的隐藏文本字段，并在单击链接时触发表单提交。

```
<form id="fauxForm" method="POST">
  <input type="hidden" value="dummy data here" />
</form>
<a id="sendData" href="submithere.php">Click here to send data</a>

<script type="text/javascript">
  $("#sendData").click(function(ev){
    ev.preventDefault();
    $("#fauxForm").attr("action",$(this).attr("href")).submit();
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T01:14:41.297

最简单的方法是添加表格。你不需要javascript。

```
<form action=" .. url.." method="post">
    <input type="hidden" name="dataToSend" value="dummy data here">
    <input name="sendIt" id="sendIt" type="submit" value="Click here to send data">
</form> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T01:04:32.530

简短的回答是不可能仅从 JavaScript 发送帖子。更长的答案可从[使用 window.location.href 传递的帖子数据中获得](https://stackoverflow.com/questions/2367979/pass-post-data-with-window-location-href) 另一方面，您可以将其转换为 GET 请求（例如[http://www.misyte.com/page?param=value¶m=value&etc=data](http://www.misyte.com/page?param=value&param=value&etc=data)）和以这种方式将数据获取到页面。

# android - 在设备启动时启动应用程序，但不运行服务

> ID：10491172
> 
> 赞同：0
> 
> 时间：2012-05-08T01:02:46.473
> 
> 标签：android, broadcastreceiver, alarmmanager, intentfilter

我有一个`BroadcastReceiver`在 中使用的`BOOT_COMPLETED` `intent-filter`，`AndroidManifest`然后`Service`在设备启动时运行我的。是否可以让我`Service`开始，但实际上不能运行 中的代码`Service`？我有一个定期`AlarmManager`运行的，但理想情况下，我希望该代码在设备启动时不运行。`Service`

```
<receiver android:name="com.app.AlarmReceiver"> 
    <intent-filter> 
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter> 
</receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:20:31.683

是的，调用 startActivity：

```
@Override
public void onReceive(Context context, Intent intent) {
    Intent i = new Intent();
    i.setClassName("com.test", "com.test.MainActivity");
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
} 
```

# design-patterns - 过程语言有设计模式吗？

> ID：10491175
> 
> 赞同：24
> 
> 时间：2012-05-08T01:02:59.510
> 
> 标签：design-patterns, procedural-programming

根据我的经验，我经常在 Java 等面向对象语言中看到一些设计模式，例如访问者模式、策略模式……但我在 C 等过程语言中没有看到太多模式……我想知道那些程序语言中存在模式吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-12-30T16:44:42.810

过程语言确实有设计模式。但是由于程序方法通常被忽略，而倾向于基于类的 OOP，因此它们并未得到广泛认可。

我用 C 开发高性能软件，并且有几种重复出现的模式。因此，我将提供一些我经常看到的模式的见解。

**把手**

这就是在过程编程中进行封装的方式。构造函数不返回结构或对象。但是一个句柄：它通常是一个不透明的指针或只是一个整数。你不能用它做任何有趣的事情，因为它只是一个数字。细节完全隐藏。但是您可以将此句柄传递给处理它的函数：

例子：

*   在 Windows 上，[CreateWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)函数返回一个 HWND。这是一个窗口句柄，可以传递给其他函数，如 ShowWindow、DestroyWindow 等。
*   在 Linux 上是[open](http://pubs.opengroup.org/onlinepubs/009695399/functions/open.html)系统调用。返回just和int。这是一个文件句柄。

**上下文**

在过程语言中，对象通常称为上下文。上下文是一个包含某些系统状态的结构，就像对象的成员一样。在 OOP 中，您编写`object.method(parameter)`. 在过程编程中，您编写`function(addressOfContext, parameter)`. 内部函数直接使用上下文结构，而公共函数仅使用句柄，实现将其解析为实际的上下文结构。

**回调**

或函数指针。函数的用户传递他的函数地址以向系统添加自定义行为。这就是多态性在过程编程中的实现方式。这允许编写通用函数。

一个值得注意的例子是[qsort](http://www.cplusplus.com/reference/cstdlib/qsort/) C 函数。这需要元素数组的地址。获取一个元素的大小以及数组中有多少元素以及执行比较的比较器函数。这是完全通用的实现，允许对各种数据进行排序。

**设置结构**

当一个函数可以通过多种方式进行参数化时。通常使用设置结构。规范通常要求这些结构默认填充为零，并且只填充相关成员。如果某些成员是互斥的，则将它们置于联合中。这种设置结构的典型示例是来自 WinAPI的[WNDCLASS 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633576%28v=vs.85%29.aspx)

**可变大小数据**

好吧，这是一种 C 模式，而不是一般的设计模式。有时对象可能包含任意大小的二进制有效负载。这种模式通常发生在从包含多种类型数据块的二进制文件中读取数据时。这是由这样的结构完成的。

```
typedef struct
{
    int someData;
    int otherData;
    int nPayloadLength;
    unsigned char payload[1];
} VariableSized; 
```

在代码中完成了以下操作：

```
VariableSized *vs = malloc(sizeof(VariableSized) + extraLength); 
```

这会分配比结构更大的内存，从而为可变长度的有效负载留出空间。然后可以通过例如访问其第5个字节。`vs->payload[4]`.

这样做的好处是可以在一次`free`调用中释放整个对象。并且保证它在内存中有一个连续的块。因此，它比在堆中的其他地方分配相应的缓冲区更好地利用缓存。

**OOP 设计模式的过程对应物**

OOP 模式在过程语言中从不以它们的名字命名。所以我只能在这里猜测。

创建模式

*   **抽象工厂**：抽象工厂通常是单例的。在这种情况下，根本不使用此模式，而是使用条件编译。否则设置提供创建功能的结构。
*   **Builder**：使用设置结构。
*   **工厂方法**：回调用于创建。
*   **延迟初始化**：在 C++ 中，静态局部变量用于此目的。在 C 语言中，您可以`if (!initialized) { initialize(); initialized = 1; }`在对性能不重要的地方使用该模式。对于性能关键代码，根本不使用延迟加载。用户必须找到一个地方来初始化上下文。
*   **原型**：在程序世界中，我们只需将句柄返回给库存对象。WinAPI 中的[GetStockObject](http://msdn.microsoft.com/en-us/library/dd144925%28v=vs.85%29.aspx)函数就是一个例子。对于可变对象，出于性能原因，通常使用写时复制机制。
*   **单例**：只需编写顶级函数（并在绝对需要全局状态时使用全局变量）。

结构图案

*   **适配器**和**外观**：在现有接口上构建另一个接口的模式。只需新函数将调用旧函数和其他函数。
*   **Bridge**：对具体实现的回调以 setup struct 的形式提供。
*   **Composite**：顶级函数用于指定它应该操作的父节点的句柄。
*   **Decorator**：装饰行为以回调的形式提供。或者为接收各种消息并决定是否处理它们的所有可能的装饰提供一个事件处理程序回调（例如 WinAPI 中的窗口过程）。
*   **Flyweight**：只读二进制数据，用于打包在结构和数组中。
*   **代理**：与 OOP 中的几乎相同，但没有类。

行为模式

*   **责任链**：循环遍历的回调数组或链表。规范描述了回调应该如何表明他们处理了导致循环中断的请求。
*   **命令**：命令是包含 a`do`和`undo`回调的结构。这些回调通常需要某种上下文来操作。并维护命令数组以执行撤消。
*   **解释器**：编译器/解析器/解释器是使用 lex 和 yacc 编写或生成的。
*   **Iterator**：使用句柄，否则相同。出于 C 中的性能原因，我们经常坚持使用数组。
*   **Mediator**：通常通过使用一些消息调度机制和[消息循环](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644928%28v=vs.85%29.aspx)和事件处理程序来实现。
*   **Memento**：与 OOP 中的相同，但没有类。
*   **观察者**：与责任链相同，但循环不会中断。一个例子是[atexit](http://www.cplusplus.com/reference/cstdlib/atexit/)。
*   **状态**：由二维调度表实现，将当前状态和请求的操作映射到一个函数中。（在稀疏的情况下，只使用 ifs。）
*   **策略**：这是回调的基本用例。
*   **模板方法**：通常框架让用户为某些函数提供自己的回调。库通常提供一种使用自定义内存分配功能的方法，该功能提供自定义`malloc`和`free`.
*   **访问者**：通过使用回调的多维数组实现，通常在开始时填充 NULL（对于默认行为），并填充在每个类型对的主初始化代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:15:07.983

《设计模式：可重用的面向对象软件的元素》一书是一本具有里程碑意义的书，它将设计模式的注意力带到了计算机编程、设计和架构的实践中。当时占主导地位的编程范式是面向对象的软件开发，而这本书显然是针对这种范式的，而不是针对其他范式的。尽管您可以争辩说本书中的一些设计模式适用于其他范式，但这并不是本书的重点。因此，在设计师和程序员中流行的是那本书中概述的一组设计模式。从那时起，其他作者、博主和其他网站也记录了其他内容。毫无疑问，已经在各种网站上描述了适用于过程语言的设计模式，但是，就像我说的，当编程社区谈到设计模式时，他们大多指的是那本书中概述的模式。我知道这不是一个真正的答案，因为我没有任何记录在案的程序语言模式，我敢肯定，肯定有一些。我想也许我会说明那本书的重要性，以及它最初针对的范式。

# postgresql - Postgresql intarray 错误：未定义符号：pfree

> ID：10491184
> 
> 赞同：0
> 
> 时间：2012-05-08T01:04:17.027
> 
> 标签：postgresql, greenplum

我正在尝试为我的 Greenplum 数据库 4.2.1.0 安装 Postgresql (8.2.15)[额外提供的模块](http://www.postgresql.org/docs/8.3/static/contrib.html)intarray 和 intagg。安装似乎成功；我按照[这里](http://sayap.com/blog/2010/3/11/installing-a-contrib-module-for-greenplum)的教程进行操作，所有文件都复制到 greenplumlib-db-4.2.1.0/lib/postgresql share/postgresql 目录中。但是当我试图执行我的java代码时，它会抛出一个“未定义的符号”错误：

```
org.postgresql.util.PSQLException: ERROR: could not load library "/usr/local/greenplum-db-4.2.1.0/lib/postgresql/_int.so": /usr/local/greenplum-db-4.2.1.0/lib/postgresql/_int.so: undefined symbol: pfree
at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2062)
at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1795)
at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:479)
at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:353)
at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:345)
at tuffy.db.RDB.execute(RDB.java:354)
at tuffy.db.RDB.resetSchema(RDB.java:700)
at felix.main.Felix.parseFelixQuery(Felix.java:106)
at felix.main.Felix.run(Felix.java:755)
at felix.main.Main.main(Main.java:69) 
```

说符号**pfree**是未定义的。我检查了版本号：Greenplum 中的 postgresql 和附加模块都是 8.2.15。我错过了什么吗？

**更新**：教程的链接似乎不稳定；它基本上提供了一些简单的步骤来完成安装：

```
Get any of the postgresql 8.2 source package from the official site
su - gpadmin
Unpack the source, then go to ~/postgresql-8.2.xx/contrib/xxx
make USE_PGXS=1 COPT="-Wno-error" install
(Optional for Greenplum MPP) Use gpssh to copy whatever .so file that just get installed       under /usr/local/greenplum-db/lib/postgresql to other nodes
psql -f xxx.sql [DBNAME] 
```

**更新**：感谢您的回答。

我正在安装Greenplum，但它只包含postgresql 8.2.15，所以我必须使用这个版本。我已将整个 /usr/local/pgsql/lib 目录复制到 greenplum 库中，似乎使 intarray 工作，但现在我有一个新错误：

```
could not load library "/usr/local/greenplum-db-4.2.1.0/lib/postgresql/plpgsql.so":
/usr/local/greenplum-db-4.2.1.0/lib/postgresql/plpgsql.so: undefined symbol: heap_copytuple 
```

好像我丢失了一些文件...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:42:49.153

您可能错过了[PostgreSQL 8.2 已在 2011 年结束生命](https://www.postgresql.org/support/versioning/)。

升级到更新的版本（在撰写本文时最新版本为 9.1），其中安装扩展（以前：“附加提供的模块”）[intarray](https://www.postgresql.org/docs/current/intarray.html)的问题是：

```
CREATE EXTENSION intarray; 
```

[关于`CREATE EXTENSION`.](https://www.postgresql.org/docs/current/sql-createextension.html)

# javascript - 如何检查 jquery .html() 变量和 ruby on rails 生成的 html 之间的相等性？

> ID：10491195
> 
> 赞同：1
> 
> 时间：2012-05-08T01:05:26.730
> 
> 标签：javascript, jquery, html, ruby-on-rails, ajax

目前我正在尝试比较两个变量，`newhtml`并且`oldhtml`. 我使用以下方法获取旧的 html：

```
var oldhtml = $('#pop').html(); 
```

我使用以下方法获取新的 html：

```
var newhtml = ("<%= escape_javascript render(:file => 'shared/_content') %>"); 
```

然后我尝试使用以下方法比较它们：

```
if(newhtml == oldhtml)
{
  //is never called
  $('#pop').hide();
}
else
{
  //is always called
  $('#pop').html(newhtml);
} 
```

但它不起作用。在这种情况下，`oldhtml`变量实际上只是前一个`newhtml`变量。因此，如果您单击主页上的相同内容，`newhtml`实际上应该只是 ruby​​ on rails 生成的版本`oldhtml`（中存在的 html `<div id="pop">`）。我尝试将它们附加以查看差异所在，但对我来说它看起来完全一样。我希望有人能把我推向正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:50:44.170

我会尝试将 newhtml 放在隐藏的 DOM 元素中，然后从 jquery 中取回该内容`.html()`

```
$('#HiddenDOM').html(newhtml);

if ($('#HiddenDOM').html() === $('#pop').html()) { ... } 
```

未经测试，但可能会消除 html 呈现问题。

此外，对 javascript: 使用三等式比较，`===`而不是`==`. 有关解释，请参阅 youtube 上 Javascript The Good Parts 上的 Cockford。

总体而言，我会重新考虑您的设计，因为比较可能并不真正可行，并且会使您的架构暴露于各种浏览器之谜。有时，您首先必须找出什么不起作用才能找到有效的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:43:40.393

我不记得关于返回的 html 格式的任何保证`html()`，尤其是 whitepace。

但是，至少当我在 Firefox 中从页面中拉出一大块 HTML 时，出来的内容似乎与服务器发送的格式相同。

因此，字符串之间可能只有微不足道的区别，例如前导和尾随空格。尝试使用函数行 this 来比较两个 HTML 片段：

```
function compare_html(a,b) {
    a = a.replace(/^\s+/,"").replace(/\s+$/,"");
    b = b.replace(/^\s+/,"").replace(/\s+$/,"");
    return a == b;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T01:45:53.220

jQuery 文档警告说，`.html()`“某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML”。这也适用于动态插入的 HTML。

最好的办法是比较两个 javascript 字符串，这两个字符串都不是从 DOM 中读回的。

例如：

```
var newhtml = ("<%= escape_javascript render(:file => 'shared/_content') %>"),
    oldhtml = newhtml;

...

if(newhtml == oldhtml)
{
  $('#pop').hide();
}
else
{
  oldhtml = newhtml;
  $('#pop').html(newhtml);
} 
```

毫无疑问，它比这更复杂，但我相信你明白了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T20:57:48.583

这一切都非常有帮助，我实际上将答案结合起来得到了一些有用的东西。最终的工作是这样的：

像以前一样获取oldhtml：

```
var oldhtml = $('#pop').html(); 
```

然后将新的 html 插入到 div 中：

```
$('#pop').html("<%= escape_javascript render(:file => 'shared/_content') %>"); 
```

之后，从 div 中获取 newhtml，就像我检索 oldhtml 一样：

```
var newhtml = $('#pop').html(); 
```

然后 if 语句起作用，但您要确保将 div 更改为无法从数据库中检索到的任意内容：

```
if(newhtml == oldhtml)
{
$('#pop').html("<h>toggled_off</h>");
$('#pop').hide();
}
else
{
$('#pop').html(newhtml);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-13T21:32:40.223

剥离两个 html 的标签，然后与 == 进行比较

`var StrippedString = OriginalString.replace(/(<([^>]+)>)/ig,"");

# build - Makefiles - 编译到不同的目标文件夹

> ID：10491199
> 
> 赞同：0
> 
> 时间：2012-05-08T01:05:42.020
> 
> 标签：build, makefile

我有一个我在 make 文件中指定的库文件夹列表：

```
LIBRARIES = Ethernet                \
            SPI                     \
            SD 
```

我还有一些规则可以将每个规则编译到我项目的本地 obj 文件夹中：

```
obj/SPI/%.cpp.o: $(LIBS_DIR)/SPI/%.cpp
    @echo "Compiling $<"

obj/SD/%.cpp.o: $(LIBS_DIR)/SD/%.cpp
    @echo "Compiling $<"    

obj/Ethernet/%.cpp.o: $(LIBS_DIR)/Ethernet/%.cpp
    @echo "Compiling $<" 
```

（请注意，每个人都使用自己的子文件夹）。如何从 $(LIBRARIES) 自动生成这些规则，这样我就不必像这样复制它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T20:23:24.137

你可以这样做：

```
obj/%.cpp.o : $(LIBS_DIR)/%.cpp
    g++ -c -o $@ ${CPPFLAGS} ${CXXFLAGS} $< 
```

在上面的`%`捕获`dir/src`部分。

如果您希望自动创建输出目录，可以使用[辅助扩展](http://www.gnu.org/software/make/manual/make.html#Secondary-Expansion)make 功能来完成：

```
.SECONDEXPANSION:

obj/%.cpp.o : $(LIBS_DIR)/%.cpp | $${@D} # object file depends on its directory
    g++ -c -o $@ ${CPPFLAGS} ${CXXFLAGS} $<

obj/% : # directory creation rule
    mkdir -p $@ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:01:26.433

足够新版本的 GNU 支持 eval 函数。你可以像这样使用它：

```
define SUBDIR_RULE
obj/$1/%.cpp.o: $(LIBS_DIR)/$1/%.cpp
        @echo "Compiling $$<"
enddef

$(foreach D,$(LIBRARIES),$(eval $(call SUBDIR_RULE,$D))) 
```

如果您不想依赖它，您可以使用自动生成的 makefile，它是 GNU make 的一个功能要久得多。但是这种方法使用起来有点棘手。

# deployment - 为什么 capifony 同时创建文件夹 /shared/app/logs 和 /shared/logs (symfony2)

> ID：10491205
> 
> 赞同：1
> 
> 时间：2012-05-08T01:07:05.153
> 
> 标签：deployment, symfony, capifony

我使用 Capifony 将我的 Symfony2 项目部署到生产服务器。作为 deploy:setup 任务的结果，创建了名为 /shared/logs 的文件夹。然而 symfony2 实际上引用 /shared/app/logs 来存储日志文件，而 shared/logs 保持为空。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:17:40.863

`shared/logs`自 capifony 版本以来不再创建该文件夹`2.1.7`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T02:15:27.590

我刚刚检查了[主干](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy.rb)中最新的 capistrano 部署配方，这似乎是 Capistrano 而不是 Capifony 的默认行为。它仅使用 shared_children 数组路径的最后一部分而不是包含完整路径来创建文件夹。稍后在 Capfifony 的任务 deploy:shared_children 中，它会创建具有完整路径的子文件夹。

# ssas - 覆盖计算成员的上下文维度 (SSAS)

> ID：10491206
> 
> 赞同：0
> 
> 时间：2012-05-08T01:07:08.490
> 
> 标签：ssas, mdx

让我们假设一个简单的场景：一个具有两个维度 D1 和 D2 的事实表 F。

```
F   D1   D2
10   A   B
15   B   C 
```

在这种情况下，我使用比这个更接近的表达式定义了一个新的计算成员 C1：

```
with member measures.C1 as
sum(
   descendants( [D1].[Ds].currentMember, , leaves ),
   [myMeasure]
)
select 
 measures.C1 on 0,
[D2].[Ds].AllMembers on 1
   from [MyCube] 
```

如何修改 C1 以在表达式中包含所有 D2 成员？

我得到这个结果：

```
C1  D2
10  B
15  C 
```

我正在寻找这个：

```
C1  D2
35  B
35  C 
```

（当然这是对实际问题的简化，请不要尝试修复 C1 表达式，只添加代码以获得预期结果，我尝试过：

```
sum(
   { descendants( [D1].[Ds].currentMember, , leaves ),
     [D2].[Ds].AllMembers },
   [myMeasure] 
```

不成功）

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:52:21.470

对于此特定示例，将您的成员语句更改为以下内容。

```
WITH MEMBER [Measures].[C1] AS
SUM([D1].[Ds].[All], [myMeasure]) 
```

这为您提供了该维度中的所有内容以供您测量。然后应该为 D2 维度中的每个属性重复该值。

根据问题的标题和您的一些文字，这只是一个小例子。您可能需要调查[范围](http://msdn.microsoft.com/en-us/library/ms145989.aspx)。它非常强大，你可以用它做一些巧妙的事情。

# php - Yii - 内容说找不到 LogDetailFilter 后出现 PHP 错误

> ID：10491207
> 
> 赞同：0
> 
> 时间：2012-05-08T01:07:09.027
> 
> 标签：php, yii

好吧，我这辈子都想不通。我正在使用 Yii 1.1.8。

如果我这样做：

```
function actionEdit()
{
    $this->render('//user/edit');
} 
```

在内容说在第 421 行`LogDetailFilter`尝试自动加载时找不到该内容后，我收到一个 PHP 错误。`Yiibase.php`

但如果我这样做：

```
function actionEdit()
{
    $this->render('//user/edit');
    die;
} 
```

我没有问题。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:39:37.963

这是您的配置文件中的错误，与您记录的内容/方式有关。Yii 在渲染内容后运行所有的 Yii::log / Yii::trace 调用（使用 onApplicationEnd 事件），这就是为什么使用 die 可以防止你的日志记录出错。

如果您发布您的日志信息，如果您需要，我们可以指出确切的位置

# sql - 如何将视图的所有权限授予任意用户

> ID：10491208
> 
> 赞同：24
> 
> 时间：2012-05-08T01:07:19.070
> 
> 标签：sql, database, postgresql, grant, pgadmin

您如何授予任意用户对所有功能和视图的读取/选择访问权限？

我`psql --user=postgres -d mydb -f myview.sql`用来创建几个函数和视图，然后运行：

```
GRANT ALL PRIVILEGES ON DATABASE mydb TO myuser; 
```

被授予所有权限后，我希望`myuser`现在可以访问`postgres`用户创建的功能和视图。但是，当我尝试使用 访问它们时`myuser`，我收到“关系被拒绝的权限...”错误。为什么是这样？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-08T01:18:53.387

原因是您需要额外的权限才能访问视图或表。数据库上的权限不包括对其中所有对象的访问。

它与功能不同：默认情况下`EXECUTE`授予特权`public`。**但是**该函数是以当前用户的权限执行的。您可能对 . 的`SECURITY DEFINER`修饰符感兴趣[`CREATE FUNCTION`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)。`SELECT`但通常在涉及的表上授权就足够了。

[根据有关默认权限的文档：](http://www.postgresql.org/docs/current/interactive/sql-grant.html)

> 根据对象的类型，初始默认权限可能包括授予`PUBLIC`. 默认情况下对表、列、模式和表空间没有公共访问权限；`CONNECT` 数据库的权限和`TEMP`建表权限；`EXECUTE` 功能特权；和`USAGE`语言的特权。

您可能对此 DDL 命令感兴趣（需要 Postgres **9.0**或更高版本）：

```
GRANT SELECT ON ALL TABLES IN SCHEMA public TO myuser; 
```

当然，在连接到有问题的数据库时（请参阅下面[的@marcel 评论](https://stackoverflow.com/questions/10491208/how-to-grant-all-privileges-on-views-to-arbitrary-user/10491275?noredirect=1#comment42690407_10491275)），并且作为具有足够权限的用户。您可能还对设置感兴趣`DEFAULT PRIVILEGES`：

*   [将数据库中特定模式的所有权限授予 PostgreSQL 中的组角色](https://stackoverflow.com/questions/10352695/grant-all-on-a-specific-schema-in-the-db-to-a-group-role-in-postgresql/10353730#10353730)

更详细的回答如何管理权限：

*   **[如何在 DATABASE vs SCHEMA 上管理用户的默认权限？](https://dba.stackexchange.com/questions/117109/how-to-manage-default-privileges-for-users-on-a-database-vs-schema/117661#117661)**

[pgAdmin](http://pgadmin.org/)具有用于更复杂的批量操作的功能：

![在此处输入图像描述](../Images/56e3bc743fc38ce30d3d7b27ead99e0a.png)

或者您可以查询系统目录以创建用于批量授予/撤销的 DDL 语句...

# javascript - 如何保存以在数据库中创建表

> ID：10491209
> 
> 赞同：-1
> 
> 时间：2012-05-08T01:07:26.500
> 
> 标签：javascript, mysql, jquery, sql-update

上周我设法设置了一个页面，单击复选框将其数据直接保存到数据库中，我现在唯一的问题是如何将新值保存到数据库中的*右列*。

我有 3 个具有不同值和名称的复选框，它们通过 ajax 发布到另一个页面。我不确定如何进行此操作。

这是我的代码片段：

```
<script type="text/javascript">

$(function() {

  $("input[type='checkbox']").on('click', function() {

    var $this = $(this);
    var isChecked = $this.prop('checked');
    var checkVal = isChecked ? $this.attr('id') : $this.attr("value");
    var userid = $this.attr('name');

    $.ajax({
      type: "GET",
      url: 'request.php?uname=' + checkVal +'&id=' + userid,
      success: function(data) {

        //Success 
        if(data == 1){  
          alert('Data was saved in db!');
        }

        //Failure 
        if(data == 0){
          alert('Data was NOT saved in db!');
        }
      }
    });
  });
}); 
```

html

```
<form id="frm" name="frm">
  <td><input  name="29" type="checkbox"          id="Paid"  value="Waiting on Payment" checked="checked"  /></td>
  <td><input  name="30" type="checkbox"      id="Repaired"  value="Waiting on Repairs"  /></td>
  <td><input  name="31" type="checkbox"  id="With Student"  value="Awaiting Pickup"  /></td>
</form> 
```

这也是数据库结构：

名称：测试

| 有薪酬的 | 修理 | 回来 |
| --- | --- | --- |
|  |  |  |
|  |  |  |

我发现自己无法做的是如何告诉 Mysql 查询将新值保存在哪一列，因为 GET 函数仅在另一页上提取值，而我无法将它们分开，以便支付支票只会保存在支付栏等..

这是请求页面，以便获取值的页面：

```
$link = mysql_connect('localhost', 'root', '');
if (!$link) {
   // error happened
   print(0);
}
mysql_select_db('test');

// sanitize the value
$value = mysql_real_escape_string($_GET['uname']);
$id = mysql_real_escape_string($_GET['id']);
// start the query
$sql = "INSERT INTO `test` VALUES ( NULL, 2, 3, '$value')";

// check if the query was executed
if(mysql_query($sql, $link)){
   // everything is Ok, the data was inserted
   print(1);    
} else {
   // error happened
   print(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:10:11.823

What you need, is to define the columns in your INSERT, like this:

```
INSERT INTO `test` (col1, col2, col3, ...) VALUES ( NULL, 2, 3, '$value') 
```

Where 'col1', 'col2', etc are your columns. That way you can define the columns you need. In VALUES() you'll only put the values for the previously defined columns. For example:

```
INSERT INTO `person` (name) VALUES ('tom') 
```

# objective-c - 使用 ARC 绘制渐变时出现 CFArrayRef 和 NSArray 的问题

> ID：10491211
> 
> 赞同：5
> 
> 时间：2012-05-08T01:07:47.327
> 
> 标签：objective-c, ios, core-graphics, automatic-ref-counting, core-foundation

我有一个 ARC 项目，正在尝试绘制垂直线性渐变。下面的代码适用于模拟器，但在设备上测试时会引发内存/`EXC_BAD_ACCESS`错误。该应用程序在以下两行代码中崩溃：

```
NSArray *colorArray = [NSArray arrayWithObjects:(__bridge id)topColor, (__bridge id)bottomColor, nil];
CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef) colorArray, colorLocations); 
```

这两行代码取自以下代码（仅供参考）：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    [self createGradientForContext:context andView:self.captionView];
    [self createGradientForContext:context andView:self.linksView];
    [self createGradientForContext:context andView:self.commentView]; 

}

- (void)createGradientForContext:(CGContextRef)context andView:(UIView *)view
{

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGFloat colorLocations[] = { 0.0f, 1.0f };

    CGColorRef topColor = [[UIColor colorWithRed:51.0f/255.0f green:51.0f/255.0f blue:51.0f/255.0f alpha:1.0f] CGColor];
    CGColorRef bottomColor = [[UIColor colorWithRed:48.0f/255.0f green:48.0f/255.0f blue:48.0f/255.0f alpha:1.0f] CGColor];
    NSArray *colorArray = [NSArray arrayWithObjects:(__bridge id)topColor, (__bridge id)bottomColor, nil];
    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge_retained CFArrayRef) colorArray, colorLocations);    

    CGRect frame = view.frame;
    CGPoint startPoint = CGPointMake(CGRectGetMidX(frame), CGRectGetMinY(frame));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(frame), CGRectGetMaxY(frame));

    CGContextSaveGState(context);
    CGContextAddRect(context, frame);
    CGContextClip(context);
    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
    CGContextRestoreGState(context);

    CGGradientRelease(gradient);
    CGColorSpaceRelease(colorSpace);

} 
```

提前感谢任何和所有的指导。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T05:06:10.920

现在解释一下你为什么会崩溃……</p>

问题是这两行：

> ```
> CGColorRef topColor = [[UIColor colorWithRed:51.0f/255.0f green:51.0f/255.0f blue:51.0f/255.0f alpha:1.0f] CGColor];
> CGColorRef bottomColor = [[UIColor colorWithRed:48.0f/255.0f green:48.0f/255.0f blue:48.0f/255.0f alpha:1.0f] CGColor]; 
> ```

这是一个非常普遍的问题；被这个问题困扰的用户对 Stack Overflow 提出了很多问题。

问题在于，因为那些 UIColor 对象在这些行之后永远不会被引用，ARC 会立即释放它们——而且因为这些 UIColor 对象是 CGColor 对象的唯一所有者，所以 UIColors 会立即释放 CGColors，给您留下两个死 CGColor 对象。然后您尝试将其放入数组中。

如您所见，从 NSArray 切换到纯 CFArray 并不能解决此问题。从 UIColor 切换到纯 CGColor 是一种解决方案；另一种是将您自己的所有权放在 CGColors 上：

```
CGColorRef topColor = CGColorRetain([[UIColor colorWithRed:51.0f/255.0f green:51.0f/255.0f blue:51.0f/255.0f alpha:1.0f] CGColor]);
CGColorRef bottomColor = CGColorRetain([[UIColor colorWithRed:48.0f/255.0f green:48.0f/255.0f blue:48.0f/255.0f alpha:1.0f] CGColor]);

⋮

CGColorRelease(topColor);
CGColorRelease(bottomColor); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T01:28:17.807

尝试只使用 a`CFArrayRef`并避免桥接，看看它是否有所作为。

```
CGFloat topColorComps[] = {51.0f/255.0f, 51.0f/255.0f, 51.0f/255.0f, 1.0f};
CGFloat bottomColorComps[] = {48.0f/255.0f, 48.0f/255.0f, 48.0f/255.0f, 1.0f};            

CGColorSpaceRef rgb = CGColorSpaceCreateDeviceRGB();
CGColorRef topColor = CGColorCreate(rgb, topColorComps);
CGColorRef bottomColor = CGColorCreate(rgb, bottomColorComps);
CGColorSpaceRelease(rgb);

CFMutableArrayRef colorArray = CFArrayCreateMutable(NULL, 2, &kCFTypeArrayCallbacks);
CFArrayAppendValue(colorArray, topColor);
CFArrayAppendValue(colorArray, bottomColor);

CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, colorArray, colorLocations);

CFRelease(colorArray);
CFRelease(topColor);
CFRelease(bottomColor); 
```

# doctrine-orm - ZF2中的DoctrineModule“反射异常”

> ID：10491222
> 
> 赞同：1
> 
> 时间：2012-05-08T01:09:48.133
> 
> 标签：doctrine-orm, zend-framework2

使用 Zend Framework 2 应用程序框架，我已经按照说明安装了 DoctrineModule 和 DoctrineORMModule。尝试执行教义.php 命令行工具时出现此错误。（仅供参考，如果我卸载 DoctrineORMModule，我不会收到错误消息）

```
Fatal error: Uncaught exception 'ReflectionException' with message 'Class Doctrine\DBAL\Connection does not exist'... 
```

有任何想法吗？

# python - 我怎样才能 转身 换行？

> ID：10491223
> 
> 赞同：15
> 
> 时间：2012-05-08T01:10:56.223
> 
> 标签：python, html, xml, regex

假设我有一个带有`<p>`和`<br>`标签的 HTML。之后，我将剥离 HTML 以清理标签。我怎样才能把它们变成换行符？

我正在使用 Python 的[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)库，如果这有帮助的话。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T01:42:21.503

如果没有一些细节，很难确定这完全符合您的要求，但这应该会给您一个想法……它假设您的 b 标签包含在 p 元素中。

```
from BeautifulSoup import BeautifulSoup
import six

def replace_with_newlines(element):
    text = ''
    for elem in element.recursiveChildGenerator():
        if isinstance(elem, six.string_types):
            text += elem.strip()
        elif elem.name == 'br':
            text += '\n'
    return text

page = """<html>
<body>
<p>America,<br>
Now is the<br>time for all good men to come to the aid<br>of their country.</p>
<p>pile on taxpayer debt<br></p>
<p>Now is the<br>time for all good men to come to the aid<br>of their country.</p>
</body>
</html>
"""

soup = BeautifulSoup(page)
lines = soup.find("body")
for line in lines.findAll('p'):
    line = replace_with_newlines(line)
    print line 
```

运行此结果...

```
(py26_default)[mpenning@Bucksnort ~]$ python thing.py
America,
Now is the
time for all good men to come to the aid
of their country.
pile on taxpayer debt

Now is the
time for all good men to come to the aid
of their country.
(py26_default)[mpenning@Bucksnort ~]$ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-09T22:12:19.603

`get_text`似乎做你需要的

```
>>> from bs4 import BeautifulSoup
>>> doc = "<p>This is a paragraph.</p><p>This is another paragraph.</p>"
>>> soup = BeautifulSoup(doc)
>>> soup.get_text(separator="\n")
u'This is a paragraph.\nThis is another paragraph.' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-18T10:38:35.790

这是@Mike Pennington 的答案的python3 版本（它真的很有帮助），我做了一个垃圾重构。

```
def replace_with_newlines(element):
    text = ''
    for elem in element.recursiveChildGenerator():
        if isinstance(elem, str):
            text += elem.strip()
        elif elem.name == 'br':
            text += '\n'
    return text

def get_plain_text(soup):
    plain_text = ''
    lines = soup.find("body")
    for line in lines.findAll('p'):
        line = replace_with_newlines(line)
        plain_text+=line
    return plain_text 
```

要使用它，只需将 Beautifulsoup 对象传递给 get_plain_text 方法。

```
soup = BeautifulSoup(page)
plain_text = get_plain_text(soup) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T23:56:24.390

我使用以下小型库来完成此操作：

[https://github.com/TeamHG-Memex/html-text](https://github.com/TeamHG-Memex/html-text)

```
pip install html-text 
```

很简单：

```
>>> import html_text
>>> html_text.extract_text('<h1>Hello</h1> world!')
'Hello\n\nworld!' 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-05-08T01:42:12.437

我不完全确定您要完成什么，但如果您只是想删除 HTML 元素，我会使用[Notepad2](http://sourceforge.net/projects/notepad2/)之类的程序并使用 Replace All 功能 - 我认为您也可以插入新行也使用全部替换。确保如果您替换`<p>`元素，您也删除了关闭（`</p>`）。另外只是一个仅供参考，正确的 HTML5`<br />`不是，`<br>`但这并不重要。Python 不会是我的首选，所以它有点超出我的知识范围，抱歉我帮不上忙。

# objective-c - 为什么我不能在 NSThread 中使用 [UITextView "setText"]？

> ID：10491229
> 
> 赞同：0
> 
> 时间：2012-05-08T01:11:41.403
> 
> 标签：objective-c, cocoa-touch

尝试在线程中设置文本时，因“EXC_BAD_ACCESS 在此处崩溃”而崩溃。

？？？

谢谢

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITextViewDelegate>
{
    UITextView *tvCommand;
}
@end

---------

-(void) Thread_Tcp
{
    [tvCommand setText:@"HELLO"];//crashes here with EXC_BAD_ACCESS
}

- (void)viewDidLoad
{
    NSThread *hThread = [NSThread alloc] initWithTarget:self selector:@selector(Thread_Tcp) object:nil];

    [hThread start];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:13:23.650

对 UI 的更改只能从 UI 线程完成。这个概念在大多数 UI 编程环境/框架中是相似的。

您可以通过调用来修复它：

```
-(void) Thread_Tcp
{
    [tvCommand performSelectorOnMainThread:@selector(setText:) withObject:@"HELLO" waitUntilDone:YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T01:14:08.287

UIKit 不是线程安全的！从后台线程更新 UI 元素可能会破坏库的内部状态并导致崩溃。如果您需要与任何 UI 元素交互，请在主线程中进行。

使用它来更新主线程中的 textView：

```
[tvCommand performSelectorOnMainThread:@selector(setText:) withObject:@"HELLO" waitUntilDone:NO]; 
```

# backbone.js - 等待集合获取主干中的所有内容

> ID：10491230
> 
> 赞同：17
> 
> 时间：2012-05-08T01:11:49.473
> 
> 标签：backbone.js

我有两套收藏。一个用于类别，另一个用于项目。我需要等待类别完成获取所有内容，以便为要获取的项目设置类别。

另外，我每次单击一个类别时都必须重新获取一个新的项目集合，因为每次单击一个类别时都会进行分页，它不会刷新或重新获取集合，因此分页代码会弄乱错误的集合. 有任何想法吗？

```
this.categoryCollection = new CategoryCollection();
this.categoryCollection.fetch();

this.itemCollection = new ItemCollection();
this.itemCollection.fetch(); 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-26T21:01:44.557

刚遇到类似的情况。我最终将 jquery.ajax 参数传递给 fetch() 调用。您可以使第一次获取同步。从[骨干文档](http://backbonejs.org/#Collection-fetch)：

> jQuery.ajax 选项也可以直接作为 fetch 选项传递

您的代码可以简化为：

```
this.categoryCollection.fetch({async:false});
this.itemCollection.fetch(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-08T01:58:16.310

一种快速的方法是将回调传递给`fetch()`调用第二个调用的第一个调用。`fetch()`接受一个`options`支持`success`(and `error`) 回调的对象。

```
var self = this;
this.categoryCollection = new CategoryCollection();
this.categoryCollection.fetch({
    success: function () {
        self.itemCollection = new ItemCollection();
        self.itemCollection.fetch();
    }
}); 
```

不是最优雅的，但它有效。你可能可以用 deferreds 做一些有创意的事情，因为返回由发生的调用`fetch()`创建的 jQuery deferred 。`$.ajax`

对于分页问题，​​如果不查看分页代码在做什么，就很难判断。您将不得不自己滚动分页内容，因为 Backbone 本身不支持它。我可能要做的是为正在查询的页面标准创建一个新的集合，并可能创建一个我可以点击的支持分页的服务器操作（将集合映射`url`到分页服务器操作）。不过，我并没有为此考虑太多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-15T15:21:25.667

由于那里的答案，我不得不对这个线程做出反应。

### 这是做这件事的唯一方法！！！

```
this.categoryCollection = new CategoryCollection();
this.itemCollection = new ItemCollection();

var d1 = this.categoryCollection.fetch();
var d2 = this.itemCollection.fetch();

jQuery.when(d1, d2).done(function () {
     // moment when both collections are populated
     alert('YOUR COLLECTIONS ARE LOADED :)'); 
}); 
```

**通过这样做，您可以同时获取两个集合，并且当两者都准备好时您可以拥有事件。因此，您不必等待完成加载第一个集合以获取其他集合，您不会进行 ajax 调用同步等，您可以在其他答案中看到！**

这是有关[延迟对象](https://api.jquery.com/jQuery.Deferred/)的文档。

注意：在这个例子中，当一个或多个延迟对象失败时，它不被覆盖。如果您还想涵盖这种情况，`.done`则必须在此示例中添加`.fail`回调`.when`并添加`error`将标记失败 d1 或 d2 的处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:27:32.060

我正在使用 RelationalModel 并创建了一个排队获取，它仅在加载完成时调用“更改”事件：

```
var MySuperClass = Backbone.RelationalModel.extend({
    //...

    _fetchQueue : [],

    fetchQueueingChange : function(name){
        //Add property to the queue
        this._fetchQueue.push(name);
        var me = this;

        //On fetch finished, remove it
        var oncomplete = function(model, response){
            //From _fetchQueue remove 'name'
            var i = me._fetchQueue.indexOf(name);
            me._fetchQueue.splice(i, 1);

            //If done, trigger change
            if (me._fetchQueue.length == 0){
                me.trigger('change');
            }
        };

        this.get(name).fetch({
            success: oncomplete, 
            error : oncomplete
        });
    },

    //...

}); 
```

该类将调用：

```
this.fetchQueueingChange('categories');
this.fetchQueueingChange('items'); 
```

我希望你能改进这一点，它对我很有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T11:56:51.440

我今天遇到了同样的问题，并想出了一个解决方案：

```
var self = this;
this.collection = new WineCollection();
this.collection.url = ApiConfig.winetards.getWineList;
this.collection.on("reset", function(){self.render()});
this.collection.fetch({reset: true}); 
```

现在，当对集合的提取完成时，会触发“重置”，并在“重置”时调用视图的 render() 方法。

使用`{async: false}`不是处理 Backbone 的 fetch() 的理想方式。

* * *

## 回答 #6

> 赞同：-10
> 
> 时间：2012-05-08T09:19:13.177

只需将 jQuery 设置为同步

```
$.ajaxSetup({
  async: false
});   
this.categoryCollection.fetch();
this.itemCollection.fetch();
$.ajaxSetup({
  async: true
}); 
```

我猜这是最简单的解决方案。当然，在这些 fetch 运行时启动新请求也将以同步方式启动，这可能是您不喜欢的。

# java - 扫描仪 next() 作为参数

> ID：10491234
> 
> 赞同：1
> 
> 时间：2012-05-08T01:12:47.867
> 
> 标签：java, next

我有这种格式的文件。50 xxx/ 70 aaa/ 90 ccc/

该程序将文件保存到默认目录，我认为它试图从中读取相同的目录。但它只是不扫描任何东西......请问有什么问题？我不擅长编程对不起

我希望它读取 50 到“之前”xxx 到“文本”，然后在 aPf.insert（之前，文本）中使用这两个东西。

```
File file = new File("poznamky.txt");
        Scanner scanner = null;
        int prior;
        String text;

        try {
            scanner = new Scanner(file);
            scanner.useDelimiter("/");

         while (scanner.hasNext()) {

          prior = scanner.nextInt();
          text = scanner.next();
          aPf.insert(prior, text);

}

} catch (FileNotFoundException e) {

e.printStackTrace();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:28:19.693

我认为分隔符`/`没有正确转义。尝试使用 like`\/`来逃避它。请参阅此[在正则表达式中转义正斜杠以](https://stackoverflow.com/questions/6076229/escaping-a-forward-slash-in-a-regular-expression)获得更清晰的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:33:56.327

我认为有两种方法可以解决这个问题。第一个是使用 reset() 来重置分隔符。所以我的意思是为 nextInt 使用默认分隔符''，然后调用 useDelimiter('/') 进行下一次调用。然后调用scanner.reset()。

解决此问题的另一种方法可能是根据 / 分隔符获取字符串。然后根据空格进一步拆分该字符串作为下一个分隔符。也许使用 StringTokenizer 来完成这个。

# ruby-on-rails - Spree 1.1.0 演示缺少产品图片

> ID：10491236
> 
> 赞同：0
> 
> 时间：2012-05-08T01:13:34.077
> 
> 标签：ruby-on-rails, spree

我在 mac osx、rails 3.2.3、ruby 1.9.3-p194、spree 1.1.0、rvm 1.10.2 上。ImageMagick 是使用自制软件安装的，版本为 6.7.5-7

*   首先我安装了 spree`gem install spree`
*   然后创建了新的rails项目`rails new mystore`
*   为了将 spree 安装到我的 rails 应用程序，我做了`cd mystore`，然后`spree install`

该站点运行良好，但在运行演示站点时看不到任何图像。我还看到该`public/spree/products`文件夹​​是空的。

知道为什么在安装过程中从未创建图像吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:00:20.600

原来 imagemagick 没有正确安装在我的系统上。`identify`您可以通过在命令行运行来检查这一点。如果它出错，那么 imagemagick 安装不正确。

一旦我正确安装了 imagemagick，我重新创建了演示项目并显示了图像。

很难说有什么问题，因为大礼包安装没有引发任何错误。因此，对于遇到此问题的任何人，只需检查以确保 imagemagick 正常工作。

# php - 在 php 表单模板变量中嵌入 php 函数

> ID：10491241
> 
> 赞同：0
> 
> 时间：2012-05-08T01:14:12.640
> 
> 标签：php, html, templates

我正在尝试在被分配为 php 变量的模板 html 表单中使用 php 函数。我知道我可以使用标准 $ 变量，它们会显示正常，但我不知道如何使用函数。

本质上，我有一个包含一组值的数据库，我想用这些值来填充下拉选择表单。我需要在几个地方显示表单，因此使用变量模板化表单是有意义的。

到目前为止，我有以下 PHP。任何帮助将不胜感激！该数组工作正常 - 但在我正在努力的表单中显示它。

> ```
> $query = "SELECT 
>   property.propertyid,
>   property.reference,
>   property.userid, 
>   users.userid,
>   users.username
> FROM 
>   property
>     LEFT JOIN users ON property.userid = users.userid
> WHERE 
>   property.userid = ".$varuserid."
>   ";
> 
> $result = mysql_query($query) or die(mysql_error());
> $listarr=array();  
> while($qy = mysql_fetch_array($result)){
> $listarr[] = "<option value=\"".$qy['propertyid']."\">".$qy['reference']."</option>";
> }
> 
> $form = <<<HTML
> <form name="insert" method="post" action="?page=account&amp;a=insert&amp;form=1">
>   <table width="100%" border="0" cellpadding="4" cellspacing="0">
>     <tr> 
>       <td width="24%" align="left" valign="top">Property ID</td>
>       <td width="76%">      
>         <select name="propertyid" size="1">
> 
> foreach($listarr as $key => $value) { echo $value }
> 
>         </select>
>       </td>
>     </tr>
>     <tr> 
>       <td align="left" valign="top">&nbsp;</td>
>       <td>
>       <input name="userid" type="hidden" id="userid" value=$varuserid />
>       <input type="submit" name="submit" value="Insert transaction!" /></td>
>     </tr>
>   </table>
> </form>
> HTML; 
> ```

谢谢，西蒙`enter code here`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:18:08.783

这是我倾向于做的：

```
<select name="propertyid" size="1">    
<?php foreach($listarr as $key => $value) { ?>
    <option value="<?php echo $value; ?>"><?php echo $value; ?></option> 
<?php } ?>
</select> 
```

这样你仍然可以在页面上看到格式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:19:51.057

您不能在[heredoc](http://php.net/manual/en/language.types.string.php)中使用循环，但可以使用变量。

由于您已经有了列表，您可以做的是：

```
while($qy = mysql_fetch_array($result)){
    $listarr[] = "<option value=\"".$qy['propertyid']."\">".$qy['reference']."</option>";
}
$list = implode(" ", $listarr); 
```

在你的heredoc中：

```
<select name="propertyid" size="1">
    {$list}
</select> 
```

**编辑：**请注意，您需要对 heredoc 中包含的所有变量执行此操作，因此：

```
<input name="userid" type="hidden" id="userid" value={$varuserid} />
                                                     ^          ^ 
```

# joomla - 如何使用 document->_styleSheets = 从 Joomla 头部清除样式表

> ID：10491243
> 
> 赞同：2
> 
> 时间：2012-05-08T01:14:36.660
> 
> 标签：joomla, joomla2.5

Joomla 2.5

按照建议，我们将使用

```
$document   = &JFactory::getDocument()
document->_styleSheets= array(); 
```

并将其放置在 head 加载之前/之后的模板中，以从 head 中清除任何 css 样式表，这仅适用于模板 css 文件、k2 css 文件，但不适用。如果您有使用样式表的模块，即使它们使用`$document->addStyleSheet(path);`得当，清除也不适合它们

我还测试`setHeadData()` 了所有可以“找到”的可能代码（joomla 在文档中不好）并且没有简单的方法来重建头部，而且它们都不会保存来自模块或插件或任何其他组件的样式表，但 k2。

有谁知道从所有样式或 js 调用中清除头部并将自己的头部放置在其中的正确方法？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:20:46.263

通过这种方式，您只能从组件中清除样式，而不能从模块或插件中清除样式。目前无法为所有类型处理此问题。唯一的方法是使用“Replacer”组件来摆脱不需要的脚本或样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T05:31:34.473

这可以使用系统插件来完成。

一些可用的优化插件允许您从输出中删除不需要的脚本和样式表。

[http://jproven.com/extensions/jbetolo](http://jproven.com/extensions/jbetolo)

[http://sourceforge.net/projects/jch-optimize/](http://sourceforge.net/projects/jch-optimize/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T23:30:03.603

您可以像上面所说的那样清理模板代码中的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T08:37:38.303

对于任何搜索此内容的人，这里有一个适用于 Joomla 2.5 的代码：

```
$doc= JFactory::getDocument();
unset($doc->_styleSheets['http://'.$_SERVER[HTTP_HOST].$this->baseurl.'/media/path/to/file.css']); 
```

# sql - 选择 SQL Server CE 中的前两个字符

> ID：10491251
> 
> 赞同：4
> 
> 时间：2012-05-08T01:15:27.970
> 
> 标签：sql, sql-server-ce

**[回答]**

谢谢大家！解决以下问题的代码是：

```
SELECT ID
FROM Schedule
WHERE (SUBSTRING(Time, 1, 2) = DATEPART(hh, GETDATE())) 
```

* * *

如何在 SQL Server CE 中选择前两个字符？

例如：

```
+-----+-----------+------------+
+ Day +  Time     +  ID        +
+-----+-----------+------------+
+ 1   +  08:00:00 +  A1        +
+ 1   +  09:00:00 +  A2        +
+ 1   +  09:30:00 +  A3        +
+ 1   +  10:15:00 +  A4        + 
+-----+-----------+------------+ 
```

`Time`列是一种`nvarchar`类型。

然后，我想`ID`根据实时时间选择唯一的时间，比如只`08`选择`08:00:00`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T01:27:17.297

SUBSTRING 在 CE 中可用 - [http://msdn.microsoft.com/en-us/library/aa275646(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa275646(SQL.80).aspx)

```
SUBSTRING ( expression , start , length ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T01:17:47.657

SQL Standard 方法由语法图给出：

```
<character substring function> ::=
         SUBSTRING <left paren> <character value expression> FROM <start position>
         [ FOR <string length> ] [ USING <char length units> ] <right paren> 
```

因此，在此示例中：

```
SELECT SUBSTRING(Time FROM 1 FOR 2) FROM AnonymousTable; 
```

一些 DBMS（Oracle 和那些模拟 Oracle）提供了一个 SUBSTR() 函数：

```
SELECT SUBSTR(Time, 1, 2) FROM AnonymousTable; 
```

The`1`是起始偏移量，从 1 开始计数，并且 the`2`是长度（不是结束偏移量，尽管在此示例中它们是相同的，以及任何其他起始为 1 的偏移量）。

您的特定 DBMS 可能还有其他方法。例如，使用 Informix，您可以编写：

```
SELECT Time[1,2] FROM AnonymousTable; 
```

不过这一次，下标是开始和停止位置。

Informix 支持所有这三个。我不知道任何其他使用下标表示法的 DBMS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T01:16:58.207

你的意思是这样吗？

```
SELECT LEFT(Time, 2) From Table 
```

# c# - C#中的并行性

> ID：10491252
> 
> 赞同：0
> 
> 时间：2012-05-08T01:15:39.543
> 
> 标签：c#, parallel-processing

我读到 .NET C# 内置了任务和数据并行性。如果我在具有 4 个内核（4 个 Windows 任务管理器）的计算机中的程序中运行 for/foreach 循环，循环是否会均匀分布到 4核心？如果不是，为什么 for/foreach 循环默认不在 4 核并行运行？

一般来说，并行性比传统编程更好吗？利大于弊吗？我正在进行大量数据处理（一堆拉取、for/foreach 循环）并且需要更快地完成这些 for/foreach 循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:18:36.257

> 如果我在具有 4 个内核（Windows 任务管理器的 4 个窗口）的计算机中运行我的程序中的 for/foreach 循环，循环是否会均匀分布到 4 个内核中？

你的意思是任务会在核心上自动并行化吗？不。为此，您需要使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，例如 Parallel.ForEach。

> 一般来说，并行性比传统编程更好吗？

这取决于。

> 利大于弊吗？

这取决于。

> 我正在进行大量数据处理（一堆拉取、for/foreach 循环）并且需要更快地完成这些 for/foreach 循环。

不要再猜测并行化是您的答案。拿出探查器，找出瓶颈在哪里。例如，如果缓慢源于必须通过网络连接与数据库通信，则并行化将无济于事。如果瓶颈是循环内的操作并且这些操作是可并行的，这*可能会有所帮助。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:19:58.437

有一个专门用于并行处理的实现（如@xbonez 所述）。

.Net 4.0 确实有一个出色的并行库（MSDN：[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-08T01:23:14.243

它不是在 4 个核心上运行，因为它不是每次都有效或需要。

这取决于您的程序和程序的负载。并行化不需要 1 毫秒/周期的函数效率不高。如果您对可以拆分的大量数据进行大量长时间运行的计算或搜索，那么您可以/应该并行化您的循环。

对于该主题，我建议阅读[http://www.amazon.com/Multi-Core-Programming-Increasing-Performance-Multi-threading/dp/0976483246/ref=sr_1_fkmr0_2?ie=UTF8&qid=1336440123&sr=8-2-fkmr0](https://rads.stackoverflow.com/amzn/click/com/0976483246)

# hadoop - 如何使用 hadoop fs -getmerge 下载 .deflate 文件？

> ID：10491255
> 
> 赞同：5
> 
> 时间：2012-05-08T01:16:23.137
> 
> 标签：hadoop, compression

我试过跑步

```
hadoop fs -getmerge 
```

在 .deflate 文件的目录上。结果是我本地机器上的一个**压缩文件。**

**以未压缩**格式将整个目录下载到我的本地计算机上的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:09:23.557

尝试这个：

```
hadoop fs -text /some/where/job-output/part-* 
```

# android - 如何归档 Android 存储库？

> ID：10491261
> 
> 赞同：2
> 
> 时间：2012-05-08T01:17:18.437
> 
> 标签：android, git, repository, archive-tar

使用我创建的常用 git存储库`git clone`，我可以轻松地将`git archive`其导出到 tar 存档，如果我只对当前快照感兴趣，而不是 git 存储库的整个历史记录。
我可以对使用`repo init`and创建的 Android 存储库执行相同的操作`repo sync`吗？如果是这样，我该怎么做？我不熟悉 Android`repo`脚本的作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:28:58.020

If you just want a snapshot, why not simply use `tar`? (`tar` has `--exclude` pattern.)

# php - 如何从数据库中回显此特定值

> ID：10491264
> 
> 赞同：0
> 
> 时间：2012-05-08T01:17:41.917
> 
> 标签：php, sql, echo

我试图回显一个特定的值，但是每当我运行代码时，我得到的都是 **nothing**。

我的代码在这里：

```
$studentname = mysql_query("SELECT * FROM $alias WHERE FBID=$user") or die ('Error: '.mysql_error ());
while($row = mysql_fetch_array($studentname))
{
  $queried_name = $row['Name'];
  echo 'Name: ' . $queried_name;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:20:06.037

`$name`是 MySQL 连接的资源句柄。使用不同的变量，并在循环内回显

```
$name = mysql_query("SELECT * FROM $alias WHERE FBID=$user") or die ('Error: '.mysql_error ());
while($row = mysql_fetch_array($name))
{
  $queried_name = $row['name'];
  echo 'Name: ' . $queried_name;

  //optionally just do
  //echo 'Name: ' . $row['name'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:31:19.900

`$name`是你的资源处理程序，因为这个......

```
$name = mysql_query("SELECT * FROM $alias WHERE FBID=$user") ... 
```

并且您收到的错误是因为您尝试在循环内回显资源处理程序

```
echo ( 'Name: '.$name ); 
```

我理解这种混淆，我建议您相应地命名变量以避免这种情况。我总是用前缀来命名我的资源处理程序，`$rs`以明确它是一种资源。

# python - 如何原谅 Python 中未声明的变量？

> ID：10491270
> 
> 赞同：0
> 
> 时间：2012-05-08T01:18:32.933
> 
> 标签：python, variables

最近我一直在创建一个游戏，但我遇到了一个问题。要计算你对敌人的打击，它使用变量**Sword**。

此时玩家可能购买了也可能没有购买剑，因此我收到一条错误消息：“未声明变量”。有没有办法解决尚未声明的变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T01:26:29.297

你有两个选择。

首先是确保玩家总是有一个`sword`变量。设置为`None`在玩家获得剑之前，当你需要知道玩家是否有剑时，检查变量是否为`None`：

```
 sword = None

 # do lots of stuff here

 if sword is None:
    print 'Hey, no sword!'
 else:
    print 'Chop, chop, chop!' 
```

*如果剑不允许为空字符串或整数值 0，*则另一种写法是：

```
 if sword:
    print 'Chop, chop, chop.' 
```

您的第二个选择是将每个对剑变量的引用包装在 try 块中并吞下可能引发的 NameError ：

```
 try:
    if sword == 10:
        print 'Choppity chop chop chop.'
 except NameError:
    pass 
```

第一个解决方案（好得多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:23:30.167

在没有看到更多代码的情况下，我会说“原谅尚未声明的变量”的常用方法是处理`NameError`异常的可能性。

```
try: 
  # variable sword may or may not exist here..
  sword
except NameError:
  # handle this 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T01:26:04.863

有几种选择。wim 提供的很好，但是如果您的变量实际上是 dict 中的键，那么您可以像这样缩短它：

```
has_sword = my_items.get('sword', False) 
```

该`get()`方法中的第二个值是剑键不存在时的默认值。

专业提示： globals() 和 locals() 分别提供对在全局范围和函数中声明的变量的直接访问。这意味着`globals().get('sword', False)`应该对您全局声明的变量有效。

最后，正如 wim 所建议的那样，您并没有真正以正确的方式解决这个问题。一种更 Pythonic 的方法是使用这样的类：

```
class Player():
  def __init__(self)
    self.sword = None

player = Player()
if player.sword:
  print "Off with his head!" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T03:17:54.530

我不确定你的游戏的全部范围。“剑”是玩家角色可以携带的唯一物品，还是它们是开放式的隐含物品栏？（例如，玩家角色有一个麻袋或背包，并且可以在游戏过程中捡起物品。）

如果你想给角色一个物品栏，你可以使用一个简单的列表，或者，如果所有的物品都是独一无二的——即角色一次只能有一把剑，那么一套是合适的。

```
class Player(object):
    def __init__(self):
        self.inventory = set( )

    @property
    def has_sword(self):
        return ('sword' in self.inventory)

me = Player( )
me.inventory.add('sword')
if me.has_sword:
    print "swish!" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T01:29:50.743

您可以检查变量是否存在于全局或本地字典中，或使用：

```
try:
    a = b
except NameError:
    a = b = 1 
```

# php - PHP 意外的 T_encapsed

> ID：10491274
> 
> 赞同：1
> 
> 时间：2012-05-08T01:18:48.640
> 
> 标签：php

我运行一个 PHp 脚本来在数据库上显示一个表，但我得到了错误 `Parse error: parse error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING in`

下面的行是查询行

```
echo "<td><img src='" .$row['ImageURL'] ."' style='width: 200px; height: 150px;' />."-".$row['Name'] ."</td>""; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:22:09.467

后面有一个不必要和错误的连接`/>`，最后有一个额外的引号：

```
echo "<td><img src='" .$row['ImageURL'] ."' style='width: 200px; height: 150px;' /> -".$row['Name'] ."</td>";
//-------------------------------------------------------------------------------^^^^--------------------^^^
//-----------------------------------------------------------Remove dot and quote---------------Remove quote 
```

整个事情最好不要在双引号字符串中进行连接。将数组元素包装在`{}`.

```
 echo "<td><img src='{$row['ImageURL']}' style='width: 200px; height: 150px;' /> - {$row['Name']} </td>"; 
```

但是，您可能应该确保您已经通过以下方式转义了这些以用于 HTML 输出[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)：

```
$imgurl = htmlspecialchars($row['ImageURL'], ENT_QUOTES);
$name = htmlspecialchars($row['Name']);
echo "<td><img src='$imageurl' style='width: 200px; height: 150px;' /> - $name </td>"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T01:22:28.110

简单地：

```
echo "<td><img src='" .$row['ImageURL'] ."' style='width: 200px; height: 150px;' /> - ".$row['Name'] ."</td>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T01:23:22.037

这就是为什么你不回显 html

`"`您在图像元素之后缺少 a 。

这更具可读性...

```
<td><img src="<?php echo $row['ImageURL'] ?>" style="..."><?php echo $row['Name'] ?></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T01:20:57.330

你最后有一个额外`"`的 `."</td>"";` 它应该是`."</td>";`

# http - 将参数传递到 servlet 时出错

> ID：10491278
> 
> 赞同：1
> 
> 时间：2012-05-08T01:19:54.600
> 
> 标签：http, servlets

我想实现一个servlet来从浏览器获取参数并使用http post而不是http get插入到db中。

servlet 将从诸如[http://localhost:8080/NewServlet?firstname=me&middlename=you&lastName=secret&location=here](http://localhost:8080/NewServlet?firstname=me&middlename=you&lastName=secret&location=here)之类的 url 接收参数 ，并插入到数据库中，但就像我无法正确完成一样。

这是我试图运行的一段代码

```
 public class NewServlet extends HttpServlet {

  public void doPost(HttpServletRequest request,

  HttpServletResponse response)

  throws IOException, ServletException{

  response.setContentType("text/html");

  PrintWriter out = response.getWriter();  

  String firstName = request.getParameter("firstname");

  String middleName = request.getParameter("middlename");

  String lastName = request.getParameter("lastname"); 

  String location = request.getParameter("location");

  String result;

  java.sql.Connection connDB = null;

  try {

            Class.forName("org.postgresql.Driver");

        } catch (ClassNotFoundException ex) {

            Logger.getLogger(DBConnection.class.getName()).log(Level.SEVERE, null, ex);
        }

        try {

            connDB = DriverManager.getConnection("jdbc:postgresql://" + "localhost" + ":" + 5432 + "/" + "mydb", "username", "secret");

            connDB.setAutoCommit(false);

            System.out.println("Connection established : [" + connDB.toString() + "]");

            java.sql.Statement bankStmt = connDB.createStatement();

           java.sql.Statement stt = connDB.createStatement();

            bankStmt.execute("INSERT INTO full_names(firstname, secondname, lastname) VALUES('"+firstName+"', '"+middleName+"', '"+lastName+"' )");

            java.sql.Statement bnk =connDB.createStatement();

            bnk.execute("INSERT INTO employee_details(location) VALUES('"+location+"')");

           }

            connDB.commit();

        } catch (SQLException ex) {

            ex.printStackTrace();

            try {

                connDB.rollback();

            } catch (SQLException ex1) {

                ex1.printStackTrace();

                Logger.getLogger(DBConnection.class.getName()).log(Level.SEVERE, null, ex1);

            }
            Logger.getLogger(DBConnection.class.getName()).log(Level.SEVERE, null, ex);

        }

  out.println("<b><font color='blue'>Your FirstName is :</font></b>" 

  + "<b>"+ firstName +"</b>" + "<br>");

  out.println("<b><font color='blue'>Your Middle Name is :</font></b>" 

  + "<b>"+ middleName +"</b>" + "<br>");

  out.println("<b><font color='blue'>Your Last Name is :</font></b>"  

  + "<b>"+ lastName +"</b>");
  }
} 
```

当我尝试使用 url [http://localhost:8080/NewServlet?firstname=me&middlename=you&lastName=secret&location=here运行代码时](http://localhost:8080/NewServlet?firstname=me&middlename=you&lastName=secret&location=here)

我收到以下错误：

> HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET
> 
> 类型状态报告
> 
> 此 URL 不支持消息 HTTP 方法 GET
> 
> 描述 请求的资源不允许指定的 HTTP 方法（此 URL 不支持 HTTP 方法 GET）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:05:42.563

         您只在 servlet 中定义了 do Post() 方法。但是当您使用 [http://localhost:8080/NewServlet?firstname=me&middlename=you&lastName=secret&location=here 访问](http://localhost:8080/NewServlet?firstname=me&middlename=you&lastName=secret&location=here)时，
会调用您尚未定义的 doGet() 。只需将 doPost() 方法中的代码复制并粘贴到同一个 servlet 中的 doGet() 中即可。
像这样 ：

```
public void doGet{
 //your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:15:42.063

> *HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET*

好吧，这本身就已经是全部答案了。您正在发送一个 GET 请求，但您的 servlet 实现不支持它。根据你写的代码，它只支持 POST 请求。您在任何地方都没有`doGet()`实现，但只有`doPost()`.

我不确定功能要求是什么以及为什么您不清楚此错误，但要让您的代码运行，您应该发送一个 POST 请求，或者在您的 servlet中重命名`doPost`方法。`doGet`

* * *

**与具体问题无关**，您的代码还有其他问题，其中包括 SQL 注入漏洞、数据库资源泄漏和混合控制器中的视图。要正确学习 servlet，您可能需要从[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)开始。

# ubuntu - Epson TM-T88V 格式化

> ID：10491282
> 
> 赞同：2
> 
> 时间：2012-05-08T01:20:25.080
> 
> 标签：ubuntu, epson

我设置了一台运行 Ubuntu Server 12.04 的小机器，并直接插入了 Epson TM-T88V。起初我能够很好地打印（使用 lp），但自动切纸器无法正常工作。我意识到它只是没有使用驱动程序中包含的正确 PPD 文件，因此一旦我将打印机设置为使用该切割，该切割就开始正常工作。

但是，一旦我使用正确的 PPD 文件得到它，文本打印得非常轻，几乎难以阅读。当我尝试将 ESC/POS 命令直接传递给它时，基本上就像我回到了原来的情况（深色文本，没有剪切）。

这真的是我第一次涉足热敏打印机，所以如果我遗漏了一些简单的东西，我深表歉意。我会以完全错误的方式解决这个问题吗？任何建议将不胜感激。

我最初在 SuperUser 上发布了这个，但我想由于打印机在物理上工作正常，这显然是我在编程方面犯的一个错误。

这是我用来打印的命令（它是 Node.js）。我不知道是否值得注意的是，当我编写这个应用程序并让它在我的 MBP 上运行时，我使用的是`lpr`not `lp`。无论出于何种原因，`lpr`不在服务器上做*任何事情*。

```
var toPrint = "echo '" +
            "Order for: " + req.body.name + "\n" +
            "Email: " + req.body.email + "\n\n" +
            "Food Items Ordered: \n" + foodItems +
            "\n\nThank you for using WhyWait!' | lp";
// Print the order!
var printCmd = exec(toPrint, function (error, stdout, stderr) {
  if (error !== null) {
   console.log('exec error: ' + error);
  }
  console.log('Order printed!\n');
}); 
```

这是 PPD 文件。

```
*PPD-Adobe: "4.3"
*% Copyright (C) Seiko Epson Corporation 2010\. All rights reserved.
*%
*% Driver for Epson Thermal Printers Series.

*FormatVersion: "4.3"
*FileVersion: "1.0"
*LanguageVersion: English
*LanguageEncoding: ISOLatin1
*PCFileName: "TM-T88V.PPD"
*Manufacturer: "EPSON"
*Product: "(ThermalPrinter)"
*ModelName:"EPSON TM-T88V"
*ShortNickName:"TM-T88V"
*NickName: "EPSON TM-T88V (rastertotmt)"
*PSVersion: "(3010.000) 0"
*LanguageLevel: "3"
*ColorDevice: False
*DefaultColorSpace: Gray
*FileSystem: False
*Throughput: "1"
*LandscapeOrientation: Plus90
*VariablePaperSize: True
*TTRasterizer: Type42
*cupsVersion: 1.2
*cupsManualCopies: True
*cupsModelNumber: 1
*cupsFilter: "application/vnd.cups-raster 0 rastertotmt"

*OpenGroup: General/General

*%Page size settings.
*OpenUI *PageSize/Media Size: PickOne
*OrderDependency: 11 AnySetup *PageSize
*DefaultPageSize:RP80x297
*PageSize RP80x297/Roll Paper 80 x 297 mm: "<</PageSize[204 841.8]/ImagingBBox null>>setpagedevice"
*PageSize RP58x297/Roll Paper 58 x 297 mm: "<</PageSize[141.7 841.8]/ImagingBBox null>>setpagedevice"
*CloseUI: *PageSize

*OpenUI *PageRegion: PickOne
*OrderDependency: 11 AnySetup *PageRegion
*DefaultPageRegion:RP80x297
*PageRegion RP80x297/Roll Paper 80 x 297 mm: "<</PageSize[204 841.8]/ImagingBBox null>>setpagedevice"
*PageRegion RP58x297/Roll Paper 58 x 297 mm: "<</PageSize[141.7 841.8]/ImagingBBox null>>setpagedevice"
*CloseUI: *PageRegion

*DefaultImageableArea: RP80x297
*ImageableArea RP80x297/Roll Paper 80 x 297 mm: "0 0 204 841.8"
*ImageableArea RP58x297/Roll Paper 58 x 297 mm: "0 0 141.7 841.8"

*DefaultPaperDimension: RP80x297
*PaperDimension RP80x297/Roll Paper 80 x 297 mm: "204 841.8"
*PaperDimension RP58x297/Roll Paper 58 x 297 mm: "141.7 841.8"

*%Custom page size settings.
*MaxMediaWidth: "204"
*MaxMediaHeight: "5669.2"
*NonUIOrderDependency: 100 AnySetup *CustomPageSize
*CustomPageSize True: "pop pop pop <</PageSize [ 5 -2 roll ]/ImagingBBox null>>setpagedevice"
*ParamCustomPageSize Width: 1 points 72 204
*ParamCustomPageSize Height: 2 points 72 5669.2
*ParamCustomPageSize WidthOffset:  3 points 0 0
*ParamCustomPageSize HeightOffset: 4 points 0 0
*ParamCustomPageSize Orientation:  5 int 0 0

*%Resolution settings.
*OpenUI *Resolution/Resolution: PickOne
*OrderDependency: 10 AnySetup *Resolution
*DefaultResolution: 180x180dpi
*Resolution 180x180dpi/180 x 180 dpi: "<</HWResolution[180 180]/cupsRowCount 24>>setpagedevice"
*CloseUI: *Resolution

*%Head speed settings.
*TmtSpeedValue 1: "13"
*TmtSpeedValue 2: "9"
*TmtSpeedValue 3: "5"
*TmtSpeedValue 4: "1"

*OpenUI *TmtSpeed/Printing Speed: PickOne
*OrderDependency: 10 AnySetup *TmtSpeed
*DefaultTmtSpeed: Auto
*TmtSpeed Auto/Use the printer settings : ""
*TmtSpeed 1/1st (Fast): ""
*TmtSpeed 2/2nd: ""
*TmtSpeed 3/3rd: ""
*TmtSpeed 4/4th (Slow): ""
*CloseUI: *TmtSpeed

*%Exit feed direction settings.
*TmtReverseFeedDirection: False

*%Paper reduction settings.
*OpenUI *TmtPaperReduction/Paper Reduction: PickOne
*OrderDependency: 11 AnySetup *TmtPaperReduction
*DefaultTmtPaperReduction: Bottom
*TmtPaperReduction Off/None: ""
*TmtPaperReduction Top/Top margin: ""
*TmtPaperReduction Bottom/Bottom margin: ""
*TmtPaperReduction Both/Top & Bottom margins: ""
*CloseUI: *TmtPaperReduction

*%Paper source settings.
*OpenUI *TmtPaperSource/Paper Source: PickOne
*OrderDependency: 11 AnySetup *TmtPaperSource
*DefaultTmtPaperSource: DocFeedCut
*TmtPaperSource DocFeedCut/Document [Feed, Cut]: ""
*TmtPaperSource DocFeedNoCut/Document [Feed, NoCut]: ""
*TmtPaperSource DocNoFeedCut/Document [NoFeed, Cut]: ""
*TmtPaperSource DocNoFeedNoCut/Document [NoFeed, NoCut]: ""
*TmtPaperSource PageFeedCut/Page [Feed, Cut]: ""
*TmtPaperSource PageFeedNoCut/Page [Feed, NoCut]: ""
*TmtPaperSource PageNoFeedCut/Page [NoFeed, Cut]: ""
*CloseUI: *TmtPaperSource

*CloseGroup: General

*OpenGroup: Buzzer Control/Buzzer Control

*%Buzzer settings.
*OpenUI *TmtBuzzerControl/Buzzer: PickOne
*OrderDependency: 11 AnySetup *TmtBuzzerControl
*DefaultTmtBuzzerControl: Off
*TmtBuzzerControl Off/Not used: ""
*TmtBuzzerControl Before/Sounds before printing: ""
*TmtBuzzerControl After/Sounds after printing: ""
*CloseUI: *TmtBuzzerControl

*%Sound pattern settings.
*OpenUI *TmtSoundPattern/Sound Pattern: PickOne
*OrderDependency: 11 AnySetup *TmtSoundPattern
*DefaultTmtSoundPattern: Internal
*TmtSoundPattern Internal/Internal buzzer: ""
*TmtSoundPattern A/Option buzzer (Pattern A): ""
*TmtSoundPattern B/Option buzzer (Pattern B): ""
*TmtSoundPattern C/Option buzzer (Pattern C): ""
*TmtSoundPattern D/Option buzzer (Pattern D): ""
*TmtSoundPattern E/Option buzzer (Pattern E): ""
*CloseUI: *TmtSoundPattern

*%Buzzer repeat settings.
*OpenUI *TmtBuzzerRepeat/Buzzer Repeat: PickOne
*OrderDependency: 11 AnySetup *TmtBuzzerRepeat
*DefaultTmtBuzzerRepeat: 1
*TmtBuzzerRepeat 1/1: ""
*TmtBuzzerRepeat 2/2: ""
*TmtBuzzerRepeat 3/3: ""
*TmtBuzzerRepeat 5/5: ""
*CloseUI: *TmtBuzzerRepeat

*CloseGroup: Buzzer Control

*OpenGroup: Cash Drawer Control/Cash Drawer Control

*%Drawer settings.
*OpenUI *TmtDrawer1/Cash Drawer #1: PickOne
*OrderDependency: 11 AnySetup *TmtDrawer1
*DefaultTmtDrawer1: Off
*TmtDrawer1 Off/Does not open: ""
*TmtDrawer1 Before/Open before printing: ""
*TmtDrawer1 After/Open after printing: ""
*CloseUI: *TmtDrawer1

*OpenUI *TmtDrawer2/Cash Drawer #2: PickOne
*OrderDependency: 11 AnySetup *TmtDrawer2
*DefaultTmtDrawer2: Off
*TmtDrawer2 Off/Does not open: ""
*TmtDrawer2 Before/Open before printing: ""
*TmtDrawer2 After/Open after printing: ""
*CloseUI: *TmtDrawer2

*CloseGroup: Cash Drawer Control

*%Drawer pulse settings.
*TmtDrawer1Pulse On: 10
*TmtDrawer1Pulse Off: 100
*TmtDrawer2Pulse On: 10
*TmtDrawer2Pulse Off: 100

*%Pitch of feed settings.
*TmtFeedPitch: 360

*%Used command set version.
*TmtCommandSetVersion OutputRaster: 2

*%Line number of band.
*TmtBandLines: 256

*%Message defines.
*TmtMessage ParameterError: "Invalid parameter."

*% End 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-16T01:59:35.297

大多数热敏打印机有两种打印方法：

1.  **普通**(2D) - 例如从 Libre Office 打印
2.  **原始**（通用文本/原始 PCL 命令） - 例如直接从控制台打印原始文件。

您提到的打印机，TM88是流行的用于打印收据的热敏打印机；两者都可以；它具有原始功能，但使用正确的软件可以从其他应用程序打印。TM88 使用的原始语言是`ESCP2`或更常用`ESC/POS`的。爱普生的所有 TM 系列打印机都`ESC/POS`可以。

**您遇到的麻烦是您试图将原始命令发送到需要一些 2D 内容的驱动程序。有几种方法可以实现这一点。**

1.  将两台打印机（一台到 2D 驱动程序，一台到通用/文本驱动程序——这在 CUPS 中称为“原始，通用”）打印到一台，然后再打印到另一台。
2.  了解您正在执行的操作的原始命令。在这种情况下，它通常是：十六进制：（`0x1B 0x69`剪纸）
3.  `lpr -o raw`保持驱动程序安装，但通过使用文件系统中的平面文件直接向原始模式下的 cups 发出命令来强制使用原始文件。

奖励：需要踢出现金抽屉吗？`0x10 0x14 0x01 0x00 0x05`（脉冲/现金抽屉）。警告，请对照您的 ESCP 编程指南交叉引用所有原始命令。

# android - Arduino PWM 到 Android IOIO PWM

> ID：10491289
> 
> 赞同：1
> 
> 时间：2012-05-08T01:21:42.433
> 
> 标签：android, arduino, pwm

我正在使用 LED RGB LightStrips 进行 PWM 项目。我有根据链接构建的电路

[http://www.ladyada.net/products/rgbledstrip/](http://www.ladyada.net/products/rgbledstrip/)

现在我正在尝试放弃 Arduino 并应用 Android IOIO 板。我的arduino代码如下...

```
void setup() {
pinMode(REDPIN, OUTPUT);
pinMode(GREENPIN, OUTPUT);
pinMode(BLUEPIN, OUTPUT);
}

void loop() {
  int r, g, b;

  // fade from blue to violet
  for (r = 0; r < 256; r++) { 
        analogWrite(REDPIN, r);
    delay(FADESPEED);
  } 
      // fade from violet to red
  for (b = 255; b > 0; b--) { 
                analogWrite(BLUEPIN, b);
        delay(FADESPEED);
          } 
  // fade from red to yellow
    for (g = 0; g < 256; g++) { 
    analogWrite(GREENPIN, g);
    delay(FADESPEED);
  } 
  // fade from yellow to green
  for (r = 255; r > 0; r--) { 
    analogWrite(REDPIN, r);
    delay(FADESPEED);
  } 
  // fade from green to teal
  for (b = 0; b < 256; b++) { 
    analogWrite(BLUEPIN, b);
    delay(FADESPEED);
  } 
  // fade from teal to blue
  for (g = 255; g > 0; g--) { 
    analogWrite(GREENPIN, g);
        delay(FADESPEED);
  } 
} 
```

当我读到关于 Arduino 的模拟写入时，它的最大 pwm 为 255。现在当我插入 IOIO 板时，我的代码如下

```
public void setup() throws ConnectionLostException {
        try {

            blueOutput_ = ioio_.openPwmOutput(14, 490);
            led_ = ioio_.openDigitalOutput(IOIO.LED_PIN, true);
            enableUi(true);
        } catch (ConnectionLostException e) {
            enableUi(false);
            throw e;
        }
public void loop() throws ConnectionLostException {

            try {

                blueOutput_.setPulseWidth(seekBlue.getProgress());

                led_.write(!toggle.isChecked());
                sleep(10);

            } catch (InterruptedException e) {
                ioio_.disconnect();
            } catch (ConnectionLostException e) {
                enableUi(false);
                throw e;
            }
        }
    } 
```

请注意，我的频率与 Arduino 和 IOIO 相匹配，为 490 Hz。现在，当我在引脚 14 上输出一个 PWM 模块时，LED 开始亮起，但在接近其最大亮度之前就已达到最大值。如果我将 PWM 增加到 255 以上，蓝色（以及红色和绿色）的强度不会增加。我在 RGB 灯条中有 12V 电压，长度为 3 个 LED 灯（大约 1.75 英寸用于测试目的）

我无法从 IOIO 获得与 Arduino 相同的响应是否有原因？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:10:55.963

您想在 0 到 1 之间更改 pwm 占空比。您现有的代码会更改脉冲宽度（以微秒为单位）。

# android - 活动未从状态栏通知开始

> ID：10491298
> 
> 赞同：2
> 
> 时间：2012-05-08T01:22:21.730
> 
> 标签：android, notifications, android-pendingintent

我发现了很多关于这个问题的 Stack Overflow 帖子，但它们都使用现在已弃用的 Notification 方法，而不是使用 Notification.Builder 类。

我已成功创建状态栏通知，但单击时没有任何反应。LogCat 中出现警告：

```
Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@412d6df0 
```

这是我用来构建通知的代码：

```
public class LunchNotificationBuilder {

private Notification notification;
public LunchNotificationBuilder(Lunch lunch, Context context) {
    Builder builder = new Builder(context);
    Calendar reminderTime = (Calendar)lunch.getReminderTime().clone();
    builder.setWhen(reminderTime.getTimeInMillis());
    builder.setTicker("Reminder for " + lunch.getTitle());
    builder.setContentTitle("LunchBunch Notification");
    builder.setContentText("Upcoming lunch at " + lunch.getTitle());
    builder.setSmallIcon(R.drawable.ic_launcher);
    Intent intent = new Intent(context, InviteDetails.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    builder.setContentIntent(PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_ONE_SHOT));
    this.notification = builder.getNotification();
}

public Notification getNotification() {
    return this.notification;
}

} 
```

午餐类只是我创建的一个数据结构，不用担心。

传入的 Context 是 Application.getApplicationContext()。

我正在按照文档的建议设置 Intent.FLAG_ACTIVITY_NEW_TASK 标志，并且 PendingIntent 具有 PendingIntent.FLAG_ONE_SHOT 标志。

另一个注意事项：当我在代码的其他地方显式调用 startActivity 时，我尝试启动的活动 (InviteDetails) 工作得很好。关于这个 PendingIntent 业务的某些东西不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:55:50.573

原来我不知道如何使用Android。我单击顶部的状态栏，而不是在单击之前向下拖动以查看完整通知。我的代码正在运行。哦！

# yahoo-finance - 如何使用雅虎财经获取特定日期的报价

> ID：10491300
> 
> 赞同：3
> 
> 时间：2012-05-08T01:22:23.210
> 
> 标签：yahoo-finance

似乎这应该是一个简单的问题。我正在使用 Matlab 构建股票数据库和分析工具包。

我正在使用 Matlab 函数来获取数据表，使用如下 URL：

```
http://ichart.finance.yahoo.com/table.csv?s=aapl&a=00&b=01&c=2011&d=03&e=04&f=&ignore=.csv 
```

这可以很好地获取标准统计信息（打开、关闭、音量等）。我不知道如何添加其他雅虎财务统计数据，尽管如移动平均线。我可以修改上述 URL 以将其他统计信息添加到下载中吗？或者有没有办法修改单引号查询以包含日期？我正在尝试修改下面的网址，但无济于事。

```
http://finance.yahoo.com/d/quotes.csv?s=aapl&f=m4m3 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:29:57.847

[http://luminouslogic.com/matlab-stock-market-scripts](http://luminouslogic.com/matlab-stock-market-scripts)上的脚本对于在 Matlab 中使用 Yahoo Finance 非常有帮助。下载您需要的日期和价格，然后使用[http://www.mathworks.com/help/toolbox/finance/tsmovavg.html](http://www.mathworks.com/help/toolbox/finance/tsmovavg.html)计算移动平均线。

更新

看起来你可以`m4`用来获得移动平均线。查看[http://www.gummy-stuff.org/Yahoo-data.htm](http://www.gummy-stuff.org/Yahoo-data.htm)上的文档。您上面的网址是正确的 - 您可能需要用逗号分隔参数。

更新 2

看看这个问题：[历史股票数据的来源](https://stackoverflow.com/questions/754593/source-of-historical-stock-data)

# android - Android - 共享首选项在某些设备上崩溃。

> ID：10491301
> 
> 赞同：0
> 
> 时间：2012-05-08T01:22:26.423
> 
> 标签：android, sharedpreferences

我在 Android 的崩溃报告中遇到了这个异常：

```
java.lang.NoSuchMethodError: android.content.SharedPreferences$Editor.apply
at com.problemio.ProblemioActivity.first_time_check(ProblemioActivity.java:231)
at com.problemio.ProblemioActivity.onCreate(ProblemioActivity.java:47)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4668)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
at dalvik.system.NativeStart.main(Native Method) 
```

我对 Android 中的崩溃报告系统非常陌生。为什么会发生这种崩溃？我无法在我的设备或模拟器上重现它。

崩溃报告中还需要哪些其他信息来确定原因以及如何解决此问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T01:26:06.187

[`apply()`](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)在 API 级别 9 中引入，并且运行您的应用程序的某些设备可能具有较低版本。考虑将此调用更改为`commit`. 如文档中所述：

> SharedPreferences.Editor 接口预计不会直接实现。但是，如果您之前确实实现了它并且现在收到有关缺少 apply() 的错误，您可以简单地从 apply() 调用 commit()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:26:07.003

阅读文档：

[http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply) ()

查看它开始使用的 api 版本。

# xcode - 如何让 Xcode 再次显示其启动屏幕？

> ID：10491303
> 
> 赞同：107
> 
> 时间：2012-05-08T01:22:29.167
> 
> 标签：xcode

当我开始 Xcode 时，我总是有一个屏幕让我选择打开哪个项目，或者开始一个新项目，或者其他一些选项。几天前，我注意到它有一个预先选中的复选框，上面写着“始终在启动时显示此屏幕”。不幸的是，我没有选中它。我以为它只会重新打开我正在编辑的最后一个项目，但事实并非如此。现在 Xcode 直接启动，根本不打开任何窗口，所以你必须进入它的文件菜单，选择打开，然后找到你的项目。我想回到以前的（默认）行为，但我找不到任何回去的方法。

有谁知道如何让那个打开的屏幕再次显示？（它不在偏好中。）

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-05-08T01:30:42.570

从 Xcode 4 及以上版本开始，它是**"Window" -> "Welcome to Xcode (`⇧</kbd>`⌘</kbd>`1`)"``** .

在较旧的 Xcode 3 上，它是**"Help" -> "Welcome to Xcode"**。

如果您想在每次 Xcode 启动时都看到该窗口，请勾选“Xcode 启动时显示此窗口”：

![Xcode 启动时显示此窗口](../Images/c36a4ed83f95855cb8b3d9fdb2fc426f.png)

请注意，您需要将鼠标悬停在此窗口上才能看到此复选框。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-08-28T11:57:32.053

*步骤 1*
启动 Xcode，转到名为**Window**的顶部导航栏，单击**Welcome to Xcode**它将显示项目屏幕：

![第 1 步照片](../Images/1f914e2949bcdc017e22274482ae6800.png)

*Step 2*
查看欢迎界面的底部，会出现“*在 Xcode 启动时显示此窗口*”，勾选：

![第 2 步照片](../Images/1abd4d1a91637be9b4ad8563aac56b75.png)

# php - PHP SimpleXMLElement XPath 选择

> ID：10491310
> 
> 赞同：0
> 
> 时间：2012-05-08T01:23:56.037
> 
> 标签：php, xml, simplexml

我有以下 XML： http: [//pastebin.com/QiRK72BK](http://pastebin.com/QiRK72BK)

它是为响应 REST 查询而生成的。我的代码很简单：

```
$xml = simplexml_load_file($url);

var_dump($xml->getName());

var_dump($xml->xpath("serverDetail/apiEnv")); 
```

在一个尝试的测试用例中。第一个 var_dump 显示 XML 文件确实正在加载：

```
 string(21) "GeneralSearchResponse" 
```

然而，第二个 var_dump 让我感到困惑。我觉得它肯定应该匹配一些数据，但我得到了

```
array(0) { } 
```

我也尝试过 xpath "/serverDetail/apiEnv" "//apiEnv" 和 "/" 并且总是得到一个空数组。我是误解了 xpath 还是错过了一些初始化步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:25:23.883

您的 XML 正在使用命名空间：

```
$xml->registerXPathNamespace('u', 'urn:types.partner.api.shopping.com');
var_dump($xml->xpath("//u:serverDetail/u:apiEnv")); 
```

输出：

```
array(1) {
  [0]=>
  object(SimpleXMLElement)#2 (1) {
    [0]=>
    string(7) "sandbox"
  }
} 
```

编辑：肮脏的解决方法，但可能会有所帮助：

```
$xml = simplexml_load_file($url);
$xmlStr = str_replace("xmlns", "ns", $xml->asXML());
$xml = new SimpleXMLElement($xmlStr);
var_dump($xml->xpath("serverDetail/apiEnv")); 
```

# jquery - 如何在 $.getJSON 和 $.each jquery 函数上创建一个特定的循环？

> ID：10491311
> 
> 赞同：0
> 
> 时间：2012-05-08T01:24:12.007
> 
> 标签：jquery, getjson, flickr, each

我有这个代码来检索 Flickr 图像。但是，我只想检索4张图片，如何编辑这段代码？

谢谢！

```
jQuery(document).ready(function($){
                $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?ids=<?php print $flickrid; ?>&lang=en-us&format=json&jsoncallback=?", function(data){
                      $.each(data.items, function(index, item){
                            $("<img/>").attr("src", item.media.m).appendTo("#flickr")
                              .wrap("<li><a href='" + item.link + "'></a></li>");
                      });
                    });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:47:34.320

懒惰的方式：

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?ids=<?php print $flickrid; ?>&lang=en-us&format=json&jsoncallback=?", function(data){
    $.each(data.items, function(index, item){
        if (index<5) {
            $("<img/>").attr("src", item.media.m).appendTo("#flickr")
                       .wrap("<li><a href='" + item.link + "'></a></li>");
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T12:26:51.940

接受的答案不会限制您从 Flickr 检索的图像数量。它只是忽略了一些返回的结果。但如果这就是你的意思，并且你接受了答案，所以我猜是这样，那么这里有一些更懒惰的东西：

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?ids=<?php print $flickrid; ?>&lang=en-us&format=json&jsoncallback=?", function(data){
    $.each(data.items, function(index, item){
        $("<img/>:lt(5)").attr("src", item.media.m).appendTo("#flickr")
                         .wrap("<li><a href='" + item.link + "'></a></li>");
        }
    });
}); 
```

注意 ":lt(5)" 过滤器。

# javascript - jquery流沙链接到预过滤页面

> ID：10491313
> 
> 赞同：0
> 
> 时间：2012-05-08T01:24:47.890
> 
> 标签：javascript, jquery, filter, quicksand

我正在使用 jquery 流沙，我想知道如何在预先排序的列表中返回该页面。我对javascript不是很了解，所以任何帮助都将不胜感激。

编辑

找到了类似过滤器的此解决方案[http://savethefix.wordpress.com/2011/12/06/filterable-portfolio-with-jquery-with-external-link-support/](http://savethefix.wordpress.com/2011/12/06/filterable-portfolio-with-jquery-with-external-link-support/)

但看不出如何用流沙来解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:59:58.787

想通了，如果有人有兴趣。

```
$(document).ready(function() {

// get the action filter option item on page load
var $filterType = $('#filterOptions li.active a').attr('class');

// get and assign the ourHolder element to the
// $holder varible for use later
var $holder = $('ul.ourHolder');

// clone all items within the pre-assigned $holder element
var $data = $holder.clone();

var $button = $('#filterOptions li');

var $all = $('ul.ourHolder li').data('type') === 'all';

if (window.location.hash) {
// reset the active class on all the buttons
$button.removeClass('active');

// assign the class of the clicked filter option
// element to our $filterType variable
var $filtered = window.location.hash.replace('#', '');

$('a[class=' + $filtered + ']').parent().addClass('active');

var $filteredData = $data.find('li[data-type~=' + $filtered + ']').show();

// call quicksand and assign transition parameters
$holder.quicksand($filteredData, {
    duration: 800,
    easing: 'easeInOutQuad'
});
}
// attempt to call Quicksand when a filter option
// item is clicked
// Main Filter
$('#filterOptions li a').on('click', function(e) {
// reset the active class on all the buttons
$button.removeClass('active');

// assign the class of the clicked filter option
// element to our $filterType variable
var $filterType = $(this).attr('class');
$(this).parent().addClass('active');

var $filterData = $data.find('li[data-type~=' + $filterType + ']').show();

// call quicksand and assign transition parameters
$holder.quicksand($filterData, {
    duration: 800,
    easing: 'easeInOutQuad'
});
});

//Main Containers
$('ul.ourHolder').on('click', 'li.all', function(e) {
// reset the active class on all the buttons
$button.removeClass('active');

// assign the class of the clicked filter option
// element to our $filterType variable
var $ba = $('#filterOptions li a');
var $filteringType = $(this).attr('id');
var $navFilter = $ba.attr('class');

var $filteringData = $data.find('li[data-type=' + $filteringType + ']').show();

// call quicksand and assign transition parameters
$holder.quicksand($filteringData, {
    duration: 800,
    easing: 'easeInOutQuad'
});
});
}); 
```

# mysql - 使用单个查询选择和删除

> ID：10491316
> 
> 赞同：4
> 
> 时间：2012-05-08T01:25:08.860
> 
> 标签：mysql, select, optimization, sql-delete

我有 2 张桌子：

*   用户（user_id，user_connected）
*   房间 (room_id, room_initiating_user_id, room_target_user_id)

我想删除所有启动用户和 target_user 都设置为“user_connected=0”的“房间”

我这里有两个问题：

1.  如何定位这些用户？显然这个查询不起作用：

    ```
    SELECT room_id
    FROM rooms,users
    WHERE
    ( 
     (room_target_user_id=user_id) AND (user_connected=0)
    )                   
    AND
    (                
     (room_initiating_user_id=user_id) AND (user_connected=0)
    ) 
    ```

2.  我想，如果可能的话，使用相同的查询来删除这些房间（如果我使用第二个查询没问题，但这意味着每个结果都会触发这个查询，这很多。是否可以删除这些房间一次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T01:33:10.737

```
delete from rooms
where room_initiating_user_id in (select user_id from users where user_connected = 0)
  and room_target_user_id in (select user_id from users where user_connected = 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:30:35.970

要定位用户，您需要`JOIN`表`users`两次，一次用于发起用户，另一次用于目标用户：

```
SELECT room.room_id
FROM rooms room
INNER JOIN users initiating
ON room.room_initiating_user_id = initiating.user_id
INNER JOIN users target
ON room.room_target_user_id = target.user_id
WHERE initiating.user_connected=0 AND target.user_connected=0 
```

要删除这些房间，您可以将上述内容用作子查询：

```
DELETE FROM rooms
WHERE room_id IN (
    SELECT room.room_id
    FROM rooms room
    INNER JOIN users initiating
    ON room.room_initiating_user_id = initiating.user_id
    INNER JOIN users target
    ON room.room_target_user_id = target.user_id
    WHERE initiating.user_connected=0 AND target.user_connected=0
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T01:33:51.627

首先，要选择这些房间，您需要加入 users 表两次：

```
SELECT r.room_id
FROM rooms r 
    JOIN users tgt ON r.room_target_user_id = tgt.user_id
    JOIN users ini ON r.room_initiating_user_id = ini.user_id
WHERE tgt.user_connected = 0 AND ini.user_connected = 0 
```

***注意**：表用户使用两个不同的别名，以便区分两个连接。另外，我使用 JOIN 语法，而不是不鼓励使用的旧逗号连接*

要删除房间，您需要删除多表：

```
DELETE r
FROM rooms r 
    JOIN users tgt ON r.room_target_user_id = tgt.user_id
    JOIN users ini ON r.room_initiating_user_id = ini.user_id
WHERE tgt.user_connected = 0 AND ini.user_connected = 0 
```

# java - 文件扫描仪阵列

> ID：10491321
> 
> 赞同：0
> 
> 时间：2012-05-08T01:25:52.347
> 
> 标签：java, arrays, file

我正在压缩我的代码。现在，我创建了 6 个文件扫描器，每个扫描器都从一个单独的文件（questions1.txt、questions2.txt...）中读取。我试图改为使用一组文件扫描器，如下所示：

```
Scanner[] file = new Scanner[6];

for(int i = 0; i > file.length; i++) {
    file[i] = new Scanner(new File("questions" + i+1 + ".txt"));
} 
```

但是，当我尝试将文件的第一行添加到字符串时，它返回为 null：

```
inLine = file[0].nextLine(); 
```

我正在尝试的是可能的，还是我的代码必须修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:28:31.410

你的 for 循环永远不会被执行，因为

```
for(int i = 0; i > file.length; i++) 
```

应该

```
for(int i = 0; i < file.length; i++) 
```

# mongodb - BSON::InvalidDocument：无法将对象序列化为 BSON

> ID：10491322
> 
> 赞同：1
> 
> 时间：2012-05-08T01:25:59.790
> 
> 标签：mongodb, mongomapper

我正在尝试跟随[http://mongotips.com/b/array-keys-allow-for-modeling-simplicity/](http://mongotips.com/b/array-keys-allow-for-modeling-simplicity/)

我有一个故事文档和一个评级文档。用户将对故事进行评分，因此我想创建与用户评分的多种关系，如下所示：

```
class StoryRating
  include MongoMapper::Document

  # key <name>, <type>
  key :user_id, ObjectId
  key :rating, Integer
  timestamps!

end

class Story
  include MongoMapper::Document

  # key <name>, <type>
  timestamps!
  key :title, String
  key :ratings, Array, :index => true

  many :story_ratings, :in => :ratings

end 
```

然后

```
irb(main):006:0> s = Story.create  
irb(main):008:0> s.ratings.push(Rating.new(user_id: '0923ksjdfkjas'))  
irb(main):009:0> s.ratings.last.save  
=> true  
irb(main):010:0> s.save  
BSON::InvalidDocument: Cannot serialize an object of class StoryRating into BSON.  
    from /usr/local/lib/ruby/gems/1.9.1/gems/bson-1.6.2/lib/bson/bson_c.rb:24:in `serialize' (...) 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:08:18.667

您应该使用关联“story_rating”方法进行推送/追加，而不是内部“评级”Array.push 以获得您想要遵循 John Nunemaker 的“Array Keys Allow For Modeling Simplicity”讨论的内容。不同之处在于，使用关联方法时，MongoMapper 会将 BSON::ObjectId 引用插入到数组中，而后者您将 Ruby StoryRating 对象推送到数组中，而底层驱动程序驱动程序无法对其进行序列化。

这是一个对我有用的测试，它显示了差异。希望这会有所帮助。

测试

```
require 'test_helper'

class Object
  def to_pretty_json
    JSON.pretty_generate(JSON.parse(self.to_json))
  end
end

class StoryTest < ActiveSupport::TestCase
  def setup
    User.delete_all
    Story.delete_all
    StoryRating.delete_all
    @stories_coll = Mongo::Connection.new['free11513_mongomapper_bson_test']['stories']
  end

  test "Array Keys" do
    user = User.create(:name => 'Gary')
    story = Story.create(:title => 'A Tale of Two Cities')
    rating = StoryRating.create(:user_id => user.id, :rating => 5)
    assert_equal(1, StoryRating.count)
    story.ratings.push(rating)
    p story.ratings
    assert_raise(BSON::InvalidDocument) { story.save }
    story.ratings.pop
    story.story_ratings.push(rating) # note story.story_ratings, NOT story.ratings
    p story.ratings
    assert_nothing_raised(BSON::InvalidDocument) { story.save }
    assert_equal(1, Story.count)
    puts Story.all(:ratings => rating.id).to_pretty_json
  end
end 
```

结果

```
Run options: --name=test_Array_Keys

# Running tests:

[#<StoryRating _id: BSON::ObjectId('4fa98c25e4d30b9765000003'), created_at: Tue, 08 May 2012 21:12:05 UTC +00:00, rating: 5, updated_at: Tue, 08 May 2012 21:12:05 UTC +00:00, user_id: BSON::ObjectId('4fa98c25e4d30b9765000001')>]
[BSON::ObjectId('4fa98c25e4d30b9765000003')]
[
  {
    "created_at": "2012-05-08T21:12:05Z",
    "id": "4fa98c25e4d30b9765000002",
    "ratings": [
      "4fa98c25e4d30b9765000003"
    ],
    "title": "A Tale of Two Cities",
    "updated_at": "2012-05-08T21:12:05Z"
  }
]
.

Finished tests in 0.023377s, 42.7771 tests/s, 171.1084 assertions/s.

1 tests, 4 assertions, 0 failures, 0 errors, 0 skips 
```

# php - 确认 Markdown 文件

> ID：10491327
> 
> 赞同：3
> 
> 时间：2012-05-08T01:26:16.780
> 
> 标签：php, file-upload, mime-types, markdown

我正在开发一个 PHP Web 应用程序，它将接受 Markdown 文件作为文件输入。

我应该如何确保只上传 Markdown 文件？

我想我应该检查的不仅仅是扩展名……也许是 mime 类型？

如果是这样，那是什么 mime 类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:03:45.197

扩展名和 mime 类型相同。

检查 UTF-8，您可以阻止任何二进制文件（图像文件等）

```
if ($markdown !== iconv("UTF-8", "UTF-8//IGNORE", $markdown)) { 
```

如果用户上传 HTML 或 JavaScript 文件，这不是您想要的，但它符合 Markdown 语法。所以PHP无法识别它。

# .net - IIS/web.config URL Rewrite 从 url 中删除子文件夹

> ID：10491336
> 
> 赞同：1
> 
> 时间：2012-05-08T01:27:22.097
> 
> 标签：.net, iis, url-rewriting, web-config

假设我有一个名为 mydomain.com 的域。例如，我添加了一个名为 site1 的子文件夹，并且我还注册了一个同名的子域。这意味着我想将**site1.mydomain.com**映射到**site1.mydomain.com/site1**但我不想**/site1**出现。

这是我第一次这样做，我刚刚阅读了以下文章，它非常方便，但它仍然不适用于 url。锚点被正确重写，但 url 不起作用。 [http://weblogs.asp.net/owscott/archive/2010/05/26/url-rewrite-multiple-domains-under-one-site-part-ii.aspx](http://weblogs.asp.net/owscott/archive/2010/05/26/url-rewrite-multiple-domains-under-one-site-part-ii.aspx)

这是我所拥有的

```
<configuration>
        <system.webServer>
                <rewrite>
                        <rules>
                                <rule name="in a subfolder" enabled="true" stopProcessing="true">
                                        <match url=".*" />
                                        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                                                <add input="{HTTP_HOST}" pattern="^(www\.)?site1.mydomain\.com$" />
                                                <add input="{PATH_INFO}" pattern="^/site1($|/)" negate="true" />
                                        </conditions>
                                        <action type="Rewrite" url="/site1/{R:0}" />
                                </rule>
                        </rules>
                        <outboundRules>
                                <rule name="Outgoing - URL paths" enabled="true">
                                        <match filterByTags="A" pattern="^(?:site1|(.*//[_a-zA-Z0-9-\.]*)?/site1)(.*)" />
                                        <action type="Rewrite" value="{R:1}{R:2}" />
                                </rule>
                                <rule name="response_location URL">
                                        <match serverVariable="RESPONSE_LOCATION" pattern="^(?:site1.mydomain.com|(.*//[_a-zA-Z0-9-\.]*)?/site1)(.*)" />
                                        <action type="Rewrite" value="{R:1}{R:2}" />
                                </rule>
                                <rule name="response_location querystring">
                                        <match serverVariable="RESPONSE_LOCATION" pattern="(.*)%2fsite1(.*)" />
                                        <action type="Rewrite" value="{R:1}{R:2}" />
                                </rule>
                        </outboundRules>
                </rewrite>
        </system.webServer>
</configuration> 
```

正则表达式或其他内容可能存在明显错误，但我不了解此配置的每个部分，所以这可能就是原因。如果您不能给出答案，也许您可​​以向我解释更多这是做什么的？

谢谢，

# iphone - 在 iOS 5 的 OpenGL ES 2.0 中渲染另一个类的 RenderBuffer/FrameBuffer 中的纹理

> ID：10491338
> 
> 赞同：0
> 
> 时间：2012-05-08T01:27:33.050
> 
> 标签：iphone, ios, opengl-es, textures, texture2d

我有两个 UIView，每个都有自己独立的 renderBuffers 和 frameBuffers。它们属于不同的 ViewController。我已经通过 NSNotificationCenter 连接了它们，所以一切就绪。

我只需要将 ClassAView 的 frameBuffer 中的纹理基本渲染到 ClassBView 的 frameBuffer 中。这似乎应该很容易......我尝试传入我在 ClassAView 中绑定的纹理：

```
glBindTexture(GL_TEXTURE_2D, myClassATexture);
```

然后说，点击屏幕，我尝试将纹理传递给 ClassBView：

```
 // in ClassA:
[classBView addTexture:myClassATexture];

// In ClassB's addTexture method:
myClassBTexture = newTexture
glClear, glBindTexture, etc...
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
[self presentFramebuffer]; 
```

但这会导致黑屏。我试图 NSLog myClassATexture 但它打印出“0”。

无论如何，我将如何有效地将 ClassA 中已经渲染的纹理传递给 ClassB？

我的目标是 iOS 5.0，所以如果有一种简单的方法需要 iOS 5，我会全力以赴。:)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:57:22.043

纹理 ID 为 0 表示没有纹理，因此您需要确保正确复制纹理 ID 以供以后使用。

# mongodb - MongoDB GridFS 上的全文搜索？

> ID：10491348
> 
> 赞同：7
> 
> 时间：2012-05-08T01:29:08.127
> 
> 标签：mongodb, full-text-search, binaryfiles, binary-data, nosql

比如说，如果我想使用 MongoDB 的 GridFS 存储 PDF 或 ePub 文件，是否可以对数据文件执行全文搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:40:40.893

您目前无法在 mongo 中进行真正的全文搜索：[http ://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)

随意在这里投票： [https ://jira.mongodb.org/browse/SERVER-380](https://jira.mongodb.org/browse/SERVER-380)

Mongo 更像是一个通用的可扩展数据存储，到目前为止它还没有任何全文搜索支持。根据您的用例，您可以将标准 b-tree 索引与文本中所有单词的数组一起使用，但它不会进行词干或模糊匹配等。

但是，我建议将 mongodb 与基于 lucene 的应用程序结合使用（弹性搜索很流行）。您可以将所有数据存储在 mongodb 中（二进制数据、元数据等），然后在 lucene 中索引文档的纯文本。或者，如果您的用例是纯全文搜索，您可以考虑只使用弹性搜索而不是 mongodb。

更新（2013 年 4 月）：MongoDB 2.4 现在支持基本的全文索引！下面是一些有用的资源。

[http://docs.mongodb.org/manual/applications/text-search/](http://docs.mongodb.org/manual/applications/text-search/)

[http://docs.mongodb.org/manual/reference/command/text/#dbcmd.text](http://docs.mongodb.org/manual/reference/command/text/#dbcmd.text)

[http://blog.mongohq.com/blog/2013/01/22/first-week-with-mongodb-2-dot-4-development-release/](http://blog.mongohq.com/blog/2013/01/22/first-week-with-mongodb-2-dot-4-development-release/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:02:53.817

不使用 MongoDB API，我不知道。GridFS 似乎被[设计成更像是一个简化的文件系统](http://www.mongodb.org/display/DOCS/GridFS)，其 API 提供了直接的键值语义。在他们的[项目想法](http://www.mongodb.org/display/DOCS/Project+Ideas)页面上，他们列出了两件事如果处于生产就绪状态会对您有所帮助：

*   [GridFS FUSE](https://github.com/mikejs/gridfs-fuse)，允许您将 GridFS 挂载为本地文件系统，然后像索引磁盘上的内容一样对其进行索引
*   [与 Lucene 和Solr](https://groups.google.com/group/mongodb-user/browse_thread/thread/b4a2417288dabe97/6268402ec69986fb?pli=1)等工具的实时全文搜索集成。您可能想查看github 和[bitbucket上的一些项目。](https://bitbucket.org/ludovicchabant/mongodb.lucene)

另请查看[ElasticSearch](http://nosql.mypopescu.com/post/383437318/integrating-mongodb-with-solr)。我已经看到[了与 Mongo 的一些集成，](http://amberonrails.com/real-time-search-with-mongodb-and-elasticsearch/)但我不确定[为利用 GridFS](https://github.com/richardwilly98/elasticsearch-river-mongodb/wiki)做了多少工作（提到了 GridFS 附件支持，但我还没有使用它来确定）。也许您将成为构建它然后将其开源的人？应该是一次有趣的冒险

# javascript - 如何告诉浏览器停留在当前窗口

> ID：10491349
> 
> 赞同：2
> 
> 时间：2012-05-08T01:29:15.673
> 
> 标签：javascript, html

当我执行 window.open() 时，有没有办法告诉浏览器停留在当前窗口或选项卡上，而不是转到新的选项卡或窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:30:05.763

使用`_self`目标。

```
window.open("http://www.example.com", "_self"); 
```

还可以阅读[Mozilla 文档](https://developer.mozilla.org/en/DOM/window.open)或其他可靠来源。

对于基本的 Javascript 命令，我会选择[W3Schools](http://www.w3schools.com/jsref/met_win_open.asp)，尽管它与 W3C 无关，但它提供了易于理解的信息和基本上任何 JS 方法的示例。

拥有多个信息来源总是有益的，您也可以随时使用 Google。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T01:37:30.850

如果您的目标是使用当前窗口，您可以简单地使用：

```
window.location 
```

但是，如果您想打开一个子窗口并将焦点留在父窗口上，我认为您会发现这很困难，因为`opener.focus()`我读过并非在所有浏览器中都有效。

请参阅这些 SO 问题以供参考：

[防止 window.open 聚焦](https://stackoverflow.com/questions/6897430/prevent-window-open-from-focusing/6897462#6897462)

[如何使用javascript将焦点返回到父窗口？](https://stackoverflow.com/questions/6910278/how-to-return-focus-to-the-parent-window-using-javascript)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T02:16:54.950

发现一种方法是使用`self.focus()`从原始窗口调用的javascript。从阅读该讨论中得到这个：[Prevent window.open from focus](https://stackoverflow.com/questions/6897430/prevent-window-open-from-focusing/6897462#6897462)。

所以我的代码看起来像这样。

```
 $.ajax({ 
        url : "filename.php", 
        dataType: "html", 
        success : function (data) { 
            $('#div').html(data);
            $('#div2').css('visibility','hidden');
        } 
    });

    var external_window = window.open(url,'_blank');
    self.focus(); 
```

# python - 使用 python 从一个文件中提取另一个文件中的行

> ID：10491358
> 
> 赞同：4
> 
> 时间：2012-05-08T01:30:34.623
> 
> 标签：python, grep

与python中“grep”替代的类似问题；但这里的复杂性是 grepped 是来自另一个文件的变量（行）。我无法弄清楚如何使用 re.findall() 之类的函数来做到这一点

文件1：

```
1  20  200
1  30  300 
```

文件2：

```
1  20  200  0.1  0.5
1  20  200  0.3  0.1
1  30  300  0.2  0.6
1  40  400  0.9  0.6
2  50  300  0.5  0.7 
```

file1 中的每一行都是我的模式；我需要从file2中搜索这样的模式。那么结果应该是：

```
 1  20  200  0.1  0.5
    1  20  200  0.3  0.1
    1  30  300  0.2  0.6 
```

我一直在尝试使用 bash 或 python 解决问题，但无法弄清楚。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:10:05.430

这是一个非基于正则表达式的解决方案：

```
with open('/tmp/file1') as f:
  lines1 = f.readlines()

with open('/tmp/file2') as f:
  for line in f:
    if any(line.startswith(x.strip()) for x in lines1):
      print line, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:52:42.857

您可以利用`|`正则表达式中的字符意味着匹配其左侧的模式或匹配其右侧的模式这一事实：

```
import re

with open('file1') as file1:
    patterns = "|".join(re.escape(line.rstrip()) for line in file1)

regexp = re.compile(patterns)
with open('file2') as file2:
    for line in file2:
        if regexp.search(line):
            print line.rstrip() 
```

当我在您的示例文件上尝试此操作时，它输出：

```
1   20  200 0.1 0.5
1   20  200 0.3 0.1
1   30  300 0.2 0.6 
```

顺便说一句，如果你想在 bash 中解决这个问题，应该这样做：

```
grep -f file1 file2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T01:42:08.507

我认为你需要自己的循环

```
file1patterns = [ re.Pattern(l) for l in f1.readlines() ]
lineToMatch = 0
matchedLines = []
for line in f2.readlines():
  if file1patterns[lineToMatch].matches(line):
    matchedLines += line
    lineToMatch += 1
  else:
    lineToMatch = 0
    matchedLines = []
  if len(matchedLines) == len(file1patterns)
    print matchedLines
    lineToMatch = 0
    matchedLines = [] 
```

（不是实际编译 Python，但希望足以让您继续前进）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T03:05:51.193

第 1 步：读取文件 1 中的所有行，拆分它们并将它们作为元组添加到集合中。这将帮助我们在下一步中进行更快的查找。

```
with open('file1', 'r') as f:
    file1_lines = set([tuple(line.strip().split()) for line in f]) 
```

第 2 步：从 file2 中过滤符合您的条件的行，即它们是否以 file1 中的任何行开头：

```
with open('file2', 'r') as f2:
    for line in itertools.ifilter(lambda x: tuple(x.split()[:3]) in file1_lines, f2):
        print line 
```

# python - 这个 Python 程序可以简化还是写得更好？

> ID：10491361
> 
> 赞同：3
> 
> 时间：2012-05-08T01:30:38.767
> 
> 标签：python, syntax, python-3.x

好的，所以在过去的两三天里，我一直在学习很多 Python，我决定利用我的知识创造一些简单但有趣的东西，所以我创造了一个猜谜游戏。

在创建这个程序并让它 100% 运行大约 30 分钟后，我想知道是否有什么我可以做得更好的，等等。我想确保我从任何错误中吸取教训，所以我很感激！

所以这里是代码：

```
import random

def guessingGame():

    randomNumber = random.randrange(1, 10)
    yourGuess = int(input("Take A Guess, Numbers 1 Through 10: "))

    while yourGuess != randomNumber:
        print("DOH! You Did Not Guess Right, TRY AGAIN")
        yourGuess = int(input("Take A Guess, Numbers 1 Through 10: "))
    else:
        if yourGuess == randomNumber:
            print("Congrats You Beat The Guess Game!")

playGame = input("Would You Like To Play The Guessing Game (Y/N): ")

if playGame == "Y" or playGame == "y":
    print("Okay Lets Play!")
    guessingGame()

elif playGame == "N" or playGame == "n":
    print("Okay Thanks Anyways!")
    break 
```

再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:43:35.387

代替

```
if playGame == "Y" or playGame == "y":
    print("Okay Lets Play!")
    guessingGame() 
```

我有点喜欢

```
if playGame.lower() == "y":
    # ... 
```

我更喜欢：

```
def quit():
    print("Okay Thanks Anyways!")

actions = {"y": guessingGame}
actions.get(playGame.lower(), quit)() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T01:48:26.527

我注意到的几件事：

*   您应该处理用户试图猜测看起来不像数字的东西的情况，例如字母“a”。
*   Python 风格指南说变量名更喜欢 lower_with_underscores 而不是 CamelCase。
*   该行`yourGuess = int(input("Take A Guess, Numbers 1 Through 10: "))`不必要地重复，请参阅下文以了解重构该部分的一种可能方法。

一般清理：

```
import random

def guessing_game():
  random_number = random.randint(1, 10)
  assert random_number in range(1, 11)
  your_guess = None
  while your_guess != random_number:
    try:
      your_guess = int(input("Take A Guess, Numbers 1 Through 10: "))
    except ValueError:
      print("That wasn't a number")
      continue

    if your_guess != random_number:
      print("DOH! You Did Not Guess Right, TRY AGAIN")
    else:
      print("Congrats You Beat The Guess Game!")
      break

play_game = None
while play_game not in ['y', 'n']:
  play_game = input("Would You Like To Play The Guessing Game (Y/N): ").lower()

if play_game == "y":
  print("Okay Lets Play!")
  guessing_game()
else:
  assert play_game == "n":
  print("Okay Thanks Anyways!") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T01:48:49.143

```
from random import randint

def getInt(prompt):
    while True:
        try:
            return int(input(prompt))
        except ValueError:
            print("That's no integer!")

def play():
    secret = randint(1,10)
    while True:
        guess = getInt("Take a guess (1-10):")
        if guess==secret:
            print("Congrats, you beat The Guess Game!")
            break
        else:
            print("D'oh! You guessed wrong. Try again!")

def main():
    while True:
        inp = input("Would you like to play The Guessing Game? (Y/N)").lower()
        if inp=="y":
            print("Okay, let's play!")
            play()
        elif inp=="n":
            print("Alright. Thanks anyways!")
            break
        else:
            print("You don't follow directions too good, eh?")

if __name__=="__main__":
    main() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T05:12:49.177

阅读有关命名约定和 Python 编码风格的[Pep 8文档。](http://www.python.org/dev/peps/pep-0008/)

```
import random

def guessing_game(x=1, y=10):
    """
    A simple number guessing game.
    """
    while int(input("Take A Guess, Numbers 1 Through 10: ")) \
                                          != random.randrange(x, y):
        print("DOH! You Did Not Guess Right, TRY AGAIN")

    print("Congrats You Beat The Guess Game!")

    if input("Would You Like To Play The Guessing Game (Y/N): ") == 'Y':
        print("Okay Lets Play!")
        guessing_game()
    else:
        print("Okay Thanks Anyways!")

if __name__ == '__main__':
    guessing_game(1, 10) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T01:46:51.637

我想你可以在while循环中使用“break”语句，如

```
import random

def guessingGame():    
    randomNumber = random.randrange(1, 10)

    while True:

        yourGuess = input("Take A Guess, Numbers 1 Through 10: ")

        if !yourGuess.isdigit():
            print ("That's not a number!")
        elif int(yourGuess) not in range(1,10):
            print("I said between 1 and 10!")
        elif int(yourGuess) != randomNumber:
            print("DOH! You Did Not Guess Right, TRY AGAIN")
        else:
            break

    print("Congrats You Beat The Guess Game!")

playGame = input("Would You Like To Play The Guessing Game (Y/N): ")

if playGame.lower() == "y":
    print("Okay Lets Play!")
    guessingGame()

elif playGame.lower() == "n":
    print("Okay Thanks Anyways!")
    break 
```

# django - 在模板中使用 ChoiceField 的值

> ID：10491371
> 
> 赞同：2
> 
> 时间：2012-05-08T01:32:43.590
> 
> 标签：django, templates, choicefield

我有这样的事情：

表格.py：

```
AVATAR_CHOICES = (('1','option1'), ('2','option2'), ('3','option3'), 
('4','option4'))

class RegistrationForm(forms.Form):
    avatar = ChoiceField(widget=RadioSelect, choices=AVATAR_CHOICES) 
```

我`form`从我的观点经过：

视图.py

```
form = RegistrationForm()
return render_to_response('registration/register.html', {'form': form},
                          context_instance=RequestContext(request)) 
```

变成这样的模板：

注册.html：

```
{% for radio in form.avatar %}
  <label class="radio">{{ radio.tag }}</label>
{% endfor %} 
```

但我想在这些选项字段前面包含图像，作为让用户选择头像的一种方式。但是，我不知道如何从 tuple 访问键或值`AVATAR_CHOICES`。主要思想是能够做这样的事情：

```
{% for radio in form.avatar %}
      <label class="radio">{{ radio.tag }}</label>
      <img src="{{ STATIC_URL }}img/avatars/{{ radio.tag.value }}.jpg"/>
{% endfor %} 
```

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T14:34:45.930

你可以试试

```
{{ radio.choice_value }}{# value of the choice of the current input #}
{{ radio.choice_label }}{# label of the choice of the current input #}
{{ radio.choice_index }}{# 0-based index #} 
```

仅`choice_label` [记录在案](https://docs.djangoproject.com/en/1.4/ref/forms/widgets/#django.forms.RadioSelect)，但到目前为止您可以安全地使用它。

# http - 如何通过与服务器的持久 HTTP 连接来实现代理缓存？

> ID：10491376
> 
> 赞同：0
> 
> 时间：2012-05-08T01:33:08.427
> 
> 标签：http, proxy

我在许多博客/书籍中读到，维护代理缓存和服务器之间的持久连接可以提供很多好处。所以你有了：

C ---- 代理 ------ S

现在，如果代理和服务器之间的连接是持久的，它可以提供很多好处。

1) 我们节省了 TCP 3 次握手

2）我们不必执行慢启动。拥塞窗口将很大，因为许多客户端将通过此 TCP 流发送数据。

唯一的问题是我如何解复用从服务器收到的回复以便将它们发送到客户端？我如何找出哪个回复对应于哪个客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:59:12.337

最新的 nginx 提供了这个功能。你可以参考代码。（上游，代理，upstream_keeplive..）

# jquery - Rails/Facebox - 使用远程功能更新

> ID：10491382
> 
> 赞同：0
> 
> 时间：2012-05-08T01:34:02.720
> 
> 标签：jquery, ruby-on-rails, facebox

已搜索此问题，但无法找到解决方案。

我有一个表单，其中的元素被部分替换，具体取决于表单中先前元素的选择（例如 - 一旦用户选择了“Origin”，表单将使用所选中可用的任何目标更新“Destinations”collection_select起源）。这很好用.. 除了我希望表单以模态方式显示在 Facebox 弹出窗口中。

目前，facebox 弹出窗口正确加载了表单，但是表单元素上的 onchange 操作似乎没有更新......

**在视图中：**
`<%= link_to "New Delivery", new_delivery_requests_path, :remote => true %>`

**远程调用（views/delivery_requests/new.js.erb）：**
`$.facebox('<%= escape_javascript(render 'new') %>')`

**新布局（views/delivery_requests/new.html.erb）：**

```
<%= form_for @price_update do |f| %>
    <% if @price_update.errors.any? %>
    <h2>Errors:</h2>
    <ul>
        <% @price_update.errors.full_messages.each do |message|%>
        <li><%= message %> </li>
        <% end %>
    </ul>
    <% end %>
    <br />
    <table>
        <tr> 
            <td><%= f.label "Select origin location: "%> </td> 
            <td><%= collection_select(:route, :origin_id,  @origins,  :id, :name, 
            { :prompt   => "Please select an origin" },
            { :onchange => "#{remote_function(
                :url  => { :action => "update_destinations"}, 
                :with => "'origin_id='+value")}",
                :id => "origin_select"} )%>
            </td>
        </tr>
        <tr>
            <td><%= f.label "Select destination location: "%> </td>
            <td><div id="destinations">
                <%= collection_select(:route, :destination, 
                @available_routes, :id, :destination, 
                { :prompt   => "Please select an origin first" }, { :disabled => "disabled" })%></div></td>
        </tr>               
        <tr>
            <td><%= f.label "Current Prices: "%> </td>
            <td>
                <div id="current-prices-table"></div>
            </td>
        </tr>   
        <tr>
            <td><%= f.label "Please select price option" %></td>
            <td>
                <div id = "price-selection"></div>
            </td>
        </tr>
        <tr>
            <td><%= f.label "Priority" %></td>
            <td><%= f.label "Price Per Gram" %></td>
            <td><%= f.label "Price per cm3" %></td>
        </tr>
        <tr>
            <td><div id="priority-label"></div></td>
            <td><%= f.text_field :new_price_per_gram, :id => "price_per_gram_textfield" %></td>
            <td><%= f.text_field :new_price_per_vol, :id => "price_per_vol_textfield" %></td>
        </tr>
    </table>
    <br />
    <%= f.submit "Update Prices"%>  
<% end %> 
```

**以及 delivery_requests 控制器中的更新目的地操作：**

```
def update_destinations
    # updates the available list of destinations after an
    # origin location has been chosen when making a new delivery request
    sel_origin = Location.find(params[:origin_id])
    @available_routes = Route.find_available_routes(sel_origin.name)
    render :update do |page|
      page.replace_html 'destinations', :partial => 'destinations_select', :object => @destinations
    end
  end 
```

我对 Rails 相当陌生 - 任何建议都会受到重视。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:29:02.333

今晚我自己一直在努力解决这个问题，终于想出了一个答案。您需要引用您打开的脸框。这就是你要让你的东西发挥作用的方法。

```
def update_destinations
# updates the available list of destinations after an
# origin location has been chosen when making a new delivery request
sel_origin = Location.find(params[:origin_id])
@available_routes = Route.find_available_routes(sel_origin.name)
render :update do |page|
    page << "jQuery('#facebox .content #destinations').replaceWith(#{(render :partial => 'destinations_select', :object => @destinations).to_json})"       
end
end 
```

我必须感谢[jQuery .on 不使用动态 DOM/HTML](https://stackoverflow.com/questions/8867194/jquery-on-not-working-with-dynamic-dom-html)导致我访问[https://github.com/ihower/facebox_render/blob/master/lib/facebox_render.rb](https://github.com/ihower/facebox_render/blob/master/lib/facebox_render.rb)我构建了答案。

# javascript - SEO 友好的 HTML5 视频 (video.js) 介绍与覆盖淡出

> ID：10491384
> 
> 赞同：0
> 
> 时间：2012-05-08T01:35:48.840
> 
> 标签：javascript, jquery, html, html5-video, fadeout

我正在使用[video.js](http://videojs.com/)插件，并在我的网站加载时播放视频介绍。它通过在页面加载后立即自动播放来工作，并且它位于一个 div 容器中，该容器是 z 索引并覆盖在我的主页上。

我将 jquery 设置为`delay()`，然后`fadeOut()`将 div 设置为显示我的主页。

理论上很好，只有每个人的连接速度不同，而且`fadeOut()`经常发生得太早或太晚。

`fadeOut()`当视频停止时，我的 div有办法吗？

这是我的 jQuery：

```
$(document).ready(function() {
        $("#overlay-video").delay(10000).fadeOut('slow');
   }); 
```

编辑：我也刚刚尝试了以下方法，但这也不起作用：

```
$(document).ready(function(){
  $("#movie-id").bind('ended', function(){
    alert("planet earth");
  });
}); 
```

感谢您的回复，我的 HTML 如下所示：

```
<div id="overlay-video">
    <!-- Begin Video.js -->
    <video id="movie-id" class="video-js vjs-default-skin alignleft" width="640" height="264" poster="http://video-js.zencoder.com/oceans-clip.png" controls preload="auto" autoplay data-setup="{}">
        <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4' />
        <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm; codecs="vp8, vorbis"' />
        <source src="http://video-js.zencoder.com/oceans-clip.ogg" type='video/ogg; codecs="theora, vorbis"' />
    </video>
    <!-- End Video.js -->
</div> 
```

我的 jQuery 正在工作，因为我可以很好地淡出视频元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:57:11.010

几件事：

1.  `doc.ready`主页上的所有脚本只需要一个fxn
2.  使用`on()`方法（使用 jQuery 1.7+）
3.  **最重要**的是，`fadeOut()`需要在`on('ended')`函数内部

作为一般的 HTML5`<video>`解决方案，这应该可以工作：http: [//jsfiddle.net/trpeters1/XzCMb/1/](http://jsfiddle.net/trpeters1/XzCMb/1/)

```
$(document).ready(function(){
    $("#movie-id").on('ended', function() {             
        console.log('im done');
        $("#overlay-video").delay(10000).fadeOut('slow');
    });
}); 
```

但是，Video-js 似乎需要调用 video.js 对象，因此请改为：[http ://help.videojs.com/discussions/questions/509-videojs-and-passing-an-event-at-视频的结尾](http://help.videojs.com/discussions/questions/509-videojs-and-passing-an-event-at-the-end-of-the-video)

```
_V_("#movie-id").ready(function(){ //note the different selector for the ready() fxn
   this.addEvent("ended", function(){ //adding "ended" event to video-js object
     {   console.log('im done');
        $("#overlay-video").delay(10000).fadeOut('slow');
      } 
   });
 }); 
```

# ruby-on-rails - Rails“关联类型不匹配”错误

> ID：10491385
> 
> 赞同：0
> 
> 时间：2012-05-08T01:35:51.097
> 
> 标签：ruby-on-rails, activerecord

在尝试测试我的模型时，我尝试在 rails 控制台中运行以下命令：

```
user.occasions << Occasion.first 
```

收到此错误：

```
irb(main):013:0>  user.occasions << Occasion.first
Occasion Load (0.2ms)  SELECT "occasions".* FROM "occasions" LIMIT 1
(0.0ms)  begin transaction
(0.0ms)  rollback transaction
ActiveRecord::AssociationTypeMismatch: Occasion(#70119208170580) expected, got NilClass(#70119200119960)` 
```

这是我的模型类：

```
class User < ActiveRecord::Base
  has_many :occasions
  rolify
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :id
end

class Occasion < ActiveRecord::Base
  attr_accessible :date, :name
  belongs_to :user
end 
```

我怎样才能让我的代码片段工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:43:46.507

看起来好像是：

*   您正在尝试将您的第一`Occasion`条记录添加到此`User`- 并且`Occasion`尚未创建任何记录，或者
*   您正在尝试将第一`Occasion`条记录添加到 this`User`中，并且该记录已经属于另一个`User`。

您可以在控制台中尝试此操作并发布结果吗？

```
foo = Occasion.first
Occasion.first.inspect 
```

# javascript - 将 js 输出中的空格和回车保留为纯文本

> ID：10491387
> 
> 赞同：0
> 
> 时间：2012-05-08T01:35:59.083
> 
> 标签：javascript, whitespace, carriage-return

我目前正在制作一个简单的网络表单，它允许我填写一些字段，然后以完整模板文档的形式将它们复制到我的剪贴板。

这样做的目的是为字段中的信息自动添加模板，以便可以轻松地将它们粘贴到另一个应用程序中。

到目前为止，我已经设法让一切正常工作，剪贴板等一切正常，但是当粘贴到纯文本文档时，我失去了所有格式。

基本上我想让我的输出看起来像这样： http: [//pastebin.com/DDi50xLX](http://pastebin.com/DDi50xLX)

但是由于 JavaScript 忽略了空格和回车，我无法获得我所追求的正确格式，并且它几乎将其粘贴为一个衬里。

我已经尝试过连接等并使用 %nbsp 但仍然无法获得我想要的结果。

你们中的任何人都可以指出我正确的方向吗？

# regex - 我如何编写一个正则表达式，仅当所有字符都是日语/不是 ASCII 时才验证为真？

> ID：10491388
> 
> 赞同：0
> 
> 时间：2012-05-08T01:36:10.470
> 
> 标签：regex

我在 Drupal 网站上有一个术语列表：

*   艺术
*   美术
*   运动的
*   ポーツ

我需要通过正则表达式过滤这些术语，并且表达式只需要对日语术语（美术，スポーツ）评估为真。

以下条件为真：

*   所有英文术语仅由大写和小写字母组成。
*   所有日文术语将仅包含日文字符（汉字和假名）。

我之前写过一些正则表达式，但我不知道如何处理 Unicode。像这样的表达可以`[a-zA-Z]*`抓住所有的术语，包括日文的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:12:10.830

在此处使用范围：[http ://en.wikipedia.org/wiki/Japanese_writing_system](http://en.wikipedia.org/wiki/Japanese_writing_system)

```
>>> import re
>>> kanji = map(unichr, range(0x4e00, 0x9fbf + 1))
>>> katakana = map(unichr, range(0x30a0, 0x30ff + 1))
>>> hiragana = map(unichr, range(0x3040, 0x309f + 1))
>>> japanese = ''.join(kanji + katakana + hiragana)
>>> pattern = r'^[%s\s]+$' % japanese
>>> re.compile(pattern, re.U).match('スポーツ'.decode('utf8'))
<_sre.SRE_Match object at 0x9e6a090>
>>> re.compile(pattern, re.U).match('スポーツtest'.decode('utf8'))
>>> 
```

这当然是 Python，希望您可以根据自己选择的语言对其进行修改。

可能关键是使用锚 ^ 和 $ 来确保您匹配整个字符串。[a-zA-Z]* 匹配所有术语的原因是因为 '*' 表示“0 或更多”。此外，请确保解码任何输入字符串，因为如果将其编码为 UTF-8，它将不匹配。在这种情况下，'U' 标志实际上并不是必需的，因为您没有要求正则表达式引擎为您决定 \w、\W、\b、\B。

此外，在重新阅读您的问题后，您不希望输入中有空格，因此您可以去掉正则表达式中的 '\s'。

# php - htmlspecialchars() 正在翻译其他特殊字符

> ID：10491393
> 
> 赞同：1
> 
> 时间：2012-05-08T01:37:06.327
> 
> 标签：php, input, character-encoding, special-characters, htmlspecialchars

htmlspecialchars() 似乎正在将特殊字符翻译如下： **āķūņūķī**到它们各自的实体编号：

**ā ķ ū ņ ū ķ ī**

虽然有些仍未翻译，例如：

什

我希望`htmlspecialchars()`（或其他一些功能）**不**翻译这些字母类型的字符......所以它只翻译以下内容（正如它似乎在[php.net 手册](http://php.net/manual/en/function.htmlspecialchars.php)上指出的那样）：

1.  ' **&** '（和号）变为'&'
2.  ' **"** ' (双引号) 变成 '"' 当 ENT_NOQUOTES 未设置时。
3.  " **'** " (单引号) 变成 ''' 仅当设置了 ENT_QUOTES 时。
4.  ' **<** '（小于）变为'<'
5.  ' **>** '（大于）变成'>'

我需要这个的原因是因为在一个 POST 请求之后，我`htmlspecialchars()`在将它放回一组新的 html 输入之前运行这个用户输入。**&,",',<,>**等字符需要翻译，以免导致显示错误等。但我需要' **āķūņūķī** '等特殊字符保持不变。否则用户会很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T01:48:10.293

将第三个参数设置为`UTF-8`：

```
echo htmlentities('āķūņūķī', ENT_QUOTES, 'UTF-8'); 
```

的默认编码[`htmlspecialchars`](http://us3.php.net/manual/en/function.htmlspecialchars.php)是`ISO-8859-1`.

测试用例：

```
var_dump(htmlentities('āķūņūķī'));
var_dump(htmlentities('āķūņūķī', ENT_QUOTES, 'UTF-8')); 
```

输出：

```
string(84) "&Auml;�&amp;Auml;&middot;&Aring;&laquo;&Aring;�&amp;Aring;&laquo;&Auml;&middot;&Auml;&laquo;"
string(14) "āķūņūķī" 
```

[http://codepad.org/MCaDosQ5](http://codepad.org/MCaDosQ5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:43:46.093

unicode 值大于 255 的字符需要转换为它们的数字表示，以便正确处理它们。

您提到的两个字符未转换的原因是因为它们具有可以表示为单个字节的 Unicode 值。值大于 256 的其他字符需要多个字节。

至于接收端的解码，请看`htmlspecialchars_decode`. 您可以在 PHP 网站上找到文档[——htmlspecialchars_decode 手册页](http://php.net/manual/en/function.htmlspecialchars-decode.php)

# wordpress - 将 Wordpress 网站迁移到本地 WAMP 服务器，现在找不到页面

> ID：10491394
> 
> 赞同：1
> 
> 时间：2012-05-08T01:37:27.543
> 
> 标签：wordpress, wamp, wampserver

最近在我们的代理机构，我们需要对我们的服务器进行彻底的检修，因此我不得不将这些站点迁移到本地主机上，以便同时处理它们。我使用 WAMPserver 来托管网站，这些网站由 Wordpress 提供支持。迁移完成后，我检查了本地主机上的站点以查看它们的外观。前页看起来非常好，但每当我尝试导航到内页时，我只会遇到 404。我的主管认为这可能是连接问题，但我想先在这里检查一下，看看其他人是否有类似的问题。

**操作系统：** Windows 7
**WAMP 服务器版本：** 2.2

**已经采取的步骤**

*   我确保本地数据库的名称与原始服务器上的名称完全相同，并仔细检查了 wp-config 文件。
*   我确保获取数据库的 SQL 文件并将它们导入 phpmyadmin。
*   我进入 SQL 文件并更改了所有链接（将 http://www.sitename.com 的所有实例更改[为](http://www.sitename.com)http [://localhost/sitename](http://localhost/sitename)）
*   我登录到 Wordpress 管理仪表板以检查所有内容是否确实存在。一切都完好无损，但即使在每个单独的帖子/页面上单击“查看帖子/页面”也会导致 404。
*   我尝试将永久链接选项恢复为默认值，然后将它们改回来，但这不起作用。

不幸的是，由于我不再在办公室，我无法提供更多信息。我希望我明天早上回去的时候能得到一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:28:46.253

这听起来像是 mod_rewrite 的问题。尝试添加`AllowOverride All`到您的虚拟主机。

如果这不起作用，那么还要检查您的 httpd.conf 以获取以下行

`LoadModule rewrite_module modules/mod_rewrite.so`

确保它没有被注释掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-03T10:02:45.330

在我的情况下，我从这个错误开始出现时迁移`example.com`到。上。我必须做的是编辑并更改块中的最后一行（对我来说是第 8 行）`localhost/example``mod_rewrite``.htaccess``<IfModule mod_rewrite.c>`

`RewriteRule . /index.php [L]`

对此

`RewriteRule . /example/index.php [L]`

# numpy - 将 NumPy 数组添加到 PyTables 中的现有 HDF5 文件中？

> ID：10491396
> 
> 赞同：0
> 
> 时间：2012-05-08T01:37:32.890
> 
> 标签：numpy, hdf5, pytables

我有两个切片的 Numpy 数组存储在内存中，比如 a 和 b，形状为 1*480*640，如何将它们添加到 PyTables 中现有的 HDF5 文件中？现有的 HDF5 文件有三个数组：n1,n2,n3，我希望新的 HDF5 文件有 5 个数组：n1,n2,n3,a,b。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:17:41.967

您可以在文件对象上使用[createArray](http://pytables.github.com/usersguide/libref.html#file-methods-hierarchy-manipulation)来执行此操作（或者如果您需要压缩使用`createCArray`/ `createEArray`）：

```
File.createArray('/','a', numpyArray) 
```

# php - 登录页面不使用 CakePHP ACL 重定向

> ID：10491398
> 
> 赞同：0
> 
> 时间：2012-05-08T01:37:34.730
> 
> 标签：php, cakephp, acl

我正在关注 CakePHP ACL 教程 [http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)

我有一个名为 ImagesController 的控制器，它基本上可以让用户列出所有已上传的图像。还有诸如“上传”和“删除”图像之类的操作。

我还有一个具有登录和注销功能的 UserController。

我的 AppController.php 看起来像这样

```
 1 <?php
  2 
  3 class AppController extends Controller {
  4     public $components = array(
  5             'Acl',
  6             'Auth' => array(
  7                 'authorize' => array(
  8                     'Actions' => array('actionPath' => 'controllers')
  9                     )
 10                 ),
 11             'Session'
 12             );
 13     public $helpers = array('Html', 'Form', 'Session');
 14 
 15     public function beforeFilter() {
 16  //       $this->Auth->actionPath = 'controllers/';
 17         //Configure AuthComponent
 18         $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
 19         $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
 20         $this->Auth->loginRedirect = array('controller' => 'images', 'action' => 'index');
 21         $this->Auth->allow('display');
 22  //       $this->Auth->allow('*');
 23     }
 24 }
 25 
 26 
 27 ?>
~ 
```

我的 UsersController.php 看起来像这样

```
<?php
  2 App::uses('AppController', 'Controller');
  3 /**
  4  * Users Controller
  5  *
  6  * @property User $User
  7  */
  8 class UsersController extends AppController {
 30     public function beforeFilter() {
 31         parent::beforeFilter();
 32         //$this->Auth->allow("initDB"); // remove this later
 33         $this->Auth->allow('login', 'logout');
 34     }
 35     public function login() {
 36         if ($this->Session->read('Auth.User')) {
 37             $this->Session->setFlash('You are logged in!');
 38             $this->redirect('/', null, false);
 39         }
 40     }
 41     public function logout() {
 42         //Leave empty for now.
 43         $this->Session->setFlash('Good-Bye');
 44         $this->redirect($this->Auth->logout());
 45     }
} 
```

因此，现在当我单击图像/索引中的操作（例如上传或删除）时，它会将我发送到用户/登录页面但是当我尝试登录时没有任何反应，即使我的重定向指向第 20 行中的图像/索引。 是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:09:27.400

与 Cake 1.3 不同，在 Cake 2 中，登录不是自动完成的。这意味着您必须`$this->Auth->login()`显式调用。

[查看教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html#preparing-to-add-auth)中的 login() 操作。到目前为止，您从未执行过登录，这就解释了为什么您没有被重定向。

# javascript - 如何通过chrome扩展检测按钮事件

> ID：10491399
> 
> 赞同：2
> 
> 时间：2012-05-08T01:37:35.187
> 
> 标签：javascript, jquery, google-chrome-extension

我想检测页面中的按钮事件，我从**background.html注入我的****script.js**强文本文件，当单击按钮时，我想提醒一些消息而不是让按钮完成他的工作。所以我有两个问题，

 **1.我尝试在我的**srcript.js**中使用**jquery** ，但它似乎不起作用，我在 **background.html**中包含 jquery 文件，我如何在 .js 文件中使用 jquery？

 ****2.点击时如何检测按钮事件？

下面是我的代码：

**背景.html**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script>
  chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(null,{file:'script.js',allFrames:true});
  });
</script> 
```

**脚本.js**

```
if( self.frameElement && self.frameElement.tagName == "IFRAME" ){
  $(":button").bind("click",function(){
    alert("iframe button");
  });
}
else{
  $(":button").bind("click",function(){
    alert("parent button");
  });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T07:43:54.530

至于为什么你的脚本中的 jQuery 不起作用，那是因为你已经在你的 jQuery 中包含了 jQuery `background page`，你需要将它加载到用户页面的扩展世界中。说清楚。您`script.js`应该加载到用户页面中。Chrome 将加载到页面中，但在该页面上`isolated world`是您的扩展程序的世界。您必须在该页面上加载 jQuery，就像您的`script.js`. 如下：

```
<script>
    chrome.browserAction.onClicked.addListener(function(tab) {
        chrome.tabs.executeScript(null,{file:'jQuery.js',allFrames:true});
        chrome.tabs.executeScript(null,{file:'script.js',allFrames:true});
    });
</script> 
```

至于您关于收听按钮点击的其他问题，您的问题不清楚您在说哪个按钮。它是浏览器操作按钮吗？如果是这种情况，您的代码将可以正常工作。如果它是用户 DOM 上的按钮，您将必须添加如上所述的脚本，以侦听单击事件并通知您的扩展程序 ( `background.html`)，然后您的`background`页面将加载该脚本。******

# java - AbstractAction 作为 WindowListener

> ID：10491400
> 
> 赞同：7
> 
> 时间：2012-05-08T01:37:44.603
> 
> 标签：java, swing, user-interface, action, windowlistener

我试图通过使用 Action 对象将我的 GUI 应用程序中的功能与状态分开。我已经成功地使用这些来创建具有相同功能的菜单项和按钮。

我的问题是：我希望菜单中的“退出”项和框架的关闭按钮都具有相同的操作。

目前我已经能够通过将以下 WindowListener 添加到框架来解决它：

```
private class MainWindowListener extends WindowAdapter {
    @Override
    public void windowClosing(WindowEvent e) {
        new ExitAction(model).actionPerformed(new ActionEvent(e.getSource(), e.getID(), "Exit"));
    }
} 
```

难道没有更简单更直接的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T01:54:51.373

转发事件很方便，但您也可以使用，如此[处](https://stackoverflow.com/a/5540802/230513)`dispatchEvent()`所示。

附录：更多使用示例[`Action`](http://download.oracle.com/javase/tutorial/uiswing/misc/action.html)如下所示。

*   [`LinePanel`](https://stackoverflow.com/a/5797965/230513)它连接按钮和按键。
*   [`ScrollAction`](https://stackoverflow.com/a/7203419/230513)它利用了现有的 Swing 动作。
*   [`KeyPadPanel`](https://sites.google.com/site/drjohnbmatthews/keypad-panel)这说明了转发操作。
*   [`GraphPanel`](https://stackoverflow.com/a/11944233/230513)它在工具栏中显示图形编辑器操作。

# c - 在结构错误中初始化二维数组

> ID：10491401
> 
> 赞同：0
> 
> 时间：2012-05-08T01:37:53.267
> 
> 标签：c, arrays

当我在我的结构中初始化这个数组时。我收到错误消息 - 语法错误：'{'。'{' 之前的意外标记；跳过明显的函数体。

```
int array[8][2] = {{3,6},{3,10},{3,14},{8,4}, {8,8},{8,12},{8,16},{12,2}}; 
```

当我从教科书中复制语法时，我不确定出了什么问题。

声明为 typedef struct _array *Array;

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:43:14.197

您不能在结构声明中初始化变量，无论是数组还是 int。但是，您可以在结构初始化中初始化数组。

```
struct foo {
    int x;
    int array[8][2];
};

struct foo foovar = {1, {{3,6},{3,10},{3,14},{8,4}, {8,8},{8,12},{8,16},{12,2}}}; 
```

# php - 过去 15 分钟内的 IRC 客户端活跃用户数

> ID：10491406
> 
> 赞同：0
> 
> 时间：2012-05-08T01:38:48.837
> 
> 标签：php, irc

我试图找出在过去 15 分钟内显示活跃用户。并非聊天室中的所有用户。这可以在PHP中显示吗？

老实说，我对此一无所知。我玩的游戏的所有者正在尝试这样做。只是想帮助他。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:56:16.690

如果您在频道上进行大量登录或在频道中有某种机器人来跟踪用户，那么您可以合理地实现这一点的唯一方法。无论哪种方式，PHP 只负责解析日志以识别活跃用户。IRC 频道本身并不专门跟踪此信息。

# django - 如何渲染中间表内联*as*多项选择

> ID：10491410
> 
> 赞同：1
> 
> 时间：2012-05-08T01:39:40.217
> 
> 标签：django, django-forms, many-to-many, m2m

我有以下型号，

```
### models.py

class Foo(models.Model):
    name = models.CharField(max_length=200)

class Bar(models.Model):
    foo = models.ForeignKey(Foo)
    baz = models.ManyToManyField(Baz, through='Between')

class Baz(models.Model):
    name = models.CharField(max_length=200)

class Between(models.Model):
    foo = models.ForeignKey(Foo)
    bar = models.ForeignKey(Bar)
    CHOICES = (
        ('A', 'A'),
        ('B', 'B'),
        ('C', 'C'),
        )
    value = models.CharField(max_length=1, choices=CHOICES) 
```

我有以下表格，

```
### forms.py
class FooForm(forms.ModelForm):
    class Meta:
        model = Foo

class BarForm(forms.ModelForm):
    baz = forms.ModelMultipleChoiceField(widget=forms.CheckboxSelectMultiple(),
                                         queryset=Baz.objects.all())
    class Meta:
        model = Bar
        exclude = ('foo',)

BarFormSet = inlineformset_factory(Foo, Bar, form=BarForm, can_delete=False) 
```

现在，这很好用，因为我可以渲染单个`Foo`并且我得到了许多内联表单`Bar`。这呈现的是内联`BarForm`将所有选项呈现`Baz`为复选框。

我希望将每条记录`Baz`呈现为一组单选按钮，代表可能的选择`value`——以及“N/A”选项——这样如果选择了 A、B 或 C与 的关系`Baz`是隐含的。但是默认情况下，完全重新实现 RadioSelect 或实现一个全新的小部件似乎没有一个很好的方法，但我想遵循阻力最小的路径。

希望我把事情说清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:18:16.427

我的解决方案是创建`SuperForm`允许子表单。整个解决方案对每个人来说都不是很*通用*，但我在这里尽了最大努力采用我正在使用的东西并使其更通用。

这里是`models.py`：

```
from django.db import models

class Enemy(models.Model):
    name = models.CharField(max_length=200)
    def __unicode__(self):
        return self.name

class Hero(models.Model):
    name = models.CharField(max_length=200)
    enemy = models.ManyToManyField(Enemy, through='Relationship', blank=False, null=False)
    def __unicode__(self):
        return self.name

class Relationship(models.Model):
    hero = models.ForeignKey(Hero)
    enemy = models.ForeignKey(Enemy)
    ENEMY_TYPE_CHOICES = (
        ('G', 'Good'),
        ('B', 'Bad'),
        ('U', 'Ugly'),
        )
    enemy_type = models.CharField(max_length=1, choices=ENEMY_TYPE_CHOICES)

    def __unicode__(self):
        return u"{0} {1} {2}".format(self.hero, self.strength, self.relationship) 
```

这是我的内容`forms.py`：

```
from models import *
from django import forms
from django.forms.formsets import formset_factory, BaseFormSet
from django.forms.models import inlineformset_factory, BaseModelFormSet
from django.utils.safestring import mark_safe

class SuperForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        self.formsets = []
        super(SuperForm, self).__init__(*args, **kwargs)

    @property
    def is_bound(self):
        return self._is_bound or \
            any([subformset.is_bound for subformset in self.formsets])

    @is_bound.setter
    def is_bound(self, value):
        self._is_bound = value

    def has_changed(self):
        return bool(self.changed_data) or \
            any([subformset.has_changed() for subformset in self.formsets])

    def update_empty_permitted(self, subformset):
        empty_permitted = not self.has_changed()
        for subformset in self.formsets:
            for form in subformset:
                form.empty_permitted = empty_permitted

    def is_valid(self):
        subforms_valid = True
        for subformset in self.formsets:
            self.update_empty_permitted(subformset)
            sfserrors = [err for err in subformset.errors if err]
            if bool(sfserrors):
                subforms_valid = False

        return subforms_valid and super(SuperForm, self).is_valid()

class RelationshipForm(forms.ModelForm):
    enemy = forms.ModelChoiceField(queryset=Enemy.objects.all(),
                                   widget=forms.HiddenInput(),
                                   required=True)
    enemy_type = forms.ChoiceField(label="", widget=forms.RadioSelect,
                                 choices=Relationship.ENEMY_TYPE_CHOICES,
                                 required=True)
    def name(self):
        pk = self['enemy'].value()
        return self.fields['enemy'].queryset.get(pk=pk)

    class Meta:
        model = Relationship
        exclude = ('hero', 'enemy_type',)

RelationshipFormSet = formset_factory(RelationshipForm, extra=0, can_delete=False)

class HeroForm(SuperForm):
    def __init__(self, *args, **kwargs):
        super(HeroForm, self).__init__(*args, **kwargs)

        initial=[dict(enemy=enemy.pk) for enemy in Enemy.objects.all()]
        self.relationship_formset = RelationshipFormSet(initial=initial, prefix=self.prefix, data=kwargs.get('data'))
        self.formsets.append(self.relationship_formset)

    class Meta:
        model = Hero
        exclude = ('enemy',)

HeroFormSet = formset_factory(HeroForm, extra=1, can_delete=False) 
```

这是`views.py`：

```
from django.views.generic import TemplateView
from django.views.generic.edit import FormMixin
from forms import *

class HeroView(FormMixin, TemplateView):
    template_name = "formfun/hero.html"
    form_class = HeroFormSet

    def get_context_data(self, **kwargs):
        context = super(HeroView, self).get_context_data(**kwargs)
        context['formset'] = HeroFormSet()
        return context

    def form_valid(self, form):
        return render_to_response({'form':form, 'valid': True})

    def form_invalid(self, form):
        return render_to_response({'form':form, 'valid': False}) 
```

这是我渲染它的模板：

```
{% extends "base.html" %}
{% block title %}form fun{% endblock %}

{% block content %}
<form>
  {% for form in formset %}
  {{ form.as_p }}
  {% for subform in form.relationship_formset %}
  <label for="id_{{ subform.html_name }}_0" class="label50">{{ subform.name }}</label>
  {{ subform.as_p }}
  {% endfor %}
  {% endfor %}
</form>
{% endblock content %} 
```

# android - Android - 如何向我的应用商店发送 Intent 崩溃？

> ID：10491411
> 
> 赞同：0
> 
> 时间：2012-05-08T01:39:48.080
> 
> 标签：android

我有这个代码：

```
Button give_review = (Button)findViewById(R.id.give_review);   
give_review.setOnClickListener(new Button.OnClickListener() 
{  
    public void onClick(View v) 
    {   
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse("market://details?id=com.problemio"));
        startActivity(intent);                
    }
}); 
```

并且由于某种原因，当单击按钮时，系统崩溃了。

我的申请网址是这样的：`store/apps/details?id=com.problemio`

我的班级位于此目录中：

```
src/com/problemio/content/MyClassNameActivity 
```

什么可能导致崩溃？我在我的应用程序的其他部分使用此代码并且它可以工作，尽管其他类是 src/com/problemio 目录中较低的一个目录。

这是堆栈跟踪：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://details?id=com.problemio }
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
at android.app.Activity.startActivityForResult(Activity.java:3190)
at android.app.Activity.startActivity(Activity.java:3297)
at com.problemio.content.BusinessIdeasActivity$5.onClick(BusinessIdeasActivity.java:105)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14105)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

感谢您的建议，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:25:34.583

模拟器中没有**市场**可以找到`ActivityNotFoundException`像这样的东西：

```
05-07 22:20:46.702: E/AndroidRuntime(580): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://details?id=com.problemio }
05-07 22:20:46.702: E/AndroidRuntime(580):  at ...
05-07 22:20:46.702: E/AndroidRuntime(580):  ... 11 more 
```

没有其他`Activity`人可以处理这个意图。

# c# - 操纵实体框架以消除到数据库的往返行程

> ID：10491412
> 
> 赞同：0
> 
> 时间：2012-05-08T01:40:11.587
> 
> 标签：c#, .net, entity-framework, orm, entity-framework-4.1

假设我有以下代码（我知道可以很**容易地**对其进行修改以获得更好的性能，但它说明了我想要做什么）

```
List<Query> l = new List<Query>; 
// Query is a class that doesn't exist, it represents an EF operation

foreach (var x in Xs)
{
  Query o = { context.someEntity.Where(s=>s.Id==x.Id).First();} 
  // It wouldn't execute it, this is pseudo code for delegate/anonymous function
  l.Add(o)
} 
```

然后将此查询列表发送到 EF，并对其进行优化，以尽可能减少往返次数。我们称之为 BatchOptimizeAndRun；你会说

```
var results = BatchOptimizeAndRun(l); 
```

并且知道它从模式中知道什么，它会将整体查询减少到最佳版本并执行该版本并将读取结果放入数组中。

我希望我已经准确地描述了我正在寻找的东西，更重要的是它存在。如果我听起来像一个漫无边际的疯子，让我们假装这个问题从未存在过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:35:21.133

我不得不回应 Moore 先生的建议，因为我也花了太长时间构建一个整体比例的 linq-to-entities 查询，结果却发现我可以在更短的时间内制作一个更易于阅读的存储过程，并且执行速度更快。在你的例子中说...

```
List<int> ids = Xs.Select(x => x.Id).ToList();
var results = context.someEntity.Where(s => ids.Contains(s.Id)).ToList(); 
```

我相信这会编译成类似的东西

```
SELECT
    *
FROM
    someEntity
WHERE
    Id IN (ids) --Where ids is a comma separated list of INT 
```

这将为您提供所需的东西。

# javascript - HTML/JS 检测图像上的区域

> ID：10491413
> 
> 赞同：2
> 
> 时间：2012-05-08T01:40:11.390
> 
> 标签：javascript, html, canvas, detection, imagemap

在网络上（实际上是移动开发中的 webview），我有一个篮球场的图像。我需要检测球场图像上区域的点击（触摸），无论是在 3 点线内还是在其外。实现这一目标的最简单方法是什么？老派形象图？SVG？帆布标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:35:20.123

[使用Kinetic](http://fabricjs.com/)和[Fabric](http://www.kineticjs.com/)`<canvas>`等众所周知的框架在元素上最容易做到这一点。

您将在底层加载图像，然后在整个图像上应用 3pt 层。在 3pt 层之上是一个弧形的 2pt 层。分层看起来像这样，从上到下：

```
- 2pt "arc" layer on either side  |
- 3pt "full court" layer          |  Click propagation
- court image                     V 
```

所以当玩家触摸到 2pt 弧层内部时，你就知道它是 2pt。当玩家在三分线外触球时，接住触球的是 3pt 层。此外，框架可能允许传播到底层。你必须阻止那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:40:24.250

图像映射可能是最简单的实现。否则，您需要订阅在球场上的任意位置单击，然后检查鼠标相对于图像的坐标。

如果我是你，我会省去为它编写客户端代码的痛苦，而只需使用图像映射。他们在这样的事情上工作得很好。

[http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:54:22.443

当您不使用画布时，您可以使用此解决方案：[单击图像并使用 Javascript 获取坐标 (2006)](http://www.emanueleferonato.com/2006/09/02/click-image-and-get-coordinates-with-javascript/)

对于画布，也有一个解决方案：

1.  [如何获取鼠标单击画布元素的坐标？](https://stackoverflow.com/questions/55677/how-do-i-get-the-coordinates-of-a-mouse-click-on-a-canvas-element)
2.  [在画布中获取鼠标位置](https://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas)

最简单的解决方案是获取一个库并使用它的功能......

# php - 根据 PHP 登录中的用户名显示评论？

> ID：10491415
> 
> 赞同：0
> 
> 时间：2012-05-08T01:40:36.913
> 
> 标签：php

我有一个使用带有用户名和密码的平面文件（.txt）系统的 PHP 登录，它位于一个名为 users.txt 的文件中，它们位于以下布局中，例如

用户1||密码1

用户2||密码2

用户3||密码3

到目前为止，我设法让用户根据他们的用户名和密码登录。

现在我想要一个 PHP 代码，这样当用户使用上述方法登录时，会根据用户名显示自定义评论。我希望这个在一个单独的文本文件中，并根据用户的登录方式显示，例如

User1||你好约翰，你看起来很棒

User2||不要让雨破坏你的一天

User3||假期万岁

因此，如果 User1 使用他的用户名和密码登录 - 只有他们可以看到他们的相关评论，其他人也是如此。

请问这怎么做？

我在想有一个类似的代码

```
$name = $_SESSION["valid_user"]; 
$comments = $_POST['comments']; 
$file = file_get_contents("comments.txt"); 
if(strstr($file, "$name||$comments")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:49:33.360

一个简单的方法是创建一个数组，其中键是用户名，值是每个用户的评论。

```
$comments = array(
  "user1" => "You smell funny.",
  "user2" => "Your cat is annoying me.",
  "user3" => "You're an okay person... for now.",
  // So on and so on...
); 
```

并不是说我宽恕您进行登录或内容存储的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:45:20.317

嗯.. 我不认为你了解 PHP/Login。

密码+文本文件=可怕。您应该将信息存储在数据库中，例如 MySql。

然后，您可以执行一个简单的 if 语句/switch 命令来为每个用户输出一条自定义消息。

```
if($username == 'Alan') { echo "Welcome boss"; }
else if($username == 'Clara') { echo "you look great today"; }
else { echo "Welcome ".$username; } 
```

# javascript - 从字符串解析 HTML

> ID：10491416
> 
> 赞同：1
> 
> 时间：2012-05-08T01:40:40.797
> 
> 标签：javascript, ajax

```
var 
    parser = new DOMParser(),
    d = parser.parseFromString('<?xml version="1.0"?><div class="a">Hello</div>', 'application/xhtml+xml');

console.log(d.querySelector('*'));
console.log(d.querySelector('div'));
console.log(d.querySelector('div.a')); 
```

前两个选择器工作

最后一个选择器....类选择器....返回 null :(

任何想法为什么？

需要它来从 AJAX 查询 html 结果，并且不想将其添加到主 DOM 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:42:55.443

因为您的 html/xml 无效。尝试`</a>`更改为`</div>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T01:42:40.063

试试看：

```
console.log(d.querySelector('div[class=a]')); 
```

# java - AbstractListModel 中刷新 JComboBox 的方法？

> ID：10491422
> 
> 赞同：1
> 
> 时间：2012-05-08T01:41:37.863
> 
> 标签：java, swing, jcombobox

JComboBox 从数据库中检索信息。添加数据后，列表应立即更新。

我知道我需要`fireContentsChanged`更新这些值。我不确定我应该在方法中做什么。任何指导将不胜感激！

```
class ComboModel extends AbstractListModel implements ComboBoxModel 
{
    ArrayList list = new ArrayList();

    @Override
    public Object getElementAt(int arg0) {

        return null;
    }

    @Override
    public int getSize() {
        return list.size();     
    }

    @Override
    public Object getSelectedItem() {

    }

    @Override
    public void setSelectedItem(Object arg0) {

    }           
}

stockListComboBox = new JComboBox();
ComboModel model = new ComboModel();
stockListComboBox.setModel(model);          

try
{
    // Database stuffs
}

catch(Exception e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:02:09.277

您需要提供一些集合作为模型的核心，例如 ArrayList 或其他类型的有序列表。这样做，这些方法将开始有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:17:39.940

如前所述，您需要提供数据。组合框最简单的方法是使用 DefaultComboBoxModel ，它在其构造函数中采用 Object[] 。一般来说，上面的前两种方法是为了 1）获取列表中的元素，2）返回列表的大小。

接下来的两个用于跟踪列表中的哪个项目被选中。我建议查看 javadocs。此外，如果您使用 eclipse、netbeans 或 intellij，您应该可以很容易地查看 DefaultComboBoxModel 的源代码，并且这些方法的作用应该很明显。

# sql - 选择创建每月增量条目表的查询

> ID：10491423
> 
> 赞同：1
> 
> 时间：2012-05-08T01:41:47.760
> 
> 标签：sql, oracle

我需要能够使用一个选择查询，它会以某种方式生成一个条目列表，其中包含来自两个变量 STARTDATE 和 ENDDATE 的每月增量。一个示例如下所示：

从表中获取 STARTDATE 和 ENDDATE

```
STARTDATE   ENDDATE
----------- -----------
01-JAN-2011 1-DEC-2011 
```

这导致

```
CALENDAR 
--------- 
01-JAN-11 
01-FEB-11 
01-MAR-11 
01-APR-11 
01-MAY-11 
01-JUN-11 
01-JUL-11 
01-AUG-11 
01-SEP-11 
01-OCT-11 
01-NOV-11 
01-DEC-11 
```

关于如何做到这一点的任何想法？有人告诉我一种名为“CONNECT BY”的方法，但它不适用于闰年之类的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:50:17.063

像这样的东西应该工作

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select date '2011-01-01' start_date,
  3           date '2011-12-01' end_date
  4      from dual
  5  )
  6  select add_months( start_date, level-1 )
  7    from x
  8* connect by level <= months_between( end_date, start_date ) + 1
SQL> /

ADD_MONTH
---------
01-JAN-11
01-FEB-11
01-MAR-11
01-APR-11
01-MAY-11
01-JUN-11
01-JUL-11
01-AUG-11
01-SEP-11
01-OCT-11
01-NOV-11
01-DEC-11

12 rows selected. 
```

# html - 如何将包装器设置为在正文中自动垂直居中？

> ID：10491430
> 
> 赞同：1
> 
> 时间：2012-05-08T01:42:23.530
> 
> 标签：html, css, center, vertical-alignment

我没有为身体设置高度 - 我只是希望包装器在身体内自动垂直居中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:56:26.623

您可以使用几个包装`<div>`元素并使用`display: table`,`display: table-cell`和`vertical-align: middle`.

[jsFiddle](http://jsfiddle.net/jonypawks/KPufS/1/)

# iphone - 无法运行 Apple 的 LoadPresetDemo 应用程序暂停，Xcode 给了我一个 SIGABRT

> ID：10491431
> 
> 赞同：1
> 
> 时间：2012-05-08T01:42:23.513
> 
> 标签：iphone, core-audio

我正在跳入 CoreAudio 的可怕飞跃。我已经下载了名为“LoadPresetDemo”的苹果演示。我没有对苹果的原始代码进行任何修改。当我尝试运行它时，它编译没有错误，但模拟器冻结并显示“线程 1：singal SIGABRT”。然后在调试窗口中列出了 9 个线程。如果这有助于任何人弄清楚发生了什么，我已经包含了下面的命令行信息，但我应该能够毫无问题地运行苹果编写的东西。如果该信息有任何用处，我在这台计算机上安装了 Digidesign Protools。我在这里不知所措，我不知道下一步该做什么。谁能帮我？

> 2012-05-07 18:30:21.453 加载预设[852:10703] 加载/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn: dlopen(/System/Library) 时出错/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn，262）：找不到符号：__*CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.510 加载预设[852:10703] 加载/System/时出错Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn: dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262 ）：未找到符号：_*_CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.549 加载预设[852:10703] 加载/System/时出错库/扩展/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262 ）：找不到符号：__*CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.558 加载预设[852:10703] 加载/System/时出错库/扩展/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262 ）：未找到符号：_*_CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.575 Load Presets[852:10703] Error loading /System/库/扩展/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262 ）：找不到符号：__*CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.583 加载预设[852:10703] 加载/System/时出错库/扩展/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262 ）：未找到符号：_*_CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.601 加载预设 [852:10703] 加载 /System/ 时出错库/扩展/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262 ）：找不到符号：__*CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 2012-05-07 18:30:21.609 加载预设 [852:10703] 加载 /System/ 时出错库/扩展/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262 ）：未找到符号：_*_CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.698 Load Presets[852:10703] Error loading /Library/音频/插件/HAL/Digidesign CoreAudio.plugin/Contents/MacOS/Digidesign CoreAudio：dlopen（/Library/Audio/Plug-Ins/HAL/Digidesign CoreAudio.plugin/Contents/MacOS/Digidesign CoreAudio，262）：符号不是找到：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator。platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security 2012-05-07 18:30:21.699加载预设[852:10703] 在 CFBundle/CFPlugIn 0x737e530 中找不到工厂 B8A063B5-2F3D-444A-88CB-D0B8F1B22042 的函数指针 NewDigiCoreAudioPlugIn（捆绑，未加载）2012-05-07 18:30:21.7104 加载预设[852:10 ]714 加载预设[852:10703]714 加载预设[852:10703]*** 断言失败 -[MainViewController configureAndStartAudioProcessingGraph:], /Users/micha liberman/Documents/Objective C Lessons/__Drop Droper Resources/LoadPresetDemo/LoadPresetDemo/Classes/MainViewController.m:170 2012-05-07 18:30:21.715 加载预设[852:10703]****由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“AudioUnitSetProperty（设置采样器单元输出流采样率）。Error code: -10865 'è'ˇˇ'' ** * First throw call stack: (0x17a6022 0x28afcd6 0x174ea48 0xe312cb 0x3242 0x5293 0x21c9 0x498386 0x499274 0x4a8183 0x4a8c38 0x49c634 0x2e49ef5 0x177a195 0x16deff2 0x16dd8da 0x16dcd84 0x16dcc9b 0x498c65 0x49a626 0x20fc 0x20a5 0x1) terminate called throwing an exception*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:59:23.220

我得到的和你描述的完全一样。

在 [your-app-name]-Info.plist 中（它位于第一个选项卡“显示项目导航器”下）删除“主 nib 文件基本名称（iPad）”行，内容如下，直到行尾.

干杯，矩阵3003*

# c++ - 向量 或矢量<矢量 >?

> ID：10491445
> 
> 赞同：3
> 
> 时间：2012-05-08T01:43:58.477
> 
> 标签：c++, matrix, vector, boggle

我正在开发一个[Boggle](http://en.wikipedia.org/wiki/Boggle)游戏求解器，它可以读取文本文件（板）的行。

如果我应该使用s的a或s的`vector`矩阵，我一直在来回走动。我认为of会更容易访问，因为它是of s需要我使用该功能的地方。`string``vector``char``vector``chars``myvec[y][x]``vector``string``string.at()`

`char`我不知道如果我应该将每一行解析到s 或将行保留为 a`string`并根据需要访问每个行，哪个会有更好的性能`char`。关于我应该做哪一个的任何建议？解释*为什么*会有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T01:56:34.237

正如所评论的，您可以`operator[]`在字符串上使用，就像`vector`s 或数组一样。

在适当的优化下，性能将与 for 大致相同`vector<char>`-`string`两者都是引擎盖下的数组，并且在这两种情况下`operator[]`都将有效地成为结构成员访问和间接查找。他们甚至提供了几乎[相同](http://www.cplusplus.com/reference/stl/vector/)的一套[方法](http://www.cplusplus.com/reference/string/string/)。

选择使您的代码更易读/更简单的那个。

# javascript - 如何在 HTML 5 Web Worker 中访问 jQuery

> ID：10491448
> 
> 赞同：22
> 
> 时间：2012-05-08T01:44:34.577
> 
> 标签：javascript, jquery, html, web-worker

我无法在 HTML5 [web worker](https://en.wikipedia.org/wiki/Web_worker)中访问 jQuery 。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-11-26T18:09:00.437

# tl;dr：在 jQuery 之前包含[这个脚本](http://fel.8u.cz/workerrjs/main/workerFakeDOM.js)

JQuery 最初会访问许多`document`属性来检查浏览器功能。`document`未在 Worker 中定义，此时您实际上无法`Document`在 Web Worker 中创建实例。JQuery 并没有为此做好准备 - 正如您在对您的问题的评论中看到的那样，似乎没有人理解您将如何使用没有 DOM 的 JQuery。

正如我所说，因为 JQuery 需要`document`初始化，所以我创建了一个虚拟的假文档对象。此对象在 JQuery 测试期间充当真实文档：

```
var document = self.document = {parentNode: null, nodeType: 9, toString: function() {return "FakeDocument"}};
var window = self.window = self;
var fakeElement = Object.create(document);
fakeElement.nodeType = 1;
fakeElement.toString=function() {return "FakeElement"};
fakeElement.parentNode = fakeElement.firstChild = fakeElement.lastChild = fakeElement;
fakeElement.ownerDocument = document;

document.head = document.body = fakeElement;
document.ownerDocument = document.documentElement = document;
document.getElementById = document.createElement = function() {return fakeElement;};
document.createDocumentFragment = function() {return this;};
document.getElementsByTagName = document.getElementsByClassName = function() {return [fakeElement];};
document.getAttribute = document.setAttribute = document.removeChild = 
  document.addEventListener = document.removeEventListener = 
  function() {return null;};
document.cloneNode = document.appendChild = function() {return this;};
document.appendChild = function(child) {return child;}; 
```

请注意，这个假文档只是为了允许 jQuery 加载，它不会允许任何真正的 DOM 操作。

## 示例用法：

```
importScripts("workerFakeDOM.js");
importScripts('jquery-2.1.4.min.js');
console.log("JQuery version:", $.fn.jquery); 
```

## [测试脚本](http://fel.8u.cz/workerrjs/main/jquery.html)

允许您使用我的脚本尝试各种版本的 JQuery。

## [JSfiddle](http://jsfiddle.net/b3kf3e55/2/)

检查您是否正在使用`http://`，我的域不适用于`https://`。

## [下载为脚本](http://fel.8u.cz/workerrjs/main/workerFakeDOM.js)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-04-03T07:19:29.407

Tomáš Zato 的答案是正确的，但不再适用于较新的 jQuery 版本。我为 jQuery 3.1.1 添加了更多内容：

```
var document = self.document = { parentNode: null, nodeType: 9, toString: function () { return "FakeDocument" } };
var window = self.window = self;
var fakeElement = Object.create(document);
fakeElement.nodeType = 1;
fakeElement.toString = function () { return "FakeElement" };
fakeElement.parentNode = fakeElement.firstChild = fakeElement.lastChild = fakeElement;
fakeElement.ownerDocument = document;

document.head = document.body = fakeElement;
document.ownerDocument = document.documentElement = document;
document.getElementById = document.createElement = function () { return fakeElement; };
document.createDocumentFragment = function () { return this; };
document.getElementsByTagName = document.getElementsByClassName = function () { return [fakeElement]; };
document.getAttribute = document.setAttribute = document.removeChild =
    document.addEventListener = document.removeEventListener =
    function () { return null; };
document.cloneNode = document.appendChild = function () { return this; };
document.appendChild = function (child) { return child; };
document.childNodes = [];
document.implementation = {
    createHTMLDocument: function () { return document; }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-06T11:44:37.203

有没有人尝试过 jQuery - No DOM Edition？[https://github.com/kpozin/jquery-nodom](https://github.com/kpozin/jquery-nodom)。

这是 jQuery 库的一小部分，旨在用于 Web Worker 上下文，其中大多数浏览器 API 都不存在。

这主要是通过修改 jQuery 构建指令（Makefile）以仅包含非 DOM 模块来实现的。

这可能有助于解决问题，因为此构建没有 DOM 依赖项，这是在 webworker 中导入 jQuery 时的一个障碍。将尽快为此提供一些示例代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T02:00:24.890

jQuery 自己的一位领导者提供了一个很好的插件，可以将 Web Worker 与 jQuery 一起使用。[在 GitHub 上](https://github.com/rwldrn/jquery-hive)查看他的插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-25T20:45:09.903

是否使用：

```
importScripts("jQueryWhatever.js");
$.blahblahblah(); 
```

没有按预期工作？我怀疑它会毫无问题地加载 jQuery，但大多数与 good-ole $ 相关的调用将无法按预期工作，因为 WebWorker 内部没有 DOM 访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-23T15:30:52.217

作为替代方案，您可以使用[**Cheerio**](https://github.com/cheeriojs/cheerio)。

> 专为服务器设计的核心 jQuery 的快速、灵活和精简的实现。

您只需要[浏览](http://browserify.org/)模块，并将[生成的文件](https://wzrd.in/standalone/cheerio@latest)加载到您的网络工作者中。然后，您将能够解析您的字符串文档并像 jQuery 一样查询它：

```
$ = cheerio.load('<h2 class="title">Hello world</h2>') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-15T19:18:57.717

**jQuery 3.3.1**

我使用了[Luke Vo](https://stackoverflow.com/a/43178720/14452348)的代码，不得不添加一些额外的代码。我将此功能放在我的网络工作者中并且效果很好：

```
 const webWorkerJQueryFix = () => {
    document = self.document = { parentNode: null, nodeType: 9, toString: () => { return "FakeDocument" } };
    window = self.window = self;
    const fakeElement = Object.create(document);
    fakeElement.nodeType = 1;
    fakeElement.toString = () => { return "FakeElement" };
    fakeElement.parentNode = fakeElement.firstChild = fakeElement.lastChild = fakeElement;
    fakeElement.ownerDocument = document;

    document.innerHTML = "";
    document.head =
        document.body =
        fakeElement;
    document.ownerDocument =
        document.documentElement =
        document;

    document.createElement =
        document.getElementById =
        document.getElementsByClassName =
        document.getElementsByTagName = () => { return [fakeElement]; };

    document.appendChild = (child) => { return child; };

    document.createDocumentFragment = () => {
        this.appendChild = document.appendChild;
        return this;
    };

    document.getAttribute =
        document.removeChild =
        document.addEventListener =
        document.removeEventListener =
        document.setAttribute = () => { return null; };

    document.cloneNode = () => {
        this.cloneNode = document.cloneNode;
        this.lastChild = {
            checked: false,
        }
        return this;
    };

    document.childNodes = [];
    document.implementation = {
        createHTMLDocument: () => { return document; }
    }
} 
```

# ios - 脚本动画块 iOS

> ID：10491451
> 
> 赞同：3
> 
> 时间：2012-05-08T01:45:07.050
> 
> 标签：ios, animation, objective-c-blocks

我正在尝试为一系列全屏图像制作动画。每个图像将以不同的方式进行动画处理。我想将这些动画存储在数据库或 plist 或其他任何地方，我只是不想让它们硬编码。动画将非常简单，图像中的对象会摇晃或反弹或你有什么。我将使用块为对象设置动画，理想情况下我希望将各个块存储在数据存储中。我想避免使用单独的脚本语言或类似的东西。

我最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:16:52.853

如果要将它们存储在例如 plist 中，可以执行以下操作：

```
<plist>
<array>
    <dict>
        <key>filename</key>
        <string>first.jpg</string>
        <key>animation</key>
        <string>bounce</string>
        <key>duration</key>
        <real>0.5</real>
    </dict>
    <dict>
        <key>filename</key>
        <string>second.jpg</string>
        <key>animation</key>
        <string>easeinout</string>
        <key>duration</key>
        <real>1.0</real>
    </dict>
    <!-- et cetera -->
</array>
</plist> 
```

然后，您可以通过编写类似于以下代码片段的内容将其解码为实际动画：

```
- (void)loadAnimations
{
    NSArray *animations = [NSArray arrayWithContentsOfFile:@"/Users/H2CO3/animations.plist"];
    for (NSDictionary *animation in animations)
    {
        UIImage *img = [UIImage imageNamed:[animation objectForKey:@"filename"]];
        NSString *animationType = [animation objectForKey:@"animation"];
        float duration = [(NSNumber *)[animation objectForKey:@"duration"] floatValue];

        if ([animationType isEqualToString:@"bounce"])
        {
            /* animation block 1 */
        }
        else if ([animationType isEqualToString:@"easeinout"])
        {
            /* animation block 2 */
        }
        /* Et cetera... */
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:05:01.233

如果可能的话，我不清楚将动画存储在数据存储中可以获得什么好处。如果您只是不想重复动画代码，可以将其放入方法中并将视图传递给该方法。

```
-(void)jiggle:(UIView *)image {
    [UIView animateWithDuration:.1
                          delay:0
                        options:UIViewAnimationOptionLayoutSubviews
                     animations:^{
                         image.transform = CGAffineTransformMakeRotation(-5 * M_PI / 180);
                     }
                     completion:^(BOOL finished){
                         [UIView animateWithDuration:.1
                                               delay:0
                                             options:UIViewAnimationOptionLayoutSubviews
                                          animations:^{
                                              image.transform = CGAffineTransformMakeRotation(5 * M_PI / 180);
                                          }
                                          completion:^(BOOL finished){
                                              [UIView animateWithDuration:.1
                                                                    delay:0
                                                                  options:UIViewAnimationOptionLayoutSubviews
                                                               animations:^{
                                                                   image.transform = CGAffineTransformMakeRotation(0 * M_PI / 180);
                                                               }
                                                               completion:nil
                                               ];
                                          }
                          ];
                     }
     ];
} 
```

# php - 在 PHP 中将时间更改为时间字符串

> ID：10491456
> 
> 赞同：0
> 
> 时间：2012-05-08T01:45:38.520
> 
> 标签：php

在我的网站上，我们以以下格式存储所有时间和日期：

表格列：日期 - 16.01.2012 表格列：时间 - 06:36:50pm

这给居住在不同时区的人带来了问题，因此我们正在考虑将其更改为简单的 time() 字符串，但是因为我们网站上的很多内容已经有这样的 time(old，而不是 time() 字符串) 在数据库中，我们想保留该数据，因此想知道如何将这些字符串更改为 time()。

我了解如何更新数据库以及所有内容，我在将 16.01.201206:36:50pm 实际转换为其各自的 time() 字符串时迷失了方向，因为 strtotime 喜欢完美。

感谢您的宝贵时间，我期待您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:51:15.377

您是在问如何在数据库中进行转换，或者在将数据库加载到 PHP 中时如何转换数据库中的日期时间？

如果是后者，您可以通过多种方式设置日期格式。

取自 date_format 的 PHP 手册的注释：

```
 <?php

    $result = mysql_query("SELECT `datetime` FROM `table`");
    $row = mysql_fetch_row($result);
    $date = date_create($row[0]);

    echo date_format($date, 'Y-m-d H:i:s');
    #output: 2012-03-24 17:45:12

    echo date_format($date, 'd/m/Y H:i:s');
    #output: 24/03/2012 17:45:12

    echo date_format($date, 'd/m/y');
    #output: 24/03/12

    echo date_format($date, 'g:i A');
    #output: 5:45 PM

    echo date_format($date, 'G:ia');
    #output: 05:45pm

    echo date_format($date, 'g:ia \o\n l jS F Y');
    #output: 5:45pm on Saturday 24th March 2012

    ?> 
```

这些只是一些例子。看看[这个](http://www.php.net/manual/en/datetime.format.php)页面以获得更多想法。

**根据评论编辑：**

您可以使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)，它允许您指定要传入的日期时间的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:38:49.883

寻找`mysql`调用的函数`str_to_date`

假设您调用了 dbtable 文本字段`date_str`，其格式为 YYYYMMDD。您可以使用 ff 查询来输出正确的日期字段。

```
SELECT str_to_date(date_str, '%Y%m%D') as date_fld FROM dbtable ... 
```

[这是链接](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:57:14.883

我知道这有点晚了，但我也认为这应该通过数据库来完成。我认为这将删除一些额外的步骤，并且可能比诉诸 PHP 的日期格式功能快一点。您可以编写如下所示的 SQL 语句：

```
"SELECT UNIX_TIMESTAMP(TIMESTAMP(STR_TO_DATE(Date, '%d.%m.%Y'), STR_TO_DATE(Time, '%r'))) AS epoch FROM Table" 
```

这应该以您正在寻找的正确 time() 格式返回所有内容。

# monodevelop - 如何让 Monodevelop 重新使用英语作为其语言

> ID：10491457
> 
> 赞同：4
> 
> 时间：2012-05-08T01:45:50.273
> 
> 标签：monodevelop

我不知道它是怎么发生的，但是当我启动 Monodevelop 时，菜单突然以英语以外的语言出现。我已经尝试重新安装应用程序以及手动删除库下其他目录中的工件。没运气。重新安装后，它仍然以另一种语言加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T02:51:38.250

您可以在选项/首选项对话框下更改语言。

对我来说，快捷键是 'command + comma' 或者它是 MonoDevelop 菜单下的第三个菜单项。

在左侧树视图中选择第一个子条目。“视觉风格” 在右侧，顶部有三个选项卡。选择第一个。“一般的”

“用户界面语言”设置是该屏幕上的第二个组合框。

更改它并单击屏幕底部的确定。应该在右边。

重新启动 MonoDevelop。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:22:11.507

您能否在[https://bugzilla.xamarin.com](https://bugzilla.xamarin.com)上打开一个错误，包括来自 MD 的关于对话框的版本信息，并附上您的首选项文件“~/Library/Preferences/MonoDevelop-2.8/MonoDevelopProperties.xml”？

# mysql - 动态 CASE sql 语句的问题

> ID：10491462
> 
> 赞同：2
> 
> 时间：2012-05-08T01:47:16.090
> 
> 标签：mysql, case

我有一个名为 hg_liveitems 的表，其中包含当前网站上的项目。“类型”字段可以是水果、蔬菜或树木。水果、树木和蔬菜都有单独的表格，它们都具有相同的字段。基本上我需要一个查询来选择正确的`name`字段以及要加入的正确表。此刻我有这个：

```
SELECT `hg_liveitems`.`id`, `hg_liveitems`.`price`, `hg_liveitems`.`grabs`, `hg_liveitems`.`quantity`, `hg_liveitems`.`created` 
    CASE `hg_liveitems`.`type` 
        WHEN '1' THEN `hg_fruit`.`name` 
        WHEN '2' THEN `hg_trees`.`name` 
        WHEN '3' THEN `hg_veg`.`name` 
    END AS `name` 
FROM `hg_liveitems` 
INNER JOIN 
    CASE `hg_liveitems`.`type` 
        WHEN '1' THEN `hg_fruit` ON `hg_liveitems`.`produce_id` = `hg_fruit`.`id` 
        WHEN '2' THEN `hg_trees` ON `hg_liveitems`.`produce_id` = `hg_trees`.`id` 
        WHEN '3' THEN `hg_veg` ON `hg_liveitems`.`produce_id` = `hg_veg`.`id` 
    END 
WHERE `hg_liveitems`.`grower_id` = '2' 
AND `hg_liveitems`.`status` < '2' 
```

但我只是遇到错误，而且我对 CASE 语句的了解还不够，无法知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:52:20.630

你不能像那样做一个有条件的内连接——这是一个语法错误。考虑重写为三个外连接和一个 where 子句来限制结果。

```
SELECT `hg_liveitems`.`id`, `hg_liveitems`.`price`, `hg_liveitems`.`grabs`, `hg_liveitems`.`quantity`, `hg_liveitems`.`created` 
CASE `hg_liveitems`.`type` 
    WHEN '1' THEN `hg_fruit`.`name` 
    WHEN '2' THEN `hg_trees`.`name` 
    WHEN '3' THEN `hg_veg`.`name` 
END AS `name` 
FROM `hg_liveitems` 
LEFT OUTER JOIN `hg_fruit` ON `hg_liveitems`.`produce_id` = `hg_fruit`.`id`
LEFT OUTER JOIN `hg_trees` ON `hg_liveitems`.`produce_id` = `hg_trees`.`id`
LEFT OUTER JOIN `hg_veg` ON `hg_liveitems`.`produce_id` = `hg_veg`.`id`
WHERE `hg_liveitems`.`grower_id` = '2' 
AND `hg_liveitems`.`status` < '2' 
```

# jquery - 如何获取 jquery 选择了哪个收音机和哪个选项标签

> ID：10491464
> 
> 赞同：-2
> 
> 时间：2012-05-08T01:47:31.363
> 
> 标签：jquery, html

我有这样的html

```
 <input type="radio" name="Gander" value="M" id="Male" />Male
  <input type="radio" name="Gander" value="F" id="Female" /> FeMale

 <select name="DropDownList1" id="DropDownList1">
    <option value="1">PHP</option>
    <option value="2">ASP.NET</option>
    <option value="3">C SHARP</option>
    <option value="4">SQL SERVER</option>
    <option value="5">WCF</option>
</select> 
```

我想使用 jquery 来知道选择了什么单选按钮以及在 dropdownlist1 中选择了什么选项标签并将值存储在变量中

```
//"the value attribute of radio button user selected"

var Gander = ?? 
```

和

```
 //"the value attr of option that user selected"

var CourseID = ?? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:50:43.507

```
var Gander = $('input:radio[name=Gander]:checked').val();

var CourseID = $('#DropDownList1').val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T01:55:40.320

```
var Gander = $('input[type="radio"]:checked'),
    CourseID = $("#DropDownList1").val(); 
```

[小提琴](http://jsfiddle.net/adeneo/wgXWg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T01:49:51.083

你会使用`$('input:radio:checked')`和`$('#myId:selected')`

# python - Python WSGI 和系统日志

> ID：10491467
> 
> 赞同：0
> 
> 时间：2012-05-08T01:47:53.170
> 
> 标签：python, logging, wsgi, syslog

我有一个 python 脚本可以毫无问题地进入 syslog。在同一个盒子上，我有一个通过 apache 和 WSGI 运行的 python 脚本，我无法让它登录到 syslog。日志配置几乎相同，这里是 WSGI 程序的部分。

```
formatter=logging.Formatter('%(levelname)s:%(message)s')
logger = logging.getLogger('my_log')
logger.setLevel(logging.DEBUG)
handler = logging.handlers.SysLogHandler(address='/dev/log',facility=logging.handlers.SysLogHandler.LOG_LOCAL1)
handler.setLevel(logging.DEBUG)
handler.setFormatter(formatter)
logger.addHandler(handler) 
```

logging.log(level,"%s" % (msg))

知道为什么它不能从 WSGI 工作或如何让它正常工作吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:40:38.177

Apache 用户是否有权访问“/dev/log”？

为什么不将其发送到 Apache 错误日志，然后配置 Apache 以将输出发送到 syslog？

# c# - 查找颜色的像素坐标

> ID：10491471
> 
> 赞同：1
> 
> 时间：2012-05-08T01:48:11.277
> 
> 标签：c#, image-processing, rgb, pixels, argb

我正在 Visual Studio C# 中制作一个可以检测颜色的程序，然后找到具有该颜色的像素的 x、y 坐标。我做过研究，但我能找到的只是你已经给出了坐标，它会感知颜色，但这不是我想要的，我想给出颜色，它会找到坐标。有人知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:00:49.683

您可以将图像提供给 Bitmap 对象，然后调用 getPixel(x, y) 方法来获取特定点的像素。由于 Bitmap 对象具有图像的尺寸，因此您可以遍历每个像素（YIKES！），测试与所需颜色的匹配。getPixel() 返回一个 Color 对象，您可以使用它。这是我超级快速完成的事情。pictureBox1 是我表单上的一个 PictureBox 元素。

```
Bitmap b = new Bitmap(pictureBox1.Image);
Color c = b.GetPixel(0,0); 
```

但请记住，搜索匹配像素的情况更糟 O(n)，其中 n 是图像中的像素数。对于小型和中型图片，这还不算太糟糕，但对于大型图片，您可能会注意到您的程序挂起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T17:11:19.990

你可以按照@kevin628 所说的做，但是添加一个`for`语句，所以它会像这样搜索每个像素：

```
 private void GetPixels()
    {
        Bitmap b = new Bitmap(pictureBox1.Image);

        List<Color> colorList = new List<Color>
        {

        };

        for (int y = 0; y < b.Height; y++)
        {
            for (int x = 0; x < b.Width; x++)
            {
                colorList.Add(b.GetPixel(x, y));
            }
        }
    } 
```

然后使用[这个图像](http://i.imgur.com/iyR3F.png)，你会得到这样的东西（不是整个这个，因为它是 ~50000 行）：

> 颜色 [A=255, R=247, G=240, B=136]
> 颜色 [A=255, R=252, G=247, B=155]
> 颜色 [A=255, R=242, G=238, B=164]
> 颜色 [A=255, R=79, G=124, B=103]
> 颜色 [A=255, R=79, G=124, B=103]
> 颜色 [A=255, R=0, G=42, B=17]
> 颜色[A=255, R=16, G=104, B=90]
> 颜色[A=255, R=15, G=114, B=109]
> 颜色[A=255, R=33, G=125, B=124]
> 颜色[A=255, R=11, G=83, B=80]
> 颜色[A=255, R=36, G=72, B=68]
> 颜色[ A=255, R=151, G=156, B=150]
> 颜色[A=255, R=90, G=70, B=59]
> 颜色[A=255, R=147, G=109, B= 88]
> 颜色 [A=255, R=252, G=204, B=164]
> 颜色 [A=255, R=220, G=175, B=134] 颜色 [A=255, R=126, G= 104，乙=91]
> 颜色 [A=255, R=219, G= 187，乙=162]
> 
> 颜色 [A=255, R=108, G=94, B=93]
> 颜色 [A=255, R=241, G=235, B=239]
> 颜色[A=255, R=139, G=137, B=142]
> 颜色[A=255, R=83, G=92, B=101]
> 颜色[A=255, R=146, G=172, B=187]
> 颜色[A=255, R=17, G=62, B=85]
> 颜色[A=255, R=40, G=106, B=138]
> 颜色[A=255, R=33, G=116, B=146]
> 颜色[A=255, R=5, G=96, B=117]
> 颜色[A=255, R=0, G=79, B=84]
> 颜色[ A=255, R=6, G=94, B=80]
> 颜色 [A=255, R=27, G=114, B=98]
> 颜色 [A=255, R=40, G=130, B= 131]
> 颜色[A=255, R=19, G=116, B=125]
> 颜色[A=255, R=21, G=128, B=134]
> 颜色[A=255, R=5, G= 119，乙=120]
> 颜色 [A=255, R=8, G=120, B=121]
> 颜色 [A=255, R=11, G=107, B=105]
> 颜色 [A=255, R=46, G=113, B=106]
> 颜色 [A=255, R=21, G=70, B=49]
> 颜色 [A=255, R=45, G=123, B=99]

然后要测试颜色，只需执行以下操作：

```
for (int i = 0; i < colorList.Count; i++)
{
    Color c = Color.Black;

    if (c == colorList[i])
    {
        //do something
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T01:56:45.473

1）将您的纹理加载为字节数组。例如，如果您的纹理是 2x2 大小，它应该看起来像： 000111222333 其中： 000 - RGB 在 (0,0) 111 - RGB 在 (1,0) 222 - RGB 在 (0,1) 333 - RGB 在(1,1) 000 或 111 表示它有 3 个字节，其中每个字节是红色、绿色或蓝色。完成后，您可以遍历所有 x 和 y，并检查当前位置的颜色是否与您搜索的颜色匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:15:30.170

你可以使用你已经找到的方法。检查每个坐标处的每个像素以找到与用户输入的颜色相同的颜色。从 0、0 开始。然后递增 X 值，直到它位于像素行的末尾。每次 X 值位于行尾时，增加 Y 值并将 X 重置为 0。一旦获得与用户输入的颜色值相等的颜色值，则最后使用的 X 和 Y 坐标在找到匹配项之前将返回给用户的内容。

# mysql - MySQL根据一行的唯一性选择DISTINCT多列？

> ID：10491474
> 
> 赞同：8
> 
> 时间：2012-05-08T01:48:28.800
> 
> 标签：mysql

我试图了解此查询的确切作用：

```
SELECT DISTINCT `state`, `state_name` FROM `geo` ORDER BY `state_name` ASC 
```

我要做的就是选择 2 列（state 和 state_name），我只想要 state 字段没有重复值的唯一行。我不在乎 state_name 字段中是否有重复值。

我的查询是检查两列的唯一性还是仅检查状态？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T01:54:17.067

DISTINCT 将仅返回不同的行，因此：

> 我的查询是检查两列的唯一性还是仅检查状态？

两列

您也可以改用 GROUP BY。

```
SELECT `state`, `state_name` FROM `geo` group by 'state', 'state_name' ORDER BY `state_name` ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:51:55.950

它正在检查 state 和 state_name 的唯一组合。Distinct 对您的选择列表中包含的所有列进行操作。

要仅包含唯一的状态值，只需选择不同的状态

# sql - DataAdaptor.Fill 错误

> ID：10491477
> 
> 赞同：0
> 
> 时间：2012-05-08T01:48:51.790
> 
> 标签：sql, vb.net, syntax-error, dataadapter

[**我从HERE**](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingnavigator.bindingsource.aspx)复制了一些代码，但出现错误：“')' 附近的语法不正确。但我看不出这段代码有什么问题

```
Dim conString As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\users.mdf;Integrated Security=True;User Instance=True"
        Dim con As New SqlConnection(conString)
        con.Open()
        Try
            Dim dataAdapter1 As New SqlDataAdapter( _
                New SqlCommand("SELECT subject, info, username, status FROM(problems) WHERE (username =" & userName & ")", con))
            Dim ds As New DataSet("DataSetMyProbs")
            ds.Tables.Add("UserProbs")
            dataAdapter1.Fill(ds.Tables("UserProbs")) '//This is where i get the error'
            Me.bsMyProblems.DataSource = ds.Tables("UserProbs")
            Dim dataAdapter2 As New SqlDataAdapter( _
                New SqlCommand("SELECT dep, pcid, username, status, extraInfo FROM(deployments) WHERE (username = " & userName & ")", con))
            ds.Tables.Add("UsersDepl")
            dataAdapter2.Fill(ds.Tables("UserDepl"))
            Me.bsMyDepl.DataSource = ds.Tables("UserDepl")
        Catch ex As Exception
            MessageBox.Show(ex.ToString)
        Finally
            con.Dispose()
        End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:53:33.090

我假设可能由于您的查询，您的参数 userName 是字符串吗？您可能需要为字符串加上单引号，还要在“FROM”和表名之间留一个空格

```
Dim dataAdapter1 As New SqlDataAdapter( _
            New SqlCommand("SELECT subject, info, username, status FROM [problems] WHERE (username ='" & userName & "')", con)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:53:18.597

问题出在您的 SQL 语句中

它应该是：

```
SELECT subject, info, username, status FROM [problems] .... 
```

# ruby-on-rails - 在 Rails 中使用哈希数组进行分页？

> ID：10491478
> 
> 赞同：1
> 
> 时间：2012-05-08T01:49:24.260
> 
> 标签：ruby-on-rails, ruby, pagination, redis

在我的 Ruby on Rails 应用程序中，我有一个从 Redis 检索到的简单哈希数组。这些是我想在视图中分页的项目列表。它们不是基于 ActiveRecord 或基于任何数据库 ORM 包装器的。他们只是这样检索：

```
@items = $redis.lrange("items-#{params[:id]}", 0, -1) 
```

在这一点上，我想做一些简单的事情，比如每页列出 10 个项目，并允许用户对它们进行分页。

是否有适用于直阵列的插件/工具？似乎大多数东西都集中在 ActiveRecord 上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T02:23:49.793

如果您使用 Kaminari gem，您可以向数组添加分页。

```
items = $redis.lrange("items-#{params[:id]}", 0, -1)
@items = Kaminari.paginate_array(items).page(params[:page]).per(10) 
```

然后在您看来，它就像

```
@items.each do |item|
   ...
end
paginate @items 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T01:57:13.147

您将在这里使用 will_paginate gem 和一个简单的演示[http://gerardogc2378.blogspot.mx/2011/10/paginando-objetos-con-willpaginate.html](http://gerardogc2378.blogspot.mx/2011/10/paginando-objetos-con-willpaginate.html)

# ios - 一个 UIViewController 中的多个 UIView

> ID：10491481
> 
> 赞同：0
> 
> 时间：2012-05-08T01:49:36.337
> 
> 标签：ios

我正在开发一个 iPad 应用程序。有一个 UIViewController 应该显示所有相关信息。在这个 VC 内部有 2 个 UIView：屏幕前半部分的第一个 UIView 显示一个图像和一些文本。屏幕下半部分的第二个视图应显示一些内容，例如地图或图片库，具体取决于在屏幕中央按下的按钮。

我的第一次尝试是加载例如 GalleyViewController，然后获取他的视图并将其作为子视图添加到我的 BottonView，如下所示：

```
-(void)galleryButtonPressedInCenter{
    GalleryViewController * gal = [[GalleryViewController alloc] initWithNibName:@"GalleryViewController" bundle:nil];
    [gal.view setFrame:CGRectMake(0,0,620,300)];
    [self.bottomView addSubview: gal.view]; 
```

但是，如果我用手指触摸视图，这会使我的应用程序崩溃。

显示我想要实现的目标：在最后一个屏幕截图（[http://itunes.apple.com/de/app/ebookers-hotels-furs-ipad/id465464927?mt=8](http://itunes.apple.com/de/app/ebookers-hotels-furs-ipad/id465464927?mt=8)）上，您可以看到在这个应用程序中有上部的 ImageView 和其他一些东西，下部有多个视图，根据按下的按钮切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:29:27.877

制作一个空的全屏视图。然后将您的子视图添加到该视图。

```
 ViewController
      -UIView  (your new umbrella view)
          -UIView  (subView 1)
          -UIView (subview 2) 
```

我认为我没有在帮助文件中看到它，但我发现每个“ViewController”只能直接附加一个 UIView。不过，我对此有点陌生，无论如何都要尝试:)

# c++ - _getch 不将输入读入变量

> ID：10491483
> 
> 赞同：0
> 
> 时间：2012-05-08T01:49:52.093
> 
> 标签：c++, getch

我在使用 _getch() 函数时遇到问题，我想要它以便用户在从菜单中选择内容时不需要按 ENTER。但是，当我尝试使用它时，它要么不会将数据输入到变量中，要么会跳过我拥有的开关。我正在使用 Windows 7 和 CodeBlocks IDE。我做错了什么？提前致谢。

```
#include <iostream>
#include <sstream>
#include <conio.h>

using namespace std;

stringstream ss;
int a;

void play()
{
  cout << "\nYou wake up on the forest floor. You do not remember where you are, who you are, or anything\nthat has happened before you waking up. You seem to be some type of...\n";
  cout << "--CHARACTER SELECTION--\n1\. Warrior\n2\. Mage\n3\. Rouge";
  cin.get();
};

int main()
{
//  CreateDirectory()
  cout << "--SELECTION MENU--\n1\. Begin\n2\. Delete Game\n3\. Instructions" << endl;
  a=_getch();

  switch(a){

  case 1:
  play();
  break;

  case 2:
 // delete();
  break;

  case 3:
 // help();
  break;
  return 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:51:42.763

将您的 char 与字符进行比较，`'1'`而`'2'`不是`'3'`整数`1`和.`2``3`

```
switch(a){

  case '1':
  play();
  break;

  case '2':
 // delete();
  break;

  case '3':
 // help();
  break;
  return 0;
} 
```

# iphone - 配置文件问题，我无法在设备上运行我的应用程序

> ID：10491484
> 
> 赞同：0
> 
> 时间：2012-05-08T01:49:53.240
> 
> 标签：iphone, ios, xcode, ios-simulator, provisioning-profile

当我尝试在我的设备上运行时收到此消息：

> 找不到与应用程序标识符“我的应用程序包”匹配的有效配置文件

我可以毫无问题地在 iPhone 模拟器上运行该应用程序。

之前能连接到设备，不知道怎么回事……

我已经删除了所有内容并再次尝试，即使在门户上创建了一个新的 App ID，但它也不起作用。

我只是不知道如何在我的设备上运行该应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:01:52.850

> 找不到与应用程序**标识符“我的应用程序包”**匹配的有效配置文件

请确保标识符与您在开发者门户上为配置文件创建的 App ID 一致。

例如，如果您创建了 App ID **“A1B2C3D4E5.com.yourdomain.*”**并将其分配给您的配置文件，则您的应用必须具有像**“com.yourdomain.someapp”**这样的捆绑标识符，以便可以正确签名。

另外我认为标识符中不允许使用空格字符。请参阅[信息属性列表键参考](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-102070)：

> 捆绑包 ID 字符串必须是统一类型标识符 (UTI)，仅包含字母数字 (AZ,az,0-9)、连字符 (-) 和句点 (.) 字符。

您可以参考：

*   [iOS 团队管理指南中的“创建和配置应用程序 ID”](http://developer.apple.com/library/ios/#DOCUMENTATION/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandConfiguringAppIDs/CreatingandConfiguringAppIDs.html#//apple_ref/doc/uid/TP40011159-CH18-SW1)。
*   [捆绑标识符和配置文件](https://stackoverflow.com/q/5313537/1241690)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:58:02.697

在模拟器上运行应用程序不需要代码签名，因此不需要配置文件。由于它之前工作并且您已尝试删除并重新安装所有内容，请查看您的代码签名证书是否已被吊销或过期。

# php - 已安装 PHP - 代码在浏览器中不起作用

> ID：10491486
> 
> 赞同：0
> 
> 时间：2012-05-08T01:50:10.487
> 
> 标签：php, apache, wamp

我已经安装了 PHP，但它在 Apache Webserver 中不起作用。

遵循的步骤

1.  安装 Apache 并测试了一个示例 html 文件，它运行良好。
2.  安装 PHP 并在 apache 中配置。
3.  在 httd 文件夹下创建了一个新的 php 文件并尝试通过浏览器运行，但它只打开了代码。

PHP代码：

```
<?php
    phpinfo();
?> 
```

有很多安装 WAMP 服务器的建议。我的下一步就是这样，但我只想修复它。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:18:13.477

推荐使用 XAMPP [http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)

如果您在 Windows 上运行 SKYPE，请确保您退出，因为它们共享相同的端口 80 或任何其他可能执行相同操作的程序

# matlab - 计算 Voronoi 单元面积

> ID：10491487
> 
> 赞同：4
> 
> 时间：2012-05-08T01:50:27.773
> 
> 标签：matlab, graph, graph-algorithm, voronoi

我正在尝试计算 matlab 中每个 Voronoi 单元的面积，但我被卡住了。我在网上找到了这段代码：

```
[v , c] = voronoin(sdata);
for i = 1 : size(c ,1)
  ind = c{i}';
  tess_area(i,1) = polyarea( v(ind,1) , v(ind,2) );
end 
```

此代码不起作用，因为 v 中的点之一是 [Inf,Inf]。这是无穷大的一点。我怎样才能绕过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T05:20:30.913

根据“voronoin”文档中的示例，v 的第一个点将始终为 [Inf, Inf]。这是一个报价：

> V 的第一行是一个无穷远点。如果元胞数组的一个元胞中的任何索引为 1，则相应的 Voronoi 元胞包含 V 中的第一个点，即无穷远点。这意味着 Voronoi 单元是无界的。

如果您想在顶点 v 上使用“polyarea”而不获得 NaN，那么我天真的答案是在将 v 的第一行输入到“polyarea”之前将​​其切掉：

```
 sdata = [ 0.5    0
      0      0.5
     -0.5   -0.5
     -0.2   -0.1
     -0.1    0.1
      0.1   -0.1
      0.1    0.1 ]
[v , c] = voronoin(sdata);
for i = 1 : size(c ,1)
  ind = c{i}';
  tess_area(i,1) = polyarea( v(2:end,1), v(2:end,2))
end 
```

但是，如果这不是您所说的“不工作”，那么也许您可以详细说明您期望看到的内容？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T15:53:53.837

这可以避免 NaN 的事情：

```
 [ v, c] = voronoin ( sdata );
       tess_area=zeros(size(c,1),1);

       for i = 1 : size(c ,1)
          ind = c{i}';
         if ind~=1
          tess_area(i,1) = polyarea( v(ind,1) , v(ind,2) );
         end
       end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T21:03:50.203

您需要定义您感兴趣的空间的边界。例如，如果您在 voronoi 细胞周围绘制一个正方形，根据您的正方形的大小，细胞将具有不同的区域。

Voronoi 分区本身不能设置单元的外部边界。

如果Matlab有多边形相交功能，那么应该很容易做到。一些相关的线程可能是：

[多边形的交集和并集](https://stackoverflow.com/questions/7915734/intersection-and-union-of-polygons)

[计算图像和多边形之间重叠的简单方法是什么？](https://stackoverflow.com/questions/12222328/what-is-an-simple-way-to-compute-the-overlap-between-an-image-and-a-polygon)

如果 Matlab 没有这个，你可以手动计算 voronoi 线和多边形边界线之间的交点，然后根据它计算一个新的多边形，然后从中计算面积。

# sqlite - 仅带有跳过（偏移）的 SQLite（不限制）

> ID：10491492
> 
> 赞同：30
> 
> 时间：2012-05-08T01:50:56.163
> 
> 标签：sqlite, offset

我正在尝试查询只有偏移量且没有限制的 sql lite 数据库。

```
SELECT [Id], [Name], [IntValue], [IntNulableValue] FROM [Product] OFFSET 10 
```

但是，当我有限制（LIMIT 10 OFFSET 10）时，我可以进行偏移查询。

这是 sql lite 给我的错误。

```
SQLite error near "10": syntax error 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-10-30T07:42:26.473

只需将 LIMIT 设置为 -1。

例如：

```
SELECT * FROM table LIMIT -1 OFFSET 10 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-08T01:57:50.680

在 SQLite 页面理解的 SQL 上，您会注意到没有 LIMIT 就无法理解 OFFSET。

[http://sqlite.org/lang_select.html](http://sqlite.org/lang_select.html)

根据相同的文档：

> 如果 LIMIT 表达式的计算结果为负值，则返回的行数没有上限。

# javascript - 使用 XMLHttpRequest 加载 Google Charts 示例会使页面变白

> ID：10491494
> 
> 赞同：0
> 
> 时间：2012-05-08T01:51:23.773
> 
> 标签：javascript, ajax, xmlhttprequest, google-visualization

我们有一个使用 XMLHttpRequests 的页面，并试图根本不重新加载页面。用户登录后，它应该加载一个图表。这是主页：[http](http://pastebin.com/h55Vzuvy) ://pastebin.com/h55Vzuvy 这是我们正在加载的图表： http: [//pastebin.com/zDZr3bb6](http://pastebin.com/zDZr3bb6)

我意识到调用该函数以加载 chart.php 的代码没有显示在这里，但它工作正常，只是在主页的标题中调用 xmlhttpGet 函数。

加载的页面确实评估了 Javascript，因为我可以发出警报并且它会弹出，但图表根本不会加载。任何想法为什么？

此外，当我单击加载图表文件时，Chrome JS 调试器会这样说。我进行了三次检查以确保将 div 名称传递给变量，并且该错误仅在加载图表页面时发生。

```
Uncaught TypeError: Cannot set property 'innerHTML' of null
sethtml
callBackFunction
xmlHttpReq.onreadystatechange 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:14:03.690

乍一看还不错，但这一行：

```
document.getElementById(div).innerHTML=content; 
```

看起来这是你遇到问题的地方。很可能'div'（此时应该是'auth_status'的id）设置不正确，或者DOM被修改并破坏了auth_status div。

我建议使用以下方法进行测试：

```
console.log("id: " + div); 
```

在那之前的那一行（所以，第 66 行）。如果这显示“auth_status”作为您所期望的 ID，那么我会尝试在 firebug/chrome js 控制台中输入：

```
document.getElementById(div) 
```

以确保它仍在 DOM 中。祝你好运！

# android - 如果 showPopup 仅适用于 API 11，如何使用 ABS 将菜单链接到视图？

> ID：10491495
> 
> 赞同：2
> 
> 时间：2012-05-08T01:51:40.740
> 
> 标签：android, actionbarsherlock

> 注意：PopupMenu 适用于 API 级别 11 及更高级别。

[http://developer.android.com/guide/topics/ui/menus.html#PopupMenu](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)

考虑到这一点，如何使用 ABS 和兼容性库将菜单链接到屏幕上的视图？我的一个布局上有一个菜单图像视图，我想提供一个通用菜单选项。基本上通过弹出菜单的图像视图，无论设备或android版本如何，都在使用相同的系统。但是，如果弹出窗口仅存在于 Gingerbread 及更高版本上，是否有另一种方法可以链接 ImageView（+ 单击侦听器）以打开我的菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:33:48.573

以下是我最终解决此问题的方法：

```
 ImageView menuImg = (ImageView) activity.findViewById(R.id.menuImageView);
    menuImg.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            activity.openOptionsMenu(); //This is the key method!
        }
    }); 
```

* * *

```
public boolean onCreateOptionsMenu(Menu menu) {
    com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;    
} 
```

* * *

```
public boolean onMenuItemClick(MenuItem item) {
     switch (item.getItemId()) {
        case R.id.demographics:

            return true;
        case R.id.settings:
            Log.v("v", "settings clicked");
            return true;
        default:
            return false;
     }
} 
```

# jquery - 从 jquery 访问启用 ssl 的 wcf 休息服务的限制

> ID：10491498
> 
> 赞同：0
> 
> 时间：2012-05-08T01:51:49.533
> 
> 标签：jquery, rest

我有一个 wcf 休息服务。我想知道使用 $.ajax 函数从 jquery 访问服务所涉及的约束是什么，或者更确切地说是管道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:00:14.533

如果您从非 SSL 客户端使用 SSL 服务，那么用户可能会遇到浏览器安全问题，因为这会成为跨域安全问题。如果你搜索跨域ajax请求，网上有很多资源。[在 http 页面上使用 https 的 Ajax](https://stackoverflow.com/questions/1105934/ajax-http-https-problem)就是这样一种资源，它提供了一些解决该问题的建议方法。

如果您从同样在同一个 SSL 域下运行的客户端使用 SSL WCF 休息服务，则不应该有任何独特的东西可以让它工作。

# c# - Kinect 语音识别不工作

> ID：10491500
> 
> 赞同：-1
> 
> 时间：2012-05-08T01:51:56.487
> 
> 标签：c#, sdk, speech-recognition, kinect

我有一个程序，当用户说`"Start"`or`"Stop"`时，程序会在屏幕上显示一个骨架。[我使用与Shape Game](http://www.youtube.com/watch?v=k7c8ZY1YaG8)相同的代码，它在那里工作得很好，但在我的代码上却不行。我不知道代码的哪一部分不起作用，因为这是我第一次进行语音识别编程。感谢您的帮助（对不起，如果我的代码很乱）

### 识别语音

```
public class SpeechRecognizer : IDisposable
{
    private KinectAudioSource kinectAudioSource;
    private struct WhatSaid
    {
        public Verbs Verb;
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            this.Stop();

            if (this.sre != null)
            {
                // NOTE: The SpeechRecognitionEngine can take a long time to dispose
                // so we will dispose it on a background thread
                ThreadPool.QueueUserWorkItem(
                    delegate(object state)
                    {
                        IDisposable toDispose = state as IDisposable;
                        if (toDispose != null)
                        {
                            toDispose.Dispose();
                        }
                    },
                        this.sre);
                this.sre = null;
            }

            this.isDisposed = true;
        }
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    public EchoCancellationMode EchoCancellationMode
    {
        get
        {
            this.CheckDisposed();

            return this.kinectAudioSource.EchoCancellationMode;
        }

        set
        {
            this.CheckDisposed();

            this.kinectAudioSource.EchoCancellationMode = value;
        }
    }

    public static SpeechRecognizer Create()
    {
        SpeechRecognizer recognizer = null;

        try
        {
            recognizer = new SpeechRecognizer();
        }
        catch (Exception)
        {
            // speech prereq isn't installed. a null recognizer will be handled properly by the app.
        }

        return recognizer;
    }

    private void CheckDisposed()
    {
        if (this.isDisposed)
        {
            throw new ObjectDisposedException("SpeechRecognizer");
        }
    }

    public void Stop()
    {
        this.CheckDisposed();

        if (this.sre != null)
        {
            this.kinectAudioSource.Stop();
            this.sre.RecognizeAsyncCancel();
            this.sre.RecognizeAsyncStop();

            this.sre.SpeechRecognized -= this.SreSpeechRecognized;
            this.sre.SpeechHypothesized -= this.SreSpeechHypothesized;
            this.sre.SpeechRecognitionRejected -= this.SreSpeechRecognitionRejected;
        }
    }

    public void Start(KinectAudioSource kinectSource)
    {
        this.CheckDisposed();

        this.kinectAudioSource = kinectSource;
        this.kinectAudioSource.AutomaticGainControlEnabled = false;
        this.kinectAudioSource.BeamAngleMode = BeamAngleMode.Adaptive;
        var kinectStream = this.kinectAudioSource.Start();
        this.sre.SetInputToAudioStream(
            kinectStream, new SpeechAudioFormatInfo(EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));
        this.sre.RecognizeAsync(RecognizeMode.Multiple);
    }

    public enum Verbs
    {
        None = 0,
        Start,
        Stop,
        Resume,
        Pause
    }
    private bool isDisposed;
    private readonly Dictionary<string, WhatSaid> speechCommands = new Dictionary<string, WhatSaid>
    {
        { "Start", new WhatSaid { Verb = Verbs.Start } },
        { "Stop", new WhatSaid { Verb = Verbs.Stop } },
        { "Resume", new WhatSaid { Verb = Verbs.Resume } },
        { "Pause", new WhatSaid { Verb = Verbs.Pause } },
    };
    private SpeechRecognitionEngine sre;

    private static RecognizerInfo GetKinectRecognizer()
    {
        Func<RecognizerInfo, bool> matchingFunc = r =>
        {
            string value;
            r.AdditionalInfo.TryGetValue("Kinect", out value);
            return "True".Equals(value, StringComparison.InvariantCultureIgnoreCase) && "en-US".Equals(r.Culture.Name, StringComparison.InvariantCultureIgnoreCase);
        };
        return SpeechRecognitionEngine.InstalledRecognizers().Where(matchingFunc).FirstOrDefault();
    }

    private SpeechRecognizer()
    {
        RecognizerInfo ri = GetKinectRecognizer();
        this.sre = new SpeechRecognitionEngine(ri);
        this.LoadGrammar(this.sre);
    }

    private void LoadGrammar(SpeechRecognitionEngine speechRecognitionEngine)
    {
        // Build a simple grammar of shapes, colors, and some simple program control
        var single = new Choices();
        foreach (var phrase in this.speechCommands)
        {
            single.Add(phrase.Key);
        }

        var objectChoices = new Choices();
        objectChoices.Add(single);

        var actionGrammar = new GrammarBuilder();
        actionGrammar.AppendWildcard();
        actionGrammar.Append(objectChoices);

        var allChoices = new Choices();
        allChoices.Add(actionGrammar);
        allChoices.Add(single);

        // This is needed to ensure that it will work on machines with any culture, not just en-us.
        var gb = new GrammarBuilder { Culture = speechRecognitionEngine.RecognizerInfo.Culture };
        gb.Append(allChoices);

        var g = new Grammar(gb);
        speechRecognitionEngine.LoadGrammar(g);
        speechRecognitionEngine.SpeechRecognized += this.SreSpeechRecognized;
        speechRecognitionEngine.SpeechHypothesized += this.SreSpeechHypothesized;
        speechRecognitionEngine.SpeechRecognitionRejected += this.SreSpeechRecognitionRejected;
    }

    private void SreSpeechRecognitionRejected(object sender, SpeechRecognitionRejectedEventArgs e)
    {
        var said = new SaidSomethingEventArgs { Verb = Verbs.None, Matched = "?" };

        this.SetLabel("Word not Recognized.... Try 'Start', 'Stop', 'Pause' or 'Resume'");

        if (this.SaidSomething != null)
        {
            this.SaidSomething(new object(), said);
        }
    }

    private void SreSpeechHypothesized(object sender, SpeechHypothesizedEventArgs e)
    {
        this.SetLabel("I think you said: " + e.Result.Text);
    }

    public event EventHandler<SaidSomethingEventArgs> SaidSomething;

    private void SreSpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {
        this.SetLabel("\rSpeech Recognized: \t" + e.Result.Text);

        if ((this.SaidSomething == null) || (e.Result.Confidence < 0.3))
        {
            return;
        }

        var said = new SaidSomethingEventArgs { Verb = 0, Phrase = e.Result.Text };

        foreach (var phrase in this.speechCommands)
        {
            if (e.Result.Text.Contains(phrase.Key) && (phrase.Value.Verb == Verbs.Pause))
            {
                //pause = true;
                break;
            }

            else if ((e.Result.Text.Contains(phrase.Key) && (phrase.Value.Verb == Verbs.Resume)))
            {
                //resume = true;
                break;
            }

            else if ((e.Result.Text.Contains(phrase.Key) && (phrase.Value.Verb == Verbs.Start)))
            {
                //start = true;
                break;
            }

            else if ((e.Result.Text.Contains(phrase.Key) && (phrase.Value.Verb == Verbs.Stop)))
            {
                //stop = true;
                break;
            }
        }

        // Look for a match in the order of the lists below, first match wins.
        List<Dictionary<string, WhatSaid>> allDicts = new List<Dictionary<string, WhatSaid>> { this.speechCommands };

        bool found = false;
        for (int i = 0; i < allDicts.Count && !found; ++i)
        {
            foreach (var phrase in allDicts[i])
            {
                if (e.Result.Text.Contains(phrase.Key))
                {
                    found = true;
                    break;
                }
            }
        }

        if (!found)
        {
            return;
        }
    }

    public class SaidSomethingEventArgs : EventArgs
    {
        public Verbs Verb { get; set; }

        public string Phrase { get; set; }

        public string Matched { get; set; }
    }

    public event Action<string> SetLabel = delegate { };
} 
```

### 在我的代码中

```
private void RecognizeSaidSomething(object sender, SpeechRecognizer.SpeechRecognizer.SaidSomethingEventArgs e)
    {
        FlyingText.FlyingText.NewFlyingText(this.skeleton.Width / 30, new Point(this.skeleton.Width / 2, this.skeleton.Height / 2), e.Matched);
        switch (e.Verb)
        {
            case SpeechRecognizer.SpeechRecognizer.Verbs.Pause:
                pause = true;
                break;
            case SpeechRecognizer.SpeechRecognizer.Verbs.Resume:
                resume = true;
                break;
            case SpeechRecognizer.SpeechRecognizer.Verbs.Start:
                start = true;
                break;
            case SpeechRecognizer.SpeechRecognizer.Verbs.Stop:
                stop = true;
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:09:31.630

看起来你从来没有`RecognizeSaidSomething()`从`SreSpeechRecognized()`. 您创建事件参数：

> var said = new SaidSomethingEventArgs { Verb = 0, Phrase = e.Result.Text };

但它似乎没有你用它做任何事情。

下面的`foreach`循环似乎没有任何用途，您测试该短语然后跳出循环。你没有在我可以看到的那个循环中设置任何变量或调用任何函数。

然后有一个`for`循环似乎做了类似于`foreach`循环的事情（只是以不同的方式）。它搜索与已识别短语的匹配项，但对找到的内容不做任何事情。它只是返回。

我想在`SreSpeechRecognized()`事件处理程序的某个地方你想调用`RecognizeSaidSomething()`并将它传递给`SaidSomethingEventArgs`.

# android - android apkinstaller 实际上是做什么的？

> ID：10491504
> 
> 赞同：1
> 
> 时间：2012-05-08T01:52:48.957
> 
> 标签：android, installation, apk

android apkinstaller 实际上是做什么的？我知道它会将 .apk 文件移动到 /data/app 目录，但是还有什么？

# macos - 无法在 AppleScript 中设置可设置的可访问性属性

> ID：10491511
> 
> 赞同：3
> 
> 时间：2012-05-08T01:53:44.853
> 
> 标签：macos, applescript, accessibility

阅读问题“<a href="https://stackoverflow.com/questions/10487350/programmatically-select-text-range-in-textedit" title="Programmatically select text range in TextEdit">Programmatically select text range in TextEdit”，我很好奇为什么不能在 AppleScript 中设置*AXSelectedTextRange属性，即使属性表明它是可设置的。*

打开一个 TextEdit 文档，键入几行，突出显示一部分并运行下面的脚本进行测试。

```
activate application "TextEdit"
tell application "System Events"
    set attr to attribute "AXSelectedTextRange" of text area 1 of scroll area 1 of window "Untitled" of application process "TextEdit"
    attr's properties -- determine if settable
    set attr's value to {1, 2}
    delay 1
    attr's value
end tell 
```

AppleScript 如何处理我缺少的可访问性属性有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T06:55:30.173

因为AppleScript 中不存在请求的类（一个包含类 NSRange [或碳中的 CRange] 的对象*的*NSValue *）**。*AppleScript 中的类*列表*等同于 Objective-C 中的*NSArray类。*

 ***另一个例子：

```
set value of attribute "AXPosition" of window 1 of application process "TextEdit" to {30, 30} 
```

什么都不做，因为该值必须是*NSPoint*。

在 AppleScript 中获取属性值时，“系统事件”会将*NSRange*、*NSpoint*、*NSSize*或*NSRect*转换为包含数字的*NSArray （AppleScript**列表*），但在您要设置值时不会将列表转换为这些类型。

*   在**[NSAccessibility 协议参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSAccessibility_Protocol/Reference/Reference.html#//apple_ref/c/data/NSAccessibilityAllowedValuesAttribute)**中： NSAccessibilitySelectedTextRangeAttribute ：选定文本的范围（NSValue）。NSValue 类可能包含这些类（NSRange、NSpoint、NSSize 或 NSRect）中的一个对象

*   在**[Carbon Accessibility Reference](http://75.137.144.72/dump/Mac/OS%20X/Developer/Documentation/ReleaseNotes/AssistiveAPI.html#AXValueType)** : kAXSelectedTextRangeAttribute : CFTypeRef : 当前选定文本的范围（开始和结束字符位置）。该属性通常是可设置的。该值是一个编码的 CFRange 结构。

因此，在 Objective-C、AppleScriptObjC 或任何其他可以使用 Cocoa 或 Carbon API 的语言（如**UI 浏览器**）中是可能的，但在 AppleScript 中则不行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T12:35:53.257

就在这里。确切的原因我不知道，但几年来许多脚本编写者问了同样的问题（来源：macscripter）。似乎即使属性 settable 设置为 true，AXSelectedTextRange 属性的值似乎也是只读的。***

# html - 为什么嵌套的弹性盒子不能包含它们的内容？

> ID：10491516
> 
> 赞同：1
> 
> 时间：2012-05-08T01:54:22.957
> 
> 标签：html, css, webkit, flexbox

早上好，

当我将一个元素嵌套`display: -webkit-box`在另一个元素中时，`display: -webkit-box`它无法将其元素正确地包含为一个灵活的盒子。请参阅下图中删除按钮后面的文本。

![在此处输入图像描述](../Images/d671fcbdaa95cffd30917aee2fa6796e.png)

李HTML：

```
<li>
    <div class="reference">
        <div class="number">1.</div>
        Lawson, B. Sharp, R. (2011). <em>Introducing Html5.</em> New Riders Pub
    </div>
    <div class="edit">
        <button class="delete">Delete</button>
    </div>
</li> 
```

LI CSS（美学省略）：

```
li {
    display: -webkit-box;
    -webkit-box-align: center; /* Vertically center elements within LI */
}
.reference {
    -webkit-box-flex: 1; /* Expand to fill space */
    display: -webkit-box;
}
.number {
    width: 3ex;
    padding: 0 5px 0 0;
}
.edit {
    /* I have tried setting a width and -webkit-box-flex: 0,
    but this does not solve the problem. */
} 
```

随着视口宽度的变化，.reference 保持灵活是至关重要的。

该问题可以通过删除 .reference's 来解决`display: -webkit-box;`，但这意味着我不能在 .reference 中的元素上使用灵活盒模型，我需要将项目编号（1.、2.等）保留在自己的列中。

非常感谢任何帮助。亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:01:33.070

您可以使用`display: table`and 来实现您想要的，而不是`-webkit-box`，您只需要一些小的标记更改：

```
<li>
    <div class="reference">
        <div class="number">1.</div>
        <div class="title">Lawson, B. Sharp, R. (2011). <em>Introducing Html5.</em> New Riders Pub</div>
    </div>
    <div class="edit">
        <button class="delete">Delete</button>
    </div>
</li> 
```

和CSS：

```
ul {
    display: table;
}

li {
    display: table-row;
}

.number {
    width: 5%;
    display: table-cell;
}

.title {
    display: table-cell;
    width: 85%;
}

.edit {
    display: table-cell;
    width: 10%;
} 
```

显然，您需要调整`width`属性，但这应该可以工作并且具有更好的跨浏览器支持。

# multithreading - mpi: MPI_INIT_THREAD 提供的支持级别

> ID：10491518
> 
> 赞同：3
> 
> 时间：2012-05-08T01:55:00.030
> 
> 标签：multithreading, mpi, openmp, cray

我在集群上使用 openmp。当我使用具有所需线程支持级别的[MPI_INIT_THREAD](http://www.open-mpi.org/doc/v1.4/man3/MPI_Init_thread.3.php#toc7)作为 MPI_THREAD_MULTIPLE 时，提供的支持级别仅为 2。我不知道是我做错了还是错过了编译器标志。在这个集群上，可以使用 mpi、openmp 等。

在我的带有 mpich2 的 ubuntu 笔记本电脑上，我确实获得了 3 级的支持，并且具有相同的代码。但是，我需要使用集群进行研究。我的程序是 C++。

你能告诉我，如果我需要改变什么。谢谢。如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T04:04:42.993

在大多数当前的 Cray 机器上，您可以通过设置环境变量来启用所需的 MPI_THREAD_MULTIPLE

```
MPICH_MAX_THREAD_SAFETY=multiple 
```

对于 Cray XT4，您必须加载一个模块才能启用它（它将替换默认的 MPI 库）；我无法再访问 XT4，所以我不记得模块的名称。

# java - Applet Web 部署问题

> ID：10491519
> 
> 赞同：0
> 
> 时间：2012-05-08T01:55:09.620
> 
> 标签：java, netbeans, netbeans-7, jclouds

所以基本上我制作了一个 Java 小程序，当我直接运行小程序文件时，它可以 100% 工作，但是当我尝试让它与 Web 服务一起运行时，它失败了。我发现通过删除任何使用外部库的东西似乎可以让它正常运行。

我正在使用 jClouds 库，这些似乎是问题所在。也许它们没有包含在用于在 Web 服务中运行小程序的 .JAR 中。有没有办法包含所有这些外部库，以便 Web 服务正常运行？

我使用 netbeans 来运行和编译我的程序，以防万一……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:39:25.327

你能澄清一下究竟什么不起作用，以及你是如何将jclouds隔离为问题的吗？也许是代码的要点或您如何构建事物+错误？

# haskell - Haskell：类型族的实例定义

> ID：10491521
> 
> 赞同：2
> 
> 时间：2012-05-08T01:55:16.280
> 
> 标签：haskell, type-families

假设我们有以下代码：

```
class C t where
  g :: t

instance C Int where
  g = 42 
```

简单的。我们还可以在 Int 上定义函数，如下所示：

```
f1 :: Int -> Int
f1 x = x * x 
```

我一直在使用类型系列，特别是因为[`Data.Has`](http://hackage.haskell.org/packages/archive/has/0.5.0.1/doc/html/Data-Has.html)使用它们，并且我想将它们插入到[`IxSet`](http://hackage.haskell.org/packages/archive/ixset/1.0.2/doc/html/Data-IxSet.html).

但在这里我将展示一个简化的例子。假设我们要定义一个`X`类似于 Int 的新类型。我们可以这样做：

```
type family X
type instance X = Int 
```

然后我们可以像这样定义函数`X`：

```
f2 :: X -> X
f2 x = x * x + 1 
```

到目前为止没有问题。现在让我们尝试定义一个实例`C X`，就像我们为`C Int`：

```
instance C X where
  g = 43 
```

哦哦，现在我们有以下错误：

> Illegal type synonym family application in instance:`X`
> 在实例声明中为`'C X'`

现在让我们尝试一些不同的东西：

```
newtype NewX = NewX X

instance C NewX where
  g = 43 
```

现在我们遇到了另一个错误，即：

> `(Num NewX)`
> 没有从字面上产生的例子`'43'`

关键字似乎也`newtype`消除了有关前一个类所属的类的任何信息。但是，我似乎也无法避免`newtype`，因为我不能在实例定义中使用类型族。

有没有更好的方法来做到这一点，而不必用额外的显式实例提及重写实例定义，否则会被推断出来？

* * *

***背景资料：***

我需要这个工作的原因如下：

```
import Data.Has
import Data.IxSet

data Col1 = Col1; type instance TypeOf Col1 = Text
data Col2 = Col2; type instance TypeOf Col2 = Text

type Row = FieldOf Col1 :&: FieldOf Col2;

instance Indexable Row where
  empty = ixSet [ixFun $ (\x -> [ Col1 ^. x ]) ] -- Maybe add some more indexes later 
```

这失败了：

> Illegal type synonym family application in instance:`Row`
> 在实例声明中为`'Indexable Row'`

制作`Row`a`newtype`会导致以下错误：

> (Contains (Labeled Col1 Text) Row) 没有因使用 `^.' 而产生的实例 可能的解决方法：为 (Contains (Labeled Col1 Text) Row) 添加一个实例声明

我可以解决这个问题的唯一方法是添加一个长推导子句，如下所示：

```
newtype Row = Row (FieldOf Col1 :&: FieldOf Col2)
  deriving 
  (
    Contains (Labelled Col1 Text), -- Add this for every column
    Contains (Labelled Col2 Text)  -- ...
  ) 
```

即使是允许我“typedef”`Contains (Labelled x (TypeOf x))`说的东西`HasCol x`也会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T02:06:28.713

以下文件在这里编译：

```
{-# LANGUAGE GeneralizedNewtypeDeriving, TypeFamilies #-}

class C a where g :: a
type family X
type instance X = Int
newtype NewX = NewX X deriving Num
instance C NewX where g = 43 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T03:37:57.890

A`newtype`就是这样做的——它定义了一个新类型，而 a`type`定义了一个同义词。如果您不喜欢一堆派生子句，则始终可以将同构与基础类型一起使用

```
instance C NewX where
   g = NewX  43 
```

类型同义词不能很好地与实例声明一起使用的原因是函数（包括类型函数）只能在一个方向上工作。您只能在构造函数上进行模式匹配，因此`newtype`允许您以零运行时成本引入新的类型构造函数。在你的问题中，为什么不

```
newtype Row = Row {runRow :: FieldOf Col1 :&: FieldOf Col2}

instance Indexable Row where
  empty = ixSet [ixFun $ (\x -> [ Col1 ^. (runRow x) ]) ] 
```

我应该指出，总的来说`GeneralizedNewtypeDeriving`是不健全的。并不意味着您应该避免使用它，但确实暗示您想要的可能是不可能的。

* * *

***编辑（提问者）：***

更好的是，甚至不需要更改数据类型 Row

```
newtype Row = Row ( FieldOf Col1 :&: FieldOf Col2 )

instance Indexable Row where
  empty = ixSet [ixFun $ (\(Row x) -> [ Col1 ^. x ]) ] 
```

# symfony - 原始内容的 Twig UTF-8 编码

> ID：10491522
> 
> 赞同：5
> 
> 时间：2012-05-08T01:55:31.977
> 
> 标签：symfony, twig

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-04T11:44:23.813

the working solution for me was to follow the twig documentation [http://twig.sensiolabs.org/doc/filters/convert_encoding.html](http://twig.sensiolabs.org/doc/filters/convert_encoding.html)

applying a filter {{ field|convert_encoding('UTF-8', ' iso-8859-1') }}

because this often happen when your sub- template is not inheriting the main one , where you had the correct meta charset defined

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:50:56.867

I'm not sure that your source data is actually UTF-8 encdoded. `var_dump()` alone isn't sufficient to verify the encoding of your content.

Try echoing/dumping the content and viewing the page with Firefox or Chrome and change the encoding to UTF-8 and then something else like ISO-8859-1\. If your content looks wrong when you have UTF-8 selected then your content is not UTF-8 encoded.

*   To change the encoding in Firefox: View > Character Encoding
*   To change the encoding in Chrome: Tools > Encoding

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:21:11.893

I had similar issue and in my case the problem was database encoding mismatch. The solution for me was to use `utf8_encode()` when first inserting the data into database.

Sample from my code:

```
// Convert file name into title of template 
$name = str_replace(array('-', '_'), ' ', basename($file, ".html"));
$name = utf8_encode($name); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T21:51:22.793

mb_detect_encoding($str) is also a method to detect encoding.

[http://php.net/mb_detect_encoding](http://php.net/mb_detect_encoding)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-28T02:34:39.230

Try this filter: `convert_encoding('UTF-8', 'ISO-8859-1')`

# java - 如何测试异步更改 Activity 视图的按钮单击的结果？

> ID：10491526
> 
> 赞同：1
> 
> 时间：2012-05-08T01:56:17.253
> 
> 标签：java, android, junit

我正在尝试为应用程序编写一些活动测试，我想测试的一个特定场景是，当我单击某个按钮时，活动视图会相应更新。但是，单击该按钮会导致一个运行时间较长的异步任务启动，并且只有在该任务完成后视图才会更改。

我该如何测试呢？我目前正在尝试使用 ActivityInstrumentationTestCase2 类来完成此操作，但无法弄清楚如何让测试“等待”直到按钮单击任务的异步部分完成并且视图更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:55:38.077

最常见和最简单的解决方案是使用`Thread.sleep()`：

```
public void testFoo() {
  TextView textView = (TextView) myActivity.findViewById(com.company.app.R.id.text);
  assertEquals("text should be empty", "", textView.getText());

  // simulate a button click, which start an AsyncTask and update TextView when done.
  final Button button = (Button) myActivity.findViewById(com.company.app.R.id.refresh);
  myActivity.runOnUiThread(new Runnable() {
    public void run() {
      button.performClick();
    }
  });

  // assume AsyncTask will be finished in 6 seconds.
  try {
    Thread.sleep(6000);
  } catch (InterruptedException e) {
    e.printStackTrace();
  }

  assertEquals("text should be refreshed", "refreshed", textView.getText());
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:26:37.707

如果您使用的是 Eclipse，则可以通过在更新视图的代码中设置断点来使用调试器。您还可以在长时间运行的任务中设置一些断点来观察并确保所有代码都在执行。

另一种方法是在长时间运行的任务和视图更新程序代码中编写一些日志或控制台输出，这样您就可以在不中断调试器线程的情况下查看进度。

作为一条建议，如果它是一个长期运行的过程，您应该向用户显示一些描述的进度条，这样他们就不会被困在那里思考“发生了什么事情吗？”。如果您使用具有最大值的进度条，您可以在长时间运行的任务中更新它，以便用户可以看到活动从 10% 变为 20% ......等等。

抱歉，如果您期待某种特定于 jUnit 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:42:51.190

我最终通过使用[Robotium](http://code.google.com/p/robotium/)库的 Solo.waitForText 方法解决了这个问题，该方法采用字符串和超时时间并阻塞，直到出现预期的文本或发生超时。很棒的 UI 测试库。

# android - Android：根据屏幕大小限制活动方向

> ID：10491531
> 
> 赞同：3
> 
> 时间：2012-05-08T01:57:03.820
> 
> 标签：android, orientation, screen-size

我有一个应用程序在大屏幕或超大屏幕尺寸的任何方向上看起来都不错，但应该仅限于手机上的纵向。我知道您可以在清单中限制 Activity 的方向，但是有没有办法有条件地这样做？或者我可以在活动本身中设置某种属性来选择支持哪些方向？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T02:57:57.443

这是我在我的应用程序中使用的解决方案：

```
public void onCreate(Bundle savedState) {
    //...

    if(isScreenLarge()) {
        // width > height, better to use Landscape
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    } else {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
}

public boolean isScreenLarge() {
    final int screenSize = getResources().getConfiguration().screenLayout
            & Configuration.SCREENLAYOUT_SIZE_MASK;
    return screenSize == Configuration.SCREENLAYOUT_SIZE_LARGE
            || screenSize == Configuration.SCREENLAYOUT_SIZE_XLARGE;
} 
```

# jpa - jpa 一对多和多对一

> ID：10491532
> 
> 赞同：-1
> 
> 时间：2012-05-08T01:57:08.620
> 
> 标签：jpa

我的模型中有 oneToMany 和 ManyToOne 映射：

类用户

```
@OneToMany (cascade = { CascadeType.REFRESH, CascadeType.DETACH }, fetch = FetchType.EAGER)
    private Set<Judgement> judgements; 
```

类判断

```
@ManyToOne(cascade = { CascadeType.REFRESH, CascadeType.DETACH})
    @JoinColumn(name = "user_id")
    private User judge; 
```

在数据库中，我必须将表作为用户和判断，当我尝试运行我的代码时，它显示错误为：

```
Caused by: org.postgresql.util.PSQLException: ERROR: relation "users_judgements" does not exist 
```

这是否意味着我必须手动创建表 users_judgements，jpa 不能自动为我创建关系？RoR 可以做到...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:00:15.250

如果您在 JUDGMENT 表中有来自 USER 表的外键 user_id，则不需要另一个表。那将是@JoinColumn(name = "user_id")。

看看你是否遗漏了什么；我看不到任何“ **mappedBy** ”属性，在您的情况下将是“用户”。

请看这篇文章；第 4 页，该链接将带您，提供有关一对多关系的详细信息。整篇文章都值得一读。

[http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa2.html?page=4](http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa2.html?page=4)

此外，同一教程的第 1 部分适用于基础知识；

[http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa1.html](http://www.javaworld.com/javaworld/jw-01-2008/jw-01-jpa1.html)

# ruby-on-rails - Rails 连接表

> ID：10491535
> 
> 赞同：2
> 
> 时间：2012-05-08T01:57:44.320
> 
> 标签：ruby-on-rails, activerecord

我有以下型号

```
User
Meeting
Participant

Particpant < User
Meeting belongs_to :user
Meeting has_many :participants 
```

我有以下连接表

```
create_table 'meetings_participants', :id => false do |t|
  t.column :meeting_id, :integer
  t.column :participant_id   , :integer
end 
```

我想添加 t.column :confirmed_at , :datetime 以便我知道用户何时以及是否确认他们正在参加会议，但我不知道最好的方法。

如何设置confirmed_at？由于这是

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:11:08.240

您的计划很好：只需`:confirmed_at :datetime`在 meeting_participants 连接表中添加一个字段即可。

您可能希望保留一个空 :confirmed_at 以表示他们被邀请参加会议但从未确认。而且没有参加？有人可以参加他们未确认出席的会议吗？

我通常将 :id 包含在连接表中，即使它并不是真正需要的。关于所有具有 id 的表有很多 rails 假设。

**添加**

您应该将 [:meeting_id, :participant_id] 上的唯一索引添加到您的联接表中。

**添加**

您当然可以在 Rails 应用程序中拥有由 ActiveRecord 模型表示的连接表。在表中包含一个 id 字段以保持 ActiveRecord 满意。例子：

```
class MeetingsParticipant < ActiveRecord::Base
  # join table. Table name: meetings_participants

  belongs_to :meeting
  belongs_to :participant

  # field confirmed_at is nil for invited participants who have
  #                    not yet confirmed attendance

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:11:09.683

为此，我认为最好仔细查看您设置的模型并进行一些重构。您想要的是与 a`user`相关的 a `meeting`。我认为获得这种关系模型的最好方法是引入另一种模型：`participant`这是与会议相关的用户。你的模型看起来像：

```
User
  has_many :participants
  has_many :meetings, through: :participants

Participant
  belongs_to :user
  belongs_to :meeting

Meeting
  has_many :participants
  has_many :users, through: :participants 
```

# python - 在 Python 正则表达式中，如何使最大换行数为 2？

> ID：10491537
> 
> 赞同：1
> 
> 时间：2012-05-08T01:58:02.583
> 
> 标签：python, regex, string

假设我有这样的文字：

```
jessica\n\n\nhello\n\n\n\nhow are you doing? 
```

如何使用正则表达式来确定**是否有超过 2 个换行符**，将其替换为最多 2 个换行符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T02:01:07.453

```
>>> import re
>>> foo = "jessica\n\n\nhello\n\n\n\nhow are you doing?"
>>> re.sub('(\n{1,2})\n*', '\g<1>', foo)
'jessica\n\nhello\n\nhow are you doing?'
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T02:54:24.277

另一个更简单，也许更容易理解的解决方案：

```
import re
foo = "jessica\n\n\nhello\n\n\n\nhow are you doing?"
re.sub('\n\n\n+', '\n\n', foo) 
```

# c# - .Net 4 Web API 在参数中接收 NULL 数据

> ID：10491542
> 
> 赞同：5
> 
> 时间：2012-05-08T01:58:37.217
> 
> 标签：c#, asp.net-web-api

我是一个 Web API 新手，在 .Net 4 中编写一个 RESTFul Web Api 服务。我已经为我正在调用的类配置了一个控制器`Authentication`。我遇到的问题是，当我将 JSON 数据发布或放入 web api 服务时，我在控制器中的处理程序被调用，但参数对象中有 NULL 数据。我可以成功获取数据，但是 Post 和 Put 提供了空参数对象。

我已经从客户端应用程序和 Fiddler 进行了测试，得到了相同的结果。这是我从 Fiddler 发送的内容：

```
Action: PUT
URI: http://127.0.0.1:81/Authentication/xyz/
HTTP Version: HTTP/1.1
Request Headers:
User-Agent: Fiddler
Host: 127.0.0.1:81
Content-Type: application/json; charset=utf-8
Content-Length: 75
Request Body:
{"hashvalue":"kbVFNeBbNHmYQXXlS6d7Ag==","password":"test","username":"dan"} 
```

当我在 Authentication 控制器的 Put 处理程序中设置断点时：

```
 public void Put(string IDstring, Authentication value)
    {

    } 
```

我在监视窗口中得到以下信息：

```
IDstring                    null    string
value   {bbsRESTResources.Authentication}   bbsRESTResources.Authentication
    hashvalue   null    string
    password    null    string
    username    null    string 
```

我的身份验证类如下所示：

```
namespace bbsRESTResources
{
    public class Authentication
    {
        public string username;
        public string password;
        public string hashvalue;
    }
} 
```

我的路线如下所示：

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

请不要担心这是否是处理身份验证的好方法。这只是端到端测试我的应用程序的第一步。我已经寻找其他人遇到此问题的示例，但没有找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:19:32.277

事实证明，模型绑定器仅适用于属性，而不适用于字段。因此，我需要从`Authentication`类的各个成员中创建属性。当我将 Authentication 类的定义更改为以下内容时，它可以工作：

```
public class Authentication
{
    public string hashvalue {get; set;}
    public string password { get; set; }
    public string username { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T04:49:03.323

我有一个类似的问题（参数对象为空），不同的原因。我已将我的模型标记为可序列化，并且由于某种原因，当我这样做时模型绑定不起作用。删除该属性后，绑定再次起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:01:56.100

并将方法定义为

```
public void Put(Authentication value)
{

} 
```

# jquery - 使用 javascript 更改 CSS 显示样式

> ID：10491543
> 
> 赞同：0
> 
> 时间：2012-05-08T01:58:53.210
> 
> 标签：jquery, css

我的 php 页面有以下 html 代码。

```
<span id="edit_button_<?php echo $row[$id]; ?>" style="display:block;" onClick="editRow(this, '');"><img src="images/edit.png" />
<span id="edit_save_<?php echo $row[$id]; ?>" style="display:none;" onClick="saveRow(this,'');"><img src="images/green_check.png" />
<span id="edit_cancel_<?php echo $row[$id]; ?>" style="display:none;" onClick="cancelEdit(this, '');"><img src="images/red_cross.png" /> 
```

在`editRow()`函数中，我添加了以下几行以使`#edit_save_`and`#edit_cancel_`元素可见：

```
$('#edit_save_'+id).show();
$('#edit_cancel_'+id).show(); 
```

但他们没有得到显示。然后我也添加了以下几行，但它也不起作用：

```
document.getElementById('edit_save_'+releaseTable+relPid).style.display = 'block';
document.getElementById('edit_cancel_'+releaseTable+relPid).style.display = 'block'; 
```

奇怪的是，问题只出在一些记录上。就像第 1 行显示 green_check 和 red_cross 图像，但第 2 行没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:11:31.873

第一行工作但后续行不工作的原因是因为您不能有多个具有相同`ID`s 的行。与 jQuery`class`选择器不同，`ID`选择器将找到第一个匹配项，并且只找到那个匹配项，在您的情况下是第一行。

此外，最好不要将 JavaScript`inline`与 HTML 一起使用。这就是人们所说的“关注点分离”或[“表示和逻辑分离”](https://stackoverflow.com/questions/3046051/separation-of-presentation-and-business-logic-in-php)或任何排列组合。最好将 Javascript 放在`<script>`与 PHP 相同的页面上的标签中，或者最好作为外部脚本。

所以代替这个内联函数调用：

```
<span onclick="editRow()"></span> 
```

你会这样做：

```
<script>
      $('span').on('click', function(){
           //call editRow(); 
           // or make other javascript which performs editRow function (toggle display)
       });           
</script> 
```

要回到您的场景并使用`ID`基于 - 的选择器来解决此问题，请为每个可点击按钮添加一个类`edit_button`，如下所示：

HTML：

```
<span class="edit_button" data-id="<?php echo $row[$id]; ?>" id="edit_button_<?php echo $row[$id]; ?>" style="display:block;" ><img src="images/edit.png" /></span>
<span id="edit_save_<?php echo $row[$id]; ?>" style="display:none;" onClick="saveRow(this,'');"><img src="images/green_check.png" /></span>
<span id="edit_cancel_<?php echo $row[$id]; ?>" class="cancel_button" data-id="<?php echo $row[$id]; ?>" style="display:none;" ><img src="images/red_cross.png" /></span> 
```

这就是 JS 的样子：

```
$('.edit_button').on('click', function(){
    var id=$(this).data('id');
    $(this).toggle();
    $('#edit_save_'+id).toggle();
    $('#edit_cancel_'+id).toggle(); 
});

$('.cancel_button').on('click', function(){
    var id=$(this).data('id');
    $(this).toggle();
    $('#edit_save_'+id).toggle();
    $('#edit_button_'+id).toggle(); 
}); 
```

请参阅这个 JSfiddle，我从中取出了 PHP。我相信它显示了您感兴趣的行为：http: [//jsfiddle.net/trpeters1/vLMCh/14/](http://jsfiddle.net/trpeters1/vLMCh/14/)

最后，请添加结束`</span>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:07:29.467

尝试将结束跨度添加到您的内容中。这可能有助于您的附加行未正确显示的原因。

```
<span id="edit_button_<?php echo $row[$id]; ?>" style="display:block;" onClick="editRow(this, '');"><img src="images/edit.png" /></span>
<span id="edit_save_<?php echo $row[$id]; ?>" style="display:none;" onClick="saveRow(this,'');"><img src="images/green_check.png" /></span>
<span id="edit_cancel_<?php echo $row[$id]; ?>" style="display:none;" onClick="cancelEdit(this, '');"><img src="images/red_cross.png" /></span> 
```

# javascript - Jquery 选择器后的 [] 括号是什么意思？

> ID：10491546
> 
> 赞同：7
> 
> 时间：2012-05-08T01:59:13.430
> 
> 标签：javascript, jquery, html5-audio

我正在使用此代码播放预加载的 mp3 文件。

```
var shuffle = $("#shuffle")[0]; 

shuffle.play(); 
```

洗牌是我的身份证。我从网上得到了代码，但我无法弄清楚 jquery 选择器之后的 [0] 是做什么的。如果我将其移除，声音不会播放。它有什么作用？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T02:08:21.240

jQuery 是一个类似数组的对象，包含所有匹配的元素。很多时候，jQuery 默认会将其更改应用到集合中的第一个元素：

```
$("li").css("display"); // display val of first element, not all elements. 
```

即使`li`可以找到许多元素，jQuery 对象还是隐含地告诉我们第一个元素。我们可以使用以下方法明确指示它这样做`$.get`：

```
$("li").get(0); // Returns first DOM element
$("li")[0]; // Also returns first DOM element 
```

我们可以检查`nodeName`以验证这一点：

```
$("li").get(0).nodeName; // LI
$("li")[0].nodeName; // LI 
```

如果我们深入了解一下，我们可以看到它`$.get()`是如何实现的：

```
get: function(num) {
  return num == null 
    ? this.toArray() 
    : ( num < 0 
          ? this[ this.length + num ] 
          : this[ num ] );
} 
```

从这里我们可以看出，当不提供参数时，整个元素集合被转换为一个数组，然后返回。例如，当提供参数时`2`，我们将元素作为索引 2 返回。如果`-2`提供，则将其添加到长度（假设长度为 5，5+(-2) 为 3）并将结果数字用作索引。

因此，关于您的特定示例：

```
var shuffle = $("#shuffle")[0];
shuffle.play(); 
```

jQuery 用于获取任何具有 id 值的元素`shuffle`。这将返回类似 jQuery 数组的对象。但是您的`play()`方法不存在于 jQuery 对象上，它存在于`#shuffle`对象上。因此，您需要获取集合中的第一个元素。

您可以使用`$.get(0)`，但是正如我们刚刚看到的，这只是增加了一步。在内部，jQuery 将执行您在上面执行的相同代码，`[0]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:02:32.130

在您问题的直接上下文中，`$("#shuffle")`是一个 id 的选择器，它返回一个`jQuery`对象（不是数组本身，但它具有类似数组的结构），然后该`[0]`部分实际上返回`DOMElement`元素的本机对象id`shuffle`而不是`jQuery`调用返回的对象`$('#shuffle')`（不带`[]`）。

基本上和做的一样`document.getElementById('shuffle')`

编辑（正如马特指出的）

然后，这将允许您`.play()`拨打电话以启动您的音频流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:01:30.447

$('#shuffle') 之后的括号获取提供的该选择器的第一个元素。

```
$('div.test')[0];

<div class="test"></div> <-- this one would get returned
<div class="test"></div>
<div class="test"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:04:04.420

它返回包含匹配元素集中第一个元素的本机 javascript 对象。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-08T06:53:07.737

它的意思是要处理的对象的时间顺序总是在数组[0]，[1]，[2]上使用......你可以检查[这里](http://www.jquery4u.com/snippets/jquery-array-search-simple/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-08T01:59:56.293

返回数组的第 n 个元素。与常规的 javascript 或 php 相同，并且有很大一部分支持数组的编程语言。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-08T02:00:35.607

JQuery 返回一个数组。[0] 获取数组中的第一项。

# spring-batch - Spring批量100万条记录——5小时

> ID：10491554
> 
> 赞同：0
> 
> 时间：2012-05-08T02:00:24.313
> 
> 标签：spring-batch

如果使用 JdbcCursorItemReader 读取表中的 100 万个 ID 并使用 FlatFileItemWriter 写入文件并且该过程需要 5 小时，这是否正常？

Spring 建议使用 JdbcCursorItemReader 来提高性能，我已经使用过了。还有什么可以做的？

我可以完全跳过行映射器，因为我正在将获取的 ID 转换为映射器中的 Map 条目 (Map)，并在编写时从 Map 中获取 ID，这似乎没用。

Spring 批处理是此类场景的理想方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:26:26.357

添加了 commitInterval 属性并将其值设置为 10,000。该过程现在在 44 分钟内完成。谢谢。

# .net - DateTime.ParseExact 不将字符串识别为有效

> ID：10491563
> 
> 赞同：1
> 
> 时间：2012-05-08T02:01:23.703
> 
> 标签：.net, parsing, datetime

我知道这个已经有很多相似之处了。但是，每次我在不同日期转换日期时都会让我感到困惑。`String was not recognized as a valid DateTime.`始终显示该消息。

我已经尝试了一些这样的代码：

```
Dim EffectiveDate As DateTime

EffectiveDate  = DateTime.ParseExact("05/08/2012", "MM/dd/yyyy", Nothing)
EffectiveDate  = DateTime.ParseExact("5/8/2012", "MM/dd/yyyy", Nothing)
EffectiveDate  = DateTime.ParseExact("1/10/2012", "MM/dd/yyyy", Nothing)
EffectiveDate  = DateTime.ParseExact("10/1/2012", "MM/dd/yyyy", Nothing)
//It resulted in got the message above

EffectiveDate  = DateTime.ParseExact("10/10/2012", "MM/dd/yyyy", Nothing)
//It has no problem 
```

代码有什么问题？？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:11:00.973

`DateTime.Parse()`在大多数情况下应该可以正常工作，除非您希望用户使用特定格式。

[http://msdn.microsoft.com/en-us/library/1k1skd40.aspx](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:04:39.337

日期参数必须采用指定的确切格式。您的格式是 MM/dd/yyyy，但您提供的日期是 2012 年 10 月 1 日。该日期有 1 位数字表示当天，您指定了 2 位数字表示当天。[请参阅此处](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:25:05.980

检查 web.config 的全球化标签应该是这样的

```
> <globalization requestEncoding="windows-1252"
> responseEncoding="windows-1252" culture="en-GB"/> 
```

默认情况下来自美国文化......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T21:27:23.427

如果您不知道是否会有一位或两位数字，请在格式字符串中使用单个字母。在你的情况下

```
"M/d/yyyy" 
```

当您`Nothing`用作格式提供程序时，`/`格式字符串中的解释取决于当前区域性的日期分隔符。

# git - git 和 CR 与 LF（但不是 CRLF）

> ID：10491564
> 
> 赞同：8
> 
> 时间：2012-05-08T02:01:27.280
> 
> 标签：git, newline, lf

这听起来像是一个多余的问题（而且很可能是一个多余的问题），但我找不到答案。情况如下：

我的应用程序正在创建以 CR 作为行尾的文本文件。更具体地说，我没有明确地将行尾设置为 CR，它恰好是我用来获取文本正文的命令的输出。当然，我可以手动将 CR 转换为 LF，但如果可以避免的话，我不想这样做。

Git 将这些文件视为一行（例如，在 diff 期间）。我已通过此测试存储库确定行尾是原因：[https ://github.com/jfletcher4d/diff-test](https://github.com/jfletcher4d/diff-test)

我实际上并不关心文件系统上的行尾是什么。这并不重要，至少现在还不重要（我最终可能会关心是否需要导入这些文件，现在它只是导出）。但是如果我可以避免的话，我**不想**在我的应用程序中将 CR 转换为 LF，出于性能原因以及肛门保持性原因 :) 即这不是如何创建文本文件的问题，而是如何创建文本文件的问题强制 repo 中的每个文本文件只有 LF。

git 是否可以配置为将**所有**行结尾更改为 LF，即使文件是用 CR 提交的？

我在 Windows 上，在学习 git 的同时交替使用 TortoiseGit 和 msysgit（还有一点 TortoiseSVN），如果这很重要的话。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T02:50:28.850

Git 似乎不支持 CR 行尾，所以我会编写一个[过滤器](http://man.github.com/git/gitattributes.html#_tt_filter_tt)来转换换行符。工作树中的文件将以 CR 行结尾，并且在被索引时将透明地转换为 LF。过滤器有两个部分：“clean”检查文件，“smudge”检查文件。

使用这个`.git/config`：

```
[filter "cr"]
    clean = tr '\\r' '\\n'
    smudge = tr '\\n' '\\r' 
```

并且`.git/info/attributes`（或者`.gitattributes`如果它应该被版本化）

```
* filter=cr 
```

请注意，这会自动让人`git-diff`高兴，因为它将使用“干净”版本。

请记住将模式设置为您需要的文件，否则二进制文件将被损坏，并且所有文本文件都将以 CR 行结尾签出。

另请注意，如果未配置过滤器，它将静默失败，因此在设置存储库的新副本时添加配置行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T23:43:08.527

FWIW，我最终在本地将行尾转换为 LF。它最终成为更简单/更少错误的解决方案。

# mysql - 关注/取消关注组或列表的数据库架构

> ID：10491566
> 
> 赞同：0
> 
> 时间：2012-05-08T02:01:50.057
> 
> 标签：mysql, database, data-structures, structure

我正在寻找的是一个追随者/追随者系统，在这个系统中，您不是简单地追随用户，而是追随他们共享的部分内容。几乎就像您在关注 Twitter 的“列表”或群组而不是人一样。不过，有了这个，您就可以关注/取消关注用户共享的所有内容，或者只是关注/取消关注您想要的列表。

**例如 #1：**我单击“全部关注”按钮来关注*用户 #1 的*列表，但取消关注有关政治的列表。现在我正在关注他们分享的所有内容，除了一个列表。我是他们的追随者。

**例如 #2：**我只关注*用户 #2 的*列表之一，而不是单击“全部关注”按钮。我应该只看到一个列表，而不是他们的所有列表。

一个简单的关注/关注系统的结构可能是一个带有`user_id => follower_id`模式的表，但这不会解释用户创建的新列表。

**问题：什么数据库模式最适合这个？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:16:51.633

为了简化它并帮助它扩展，我将其视为`list_id => follower_id`与辅助表的映射，该辅助表是`user_id => follower_id`

帮助表唯一让您知道的是，如果用户创建了一个新列表，它会告诉`list_id => follower_id`您需要创建哪些映射。它基本上只是作为追随者的设置。（例如：自动关注 X 用户的新列表）

当您向关注者显示提要时，您只能访问具有地图的表格`list_id => follower_id`。您甚至不需要查找`user_id => follower_id`映射。只有在创建新列表时才会发挥作用。

这里最大的问题是您必须处理关注者第一次说“关注所有”/“关注用户”的情况。`list_id => follower_id`在这种情况下，您将根据该用户已经存在的列表回填所有映射。（我相信这类似于 Twitter 处理他们的追随者模型的方式。如果我开始关注某人，它会回填 X 条他们的推文，如果我取消关注它会删除 X 条他们最近的推文）

然后，如果用户想要排除一个列表，您只需删除该特定列表到该关注者的映射。在这种情况下，您可以保留 的映射，`user_id => follower_id`因为我假设您希望用户创建的任何新列表都显示给关注者。

# c# - 为什么/如何使我能够在日历控件中选择多天？

> ID：10491574
> 
> 赞同：0
> 
> 时间：2012-05-08T02:02:53.657
> 
> 标签：c#, asp.net, calendar, web-controls

我正在努力解决 Calendar.SelectedDates 是只读的这一事实。我想要一种以编程方式在日历中选择多个日期的方法。我找到了以下代码片段，它完全符合我的要求，但我不明白它为什么会起作用：

```
protected void Page_Load(object sender, EventArgs e)
{
    SelectedDatesCollection dates = Calendar1.SelectedDates;
    dates.Add(new DateTime(2012, 5, 1));
    dates.Add(new DateTime(2012, 5, 5));
    dates.Add(new DateTime(2012, 5, 9));
} 
```

我所期望的（鉴于我对 C# 的了解有限），完全相反：

```
protected void Page_Load(object sender, EventArgs e)
{
    ArrayList datelist = new ArrayList();
    datelist.Add(new DateTime(2012, 5, 1));
    datelist.Add(new DateTime(2012, 5, 5));
    datelist.Add(new DateTime(2012, 5, 9));
    Calendar1.SelectedDates = new SelectedDatesCollection(datelist);
} 
```

SelectedDates 只读属性如何受本地 SelectedDatesCollection 变量影响？为什么添加到该局部变量会影响 Calendar1.SelectedDates 属性？

（这只是一个拖放式 ASP.Net 日历，没有更改/特殊属性）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:06:34.607

SelectedDatesCollection 作为属性是只读的，但您仍然可以将其更改为对象，如添加或删除项目。

更改对象（也就是通过更改数据调用它的方法）和更改对象引用本身、作为类的成员等之间是有区别的。

通过做：

```
SelectedDatesCollection dates = Calendar1.SelectedDates; 
```

您不是在复制集合，而只是保存它的引用，就像给它取另一个名字一样。

最终，您还可以这样做：

```
protected void Page_Load(object sender, EventArgs e)
{
    Calendar1.SelectedDates.Add(new DateTime(2012, 5, 1));
    Calendar1.SelectedDates.Add(new DateTime(2012, 5, 5));
    Calendar1.SelectedDates.Add(new DateTime(2012, 5, 9));
} 
```

只是有人会说另一种方式更具可读性。

`dates`并`Calendar1.SelectedDates`包含对完全相同对象的引用。调用`Add`方法`dates`就像调用它一样`Calendar1.SelectedDates`，反之亦然。

正如您所说，您尝试在第二段代码（不编译）中执行操作时无法重新分配的原因`Calendar1.SelectedDates`是 SelectedDates 被标记为只读。

将成员标记为只读仅仅意味着它只会被立即分配或在类/结构/等的构造函数中分配。

但是，这并不意味着您不能更改该对象中的数据。

**从现在开始，这只是一些额外的信息**

有一个类 ReadOnlyCollection，它不允许更改它的 ELEMENTS。

因此，例如，拥有只读 ReadOnlyCollection 将意味着您无法更改成员，也无法更改元素。

例子：

```
public class Class1
{
    public List<int> Numbers = new List<int> {1, 2, 3};
}

public class Class2
{
    public readonly List<int> Numbers = new List<int> {1, 2, 3};
}

public class Class3
{
    public ReadOnlyCollection<int> Numbers = new ReadOnlyCollection<int> {1, 2, 3};
}

public class Class3
{
    public readonly ReadOnlyCollection<int> Numbers = new ReadOnlyCollection<int> {1, 2, 3};
} 
```

差异：

```
var c1 = new Class1();
var c2 = new Class2();
var c3 = new Class3();
var c4 = new Class4();

c1.Numbers = new List<int> {4, 5, 6}; // Works
c1.Numbers.Clear(); // Works

c2.Numbers = new List<int> {4, 5, 6}; // Error
c2.Numbers = c2.Numbers; // Error - you just can't reassign it!
c2.Numbers.Clear(); // Works - you are just calling the Clear method of the existing list object.

c3.Numbers = new ReadOnlyCollection<int> {4, 5, 6}; // Works - the member is not readonly

// ReadOnlyCollection doesn't allow to change it's elements after initializing it.
// It doesn't even have these functions:
c3.Numbers.Clear(); // Error
c3.Numbers.Add(); // Error
c3.Numbers.Remove(2); // Error

c4.Numbers = new ReadOnlyCollection<int> {4, 5, 6}; // Error - the member is marked as readonly

// ReadOnlyCollection doesn't allow to change it's elements after initializing it.
// It doesn't even have these functions:
c4.Numbers.Clear(); // Error
c4.Numbers.Add(); // Error
c4.Numbers.Remove(2); // Error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:21:57.847

尝试以下方法 - 请记住，他们还需要能够取消选择日期：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (ViewState["StartDates"] == null)
        {
            startDates = new ArrayList();
        }
        else
        {
            startDates = ViewState["StartDates"] as ArrayList;
        }
    } 

    protected void StartSelection_Changed(Object sender, EventArgs e)
    {
        startCalendar.SelectedDate = new DateTime(startCalendar.SelectedDate.Year,
            startCalendar.SelectedDate.Month, startCalendar.SelectedDate.Day, 0, 0, 0);

        // c.f. http://www.mikepope.com/blog/AddComment.aspx?blogid=604
        int index = -1;
        index = startDates.IndexOf(startCalendar.SelectedDate);
        if (index >= 0)
        {  
            startDates.RemoveAt(index);
        }
        else
        {
            DateTime dateTime 
                = new DateTime(startCalendar.SelectedDate.Year,
                    startCalendar.SelectedDate.Month, 
                        startCalendar.SelectedDate.Day, 0, 0, 0);

            startDates.Add(dateTime);
        }

        ViewState["StartDates"] = startDates;
        DisplaySelectedDates();
    }

    protected void DisplaySelectedDates()
    {
        startCalendar.SelectedDates.Clear();
        for (int i = 0; i < startDates.Count; i++)
        {
            startCalendar.SelectedDates.Add((DateTime)startDates[i]);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T02:59:21.260

您的问题有一个更简洁的答案：

> SelectedDates 只读属性如何受本地 SelectedDatesCollection 变量影响？为什么添加到该局部变量会影响 Calendar1.SelectedDates 属性？

`SelectedDatesCollection`是引用类型；只读`SelectedDates`属性返回对该类型对象的*引用。*因此，局部变量也持有对该对象的*引用。*因为该对象与 CalendarControl 引用的对象相同，所以对该对象的更改会反映在 CalendarControl 中。

* * *

这种情况引发的另一个问题：

> 这会在设计课程时引起问题吗？

是的！许多开发人员被引诱到错误的安全感中，他们错误地假设，例如，通过只读属性公开列表将阻止消费者代码修改列表。这当然不是真的：*通过只读属性公开私有引用类型数据允许您的代码的用户更改对象。* 例如：

```
class Parent
{
    private readonly List<Child> _children = new List<Child>();
    public List<Child> Children { get { return _children; } }
}

class SomeOtherClass
{
    void EvilParentConsumer()
    {
        Parent a = GetSomeParent();
        Parent b = GetSomeParent();

        //Kidnap all of b's children and give them to a!!!
        a.Children.AddRange(b.Children);
        b.Children.Clear();
    }
} 
```

正如 Yorye Nathan 所说，您可以通过将私有列表公开为`ReadOnlyCollection`. 如果您的要求允许，另一种方法是将集合公开为`IEnumerable<T>`，它不公开向集合添加元素的方法。

# javascript - 在 d3.js 中，线性刻度/轴的刻度间隔为 2^(10*c) 而不是 10^c？

> ID：10491577
> 
> 赞同：3
> 
> 时间：2012-05-08T02:03:03.767
> 
> 标签：javascript, d3.js, graphing

我正在使用 d3.js 来显示有关网络流量的信息，效果非常好。在可视化中的某个点，使用 y 轴来显示字节数。

我目前正在使用 d3.svg.axis().ticks() 系统，这会产生像 20000 这样的漂亮整数。当转换为 kB/MB/等时，结果是像 19.5 和 9.8 这样的尴尬数字。有没有办法让 (2^(10*c)) 的倍数（例如 1024、1048576 等）而不是 (10^c) 的倍数返回刻度？

其他信息/想法：

*   我很欣赏 svg.axis 为我处理绘画的具体细节，并希望找到一个不会取代此功能的解决方案。
*   我愿意修改 d3 并提交拉取请求，只要它能够与 @mbostock 和公司合作。
*   我检查了存储库，重点关注[d3_scale_linearTickRange() 及其周围](https://github.com/mbostock/d3/blob/master/src/scale/linear.js "github")的代码，但没有看到一种简单的方法可以在不更改默认功能的情况下实现我的目标，而我需要其他轴。
*   [下面发布](https://stackoverflow.com/a/10499440/373225 "它燃烧！")了一种可以考虑的潜在解决方法，但它接近于不诚实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:00:59.930

您可以手动处理刻度值，如此处所述：[https ://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)

```
var xAxis = d3.svg.axis()
    .scale(x)
    .tickValues([1, 2, 3, 5, 8, 13, 21]); 
```

您可以使用 tickFormat 来帮助格式化，即修复精度和 SI 前缀。[https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format](https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:19:57.053

一种解决方法是以不正确的方式使用标签千和兆，除以 1000 而不是 1024 来获得最终结果。

```
Instead of:
20000 B / 1024 = 19.5 kB     :(

Stretch the truth with:
20000 B / 1000 = 20 kB       :) 
```

从表面上看，这似乎是不可接受的，因为它故意引入错误，但如果我能说服自己它“只有几个像素”，我可能会为了不对 d3 本身进行手术而选择它。

我确信有更好的方法。

# php - 如何将变量设置为 $_GET

> ID：10491578
> 
> 赞同：1
> 
> 时间：2012-05-08T02:03:13.830
> 
> 标签：php

我对此没有太多经验...非常感谢您的帮助。

$id = $_GET["categoryID"]; 没有设置变量。

$_GET["categoryID"] 正在返回值，但未设置变量。

我可以使用 $id=3; 设置变量 但是 $id = $_GET["categoryID"]; 不起作用。

```
<?php 
if (@$_REQUEST['ajax']) {
        $link = $nm3;
    if ($link == false)
        trigger_error('Connect failed - ' . mysql_error(), E_USER_ERROR);
    $connected = mysql_select_db('dgp', $link);

    if ($connected) {

        $id = $_GET["categoryID"];

        $results = mysql_query('select * from selectMenu where categoryID= \'' . $id . '\' AND category="' . strtolower(mysql_real_escape_string(strip_tags($_REQUEST['category']))) . '"');

        $json = array();
        while (is_resource($results) && $row = mysql_fetch_object($results)) {
            //$json[] = '{"id" : "' . $row->id . '", "label" : "' . $row->label . '"}';
            $json[] = '"' . $row->label . '"';
        }
        echo '[' . implode(',', $json) . ']';
        die(); // filthy exit, but does fine for our example.
    } else {
        user_error("Failed to select the database");
    }
}
?> 
```

* * *

好的，所以据我所知，我将所有内容都剥离了。看来问题可能与ajax请求有关。

这是使用 $_GET.... $id=$_GET["categoryID"] 的精简代码。它打印 $_GET["categoryID"] 结果和 $id。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test $_GET</title>
</head>
<body>
<?php 
        if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
        $id = $_GET["categoryID"];
        }
?>
  print_r($_GET) = <?php print_r($_GET); ?>
  <br />
  print_r($id) = <?php print_r($id); ?> 
</body>
</html> 
```

* * *

这是帖子页面示例....

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>testPOST</title>
</head>
<body>
<form action="testPOST.php" method="post">
  categoryID: <input type="text" name="categoryID" /><br />
  <input type="submit" value="Submit" />
</form>
</body>
</html> 
```

和发布结果页面...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test $_POST</title>
    </head>
    <body>
    <?php 
            if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
            $id = $_POST["categoryID"];
            }
    ?>
      print_r($_POST) = <?php print_r($_POST); ?>
      <br />
      print_r($id) = <?php print_r($id); ?> 
    </body>
    </html> 
```

它仍然没有设置 $id = $_GET["categoryID"]; 即使是在请求块之外打印它再次感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:04:54.843

在我看来，问题在于您的表单是 POST，或者您的表单未正确提交。试着回声`$_GET['categoryID']`，看看你得到了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:06:42.910

`$_GET["categoryID"]`在尝试使用它初始化 $id 之前检查以确保已设置：

```
 isset($_GET["categoryID") 
```

`$_GET["categoryID"]`如果包含一个值，将返回 true 。

# android - 编译4.4.3金鱼android内核时出现'IO_START'未声明错误

> ID：10491586
> 
> 赞同：1
> 
> 时间：2012-05-08T02:04:19.743
> 
> 标签：android, linker, linux-kernel

我应该提到我在内核中添加了熔丝支持，它在 make 时提示这样的错误：CC drivers/char/goldfish_tty.o drivers/char/goldfish_tty.c: In function 'goldfish_tty_probe': drivers/char/goldfish_tty.c :233: error: 'IO_START' undeclared (first use in this function) drivers/char/goldfish_tty.c:233: error: (每个未声明的标识符只报告一次drivers/char/goldfish_tty.c:233: error: for each它出现在函数中。） make[2]: *** [drivers/char/goldfish_tty.o] 错误 1 ​​make[1]:****[驱动程序/字符] 错误 2 制作：** * [驱动程序] 错误 2*

# oracle - 将光标的值分配给 Oracle 表单中的文本字段

> ID：10491595
> 
> 赞同：1
> 
> 时间：2012-05-08T02:05:36.157
> 
> 标签：oracle, oracleforms

我有一个返回某个值的游标。我想将此值分配给文本字段。当我编译触发器时，它返回错误：new_dr.textitem43 的“错误绑定变量”。非常感谢任何帮助。

```
declare
    EMP_ID_VALUE number :='NEW_EMP.ID_FIELD';
    pcv_no     pcv%TYPE;

cursor cursor_dr IS
  select pcv FROM drivers 
  where drivers.eno = EMP_ID_VALUE;

begin
  IF EMP_ID_VALUE < 1000 THEN

  open cursor_dr;

  fetch cursor_dr into pcv_no; 
  :new_dr.textitem43 := 'pcv_no';
  exit when cursor_dr%NOTFOUND;
  CLOSE cursor_dr;

  ELSIF
 ...
END IF; 
```

结尾;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T04:11:12.060

这将向我表明，要么没有名为 new_dr 的块，要么该块中没有名为 textitem43 的字段。你确定你不是真的意思：new_emp.textitem43？

# css - div 不使用 twitter bootstrap 调整大小

> ID：10491596
> 
> 赞同：0
> 
> 时间：2012-05-08T02:06:15.847
> 
> 标签：css, twitter-bootstrap

加载 Bootstrap 后，div 不会随里面的内容一起展开。因此，如果我插入图像或放大文本，它就会...被压入或压出 div。

[http://jsfiddle.net/thomaswtsang/SSmJt/3/](http://jsfiddle.net/thomaswtsang/SSmJt/3/)

Bootstrap 是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:45:53.597

您使用的 bootsrap css 似乎没有响应功能。

请从[自定义选项下载](http://twitter.github.com/bootstrap/download.html)[引导库](http://twitter.github.com/bootstrap/)。

您可以查看这个修改后的[示例](http://jsfiddle.net/arunpjohny/SSmJt/41/)。您还需要添加一些由引导程序定义的结构更改。您需要将`spanx`定义放在`row`元素内才能正常工作。

# linux - /sys/devices/system/node/node0/distance中的单位是什么

> ID：10491597
> 
> 赞同：1
> 
> 时间：2012-05-08T02:06:16.103
> 
> 标签：linux, sys, numa

这个问题在标题上说。有谁知道这个 sys 文件中的距离代表什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:19:04.697

这个距离是一个相对于所有其他距离的数字。

# jquery - 如何取消绑定替换默认值的focus.autocomplete

> ID：10491601
> 
> 赞同：1
> 
> 时间：2012-05-08T02:06:41.913
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

jquery自动完成，焦点功能有问题

在我输入内容后，自动完成下拉列表中的建议选项。但是当使用键盘或鼠标悬停在“下拉选项”中选择某些内容时，它会触发默认输入值的更改。

如何取消绑定此操作，我希望它保持默认 val() 直到选择该选项。

```
.autocomplete({
   options?
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:39:34.377

只需调用`preventDefault`提供给`focus`处理程序的事件：

```
$("#auto").autocomplete({
    /*...*/
    focus: function(event, ui) {
        event.preventDefault();
    }
}); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/qbETA/](http://jsfiddle.net/andrewwhitaker/qbETA/)

# rally - Rally AppSDK：有没有办法在新布局架构中促进应用程序之间的“面板间”通信

> ID：10491605
> 
> 赞同：1
> 
> 时间：2012-05-08T02:07:20.447
> 
> 标签：rally

因此，我刚刚习惯并开始拥抱 2012 年 5 月 5 日版本的 Rally 发布的新的“基于面板的”应用程序方案。起初，当我习惯了整页 iFrame 时，失去窗口空间有点令人沮丧。

然而，我很好奇——出于优化我在屏幕上为应用程序页面使用房地产的方式的愿望——我想设置和使用一个多面板应用程序，其组件可以通信。例如，我想让一个 App 面板显示一些控件小部件，也许还有一个 AppSDK 表，而第二个 App 面板显示一个图表或网格，以响应第一个面板中的事件/控件。

我一直在扫描 AppSDK 文档以获取有关如何完成此操作的提示，但我做不到。有没有办法在一个应用程序面板中连接事件侦听器以响应另一个应用程序面板中的小部件控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:51:38.140

我们还没有决定让应用程序通信的最佳方式。这是我们仍在内部寻找最佳方法的事情。

每个自定义应用程序都在一个 IFrame 中，因此弄清楚如何让它们进行通信可能有点棘手。一旦我们找到了一个好的方法，我们一定会让您知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T18:33:41.057

这个话题，“应用程序通信”，已经解决了吗？我希望有一个自定义网格显示用户故事。选择用户故事时，另一个网格显示相关任务。

# .net - 如何在 MongoDB 中使用 ContainsAll

> ID：10491610
> 
> 赞同：1
> 
> 时间：2012-05-08T02:07:58.693
> 
> 标签：.net, linq, mongodb

帮助我理解为什么声明：

```
var query =
collection.AsQueryable<C>()
.Where(c => c.A.ContainsAll(new[] { 1, 2, 3 })); 
```

导致此错误：

```
int does not contain a definition for ContainsAll and the best extension method overload MongoDB.Driver.Linq.LinqToMongo.ContainsAll<TSource>(System.Collections.Generic.IEnumerable<TSource>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:44:05.153

```
.Where(x => Query.All("Field", array).Inject()) 
```

# vb.net - Visual Basic：如何用组合框替换选定的 NumericUpDowns

> ID：10491612
> 
> 赞同：1
> 
> 时间：2012-05-08T02:08:10.430
> 
> 标签：vb.net, visual-studio-2008, replace

是否可以用 替换选定的`NumericUpDown`控件`ComboBoxes`？

我知道并非所有属性都可以保存，但我需要的唯一属性是位置和大小。我想到的工作流程如下：

1.  选择某些`NumericUpDowns`
2.  单击替换为...，然后选择`ComboBoxes`（或任何其他方法）
3.  以前的地方`NumericUpDowns`，现在`ComboBoxes`的大小一样

我想这样做的原因是我必须将一个带有多个选项卡的 GUI 放在一起。每个标签页都有一个列表，`Labels`其中一个`NumericUpDowns`或`ControlBoxes`旁边。每个选项卡的控件顺序都会发生变化。我只想复制第一个选项卡上的项目并将它们粘贴到其他选项卡上。然后每个选项卡我只需将某些更改`NumericUpDowns`为`ComboBoxes`.

我昨天开始使用 VB，所以我可能会忽略一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:28:05.023

```
Private sub Replace_By_ComboBox(ByVal nud As NumericUpDowns)

    'Create new combo box        
    Dim cbx As New ComboBox
    cbx.Left = nud.Left
    cbx.To = nud.Top
    cbx.Width = nud.Width
    cbx.Height = nud.Height
    cbx.Visible = True
    cbx.Enabled = True

    'Add the combo box 
    nud.Parent.Controls.Add(cbx)

    'Remove the NumericUpDowns
    nud.Parent.Controls.Remove(nud)

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:39:51.287

**最快的是手动操作，我们无法远程更改您的 GUI - 因为您处于入门级，并且您不太了解的语言，RAD 是最好的建议 - 这样您可以学习它的功能 - 就像学习 HTML 一样DreamWeaver 的 RAD 工具。**

既然您感兴趣，*（我知道您是 VB 的新手，所以我会说得很清楚）*您执行以下步骤：

a) 打开 Winforms VS 2008 解决方案
b) 单击文件 > 创建新项目 > WinForms
c) 双击表单，它将显示表单代码
d) 然后在构造函数方法中，您将看到该行`InitializeComponent`
e) 右键单击​​此方法调用并选择`Goto Definition`
f) 这将向您显示使用控件填充表单的代码
g) 然后对于每个表单，我建议您将 xyz.Designer.vb 文件中的所有 NumericUpDown 替换为 ComboBoxes

但是我真的建议使用 Visual Studio IDE 来做。不要害怕。

# android - 类别主页和类别启动器之间的区别

> ID：10491617
> 
> 赞同：18
> 
> 时间：2012-05-08T02:08:34.097
> 
> 标签：android, android-intent

我不清楚类别主页和类别启动器之间有什么区别。从 Android 文档页面：

> CATEGORY_HOME ：这是家庭活动，即设备启动时显示的第一个活动。
> 
> CATEGORY_LAUNCHER ：应该显示在顶级启动器中。

为了测试差异，我用这个清单做了一个简单的应用程序：

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".IntentCategoriesActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
        <activity
            android:name=".Second"
            android:label="Whatever" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.HOME" />
            </intent-filter>

        </activity>

    </application> 
```

但我看到的只是我的启动器活动而不是第二个活动。

有人可以解释我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T02:12:46.757

`android.intent.category.HOME`用于 ADW Launcher、Launcher Pro 等主屏幕活动。如果您想创建新的主屏幕，请使用此功能。

`android.intent.category.LAUNCHER`用于指定可以启动哪些活动。即哪些显示在应用程序抽屉中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-12-31T16:49:54.990

`android.intent.category.HOME`- 成为启动器 - 此活动是主屏幕 `android.intent.category.LAUNCHER`- 成为**启动**器 - 此活动在菜单中可见

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-14T02:19:55.887

在一个清单文件中，只有第一个 main 有用，第二个 android.intent.action.MAIN 没用。

# iphone - 带有正文内容的 iPhone 短信 URL 方案？

> ID：10491619
> 
> 赞同：0
> 
> 时间：2012-05-08T02:08:58.903
> 
> 标签：iphone, objective-c, xcode, sms

我希望用给定的内容预填充短信正文“smsto:555-555-5555:Hello World”

我已经完成了我的研究，每个人都说无法完成，但我的手机上现在有一个 QR 阅读器，它可以接收“sms:555-555-5555:Hello world”并使用扫描的正确电话号码预填充内容.

所以我的问题是。我该怎么做呢？很明显，提供的 URL 方案不处理正文。还有哪些其他方法可以预先填充身体？它可以通过 QuickMark Reader 清楚地完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:41:52.177

[根据Apple 文档](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/sms.html#//apple_ref/doc/uid/TP40008054-SW1)，您无法启动带有预定义消息的消息应用程序。

您可以做的是自己实现处理并解析 URL，如下所示：

```
NSURL *url = /* the url you get from the web (in webview delegate) or after QR Code scan */;

if ([url.scheme isEqualToString:@"sms"]) // is it a sms ?
{
    if([MFMessageComposeViewController canSendText]) // can I send text message ?
    {   
        NSArray *parts = [url.absoluteString componentsSeparatedByString:@":"];
        NSString *messageText = parts.count == 3 ? [parts objectAtIndex:2] : @"";
        NSString *telNumber = parts.count >= 2 ? [parts objectAtIndex:1] : @"";
        MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
        controller.body = messageText;
        controller.recipients = [NSArray arrayWithObject:telNumber];
        controller.messageComposeDelegate = self;

        [self presentViewController:controller animated:YES completion:nil];
        [controller release];
    }
} 
```

瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:34:11.783

您可以使用 SMS 的 modalViewController 来填充文本的正文。

1.  将 MessageUI 框架添加到您的项目中。
2.  将您的 viewController 设置为 MFMessageComposeDelegate
3.  创建模态视图并呈现它：

    ```
    -(void) showMessageComposerWithText:(NSString*)messageText telNumber:(NSString*)telNumber composeDelegate:(id)delegate
    {
        MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];

        if([MFMessageComposeViewController canSendText]){   
            controller.body = messageText;
            controller.recipients = [NSArray arrayWithObject:telNumber];
            controller.messageComposeDelegate = delegate;

            [delegate presentModalViewController:controller animated:YES];
        }
    } 
    ```

# magento - Magento：随机“特色产品”

> ID：10491623
> 
> 赞同：0
> 
> 时间：2012-05-08T02:09:48.607
> 
> 标签：magento

我的客户在 CMS 页面和类别登录页面上需要一个小框，它将显示与该类别相关的随机项目的缩略图/价格/简短描述（与网格视图分开）关于什么是完成此任务的最佳方法的任何想法? 谢谢，-山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:24:21.177

转到 template/catalog/product/view/ 并使用以下代码创建一个新的 phtml 文件 random_product.phtml

```
<?php
$catId = $this->getCat_id();
$cat=Mage::getModel("catalog/category")->load($catId);
$prodCollection = $cat->getProductCollection();
$pids=array();
foreach($prodCollection as $product)
{
        array_push($pids,$product->getId());
}
$randProductId=array_rand($pids);
echo $randProductId;
?> 
```

现在，如果您的类别 id 是例如 10，请制作一个静态块并将以下代码粘贴到内容中

```
{{block type="catalog/product" cat_id="10" template="catalog/product/view/random_product.phtml"}} 
```

现在，当您查看静态块时，每次刷新都会看到一个随机的产品 ID。然后，您可以在加载产品后在 phtml 文件中编写自己的自定义 html。

要从这里加载您的产品，您可以`$product = Mage::getModel('catalog/product')->load($randProductId);`调用诸如`$product->getName()`etc 之类的方法来获取您需要输出的详细信息。

# android - 如何告诉 Proguard 混淆类名

> ID：10491625
> 
> 赞同：8
> 
> 时间：2012-05-08T02:09:55.703
> 
> 标签：android, proguard

我希望 proguard 混淆类名。我在 Proguard.cfg 中有这一行

```
-keepclasseswithmembers class * {
public static <fields>;
}

-keepnames class * implements java.io.Serializable
-keep public class com.google.** 
```

我注意到没有混淆的是类名。所以运行 jdgui 我看到 com/test/abcd/ActualClass.java public class ActualClassName extends Activity 等

此外，我看到返回真实类名的方法。喜欢

```
 ActualClassname aa(); 
```

并导入语句，如

```
 import com.abcd.ActualClassName 
```

如何让 Proguard 混淆类名本身。我看到的不仅仅是活动，我的适配器没有被混淆。好吧，有混淆，但没有类名。

上面的规则是否可以防止类名被混淆？

更新：我已经删除了上面的规则，并且没有从 Android 扩展任何东西的实用程序类没有被混淆。我现在想知道是否有一些关于保留类的类名的隐含规则，这些类的类名是从像 Activity 派生类一样保留的类中引用的？名称未被混淆的类有一些共同点：

1) 静态方法 2) 导入其他类型，这些类型与从活动派生或可序列化的类型一样。3) 它们具有带有其他类参数的方法（其中一些可能需要保留）。

但是，我没有特别要求保留这些实用程序类的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:55:42.980

您的代码中出现了几个类，它们必须保留相同的完全限定类名，以便[![](../Images/dc8cb918af09925459f09f0474c9be2c.png)android](/questions/tagged/android "显示标记为“android”的问题")能够找到它们。上面的一个示例是所有`Activity`类，因为它们在清单中通过它们的全名作为字符串定义。如果[proguard](/questions/tagged/proguard "显示标记为“proguard”的问题")要重命名该类，那么 Android 将无法再找到它们。

典型的 Proguard 配置将引用 Android SDK 中的 Proguard 配置，其中包括如下几行重要的行：

```
-keep public class * extends android.app.Activity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:40:12.470

我认为您的问题来自您的第一行：'-keepclasseswithmembers' 包含类名，因此在您的情况下，任何具有静态字段的类都将保留其名称。将其更改为简单的“-keepclassmembers”将混淆类名，同时保持静态字段不变（我假设您想要这样做）。

也就是说，我不确定你为什么要这样做。如果您尝试保留静态变量名称，您是否也想保留类名称，看看您将如何访问静态字段？为什么要保留所有静态变量名称？

# sql - 使用 COUNT/Group By 时需要选择所有列

> ID：10491631
> 
> 赞同：8
> 
> 时间：2012-05-08T02:10:35.197
> 
> 标签：sql, sql-server, database, group-by

好的，所以我有一个表，其中一列有几个重复记录。

我的任务是选择具有所有属性的 REPEATING 记录。

CustID FN LN DOB 城市州

DOB 有一些重复的值，我需要从整个表中选择并列出 DOB 字段中所有相同记录的所有列。

我的尝试...

```
Select  DOB, COUNT(DOB) As 'SameDOB' from Table1

group by DOB

HAVING (COUNT(DOB) > 1) 
```

这仅返回两列和一行，第一列是多次出现的 DOB 列，第二列给出了多少。

我需要想办法列出所有属性，而不仅仅是这两个...

请指导我正确的方向。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T02:47:45.387

我认为更通用的解决方案是使用 windows 功能：

```
select *
from (select *, count(*) over (partition by dob) as NumDOB
      from table
     ) t
where numDOB > 1 
```

这更普遍的原因是因为很容易更改为跨两列或多列的重复项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T02:14:14.027

```
Select * 
FROM  Table1 T
WHERE T.DOB IN( Select   I.DOB
                FROM     Table1 I
                GROUP BY I.DOB
                HAVING   COUNT(I.DOB) > 1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T02:17:02.533

尝试加入子查询，这也将允许您查看计数

```
select t.*, a.SameDOB from Table1 t
join (
  Select  DOB, COUNT(DOB) As 'SameDOB' from Table1 
  group by DOB 
  HAVING (COUNT(DOB) > 1) 
) a on a.dob = t.dob 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-03T04:58:28.297

```
select * 
from table1, (select count(*) from table1) as cnt 
```

# c++ - Visual C++：比较日期

> ID：10491643
> 
> 赞同：0
> 
> 时间：2012-05-08T02:12:02.247
> 
> 标签：c++, visual-studio-2010, date, time

所以我试图找出 Windows 机器上的当前日期是否在硬编码日期之后。如果不使用 Boost 或 ATL，我将如何做这件事？我正在使用 Visual Studio 2010 C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:17:12.343

在 C++ 中获取当前日期的独立于平台的方法是`time(NULL)`，它返回自 1970 年 1 月 1 日以来的秒数。您可以使用[ctime](http://www.cplusplus.com/reference/clibrary/ctime/)中的其他例程将其转换为字符串，提取日/月/年/等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:21:36.647

您可以使用操作系统提供的函数[`GetSystemTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724390%28v=vs.85%29.aspx)或[`GetLocalTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724338%28v=vs.85%29.aspx)函数，它返回日期组件，或[`GetSystemTimeAsFileTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397%28v=vs.85%29.aspx)返回自 1601 年 1 月 1 日凌晨 12:00 以来经过的 100 纳秒间隔数。无需额外的支持库。

# python - django-facebook 中没有名为 registration.forms 的模块

> ID：10491645
> 
> 赞同：1
> 
> 时间：2012-05-08T02:12:31.240
> 
> 标签：python, django, facebook, authentication, django-facebook

我正在使用`django-facebook`库（[https://github.com/tschellenbach/Django-facebook](https://github.com/tschellenbach/Django-facebook)）使用 Facebook 进行身份验证。

但是，当我转到示例模板以测试注册`/facebook/connect`并尝试连接时，我得到`ImportError`：

> 没有名为registration.forms的模块

有谁知道这个错误是关于什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:26:50.617

您可能需要安装[django-registration](https://bitbucket.org/ubernostrum/django-registration/)。

# android - 将 SQL 导入 SQLite

> ID：10491646
> 
> 赞同：1
> 
> 时间：2012-05-08T02:12:35.163
> 
> 标签：android, sql, sqlite

我有一个 sql 格式的数据库，我需要制作一个 sqlite 副本才能将其添加到我正在制作的 Android 应用程序中。

到目前为止，我还没有任何对我有用的东西。我试图将 sql 导入 SQLite 数据库浏览器，但它没有正确导入，它总是给出一个错误语句。我尝试创建一个数据库然后导入表，但它崩溃了。

我尝试通过终端使用 sqlite3（如果有任何区别，我使用的是 Mac），但是 .import FILE TABLE 格式不起作用，它说：“错误：没有这样的表：TABLE”。我尝试使用“create table test42”然后“.import test.sql test42 and variables”创建一个空表，但它显示“错误：靠近“测试”：语法错误”。

我被困住了。

任何帮助都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:06:59.453

这是我的应用程序中的一些示例代码。有一个本地数据库（SQLite）和网络 SQL 数据库。

```
public class DatabaseHandler extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "android_api";

// Login table name
private static final String TABLE_LOGIN = "login";

// Login Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
public static final String KEY_EMAIL = "email";
private static final String KEY_UID = "uid";
private static final String KEY_CREATED_AT = "created_at";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
            + KEY_ID + " INTEGER PRIMARY KEY,"
            + KEY_NAME + " TEXT,"
            + KEY_EMAIL + " TEXT UNIQUE,"
            + KEY_UID + " TEXT,"
            + KEY_CREATED_AT + " TEXT" + ")";
    db.execSQL(CREATE_LOGIN_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

    // Create tables again
    onCreate(db);
}

/**
 * Storing user details in database
 * */
public void addUser(String name, String email, String uid, String created_at) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(KEY_EMAIL, email); // Email
    values.put(KEY_UID, uid); // Email
    values.put(KEY_CREATED_AT, created_at); // Created At

    // Inserting Row
    db.insert(TABLE_LOGIN, null, values);
    db.close(); // Closing database connection
}

public void addUser(String email) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_EMAIL, email); // Email

    // Inserting Row
    db.insert(TABLE_LOGIN, null, values);
    db.close(); // Closing database connection
}

public String getUser() {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    String user = values.getAsString(KEY_EMAIL);
    Log.v("DBH", user);
    db.close();
    return user;        
}

/**
 * Getting user data from database
 * */
public HashMap<String, String> getUserDetails(){
    HashMap<String,String> user = new HashMap<String,String>();
    String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    // Move to first row
    cursor.moveToFirst();
    if(cursor.getCount() > 0){
        user.put("name", cursor.getString(1));
        user.put("email", cursor.getString(2));
        user.put("uid", cursor.getString(3));
        user.put("created_at", cursor.getString(4));
    }
    cursor.close();
    db.close();
    // return user
    return user;
}

/**
 * Getting user login status
 * return true if rows are there in table
 * */
public int getRowCount() {
    String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    int rowCount = cursor.getCount();
    db.close();
    cursor.close();

    // return row count
    return rowCount;
}

public String returnRows() {
    String response = "";
    String countQuery = "SELECT * FROM " + TABLE_LOGIN;
    SQLiteDatabase db = this.getReadableDatabase();
    for (int j = 0; j < getRowCount(); j++) {
        Cursor cursor = db.rawQuery(countQuery, null);
        response += cursor.getColumnName(j);
    }
    Log.v("LT", response);
    return response;
}

/**
 * Re crate database
 * Delete all tables and create them again
 * */
public void resetTables(){
    SQLiteDatabase db = this.getWritableDatabase();
    // Delete All Rows
    db.delete(TABLE_LOGIN, null, null);
    db.close();
}

} 
```

addUser 方法从 Web 数据库中获取数据并将其存储在本地。以下是使用时围绕 addUser 方法的代码：

```
 try {
        if (json.getString(KEY_SUCCESS) != null) {
            String res = json.getString(KEY_SUCCESS);

            if(Integer.parseInt(res) == 1){
                //user successfully logged in
                // Store user details in SQLite Database
                DatabaseHandler db = new DatabaseHandler(activity.getApplicationContext());
                JSONObject json_user = json.getJSONObject("user");
                //Log.v("name", json_user.getString(KEY_NAME));
                // Clear all previous data in database
                userFunction.logoutUser(activity.getApplicationContext());
                db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), 
                        json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                responseCode = 1;
                // Close Login Screen
                //finish();

            }else{
                responseCode = 0;
                // Error in login
            }
        }

    } catch (NullPointerException e) {
        e.printStackTrace();

    }
    catch (JSONException e) {
        e.printStackTrace();
    }

    return responseCode;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:46:31.413

The file produced by phpMyAdmin probably contains SQL commands to CREATE the tables and INSERT the data. The way to run such a file in SQLite is to use the sqlite3 command interface and use the `.read` command.

Unfortunately, since the .sql file you created is targeted towards MySQL, it's unlikely that the commands it contains will be compatible with SQLite. You will probably have to edit the .sql file pretty heavily before it can be run by SQLite.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:24:50.073

由于 SQLite 和 MySQL 实现的 SQL 语言不同，从 MySQL 导入可能不起作用。

查看 sql 文件，看看它是否使用了 SQLite 不支持的[数据类型](http://www.sqlite.org/datatype3.html)和[命令。](http://www.sqlite.org/lang.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:34:02.507

您最好将数据导出为 cvs 并手动在 SQLite 中重新创建表模式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T22:45:17.493

我最终做的是将每个表导出为 CSV，这给了我表值。然后我需要做的就是修改表头，然后我完成了我的 sqlite 文件。这有点耗时，但最终成功了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-03T18:47:12.047

我刚刚找到了一个解决方案。首先，您只需要打开 MySql 文件并删除多余的文本。之后，在 SQliteDb 浏览器中，您需要创建一个数据库，该数据库必须包含 MySQl 文件所具有的表或相同列。之后，在 SQlite 中打开或导入该（Mysql）文件数据库浏览器。它将成功转换为 Sqlite 数据库。如需更多帮助或程序。请参阅本教程： [https](https://youtu.be/UcAHsm9iwpw) ://youtu.be/UcAHsm9iwpw 谢谢

# boost - 使用 boost::object_pool 不能明确退出。我在滥用吗？

> ID：10491649
> 
> 赞同：0
> 
> 时间：2012-05-08T02:12:52.967
> 
> 标签：boost, objectpool

我在我的程序中使用了 boost::object_pool，但是我发现了一些问题，它无法退出。下面是代码。不要建议我使用 boost::pool。boost::pool 没问题，只讨论 boost::object_pool。有人可以帮助我吗？

```
#include <iostream>
#include <boost/pool/object_pool.hpp>

int main(void) {
    boost::object_pool<int> p;
    int count = 1000*1000;
    int** pv = new int*[count];

    for (int i = 0; i < count; i++)
            pv[i] = p.construct();
    for (int i = 0; i < count; i++)
            p.destroy(pv[i]);

    delete [] pv; 

    return 0;
} 
```

该程序无法正常退出。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:44:28.650

在我的机器上，这个程序可以正常运行，虽然速度很慢。

调用“destroy”的循环非常慢；它似乎有一个 O(N^2) 位；至少，循环大小每增加 10 倍，运行时间就会增加 90 倍。

以下是一些时间安排：

```
1000 elements        0.021 sec
10000 elements       1.219 sec
100000 elements      103.29 secs  (1m43.29s)
1000000 elements     13437 secs   (223m57s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:07:26.423

也有人打败了我——刚刚通过 boost 邮件列表看到了这个问题。

根据文档，destroy is O(N) 所以肯定调用这个 N 次对于大 N 来说并不理想 - 但是我想使用 Object Pool 析构函数本身（它为每个分配的对象调用析构函数）本身就是 O（N ）对批量删除有很大帮助）。

我确实有一张图表显示我的机器上的时间 - 但由于我没有使用 Stack Overflow，所以我不能发布它 - 嗯，它没有显示那么多......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T00:42:06.120

我已经发布了一个从 boost 沙箱中的合并排序派生的修复程序：

[https://github.com/graehl/boost/tree/object_pool-constant-time-free](https://github.com/graehl/boost/tree/object_pool-constant-time-free)

或者，独立：

[https://github.com/graehl/Pool-object_pool](https://github.com/graehl/Pool-object_pool)

# ios - iOS SDK：如何在切换相机时导致视图翻转

> ID：10491654
> 
> 赞同：5
> 
> 时间：2012-05-08T02:13:41.427
> 
> 标签：ios, animation, video, capture

在 iOS/Objective C 上相当新。我正在对 Apple 的[AVCam](http://bit.ly/IFQn3h)（视频捕获）示例代码进行修改，并希望在前后摄像头之间切换时模仿本机摄像头的翻转动画。似乎这很容易，但我无法掌握它是如何完成的。建议将受到欢迎。

谢谢！

标记

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-12-13T07:54:41.023

这确实是一项简单的任务。您需要做的就是在更改输入之前[`transitionWithView`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/#//apple_ref/occ/clm/UIView/transitionWithView:duration:options:animations:completion:)从`UIView`右侧调用该方法。`previewView`

如果您的目标是 iOS 8.0 或更高版本，您还可以轻松添加模糊效果。

**斯威夫特 2**

```
let blurView = UIVisualEffectView(frame: previewView.bounds)
blurView.effect = UIBlurEffect(style: .Light)
previewView.addSubview(blurView)

UIView.transitionWithView(previewView, duration: 0.4, options: .TransitionFlipFromLeft, animations: nil) { (finished) -> Void in
    blurView.removeFromSuperview()
} 
```

**斯威夫特 3, 4, 5**

```
let blurView = UIVisualEffectView(frame: previewView.bounds)
blurView.effect = UIBlurEffect(style: .light)
previewView.addSubview(blurView)

UIView.transition(with: previewView, duration: 0.4, options: .transitionFlipFromLeft, animations: nil) { (finished) -> Void in
    blurView.removeFromSuperview()
} 
```

**Objective-C**

```
UIVisualEffectView *blurView = [[UIVisualEffectView alloc] initWithFrame:_previewView.bounds];
blurView.effect = [UIBlurEffect effectWithStyle:UIBlurEffectStyleLight];
[_previewView addSubview:blurView];

[UIView transitionWithView:_previewView duration:0.4 options:UIViewAnimationOptionTransitionFlipFromLeft animations:nil completion:^(BOOL finished) {
    [blurView removeFromSuperview];
}]; 
```

# php - 以绩效为导向的会员系统设计

> ID：10491657
> 
> 赞同：1
> 
> 时间：2012-05-08T02:13:52.173
> 
> 标签：php, architecture, neo4j, graph-databases

好吧，我正在设计一个使用 PHP 和 Neo4J 的小型附属系统，以便让自己更多地了解 Neo4J 以及图形数据库的工作原理。我最初的附属系统是在 MySQL 中，仅将设计和存储迁移到 Neo4J 来提高性能是荒谬的。

但是，有些功能我可能做错了，我愿意在更有经验的开发人员的帮助下看看它会变得多好。例如，系统每个月都必须计算支付给每个会员的美元金额。这遵循一些规则，迫使我搜索整个用户网络。

例如，为了计算 Joe 的月薪，系统必须：

```
Find Node Joe
function Calculate:
  Calculate amount of people referred (all tiers)
  Calculate the number of referral tiers (all tiers)
  Calculate points
  Store information inside object properties 
```

*   层级：乔指的是玛丽，而玛丽又指的是鲍勃。玛丽是第 1 层，鲍勃是第 2 层，在乔之下。
*   所有层级：根据 Joe、Mary 和 Bob 计算数量

因此，Calculate 函数看起来像一个递归函数。对于 Joe 推荐的 Foreach 用户，我必须对他和他的任何孩子运行计算功能，直到我回到 Joe 并得到我的数字。

这慢得要命。我考虑过使用 RabbitMQ 或 ZMQ 并为 Joe 计算的每个“子进程”创建一个队列。我还考虑过使用 pcntl 的分叉。我怎样才能使我的图形网络中的这个递归过程更好？穿过整棵树的最佳方式是什么？排队？进程分叉？

另一个例子：

```
Calculate(Joe)
  Joe referred Mary, Bob, Peter
  Calculate(Mary)
  Mary referred Sara, Megan
    Calculate(Sara)
    Calculate(Megan)
  Calculate(Bob)
  Bob referred Billy, Michael
    Calculate(Billy)
    Calculate(Michael)
  Calculate(Peter)
  Peter referred Charles, Max
    Calculate(Charles)
    Calculate(Max) 
```

现在，将这个乘以一个有 500 个推荐人的人，他的每个推荐人都可以有更多的 500 人。它慢得要命，我每个月都必须在乔的仪表板上显示这个。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:20:20.020

使用 Neo4j 和 Cypher，您可以按照以下 Graph Gist 的方式做一些事情：http: [//tinyurl.com/7vryzwz](http://tinyurl.com/7vryzwz)

基本上，Cypher ( [http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html) ) 查询是

```
START referrer=node(1)
MATCH path=referrer-[:referred*1..]->refferee
RETURN referrer,refferee, length(path) as generation
ORDER BY length(path) asc 
```

这有帮助吗？

/彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:35:04.257

这不是太难。

每当有新的会员注册（或达到他们被视为会员的级别）时，将“1”添加到会员的`Affiliate`计数中，该计数应从零开始。在这样做的同时，一直向上移动附属公司的链条。

Bob 带来了 Fred，Fred 带来了 Anne。

当 Anne 注册时，Fred 收到 +1，Bob 收到 +1（或者，如果您愿意，可以收到少于 +1，因为 Anne 是第 2 层）。

这是自下而上的方法，您的附属网络是一堆树（一片森林），所以效果更好。你从叶子到树枝再到树干。这也意味着您可以提供一个人加入成功的不断更新的统计数据。

# php - 如何将数组插入MYSQL数据库？

> ID：10491661
> 
> 赞同：0
> 
> 时间：2012-05-08T02:14:40.983
> 
> 标签：php, mysql

我有一个数组，我试图插入到我的 MYSQL 数据库中。我不确定它是我的 MYSQL 数据库还是我的 php 代码，但是当我打开我的 php 文件时，它不会在我的表中插入任何内容。这是我到目前为止的代码。

```
 <?php
    $con = mysql_connect("localhost","***","***");
    if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("ms122r_reports", $con); 

    // Filter out zeros
    $words = file('http://www.ndbc.noaa.gov/data/latest_obs/latest_obs.txt',              FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

    $words = array_map('rtrim',$words);
    $string = implode(" ",$words);
    $array = explode(" ",$string);

    $filtered = (array_filter($array));

    $row4 = array_slice($filtered, 704, 22);

    $var1 = array_slice($row4, 0, 1);
    $var2 = array_slice($row4, 1, 1);
    $var3 = array_slice($row4, 2, 1);
    $var4 = array_slice($row4, 3, 1);
    $var5 = array_slice($row4, 4, 1);
    $var6 = array_slice($row4, 5, 1);
    $var7 = array_slice($row4, 6, 1);
    $var8 = array_slice($row4, 7, 1);
    $var9 = array_slice($row4, 8, 1);
    $var10 = array_slice($row4, 9, 1);
    $var11 = array_slice($row4, 10, 1);
    $var12 = array_slice($row4, 11, 1);
    $var13 = array_slice($row4, 12, 1);
    $var14 = array_slice($row4, 13, 1);
    $var15 = array_slice($row4, 14, 1);
    $var16 = array_slice($row4, 15, 1);
    $var17 = array_slice($row4, 16, 1);
    $var18 = array_slice($row4, 17, 1);
    $var19 = array_slice($row4, 18, 1);
    $var20 = array_slice($row4, 19, 1);
    $var21 = array_slice($row4, 20, 1);
    $var22 = array_slice($row4, 21, 1);

    // Insert into database
    mysql_query("INSERT INTO table1(#STN, LAT, LON, YYYY, MM, DD, hh, mm2, WDIR, WSPD,     GST, WVHT, DPD, APD, MWD, PRES, PTDY, ATMP, WTMP, DEWP, VIS, TIDE)
    VALUES ($var1, $var2, $var3, $var4, $var5, $var6, $var7, $var8, $var9, $var10,   $var11, $var12, $var13, $var14, $var15, $var16, $var17, $var18, $var19, $var20, $var21,
    $var22)");

    mysql_close($con);
    ?> 
```

对不起，我是 PHP 和 MYSQL 的新手。我的 MYSQL 数据库中的列名与 table1() 的 () 中出现的相同，并且它们被设置为“文本”作为类型。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:35:54.857

不要忘记引用你的变量如`VALUES ('$var1', '$var2' ....)`

顺便说一句，我建议你稍微清理一下你的代码。创造`$var{1-22}`将是一场噩梦。您可以使用 implode 函数而不是创建 22 个变量

我不知道，也许是这样？

```
echo 'VALUES (\'' . implode('\',\'', $row) . '\')'; 
```

另外，我不确定 Mysql 是否允许列`#`在其名称上。查看您的`#STDN`专栏并检查是否允许这样做。

考虑以下几点：

*   请考虑切换到[PDO](http://co.php.net/manual/en/book.pdo.php)或[mysqli](http://co.php.net/manual/en/book.mysqli.php)。如果您使用***PDO***，这个问题将有一个非常简单的解决方案。

*   如果你想坚持使用 mysql_* 函数，至少使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)清理你要插入数据库的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:18:38.143

您需要将变量包装在像 '$var1' 这样的代码中，并在 do die(mysql_error) 结束时像：

```
mysql_query("INSERT INTO table1(#STN, LAT, LON, YYYY, MM, DD, hh, mm2, WDIR, WSPD,     GST, WVHT, DPD, APD, MWD, PRES, PTDY, ATMP, WTMP, DEWP, VIS, TIDE)
    VALUES ('$var1', '$var2', '$var3', '$var4', '$var5', '$var6', '$var7', '$var8', '$var9', '$var10',   '$var11', '$var12', '$var13', '$var14', '$var15', '$var16', '$var17', '$var18', '$var19', '$var20', '$var21',
   '$var22')") or die(mysql_error()); 
```

mysql_error 所做的是检查并报告语句中的错误。如果有任何问题，请在此处发布以让我们解决。你确定你连接到数据库？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:19:26.733

尝试通过在浏览器中回显您的 sql 语法来调试它：

```
echo "INSERT INTO table1(#STN, LAT, LON, YYYY, MM, DD, hh, mm2, WDIR, WSPD,     GST, WVHT, DPD, APD, MWD, PRES, PTDY, ATMP, WTMP, DEWP, VIS, TIDE)
VALUES ($var1, $var2, $var3, $var4, $var5, $var6, $var7, $var8, $var9, $var10,   $var11, $var12, $var13, $var14, $var15, $var16, $var17, $var18, $var19, $var20, $var21,
$var22)"; 
```

复制回显结果并在mysql上执行。看看发生了什么。

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:25:04.273

我来回答一下标题，这也可以帮助你解决你的问题。您可以将数组切片到另一个数组中以仅获取要插入的值。

```
$dbh = new PDO('mysql:host=localhost;dbname=dbname', $user, $pass);
$sth = $dbh->prepare('INSERT INTO table1(STN, LAT, LON, YYYY, MM, DD, hh, mm2, WDIR, WSPD,     GST, WVHT, DPD, APD, MWD, PRES, PTDY, ATMP, WTMP, DEWP, VIS, TIDE)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)')
$sth->execute(array()) 
```

# android - Android - 使用不同的 SharedPreferences，我如何获得相同的值？

> ID：10491662
> 
> 赞同：1
> 
> 时间：2012-05-08T02:14:41.933
> 
> 标签：android

我刚刚意识到，在不同的活动中，我使用不同的 SharedPreferences。例如，我有这样的事情：

```
SharedPreferences prefs = PreferenceManager.
    getDefaultSharedPreferences( LoginActivity.this); 
```

和

```
SharedPreferences prefs = PreferenceManager.
    getDefaultSharedPreferences( ProblemioActivity.this); 
```

然后我一直将数据放入 prefs 对象中。

但我的数据似乎仍然存在。这怎么可能？我应该一直使用这样的东西：

```
activity.getSharedPreference("SomeKey", Mode); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:06:02.340

这些不是不同的共享偏好。他们是一样的！在这两种情况下，您都通过活动实例传递应用程序上下文。

要使用多个共享首选项，您可以指定一个名称[`Context#getSharedPreferences(java.lang.String, int)`](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)

# rally - APP SDK 2.0：短期内的图表？

> ID：10491663
> 
> 赞同：2
> 
> 时间：2012-05-08T02:14:50.630
> 
> 标签：rally

我知道你们很快就会为 2.0 SDK 制作一个非常好的图表工具，但在那之前，我想使用 Google Charts。

在 1.x API 中，您可以通过 id 定义 html 对象，然后使用 getElementById() 获取对该项目的引用。例如：

```
var chart = new google.visualization.BarChart(document.getElementById('chart_div')); 
```

但是在新的 SDK 中，您没有可使用的 HTML 块——您将如何执行以下操作？此问题与您要将对象固定到 html 中某个位置的任何项目相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:01:38.143

在新的 API 中，[应用程序基类](https://rally1.rallydev.com/apps/2.0p/doc/#!/api/Rally.app.App)只是 Ext.container.Container 的扩展，它本身是 AbstractComponent 的扩展，因此具有[getEl()](https://rally1.rallydev.com/apps/2.0p/doc/#!/api/Ext.container.Container-method-getEl)方法。（请注意，通过直接向 dom 节点添加内容，您将失去 Ext 容器提供的自动布局功能）。

这里有一个简单的例子来说明做这样的事情：

```
Ext.define('My.App', {
    extend: 'Rally.app.App',
    items: [
        {
            xtype: 'container',
            itemId: 'chartContainer'
        }
    ],
    launch: function() {
        var chartContainer = this.down('#chartContainer').getEl().dom;
        var chart = new google.visualization.BarChart(chartContainer);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:33:52.313

在最后一个答案（您的代码片段）中，您只是缺少应用程序的子项，它创建了您想要将图表呈现到其中的 chartContainer 元素。我认为这段代码应该适合你：

```
Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',
    items: [
        {
            xtype: 'container',
            itemId: 'chartContainer'
        }
    ],

    launch: function() {
        //Write app code here
        google.load("visualization", "1.0", {packages:["corechart"]});
        google.setOnLoadCallback(this._drawChart);
    },

    _drawChart: function() {
        var chartContainer = this.down('#chartContainer').getEl().dom;
        var chart = new google.visualization.BarChart(chartContainer);

        var graphArray = [['Module', 'Payload Code', 'Test Code']];

        chartData =  google.visualization.arrayToDataTable(graphArray);

        chart.draw(chartData, {width: 700, height: 500});
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:32:50.093

这是代码。它在从“Ext.define.Rally.loadScripts”启动的“Ext.define.initComponent”内因“Uncaught TypeError: Cannot read property 'parentNode' of null”而崩溃。永远不会到达 _drawChart()：

我还在 rake 脚本中添加了以下行以引用 google API：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

这是 App.js：

```
Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',

    launch: function() {
        //Write app code here
        google.load("visualization", "1.0", {packages:["corechart"]});
        google.setOnLoadCallback(this._drawChart);
    },

    _drawChart: function() {
        var chartContainer = this.down('#chartContainer').getEl().dom;
        var chart = new google.visualization.BarChart(chartContainer);

        var graphArray = [['Module', 'Payload Code', 'Test Code']];

        chartData =  google.visualization.arrayToDataTable(graphArray);

        chart.draw(chartData, {width: 700, height: 500});
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:39:17.577

SDK 2.0 图表组件的初稿现已上线。

[你可以在这里](https://rally1.rallydev.com/apps/2.0p2/doc/#!/api/Rally.ui.chart.Chart)找到它。

# java - 在 java 中使用 DTO 对象时的线程安全

> ID：10491674
> 
> 赞同：1
> 
> 时间：2012-05-08T02:16:31.200
> 
> 标签：java, multithreading, thread-safety

我的班级中有一个如下代码，其作用类似于我的“任务”班级。我将创建此类的多个实例并将其传递给`threadpool`

```
class Task {

    public void doJob() {

        String s = informationDto.getName();

    }
} 
```

DTO：

```
class InformationDto{

    private String name;

    public getName(){}

    public setName(String n){}

} 
```

我想知道该`informationDto.getName();`声明。它会在多线程环境中始终返回正确的名称吗？

如果`getName()`方法是静态的会发生什么？

我想为我正在创建`informationDto`的每个类使用每个。`Task`最好的方法是什么？

1）我想`InformationDto`为每个`Task`班级保留一个。2）由于实例变量不是线程安全的，我想知道我是否访问`getName()`方法（因为`name`是实例变量）我会得到我在`Task`类中设置的正确名称吗？3) 就像我在`Task`类中使用 util 类一样，它是线程安全的吗？如果不是，我如何以线程安全的方式使用某种 util 实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:14:31.187

我仍然不太清楚你的问题，但在评论中说得够多了，会尽力给你答案。

我会假设这样`getName()`做：

```
public getName() {
    return name;
} 
```

并`setName()`这样做：

```
public setName(String name) {
    this.name = name;
} 
```

哪里`name`是：

```
private String name; 
```

拥有一个由多个线程使用的类的实例并不能保证每个人在询问时都会看到相同的东西`getName()`，除非保证`setName()`在其他人工作时没有人调用它。

保证`getName()`返回一致且相同值的一种方法是将其锁定。你可以通过使你的对象不可变来做到这一点：

```
private final name;

public InformationDTO(String name) {
  this.name = name;
} 
```

这种方式`name`保证不会改变，并且您可以安全地将对象传递给任意数量的线程，因为您知道没有人可以更改它。然而，这将使它不是一个完美的 POJO，因为您无法设置该属性。如果您需要能够使用`setName()`（直接或间接通过某种框架），这不会为您做。

这个实例在多线程环境中还有什么问题？不多。`getName()`不会返回部分状态，例如旧值的一半和另一个线程写入的新值的一半。你在那里很安全。制作`getName()`静态并没有太大变化。它现在将是一个类方法，而不是一个实例方法，它`name`也成为`static`你不希望在你的后院出现的一个全局状态。

希望这能回答你的问题，或者至少给你足够的线索来弄清楚你的下一步。

**更新**。就像评论中指出的那样，如果您确实希望`name`更改并希望确保所有线程都读取最新值，则可以`volatile`在声明成员变量时使用：

```
private volatile String name; 
```

使用`volatile`将确保[您的线程在修改事件上“通信”并且不信任它们的本地缓存](http://jeremymanson.blogspot.com/2008/11/what-volatile-means-in-java.html)。

# mysql - MySQL使用序列化数据连接两个表，递归？

> ID：10491675
> 
> 赞同：0
> 
> 时间：2012-05-08T02:16:34.790
> 
> 标签：mysql, join, recursion, associative-array

我在尝试获取 SQL 查询所需的所有数据时遇到了一些重大问题。我对查询还是陌生的，所以我会尽可能地描述这一点。

我正在尝试使用 Wordpress 插件 NextGen Gallery 进行交叉查询。基本上有两个表`nggalbum`和`nggallery`。我正在尝试做的是创建所有专辑和画廊的嵌套列表。

中的数据`nggalbum`包含`id`、`name`、`slug`、`previewpic`、`albumdesc`、`sortorder`、 和列`pageid`。我感兴趣的唯一值是`id`、`name`、`slug`和`sortorder`。的值`sortorder`是具有此条目以及所有其他专辑和画廊条目的关系数据的序列化数据。例如：`a:2:{i:0;s:2:"a2";i:1;s:2:"a6";}`这基本上意味着当前查询项目有两个子专辑（它们对应的 id 以“a”为前缀）：`a2`和`a6`。如果它有画廊，则数字没有`a`前缀并且是`ngggallery` `gid`（将在一秒钟内涵盖）。

我用它来获取`nggalbum`表中的所有数据：

```
 $albums = $wpdb->get_results("SELECT * FROM $wpdb->nggalbum" , OBJECT_K );

    foreach ($albums as $key => $value) {
        $albums[$key]->id = 'a' . $key;
        $albums[$key]->galleries = empty ($albums[$key]->sortorder) ? array() : (array) unserialize($albums[$key]->sortorder)  ;
        $albums[$key]->name = stripslashes( $albums[$key]->name ); 
        $albums[$key]->albumdesc = stripslashes( $albums[$key]->albumdesc );
    } 
```

样本数据：

```
Array
(
[1] => stdClass Object
    (
        [id] => a1
        [name] => Image Gallery
        [slug] => image-gallery
        [previewpic] => 0
        [albumdesc] => 
        [sortorder] => a:2:{i:0;s:2:"a2";i:1;s:2:"a6";}
        [pageid] => 0
        [galleries] => Array
            (
                [0] => a2
                [1] => a6
            )

    )

[2] => stdClass Object
    (
        [id] => a2
        [name] => ALBUM 1 - High res
        [slug] => album-1-high-res
        [previewpic] => 0
        [albumdesc] => 
        [sortorder] => a:2:{i:0;s:1:"2";i:1;s:1:"3";}
        [pageid] => 0
        [galleries] => Array
            (
                [0] => 2
                [1] => 3
            )

    ) 
```

我为所有这些 id 添加了一个`a`前缀，因为它们是专辑，我*认为*这可能会有所帮助。由于我不确定自己在做什么，因此可能并非如此。

`nggallery`包含列`gid`, `name`, `slug`, `path`, `title`, `galdesc`, `pageid`, `previewpic`, 和`author`. 唯一相关的列是`gid`、`name`、`slug`、`path`和`title`。

我用它来获取`nggallery`表中的所有数据：

```
$galleries = $wpdb->get_results( "SELECT SQL_CALC_FOUND_ROWS * FROM $wpdb->nggallery", OBJECT_K );

foreach ($galleries as $key => $value) {
    $galleriesID[] = $key;
    $galleries[$key]->counter = 0;
    $galleries[$key]->title = stripslashes($galleries[$key]->title);
    $galleries[$key]->galdesc  = stripslashes($galleries[$key]->galdesc);
    $galleries[$key]->abspath = WINABSPATH . $galleries[$key]->path;     
} 
```

样本数据：

```
Array
(
[2] => stdClass Object
    (
        [gid] => 2
        [name] => new_collection
        [slug] => new-collection
        [path] => wp-content/gallery/new_collection
        [title] => NEW COLLECTION
        [galdesc] => 
        [pageid] => 0
        [previewpic] => 8
        [author] => 1
        [counter] => 0
        [abspath] => /Applications/MAMP/htdocs/igal/wp-content/gallery/new_collection
    )

[3] => stdClass Object
    (
        [gid] => 3
        [name] => cha-collection
        [slug] => cha-collection
        [path] => wp-content/gallery/cha-collection
        [title] => CHA COLLECTION
        [galdesc] => 
        [pageid] => 0
        [previewpic] => 15
        [author] => 1
        [counter] => 0
        [abspath] => /Applications/MAMP/htdocs/igal/wp-content/gallery/cha-collection
    ) 
```

现在这是我卡住的地方。我真的很希望能够编写一些代码来解析每个专辑的`galleries`数组并将其与`nggallery`.

最终，我很想实现专辑/画廊的嵌套列表，例如：

```
(a1) [link] Title
    (a2) [link] Title
        1 [link] Title
        2 [link] Title
        3 [link] Title
    (a3) [link] Title
        1 [link] Title

    [...] 
```

我不完全确定如何开始做这件事。我尝试通过一些语句循环一些东西，但`foreach`基本上没有成功。我会在谷歌上搜索这个，但我不知道这种技术叫什么。

我**真的**很想了解如何做这样的事情，所以如果你能对这种技术有所了解，我将不胜感激。指向类似教程或只是基本概念的链接对我非常有益。我不希望任何人为我编写所有代码，但我们将不胜感激朝着正确方向迈出的任何一步（如果你想编写代码，通过一些步骤，我当然不会争辩；））。

提前非常感谢！

特雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:39:27.403

我不太明白专辑和画廊是如何相互关联的，以及您在嵌套列表中想要什么。但是，在我看来，问题出在“排序顺序”列中，该列做得太多了。我怀疑您正在尝试表达表之间的多对多关系，在这种情况下，使用单独的表来表达该关系可能会更清晰。完成此操作后，我认为您可以更轻松地查询哪些相册和画廊与画廊相关。这有很大帮助吗？

编辑：

好的，我想我现在明白了。您正在尝试创建专辑层次结构，并且想要打印专辑的整个层次结构，包括每个专辑拥有的所有画廊。因此，使用您现有的设计，我认为您可以执行以下操作：

```
PrintGallery( string galleryID ) 
{
   //1 do a query that selects the gallery using the id (use a where clause)

   //2 print gallery details like the name etc whatever you want to 
}

PrintAlbum ( string albumID )
{
   //1 do a query that selects the Album using the id (use a where clause)
   //2 print Album details (name icon etc) but not the gallery array details.

   if(galleries array length > 0 ) 
     /* in case there are no galleries we don't want a hanging <li> with nothing in it */
     echo "<ul>" /* This will ensure the items are nested properly */
     foreach item currentItemID in galleries array
        echo "<li>"
        if (currentItemID is an Album)
            PrintAlbum(currentItemID) /* recurse */
        else /* assume it's a gallery are in the array */
            PrintGallery(currentItemID) 
     echo "</ul>" /* end this level */

} 
```

# javascript - 禁用 Slick 网格中的特定单元格编辑

> ID：10491676
> 
> 赞同：16
> 
> 时间：2012-05-08T02:16:43.867
> 
> 标签：javascript, slickgrid

有没有办法禁用单元格进行编辑？我们可以在列级别定义编辑器，但我们可以为特定行禁用该编辑器吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-08T20:05:00.737

```
grid.onBeforeEditCell.subscribe(function(e,args) {
  if (!isCellEditable(args.row, args.cell, args.item)) {
    return false;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-16T22:05:21.573

您可以使用方法禁用甚至更改编辑器/格式化程序/验证器...或其他单元格属性`getItemMetadata`。[这里](https://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid)有很好的文档。
**例子：**

```
$scope.data.data.getItemMetadata = function (row) {
  var item = $scope.data.data.getItem(row);
  if (item.some_condition) {
    return {
      columns : {
        yourColumnId : {
          editor : null,
          formatter : function () { return 'custom formater if some_condition'; }
        }
      }
    };
  }
}; 
```

# objective-c - 在多个线程中跟踪进度

> ID：10491683
> 
> 赞同：0
> 
> 时间：2012-05-08T02:17:13.757
> 
> 标签：objective-c, ios5, architecture

我敢肯定，像大多数 iOS 应用程序一样，我们有一个获取数据的网络操作、一个解析数据的操作和一个存储数据的 CoreData 操作以及一些显示它的 UI 事件……每个操作都在它自己的线程中。

我正在尝试找出一种干净的方法来跟踪每个完整周期/任务的进度，现在我基本上是为每个定义的周期创建一个唯一 ID 的集合，这些 ID 通过每个线程传递，它的状态在通知时更新发送成功/失败，我听，这似乎很乱。

是否有某种类型的框架支持这一点？

也许是设计模式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:46:07.837

我认为您正在寻找的是类似于 [Finite-state machine](http://en.wikipedia.org/wiki/Finite-state_machine)的东西。

[如何在 Objective-C 中制作基本的有限状态机](https://stackoverflow.com/questions/2412720/how-to-make-a-basic-finite-state-machine-in-objective-c)

# jquery - JQuery简单添加类不起作用

> ID：10491684
> 
> 赞同：0
> 
> 时间：2012-05-08T02:17:31.980
> 
> 标签：jquery, css

```
 <div class="newstitle">
            <ul class="newstitle">
                @foreach (var item in Model.Content)
                {
                    if (item.Value != null)
                    { 
                     <li>
                            <div class="newstitle_title">@item.Key.Name</div>
                        </li>
                    }
                }
           </ul> 
  </div>

 <script type="text/javascript">
  $(document).ready(function () {
     $('.newstitle li:nth-child(odd)').addClass('last');
 });
 </script> 
```

我有这段代码，我一直在尝试运行，但它破坏了 css。
![损坏的 CSS](../Images/90f401b0b3a8f8c263b0f5abb3935c78.png)

但是，应该是这样的，请看图片之间的间距：
![在此处输入图像描述](../Images/6ae9b72320cc173442a3b39d629f1f33.png)

我怎样才能解决这个问题？如果你看到 div 和 ul 都有相同的类名。

生成的 html 应该是这样的：

```
<div class="newstitle">
    <ul class="newstitle">
        <li>image</li>
        <li>image</li>
        <li>image</li>
        <li class="last">image</li>
        <li>image</li>
        <li>image</li>
        <li>image</li>
        <li class="last">image</li>
        <li>image</li>
        <li>image</li>
        <li>image</li>
        <li class="last">image</li>
    </ul>
    </div> 
```

这是CSS：

```
.newstitle  {width:600px;overflow:hidden;margin:15px auto;}
.newstitle li {float:left;width:140px;height:170px;overflow:hidden;margin:0px 13px 0px 0px;display:inline;position:relative;}
.newstitle .last {float:left;width:140px;height:170px;overflow:hidden;margin:0px 0px 0px 0px;display:inline;position:relative;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:22:11.433

试试这个 ：

```
$('li', 'ul.newstitle').filter(function() {return $(this).index()%4===0}).addClass('last'); 
```

[小提琴](http://jsfiddle.net/adeneo/wgXWg/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:45:31.737

这样的事情怎么样

```
<script type="text/javascript">
    $(document).ready(function () {
        var $li = $('ul.newstitle li'),
            y = 0;
        for (var i=0, n = $li.length; i < n; i++) {
          if ( y++ === 3 ) {
              $($li[i]).addClass("last");
              y = 0;
          }
        }
    });
</script> 
```

希望它有帮助

# android - Bing Maps API 与 Android 应用的集成程度如何？

> ID：10491686
> 
> 赞同：4
> 
> 时间：2012-05-08T02:17:47.180
> 
> 标签：android, google-maps, bing-maps

首先，我想问一下，你能`Bing Maps`在 Android 应用程序中集成吗？其次，如果可能的话，有什么优势`Bing`，`Google Maps API`反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:33:39.920

**更新** 现在`Android SDK v1.5`已弃用

[请参阅此链接](https://stackoverflow.com/questions/5198332/bing-map-for-android/31065390#31065390)以正确使用`BingMap using AJAX controller`

* * *

[开源 Bing Maps SDK](http://www.bing.com/community/site_blogs/b/maps/archive/2011/03/31/bing-maps-android-sdk-available-on-codeplex.aspx)当然它不是官方的，所以顶部有一个骗局，看起来有点过时，但在我看来，用于 android 的 google map api 有点过时了，但你可以解决大多数限制。

似乎他们俩都想把真正的“好东西”留给自己，为他们建立竞争优势。

至于赞成和反对，这取决于你想要做什么。我不认为那里有任何完美的解决方案，Decarta 在使用限制方面比 Google 或 Bing [Decarta Dev Zone](http://developer.decarta.com/)更免费，而且我认为他们有更广泛的使用 API，例如我喜欢他们的 POI Api 与使用地点或 yelp 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-22T21:37:40.793

我目前正在努力将旧版 Android SDK v1.5 迁移到现代 Android 平台，同时我正在尝试将 Android SDK 1.5 的功能移植到 Bing Maps SDK v8（v1.5 使用 Bing Maps SDK V7）。

请查看我的 Github 存储库，master 分支仅用于兼容 Android SDK v1.5，如果您想使用 Bing Maps v8，请查看 V8WebControl 分支

[https://github.com/pengan1987/BingMapsAndroidSDK](https://github.com/pengan1987/BingMapsAndroidSDK)

您还可以看到视频展示了 SDK v8 的工作方式

[https://www.youtube.com/watch?v=wfMLfyjMTuw](https://www.youtube.com/watch?v=wfMLfyjMTuw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T16:22:03.617

除了开源 Bing Maps SDK 之外，您还可以在 Android 应用程序中使用 Bing Maps V7 AJAX 控件。这是推荐的方法，因为开源应用程序很旧并且专为旧版本的 Android 设计。无论如何，它基本上只是 AJAX 控件的包装器。如果您使用的是 PhoneGap，请查看以下博客文章：

[http://www.bing.com/blogs/site_blogs/b/maps/archive/2013/06/28/cross-platform-development-with-bing-maps-and-phonegap.aspx](http://www.bing.com/blogs/site_blogs/b/maps/archive/2013/06/28/cross-platform-development-with-bing-maps-and-phonegap.aspx)

[http://www.soulsolutions.com.au/Blog/tabid/73/EntryId/797/Getting-the-shortest-route-directions-to-items-using-the-Directions-Module.aspx](http://www.soulsolutions.com.au/Blog/tabid/73/EntryId/797/Getting-the-shortest-route-directions-to-items-using-the-Directions-Module.aspx)

[http://www.soulsolutions.com.au/Blog/tabid/73/EntryId/795/Showing-GPS-position-on-Bing-Maps-with-PhoneGap-Apache-Cordova.aspx](http://www.soulsolutions.com.au/Blog/tabid/73/EntryId/795/Showing-GPS-position-on-Bing-Maps-with-PhoneGap-Apache-Cordova.aspx)

[http://www.soulsolutions.com.au/Blog/tabid/73/EntryId/794/Bing-Maps-on-IPhone-with-Phone-Gap-Apache-Cordova.aspx](http://www.soulsolutions.com.au/Blog/tabid/73/EntryId/794/Bing-Maps-on-IPhone-with-Phone-Gap-Apache-Cordova.aspx)

# javascript - 验证后无法发布数据

> ID：10491688
> 
> 赞同：0
> 
> 时间：2012-05-08T02:18:22.807
> 
> 标签：javascript, jquery

下面的代码是验证一组选择框，但是通过验证后它不会发布并转到该帖子页面，如何解决？我添加了 return true; 最后，但似乎不起作用，谢谢。

```
var $selects = $('form select[name^=select]'),
    values = [];

$(':submit').click(function(e) {
  e.preventDefault();
  values = [];
  $($selects).each(function() {
      if($(this).val()) {
          values.push($(this).val());        
      }
  });
    if(!values.length) {
        alert('Please select all categories');
        return false;
    }
  if(values.length < $selects.length || $.unique(values).length < $selects.length) {
    alert('Please select all categories and be unique');
    return false;
  }
  return true;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:19:57.580

```
$(':submit').click(function(e) {
  //e.preventDefault(); delete this. 
```

它阻止了提交按钮的默认行为 - 提交表单......

`return false`做`e.preventDefault(); + e.stopPropagation();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:21:59.483

有些东西会阻止您的事件侦听器默认操作

```
var $selects = $('form select[name^=select]'),
            values = [];

        $(':submit').click(function(e) {
          //e.preventDefault(); <--remove this line
          values = [];
          $($selects).each(function() {
              if($(this).val()) {
                  values.push($(this).val());        
              }
          });
            if(!values.length) {
                alert('Please select all categories');
               e.preventDefault(); //<--PUT IT HERE~!!!
                return false;
            }
          if(values.length < $selects.length || $.unique(values).length < $selects.length) {
            alert('Please select all categories and be unique');
            e.preventDefault(); //<-- AND PUT IT HERE~!!!
            return false;
          }
          return true;
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:30:12.863

当您要提交时，您需要`$('form').submit()`.

# php - 无法弄清楚为什么 JSON / JSONP 不起作用

> ID：10491689
> 
> 赞同：0
> 
> 时间：2012-05-08T02:18:31.060
> 
> 标签：php, json, jsonp

我有这个 PHP 代码：

JSON.php

```
<?php
    $array = array('items' => 38);
    $JSONItems = json_encode($array); 
    return $JSONItems;
?> 
```

项目.html

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
    $.getJSON("http://domain.com/JSON.php?callback=?", 
        function(data){ alert(data.items) }
    );
</script> 
```

当 Items.html 显示时，不会触发任何警报，也不会发生任何事情。（没有控制台错误或任何东西）

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:26:17.130

您正在调用`return`您的 PHP 脚本。这并不像你认为的那样。

你需要使用`echo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:23:09.797

我刚试过，效果很好

```
<script type="text/javascript">

    </script>
 <script>
 $(document).ready(function() {
   $.getJSON("http://localhost:8080/json.php", 
    function(data){ alert(data.items) }
);
 });
 </script> 
```

PHP

```
<?php
$array = array('items' => 38);
$JSONItems = json_encode($array); 
 print_r( $JSONItems )  ;
?> 
```

# javascript - 使用 onload 调整 div 的大小

> ID：10491690
> 
> 赞同：0
> 
> 时间：2012-05-08T02:18:41.590
> 
> 标签：javascript

我正在尝试调整 div onload 的大小，而标题中没有 javascript 函数。到目前为止，我的代码看起来像下面的代码，虽然我对 javascript 有点熟悉，但我还是个初学者。

我想要做的是在样式表中设置一个高度为 100% 的 div，并在加载时减去 60px 的高度。我什至接近，还是我迷路了？

编辑：我不会反对这样做的其他方法。我只是不知道有什么其他方法。

```
<div id="pageContent" onload="document.this.style.height = clientHeight - '60px';"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T02:37:43.690

我使用过 jQuery，因为检测窗口高度容易出现跨浏览器兼容性问题。保持标记、css 样式和 JavaScript 功能的清晰分离是一种很好的做法。

这是我认为您正在尝试实现的编码示例：

[http://jsfiddle.net/AKmaB/2/](http://jsfiddle.net/AKmaB/2/)

* * *

如果您以前没有使用过 jQuery，请确保在您的网页源代码中的任何其他 JavaScript 之前包含它：

**包含 jQuery**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:26:19.127

你可能想要这样的东西：

```
this.style.height = (document.body.clientHeight - 60) + "px"; 
```

编辑：

忘了提一下，你不能对 DIV 元素进行加载，只能在主体上进行加载。所以如果你坚持以这种方式运行你的javascript，你可以这样做......

```
<html>
<head></head>
<body style="height:100%; background:blue;" onload="document.getElementById('pageContent').style.height = (document.body.clientHeight - 60) + 'px';">
<div style="background:green;" id="pageContent">FOO</div>
</div>
</body>
</html> 
```

总结一下：

*   无法加载任何内容，但正文请参阅：[如何将 onload 事件添加到 div 元素？](https://stackoverflow.com/questions/4057236/how-to-add-onload-event-in-div)
*   从 document.body 中获取 clientHeight。它不是一个全球性的财产。
*   如果您使用的是 onclick 之类的东西，则可以使用“this”引用目标对象，但不能像使用 document.this 那样引用目标对象。那是无效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T03:07:34.517

首先，[HTML 4.01](http://www.w3.org/TR/html4/sgml/dtd.html#coreattrs)、[XHTML 1.0](http://www.w3.org/TR/xhtml1/dtds.html) DTD 和[HTML5](http://dev.w3.org/html5/html-author/#the-div-element) Specs 没有`onload`为元素定义属性事件`div`，所以这样做不是一个好主意。

为了使代码工作，您必须在您尝试修改的元素已加载到 DOM 之后运行它。有一些方法可以实现这一点，例如，在 div 声明之后：

```
<div id="pageContent"></div>
<script>document.getElementById('pageContent').style.height = 
        (self.innerHeight ? self.innerHeight :
         document.documentElement.clientHeight ? document.documentElement.clienteHeight :
        document.body.clientHeight) - 60 + "px";</script> 
```

或`</body>`标签之前。

```
<script>document.getElementById('pageContent').style.height = 
        (self.innerHeight ? self.innerHeight :
         document.documentElement.clientHeight ? document.documentElement.clienteHeight :
        document.body.clientHeight) - 60 + "px";</script>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:58:48.947

[jsFiddle 示例](http://jsfiddle.net/vol7ron/JZfpT/)

* * *

```
<body onload="document.getElementById('pageContent').style.height = 
              parseFloat(document.body.scrollHeight)-60 + 'px';">
<div id="pageContent"></div> 
```

* * *

1.  `div`没有`onload`属性（你必须使用`body`）
2.  即使这确实有效，之后也可能会填充其他内容，因此最好将其应用于 dom 就绪以及窗口调整大小事件
3.  而不是`clientHeight`你可能想要`scrollHeight`使用`body`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T02:25:24.400

尝试这样的事情：

```
<div id="pageContent" onload="this.style.height = (document.body.clientHeight-60)+'px'"> 
```

我相信这应该有效。

# iphone - iAd 和 Admob 集成

> ID：10491693
> 
> 赞同：3
> 
> 时间：2012-05-08T02:19:08.890
> 
> 标签：iphone, integration, admob, iad

我从这里的链接中集成了 iAd / Admob 显示代码：http: [//www.apptite.be/tutorial_mixing_ads.php](http://www.apptite.be/tutorial_mixing_ads.php) 并得到了一些奇怪的结果。在 admob 上，我的点击率下降了 40%，但展示次数保持不变。就好像两个广告同时显示，iAds 在 admob 广告之上。有没有人看到可能导致该网站上的代码问题？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:20:57.610

嗯，所以我正在查看代码：

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    NSLog(@"iAdBanner failed");

    // Only request adMob when iAd did fail
    [self adMobRequest]; 
```

在 Apple 的网站上，它说“即使向您的委托发送错误后，横幅视图仍会继续尝试下载新广告。因此，实现这两种委托方法允许您的应用程序仅在加载广告时显示横幅。” （[链接](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/iAd_Guide/WorkingwithBannerViews/WorkingwithBannerViews.html)）

我猜测正在发生的事情是，如果 iAd 失败，您正在展示 AdMob 广告，但随后 iAd 也在重试，因此如果再次失败，它会请求另一个 AdMob 广告，尽管事实上可能已经被展示？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:57:27.120

首先我们应该从谷歌下载 Admob Sdk。该文件在 google AdMob API 中是必需的：-

GADAdSize.h
GADBannerView.h
GADBannerViewDelegate.h
GADInterstitial.h
GADInterstitial.h
GADRequest.h
GADRequestError.h
libGoogleAdMobAds

```
#import <UIKit/UIKit.h>
#import "GADBannerViewDelegate.h"

@class GADBannerView, GADRequest;

@interface BannerExampleViewController : UIViewController
    <GADBannerViewDelegate> {
  GADBannerView *adBanner_;
}

@property (nonatomic, retain) GADBannerView *adBanner;

- (GADRequest *)createRequest;

@end

#import "BannerViewController.h"
#import "GADBannerView.h"
#import "GADRequest.h"

@implementation BannerExampleViewController

@synthesize adBanner = adBanner_;

#pragma mark init/dealloc

// Implement viewDidLoad to do additional setup after loading the view,
// typically from a nib.
- (void)viewDidLoad 
{
  [super viewDidLoad];

  CGPoint origin = CGPointMake(0.0,
                               self.view.frame.size.height -
                               CGSizeFromGADAdSize(kGADAdSizeBanner).height);
  self.adBanner = [[[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                                  origin:origin]
                    autorelease];

  self.adBanner.adUnitID = AdMob key;
  self.adBanner.delegate = self;
  [self.adBanner setRootViewController:self];
  [self.view addSubview:self.adBanner];
  [self.adBanner loadRequest:[self createRequest]];
}

- (void)dealloc {
  adBanner_.delegate = nil;
  [adBanner_ release];
  [super dealloc];
}

#pragma mark GADRequest generation

- (GADRequest *)createRequest {
  GADRequest *request = [GADRequest request];
  request.testing = YES;
  return request;
}

#pragma mark GADBannerViewDelegate impl

- (void)adViewDidReceiveAd:(GADBannerView *)adView {
  NSLog(@"Received ad successfully");
}

- (void)adView:(GADBannerView *)view
    didFailToReceiveAdWithError:(GADRequestError *)error {
  NSLog(@"Failed to receive ad with error: %@", [error localizedFailureReason]);
}

@end 
```

# objective-c - 从 NSMutableArray 获取双精度值

> ID：10491694
> 
> 赞同：0
> 
> 时间：2012-05-08T02:19:15.557
> 
> 标签：objective-c, ios

我正在填写一些放在我腿上的objective-c东西，如果这是一个简单的问题，我很抱歉。我有以下内容：

```
[self.distancesArray addObject:[NSNumber numberWithDouble:.25]];
[self.distancesArray addObject:[NSNumber numberWithDouble:3.0]]
[self.distancesArray addObject:[NSNumber numberWithDouble:10.0]];

NSLog(@"here is value: %.2f",[[self.distancesArray objectAtIndex:2] doubleValue]); 
```

输出：

```
2012-05-07 19:15:29.714 AtFoodie[30989:11903] here is value: 0.00 
```

我将如何获得 10 的值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:23:43.517

最可能的原因是您`distancesArray`实际上是`nil`- 它从未被初始化。所以你的`-addObject:`电话会`nil`掉到一个洞里，你的`-objectAtIndex:`电话也会做同样的事情并返回`nil`（即0）。

# backbone.js - 主干渲染放置

> ID：10491702
> 
> 赞同：0
> 
> 时间：2012-05-08T02:19:50.073
> 
> 标签：backbone.js

只是想知道为什么会这样：

```
window.NewListView = Backbone.View.extend({
  template: _.template('<a href="/list" class="button new-list">Create New List</a>'),

  render: function(){
    $(this.el).html(this.template());
    return this;
  }
});

window.List = new (Backbone.Router.extend({
  routes: { "": "index" },

  initialize: function(){
    this.newListView = new NewListView();
  },

  start: function(){
    Backbone.history.start();
  },

  index: function(){
    $('.lists').append(this.newListView.render().el);
  }
}));

$(function(){ List.start(); }) 
```

这不会：

```
window.NewListView = Backbone.View.extend({
  template: _.template('<a href="/list" class="button new-list">Create New List</a>'),

  render: function(){
    $(this.el).html(this.template());
    return this;
  }
});

window.List = new (Backbone.Router.extend({
  routes: { "": "index" },

  initialize: function(){
    this.newListView = new NewListView();
    $('.lists').append(this.newListView.render().el);
  },

  start: function(){
    Backbone.history.start();
  },

  index: function(){

  }
}));

$(function(){ List.start(); }) 
```

区别只是移动

```
$('.lists').append(this.newListView.render().el); 
```

在路由器的 initialize() 和 index() 之间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T02:55:34.830

这是因为您创建路由器实例的方式和时间。

当你这样做时：

```
window.List = new (Backbone.Router.extend({... 
```

您正在加载 DOM 之前创建路由器的实例。因此，在您的`initialize`函数中，您的 jQuery 选择器不会返回任何节点。

如果你打开一个控制台，你可以在这个 jsFiddle 上看到记录到它的操作顺序：

[http://jsfiddle.net/edwardmsmith/x64hw/](http://jsfiddle.net/edwardmsmith/x64hw/)

```
window.NewListView = Backbone.View.extend({
  template: _.template('<a href="/list" class="button new-list">Create New List</a>'),

  render: function(){
    $(this.el).html(this.template());
    return this;
  }
});

window.List = new (Backbone.Router.extend({
  routes: { "": "index" },

  initialize: function(){
    this.newListView = new NewListView();
    console.log("List Initialize");
    $('.lists').append(this.newListView.render().el);
  },

  start: function(){
    Backbone.history.start();
  },

  index: function(){

  }
}));

$(function(){ 
    console.log("Before List Start");
    List.start(); 
    console.log("After List Start");

})​ 
```

结果是：

```
List Initialize
Before List Start
After List Start 
```

但是，如果您在 DOM 加载后创建路由器实例：

```
window.NewListView = Backbone.View.extend({
  template: _.template('<a href="/list" class="button new-list">Create New List</a>'),

  render: function(){
    $(this.el).html(this.template());
    return this;
  }
});

window.List = Backbone.Router.extend({
  routes: { "": "index" },

  initialize: function(){
    this.newListView = new NewListView();
    console.log("List Initialize");
    $('.lists').append(this.newListView.render().el);
  },

  start: function(){
    Backbone.history.start();
  },

  index: function(){

  }
});

$(function(){ 
    console.log("Before List Start");
    list = new List();                
    list.start(); 
    console.log("After List Start");

})​ 
```

该顺序如您所料，并且有效：

```
Before List Start
List Initialize
After List Start 
```

如这个jsFiddle所示：

[http://jsfiddle.net/edwardmsmith/eDWfh/](http://jsfiddle.net/edwardmsmith/eDWfh/)

# java - 在 shell 脚本中嵌入可执行二进制文件

> ID：10491704
> 
> 赞同：11
> 
> 时间：2012-05-08T02:20:04.180
> 
> 标签：java, c, shell, binary

首先，我已经用谷歌搜索了，但只找到了将压缩文件（比如 a `.tar.gz`）嵌入到 shell 脚本中的示例。

基本上，如果我有一个`hello.c`打印字符串的 C 程序 ( )，比如说**Hello World！**.

我编译它以获得可执行的二进制文件

```
gcc hello.c -o hello 
```

现在我有一个shell脚本`testEmbed.sh`

我要问的是是否可以将二进制文件（**hello**）嵌入到 shell 脚本中，以便在我运行时

```
./testEmbed.sh 
```

它执行二进制文件以打印**Hello World！**.

**澄清**：一种替代方法是我将可执行文件压缩到存档中，然后在脚本运行时将其解压缩。我要问的是是否可以在没有它的情况下运行该程序。

到目前为止，我一直在尝试[这里](http://www.45rpmsoftware.com/45rpmdump/?p=137)的方法。但这对我不起作用。我猜作者是在另一个架构上使用其他发行版。所以，基本上这对我不起作用。:P

另外，如果 C 程序的工作流程与 Java 不同`jar`，我也想知道！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T02:25:08.597

是的，这是可以做到的。它实际上与您链接的文章在概念上非常相似。诀窍是使用`uuencode`将二进制文件编码为文本格式，然后将其附加到脚本的末尾。

然后，您的脚本以这样的方式编写，即它`uudecode`自己运行以创建二进制文件，更改权限然后执行它。

`uuencode``uudecode`最初是为将二进制内容转移到互联网的前身而创建的，互联网不能很好地处理二进制信息。转换为文本意味着它也可以作为 shell 脚本提供。如果由于某种原因您的发行版在您尝试运行时抱怨`uuencode`，这可能意味着您必须安装它。例如，在 Debian Squeeze 上：

```
sudo aptitude install sharutils 
```

将为您获取相关的可执行文件。这是我经历的过程。首先创建并编译你的 C 程序`hello.c`：

```
pax> cat hello.c

#include <stdio.h>
int main (void) {
    printf ("Hello\n");
    return 0;
}

pax> gcc -o hello hello.c 
```

然后创建一个 shell script `testEmbed.sh`，它将自行解码：

```
pax> cat testEmbed.sh

#!/bin/bash
rm -f hello
uudecode $0
./hello
rm -f hello
exit 
```

第一条`rm`语句表明该`hello`可执行文件是由该脚本重新创建的，而不是在您的编译中徘徊。由于您还需要文件中的有效负载，请将编码的可执行文件附加到文件的末尾：

```
pax> uuencode hello hello >>testEmbed.sh 
```

之后，当您执行脚本时`testEmbed.sh`，它会提取可执行文件并运行它。

之所以可行，是因为它会`uudecode`在其输入 (`begin`和`end`) 中查找某些标记行，这些标记行是由 放置在那里的`uuencode`，因此它只尝试解码编码的程序，而不是整个脚本：

```
pax> cat testEmbed.sh

#!/bin/bash
rm -f hello
uudecode $0
./hello
rm -f hello
exit

begin 755 hello
M?T5,1@$!`0````````````(``P`!````$(,$"#0```#`!@```````#0`(``'
M`"@`'@`;``8````T````-(`$"#2`!`C@````X`````4````$`````P```!0!
: : :
M:&%N9&QE`%]?1%1/4E]%3D1?7P!?7VQI8F-?8W-U7VEN:70`7U]B<W-?<W1A
M<G0`7V5N9`!P=71S0$!'3$E"0U\R+C``7V5D871A`%]?:38X-BYG971?<&-?
4=&AU;FLN8G@`;6%I;@!?:6YI=```
`
end 
```

您可能还应该担心其他一些事情，例如您的程序可能需要目标系统上不存在的共享库，但上面的过程基本上就是您所需要的。

* * *

JAR 文件的过程非常相似，只是运行它的方式不同。它仍然是一个文件，但您需要替换该行：

```
./hello 
```

具有能够运行 JAR 文件的功能，例如：

```
java -jar hello.jar 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T02:31:35.820

我认为[makeself](http://megastep.org/makeself/)就是你所描述的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T02:45:34.213

执行此操作的可移植方法是使用`printf`命令和八进制转义：

```
printf '\001\002\003' 
```

打印字节 1、2 和 3。由于您可能不想全部手动编写，该`od -b`命令可用于生成文件的八进制转储，然后您可以使用`sed`脚本去除垃圾并放置正确的反斜杠。

# python - 尝试在守护程序模式下使用 mod_wsgi 显示默认 apache“它有效！” 页面而不是应用程序

> ID：10491705
> 
> 赞同：0
> 
> 时间：2012-05-08T02:20:18.093
> 
> 标签：python, apache, mod-wsgi, bottle

我有一个 Python WSGI 应用程序，我已经编写并在嵌入式模式下使用 apache2 + mod_wsgi 运行，我正试图让它在守护进程模式下运行。

问题是，通过配置（如下），我看到的不是应用程序，而是默认的 Apache2 “它可以工作！” 页面，尽管它热心地陈述其运营状态，但它是错误的。

我只清理了 appname 和 urls 等，所以你看到了我正在使用的整个 apache conf。

```
<VirtualHost *:80>
  ServerName app.example.com
  ServerAlias app

  WSGIDaemonProcess appname user=www-data group=www-data processes=5 threads=5 display-name=%{GROUP} maximum-requests=1000
  WSGIScriptAlias / /usr/share/app/app/application.wsgi

  Alias /static /usr/share/app/app/static

  ErrorLog /var/log/apache2/app/error.log
  CustomLog /var/log/apache2/app/access.log common

<Directory /usr/share/app/app>
    WSGIProcessGroup appname
    Order allow,deny
    Allow from All
</Directory>

<Directory /usr/share/app/app/static>
    Order allow,deny
    Allow from All
</Directory>
</VirtualHost> 
```

无论我将 WSGIProcessGroup 选项放在该部分中，还是仅在主要部分中，这仍然只是显示“它有效！” 页。

该应用程序正在使用瓶子和 toscawidgets，以及 wsgi 验证器来确保它的所有行为都很好。我用来构建应用程序的代码：

```
import bottle
import tw.api
from wsgiref.validate import validator
#.... A whole buttload of code
application = bottle.default_app()
application = tw.api.make_middleware(application, stack_registry=True)
application = validator(application) 
```

**编辑：**我还想指出，我在带有 Python 2.6.5 的 mod_wsgi 2.8 和带有 Python 2.7.3 的 mod_wsgi 3.3 中都遇到了这个问题。

**编辑 2：** /static/ 的别名仍然有效，所以我似乎仍然在访问 VirtualHost。如果我注释掉 WSGIProcessGroup 指令并重新启动 apache，它将运行良好，但在嵌入模式而不是守护进程模式下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:55:17.827

配置的 mod_wsgi 部分似乎没有什么特别的问题，除了：

```
user=www-data group=www-data 
```

是多余的，因为它将默认由用户 Apache 运行，因此不需要显式设置。除非您有特殊需要，否则也不建议使用最大请求数。

根本问题更有可能是您的整个 VirtualHost 定义没有被使用。

将语法错误添加到 VirtualHost 以查看它是否正在被 Apache 读取。添加带有“xxx”的行就足以触发语法错误。

如果正在读取，则需要查看是否启用了命名虚拟主机。即，是否存在适当的 NameVirtualHost 指令。

下一个问题是给予 ServerName 的主机名是否实际上以 Apache 结尾。您显然不拥有“app.example.com”，但您真正使用的东西实际上是转到这个 Apache。关闭 Apache 并重试。如果无法联系到它，那么至少可能是对的。

之后，您需要确保您没有现有的 VirtualHost，它也试图为相同的 ServerName 服务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T03:51:55.607

我怀疑你根本没有打这个虚拟主机。您在任何地方都有“NameVirtualHost *:80”吗？您实际上是通过 app.example.com 或应用名称访问该网站吗？

# css - 通过 CSS3 过渡动画 SVG 元素

> ID：10491709
> 
> 赞同：2
> 
> 时间：2012-05-08T02:21:24.370
> 
> 标签：css, svg, css-transitions

我[读到](http://www.w3.org/TR/css3-transitions/#animatable-svg)SVG 动画属性`transform`可以通过 CSS 转换进行动画处理。我可以为不透明度之类的东西设置动画，但不能`transform`- 它是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:28:44.023

opacity 是一个[CSS 属性](http://www.w3.org/TR/SVG/propidx.html)，transform 是一个[属性](http://www.w3.org/TR/SVG/attindex.html)。CSS 属性可以通过 CSS 过渡进行动画处理，属性不能以这种方式进行动画处理，但可以通过[SVG SMIL](http://www.w3.org/TR/SVG/animate.html)进行动画处理。

# php - mysql 在最后 100 条记录中按标题搜索

> ID：10491717
> 
> 赞同：1
> 
> 时间：2012-05-08T02:22:43.853
> 
> 标签：php, mysql

我的情况是，当有人向我的新闻网络数据发布 60 万条记录时，他们可以创建与某人在过去几个小时内以相同主题发布的相同标题。

```
data: sid|title|desc|timestamp|userid 
```

通常我使用：

```
select sid from ".$prefix."_stories WHERE title = '".$subject."' limit 0,1 
```

`$subject`如果它们具有相同的标题，它会搜索所有数据，然后通知海报。我需要一个在最后 100 条记录中搜索的查询。

我尝试了以下方法，但这不起作用：

```
select sid from ".$prefix."_stories WHERE title = '".$subject."' and sid > MAX(sid)-100 limit 0,1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:27:27.210

您可以使用返回最后一个 100 的子查询来执行此操作`sid`。请注意，为简洁起见，我在这里省略了 PHP 连接。

```
SELECT
  last100.sid
FROM
  (
    SELECT
      sid,
      title
    FROM $prefix._stories 
    ORDER BY sid DESC LIMIT 100
  ) last100
WHERE
  last100.title = '$subject' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:27:42.817

假设您有一个主键，每条记录都增加 1（将最新的放在底部），只需执行以下操作：

```
SELECT sid, title
FROM ".$prefix."_stories
ORDER BY sid DESC 
LIMIT 100 
```

这将选择最后 100 条记录

迈克尔在我的评论中说得很好......编辑代码并进一步评论：

删除 where 子句，这将选择最后 100 条记录... 运行循环以检查标题或摘要是否已存在：

```
while ($row = $result) {
   if $subject = $row['title'] {
      $duplicate = TRUE;
      endwhile;
   }
} 
```

只需比较结果数据。谢谢迈克尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:50:26.383

按 sid 排序（降序，因此最新条目排在最前面）并将结果限制为 100：

```
$sql = "select t.sid from (select sid, title from ".$prefix."_stories ORDER BY sid DESC LIMIT 0,100) t WHERE title = '".$subject."';" 
```

一定要检查 $subject 以避免 SQL 注入（更好：使用准备好的语句/PDO）。

# java - Java webpanel 命令不保存

> ID：10491718
> 
> 赞同：0
> 
> 时间：2012-05-08T02:22:46.660
> 
> 标签：java, list, linked-list, save, command

我有一个从 web 面板获取命令的 java 应用程序，当它执行命令时，它会保存在某个地方，以便它知道它已经执行了。然后当它下一次执行命令时，它会在执行命令之前检查列表，这在 PC 上运行良好，但在 mac 上，它似乎不起作用。它保存命令，但是当它检查新命令时，它也会执行所有以前的命令。n3.data 包含：

> 1,2,3,4,

每个命令都有一个 id（在本例中为 1 2 3 和 4），应用程序应该检查它使用了哪些命令 id，如果 id 不在指定文件（n3.data）中则执行
这里是代码.

```
public void save(int id) {
    String osName = System.getProperty("os.name");
    if(osName.contains("Windows")){
    try {
        BufferedWriter bw = new BufferedWriter(new FileWriter(System.getProperty("user.home") + "\\app.data", true));
        bw.write(id + ",");
        bw.close();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    } else if(osName.contains("Mac")){
        try {
            BufferedWriter bw = new BufferedWriter(new FileWriter(System.getProperty("user.home") + "/n3.data", true));
            bw.write(id + ",");
            bw.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}

public void createNew() {
    String osName = System.getProperty("os.name");
    File win = new File(System.getProperty("user.home") + "\\app.data");
    File mac = new File(System.getProperty("user.home") + "/n3.data");
    if(osName.contains("Windows") && !win.exists()){
    try {
        new File(System.getProperty("user.home") + "\\app.data").createNewFile();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    }else if(osName.contains("Mac") && !mac.exists()){
        try {
            new File(System.getProperty("user.home") + "/n3.data").createNewFile();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}

public void saveNew() {
    String osName = System.getProperty("os.name");
    if(osName.contains("Windows")){
    StringBuilder sb = new StringBuilder();
    for (int i : processedIds) {
        sb.append(i + ",");
    }
    try {
        BufferedWriter bw = new BufferedWriter(new FileWriter(System.getProperty("user.home") + "\\app.data"));
        bw.write(sb.toString());
        bw.close();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    }else if(osName.contains("Mac")){
        StringBuilder sb = new StringBuilder();
        for (int i : processedIds) {
            sb.append(i + ",");
        }
        try {
            BufferedWriter bw = new BufferedWriter(new FileWriter(System.getProperty("user.home") + "/n3.data"));
            bw.write(sb.toString());
            bw.close();
        } catch (IOException ex) {
            ex.printStackTrace();
    }
    }
}

public void loadSave() throws IOException {
    String osName = System.getProperty("os.name");
    if(osName.contains("Windows")){
        File file = new File(System.getProperty("user.home") + "\\app.data");
        if (file.exists()) {
            BufferedReader br = new BufferedReader(new FileReader(file));
            StringBuilder sb = new StringBuilder();
            String line;
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }
            br.close();
            for (String s : sb.toString().split(",")) {
                try {
                    processedIds.add(Integer.parseInt(s));
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        } else {
            file.createNewFile();
        }
    }else if(osName.contains("Mac")){
        File file = new File(System.getProperty("user.home") + "/n3.data");
        if (file.exists()) {
            BufferedReader br = new BufferedReader(new FileReader(file));
            StringBuilder sb = new StringBuilder();
            String line;
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }
            br.close();
            for (String s : sb.toString().split(",")) {
                try {
                    processedIds.add(Integer.parseInt(s));
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        } else if (!file.exists()){
            file.createNewFile();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:39:58.543

我想通了，任何有同样问题的人，代码都无法正确检查文件是否存在。只需修复它，它应该可以工作。

# javascript - onchange - 使用 jquery 选择的下拉列表

> ID：10491724
> 
> 赞同：5
> 
> 时间：2012-05-08T02:23:34.993
> 
> 标签：javascript, jquery

我在标题中有一个下拉列表，无论标题中选择的值应该反映在详细下拉列表中，我应该怎么做？有什么线索吗？

```
$("#myddl").change(function()
{ 
     //update all the dropdown list...  
}); 
```

[http://jsfiddle.net/abuhamzah/4QvfP/](http://jsfiddle.net/abuhamzah/4QvfP/)

```
 Header:
    <br />
    <select id="myddl" name="myddl">
        <option value="1">One</option>
        <option value="2">Twooo</option>
        <option value="3">Three</option>
    </select>
    <p>Detail</p>
        <br />
    <select id="Select1" name="myddl">
        <option value="1">One</option>
        <option value="2">Twooo</option>
        <option value="3">Three</option>
    </select>
    <br />
    <select id="Select2" name="myddl">
        <option value="1">One</option>
        <option value="2">Twooo</option>
        <option value="3">Three</option>
    </select>
    <br />
    <select id="Select3" name="myddl">
        <option value="1">One</option>
        <option value="2">Twooo</option>
        <option value="3">Three</option>
    </select>
    <br />
    <select id="Select4" name="myddl">
        <option value="1">One</option>
        <option value="2">Twooo</option>
        <option value="3">Three</option>
    </select>
    <br />
    <select id="Select5" name="myddl">
        <option value="1">One</option>
        <option value="2">Twooo</option>
        <option value="3">Three</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:34:21.493

沿着这些路线的东西会起作用。它将您的“详细信息”选择包装在一个容器中，以使选择更加简单。

[http://jsfiddle.net/qMXSR/2/](http://jsfiddle.net/qMXSR/2/)

```
$("#myddl").change(function()
{ 
     $('.detail').find('select').val($(this).val());
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T02:39:14.097

用于`$.on`绑定到“更改”事件。从这里我们定位所有以 - 开头的`select`元素，包括以下所有元素。然后我们将它们的值设置为当前值。`id``Select`

```
​$("#myddl").on("change", function(o){
   $("select[id^=Select]").val(o.target.value);
});​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T02:58:05.970

```
​$(function(){
    $('#myddl').change(function(){
        var value = $(this).val();
        $('select[name=myddl] option[value='+value+']').attr('selected', 'selected');
    });
})​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T02:32:22.097

此代码将执行此操作：

```
$(document).ready(function()
{
    $("#myddl").live('change', function()
    {
        $("#Select1, #Select2, #Select3, #Select4, #Select5").val($(this).val());
    });
}); 
```

更新的 JS Fiddle 在这里：http: [//jsfiddle.net/leniel/4QvfP/7/](http://jsfiddle.net/leniel/4QvfP/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T02:36:10.753

在第一个下拉列表的 onchange 中，您可以 jQuery 选择其他下拉列表并使用 .each() 来迭代和设置其他选项。

# php - 动态添加新的组合（选择）框

> ID：10491725
> 
> 赞同：0
> 
> 时间：2012-05-08T02:23:41.940
> 
> 标签：php, javascript, html

在我的页面中，我有一个带有添加按钮的组合框。单击添加按钮时，如何在原始组合框下方创建一个新组合框？如果再次单击，它将产生另一个组合框。每个组合框内的值都是从数据库中调用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:49:12.310

这是一个示例，尽管您必须自己计算中间层和后端部分。

示例：http: [//jsfiddle.net/9hvbt/3/](http://jsfiddle.net/9hvbt/3/)

JavaScript

```
$('#btnAdd').click(function(){
    //Use Ajax to talk to your server (middle tier)
    $.ajax({
        url: '/echo/json/', //Replace with your URL to return Database data (JSON format)
        dataType: 'json', 
        type: 'get', 
        success: function(data){
            //Use the returned data to pass into CreateDropDown (Hard coded for an example)
            CreateDropDown(["Item 1", "Item 2", "Item 3"]); 
        }
    });
}); 

function CreateDropDown(data){
    var $newSelect = $('<select />'); 
    $.each(data, function(i, val){
        $newSelect.append($('<option />', {
            'text':val
        }));            
    });  
    $newSelect.appendTo('#dropDowns'); 
} 
```

​​​​​​​​​​​​​​​​​​​​​

```
<div id='dropDowns'>
    <select>
    <option>Item 1</option>
    <option>Item 2</option>
    <option>Item 3</option>
    </select>
</div>
<input type='button' id='btnAdd' value="Add" />​ 
```

**编辑**

您还应该阅读[jQuery 的 AJAX 方法](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:35:24.653

jquery有什么想法吗？jquery clone() 将帮助您解决这个问题

[jQuery .clone()](http://api.jquery.com/clone/)

一个活生生的例子：http: [//jsfiddle.net/laupkram/6LBNs/](http://jsfiddle.net/laupkram/6LBNs/)

在你的问题的情况下，试着研究这个

[使用 jQuery 和 Ajax 动态加载 ComboBox](http://www.99points.info/2010/06/ajax-tutorial-dynamic-loading-of-combobox-using-jquery-and-ajax-in-php/)

# java - 为什么带有连续分号的代码可以编译？

> ID：10491729
> 
> 赞同：9
> 
> 时间：2012-05-08T02:23:57.393
> 
> 标签：java

根据我的科学Java实验，`int x = 0;`相当于`int x = 0;;`which相当于`int x = 0;;;;;;;;;;;;;;;`

1.  为什么Java允许这样做？它有实际应用吗？
2.  这些都是空的陈述吗？它们实际上是否在运行时占用了任何额外的处理时间？（我会假设他们只是优化了？）
3.  其他语言会这样做吗？我猜它是从 C 继承的东西，就像 Java 中的很多东西一样。这是真的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-08T02:27:16.580

多余的分号被视为空语句。空语句什么都不做，所以这就是 Java 不抱怨它的原因。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-08T02:38:48.370

正如 Jake King 所写，您可以生成空语句以在循环中不执行任何操作：

```
while (condition); 
```

但为了清楚起见，你会写

```
while (condition)
    ; 
```

甚至更好：

```
while (condition)
/** intentionally empty */
    ; 
```

甚至更好，正如 Michael Kjörling 在评论中指出的那样，

```
while (condition)
{
    /** intentionally empty */
} 
```

更多的时候，你会在 for 语句中看到它的无限循环：

```
for (;;) 
```

或只有一个空语句

```
for (start;;) 
for (;cond;) 
for (;;end) 
```

你可以做的另一件事是，编写一个程序，一次用一个分号，一次用两个分号：

```
public class Empty
{
    public static void main (String args[])
    {
        System.out.println ("Just semicolons");;
    }
} 
```

编译它，并运行列出字节码的大小（相同）并对字节码（相同）执行 md5sum。

所以在语义没有改变的情况下，它显然被优化掉了，至少对于 1.6-Oracle 编译器我可以这么说。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-08T02:30:57.513

是的，它们是空的语句，根本不做任何事情。它们由编译器优化，但在某些情况下，这个空语句实际上做了一些事情，与一组空括号 ( `{}`) 做同样的事情。它们继承自 C 语法，但在 Java 中很少使用。在 C 中，有时做这样的事情很有用：

```
while (condition); 
```

这将循环直到`condition`为假，阻止代码继续进行。但是，这在现代代码中是不鼓励的，并且不应该在 Java 中真正使用。但是，空语句*确实*算作语句，只是无用的语句，因此构造如下：

```
if (condition);
    doSomething(); 
```

....可能会导致有些莫名其妙的结果。该`if`语句将调用空语句，而不是方法，因此将*始终*调用该方法。只是要记住一个警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T16:51:58.360

需要注意的一件事是，如果您执行以下操作：

```
public int foo()
{
    return(0);;
} 
```

编译器将/可能会抱怨无法访问的语句，因为返回后有一个空语句。至少在 Oracle 的 1.6 sdk 中是这样。

# mysql - SQL选择带有任意IN子句的所有内容

> ID：10491731
> 
> 赞同：2
> 
> 时间：2012-05-08T02:24:08.000
> 
> 标签：mysql, sql

这听起来很傻，但相信我，这是为了一个好的（即过度设计的）原因。

是否可以使用 IN 子句编写 SQL 查询，该子句选择该表中的所有内容而不知道该表的任何内容？请记住，这意味着您不能使用引用该表的子查询。

换句话说，我想在以下查询中找到一个替换“SOMETHING”的语句：

```
SELECT * FROM table_a WHERE table_a.id IN (SOMETHING) 
```

以便结果与以下内容相同：

```
SELECT * FROM table_a 
```

除了改变“某事”的价值之外什么都不做

* * *

为了满足好奇，我将分享这个问题的原因。

[1) 我有一个 FactoryObject 抽象类，它使用两个模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)授予所有扩展它的模型一些光荣的[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)魔法：getData() 和 load()

2) 模型必须实现模板方法。getData 是一个静态方法，它接受 ID 约束、从数据库中提取行并返回一组关联数组。load 不是静态的，接受关联数组，并根据该数组填充对象。

3）FactoryObject的非抽象部分实现了一个getObject()和一个getObjects()方法。这些调用 getData、创建对象和 load() 来自 getData 的数组响应以创建和返回填充对象。

getObjects() 需要 ID 约束作为输入，可以是列表形式，也可以是子查询形式，然后将其传递给 getData()。我希望可以不传递任何 ID 约束来获取所有对象。

问题是只有模型知道他们的表。getObjects() 是在更高级别实现的，因此它不知道要传递什么 getData()，除非 IN 有一个通用的“返回所有内容”子句。

还有其他解决方案。我可以修改 API 以要求 getData 接受特殊参数并返回所有内容，或者我可以在模型级别实现静态 getAll[ModelName]s() 方法，该方法调用：

```
static function getAllModelObjects() {
    return getObjects("select [model].id from [model]");
} 
```

这是合理的，无论如何可能适合架构，但我很好奇，所以我想我会问！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:27:32.070

适用于 SQL Server：

```
SELECT * FROM table_a WHERE table_a.id IN (table_a.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T02:48:51.297

好吧，我讨厌说不，所以我不得不为你想出另一个解决方案。

由于 mysql 是开源的，因此您可以获取源代码并合并一个可以理解无穷大符号的新功能。然后你只需要让 mysql 社区接受这个功能的有用性（在你尝试这样做时尽可能避免讨论安全问题），然后让你的公司将他们的 dbms 升级到新版本一次此功能已实现。

问题解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-05T17:24:33.407

答案很简单。解决方法是添加一些标准，如下所示：

```
# to query on a number column
AND (-1 in (-1) OR sample_table.sample_column in (-1))  

# or to query on a string column
AND ('%' in ('%') OR sample_table.sample_column in ('%')) 
```

因此，在您的示例中，只要您将 -1 作为参数值传递，以下两个查询应该返回相同的结果。

```
SELECT * FROM table_a;
SELECT * FROM table_a WHERE (-1 in (-1) OR table_a.id in (-1)); 
```

每当您想过滤掉某些东西时，您都可以将其作为参数传递。例如，在以下查询中，过滤了 id 为 1、2 和 6 的记录。

```
SELECT * FROM table_a WHERE (-1 in (1, 2, 6) OR table_a.id in (1, 2, 6)); 
```

在这种情况下，我们有一个像 -1 或 % 这样的默认值，并且我们有一个可以是任何值的参数。如果参数是默认值，则不过滤任何内容。

如果您正在查询文本列，我建议将 % 字符作为默认值，如果您正在查询表的 PK，我建议使用 -1。但这完全取决于您将 % 或 -1 替换为您决定的任何保留字符或数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:32:17.283

怎么样：

```
select * from table_a where table_a.id not ine ('somevaluethatwouldneverpossiblyexistintable_a.id') 
```

编辑：

尽管我很想继续想办法解决你的问题，但我知道没有办法，所以我想我会继续做第一个告诉你的人，这样我至少可以得到荣誉答案。不过，这确实是一场苦乐参半的胜利：/

如果您提供更多信息，也许我或其他人可以帮助您考虑另一种解决方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T02:34:11.630

类似于@brandonmoore：

```
select * from table_a where table_a.id not in ('0') 
```

# android - 安卓。创建时如何移动图像视图（设置位置/边距）

> ID：10491736
> 
> 赞同：0
> 
> 时间：2012-05-08T02:24:50.280
> 
> 标签：android, position, imageview, oncreate

我想在应用程序启动时将一些图像放在一个区域中。由于图像的数量不是固定数量，所以我必须动态创建图像。我想在创建每个图像时设置它们的位置/边距以实现良好的平衡。

我试过以下，但没有任何效果。・创建后，使用 imageview.layout()。・使用 LayoutParams.margins()。・使用 AsyncTask 设置边距。・activity.runOnUiThread()。

这是代码：

```
 // After access server, if needed then add a imageview to the 'c_box'
    // c_box: the parent that imageview to add.
    FrameLayout c_box = (FrameLayout) findViewById(R.id.c_box);

    MarginLayoutParams mlp = new MarginLayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    ImageView img1 = new ImageView(this);
    img1.setImageResource(R.drawable.c_file);
    img1.setLayoutParams(params);
    img1.setLongClickable(true);
    img1.setId(img_id);
    c_box.addView(img1);

    img1.setOnTouchListener(listener);

    **// it's possible to set the position by layout or margin?
    img1.layout(100, 100, 200, 200);** 
```

我不知道在哪里调用 invalidate() 方法。

* * *

```
// After access server, if needed then add a imageview to the 'c_box'
    // c_box: the parent that imageview to add.
    FrameLayout c_box = (FrameLayout) findViewById(R.id.c_box);

    MarginLayoutParams mlp = new MarginLayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    mlp.setMargins(100, 100, 200, 200);
    ImageView img1 = new ImageView(this);
    img1.setImageResource(R.drawable.c_file);
    img1.setLayoutParams(mlp);
    img1.setLongClickable(true);
    img1.setId(img_id);
    c_box.addView(img1);

    img1.setOnTouchListener(listener); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T02:10:24.490

最后我找到了重点：

```
FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,
        Gravity.NO_GRAVITY); 
```

我错过的第三个参数（**Gravity.NO_GRAVITY**）。使用它，您可以将视图放置在任何设置宽度/高度的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T04:09:03.897

你可以使用 MarginLayoutParams

```
MarginLayoutParams mlp = (MarginLayoutParams) yourImageViewHere.getLayoutParams();
mlp.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);//all in pixels
yourImageViewHere.setLayoutParams(mlp); 
```

动态设置边距。

# jquery - jquery使用.data方法触发DOM中的元素

> ID：10491742
> 
> 赞同：1
> 
> 时间：2012-05-08T02:25:54.550
> 
> 标签：jquery, html

我正在尝试使用像引导程序这样的系统，但使用`.data()`方法将函数附加到特定元素的 dom。

例如，如果一个元素具有：

```
<a href="#" data-toggle="dropbox">Click me</a> 
```

我可以只用 jQuery 来触发这些元素的功能吗？

```
 var dropBox = $('a').data('toggle', 'dropbox'); 
```

当我`console.log(dropBox)`返回`a`页面上的所有内容时。我正在尝试在按钮和`('a')`元素上进行这项工作，我为此编写`.on('click'...`并记录`this`，但我得到了未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:28:24.033

```
var dropBox = $('a[data-toggle="dropbox"]'); 
```

或者

```
var dropBox = $('a').filter(function() {
    return $(this).data('toggle')=='dropbox';
}); 
```

# grails - 如何从 Grails 中的一个视图向四个表中插入数据？

> ID：10491743
> 
> 赞同：2
> 
> 时间：2012-05-08T02:26:04.623
> 
> 标签：grails, grails-orm, gsp

我在基于 Grails 的 Web 应用程序中有四个域类（我做过的第一个）：

```
class Receipt
{
    String title
    Date dateCreated
    static hasMany = [articles: Article]
    static constraints =
    {
        title blank: false, unique: true
    }
}

class Article
{
    String name
    Quantity quantity
    TypeOfArticle typeOfArticle
    static hasOne = [quantity:Quantity, typeOfArticle:TypeOfArticle]
    static constraints =
    {
        quantity unique: true
    }
}

class Quantity
{
    Integer quantity
    Article article
}

class TypeOfArticle
{
    String type
    Article article
} 
```

如何在一个视图中添加一张收据以及所有详细信息？
我想让它看起来像这张照片：http: [//i.stack.imgur.com/uNVzW.png](http://i.stack.imgur.com/uNVzW.png)

我希望你能帮助我！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:25:37.300

您可能想要查找命令对象。看起来您正试图让某人将数据输入到一种跨越多个类的表单中。您可以创建一个包含所有四个类的字段的命令对象。您将该对象用于 gsp 字段，然后在控制器方法中捕获并验证数据；然后创建您的实际收据、文章等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:42:12.830

您可以在控制器操作中获取参数，在操作中您可以简单地编写**object.propertyName=params.propertyName**并且在获取所有参数后，您可以通过调用**object.save()**来简单地存储它。您可以对所有四个表执行相同的过程..

# facebook - Wordpress og：图像显示为空白

> ID：10491745
> 
> 赞同：0
> 
> 时间：2012-05-08T02:26:13.037
> 
> 标签：facebook, wordpress

我已经连续差不多 3 天了，现在我什至无法清楚地思考了。

我要做的就是让我的特色图片缩略图在我将链接粘贴到 Facebook 时出现。

*   我正在使用 Wordpress Facebook Open Graph 协议插件，它生成所有正确的 og 元属性。

*   我的缩略图是 240x200 像素，符合最低要求，也符合 3:1 比例

*   我确保我的帖子 URL 末尾没有斜杠

*   当我使用 Facebook 对象调试器时，唯一的警告是关于我的语言环境，但这不应该影响它。

*   Facebook 似乎在提取正确的图像，至少 URL 是正确的，但图像显示为空白方块

我已经浏览了论坛中可以找到的几乎所有主题，但所有可用信息都是关于使用正确的 og 标签，我相信我已经在这样做了。

非常感谢您的帮助，我很绝望！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:51:04.280

您可以使用调试器[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)对 OpenGraph 元标记进行故障排除- 这至少可以显示您是否正确使用元标记以及 Facebook 是否可以“读取”图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:01:54.887

我终于发现我的问题的根源是我使用了一个插件域（它实际上是一个被重定向到顶级域的子域）并且我在 eHow（所有地方:) 上读到了 Facebook 有问题从重定向的域中提取数据。

不确定是否有其他解决方法，但我只是最终创建了一个单独的托管帐户，现在一切都正常加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T01:51:53.853

您将遇到的一个问题是，通常在您的页面或帖子第一次被喜欢时，fb 会保留它在您的元标记中或通过搜索您的页面找到的任何 img。因此，您将不断更改您的 img 元标记，但它仍然不会显示正确的图片。这很烦人。解决它的一种方法是更改​​帖子的 slug。现在，它有一个不同的 url，对于 fb，它是一个不同的页面。不利的一面是您会失去与原始网址相关的所有赞。新网站没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-23T09:15:30.300

事实上，正如 Andy Wibbels 所指出的，FB 调试器是一个非常方便的工具。

我遇到了一个类似的问题，服务器的 og:image 标记指向一个安全的子域，该子域实际上反映了 CDN 服务器，

`<meta property="og:image" content="https://subdomain.pathToImage.jpg" /> <meta property="og:image_secure" content="https://subdomain.pathToImage.jpg" />`

FB[调试工具](https://developers.facebook.com/tools/debug/og/object/)可以让你看到FB在尝试拉取镜像时遇到的错误。

在我的情况下，子域未在 HTTPS 协议使用的 SSL 证书下注册。因此FB收到以下错误，

`Curl Error : SSL_CACERT SSL certificate problem: unable to get local issuer certificate`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-02T17:40:45.233

我在这里结束了谷歌搜索另一个问题。也许这可能会帮助某人：

请记住，facebook 抓取工具是异步工作的，并且需要一些时间（在我的测试中**大约 10 分钟**）才能在第一次看到图像后显示图像。

有关更多信息，这里是关于类似问题[的更彻底的答案。](https://stackoverflow.com/a/44873484/2072165)

# c# - 类似于 PHP Eval() 的 C# 函数

> ID：10491749
> 
> 赞同：0
> 
> 时间：2012-05-08T02:26:30.900
> 
> 标签：c#

我正在寻找一种方法来显示存储在具有 .NET 和 C# 的网页上的数据库中的代码片段，我看到了我一直在寻找的确切功能，但我不记得我使用了哪些搜索词或名称专门为此而设计的 C# 函数。

本质上，它是 PHP 的 Eval() 函数的 C# 版本，因此我可以渲染多年来收集的代码示例，并查看最终结果以及实际源代码。我确定这已经被问过了，但是当我查看这里的现有问题时，我找不到我想要的东西。

这将是我网站上的一个受密码保护的页面，仅供我查看（理论上，至少是这样），所以我不太担心有人运行恶意代码。但我很欣赏一些人在回答我的问题之前可能觉得有义务提供的善意警告。说真的，我愿意。

我有一种感觉，大约有 10 个人会看到这个问题，然后说，“好吧，显然是（在此处插入函数名称），你这个愚蠢的 wabbit。” 所以这是我承认我不知道的耻辱的方式，在前面。尤其是当我***一周***前刚看到它的时候。

提前致谢！保罗

* * *

附录：我找到了以下代码，它在 HTML、JS 和 CSS 上的作用就像一个魅力。由于我只使用 C# 几个月，我没有很多 C# 代码要渲染，所以它工作得很好。

```
String EncodedString = rs["Code"].ToString();
StringWriter writer = new StringWriter();
Server.HtmlDecode(EncodedString, writer);
String DecodedString = writer.ToString();
codeDecoded.Text = DecodedString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:33:48.220

看看[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)类。

[此处](https://stackoverflow.com/questions/508213/is-there-a-way-to-dynamically-execute-a-string-in-net-similar-to-eval-in-jav)提出了类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:36:18.957

只是好奇，您是在寻找类似 REPL 的体验还是只是一次性评估？

假设现在是后者，如果你可以使用 Roslyn，他们的脚本 API 应该可以正常工作。

[http://visualstudiomagazine.com/articles/2011/11/16/the-roslyn-scripting-api.aspx](http://visualstudiomagazine.com/articles/2011/11/16/the-roslyn-scripting-api.aspx)

# android - Android Button onClick 输入文字

> ID：10491752
> 
> 赞同：0
> 
> 时间：2012-05-08T02:26:49.687
> 
> 标签：android, xml, url, button

我已经看过十亿次了，但找不到答案。如何在单击时在编辑文本框中输入预定义文本？我希望按钮读取语句，当用户单击按钮时，会显示附加到文本的 url。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:45:05.967

不知道你想要什么...

```
final EditText edit = (EditText) this.findViewById(R.id.editText1);
Button btn = (Button) this.findViewById(R.id.button1);

btn.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        edit.setText("your text");
    }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T02:53:31.307

希望这对你有帮助

```
button = (Button)findViewById(R.id.button1);
editText = (EditText)findViewById(R.id.editText1);

    final String _url = "http://yoururl";
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            editText.setText(_url);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T02:47:13.987

EditText.setText("你的文字在这里");

这就是你需要做的。（好吧，将它包装在您的点击侦听器中并获取 id，但我假设您知道这一点）。

# xml - 我如何在 perl 中解析 xml 网页

> ID：10491755
> 
> 赞同：3
> 
> 时间：2012-05-08T02:26:59.597
> 
> 标签：xml, perl, xml-parsing

你好目前我能够解析xml文件，如果它从网页保存在我的文件夹中。

```
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;

my $parser = new XML::Simple;
my $data = $parser->XMLin("config.xml");
print Dumper($data); 
```

但如果我试图从网站上解析它，它就不起作用。

```
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;

my $parser = new XML::Simple;
my $data = $parser->XMLin("http://website/computers/computers_main/config.xml");
print Dumper($data); 
```

它给了我以下错误“文件不存在：[http://website/computers/computers_main/config.xml](http://website/computers/computers_main/config.xml) at test.pl line 12”

如何解析网页中的多个 xml 文件？我必须从网站中获取多个 xml 并对其进行解析。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:46:16.823

阅读[`XML::Simple`](http://p3rl.org/XML%3a%3aSimple). 请注意，该`XMLin`方法可以采用文件句柄、字符串甚至`IO::Handle`对象。它不能接受的是通过 HTTP 的 URL。

使用 Perl 模块[`LWP::Simple`](http://p3rl.org/LWP%3a%3aSimple)获取您需要的 XML 文件并将其传递给`XMLin`.

您必须`LWP::Simple`通过 using下载和安装[`cpan`](http://p3rl.org/cpan)，就像之前为`XML::Simple`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:03:27.453

**超级编辑：**此方法将需要 WWW::Mechanize 但它允许您登录到您的网站然后获取 xml 页面。您将不得不更改评论中的一些内容。希望这可以帮助。

```
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use WWW::Mechanize;

# Create a new instance of Mechanize
$bot = WWW::Mechanize->new();
# Create a cookie jar for the login credentials
$bot->cookie_jar(
        HTTP::Cookies->new(
            file           => "cookies.txt",
            autosave       => 1,
            ignore_discard => 1,
    )
);
# Connect to the login page
$response = $bot->get( 'http://www.thePageYouLoginTo.com' );
# Get the login form
$bot->form_number(1);
# Enter the login credentials.
# You're going to have to change the login and 
# pass(on the left) to match with the name of the form you're logging
# into(Found in the source of the website). Then you can put your 
# respective credentials on the right.
$bot->field( login => 'thisIsWhereYourLoginInfoGoes' );
$bot->field( pass => 'thisIsWhereYourPasswordInfoGoes' );
$response =$bot->click();
# Get the xml page
$response = $bot->get( 'http://website/computers/computers_main/config.xml' );
my $content = $response->decoded_content();
my $parser = new XML::Simple;
my $data = $parser->XMLin($content);
print Dumper($data); 
```

试一试。如上所述使用 LWP::Simple。它只是连接到页面并获取该页面的内容（xml 文件）并通过 XMLin 运行。 **编辑：**在 get $url 行添加了简单的错误检查。 **Edit2：**将代码保留在这里，因为如果不需要登录它应该可以工作。

```
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use LWP::Simple;

my $parser = new XML::Simple;

my $url = 'http://website/computers/computers_main/config.xml';
my $content = get $url or die "Unable to get $url\n";
my $data = $parser->XMLin($content);

print Dumper($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T05:15:49.120

如果您没有任何特定的理由坚持使用 XML::Simple，那么请使用其他一些解析器，例如 XML::Twig、XML::LibXML，它提供了一个内置功能来解析可通过 Web 获得的 XML。

这是使用 XML::Twig 的简单代码

```
use strict;
use warnings;
use XML::Twig;
use LWP::Simple;

my $url = 'http://website/computers/computers_main/config.xml';
my $twig= XML::Twig->new();
$twig->parse( LWP::Simple::get( $url )); 
```

如前所述，XML::Simple 没有这样的内置功能。

# android - 将复选框状态数据发送到电子邮件

> ID：10491760
> 
> 赞同：0
> 
> 时间：2012-05-08T02:27:26.597
> 
> 标签：android, email, android-intent, checkbox

我只是想在电子邮件中保存复选框的真/假状态。我是新手，边走边自学，所以我很抱歉。先感谢您！！这是我所拥有的：

```
 public class eActivity extends Activity {

    private CheckBox check1;

    ///onCreate

    check1 = (CheckBox) findViewById(R.id.check1);

    ///Email Intent

    email.putExtra(android.content.Intent.EXTRA_TEXT,
    ////What do i put here to get the state of the checkbox true/false?//// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T01:10:10.930

我找到了我需要的答案：

```
 email.putExtra(android.content.Intent.EXTRA_TEXT,

    ///All I have to put here is:
    check1.isChecked() 
```

它现在完美无缺，谢谢！

# android - 如何在我们的布局内的月视图中嵌入日历

> ID：10491765
> 
> 赞同：0
> 
> 时间：2012-05-08T02:27:36.233
> 
> 标签：android, android-layout, view, calendar, android-activity

我需要在我的 xml 布局中嵌入本地按月日历，该布局还将包含布局内的一些其他组件。它还应该显示特定月份显示的所有日历事件。由于我是 android 的初学者，任何来源或示例都会非常有用！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:48:45.710

在您的情况下，我认为您必须使用[Datepicker](http://developer.android.com/resources/tutorials/views/hello-datepicker.html)，只需查看此[示例](http://www.mkyong.com/android/android-date-picker-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T01:00:09.457

哈哈，有趣的是我现在正在这样做。没有内置视图可以执行此操作，任何特定代码的示例更少。您将需要从头开始构建一个。幸运的是，Android 确实内置了一个类来帮助计算否则会非常烦人：http: [//developer.android.com/reference/android/util/MonthDisplayHelper.html](http://developer.android.com/reference/android/util/MonthDisplayHelper.html)

这是什么意思？好吧，您需要使用自己的代码来构建它。如果您有 Java 经验，那么只是玩弄日期和诸如此类的东西并将它们添加到表格或网格布局（您可能应该使用的布局）中应该不会太糟糕。一旦你掌握了它的窍门，你就可以进入更复杂的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:56:25.567

尝试使用网格视图并使用日期时间选择器根据月份数组填充您可以获得特定的日期和时间每个单元格单击您可以显示一个列表，该列表将帮助用户进行提醒或添加特定于该选定日期的注释。

# c - 从标准输入（可变长度的文件）读取

> ID：10491769
> 
> 赞同：2
> 
> 时间：2012-05-08T02:28:04.040
> 
> 标签：c, stdin

因此，我一直在尝试以各种不同的方式将其用于分配工作，但每次我都会遇到不同的错误。基本上我们所拥有的是一个程序，它需要逐字节读取将通过管道输入的文件的内容（文件长度可能很大，所以我们不能只调用 malloc 并分配一大块空间）。我们需要使用 realloc 来扩展释放的内存量，直到到达文件末尾。最终结果应该是一个包含每个字节的长 C 字符串（数组）（如果它们是文件的一部分，我们也不能忽略空字节）。我目前拥有的是：

```
 char *buff;
   int n = 0;
   char c;
   int count;

   if (ferror (stdin))
   {
      fprintf(stderr, "error reading file\n");
      exit (1);
   }
   else
   {
      do {   
         buff = (char*) realloc (buff, n+1);
         c = fgetc (stdin);
         buff[n] = c;
         if (c != EOF)
             n++;
     }
       while (c != EOF);
   }
   printf("characters entered: ");
   for (count = 0; count < n; count++)
       printf("%s ", buff[count]);
   free (buff); 
```

它应该一直读取到文件末尾，每次都扩展内存但是当我尝试通过管道在一个简单的文本文件中运行它时，它告诉我我有一个分段错误。我不太确定我做错了什么。

请注意，我们被允许使用 malloc 和诸如此类的东西，但我看不出如何使它工作，因为我们知道需要多少内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:35:15.837

您在第一次调用 realloc 时使用了未分配的指针 buf。改成

```
char *buf = malloc(100); 
```

以避免这个问题。

一旦你让它工作，你会注意到你的程序效率很低，每个字符都有一个 realloc。考虑在更大的块中重新分配以减少重新分配的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T02:35:42.227

```
char* buff;
...
buff = (char*) realloc (buff, n+1); 
```

您正在尝试重新分配一个未初始化的指针，这会导致未定义的行为。改成

```
char* buff = 0;
...
buff = (char*) realloc (buff, n+1); 
```

但正如已经指出的那样，这是非常低效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T02:33:52.690

似乎@dasblinkenlight 和@smocking 的答案是当前原因，但为了避免下一次崩溃：

1.  更改`char c;`为`int c;`，因为 EOF 由多个字符表示。
2.  一次为一个字符调用 realloc 是个坏主意，而是每次增加 X 字节的大小（比如说 100），这样会更有效率。
3.  您需要在缓冲区的末尾添加空终止符（'\0'），否则 - 未定义的行为在`printf()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-12T14:03:58.150

这是我想出的读`stdin`入 a `char[]`or `char*`（当嵌入`NULL`s in 时`stdin`）：

```
char* content = NULL;
char c;
int contentSize = 0;

while ((c = fgetc(stdin)) != EOF){
    contentSize++;
    content = (char*)(realloc(content, contentSize+1));
    if (content == NULL) {
        perror("Realloc failed.");
        exit(2);
    }
    content[contentSize] = c;
}

for (int i = 0; i < contentSize; ++i) {
    printf("%c",content[i]);
} 
```

# ruby-on-rails - Cucumber：如何使用 table diff 将 table 与 colspan 进行比较

> ID：10491772
> 
> 赞同：2
> 
> 时间：2012-05-08T02:28:23.327
> 
> 标签：ruby-on-rails, cucumber, capybara

嗨，我正在编写一个黄瓜功能来使用 capybara finder（不是 tableish）来验证表格。我遵循[了 dennisreimann](http://dennisreimann.de/blog/capybara-finder-for-cucumber-rails-deprecated-tableish/)教程，当没有 td colspan 时它工作正常。当 td 有 colspan 时，它会抛出 IndexError。有没有人设法克服这个问题？我猜 colspan 打破了传递给差异的二维数组结构！功能。任何建议或提示将不胜感激。谢谢

表格示例：

```
<table id="mytable">
  <tbody>
    <tr>
      <th>header</th>
      <td colspan="5">Value1</td>
      ...
    </tr>
  </tbody>
</table> 
```

教程中的代码示例：

```
rows = find("table#mytable").all('tr')
table = rows.map { |r| r.all('th,td').map { |c| c.text.strip } }
expected_table.diff!(table) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:00:53.643

好的所以我发现它在[这里](http://comments.gmane.org/gmane.comp.programming.tools.cucumber/1267)不起作用的确认。假设是每行中的单元格数量相同，因此 colspan 打破了它

# android - Android ContentProviders 与 SQLite

> ID：10491776
> 
> 赞同：0
> 
> 时间：2012-05-08T02:28:43.057
> 
> 标签：android, sqlite

如果我们想与其他 Android 应用程序共享我们的数据，

(1) 我们可能会创建一个 SQlite 数据库并使其可供其他应用程序访问，或者

(2) 创建一个ContentProvider。

上述两种方法的基本区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:38:07.930

ContentProvider 正在向其他应用程序公开数据，非内容提供程序数据库只能由该应用程序访问。

# java - 如何在 .NET、Java 和 Sql Server 上获得正确的字符数？（在谷歌浏览器中阅读）

> ID：10491777
> 
> 赞同：3
> 
> 时间：2012-05-08T02:28:50.280
> 
> 标签：java, .net, sql-server, postgresql

给定这个字符串

> 你好水</p>

图例：[http ://en.wikipedia.org/wiki/UTF-16](http://en.wikipedia.org/wiki/UTF-16)

```
 is 4 bytes
水 is 2 bytes 
```

Postgresql 数据库 (UTF-8) 返回正确的长度 7：

```
select length('HELLO水'); 
```

我注意到 .NET 和 Java 都返回 8：

```
Console.WriteLine("HELLO水");

System.out.println("HELLO水"); 
```

Sql Server 也返回 8：

```
SELECT LEN('HELLO水'); 
```

当给定的 unicode 字符不是可变长度时，.NET、Java 和 Sql Server 返回正确的字符串长度，它们都返回 6：

```
 HELLO水 
```

他们为可变长度返回 7，这是不正确的：

```
 HELLO 
```

.NET、Java 和 Sql Server 使用 UTF-16。似乎他们计算 UTF-16 字符串长度的实现被破坏了。或者这是 UTF-16 规定的？UTF-16 作为其 UTF-8 表亲具有可变长度能力。但是为什么 UTF-16（或者是 .NET、Java、SQL Server 等等的错？）不能像 UTF-8 那样正确计算字符串的长度？

* * *

Python 返回长度为 12，但我不知道如何解释它返回 12 的原因。这可能完全是另一个话题，我离题了。

```
len("HELLO水") 
```

* * *

问题是，如何在 .NET、Java 和 Sql Server 上获得正确**的字符数？**如果函数返回不正确的字符数，则很难实现下一个 twitter。

如果我可以添加，我无法使用 Firefox 发布此内容。我在谷歌浏览器中发布了这个问题。Firefox 无法显示可变长度的 unicode

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:39:54.640

C#（可能还有 SQL 和 Java）正在返回字符串中的 Char 元素数。

[字符串长度](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)

> Length 属性返回此实例中 Char 对象的数量，而不是 Unicode 字符的数量。原因是一个 Unicode 字符可能由多个 Char 表示。使用 System.Globalization.StringInfo 类来处理每个 Unicode 字符而不是每个 Char。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T03:04:12.993

在 Java 中：

```
String s = "HELLO水";
System.out.println(s.codePointCount(0, s.length())); // 7
System.out.println(s.length()); // 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T16:46:33.283

.Net：[String.Length 属性](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)

> Length 属性返回此实例中 Char 对象的数量，而不是 Unicode 字符的数量。原因是一个 Unicode 字符可能由多个 Char 表示。使用 System.Globalization.StringInfo 类来处理每个 Unicode 字符而不是每个 Char。

所以我们应该使用 StringInfo 类来获取正确的 Unicode 字符数。

```
String s = "HELLO水";
Console.WriteLine (s);
Console.WriteLine ("Count of char: {0:d}", s.Length);

StringInfo info = new StringInfo (s);
Console.WriteLine ("Count of Unicode characters: {0:d}", info.LengthInTextElements); 
```

* * *

输出：

> 你好水<br> 字符数：8
> Unicode 字符数：7

# c# - C# 控制台应用程序 - 佣金计算器 - 如何将变量传递到 Main()

> ID：10491780
> 
> 赞同：1
> 
> 时间：2012-05-08T02:29:23.067
> 
> 标签：c#, console-application

我不知道如何将总计、销售和通信传递给 Main()。

有人知道如何将这些变量放入 Main 并在其中显示（输出）它们的名称吗？

现在我可以在 calcComm 中输出变量...

提前致谢

菲利普

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication38
{
class Program
{

    public static void getsales()
    {
        string inputsales;
        double total = 0;
        double sale = 0;

        for (int salecount = 1; salecount <= 3; ++salecount)
        {

            Console.WriteLine("Enter sale: ");
            inputsales = Console.ReadLine();
            sale = Convert.ToDouble(inputsales);
            total = total + sale;

        }

        calcComm(total);

    }

    public static void calcComm(double total)
    {

        double comm = 0;
        comm = total * 0.2;
        Console.WriteLine(comm);

    }

    public static void Main () 
    {
        Console.WriteLine("           Sunshine Hot Tubs \n        Sales Commissions Report\n");
        char Letter;

        const string name1 = "Andreas";
        const string name2 = "Brittany";
        const string name3 = "Eric";
        string inputLetter;
        string name;
        Console.WriteLine("Please enter intial or type 'z' to quit");

        inputLetter = Console.ReadLine();
        Letter = Convert.ToChar(inputLetter);

        while (Letter != 'z')
        {

            if (Letter == 'a')
            {
                name = name1;
                getsales();
            }
            else if (Letter == 'b')
            {
                name = name2;
                getsales();
            }
            else if (Letter == 'e')
            {
                name = name3;
                getsales();
            }

                   else
                   {
                      Console.WriteLine("Invalid entry try again");
                   }

                   Console.WriteLine("Please enter intial or type z to quit");

                   inputLetter = Console.ReadLine();
                   Letter = Convert.ToChar(inputLetter);

        }
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:37:51.033

这给出了对应于命令行参数的字符串数组。

```
Main(string [] args) 
```

顺便说一句，在处理货币单位时，使用小数比使用双精度更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T02:36:24.923

您应该使用对象，然后您可以公开这些对象。

```
class Sales
{
    public double total;
    public double sale;
    public double comm;
    ...

    public void CalcComm()
    {
       ...
    }
 } 
```

然后你可以像这样引用它们：

```
 Sales.total, Sales.sale 
```

或者您可以将它们设为全局，但这通常是不可取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:33:37.933

查看`return`C# 中的关键字；让你的函数返回相关数据`main`并让它使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:36:39.840

考虑这个例子来了解如何添加命令行参数。如果您需要以编程方式添加它们，请考虑编写一个包装程序并在其中启动 Process。

```
using System;

class Program
{
    static void Main(string[] args)
    {
    if (args == null)
    {
        Console.WriteLine("args is null"); // Check for null array
    }
    else
    {
        Console.Write("args length is ");
        Console.WriteLine(args.Length); // Write array length
        for (int i = 0; i < args.Length; i++) // Loop through array
        {
        string argument = args[i];
        Console.Write("args index ");
        Console.Write(i); // Write index
        Console.Write(" is [");
        Console.Write(argument); // Write string
        Console.WriteLine("]");
        }
    }
    Console.ReadLine();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T02:37:32.257

要么你可以建立一个包含所有这三个变量的数据传输对象实例化它，然后将它返回给你的主函数。

您还可以使用作为引用而不是按值传递的变量，并使用更新的引用值。阅读有关 c# 和`ref`关键字的按值类型和引用类型传递。

# sql - 如何将字符串值拆分为一列并返回结果表

> ID：10491784
> 
> 赞同：2
> 
> 时间：2012-05-08T02:29:47.230
> 
> 标签：sql, sql-server, tsql

假设我们有下表：

```
id name   member
1  jacky  a;b;c
2  jason  e
3  kate   i;j;k
4  alex   null 
```

现在我想使用 sql 或 t-sql 返回下表：

```
1 jacky a
1 jacky b
1 jacky c
2 jason e
3 kate  i
...... 
```

怎么做？我正在使用 MSSQL、MYSQL 和 Oracle 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:37:23.713

这是可以设计的*最短*且**可读**的字符串到行拆分器，并且也可以***更快***。

选择纯 CTE 而不是函数的用例，例如当您不允许在数据库上创建函数时:-)

通过函数创建行生成器（也可以使用循环或通过 CTE 实现）仍需要使用横向连接（DB2 和 Sybase 具有此功能，使用 LATERAL 关键字；在 SQL Server 中，这类似于 CROSS APPLY 和 OUTER APPLY ) 最终将函数生成的拆分行连接到主表。

纯 CTE 方法可能比函数方法更快。速度指标在于分析，如果这确实更快，只需检查它的执行计划与其他解决方案相比：

```
with Pieces(theId, pn, start, stop) AS
(
      SELECT id, 1, 1, charindex(';', member)
      from tbl

      UNION ALL

      SELECT id, pn + 1, stop + 1, charindex(';', member, stop + 1)
      from tbl 
      join pieces on pieces.theId = tbl.id 
      WHERE stop > 0
)
select 

      t.id, t.name, 

      word = 
         substring(t.member, p.start,             
           case WHEN stop > 0 THEN p.stop - p.start 
           ELSE 512 
           END) 

from tbl t
join pieces p on p.theId = t.id
order by t.id, p.pn 
```

输出：

```
ID  NAME    WORD
1   jacky   a
1   jacky   b
1   jacky   c
2   jason   e
3   kate    i
3   kate    j
3   kate    k
4   alex    (null) 
```

此处来源的基本逻辑：[T-SQL：与字符串连接相反 - 如何将字符串拆分为多个记录](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)

现场测试：[http ://www.sqlfiddle.com/#!3/2355d/1](http://www.sqlfiddle.com/#!3/2355d/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T02:41:58.010

嗯...首先让我向您介绍亚当·马哈尼奇（Adam Machanic），他教我有关数字表的知识。他还使用这个数字表编写了一个非常快速的拆分函数。

[http://dataeducation.com/counting-occurrences-of-a-substring-within-a-string/](http://dataeducation.com/counting-occurrences-of-a-substring-within-a-string/)

实现返回表的拆分函数后，您可以加入它并获得所需的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T02:59:39.890

```
IF OBJECT_ID('dbo.Users') IS NOT NULL 
    DROP TABLE dbo.Users;

CREATE TABLE dbo.Users
(
  id INT IDENTITY NOT NULL PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  member VARCHAR(1000)
)
GO

INSERT INTO dbo.Users(name, member) VALUES
  ('jacky', 'a;b;c'),
  ('jason', 'e'),
  ('kate', 'i;j;k'),
  ('alex', NULL);
GO

DECLARE @spliter CHAR(1) = ';';
WITH Base AS
(
    SELECT  1 AS n
    UNION ALL
    SELECT  n + 1
    FROM    Base
    WHERE   n < CEILING(SQRT(1000)) --generate numbers from 1 to 1000, you may change it to a larger value depending on the member column's length.
)
, Nums AS --Numbers Common Table Expression, if your database version doesn't support it, just create a physical table.
(
    SELECT  ROW_NUMBER() OVER(ORDER BY (SELECT  0)) AS n
    FROM    Base AS B1 CROSS JOIN Base AS B2
)
SELECT  id,
        SUBSTRING(member, n, CHARINDEX(@spliter, member + @spliter, n) - n) AS element
FROM    dbo.Users
    JOIN Nums
    ON n <= DATALENGTH(member) + 1
    AND SUBSTRING(@spliter + member, n, 1) = @spliter
ORDER BY id
OPTION (MAXRECURSION 0); --Nums CTE is generated recursively, we don't want to limit recursion count. 
```

# extjs - Extjs4 网格面板行数据与 json 数据存储不同

> ID：10491788
> 
> 赞同：0
> 
> 时间：2012-05-08T02:30:30.063
> 
> 标签：extjs, gridpanel

我是 extjs4 的新手，我遇到了 gridpanel 的问题，应该显示数据存储中的行数。我的问题是数据存储检索 json 有 6 行但为什么在网格面板中只显示 4 行...

这是网格

```
Ext.create('Ext.grid.Panel', {
        id: 'gridcb',
        store: Ext.data.StoreManager.lookup('mystore'),
        columns: [
            {header: 'ci',  dataIndex: 'co'},
            {header: 'co', dataIndex: 'co', flex:1},
            {header: 'durasi', dataIndex: 'durasi'},
            {header: 'issue', dataIndex: 'id'}
        ],
        height: 200,
        width: 400,
    }); 
```

这是商店

```
var mystore = Ext.create('Ext.data.Store', {

        storeId:'mystore',
        fields:['ci', 'co', 'durasi', 'id'],
        proxy: {
            type: 'ajax',
            url : 'exe_report_issue_order.php?function=store',
            actionMethods : 'POST',
            reader: {
                type: 'json',
                root: 'rows'
            }
        }
    }); 
```

和 json 返回唯一的 6 行。为什么只显示4行...

```
{success:true,
rows:[{ "ci":"2012-04-17 17:13:48",
        "co":"2012-04-17 17:13:59",
        "durasi":"00:00:11",
        "id":"154"
        },
        {"ci":"2012-04-26 08:05:00",
         "co":"2012-04-26 10:00:00",
         "durasi":"01:55:00",
         "id":"157"
        },
        {"ci":"2012-04-26 13:00:00",
         "co":"2012-04-26 17:00:00",
         "durasi":"04:00:00",
         "id":"158"
        },
        {"ci":"2012-04-17 13:00:00",
         "co":"2012-04-17 17:00:00",
         "durasi":"04:00:00",
         "id":"65"
        },
        {"ci":"2012-04-18 08:00:00",
         "co":"2012-04-18 10:00:00",
         "durasi":"02:00:00",
         "id":"65"
        },
        {"ci":"2012-04-18 17:45:00",
          "co":"2012-04-18 22:00:00",
          "durasi":"04:15:00",
          "id":"65"
        },
        {"ci":"2012-04-18 23:30:00",
         "co":"2012-04-19 03:30:00",
         "durasi":"-20:00:00",
         "id":"65"
        }
    ] 
```

}

有人可以向我解释吗？？？请。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:34:07.670

您的商店中不能有具有重复 ID 的商品，它们必须是唯一的。

# mdm - 如何部署 MDM 签到服务器？

> ID：10491789
> 
> 赞同：0
> 
> 时间：2012-05-08T02:30:34.860
> 
> 标签：mdm, checkin

我的带有 MDM Payload 的配置文件没有使用 IPCU 安装，我有一个 P12 文件， P12 文件与签到服务器有什么关系吗？以及如何部署 MDM 签到服务器来解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:31:54.637

是的，identity.p12 应该与您的服务器相关。您的服务器链接必须以“https”开头

如果您使用的是自签名 ssl，则在服务器端生成自签名 ssl 证书时，生成 identity.p12 证书，此证书您需要在 IPCU 的身份部分使用并使用相同的密码。

您可以使用这几行来生成 identity.p12

```
//Creating the device Identity key and certificate request

openssl genrsa 2048 > identity.key
openssl req -new -key identity.key -out identity.csr

//Signing the identity key with the CA. 
//Give it a passphrase. You'll need to include that in the IPCU profile.

openssl x509 -req -days 365 -in identity.csr -CA cacert.crt -CAkey cakey.key -CAcreateserial -out identity.crt

openssl pkcs12 -export -out identity.p12 -inkey identity.key -in identity.crt -certfile cacert.crt 
```

要部署服务器，请通过[MDM_Protocol](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf) pdf，其中有示例服务器详细信息。

# jquery - Ipad + 如何防止键盘在 jquery datepicker 上弹出

> ID：10491790
> 
> 赞同：12
> 
> 时间：2012-05-08T02:30:55.210
> 
> 标签：jquery, ipad, jquery-ui-datepicker

我想从我的 Ipad 禁用键盘弹出，所以我做了这样的事情，但这不是我的愿望。

我有一个文本框：

```
<h:inputText id="txtDate" value="#{myDateController.selected.DOB}" 
```

我尝试使用“只读”属性，但数据无法保存到数据库。我也用这个： $("#frmEdit\:txtDate").attr("disabled", true) --> 但是不行

我在网上搜索并使用此链接应用了我的代码，但这也不行：[ipad web application: How do I prevent the keyboard from pop up on jquery datepicker](https://stackoverflow.com/questions/3539292/ipad-web-application-how-do-i-prevent-the-keyboard-from-popping-up-on-jquery-da)

```
$(function() {
  //$("#frmEdit\\:txtDate").attr("disabled", true)
    $("#frmEdit\\:txtDate").datetimepicker({
     // showOn: "button"
        showOn: "both",   
        buttonImage: "../images/calendar.png",
        buttonImageOnly: true,
        constrainInput: true,
        showButtonPanel: true,         
        dateFormat: 'dd-M-yy',
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false },
    onClose: function(dateText, inst){ 
        $(this).attr("disabled", false);
    },
    beforeShow: function(input, inst){
        $(this).attr("disabled", false);
    }
});
}); 
```

我的代码有什么问题？或任何其他解决方案？非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T10:48:31.217

HTML 中有一个选项可以让你做这种事情：

```
readonly="true" 
```

将此添加到您的输入字段元素。它将有点“禁用”输入字段，但在完成某些操作时仍会触发事件（例如单击它）。

* * *

查看[W3Schools 只读属性](http://www.w3schools.com/tags/att_input_readonly.asp)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T20:33:24.700

这就是我设法通过让浏览器认为用户模糊了输入来解决这个问题的方法，因此它在有时间显示之前隐藏了键盘：

```
$('blabla')
    .datepicker(
    {
        /* options */
    })
    .on('focus',function()
    {
        $(this).trigger('blur');
    }); 
```

在我发现的许多其他解决方案没有的情况下，对我来说效果很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:22:08.483

您是否尝试过使用 HTML 禁用输入字段（所以添加`disabled="disabled"`）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T15:58:08.793

正确的答案往往是最简单的。

`readonly="true"`

是解决方案

# asp.net-mvc - 实体框架查询结果整形

> ID：10491794
> 
> 赞同：0
> 
> 时间：2012-05-08T02:31:44.293
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities

基于 MVC Music Store 示例，我尝试将专辑与流派一起预取，但仅从专辑中读取特定数据，而不是完整实体。

这是 EF 查询：

```
public ActionResult Browse(string genre)
{
   // Retrieve Genre and its Associated Albums from database
   var genreModel = storeDB.Genres.Include("Albums").Single(g => g.Name == genre);
   return View(genreModel);
} 
```

假设我有一个视图模型：

```
public class AlbumViewModel
{ 
   public string Title { get; set; }
   public decimal Price { get; set; } 
} 
```

我将如何更改 EF LINQ 查询以获取流派信息并包括专辑但只选择视图模型中列出的数据，而不是整个实体？

要执行 View Model 部分，我会执行类似 (VB) 的操作：

```
From a In storeDB.Albums
Where a.Genre = genre
Select New AlbumViewModel With {
     .Title = a.Title,
     .Price = a.Price,
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:49:45.697

应该是这样的：

```
(from g in storeDB.Genres
where g.Name == genre
select new {
    Genre = g,
    Albums = g.Albums.Select(a => new { Title = a.Title, Price = a.Price })
}) 
```

# ruby-on-rails - Rails 3 部署到 Heroku 语法错误，意外 $end

> ID：10491796
> 
> 赞同：0
> 
> 时间：2012-05-08T02:31:46.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku, syntax-error

在本地开发环境中成功测试我的“alpha”Rails 3 应用程序后，我将其推送到 Heroku (Cedar) 进行实时测试。推送成功，但应用程序在启动时崩溃并出现以下错误：

```
: => Booting WEBrick
: => Ctrl-C to shutdown server  
: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require':   /app/app/controllers/dives_controller.rb:50: invalid multibyte char (US-ASCII) (SyntaxError)
: /app/app/controllers/dives_controller.rb:50: syntax error, unexpected $end
: Exiting 
```

我检查了意外字符和缺少的结束语句，但似乎找不到任何内容。我没有使用任何多语言字符（据我所知）。

以下是我的一些文件，包括：Gemfile、Gemfile.lock、database.yml、dives_controller.rb [https://gist.github.com/2632041](https://gist.github.com/2632041)

这可能与使用 postgres 而没有在我的 database.yml 中正确指定它有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:18:06.607

如果您查看[dives_controller.rb](https://gist.github.com/2632041)`lines 50 and 51` ，您会注意到之前出现了一些奇怪的空白字符（它们在输出中突出显示）。我有一种感觉，那些是导致问题的角色。 `github`

它们可能是由于错误地按了键盘上的一些随机键而出现的。只需删除它们并用`space`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:37:09.037

我不确定为什么会这样，但我删除了我的 dives_controller.rb 中的以下几行，应用程序现在可以正确部署：

```
#@user = User.where(:facebook_id => current_user.identifier) 
#@dive = @user.dives.create(params[:dive])
#@dive = Dive.new(params[:dive]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:00:15.067

# objective-c - NSString（或 NSArray 或其他东西）到 C（char *）字符串的可变参数列表

> ID：10491800
> 
> 赞同：0
> 
> 时间：2012-05-08T02:32:33.440
> 
> 标签：objective-c, c, list, variables, parameters

有没有什么简单的方法可以将Objective-C持有的NSStrings类转换为接受char *变量列表的函数的参数？具体来说，我有一个类似的功能：

> -(void)someFunction:(NSSomething *) var

我想转发到一个 C 函数，比如

> void someCFunction(char * var, ...)

有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:42:25.230

不，只有在编译时知道您传递的参数数量时，您才能做您想做的事。如果您只想转换单个字符串，请使用[`-UTF8String`消息](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/UTF8String)：

```
// Example with two strings
NSString *str1 = ...;
NSString *str2 = ...;
someCFunction([str1 UTF8String], [str2 UTF8String]);  // etc. 
```

但是，如果字符串的数量在运行时会有所不同，那么您将需要使用不同的 API（如果有的话）。例如，如果有一个接受字符串数组的 API，您可以将 Objective-C 数组转换为 C 数组：

```
// This function takes a variable number of strings.  Note: in C/Objective-C
// (but not in C++/Objective-C++), it's not legal to convert 'char **' to
// 'char *const *', so you may sometimes need a cast to call this function
void someCFunction(const char *const *stringArray, int numStrings)
{
    ...
}

...

// Convert Objective-C array to C array
NSArray *objCArray = ...;

int numStrings = [objCArray count];
char **cStrArray = malloc(numStrings * sizeof(char*));
for (int i = 0; i < count; i++)
    cStrArray[i] = [[objCArray objectAtIndex:i] UTF8String];

// Call the function; see comment above for note on cast
someCFunction((const char *const *)cStrArray, numStrings);

// Don't leak memory
free(cStrArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:35:48.873

这可以解决问题：

```
NSString *string = @"testing string"
const char * p1=[string UTF8String];
char * p2;
p2 = const_cast<char *>(p1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T17:42:11.550

是的，这可以做到，并在此处解释：

[如何从 @"xxx=%@, yyy=%@" 和对象的 NSArray 之类的格式字符串创建 NSString？](https://stackoverflow.com/questions/1058736/how-to-create-a-nsstring-from-a-format-string-like-xxx-yyy-and-a-nsarr)

和这里：

[http://www.cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html](http://www.cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html)

在此处对 ARC 进行修改：

[如何从 @"xxx=%@, yyy=%@" 和对象的 NSArray 之类的格式字符串创建 NSString？](https://stackoverflow.com/questions/1058736/how-to-create-a-nsstring-from-a-format-string-like-xxx-yyy-and-a-nsarr/13499735#13499735)

此外，变量参数不是静态或强类型的，正如另一张海报似乎暗示的那样。事实上，被调用者并没有明确指出你真正有多少参数。确定参数的数量通常分解为必须通过计数参数指定数量，使用空终止符，或者从格式字符串 a la (s)print* 推断它。坦率地说，这就是为什么 C (s)print* 系列函数一直是许多错误的根源，现在 XCode / Clang / GCC 编译器现在发出警告，现在变得更加安全。

顺便说一句，您可以通过创建一个接受未指定大小的数组的模板方法来处理 C++ 中的静态类型变量参数。这通常被认为是错误的形式，因为编译器会为编译器看到的每个数组大小生成单独的实例（模板膨胀）。

# tsql - 如何在 SQL Server CE 中连接两个具有不同列的表？

> ID：10491802
> 
> 赞同：2
> 
> 时间：2012-05-08T02:33:27.073
> 
> 标签：tsql, join, sql-server-ce

如何在 SQL Server CE 中加入具有不同列的两个表？

我有两张桌子：

表**时间表**

```
+-----+----------+------+
+ ID  + Name     + Type +
+-----+----------+------+
+ 1   + A        + 1    +
+ 2   + B        + 1    +
+ 3   + C        + 2    +
+-----+----------+------+ 
```

表格**说明**

```
+-----+--------------------+
+ ID  + Description        +
+-----+--------------------+
+ 1   + A1 - XXXXX         +
+-----+--------------------+ 
```

我想要得到的是这样的表格：

```
+-----+----------+-----------------+
+ ID  + Name     + Description     +
+-----+----------+-----------------+
+ 1   + A        + A1 - XXXXX      +
+ 2   + B        + -               +
+ 3   + C        + -               +
+-----+----------+-----------------+ 
```

当ID不在表上时，该`Description`列应填写在哪里。`-``Description`

我试过这段代码：

```
SELECT S.ID, D.Description 
FROM Schedule AS S 
INNER JOIN Description AS D 
```

但结果是：

```
+-----+----------+-----------------+
+ ID  + Name     + Description     +
+-----+----------+-----------------+
+ 1   + A        + A1 - XXXXX      +
+ 2   + B        + A1 - XXXXX      +
+ 3   + C        + A1 - XXXXX      +
+-----+----------+-----------------+ 
```

当我试图给出 ON 子句时：

```
SELECT S.ID, D.Description 
FROM Schedule AS S 
INNER JOIN Description AS D ON S.ID = D.ID 
```

它只是获取桌子`ID`上的行，例如：`Description`

```
+-----+----------+-----------------+
+ ID  + Name     + Description     +
+-----+----------+-----------------+
+ 1   + A        + A1 - XXXXX      +
+-----+----------+-----------------+ 
```

我怎样才能做到这一点？

* * *

**[更新]**

我尝试了这段代码，它可以工作：

```
SELECT  S.ID, S.Name, COALESCE (D.Description, '-') AS Description
FROM Schedule AS S 
LEFT OUTER JOIN Description AS D ON S.ID = D.ID 
```

但是现在，如何在其上添加 WHERE 子句（请参见上表`SCHEDULE`）？

我试过了：

```
SELECT  S.ID, S.Name, COALESCE (D.Description, '-') AS Description
FROM Schedule AS S 
LEFT OUTER JOIN Description AS D ON S.ID = D.ID AND S.Type = '1' 
```

但仍然得到整行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T03:17:50.187

# SQL Server CE 中的左外连接

您需要使用键字段**ID**`LEFT OUTER JOIN`来连接表*Schedule*和*Description*。此外，用于将描述列中的 NULL 值替换为**`COALESCE``-`**

 **### 脚本：

```
SELECT          S.ID
            ,   S.Name
            ,   COALESCE (D.Description, '-') AS Description
FROM            Schedule AS S 
LEFT OUTER JOIN Description AS D 
ON              S.ID = D.ID 
```

### 输出：

经测试*`Microsoft SQL Server CE version 4.0.8482.1`*

![输出](../Images/f7e021267611d7bc55c7badbd80b29ee.png)

# 带有 WHERE 子句

您需要在*JOIN*`WHERE`之后添加子句。如果你打算有一个，它应该在子句之后。*`ORDER BY``WHERE`*

 *### 脚本：

```
SELECT          S.ID
            ,   S.Name
            ,   COALESCE (D.Description, '-') AS Description
FROM            Schedule    AS S 
LEFT OUTER JOIN Description AS D 
ON              S.ID = D.ID
WHERE           (S.Type = 1) 
```

### 输出：

经测试*`Microsoft SQL Server CE version 4.0.8482.1`*

![输出在哪里](../Images/6661a9cbb1532fe6610451372c1c3453.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T03:05:44.633

你需要`LEFT OUTER JOIN`.

SQLFiddle：[http ://sqlfiddle.com/#!3/7dccf/1](http://sqlfiddle.com/#!3/7dccf/1)

询问：

```
select s.ID, s.Name, Coalesce(d.description,'-') as description
from schedule s 
left outer join description d on d.id = s.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T02:48:22.030

您需要使用 an`OUTER JOIN`而不是`INNER`，并使用`IsNull`or`Coalesce`替换`NULL`值：

```
SELECT S.ID, Coalesce(D.Description , '-') AS Description
FROM Schedule AS S FULL OUTER JOIN Description AS D
ON S.ID = D.ID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T02:48:47.037

```
SELECT S.ID, D.Description 
FROM Schedule AS S FULL OUTER JOIN Description AS D
ON S.ID = D.ID 
```

`INNER JOIN`表示仅选择两个表中都存在的行。
`FULL OUTER JOIN`表示选择行，只要它们存在于一个表中。

你需要`FULL OUTER JOIN`...***

# android - 应用 ResponseText 并将其作为输入流

> ID：10491804
> 
> 赞同：0
> 
> 时间：2012-05-08T02:33:32.660
> 
> 标签：android, http, encryption, httpresponse

我只需要通过响应是png图片来解密来自httpresponse的响应，所以我这样做了：

```
HttpPost httppost = new HttpPost(tileURLString);
nameValuePairs.add(new BasicNameValuePair("x", String.valueOf(ValueX)));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

如果我得到回应

```
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
if (entity == null) {
    Log.i("Error","No content download");
}

InputStream in = entity.getContent(); 
```

这是工作。但我需要将此输出作为字符串使用 xor 解密，所以我所做的只是：

```
String responseText = EntityUtils.toString(response.getEntity());
InputStream in = new ByteArrayInputStream(responseText.getBytes()); 
```

PS。这仍然不能解密正常的输入流，但没有奏效。我google了一天。请帮帮我。如果这项工作我将进入下一步（解密）。提前致谢。

编辑：或者我使用这个方法将 InputStream 转换为字符串

```
private String convertStreamToString(InputStream is) {

        BufferedReader reader = new BufferedReader(
                new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append((line + "\n"));
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    } 
```

然后我用它来转换回输入流，但它也没有用。

```
 public InputStream convertStringToStream(String text)
            throws UnsupportedEncodingException {
        return new ByteArrayInputStream(text.getBytes("UTF-8"));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:37:05.137

```
String responseText = EntityUtils.toString(response.getEntity());
InputStream in = new ByteArrayInputStream(responseText.getBytes()); 
```

变成

```
InputStream is = response.getEntity().getContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:39:54.333

已解决的答案在此页面中

[Android字节数组到字符串到字节数组](https://stackoverflow.com/questions/10493864/android-byte-array-to-string-to-byte-array/10494496#10494496)

谢谢你的帮助。

# architecture - 可以使用 REST 设计 SOA 吗？

> ID：10491812
> 
> 赞同：30
> 
> 时间：2012-05-08T02:34:06.767
> 
> 标签：architecture, soa

我最近阅读了很多关于 SOA 的内容，但大部分内容都是与 SOAP 相关的，并且有很多属于 C#/Java 系统的“官僚”内容。老实说，我认为这样的官僚作风，特别是 SOAP，是一种痛苦。所以，我很好奇，可以用 REST 设计 SOA 吗？

现在，通过 Ruby 应用程序，我将所有控制器都设为 RESTful。我的 Web 界面（表单等）向核心发出 GET/POST/PUT/DELETE 请求，这是一个 REST Web 服务。所有其他使用核心的系统都会向它发出 RESTful 请求。这是 SOA 吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-08T08:27:53.963

在高层次上，答案是肯定的，但不完全是。

SOA 需要从以下方面考虑系统

*   服务（定义明确的业务功能）
*   组件（离散的代码和/或数据结构）
*   流程（服务编排。一般使用 BPEL）

能够组合新的更高级别的服务或业务流程是良好 SOA 的基本特征。XML、基于SOAP 的Web Services 和相关标准非常适合实现SOA。

SOA 也有一些公认的原则 - [http://en.wikipedia.org/wiki/Service-oriented_architecture#Principles](http://en.wikipedia.org/wiki/Service-oriented_architecture#Principles)

*   标准化服务合同——服务遵守由一个或多个服务描述文档共同定义的通信协议。
*   服务松散耦合——服务保持一种最小化依赖关系的关系，只要求它们保持对彼此的了解。
*   服务抽象——除了服务契约中的描述之外，服务对外界隐藏了逻辑。
*   服务可重用性——将逻辑划分为旨在促进重用的服务。
*   服务自治——服务可以控制它们封装的逻辑。
*   服务粒度——在服务操作中提供最佳范围和正确粒度级别的业务功能的设计考虑。
*   服务无状态——服务通过在必要时推迟状态信息的管理来最小化资源消耗
*   服务可发现性——服务以可有效发现和解释的通信元数据为补充。
*   服务可组合性——服务是有效的组合参与者，无论组合的规模和复杂性如何。

基于 SOA 的体系结构应该具有服务定义。由于 RESTful Web 服务缺乏明确的服务定义（类似于 wsdl），因此基于 REST 的系统很难满足上述大部分原则。

要使用 REST 实现相同的目标，您需要拥有 RESTful Web 服务 + 编排（可能使用一些轻量级 ESB，如 MuleESB 或 Camel）

另请参阅此资源 -[从 SOA 到 REST](http://dret.net/netdret/docs/soa-rest-www2009/)

* * *

添加此部分以澄清以下评论 -

编排是组成流程所必需的。这就是 SOA 的主要优势所在。

假设您有一个订单处理应用程序，其中包含以下操作 -

*   添加项目
*   加税
*   计算总计
*   下订单

最初，您创建了一个按顺序使用这些操作的流程（使用 BPEL）。您有使用此组合服务的客户。几个月后，一个新的客户来了，他有免税，那么你可以创建一个新的流程来跳过 addTax 操作，而不是编写新的服务。因此，您只需重用现有服务即可更快地实现业务功能。在实践中，有多种此类服务。

因此 BPEL 或类似的（ESB 或路由）技术对于 SOA 来说是必不可少的。没有业务用途，SOA 就不是真正的 SOA。

交叉发布在我的个人博客 - [http://blog.padmarag.com](http://blog.padmarag.com/2012/05/29/can-a-soa-be-designed-with-rest/)

还要检查我遇到的这个新资源 -[基于 REST 的 SOA](http://www.fiorano.com/whitepapers/soaesb/rest-based-soa.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T07:36:33.437

SOA 术语中的服务是解决特定业务问题的组件。SOAP/WCF 与 SOA 的接口/交付部分更相关。也可以使用 REST 方法。服务合同、策略、版本控制和其他“标准”SOA 特性也可以通过 RESTful 服务实现。

主要的 RESTful 问题是它是针对 CRUD 的，因此它不是复杂逻辑实现的最佳选择。但是如果你的业务逻辑完全是 CRUD（或收敛到 CRUD），那应该没问题。

顺便说一句，看起来微软专门为 WCF 数据服务添加了操作来模拟带有 REST 的 SOAP。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-09T10:19:15.647

SOA 最重要的一点是软因素，例如让其他人使用您的服务，反之亦然，拥有一个 wsdl 链接，您可以从中构建一个易于使用的代理，这几乎是必不可少的。服务需要是可组合的......但您不需要编排、BPEL 或花哨的总线来执行此操作，当您开始使用 SOA 时我不推荐它们。（事实上​​，使用这些我认为没有它们你可以获得更好的结果，但你确实需要事件）

注意像 WCF 这样的产品允许您创建一个公开 wsdl 的服务，但除了 SOAP 之外，您还可以使用 REST/Json 甚至更好的二进制 TCP 端点。这是理想的，因为您使用 SOAP 是为了简单起见并切换到二进制（这吹休息时离开水）当你需要的时候。

就 SOAP 而言，在使用 WCF 构建高性能 SOA 系统的 8 年中，我从未注意到 SOAP 甚至在那里。那是因为我主要使用 C# 工作，并且我们有一个很好的 SOAP 堆栈。大多数其他语言都没有。

# java - Java 错误：java.lang.NoClassDefFoundError

> ID：10491813
> 
> 赞同：-2
> 
> 时间：2012-05-08T02:34:09.607
> 
> 标签：java, linux, solr

我正在尝试在我的服务器（CENTOS 5.2 x86_64）上运行我新安装的 apache solr，我收到以下错误消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: start/jar
Caused by: java.lang.ClassNotFoundException: start.jar
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: start.jar.  Program will exit. 
```

这是我运行的表扬：`java start.jar`

据我所知，一切都已正确安装。

有任何想法吗？

谢谢 C

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T02:35:20.863

运行它`java -jar`，而不是`java`：

```
java -jar start.jar 
```

该`java`命令用于运行 .class 文件，而该`java -jar`命令实际上是正确执行 jar 中的代码，使用清单文件来解释 jar 的内容。

# iphone - iTunes Connect 中的应用程序名称问题，尝试使用已删除应用程序中的相同名称

> ID：10491817
> 
> 赞同：0
> 
> 时间：2012-05-08T02:34:18.430
> 
> 标签：iphone, ios, app-store-connect

我在 iTunes connect 上创建了一个应用程序，它正在等待上传，我出于某种原因删除了它并尝试再次使用相同的名称创建它，它说它已经被使用了，这是怎么回事？

iTunes 连接那么愚蠢还是我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:44:56.960

以这种方式向 Apple 发送电子邮件。他们会为你重置。解释您的问题是什么以及您删除的应用程序。

为了将来参考，如果您想使用该名称，请不要删除您的应用程序。只需将您不需要的应用程序重命名为 StackApp_Old。然后你可以使用回 StackApp，接下来你可以删除 StackApp_Old。

# git - 你如何为另一个所有者的应用程序设置 heroku？

> ID：10491832
> 
> 赞同：1
> 
> 时间：2012-05-08T02:35:26.830
> 
> 标签：git, heroku

我的朋友向 heroku 发布了我们的暂存环境，并允许我也发布。但是，我不确定如何设置现有的 heroku 应用程序，以便将我的 dev 分支合并到 staging 中然后发布它？

例如，

```
$ git remote -v
origin  git@github.com:SC/SCTest.git (fetch)
origin  git@github.com:SC/SCTest.git (push)
staging git@heroku.com:robot-6850.git (fetch)
staging git@heroku.com:robot-6850.git (push)
$ git branch -v
* master ec8c252 survey finalize 
```

所以，本质上，我想 1）将'staging'远程映射到我的本地分支，2）将我的 dev 分支'origin'合并到'staging'和3）再次发布'staging'，但我不确定如何去做这个？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:40:14.500

在本地的“开发”分支中工作。

当您准备好部署时，将此分支合并到您的暂存分支，然后将暂存分支部署到您的 heroku 应用程序。

`git push staging staging:master`

这是指示 Git 将您的本地暂存分支推送到暂存远程（即 robots-6850 应用程序）的主分支（heroku 仅部署主分支）

在 Dev Center 上[使用 Git 部署的](https://devcenter.heroku.com/articles/git)更多信息

# php - 使用多数组插入数据

> ID：10491841
> 
> 赞同：0
> 
> 时间：2012-05-08T02:36:30.800
> 
> 标签：php, mysql, multidimensional-array

场景是

原始来源看起来像（它没有属性 email ， name....等）：

```
a@a.com          leo
foodil@g.com     NULL 
```

我想插入这样的记录：

首先，我有一个我需要插入的数据字段的数组

```
 $field = Array ( [0] => Email [1] => Name ) 
```

其次，我有一系列邮件

```
$mail = Array ( [0] => a@a.com [1] => foodil@g.com ) 
```

==================================================== ============================

最后，我有一个多维数组，其中包含数据字段，例如名称，

```
$set = Array ( [1] => Array ( [1] => leo [4] => NULL ) ) 
```

**但是，它可以是多个字段，例如。它也可以有一个电话字段（还有地址，性别......无论如何），那么它将是：**

它是随机索引，因为计数跳过邮件列

例如。

```
leo     a@a.com          4343343
NULL    foodil@g.com     3453343

   $field = Array ( [0] => Email [1] => Name  [2] => Phone ) 

   $set = Array ( [0] => Array ( [1] => leo [4] => NULL )  [2] => Array ( [1] => 4343343 [4] => 3453343 )) 
```

==================================================== ============================

问题是，如何在这样的场景中插入？: 查询应该是这样的

**并且邮件会被测试，只有当它是真的，然后插入。例如。a@a.com 无效，那我要跳过 leo 和 4343343**

```
$query="INSERT INTO subscriber (Email,Name,Phone) VALUES ($mail[] , $set[][], $set[][])"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:30:21.063

使用它会给出二维数组。获取数组后进行 foreach 循环并插入数据库。

```
$field = array ( '0' => 'Email', '1' => 'Name',  '2' =>'Phone' ) ;
$mail = array ( '0' => 'a@a.com', '1' => 'foodil@g.com' );
$set = array ( '0' => array ( '1' => 'leo', '4' => NULL ),  '2' => array ( '1' => '4343343', '4' => '3453343' )) ;

$res = array();
$key1= array_keys($mail);
foreach($key1 as $a=>$key){
    if(array_key_exists($key, $set)){
        $res[$a]['Email'] =$mail[$key]; 
        $res[$a]['Name'] = $set[$key]['1'];
        $res[$a]['Phone'] = $set[$key]['4'];
        unset($set[$key]);
    }else{
        $res[$a]['Email'] =$mail[$key];
        $res[$a]['Name'] = '';
        $res[$a]['Phone'] = '';
    }
}    
$total = count($res);
foreach($set as $q){
    $res[$total]['Email'] ='';     
    $res[$total]['Name'] = $q[1];
    $res[$total]['Phone'] = $q[4];
    $total++;
} 
```

# php - 如何删除字符串

> ID：10491844
> 
> 赞同：0
> 
> 时间：2012-05-08T02:36:56.797
> 
> 标签：php

```
$data[2]=UploadPic/'nike--1.jpg;UploadPic/'nike--1-8221-2.jpg;UploadPic/'nike--u65B0-8221-3.jpg 
```

我想删除`UploadPic`。即：

```
 $data[2]=/'nike--1.jpg;/'nike--1-8221-2.jpg;/'nike--u65B0-8221-3.jpg 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T02:39:40.977

```
$data[2] = str_replace("UploadPic","",$data[2]); 
```

# asp.net - ASP .Net Web API 将图像下载为二进制

> ID：10491845
> 
> 赞同：30
> 
> 时间：2012-05-08T02:37:08.023
> 
> 标签：asp.net, rest, asp.net-web-api

我想尝试使用 Web API 进行休息调用，但我希望响应是存储在数据库中的实际二进制图像，而不是 JSON base64 编码字符串。有人对此有一些指示吗？

更新-这是我最终实施的：

```
 HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
 result.Content = new StreamContent(new MemoryStream(profile.Avatar));
 result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
 result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
 result.Content.Headers.ContentDisposition.FileName = "avatar.png";
 return result; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-08T14:53:44.230

您可以将响应内容设置为 StreamContent 对象：

```
 var fileStream = new FileStream(path, FileMode.Open);

        var resp = new HttpResponseMessage()
        {
            Content = new StreamContent(fileStream)
        };

        // Find the MIME type
        string mimeType = _extensions[Path.GetExtension(path)];
        resp.Content.Headers.ContentType = new MediaTypeHeaderValue(mimeType); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-11T19:12:41.513

虽然这已被标记为已回答，但这并不是我想要的，所以我一直在寻找。现在我已经弄清楚了，这就是我所拥有的：

```
public FileContentResult GetFile(string id)
{
    byte[] fileContents;
    using (MemoryStream memoryStream = new MemoryStream())
    {
        using (Bitmap image = new Bitmap(WebRequest.Create(myURL).GetResponse().GetResponseStream()))
            image.Save(memoryStream, ImageFormat.Jpeg);
        fileContents = memoryStream.ToArray();
    }
    return new FileContentResult(fileContents, "image/jpg");
} 
```

当然，这是为了通过 URL 获取图像。如果您只想从文件服务器中获取图像，我想您替换此行：

```
using (Bitmap image = new Bitmap(WebRequest.Create(myURL).GetResponse().GetResponseStream())) 
```

有了这个：

```
using (Bitmap image = new Bitmap(myFilePath)) 
```

编辑：没关系，这是针对常规 MVC 的。对于 Web API，我有这个：

```
public HttpResponseMessage Get(string id)
{
    string fileName = string.Format("{0}.jpg", id);
    if (!FileProvider.Exists(fileName))
        throw new HttpResponseException(HttpStatusCode.NotFound);

    FileStream fileStream = FileProvider.Open(fileName);
    HttpResponseMessage response = new HttpResponseMessage { Content = new StreamContent(fileStream) };
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("image/jpg");
    response.Content.Headers.ContentLength = FileProvider.GetLength(fileName);
    return response;
} 
```

这与OP所拥有的非常相似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T03:41:22.840

我做了这件事。这是我的代码：

```
if (!String.IsNullOrWhiteSpace(imageName))
                {
                    var savedFileName = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, Path.Combine(uploadPath, imageName));
                    var image = System.Drawing.Image.FromFile(savedFileName);

                    if (ImageFormat.Jpeg.Equals(image.RawFormat))
                    {
                        // JPEG
                        using(var memoryStream = new MemoryStream())
                        {
                            image.Save(memoryStream, ImageFormat.Jpeg);

                            var result = new HttpResponseMessage(HttpStatusCode.OK)
                                {
                                    Content = new ByteArrayContent(memoryStream.ToArray())
                                };

                            result.Content.Headers.ContentType = new MediaTypeHeaderValue("image/jpeg");
                            result.Content.Headers.ContentLength = memoryStream.Length;

                            return result;
                        }
                    }
                    else if (ImageFormat.Png.Equals(image.RawFormat))
                    {
                        // PNG
                        using (var memoryStream = new MemoryStream())
                        {
                            image.Save(memoryStream, ImageFormat.Png);

                            var result = new HttpResponseMessage(HttpStatusCode.OK)
                            {
                                Content = new ByteArrayContent(memoryStream.ToArray())
                            };

                            result.Content.Headers.ContentType = new MediaTypeHeaderValue("image/png");
                            result.Content.Headers.ContentLength = memoryStream.Length;

                            return result;
                        }
                    }
                    else if (ImageFormat.Gif.Equals(image.RawFormat))
                    {
                        // GIF
                        using (var memoryStream = new MemoryStream())
                        {
                            image.Save(memoryStream, ImageFormat.Gif);

                            var result = new HttpResponseMessage(HttpStatusCode.OK)
                            {
                                Content = new ByteArrayContent(memoryStream.ToArray())
                            };

                            result.Content.Headers.ContentType = new MediaTypeHeaderValue("image/gif");
                            result.Content.Headers.ContentLength = memoryStream.Length;

                            return result;
                        }
                    }
                } 
```

然后在客户端：

```
 var client = new HttpClient();
                    var imageName = product.ImageUrl.Replace("~/Uploads/", "");
                var path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory,
                                        Properties.Settings.Default.DeviceMediaPath + "\\" + imageName);

                var response =
                    client.GetAsync(apiUrl + "/Image?apiLoginId=" + apiLoginId + "&authorizationToken=" + authToken +
                                    "&imageName=" + product.ImageUrl.Replace("~/Uploads/","")).Result;

                if (response.IsSuccessStatusCode)
                {
                    var data = response.Content.ReadAsByteArrayAsync().Result;
                    using (var ms = new MemoryStream(data))
                    {
                        using (var fs = File.Create(path))
                        {
                            ms.CopyTo(fs);
                        }
                    }

                    result = true;
                }
                else
                {
                    result = false;
                    break;
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:08:03.043

这个任务很容易在*不*使用 WebAPI 的情况下完成。我将为一个独特的扩展实现一个自定义[HTTP 处理程序，并在那里返回二进制响应。](http://msdn.microsoft.com/en-us/library/ms228090.aspx)优点是您还可以修改 HTTP 响应标头和内容类型，因此您可以完全控制返回的内容。

您可以设计一个 URL 模式（定义您如何知道根据其 URL 返回的图像），并将这些 URL 保留在您的 API 资源中。一旦在 API 响应中返回 URL，浏览器就可以直接请求它，并将到达您的 HTTP 处理程序，返回正确的图像。

图像是静态内容，在 HTTP 和 HTML 中具有自己的作用 - 无需将它们与使用 API 时使用的 JSON 混合。

# coffeescript - 我无法在 Coffeescript 交互模式（REPL）中编写多行代码

> ID：10491849
> 
> 赞同：52
> 
> 时间：2012-05-08T02:37:25.220
> 
> 标签：coffeescript, multiline, interactive, read-eval-print-loop

当我在 coffeescript 交互模式下输入 multiline 时，出现错误。

例如，我想尝试以下代码：

```
kids =
  brother:
    name: "Max"
    age:  11
  sister:
    name: "Ida"
    age:  9 
```

显示此错误：

```
coffee> kids = 
Error: In repl, Parse error on line 1: Unexpected 'TERMINATOR'
  at Object.parseError (/usr/lib/coffeescript/parser.js:463:11)
  at Object.parse (/usr/lib/coffeescript/parser.js:533:22)
  at /usr/lib/coffeescript/coffee-script.js:26:22
  at Object.eval (/usr/lib/coffeescript/coffee-script.js:64:17)
  at Interface.<anonymous> (/usr/lib/coffeescript/repl.js:18:26)
  at Interface.emit (events:27:15)
  at Interface._ttyWrite (readline:309:12)
  at Interface.write (readline:147:30)
  at Stream.<anonymous> (/usr/lib/coffeescript/repl.js:35:17)
  at Stream.emit (events:27:15) 
```

我尝试使用 '\' 作为换行符，但显示了相同的错误。

```
coffee> kids = \
Error: In repl, Parse error on line 1: Unexpected '\'
  at Object.parseError (/usr/lib/coffeescript/parser.js:463:11)
  at Object.parse (/usr/lib/coffeescript/parser.js:533:22)
  at /usr/lib/coffeescript/coffee-script.js:26:22
  at Object.eval (/usr/lib/coffeescript/coffee-script.js:64:17)
  at Interface.<anonymous> (/usr/lib/coffeescript/repl.js:18:26)
  at Interface.emit (events:27:15)
  at Interface._ttyWrite (readline:309:12)
  at Interface.write (readline:147:30)
  at Stream.<anonymous> (/usr/lib/coffeescript/repl.js:35:17)
  at Stream.emit (events:27:15) 
```

我不能使用多行，所以我不能使用缩进。

我该怎么办？

我的环境如下：

*   操作系统：Ubuntu 10.04 清醒

*   coffeescript 1.0.0 版我用 PPA 和 apt-get 命令安装了 coffeescript。

看到这个网址：[https ://launchpad.net/~gezakovacs/+archive/coffeescript](https://launchpad.net/~gezakovacs/+archive/coffeescript)

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-01-26T18:33:30.547

您也可以使用**`Ctrl`+`V`**切换到多行模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:15:49.730

反斜杠适用于我的咖啡 1.2.1...尝试升级:)

# ruby-on-rails - Rails：浮动此列的正确类型？

> ID：10491856
> 
> 赞同：2
> 
> 时间：2012-05-08T02:37:54.410
> 
> 标签：ruby-on-rails, ip

我正在尝试将 IP 保存到访问我的应用主页的每个人的数据库中。我添加了一个带有`ip:float`列的 IP 模型/表，并在索引中执行了以下操作。

```
 def index
    ..........

    ipmodel  = Ip.new
    @ip = request.ip
    ipmodel.ip = @ip
    ipmodel.save

  end 
```

当我在控制台中检查数据库时，它给了我这个

```
#<Ip id: 1, ip: 127.0, created_at: "2012-05-08 02:27:14", updated_at: "2012-05-08 02:27:14"> 
```

所以，由于我是从 localhost 访问的，所以它是`127.0`. 但是，我想知道为什么它只有 4 位数字，因为 IP 地址是

```
127.0.0.1 
```

1）我猜它修剪掉了一些小数，因为“float”不是正确的类型。我应该用什么来记录整个 IP？

2）另外，由于我是一个新手/黑客，我假设索引中的代码可以改进。如果您能帮助我改进代码以收集和保存 IP，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:43:57.320

您需要将 IP 地址保存为字符串。对于 IPv4，我相信最大长度为 15 个字符（###.###.###.###）。如果要考虑 IPv6，则需要考虑最大长度为 45 个字符。请参阅解释为什么它是 45 个字符的[相关问题。](https://stackoverflow.com/a/166157/107277)

# php - 将文本分成两半，但在最近的句子

> ID：10491859
> 
> 赞同：7
> 
> 时间：2012-05-08T02:38:15.360
> 
> 标签：php, html, string

`$text`变量示例：

> Lorem ipsum dolor sit amet，consectetur adipisicing elit，sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat。Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur。Exceptioneur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est labourum。

把它分成两半：

```
$half = strlen($text) / 2; 
```

会让我了解`o`.`consequat`

如何在文本中间找到最近的句子分隔符（点）的位置？在这个例子中，它是 7 个字符之后`o`。

此文本还包含 HTML 代码。
我想在找出文本的半点时忽略 HTML，并忽略 html 属性中的点等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:56:07.610

看看[substr](http://co.php.net/manual/en/function.substr.php)、[strip_tags](http://co.php.net/manual/en/function.strip-tags.php)和[strpos](http://php.net/manual/en/function.strpos.php)。在`strpos`您找到下一个点的位置并使用 strip_tags 的帮助下，您可以从字符串中剥离所有 html 标签。

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborumt.';
$string = strip_tags($string);
$half = intval(strlen($string)/2);
echo substr($string, 0, strpos($string, '.', $half)+1); 
```

考虑到您必须确保在值之后存在一个点，`$half`否则输出不会是您想要的。

也许是这样的？

```
if (strpos($string, '.', $half) !== false)
    echo substr($string, 0, strpos($string, '.', $half)+1);
else
    echo substr($string, 0, $half) . '...'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T03:24:00.907

假设您的句子可以以句号以外的其他字符结尾，您可以看一下：

```
$s = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.';

// find center (rounded down)
$mid = floor(strlen($s) / 2);
// find range of characters from center that are not ?, ! or .
$r = strcspn($s, '.!?', $mid);

// remember to include the punctuation character
echo substr($s, 0, $mid + $r + 1); 
```

您可能需要对其进行一些调整，但它应该可以很好地完成工作。对于您正在涉足 NLP（自然语言处理）领域的更高级的东西，PHP 中也有可用的库：

[http://sourceforge.net/projects/nlp/](http://sourceforge.net/projects/nlp/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-06-13T10:43:06.783

```
function abbrevia($str, $maxChars) {    $limit=$maxChars;
    if (strlen($str)<=$maxChars) return $str;
    else while ($str[$limit]!=" " && $str[$limit]!="." && $str[$limit]!=";" && $str[$limit]!="," && $str[$limit]!="!" && $str[$limit]) $limit++;
    return substr($str,0,($limit))."...";
} 
```

你可以修改这个功能

# boolean - Java - 我认为我的布尔值由于某种原因默认为 true

> ID：10491860
> 
> 赞同：0
> 
> 时间：2012-05-08T02:38:33.797
> 
> 标签：boolean

我的刽子手程序有问题。当我运行它时，当你猜错字母时，包含 int 变量“lives”的标签应该会更新。但由于某种原因，它不是。我把它作为测试机制放在我的代码中，它甚至没有出现在这里。

```
 if (used[letter] = false) {
    System.out.println("test"); 
```

然而，当我把它放在这里..它确实有效..

```
if (finished == false) {
    boolean found = false;
    boolean www = false;
    System.out.println("test");
        if (used[letter] = false) { 
```

它几乎让我相信 used[letter] 默认情况下是正确的，而实际上不应该如此。变量在最顶部声明​​。有什么想法吗？

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import java.util.ArrayList; 

public class Hangman implements ActionListener {
JFrame frame;
JPanel stats = new JPanel();
JLabel currentWordLA = new JLabel("Current word:");
JLabel triedLettersLA = new JLabel("Tried letters:");
JLabel triesLeftLA = new JLabel("Tries remaining:");
private String[] wordList = {"computer","java","activity","alaska","appearance","article", 
   "automobile","basket","birthday","canada","central","character","chicken","chosen", 
   "cutting","daily","darkness","diagram","disappear","driving","effort","establish","exact", 
   "establishment","fifteen","football","foreign","frequently","frighten","function","gradually", 
   "hurried","identity","importance","impossible","invented","italian","journey","lincoln", 
   "london","massage","minerals","outer","paint","particles","personal","physical","progress", 
   "quarter","recognise","replace","rhythm","situation","slightly","steady","stepped", 
   "strike","successful","sudden","terrible","traffic","unusual","volume","yesterday" }; 
public String mysteryWord; 
public int lives;
private boolean finished = false;
private boolean won = false;
private Button a[];
public boolean used[] = new boolean[26];

public static void main (String[] args) {
    Hangman gui = new Hangman();
    gui.go();
    }

class myDrawPanel extends JPanel {
    public void paintComponent(Graphics g) {
        setBackground(Color.white);
        g.setColor(Color.gray);
     g.fillRect(50, 200, 150, 20);
     g.fillRect(90,20,10,200);
     g.fillRect(90,20,60,10);
     g.setColor(Color.black);
     g.fillRect(145,20,5,25);
        g.setColor(Color.green);
            if (lives < 6 )
            g.drawOval(132,45,30,30);
            if (lives < 5 )
            g.drawLine(147,75,147,100);
        if (lives < 4 )
            g.drawLine(147,100,167,133);
        if (lives < 3 )
            g.drawLine(147,100,127,133);
        if (lives < 2 )
            g.drawLine(147,75,167,85);
        if (lives < 1 )
            g.drawLine(147,75,127,85);

        StringBuffer guessed = new StringBuffer();
            for (int cl = 0; cl < mysteryWord.length(); cl++) {
            if (used[(int)mysteryWord.charAt(cl)-'a'])
            guessed.append(mysteryWord.charAt(cl));
           else
              guessed.append("*");
           }
            currentWordLA.setText("Current word: " + guessed.toString());

         if (lives < 1) {
            g.setColor(Color.white);
            g.fillRect(70, 200, 200, 30);
            g.setColor(Color.black);
            g.drawString(mysteryWord.toString(),75,230);
            Font fff = new Font("Helvetica",Font.BOLD,36);
            g.setFont(fff);

            g.setColor(Color.red);
            g.drawString("You lose!",200,100);

            //finished = true;
            }

         if (won) {
            Font fff = new Font("Helvetica",Font.BOLD,36);
            g.setFont(fff);

//                Color red=new Color.red
            g.setColor(Color.red);

            g.drawString("You Win!",200,100);
            //finished = true;
            }
  }
 }

public void go() {

///////////////////////DESIGN BEGIN//////////////////////////////////////////////
    frame = new JFrame("Hangman");
    JPanel topPanel = new JPanel();
    myDrawPanel noosePanel = new myDrawPanel();
    JPanel bottomPanel = new JPanel();
    JPanel scorePanel = new JPanel(new FlowLayout(FlowLayout.LEFT));

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout( new GridLayout( 2, 0) );
    bottomPanel.setLayout( new GridLayout( 0, 2) );
    scorePanel.setSize(20,100);

    noosePanel.setBorder(BorderFactory.createTitledBorder("Your progress.")); 
    topPanel.setBorder(BorderFactory.createTitledBorder("Your arsenal.")); 
    scorePanel.setBorder(BorderFactory.createTitledBorder("Your score.")); 
frame.add(topPanel);
frame.add(bottomPanel);
    bottomPanel.add(scorePanel);
    bottomPanel.add(noosePanel);

//Just the stats panel.
    JButton restart = new JButton("Reset");

        currentWordLA.setFont(new Font("Verdana", Font.PLAIN, 10));
        currentWordLA.setForeground(Color.black);
        triedLettersLA.setFont(new Font("Verdana", Font.PLAIN, 10));
        triedLettersLA.setForeground(Color.black);
        triesLeftLA.setFont(new Font("Verdana", Font.PLAIN, 10));
        triesLeftLA.setForeground(Color.black);
        restart.setFont(new Font("Verdana", Font.PLAIN, 16));
        restart.setForeground(Color.red);

            stats.setLayout(new GridBagLayout()); 
            GridBagConstraints c = new GridBagConstraints(); 
            c.gridx = 0; 
            c.gridy = 0; 
            c.insets = new Insets(20,0,0,0); 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(currentWordLA, c); 
            c.gridx = 0; 
            c.gridy = 1; 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(triedLettersLA, c); 
            c.gridx = 0; 
            c.gridy = 2; 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(triesLeftLA, c); 
            c.gridx = 0; 
            c.gridy = 3; 
            c.anchor = GridBagConstraints.LINE_START;
            stats.add(restart, c); 
            scorePanel.add(stats);
///////////////////////DESIGN END////////////////////////////////////////////// 
///////////////////////ALPHABET BEGIN//////////////////////////////////////////
    int i;
    StringBuffer buffer;
    a = new Button[26];
    topPanel.setLayout( new GridLayout( 4,0, 10, 10) );
    for (i = 0; i <26; i++) {
           buffer = new StringBuffer();
            buffer.append((char)(i+'a'));
            a[i] = new Button(buffer.toString());
            a[i].setSize(100,100);
            a[i].addActionListener( this );
          topPanel.add(a[i]);
        }
///////////////////////ALPHABET END//////////////////////////////////////////
//Just shows the entire window.                  
    frame.setSize(500, 500);
    frame.setResizable(false);
    frame.setVisible(true);
//////////////////////GAMEPLAY BEGIN////////////////////////////////////////
    lives = 6;
    triesLeftLA.setText("Tries remaining: " + lives);
    mysteryWord = wordGen();    

}

//Returns a random word from the wordList bank.
    private String wordGen() {
        return wordList[0 + (int)(Math.random() * ((63 - 0) + 1)) ]; //Make sure to set these to nonprinted chars eventually
    }

    public void consultWord(int letter) {
        if (finished == false) {
            boolean found = false;
        boolean www = false;
                if (used[letter] = false) {
                System.out.println("test");
                for (int cl = 0 ; cl < mysteryWord.length(); cl++) {
                if (mysteryWord.charAt(cl)==((char)(letter + 'a'))) {
                            found = true;
                        }
                    }
                if (found == false) {
                            lives = lives - 1;
                            triesLeftLA.setText    ("Tries remaining: " + lives);
                        }
                }

    used[letter] = true;

            for (int cl = 0; cl < mysteryWord.length(); cl++) {
            if (!used[(int)(mysteryWord.charAt(cl)) - 'a']){
                    www = true;
                }
            }
            if (www == false) {
                won = true;        
            }
            frame.repaint();
    }
    }

    public void actionPerformed( ActionEvent e) {
        int i;
        for (i = 0; i < 26; i++) {
            if (e.getSource() == a[i]) { 
            consultWord(i); }
  }
}       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:40:03.223

做到这一点：

```
if (used[letter] == false) {
    System.out.println("test"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:40:17.030

```
if (used[letter] = false) { 
```

您刚刚设置`used[letter]`为`false`. 尝试`==`

当然，为了避免这个错字，你不应该使用`==`，而是......

```
if (!used[letter]) { 
```

# class - 如何在 MATLAB 中定义一个使用单独文件（在@文件夹中）中定义的方法的类？

> ID：10491866
> 
> 赞同：4
> 
> 时间：2012-05-08T02:39:28.477
> 
> 标签：class, matlab, methods, directory-structure

我想在一个文件中定义一个类，并在其他几个文件中定义它的方法。

显然，这样做的方法是`@<ClassName>`在类文件夹中创建一个名为的子文件夹，并将所有方法文件放在所谓的“@-文件夹”中。

但是，一旦我创建了@-folder，我不确定在类定义文件中放置什么以使其了解@-folder 中的方法。

```
classdef myClass

    properties
        myProperty = 0;
    end

    methods
        %#
        %# --- What goes here? --- 
        %#
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:55:48.050

您声明函数签名时不使用`function`关键字，并**在末尾使用分号。**

```
classdef myClass

    properties
        myProperty = 0;
    end

    methods
        retval = my_function ( arguments );
    end
end 
```

然后 MATLAB 会去寻找一个名为`../@MyClass/my_function.m`.

# jsf - 减少 NUMBER_OF_VIEWS_IN_SESSION 会导致 ViewExpiredException

> ID：10491867
> 
> 赞同：0
> 
> 时间：2012-05-08T02:39:29.270
> 
> 标签：jsf, myfaces

我正在运行 myFaces 2.1.7 并拼命地试图减少我们 Web 应用程序的内存使用。基本上每个用户的会话大小会膨胀到我们无法处理的 10MB。

我尝试将以下内容添加到描述符：

```
 <context-param>
            <param-name>org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION</param-name>
            <param-value>3</param-value>
        </context-param> 
```

结果没问题，任何给定用户的会话大小都不会超过 1MB。但是，自从更改以来，很多用户都无法登录。发生的事情是在登录屏幕上抛出 ViewExpiredException ，我编写了一个自定义 viewExpiredException 类，将用户重定向回登录屏幕，所以基本上他们卡在登录屏幕循环中

```
 try to log in ---> ViewExpiredException thrown --->  Custom ViewExpiredHandler ----> Forward user to Login Screen
 <---------------------------------------------------------------------------------------------------------------- 
```

删除上面的上下文参数解决了这个问题！我的问题是一个-

```
 1) why is the viewException is thrown when the NUMBER_OF_VIEWS_IN_SESSION is reduced from its default value 
  2) is it possible to work around the issue by using the custom ViewExpiredHandler class ? how?
  3) am i doing something wrong in causing this issue? 
```

PS 在测试为什么会发生这种情况时，如果我打开例如 IE 并尝试登录一切正常，但是如果我尝试打开另一个浏览器（例如 chrome）并使用另一个用户名登录，则遇到用户报告的镜像问题不是能够登录。

同样遵循 myFaces wiki 的提示，我在描述符中添加了以下内容，但我认为它不会导致问题：

```
<context-param>
    <param-name>org.apache.myfaces.SERIALIZE_STATE_IN_SESSION</param-name>
    <param-value>false</param-value>
</context-param> 
```

## 更新：

正如我所建议的那样，`BalusC`我将其更改为`STATE_SAVING_METHOD`以`client`解决我们遇到的内存问题。立即所有 UAT 测试人员都报告说所有页面加载速度都急剧下降，所以我不得不恢复`STATE_SAVING_METHOD`设置为`server`.

由于我一直在尝试使用 的值`org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION`和当前值`6`（比默认的 20 个会话提高 70%），因此我不再遇到`ViewExpiredException`错误。（最初创建此问题的原因）

但在某种程度上，我正在玩俄罗斯轮盘赌。我真的不知道为什么将值`org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION`设置为 3/4/5 不起作用以及为什么 6 起作用，这让我无法解释它感到困扰。有没有人可以提供信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:16:34.730

在注意到浏览器的 BACK 按钮的使用如何导致 ViewExpired Exception 被抛出后，我最初问了这个问题。

我还将默认值 20 降低`org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION` 到 3，然后降低到 6（在尝试内存占用时），这加剧了问题。

写了一个 ViewExpired 异常处理程序后，我现在正在寻找一种方法来处理抛出异常时的一些事情，下面是我如何处理它：

```
 1 - `org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION ` value is 6

    2 - when ViewExpired Exception is thrown in ViewExpired Handler retrieve the request URL
            HttpServletRequest orgRequest = (HttpServletRequest) fc.getExternalContext().getRequest();

    3 - insert a boolean into user session (used as flag to be used below)
                Map<String, Object> sessionMap = FacesContext.getCurrentInstance()
                        .getExternalContext().getSessionMap();
                sessionMap.put("refreshedMaxSesion",true);

    4 - redirect back to URL retrieved in step 2
                   fc.getExternalContext().redirect(orgRequest.getRequestURI());

    5 - Since page is reloaded , see if the flag in step 3 exists and if so flag a notification to be shown to user and remove from session
                 if(sessionMap.containsKey("refreshedMaxSesion")){
            showPageForceRefreshed = true;
            sessionMap.remove("refreshedMaxSesion");
        }

    6 - I'm using Pines Notify to show subtle "FYI, this page way refreshed" type message".
           <h:outputText rendered="#{ myBean.showPageForceRefreshed }" id="PageWasRefreshedInfoId" >
                <script type="text/javascript">
                    newjq(document).ready(function(){
                        newjq.pnotify({
                            pnotify_title: 'Info',
                            pnotify_text: 'Ehem, Page was Refreshed.' ,
                            pnotify_mouse_reset: false,
                            pnotify_type: 'info',
                            pnotify_delay: 5000
                        });
                    });
                </script>
            </h:outputText> 
```

# iphone - 具有多个控制器的 iPhone 应用程序

> ID：10491870
> 
> 赞同：0
> 
> 时间：2012-05-08T02:39:41.663
> 
> 标签：iphone, objective-c

我正在开发一个带有登录屏幕（UIViewController）的应用程序（使用 Storyboard），它将经过身份验证的用户带到 Tab 应用程序（UITabbarController）。Tab Bar Item 之一基于我为其添加了 UINavigationController 的 Table View Controller。为了开发表格屏幕，我正在关注 iOS 5 第 2 部分（Bird Sighting Example）。我已经成功创建了除此表格部分之外的整个应用程序。我在 AppDelegate 中感到困惑，因为我的根视图控制器在 BirdSighting 示例中登录屏幕并且在大多数示例中，应用程序从 Navigation View Controller 或 Tabbar Controller 启动。我正在粘贴我的 AppDelegate 方法。

这是运行时错误，我收到“由于未捕获的异常‘NSInvalidArgumentException’而终止应用程序，原因：‘不支持推送导航控制器’”

这是我的应用程序流程登录屏幕-> 选项卡应用程序 Tab1。显示详细信息选项卡 2。查看工单（TicketMasterViewController）->工单详情（TicketDetailViewController）。

我是否需要初始化 AppDelegate 中的所有控制器以及 TicketMasterViewController 的 objectAtIndex 应该是什么。谢谢你的时间。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NavigationViewController *vc4=[[NavigationViewController alloc]init];

    UINavigationController *navigationController=[[UINavigationController alloc]initWithRootViewController:vc4];
    TicketMasterViewController *firstViewController=(TicketMasterViewController *)[[navigationController viewControllers] objectAtIndex:0];
    TicketDataController *aDataController=[[TicketDataController alloc] init];
    firstViewController.dataController=aDataController;  

    // Override point for customization after application launch.
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:09:32.150

您可以尝试删除上述代码，该应用程序可能会运行。如果您使用情节提要并假设您已如上所述设置此视图控制器层次结构，则不需要此代码。在这里添加代码的唯一原因是将数据（MVC 中的模型）附加到视图控制器。

# ruby-on-rails - RVM Bundle 安装缺少 Gem 错误

> ID：10491871
> 
> 赞同：6
> 
> 时间：2012-05-08T02:39:42.070
> 
> 标签：ruby-on-rails, rvm, bundler

我有点被这个问题困住了。我目前正在尝试在共享主机（Site5）上托管 Rails3/Ruby1.9.3 应用程序。他们只为 Ruby 提供 1.8.7。因此，我尝试安装 RVM，以便可以使用 Ruby 1.9.3。成功安装 RVM 后，运行 'bundle install'，我遇到了这个错误：

> 错误：未安装 Gem 捆绑器，`gem install bundler`请先运行。

我已经尝试过运行“gem install bundler”。当我再次运行命令时，它说它已安装，显示相同的错误。当我使用：'bundle -v'时也会出现这个错误。但是，“哪个捆绑包”说：

> /home/MYUSER/.rvm/bin/bundle

这是'rvm info'的输出：

```
ruby-1.9.3-p194:

  rvm:
    version:      "rvm 1.13.4 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "1 hour 23 minutes 15 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p194"
    date:         "2012-04-20"
    platform:     "x86_64-linux"
    patchlevel:   "2012-04-20 revision 35410"
    full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]"

  homes:
    gem:          "/home/MYUSER/.rvm/gems/ruby-1.9.3-p194"
    ruby:         "/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194"

  binaries:
    ruby:         "/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
    irb:          "/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
    gem:          "/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
    rake:         "/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194/bin/rake"

  environment:
    PATH:         "/usr/local/jdk/bin:/home/MYUSER/.rvm/gems/ruby-1.9.3-p194/bin:/home/MYUSER/.rvm/gems/ruby-1.9.3-p194@global/bin:/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194/bin:/home/MYUSER/.rvm/bin:/home/MYUSER/perl5/bin:/usr/kerberos/bin:/usr/lib/courier-imap/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/home/MYUSER/bin"
    GEM_HOME:     "/home/MYUSER/.rvm/gems/ruby-1.9.3-p194"
    GEM_PATH:     "/home/MYUSER/.rvm/gems/ruby-1.9.3-p194:/home/MYUSER/.rvm/gems/ruby-1.9.3-p194@global"
    MY_RUBY_HOME: "/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194"
    IRBRC:        "/home/MYUSER/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

我尝试过的：我尝试了此[链接](https://stackoverflow.com/questions/8990828/rvm-bundle-install-missing-gem-error-even-though-gem-is-installed)中的建议，但它不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T04:29:21.220

```
gem uninstall bundler && rvm @global do gem install bundler && bundle -v 
```

bundler 默认情况下由 rvm 安装到 @global gemset 中，该 gemset 也被混合到默认值中。那个安装有什么味道，但是如果这一切都不好的话，那组命令应该可以修复它。你的 rvm 输出看起来并不疯狂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:44:47.303

尝试：

```
rvm all do gem install bundler 
```

这将在当前的 ruby​​ 中安装 bundler gem。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T19:10:37.873

如果您也在使用此解决`rbenv`方案

```
$ gem uninstall rbenv
    (many dependencies will be unmet. Simply answer 'y')
$ rbenv rehash
$ gem install rbenv
$ rbenv rehash 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T23:31:40.340

如果您执行以下操作，则捆绑程序可执行文件似乎没有安装在 ./bin 目录中

```
bundle install --binstubs 
```

这看起来像是捆绑程序中的一个 BUG！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T03:05:23.937

对于我的设置，将运行 apache 的用户添加到 rvm 组工作

```
usermod -a -G rvm www-data 
```

# android - Android：从内部存储器播放音频

> ID：10491874
> 
> 赞同：1
> 
> 时间：2012-05-08T02:39:51.257
> 
> 标签：android

我将把音频文件下载到设备的内存中。稍后我想用 MediaPlayer 播放这个音频。在开发者网站上的“媒体播放”指南中，它提到了使用“URI”。有什么办法可以只使用内部存储器中文件的文件名吗？如何播放保存的音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:38:42.283

To get the URI from a file path [this](https://stackoverflow.com/questions/3004713/get-content-uri-from-file-path-in-android) may help:

it looks like

```
Uri.parse(new File("/sdcard/cats.jpg").toString()) should do the trick. 
```

# nhibernate - NHibernate 3.3 和 SysCache

> ID：10491876
> 
> 赞同：16
> 
> 时间：2012-05-08T02:39:59.383
> 
> 标签：nhibernate, syscache

当前版本的 SysCache 似乎不适用于 NHibernate 3.3。我替换了我的 web/bin 目录中的 NHibernate dll，并保持 SysCache dll（适用于 3.2）不变。现在，当 IIS 尝试进行预绑定时，它会加载 SysCache dll 并尝试将其绑定到 NHibernate 3.2.0.4000 并失败。

> [FileLoadException：无法加载文件或程序集“NHibernate，版本=3.2.0.4000，文化=中性，PublicKeyToken=aa95f207798dfdb4”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）] System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔 throwOnError，布尔 ignoreCase，布尔反射，StackCrawlMarkHandle stackMark，布尔 loadTypeFromPartialName，ObjectHandleOnStack 类型）+0
> System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔 throwOnError，布尔ignoreCase，布尔反射，StackCrawlMark 和 stackMark，布尔 loadTypeFromPartialName) +95
> System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark) +54 System.Type.GetType(String typeName) +50 NHibernate.Util.ReflectHelper.TypeFromAssembly(AssemblyQualifiedTypeName name, Boolean throwOnError) +338
> NHibernate.Cfg.SettingsFactory.CreateCacheProvider（IDictionary`2 属性）+175
> 
> [HibernateException: 无法实例化 CacheProvider: NHibernate.Caches.SysCache.SysCacheProvider, NHibernate.Caches.SysCache]
> NHibernate.Cfg.SettingsFactory.CreateCacheProvider(IDictionary 2 属性) +3449 NHibernate.Cfg.Configuration.BuildSettings() +29 NHibernate.Cfg .Configuration.BuildSessionFactory() +44`2 properties) +256
> NHibernate.Cfg.SettingsFactory.BuildSettings(IDictionary`

如果我注释掉 web.config 中的配置，一切都很好：

```
<property name="cache.use_second_level_cache">true</property>
<property name="cache.use_query_cache" >true</property>
<property name="cache.provider_class">NHibernate.Caches.SysCache.SysCacheProvider, NHibernate.Caches.SysCache</property> 
```

[NHibernate Contrib](http://sourceforge.net/projects/nhcontrib/files/NHibernate.Caches/)上的 NHibernate 缓存下载站点没有最新版本的下载。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-16T21:40:52.687

一种不同且稍微简单的方法是覆盖对`3.2`您的 NHibernate 版本的引用，`web.config`或者`app.config`使用对所需版本的引用，`3.3`如下所示：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="NHibernate" culture="neutral" publicKeyToken="aa95f207798dfdb4" />
      <bindingRedirect newVersion="3.3.0.4000" oldVersion="0.0.0.0-3.3.0.4000" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

我自己刚刚尝试过，它按预期工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T03:21:27.447

问题可能是 SysCache Dll 是使用 NHibernate 3.2.0 构建的，它与 NHibernate 3.3.0 不兼容。解决此问题的一种简单方法是仅从[https://nhcontrib.svn.sourceforge.net/svnroot/nhcontrib/trunk/src/NHibernate.Caches](https://nhcontrib.svn.sourceforge.net/svnroot/nhcontrib/trunk/src/NHibernate.Caches)检出 nhibernate 配置项目的主干或缓存解决方案， 更新 NHibernate 参考以使用您正在使用的版本，然后重建并使用最新的缓存 dll。由于它是一个小升级，因此不需要任何代码更改，您应该是安全的。

试试看，让我知道它是怎么回事。

# asp.net - 将链接按钮动态添加到 gridview。不开火。

> ID：10491880
> 
> 赞同：0
> 
> 时间：2012-05-08T02:40:33.143
> 
> 标签：asp.net, vb.net, gridview, postback, linkbutton

我正在为gridview中的每个单元格动态添加一个链接按钮。添加按钮有效，但偶数处理程序的触发无效。我需要链接按钮来调用函数并传递一些数据进行处理。我的代码如下。我从网站上找到了让我走到这一步的解决方案。目前，gridview 加载带有蓝色按钮的单元格。当您单击它们时，它们会返回纯文本并且不会调用任何函数。

```
Private Sub gv_datasource_options_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gv_datasource_options.RowDataBound
    Try
        If e.Row.RowType = DataControlRowType.DataRow Then
            For Each c As TableCell In e.Row.Cells
                If Len(c.Text) > 0 And c.Text <> "&nbsp;" Then
                    Dim v_lb As New LinkButton()
                    v_lb.Text = c.Text                        
                    AddHandler v_lb.Click, AddressOf add_datasource
                    v_lb.Attributes.Add("AutoPostback", "True")
                    v_lb.Attributes.Add("runat", "Server")
                    v_lb.Attributes.Add("AutoEventWireup", "True")
                    v_lb.CommandName = "NumClick"
                    v_lb.CommandArgument = e.Row.Cells(0).ToString & "|" & gv_datasource_options.HeaderRow.Cells(e.Row.Cells.GetCellIndex(c)).Text
                    c.Controls.Add(v_lb)
                    Dim sm As ScriptManager = ScriptManager.GetCurrent(Me)
                    sm.RegisterAsyncPostBackControl(v_lb)
                End If
            Next
        End If
    Catch ex As Exception
        cl_Error.cl_Erorr.LogError(ex, txt_userid.Value, ex.ToString)
    End Try
End Sub
Private Sub add_datasource(sender As Object, e As CommandEventArgs)
    Try
        hf_datasource_id.Value = Left(e.CommandArgument.ToString(), (Len(e.CommandArgument.ToString) - InStr(e.CommandArgument.ToString, "|")))
        hf_datasource_column.Value = Left(e.CommandArgument.ToString(), (Len(e.CommandArgument.ToString) - InStr(e.CommandArgument.ToString, "|")))
        hf_datasource_tableid.Value = tv_content.SelectedValue
        p_datasource.Visible = False
    Catch ex As Exception
        cl_Error.cl_Erorr.LogError(ex, txt_userid.Value, ex.ToString)
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:49:05.630

尝试使用 GridView 的 RowCommand 事件，而不是将 Event ("add_datasource") 添加到 Linkbutton。您肯定能够获取 Gridview 的行命令事件上的链接按钮冒泡的事件（以及命令名和命令参数）

# jira - JIRA账号登录困难

> ID：10491882
> 
> 赞同：0
> 
> 时间：2012-05-08T02:40:50.007
> 
> 标签：jira

当我尝试登录 JIRA 系统时，系统告诉我“您没有登录权限”。

我确定我的登录凭据输入正确，否则错误消息应该是“抱歉，您的用户名和密码不正确 - 请重试。”

我已重置密码，但问题仍然存在。我需要请 JIRA 管理员授予任何权限吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:02:52.287

使用典型设置，您需要您的 JIRA 管理员来确保您的帐户属于该`jira-users`组。

如果您的组织使用 Atlassian Crowd 进行单点登录，请通过登录另一个 Crowd 连接的应用程序来确保这不是 Crowd 问题。

# php - 拆分字符串的正则表达式问题

> ID：10491883
> 
> 赞同：1
> 
> 时间：2012-05-08T02:40:52.503
> 
> 标签：php, regex

有另一个简短的正则表达式问题。

基本上我有一个这样的字符串：

`cn=WSG-AP-LO-COMMON-SITE-APPS,ou=ZFD,ou=SVC,ou=IGH`

我试图`WSG-AP-LO-COMMON-SITE-APPS`从那个字符串中获取。

我正在尝试这样的事情：

`preg_match('/[cn=.]+.*[^,.*]+$/', $info[0]['groupmembership'][0], $matches);`

`print_r($matches);` 返回：

```
Array
(
    [0] => cn=WSG-AP-LO-COMMON-SITE-APPS,ou=ZFD,ou=SVC,ou=IGH,ou=WM,ou=SWQ,o=HEALTH
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:43:26.747

尝试这个：

```
preg_match("/cn=([^,]+)/", $string, $match); 
$match[1]; //WSG-AP-LO-COMMON-SITE-APPS 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T02:43:29.303

与任何简单分隔的字符串一样，这最容易通过分隔分隔符来完成：首先是逗号，然后是`=`：

```
$parts = explode(",", "cn=WSG-AP-LO-COMMON-SITE-APPS,ou=ZFD,ou=SVC,ou=IGH");
$cn = $parts[0];
list($component, $value) = explode($cn);
echo $value; 
```

如果你真的只想要第一部分，你可以用另一个缩短它`list()`：

```
list($cn) = explode(",", "cn=WSG-AP-LO-COMMON-SITE-APPS,ou=ZFD,ou=SVC,ou=IGH");
list($component, $value) = explode("=", $cn);
echo $value; 
```

但是如果你真的想用正则表达式来做，它应该是这样的：

```
preg_match('/cn=([^,]+)/',  "cn=WSG-AP-LO-COMMON-SITE-APPS,ou=ZFD,ou=SVC,ou=IGH", $matches);
var_dump($matches);

array(2) {
  [0]=>
  string(29) "cn=WSG-AP-LO-COMMON-SITE-APPS"
  [1]=>
  string(26) "WSG-AP-LO-COMMON-SITE-APPS"
} 
```

`([^,]+)`将所有内容匹配到下`,`一个`cn=`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T02:44:27.260

这匹配 cn= 之后的所有内容，直到出现逗号。

```
preg_match('/cn=([^,]+)/i', 'cn=WSG-AP-LO-COMMON-SITE-APPS,ou=ZFD,ou=SVC,ou=IGH', $result);

var_dump($result); 
```

输出：

```
Array
(
    [0] => cn=WSG-AP-LO-COMMON-SITE-APPS
    [1] => WSG-AP-LO-COMMON-SITE-APPS
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T02:57:57.957

请原谅我使用 PowerShell，但我认为 RegEx 应该是相同的：

```
([Regex]::Matches("cn=WSG-AP-LO-COMMON-SITE-APPS,ou=ZFD,ou=SVC,ou=IGH", "cn=([^,]+)"))[0].Groups[1] 
```

# mysql - 无法仅使用代码连接到 mySql 数据库

> ID：10491886
> 
> 赞同：1
> 
> 时间：2012-05-08T02:42:15.043
> 
> 标签：mysql, delphi, devart, mydac

我在这里搜索但没有看到答案。

我正在使用Delphi2010。我使用 Devart Mydac 连接到 mySql 数据库。当我设置服务器、数据库、名称、传递组件时，它连接没问题。

但是，当我尝试仅使用代码连接时，它会出错。

```
begin
    MyConnection1.Server:='MyServer';
    MyConnection1.Database:='MyDatabase';
    MyConnection1.Username:='MyUserName';
    MyConnection1.Password:='MyPassword';
    MyConnection1.Connected:= True;
    MyQuery1.Active:= True;
end; 
```

> 带有消息的异常类 EMySalExcption“#28000 用户'username@00.00.00.00'（使用密码：YES）'的访问被拒绝。

为什么code方法会报错？

感谢您的帮助和耐心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:59:18.043

我会发表评论，但我认为我还没有能力发表评论。但我同意 Marco，我对这种语言或产品没有经验，但我想知道，数据库是否在远程机器上？首先尝试将服务器设置为 IP 并查看是否有效。

我在网上找到了这个配置并删除了一些东西以进入核心

```
begin
  MyConnection1.LoginPrompt := false;
  MyConnection1.Username := 'test';
  MyConnection1.Password := 'test';
  MyConnection1.Database := 'test';
  MyConnection1.Server := '127.0.0.1';
  MyConnection1.Port := 3306;
  MyConnection1.Connect;
end; 
```

我注意到的一件事是它禁用了 LoginPrompt，而你没有，它也有一个端口。我会尝试设置 ip 和端口号，如果可行，则尝试仅设置端口号。如果这些都不起作用，请尝试此处的完整实现，然后将其取出并将服务器设置回主机名

```
begin
  MyConnection1.Pooling := true;
  MyConnection1.PoolingOptions.MinPoolSize := 1;
  MyConnection1.LoginPrompt := false;
  MyConnection1.Options.Charset := 'utf8';
  MyConnection1.Options.Direct := true;
  MyConnection1.Options.UseUnicode := true;
  MyConnection1.Username := 'test';
  MyConnection1.Password := 'test';
  MyConnection1.Database := 'test';
  MyConnection1.Server := '127.0.0.1';
  MyConnection1.Port := 3306;
  MyConnection1.Connect;
end; 
```

引用自[http://forums.devart.com/viewtopic.php?t=12035](http://forums.devart.com/viewtopic.php?t=12035)

# objective-c - CCCryptor 3DES解密的前8个字节总是损坏？

> ID：10491898
> 
> 赞同：1
> 
> 时间：2012-05-08T02:44:38.633
> 
> 标签：objective-c, ios, cryptography

最近我正在实现一个使用 3DES 的加密算法。但是，我发现4096数据块的前8个字节总是损坏。但可以肯定的是，它可以在java中正确解密。以下是我的代码：

```
+ (void) DecryptBy3DES:(NSInputStream*)strmSrc Output:(NSOutputStream*)strmDest CryptoRef:(CCCryptorRef)tdesCrypto
{       
    size_t  dataOutMoved;
    uint8_t inputBuf[BlockSize];
    uint8_t outputBuf[BlockSize];

    CCCryptorStatus cryptStatus;
    int iBytesRead = 0;
    int iBuffUsed = 0;

    while ( (iBytesRead = [strmSrc read:inputBuf maxLength:BlockSize]) > 0 ) 
    {
        cryptStatus = CCCryptorUpdate(tdesCrypto, &inputBuf, iBytesRead, &outputBuf, BlockSize, &dataOutMoved);
        assert(cryptStatus==noErr);
        [strmDest write:outputBuf maxLength:dataOutMoved];
    }

    CCCryptorReset(tdesCrypto, nil);
} 
```

其中 BlockSize 为 4096。

我重用了 CCCryptoRef tdesCrypto 来解密几个块。第一个要解密的块是正确的，但后面的块在开始时都有损坏的字节。我还尝试重置 CCCryptoRef，这似乎是徒劳的。

我真的很困惑。有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:52:54.207

Here is my CryptoRef:

```
CCCryptorCreateWithMode(kCCEncrypt, kCCModeCBC, kCCAlgorithm3DES, ccNoPadding, [abIV bytes], [abKey bytes], [abKey length], nil, 0, 0, kCCModeOptionCTR_BE, &cryptRef); 
```

Since I use CBC mode and ccNoPadding, there is no need to call `CCCryptorFinal()`. Instead, when I finish one operation (i.e. finish encrypt/decrypt one file, etc.), I should call `CCCryptorReset()` to reset the CryptoRef's iv to initial state before next operation. Or the first block of data will be defect.

Thanks for comments and sorry for left this issue behind. I hope this could help people who encountered the same problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T21:03:38.783

忘记我之前的答案，我删除了它。您在缓冲区中获得“错误字节”的原因是它们是您之前尝试解密的缓冲区的最后 8 个字节的纯文本。

您***必须***`CCCryptorFinal()`在最后一次调用 后立即调用`CCCryptorUpdate()`。这将在写入纯文本的最后几个字节之前删除填充字节。因为密码内部不知道最后一个缓冲区的最后一个块包含填充字节，所以它还不能将数据写入输出缓冲区。

请不要在您的 while 循环中破坏或重置 CCCryptor。只需在`CCCryptorFinal()`之后添加调用，不要忘记将结果输出也写入流。之后您可以重置 CCCryptor。

我在这里假设（猜测）使用 CBC 模式和 PKCS#5 填充的 DESede。请参阅[维基百科](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)以了解我在说什么。

# jquery - li 变成了“0”。在 IE 中，当包含 div 被隐藏并使用 jQuery 重新显示时

> ID：10491905
> 
> 赞同：2
> 
> 时间：2012-05-08T02:45:28.273
> 
> 标签：jquery, internet-explorer, html-lists, show-hide

li 变成“0”的奇怪问题。在 IE 中：

请在您选择的浏览器（不包括IE）中查看以下jsfiddle，然后在IE中查看。

[http://jsfiddle.net/A8Z4k/1/](http://jsfiddle.net/A8Z4k/1/)

复制步骤：
1\. 点击隐藏。
2\. 单击显示。

结果：列表项变为：

```
0.Test 1   
0.Test 2   
0.Test 3   
0.Test 4 
```

所以这里有2个div在起作用。一个隐藏在负载上。单击“隐藏”链接时，它会隐藏包含列表的 div，并显示包含“RAH RAH”的 div。当单击“显示”链接时，会发生相反的情况，重新显示包含 0\. 的原始 div，并且隐藏“RAH RAH” div。

注意：这只发生在有 2 个 div 正在播放时，一个隐藏，另一个显示。如果我删除第二个 div，我可以整天隐藏和显示，并且列表项不会以 0\. 出现。

解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:05:40.320

对我来说，解决方案来自：[有序列表显示 IE9 中的所有零](https://stackoverflow.com/questions/5584500/ordered-list-showing-all-zeros-in-ie9)

这个对我有用：

1.  显示元素：

    ```
     el.show(); 
    ```

2.  然后：

    ```
     setTimeout(function(){
         $("ol").css("counter-reset", "item")
     }, 1); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:58:06.347

这行得通吗？

```
 $('#show').click( function() {
    $('#hide-div').css('list-style-type','lower-roman');
    $('#hide-div').show();
    $('#show-another-div-on-top').hide(); 
```

});

抱歉，我无法为您测试...

# heroku - 如何在 heroku 数据库之间迁移数据？

> ID：10491910
> 
> 赞同：1
> 
> 时间：2012-05-08T02:46:34.153
> 
> 标签：heroku

我在“heroku”中有一个当前的“暂存”数据库，并希望将其迁移到“生产”数据库中？我怎么能这样做？我查看了他们的水龙头应用程序，但不太清楚它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:33:48.263

两种选择，

1.  PGBackups - [https://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups) - 使用你的临时数据库来备份它，然后恢复到你的生产数据库。查看该页面中的 Transfers 子标题。

2.  `heroku db:pull`点击和- 您将使用`heroku db:push`它来将暂存数据库拉到本地计算机（无论您在本地使用什么数据库），然后将其推送到您的生产应用程序。

如果您正在处理大型数据集，那么选项 1 是最好的选择。`--tables <tablenames>`如果您使用在某些情况下有用的参数，选项 2 还允许您仅推送特定表。

# magento - Magento eav 实体设置失败 - 无法创建表

> ID：10491912
> 
> 赞同：4
> 
> 时间：2012-05-08T02:46:36.790
> 
> 标签：magento, entity-attribute-value

我正在尝试在 Magento 1.7.0.0 中设置一个自定义实体，遵循[alan Storms 关于它的文章](http://http://alanstorm.com/magento_advanced_orm_entity_attribute_value_part_1 "艾伦风暴关于它的文章")，但是使用这个简单的安装脚本，它告诉我“无法创建表：eavblog_posts”。

我的安装脚本很简单，看起来像这样：

```
<?php
$installer = $this;
$installer->addEntityType('complexworld_eavblogpost',
Array(
'entity_model'=>'complexworld/eavblogpost',
'attribute_model'=>'',
'table'=>'complexworld/eavblogpost',
'increment_model'=>'',eav/entity_increment_numeric
'increment_per_store'=>'0'
));
$installer->createEntityTables(
$this->getTable('complexworld/eavblogpost')
); 
```

我怎样才能让我的安装脚本工作？这是一个已知的 magento 错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T08:32:14.697

就我而言，问题是由于`createEntityTables()`Magento 1.7/1.12 中的方法存在错误

在[他们对这个错误报告的回答中](http://www.magentocommerce.com/bug-tracking/issue?issue=13854)，Magento 团队建议从 lib/Varien/Db/Adapter/Pdo/Mysql.php 中注释掉第 417 行：

```
$this->_checkDdlTransaction($sql); 
```

相反，我建议遵循[Zachary Schuessler 帖子中的建议](http://zaclee.net/magento/custom-module-setup-createentitytables-method-fails)，或者

1）将该方法复制`createEntityTables()`到您自己的文件（Your/Module/Model/Resource/Setup.php）并注释掉事务方法...

或者

2）编写抽象查询以保留事务：

```
// Example of MySQL API
/**
 * Create table array('catalog/product', 'decimal')
 */
$table = $installer->getConnection()
    ->newTable($installer->getTable(array('catalog/product', 'decimal')))
    ->addColumn('value_id', Varien_Db_Ddl_Table::TYPE_INTEGER, null, array(
        'identity'  => true,
        'nullable'  => false,
        'primary'   => true,
        ), 'Value ID')
    ->addColumn(... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:31:36.390

首先，这一行是错误的：

```
'increment_model'=>'',eav/entity_increment_numeric 
```

它需要在引号内。

最新版本的安装程序功能中存在一些错误。

使用 phpMyAdmin 或类似工具进入您的数据库并检查是否已存在任何表。如果有，请删除它们。同时删除模块在 core_resource 中的记录。

再试一次。

然后这里有一个步骤我不记得了（有用，我知道，但我今晚会试着记住它并编辑它）。

创建表后，如果您查看类型表（int、text char 等）的外键分配，您会注意到 entity_id 字段正在查看 eav_entity.entity_id。这需要更改为您的 eavblogpost_entity 表。

您可能还注意到 eavblogpost_entity.entity_id 字段是 INT(11)，而所有外键引用都是 INT(10)。手动将 eavblogpost_entity.entity_id 字段更改为 INT(10)。

解决所有这些问题的唯一方法是用一个有效的方法覆盖 createEntityTables() 函数，或者手动创建所有表。这是一个很好的资源，可以帮助您完成这部分[http://incho.net/ecommerce/magento/creating-an-eav-based-models-in-magento/](http://inchoo.net/ecommerce/magento/creating-an-eav-based-models-in-magento/)

在你去的时候把所有这些弄得一团糟，我相信你会偶然发现我已经忘记的你必须做的步骤。对不起！

# embedded - 嵌入式领域的“软复位”和“硬复位”有什么区别？

> ID：10491919
> 
> 赞同：4
> 
> 时间：2012-05-08T02:48:18.057
> 
> 标签：embedded, cpu-architecture, reset, motherboard, chipset

在我看来： **软复位**：从复位向量启动。 **硬复位**：拉cpu的电平。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:52:29.427

硬复位当然意味着整个 CPU 芯片及其所有外围设备都被复位。造成这种情况的原因可能有很多：外部拉复位引脚、时钟故障、片上低电压检测、看门狗、非法指令陷阱等。

软复位可能意味着返回到复位向量的“脏”分支，其中复位向量恢复所有 CPU 内核寄存器，包括堆栈。我会说这是非常有问题的做法，我不确定它会有什么好处。主要问题是当您执行此操作时，所有 MCU 外围硬件寄存器都不会重置为默认值。几乎不可能不对所有此类寄存器的复位状态做出任何假设，尤其是因为现在平均 MCU 配备了 1000 多个这样的寄存器。因此，通过这种软和脏重置，您很可能最终会出现这样的行为：

`subtle intermittent bugs <= my program <= complete haywire`

更牵强的是，软复位可能意味着由软件引起的复位。在这种情况下，它可能会将错误的值写入看门狗寄存器以强制复位，或者无法刷新看门狗。或者它可能是执行非法指令。这些很可能会导致整个芯片完全复位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T03:39:45.233

我假设这可以从芯片到芯片。硬复位可能被认为是设备（引脚、球等）上的复位线，当沿某个方向拉动时，会将部分或全部芯片置于复位状态。软复位，可以简单到分支到零或分支到复位向量，或者它可能是您写入的寄存器或导致硬复位的寄存器中的位，或者可能是接近硬复位的东西，想象一下芯片内部层，硬复位击中外层，软复位击中某些内层可能不是整个芯片。例如，您可能不想从 pcie 总线上掉下来，所以不要管它。通常，例如 jtag（或它的某些部分）不应该被任何一个重置所触及。当软件拉出一条复位线时它会自杀，谁来释放那个复位？硬件方面的东西，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-26T10:00:23.187

在 Intel 平台上，软复位（写入`0x4`端口`0xcf9`）是 CPU 热复位，即 CPU 运行时的复位。热复位（写入`0x6`端口`0xcf9`）是没有电源循环的主机复位，硬复位（写入`0xe`端口`0xcf9`）是带有电源循环的主机复位。全局重置是 Intel ME 的重置与主机重置相结合。

冷 CPU 复位是在`RESET#`最初向 CPU 供电时断言。CPU 热复位是在V_cc 和 CLK 保持在指定的操作限制时发生`INIT#`或发生。`RESET#`如果您只是`INIT#`这样，它只会刷新 BTB 和 TLB，仅初始化整数寄存器并进入重新启动 MSROM 例程（不再仅`0xFFFFFFF0`在 UEFI 系统上）。如果你`RESET#`那么它刷新缓存以及[初始化 FP 寄存器](https://www.intel.com/content/dam/www/public/us/en/documents/datasheets/atom-c2000-microserver-datasheet.pdf) [，而不仅仅是整数寄存器](http://datasheets.chipdb.org/Intel/x86/Pentium/Embedded%20Pentium%AE%20Processor/INITCONF.PDF)。这是寄存器的初始状态，我认为是在微码开始之前。如果您同时断言`INIT#`和`RESET#`一起然后它也会做一个 BIST。我认为在这种情况下，它又重新执行了 BSP 选择过程。MP初始化协议，因为[在BIST完成后将BIPI发送给all-including-self](https://xem.github.io/minix86/manual/intel-x86-and-64-manual-vol3/o_fe12b1e2a880e0ce-309.html)，并且我认为当没有BIST时它也会执行BSP选择，即只是`RESET#`在暖/冷时（[这](https://patents.google.com/patent/US5724527A/en)谈到在一个之后发送一个BIPI复位时可选 BIST）。在现代英特尔 CPU 上，我认为`RESET#`每个插槽一个并重置所有内核，并与 PCH 绑定`PLTRST#`，而`INIT`PCH 在 PCIe [VLW](https://stackoverflow.com/questions/59919707/can-the-a20-line-still-be-masked-off-on-haswell-and-successors/66362335#66362335)事务中通过 DMI 发送，并逐个内核分配给指定的内核在 QPIPNCB 等 CPU 寄存器中配置。

热复位是`PLTRST#`PCH 对许多组件的断言，系统停留在 S0 中。在硬重置时，系统循环`SLP_S0#`到`SLP_S5#`然后循环`SLP_S5#`到`SLP_S0#`最终到 S0 C0（`PLTRST#`最终被取消断言时），这将导致 DRAM 被重置，这`PLTRST#`本身不会这样做。`SLP_S0 - S5#`高表示 CPU 在 S0 C0。`SLP_S0#`low 表示在 S0 Cx 中，`SLP_S0#`low`SLP_S3#`表示在 S3 中，`SLP_S0#`low表示在 S4 中，以此类推`SLP_S3#`。`SLP_S4#`

我认为冷重置是当系统从[G3 启动并需要通过 `PCH_RTCRST#`并`EC_RSMRST#`](https://drive.google.com/file/d/1qlXssF-b_RxpOr5vrCKR3-Y4CyTmcCpz/view)返回到 G3 之前的状态之前，它可能是 DeepSx、S5 或 S4。但是您会看到人们将[硬重置称为冷重置](https://chromium.googlesource.com/chromiumos/third_party/coreboot/+/broadwell_fsp/src/soc/intel/broadwell/reset.c)，而将冷重置称为冷启动。我可能会使用硬重置和冷*启动*这两个术语。热启动将是 S3 恢复，而冷启动将从 S4/S5/G3 启动，也许您可​​以将所有 S4/S5 都设为硬启动，将 G3 设为冷启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T16:30:40.563

它可以表示系统设计者想要的任何含义。没有通用的定义。例如，RAM 的内容可以通过软复位来保持，而不是通过硬复位，或者它可能只是外部硬件复位信号和软件复位指令之间的差异。

# ios - Xcode 4.3.2 IBAction按钮线程1：断点1.1错误

> ID：10491921
> 
> 赞同：3
> 
> 时间：2012-05-08T02:48:38.470
> 
> 标签：ios, xcode

所以我在 IBAction 函数中收到线程错误 Thread 1: Breakpoint 1.1。代码运行没有错误，但是当我单击模拟器上的按钮时，模拟器崩溃并产生断点错误。受影响的代码是：

```
-(IBAction)ChangeView:(id)sender{
SecondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" 
bundle:nil];
[self.view addSubview:SecondView.view];} 
```

我在同一个班级还有其他三个 IBAction 可以正常工作。我也在 h 文件中定义了。

```
-(IBAction)ChangeView:(id)sender; 
```

我对线程错误没有太多经验，并且在尝试解决此问题时感到有些沮丧。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T19:13:55.933

听起来您在函数上设置了断点。按照有关[此 Stack Overflow 问题](https://stackoverflow.com/questions/1665744/xcode-remove-all-breakpoints)的说明删除断点。

我不认为你的模拟器崩溃了，我认为执行只是暂停。您应该能够通过点击播放按钮或在控制台中输入“c”来继续。

# android - 以编程方式在列表视图中设置文本视图的边距/填充

> ID：10491922
> 
> 赞同：21
> 
> 时间：2012-05-08T02:48:38.160
> 
> 标签：android, padding, margin

这是 main_alllatestnews.xml 的一部分

```
<LinearLayout
    android:id="@+id/layout_content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/layout_menu"
    android:layout_below="@id/layout_title"
    android:orientation="vertical" >
    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>
</LinearLayout> 
```

这全是 main_alllatestnewslist.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_temp"
android:layout_width="fill_parent"
android:layout_height="100px"
android:background="@drawable/background_news_list" >

<ImageView
    android:id="@+id/image_alllatestnewstitle"
    android:layout_width="134px"
    android:layout_height="80px"
    android:layout_marginBottom="5px"
    android:layout_marginLeft="10px"
    android:layout_marginRight="10px"
    android:layout_marginTop="5px"
    android:scaleType="centerCrop" />

<LinearLayout
    android:id="@+id/test"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text_particularlatestnewstitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:textSize="25px" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="25px" >

        <TextView
            android:id="@+id/text_newsdate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#999999"
            android:textSize="15px" />

        <TextView
            android:id="@+id/text_newscategorytitle"
            android:layout_width="50px"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_gravity="right"
            android:gravity="right"
            android:textColor="#ff0000"
            android:textSize="15px" />
    </RelativeLayout>
</LinearLayout> 
```

这是 main_alllatestnews.java 的一部分

```
LayoutInflater liInflater = (LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    linear.addView(liInflater
            .inflate(R.layout.main_alllatestnewslist, null));
lv = (ListView) findViewById(android.R.id.list);
for (int i = 0; i < webservice.news.size(); i++) {
    maintitle = (TextView) findViewById(R.id.text_particularlatestnewstitle);
    LinearLayout.LayoutParams layoutParams = (LinearLayout.LayoutParams)maintitle.getLayoutParams(); 
    layoutParams.setMargins(50, 0, 0, 0);       <-- method one

    maintitle.setPadding(50, 0, 0, 0);          <-- method two
    maintitle.setLayoutParams(layoutParams);

    int margin = 100;                           <-- method three
    ((MarginLayoutParams) maintitle.getLayoutParams()).leftMargin = margin;
}
SimpleAdapter adapter = new SimpleAdapter(this, fillMaps,
            R.layout.main_alllatestnewslist, from, to);
    lv.setAdapter(adapter); 
```

如您所见，我使用**三种**方法在列表视图中设置文本视图的边距/填充，但没有成功。

我正在使用 xml textview 而不是创建新的。

我想手动设置，因为我在那里得到了**if / else**语句，因为没有发布。

我完全不知道如何在java中设置它。

请给我一个可行的想法，谢谢

```
((MarginLayoutParams) maintitle.getLayoutParams()).leftMargin = margin; 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-08T03:17:22.190

`maintitle.setPadding(50, 0, 0, 0);`（方法2）应该工作。

我认为问题在于，尽管您对`TextView`.

```
SimpleAdapter adapter = new SimpleAdapter(this, fillMaps, 
            R.layout.main_alllatestnewslist, from, to); 
```

所以，制作一个自定义适配器，然后`TextView`在`getView()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-29T15:03:48.837

小心，（int）像素！= dp

```
public int dp2px(int dp) {
    return (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, context.getResources().getDisplayMetrics());
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-18T11:00:22.717

试试下面的代码，它对我有用。

> textView.setX(40);

我的解决方案适用于 SDK 14 及更高版本。不在 ListView 中，而是在 RecyclerView 中。

# file-upload - 使用 scp 从本地上传文件到 ec2

> ID：10491926
> 
> 赞同：1
> 
> 时间：2012-05-08T02:49:17.540
> 
> 标签：file-upload, amazon-ec2, web2py, scp

我正在使用 scp 将文件从本地上传到 ec2，但出现权限错误。

```
Permission denied (publickey).
lost connection 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:07:57.837

您需要上传 ssh 密钥。

这是一篇文章的链接，向您展示了如何设置：

[http://alestic.com/2010/10/ec2-ssh-keys](http://alestic.com/2010/10/ec2-ssh-keys)

另外，请参见：

[AWS ssh 访问“权限被拒绝（公钥）”问题](https://stackoverflow.com/questions/1454629/aws-ssh-access-permission-denied-publickey-issue)

# windows-8 - 如何在 Metro 风格 IE 中查看共享的 Google Doc（视频）

> ID：10491928
> 
> 赞同：0
> 
> 时间：2012-05-08T02:49:41.990
> 
> 标签：windows-8, windows-store-apps, google-docs

由于 Metro 风格的 IE 无法播放 Flash 视频，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:16:44.470

使用非 Metro 版或桌面版 IE 或使用其他浏览器。否则 - 这不是讨论此类问题的正确论坛。

# android-animation - android expandableListView 动画向上滑动？

> ID：10491932
> 
> 赞同：1
> 
> 时间：2012-05-08T02:50:43.720
> 
> 标签：android-animation, expandablelistview

当我单击 groupItem 时，我想在 expandablelistview 上向下滑动和向上滑动动画。然后我完成了向下滑动。

```
public class ExpandAnimation extends Animation {
private static final String TAG = "ExpandAnimation";
private View mAnimatedView;
private LayoutParams mViewLayoutParams;
private int mMarginStart, mMarginEnd;
private boolean mIsVisibleAfter = false;
private boolean mWasEndedAlready = false;

/**
 * Initialize the animation
 * @param view The layout we want to animate
 * @param duration The duration of the animation, in ms
 */
public ExpandAnimation(View view, int duration) {

    setDuration(duration);
    mAnimatedView = view;
    mViewLayoutParams = (LayoutParams) view.getLayoutParams();
    // if the bottom margin is 0,
    // then after the animation will end it'll be negative, and invisible.
    mIsVisibleAfter = (mViewLayoutParams.bottomMargin == 0);

    mMarginStart = mViewLayoutParams.bottomMargin;
    Log.i(TAG, "mMarginStart:>>>>>>>"+mMarginStart);
    mMarginEnd = (mMarginStart == 0 ? (0- view.getHeight()) : 0);
    Log.i(TAG, "mMarginEnd:>>>>>>>"+mMarginEnd);

    view.setVisibility(View.VISIBLE);
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
    super.applyTransformation(interpolatedTime, t);
    Log.i(TAG, "applyTransformation-->"+interpolatedTime);
    if (interpolatedTime < 1.0f) {

        // Calculating the new bottom margin, and setting it
        mViewLayoutParams.bottomMargin = mMarginStart
                + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

        // Invalidating the layout, making us seeing the changes we made
        mAnimatedView.requestLayout();

    // Making sure we didn't run the ending before (it happens!)
    } else if (!mWasEndedAlready) {
        mViewLayoutParams.bottomMargin = mMarginEnd;
        mAnimatedView.requestLayout();

        if (mIsVisibleAfter) {
            mAnimatedView.setVisibility(View.GONE);

        }
        mWasEndedAlready = true;
    }
} 
```

}

```
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    Log.i(TAG, "getChildView");
    @SuppressWarnings("unchecked")
    String text = ((Map<String, String>) getChild(groupPosition,
            childPosition)).get("child");
    if (convertView == null) {
        LayoutInflater layoutInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        convertView = layoutInflater.inflate(R.layout.child, null);

    }
    View toolbar = convertView.findViewById(R.id.toolbar);
    setAnimationView(toolbar);
    ((LinearLayout.LayoutParams) toolbar.getLayoutParams()).bottomMargin = -75;
    toolbar.setVisibility(View.GONE);
    ExpandAnimation expandAni = new ExpandAnimation(toolbar, 1000);
    toolbar.startAnimation(expandAni);
    TextView tv = (TextView) convertView.findViewById(R.id.childTo);
    tv.setText(text);

    return convertView;
} 
```

但是当我单击 groupItem 折叠组时，它没有调用 getChildView() 方法。那么我怎样才能调用 getChildView() 并让它向上滑动呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T18:22:19.217

如果你想调用（或@Override）getChildView，我相信你想扩展 BaseExpandableListAdapter。

[http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html)

# java - OHLCDataset：从/有日期获取项目

> ID：10491935
> 
> 赞同：1
> 
> 时间：2012-05-08T02:51:00.367
> 
> 标签：java, charts, dataset, coordinates, jfreechart

我有一个 JFreechart，显示股票数据，我用来绘制它的数据集类型是 OHLCDataset。

我可以从用户单击绘图的点获得实际的 X 值（我的意思是，我得到与该点对应的实际日期，而不仅仅是窗口上的坐标）。

我需要做的下一步是从与该日期对应的 OHLCDataset 中获取数据，以便能够获取该日期的 Open.High、Close 和 Low 值，但我只能找到方法来获取对应于某个日期的 OHLCDataset 日期项目（表示序数的整数），甚至不是获得具有日期的项目的一种方法。

¿关于如何获得具有日期的项目的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:53:02.707

建议的方法繁琐且容易出错。相反，添加一个，如此[处](https://stackoverflow.com/a/8002959/230513)`ChartMouseListener`所示。您可以在遇到的任何情况下调用。`getDataset()``XYItemEntity`

# machine-learning - 如何在 Weka 中尝试使用多数投票

> ID：10491936
> 
> 赞同：1
> 
> 时间：2012-05-08T02:51:11.630
> 
> 标签：machine-learning, weka

我正在研究视频中的人类动作识别。

我想通过以下方式试验我的 SVM 和随机森林分类器：

*   分别计算输入视频中每个图像的特征向量。
*   用于训练：使用训练视频中每张图像的特征向量，其标签等于其所属视频的标签
*   用于测试（使用**多数投票**）：用于对测试视频进行分类，其所有图像都被单独分类并对其标签进行投票。得票最多的标签将被选为测试视频的标签。

我想在 Weka 中实现这一点。我已经搜索但只找到了 Weka's Vote，它只能用于组合不同的分类器（不是我想要的方式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:30:34.703

我明白了，您想通过投票将来自单个分类器的多个结果组合成一个，而 Weka 的投票分类器旨在组合来自多个分类器的单个结果。

您可能已经得出了相同的结论，但是，无论如何，您可能必须为此实现自定义 Weka 过滤器，通过投票将多个结果合并为一个。

# c++ - DirectX10 GPU 上的 DirectX11 程序

> ID：10491944
> 
> 赞同：0
> 
> 时间：2012-05-08T02:52:51.947
> 
> 标签：c++, directx

所以我开始使用 Frank D.Luna 的书学习 directx11。他的例子在directx11中，不幸的是在我的macbook上我有一个directx10 gpu。尽管我修改了部分代码以包含 DirectX10 兼容性，但我使用的是 DirectX11 结构，例如`ID3D11Device`，而不是`ID3D10`. 这会引起问题吗？

编辑：

我想指出我在训练营上使用的是 Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:57:26.027

这不会引起任何问题。您可以使用 directx11 api 并在创建设备时定位您想要的功能级别。[当您使用D3D11CreateDevice](http://msdn.microsoft.com/en-us/library/ff476083%28v=vs.85%29.aspx)或[D3D11CreateDeviceAndSwapChain](http://msdn.microsoft.com/en-us/library/ff476083%28v=vs.85%29.aspx)创建设备时，您指定一个指向数组的指针以`D3D_FEATURE_LEVEL`设置功能级别（它尝试按数组的顺序创建功能级别）。如果您不知道，您也可以通过[编程](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476875%28v=vs.85%29.aspx)方式获得功能级别。

我建议阅读[MSDN 文档](http://msdn.microsoft.com/en-us/library/ff476876%28v=vs.85%29.aspx#Overview)，因为它解释了所有这些内容。

# xml - 如何从肥皂响应中检索节点？

> ID：10491948
> 
> 赞同：0
> 
> 时间：2012-05-08T02:53:08.387
> 
> 标签：xml, soap, soapui

我是 SoapUI 和 SoapUI Pro 的新手。我最近遇到了一个财产转让问题，我尝试在谷歌上搜索解决方案，但没有成功。

我正在使用来自 webservicex.net 的“国家代码”进行练习，当我运行“GetCountry”测试请求时，我会得到一个国家列表作为响应。

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <GetCountriesResponse xmlns="http://www.webserviceX.NET">
         <GetCountriesResult><![CDATA[<NewDataSet>
  <Table>
    <Name>Afghanistan, Islamic State of</Name>
  </Table>
  <Table>
    <Name>Albania</Name>
  </Table>
  <Table>
    <Name>Algeria</Name>
  </Table>
  .....
</NewDataSet>]]></GetCountriesResult>
      </GetCountriesResponse>
   </soap:Body>
</soap:Envelope> 
```

这一切都很好，直到我只想从数据集中检索一个国家，例如阿尔及利亚。这是因为我想将国家名称转移到下一个测试步骤，这是一项将国家名称作为请求的服务。我试图从响应中选择节点，但是我注意到我得到的 XPath 指向整个响应而不是其中一个节点

```
declare namespace ns1='http://www.webserviceX.NET';
//ns1:GetCountriesResponse[1]/ns1:GetCountriesResult[1] 
```

我想这对你们中的一些人来说可能是一个非常简单的问题，但是我的 XPath 技能有点限制了我自己解决它的能力。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:45:53.283

Following XPath expression getting full response is exacted.

```
declare namespace ns1='http://www.webserviceX.NET';
//ns1:GetCountriesResponse[1]/ns1:GetCountriesResult[1] 
```

Because its GetCountriesResult holds CDATA value and it's not parsed by the XML parser. So you need to get the result and put it in temporary stream and then parse and get the value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T07:31:37.833

把你的命名空间名称放在这里

```
$sxe = new SimpleXMLElement($response);
            $sxe->registerXPathNamespace('d', 'urn:schemas-microsoft-com:xml-diffgram-v1');
            $result = $sxe->xpath("//NewDataSet");
            echo "<pre>";
            //print_r($result[0]);
            foreach ($result[0] as $title) {
                print_r($title);
                //echo $title->CityID;
        } 
```

# java - jGrasp Java Break Ctrl-C 在运行期间

> ID：10491951
> 
> 赞同：0
> 
> 时间：2012-05-08T02:54:24.380
> 
> 标签：java, jgrasp

我正在为我正在尝试学习的 Java 服务器（监听）运行一个 while(true) 循环。我利用 jGrasp 进行编译和运行。

建立连接并断开连接后，服务器当然仍在“监听”

我想知道的是如何在 jGrasp 中手动发送中断（如 ctrl-c）？

我注意到简单地点击 END 会停止程序，但当然它永远不会到达 socket.close() 方法，这当然会导致其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:23:33.823

这样做的一种方法是创建一个变量并将其设置为 true 并让您的循环为 while(variable)... 然后使用调试器（不确定您是否可以在 jGrasp 中执行此操作）您可以更改如果您在循环内设置断点，则变量（为假）中间执行。在下一次循环评估中更改它之后，该变量将为 false 并且它将退出循环。

# ios - PT_CONTINUE 在 iOS 上返回“不支持操作”

> ID：10491955
> 
> 赞同：1
> 
> 时间：2012-05-08T02:54:59.493
> 
> 标签：ios, macos, jailbreak, ptrace

我希望编写一个在 iOS 越狱时使用 ptrace 的小型调试器。

现在我可以成功附加另一个进程，但是'PTRACE（PT_CONTINUE，m_tid，（caddr_t）1，数据）'总是返回'不支持操作'，错误编号为45。

我只是无法使用 PT_CONTINUE 在 iOS 上恢复进程？附加后是否有等效的方法来恢复该过程？

# asp.net - ASP.NET Linq 如何添加条件从/到日期过滤器

> ID：10491959
> 
> 赞同：0
> 
> 时间：2012-05-08T02:55:28.020
> 
> 标签：asp.net, sql, linq

基本上我想要实现的是：

*   如果输入起始日期，则日期 >= 起始日期
*   如果输入了日期，则日期 <= 到日期
*   如果两者都输入，则 date >= from date and date <= to date

所以在我的页面上，我有两个日期框，用户可以在其中选择一个日期和日期。问题是当我输入例如下面的内容时，我得到的项目实际上日期大于 2012 年 5 月 4 日，这不应该发生。我的起始日期似乎有效，但截止日期过滤器永远不会工作，因为它总是返回大于截止日期的结果。

```
if (finalApprovedFromDate != DateTime.MinValue)
{
    filteredClaims = filteredClaims.Where(cl => cl.claimStatus.Any(cs => cs.createdDate >= DateTime.Parse("05/03/2012"))).ToList();
}
if (finalApprovedToDate != DateTime.MinValue)
{
    filteredClaims = filteredClaims.Where(cl => cl.claimStatus.Any(cs => cs.createdDate <= DateTime.Parse("05/04/2012"))).ToList();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:35:54.733

根据评论修改查询。这将仅返回 statusId 为 5 在 5/3 和 5/4 之间的声明状态的声明。

```
if (finalApprovedFromDate != DateTime.MinValue)
{
    filteredClaims = filteredClaims.Where(
        cl => cl.claimStatus.Any(
            cs => cs.statusId == 5 cs.createdDate >= DateTime.Parse("05/03/2012")
        )
    ).ToList();
}
if (finalApprovedToDate != DateTime.MinValue)
{
    filteredClaims = filteredClaims.Where(
        cl => cl.claimStatus.Any(
            cs => cs.statusId == 5 && cs.createdDate <= DateTime.Parse("05/04/2012")
        )
    ).ToList();
} 
```

# ruby-on-rails - Rails：请求范围数据共享的 Thread.Current 哈希

> ID：10491961
> 
> 赞同：3
> 
> 时间：2012-05-08T02:55:31.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我计划在 ruby​​ 中使用 Thread.Current 哈希在我的 Rails 应用程序中共享每个请求范围的信息。（我知道这可能不是最好的设计决策，甚至可能会破坏 MVC）。我正在查看这里提到的方法[http://coderrr.wordpress.com/2008/04/10/lets-stop-polluting-the-threadcurrent-hash/](http://coderrr.wordpress.com/2008/04/10/lets-stop-polluting-the-threadcurrent-hash/)

这基本上为类添加了一个 thread_local_accessor 方法，并在给定线程超出范围时提供扫描。有谁知道这是否有任何其他限制或我应该注意的任何问题？或者任何其他更清洁的请求级别哈希的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T00:57:15.727

您链接到的代码不是线程安全的。它使用 ruby​​ 的 Hash 类，它不是线程安全的。您可以使用 ruby​​ 的同步原语之一来保护访问，例如 Mutex。

此外，我不相信使用由线程 id 索引的全局数据结构比仅使用 Thread.current 更好。

如果您担心密钥冲突，为什么不选择唯一密钥，例如 GUID。基于您提供的链接中的示例：

```
class ThreadedLibrary
  @@LIBRARY_ID = 'D0052660-60E6-4624-B08E-ECA9200B2949'
  Thread.current[@@LIBRARY_ID] = {}

  def self.some_setting= val
    Thread.current[@@LIBRARY_ID][:some_setting] = val
  end

  def self.some_setting
    Thread.current[@@LIBRARY_ID][:some_setting] ||= :default
  end
end 
```

# asp.net - 为 DataContext 类构造连接字符串

> ID：10491962
> 
> 赞同：1
> 
> 时间：2012-05-08T02:55:32.093
> 
> 标签：asp.net, sql, sql-server-2008, f#, f#-interactive

我看到几个 DataContext 连接字符串问题。我将尝试区分这一点：

1.  如何构造一个到数据库 localhost 的通用连接字符串？用户-PC\用户 | 一些数据库...（由 Microsoft SQL 2008 托管/管理）

2.  我注意到它是 IDisposable。因此，如果我有多个用户访问我的站点，我的代码一次只能访问一个数据库实例，并且必须等到每个实例都被释放，才能使每个用户的数据保持一致？

3.  是否有可能以某种方式在 F#-Interactive 中启用 LINQ，并从那里连接到数据库？我无法弄清楚如何将 System.Data dll 启用/加载到 fsi 中。也许这是我的安装所独有的，或者它是一个共同的线程？（即，我的安装也无法识别 windows.base.dll——我必须从程序\参考程序集中手动获取它）。

无论如何，我已经非常明确地发现

```
let x = new System.Data.Linq.DataContext("localhost") 
```

...不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:11:11.400

> 1）如何构造一个到数据库的通用连接字符串？

没有通用的方法来构造连接字符串。最好的办法是将连接字符串保存在某个配置文件中，您可以在其中根据您的配置（SQL Server 机器的名称、身份验证选项、它是基于文件的数据库还是普通数据库）来更改它。有一个[网站提供了大多数选项的示例](http://www.connectionstrings.com/sql-server-2008)。

> 2）我注意到它是 IDisposable。因此，如果我有多个用户访问我的网站，我的代码一次只能访问一个数据库实例 [...]？

不，这不是`DataContext`工作方式。`DataContext`不会保持与服务器的实时连接，这会阻止其他任何人使用 SQL 服务器。它保留一些状态（即已经获得的缓存实体）并使用[乐观并发](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)来确保状态是一致的（如果您想要的话，您可以使用事务来阻止其他连接）。

> 3) 是否有可能以某种方式在 F#-Interactive [...] 中启用 LINQ？

那应该不是问题。`#r "foo.dll"`您可以在 F# 交互中使用引用程序集。F# 2.0 的典型方法是使用 C# 工具生成数据上下文，然后引用它（对于 F# 3.0，事情更容易，因为您可以使用类型提供程序）。

如果您在 C# 中生成 LINQ to SQL 数据上下文`Northwind`，则 F# Interactive 使用将如下所示：

```
#r @"<whatever_path>\Northwind.dll"
#r "System.Data.Linq.dll"

open Northwind
open Microsoft.FSharp.Linq

let connStr = @"Data Source=.\SQLEXPRESS;AttachDbFilename=<path>\NORTHWND.MDF;" +
              @"Integrated Security=True;User Instance=True"

let operation () =
   // Using 'use' to make sure it gets disposed at the end
   use db = new NorthwindDataContext(connStr)
   // do something with the database 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:23:54.287

实际上有一种构造连接字符串的通用方法：

```
open System.Data.Common
open System.Data.SqlClient

let providerName = "System.Data.SqlClient"
let factory = DbProviderFactories.GetFactory(providerName)
let cnBuilder = factory.CreateConnectionStringBuilder() :?> SqlConnectionStringBuilder
cnBuilder.DataSource <- "localhost"
cnBuilder.InitialCatalog <- "MyDatabase"
cnBuilder.IntegratedSecurity <- true
let connStr = cnBuilder.ConnectionString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:43:55.437

我的方法是拥有 1 个连接字符串，然后将其用于我的所有 DataContext 连接。所以这段代码基于 MyConnString 构建了 EntityConnectionString：

```
protected override MyEntities CreateObjectContext()
   {
      string ConnString =ConfigurationManager.ConnectionStrings["MyConnString"];

      string seConn = ConfigurationManager.ConnectionStrings["MyEntities"].ToString();

      EntityConnectionStringBuilder ecsb = new EntityConnectionStringBuilder(seConn);
      ecsb.ProviderConnectionString = ConnString;

      EntityConnection ec = new EntityConnection(ecsb.ToString());

      ScheduleEntities ctx = new ScheduleEntities(ec);

      return ctx;

} 
```

# java - Java：PhantomReference 的实际使用？

> ID：10491964
> 
> 赞同：2
> 
> 时间：2012-05-08T02:55:36.180
> 
> 标签：java, phantom-reference

> **可能重复：**
> [您是否曾经在任何项目中使用过 Phantom 参考？](https://stackoverflow.com/questions/1599069/have-you-ever-used-phantom-reference-in-any-project)

PhantomReference 的实际用途是什么？由于他们的'get'总是返回null，他们指向的对象不能通过他们访问。那么它们有什么用呢？也许是通过子类化（类似于 WeakReference 在 WeakHashMap 中的子类化方式）？

# php - 替换字符串中任何括号括起来的单词的所有出现

> ID：10491967
> 
> 赞同：2
> 
> 时间：2012-05-08T02:56:03.410
> 
> 标签：php, replace

我通常自己解决 PHP 问题的效率很高，但是对于这个特定的问题，我似乎找不到可行的解决方案。

我有一个由标准文本组成的 $string，在文本中会有一些被 [方括号] 包围的关键字，我想将其转换为链接，但是将字符串与预定义数组进行比较并不是一个简单的例子'known' 关键字并进行简单替换，因为 [方括号] 的内容可以是任何内容。

例如，我需要以下内容：

```
John Roberts is a jazz musician from Florida born in 1934\. Some of his notable works include [A Gray Sky] and [Sophomore Effort]. 
```

应该变成如下：

```
John Roberts is a jazz musician from Florida born in 1934\. Some of his notable works include <a href="search.php?search=a+gray+sky">A Gray Sky</a> and <a href="search.php?search=sophomore+effort">Sophomore Effort</a>. 
```

应当指出的是：

*   $string 将包含未知数量的 [括号中的单词]。
*   如果会引起问题，使用方括号并不是必需的，但目前在我看来这是最方便的方法。

我不是要求有人给我代码，我需要的只是有人告诉我应该研究什么样的 PHP 函数并指出正确的方向！

非常感谢大家，也感谢 Stackoverflow 让我有机会提问！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T03:06:08.530

```
$string = "John Roberts is a jazz musician from Florida born in 1934\. Some of his notable works include [A Gray Sky] and [Sophomore Effort].";

function rep_callback($match)
{
        $query = substr($match[0],1,-1);
        $query = urlencode($query);
        $link = '<a href="search.php?search='.$query.'">'.$match[0].'</a>';
        return $link;
}

echo $string."\n";
echo preg_replace_callback("/\[.+\]/U", "rep_callback", $string)."\n"; 
```

输出：

```
John Roberts is a jazz musician from Florida born in 1934\. Some of his notable works include [A Gray Sky] and [Sophomore Effort].
John Roberts is a jazz musician from Florida born in 1934\. Some of his notable works include <a href="search.php?search=A+Gray+Sky">[A Gray Sky]</a> and <a href="search.php?search=Sophomore+Effort">[Sophomore Effort]</a>. 
```

# c# - 捕获网页作为通过电子邮件发送的图像

> ID：10491970
> 
> 赞同：0
> 
> 时间：2012-05-08T02:56:25.953
> 
> 标签：c#, html-email

如何将网页捕获为图像并将其嵌入到电子邮件中发送。

这就是我想做的。

用户登录本网站。他们将浏览许多产品，当他们单击电子邮件按钮时，将捕获包含产品列表的网页并将其发送到嵌入在电子邮件正文中的电子邮件地址。

我想使用的技术：C# .net

客户的信息存储在 SQL 服务器数据库中。

我一直在尝试使用网络浏览器控制，但我不知道这是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:09:37.543

“捕获”实际上是物理图像重要还是订单内容最重要？如果您可以发送订单的内容，即订单行，您可以将与您在浏览器中输出的完全相同的 HTML 放入您要发送的电子邮件中，使用[`MailMessage`](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)类：

```
using (MailMessage message = new MailMessage("from@example.com", "to@example.com"))
{
    message.Subject = "Your order";
    message.Body = "<ul><li>Your</li><li>Order</li><li>Lines</li><li>Here</li></ul>";
    message.IsBodyHtml = true;

    using (SmtpClient smtp = new SmtpClient("smtp.host.example"))
    {
        smtp.Send(message);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-19T12:43:23.943

您可以使用可免费安装的 chrome 网上商店的屏幕截图扩展程序将网页捕获为高质量图像。只需单击几下，您就可以捕获可见屏幕、整页或自定义区域捕获。捕获图像后，您可以将其保存为 PDF 或 PNG，然后使用保存的图像通过邮件发送给相关方。

您可以使用的一种此类工具可能是[Goscreenshotting - Screenshotting 扩展程序](https://goscreenshotting.com/)，它可以帮助您以多种方式和格式保存屏幕截图，以便通过邮件或任何其他媒体共享。

您还可以使用 Windows 上的股票应用程序捕获网页 - 截图工具。但这只会允许可见屏幕和自定义区域剪辑，而不是全屏捕获。如果您使用的是 Mac OS，您将能够使用以下快捷方式捕获屏幕：

*   命令 + Shift + 3
*   命令 + Shift + 4
*   命令 + Shift + 5

# php - PHP Parse 错误：语法错误，意外 $end

> ID：10491971
> 
> 赞同：0
> 
> 时间：2012-05-08T02:56:33.557
> 
> 标签：php, parse-error

这是我正在开发的 wordpress 插件的代码。

```
 <?php
    /*
        Plugin Name: My Javascript Plugin
    */

    // add the admin options page
    add_action('admin_menu', 'plugin_admin_add_page');
    function plugin_admin_add_page() {
    add_menu_page('Jesus Is Lord', 'Lord Jesus', 'manage_options', 'plugin', 
                  'plugin_options_page');

    }
    ?>

    <?php 
    // display the admin options page
    function plugin_options_page() {
    ?>
    <div>
    <h2>Jesus Is Lord</h2>
    In the beginning God created the Heavens and the Earth.

    <form action="options.php" method="post">
    <?php settings_fields('plugin_options'); ?>
    <?php do_settings_sections('plugin'); ?>        
    <input name="Submit" type="submit" value="<?php esc_attr_e('Jesus Saves'); ?>" />
    </form>
    </div>
    <?php } ?>

    <?php 
    add_action('admin_init', 'plugin_admin_init');
    function plugin_admin_init(){
    register_setting( 'plugin_options', 'plugin_options', 'plugin_options_validate' );
    add_settings_section('plugin_main', 'Main Settings', 'plugin_section_text', 
                        'plugin');
    add_settings_field('plugin_text_string', 'Plugin Text Input', 
                       'plugin_setting_string', 'plugin', 'plugin_main');
    ?> 
```

我是插件开发的新手，我不知道为什么会出现这个错误：

```
Parse error: syntax error, unexpected $end in C:\xampp\htdocs\...\wp-content\plugins\myjavascriptplugin\myjavascriptplugin.php on line 42 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:58:43.053

您永远不会关闭该功能`plugin_admin_init`。

您在代码中`}`的 final 之前缺少一个右大括号。`?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T03:25:37.723

`}`您的代码中缺少 a

# java - 链接列表头引用分配给Java中的链接列表对象

> ID：10491976
> 
> 赞同：0
> 
> 时间：2012-05-08T02:57:43.753
> 
> 标签：java, object, linked-list, abstract-data-type

以下拆分器方法旨在返回两个独立链表的 IntLinkedBag 数组。它通过调用 listSplitLessGreater 方法并传递整数链表的头引用和一个拆分器整数值来完成此操作，该拆分器整数值返回一个 IntNode 数组，该数组包含两个已排序的新整数链表的头引用。拆分器方法按书面方式工作。这是我让它工作的唯一方法。但我知道必须有一种更简单/更好的编码方式。// ***** ** *** ** *** ***我想用这个替换

```
newLists[0].head = answer[0]; 
newLists[1].head = answer[1]; 
```

但是当我这样做时，我在运行程序时收到空指针豁免错误。我的问题是为什么？以及编写此代码的正确方法是什么？

```
 public IntLinkedBag[] splitter(int target)
{
    IntLinkedBag[] newLists = new IntLinkedBag[2]; 
    IntNode[] answer = new IntNode[2];
    answer = IntNode.listSplitLessGreater(head, target);

    //**********************************
    IntLinkedBag b = new IntLinkedBag();
    IntLinkedBag c = new IntLinkedBag();
    b.add(5);
    b.head = answer[0];
    newLists[0] = b;
    c.add(5);
    c.head = answer[1];
    newLists[1] = c;
    //**********************************

    return newLists;
} 
```

我更新了我的代码，如下所示。我没有收到任何错误，但它现在没有返回任何内容。即使测试代码打印链接列表....和想法？

```
 public IntLinkedBag[] splitter(int target)
{
    IntLinkedBag[] newLists = {new IntLinkedBag(), new IntLinkedBag()}; 

    IntNode[] answer = new IntNode[2];
    answer = IntNode.listSplitLessGreater(head, target);

        newLists[0].head = answer[0]; 
    newLists[1].head = answer[1];

    System.out.println(IntNode.showList(newLists[0].head)); //test code
    System.out.println(IntNode.showList(newLists[1].head)); //test code

    return newLists;
} 
```

添加此代码可以使其正常工作，但为什么需要这样做？

```
newLists[0].add(5); //adding a number to linked list to create a temporary head.
newLists[1].add(5); //don't know why I have to have this but its only way code works correctly 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:01:50.980

`newlists[0]`在or内部实际上没有初始化任何内容`newlists[1]`；该数组在创建时创建默认值`null`。

尝试这样的事情：

```
IntLinkedBag[] newLists = new IntLinkedBag[2];
for(int i = 0; i < newLists.length; i++) {
    newLists[i] = new IntLinkedBag();
} 
```

更紧凑，你可以这样做：

```
IntLinkedBag[] newLists = {new IntLinkedBag(), new IntLinkedBag()}; 
```

这在没有循环的情况下做同样的事情。

# python - 带有嵌套“[”的正则表达式

> ID：10491978
> 
> 赞同：2
> 
> 时间：2012-05-08T02:57:49.947
> 
> 标签：python, regex

我熟悉正则表达式，但这个复杂的例子让我很吃惊。我试图了解这行代码在做什么：

```
r'/(\\.|[^[/\\\n]|\[(\\.|[^\]\\\n])*])+/([gim]+\b|\B)' 
```

这是一个试图检测正则表达式的代码片段，例如：`/\s+/`. 我理解它，直到嵌套`[`的`\[`, 和`(`对应物。

（我需要将此代码从 Python 移植到 Java，并且无法理解上述代码的工作原理，以及为什么它不能像在 Java 中那样工作。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T03:02:46.873

这是一个可能有帮助的分解版本：

```
/                      # Match an opening slash
(                      # Followed by one or more...
  \\.                  #    Backslash followed by any character
  |                    #   or...
  [^[/\\\n]            #    Something that's not a [, /, \, or newline
  |                    #   or...
  \[                   #    A literal [, followed by any number of...
    (
      \\.              #     backslashes followed by any character
      |                #     or...
      [^\]\\\n]        #     something that's not a ], \, or newline
    )*
  ]                    #    and ending with a ]
)+
/                      # And a closing slash
(
  [gim]+\b             # Followed by one or more of g, i, m
  |
  \B                   # or something that isn't a word boundary
) 
```

# php - mssql_bind 在异构服务器中不起作用

> ID：10491981
> 
> 赞同：0
> 
> 时间：2012-05-08T02:57:57.683
> 
> 标签：php, sql-server, bind, procedures

我在 linux 服务器上有 PHP，在 windows 服务器上有 mssql 2005，每当我尝试将 php 与 mssql 连接时，在执行存储过程时它会给我错误，我的代码如下

```
mssql_connect('DBSERVER', 'sa', 'password');  
mssql_select_db('tst');

// Create a new stored prodecure
$stmt = mssql_init('sp_report');

// Bind the field names
mssql_bind($stmt, '@username',  'test',  SQLVARCHAR,  false,  false,  60);
mssql_bind($stmt, '@name',      'johndoe',  SQLVARCHAR,  false,  false,  60);
mssql_bind($stmt, '@age',       19,       SQLINT1,     false,  false,   3);

// Execute
mssql_execute($stmt); 
```

下面的代码如何运行良好

```
 exec sp_report 'test','johndoe','19' 
```

如果我也在同一台服务器（数据库所在的服务器）上托管 php，则两个代码都运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:39:59.367

我认为问题在于 Linux 服务器上没有安装 PHP 的 MS-SQL 驱动程序。

# android - ScheduledExecutorService 计划问题

> ID：10491987
> 
> 赞同：0
> 
> 时间：2012-05-08T02:58:16.460
> 
> 标签：android

我有一个发送延迟文本的应用程序。我这样称呼它：

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
long delay = cal.getTimeInMillis();
smsControl.sendSMSLater(phoneNumber, msg, (date - delay)); 
```

剩下的就是：

```
class smsControl {

static ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(1);

public static void sendSMSLater(final String phoneNumber, final String msg, long date) {
    ScheduledFuture scheduledFuture = scheduledExecutorService.schedule(new Callable() {
        public Object call() throws Exception {
            SmsManager smsManager = SmsManager.getDefault();
            String smsNumber = phoneNumber;
            String smsText = msg;
            smsManager.sendTextMessage(smsNumber, null, smsText, null, null);
            return "Sent!";
        }
    }, date, TimeUnit.MILLISECONDS);

} 
```

}

问题是它不等待延迟的时间日期。它在不久之后发送它。任何见解都有帮助！谢谢！

# netbeans - 在项目资源管理器中转到文件位置的 NetBeans 快捷方式

> ID：10491988
> 
> 赞同：7
> 
> 时间：2012-05-08T02:58:22.503
> 
> 标签：netbeans

什么是 netbeans 快捷方式：当我存档时，如果我必须在左侧导航“项目资源管理器”中找出文件的位置？

在eclipse中，我们曾经有两个箭头，如果我点击它，它将展开目录并将我们带到文件所在的位置。netbeans有什么类似的快捷方式吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T05:20:42.980

使用该`Ctrl + Shift + 1`组合在 Project Explorer 中选择当前聚焦的编辑器视图的文件。

仅供参考，您可以使用`Ctrl + Shift + 2`组合在文件资源管理器中选择文件。

# iphone - 目标c中的sqlite3多线程

> ID：10491989
> 
> 赞同：3
> 
> 时间：2012-05-08T02:58:38.160
> 
> 标签：iphone, objective-c, ios, multithreading, sqlite

我正在使用 dispatch_async 在我的应用程序中运行一个后台线程，有时我的主线程和后台线程都同时访问数据库，这给了我一个数据库错误，我试图通过使用 sqlite3_threadsafe() 来解决它，它总是返回 2即，我不能在两个线程中使用相同的数据库连接，我希望它返回 1 任何人都可以在这方面帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T03:17:38.743

我认为你正在追求错误的方法。无论您如何编译 SQLite，它都不是可靠的线程安全的——请参阅[常见问题解答](http://sqlite.org/faq.html#q6)。即使 SQLite 是为线程安全而编译的，如果任何事务未决或任何语句仍未完成，则可能无法从多个线程使用同一数据库。

上面关于使用 Grand Central Dispatch 将所有 SQLite 访问汇集到串行调度队列中的建议在我看来是正确的方法，尽管我更有可能建议您创建自己的队列而不是使用主队列当您想要等待结果时，您可以可靠地 dispatch_sync 的简单原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T03:15:56.577

您可以将所有访问语句添加到，因此在访问 sqlite 存储时您始终在主线程上。

```
dispatch_async(dispatch_get_main_queue(), ^ {
    //code goes here
}); 
```

# visual-studio-2010 - Nunit 未在 Visual Studio 调试模式下运行 SetUp 方法

> ID：10491996
> 
> 赞同：8
> 
> 时间：2012-05-08T02:59:30.663
> 
> 标签：visual-studio-2010, unit-testing, nunit, installation

我正在尝试在调用 setup 方法后调试测试，并且测试取决于调用的 setup 方法。

我正在使用 Nunit 2.6.0.12051 测试一个 .Net 4.0 类库。nunit Visual Studio 项目有一个标有 [SetUpFixture] 的类和一个标有 [SetUp] 的方法。

如果我从 NUnit gui 运行测试，我相当确定 setup 属性类被调用（因为它现在没有在 setup 类停止并出现运行时错误）但我无法调试它. 如果我尝试更改设置以查看详细跟踪，NUnit gui 会引发未处理的异常。

如果我通过测试视图/调试选择从 Visual Studio 运行测试，设置方法的断点不会停止执行，并且方法内的跟踪语句不会在调试窗口中打印。所以我确定设置方法没有被调用。

虽然我可以将设置类更改为所有测试类的基础，但我只需要运行一次该方法。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-05T16:51:06.937

我刚刚遇到了这个问题，最终从[NUnit SetUpFixture 文档](http://nunit.org/index.php?p=setupFixture&r=2.6.3 "NUnit SetUpFixture 文档")中找到了这个重要的句子：

“这是标记一个类的属性，该类包含给定命名空间下所有测试装置的一次性设置或拆卸方法。”

原来我的 SetUpFixture 类与我的测试在一个完全不同的命名空间中，所以它没有被运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T08:19:31.870

在使用来自 NuGet (2.6) 的最新 NUnit 时，我也注意到了这一点。[Setup] 方法不会在 [Test] 方法之前运行。

我不知道他们为什么改变了 NUnit 的这个相当重要的部分，但我为了我的目的修复了它，返回到在 [Test] 之前运行 [Setup] 的版本 2.5.10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T20:01:13.330

我也遇到了这个问题，但是安装最新版本的测试运行器（在我的例子中是 TestDriven.NET）修复了它。对我来说这不是 NUnit 问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-01T13:31:47.113

我刚刚遇到了类似的问题。我的单元测试也没有调用设置。阅读 NUnit 文档后。在最佳答案中提到，我认为我的解决方案非常简单。简单来说，我错过了“设置”。阅读文档后意识到。

*来自顶级答案中提到的[NUnit SetUpFixture 文档](https://nunit.org/docs/2.6.3/setupFixture.html)的示例。

```
[SetUp] 
RunBeforeAnyTests()
{
//
}

----------------------------------------------------

// this was my fixed up code
// simply added [Setup] and boom, bob is your uncle.

[SetUp] 
public void Setup()
{
    readChoice.Reset();
} 
```

# jquery - 如何覆盖“onkeyup”事件触发器以允许使用箭头键导航表行？

> ID：10491999
> 
> 赞同：1
> 
> 时间：2012-05-08T03:00:24.877
> 
> 标签：jquery, javascript-events

我创建了一个简单的搜索字段，当用户输入输入字段时，它将在相关搜索结果中进行 ajax。一切都很好，除了一件事。输入字段有一个“onkeyup”事件，该事件触发一个 jQuery 函数，该函数抓取搜索结果，这些结果在表格中显示给用户。第一个结果（行）突出显示。我想让用户使用箭头键在搜索结果表中上下导航。但是，由于输入字段具有“onkeyup”事件触发器，所以只要我按下向下箭头键（短暂突出显示下一个表格行），我的“onkeyup”jQuery 函数就会再次触发，重新突出显示第一个搜索结果（第一个排）。我需要一种方法来防止每次“未按下”箭头键时触发“onkeyup”功能。这有意义吗？我是以错误的方式接近这个吗？这是一些代码：

HTML：

```
<input id="search" type="text" onkeyup="showResult(this.value)" /> 
```

jQuery：

```
function showResult(str)
{
    var e = str.charAt( str.length-1 )

    if(e.keyCode == 38 || e.keyCode == 40)
    {
        $(document).keydown(function(e)
        {
            if (e.keyCode == 40)
            { 
               $('tr.highlight').next("tr").addClass("highlight");
               $('tr.highlight:first').removeClass("highlight");
               return false;
            }
            else if (e.keyCode == 38)
            { 
               $('tr.highlight').prev("tr").addClass("highlight");
               $('tr.highlight:last').removeClass("highlight");
               return false;
            }
        });
    else
    {
        // code that gets the search results
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:23:14.980

你很接近，但一个更简单的解决方案是：

现场示例：http: [//jsfiddle.net/EwB6s/1/](http://jsfiddle.net/EwB6s/1/)

JavaScript

```
$(function(){    
    $('#search').keyup(function(e){
        if(e.keyCode == 38 || e.keyCode == 40){
            if (e.keyCode == 40){ 
               alert('down'); 
               return false;
            }
            else if (e.keyCode == 38){ 
               alert('up'); 
               return false;
            }
        }else{
            // code that gets the search results
            alert('ajax'); 
        }
    }); 
}); 
```

​</p>

HTML

```
<input id='search' type='text' />​ 
```